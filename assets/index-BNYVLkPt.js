var lL=Object.defineProperty;var UN=e=>{throw TypeError(e)};var sL=(e,t,a)=>t in e?lL(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;var Z=(e,t,a)=>sL(e,typeof t!="symbol"?t+"":t,a),Fm=(e,t,a)=>t.has(e)||UN("Cannot "+a);var le=(e,t,a)=>(Fm(e,t,"read from private field"),a?a.call(e):t.get(e)),Ye=(e,t,a)=>t.has(e)?UN("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,a),Ue=(e,t,a,i)=>(Fm(e,t,"write to private field"),i?i.call(e,a):t.set(e,a),a),be=(e,t,a)=>(Fm(e,t,"access private method"),a);function rL(e,t){for(var a=0;a<t.length;a++){const i=t[a];if(typeof i!="string"&&!Array.isArray(i)){for(const l in i)if(l!=="default"&&!(l in e)){const r=Object.getOwnPropertyDescriptor(i,l);r&&Object.defineProperty(e,l,r.get?r:{enumerable:!0,get:()=>i[l]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const r of l)if(r.type==="childList")for(const d of r.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function a(l){const r={};return l.integrity&&(r.integrity=l.integrity),l.referrerPolicy&&(r.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?r.credentials="include":l.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(l){if(l.ep)return;l.ep=!0;const r=a(l);fetch(l.href,r)}})();function mT(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function cL(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var a=function i(){return this instanceof i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};a.prototype=t.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var l=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(a,i,l.get?l:{enumerable:!0,get:function(){return e[i]}})}),a}var zm={exports:{}},Su={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xN;function uL(){if(xN)return Su;xN=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function a(i,l,r){var d=null;if(r!==void 0&&(d=""+r),l.key!==void 0&&(d=""+l.key),"key"in l){r={};for(var E in l)E!=="key"&&(r[E]=l[E])}else r=l;return l=r.ref,{$$typeof:e,type:i,key:d,ref:l!==void 0?l:null,props:r}}return Su.Fragment=t,Su.jsx=a,Su.jsxs=a,Su}var kN;function dL(){return kN||(kN=1,zm.exports=uL()),zm.exports}var c=dL(),jm={exports:{}},Iu={},Ym={exports:{}},Km={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PN;function hL(){return PN||(PN=1,function(e){function t(F,w){var K=F.length;F.push(w);e:for(;0<K;){var W=K-1>>>1,D=F[W];if(0<l(D,w))F[W]=w,F[K]=D,K=W;else break e}}function a(F){return F.length===0?null:F[0]}function i(F){if(F.length===0)return null;var w=F[0],K=F.pop();if(K!==w){F[0]=K;e:for(var W=0,D=F.length,Y=D>>>1;W<Y;){var z=2*(W+1)-1,B=F[z],ee=z+1,he=F[ee];if(0>l(B,K))ee<D&&0>l(he,B)?(F[W]=he,F[ee]=K,W=ee):(F[W]=B,F[z]=K,W=z);else if(ee<D&&0>l(he,K))F[W]=he,F[ee]=K,W=ee;else break e}}return w}function l(F,w){var K=F.sortIndex-w.sortIndex;return K!==0?K:F.id-w.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;e.unstable_now=function(){return r.now()}}else{var d=Date,E=d.now();e.unstable_now=function(){return d.now()-E}}var h=[],A=[],R=1,T=null,S=3,I=!1,C=!1,_=!1,b=!1,y=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;function M(F){for(var w=a(A);w!==null;){if(w.callback===null)i(A);else if(w.startTime<=F)i(A),w.sortIndex=w.expirationTime,t(h,w);else break;w=a(A)}}function G(F){if(_=!1,M(F),!C)if(a(h)!==null)C=!0,H||(H=!0,de());else{var w=a(A);w!==null&&J(G,w.startTime-F)}}var H=!1,P=-1,q=5,ne=-1;function Ee(){return b?!0:!(e.unstable_now()-ne<q)}function ue(){if(b=!1,H){var F=e.unstable_now();ne=F;var w=!0;try{e:{C=!1,_&&(_=!1,U(P),P=-1),I=!0;var K=S;try{t:{for(M(F),T=a(h);T!==null&&!(T.expirationTime>F&&Ee());){var W=T.callback;if(typeof W=="function"){T.callback=null,S=T.priorityLevel;var D=W(T.expirationTime<=F);if(F=e.unstable_now(),typeof D=="function"){T.callback=D,M(F),w=!0;break t}T===a(h)&&i(h),M(F)}else i(h);T=a(h)}if(T!==null)w=!0;else{var Y=a(A);Y!==null&&J(G,Y.startTime-F),w=!1}}break e}finally{T=null,S=K,I=!1}w=void 0}}finally{w?de():H=!1}}}var de;if(typeof L=="function")de=function(){L(ue)};else if(typeof MessageChannel<"u"){var fe=new MessageChannel,Q=fe.port2;fe.port1.onmessage=ue,de=function(){Q.postMessage(null)}}else de=function(){y(ue,0)};function J(F,w){P=y(function(){F(e.unstable_now())},w)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(F){F.callback=null},e.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<F?Math.floor(1e3/F):5},e.unstable_getCurrentPriorityLevel=function(){return S},e.unstable_next=function(F){switch(S){case 1:case 2:case 3:var w=3;break;default:w=S}var K=S;S=w;try{return F()}finally{S=K}},e.unstable_requestPaint=function(){b=!0},e.unstable_runWithPriority=function(F,w){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var K=S;S=F;try{return w()}finally{S=K}},e.unstable_scheduleCallback=function(F,w,K){var W=e.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?W+K:W):K=W,F){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=K+D,F={id:R++,callback:w,priorityLevel:F,startTime:K,expirationTime:D,sortIndex:-1},K>W?(F.sortIndex=K,t(A,F),a(h)===null&&F===a(A)&&(_?(U(P),P=-1):_=!0,J(G,K-W))):(F.sortIndex=D,t(h,F),C||I||(C=!0,H||(H=!0,de()))),F},e.unstable_shouldYield=Ee,e.unstable_wrapCallback=function(F){var w=S;return function(){var K=S;S=w;try{return F.apply(this,arguments)}finally{S=K}}}}(Km)),Km}var wN;function EL(){return wN||(wN=1,Ym.exports=hL()),Ym.exports}var Vm={exports:{}},Qe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GN;function fL(){if(GN)return Qe;GN=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),r=Symbol.for("react.consumer"),d=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),A=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),T=Symbol.iterator;function S(D){return D===null||typeof D!="object"?null:(D=T&&D[T]||D["@@iterator"],typeof D=="function"?D:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,_={};function b(D,Y,z){this.props=D,this.context=Y,this.refs=_,this.updater=z||I}b.prototype.isReactComponent={},b.prototype.setState=function(D,Y){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,Y,"setState")},b.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function y(){}y.prototype=b.prototype;function U(D,Y,z){this.props=D,this.context=Y,this.refs=_,this.updater=z||I}var L=U.prototype=new y;L.constructor=U,C(L,b.prototype),L.isPureReactComponent=!0;var M=Array.isArray,G={H:null,A:null,T:null,S:null,V:null},H=Object.prototype.hasOwnProperty;function P(D,Y,z,B,ee,he){return z=he.ref,{$$typeof:e,type:D,key:Y,ref:z!==void 0?z:null,props:he}}function q(D,Y){return P(D.type,Y,void 0,void 0,void 0,D.props)}function ne(D){return typeof D=="object"&&D!==null&&D.$$typeof===e}function Ee(D){var Y={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(z){return Y[z]})}var ue=/\/+/g;function de(D,Y){return typeof D=="object"&&D!==null&&D.key!=null?Ee(""+D.key):Y.toString(36)}function fe(){}function Q(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(fe,fe):(D.status="pending",D.then(function(Y){D.status==="pending"&&(D.status="fulfilled",D.value=Y)},function(Y){D.status==="pending"&&(D.status="rejected",D.reason=Y)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function J(D,Y,z,B,ee){var he=typeof D;(he==="undefined"||he==="boolean")&&(D=null);var se=!1;if(D===null)se=!0;else switch(he){case"bigint":case"string":case"number":se=!0;break;case"object":switch(D.$$typeof){case e:case t:se=!0;break;case R:return se=D._init,J(se(D._payload),Y,z,B,ee)}}if(se)return ee=ee(D),se=B===""?"."+de(D,0):B,M(ee)?(z="",se!=null&&(z=se.replace(ue,"$&/")+"/"),J(ee,Y,z,"",function(Oe){return Oe})):ee!=null&&(ne(ee)&&(ee=q(ee,z+(ee.key==null||D&&D.key===ee.key?"":(""+ee.key).replace(ue,"$&/")+"/")+se)),Y.push(ee)),1;se=0;var Ae=B===""?".":B+":";if(M(D))for(var Re=0;Re<D.length;Re++)B=D[Re],he=Ae+de(B,Re),se+=J(B,Y,z,he,ee);else if(Re=S(D),typeof Re=="function")for(D=Re.call(D),Re=0;!(B=D.next()).done;)B=B.value,he=Ae+de(B,Re++),se+=J(B,Y,z,he,ee);else if(he==="object"){if(typeof D.then=="function")return J(Q(D),Y,z,B,ee);throw Y=String(D),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return se}function F(D,Y,z){if(D==null)return D;var B=[],ee=0;return J(D,B,"","",function(he){return Y.call(z,he,ee++)}),B}function w(D){if(D._status===-1){var Y=D._result;Y=Y(),Y.then(function(z){(D._status===0||D._status===-1)&&(D._status=1,D._result=z)},function(z){(D._status===0||D._status===-1)&&(D._status=2,D._result=z)}),D._status===-1&&(D._status=0,D._result=Y)}if(D._status===1)return D._result.default;throw D._result}var K=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)};function W(){}return Qe.Children={map:F,forEach:function(D,Y,z){F(D,function(){Y.apply(this,arguments)},z)},count:function(D){var Y=0;return F(D,function(){Y++}),Y},toArray:function(D){return F(D,function(Y){return Y})||[]},only:function(D){if(!ne(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},Qe.Component=b,Qe.Fragment=a,Qe.Profiler=l,Qe.PureComponent=U,Qe.StrictMode=i,Qe.Suspense=h,Qe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=G,Qe.__COMPILER_RUNTIME={__proto__:null,c:function(D){return G.H.useMemoCache(D)}},Qe.cache=function(D){return function(){return D.apply(null,arguments)}},Qe.cloneElement=function(D,Y,z){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var B=C({},D.props),ee=D.key,he=void 0;if(Y!=null)for(se in Y.ref!==void 0&&(he=void 0),Y.key!==void 0&&(ee=""+Y.key),Y)!H.call(Y,se)||se==="key"||se==="__self"||se==="__source"||se==="ref"&&Y.ref===void 0||(B[se]=Y[se]);var se=arguments.length-2;if(se===1)B.children=z;else if(1<se){for(var Ae=Array(se),Re=0;Re<se;Re++)Ae[Re]=arguments[Re+2];B.children=Ae}return P(D.type,ee,void 0,void 0,he,B)},Qe.createContext=function(D){return D={$$typeof:d,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:r,_context:D},D},Qe.createElement=function(D,Y,z){var B,ee={},he=null;if(Y!=null)for(B in Y.key!==void 0&&(he=""+Y.key),Y)H.call(Y,B)&&B!=="key"&&B!=="__self"&&B!=="__source"&&(ee[B]=Y[B]);var se=arguments.length-2;if(se===1)ee.children=z;else if(1<se){for(var Ae=Array(se),Re=0;Re<se;Re++)Ae[Re]=arguments[Re+2];ee.children=Ae}if(D&&D.defaultProps)for(B in se=D.defaultProps,se)ee[B]===void 0&&(ee[B]=se[B]);return P(D,he,void 0,void 0,null,ee)},Qe.createRef=function(){return{current:null}},Qe.forwardRef=function(D){return{$$typeof:E,render:D}},Qe.isValidElement=ne,Qe.lazy=function(D){return{$$typeof:R,_payload:{_status:-1,_result:D},_init:w}},Qe.memo=function(D,Y){return{$$typeof:A,type:D,compare:Y===void 0?null:Y}},Qe.startTransition=function(D){var Y=G.T,z={};G.T=z;try{var B=D(),ee=G.S;ee!==null&&ee(z,B),typeof B=="object"&&B!==null&&typeof B.then=="function"&&B.then(W,K)}catch(he){K(he)}finally{G.T=Y}},Qe.unstable_useCacheRefresh=function(){return G.H.useCacheRefresh()},Qe.use=function(D){return G.H.use(D)},Qe.useActionState=function(D,Y,z){return G.H.useActionState(D,Y,z)},Qe.useCallback=function(D,Y){return G.H.useCallback(D,Y)},Qe.useContext=function(D){return G.H.useContext(D)},Qe.useDebugValue=function(){},Qe.useDeferredValue=function(D,Y){return G.H.useDeferredValue(D,Y)},Qe.useEffect=function(D,Y,z){var B=G.H;if(typeof z=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return B.useEffect(D,Y)},Qe.useId=function(){return G.H.useId()},Qe.useImperativeHandle=function(D,Y,z){return G.H.useImperativeHandle(D,Y,z)},Qe.useInsertionEffect=function(D,Y){return G.H.useInsertionEffect(D,Y)},Qe.useLayoutEffect=function(D,Y){return G.H.useLayoutEffect(D,Y)},Qe.useMemo=function(D,Y){return G.H.useMemo(D,Y)},Qe.useOptimistic=function(D,Y){return G.H.useOptimistic(D,Y)},Qe.useReducer=function(D,Y,z){return G.H.useReducer(D,Y,z)},Qe.useRef=function(D){return G.H.useRef(D)},Qe.useState=function(D){return G.H.useState(D)},Qe.useSyncExternalStore=function(D,Y,z){return G.H.useSyncExternalStore(D,Y,z)},Qe.useTransition=function(){return G.H.useTransition()},Qe.version="19.1.0",Qe}var BN;function RT(){return BN||(BN=1,Vm.exports=fL()),Vm.exports}var Wm={exports:{}},ia={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FN;function AL(){if(FN)return ia;FN=1;var e=RT();function t(h){var A="https://react.dev/errors/"+h;if(1<arguments.length){A+="?args[]="+encodeURIComponent(arguments[1]);for(var R=2;R<arguments.length;R++)A+="&args[]="+encodeURIComponent(arguments[R])}return"Minified React error #"+h+"; visit "+A+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var i={d:{f:a,r:function(){throw Error(t(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},l=Symbol.for("react.portal");function r(h,A,R){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:T==null?null:""+T,children:h,containerInfo:A,implementation:R}}var d=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function E(h,A){if(h==="font")return"";if(typeof A=="string")return A==="use-credentials"?A:""}return ia.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,ia.createPortal=function(h,A){var R=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!A||A.nodeType!==1&&A.nodeType!==9&&A.nodeType!==11)throw Error(t(299));return r(h,A,null,R)},ia.flushSync=function(h){var A=d.T,R=i.p;try{if(d.T=null,i.p=2,h)return h()}finally{d.T=A,i.p=R,i.d.f()}},ia.preconnect=function(h,A){typeof h=="string"&&(A?(A=A.crossOrigin,A=typeof A=="string"?A==="use-credentials"?A:"":void 0):A=null,i.d.C(h,A))},ia.prefetchDNS=function(h){typeof h=="string"&&i.d.D(h)},ia.preinit=function(h,A){if(typeof h=="string"&&A&&typeof A.as=="string"){var R=A.as,T=E(R,A.crossOrigin),S=typeof A.integrity=="string"?A.integrity:void 0,I=typeof A.fetchPriority=="string"?A.fetchPriority:void 0;R==="style"?i.d.S(h,typeof A.precedence=="string"?A.precedence:void 0,{crossOrigin:T,integrity:S,fetchPriority:I}):R==="script"&&i.d.X(h,{crossOrigin:T,integrity:S,fetchPriority:I,nonce:typeof A.nonce=="string"?A.nonce:void 0})}},ia.preinitModule=function(h,A){if(typeof h=="string")if(typeof A=="object"&&A!==null){if(A.as==null||A.as==="script"){var R=E(A.as,A.crossOrigin);i.d.M(h,{crossOrigin:R,integrity:typeof A.integrity=="string"?A.integrity:void 0,nonce:typeof A.nonce=="string"?A.nonce:void 0})}}else A==null&&i.d.M(h)},ia.preload=function(h,A){if(typeof h=="string"&&typeof A=="object"&&A!==null&&typeof A.as=="string"){var R=A.as,T=E(R,A.crossOrigin);i.d.L(h,R,{crossOrigin:T,integrity:typeof A.integrity=="string"?A.integrity:void 0,nonce:typeof A.nonce=="string"?A.nonce:void 0,type:typeof A.type=="string"?A.type:void 0,fetchPriority:typeof A.fetchPriority=="string"?A.fetchPriority:void 0,referrerPolicy:typeof A.referrerPolicy=="string"?A.referrerPolicy:void 0,imageSrcSet:typeof A.imageSrcSet=="string"?A.imageSrcSet:void 0,imageSizes:typeof A.imageSizes=="string"?A.imageSizes:void 0,media:typeof A.media=="string"?A.media:void 0})}},ia.preloadModule=function(h,A){if(typeof h=="string")if(A){var R=E(A.as,A.crossOrigin);i.d.m(h,{as:typeof A.as=="string"&&A.as!=="script"?A.as:void 0,crossOrigin:R,integrity:typeof A.integrity=="string"?A.integrity:void 0})}else i.d.m(h)},ia.requestFormReset=function(h){i.d.r(h)},ia.unstable_batchedUpdates=function(h,A){return h(A)},ia.useFormState=function(h,A,R){return d.H.useFormState(h,A,R)},ia.useFormStatus=function(){return d.H.useHostTransitionStatus()},ia.version="19.1.0",ia}var zN;function YC(){if(zN)return Wm.exports;zN=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Wm.exports=AL(),Wm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jN;function mL(){if(jN)return Iu;jN=1;var e=EL(),t=RT(),a=YC();function i(n){var o="https://react.dev/errors/"+n;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)o+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+n+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function r(n){var o=n,s=n;if(n.alternate)for(;o.return;)o=o.return;else{n=o;do o=n,(o.flags&4098)!==0&&(s=o.return),n=o.return;while(n)}return o.tag===3?s:null}function d(n){if(n.tag===13){var o=n.memoizedState;if(o===null&&(n=n.alternate,n!==null&&(o=n.memoizedState)),o!==null)return o.dehydrated}return null}function E(n){if(r(n)!==n)throw Error(i(188))}function h(n){var o=n.alternate;if(!o){if(o=r(n),o===null)throw Error(i(188));return o!==n?null:n}for(var s=n,u=o;;){var f=s.return;if(f===null)break;var m=f.alternate;if(m===null){if(u=f.return,u!==null){s=u;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===s)return E(f),n;if(m===u)return E(f),o;m=m.sibling}throw Error(i(188))}if(s.return!==u.return)s=f,u=m;else{for(var p=!1,v=f.child;v;){if(v===s){p=!0,s=f,u=m;break}if(v===u){p=!0,u=f,s=m;break}v=v.sibling}if(!p){for(v=m.child;v;){if(v===s){p=!0,s=m,u=f;break}if(v===u){p=!0,u=m,s=f;break}v=v.sibling}if(!p)throw Error(i(189))}}if(s.alternate!==u)throw Error(i(190))}if(s.tag!==3)throw Error(i(188));return s.stateNode.current===s?n:o}function A(n){var o=n.tag;if(o===5||o===26||o===27||o===6)return n;for(n=n.child;n!==null;){if(o=A(n),o!==null)return o;n=n.sibling}return null}var R=Object.assign,T=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),I=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),U=Symbol.for("react.consumer"),L=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),ne=Symbol.for("react.activity"),Ee=Symbol.for("react.memo_cache_sentinel"),ue=Symbol.iterator;function de(n){return n===null||typeof n!="object"?null:(n=ue&&n[ue]||n["@@iterator"],typeof n=="function"?n:null)}var fe=Symbol.for("react.client.reference");function Q(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===fe?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case C:return"Fragment";case b:return"Profiler";case _:return"StrictMode";case G:return"Suspense";case H:return"SuspenseList";case ne:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case I:return"Portal";case L:return(n.displayName||"Context")+".Provider";case U:return(n._context.displayName||"Context")+".Consumer";case M:var o=n.render;return n=n.displayName,n||(n=o.displayName||o.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case P:return o=n.displayName||null,o!==null?o:Q(n.type)||"Memo";case q:o=n._payload,n=n._init;try{return Q(n(o))}catch{}}return null}var J=Array.isArray,F=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,w=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K={pending:!1,data:null,method:null,action:null},W=[],D=-1;function Y(n){return{current:n}}function z(n){0>D||(n.current=W[D],W[D]=null,D--)}function B(n,o){D++,W[D]=n.current,n.current=o}var ee=Y(null),he=Y(null),se=Y(null),Ae=Y(null);function Re(n,o){switch(B(se,o),B(he,n),B(ee,null),o.nodeType){case 9:case 11:n=(n=o.documentElement)&&(n=n.namespaceURI)?rN(n):0;break;default:if(n=o.tagName,o=o.namespaceURI)o=rN(o),n=cN(o,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}z(ee),B(ee,n)}function Oe(){z(ee),z(he),z(se)}function Pe(n){n.memoizedState!==null&&B(Ae,n);var o=ee.current,s=cN(o,n.type);o!==s&&(B(he,n),B(ee,s))}function ge(n){he.current===n&&(z(ee),z(he)),Ae.current===n&&(z(Ae),fu._currentValue=K)}var Ne=Object.prototype.hasOwnProperty,oe=e.unstable_scheduleCallback,pe=e.unstable_cancelCallback,Ie=e.unstable_shouldYield,Ce=e.unstable_requestPaint,ye=e.unstable_now,we=e.unstable_getCurrentPriorityLevel,Ze=e.unstable_ImmediatePriority,mt=e.unstable_UserBlockingPriority,$t=e.unstable_NormalPriority,Bl=e.unstable_LowPriority,zs=e.unstable_IdlePriority,fd=e.log,Ad=e.unstable_setDisableYieldValue,gc=null,Ga=null;function zo(n){if(typeof fd=="function"&&Ad(n),Ga&&typeof Ga.setStrictMode=="function")try{Ga.setStrictMode(gc,n)}catch{}}var Ba=Math.clz32?Math.clz32:Vy,Yy=Math.log,Ky=Math.LN2;function Vy(n){return n>>>=0,n===0?32:31-(Yy(n)/Ky|0)|0}var md=256,Rd=4194304;function Fl(n){var o=n&42;if(o!==0)return o;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Td(n,o,s){var u=n.pendingLanes;if(u===0)return 0;var f=0,m=n.suspendedLanes,p=n.pingedLanes;n=n.warmLanes;var v=u&134217727;return v!==0?(u=v&~m,u!==0?f=Fl(u):(p&=v,p!==0?f=Fl(p):s||(s=v&~n,s!==0&&(f=Fl(s))))):(v=u&~m,v!==0?f=Fl(v):p!==0?f=Fl(p):s||(s=u&~n,s!==0&&(f=Fl(s)))),f===0?0:o!==0&&o!==f&&(o&m)===0&&(m=f&-f,s=o&-o,m>=s||m===32&&(s&4194048)!==0)?o:f}function Nc(n,o){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&o)===0}function Wy(n,o){switch(n){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function KS(){var n=md;return md<<=1,(md&4194048)===0&&(md=256),n}function VS(){var n=Rd;return Rd<<=1,(Rd&62914560)===0&&(Rd=4194304),n}function vf(n){for(var o=[],s=0;31>s;s++)o.push(n);return o}function pc(n,o){n.pendingLanes|=o,o!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Xy(n,o,s,u,f,m){var p=n.pendingLanes;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=s,n.entangledLanes&=s,n.errorRecoveryDisabledLanes&=s,n.shellSuspendCounter=0;var v=n.entanglements,j=n.expirationTimes,ie=n.hiddenUpdates;for(s=p&~s;0<s;){var me=31-Ba(s),Se=1<<me;v[me]=0,j[me]=-1;var re=ie[me];if(re!==null)for(ie[me]=null,me=0;me<re.length;me++){var ce=re[me];ce!==null&&(ce.lane&=-536870913)}s&=~Se}u!==0&&WS(n,u,0),m!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=m&~(p&~o))}function WS(n,o,s){n.pendingLanes|=o,n.suspendedLanes&=~o;var u=31-Ba(o);n.entangledLanes|=o,n.entanglements[u]=n.entanglements[u]|1073741824|s&4194090}function XS(n,o){var s=n.entangledLanes|=o;for(n=n.entanglements;s;){var u=31-Ba(s),f=1<<u;f&o|n[u]&o&&(n[u]|=o),s&=~f}}function Mf(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Lf(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function qS(){var n=w.p;return n!==0?n:(n=window.event,n===void 0?32:DN(n.type))}function qy(n,o){var s=w.p;try{return w.p=n,o()}finally{w.p=s}}var jo=Math.random().toString(36).slice(2),na="__reactFiber$"+jo,Da="__reactProps$"+jo,js="__reactContainer$"+jo,Hf="__reactEvents$"+jo,Zy="__reactListeners$"+jo,Qy="__reactHandles$"+jo,ZS="__reactResources$"+jo,Cc="__reactMarker$"+jo;function Uf(n){delete n[na],delete n[Da],delete n[Hf],delete n[Zy],delete n[Qy]}function Ys(n){var o=n[na];if(o)return o;for(var s=n.parentNode;s;){if(o=s[js]||s[na]){if(s=o.alternate,o.child!==null||s!==null&&s.child!==null)for(n=EN(n);n!==null;){if(s=n[na])return s;n=EN(n)}return o}n=s,s=n.parentNode}return null}function Ks(n){if(n=n[na]||n[js]){var o=n.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return n}return null}function Oc(n){var o=n.tag;if(o===5||o===26||o===27||o===6)return n.stateNode;throw Error(i(33))}function Vs(n){var o=n[ZS];return o||(o=n[ZS]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function kn(n){n[Cc]=!0}var QS=new Set,$S={};function zl(n,o){Ws(n,o),Ws(n+"Capture",o)}function Ws(n,o){for($S[n]=o,n=0;n<o.length;n++)QS.add(o[n])}var $y=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),JS={},eI={};function Jy(n){return Ne.call(eI,n)?!0:Ne.call(JS,n)?!1:$y.test(n)?eI[n]=!0:(JS[n]=!0,!1)}function Sd(n,o,s){if(Jy(o))if(s===null)n.removeAttribute(o);else{switch(typeof s){case"undefined":case"function":case"symbol":n.removeAttribute(o);return;case"boolean":var u=o.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(o);return}}n.setAttribute(o,""+s)}}function Id(n,o,s){if(s===null)n.removeAttribute(o);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttribute(o,""+s)}}function ro(n,o,s,u){if(u===null)n.removeAttribute(s);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttributeNS(o,s,""+u)}}var xf,tI;function Xs(n){if(xf===void 0)try{throw Error()}catch(s){var o=s.stack.trim().match(/\n( *(at )?)/);xf=o&&o[1]||"",tI=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+xf+n+tI}var kf=!1;function Pf(n,o){if(!n||kf)return"";kf=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(o){var Se=function(){throw Error()};if(Object.defineProperty(Se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Se,[])}catch(ce){var re=ce}Reflect.construct(n,[],Se)}else{try{Se.call()}catch(ce){re=ce}n.call(Se.prototype)}}else{try{throw Error()}catch(ce){re=ce}(Se=n())&&typeof Se.catch=="function"&&Se.catch(function(){})}}catch(ce){if(ce&&re&&typeof ce.stack=="string")return[ce.stack,re.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),p=m[0],v=m[1];if(p&&v){var j=p.split(`
`),ie=v.split(`
`);for(f=u=0;u<j.length&&!j[u].includes("DetermineComponentFrameRoot");)u++;for(;f<ie.length&&!ie[f].includes("DetermineComponentFrameRoot");)f++;if(u===j.length||f===ie.length)for(u=j.length-1,f=ie.length-1;1<=u&&0<=f&&j[u]!==ie[f];)f--;for(;1<=u&&0<=f;u--,f--)if(j[u]!==ie[f]){if(u!==1||f!==1)do if(u--,f--,0>f||j[u]!==ie[f]){var me=`
`+j[u].replace(" at new "," at ");return n.displayName&&me.includes("<anonymous>")&&(me=me.replace("<anonymous>",n.displayName)),me}while(1<=u&&0<=f);break}}}finally{kf=!1,Error.prepareStackTrace=s}return(s=n?n.displayName||n.name:"")?Xs(s):""}function ev(n){switch(n.tag){case 26:case 27:case 5:return Xs(n.type);case 16:return Xs("Lazy");case 13:return Xs("Suspense");case 19:return Xs("SuspenseList");case 0:case 15:return Pf(n.type,!1);case 11:return Pf(n.type.render,!1);case 1:return Pf(n.type,!0);case 31:return Xs("Activity");default:return""}}function nI(n){try{var o="";do o+=ev(n),n=n.return;while(n);return o}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}function ni(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function aI(n){var o=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function tv(n){var o=aI(n)?"checked":"value",s=Object.getOwnPropertyDescriptor(n.constructor.prototype,o),u=""+n[o];if(!n.hasOwnProperty(o)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var f=s.get,m=s.set;return Object.defineProperty(n,o,{configurable:!0,get:function(){return f.call(this)},set:function(p){u=""+p,m.call(this,p)}}),Object.defineProperty(n,o,{enumerable:s.enumerable}),{getValue:function(){return u},setValue:function(p){u=""+p},stopTracking:function(){n._valueTracker=null,delete n[o]}}}}function _d(n){n._valueTracker||(n._valueTracker=tv(n))}function iI(n){if(!n)return!1;var o=n._valueTracker;if(!o)return!0;var s=o.getValue(),u="";return n&&(u=aI(n)?n.checked?"true":"false":n.value),n=u,n!==s?(o.setValue(n),!0):!1}function gd(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var nv=/[\n"\\]/g;function ai(n){return n.replace(nv,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function wf(n,o,s,u,f,m,p,v){n.name="",p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"?n.type=p:n.removeAttribute("type"),o!=null?p==="number"?(o===0&&n.value===""||n.value!=o)&&(n.value=""+ni(o)):n.value!==""+ni(o)&&(n.value=""+ni(o)):p!=="submit"&&p!=="reset"||n.removeAttribute("value"),o!=null?Gf(n,p,ni(o)):s!=null?Gf(n,p,ni(s)):u!=null&&n.removeAttribute("value"),f==null&&m!=null&&(n.defaultChecked=!!m),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?n.name=""+ni(v):n.removeAttribute("name")}function oI(n,o,s,u,f,m,p,v){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(n.type=m),o!=null||s!=null){if(!(m!=="submit"&&m!=="reset"||o!=null))return;s=s!=null?""+ni(s):"",o=o!=null?""+ni(o):s,v||o===n.value||(n.value=o),n.defaultValue=o}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=v?n.checked:!!u,n.defaultChecked=!!u,p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(n.name=p)}function Gf(n,o,s){o==="number"&&gd(n.ownerDocument)===n||n.defaultValue===""+s||(n.defaultValue=""+s)}function qs(n,o,s,u){if(n=n.options,o){o={};for(var f=0;f<s.length;f++)o["$"+s[f]]=!0;for(s=0;s<n.length;s++)f=o.hasOwnProperty("$"+n[s].value),n[s].selected!==f&&(n[s].selected=f),f&&u&&(n[s].defaultSelected=!0)}else{for(s=""+ni(s),o=null,f=0;f<n.length;f++){if(n[f].value===s){n[f].selected=!0,u&&(n[f].defaultSelected=!0);return}o!==null||n[f].disabled||(o=n[f])}o!==null&&(o.selected=!0)}}function lI(n,o,s){if(o!=null&&(o=""+ni(o),o!==n.value&&(n.value=o),s==null)){n.defaultValue!==o&&(n.defaultValue=o);return}n.defaultValue=s!=null?""+ni(s):""}function sI(n,o,s,u){if(o==null){if(u!=null){if(s!=null)throw Error(i(92));if(J(u)){if(1<u.length)throw Error(i(93));u=u[0]}s=u}s==null&&(s=""),o=s}s=ni(o),n.defaultValue=s,u=n.textContent,u===s&&u!==""&&u!==null&&(n.value=u)}function Zs(n,o){if(o){var s=n.firstChild;if(s&&s===n.lastChild&&s.nodeType===3){s.nodeValue=o;return}}n.textContent=o}var av=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function rI(n,o,s){var u=o.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?u?n.setProperty(o,""):o==="float"?n.cssFloat="":n[o]="":u?n.setProperty(o,s):typeof s!="number"||s===0||av.has(o)?o==="float"?n.cssFloat=s:n[o]=(""+s).trim():n[o]=s+"px"}function cI(n,o,s){if(o!=null&&typeof o!="object")throw Error(i(62));if(n=n.style,s!=null){for(var u in s)!s.hasOwnProperty(u)||o!=null&&o.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var f in o)u=o[f],o.hasOwnProperty(f)&&s[f]!==u&&rI(n,f,u)}else for(var m in o)o.hasOwnProperty(m)&&rI(n,m,o[m])}function Bf(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var iv=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ov=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Nd(n){return ov.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var Ff=null;function zf(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Qs=null,$s=null;function uI(n){var o=Ks(n);if(o&&(n=o.stateNode)){var s=n[Da]||null;e:switch(n=o.stateNode,o.type){case"input":if(wf(n,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),o=s.name,s.type==="radio"&&o!=null){for(s=n;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+ai(""+o)+'"][type="radio"]'),o=0;o<s.length;o++){var u=s[o];if(u!==n&&u.form===n.form){var f=u[Da]||null;if(!f)throw Error(i(90));wf(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(o=0;o<s.length;o++)u=s[o],u.form===n.form&&iI(u)}break e;case"textarea":lI(n,s.value,s.defaultValue);break e;case"select":o=s.value,o!=null&&qs(n,!!s.multiple,o,!1)}}}var jf=!1;function dI(n,o,s){if(jf)return n(o,s);jf=!0;try{var u=n(o);return u}finally{if(jf=!1,(Qs!==null||$s!==null)&&(rh(),Qs&&(o=Qs,n=$s,$s=Qs=null,uI(o),n)))for(o=0;o<n.length;o++)uI(n[o])}}function bc(n,o){var s=n.stateNode;if(s===null)return null;var u=s[Da]||null;if(u===null)return null;s=u[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(s&&typeof s!="function")throw Error(i(231,o,typeof s));return s}var co=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yf=!1;if(co)try{var Dc={};Object.defineProperty(Dc,"passive",{get:function(){Yf=!0}}),window.addEventListener("test",Dc,Dc),window.removeEventListener("test",Dc,Dc)}catch{Yf=!1}var Yo=null,Kf=null,pd=null;function hI(){if(pd)return pd;var n,o=Kf,s=o.length,u,f="value"in Yo?Yo.value:Yo.textContent,m=f.length;for(n=0;n<s&&o[n]===f[n];n++);var p=s-n;for(u=1;u<=p&&o[s-u]===f[m-u];u++);return pd=f.slice(n,1<u?1-u:void 0)}function Cd(n){var o=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&o===13&&(n=13)):n=o,n===10&&(n=13),32<=n||n===13?n:0}function Od(){return!0}function EI(){return!1}function ya(n){function o(s,u,f,m,p){this._reactName=s,this._targetInst=f,this.type=u,this.nativeEvent=m,this.target=p,this.currentTarget=null;for(var v in n)n.hasOwnProperty(v)&&(s=n[v],this[v]=s?s(m):m[v]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Od:EI,this.isPropagationStopped=EI,this}return R(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Od)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Od)},persist:function(){},isPersistent:Od}),o}var jl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bd=ya(jl),yc=R({},jl,{view:0,detail:0}),lv=ya(yc),Vf,Wf,vc,Dd=R({},yc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qf,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==vc&&(vc&&n.type==="mousemove"?(Vf=n.screenX-vc.screenX,Wf=n.screenY-vc.screenY):Wf=Vf=0,vc=n),Vf)},movementY:function(n){return"movementY"in n?n.movementY:Wf}}),fI=ya(Dd),sv=R({},Dd,{dataTransfer:0}),rv=ya(sv),cv=R({},yc,{relatedTarget:0}),Xf=ya(cv),uv=R({},jl,{animationName:0,elapsedTime:0,pseudoElement:0}),dv=ya(uv),hv=R({},jl,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Ev=ya(hv),fv=R({},jl,{data:0}),AI=ya(fv),Av={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Rv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tv(n){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(n):(n=Rv[n])?!!o[n]:!1}function qf(){return Tv}var Sv=R({},yc,{key:function(n){if(n.key){var o=Av[n.key]||n.key;if(o!=="Unidentified")return o}return n.type==="keypress"?(n=Cd(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?mv[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qf,charCode:function(n){return n.type==="keypress"?Cd(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Cd(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Iv=ya(Sv),_v=R({},Dd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mI=ya(_v),gv=R({},yc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qf}),Nv=ya(gv),pv=R({},jl,{propertyName:0,elapsedTime:0,pseudoElement:0}),Cv=ya(pv),Ov=R({},Dd,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),bv=ya(Ov),Dv=R({},jl,{newState:0,oldState:0}),yv=ya(Dv),vv=[9,13,27,32],Zf=co&&"CompositionEvent"in window,Mc=null;co&&"documentMode"in document&&(Mc=document.documentMode);var Mv=co&&"TextEvent"in window&&!Mc,RI=co&&(!Zf||Mc&&8<Mc&&11>=Mc),TI=" ",SI=!1;function II(n,o){switch(n){case"keyup":return vv.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _I(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Js=!1;function Lv(n,o){switch(n){case"compositionend":return _I(o);case"keypress":return o.which!==32?null:(SI=!0,TI);case"textInput":return n=o.data,n===TI&&SI?null:n;default:return null}}function Hv(n,o){if(Js)return n==="compositionend"||!Zf&&II(n,o)?(n=hI(),pd=Kf=Yo=null,Js=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return RI&&o.locale!=="ko"?null:o.data;default:return null}}var Uv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gI(n){var o=n&&n.nodeName&&n.nodeName.toLowerCase();return o==="input"?!!Uv[n.type]:o==="textarea"}function NI(n,o,s,u){Qs?$s?$s.push(u):$s=[u]:Qs=u,o=fh(o,"onChange"),0<o.length&&(s=new bd("onChange","change",null,s,u),n.push({event:s,listeners:o}))}var Lc=null,Hc=null;function xv(n){aN(n,0)}function yd(n){var o=Oc(n);if(iI(o))return n}function pI(n,o){if(n==="change")return o}var CI=!1;if(co){var Qf;if(co){var $f="oninput"in document;if(!$f){var OI=document.createElement("div");OI.setAttribute("oninput","return;"),$f=typeof OI.oninput=="function"}Qf=$f}else Qf=!1;CI=Qf&&(!document.documentMode||9<document.documentMode)}function bI(){Lc&&(Lc.detachEvent("onpropertychange",DI),Hc=Lc=null)}function DI(n){if(n.propertyName==="value"&&yd(Hc)){var o=[];NI(o,Hc,n,zf(n)),dI(xv,o)}}function kv(n,o,s){n==="focusin"?(bI(),Lc=o,Hc=s,Lc.attachEvent("onpropertychange",DI)):n==="focusout"&&bI()}function Pv(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return yd(Hc)}function wv(n,o){if(n==="click")return yd(o)}function Gv(n,o){if(n==="input"||n==="change")return yd(o)}function Bv(n,o){return n===o&&(n!==0||1/n===1/o)||n!==n&&o!==o}var Fa=typeof Object.is=="function"?Object.is:Bv;function Uc(n,o){if(Fa(n,o))return!0;if(typeof n!="object"||n===null||typeof o!="object"||o===null)return!1;var s=Object.keys(n),u=Object.keys(o);if(s.length!==u.length)return!1;for(u=0;u<s.length;u++){var f=s[u];if(!Ne.call(o,f)||!Fa(n[f],o[f]))return!1}return!0}function yI(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function vI(n,o){var s=yI(n);n=0;for(var u;s;){if(s.nodeType===3){if(u=n+s.textContent.length,n<=o&&u>=o)return{node:s,offset:o-n};n=u}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=yI(s)}}function MI(n,o){return n&&o?n===o?!0:n&&n.nodeType===3?!1:o&&o.nodeType===3?MI(n,o.parentNode):"contains"in n?n.contains(o):n.compareDocumentPosition?!!(n.compareDocumentPosition(o)&16):!1:!1}function LI(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var o=gd(n.document);o instanceof n.HTMLIFrameElement;){try{var s=typeof o.contentWindow.location.href=="string"}catch{s=!1}if(s)n=o.contentWindow;else break;o=gd(n.document)}return o}function Jf(n){var o=n&&n.nodeName&&n.nodeName.toLowerCase();return o&&(o==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||o==="textarea"||n.contentEditable==="true")}var Fv=co&&"documentMode"in document&&11>=document.documentMode,er=null,eA=null,xc=null,tA=!1;function HI(n,o,s){var u=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;tA||er==null||er!==gd(u)||(u=er,"selectionStart"in u&&Jf(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),xc&&Uc(xc,u)||(xc=u,u=fh(eA,"onSelect"),0<u.length&&(o=new bd("onSelect","select",null,o,s),n.push({event:o,listeners:u}),o.target=er)))}function Yl(n,o){var s={};return s[n.toLowerCase()]=o.toLowerCase(),s["Webkit"+n]="webkit"+o,s["Moz"+n]="moz"+o,s}var tr={animationend:Yl("Animation","AnimationEnd"),animationiteration:Yl("Animation","AnimationIteration"),animationstart:Yl("Animation","AnimationStart"),transitionrun:Yl("Transition","TransitionRun"),transitionstart:Yl("Transition","TransitionStart"),transitioncancel:Yl("Transition","TransitionCancel"),transitionend:Yl("Transition","TransitionEnd")},nA={},UI={};co&&(UI=document.createElement("div").style,"AnimationEvent"in window||(delete tr.animationend.animation,delete tr.animationiteration.animation,delete tr.animationstart.animation),"TransitionEvent"in window||delete tr.transitionend.transition);function Kl(n){if(nA[n])return nA[n];if(!tr[n])return n;var o=tr[n],s;for(s in o)if(o.hasOwnProperty(s)&&s in UI)return nA[n]=o[s];return n}var xI=Kl("animationend"),kI=Kl("animationiteration"),PI=Kl("animationstart"),zv=Kl("transitionrun"),jv=Kl("transitionstart"),Yv=Kl("transitioncancel"),wI=Kl("transitionend"),GI=new Map,aA="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");aA.push("scrollEnd");function Ni(n,o){GI.set(n,o),zl(o,[n])}var BI=new WeakMap;function ii(n,o){if(typeof n=="object"&&n!==null){var s=BI.get(n);return s!==void 0?s:(o={value:n,source:o,stack:nI(o)},BI.set(n,o),o)}return{value:n,source:o,stack:nI(o)}}var oi=[],nr=0,iA=0;function vd(){for(var n=nr,o=iA=nr=0;o<n;){var s=oi[o];oi[o++]=null;var u=oi[o];oi[o++]=null;var f=oi[o];oi[o++]=null;var m=oi[o];if(oi[o++]=null,u!==null&&f!==null){var p=u.pending;p===null?f.next=f:(f.next=p.next,p.next=f),u.pending=f}m!==0&&FI(s,f,m)}}function Md(n,o,s,u){oi[nr++]=n,oi[nr++]=o,oi[nr++]=s,oi[nr++]=u,iA|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function oA(n,o,s,u){return Md(n,o,s,u),Ld(n)}function ar(n,o){return Md(n,null,null,o),Ld(n)}function FI(n,o,s){n.lanes|=s;var u=n.alternate;u!==null&&(u.lanes|=s);for(var f=!1,m=n.return;m!==null;)m.childLanes|=s,u=m.alternate,u!==null&&(u.childLanes|=s),m.tag===22&&(n=m.stateNode,n===null||n._visibility&1||(f=!0)),n=m,m=m.return;return n.tag===3?(m=n.stateNode,f&&o!==null&&(f=31-Ba(s),n=m.hiddenUpdates,u=n[f],u===null?n[f]=[o]:u.push(o),o.lane=s|536870912),m):null}function Ld(n){if(50<lu)throw lu=0,dm=null,Error(i(185));for(var o=n.return;o!==null;)n=o,o=n.return;return n.tag===3?n.stateNode:null}var ir={};function Kv(n,o,s,u){this.tag=n,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function za(n,o,s,u){return new Kv(n,o,s,u)}function lA(n){return n=n.prototype,!(!n||!n.isReactComponent)}function uo(n,o){var s=n.alternate;return s===null?(s=za(n.tag,o,n.key,n.mode),s.elementType=n.elementType,s.type=n.type,s.stateNode=n.stateNode,s.alternate=n,n.alternate=s):(s.pendingProps=o,s.type=n.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=n.flags&65011712,s.childLanes=n.childLanes,s.lanes=n.lanes,s.child=n.child,s.memoizedProps=n.memoizedProps,s.memoizedState=n.memoizedState,s.updateQueue=n.updateQueue,o=n.dependencies,s.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},s.sibling=n.sibling,s.index=n.index,s.ref=n.ref,s.refCleanup=n.refCleanup,s}function zI(n,o){n.flags&=65011714;var s=n.alternate;return s===null?(n.childLanes=0,n.lanes=o,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=s.childLanes,n.lanes=s.lanes,n.child=s.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=s.memoizedProps,n.memoizedState=s.memoizedState,n.updateQueue=s.updateQueue,n.type=s.type,o=s.dependencies,n.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),n}function Hd(n,o,s,u,f,m){var p=0;if(u=n,typeof n=="function")lA(n)&&(p=1);else if(typeof n=="string")p=WM(n,s,ee.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case ne:return n=za(31,s,o,f),n.elementType=ne,n.lanes=m,n;case C:return Vl(s.children,f,m,o);case _:p=8,f|=24;break;case b:return n=za(12,s,o,f|2),n.elementType=b,n.lanes=m,n;case G:return n=za(13,s,o,f),n.elementType=G,n.lanes=m,n;case H:return n=za(19,s,o,f),n.elementType=H,n.lanes=m,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case y:case L:p=10;break e;case U:p=9;break e;case M:p=11;break e;case P:p=14;break e;case q:p=16,u=null;break e}p=29,s=Error(i(130,n===null?"null":typeof n,"")),u=null}return o=za(p,s,o,f),o.elementType=n,o.type=u,o.lanes=m,o}function Vl(n,o,s,u){return n=za(7,n,u,o),n.lanes=s,n}function sA(n,o,s){return n=za(6,n,null,o),n.lanes=s,n}function rA(n,o,s){return o=za(4,n.children!==null?n.children:[],n.key,o),o.lanes=s,o.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},o}var or=[],lr=0,Ud=null,xd=0,li=[],si=0,Wl=null,ho=1,Eo="";function Xl(n,o){or[lr++]=xd,or[lr++]=Ud,Ud=n,xd=o}function jI(n,o,s){li[si++]=ho,li[si++]=Eo,li[si++]=Wl,Wl=n;var u=ho;n=Eo;var f=32-Ba(u)-1;u&=~(1<<f),s+=1;var m=32-Ba(o)+f;if(30<m){var p=f-f%5;m=(u&(1<<p)-1).toString(32),u>>=p,f-=p,ho=1<<32-Ba(o)+f|s<<f|u,Eo=m+n}else ho=1<<m|s<<f|u,Eo=n}function cA(n){n.return!==null&&(Xl(n,1),jI(n,1,0))}function uA(n){for(;n===Ud;)Ud=or[--lr],or[lr]=null,xd=or[--lr],or[lr]=null;for(;n===Wl;)Wl=li[--si],li[si]=null,Eo=li[--si],li[si]=null,ho=li[--si],li[si]=null}var ha=null,Jt=null,Rt=!1,ql=null,ji=!1,dA=Error(i(519));function Zl(n){var o=Error(i(418,""));throw wc(ii(o,n)),dA}function YI(n){var o=n.stateNode,s=n.type,u=n.memoizedProps;switch(o[na]=n,o[Da]=u,s){case"dialog":ot("cancel",o),ot("close",o);break;case"iframe":case"object":case"embed":ot("load",o);break;case"video":case"audio":for(s=0;s<ru.length;s++)ot(ru[s],o);break;case"source":ot("error",o);break;case"img":case"image":case"link":ot("error",o),ot("load",o);break;case"details":ot("toggle",o);break;case"input":ot("invalid",o),oI(o,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),_d(o);break;case"select":ot("invalid",o);break;case"textarea":ot("invalid",o),sI(o,u.value,u.defaultValue,u.children),_d(o)}s=u.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||o.textContent===""+s||u.suppressHydrationWarning===!0||sN(o.textContent,s)?(u.popover!=null&&(ot("beforetoggle",o),ot("toggle",o)),u.onScroll!=null&&ot("scroll",o),u.onScrollEnd!=null&&ot("scrollend",o),u.onClick!=null&&(o.onclick=Ah),o=!0):o=!1,o||Zl(n)}function KI(n){for(ha=n.return;ha;)switch(ha.tag){case 5:case 13:ji=!1;return;case 27:case 3:ji=!0;return;default:ha=ha.return}}function kc(n){if(n!==ha)return!1;if(!Rt)return KI(n),Rt=!0,!1;var o=n.tag,s;if((s=o!==3&&o!==27)&&((s=o===5)&&(s=n.type,s=!(s!=="form"&&s!=="button")||bm(n.type,n.memoizedProps)),s=!s),s&&Jt&&Zl(n),KI(n),o===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));e:{for(n=n.nextSibling,o=0;n;){if(n.nodeType===8)if(s=n.data,s==="/$"){if(o===0){Jt=Ci(n.nextSibling);break e}o--}else s!=="$"&&s!=="$!"&&s!=="$?"||o++;n=n.nextSibling}Jt=null}}else o===27?(o=Jt,ll(n.type)?(n=Mm,Mm=null,Jt=n):Jt=o):Jt=ha?Ci(n.stateNode.nextSibling):null;return!0}function Pc(){Jt=ha=null,Rt=!1}function VI(){var n=ql;return n!==null&&(La===null?La=n:La.push.apply(La,n),ql=null),n}function wc(n){ql===null?ql=[n]:ql.push(n)}var hA=Y(null),Ql=null,fo=null;function Ko(n,o,s){B(hA,o._currentValue),o._currentValue=s}function Ao(n){n._currentValue=hA.current,z(hA)}function EA(n,o,s){for(;n!==null;){var u=n.alternate;if((n.childLanes&o)!==o?(n.childLanes|=o,u!==null&&(u.childLanes|=o)):u!==null&&(u.childLanes&o)!==o&&(u.childLanes|=o),n===s)break;n=n.return}}function fA(n,o,s,u){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var m=f.dependencies;if(m!==null){var p=f.child;m=m.firstContext;e:for(;m!==null;){var v=m;m=f;for(var j=0;j<o.length;j++)if(v.context===o[j]){m.lanes|=s,v=m.alternate,v!==null&&(v.lanes|=s),EA(m.return,s,n),u||(p=null);break e}m=v.next}}else if(f.tag===18){if(p=f.return,p===null)throw Error(i(341));p.lanes|=s,m=p.alternate,m!==null&&(m.lanes|=s),EA(p,s,n),p=null}else p=f.child;if(p!==null)p.return=f;else for(p=f;p!==null;){if(p===n){p=null;break}if(f=p.sibling,f!==null){f.return=p.return,p=f;break}p=p.return}f=p}}function Gc(n,o,s,u){n=null;for(var f=o,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var p=f.alternate;if(p===null)throw Error(i(387));if(p=p.memoizedProps,p!==null){var v=f.type;Fa(f.pendingProps.value,p.value)||(n!==null?n.push(v):n=[v])}}else if(f===Ae.current){if(p=f.alternate,p===null)throw Error(i(387));p.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(fu):n=[fu])}f=f.return}n!==null&&fA(o,n,s,u),o.flags|=262144}function kd(n){for(n=n.firstContext;n!==null;){if(!Fa(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function $l(n){Ql=n,fo=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function aa(n){return WI(Ql,n)}function Pd(n,o){return Ql===null&&$l(n),WI(n,o)}function WI(n,o){var s=o._currentValue;if(o={context:o,memoizedValue:s,next:null},fo===null){if(n===null)throw Error(i(308));fo=o,n.dependencies={lanes:0,firstContext:o},n.flags|=524288}else fo=fo.next=o;return s}var Vv=typeof AbortController<"u"?AbortController:function(){var n=[],o=this.signal={aborted:!1,addEventListener:function(s,u){n.push(u)}};this.abort=function(){o.aborted=!0,n.forEach(function(s){return s()})}},Wv=e.unstable_scheduleCallback,Xv=e.unstable_NormalPriority,bn={$$typeof:L,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function AA(){return{controller:new Vv,data:new Map,refCount:0}}function Bc(n){n.refCount--,n.refCount===0&&Wv(Xv,function(){n.controller.abort()})}var Fc=null,mA=0,sr=0,rr=null;function qv(n,o){if(Fc===null){var s=Fc=[];mA=0,sr=Tm(),rr={status:"pending",value:void 0,then:function(u){s.push(u)}}}return mA++,o.then(XI,XI),o}function XI(){if(--mA===0&&Fc!==null){rr!==null&&(rr.status="fulfilled");var n=Fc;Fc=null,sr=0,rr=null;for(var o=0;o<n.length;o++)(0,n[o])()}}function Zv(n,o){var s=[],u={status:"pending",value:null,reason:null,then:function(f){s.push(f)}};return n.then(function(){u.status="fulfilled",u.value=o;for(var f=0;f<s.length;f++)(0,s[f])(o)},function(f){for(u.status="rejected",u.reason=f,f=0;f<s.length;f++)(0,s[f])(void 0)}),u}var qI=F.S;F.S=function(n,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&qv(n,o),qI!==null&&qI(n,o)};var Jl=Y(null);function RA(){var n=Jl.current;return n!==null?n:kt.pooledCache}function wd(n,o){o===null?B(Jl,Jl.current):B(Jl,o.pool)}function ZI(){var n=RA();return n===null?null:{parent:bn._currentValue,pool:n}}var zc=Error(i(460)),QI=Error(i(474)),Gd=Error(i(542)),TA={then:function(){}};function $I(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Bd(){}function JI(n,o,s){switch(s=n[s],s===void 0?n.push(o):s!==o&&(o.then(Bd,Bd),o=s),o.status){case"fulfilled":return o.value;case"rejected":throw n=o.reason,t_(n),n;default:if(typeof o.status=="string")o.then(Bd,Bd);else{if(n=kt,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=o,n.status="pending",n.then(function(u){if(o.status==="pending"){var f=o;f.status="fulfilled",f.value=u}},function(u){if(o.status==="pending"){var f=o;f.status="rejected",f.reason=u}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw n=o.reason,t_(n),n}throw jc=o,zc}}var jc=null;function e_(){if(jc===null)throw Error(i(459));var n=jc;return jc=null,n}function t_(n){if(n===zc||n===Gd)throw Error(i(483))}var Vo=!1;function SA(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function IA(n,o){n=n.updateQueue,o.updateQueue===n&&(o.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Wo(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Xo(n,o,s){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(Tt&2)!==0){var f=u.pending;return f===null?o.next=o:(o.next=f.next,f.next=o),u.pending=o,o=Ld(n),FI(n,null,s),o}return Md(n,u,o,s),Ld(n)}function Yc(n,o,s){if(o=o.updateQueue,o!==null&&(o=o.shared,(s&4194048)!==0)){var u=o.lanes;u&=n.pendingLanes,s|=u,o.lanes=s,XS(n,s)}}function _A(n,o){var s=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,s===u)){var f=null,m=null;if(s=s.firstBaseUpdate,s!==null){do{var p={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};m===null?f=m=p:m=m.next=p,s=s.next}while(s!==null);m===null?f=m=o:m=m.next=o}else f=m=o;s={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},n.updateQueue=s;return}n=s.lastBaseUpdate,n===null?s.firstBaseUpdate=o:n.next=o,s.lastBaseUpdate=o}var gA=!1;function Kc(){if(gA){var n=rr;if(n!==null)throw n}}function Vc(n,o,s,u){gA=!1;var f=n.updateQueue;Vo=!1;var m=f.firstBaseUpdate,p=f.lastBaseUpdate,v=f.shared.pending;if(v!==null){f.shared.pending=null;var j=v,ie=j.next;j.next=null,p===null?m=ie:p.next=ie,p=j;var me=n.alternate;me!==null&&(me=me.updateQueue,v=me.lastBaseUpdate,v!==p&&(v===null?me.firstBaseUpdate=ie:v.next=ie,me.lastBaseUpdate=j))}if(m!==null){var Se=f.baseState;p=0,me=ie=j=null,v=m;do{var re=v.lane&-536870913,ce=re!==v.lane;if(ce?(ut&re)===re:(u&re)===re){re!==0&&re===sr&&(gA=!0),me!==null&&(me=me.next={lane:0,tag:v.tag,payload:v.payload,callback:null,next:null});e:{var je=n,Be=v;re=o;var Ct=s;switch(Be.tag){case 1:if(je=Be.payload,typeof je=="function"){Se=je.call(Ct,Se,re);break e}Se=je;break e;case 3:je.flags=je.flags&-65537|128;case 0:if(je=Be.payload,re=typeof je=="function"?je.call(Ct,Se,re):je,re==null)break e;Se=R({},Se,re);break e;case 2:Vo=!0}}re=v.callback,re!==null&&(n.flags|=64,ce&&(n.flags|=8192),ce=f.callbacks,ce===null?f.callbacks=[re]:ce.push(re))}else ce={lane:re,tag:v.tag,payload:v.payload,callback:v.callback,next:null},me===null?(ie=me=ce,j=Se):me=me.next=ce,p|=re;if(v=v.next,v===null){if(v=f.shared.pending,v===null)break;ce=v,v=ce.next,ce.next=null,f.lastBaseUpdate=ce,f.shared.pending=null}}while(!0);me===null&&(j=Se),f.baseState=j,f.firstBaseUpdate=ie,f.lastBaseUpdate=me,m===null&&(f.shared.lanes=0),nl|=p,n.lanes=p,n.memoizedState=Se}}function n_(n,o){if(typeof n!="function")throw Error(i(191,n));n.call(o)}function a_(n,o){var s=n.callbacks;if(s!==null)for(n.callbacks=null,n=0;n<s.length;n++)n_(s[n],o)}var cr=Y(null),Fd=Y(0);function i_(n,o){n=go,B(Fd,n),B(cr,o),go=n|o.baseLanes}function NA(){B(Fd,go),B(cr,cr.current)}function pA(){go=Fd.current,z(cr),z(Fd)}var qo=0,Je=null,Nt=null,Tn=null,zd=!1,ur=!1,es=!1,jd=0,Wc=0,dr=null,Qv=0;function fn(){throw Error(i(321))}function CA(n,o){if(o===null)return!1;for(var s=0;s<o.length&&s<n.length;s++)if(!Fa(n[s],o[s]))return!1;return!0}function OA(n,o,s,u,f,m){return qo=m,Je=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,F.H=n===null||n.memoizedState===null?F_:z_,es=!1,m=s(u,f),es=!1,ur&&(m=l_(o,s,u,f)),o_(n),m}function o_(n){F.H=qd;var o=Nt!==null&&Nt.next!==null;if(qo=0,Tn=Nt=Je=null,zd=!1,Wc=0,dr=null,o)throw Error(i(300));n===null||Pn||(n=n.dependencies,n!==null&&kd(n)&&(Pn=!0))}function l_(n,o,s,u){Je=n;var f=0;do{if(ur&&(dr=null),Wc=0,ur=!1,25<=f)throw Error(i(301));if(f+=1,Tn=Nt=null,n.updateQueue!=null){var m=n.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}F.H=iM,m=o(s,u)}while(ur);return m}function $v(){var n=F.H,o=n.useState()[0];return o=typeof o.then=="function"?Xc(o):o,n=n.useState()[0],(Nt!==null?Nt.memoizedState:null)!==n&&(Je.flags|=1024),o}function bA(){var n=jd!==0;return jd=0,n}function DA(n,o,s){o.updateQueue=n.updateQueue,o.flags&=-2053,n.lanes&=~s}function yA(n){if(zd){for(n=n.memoizedState;n!==null;){var o=n.queue;o!==null&&(o.pending=null),n=n.next}zd=!1}qo=0,Tn=Nt=Je=null,ur=!1,Wc=jd=0,dr=null}function va(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tn===null?Je.memoizedState=Tn=n:Tn=Tn.next=n,Tn}function Sn(){if(Nt===null){var n=Je.alternate;n=n!==null?n.memoizedState:null}else n=Nt.next;var o=Tn===null?Je.memoizedState:Tn.next;if(o!==null)Tn=o,Nt=n;else{if(n===null)throw Je.alternate===null?Error(i(467)):Error(i(310));Nt=n,n={memoizedState:Nt.memoizedState,baseState:Nt.baseState,baseQueue:Nt.baseQueue,queue:Nt.queue,next:null},Tn===null?Je.memoizedState=Tn=n:Tn=Tn.next=n}return Tn}function vA(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Xc(n){var o=Wc;return Wc+=1,dr===null&&(dr=[]),n=JI(dr,n,o),o=Je,(Tn===null?o.memoizedState:Tn.next)===null&&(o=o.alternate,F.H=o===null||o.memoizedState===null?F_:z_),n}function Yd(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Xc(n);if(n.$$typeof===L)return aa(n)}throw Error(i(438,String(n)))}function MA(n){var o=null,s=Je.updateQueue;if(s!==null&&(o=s.memoCache),o==null){var u=Je.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(o={data:u.data.map(function(f){return f.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),s===null&&(s=vA(),Je.updateQueue=s),s.memoCache=o,s=o.data[o.index],s===void 0)for(s=o.data[o.index]=Array(n),u=0;u<n;u++)s[u]=Ee;return o.index++,s}function mo(n,o){return typeof o=="function"?o(n):o}function Kd(n){var o=Sn();return LA(o,Nt,n)}function LA(n,o,s){var u=n.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=s;var f=n.baseQueue,m=u.pending;if(m!==null){if(f!==null){var p=f.next;f.next=m.next,m.next=p}o.baseQueue=f=m,u.pending=null}if(m=n.baseState,f===null)n.memoizedState=m;else{o=f.next;var v=p=null,j=null,ie=o,me=!1;do{var Se=ie.lane&-536870913;if(Se!==ie.lane?(ut&Se)===Se:(qo&Se)===Se){var re=ie.revertLane;if(re===0)j!==null&&(j=j.next={lane:0,revertLane:0,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null}),Se===sr&&(me=!0);else if((qo&re)===re){ie=ie.next,re===sr&&(me=!0);continue}else Se={lane:0,revertLane:ie.revertLane,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null},j===null?(v=j=Se,p=m):j=j.next=Se,Je.lanes|=re,nl|=re;Se=ie.action,es&&s(m,Se),m=ie.hasEagerState?ie.eagerState:s(m,Se)}else re={lane:Se,revertLane:ie.revertLane,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null},j===null?(v=j=re,p=m):j=j.next=re,Je.lanes|=Se,nl|=Se;ie=ie.next}while(ie!==null&&ie!==o);if(j===null?p=m:j.next=v,!Fa(m,n.memoizedState)&&(Pn=!0,me&&(s=rr,s!==null)))throw s;n.memoizedState=m,n.baseState=p,n.baseQueue=j,u.lastRenderedState=m}return f===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function HA(n){var o=Sn(),s=o.queue;if(s===null)throw Error(i(311));s.lastRenderedReducer=n;var u=s.dispatch,f=s.pending,m=o.memoizedState;if(f!==null){s.pending=null;var p=f=f.next;do m=n(m,p.action),p=p.next;while(p!==f);Fa(m,o.memoizedState)||(Pn=!0),o.memoizedState=m,o.baseQueue===null&&(o.baseState=m),s.lastRenderedState=m}return[m,u]}function s_(n,o,s){var u=Je,f=Sn(),m=Rt;if(m){if(s===void 0)throw Error(i(407));s=s()}else s=o();var p=!Fa((Nt||f).memoizedState,s);p&&(f.memoizedState=s,Pn=!0),f=f.queue;var v=u_.bind(null,u,f,n);if(qc(2048,8,v,[n]),f.getSnapshot!==o||p||Tn!==null&&Tn.memoizedState.tag&1){if(u.flags|=2048,hr(9,Vd(),c_.bind(null,u,f,s,o),null),kt===null)throw Error(i(349));m||(qo&124)!==0||r_(u,o,s)}return s}function r_(n,o,s){n.flags|=16384,n={getSnapshot:o,value:s},o=Je.updateQueue,o===null?(o=vA(),Je.updateQueue=o,o.stores=[n]):(s=o.stores,s===null?o.stores=[n]:s.push(n))}function c_(n,o,s,u){o.value=s,o.getSnapshot=u,d_(o)&&h_(n)}function u_(n,o,s){return s(function(){d_(o)&&h_(n)})}function d_(n){var o=n.getSnapshot;n=n.value;try{var s=o();return!Fa(n,s)}catch{return!0}}function h_(n){var o=ar(n,2);o!==null&&Wa(o,n,2)}function UA(n){var o=va();if(typeof n=="function"){var s=n;if(n=s(),es){zo(!0);try{s()}finally{zo(!1)}}}return o.memoizedState=o.baseState=n,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:mo,lastRenderedState:n},o}function E_(n,o,s,u){return n.baseState=s,LA(n,Nt,typeof u=="function"?u:mo)}function Jv(n,o,s,u,f){if(Xd(n))throw Error(i(485));if(n=o.action,n!==null){var m={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(p){m.listeners.push(p)}};F.T!==null?s(!0):m.isTransition=!1,u(m),s=o.pending,s===null?(m.next=o.pending=m,f_(o,m)):(m.next=s.next,o.pending=s.next=m)}}function f_(n,o){var s=o.action,u=o.payload,f=n.state;if(o.isTransition){var m=F.T,p={};F.T=p;try{var v=s(f,u),j=F.S;j!==null&&j(p,v),A_(n,o,v)}catch(ie){xA(n,o,ie)}finally{F.T=m}}else try{m=s(f,u),A_(n,o,m)}catch(ie){xA(n,o,ie)}}function A_(n,o,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(u){m_(n,o,u)},function(u){return xA(n,o,u)}):m_(n,o,s)}function m_(n,o,s){o.status="fulfilled",o.value=s,R_(o),n.state=s,o=n.pending,o!==null&&(s=o.next,s===o?n.pending=null:(s=s.next,o.next=s,f_(n,s)))}function xA(n,o,s){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do o.status="rejected",o.reason=s,R_(o),o=o.next;while(o!==u)}n.action=null}function R_(n){n=n.listeners;for(var o=0;o<n.length;o++)(0,n[o])()}function T_(n,o){return o}function S_(n,o){if(Rt){var s=kt.formState;if(s!==null){e:{var u=Je;if(Rt){if(Jt){t:{for(var f=Jt,m=ji;f.nodeType!==8;){if(!m){f=null;break t}if(f=Ci(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){Jt=Ci(f.nextSibling),u=f.data==="F!";break e}}Zl(u)}u=!1}u&&(o=s[0])}}return s=va(),s.memoizedState=s.baseState=o,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:T_,lastRenderedState:o},s.queue=u,s=w_.bind(null,Je,u),u.dispatch=s,u=UA(!1),m=BA.bind(null,Je,!1,u.queue),u=va(),f={state:o,dispatch:null,action:n,pending:null},u.queue=f,s=Jv.bind(null,Je,f,m,s),f.dispatch=s,u.memoizedState=n,[o,s,!1]}function I_(n){var o=Sn();return __(o,Nt,n)}function __(n,o,s){if(o=LA(n,o,T_)[0],n=Kd(mo)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var u=Xc(o)}catch(p){throw p===zc?Gd:p}else u=o;o=Sn();var f=o.queue,m=f.dispatch;return s!==o.memoizedState&&(Je.flags|=2048,hr(9,Vd(),eM.bind(null,f,s),null)),[u,m,n]}function eM(n,o){n.action=o}function g_(n){var o=Sn(),s=Nt;if(s!==null)return __(o,s,n);Sn(),o=o.memoizedState,s=Sn();var u=s.queue.dispatch;return s.memoizedState=n,[o,u,!1]}function hr(n,o,s,u){return n={tag:n,create:s,deps:u,inst:o,next:null},o=Je.updateQueue,o===null&&(o=vA(),Je.updateQueue=o),s=o.lastEffect,s===null?o.lastEffect=n.next=n:(u=s.next,s.next=n,n.next=u,o.lastEffect=n),n}function Vd(){return{destroy:void 0,resource:void 0}}function N_(){return Sn().memoizedState}function Wd(n,o,s,u){var f=va();u=u===void 0?null:u,Je.flags|=n,f.memoizedState=hr(1|o,Vd(),s,u)}function qc(n,o,s,u){var f=Sn();u=u===void 0?null:u;var m=f.memoizedState.inst;Nt!==null&&u!==null&&CA(u,Nt.memoizedState.deps)?f.memoizedState=hr(o,m,s,u):(Je.flags|=n,f.memoizedState=hr(1|o,m,s,u))}function p_(n,o){Wd(8390656,8,n,o)}function C_(n,o){qc(2048,8,n,o)}function O_(n,o){return qc(4,2,n,o)}function b_(n,o){return qc(4,4,n,o)}function D_(n,o){if(typeof o=="function"){n=n();var s=o(n);return function(){typeof s=="function"?s():o(null)}}if(o!=null)return n=n(),o.current=n,function(){o.current=null}}function y_(n,o,s){s=s!=null?s.concat([n]):null,qc(4,4,D_.bind(null,o,n),s)}function kA(){}function v_(n,o){var s=Sn();o=o===void 0?null:o;var u=s.memoizedState;return o!==null&&CA(o,u[1])?u[0]:(s.memoizedState=[n,o],n)}function M_(n,o){var s=Sn();o=o===void 0?null:o;var u=s.memoizedState;if(o!==null&&CA(o,u[1]))return u[0];if(u=n(),es){zo(!0);try{n()}finally{zo(!1)}}return s.memoizedState=[u,o],u}function PA(n,o,s){return s===void 0||(qo&1073741824)!==0?n.memoizedState=o:(n.memoizedState=s,n=Ug(),Je.lanes|=n,nl|=n,s)}function L_(n,o,s,u){return Fa(s,o)?s:cr.current!==null?(n=PA(n,s,u),Fa(n,o)||(Pn=!0),n):(qo&42)===0?(Pn=!0,n.memoizedState=s):(n=Ug(),Je.lanes|=n,nl|=n,o)}function H_(n,o,s,u,f){var m=w.p;w.p=m!==0&&8>m?m:8;var p=F.T,v={};F.T=v,BA(n,!1,o,s);try{var j=f(),ie=F.S;if(ie!==null&&ie(v,j),j!==null&&typeof j=="object"&&typeof j.then=="function"){var me=Zv(j,u);Zc(n,o,me,Va(n))}else Zc(n,o,u,Va(n))}catch(Se){Zc(n,o,{then:function(){},status:"rejected",reason:Se},Va())}finally{w.p=m,F.T=p}}function tM(){}function wA(n,o,s,u){if(n.tag!==5)throw Error(i(476));var f=U_(n).queue;H_(n,f,o,K,s===null?tM:function(){return x_(n),s(u)})}function U_(n){var o=n.memoizedState;if(o!==null)return o;o={memoizedState:K,baseState:K,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:mo,lastRenderedState:K},next:null};var s={};return o.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:mo,lastRenderedState:s},next:null},n.memoizedState=o,n=n.alternate,n!==null&&(n.memoizedState=o),o}function x_(n){var o=U_(n).next.queue;Zc(n,o,{},Va())}function GA(){return aa(fu)}function k_(){return Sn().memoizedState}function P_(){return Sn().memoizedState}function nM(n){for(var o=n.return;o!==null;){switch(o.tag){case 24:case 3:var s=Va();n=Wo(s);var u=Xo(o,n,s);u!==null&&(Wa(u,o,s),Yc(u,o,s)),o={cache:AA()},n.payload=o;return}o=o.return}}function aM(n,o,s){var u=Va();s={lane:u,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null},Xd(n)?G_(o,s):(s=oA(n,o,s,u),s!==null&&(Wa(s,n,u),B_(s,o,u)))}function w_(n,o,s){var u=Va();Zc(n,o,s,u)}function Zc(n,o,s,u){var f={lane:u,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null};if(Xd(n))G_(o,f);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=o.lastRenderedReducer,m!==null))try{var p=o.lastRenderedState,v=m(p,s);if(f.hasEagerState=!0,f.eagerState=v,Fa(v,p))return Md(n,o,f,0),kt===null&&vd(),!1}catch{}finally{}if(s=oA(n,o,f,u),s!==null)return Wa(s,n,u),B_(s,o,u),!0}return!1}function BA(n,o,s,u){if(u={lane:2,revertLane:Tm(),action:u,hasEagerState:!1,eagerState:null,next:null},Xd(n)){if(o)throw Error(i(479))}else o=oA(n,s,u,2),o!==null&&Wa(o,n,2)}function Xd(n){var o=n.alternate;return n===Je||o!==null&&o===Je}function G_(n,o){ur=zd=!0;var s=n.pending;s===null?o.next=o:(o.next=s.next,s.next=o),n.pending=o}function B_(n,o,s){if((s&4194048)!==0){var u=o.lanes;u&=n.pendingLanes,s|=u,o.lanes=s,XS(n,s)}}var qd={readContext:aa,use:Yd,useCallback:fn,useContext:fn,useEffect:fn,useImperativeHandle:fn,useLayoutEffect:fn,useInsertionEffect:fn,useMemo:fn,useReducer:fn,useRef:fn,useState:fn,useDebugValue:fn,useDeferredValue:fn,useTransition:fn,useSyncExternalStore:fn,useId:fn,useHostTransitionStatus:fn,useFormState:fn,useActionState:fn,useOptimistic:fn,useMemoCache:fn,useCacheRefresh:fn},F_={readContext:aa,use:Yd,useCallback:function(n,o){return va().memoizedState=[n,o===void 0?null:o],n},useContext:aa,useEffect:p_,useImperativeHandle:function(n,o,s){s=s!=null?s.concat([n]):null,Wd(4194308,4,D_.bind(null,o,n),s)},useLayoutEffect:function(n,o){return Wd(4194308,4,n,o)},useInsertionEffect:function(n,o){Wd(4,2,n,o)},useMemo:function(n,o){var s=va();o=o===void 0?null:o;var u=n();if(es){zo(!0);try{n()}finally{zo(!1)}}return s.memoizedState=[u,o],u},useReducer:function(n,o,s){var u=va();if(s!==void 0){var f=s(o);if(es){zo(!0);try{s(o)}finally{zo(!1)}}}else f=o;return u.memoizedState=u.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},u.queue=n,n=n.dispatch=aM.bind(null,Je,n),[u.memoizedState,n]},useRef:function(n){var o=va();return n={current:n},o.memoizedState=n},useState:function(n){n=UA(n);var o=n.queue,s=w_.bind(null,Je,o);return o.dispatch=s,[n.memoizedState,s]},useDebugValue:kA,useDeferredValue:function(n,o){var s=va();return PA(s,n,o)},useTransition:function(){var n=UA(!1);return n=H_.bind(null,Je,n.queue,!0,!1),va().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,o,s){var u=Je,f=va();if(Rt){if(s===void 0)throw Error(i(407));s=s()}else{if(s=o(),kt===null)throw Error(i(349));(ut&124)!==0||r_(u,o,s)}f.memoizedState=s;var m={value:s,getSnapshot:o};return f.queue=m,p_(u_.bind(null,u,m,n),[n]),u.flags|=2048,hr(9,Vd(),c_.bind(null,u,m,s,o),null),s},useId:function(){var n=va(),o=kt.identifierPrefix;if(Rt){var s=Eo,u=ho;s=(u&~(1<<32-Ba(u)-1)).toString(32)+s,o=""+o+"R"+s,s=jd++,0<s&&(o+="H"+s.toString(32)),o+=""}else s=Qv++,o=""+o+"r"+s.toString(32)+"";return n.memoizedState=o},useHostTransitionStatus:GA,useFormState:S_,useActionState:S_,useOptimistic:function(n){var o=va();o.memoizedState=o.baseState=n;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=s,o=BA.bind(null,Je,!0,s),s.dispatch=o,[n,o]},useMemoCache:MA,useCacheRefresh:function(){return va().memoizedState=nM.bind(null,Je)}},z_={readContext:aa,use:Yd,useCallback:v_,useContext:aa,useEffect:C_,useImperativeHandle:y_,useInsertionEffect:O_,useLayoutEffect:b_,useMemo:M_,useReducer:Kd,useRef:N_,useState:function(){return Kd(mo)},useDebugValue:kA,useDeferredValue:function(n,o){var s=Sn();return L_(s,Nt.memoizedState,n,o)},useTransition:function(){var n=Kd(mo)[0],o=Sn().memoizedState;return[typeof n=="boolean"?n:Xc(n),o]},useSyncExternalStore:s_,useId:k_,useHostTransitionStatus:GA,useFormState:I_,useActionState:I_,useOptimistic:function(n,o){var s=Sn();return E_(s,Nt,n,o)},useMemoCache:MA,useCacheRefresh:P_},iM={readContext:aa,use:Yd,useCallback:v_,useContext:aa,useEffect:C_,useImperativeHandle:y_,useInsertionEffect:O_,useLayoutEffect:b_,useMemo:M_,useReducer:HA,useRef:N_,useState:function(){return HA(mo)},useDebugValue:kA,useDeferredValue:function(n,o){var s=Sn();return Nt===null?PA(s,n,o):L_(s,Nt.memoizedState,n,o)},useTransition:function(){var n=HA(mo)[0],o=Sn().memoizedState;return[typeof n=="boolean"?n:Xc(n),o]},useSyncExternalStore:s_,useId:k_,useHostTransitionStatus:GA,useFormState:g_,useActionState:g_,useOptimistic:function(n,o){var s=Sn();return Nt!==null?E_(s,Nt,n,o):(s.baseState=n,[n,s.queue.dispatch])},useMemoCache:MA,useCacheRefresh:P_},Er=null,Qc=0;function Zd(n){var o=Qc;return Qc+=1,Er===null&&(Er=[]),JI(Er,n,o)}function $c(n,o){o=o.props.ref,n.ref=o!==void 0?o:null}function Qd(n,o){throw o.$$typeof===T?Error(i(525)):(n=Object.prototype.toString.call(o),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":n)))}function j_(n){var o=n._init;return o(n._payload)}function Y_(n){function o($,V){if(n){var te=$.deletions;te===null?($.deletions=[V],$.flags|=16):te.push(V)}}function s($,V){if(!n)return null;for(;V!==null;)o($,V),V=V.sibling;return null}function u($){for(var V=new Map;$!==null;)$.key!==null?V.set($.key,$):V.set($.index,$),$=$.sibling;return V}function f($,V){return $=uo($,V),$.index=0,$.sibling=null,$}function m($,V,te){return $.index=te,n?(te=$.alternate,te!==null?(te=te.index,te<V?($.flags|=67108866,V):te):($.flags|=67108866,V)):($.flags|=1048576,V)}function p($){return n&&$.alternate===null&&($.flags|=67108866),$}function v($,V,te,Te){return V===null||V.tag!==6?(V=sA(te,$.mode,Te),V.return=$,V):(V=f(V,te),V.return=$,V)}function j($,V,te,Te){var Me=te.type;return Me===C?me($,V,te.props.children,Te,te.key):V!==null&&(V.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===q&&j_(Me)===V.type)?(V=f(V,te.props),$c(V,te),V.return=$,V):(V=Hd(te.type,te.key,te.props,null,$.mode,Te),$c(V,te),V.return=$,V)}function ie($,V,te,Te){return V===null||V.tag!==4||V.stateNode.containerInfo!==te.containerInfo||V.stateNode.implementation!==te.implementation?(V=rA(te,$.mode,Te),V.return=$,V):(V=f(V,te.children||[]),V.return=$,V)}function me($,V,te,Te,Me){return V===null||V.tag!==7?(V=Vl(te,$.mode,Te,Me),V.return=$,V):(V=f(V,te),V.return=$,V)}function Se($,V,te){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=sA(""+V,$.mode,te),V.return=$,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case S:return te=Hd(V.type,V.key,V.props,null,$.mode,te),$c(te,V),te.return=$,te;case I:return V=rA(V,$.mode,te),V.return=$,V;case q:var Te=V._init;return V=Te(V._payload),Se($,V,te)}if(J(V)||de(V))return V=Vl(V,$.mode,te,null),V.return=$,V;if(typeof V.then=="function")return Se($,Zd(V),te);if(V.$$typeof===L)return Se($,Pd($,V),te);Qd($,V)}return null}function re($,V,te,Te){var Me=V!==null?V.key:null;if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return Me!==null?null:v($,V,""+te,Te);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case S:return te.key===Me?j($,V,te,Te):null;case I:return te.key===Me?ie($,V,te,Te):null;case q:return Me=te._init,te=Me(te._payload),re($,V,te,Te)}if(J(te)||de(te))return Me!==null?null:me($,V,te,Te,null);if(typeof te.then=="function")return re($,V,Zd(te),Te);if(te.$$typeof===L)return re($,V,Pd($,te),Te);Qd($,te)}return null}function ce($,V,te,Te,Me){if(typeof Te=="string"&&Te!==""||typeof Te=="number"||typeof Te=="bigint")return $=$.get(te)||null,v(V,$,""+Te,Me);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case S:return $=$.get(Te.key===null?te:Te.key)||null,j(V,$,Te,Me);case I:return $=$.get(Te.key===null?te:Te.key)||null,ie(V,$,Te,Me);case q:var tt=Te._init;return Te=tt(Te._payload),ce($,V,te,Te,Me)}if(J(Te)||de(Te))return $=$.get(te)||null,me(V,$,Te,Me,null);if(typeof Te.then=="function")return ce($,V,te,Zd(Te),Me);if(Te.$$typeof===L)return ce($,V,te,Pd(V,Te),Me);Qd(V,Te)}return null}function je($,V,te,Te){for(var Me=null,tt=null,xe=V,Fe=V=0,Gn=null;xe!==null&&Fe<te.length;Fe++){xe.index>Fe?(Gn=xe,xe=null):Gn=xe.sibling;var At=re($,xe,te[Fe],Te);if(At===null){xe===null&&(xe=Gn);break}n&&xe&&At.alternate===null&&o($,xe),V=m(At,V,Fe),tt===null?Me=At:tt.sibling=At,tt=At,xe=Gn}if(Fe===te.length)return s($,xe),Rt&&Xl($,Fe),Me;if(xe===null){for(;Fe<te.length;Fe++)xe=Se($,te[Fe],Te),xe!==null&&(V=m(xe,V,Fe),tt===null?Me=xe:tt.sibling=xe,tt=xe);return Rt&&Xl($,Fe),Me}for(xe=u(xe);Fe<te.length;Fe++)Gn=ce(xe,$,Fe,te[Fe],Te),Gn!==null&&(n&&Gn.alternate!==null&&xe.delete(Gn.key===null?Fe:Gn.key),V=m(Gn,V,Fe),tt===null?Me=Gn:tt.sibling=Gn,tt=Gn);return n&&xe.forEach(function(dl){return o($,dl)}),Rt&&Xl($,Fe),Me}function Be($,V,te,Te){if(te==null)throw Error(i(151));for(var Me=null,tt=null,xe=V,Fe=V=0,Gn=null,At=te.next();xe!==null&&!At.done;Fe++,At=te.next()){xe.index>Fe?(Gn=xe,xe=null):Gn=xe.sibling;var dl=re($,xe,At.value,Te);if(dl===null){xe===null&&(xe=Gn);break}n&&xe&&dl.alternate===null&&o($,xe),V=m(dl,V,Fe),tt===null?Me=dl:tt.sibling=dl,tt=dl,xe=Gn}if(At.done)return s($,xe),Rt&&Xl($,Fe),Me;if(xe===null){for(;!At.done;Fe++,At=te.next())At=Se($,At.value,Te),At!==null&&(V=m(At,V,Fe),tt===null?Me=At:tt.sibling=At,tt=At);return Rt&&Xl($,Fe),Me}for(xe=u(xe);!At.done;Fe++,At=te.next())At=ce(xe,$,Fe,At.value,Te),At!==null&&(n&&At.alternate!==null&&xe.delete(At.key===null?Fe:At.key),V=m(At,V,Fe),tt===null?Me=At:tt.sibling=At,tt=At);return n&&xe.forEach(function(oL){return o($,oL)}),Rt&&Xl($,Fe),Me}function Ct($,V,te,Te){if(typeof te=="object"&&te!==null&&te.type===C&&te.key===null&&(te=te.props.children),typeof te=="object"&&te!==null){switch(te.$$typeof){case S:e:{for(var Me=te.key;V!==null;){if(V.key===Me){if(Me=te.type,Me===C){if(V.tag===7){s($,V.sibling),Te=f(V,te.props.children),Te.return=$,$=Te;break e}}else if(V.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===q&&j_(Me)===V.type){s($,V.sibling),Te=f(V,te.props),$c(Te,te),Te.return=$,$=Te;break e}s($,V);break}else o($,V);V=V.sibling}te.type===C?(Te=Vl(te.props.children,$.mode,Te,te.key),Te.return=$,$=Te):(Te=Hd(te.type,te.key,te.props,null,$.mode,Te),$c(Te,te),Te.return=$,$=Te)}return p($);case I:e:{for(Me=te.key;V!==null;){if(V.key===Me)if(V.tag===4&&V.stateNode.containerInfo===te.containerInfo&&V.stateNode.implementation===te.implementation){s($,V.sibling),Te=f(V,te.children||[]),Te.return=$,$=Te;break e}else{s($,V);break}else o($,V);V=V.sibling}Te=rA(te,$.mode,Te),Te.return=$,$=Te}return p($);case q:return Me=te._init,te=Me(te._payload),Ct($,V,te,Te)}if(J(te))return je($,V,te,Te);if(de(te)){if(Me=de(te),typeof Me!="function")throw Error(i(150));return te=Me.call(te),Be($,V,te,Te)}if(typeof te.then=="function")return Ct($,V,Zd(te),Te);if(te.$$typeof===L)return Ct($,V,Pd($,te),Te);Qd($,te)}return typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint"?(te=""+te,V!==null&&V.tag===6?(s($,V.sibling),Te=f(V,te),Te.return=$,$=Te):(s($,V),Te=sA(te,$.mode,Te),Te.return=$,$=Te),p($)):s($,V)}return function($,V,te,Te){try{Qc=0;var Me=Ct($,V,te,Te);return Er=null,Me}catch(xe){if(xe===zc||xe===Gd)throw xe;var tt=za(29,xe,null,$.mode);return tt.lanes=Te,tt.return=$,tt}finally{}}}var fr=Y_(!0),K_=Y_(!1),ri=Y(null),Yi=null;function Zo(n){var o=n.alternate;B(Dn,Dn.current&1),B(ri,n),Yi===null&&(o===null||cr.current!==null||o.memoizedState!==null)&&(Yi=n)}function V_(n){if(n.tag===22){if(B(Dn,Dn.current),B(ri,n),Yi===null){var o=n.alternate;o!==null&&o.memoizedState!==null&&(Yi=n)}}else Qo()}function Qo(){B(Dn,Dn.current),B(ri,ri.current)}function Ro(n){z(ri),Yi===n&&(Yi=null),z(Dn)}var Dn=Y(0);function $d(n){for(var o=n;o!==null;){if(o.tag===13){var s=o.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||vm(s)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function FA(n,o,s,u){o=n.memoizedState,s=s(u,o),s=s==null?o:R({},o,s),n.memoizedState=s,n.lanes===0&&(n.updateQueue.baseState=s)}var zA={enqueueSetState:function(n,o,s){n=n._reactInternals;var u=Va(),f=Wo(u);f.payload=o,s!=null&&(f.callback=s),o=Xo(n,f,u),o!==null&&(Wa(o,n,u),Yc(o,n,u))},enqueueReplaceState:function(n,o,s){n=n._reactInternals;var u=Va(),f=Wo(u);f.tag=1,f.payload=o,s!=null&&(f.callback=s),o=Xo(n,f,u),o!==null&&(Wa(o,n,u),Yc(o,n,u))},enqueueForceUpdate:function(n,o){n=n._reactInternals;var s=Va(),u=Wo(s);u.tag=2,o!=null&&(u.callback=o),o=Xo(n,u,s),o!==null&&(Wa(o,n,s),Yc(o,n,s))}};function W_(n,o,s,u,f,m,p){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,m,p):o.prototype&&o.prototype.isPureReactComponent?!Uc(s,u)||!Uc(f,m):!0}function X_(n,o,s,u){n=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(s,u),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(s,u),o.state!==n&&zA.enqueueReplaceState(o,o.state,null)}function ts(n,o){var s=o;if("ref"in o){s={};for(var u in o)u!=="ref"&&(s[u]=o[u])}if(n=n.defaultProps){s===o&&(s=R({},s));for(var f in n)s[f]===void 0&&(s[f]=n[f])}return s}var Jd=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function q_(n){Jd(n)}function Z_(n){console.error(n)}function Q_(n){Jd(n)}function eh(n,o){try{var s=n.onUncaughtError;s(o.value,{componentStack:o.stack})}catch(u){setTimeout(function(){throw u})}}function $_(n,o,s){try{var u=n.onCaughtError;u(s.value,{componentStack:s.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function jA(n,o,s){return s=Wo(s),s.tag=3,s.payload={element:null},s.callback=function(){eh(n,o)},s}function J_(n){return n=Wo(n),n.tag=3,n}function eg(n,o,s,u){var f=s.type.getDerivedStateFromError;if(typeof f=="function"){var m=u.value;n.payload=function(){return f(m)},n.callback=function(){$_(o,s,u)}}var p=s.stateNode;p!==null&&typeof p.componentDidCatch=="function"&&(n.callback=function(){$_(o,s,u),typeof f!="function"&&(al===null?al=new Set([this]):al.add(this));var v=u.stack;this.componentDidCatch(u.value,{componentStack:v!==null?v:""})})}function oM(n,o,s,u,f){if(s.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(o=s.alternate,o!==null&&Gc(o,s,f,!0),s=ri.current,s!==null){switch(s.tag){case 13:return Yi===null?Em():s.alternate===null&&en===0&&(en=3),s.flags&=-257,s.flags|=65536,s.lanes=f,u===TA?s.flags|=16384:(o=s.updateQueue,o===null?s.updateQueue=new Set([u]):o.add(u),Am(n,u,f)),!1;case 22:return s.flags|=65536,u===TA?s.flags|=16384:(o=s.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([u])},s.updateQueue=o):(s=o.retryQueue,s===null?o.retryQueue=new Set([u]):s.add(u)),Am(n,u,f)),!1}throw Error(i(435,s.tag))}return Am(n,u,f),Em(),!1}if(Rt)return o=ri.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=f,u!==dA&&(n=Error(i(422),{cause:u}),wc(ii(n,s)))):(u!==dA&&(o=Error(i(423),{cause:u}),wc(ii(o,s))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,u=ii(u,s),f=jA(n.stateNode,u,f),_A(n,f),en!==4&&(en=2)),!1;var m=Error(i(520),{cause:u});if(m=ii(m,s),ou===null?ou=[m]:ou.push(m),en!==4&&(en=2),o===null)return!0;u=ii(u,s),s=o;do{switch(s.tag){case 3:return s.flags|=65536,n=f&-f,s.lanes|=n,n=jA(s.stateNode,u,n),_A(s,n),!1;case 1:if(o=s.type,m=s.stateNode,(s.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(al===null||!al.has(m))))return s.flags|=65536,f&=-f,s.lanes|=f,f=J_(f),eg(f,n,s,u),_A(s,f),!1}s=s.return}while(s!==null);return!1}var tg=Error(i(461)),Pn=!1;function Vn(n,o,s,u){o.child=n===null?K_(o,null,s,u):fr(o,n.child,s,u)}function ng(n,o,s,u,f){s=s.render;var m=o.ref;if("ref"in u){var p={};for(var v in u)v!=="ref"&&(p[v]=u[v])}else p=u;return $l(o),u=OA(n,o,s,p,m,f),v=bA(),n!==null&&!Pn?(DA(n,o,f),To(n,o,f)):(Rt&&v&&cA(o),o.flags|=1,Vn(n,o,u,f),o.child)}function ag(n,o,s,u,f){if(n===null){var m=s.type;return typeof m=="function"&&!lA(m)&&m.defaultProps===void 0&&s.compare===null?(o.tag=15,o.type=m,ig(n,o,m,u,f)):(n=Hd(s.type,null,u,o,o.mode,f),n.ref=o.ref,n.return=o,o.child=n)}if(m=n.child,!QA(n,f)){var p=m.memoizedProps;if(s=s.compare,s=s!==null?s:Uc,s(p,u)&&n.ref===o.ref)return To(n,o,f)}return o.flags|=1,n=uo(m,u),n.ref=o.ref,n.return=o,o.child=n}function ig(n,o,s,u,f){if(n!==null){var m=n.memoizedProps;if(Uc(m,u)&&n.ref===o.ref)if(Pn=!1,o.pendingProps=u=m,QA(n,f))(n.flags&131072)!==0&&(Pn=!0);else return o.lanes=n.lanes,To(n,o,f)}return YA(n,o,s,u,f)}function og(n,o,s){var u=o.pendingProps,f=u.children,m=n!==null?n.memoizedState:null;if(u.mode==="hidden"){if((o.flags&128)!==0){if(u=m!==null?m.baseLanes|s:s,n!==null){for(f=o.child=n.child,m=0;f!==null;)m=m|f.lanes|f.childLanes,f=f.sibling;o.childLanes=m&~u}else o.childLanes=0,o.child=null;return lg(n,o,u,s)}if((s&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},n!==null&&wd(o,m!==null?m.cachePool:null),m!==null?i_(o,m):NA(),V_(o);else return o.lanes=o.childLanes=536870912,lg(n,o,m!==null?m.baseLanes|s:s,s)}else m!==null?(wd(o,m.cachePool),i_(o,m),Qo(),o.memoizedState=null):(n!==null&&wd(o,null),NA(),Qo());return Vn(n,o,f,s),o.child}function lg(n,o,s,u){var f=RA();return f=f===null?null:{parent:bn._currentValue,pool:f},o.memoizedState={baseLanes:s,cachePool:f},n!==null&&wd(o,null),NA(),V_(o),n!==null&&Gc(n,o,u,!0),null}function th(n,o){var s=o.ref;if(s===null)n!==null&&n.ref!==null&&(o.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(i(284));(n===null||n.ref!==s)&&(o.flags|=4194816)}}function YA(n,o,s,u,f){return $l(o),s=OA(n,o,s,u,void 0,f),u=bA(),n!==null&&!Pn?(DA(n,o,f),To(n,o,f)):(Rt&&u&&cA(o),o.flags|=1,Vn(n,o,s,f),o.child)}function sg(n,o,s,u,f,m){return $l(o),o.updateQueue=null,s=l_(o,u,s,f),o_(n),u=bA(),n!==null&&!Pn?(DA(n,o,m),To(n,o,m)):(Rt&&u&&cA(o),o.flags|=1,Vn(n,o,s,m),o.child)}function rg(n,o,s,u,f){if($l(o),o.stateNode===null){var m=ir,p=s.contextType;typeof p=="object"&&p!==null&&(m=aa(p)),m=new s(u,m),o.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=zA,o.stateNode=m,m._reactInternals=o,m=o.stateNode,m.props=u,m.state=o.memoizedState,m.refs={},SA(o),p=s.contextType,m.context=typeof p=="object"&&p!==null?aa(p):ir,m.state=o.memoizedState,p=s.getDerivedStateFromProps,typeof p=="function"&&(FA(o,s,p,u),m.state=o.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(p=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),p!==m.state&&zA.enqueueReplaceState(m,m.state,null),Vc(o,u,m,f),Kc(),m.state=o.memoizedState),typeof m.componentDidMount=="function"&&(o.flags|=4194308),u=!0}else if(n===null){m=o.stateNode;var v=o.memoizedProps,j=ts(s,v);m.props=j;var ie=m.context,me=s.contextType;p=ir,typeof me=="object"&&me!==null&&(p=aa(me));var Se=s.getDerivedStateFromProps;me=typeof Se=="function"||typeof m.getSnapshotBeforeUpdate=="function",v=o.pendingProps!==v,me||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(v||ie!==p)&&X_(o,m,u,p),Vo=!1;var re=o.memoizedState;m.state=re,Vc(o,u,m,f),Kc(),ie=o.memoizedState,v||re!==ie||Vo?(typeof Se=="function"&&(FA(o,s,Se,u),ie=o.memoizedState),(j=Vo||W_(o,s,j,u,re,ie,p))?(me||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(o.flags|=4194308)):(typeof m.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=u,o.memoizedState=ie),m.props=u,m.state=ie,m.context=p,u=j):(typeof m.componentDidMount=="function"&&(o.flags|=4194308),u=!1)}else{m=o.stateNode,IA(n,o),p=o.memoizedProps,me=ts(s,p),m.props=me,Se=o.pendingProps,re=m.context,ie=s.contextType,j=ir,typeof ie=="object"&&ie!==null&&(j=aa(ie)),v=s.getDerivedStateFromProps,(ie=typeof v=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(p!==Se||re!==j)&&X_(o,m,u,j),Vo=!1,re=o.memoizedState,m.state=re,Vc(o,u,m,f),Kc();var ce=o.memoizedState;p!==Se||re!==ce||Vo||n!==null&&n.dependencies!==null&&kd(n.dependencies)?(typeof v=="function"&&(FA(o,s,v,u),ce=o.memoizedState),(me=Vo||W_(o,s,me,u,re,ce,j)||n!==null&&n.dependencies!==null&&kd(n.dependencies))?(ie||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,ce,j),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,ce,j)),typeof m.componentDidUpdate=="function"&&(o.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof m.componentDidUpdate!="function"||p===n.memoizedProps&&re===n.memoizedState||(o.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||p===n.memoizedProps&&re===n.memoizedState||(o.flags|=1024),o.memoizedProps=u,o.memoizedState=ce),m.props=u,m.state=ce,m.context=j,u=me):(typeof m.componentDidUpdate!="function"||p===n.memoizedProps&&re===n.memoizedState||(o.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||p===n.memoizedProps&&re===n.memoizedState||(o.flags|=1024),u=!1)}return m=u,th(n,o),u=(o.flags&128)!==0,m||u?(m=o.stateNode,s=u&&typeof s.getDerivedStateFromError!="function"?null:m.render(),o.flags|=1,n!==null&&u?(o.child=fr(o,n.child,null,f),o.child=fr(o,null,s,f)):Vn(n,o,s,f),o.memoizedState=m.state,n=o.child):n=To(n,o,f),n}function cg(n,o,s,u){return Pc(),o.flags|=256,Vn(n,o,s,u),o.child}var KA={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function VA(n){return{baseLanes:n,cachePool:ZI()}}function WA(n,o,s){return n=n!==null?n.childLanes&~s:0,o&&(n|=ci),n}function ug(n,o,s){var u=o.pendingProps,f=!1,m=(o.flags&128)!==0,p;if((p=m)||(p=n!==null&&n.memoizedState===null?!1:(Dn.current&2)!==0),p&&(f=!0,o.flags&=-129),p=(o.flags&32)!==0,o.flags&=-33,n===null){if(Rt){if(f?Zo(o):Qo(),Rt){var v=Jt,j;if(j=v){e:{for(j=v,v=ji;j.nodeType!==8;){if(!v){v=null;break e}if(j=Ci(j.nextSibling),j===null){v=null;break e}}v=j}v!==null?(o.memoizedState={dehydrated:v,treeContext:Wl!==null?{id:ho,overflow:Eo}:null,retryLane:536870912,hydrationErrors:null},j=za(18,null,null,0),j.stateNode=v,j.return=o,o.child=j,ha=o,Jt=null,j=!0):j=!1}j||Zl(o)}if(v=o.memoizedState,v!==null&&(v=v.dehydrated,v!==null))return vm(v)?o.lanes=32:o.lanes=536870912,null;Ro(o)}return v=u.children,u=u.fallback,f?(Qo(),f=o.mode,v=nh({mode:"hidden",children:v},f),u=Vl(u,f,s,null),v.return=o,u.return=o,v.sibling=u,o.child=v,f=o.child,f.memoizedState=VA(s),f.childLanes=WA(n,p,s),o.memoizedState=KA,u):(Zo(o),XA(o,v))}if(j=n.memoizedState,j!==null&&(v=j.dehydrated,v!==null)){if(m)o.flags&256?(Zo(o),o.flags&=-257,o=qA(n,o,s)):o.memoizedState!==null?(Qo(),o.child=n.child,o.flags|=128,o=null):(Qo(),f=u.fallback,v=o.mode,u=nh({mode:"visible",children:u.children},v),f=Vl(f,v,s,null),f.flags|=2,u.return=o,f.return=o,u.sibling=f,o.child=u,fr(o,n.child,null,s),u=o.child,u.memoizedState=VA(s),u.childLanes=WA(n,p,s),o.memoizedState=KA,o=f);else if(Zo(o),vm(v)){if(p=v.nextSibling&&v.nextSibling.dataset,p)var ie=p.dgst;p=ie,u=Error(i(419)),u.stack="",u.digest=p,wc({value:u,source:null,stack:null}),o=qA(n,o,s)}else if(Pn||Gc(n,o,s,!1),p=(s&n.childLanes)!==0,Pn||p){if(p=kt,p!==null&&(u=s&-s,u=(u&42)!==0?1:Mf(u),u=(u&(p.suspendedLanes|s))!==0?0:u,u!==0&&u!==j.retryLane))throw j.retryLane=u,ar(n,u),Wa(p,n,u),tg;v.data==="$?"||Em(),o=qA(n,o,s)}else v.data==="$?"?(o.flags|=192,o.child=n.child,o=null):(n=j.treeContext,Jt=Ci(v.nextSibling),ha=o,Rt=!0,ql=null,ji=!1,n!==null&&(li[si++]=ho,li[si++]=Eo,li[si++]=Wl,ho=n.id,Eo=n.overflow,Wl=o),o=XA(o,u.children),o.flags|=4096);return o}return f?(Qo(),f=u.fallback,v=o.mode,j=n.child,ie=j.sibling,u=uo(j,{mode:"hidden",children:u.children}),u.subtreeFlags=j.subtreeFlags&65011712,ie!==null?f=uo(ie,f):(f=Vl(f,v,s,null),f.flags|=2),f.return=o,u.return=o,u.sibling=f,o.child=u,u=f,f=o.child,v=n.child.memoizedState,v===null?v=VA(s):(j=v.cachePool,j!==null?(ie=bn._currentValue,j=j.parent!==ie?{parent:ie,pool:ie}:j):j=ZI(),v={baseLanes:v.baseLanes|s,cachePool:j}),f.memoizedState=v,f.childLanes=WA(n,p,s),o.memoizedState=KA,u):(Zo(o),s=n.child,n=s.sibling,s=uo(s,{mode:"visible",children:u.children}),s.return=o,s.sibling=null,n!==null&&(p=o.deletions,p===null?(o.deletions=[n],o.flags|=16):p.push(n)),o.child=s,o.memoizedState=null,s)}function XA(n,o){return o=nh({mode:"visible",children:o},n.mode),o.return=n,n.child=o}function nh(n,o){return n=za(22,n,null,o),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function qA(n,o,s){return fr(o,n.child,null,s),n=XA(o,o.pendingProps.children),n.flags|=2,o.memoizedState=null,n}function dg(n,o,s){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o),EA(n.return,o,s)}function ZA(n,o,s,u,f){var m=n.memoizedState;m===null?n.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:u,tail:s,tailMode:f}:(m.isBackwards=o,m.rendering=null,m.renderingStartTime=0,m.last=u,m.tail=s,m.tailMode=f)}function hg(n,o,s){var u=o.pendingProps,f=u.revealOrder,m=u.tail;if(Vn(n,o,u.children,s),u=Dn.current,(u&2)!==0)u=u&1|2,o.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=o.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&dg(n,s,o);else if(n.tag===19)dg(n,s,o);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===o)break e;for(;n.sibling===null;){if(n.return===null||n.return===o)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}u&=1}switch(B(Dn,u),f){case"forwards":for(s=o.child,f=null;s!==null;)n=s.alternate,n!==null&&$d(n)===null&&(f=s),s=s.sibling;s=f,s===null?(f=o.child,o.child=null):(f=s.sibling,s.sibling=null),ZA(o,!1,f,s,m);break;case"backwards":for(s=null,f=o.child,o.child=null;f!==null;){if(n=f.alternate,n!==null&&$d(n)===null){o.child=f;break}n=f.sibling,f.sibling=s,s=f,f=n}ZA(o,!0,s,null,m);break;case"together":ZA(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function To(n,o,s){if(n!==null&&(o.dependencies=n.dependencies),nl|=o.lanes,(s&o.childLanes)===0)if(n!==null){if(Gc(n,o,s,!1),(s&o.childLanes)===0)return null}else return null;if(n!==null&&o.child!==n.child)throw Error(i(153));if(o.child!==null){for(n=o.child,s=uo(n,n.pendingProps),o.child=s,s.return=o;n.sibling!==null;)n=n.sibling,s=s.sibling=uo(n,n.pendingProps),s.return=o;s.sibling=null}return o.child}function QA(n,o){return(n.lanes&o)!==0?!0:(n=n.dependencies,!!(n!==null&&kd(n)))}function lM(n,o,s){switch(o.tag){case 3:Re(o,o.stateNode.containerInfo),Ko(o,bn,n.memoizedState.cache),Pc();break;case 27:case 5:Pe(o);break;case 4:Re(o,o.stateNode.containerInfo);break;case 10:Ko(o,o.type,o.memoizedProps.value);break;case 13:var u=o.memoizedState;if(u!==null)return u.dehydrated!==null?(Zo(o),o.flags|=128,null):(s&o.child.childLanes)!==0?ug(n,o,s):(Zo(o),n=To(n,o,s),n!==null?n.sibling:null);Zo(o);break;case 19:var f=(n.flags&128)!==0;if(u=(s&o.childLanes)!==0,u||(Gc(n,o,s,!1),u=(s&o.childLanes)!==0),f){if(u)return hg(n,o,s);o.flags|=128}if(f=o.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),B(Dn,Dn.current),u)break;return null;case 22:case 23:return o.lanes=0,og(n,o,s);case 24:Ko(o,bn,n.memoizedState.cache)}return To(n,o,s)}function Eg(n,o,s){if(n!==null)if(n.memoizedProps!==o.pendingProps)Pn=!0;else{if(!QA(n,s)&&(o.flags&128)===0)return Pn=!1,lM(n,o,s);Pn=(n.flags&131072)!==0}else Pn=!1,Rt&&(o.flags&1048576)!==0&&jI(o,xd,o.index);switch(o.lanes=0,o.tag){case 16:e:{n=o.pendingProps;var u=o.elementType,f=u._init;if(u=f(u._payload),o.type=u,typeof u=="function")lA(u)?(n=ts(u,n),o.tag=1,o=rg(null,o,u,n,s)):(o.tag=0,o=YA(null,o,u,n,s));else{if(u!=null){if(f=u.$$typeof,f===M){o.tag=11,o=ng(null,o,u,n,s);break e}else if(f===P){o.tag=14,o=ag(null,o,u,n,s);break e}}throw o=Q(u)||u,Error(i(306,o,""))}}return o;case 0:return YA(n,o,o.type,o.pendingProps,s);case 1:return u=o.type,f=ts(u,o.pendingProps),rg(n,o,u,f,s);case 3:e:{if(Re(o,o.stateNode.containerInfo),n===null)throw Error(i(387));u=o.pendingProps;var m=o.memoizedState;f=m.element,IA(n,o),Vc(o,u,null,s);var p=o.memoizedState;if(u=p.cache,Ko(o,bn,u),u!==m.cache&&fA(o,[bn],s,!0),Kc(),u=p.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:p.cache},o.updateQueue.baseState=m,o.memoizedState=m,o.flags&256){o=cg(n,o,u,s);break e}else if(u!==f){f=ii(Error(i(424)),o),wc(f),o=cg(n,o,u,s);break e}else{switch(n=o.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Jt=Ci(n.firstChild),ha=o,Rt=!0,ql=null,ji=!0,s=K_(o,null,u,s),o.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(Pc(),u===f){o=To(n,o,s);break e}Vn(n,o,u,s)}o=o.child}return o;case 26:return th(n,o),n===null?(s=RN(o.type,null,o.pendingProps,null))?o.memoizedState=s:Rt||(s=o.type,n=o.pendingProps,u=mh(se.current).createElement(s),u[na]=o,u[Da]=n,Xn(u,s,n),kn(u),o.stateNode=u):o.memoizedState=RN(o.type,n.memoizedProps,o.pendingProps,n.memoizedState),null;case 27:return Pe(o),n===null&&Rt&&(u=o.stateNode=fN(o.type,o.pendingProps,se.current),ha=o,ji=!0,f=Jt,ll(o.type)?(Mm=f,Jt=Ci(u.firstChild)):Jt=f),Vn(n,o,o.pendingProps.children,s),th(n,o),n===null&&(o.flags|=4194304),o.child;case 5:return n===null&&Rt&&((f=u=Jt)&&(u=UM(u,o.type,o.pendingProps,ji),u!==null?(o.stateNode=u,ha=o,Jt=Ci(u.firstChild),ji=!1,f=!0):f=!1),f||Zl(o)),Pe(o),f=o.type,m=o.pendingProps,p=n!==null?n.memoizedProps:null,u=m.children,bm(f,m)?u=null:p!==null&&bm(f,p)&&(o.flags|=32),o.memoizedState!==null&&(f=OA(n,o,$v,null,null,s),fu._currentValue=f),th(n,o),Vn(n,o,u,s),o.child;case 6:return n===null&&Rt&&((n=s=Jt)&&(s=xM(s,o.pendingProps,ji),s!==null?(o.stateNode=s,ha=o,Jt=null,n=!0):n=!1),n||Zl(o)),null;case 13:return ug(n,o,s);case 4:return Re(o,o.stateNode.containerInfo),u=o.pendingProps,n===null?o.child=fr(o,null,u,s):Vn(n,o,u,s),o.child;case 11:return ng(n,o,o.type,o.pendingProps,s);case 7:return Vn(n,o,o.pendingProps,s),o.child;case 8:return Vn(n,o,o.pendingProps.children,s),o.child;case 12:return Vn(n,o,o.pendingProps.children,s),o.child;case 10:return u=o.pendingProps,Ko(o,o.type,u.value),Vn(n,o,u.children,s),o.child;case 9:return f=o.type._context,u=o.pendingProps.children,$l(o),f=aa(f),u=u(f),o.flags|=1,Vn(n,o,u,s),o.child;case 14:return ag(n,o,o.type,o.pendingProps,s);case 15:return ig(n,o,o.type,o.pendingProps,s);case 19:return hg(n,o,s);case 31:return u=o.pendingProps,s=o.mode,u={mode:u.mode,children:u.children},n===null?(s=nh(u,s),s.ref=o.ref,o.child=s,s.return=o,o=s):(s=uo(n.child,u),s.ref=o.ref,o.child=s,s.return=o,o=s),o;case 22:return og(n,o,s);case 24:return $l(o),u=aa(bn),n===null?(f=RA(),f===null&&(f=kt,m=AA(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=s),f=m),o.memoizedState={parent:u,cache:f},SA(o),Ko(o,bn,f)):((n.lanes&s)!==0&&(IA(n,o),Vc(o,null,null,s),Kc()),f=n.memoizedState,m=o.memoizedState,f.parent!==u?(f={parent:u,cache:u},o.memoizedState=f,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=f),Ko(o,bn,u)):(u=m.cache,Ko(o,bn,u),u!==f.cache&&fA(o,[bn],s,!0))),Vn(n,o,o.pendingProps.children,s),o.child;case 29:throw o.pendingProps}throw Error(i(156,o.tag))}function So(n){n.flags|=4}function fg(n,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!gN(o)){if(o=ri.current,o!==null&&((ut&4194048)===ut?Yi!==null:(ut&62914560)!==ut&&(ut&536870912)===0||o!==Yi))throw jc=TA,QI;n.flags|=8192}}function ah(n,o){o!==null&&(n.flags|=4),n.flags&16384&&(o=n.tag!==22?VS():536870912,n.lanes|=o,Tr|=o)}function Jc(n,o){if(!Rt)switch(n.tailMode){case"hidden":o=n.tail;for(var s=null;o!==null;)o.alternate!==null&&(s=o),o=o.sibling;s===null?n.tail=null:s.sibling=null;break;case"collapsed":s=n.tail;for(var u=null;s!==null;)s.alternate!==null&&(u=s),s=s.sibling;u===null?o||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function jt(n){var o=n.alternate!==null&&n.alternate.child===n.child,s=0,u=0;if(o)for(var f=n.child;f!==null;)s|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)s|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=u,n.childLanes=s,o}function sM(n,o,s){var u=o.pendingProps;switch(uA(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jt(o),null;case 1:return jt(o),null;case 3:return s=o.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),Ao(bn),Oe(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(n===null||n.child===null)&&(kc(o)?So(o):n===null||n.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,VI())),jt(o),null;case 26:return s=o.memoizedState,n===null?(So(o),s!==null?(jt(o),fg(o,s)):(jt(o),o.flags&=-16777217)):s?s!==n.memoizedState?(So(o),jt(o),fg(o,s)):(jt(o),o.flags&=-16777217):(n.memoizedProps!==u&&So(o),jt(o),o.flags&=-16777217),null;case 27:ge(o),s=se.current;var f=o.type;if(n!==null&&o.stateNode!=null)n.memoizedProps!==u&&So(o);else{if(!u){if(o.stateNode===null)throw Error(i(166));return jt(o),null}n=ee.current,kc(o)?YI(o):(n=fN(f,u,s),o.stateNode=n,So(o))}return jt(o),null;case 5:if(ge(o),s=o.type,n!==null&&o.stateNode!=null)n.memoizedProps!==u&&So(o);else{if(!u){if(o.stateNode===null)throw Error(i(166));return jt(o),null}if(n=ee.current,kc(o))YI(o);else{switch(f=mh(se.current),n){case 1:n=f.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:n=f.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":n=f.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":n=f.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":n=f.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof u.is=="string"?f.createElement("select",{is:u.is}):f.createElement("select"),u.multiple?n.multiple=!0:u.size&&(n.size=u.size);break;default:n=typeof u.is=="string"?f.createElement(s,{is:u.is}):f.createElement(s)}}n[na]=o,n[Da]=u;e:for(f=o.child;f!==null;){if(f.tag===5||f.tag===6)n.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===o)break e;for(;f.sibling===null;){if(f.return===null||f.return===o)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}o.stateNode=n;e:switch(Xn(n,s,u),s){case"button":case"input":case"select":case"textarea":n=!!u.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&So(o)}}return jt(o),o.flags&=-16777217,null;case 6:if(n&&o.stateNode!=null)n.memoizedProps!==u&&So(o);else{if(typeof u!="string"&&o.stateNode===null)throw Error(i(166));if(n=se.current,kc(o)){if(n=o.stateNode,s=o.memoizedProps,u=null,f=ha,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}n[na]=o,n=!!(n.nodeValue===s||u!==null&&u.suppressHydrationWarning===!0||sN(n.nodeValue,s)),n||Zl(o)}else n=mh(n).createTextNode(u),n[na]=o,o.stateNode=n}return jt(o),null;case 13:if(u=o.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=kc(o),u!==null&&u.dehydrated!==null){if(n===null){if(!f)throw Error(i(318));if(f=o.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[na]=o}else Pc(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;jt(o),f=!1}else f=VI(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return o.flags&256?(Ro(o),o):(Ro(o),null)}if(Ro(o),(o.flags&128)!==0)return o.lanes=s,o;if(s=u!==null,n=n!==null&&n.memoizedState!==null,s){u=o.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool);var m=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==f&&(u.flags|=2048)}return s!==n&&s&&(o.child.flags|=8192),ah(o,o.updateQueue),jt(o),null;case 4:return Oe(),n===null&&gm(o.stateNode.containerInfo),jt(o),null;case 10:return Ao(o.type),jt(o),null;case 19:if(z(Dn),f=o.memoizedState,f===null)return jt(o),null;if(u=(o.flags&128)!==0,m=f.rendering,m===null)if(u)Jc(f,!1);else{if(en!==0||n!==null&&(n.flags&128)!==0)for(n=o.child;n!==null;){if(m=$d(n),m!==null){for(o.flags|=128,Jc(f,!1),n=m.updateQueue,o.updateQueue=n,ah(o,n),o.subtreeFlags=0,n=s,s=o.child;s!==null;)zI(s,n),s=s.sibling;return B(Dn,Dn.current&1|2),o.child}n=n.sibling}f.tail!==null&&ye()>lh&&(o.flags|=128,u=!0,Jc(f,!1),o.lanes=4194304)}else{if(!u)if(n=$d(m),n!==null){if(o.flags|=128,u=!0,n=n.updateQueue,o.updateQueue=n,ah(o,n),Jc(f,!0),f.tail===null&&f.tailMode==="hidden"&&!m.alternate&&!Rt)return jt(o),null}else 2*ye()-f.renderingStartTime>lh&&s!==536870912&&(o.flags|=128,u=!0,Jc(f,!1),o.lanes=4194304);f.isBackwards?(m.sibling=o.child,o.child=m):(n=f.last,n!==null?n.sibling=m:o.child=m,f.last=m)}return f.tail!==null?(o=f.tail,f.rendering=o,f.tail=o.sibling,f.renderingStartTime=ye(),o.sibling=null,n=Dn.current,B(Dn,u?n&1|2:n&1),o):(jt(o),null);case 22:case 23:return Ro(o),pA(),u=o.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(o.flags|=8192):u&&(o.flags|=8192),u?(s&536870912)!==0&&(o.flags&128)===0&&(jt(o),o.subtreeFlags&6&&(o.flags|=8192)):jt(o),s=o.updateQueue,s!==null&&ah(o,s.retryQueue),s=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(s=n.memoizedState.cachePool.pool),u=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(u=o.memoizedState.cachePool.pool),u!==s&&(o.flags|=2048),n!==null&&z(Jl),null;case 24:return s=null,n!==null&&(s=n.memoizedState.cache),o.memoizedState.cache!==s&&(o.flags|=2048),Ao(bn),jt(o),null;case 25:return null;case 30:return null}throw Error(i(156,o.tag))}function rM(n,o){switch(uA(o),o.tag){case 1:return n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 3:return Ao(bn),Oe(),n=o.flags,(n&65536)!==0&&(n&128)===0?(o.flags=n&-65537|128,o):null;case 26:case 27:case 5:return ge(o),null;case 13:if(Ro(o),n=o.memoizedState,n!==null&&n.dehydrated!==null){if(o.alternate===null)throw Error(i(340));Pc()}return n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 19:return z(Dn),null;case 4:return Oe(),null;case 10:return Ao(o.type),null;case 22:case 23:return Ro(o),pA(),n!==null&&z(Jl),n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 24:return Ao(bn),null;case 25:return null;default:return null}}function Ag(n,o){switch(uA(o),o.tag){case 3:Ao(bn),Oe();break;case 26:case 27:case 5:ge(o);break;case 4:Oe();break;case 13:Ro(o);break;case 19:z(Dn);break;case 10:Ao(o.type);break;case 22:case 23:Ro(o),pA(),n!==null&&z(Jl);break;case 24:Ao(bn)}}function eu(n,o){try{var s=o.updateQueue,u=s!==null?s.lastEffect:null;if(u!==null){var f=u.next;s=f;do{if((s.tag&n)===n){u=void 0;var m=s.create,p=s.inst;u=m(),p.destroy=u}s=s.next}while(s!==f)}}catch(v){yt(o,o.return,v)}}function $o(n,o,s){try{var u=o.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var m=f.next;u=m;do{if((u.tag&n)===n){var p=u.inst,v=p.destroy;if(v!==void 0){p.destroy=void 0,f=o;var j=s,ie=v;try{ie()}catch(me){yt(f,j,me)}}}u=u.next}while(u!==m)}}catch(me){yt(o,o.return,me)}}function mg(n){var o=n.updateQueue;if(o!==null){var s=n.stateNode;try{a_(o,s)}catch(u){yt(n,n.return,u)}}}function Rg(n,o,s){s.props=ts(n.type,n.memoizedProps),s.state=n.memoizedState;try{s.componentWillUnmount()}catch(u){yt(n,o,u)}}function tu(n,o){try{var s=n.ref;if(s!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof s=="function"?n.refCleanup=s(u):s.current=u}}catch(f){yt(n,o,f)}}function Ki(n,o){var s=n.ref,u=n.refCleanup;if(s!==null)if(typeof u=="function")try{u()}catch(f){yt(n,o,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(f){yt(n,o,f)}else s.current=null}function Tg(n){var o=n.type,s=n.memoizedProps,u=n.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":s.autoFocus&&u.focus();break e;case"img":s.src?u.src=s.src:s.srcSet&&(u.srcset=s.srcSet)}}catch(f){yt(n,n.return,f)}}function $A(n,o,s){try{var u=n.stateNode;yM(u,n.type,s,o),u[Da]=o}catch(f){yt(n,n.return,f)}}function Sg(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&ll(n.type)||n.tag===4}function JA(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Sg(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&ll(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function em(n,o,s){var u=n.tag;if(u===5||u===6)n=n.stateNode,o?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(n,o):(o=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,o.appendChild(n),s=s._reactRootContainer,s!=null||o.onclick!==null||(o.onclick=Ah));else if(u!==4&&(u===27&&ll(n.type)&&(s=n.stateNode,o=null),n=n.child,n!==null))for(em(n,o,s),n=n.sibling;n!==null;)em(n,o,s),n=n.sibling}function ih(n,o,s){var u=n.tag;if(u===5||u===6)n=n.stateNode,o?s.insertBefore(n,o):s.appendChild(n);else if(u!==4&&(u===27&&ll(n.type)&&(s=n.stateNode),n=n.child,n!==null))for(ih(n,o,s),n=n.sibling;n!==null;)ih(n,o,s),n=n.sibling}function Ig(n){var o=n.stateNode,s=n.memoizedProps;try{for(var u=n.type,f=o.attributes;f.length;)o.removeAttributeNode(f[0]);Xn(o,u,s),o[na]=n,o[Da]=s}catch(m){yt(n,n.return,m)}}var Io=!1,An=!1,tm=!1,_g=typeof WeakSet=="function"?WeakSet:Set,wn=null;function cM(n,o){if(n=n.containerInfo,Cm=gh,n=LI(n),Jf(n)){if("selectionStart"in n)var s={start:n.selectionStart,end:n.selectionEnd};else e:{s=(s=n.ownerDocument)&&s.defaultView||window;var u=s.getSelection&&s.getSelection();if(u&&u.rangeCount!==0){s=u.anchorNode;var f=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{s.nodeType,m.nodeType}catch{s=null;break e}var p=0,v=-1,j=-1,ie=0,me=0,Se=n,re=null;t:for(;;){for(var ce;Se!==s||f!==0&&Se.nodeType!==3||(v=p+f),Se!==m||u!==0&&Se.nodeType!==3||(j=p+u),Se.nodeType===3&&(p+=Se.nodeValue.length),(ce=Se.firstChild)!==null;)re=Se,Se=ce;for(;;){if(Se===n)break t;if(re===s&&++ie===f&&(v=p),re===m&&++me===u&&(j=p),(ce=Se.nextSibling)!==null)break;Se=re,re=Se.parentNode}Se=ce}s=v===-1||j===-1?null:{start:v,end:j}}else s=null}s=s||{start:0,end:0}}else s=null;for(Om={focusedElem:n,selectionRange:s},gh=!1,wn=o;wn!==null;)if(o=wn,n=o.child,(o.subtreeFlags&1024)!==0&&n!==null)n.return=o,wn=n;else for(;wn!==null;){switch(o=wn,m=o.alternate,n=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&m!==null){n=void 0,s=o,f=m.memoizedProps,m=m.memoizedState,u=s.stateNode;try{var je=ts(s.type,f,s.elementType===s.type);n=u.getSnapshotBeforeUpdate(je,m),u.__reactInternalSnapshotBeforeUpdate=n}catch(Be){yt(s,s.return,Be)}}break;case 3:if((n&1024)!==0){if(n=o.stateNode.containerInfo,s=n.nodeType,s===9)ym(n);else if(s===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":ym(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=o.sibling,n!==null){n.return=o.return,wn=n;break}wn=o.return}}function gg(n,o,s){var u=s.flags;switch(s.tag){case 0:case 11:case 15:Jo(n,s),u&4&&eu(5,s);break;case 1:if(Jo(n,s),u&4)if(n=s.stateNode,o===null)try{n.componentDidMount()}catch(p){yt(s,s.return,p)}else{var f=ts(s.type,o.memoizedProps);o=o.memoizedState;try{n.componentDidUpdate(f,o,n.__reactInternalSnapshotBeforeUpdate)}catch(p){yt(s,s.return,p)}}u&64&&mg(s),u&512&&tu(s,s.return);break;case 3:if(Jo(n,s),u&64&&(n=s.updateQueue,n!==null)){if(o=null,s.child!==null)switch(s.child.tag){case 27:case 5:o=s.child.stateNode;break;case 1:o=s.child.stateNode}try{a_(n,o)}catch(p){yt(s,s.return,p)}}break;case 27:o===null&&u&4&&Ig(s);case 26:case 5:Jo(n,s),o===null&&u&4&&Tg(s),u&512&&tu(s,s.return);break;case 12:Jo(n,s);break;case 13:Jo(n,s),u&4&&Cg(n,s),u&64&&(n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(s=TM.bind(null,s),kM(n,s))));break;case 22:if(u=s.memoizedState!==null||Io,!u){o=o!==null&&o.memoizedState!==null||An,f=Io;var m=An;Io=u,(An=o)&&!m?el(n,s,(s.subtreeFlags&8772)!==0):Jo(n,s),Io=f,An=m}break;case 30:break;default:Jo(n,s)}}function Ng(n){var o=n.alternate;o!==null&&(n.alternate=null,Ng(o)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(o=n.stateNode,o!==null&&Uf(o)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Bt=null,Ma=!1;function _o(n,o,s){for(s=s.child;s!==null;)pg(n,o,s),s=s.sibling}function pg(n,o,s){if(Ga&&typeof Ga.onCommitFiberUnmount=="function")try{Ga.onCommitFiberUnmount(gc,s)}catch{}switch(s.tag){case 26:An||Ki(s,o),_o(n,o,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:An||Ki(s,o);var u=Bt,f=Ma;ll(s.type)&&(Bt=s.stateNode,Ma=!1),_o(n,o,s),uu(s.stateNode),Bt=u,Ma=f;break;case 5:An||Ki(s,o);case 6:if(u=Bt,f=Ma,Bt=null,_o(n,o,s),Bt=u,Ma=f,Bt!==null)if(Ma)try{(Bt.nodeType===9?Bt.body:Bt.nodeName==="HTML"?Bt.ownerDocument.body:Bt).removeChild(s.stateNode)}catch(m){yt(s,o,m)}else try{Bt.removeChild(s.stateNode)}catch(m){yt(s,o,m)}break;case 18:Bt!==null&&(Ma?(n=Bt,hN(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,s.stateNode),Tu(n)):hN(Bt,s.stateNode));break;case 4:u=Bt,f=Ma,Bt=s.stateNode.containerInfo,Ma=!0,_o(n,o,s),Bt=u,Ma=f;break;case 0:case 11:case 14:case 15:An||$o(2,s,o),An||$o(4,s,o),_o(n,o,s);break;case 1:An||(Ki(s,o),u=s.stateNode,typeof u.componentWillUnmount=="function"&&Rg(s,o,u)),_o(n,o,s);break;case 21:_o(n,o,s);break;case 22:An=(u=An)||s.memoizedState!==null,_o(n,o,s),An=u;break;default:_o(n,o,s)}}function Cg(n,o){if(o.memoizedState===null&&(n=o.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Tu(n)}catch(s){yt(o,o.return,s)}}function uM(n){switch(n.tag){case 13:case 19:var o=n.stateNode;return o===null&&(o=n.stateNode=new _g),o;case 22:return n=n.stateNode,o=n._retryCache,o===null&&(o=n._retryCache=new _g),o;default:throw Error(i(435,n.tag))}}function nm(n,o){var s=uM(n);o.forEach(function(u){var f=SM.bind(null,n,u);s.has(u)||(s.add(u),u.then(f,f))})}function ja(n,o){var s=o.deletions;if(s!==null)for(var u=0;u<s.length;u++){var f=s[u],m=n,p=o,v=p;e:for(;v!==null;){switch(v.tag){case 27:if(ll(v.type)){Bt=v.stateNode,Ma=!1;break e}break;case 5:Bt=v.stateNode,Ma=!1;break e;case 3:case 4:Bt=v.stateNode.containerInfo,Ma=!0;break e}v=v.return}if(Bt===null)throw Error(i(160));pg(m,p,f),Bt=null,Ma=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)Og(o,n),o=o.sibling}var pi=null;function Og(n,o){var s=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:ja(o,n),Ya(n),u&4&&($o(3,n,n.return),eu(3,n),$o(5,n,n.return));break;case 1:ja(o,n),Ya(n),u&512&&(An||s===null||Ki(s,s.return)),u&64&&Io&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(s=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=s===null?u:s.concat(u))));break;case 26:var f=pi;if(ja(o,n),Ya(n),u&512&&(An||s===null||Ki(s,s.return)),u&4){var m=s!==null?s.memoizedState:null;if(u=n.memoizedState,s===null)if(u===null)if(n.stateNode===null){e:{u=n.type,s=n.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Cc]||m[na]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(u),f.head.insertBefore(m,f.querySelector("head > title"))),Xn(m,u,s),m[na]=n,kn(m),u=m;break e;case"link":var p=IN("link","href",f).get(u+(s.href||""));if(p){for(var v=0;v<p.length;v++)if(m=p[v],m.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&m.getAttribute("rel")===(s.rel==null?null:s.rel)&&m.getAttribute("title")===(s.title==null?null:s.title)&&m.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){p.splice(v,1);break t}}m=f.createElement(u),Xn(m,u,s),f.head.appendChild(m);break;case"meta":if(p=IN("meta","content",f).get(u+(s.content||""))){for(v=0;v<p.length;v++)if(m=p[v],m.getAttribute("content")===(s.content==null?null:""+s.content)&&m.getAttribute("name")===(s.name==null?null:s.name)&&m.getAttribute("property")===(s.property==null?null:s.property)&&m.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&m.getAttribute("charset")===(s.charSet==null?null:s.charSet)){p.splice(v,1);break t}}m=f.createElement(u),Xn(m,u,s),f.head.appendChild(m);break;default:throw Error(i(468,u))}m[na]=n,kn(m),u=m}n.stateNode=u}else _N(f,n.type,n.stateNode);else n.stateNode=SN(f,u,n.memoizedProps);else m!==u?(m===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):m.count--,u===null?_N(f,n.type,n.stateNode):SN(f,u,n.memoizedProps)):u===null&&n.stateNode!==null&&$A(n,n.memoizedProps,s.memoizedProps)}break;case 27:ja(o,n),Ya(n),u&512&&(An||s===null||Ki(s,s.return)),s!==null&&u&4&&$A(n,n.memoizedProps,s.memoizedProps);break;case 5:if(ja(o,n),Ya(n),u&512&&(An||s===null||Ki(s,s.return)),n.flags&32){f=n.stateNode;try{Zs(f,"")}catch(ce){yt(n,n.return,ce)}}u&4&&n.stateNode!=null&&(f=n.memoizedProps,$A(n,f,s!==null?s.memoizedProps:f)),u&1024&&(tm=!0);break;case 6:if(ja(o,n),Ya(n),u&4){if(n.stateNode===null)throw Error(i(162));u=n.memoizedProps,s=n.stateNode;try{s.nodeValue=u}catch(ce){yt(n,n.return,ce)}}break;case 3:if(Sh=null,f=pi,pi=Rh(o.containerInfo),ja(o,n),pi=f,Ya(n),u&4&&s!==null&&s.memoizedState.isDehydrated)try{Tu(o.containerInfo)}catch(ce){yt(n,n.return,ce)}tm&&(tm=!1,bg(n));break;case 4:u=pi,pi=Rh(n.stateNode.containerInfo),ja(o,n),Ya(n),pi=u;break;case 12:ja(o,n),Ya(n);break;case 13:ja(o,n),Ya(n),n.child.flags&8192&&n.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(rm=ye()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,nm(n,u)));break;case 22:f=n.memoizedState!==null;var j=s!==null&&s.memoizedState!==null,ie=Io,me=An;if(Io=ie||f,An=me||j,ja(o,n),An=me,Io=ie,Ya(n),u&8192)e:for(o=n.stateNode,o._visibility=f?o._visibility&-2:o._visibility|1,f&&(s===null||j||Io||An||ns(n)),s=null,o=n;;){if(o.tag===5||o.tag===26){if(s===null){j=s=o;try{if(m=j.stateNode,f)p=m.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none";else{v=j.stateNode;var Se=j.memoizedProps.style,re=Se!=null&&Se.hasOwnProperty("display")?Se.display:null;v.style.display=re==null||typeof re=="boolean"?"":(""+re).trim()}}catch(ce){yt(j,j.return,ce)}}}else if(o.tag===6){if(s===null){j=o;try{j.stateNode.nodeValue=f?"":j.memoizedProps}catch(ce){yt(j,j.return,ce)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===n)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===n)break e;for(;o.sibling===null;){if(o.return===null||o.return===n)break e;s===o&&(s=null),o=o.return}s===o&&(s=null),o.sibling.return=o.return,o=o.sibling}u&4&&(u=n.updateQueue,u!==null&&(s=u.retryQueue,s!==null&&(u.retryQueue=null,nm(n,s))));break;case 19:ja(o,n),Ya(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,nm(n,u)));break;case 30:break;case 21:break;default:ja(o,n),Ya(n)}}function Ya(n){var o=n.flags;if(o&2){try{for(var s,u=n.return;u!==null;){if(Sg(u)){s=u;break}u=u.return}if(s==null)throw Error(i(160));switch(s.tag){case 27:var f=s.stateNode,m=JA(n);ih(n,m,f);break;case 5:var p=s.stateNode;s.flags&32&&(Zs(p,""),s.flags&=-33);var v=JA(n);ih(n,v,p);break;case 3:case 4:var j=s.stateNode.containerInfo,ie=JA(n);em(n,ie,j);break;default:throw Error(i(161))}}catch(me){yt(n,n.return,me)}n.flags&=-3}o&4096&&(n.flags&=-4097)}function bg(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var o=n;bg(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),n=n.sibling}}function Jo(n,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)gg(n,o.alternate,o),o=o.sibling}function ns(n){for(n=n.child;n!==null;){var o=n;switch(o.tag){case 0:case 11:case 14:case 15:$o(4,o,o.return),ns(o);break;case 1:Ki(o,o.return);var s=o.stateNode;typeof s.componentWillUnmount=="function"&&Rg(o,o.return,s),ns(o);break;case 27:uu(o.stateNode);case 26:case 5:Ki(o,o.return),ns(o);break;case 22:o.memoizedState===null&&ns(o);break;case 30:ns(o);break;default:ns(o)}n=n.sibling}}function el(n,o,s){for(s=s&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var u=o.alternate,f=n,m=o,p=m.flags;switch(m.tag){case 0:case 11:case 15:el(f,m,s),eu(4,m);break;case 1:if(el(f,m,s),u=m,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(ie){yt(u,u.return,ie)}if(u=m,f=u.updateQueue,f!==null){var v=u.stateNode;try{var j=f.shared.hiddenCallbacks;if(j!==null)for(f.shared.hiddenCallbacks=null,f=0;f<j.length;f++)n_(j[f],v)}catch(ie){yt(u,u.return,ie)}}s&&p&64&&mg(m),tu(m,m.return);break;case 27:Ig(m);case 26:case 5:el(f,m,s),s&&u===null&&p&4&&Tg(m),tu(m,m.return);break;case 12:el(f,m,s);break;case 13:el(f,m,s),s&&p&4&&Cg(f,m);break;case 22:m.memoizedState===null&&el(f,m,s),tu(m,m.return);break;case 30:break;default:el(f,m,s)}o=o.sibling}}function am(n,o){var s=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(s=n.memoizedState.cachePool.pool),n=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(n=o.memoizedState.cachePool.pool),n!==s&&(n!=null&&n.refCount++,s!=null&&Bc(s))}function im(n,o){n=null,o.alternate!==null&&(n=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==n&&(o.refCount++,n!=null&&Bc(n))}function Vi(n,o,s,u){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Dg(n,o,s,u),o=o.sibling}function Dg(n,o,s,u){var f=o.flags;switch(o.tag){case 0:case 11:case 15:Vi(n,o,s,u),f&2048&&eu(9,o);break;case 1:Vi(n,o,s,u);break;case 3:Vi(n,o,s,u),f&2048&&(n=null,o.alternate!==null&&(n=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==n&&(o.refCount++,n!=null&&Bc(n)));break;case 12:if(f&2048){Vi(n,o,s,u),n=o.stateNode;try{var m=o.memoizedProps,p=m.id,v=m.onPostCommit;typeof v=="function"&&v(p,o.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(j){yt(o,o.return,j)}}else Vi(n,o,s,u);break;case 13:Vi(n,o,s,u);break;case 23:break;case 22:m=o.stateNode,p=o.alternate,o.memoizedState!==null?m._visibility&2?Vi(n,o,s,u):nu(n,o):m._visibility&2?Vi(n,o,s,u):(m._visibility|=2,Ar(n,o,s,u,(o.subtreeFlags&10256)!==0)),f&2048&&am(p,o);break;case 24:Vi(n,o,s,u),f&2048&&im(o.alternate,o);break;default:Vi(n,o,s,u)}}function Ar(n,o,s,u,f){for(f=f&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var m=n,p=o,v=s,j=u,ie=p.flags;switch(p.tag){case 0:case 11:case 15:Ar(m,p,v,j,f),eu(8,p);break;case 23:break;case 22:var me=p.stateNode;p.memoizedState!==null?me._visibility&2?Ar(m,p,v,j,f):nu(m,p):(me._visibility|=2,Ar(m,p,v,j,f)),f&&ie&2048&&am(p.alternate,p);break;case 24:Ar(m,p,v,j,f),f&&ie&2048&&im(p.alternate,p);break;default:Ar(m,p,v,j,f)}o=o.sibling}}function nu(n,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var s=n,u=o,f=u.flags;switch(u.tag){case 22:nu(s,u),f&2048&&am(u.alternate,u);break;case 24:nu(s,u),f&2048&&im(u.alternate,u);break;default:nu(s,u)}o=o.sibling}}var au=8192;function mr(n){if(n.subtreeFlags&au)for(n=n.child;n!==null;)yg(n),n=n.sibling}function yg(n){switch(n.tag){case 26:mr(n),n.flags&au&&n.memoizedState!==null&&qM(pi,n.memoizedState,n.memoizedProps);break;case 5:mr(n);break;case 3:case 4:var o=pi;pi=Rh(n.stateNode.containerInfo),mr(n),pi=o;break;case 22:n.memoizedState===null&&(o=n.alternate,o!==null&&o.memoizedState!==null?(o=au,au=16777216,mr(n),au=o):mr(n));break;default:mr(n)}}function vg(n){var o=n.alternate;if(o!==null&&(n=o.child,n!==null)){o.child=null;do o=n.sibling,n.sibling=null,n=o;while(n!==null)}}function iu(n){var o=n.deletions;if((n.flags&16)!==0){if(o!==null)for(var s=0;s<o.length;s++){var u=o[s];wn=u,Lg(u,n)}vg(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Mg(n),n=n.sibling}function Mg(n){switch(n.tag){case 0:case 11:case 15:iu(n),n.flags&2048&&$o(9,n,n.return);break;case 3:iu(n);break;case 12:iu(n);break;case 22:var o=n.stateNode;n.memoizedState!==null&&o._visibility&2&&(n.return===null||n.return.tag!==13)?(o._visibility&=-3,oh(n)):iu(n);break;default:iu(n)}}function oh(n){var o=n.deletions;if((n.flags&16)!==0){if(o!==null)for(var s=0;s<o.length;s++){var u=o[s];wn=u,Lg(u,n)}vg(n)}for(n=n.child;n!==null;){switch(o=n,o.tag){case 0:case 11:case 15:$o(8,o,o.return),oh(o);break;case 22:s=o.stateNode,s._visibility&2&&(s._visibility&=-3,oh(o));break;default:oh(o)}n=n.sibling}}function Lg(n,o){for(;wn!==null;){var s=wn;switch(s.tag){case 0:case 11:case 15:$o(8,s,o);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var u=s.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Bc(s.memoizedState.cache)}if(u=s.child,u!==null)u.return=s,wn=u;else e:for(s=n;wn!==null;){u=wn;var f=u.sibling,m=u.return;if(Ng(u),u===s){wn=null;break e}if(f!==null){f.return=m,wn=f;break e}wn=m}}}var dM={getCacheForType:function(n){var o=aa(bn),s=o.data.get(n);return s===void 0&&(s=n(),o.data.set(n,s)),s}},hM=typeof WeakMap=="function"?WeakMap:Map,Tt=0,kt=null,it=null,ut=0,St=0,Ka=null,tl=!1,Rr=!1,om=!1,go=0,en=0,nl=0,as=0,lm=0,ci=0,Tr=0,ou=null,La=null,sm=!1,rm=0,lh=1/0,sh=null,al=null,Wn=0,il=null,Sr=null,Ir=0,cm=0,um=null,Hg=null,lu=0,dm=null;function Va(){if((Tt&2)!==0&&ut!==0)return ut&-ut;if(F.T!==null){var n=sr;return n!==0?n:Tm()}return qS()}function Ug(){ci===0&&(ci=(ut&536870912)===0||Rt?KS():536870912);var n=ri.current;return n!==null&&(n.flags|=32),ci}function Wa(n,o,s){(n===kt&&(St===2||St===9)||n.cancelPendingCommit!==null)&&(_r(n,0),ol(n,ut,ci,!1)),pc(n,s),((Tt&2)===0||n!==kt)&&(n===kt&&((Tt&2)===0&&(as|=s),en===4&&ol(n,ut,ci,!1)),Wi(n))}function xg(n,o,s){if((Tt&6)!==0)throw Error(i(327));var u=!s&&(o&124)===0&&(o&n.expiredLanes)===0||Nc(n,o),f=u?AM(n,o):fm(n,o,!0),m=u;do{if(f===0){Rr&&!u&&ol(n,o,0,!1);break}else{if(s=n.current.alternate,m&&!EM(s)){f=fm(n,o,!1),m=!1;continue}if(f===2){if(m=o,n.errorRecoveryDisabledLanes&m)var p=0;else p=n.pendingLanes&-536870913,p=p!==0?p:p&536870912?536870912:0;if(p!==0){o=p;e:{var v=n;f=ou;var j=v.current.memoizedState.isDehydrated;if(j&&(_r(v,p).flags|=256),p=fm(v,p,!1),p!==2){if(om&&!j){v.errorRecoveryDisabledLanes|=m,as|=m,f=4;break e}m=La,La=f,m!==null&&(La===null?La=m:La.push.apply(La,m))}f=p}if(m=!1,f!==2)continue}}if(f===1){_r(n,0),ol(n,o,0,!0);break}e:{switch(u=n,m=f,m){case 0:case 1:throw Error(i(345));case 4:if((o&4194048)!==o)break;case 6:ol(u,o,ci,!tl);break e;case 2:La=null;break;case 3:case 5:break;default:throw Error(i(329))}if((o&62914560)===o&&(f=rm+300-ye(),10<f)){if(ol(u,o,ci,!tl),Td(u,0,!0)!==0)break e;u.timeoutHandle=uN(kg.bind(null,u,s,La,sh,sm,o,ci,as,Tr,tl,m,2,-0,0),f);break e}kg(u,s,La,sh,sm,o,ci,as,Tr,tl,m,0,-0,0)}}break}while(!0);Wi(n)}function kg(n,o,s,u,f,m,p,v,j,ie,me,Se,re,ce){if(n.timeoutHandle=-1,Se=o.subtreeFlags,(Se&8192||(Se&16785408)===16785408)&&(Eu={stylesheets:null,count:0,unsuspend:XM},yg(o),Se=ZM(),Se!==null)){n.cancelPendingCommit=Se(jg.bind(null,n,o,m,s,u,f,p,v,j,me,1,re,ce)),ol(n,m,p,!ie);return}jg(n,o,m,s,u,f,p,v,j)}function EM(n){for(var o=n;;){var s=o.tag;if((s===0||s===11||s===15)&&o.flags&16384&&(s=o.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var u=0;u<s.length;u++){var f=s[u],m=f.getSnapshot;f=f.value;try{if(!Fa(m(),f))return!1}catch{return!1}}if(s=o.child,o.subtreeFlags&16384&&s!==null)s.return=o,o=s;else{if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function ol(n,o,s,u){o&=~lm,o&=~as,n.suspendedLanes|=o,n.pingedLanes&=~o,u&&(n.warmLanes|=o),u=n.expirationTimes;for(var f=o;0<f;){var m=31-Ba(f),p=1<<m;u[m]=-1,f&=~p}s!==0&&WS(n,s,o)}function rh(){return(Tt&6)===0?(su(0),!1):!0}function hm(){if(it!==null){if(St===0)var n=it.return;else n=it,fo=Ql=null,yA(n),Er=null,Qc=0,n=it;for(;n!==null;)Ag(n.alternate,n),n=n.return;it=null}}function _r(n,o){var s=n.timeoutHandle;s!==-1&&(n.timeoutHandle=-1,MM(s)),s=n.cancelPendingCommit,s!==null&&(n.cancelPendingCommit=null,s()),hm(),kt=n,it=s=uo(n.current,null),ut=o,St=0,Ka=null,tl=!1,Rr=Nc(n,o),om=!1,Tr=ci=lm=as=nl=en=0,La=ou=null,sm=!1,(o&8)!==0&&(o|=o&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=o;0<u;){var f=31-Ba(u),m=1<<f;o|=n[f],u&=~m}return go=o,vd(),s}function Pg(n,o){Je=null,F.H=qd,o===zc||o===Gd?(o=e_(),St=3):o===QI?(o=e_(),St=4):St=o===tg?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Ka=o,it===null&&(en=1,eh(n,ii(o,n.current)))}function wg(){var n=F.H;return F.H=qd,n===null?qd:n}function Gg(){var n=F.A;return F.A=dM,n}function Em(){en=4,tl||(ut&4194048)!==ut&&ri.current!==null||(Rr=!0),(nl&134217727)===0&&(as&134217727)===0||kt===null||ol(kt,ut,ci,!1)}function fm(n,o,s){var u=Tt;Tt|=2;var f=wg(),m=Gg();(kt!==n||ut!==o)&&(sh=null,_r(n,o)),o=!1;var p=en;e:do try{if(St!==0&&it!==null){var v=it,j=Ka;switch(St){case 8:hm(),p=6;break e;case 3:case 2:case 9:case 6:ri.current===null&&(o=!0);var ie=St;if(St=0,Ka=null,gr(n,v,j,ie),s&&Rr){p=0;break e}break;default:ie=St,St=0,Ka=null,gr(n,v,j,ie)}}fM(),p=en;break}catch(me){Pg(n,me)}while(!0);return o&&n.shellSuspendCounter++,fo=Ql=null,Tt=u,F.H=f,F.A=m,it===null&&(kt=null,ut=0,vd()),p}function fM(){for(;it!==null;)Bg(it)}function AM(n,o){var s=Tt;Tt|=2;var u=wg(),f=Gg();kt!==n||ut!==o?(sh=null,lh=ye()+500,_r(n,o)):Rr=Nc(n,o);e:do try{if(St!==0&&it!==null){o=it;var m=Ka;t:switch(St){case 1:St=0,Ka=null,gr(n,o,m,1);break;case 2:case 9:if($I(m)){St=0,Ka=null,Fg(o);break}o=function(){St!==2&&St!==9||kt!==n||(St=7),Wi(n)},m.then(o,o);break e;case 3:St=7;break e;case 4:St=5;break e;case 7:$I(m)?(St=0,Ka=null,Fg(o)):(St=0,Ka=null,gr(n,o,m,7));break;case 5:var p=null;switch(it.tag){case 26:p=it.memoizedState;case 5:case 27:var v=it;if(!p||gN(p)){St=0,Ka=null;var j=v.sibling;if(j!==null)it=j;else{var ie=v.return;ie!==null?(it=ie,ch(ie)):it=null}break t}}St=0,Ka=null,gr(n,o,m,5);break;case 6:St=0,Ka=null,gr(n,o,m,6);break;case 8:hm(),en=6;break e;default:throw Error(i(462))}}mM();break}catch(me){Pg(n,me)}while(!0);return fo=Ql=null,F.H=u,F.A=f,Tt=s,it!==null?0:(kt=null,ut=0,vd(),en)}function mM(){for(;it!==null&&!Ie();)Bg(it)}function Bg(n){var o=Eg(n.alternate,n,go);n.memoizedProps=n.pendingProps,o===null?ch(n):it=o}function Fg(n){var o=n,s=o.alternate;switch(o.tag){case 15:case 0:o=sg(s,o,o.pendingProps,o.type,void 0,ut);break;case 11:o=sg(s,o,o.pendingProps,o.type.render,o.ref,ut);break;case 5:yA(o);default:Ag(s,o),o=it=zI(o,go),o=Eg(s,o,go)}n.memoizedProps=n.pendingProps,o===null?ch(n):it=o}function gr(n,o,s,u){fo=Ql=null,yA(o),Er=null,Qc=0;var f=o.return;try{if(oM(n,f,o,s,ut)){en=1,eh(n,ii(s,n.current)),it=null;return}}catch(m){if(f!==null)throw it=f,m;en=1,eh(n,ii(s,n.current)),it=null;return}o.flags&32768?(Rt||u===1?n=!0:Rr||(ut&536870912)!==0?n=!1:(tl=n=!0,(u===2||u===9||u===3||u===6)&&(u=ri.current,u!==null&&u.tag===13&&(u.flags|=16384))),zg(o,n)):ch(o)}function ch(n){var o=n;do{if((o.flags&32768)!==0){zg(o,tl);return}n=o.return;var s=sM(o.alternate,o,go);if(s!==null){it=s;return}if(o=o.sibling,o!==null){it=o;return}it=o=n}while(o!==null);en===0&&(en=5)}function zg(n,o){do{var s=rM(n.alternate,n);if(s!==null){s.flags&=32767,it=s;return}if(s=n.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!o&&(n=n.sibling,n!==null)){it=n;return}it=n=s}while(n!==null);en=6,it=null}function jg(n,o,s,u,f,m,p,v,j){n.cancelPendingCommit=null;do uh();while(Wn!==0);if((Tt&6)!==0)throw Error(i(327));if(o!==null){if(o===n.current)throw Error(i(177));if(m=o.lanes|o.childLanes,m|=iA,Xy(n,s,m,p,v,j),n===kt&&(it=kt=null,ut=0),Sr=o,il=n,Ir=s,cm=m,um=f,Hg=u,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,IM($t,function(){return Xg(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||u){u=F.T,F.T=null,f=w.p,w.p=2,p=Tt,Tt|=4;try{cM(n,o,s)}finally{Tt=p,w.p=f,F.T=u}}Wn=1,Yg(),Kg(),Vg()}}function Yg(){if(Wn===1){Wn=0;var n=il,o=Sr,s=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||s){s=F.T,F.T=null;var u=w.p;w.p=2;var f=Tt;Tt|=4;try{Og(o,n);var m=Om,p=LI(n.containerInfo),v=m.focusedElem,j=m.selectionRange;if(p!==v&&v&&v.ownerDocument&&MI(v.ownerDocument.documentElement,v)){if(j!==null&&Jf(v)){var ie=j.start,me=j.end;if(me===void 0&&(me=ie),"selectionStart"in v)v.selectionStart=ie,v.selectionEnd=Math.min(me,v.value.length);else{var Se=v.ownerDocument||document,re=Se&&Se.defaultView||window;if(re.getSelection){var ce=re.getSelection(),je=v.textContent.length,Be=Math.min(j.start,je),Ct=j.end===void 0?Be:Math.min(j.end,je);!ce.extend&&Be>Ct&&(p=Ct,Ct=Be,Be=p);var $=vI(v,Be),V=vI(v,Ct);if($&&V&&(ce.rangeCount!==1||ce.anchorNode!==$.node||ce.anchorOffset!==$.offset||ce.focusNode!==V.node||ce.focusOffset!==V.offset)){var te=Se.createRange();te.setStart($.node,$.offset),ce.removeAllRanges(),Be>Ct?(ce.addRange(te),ce.extend(V.node,V.offset)):(te.setEnd(V.node,V.offset),ce.addRange(te))}}}}for(Se=[],ce=v;ce=ce.parentNode;)ce.nodeType===1&&Se.push({element:ce,left:ce.scrollLeft,top:ce.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<Se.length;v++){var Te=Se[v];Te.element.scrollLeft=Te.left,Te.element.scrollTop=Te.top}}gh=!!Cm,Om=Cm=null}finally{Tt=f,w.p=u,F.T=s}}n.current=o,Wn=2}}function Kg(){if(Wn===2){Wn=0;var n=il,o=Sr,s=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||s){s=F.T,F.T=null;var u=w.p;w.p=2;var f=Tt;Tt|=4;try{gg(n,o.alternate,o)}finally{Tt=f,w.p=u,F.T=s}}Wn=3}}function Vg(){if(Wn===4||Wn===3){Wn=0,Ce();var n=il,o=Sr,s=Ir,u=Hg;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Wn=5:(Wn=0,Sr=il=null,Wg(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(al=null),Lf(s),o=o.stateNode,Ga&&typeof Ga.onCommitFiberRoot=="function")try{Ga.onCommitFiberRoot(gc,o,void 0,(o.current.flags&128)===128)}catch{}if(u!==null){o=F.T,f=w.p,w.p=2,F.T=null;try{for(var m=n.onRecoverableError,p=0;p<u.length;p++){var v=u[p];m(v.value,{componentStack:v.stack})}}finally{F.T=o,w.p=f}}(Ir&3)!==0&&uh(),Wi(n),f=n.pendingLanes,(s&4194090)!==0&&(f&42)!==0?n===dm?lu++:(lu=0,dm=n):lu=0,su(0)}}function Wg(n,o){(n.pooledCacheLanes&=o)===0&&(o=n.pooledCache,o!=null&&(n.pooledCache=null,Bc(o)))}function uh(n){return Yg(),Kg(),Vg(),Xg()}function Xg(){if(Wn!==5)return!1;var n=il,o=cm;cm=0;var s=Lf(Ir),u=F.T,f=w.p;try{w.p=32>s?32:s,F.T=null,s=um,um=null;var m=il,p=Ir;if(Wn=0,Sr=il=null,Ir=0,(Tt&6)!==0)throw Error(i(331));var v=Tt;if(Tt|=4,Mg(m.current),Dg(m,m.current,p,s),Tt=v,su(0,!1),Ga&&typeof Ga.onPostCommitFiberRoot=="function")try{Ga.onPostCommitFiberRoot(gc,m)}catch{}return!0}finally{w.p=f,F.T=u,Wg(n,o)}}function qg(n,o,s){o=ii(s,o),o=jA(n.stateNode,o,2),n=Xo(n,o,2),n!==null&&(pc(n,2),Wi(n))}function yt(n,o,s){if(n.tag===3)qg(n,n,s);else for(;o!==null;){if(o.tag===3){qg(o,n,s);break}else if(o.tag===1){var u=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(al===null||!al.has(u))){n=ii(s,n),s=J_(2),u=Xo(o,s,2),u!==null&&(eg(s,u,o,n),pc(u,2),Wi(u));break}}o=o.return}}function Am(n,o,s){var u=n.pingCache;if(u===null){u=n.pingCache=new hM;var f=new Set;u.set(o,f)}else f=u.get(o),f===void 0&&(f=new Set,u.set(o,f));f.has(s)||(om=!0,f.add(s),n=RM.bind(null,n,o,s),o.then(n,n))}function RM(n,o,s){var u=n.pingCache;u!==null&&u.delete(o),n.pingedLanes|=n.suspendedLanes&s,n.warmLanes&=~s,kt===n&&(ut&s)===s&&(en===4||en===3&&(ut&62914560)===ut&&300>ye()-rm?(Tt&2)===0&&_r(n,0):lm|=s,Tr===ut&&(Tr=0)),Wi(n)}function Zg(n,o){o===0&&(o=VS()),n=ar(n,o),n!==null&&(pc(n,o),Wi(n))}function TM(n){var o=n.memoizedState,s=0;o!==null&&(s=o.retryLane),Zg(n,s)}function SM(n,o){var s=0;switch(n.tag){case 13:var u=n.stateNode,f=n.memoizedState;f!==null&&(s=f.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(o),Zg(n,s)}function IM(n,o){return oe(n,o)}var dh=null,Nr=null,mm=!1,hh=!1,Rm=!1,is=0;function Wi(n){n!==Nr&&n.next===null&&(Nr===null?dh=Nr=n:Nr=Nr.next=n),hh=!0,mm||(mm=!0,gM())}function su(n,o){if(!Rm&&hh){Rm=!0;do for(var s=!1,u=dh;u!==null;){if(n!==0){var f=u.pendingLanes;if(f===0)var m=0;else{var p=u.suspendedLanes,v=u.pingedLanes;m=(1<<31-Ba(42|n)+1)-1,m&=f&~(p&~v),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(s=!0,eN(u,m))}else m=ut,m=Td(u,u===kt?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||Nc(u,m)||(s=!0,eN(u,m));u=u.next}while(s);Rm=!1}}function _M(){Qg()}function Qg(){hh=mm=!1;var n=0;is!==0&&(vM()&&(n=is),is=0);for(var o=ye(),s=null,u=dh;u!==null;){var f=u.next,m=$g(u,o);m===0?(u.next=null,s===null?dh=f:s.next=f,f===null&&(Nr=s)):(s=u,(n!==0||(m&3)!==0)&&(hh=!0)),u=f}su(n)}function $g(n,o){for(var s=n.suspendedLanes,u=n.pingedLanes,f=n.expirationTimes,m=n.pendingLanes&-62914561;0<m;){var p=31-Ba(m),v=1<<p,j=f[p];j===-1?((v&s)===0||(v&u)!==0)&&(f[p]=Wy(v,o)):j<=o&&(n.expiredLanes|=v),m&=~v}if(o=kt,s=ut,s=Td(n,n===o?s:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,s===0||n===o&&(St===2||St===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&pe(u),n.callbackNode=null,n.callbackPriority=0;if((s&3)===0||Nc(n,s)){if(o=s&-s,o===n.callbackPriority)return o;switch(u!==null&&pe(u),Lf(s)){case 2:case 8:s=mt;break;case 32:s=$t;break;case 268435456:s=zs;break;default:s=$t}return u=Jg.bind(null,n),s=oe(s,u),n.callbackPriority=o,n.callbackNode=s,o}return u!==null&&u!==null&&pe(u),n.callbackPriority=2,n.callbackNode=null,2}function Jg(n,o){if(Wn!==0&&Wn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var s=n.callbackNode;if(uh()&&n.callbackNode!==s)return null;var u=ut;return u=Td(n,n===kt?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(xg(n,u,o),$g(n,ye()),n.callbackNode!=null&&n.callbackNode===s?Jg.bind(null,n):null)}function eN(n,o){if(uh())return null;xg(n,o,!0)}function gM(){LM(function(){(Tt&6)!==0?oe(Ze,_M):Qg()})}function Tm(){return is===0&&(is=KS()),is}function tN(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Nd(""+n)}function nN(n,o){var s=o.ownerDocument.createElement("input");return s.name=o.name,s.value=o.value,n.id&&s.setAttribute("form",n.id),o.parentNode.insertBefore(s,o),n=new FormData(n),s.parentNode.removeChild(s),n}function NM(n,o,s,u,f){if(o==="submit"&&s&&s.stateNode===f){var m=tN((f[Da]||null).action),p=u.submitter;p&&(o=(o=p[Da]||null)?tN(o.formAction):p.getAttribute("formAction"),o!==null&&(m=o,p=null));var v=new bd("action","action",null,u,f);n.push({event:v,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(is!==0){var j=p?nN(f,p):new FormData(f);wA(s,{pending:!0,data:j,method:f.method,action:m},null,j)}}else typeof m=="function"&&(v.preventDefault(),j=p?nN(f,p):new FormData(f),wA(s,{pending:!0,data:j,method:f.method,action:m},m,j))},currentTarget:f}]})}}for(var Sm=0;Sm<aA.length;Sm++){var Im=aA[Sm],pM=Im.toLowerCase(),CM=Im[0].toUpperCase()+Im.slice(1);Ni(pM,"on"+CM)}Ni(xI,"onAnimationEnd"),Ni(kI,"onAnimationIteration"),Ni(PI,"onAnimationStart"),Ni("dblclick","onDoubleClick"),Ni("focusin","onFocus"),Ni("focusout","onBlur"),Ni(zv,"onTransitionRun"),Ni(jv,"onTransitionStart"),Ni(Yv,"onTransitionCancel"),Ni(wI,"onTransitionEnd"),Ws("onMouseEnter",["mouseout","mouseover"]),Ws("onMouseLeave",["mouseout","mouseover"]),Ws("onPointerEnter",["pointerout","pointerover"]),Ws("onPointerLeave",["pointerout","pointerover"]),zl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),zl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),zl("onBeforeInput",["compositionend","keypress","textInput","paste"]),zl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),zl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),zl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ru="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),OM=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ru));function aN(n,o){o=(o&4)!==0;for(var s=0;s<n.length;s++){var u=n[s],f=u.event;u=u.listeners;e:{var m=void 0;if(o)for(var p=u.length-1;0<=p;p--){var v=u[p],j=v.instance,ie=v.currentTarget;if(v=v.listener,j!==m&&f.isPropagationStopped())break e;m=v,f.currentTarget=ie;try{m(f)}catch(me){Jd(me)}f.currentTarget=null,m=j}else for(p=0;p<u.length;p++){if(v=u[p],j=v.instance,ie=v.currentTarget,v=v.listener,j!==m&&f.isPropagationStopped())break e;m=v,f.currentTarget=ie;try{m(f)}catch(me){Jd(me)}f.currentTarget=null,m=j}}}}function ot(n,o){var s=o[Hf];s===void 0&&(s=o[Hf]=new Set);var u=n+"__bubble";s.has(u)||(iN(o,n,2,!1),s.add(u))}function _m(n,o,s){var u=0;o&&(u|=4),iN(s,n,u,o)}var Eh="_reactListening"+Math.random().toString(36).slice(2);function gm(n){if(!n[Eh]){n[Eh]=!0,QS.forEach(function(s){s!=="selectionchange"&&(OM.has(s)||_m(s,!1,n),_m(s,!0,n))});var o=n.nodeType===9?n:n.ownerDocument;o===null||o[Eh]||(o[Eh]=!0,_m("selectionchange",!1,o))}}function iN(n,o,s,u){switch(DN(o)){case 2:var f=JM;break;case 8:f=eL;break;default:f=km}s=f.bind(null,o,s,n),f=void 0,!Yf||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(f=!0),u?f!==void 0?n.addEventListener(o,s,{capture:!0,passive:f}):n.addEventListener(o,s,!0):f!==void 0?n.addEventListener(o,s,{passive:f}):n.addEventListener(o,s,!1)}function Nm(n,o,s,u,f){var m=u;if((o&1)===0&&(o&2)===0&&u!==null)e:for(;;){if(u===null)return;var p=u.tag;if(p===3||p===4){var v=u.stateNode.containerInfo;if(v===f)break;if(p===4)for(p=u.return;p!==null;){var j=p.tag;if((j===3||j===4)&&p.stateNode.containerInfo===f)return;p=p.return}for(;v!==null;){if(p=Ys(v),p===null)return;if(j=p.tag,j===5||j===6||j===26||j===27){u=m=p;continue e}v=v.parentNode}}u=u.return}dI(function(){var ie=m,me=zf(s),Se=[];e:{var re=GI.get(n);if(re!==void 0){var ce=bd,je=n;switch(n){case"keypress":if(Cd(s)===0)break e;case"keydown":case"keyup":ce=Iv;break;case"focusin":je="focus",ce=Xf;break;case"focusout":je="blur",ce=Xf;break;case"beforeblur":case"afterblur":ce=Xf;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=fI;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=rv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=Nv;break;case xI:case kI:case PI:ce=dv;break;case wI:ce=Cv;break;case"scroll":case"scrollend":ce=lv;break;case"wheel":ce=bv;break;case"copy":case"cut":case"paste":ce=Ev;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=mI;break;case"toggle":case"beforetoggle":ce=yv}var Be=(o&4)!==0,Ct=!Be&&(n==="scroll"||n==="scrollend"),$=Be?re!==null?re+"Capture":null:re;Be=[];for(var V=ie,te;V!==null;){var Te=V;if(te=Te.stateNode,Te=Te.tag,Te!==5&&Te!==26&&Te!==27||te===null||$===null||(Te=bc(V,$),Te!=null&&Be.push(cu(V,Te,te))),Ct)break;V=V.return}0<Be.length&&(re=new ce(re,je,null,s,me),Se.push({event:re,listeners:Be}))}}if((o&7)===0){e:{if(re=n==="mouseover"||n==="pointerover",ce=n==="mouseout"||n==="pointerout",re&&s!==Ff&&(je=s.relatedTarget||s.fromElement)&&(Ys(je)||je[js]))break e;if((ce||re)&&(re=me.window===me?me:(re=me.ownerDocument)?re.defaultView||re.parentWindow:window,ce?(je=s.relatedTarget||s.toElement,ce=ie,je=je?Ys(je):null,je!==null&&(Ct=r(je),Be=je.tag,je!==Ct||Be!==5&&Be!==27&&Be!==6)&&(je=null)):(ce=null,je=ie),ce!==je)){if(Be=fI,Te="onMouseLeave",$="onMouseEnter",V="mouse",(n==="pointerout"||n==="pointerover")&&(Be=mI,Te="onPointerLeave",$="onPointerEnter",V="pointer"),Ct=ce==null?re:Oc(ce),te=je==null?re:Oc(je),re=new Be(Te,V+"leave",ce,s,me),re.target=Ct,re.relatedTarget=te,Te=null,Ys(me)===ie&&(Be=new Be($,V+"enter",je,s,me),Be.target=te,Be.relatedTarget=Ct,Te=Be),Ct=Te,ce&&je)t:{for(Be=ce,$=je,V=0,te=Be;te;te=pr(te))V++;for(te=0,Te=$;Te;Te=pr(Te))te++;for(;0<V-te;)Be=pr(Be),V--;for(;0<te-V;)$=pr($),te--;for(;V--;){if(Be===$||$!==null&&Be===$.alternate)break t;Be=pr(Be),$=pr($)}Be=null}else Be=null;ce!==null&&oN(Se,re,ce,Be,!1),je!==null&&Ct!==null&&oN(Se,Ct,je,Be,!0)}}e:{if(re=ie?Oc(ie):window,ce=re.nodeName&&re.nodeName.toLowerCase(),ce==="select"||ce==="input"&&re.type==="file")var Me=pI;else if(gI(re))if(CI)Me=Gv;else{Me=Pv;var tt=kv}else ce=re.nodeName,!ce||ce.toLowerCase()!=="input"||re.type!=="checkbox"&&re.type!=="radio"?ie&&Bf(ie.elementType)&&(Me=pI):Me=wv;if(Me&&(Me=Me(n,ie))){NI(Se,Me,s,me);break e}tt&&tt(n,re,ie),n==="focusout"&&ie&&re.type==="number"&&ie.memoizedProps.value!=null&&Gf(re,"number",re.value)}switch(tt=ie?Oc(ie):window,n){case"focusin":(gI(tt)||tt.contentEditable==="true")&&(er=tt,eA=ie,xc=null);break;case"focusout":xc=eA=er=null;break;case"mousedown":tA=!0;break;case"contextmenu":case"mouseup":case"dragend":tA=!1,HI(Se,s,me);break;case"selectionchange":if(Fv)break;case"keydown":case"keyup":HI(Se,s,me)}var xe;if(Zf)e:{switch(n){case"compositionstart":var Fe="onCompositionStart";break e;case"compositionend":Fe="onCompositionEnd";break e;case"compositionupdate":Fe="onCompositionUpdate";break e}Fe=void 0}else Js?II(n,s)&&(Fe="onCompositionEnd"):n==="keydown"&&s.keyCode===229&&(Fe="onCompositionStart");Fe&&(RI&&s.locale!=="ko"&&(Js||Fe!=="onCompositionStart"?Fe==="onCompositionEnd"&&Js&&(xe=hI()):(Yo=me,Kf="value"in Yo?Yo.value:Yo.textContent,Js=!0)),tt=fh(ie,Fe),0<tt.length&&(Fe=new AI(Fe,n,null,s,me),Se.push({event:Fe,listeners:tt}),xe?Fe.data=xe:(xe=_I(s),xe!==null&&(Fe.data=xe)))),(xe=Mv?Lv(n,s):Hv(n,s))&&(Fe=fh(ie,"onBeforeInput"),0<Fe.length&&(tt=new AI("onBeforeInput","beforeinput",null,s,me),Se.push({event:tt,listeners:Fe}),tt.data=xe)),NM(Se,n,ie,s,me)}aN(Se,o)})}function cu(n,o,s){return{instance:n,listener:o,currentTarget:s}}function fh(n,o){for(var s=o+"Capture",u=[];n!==null;){var f=n,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=bc(n,s),f!=null&&u.unshift(cu(n,f,m)),f=bc(n,o),f!=null&&u.push(cu(n,f,m))),n.tag===3)return u;n=n.return}return[]}function pr(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function oN(n,o,s,u,f){for(var m=o._reactName,p=[];s!==null&&s!==u;){var v=s,j=v.alternate,ie=v.stateNode;if(v=v.tag,j!==null&&j===u)break;v!==5&&v!==26&&v!==27||ie===null||(j=ie,f?(ie=bc(s,m),ie!=null&&p.unshift(cu(s,ie,j))):f||(ie=bc(s,m),ie!=null&&p.push(cu(s,ie,j)))),s=s.return}p.length!==0&&n.push({event:o,listeners:p})}var bM=/\r\n?/g,DM=/\u0000|\uFFFD/g;function lN(n){return(typeof n=="string"?n:""+n).replace(bM,`
`).replace(DM,"")}function sN(n,o){return o=lN(o),lN(n)===o}function Ah(){}function pt(n,o,s,u,f,m){switch(s){case"children":typeof u=="string"?o==="body"||o==="textarea"&&u===""||Zs(n,u):(typeof u=="number"||typeof u=="bigint")&&o!=="body"&&Zs(n,""+u);break;case"className":Id(n,"class",u);break;case"tabIndex":Id(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Id(n,s,u);break;case"style":cI(n,u,m);break;case"data":if(o!=="object"){Id(n,"data",u);break}case"src":case"href":if(u===""&&(o!=="a"||s!=="href")){n.removeAttribute(s);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(s);break}u=Nd(""+u),n.setAttribute(s,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(s==="formAction"?(o!=="input"&&pt(n,o,"name",f.name,f,null),pt(n,o,"formEncType",f.formEncType,f,null),pt(n,o,"formMethod",f.formMethod,f,null),pt(n,o,"formTarget",f.formTarget,f,null)):(pt(n,o,"encType",f.encType,f,null),pt(n,o,"method",f.method,f,null),pt(n,o,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(s);break}u=Nd(""+u),n.setAttribute(s,u);break;case"onClick":u!=null&&(n.onclick=Ah);break;case"onScroll":u!=null&&ot("scroll",n);break;case"onScrollEnd":u!=null&&ot("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(s=u.__html,s!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=s}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}s=Nd(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(s,""+u):n.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(s,""):n.removeAttribute(s);break;case"capture":case"download":u===!0?n.setAttribute(s,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(s,u):n.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(s,u):n.removeAttribute(s);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(s):n.setAttribute(s,u);break;case"popover":ot("beforetoggle",n),ot("toggle",n),Sd(n,"popover",u);break;case"xlinkActuate":ro(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":ro(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":ro(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":ro(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":ro(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":ro(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":ro(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":ro(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":ro(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Sd(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=iv.get(s)||s,Sd(n,s,u))}}function pm(n,o,s,u,f,m){switch(s){case"style":cI(n,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(s=u.__html,s!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=s}}break;case"children":typeof u=="string"?Zs(n,u):(typeof u=="number"||typeof u=="bigint")&&Zs(n,""+u);break;case"onScroll":u!=null&&ot("scroll",n);break;case"onScrollEnd":u!=null&&ot("scrollend",n);break;case"onClick":u!=null&&(n.onclick=Ah);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!$S.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(f=s.endsWith("Capture"),o=s.slice(2,f?s.length-7:void 0),m=n[Da]||null,m=m!=null?m[s]:null,typeof m=="function"&&n.removeEventListener(o,m,f),typeof u=="function")){typeof m!="function"&&m!==null&&(s in n?n[s]=null:n.hasAttribute(s)&&n.removeAttribute(s)),n.addEventListener(o,u,f);break e}s in n?n[s]=u:u===!0?n.setAttribute(s,""):Sd(n,s,u)}}}function Xn(n,o,s){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ot("error",n),ot("load",n);var u=!1,f=!1,m;for(m in s)if(s.hasOwnProperty(m)){var p=s[m];if(p!=null)switch(m){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:pt(n,o,m,p,s,null)}}f&&pt(n,o,"srcSet",s.srcSet,s,null),u&&pt(n,o,"src",s.src,s,null);return;case"input":ot("invalid",n);var v=m=p=f=null,j=null,ie=null;for(u in s)if(s.hasOwnProperty(u)){var me=s[u];if(me!=null)switch(u){case"name":f=me;break;case"type":p=me;break;case"checked":j=me;break;case"defaultChecked":ie=me;break;case"value":m=me;break;case"defaultValue":v=me;break;case"children":case"dangerouslySetInnerHTML":if(me!=null)throw Error(i(137,o));break;default:pt(n,o,u,me,s,null)}}oI(n,m,v,j,ie,p,f,!1),_d(n);return;case"select":ot("invalid",n),u=p=m=null;for(f in s)if(s.hasOwnProperty(f)&&(v=s[f],v!=null))switch(f){case"value":m=v;break;case"defaultValue":p=v;break;case"multiple":u=v;default:pt(n,o,f,v,s,null)}o=m,s=p,n.multiple=!!u,o!=null?qs(n,!!u,o,!1):s!=null&&qs(n,!!u,s,!0);return;case"textarea":ot("invalid",n),m=f=u=null;for(p in s)if(s.hasOwnProperty(p)&&(v=s[p],v!=null))switch(p){case"value":u=v;break;case"defaultValue":f=v;break;case"children":m=v;break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(i(91));break;default:pt(n,o,p,v,s,null)}sI(n,u,f,m),_d(n);return;case"option":for(j in s)if(s.hasOwnProperty(j)&&(u=s[j],u!=null))switch(j){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:pt(n,o,j,u,s,null)}return;case"dialog":ot("beforetoggle",n),ot("toggle",n),ot("cancel",n),ot("close",n);break;case"iframe":case"object":ot("load",n);break;case"video":case"audio":for(u=0;u<ru.length;u++)ot(ru[u],n);break;case"image":ot("error",n),ot("load",n);break;case"details":ot("toggle",n);break;case"embed":case"source":case"link":ot("error",n),ot("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ie in s)if(s.hasOwnProperty(ie)&&(u=s[ie],u!=null))switch(ie){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:pt(n,o,ie,u,s,null)}return;default:if(Bf(o)){for(me in s)s.hasOwnProperty(me)&&(u=s[me],u!==void 0&&pm(n,o,me,u,s,void 0));return}}for(v in s)s.hasOwnProperty(v)&&(u=s[v],u!=null&&pt(n,o,v,u,s,null))}function yM(n,o,s,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,p=null,v=null,j=null,ie=null,me=null;for(ce in s){var Se=s[ce];if(s.hasOwnProperty(ce)&&Se!=null)switch(ce){case"checked":break;case"value":break;case"defaultValue":j=Se;default:u.hasOwnProperty(ce)||pt(n,o,ce,null,u,Se)}}for(var re in u){var ce=u[re];if(Se=s[re],u.hasOwnProperty(re)&&(ce!=null||Se!=null))switch(re){case"type":m=ce;break;case"name":f=ce;break;case"checked":ie=ce;break;case"defaultChecked":me=ce;break;case"value":p=ce;break;case"defaultValue":v=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(i(137,o));break;default:ce!==Se&&pt(n,o,re,ce,u,Se)}}wf(n,p,v,j,ie,me,m,f);return;case"select":ce=p=v=re=null;for(m in s)if(j=s[m],s.hasOwnProperty(m)&&j!=null)switch(m){case"value":break;case"multiple":ce=j;default:u.hasOwnProperty(m)||pt(n,o,m,null,u,j)}for(f in u)if(m=u[f],j=s[f],u.hasOwnProperty(f)&&(m!=null||j!=null))switch(f){case"value":re=m;break;case"defaultValue":v=m;break;case"multiple":p=m;default:m!==j&&pt(n,o,f,m,u,j)}o=v,s=p,u=ce,re!=null?qs(n,!!s,re,!1):!!u!=!!s&&(o!=null?qs(n,!!s,o,!0):qs(n,!!s,s?[]:"",!1));return;case"textarea":ce=re=null;for(v in s)if(f=s[v],s.hasOwnProperty(v)&&f!=null&&!u.hasOwnProperty(v))switch(v){case"value":break;case"children":break;default:pt(n,o,v,null,u,f)}for(p in u)if(f=u[p],m=s[p],u.hasOwnProperty(p)&&(f!=null||m!=null))switch(p){case"value":re=f;break;case"defaultValue":ce=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==m&&pt(n,o,p,f,u,m)}lI(n,re,ce);return;case"option":for(var je in s)if(re=s[je],s.hasOwnProperty(je)&&re!=null&&!u.hasOwnProperty(je))switch(je){case"selected":n.selected=!1;break;default:pt(n,o,je,null,u,re)}for(j in u)if(re=u[j],ce=s[j],u.hasOwnProperty(j)&&re!==ce&&(re!=null||ce!=null))switch(j){case"selected":n.selected=re&&typeof re!="function"&&typeof re!="symbol";break;default:pt(n,o,j,re,u,ce)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Be in s)re=s[Be],s.hasOwnProperty(Be)&&re!=null&&!u.hasOwnProperty(Be)&&pt(n,o,Be,null,u,re);for(ie in u)if(re=u[ie],ce=s[ie],u.hasOwnProperty(ie)&&re!==ce&&(re!=null||ce!=null))switch(ie){case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(i(137,o));break;default:pt(n,o,ie,re,u,ce)}return;default:if(Bf(o)){for(var Ct in s)re=s[Ct],s.hasOwnProperty(Ct)&&re!==void 0&&!u.hasOwnProperty(Ct)&&pm(n,o,Ct,void 0,u,re);for(me in u)re=u[me],ce=s[me],!u.hasOwnProperty(me)||re===ce||re===void 0&&ce===void 0||pm(n,o,me,re,u,ce);return}}for(var $ in s)re=s[$],s.hasOwnProperty($)&&re!=null&&!u.hasOwnProperty($)&&pt(n,o,$,null,u,re);for(Se in u)re=u[Se],ce=s[Se],!u.hasOwnProperty(Se)||re===ce||re==null&&ce==null||pt(n,o,Se,re,u,ce)}var Cm=null,Om=null;function mh(n){return n.nodeType===9?n:n.ownerDocument}function rN(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function cN(n,o){if(n===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&o==="foreignObject"?0:n}function bm(n,o){return n==="textarea"||n==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Dm=null;function vM(){var n=window.event;return n&&n.type==="popstate"?n===Dm?!1:(Dm=n,!0):(Dm=null,!1)}var uN=typeof setTimeout=="function"?setTimeout:void 0,MM=typeof clearTimeout=="function"?clearTimeout:void 0,dN=typeof Promise=="function"?Promise:void 0,LM=typeof queueMicrotask=="function"?queueMicrotask:typeof dN<"u"?function(n){return dN.resolve(null).then(n).catch(HM)}:uN;function HM(n){setTimeout(function(){throw n})}function ll(n){return n==="head"}function hN(n,o){var s=o,u=0,f=0;do{var m=s.nextSibling;if(n.removeChild(s),m&&m.nodeType===8)if(s=m.data,s==="/$"){if(0<u&&8>u){s=u;var p=n.ownerDocument;if(s&1&&uu(p.documentElement),s&2&&uu(p.body),s&4)for(s=p.head,uu(s),p=s.firstChild;p;){var v=p.nextSibling,j=p.nodeName;p[Cc]||j==="SCRIPT"||j==="STYLE"||j==="LINK"&&p.rel.toLowerCase()==="stylesheet"||s.removeChild(p),p=v}}if(f===0){n.removeChild(m),Tu(o);return}f--}else s==="$"||s==="$?"||s==="$!"?f++:u=s.charCodeAt(0)-48;else u=0;s=m}while(s);Tu(o)}function ym(n){var o=n.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var s=o;switch(o=o.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":ym(s),Uf(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}n.removeChild(s)}}function UM(n,o,s,u){for(;n.nodeType===1;){var f=s;if(n.nodeName.toLowerCase()!==o.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[Cc])switch(o){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(m=n.getAttribute("rel"),m==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(m!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(m=n.getAttribute("src"),(m!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(o==="input"&&n.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===m)return n}else return n;if(n=Ci(n.nextSibling),n===null)break}return null}function xM(n,o,s){if(o==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=Ci(n.nextSibling),n===null))return null;return n}function vm(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function kM(n,o){var s=n.ownerDocument;if(n.data!=="$?"||s.readyState==="complete")o();else{var u=function(){o(),s.removeEventListener("DOMContentLoaded",u)};s.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function Ci(n){for(;n!=null;n=n.nextSibling){var o=n.nodeType;if(o===1||o===3)break;if(o===8){if(o=n.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return n}var Mm=null;function EN(n){n=n.previousSibling;for(var o=0;n;){if(n.nodeType===8){var s=n.data;if(s==="$"||s==="$!"||s==="$?"){if(o===0)return n;o--}else s==="/$"&&o++}n=n.previousSibling}return null}function fN(n,o,s){switch(o=mh(s),n){case"html":if(n=o.documentElement,!n)throw Error(i(452));return n;case"head":if(n=o.head,!n)throw Error(i(453));return n;case"body":if(n=o.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function uu(n){for(var o=n.attributes;o.length;)n.removeAttributeNode(o[0]);Uf(n)}var ui=new Map,AN=new Set;function Rh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var No=w.d;w.d={f:PM,r:wM,D:GM,C:BM,L:FM,m:zM,X:YM,S:jM,M:KM};function PM(){var n=No.f(),o=rh();return n||o}function wM(n){var o=Ks(n);o!==null&&o.tag===5&&o.type==="form"?x_(o):No.r(n)}var Cr=typeof document>"u"?null:document;function mN(n,o,s){var u=Cr;if(u&&typeof o=="string"&&o){var f=ai(o);f='link[rel="'+n+'"][href="'+f+'"]',typeof s=="string"&&(f+='[crossorigin="'+s+'"]'),AN.has(f)||(AN.add(f),n={rel:n,crossOrigin:s,href:o},u.querySelector(f)===null&&(o=u.createElement("link"),Xn(o,"link",n),kn(o),u.head.appendChild(o)))}}function GM(n){No.D(n),mN("dns-prefetch",n,null)}function BM(n,o){No.C(n,o),mN("preconnect",n,o)}function FM(n,o,s){No.L(n,o,s);var u=Cr;if(u&&n&&o){var f='link[rel="preload"][as="'+ai(o)+'"]';o==="image"&&s&&s.imageSrcSet?(f+='[imagesrcset="'+ai(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(f+='[imagesizes="'+ai(s.imageSizes)+'"]')):f+='[href="'+ai(n)+'"]';var m=f;switch(o){case"style":m=Or(n);break;case"script":m=br(n)}ui.has(m)||(n=R({rel:"preload",href:o==="image"&&s&&s.imageSrcSet?void 0:n,as:o},s),ui.set(m,n),u.querySelector(f)!==null||o==="style"&&u.querySelector(du(m))||o==="script"&&u.querySelector(hu(m))||(o=u.createElement("link"),Xn(o,"link",n),kn(o),u.head.appendChild(o)))}}function zM(n,o){No.m(n,o);var s=Cr;if(s&&n){var u=o&&typeof o.as=="string"?o.as:"script",f='link[rel="modulepreload"][as="'+ai(u)+'"][href="'+ai(n)+'"]',m=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=br(n)}if(!ui.has(m)&&(n=R({rel:"modulepreload",href:n},o),ui.set(m,n),s.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(hu(m)))return}u=s.createElement("link"),Xn(u,"link",n),kn(u),s.head.appendChild(u)}}}function jM(n,o,s){No.S(n,o,s);var u=Cr;if(u&&n){var f=Vs(u).hoistableStyles,m=Or(n);o=o||"default";var p=f.get(m);if(!p){var v={loading:0,preload:null};if(p=u.querySelector(du(m)))v.loading=5;else{n=R({rel:"stylesheet",href:n,"data-precedence":o},s),(s=ui.get(m))&&Lm(n,s);var j=p=u.createElement("link");kn(j),Xn(j,"link",n),j._p=new Promise(function(ie,me){j.onload=ie,j.onerror=me}),j.addEventListener("load",function(){v.loading|=1}),j.addEventListener("error",function(){v.loading|=2}),v.loading|=4,Th(p,o,u)}p={type:"stylesheet",instance:p,count:1,state:v},f.set(m,p)}}}function YM(n,o){No.X(n,o);var s=Cr;if(s&&n){var u=Vs(s).hoistableScripts,f=br(n),m=u.get(f);m||(m=s.querySelector(hu(f)),m||(n=R({src:n,async:!0},o),(o=ui.get(f))&&Hm(n,o),m=s.createElement("script"),kn(m),Xn(m,"link",n),s.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function KM(n,o){No.M(n,o);var s=Cr;if(s&&n){var u=Vs(s).hoistableScripts,f=br(n),m=u.get(f);m||(m=s.querySelector(hu(f)),m||(n=R({src:n,async:!0,type:"module"},o),(o=ui.get(f))&&Hm(n,o),m=s.createElement("script"),kn(m),Xn(m,"link",n),s.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function RN(n,o,s,u){var f=(f=se.current)?Rh(f):null;if(!f)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(o=Or(s.href),s=Vs(f).hoistableStyles,u=s.get(o),u||(u={type:"style",instance:null,count:0,state:null},s.set(o,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){n=Or(s.href);var m=Vs(f).hoistableStyles,p=m.get(n);if(p||(f=f.ownerDocument||f,p={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(n,p),(m=f.querySelector(du(n)))&&!m._p&&(p.instance=m,p.state.loading=5),ui.has(n)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},ui.set(n,s),m||VM(f,n,s,p.state))),o&&u===null)throw Error(i(528,""));return p}if(o&&u!==null)throw Error(i(529,""));return null;case"script":return o=s.async,s=s.src,typeof s=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=br(s),s=Vs(f).hoistableScripts,u=s.get(o),u||(u={type:"script",instance:null,count:0,state:null},s.set(o,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function Or(n){return'href="'+ai(n)+'"'}function du(n){return'link[rel="stylesheet"]['+n+"]"}function TN(n){return R({},n,{"data-precedence":n.precedence,precedence:null})}function VM(n,o,s,u){n.querySelector('link[rel="preload"][as="style"]['+o+"]")?u.loading=1:(o=n.createElement("link"),u.preload=o,o.addEventListener("load",function(){return u.loading|=1}),o.addEventListener("error",function(){return u.loading|=2}),Xn(o,"link",s),kn(o),n.head.appendChild(o))}function br(n){return'[src="'+ai(n)+'"]'}function hu(n){return"script[async]"+n}function SN(n,o,s){if(o.count++,o.instance===null)switch(o.type){case"style":var u=n.querySelector('style[data-href~="'+ai(s.href)+'"]');if(u)return o.instance=u,kn(u),u;var f=R({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),kn(u),Xn(u,"style",f),Th(u,s.precedence,n),o.instance=u;case"stylesheet":f=Or(s.href);var m=n.querySelector(du(f));if(m)return o.state.loading|=4,o.instance=m,kn(m),m;u=TN(s),(f=ui.get(f))&&Lm(u,f),m=(n.ownerDocument||n).createElement("link"),kn(m);var p=m;return p._p=new Promise(function(v,j){p.onload=v,p.onerror=j}),Xn(m,"link",u),o.state.loading|=4,Th(m,s.precedence,n),o.instance=m;case"script":return m=br(s.src),(f=n.querySelector(hu(m)))?(o.instance=f,kn(f),f):(u=s,(f=ui.get(m))&&(u=R({},s),Hm(u,f)),n=n.ownerDocument||n,f=n.createElement("script"),kn(f),Xn(f,"link",u),n.head.appendChild(f),o.instance=f);case"void":return null;default:throw Error(i(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(u=o.instance,o.state.loading|=4,Th(u,s.precedence,n));return o.instance}function Th(n,o,s){for(var u=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,m=f,p=0;p<u.length;p++){var v=u[p];if(v.dataset.precedence===o)m=v;else if(m!==f)break}m?m.parentNode.insertBefore(n,m.nextSibling):(o=s.nodeType===9?s.head:s,o.insertBefore(n,o.firstChild))}function Lm(n,o){n.crossOrigin==null&&(n.crossOrigin=o.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=o.referrerPolicy),n.title==null&&(n.title=o.title)}function Hm(n,o){n.crossOrigin==null&&(n.crossOrigin=o.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=o.referrerPolicy),n.integrity==null&&(n.integrity=o.integrity)}var Sh=null;function IN(n,o,s){if(Sh===null){var u=new Map,f=Sh=new Map;f.set(s,u)}else f=Sh,u=f.get(s),u||(u=new Map,f.set(s,u));if(u.has(n))return u;for(u.set(n,null),s=s.getElementsByTagName(n),f=0;f<s.length;f++){var m=s[f];if(!(m[Cc]||m[na]||n==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var p=m.getAttribute(o)||"";p=n+p;var v=u.get(p);v?v.push(m):u.set(p,[m])}}return u}function _N(n,o,s){n=n.ownerDocument||n,n.head.insertBefore(s,o==="title"?n.querySelector("head > title"):null)}function WM(n,o,s){if(s===1||o.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return n=o.disabled,typeof o.precedence=="string"&&n==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function gN(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var Eu=null;function XM(){}function qM(n,o,s){if(Eu===null)throw Error(i(475));var u=Eu;if(o.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var f=Or(s.href),m=n.querySelector(du(f));if(m){n=m._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(u.count++,u=Ih.bind(u),n.then(u,u)),o.state.loading|=4,o.instance=m,kn(m);return}m=n.ownerDocument||n,s=TN(s),(f=ui.get(f))&&Lm(s,f),m=m.createElement("link"),kn(m);var p=m;p._p=new Promise(function(v,j){p.onload=v,p.onerror=j}),Xn(m,"link",s),o.instance=m}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(o,n),(n=o.state.preload)&&(o.state.loading&3)===0&&(u.count++,o=Ih.bind(u),n.addEventListener("load",o),n.addEventListener("error",o))}}function ZM(){if(Eu===null)throw Error(i(475));var n=Eu;return n.stylesheets&&n.count===0&&Um(n,n.stylesheets),0<n.count?function(o){var s=setTimeout(function(){if(n.stylesheets&&Um(n,n.stylesheets),n.unsuspend){var u=n.unsuspend;n.unsuspend=null,u()}},6e4);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(s)}}:null}function Ih(){if(this.count--,this.count===0){if(this.stylesheets)Um(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var _h=null;function Um(n,o){n.stylesheets=null,n.unsuspend!==null&&(n.count++,_h=new Map,o.forEach(QM,n),_h=null,Ih.call(n))}function QM(n,o){if(!(o.state.loading&4)){var s=_h.get(n);if(s)var u=s.get(null);else{s=new Map,_h.set(n,s);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var p=f[m];(p.nodeName==="LINK"||p.getAttribute("media")!=="not all")&&(s.set(p.dataset.precedence,p),u=p)}u&&s.set(null,u)}f=o.instance,p=f.getAttribute("data-precedence"),m=s.get(p)||u,m===u&&s.set(null,f),s.set(p,f),this.count++,u=Ih.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),m?m.parentNode.insertBefore(f,m.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),o.state.loading|=4}}var fu={$$typeof:L,Provider:null,Consumer:null,_currentValue:K,_currentValue2:K,_threadCount:0};function $M(n,o,s,u,f,m,p,v){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=vf(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vf(0),this.hiddenUpdates=vf(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=p,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=v,this.incompleteTransitions=new Map}function NN(n,o,s,u,f,m,p,v,j,ie,me,Se){return n=new $M(n,o,s,p,v,j,ie,Se),o=1,m===!0&&(o|=24),m=za(3,null,null,o),n.current=m,m.stateNode=n,o=AA(),o.refCount++,n.pooledCache=o,o.refCount++,m.memoizedState={element:u,isDehydrated:s,cache:o},SA(m),n}function pN(n){return n?(n=ir,n):ir}function CN(n,o,s,u,f,m){f=pN(f),u.context===null?u.context=f:u.pendingContext=f,u=Wo(o),u.payload={element:s},m=m===void 0?null:m,m!==null&&(u.callback=m),s=Xo(n,u,o),s!==null&&(Wa(s,n,o),Yc(s,n,o))}function ON(n,o){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var s=n.retryLane;n.retryLane=s!==0&&s<o?s:o}}function xm(n,o){ON(n,o),(n=n.alternate)&&ON(n,o)}function bN(n){if(n.tag===13){var o=ar(n,67108864);o!==null&&Wa(o,n,67108864),xm(n,67108864)}}var gh=!0;function JM(n,o,s,u){var f=F.T;F.T=null;var m=w.p;try{w.p=2,km(n,o,s,u)}finally{w.p=m,F.T=f}}function eL(n,o,s,u){var f=F.T;F.T=null;var m=w.p;try{w.p=8,km(n,o,s,u)}finally{w.p=m,F.T=f}}function km(n,o,s,u){if(gh){var f=Pm(u);if(f===null)Nm(n,o,u,Nh,s),yN(n,u);else if(nL(f,n,o,s,u))u.stopPropagation();else if(yN(n,u),o&4&&-1<tL.indexOf(n)){for(;f!==null;){var m=Ks(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var p=Fl(m.pendingLanes);if(p!==0){var v=m;for(v.pendingLanes|=2,v.entangledLanes|=2;p;){var j=1<<31-Ba(p);v.entanglements[1]|=j,p&=~j}Wi(m),(Tt&6)===0&&(lh=ye()+500,su(0))}}break;case 13:v=ar(m,2),v!==null&&Wa(v,m,2),rh(),xm(m,2)}if(m=Pm(u),m===null&&Nm(n,o,u,Nh,s),m===f)break;f=m}f!==null&&u.stopPropagation()}else Nm(n,o,u,null,s)}}function Pm(n){return n=zf(n),wm(n)}var Nh=null;function wm(n){if(Nh=null,n=Ys(n),n!==null){var o=r(n);if(o===null)n=null;else{var s=o.tag;if(s===13){if(n=d(o),n!==null)return n;n=null}else if(s===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;n=null}else o!==n&&(n=null)}}return Nh=n,null}function DN(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(we()){case Ze:return 2;case mt:return 8;case $t:case Bl:return 32;case zs:return 268435456;default:return 32}default:return 32}}var Gm=!1,sl=null,rl=null,cl=null,Au=new Map,mu=new Map,ul=[],tL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function yN(n,o){switch(n){case"focusin":case"focusout":sl=null;break;case"dragenter":case"dragleave":rl=null;break;case"mouseover":case"mouseout":cl=null;break;case"pointerover":case"pointerout":Au.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":mu.delete(o.pointerId)}}function Ru(n,o,s,u,f,m){return n===null||n.nativeEvent!==m?(n={blockedOn:o,domEventName:s,eventSystemFlags:u,nativeEvent:m,targetContainers:[f]},o!==null&&(o=Ks(o),o!==null&&bN(o)),n):(n.eventSystemFlags|=u,o=n.targetContainers,f!==null&&o.indexOf(f)===-1&&o.push(f),n)}function nL(n,o,s,u,f){switch(o){case"focusin":return sl=Ru(sl,n,o,s,u,f),!0;case"dragenter":return rl=Ru(rl,n,o,s,u,f),!0;case"mouseover":return cl=Ru(cl,n,o,s,u,f),!0;case"pointerover":var m=f.pointerId;return Au.set(m,Ru(Au.get(m)||null,n,o,s,u,f)),!0;case"gotpointercapture":return m=f.pointerId,mu.set(m,Ru(mu.get(m)||null,n,o,s,u,f)),!0}return!1}function vN(n){var o=Ys(n.target);if(o!==null){var s=r(o);if(s!==null){if(o=s.tag,o===13){if(o=d(s),o!==null){n.blockedOn=o,qy(n.priority,function(){if(s.tag===13){var u=Va();u=Mf(u);var f=ar(s,u);f!==null&&Wa(f,s,u),xm(s,u)}});return}}else if(o===3&&s.stateNode.current.memoizedState.isDehydrated){n.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}n.blockedOn=null}function ph(n){if(n.blockedOn!==null)return!1;for(var o=n.targetContainers;0<o.length;){var s=Pm(n.nativeEvent);if(s===null){s=n.nativeEvent;var u=new s.constructor(s.type,s);Ff=u,s.target.dispatchEvent(u),Ff=null}else return o=Ks(s),o!==null&&bN(o),n.blockedOn=s,!1;o.shift()}return!0}function MN(n,o,s){ph(n)&&s.delete(o)}function aL(){Gm=!1,sl!==null&&ph(sl)&&(sl=null),rl!==null&&ph(rl)&&(rl=null),cl!==null&&ph(cl)&&(cl=null),Au.forEach(MN),mu.forEach(MN)}function Ch(n,o){n.blockedOn===o&&(n.blockedOn=null,Gm||(Gm=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,aL)))}var Oh=null;function LN(n){Oh!==n&&(Oh=n,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Oh===n&&(Oh=null);for(var o=0;o<n.length;o+=3){var s=n[o],u=n[o+1],f=n[o+2];if(typeof u!="function"){if(wm(u||s)===null)continue;break}var m=Ks(s);m!==null&&(n.splice(o,3),o-=3,wA(m,{pending:!0,data:f,method:s.method,action:u},u,f))}}))}function Tu(n){function o(j){return Ch(j,n)}sl!==null&&Ch(sl,n),rl!==null&&Ch(rl,n),cl!==null&&Ch(cl,n),Au.forEach(o),mu.forEach(o);for(var s=0;s<ul.length;s++){var u=ul[s];u.blockedOn===n&&(u.blockedOn=null)}for(;0<ul.length&&(s=ul[0],s.blockedOn===null);)vN(s),s.blockedOn===null&&ul.shift();if(s=(n.ownerDocument||n).$$reactFormReplay,s!=null)for(u=0;u<s.length;u+=3){var f=s[u],m=s[u+1],p=f[Da]||null;if(typeof m=="function")p||LN(s);else if(p){var v=null;if(m&&m.hasAttribute("formAction")){if(f=m,p=m[Da]||null)v=p.formAction;else if(wm(f)!==null)continue}else v=p.action;typeof v=="function"?s[u+1]=v:(s.splice(u,3),u-=3),LN(s)}}}function Bm(n){this._internalRoot=n}bh.prototype.render=Bm.prototype.render=function(n){var o=this._internalRoot;if(o===null)throw Error(i(409));var s=o.current,u=Va();CN(s,u,n,o,null,null)},bh.prototype.unmount=Bm.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var o=n.containerInfo;CN(n.current,2,null,n,null,null),rh(),o[js]=null}};function bh(n){this._internalRoot=n}bh.prototype.unstable_scheduleHydration=function(n){if(n){var o=qS();n={blockedOn:null,target:n,priority:o};for(var s=0;s<ul.length&&o!==0&&o<ul[s].priority;s++);ul.splice(s,0,n),s===0&&vN(n)}};var HN=t.version;if(HN!=="19.1.0")throw Error(i(527,HN,"19.1.0"));w.findDOMNode=function(n){var o=n._reactInternals;if(o===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=h(o),n=n!==null?A(n):null,n=n===null?null:n.stateNode,n};var iL={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Dh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dh.isDisabled&&Dh.supportsFiber)try{gc=Dh.inject(iL),Ga=Dh}catch{}}return Iu.createRoot=function(n,o){if(!l(n))throw Error(i(299));var s=!1,u="",f=q_,m=Z_,p=Q_,v=null;return o!=null&&(o.unstable_strictMode===!0&&(s=!0),o.identifierPrefix!==void 0&&(u=o.identifierPrefix),o.onUncaughtError!==void 0&&(f=o.onUncaughtError),o.onCaughtError!==void 0&&(m=o.onCaughtError),o.onRecoverableError!==void 0&&(p=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(v=o.unstable_transitionCallbacks)),o=NN(n,1,!1,null,null,s,u,f,m,p,v,null),n[js]=o.current,gm(n),new Bm(o)},Iu.hydrateRoot=function(n,o,s){if(!l(n))throw Error(i(299));var u=!1,f="",m=q_,p=Z_,v=Q_,j=null,ie=null;return s!=null&&(s.unstable_strictMode===!0&&(u=!0),s.identifierPrefix!==void 0&&(f=s.identifierPrefix),s.onUncaughtError!==void 0&&(m=s.onUncaughtError),s.onCaughtError!==void 0&&(p=s.onCaughtError),s.onRecoverableError!==void 0&&(v=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(j=s.unstable_transitionCallbacks),s.formState!==void 0&&(ie=s.formState)),o=NN(n,1,!0,o,s??null,u,f,m,p,v,j,ie),o.context=pN(null),s=o.current,u=Va(),u=Mf(u),f=Wo(u),f.callback=null,Xo(s,f,u),s=u,o.current.lanes=s,pc(o,s),Wi(o),n[js]=o.current,gm(n),new bh(o)},Iu.version="19.1.0",Iu}var YN;function RL(){if(YN)return jm.exports;YN=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),jm.exports=mL(),jm.exports}var TL=RL(),O=RT();const ra=mT(O),jE=rL({__proto__:null,default:ra},[O]);var KC={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Br=ra.createContext&&ra.createContext(KC),SL=["attr","size","title"];function IL(e,t){if(e==null)return{};var a=_L(e,t),i,l;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(l=0;l<r.length;l++)i=r[l],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(a[i]=e[i])}return a}function _L(e,t){if(e==null)return{};var a={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;a[i]=e[i]}return a}function lE(){return lE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},lE.apply(this,arguments)}function KN(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),a.push.apply(a,i)}return a}function sE(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?KN(Object(a),!0).forEach(function(i){gL(e,i,a[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):KN(Object(a)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(a,i))})}return e}function gL(e,t,a){return t=NL(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function NL(e){var t=pL(e,"string");return typeof t=="symbol"?t:t+""}function pL(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var i=a.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function VC(e){return e&&e.map((t,a)=>ra.createElement(t.tag,sE({key:a},t.attr),VC(t.child)))}function ki(e){return t=>ra.createElement(CL,lE({attr:sE({},e.attr)},t),VC(e.child))}function CL(e){var t=a=>{var{attr:i,size:l,title:r}=e,d=IL(e,SL),E=l||a.size||"1em",h;return a.className&&(h=a.className),e.className&&(h=(h?h+" ":"")+e.className),ra.createElement("svg",lE({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},a.attr,i,d,{className:h,style:sE(sE({color:e.color||a.color},a.style),e.style),height:E,width:E,xmlns:"http://www.w3.org/2000/svg"}),r&&ra.createElement("title",null,r),e.children)};return Br!==void 0?ra.createElement(Br.Consumer,null,a=>t(a)):t(KC)}function OL(e){return ki({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M407.8 294.7c-3.3-.4-6.7-.8-10-1.3c3.4 .4 6.7 .9 10 1.3zM288 227.1C261.9 176.4 190.9 81.9 124.9 35.3C61.6-9.4 37.5-1.7 21.6 5.5C3.3 13.8 0 41.9 0 58.4S9.1 194 15 213.9c19.5 65.7 89.1 87.9 153.2 80.7c3.3-.5 6.6-.9 10-1.4c-3.3 .5-6.6 1-10 1.4C74.3 308.6-9.1 342.8 100.3 464.5C220.6 589.1 265.1 437.8 288 361.1c22.9 76.7 49.2 222.5 185.6 103.4c102.4-103.4 28.1-156-65.8-169.9c-3.3-.4-6.7-.8-10-1.3c3.4 .4 6.7 .9 10 1.3c64.1 7.1 133.6-15.1 153.2-80.7C566.9 194 576 75 576 58.4s-3.3-44.7-21.6-52.9c-15.8-7.1-40-14.9-103.2 29.8C385.1 81.9 314.1 176.4 288 227.1z"},child:[]}]})(e)}function bL(e){return ki({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"},child:[]}]})(e)}function DL(e){return ki({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M192 32c0 17.7 14.3 32 32 32c123.7 0 224 100.3 224 224c0 17.7 14.3 32 32 32s32-14.3 32-32C512 128.9 383.1 0 224 0c-17.7 0-32 14.3-32 32zm0 96c0 17.7 14.3 32 32 32c70.7 0 128 57.3 128 128c0 17.7 14.3 32 32 32s32-14.3 32-32c0-106-86-192-192-192c-17.7 0-32 14.3-32 32zM96 144c0-26.5-21.5-48-48-48S0 117.5 0 144V368c0 79.5 64.5 144 144 144s144-64.5 144-144s-64.5-144-144-144H128v96h16c26.5 0 48 21.5 48 48s-21.5 48-48 48s-48-21.5-48-48V144z"},child:[]}]})(e)}function yL(e){return ki({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"},child:[]}]})(e)}function vL(e){return ki({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M352 144c0-44.2 35.8-80 80-80s80 35.8 80 80v48c0 17.7 14.3 32 32 32s32-14.3 32-32V144C576 64.5 511.5 0 432 0S288 64.5 288 144v48H64c-35.3 0-64 28.7-64 64V448c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V256c0-35.3-28.7-64-64-64H352V144z"},child:[]}]})(e)}function ML(e){return ki({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M144 144v48H304V144c0-44.2-35.8-80-80-80s-80 35.8-80 80zM80 192V144C80 64.5 144.5 0 224 0s144 64.5 144 144v48h16c35.3 0 64 28.7 64 64V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V256c0-35.3 28.7-64 64-64H80z"},child:[]}]})(e)}function WC(e){return ki({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"},child:[]}]})(e)}const LL="7.3",HL=16;var Mn=(e=>(e.Exact="Exact",e.SkillSequence="SkillSequence",e.Edited="Edited",e))(Mn||{}),Li=(e=>(e.Record="Record",e.SkillSequencePresets="SkillSequencePresets",e.MarkerTrackIndividual="MarkerTrackIndividual",e.MarkerTracksCombined="MarkerTracksCombined",e))(Li||{}),hi=(e=>(e[e.RealTime=0]="RealTime",e[e.RealTimeAutoPause=1]="RealTimeAutoPause",e[e.Manual=2]="Manual",e))(hi||{}),vo=(e=>(e[e.Initial=0]="Initial",e[e.FpsTax=1]="FpsTax",e[e.AllaganGcdFormula=2]="AllaganGcdFormula",e))(vo||{});const TT={version:2};let XC=!1;function UL(){return XC}const YE="DT",vu=window.location.hostname.startsWith("beta"),xL=localStorage.length===0;function bt(e){const t=localStorage.getItem(YE+"."+e);return localStorage.getItem(e)!==null&&(XC=!0),t}function It(e,t){localStorage.setItem(YE+"."+e,t)}function MR(e){localStorage.removeItem(YE+"."+e)}function qC(){Object.keys(localStorage).forEach(e=>{e.startsWith(YE+".")&&localStorage.removeItem(e)})}function ZC(e,t){const a=e in Xm?Xm[e]:Xm.NEVER;return t>=a.level}const ae=()=>e=>e,kL=ae()({BENEFIC:{id:3594,name:"Benefic",label:{zh:"",ja:""}},LIGHTSPEED:{id:3606,name:"Lightspeed",label:{zh:"",ja:""}},HELIOS:{id:3600,name:"Helios",label:{zh:"",ja:""}},ASCEND:{id:3603,name:"Ascend",label:{zh:"",ja:""}},ESSENTIAL_DIGNITY:{id:3614,name:"Essential Dignity",label:{zh:"",ja:""}},BENEFIC_II:{id:3610,name:"Benefic II",label:{zh:"",ja:""}},ASTRAL_DRAW:{id:37017,name:"Astral Draw",label:{zh:"",ja:""}},UMBRAL_DRAW:{id:37018,name:"Umbral Draw",label:{zh:"",ja:""}},PLAY_I:{id:37019,name:"Play I",label:{zh:"I",ja:"I"}},PLAY_II:{id:37020,name:"Play II",label:{zh:"II",ja:"II"}},PLAY_III:{id:37021,name:"Play III",label:{zh:"III",ja:"III"}},ASPECTED_BENEFIC:{id:3595,name:"Aspected Benefic",label:{zh:"",ja:""}},ASPECTED_HELIOS:{id:3601,name:"Aspected Helios",label:{zh:"",ja:""}},GRAVITY:{id:3615,name:"Gravity",label:{zh:"",ja:""}},COMBUST_II:{id:3608,name:"Combust II",label:{zh:"",ja:""}},SYNASTRY:{id:3612,name:"Synastry",label:{zh:"",ja:""}},DIVINATION:{id:16552,name:"Divination",label:{zh:"",ja:""}},COLLECTIVE_UNCONSCIOUS:{id:3613,name:"Collective Unconscious",label:{zh:"",ja:""}},CELESTIAL_OPPOSITION:{id:16553,name:"Celestial Opposition",label:{zh:"",ja:""}},EARTHLY_STAR:{id:7439,name:"Earthly Star",label:{zh:"",ja:""}},STELLAR_DETONATION:{id:8324,name:"Stellar Detonation",label:{zh:"",ja:""}},MALEFIC_III:{id:7442,name:"Malefic III",label:{zh:"",ja:""}},MINOR_ARCANA:{id:37022,name:"Minor Arcana",label:{zh:"",ja:""}},COMBUST_III:{id:16554,name:"Combust III",label:{zh:"",ja:""}},MALEFIC_IV:{id:16555,name:"Malefic IV",label:{zh:"",ja:""}},CELESTIAL_INTERSECTION:{id:16556,name:"Celestial Intersection",label:{zh:"",ja:""}},HOROSCOPE:{id:16557,name:"Horoscope",label:{zh:"",ja:""}},HOROSCOPE_RECAST:{id:16558,name:"Horoscope (Recast)",label:{zh:"",ja:""}},NEUTRAL_SECT:{id:16559,name:"Neutral Sect",label:{zh:"",ja:""}},FALL_MALEFIC:{id:25871,name:"Fall Malefic",label:{zh:"",ja:""}},GRAVITY_II:{id:25872,name:"Gravity II",label:{zh:"",ja:""}},EXALTATION:{id:25873,name:"Exaltation",label:{zh:"",ja:""}},MACROCOSMOS:{id:25874,name:"Macrocosmos",label:{zh:"",ja:""}},MICROCOSMOS:{id:25875,name:"Microcosmos",label:{zh:"",ja:""}},ORACLE:{id:37029,name:"Oracle",label:{zh:"",ja:""}},HELIOS_CONJUNCTION:{id:37030,name:"Helios Conjunction",label:{zh:"",ja:""}},SUN_SIGN:{id:37031,name:"Sun Sign",label:{zh:"",ja:""}},THE_BALANCE:{id:37023,name:"The Balance",label:{zh:"",ja:""}},THE_ARROW:{id:37024,name:"The Arrow",label:{zh:"",ja:""}},THE_SPIRE:{id:37025,name:"The Spire",label:{zh:"",ja:""}},THE_SPEAR:{id:37026,name:"The Spear",label:{zh:"",ja:""}},THE_BOLE:{id:37027,name:"The Bole",label:{zh:"",ja:""}},THE_EWER:{id:37028,name:"The Ewer",label:{zh:"",ja:""}},LORD_OF_CROWNS:{id:7444,name:"Lord of Crowns",label:{zh:"",ja:""}},LADY_OF_CROWNS:{id:7445,name:"Lady of Crowns",label:{zh:"",ja:""}}}),PL=ae()({cd_LIGHTSPEED:{name:"cd_Lightspeed"},cd_ESSENTIAL_DIGNITY:{name:"cd_EssentialDignity"},cd_ASTRAL_DRAW:{name:"cd_AstralDraw"},cd_PLAY_I:{name:"cd_PlayI"},cd_PLAY_II:{name:"cd_PlayII"},cd_PLAY_III:{name:"cd_PlayIII"},cd_SYNASTRY:{name:"cd_Synastry"},cd_DIVINATION:{name:"cd_Divination"},cd_COLLECTIVE_UNCONSCIOUS:{name:"cd_CollectiveUnconscious"},cd_CELESTIAL_OPPOSITION:{name:"cd_CelestialOpposition"},cd_EARTHLY_STAR:{name:"cd_EarthlyStar"},cd_STELLAR_DETONATION:{name:"cd_StellarDetonation"},cd_MINOR_ARCANA:{name:"cd_MinorArcana"},cd_CELESTIAL_INTERSECTION:{name:"cd_CelestialIntersection"},cd_HOROSCOPE:{name:"cd_Horoscope"},cd_HOROSCOPE_RECAST:{name:"cd_HoroscopeRecast"},cd_NEUTRAL_SECT:{name:"cd_NeutralSect"},cd_EXALTATION:{name:"cd_Exaltation"},cd_MACROCOSMOS:{name:"cd_Macrocosmos"},cd_MICROCOSMOS:{name:"cd_Microcosmos"},cd_ORACLE:{name:"cd_Oracle"},cd_SUN_SIGN:{name:"cd_SunSign"}}),wL=ae()({ARCANA:{name:"Arcana",label:{zh:""}},MINOR_ARCANA:{name:"Minor Arcana",label:{zh:""}}}),ST=ae()({LIGHTSPEED:{name:"Lightspeed",label:{zh:""}},THE_BALANCE:{name:"The Balance",label:{zh:""}},THE_ARROW:{name:"The Arrow",label:{zh:""}},THE_SPIRE:{name:"The Spire",label:{zh:""}},THE_SPEAR:{name:"The Spear",label:{zh:""}},THE_BOLE:{name:"The Bole",label:{zh:""}},THE_EWER:{name:"The Ewer",label:{zh:""}},ASPECTED_BENEFIC:{name:"Aspected Benefic",label:{zh:""}},ASPECTED_HELIOS:{name:"Aspected Helios",label:{zh:""}},SYNASTRY:{name:"Synastry",label:{zh:""}},DIVINATION:{name:"Divination",label:{zh:""}},DIVINING:{name:"Divining",label:{zh:""}},COLLECTIVE_UNCONSCIOUS:{name:"Collective Unconscious",label:{zh:""}},COLLECTIVE_UNCONSCIOUS_MIT:{name:"Collective Unconscious (Mitigation)",label:{zh:""}},WHEEL_OF_FORTUNE:{name:"Wheel of Fortune",label:{zh:""}},OPPOSITION:{name:"Opposition",label:{zh:""}},EARTHLY_DOMINANCE:{name:"Earthly Dominance",mayNotBeCanceled:!0,label:{zh:""}},GIANT_DOMINANCE:{name:"Giant Dominance",mayNotBeCanceled:!0,label:{zh:""}},COMBUST_II:{name:"Combust II",label:{zh:""}},COMBUST_III:{name:"Combust III",label:{zh:""}},INTERSECTION:{name:"Intersection",label:{zh:""}},HOROSCOPE:{name:"Horoscope",label:{zh:""}},HOROSCOPE_HELIOS:{name:"Horoscope Helios",label:{zh:""}},NEUTRAL_SECT:{name:"Neutral Sect",label:{zh:""}},NEUTRAL_SECT_SHIELD:{name:"Neutral Sect (Shield)",label:{zh:""}},SUNTOUCHED:{name:"Suntouched",label:{zh:""}},EXALTATION:{name:"Exaltation",label:{zh:""}},MACROCOSMOS:{name:"Macrocosmos",label:{zh:""}},HELIOS_CONJUNCTION:{name:"Helios Conjunction",label:{zh:""}},SUN_SIGN:{name:"Sun Sign",label:{zh:""}}}),GL=ae()({ARCANA_1:{name:"Arcana 1",label:{zh:"1"}},ARCANA_2:{name:"Arcana 2",label:{zh:"2"}},ARCANA_3:{name:"Arcana 3",label:{zh:"3"}},NEXT_DRAW:{name:"Next Draw",label:{zh:""}}}),BL=ae()({COMBUST_MASTERY_II:{name:"Combust Mastery II",level:72},MALEFIC_MASTERY_III:{name:"Malefic Mastery III",level:82},ENHANCED_ESSENTIAL_DIGNITY:{name:"Enhanced Essential Dignity",level:78},MALEFIC_MASTERY_IV:{name:"Malefic Mastery IV",level:82},GRAVITY_MASTERY:{name:"Gravity Mastery",level:82},ENHANCED_CELESTIAL_INTERSECTION:{name:"Enhanced Celestial Intersection",level:88},ENHANCED_DIVINATION:{name:"Enhanced Divination",level:92},ASPECTED_HELIOS_MASTERY:{name:"Aspected Helios Mastery",level:96},ENHANCED_ESSENTIAL_DIGNITY_II:{name:"Enhanced Essential Dignity_II",level:98},ENHANCED_NEUTRAL_SECT:{name:"Enhanced Neutral Sect",level:100}}),FL={...wL,...ST,...GL},zL=ae()({BLIZZARD:{id:142,name:"Blizzard",label:{zh:"1",ja:""},discordEmote:"B1"},FIRE:{id:141,name:"Fire",label:{zh:"1",ja:""},discordEmote:"F1"},BLIZZARD_II:{id:25793,name:"Blizzard 2",label:{zh:"2",ja:""},discordEmote:"F2"},FIRE_II:{id:147,name:"Fire 2",label:{zh:"2",ja:""},discordEmote:"F2"},TRANSPOSE:{id:149,name:"Transpose",label:{zh:"",ja:""},discordEmote:"Transpose"},THUNDER_III:{id:153,name:"Thunder 3",label:{zh:"3",ja:""},discordEmote:"T3"},THUNDER_IV:{id:7420,name:"Thunder 4",label:{zh:""},discordEmote:"T4"},MANAWARD:{id:157,name:"Manaward",label:{zh:"",ja:""},discordEmote:"Manaward"},MANAFONT:{id:158,name:"Manafont",label:{zh:"",ja:""},discordEmote:"Manafont"},LEY_LINES:{id:3573,name:"Ley Lines",label:{zh:"",ja:""},discordEmote:"LL"},FIRE_III:{id:152,name:"Fire 3",label:{zh:"3",ja:""},discordEmote:"F3"},BLIZZARD_III:{id:154,name:"Blizzard 3",label:{zh:"3",ja:""},discordEmote:"B3"},FREEZE:{id:159,name:"Freeze",label:{zh:"",ja:""},discordEmote:"Freeze"},FLARE:{id:162,name:"Flare",label:{zh:"",ja:""},discordEmote:"Flare"},BLIZZARD_IV:{id:3576,name:"Blizzard 4",label:{zh:"4",ja:""},discordEmote:"B4"},FIRE_IV:{id:3577,name:"Fire 4",label:{zh:"4",ja:""},discordEmote:"F4"},BETWEEN_THE_LINES:{id:7419,name:"Between the Lines",label:{zh:"",ja:""},discordEmote:"BtL"},AETHERIAL_MANIPULATION:{id:155,name:"Aetherial Manipulation",label:{zh:"",ja:""},discordEmote:"AM"},TRIPLECAST:{id:7421,name:"Triplecast",label:{zh:"",ja:""},discordEmote:"Triple"},FOUL:{id:7422,name:"Foul",label:{zh:"",ja:""},discordEmote:"Foul"},DESPAIR:{id:16505,name:"Despair",label:{zh:"",ja:""},discordEmote:"Despair"},UMBRAL_SOUL:{id:16506,name:"Umbral Soul",label:{zh:"",ja:""},discordEmote:"Soul"},XENOGLOSSY:{id:16507,name:"Xenoglossy",label:{zh:"",ja:""},discordEmote:"Xeno"},HIGH_FIRE_II:{id:25794,name:"High Fire 2",label:{zh:"2",ja:""},discordEmote:"HF2"},HIGH_BLIZZARD_II:{id:25795,name:"High Blizzard 2",label:{zh:"2",ja:""},discordEmote:"HB2"},AMPLIFIER:{id:25796,name:"Amplifier",label:{zh:"",ja:""},discordEmote:"Amplifier"},PARADOX:{id:25797,name:"Paradox",label:{zh:"",ja:""},discordEmote:"Para"},HIGH_THUNDER:{id:36986,name:"High Thunder",label:{zh:"",ja:""},discordEmote:"HThunder"},HIGH_THUNDER_II:{id:36987,name:"High Thunder 2",label:{zh:""},discordEmote:"HThunder2"},FLARE_STAR:{id:36989,name:"Flare Star",label:{zh:"",ja:""},discordEmote:"FS"},RETRACE:{id:36988,name:"Retrace",label:{zh:"",ja:""}}}),jL=ae()({cd_TRANSPOSE:{name:"cd_Transpose"},cd_LEY_LINES:{name:"cd_LeyLines"},cd_MANAWARD:{name:"cd_Manaward"},cd_BETWEEN_THE_LINES:{name:"cd_BetweenTheLines"},cd_AETHERIAL_MANIPULATION:{name:"cd_AetherialManipulation"},cd_TRIPLECAST:{name:"cd_Triplecast"},cd_MANAFONT:{name:"cd_Manafont"},cd_AMPLIFIER:{name:"cd_Amplifier"},cd_RETRACE:{name:"cd_Retrace"}}),YL=ae()({POLYGLOT:{name:"Polyglot",label:{zh:""}},ASTRAL_FIRE:{name:"Astral Fire",label:{zh:""}},UMBRAL_ICE:{name:"Umbral Ice",label:{zh:""}},UMBRAL_HEART:{name:"Umbral Heart",label:{zh:""}},ENOCHIAN:{name:"Enochian",label:{zh:""}},PARADOX:{name:"Paradox",label:{zh:""}},ASTRAL_SOUL:{name:"Astral Soul",label:{zh:""}}}),IT=ae()({LEY_LINES:{name:"Ley Lines",label:{zh:""},mayBeToggled:!0},TRIPLECAST:{name:"Triplecast",label:{zh:""},maximumStacks:3},FIRESTARTER:{name:"Firestarter",label:{zh:""}},THUNDERHEAD:{name:"Thunderhead",label:{zh:""}},THUNDER_III:{name:"Thunder III",label:{zh:""}},THUNDER_IV:{name:"Thunder IV",label:{zh:""}},HIGH_THUNDER:{name:"High Thunder",label:{zh:""}},HIGH_THUNDER_II:{name:"High Thunder II",label:{zh:""}},MANAWARD:{name:"Manaward",label:{zh:""}}}),KL=ae()({}),VL=ae()({ENHANCED_ENOCHIAN_II:{name:"Enhanced Enochian II",level:78},ENHANCED_POLYGLOT:{name:"Enhanced Polyglot",level:80},ENHANCED_FOUL:{name:"Enhanced Foul",level:80},ASPECT_MASTERY_IV:{name:"Aspect Mastery IV",level:82},ENHANCED_MANAFONT:{name:"Enhanced Manafont",level:84},ENHANCED_ENOCHIAN_III:{name:"Enhanced Enochian III",level:86},ASPECT_MASTERY_V:{name:"Aspect Mastery V",level:90},THUNDER_MASTERY_III:{name:"Thunder Mastery III",level:92},ENHANCED_LEYLINES:{name:"Enhanced Ley Lines",level:96},ENHANCED_ENOCHIAN_IV:{name:"Enhanced Enochian IV",level:96},ENHANCED_POLYGLOT_II:{name:"Enhanced Polyglot II",level:98},ENHANCED_ASTRAL_FIRE:{name:"Enhanced Astral Fire",level:100}}),WL={...YL,...IT,...KL},XL=ae()({HEAVY_SHOT:{id:97,name:"Heavy Shot"},QUICK_NOCK:{id:100,name:"Quick Nock"},BLOODLETTER:{id:110,name:"Bloodletter"},BARRAGE:{id:107,name:"Barrage"},RAGING_STRIKES:{id:101,name:"Raging Strikes"},REPELLING_SHOT:{id:112,name:"Repelling Shot"},WIDE_VOLLEY:{id:111,name:"Wide Volley"},MAGES_BALLAD:{id:114,name:"Mage's Ballad"},ARMYS_PAEON:{id:116,name:"Army's Paeon"},RAIN_OF_DEATH:{id:117,name:"Rain of Death"},BATTLE_VOICE:{id:118,name:"Battle Voice"},EMYPREAL_ARROW:{id:3558,name:"Empyreal Arrow"},WANDERERS_MINUET:{id:3559,name:"The Wanderer's Minuet"},IRON_JAWS:{id:3560,name:"Iron Jaws"},WARDENS_PAEAN:{id:3561,name:"Warden's Paean"},SIDEWINDER:{id:3562,name:"Sidewinder"},PITCH_PERFECT:{id:7404,name:"Pitch Perfect"},TROUBADOUR:{id:7405,name:"Troubadour"},CAUSTIC_BITE:{id:7406,name:"Caustic Bite"},STORMBITE:{id:7407,name:"Stormbite"},NATURES_MINNE:{id:7408,name:"Nature's Minne"},REFULGENT_ARROW:{id:7409,name:"Refulgent Arrow"},SHADOWBITE:{id:16494,name:"Shadowbite"},BURST_SHOT:{id:16495,name:"Burst Shot"},APEX_ARROW:{id:16496,name:"Apex Arrow"},LADONSBITE:{id:25783,name:"Ladonsbite"},BLAST_ARROW:{id:25784,name:"Blast Arrow"},RADIANT_FINALE:{id:25785,name:"Radiant Finale"},HEARTBREAK_SHOT:{id:36975,name:"Heartbreak Shot"},RESONANT_ARROW:{id:36976,name:"Resonant Arrow"},RADIANT_ENCORE:{id:36977,name:"Radiant Encore"}}),qL=ae()({cd_RAGING_STRIKES:{name:"cd_RagingStrikes"},cd_BARRAGE:{name:"cd_Barrage"},cd_EMPYREAL_ARROW:{name:"cd_EmpyrealArrow"},cd_HEARTBREAK_SHOT:{name:"cd_HeartbreakShot"},cd_SIDEWINDER:{name:"cd_Sidewinder"},cd_WANDERERS_MINUET:{name:"cd_WanderersMinuet"},cd_MAGES_BALLAD:{name:"cd_MagesBallad"},cd_ARMYS_PAEON:{name:"cd_ArmysPaeon"},cd_WARDENS_PAEAN:{name:"cd_WardensPaean"},cd_NATURES_MINNE:{name:"cd_NaturesMinne"},cd_REPELLING_SHOT:{name:"cd_RepellingShot"},cd_BATTLE_VOICE:{name:"cd_BattleVoice"},cd_RADIANT_FINALE:{name:"cd_RadiantFinale"},cd_TROUBADOUR:{name:"cd_Troubadour"},cd_PITCH_PERFECT:{name:"cd_PitchPerfect"}}),ZL=ae()({SONG_TIMER:{name:"SongTimer"},SOUL_VOICE:{name:"Soul Voice"},PITCH_PERFECT:{name:"Pitch Perfect"},REPERTOIRE:{name:"Repertoire"},WANDERERS_CODA:{name:"Wanderer's Coda"},MAGES_CODA:{name:"Mage's Coda"},ARMYS_CODA:{name:"Army's Coda"}}),_T=ae()({HAWKS_EYE:{name:"Hawk's Eye"},RAGING_STRIKES:{name:"Raging Strikes"},BARRAGE:{name:"Barrage"},ARMYS_MUSE:{name:"Army's Muse"},ARMYS_ETHOS:{name:"Army's Ethos"},BLAST_ARROW_READY:{name:"Blast Arrow Ready"},RESONANT_ARROW_READY:{name:"Resonant Arrow Ready"},RADIANT_ENCORE_READY:{name:"Radiant Encore Ready"},CAUSTIC_BITE:{name:"Caustic Bite"},STORMBITE:{name:"Stormbite"},MAGES_BALLAD:{name:"Mage's Ballad"},ARMYS_PAEON:{name:"Army's Paeon"},WANDERERS_MINUET:{name:"Wanderer's Minuet"},BATTLE_VOICE:{name:"Battle Voice"},WARDENS_PAEAN:{name:"Warden's Paean"},TROUBADOUR:{name:"Troubadour"},NATURES_MINNE:{name:"Nature's Minne"},RADIANT_FINALE:{name:"Radiant Finale"}}),QL=ae()({RADIANT_CODA:{name:"Radiant Coda"},MUSE_REPERTOIRE:{name:"Muse Repertoire"},ETHOS_REPERTOIRE:{name:"Ethos Repertoire"}}),$L=ae()({WIDE_VOLLEY_MASTERY:{name:"Wide Volley Mastery",level:72},BITE_MASTERY_II:{name:"Bite Mastery II",level:76},HEAVY_SHOT_MASTERY:{name:"Heavy Shot Mastery",level:76},ENHANCED_ARMYS_PAEON:{name:"Enhanced Army's Paeon",level:78},SOUL_VOICE:{name:"Soul Voice",level:80},QUICK_NOCK_MASTERY:{name:"Quick Nock Mastery",level:82},ENHANCED_BLOODLETTER:{name:"Enhanced Bloodletter",level:84},ENHANCED_APEX_ARROW:{name:"Enhanced Apex Arrow",level:86},ENHANCED_TROUBADOUR:{name:"Enhanced Troubadour",level:88},MINSTRELS_CODA:{name:"Minstrel's Coda",level:90},BLOODLETTER_MASTERY:{name:"Bloodletter Mastery",level:92},RANGED_MASTERY:{name:"Ranged Mastery",level:94},ENHANCED_BARRAGE:{name:"Enhanced Barrage",level:96},ENHANCED_RADIANT_FINALE:{name:"Enhanced Radiant Finale",level:100}}),JL={...ZL,..._T,...QL},e1=ae()({STANDARD_FINISH:{id:16003,name:"Standard Finish",label:{zh:""}},SINGLE_STANDARD_FINISH:{id:16191,name:"Single Standard Finish",label:{zh:""}},DOUBLE_STANDARD_FINISH:{id:16192,name:"Double Standard Finish",label:{zh:""}},FINISHING_MOVE:{id:36984,name:"Finishing Move",label:{zh:""}},LAST_DANCE:{id:36983,name:"Last Dance",label:{zh:""}},TECHNICAL_FINISH:{id:16004,name:"Technical Finish",label:{zh:""}},SINGLE_TECHNICAL_FINISH:{id:16193,name:"Single Technical Finish",label:{zh:""}},DOUBLE_TECHNICAL_FINISH:{id:16194,name:"Double Technical Finish",label:{zh:""}},TRIPLE_TECHNICAL_FINISH:{id:16195,name:"Triple Technical Finish",label:{zh:""}},QUADRUPLE_TECHNICAL_FINISH:{id:16196,name:"Quadruple Technical Finish",label:{zh:""}},TILLANA:{id:25790,name:"Tillana",label:{zh:""}},CASCADE:{id:15989,name:"Cascade",label:{zh:""}},FOUNTAIN:{id:15990,name:"Fountain",label:{zh:""}},REVERSE_CASCADE:{id:15991,name:"Reverse Cascade",label:{zh:""}},FOUNTAINFALL:{id:15992,name:"Fountainfall",label:{zh:""}},WINDMILL:{id:15993,name:"Windmill",label:{zh:""}},BLADESHOWER:{id:15994,name:"Bladeshower",label:{zh:""}},RISING_WINDMILL:{id:15995,name:"Rising Windmill",label:{zh:""}},BLOODSHOWER:{id:15996,name:"Bloodshower",label:{zh:""}},STANDARD_STEP:{id:15997,name:"Standard Step",label:{zh:""}},TECHNICAL_STEP:{id:15998,name:"Technical Step",label:{zh:""}},EMBOITE:{id:15999,name:"Emboite",label:{zh:""}},ENTRECHAT:{id:16e3,name:"Entrechat",label:{zh:""}},JETE:{id:16001,name:"Jete",label:{zh:""}},PIROUETTE:{id:16002,name:"Pirouette",label:{zh:""}},SABER_DANCE:{id:16005,name:"Saber Dance",label:{zh:""}},DANCE_OF_THE_DAWN:{id:36985,name:"Dance of the Dawn",label:{zh:""}},CLOSED_POSITION:{id:16006,name:"Closed Position",label:{zh:""}},FAN_DANCE:{id:16007,name:"Fan Dance",label:{zh:""}},FAN_DANCE_II:{id:16008,name:"Fan Dance II",label:{zh:""}},FAN_DANCE_III:{id:16009,name:"Fan Dance III",label:{zh:""}},FAN_DANCE_IV:{id:25791,name:"Fan Dance IV",label:{zh:""}},EN_AVANT:{id:16010,name:"En Avant",label:{zh:""}},DEVILMENT:{id:16011,name:"Devilment",label:{zh:""}},STARFALL_DANCE:{id:25792,name:"Starfall Dance",label:{zh:""}},SHIELD_SAMBA:{id:16012,name:"Shield Samba",label:{zh:""}},FLOURISH:{id:16013,name:"Flourish",label:{zh:""}},IMPROVISATION:{id:16014,name:"Improvisation",label:{zh:""}},IMPROVISED_FINISH:{id:25789,name:"Improvised Finish",label:{zh:""}},CURING_WALTZ:{id:16015,name:"Curing Waltz",label:{zh:""}},ENDING:{id:18073,name:"Ending",label:{zh:""}}}),t1=ae()({cd_STANDARD_STEP:{name:"cd_StandardStep"},cd_TECHNICAL_STEP:{name:"cd_TechnicalStep"},cd_CLOSED_POSITION:{name:"cd_ClosedPosition"},cd_FAN_DANCE:{name:"cd_FanDance"},cd_FAN_DANCE_II:{name:"cd_FanDanceII",label:{zh:"CD"}},cd_FAN_DANCE_III:{name:"cd_FanDanceIII",label:{zh:"CD"}},cd_FAN_DANCE_IV:{name:"cd_FanDanceIV",label:{zh:"CD"}},cd_EN_AVANT:{name:"cd_EnAvant"},cd_DEVILMENT:{name:"cd_Devilment"},cd_SHIELD_SAMBA:{name:"cd_ShieldSamba"},cd_FLOURISH:{name:"cd_Flourish"},cd_IMPROVISATION:{name:"cd_Improvisation"},cd_IMPROVISED_FINISH:{name:"cd_ImprovisedFinish"},cd_CURING_WALTZ:{name:"cd_CuringWaltz"},cd_ENDING:{name:"cd_Ending"}}),n1=ae()({ESPRIT_GAUGE:{name:"EspritGauge",label:{zh:""}},FEATHER_GAUGE:{name:"Feathers",label:{zh:""}},STANDARD_DANCE:{name:"Standard Dance",label:{zh:""}},TECHNICAL_DANCE:{name:"Technical Dance",label:{zh:""}}}),gT=ae()({SILKEN_SYMMETRY:{name:"Silken Symmetry",label:{zh:""}},SILKEN_FLOW:{name:"Silken Flow",label:{zh:""}},FLOURISHING_SYMMETRY:{name:"Flourishing Symmetry",label:{zh:""}},FLOURISHING_FLOW:{name:"Flourishing Flow",label:{zh:""}},THREEFOLD_FAN_DANCE:{name:"Threefold Fan Dance",label:{zh:""}},FOURFOLD_FAN_DANCE:{name:"Fourfold Fan Dance",label:{zh:""}},FINISHING_MOVE_READY:{name:"Finishing Move Ready",label:{zh:""}},FLOURISHING_STARFALL:{name:"Flourishing Starfall",label:{zh:""}},STANDARD_STEP:{name:"Standard Step",label:{zh:""},mayNotBeCanceled:!0},TECHNICAL_STEP:{name:"Technical Step",label:{zh:""},mayNotBeCanceled:!0},LAST_DANCE_READY:{name:"Last Dance Ready",label:{zh:""}},DANCE_OF_THE_DAWN_READY:{name:"Dance of the Dawn Ready",label:{zh:""}},FLOURISHING_FINISH:{name:"Flourishing Finish",label:{zh:""}},SHIELD_SAMBA:{name:"Shield Samba",label:{zh:""}},IMPROVISATION:{name:"Improvisation",label:{zh:""},mayNotBeCanceled:!0},RISING_RHYTHM:{name:"Rising Rhythm",label:{zh:""},maximumStacks:4},IMPROVISATION_REGEN:{name:"Improvisation Regen",label:{zh:""}},IMPROVISED_FINISH:{name:"Improvised Finish",label:{zh:""}},DEVILMENT:{name:"Devilment",label:{zh:""}},TECHNICAL_FINISH:{name:"Technical Finish",label:{zh:""}},ESPRIT:{name:"Esprit",label:{zh:""},mayNotBeCanceled:!0},STANDARD_FINISH:{name:"Standard Finish",label:{zh:""}},CLOSED_POSITION:{name:"Closed Position",label:{zh:""},mayNotBeCanceled:!0},DANCE_PARTNER:{name:"Dance Partner",label:{zh:""}},STANDARD_FINISH_PARTNER:{name:"Standard Finish Partner",label:{zh:"buff"}},ESPRIT_PARTNER:{name:"Esprit Partner",label:{zh:"buff"}},ESPRIT_TECHNICAL:{name:"Esprit Technical",label:{zh:"buff"}}}),a1=ae()({CASCADE_COMBO:{name:"CascadeCombo",label:{zh:""}},WINDMILL_COMBO:{name:"WindmillCombo",label:{zh:""}},STANDARD_BONUS:{name:"StandardBonus",label:{zh:""}},TECHNICAL_BONUS:{name:"TechnicalBonus",label:{zh:""}}}),i1=ae()({ESPRIT:{name:"Esprit",level:76},ENHANCED_EN_AVANT_II:{name:"Enhanced En Avant II",level:78},ENHANCED_TECHNICAL_FINISH:{name:"Enhanced Technical Finish",level:82},ENHANCED_ESPRIT:{name:"Enhanced Esprit",level:84},ENHANCED_FLOURISH:{name:"Enhanced Flourish",level:86},ENHANCED_SHIELD_SAMBA:{name:"Enhanced Shield Samba",level:88},ENHANCED_DEVILMENT:{name:"Enhanced Devilment",level:90},ENHANCED_STANDARD_FINISH:{name:"Enhanced Standard Finish",level:92},DYNAMIC_DANCER:{name:"Dynamic Dancer",level:94},ENHANCED_FLOURISH_II:{name:"Enhanced Flourish II",level:96},ENHANCED_TECHNICAL_FINISH_II:{name:"Enhanced Technical Finish II",level:100}}),o1={...n1,...gT,...a1},l1=ae()({PIERCING_TALON:{id:90,name:"Piercing Talon"},TRUE_THRUST:{id:75,name:"True Thrust"},RAIDEN_THRUST:{id:16479,name:"Raiden Thrust"},DISEMBOWEL:{id:87,name:"Disembowel"},SPIRAL_BLOW:{id:36955,name:"Spiral Blow"},CHAOS_THRUST:{id:88,name:"Chaos Thrust"},CHAOTIC_SPRING:{id:25772,name:"Chaotic Spring"},WHEELING_THRUST:{id:3556,name:"Wheeling Thrust"},VORPAL_THRUST:{id:78,name:"Vorpal Thrust"},LANCE_BARRAGE:{id:36954,name:"Lance Barrage"},FULL_THRUST:{id:84,name:"Full Thrust"},HEAVENS_THRUST:{id:25771,name:"Heavens' Thrust"},FANG_AND_CLAW:{id:3554,name:"Fang and Claw"},DRAKESBANE:{id:36952,name:"Drakesbane"},DOOM_SPIKE:{id:86,name:"Doom Spike"},DRACONIAN_FURY:{id:25770,name:"Draconian Fury"},SONIC_THRUST:{id:7397,name:"Sonic Thrust"},COERTHAN_TORMENT:{id:16477,name:"Coerthan Torment"},LIFE_SURGE:{id:83,name:"Life Surge"},LANCE_CHARGE:{id:85,name:"Lance Charge"},JUMP:{id:92,name:"Jump"},HIGH_JUMP:{id:16478,name:"High Jump"},MIRAGE_DIVE:{id:7339,name:"Mirage Dive"},DRAGONFIRE_DIVE:{id:96,name:"Dragonfire Dive"},RISE_OF_THE_DRAGON:{id:36953,name:"Rise of the Dragon"},BATTLE_LITANY:{id:3557,name:"Battle Litany"},WYRMWIND_THRUST:{id:25773,name:"Wyrmwind Thrust"},GEIRSKOGUL:{id:3555,name:"Geirskogul"},NASTROND:{id:7400,name:"Nastrond"},STARDIVER:{id:16480,name:"Stardiver"},STARCROSS:{id:36956,name:"Starcross"},ELUSIVE_JUMP:{id:94,name:"Elusive Jump"},WINGED_GLIDE:{id:36951,name:"Winged Glide"}}),s1=ae()({cd_LIFE_SURGE:{name:"cd_LifeSurge"},cd_LANCE_CHARGE:{name:"cd_LanceCharge"},cd_JUMP:{name:"cd_Jump"},cd_HIGH_JUMP:{name:"cd_HighJump"},cd_ELUSIVE_JUMP:{name:"cd_ElusiveJump"},cd_WINGED_GLIDE:{name:"cd_WingedGlide"},cd_DRAGONFIRE_DIVE:{name:"cd_DragonfireDive"},cd_BATTLE_LITANY:{name:"cd_BattleLitany"},cd_GEIRSKOGUL:{name:"cd_Geirskogul"},cd_MIRAGE_DIVE:{name:"cd_MirageDive"},cd_NASTROND:{name:"cd_Nastrond"},cd_STARDIVER:{name:"cd_Stardiver"},cd_WYRMWIND_THRUST:{name:"cd_WyrmwindThrust"},cd_RISE_OF_THE_DRAGON:{name:"cd_RiseOfTheDragon"},cd_STARCROSS:{name:"cd_Starcross"}}),r1=ae()({LIFE_OF_THE_DRAGON:{name:"Life of the Dragon"},FIRSTMINDS_FOCUS:{name:"Firstminds' Focus"}}),NT=ae()({LIFE_SURGE:{name:"Life Surge"},ENHANCED_PIERCING_TALON:{name:"Enhanced Piercing Talon"},POWER_SURGE:{name:"Power Surge"},LANCE_CHARGE:{name:"Lance Charge"},DIVE_READY:{name:"Dive Ready"},CHAOS_THRUST_DOT:{name:"Chaos Thrust DoT"},CHAOTIC_SPRING_DOT:{name:"Chaotic Spring DoT"},DRAGONS_FLIGHT:{name:"Dragon's Flight"},BATTLE_LITANY:{name:"Battle Litany"},NASTROND_READY:{name:"Nastrond Ready"},DRACONIAN_FIRE:{name:"Draconian Fire"},STARCROSS_READY:{name:"Starcross Ready"}}),c1=ae()({DRG_CHAOS_COMBO_TRACKER:{name:"DRG Chaos Combo"},DRG_HEAVENS_COMBO_TRACKER:{name:"DRG Heavens Combo"},DRG_AOE_COMBO_TRACKER:{name:"DRG AOE Combo"}}),u1=ae()({JUMP_MASTERY:{name:"Jump Mastery",level:74},LANCE_MASTERY:{name:"Lance Mastery",level:76},ENHANCED_COERTHAN_TORMENT:{name:"Enhanced Coerthan Torment",level:82},ENHANCED_WINGED_GLIDE:{name:"Enhanced Winged Glide",level:84},LANCE_MASTERY_II:{name:"Lance Mastery II",level:86},ENHANCED_LIFE_SURGE:{name:"Enhanced Life Surge",level:88},LANCE_MASTERY_III:{name:"Lance Mastery III",level:90},ENHANCED_DRAGONFIRE_DIVE:{name:"Enhanced Dragonfire Dive",level:92},MELEE_MASTERY_DRG:{name:"Melee Mastery DRG",level:94},LANCE_MASTERY_IV:{name:"Lance Mastery IV",level:96},ENHANCED_STARDIVER:{name:"Enhanced Stardiver",level:100}}),d1={...r1,...NT,...c1},h1=ae()({HARD_SLASH:{id:3617,name:"Hard Slash",label:{zh:""}},SYPHON_STRIKE:{id:3623,name:"Syphon Strike",label:{zh:""}},UNLEASH:{id:3621,name:"Unleash",label:{zh:""}},GRIT:{id:3629,name:"Grit",label:{zh:""}},RELEASE_GRIT:{id:32067,name:"Release Grit",label:{zh:""}},UNMEND:{id:3624,name:"Unmend",label:{zh:""}},SOULEATER:{id:3632,name:"Souleater",label:{zh:""}},FLOOD_OF_DARKNESS:{name:"Flood of Darkness",label:{zh:""}},BLOOD_WEAPON:{id:3625,name:"Blood Weapon",label:{zh:""}},SHADOW_WALL:{id:3636,name:"Shadow Wall",label:{zh:""}},STALWART_SOUL:{id:16468,name:"Stalwart Soul",label:{zh:""}},EDGE_OF_DARKNESS:{name:"Edge of Darkness",label:{zh:""}},DARK_MIND:{id:3634,name:"Dark Mind",label:{zh:""}},LIVING_DEAD:{id:3638,name:"Living Dead",label:{zh:""}},SALTED_EARTH:{id:3639,name:"Salted Earth",label:{zh:""}},SHADOWSTRIDE:{id:36926,name:"Shadowstride",label:{zh:""}},ABYSSAL_DRAIN:{id:3641,name:"Abyssal Drain",label:{zh:""}},CARVE_AND_SPIT:{id:3643,name:"Carve and Spit",label:{zh:""}},BLOODSPILLER:{id:7392,name:"Bloodspiller",label:{zh:""}},QUIETUS:{id:7391,name:"Quietus",label:{zh:""}},DARK_MISSIONARY:{id:16471,name:"Dark Missionary",label:{zh:""}},DELIRIUM:{id:7390,name:"Delirium",label:{zh:""}},THE_BLACKEST_NIGHT:{id:7393,name:"The Blackest Night",label:{zh:""}},THE_BLACKEST_NIGHT_POP:{name:"Pop The Blackest Night",label:{zh:""}},FLOOD_OF_SHADOW:{id:16469,name:"Flood of Shadow",label:{zh:""}},EDGE_OF_SHADOW:{id:16470,name:"Edge of Shadow",label:{zh:""}},LIVING_SHADOW:{id:16472,name:"Living Shadow",label:{zh:""}},OBLATION:{id:25754,name:"Oblation",label:{zh:""}},SALT_AND_DARKNESS:{id:25755,name:"Salt and Darkness",label:{zh:""}},SHADOWBRINGER:{id:25757,name:"Shadowbringer",label:{zh:""}},SHADOWED_VIGIL:{id:36927,name:"Shadowed Vigil",label:{zh:""}},SCARLET_DELIRIUM:{id:36928,name:"Scarlet Delirium",label:{zh:""}},COMEUPPANCE:{id:36929,name:"Comeuppance",label:{zh:""}},TORCLEAVER:{id:36930,name:"Torcleaver",label:{zh:""}},IMPALEMENT:{id:36931,name:"Impalement",label:{zh:""}},DISESTEEM:{id:36932,name:"Disesteem",label:{zh:""}},ABYSSAL_DRAIN_PET:{id:17904,name:"Abyssal Drain (Esteem)",label:{zh:""}},SHADOWSTRIDE_PET:{id:38512,name:"Shadowstride (Esteem)",label:{zh:""}},SHADOWBRINGER_PET:{id:25881,name:"Shadowbringer (Esteem)",label:{zh:""}},EDGE_OF_SHADOW_PET:{id:17908,name:"Edge of Shadow (Esteem)",label:{zh:""}},FLOOD_OF_SHADOW_PET:{name:"Flood of Shadow (Esteem)",label:{zh:""}},BLOODSPILLER_PET:{id:17909,name:"Bloodspiller (Esteem)",label:{zh:""}},CARVE_AND_SPIT_PET:{name:"Carve and Spit (Esteem)",label:{zh:""}},DISESTEEM_PET:{id:36933,name:"Disesteem (Esteem)",label:{zh:""}}}),E1=ae()({cd_GRIT:{name:"cd_Grit"},cd_RELEASE_GRIT:{name:"cd_ReleaseGrit"},cd_FLOOD_OF_DARKNESS:{name:"cd_FloodOfDarkness"},cd_SHADOW_WALL:{name:"cd_ShadowWall"},cd_DARK_MIND:{name:"cd_DarkMind"},cd_LIVING_DEAD:{name:"cd_LivingDead"},cd_SALTED_EARTH:{name:"cd_SaltedEarth"},cd_SHADOWSTRIDE:{name:"cd_Shadowstride"},cd_ABYSSAL_DRAIN:{name:"cd_AbyssalDrain"},cd_DARK_MISSIONARY:{name:"cd_DarkMissionary"},cd_DELIRIUM:{name:"cd_Delirium"},cd_THE_BLACKEST_NIGHT:{name:"cd_TheBlackestNight"},cd_THE_BLACKEST_NIGHT_POP:{name:"cd_TheBlackestNightPop"},cd_LIVING_SHADOW:{name:"cd_LivingShadow"},cd_OBLATION:{name:"cd_Oblation"},cd_SALT_AND_DARKNESS:{name:"cd_SaltAndDarkness"},cd_SHADOWBRINGER:{name:"cd_Shadowbringer"},cd_POP_TBN:{name:"cd_PopTBN"}}),f1=ae()({DARKSIDE:{name:"Darkside",label:{zh:""}},BLOOD_GAUGE:{name:"Blood Gauge",label:{zh:""}}}),pT=ae()({SALTED_EARTH:{name:"Salted Earth",mayBeToggled:!0,label:{zh:""}},GRIT:{name:"Grit",label:{zh:""}},SHADOW_WALL:{name:"Shadow Wall",label:{zh:""}},DARK_MIND:{name:"Dark Mind",label:{zh:""}},LIVING_DEAD:{name:"Living Dead",label:{zh:""}},WALKING_DEAD:{name:"Walking Dead",label:{zh:""}},UNDEAD_REBIRTH:{name:"Undead Rebirth",label:{zh:""}},DARK_MISSIONARY:{name:"Dark Missionary",label:{zh:""}},DELIRIUM:{name:"Delirium",maximumStacks:3,label:{zh:""}},BLOOD_WEAPON:{name:"Blood Weapon",maximumStacks:3,label:{zh:""}},BLACKEST_NIGHT:{name:"Blackest Night",label:{zh:""}},SCORN:{name:"Scorn",label:{zh:""}},OBLATION:{name:"Oblation",label:{zh:""}},SHADOWED_VIGIL:{name:"Shadowed Vigil",label:{zh:""}},VIGILANT:{name:"Vigilant",label:{zh:""}}}),A1=ae()({DRK_COMBO_TRACKER:{name:"DRK Combo",label:{zh:""}},DRK_AOE_COMBO_TRACKER:{name:"DRK AOE Combo",label:{zh:"AOE"}},DRK_DELIRIUM_COMBO_TRACKER:{name:"DRK Delirium Combo",label:{zh:""}},DARK_ARTS:{name:"Dark Arts",label:{zh:""}},ESTEEM_TRACKER:{name:"Esteem Attacks",label:{zh:""}}}),m1=ae()({DAKRSIDE_MASTERY:{name:"Darkside Mastery",level:74},ENHANCED_UNMEND:{name:"Enhanced Unmend",level:84},ENHANCED_LIVING_SHADOW:{name:"Enhanced Living Shadow",level:88},ENHANCED_LIVING_SHADOW_II:{name:"Enhanced Living Shadow II",level:90},SHADOW_WALL_MASTERY:{name:"Shadow Wall Mastery",level:92},ENHANCED_DELIRIUM:{name:"Enhanced Delirium",level:96},ENHANCED_LIVING_SHADOW_III:{name:"Enhanced Living Shadow III",level:100}}),R1={...f1,...pT,...A1},T1=ae()({LIGHTNING_SHOT:{id:16143,name:"Lightning Shot",label:{zh:""}},KEEN_EDGE:{id:16137,name:"Keen Edge",label:{zh:""}},BRUTAL_SHELL:{id:16139,name:"Brutal Shell",label:{zh:""}},SOLID_BARREL:{id:16145,name:"Solid Barrel",label:{zh:""}},DEMON_SLICE:{id:16141,name:"Demon Slice",label:{zh:""}},DEMON_SLAUGHTER:{id:16149,name:"Demon Slaughter",label:{zh:""}},BURST_STRIKE:{id:16162,name:"Burst Strike",label:{zh:""}},FATED_CIRCLE:{id:16163,name:"Fated Circle",label:{zh:""}},BLOODFEST:{id:16164,name:"Bloodfest",label:{zh:""}},NO_MERCY:{id:16138,name:"No Mercy",label:{zh:""}},SONIC_BREAK:{id:16153,name:"Sonic Break",label:{zh:""}},GNASHING_FANG:{id:16146,name:"Gnashing Fang",label:{zh:""}},SAVAGE_CLAW:{id:16147,name:"Savage Claw",label:{zh:""}},WICKED_TALON:{id:16150,name:"Wicked Talon",label:{zh:""}},DOUBLE_DOWN:{id:25760,name:"Double Down",label:{zh:""}},REIGN_OF_BEASTS:{id:36937,name:"Reign of Beasts",label:{zh:""}},NOBLE_BLOOD:{id:36938,name:"Noble Blood",label:{zh:""}},LION_HEART:{id:36939,name:"Lion Heart",label:{zh:""}},CONTINUATION:{id:16155,name:"Continuation",label:{zh:""}},HYPERVELOCITY:{id:25759,name:"Hypervelocity",label:{zh:""}},FATED_BRAND:{id:36936,name:"Fated Brand",label:{zh:""}},JUGULAR_RIP:{id:16156,name:"Jugular Rip",label:{zh:""}},ABDOMEN_TEAR:{id:16157,name:"Abdomen Tear",label:{zh:""}},EYE_GOUGE:{id:16158,name:"Eye Gouge",label:{zh:""}},DANGER_ZONE:{id:16144,name:"Danger Zone",label:{zh:""}},BLASTING_ZONE:{id:16165,name:"Blasting Zone",label:{zh:""}},BOW_SHOCK:{id:16159,name:"Bow Shock",label:{zh:""}},TRAJECTORY:{id:36934,name:"Trajectory",label:{zh:""}},HEART_OF_STONE:{id:16161,name:"Heart of Stone",label:{zh:""}},HEART_OF_CORUNDUM:{id:25758,name:"Heart of Corundum",label:{zh:""}},SUPERBOLIDE:{id:16152,name:"Superbolide",label:{zh:""}},CAMOUFLAGE:{id:16140,name:"Camouflage",label:{zh:""}},NEBULA:{id:16148,name:"Nebula",label:{zh:""}},GREAT_NEBULA:{id:36935,name:"Great Nebula",label:{zh:""}},HEART_OF_LIGHT:{id:16160,name:"Heart of Light",label:{zh:""}},AURORA:{id:16151,name:"Aurora",label:{zh:""}},ROYAL_GUARD:{id:16142,name:"Royal Guard",label:{zh:""}},RELEASE_ROYAL_GUARD:{id:32068,name:"Release Royal Guard",label:{zh:""}}}),S1=ae()({cd_NO_MERCY:{name:"cd_NoMercy"},cd_BLOODFEST:{name:"cd_Bloodfest"},cd_CAMOUFLAGE:{name:"cd_Camouflage"},cd_ROYAL_GUARD:{name:"cd_RoyalGuard"},cd_RELEASE_ROYAL_GUARD:{name:"cd_ReleaseRoyalGuard"},cd_DANGER_ZONE:{name:"cd_DangerZone"},cd_BLASTING_ZONE:{name:"cd_BlastingZone"},cd_NEBULA:{name:"cd_Nebula"},cd_GREAT_NEBULA:{name:"cd_GreatNebula"},cd_AURORA:{name:"cd_Aurora"},cd_SUPERBOLIDE:{name:"cd_Superbolide"},cd_TRAJECTORY:{name:"cd_Trajectory"},cd_GNASHING_FANG:{name:"cd_GnashingFang"},cd_BOW_SHOCK:{name:"cd_BowShock"},cd_HEART_OF_LIGHT:{name:"cd_HeartOfLight"},cd_HEART_OF_STONE:{name:"cd_HeartOfStone"},cd_HEART_OF_CORUNDUM:{name:"cd_HeartOfCorundum"},cd_DOUBLE_DOWN:{name:"cd_DoubleDown"},cd_CONTINUATION:{name:"cd_Continuation"},cd_HYPERVELOCITY:{name:"cd_Hypervelocity"},cd_FATED_BRAND:{name:"cd_FatedBrand"},cd_JUGULAR_RIP:{name:"cd_JugularRip"},cd_ABDOMEN_TEAR:{name:"cd_AbdomenTear"},cd_EYE_GOUGE:{name:"cd_EyeGouge"}}),I1=ae()({POWDER_GAUGE:{name:"Powder Gauge",label:{zh:""}}}),CT=ae()({NO_MERCY:{name:"No Mercy",label:{zh:""}},AURORA:{name:"Aurora",label:{zh:""}},BOW_SHOCK_DOT:{name:"Bow Shock DoT",label:{zh:""}},CAMOUFLAGE:{name:"Camouflage",label:{zh:""}},HEART_OF_CORUNDUM:{name:"Heart of Corundum",label:{zh:""}},CLARITY_OF_CORUNDUM:{name:"Clarity of Corundum",label:{zh:""}},CATHARSIS_OF_CORUNDUM:{name:"Catharsis of Corundum",label:{zh:""}},NEBULA:{name:"Nebula",label:{zh:""}},GREAT_NEBULA:{name:"Great Nebula",label:{zh:""}},HEART_OF_LIGHT:{name:"Heart of Light",label:{zh:""}},HEART_OF_STONE:{name:"Heart of Stone",label:{zh:""}},READY_TO_BLAST:{name:"Ready to Blast",label:{zh:""}},READY_TO_BREAK:{name:"Ready to Break",label:{zh:""}},READY_TO_GOUGE:{name:"Ready to Gouge",label:{zh:""}},READY_TO_RAZE:{name:"Ready to Raze",label:{zh:""}},READY_TO_REIGN:{name:"Ready to Reign",label:{zh:""}},READY_TO_RIP:{name:"Ready to Rip",label:{zh:""}},READY_TO_TEAR:{name:"Ready to Tear",label:{zh:""}},ROYAL_GUARD:{name:"Royal Guard",label:{zh:""}},SONIC_BREAK_DOT:{name:"Sonic Break DoT",label:{zh:""}},SUPERBOLIDE:{name:"Superbolide",label:{zh:""}},BRUTAL_SHELL:{name:"Brutal Shell",label:{zh:""}}}),_1=ae()({GNB_COMBO_TRACKER:{name:"GNB Combo",label:{zh:""}},GNB_AOE_COMBO_TRACKER:{name:"GNB AOE Combo",label:{zh:"AOE"}},GNB_GNASHING_COMBO_TRACKER:{name:"GNB Gnashing Combo",label:{zh:""}},GNB_REIGN_COMBO_TRACKER:{name:"GNB Reign Combo",label:{zh:""}}}),g1=ae()({DANGER_ZONE_MASTERY:{name:"Danger Zone Mastery",level:80},HEART_OF_STONE_MASTERY:{name:"Heart Of Stone Mastery",level:82},ENHANCED_AURORA:{name:"Enhanced Aurora",level:84},ENHANCED_CONTINUATION:{name:"Enhanced Continuation",level:86},CARTRIDGE_CHARGE_II:{name:"Cartridge Charge II",level:88},NEBULA_MASTERY:{name:"Nebula Mastery",level:92},ENHANCED_CONTINUATION_II:{name:"Enhanced Continuation II",level:96},ENHANCED_BLOODFEST:{name:"Enhanced Bloodfest",level:100}}),N1={...I1,...CT,..._1},p1=ae()({HEATED_SPLIT_SHOT:{id:7411,name:"Heated Split Shot",label:{zh:""}},HEATED_SLUG_SHOT:{id:7412,name:"Heated Slug Shot",label:{zh:""}},HEATED_CLEAN_SHOT:{id:7413,name:"Heated Clean Shot",label:{zh:""}},DRILL:{id:16498,name:"Drill",label:{zh:""}},HOT_SHOT:{id:2872,name:"Hot Shot",label:{zh:""}},AIR_ANCHOR:{id:16500,name:"Air Anchor",label:{zh:""}},CHAIN_SAW:{id:25788,name:"Chain Saw",label:{zh:""}},EXCAVATOR:{id:36981,name:"Excavator",label:{zh:""}},GAUSS_ROUND:{id:2874,name:"Gauss Round",label:{zh:""}},DOUBLE_CHECK:{id:36979,name:"Double Check",label:{zh:""}},RICOCHET:{id:2890,name:"Ricochet",label:{zh:""}},CHECKMATE:{id:36980,name:"Checkmate",label:{zh:""}},BLAZING_SHOT:{id:36978,name:"Blazing Shot",label:{zh:""}},WILDFIRE:{id:2878,name:"Wildfire",label:{zh:""}},DETONATOR:{id:16766,name:"Detonator",label:{zh:""}},HYPERCHARGE:{id:17209,name:"Hypercharge",label:{zh:""}},ROOK_AUTOTURRET:{id:2864,name:"Rook Autoturret",label:{zh:""}},ROOK_OVERDRIVE:{id:7415,name:"Rook Overdrive",label:{zh:""}},AUTOMATON_QUEEN:{id:16501,name:"Automaton Queen",label:{zh:""}},QUEEN_OVERDRIVE:{id:16502,name:"Queen Overdrive",label:{zh:""}},BARREL_STABILIZER:{id:7414,name:"Barrel Stabilizer",label:{zh:""}},REASSEMBLE:{id:2876,name:"Reassemble",label:{zh:""}},FULL_METAL_FIELD:{id:36982,name:"Full Metal Field",label:{zh:""}},SPREAD_SHOT:{id:2870,name:"Spread Shot",label:{zh:""}},SCATTERGUN:{id:25786,name:"Scattergun",label:{zh:""}},AUTO_CROSSBOW:{id:16497,name:"Auto Crossbow",label:{zh:""}},BIOBLASTER:{id:16499,name:"Bioblaster",label:{zh:""}},FLAMETHROWER:{id:7418,name:"Flamethrower",label:{zh:""}},DISMANTLE:{id:2887,name:"Dismantle",label:{zh:""}},TACTICIAN:{id:16889,name:"Tactician",label:{zh:""}},VOLLEY_FIRE:{id:2891,name:"Volley Fire",label:{zh:""}},ARM_PUNCH:{id:16504,name:"Arm Punch",label:{zh:""}},ROOK_OVERLOAD:{id:7416,name:"Rook Overload",label:{zh:""}},PILE_BUNKER:{id:16503,name:"Pile Bunker",label:{zh:""}},CROWNED_COLLIDER:{id:25787,name:"Crowned Collider",label:{zh:""}}}),C1=ae()({cd_REASSEMBLE:{name:"cd_Reassemble"},cd_DRILL:{name:"cd_Drill"},cd_CHECKMATE:{name:"cd_Checkmate"},cd_DOUBLE_CHECK:{name:"cd_DoubleCheck"},cd_AIR_ANCHOR:{name:"cd_AirAnchor"},cd_CHAINSAW:{name:"cd_Chainsaw",label:{zh:"CD"}},cd_BARREL_STABILIZER:{name:"cd_BarrelStabilizer"},cd_WILDFIRE:{name:"cd_Wildfire"},cd_QUEEN:{name:"cd_Queen",label:{zh:"CD"}},cd_OVERDRIVE:{name:"cd_Overdrive",label:{zh:"CD/"}},cd_DISMANTLE:{name:"cd_Dismantle"},cd_TACTICIAN:{name:"cd_Tactician"},cd_HYPERCHARGE:{name:"cd_Hypercharge"},cd_DETONATOR:{name:"cd_Detonator"},cd_FLAMETHROWER:{name:"cd_Flamethrower"}}),O1=ae()({HEAT_GAUGE:{name:"Heat",label:{zh:""}},BATTERY_GAUGE:{name:"Battery",label:{zh:""}}}),OT=ae()({REASSEMBLED:{name:"Reassembled",label:{zh:""}},OVERHEATED:{name:"Overheated",label:{zh:""},maximumStacks:5},WILDFIRE:{name:"Wildfire",label:{zh:""}},WILDFIRE_SELF:{name:"Wildfire Self",label:{zh:""}},FLAMETHROWER:{name:"Flamethrower",label:{zh:""}},BIOBLASTER:{name:"Bioblaster",label:{zh:"dot"}},TACTICIAN:{name:"Tactician",label:{zh:"buff"}},HYPERCHARGED:{name:"Hypercharged",label:{zh:""}},EXCAVATOR_READY:{name:"Excavator Ready",label:{zh:""}},FULL_METAL_MACHINIST:{name:"Full Metal Machinist",label:{zh:""}}}),b1=ae()({HEAT_COMBO:{name:"Heat Combo",label:{zh:""}},QUEEN:{name:"Queen",label:{zh:""}},QUEEN_PUNCHES:{name:"QueenPunches",label:{zh:""}},QUEEN_FINISHERS:{name:"QueenFinishers",label:{zh:""}},BATTERY_BONUS:{name:"BatteryBonus",label:{zh:""}},WILDFIRE_HITS:{name:"WildfireHits",label:{zh:""}}}),D1=ae()({CHARGED_ACTION_MASTERY:{name:"Charged Action Mastery",level:74},HOT_SHOT_MASTERY:{name:"Hot Shot Mastery",level:76},ENHANCED_WILD_FIRE:{name:"Enhanced Wildfire",level:88},PROMOTION:{name:"Promotion",level:80},SPREAD_SHOT_MASTERY:{name:"Spread Shot Mastery",level:82},ENHANCED_REASSEMBLE:{name:"Enhanced Reassemble",level:84},MARKSMANS_MASTERY:{name:"Marksman's Mastery",level:84},QUEENS_GAMBIT:{name:"Queen's Gambit",level:86},ENHANCED_TACTICIAN:{name:"Enhanced Tactician",level:88},DOUBLE_BARREL_MASTERY:{name:"Double-Barrel Mastery",level:92},ENHANCED_MULTI_WEAPON:{name:"Enhanced Multiweapon",level:94},MARKSMANS_MASTERY_II:{name:"Marksman's Mastery II",level:94},ENHANCED_MULTI_WEAPON_II:{name:"Enhanced Multiweapon II",level:96},ENHANCED_BARREL_STABILIZER:{name:"Enhanced Barrel Stabilizer",level:100}}),y1={...O1,...OT,...b1},v1=ae()({BOOTSHINE:{id:53,name:"Bootshine",label:{zh:"",ja:""}},TRUE_STRIKE:{id:54,name:"True Strike",label:{zh:"",ja:""}},SNAP_PUNCH:{id:56,name:"Snap Punch",label:{zh:"",ja:""}},TWIN_SNAKES:{id:61,name:"Twin Snakes",label:{zh:"",ja:""}},ARM_OF_THE_DESTROYER:{id:62,name:"Arm of the Destroyer",label:{zh:"",ja:""}},DEMOLISH:{id:66,name:"Demolish",label:{zh:"",ja:""}},ROCKBREAKER:{id:70,name:"Rockbreaker",label:{zh:"",ja:""}},THUNDERCLAP:{id:25762,name:"Thunderclap",label:{zh:"",ja:""}},HOWLING_FIST:{id:25763,name:"Howling Fist",label:{zh:"",ja:""}},MANTRA:{id:65,name:"Mantra",label:{zh:"",ja:""}},FOUR_POINT_FURY:{id:16473,name:"Four-point Fury",label:{zh:"",ja:""}},DRAGON_KICK:{id:74,name:"Dragon Kick",label:{zh:"",ja:""}},PERFECT_BALANCE:{id:69,name:"Perfect Balance",label:{zh:"",ja:""}},FORM_SHIFT:{id:4262,name:"Form Shift",label:{zh:"",ja:""}},FORBIDDEN_MEDITATION:{id:36942,name:"Forbidden Meditation",label:{zh:"",ja:""}},THE_FORBIDDEN_CHAKRA:{id:3547,name:"The Forbidden Chakra",label:{zh:"",ja:""}},MASTERFUL_BLITZ:{id:25764,name:"Masterful Blitz",label:{zh:"",ja:""}},TORNADO_KICK:{id:3543,name:"Tornado Kick",label:{zh:"",ja:""}},ELIXIR_FIELD:{id:3545,name:"Elixir Field",label:{zh:"",ja:""}},CELESTIAL_REVOLUTION:{id:25765,name:"Celestial Revolution",label:{zh:"",ja:""}},FLINT_STRIKE:{id:25882,name:"Flint Strike",label:{zh:"",ja:""}},RIDDLE_OF_EARTH:{id:7394,name:"Riddle of Earth",label:{zh:"",ja:""}},EARTHS_REPLY:{id:36944,name:"Earth's Reply",label:{zh:"",ja:""}},RIDDLE_OF_FIRE:{id:7395,name:"Riddle of Fire",label:{zh:"",ja:""}},BROTHERHOOD:{id:7396,name:"Brotherhood",label:{zh:"",ja:""}},RIDDLE_OF_WIND:{id:25766,name:"Riddle of Wind",label:{zh:"",ja:""}},INSPIRITED_MEDITATION:{id:36941,name:"Inspirited Meditation",label:{zh:"",ja:""}},ENLIGHTENED_MEDITATION:{id:36943,name:"Enlightened Meditation",label:{zh:"",ja:""}},ENLIGHTENMENT:{id:16474,name:"Enlightenment",label:{zh:"",ja:""}},SIX_SIDED_STAR:{id:16476,name:"Six-sided Star",label:{zh:"",ja:""}},SHADOW_OF_THE_DESTROYER:{id:25767,name:"Shadow of the Destroyer",label:{zh:"",ja:""}},RISING_PHOENIX:{id:25768,name:"Rising Phoenix",label:{zh:"",ja:""}},PHANTOM_RUSH:{id:25769,name:"Phantom Rush",label:{zh:"",ja:""}},LEAPING_OPO:{id:36945,name:"Leaping Opo",label:{zh:"",ja:""}},RISING_RAPTOR:{id:36946,name:"Rising Raptor",label:{zh:"",ja:""}},POUNCING_COEURL:{id:36947,name:"Pouncing Coeurl",label:{zh:"",ja:""}},ELIXIR_BURST:{id:36948,name:"Elixir Burst",label:{zh:"",ja:""}},WINDS_REPLY:{id:36949,name:"Wind's Reply",label:{zh:"",ja:""}},FIRES_REPLY:{id:36950,name:"Fire's Reply",label:{zh:"",ja:""}}}),M1=ae()({cd_THUNDERCLAP:{name:"cd_Thunderclap"},cd_MANTRA:{name:"cd_Mantra"},cd_PERFECT_BALANCE:{name:"cd_PerfectBalance"},cd_ENLIGHTENMENT:{name:"cd_Enlightenment"},cd_THE_FORBIDDEN_CHAKRA:{name:"cd_TheForbiddenChakra"},cd_RIDDLE_OF_EARTH:{name:"cd_RiddleOfEarth"},cd_EARTHS_REPLY:{name:"cd_EarthsReply"},cd_RIDDLE_OF_FIRE:{name:"cd_RiddleOfFire"},cd_BROTHERHOOD:{name:"cd_Brotherhood"},cd_RIDDLE_OF_WIND:{name:"cd_RiddleOfWind"}}),L1=ae()({CHAKRA:{name:"Chakra",label:{zh:""}},BEAST_CHAKRA:{name:"Beast Chakra",label:{zh:""}},BEAST_CHAKRA_TIMER:{name:"Beast Timer",label:{zh:""}},NADI:{name:"Nadi",label:{zh:"/"}},LUNAR_NADI:{name:"Lunar Nadi",label:{zh:""}},SOLAR_NADI:{name:"Solar Nadi",label:{zh:""}},OPO_OPOS_FURY:{name:"Opo-opo's Fury",label:{zh:""}},RAPTORS_FURY:{name:"Raptor's Fury",label:{zh:""}},COEURLS_FURY:{name:"Coeurl's Fury",label:{zh:""}}}),bT=ae()({MANTRA:{name:"Mantra",label:{zh:""}},OPO_OPO_FORM:{name:"Opo-opo Form",label:{zh:""}},RAPTOR_FORM:{name:"Raptor Form",label:{zh:""}},COEURL_FORM:{name:"Coeurl Form",label:{zh:""}},PERFECT_BALANCE:{name:"Perfect Balance",maximumStacks:3,label:{zh:""}},FORMLESS_FIST:{name:"Formless Fist",label:{zh:""}},RIDDLE_OF_EARTH:{name:"Riddle of Earth",label:{zh:""}},EARTHS_RESOLVE:{name:"Earth's Resolve",label:{zh:""}},EARTHS_RUMINATION:{name:"Earth's Rumination",label:{zh:""}},RIDDLE_OF_FIRE:{name:"Riddle of Fire",label:{zh:""}},FIRES_RUMINATION:{name:"Fire's Rumination",label:{zh:""}},BROTHERHOOD:{name:"Brotherhood",label:{zh:""}},MEDITATIVE_BROTHERHOOD:{name:"Meditative Brotherhood",label:{zh:""}},RIDDLE_OF_WIND:{name:"Riddle of Wind",label:{zh:""}},WINDS_RUMINATION:{name:"Wind's Rumination",label:{zh:""}},SIX_SIDED_STAR:{name:"Six-sided Star",label:{zh:""}}}),H1=ae()({BEAST_CHAKRA_1:{name:"Beast Chakra 1",label:{zh:"1"}},BEAST_CHAKRA_2:{name:"Beast Chakra 2",label:{zh:"2"}},BEAST_CHAKRA_3:{name:"Beast Chakra 3",label:{zh:"3"}}}),U1=ae()({DEEP_MEDITATION_II:{name:"Deep Meditation II",level:74},HOWLING_FIST_MASTERY:{name:"Howling Fist Mastery",level:74},ENHANCED_GREASED_LIGHTNING_III:{name:"Enhanced Greased Lightning III",level:76},ARM_OF_THE_DESTROYER_MASTERY:{name:"Arm of the Destroyer Mastery",level:82},ENHANCED_THUNDERCLAP:{name:"Enhanced Thunderclap",level:84},MELEE_MASTERY_MNK:{name:"Melee Mastery MNK",level:84},FLINT_STRIKE_MASTERY:{name:"Flint Strike Mastery",level:86},ENHANCED_BROTHERHOOD:{name:"Enhanced Brotherhood",level:88},TORNADO_KICK_MASTERY:{name:"Tornado Kick Mastery",level:90},BEAST_CHAKRA_MASTERY:{name:"Beast Chakra Mastery",level:92},MELEE_MASTERY_II_MNK:{name:"Melee Mastery II MNK",level:94},ENHANCED_RIDDLE_OF_WIND:{name:"Enhanced Riddle of Wind",level:96},ENHANCED_RIDDLE_OF_FIRE:{name:"Enhanced Riddle of Fire",level:100}}),QC={...L1,...bT,...H1},x1=ae()({SPINNING_EDGE:{id:2240,name:"Spinning Edge",label:{zh:""}},SHADE_SHIFT:{id:2241,name:"Shade Shift",label:{zh:""}},GUST_SLASH:{id:2242,name:"Gust Slash",label:{zh:""}},HIDE:{id:2245,name:"Hide",label:{zh:""}},THROWING_DAGGER:{id:2247,name:"Throwing Dagger",label:{zh:""}},TRICK_ATTACK:{id:2258,name:"Trick Attack",label:{zh:""}},AEOLIAN_EDGE:{id:2255,name:"Aeolian Edge",label:{zh:""}},TEN:{id:2259,name:"Ten",label:{zh:""}},NINJUTSU:{id:2260,name:"Ninjutsu",label:{zh:""}},CHI:{id:2261,name:"Chi",label:{zh:""}},DEATH_BLOSSOM:{id:2254,name:"Death Blossom",label:{zh:""}},SHUKUCHI:{id:2262,name:"Shukuchi",label:{zh:""}},JIN:{id:2263,name:"Jin",label:{zh:""}},KASSATSU:{id:2264,name:"Kassatsu",label:{zh:""}},HAKKE_MUJINSATSU:{id:16488,name:"Hakke Mujinsatsu",label:{zh:""}},ARMOR_CRUSH:{id:3563,name:"Armor Crush",label:{zh:""}},DREAM_WITHIN_A_DREAM:{id:3566,name:"Dream Within a Dream",label:{zh:""}},HELLFROG_MEDIUM:{id:7401,name:"Hellfrog Medium",label:{zh:""}},DOKUMORI:{id:36957,name:"Dokumori",label:{zh:""}},BHAVACAKRA:{id:7402,name:"Bhavacakra",label:{zh:""}},TEN_CHI_JIN:{id:7403,name:"Ten Chi Jin",label:{zh:""}},MEISUI:{id:16489,name:"Meisui",label:{zh:""}},BUNSHIN:{id:16493,name:"Bunshin",label:{zh:""}},PHANTOM_KAMAITACHI:{id:25774,name:"Phantom Kamaitachi",label:{zh:""}},FORKED_RAIJU:{id:25777,name:"Forked Raiju",label:{zh:""}},FLEETING_RAIJU:{id:25778,name:"Fleeting Raiju",label:{zh:""}},KUNAIS_BANE:{id:36958,name:"Kunai's Bane",label:{zh:""}},DEATHFROG_MEDIUM:{id:36959,name:"Deathfrog Medium",label:{zh:""}},ZESHO_MEPPO:{id:36960,name:"Zesho Meppo",label:{zh:""}},TENRI_JINDO:{id:36961,name:"Tenri Jindo",label:{zh:""}},KATON:{id:2266,name:"Katon",label:{zh:""}},RAITON:{id:2267,name:"Raiton",label:{zh:""}},HYOTON:{id:2268,name:"Hyoton",label:{zh:""}},HUTON:{id:2269,name:"Huton",label:{zh:""}},DOTON:{id:2270,name:"Doton",label:{zh:""}},SUITON:{id:2271,name:"Suiton",label:{zh:""}},GOKA_MEKKYAKU:{id:16491,name:"Goka Mekkyaku",label:{zh:""}},HYOSHO_RANRYU:{id:16492,name:"Hyosho Ranryu",label:{zh:""}},RABBIT_MEDIUM:{id:2272,name:"Rabbit Medium",label:{zh:""}},FUMA_SHURIKEN:{id:2265,name:"Fuma Shuriken",label:{zh:""}},FUMA_SHURIKEN_TEN:{id:18873,name:"Fuma Shuriken (Ten)",label:{zh:""}},FUMA_SHURIKEN_CHI:{id:18874,name:"Fuma Shuriken (Chi)",label:{zh:""}},FUMA_SHURIKEN_JIN:{id:18875,name:"Fuma Shuriken (Jin)",label:{zh:""}},KATON_TEN:{id:18876,name:"Katon (Ten)",label:{zh:""}},RAITON_CHI:{id:18877,name:"Raiton (Chi)",label:{zh:""}},HYOTON_JIN:{id:18878,name:"Hyoton (Jin)",label:{zh:""}},HUTON_TEN:{id:18879,name:"Huton (Ten)",label:{zh:""}},DOTON_CHI:{id:18880,name:"Doton (Chi)",label:{zh:""}},SUITON_JIN:{id:18881,name:"Suiton (Jin)",label:{zh:""}}}),k1=ae()({cd_MUDRA_HACK:{name:"cd_MudraHack"},cd_MUDRA:{name:"cd_Mudra"},cd_SHADE_SHIFT:{name:"cd_Shadeshift"},cd_HIDE:{name:"cd_Hide"},cd_TRICK_ATTACK:{name:"cd_TrickAttack"},cd_SHUKUCHI:{name:"cd_Shukuchi"},cd_KASSATSU:{name:"cd_Kassatsu"},cd_DREAM_WITHIN_A_DREAM:{name:"cd_DREAM_WITHIN_A_DREAM"},cd_DOKUMORI:{name:"cd_Dokumori"},cd_TEN_CHI_JIN:{name:"cd_TenChiJin"},cd_MEISUI:{name:"cd_Meisui"},cd_BUNSHIN:{name:"cd_Bunshin"},cd_BHAVACAKRA:{name:"cd_Bhavacakra"},cd_TENRI_JINDO:{name:"cd_TenriJindo"}}),P1=ae()({KAZEMATOI:{name:"Kazematoi",label:{zh:""}},NINKI:{name:"Ninki",label:{zh:""}}}),DT=ae()({MUDRA:{name:"Mudra",label:{zh:""}},SHADE_SHIFT:{name:"Shade Shift",label:{zh:""}},HIDDEN:{name:"Hidden",label:{zh:""}},TRICK_ATTACK:{name:"Trick Attack",label:{zh:""}},KASSATSU:{name:"Kassatsu",label:{zh:""}},DOKUMORI:{name:"Dokumori",label:{zh:""}},TENRI_JINDO_READY:{name:"Tenri Jindo Ready",label:{zh:""}},TEN_CHI_JIN:{name:"Ten Chi Jin",maximumStacks:3,label:{zh:""}},MEISUI:{name:"Meisui",label:{zh:""}},SHADOW_WALKER:{name:"Shadow Walker",label:{zh:""}},BUNSHIN:{name:"Bunshin",maximumStacks:5,label:{zh:""}},PHANTOM_KAMAITACHI_READY:{name:"Phantom Kamaitachi Ready",label:{zh:""}},RAIJU_READY:{name:"Raiju Ready",maximumStacks:3,label:{zh:""}},KUNAIS_BANE:{name:"Kunai's Bane",label:{zh:""}},HIGI:{name:"Higi",label:{zh:""}},DOTON:{name:"Doton",mayBeToggled:!0,label:{zh:""}}}),w1=ae()({NIN_COMBO_TRACKER:{name:"NIN Combo",label:{zh:""}},NIN_AOE_COMBO_TRACKER:{name:"NIN AOE Combo",label:{zh:"AOE"}},MUDRA_TRACKER:{name:"Mudra Tracker",label:{zh:""}},BUNNY:{name:"Bunny",label:{zh:""}}}),G1=ae()({ENHANCED_SHUKUCHI_II:{name:"Enhanced Shukuchi II",level:74},MELEE_MASTERY_NIN:{name:"Melee Mastery NIN",level:74},ENHANCED_KASSATSU:{name:"Enhanced Kassatsu",level:76},SHUKIHO_II:{name:"Shukiho II",level:78},SHUKIHO_III:{name:"Shukiho III",level:84},MELEE_MASTERY_II_NIN:{name:"Melee Mastery II NIN",level:84},ENHANCED_MEISUI:{name:"Enhanced Meisui",level:88},ENHANCED_RAITON:{name:"Enhanced Raiton",level:90},TRICK_ATTACK_MASTERY:{name:"Trick Attack Mastery",level:92},MELEE_MASTERY_III_NIN:{name:"Melee Mastery III NIN",level:94},ENHANCED_DOKUMORI:{name:"Enhanced Dokumori",level:96},ENHANCED_TEN_CHI_JIN:{name:"Enhanced Ten Chi Jin",level:100}}),B1={...P1,...DT,...w1},F1=ae()({FIRE_IN_RED:{id:34650,name:"Fire in Red",label:{zh:"",ja:""}},AERO_IN_GREEN:{id:34651,name:"Aero in Green",label:{zh:"",ja:""}},WATER_IN_BLUE:{id:34652,name:"Water in Blue",label:{zh:"",ja:""}},FIRE_II_IN_RED:{id:34656,name:"Fire II in Red",label:{zh:"",ja:""},discordEmote:"Fire2inRed"},AERO_II_IN_GREEN:{id:34657,name:"Aero II in Green",label:{zh:"",ja:""},discordEmote:"Aero2inGreen"},WATER_II_IN_BLUE:{id:34658,name:"Water II in Blue",label:{zh:"",ja:""},discordEmote:"Water2inBlue"},BLIZZARD_IN_CYAN:{id:34653,name:"Blizzard in Cyan",label:{zh:"",ja:""}},STONE_IN_YELLOW:{id:34654,name:"Stone in Yellow",label:{zh:"",ja:""}},THUNDER_IN_MAGENTA:{id:34655,name:"Thunder in Magenta",label:{zh:"",ja:""}},BLIZZARD_II_IN_CYAN:{id:34659,name:"Blizzard II in Cyan",label:{zh:"",ja:""},discordEmote:"Blizzard2inCyan"},STONE_II_IN_YELLOW:{id:34660,name:"Stone II in Yellow",label:{zh:"",ja:""},discordEmote:"Stone2inYellow"},THUNDER_II_IN_MAGENTA:{id:34661,name:"Thunder II in Magenta",label:{zh:"",ja:""},discordEmote:"Thunder2inMagenta"},HOLY_IN_WHITE:{id:34662,name:"Holy in White",label:{zh:"",ja:""}},COMET_IN_BLACK:{id:34663,name:"Comet in Black",label:{zh:"",ja:""}},RAINBOW_DRIP:{id:34688,name:"Rainbow Drip",label:{zh:"",ja:""}},STAR_PRISM:{id:34681,name:"Star Prism",label:{zh:"",ja:""}},TEMPERA_COAT:{id:34685,name:"Tempera Coat",label:{zh:"",ja:""}},TEMPERA_GRASSA:{id:34686,name:"Tempera Grassa",label:{zh:"",ja:""}},TEMPERA_COAT_POP:{name:"Pop Tempera Coat",label:{zh:"",ja:""}},TEMPERA_GRASSA_POP:{name:"Pop Tempera Grassa",label:{zh:"",ja:""}},SMUDGE:{id:34684,name:"Smudge",label:{zh:"",ja:""}},SUBTRACTIVE_PALETTE:{id:34683,name:"Subtractive Palette",label:{zh:"",ja:""}},CREATURE_MOTIF:{id:34689,name:"Creature Motif",label:{zh:"",ja:""}},POM_MOTIF:{id:34664,name:"Pom Motif",label:{zh:"",ja:""}},WING_MOTIF:{id:34665,name:"Wing Motif",label:{zh:"",ja:""}},CLAW_MOTIF:{id:34666,name:"Claw Motif",label:{zh:"",ja:""}},MAW_MOTIF:{id:34667,name:"Maw Motif",label:{zh:"",ja:""}},LIVING_MUSE:{id:35347,name:"Living Muse",label:{zh:"",ja:""}},POM_MUSE:{id:34670,name:"Pom Muse",label:{zh:"",ja:""}},WINGED_MUSE:{id:34671,name:"Winged Muse",label:{zh:"",ja:""}},CLAWED_MUSE:{id:34672,name:"Clawed Muse",label:{zh:"",ja:""}},FANGED_MUSE:{id:34673,name:"Fanged Muse",label:{zh:"",ja:""}},MOG_OF_THE_AGES:{id:34676,name:"Mog of the Ages",label:{zh:"",ja:""}},RETRIBUTION_OF_THE_MADEEN:{id:34677,name:"Retribution of the Madeen",label:{zh:"",ja:""}},WEAPON_MOTIF:{id:34690,name:"Weapon Motif",label:{zh:"",ja:""}},STEEL_MUSE:{id:35348,name:"Steel Muse",label:{zh:"",ja:""}},HAMMER_MOTIF:{id:34668,name:"Hammer Motif",label:{zh:"",ja:""}},STRIKING_MUSE:{id:34674,name:"Striking Muse",label:{zh:"",ja:""}},HAMMER_STAMP:{id:34678,name:"Hammer Stamp",label:{zh:"",ja:""}},HAMMER_BRUSH:{id:34679,name:"Hammer Brush",label:{zh:"",ja:""}},POLISHING_HAMMER:{id:34680,name:"Polishing Hammer",label:{zh:"",ja:""}},LANDSCAPE_MOTIF:{id:34691,name:"Landscape Motif",label:{zh:"",ja:""}},SCENIC_MUSE:{id:35349,name:"Scenic Muse",label:{zh:"",ja:""}},STARRY_SKY_MOTIF:{id:34669,name:"Starry Sky Motif",label:{zh:"",ja:""}},STARRY_MUSE:{id:34675,name:"Starry Muse",label:{zh:"",ja:""}}}),z1=ae()({cd_TEMPERA_COAT:{name:"cd_TemperaCoat"},cd_SMUDGE:{name:"cd_Smudge"},cd_LIVING_MUSE:{name:"cd_LivingMuse"},cd_PORTRAIT:{name:"cd_Portrait",label:{zh:"CD/"}},cd_STEEL_MUSE:{name:"cd_SteelMuse"},cd_SCENIC_MUSE:{name:"cd_ScenicMuse"},cd_SUBTRACTIVE:{name:"cd_Subtractive",label:{zh:"CD"}},cd_GRASSA:{name:"cd_Grassa",label:{zh:"CD"}},cd_TEMPERA_POP:{name:"cd_TemperaPop",label:{zh:"CD"}}}),j1=ae()({PORTRAIT:{name:"Portrait",label:{zh:"//"}},DEPICTIONS:{name:"Depictions",label:{zh:"///"}},CREATURE_CANVAS:{name:"Creature Canvas",label:{zh:""}},WEAPON_CANVAS:{name:"Weapon Canvas",label:{zh:""}},LANDSCAPE_CANVAS:{name:"Landscape Canvas",label:{zh:""}},PALETTE_GAUGE:{name:"Palette Gauge",label:{zh:""}},PAINT:{name:"Paint",label:{zh:""}}}),yT=ae()({AETHERHUES:{name:"Aetherhues",label:{zh:""},mayNotBeCanceled:!0,maximumStacks:2},MONOCHROME_TONES:{name:"Monochrome Tones",label:{zh:""}},SUBTRACTIVE_PALETTE:{name:"Subtractive Palette",label:{zh:""},mayNotBeCanceled:!0,maximumStacks:3},HAMMER_TIME:{name:"Hammer Time",label:{zh:""},mayNotBeCanceled:!0,maximumStacks:3},INSPIRATION:{name:"Inspiration",label:{zh:""},mayBeToggled:!0},SUBTRACTIVE_SPECTRUM:{name:"Subtractive Spectrum",label:{zh:""}},HYPERPHANTASIA:{name:"Hyperphantasia",label:{zh:""},maximumStacks:5},RAINBOW_BRIGHT:{name:"Rainbow Bright",label:{zh:""}},STARSTRUCK:{name:"Starstruck",label:{zh:""}},STARRY_MUSE:{name:"Starry Muse",label:{zh:""}},TEMPERA_COAT:{name:"Tempera Coat",label:{zh:""}},TEMPERA_GRASSA:{name:"Tempera Grassa",label:{zh:""}},SMUDGE:{name:"Smudge",label:{zh:""}}}),Y1=ae()({HAMMER_COMBO:{name:"Hammer Combo Counter",label:{zh:""}}}),K1=ae()({PICTOMANCY_MASTERY_II:{name:"Pictomancy Mastery II",level:74},ENHANCED_ARTISTRY:{name:"Enhanced Artistry",level:80},ENHANCED_PICTOMANCY:{name:"Enhanced Pictomancy",level:82},ENHANCED_SMUDGE:{name:"Enhanced Smudge",level:84},PICTOMANCY_MASTERY_III:{name:"Pictomancy Mastery III",level:84},ENHANCED_PICTOMANCY_II:{name:"Enhanced Pictomancy II",level:86},ENHANCED_TEMPERA:{name:"Enhanced Tempera",level:88},ENHANCED_PALETTE:{name:"Enhanced Palette",level:90},ENHANCED_PICTOMANCY_III:{name:"Enhanced Pictomancy III",level:92},PICTOMANCY_MASTERY_IV:{name:"Pictomancy Mastery IV",level:94},ENHANCED_PICTOMANCY_IV:{name:"Enhanced Pictomancy IV",level:96},ENHANCED_PICTOMANCY_V:{name:"Enhanced Pictomancy V",level:100}}),V1={...j1,...yT,...Y1},W1=ae()({FAST_BLADE:{id:9,name:"Fast Blade",label:{zh:""}},FIGHT_OR_FLIGHT:{id:20,name:"Fight or Flight",label:{zh:""}},RIOT_BLADE:{id:15,name:"Riot Blade",label:{zh:""}},TOTAL_ECLIPSE:{id:7381,name:"Total Eclipse",label:{zh:""}},SHIELD_BASH:{id:16,name:"Shield Bash",label:{zh:""}},IRON_WILL:{id:28,name:"Iron Will",label:{zh:""}},RELEASE_IRON_WILL:{id:32065,name:"Release Iron Will",label:{zh:""}},SHIELD_LOB:{id:24,name:"Shield Lob",label:{zh:""}},SPIRITS_WITHIN:{id:29,name:"Spirits Within",label:{zh:""}},SHELTRON:{id:3542,name:"Sheltron",label:{zh:""}},SENTINEL:{id:17,name:"Sentinel",label:{zh:""}},PROMINENCE:{id:16457,name:"Prominence",label:{zh:""}},COVER:{id:27,name:"Cover",label:{zh:""}},CIRCLE_OF_SCORN:{id:23,name:"Circle of Scorn",label:{zh:""}},HALLOWED_GROUND:{id:30,name:"Hallowed Ground",label:{zh:""}},BULWARK:{id:22,name:"Bulwark",label:{zh:""}},GORING_BLADE:{id:3538,name:"Goring Blade",label:{zh:""}},DIVINE_VEIL:{id:3540,name:"Divine Veil",label:{zh:""}},CLEMENCY:{id:3541,name:"Clemency",label:{zh:""}},ROYAL_AUTHORITY:{id:3539,name:"Royal Authority",label:{zh:""}},INTERVENTION:{id:7382,name:"Intervention",label:{zh:""}},HOLY_SPIRIT:{id:7384,name:"Holy Spirit",label:{zh:""}},INTERVENE:{id:16461,name:"Intervene",label:{zh:""}},REQUIESCAT:{id:7383,name:"Requiescat",label:{zh:""}},PASSAGE_OF_ARMS:{id:7385,name:"Passage of Arms",label:{zh:""}},HOLY_CIRCLE:{id:16458,name:"Holy Circle",label:{zh:""}},ATONEMENT:{id:16460,name:"Atonement",label:{zh:""}},SUPPLICATION:{id:36918,name:"Supplication",label:{zh:"2"}},SEPULCHRE:{id:36919,name:"Sepulchre",label:{zh:"3"}},CONFITEOR:{id:16459,name:"Confiteor",label:{zh:""}},HOLY_SHELTRON:{id:25746,name:"Holy Sheltron",label:{zh:""}},EXPIACION:{id:25747,name:"Expiacion",label:{zh:""}},BLADE_OF_FAITH:{id:25748,name:"Blade of Faith",label:{zh:"2"}},BLADE_OF_TRUTH:{id:25749,name:"Blade of Truth",label:{zh:"3"}},BLADE_OF_VALOR:{id:25750,name:"Blade of Valor",label:{zh:"4"}},GUARDIAN:{id:36920,name:"Guardian",label:{zh:""}},IMPERATOR:{id:36921,name:"Imperator",label:{zh:""}},BLADE_OF_HONOR:{id:36922,name:"Blade of Honor",label:{zh:""}}}),X1=ae()({cd_FIGHT_OR_FLIGHT:{name:"cd_FightOrFlight"},cd_IRON_WILL:{name:"cd_IronWill"},cd_RELEASE_IRON_WILL:{name:"cd_ReleaseIronWill"},cd_SPIRITS_WITHIN:{name:"cd_SpiritsWithin"},cd_SHELTRON:{name:"cd_Sheltron"},cd_SENTINEL:{name:"cd_Sentinel"},cd_COVER:{name:"cd_Cover"},cd_CIRCLE_OF_SCORN:{name:"cd_CircleOfScorn"},cd_HALLOWED_GROUND:{name:"cd_HallowedGround"},cd_BULWARK:{name:"cd_Bulwark"},cd_DIVINE_VEIL:{name:"cd_DivineVeil"},cd_INTERVENTION:{name:"cd_Intervention"},cd_INTERVENE:{name:"cd_Intervene"},cd_REQUIESCAT:{name:"cd_Requiescat"},cd_PASSAGE_OF_ARMS:{name:"cd_PassageOfArms"},cd_HOLY_SHELTRON:{name:"cd_HolySheltron"},cd_EXPIACION:{name:"cd_Expiacion"},cd_GUARDIAN:{name:"cd_Guardian"},cd_IMPERATOR:{name:"cd_Imperator"},cd_BLADE_OF_HONOR:{name:"cd_BladeOfHonor"}}),q1=ae()({OATH_GAUGE:{name:"Oath Gauge",label:{zh:""}}}),vT=ae()({FIGHT_OR_FLIGHT:{name:"Fight or Flight",label:{zh:""}},IRON_WILL:{name:"Iron Will",label:{zh:""}},CIRCLE_OF_SCORN_DOT:{name:"Circle of Scorn DoT",label:{zh:"DOT"}},SHELTRON:{name:"Sheltron",label:{zh:""}},SENTINEL:{name:"Sentinel",label:{zh:""}},COVER:{name:"Cover",label:{zh:""}},HALLOWED_GROUND:{name:"Hallowed Ground",label:{zh:""}},BULWARK:{name:"Bulwark",label:{zh:""}},GORING_BLADE_READY:{name:"Goring Blade Ready",label:{zh:""}},DIVINE_VEIL:{name:"Divine Veil",label:{zh:""}},ATONEMENT_READY:{name:"Atonement Ready",label:{zh:""}},DIVINE_MIGHT:{name:"Divine Might",label:{zh:""}},INTERVENTION:{name:"Intervention",label:{zh:""}},KNIGHTS_RESOLVE:{name:"Knight's Resolve",label:{zh:""}},KNIGHTS_BENEDICTION:{name:"Knight's Benediction",label:{zh:""}},REQUIESCAT:{name:"Requiescat",maximumStacks:4,label:{zh:""}},CONFITEOR_READY:{name:"Confiteor Ready",label:{zh:""}},PASSAGE_OF_ARMS:{name:"Passage of Arms",label:{zh:""}},ARMS_UP:{name:"Arms Up",label:{zh:""}},SUPPLICATION_READY:{name:"Supplication Ready",label:{zh:""}},SEPULCHRE_READY:{name:"Sepulchre Ready",label:{zh:""}},HOLY_SHELTRON:{name:"Holy Sheltron",label:{zh:""}},BLADE_OF_HONOR_READY:{name:"Blade of Honor Ready",label:{zh:""}},GUARDIAN:{name:"Guardian",label:{zh:""}},GUARDIANS_WILL:{name:"Guardian's Will",label:{zh:""}}}),Z1=ae()({PLD_COMBO_TRACKER:{name:"PLD Combo Tracker",label:{zh:""}},PLD_CONFITEOR_COMBO_TRACKER:{name:"PLD Confiteor Combo Tracker",label:{zh:""}},PLD_AOE_COMBO_TRACKER:{name:"PLD AOE Combo Tracker",label:{zh:"AOE"}}}),Q1=ae()({ENHANCED_PROMINENCE:{name:"Enhanced Prominence",level:72},ENHANCED_SHELTRON:{name:"Enhanced Sheltron",level:74},SWORD_OATH:{name:"Sword Oath",level:76},ENHANCED_REQUIESCAT:{name:"Enhanced Requiescat",level:80},SHELTRON_MASTERY:{name:"Sheltron Mastery",level:82},ENHANCED_INTERVENTION:{name:"Enhanced Intervention",level:82},DIVINE_MAGIC_MASTERY_II:{name:"Divine Magic Mastery II",level:84},SPIRITS_WITHIN_MASTERY:{name:"Spirits Within Mastery",level:86},ENHANCED_DIVINE_VEIL:{name:"Enhanced Divine Veil",level:88},SENTINEL_MASTERY:{name:"Sentinel Mastery",level:92},REQUIESCAT_MASTERY:{name:"Requiescat Mastery",level:96},ENHANCED_BLADE_OF_VALOR:{name:"Enhanced Blade of Valor",level:100}}),$1={...q1,...vT,...Z1},J1=ae()({RIPOSTE:{id:7504,name:"Riposte",label:{zh:"",ja:""}},VERTHUNDER:{id:7505,name:"Verthunder",label:{zh:"",ja:""}},CORPS_A_CORPS:{id:7506,name:"Corps-a-corps",label:{zh:"",ja:""}},VERAERO:{id:7507,name:"Veraero",label:{zh:"",ja:""}},VERFIRE:{id:7510,name:"Verfire",label:{zh:"",ja:""}},VERSTONE:{id:7511,name:"Verstone",label:{zh:"",ja:""}},ZWERCHHAU:{id:7512,name:"Zwerchhau",label:{zh:"",ja:""}},DISPLACEMENT:{id:7515,name:"Displacement",label:{zh:"",ja:""}},FLECHE:{id:7517,name:"Fleche",label:{zh:"",ja:""}},REDOUBLEMENT:{id:7516,name:"Redoublement",label:{zh:"",ja:""}},ACCELERATION:{id:7518,name:"Acceleration",label:{zh:"",ja:""}},MOULINET:{id:7513,name:"Moulinet",label:{zh:"",ja:""}},VERCURE:{id:7514,name:"Vercure",label:{zh:"",ja:""}},CONTRE_SIXTE:{id:7519,name:"Contre Sixte",label:{zh:"",ja:""}},EMBOLDEN:{id:7520,name:"Embolden",label:{zh:"",ja:""}},MANAFICATION:{id:7521,name:"Manafication",label:{zh:"",ja:""}},JOLT_II:{id:7524,name:"Jolt II",label:{zh:"",ja:""}},VERRAISE:{id:7523,name:"Verraise",label:{zh:"",ja:""}},IMPACT:{id:16526,name:"Impact",label:{zh:"",ja:""}},VERFLARE:{id:7525,name:"Verflare",label:{zh:"",ja:""}},VERHOLY:{id:7526,name:"Verholy",label:{zh:"",ja:""}},ENCHANTED_RIPOSTE:{id:7527,name:"Enchanted Riposte",label:{zh:"",ja:""}},ENCHANTED_ZWERCHHAU:{id:7528,name:"Enchanted Zwerchhau",label:{zh:"",ja:""}},ENCHANTED_REDOUBLEMENT:{id:7529,name:"Enchanted Redoublement",label:{zh:"",ja:""}},ENCHANTED_MOULINET:{id:7530,name:"Enchanted Moulinet",label:{zh:"",ja:""}},VERTHUNDER_II:{id:16524,name:"Verthunder II",label:{zh:"",ja:""}},VERAERO_II:{id:16525,name:"Veraero II",label:{zh:"",ja:""}},ENGAGEMENT:{id:16527,name:"Engagement",label:{zh:"",ja:""}},ENCHANTED_REPRISE:{id:16528,name:"Enchanted Reprise",label:{zh:"",ja:""}},REPRISE:{id:16529,name:"Reprise",label:{zh:"",ja:""}},SCORCH:{id:16530,name:"Scorch",label:{zh:"",ja:""}},VERTHUNDER_III:{id:25855,name:"Verthunder III",label:{zh:"",ja:""}},VERAERO_III:{id:25856,name:"Veraero III",label:{zh:"",ja:""}},MAGICK_BARRIER:{id:25857,name:"Magick Barrier",label:{zh:"",ja:""}},RESOLUTION:{id:25858,name:"Resolution",label:{zh:"",ja:""}},ENCHANTED_MOULINET_II:{id:37002,name:"Enchanted Moulinet Deux",label:{zh:"",ja:""}},ENCHANTED_MOULINET_III:{id:37003,name:"Enchanted Moulinet Trois",label:{zh:"",ja:""}},JOLT_III:{id:37004,name:"Jolt III",label:{zh:"",ja:""}},VICE_OF_THORNS:{id:37005,name:"Vice of Thorns",label:{zh:"",ja:""}},GRAND_IMPACT:{id:37006,name:"Grand Impact",label:{zh:"",ja:""}},PREFULGENCE:{id:37007,name:"Prefulgence",label:{zh:"",ja:""}}}),eH=ae()({cd_CORPS_A_CORPS:{name:"cd_CorpsACorps"},cd_DISPLACEMENT:{name:"cd_Displacement"},cd_FLECHE:{name:"cd_Fleche"},cd_ACCELERATION:{name:"cd_Acceleration"},cd_CONTRE_SIXTE:{name:"cd_ContreSixte"},cd_EMBOLDEN:{name:"cd_Embolden"},cd_MANAFICATION:{name:"cd_Manafication"},cd_MAGICK_BARRIER:{name:"cd_MagickBarrier"},cd_VICE_OF_THORNS:{name:"cd_ViceOfThorns"},cd_PREFULGENCE:{name:"cd_Prefulgence"}}),tH=ae()({WHITE_MANA:{name:"White Mana",label:{zh:""}},BLACK_MANA:{name:"Black Mana",label:{zh:""}},MANA_STACKS:{name:"Mana Stacks",label:{zh:""}}}),MT=ae()({ACCELERATION:{name:"Acceleration",label:{zh:""}},DUALCAST:{name:"Dualcast",label:{zh:""}},EMBOLDEN:{name:"Embolden",label:{zh:""}},GRAND_IMPACT_READY:{name:"Grand Impact Ready",label:{zh:""}},MAGICK_BARRIER:{name:"Magick Barrier",label:{zh:""}},MAGICKED_SWORDPLAY:{name:"Magicked Swordplay",label:{zh:""},maximumStacks:3},MANAFICATION:{name:"Manafication",label:{zh:""},maximumStacks:6},PREFULGENCE_READY:{name:"Prefulgence Ready",label:{zh:""}},THORNED_FLOURISH:{name:"Thorned Flourish",label:{zh:""}},VERFIRE_READY:{name:"Verfire Ready",label:{zh:""}},VERSTONE_READY:{name:"Verstone Ready",label:{zh:""}}}),nH=ae()({RDM_MELEE_COUNTER:{name:"RDM Melee Combo",label:{zh:""}},RDM_FINISHER_COUNTER:{name:"RDM Finisher Combo",label:{zh:"/"}},RDM_AOE_COUNTER:{name:"RDM AoE Combo",label:{zh:"AOE"}}}),aH=ae()({ENHANCED_DISPLACEMENT:{name:"Enhanced Displacement",level:72},RED_MAGIC_MASTERY:{name:"Red Magic Mastery",level:74},ENHANCED_MANAFICATION:{name:"Enhanced Manafication",level:78},RED_MAGIC_MASTERY_II:{name:"Red Magic Mastery II",level:82},RED_MAGIC_MASTERY_III:{name:"Red Magic Mastery III",level:84},ENHANCED_ACCELERATION:{name:"Enhanced Acceleration",level:88},ENHANCED_MANAFICATION_II:{name:"Enhanced Manafication II",level:90},ENHANCED_EMBOLDEN:{name:"Enhanced Embolden",level:92},ENCHANTED_BLADE_MASTERY:{name:"Enchanted Blade Mastery",level:94},ENHANCED_ACCELERATION_II:{name:"Enhanced Acceleration II",level:96},ENHANCED_MANAFICATION_III:{name:"Enhanced Manafication III",level:100}}),iH={...tH,...MT,...nH},oH=ae()({SLICE:{id:24373,name:"Slice",label:{zh:""}},WAXING_SLICE:{id:24374,name:"Waxing Slice",label:{zh:""}},INFERNAL_SLICE:{id:24375,name:"Infernal Slice",label:{zh:""}},SHADOW_OF_DEATH:{id:24378,name:"Shadow of Death",label:{zh:""}},SOUL_SLICE:{id:24380,name:"Soul Slice",label:{zh:""}},GIBBET:{id:24382,name:"Gibbet",label:{zh:""}},GALLOWS:{id:24383,name:"Gallows",label:{zh:""}},EXECUTIONERS_GIBBET:{id:36970,name:"Executioner's Gibbet",label:{zh:""}},EXECUTIONERS_GALLOWS:{id:36971,name:"Executioner's Gallows",label:{zh:""}},VOID_REAPING:{id:24395,name:"Void Reaping",label:{zh:""}},CROSS_REAPING:{id:24396,name:"Cross Reaping",label:{zh:""}},PLENTIFUL_HARVEST:{id:24385,name:"Plentiful Harvest",label:{zh:""}},HARVEST_MOON:{id:24388,name:"Harvest Moon",label:{zh:""}},COMMUNIO:{id:24398,name:"Communio",label:{zh:""}},PERFECTIO:{id:36973,name:"Perfectio",label:{zh:""}},SOULSOW:{id:24387,name:"Soulsow",label:{zh:""}},HARPE:{id:24386,name:"Harpe",label:{zh:""}},BLOOD_STALK:{id:24389,name:"Blood Stalk",label:{zh:""}},UNVEILED_GIBBET:{id:24390,name:"Unveiled Gibbet",label:{zh:""}},UNVEILED_GALLOWS:{id:24391,name:"Unveiled Gallows",label:{zh:""}},LEMURES_SLICE:{id:24399,name:"Lemure's Slice",label:{zh:""}},SACRIFICIUM:{id:36969,name:"Sacrificium",label:{zh:""}},ARCANE_CIRCLE:{id:24405,name:"Arcane Circle",label:{zh:""}},GLUTTONY:{id:24393,name:"Gluttony",label:{zh:""}},ENSHROUD:{id:24394,name:"Enshroud",label:{zh:""}},SPINNING_SCYTHE:{id:24376,name:"Spinning Scythe",label:{zh:""}},NIGHTMARE_SCYTHE:{id:24377,name:"Nightmare Scythe",label:{zh:""}},WHORL_OF_DEATH:{id:24379,name:"Whorl of Death",label:{zh:""}},SOUL_SCYTHE:{id:24381,name:"Soul Scythe",label:{zh:""}},GUILLOTINE:{id:24384,name:"Guillotine",label:{zh:""}},EXECUTIONERS_GUILLOTINE:{id:36972,name:"Executioner's Guillotine",label:{zh:""}},GRIM_REAPING:{id:24397,name:"Grim Reaping",label:{zh:""}},GRIM_SWATHE:{id:24392,name:"Grim Swathe",label:{zh:""}},LEMURES_SCYTHE:{id:24400,name:"Lemure's Scythe",label:{zh:""}},ARCANE_CREST:{id:24404,name:"Arcane Crest",label:{zh:""}},ARCANE_CREST_POP:{name:"Pop Arcane Crest",label:{zh:""}},HELLS_INGRESS:{id:24401,name:"Hell's Ingress",label:{zh:""}},HELLS_EGRESS:{id:24402,name:"Hell's Egress",label:{zh:""}},REGRESS:{id:24403,name:"Regress",label:{zh:""}},GAIN_SOUL_GAUGE:{name:"+10 Soul Gauge",label:{zh:"+10"}}}),lH=ae()({cd_ARCANE_CIRCLE:{name:"cd_ArcaneCircle"},cd_GLUTTONY:{name:"cd_Gluttony"},cd_SOUL_SLICE:{name:"cd_SoulSlice"},cd_ENSHROUD:{name:"cd_Enshroud"},cd_INGRESS_EGRESS:{name:"cd_IngressEgress",label:{zh:"CD/"}},cd_ARCANE_CREST:{name:"cd_ArcaneCrest"},cd_ARCANE_CREST_POP:{name:"cd_ArcaneCrestPop"},cd_BLOOD_STALK:{name:"cd_BloodStalk"},cd_LEMURES_SLICE:{name:"cd_LemuresSlice"},cd_SACRIFICIUM:{name:"cd_Sacrificium"},cd_GAIN_SOUL_GAUGE:{name:"cd_GainSoulGauge"}}),sH=ae()({SOUL:{name:"Soul",label:{zh:""}},SHROUD:{name:"Shroud",label:{zh:""}},LEMURE_SHROUD:{name:"Lemure Shroud",label:{zh:""}},VOID_SHROUD:{name:"Void Shroud",label:{zh:""}}}),LT=ae()({DEATHS_DESIGN:{name:"Death's Design",label:{zh:""}},SOUL_REAVER:{name:"Soul Reaver",label:{zh:""},maximumStacks:2},ENHANCED_GIBBET:{name:"Enhanced Gibbet",label:{zh:""}},ENHANCED_GALLOWS:{name:"Enhanced Gallows",label:{zh:""}},EXECUTIONER:{name:"Executioner",label:{zh:""},maximumStacks:2},ENSHROUDED:{name:"Enshrouded",label:{zh:""}},ENHANCED_VOID_REAPING:{name:"Enhanced Void Reaping",label:{zh:""}},ENHANCED_CROSS_REAPING:{name:"Enhanced Cross Reaping",label:{zh:""}},OBLATIO:{name:"Oblatio",label:{zh:""}},IDEAL_HOST:{name:"Ideal Host",label:{zh:""}},PERFECTIO_OCCULTA:{name:"Perfectio Occulta",label:{zh:""}},PERFECTIO_PARATA:{name:"Perfectio Parata",label:{zh:""}},ARCANE_CIRCLE:{name:"Arcane Circle",label:{zh:""}},CIRCLE_OF_SACRIFICE:{name:"Circle of Sacrifice",label:{zh:""}},BLOODSOWN_CIRCLE:{name:"Bloodsown Circle",label:{zh:""}},IMMORTAL_SACRIFICE:{name:"Immortal Sacrifice",label:{zh:""},maximumStacks:8},CREST_OF_TIME_BORROWED:{name:"Crest of Time Borrowed",label:{zh:""}},CREST_OF_TIME_RETURNED:{name:"Crest of Time Returned",label:{zh:""}},SOULSOW:{name:"Soulsow",label:{zh:""}},THRESHOLD:{name:"Threshold",label:{zh:""}},ENHANCED_HARPE:{name:"Enhanced Harpe",label:{zh:""}}}),rH=ae()({ARCANE_CREST:{name:"Arcane Crest",label:{zh:""}},HELLS_INGRESS_USED:{name:"Hell's Ingress Used",label:{zh:""}},RPR_COMBO:{name:"RPR Combo",label:{zh:""}},RPR_AOE_COMBO:{name:"RPR AoE Combo",label:{zh:"AOE"}}}),cH=ae()({HELLSGATE:{name:"Hellsgate",level:74},TEMPERED_SOUL:{name:"Tempered Soul",level:78},SHROUD_GAUGE:{name:"Shroud Gauge",level:80},ENHANCED_ARCANE_CREST:{name:"Enhanced Arcane Crest",level:84},MELEE_MASTERY_II_RPR:{name:"Melee Mastery II",level:84},VOID_SOUL:{name:"Void Soul",level:86},ENHANCED_ARCANE_CIRCLE:{name:"Enhanced Arcane Circle",level:88},ENHANCED_ENSHROUD:{name:"Enhanced Enshroud",level:92},MELEE_MASTERY_III_RPR:{name:"Melee Mastery III",level:94},ENHANCED_GLUTTONY:{name:"Enhanced Gluttony",level:96},ENHANCED_PLENTIFUL_HARVEST:{name:"Enhanced Plentiful Harvest",level:100}}),uH={...sH,...LT,...rH},dH=ae()({ENPI:{id:7486,name:"Enpi",label:{zh:""}},HAKAZE:{id:7477,name:"Hakaze",label:{zh:""}},GYOFU:{id:36963,name:"Gyofu",label:{zh:""}},YUKIKAZE:{id:7480,name:"Yukikaze",label:{zh:""}},JINPU:{id:7478,name:"Jinpu",label:{zh:""}},GEKKO:{id:7481,name:"Gekko",label:{zh:""}},SHIFU:{id:7479,name:"Shifu",label:{zh:""}},KASHA:{id:7482,name:"Kasha",label:{zh:""}},FUGA:{id:7483,name:"Fuga",label:{zh:""}},FUKO:{id:25780,name:"Fuko",label:{zh:""}},MANGETSU:{id:7484,name:"Mangetsu",label:{zh:""}},OKA:{id:7485,name:"Oka",label:{zh:""}},MEIKYO_SHISUI:{id:7499,name:"Meikyo Shisui",label:{zh:""}},IKISHOTEN:{id:16482,name:"Ikishoten",label:{zh:""}},HISSATSU_SHINTEN:{id:7490,name:"Hissatsu: Shinten",label:{zh:""}},HISSATSU_KYUTEN:{id:7491,name:"Hissatsu: Kyuten",label:{zh:""}},HISSATSU_GYOTEN:{id:7492,name:"Hissatsu: Gyoten",label:{zh:""}},HISSATSU_YATEN:{id:7493,name:"Hissatsu: Yaten",label:{zh:""}},HISSATSU_SENEI:{id:16481,name:"Hissatsu: Senei",label:{zh:""}},HISSATSU_GUREN:{id:7496,name:"Hissatsu: Guren",label:{zh:""}},HAGAKURE:{id:7495,name:"Hagakure",label:{zh:""}},IAIJUTSU:{id:7867,name:"Iaijutsu",label:{zh:""}},TSUBAME_GAESHI:{id:16483,name:"Tsubame-gaeshi",label:{zh:""}},SHOHA:{id:16487,name:"Shoha",label:{zh:""}},THIRD_EYE:{id:7498,name:"Third Eye",label:{zh:""}},TENGENTSU:{id:36962,name:"Tengentsu",label:{zh:""}},OGI_NAMIKIRI:{id:25781,name:"Ogi Namikiri",label:{zh:""}},KAESHI_NAMIKIRI:{id:25782,name:"Kaeshi: Namikiri",label:{zh:""}},ZANSHIN:{id:36964,name:"Zanshin",label:{zh:""}},MEDITATE:{id:7497,name:"Meditate",label:{zh:""}},HIGANBANA:{id:7489,name:"Higanbana",label:{zh:""}},TENKA_GOKEN:{id:7488,name:"Tenka Goken",label:{zh:""}},KAESHI_GOKEN:{id:16485,name:"Kaeshi: Goken",label:{zh:""}},TENDO_GOKEN:{id:36965,name:"Tendo Goken",label:{zh:""}},TENDO_KAESHI_GOKEN:{id:36967,name:"Tendo Kaeshi Goken",label:{zh:""}},MIDARE_SETSUGEKKA:{id:7487,name:"Midare Setsugekka",label:{zh:""}},KAESHI_SETSUGEKKA:{id:16486,name:"Kaeshi: Setsugekka",label:{zh:""}},TENDO_SETSUGEKKA:{id:36966,name:"Tendo Setsugekka",label:{zh:""}},TENDO_KAESHI_SETSUGEKKA:{id:36968,name:"Tendo Kaeshi Setsugekka",label:{zh:""}},THIRD_EYE_POP:{name:"Pop Third Eye",label:{zh:""}},TENGENTSU_POP:{name:"Pop Tengentsu",label:{zh:""}}}),hH=ae()({cd_YATEN:{name:"cd_Yaten",label:{zh:"CD"}},cd_GYOTEN:{name:"cd_Gyoten",label:{zh:"CD"}},cd_SENEI_GUREN:{name:"cd_Senei",label:{zh:"CD: /"}},cd_SHINTEN:{name:"cd_Shinten",label:{zh:"CD"}},cd_KYUTEN:{name:"cd_Kyuten",label:{zh:"CD"}},cd_MEDITATE:{name:"cd_Meditate"},cd_IKISHOTEN:{name:"cd_Ikishoten"},cd_ZANSHIN:{name:"cd_Zanshin"},cd_HAGAKURE:{name:"cd_Hagakure"},cd_SHOHA:{name:"cd_Shoha"},cd_MEIKYO_SHISUI:{name:"cd_MeikyoShisui"},cd_THIRD_EYE:{name:"cd_ThirdEye"},cd_THIRD_EYE_POP:{name:"cd_ThirdEyePop"}}),EH=ae()({KENKI:{name:"Kenki",label:{zh:""}},SETSU:{name:"Setsu",label:{zh:""}},GETSU:{name:"Getsu",label:{zh:""}},KA_SEN:{name:"Ka",label:{zh:""}},MEDITATION:{name:"Meditation",label:{zh:""}}}),HT=ae()({MEIKYO_SHISUI:{name:"Meikyo Shisui",label:{zh:""},maximumStacks:3},FUGETSU:{name:"Fugetsu",label:{zh:""}},FUKA:{name:"Fuka",label:{zh:""}},ZANSHIN_READY:{name:"Zanshin Ready",label:{zh:""}},TENDO:{name:"Tendo",label:{zh:""}},OGI_READY:{name:"Ogi Namikiri Ready",label:{zh:""}},TSUBAME_GAESHI_READY:{name:"Tsubame-gaeshi Ready",label:{zh:""}},THIRD_EYE:{name:"Third Eye",label:{zh:""}},TENGENTSU:{name:"Tengentsu",label:{zh:""}},TENGENTSUS_FORESIGHT:{name:"Tengentsu's Foresight",label:{zh:""}},MEDITATE:{name:"Meditate",label:{zh:""}},ENHANCED_ENPI:{name:"Enhanced Enpi",label:{zh:""}},HIGANBANA_DOT:{name:"HiganbanaDoT",label:{zh:"dot"}}}),fH=ae()({SAM_TWO_READY:{name:"SAMTwoReady",label:{zh:"2"}},SAM_TWO_AOE_READY:{name:"SAMTwoAoeReady",label:{zh:"AOE2"}},GEKKO_READY:{name:"GekkoReady",label:{zh:""}},KASHA_READY:{name:"KashaReady",label:{zh:""}},KAESHI_OGI_READY:{name:"KaeshiOgiReady",label:{zh:""}},KAESHI_TRACKER:{name:"KaeshiTracker",label:{zh:""}}}),AH=ae()({ENHANCED_IAIJUTSU:{name:"Enhanced Iaijutsu",level:74},ENHANCED_MEIKYO_SHISUI:{name:"Enhanced Meikyo Shisui",level:76},ENHANCED_FUGETSU_AND_FUKA:{name:"Enhanced Fugetsu and Fuka",level:78},THIRD_EYE_MASTERY:{name:"Third Eye Mastery",level:82},WAY_OF_THE_SAMURAI_II:{name:"Way of the Samurai II",level:84},FUGA_MASTERY:{name:"Fuga Mastery",level:86},ENHANCED_IKISHOTEN:{name:"Enhanced Ikishoten",level:90},HAKAZE_MASTERY:{name:"Hakaze Mastery",level:92},ENHANCED_HISSATSU:{name:"Enhanced Hissatsu",level:94},WAY_OF_THE_SAMURAI_III:{name:"Way of the Samurai III",level:94},ENHANCED_IKISHOTEN_II:{name:"Enhanced Ikishoten II",level:96},ENHANCED_MEIKYO_SHISUI_II:{name:"Enhanced Meikyo Shisui II",level:100}}),mH={...EH,...HT,...fH},UT=ae()({PHYSICK:{id:190,name:"Physick",label:{zh:"",ja:""}},SUMMON_EOS:{id:17215,name:"Summon Eos",label:{zh:"",ja:""}},RESURRECTION:{id:173,name:"Resurrection",label:{zh:"",ja:""}},WHISPERING_DAWN:{id:16537,name:"Whispering Dawn",label:{zh:"",ja:""}},BIO_II:{id:17865,name:"Bio II",label:{zh:"",ja:""}},ADLOQUIUM:{id:185,name:"Adloquium",label:{zh:"",ja:""}},SUCCOR:{id:186,name:"Succor",label:{zh:"",ja:""}},RUIN_II:{id:17870,name:"Ruin II",label:{zh:"",ja:""}},FEY_ILLUMINATION:{id:16538,name:"Fey Illumination",label:{zh:"",ja:""}},AETHERFLOW:{id:166,name:"Aetherflow",label:{zh:"",ja:""}},ENERGY_DRAIN:{id:167,name:"Energy Drain",label:{zh:"",ja:""}},LUSTRATE:{id:189,name:"Lustrate",label:{zh:"",ja:""}},ART_OF_WAR:{id:16539,name:"Art of War",label:{zh:"",ja:""}},SACRED_SOIL:{id:188,name:"Sacred Soil",label:{zh:"",ja:""}},INDOMITABILITY:{id:3583,name:"Indomitability",label:{zh:"",ja:""}},DEPLOYMENT_TACTICS:{id:3585,name:"Deployment Tactics",label:{zh:"",ja:""}},EMERGENCY_TACTICS:{id:3586,name:"Emergency Tactics",label:{zh:"",ja:""}},DISSIPATION:{id:3587,name:"Dissipation",label:{zh:"",ja:""}},EXCOGITATION:{id:7434,name:"Excogitation",label:{zh:"",ja:""}},BROIL_II:{id:7435,name:"Broil II",label:{zh:"",ja:""}},CHAIN_STRATAGEM:{id:7436,name:"Chain Stratagem",label:{zh:"",ja:""}},AETHERPACT:{id:7437,name:"Aetherpact",label:{zh:"",ja:""}},DISSOLVE_UNION:{id:7869,name:"Dissolve Union",label:{zh:"",ja:""}},BIOLYSIS:{id:16540,name:"Biolysis",label:{zh:"",ja:""}},BROIL_III:{id:16541,name:"Broil III",label:{zh:"",ja:""}},RECITATION:{id:16542,name:"Recitation",label:{zh:"",ja:""}},FEY_BLESSING:{id:16543,name:"Fey Blessing",label:{zh:"",ja:""}},SUMMON_SERAPH:{id:16545,name:"Summon Seraph",label:{zh:"",ja:""}},CONSOLATION:{id:16546,name:"Consolation",label:{zh:"",ja:""}},BROIL_IV:{id:25865,name:"Broil IV",label:{zh:"",ja:""}},ART_OF_WAR_II:{id:25866,name:"Art of War II",label:{zh:"",ja:""}},PROTRACTION:{id:25867,name:"Protraction",label:{zh:"",ja:""}},EXPEDIENT:{id:25868,name:"Expedient",label:{zh:"",ja:""}},BANEFUL_IMPACTION:{id:37012,name:"Baneful Impaction",label:{zh:"",ja:""}},CONCITATION:{id:37013,name:"Concitation",label:{zh:"",ja:""}},SERAPHISM:{id:37014,name:"Seraphism",label:{zh:"",ja:""}},MANIFESTATION:{id:37015,name:"Manifestation",label:{zh:"",ja:""}},ACCESSION:{id:37016,name:"Accession",label:{zh:"",ja:""}},ANGELS_WHISPER:{name:"Angel's Whisper",label:{zh:""}}}),RH=ae()({cd_WHISPERING_DAWN:{name:"cd_WhisperingDawn"},cd_FEY_ILLUMINATION:{name:"cd_FeyIllumination"},cd_AETHERFLOW:{name:"cd_Aetherflow"},cd_ENERGY_DRAIN:{name:"cd_EnergyDrain"},cd_LUSTRATE:{name:"cd_Lustrate"},cd_SACRED_SOIL:{name:"cd_SacredSoil"},cd_INDOMITABILITY:{name:"cd_Indomitability"},cd_DEPLOYMENT_TACTICS:{name:"cd_DeploymentTactics"},cd_EMERGENCY_TACTICS:{name:"cd_EmergencyTactics"},cd_DISSIPATION:{name:"cd_Dissipation"},cd_EXCOGITATION:{name:"cd_Excogitation"},cd_CHAIN_STRATAGEM:{name:"cd_ChainStratagem"},cd_AETHERPACT:{name:"cd_Aetherpact"},cd_DISSOLVE_UNION:{name:"cd_DissolveUnion"},cd_RECITATION:{name:"cd_Recitation"},cd_FEY_BLESSING:{name:"cd_FeyBlessing"},cd_SUMMON_SERAPH:{name:"cd_SummonSeraph"},cd_CONSOLATION:{name:"cd_Consolation"},cd_CONSOLATION_INTERNAL:{name:"cd_ConsolationInternal"},cd_PROTRACTION:{name:"cd_Protraction"},cd_EXPEDIENT:{name:"cd_Expedient"},cd_BANEFUL_IMPACTION:{name:"cd_BanefulImpaction"},cd_SERAPHISM:{name:"cd_Seraphism"}}),TH=ae()({AETHERFLOW:{name:"Aetherflow",maximumCharges:3,label:{zh:""}},FAERIE_GAUGE:{name:"Faerie Gauge",maximumStacks:100,label:{zh:""}}}),xT=ae()({BIO_II:{name:"Bio II",label:{zh:""}},CATALYZE:{name:"Catalyze",label:{zh:""}},GALVANIZE:{name:"Galvanize",label:{zh:""}},WHISPERING_DAWN:{name:"Whispering Dawn",label:{zh:""}},ANGELS_WHISPER:{name:"Angel's Whisper",label:{zh:""}},FEY_ILLUMINATION:{name:"Fey Illumination",label:{zh:""}},SERAPHIC_ILLUMINATION:{name:"Seraphic Illumination",label:{zh:""}},SACRED_SOIL_MIT:{name:"Sacred Soil (Mitigation)",label:{zh:"[]"},mayNotBeCanceled:!0},SACRED_SOIL_ZONE:{name:"Sacred Soil",label:{zh:""},mayBeToggled:!0},EMERGENCY_TACTICS:{name:"Emergency Tactics",label:{zh:""}},DISSIPATION:{name:"Dissipation",label:{zh:""},mayNotBeCanceled:!0},EXCOGITATION:{name:"Excogitation",label:{zh:""}},CHAIN_STRATAGEM:{name:"Chain Stratagem",label:{zh:""}},IMPACT_IMMINENT:{name:"Impact Imminent",label:{zh:""}},BIOLYSIS:{name:"Biolysis",label:{zh:""}},RECITATION:{name:"Recitation",label:{zh:""}},FEY_UNION:{name:"Fey Union",label:{zh:""}},SERAPHIC_VEIL:{name:"Seraphic Veil",label:{zh:""}},PROTRACTION:{name:"Protraction",label:{zh:""}},EXPEDIENCE:{name:"Expedience",label:{zh:""}},DESPERATE_MEASURES:{name:"Desperate Measures",label:{zh:""}},BANEFUL_IMPACTION:{name:"Baneful Impaction",label:{zh:""}},SERAPHISM:{name:"Seraphism",label:{zh:""},mayNotBeCanceled:!0},SERAPHISM_REGEN:{name:"Seraphism (Regen)",label:{zh:"[]"}}}),SH=ae()({SERAPH_SUMMON_TIMER:{name:"Seraph Summon Timer",label:{zh:""}}}),IH=ae()({CORRUPTION_MASTERY_II:{name:"Corruption Mastery II",level:72},BROIL_MASTERY_III:{name:"Broil Mastery III",level:72},ENHANCED_SACRED_SOIL:{name:"Enhanced Sacred Soil",level:78},BROIL_MASTERY_IV:{name:"Broil Mastery IV",level:82},ART_OF_WAR_MASTERY:{name:"Art of War Mastery",level:82},ENHANCED_DEPLOYMENT_TACTICS:{name:"Enhanced Deployment Tactics",level:88},ENHANCED_CHAIN_STRATAGEM:{name:"Enhanced Chain Stratagem",level:92},TACTICIANS_MASTERY:{name:"Tactician's Mastery",level:94},SUCCOR_MASTERY:{name:"Succor Mastery",level:96},ENHANCED_RECITATION:{name:"Enhanced Recitation",level:98}}),_H={...TH,...xT,...SH},gH=ae()({DIAGNOSIS:{id:24284,name:"Diagnosis",label:{zh:""}},EUKRASIAN_DIAGNOSIS:{id:24291,name:"Eukrasian Diagnosis",label:{zh:""}},EUKRASIAN_DIAGNOSIS_POP:{name:"Pop Eukrasian Diagnosis",label:{zh:""}},HAIMA:{id:24305,name:"Haima",label:{zh:""}},HAIMA_POP:{name:"Pop Haima",label:{zh:""}},EGEIRO:{id:24287,name:"Egeiro",label:{zh:""}},PROGNOSIS:{id:24286,name:"Prognosis",label:{zh:""}},EUKRASIAN_PROGNOSIS:{id:24292,name:"Eukrasian Prognosis",label:{zh:""}},EUKRASIAN_PROGNOSIS_II:{id:37034,name:"Eukrasian Prognosis II",label:{zh:" II"}},EUKRASIAN_PROGNOSIS_POP:{name:"Pop Eukrasian Prognosis",label:{zh:""}},EUKRASIAN_PROGNOSIS_II_POP:{name:"Pop Eukrasian Prognosis II",label:{zh:" II "}},PANHAIMA:{id:24311,name:"Panhaima",label:{zh:""}},PANHAIMA_POP:{name:"Pop Panhaima",label:{zh:""}},PHYSIS_II:{id:24302,name:"Physis II",label:{zh:" II"}},HOLOS:{id:24310,name:"Holos",label:{zh:""}},PEPSIS:{id:24301,name:"Pepsis",label:{zh:""}},KARDIA:{id:24285,name:"Kardia",label:{zh:""}},EUKRASIA:{id:24290,name:"Eukrasia",label:{zh:""}},SOTERIA:{id:24294,name:"Soteria",label:{zh:""}},ICARUS:{id:24295,name:"Icarus",label:{zh:""}},ZOE:{id:24300,name:"Zoe",label:{zh:""}},KRASIS:{id:24317,name:"Krasis",label:{zh:""}},PHILOSOPHIA:{id:37035,name:"Philosophia",label:{zh:""}},RHIZOMATA:{id:24309,name:"Rhizomata",label:{zh:""}},DRUOCHOLE:{id:24296,name:"Druochole",label:{zh:""}},IXOCHOLE:{id:24299,name:"Ixochole",label:{zh:""}},KERACHOLE:{id:24298,name:"Kerachole",label:{zh:""}},TAUROCHOLE:{id:24303,name:"Taurochole",label:{zh:""}},DOSIS:{id:24283,name:"Dosis",label:{zh:""}},DOSIS_II:{id:24306,name:"Dosis II",label:{zh:" II"}},DOSIS_III:{id:24312,name:"Dosis III",label:{zh:" III"}},EUKRASIAN_DOSIS:{id:24293,name:"Eukrasian Dosis",label:{zh:""}},EUKRASIAN_DOSIS_II:{id:24308,name:"Eukrasian Dosis II",label:{zh:" II"}},EUKRASIAN_DOSIS_III:{id:24314,name:"Eukrasian Dosis III",label:{zh:" III"}},TOXIKON:{id:24304,name:"Toxikon",label:{zh:""}},TOXIKON_II:{id:24316,name:"Toxikon II",label:{zh:" II"}},DYSKRASIA:{id:24297,name:"Dyskrasia",label:{zh:""}},DYSKRASIA_II:{id:24315,name:"Dyskrasia II",label:{zh:" II"}},EUKRASIAN_DYSKRASIA:{id:37032,name:"Eukrasian Dyskrasia",label:{zh:""}},PHLEGMA:{id:24289,name:"Phlegma",label:{zh:""}},PHLEGMA_II:{id:24307,name:"Phlegma II",label:{zh:" II"}},PHLEGMA_III:{id:24313,name:"Phlegma III",label:{zh:" III"}},PSYCHE:{id:37033,name:"Psyche",label:{zh:""}},PNEUMA:{id:24318,name:"Pneuma",label:{zh:""}}}),NH=ae()({cd_HAIMA:{name:"cd_Haima"},cd_PANHAIMA:{name:"cd_PANHAIMA"},cd_PHYSIS:{name:"cd_PHYSIS",label:{zh:"CD"}},cd_HOLOS:{name:"cd_HOLOS"},cd_PEPSIS:{name:"cd_PEPSIS"},cd_KARDIA:{name:"cd_KARDIA"},cd_EUKRASIA:{name:"cd_EUKRASIA"},cd_SOTERIA:{name:"cd_SOTERIA"},cd_ICARUS:{name:"cd_ICARUS"},cd_ZOE:{name:"cd_ZOE"},cd_KRASIS:{name:"cd_KRASIS"},cd_PHILOSOPHIA:{name:"cd_PHILOSOPHIA"},cd_RHIZOMATA:{name:"cd_RHIZOMATA"},cd_DRUOCHOLE:{name:"cd_DRUOCHOLE"},cd_IXOCHOLE:{name:"cd_IXOCHOLE"},cd_KERACHOLE:{name:"cd_KERACHOLE"},cd_TAUROCHOLE:{name:"cd_TAUROCHOLE"},cd_PHLEGMA:{name:"cd_PHLEGMA"},cd_PSYCHE:{name:"cd_PSYCHE"},cd_PNEUMA:{name:"cd_PNEUMA"},cd_DIAGNOSIS_POP:{name:"cd_DIAGNOSIS_POP",label:{zh:"CD"}},cd_PROGNOSIS_POP:{name:"cd_PROGNOSIS_POP",label:{zh:"CD"}},cd_HAIMA_POP:{name:"cd_HAIMA_POP"},cd_PANHAIMA_POP:{name:"cd_PANHAIMA_POP"}}),pH=ae()({ADDERSGALL:{name:"Addersgall",label:{zh:""}},ADDERSTING:{name:"Addersting",label:{zh:""}}}),$C=ae()({EUKRASIA:{id:2606,name:"Eukrasia",label:{zh:""}},EUKRASIAN_DIAGNOSIS:{id:2607,name:"Eukrasian Diagnosis",label:{zh:""}},DIFFERENTIAL_DIAGNOSIS:{id:2608,name:"Differential Diagnosis",label:{zh:""}},HAIMA:{id:2612,name:"Haima",label:{zh:""},mayNotBeCanceled:!0},HAIMATINON:{id:2642,name:"Haimatinon",label:{zh:""},maximumStacks:5,mayNotBeCanceled:!0},EUKRASIAN_PROGNOSIS:{id:2609,name:"Eukrasian Prognosis",label:{zh:""}},PANHAIMA:{id:2613,name:"Panhaima",label:{zh:""},mayNotBeCanceled:!0},PANHAIMATINON:{id:2643,name:"Panhaimatinon",label:{zh:""},maximumStacks:5,mayNotBeCanceled:!0},PHYSIS_II:{id:2620,name:"Physis II",label:{zh:" II"}},AUTOPHYSIS:{id:2621,name:"Autophysis",label:{zh:""}},KARDIA:{id:2604,name:"Kardia",label:{zh:""}},KARDION:{id:2605,name:"Kardion",label:{zh:""}},PHILOSOPHIA:{id:3898,name:"Philosophia",label:{zh:""}},EUDAIMONIA:{id:3899,name:"Eudaimonia",label:{zh:""}},SOTERIA:{id:2610,name:"Soteria",label:{zh:""},maximumStacks:4},ZOE:{id:2611,name:"Zoe",label:{zh:""}},KRASIS:{id:2622,name:"Krasis",label:{zh:""}},KERACHOLE:{id:2618,name:"Kerachole",label:{zh:""}},KERAKEIA:{id:2938,name:"Kerakeia",label:{zh:"[]"}},TAUROCHOLE:{id:2619,name:"Taurochole",label:{zh:""}},EUKRASIAN_DOSIS:{id:2614,name:"Eukrasian Dosis",label:{zh:""}},EUKRASIAN_DOSIS_II:{id:2615,name:"Eukrasian Dosis II",label:{zh:" II"}},EUKRASIAN_DOSIS_III:{id:2616,name:"Eukrasian Dosis III",label:{zh:" III"}},EUKRASIAN_DYSKRASIA:{id:3897,name:"Eukrasian Dyskrasia",label:{zh:""}},PNEUMA:{id:2623,name:"Pneuma",label:{zh:""}},HOLOS:{id:3003,name:"Holos",label:{zh:""}},HOLOSAKOS:{id:3365,name:"Holosakos",label:{zh:""}}}),CH=ae()({PEPSIS:{name:"Pepsis",label:{zh:""}}}),OH=ae()({OFFENSIVE_MAGIC_MASTERY:{name:"Offensive Magic Mastery",level:72},OFFENSIVE_MAGIC_MASTERY_II:{name:"Offensive Magic Mastery II",level:82},ENHANCED_KERACHOLE:{name:"Enhanced Kerachole",level:78},ENHANCED_ZOE:{name:"Enhanced Zoe",level:88},ENHANCED_SOTERIA:{name:"Enhanced Soteria",level:94},EUKRASIAN_PROGNOSIS_MASTERY:{name:"Eukrasian Prognosis Mastery",level:96},ENHANCED_PHYSIS_II:{name:"Enhanced Physis II",level:98}}),bH={...pH,...$C,...CH},DH=ae()({SUMMON_CARBUNCLE:{id:25798,name:"Summon Carbuncle",label:{zh:""}},RADIANT_AEGIS:{id:25799,name:"Radiant Aegis",label:{zh:""}},PHYSICK:{id:16230,name:"Physick",label:{zh:""}},GEMSHINE:{id:25883,name:"Gemshine",label:{zh:""}},FESTER:{id:181,name:"Fester",label:{zh:""}},ENERGY_DRAIN:{id:16508,name:"Energy Drain",label:{zh:""}},RESURRECTION:{id:173,name:"Resurrection",label:{zh:""}},OUTBURST:{id:16511,name:"Outburst",label:{zh:""}},PRECIOUS_BRILLIANCE:{id:25884,name:"Precious Brilliance",label:{zh:""}},RUBY_OUTBURST:{id:25814,name:"Ruby Outburst",label:{zh:""}},TOPAZ_OUTBURST:{id:25815,name:"Topaz Outburst",label:{zh:""}},EMERALD_OUTBURST:{id:25816,name:"Emerald Outburst",label:{zh:""}},SUMMON_IFRIT:{id:25805,name:"Summon Ifrit",label:{zh:""}},PAINFLARE:{id:3578,name:"Painflare",label:{zh:""}},SUMMON_TITAN:{id:25806,name:"Summon Titan",label:{zh:""}},SUMMON_GARUDA:{id:25807,name:"Summon Garuda",label:{zh:""}},ENERGY_SIPHON:{id:16510,name:"Energy Siphon",label:{zh:""}},RUBY_RUIN_III:{id:25817,name:"Ruby Ruin III",label:{zh:""}},TOPAZ_RUIN_III:{id:25818,name:"Topaz Ruin III",label:{zh:""}},EMERALD_RUIN_III:{id:25819,name:"Emerald Ruin III",label:{zh:""}},RUIN_III:{id:3579,name:"Ruin III",label:{zh:""}},ASTRAL_IMPULSE:{id:25820,name:"Astral Impulse",label:{zh:""}},ASTRAL_FLARE:{id:25821,name:"Astral Flare",label:{zh:""}},ASTRAL_FLOW:{id:25822,name:"Astral Flow",label:{zh:""}},DEATHFLARE:{id:3582,name:"Deathflare",label:{zh:""}},RUIN_IV:{id:7426,name:"Ruin IV",label:{zh:""}},SEARING_LIGHT:{id:25801,name:"Searing Light",label:{zh:""}},SUMMON_BAHAMUT:{id:7427,name:"Summon Bahamut",label:{zh:""}},ENKINDLE_BAHAMUT:{id:7429,name:"Enkindle Bahamut",label:{zh:""}},RUBY_RITE:{id:25823,name:"Ruby Rite",label:{zh:""}},TOPAZ_RITE:{id:25824,name:"Topaz Rite",label:{zh:""}},EMERALD_RITE:{id:25825,name:"Emerald Rite",label:{zh:""}},TRI_DISASTER:{id:25826,name:"Tri-disaster",label:{zh:""}},RUBY_DISASTER:{id:25827,name:"Ruby Disaster",label:{zh:""}},TOPAZ_DISASTER:{id:25828,name:"Topaz Disaster",label:{zh:""}},EMERALD_DISASTER:{id:25829,name:"Emerald Disaster",label:{zh:""}},SUMMON_PHOENIX:{id:25831,name:"Summon Phoenix",label:{zh:""}},FOUNTAIN_OF_FIRE:{id:16514,name:"Fountain of Fire",label:{zh:""}},BRAND_OF_PURGATORY:{id:16515,name:"Brand of Purgatory",label:{zh:""}},REKINDLE:{id:25830,name:"Rekindle",label:{zh:""}},ENKINDLE_PHOENIX:{id:16516,name:"Enkindle Phoenix",label:{zh:""}},RUBY_CATASTROPHE:{id:25832,name:"Ruby Catastrophe",label:{zh:""}},TOPAZ_CATASTROPHE:{id:25833,name:"Topaz Catastrophe",label:{zh:""}},EMERALD_CATASTROPHE:{id:25834,name:"Emerald Catastrophe",label:{zh:""}},CRIMSON_CYCLONE:{id:25835,name:"Crimson Cyclone",label:{zh:""}},CRIMSON_STRIKE:{id:25885,name:"Crimson Strike",label:{zh:""}},MOUNTAIN_BUSTER:{id:25836,name:"Mountain Buster",label:{zh:""}},SLIPSTREAM:{id:25837,name:"Slipstream",label:{zh:""}},SUMMON_IFRIT_II:{id:25838,name:"Summon Ifrit II",label:{zh:" II"}},SUMMON_TITAN_II:{id:25839,name:"Summon Titan II",label:{zh:" II"}},SUMMON_GARUDA_II:{id:25840,name:"Summon Garuda II",label:{zh:" II"}},NECROTIZE:{id:36990,name:"Necrotize",label:{zh:""}},SEARING_FLASH:{id:36991,name:"Searing Flash",label:{zh:""}},SUMMON_SOLAR_BAHAMUT:{id:36992,name:"Summon Solar Bahamut",label:{zh:""}},UMBRAL_IMPULSE:{id:36994,name:"Umbral Impulse",label:{zh:""}},UMBRAL_FLARE:{id:36995,name:"Umbral Flare",label:{zh:""}},SUNFLARE:{id:36996,name:"Sunflare",label:{zh:""}},ENKINDLE_SOLAR_BAHAMUT:{id:36998,name:"Enkindle Solar Bahamut",label:{zh:""}},LUX_SOLARIS:{id:36997,name:"Lux Solaris",label:{zh:""}},INFERNO:{id:25852,name:"Inferno",label:{zh:""}},EARTHEN_FURY:{id:25853,name:"Earthen Fury",label:{zh:""}},AERIAL_BLAST:{id:25854,name:"Aerial Blast",label:{zh:""}},WYRMWAVE:{id:7428,name:"Wyrmwave",label:{zh:""}},SCARLET_FLAME:{id:16519,name:"Scarlet Flame",label:{zh:""}},LUXWAVE:{id:36993,name:"Luxwave",label:{zh:""}},AKH_MORN:{id:7449,name:"Akh Morn",label:{zh:""}},REVELATION:{id:16518,name:"Revelation",label:{zh:""}},EXODUS:{id:36999,name:"Exodus",label:{zh:""}}}),yH=ae()({cd_RADIANT_AEGIS:{name:"cd_RADIANT_AEGIS"},cd_ASTRAL_FLOW:{name:"cd_ASTRAL_FLOW"},cd_ENKINDLE:{name:"cd_ENKINDLE",label:{zh:"CD//"}},cd_DEMI_SUMMON:{name:"cd_DEMI_SUMMON",label:{zh:"CD"}},cd_ENERGY_DRAIN:{name:"cd_ENERGY_DRAIN"},cd_AETHERFLOW:{name:"cd_AETHERFLOW",label:{zh:"CD"}},cd_SEARING_LIGHT:{name:"cd_SEARING_LIGHT"},cd_SEARING_FLASH:{name:"cd_SEARING_FLASH"},cd_LUX_SOLARIS:{name:"cd_LUX_SOLARIS"},cd_MOUNTAIN_BUSTER:{name:"cd_MOUNTAIN_BUSTER"},cd_SUMMON_LOCKOUT:{name:"cd_SUMMON_LOCKOUT"}}),vH=ae()({AETHERFLOW:{name:"Aetherflow",label:{zh:""}},RUBY_ARCANUM:{name:"Ruby Arcanum",label:{zh:""}},TOPAZ_ARCANUM:{name:"Topaz Arcanum",label:{zh:""}},EMERALD_ARCANUM:{name:"Emerald Arcanum",label:{zh:""}},FIRE_ATTUNEMENT:{name:"Fire Attunement",label:{zh:""}},EARTH_ATTUNEMENT:{name:"Earth Attunement",label:{zh:""}},WIND_ATTUNEMENT:{name:"Wind Attunement",label:{zh:""}},ACTIVE_DEMI:{name:"Active Demi",label:{zh:""}}}),kT=ae()({AETHERFLOW:{name:"Aetherflow",maximumStacks:2,label:{zh:""}},CRIMSON_STRIKE_READY:{name:"Crimson Strike Ready",label:{zh:""}},EVERLASTING_FLIGHT:{name:"Everlasting Flight",label:{zh:""}},FURTHER_RUIN:{name:"Further Ruin",label:{zh:""}},GARUDAS_FAVOR:{name:"Garuda's Favor",label:{zh:""}},IFRITS_FAVOR:{name:"Ifrit's Favor",label:{zh:""}},RADIANT_AEGIS:{name:"Radiant Aegis",label:{zh:""}},REFULGENT_LUX:{name:"Refulgent Lux",label:{zh:""}},REKINDLE:{name:"Rekindle",label:{zh:""}},RUBYS_GLIMMER:{name:"Ruby's Glimmer",label:{zh:""}},SEARING_LIGHT:{name:"Searing Light",label:{zh:""}},SLIPSTREAM:{name:"Slipstream",mayBeToggled:!0,label:{zh:""}},TITANS_FAVOR:{name:"Titan's Favor",label:{zh:""}},UNDYING_FLAME:{name:"Undying Flame",label:{zh:""}}}),MH=ae()({NEXT_DEMI_CYCLE:{name:"Next Demi Cycle",label:{zh:""}},DEMI_AUTO:{name:"Demi Auto-attack",label:{zh:""}}}),LH=ae()({RUIN_MASTERY_III:{name:"Ruin Mastery III",level:72},OUTBURST_MASTERY:{name:"Outburst Mastery",level:74},ENHANCED_SUMMON_BAHAMUT:{name:"Enhanced Summon Bahamut",level:80},OUTBURST_MASTERY_II:{name:"Outburst Mastery II",level:82},RUIN_MASTERY_IV:{name:"Ruin Mastery IV",level:84},ELEMENTAL_MASTERY:{name:"Elemental Mastery",level:86},ENHANCED_RADIANT_AEGIS:{name:"Enhanced Radiant Aegis",level:88},ENKINDLE_II:{name:"Enkindle II",level:90},ENHANCED_FESTER:{name:"Enhanced Fester",level:92},ARCANE_MASTERY:{name:"Arcane Mastery",level:94},ENHANCED_SEARING_LIGHT:{name:"Enhanced Searing Light",level:96},ENHANCED_SUMMON_BAHAMUT_II:{name:"Enhanced Summon Bahamut II",level:100}}),HH={...vH,...kT,...MH},UH=ae()({STEEL_FANGS:{id:34606,name:"Steel Fangs",label:{zh:"",ja:""}},HUNTERS_STING:{id:34608,name:"Hunter's Sting",label:{zh:"",ja:""}},REAVING_FANGS:{id:34607,name:"Reaving Fangs",label:{zh:"",ja:""}},WRITHING_SNAP:{id:34632,name:"Writhing Snap",label:{zh:"",ja:""}},SWIFTSKINS_STING:{id:34609,name:"Swiftskin's Sting",label:{zh:"",ja:""}},STEEL_MAW:{id:34614,name:"Steel Maw",label:{zh:"",ja:""}},FLANKSTING_STRIKE:{id:34610,name:"Flanksting Strike",label:{zh:"",ja:""}},FLANKSBANE_FANG:{id:34611,name:"Flanksbane Fang",label:{zh:"",ja:""}},HINDSTING_STRIKE:{id:34612,name:"Hindsting Strike",label:{zh:"",ja:""}},HINDSBANE_FANG:{id:34613,name:"Hindsbane Fang",label:{zh:"",ja:""}},REAVING_MAW:{id:34615,name:"Reaving Maw",label:{zh:"",ja:""}},SLITHER:{id:34646,name:"Slither",label:{zh:"",ja:""}},HUNTERS_BITE:{id:34616,name:"Hunter's Bite",label:{zh:"",ja:""}},SWIFTSKINS_BITE:{id:34617,name:"Swiftskin's Bite",label:{zh:"",ja:""}},JAGGED_MAW:{id:34618,name:"Jagged Maw",label:{zh:"",ja:""}},BLOODIED_MAW:{id:34619,name:"Bloodied Maw",label:{zh:"",ja:""}},SERPENTS_TAIL:{id:35920,name:"Serpent's Tail",label:{zh:"",ja:""}},DEATH_RATTLE:{id:34634,name:"Death Rattle",label:{zh:"",ja:""}},LAST_LASH:{id:34635,name:"Last Lash",label:{zh:"",ja:""}},VICEWINDER:{id:34620,name:"Vicewinder",label:{zh:"",ja:""}},HUNTERS_COIL:{id:34621,name:"Hunter's Coil",label:{zh:"",ja:""}},SWIFTSKINS_COIL:{id:34622,name:"Swiftskin's Coil",label:{zh:"",ja:""}},VICEPIT:{id:34623,name:"Vicepit",label:{zh:"",ja:""}},HUNTERS_DEN:{id:34624,name:"Hunter's Den",label:{zh:"",ja:""}},SWIFTSKINS_DEN:{id:34625,name:"Swiftskin's Den",label:{zh:"",ja:""}},TWINFANG:{id:35921,name:"Twinfang",label:{zh:"",ja:""}},TWINBLOOD:{id:35922,name:"Twinblood",label:{zh:"",ja:""}},TWINFANG_BITE:{id:34636,name:"Twinfang Bite",label:{zh:"",ja:""}},TWINBLOOD_BITE:{id:34637,name:"Twinblood Bite",label:{zh:"",ja:""}},TWINFANG_THRESH:{id:34638,name:"Twinfang Thresh",label:{zh:"",ja:""}},TWINBLOOD_THRESH:{id:34639,name:"Twinblood Thresh",label:{zh:"",ja:""}},UNCOILED_FURY:{id:34633,name:"Uncoiled Fury",label:{zh:"",ja:""}},SERPENTS_IRE:{id:34647,name:"Serpent's Ire",label:{zh:"",ja:""}},REAWAKEN:{id:34626,name:"Reawaken",label:{zh:"",ja:""}},FIRST_GENERATION:{id:34627,name:"First Generation",label:{zh:"",ja:""}},SECOND_GENERATION:{id:34628,name:"Second Generation",label:{zh:"",ja:""}},THIRD_GENERATION:{id:34629,name:"Third Generation",label:{zh:"",ja:""}},FOURTH_GENERATION:{id:34630,name:"Fourth Generation",label:{zh:"",ja:""}},UNCOILED_TWINFANG:{id:34644,name:"Uncoiled Twinfang",label:{zh:"",ja:""}},UNCOILED_TWINBLOOD:{id:34645,name:"Uncoiled Twinblood",label:{zh:"",ja:""}},OUROBOROS:{id:34631,name:"Ouroboros",label:{zh:"",ja:""}},FIRST_LEGACY:{id:34640,name:"First Legacy",label:{zh:"",ja:""}},SECOND_LEGACY:{id:34641,name:"Second Legacy",label:{zh:"",ja:""}},THIRD_LEGACY:{id:34642,name:"Third Legacy",label:{zh:"",ja:""}},FOURTH_LEGACY:{id:34643,name:"Fourth Legacy",label:{zh:"",ja:""}}}),xH=ae()({cd_SERPENTS_IRE:{name:"cd_SerpentsIre"},cd_VICEWINDER:{name:"cd_Vicewinder"},cd_SLITHER:{name:"cd_Slither"},cd_SERPENTS_TAIL:{name:"cd_SerpentsTail"},cd_TWINFANG:{name:"cd_Twinfang"},cd_TWINBLOOD:{name:"cd_Twinblood"}}),kH=ae()({RATTLING_COIL:{name:"Rattling Coil",label:{zh:""}},SERPENT_OFFERINGS:{name:"Serpent Offerings",label:{zh:""}},ANGUINE_TRIBUTE:{name:"Anguine Tribute",label:{zh:""}}}),PT=ae()({HUNTERS_INSTINCT:{name:"Hunter's Instinct",label:{zh:""}},SWIFTSCALED:{name:"Swiftscaled",label:{zh:""}},HONED_STEEL:{name:"Honed Steel",label:{zh:""}},HONED_REAVERS:{name:"Honed Reavers",label:{zh:""}},FLANKSTUNG_VENOM:{name:"Flankstung Venom",label:{zh:""}},HINDSTUNG_VENOM:{name:"Hindstung Venom",label:{zh:""}},FLANKSBANE_VENOM:{name:"Flanksbane Venom",label:{zh:""}},HINDSBANE_VENOM:{name:"Hindsbane Venom",label:{zh:""}},GRIMSKINS_VENOM:{name:"Grimskin's Venom",label:{zh:""}},GRIMHUNTERS_VENOM:{name:"Grimhunter's Venom",label:{zh:""}},HUNTERS_VENOM:{name:"Hunter's Venom",label:{zh:""}},SWIFTSKINS_VENOM:{name:"Swiftskin's Venom",label:{zh:""}},POISED_FOR_TWINFANG:{name:"Poised for Twinfang",label:{zh:""}},POISED_FOR_TWINBLOOD:{name:"Poised for Twinblood",label:{zh:""}},FELLHUNTERS_VENOM:{name:"Fellhunter's Venom",label:{zh:""}},FELLSKINS_VENOM:{name:"Fellskin's Venom",label:{zh:""}},READY_TO_REAWAKEN:{name:"Ready to Reawaken",label:{zh:""}},REAWAKENED:{name:"Reawakened",label:{zh:""},mayNotBeCanceled:!0}}),PH=ae()({VPR_COMBO:{name:"VPR Combo"},DEATH_RATTLE_READY:{name:"Death Rattle Ready"},VPR_AOE_COMBO:{name:"VPR AoE Combo"},LAST_LASH_READY:{name:"Last Lash Ready"},HUNTERS_COIL_READY:{name:"Hunter's Coil Ready"},SWIFTSKINS_COIL_READY:{name:"Swiftskin's Coil Ready"},COIL_OGCD_READY:{name:"Coil oGCD Ready"},HUNTERS_DEN_READY:{name:"Hunter's Den Ready"},SWIFTSKINS_DEN_READY:{name:"Swiftskin's Den Ready"},DEN_OGCD_READY:{name:"Den oGCD Ready"},UNCOILED_OGCD_READY:{name:"Uncoiled oGCD Ready"},REAWAKEN_COMBO:{name:"Reawaken Combo"},LEGACY_READY:{name:"Legacy Ready"}}),wH=ae()({MELEE_MASTERY_VPR:{name:"Melee Mastery VPR",level:74},VIPERS_BITE:{name:"Viper's Bite",level:75},VIPERS_THRESH:{name:"Viper's Thresh",level:80},VIPERS_RATTLE:{name:"Viper's Rattle",level:82},ENHANCED_SLITHER:{name:"Enhanced Slither",level:84},MELEE_MASTERY_II_VPR:{name:"Melee Mastery II VPR",level:84},ENHANCED_VIPERS_RATTLE:{name:"Enhanced Viper's Rattle",level:88},SERPENTS_LINEAGE:{name:"Serpent's Lineage",level:90},UNCOILED_FANGS:{name:"Uncoiled Fangs",level:92},ENHANCED_SERPENTS_LINEAGE:{name:"Enhanced Serpent's Lineage",level:96},SERPENTS_LEGACY:{name:"Serpent's Legacy",level:100}}),GH={...kH,...PT,...PH},BH=ae()({HEAVY_SWING:{id:31,name:"Heavy Swing",label:{zh:""}},MAIM:{id:37,name:"Maim",label:{zh:""}},STORMS_PATH:{id:42,name:"Storm's Path",label:{zh:""}},STORMS_EYE:{id:45,name:"Storm's Eye",label:{zh:""}},FELL_CLEAVE:{id:3549,name:"Fell Cleave",label:{zh:""}},UPHEAVAL:{id:7387,name:"Upheaval",label:{zh:""}},ONSLAUGHT:{id:7386,name:"Onslaught",label:{zh:""}},TOMAHAWK:{id:46,name:"Tomahawk",label:{zh:""}},OVERPOWER:{id:41,name:"Overpower",label:{zh:""}},MYTHRIL_TEMPEST:{id:16462,name:"Mythril Tempest",label:{zh:""}},DECIMATE:{id:3550,name:"Decimate",label:{zh:""}},OROGENY:{id:25752,name:"Orogeny",label:{zh:""}},INNER_RELEASE:{id:7389,name:"Inner Release",label:{zh:""}},PRIMAL_WRATH:{id:36924,name:"Primal Wrath",label:{zh:""}},PRIMAL_REND:{id:25753,name:"Primal Rend",label:{zh:""}},PRIMAL_RUINATION:{id:36925,name:"Primal Ruination",label:{zh:""}},INFURIATE:{id:52,name:"Infuriate",label:{zh:""}},INNER_CHAOS:{id:16465,name:"Inner Chaos",label:{zh:""}},CHAOTIC_CYCLONE:{id:16463,name:"Chaotic Cyclone",label:{zh:""}},THRILL_OF_BATTLE:{id:40,name:"Thrill of Battle",label:{zh:""}},EQUILIBRIUM:{id:3552,name:"Equilibrium",label:{zh:""}},SHAKE_IT_OFF:{id:7388,name:"Shake It Off",label:{zh:""}},RAW_INTUITION:{id:3551,name:"Raw Intuition",label:{zh:""}},NASCENT_FLASH:{id:16464,name:"Nascent Flash",label:{zh:""}},BLOODWHETTING:{id:25751,name:"Bloodwhetting",label:{zh:""}},VENGEANCE:{id:44,name:"Vengeance",label:{zh:""}},DAMNATION:{id:36923,name:"Damnation",label:{zh:""}},HOLMGANG:{id:43,name:"Holmgang",label:{zh:""}},DEFIANCE:{id:48,name:"Defiance",label:{zh:""}},RELEASE_DEFIANCE:{id:32066,name:"Release Defiance",label:{zh:""}}}),FH=ae()({cd_INNER_RELEASE:{name:"cd_InnerRelease"},cd_PRIMAL_WRATH:{name:"cd_PrimalWrath"},cd_UPHEAVAL:{name:"cd_Upheaval"},cd_ONSLAUGHT:{name:"cd_Onslaught"},cd_INFURIATE:{name:"cd_Infuriate"},cd_VENGEANCE:{name:"cd_Vengeance"},cd_THRILL_OF_BATTLE:{name:"cd_ThrillOfBattle"},cd_RAW_INTUITION:{name:"cd_RawIntuition"},cd_EQUILIBRIUM:{name:"cd_Equilibrium"},cd_SHAKE_IT_OFF:{name:"cd_ShakeItOff"},cd_HOLMGANG:{name:"cd_Holmgang"},cd_DEFIANCE:{name:"cd_Defiance"},cd_RELEASE_DEFIANCE:{name:"cd_ReleaseDefiance"}}),zH=ae()({BEAST_GAUGE:{name:"Beast Gauge",label:{zh:""}}}),wT=ae()({SURGING_TEMPEST:{name:"Surging Tempest",label:{zh:"buff"}},INNER_RELEASE:{name:"Inner Release",label:{zh:"buff"},maximumStacks:3},INNER_STRENGTH:{name:"Inner Strength",label:{zh:"buff"}},BURGEONING_FURY:{name:"Burgeoning Fury",label:{zh:"buff"},maximumStacks:3},WRATHFUL:{name:"Wrathful",label:{zh:""}},PRIMAL_REND_READY:{name:"Primal Rend Ready",label:{zh:""}},PRIMAL_RUINATION_READY:{name:"Primal Ruination Ready",label:{zh:""}},NASCENT_CHAOS:{name:"Nascent Chaos",label:{zh:"buff"}},NASCENT_FLASH:{name:"Nascent Flash",label:{zh:"buff"}},THRILL_OF_BATTLE:{name:"Thrill of Battle",label:{zh:""}},EQUILIBRIUM:{name:"Equilibrium",label:{zh:"hot"}},SHAKE_IT_OFF:{name:"Shake It Off",label:{zh:""}},SHAKE_IT_OFF_OVER_TIME:{name:"Shake It Off Over Time",label:{zh:"hot"}},RAW_INTUITION:{name:"Raw Intuition",label:{zh:"buff"}},STEM_THE_TIDE:{name:"Stem the Tide",label:{zh:"buff"}},STEM_THE_FLOW:{name:"Stem the Flow",label:{zh:"buff"}},BLOODWHETTING:{name:"Bloodwhetting",label:{zh:"buff"}},VENGEANCE:{name:"Vengeance",label:{zh:"30"}},DAMNATION:{name:"Damnation",label:{zh:"40"}},PRIMEVAL_IMPULSE:{name:"Primeval Impulse",label:{zh:"hot"}},HOLMGANG:{name:"Holmgang",label:{zh:"buff"}},DEFIANCE:{name:"Defiance",label:{zh:"buff"},mayNotBeCanceled:!0}}),jH=ae()({STORM_COMBO:{name:"Storm Combo",label:{zh:""}},TEMPEST_COMBO:{name:"Tempest Combo",label:{zh:"aoe"}}}),YH=ae()({NASCENT_CHAOS:{name:"Nascent Chaos",level:72},MASTERING_THE_BEAST:{name:"Mastering the Beast",level:74},ENHANCED_SHAKE_IT_OFF:{name:"Enhanced Shake It Off",level:76},ENHANCED_THRILL_OF_BATTLE:{name:"Enhanced Thrill of Battle",level:78},RAW_INTUITION_MASTERY:{name:"Raw Intuition Mastery",level:82},ENHANCED_NASCENT_FLASH:{name:"Enhanced Nascent Flash",level:82},ENHANCED_EQUILIBRIUM:{name:"Enhanced Equilibrium",level:84},ENHANCED_ONSLAUGHT:{name:"Enhanced Onslaught",level:88},VENGEANCE_MASTERY:{name:"Vengeance Mastery",level:92},ENHANCED_INNER_RELEASE:{name:"Enhanced Inner Release",level:96},ENHANCED_PRIMAL_REND:{name:"Enhanced Primal Rend",level:100}}),KH={...zH,...wT,...jH},VH=ae()({CURE:{id:120,name:"Cure",label:{zh:"",ja:""}},MEDICA:{id:124,name:"Medica",label:{zh:"",ja:""}},RAISE:{id:125,name:"Raise",label:{zh:"",ja:""}},CURE_II:{id:135,name:"Cure II",label:{zh:"",ja:""}},PRESENCE_OF_MIND:{id:136,name:"Presence of Mind",label:{zh:"",ja:""}},REGEN:{id:137,name:"Regen",label:{zh:"",ja:""}},CURE_III:{id:131,name:"Cure III",label:{zh:"",ja:""}},AETHERIAL_SHIFT:{id:37008,name:"Aetherial Shift",label:{zh:"",ja:""}},HOLY:{id:139,name:"Holy",label:{zh:"",ja:""}},AERO_II:{id:132,name:"Aero II",label:{zh:"",ja:""}},MEDICA_II:{id:133,name:"Medica II",label:{zh:"",ja:""}},BENEDICTION:{id:140,name:"Benediction",label:{zh:"",ja:""}},AFFLATUS_SOLACE:{id:16531,name:"Afflatus Solace",label:{zh:"",ja:""}},ASYLUM:{id:3569,name:"Asylum",label:{zh:"",ja:""}},ASSIZE:{id:3571,name:"Assize",label:{zh:"",ja:""}},THIN_AIR:{id:7430,name:"Thin Air",label:{zh:"",ja:""}},TETRAGRAMMATON:{id:3570,name:"Tetragrammaton",label:{zh:"",ja:""}},STONE_IV:{id:7431,name:"Stone IV",label:{zh:"",ja:""}},DIVINE_BENISON:{id:7432,name:"Divine Benison",label:{zh:"",ja:""}},PLENARY_INDULGENCE:{id:7433,name:"Plenary Indulgence",label:{zh:"",ja:""}},DIA:{id:16532,name:"Dia",label:{zh:"",ja:""}},GLARE:{id:16533,name:"Glare",label:{zh:"",ja:""}},AFFLATUS_MISERY:{id:16535,name:"Afflatus Misery",label:{zh:"",ja:""}},AFFLATUS_RAPTURE:{id:16534,name:"Afflatus Rapture",label:{zh:"",ja:""}},TEMPERANCE:{id:16536,name:"Temperance",label:{zh:"",ja:""}},GLARE_III:{id:25859,name:"Glare III",label:{zh:"",ja:""}},HOLY_III:{id:25860,name:"Holy III",label:{zh:"",ja:""}},AQUAVEIL:{id:25861,name:"Aquaveil",label:{zh:"",ja:""}},LITURGY_OF_THE_BELL:{id:25862,name:"Liturgy of the Bell",label:{zh:"",ja:""}},LITURGY_POP:{name:"Pop Liturgy of the Bell",label:{zh:""}},LITURGY_TRIGGER:{name:"Trigger Liturgy of the Bell",label:{zh:""}},GLARE_IV:{id:37009,name:"Glare IV",label:{zh:"",ja:""}},MEDICA_III:{id:37010,name:"Medica III",label:{zh:"",ja:""}},DIVINE_CARESS:{id:37011,name:"Divine Caress",label:{zh:"",ja:""}}}),WH=ae()({cd_PRESENCE_OF_MIND:{name:"cd_PresenceOfMind"},cd_AETHERIAL_SHIFT:{name:"cd_AetherialShift"},cd_BENEDICTION:{name:"cd_Benediction"},cd_ASYLUM:{name:"cd_Asylum"},cd_ASSIZE:{name:"cd_Assize"},cd_THIN_AIR:{name:"cd_ThinAir"},cd_TETRAGRAMMATON:{name:"cd_Tetragrammaton"},cd_DIVINE_BENISON:{name:"cd_DivineBenison"},cd_PLENARY_INDULGENCE:{name:"cd_PlenaryIndulgence"},cd_TEMPERANCE:{name:"cd_Temperance"},cd_AQUAVEIL:{name:"cd_Aquaveil"},cd_LITURGY_OF_THE_BELL:{name:"cd_LiturgyOfTheBell"},cd_LITURGY_POP:{name:"cd_LiturgyPop"},cd_LITURGY_TRIGGER:{name:"cd_LiturgyTrigger"},cd_DIVINE_CARESS:{name:"cd_DivineCaress"}}),XH=ae()({LILLIES:{name:"Lillies",maximumCharges:3,label:{zh:""}},LILY_TIMER:{name:"Lily Timer",label:{zh:""}},BLOOD_LILY:{name:"Blood Lily",maximumCharges:3,label:{zh:""}}}),GT=ae()({FREECURE:{name:"Freecure",label:{zh:""}},PRESENCE_OF_MIND:{name:"Presence of Mind",label:{zh:""}},SACRED_SIGHT:{name:"Sacred Sight",maximumStacks:3,label:{zh:""}},REGEN:{name:"Regen",label:{zh:""}},AERO_II:{name:"Aero II",label:{zh:""}},MEDICA_II:{name:"Medica II",label:{zh:""}},ASYLUM:{name:"Asylum",mayBeToggled:!0,label:{zh:""}},THIN_AIR:{name:"Thin Air",label:{zh:""}},DIVINE_BENISON:{name:"Divine Benison",label:{zh:""}},CONFESSION:{name:"Confession",label:{zh:""}},DIA:{name:"Dia",label:{zh:""}},TEMPERANCE:{name:"Temperance",label:{zh:""}},DIVINE_GRACE:{name:"Divine Grace",label:{zh:""}},AQUAVEIL:{name:"Aquaveil",label:{zh:""}},LITURGY_OF_THE_BELL:{name:"Liturgy of the Bell",maximumStacks:5,mayNotBeCanceled:!0,label:{zh:""}},MEDICA_III:{name:"Medica III",label:{zh:""}},DIVINE_CARESS:{name:"Divine Caress",label:{zh:""}},DIVINE_AURA:{name:"Divine Aura",label:{zh:""}}}),qH=ae()({}),ZH=ae()({AERO_MASTERY_II:{name:"Aero Mastery II",level:72},STONE_MASTERY_IV:{name:"Stone Mastery IV",level:72},TRANSCENDENT_AFFLATUS:{name:"Transcendent Afflatus",level:74},ENHANCED_ASYLUM:{name:"Enhanced Asylum",level:78},GLARE_MASTERY:{name:"Glare Mastery",level:82},HOLY_MASTERY:{name:"Holy Mastery",level:82},ENHANCED_DIVINE_BENISON:{name:"Enhanced Divine Benison",level:88},ENHANCED_PRESENCE_OF_MIND:{name:"Enhanced Presence of Mind",level:92},WHITE_MAGIC_MASTERY:{name:"White Magic Mastery",level:94},MEDICA_MASTERY:{name:"Medica Mastery",level:96},ENHANCED_TETRAGRAMMATON:{name:"Enhanced Tetragrammaton",level:98},ENHANCED_TEMPERANCE:{name:"Enhanced Temperance",level:100}}),QH={...XH,...GT,...qH},$H=ae()({WATER_CANNON:{name:"Water Cannon",label:{zh:"(2200)"}},SONIC_BOOM:{name:"Sonic Boom",label:{zh:"(1210)"}},SHARPENED_KNIFE:{name:"Sharpened Knife",label:{zh:"(1220)"}},HYDRO_PULL:{name:"Hydro Pull",label:{zh:"(2220)"}},MOON_FLUTE:{name:"Moon Flute",label:{zh:""}},DIAMONDBACK:{name:"Diamondback",label:{zh:""}},SONG_OF_TORMENT:{name:"Song of Torment",label:{zh:""}},WHISTLE:{name:"Whistle",label:{zh:""}},BRISTLE:{name:"Bristle",label:{zh:""}},TINGLE:{name:"Tingle",label:{zh:""}},FINAL_STING:{name:"Final Sting",label:{zh:""}},COLD_FOG:{name:"Cold Fog",label:{zh:""}},WHITE_DEATH:{name:"White Death",label:{zh:""}},POP_COLD_FOG:{name:"Pop Cold Fog",label:{zh:""}},PHANTOM_FLURRY:{name:"Phantom Flurry",label:{zh:""}},END_PHANTOM_FLURRY:{name:"End Phantom Flurry",label:{zh:""}},MATRA_MAGIC:{name:"Matra Magic",label:{zh:""}},WINGED_REPROBATION:{name:"Winged Reprobation",label:{zh:""}},CONVICTION_MARCATO:{name:"Conviction Marcato",label:{zh:""}},REVENGE_BLAST:{name:"Revenge Blast",label:{zh:""}},WILD_RAGE:{name:"Wild Rage",label:{zh:""}},GOBLIN_PUNCH:{name:"Goblin Punch",label:{zh:""}},THE_ROSE_OF_DESTRUCTION:{name:"The Rose of Destruction",label:{zh:""}},ERUPTION:{name:"Eruption",label:{zh:""}},FEATHER_RAIN:{name:"Feather Rain",label:{zh:""}},MOUNTAIN_BUSTER:{name:"Mountain Buster",label:{zh:""}},SHOCK_STRIKE:{name:"Shock Strike",label:{zh:""}},GLASS_DANCE:{name:"Glass Dance",label:{zh:""}},QUASAR:{name:"Quasar",label:{zh:""}},J_KICK:{name:"J Kick",label:{zh:""}},TRIPLE_TRIDENT:{name:"Triple Trident",label:{zh:""}},BOTH_ENDS:{name:"Both Ends",label:{zh:""}},NIGHTBLOOM:{name:"Nightbloom",label:{zh:""}},SEA_SHANTY:{name:"Sea Shanty",label:{zh:""}},APOKALYPSIS:{name:"Apokalypsis",label:{zh:""}},BEING_MORTAL:{name:"Being Mortal",label:{zh:""}},BREATH_OF_MAGIC:{name:"Breath of Magic",label:{zh:""}},MORTAL_FLAME:{name:"Mortal Flame",label:{zh:""}},SURPANAKHA:{name:"Surpanakha",label:{zh:""}}}),JH=ae()({cd_ERUPTION:{name:"cd_Eruption",label:{zh:"CD: /"}},cd_SHOCK_STRIKE:{name:"cd_Shock_Strike",label:{zh:"CD: /"}},cd_GLASS_DANCE:{name:"cd_Glass_Dance",label:{zh:"CD: "}},cd_SURPANAKHA:{name:"cd_Surpanakha",label:{zh:"CD: "}},cd_QUASAR:{name:"cd_Quasar",label:{zh:"CD: /"}},cd_NIGHTBLOOM:{name:"cd_Nightbloom",label:{zh:"CD: /"}},cd_SEA_SHANTY:{name:"cd_Sea_Shanty",label:{zh:"CD: "}},cd_BEING_MORTAL:{name:"cd_Being_Mortal",label:{zh:"CD: /"}},cd_COLD_FOG:{name:"cd_Cold_Fog",label:{zh:"CD: "}},cd_TRIPLE_TRIDENT:{name:"cd_Triple_Trident",label:{zh:"CD: "}},cd_PHANTOM_FLURRY:{name:"cd_Phantom_Flurry",label:{zh:"CD: "}},cd_COLD_FOG_POP:{name:"cd_Cold_Fog_Pop",label:{zh:"CD: "}},cd_MATRA_MAGIC:{name:"cd_Matra_Magic",label:{zh:"CD: "}},cd_WINGED_REPROBATION:{name:"cd_Winged_Reprobation",label:{zh:"CD: "}},cd_THE_ROSE_OF_DESTRUCTION:{name:"cd_The_Rose_of_Destruction",label:{zh:"CD: "}},cd_SURPANAKHA_LOCKOUT:{name:"cd_SurpanakhaLockout",label:{zh:"CD: "}}}),eU=ae()({}),BT=ae()({NIGHTBLOOM:{name:"Bleeding",label:{zh:""}},SONG_OF_TORMENT:{name:"Bleeding",label:{zh:""}},FEATHER_RAIN:{name:"Feather Rain",label:{zh:""}},WAXING_NOCTURNE:{name:"Waxing Nocturne",label:{zh:""}},WANING_NOCTURNE:{name:"Waning Nocturne",label:{zh:""}},WHISTLE:{name:"Whistle",label:{zh:""}},BRISTLE:{name:"Bristle",label:{zh:""}},TINGLE:{name:"Tingle",label:{zh:""}},COLD_FOG:{name:"Cold Fog",label:{zh:""}},TOUCH_OF_FROST:{name:"Touch of Frost",label:{zh:""}},PHANTOM_FLURRY:{name:"Phantom Flurry",label:{zh:""}},DIAMONDBACK:{name:"Diamondback",label:{zh:""}},APOKALYPSIS:{name:"Apokalypsis",label:{zh:""}},WINGED_REDEMPTION:{name:"Winged Redemption",label:{zh:""}},BREATH_OF_MAGIC:{name:"Breath of Magic",label:{zh:""}},MORTAL_FLAME:{name:"Mortal Flame",label:{zh:""}},WINGED_REPROBATION:{name:"Winged Reprobation",label:{zh:""},maximumStacks:4},SURPANAKHAS_FURY:{name:"Surpanakha's Fury",label:{zh:""},maximumStacks:4},BRUSH_WITH_DEATH:{name:"Brush with Death",label:{zh:""}}}),tU=ae()({SURPANAKHA_LOCKOUT:{name:"Supranakha Lockout",label:{zh:""}}}),nU=ae()({}),aU={...eU,...BT,...tU},iU=ae()({NEVER:{name:"Never"},TINCTURE:{name:"Tincture",label:{zh:"",ja:""}},SPRINT:{id:3,name:"Sprint",label:{zh:"",ja:""}}}),oU=ae()({NEVER:{name:"Never"},cd_GCD:{name:"cd_GCD",label:{zh:"GCD"}},cd_TINCTURE:{name:"cd_Tincture"},cd_SPRINT:{name:"cd_Sprint"}}),lU=ae()({MANA:{name:"Mana",label:{zh:"MP"}}}),sU=ae()({TINCTURE:{name:"Tincture",label:{zh:""}},SPRINT:{name:"Sprint",label:{zh:""}}}),rU=ae()({MOVEMENT:{name:"Movement"},NOT_ANIMATION_LOCKED:{name:"NotAnimationLocked"},NOT_CASTER_TAXED:{name:"NotCasterTaxed"},IN_COMBAT:{name:"InCombat",label:{zh:""}},AUTOS_ENGAGED:{name:"Autos Engaged"},STORED_AUTO:{name:"Stored Auto"},PARTY_SIZE:{name:"PartySize",label:{zh:""}},NEVER:{name:"Never"}}),cU=ae()({NEVER:{name:"Never",level:1}}),uU={...lU,...sU,...rU},dU=ae()({LAST_BASTION:{id:199,name:"Last Bastion",label:{zh:""}},LAND_WAKER:{id:4240,name:"Land Waker",label:{zh:""}},DARK_FORCE:{id:4241,name:"Dark Force",label:{zh:""}},GUNMETAL_SOUL:{id:17105,name:"Gunmetal Soul",label:{zh:""}}}),hU=ae()({PULSE_OF_LIFE:{id:208,name:"Pulse of Life"},ANGEL_FEATHERS:{id:4247,name:"Angel Feathers"},ASTRAL_STASIS:{id:4248,name:"Astral Stasis"},TECHNE_MAKRE:{id:24859,name:"Techne Makre"}}),EU=ae()({FINAL_HEAVEN:{id:202,name:"Final Heaven"},DRAGONSONG_DIVE:{id:4242,name:"Dragonsong Dive"},CHIMATSURI:{id:4243,name:"Chimatsuri"},DOOM_OF_THE_LIVING:{id:7861,name:"Doom of the Living"},THE_END:{id:24858,name:"The End"},WORLD_SWALLOWER:{id:34866,name:"World-swallower"}}),fU=ae()({SAGITTARIUS_ARROW:{id:4244,name:"Sagittarius Arrow"},SATELLITE_BEAM:{id:4245,name:"Satellite Beam"},CRIMSON_LOTUS:{id:17106,name:"Crimson Lotus"}}),AU=ae()({METEOR:{id:205,name:"Meteor"},TERAFLARE:{id:3009,name:"Teraflare"},VERMILLION_SCOURGE:{id:7862,name:"Vermillion Scourge"},CHROMATIC_FANTASY:{id:34867,name:"Chromatic Fantasy"}}),mU=ae()({LAST_BASTION:{name:"Last Bastion",label:{zh:"LB3 buff"}},LAND_WAKER:{name:"Land Waker",label:{zh:"LB3 buff"}},DARK_FORCE:{name:"Dark Force",label:{zh:"LB3 buff"}},GUNMETAL_SOUL:{name:"Gunmetal Soul",label:{zh:"LB3 buff"}}}),RU=ae()({cd_LIMIT_BREAK_1:{name:"cd_LIMIT_BREAK_1",label:{zh:"CDLB"}},cd_LIMIT_BREAK_2:{name:"cd_LIMIT_BREAK_2",label:{zh:"CDLB"}},cd_LIMIT_BREAK_3:{name:"cd_LIMIT_BREAK_3",label:{zh:"CDLB"}}}),TU=ae()({UNKNOWN:{name:"Unknown"},SHIELD_WALL:{id:197,name:"Shield Wall"},STRONGHOLD:{id:198,name:"Stronghold"},HEALING_WIND:{id:206,name:"Healing Wind"},BREATH_OF_THE_EARTH:{id:207,name:"Breath of the Earth"},BRAVER:{id:200,name:"Braver"},BLADEDANCE:{id:201,name:"Bladedance"},BIGSHOT:{id:4238,name:"Big Shot"},DESPERADO:{id:4239,name:"Desperado"},SKYSHARD:{id:203,name:"Skyshard"},STARSTORM:{id:204,name:"Starstorm"}}),JC=ae()({UNKNOWN:{name:"Unknown"},SHIELD_WALL:{name:"Shield Wall",label:{zh:"LB1 buff"}},STRONGHOLD:{name:"Stronghold",label:{zh:"LB2 buff"}}}),SU={...dU,...hU,...EU,...fU,...AU},Lo={...TU,...SU},e0={...JC,...mU},IU=ae()({ARMS_LENGTH:{id:7548,name:"Arm's Length",label:{zh:""}},SECOND_WIND:{id:7541,name:"Second Wind",label:{zh:""}},HEAD_GRAZE:{id:7551,name:"Head Graze",label:{zh:""}},ESUNA:{id:7568,name:"Esuna",label:{zh:""}},RESCUE:{id:7571,name:"Rescue",label:{zh:""}},ADDLE:{id:7560,name:"Addle",label:{zh:"",ja:""},discordEmote:"Addle"},SWIFTCAST:{id:7561,name:"Swiftcast",label:{zh:"",ja:""}},LUCID_DREAMING:{id:7562,name:"Lucid Dreaming",label:{zh:"",ja:""},discordEmote:"Lucid"},SURECAST:{id:7559,name:"Surecast",label:{zh:"",ja:""},discordEmote:"Surecast"},FEINT:{id:7549,name:"Feint",label:{zh:""}},BLOODBATH:{id:7542,name:"Bloodbath",label:{zh:""}},TRUE_NORTH:{id:7546,name:"True North",label:{zh:""}},LEG_SWEEP:{id:7863,name:"Leg Sweep",label:{zh:""}},RAMPART:{id:7531,name:"Rampart",label:{zh:""}},REPRISAL:{id:7535,name:"Reprisal",label:{zh:""}},LOW_BLOW:{id:7540,name:"Low Blow",label:{zh:""}},INTERJECT:{id:7538,name:"Interject",label:{zh:""}},PROVOKE:{id:7533,name:"Provoke",label:{zh:""}},SHIRK:{id:7537,name:"Shirk",label:{zh:""}}}),_U=ae()({cd_ADDLE:{name:"cd_Addle"},cd_SWIFTCAST:{name:"cd_Swiftcast"},cd_LUCID_DREAMING:{name:"cd_LucidDreaming"},cd_SURECAST:{name:"cd_Surecast"},cd_SECOND_WIND:{name:"cd_SecondWind"},cd_ARMS_LENGTH:{name:"cd_ArmsLength"},cd_RESCUE:{name:"cd_Rescue"},cd_FEINT:{name:"cd_Feint"},cd_TRUE_NORTH:{name:"cd_TrueNorth"},cd_BLOODBATH:{name:"cd_Bloodbath"},cd_LEG_SWEEP:{name:"cd_LegSweep"},cd_RAMPART:{name:"cd_Rampart"},cd_REPRISAL:{name:"cd_Reprisal"},cd_LOW_BLOW:{name:"cd_LowBlow"},cd_INTERJECT:{name:"cd_Interject"},cd_PROVOKE:{name:"cd_Provoke"},cd_SHIRK:{name:"cd_Shirk"},cd_HEAD_GRAZE:{name:"cd_HeadGraze"}}),gU=ae()({ADDLE:{name:"Addle",label:{zh:""}},SWIFTCAST:{name:"Swiftcast",label:{zh:""}},LUCID_DREAMING:{name:"Lucid Dreaming",label:{zh:""}},SURECAST:{name:"Surecast",label:{zh:""}},ARMS_LENGTH:{name:"Arms Length",label:{zh:""}},FEINT:{name:"Feint",label:{zh:""}},TRUE_NORTH:{name:"True North",label:{zh:""}},BLOODBATH:{name:"Bloodbath",label:{zh:""}},RAMPART:{name:"Rampart",label:{zh:"buff"}},REPRISAL:{name:"Reprisal",label:{zh:"buff"}}}),NU=ae()({REAR_POSITIONAL:{name:"Rear Positional",label:{zh:""},mayBeToggled:!0},FLANK_POSITIONAL:{name:"Flank Positional",label:{zh:""},mayBeToggled:!0},AUTOS_ENGAGED:{name:"Autos Engaged",mayBeToggled:!0}}),pU=ae()({ENHANCED_SWIFTCAST:{name:"Enhanced Swiftcast",level:94},ENHANCED_ADDLE:{name:"Enhanced Addle",level:98},ENHANCED_HEALING_MAGIC:{name:"Enhanced Healing Magic",level:85},MAGICK_MASTERY_HEALER:{name:"Magick Mastery",level:94},ENHANCED_SECOND_WIND:{name:"Enhanced Second Wind",level:94},ENHANCED_FEINT:{name:"Enhanced Feint",level:98},MELEE_MASTERY_TANK:{name:"Melee Mastery",level:84},ENHANCED_RAMPART:{name:"Enhanced Rampart",level:94},MELEE_MASTERY_II_TANK:{name:"Melee Mastery II",level:94},ENHANCED_REPRISAL:{name:"Enhanced Reprisal",level:98}}),t0={...gU,...NU},In={...iU,...IU,...Lo,...W1,...BH,...h1,...T1,...VH,...UT,...kL,...gH,...v1,...l1,...x1,...dH,...oH,...UH,...XL,...p1,...e1,...zL,...DH,...J1,...F1,...$H},Is={...oU,..._U,...RU,...X1,...FH,...E1,...S1,...WH,...RH,...PL,...NH,...M1,...s1,...k1,...hH,...lH,...xH,...qL,...C1,...t1,...jL,...yH,...eH,...z1,...JH},ze={...uU,...t0,...e0,...$1,...KH,...R1,...N1,...QH,..._H,...FL,...bH,...QC,...d1,...B1,...mH,...uH,...GH,...JL,...y1,...o1,...WL,...HH,...iH,...V1,...aU},Xm={...cU,...pU,...Q1,...YH,...m1,...g1,...ZH,...IH,...BL,...OH,...U1,...u1,...G1,...AH,...cH,...wH,...$L,...D1,...i1,...VL,...LH,...aH,...K1,...nU},_n={epsilon:1e-6};var nt=(e=>(e[e.lvl70=70]="lvl70",e[e.lvl80=80]="lvl80",e[e.lvl90=90]="lvl90",e[e.lvl100=100]="lvl100",e))(nt||{});const CU=.1;var _e=(e=>(e.Fire="Fire",e.Ice="Ice",e.Lightning="Lightning",e.Wind="Wind",e.Earth="Earth",e.Physical="Physical",e.Other="Other",e))(_e||{}),fa=(e=>(e.RNG="RNG",e.Never="Never",e.Always="Always",e))(fa||{}),ft=(e=>(e.Blocked="blocked by CD, animation lock or caster tax",e.SecondaryBlocked="blocked by secondary CD",e.NotEnoughMP="not enough MP",e.NotInCombat="not in combat (must wait for first damage application)",e.RequirementsNotMet="skill requirements not satisfied",e.SkillNotUnlocked="skill not unlocked at provided level",e.BuffNoLongerAvailable="buff no longer available",e.PastTargetTime="jump target time has already passed",e.CastCanceled="cast canceled (skill requirements no longer met at confirmation time)",e.UnknownSkill="unknown skill",e))(ft||{});function Mu(){return{unavailableReasons:[],ready:function(){return this.unavailableReasons.length===0},toString:function(){return this.ready()?"ready":this.unavailableReasons.join("; ")},addUnavailableReason:function(e){this.unavailableReasons.includes(e)||this.unavailableReasons.push(e)},clone:function(){const e=Mu();return this.unavailableReasons.forEach(t=>e.addUnavailableReason(t)),e}}}var x=(e=>(e.LeyLines="Ley Lines",e.Hyperphantasia="Hyperphantasia",e.Manafication="Manafication",e.Acceleration="Acceleration",e.Fuka="Fuka",e.Fugetsu="Fugetsu",e.EnhancedEnpi="Enhanced Enpi",e.NoMercy="No Mercy",e.PowerSurge="Power Surge",e.LanceCharge="Lance Charge",e.LifeOfTheDragon="Life Of The Dragon",e.EnhancedPiercingTalon="Enhanced Piercing Talon",e.LifeSurge="Life Surge",e.DivineMight="Divine Might",e.Requiescat="Requiescat",e.FightOrFlight="Fight Or Flight",e.Tincture="Tincture",e.ArcaneCircle="Arcane Circle",e.ArmysPaeon="Army's Paeon",e.BattleLitany="Battle Litany",e.BattleVoice="Battle Voice",e.Brotherhood="Brotherhood",e.Card_TheBalance="Card - The Balance",e.Card_TheSpear="Card - The Spear",e.ChainStratagem="Chain Stratagem",e.Devilment="Devilment",e.Divination="Divination",e.Dokumori="Dokumori",e.Embolden="Embolden",e.MagesBallad="Mage's Ballad",e.RadiantFinale1="Radiant Finale (1)",e.RadiantFinale2="Radiant Finale (2)",e.RadiantFinale3="Radiant Finale (3)",e.Barrage="Barrage",e.SearingLight="Searing Light",e.StandardFinish="Standard Finish",e.StarryMuse="Starry Muse",e.TechnicalFinish="Technical Finish",e.WanderersMinuet="The Wanderer's Minuet",e.RagingStrikes="Raging Strikes",e.DeathsDesign="Death's Design",e.Zoe="Zoe",e.Autophysis="Autophysis",e.Krasis="Krasis",e.Philosophia="Philosophia",e.Soteria="Soteria",e.WaxingNocturne="Waxing Nocturne",e.Whistle="Whistle",e.Bristle="Bristle",e.TingleA="TingleA",e.TingleB="TingleB",e.TrickAttack="Trick Attack",e.KunaisBane="Kunai's Bane",e.Bunshin="Bunshin",e.RiddleOfFire="Riddle of Fire",e.TheArrow="The Arrow",e.NeutralSect="Neutral Sect",e.Synastry="Synastry",e.Confession="Confession",e.Asylum="Asylum",e.Temperance="Temperance",e.HuntersInstinct="Hunter's Instinct",e.Swiftscaled="Swiftscaled",e.FeyIllumination="Fey Illumination",e.Dissipation="Dissipation",e.Protraction="Protraction",e.Recitation="Recitation",e))(x||{});function OU(e){return ki({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93 6h-2.95a15.65 15.65 0 0 0-1.38-3.56A8.03 8.03 0 0 1 18.92 8zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56A7.987 7.987 0 0 1 5.08 16zm2.95-8H5.08a7.987 7.987 0 0 1 4.33-3.56A15.65 15.65 0 0 0 8.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2zm.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95a8.03 8.03 0 0 1-4.33 3.56zM16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.38z"},child:[]}]})(e)}function bU(e){return ki({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 3a9 9 0 1 0 9 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 0 1-4.4 2.26 5.403 5.403 0 0 1-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"},child:[]}]})(e)}function DU(e){return ki({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58a.996.996 0 0 0-1.41 0 .996.996 0 0 0 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37a.996.996 0 0 0-1.41 0 .996.996 0 0 0 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0a.996.996 0 0 0 0-1.41l-1.06-1.06zm1.06-10.96a.996.996 0 0 0 0-1.41.996.996 0 0 0-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36a.996.996 0 0 0 0-1.41.996.996 0 0 0-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z"},child:[]}]})(e)}function qm(e,t){const a=Math.pow(10,t);return Math.floor(e*a)/a}var xi,n0,a0,i0,LR;const Co=class Co{static getMainstatBase(t){switch(t){case nt.lvl70:return 292;case nt.lvl80:return 340;case nt.lvl90:return 390;case nt.lvl100:return 440}}static getSubstatBase(t){switch(t){case nt.lvl70:return 364;case nt.lvl80:return 380;case nt.lvl90:return 400;case nt.lvl100:return 420}}static getStatDiv(t){switch(t){case nt.lvl70:return 900;case nt.lvl80:return 1300;case nt.lvl90:return 1900;case nt.lvl100:return 2780}}static calculateDamage(t,a,i,l,r,d,E){var P,q,ne,Ee,ue;let h=r;const A=d>=1?d:d<0?0:Co.criticalHitRate(t,a)+d,R=E>=1?E:E<0?0:be(P=Co,xi,a0).call(P,t,i)+E;if(A===0&&R===0)return h;const T=be(q=Co,xi,n0).call(q,t,a),S=1.25,I=A>=1&&R>=1,C=A>1?qm(1+(T-1)*(d-1),3):1,_=R>1?qm(1+(S-1)*(E-1),3):1,b=A>1?1:A,y=R>1?1:R;I?h*=qm(be(ne=Co,xi,LR).call(ne,t,l)+be(Ee=Co,xi,i0).call(Ee,t,i),3):h*=be(ue=Co,xi,LR).call(ue,t,l);const U=h*C*T,L=h*_*S,M=U*_*S,G=b*y,H=1-b-y+G;return h*H+U*(b-G)+L*(y-G)+M*G}static criticalHitRate(t,a){const i=this.getSubstatBase(t),l=this.getStatDiv(t);return(Math.floor(200*(a-i)/l)+50)*.001}static overtimePotency(t,a,i){const l=this.getSubstatBase(t),r=this.getStatDiv(t),d=(1e3+Math.floor((a-l)*130/r))*.001;return i*d}static mpTick(t,a){const i=this.getMainstatBase(t),l=this.getStatDiv(t);return 200+Math.floor(150*(a-i)/l)}static preTaxGcd(t,a,i,l){const r=this.getSubstatBase(t),d=this.getStatDiv(t),E=Math.ceil((r-a)*130/d),h=Math.floor(i*(1e3+E));return Math.floor((100-(l??0))*h/1e3)/100}static preTaxGcdLegacy(t,a,i,l){const r=this.getSubstatBase(t),d=this.getStatDiv(t);return Math.floor(Math.floor(Math.floor((100-(l??0))*100/100)*Math.floor((2e3-Math.floor(130*(a-r)/d+1e3))*(1e3*i)/1e4)/100)*100/100)/100}static preTaxCastTime(t,a,i,l){const r=this.getSubstatBase(t),d=this.getStatDiv(t);return Math.floor(Math.floor(Math.floor((100-(l??0))*100/100)*Math.floor((2e3-Math.floor(130*(a-r)/d+1e3))*(1e3*i)/1e3)/100)*100/100)/1e3}static afterFpsTax(t,a){return Math.floor(a*t+1)/t}};xi=new WeakSet,n0=function(t,a){const i=this.getSubstatBase(t),l=this.getStatDiv(t);return(Math.floor(200*(a-i)/l)+1400)*.001},a0=function(t,a){const i=this.getSubstatBase(t),l=this.getStatDiv(t);return Math.floor(550*(a-i)/l)*.001},i0=function(t,a){const i=this.getSubstatBase(t),l=this.getStatDiv(t);return Math.floor(140*(a-i)/l)*.001},LR=function(t,a){const i=this.getMainstatBase(t),l=this.getStatDiv(t);return Math.floor(1e3+140*(a-i)/l)*.001},Ye(Co,xi);let Ot=Co;var k=(e=>(e[e.AF3=0]="AF3",e[e.AF2=1]="AF2",e[e.AF1=2]="AF1",e[e.UI3=3]="UI3",e[e.UI2=4]="UI2",e[e.UI1=5]="UI1",e[e.ENO=6]="ENO",e[e.STARRY=7]="STARRY",e[e.EMBOLDEN_M=8]="EMBOLDEN_M",e[e.MANAFIC=9]="MANAFIC",e[e.ACCELERATION=10]="ACCELERATION",e[e.POT=11]="POT",e[e.COMBO=12]="COMBO",e[e.AUTO_CDH=13]="AUTO_CDH",e[e.NO_CDH=14]="NO_CDH",e[e.PARTY=15]="PARTY",e[e.STANDARD_SINGLE=16]="STANDARD_SINGLE",e[e.STANDARD_DOUBLE=17]="STANDARD_DOUBLE",e[e.TECHNICAL_SINGLE=18]="TECHNICAL_SINGLE",e[e.TECHNICAL_DOUBLE=19]="TECHNICAL_DOUBLE",e[e.TECHNICAL_TRIPLE=20]="TECHNICAL_TRIPLE",e[e.TECHNICAL_QUADRUPLE=21]="TECHNICAL_QUADRUPLE",e[e.DEVILMENT=22]="DEVILMENT",e[e.FUGETSU=23]="FUGETSU",e[e.AUTO_CRIT=24]="AUTO_CRIT",e[e.YATEN=25]="YATEN",e[e.POSITIONAL=26]="POSITIONAL",e[e.ARCANE_CIRCLE=27]="ARCANE_CIRCLE",e[e.DEATHSDESIGN=28]="DEATHSDESIGN",e[e.ENHANCED_GIBBET_GALLOWS=29]="ENHANCED_GIBBET_GALLOWS",e[e.ENHANCED_REAPING=30]="ENHANCED_REAPING",e[e.IMMORTAL_SACRIFICE=31]="IMMORTAL_SACRIFICE",e[e.OVERHEATED=32]="OVERHEATED",e[e.SURGING_TEMPEST=33]="SURGING_TEMPEST",e[e.RAGING_STRIKES=34]="RAGING_STRIKES",e[e.WANDERERS_MINUET=35]="WANDERERS_MINUET",e[e.MAGES_BALLAD=36]="MAGES_BALLAD",e[e.ARMYS_PAEON=37]="ARMYS_PAEON",e[e.BATTLE_VOICE=38]="BATTLE_VOICE",e[e.RADIANT_FINALE_ONE_CODA=39]="RADIANT_FINALE_ONE_CODA",e[e.RADIANT_FINALE_TWO_CODA=40]="RADIANT_FINALE_TWO_CODA",e[e.RADIANT_FINALE_THREE_CODA=41]="RADIANT_FINALE_THREE_CODA",e[e.BARRAGE=42]="BARRAGE",e[e.NO_MERCY=43]="NO_MERCY",e[e.SEARING_LIGHT=44]="SEARING_LIGHT",e[e.POWER_SURGE=45]="POWER_SURGE",e[e.ENHANCED_PIERCING_TALON=46]="ENHANCED_PIERCING_TALON",e[e.LANCE_CHARGE=47]="LANCE_CHARGE",e[e.LIFE_OF_THE_DRAGON=48]="LIFE_OF_THE_DRAGON",e[e.LIFE_SURGE=49]="LIFE_SURGE",e[e.BATTLE_LITANY=50]="BATTLE_LITANY",e[e.FIGHT_OR_FLIGHT=51]="FIGHT_OR_FLIGHT",e[e.DIVINE_MIGHT=52]="DIVINE_MIGHT",e[e.REQUIESCAT=53]="REQUIESCAT",e[e.PET=54]="PET",e[e.ZOE=55]="ZOE",e[e.SOTERIA=56]="SOTERIA",e[e.KRASIS=57]="KRASIS",e[e.AUTOPHYSIS=58]="AUTOPHYSIS",e[e.PHILOSOPHIA=59]="PHILOSOPHIA",e[e.MOON_FLUTE=60]="MOON_FLUTE",e[e.BRISTLE=61]="BRISTLE",e[e.WHISTLE=62]="WHISTLE",e[e.TINGLEA=63]="TINGLEA",e[e.TINGLEB=64]="TINGLEB",e[e.SURPANAKHA=65]="SURPANAKHA",e[e.WINGED_REPROBATION=66]="WINGED_REPROBATION",e[e.WINGED_REDEMPTION=67]="WINGED_REDEMPTION",e[e.DARKSIDE=68]="DARKSIDE",e[e.BUNSHIN=69]="BUNSHIN",e[e.KASSATSU=70]="KASSATSU",e[e.HOLLOW_NOZUCHI=71]="HOLLOW_NOZUCHI",e[e.KAZEMATOI=72]="KAZEMATOI",e[e.MEISUI=73]="MEISUI",e[e.DOKUMORI=74]="DOKUMORI",e[e.TRICK_ATTACK=75]="TRICK_ATTACK",e[e.KUNAIS_BANE=76]="KUNAIS_BANE",e[e.BROTHERHOOD=77]="BROTHERHOOD",e[e.RIDDLE_OF_FIRE=78]="RIDDLE_OF_FIRE",e[e.SSS_CHAKRA=79]="SSS_CHAKRA",e[e.MNK_BALL=80]="MNK_BALL",e[e.DIVINATION=81]="DIVINATION",e[e.NEUTRAL_SECT=82]="NEUTRAL_SECT",e[e.THE_ARROW=83]="THE_ARROW",e[e.SYNASTRY=84]="SYNASTRY",e[e.CONFESSION=85]="CONFESSION",e[e.ASYLUM=86]="ASYLUM",e[e.TEMPERANCE=87]="TEMPERANCE",e[e.EXTRA_BELL_STACKS=88]="EXTRA_BELL_STACKS",e[e.HUNTERS_INSTINCT=89]="HUNTERS_INSTINCT",e[e.HONED=90]="HONED",e[e.VENOM=91]="VENOM",e[e.POISED=92]="POISED",e[e.CHAIN_STRAT=93]="CHAIN_STRAT",e[e.FEY_ILLUMINATION=94]="FEY_ILLUMINATION",e[e.DISSIPATION=95]="DISSIPATION",e[e.PROTRACTION=96]="PROTRACTION",e))(k||{});const VN=1.1,Zm=.9,X={Tincture:{kind:"multiplier",source:11,potencyFactor:1},AutoCrit:{kind:"critDirect",source:24,critBonus:1,dhBonus:0},AutoCDH:{kind:"critDirect",source:13,critBonus:1,dhBonus:1},NoCDH:{kind:"critDirect",source:14,critBonus:0,dhBonus:0},Starry:{kind:"multiplier",source:7,potencyFactor:1.05},EmboldenMagic:{kind:"multiplier",source:8,potencyFactor:1.05},AccelerationImpact:{kind:"adder",source:10,additiveAmount:50},Manafication:{kind:"multiplier",source:9,potencyFactor:1.05},SingleStandardFinish:{kind:"multiplier",source:16,potencyFactor:1.02},DoubleStandardFinish:{kind:"multiplier",source:17,potencyFactor:1.05},SingleTechnicalFinish:{kind:"multiplier",source:18,potencyFactor:1.01},TripleTechnicalFinish:{kind:"multiplier",source:20,potencyFactor:1.03},QuadrupleTechnicalFinish:{kind:"multiplier",source:21,potencyFactor:1.05},Devilment:{kind:"critDirect",source:22,critBonus:.2,dhBonus:.2},FugetsuBase:{kind:"multiplier",source:23,potencyFactor:1.1},FugetsuEnhanced:{kind:"multiplier",source:23,potencyFactor:1.13},YatenpiBase:{kind:"adder",source:25,additiveAmount:160},YatenpiEnhanced:{kind:"adder",source:25,additiveAmount:170},ArcaneCircle:{kind:"multiplier",source:27,potencyFactor:1.03},DeathsDesign:{kind:"multiplier",source:28,potencyFactor:1.1},EnhancedGibbetGallows:{kind:"adder",source:29,additiveAmount:60},EnhancedReaping:{kind:"adder",source:30,additiveAmount:60},ImmortalSacrifice:{kind:"adder",source:31,additiveAmount:40},Overheated:{kind:"adder",source:32,additiveAmount:20},SurgingTempest:{kind:"multiplier",source:33,potencyFactor:1.1},RagingStrikes:{kind:"multiplier",source:34,potencyFactor:1.15},MagesBallad:{kind:"multiplier",source:36,potencyFactor:1.01},ArmysPaeon:{kind:"critDirect",source:37,critBonus:0,dhBonus:.03},WanderersMinuet:{kind:"critDirect",source:35,critBonus:.02,dhBonus:0},BattleVoice:{kind:"critDirect",source:38,critBonus:0,dhBonus:.2},RadiantFinaleOneCoda:{kind:"multiplier",source:39,potencyFactor:1.02},RadiantFinaleTwoCoda:{kind:"multiplier",source:40,potencyFactor:1.04},RadiantFinaleThreeCoda:{kind:"multiplier",source:41,potencyFactor:1.06},BarrageRefulgent:{kind:"multiplier",source:42,potencyFactor:3},BarrageWideVolley:{kind:"adder",source:42,additiveAmount:80},BarrageShadowbite:{kind:"adder",source:42,additiveAmount:100},NoMercy:{kind:"multiplier",source:43,potencyFactor:1.2},SearingLight:{kind:"multiplier",source:44,potencyFactor:1.05},SmnPet:{kind:"multiplier",source:54,potencyFactor:.8},PowerSurge:{kind:"multiplier",source:45,potencyFactor:1.1},LanceCharge:{kind:"multiplier",source:47,potencyFactor:1.1},LifeOfTheDragon:{kind:"multiplier",source:48,potencyFactor:1.15},BattleLitany:{kind:"critDirect",source:50,critBonus:.1,dhBonus:0},EnhancedPiercingTalon:{kind:"adder",source:46,additiveAmount:150},LifeSurge:{kind:"critDirect",source:49,critBonus:1,dhBonus:0},FightOrFlight:{kind:"multiplier",source:51,potencyFactor:1.25},Zoe:{kind:"multiplier",source:55,potencyFactor:1.5},Soteria:{kind:"multiplier",source:56,potencyFactor:1.7},Krasis:{kind:"multiplier",source:57,potencyFactor:1.2},Autophysis:{kind:"multiplier",source:58,potencyFactor:1.1},Philosophia:{kind:"multiplier",source:59,potencyFactor:1.2},MoonFlute:{kind:"multiplier",source:60,potencyFactor:1.5},Whistle:{kind:"multiplier",source:62,potencyFactor:1.8},Bristle:{kind:"multiplier",source:61,potencyFactor:1.5},TingleA:{kind:"adder",source:63,additiveAmount:100},TingleB:{kind:"adder",source:64,additiveAmount:300},WingedReprobation:{kind:"adder",source:66,additiveAmount:100},WingedRedemption:{kind:"adder",source:67,additiveAmount:220},Darkside:{kind:"multiplier",source:68,potencyFactor:VN},DrkPet:{kind:"multiplier",source:54,potencyFactor:1.05*VN},BunshinST:{kind:"adder",source:69,additiveAmount:160*Zm},BunshinAOE:{kind:"adder",source:69,additiveAmount:80*Zm},NinPet:{kind:"multiplier",source:54,potencyFactor:Zm},Kassatsu:{kind:"multiplier",source:70,potencyFactor:1.3},HollowNozuchi:{kind:"adder",source:71,additiveAmount:70},Kazematoi:{kind:"adder",source:72,additiveAmount:100},Meisui:{kind:"adder",source:73,additiveAmount:150},Dokumori:{kind:"multiplier",source:74,potencyFactor:1.05},TrickAttack:{kind:"multiplier",source:75,potencyFactor:1.1},KunaisBane:{kind:"multiplier",source:76,potencyFactor:1.1},Brotherhood:{kind:"multiplier",source:77,potencyFactor:1.05},RiddleOfFire:{kind:"multiplier",source:78,potencyFactor:1.15},Divination:{kind:"multiplier",source:81,potencyFactor:1.06},NeutralSect:{kind:"multiplier",source:82,potencyFactor:1.2},TheArrow:{kind:"multiplier",source:83,potencyFactor:1.1},Synastry:{kind:"multiplier",source:84,potencyFactor:1.4},AstPet:{kind:"multiplier",source:54,potencyFactor:.98},Confession:{kind:"adder",source:85,additiveAmount:200},Asylum:{kind:"multiplier",source:86,potencyFactor:1.1},Temperance:{kind:"multiplier",source:87,potencyFactor:1.2},WhmPet:{kind:"multiplier",source:54,potencyFactor:.96},HuntersInstinct:{kind:"multiplier",source:89,potencyFactor:1.1},HonedST:{kind:"adder",source:90,additiveAmount:100},HonedAoE:{kind:"adder",source:90,additiveAmount:20},VenomST:{kind:"adder",source:91,additiveAmount:100},VenomAoE:{kind:"adder",source:91,additiveAmount:20},VenomOGCDST:{kind:"adder",source:91,additiveAmount:50},VenomOGCDAoE:{kind:"adder",source:91,additiveAmount:30},Poised:{kind:"adder",source:92,additiveAmount:50},ChainStrat:{kind:"critDirect",source:93,critBonus:.1,dhBonus:0},SchPet:{kind:"multiplier",source:54,potencyFactor:.9},FeyIllum:{kind:"multiplier",source:94,potencyFactor:1.1},Dissipation:{kind:"multiplier",source:95,potencyFactor:1.2},Protraction:{kind:"multiplier",source:96,potencyFactor:1.1}};function yU(e){return{kind:"adder",source:12,additiveAmount:e}}function vU(e){return{kind:"adder",source:53,additiveAmount:e}}function MU(e){return{kind:"adder",source:52,additiveAmount:e}}function rE(e){return{kind:"adder",source:26,additiveAmount:e}}var Hl,o0,l0,s0;class tn{constructor(t){Ye(this,Hl);Z(this,"config");Z(this,"sourceTime");Z(this,"sourceSkill");Z(this,"aspect");Z(this,"description");Z(this,"base");Z(this,"targetCount");Z(this,"falloff");Z(this,"snapshotTime");Z(this,"applicationTime");Z(this,"modifiers",[]);this.config=t.config,this.sourceTime=t.sourceTime,this.sourceSkill=t.sourceSkill,this.aspect=t.aspect,this.base=t.basePotency,this.snapshotTime=t.snapshotTime,this.description=t.description,this.targetCount=t.targetCount,this.falloff=t.falloff}getAmount(t){let a=1,i=0,l=0,r=0,d=!1,E=!1,h=!1;this.modifiers.forEach(T=>{T.source===11?a*=t.tincturePotencyMultiplier:T.source===13?d=!0:T.source===24?E=!0:T.source===14?h=!0:T.kind==="critDirect"?(l+=T.critBonus,r+=T.dhBonus):T.kind==="multiplier"?a*=T.potencyFactor:T.kind==="adder"&&(i+=T.additiveAmount)}),console.assert(!(h&&(d||E)),"skills that can't CDH cannot be auto-crit or auto-CDH"),h&&(d=!1,E=!1),console.assert(!(d&&E),"cannot be both auto-crit and auto-CDH"),t.includePartyBuffs&&this.snapshotTime&&N.game.getPartyBuffs(this.snapshotTime).forEach(T=>{T.kind==="multiplier"?a*=T.potencyFactor:T.kind==="critDirect"&&(l+=T.critBonus,r+=T.dhBonus)});let R=(this.base+i)*be(this,Hl,s0).call(this,a,h?0:l,h?0:r);if(d?R*=be(this,Hl,o0).call(this,l,r):E&&(R*=be(this,Hl,l0).call(this,l,r)),t.includeSplash){const T=1+(1-(this.falloff??1))*(this.targetCount-1);R*=T}return R}getPartyBuffs(){return this.snapshotTime?[...N.game.getPartyBuffs(this.snapshotTime).keys()]:[]}resolve(t){console.assert(this.snapshotTime!==void 0,`${this.sourceSkill} displayed at ${t} did not have snapshotTime`),console.assert(this.applicationTime===void 0,`${this.sourceSkill} displayed at ${t} was already resolved at ${this.applicationTime}`),this.applicationTime=t}hasResolved(){return this.applicationTime!==void 0}hasHitBoss(t){return this.applicationTime!==void 0&&!t(this.applicationTime)}hasSnapshotted(){return this.snapshotTime!==void 0}}Hl=new WeakSet,o0=function(t,a){const i=this.config.level,l=Ot.calculateDamage(i,N.gameConfig.criticalHit,N.gameConfig.directHit,N.gameConfig.determination,1,t,a);return Ot.calculateDamage(i,N.gameConfig.criticalHit,N.gameConfig.directHit,N.gameConfig.determination,1,1+t,1+a)/l},l0=function(t,a){const i=this.config.level,l=Ot.calculateDamage(i,N.gameConfig.criticalHit,N.gameConfig.directHit,N.gameConfig.determination,1,t,a);return Ot.calculateDamage(i,N.gameConfig.criticalHit,N.gameConfig.directHit,N.gameConfig.determination,1,1+t,a)/l},s0=function(t,a,i){const l=this.config.level,r=this.config.criticalHit,d=this.config.directHit,E=this.config.determination,h=Ot.calculateDamage(l,r,d,E,1,0,0);return Ot.calculateDamage(l,r,d,E,t,a,i)/h};var ht=(e=>(e.Red="#f64141",e.Orange="#e89b5f",e.Yellow="#ffd535",e.Green="#50c53d",e.Cyan="#53e5e5",e.Blue="#217ff5",e.Purple="#9755ef",e.Pink="#ee79ee",e.Grey="#6f6f6f",e))(ht||{});const Mt=()=>Ui(O.useContext(Nn)),Ui=e=>e==="Dark"?LU:HU,xo=(e,t)=>Ui(e)[t],LU={accent:"mediumpurple",jobAccents:{BLM:"#9370db",BLU:"#9370db",PCT:"#e176c2",RDM:"#ff0000",DNC:"#e2b0af",SAM:"#f59542",MCH:"#6ee1d6",WAR:"#b10b0b",RPR:"#965a90",BRD:"#91ba5e",GNB:"#f6b26b",SMN:"#2D9B78",SGE:"#80a0f0"},editingValid:"#ffdc00",editingInvalid:"#ff0000",dropTarget:"#5579f1",realTime:"mediumseagreen",historical:"#ff8c00",fileDownload:"#798c3f",text:"#b0b0b0",emphasis:"#dadada",success:"mediumseagreen",warning:"#ff6224",background:"#1f1f21",tipBackground:"#2a2a2a",bgLowContrast:"#333",bgMediumContrast:"#393939",bgHighContrast:"#626262",timelineEditor:{headerFooter:"#424242",bgAlternateRow:"#282828"},resources:{gcdBar:"#5cab43",lockBar:"#737373",mana:"#62a5d2",manaTick:"#3d5c73",cdhTag:"#d55124",comboTag:"#5c8bad",petTag:"#eb9b5f"},blm:{enochian:"#b69241",astralFire:"#d55124",astralSoul:"#cb8046",umbralIce:"#509bd5",umbralHeart:"#8fced5",paradox:"#d953ee",polyTimer:"#594472",polyStacks:"#b138ee"},blu:{moonflute:"#b69241",whistle:"#b69241",bristle:"#b69241",tinglea:"#217ff5",tingleb:"#217ff5",surpanakha:"#b69241",wingedreprobation:"#ffd535"},pct:{creatureCanvas:"#a948e3",weaponCanvas:"#a53535",landscapeCanvas:"#2e51dd",paletteGauge:"#b69241",holyPaint:"#9bc6dd",cometPaint:"#7e19aa",starryBuff:"#509bd5"},rdm:{whiteMana:"#dddddd",blackMana:"#2a4bf5",manaStack:"#cb8046",emboldenBuff:"#de0202",manaficBuff:"#c169c2",accelBuff:"#f0d1e8"},dnc:{esprit:"#e2b0af",feathers:"#8DA147",emboite:"#bf615c",entrechat:"#3a8db7",jete:"#539350",pirouette:"#b0984e"},sam:{kenki:"#d55124",setsu:"#c7ffff",getsu:"#7987fc",kaSen:"#f8a2a6",meditation:"#ff853d",fugetsu:"#0f52ba",iai:"#89cfef"},mch:{heat:"#D35A10",battery:"#2C9FCB"},rpr:{soulGaugeLow:"#660929",soulGaugeHigh:"#e5004e",shroudGaugeLow:"#03706c",shroudGaugeHigh:"#00fcf3",lemureShroud:"#53ffff",voidShroudLow:"#5c125c",voidShroudHigh:"#ff04ff",deathsDesign:"#ab0009",arcaneCircle:"#ff94fd"},war:{beastGauge:"#ffba00"},brd:{soulVoice:"#5DBD99",pitchPerfect:"#9ac5f1",repertoire:"#e8c35a",wanderersCoda:"#add549",magesCoda:"#ffbcf8",armysCoda:"#eb9b5f",ragingStrikes:"#c04414",barrage:"#e6c65b",battleVoice:"#71bed1",radiantFinale:"#edcce7"},gnb:{},smn:{aetherflow:"#ffd4ff",bahamut:"#2D9B78",phoenix:"#d55124",solar:"#9bc6dd",ruby:"#e5004e",topaz:"#b0984e",emerald:"#539350",searing:"#2D9B78"},drg:{lifeSurge:"#ff6633",lanceCharge:"#d6002d",lifeOfTheDragon:"#0968af",battleLitany:"#33b8e3",powerSurge:"#59ed78",enhancedPiercingTalon:"#f4caa6",firstmindsFocusStacks:"#9926c8",lifeOfTheDragonBar:"#d74936",drgComboTimer:"#3d61ae"},sge:{addersgall:"#80a0f0",addersting:"#9e2dca",zoe:"cyan",autophysis:"lightblue",krasis:"teal",soteria:"green",philosophia:"lightgreen"},pld:{divineMight:"#ff6633",requiescat:"#d6002d",fightOrFlight:"#0968af",pldComboTimer:"#59ed78",ironWillColor:"#d74936",oathGaugeColor:"#3d61ae"},drk:{darkside:"#c000d1",blood:"#8803fc",darkarts:"#ffdf0d",drkComboTimer:"#cb8046",grit:"#82cad9"},nin:{ninComboTimer:"#8532a8",kazematoi:"#ab1fd1",meisui:"#559ef2",ninki:"#8532a8",bunshin:"#ed8021",kassatsu:"#fa9bd4",nozuchi:"#d6a440",dokumori:"#9a0ec4",trick:"#ffd454"},mnk:{opo:"#feabf7",raptor:"#c495fb",coeurl:"#00d9a5",lunar:"#a984f5",solar:"#c6c5c3",riddleOfFire:"#d98d58",brotherhood:"#da4c32",chakra:"#fffea5",extraChakra:"#fe9b28"},whm:{lily:"#d3ffff",blood:"#e08889",pom:"#9788e0",asylum:"#b5e075",confession:"#8df2e8",temperance:"#77f7b7"},ast:{div:"#ffd535",astralCard:"#52d3f7",umbralCard:"#f7b3ff",lord:"#de1200",lady:"#f8facd",neutral:"#354869",synastry:"#578a7e",arrow:"#1690a8"},vpr:{vprComboTimer:"#dea65d",rattlingCoil:"#f64141",serpentOfferings:"#f64141",anguineTribute:"#24e2ff",huntersInstinct:"#9e5a02",swiftscaled:"#ffe20a"},sch:{chain:"#6f6f6f",faerieGauge:"#96ffbd",aetherflow:"#acfff7",seraph:"#44b6fd",feyIllumination:"#2cc7b0",dissipation:"#c4c4c4",protraction:"#77c990",recitation:"#ffce1c"},timeline:{ruler:"#2d2d2d",tracks:"#242424",castBar:"#42364d",lockBar:"#696969",gcdBar:"#354931",invalidBg:"#f25449",llCover:"#5ea647",potCover:"#c4543a",buffCover:"#9370db",damageMark:"#ff0000",healingMark:"#2cda30",aggroMark:"#ff8000",untargetableDamageMark:"#7f7f7f",mpTickMark:"#32525e",warningMark:"#9d7103",lucidTickMark:"#56b3d5",countdown:"rgba(15, 15, 15, 0.4)",markerAlpha:"4f"}},HU={accent:"mediumpurple",jobAccents:{BLM:"#9370db",BLU:"#9370db",PCT:"#f485d6",RDM:"#ff0000",DNC:"#e2b0af",SAM:"#f59542",MCH:"#6ee1d6",WAR:"#b10b0b",RPR:"#965a90",BRD:"#91ba5e",SMN:"#2D9B78",SGE:"#80a0f0"},editingValid:"#ffdc00",editingInvalid:"#ff0000",dropTarget:"#4665ff",realTime:"mediumseagreen",historical:"#ff8c00",fileDownload:"#798c3f",text:"#000000",emphasis:"#000000",success:"mediumseagreen",warning:"#ff4d07",background:"#ffffff",tipBackground:"#ffffff",bgLowContrast:"#efefef",bgMediumContrast:"lightgrey",bgHighContrast:"darkgrey",timelineEditor:{headerFooter:"#cacaca",bgAlternateRow:"#eeeeee"},resources:{gcdBar:"#8edc72",lockBar:"#cbcbcb",mana:"#8ACEEA",manaTick:"#C2EAFF",cdhTag:"#ff6633",comboTag:"#53a7c9",petTag:"#eb9b5f"},blm:{enochian:"#f5cf96",astralFire:"#ff6633",astralSoul:"#ffa641",umbralIce:"#66bbff",umbralHeart:"#95dae3",paradox:"#d953ee",polyTimer:"#d5bbf1",polyStacks:"#b138ee"},blu:{moonflute:"#b69241",whistle:"#b69241",bristle:"#b69241",tinglea:"#217ff5",tingleb:"#217ff5",surpanakha:"#b69241",wingedreprobation:"#ffd535"},pct:{creatureCanvas:"#b854e8",weaponCanvas:"#d54d48",landscapeCanvas:"#4568f6",paletteGauge:"#f5cf96",holyPaint:"#b7c9d5",cometPaint:"#9926c8",starryBuff:"#66bbff"},rdm:{whiteMana:"#fcd8d4",blackMana:"#467aeb",manaStack:"#9926c8",emboldenBuff:"#c91310",manaficBuff:"#530954",accelBuff:"#c973b4"},dnc:{esprit:"#e2b0af",feathers:"#8DA147",emboite:"#bf615c",entrechat:"#3a8db7",jete:"#539350",pirouette:"#b0984e"},sam:{kenki:"#d55124",setsu:"#addede",getsu:"#7987fc",kaSen:"#f8a2a6",meditation:"#ff853d",fugetsu:"#0f52ba",iai:"#89cfef"},mch:{heat:"#D35A10",battery:"#2C9FCB"},rpr:{soulGaugeLow:"#660929",soulGaugeHigh:"#e5004e",shroudGaugeLow:"#03706c",shroudGaugeHigh:"#00fcf3",lemureShroud:"#53ffff",voidShroudLow:"#5c125c",voidShroudHigh:"#ff04ff",deathsDesign:"#ab0009",arcaneCircle:"#ff94fd"},war:{beastGauge:"#e74a3c"},brd:{soulVoice:"#5DBD99",pitchPerfect:"#9ac5f1",repertoire:"#e8c35a",wanderersCoda:"#add549",magesCoda:"#ffbcf8",armysCoda:"#eb9b5f",ragingStrikes:"#c04414",barrage:"#e6c65b",battleVoice:"#71bed1",radiantFinale:"#edcce7"},gnb:{},smn:{aetherflow:"#ffd4ff",bahamut:"#2D9B78",phoenix:"#d55124",solar:"#9bc6dd",ruby:"#e5004e",topaz:"#b0984e",emerald:"#539350",searing:"#2D9B78"},drg:{lifeSurge:"#ff6633",lanceCharge:"#d6002d",lifeOfTheDragon:"#0968af",battleLitany:"#33b8e3",powerSurge:"#59ed78",enhancedPiercingTalon:"#f4caa6",firstmindsFocusStacks:"#9926c8",lifeOfTheDragonBar:"#d74936",drgComboTimer:"#3d61ae"},sge:{addersgall:"#80a0f0",addersting:"#9e2dca",zoe:"cyan",autophysis:"lightblue",krasis:"teal",soteria:"green",philosophia:"lightgreen"},pld:{divineMight:"#ff6633",requiescat:"#d6002d",fightOrFlight:"#0968af",pldComboTimer:"#59ed78",ironWillColor:"#d74936",oathGaugeColor:"#3d61ae"},drk:{darkside:"#c000d1",blood:"#8803fc",darkarts:"#ffdf0d",drkComboTimer:"#cb8046",grit:"#82cad9"},nin:{ninComboTimer:"#8532a8",kazematoi:"#ab1fd1",meisui:"#559ef2",ninki:"#8532a8",bunshin:"#ed8021",kassatsu:"#fa9bd4",nozuchi:"#d6a440",dokumori:"#7e03a3",trick:"#e6b525"},mnk:{opo:"#feabf7",raptor:"#c495fb",coeurl:"#00d9a5",lunar:"#a984f5",solar:"#c6c5c3",riddleOfFire:"#d98d58",brotherhood:"#da4c32",chakra:"#fee11c",extraChakra:"#fe9b28"},whm:{lily:"#a5d0e8",blood:"#ff5454",pom:"#9788e0",asylum:"#b5e075",confession:"#8df2e8",temperance:"#77f7b7"},ast:{div:"#ffd535",astralCard:"#52d3f7",umbralCard:"#f7b3ff",lord:"#de1200",lady:"#d3d672",neutral:"#354869",synastry:"#578a7e",arrow:"#1690a8"},vpr:{vprComboTimer:"#dea65d",rattlingCoil:"#f64141",serpentOfferings:"#f64141",anguineTribute:"#24e2ff",huntersInstinct:"#9e5a02",swiftscaled:"#ffe20a"},sch:{chain:"#6f6f6f",faerieGauge:"#96ffbd",aetherflow:"#79d9d0",seraph:"#3299d9",feyIllumination:"#2cc7b0",dissipation:"#c4c4c4",protraction:"#77c990",recitation:"#ffce1c"},timeline:{ruler:"#e9e9e9",tracks:"#f3f3f3",castBar:"#ecd6f3",lockBar:"#9d9d9d",gcdBar:"#ccefc6",invalidBg:"#c21104",llCover:"#87ec71",potCover:"#ff865c",buffCover:"#9370db",damageMark:"#ff0000",healingMark:"#2cda30",aggroMark:"#ff8000",untargetableDamageMark:"#7f7f7f",mpTickMark:"#b6dfea",warningMark:"#ffbb29",lucidTickMark:"#88cae0",countdown:"rgba(0, 0, 0, 0.1)",markerAlpha:"7f"}};function UU(e){const t=Mt(),a=new Map([[k.AF3,t.blm.astralFire],[k.AF2,t.blm.astralFire],[k.AF1,t.blm.astralFire],[k.UI3,t.blm.umbralIce],[k.UI2,t.blm.umbralIce],[k.UI1,t.blm.umbralIce],[k.ENO,t.blm.enochian],[k.AUTO_CDH,t.resources.cdhTag],[k.STARRY,t.pct.starryBuff],[k.EMBOLDEN_M,t.rdm.emboldenBuff],[k.MANAFIC,t.rdm.manaficBuff],[k.ACCELERATION,t.rdm.accelBuff],[k.STANDARD_SINGLE,t.dnc.jete],[k.STANDARD_DOUBLE,t.dnc.jete],[k.TECHNICAL_SINGLE,t.dnc.esprit],[k.TECHNICAL_DOUBLE,t.dnc.esprit],[k.TECHNICAL_TRIPLE,t.dnc.esprit],[k.TECHNICAL_QUADRUPLE,t.dnc.esprit],[k.DEVILMENT,t.dnc.feathers],[k.OVERHEATED,"#ee79ee"],[k.COMBO,t.resources.comboTag],[k.FUGETSU,t.sam.fugetsu],[k.AUTO_CRIT,t.resources.cdhTag],[k.YATEN,t.pct.cometPaint],[k.POSITIONAL,"#50c53d"],[k.ARCANE_CIRCLE,"#ee79ee"],[k.DEATHSDESIGN,"#f64141"],[k.ENHANCED_GIBBET_GALLOWS,"#217ff5"],[k.ENHANCED_REAPING,"#9755ef"],[k.IMMORTAL_SACRIFICE,"#ee79ee"],[k.SURGING_TEMPEST,"#9755ef"],[k.BARRAGE,t.brd.barrage],[k.RAGING_STRIKES,t.brd.ragingStrikes],[k.BATTLE_VOICE,t.brd.battleVoice],[k.RADIANT_FINALE_THREE_CODA,t.brd.radiantFinale],[k.RADIANT_FINALE_TWO_CODA,t.brd.radiantFinale],[k.RADIANT_FINALE_ONE_CODA,t.brd.radiantFinale],[k.WANDERERS_MINUET,t.brd.wanderersCoda],[k.MAGES_BALLAD,t.brd.magesCoda],[k.ARMYS_PAEON,t.brd.armysCoda],[k.NO_MERCY,t.rdm.blackMana],[k.SEARING_LIGHT,t.smn.searing],[k.LIFE_SURGE,t.drg.lifeSurge],[k.LANCE_CHARGE,t.drg.lanceCharge],[k.LIFE_OF_THE_DRAGON,t.drg.lifeOfTheDragon],[k.BATTLE_LITANY,t.drg.battleLitany],[k.POWER_SURGE,t.drg.powerSurge],[k.ENHANCED_PIERCING_TALON,t.drg.enhancedPiercingTalon],[k.DIVINE_MIGHT,t.pld.divineMight],[k.REQUIESCAT,t.pld.requiescat],[k.FIGHT_OR_FLIGHT,t.pld.fightOrFlight],[k.PET,t.resources.petTag],[k.MOON_FLUTE,t.blu.moonflute],[k.WHISTLE,t.blu.whistle],[k.BRISTLE,t.blu.bristle],[k.TINGLEA,t.blu.tinglea],[k.TINGLEB,t.blu.tingleb],[k.SURPANAKHA,t.blu.surpanakha],[k.WINGED_REDEMPTION,t.blu.wingedreprobation],[k.WINGED_REPROBATION,t.blu.wingedreprobation],[k.DARKSIDE,t.drk.darkside],[k.BUNSHIN,t.nin.bunshin],[k.KASSATSU,t.nin.kassatsu],[k.HOLLOW_NOZUCHI,t.nin.nozuchi],[k.KAZEMATOI,t.nin.kazematoi],[k.MEISUI,t.nin.meisui],[k.DOKUMORI,t.nin.dokumori],[k.TRICK_ATTACK,t.nin.trick],[k.KUNAIS_BANE,t.nin.trick],[k.BROTHERHOOD,t.mnk.brotherhood],[k.RIDDLE_OF_FIRE,t.mnk.riddleOfFire],[k.MNK_BALL,t.mnk.opo],[k.SSS_CHAKRA,t.mnk.chakra],[k.DIVINATION,t.ast.div],[k.HUNTERS_INSTINCT,t.vpr.huntersInstinct],[k.HONED,t.vpr.vprComboTimer],[k.VENOM,t.vpr.vprComboTimer],[k.POISED,t.vpr.vprComboTimer],[k.CHAIN_STRAT,t.sch.chain]]);return console.assert(a.has(e),`modifier ${e} doesn't have a color!`),a.get(e)??t.text}function WN(e){const t=e.colorTheme==="Dark",a=t?c.jsx(bU,{}):c.jsx(DU,{}),i=Mt(),l=O.useContext(Nn),r=g({en:t?"Dark Mode":"Light Mode",zh:t?"":""});return c.jsx("div",{title:r,style:{display:"inline-block",cursor:"pointer",borderBottom:e.colorTheme===l?"none":"1px solid "+i.text,borderTop:e.colorTheme===l?"1px solid "+i.text:"none"},onClick:()=>e.setColorTheme(e.colorTheme),children:a})}const r0=()=>{var t;const e=bt("colorTheme");return e==="Light"||e==="Dark"?e:(t=window.matchMedia)!=null&&t.call(window,"(prefers-color-scheme: dark)").matches?"Dark":"Light"},Nn=O.createContext(r0());function xU(e){return c.jsx("div",{style:{display:"inline-block"},children:c.jsxs("div",{style:{display:"inline-block",fontSize:16},children:[c.jsx(WN,{colorTheme:"Light",setColorTheme:e.setColorTheme}),"|",c.jsx(WN,{colorTheme:"Dark",setColorTheme:e.setColorTheme})]})})}class cE{static getJob(t){return Et[t]}static getAction(t){return In[t]}static findAction(t){return this.findByName(In,t)}static findActionKey(t){return this.findKeyByName(In,t)}static getResource(t){return ze[t]}static findResource(t){return this.findByName(ze,t)}static findResourceKey(t){return this.findKeyByName(ze,t)}static getCooldown(t){return Is[t]}static findCooldown(t){return this.findByName(Is,t)}static findCooldownKey(t){return this.findKeyByName(Is,t)}static findByName(t,a){return Object.values(t).find(i=>i.name===a)}static findKeyByName(t,a){const i=Object.entries(t).find(([l,r])=>r.name===a);if(i)return i[0]}}function g(e){const t=ko();return t==="zh"&&e.zh?e.zh:t==="ja"&&e.ja?e.ja:e.en}function kU(e,t){{const[a,i,l]=e.split("/");return`20${l}${a}${i}`}}function gu(e){switch(e){case"spellSpeed":return g({en:"spell speed: ",zh:""}).toString();case"skillSpeed":return g({en:"skill speed: ",zh:""}).toString();case"fps":return g({en:"FPS: ",zh:""}).toString();case"criticalHit":return g({en:"crit: ",zh:""}).toString();case"directHit":return g({en:"direct hit: ",zh:""}).toString();case"determination":return g({en:"determination: ",zh:""}).toString();case"piety":return g({en:"piety: ",zh:""}).toString();case"animationLock":return g({en:"animation lock: ",zh:""}).toString()}return e}function Ti(e){if(e==="NEVER")return g({en:"unknown skill",zh:""}).toString();if(!(e in In))return e;const t=cE.getAction(e);return g({en:t.name,...t.label}).toString()}function _s(e){if(e===void 0)return g({en:"reason unknown",zh:""}).toString();let t="";return e===ft.Blocked?t="CD":e===ft.SecondaryBlocked?t="CD":e===ft.NotEnoughMP?t="MP":e===ft.NotInCombat?t="":e===ft.RequirementsNotMet?t="":e===ft.SkillNotUnlocked?t="Lv":e===ft.BuffNoLongerAvailable?t="BUFF":e===ft.PastTargetTime?t="":e===ft.CastCanceled?t="":e===ft.UnknownSkill?t="":console.error("unlocalized reason: "+e),g({en:e,zh:t}).toString()}const PU=new Map([[x.LeyLines,""],[x.Hyperphantasia,""],[x.Tincture,""],[x.ArcaneCircle,""],[x.ArmysPaeon,""],[x.BattleLitany,""],[x.BattleVoice,""],[x.Brotherhood,""],[x.Card_TheBalance,""],[x.Card_TheSpear,""],[x.ChainStratagem,""],[x.Devilment,""],[x.Divination,""],[x.Dokumori,""],[x.Embolden,""],[x.MagesBallad,""],[x.RadiantFinale1,"1"],[x.RadiantFinale2,"2"],[x.RadiantFinale3,"3"],[x.SearingLight,""],[x.StandardFinish,""],[x.StarryMuse,""],[x.TechnicalFinish,""],[x.WanderersMinuet,""]]),wU=new Map([[x.LeyLines,""],[x.Tincture,""],[x.ArcaneCircle,""],[x.ArmysPaeon,""],[x.BattleLitany,""],[x.BattleVoice,""],[x.Brotherhood,""],[x.Card_TheBalance,""],[x.Card_TheSpear,""],[x.ChainStratagem,""],[x.Devilment,""],[x.Divination,""],[x.Dokumori,""],[x.Embolden,""],[x.MagesBallad,""],[x.RadiantFinale1,"1"],[x.RadiantFinale2,"2"],[x.RadiantFinale3,"3"],[x.SearingLight,""],[x.StandardFinish,""],[x.StarryMuse,""],[x.TechnicalFinish,""],[x.WanderersMinuet,""]]);function c0(e){const t=ko();return t==="zh"?PU.get(e)??e:t==="ja"?wU.get(e)??e:e}function Xe(e){const t=ko();if(e in Is){const i=cE.getCooldown(e),l=g({en:i.name,...i.label}).toString();if(t!=="en"&&l===i.name){const r=e.slice(3),d=Object.keys(In).find(E=>In[E].name===r||E===r);if(d!==void 0)return"CD"+Ti(d)}return l}const a=cE.getResource(e);return g({en:a.name,...a.label}).toString()}const XN=new Map([[k.AF3,{en:"AF3",zh:""}],[k.AF2,{en:"AF2",zh:""}],[k.AF1,{en:"AF1",zh:""}],[k.UI3,{en:"UI3",zh:""}],[k.UI2,{en:"UI2",zh:""}],[k.UI1,{en:"UI1",zh:""}],[k.ENO,{en:"enochian",zh:""}],[k.POT,{en:"pot",zh:""}],[k.PARTY,{en:"party",zh:""}],[k.AUTO_CDH,{en:"auto crit/direct hit",zh:""}],[k.STARRY,{en:"starry muse",zh:""}],[k.EMBOLDEN_M,{en:"embolden",zh:""}],[k.MANAFIC,{en:"manafication",zh:""}],[k.ACCELERATION,{en:"acceleration",zh:""}],[k.STANDARD_SINGLE,{en:"single standard finish",zh:""}],[k.STANDARD_DOUBLE,{en:"double standard finish",zh:""}],[k.TECHNICAL_SINGLE,{en:"single technical finish",zh:""}],[k.TECHNICAL_DOUBLE,{en:"double technical finish",zh:""}],[k.TECHNICAL_TRIPLE,{en:"triple technical finish",zh:""}],[k.TECHNICAL_QUADRUPLE,{en:"quadruple technical finish",zh:""}],[k.DEVILMENT,{en:"devilment",zh:""}],[k.OVERHEATED,{en:"overheated",zh:""}],[k.COMBO,{en:"combo",zh:""}],[k.FUGETSU,{en:"fugetsu",zh:""}],[k.AUTO_CRIT,{en:"auto crit",zh:""}],[k.YATEN,{en:"yaten",zh:""}],[k.POSITIONAL,{en:"positional",zh:""}],[k.ARCANE_CIRCLE,{en:"arcane circle",zh:""}],[k.DEATHSDESIGN,{en:"death's design",zh:""}],[k.ENHANCED_GIBBET_GALLOWS,{en:"enhanced gibbet/gallows",zh:"/"}],[k.ENHANCED_REAPING,{en:"enhanced reaping",zh:"/"}],[k.IMMORTAL_SACRIFICE,{en:"immortal sacrifice"}],[k.BARRAGE,{en:"barrage"}],[k.RAGING_STRIKES,{en:"raging strikes"}],[k.BATTLE_VOICE,{en:"battle voice"}],[k.RADIANT_FINALE_THREE_CODA,{en:"three coda radiant finale"}],[k.RADIANT_FINALE_TWO_CODA,{en:"two coda radiant finale"}],[k.RADIANT_FINALE_ONE_CODA,{en:"one coda radiant finale"}],[k.WANDERERS_MINUET,{en:"wanderer's minuet"}],[k.MAGES_BALLAD,{en:"mage's ballad"}],[k.ARMYS_PAEON,{en:"army's paeon"}],[k.NO_MERCY,{en:"no mercy",zh:""}],[k.SEARING_LIGHT,{en:"searing light",zh:""}],[k.SURGING_TEMPEST,{en:"surging tempest",zh:""}],[k.POWER_SURGE,{en:"power surge"}],[k.LANCE_CHARGE,{en:"lance charge"}],[k.ENHANCED_PIERCING_TALON,{en:"enhanced piercing talon"}],[k.LIFE_OF_THE_DRAGON,{en:"life of the dragon"}],[k.LIFE_SURGE,{en:"life surge"}],[k.PET,{en:"pet modifier",zh:""}],[k.DIVINE_MIGHT,{en:"divine might",zh:""}],[k.REQUIESCAT,{en:"requiescat",zh:""}],[k.FIGHT_OR_FLIGHT,{en:"fight or flight",zh:""}],[k.WHISTLE,{en:"WH",zh:""}],[k.BRISTLE,{en:"BR",zh:""}],[k.MOON_FLUTE,{en:"MF",zh:""}],[k.TINGLEA,{en:"TING",zh:""}],[k.TINGLEB,{en:"TING",zh:""}],[k.WINGED_REPROBATION,{en:"WREP",zh:""}],[k.WINGED_REDEMPTION,{en:"WRED",zh:""}],[k.DARKSIDE,{en:"darkside",zh:""}],[k.BUNSHIN,{en:"bunshin",zh:""}],[k.KASSATSU,{en:"kassatsu",zh:""}],[k.HOLLOW_NOZUCHI,{en:"hollow nozuchi",zh:""}],[k.KAZEMATOI,{en:"kazematoi",zh:""}],[k.MEISUI,{en:"meisui",zh:""}],[k.DOKUMORI,{en:"dokumori",zh:""}],[k.TRICK_ATTACK,{en:"trick attack",zh:""}],[k.KUNAIS_BANE,{en:"kunai's bane",zh:""}],[k.BROTHERHOOD,{en:"brotherhood",zh:""}],[k.RIDDLE_OF_FIRE,{en:"riddle of fire",zh:""}],[k.MNK_BALL,{en:"ball",zh:""}],[k.SSS_CHAKRA,{en:"chakra",zh:""}],[k.DIVINATION,{en:"divination",zh:""}],[k.HUNTERS_INSTINCT,{en:"hunter's instinct",zh:""}],[k.HONED,{en:"honed"}],[k.VENOM,{en:"venom"}],[k.POISED,{en:"poised"}],[k.CHAIN_STRAT,{en:"chain stratagem",zh:""}]]);function qN(e){return console.assert(XN.has(e),`modifier ${e} doesn't have a name!`),g(XN.get(e)??{en:"unknown"})}const ZN=new Map([[k.AF3,{en:"AF3",zh:""}],[k.AF2,{en:"AF2",zh:""}],[k.AF1,{en:"AF1",zh:""}],[k.UI3,{en:"UI3",zh:""}],[k.UI2,{en:"UI2",zh:""}],[k.UI1,{en:"UI1",zh:""}],[k.ENO,{en:"ENO",zh:""}],[k.POT,{en:"pot",zh:""}],[k.PARTY,{en:"party",zh:""}],[k.AUTO_CDH,{en:"CDH",zh:""}],[k.STARRY,{en:"STARRY",zh:""}],[k.EMBOLDEN_M,{en:"MB",zh:""}],[k.MANAFIC,{en:"MF",zh:""}],[k.ACCELERATION,{en:"ACC",zh:""}],[k.STANDARD_SINGLE,{en:"SSF",zh:""}],[k.STANDARD_DOUBLE,{en:"DSF",zh:""}],[k.TECHNICAL_SINGLE,{en:"STF",zh:""}],[k.TECHNICAL_DOUBLE,{en:"DTF",zh:""}],[k.TECHNICAL_TRIPLE,{en:"TTF",zh:""}],[k.TECHNICAL_QUADRUPLE,{en:"QTF",zh:""}],[k.DEVILMENT,{en:"DEV",zh:""}],[k.OVERHEATED,{en:"OVERHEATED",zh:""}],[k.COMBO,{en:"CMB",zh:""}],[k.FUGETSU,{en:"FGS",zh:""}],[k.AUTO_CRIT,{en:"CRIT",zh:""}],[k.YATEN,{en:"ENH",zh:""}],[k.POSITIONAL,{en:"PS",zh:""}],[k.ARCANE_CIRCLE,{en:"AC",zh:""}],[k.DEATHSDESIGN,{en:"DD",zh:""}],[k.ENHANCED_GIBBET_GALLOWS,{en:"E. GIB/GAL",zh:"/"}],[k.ENHANCED_REAPING,{en:"E. REAPING",zh:"/"}],[k.IMMORTAL_SACRIFICE,{en:"IMMORTAL SAC",zh:""}],[k.BARRAGE,{en:"BRG"}],[k.RAGING_STRIKES,{en:"RS"}],[k.BATTLE_VOICE,{en:"BV"}],[k.RADIANT_FINALE_THREE_CODA,{en:"RF3"}],[k.RADIANT_FINALE_TWO_CODA,{en:"RF2"}],[k.RADIANT_FINALE_ONE_CODA,{en:"RF1"}],[k.WANDERERS_MINUET,{en:"WM"}],[k.MAGES_BALLAD,{en:"MB"}],[k.ARMYS_PAEON,{en:"AP"}],[k.NO_MERCY,{en:"NM",zh:""}],[k.SEARING_LIGHT,{en:"SL",zh:""}],[k.SURGING_TEMPEST,{en:"SURGING",zh:""}],[k.POWER_SURGE,{en:"PWS"}],[k.LANCE_CHARGE,{en:"LC"}],[k.LIFE_OF_THE_DRAGON,{en:"LIFE"}],[k.ENHANCED_PIERCING_TALON,{en:"ENH"}],[k.LIFE_SURGE,{en:"LS"}],[k.BATTLE_LITANY,{en:"BL"}],[k.DIVINE_MIGHT,{en:"DM",zh:""}],[k.REQUIESCAT,{en:"REQ",zh:""}],[k.FIGHT_OR_FLIGHT,{en:"FOF",zh:""}],[k.PET,{en:"PET",zh:""}],[k.WHISTLE,{en:"WH",zh:""}],[k.BRISTLE,{en:"BR",zh:""}],[k.MOON_FLUTE,{en:"MF",zh:""}],[k.TINGLEA,{en:"TING",zh:""}],[k.TINGLEB,{en:"TING",zh:""}],[k.WINGED_REPROBATION,{en:"WREP",zh:""}],[k.WINGED_REDEMPTION,{en:"WRED",zh:""}],[k.DARKSIDE,{en:"DS",zh:""}],[k.BUNSHIN,{en:"BUN",zh:""}],[k.KASSATSU,{en:"KASS",zh:""}],[k.HOLLOW_NOZUCHI,{en:"NOZ",zh:""}],[k.KAZEMATOI,{en:"KAZ",zh:""}],[k.MEISUI,{en:"MEI",zh:""}],[k.DOKUMORI,{en:"DOKU",zh:""}],[k.TRICK_ATTACK,{en:"TRICK",zh:""}],[k.KUNAIS_BANE,{en:"KB",zh:""}],[k.BROTHERHOOD,{en:"BH",zh:""}],[k.RIDDLE_OF_FIRE,{en:"ROF",zh:""}],[k.MNK_BALL,{en:"BALL",zh:""}],[k.SSS_CHAKRA,{en:"CHAKRA",zh:""}],[k.DIVINATION,{en:"DIV",zh:""}],[k.HUNTERS_INSTINCT,{en:"HI",zh:""}],[k.HONED,{en:"HONED"}],[k.VENOM,{en:"VENOM"}],[k.POISED,{en:"POISED"}],[k.CHAIN_STRAT,{en:"CHAIN",zh:""}]]);function GU(e){return console.assert(ZN.has(e),`modifier ${e} doesn't have a tag name!`),g(ZN.get(e)??{en:"unknown"})}let ko=()=>"en";function QN(e){let t="English";e.lang==="zh"&&(t=""),e.lang==="ja"&&(t="");const a=Mt();return c.jsx("div",{style:{display:"inline-block",cursor:"pointer",textDecoration:e.lang===ko()?"none":"underline",borderTop:e.lang===ko()?"1px solid "+a.text:"none"},onClick:()=>{e.setCurrentLanguage(e.lang)},children:t})}function BU(){const e=bt("language"),t=e==="zh"||e==="ja"?e:"en",[a,i]=O.useState(t),l=r=>{i(r),It("language",r)};return O.useEffect(()=>(ko=()=>a,()=>{ko=()=>"en"})),O.useEffect(()=>{N.updateAllDisplay()},[a]),c.jsxs("div",{style:{display:"inline-block"},children:[c.jsx("span",{style:{display:"inline-block",fontSize:17,position:"relative",marginRight:2},children:c.jsx(OU,{})}),c.jsxs("div",{style:{display:"inline-block",fontSize:14,verticalAlign:"top"},children:[c.jsx(QN,{lang:"en",setCurrentLanguage:l}),"|",c.jsx(QN,{lang:"zh",setCurrentLanguage:l})]})]})}const u0=ae()({UNIMPLEMENTED:{},OUTDATED:{label:{en:"Outdated",zh:""},warningContent:{en:"WARNING: This job recently had significant changes, and may not have been fully updated to reflect them. Exported plans may not load correctly following these changes, so be cautious about relying on them until the job has been fully updated.",zh:"bugtxt"}},TESTING:{label:{en:"Testing",zh:""},warningContent:{en:"WARNING: This job was recently added to XIV in the Shell and is still being tested. There may be bugs or changes in the near future, so make sure to frequently export and save timelines for this job to make sure you don't lose your work.",zh:"txt"}},LIVE:{}});ae()({TANK:{label:g({en:"Tank"})},HEALER:{label:g({en:"Healer"})},MELEE:{label:g({en:"Melee"})},RANGED:{label:g({en:"Ranged"})},CASTER:{label:g({en:"Caster"})},LIMITED:{label:g({en:"Limited"})}});const d0=ae()({PLD:{role:"TANK",implementationLevel:"TESTING",usesMp:!0,limitBreak:"LAST_BASTION",limitBreakBuff:"LAST_BASTION",mainStat:"strength"},WAR:{role:"TANK",implementationLevel:"LIVE",limitBreak:"LAND_WAKER",limitBreakBuff:"LAND_WAKER",mainStat:"strength"},DRK:{role:"TANK",implementationLevel:"LIVE",usesMp:!0,limitBreak:"DARK_FORCE",limitBreakBuff:"DARK_FORCE",mainStat:"strength"},GNB:{role:"TANK",implementationLevel:"LIVE",limitBreak:"GUNMETAL_SOUL",limitBreakBuff:"GUNMETAL_SOUL",mainStat:"strength"}}),FT=ae()({WHM:{role:"HEALER",implementationLevel:"TESTING",usesMp:!0,limitBreak:"PULSE_OF_LIFE",mainStat:"mind"},SCH:{role:"HEALER",implementationLevel:"TESTING",usesMp:!0,limitBreak:"ANGEL_FEATHERS",mainStat:"mind"},AST:{role:"HEALER",implementationLevel:"TESTING",usesMp:!0,limitBreak:"ASTRAL_STASIS",mainStat:"mind"},SGE:{role:"HEALER",implementationLevel:"TESTING",usesMp:!0,limitBreak:"TECHNE_MAKRE",mainStat:"mind"}}),h0=ae()({MNK:{role:"MELEE",implementationLevel:"LIVE",limitBreak:"FINAL_HEAVEN",mainStat:"strength"},DRG:{role:"MELEE",implementationLevel:"LIVE",limitBreak:"DRAGONSONG_DIVE",mainStat:"strength"},NIN:{role:"MELEE",implementationLevel:"LIVE",limitBreak:"CHIMATSURI",mainStat:"dexterity"},SAM:{role:"MELEE",implementationLevel:"LIVE",limitBreak:"DOOM_OF_THE_LIVING",mainStat:"strength"},RPR:{role:"MELEE",implementationLevel:"LIVE",limitBreak:"THE_END",mainStat:"strength"},VPR:{role:"MELEE",implementationLevel:"LIVE",limitBreak:"WORLD_SWALLOWER",mainStat:"dexterity"}}),E0=ae()({BRD:{role:"RANGED",implementationLevel:"LIVE",limitBreak:"SAGITTARIUS_ARROW",mainStat:"dexterity"},MCH:{role:"RANGED",implementationLevel:"LIVE",limitBreak:"SATELLITE_BEAM",mainStat:"dexterity"},DNC:{role:"RANGED",implementationLevel:"LIVE",limitBreak:"CRIMSON_LOTUS",mainStat:"dexterity"}}),f0=ae()({BLM:{role:"CASTER",implementationLevel:"LIVE",usesMp:!0,limitBreak:"METEOR",mainStat:"intelligence"},SMN:{role:"CASTER",implementationLevel:"LIVE",usesMp:!0,limitBreak:"TERAFLARE",mainStat:"intelligence"},RDM:{role:"CASTER",implementationLevel:"LIVE",usesMp:!0,limitBreak:"VERMILLION_SCOURGE",mainStat:"intelligence"},PCT:{role:"CASTER",implementationLevel:"LIVE",usesMp:!0,limitBreak:"CHROMATIC_FANTASY",mainStat:"intelligence"}}),A0=ae()({BLU:{role:"LIMITED",implementationLevel:"TESTING",usesMp:!0,mainStat:"intelligence"}}),Et={...d0,...FT,...h0,...E0,...f0,...A0,...ae()({NEVER:{role:"LIMITED",implementationLevel:"UNIMPLEMENTED",usesMp:!1,mainStat:"strength"}})},Os=Object.keys(Et),Sa=Object.keys(d0),Si=Object.keys(FT),ca=Object.keys(h0),Ul=Object.keys(E0),Ii=Object.keys(f0),fc=Object.keys(A0);var Ea=(e=>(e[e.ManaGain=0]="ManaGain",e[e.MpTick=1]="MpTick",e[e.LucidTick=2]="LucidTick",e[e.MeditateTick=3]="MeditateTick",e[e.AutoTick=4]="AutoTick",e))(Ea||{}),fs;class ve{constructor(t,a,i){Z(this,"name");Ye(this,fs);Z(this,"timeTillEvent");Z(this,"delay");Z(this,"effectFn");Z(this,"canceled");this.name=t,Ue(this,fs,[]),this.timeTillEvent=a,this.delay=a,this.effectFn=i,this.canceled=!1}hasTag(t){for(let a=0;a<le(this,fs).length;a++)if(t===le(this,fs)[a])return!0;return!1}addTag(t){this.hasTag(t)||le(this,fs).push(t)}}fs=new WeakMap;class m0{constructor(t,a){Z(this,"maxValue");Z(this,"currentValue");this.maxValue=t,this.currentValue=a}availableAmount(){return this.currentValue}consume(t){this.currentValue<t-_n.epsilon&&console.warn(`invalid resource consumption: ${this.type}, ${this.currentValue} - ${t}`),this.currentValue=Math.max(this.currentValue-t,0)}gain(t){this.currentValue=Math.min(this.currentValue+t,this.maxValue)}overrideCurrentValue(t){(t<0||t>this.maxValue)&&console.warn(`invalid resource value override: ${this.type}, ${t} should be in [0, ${this.maxValue}]`),this.currentValue=t}}var Ku;class sa extends m0{constructor(a,i,l,r=!1){super(i,l);Z(this,"type");Z(this,"enabled");Z(this,"warnOnOvercap");Z(this,"pendingChange");Ye(this,Ku);this.type=a,this.enabled=!0,this.warnOnOvercap=r}available(a){return this.availableAmount()+_n.epsilon>=a}availableAmountIncludingDisabled(){return this.currentValue}availableAmount(){return this.enabled?super.availableAmount():0}gain(a){this.warnOnOvercap&&this.currentValue+a>this.maxValue&&N.reportWarning({kind:"overcap",rsc:this.type}),super.gain(a)}gainWrapping(a){this.currentValue=(this.currentValue+a)%(this.maxValue+1)}overrideTimer(a,i){this.pendingChange?(a.addEvent(new ve("override "+this.pendingChange.name+" timer: "+i,0,()=>{this.pendingChange&&(this.pendingChange.timeTillEvent=i)})),this.pendingChange.timeTillEvent=i):console.error(`Failed to override non-pending resource timer for resource: ${this.type}`)}removeTimer(){this.pendingChange&&(this.pendingChange.canceled=!0,this.pendingChange=void 0)}getLastExpirationTime(){return le(this,Ku)}consume(a){super.consume(a),this.currentValue===0&&Ue(this,Ku,N.game.getDisplayTime())}}Ku=new WeakMap;var Wr,Tl,Oi;class Ge extends m0{constructor(a,i,l,r){super(l,r);Z(this,"type");Ye(this,Wr);Ye(this,Tl);Ye(this,Oi);this.type=a,Ue(this,Wr,i),Ue(this,Tl,i),Ue(this,Oi,0)}currentStackCd(){return le(this,Tl)}maxStacks(){return this.maxValue}useStack(){this.stacksAvailable()===this.maxStacks()&&Ue(this,Oi,le(this,Tl)),super.consume(1)}useStackWithRecast(a){console.assert(this.maxStacks()===1,"class CoolDown assumes special recasts are only available for skills with at most 1 stack"),Ue(this,Tl,a),this.useStack()}restore(a){for(;a>0&&super.availableAmount()<this.maxStacks();){const i=Math.min(le(this,Oi),a);Ue(this,Oi,le(this,Oi)-i),le(this,Oi)<_n.epsilon&&(super.gain(1),Ue(this,Tl,le(this,Wr)),this.stacksAvailable()<this.maxStacks()&&Ue(this,Oi,le(this,Oi)+le(this,Wr))),a-=i}}timeTillNextStackAvailable(){return le(this,Oi)}overrideTimeTillNextStack(a){Ue(this,Oi,a)}stacksAvailable(){return super.availableAmount()}}Wr=new WeakMap,Tl=new WeakMap,Oi=new WeakMap;var Sl;class FU{constructor(t){Z(this,"game");Ye(this,Sl);this.game=t,Ue(this,Sl,new Map)}forEach(t){le(this,Sl).forEach(t)}get(t){const a=le(this,Sl).get(t);return a||(console.assert(!1,`no cooldown for resource ${t}`),new Ge("NEVER",0,0,0))}set(t){le(this,Sl).set(t.type,t)}tick(t){for(const a of le(this,Sl).values())a.restore(t)}timeTillNextStackAvailable(t){return this.get(t).timeTillNextStackAvailable()}timeTillAnyStackAvailable(t){const a=this.get(t);return a.stacksAvailable()>0?0:a.timeTillNextStackAvailable()}}Sl=new WeakMap;var Xr;class zU{constructor(t){Z(this,"game");Ye(this,Xr);this.game=t,Ue(this,Xr,new Map)}get(t){const a=le(this,Xr).get(t);return a||(console.error(`could not find resource ${t}`),new sa("NEVER",0,0))}set(t){le(this,Xr).set(t.type,t)}timeTillReady(t){const a=this.get(t);return a.pendingChange?a.pendingChange.timeTillEvent:0}addResourceEvent(t){const a=this.get(t.rscType),i=new ve(t.name,t.delay,()=>{a.pendingChange=void 0,t.fnOnRsc(a)});a.pendingChange=i,t.tags&&t.tags.forEach(l=>{i.addTag(l)}),this.game.addEvent(i)}takeResourceLock(t,a){this.get(t).consume(1),this.addResourceEvent({rscType:t,name:"[resource ready] "+t,delay:a,fnOnRsc:i=>{i.gain(1)}})}}Xr=new WeakMap;const uE=new Map,R0=new Map,T0=new Map,S0=new Map;function $N(e){return R0.get(e.toLowerCase())??T0.get(e)??S0.get(e)}function Vt(e,t){const a=uE.get(e);return a.has(t)||console.error(`no resource info found for ${t}`),a.get(t)}function Ji(e){return uE.has(e)||console.error("could not find resources for job "+e),uE.get(e)}function qe(e,t,a,i){Ji(e).set(t,{isCoolDown:!1,defaultValue:i.default??0,maxValue:a,maxTimeout:i.timeout??-1,warnOnOvercap:i.warnOnOvercap??!1,warnOnTimeout:i.warnOnTimeout??!1});const l=ze[t].label;R0.set(ze[t].name.toLowerCase(),t),(l==null?void 0:l.zh)!==void 0&&T0.set(l.zh,t),(l==null?void 0:l.ja)!==void 0&&S0.set(l.ja,t)}Os.forEach(e=>{uE.set(e,new Map([["cd_GCD",{isCoolDown:!0,maxStacks:1,cdPerStack:2.5}]])),qe(e,"IN_COMBAT",1,{default:0}),qe(e,"MANA",1e4,{default:1e4}),qe(e,"TINCTURE",1,{timeout:30}),qe(e,"SPRINT",1,{timeout:10}),qe(e,"PARTY_SIZE",8,{default:8}),qe(e,"AUTOS_ENGAGED",1,{default:0}),qe(e,"STORED_AUTO",1,{default:0})});ca.forEach(e=>{qe(e,"REAR_POSITIONAL",1,{default:1}),qe(e,"FLANK_POSITIONAL",1,{default:1})});function Uu(e,t,a,i=1){Ji(e).set(t,{isCoolDown:!0,cdPerStack:a,maxStacks:i})}class zT{constructor(t){Z(this,"type");Z(this,"timeTillFullOrDrop");Z(this,"stacks");Z(this,"effectOrTimerEnabled");this.type=t.type,this.timeTillFullOrDrop=t.timeTillFullOrDrop,this.stacks=t.stacks,this.effectOrTimerEnabled=t.effectOrTimerEnabled}equals(t){return this.type===t.type&&this.timeTillFullOrDrop===t.timeTillFullOrDrop&&this.stacks===t.stacks&&this.effectOrTimerEnabled===t.effectOrTimerEnabled}static fromGameState(t){const a=[];return t.cooldowns.forEach((i,l)=>{i.availableAmount(),a.push(new zT({type:l,timeTillFullOrDrop:i.maxValue-i.availableAmount(),stacks:0,effectOrTimerEnabled:!0}))}),a}applyTo(t){const a=Ji(t.job).get(this.type);if(!a){console.assert(!1,`can't apply override ${this.type} to job ${t.job}`);return}if(a.isCoolDown){const i=t.cooldowns.get(this.type),l=i.maxStacks()*i.currentStackCd()-this.timeTillFullOrDrop,r=Math.floor((l+_n.epsilon)/i.currentStackCd()),d=this.timeTillFullOrDrop%i.currentStackCd();i.overrideCurrentValue(r),i.overrideTimeTillNextStack(d)}else{const i=t.resources.get(this.type),l=r=>{i.removeTimer(),t.resources.addResourceEvent({rscType:i.type,name:"drop "+i.type,delay:r,fnOnRsc:d=>{i.type==="ENOCHIAN"?t.loseEnochian():d.consume(d.availableAmount())}})};if(i.type==="LEY_LINES")i.consume(i.availableAmount()),i.gain(1),l(this.timeTillFullOrDrop),i.enabled=this.effectOrTimerEnabled;else if(i.type==="POLYGLOT"){const r=this.stacks;i.consume(i.availableAmount()),i.gain(r);const d=this.timeTillFullOrDrop;d>0&&i.overrideTimer(t,d)}else{const r=this.stacks;i.consume(i.availableAmount()),i.gain(r);const d=this.timeTillFullOrDrop;r>0&&a.maxTimeout>=0&&l(d)}}}serialized(){return{type:this.type,timeTillFullOrDrop:this.timeTillFullOrDrop,stacks:this.stacks,effectOrTimerEnabled:this.effectOrTimerEnabled}}}const Wt=.8,Ia=.01;function xu(e,t){}function ke(e,...t){return(a,i)=>{e!==void 0&&e(a,i);for(const l of t)l!==void 0&&l(a,i)}}function Qu(e,...t){return a=>(e===void 0||e(a))&&t.every(i=>i===void 0||i(a))}const bs=new Map,jT=new Map;Os.forEach(e=>{bs.set(e,new Map),jT.set(e,new Map)});const dE=new Map,KE="General/Missing.png",ku=new Map;ku.set(UT.ENERGY_DRAIN.id,"ENERGY_DRAIN");ku.set(UT.PHYSICK.id,"PHYSICK");const JN=new Set,HR=new Map,I0=new Map,_0=new Map,ep=new Map([["Lightning Shock","Lightning Shot"],["Wanderer's Minuet","The Wanderer's Minuet"],["Apex Arow","Apex Arrow"],["Storms Eye","Storm's Eye"],["Storms Path","Storm's Path"]]);function YT(e){return ep.has(e)&&(e=ep.get(e)),e=e.toLowerCase(),!HR.has(e)&&!JN.has(e)&&(console.error(`could not find skill with name: ${e}`),JN.add(e)),HR.get(e)}function jU(e){return e in ze?e:cE.findResourceKey(e)}function gl(e,t){return bs.get(e).get(t)}function g0(e){return dE.get(e)??KE}function YU(e,t){return bs.get(e).has(t)}function VE(e,t,a){bs.get(e).set(t,a),jT.get(e).set(In[t].discordEmote??In[t].name.replaceAll(" ",""),t),HR.set(In[t].name.toLowerCase(),t);const i=In[t].label;(i==null?void 0:i.zh)!==void 0&&I0.set(i.zh,t),(i==null?void 0:i.ja)!==void 0&&_0.set(i.ja,t),dE.set(t,a.assetPath),In[t].id!==void 0&&ku.set(In[t].id,t)}function ma(e,t){return e===void 0?a=>t||0:typeof e=="number"?a=>e:e}function KU(e){return console.assert(e.length>0,`invalid trait potency array: ${e}`),t=>{let a;const i=t.config.level;for(const[l,r]of e)t.hasTraitUnlocked(l)&&(a=r);return console.assert(a!==void 0,`no applicable potency at level ${i} found in array ${e}`),a||0}}function an(e,t){return(Array.isArray(t)?KU(t):ma(t,0))(e)}function KT(e,t){const a=In[t].name;return`${e}/${a.replace(":","")}.png`}function $a(e,t,a,i){Array.isArray(e)||(e=[e]);const l=ke((h,A)=>A.applicationTime=h.time,i.onApplication),r=ke(h=>h.maybeCancelChanneledSkills(t),i.onExecute),d=h=>{const A=[];return i.potency&&(i.combo||i.positional)&&A.push(...h.computeComboAndPositionalModifiers(an(h,i.potency),i.combo,i.positional)),i.jobPotencyModifiers&&A.push(...i.jobPotencyModifiers(h)),A},E={kind:"spell",name:t,assetPath:i.assetPath??(e.length===1?KT(e[0],t):KE),unlockLevel:a,autoUpgrade:i.autoUpgrade,autoDowngrade:i.autoDowngrade,cdName:"cd_GCD",secondaryCd:i.secondaryCooldown,aspect:i.aspect??_e.Other,replaceIf:i.replaceIf??[],startOnHotbar:i.startOnHotbar??!0,highlightIf:i.highlightIf??(h=>!1),castTimeFn:ma(i.castTime,0),recastTimeFn:ma(i.recastTime,2.5),animationLockFn:h=>ma(i.animationLock,h.config.animationLock)(h),manaCostFn:ma(i.manaCost,0),potencyFn:h=>an(h,i.potency),jobPotencyModifiers:d,drawsAggro:i.drawsAggro??!1,falloff:i.falloff,healingPotencyFn:h=>an(h,i.healingPotency),jobHealingPotencyModifiers:i.jobHealingPotencyModifiers??(h=>[]),aoeHeal:i.aoeHeal??!1,validateAttempt:i.validateAttempt??(h=>!0),isInstantFn:i.isInstantFn??(h=>!1),onExecute:r,onConfirm:i.onConfirm??xu,onApplication:l,applicationDelay:i.applicationDelay??0,startsAuto:i.startsAuto??!1};if(e.forEach(h=>VE(h,E.name,E)),i.secondaryCooldown!==void 0){const{cdName:h,cooldown:A,maxCharges:R}=i.secondaryCooldown;e.forEach(T=>Uu(T,h,A,R))}return E}function on(e,t,a,i){Array.isArray(e)||(e=[e]);const l=ke((h,A)=>A.applicationTime=h.time,i.onApplication),r=ke(h=>h.maybeCancelChanneledSkills(t),i.onExecute),d=h=>{const A=[];return i.potency&&(i.combo||i.positional)&&A.push(...h.computeComboAndPositionalModifiers(an(h,i.potency),i.combo,i.positional)),i.jobPotencyModifiers&&A.push(...i.jobPotencyModifiers(h)),A},E={kind:"weaponskill",name:t,assetPath:i.assetPath??(e.length===1?KT(e[0],t):KE),unlockLevel:a,autoUpgrade:i.autoUpgrade,autoDowngrade:i.autoDowngrade,cdName:"cd_GCD",secondaryCd:i.secondaryCooldown,aspect:i.aspect??_e.Other,replaceIf:i.replaceIf??[],startOnHotbar:i.startOnHotbar??!0,highlightIf:i.highlightIf??(h=>!1),castTimeFn:ma(i.castTime,0),recastTimeFn:ma(i.recastTime,2.5),animationLockFn:h=>ma(i.animationLock,h.config.animationLock)(h),manaCostFn:ma(i.manaCost,0),potencyFn:h=>an(h,i.potency),jobPotencyModifiers:d,drawsAggro:i.drawsAggro??!1,falloff:i.falloff,healingPotencyFn:h=>an(h,i.healingPotency),jobHealingPotencyModifiers:i.jobHealingPotencyModifiers??(h=>[]),aoeHeal:i.aoeHeal??!1,validateAttempt:i.validateAttempt??(h=>!0),isInstantFn:i.isInstantFn??(h=>!0),onExecute:r,onConfirm:i.onConfirm??xu,onApplication:l,applicationDelay:i.applicationDelay??0,startsAuto:i.startsAuto??!0};if(e.forEach(h=>VE(h,E.name,E)),i.secondaryCooldown!==void 0){const{cdName:h,cooldown:A,maxCharges:R}=i.secondaryCooldown;e.forEach(T=>Uu(T,h,A,R))}return E}function lt(e,t,a,i,l){Array.isArray(e)||(e=[e]);const r=ke((A,R)=>R.applicationTime=A.time,l.onApplication),d=ke(A=>A.maybeCancelChanneledSkills(t),l.onExecute),E=Qu(A=>l.requiresCombat?A.isInCombat():!0,l.validateAttempt??(A=>!0)),h={kind:"ability",name:t,assetPath:l.assetPath??(e.length===1?KT(e[0],t):KE),requiresCombat:l.requiresCombat,unlockLevel:a,autoUpgrade:l.autoUpgrade,autoDowngrade:l.autoDowngrade,cdName:i,secondaryCd:l.secondaryCooldown,aspect:l.aspect??_e.Other,replaceIf:l.replaceIf??[],startOnHotbar:l.startOnHotbar??!0,highlightIf:l.highlightIf??(A=>!1),animationLockFn:A=>ma(l.animationLock,A.config.animationLock)(A),manaCostFn:ma(l.manaCost,0),potencyFn:A=>an(A,l.potency),jobPotencyModifiers:l.jobPotencyModifiers??(A=>[]),drawsAggro:l.drawsAggro??!1,falloff:l.falloff,healingPotencyFn:A=>an(A,l.healingPotency),jobHealingPotencyModifiers:l.jobHealingPotencyModifiers??(A=>[]),aoeHeal:l.aoeHeal??!1,applicationDelay:l.applicationDelay??0,validateAttempt:E,onExecute:d,onConfirm:l.onConfirm??xu,onApplication:r,startsAuto:l.startsAuto??!1};if(e.forEach(A=>VE(A,h.name,h)),l.cooldown!==void 0&&e.forEach(A=>Uu(A,i,l.cooldown,l.maxCharges??1)),l.secondaryCooldown!==void 0){const{cdName:A,cooldown:R,maxCharges:T}=l.secondaryCooldown;e.forEach(S=>Uu(S,A,R,T))}return h}function Ke(e,t,a,i,l){const r=ke((d,E)=>{const h=d.resources.get(l.rscType),A=l.duration??Vt(d.job,l.rscType).maxTimeout,R=typeof A=="number"?T=>A:A;h.gain(h.maxValue),d.enqueueResourceDrop(l.rscType,R(d))},l==null?void 0:l.onApplication);return lt(e,t,a,i,{...l,onApplication:r})}function _a(e,t,a,i){Array.isArray(e)||(e=[e]);const l="Limit Break "+i.tier,r=ke(E=>E.maybeCancelChanneledSkills(t),i.onExecute),d={kind:"limitbreak",name:t,animationLockFn:E=>i.animationLock,assetPath:`General/${l}.png`,unlockLevel:1,autoUpgrade:void 0,autoDowngrade:void 0,cdName:a,secondaryCd:void 0,aspect:_e.Other,replaceIf:[],startOnHotbar:!0,castTimeFn:ma(i.castTime,0),highlightIf:E=>!1,manaCostFn:E=>0,potencyFn:ma(i.potency,0),jobPotencyModifiers:E=>[],healingPotencyFn:ma(i.healingPotency,0),jobHealingPotencyModifiers:E=>[],aoeHeal:!1,drawsAggro:!1,applicationDelay:i.applicationDelay??0,validateAttempt:i.validateAttempt??(E=>!0),onExecute:r,onConfirm:i.onConfirm??xu,onApplication:i.onApplication??xu,startsAuto:!1};return e.forEach(E=>VE(E,d.name,d)),e.forEach(E=>Uu(E,a,(i.castTime??0)+i.animationLock,1)),d}class VU{constructor(t){Z(this,"job");this.job=t.job}get(t){const a=bs.get(this.job).get(t);return a||(console.error(`creating placeholder skill ${t} for ${this.job}`),lt([this.job],t,1,"NEVER",{validateAttempt:i=>!1}))}}function lc(e,t,a){let i=gl(e,t);for(;i.autoUpgrade&&ZC(i.autoUpgrade.trait,a);)i=gl(e,lc(e,i.autoUpgrade.otherSkill,a));for(;i.autoDowngrade&&a<i.unlockLevel;)i=gl(e,lc(e,i.autoDowngrade.otherSkill,a));return i.name}function N0(e,t){const a=gl(t.job,e);for(const i of a.replaceIf){if(i.newSkill===e)continue;const l=gl(t.job,i.newSkill);if(!l)throw new Error("couldn't find skill info for "+i.newSkill);if(t.config.level>=l.unlockLevel&&i.condition(t))return lc(t.job,i.newSkill,t.config.level)}return lc(t.job,a.name,t.config.level)}var qr;class WU{constructor(t,a){Ye(this,qr);Ue(this,qr,[]),console.assert(bs.has(t),`No skill map found for job: ${t}`);for(const l of bs.get(t).values())l.name!=="NEVER"&&l.cdName!=="NEVER"&&a>=l.unlockLevel&&l.autoDowngrade===void 0&&l.startOnHotbar&&le(this,qr).push(lc(t,l.name,a));let i=dE.get("TINCTURE");switch(Et[t].role){case"TANK":case"MELEE":t==="NIN"||t==="VPR"?i="Role/Dexterity Tincture.png":i="Role/Strength Tincture.png";break;case"HEALER":i="Role/Mind Tincture.png";break;case"LIMITED":case"CASTER":i="Role/Intelligence Tincture.png";break;case"RANGED":i="Role/Dexterity Tincture.png";break}dE.set("TINCTURE",i)}getCurrentSkillNames(t){return le(this,qr).map(a=>N0(a,t))}}qr=new WeakMap;var Ve=(e=>(e.Skill="Skill",e.Wait="Wait",e.JumpToTimestamp="JumpToTimestamp",e.WaitForMP="WaitForMP",e.SetResourceEnabled="SetResourceEnabled",e.Unknown="Unknown",e.Invalid="Invalid",e))(Ve||{});function gs(e,t){return new Qa({type:"Skill",skillName:e,targetCount:t??1,healTargetCount:void 0})}function XU(e,t){return new Qa({type:"Unknown",skillName:e,targetCount:t??1,healTargetCount:void 0})}function Fr(e){return new Qa({type:"Wait",waitDuration:e})}function _l(e){return new Qa({type:"JumpToTimestamp",targetTime:e})}function p0(){return new Qa({type:"WaitForMP"})}function UR(e){return new Qa({type:"SetResourceEnabled",buffName:e})}var Zr,Ua,bi,Oo,qi,Qr,$r,Jr,ec;const jS=class jS{constructor(t,a){Ye(this,Zr);Ye(this,Ua);Ye(this,bi);Ye(this,Oo);Ye(this,qi);Z(this,"applicationTime");Ye(this,Qr);Ye(this,$r);Ye(this,Jr);Ye(this,ec);Z(this,"info");Z(this,"legacyWaitDuration");Z(this,"tmp_startLockTime");Z(this,"tmp_endLockTime");Z(this,"tmp_invalid_reasons");this.info=t,Ue(this,Zr,new Set),Ue(this,bi,new Map),Ue(this,qi,new Map),Ue(this,Qr,new Map),Ue(this,$r,new Map),Ue(this,Jr,new Map),Ue(this,ec,new Map),this.legacyWaitDuration=a,this.tmp_invalid_reasons=[]}serialized(){return this.info.type==="Skill"?{type:"Skill",skillName:In[this.info.skillName].name,targetCount:this.info.targetCount,healTargetCount:this.info.healTargetCount}:this.info.type==="SetResourceEnabled"?{type:"SetResourceEnabled",buffName:this.info.buffName.toString()}:this.info.type==="Unknown"?{type:"Skill",skillName:this.info.skillName,targetCount:this.info.targetCount,healTargetCount:this.info.healTargetCount}:this.info}toLocalizedString(){if(this.info.type==="Skill")return Ti(this.info.skillName);if(this.info.type==="SetResourceEnabled")return g({en:"toggle ",zh:""}).toString()+Xe(this.info.buffName);if(this.info.type==="Wait"){const t=this.info.waitDuration.toFixed(3);return g({en:`wait ${t}`,zh:`${t}`}).toString()}else{if(this.info.type==="WaitForMP")return g({en:"wait MP",zh:""}).toString();if(this.info.type==="JumpToTimestamp"){const t=this.info.targetTime.toFixed(3);return g({en:`jump ${t}`,zh:`${t}`}).toString()}}return"(unknown)"}maybeGetActionKey(){return this.info.type==="Skill"?this.info.skillName:void 0}get targetCount(){return this.info.type==="Skill"?this.info.targetCount:0}get healTargetCount(){return this.info.type==="Skill"?this.info.healTargetCount??0:0}getNameForMessage(){return this.info.type==="Skill"?In[this.info.skillName].name:this.info.type.toString()}getClone(){return new jS(this.info,this.legacyWaitDuration)}addBuff(t){le(this,Zr).add(t)}hasBuff(t){return le(this,Zr).has(t)}hasPartyBuff(){var a;const t=(a=le(this,Ua))==null?void 0:a.snapshotTime;return t!==void 0&&N.game.getPartyBuffs(t).size>0}getPartyBuffs(){var a;const t=(a=le(this,Ua))==null?void 0:a.snapshotTime;return t?[...N.game.getPartyBuffs(t).keys()]:[]}setTargetCount(t){this.info.type==="Skill"&&(this.info.targetCount=t)}setHealTargetCount(t){this.info.type==="Skill"&&(this.info.healTargetCount=t)}resolveAll(t){le(this,Ua)&&le(this,Ua).resolve(t),le(this,bi).forEach(a=>{a.forEach(i=>{i.resolve(t)})})}resolved(){return this.applicationTime!==void 0}hitBoss(t){var a;return((a=le(this,Ua))==null?void 0:a.hasHitBoss(t))??!0}getPotency(t){const a={applied:0,snapshottedButPending:0};return le(this,Ua)&&this.recordPotency(t,le(this,Ua),a),t.excludeDoT||le(this,bi).forEach(i=>{i.forEach(l=>{this.recordPotency(t,l,a)})}),a}getHealingPotency(t){const a={applied:0,snapshottedButPending:0};return le(this,Oo)&&this.recordPotency(t,le(this,Oo),a),t.excludeHoT||le(this,qi).forEach(i=>{i.forEach(l=>{this.recordPotency(t,l,a)})}),a}recordPotency(t,a,i){a.hasHitBoss(t.untargetable)?i.applied+=a.getAmount(t):!a.hasResolved()&&a.hasSnapshotted()&&(i.snapshottedButPending+=a.getAmount(t))}removeUnresolvedOvertimePotencies(t){(t==="damage"?le(this,bi):le(this,qi)).forEach(i=>{const l=i.findIndex(r=>!r.hasResolved());l<0||i.splice(l)})}anyPotencies(){return le(this,Ua)!==void 0||le(this,bi).size>0}anyHealingPotencies(){return le(this,Oo)!==void 0||le(this,qi).size>0}getInitialPotency(){return le(this,Ua)}getInitialHealingPotency(){return le(this,Oo)}getAllDotPotencies(){return this.getAllOverTimePotencies("damage")}getAllHotPotencies(){return this.getAllOverTimePotencies("healing")}getAllOverTimePotencies(t){return t==="damage"?le(this,bi):le(this,qi)}getDotPotencies(t){return this.getOverTimePotencies(t,"damage")}getHotPotencies(t){return this.getOverTimePotencies(t,"healing")}getOverTimePotencies(t,a){return a==="damage"?le(this,bi).get(t)??[]:le(this,qi).get(t)??[]}addPotency(t){console.assert(!le(this,Ua),`ActionNode for ${this.getNameForMessage()} already had an initial potency`),Ue(this,Ua,t)}addHealingPotency(t){console.assert(!le(this,Oo),`ActionNode for ${this.getNameForMessage()} already had an initial healing potency`),Ue(this,Oo,t)}addDoTPotency(t,a){this.addOverTimePotency(t,a,"damage")}addHoTPotency(t,a){this.addOverTimePotency(t,a,"healing")}addOverTimePotency(t,a,i){const l=i==="damage"?le(this,bi):le(this,qi),r=l.get(a)??[];r.length===0&&l.set(a,r),r.push(t)}setOverTimeGap(t,a,i){this.setOverTimeMappedAmount(t,a,i==="damage"?le(this,$r):le(this,ec))}getOverTimeGap(t,a){return this.getOverTimeMappedAmount(t,a==="damage"?le(this,$r):le(this,ec))}setOverTimeOverrideAmount(t,a,i){this.setOverTimeMappedAmount(t,a,i==="damage"?le(this,Qr):le(this,Jr))}getOverTimeOverrideAmount(t,a){return this.getOverTimeMappedAmount(t,a==="damage"?le(this,Qr):le(this,Jr))}setOverTimeMappedAmount(t,a,i){i.set(t,a)}getOverTimeMappedAmount(t,a){return a.get(t)??0}};Zr=new WeakMap,Ua=new WeakMap,bi=new WeakMap,Oo=new WeakMap,qi=new WeakMap,Qr=new WeakMap,$r=new WeakMap,Jr=new WeakMap,ec=new WeakMap;let Qa=jS;class sc{constructor(){Z(this,"actions");Z(this,"name","(anonymous line)");this.actions=[]}get length(){return this.actions.length}get head(){return this.length>0?this.actions[0]:void 0}get tail(){return this.length>0?this.actions[this.actions.length-1]:void 0}get tailIndex(){return this.length-1}prependActionNode(t){console.assert(t!==void 0),this.actions.unshift(t)}insertActionNodes(t,a){t.length>0&&this.actions.splice(a,0,...t)}addActionNode(t){console.assert(t!==void 0),this.actions.push(t)}iterateAll(t){this.actions.forEach(a=>t(a))}serialized(){return{name:this.name,actions:this.actions.map(t=>t.serialized())}}exportCsv(){return[]}static deserialize(t){const a=t.map(l=>{if(l.type==="Skill"){const r=YT(l.skillName),d="waitDuration"in l?l.waitDuration:void 0;return new Qa(r!==void 0?{type:"Skill",skillName:r,targetCount:l.targetCount,healTargetCount:l.healTargetCount}:{type:"Unknown",skillName:l.skillName,targetCount:l.targetCount,healTargetCount:l.healTargetCount},d)}else if(l.type==="SetResourceEnabled"){const r="waitDuration"in l?l.waitDuration:void 0;return new Qa({type:"SetResourceEnabled",buffName:jU(l.buffName)},r)}else return l.type==="Wait"||l.type==="JumpToTimestamp"||l.type==="WaitForMP"?new Qa(l):(window.alert("unparseable action: "+JSON.stringify(l)),new Qa({type:"Invalid"}))}),i=new sc;return i.actions=a,i}}var Vu,xR;const YS=class YS extends sc{constructor(){super(...arguments);Ye(this,Vu);Z(this,"selectionStartIndex");Z(this,"selectionEndIndex");Z(this,"startIsPivot",!0);Z(this,"config")}get selectionStart(){return this.selectionStartIndex!==void 0?this.actions[this.selectionStartIndex]:void 0}get selectionEnd(){return this.selectionEndIndex!==void 0?this.actions[this.selectionEndIndex]:void 0}getFirstSelection(){return this.selectionStart&&console.assert(this.selectionEnd!==void 0),this.selectionStart}getLastSelection(){return this.selectionEnd&&console.assert(this.selectionStart!==void 0),this.selectionEnd}isInSelection(a){return this.selectionStartIndex!==void 0&&this.selectionEndIndex!==void 0&&a>=this.selectionStartIndex&&a<=this.selectionEndIndex}iterateSelected(a){if(!(this.selectionStartIndex===void 0||this.selectionEndIndex===void 0))for(let i=this.selectionStartIndex;i<=this.selectionEndIndex;i++)a(this.actions[i])}getSelected(){const a=new sc;return this.selectionStartIndex!==void 0&&this.selectionEndIndex!==void 0&&(a.actions=this.actions.slice(this.selectionStartIndex,this.selectionEndIndex+1)),a}getSelectionLength(){return this.selectionStartIndex===void 0||this.selectionEndIndex===void 0?0:this.selectionEndIndex-this.selectionStartIndex+1}selectSingle(a){this.unselectAll(),this.selectionStartIndex=a,this.selectionEndIndex=a,this.startIsPivot=!0}unselectAll(){this.selectionStartIndex=void 0,this.selectionEndIndex=void 0,this.startIsPivot=!0}selectUntil(a){if(this.selectionStartIndex!==void 0&&this.selectionStartIndex===this.selectionEndIndex)this.selectionStartIndex<=a?(be(this,Vu,xR).call(this,this.selectionStartIndex,a),this.startIsPivot=!0):(be(this,Vu,xR).call(this,a,this.selectionStartIndex),this.startIsPivot=!1);else if(this.selectionStartIndex!==void 0&&this.selectionStartIndex!==this.selectionEndIndex){const i=this.startIsPivot?this.selectionStartIndex:this.selectionEndIndex;this.selectionStartIndex=i,this.selectionEndIndex=i,this.selectUntil(a)}}onClickNode(a,i){i&&this.selectionStartIndex!==void 0?this.selectUntil(a):this.selectionStartIndex===a&&this.selectionEndIndex===a?this.unselectAll():this.selectSingle(a)}moveSelected(a){if(a===0||this.selectionStartIndex===void 0||this.selectionEndIndex===void 0)return;const i=this.selectionStartIndex,l=this.getSelectionLength(),r=this.actions.splice(i,l);let d=i+a;return d=Math.max(d,0),d=Math.min(d,this.length),this.actions.splice(d,0,...r),this.selectionStartIndex=d,this.selectionEndIndex=d+l-1,d}deleteSelected(){if(this.selectionStartIndex===void 0||this.selectionEndIndex===void 0)return;const a=this.selectionStartIndex;return this.actions.splice(a,this.getSelectionLength()),this.unselectAll(),a}serialized(){var i;console.assert(this.config);const a=super.serialized();return{name:a.name,fileType:Li.Record,config:(i=this.config)==null?void 0:i.serialized(),actions:a.actions}}spliceUpTo(a){const i=this.selectionStartIndex,l=this.selectionEndIndex;this.unselectAll(),a<this.length&&this.actions.splice(a,this.length-a),i!==void 0&&(this.selectSingle(i),this.selectUntil(l))}getCloneWithSharedConfig(){const a=new YS;return a.config=this.config,a.actions=this.actions.map(i=>i.getClone()),a.selectionStartIndex=this.selectionStartIndex,a.selectionEndIndex=this.selectionEndIndex,a}};Vu=new WeakSet,xR=function(a,i){this.unselectAll(),this.selectionStartIndex=a,this.selectionEndIndex=i};let po=YS;var Qm={exports:{}},$m,tp;function qU(){if(tp)return $m;tp=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return $m=e,$m}var Jm,np;function ZU(){if(np)return Jm;np=1;var e=qU();function t(){}function a(){}return a.resetWarningCache=t,Jm=function(){function i(d,E,h,A,R,T){if(T!==e){var S=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw S.name="Invariant Violation",S}}i.isRequired=i;function l(){return i}var r={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:l,element:i,elementType:i,instanceOf:l,node:i,objectOf:l,oneOf:l,oneOfType:l,shape:l,exact:l,checkPropTypes:a,resetWarningCache:t};return r.PropTypes=r,r},Jm}var ap;function QU(){return ap||(ap=1,Qm.exports=ZU()()),Qm.exports}var $U=QU();const eR=mT($U),C0=O.createContext(void 0);function $u(){const e=O.useContext(C0);if(e===void 0)throw new Error("Base UI: TooltipRootContext is missing. Tooltip parts must be placed within <Tooltip.Root>.");return e}var Ju=YC();function WE(){return typeof window<"u"}function xl(e){return O0(e)?(e.nodeName||"").toLowerCase():"#document"}function Ra(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function ao(e){var t;return(t=(O0(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function O0(e){return WE()?e instanceof Node||e instanceof Ra(e).Node:!1}function vt(e){return WE()?e instanceof Element||e instanceof Ra(e).Element:!1}function gn(e){return WE()?e instanceof HTMLElement||e instanceof Ra(e).HTMLElement:!1}function hE(e){return!WE()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Ra(e).ShadowRoot}function ed(e){const{overflow:t,overflowX:a,overflowY:i,display:l}=mi(e);return/auto|scroll|overlay|hidden|clip/.test(t+i+a)&&!["inline","contents"].includes(l)}function JU(e){return["table","td","th"].includes(xl(e))}function XE(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function VT(e){const t=qE(),a=vt(e)?mi(e):e;return["transform","translate","scale","rotate","perspective"].some(i=>a[i]?a[i]!=="none":!1)||(a.containerType?a.containerType!=="normal":!1)||!t&&(a.backdropFilter?a.backdropFilter!=="none":!1)||!t&&(a.filter?a.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(i=>(a.willChange||"").includes(i))||["paint","layout","strict","content"].some(i=>(a.contain||"").includes(i))}function ex(e){let t=Po(e);for(;gn(t)&&!Ho(t);){if(VT(t))return t;if(XE(t))return null;t=Po(t)}return null}function qE(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Ho(e){return["html","body","#document"].includes(xl(e))}function mi(e){return Ra(e).getComputedStyle(e)}function ZE(e){return vt(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Po(e){if(xl(e)==="html")return e;const t=e.assignedSlot||e.parentNode||hE(e)&&e.host||ao(e);return hE(t)?t.host:t}function b0(e){const t=Po(e);return Ho(t)?e.ownerDocument?e.ownerDocument.body:e.body:gn(t)&&ed(t)?t:b0(t)}function Nl(e,t,a){var i;t===void 0&&(t=[]),a===void 0&&(a=!0);const l=b0(e),r=l===((i=e.ownerDocument)==null?void 0:i.body),d=Ra(l);if(r){const E=kR(d);return t.concat(d,d.visualViewport||[],ed(l)?l:[],E&&a?Nl(E):[])}return t.concat(l,Nl(l,[],a))}function kR(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}const tx=["top","right","bottom","left"],Dl=Math.min,Za=Math.max,EE=Math.round,yh=Math.floor,Qi=e=>({x:e,y:e}),nx={left:"right",right:"left",bottom:"top",top:"bottom"},ax={start:"end",end:"start"};function PR(e,t,a){return Za(e,Dl(t,a))}function wo(e,t){return typeof e=="function"?e(t):e}function Ai(e){return e.split("-")[0]}function yl(e){return e.split("-")[1]}function WT(e){return e==="x"?"y":"x"}function XT(e){return e==="y"?"height":"width"}function vl(e){return["top","bottom"].includes(Ai(e))?"y":"x"}function qT(e){return WT(vl(e))}function ix(e,t,a){a===void 0&&(a=!1);const i=yl(e),l=qT(e),r=XT(l);let d=l==="x"?i===(a?"end":"start")?"right":"left":i==="start"?"bottom":"top";return t.reference[r]>t.floating[r]&&(d=fE(d)),[d,fE(d)]}function ox(e){const t=fE(e);return[wR(e),t,wR(t)]}function wR(e){return e.replace(/start|end/g,t=>ax[t])}function lx(e,t,a){const i=["left","right"],l=["right","left"],r=["top","bottom"],d=["bottom","top"];switch(e){case"top":case"bottom":return a?t?l:i:t?i:l;case"left":case"right":return t?r:d;default:return[]}}function sx(e,t,a,i){const l=yl(e);let r=lx(Ai(e),a==="start",i);return l&&(r=r.map(d=>d+"-"+l),t&&(r=r.concat(r.map(wR)))),r}function fE(e){return e.replace(/left|right|bottom|top/g,t=>nx[t])}function rx(e){return{top:0,right:0,bottom:0,left:0,...e}}function D0(e){return typeof e!="number"?rx(e):{top:e,right:e,bottom:e,left:e}}function AE(e){const{x:t,y:a,width:i,height:l}=e;return{width:i,height:l,top:a,left:t,right:t+i,bottom:a+l,x:t,y:a}}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var cx=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],mE=cx.join(","),y0=typeof Element>"u",rc=y0?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,RE=!y0&&Element.prototype.getRootNode?function(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}:function(e){return e==null?void 0:e.ownerDocument},TE=function e(t,a){var i;a===void 0&&(a=!0);var l=t==null||(i=t.getAttribute)===null||i===void 0?void 0:i.call(t,"inert"),r=l===""||l==="true",d=r||a&&t&&e(t.parentNode);return d},ux=function(t){var a,i=t==null||(a=t.getAttribute)===null||a===void 0?void 0:a.call(t,"contenteditable");return i===""||i==="true"},v0=function(t,a,i){if(TE(t))return[];var l=Array.prototype.slice.apply(t.querySelectorAll(mE));return a&&rc.call(t,mE)&&l.unshift(t),l=l.filter(i),l},M0=function e(t,a,i){for(var l=[],r=Array.from(t);r.length;){var d=r.shift();if(!TE(d,!1))if(d.tagName==="SLOT"){var E=d.assignedElements(),h=E.length?E:d.children,A=e(h,!0,i);i.flatten?l.push.apply(l,A):l.push({scopeParent:d,candidates:A})}else{var R=rc.call(d,mE);R&&i.filter(d)&&(a||!t.includes(d))&&l.push(d);var T=d.shadowRoot||typeof i.getShadowRoot=="function"&&i.getShadowRoot(d),S=!TE(T,!1)&&(!i.shadowRootFilter||i.shadowRootFilter(d));if(T&&S){var I=e(T===!0?d.children:T.children,!0,i);i.flatten?l.push.apply(l,I):l.push({scopeParent:d,candidates:I})}else r.unshift.apply(r,d.children)}}return l},L0=function(t){return!isNaN(parseInt(t.getAttribute("tabindex"),10))},H0=function(t){if(!t)throw new Error("No node provided");return t.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||ux(t))&&!L0(t)?0:t.tabIndex},dx=function(t,a){var i=H0(t);return i<0&&a&&!L0(t)?0:i},hx=function(t,a){return t.tabIndex===a.tabIndex?t.documentOrder-a.documentOrder:t.tabIndex-a.tabIndex},U0=function(t){return t.tagName==="INPUT"},Ex=function(t){return U0(t)&&t.type==="hidden"},fx=function(t){var a=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(i){return i.tagName==="SUMMARY"});return a},Ax=function(t,a){for(var i=0;i<t.length;i++)if(t[i].checked&&t[i].form===a)return t[i]},mx=function(t){if(!t.name)return!0;var a=t.form||RE(t),i=function(E){return a.querySelectorAll('input[type="radio"][name="'+E+'"]')},l;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")l=i(window.CSS.escape(t.name));else try{l=i(t.name)}catch(d){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",d.message),!1}var r=Ax(l,t.form);return!r||r===t},Rx=function(t){return U0(t)&&t.type==="radio"},Tx=function(t){return Rx(t)&&!mx(t)},Sx=function(t){var a,i=t&&RE(t),l=(a=i)===null||a===void 0?void 0:a.host,r=!1;if(i&&i!==t){var d,E,h;for(r=!!((d=l)!==null&&d!==void 0&&(E=d.ownerDocument)!==null&&E!==void 0&&E.contains(l)||t!=null&&(h=t.ownerDocument)!==null&&h!==void 0&&h.contains(t));!r&&l;){var A,R,T;i=RE(l),l=(A=i)===null||A===void 0?void 0:A.host,r=!!((R=l)!==null&&R!==void 0&&(T=R.ownerDocument)!==null&&T!==void 0&&T.contains(l))}}return r},ip=function(t){var a=t.getBoundingClientRect(),i=a.width,l=a.height;return i===0&&l===0},Ix=function(t,a){var i=a.displayCheck,l=a.getShadowRoot;if(getComputedStyle(t).visibility==="hidden")return!0;var r=rc.call(t,"details>summary:first-of-type"),d=r?t.parentElement:t;if(rc.call(d,"details:not([open]) *"))return!0;if(!i||i==="full"||i==="legacy-full"){if(typeof l=="function"){for(var E=t;t;){var h=t.parentElement,A=RE(t);if(h&&!h.shadowRoot&&l(h)===!0)return ip(t);t.assignedSlot?t=t.assignedSlot:!h&&A!==t.ownerDocument?t=A.host:t=h}t=E}if(Sx(t))return!t.getClientRects().length;if(i!=="legacy-full")return!0}else if(i==="non-zero-area")return ip(t);return!1},_x=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var a=t.parentElement;a;){if(a.tagName==="FIELDSET"&&a.disabled){for(var i=0;i<a.children.length;i++){var l=a.children.item(i);if(l.tagName==="LEGEND")return rc.call(a,"fieldset[disabled] *")?!0:!l.contains(t)}return!0}a=a.parentElement}return!1},GR=function(t,a){return!(a.disabled||TE(a)||Ex(a)||Ix(a,t)||fx(a)||_x(a))},BR=function(t,a){return!(Tx(a)||H0(a)<0||!GR(t,a))},gx=function(t){var a=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(a)||a>=0)},Nx=function e(t){var a=[],i=[];return t.forEach(function(l,r){var d=!!l.scopeParent,E=d?l.scopeParent:l,h=dx(E,d),A=d?e(l.candidates):E;h===0?d?a.push.apply(a,A):a.push(E):i.push({documentOrder:r,tabIndex:h,item:l,isScope:d,content:A})}),i.sort(hx).reduce(function(l,r){return r.isScope?l.push.apply(l,r.content):l.push(r.content),l},[]).concat(a)},QE=function(t,a){a=a||{};var i;return a.getShadowRoot?i=M0([t],a.includeContainer,{filter:BR.bind(null,a),flatten:!1,getShadowRoot:a.getShadowRoot,shadowRootFilter:gx}):i=v0(t,a.includeContainer,BR.bind(null,a)),Nx(i)},px=function(t,a){a=a||{};var i;return a.getShadowRoot?i=M0([t],a.includeContainer,{filter:GR.bind(null,a),flatten:!0,getShadowRoot:a.getShadowRoot}):i=v0(t,a.includeContainer,GR.bind(null,a)),i},x0=function(t,a){if(a=a||{},!t)throw new Error("No node provided");return rc.call(t,mE)===!1?!1:BR(a,t)};function k0(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function ZT(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:a,version:i}=t;return a+"/"+i}).join(" "):navigator.userAgent}function P0(){return/apple/i.test(navigator.vendor)}function FR(){const e=/android/i;return e.test(k0())||e.test(ZT())}function Cx(){return k0().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function w0(){return ZT().includes("jsdom/")}const op="data-floating-ui-focusable",Ox="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function ml(e){let t=e.activeElement;for(;((a=t)==null||(a=a.shadowRoot)==null?void 0:a.activeElement)!=null;){var a;t=t.shadowRoot.activeElement}return t}function Qn(e,t){if(!e||!t)return!1;const a=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(a&&hE(a)){let i=t;for(;i;){if(e===i)return!0;i=i.parentNode||i.host}}return!1}function vi(e){return"composedPath"in e?e.composedPath()[0]:e.target}function tR(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const a=e;return a.target!=null&&t.contains(a.target)}function bx(e){return e.matches("html,body")}function la(e){return(e==null?void 0:e.ownerDocument)||document}function $E(e){return gn(e)&&e.matches(Ox)}function lp(e){return e?e.getAttribute("role")==="combobox"&&$E(e):!1}function Dx(e){if(!e||w0())return!0;try{return e.matches(":focus-visible")}catch{return!0}}function zR(e){return e?e.hasAttribute(op)?e:e.querySelector("["+op+"]")||e:null}function Lu(e,t,a){a===void 0&&(a=!0);let i=e.filter(r=>{var d;return r.parentId===t&&((d=r.context)==null?void 0:d.open)}),l=i;for(;l.length;)l=a?e.filter(r=>{var d;return(d=l)==null?void 0:d.some(E=>{var h;return r.parentId===E.id&&((h=r.context)==null?void 0:h.open)})}):e,i=i.concat(l);return i}function sp(e,t){var a;let i=[],l=(a=e.find(r=>r.id===t))==null?void 0:a.parentId;for(;l;){const r=e.find(d=>d.id===l);l=r==null?void 0:r.parentId,r&&(i=i.concat(r))}return i}function nR(e){e.preventDefault(),e.stopPropagation()}function yx(e){return"nativeEvent"in e}function vx(e){return e.mozInputSource===0&&e.isTrusted?!0:FR()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function Mx(e){return w0()?!1:!FR()&&e.width===0&&e.height===0||FR()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function cc(e,t){const a=["mouse","pen"];return t||a.push("",void 0),a.includes(e)}var Bn=typeof document<"u"?O.useLayoutEffect:O.useEffect;const Lx={...jE};function ds(e){const t=O.useRef(e);return Bn(()=>{t.current=e}),t}const Hx=Lx.useInsertionEffect,Ux=Hx||(e=>e());function Aa(e){const t=O.useRef(()=>{});return Ux(()=>{t.current=e}),O.useCallback(function(){for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return t.current==null?void 0:t.current(...i)},[])}const td=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function G0(e,t){const a=QE(e,td()),i=a.length;if(i===0)return;const l=ml(la(e)),r=a.indexOf(l),d=r===-1?t===1?0:i-1:r+t;return a[d]}function B0(e){return G0(la(e).body,1)||e}function F0(e){return G0(la(e).body,-1)||e}function Hu(e,t){const a=t||e.currentTarget,i=e.relatedTarget;return!i||!Qn(a,i)}function xx(e){QE(e,td()).forEach(a=>{a.dataset.tabindex=a.getAttribute("tabindex")||"",a.setAttribute("tabindex","-1")})}function rp(e){e.querySelectorAll("[data-tabindex]").forEach(a=>{const i=a.dataset.tabindex;delete a.dataset.tabindex,i?a.setAttribute("tabindex",i):a.removeAttribute("tabindex")})}function cp(e,t,a){let{reference:i,floating:l}=e;const r=vl(t),d=qT(t),E=XT(d),h=Ai(t),A=r==="y",R=i.x+i.width/2-l.width/2,T=i.y+i.height/2-l.height/2,S=i[E]/2-l[E]/2;let I;switch(h){case"top":I={x:R,y:i.y-l.height};break;case"bottom":I={x:R,y:i.y+i.height};break;case"right":I={x:i.x+i.width,y:T};break;case"left":I={x:i.x-l.width,y:T};break;default:I={x:i.x,y:i.y}}switch(yl(t)){case"start":I[d]-=S*(a&&A?-1:1);break;case"end":I[d]+=S*(a&&A?-1:1);break}return I}const kx=async(e,t,a)=>{const{placement:i="bottom",strategy:l="absolute",middleware:r=[],platform:d}=a,E=r.filter(Boolean),h=await(d.isRTL==null?void 0:d.isRTL(t));let A=await d.getElementRects({reference:e,floating:t,strategy:l}),{x:R,y:T}=cp(A,i,h),S=i,I={},C=0;for(let _=0;_<E.length;_++){const{name:b,fn:y}=E[_],{x:U,y:L,data:M,reset:G}=await y({x:R,y:T,initialPlacement:i,placement:S,strategy:l,middlewareData:I,rects:A,platform:d,elements:{reference:e,floating:t}});R=U??R,T=L??T,I={...I,[b]:{...I[b],...M}},G&&C<=50&&(C++,typeof G=="object"&&(G.placement&&(S=G.placement),G.rects&&(A=G.rects===!0?await d.getElementRects({reference:e,floating:t,strategy:l}):G.rects),{x:R,y:T}=cp(A,S,h)),_=-1)}return{x:R,y:T,placement:S,strategy:l,middlewareData:I}};async function Pu(e,t){var a;t===void 0&&(t={});const{x:i,y:l,platform:r,rects:d,elements:E,strategy:h}=e,{boundary:A="clippingAncestors",rootBoundary:R="viewport",elementContext:T="floating",altBoundary:S=!1,padding:I=0}=wo(t,e),C=D0(I),b=E[S?T==="floating"?"reference":"floating":T],y=AE(await r.getClippingRect({element:(a=await(r.isElement==null?void 0:r.isElement(b)))==null||a?b:b.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(E.floating)),boundary:A,rootBoundary:R,strategy:h})),U=T==="floating"?{x:i,y:l,width:d.floating.width,height:d.floating.height}:d.reference,L=await(r.getOffsetParent==null?void 0:r.getOffsetParent(E.floating)),M=await(r.isElement==null?void 0:r.isElement(L))?await(r.getScale==null?void 0:r.getScale(L))||{x:1,y:1}:{x:1,y:1},G=AE(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({elements:E,rect:U,offsetParent:L,strategy:h}):U);return{top:(y.top-G.top+C.top)/M.y,bottom:(G.bottom-y.bottom+C.bottom)/M.y,left:(y.left-G.left+C.left)/M.x,right:(G.right-y.right+C.right)/M.x}}const Px=e=>({name:"arrow",options:e,async fn(t){const{x:a,y:i,placement:l,rects:r,platform:d,elements:E,middlewareData:h}=t,{element:A,padding:R=0}=wo(e,t)||{};if(A==null)return{};const T=D0(R),S={x:a,y:i},I=qT(l),C=XT(I),_=await d.getDimensions(A),b=I==="y",y=b?"top":"left",U=b?"bottom":"right",L=b?"clientHeight":"clientWidth",M=r.reference[C]+r.reference[I]-S[I]-r.floating[C],G=S[I]-r.reference[I],H=await(d.getOffsetParent==null?void 0:d.getOffsetParent(A));let P=H?H[L]:0;(!P||!await(d.isElement==null?void 0:d.isElement(H)))&&(P=E.floating[L]||r.floating[C]);const q=M/2-G/2,ne=P/2-_[C]/2-1,Ee=Dl(T[y],ne),ue=Dl(T[U],ne),de=Ee,fe=P-_[C]-ue,Q=P/2-_[C]/2+q,J=PR(de,Q,fe),F=!h.arrow&&yl(l)!=null&&Q!==J&&r.reference[C]/2-(Q<de?Ee:ue)-_[C]/2<0,w=F?Q<de?Q-de:Q-fe:0;return{[I]:S[I]+w,data:{[I]:J,centerOffset:Q-J-w,...F&&{alignmentOffset:w}},reset:F}}}),wx=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var a,i;const{placement:l,middlewareData:r,rects:d,initialPlacement:E,platform:h,elements:A}=t,{mainAxis:R=!0,crossAxis:T=!0,fallbackPlacements:S,fallbackStrategy:I="bestFit",fallbackAxisSideDirection:C="none",flipAlignment:_=!0,...b}=wo(e,t);if((a=r.arrow)!=null&&a.alignmentOffset)return{};const y=Ai(l),U=vl(E),L=Ai(E)===E,M=await(h.isRTL==null?void 0:h.isRTL(A.floating)),G=S||(L||!_?[fE(E)]:ox(E)),H=C!=="none";!S&&H&&G.push(...sx(E,_,C,M));const P=[E,...G],q=await Pu(t,b),ne=[];let Ee=((i=r.flip)==null?void 0:i.overflows)||[];if(R&&ne.push(q[y]),T){const Q=ix(l,d,M);ne.push(q[Q[0]],q[Q[1]])}if(Ee=[...Ee,{placement:l,overflows:ne}],!ne.every(Q=>Q<=0)){var ue,de;const Q=(((ue=r.flip)==null?void 0:ue.index)||0)+1,J=P[Q];if(J)return{data:{index:Q,overflows:Ee},reset:{placement:J}};let F=(de=Ee.filter(w=>w.overflows[0]<=0).sort((w,K)=>w.overflows[1]-K.overflows[1])[0])==null?void 0:de.placement;if(!F)switch(I){case"bestFit":{var fe;const w=(fe=Ee.filter(K=>{if(H){const W=vl(K.placement);return W===U||W==="y"}return!0}).map(K=>[K.placement,K.overflows.filter(W=>W>0).reduce((W,D)=>W+D,0)]).sort((K,W)=>K[1]-W[1])[0])==null?void 0:fe[0];w&&(F=w);break}case"initialPlacement":F=E;break}if(l!==F)return{reset:{placement:F}}}return{}}}};function up(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function dp(e){return tx.some(t=>e[t]>=0)}const Gx=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:a}=t,{strategy:i="referenceHidden",...l}=wo(e,t);switch(i){case"referenceHidden":{const r=await Pu(t,{...l,elementContext:"reference"}),d=up(r,a.reference);return{data:{referenceHiddenOffsets:d,referenceHidden:dp(d)}}}case"escaped":{const r=await Pu(t,{...l,altBoundary:!0}),d=up(r,a.floating);return{data:{escapedOffsets:d,escaped:dp(d)}}}default:return{}}}}};async function Bx(e,t){const{placement:a,platform:i,elements:l}=e,r=await(i.isRTL==null?void 0:i.isRTL(l.floating)),d=Ai(a),E=yl(a),h=vl(a)==="y",A=["left","top"].includes(d)?-1:1,R=r&&h?-1:1,T=wo(t,e);let{mainAxis:S,crossAxis:I,alignmentAxis:C}=typeof T=="number"?{mainAxis:T,crossAxis:0,alignmentAxis:null}:{mainAxis:T.mainAxis||0,crossAxis:T.crossAxis||0,alignmentAxis:T.alignmentAxis};return E&&typeof C=="number"&&(I=E==="end"?C*-1:C),h?{x:I*R,y:S*A}:{x:S*A,y:I*R}}const Fx=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var a,i;const{x:l,y:r,placement:d,middlewareData:E}=t,h=await Bx(t,e);return d===((a=E.offset)==null?void 0:a.placement)&&(i=E.arrow)!=null&&i.alignmentOffset?{}:{x:l+h.x,y:r+h.y,data:{...h,placement:d}}}}},zx=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:a,y:i,placement:l}=t,{mainAxis:r=!0,crossAxis:d=!1,limiter:E={fn:b=>{let{x:y,y:U}=b;return{x:y,y:U}}},...h}=wo(e,t),A={x:a,y:i},R=await Pu(t,h),T=vl(Ai(l)),S=WT(T);let I=A[S],C=A[T];if(r){const b=S==="y"?"top":"left",y=S==="y"?"bottom":"right",U=I+R[b],L=I-R[y];I=PR(U,I,L)}if(d){const b=T==="y"?"top":"left",y=T==="y"?"bottom":"right",U=C+R[b],L=C-R[y];C=PR(U,C,L)}const _=E.fn({...t,[S]:I,[T]:C});return{..._,data:{x:_.x-a,y:_.y-i,enabled:{[S]:r,[T]:d}}}}}},jx=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:a,y:i,placement:l,rects:r,middlewareData:d}=t,{offset:E=0,mainAxis:h=!0,crossAxis:A=!0}=wo(e,t),R={x:a,y:i},T=vl(l),S=WT(T);let I=R[S],C=R[T];const _=wo(E,t),b=typeof _=="number"?{mainAxis:_,crossAxis:0}:{mainAxis:0,crossAxis:0,..._};if(h){const L=S==="y"?"height":"width",M=r.reference[S]-r.floating[L]+b.mainAxis,G=r.reference[S]+r.reference[L]-b.mainAxis;I<M?I=M:I>G&&(I=G)}if(A){var y,U;const L=S==="y"?"width":"height",M=["top","left"].includes(Ai(l)),G=r.reference[T]-r.floating[L]+(M&&((y=d.offset)==null?void 0:y[T])||0)+(M?0:b.crossAxis),H=r.reference[T]+r.reference[L]+(M?0:((U=d.offset)==null?void 0:U[T])||0)-(M?b.crossAxis:0);C<G?C=G:C>H&&(C=H)}return{[S]:I,[T]:C}}}},Yx=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var a,i;const{placement:l,rects:r,platform:d,elements:E}=t,{apply:h=()=>{},...A}=wo(e,t),R=await Pu(t,A),T=Ai(l),S=yl(l),I=vl(l)==="y",{width:C,height:_}=r.floating;let b,y;T==="top"||T==="bottom"?(b=T,y=S===(await(d.isRTL==null?void 0:d.isRTL(E.floating))?"start":"end")?"left":"right"):(y=T,b=S==="end"?"top":"bottom");const U=_-R.top-R.bottom,L=C-R.left-R.right,M=Dl(_-R[b],U),G=Dl(C-R[y],L),H=!t.middlewareData.shift;let P=M,q=G;if((a=t.middlewareData.shift)!=null&&a.enabled.x&&(q=L),(i=t.middlewareData.shift)!=null&&i.enabled.y&&(P=U),H&&!S){const Ee=Za(R.left,0),ue=Za(R.right,0),de=Za(R.top,0),fe=Za(R.bottom,0);I?q=C-2*(Ee!==0||ue!==0?Ee+ue:Za(R.left,R.right)):P=_-2*(de!==0||fe!==0?de+fe:Za(R.top,R.bottom))}await h({...t,availableWidth:q,availableHeight:P});const ne=await d.getDimensions(E.floating);return C!==ne.width||_!==ne.height?{reset:{rects:!0}}:{}}}};function z0(e){const t=mi(e);let a=parseFloat(t.width)||0,i=parseFloat(t.height)||0;const l=gn(e),r=l?e.offsetWidth:a,d=l?e.offsetHeight:i,E=EE(a)!==r||EE(i)!==d;return E&&(a=r,i=d),{width:a,height:i,$:E}}function QT(e){return vt(e)?e:e.contextElement}function zr(e){const t=QT(e);if(!gn(t))return Qi(1);const a=t.getBoundingClientRect(),{width:i,height:l,$:r}=z0(t);let d=(r?EE(a.width):a.width)/i,E=(r?EE(a.height):a.height)/l;return(!d||!Number.isFinite(d))&&(d=1),(!E||!Number.isFinite(E))&&(E=1),{x:d,y:E}}const Kx=Qi(0);function j0(e){const t=Ra(e);return!qE()||!t.visualViewport?Kx:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Vx(e,t,a){return t===void 0&&(t=!1),!a||t&&a!==Ra(e)?!1:t}function Ds(e,t,a,i){t===void 0&&(t=!1),a===void 0&&(a=!1);const l=e.getBoundingClientRect(),r=QT(e);let d=Qi(1);t&&(i?vt(i)&&(d=zr(i)):d=zr(e));const E=Vx(r,a,i)?j0(r):Qi(0);let h=(l.left+E.x)/d.x,A=(l.top+E.y)/d.y,R=l.width/d.x,T=l.height/d.y;if(r){const S=Ra(r),I=i&&vt(i)?Ra(i):i;let C=S,_=kR(C);for(;_&&i&&I!==C;){const b=zr(_),y=_.getBoundingClientRect(),U=mi(_),L=y.left+(_.clientLeft+parseFloat(U.paddingLeft))*b.x,M=y.top+(_.clientTop+parseFloat(U.paddingTop))*b.y;h*=b.x,A*=b.y,R*=b.x,T*=b.y,h+=L,A+=M,C=Ra(_),_=kR(C)}}return AE({width:R,height:T,x:h,y:A})}function $T(e,t){const a=ZE(e).scrollLeft;return t?t.left+a:Ds(ao(e)).left+a}function Y0(e,t,a){a===void 0&&(a=!1);const i=e.getBoundingClientRect(),l=i.left+t.scrollLeft-(a?0:$T(e,i)),r=i.top+t.scrollTop;return{x:l,y:r}}function Wx(e){let{elements:t,rect:a,offsetParent:i,strategy:l}=e;const r=l==="fixed",d=ao(i),E=t?XE(t.floating):!1;if(i===d||E&&r)return a;let h={scrollLeft:0,scrollTop:0},A=Qi(1);const R=Qi(0),T=gn(i);if((T||!T&&!r)&&((xl(i)!=="body"||ed(d))&&(h=ZE(i)),gn(i))){const I=Ds(i);A=zr(i),R.x=I.x+i.clientLeft,R.y=I.y+i.clientTop}const S=d&&!T&&!r?Y0(d,h,!0):Qi(0);return{width:a.width*A.x,height:a.height*A.y,x:a.x*A.x-h.scrollLeft*A.x+R.x+S.x,y:a.y*A.y-h.scrollTop*A.y+R.y+S.y}}function Xx(e){return Array.from(e.getClientRects())}function qx(e){const t=ao(e),a=ZE(e),i=e.ownerDocument.body,l=Za(t.scrollWidth,t.clientWidth,i.scrollWidth,i.clientWidth),r=Za(t.scrollHeight,t.clientHeight,i.scrollHeight,i.clientHeight);let d=-a.scrollLeft+$T(e);const E=-a.scrollTop;return mi(i).direction==="rtl"&&(d+=Za(t.clientWidth,i.clientWidth)-l),{width:l,height:r,x:d,y:E}}function Zx(e,t){const a=Ra(e),i=ao(e),l=a.visualViewport;let r=i.clientWidth,d=i.clientHeight,E=0,h=0;if(l){r=l.width,d=l.height;const A=qE();(!A||A&&t==="fixed")&&(E=l.offsetLeft,h=l.offsetTop)}return{width:r,height:d,x:E,y:h}}function Qx(e,t){const a=Ds(e,!0,t==="fixed"),i=a.top+e.clientTop,l=a.left+e.clientLeft,r=gn(e)?zr(e):Qi(1),d=e.clientWidth*r.x,E=e.clientHeight*r.y,h=l*r.x,A=i*r.y;return{width:d,height:E,x:h,y:A}}function hp(e,t,a){let i;if(t==="viewport")i=Zx(e,a);else if(t==="document")i=qx(ao(e));else if(vt(t))i=Qx(t,a);else{const l=j0(e);i={x:t.x-l.x,y:t.y-l.y,width:t.width,height:t.height}}return AE(i)}function K0(e,t){const a=Po(e);return a===t||!vt(a)||Ho(a)?!1:mi(a).position==="fixed"||K0(a,t)}function $x(e,t){const a=t.get(e);if(a)return a;let i=Nl(e,[],!1).filter(E=>vt(E)&&xl(E)!=="body"),l=null;const r=mi(e).position==="fixed";let d=r?Po(e):e;for(;vt(d)&&!Ho(d);){const E=mi(d),h=VT(d);!h&&E.position==="fixed"&&(l=null),(r?!h&&!l:!h&&E.position==="static"&&!!l&&["absolute","fixed"].includes(l.position)||ed(d)&&!h&&K0(e,d))?i=i.filter(R=>R!==d):l=E,d=Po(d)}return t.set(e,i),i}function Jx(e){let{element:t,boundary:a,rootBoundary:i,strategy:l}=e;const d=[...a==="clippingAncestors"?XE(t)?[]:$x(t,this._c):[].concat(a),i],E=d[0],h=d.reduce((A,R)=>{const T=hp(t,R,l);return A.top=Za(T.top,A.top),A.right=Dl(T.right,A.right),A.bottom=Dl(T.bottom,A.bottom),A.left=Za(T.left,A.left),A},hp(t,E,l));return{width:h.right-h.left,height:h.bottom-h.top,x:h.left,y:h.top}}function ek(e){const{width:t,height:a}=z0(e);return{width:t,height:a}}function tk(e,t,a){const i=gn(t),l=ao(t),r=a==="fixed",d=Ds(e,!0,r,t);let E={scrollLeft:0,scrollTop:0};const h=Qi(0);if(i||!i&&!r)if((xl(t)!=="body"||ed(l))&&(E=ZE(t)),i){const S=Ds(t,!0,r,t);h.x=S.x+t.clientLeft,h.y=S.y+t.clientTop}else l&&(h.x=$T(l));const A=l&&!i&&!r?Y0(l,E):Qi(0),R=d.left+E.scrollLeft-h.x-A.x,T=d.top+E.scrollTop-h.y-A.y;return{x:R,y:T,width:d.width,height:d.height}}function aR(e){return mi(e).position==="static"}function Ep(e,t){if(!gn(e)||mi(e).position==="fixed")return null;if(t)return t(e);let a=e.offsetParent;return ao(e)===a&&(a=a.ownerDocument.body),a}function V0(e,t){const a=Ra(e);if(XE(e))return a;if(!gn(e)){let l=Po(e);for(;l&&!Ho(l);){if(vt(l)&&!aR(l))return l;l=Po(l)}return a}let i=Ep(e,t);for(;i&&JU(i)&&aR(i);)i=Ep(i,t);return i&&Ho(i)&&aR(i)&&!VT(i)?a:i||ex(e)||a}const nk=async function(e){const t=this.getOffsetParent||V0,a=this.getDimensions,i=await a(e.floating);return{reference:tk(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function ak(e){return mi(e).direction==="rtl"}const ik={convertOffsetParentRelativeRectToViewportRelativeRect:Wx,getDocumentElement:ao,getClippingRect:Jx,getOffsetParent:V0,getElementRects:nk,getClientRects:Xx,getDimensions:ek,getScale:zr,isElement:vt,isRTL:ak};function W0(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function ok(e,t){let a=null,i;const l=ao(e);function r(){var E;clearTimeout(i),(E=a)==null||E.disconnect(),a=null}function d(E,h){E===void 0&&(E=!1),h===void 0&&(h=1),r();const A=e.getBoundingClientRect(),{left:R,top:T,width:S,height:I}=A;if(E||t(),!S||!I)return;const C=yh(T),_=yh(l.clientWidth-(R+S)),b=yh(l.clientHeight-(T+I)),y=yh(R),L={rootMargin:-C+"px "+-_+"px "+-b+"px "+-y+"px",threshold:Za(0,Dl(1,h))||1};let M=!0;function G(H){const P=H[0].intersectionRatio;if(P!==h){if(!M)return d();P?d(!1,P):i=setTimeout(()=>{d(!1,1e-7)},1e3)}P===1&&!W0(A,e.getBoundingClientRect())&&d(),M=!1}try{a=new IntersectionObserver(G,{...L,root:l.ownerDocument})}catch{a=new IntersectionObserver(G,L)}a.observe(e)}return d(!0),r}function fp(e,t,a,i){i===void 0&&(i={});const{ancestorScroll:l=!0,ancestorResize:r=!0,elementResize:d=typeof ResizeObserver=="function",layoutShift:E=typeof IntersectionObserver=="function",animationFrame:h=!1}=i,A=QT(e),R=l||r?[...A?Nl(A):[],...Nl(t)]:[];R.forEach(y=>{l&&y.addEventListener("scroll",a,{passive:!0}),r&&y.addEventListener("resize",a)});const T=A&&E?ok(A,a):null;let S=-1,I=null;d&&(I=new ResizeObserver(y=>{let[U]=y;U&&U.target===A&&I&&(I.unobserve(t),cancelAnimationFrame(S),S=requestAnimationFrame(()=>{var L;(L=I)==null||L.observe(t)})),a()}),A&&!h&&I.observe(A),I.observe(t));let C,_=h?Ds(e):null;h&&b();function b(){const y=Ds(e);_&&!W0(_,y)&&a(),_=y,C=requestAnimationFrame(b)}return a(),()=>{var y;R.forEach(U=>{l&&U.removeEventListener("scroll",a),r&&U.removeEventListener("resize",a)}),T==null||T(),(y=I)==null||y.disconnect(),I=null,h&&cancelAnimationFrame(C)}}const lk=Fx,sk=zx,rk=wx,ck=Yx,uk=Gx,Ap=Px,dk=jx,hk=(e,t,a)=>{const i=new Map,l={platform:ik,...a},r={...l.platform,_c:i};return kx(e,t,{...l,platform:r})};var wh=typeof document<"u"?O.useLayoutEffect:O.useEffect;function SE(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let a,i,l;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(a=e.length,a!==t.length)return!1;for(i=a;i--!==0;)if(!SE(e[i],t[i]))return!1;return!0}if(l=Object.keys(e),a=l.length,a!==Object.keys(t).length)return!1;for(i=a;i--!==0;)if(!{}.hasOwnProperty.call(t,l[i]))return!1;for(i=a;i--!==0;){const r=l[i];if(!(r==="_owner"&&e.$$typeof)&&!SE(e[r],t[r]))return!1}return!0}return e!==e&&t!==t}function X0(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function mp(e,t){const a=X0(e);return Math.round(t*a)/a}function iR(e){const t=O.useRef(e);return wh(()=>{t.current=e}),t}function Ek(e){e===void 0&&(e={});const{placement:t="bottom",strategy:a="absolute",middleware:i=[],platform:l,elements:{reference:r,floating:d}={},transform:E=!0,whileElementsMounted:h,open:A}=e,[R,T]=O.useState({x:0,y:0,strategy:a,placement:t,middlewareData:{},isPositioned:!1}),[S,I]=O.useState(i);SE(S,i)||I(i);const[C,_]=O.useState(null),[b,y]=O.useState(null),U=O.useCallback(K=>{K!==H.current&&(H.current=K,_(K))},[]),L=O.useCallback(K=>{K!==P.current&&(P.current=K,y(K))},[]),M=r||C,G=d||b,H=O.useRef(null),P=O.useRef(null),q=O.useRef(R),ne=h!=null,Ee=iR(h),ue=iR(l),de=iR(A),fe=O.useCallback(()=>{if(!H.current||!P.current)return;const K={placement:t,strategy:a,middleware:S};ue.current&&(K.platform=ue.current),hk(H.current,P.current,K).then(W=>{const D={...W,isPositioned:de.current!==!1};Q.current&&!SE(q.current,D)&&(q.current=D,Ju.flushSync(()=>{T(D)}))})},[S,t,a,ue,de]);wh(()=>{A===!1&&q.current.isPositioned&&(q.current.isPositioned=!1,T(K=>({...K,isPositioned:!1})))},[A]);const Q=O.useRef(!1);wh(()=>(Q.current=!0,()=>{Q.current=!1}),[]),wh(()=>{if(M&&(H.current=M),G&&(P.current=G),M&&G){if(Ee.current)return Ee.current(M,G,fe);fe()}},[M,G,fe,Ee,ne]);const J=O.useMemo(()=>({reference:H,floating:P,setReference:U,setFloating:L}),[U,L]),F=O.useMemo(()=>({reference:M,floating:G}),[M,G]),w=O.useMemo(()=>{const K={position:a,left:0,top:0};if(!F.floating)return K;const W=mp(F.floating,R.x),D=mp(F.floating,R.y);return E?{...K,transform:"translate("+W+"px, "+D+"px)",...X0(F.floating)>=1.5&&{willChange:"transform"}}:{position:a,left:W,top:D}},[a,E,F.floating,R.x,R.y]);return O.useMemo(()=>({...R,update:fe,refs:J,elements:F,floatingStyles:w}),[R,fe,J,F,w])}const fk=e=>{function t(a){return{}.hasOwnProperty.call(a,"current")}return{name:"arrow",options:e,fn(a){const{element:i,padding:l}=typeof e=="function"?e(a):e;return i&&t(i)?i.current!=null?Ap({element:i.current,padding:l}).fn(a):{}:i?Ap({element:i,padding:l}).fn(a):{}}}},Ak=(e,t)=>({...lk(e),options:[e,t]}),mk=(e,t)=>({...sk(e),options:[e,t]}),Rk=(e,t)=>({...dk(e),options:[e,t]}),Tk=(e,t)=>({...rk(e),options:[e,t]}),Sk=(e,t)=>({...ck(e),options:[e,t]}),Ik=(e,t)=>({...uk(e),options:[e,t]}),_k=(e,t)=>({...fk(e),options:[e,t]}),gk="data-floating-ui-focusable",Rp="active",Tp="selected",Nk={...jE};let Sp=!1,pk=0;const Ip=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+pk++;function Ck(){const[e,t]=O.useState(()=>Sp?Ip():void 0);return Bn(()=>{e==null&&t(Ip())},[]),O.useEffect(()=>{Sp=!0},[]),e}const Ok=Nk.useId,JT=Ok||Ck;function bk(){const e=new Map;return{emit(t,a){var i;(i=e.get(t))==null||i.forEach(l=>l(a))},on(t,a){e.has(t)||e.set(t,new Set),e.get(t).add(a)},off(t,a){var i;(i=e.get(t))==null||i.delete(a)}}}const Dk=O.createContext(null),yk=O.createContext(null),eS=()=>{var e;return((e=O.useContext(Dk))==null?void 0:e.id)||null},JE=()=>O.useContext(yk);function ys(e){return"data-floating-ui-"+e}function Xa(e){e.current!==-1&&(clearTimeout(e.current),e.current=-1)}const _p=ys("safe-polygon");function Gh(e,t,a){if(a&&!cc(a))return 0;if(typeof e=="number")return e;if(typeof e=="function"){const i=e();return typeof i=="number"?i:i==null?void 0:i[t]}return e==null?void 0:e[t]}function oR(e){return typeof e=="function"?e():e}function vk(e,t){t===void 0&&(t={});const{open:a,onOpenChange:i,dataRef:l,events:r,elements:d}=e,{enabled:E=!0,delay:h=0,handleClose:A=null,mouseOnly:R=!1,restMs:T=0,move:S=!0}=t,I=JE(),C=eS(),_=ds(A),b=ds(h),y=ds(a),U=ds(T),L=O.useRef(),M=O.useRef(-1),G=O.useRef(),H=O.useRef(-1),P=O.useRef(!0),q=O.useRef(!1),ne=O.useRef(()=>{}),Ee=O.useRef(!1),ue=O.useCallback(()=>{var w;const K=(w=l.current.openEvent)==null?void 0:w.type;return(K==null?void 0:K.includes("mouse"))&&K!=="mousedown"},[l]);O.useEffect(()=>{if(!E)return;function w(K){let{open:W}=K;W||(Xa(M),Xa(H),P.current=!0,Ee.current=!1)}return r.on("openchange",w),()=>{r.off("openchange",w)}},[E,r]),O.useEffect(()=>{if(!E||!_.current||!a)return;function w(W){ue()&&i(!1,W,"hover")}const K=la(d.floating).documentElement;return K.addEventListener("mouseleave",w),()=>{K.removeEventListener("mouseleave",w)}},[d.floating,a,i,E,_,ue]);const de=O.useCallback(function(w,K,W){K===void 0&&(K=!0),W===void 0&&(W="hover");const D=Gh(b.current,"close",L.current);D&&!G.current?(Xa(M),M.current=window.setTimeout(()=>i(!1,w,W),D)):K&&(Xa(M),i(!1,w,W))},[b,i]),fe=Aa(()=>{ne.current(),G.current=void 0}),Q=Aa(()=>{if(q.current){const w=la(d.floating).body;w.style.pointerEvents="",w.removeAttribute(_p),q.current=!1}}),J=Aa(()=>l.current.openEvent?["click","mousedown"].includes(l.current.openEvent.type):!1);O.useEffect(()=>{if(!E)return;function w(z){if(Xa(M),P.current=!1,R&&!cc(L.current)||oR(U.current)>0&&!Gh(b.current,"open"))return;const B=Gh(b.current,"open",L.current);B?M.current=window.setTimeout(()=>{y.current||i(!0,z,"hover")},B):a||i(!0,z,"hover")}function K(z){if(J()){Q();return}ne.current();const B=la(d.floating);if(Xa(H),Ee.current=!1,_.current&&l.current.floatingContext){a||Xa(M),G.current=_.current({...l.current.floatingContext,tree:I,x:z.clientX,y:z.clientY,onClose(){Q(),fe(),J()||de(z,!0,"safe-polygon")}});const he=G.current;B.addEventListener("mousemove",he),ne.current=()=>{B.removeEventListener("mousemove",he)};return}(L.current==="touch"?!Qn(d.floating,z.relatedTarget):!0)&&de(z)}function W(z){J()||l.current.floatingContext&&(_.current==null||_.current({...l.current.floatingContext,tree:I,x:z.clientX,y:z.clientY,onClose(){Q(),fe(),J()||de(z)}})(z))}function D(){Xa(M)}function Y(z){J()||de(z,!1)}if(vt(d.domReference)){const z=d.domReference,B=d.floating;return a&&z.addEventListener("mouseleave",W),S&&z.addEventListener("mousemove",w,{once:!0}),z.addEventListener("mouseenter",w),z.addEventListener("mouseleave",K),B&&(B.addEventListener("mouseleave",W),B.addEventListener("mouseenter",D),B.addEventListener("mouseleave",Y)),()=>{a&&z.removeEventListener("mouseleave",W),S&&z.removeEventListener("mousemove",w),z.removeEventListener("mouseenter",w),z.removeEventListener("mouseleave",K),B&&(B.removeEventListener("mouseleave",W),B.removeEventListener("mouseenter",D),B.removeEventListener("mouseleave",Y))}}},[d,E,e,R,S,de,fe,Q,i,a,y,I,b,_,l,J,U]),Bn(()=>{var w;if(E&&a&&(w=_.current)!=null&&w.__options.blockPointerEvents&&ue()){q.current=!0;const W=d.floating;if(vt(d.domReference)&&W){var K;const D=la(d.floating).body;D.setAttribute(_p,"");const Y=d.domReference,z=I==null||(K=I.nodesRef.current.find(B=>B.id===C))==null||(K=K.context)==null?void 0:K.elements.floating;return z&&(z.style.pointerEvents=""),D.style.pointerEvents="none",Y.style.pointerEvents="auto",W.style.pointerEvents="auto",()=>{D.style.pointerEvents="",Y.style.pointerEvents="",W.style.pointerEvents=""}}}},[E,a,C,d,I,_,ue]),Bn(()=>{a||(L.current=void 0,Ee.current=!1,fe(),Q())},[a,fe,Q]),O.useEffect(()=>()=>{fe(),Xa(M),Xa(H),Q()},[E,d.domReference,fe,Q]);const F=O.useMemo(()=>{function w(K){L.current=K.pointerType}return{onPointerDown:w,onPointerEnter:w,onMouseMove(K){const{nativeEvent:W}=K;function D(){!P.current&&!y.current&&i(!0,W,"hover")}R&&!cc(L.current)||a||oR(U.current)===0||Ee.current&&K.movementX**2+K.movementY**2<2||(Xa(H),L.current==="touch"?D():(Ee.current=!0,H.current=window.setTimeout(D,oR(U.current))))}}},[R,i,a,y,U]);return O.useMemo(()=>E?{reference:F}:{},[E,F])}const Mk=O.createContext({hasProvider:!1,timeoutMs:0,delayRef:{current:0},initialDelayRef:{current:0},timeoutIdRef:{current:-1},currentIdRef:{current:null},currentContextRef:{current:null}});function Lk(e,t){t===void 0&&(t={});const{open:a,onOpenChange:i,floatingId:l}=e,{enabled:r=!0}=t,d=O.useContext(Mk),{currentIdRef:E,delayRef:h,timeoutMs:A,initialDelayRef:R,currentContextRef:T,hasProvider:S,timeoutIdRef:I}=d,[C,_]=O.useState(!1);return Bn(()=>{function b(){var y;_(!1),(y=T.current)==null||y.setIsInstantPhase(!1),E.current=null,T.current=null,h.current=R.current}if(r&&E.current&&!a&&E.current===l){if(_(!1),A)return I.current=window.setTimeout(b,A),()=>{clearTimeout(I.current)};b()}},[r,a,l,E,h,A,R,T,I]),Bn(()=>{if(!r||!a)return;const b=T.current,y=E.current;T.current={onOpenChange:i,setIsInstantPhase:_},E.current=l,h.current={open:0,close:Gh(R.current,"close")},y!==null&&y!==l?(Xa(I),_(!0),b==null||b.setIsInstantPhase(!0),b==null||b.onOpenChange(!1)):(_(!1),b==null||b.setIsInstantPhase(!1))},[r,a,l,i,E,h,A,R,T,I]),Bn(()=>()=>{T.current=null},[T]),O.useMemo(()=>({hasProvider:S,delayRef:h,isInstantPhase:C}),[S,h,C])}let gp=0;function Dr(e,t){t===void 0&&(t={});const{preventScroll:a=!1,cancelPrevious:i=!0,sync:l=!1}=t;i&&cancelAnimationFrame(gp);const r=()=>e==null?void 0:e.focus({preventScroll:a});l?r():gp=requestAnimationFrame(r)}function lR(e,t){if(!e||!t)return!1;const a=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(a&&hE(a)){let i=t;for(;i;){if(e===i)return!0;i=i.parentNode||i.host}}return!1}function Hk(e){return"composedPath"in e?e.composedPath()[0]:e.target}function Uk(e){return(e==null?void 0:e.ownerDocument)||document}let yr=new WeakMap,vh=new WeakSet,Mh={},sR=0;const xk=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,q0=e=>e&&(e.host||q0(e.parentNode)),kk=(e,t)=>t.map(a=>{if(e.contains(a))return a;const i=q0(a);return e.contains(i)?i:null}).filter(a=>a!=null);function Pk(e,t,a,i){const l="data-floating-ui-inert",r=i?"inert":a?"aria-hidden":null,d=kk(t,e),E=new Set,h=new Set(d),A=[];Mh[l]||(Mh[l]=new WeakMap);const R=Mh[l];d.forEach(T),S(t),E.clear();function T(I){!I||E.has(I)||(E.add(I),I.parentNode&&T(I.parentNode))}function S(I){!I||h.has(I)||[].forEach.call(I.children,C=>{if(xl(C)!=="script")if(E.has(C))S(C);else{const _=r?C.getAttribute(r):null,b=_!==null&&_!=="false",y=yr.get(C)||0,U=r?y+1:y,L=(R.get(C)||0)+1;yr.set(C,U),R.set(C,L),A.push(C),U===1&&b&&vh.add(C),L===1&&C.setAttribute(l,""),!b&&r&&C.setAttribute(r,r==="inert"?"":"true")}})}return sR++,()=>{A.forEach(I=>{const C=yr.get(I)||0,_=r?C-1:C,b=(R.get(I)||0)-1;yr.set(I,_),R.set(I,b),_||(!vh.has(I)&&r&&I.removeAttribute(r),vh.delete(I)),b||I.removeAttribute(l)}),sR--,sR||(yr=new WeakMap,yr=new WeakMap,vh=new WeakSet,Mh={})}}function Np(e,t,a){t===void 0&&(t=!1),a===void 0&&(a=!1);const i=Uk(e[0]).body;return Pk(e.concat(Array.from(i.querySelectorAll("[aria-live]"))),i,t,a)}const ef={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0},IE=O.forwardRef(function(t,a){const[i,l]=O.useState();Bn(()=>{P0()&&l("button")},[]);const r={ref:a,tabIndex:0,role:i,"aria-hidden":i?void 0:!0,[ys("focus-guard")]:"",style:ef};return c.jsx("span",{...t,...r})}),Z0=O.createContext(null),pp=ys("portal");function Q0(e){e===void 0&&(e={});const{id:t,root:a}=e,i=JT(),l=$0(),[r,d]=O.useState(null),E=O.useRef(null);return Bn(()=>()=>{r==null||r.remove(),queueMicrotask(()=>{E.current=null})},[r]),Bn(()=>{if(!i||E.current)return;const h=t?document.getElementById(t):null;if(!h)return;const A=document.createElement("div");A.id=i,A.setAttribute(pp,""),h.appendChild(A),E.current=A,d(A)},[t,i]),Bn(()=>{if(a===null||!i||E.current)return;let h=a||(l==null?void 0:l.portalNode);h&&!vt(h)&&(h=h.current),h=h||document.body;let A=null;t&&(A=document.createElement("div"),A.id=t,h.appendChild(A));const R=document.createElement("div");R.id=i,R.setAttribute(pp,""),h=A||h,h.appendChild(R),E.current=R,d(R)},[t,a,i,l]),r}function wk(e){const{children:t,id:a,root:i,preserveTabOrder:l=!0}=e,r=Q0({id:a,root:i}),[d,E]=O.useState(null),h=O.useRef(null),A=O.useRef(null),R=O.useRef(null),T=O.useRef(null),S=d==null?void 0:d.modal,I=d==null?void 0:d.open,C=!!d&&!d.modal&&d.open&&l&&!!(i||r);return O.useEffect(()=>{if(!r||!l||S)return;function _(b){r&&Hu(b)&&(b.type==="focusin"?rp:xx)(r)}return r.addEventListener("focusin",_,!0),r.addEventListener("focusout",_,!0),()=>{r.removeEventListener("focusin",_,!0),r.removeEventListener("focusout",_,!0)}},[r,l,S]),O.useEffect(()=>{r&&(I||rp(r))},[I,r]),c.jsxs(Z0.Provider,{value:O.useMemo(()=>({preserveTabOrder:l,beforeOutsideRef:h,afterOutsideRef:A,beforeInsideRef:R,afterInsideRef:T,portalNode:r,setFocusManagerState:E}),[l,r]),children:[C&&r&&c.jsx(IE,{"data-type":"outside",ref:h,onFocus:_=>{if(Hu(_,r)){var b;(b=R.current)==null||b.focus()}else{const y=d?d.domReference:null,U=F0(y);U==null||U.focus()}}}),C&&r&&c.jsx("span",{"aria-owns":r.id,style:ef}),r&&Ju.createPortal(t,r),C&&r&&c.jsx(IE,{"data-type":"outside",ref:A,onFocus:_=>{if(Hu(_,r)){var b;(b=T.current)==null||b.focus()}else{const y=d?d.domReference:null,U=B0(y);U==null||U.focus(),d!=null&&d.closeOnFocusOut&&(d==null||d.onOpenChange(!1,_.nativeEvent,"focus-out"))}}})]})}const $0=()=>O.useContext(Z0);function Cp(e){return O.useMemo(()=>t=>{e.forEach(a=>{a&&(a.current=t)})},e)}const Gk=20;let rs=[];function Bk(e){rs=rs.filter(t=>t.isConnected),e&&xl(e)!=="body"&&(rs.push(e),rs.length>Gk&&(rs=rs.slice(-20)))}function Op(){return rs.slice().reverse().find(e=>e.isConnected)}function Fk(e){const t=td();return x0(e,t)?e:QE(e,t)[0]||e}function bp(e,t){var a;if(!t.current.includes("floating")&&!((a=e.getAttribute("role"))!=null&&a.includes("dialog")))return;const i=td(),r=px(e,i).filter(E=>{const h=E.getAttribute("data-tabindex")||"";return x0(E,i)||E.hasAttribute("data-tabindex")&&!h.startsWith("-")}),d=e.getAttribute("tabindex");t.current.includes("floating")||r.length===0?d!=="0"&&e.setAttribute("tabindex","0"):(d!=="-1"||e.hasAttribute("data-tabindex")&&e.getAttribute("data-tabindex")!=="-1")&&(e.setAttribute("tabindex","-1"),e.setAttribute("data-tabindex","-1"))}const zk=O.forwardRef(function(t,a){return c.jsx("button",{...t,type:"button",ref:a,tabIndex:-1,style:ef})});function jk(e){const{context:t,children:a,disabled:i=!1,order:l=["content"],guards:r=!0,initialFocus:d=0,returnFocus:E=!0,restoreFocus:h=!1,modal:A=!0,visuallyHiddenDismiss:R=!1,closeOnFocusOut:T=!0,outsideElementsInert:S=!1,getInsideElements:I=()=>[]}=e,{open:C,onOpenChange:_,events:b,dataRef:y,elements:{domReference:U,floating:L}}=t,M=Aa(()=>{var ge;return(ge=y.current.floatingContext)==null?void 0:ge.nodeId}),G=Aa(I),H=typeof d=="number"&&d<0,P=lp(U)&&H,q=xk(),ne=q?r:!0,Ee=!ne||q&&S,ue=ds(l),de=ds(d),fe=ds(E),Q=JE(),J=$0(),F=O.useRef(null),w=O.useRef(null),K=O.useRef(!1),W=O.useRef(!1),D=O.useRef(-1),Y=J!=null,z=zR(L),B=Aa(function(ge){return ge===void 0&&(ge=z),ge?QE(ge,td()):[]}),ee=Aa(ge=>{const Ne=B(ge);return ue.current.map(oe=>U&&oe==="reference"?U:z&&oe==="floating"?z:Ne).filter(Boolean).flat()});O.useEffect(()=>{if(i||!A)return;function ge(oe){if(oe.key==="Tab"){Qn(z,ml(la(z)))&&B().length===0&&!P&&nR(oe);const pe=ee(),Ie=vi(oe);ue.current[0]==="reference"&&Ie===U&&(nR(oe),oe.shiftKey?Dr(pe[pe.length-1]):Dr(pe[1])),ue.current[1]==="floating"&&Ie===z&&oe.shiftKey&&(nR(oe),Dr(pe[0]))}}const Ne=la(z);return Ne.addEventListener("keydown",ge),()=>{Ne.removeEventListener("keydown",ge)}},[i,U,z,A,ue,P,B,ee]),O.useEffect(()=>{if(i||!L)return;function ge(Ne){const oe=vi(Ne),Ie=B().indexOf(oe);Ie!==-1&&(D.current=Ie)}return L.addEventListener("focusin",ge),()=>{L.removeEventListener("focusin",ge)}},[i,L,B]),O.useEffect(()=>{if(i||!T)return;function ge(){W.current=!0,setTimeout(()=>{W.current=!1})}function Ne(oe){const pe=oe.relatedTarget,Ie=oe.currentTarget;queueMicrotask(()=>{const Ce=M(),ye=!(Qn(U,pe)||Qn(L,pe)||Qn(pe,L)||Qn(J==null?void 0:J.portalNode,pe)||pe!=null&&pe.hasAttribute(ys("focus-guard"))||Q&&(Lu(Q.nodesRef.current,Ce).find(we=>{var Ze,mt;return Qn((Ze=we.context)==null?void 0:Ze.elements.floating,pe)||Qn((mt=we.context)==null?void 0:mt.elements.domReference,pe)})||sp(Q.nodesRef.current,Ce).find(we=>{var Ze,mt,$t;return[(Ze=we.context)==null?void 0:Ze.elements.floating,zR((mt=we.context)==null?void 0:mt.elements.floating)].includes(pe)||(($t=we.context)==null?void 0:$t.elements.domReference)===pe})));if(Ie===U&&z&&bp(z,ue),h&&ye&&ml(la(z))===la(z).body){gn(z)&&z.focus();const we=D.current,Ze=B(),mt=Ze[we]||Ze[Ze.length-1]||z;gn(mt)&&mt.focus()}(P||!A)&&pe&&ye&&!W.current&&pe!==Op()&&(K.current=!0,_(!1,oe,"focus-out"))})}if(L&&gn(U))return U.addEventListener("focusout",Ne),U.addEventListener("pointerdown",ge),L.addEventListener("focusout",Ne),()=>{U.removeEventListener("focusout",Ne),U.removeEventListener("pointerdown",ge),L.removeEventListener("focusout",Ne)}},[i,U,L,z,A,Q,J,_,T,h,B,P,M,ue]);const he=O.useRef(null),se=O.useRef(null),Ae=Cp([he,J==null?void 0:J.beforeInsideRef]),Re=Cp([se,J==null?void 0:J.afterInsideRef]);O.useEffect(()=>{var ge,Ne;if(i||!L)return;const oe=Array.from((J==null||(ge=J.portalNode)==null?void 0:ge.querySelectorAll("["+ys("portal")+"]"))||[]),pe=Q?sp(Q.nodesRef.current,M()):[],Ie=Q&&!A?pe.map(Ze=>{var mt;return(mt=Ze.context)==null?void 0:mt.elements.floating}):[],Ce=(Ne=pe.find(Ze=>{var mt;return lp(((mt=Ze.context)==null?void 0:mt.elements.domReference)||null)}))==null||(Ne=Ne.context)==null?void 0:Ne.elements.domReference,ye=[L,Ce,...oe,...Ie,...G(),F.current,w.current,he.current,se.current,J==null?void 0:J.beforeOutsideRef.current,J==null?void 0:J.afterOutsideRef.current,ue.current.includes("reference")||P?U:null].filter(Ze=>Ze!=null),we=A||P?Np(ye,!Ee,Ee):Np(ye);return()=>{we()}},[i,U,L,A,ue,J,P,ne,Ee,Q,M,G]),Bn(()=>{if(i||!gn(z))return;const ge=la(z),Ne=ml(ge);queueMicrotask(()=>{const oe=ee(z),pe=de.current,Ie=(typeof pe=="number"?oe[pe]:pe.current)||z,Ce=Qn(z,Ne);!H&&!Ce&&C&&Dr(Ie,{preventScroll:Ie===z})})},[i,C,z,H,ee,de]),Bn(()=>{if(i||!z)return;let ge=!1;const Ne=la(z),oe=ml(Ne);Bk(oe);function pe(ye){let{reason:we,event:Ze,nested:mt}=ye;if(["hover","safe-polygon"].includes(we)&&Ze.type==="mouseleave"&&(K.current=!0),we==="outside-press")if(mt)K.current=!1,ge=!0;else if(vx(Ze)||Mx(Ze))K.current=!1;else{let $t=!1;document.createElement("div").focus({get preventScroll(){return $t=!0,!1}}),$t?(K.current=!1,ge=!0):K.current=!0}}b.on("openchange",pe);const Ie=Ne.createElement("span");Ie.setAttribute("tabindex","-1"),Ie.setAttribute("aria-hidden","true"),Object.assign(Ie.style,ef),Y&&U&&U.insertAdjacentElement("afterend",Ie);function Ce(){if(typeof fe.current=="boolean"){const ye=U||Op();return ye&&ye.isConnected?ye:Ie}return fe.current.current||Ie}return()=>{b.off("openchange",pe);const ye=ml(Ne),we=Qn(L,ye)||Q&&Lu(Q.nodesRef.current,M()).some(mt=>{var $t;return Qn(($t=mt.context)==null?void 0:$t.elements.floating,ye)}),Ze=Ce();queueMicrotask(()=>{const mt=Fk(Ze);fe.current&&!K.current&&gn(mt)&&(!(mt!==ye&&ye!==Ne.body)||we)&&mt.focus({preventScroll:ge}),Ie.remove()})}},[i,L,z,fe,y,b,Q,Y,U,M]),O.useEffect(()=>{queueMicrotask(()=>{K.current=!1})},[i]),Bn(()=>{if(!i&&J)return J.setFocusManagerState({modal:A,closeOnFocusOut:T,open:C,onOpenChange:_,domReference:U}),()=>{J.setFocusManagerState(null)}},[i,J,A,C,_,T,U]),Bn(()=>{i||z&&bp(z,ue)},[i,z,ue]);function Oe(ge){return i||!R||!A?null:c.jsx(zk,{ref:ge==="start"?F:w,onClick:Ne=>_(!1,Ne.nativeEvent),children:typeof R=="string"?R:"Dismiss"})}const Pe=!i&&ne&&(A?!P:!0)&&(Y||A);return c.jsxs(c.Fragment,{children:[Pe&&c.jsx(IE,{"data-type":"inside",ref:Ae,onFocus:ge=>{if(A){const oe=ee();Dr(l[0]==="reference"?oe[0]:oe[oe.length-1])}else if(J!=null&&J.preserveTabOrder&&J.portalNode)if(K.current=!1,Hu(ge,J.portalNode)){const oe=B0(U);oe==null||oe.focus()}else{var Ne;(Ne=J.beforeOutsideRef.current)==null||Ne.focus()}}}),!P&&Oe("start"),a,Oe("end"),Pe&&c.jsx(IE,{"data-type":"inside",ref:Re,onFocus:ge=>{if(A)Dr(ee()[0]);else if(J!=null&&J.preserveTabOrder&&J.portalNode)if(T&&(K.current=!0),Hu(ge,J.portalNode)){const oe=F0(U);oe==null||oe.focus()}else{var Ne;(Ne=J.afterOutsideRef.current)==null||Ne.focus()}}})]})}function Dp(e){return gn(e.target)&&e.target.tagName==="BUTTON"}function Yk(e){return gn(e.target)&&e.target.tagName==="A"}function yp(e){return $E(e)}function Kk(e,t){t===void 0&&(t={});const{open:a,onOpenChange:i,dataRef:l,elements:{domReference:r}}=e,{enabled:d=!0,event:E="click",toggle:h=!0,ignoreMouse:A=!1,keyboardHandlers:R=!0,stickIfOpen:T=!0}=t,S=O.useRef(),I=O.useRef(!1),C=O.useMemo(()=>({onPointerDown(_){S.current=_.pointerType},onMouseDown(_){const b=S.current;_.button===0&&E!=="click"&&(cc(b,!0)&&A||(a&&h&&(!(l.current.openEvent&&T)||l.current.openEvent.type==="mousedown")?i(!1,_.nativeEvent,"click"):(_.preventDefault(),i(!0,_.nativeEvent,"click"))))},onClick(_){const b=S.current;if(E==="mousedown"&&S.current){S.current=void 0;return}cc(b,!0)&&A||(a&&h&&(!(l.current.openEvent&&T)||l.current.openEvent.type==="click")?i(!1,_.nativeEvent,"click"):i(!0,_.nativeEvent,"click"))},onKeyDown(_){S.current=void 0,!(_.defaultPrevented||!R||Dp(_))&&(_.key===" "&&!yp(r)&&(_.preventDefault(),I.current=!0),!Yk(_)&&_.key==="Enter"&&i(!(a&&h),_.nativeEvent,"click"))},onKeyUp(_){_.defaultPrevented||!R||Dp(_)||yp(r)||_.key===" "&&I.current&&(I.current=!1,i(!(a&&h),_.nativeEvent,"click"))}}),[l,r,E,A,R,i,a,T,h]);return O.useMemo(()=>d?{reference:C}:{},[d,C])}function Vk(e,t){let a=null,i=null,l=!1;return{contextElement:e||void 0,getBoundingClientRect(){var r;const d=(e==null?void 0:e.getBoundingClientRect())||{width:0,height:0,x:0,y:0},E=t.axis==="x"||t.axis==="both",h=t.axis==="y"||t.axis==="both",A=["mouseenter","mousemove"].includes(((r=t.dataRef.current.openEvent)==null?void 0:r.type)||"")&&t.pointerType!=="touch";let R=d.width,T=d.height,S=d.x,I=d.y;return a==null&&t.x&&E&&(a=d.x-t.x),i==null&&t.y&&h&&(i=d.y-t.y),S-=a||0,I-=i||0,R=0,T=0,!l||A?(R=t.axis==="y"?d.width:0,T=t.axis==="x"?d.height:0,S=E&&t.x!=null?t.x:S,I=h&&t.y!=null?t.y:I):l&&!A&&(T=t.axis==="x"?d.height:T,R=t.axis==="y"?d.width:R),l=!0,{width:R,height:T,x:S,y:I,top:I,right:S+R,bottom:I+T,left:S}}}}function vp(e){return e!=null&&e.clientX!=null}function Wk(e,t){t===void 0&&(t={});const{open:a,dataRef:i,elements:{floating:l,domReference:r},refs:d}=e,{enabled:E=!0,axis:h="both",x:A=null,y:R=null}=t,T=O.useRef(!1),S=O.useRef(null),[I,C]=O.useState(),[_,b]=O.useState([]),y=Aa((H,P)=>{T.current||i.current.openEvent&&!vp(i.current.openEvent)||d.setPositionReference(Vk(r,{x:H,y:P,axis:h,dataRef:i,pointerType:I}))}),U=Aa(H=>{A!=null||R!=null||(a?S.current||b([]):y(H.clientX,H.clientY))}),L=cc(I)?l:a,M=O.useCallback(()=>{if(!L||!E||A!=null||R!=null)return;const H=Ra(l);function P(q){const ne=vi(q);Qn(l,ne)?(H.removeEventListener("mousemove",P),S.current=null):y(q.clientX,q.clientY)}if(!i.current.openEvent||vp(i.current.openEvent)){H.addEventListener("mousemove",P);const q=()=>{H.removeEventListener("mousemove",P),S.current=null};return S.current=q,q}d.setPositionReference(r)},[L,E,A,R,l,i,d,r,y]);O.useEffect(()=>M(),[M,_]),O.useEffect(()=>{E&&!l&&(T.current=!1)},[E,l]),O.useEffect(()=>{!E&&a&&(T.current=!0)},[E,a]),Bn(()=>{E&&(A!=null||R!=null)&&(T.current=!1,y(A,R))},[E,A,R,y]);const G=O.useMemo(()=>{function H(P){let{pointerType:q}=P;C(q)}return{onPointerDown:H,onPointerEnter:H,onMouseMove:U,onMouseEnter:U}},[U]);return O.useMemo(()=>E?{reference:G}:{},[E,G])}const Xk={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},qk={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},Mp=e=>{var t,a;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(a=e==null?void 0:e.outsidePress)!=null?a:!0}};function J0(e,t){t===void 0&&(t={});const{open:a,onOpenChange:i,elements:l,dataRef:r}=e,{enabled:d=!0,escapeKey:E=!0,outsidePress:h=!0,outsidePressEvent:A="pointerdown",referencePress:R=!1,referencePressEvent:T="pointerdown",ancestorScroll:S=!1,bubbles:I,capture:C}=t,_=JE(),b=Aa(typeof h=="function"?h:()=>!1),y=typeof h=="function"?b:h,U=O.useRef(!1),L=O.useRef(!1),{escapeKey:M,outsidePress:G}=Mp(I),{escapeKey:H,outsidePress:P}=Mp(C),q=O.useRef(!1),ne=Aa(J=>{var F;if(!a||!d||!E||J.key!=="Escape"||q.current)return;const w=(F=r.current.floatingContext)==null?void 0:F.nodeId,K=_?Lu(_.nodesRef.current,w):[];if(!M&&(J.stopPropagation(),K.length>0)){let W=!0;if(K.forEach(D=>{var Y;if((Y=D.context)!=null&&Y.open&&!D.context.dataRef.current.__escapeKeyBubbles){W=!1;return}}),!W)return}i(!1,yx(J)?J.nativeEvent:J,"escape-key")}),Ee=Aa(J=>{var F;const w=()=>{var K;ne(J),(K=vi(J))==null||K.removeEventListener("keydown",w)};(F=vi(J))==null||F.addEventListener("keydown",w)}),ue=Aa(J=>{var F;const w=U.current;U.current=!1;const K=L.current;if(L.current=!1,A==="click"&&K||w||typeof y=="function"&&!y(J))return;const W=vi(J),D="["+ys("inert")+"]",Y=la(l.floating).querySelectorAll(D);let z=vt(W)?W:null;for(;z&&!Ho(z);){const se=Po(z);if(Ho(se)||!vt(se))break;z=se}if(Y.length&&vt(W)&&!bx(W)&&!Qn(W,l.floating)&&Array.from(Y).every(se=>!Qn(z,se)))return;if(gn(W)&&Q){const se=Ho(W),Ae=mi(W),Re=/auto|scroll/,Oe=se||Re.test(Ae.overflowX),Pe=se||Re.test(Ae.overflowY),ge=Oe&&W.clientWidth>0&&W.scrollWidth>W.clientWidth,Ne=Pe&&W.clientHeight>0&&W.scrollHeight>W.clientHeight,oe=Ae.direction==="rtl",pe=Ne&&(oe?J.offsetX<=W.offsetWidth-W.clientWidth:J.offsetX>W.clientWidth),Ie=ge&&J.offsetY>W.clientHeight;if(pe||Ie)return}const B=(F=r.current.floatingContext)==null?void 0:F.nodeId,ee=_&&Lu(_.nodesRef.current,B).some(se=>{var Ae;return tR(J,(Ae=se.context)==null?void 0:Ae.elements.floating)});if(tR(J,l.floating)||tR(J,l.domReference)||ee)return;const he=_?Lu(_.nodesRef.current,B):[];if(he.length>0){let se=!0;if(he.forEach(Ae=>{var Re;if((Re=Ae.context)!=null&&Re.open&&!Ae.context.dataRef.current.__outsidePressBubbles){se=!1;return}}),!se)return}i(!1,J,"outside-press")}),de=Aa(J=>{var F;const w=()=>{var K;ue(J),(K=vi(J))==null||K.removeEventListener(A,w)};(F=vi(J))==null||F.addEventListener(A,w)});O.useEffect(()=>{if(!a||!d)return;r.current.__escapeKeyBubbles=M,r.current.__outsidePressBubbles=G;let J=-1;function F(Y){i(!1,Y,"ancestor-scroll")}function w(){window.clearTimeout(J),q.current=!0}function K(){J=window.setTimeout(()=>{q.current=!1},qE()?5:0)}const W=la(l.floating);E&&(W.addEventListener("keydown",H?Ee:ne,H),W.addEventListener("compositionstart",w),W.addEventListener("compositionend",K)),y&&W.addEventListener(A,P?de:ue,P);let D=[];return S&&(vt(l.domReference)&&(D=Nl(l.domReference)),vt(l.floating)&&(D=D.concat(Nl(l.floating))),!vt(l.reference)&&l.reference&&l.reference.contextElement&&(D=D.concat(Nl(l.reference.contextElement)))),D=D.filter(Y=>{var z;return Y!==((z=W.defaultView)==null?void 0:z.visualViewport)}),D.forEach(Y=>{Y.addEventListener("scroll",F,{passive:!0})}),()=>{E&&(W.removeEventListener("keydown",H?Ee:ne,H),W.removeEventListener("compositionstart",w),W.removeEventListener("compositionend",K)),y&&W.removeEventListener(A,P?de:ue,P),D.forEach(Y=>{Y.removeEventListener("scroll",F)}),window.clearTimeout(J)}},[r,l,E,y,A,a,i,S,d,M,G,ne,H,Ee,ue,P,de]),O.useEffect(()=>{U.current=!1},[y,A]);const fe=O.useMemo(()=>({onKeyDown:ne,...R&&{[Xk[T]]:J=>{i(!1,J.nativeEvent,"reference-press")},...T!=="click"&&{onClick(J){i(!1,J.nativeEvent,"reference-press")}}}}),[ne,i,R,T]),Q=O.useMemo(()=>({onKeyDown:ne,onMouseDown(){L.current=!0},onMouseUp(){L.current=!0},[qk[A]]:()=>{U.current=!0}}),[ne,A]);return O.useMemo(()=>d?{reference:fe,floating:Q}:{},[d,fe,Q])}function tS(e){const{open:t=!1,onOpenChange:a,elements:i}=e,l=JT(),r=O.useRef({}),[d]=O.useState(()=>bk()),E=eS()!=null,[h,A]=O.useState(i.reference),R=Aa((I,C,_)=>{r.current.openEvent=I?C:void 0,d.emit("openchange",{open:I,event:C,reason:_,nested:E}),a==null||a(I,C,_)}),T=O.useMemo(()=>({setPositionReference:A}),[]),S=O.useMemo(()=>({reference:h||i.reference||null,floating:i.floating||null,domReference:i.reference}),[h,i.reference,i.floating]);return O.useMemo(()=>({dataRef:r,open:t,onOpenChange:R,elements:S,events:d,floatingId:l,refs:T}),[t,R,S,d,l,T])}function Zk(e){e===void 0&&(e={});const{nodeId:t}=e,a=tS({...e,elements:{reference:null,floating:null,...e.elements}}),i=e.rootContext||a,l=i.elements,[r,d]=O.useState(null),[E,h]=O.useState(null),R=(l==null?void 0:l.domReference)||r,T=O.useRef(null),S=JE();Bn(()=>{R&&(T.current=R)},[R]);const I=Ek({...e,elements:{...l,...E&&{reference:E}}}),C=O.useCallback(L=>{const M=vt(L)?{getBoundingClientRect:()=>L.getBoundingClientRect(),getClientRects:()=>L.getClientRects(),contextElement:L}:L;h(M),I.refs.setReference(M)},[I.refs]),_=O.useCallback(L=>{(vt(L)||L===null)&&(T.current=L,d(L)),(vt(I.refs.reference.current)||I.refs.reference.current===null||L!==null&&!vt(L))&&I.refs.setReference(L)},[I.refs]),b=O.useMemo(()=>({...I.refs,setReference:_,setPositionReference:C,domReference:T}),[I.refs,_,C]),y=O.useMemo(()=>({...I.elements,domReference:R}),[I.elements,R]),U=O.useMemo(()=>({...I,...i,refs:b,elements:y,nodeId:t}),[I,b,y,t,i]);return Bn(()=>{i.dataRef.current.floatingContext=U;const L=S==null?void 0:S.nodesRef.current.find(M=>M.id===t);L&&(L.context=U)}),O.useMemo(()=>({...I,context:U,refs:b,elements:y}),[I,b,y,U])}function rR(){return Cx()&&P0()}function Qk(e,t){t===void 0&&(t={});const{open:a,onOpenChange:i,events:l,dataRef:r,elements:d}=e,{enabled:E=!0,visibleOnly:h=!0}=t,A=O.useRef(!1),R=O.useRef(-1),T=O.useRef(!0);O.useEffect(()=>{if(!E)return;const I=Ra(d.domReference);function C(){!a&&gn(d.domReference)&&d.domReference===ml(la(d.domReference))&&(A.current=!0)}function _(){T.current=!0}function b(){T.current=!1}return I.addEventListener("blur",C),rR()&&(I.addEventListener("keydown",_,!0),I.addEventListener("pointerdown",b,!0)),()=>{I.removeEventListener("blur",C),rR()&&(I.removeEventListener("keydown",_,!0),I.removeEventListener("pointerdown",b,!0))}},[d.domReference,a,E]),O.useEffect(()=>{if(!E)return;function I(C){let{reason:_}=C;(_==="reference-press"||_==="escape-key")&&(A.current=!0)}return l.on("openchange",I),()=>{l.off("openchange",I)}},[l,E]),O.useEffect(()=>()=>{Xa(R)},[]);const S=O.useMemo(()=>({onMouseLeave(){A.current=!1},onFocus(I){if(A.current)return;const C=vi(I.nativeEvent);if(h&&vt(C)){if(rR()&&!I.relatedTarget){if(!T.current&&!$E(C))return}else if(!Dx(C))return}i(!0,I.nativeEvent,"focus")},onBlur(I){A.current=!1;const C=I.relatedTarget,_=I.nativeEvent,b=vt(C)&&C.hasAttribute(ys("focus-guard"))&&C.getAttribute("data-type")==="outside";R.current=window.setTimeout(()=>{var y;const U=ml(d.domReference?d.domReference.ownerDocument:document);!C&&U===d.domReference||Qn((y=r.current.floatingContext)==null?void 0:y.refs.floating.current,U)||Qn(d.domReference,U)||b||i(!1,_,"focus")})}}),[r,d.domReference,i,h]);return O.useMemo(()=>E?{reference:S}:{},[E,S])}function cR(e,t,a){const i=new Map,l=a==="item";let r=e;if(l&&e){const{[Rp]:d,[Tp]:E,...h}=e;r=h}return{...a==="floating"&&{tabIndex:-1,[gk]:""},...r,...t.map(d=>{const E=d?d[a]:null;return typeof E=="function"?e?E(e):null:E}).concat(e).reduce((d,E)=>(E&&Object.entries(E).forEach(h=>{let[A,R]=h;if(!(l&&[Rp,Tp].includes(A)))if(A.indexOf("on")===0){if(i.has(A)||i.set(A,[]),typeof R=="function"){var T;(T=i.get(A))==null||T.push(R),d[A]=function(){for(var S,I=arguments.length,C=new Array(I),_=0;_<I;_++)C[_]=arguments[_];return(S=i.get(A))==null?void 0:S.map(b=>b(...C)).find(b=>b!==void 0)}}}else d[A]=R}),d),{})}}function eO(e){e===void 0&&(e=[]);const t=e.map(E=>E==null?void 0:E.reference),a=e.map(E=>E==null?void 0:E.floating),i=e.map(E=>E==null?void 0:E.item),l=O.useCallback(E=>cR(E,e,"reference"),t),r=O.useCallback(E=>cR(E,e,"floating"),a),d=O.useCallback(E=>cR(E,e,"item"),i);return O.useMemo(()=>({getReferenceProps:l,getFloatingProps:r,getItemProps:d}),[l,r,d])}const $k=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function Jk(e,t){var a,i;t===void 0&&(t={});const{open:l,elements:r,floatingId:d}=e,{enabled:E=!0,role:h="dialog"}=t,A=JT(),R=((a=r.domReference)==null?void 0:a.id)||A,T=O.useMemo(()=>{var U;return((U=zR(r.floating))==null?void 0:U.id)||d},[r.floating,d]),S=(i=$k.get(h))!=null?i:h,C=eS()!=null,_=O.useMemo(()=>S==="tooltip"||h==="label"?{["aria-"+(h==="label"?"labelledby":"describedby")]:l?T:void 0}:{"aria-expanded":l?"true":"false","aria-haspopup":S==="alertdialog"?"dialog":S,"aria-controls":l?T:void 0,...S==="listbox"&&{role:"combobox"},...S==="menu"&&{id:R},...S==="menu"&&C&&{role:"menuitem"},...h==="select"&&{"aria-autocomplete":"none"},...h==="combobox"&&{"aria-autocomplete":"list"}},[S,T,C,l,R,h]),b=O.useMemo(()=>{const U={id:T,...S&&{role:S}};return S==="tooltip"||h==="label"?U:{...U,...S==="menu"&&{"aria-labelledby":R}}},[S,T,R,h]),y=O.useCallback(U=>{let{active:L,selected:M}=U;const G={role:"option",...L&&{id:T+"-fui-option"}};switch(h){case"select":return{...G,"aria-selected":L&&M};case"combobox":return{...G,"aria-selected":M}}return{}},[T,h]);return O.useMemo(()=>E?{reference:_,floating:b,item:y}:{},[E,_,b,y])}function eP(e,t,a){a===void 0&&(a=!0);let i=e.filter(r=>{var d;return r.parentId===t&&((d=r.context)==null?void 0:d.open)}),l=i;for(;l.length;)l=a?e.filter(r=>{var d;return(d=l)==null?void 0:d.some(E=>{var h;return r.parentId===E.id&&((h=r.context)==null?void 0:h.open)})}):e,i=i.concat(l);return i}function Lp(e,t){const[a,i]=e;let l=!1;const r=t.length;for(let d=0,E=r-1;d<r;E=d++){const[h,A]=t[d]||[0,0],[R,T]=t[E]||[0,0];A>=i!=T>=i&&a<=(R-h)*(i-A)/(T-A)+h&&(l=!l)}return l}function tP(e,t){return e[0]>=t.x&&e[0]<=t.x+t.width&&e[1]>=t.y&&e[1]<=t.y+t.height}function nP(e){e===void 0&&(e={});const{buffer:t=.5,blockPointerEvents:a=!1,requireIntent:i=!0}=e;let l,r=!1,d=null,E=null,h=performance.now();function A(T,S){const I=performance.now(),C=I-h;if(d===null||E===null||C===0)return d=T,E=S,h=I,null;const _=T-d,b=S-E,U=Math.sqrt(_*_+b*b)/C;return d=T,E=S,h=I,U}const R=T=>{let{x:S,y:I,placement:C,elements:_,onClose:b,nodeId:y,tree:U}=T;return function(M){function G(){clearTimeout(l),b()}if(clearTimeout(l),!_.domReference||!_.floating||C==null||S==null||I==null)return;const{clientX:H,clientY:P}=M,q=[H,P],ne=Hk(M),Ee=M.type==="mouseleave",ue=lR(_.floating,ne),de=lR(_.domReference,ne),fe=_.domReference.getBoundingClientRect(),Q=_.floating.getBoundingClientRect(),J=C.split("-")[0],F=S>Q.right-Q.width/2,w=I>Q.bottom-Q.height/2,K=tP(q,fe),W=Q.width>fe.width,D=Q.height>fe.height,Y=(W?fe:Q).left,z=(W?fe:Q).right,B=(D?fe:Q).top,ee=(D?fe:Q).bottom;if(ue&&(r=!0,!Ee))return;if(de&&(r=!1),de&&!Ee){r=!0;return}if(Ee&&vt(M.relatedTarget)&&lR(_.floating,M.relatedTarget)||U&&eP(U.nodesRef.current,y).some(Ae=>{let{context:Re}=Ae;return Re==null?void 0:Re.open}))return;if(J==="top"&&I>=fe.bottom-1||J==="bottom"&&I<=fe.top+1||J==="left"&&S>=fe.right-1||J==="right"&&S<=fe.left+1)return G();let he=[];switch(J){case"top":he=[[Y,fe.top+1],[Y,Q.bottom-1],[z,Q.bottom-1],[z,fe.top+1]];break;case"bottom":he=[[Y,Q.top+1],[Y,fe.bottom-1],[z,fe.bottom-1],[z,Q.top+1]];break;case"left":he=[[Q.right-1,ee],[Q.right-1,B],[fe.left+1,B],[fe.left+1,ee]];break;case"right":he=[[fe.right-1,ee],[fe.right-1,B],[Q.left+1,B],[Q.left+1,ee]];break}function se(Ae){let[Re,Oe]=Ae;switch(J){case"top":{const Pe=[W?Re+t/2:F?Re+t*4:Re-t*4,Oe+t+1],ge=[W?Re-t/2:F?Re+t*4:Re-t*4,Oe+t+1],Ne=[[Q.left,F||W?Q.bottom-t:Q.top],[Q.right,F?W?Q.bottom-t:Q.top:Q.bottom-t]];return[Pe,ge,...Ne]}case"bottom":{const Pe=[W?Re+t/2:F?Re+t*4:Re-t*4,Oe-t],ge=[W?Re-t/2:F?Re+t*4:Re-t*4,Oe-t],Ne=[[Q.left,F||W?Q.top+t:Q.bottom],[Q.right,F?W?Q.top+t:Q.bottom:Q.top+t]];return[Pe,ge,...Ne]}case"left":{const Pe=[Re+t+1,D?Oe+t/2:w?Oe+t*4:Oe-t*4],ge=[Re+t+1,D?Oe-t/2:w?Oe+t*4:Oe-t*4];return[...[[w||D?Q.right-t:Q.left,Q.top],[w?D?Q.right-t:Q.left:Q.right-t,Q.bottom]],Pe,ge]}case"right":{const Pe=[Re-t,D?Oe+t/2:w?Oe+t*4:Oe-t*4],ge=[Re-t,D?Oe-t/2:w?Oe+t*4:Oe-t*4],Ne=[[w||D?Q.left+t:Q.right,Q.top],[w?D?Q.left+t:Q.right:Q.left+t,Q.bottom]];return[Pe,ge,...Ne]}}}if(!Lp([H,P],he)){if(r&&!K)return G();if(!Ee&&i){const Ae=A(M.clientX,M.clientY);if(Ae!==null&&Ae<.1)return G()}Lp([H,P],se([S,I]))?!r&&i&&(l=window.setTimeout(G,40)):G()}}};return R.__options={blockPointerEvents:a},R}function tO({controlled:e,default:t,name:a,state:i="value"}){const{current:l}=O.useRef(e!==void 0),[r,d]=O.useState(t),E=l?e:r,h=O.useCallback(A=>{l||d(A)},[]);return[E,h]}const eo=typeof window<"u"?O.useLayoutEffect:O.useEffect;function nO(e){const[t,a]=O.useState(e?"idle":void 0),[i,l]=O.useState(e);return e&&!i&&(l(!0),a("starting")),!e&&i&&t!=="ending"&&a("ending"),!e&&!i&&t==="ending"&&a(void 0),eo(()=>{if(!e)return;e&&i&&t!=="idle"&&a("starting");const r=requestAnimationFrame(()=>{a("idle")});return()=>{cancelAnimationFrame(r)}},[e,i,a,t]),O.useMemo(()=>({mounted:i,setMounted:l,transitionStatus:t}),[i,t])}function Ri(e){const t=O.useRef(e);return eo(()=>{t.current=e}),O.useCallback((...a)=>{var i;return(i=t.current)==null?void 0:i.call(t,...a)},[])}const aO=600;function iO(e){if(e)return{click:"click",hover:"hover",focus:"focus","focus-out":"focus-out","escape-key":"escape-key","outside-press":"outside-press","reference-press":"trigger-press","safe-polygon":"hover","ancestor-scroll":void 0,"list-navigation":void 0}[e]}function aP(e,t=!1){const a=O.useRef(-1),i=O.useRef(-1),l=Ri(()=>{cancelAnimationFrame(a.current),clearTimeout(i.current)});return O.useEffect(()=>l,[l]),Ri((r,d=null)=>{l();const E=e.current;E&&(typeof E.getAnimations!="function"||globalThis.BASE_UI_ANIMATIONS_DISABLED?r():a.current=requestAnimationFrame(()=>{function h(){E&&Promise.allSettled(E.getAnimations().map(A=>A.finished)).then(()=>{d!=null&&d.aborted||Ju.flushSync(r)})}t?i.current=window.setTimeout(h):h()}))})}function jR(e){const t=O.useRef(e);return eo(()=>{t.current=e}),t}function tf(e){const{enabled:t=!0,open:a,ref:i,onComplete:l}=e,r=jR(a),d=Ri(l),E=aP(i,a);O.useEffect(()=>{t&&E(()=>{a===r.current&&d()})},[t,a,d,E,r])}const iP=O.createContext(void 0);function oP(){return O.useContext(iP)}function lP(e){const{open:t,onOpenChange:a,defaultOpen:i=!1,hoverable:l=!0,trackCursorAxis:r="none",delay:d,closeDelay:E,onOpenChangeComplete:h,disabled:A}=e,R=d??aO,T=E??0,[S,I]=O.useState(null),[C,_]=O.useState(null),[b,y]=O.useState(),U=O.useRef(null),[L,M]=tO({controlled:t,default:i,name:"Tooltip",state:"open"}),G=Ri(a),H=O.useCallback((B,ee,he)=>{G(B,ee,he),M(B)},[G,M]);L&&A&&H(!1,void 0,void 0);const{mounted:P,setMounted:q,transitionStatus:ne}=nO(L),Ee=Ri(()=>{q(!1),h==null||h(!1)});tf({enabled:!e.actionsRef,open:L,ref:U,onComplete(){L||Ee()}}),O.useImperativeHandle(e.actionsRef,()=>({unmount:Ee}),[Ee]);const ue=tS({elements:{reference:S,floating:C},open:L,onOpenChange(B,ee,he){const se=he==="hover"||he==="safe-polygon",Ae=B&&he==="focus",Re=!B&&(he==="reference-press"||he==="escape-key");function Oe(){H(B,ee,iO(he))}se?Ju.flushSync(Oe):Oe(),Ae||Re?y(Ae?"focus":"dismiss"):he==="hover"&&y(void 0)}}),de=oP(),{delayRef:fe,isInstantPhase:Q,hasProvider:J}=Lk(ue),F=Q?"delay":b,w=vk(ue,{enabled:!A,mouseOnly:!0,move:!1,handleClose:l&&r!=="both"?nP():null,restMs(){const B=de==null?void 0:de.delay,ee=typeof fe.current=="object"?fe.current.open:void 0;let he=R;return J&&(ee!==0?he=d??B??R:he=0),he},delay(){const B=typeof fe.current=="object"?fe.current.close:void 0;let ee=T;return E==null&&J&&(ee=B),{close:ee}}}),K=Qk(ue,{enabled:!A}),W=J0(ue,{enabled:!A,referencePress:!0}),D=Wk(ue,{enabled:!A&&r!=="none",axis:r==="none"?void 0:r}),{getReferenceProps:Y,getFloatingProps:z}=eO([w,K,W,D]);return O.useMemo(()=>({open:L,setOpen:H,mounted:P,setMounted:q,setTriggerElement:I,positionerElement:C,setPositionerElement:_,popupRef:U,getTriggerProps:Y,getPopupProps:z,floatingRootContext:ue,instantType:F,transitionStatus:ne,onOpenChangeComplete:h}),[P,L,q,C,H,Y,z,ue,F,ne,h])}const oO=function(t){const{disabled:a=!1,defaultOpen:i=!1,onOpenChange:l,open:r,delay:d,closeDelay:E,hoverable:h=!0,trackCursorAxis:A="none",actionsRef:R,onOpenChangeComplete:T}=t,S=d??aO,I=E??0,C=lP({...t,defaultOpen:i,onOpenChange:l,open:r,hoverable:h,trackCursorAxis:A,delay:d,closeDelay:E,actionsRef:R,onOpenChangeComplete:T,disabled:a}),_=O.useMemo(()=>({...C,delay:S,closeDelay:I,trackCursorAxis:A}),[C,S,I,A]);return c.jsx(C0.Provider,{value:_,children:t.children})};let _E=function(e){return e.startingStyle="data-starting-style",e.endingStyle="data-ending-style",e}({});const sP={[_E.startingStyle]:""},rP={[_E.endingStyle]:""},nS={transitionStatus(e){return e==="starting"?sP:e==="ending"?rP:null}};let hs=function(e){return e.open="data-open",e.closed="data-closed",e[e.startingStyle=_E.startingStyle]="startingStyle",e[e.endingStyle=_E.endingStyle]="endingStyle",e.anchorHidden="data-anchor-hidden",e}({}),cP=function(e){return e.popupOpen="data-popup-open",e.pressed="data-pressed",e}({});const uP={[cP.popupOpen]:""},dP={[hs.open]:""},hP={[hs.closed]:""},EP={[hs.anchorHidden]:""},lO={open(e){return e?uP:null}},nf={open(e){return e?dP:hP},anchorHidden(e){return e?EP:null}};function fP(e,t){let a={};return Object.entries(e).forEach(([i,l])=>{if(t!=null&&t.hasOwnProperty(i)){const r=t[i](l);r!=null&&(a={...a,...r});return}l===!0?a[`data-${i.toLowerCase()}`]="":l&&(a[`data-${i.toLowerCase()}`]=l.toString())}),a}function AP(e,t){return typeof e=="function"?e(t):e}function Bo(...e){if(e.length===0)return{};if(e.length===1)return Hp(e[0],{});let t=Hp(e[0],{});for(let a=1;a<e.length;a+=1){const i=e[a];i&&(sO(i)?t=i(t):t=mP(t,i))}return t??{}}function Hp(e,t){return sO(e)?e(t):e??{}}function mP(e,t){return t?e?Object.entries(t).reduce((a,[i,l])=>(RP(i,l)?a[i]=TP(e[i],l):i==="style"?a[i]=SP(e.style,l):i==="className"?a[i]=IP(e.className,l):a[i]=l,a),{...e}):t:e||{}}function RP(e,t){const a=e.charCodeAt(2);return e[0]==="o"&&e[1]==="n"&&a>=65&&a<=90&&typeof t=="function"}function sO(e){return typeof e=="function"}function TP(e,t){return a=>{if(_P(a)){const l=a;YR(l);const r=t(l);return l.baseUIHandlerPrevented||e==null||e(l),r}const i=t(a);return e==null||e(a),i}}function YR(e){return e.preventBaseUIHandler=()=>{e.baseUIHandlerPrevented=!0},e}function SP(e,t){if(t||e)return{...e,...t}}function IP(e,t){return t?e?t+" "+e:t:e}function _P(e){return e!=null&&typeof e=="object"&&"nativeEvent"in e}function gP(e,t,a){return typeof e=="function"?e(t,a):O.cloneElement(e,{...Bo(t,e.props),ref:t.ref})}function Ac(...e){const t=O.useRef(void 0),a=O.useCallback(i=>{const l=e.map(r=>{if(r==null)return null;if(typeof r=="function"){const d=r,E=d(i);return typeof E=="function"?E:()=>{d(null)}}return r.current=i,()=>{r.current=null}});return()=>{l.forEach(r=>r==null?void 0:r())}},e);return O.useMemo(()=>e.every(i=>i==null)?null:i=>{t.current&&(t.current(),t.current=void 0),i!=null&&(t.current=a(i))},e)}const NP=parseInt(O.version,10);function rO(e){return NP>=e}function pP(e,...t){let a;return typeof e!="function"?a=rO(19)?e.props.ref:e.ref:a=null,Ac(a,...t)}function CP(e){return function(a){return e==="button"?c.jsx("button",{type:"button",...a}):e==="img"?c.jsx("img",{alt:"",...a}):c.jsx(e,{...a})}}const Up={};function af(e,t,a={}){const{className:i,render:l}=t,{propGetter:r=y=>y,state:d=Up,ref:E,props:h,customStyleHookMapping:A,styleHooks:R=!0}=a,T=l||(typeof e=="string"?CP(e):e),S=AP(i,d),I=O.useMemo(()=>R?fP(d,A):Up,[d,A,R]),C=r({...I,...Array.isArray(h)?Bo(...h):h});let _=[];E!==void 0&&(_=Array.isArray(E)?E:[E]);const b={...C,ref:pP(T,C.ref,..._)};return S!==void 0&&(b.className=S),()=>gP(T,b,d)}const OP=O.forwardRef(function(t,a){const{className:i,render:l,...r}=t,{open:d,setTriggerElement:E,getTriggerProps:h}=$u(),A=O.useMemo(()=>({open:d}),[d]);return af("button",t,{state:A,ref:[a,E],props:[h,r],customStyleHookMapping:lO})()});eR.oneOfType([eR.func,eR.object]);const cO=O.createContext(void 0);function bP(){const e=O.useContext(cO);if(e===void 0)throw new Error("Base UI: <Tooltip.Portal> is missing.");return e}function DP(e){const t=Q0({root:e.root});return t&&Ju.createPortal(e.children,t)}function uO(e){const{children:t,keepMounted:a=!1,container:i}=e,{mounted:l}=$u();return l||a?c.jsx(cO.Provider,{value:a,children:c.jsx(DP,{root:i,children:t})}):null}const dO=O.createContext(void 0);function yP(){const e=O.useContext(dO);if(e===void 0)throw new Error("Base UI: TooltipPositionerContext is missing. TooltipPositioner parts must be placed within <Tooltip.Positioner>.");return e}const vP=O.createContext(void 0);function MP(e=!0){const t=O.useContext(vP);if(t===void 0&&!e)throw new Error("Base UI: DirectionContext is missing.");return(t==null?void 0:t.direction)??"ltr"}function xp(e,t,a){const i=e==="inline-start"||e==="inline-end";return{top:"top",right:i?a?"inline-start":"inline-end":"right",bottom:"bottom",left:i?a?"inline-end":"inline-start":"left"}[t]}function LP(e){var Pe,ge;const{anchor:t,positionMethod:a="absolute",side:i="bottom",sideOffset:l=0,align:r="center",alignOffset:d=0,collisionBoundary:E,collisionPadding:h=5,sticky:A=!1,arrowPadding:R=5,keepMounted:T=!1,floatingRootContext:S,mounted:I,trackAnchor:C=!0,nodeId:_}=e,y=MP()==="rtl",U={top:"top",right:"right",bottom:"bottom",left:"left","inline-end":y?"left":"right","inline-start":y?"right":"left"}[i],L=r==="center"?U:`${U}-${r}`,M={boundary:E==="clipping-ancestors"?"clippingAncestors":E,padding:h},G=O.useRef(null),H=jR(l),P=jR(d),Ee=[Ak(({rects:Ne,placement:oe})=>{const pe={side:xp(i,Ai(oe),y),align:yl(oe)||"center",anchor:{width:Ne.reference.width,height:Ne.reference.height},positioner:{width:Ne.floating.width,height:Ne.floating.height}},Ie=typeof H.current=="function"?H.current(pe):H.current,Ce=typeof P.current=="function"?P.current(pe):P.current;return{mainAxis:Ie,crossAxis:Ce,alignmentAxis:Ce}},[typeof l!="function"?l:0,typeof d!="function"?d:0,y,i])],ue=Tk(M),de=mk({...M,crossAxis:A,limiter:A?void 0:Rk(()=>{if(!G.current)return{};const{height:Ne}=G.current.getBoundingClientRect();return{offset:Ne/2+(typeof h=="number"?h:0)}})});r!=="center"?Ee.push(ue,de):Ee.push(de,ue),Ee.push(Sk({...M,apply({elements:{floating:Ne},rects:{reference:oe},availableWidth:pe,availableHeight:Ie}){Object.entries({"--available-width":`${pe}px`,"--available-height":`${Ie}px`,"--anchor-width":`${oe.width}px`,"--anchor-height":`${oe.height}px`}).forEach(([Ce,ye])=>{Ne.style.setProperty(Ce,ye)})}}),_k(()=>({element:G.current||document.createElement("div"),padding:R}),[R]),Ik(),{name:"transformOrigin",fn({elements:Ne,middlewareData:oe,placement:pe}){var fd,Ad;const Ie=Ai(pe),Ce=G.current,ye=((fd=oe.arrow)==null?void 0:fd.x)??0,we=((Ad=oe.arrow)==null?void 0:Ad.y)??0,Ze=(Ce==null?void 0:Ce.clientWidth)??0,mt=(Ce==null?void 0:Ce.clientHeight)??0,$t=ye+Ze/2,Bl=we+mt/2,zs={top:`${$t}px calc(100% + ${l}px)`,bottom:`${$t}px ${-l}px`,left:`calc(100% + ${l}px) ${Bl}px`,right:`${-l}px ${Bl}px`}[Ie];return Ne.floating.style.setProperty("--transform-origin",zs),{}}});let fe=S;!I&&S&&(fe={...S,elements:{reference:null,floating:null,domReference:null}});const Q=O.useMemo(()=>({elementResize:C&&typeof ResizeObserver<"u",layoutShift:C&&typeof IntersectionObserver<"u"}),[C]),{refs:J,elements:F,floatingStyles:w,middlewareData:K,update:W,placement:D,context:Y,isPositioned:z}=Zk({rootContext:fe,placement:L,middleware:Ee,strategy:a,whileElementsMounted:T?void 0:(...Ne)=>fp(...Ne,Q),nodeId:_}),B=O.useRef(null);eo(()=>{if(!I)return;const Ne=typeof t=="function"?t():t;if(Ne){const oe=kp(Ne)?Ne.current:Ne;J.setPositionReference(oe),B.current=oe}},[I,J,t]),O.useEffect(()=>{I&&typeof t!="function"&&kp(t)&&t.current!==B.current&&(J.setPositionReference(t.current),B.current=t.current)},[I,J,t]),O.useEffect(()=>{if(T&&I&&F.domReference&&F.floating)return fp(F.domReference,F.floating,W,Q)},[T,I,F,W,Q]);const ee=Ai(D),he=xp(i,ee,y),se=yl(D)||"center",Ae=!!((Pe=K.hide)!=null&&Pe.referenceHidden),Re=O.useMemo(()=>{var Ne,oe;return{position:"absolute",top:(Ne=K.arrow)==null?void 0:Ne.y,left:(oe=K.arrow)==null?void 0:oe.x}},[K.arrow]),Oe=((ge=K.arrow)==null?void 0:ge.centerOffset)!==0;return O.useMemo(()=>({positionerStyles:w,arrowStyles:Re,arrowRef:G,arrowUncentered:Oe,side:he,align:se,anchorHidden:Ae,refs:J,context:Y,isPositioned:z}),[w,Re,G,Oe,he,se,Ae,J,Y,z])}function kp(e){return e!=null&&"current"in e}function HP(e){const{open:t,trackCursorAxis:a,mounted:i}=$u(),l=LP(e),r=O.useMemo(()=>{const d={};return(!t||a==="both")&&(d.pointerEvents="none"),{role:"presentation",hidden:!i,style:{...l.positionerStyles,...d}}},[t,a,i,l.positionerStyles]);return O.useMemo(()=>({props:r,...l}),[r,l])}const hO=O.forwardRef(function(t,a){const{render:i,className:l,anchor:r,positionMethod:d="absolute",side:E="top",align:h="center",sideOffset:A=0,alignOffset:R=0,collisionBoundary:T="clipping-ancestors",collisionPadding:S=5,arrowPadding:I=5,sticky:C=!1,trackAnchor:_=!0,...b}=t,{open:y,setPositionerElement:U,mounted:L,floatingRootContext:M}=$u(),G=bP(),H=HP({anchor:r,positionMethod:d,floatingRootContext:M,trackAnchor:_,mounted:L,side:E,sideOffset:A,align:h,alignOffset:R,collisionBoundary:T,collisionPadding:S,sticky:C,arrowPadding:I,keepMounted:G}),P=O.useMemo(()=>({open:y,side:H.side,align:H.align,anchorHidden:H.anchorHidden}),[y,H.side,H.align,H.anchorHidden]),q=O.useMemo(()=>({...P,arrowRef:H.arrowRef,arrowStyles:H.arrowStyles,arrowUncentered:H.arrowUncentered}),[P,H.arrowRef,H.arrowStyles,H.arrowUncentered]),ne=af("div",t,{state:P,props:[H.props,b],ref:[a,U],customStyleHookMapping:nf});return c.jsx(dO.Provider,{value:q,children:ne()})}),UP={...nf,...nS},EO=O.forwardRef(function(t,a){const{className:i,render:l,...r}=t,{open:d,instantType:E,transitionStatus:h,getPopupProps:A,popupRef:R,onOpenChangeComplete:T}=$u(),{side:S,align:I}=yP();tf({open:d,ref:R,onComplete(){d&&(T==null||T(!0))}});const C=O.useMemo(()=>({open:d,side:S,align:I,instant:E,transitionStatus:h}),[d,S,I,E,h]);return af("div",t,{state:C,ref:[a,R],props:[A,{style:h==="starting"?{transition:"none"}:{}},r],customStyleHookMapping:UP})()});class mn{constructor(t,a,i,l,r,d,E){Z(this,"name");Z(this,"duration");Z(this,"color");Z(this,"damageFactor");Z(this,"critBonus");Z(this,"dhBonus");Z(this,"job");this.name=t,this.duration=i,this.color=a,this.damageFactor=l,this.critBonus=r,this.dhBonus=d,this.job=E}}const aS=[new mn(x.ArcaneCircle,ht.Pink,20,1.03,0,0,"RPR"),new mn(x.ArmysPaeon,ht.Yellow,45,1,0,.03,"BRD"),new mn(x.BattleLitany,ht.Blue,20,1,.1,0,"DRG"),new mn(x.BattleVoice,ht.Orange,20,1,0,.2,"BRD"),new mn(x.Brotherhood,ht.Orange,20,1.05,0,0,"MNK"),new mn(x.Card_TheBalance,ht.Red,15,1.03,0,0,"AST"),new mn(x.Card_TheSpear,ht.Blue,15,1.06,0,0,"AST"),new mn(x.ChainStratagem,ht.Grey,20,1,.1,0,"SCH"),new mn(x.Devilment,ht.Green,20,1,.2,.2,"DNC"),new mn(x.Divination,ht.Yellow,20,1.06,0,0,"AST"),new mn(x.Dokumori,ht.Purple,21,1.05,0,0,"NIN"),new mn(x.Embolden,ht.Grey,20,1.05,0,0,"RDM"),new mn(x.MagesBallad,ht.Purple,45,1.01,0,0,"BRD"),new mn(x.RadiantFinale1,ht.Purple,20,1.02,0,0,"BRD"),new mn(x.RadiantFinale2,ht.Purple,20,1.04,0,0,"BRD"),new mn(x.RadiantFinale3,ht.Purple,20,1.06,0,0,"BRD"),new mn(x.SearingLight,ht.Blue,20,1.05,0,0,"SMN"),new mn(x.StandardFinish,ht.Yellow,60,1.05,0,0,"DNC"),new mn(x.StarryMuse,ht.Purple,20.5,1.05,0,0,"PCT"),new mn(x.TechnicalFinish,ht.Blue,20,1.05,0,0,"DNC"),new mn(x.WanderersMinuet,ht.Green,45,1,.02,0,"BRD")],fO=new Map;aS.forEach(e=>{fO.set(e.name,e)});let gE=class{constructor(t){Z(this,"name");Z(this,"info");this.name=t;let a=fO.get(t);a||(a=aS[0],console.error("Buff info not found!")),this.info=a}},KR=e=>{},VR=e=>{};const yn="/presets/markers/",xP=function(e,t){jO(e,a=>{try{const i=JSON.parse(a);t(i)}catch{console.log("parse error")}})};function vn(e){const t={marginRight:4},a=Mo(e.offsetStr);return c.jsx("button",{style:t,onClick:()=>{xP(e.url,i=>{N.timeline.loadCombinedTracksPreset(i,isNaN(a)?0:a),N.updateStats(),N.timeline.drawElements()})},children:e.displayName})}class AO extends ra.Component{constructor(a){super(a);Z(this,"state");Z(this,"onColorChange");Z(this,"onShowTextChange");Z(this,"onEnterBuffEdit");Z(this,"setOffset");Z(this,"setTime");Z(this,"setDuration");Z(this,"setTrack");Z(this,"setDescription");Z(this,"setBuff");Z(this,"setLoadTrackDest");KR=i=>{i.markerType===oa.Info?this.setState({nextMarkerType:i.markerType,nextMarkerColor:i.color,nextMarkerTime:i.time.toString(),nextMarkerDuration:i.duration.toString(),nextMarkerTrack:i.track.toString(),nextMarkerDescription:i.description,nextMarkerShowText:i.showText}):i.markerType===oa.Untargetable?this.setState({nextMarkerType:i.markerType,nextMarkerTime:i.time.toString(),nextMarkerDuration:i.duration.toString()}):this.setState({nextMarkerType:i.markerType,nextMarkerTrack:i.track.toString(),nextMarkerTime:i.time.toString(),nextMarkerDuration:i.duration.toString(),nextMarkerBuff:i.description})},this.onColorChange=i=>{i.target&&this.setState({nextMarkerColor:i.target.value})},this.onShowTextChange=i=>{i.target&&this.setState({nextMarkerShowText:i.target.checked})},this.onEnterBuffEdit=i=>{const l=new gE(i);this.setState({nextMarkerDuration:l.info.duration})},this.state={nextMarkerType:oa.Info,nextMarkerColor:ht.Blue,nextMarkerTime:"0",nextMarkerDuration:"1",nextMarkerTrack:"0",nextMarkerDescription:"",nextMarkerShowText:!1,nextMarkerBuff:x.TechnicalFinish,loadTrackDest:"0",offsetStr:"",trackBins:new Map},this.setTime=i=>{this.setState({nextMarkerTime:i})},this.setDuration=i=>{this.setState({nextMarkerDuration:i})},this.setTrack=i=>{this.setState({nextMarkerTrack:i})},this.setDescription=i=>{this.setState({nextMarkerDescription:i})},this.setBuff=i=>{this.setState({nextMarkerBuff:i})},this.setLoadTrackDest=i=>{this.setState({loadTrackDest:i})},this.setOffset=i=>this.setState({offsetStr:i}),VR=i=>{this.setState({trackBins:i})}}componentWillUnmount(){VR=a=>{},KR=a=>{}}render(){const a={display:"inline-block",marginRight:"1em",marginBottom:6},i=function(H,P){return c.jsx("option",{value:H,children:P},H)},l="When specified, all imported and preset tracks will start from the specified timestamp. Use this to combine markers for multi-phase fights with varying kill times.",r="P",d=Mo(this.state.offsetStr),E=c.jsx(Yt,{defaultValue:this.state.offsetStr,description:c.jsxs(c.Fragment,{children:[c.jsx("span",{style:{color:isNaN(d)||d===0?"":ht.Purple},children:g({en:"Load tracks starting at timestamp ",zh:" "})}),c.jsx(We,{topic:"trackLoadOffset",content:g({en:l,zh:r})}),":"]}),width:4,style:{...a,marginTop:16},onChange:this.setOffset}),h=[];this.state.trackBins.forEach((H,P)=>{h.push(P)}),h.sort();const A=[];A.push(c.jsx(Ol,{fileFormat:Uo.Json,getContentFn:()=>N.timeline.serializedCombinedMarkerTracks(),filename:"tracks_all",displayName:g({en:"all tracks combined",zh:""})},"combined")),h.forEach(H=>{const P=H>=0?H.toString():"untargetable";let q=g({en:"track ",zh:""})+H.toString();H===Cl&&(q=g({en:"track untargetable",zh:""})),A.push(c.jsx(Ol,{fileFormat:Uo.Json,getContentFn:()=>{const ne=N.timeline.serializedSeparateMarkerTracks();for(let Ee=0;Ee<ne.length;Ee++)if(ne[Ee].track===H)return ne[Ee];return console.assert(!1),[]},filename:"track_"+P,displayName:q},H))});const R={marginRight:4},T=c.jsxs("div",{children:[c.jsx(Yt,{defaultValue:this.state.nextMarkerDescription,description:g({en:"Description: ",zh:""}),width:40,onChange:this.setDescription}),c.jsx(Yt,{defaultValue:this.state.nextMarkerTrack,description:g({en:"Track: ",zh:""}),width:4,style:a,onChange:this.setTrack}),c.jsxs("div",{style:{display:"inline-block",marginTop:"4px"},children:[c.jsx("span",{children:g({en:"Color: ",zh:""})}),c.jsx("select",{style:{display:"inline-block",outline:"none"},value:this.state.nextMarkerColor,onChange:this.onColorChange,children:[i(ht.Red,g({en:"red",zh:""})),i(ht.Orange,g({en:"orange",zh:""})),i(ht.Yellow,g({en:"yellow",zh:""})),i(ht.Green,g({en:"green",zh:""})),i(ht.Cyan,g({en:"cyan",zh:""})),i(ht.Blue,g({en:"blue",zh:""})),i(ht.Purple,g({en:"purple",zh:""})),i(ht.Pink,g({en:"pink",zh:""}))]}),c.jsx("div",{style:{background:this.state.nextMarkerColor,marginLeft:"4px",display:"inline-block",verticalAlign:"middle",height:"1em",width:"4em"}})]}),c.jsxs("div",{style:{display:"inline-block",marginTop:"4px",marginLeft:"10px"},children:[c.jsx("input",{type:"checkbox",style:{position:"relative",top:3},checked:this.state.nextMarkerShowText,onChange:this.onShowTextChange}),c.jsx("span",{style:{marginLeft:4},children:g({en:"show text",zh:""})})]})]}),S=[];aS.forEach(H=>{const P=N.getActiveJob();!(P==="PCT"&&H.name===x.StarryMuse)&&!(P==="RDM"&&H.name===x.Embolden)&&!(P==="DNC"&&(H.name===x.TechnicalFinish||H.name===x.Devilment))&&S.push(c.jsx("option",{value:H.name,children:c0(H.name)},H.name))});const I=c.jsxs("div",{children:[c.jsx("span",{children:g({en:"Buff: ",zh:""})}),c.jsx("select",{value:this.state.nextMarkerBuff,onChange:H=>{if(H.target){const P=H.target.value;this.setBuff(P),this.onEnterBuffEdit(P)}},children:S}),c.jsx("div",{style:{marginTop:5},children:c.jsx(Yt,{defaultValue:this.state.nextMarkerTrack,description:g({en:"Track: ",zh:""}),width:4,style:a,onChange:this.setTrack})})]}),C=c.jsxs(c.Fragment,{children:[c.jsx("button",{style:R,onClick:()=>{N.timeline.deleteAllMarkers(),N.updateStats()},children:g({en:"clear all markers",zh:""})}),c.jsx("button",{style:R,onClick:()=>{const H=N.timeline.sortAndRemoveDuplicateMarkers();H>0?alert("removed "+H+" duplicate markers"):alert("no duplicate markers found"),N.timeline.updateTimelineMarkers()},children:g({en:"remove duplicates",zh:""})}),c.jsx("span",{children:g({en:", click to delete single markers",zh:""})})]}),_=xo(this.context,"text"),b=c.jsx("input",{style:{color:_,backgroundColor:"transparent",outline:"none",border:"none",borderBottom:"1px solid "+_},size:2,type:"text",value:this.state.loadTrackDest,onChange:H=>{this.setState({loadTrackDest:H.target.value})}}),y=g({en:c.jsxs("span",{children:["Load into individual track ",b,": "]}),zh:c.jsxs("span",{children:["",b,""]})}),U=Mo(this.state.offsetStr),L=c.jsxs(c.Fragment,{children:[c.jsx(CE,{allowLoadFromUrl:!1,defaultLoadUrl:"",label:g({en:"Load multiple tracks combined: ",zh:""}),onLoadFn:H=>{N.timeline.loadCombinedTracksPreset(H,isNaN(U)?0:U),N.updateStats(),N.timeline.drawElements()}}),c.jsx("div",{className:"paragraph",children:c.jsx(CE,{allowLoadFromUrl:!1,label:y,onLoadFn:H=>{const P=parseInt(this.state.loadTrackDest);if(isNaN(P)){window.alert("invalid track destination");return}N.timeline.loadIndividualTrackPreset(H,P,isNaN(U)?0:U),N.updateStats(),N.timeline.drawElements()}})})]}),M=c.jsxs("form",{children:[c.jsx("span",{children:g({en:"Type: ",zh:""})}),c.jsxs("select",{value:this.state.nextMarkerType,onChange:H=>{if(H.target){const P=H.target.value;this.setState({nextMarkerType:P}),P===oa.Buff&&this.onEnterBuffEdit(this.state.nextMarkerBuff)}},children:[c.jsx("option",{value:oa.Info,children:g({en:"Info",zh:""})}),c.jsx("option",{value:oa.Untargetable,children:g({en:"Untargetable",zh:""})}),c.jsx("option",{value:oa.Buff,children:g({en:"Buff",zh:""})})]}),c.jsx("span",{children:" "}),c.jsx(Yt,{defaultValue:this.state.nextMarkerTime,description:g({en:"Time: ",zh:""}),width:8,style:a,onChange:this.setTime}),c.jsx(Yt,{defaultValue:this.state.nextMarkerDuration,description:g({en:"Duration: ",zh:""}),width:8,style:a,onChange:this.setDuration}),this.state.nextMarkerType===oa.Info?T:void 0,this.state.nextMarkerType===oa.Buff?I:void 0,c.jsx("button",{type:"submit",style:{display:"block",marginTop:"0.5em"},onClick:H=>{const P={type:rt.Marker,markerType:this.state.nextMarkerType,time:Mo(this.state.nextMarkerTime),duration:parseFloat(this.state.nextMarkerDuration),color:this.state.nextMarkerColor,track:parseInt(this.state.nextMarkerTrack),description:this.state.nextMarkerDescription,showText:this.state.nextMarkerShowText};let q;if(this.state.nextMarkerType===oa.Untargetable&&(P.color=ht.Grey,P.track=Cl,P.description="",P.showText=!0),this.state.nextMarkerType===oa.Buff){const ne=new gE(this.state.nextMarkerBuff),Ee=parseFloat(this.state.nextMarkerDuration);!isNaN(Ee)&&Ee>ne.info.duration&&(q=g({en:`this buff can't last longer than ${ne.info.duration}s`,zh:`${ne.info.duration}`})),P.color=ne.info.color,P.description=ne.name,P.duration=Ee,P.showText=!0}if((isNaN(P.duration)||isNaN(P.time)||isNaN(P.track))&&(q=g({en:"some input(s) are invalid",zh:""})),q){window.alert(q),H.preventDefault();return}N.timeline.addMarker(P),N.updateStats(),this.state.nextMarkerType===oa.Untargetable&&$n(),H.preventDefault()},children:g({en:"add marker",zh:""})})]}),G=c.jsxs("div",{style:{},children:[c.jsxs("p",{children:[c.jsx("span",{children:g({en:"Current tier (en) by shanzhe: ",zh:"shanzhe"})}),c.jsx(vn,{displayName:"M5S",url:yn+"m5s.txt",offsetStr:this.state.offsetStr}),c.jsx(vn,{displayName:"M6S",url:yn+"m6s.txt",offsetStr:this.state.offsetStr}),c.jsx(vn,{displayName:"M7S",url:yn+"m7s.txt",offsetStr:this.state.offsetStr}),c.jsx(vn,{displayName:"M8S full",url:yn+"m8s_full.txt",offsetStr:this.state.offsetStr}),c.jsx(vn,{displayName:"M8S P1 to adds",url:yn+"m8s_p1_through_adds.txt",offsetStr:this.state.offsetStr}),c.jsx(vn,{displayName:"M8S P1 post-adds",url:yn+"m8s_p1_post_adds.txt",offsetStr:this.state.offsetStr}),c.jsx(vn,{displayName:"M8S P2",url:yn+"m8s_p2.txt",offsetStr:this.state.offsetStr})]}),c.jsxs("p",{children:[c.jsx("span",{children:g({en:"Quantum (en): "})}),c.jsx(vn,{displayName:"The Final Verse Q40 by shanzhe",url:yn+"final_verse_q40.txt",offsetStr:this.state.offsetStr})]}),c.jsxs("p",{children:[c.jsx("span",{children:g({en:"EX trial: ",zh:""})}),c.jsx(vn,{displayName:g({en:"Queen Eternal (en + zh) by ",zh:"+"}),url:yn+"queen_eternal.txt",offsetStr:this.state.offsetStr})]}),c.jsxs("p",{children:[c.jsx("span",{children:g({en:"FRU (en) by Yara & shanzhe: ",zh:"Yara+shanzhe"})}),c.jsx(vn,{displayName:g({en:"P1",zh:"P1"}),url:yn+"fru_p1.txt",offsetStr:this.state.offsetStr}),c.jsx(vn,{displayName:g({en:"P2 + intermission",zh:"P2"}),url:yn+"fru_p2.txt",offsetStr:this.state.offsetStr}),c.jsx(vn,{displayName:g({en:"P3 + P4",zh:"P3 + P4"}),url:yn+"fru_p3_p4.txt",offsetStr:this.state.offsetStr}),c.jsx(vn,{displayName:g({en:"P5",zh:"P5"}),url:yn+"fru_p5.txt",offsetStr:this.state.offsetStr}),c.jsx(vn,{displayName:g({en:"full fight",zh:""}),url:yn+"fru_en_full.txt",offsetStr:this.state.offsetStr})]}),c.jsxs("p",{children:[c.jsx("span",{children:g({en:"FRU (zh) by  & czmm: ",zh:"+czmm"})}),c.jsx(vn,{displayName:g({en:"full (12/8/24 ver)",zh:"12/8/24"}),url:yn+"fru_zh.txt",offsetStr:this.state.offsetStr})]}),c.jsxs("p",{children:[c.jsx("span",{children:g({en:"Legacy ultimates: ",zh:""})}),c.jsx(vn,{displayName:"DSR P2 by Caro",url:yn+"dsr_p2.txt",offsetStr:this.state.offsetStr}),c.jsx(vn,{displayName:"DSR P6 by Tischel",url:yn+"dsr_p6.txt",offsetStr:this.state.offsetStr}),c.jsx(vn,{displayName:"DSR P7 by Santa",url:yn+"dsr_p7.txt",offsetStr:this.state.offsetStr}),c.jsx(vn,{displayName:"TOP by Santa",url:yn+"TOP_2023_04_02.track",offsetStr:this.state.offsetStr})]})]});return c.jsx(c.Fragment,{children:c.jsx(rS,{contentHeight:zS,children:[{defaultSize:50,content:c.jsxs(c.Fragment,{children:[C,c.jsx("br",{}),E,c.jsx("p",{children:c.jsx("b",{children:g({en:"Presets",zh:""})})}),G,c.jsxs("p",{style:{marginTop:16},children:[c.jsx("b",{children:g({en:"Load from file",zh:""})})," ",c.jsx(We,{topic:"load tracks",content:g({en:"when loading additional markers, current markers will not be deleted",zh:""})})]}),L,c.jsx("p",{style:{marginTop:16},children:c.jsx("b",{children:g({en:"Save marker tracks to file",zh:""})})}),A]})},{defaultSize:50,content:c.jsxs(c.Fragment,{children:[c.jsx("p",{children:c.jsx("b",{children:g({en:"Create marker",zh:""})})}),M]})}]})})}}Z(AO,"contextType",Nn);const uR=new Map,mO="assets/Skills/General/Missing.png",WR=e=>{if(uR.has(e))return uR.get(e);const t=`assets/Skills/${g0(e)}`;if(t){const a=new Image;return a.src=t,a.onerror=i=>{a.src=mO,console.error("failed to load skill image: "+t),a.onerror=null},a.onload=()=>Go(),uR.set(e,a),a}};function RO(e){const t=`assets/Skills/${g0(e.skillName)}`,[a,i]=O.useState(!1);return c.jsx("img",{style:e.style,src:a?mO:t,onError:l=>i(!0),alt:e.skillName})}function kP(e={diameter:50,progress:.7,color:"rgba(0, 0, 0, 0.6)"}){const t=e.diameter/2,a=Math.PI*t,i=a*(1-e.progress),l=a-i,r=i+","+l,d=c.jsx("circle",{r:t/2,cx:20,cy:21,fill:"none",stroke:e.color,strokeWidth:t,strokeDasharray:r,strokeDashoffset:a/4+i}),E=t,h=c.jsx("circle",{r:t+E/2,cx:20,cy:21,fill:"none",stroke:e.color,strokeWidth:E});return c.jsxs("svg",{width:48,height:48,style:{position:"absolute",left:"50%",marginLeft:-20,pointerEvents:"none"},children:[d,h]})}function PP(e={diameter:50,progress:.7,color:"rgba(0, 0, 0, 0.5)"}){const t=e.diameter/2,a=2*Math.PI*t,i=a*e.progress,l=a-i,r=i+","+l,d=c.jsx("circle",{r:t,cx:20,cy:21,fill:"none",stroke:e.color,strokeWidth:2,strokeDashoffset:a/4,strokeDasharray:r});return c.jsx("svg",{width:48,height:48,style:{position:"absolute",left:"50%",marginLeft:-20,pointerEvents:"none"},children:d})}function wP(e={diameter:50,progress:.7,color:"rgba(0, 0, 0, 0.5)"}){const t=e.diameter/2,a=Math.PI*t*2,i=a*e.progress,l=a-i,r=i+","+l,d=2*Math.PI*e.progress,E="#ffffffef",h=c.jsx("circle",{r:t,cx:20,cy:21,fill:"none",stroke:E,strokeWidth:1,strokeDasharray:r,strokeDashoffset:a/4}),A=c.jsx("line",{x1:20,y1:21,x2:20,y2:21-t,stroke:E,strokeWidth:1}),R=c.jsx("line",{x1:20,y1:21,x2:20+t*Math.cos(d-Math.PI/2),y2:21+t*Math.sin(d-Math.PI/2),stroke:E,strokeWidth:1});return c.jsxs("svg",{width:48,height:48,style:{position:"absolute",left:"50%",marginLeft:-20,pointerEvents:"none"},children:[h,A,R]})}function GP(e){const[t,a]=O.useState(c.jsx("div",{})),i=O.useContext(Nn),l=()=>{const H=N.getSkillInfo({game:N.getDisplayedGame(),skillName:e.skillName}),P=Ui(i),q=[];if(H.status.ready()){let de="ready ("+H.stacksAvailable,fe=" ("+H.stacksAvailable;H.timeTillNextStackReady>0&&(de+=") (next stack ready in "+H.timeTillNextStackReady.toFixed(3),fe+=") ("+H.timeTillNextStackReady.toFixed(3)+""),de+=")",fe+=")",q.push(g({en:de,zh:fe}))}else{if(H.status.unavailableReasons.includes(ft.RequirementsNotMet)&&q.push(_s(ft.RequirementsNotMet)),H.status.unavailableReasons.includes(ft.NotEnoughMP)&&q.push(_s(ft.NotEnoughMP)+g({en:" (needs "+H.capturedManaCost+")",zh:" "+H.capturedManaCost+""})),H.status.unavailableReasons.includes(ft.Blocked)){const de=Math.max(H.timeTillNextStackReady,H.timeTillSecondaryReady??0),fe=g({en:"possibly ready in "+H.timeTillAvailable.toFixed(3),zh:""+H.timeTillAvailable.toFixed(3)+""}),Q=g({en:" (next stack ready in "+de.toFixed(3)+")",zh:""+de.toFixed(3)+"CD"});q.push(c.jsxs(c.Fragment,{children:[fe,H.stacksAvailable<H.maxStacks?Q:void 0]}))}H.status.unavailableReasons.includes(ft.NotInCombat)&&q.push(_s(ft.NotInCombat))}const ne=H.instantCast?0:H.castTime;let Ee="";H.status.ready()&&(Ee+=g({en:"cast: ",zh:""})+ne.toFixed(3),H.llCovered&&ne>_n.epsilon&&(Ee+=" (LL)"),Ee+=g({en:", cast+delay: ",zh:" +"})+H.timeTillDamageApplication.toFixed(3));const ue=c.jsxs("div",{style:{color:N.displayingUpToDateGameState?P.text:P.historical},children:[c.jsx("div",{className:"paragraph",children:c.jsx("b",{children:Ti(e.skillName)})}),c.jsx("div",{className:"paragraph",children:q.map((de,fe)=>c.jsxs("span",{children:[de,c.jsx("br",{})]},fe))}),c.jsx("div",{className:"paragraph",children:Ee})]});a(ue)},r={width:48,height:48,verticalAlign:"top",position:"relative",display:"inline-block"},d={width:40,height:40,position:"absolute",top:2,left:"50%",marginLeft:-20};let E="transparent";e.readyAsideFromCd||(E="rgba(0, 0, 0, 0.6)");const h=N.getSkillInfo({game:N.getDisplayedGame(),skillName:e.skillName}),A=h.stacksAvailable,R=h.maxStacks;let T;const S=48,I=S/3+4;let C,_;if(A>0){C="0 0 2px rgba(255, 50, 0, 1), 0 0 3px rgba(255, 100, 0, 1), 0 0 5px rgba(255, 100, 0, 1)";const H=A===R?5:3;for(let P=0;P<H;P++)C+=", 0 0 10px black";_="white"}else C="0 0 4px black, 0 0 8px black",_="rgb(223,60,60)";R>1?T=c.jsx("div",{tabIndex:-1,style:{fontFamily:"Goldman Regular",color:_,fontSize:`${I}px`,textShadow:C,width:I,textAlign:"center",bottom:2,right:1,zIndex:3,position:"absolute"},children:A}):T=c.jsx(c.Fragment,{});const b=c.jsx(kP,{diameter:38,progress:e.cdProgress,color:e.ready?"rgba(0, 0, 0, 0)":"rgba(0, 0, 0, 0.6)"}),y=c.jsx(wP,{diameter:38,progress:e.cdProgress,color:e.ready?"rgba(0, 0, 0, 0)":"rgba(255, 255, 255, 1.0)"}),U=e.secondaryCdProgress&&c.jsx(PP,{diameter:32,progress:e.secondaryCdProgress,color:"rgba(250,186,47,255)"}),L=c.jsx("img",{hidden:!e.highlight,src:"/misc/proc.png",alt:"skill proc",style:{position:"absolute",width:44,height:44,top:0,left:2,zIndex:2}}),M=c.jsxs("div",{onMouseEnter:l,children:[c.jsxs("div",{style:r,children:[" ",c.jsx(RO,{style:d,skillName:e.skillName}),c.jsxs("div",{style:{position:"absolute",width:40,height:41,top:1,left:"50%",marginLeft:-20,borderRadius:3,overflow:"hidden",zIndex:1,background:E},children:[e.cdProgress>1-_n.epsilon||!e.readyAsideFromCd||b,e.cdProgress>1-_n.epsilon||y,!e.secondaryCdProgress||e.secondaryCdProgress>1-_n.epsilon||U]}),c.jsx("div",{style:{position:"absolute",width:S,height:S,background:"url('/misc/skillIcon_overlay.png') no-repeat"}})]}),L,T]}),G=c.jsx("span",{title:In[e.skillName].name,className:"skillButton",children:c.jsx(Ms,{onClickFn:()=>{N.requestUseSkill({skillName:e.skillName,targetCount:e.targetCount},!0)},content:M})});return c.jsxs(oO,{delay:0,hoverable:!1,children:[c.jsx(OP,{render:G}),c.jsx(uO,{container:document.getElementById("skillsWindowAnchor"),children:c.jsx(hO,{sideOffset:3,side:"top",className:"tooltip-positioner",children:c.jsx(EO,{className:"info-tooltip tooltip",children:t})})})]})}let TO=e=>{};class SO extends ra.Component{constructor(a){super(a);Z(this,"state");Z(this,"onWaitTimeChange");Z(this,"onWaitTimeSubmit");Z(this,"onWaitUntilChange");Z(this,"onWaitUntilSubmit");Z(this,"onWaitSinceChange");Z(this,"onTargetCountChange");Z(this,"onRemoveTrailingIdleTime");Z(this,"onWaitTillNextMpOrLucidTick");TO=i=>{this.setState({statusList:i})},this.onWaitTimeChange=i=>{!i||!i.target||this.setState({waitTime:i.target.value})},this.onWaitTimeSubmit=i=>{i.preventDefault();const l=parseFloat(this.state.waitTime);if(!isNaN(l))if(this.state.waitSince==="Now")N.step(l,!0);else if(this.state.waitSince==="LastSkill"){const r=N.game.time-N.lastSkillTime,d=l-r;d<=0?window.alert("Invalid input: trying to jump to "+l+"s since the last action, but "+r+"s has already elapsed."):N.step(d,!0)}else console.assert(!1)},this.onWaitUntilChange=i=>{!i||!i.target||this.setState({waitUntil:i.target.value})},this.onWaitUntilSubmit=i=>{i.preventDefault();const l=Mo(this.state.waitUntil);isNaN(l)||(l>(N.displayingUpToDateGameState?N.game.getDisplayTime():N.savedHistoricalGame.getDisplayTime())?N.stepUntil(l,!0):window.alert("Can only jump to a time in the future!"))},this.onWaitSinceChange=i=>{this.setState({waitSince:i.target.value})},this.onTargetCountChange=i=>{this.setState({targetCount:parseInt(i.target.value)})},this.onRemoveTrailingIdleTime=()=>{N.removeTrailingIdleTime()},this.onWaitTillNextMpOrLucidTick=()=>{N.waitTillNextMpOrLucidTick()},this.state={statusList:[],waitTime:"1",waitSince:"Now",waitUntil:"0:00",targetCount:1}}render(){const a=[];for(let h=0;h<this.state.statusList.length;h++){const A=this.state.statusList[h].skillName,R=this.state.statusList[h],T=R?!R.status.unavailableReasons.some(I=>I!==ft.Blocked):!1,S=c.jsx(GP,{highlight:R?R.highlight:!1,skillName:A,ready:R?R.status.ready():!1,readyAsideFromCd:T,cdProgress:R?1-R.timeTillNextStackReady/R.cdRecastTime:1,secondaryCdProgress:R&&R.secondaryCdRecastTime&&R.timeTillSecondaryReady?1-R.timeTillSecondaryReady/R.secondaryCdRecastTime:1,targetCount:this.state.targetCount},h);a.push(S)}const i=c.jsx(We,{topic:"waitUntilInputFormat",content:c.jsxs("div",{children:[c.jsx("div",{className:"paragraph",children:g({en:"Examples:",zh:""})}),c.jsxs("div",{className:"paragraph",children:["12 ",c.jsx("br",{}),"1.5 ",c.jsx("br",{}),"10:04.2 ",c.jsx("br",{}),"-0:03"]})]})}),l={display:"inline-block",flex:"auto"},r=Ui(this.context),d={outline:"none",border:"none",borderBottom:"1px solid "+r.text,borderRadius:0,background:"transparent",color:r.text},E=c.jsx(We,{topic:"targetCount",content:g({en:c.jsxs(c.Fragment,{children:[c.jsx("span",{children:"The number of targets hit by the next ability. Damage fall-off is automatically computed. If the number of targets set is more than the number of enemies the ability can hit, then the additional targets are ignored."}),c.jsx("br",{}),c.jsx("br",{}),c.jsx("span",{children:"Buff calculations for enemy debuffs like Dokumori and Chain Stratagem may be inaccurate when multiple targets are selected."})]}),zh:c.jsxs("div",{children:[c.jsx("span",{children:"2"}),c.jsx("br",{}),c.jsx("br",{}),c.jsx("span",{children:""})]})})});return c.jsx("div",{className:"skillsWindow",id:"skillsWindowAnchor",children:c.jsxs("div",{className:"skillIcons",children:[c.jsx("style",{children:`
					.info-tooltip {
						color: ${r.text};
						background-color: ${r.tipBackground};
						opacity: 0.98;
						max-width: 300px;
						outline: 1px solid ${r.bgHighContrast};
						transition: none;
						font-size: 100%;
						z-index: 10;
					}
				`}),a,c.jsxs("div",{style:{margin:"10px 0"},children:[g({en:"# of targets hit",zh:""})," ",E,":"," ",c.jsx("input",{type:"number",min:1,max:HL,style:{width:30,...d},value:this.state.targetCount,onChange:this.onTargetCountChange}),c.jsxs("div",{style:{display:"flex",flexDirection:"row",marginBottom:6},children:[g({en:c.jsxs("form",{onSubmit:this.onWaitTimeSubmit,style:l,children:["Wait until"," ",c.jsx("input",{type:"text",style:{width:40,...d},value:this.state.waitTime,onChange:this.onWaitTimeChange})," ","second(s) since"," ",c.jsxs("select",{style:{display:"inline-block",outline:"none"},value:this.state.waitSince,onChange:this.onWaitSinceChange,children:[c.jsx("option",{value:"Now",children:"now"}),c.jsx("option",{value:"LastSkill",children:"last action"})]})," ",c.jsx("input",{type:"submit",value:"GO"})]}),zh:c.jsxs("form",{onSubmit:this.onWaitTimeSubmit,style:l,children:[""," ",c.jsxs("select",{style:{display:"inline-block",outline:"none"},value:this.state.waitSince,onChange:this.onWaitSinceChange,children:[c.jsx("option",{value:"Now",children:""}),c.jsx("option",{value:"LastSkill",children:""})]})," ",""," ",c.jsx("input",{type:"text",style:{width:30,...d},value:this.state.waitTime,onChange:this.onWaitTimeChange})," "," ",c.jsx("input",{type:"submit",value:"GO"})]}),ja:c.jsxs("form",{onSubmit:this.onWaitTimeSubmit,style:l,children:[c.jsxs("select",{style:{display:"inline-block",outline:"none",marginRight:"4px"},value:this.state.waitSince,onChange:this.onWaitSinceChange,children:[c.jsx("option",{value:"Now",children:""}),c.jsx("option",{value:"LastSkill",children:""})]}),"",c.jsx("input",{type:"text",style:{width:30,...d},value:this.state.waitTime,onChange:this.onWaitTimeChange}),"",c.jsx("input",{type:"submit",value:"GO"})]})}),g({en:c.jsxs("form",{onSubmit:this.onWaitUntilSubmit,style:l,children:["Wait until ",i," ",c.jsx("input",{type:"text",style:{width:60,...d},value:this.state.waitUntil,onChange:this.onWaitUntilChange}),c.jsx("input",{type:"submit",value:"GO"})]}),zh:c.jsxs("form",{onSubmit:this.onWaitUntilSubmit,style:l,children:[" ",i," ",c.jsx("input",{type:"text",style:{width:60,...d},value:this.state.waitUntil,onChange:this.onWaitUntilChange}),c.jsx("input",{type:"submit",value:"GO"})]}),ja:c.jsxs("form",{onSubmit:this.onWaitUntilSubmit,style:l,children:[" ",i," ",c.jsx("input",{type:"text",style:{width:60,...d},value:this.state.waitUntil,onChange:this.onWaitUntilChange}),c.jsx("input",{type:"submit",value:"GO"})]})})]}),c.jsx("button",{onClick:this.onWaitTillNextMpOrLucidTick,children:g({en:"Wait until MP tick / lucid tick",zh:"/"})}),c.jsx("span",{children:" "}),c.jsx("button",{onClick:this.onRemoveTrailingIdleTime,children:g({en:"Remove trailing idle time",zh:""})})]})]})})}}Z(SO,"contextType",Nn);let pl=()=>{};function BP(e){const[t,a]=O.useState("(untitled)"),i=l=>a(l);return c.jsxs("form",{children:[c.jsx(Yt,{style:{display:"inline-block",marginTop:"10px"},defaultValue:t,description:g({en:"name: ",zh:""}),width:30,onChange:i}),c.jsx("span",{children:" "}),c.jsx("button",{type:"submit",disabled:!e.enabled,onClick:l=>{N.addSelectionToPreset(t),l.preventDefault()},children:g({en:"add selection to preset",zh:""})})]})}function FP(e){const t=e.line,a=[];let i=0;const l={margin:"0 1px",width:"18px",verticalAlign:"middle"};for(const d of t.actions)if(d.info.type===Ve.Skill){const E=d.info.skillName;a.push(c.jsx(RO,{style:l,skillName:E},i)),i++}const r=c.jsxs("span",{children:[t.name," (",a,")"]});return c.jsxs("div",{style:{marginBottom:"8px"},children:[c.jsx(Ms,{content:r,onClickFn:()=>{const d=N.record.selectionStartIndex;N.displayingUpToDateGameState?(N.tryAddLine(t,Mn.SkillSequence),N.updateAllDisplay(),N.scrollToTime()):d!==void 0&&N.undoStack.doThenPush(new dS(t.actions,d,"preset"))}}),c.jsx("span",{children:" "}),c.jsx(Ms,{content:"[x]",onClickFn:()=>{N.deleteLine(t)}})]})}function zP(){const e=O.useContext(Nn),[,t]=O.useReducer(r=>r+1,0);O.useEffect(()=>(pl=()=>t(),()=>{pl=()=>{}}),[]);const a=N.record.getFirstSelection()!==void 0,i=xo(e,"bgMediumContrast"),l=c.jsxs("div",{children:[c.jsx("button",{style:{marginBottom:10},onClick:()=>{N.deleteAllLines()},children:g({en:"clear all presets",zh:""})}),c.jsx(CE,{allowLoadFromUrl:!1,defaultLoadUrl:"https://miyehn.me/ffxiv-blm-rotation/presets/lines/default.txt",onLoadFn:r=>{r.fileType===Li.SkillSequencePresets?N.appendFilePresets(r):window.alert("incorrect file type '"+r.fileType+"'")}}),c.jsxs("div",{style:{outline:"1px solid "+i,margin:"10px 0",padding:"10px"},children:[N.getPresetLines().map((r,d)=>c.jsx(FP,{line:r},d)),c.jsx(BP,{enabled:a}),c.jsx("div",{style:{marginTop:16},children:c.jsx(Ol,{fileFormat:Uo.Json,getContentFn:()=>N.serializedPresets(),filename:"presets",displayName:g({en:"download presets to file",zh:""})})})]})]});return c.jsx(Yr,{title:g({en:"Skill sequence presets",zh:""}),content:l,defaultShow:!1})}const Mi=4;var rt=(e=>(e.s_Cursor="s_Cursor",e.s_HistoricalCursor="s_HistoricalCursor",e.DamageMark="DamageMark",e.HealingMark="HealingMark",e.AggroMark="AggroMark",e.LucidMark="LucidMark",e.MPTickMark="MPTickMark",e.MeditateTickMark="MeditateTickMark",e.AutoTickMark="AutoTickMark",e.Skill="Skill",e.Marker="Marker",e.WarningMark="WarningMark",e.Buff="Buff",e))(rt||{});const Cl=-1;var oa=(e=>(e.Info="Info",e.Untargetable="Untargetable",e.Buff="Buff",e))(oa||{});function jP(e){return e.type==="s_Cursor"||e.type==="s_HistoricalCursor"}var Pt,xa,bo,Kt,IO,Bh,Fh,XR,Hr,_O,jC;let YP=(jC=class{constructor(){Ye(this,Kt);Z(this,"scale");Z(this,"startTime");Z(this,"elapsedTime");Z(this,"sharedElements");Z(this,"slots");Z(this,"activeSlotIndex");Ye(this,Pt);Ye(this,xa);Ye(this,bo);this.scale=.25,this.startTime=0,this.elapsedTime=0,this.sharedElements=[],this.slots=[],this.activeSlotIndex=-1,Ue(this,Pt,[]),Ue(this,xa,[]),Ue(this,bo,[]),be(this,Kt,_O).call(this)}setTimeSegment(t,a){this.startTime=t,this.elapsedTime=a}addElement(t){jP(t)?this.sharedElements.push(t):(console.assert(this.slots.length>0),this.slots[this.activeSlotIndex].elements.push(t))}invalidateLastElement(){if(this.slots.length>0){const t=this.slots[this.activeSlotIndex].elements;for(let a=t.length-1;a>=0;a--){const i=t[a];if(i.type==="Skill"){i.node.tmp_invalid_reasons=[ft.CastCanceled];return}}}}tryGetElement(t,a){return this.slots[this.activeSlotIndex].elements.find(i=>i.time===t&&i.type===a)}getAllMarkers(){return le(this,Pt)}getUntargetableMarkers(){return le(this,xa)}getBuffMarkers(){return le(this,bo)}addMarker(t){le(this,Pt).push(t),t.markerType==="Untargetable"?le(this,xa).push(t):t.markerType==="Buff"&&le(this,bo).push(t),this.drawElements(),be(this,Kt,Hr).call(this)}deleteMarker(t){let a=!1;for(let i=0;i<le(this,Pt).length;i++)t===le(this,Pt)[i]&&(le(this,Pt).splice(i,1),this.drawElements(),be(this,Kt,Hr).call(this),a=!0);return be(this,Kt,Bh).call(this),be(this,Kt,Fh).call(this),a}sortAndRemoveDuplicateMarkers(){le(this,Pt).sort((a,i)=>a.time-i.time);let t=0;for(let a=le(this,Pt).length-1;a>0;a--)be(this,Kt,IO).call(this,le(this,Pt)[a],le(this,Pt)[a-1])&&(le(this,Pt).splice(a,1),t++);return be(this,Kt,Bh).call(this),be(this,Kt,Fh).call(this),be(this,Kt,Hr).call(this),t}loadCombinedTracksPreset(t,a){if(t.fileType!==Li.MarkerTracksCombined){window.alert("wrong file type '"+t.fileType+"'");return}t.tracks.forEach(i=>{this.loadIndividualTrackPreset(i,i.track,a)})}loadIndividualTrackPreset(t,a,i){if(t.fileType!==Li.MarkerTrackIndividual){window.alert("wrong file type '"+t.fileType+"'");return}be(this,Kt,XR).call(this,t,a,i)}deleteAllMarkers(){const t=le(this,xa).length>0;Ue(this,Pt,[]),Ue(this,xa,[]),Ue(this,bo,[]),this.drawElements(),t&&$n(),be(this,Kt,Hr).call(this)}addSlotAtIndex(t){if(t<0||t>this.slots.length||this.slots.length+1>Mi){console.error("attempted to add slot at invalid index",t);return}for(let a=Mi-1;a>=t;a--){let i=bt(`gameRecord${a}`);i!==null&&It(`gameRecord${a+1}`,i),i=bt(`gameTimeInfo${a}`),i!==null&&It(`gameTimeInfo${a+1}`,i)}this.slots.splice(t,0,{job:"BLM",elements:[]}),this.activeSlotIndex=t,N.setConfigAndRestart(N.gameConfig)}addSlot(){this.addSlotAtIndex(this.slots.length)}removeSlot(t){console.assert(t<this.slots.length);for(let a=t;a<Mi;a++){let i=bt("gameRecord"+(a+1).toString());i!==null&&It("gameRecord"+a.toString(),i),i=bt("gameTimeInfo"+(a+1).toString()),i!==null&&It("gameTimeInfo"+a.toString(),i)}this.slots.splice(t,1);for(let a=this.slots.length;a<Mi;a++)MR("gameRecord"+a.toString()),MR("gameTimeInfo"+a.toString());this.activeSlotIndex>=t&&(this.activeSlotIndex=Math.max(0,this.activeSlotIndex-1)),this.loadSlot(this.activeSlotIndex),It("activeSlotIndex",this.activeSlotIndex.toString())}saveCurrentSlot(t,a,i){It("gameRecord"+this.activeSlotIndex.toString(),JSON.stringify(t)),It("gameTimeInfo"+this.activeSlotIndex.toString(),JSON.stringify({countdown:a,elapsedTime:i})),N.gameConfig.savePartialConfig()}loadSlot(t){const a=bt("gameRecord"+t.toString());if(a!==null){for(this.activeSlotIndex=t;this.slots.length<=t;)this.slots.push({job:"BLM",elements:[]});const i=JSON.parse(a);return N.loadBattleRecordFromFile(i),this.slots[t].job=N.game.job,!0}else return!1}reset(){this.startTime=0,this.elapsedTime=0,this.slots.length>0&&(this.slots[this.activeSlotIndex].elements=[]),this.sharedElements=[],this.addElement({type:"s_Cursor",time:0,displayTime:0}),this.addElement({type:"s_HistoricalCursor",time:0,displayTime:0,enabled:!1})}updateElem(t){console.assert(t&&t.type.substring(0,2)==="s_");for(let a=0;a<this.sharedElements.length;a++)if(this.sharedElements[a].type===t.type){this.sharedElements[a]=t;return}console.assert(!1)}setHorizontalScale(t){this.scale=t,this.drawElements()}getAllSlotsTimeInfo(){let t=0,a=0,i=!1;for(let l=0;l<Mi;l++){const r=bt("gameTimeInfo"+l.toString());if(r!==null){const d=JSON.parse(r);t=Math.max(t,d.countdown),a=Math.max(a,d.elapsedTime),i=!0}}return i?{countdown:t,rightMostTime:a}:null}getCanvasWidth(){let t=Math.max(0,this.elapsedTime),a=N.gameConfig.countdown;const i=this.getAllSlotsTimeInfo();return i!==null&&(a=Math.max(a,i.countdown),t=Math.max(t,i.rightMostTime)),le(this,Pt).forEach(r=>{const d=r.time+r.duration;t=Math.max(t,d+a)}),Math.ceil((t+Math.max(0,a)+4)/8)*8*100*this.scale}getCanvasHeight(){const t=this.getNumMarkerTracks();return De.timelineCanvasHeight(t,this.slots.length)}positionFromTime(t){return t*this.scale*100}timeFromPosition(t){return t/(this.scale*100)}drawElements(){Go(),this.updateTimelineMarkers()}updateTimelineMarkers(){Go();const t=new Map;le(this,Pt).forEach(a=>{let i=t.get(a.track);i===void 0&&(i=[]),i.push(a),t.set(a.track,i)}),VR(t)}onClickTimelineAction(t,a){if(t<0||t>=N.record.length)return;N.record.onClickNode(t,a),pl(),Bu();const i=N.record.selectionStartIndex;i!==void 0?N.displayHistoricalState(-1/0,i):N.displayHistoricalState(-1/0,t)}resizeSelection(t){const a=N.record.selectionStartIndex,i=N.record.selectionEndIndex;if(a!==void 0&&i!==void 0){const l=(N.record.startIsPivot?i:a)+(t?-1:1);l>=0&&l<N.record.length&&this.onClickTimelineAction(l,!0)}}getNumMarkerTracks(){let t=-1,a=!1;for(let i=0;i<le(this,Pt).length;i++)t=Math.max(t,le(this,Pt)[i].track),le(this,Pt)[i].track===Cl&&(a=!0);return a?t+2:t+1}duringUntargetable(t){for(let a=0;a<le(this,xa).length;a++){const i=le(this,xa)[a],l=i.time,r=i.time+i.duration;if(t>=l&&t<r)return!0}return!1}getTargetableDurationBetween(t,a){const i=function([d,E],[h,A]){const R=[];return d<h&&R.push([d,Math.min(E,h)]),A<E&&R.push([Math.max(A,d),E]),R};let l=[[t,a]];for(let d=0;d<le(this,xa).length;d++){const E=le(this,xa)[d],h=E.time,A=E.time+E.duration;let R=[];l.forEach(T=>{R=R.concat(i(T,[h,A]))}),l=R}let r=0;return l.forEach(d=>{r+=d[1]-d[0]}),r}serializedSeparateMarkerTracks(){const t=this.getNumMarkerTracks()-1,a=new Map;for(let l=Cl;l<t+1;l++)a.set(l,[]);le(this,Pt).forEach(l=>{const r=a.get(l.track);console.assert(r),r&&(r.push({time:l.time,markerType:l.markerType,duration:l.duration,description:l.description,color:l.color,showText:l.showText}),a.set(l.track,r))});const i=[];return a.forEach((l,r)=>{l.length>0&&i.push({fileType:Li.MarkerTrackIndividual,track:r,markers:l})}),i}serializedCombinedMarkerTracks(){const t=this.serializedSeparateMarkerTracks();return{fileType:Li.MarkerTracksCombined,tracks:t}}},Pt=new WeakMap,xa=new WeakMap,bo=new WeakMap,Kt=new WeakSet,IO=function(t,a){const i=function(l,r){return Math.abs(l-r)<_n.epsilon};return!(t.markerType!==a.markerType||!i(t.time,a.time)||!i(t.duration,a.duration)||t.color!==a.color||t.track!==a.track||t.showText!==a.showText||t.description!==a.description)},Bh=function(){Ue(this,xa,[]),le(this,Pt).forEach(t=>{t.markerType==="Untargetable"&&le(this,xa).push(t)}),$n()},Fh=function(){Ue(this,bo,[]),le(this,Pt).forEach(t=>{t.markerType==="Buff"&&(t.description==="Wanderer's Minuet"&&(t.description=x.WanderersMinuet),le(this,bo).push(t))})},XR=function(t,a,i){const l=t.markers.map(r=>({time:r.time+i,duration:r.duration,color:r.color,description:r.description,track:r.markerType==="Untargetable"?Cl:a,type:"Marker",markerType:r.markerType??"Info",showText:r.showText??!1}));Ue(this,Pt,le(this,Pt).concat(l)),be(this,Kt,Bh).call(this),be(this,Kt,Fh).call(this),be(this,Kt,Hr).call(this)},Hr=function(){const t=this.serializedSeparateMarkerTracks();It("timelineMarkers",JSON.stringify(t))},_O=function(){const t=bt("timelineMarkers");t!==null&&JSON.parse(t).forEach(i=>{be(this,Kt,XR).call(this,i,i.track,0)})},jC);function KP(e){return ki({attr:{viewBox:"0 0 32 32"},child:[{tag:"path",attr:{d:"M 5 5 L 5 27 L 27 27 L 27 5 Z M 7 7 L 25 7 L 25 25 L 7 25 Z M 9 20 L 9 22 L 23 22 L 23 20 Z"},child:[]}]})(e)}const of=O.createContext(null);of.displayName="PanelGroupContext";const nn={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},iS=10,Ns=O.useLayoutEffect,Pp=jE.useId,VP=typeof Pp=="function"?Pp:()=>null;let WP=0;function oS(e=null){const t=VP(),a=O.useRef(e||t||null);return a.current===null&&(a.current=""+WP++),e??a.current}function gO({children:e,className:t="",collapsedSize:a,collapsible:i,defaultSize:l,forwardedRef:r,id:d,maxSize:E,minSize:h,onCollapse:A,onExpand:R,onResize:T,order:S,style:I,tagName:C="div",..._}){const b=O.useContext(of);if(b===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:y,expandPanel:U,getPanelSize:L,getPanelStyle:M,groupId:G,isPanelCollapsed:H,reevaluatePanelConstraints:P,registerPanel:q,resizePanel:ne,unregisterPanel:Ee}=b,ue=oS(d),de=O.useRef({callbacks:{onCollapse:A,onExpand:R,onResize:T},constraints:{collapsedSize:a,collapsible:i,defaultSize:l,maxSize:E,minSize:h},id:ue,idIsFromProps:d!==void 0,order:S});O.useRef({didLogMissingDefaultSizeWarning:!1}),Ns(()=>{const{callbacks:Q,constraints:J}=de.current,F={...J};de.current.id=ue,de.current.idIsFromProps=d!==void 0,de.current.order=S,Q.onCollapse=A,Q.onExpand=R,Q.onResize=T,J.collapsedSize=a,J.collapsible=i,J.defaultSize=l,J.maxSize=E,J.minSize=h,(F.collapsedSize!==J.collapsedSize||F.collapsible!==J.collapsible||F.maxSize!==J.maxSize||F.minSize!==J.minSize)&&P(de.current,F)}),Ns(()=>{const Q=de.current;return q(Q),()=>{Ee(Q)}},[S,ue,q,Ee]),O.useImperativeHandle(r,()=>({collapse:()=>{y(de.current)},expand:Q=>{U(de.current,Q)},getId(){return ue},getSize(){return L(de.current)},isCollapsed(){return H(de.current)},isExpanded(){return!H(de.current)},resize:Q=>{ne(de.current,Q)}}),[y,U,L,H,ue,ne]);const fe=M(de.current,l);return O.createElement(C,{..._,children:e,className:t,id:ue,style:{...fe,...I},[nn.groupId]:G,[nn.panel]:"",[nn.panelCollapsible]:i||void 0,[nn.panelId]:ue,[nn.panelSize]:parseFloat(""+fe.flexGrow).toFixed(1)})}const NO=O.forwardRef((e,t)=>O.createElement(gO,{...e,forwardedRef:t}));gO.displayName="Panel";NO.displayName="forwardRef(Panel)";let qR=null,zh=-1,Rl=null;function XP(e,t){if(t){const a=(t&DO)!==0,i=(t&yO)!==0,l=(t&vO)!==0,r=(t&MO)!==0;if(a)return l?"se-resize":r?"ne-resize":"e-resize";if(i)return l?"sw-resize":r?"nw-resize":"w-resize";if(l)return"s-resize";if(r)return"n-resize"}switch(e){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function qP(){Rl!==null&&(document.head.removeChild(Rl),qR=null,Rl=null,zh=-1)}function dR(e,t){var a,i;const l=XP(e,t);if(qR!==l){if(qR=l,Rl===null&&(Rl=document.createElement("style"),document.head.appendChild(Rl)),zh>=0){var r;(r=Rl.sheet)===null||r===void 0||r.removeRule(zh)}zh=(a=(i=Rl.sheet)===null||i===void 0?void 0:i.insertRule(`*{cursor: ${l} !important;}`))!==null&&a!==void 0?a:-1}}function pO(e){return e.type==="keydown"}function CO(e){return e.type.startsWith("pointer")}function OO(e){return e.type.startsWith("mouse")}function lf(e){if(CO(e)){if(e.isPrimary)return{x:e.clientX,y:e.clientY}}else if(OO(e))return{x:e.clientX,y:e.clientY};return{x:1/0,y:1/0}}function ZP(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function QP(e,t,a){return e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y}function $P(e,t){if(e===t)throw new Error("Cannot compare node with itself");const a={a:Bp(e),b:Bp(t)};let i;for(;a.a.at(-1)===a.b.at(-1);)e=a.a.pop(),t=a.b.pop(),i=e;$e(i,"Stacking order can only be calculated for elements with a common ancestor");const l={a:Gp(wp(a.a)),b:Gp(wp(a.b))};if(l.a===l.b){const r=i.childNodes,d={a:a.a.at(-1),b:a.b.at(-1)};let E=r.length;for(;E--;){const h=r[E];if(h===d.a)return 1;if(h===d.b)return-1}}return Math.sign(l.a-l.b)}const JP=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function ew(e){var t;const a=getComputedStyle((t=bO(e))!==null&&t!==void 0?t:e).display;return a==="flex"||a==="inline-flex"}function tw(e){const t=getComputedStyle(e);return!!(t.position==="fixed"||t.zIndex!=="auto"&&(t.position!=="static"||ew(e))||+t.opacity<1||"transform"in t&&t.transform!=="none"||"webkitTransform"in t&&t.webkitTransform!=="none"||"mixBlendMode"in t&&t.mixBlendMode!=="normal"||"filter"in t&&t.filter!=="none"||"webkitFilter"in t&&t.webkitFilter!=="none"||"isolation"in t&&t.isolation==="isolate"||JP.test(t.willChange)||t.webkitOverflowScrolling==="touch")}function wp(e){let t=e.length;for(;t--;){const a=e[t];if($e(a,"Missing node"),tw(a))return a}return null}function Gp(e){return e&&Number(getComputedStyle(e).zIndex)||0}function Bp(e){const t=[];for(;e;)t.push(e),e=bO(e);return t}function bO(e){const{parentNode:t}=e;return t&&t instanceof ShadowRoot?t.host:t}const DO=1,yO=2,vO=4,MO=8,nw=ZP()==="coarse";let Hi=[],jr=!1,us=new Map,sf=new Map;const wu=new Set;function aw(e,t,a,i,l){var r;const{ownerDocument:d}=t,E={direction:a,element:t,hitAreaMargins:i,setResizeHandlerState:l},h=(r=us.get(d))!==null&&r!==void 0?r:0;return us.set(d,h+1),wu.add(E),NE(),function(){var R;sf.delete(e),wu.delete(E);const T=(R=us.get(d))!==null&&R!==void 0?R:1;if(us.set(d,T-1),NE(),T===1&&us.delete(d),Hi.includes(E)){const S=Hi.indexOf(E);S>=0&&Hi.splice(S,1),sS(),l("up",!0,null)}}}function iw(e){const{target:t}=e,{x:a,y:i}=lf(e);jr=!0,lS({target:t,x:a,y:i}),NE(),Hi.length>0&&(pE("down",e),e.preventDefault(),LO(t)||e.stopImmediatePropagation())}function hR(e){const{x:t,y:a}=lf(e);if(jr&&e.buttons===0&&(jr=!1,pE("up",e)),!jr){const{target:i}=e;lS({target:i,x:t,y:a})}pE("move",e),sS(),Hi.length>0&&e.preventDefault()}function ER(e){const{target:t}=e,{x:a,y:i}=lf(e);sf.clear(),jr=!1,Hi.length>0&&(e.preventDefault(),LO(t)||e.stopImmediatePropagation()),pE("up",e),lS({target:t,x:a,y:i}),sS(),NE()}function LO(e){let t=e;for(;t;){if(t.hasAttribute(nn.resizeHandle))return!0;t=t.parentElement}return!1}function lS({target:e,x:t,y:a}){Hi.splice(0);let i=null;(e instanceof HTMLElement||e instanceof SVGElement)&&(i=e),wu.forEach(l=>{const{element:r,hitAreaMargins:d}=l,E=r.getBoundingClientRect(),{bottom:h,left:A,right:R,top:T}=E,S=nw?d.coarse:d.fine;if(t>=A-S&&t<=R+S&&a>=T-S&&a<=h+S){if(i!==null&&document.contains(i)&&r!==i&&!r.contains(i)&&!i.contains(r)&&$P(i,r)>0){let C=i,_=!1;for(;C&&!C.contains(r);){if(QP(C.getBoundingClientRect(),E)){_=!0;break}C=C.parentElement}if(_)return}Hi.push(l)}})}function fR(e,t){sf.set(e,t)}function sS(){let e=!1,t=!1;Hi.forEach(i=>{const{direction:l}=i;l==="horizontal"?e=!0:t=!0});let a=0;sf.forEach(i=>{a|=i}),e&&t?dR("intersection",a):e?dR("horizontal",a):t?dR("vertical",a):qP()}let AR=new AbortController;function NE(){AR.abort(),AR=new AbortController;const e={capture:!0,signal:AR.signal};wu.size&&(jr?(Hi.length>0&&us.forEach((t,a)=>{const{body:i}=a;t>0&&(i.addEventListener("contextmenu",ER,e),i.addEventListener("pointerleave",hR,e),i.addEventListener("pointermove",hR,e))}),window.addEventListener("pointerup",ER,e),window.addEventListener("pointercancel",ER,e)):us.forEach((t,a)=>{const{body:i}=a;t>0&&(i.addEventListener("pointerdown",iw,e),i.addEventListener("pointermove",hR,e))}))}function pE(e,t){wu.forEach(a=>{const{setResizeHandlerState:i}=a,l=Hi.includes(a);i(e,l,t)})}function ow(){const[e,t]=O.useState(0);return O.useCallback(()=>t(a=>a+1),[])}function $e(e,t){if(!e)throw console.error(t),Error(t)}function vs(e,t,a=iS){return e.toFixed(a)===t.toFixed(a)?0:e>t?1:-1}function yo(e,t,a=iS){return vs(e,t,a)===0}function qa(e,t,a){return vs(e,t,a)===0}function lw(e,t,a){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++){const l=e[i],r=t[i];if(!qa(l,r,a))return!1}return!0}function xr({panelConstraints:e,panelIndex:t,size:a}){const i=e[t];$e(i!=null,`Panel constraints not found for index ${t}`);let{collapsedSize:l=0,collapsible:r,maxSize:d=100,minSize:E=0}=i;if(vs(a,E)<0)if(r){const h=(l+E)/2;vs(a,h)<0?a=l:a=E}else a=E;return a=Math.min(d,a),a=parseFloat(a.toFixed(iS)),a}function Nu({delta:e,initialLayout:t,panelConstraints:a,pivotIndices:i,prevLayout:l,trigger:r}){if(qa(e,0))return t;const d=[...t],[E,h]=i;$e(E!=null,"Invalid first pivot index"),$e(h!=null,"Invalid second pivot index");let A=0;if(r==="keyboard"){{const T=e<0?h:E,S=a[T];$e(S,`Panel constraints not found for index ${T}`);const{collapsedSize:I=0,collapsible:C,minSize:_=0}=S;if(C){const b=t[T];if($e(b!=null,`Previous layout not found for panel index ${T}`),qa(b,I)){const y=_-b;vs(y,Math.abs(e))>0&&(e=e<0?0-y:y)}}}{const T=e<0?E:h,S=a[T];$e(S,`No panel constraints found for index ${T}`);const{collapsedSize:I=0,collapsible:C,minSize:_=0}=S;if(C){const b=t[T];if($e(b!=null,`Previous layout not found for panel index ${T}`),qa(b,_)){const y=b-I;vs(y,Math.abs(e))>0&&(e=e<0?0-y:y)}}}}{const T=e<0?1:-1;let S=e<0?h:E,I=0;for(;;){const _=t[S];$e(_!=null,`Previous layout not found for panel index ${S}`);const y=xr({panelConstraints:a,panelIndex:S,size:100})-_;if(I+=y,S+=T,S<0||S>=a.length)break}const C=Math.min(Math.abs(e),Math.abs(I));e=e<0?0-C:C}{let S=e<0?E:h;for(;S>=0&&S<a.length;){const I=Math.abs(e)-Math.abs(A),C=t[S];$e(C!=null,`Previous layout not found for panel index ${S}`);const _=C-I,b=xr({panelConstraints:a,panelIndex:S,size:_});if(!qa(C,b)&&(A+=C-b,d[S]=b,A.toPrecision(3).localeCompare(Math.abs(e).toPrecision(3),void 0,{numeric:!0})>=0))break;e<0?S--:S++}}if(lw(l,d))return l;{const T=e<0?h:E,S=t[T];$e(S!=null,`Previous layout not found for panel index ${T}`);const I=S+A,C=xr({panelConstraints:a,panelIndex:T,size:I});if(d[T]=C,!qa(C,I)){let _=I-C,y=e<0?h:E;for(;y>=0&&y<a.length;){const U=d[y];$e(U!=null,`Previous layout not found for panel index ${y}`);const L=U+_,M=xr({panelConstraints:a,panelIndex:y,size:L});if(qa(U,M)||(_-=M-U,d[y]=M),qa(_,0))break;e>0?y--:y++}}}const R=d.reduce((T,S)=>S+T,0);return qa(R,100)?d:l}function sw({layout:e,panelsArray:t,pivotIndices:a}){let i=0,l=100,r=0,d=0;const E=a[0];$e(E!=null,"No pivot index found"),t.forEach((T,S)=>{const{constraints:I}=T,{maxSize:C=100,minSize:_=0}=I;S===E?(i=_,l=C):(r+=_,d+=C)});const h=Math.min(l,100-r),A=Math.max(i,100-d),R=e[E];return{valueMax:h,valueMin:A,valueNow:R}}function Gu(e,t=document){return Array.from(t.querySelectorAll(`[${nn.resizeHandleId}][data-panel-group-id="${e}"]`))}function HO(e,t,a=document){const l=Gu(e,a).findIndex(r=>r.getAttribute(nn.resizeHandleId)===t);return l??null}function UO(e,t,a){const i=HO(e,t,a);return i!=null?[i,i+1]:[-1,-1]}function xO(e,t=document){var a;if(t instanceof HTMLElement&&(t==null||(a=t.dataset)===null||a===void 0?void 0:a.panelGroupId)==e)return t;const i=t.querySelector(`[data-panel-group][data-panel-group-id="${e}"]`);return i||null}function rf(e,t=document){const a=t.querySelector(`[${nn.resizeHandleId}="${e}"]`);return a||null}function rw(e,t,a,i=document){var l,r,d,E;const h=rf(t,i),A=Gu(e,i),R=h?A.indexOf(h):-1,T=(l=(r=a[R])===null||r===void 0?void 0:r.id)!==null&&l!==void 0?l:null,S=(d=(E=a[R+1])===null||E===void 0?void 0:E.id)!==null&&d!==void 0?d:null;return[T,S]}function cw({committedValuesRef:e,eagerValuesRef:t,groupId:a,layout:i,panelDataArray:l,panelGroupElement:r,setLayout:d}){O.useRef({didWarnAboutMissingResizeHandle:!1}),Ns(()=>{if(!r)return;const E=Gu(a,r);for(let h=0;h<l.length-1;h++){const{valueMax:A,valueMin:R,valueNow:T}=sw({layout:i,panelsArray:l,pivotIndices:[h,h+1]}),S=E[h];if(S!=null){const I=l[h];$e(I,`No panel data found for index "${h}"`),S.setAttribute("aria-controls",I.id),S.setAttribute("aria-valuemax",""+Math.round(A)),S.setAttribute("aria-valuemin",""+Math.round(R)),S.setAttribute("aria-valuenow",T!=null?""+Math.round(T):"")}}return()=>{E.forEach((h,A)=>{h.removeAttribute("aria-controls"),h.removeAttribute("aria-valuemax"),h.removeAttribute("aria-valuemin"),h.removeAttribute("aria-valuenow")})}},[a,i,l,r]),O.useEffect(()=>{if(!r)return;const E=t.current;$e(E,"Eager values not found");const{panelDataArray:h}=E,A=xO(a,r);$e(A!=null,`No group found for id "${a}"`);const R=Gu(a,r);$e(R,`No resize handles found for group id "${a}"`);const T=R.map(S=>{const I=S.getAttribute(nn.resizeHandleId);$e(I,"Resize handle element has no handle id attribute");const[C,_]=rw(a,I,h,r);if(C==null||_==null)return()=>{};const b=y=>{if(!y.defaultPrevented)switch(y.key){case"Enter":{y.preventDefault();const U=h.findIndex(L=>L.id===C);if(U>=0){const L=h[U];$e(L,`No panel data found for index ${U}`);const M=i[U],{collapsedSize:G=0,collapsible:H,minSize:P=0}=L.constraints;if(M!=null&&H){const q=Nu({delta:qa(M,G)?P-G:G-M,initialLayout:i,panelConstraints:h.map(ne=>ne.constraints),pivotIndices:UO(a,I,r),prevLayout:i,trigger:"keyboard"});i!==q&&d(q)}}break}}};return S.addEventListener("keydown",b),()=>{S.removeEventListener("keydown",b)}});return()=>{T.forEach(S=>S())}},[r,e,t,a,i,l,d])}function Fp(e,t){if(e.length!==t.length)return!1;for(let a=0;a<e.length;a++)if(e[a]!==t[a])return!1;return!0}function kO(e,t){const a=e==="horizontal",{x:i,y:l}=lf(t);return a?i:l}function uw(e,t,a,i,l){const r=a==="horizontal",d=rf(t,l);$e(d,`No resize handle element found for id "${t}"`);const E=d.getAttribute(nn.groupId);$e(E,"Resize handle element has no group id attribute");let{initialCursorPosition:h}=i;const A=kO(a,e),R=xO(E,l);$e(R,`No group element found for id "${E}"`);const T=R.getBoundingClientRect(),S=r?T.width:T.height;return(A-h)/S*100}function dw(e,t,a,i,l,r){if(pO(e)){const d=a==="horizontal";let E=0;e.shiftKey?E=100:l!=null?E=l:E=10;let h=0;switch(e.key){case"ArrowDown":h=d?0:E;break;case"ArrowLeft":h=d?-E:0;break;case"ArrowRight":h=d?E:0;break;case"ArrowUp":h=d?0:-E;break;case"End":h=100;break;case"Home":h=-100;break}return h}else return i==null?0:uw(e,t,a,i,r)}function hw({panelDataArray:e}){const t=Array(e.length),a=e.map(r=>r.constraints);let i=0,l=100;for(let r=0;r<e.length;r++){const d=a[r];$e(d,`Panel constraints not found for index ${r}`);const{defaultSize:E}=d;E!=null&&(i++,t[r]=E,l-=E)}for(let r=0;r<e.length;r++){const d=a[r];$e(d,`Panel constraints not found for index ${r}`);const{defaultSize:E}=d;if(E!=null)continue;const h=e.length-i,A=l/h;i++,t[r]=A,l-=A}return t}function vr(e,t,a){t.forEach((i,l)=>{const r=e[l];$e(r,`Panel data not found for index ${l}`);const{callbacks:d,constraints:E,id:h}=r,{collapsedSize:A=0,collapsible:R}=E,T=a[h];if(T==null||i!==T){a[h]=i;const{onCollapse:S,onExpand:I,onResize:C}=d;C&&C(i,T),R&&(S||I)&&(I&&(T==null||yo(T,A))&&!yo(i,A)&&I(),S&&(T==null||!yo(T,A))&&yo(i,A)&&S())}})}function Lh(e,t){if(e.length!==t.length)return!1;for(let a=0;a<e.length;a++)if(e[a]!=t[a])return!1;return!0}function Ew({defaultSize:e,dragState:t,layout:a,panelData:i,panelIndex:l,precision:r=3}){const d=a[l];let E;return d==null?E=e!=null?e.toPrecision(r):"1":i.length===1?E="1":E=d.toPrecision(r),{flexBasis:0,flexGrow:E,flexShrink:1,overflow:"hidden",pointerEvents:t!==null?"none":void 0}}function fw(e,t=10){let a=null;return(...l)=>{a!==null&&clearTimeout(a),a=setTimeout(()=>{e(...l)},t)}}function zp(e){try{if(typeof localStorage<"u")e.getItem=t=>localStorage.getItem(t),e.setItem=(t,a)=>{localStorage.setItem(t,a)};else throw new Error("localStorage not supported in this environment")}catch(t){console.error(t),e.getItem=()=>null,e.setItem=()=>{}}}function PO(e){return`react-resizable-panels:${e}`}function wO(e){return e.map(t=>{const{constraints:a,id:i,idIsFromProps:l,order:r}=t;return l?i:r?`${r}:${JSON.stringify(a)}`:JSON.stringify(a)}).sort((t,a)=>t.localeCompare(a)).join(",")}function GO(e,t){try{const a=PO(e),i=t.getItem(a);if(i){const l=JSON.parse(i);if(typeof l=="object"&&l!=null)return l}}catch{}return null}function Aw(e,t,a){var i,l;const r=(i=GO(e,a))!==null&&i!==void 0?i:{},d=wO(t);return(l=r[d])!==null&&l!==void 0?l:null}function mw(e,t,a,i,l){var r;const d=PO(e),E=wO(t),h=(r=GO(e,l))!==null&&r!==void 0?r:{};h[E]={expandToSizes:Object.fromEntries(a.entries()),layout:i};try{l.setItem(d,JSON.stringify(h))}catch(A){console.error(A)}}function jp({layout:e,panelConstraints:t}){const a=[...e],i=a.reduce((r,d)=>r+d,0);if(a.length!==t.length)throw Error(`Invalid ${t.length} panel layout: ${a.map(r=>`${r}%`).join(", ")}`);if(!qa(i,100)&&a.length>0)for(let r=0;r<t.length;r++){const d=a[r];$e(d!=null,`No layout data found for index ${r}`);const E=100/i*d;a[r]=E}let l=0;for(let r=0;r<t.length;r++){const d=a[r];$e(d!=null,`No layout data found for index ${r}`);const E=xr({panelConstraints:t,panelIndex:r,size:d});d!=E&&(l+=d-E,a[r]=E)}if(!qa(l,0))for(let r=0;r<t.length;r++){const d=a[r];$e(d!=null,`No layout data found for index ${r}`);const E=d+l,h=xr({panelConstraints:t,panelIndex:r,size:E});if(d!==h&&(l-=h-d,a[r]=h,qa(l,0)))break}return a}const Rw=100,pu={getItem:e=>(zp(pu),pu.getItem(e)),setItem:(e,t)=>{zp(pu),pu.setItem(e,t)}},Yp={};function BO({autoSaveId:e=null,children:t,className:a="",direction:i,forwardedRef:l,id:r=null,onLayout:d=null,keyboardResizeBy:E=null,storage:h=pu,style:A,tagName:R="div",...T}){const S=oS(r),I=O.useRef(null),[C,_]=O.useState(null),[b,y]=O.useState([]),U=ow(),L=O.useRef({}),M=O.useRef(new Map),G=O.useRef(0),H=O.useRef({autoSaveId:e,direction:i,dragState:C,id:S,keyboardResizeBy:E,onLayout:d,storage:h}),P=O.useRef({layout:b,panelDataArray:[],panelDataArrayChanged:!1});O.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),O.useImperativeHandle(l,()=>({getId:()=>H.current.id,getLayout:()=>{const{layout:B}=P.current;return B},setLayout:B=>{const{onLayout:ee}=H.current,{layout:he,panelDataArray:se}=P.current,Ae=jp({layout:B,panelConstraints:se.map(Re=>Re.constraints)});Fp(he,Ae)||(y(Ae),P.current.layout=Ae,ee&&ee(Ae),vr(se,Ae,L.current))}}),[]),Ns(()=>{H.current.autoSaveId=e,H.current.direction=i,H.current.dragState=C,H.current.id=S,H.current.onLayout=d,H.current.storage=h}),cw({committedValuesRef:H,eagerValuesRef:P,groupId:S,layout:b,panelDataArray:P.current.panelDataArray,setLayout:y,panelGroupElement:I.current}),O.useEffect(()=>{const{panelDataArray:B}=P.current;if(e){if(b.length===0||b.length!==B.length)return;let ee=Yp[e];ee==null&&(ee=fw(mw,Rw),Yp[e]=ee);const he=[...B],se=new Map(M.current);ee(e,he,se,b,h)}},[e,b,h]),O.useEffect(()=>{});const q=O.useCallback(B=>{const{onLayout:ee}=H.current,{layout:he,panelDataArray:se}=P.current;if(B.constraints.collapsible){const Ae=se.map(ge=>ge.constraints),{collapsedSize:Re=0,panelSize:Oe,pivotIndices:Pe}=os(se,B,he);if($e(Oe!=null,`Panel size not found for panel "${B.id}"`),!yo(Oe,Re)){M.current.set(B.id,Oe);const Ne=Ur(se,B)===se.length-1?Oe-Re:Re-Oe,oe=Nu({delta:Ne,initialLayout:he,panelConstraints:Ae,pivotIndices:Pe,prevLayout:he,trigger:"imperative-api"});Lh(he,oe)||(y(oe),P.current.layout=oe,ee&&ee(oe),vr(se,oe,L.current))}}},[]),ne=O.useCallback((B,ee)=>{const{onLayout:he}=H.current,{layout:se,panelDataArray:Ae}=P.current;if(B.constraints.collapsible){const Re=Ae.map(pe=>pe.constraints),{collapsedSize:Oe=0,panelSize:Pe=0,minSize:ge=0,pivotIndices:Ne}=os(Ae,B,se),oe=ee??ge;if(yo(Pe,Oe)){const pe=M.current.get(B.id),Ie=pe!=null&&pe>=oe?pe:oe,ye=Ur(Ae,B)===Ae.length-1?Pe-Ie:Ie-Pe,we=Nu({delta:ye,initialLayout:se,panelConstraints:Re,pivotIndices:Ne,prevLayout:se,trigger:"imperative-api"});Lh(se,we)||(y(we),P.current.layout=we,he&&he(we),vr(Ae,we,L.current))}}},[]),Ee=O.useCallback(B=>{const{layout:ee,panelDataArray:he}=P.current,{panelSize:se}=os(he,B,ee);return $e(se!=null,`Panel size not found for panel "${B.id}"`),se},[]),ue=O.useCallback((B,ee)=>{const{panelDataArray:he}=P.current,se=Ur(he,B);return Ew({defaultSize:ee,dragState:C,layout:b,panelData:he,panelIndex:se})},[C,b]),de=O.useCallback(B=>{const{layout:ee,panelDataArray:he}=P.current,{collapsedSize:se=0,collapsible:Ae,panelSize:Re}=os(he,B,ee);return $e(Re!=null,`Panel size not found for panel "${B.id}"`),Ae===!0&&yo(Re,se)},[]),fe=O.useCallback(B=>{const{layout:ee,panelDataArray:he}=P.current,{collapsedSize:se=0,collapsible:Ae,panelSize:Re}=os(he,B,ee);return $e(Re!=null,`Panel size not found for panel "${B.id}"`),!Ae||vs(Re,se)>0},[]),Q=O.useCallback(B=>{const{panelDataArray:ee}=P.current;ee.push(B),ee.sort((he,se)=>{const Ae=he.order,Re=se.order;return Ae==null&&Re==null?0:Ae==null?-1:Re==null?1:Ae-Re}),P.current.panelDataArrayChanged=!0,U()},[U]);Ns(()=>{if(P.current.panelDataArrayChanged){P.current.panelDataArrayChanged=!1;const{autoSaveId:B,onLayout:ee,storage:he}=H.current,{layout:se,panelDataArray:Ae}=P.current;let Re=null;if(B){const Pe=Aw(B,Ae,he);Pe&&(M.current=new Map(Object.entries(Pe.expandToSizes)),Re=Pe.layout)}Re==null&&(Re=hw({panelDataArray:Ae}));const Oe=jp({layout:Re,panelConstraints:Ae.map(Pe=>Pe.constraints)});Fp(se,Oe)||(y(Oe),P.current.layout=Oe,ee&&ee(Oe),vr(Ae,Oe,L.current))}}),Ns(()=>{const B=P.current;return()=>{B.layout=[]}},[]);const J=O.useCallback(B=>{let ee=!1;const he=I.current;return he&&window.getComputedStyle(he,null).getPropertyValue("direction")==="rtl"&&(ee=!0),function(Ae){Ae.preventDefault();const Re=I.current;if(!Re)return()=>null;const{direction:Oe,dragState:Pe,id:ge,keyboardResizeBy:Ne,onLayout:oe}=H.current,{layout:pe,panelDataArray:Ie}=P.current,{initialLayout:Ce}=Pe??{},ye=UO(ge,B,Re);let we=dw(Ae,B,Oe,Pe,Ne,Re);const Ze=Oe==="horizontal";Ze&&ee&&(we=-we);const mt=Ie.map(zs=>zs.constraints),$t=Nu({delta:we,initialLayout:Ce??pe,panelConstraints:mt,pivotIndices:ye,prevLayout:pe,trigger:pO(Ae)?"keyboard":"mouse-or-touch"}),Bl=!Lh(pe,$t);(CO(Ae)||OO(Ae))&&G.current!=we&&(G.current=we,!Bl&&we!==0?Ze?fR(B,we<0?DO:yO):fR(B,we<0?vO:MO):fR(B,0)),Bl&&(y($t),P.current.layout=$t,oe&&oe($t),vr(Ie,$t,L.current))}},[]),F=O.useCallback((B,ee)=>{const{onLayout:he}=H.current,{layout:se,panelDataArray:Ae}=P.current,Re=Ae.map(pe=>pe.constraints),{panelSize:Oe,pivotIndices:Pe}=os(Ae,B,se);$e(Oe!=null,`Panel size not found for panel "${B.id}"`);const Ne=Ur(Ae,B)===Ae.length-1?Oe-ee:ee-Oe,oe=Nu({delta:Ne,initialLayout:se,panelConstraints:Re,pivotIndices:Pe,prevLayout:se,trigger:"imperative-api"});Lh(se,oe)||(y(oe),P.current.layout=oe,he&&he(oe),vr(Ae,oe,L.current))},[]),w=O.useCallback((B,ee)=>{const{layout:he,panelDataArray:se}=P.current,{collapsedSize:Ae=0,collapsible:Re}=ee,{collapsedSize:Oe=0,collapsible:Pe,maxSize:ge=100,minSize:Ne=0}=B.constraints,{panelSize:oe}=os(se,B,he);oe!=null&&(Re&&Pe&&yo(oe,Ae)?yo(Ae,Oe)||F(B,Oe):oe<Ne?F(B,Ne):oe>ge&&F(B,ge))},[F]),K=O.useCallback((B,ee)=>{const{direction:he}=H.current,{layout:se}=P.current;if(!I.current)return;const Ae=rf(B,I.current);$e(Ae,`Drag handle element not found for id "${B}"`);const Re=kO(he,ee);_({dragHandleId:B,dragHandleRect:Ae.getBoundingClientRect(),initialCursorPosition:Re,initialLayout:se})},[]),W=O.useCallback(()=>{_(null)},[]),D=O.useCallback(B=>{const{panelDataArray:ee}=P.current,he=Ur(ee,B);he>=0&&(ee.splice(he,1),delete L.current[B.id],P.current.panelDataArrayChanged=!0,U())},[U]),Y=O.useMemo(()=>({collapsePanel:q,direction:i,dragState:C,expandPanel:ne,getPanelSize:Ee,getPanelStyle:ue,groupId:S,isPanelCollapsed:de,isPanelExpanded:fe,reevaluatePanelConstraints:w,registerPanel:Q,registerResizeHandle:J,resizePanel:F,startDragging:K,stopDragging:W,unregisterPanel:D,panelGroupElement:I.current}),[q,C,i,ne,Ee,ue,S,de,fe,w,Q,J,F,K,W,D]),z={display:"flex",flexDirection:i==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return O.createElement(of.Provider,{value:Y},O.createElement(R,{...T,children:t,className:a,id:r,ref:I,style:{...z,...A},[nn.group]:"",[nn.groupDirection]:i,[nn.groupId]:S}))}const FO=O.forwardRef((e,t)=>O.createElement(BO,{...e,forwardedRef:t}));BO.displayName="PanelGroup";FO.displayName="forwardRef(PanelGroup)";function Ur(e,t){return e.findIndex(a=>a===t||a.id===t.id)}function os(e,t,a){const i=Ur(e,t),r=i===e.length-1?[i-1,i]:[i,i+1],d=a[i];return{...t.constraints,panelSize:d,pivotIndices:r}}function Tw({disabled:e,handleId:t,resizeHandler:a,panelGroupElement:i}){O.useEffect(()=>{if(e||a==null||i==null)return;const l=rf(t,i);if(l==null)return;const r=d=>{if(!d.defaultPrevented)switch(d.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{d.preventDefault(),a(d);break}case"F6":{d.preventDefault();const E=l.getAttribute(nn.groupId);$e(E,`No group element found for id "${E}"`);const h=Gu(E,i),A=HO(E,t,i);$e(A!==null,`No resize element found for id "${t}"`);const R=d.shiftKey?A>0?A-1:h.length-1:A+1<h.length?A+1:0;h[R].focus();break}}};return l.addEventListener("keydown",r),()=>{l.removeEventListener("keydown",r)}},[i,e,t,a])}function zO({children:e=null,className:t="",disabled:a=!1,hitAreaMargins:i,id:l,onBlur:r,onClick:d,onDragging:E,onFocus:h,onPointerDown:A,onPointerUp:R,style:T={},tabIndex:S=0,tagName:I="div",...C}){var _,b;const y=O.useRef(null),U=O.useRef({onClick:d,onDragging:E,onPointerDown:A,onPointerUp:R});O.useEffect(()=>{U.current.onClick=d,U.current.onDragging=E,U.current.onPointerDown=A,U.current.onPointerUp=R});const L=O.useContext(of);if(L===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:M,groupId:G,registerResizeHandle:H,startDragging:P,stopDragging:q,panelGroupElement:ne}=L,Ee=oS(l),[ue,de]=O.useState("inactive"),[fe,Q]=O.useState(!1),[J,F]=O.useState(null),w=O.useRef({state:ue});Ns(()=>{w.current.state=ue}),O.useEffect(()=>{if(a)F(null);else{const Y=H(Ee);F(()=>Y)}},[a,Ee,H]);const K=(_=i==null?void 0:i.coarse)!==null&&_!==void 0?_:15,W=(b=i==null?void 0:i.fine)!==null&&b!==void 0?b:5;O.useEffect(()=>{if(a||J==null)return;const Y=y.current;$e(Y,"Element ref not attached");let z=!1;return aw(Ee,Y,M,{coarse:K,fine:W},(ee,he,se)=>{if(!he){de("inactive");return}switch(ee){case"down":{de("drag"),z=!1,$e(se,'Expected event to be defined for "down" action'),P(Ee,se);const{onDragging:Ae,onPointerDown:Re}=U.current;Ae==null||Ae(!0),Re==null||Re();break}case"move":{const{state:Ae}=w.current;z=!0,Ae!=="drag"&&de("hover"),$e(se,'Expected event to be defined for "move" action'),J(se);break}case"up":{de("hover"),q();const{onClick:Ae,onDragging:Re,onPointerUp:Oe}=U.current;Re==null||Re(!1),Oe==null||Oe(),z||Ae==null||Ae();break}}})},[K,M,a,W,H,Ee,J,P,q]),Tw({disabled:a,handleId:Ee,resizeHandler:J,panelGroupElement:ne});const D={touchAction:"none",userSelect:"none"};return O.createElement(I,{...C,children:e,className:t,id:l,onBlur:()=>{Q(!1),r==null||r()},onFocus:()=>{Q(!0),h==null||h()},ref:y,role:"separator",style:{...D,...T},tabIndex:S,[nn.groupDirection]:M,[nn.groupId]:G,[nn.resizeHandle]:"",[nn.resizeHandleActive]:ue==="drag"?"pointer":fe?"keyboard":void 0,[nn.resizeHandleEnabled]:!a,[nn.resizeHandleId]:Ee,[nn.resizeHandleState]:ue})}zO.displayName="PanelResizeHandle";const Sw=3,De={rulerHeight:30,trackHeight:14,slotPaddingTop:4,damageMarkerHeight:8,skillButtonHeight:28,buffCoverHeight:4,slotPaddingBottom:4,renderSlotHeight:()=>De.slotPaddingTop+De.damageMarkerHeight+De.skillButtonHeight*1.5+De.buffCoverHeight*Sw+De.slotPaddingBottom,timelineCanvasHeight:(e,t)=>{let a=De.rulerHeight;return a+=De.trackHeight*e,a+=De.renderSlotHeight()*t,t<Mi&&(a+=De.addSlotButtonHeight),a},leftBufferWidth:20,addSlotButtonHeight:20},Iw={drawMarkers:!0,drawDamageMarks:!0,drawHealingMarks:!0,drawMPTickMarks:!0,drawBuffIndicators:!0};function _w(e){const t=new Blob([JSON.stringify(e)],{type:"text/plain;charset=utf-8"});return window.URL.createObjectURL(t)}function gw(e){var i;let t="";(i=e.meta)==null||i.forEach(l=>{t+="#"+l.toString()+`
`}),e.body.forEach(l=>{for(let r=0;r<l.length;r++)t+=l[r].toString(),r<l.length-1&&(t+=",");t+=`
`});const a=new Blob([t],{type:"text/csv;charset=utf-8"});return window.URL.createObjectURL(a)}var Uo=(e=>(e.Json="JSON",e.Csv="CSV",e.Png="PNG",e))(Uo||{});function Ol(e){var r;const[t,a]=O.useState({jsonContent:{},csvContent:{body:[]},pngContent:void 0}),i=()=>{const d=e.getContentFn();e.fileFormat==="JSON"?a({jsonContent:d}):e.fileFormat==="CSV"?a({csvContent:d}):e.fileFormat==="PNG"?a({pngContent:d}):console.assert(!1)};let l="";return e.fileFormat==="JSON"?l=_w(t.jsonContent):e.fileFormat==="CSV"?l=gw(t.csvContent):e.fileFormat==="PNG"?l=((r=t.pngContent)==null?void 0:r.toDataURL())??"":console.assert(!1),c.jsx("a",{style:{color:Mt().fileDownload,marginRight:6},href:l,download:e.filename,onClick:()=>i(),onContextMenu:()=>i(),children:`[${e.displayName===void 0?"download":e.displayName}]`})}function Nw(e,t=a=>{console.log(a)}){const a=new FileReader;a.onload=function(i){var d,E;const l=((E=(d=i.target)==null?void 0:d.result)==null?void 0:E.toString())??"";let r;try{r=JSON.parse(l)}catch(h){window.alert(g({en:"Parse error! Are you sure this is the correct file? This tool only reads text files in JSON format.",zh:"- JSON"})),console.error(h)}t(r)},a.readAsText(e,"UTF-8")}const et={positionFromTimeAndScale:function(e,t){return e*t*100},timeFromPositionAndScale:function(e,t){return e/(t*100)},displayTime:function(e,t){const a=Math.abs(e),i=Math.floor(a/60),l=a-60*i;return(e<0?"-":"")+i.toString()+":"+(l+_n.epsilon<10?"0":"")+l.toFixed(t).toString()}},pw=function(e){console.log("[asyncFetch] some error occurred")},Kp=new Map;function jO(e,t,a=pw){const i=Kp.get(e);if(i){t(i);return}const l=new XMLHttpRequest;l.addEventListener("error",a),l.addEventListener("load",r=>{t(l.responseText),Kp.set(e,l.responseText)}),l.open("GET",e),l.send()}function Mo(e){const t=e.trim();let a=1;e[0]==="-"&&(a=-1,e=e.substring(1));const i=t.indexOf(":");if(i<0)return parseFloat(t);const l=parseInt(t.substring(0,i)),r=parseFloat(t.substring(i+1));return a*(l*60+r)}function Ms(e){return c.jsx("div",{className:"clickable",onClick:e.onClickFn,style:e.style,children:e.content})}function Cw(e){const a={position:"relative",display:"inline-block",verticalAlign:"top",border:"1px solid "+Mt().bgHighContrast,borderRadius:4,height:8,top:e.offsetY,width:e.width},i={background:`${e.backgroundColor}`,height:"100%",borderRadius:"inherit",width:`${e.progress*100}%`};return c.jsx("div",{style:a,children:c.jsx("div",{style:i})})}const kr=26;function YO(e){const t=kr-2,[a,i]=ra.useState(void 0);O.useEffect(()=>{let A=e.defaultSelectedIndex;const R=bt("tabs: "+e.uniqueName);R!==null&&(R==="none"?A=void 0:A=parseInt(R)),i(A)},[e.defaultSelectedIndex,e.uniqueName]);const l=Mt(),r=function(A){const T="1px solid "+(A===a?l.bgHighContrast:l.bgMediumContrast),S="1px solid "+l.background;let I=T;(A===a||a===void 0)&&(I=S);const C=A===a?T:S;let _=S,b=S;return A===a?(_=T,b=T):A>0&&(a===void 0||a+1!==A)&&(_=T),{margin:0,display:"inline-block",boxSizing:"border-box",padding:"0 12px",borderBottom:I,borderTop:C,borderLeft:_,borderRight:b,lineHeight:`${t}px`,color:A===a?l.emphasis:l.text,cursor:e.collapsible||A!==a?"pointer":"default"}},d=[],E=[];for(let A=0;A<e.content.length;A++){const R=e.content[A],T=A===a;d.push(c.jsx("span",{style:r(A),onClick:()=>{let I=a;T?e.collapsible&&(I=void 0):I=A,i(I),It("tabs: "+e.uniqueName,I===void 0?"none":`${I}`)},children:R.titleNode},A));const S={display:T?"block":"none"};e.maxWidth!==void 0&&(S.maxWidth=e.maxWidth),E.push(c.jsx("div",{style:S,children:R.contentNode},A))}e.collapsible&&a!==void 0&&d.push(c.jsx("span",{onClick:()=>{i(void 0),It("tabs: "+e.uniqueName,"none")},children:c.jsx(KP,{style:{marginLeft:16,fontSize:14,cursor:"pointer",position:"relative",top:3}})},d.length));const h=navigator.userAgent.indexOf("Firefox")>=0;return c.jsxs("div",{style:{position:"relative",...e.style},children:[c.jsx("div",{children:d}),c.jsx("div",{className:e.scrollable?"visibleScrollbar":void 0,style:{display:a===void 0?"none":"block",height:e.height-kr,boxSizing:"border-box",padding:`10px ${h?15:5}px`,overflowY:e.scrollable?"scroll":"hidden"},children:E})]})}function rS(e){const t=Mt(),a=[];for(let i=0;i<e.children.length;i++){const l=e.children[i],r=i<e.children.length-1?e.children[i+1]:void 0;if(a.push(c.jsxs(NO,{className:l.showScrollbar?"visibleScrollbar":"invisibleScrollbar",defaultSize:l.defaultSize,minSize:l.minSize??20,style:{border:l.fullBorder===!0?`1px solid ${t.bgMediumContrast}`:void 0,boxSizing:"border-box",height:e.contentHeight,overflowY:"scroll"},children:[l.title?c.jsx("div",{style:{marginBottom:10},children:c.jsx("b",{children:l.title})}):void 0,l.content]},`column-${i}`)),i<e.children.length-1){const E=l.fullBorder===!0||r!==void 0&&r.fullBorder===!0?{margin:"0 5px"}:{borderLeft:"1px solid "+t.bgMediumContrast,margin:"0 15px 0 10px"};a.push(c.jsx(zO,{style:E},`divider-${i}`))}}return c.jsx(FO,{direction:"horizontal",children:a})}function Yt(e){var d;const t=E=>{e.onChange&&e.onChange(E.target.value)},a=Mt(),i=e.fullWidthInput?void 0:e.width??5,l={color:((d=e.style)==null?void 0:d.color)??e.componentColor??a.text,backgroundColor:"transparent",outline:"none",border:"none",borderBottom:"1px solid "+(e.componentColor??a.text),width:e.fullWidthInput?"100%":void 0},r=e.style??{};return c.jsxs("div",{style:{...r,color:e.componentColor},children:[c.jsx("span",{children:e.description}),c.jsx("input",{style:l,size:i,type:"text",value:e.defaultValue,onChange:t,onKeyDown:E=>E.stopPropagation(),autoFocus:e.autoFocus,placeholder:e.placeholder})]})}function Ow(e){const t=e.description??"default description",[a,i]=O.useState(e.defaultValue??""),l=r=>{i(r.target.value),e.onChange&&e.onChange(r.target.value),It("slider: "+e.uniqueName,r.target.value)};return O.useEffect(()=>{let r=a;const d=bt("slider: "+e.uniqueName);d!==null&&(r=d,i(d)),e.onChange&&e.onChange(r)},[]),c.jsxs("div",{style:{display:"inline-block",...e.style},children:[c.jsx("span",{children:t??""}),c.jsx("input",{size:10,type:"range",value:a,min:.05,max:1,step:.025,onChange:l,style:{position:"relative",outline:"none"}})]})}function bw(e){const t=bt(`radio: ${e.uniqueName}`)??e.options[0][0],[a,i]=O.useState(t),l={position:"relative",top:3,marginRight:"0.25em"},r=e.options.map(([d,E])=>c.jsxs("div",{style:l,children:[c.jsx("input",{type:"radio",id:d,name:e.uniqueName,value:d,checked:a===d,onChange:h=>{i(d),It(`radio: ${e.uniqueName}`,d),e.onChange(d)}}),c.jsxs("label",{htmlFor:d,style:{verticalAlign:"top"},children:[" ",E]})]},d));return c.jsx("div",{children:r})}function Cu(e){const[t,a]=O.useState(!1);return O.useEffect(()=>{let i=e.defaultChecked??!0;const l=bt("checked: "+e.uniqueName);l!==null&&(i=parseInt(l)>0),a(i),e.onChange(i)},[]),c.jsxs("div",{style:{marginBottom:5},children:[c.jsx("input",{className:"shellCheckbox",type:"checkbox",onChange:i=>{const l=i.currentTarget.checked;a(l),It("checked: "+e.uniqueName,l?"1":"0"),e.onChange(l)},checked:t}),c.jsx("span",{children:e.label})]})}function Yr(e){const[t,a]=O.useState(e.defaultShow??!1),i=e.autoIndent??!0,l=()=>{const d=!t;a(d),e.onExpand&&d&&e.onExpand(),e.onCollapse&&!d&&e.onCollapse(),It("exp: "+e.title,(d?1:0).toString())};O.useEffect(()=>{const d=bt("exp: "+e.title);d!==null&&a(parseInt(d)===1)},[]);const r=i?{margin:10,paddingLeft:6,marginBottom:20}:{};return c.jsxs("div",{style:e.noMargin?{}:{marginTop:10,marginBottom:10},children:[c.jsx(Ms,{content:c.jsxs("span",{children:[c.jsx("span",{children:t?"- ":"+ "}),e.titleNode??e.title]}),onClickFn:l}),c.jsx("div",{style:{position:"relative",display:t?"block":"none"},children:c.jsx("div",{style:r,children:e.content})})]})}function CE(e){const t=O.useRef(null);let a=e.defaultLoadUrl??"";const i=h=>{h.target&&(a=h.target.value)},l=()=>{const h=t.current;if(h&&h.files&&h.files.length>0){const A=h.files[0];Nw(A,R=>e.onLoadFn(R)),h.value=""}},r=()=>{const h=function(A){console.log("some error occurred")};jO(a,A=>{try{const R=JSON.parse(A);e.onLoadFn(R)}catch{h()}},A=>{h()})},d=Mt(),E={color:d.text,background:"transparent",outline:"none",border:"none",borderBottom:"1px solid "+d.text,width:"30em"};return c.jsxs("div",{children:[c.jsxs("div",{children:[c.jsx("span",{children:e.label??g({en:"Load from file: ",zh:""})}),c.jsx("input",{style:{width:"110px",color:"transparent"},type:"file",ref:t,onChange:l})]}),e.allowLoadFromUrl?c.jsxs("form",{children:[c.jsx("span",{children:g({en:"Load from URL: ",zh:"URL"})}),c.jsx("input",{defaultValue:a,style:E,onChange:i}),c.jsx("span",{children:" "}),c.jsx("button",{type:"submit",onClick:h=>{r(),h.preventDefault()},children:g({en:"load",zh:""})})]}):void 0]})}function yi(e){const t=Mt();return c.jsx("span",{style:{fontSize:11,border:"1px solid "+t.bgHighContrast,borderRadius:2,padding:"1px 4px",background:t.bgLowContrast},children:e.text})}const Dw=100;function We(e){const a={display:"inline-block",position:"relative",width:12,height:12,lineHeight:1,cursor:"help",background:Mt().bgHighContrast,borderRadius:6,textAlign:"center",verticalAlign:"middle"},i=O.useRef(0),[l,r]=O.useState(!1);return c.jsxs(oO,{delay:0,open:l,children:[c.jsx("span",{id:`help-${e.topic}`,className:"help-icon global-help-tooltip",style:a,"data-tooltip-offset":4,onMouseEnter:()=>{const d=Date.now();d-i.current>Dw&&r(!0),i.current=d},onMouseLeave:()=>r(!1),children:c.jsx("span",{style:{position:"relative",top:-1,color:"white"},children:"?"})}),c.jsx(uO,{container:e.container??document.getElementById("globalHelpTooltipAnchor"),children:c.jsx(hO,{className:"tooltip-positioner",anchor:document.getElementById(`help-${e.topic}`),children:c.jsx(EO,{className:"help-tooltip tooltip",children:e.content})})})]})}const OE="3f";let Bu=()=>{},$n=()=>({isValid:!1,invalidActions:[],skillUseTimes:[],straightenedIfValid:void 0}),Ou=e=>{e()};const KO=O.createContext(e=>({drop:t=>{},setSelected:t=>{}})),ps=e=>({borderColor:e.bgMediumContrast,borderWidth:"1px",borderStyle:"solid"}),Kr={width:"1.5%",textAlign:"right",paddingRight:"0.3em",paddingLeft:"0.3em"},fl={width:"12%",textAlign:"right",paddingRight:"0.3em",paddingLeft:"0.3em"},VO={width:"86.5%",textAlign:"left",paddingLeft:"0.3em"},WO={width:"100%",height:"1.6em",userSelect:"none",outline:"none"},XO=e=>({borderTopWidth:"4px",borderTopStyle:"solid",borderColor:e.dropTarget});function ZR(e){return(e??0)+1}function yw(e){const t=Mt();let a=e.index%2===1?t.timelineEditor.bgAlternateRow:"transparent";e.isSelected&&(a="rgba(151,111,246,0.25)"),e.recordIsDirty&&e.isSelected&&(a=t.editingValid+OE);let i=g({en:"(other)",zh:""});if(e.node.info.type===Ve.Skill){const T=e.node.info.targetCount>1?g({en:` (${e.node.info.targetCount} targets)`,zh:`${e.node.info.targetCount}`}):"";i=e.node.info.skillName?Ti(e.node.info.skillName)+T:g({en:"(unknown skill)",zh:""})}else if(e.node.info.type===Ve.Wait)i=g({en:"(wait for "+e.node.info.waitDuration.toFixed(3)+"s)",zh:""+e.node.info.waitDuration.toFixed(3)+""});else if(e.node.info.type===Ve.JumpToTimestamp)i=g({en:"(jump to time "+et.displayTime(e.node.info.targetTime,3)+")",zh:" "+et.displayTime(e.node.info.targetTime,3)+""});else if(e.node.info.type===Ve.WaitForMP)i=g({en:"(wait until MP/lucid tick)",zh:"/"});else if(e.node.info.type===Ve.SetResourceEnabled){const T=Xe(e.node.info.buffName);i=g({en:"(toggle resource: "+T+")",zh:"BUFF"+T+""})}else e.node.info.type===Ve.Unknown&&(i=e.node.info.skillName);const l=c.jsxs("td",{style:{...VO,...ps(t)},children:[e.isInvalid?c.jsx("span",{style:{marginRight:6,padding:"0 4px",backgroundColor:t.editingInvalid+OE},children:""}):void 0,c.jsx("span",{children:i})]}),r=e.includeDetails?c.jsx("td",{style:{...Kr,...ps(t)},children:ZR(e.index)}):void 0,d=e.includeDetails?c.jsx("td",{style:{...fl,...ps(t)},children:et.displayTime(e.usedAt,3)}):void 0,E=O.useContext(yf),h=E.dragTargetIndex===e.index,A=O.useContext(Ed),R=O.useContext(KO)(e.index);return c.jsxs("tr",{style:{...WO,background:a,...h?XO(t):{}},ref:e.refObj??null,draggable:!A.value,onDragStart:T=>{R.setSelected(!0),e.isSelected||N.timeline.onClickTimelineAction(e.index,!1)},onDragLeave:T=>{E.setDragTarget(null,null)},onDrop:T=>{R.drop(T),E.setDragTarget(null,null)},onDragOver:T=>{T.preventDefault();let S=e.usedAt;const I=e.index>0?N.record.actions[e.index-1]:void 0;(I==null?void 0:I.tmp_endLockTime)!==void 0&&e.node.info.type===Ve.Skill&&gl(N.game.job,e.node.info.skillName).cdName==="cd_GCD"&&(S=I.tmp_endLockTime-N.gameConfig.countdown),E.setDragTarget(e.index,S)},onClick:T=>{R.setSelected(!0),e.recordIsDirty?N.timeline.onClickTimelineAction(e.index,T.shiftKey):(N.timeline.onClickTimelineAction(e.index,T.shiftKey),e.node.tmp_startLockTime!==void 0&&N.scrollToTime(e.node.tmp_startLockTime))},tabIndex:-1,onKeyDown:e.onKeyDown,children:[r,d,l]})}let cS=()=>{},qO=()=>{};function vw(){const e=Mt(),t=O.useRef(null),a=O.useRef(null),[i,l]=O.useState(!1),[r,d]=O.useState(void 0),[E,h]=O.useState(void 0),[,A]=O.useReducer(D=>D+1,0),R=O.useRef(!1),T=O.useRef(void 0);O.useEffect(()=>(Bu=()=>{A()},$n=()=>{const D=N.checkRecordValidity(N.record,0,!0);return d(D),D},Ou=D=>{i&&T.current&&(N.record=T.current,N.checkRecordValidity(N.record,0,!0)),D(),l(!1),T.current=N.record,d(N.checkRecordValidity(N.record,0,!0))},cS=()=>{setTimeout(()=>{var D;(D=t.current)==null||D.scrollIntoView({behavior:"smooth",block:"nearest"})},0)},qO=()=>{setTimeout(()=>{var D;(D=(N.record.getSelectionLength()===1?t:a).current)==null||D.scrollIntoView({behavior:"smooth",block:"nearest"})},0)},d(N.checkRecordValidity(N.record,0,!0)),()=>{Bu=()=>{}}),[]);const S=r&&r.isValid,I=D=>{D&&T.current&&(N.record=T.current),l(!1),d(N.checkRecordValidity(N.record,0,!0)),h(void 0)},C=5,_=()=>c.jsx("button",{style:{display:"block",marginTop:10,marginLeft:C},onClick:D=>{R.current=!0,i||console.error("attempted to discard edits while timeline editor was not dirty"),I(!0)},children:g({en:"discard changes",zh:""})}),b=()=>(i||(T.current=N.record,N.record=N.record.getCloneWithSharedConfig(),l(!0)),N.record),y=(D,Y)=>{const z=D==null?void 0:D.node,B=D==null?void 0:D.index,ee=D==null?void 0:D.reason,he=ko()==="en",se=(ge,Ne)=>he?ge:Ne;let Ae=se("(unknown node)","");if(z)if(z.info.type===Ve.Wait)Ae=se("(Wait)","");else if(z.info.type===Ve.JumpToTimestamp)Ae=se("(Jump to time)","");else if(z.info.type===Ve.WaitForMP)Ae=se("(Wait for MP/lucid tick)","/");else if(z.info.type===Ve.SetResourceEnabled){const ge=Xe(z.info.buffName);Ae=se("(Toggle resource "+ge+")","BUFF "+ge+"")}else z.info.type===Ve.Skill?Ae=z.info.skillName?Ti(z.info.skillName):se("(unknown skill)",""):z.info.type===Ve.Unknown&&(Ae=z.info.skillName);let Re;const Oe=B!==void 0?r==null?void 0:r.skillUseTimes[B]:void 0,Pe=(ee==null?void 0:ee.unavailableReasons.map(_s).join(se("; ","")))??_s(void 0);if(Y?Re=se(`This sequence contains invalid actions! Check action #${ZR(B)}: ${Ae}`,`${ZR(B)} ${Ae}`):Re=se(`This action is invalid! ${Ae}`,` ${Ae}`),Oe!==void 0){const ge=et.displayTime(Oe,3);Re+=` @ ${ge}`+se(".","")}return{en:c.jsxs(c.Fragment,{children:[Re,c.jsx("br",{}),c.jsx("br",{}),"Reason: ",Pe]}),zh:c.jsxs(c.Fragment,{children:[Re,c.jsx("br",{}),c.jsx("br",{}),"",Pe]})}},U={padding:"0.3em"},L=()=>{if(i)return c.jsxs("div",{children:[c.jsx("div",{style:{...U,backgroundColor:(S?e.editingValid:e.editingInvalid)+OE},children:g(S?{en:"This edited sequence is valid.",zh:""}:y(r==null?void 0:r.invalidActions[0],!0))}),c.jsx("button",{style:{display:"block",marginTop:10,marginLeft:C},onClick:D=>{R.current=!0,i?N.applyEditedRecord():console.error("attempted to apply edits while timeline editor was not dirty"),I(!1),N.displayCurrentState()},children:g({en:"apply changes to timeline and save",zh:""})}),_()]});if(S)return c.jsx("div",{style:U,children:g({en:"Timeline is up to date.",zh:""})});{const D=new Map;r==null||r.invalidActions.forEach(he=>D.set(he.index,he));const Y=r==null?void 0:r.invalidActions[0];let z=Y,B=!0;const ee=N.record;if(Y!==void 0&&ee.selectionStartIndex!==void 0){const he=r==null?void 0:r.invalidActions.find(Ae=>ee.isInSelection(Ae.index)),se=ee.getSelectionLength();se===1&&he!==void 0?(z=D.get(ee.selectionStartIndex),B=!1):se>1&&he!==void 0&&(z=he)}return c.jsx("div",{children:c.jsx("div",{style:{...U,backgroundColor:e.editingInvalid+OE},children:g(y(z,B))})})}},M={display:"block",width:"100%",padding:3},G=D=>{if(N.record.getFirstSelection()){R.current=!0;const Y=b();let z=E;const B=D(Y);B!==void 0&&(z===void 0?z=B:z=Math.min(B,z));const ee=N.checkRecordValidity(Y,z);B!==void 0&&ee.straightenedIfValid?(N.record=ee.straightenedIfValid,h(void 0)):h(z),d(ee),Go()}},H=N.undoStack.peekUndoMessage(),P=N.undoStack.peekRedoMessage(),q=c.jsxs("div",{style:{marginBottom:6,flex:1,display:"flex",flexDirection:"column",gap:10},children:[c.jsx("button",{style:M,onClick:D=>G(Y=>(N.undoStack.push(new jh(Y.selectionStartIndex,Y.getSelectionLength(),-1)),Y.moveSelected(-1))),children:g({en:"move up",zh:""})}),c.jsx("button",{style:M,onClick:D=>G(Y=>(N.undoStack.push(new jh(Y.selectionStartIndex,Y.getSelectionLength(),1)),Y.moveSelected(1))),children:g({en:"move down",zh:""})}),c.jsx("button",{style:M,onClick:D=>G(Y=>(N.undoStack.push(new Pr(Y.selectionStartIndex,Y.getSelected().actions,"delete")),Y.deleteSelected())),children:g({en:"delete selected",zh:""})}),c.jsx("button",{style:M,onClick:D=>{const Y=N.record.getSelectionLength();Y>1&&G(z=>{const B=z.selectionStartIndex,ee=z.selectionEndIndex;return N.undoStack.push(new jh(ee,1,-(Y-1))),z.selectSingle(ee),z.moveSelected(-(Y-1)),z.selectSingle(B),z.selectUntil(ee),z.selectionStartIndex})},children:g({en:c.jsxs(c.Fragment,{children:["move end of selection",c.jsx("br",{}),"to start of selection"]}),zh:c.jsxs(c.Fragment,{children:["",c.jsx("br",{}),""]})})}),c.jsx("hr",{style:{backgroundColor:e.bgLowContrast,height:2,marginTop:-2,marginBottom:-2,border:0,width:"100%"}}),c.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:6},children:[c.jsx("button",{style:M,onClick:QR,disabled:N.record.getSelectionLength()===0,children:g({en:"copy ",zh:""})}),c.jsx("button",{style:M,onClick:tb,children:g({en:"paste ",zh:""})})]}),c.jsxs("button",{style:M,onClick:()=>N.undoStack.undo(),disabled:H===void 0,children:[g({en:"undo ",zh:""}),g(H??{en:""})]}),c.jsxs("button",{style:M,onClick:()=>N.undoStack.redo(),disabled:P===void 0,children:[g({en:"redo ",zh:""}),g(P??{en:""})]})]}),ne=D=>{const Y=N.record.selectionStartIndex;Y!==void 0&&(D.key==="Backspace"||D.key==="Delete"?G(B=>(N.undoStack.push(new Pr(Y,B.getSelected().actions,"delete")),B.deleteSelected())):(N.handleTimelineKeyboardEvent(D),D.key==="Escape"&&J.setDragTarget(null,null)))},Ee=!0,ue=[],de=new Set(r==null?void 0:r.invalidActions.map(D=>D.index));N.record.actions.forEach((D,Y)=>{const z=!i&&Y===N.record.selectionStartIndex,B=!i&&Y===N.record.selectionEndIndex;ue.push(c.jsx(yw,{index:Y,node:D,isSelected:N.record.isInSelection(Y),recordIsDirty:i,isInvalid:de.has(Y),usedAt:(r==null?void 0:r.skillUseTimes[Y])??0,includeDetails:Ee,onKeyDown:ne,refObj:z?t:B?a:void 0},Y))});const fe=D=>({drop:Y=>{const z=N.record.selectionStartIndex??0;let B=D-(z??0);B>0&&(B-=N.record.getSelectionLength()),B!==0&&G(ee=>ee.moveSelected(B))},setSelected:Y=>{R.current=Y}}),Q=O.useContext(Ed),J=O.useContext(yf),F=ue.length,w=fe(F),K=J.dragTargetIndex===F;F>0&&ue.push(c.jsxs("tr",{tabIndex:-1,style:{height:"0.8em",background:e.timelineEditor.headerFooter,userSelect:"none",...K?XO(e):{}},draggable:!Q.value,onDragStart:D=>D.preventDefault(),onDragLeave:D=>{J.setDragTarget(null,null)},onDrop:D=>{w.drop(D),J.setDragTarget(null,null)},onDragOver:D=>{D.preventDefault(),J.setDragTarget(F,N.game.getDisplayTime())},children:[c.jsx("td",{style:{border:"none"}}),c.jsx("td",{style:{border:"none"}}),c.jsx("td",{style:{border:"none"}})]},F));const W={backgroundColor:e.timelineEditor.headerFooter};return c.jsx("div",{onClick:D=>{!D.shiftKey&&!R.current&&(N.record.unselectAll(),N.displayCurrentState()),R.current=!1},children:c.jsx(rS,{contentHeight:zS,children:[{content:q,defaultSize:20},{content:c.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:Kr.paddingLeft},children:[c.jsxs("table",{style:{position:"relative",width:"100%",borderCollapse:"collapse",borderColor:e.bgMediumContrast,borderWidth:"1px",borderStyle:"solid"},children:[c.jsx("thead",{children:c.jsxs("tr",{style:WO,children:[c.jsx("th",{className:"stickyTh",style:{...W,...Kr,...ps(e)},children:"#"}),c.jsx("th",{className:"stickyTh",style:{...W,...fl,...ps(e)},children:g({en:"Time",zh:""})}),c.jsx("th",{className:"stickyTh",style:{...W,...VO,...ps(e)},children:g({en:"Actions",zh:""})})]})}),c.jsx("tbody",{children:c.jsx(KO.Provider,{value:fe,children:ue})})]}),F===0&&c.jsx("span",{style:{paddingLeft:Kr.paddingLeft,fontStyle:"italic"},children:g({en:"No actions to display yet.",zh:""})})]}),defaultSize:40,fullBorder:!0,showScrollbar:!0},{content:L(),defaultSize:40,fullBorder:!0}]})})}const Mw=30;class Lw{constructor(){Z(this,"actions");Z(this,"cursor");this.cursor=0,this.actions=[]}clear(){this.cursor=0,this.actions=[]}get length(){return this.actions.length}push(t){this.actions.splice(this.cursor,this.actions.length-this.cursor,t),this.actions.length>Mw&&this.actions.shift(),this.cursor=this.actions.length}doThenPush(t){t.redo(),this.push(t)}emitLog(...t){}undo(){this.cursor>0?(this.actions[--this.cursor].undo(),this.emitLog("UNDO",this.actions[this.cursor])):this.emitLog("nothing to undo")}redo(){this.cursor<this.actions.length?(this.emitLog("REDO",this.actions[this.cursor]),this.actions[this.cursor++].redo()):this.emitLog("nothing to redo")}peekUndoMessage(){return this.cursor>0?this.actions[this.cursor-1].message:void 0}peekRedoMessage(){return this.cursor<this.actions.length?this.actions[this.cursor].message:void 0}}class Pi{constructor(t){Z(this,"message");this.message=t}}function uS(e){return e>0?"actions":"action"}class ls extends Pi{constructor(a,i){super({en:"add action",zh:""});Z(this,"node");Z(this,"index");this.node=a,this.index=i}undo(){N.record.selectSingle(this.index),N.deleteSelectedSkills()}redo(){N.insertRecordNode(this.node,this.index)}}class jh extends Pi{constructor(a,i,l){super({en:`move ${i} ${uS(i)}`,zh:"${selectCount}"});Z(this,"startIndex");Z(this,"selectCount");Z(this,"offset");this.startIndex=a,this.selectCount=i,this.offset=l}undo(){N.record.selectSingle(this.startIndex+this.offset),N.record.selectUntil(this.startIndex+this.selectCount+this.offset-1),N.record.moveSelected(-this.offset),N.autoSave(),$n()}redo(){N.record.selectSingle(this.startIndex),N.record.selectUntil(this.startIndex+this.selectCount-1),N.record.moveSelected(this.offset),N.autoSave(),$n()}}class Pr extends Pi{constructor(a,i,l){super({en:`${l} ${i.length} ${uS(i.length)}`,zh:`${l==="delete"?"":""}${i.length}`});Z(this,"startIndex");Z(this,"nodes");Z(this,"source");this.startIndex=a,this.nodes=i,this.source=l}undo(){N.insertRecordNodes(this.nodes,this.startIndex)}redo(){N.record.selectSingle(this.startIndex),N.record.selectUntil(this.startIndex+this.nodes.length-1),N.deleteSelectedSkills(),$n()}}class dS extends Pi{constructor(a,i,l){super({en:l==="preset"?"add preset sequence":`paste ${a.length} ${uS(a.length)}`,zh:l==="preset"?"":`${a.length}`});Z(this,"nodes");Z(this,"index");Z(this,"source");this.nodes=a,this.index=i,this.source=l}undo(){N.record.selectSingle(this.index),N.record.selectUntil(this.index+this.nodes.length-1),N.deleteSelectedSkills()}redo(){N.insertRecordNodes(this.nodes,this.index)}}class Hw extends Pi{constructor(a,i,l,r){super({en:"import from fflogs",zh:"fflogs"});Z(this,"nodes");Z(this,"index");Z(this,"oldConfig");Z(this,"newConfig");this.nodes=a,this.index=i,this.oldConfig=l,this.newConfig=r}undo(){N.record.selectSingle(this.index),N.record.selectUntil(this.index+this.nodes.length-1),N.deleteSelectedSkills(),N.setConfigAndRestart(this.oldConfig,!1),N.updateAllDisplay(),N.scrollToTime()}redo(){N.insertRecordNodes(this.nodes,this.index),N.setConfigAndRestart(this.newConfig,!1),N.updateAllDisplay(),N.scrollToTime()}}class Uw extends Pi{constructor(a,i){super({en:"change active slot",zh:""});Z(this,"oldIndex");Z(this,"newIndex");this.oldIndex=a,this.newIndex=i}undo(){N.setActiveSlot(this.oldIndex),N.displayCurrentState()}redo(){N.setActiveSlot(this.newIndex),N.displayCurrentState()}}class xw extends Pi{constructor(a,i){super({en:"delete slot",zh:""});Z(this,"deleteIndex");Z(this,"deletedRecord");this.deleteIndex=a,this.deletedRecord=i}undo(){N.timeline.addSlotAtIndex(this.deleteIndex),N.loadBattleRecordFromFile(this.deletedRecord),N.autoSave(),N.displayCurrentState()}redo(){N.timeline.removeSlot(this.deleteIndex),N.displayCurrentState()}}class kw extends Pi{constructor(a){super({en:"add slot",zh:""});Z(this,"oldIndex");this.oldIndex=a}undo(){N.timeline.removeSlot(N.timeline.slots.length-1),N.setActiveSlot(this.oldIndex),N.displayCurrentState()}redo(){N.setActiveSlot(this.oldIndex),N.timeline.addSlot(),N.displayCurrentState()}}class Pw extends Pi{constructor(a){super({en:"clone slot",zh:""});Z(this,"sourceIndex");this.sourceIndex=a}undo(){N.timeline.removeSlot(N.timeline.slots.length-1),N.setActiveSlot(this.sourceIndex),N.displayCurrentState()}redo(){N.setActiveSlot(this.sourceIndex),N.cloneActiveSlot(),N.displayCurrentState()}}class ww extends Pi{constructor(a,i,l){super({en:"change config",zh:""});Z(this,"oldConfig");Z(this,"newConfig");Z(this,"oldRecord");this.oldConfig=a,this.newConfig=i,l===void 0&&(a.job!==i.job||a.level!==i.level)&&console.error("config apply w/o reset but job or level changed"),this.oldRecord=l}undo(){this.oldRecord!==void 0?(N.loadBattleRecordFromFile(this.oldRecord),N.autoSave()):N.setConfigAndRestart(this.oldConfig,!1),N.updateAllDisplay(),N.scrollToTime()}redo(){N.setConfigAndRestart(this.newConfig,this.oldRecord!==void 0),N.updateAllDisplay(),N.scrollToTime()}}class Gw extends Pi{constructor(a,i){super({en:"import from file",zh:""});Z(this,"oldRecord");Z(this,"importedRecord");this.oldRecord=a,this.importedRecord=i}undo(){N.loadBattleRecordFromFile(this.oldRecord),N.autoSave(),N.displayCurrentState()}redo(){N.loadBattleRecordFromFile(this.importedRecord),N.autoSave(),N.displayCurrentState()}}let ZO,QO=[];const $O="",JO=", ",mR=":";function Bw(e){const t=N.record.getSelected().actions,a=N.record.selectionStartIndex;if(a===void 0)return"";let i="";if(e==="plain"){const l=[];t.forEach(d=>l.push(d.toLocalizedString()));const r=ko()==="zh"?$O:JO;i=l.join(r)}else if(e==="tsv"){const l=[],r=N.checkRecordValidity(N.record,0);t.forEach((d,E)=>l.push([r.skillUseTimes[E+a].toFixed(3),d.targetCount,d.toLocalizedString()].join("	"))),i=l.join(`
`)}else if(e==="discord"){const l=[];t.forEach(r=>{if(r.info.type===Ve.Skill){const d=r.info.skillName;d==="TINCTURE"?l.push(":IntPot:"):d==="SWIFTCAST"?l.push(N.gameConfig.job==="BLM"?":Swift:":":Swiftcast:"):l.push(`:${In[d].discordEmote??In[d].name.replaceAll(" ","")}:`)}else l.push(r.toLocalizedString())}),i=l.join(" ")}else console.error("invalid clipboard mode",e);return ZO=i,QO=t,i}function Fw(e){return e==="."||e>="0"&&e<="9"}function eb(e,t){const a=e.toLowerCase(),i=t==null?void 0:t.toLowerCase();if(a==="wait mp"||e===""||a==="wait"&&i===" mp"||e===""&&(t==null?void 0:t.substring(3,5))==="")return p0();const l=e.split(" ");if(!(t!==void 0&&Fw(t[0]))){if(l.length===2&&l[0]==="wait"){const r=Mo(l[1]);return isNaN(r)?void 0:Fr(r)}if(e.startsWith("")){const r=Mo(e.substring(3));return isNaN(r)?void 0:Fr(r)}if(l.length===2&&l[0]==="jump"){const r=Mo(l[1]);return isNaN(r)?void 0:_l(r)}if(e.startsWith("")){const r=Mo(e.substring(2));return isNaN(r)?void 0:_l(r)}if(l.length>=2&&l[0]==="toggle"){const r=$N(l.slice(1).join(" "));return r!==void 0?UR(r):void 0}if(e.startsWith("")){const r=$N(e.substring(2));return r!==void 0?UR(r):void 0}}}function Vp(e,t=1){const a=eb(e,void 0);if(a!==void 0)return a;const i=YT(e)??I0.get(e)??_0.get(e);return i!==void 0?gs(i,t):void 0}function zw(e){if(e===ZO)return QO;const t=e.split(`
`),a=[];for(const i of t){const l=i.trimStart();if(i.includes("	")){const r=i.split("	");if(r.length>0){const d=r[r.length-1].trim();let E=1;if(r.length>1){const A=parseInt(r[r.length-2]);isNaN(A)||(E=A)}const h=Vp(d,E);h!==void 0&&a.push(h)}}else if(l.length>2&&l[0]===mR){let r=!0,d="";for(let E=1;E<l.length;E++){const h=l[E];if(r&&(h===mR||h===" ")){const R=d.indexOf("~");if(R>0&&(d=d.substring(0,R)),d.toLowerCase().endsWith("_ogcd")&&(d=d.substring(0,d.length-5)),d.length!==0)if(d==="IntPot")a.push(gs("TINCTURE",1));else if(d==="Swift"||d==="Swiftcast")a.push(gs("SWIFTCAST",1));else{const T=jT.get(N.gameConfig.job).get(d);T!==void 0?a.push(gs(T)):console.error("unrecognized discord emote",d)}d="",r=!1;continue}if(h===mR&&d.length===0){r=!0,d="";continue}(d.length>0||h!==" ")&&(d+=h);const A=l.substring(E+1,E+4);if(!r){const R=eb(d,A);R!==void 0&&(a.push(R),d="")}}}else{let r=l.split(JO);r.length<2&&(r=l.split($O)),r.forEach(d=>{if(d.length>0){const E=Vp(d.trim());E!==void 0&&a.push(E)}})}}return a}function QR(){navigator.clipboard.writeText(Bw(N.clipboardMode))}function tb(){N.queuedPastes++,navigator.clipboard.readText().then(e=>{if(e.startsWith("https://")||e.startsWith("www.")||e.startsWith("cn."))return;const t=zw(e);if(t===void 0||t.length===0){console.error("failed to paste parsed clipboard contents:"),console.error(e);return}N.undoStack.doThenPush(new dS(t,N.record.selectionStartIndex??N.record.length,"paste"))}).finally(()=>{N.queuedPastes--,console.assert(N.queuedPastes>=0)})}const nb=152,Hh=5882,Zn=5925,RR={main:Zn,spellSpeed:420,skillSpeed:420,criticalHit:3387,directHit:1935,determination:2407,piety:440,tenacity:420},bE={DRK:{main:Hh,spellSpeed:420,skillSpeed:420,criticalHit:3404,directHit:1068,determination:2883,piety:440,tenacity:794},GNB:{main:Hh,spellSpeed:420,skillSpeed:420,criticalHit:3404,directHit:1068,determination:2883,piety:440,tenacity:794},PLD:{main:Hh,spellSpeed:420,skillSpeed:420,criticalHit:3242,directHit:1230,determination:2883,piety:440,tenacity:794},WAR:{main:Hh,spellSpeed:420,skillSpeed:420,criticalHit:3404,directHit:1068,determination:2883,piety:440,tenacity:794},AST:{main:Zn,spellSpeed:704,skillSpeed:420,criticalHit:3427,directHit:1230,determination:2510,piety:718,tenacity:420},SCH:{main:Zn,spellSpeed:1221,skillSpeed:420,criticalHit:3484,directHit:852,determination:2314,piety:718,tenacity:420},SGE:{main:Zn,spellSpeed:704,skillSpeed:420,criticalHit:3427,directHit:1230,determination:2510,piety:718,tenacity:420},WHM:{main:Zn,spellSpeed:704,skillSpeed:420,criticalHit:3427,directHit:1230,determination:2510,piety:718,tenacity:420},DRG:{main:Zn,spellSpeed:420,skillSpeed:420,criticalHit:3425,directHit:1996,determination:2308,piety:440,tenacity:420},MNK:{main:Zn,spellSpeed:420,skillSpeed:968,criticalHit:3487,directHit:1685,determination:2009,piety:440,tenacity:420},NIN:{main:Zn,spellSpeed:420,skillSpeed:420,criticalHit:3378,directHit:1981,determination:2370,piety:440,tenacity:420},RPR:{main:Zn,spellSpeed:420,skillSpeed:474,criticalHit:3425,directHit:1942,determination:2308,piety:440,tenacity:420},SAM:{main:Zn,spellSpeed:420,skillSpeed:690,criticalHit:3425,directHit:2045,determination:1989,piety:440,tenacity:420},VPR:{main:Zn,spellSpeed:420,skillSpeed:420,criticalHit:3378,directHit:1981,determination:2370,piety:440,tenacity:420},DNC:RR,BRD:RR,MCH:RR,BLM:{main:Zn,spellSpeed:978,skillSpeed:420,criticalHit:3456,directHit:1764,determination:1951,piety:440,tenacity:420},RDM:{main:Zn,spellSpeed:528,skillSpeed:420,criticalHit:3399,directHit:1872,determination:2350,piety:440,tenacity:420},SMN:{main:Zn,spellSpeed:528,skillSpeed:420,criticalHit:3399,directHit:1872,determination:2350,piety:440,tenacity:420},PCT:{main:Zn,spellSpeed:420,skillSpeed:420,criticalHit:3399,directHit:1764,determination:2566,piety:440,tenacity:420},BLU:{main:1701,spellSpeed:1573,skillSpeed:380,criticalHit:1343,directHit:785,determination:676,piety:340,tenacity:380},NEVER:{main:Zn,spellSpeed:420,skillSpeed:420,criticalHit:420,directHit:420,determination:440,piety:440,tenacity:420}};function $R(e,t=nt.lvl100){return{job:e,shellVersion:TT.version,level:t??(e==="BLU"?nt.lvl80:nt.lvl100),...bE[e],wd:nb,countdown:5,randomSeed:"sup",fps:60,gcdSkillCorrection:0,animationLock:.7,timeTillFirstManaTick:1.2,procMode:fa.Never,initialResourceOverrides:[]}}function jw(e){const t=bt(`defaultPartialConfig: ${e}`);if(t===null)return bE[e];const a=JSON.parse(t);return Object.entries(bE[e]).forEach(([i,l])=>{a[i]===void 0&&(a[i]=l)}),a}const Yh=$R("BLM");class Ei{constructor(t){Z(this,"job");Z(this,"shellVersion",TT.version);Z(this,"level");Z(this,"wd");Z(this,"main");Z(this,"spellSpeed");Z(this,"skillSpeed");Z(this,"criticalHit");Z(this,"directHit");Z(this,"determination");Z(this,"piety");Z(this,"tenacity");Z(this,"countdown");Z(this,"randomSeed");Z(this,"fps");Z(this,"gcdSkillCorrection");Z(this,"animationLock");Z(this,"timeTillFirstManaTick");Z(this,"procMode");Z(this,"initialResourceOverrides");Z(this,"legacy_casterTax");this.job=t.job,this.shellVersion=t.shellVersion;const a=Yh;this.level=t.level??a.level,this.spellSpeed=t.spellSpeed,this.skillSpeed=t.skillSpeed??a.skillSpeed,this.criticalHit=t.criticalHit??a.criticalHit,this.directHit=t.directHit??a.directHit,this.determination=t.determination??a.determination,this.piety=t.piety??a.piety,this.countdown=t.countdown,this.randomSeed=t.randomSeed,this.fps=t.fps,this.gcdSkillCorrection=t.gcdSkillCorrection,this.animationLock=t.animationLock,this.timeTillFirstManaTick=t.timeTillFirstManaTick,this.procMode=t.procMode,this.initialResourceOverrides=t.initialResourceOverrides.map(i=>{if(i.effectOrTimerEnabled===void 0&&(i.enabled===void 0?i.effectOrTimerEnabled=!0:i.effectOrTimerEnabled=i.enabled),!(i.type in ze||i.type in Is))if(i.type.toString()==="AstralFire")i.type="ASTRAL_FIRE";else if(i.type.toString()==="UmbralIce")i.type="UMBRAL_ICE";else if(i.type.toString()==="UmbralHeart")i.type="UMBRAL_HEART";else{let l=Object.keys(ze).find(r=>ze[r].name===i.type);l||(l=Object.keys(Is).find(r=>Is[r].name===i.type)),l&&(i.type=l)}return new zT(i)}),this.legacy_casterTax=(t==null?void 0:t.casterTax)??0,this.tenacity=(t==null?void 0:t.tenacity)??420,this.main=(t==null?void 0:t.main)??Zn,this.wd=(t==null?void 0:t.wd)??nb}adjustedOvertimePotency(t,a){return Ot.overtimePotency(this.level,a==="sks"?this.skillSpeed:a==="sps"?this.spellSpeed:Ot.getSubstatBase(this.level),t)}adjustedGCD(t=2.5,a){return this.shellVersion>=vo.AllaganGcdFormula?Ot.preTaxGcd(this.level,this.spellSpeed,t,a):Ot.preTaxGcdLegacy(this.level,this.spellSpeed,t,a)}adjustedSksGCD(t=2.5,a){return this.shellVersion>=vo.AllaganGcdFormula?Ot.preTaxGcd(this.level,this.skillSpeed,t,a):Ot.preTaxGcdLegacy(this.level,this.skillSpeed,t,a)}adjustedCastTime(t,a){return Ot.preTaxCastTime(this.level,this.spellSpeed,t,a)}adjustedSksCastTime(t,a){return Ot.preTaxCastTime(this.level,this.skillSpeed,t,a)}getAfterTaxGCD(t){return this.shellVersion<vo.FpsTax?t:Ot.afterFpsTax(this.fps,t)+this.gcdSkillCorrection}getAfterTaxCastTime(t){return this.shellVersion<vo.FpsTax?this.legacy_casterTax+t:Ot.afterFpsTax(this.fps,t)+Ot.afterFpsTax(this.fps,CU)+this.gcdSkillCorrection}static getSlidecastWindow(t){return .5}get critRate(){return Ot.criticalHitRate(this.level,this.criticalHit)}getOverrideStacks(t){var a;return(a=this.initialResourceOverrides.find(i=>i.type===t))==null?void 0:a.stacks}savePartialConfig(){const t={};Object.keys(bE[this.job]).forEach(a=>{t[a]=this[a]}),It(`defaultPartialConfig: ${this.job}`,JSON.stringify(t))}serialized(){return{job:this.job,shellVersion:this.shellVersion,level:this.level,wd:this.wd,main:this.main,spellSpeed:this.spellSpeed,skillSpeed:this.skillSpeed,criticalHit:this.criticalHit,directHit:this.directHit,determination:this.determination,piety:this.piety,tenacity:this.tenacity,countdown:this.countdown,randomSeed:this.randomSeed,casterTax:this.legacy_casterTax,fps:this.fps,gcdSkillCorrection:this.gcdSkillCorrection,animationLock:this.animationLock,timeTillFirstManaTick:this.timeTillFirstManaTick,procMode:this.procMode,initialResourceOverrides:this.initialResourceOverrides.map(t=>t.serialized())}}}function Yw(e){var a,i;const t=Mt();return c.jsx("div",{style:{top:1+(((a=e.offset)==null?void 0:a.y)??0),left:((i=e.offset)==null?void 0:i.x)??0,marginRight:8,position:"relative",width:16,height:16,borderRadius:8,display:"inline-block",border:"1px solid "+t.bgHighContrast,verticalAlign:"top"},children:e.color&&c.jsx("div",{style:{backgroundColor:`${e.color}`,position:"absolute",top:2,bottom:2,left:2,right:2,borderRadius:"inherit"}})})}function Kw(e){var r,d;const t=Mt(),a=e.heightPx??30,i=e.widthPx??24;let l;return e.imgUrl?l=c.jsx("img",{src:e.imgUrl,alt:"resource img",style:{display:"block",margin:"2px auto",maxWidth:a-4,maxHeight:i-4}}):e.color&&(l=c.jsx("div",{style:{backgroundColor:e.color,position:"absolute",top:3,bottom:3,left:3,right:3}})),c.jsx("div",{style:{display:"inline-block",position:"relative",top:((r=e.offset)==null?void 0:r.y)??0,left:((d=e.offset)==null?void 0:d.x)??0,width:a,height:i,border:"1px solid "+t.bgHighContrast,marginRight:4},children:l})}function Kh(e={name:"placeholder",color:"#6cf",value:"0.34/1.00",progress:.34,width:100,hidden:!1}){return c.jsxs("div",{hidden:e.hidden,style:{marginBottom:4,lineHeight:"1.5em"},children:[c.jsx("div",{style:{display:"inline-block",height:"100%",width:108},children:e.name}),c.jsxs("div",{style:{width:200,display:"inline-block"},children:[c.jsx(Cw,{backgroundColor:e.color,progress:e.progress,width:e.width,offsetY:4}),c.jsx("div",{style:{marginLeft:6,height:"100%",display:"inline-block"},children:e.value})]})]})}function Xi(e){const t=e.containerType==="box"||e.items.some(i=>i.imgUrl!==void 0),a=e.items.map((i,l)=>e.containerType==="circle"&&i.imgUrl===void 0?c.jsx(Yw,{color:i.color,offset:t?{x:0,y:3}:void 0},l):c.jsx(Kw,{color:i.color,imgUrl:i.imgUrl,offset:t?{x:-2,y:0}:void 0,heightPx:i.boxHeightPx,widthPx:i.boxWidthPx},l));return t?c.jsxs("div",{style:{marginBottom:4},children:[c.jsx("div",{style:{display:"inline-block",position:"relative",verticalAlign:"top",top:6,width:108},children:e.name}),c.jsx("div",{style:{display:"inline-block"},children:a}),e.label?c.jsx("div",{style:{marginLeft:6,display:"inline-block",position:"relative",verticalAlign:"top",top:6},children:e.label}):void 0]}):c.jsxs("div",{style:{marginBottom:4,lineHeight:"1.5em"},children:[c.jsx("div",{style:{display:"inline-block",height:"100%",width:108},children:e.name}),c.jsxs("div",{style:{width:200,display:"inline-block"},children:[c.jsx("div",{style:{display:"inline-block"},children:a}),e.label?c.jsx("div",{style:{marginLeft:6,height:"100%",display:"inline-block"},children:e.label}):void 0]})]})}function Wp(e){return c.jsxs("div",{className:e.className,style:{marginBottom:4,lineHeight:"1.5em"},children:[c.jsx("div",{style:{display:"inline-block",height:"100%",width:108},children:e.name}),c.jsx("div",{style:{width:200,display:"inline-block"},children:c.jsx("div",{style:{display:"inline-block",marginLeft:6,color:e.color},children:e.text})})]})}const Ls=new Map;function Ft(e,t){Ls.set(e,`Buffs/${t}`);const a=ze[e].maximumStacks??1;for(let i=2;i<=a;i++)Ls.set(e+i,`Buffs/${t.replace(ze[e].name,ze[e].name+i)}`)}Object.keys(t0).forEach(e=>{const t=ze[e].name;Ls.set(e,`Buffs/Role/${t}.png`)});Object.keys(e0).forEach(e=>Ls.set(e,"Buffs/Role/Tank Limit Break.png"));Ls.set("SPRINT","Buffs/General/Sprint.png");Ls.set("TINCTURE","Buffs/General/Tincture.png");function Vw(e){let t=e.rscType;e.stacks>1&&(t+=e.stacks);let a;e.rscType==="AUTOS_ENGAGED"||e.rscType==="REAR_POSITIONAL"||e.rscType==="FLANK_POSITIONAL"?a={height:40}:a={height:40};const i=ze[e.rscType].mayNotBeCanceled,l={display:"inline-block",verticalAlign:"top",filter:e.enabled?"none":"grayScale(100%)"},r=c.jsx("img",{style:a,src:"assets/"+Ls.get(t),alt:e.rscType});return c.jsxs("div",{title:Xe(e.rscType),className:e.className+" buff "+e.rscType,children:[i?c.jsx("div",{style:l,children:r}):c.jsx(Ms,{content:r,style:l,onClickFn:()=>{e.onSelf&&(N.requestToggleBuff(e.rscType,!0),N.updateStatusDisplay(N.game),N.updateSkillButtons(N.game),N.autoSave(),$n())}}),c.jsx("span",{className:"buff-label",style:{visibility:e.timeRemaining===void 0?"hidden":void 0},children:e.timeRemaining??"0.000"})]})}function DE(e){const t=e.data,a=[];for(let l=0;l<t.length;l++)a.push(c.jsx(Vw,{...t[l]},l));let i={height:54,textAlign:"right",lineHeight:"1em"};return e.style&&(i={...i,...e.style}),c.jsx("div",{style:i,children:a})}function ab(e){const t=Mt(),a=e.data,i=c.jsx(Kh,{name:"GCD",color:t.resources.gcdBar,progress:a.gcdReady?0:1-a.timeTillGCDReady/a.gcd,value:a.timeTillGCDReady.toFixed(3),width:100,hidden:a.gcdReady}),l=c.jsx(Kh,{name:"casting/taxed",color:a.canMove?t.resources.gcdBar:t.resources.lockBar,progress:a.castLocked?1-a.castLockCountdown/a.castLockTotalDuration:0,value:a.castLockCountdown.toFixed(3),width:100,hidden:!a.castLocked}),r=c.jsx(Kh,{name:"using skill",color:t.resources.lockBar,progress:a.animLocked?1-a.animLockCountdown/a.animLockTotalDuration:0,value:a.animLockCountdown.toFixed(3),width:100,hidden:!a.animLocked});return c.jsxs("div",{style:{position:"absolute"},children:[i,l,r]})}function ib(e){const t=e.data.resources.map((i,l)=>{switch(i.kind){case"bar":return c.jsx(Kh,{name:i.name,color:i.color,progress:i.progress,value:i.valueString,width:i.widthPx??100,hidden:i.hidden??!1},"resourceDisplay"+l);case"counter":{const r=[];for(let d=0;d<i.maxStacks;d++)r.push({color:d<i.currentStacks?i.color:void 0});return c.jsx(Xi,{containerType:"circle",name:i.name,label:i.valueString??`${i.currentStacks}/${i.maxStacks}`,items:r},"resourceDisplay"+l)}case"paint":{const r=[];for(let E=0;E<i.maxStacks;E++){const h=i.hasComet&&E===i.currentStacks-1?i.cometColor:i.holyColor;r.push({color:E<i.currentStacks?h:void 0,imgUrl:void 0})}const d=`${i.currentStacks}/${i.maxStacks}`;return c.jsx(Xi,{containerType:"circle",name:i.name,label:d,items:r},"resourceDisplay"+l)}case"dance":{const r=i.currentStacks,d=[i.emboiteColor,i.entrechatColor,i.jeteColor,i.pirouetteColor],E=[];for(let A=0;A<i.maxStacks;A++)E.push({color:A<r?d[A]:void 0});const h=`${r}/${i.maxStacks}`;return c.jsx(Xi,{containerType:"circle",name:i.name,label:h,items:E},"resourceDisplay"+l)}case"sen":{const r=[{present:i.hasSetsu,color:i.setsuColor,name:"setsu"},{present:i.hasGetsu,color:i.getsuColor,name:"getsu"},{present:i.hasKa,color:i.kaColor,name:"ka"}],d=c.jsx(We,{topic:"senExplanation",content:g({en:"from left to right: setsu (yukikaze), getsu (gekko/mangetsu), ka (kasha/oka)",zh:"//"})});return c.jsx(Xi,{name:c.jsxs(c.Fragment,{children:[i.name," ",d]}),label:r.filter(E=>E.present).map(E=>E.name).join("+"),containerType:"circle",items:r.map(E=>({color:E.present?E.color:void 0}))},"resourceDisplay"+l)}case"coda":{const r=[{present:i.hasWanderers,color:i.wanderersColor},{present:i.hasMages,color:i.magesColor},{present:i.hasArmys,color:i.armysColor}],d=c.jsx(We,{topic:"codaExplanation",content:g({en:"from left to right: wanderer's coda, mage's coda, army's coda"})});return c.jsx(Xi,{name:c.jsxs(c.Fragment,{children:[i.name," ",d]}),containerType:"circle",items:r.map(E=>({color:E.present?E.color:void 0}))},"resourceDisplay"+l)}case"attunement":{const r=[{gem:i.ruby,color:i.rubyColor},{gem:i.topaz,color:i.topazColor},{gem:i.emerald,color:i.emeraldColor}];return c.jsxs("div",{children:[c.jsx(Xi,{name:i.aetherName,containerType:"circle",items:r.map(d=>({color:d.gem?d.color:void 0}))}),c.jsx(Wp,{name:i.attunementName,text:i.attunementCount.toString()+(i.attunementCount>0?` | ${i.timeRemaining.toFixed(3)}`:"")})]},"resourceDisplay"+l)}case"nadi":return c.jsx("div",{children:c.jsx(Xi,{name:i.name,label:i.label,containerType:"circle",items:[{color:i.lunar?i.lunarColor:void 0},{color:i.solar?i.solarColor:void 0}]})},"resourceDisplay"+l);case"beast":{const r=new Array(3).map(d=>({color:void 0}));return i.chakras.map((d,E)=>{r[E]={color:d==="opo"?i.opoColor:d==="raptor"?i.raptorColor:d==="coeurl"?i.coeurlColor:void 0}}),c.jsx("div",{children:c.jsx(Xi,{name:i.name,label:i.label,containerType:"circle",items:r})},"resourceDisplay"+l)}case"chakra":{const r=i.value>i.wrapCount,d=r?i.value%i.wrapCount:i.value,E=new Array(i.wrapCount);for(let h=0;h<i.wrapCount;h++)E[h]={color:r?h+1>d?i.regularColor:i.overflowColor:h+1>d?void 0:i.regularColor};return c.jsx("div",{children:c.jsx(Xi,{name:i.name,label:i.label,containerType:"circle",items:E})},"resourceDisplay"+l)}case"arcana":{const r=i.activeSlots.map((d,E)=>{const h=E===i.activeSlots.length-1?18:20,A=E===i.activeSlots.length-1?16:20;return{color:d?i.currentArcanaColor:void 0,boxHeightPx:h,boxWidthPx:A}});return c.jsx("div",{children:c.jsx(Xi,{name:i.name,containerType:"box",items:r})},"resourceDisplay"+l)}default:return c.jsx(Wp,{name:i.name,text:i.text,color:i.color},"resourceDisplay"+l)}});let a={textAlign:"left",minHeight:"13.5em"};return e.style&&(a={...a,...e.style}),c.jsx("div",{style:a,children:t})}let ob=(e,t)=>{};class lb extends ra.Component{constructor(a){super(a);Z(this,"state");this.state={time:0,resources:[],enemyBuffs:[],selfBuffs:[],level:100,layoutFn:i=>c.jsx("div",{})},ob=(i,l)=>{const r=i(Ui(this.context));this.setState({layoutFn:l,...r})}}componentDidMount(){N.updateStatusDisplay(N.game)}render(){return c.jsxs("div",{style:{position:"relative",textAlign:"left",margin:"8px 0"},children:[c.jsx("div",{style:{position:"absolute",top:-8,right:0,zIndex:1},children:c.jsx(We,{topic:"mainControlRegion",content:c.jsx("div",{className:"toolTip",children:g({en:c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"paragraph",children:[c.jsx("span",{style:{color:"lightgray"},children:"grey"})," border: not focused"]}),c.jsxs("div",{className:"paragraph",children:[c.jsx("b",{style:{color:"mediumpurple"},children:"purple"})," border: up-to-date, receiving input"]}),c.jsxs("div",{className:"paragraph",children:[c.jsx("b",{style:{color:"mediumseagreen"},children:"green"})," border: real-time"]}),c.jsxs("div",{className:"paragraph",children:[c.jsx("b",{style:{color:"darkorange"},children:"orange"})," border: viewing historical state, receiving input"]})]}),zh:c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"paragraph",children:[c.jsx("span",{style:{color:"lightgray"},children:""}),""]}),c.jsxs("div",{className:"paragraph",children:[c.jsx("b",{style:{color:"mediumpurple"},children:""}),""]}),c.jsxs("div",{className:"paragraph",children:[c.jsx("b",{style:{color:"mediumseagreen"},children:""}),""]}),c.jsxs("div",{className:"paragraph",children:[c.jsx("b",{style:{color:"darkorange"},children:""}),""]})]}),ja:c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"paragraph",children:[c.jsx("span",{style:{color:"lightgray"},children:""})," : "]}),c.jsxs("div",{className:"paragraph",children:[c.jsx("b",{style:{color:"mediumpurple"},children:""})," : "]}),c.jsxs("div",{className:"paragraph",children:[c.jsx("b",{style:{color:"mediumseagreen"},children:""})," : "]}),c.jsxs("div",{className:"paragraph",children:[c.jsx("b",{style:{color:"darkorange"},children:""})," : "]})]})})})})}),this.state.layoutFn(this.state)]})}}Z(lb,"contextType",Nn);class Xt{constructor(t){Z(this,"state");this.state=t}makeCommonTimer(t,a=!0){const i=this.state.resources.timeTillReady(t),l=this.state.resources.get(t);return{rscType:t,onSelf:a,enabled:l.enabled,stacks:l.availableAmount(),timeRemaining:i.toFixed(3),className:l.availableAmountIncludingDisabled()>0?"":"hidden"}}makeToggleableTimer(t,a=!0){const i=this.state.resources.timeTillReady(t),l=this.state.resources.get(t);return{rscType:t,onSelf:a,enabled:l.enabled,stacks:l.availableAmount(),timeRemaining:i.toFixed(3),className:l.availableAmountIncludingDisabled()>0?"":"hidden"}}makeCommonTimerless(t,a=!0){return{rscType:t,onSelf:a,enabled:!0,stacks:this.state.resources.get(t).availableAmount(),className:this.state.hasResourceAvailable(t)?"":"hidden"}}makeToggleableTimerless(t,a=!0){const i=this.state.resources.get(t);return{rscType:t,onSelf:a,enabled:i.enabled,stacks:i.availableAmount(),className:i.availableAmountIncludingDisabled()>0?"":"hidden"}}jobSpecificOtherTargetedBuffViewProps(){return[]}getAllOtherTargetedBuffViewProps(){const t=this.state.job,a=[];return Et[t].role==="TANK"&&a.push(this.makeCommonTimer("REPRISAL",!1)),Et[t].role==="MELEE"&&a.push(this.makeCommonTimer("FEINT",!1)),Et[t].role==="CASTER"&&a.push(this.makeCommonTimer("ADDLE",!1)),[...this.jobSpecificOtherTargetedBuffViewProps(),...a]}jobSpecificSelfTargetedBuffViewProps(){return[]}getAllSelfTargetedBuffViewProps(){const t=this.state.job,a=this.state.resources,i=[];if(Et[t].role==="TANK"){i.push(...["RAMPART","SHIELD_WALL","STRONGHOLD"].map(r=>this.makeCommonTimer(r)));const l=Et[t].limitBreakBuff??"UNKNOWN";l&&i.push(this.makeCommonTimer(l))}return Et[t].role==="MELEE"&&i.push(...["TRUE_NORTH","BLOODBATH"].map(l=>this.makeCommonTimer(l))),["TANK","MELEE","RANGED"].includes(Et[t].role)&&i.push(this.makeCommonTimer("ARMS_LENGTH")),["HEALER","CASTER"].includes(Et[t].role)&&i.push(...["SWIFTCAST","LUCID_DREAMING","SURECAST"].map(l=>this.makeCommonTimer(l))),i.push(this.makeCommonTimer("TINCTURE"),this.makeCommonTimer("SPRINT")),Et[t].role==="MELEE"&&i.push(...["REAR_POSITIONAL","FLANK_POSITIONAL"].map(l=>({rscType:l,onSelf:!0,enabled:a.get(l).enabled,stacks:1,className:""}))),(Et[t].role==="TANK"||Et[t].role==="MELEE")&&i.push(...["AUTOS_ENGAGED"].map(l=>({rscType:l,onSelf:!0,enabled:a.get(l).available(1),stacks:1,className:""}))),[...this.jobSpecificSelfTargetedBuffViewProps(),...i]}jobSpecificResourceViewProps(t){return[]}getAllResourceViewProps(t){if(!Et[this.state.job].usesMp)return this.jobSpecificResourceViewProps(t);const a=this.state.resources,i=a.timeTillReady("MANA"),l=a.get("MANA").availableAmount();return[{kind:"bar",name:"MP",color:t.resources.mana,progress:l/1e4,valueString:Math.floor(l)+"/10000"},{kind:"bar",name:g({en:"MP tick",zh:"",ja:"MP"}),color:t.resources.manaTick,progress:1-i/3,valueString:(3-i).toFixed(3)+"/3"},...this.jobSpecificResourceViewProps(t)]}statusLayoutFn(t){return c.jsxs(c.Fragment,{children:[c.jsxs("div",{style:{display:"inline-block",verticalAlign:"top",width:"50%",height:"100%"},children:[c.jsxs("span",{style:{display:"block",marginBottom:10},children:[g({en:"time: ",zh:"",ja:""}),`${et.displayTime(t.time,3)} (${t.time.toFixed(3)})`]}),t.resources?c.jsx(ib,{data:{level:t.level,resources:t.resources}}):void 0]}),c.jsxs("div",{style:{position:"relative",display:"inline-block",float:"right",width:"50%"},children:[t.resourceLocks?c.jsx(ab,{data:t.resourceLocks}):void 0,c.jsx(DE,{data:t.enemyBuffs,style:{marginBottom:"3em"}}),c.jsx(DE,{data:t.selfBuffs})]})]})}}var Vh={exports:{}},Ww=Vh.exports,Xp;function Xw(){return Xp||(Xp=1,function(e){(function(t,a,i){function l(h){var A=this,R=E();A.next=function(){var T=2091639*A.s0+A.c*23283064365386963e-26;return A.s0=A.s1,A.s1=A.s2,A.s2=T-(A.c=T|0)},A.c=1,A.s0=R(" "),A.s1=R(" "),A.s2=R(" "),A.s0-=R(h),A.s0<0&&(A.s0+=1),A.s1-=R(h),A.s1<0&&(A.s1+=1),A.s2-=R(h),A.s2<0&&(A.s2+=1),R=null}function r(h,A){return A.c=h.c,A.s0=h.s0,A.s1=h.s1,A.s2=h.s2,A}function d(h,A){var R=new l(h),T=A&&A.state,S=R.next;return S.int32=function(){return R.next()*4294967296|0},S.double=function(){return S()+(S()*2097152|0)*11102230246251565e-32},S.quick=S,T&&(typeof T=="object"&&r(T,R),S.state=function(){return r(R,{})}),S}function E(){var h=4022871197,A=function(R){R=String(R);for(var T=0;T<R.length;T++){h+=R.charCodeAt(T);var S=.02519603282416938*h;h=S>>>0,S-=h,S*=h,h=S>>>0,S-=h,h+=S*4294967296}return(h>>>0)*23283064365386963e-26};return A}a&&a.exports?a.exports=d:this.alea=d})(Ww,e)}(Vh)),Vh.exports}var Wh={exports:{}},qw=Wh.exports,qp;function Zw(){return qp||(qp=1,function(e){(function(t,a,i){function l(E){var h=this,A="";h.x=0,h.y=0,h.z=0,h.w=0,h.next=function(){var T=h.x^h.x<<11;return h.x=h.y,h.y=h.z,h.z=h.w,h.w^=h.w>>>19^T^T>>>8},E===(E|0)?h.x=E:A+=E;for(var R=0;R<A.length+64;R++)h.x^=A.charCodeAt(R)|0,h.next()}function r(E,h){return h.x=E.x,h.y=E.y,h.z=E.z,h.w=E.w,h}function d(E,h){var A=new l(E),R=h&&h.state,T=function(){return(A.next()>>>0)/4294967296};return T.double=function(){do var S=A.next()>>>11,I=(A.next()>>>0)/4294967296,C=(S+I)/(1<<21);while(C===0);return C},T.int32=A.next,T.quick=T,R&&(typeof R=="object"&&r(R,A),T.state=function(){return r(A,{})}),T}a&&a.exports?a.exports=d:this.xor128=d})(qw,e)}(Wh)),Wh.exports}var Xh={exports:{}},Qw=Xh.exports,Zp;function $w(){return Zp||(Zp=1,function(e){(function(t,a,i){function l(E){var h=this,A="";h.next=function(){var T=h.x^h.x>>>2;return h.x=h.y,h.y=h.z,h.z=h.w,h.w=h.v,(h.d=h.d+362437|0)+(h.v=h.v^h.v<<4^(T^T<<1))|0},h.x=0,h.y=0,h.z=0,h.w=0,h.v=0,E===(E|0)?h.x=E:A+=E;for(var R=0;R<A.length+64;R++)h.x^=A.charCodeAt(R)|0,R==A.length&&(h.d=h.x<<10^h.x>>>4),h.next()}function r(E,h){return h.x=E.x,h.y=E.y,h.z=E.z,h.w=E.w,h.v=E.v,h.d=E.d,h}function d(E,h){var A=new l(E),R=h&&h.state,T=function(){return(A.next()>>>0)/4294967296};return T.double=function(){do var S=A.next()>>>11,I=(A.next()>>>0)/4294967296,C=(S+I)/(1<<21);while(C===0);return C},T.int32=A.next,T.quick=T,R&&(typeof R=="object"&&r(R,A),T.state=function(){return r(A,{})}),T}a&&a.exports?a.exports=d:this.xorwow=d})(Qw,e)}(Xh)),Xh.exports}var qh={exports:{}},Jw=qh.exports,Qp;function eG(){return Qp||(Qp=1,function(e){(function(t,a,i){function l(E){var h=this;h.next=function(){var R=h.x,T=h.i,S,I;return S=R[T],S^=S>>>7,I=S^S<<24,S=R[T+1&7],I^=S^S>>>10,S=R[T+3&7],I^=S^S>>>3,S=R[T+4&7],I^=S^S<<7,S=R[T+7&7],S=S^S<<13,I^=S^S<<9,R[T]=I,h.i=T+1&7,I};function A(R,T){var S,I=[];if(T===(T|0))I[0]=T;else for(T=""+T,S=0;S<T.length;++S)I[S&7]=I[S&7]<<15^T.charCodeAt(S)+I[S+1&7]<<13;for(;I.length<8;)I.push(0);for(S=0;S<8&&I[S]===0;++S);for(S==8?I[7]=-1:I[S],R.x=I,R.i=0,S=256;S>0;--S)R.next()}A(h,E)}function r(E,h){return h.x=E.x.slice(),h.i=E.i,h}function d(E,h){E==null&&(E=+new Date);var A=new l(E),R=h&&h.state,T=function(){return(A.next()>>>0)/4294967296};return T.double=function(){do var S=A.next()>>>11,I=(A.next()>>>0)/4294967296,C=(S+I)/(1<<21);while(C===0);return C},T.int32=A.next,T.quick=T,R&&(R.x&&r(R,A),T.state=function(){return r(A,{})}),T}a&&a.exports?a.exports=d:this.xorshift7=d})(Jw,e)}(qh)),qh.exports}var Zh={exports:{}},tG=Zh.exports,$p;function nG(){return $p||($p=1,function(e){(function(t,a,i){function l(E){var h=this;h.next=function(){var R=h.w,T=h.X,S=h.i,I,C;return h.w=R=R+1640531527|0,C=T[S+34&127],I=T[S=S+1&127],C^=C<<13,I^=I<<17,C^=C>>>15,I^=I>>>12,C=T[S]=C^I,h.i=S,C+(R^R>>>16)|0};function A(R,T){var S,I,C,_,b,y=[],U=128;for(T===(T|0)?(I=T,T=null):(T=T+"\0",I=0,U=Math.max(U,T.length)),C=0,_=-32;_<U;++_)T&&(I^=T.charCodeAt((_+32)%T.length)),_===0&&(b=I),I^=I<<10,I^=I>>>15,I^=I<<4,I^=I>>>13,_>=0&&(b=b+1640531527|0,S=y[_&127]^=I+b,C=S==0?C+1:0);for(C>=128&&(y[(T&&T.length||0)&127]=-1),C=127,_=4*128;_>0;--_)I=y[C+34&127],S=y[C=C+1&127],I^=I<<13,S^=S<<17,I^=I>>>15,S^=S>>>12,y[C]=I^S;R.w=b,R.X=y,R.i=C}A(h,E)}function r(E,h){return h.i=E.i,h.w=E.w,h.X=E.X.slice(),h}function d(E,h){E==null&&(E=+new Date);var A=new l(E),R=h&&h.state,T=function(){return(A.next()>>>0)/4294967296};return T.double=function(){do var S=A.next()>>>11,I=(A.next()>>>0)/4294967296,C=(S+I)/(1<<21);while(C===0);return C},T.int32=A.next,T.quick=T,R&&(R.X&&r(R,A),T.state=function(){return r(A,{})}),T}a&&a.exports?a.exports=d:this.xor4096=d})(tG,e)}(Zh)),Zh.exports}var Qh={exports:{}},aG=Qh.exports,Jp;function iG(){return Jp||(Jp=1,function(e){(function(t,a,i){function l(E){var h=this,A="";h.next=function(){var T=h.b,S=h.c,I=h.d,C=h.a;return T=T<<25^T>>>7^S,S=S-I|0,I=I<<24^I>>>8^C,C=C-T|0,h.b=T=T<<20^T>>>12^S,h.c=S=S-I|0,h.d=I<<16^S>>>16^C,h.a=C-T|0},h.a=0,h.b=0,h.c=-1640531527,h.d=1367130551,E===Math.floor(E)?(h.a=E/4294967296|0,h.b=E|0):A+=E;for(var R=0;R<A.length+20;R++)h.b^=A.charCodeAt(R)|0,h.next()}function r(E,h){return h.a=E.a,h.b=E.b,h.c=E.c,h.d=E.d,h}function d(E,h){var A=new l(E),R=h&&h.state,T=function(){return(A.next()>>>0)/4294967296};return T.double=function(){do var S=A.next()>>>11,I=(A.next()>>>0)/4294967296,C=(S+I)/(1<<21);while(C===0);return C},T.int32=A.next,T.quick=T,R&&(typeof R=="object"&&r(R,A),T.state=function(){return r(A,{})}),T}a&&a.exports?a.exports=d:this.tychei=d})(aG,e)}(Qh)),Qh.exports}var $h={exports:{}};const oG={},lG=Object.freeze(Object.defineProperty({__proto__:null,default:oG},Symbol.toStringTag,{value:"Module"})),sG=cL(lG);var rG=$h.exports,eC;function cG(){return eC||(eC=1,function(e){(function(t,a,i){var l=256,r=6,d=52,E="random",h=i.pow(l,r),A=i.pow(2,d),R=A*2,T=l-1,S;function I(M,G,H){var P=[];G=G==!0?{entropy:!0}:G||{};var q=y(b(G.entropy?[M,L(a)]:M??U(),3),P),ne=new C(P),Ee=function(){for(var ue=ne.g(r),de=h,fe=0;ue<A;)ue=(ue+fe)*l,de*=l,fe=ne.g(1);for(;ue>=R;)ue/=2,de/=2,fe>>>=1;return(ue+fe)/de};return Ee.int32=function(){return ne.g(4)|0},Ee.quick=function(){return ne.g(4)/4294967296},Ee.double=Ee,y(L(ne.S),a),(G.pass||H||function(ue,de,fe,Q){return Q&&(Q.S&&_(Q,ne),ue.state=function(){return _(ne,{})}),fe?(i[E]=ue,de):ue})(Ee,q,"global"in G?G.global:this==i,G.state)}function C(M){var G,H=M.length,P=this,q=0,ne=P.i=P.j=0,Ee=P.S=[];for(H||(M=[H++]);q<l;)Ee[q]=q++;for(q=0;q<l;q++)Ee[q]=Ee[ne=T&ne+M[q%H]+(G=Ee[q])],Ee[ne]=G;(P.g=function(ue){for(var de,fe=0,Q=P.i,J=P.j,F=P.S;ue--;)de=F[Q=T&Q+1],fe=fe*l+F[T&(F[Q]=F[J=T&J+de])+(F[J]=de)];return P.i=Q,P.j=J,fe})(l)}function _(M,G){return G.i=M.i,G.j=M.j,G.S=M.S.slice(),G}function b(M,G){var H=[],P=typeof M,q;if(G&&P=="object")for(q in M)try{H.push(b(M[q],G-1))}catch{}return H.length?H:P=="string"?M:M+"\0"}function y(M,G){for(var H=M+"",P,q=0;q<H.length;)G[T&q]=T&(P^=G[T&q]*19)+H.charCodeAt(q++);return L(G)}function U(){try{var M;return S&&(M=S.randomBytes)?M=M(l):(M=new Uint8Array(l),(t.crypto||t.msCrypto).getRandomValues(M)),L(M)}catch{var G=t.navigator,H=G&&G.plugins;return[+new Date,t,H,t.screen,L(a)]}}function L(M){return String.fromCharCode.apply(0,M)}if(y(i.random(),a),e.exports){e.exports=I;try{S=sG}catch{}}else i["seed"+E]=I})(typeof self<"u"?self:rG,[],Math)}($h)),$h.exports}var TR,tC;function uG(){if(tC)return TR;tC=1;var e=Xw(),t=Zw(),a=$w(),i=eG(),l=nG(),r=iG(),d=cG();return d.alea=e,d.xor128=t,d.xorwow=a,d.xorshift7=i,d.xor4096=l,d.tychei=r,TR=d,TR}var dG=uG();const nC=mT(dG);var tc,nc,Wu,Xu,zE,sb;class qt{constructor(t){Ye(this,zE);Z(this,"config");Z(this,"rng");Z(this,"nonProcRng");Z(this,"lucidTickOffset");Z(this,"dotTickOffset");Z(this,"hotTickOffset");Z(this,"time");Z(this,"resources");Z(this,"cooldowns");Z(this,"eventsQueue");Z(this,"skillsList");Z(this,"displayedSkills");Z(this,"autoAttackDelay");Z(this,"overTimeEffectGroups",[]);Z(this,"dotResources",[]);Z(this,"hotResources",[]);Z(this,"excludedDoTs",[]);Z(this,"excludedHoTs",[]);Z(this,"fullTimeDoTs",[]);Ye(this,tc,[]);Ye(this,nc,[]);Z(this,"dotSkills",[]);Z(this,"hotSkills",[]);Ye(this,Wu,new Map);Ye(this,Xu,new Map);this.config=t,this.rng=nC(t.randomSeed),this.nonProcRng=nC(t.randomSeed+"_nonProcs"),this.lucidTickOffset=this.nonProcRng()*3,this.dotTickOffset=this.nonProcRng()*3,this.hotTickOffset=this.nonProcRng()*3,this.time=0,this.resources=new zU(this),this.cooldowns=new FU(this),Ji(this.job).forEach((i,l)=>{i.isCoolDown?this.cooldowns.set(new Ge(l,i.cdPerStack,i.maxStacks,i.maxStacks)):this.resources.set(new sa(l,i.maxValue,i.defaultValue,i.warnOnOvercap))});let a=2.5;switch(Et[this.job].role){case"TANK":case"MELEE":case"RANGED":a=t.adjustedSksGCD();break;case"HEALER":case"CASTER":a=t.adjustedGCD();break}this.cooldowns.set(new Ge("cd_GCD",t.getAfterTaxGCD(a),1,1)),this.resources.set(new sa("MOVEMENT",1,1)),this.resources.set(new sa("NOT_ANIMATION_LOCKED",1,1)),this.resources.set(new sa("NOT_CASTER_TAXED",1,1)),this.resources.set(new sa("IN_COMBAT",1,0)),this.cooldowns.set(new Ge("NEVER",0,0,0)),this.eventsQueue=[],this.skillsList=new VU(this),this.displayedSkills=new WU(this.job,t.level),this.autoAttackDelay=2.5}get statusPropsGenerator(){return new Xt(this)}get job(){return this.config.job}get partySize(){return this.resources.get("PARTY_SIZE").availableAmount()}registerRecurringEvents(t=[],a=[]){const i=this;{const E=()=>{const h=this.resources.get("MANA"),A=this.captureManaRegenAmount();h.gain(A);const R=h.availableAmount();N.reportManaTick(i.time,"+"+A+" (MP="+R+")"),this.resources.addResourceEvent({rscType:"MANA",name:"mana tick",delay:3,fnOnRsc:T=>{E()},tags:[Ea.MpTick,Ea.ManaGain]})};this.resources.addResourceEvent({rscType:"MANA",name:"initial mana tick",delay:this.config.timeTillFirstManaTick,fnOnRsc:E,tags:[Ea.MpTick,Ea.ManaGain]})}const l=()=>{const E=this.resources.get("LUCID_DREAMING");if(E.available(1)&&(E.tickCount++,!(this.job==="BLM"&&this.hasResourceAvailable("ASTRAL_FIRE")))){const A=this.resources.get("MANA");A.gain(550);let R="+550";if(console.assert(E.node!==void 0),E.node){let T="??";E.node.tmp_startLockTime&&(T=(E.node.tmp_startLockTime-this.config.countdown).toFixed(3)),R+=" {skill}@"+T,R+=" ("+E.tickCount+"/7)"}R+=" (MP="+A.availableAmount()+")",N.reportLucidTick(this.time,R)}const h=new ve("lucid tick",3,()=>{l()});h.addTag(Ea.LucidTick),E.available(1)&&E.pendingChange&&E.pendingChange.timeTillEvent>=3&&h.addTag(Ea.ManaGain),this.addEvent(h)};if([...Si,...Ii].includes(this.job)){let E=this.config.timeTillFirstManaTick+this.lucidTickOffset;for(;E>3;)E-=3;const h=new ve("initial lucid tick",E,l);h.addTag(Ea.LucidTick),this.addEvent(h)}const r=()=>{this.dotResources.filter(E=>!this.excludedDoTs.includes(E)).forEach(E=>this.handleDoTTick(E)),this.getDisplayTime()>=0&&N.reportDotTick(this.time),this.addEvent(new ve("DoT tick",3,()=>{r()}))},d=()=>{this.hotResources.filter(E=>!this.excludedHoTs.includes(E)).forEach(E=>this.handleHoTTick(E)),this.getDisplayTime()>=0&&N.reportHotTick(this.time),this.addEvent(new ve("HoT tick",3,()=>{d()}))};if(t.forEach(E=>{E.groupedEffects.forEach(h=>{let A=this.dotResources,R=le(this,tc),T=le(this,Wu),S=this.excludedDoTs;E.isHealing&&(A=this.hotResources,R=le(this,nc),T=le(this,Xu),S=this.excludedHoTs),A.includes(h.effectName)?console.assert(!1,`${h.effectName} was registered as an over time effect multiple times for ${this.job}`):(A.push(h.effectName),h.appliedBy.forEach(I=>{!E.isHealing&&!this.dotSkills.includes(I)&&this.dotSkills.push(I),E.isHealing&&!this.hotSkills.includes(I)&&this.hotSkills.push(I)}),T.set(h.effectName,E.groupedEffects.filter(I=>I!==h).map(I=>I.effectName)),h.isGroundTargeted&&!R.includes(h.effectName)&&R.push(h.effectName),h.exclude&&!S.includes(h.effectName)&&S.push(h.effectName),!E.isHealing&&E.reportName&&!this.fullTimeDoTs.includes(h.effectName)&&this.fullTimeDoTs.push(h.effectName))})}),a.forEach(E=>this.dotSkills.push(E)),this.overTimeEffectGroups=t,this.dotResources.filter(E=>!this.excludedDoTs.includes(E)).length>0){let E=this.config.timeTillFirstManaTick+this.dotTickOffset;for(;E>3;)E-=3;this.addEvent(new ve("initial DoT tick",E,r))}if(this.hotResources.filter(E=>!this.excludedHoTs.includes(E)).length>0){let E=this.config.timeTillFirstManaTick+this.hotTickOffset;for(;E>3;)E-=3;this.addEvent(new ve("initial HoT tick",E,d))}this.jobSpecificRegisterRecurringEvents()}onResolveOverTimeTick(t,a){a==="damage"?this.jobSpecificOnResolveDotTick(t):this.jobSpecificOnResolveHotTick(t)}inherentSpeedModifier(){}jobSpecificRegisterRecurringEvents(){}jobSpecificOnResolveDotTick(t){}jobSpecificOnResolveHotTick(t){}jobSpecificAddDamageBuffCovers(t,a){}jobSpecificAddSpeedBuffCovers(t,a){}jobSpecificAddHealingBuffCovers(t,a){}maybeCancelChanneledSkills(t){const a=this.skillsList.get(t);a&&(a.animationLockFn(this)<=Ia||this.cancelChanneledSkills())}cancelChanneledSkills(){}jobSpecificOnAutoAttack(){}onAutoAttack(){this.jobSpecificOnAutoAttack()}getStatusDuration(t){return Vt(this.job,t).maxTimeout}gainStatus(t,a=1){const i=this.resources.get(t),l=Vt(this.job,t);this.hasResourceAvailable(t)?(l.warnOnOvercap&&a>=i.availableAmount()&&N.reportWarning({kind:"overcap",rsc:t}),l.maxTimeout>0&&i.overrideTimer(this,l.maxTimeout),i.availableAmount()!==a&&i.overrideCurrentValue(a)):(i.gain(a),l.maxTimeout>0&&this.enqueueResourceDrop(t))}maybeGainProc(t,a=.5,i=!1){this.triggersEffect(a,i)&&this.gainStatus(t)}triggersEffect(t,a=!1){if(this.config.procMode===fa.Never)return!1;const i=a?this.rng():void 0;return this.config.procMode===fa.Always?!0:(i??this.rng())<t}handleDoTTick(t){this.handleOverTimeTick(t,"damage")}handleHoTTick(t){this.handleOverTimeTick(t,"healing")}handleOverTimeTick(t,a){const i=this.resources.get(t);if(i.availableAmountIncludingDisabled()>0){if(i.node&&i.enabled){const l=i.node.getOverTimePotencies(t,a)[i.tickCount];N.resolveOverTimePotency(l,a),this.onResolveOverTimeTick(t,a)}i.tickCount++}else i.node&&(i.node.removeUnresolvedOvertimePotencies(a),i.node=void 0)}tick(t,a=()=>!1){let i=0;for(;i<t&&this.eventsQueue.length>0&&!a();){this.eventsQueue.sort((E,h)=>E.timeTillEvent-h.timeTillEvent);const l=Math.min(t-i,this.eventsQueue[0].timeTillEvent);i=Math.min(i+l,t),this.time+=l,this.cooldowns.tick(l);const r=[];for(let E=0;E<this.eventsQueue.length;E++)r.push(this.eventsQueue[E]);r.forEach(E=>{E.timeTillEvent-=l});let d=0;r.forEach(E=>{E.timeTillEvent<=_n.epsilon&&(E.canceled||E.effectFn(),d++)}),this.eventsQueue.splice(0,d)}return i}addEvent(t){this.eventsQueue.push(t)}getDisplayTime(){return this.time-this.config.countdown}captureManaRegenAmount(){return this.isInCombat()?this.job in FT?Ot.mpTick(this.config.level,this.config.piety):200:600}requestToggleBuff(t){const a=this.resources.get(t);if(t==="AUTOS_ENGAGED")return this.toggleAutosEngaged(),!0;if(ze[t].mayBeToggled)return a.available(1)?(a.enabled=!1,!0):(a.enabled=!0,!0);if(ze[t].mayNotBeCanceled)return!1;if(t==="MEDITATE"){const i=this.findNextQueuedEventByTag(Ea.MeditateTick);i&&(i.canceled=!0)}return t==="KARDIA"&&this.tryConsumeResource("KARDION"),(t==="TEN_CHI_JIN"||t==="MUDRA")&&(this.tryConsumeResource("MUDRA"),this.tryConsumeResource("KASSATSU"),this.resources.get("MUDRA_TRACKER").overrideCurrentValue(0),this.resources.get("BUNNY").overrideCurrentValue(0)),a.consume(a.availableAmount()),a.removeTimer(),!0}addRecurringAutoAttackEvent(t,a){const i=(l,r)=>{const d=new ve("aa tick",l,()=>{this.resources.get("AUTOS_ENGAGED").available(1)&&this.isInCombat()&&this.onAutoAttack(),this.addEvent(i(r,r))});return d.addTag(Ea.AutoTick),d};this.addEvent(i(t,a))}findAutoAttackTimerInQueue(){let t=-1;return this.eventsQueue.forEach(a=>{a.name==="aa tick"&&(t=a.timeTillEvent)}),t}startAutoAttackTimer(t,a,i){if(this.findAutoAttackTimerInQueue()!==-1)this.removeAutoAttackTimer();else if(this.resources.get("STORED_AUTO").available(1)){const E=new ve("stored auto",i||0,()=>{this.onAutoAttack()});this.addEvent(E)}this.tryConsumeResource("STORED_AUTO"),this.resources.get("AUTOS_ENGAGED").availableAmount()===0&&this.resources.get("AUTOS_ENGAGED").gain(1);const r=a||3;let d=0;t===-1?d=r:d=t??r,this.addRecurringAutoAttackEvent(d,r)}removeAutoAttackTimer(){let t=0;this.eventsQueue.forEach(a=>{a.name==="aa tick"&&this.eventsQueue.splice(t,1),t++})}toggleAutosEngaged(){const t=this.findAutoAttackTimerInQueue();if(this.resources.get("AUTOS_ENGAGED").availableAmount()===0)this.startAutoAttackTimer(t===-1?3:t);else if(this.resources.get("AUTOS_ENGAGED").consume(1),t!==-1){this.removeAutoAttackTimer();const a=new ve("aa tick",t,()=>{this.resources.get("STORED_AUTO").available(0)&&this.resources.get("STORED_AUTO").gain(1)});this.addEvent(a)}}refreshAutoBasedOnSkill(t,a,i){const l=a!==0,r=this.resources.get("AUTOS_ENGAGED").available(1),d=this.autoAttackDelay,E=this.findAutoAttackTimerInQueue(),h=t.startsAuto;if(i){if(this.isInCombat()){if(l&&r){const A=a+(E===-1?d:E);this.startAutoAttackTimer(A,d,a)}else if(!l&&!r)h&&this.startAutoAttackTimer(E,d);else if(l&&!r){if(h){const A=a+(E===-1?d:E);this.startAutoAttackTimer(A,d,a)}else if(E>0){this.removeAutoAttackTimer();const A=new ve("aa tick",E+a,()=>{this.resources.get("STORED_AUTO").available(0)&&this.resources.get("STORED_AUTO").gain(1)});this.addEvent(A)}}}else if(h){const A=a+(E===-1?d:E);this.startAutoAttackTimer(A,d,a)}}else if(this.isInCombat()){if(l&&r){const A=this.findAutoAttackTimerInQueue(),R=a+(A===-1?d:A);this.startAutoAttackTimer(R)}else if(l&&!r&&E>0){this.removeAutoAttackTimer();const A=new ve("aa tick",E+a,()=>{this.resources.get("STORED_AUTO").available(0)&&this.resources.get("STORED_AUTO").gain(1)});this.addEvent(A)}}}useSpellOrWeaponskill(t,a,i){const l=this.cooldowns.get(t.cdName),d=!(this.job==="NIN"&&(this.hasResourceAvailable("MUDRA")||this.hasResourceAvailable("KASSATSU"))&&["TEN","CHI","JIN"].includes(t.name))&&t.secondaryCd?this.cooldowns.get(t.secondaryCd.cdName):void 0,E=t.castTimeFn(this),h=t.recastTimeFn(this);this.jobSpecificAddSpeedBuffCovers(a,t);const A=t.potencyFn(this);let R=a.getInitialPotency();!R&&(A>0||t.drawsAggro&&!this.isInCombat())?(this.refreshAutoBasedOnSkill(t,E,!0),R=new tn({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t.name,aspect:t.aspect,basePotency:A,snapshotTime:void 0,description:"",targetCount:a.targetCount,falloff:t.falloff}),a.addPotency(R)):this.refreshAutoBasedOnSkill(t,E,!1);const T=t.healingPotencyFn(this);let S=a.getInitialHealingPotency();!S&&T>0&&(S=new tn({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t.name,aspect:t.aspect,basePotency:T,snapshotTime:void 0,description:"",targetCount:a.healTargetCount,falloff:0}),a.addHealingPotency(S));const I=()=>{const _=t.manaCostFn(this);_>this.resources.get("MANA").availableAmount()?N.reportInterruption({failNode:a,failIndex:i}):_>0&&this.resources.get("MANA").consume(_);const b=A>0;if(R&&(R.snapshotTime=this.getDisplayTime(),b)){const U=[];this.hasResourceAvailable("TINCTURE")&&U.push(X.Tincture),U.push(...t.jobPotencyModifiers(this)),R.modifiers=U}b&&(this.hasResourceAvailable("TINCTURE")&&!a.hasBuff(x.Tincture)&&a.addBuff(x.Tincture),this.jobSpecificAddDamageBuffCovers(a,t));const y=T>0;if(S){S.snapshotTime=this.getDisplayTime();const U=[];this.hasResourceAvailable("TINCTURE")&&U.push(X.Tincture),U.push(...t.jobHealingPotencyModifiers(this)),S.modifiers=U}if(y&&(this.hasResourceAvailable("TINCTURE")&&!a.hasBuff(x.Tincture)&&a.addBuff(x.Tincture),this.jobSpecificAddHealingBuffCovers(a,t)),t.onConfirm(this,a),this.addEvent(new ve(t.name+" applied",t.applicationDelay,()=>{R&&(N.resolvePotency(R),this.hasResourceAvailable("IN_COMBAT")||this.resources.get("IN_COMBAT").gain(1)),S&&N.resolveHealingPotency(S),t.onApplication(this,a)})),R&&!this.hasResourceAvailable("IN_COMBAT")){const U=this.resources.timeTillReady("IN_COMBAT");(U===0||U>t.applicationDelay)&&this.resources.addResourceEvent({rscType:"IN_COMBAT",name:"begin combat if necessary",delay:t.applicationDelay,fnOnRsc:L=>{L.gain(1)}})}};if(E===0||t.isInstantFn(this))this.resources.takeResourceLock("NOT_ANIMATION_LOCKED",t.animationLockFn(this)),I();else{this.resources.takeResourceLock("MOVEMENT",E-Ei.getSlidecastWindow(E)),this.resources.takeResourceLock("NOT_CASTER_TAXED",this.config.getAfterTaxCastTime(E));const _=E-Ei.getSlidecastWindow(E);this.addEvent(new ve(t.name+" captured",_,()=>{t.validateAttempt(this)?I():N.reportInterruption({failNode:a,failIndex:i})}))}l.useStackWithRecast(this.config.getAfterTaxGCD(h)),d==null||d.useStack()}useAbility(t,a){console.assert(a);const i=this.cooldowns.get(t.cdName),l=t.secondaryCd?this.cooldowns.get(t.secondaryCd.cdName):void 0,r=t.potencyFn(this);let d;if((r>0||t.drawsAggro)&&(d=new tn({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t.name,aspect:t.aspect,basePotency:r,snapshotTime:this.getDisplayTime(),description:"",targetCount:a.targetCount,falloff:t.falloff})),d&&r>0){const C=[];this.hasResourceAvailable("TINCTURE")&&C.push(X.Tincture),C.push(...t.jobPotencyModifiers(this)),d.modifiers=C,a.addPotency(d)}const E=this.resources.get("AUTOS_ENGAGED").available(1),h=this.autoAttackDelay,A=this.findAutoAttackTimerInQueue(),R=t.startsAuto||d&&r>0;if(R)if(this.isInCombat())E||R&&this.startAutoAttackTimer(A,h);else{const C=A===-1?h:A;this.startAutoAttackTimer(C,h,void 0)}const T=t.healingPotencyFn(this);let S;if(T>0){S=new tn({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t.name,aspect:t.aspect,basePotency:T,snapshotTime:this.getDisplayTime(),description:"",targetCount:a.healTargetCount,falloff:0});const C=[];this.hasResourceAvailable("TINCTURE")&&C.push(X.Tincture),C.push(...t.jobHealingPotencyModifiers(this)),S.modifiers=C,a.addHealingPotency(S)}r>0&&!a.hasBuff(x.Tincture)&&(this.hasResourceAvailable("TINCTURE")&&a.addBuff(x.Tincture),this.jobSpecificAddDamageBuffCovers(a,t)),T>0&&(this.hasResourceAvailable("TINCTURE")&&!a.hasBuff(x.Tincture)&&a.addBuff(x.Tincture),this.jobSpecificAddHealingBuffCovers(a,t));const I=t.manaCostFn(this);if(I>0&&this.resources.get("MANA").consume(I),t.onConfirm(this,a),d&&!this.hasResourceAvailable("IN_COMBAT")){const C=this.resources.timeTillReady("IN_COMBAT");(C===0||C>t.applicationDelay)&&this.resources.addResourceEvent({rscType:"IN_COMBAT",name:"begin combat if necessary",delay:t.applicationDelay,fnOnRsc:_=>{_.gain(1)}})}t.applicationDelay>0?this.addEvent(new ve(t.name+" applied",t.applicationDelay,()=>{d&&N.resolvePotency(d),S&&N.resolveHealingPotency(S),t.onApplication(this,a)})):(d&&N.resolvePotency(d),S&&N.resolveHealingPotency(S),t.onApplication(this,a)),i.useStack(),l==null||l.useStack(),this.resources.takeResourceLock("NOT_ANIMATION_LOCKED",t.animationLockFn(this))}useLimitBreak(t,a,i){const l=this.cooldowns.get(t.cdName),r=t.castTimeFn(this),d=r>0?Ei.getSlidecastWindow(r):0,E=t.potencyFn(this);let h;E>0&&(h=new tn({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t.name,aspect:t.aspect,basePotency:E,snapshotTime:void 0,description:"",targetCount:a.targetCount,falloff:t.falloff}),a.addPotency(h));const A=t.healingPotencyFn(this);let R;A>0&&(R=new tn({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t.name,aspect:t.aspect,basePotency:A,snapshotTime:void 0,description:"",targetCount:a.healTargetCount,falloff:0}),a.addHealingPotency(R));const T=()=>{t.onConfirm(this,a),h&&(h.snapshotTime=this.getDisplayTime()),R&&(R.snapshotTime=this.getDisplayTime()),this.addEvent(new ve(t.name+" applied",t.applicationDelay,()=>{h&&N.resolvePotency(h),R&&N.resolveHealingPotency(R),t.onApplication(this,a)})),this.resources.takeResourceLock("NOT_ANIMATION_LOCKED",d+t.animationLockFn(this))};if(r===0)T();else{this.resources.takeResourceLock("MOVEMENT",r-d),this.resources.takeResourceLock("NOT_CASTER_TAXED",this.config.getAfterTaxCastTime(r));const I=r-d;this.addEvent(new ve(t.name+" captured",I,()=>{t.validateAttempt(this)?T():N.reportInterruption({failNode:a,failIndex:i})}))}l.useStack()}timeTillAnySkillAvailable(){const t=this.resources.timeTillReady("NOT_ANIMATION_LOCKED"),a=this.resources.timeTillReady("NOT_CASTER_TAXED");return Math.max(t,a)}findNextQueuedEventByTag(t){for(let a=0;a<this.eventsQueue.length;a++){const i=this.eventsQueue[a];if(i.hasTag(t))return i}}hasResourceAvailable(t,a){return this.resources.get(t).available(a??1)}hasResourceExactly(t,a){return this.resources.get(t).availableAmount()===a}hitPositional(t){return this.hasResourceAvailable("TRUE_NORTH")||t==="flank"&&this.hasResourceAvailable("FLANK_POSITIONAL")||t==="rear"&&this.hasResourceAvailable("REAR_POSITIONAL")}hitCombo(t){return this.hasResourceExactly(t.resource,t.resourceValue)}computeComboAndPositionalModifiers(t,a,i){const l=[];return a&&this.hitCombo(a)?(l.push(yU(an(this,a.potency)-t)),i&&this.hitPositional(i.location)&&l.push(rE(an(this,i.comboPotency)-an(this,a.potency)))):i&&this.hitPositional(i.location)&&l.push(rE(an(this,i.potency)-t)),l}enqueueResourceDrop(t,a,i){if(a===void 0){const r=Vt(this.job,t);console.assert(r==null?void 0:r.maxTimeout,`could not find timeout declaration for resource ${t}`),a=r.maxTimeout}const l=(i===void 0?"drop all ":`drop ${i} `)+t;this.resources.get(t).removeTimer(),this.resources.addResourceEvent({rscType:t,name:l,delay:a,fnOnRsc:r=>{r.consume(i??r.availableAmountIncludingDisabled()),Vt(this.job,r.type).warnOnTimeout&&N.reportWarning({kind:"timeout",rsc:r.type})}})}getOverriddenDots(t){return le(this,Wu).get(t)??[]}getOverriddenHots(t){return le(this,Xu).get(t)??[]}applyDoT(t,a){this.applyOverTimeEffect(t,a,"damage")}applyHoT(t,a,i){this.applyOverTimeEffect(t,a,"healing",i)}applyOverTimeEffect(t,a,i,l){const r=this.resources.get(t),d=l??this.getStatusDuration(t);let E;if((i==="damage"?this.getOverriddenDots(t):this.getOverriddenHots(t)).forEach(A=>{if(A!==t){if(!this.hasResourceAvailable(A)){const R=this.resources.get(A).getLastExpirationTime();if(R){const T=this.getDisplayTime()-R;E=E===void 0?T:Math.min(E,T)}return}a.setOverTimeOverrideAmount(t,a.getOverTimeOverrideAmount(t,i)+this.resources.timeTillReady(A),i),N.reportOverTimeDrop(this.getDisplayTime(),A,i),E=0,this.tryConsumeResource(A)}}),r.available(1))console.assert(r.node),r.node.removeUnresolvedOvertimePotencies(i),a.setOverTimeOverrideAmount(t,a.getOverTimeOverrideAmount(t,i)+this.resources.timeTillReady(t),i),r.overrideTimer(this,d);else{const A=this.getDisplayTime()-(r.getLastExpirationTime()??0);E=E===void 0?A:Math.min(E,A),r.gain(1);const R=i==="damage"?" DoT":" HoT";N.reportOverTimeStart(this.getDisplayTime(),t,i),this.resources.addResourceEvent({rscType:t,name:"drop "+t+R,delay:d,fnOnRsc:T=>{T.consume(1),N.reportOverTimeDrop(this.getDisplayTime(),t,i)}})}a.setOverTimeGap(t,E??0,i),r.node=a,r.tickCount=0,le(this,tc).includes(t)&&(this.handleDoTTick(t),N.reportDotTick(this.time,t)),le(this,nc).includes(t)&&(this.handleHoTTick(t),N.reportHotTick(this.time,t))}addDoTPotencies(t){this.addOverTimePotencies(t,"damage")}addHoTPotencies(t,a){this.addOverTimePotencies(t,"healing",a)}addOverTimePotencies(t,a,i){const l=t.modifiers??[];this.hasResourceAvailable("TINCTURE")&&!l.includes(X.Tincture)&&(l.push(X.Tincture),t.node.addBuff(x.Tincture));const r=i??this.getStatusDuration(t.effectName),d=le(this,tc).includes(t.effectName)||le(this,nc).includes(t.effectName),E=Math.ceil(r/(t.tickFrequency??3))+(d?1:0),h=a==="damage"?"DoT":"HoT",A=a==="damage"?t.node.targetCount:t.node.healTargetCount;for(let R=0;R<E;R++){const T=new tn({config:N.record.config??N.gameConfig,sourceTime:this.getDisplayTime(),sourceSkill:t.skillName,aspect:t.aspect??_e.Other,basePotency:this.config.adjustedOvertimePotency(t.tickPotency,t.speedStat),snapshotTime:this.getDisplayTime(),description:Xe(t.effectName)+` ${h} `+(R+1)+`/${E}`,targetCount:A,falloff:0});T.modifiers=l,t.node.addOverTimePotency(T,t.effectName,a)}}refreshDoT(t,a=!1){this.refreshOverTimeEffect(t,"damage",a)}refreshHoT(t,a=!1){this.refreshOverTimeEffect(t,"healing",a)}refreshOverTimeEffect(t,a,i){!i&&!this.hasResourceAvailable(t.effectName)||(this.addOverTimePotencies(t,a),this.applyOverTimeEffect(t.effectName,t.node,a))}timeTillNextMpGainEvent(){const t=this.findNextQueuedEventByTag(Ea.ManaGain);return t?t.timeTillEvent:0}timeTillNextDamageEvent(){return this.resources.timeTillReady("IN_COMBAT")}getSkillAvailabilityStatus(t,a=!1){const i=this.skillsList.get(t);let l=be(this,zE,sb).call(this,i.name);const r=i.manaCostFn(this),d=this.job==="BLM"&&this.resources.get("LEY_LINES").available(1),E=i.kind==="weaponskill"||i.kind==="spell"||i.kind==="limitbreak"?i.castTimeFn(this):0,h=E===0||i.kind==="ability"||i.kind!=="limitbreak"&&i.kind!=="unknown"&&i.isInstantFn(this),A=this.resources.get("MANA").availableAmount(),R=l>_n.epsilon,T=r<=A,S=i.validateAttempt(this),I=this.config.level>=i.unlockLevel,C=this.job==="NIN"&&(this.hasResourceAvailable("MUDRA")||this.hasResourceAvailable("KASSATSU"))&&["TEN","CHI","JIN"].includes(i.name),_=Mu();if(R&&_.addUnavailableReason(ft.Blocked),!C&&i.secondaryCd&&this.cooldowns.get(i.secondaryCd.cdName).stacksAvailable()===0&&_.addUnavailableReason(ft.SecondaryBlocked),I||_.addUnavailableReason(ft.SkillNotUnlocked),S||_.addUnavailableReason(ft.RequirementsNotMet),T||_.addUnavailableReason(ft.NotEnoughMP),i.name==="MEDITATE"&&(l>_n.epsilon||this.cooldowns.get("cd_GCD").timeTillNextStackAvailable()>_n.epsilon)){const de=_.unavailableReasons.indexOf(ft.RequirementsNotMet);de>=0&&_.unavailableReasons.splice(de,1),_.addUnavailableReason(ft.Blocked)}i.requiresCombat&&_.unavailableReasons.includes(ft.RequirementsNotMet)&&(_.addUnavailableReason(ft.NotInCombat),l=this.timeTillNextDamageEvent());let b=this.cooldowns.get(i.cdName);const y=!C&&i.secondaryCd?this.cooldowns.get(i.secondaryCd.cdName):void 0;let U=b.timeTillNextStackAvailable()%b.currentStackCd();const L=!C&&i.secondaryCd?this.cooldowns.timeTillNextStackAvailable(i.secondaryCd.cdName):void 0;let M=b.currentStackCd();if(t==="MEDITATE"&&U<_n.epsilon){const de=this.cooldowns.get("cd_GCD"),fe=de.currentStackCd();de.timeTillNextStackAvailable()>U&&(b=de,M=fe,U=de.timeTillNextStackAvailable(),l=U)}if(C){const de=this.cooldowns.get("cd_GCD"),fe=de.currentStackCd();b=de,M=fe,U=de.timeTillNextStackAvailable(),l=U}const G=b.stacksAvailable(),H=b.maxStacks(),P=(y==null?void 0:y.currentStackCd())??0;let q=0;_.ready()&&(i.kind==="spell"?q=(h?0:E-Ei.getSlidecastWindow(E))+i.applicationDelay:i.kind==="limitbreak"?q=E+i.applicationDelay:q=i.applicationDelay);const ne=(y==null?void 0:y.stacksAvailable())??0,Ee=(y==null?void 0:y.maxStacks())??0,ue=i.highlightIf(this);return{skillName:i.name,status:_,stacksAvailable:Ee>0?ne:G,maxStacks:Math.max(H,Ee),castTime:E,instantCast:h,cdRecastTime:M,secondaryCdRecastTime:P,timeTillNextStackReady:U,timeTillSecondaryReady:L,timeTillAvailable:l,timeTillDamageApplication:q,capturedManaCost:r,highlight:ue,llCovered:d,usedAt:this.getDisplayTime()}}useSkill(t,a,i){const l=this.skillsList.get(t);l.onExecute(this,a),l.falloff===void 0&&a.setTargetCount(1),l.aoeHeal&&a.setHealTargetCount(this.resources.get("PARTY_SIZE").availableAmount()),l.kind==="spell"||l.kind==="weaponskill"?this.useSpellOrWeaponskill(l,a,i):l.kind==="ability"?this.useAbility(l,a):l.kind==="limitbreak"&&this.useLimitBreak(l,a,i)}useInvalidSkill(t,a){const i=this.skillsList.get(t);if(i.falloff===void 0&&a.setTargetCount(1),i.aoeHeal&&a.setHealTargetCount(this.resources.get("PARTY_SIZE").availableAmount()),i.kind==="spell"||i.kind==="weaponskill"){const l=i.castTimeFn(this),r=i.recastTimeFn(this);l===0||i.isInstantFn(this)?this.resources.takeResourceLock("NOT_ANIMATION_LOCKED",i.animationLockFn(this)):this.resources.takeResourceLock("NOT_CASTER_TAXED",this.config.getAfterTaxCastTime(l)),this.cooldowns.get("cd_GCD").useStackWithRecast(this.config.getAfterTaxGCD(r))}else if(i.kind==="ability")this.resources.takeResourceLock("NOT_ANIMATION_LOCKED",i.animationLockFn(this));else if(i.kind==="limitbreak"){const l=i.castTimeFn(this),r=Ei.getSlidecastWindow(l);this.resources.takeResourceLock("NOT_ANIMATION_LOCKED",r+i.animationLockFn(this))}}getPartyBuffs(t){const a=new Map;return N.timeline.getBuffMarkers().filter(l=>l.time<=t&&l.time+l.duration>=t).forEach(l=>{const r=new gE(l.description);a.has(r.name)||(r.info.damageFactor===1?a.set(r.name,{kind:"critDirect",source:k.PARTY,buffType:r.name,critBonus:r.info.critBonus,dhBonus:r.info.dhBonus}):a.set(r.name,{kind:"multiplier",source:k.PARTY,buffType:r.name,potencyFactor:r.info.damageFactor}))}),a}tryConsumeResource(t,a=!1){const i=this.resources.get(t),l=a?i.availableAmount():1;return l>0&&i.available(l)?(i.consume(l),i.available(l)||i.removeTimer(),!0):!1}setComboState(t,a){a===0?this.tryConsumeResource(t,!0):(this.resources.get(t).overrideCurrentValue(a),this.enqueueResourceDrop(t,30))}hasTraitUnlocked(t){return ZC(t,this.config.level)}isInCombat(){return this.hasResourceAvailable("IN_COMBAT")}}tc=new WeakMap,nc=new WeakMap,Wu=new WeakMap,Xu=new WeakMap,zE=new WeakSet,sb=function(t){var d;const a=this.skillsList.get(t),l=this.job==="NIN"&&(this.hasResourceAvailable("MUDRA")||this.hasResourceAvailable("KASSATSU"))&&["TEN","CHI","JIN"].includes(a.name)||(d=a.secondaryCd)==null?void 0:d.cdName;let r=this.cooldowns.timeTillAnyStackAvailable(a.cdName);return l&&(r=Math.max(r,this.cooldowns.timeTillAnyStackAvailable(l))),Math.max(this.timeTillAnySkillAvailable(),r)};const rb=["THUNDER_III","THUNDER_IV","HIGH_THUNDER","HIGH_THUNDER_II"],hG=Object.keys(IT).filter(e=>!rb.includes(e));Object.keys(IT).forEach(e=>Ft(e,`BLM/${ze[e].name}.png`));class EG extends Xt{jobSpecificOtherTargetedBuffViewProps(){return[...rb.map(t=>this.makeCommonTimer(t,!1))]}jobSpecificSelfTargetedBuffViewProps(){return hG.map(t=>t==="LEY_LINES"?this.makeToggleableTimer(t):t==="THUNDERHEAD"||t==="FIRESTARTER"?this.makeCommonTimerless(t):this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){const a=this.state.resources.get("ENOCHIAN"),i=this.state.resources,l=this.state.getFireStacks(),r=this.state.getIceStacks(),d=i.get("UMBRAL_HEART").availableAmount(),E=i.get("PARADOX").availableAmount(),h=i.get("ASTRAL_SOUL").availableAmount(),A=a.available(1)?i.timeTillReady("POLYGLOT"):30,R=i.get("POLYGLOT").availableAmount(),T=this.state.hasTraitUnlocked("ENHANCED_POLYGLOT_II")&&3||this.state.hasTraitUnlocked("ENHANCED_POLYGLOT")&&2||1,S=[{kind:"counter",name:g({en:"AF/UI",zh:"",ja:"AF/UB"}),color:l>0?t.blm.astralFire:t.blm.umbralIce,currentStacks:l>0?l:r,maxStacks:3},{kind:"counter",name:g({en:"hearts",zh:"",ja:""}),color:t.blm.umbralHeart,currentStacks:d,maxStacks:3},{kind:"counter",name:g({en:"paradox",zh:"",ja:""}),color:t.blm.paradox,currentStacks:E,maxStacks:1}];return this.state.hasTraitUnlocked("ENHANCED_ASTRAL_FIRE")&&S.push({kind:"counter",name:g({en:"astral soul",zh:"",ja:""}),color:t.blm.astralSoul,currentStacks:h,maxStacks:6}),S.push({kind:"bar",name:g({en:"poly timer",zh:"",ja:""}),color:t.blm.polyTimer,progress:1-A/30,valueString:A.toFixed(3)},{kind:"counter",name:g({en:"poly stacks",zh:"",ja:""}),color:t.blm.polyStacks,currentStacks:R,maxStacks:T}),S}}const ua=(e,t,a)=>{qe("BLM",e,t,a??{})};ua("POLYGLOT",3,{timeout:30,warnOnOvercap:!0});ua("ASTRAL_FIRE",3);ua("UMBRAL_ICE",3);ua("UMBRAL_HEART",3);ua("ASTRAL_SOUL",6);ua("LEY_LINES",1,{timeout:20});ua("ENOCHIAN",1);ua("PARADOX",1);ua("FIRESTARTER",1);ua("THUNDERHEAD",1);ua("THUNDER_III",1,{timeout:27});ua("THUNDER_IV",1,{timeout:21});ua("HIGH_THUNDER",1,{timeout:30});ua("HIGH_THUNDER_II",1,{timeout:24});ua("MANAWARD",1,{timeout:20});ua("TRIPLECAST",3,{timeout:15.7});class fG extends qt{constructor(a){super(a);Z(this,"thunderTickOffset");a.initialResourceOverrides.some(E=>(E.type==="ASTRAL_FIRE"||E.type==="UMBRAL_ICE")&&E.stacks>0)&&this.gainStatus("ENOCHIAN"),this.thunderTickOffset=this.nonProcRng()*3;const l=this.hasTraitUnlocked("ENHANCED_POLYGLOT_II")&&3||this.hasTraitUnlocked("ENHANCED_POLYGLOT")&&2||1;this.resources.set(new sa("POLYGLOT",l,0,!0));const r=this.hasTraitUnlocked("ENHANCED_MANAFONT")&&100||120,d=this.hasTraitUnlocked("ENHANCED_SWIFTCAST")&&40||60;[new Ge("cd_MANAFONT",r,1,1),new Ge("cd_SWIFTCAST",d,1,1)].forEach(E=>this.cooldowns.set(E)),this.registerRecurringEvents([{reportName:g({en:"Thunder DoT",zh:"DoT"}),groupedEffects:[{effectName:"HIGH_THUNDER",appliedBy:["HIGH_THUNDER"]},{effectName:"HIGH_THUNDER_II",appliedBy:["HIGH_THUNDER_II"]},{effectName:"THUNDER_III",appliedBy:["THUNDER_III"]},{effectName:"THUNDER_IV",appliedBy:["THUNDER_IV"]}]}])}get statusPropsGenerator(){return new EG(this)}jobSpecificRegisterRecurringEvents(){const a=i=>{this.hasEnochian()&&i.gain(1),this.resources.addResourceEvent({rscType:"POLYGLOT",name:"gain polyglot if currently has enochian",delay:30,fnOnRsc:a})};a(this.resources.get("POLYGLOT"))}jobSpecificAddSpeedBuffCovers(a,i){this.hasResourceAvailable("LEY_LINES")&&i.cdName==="cd_GCD"&&a.addBuff(x.LeyLines)}captureManaRegenAmount(){return this.getFireStacks()>0?0:200}getFireStacks(){return this.resources.get("ASTRAL_FIRE").availableAmount()}getIceStacks(){return this.resources.get("UMBRAL_ICE").availableAmount()}getUmbralHearts(){return this.resources.get("UMBRAL_HEART").availableAmount()}getMP(){return this.resources.get("MANA").availableAmount()}switchToAForUI(a,i){console.assert(i>0);const l=this.resources.get("ASTRAL_FIRE"),r=this.resources.get("UMBRAL_ICE"),d=this.resources.get("UMBRAL_HEART"),E=this.resources.get("PARADOX"),h=this.resources.get("ASTRAL_SOUL");a==="ASTRAL_FIRE"?(l.availableAmount()===0&&this.gainStatus("THUNDERHEAD"),l.gain(i),this.hasTraitUnlocked("ASPECT_MASTERY_V")&&r.available(3)&&d.available(3)&&E.gain(1),r.consume(r.availableAmount())):a==="UMBRAL_ICE"&&(r.availableAmount()===0&&this.gainStatus("THUNDERHEAD"),r.gain(i),this.hasTraitUnlocked("ASPECT_MASTERY_V")&&l.available(3)&&E.gain(1),l.consume(l.availableAmount()),h.consume(h.availableAmount()))}gainUmbralMana(a=0){let i=0;switch(this.resources.get("UMBRAL_ICE").availableAmount()){case 1:i=2500;break;case 2:i=5e3;break;case 3:i=1e4;break;default:i=0;break}this.addEvent(new ve("gain umbral mana",a,()=>{this.resources.get("MANA").gain(i)}))}captureManaCost(a,i,l){const r=this.getIceStacks(),d=this.getFireStacks(),E=this.getUmbralHearts();if(a==="PARADOX"&&this.getIceStacks()>0||a==="FIRE_III"&&this.hasResourceAvailable("FIRESTARTER"))return 0;let h=1;return i===_e.Fire&&r>0||i===_e.Ice&&(r>0||d>0)?h=0:i===_e.Fire&&d>0&&E===0&&(h=2),l*h}captureSpellCastTimeAFUI(a,i){const l=this.config.adjustedCastTime(a,this.hasResourceAvailable("LEY_LINES")?15:void 0);let r=1;return(i===_e.Fire&&this.getIceStacks()===3||i===_e.Ice&&this.getFireStacks()===3)&&(r=.5),l*r}hasEnochian(){return this.hasResourceAvailable("ENOCHIAN")}startOrRefreshEnochian(){const a=this.resources.get("ENOCHIAN");a.available(1)||(this.resources.get("POLYGLOT").overrideTimer(this,30),a.gain(1))}loseEnochian(){["ENOCHIAN","ASTRAL_FIRE","UMBRAL_ICE","UMBRAL_HEART","PARADOX","ASTRAL_SOUL"].forEach(i=>this.tryConsumeResource(i,!0))}}const cb=e=>e.resources.get("LEY_LINES").availableAmountIncludingDisabled()>0,hS=e=>e.hasResourceAvailable("PARADOX"),ub=e=>e.hasTraitUnlocked("ENHANCED_ENOCHIAN_IV")&&1.27||e.hasTraitUnlocked("ENHANCED_ENOCHIAN_III")&&1.22||e.hasTraitUnlocked("ENHANCED_ENOCHIAN_II")&&1.15||1.1,ln=(e,t,a)=>{const i=a.aspect??_e.Other,l=ke((r,d)=>{a.baseCastTime===0||e==="DESPAIR"&&r.hasTraitUnlocked("ENHANCED_ASTRAL_FIRE")||e==="FOUL"&&r.hasTraitUnlocked("ENHANCED_FOUL")||e==="FIRE_III"&&r.hasResourceAvailable("FIRESTARTER")||r.tryConsumeResource("SWIFTCAST")||r.tryConsumeResource("TRIPLECAST")},(r,d)=>{r.getFireStacks()>0&&i===_e.Fire&&!["DESPAIR","FLARE_STAR","FLARE"].includes(e)&&!(e==="FIRE_III"&&r.hasResourceAvailable("FIRESTARTER"))&&r.tryConsumeResource("UMBRAL_HEART"),i===_e.Ice&&r.gainUmbralMana(a.applicationDelay)},a.onConfirm);return $a("BLM",e,t,{...a,aspect:i,castTime:r=>r.captureSpellCastTimeAFUI(a.baseCastTime,i),recastTime:r=>r.config.adjustedGCD(2.5,r.hasResourceAvailable("LEY_LINES")?15:0),manaCost:r=>r.captureManaCost(e,i,a.baseManaCost),potency:r=>a.basePotency,isInstantFn:r=>e==="DESPAIR"&&r.hasTraitUnlocked("ENHANCED_ASTRAL_FIRE")||e==="FOUL"&&r.hasTraitUnlocked("ENHANCED_FOUL")||e==="FIRE_III"&&r.hasResourceAvailable("FIRESTARTER")||r.hasResourceAvailable("SWIFTCAST")||r.hasResourceAvailable("TRIPLECAST"),onConfirm:l,jobPotencyModifiers:r=>{const d=[];if(r.hasResourceAvailable("ENOCHIAN")){const A=ub(r);d.push({kind:"multiplier",source:k.ENO,potencyFactor:A})}const E=r.getIceStacks(),h=r.getFireStacks();return E===1?i===_e.Fire?d.push({kind:"multiplier",source:k.UI1,potencyFactor:.9}):i===_e.Ice&&d.push({kind:"multiplier",source:k.UI1,potencyFactor:1}):E===2?i===_e.Fire?d.push({kind:"multiplier",source:k.UI2,potencyFactor:.8}):i===_e.Ice&&d.push({kind:"multiplier",source:k.UI2,potencyFactor:1}):E===3&&(i===_e.Fire?d.push({kind:"multiplier",source:k.UI3,potencyFactor:.7}):i===_e.Ice&&d.push({kind:"multiplier",source:k.UI3,potencyFactor:1})),h===1?i===_e.Ice?d.push({kind:"multiplier",source:k.AF1,potencyFactor:.9}):i===_e.Fire&&d.push({kind:"multiplier",source:k.AF1,potencyFactor:1.4}):h===2?i===_e.Ice?d.push({kind:"multiplier",source:k.AF2,potencyFactor:.8}):i===_e.Fire&&d.push({kind:"multiplier",source:k.AF2,potencyFactor:1.6}):h===3&&(i===_e.Ice?d.push({kind:"multiplier",source:k.AF3,potencyFactor:.7}):i===_e.Fire&&d.push({kind:"multiplier",source:k.AF3,potencyFactor:1.8})),d}})},Us=(e,t,a,i)=>lt("BLM",e,t,a,i);ln("BLIZZARD",1,{aspect:_e.Ice,baseCastTime:2,baseManaCost:400,basePotency:180,applicationDelay:.846,onConfirm:(e,t)=>{e.getFireStacks()===0?(e.switchToAForUI("UMBRAL_ICE",1),e.startOrRefreshEnochian()):(e.resources.get("ENOCHIAN").removeTimer(),e.loseEnochian())},replaceIf:[{newSkill:"PARADOX",condition:hS}]});ln("FIRE",2,{aspect:_e.Fire,baseCastTime:2,baseManaCost:800,basePotency:180,applicationDelay:1.871,onConfirm:(e,t)=>{e.triggersEffect(.4,!0)&&e.gainStatus("FIRESTARTER"),e.getIceStacks()===0?(e.switchToAForUI("ASTRAL_FIRE",1),e.startOrRefreshEnochian()):(e.resources.get("ENOCHIAN").removeTimer(),e.loseEnochian())},replaceIf:[{newSkill:"PARADOX",condition:hS}]});Us("TRANSPOSE",4,"cd_TRANSPOSE",{applicationDelay:0,cooldown:5,validateAttempt:e=>e.getFireStacks()>0||e.getIceStacks()>0,onApplication:(e,t)=>{(e.getFireStacks()!==0||e.getIceStacks()!==0)&&(e.switchToAForUI(e.getFireStacks()>0?"UMBRAL_ICE":"ASTRAL_FIRE",1),e.startOrRefreshEnochian())}});const cf=(e,t)=>(a,i)=>{let l=0;switch(e){case"HIGH_THUNDER":l=60;break;case"THUNDER_III":l=50;break;case"THUNDER_IV":l=35;break;case"HIGH_THUNDER_II":l=40;break}const r=[];if(a.hasResourceAvailable("ENOCHIAN")){const d=ub(a);r.push({kind:"multiplier",source:k.ENO,potencyFactor:d})}console.assert(l>0,`${e} was applied as a Thunder DoT`),a.addDoTPotencies({node:i,effectName:t,skillName:e,tickPotency:l,speedStat:"sps",aspect:_e.Lightning,modifiers:r}),a.tryConsumeResource("THUNDERHEAD")};ln("THUNDER_III",45,{aspect:_e.Lightning,baseCastTime:0,baseManaCost:0,basePotency:120,applicationDelay:1.03,validateAttempt:e=>e.hasResourceAvailable("THUNDERHEAD"),onConfirm:cf("THUNDER_III","THUNDER_III"),onApplication:(e,t)=>e.applyDoT("THUNDER_III",t),autoUpgrade:{trait:"THUNDER_MASTERY_III",otherSkill:"HIGH_THUNDER"},highlightIf:e=>e.hasResourceAvailable("THUNDERHEAD")});Ke("BLM","MANAWARD",30,"cd_MANAWARD",{rscType:"MANAWARD",applicationDelay:1.114,cooldown:120});Us("MANAFONT",30,"cd_MANAFONT",{applicationDelay:.2,cooldown:100,validateAttempt:e=>e.getFireStacks()>0,onConfirm:(e,t)=>{e=e,e.resources.get("ASTRAL_FIRE").gain(3),e.resources.get("UMBRAL_HEART").gain(3),e.hasTraitUnlocked("ASPECT_MASTERY_V")&&e.resources.get("PARADOX").gain(1),e.gainStatus("THUNDERHEAD"),e.startOrRefreshEnochian()},onApplication:(e,t)=>{e.resources.get("MANA").gain(1e4)}});ln("FIRE_III",35,{aspect:_e.Fire,baseCastTime:3.5,baseManaCost:2e3,basePotency:290,applicationDelay:1.292,onConfirm:(e,t)=>{e.tryConsumeResource("FIRESTARTER"),e.switchToAForUI("ASTRAL_FIRE",3),e.startOrRefreshEnochian()},highlightIf:e=>e.hasResourceAvailable("FIRESTARTER")});ln("BLIZZARD_III",35,{aspect:_e.Ice,baseCastTime:3.5,baseManaCost:800,basePotency:290,applicationDelay:.89,onConfirm:(e,t)=>{e.switchToAForUI("UMBRAL_ICE",3),e.startOrRefreshEnochian()}});ln("FREEZE",40,{aspect:_e.Ice,baseCastTime:2,baseManaCost:1e3,basePotency:120,applicationDelay:.664,falloff:0,validateAttempt:e=>e.getIceStacks()>0,onConfirm:(e,t)=>e.resources.get("UMBRAL_HEART").gain(3)});ln("FLARE",50,{aspect:_e.Fire,baseCastTime:2,baseManaCost:0,basePotency:240,applicationDelay:1.157,falloff:.3,validateAttempt:e=>e.getFireStacks()>0&&e.getMP()>=800,onConfirm:(e,t)=>{const a=e.resources.get("UMBRAL_HEART"),i=e.resources.get("MANA"),l=a.available(1)?i.availableAmount()*.66:i.availableAmount();e.resources.get("MANA").consume(l),a.consume(a.availableAmount()),e.resources.get("ASTRAL_FIRE").gain(3),e.hasTraitUnlocked("ENHANCED_ASTRAL_FIRE")&&e.resources.get("ASTRAL_SOUL").gain(3),e.startOrRefreshEnochian()}});Ke("BLM","LEY_LINES",52,"cd_LEY_LINES",{rscType:"LEY_LINES",applicationDelay:.49,cooldown:120,maxCharges:2,validateAttempt:e=>!(e.resources.get("LEY_LINES").availableAmountIncludingDisabled()>0),onApplication:(e,t)=>{e.resources.get("LEY_LINES").enabled=!0},replaceIf:[{newSkill:"RETRACE",condition:cb}]});ln("BLIZZARD_IV",58,{aspect:_e.Ice,baseCastTime:2,baseManaCost:800,basePotency:300,applicationDelay:1.156,validateAttempt:e=>e.getIceStacks()>0,onConfirm:(e,t)=>e.resources.get("UMBRAL_HEART").gain(3)});ln("FIRE_IV",60,{aspect:_e.Fire,baseCastTime:2,baseManaCost:800,basePotency:300,applicationDelay:1.159,validateAttempt:e=>e.getFireStacks()>0,onConfirm:(e,t)=>{e.hasTraitUnlocked("ENHANCED_ASTRAL_FIRE")&&e.resources.get("ASTRAL_SOUL").gain(1)}});Us("BETWEEN_THE_LINES",62,"cd_BETWEEN_THE_LINES",{applicationDelay:0,cooldown:3,animationLock:Wt,validateAttempt:e=>e.resources.get("LEY_LINES").availableAmountIncludingDisabled()>0,onConfirm:(e,t)=>{e.resources.get("LEY_LINES").enabled=!0}});Us("AETHERIAL_MANIPULATION",50,"cd_AETHERIAL_MANIPULATION",{applicationDelay:0,cooldown:10,animationLock:Wt});Us("TRIPLECAST",66,"cd_TRIPLECAST",{applicationDelay:0,cooldown:60,maxCharges:2,onApplication:(e,t)=>e.gainStatus("TRIPLECAST",3)});ln("FOUL",70,{baseCastTime:2,baseManaCost:0,basePotency:600,falloff:.25,applicationDelay:1.158,validateAttempt:e=>e.hasResourceAvailable("POLYGLOT"),onConfirm:(e,t)=>e.resources.get("POLYGLOT").consume(1),highlightIf:e=>e.hasResourceAvailable("POLYGLOT")});ln("DESPAIR",72,{aspect:_e.Fire,baseCastTime:2,baseManaCost:0,basePotency:350,applicationDelay:.556,validateAttempt:e=>e.getFireStacks()>0&&e.getMP()>=800,onConfirm:(e,t)=>{const a=e.resources.get("MANA"),i=a.availableAmount();console.assert(i>=800,`tried to confirm despair at ${i} MP`),a.consume(i),e.resources.get("ASTRAL_FIRE").gain(3),e.startOrRefreshEnochian()}});ln("UMBRAL_SOUL",35,{aspect:_e.Ice,baseCastTime:0,baseManaCost:0,basePotency:0,applicationDelay:.633,validateAttempt:e=>e.getIceStacks()>0,onConfirm:(e,t)=>{e.resources.get("UMBRAL_ICE").gain(1),e.resources.get("UMBRAL_HEART").gain(1)}});ln("XENOGLOSSY",80,{baseCastTime:0,baseManaCost:0,basePotency:890,applicationDelay:.63,validateAttempt:e=>e.hasResourceAvailable("POLYGLOT"),onConfirm:(e,t)=>e.resources.get("POLYGLOT").consume(1),highlightIf:e=>e.hasResourceAvailable("POLYGLOT")});ln("FIRE_II",18,{aspect:_e.Fire,baseCastTime:3,baseManaCost:1500,basePotency:80,falloff:0,applicationDelay:1.154,autoUpgrade:{trait:"ASPECT_MASTERY_IV",otherSkill:"HIGH_FIRE_II"},onConfirm:(e,t)=>{e.switchToAForUI("ASTRAL_FIRE",3),e.startOrRefreshEnochian()}});ln("BLIZZARD_II",12,{aspect:_e.Ice,baseCastTime:3,baseManaCost:800,basePotency:80,falloff:0,applicationDelay:1.158,autoUpgrade:{trait:"ASPECT_MASTERY_IV",otherSkill:"HIGH_BLIZZARD_II"},onConfirm:(e,t)=>{e.switchToAForUI("UMBRAL_ICE",3),e.startOrRefreshEnochian()}});ln("HIGH_FIRE_II",82,{aspect:_e.Fire,baseCastTime:3,baseManaCost:1500,basePotency:100,falloff:0,applicationDelay:1.154,autoDowngrade:{trait:"ASPECT_MASTERY_IV",otherSkill:"FIRE_II"},onConfirm:(e,t)=>{e.switchToAForUI("ASTRAL_FIRE",3),e.startOrRefreshEnochian()}});ln("HIGH_BLIZZARD_II",82,{aspect:_e.Ice,baseCastTime:3,baseManaCost:800,basePotency:100,falloff:0,applicationDelay:1.158,autoDowngrade:{trait:"ASPECT_MASTERY_IV",otherSkill:"BLIZZARD_II"},onConfirm:(e,t)=>{e.switchToAForUI("UMBRAL_ICE",3),e.startOrRefreshEnochian()}});Us("AMPLIFIER",86,"cd_AMPLIFIER",{applicationDelay:0,cooldown:120,validateAttempt:e=>e.getFireStacks()>0||e.getIceStacks()>0,onApplication:(e,t)=>{e.resources.get("POLYGLOT").gain(1)}});ln("PARADOX",90,{baseCastTime:0,baseManaCost:1600,basePotency:540,applicationDelay:.624,validateAttempt:hS,onConfirm:(e,t)=>{e.resources.get("PARADOX").consume(1),e.getFireStacks()>0?e.gainStatus("FIRESTARTER"):e.getIceStacks()===0&&console.error("cannot cast Paradox outside of AF/UI")},replaceIf:[{newSkill:"BLIZZARD",condition:e=>!e.hasResourceAvailable("PARADOX")&&e.getIceStacks()>0},{newSkill:"FIRE",condition:e=>!e.hasResourceAvailable("PARADOX")&&e.getFireStacks()>0}],startOnHotbar:!1,highlightIf:e=>!0});ln("HIGH_THUNDER",92,{aspect:_e.Lightning,baseCastTime:0,baseManaCost:0,basePotency:150,applicationDelay:.757,validateAttempt:e=>e.hasResourceAvailable("THUNDERHEAD"),onConfirm:cf("HIGH_THUNDER","HIGH_THUNDER"),onApplication:(e,t)=>e.applyDoT("HIGH_THUNDER",t),autoDowngrade:{trait:"THUNDER_MASTERY_III",otherSkill:"THUNDER_III"},highlightIf:e=>e.hasResourceAvailable("THUNDERHEAD")});ln("FLARE_STAR",100,{aspect:_e.Fire,baseCastTime:2,baseManaCost:0,basePotency:500,falloff:.65,applicationDelay:.622,validateAttempt:e=>e.hasResourceAvailable("ASTRAL_SOUL",6),onConfirm:(e,t)=>e.tryConsumeResource("ASTRAL_SOUL",!0),highlightIf:e=>e.hasResourceAvailable("ASTRAL_SOUL",6)});ln("THUNDER_IV",64,{aspect:_e.Lightning,baseCastTime:0,baseManaCost:0,basePotency:80,falloff:0,applicationDelay:1.16,validateAttempt:e=>e.hasResourceAvailable("THUNDERHEAD"),onConfirm:cf("THUNDER_IV","THUNDER_IV"),onApplication:(e,t)=>e.applyDoT("THUNDER_IV",t),autoUpgrade:{trait:"THUNDER_MASTERY_III",otherSkill:"HIGH_THUNDER_II"},highlightIf:e=>e.hasResourceAvailable("THUNDERHEAD")});ln("HIGH_THUNDER_II",92,{aspect:_e.Lightning,baseCastTime:0,baseManaCost:0,basePotency:100,falloff:0,applicationDelay:.8,validateAttempt:e=>e.hasResourceAvailable("THUNDERHEAD"),onConfirm:cf("HIGH_THUNDER_II","HIGH_THUNDER_II"),onApplication:(e,t)=>e.applyDoT("HIGH_THUNDER_II",t),autoDowngrade:{trait:"THUNDER_MASTERY_III",otherSkill:"THUNDER_IV"},highlightIf:e=>e.hasResourceAvailable("THUNDERHEAD")});Us("RETRACE",96,"cd_RETRACE",{applicationDelay:0,cooldown:40,validateAttempt:cb,onConfirm:(e,t)=>{const a=e.resources.get("LEY_LINES");a.enabled=!0,console.assert(a.pendingChange!==void 0,"LL should def have a timer when Retrace is used"),a.pendingChange.timeTillEvent=Math.floor(a.pendingChange.timeTillEvent)+.5},startOnHotbar:!1});const db=["CAUSTIC_BITE","STORMBITE"],AG=Object.keys(_T).filter(e=>!db.includes(e));Object.keys(_T).forEach(e=>Ft(e,`BRD/${ze[e].name}.png`));class mG extends Xt{jobSpecificOtherTargetedBuffViewProps(){return[...db.map(t=>this.makeCommonTimer(t,!1))]}jobSpecificSelfTargetedBuffViewProps(){return[...AG.map(t=>this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){const a=this.state.resources,i=a.get("PITCH_PERFECT"),l=a.get("REPERTOIRE"),r=[{kind:"counter",name:g({en:"Pitch Perfect"}),color:t.brd.pitchPerfect,currentStacks:i.availableAmount(),maxStacks:i.maxValue},{kind:"counter",name:g({en:"Paeon Repertoire"}),color:t.brd.repertoire,currentStacks:l.availableAmount(),maxStacks:l.maxValue}];if(this.state.hasTraitUnlocked("SOUL_VOICE")){const d=a.get("SOUL_VOICE");r.push({kind:"bar",name:g({en:"Soul Voice"}),color:t.brd.soulVoice,progress:d.availableAmount()/d.maxValue,valueString:d.availableAmount().toFixed(0)})}return this.state.hasTraitUnlocked("MINSTRELS_CODA")&&r.push({kind:"coda",name:g({en:"Coda"}),hasWanderers:this.state.hasResourceAvailable("WANDERERS_CODA"),hasMages:this.state.hasResourceAvailable("MAGES_CODA"),hasArmys:this.state.hasResourceAvailable("ARMYS_CODA"),wanderersColor:t.brd.wanderersCoda,magesColor:t.brd.magesCoda,armysColor:t.brd.armysCoda}),r}}const Lt=(e,t,a)=>{qe("BRD",e,t,a??{})};Lt("SOUL_VOICE",100,{warnOnOvercap:!0});Lt("PITCH_PERFECT",3);Lt("REPERTOIRE",4);Lt("WANDERERS_CODA",1,{warnOnOvercap:!0});Lt("MAGES_CODA",1,{warnOnOvercap:!0});Lt("ARMYS_CODA",1,{warnOnOvercap:!0});Lt("ETHOS_REPERTOIRE",4);Lt("MUSE_REPERTOIRE",4);Lt("HAWKS_EYE",1,{timeout:30});Lt("RAGING_STRIKES",1,{timeout:20});Lt("BARRAGE",1,{timeout:10});Lt("ARMYS_MUSE",4,{timeout:10});Lt("ARMYS_ETHOS",4,{timeout:30});Lt("BLAST_ARROW_READY",1,{timeout:10});Lt("RESONANT_ARROW_READY",1,{timeout:30});Lt("RADIANT_ENCORE_READY",1,{timeout:30});Lt("MAGES_BALLAD",1,{timeout:45});Lt("ARMYS_PAEON",1,{timeout:45});Lt("WANDERERS_MINUET",1,{timeout:45});Lt("BATTLE_VOICE",1,{timeout:20});Lt("WARDENS_PAEAN",1,{timeout:30});Lt("TROUBADOUR",1,{timeout:15});Lt("NATURES_MINNE",1,{timeout:15});Lt("RADIANT_FINALE",1,{timeout:20});Lt("RADIANT_CODA",3);Lt("CAUSTIC_BITE",1,{timeout:45});Lt("STORMBITE",1,{timeout:45});const aC=["WANDERERS_MINUET","MAGES_BALLAD","ARMYS_PAEON"],RG=["REFULGENT_ARROW","SHADOWBITE","WIDE_VOLLEY"];class TG extends qt{constructor(t){super(t),this.hasTraitUnlocked("ENHANCED_BLOODLETTER")||this.cooldowns.set(new Ge("cd_HEARTBREAK_SHOT",15,2,2)),this.hasTraitUnlocked("ENHANCED_TROUBADOUR")||this.cooldowns.set(new Ge("cd_TROUBADOUR",120,1,1)),this.registerRecurringEvents([{reportName:Xe("STORMBITE"),groupedEffects:[{effectName:"STORMBITE",appliedBy:["STORMBITE","IRON_JAWS"]}]},{reportName:Xe("CAUSTIC_BITE"),groupedEffects:[{effectName:"CAUSTIC_BITE",appliedBy:["CAUSTIC_BITE","IRON_JAWS"]}]}])}get statusPropsGenerator(){return new mG(this)}jobSpecificAddDamageBuffCovers(t,a){switch(this.hasResourceAvailable("RAGING_STRIKES")&&t.addBuff(x.RagingStrikes),this.hasResourceAvailable("BATTLE_VOICE")&&t.addBuff(x.BattleVoice),this.resources.get("RADIANT_FINALE").availableAmount()){case 1:t.addBuff(x.RadiantFinale1);break;case 2:t.addBuff(x.RadiantFinale2);break;case 3:t.addBuff(x.RadiantFinale3);break}this.hasResourceAvailable("BARRAGE")&&RG.includes(a.name)&&t.addBuff(x.Barrage),this.hasResourceAvailable("WANDERERS_MINUET")?t.addBuff(x.WanderersMinuet):this.hasResourceAvailable("MAGES_BALLAD")?t.addBuff(x.MagesBallad):this.hasResourceAvailable("ARMYS_PAEON")&&t.addBuff(x.ArmysPaeon)}songTick(t){this.resourceIsSong(t)&&this.hasResourceAvailable(t)&&(this.triggersEffect(.8)&&this.gainRepertoireEffect(t),this.resources.timeTillReady(t)>3+_n.epsilon&&this.addEvent(new ve(`${t} tick`,3,()=>{this.songTick(t)})))}gainRepertoireEffect(t){if(t||(this.hasResourceAvailable("WANDERERS_MINUET")?t="WANDERERS_MINUET":this.hasResourceAvailable("MAGES_BALLAD")?t="MAGES_BALLAD":this.hasResourceAvailable("ARMYS_PAEON")&&(t="ARMYS_PAEON")),!!t&&this.resourceIsSong(t)){switch(t){case"WANDERERS_MINUET":this.resources.get("PITCH_PERFECT").gain(1);break;case"MAGES_BALLAD":this.cooldowns.get("cd_HEARTBREAK_SHOT").restore(7.5);break;case"ARMYS_PAEON":this.resources.get("REPERTOIRE").gain(1);break}this.hasTraitUnlocked("SOUL_VOICE")&&this.resources.get("SOUL_VOICE").gain(5)}}resourceIsSong(t){return aC.includes(t)}beginSong(t){if(this.resourceIsSong(t)){if(aC.forEach(a=>this.tryExpireSong(a)),t!=="ARMYS_PAEON"&&this.hasResourceAvailable("ARMYS_ETHOS")){const a=this.resources.get("ETHOS_REPERTOIRE").availableAmount();this.resources.get("MUSE_REPERTOIRE").gain(a),this.tryConsumeResource("ARMYS_ETHOS"),this.tryConsumeResource("ETHOS_REPERTOIRE",!0),this.gainStatus("ARMYS_MUSE")}if(this.hasTraitUnlocked("MINSTRELS_CODA")){const a=t==="WANDERERS_MINUET"?"WANDERERS_CODA":t==="MAGES_BALLAD"?"MAGES_CODA":"ARMYS_CODA";this.resources.get(a).gain(1)}this.resources.get(t).gain(1),this.resources.addResourceEvent({rscType:t,name:"drop "+t,delay:this.getStatusDuration(t),fnOnRsc:a=>this.tryExpireSong(t)}),this.addEvent(new ve(`${t} tick`,3,()=>{this.songTick(t)}))}}tryExpireSong(t){if(this.resourceIsSong(t)&&this.hasResourceAvailable(t)){switch(t){case"WANDERERS_MINUET":this.tryConsumeResource("PITCH_PERFECT",!0);break;case"ARMYS_PAEON":if(this.hasTraitUnlocked("ENHANCED_ARMYS_PAEON")){const a=this.resources.get("REPERTOIRE").availableAmount();a>0&&(this.resources.get("ETHOS_REPERTOIRE").gain(a),this.gainStatus("ARMYS_ETHOS")),this.tryConsumeResource("MUSE_REPERTOIRE",!0)}this.tryConsumeResource("REPERTOIRE",!0);break}this.tryConsumeResource(t)}}getCodaCount(){const t=this.resources.get("WANDERERS_CODA").availableAmount(),a=this.resources.get("MAGES_CODA").availableAmount(),i=this.resources.get("ARMYS_CODA").availableAmount();return t+a+i}getJobPotencyModifiers(t){const a=[];if([{rscType:"WANDERERS_MINUET",mod:X.WanderersMinuet},{rscType:"MAGES_BALLAD",mod:X.MagesBallad},{rscType:"ARMYS_PAEON",mod:X.ArmysPaeon},{rscType:"RAGING_STRIKES",mod:X.RagingStrikes},{rscType:"BATTLE_VOICE",mod:X.BattleVoice}].forEach(l=>{this.hasResourceAvailable(l.rscType)&&a.push(l.mod)}),this.hasResourceAvailable("RADIANT_FINALE")){const l=this.resources.get("RADIANT_CODA").availableAmount();l===3?a.push(X.RadiantFinaleThreeCoda):l===2?a.push(X.RadiantFinaleTwoCoda):l===1&&a.push(X.RadiantFinaleOneCoda)}if(this.hasResourceAvailable("BARRAGE"))switch(t){case"REFULGENT_ARROW":a.push(X.BarrageRefulgent);break;case"SHADOWBITE":a.push(X.BarrageShadowbite);break;case"WIDE_VOLLEY":a.push(X.BarrageWideVolley);break}return a}getSpeedModifier(t){if(t==="ARMYS_PAEON")return this.resources.get("REPERTOIRE").availableAmount()*4;if(t==="ARMYS_MUSE"){const a=this.resources.get("MUSE_REPERTOIRE").availableAmount();return a===4?12:a===3?4:a}return 0}}const Ja=(e,t,a)=>on("BRD",e,t,{...a,recastTime:i=>{let l;i.hasResourceAvailable("ARMYS_PAEON")?l="ARMYS_PAEON":i.hasResourceAvailable("ARMYS_MUSE")&&(l="ARMYS_MUSE");const r=i.getSpeedModifier(l);return i.config.adjustedSksGCD(2.5,r)},jobPotencyModifiers:i=>i.getJobPotencyModifiers(e)}),kl=(e,t,a,i)=>lt("BRD",e,t,a,{...i,jobPotencyModifiers:l=>l.getJobPotencyModifiers(e)}),xs=(e,t,a,i)=>Ke("BRD",e,t,a,i);Ja("HEAVY_SHOT",1,{potency:160,applicationDelay:1.47,onApplication:e=>e.maybeGainProc("HAWKS_EYE",.2),autoUpgrade:{trait:"HEAVY_SHOT_MASTERY",otherSkill:"BURST_SHOT"}});Ja("BURST_SHOT",1,{startOnHotbar:!1,potency:[["NEVER",200],["RANGED_MASTERY",220]],applicationDelay:1.47,onApplication:e=>e.maybeGainProc("HAWKS_EYE",.35)});Ja("REFULGENT_ARROW",70,{potency:[["NEVER",260],["RANGED_MASTERY",280]],applicationDelay:1.47,onConfirm:e=>{e.hasResourceAvailable("BARRAGE")?e.tryConsumeResource("BARRAGE"):e.tryConsumeResource("HAWKS_EYE")},validateAttempt:e=>e.hasResourceAvailable("HAWKS_EYE")||e.hasResourceAvailable("BARRAGE"),highlightIf:e=>e.hasResourceAvailable("HAWKS_EYE")||e.hasResourceAvailable("BARRAGE")});const JR=[{skillName:"CAUSTIC_BITE",dotName:"CAUSTIC_BITE",initialPotency:150,tickPotency:20},{skillName:"STORMBITE",dotName:"STORMBITE",initialPotency:100,tickPotency:25}];JR.forEach(e=>{Ja(e.skillName,1,{potency:e.initialPotency,applicationDelay:1.29,onConfirm:(t,a)=>t.addDoTPotencies({node:a,effectName:e.dotName,skillName:e.skillName,tickPotency:e.tickPotency,speedStat:"sks",modifiers:t.getJobPotencyModifiers(e.skillName)}),onApplication:(t,a)=>{t.applyDoT(e.dotName,a),t.hasTraitUnlocked("BITE_MASTERY_II")&&t.maybeGainProc("HAWKS_EYE",.35)}})});Ja("IRON_JAWS",56,{potency:100,applicationDelay:.67,onConfirm:(e,t)=>{const a=JR.map(i=>e.hasResourceAvailable(i.dotName));e.addEvent(new ve("iron jaws dot refresh",.67,()=>{JR.forEach((i,l)=>{e.refreshDoT({node:t,effectName:i.dotName,tickPotency:i.tickPotency,skillName:"IRON_JAWS",speedStat:"sks",modifiers:e.getJobPotencyModifiers("IRON_JAWS")},a[l])}),e.hasTraitUnlocked("BITE_MASTERY_II")&&e.maybeGainProc("HAWKS_EYE",.35)}))}});Ja("APEX_ARROW",80,{potency:e=>{const t=e.resources.get("SOUL_VOICE"),a=20,i=e.hasTraitUnlocked("RANGED_MASTERY")?120:100,l=e.hasTraitUnlocked("RANGED_MASTERY")?600:500,r=1*(t.availableAmount()-a)/(t.maxValue-a);return(l-i)*r+i},falloff:0,applicationDelay:1.07,onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_APEX_ARROW")&&e.resources.get("SOUL_VOICE").availableAmount()>=80&&e.gainStatus("BLAST_ARROW_READY"),e.tryConsumeResource("SOUL_VOICE",!0)},validateAttempt:e=>e.hasResourceAvailable("SOUL_VOICE",20),highlightIf:e=>e.hasResourceAvailable("SOUL_VOICE",80),replaceIf:[{newSkill:"BLAST_ARROW",condition:e=>e.hasResourceAvailable("BLAST_ARROW_READY")}]});Ja("BLAST_ARROW",86,{startOnHotbar:!1,potency:600,falloff:.5,applicationDelay:1.65,validateAttempt:e=>e.hasResourceAvailable("BLAST_ARROW_READY"),highlightIf:e=>e.hasResourceAvailable("BLAST_ARROW_READY"),onConfirm:e=>e.tryConsumeResource("BLAST_ARROW_READY")});kl("EMYPREAL_ARROW",54,"cd_EMPYREAL_ARROW",{potency:[["NEVER",240],["RANGED_MASTERY",260]],cooldown:15,applicationDelay:1.03,onConfirm:e=>e.gainRepertoireEffect()});kl("BLOODLETTER",12,"cd_HEARTBREAK_SHOT",{potency:130,cooldown:15,maxCharges:3,applicationDelay:1.65,autoUpgrade:{otherSkill:"HEARTBREAK_SHOT",trait:"BLOODLETTER_MASTERY"}});kl("HEARTBREAK_SHOT",92,"cd_HEARTBREAK_SHOT",{startOnHotbar:!1,potency:180,cooldown:15,maxCharges:3,applicationDelay:1.65});kl("SIDEWINDER",60,"cd_SIDEWINDER",{potency:[["NEVER",320],["RANGED_MASTERY",400]],cooldown:60,applicationDelay:.53});const SG=[{skillName:"WANDERERS_MINUET",song:"WANDERERS_MINUET",skillLevel:52,cdName:"cd_WANDERERS_MINUET",replaceIf:[{newSkill:"PITCH_PERFECT",condition:e=>e.hasResourceAvailable("WANDERERS_MINUET")}]},{skillName:"MAGES_BALLAD",song:"MAGES_BALLAD",skillLevel:30,cdName:"cd_MAGES_BALLAD"},{skillName:"ARMYS_PAEON",song:"ARMYS_PAEON",skillLevel:40,cdName:"cd_ARMYS_PAEON"}];SG.forEach(e=>{kl(e.skillName,e.skillLevel,e.cdName,{applicationDelay:0,requiresCombat:!0,cooldown:120,replaceIf:e.replaceIf,onConfirm:t=>t.beginSong(e.song)})});kl("PITCH_PERFECT",52,"cd_PITCH_PERFECT",{startOnHotbar:!1,applicationDelay:.8,cooldown:1,potency:e=>{const t=e.resources.get("PITCH_PERFECT").availableAmount();return t===3?360:t===2?220:100},falloff:.5,onConfirm:e=>e.tryConsumeResource("PITCH_PERFECT",!0),validateAttempt:e=>e.hasResourceAvailable("WANDERERS_MINUET")&&e.hasResourceAvailable("PITCH_PERFECT"),highlightIf:e=>e.hasResourceAvailable("WANDERERS_MINUET")&&e.hasResourceAvailable("PITCH_PERFECT")});xs("BARRAGE",38,"cd_BARRAGE",{rscType:"BARRAGE",applicationDelay:0,cooldown:120,onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_BARRAGE")&&e.gainStatus("RESONANT_ARROW_READY")},replaceIf:[{newSkill:"RESONANT_ARROW",condition:e=>e.hasResourceAvailable("RESONANT_ARROW_READY")}]});Ja("RESONANT_ARROW",96,{startOnHotbar:!1,potency:640,falloff:.5,applicationDelay:1.16,onConfirm:e=>e.tryConsumeResource("RESONANT_ARROW_READY"),validateAttempt:e=>e.hasResourceAvailable("RESONANT_ARROW_READY"),highlightIf:e=>e.hasResourceAvailable("RESONANT_ARROW_READY")});xs("RADIANT_FINALE",90,"cd_RADIANT_FINALE",{rscType:"RADIANT_FINALE",applicationDelay:.62,cooldown:110,onConfirm:e=>{const t=e.getCodaCount();e.resources.get("RADIANT_CODA").overrideCurrentValue(t),e.tryConsumeResource("WANDERERS_CODA"),e.tryConsumeResource("MAGES_CODA"),e.tryConsumeResource("ARMYS_CODA"),e.hasTraitUnlocked("ENHANCED_RADIANT_FINALE")&&e.gainStatus("RADIANT_ENCORE_READY")},validateAttempt:e=>e.getCodaCount()>0,replaceIf:[{newSkill:"RADIANT_ENCORE",condition:e=>e.hasResourceAvailable("RADIANT_ENCORE_READY")}]});Ja("RADIANT_ENCORE",100,{startOnHotbar:!1,potency:e=>{const t=e.resources.get("RADIANT_CODA").availableAmount();return t===3?1e3:t===2?700:600},falloff:.5,applicationDelay:1.96,onConfirm:e=>e.tryConsumeResource("RADIANT_ENCORE_READY"),validateAttempt:e=>e.hasResourceAvailable("RADIANT_ENCORE_READY"),highlightIf:e=>e.hasResourceAvailable("RADIANT_ENCORE_READY")});xs("RAGING_STRIKES",4,"cd_RAGING_STRIKES",{rscType:"RAGING_STRIKES",applicationDelay:.53,cooldown:120});xs("BATTLE_VOICE",50,"cd_BATTLE_VOICE",{rscType:"BATTLE_VOICE",applicationDelay:.62,cooldown:120});Ja("QUICK_NOCK",18,{potency:110,applicationDelay:1.11,onApplication:e=>e.maybeGainProc("HAWKS_EYE",.2),falloff:0,autoUpgrade:{trait:"QUICK_NOCK_MASTERY",otherSkill:"LADONSBITE"}});Ja("LADONSBITE",82,{startOnHotbar:!1,potency:140,falloff:0,applicationDelay:1.11,onApplication:e=>e.maybeGainProc("HAWKS_EYE",.35)});Ja("WIDE_VOLLEY",18,{potency:140,falloff:0,applicationDelay:1.43,onConfirm:e=>{e.hasResourceAvailable("BARRAGE")?e.tryConsumeResource("BARRAGE"):e.tryConsumeResource("HAWKS_EYE")},validateAttempt:e=>e.hasResourceAvailable("HAWKS_EYE")||e.hasResourceAvailable("BARRAGE"),highlightIf:e=>e.hasResourceAvailable("HAWKS_EYE")||e.hasResourceAvailable("BARRAGE"),autoUpgrade:{trait:"WIDE_VOLLEY_MASTERY",otherSkill:"SHADOWBITE"}});Ja("SHADOWBITE",72,{startOnHotbar:!1,potency:200,falloff:0,applicationDelay:1.43,onConfirm:e=>{e.hasResourceAvailable("BARRAGE")?e.tryConsumeResource("BARRAGE"):e.tryConsumeResource("HAWKS_EYE")},validateAttempt:e=>e.hasResourceAvailable("HAWKS_EYE")||e.hasResourceAvailable("BARRAGE"),highlightIf:e=>e.hasResourceAvailable("HAWKS_EYE")||e.hasResourceAvailable("BARRAGE")});kl("RAIN_OF_DEATH",45,"cd_HEARTBREAK_SHOT",{potency:100,cooldown:15,maxCharges:3,falloff:0,applicationDelay:1.65});xs("WARDENS_PAEAN",35,"cd_WARDENS_PAEAN",{rscType:"WARDENS_PAEAN",cooldown:45,applicationDelay:.62});xs("NATURES_MINNE",35,"cd_NATURES_MINNE",{rscType:"NATURES_MINNE",cooldown:120,applicationDelay:.62});kl("REPELLING_SHOT",15,"cd_REPELLING_SHOT",{cooldown:30,animationLock:Wt});xs("TROUBADOUR",56,"cd_TROUBADOUR",{rscType:"TROUBADOUR",maxCharges:1,cooldown:90,applicationDelay:0});Object.keys(gT).filter(e=>!(e==="ESPRIT_PARTNER"||e==="STANDARD_FINISH_PARTNER")).forEach(e=>Ft(e,`DNC/${ze[e].name}.png`));Ft("ESPRIT_PARTNER","DNC/Esprit.png");Ft("STANDARD_FINISH_PARTNER","DNC/Standard Finish.png");const iC=["ESPRIT_TECHNICAL","ESPRIT_PARTNER","STANDARD_FINISH_PARTNER","DANCE_PARTNER"];class IG extends Xt{jobSpecificOtherTargetedBuffViewProps(){return iC.map(t=>t==="DANCE_PARTNER"?this.makeCommonTimerless(t,!1):this.makeCommonTimer(t,!1))}jobSpecificSelfTargetedBuffViewProps(){return[...Object.keys(gT).filter(t=>!iC.includes(t)).map(t=>t==="CLOSED_POSITION"||t==="RISING_RHYTHM"?this.makeCommonTimerless(t):this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){const a=this.state.resources,i=a.get("FEATHER_GAUGE").availableAmount(),l=a.get("STANDARD_DANCE").availableAmount(),r=a.get("TECHNICAL_DANCE").availableAmount(),d=[];if(this.state.hasTraitUnlocked("ESPRIT")){const E=a.get("ESPRIT_GAUGE").availableAmount();d.push({kind:"bar",name:g({en:"Esprit",zh:""}),color:t.dnc.esprit,progress:E/100,valueString:E.toFixed(0)})}return d.push({kind:"counter",name:g({en:"Feathers",zh:""}),color:t.dnc.feathers,currentStacks:i,maxStacks:4},{kind:"dance",name:g({en:"Standard",zh:""}),maxStacks:2,currentStacks:l,emboiteColor:t.dnc.emboite,entrechatColor:t.dnc.entrechat,jeteColor:t.dnc.jete,pirouetteColor:t.dnc.pirouette},{kind:"dance",name:g({en:"Technical",zh:""}),maxStacks:4,currentStacks:r,emboiteColor:t.dnc.emboite,entrechatColor:t.dnc.entrechat,jeteColor:t.dnc.jete,pirouetteColor:t.dnc.pirouette}),d}statusLayoutFn(t){return c.jsxs("div",{children:[c.jsxs("div",{style:{display:"inline-block",verticalAlign:"top",width:"50%",height:"100%"},children:[c.jsxs("span",{style:{display:"block",marginBottom:10},children:[g({en:"time: ",zh:"",ja:""}),`${et.displayTime(t.time,3)} (${t.time.toFixed(3)})`]}),t.resources?c.jsx(ib,{data:{level:t.level,resources:t.resources},style:{height:"17em"}}):void 0]}),c.jsxs("div",{style:{position:"relative",display:"inline-block",float:"right",width:"50%"},children:[t.resourceLocks?c.jsx(ab,{data:t.resourceLocks}):void 0,c.jsx(DE,{data:t.enemyBuffs,style:{marginTop:50,marginBottom:"2em"}}),c.jsx(DE,{data:t.selfBuffs,style:{position:"absolute",right:0,width:"200%"}})]})]})}}const ct=(e,t,a)=>{qe("DNC",e,t,a??{})};ct("ESPRIT_GAUGE",100,{warnOnOvercap:!0});ct("FEATHER_GAUGE",4,{warnOnOvercap:!0});ct("STANDARD_DANCE",2);ct("TECHNICAL_DANCE",4);ct("SILKEN_SYMMETRY",1,{timeout:30});ct("SILKEN_FLOW",1,{timeout:30});ct("FLOURISHING_SYMMETRY",1,{timeout:30});ct("FLOURISHING_FLOW",1,{timeout:30});ct("THREEFOLD_FAN_DANCE",1,{timeout:30,warnOnOvercap:!0});ct("FOURFOLD_FAN_DANCE",1,{timeout:30});ct("FINISHING_MOVE_READY",1,{timeout:30});ct("FLOURISHING_STARFALL",1,{timeout:20});ct("STANDARD_STEP",1,{timeout:15});ct("STANDARD_FINISH",1,{timeout:60});ct("STANDARD_BONUS",2,{timeout:60});ct("ESPRIT",1,{timeout:60});ct("TECHNICAL_STEP",1,{timeout:15});ct("TECHNICAL_FINISH",1,{timeout:20.5});ct("TECHNICAL_BONUS",4,{timeout:20.5});ct("LAST_DANCE_READY",1,{timeout:30});ct("DANCE_OF_THE_DAWN_READY",1,{timeout:30});ct("FLOURISHING_FINISH",1,{timeout:30});ct("CLOSED_POSITION",1,{default:1});ct("DEVILMENT",1,{timeout:20});ct("SHIELD_SAMBA",1,{timeout:15});ct("IMPROVISATION",1,{timeout:15});ct("RISING_RHYTHM",4,{timeout:15});ct("IMPROVISATION_REGEN",1,{timeout:15});ct("IMPROVISED_FINISH",1,{timeout:30});ct("DANCE_PARTNER",1,{default:1});ct("ESPRIT_PARTNER",1,{timeout:60});ct("STANDARD_FINISH_PARTNER",1,{timeout:60});ct("ESPRIT_TECHNICAL",1,{timeout:20});ct("CASCADE_COMBO",1,{timeout:30});ct("WINDMILL_COMBO",1,{timeout:30});const _G=["CASCADE","FOUNTAIN","WINDMILL","BLADESHOWER"],gG=["EMBOITE","ENTRECHAT","JETE","PIROUETTE"];class NG extends qt{constructor(t){super(t),this.hasTraitUnlocked("ESPRIT")||this.resources.set(new sa("ESPRIT_GAUGE",0,0,!0));const a=this.hasTraitUnlocked("ENHANCED_EN_AVANT_II")?3:2;this.cooldowns.set(new Ge("cd_EN_AVANT",30,a,a));const i=this.hasTraitUnlocked("ENHANCED_SHIELD_SAMBA")?90:120;this.cooldowns.set(new Ge("cd_SHIELD_SAMBA",i,1,1)),this.registerRecurringEvents()}get statusPropsGenerator(){return new IG(this)}jobSpecificAddDamageBuffCovers(t,a){this.hasResourceAvailable("TECHNICAL_FINISH")&&t.addBuff(x.TechnicalFinish),this.hasResourceAvailable("DEVILMENT")&&t.addBuff(x.Devilment)}cancelChanneledSkills(){this.tryConsumeResource("IMPROVISATION"),this.tryConsumeResource("RISING_RHYTHM",!0)}processComboStatus(t){if(!_G.includes(t))return;const a=t==="CASCADE",i=t==="WINDMILL";this.setComboState("CASCADE_COMBO",a?1:0),this.setComboState("WINDMILL_COMBO",i?1:0)}getCurrentDanceStatus(){const t=this.hasResourceAvailable("STANDARD_STEP")?"STANDARD_DANCE":"TECHNICAL_DANCE";return this.resources.get(t).availableAmount()}processDanceStatus(t){if(!gG.includes(t))return;const a=this.hasResourceAvailable("STANDARD_STEP")?"STANDARD_DANCE":"TECHNICAL_DANCE";let i=0;switch(t){case"ENTRECHAT":i=1;break;case"JETE":i=2;break;case"PIROUETTE":i=3;break}const l=this.resources.get(a);l.availableAmount()===i&&l.gain(1)}gainProc(t){this.gainStatus(t)}maybeGainProc(t,a=.5){super.maybeGainProc(t,a,!0)}gainProcIfCombo(t,a){this.triggersEffect(.5,!0)&&a&&this.gainProc(t)}gainResource(t,a){this.resources.get(t).gain(a)}maybeGainResource(t,a,i=.5){this.triggersEffect(i,!0)&&this.gainResource(t,a)}simulatePartyEspritGain(){if(this.hasResourceAvailable("ESPRIT_TECHNICAL")){for(let t=0;t<this.resources.get("PARTY_SIZE").availableAmount()-1;t++)this.maybeGainResource("ESPRIT_GAUGE",10,.2);return}this.hasResourceAvailable("ESPRIT_PARTNER")&&this.maybeGainResource("ESPRIT_GAUGE",10,.2)}applyStandardFinish(t){t!==0&&(this.gainProc("STANDARD_FINISH"),this.gainStatus("STANDARD_BONUS",t),this.hasResourceAvailable("DANCE_PARTNER")&&this.gainProc("STANDARD_FINISH_PARTNER"),this.hasTraitUnlocked("ESPRIT")&&(this.gainProc("ESPRIT"),this.hasResourceAvailable("DANCE_PARTNER")&&this.gainProc("ESPRIT_PARTNER")),this.hasTraitUnlocked("ENHANCED_STANDARD_FINISH")&&this.gainProc("LAST_DANCE_READY"))}}const sn=e=>e.hasResourceAvailable("STANDARD_STEP")||e.hasResourceAvailable("TECHNICAL_STEP"),hb={newSkill:"EMBOITE",condition:e=>sn(e)},Eb={newSkill:"ENTRECHAT",condition:e=>sn(e)},fb={newSkill:"JETE",condition:e=>sn(e)},Ab={newSkill:"PIROUETTE",condition:e=>sn(e)},Zt=(e,t,a)=>{const i=ke(l=>{a.potency&&l.simulatePartyEspritGain()},a.onConfirm,l=>l.processComboStatus(e));return on("DNC",e,t,{...a,onConfirm:i,jobPotencyModifiers:l=>{const r=[];if(l.hasResourceAvailable("STANDARD_FINISH")){const d=l.resources.get("STANDARD_BONUS").availableAmount()===2?X.DoubleStandardFinish:X.SingleStandardFinish;r.push(d)}if(l.hasResourceAvailable("TECHNICAL_FINISH")){const d=l.resources.get("TECHNICAL_BONUS").availableAmount(),E=d===4?X.QuadrupleTechnicalFinish:d===3?X.TripleTechnicalFinish:X.SingleTechnicalFinish;r.push(E)}return l.hasResourceAvailable("DEVILMENT")&&r.push(X.Devilment),e==="STARFALL_DANCE"&&r.push(X.AutoCDH),r}})},wi=(e,t,a,i)=>lt("DNC",e,t,a,{...i,onConfirm:i.onConfirm,jobPotencyModifiers:l=>{const r=[];if(l.hasResourceAvailable("STANDARD_FINISH")){const d=l.resources.get("STANDARD_BONUS").availableAmount()===2?X.DoubleStandardFinish:X.SingleStandardFinish;r.push(d)}if(l.hasResourceAvailable("TECHNICAL_FINISH")){const d=l.resources.get("TECHNICAL_BONUS").availableAmount(),E=d===4?X.QuadrupleTechnicalFinish:d===3?X.TripleTechnicalFinish:X.SingleTechnicalFinish;r.push(E)}return l.hasResourceAvailable("DEVILMENT")&&r.push(X.Devilment),r}}),mb=(e,t,a,i)=>Ke("DNC",e,t,a,i);Zt("EMBOITE",15,{startOnHotbar:!1,recastTime:1,onConfirm:e=>e.processDanceStatus("EMBOITE"),highlightIf:e=>sn(e)&&e.getCurrentDanceStatus()===0});Zt("ENTRECHAT",15,{startOnHotbar:!1,recastTime:1,onConfirm:e=>e.processDanceStatus("ENTRECHAT"),highlightIf:e=>sn(e)&&e.getCurrentDanceStatus()===1});Zt("JETE",15,{startOnHotbar:!1,recastTime:1,onConfirm:e=>e.processDanceStatus("JETE"),highlightIf:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===2});Zt("PIROUETTE",15,{startOnHotbar:!1,recastTime:1,onConfirm:e=>e.processDanceStatus("PIROUETTE"),highlightIf:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===3});Zt("CASCADE",1,{replaceIf:[hb],potency:[["NEVER",200],["DYNAMIC_DANCER",220]],recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.8,onConfirm:e=>{e.maybeGainProc("SILKEN_SYMMETRY"),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",5)}});Zt("FOUNTAIN",2,{replaceIf:[Eb],potency:[["NEVER",100],["DYNAMIC_DANCER",120]],combo:{potency:[["NEVER",260],["DYNAMIC_DANCER",280]],resource:"CASCADE_COMBO",resourceValue:1},recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.98,onConfirm:e=>{e.gainProcIfCombo("SILKEN_FLOW",e.hasResourceExactly("CASCADE_COMBO",1)),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",5)},highlightIf:e=>e.resources.get("CASCADE_COMBO").availableAmount()===1});Zt("REVERSE_CASCADE",20,{replaceIf:[fb],potency:[["NEVER",260],["DYNAMIC_DANCER",280]],recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("SILKEN_SYMMETRY")||e.hasResourceAvailable("FLOURISHING_SYMMETRY"),onConfirm:e=>{e.hasResourceAvailable("SILKEN_SYMMETRY")?e.tryConsumeResource("SILKEN_SYMMETRY"):e.tryConsumeResource("FLOURISHING_SYMMETRY"),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",10),e.maybeGainResource("FEATHER_GAUGE",1)},highlightIf:e=>e.hasResourceAvailable("SILKEN_SYMMETRY")||e.hasResourceAvailable("FLOURISHING_SYMMETRY")});Zt("FOUNTAINFALL",40,{replaceIf:[Ab],potency:[["NEVER",320],["DYNAMIC_DANCER",340]],recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:1.21,validateAttempt:e=>e.hasResourceAvailable("SILKEN_FLOW")||e.hasResourceAvailable("FLOURISHING_FLOW"),onConfirm:e=>{e.hasResourceAvailable("SILKEN_FLOW")?e.tryConsumeResource("SILKEN_FLOW"):e.tryConsumeResource("FLOURISHING_FLOW"),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",10),e.maybeGainResource("FEATHER_GAUGE",1)},highlightIf:e=>e.hasResourceAvailable("SILKEN_FLOW")||e.hasResourceAvailable("FLOURISHING_FLOW")});wi("FAN_DANCE",30,"cd_FAN_DANCE",{potency:[["NEVER",150],["DYNAMIC_DANCER",180]],cooldown:1,applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("FEATHER_GAUGE")&&!sn(e),highlightIf:e=>e.hasResourceAvailable("FEATHER_GAUGE"),onConfirm:e=>{e.tryConsumeResource("FEATHER_GAUGE"),e.maybeGainProc("THREEFOLD_FAN_DANCE")}});Zt("SABER_DANCE",76,{replaceIf:[{newSkill:"DANCE_OF_THE_DAWN",condition:e=>e.hasResourceAvailable("DANCE_OF_THE_DAWN_READY")&&e.hasResourceAvailable("ESPRIT_GAUGE",50)}],potency:[["NEVER",500],["DYNAMIC_DANCER",520]],recastTime:e=>e.config.adjustedSksGCD(),falloff:.6,applicationDelay:.44,validateAttempt:e=>e.hasResourceAvailable("ESPRIT_GAUGE",50)&&!sn(e),highlightIf:e=>e.hasResourceAvailable("ESPRIT_GAUGE",50),onConfirm:e=>e.resources.get("ESPRIT_GAUGE").consume(50)});Zt("DANCE_OF_THE_DAWN",100,{startOnHotbar:!1,potency:1e3,recastTime:e=>e.config.adjustedSksGCD(),falloff:.6,applicationDelay:.44,validateAttempt:e=>e.hasResourceAvailable("ESPRIT_GAUGE",50)&&!sn(e),highlightIf:e=>e.hasResourceAvailable("ESPRIT_GAUGE",50),onConfirm:e=>{e.resources.get("ESPRIT_GAUGE").consume(50),e.tryConsumeResource("DANCE_OF_THE_DAWN_READY")}});Zt("LAST_DANCE",92,{potency:520,recastTime:e=>e.config.adjustedSksGCD(),falloff:.6,applicationDelay:1.26,validateAttempt:e=>e.hasResourceAvailable("LAST_DANCE_READY")&&!sn(e),highlightIf:e=>e.hasResourceAvailable("LAST_DANCE_READY"),onConfirm:e=>e.tryConsumeResource("LAST_DANCE_READY")});Zt("STANDARD_STEP",15,{replaceIf:[{newSkill:"STANDARD_FINISH",condition:e=>e.hasResourceAvailable("STANDARD_STEP")&&e.getCurrentDanceStatus()===0},{newSkill:"SINGLE_STANDARD_FINISH",condition:e=>e.hasResourceAvailable("STANDARD_STEP")&&e.getCurrentDanceStatus()===1},{newSkill:"DOUBLE_STANDARD_FINISH",condition:e=>e.hasResourceAvailable("STANDARD_STEP")&&e.getCurrentDanceStatus()===2},{newSkill:"FINISHING_MOVE",condition:e=>e.hasResourceAvailable("FINISHING_MOVE_READY")}],validateAttempt:e=>!sn(e),onConfirm:e=>e.gainProc("STANDARD_STEP"),recastTime:1.5,secondaryCooldown:{cdName:"cd_STANDARD_STEP",cooldown:30,maxCharges:1}});Zt("FINISHING_MOVE",96,{startOnHotbar:!1,potency:850,recastTime:e=>e.config.adjustedSksGCD(),falloff:.6,applicationDelay:2.05,onConfirm:e=>{e.applyStandardFinish(2),e.tryConsumeResource("FINISHING_MOVE_READY")},secondaryCooldown:{cdName:"cd_STANDARD_STEP",cooldown:30,maxCharges:1},validateAttempt:e=>e.hasResourceAvailable("FINISHING_MOVE_READY")&&!sn(e),highlightIf:e=>e.hasResourceAvailable("FINISHING_MOVE_READY")});const pG=[{skill:"STANDARD_FINISH",potency:360},{skill:"SINGLE_STANDARD_FINISH",potency:540},{skill:"DOUBLE_STANDARD_FINISH",potency:[["NEVER",800],["DYNAMIC_DANCER",850]]}];pG.forEach(e=>{Zt(e.skill,15,{assetPath:"DNC/Standard Finish.png",startOnHotbar:!1,potency:e.potency,falloff:.6,applicationDelay:.54,onConfirm:t=>{const a=t.getCurrentDanceStatus();t.tryConsumeResource("STANDARD_STEP"),t.tryConsumeResource("STANDARD_DANCE",!0),a!==0&&t.applyStandardFinish(a)},recastTime:1.5,validateAttempt:t=>t.hasResourceAvailable("STANDARD_STEP"),highlightIf:t=>t.hasResourceAvailable("STANDARD_STEP")&&t.getCurrentDanceStatus()===2})});wi("FLOURISH",72,"cd_FLOURISH",{cooldown:60,requiresCombat:!0,validateAttempt:e=>!sn(e),onConfirm:e=>{e.gainProc("FLOURISHING_SYMMETRY"),e.gainProc("FLOURISHING_FLOW"),e.gainProc("THREEFOLD_FAN_DANCE"),e.hasTraitUnlocked("ENHANCED_FLOURISH")&&e.gainProc("FOURFOLD_FAN_DANCE"),e.hasTraitUnlocked("ENHANCED_FLOURISH_II")&&e.gainProc("FINISHING_MOVE_READY")}});wi("FAN_DANCE_III",66,"cd_FAN_DANCE_III",{potency:[["NEVER",200],["DYNAMIC_DANCER",220]],cooldown:1,falloff:.6,applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("THREEFOLD_FAN_DANCE")&&!sn(e),highlightIf:e=>e.hasResourceAvailable("THREEFOLD_FAN_DANCE"),onConfirm:e=>e.tryConsumeResource("THREEFOLD_FAN_DANCE")});wi("FAN_DANCE_IV",86,"cd_FAN_DANCE_IV",{potency:[["NEVER",300],["DYNAMIC_DANCER",420]],falloff:.6,cooldown:1,applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("FOURFOLD_FAN_DANCE")&&!sn(e),highlightIf:e=>e.hasResourceAvailable("FOURFOLD_FAN_DANCE"),onConfirm:e=>e.tryConsumeResource("FOURFOLD_FAN_DANCE")});Zt("TECHNICAL_STEP",70,{replaceIf:[{newSkill:"TECHNICAL_FINISH",condition:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===0},{newSkill:"SINGLE_TECHNICAL_FINISH",condition:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===1},{newSkill:"DOUBLE_TECHNICAL_FINISH",condition:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===2},{newSkill:"TRIPLE_TECHNICAL_FINISH",condition:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===3},{newSkill:"QUADRUPLE_TECHNICAL_FINISH",condition:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===4},{newSkill:"TILLANA",condition:e=>e.hasResourceAvailable("FLOURISHING_FINISH")}],validateAttempt:e=>!sn(e),onConfirm:e=>e.gainProc("TECHNICAL_STEP"),recastTime:1.5,falloff:.75,secondaryCooldown:{cdName:"cd_TECHNICAL_STEP",cooldown:120,maxCharges:1}});Zt("TILLANA",82,{startOnHotbar:!1,potency:600,recastTime:e=>e.config.adjustedSksGCD(),falloff:.6,applicationDelay:.84,onConfirm:e=>{e.gainResource("ESPRIT_GAUGE",50),e.tryConsumeResource("FLOURISHING_FINISH")},validateAttempt:e=>e.hasResourceAvailable("FLOURISHING_FINISH")&&!sn(e),highlightIf:e=>e.hasResourceAvailable("FLOURISHING_FINISH")});Zt("TECHNICAL_FINISH",70,{startOnHotbar:!1,potency:350,applicationDelay:.54,onConfirm:e=>{e.tryConsumeResource("TECHNICAL_STEP"),e.tryConsumeResource("TECHNICAL_DANCE",!0)},recastTime:1.5,validateAttempt:e=>e.hasResourceAvailable("TECHNICAL_STEP")});const CG=[{skill:"TECHNICAL_FINISH",potency:350},{skill:"SINGLE_TECHNICAL_FINISH",potency:540},{skill:"DOUBLE_TECHNICAL_FINISH",potency:720},{skill:"TRIPLE_TECHNICAL_FINISH",potency:900},{skill:"QUADRUPLE_TECHNICAL_FINISH",potency:[["NEVER",1200],["DYNAMIC_DANCER",1300]]}];CG.forEach(e=>{Zt(e.skill,70,{assetPath:"DNC/Technical Finish.png",startOnHotbar:!1,potency:e.potency,applicationDelay:.54,falloff:.6,onConfirm:t=>{const a=t.getCurrentDanceStatus();t.tryConsumeResource("TECHNICAL_STEP"),t.tryConsumeResource("TECHNICAL_DANCE",!0),a!==0&&(t.gainProc("TECHNICAL_FINISH"),t.hasTraitUnlocked("ESPRIT")&&t.gainProc("ESPRIT_TECHNICAL"),t.gainStatus("TECHNICAL_BONUS",a),t.hasTraitUnlocked("ENHANCED_TECHNICAL_FINISH")&&t.gainProc("FLOURISHING_FINISH"),t.hasTraitUnlocked("ENHANCED_TECHNICAL_FINISH_II")&&t.gainProc("DANCE_OF_THE_DAWN_READY"))},recastTime:1.5,validateAttempt:t=>t.hasResourceAvailable("TECHNICAL_STEP"),highlightIf:t=>t.hasResourceAvailable("TECHNICAL_STEP")&&t.getCurrentDanceStatus()===4})});mb("DEVILMENT",62,"cd_DEVILMENT",{replaceIf:[{newSkill:"STARFALL_DANCE",condition:e=>e.hasResourceAvailable("FLOURISHING_STARFALL")}],rscType:"DEVILMENT",applicationDelay:0,cooldown:120,validateAttempt:e=>!sn(e),onApplication:e=>{e.hasTraitUnlocked("ENHANCED_DEVILMENT")&&e.gainProc("FLOURISHING_STARFALL")}});Zt("STARFALL_DANCE",90,{startOnHotbar:!1,potency:600,recastTime:e=>e.config.adjustedSksGCD(),falloff:.75,applicationDelay:.89,validateAttempt:e=>e.hasResourceAvailable("FLOURISHING_STARFALL")&&!sn(e),highlightIf:e=>e.hasResourceAvailable("FLOURISHING_STARFALL"),onConfirm:e=>e.tryConsumeResource("FLOURISHING_STARFALL")});Zt("WINDMILL",15,{replaceIf:[hb],potency:120,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.62,onConfirm:e=>{e.maybeGainProc("SILKEN_SYMMETRY"),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",5)}});Zt("BLADESHOWER",25,{replaceIf:[Eb],potency:100,recastTime:e=>e.config.adjustedSksGCD(),combo:{potency:160,resource:"WINDMILL_COMBO",resourceValue:1},falloff:0,applicationDelay:.62,onConfirm:e=>{e.gainProcIfCombo("SILKEN_FLOW",e.hasResourceExactly("WINDMILL_COMBO",1)),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",5)},highlightIf:e=>e.resources.get("WINDMILL_COMBO").availableAmount()===1});Zt("RISING_WINDMILL",35,{replaceIf:[fb],potency:160,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("SILKEN_SYMMETRY")||e.hasResourceAvailable("FLOURISHING_SYMMETRY"),onConfirm:e=>{e.hasResourceAvailable("SILKEN_SYMMETRY")?e.tryConsumeResource("SILKEN_SYMMETRY"):e.tryConsumeResource("FLOURISHING_SYMMETRY"),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",10),e.maybeGainResource("FEATHER_GAUGE",1)},highlightIf:e=>e.hasResourceAvailable("SILKEN_SYMMETRY")||e.hasResourceAvailable("FLOURISHING_SYMMETRY")});Zt("BLOODSHOWER",45,{replaceIf:[Ab],potency:200,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("SILKEN_FLOW")||e.hasResourceAvailable("FLOURISHING_FLOW"),onConfirm:e=>{e.hasResourceAvailable("SILKEN_FLOW")?e.tryConsumeResource("SILKEN_FLOW"):e.tryConsumeResource("FLOURISHING_FLOW"),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",10),e.maybeGainResource("FEATHER_GAUGE",1)},highlightIf:e=>e.hasResourceAvailable("SILKEN_FLOW")||e.hasResourceAvailable("FLOURISHING_FLOW")});wi("FAN_DANCE_II",30,"cd_FAN_DANCE_II",{potency:100,cooldown:1,falloff:0,applicationDelay:.54,validateAttempt:e=>e.hasResourceAvailable("FEATHER_GAUGE")&&!sn(e),highlightIf:e=>e.hasResourceAvailable("FEATHER_GAUGE"),onConfirm:e=>{e.tryConsumeResource("FEATHER_GAUGE"),e.maybeGainProc("THREEFOLD_FAN_DANCE")}});wi("CURING_WALTZ",52,"cd_CURING_WALTZ",{cooldown:60,applicationDelay:.58});wi("IMPROVISATION",80,"cd_IMPROVISATION",{replaceIf:[{newSkill:"IMPROVISED_FINISH",condition:e=>e.hasResourceAvailable("IMPROVISATION")}],cooldown:120,applicationDelay:.89,validateAttempt:e=>!sn(e),onConfirm:e=>{e.gainProc("IMPROVISATION"),e.gainProc("IMPROVISATION_REGEN");const t=()=>{e.hasResourceAvailable("IMPROVISATION")&&(e.resources.get("RISING_RHYTHM").gain(1),e.gainProc("IMPROVISATION_REGEN"),e.resources.addResourceEvent({rscType:"RISING_RHYTHM",name:"rising rhythm tic",delay:3,fnOnRsc:a=>t()}))};e.resources.addResourceEvent({rscType:"RISING_RHYTHM",name:"rising rhythm tic",delay:3,fnOnRsc:a=>t()}),e.resources.addResourceEvent({rscType:"IMPROVISATION",name:"improvisation timeout",delay:Vt("DNC","IMPROVISATION").maxTimeout,fnOnRsc:a=>{a.consume(1),e.tryConsumeResource("RISING_RHYTHM",!0)}})}});wi("IMPROVISED_FINISH",80,"cd_IMPROVISED_FINISH",{startOnHotbar:!1,cooldown:120,applicationDelay:.71,validateAttempt:e=>!sn(e),onConfirm:e=>e.gainProc("IMPROVISED_FINISH")});wi("EN_AVANT",50,"cd_EN_AVANT",{cooldown:30,maxCharges:3,animationLock:Wt});mb("SHIELD_SAMBA",56,"cd_SHIELD_SAMBA",{rscType:"SHIELD_SAMBA",maxCharges:1,cooldown:90,applicationDelay:0});wi("CLOSED_POSITION",60,"cd_CLOSED_POSITION",{replaceIf:[{newSkill:"ENDING",condition:e=>e.hasResourceAvailable("CLOSED_POSITION")}],cooldown:30,maxCharges:1,applicationDelay:0,onConfirm:e=>{e.resources.get("CLOSED_POSITION").gain(1),e.resources.get("DANCE_PARTNER").gain(1)},validateAttempt:e=>!e.hasResourceAvailable("CLOSED_POSITION"),secondaryCooldown:{cdName:"cd_ENDING",cooldown:1,maxCharges:1}});wi("ENDING",60,"cd_ENDING",{startOnHotbar:!1,cooldown:1,maxCharges:1,applicationDelay:0,onConfirm:e=>{e.tryConsumeResource("CLOSED_POSITION",!0),e.tryConsumeResource("DANCE_PARTNER",!0),e.tryConsumeResource("STANDARD_FINISH_PARTNER",!0),e.tryConsumeResource("ESPRIT_PARTNER",!0)},secondaryCooldown:{cdName:"cd_CLOSED_POSITION",cooldown:30,maxCharges:1}});const Rb=["CHAOS_THRUST_DOT","CHAOTIC_SPRING_DOT"],OG=Object.keys(NT).filter(e=>!Rb.includes(e));Object.keys(NT).forEach(e=>Ft(e,`DRG/${ze[e].name}.png`));class bG extends Xt{jobSpecificOtherTargetedBuffViewProps(){return[...Rb.map(t=>this.makeCommonTimer(t,!1))]}jobSpecificSelfTargetedBuffViewProps(){return OG.map(t=>this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){var T,S,I,C;const a=this.state.resources,i=a.get("DRG_CHAOS_COMBO_TRACKER"),l=a.get("DRG_HEAVENS_COMBO_TRACKER"),r=a.get("DRG_AOE_COMBO_TRACKER"),d=a.get("FIRSTMINDS_FOCUS").availableAmount(),E=a.get("LIFE_OF_THE_DRAGON"),h=E.available(1)?(T=E.pendingChange)==null?void 0:T.timeTillEvent:void 0,A=i.available(1)?(S=i.pendingChange)==null?void 0:S.timeTillEvent:l.available(1)?(I=l.pendingChange)==null?void 0:I.timeTillEvent:r.available(1)?(C=r.pendingChange)==null?void 0:C.timeTillEvent:void 0;return[{kind:"bar",name:g({en:"Combo Timer",zh:""}),color:t.drg.drgComboTimer,progress:A?A/30:0,valueString:(A==null?void 0:A.toFixed(3))??"N/A"},{kind:"bar",name:g({en:"Life of the Dragon"}),color:t.drg.lifeOfTheDragonBar,progress:h?h/20:0,valueString:h?h.toFixed(3):"N/A"},{kind:"counter",name:g({en:"Firstmind's Focus"}),color:t.drg.firstmindsFocusStacks,currentStacks:d,maxStacks:2}]}}const ea=(e,t,a)=>{qe("DRG",e,t,a??{})};ea("POWER_SURGE",1,{timeout:30});ea("LIFE_SURGE",1,{timeout:5.52,warnOnTimeout:!0});ea("ENHANCED_PIERCING_TALON",1,{timeout:15.62});ea("LANCE_CHARGE",1,{timeout:20});ea("DIVE_READY",1,{timeout:15.46,warnOnTimeout:!0});ea("CHAOS_THRUST_DOT",1,{timeout:24});ea("BATTLE_LITANY",1,{timeout:20});ea("LIFE_OF_THE_DRAGON",1,{timeout:20});ea("NASTROND_READY",1,{timeout:20,warnOnTimeout:!0});ea("DRACONIAN_FIRE",1,{timeout:30});ea("CHAOTIC_SPRING_DOT",1,{timeout:24});ea("FIRSTMINDS_FOCUS",2,{warnOnOvercap:!0});ea("DRAGONS_FLIGHT",1,{timeout:30.79});ea("STARCROSS_READY",1,{timeout:20,warnOnTimeout:!0});ea("DRG_CHAOS_COMBO_TRACKER",4,{timeout:30});ea("DRG_HEAVENS_COMBO_TRACKER",4,{timeout:30});ea("DRG_AOE_COMBO_TRACKER",2,{timeout:30});const DG=["DOOM_SPIKE","SONIC_THRUST","COERTHAN_TORMENT","DRACONIAN_FURY"],oC=new Map([["DISEMBOWEL",1],["SPIRAL_BLOW",1],["CHAOS_THRUST",2],["CHAOTIC_SPRING",2],["WHEELING_THRUST",3]]),lC=new Map([["VORPAL_THRUST",1],["LANCE_BARRAGE",1],["FULL_THRUST",2],["HEAVENS_THRUST",2],["FANG_AND_CLAW",3]]);class yG extends qt{constructor(t){super(t);const a=this.hasTraitUnlocked("ENHANCED_WINGED_GLIDE")?2:1,i=this.hasTraitUnlocked("ENHANCED_LIFE_SURGE")?2:1;[new Ge("cd_WINGED_GLIDE",60,a,a),new Ge("cd_LIFE_SURGE",40,i,i)].forEach(l=>this.cooldowns.set(l)),this.registerRecurringEvents([{groupedEffects:[{effectName:"CHAOS_THRUST_DOT",appliedBy:["CHAOS_THRUST"]}]},{groupedEffects:[{effectName:"CHAOTIC_SPRING_DOT",appliedBy:["CHAOTIC_SPRING"]}]}])}get statusPropsGenerator(){return new bG(this)}jobSpecificAddDamageBuffCovers(t,a){this.hasResourceAvailable("POWER_SURGE")&&t.addBuff(x.PowerSurge),this.hasResourceAvailable("LANCE_CHARGE")&&t.addBuff(x.LanceCharge),this.hasResourceAvailable("LIFE_OF_THE_DRAGON")&&t.addBuff(x.LifeOfTheDragon),this.hasResourceAvailable("BATTLE_LITANY")&&t.addBuff(x.BattleLitany),a.name==="PIERCING_TALON"&&this.hasResourceAvailable("ENHANCED_PIERCING_TALON")&&t.addBuff(x.EnhancedPiercingTalon),a.cdName==="cd_GCD"&&this.hasResourceAvailable("LIFE_SURGE")&&t.addBuff(x.LifeSurge)}pushUniversalModifiers(t){this.hasResourceAvailable("POWER_SURGE")&&t.push(X.PowerSurge),this.hasResourceAvailable("LANCE_CHARGE")&&t.push(X.LanceCharge),this.hasResourceAvailable("LIFE_OF_THE_DRAGON")&&t.push(X.LifeOfTheDragon),this.hasResourceAvailable("BATTLE_LITANY")&&t.push(X.BattleLitany)}fixDRGComboState(t){if(this.tryConsumeResource("DRACONIAN_FIRE",!0),DG.includes(t)){this.tryConsumeResource("DRG_CHAOS_COMBO_TRACKER",!0),this.tryConsumeResource("DRG_HEAVENS_COMBO_TRACKER",!0);let a=0;t==="DOOM_SPIKE"||t==="DRACONIAN_FURY"?a=1:t==="SONIC_THRUST"&&this.hasResourceExactly("DRG_AOE_COMBO_TRACKER",1)&&(a=2),this.setComboState("DRG_AOE_COMBO_TRACKER",a);return}if(this.tryConsumeResource("DRG_AOE_COMBO_TRACKER",!0),t==="TRUE_THRUST"||t==="RAIDEN_THRUST"){this.tryConsumeResource("DRG_CHAOS_COMBO_TRACKER",!0),this.tryConsumeResource("DRG_HEAVENS_COMBO_TRACKER",!0),this.setComboState("DRG_CHAOS_COMBO_TRACKER",1),this.setComboState("DRG_HEAVENS_COMBO_TRACKER",1);return}if(oC.has(t)){const a=oC.get(t);this.tryConsumeResource("DRG_HEAVENS_COMBO_TRACKER",!0),this.setComboState("DRG_CHAOS_COMBO_TRACKER",this.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",a)?a+1:0)}else if(lC.has(t)){const a=lC.get(t);this.tryConsumeResource("DRG_CHAOS_COMBO_TRACKER",!0),this.setComboState("DRG_HEAVENS_COMBO_TRACKER",this.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",a)?a+1:0)}else t==="DRAKESBANE"&&(this.tryConsumeResource("DRG_HEAVENS_COMBO_TRACKER",!0),this.tryConsumeResource("DRG_CHAOS_COMBO_TRACKER",!0))}checkCombo(t){return this.hasResourceAvailable(t)}gainScale(t){this.resources.get("FIRSTMINDS_FOCUS").gain(t)}refreshBuff(t,a){this.addEvent(new ve("gain buff",a,()=>{this.resources.get(t).gain(1),this.enqueueResourceDrop(t)}))}}const Fn=(e,t,a)=>{const i=ke(a.onConfirm,l=>{e!=="PIERCING_TALON"&&l.fixDRGComboState(e),l.tryConsumeResource("LIFE_SURGE")});return on("DRG",e,t,{...a,onConfirm:i,recastTime:l=>l.config.adjustedSksGCD(),jobPotencyModifiers:l=>{var d;const r=((d=a.jobPotencyModifiers)==null?void 0:d.call(a,l))??[];return e==="PIERCING_TALON"&&l.hasResourceAvailable("ENHANCED_PIERCING_TALON")&&r.push(X.EnhancedPiercingTalon),l.pushUniversalModifiers(r),l.hasResourceAvailable("LIFE_SURGE")&&r.push(X.LifeSurge),r}})},_i=(e,t,a,i)=>lt("DRG",e,t,a,{...i,onConfirm:i.onConfirm,jobPotencyModifiers:l=>{const r=[];return l.pushUniversalModifiers(r),r}}),vG={newSkill:"DRAKESBANE",condition:e=>e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",4)},MG={newSkill:"DRAKESBANE",condition:e=>e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",4)},LG={newSkill:"RAIDEN_THRUST",condition:e=>e.resources.get("DRACONIAN_FIRE").available(1)},HG={newSkill:"TRUE_THRUST",condition:e=>!e.resources.get("DRACONIAN_FIRE").available(1)},UG={newSkill:"DRACONIAN_FURY",condition:e=>e.resources.get("DRACONIAN_FIRE").available(1)},xG={newSkill:"DOOM_SPIKE",condition:e=>!e.resources.get("DRACONIAN_FIRE").available(1)},kG={newSkill:"STARCROSS",condition:e=>e.hasResourceAvailable("STARCROSS_READY")&&e.hasResourceAvailable("LIFE_OF_THE_DRAGON")},PG={newSkill:"STARDIVER",condition:e=>!e.hasResourceAvailable("STARCROSS_READY")};Fn("PIERCING_TALON",15,{potency:[["NEVER",150],["LANCE_MASTERY",200]],applicationDelay:.85,onConfirm:e=>{e.tryConsumeResource("ENHANCED_PIERCING_TALON")},highlightIf:e=>e.hasResourceAvailable("ENHANCED_PIERCING_TALON")});Fn("TRUE_THRUST",1,{replaceIf:[LG],potency:[["NEVER",200],["LANCE_MASTERY",230]],applicationDelay:.76});Fn("RAIDEN_THRUST",76,{startOnHotbar:!1,replaceIf:[HG],potency:[["NEVER",280],["MELEE_MASTERY_DRG",320]],applicationDelay:.62,validateAttempt:e=>e.resources.get("DRACONIAN_FIRE").available(1),highlightIf:e=>e.resources.get("DRACONIAN_FIRE").available(1),onConfirm:e=>{e.hasTraitUnlocked("LANCE_MASTERY_III")&&e.gainScale(1)}});Fn("DISEMBOWEL",18,{autoUpgrade:{trait:"LANCE_MASTERY_IV",otherSkill:"SPIRAL_BLOW"},applicationDelay:1.65,potency:[["NEVER",100],["LANCE_MASTERY",140]],combo:{potency:[["NEVER",220],["LANCE_MASTERY",250]],resource:"DRG_CHAOS_COMBO_TRACKER",resourceValue:1},onConfirm:e=>{e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",1)&&(e.resources.get("POWER_SURGE").gain(1),e.enqueueResourceDrop("POWER_SURGE",31.63))},highlightIf:e=>e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",1)});Fn("SPIRAL_BLOW",96,{autoDowngrade:{trait:"LANCE_MASTERY_IV",otherSkill:"DISEMBOWEL"},applicationDelay:1.38,potency:140,combo:{potency:[["NEVER",300]],resource:"DRG_CHAOS_COMBO_TRACKER",resourceValue:1},onConfirm:e=>{e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",1)&&(e.resources.get("POWER_SURGE").gain(1),e.enqueueResourceDrop("POWER_SURGE",31.38))},highlightIf:e=>e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",1)});Fn("CHAOS_THRUST",50,{autoUpgrade:{trait:"LANCE_MASTERY_II",otherSkill:"CHAOTIC_SPRING"},applicationDelay:1.65,potency:100,combo:{potency:220,resource:"DRG_CHAOS_COMBO_TRACKER",resourceValue:2},positional:{potency:140,comboPotency:260,location:"rear"},onConfirm:(e,t)=>{if(e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",2)){const a=[];e.pushUniversalModifiers(a),e.addDoTPotencies({node:t,effectName:"CHAOS_THRUST_DOT",skillName:"CHAOS_THRUST",tickPotency:40,speedStat:"sks",modifiers:a}),e.addEvent(new ve("apply chaos thrust dot",1.65,()=>{e.applyDoT("CHAOS_THRUST_DOT",t)}))}},highlightIf:e=>e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",2)});Fn("CHAOTIC_SPRING",86,{autoDowngrade:{trait:"LANCE_MASTERY_II",otherSkill:"CHAOS_THRUST"},applicationDelay:.45,potency:140,combo:{potency:300,resource:"DRG_CHAOS_COMBO_TRACKER",resourceValue:2},positional:{potency:180,comboPotency:340,location:"rear"},onConfirm:(e,t)=>{if(e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",2)){const a=[];e.pushUniversalModifiers(a),e.addDoTPotencies({node:t,effectName:"CHAOTIC_SPRING_DOT",skillName:"CHAOTIC_SPRING",tickPotency:45,speedStat:"sks",modifiers:a}),e.addEvent(new ve("apply chaotic spring dot",.45,()=>{e.applyDoT("CHAOTIC_SPRING_DOT",t)}))}},highlightIf:e=>e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",2)});Fn("WHEELING_THRUST",58,{replaceIf:[vG],applicationDelay:.67,potency:[["NEVER",100],["MELEE_MASTERY_DRG",140]],combo:{potency:[["NEVER",260],["MELEE_MASTERY_DRG",300]],resource:"DRG_CHAOS_COMBO_TRACKER",resourceValue:3},positional:{potency:[["NEVER",140],["MELEE_MASTERY_DRG",180]],comboPotency:[["NEVER",300],["MELEE_MASTERY_DRG",340]],location:"rear"},highlightIf:e=>e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",3)});Fn("VORPAL_THRUST",4,{autoUpgrade:{trait:"LANCE_MASTERY_IV",otherSkill:"LANCE_BARRAGE"},applicationDelay:1.02,potency:[["NEVER",100],["LANCE_MASTERY",130]],combo:{potency:[["NEVER",250],["LANCE_MASTERY",280]],resource:"DRG_HEAVENS_COMBO_TRACKER",resourceValue:1},highlightIf:e=>e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",1)});Fn("LANCE_BARRAGE",96,{autoDowngrade:{trait:"LANCE_MASTERY_IV",otherSkill:"VORPAL_THRUST"},applicationDelay:.94,potency:130,combo:{potency:340,resource:"DRG_HEAVENS_COMBO_TRACKER",resourceValue:1},highlightIf:e=>e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",1)});Fn("FULL_THRUST",26,{autoUpgrade:{trait:"LANCE_MASTERY_II",otherSkill:"HEAVENS_THRUST"},applicationDelay:1.12,potency:100,combo:{potency:380,resource:"DRG_HEAVENS_COMBO_TRACKER",resourceValue:2},highlightIf:e=>e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",2)});Fn("HEAVENS_THRUST",86,{autoDowngrade:{trait:"LANCE_MASTERY_II",otherSkill:"FULL_THRUST"},applicationDelay:.71,potency:[["NEVER",100],["MELEE_MASTERY_DRG",160]],combo:{potency:[["NEVER",400],["MELEE_MASTERY_DRG",460]],resource:"DRG_HEAVENS_COMBO_TRACKER",resourceValue:2},highlightIf:e=>e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",2)});Fn("FANG_AND_CLAW",56,{replaceIf:[MG],applicationDelay:.62,potency:[["NEVER",100],["MELEE_MASTERY_DRG",140]],combo:{potency:[["NEVER",260],["MELEE_MASTERY_DRG",300]],resource:"DRG_HEAVENS_COMBO_TRACKER",resourceValue:3},positional:{potency:[["NEVER",140],["MELEE_MASTERY_DRG",180]],comboPotency:[["NEVER",300],["MELEE_MASTERY_DRG",340]],location:"flank"},highlightIf:e=>e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",3)});Fn("DRAKESBANE",64,{startOnHotbar:!1,applicationDelay:1,potency:[["NEVER",380],["LANCE_MASTERY_II",400],["MELEE_MASTERY_DRG",460]],validateAttempt:e=>e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",4)||e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",4),onConfirm:e=>{(e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",4)||e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",4))&&e.refreshBuff("DRACONIAN_FIRE",0)},highlightIf:e=>e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",4)||e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",4)});Fn("DOOM_SPIKE",40,{replaceIf:[UG],potency:110,falloff:0,applicationDelay:1.29});Fn("DRACONIAN_FURY",82,{replaceIf:[xG],startOnHotbar:!1,potency:130,falloff:0,applicationDelay:.76,validateAttempt:e=>e.resources.get("DRACONIAN_FIRE").available(1),highlightIf:e=>e.resources.get("DRACONIAN_FIRE").available(1),onConfirm:e=>{e.hasTraitUnlocked("LANCE_MASTERY_III")&&e.gainScale(1)}});Fn("SONIC_THRUST",62,{applicationDelay:.8,potency:100,combo:{potency:120,resource:"DRG_AOE_COMBO_TRACKER",resourceValue:1},falloff:0,highlightIf:e=>e.hasResourceExactly("DRG_AOE_COMBO_TRACKER",1),onConfirm:e=>{e.hasResourceExactly("DRG_AOE_COMBO_TRACKER",1)&&(e.resources.get("POWER_SURGE").gain(1),e.enqueueResourceDrop("POWER_SURGE",30.79))}});Fn("COERTHAN_TORMENT",72,{applicationDelay:.49,potency:100,combo:{potency:150,resource:"DRG_AOE_COMBO_TRACKER",resourceValue:2},falloff:0,highlightIf:e=>e.hasResourceExactly("DRG_AOE_COMBO_TRACKER",2),onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_COERTHAN_TORMENT")&&e.hasResourceExactly("DRG_AOE_COMBO_TRACKER",2)&&e.refreshBuff("DRACONIAN_FIRE",0)}});Ke("DRG","LIFE_SURGE",6,"cd_LIFE_SURGE",{rscType:"LIFE_SURGE",applicationDelay:0,cooldown:40,maxCharges:2});_i("WYRMWIND_THRUST",90,"cd_WYRMWIND_THRUST",{applicationDelay:1.2,validateAttempt:e=>e.hasResourceExactly("FIRSTMINDS_FOCUS",2),highlightIf:e=>e.hasResourceExactly("FIRSTMINDS_FOCUS",2),potency:[["NEVER",420],["MELEE_MASTERY_DRG",440]],falloff:.5,cooldown:10,onConfirm:e=>{e.tryConsumeResource("FIRSTMINDS_FOCUS",!0)}});Ke("DRG","LANCE_CHARGE",30,"cd_LANCE_CHARGE",{rscType:"LANCE_CHARGE",applicationDelay:.62,cooldown:60});Ke("DRG","BATTLE_LITANY",52,"cd_BATTLE_LITANY",{rscType:"BATTLE_LITANY",applicationDelay:.62,cooldown:120});_i("GEIRSKOGUL",60,"cd_GEIRSKOGUL",{applicationDelay:.67,potency:[["NEVER",200],["LANCE_MASTERY_III",280]],falloff:.5,cooldown:60,onConfirm:e=>{e.refreshBuff("LIFE_OF_THE_DRAGON",0),e.refreshBuff("NASTROND_READY",0),e.addEvent(new ve("drop starcross when life drops",20,()=>{e.tryConsumeResource("STARCROSS_READY")}))}});_i("NASTROND",70,"cd_NASTROND",{applicationDelay:.76,potency:[["NEVER",600],["LANCE_MASTERY_III",720]],falloff:.5,cooldown:2,validateAttempt:e=>e.resources.get("LIFE_OF_THE_DRAGON").available(1)&&e.resources.get("NASTROND_READY").available(1),highlightIf:e=>e.resources.get("LIFE_OF_THE_DRAGON").available(1)&&e.resources.get("NASTROND_READY").available(1),onConfirm:e=>{e.tryConsumeResource("NASTROND_READY")}});_i("JUMP",30,"cd_JUMP",{autoUpgrade:{trait:"JUMP_MASTERY",otherSkill:"HIGH_JUMP"},applicationDelay:.49,animationLock:.8,potency:320,cooldown:30,onConfirm:e=>{e.refreshBuff("DIVE_READY",0)}});_i("HIGH_JUMP",74,"cd_HIGH_JUMP",{autoDowngrade:{trait:"JUMP_MASTERY",otherSkill:"JUMP"},applicationDelay:.49,animationLock:.8,potency:400,cooldown:30,onConfirm:e=>{e.refreshBuff("DIVE_READY",0)}});_i("MIRAGE_DIVE",68,"cd_MIRAGE_DIVE",{applicationDelay:.8,validateAttempt:e=>e.hasResourceAvailable("DIVE_READY"),highlightIf:e=>e.hasResourceAvailable("DIVE_READY"),potency:380,cooldown:1,onConfirm:e=>{e.tryConsumeResource("DIVE_READY")}});_i("DRAGONFIRE_DIVE",50,"cd_DRAGONFIRE_DIVE",{applicationDelay:.8,animationLock:.8,potency:500,falloff:.5,cooldown:120,onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_DRAGONFIRE_DIVE")&&e.refreshBuff("DRAGONS_FLIGHT",0)}});_i("RISE_OF_THE_DRAGON",92,"cd_RISE_OF_THE_DRAGON",{applicationDelay:1.16,potency:550,falloff:.5,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("DRAGONS_FLIGHT"),highlightIf:e=>e.hasResourceAvailable("DRAGONS_FLIGHT"),onConfirm:e=>{e.tryConsumeResource("DRAGONS_FLIGHT")}});_i("STARDIVER",80,"cd_STARDIVER",{replaceIf:[kG],applicationDelay:1.29,animationLock:1.5,potency:[["NEVER",720],["MELEE_MASTERY_DRG",840]],falloff:.4,cooldown:30,validateAttempt:e=>e.hasResourceAvailable("LIFE_OF_THE_DRAGON"),onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_STARDIVER")&&e.refreshBuff("STARCROSS_READY",0)}});_i("STARCROSS",100,"cd_STARCROSS",{startOnHotbar:!1,replaceIf:[PG],applicationDelay:.98,potency:1e3,falloff:.4,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("STARCROSS_READY")&&e.hasResourceAvailable("LIFE_OF_THE_DRAGON"),highlightIf:e=>e.hasResourceAvailable("STARCROSS_READY")&&e.hasResourceAvailable("LIFE_OF_THE_DRAGON"),onConfirm:e=>{e.tryConsumeResource("STARCROSS_READY")}});_i("ELUSIVE_JUMP",35,"cd_ELUSIVE_JUMP",{potency:0,applicationDelay:0,animationLock:1,cooldown:30,onConfirm:e=>{e.refreshBuff("ENHANCED_PIERCING_TALON",0)}});_i("WINGED_GLIDE",45,"cd_WINGED_GLIDE",{potency:0,applicationDelay:0,animationLock:Wt,cooldown:60,maxCharges:2});const Tb=["SONIC_BREAK_DOT","BOW_SHOCK_DOT"],wG=Object.keys(CT).filter(e=>!Tb.includes(e));Object.keys(CT).forEach(e=>Ft(e,`GNB/${ze[e].name}.png`));class GG extends Xt{jobSpecificOtherTargetedBuffViewProps(){return[...Tb.map(t=>this.makeCommonTimer(t,!1))]}jobSpecificSelfTargetedBuffViewProps(){return wG.map(t=>t==="ROYAL_GUARD"?this.makeCommonTimerless(t):this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){var A,R;const a=this.state.resources,i=a.get("GNB_COMBO_TRACKER"),l=a.get("GNB_AOE_COMBO_TRACKER"),r=a.get("POWDER_GAUGE").availableAmount(),d=a.get("ROYAL_GUARD").availableAmount(),E=i.available(1)?(A=i.pendingChange)==null?void 0:A.timeTillEvent:l.available(1)?(R=l.pendingChange)==null?void 0:R.timeTillEvent:void 0;return[{kind:"bar",name:g({en:"Combo Timer",zh:""}),color:t.rdm.manaStack,progress:E?E/30:0,valueString:(E==null?void 0:E.toFixed(3))??"N/A"},{kind:"counter",name:g({en:"Royal Guard",zh:""}),color:t.rdm.manaStack,currentStacks:d,maxStacks:1},{kind:"counter",name:g({en:"Powder Gauge",zh:""}),color:t.rdm.manaStack,currentStacks:r,maxStacks:this.state.hasTraitUnlocked("CARTRIDGE_CHARGE_II")?3:2}]}}const Ht=(e,t,a)=>{qe("GNB",e,t,a??{})};Ht("POWDER_GAUGE",3,{warnOnOvercap:!0});Ht("ROYAL_GUARD",1);Ht("NO_MERCY",1,{timeout:20});Ht("AURORA",1,{timeout:18});Ht("BOW_SHOCK_DOT",1,{timeout:15});Ht("CAMOUFLAGE",1,{timeout:20});Ht("HEART_OF_CORUNDUM",1,{timeout:8});Ht("CLARITY_OF_CORUNDUM",1,{timeout:15});Ht("CATHARSIS_OF_CORUNDUM",1,{timeout:20});Ht("NEBULA",1,{timeout:15});Ht("GREAT_NEBULA",1,{timeout:15});Ht("HEART_OF_LIGHT",1,{timeout:15});Ht("HEART_OF_STONE",1,{timeout:8});Ht("READY_TO_BLAST",1,{timeout:10,warnOnTimeout:!0});Ht("READY_TO_BREAK",1,{timeout:30,warnOnTimeout:!0});Ht("READY_TO_GOUGE",1,{timeout:10,warnOnTimeout:!0});Ht("READY_TO_RAZE",1,{timeout:10,warnOnTimeout:!0});Ht("READY_TO_REIGN",1,{timeout:30,warnOnTimeout:!0});Ht("READY_TO_RIP",1,{timeout:10,warnOnTimeout:!0});Ht("READY_TO_TEAR",1,{timeout:10,warnOnTimeout:!0});Ht("SONIC_BREAK_DOT",1,{timeout:30});Ht("SUPERBOLIDE",1,{timeout:10});Ht("BRUTAL_SHELL",1,{timeout:30});Ht("GNB_COMBO_TRACKER",2,{timeout:30});Ht("GNB_AOE_COMBO_TRACKER",1,{timeout:30});Ht("GNB_GNASHING_COMBO_TRACKER",2,{timeout:30});Ht("GNB_REIGN_COMBO_TRACKER",2,{timeout:30});const sC=["KEEN_EDGE","BRUTAL_SHELL","SOLID_BARREL"],BG=["DEMON_SLICE","DEMON_SLAUGHTER"],rC=["GNASHING_FANG","SAVAGE_CLAW","WICKED_TALON"],cC=["REIGN_OF_BEASTS","NOBLE_BLOOD","LION_HEART"];class FG extends qt{constructor(t){super(t);const a=this.hasTraitUnlocked("ENHANCED_AURORA")?2:1;[new Ge("cd_AURORA",60,a,a)].forEach(l=>this.cooldowns.set(l)),this.cooldowns.set(new Ge("cd_DOUBLE_DOWN",this.config.adjustedSksGCD(60),1,1)),this.cooldowns.set(new Ge("cd_GNASHING_FANG",this.config.adjustedSksGCD(30),1,1));const i=this.hasTraitUnlocked("CARTRIDGE_CHARGE_II")?3:2;this.resources.set(new sa("POWDER_GAUGE",i,0,!0)),this.registerRecurringEvents([{groupedEffects:[{effectName:"SONIC_BREAK_DOT",appliedBy:["SONIC_BREAK"]}]},{groupedEffects:[{effectName:"BOW_SHOCK_DOT",appliedBy:["BOW_SHOCK"]}]}])}get statusPropsGenerator(){return new GG(this)}jobSpecificAddDamageBuffCovers(t,a){this.hasResourceAvailable("NO_MERCY")&&t.addBuff(x.NoMercy)}fixGNBComboState(t){if(BG.includes(t)){this.tryConsumeResource("GNB_COMBO_TRACKER",!0),this.tryConsumeResource("GNB_REIGN_COMBO_TRACKER",!0),this.tryConsumeResource("GNB_GNASHING_COMBO_TRACKER",!0),this.tryConsumeResource("GNB_AOE_COMBO_TRACKER"),t==="DEMON_SLICE"&&this.setComboState("GNB_AOE_COMBO_TRACKER",1);return}let a="GNB_COMBO_TRACKER",i=-1;sC.includes(t)?(this.tryConsumeResource("GNB_AOE_COMBO_TRACKER",!0),this.tryConsumeResource("GNB_REIGN_COMBO_TRACKER",!0),this.tryConsumeResource("GNB_GNASHING_COMBO_TRACKER",!0),i=sC.indexOf(t)):rC.includes(t)?(this.tryConsumeResource("GNB_REIGN_COMBO_TRACKER",!0),a="GNB_GNASHING_COMBO_TRACKER",i=rC.indexOf(t)):cC.includes(t)&&(this.tryConsumeResource("GNB_GNASHING_COMBO_TRACKER",!0),a="GNB_REIGN_COMBO_TRACKER",i=cC.indexOf(t));let l=0;i===0?l=1:i===1&&this.hasResourceExactly(a,1)&&(l=2),this.setComboState(a,l)}gainCartridge(t){this.resources.get("POWDER_GAUGE").gain(t)}refreshBuff(t,a){this.addEvent(new ve("gain buff",a,()=>{this.resources.get(t).gain(1),this.enqueueResourceDrop(t)}))}}const da=(e,t,a)=>{const i=ke(a.onConfirm,l=>{["SONIC_BREAK","BURST_STRIKE","FATED_CIRCLE","DOUBLE_DOWN","LIGHTNING_SHOT"].includes(e)||l.fixGNBComboState(e),l.tryConsumeResource("READY_TO_BLAST"),l.tryConsumeResource("READY_TO_RAZE"),l.tryConsumeResource("READY_TO_RIP"),l.tryConsumeResource("READY_TO_TEAR"),l.tryConsumeResource("READY_TO_GOUGE")});return on("GNB",e,t,{...a,onConfirm:i,recastTime:l=>l.config.adjustedSksGCD(),jobPotencyModifiers:l=>l.hasResourceAvailable("NO_MERCY")?[X.NoMercy]:[]})},rn=(e,t,a,i)=>lt("GNB",e,t,a,{...i,jobPotencyModifiers:l=>l.hasResourceAvailable("NO_MERCY")?[X.NoMercy]:[]}),Sb={newSkill:"GNASHING_FANG",condition:e=>e.resources.get("GNB_GNASHING_COMBO_TRACKER").availableAmount()===0},Ib={newSkill:"SAVAGE_CLAW",condition:e=>e.resources.get("GNB_GNASHING_COMBO_TRACKER").availableAmount()===1},_b={newSkill:"WICKED_TALON",condition:e=>e.resources.get("GNB_GNASHING_COMBO_TRACKER").availableAmount()===2},gb={newSkill:"REIGN_OF_BEASTS",condition:e=>e.resources.get("GNB_REIGN_COMBO_TRACKER").availableAmount()===0},Nb={newSkill:"NOBLE_BLOOD",condition:e=>e.resources.get("GNB_REIGN_COMBO_TRACKER").availableAmount()===1},pb={newSkill:"LION_HEART",condition:e=>e.resources.get("GNB_REIGN_COMBO_TRACKER").availableAmount()===2},zG={newSkill:"HYPERVELOCITY",condition:e=>e.hasResourceAvailable("READY_TO_BLAST")},jG={newSkill:"FATED_BRAND",condition:e=>e.hasResourceAvailable("READY_TO_RAZE")},YG={newSkill:"JUGULAR_RIP",condition:e=>e.hasResourceAvailable("READY_TO_RIP")},KG={newSkill:"ABDOMEN_TEAR",condition:e=>e.hasResourceAvailable("READY_TO_TEAR")},VG={newSkill:"EYE_GOUGE",condition:e=>e.hasResourceAvailable("READY_TO_GOUGE")},WG={newSkill:"ROYAL_GUARD",condition:e=>!e.hasResourceAvailable("ROYAL_GUARD")},XG={newSkill:"RELEASE_ROYAL_GUARD",condition:e=>e.hasResourceAvailable("ROYAL_GUARD")};da("LIGHTNING_SHOT",15,{potency:150,applicationDelay:.72});da("KEEN_EDGE",1,{potency:[["NEVER",150],["MELEE_MASTERY_TANK",200],["MELEE_MASTERY_II_TANK",300]],applicationDelay:.89});da("BRUTAL_SHELL",4,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",160],["MELEE_MASTERY_II_TANK",240]],combo:{potency:[["NEVER",240],["MELEE_MASTERY_TANK",300],["MELEE_MASTERY_II_TANK",380]],resource:"GNB_COMBO_TRACKER",resourceValue:1},applicationDelay:1.07,onConfirm:e=>{e.hasResourceExactly("GNB_COMBO_TRACKER",1)&&e.refreshBuff("BRUTAL_SHELL",0)},highlightIf:e=>e.hasResourceExactly("GNB_COMBO_TRACKER",1)});da("SOLID_BARREL",26,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",140],["MELEE_MASTERY_II_TANK",240]],combo:{potency:[["NEVER",320],["MELEE_MASTERY_TANK",360],["MELEE_MASTERY_II_TANK",460]],resource:"GNB_COMBO_TRACKER",resourceValue:2},applicationDelay:1.07,onConfirm:e=>{e.hasResourceExactly("GNB_COMBO_TRACKER",2)&&e.gainCartridge(1)},highlightIf:e=>e.hasResourceExactly("GNB_COMBO_TRACKER",2)});da("DEMON_SLICE",10,{potency:100,falloff:0,applicationDelay:.62});da("DEMON_SLAUGHTER",40,{potency:100,combo:{potency:160,resource:"GNB_AOE_COMBO_TRACKER",resourceValue:1},falloff:0,applicationDelay:.62,onConfirm:e=>{e.hasResourceExactly("GNB_AOE_COMBO_TRACKER",1)&&e.gainCartridge(1)},highlightIf:e=>e.hasResourceExactly("GNB_AOE_COMBO_TRACKER",1)});da("BURST_STRIKE",30,{potency:[["NEVER",400],["MELEE_MASTERY_II_TANK",460]],applicationDelay:.71,validateAttempt:e=>e.hasResourceAvailable("POWDER_GAUGE"),onConfirm:e=>{e.tryConsumeResource("POWDER_GAUGE"),e.hasTraitUnlocked("ENHANCED_CONTINUATION")&&e.refreshBuff("READY_TO_BLAST",0)},highlightIf:e=>e.hasResourceAvailable("POWDER_GAUGE")});da("FATED_CIRCLE",72,{potency:300,falloff:0,applicationDelay:.54,validateAttempt:e=>e.hasResourceAvailable("POWDER_GAUGE"),onConfirm:e=>{e.tryConsumeResource("POWDER_GAUGE"),e.hasTraitUnlocked("ENHANCED_CONTINUATION_II")&&e.refreshBuff("READY_TO_RAZE",0)},highlightIf:e=>e.hasResourceAvailable("POWDER_GAUGE")});rn("BLOODFEST",76,"cd_BLOODFEST",{applicationDelay:0,cooldown:120,maxCharges:1,onConfirm:e=>{const t=e.hasTraitUnlocked("CARTRIDGE_CHARGE_II")?3:2;e.gainCartridge(t),e.hasTraitUnlocked("ENHANCED_BLOODFEST")&&e.refreshBuff("READY_TO_REIGN",0)}});rn("NO_MERCY",2,"cd_NO_MERCY",{applicationDelay:0,cooldown:60,maxCharges:1,onConfirm:e=>{e.refreshBuff("NO_MERCY",.62),e.refreshBuff("READY_TO_BREAK",0)}});da("SONIC_BREAK",54,{potency:300,applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("READY_TO_BREAK"),onConfirm:(e,t)=>{e.tryConsumeResource("READY_TO_BREAK");const a=[];e.hasResourceAvailable("NO_MERCY")&&a.push(X.NoMercy),e.addDoTPotencies({node:t,effectName:"SONIC_BREAK_DOT",skillName:"SONIC_BREAK",tickPotency:60,speedStat:"sks",modifiers:a})},onApplication:(e,t)=>e.applyDoT("SONIC_BREAK_DOT",t),highlightIf:e=>e.hasResourceAvailable("READY_TO_BREAK")});da("GNASHING_FANG",60,{replaceIf:[Ib,_b],potency:[["NEVER",380],["MELEE_MASTERY_II_TANK",500]],applicationDelay:.62,recastTime:e=>e.config.adjustedSksGCD(),validateAttempt:e=>e.hasResourceAvailable("POWDER_GAUGE"),onConfirm:e=>{e.refreshBuff("READY_TO_RIP",0),e.tryConsumeResource("POWDER_GAUGE")},highlightIf:e=>e.hasResourceAvailable("POWDER_GAUGE")&&!e.hasResourceAvailable("GNB_REIGN_COMBO_TRACKER"),secondaryCooldown:{cdName:"cd_GNASHING_FANG",cooldown:30,maxCharges:1}});da("SAVAGE_CLAW",60,{startOnHotbar:!1,replaceIf:[Sb,_b],potency:[["NEVER",460],["MELEE_MASTERY_II_TANK",560]],applicationDelay:.62,validateAttempt:e=>e.hasResourceExactly("GNB_GNASHING_COMBO_TRACKER",1),onConfirm:e=>{e.refreshBuff("READY_TO_TEAR",0)},highlightIf:e=>e.hasResourceExactly("GNB_GNASHING_COMBO_TRACKER",1)});da("WICKED_TALON",60,{startOnHotbar:!1,replaceIf:[Sb,Ib],potency:[["NEVER",540],["MELEE_MASTERY_II_TANK",620]],applicationDelay:1.16,validateAttempt:e=>e.hasResourceExactly("GNB_GNASHING_COMBO_TRACKER",2),onConfirm:e=>{e.refreshBuff("READY_TO_GOUGE",0)},highlightIf:e=>e.hasResourceExactly("GNB_GNASHING_COMBO_TRACKER",2)});da("DOUBLE_DOWN",90,{potency:1200,falloff:.15,applicationDelay:.72,recastTime:e=>e.config.adjustedSksGCD(),validateAttempt:e=>e.hasResourceAvailable("POWDER_GAUGE"),onConfirm:e=>{e.tryConsumeResource("POWDER_GAUGE")},highlightIf:e=>e.hasResourceAvailable("POWDER_GAUGE"),secondaryCooldown:{cdName:"cd_DOUBLE_DOWN",cooldown:60,maxCharges:1}});da("REIGN_OF_BEASTS",100,{replaceIf:[Nb,pb],potency:1e3,falloff:.6,applicationDelay:1.16,validateAttempt:e=>e.hasResourceAvailable("READY_TO_REIGN"),onConfirm:e=>{e.tryConsumeResource("READY_TO_REIGN")},highlightIf:e=>e.hasResourceAvailable("READY_TO_REIGN")});da("NOBLE_BLOOD",100,{startOnHotbar:!1,replaceIf:[gb,pb],potency:1100,falloff:.6,applicationDelay:1.65,validateAttempt:e=>e.hasResourceExactly("GNB_REIGN_COMBO_TRACKER",1),highlightIf:e=>e.hasResourceExactly("GNB_REIGN_COMBO_TRACKER",1)});da("LION_HEART",100,{startOnHotbar:!1,replaceIf:[gb,Nb],potency:1200,falloff:.6,applicationDelay:1.79,validateAttempt:e=>e.hasResourceExactly("GNB_REIGN_COMBO_TRACKER",2),highlightIf:e=>e.hasResourceExactly("GNB_REIGN_COMBO_TRACKER",2)});rn("CONTINUATION",70,"cd_CONTINUATION",{replaceIf:[zG,jG,YG,KG,VG],applicationDelay:0,potency:0,cooldown:1,validateAttempt:e=>!1});rn("HYPERVELOCITY",86,"cd_HYPERVELOCITY",{startOnHotbar:!1,applicationDelay:.76,potency:200,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("READY_TO_BLAST"),highlightIf:e=>e.hasResourceAvailable("READY_TO_BLAST"),onConfirm:e=>{e.tryConsumeResource("READY_TO_BLAST")}});rn("FATED_BRAND",96,"cd_FATED_BRAND",{startOnHotbar:!1,applicationDelay:1.16,potency:120,falloff:0,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("READY_TO_RAZE"),highlightIf:e=>e.hasResourceAvailable("READY_TO_RAZE"),onConfirm:e=>{e.tryConsumeResource("READY_TO_RAZE")}});rn("JUGULAR_RIP",70,"cd_JUGULAR_RIP",{startOnHotbar:!1,applicationDelay:.8,potency:240,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("READY_TO_RIP"),highlightIf:e=>e.hasResourceAvailable("READY_TO_RIP"),onConfirm:e=>{e.tryConsumeResource("READY_TO_RIP")}});rn("ABDOMEN_TEAR",70,"cd_ABDOMEN_TEAR",{startOnHotbar:!1,applicationDelay:.76,potency:280,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("READY_TO_TEAR"),highlightIf:e=>e.hasResourceAvailable("READY_TO_TEAR"),onConfirm:e=>{e.tryConsumeResource("READY_TO_TEAR")}});rn("EYE_GOUGE",70,"cd_EYE_GOUGE",{startOnHotbar:!1,applicationDelay:.98,potency:320,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("READY_TO_GOUGE"),highlightIf:e=>e.hasResourceAvailable("READY_TO_GOUGE"),onConfirm:e=>{e.tryConsumeResource("READY_TO_GOUGE")}});rn("DANGER_ZONE",18,"cd_DANGER_ZONE",{autoUpgrade:{trait:"DANGER_ZONE_MASTERY",otherSkill:"BLASTING_ZONE"},applicationDelay:.62,potency:250,cooldown:30});rn("BLASTING_ZONE",80,"cd_BLASTING_ZONE",{startOnHotbar:!1,applicationDelay:.62,potency:800,cooldown:30});rn("BOW_SHOCK",62,"cd_BOW_SHOCK",{applicationDelay:.62,potency:150,falloff:0,cooldown:60,onConfirm:(e,t)=>{const a=[];e.hasResourceAvailable("NO_MERCY")&&a.push(X.NoMercy),e.addDoTPotencies({node:t,effectName:"BOW_SHOCK_DOT",skillName:"BOW_SHOCK",tickPotency:60,speedStat:"sks",modifiers:a})},onApplication:(e,t)=>e.applyDoT("BOW_SHOCK_DOT",t)});rn("TRAJECTORY",56,"cd_TRAJECTORY",{animationLock:Wt,cooldown:30,maxCharges:2,applicationDelay:.66,drawsAggro:!0});rn("HEART_OF_STONE",68,"cd_HEART_OF_STONE",{autoUpgrade:{trait:"HEART_OF_STONE_MASTERY",otherSkill:"HEART_OF_CORUNDUM"},applicationDelay:.62,cooldown:25,onApplication:e=>{e.refreshBuff("HEART_OF_STONE",0)}});rn("HEART_OF_CORUNDUM",82,"cd_HEART_OF_CORUNDUM",{startOnHotbar:!1,applicationDelay:.62,cooldown:25,onApplication:e=>{e.refreshBuff("CATHARSIS_OF_CORUNDUM",0),e.refreshBuff("HEART_OF_CORUNDUM",0),e.refreshBuff("CLARITY_OF_CORUNDUM",0)}});rn("SUPERBOLIDE",50,"cd_SUPERBOLIDE",{applicationDelay:0,cooldown:360,onConfirm:e=>{e.refreshBuff("SUPERBOLIDE",0)}});rn("CAMOUFLAGE",6,"cd_CAMOUFLAGE",{applicationDelay:.62,cooldown:90,onConfirm:e=>{e.refreshBuff("CAMOUFLAGE",0)}});rn("NEBULA",38,"cd_NEBULA",{autoUpgrade:{trait:"NEBULA_MASTERY",otherSkill:"GREAT_NEBULA"},applicationDelay:.56,cooldown:120,onConfirm:e=>{e.refreshBuff("NEBULA",0)}});rn("GREAT_NEBULA",38,"cd_GREAT_NEBULA",{startOnHotbar:!1,applicationDelay:.56,cooldown:120,onConfirm:e=>{e.refreshBuff("GREAT_NEBULA",0)}});rn("HEART_OF_LIGHT",64,"cd_HEART_OF_LIGHT",{applicationDelay:.62,cooldown:60,onConfirm:e=>{e.refreshBuff("HEART_OF_LIGHT",0)}});rn("AURORA",45,"cd_AURORA",{applicationDelay:.62,cooldown:60,onConfirm:e=>{e.refreshBuff("AURORA",0)},maxCharges:2});rn("ROYAL_GUARD",10,"cd_ROYAL_GUARD",{applicationDelay:0,cooldown:2,validateAttempt:e=>!e.hasResourceAvailable("ROYAL_GUARD"),onConfirm:e=>{e.resources.get("ROYAL_GUARD").gain(1)},replaceIf:[XG],secondaryCooldown:{cdName:"cd_RELEASE_ROYAL_GUARD",cooldown:1,maxCharges:1}});rn("RELEASE_ROYAL_GUARD",10,"cd_RELEASE_ROYAL_GUARD",{startOnHotbar:!1,replaceIf:[WG],applicationDelay:0,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("ROYAL_GUARD"),onConfirm:e=>{e.tryConsumeResource("ROYAL_GUARD")},secondaryCooldown:{cdName:"cd_ROYAL_GUARD",cooldown:2,maxCharges:1}});Object.keys(OT).forEach(e=>Ft(e,`MCH/${ze[e].name}.png`));class qG extends Xt{jobSpecificOtherTargetedBuffViewProps(){return[...["WILDFIRE","BIOBLASTER"].map(t=>this.makeCommonTimer(t,!1))]}jobSpecificSelfTargetedBuffViewProps(){return[...Object.keys(OT).filter(t=>!(t==="WILDFIRE"||t==="BIOBLASTER")).map(t=>this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){const a=this.state.resources,i=a.get("HEAT_GAUGE").availableAmount(),l=a.get("BATTERY_GAUGE").availableAmount(),r=a.get("QUEEN_PUNCHES"),d=a.get("QUEEN_FINISHERS"),E=r.availableAmount()+d.availableAmount(),h=r.maxValue+d.maxValue;return[{kind:"bar",name:g({en:"Heat",zh:""}),color:t.mch.heat,progress:i/100,valueString:i.toFixed(0)},{kind:"bar",name:g({en:"Battery",zh:""}),color:t.mch.battery,progress:l/100,valueString:l.toFixed(0)},{kind:"bar",name:g({en:"Queen Hits",zh:""}),color:t.mch.battery,progress:E/h,valueString:E.toFixed(0)}]}}const zn=(e,t,a)=>{qe("MCH",e,t,a??{})};zn("HEAT_GAUGE",100,{warnOnOvercap:!0});zn("BATTERY_GAUGE",100,{warnOnOvercap:!0});zn("REASSEMBLED",1,{timeout:5,warnOnTimeout:!0});zn("OVERHEATED",5,{timeout:10,warnOnTimeout:!0});zn("WILDFIRE",1,{timeout:10});zn("WILDFIRE_SELF",1,{timeout:10});zn("FLAMETHROWER",1,{timeout:10});zn("BIOBLASTER",1,{timeout:15});zn("TACTICIAN",1,{timeout:15});zn("HYPERCHARGED",1,{timeout:30,warnOnTimeout:!0});zn("EXCAVATOR_READY",1,{timeout:30,warnOnTimeout:!0});zn("FULL_METAL_MACHINIST",1,{timeout:30,warnOnTimeout:!0});zn("HEAT_COMBO",2,{timeout:30});zn("QUEEN",7);zn("QUEEN_PUNCHES",5);zn("QUEEN_FINISHERS",2);zn("WILDFIRE_HITS",6);zn("BATTERY_BONUS",50);const ZG=["HEATED_CLEAN_SHOT","HEATED_SLUG_SHOT","HEATED_SPLIT_SHOT","SPREAD_SHOT","SCATTERGUN"],uC=["CHAIN_SAW","EXCAVATOR","FULL_METAL_FIELD","SCATTERGUN","BIOBLASTER","SPREAD_SHOT"];class QG extends qt{constructor(a){super(a);Z(this,"handleQueenPunch",()=>{if(!this.hasResourceAvailable("QUEEN_PUNCHES")){this.handleQueenFinisher();return}const a=this.resources.get("QUEEN").node;a!==void 0&&this.resolveQueenPotency(a),this.resources.get("QUEEN_PUNCHES").consume(1),this.hasResourceAvailable("QUEEN_PUNCHES")?this.addEvent(new ve("queen punch",1.56,()=>this.handleQueenPunch())):this.addEvent(new ve("queen finisher",1.56,()=>this.handleQueenFinisher()))});Z(this,"handleQueenFinisher",()=>{if(!this.hasResourceAvailable("QUEEN_FINISHERS"))return;const a=this.resources.get("QUEEN").node;a!==void 0&&this.resolveQueenPotency(a),this.resources.get("QUEEN_FINISHERS").consume(1),this.hasResourceAvailable("QUEEN_FINISHERS")?this.addEvent(new ve("queen finisher",2,()=>this.handleQueenFinisher())):(this.tryConsumeResource("BATTERY_BONUS",!0),this.addEvent(new ve("expire queen",5,()=>{this.tryConsumeResource("QUEEN",!0)})))});this.cooldowns.set(new Ge("cd_AIR_ANCHOR",this.config.adjustedSksGCD(40),1,1)),this.cooldowns.set(new Ge("cd_CHAINSAW",this.config.adjustedSksGCD(60),1,1)),this.hasTraitUnlocked("QUEENS_GAMBIT")||(this.resources.set(new sa("QUEEN_FINISHERS",1,0)),this.resources.set(new sa("QUEEN",6,0))),this.hasTraitUnlocked("ENHANCED_REASSEMBLE")||this.cooldowns.set(new Ge("cd_REASSEMBLE",55,1,1)),this.hasTraitUnlocked("ENHANCED_MULTI_WEAPON")||this.cooldowns.set(new Ge("cd_DRILL",this.config.adjustedSksGCD(20),1,1)),this.hasTraitUnlocked("CHARGED_ACTION_MASTERY")||(this.cooldowns.set(new Ge("cd_DOUBLE_CHECK",30,2,2)),this.cooldowns.set(new Ge("cd_CHECKMATE",30,2,2))),this.hasTraitUnlocked("ENHANCED_TACTICIAN")||this.cooldowns.set(new Ge("cd_TACTICIAN",120,1,1)),this.registerRecurringEvents([{groupedEffects:[{effectName:"BIOBLASTER",appliedBy:["BIOBLASTER"]}]},{groupedEffects:[{effectName:"FLAMETHROWER",appliedBy:["FLAMETHROWER"],isGroundTargeted:!0,exclude:!0}]}],["ROOK_AUTOTURRET","AUTOMATON_QUEEN","WILDFIRE"])}get statusPropsGenerator(){return new qG(this)}jobSpecificRegisterRecurringEvents(){const a=()=>{this.handleDoTTick("FLAMETHROWER"),this.getDisplayTime()>=0&&N.reportDotTick(this.time,"FLAMETHROWER"),this.addEvent(new ve("Flamethrower tick",1,()=>{a()}))};let i=this.config.timeTillFirstManaTick+this.dotTickOffset;for(;i>1;)i--;this.addEvent(new ve("initial Flamethrower tick",i,a))}cancelChanneledSkills(){this.tryConsumeResource("FLAMETHROWER")}processComboStatus(a){if(!ZG.includes(a))return;const i=this.resources.get("HEAT_COMBO").availableAmount();let l=0;i===0&&a==="HEATED_SPLIT_SHOT"?l=1:i===1&&a==="HEATED_SLUG_SHOT"&&(l=2),this.setComboState("HEAT_COMBO",l)}gainResource(a,i){this.resources.get(a).gain(i)}resolveQueenPotency(a){const i=this.resources.get("QUEEN_PUNCHES").availableAmount()+this.resources.get("QUEEN_FINISHERS").availableAmount(),l=this.resources.get("QUEEN").availableAmount()-i;if(l<0)return;const r=a.getDotPotencies("QUEEN")[l];this.hasResourceAvailable("TINCTURE")&&r.modifiers.push(X.Tincture),r.snapshotTime=this.getDisplayTime(),N.resolvePotency(r)}calculateQueenPotency(a,i){const l=this.resources.get("BATTERY_BONUS").availableAmount(),r=(i-a)*(l/50);return Math.floor((a+r)*.89)}expireWildfire(){if(!this.hasResourceAvailable("WILDFIRE_HITS"))return;this.tryConsumeResource("WILDFIRE_SELF"),this.tryConsumeResource("WILDFIRE");const a=this.hasTraitUnlocked("ENHANCED_WILD_FIRE")?240:100,i=Math.min(this.resources.get("WILDFIRE_HITS").availableAmount(),6)*a,l=this.resources.get("WILDFIRE").node;if(l===void 0)return;const r=l.getDotPotencies("WILDFIRE")[0];r.base=i,N.resolvePotency(r),this.tryConsumeResource("WILDFIRE_HITS",!0)}}const ga=(e,t,a)=>{const i=ke(a.onConfirm,l=>l.processComboStatus(e),l=>{e!=="FULL_METAL_FIELD"&&l.tryConsumeResource("REASSEMBLED")},l=>{l.hasResourceAvailable("WILDFIRE_SELF")&&l.resources.get("WILDFIRE_HITS").gain(1)},l=>{uC.includes(e)||l.tryConsumeResource("OVERHEATED")});return on("MCH",e,t,{...a,onConfirm:i,jobPotencyModifiers:l=>{const r=[];return(l.hasResourceAvailable("REASSEMBLED")||e==="FULL_METAL_FIELD")&&r.push(X.AutoCDH),l.hasResourceAvailable("OVERHEATED")&&!uC.includes(e)&&r.push(X.Overheated),r}})},io=(e,t,a,i)=>lt("MCH",e,t,a,i),ES=(e,t,a,i)=>{const l=ke(i.onConfirm);return Ke("MCH",e,t,a,{...i,onConfirm:l})};ga("HEATED_SPLIT_SHOT",54,{potency:[["NEVER",180],["MARKSMANS_MASTERY",200],["MARKSMANS_MASTERY_II",220]],applicationDelay:.8,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.gainResource("HEAT_GAUGE",5)});ga("HEATED_SLUG_SHOT",60,{potency:[["NEVER",100],["MARKSMANS_MASTERY",120],["MARKSMANS_MASTERY_II",140]],combo:{potency:[["NEVER",280],["MARKSMANS_MASTERY",300],["MARKSMANS_MASTERY_II",320]],resource:"HEAT_COMBO",resourceValue:1},applicationDelay:.8,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.gainResource("HEAT_GAUGE",5),highlightIf:e=>e.hasResourceExactly("HEAT_COMBO",1)});ga("HEATED_CLEAN_SHOT",64,{potency:[["NEVER",100],["MARKSMANS_MASTERY",120],["MARKSMANS_MASTERY_II",160]],combo:{potency:[["NEVER",360],["MARKSMANS_MASTERY",380],["MARKSMANS_MASTERY_II",420]],resource:"HEAT_COMBO",resourceValue:2},applicationDelay:.8,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>{e.gainResource("HEAT_GAUGE",5),e.gainResource("BATTERY_GAUGE",10)},highlightIf:e=>e.hasResourceExactly("HEAT_COMBO",2)});ES("REASSEMBLE",10,"cd_REASSEMBLE",{rscType:"REASSEMBLED",applicationDelay:0,cooldown:55,maxCharges:2});const uf=620;ga("DRILL",58,{potency:uf,applicationDelay:1.15,recastTime:e=>e.config.adjustedSksGCD(),secondaryCooldown:{cdName:"cd_DRILL",cooldown:20,maxCharges:2}});ga("HOT_SHOT",4,{autoUpgrade:{trait:"HOT_SHOT_MASTERY",otherSkill:"AIR_ANCHOR"},potency:240,applicationDelay:1.15,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.gainResource("BATTERY_GAUGE",20),secondaryCooldown:{cdName:"cd_AIR_ANCHOR",cooldown:40,maxCharges:1}});ga("AIR_ANCHOR",76,{startOnHotbar:!1,potency:uf,applicationDelay:1.15,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.gainResource("BATTERY_GAUGE",20),secondaryCooldown:{cdName:"cd_AIR_ANCHOR",cooldown:40,maxCharges:1}});ga("CHAIN_SAW",90,{replaceIf:[{newSkill:"EXCAVATOR",condition:e=>e.hasResourceAvailable("EXCAVATOR_READY")}],potency:uf,falloff:.25,applicationDelay:1.03,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>{e.gainResource("BATTERY_GAUGE",20),e.hasTraitUnlocked("ENHANCED_MULTI_WEAPON_II")&&e.gainStatus("EXCAVATOR_READY")},secondaryCooldown:{cdName:"cd_CHAINSAW",cooldown:60,maxCharges:1}});ga("EXCAVATOR",90,{startOnHotbar:!1,potency:uf,falloff:.25,applicationDelay:1.07,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>{e.gainResource("BATTERY_GAUGE",20),e.tryConsumeResource("EXCAVATOR_READY")},validateAttempt:e=>e.hasResourceAvailable("EXCAVATOR_READY"),highlightIf:e=>e.hasResourceAvailable("EXCAVATOR_READY")});io("BARREL_STABILIZER",66,"cd_BARREL_STABILIZER",{replaceIf:[{newSkill:"FULL_METAL_FIELD",condition:e=>e.hasResourceAvailable("FULL_METAL_MACHINIST")}],applicationDelay:0,cooldown:120,maxCharges:1,requiresCombat:!0,onConfirm:e=>{e.gainStatus("HYPERCHARGED"),e.hasTraitUnlocked("ENHANCED_BARREL_STABILIZER")&&e.gainStatus("FULL_METAL_MACHINIST")}});ga("FULL_METAL_FIELD",100,{startOnHotbar:!1,potency:900,falloff:.25,applicationDelay:1.02,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.tryConsumeResource("FULL_METAL_MACHINIST"),validateAttempt:e=>e.hasResourceAvailable("FULL_METAL_MACHINIST"),highlightIf:e=>e.hasResourceAvailable("FULL_METAL_MACHINIST")});ES("HYPERCHARGE",30,"cd_HYPERCHARGE",{rscType:"OVERHEATED",applicationDelay:0,cooldown:10,maxCharges:1,onConfirm:e=>{e.hasResourceAvailable("HYPERCHARGED")?e.tryConsumeResource("HYPERCHARGED"):e.resources.get("HEAT_GAUGE").consume(50)},validateAttempt:e=>e.hasResourceAvailable("HEAT_GAUGE",50)||e.hasResourceAvailable("HYPERCHARGED"),highlightIf:e=>e.hasResourceAvailable("HEAT_GAUGE",50)||e.hasResourceAvailable("HYPERCHARGED")});io("WILDFIRE",45,"cd_WILDFIRE",{replaceIf:[{newSkill:"DETONATOR",condition:e=>e.hasResourceAvailable("WILDFIRE_SELF")}],applicationDelay:.67,cooldown:120,maxCharges:1,onConfirm:(e,t)=>{e.gainStatus("WILDFIRE_SELF");const a=e.resources.get("WILDFIRE"),i=new tn({config:e.config,sourceTime:e.getDisplayTime(),sourceSkill:"WILDFIRE",aspect:_e.Physical,basePotency:0,snapshotTime:e.getDisplayTime(),description:"wildfire",targetCount:1});i.modifiers=[X.NoCDH],e.hasResourceAvailable("TINCTURE")&&i.modifiers.push(X.Tincture),t.addDoTPotency(i,"WILDFIRE"),a.gain(1),a.node=t,e.resources.addResourceEvent({rscType:"WILDFIRE",name:"wildfire expiration",delay:Vt("MCH","WILDFIRE").maxTimeout,fnOnRsc:l=>e.expireWildfire()})}});io("DETONATOR",45,"cd_DETONATOR",{startOnHotbar:!1,applicationDelay:.62,cooldown:1,maxCharges:1,onConfirm:e=>e.expireWildfire(),validateAttempt:e=>e.hasResourceAvailable("WILDFIRE_SELF")});ga("BLAZING_SHOT",68,{potency:[["NEVER",220],["MARKSMANS_MASTERY_II",240]],applicationDelay:.85,recastTime:1.5,onConfirm:e=>{e.cooldowns.get("cd_DOUBLE_CHECK").restore(15),e.cooldowns.get("cd_CHECKMATE").restore(15)},validateAttempt:e=>e.hasResourceAvailable("OVERHEATED"),highlightIf:e=>e.hasResourceAvailable("OVERHEATED")});io("GAUSS_ROUND",15,"cd_DOUBLE_CHECK",{autoUpgrade:{trait:"DOUBLE_BARREL_MASTERY",otherSkill:"DOUBLE_CHECK"},potency:130,applicationDelay:.71,cooldown:30,maxCharges:3});io("DOUBLE_CHECK",92,"cd_DOUBLE_CHECK",{startOnHotbar:!1,potency:180,falloff:.3,applicationDelay:.71,cooldown:30,maxCharges:3});io("RICOCHET",50,"cd_CHECKMATE",{autoUpgrade:{trait:"DOUBLE_BARREL_MASTERY",otherSkill:"CHECKMATE"},potency:130,falloff:.3,applicationDelay:.71,cooldown:30,maxCharges:3});io("CHECKMATE",92,"cd_CHECKMATE",{startOnHotbar:!1,potency:180,falloff:.3,applicationDelay:.71,cooldown:30,maxCharges:3});const $G=[{skillName:"ROOK_AUTOTURRET",skillLevel:40,autoUpgrade:{otherSkill:"AUTOMATON_QUEEN",trait:"PROMOTION"}},{skillName:"AUTOMATON_QUEEN",skillLevel:80,startOnHotbar:!1}];$G.forEach(e=>{io(e.skillName,e.skillLevel,"cd_QUEEN",{startOnHotbar:e.startOnHotbar,autoUpgrade:e.autoUpgrade,applicationDelay:0,cooldown:6,maxCharges:1,validateAttempt:t=>t.hasResourceAvailable("BATTERY_GAUGE",50)&&!t.hasResourceAvailable("QUEEN"),onConfirm:(t,a)=>{const i=t.resources.get("BATTERY_GAUGE").availableAmount();t.resources.get("BATTERY_BONUS").gain(i-50),t.tryConsumeResource("BATTERY_GAUGE",!0);const l=t.resources.get("QUEEN_PUNCHES");l.gain(5);const r=t.hasTraitUnlocked("QUEENS_GAMBIT")?2:1;t.resources.get("QUEEN_FINISHERS").gain(r),t.resources.get("QUEEN").gain(l.availableAmount()+r);let d="VOLLEY_FIRE",E=0;t.hasTraitUnlocked("PROMOTION")?(d="ARM_PUNCH",E=t.calculateQueenPotency(120,240)):E=t.calculateQueenPotency(35,75);for(let h=0;h<l.availableAmount();h++)a.addDoTPotency(new tn({config:t.config,sourceTime:t.getDisplayTime(),sourceSkill:d,aspect:_e.Physical,description:"",basePotency:E,snapshotTime:void 0,targetCount:a.targetCount}),"QUEEN");d=t.hasTraitUnlocked("PROMOTION")?"PILE_BUNKER":"ROOK_OVERLOAD",d==="PILE_BUNKER"?E=t.calculateQueenPotency(340,680):E=t.calculateQueenPotency(160,320),a.addDoTPotency(new tn({config:t.config,sourceTime:t.getDisplayTime(),sourceSkill:d,aspect:_e.Physical,description:"",basePotency:E,snapshotTime:void 0,targetCount:a.targetCount}),"QUEEN"),t.hasTraitUnlocked("QUEENS_GAMBIT")&&a.addDoTPotency(new tn({config:t.config,sourceTime:t.getDisplayTime(),sourceSkill:"CROWNED_COLLIDER",aspect:_e.Physical,description:"",basePotency:t.calculateQueenPotency(390,780),snapshotTime:void 0,targetCount:a.targetCount}),"QUEEN"),t.resources.get("QUEEN").node=a,t.addEvent(new ve("initial queen punch",5.5,()=>t.handleQueenPunch()))}})});const JG=[{skillName:"ROOK_OVERDRIVE",skillLevel:40,autoUpgrade:{otherSkill:"QUEEN_OVERDRIVE",trait:"PROMOTION"}},{skillName:"QUEEN_OVERDRIVE",skillLevel:80,startOnHotbar:!1}];JG.forEach(e=>{io(e.skillName,e.skillLevel,"cd_OVERDRIVE",{startOnHotbar:e.startOnHotbar,autoUpgrade:e.autoUpgrade,applicationDelay:0,cooldown:15,maxCharges:1,validateAttempt:t=>t.hasResourceAvailable("QUEEN_PUNCHES"),onConfirm:t=>{t.tryConsumeResource("QUEEN_PUNCHES",!0)}})});ga("SPREAD_SHOT",18,{autoUpgrade:{trait:"SPREAD_SHOT_MASTERY",otherSkill:"SCATTERGUN"},potency:110,falloff:0,applicationDelay:.8,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.gainResource("HEAT_GAUGE",5)});ga("SCATTERGUN",82,{startOnHotbar:!1,potency:130,falloff:0,applicationDelay:1.15,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.gainResource("HEAT_GAUGE",10)});ga("BIOBLASTER",58,{potency:50,falloff:0,applicationDelay:.97,recastTime:e=>e.config.adjustedSksGCD(),secondaryCooldown:{cdName:"cd_DRILL",cooldown:20,maxCharges:2},onConfirm:(e,t)=>e.addDoTPotencies({node:t,effectName:"BIOBLASTER",skillName:"BIOBLASTER",tickPotency:50,speedStat:"sks"}),onApplication:(e,t)=>e.applyDoT("BIOBLASTER",t)});ga("AUTO_CROSSBOW",52,{potency:[["NEVER",140],["MARKSMANS_MASTERY_II",180]],falloff:0,applicationDelay:.89,recastTime:1.5,validateAttempt:e=>e.hasResourceAvailable("OVERHEATED"),highlightIf:e=>e.hasResourceAvailable("OVERHEATED")});ga("FLAMETHROWER",70,{applicationDelay:.89,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"FLAMETHROWER",skillName:"FLAMETHROWER",tickPotency:120,tickFrequency:1,speedStat:"sks"})},onApplication:(e,t)=>{e.applyDoT("FLAMETHROWER",t)},secondaryCooldown:{cdName:"cd_FLAMETHROWER",cooldown:60,maxCharges:1}});ES("TACTICIAN",56,"cd_TACTICIAN",{rscType:"TACTICIAN",maxCharges:1,cooldown:90,applicationDelay:.62});io("DISMANTLE",62,"cd_DISMANTLE",{maxCharges:1,cooldown:120,applicationDelay:.62});Object.keys(yT).forEach(e=>Ft(e,`PCT/${ze[e].name}.png`));class eB extends Xt{jobSpecificSelfTargetedBuffViewProps(){return[...Object.keys(yT).map(t=>t==="MONOCHROME_TONES"||t==="SUBTRACTIVE_PALETTE"?this.makeCommonTimerless(t):t==="INSPIRATION"?this.makeToggleableTimerless(t):this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){const a=this.state.resources,i=a.get("PORTRAIT").availableAmount(),l=a.get("DEPICTIONS").availableAmount(),r=a.get("CREATURE_CANVAS").availableAmount(),d=a.get("WEAPON_CANVAS").availableAmount(),E=a.get("LANDSCAPE_CANVAS").availableAmount(),h=a.get("PALETTE_GAUGE").availableAmount(),A=a.get("PAINT").availableAmount(),R=a.get("MONOCHROME_TONES").available(1),T=[{kind:"text",name:g({en:"portrait",zh:""}),text:i===0?"/":g(i===1?{en:"moogle",zh:""}:{en:"madeen",zh:""})},{kind:"text",name:g({en:"depictions",zh:""}),text:l===0?"/":g(l===1?{en:"pom",zh:""}:l===2?{en:"wing",zh:""}:l===3?{en:"fang",zh:""}:{en:"maw",zh:""})},{kind:"counter",name:g({en:"creature",zh:""}),color:t.pct.creatureCanvas,currentStacks:r,maxStacks:1},{kind:"counter",name:g({en:"weapon",zh:""}),color:t.pct.weaponCanvas,currentStacks:d,maxStacks:1},{kind:"counter",name:g({en:"landscape",zh:""}),color:t.pct.landscapeCanvas,currentStacks:E,maxStacks:1},{kind:"bar",name:g({en:"palette gauge",zh:""}),color:t.pct.paletteGauge,progress:h/100,valueString:h.toFixed(0)}];return this.state.hasTraitUnlocked("ENHANCED_ARTISTRY")&&T.push({kind:"paint",name:g({en:"paint gauge",zh:""}),holyColor:t.pct.holyPaint,cometColor:t.pct.cometPaint,currentStacks:A,maxStacks:5,hasComet:this.state.hasTraitUnlocked("ENHANCED_PALETTE")&&R}),T}}const pn=(e,t,a)=>{qe("PCT",e,t,a??{})};pn("PORTRAIT",2);pn("DEPICTIONS",3);pn("CREATURE_CANVAS",1,{default:1});pn("WEAPON_CANVAS",1,{default:1});pn("LANDSCAPE_CANVAS",1,{default:1});pn("PALETTE_GAUGE",100,{warnOnOvercap:!0});pn("PAINT",5);pn("AETHERHUES",2,{timeout:30.8});pn("MONOCHROME_TONES",1);pn("SUBTRACTIVE_PALETTE",3);pn("HAMMER_TIME",3,{timeout:30});pn("INSPIRATION",1,{timeout:30});pn("SUBTRACTIVE_SPECTRUM",1,{timeout:30,warnOnTimeout:!0});pn("HYPERPHANTASIA",5,{timeout:30,warnOnTimeout:!0});pn("RAINBOW_BRIGHT",1,{timeout:30,warnOnTimeout:!0});pn("STARSTRUCK",1,{timeout:20,warnOnTimeout:!0});pn("STARRY_MUSE",1,{timeout:20.5});pn("TEMPERA_COAT",1,{timeout:10});pn("TEMPERA_GRASSA",1,{timeout:10});pn("SMUDGE",1,{timeout:5});const tB=["FIRE_IN_RED","FIRE_II_IN_RED","AERO_IN_GREEN","AERO_II_IN_GREEN","WATER_IN_BLUE","WATER_II_IN_BLUE","HOLY_IN_WHITE","BLIZZARD_IN_CYAN","BLIZZARD_II_IN_CYAN","STONE_IN_YELLOW","STONE_II_IN_YELLOW","THUNDER_IN_MAGENTA","THUNDER_II_IN_MAGENTA","COMET_IN_BLACK","STAR_PRISM"],dC=["POM_MOTIF","WING_MOTIF","CLAW_MOTIF","MAW_MOTIF"],nB=["HAMMER_BRUSH","HAMMER_STAMP","POLISHING_HAMMER"];class aB extends qt{constructor(t){super(t);const a=this.hasTraitUnlocked("ENHANCED_SWIFTCAST")&&40||60;[new Ge("cd_SWIFTCAST",a,1,1)].forEach(r=>this.cooldowns.set(r));const i=this.hasTraitUnlocked("ENHANCED_PICTOMANCY_IV")?3:2;this.cooldowns.set(new Ge("cd_LIVING_MUSE",40,i,i));const l=this.hasTraitUnlocked("ENHANCED_PICTOMANCY_II")?2:1;this.cooldowns.set(new Ge("cd_STEEL_MUSE",60,l,l)),this.registerRecurringEvents()}get statusPropsGenerator(){return new eB(this)}jobSpecificAddDamageBuffCovers(t,a){this.hasResourceAvailable("STARRY_MUSE")&&t.addBuff(x.StarryMuse)}jobSpecificAddSpeedBuffCovers(t,a){this.hasResourceAvailable("INSPIRATION")&&tB.includes(a.name)&&t.addBuff(x.Hyperphantasia)}captureSpellCastTime(t,a){return dC.includes(t)?a:t==="RAINBOW_DRIP"?this.hasResourceAvailable("RAINBOW_BRIGHT")?0:this.config.adjustedCastTime(a):this.config.adjustedCastTime(a,this.hasResourceAvailable("INSPIRATION")?25:void 0)}captureSpellRecastTime(t,a){if(dC.includes(t))return a;if(t==="RAINBOW_DRIP"){const i=this.config.adjustedGCD(a);return this.hasResourceAvailable("RAINBOW_BRIGHT")?i-3.5:i}return nB.includes(t)?this.config.adjustedGCD(a):this.config.adjustedGCD(a,this.hasResourceAvailable("INSPIRATION")?25:void 0)}getHammerStacks(){return this.resources.get("HAMMER_TIME").availableAmount()}doFiller(){this.cycleAetherhues(),this.tryConsumeHyperphantasia(),this.tryConsumeResource("SUBTRACTIVE_PALETTE")}cycleAetherhues(){const t=this.resources.get("AETHERHUES").availableAmount();this.tryConsumeResource("AETHERHUES",!0),t===2||(t===1?this.gainStatus("AETHERHUES",2):this.gainStatus("AETHERHUES",1))}tryConsumeHyperphantasia(){this.hasResourceAvailable("INSPIRATION")&&this.tryConsumeResource("HYPERPHANTASIA")&&!this.hasResourceAvailable("HYPERPHANTASIA")&&(this.tryConsumeResource("INSPIRATION"),this.hasTraitUnlocked("ENHANCED_PICTOMANCY_III")&&this.gainStatus("RAINBOW_BRIGHT"))}}const cn=(e,t,a)=>{const i=a.baseRecastTime??2.5,l=ke((r,d)=>{e==="RAINBOW_DRIP"&&r.hasResourceAvailable("RAINBOW_BRIGHT")||a.baseCastTime===0||r.tryConsumeResource("SWIFTCAST")},a.onConfirm);return $a("PCT",e,t,{...a,castTime:r=>r.captureSpellCastTime(e,a.baseCastTime),recastTime:r=>r.captureSpellRecastTime(e,i),manaCost:a.baseManaCost??0,potency:a.basePotency,jobPotencyModifiers:r=>{const d=[];return r.hasResourceAvailable("STARRY_MUSE")&&d.push(X.Starry),a.jobPotencyModifiers&&d.push(...a.jobPotencyModifiers(r)),d},isInstantFn:r=>e==="RAINBOW_DRIP"&&r.hasResourceAvailable("RAINBOW_BRIGHT")||a.baseCastTime===0||r.hasResourceAvailable("SWIFTCAST"),onConfirm:l})},Gi=(e,t,a,i)=>lt("PCT",e,t,a,{...i,jobPotencyModifiers:l=>l.hasResourceAvailable("STARRY_MUSE")?[X.Starry]:[]}),Cb={newSkill:"FIRE_IN_RED",condition:e=>!e.hasResourceAvailable("AETHERHUES")},Ob={newSkill:"AERO_IN_GREEN",condition:e=>e.hasResourceExactly("AETHERHUES",1)},bb={newSkill:"WATER_IN_BLUE",condition:e=>e.hasResourceExactly("AETHERHUES",2)},Db={newSkill:"BLIZZARD_IN_CYAN",condition:e=>!e.hasResourceAvailable("AETHERHUES")},yb={newSkill:"STONE_IN_YELLOW",condition:e=>e.hasResourceExactly("AETHERHUES",1)},vb={newSkill:"THUNDER_IN_MAGENTA",condition:e=>e.hasResourceExactly("AETHERHUES",2)},Mb={newSkill:"FIRE_II_IN_RED",condition:e=>!e.hasResourceAvailable("AETHERHUES")},Lb={newSkill:"AERO_II_IN_GREEN",condition:e=>e.hasResourceExactly("AETHERHUES",1)},Hb={newSkill:"WATER_II_IN_BLUE",condition:e=>e.hasResourceExactly("AETHERHUES",2)},Ub={newSkill:"BLIZZARD_II_IN_CYAN",condition:e=>!e.hasResourceAvailable("AETHERHUES")},xb={newSkill:"STONE_II_IN_YELLOW",condition:e=>e.hasResourceExactly("AETHERHUES",1)},kb={newSkill:"THUNDER_II_IN_MAGENTA",condition:e=>e.hasResourceExactly("AETHERHUES",2)},fS=[Cb,Ob,bb],AS=[Db,yb,vb],mS=[Mb,Lb,Hb],RS=[Ub,xb,kb],iB={newSkill:"CREATURE_MOTIF",condition:e=>e.hasResourceAvailable("CREATURE_CANVAS")},Pb={newSkill:"POM_MOTIF",condition:e=>!e.hasResourceAvailable("CREATURE_CANVAS")&&!e.hasResourceAvailable("DEPICTIONS")},wb={newSkill:"WING_MOTIF",condition:e=>!e.hasResourceAvailable("CREATURE_CANVAS")&&e.hasResourceExactly("DEPICTIONS",1)},Gb={newSkill:"CLAW_MOTIF",condition:e=>!e.hasResourceAvailable("CREATURE_CANVAS")&&e.hasResourceExactly("DEPICTIONS",2)},Bb={newSkill:"MAW_MOTIF",condition:e=>!e.hasResourceAvailable("CREATURE_CANVAS")&&e.hasResourceExactly("DEPICTIONS",3)},oB={newSkill:"LIVING_MUSE",condition:e=>!e.hasResourceAvailable("CREATURE_CANVAS")},Fb={newSkill:"POM_MUSE",condition:e=>e.hasResourceAvailable("CREATURE_CANVAS")&&!e.hasResourceAvailable("DEPICTIONS")},zb={newSkill:"WINGED_MUSE",condition:e=>e.hasResourceAvailable("CREATURE_CANVAS")&&e.hasResourceExactly("DEPICTIONS",1)},jb={newSkill:"CLAWED_MUSE",condition:e=>e.hasResourceAvailable("CREATURE_CANVAS")&&e.hasResourceExactly("DEPICTIONS",2)},Yb={newSkill:"FANGED_MUSE",condition:e=>e.hasResourceAvailable("CREATURE_CANVAS")&&e.hasResourceExactly("DEPICTIONS",3)},lB={newSkill:"MOG_OF_THE_AGES",condition:e=>e.resources.get("PORTRAIT").availableAmount()!==2},sB={newSkill:"RETRIBUTION_OF_THE_MADEEN",condition:e=>e.resources.get("PORTRAIT").availableAmount()===2},rB={newSkill:"WEAPON_MOTIF",condition:e=>e.hasResourceAvailable("WEAPON_CANVAS")},Kb={newSkill:"HAMMER_MOTIF",condition:e=>!e.hasResourceAvailable("WEAPON_CANVAS")},cB={newSkill:"STEEL_MUSE",condition:e=>!e.hasResourceAvailable("WEAPON_CANVAS")},uB={newSkill:"STRIKING_MUSE",condition:e=>e.hasResourceAvailable("WEAPON_CANVAS")},dB={newSkill:"LANDSCAPE_MOTIF",condition:e=>e.hasResourceAvailable("LANDSCAPE_CANVAS")},Vb={newSkill:"STARRY_SKY_MOTIF",condition:e=>!e.hasResourceAvailable("LANDSCAPE_CANVAS")},hB={newSkill:"SCENIC_MUSE",condition:e=>!e.hasResourceAvailable("LANDSCAPE_CANVAS")},Wb={newSkill:"STARRY_MUSE",condition:e=>e.hasResourceAvailable("LANDSCAPE_CANVAS")};cn("FIRE_IN_RED",1,{replaceIf:fS,baseCastTime:1.5,baseManaCost:300,basePotency:[["NEVER",310],["PICTOMANCY_MASTERY_II",380],["PICTOMANCY_MASTERY_III",420],["PICTOMANCY_MASTERY_IV",490]],applicationDelay:.84,validateAttempt:e=>Cb.condition(e)&&!e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller()});cn("AERO_IN_GREEN",5,{replaceIf:fS,startOnHotbar:!1,baseCastTime:1.5,baseManaCost:300,basePotency:[["NEVER",350],["PICTOMANCY_MASTERY_II",420],["PICTOMANCY_MASTERY_III",460],["PICTOMANCY_MASTERY_IV",530]],applicationDelay:.89,validateAttempt:e=>Ob.condition(e)&&!e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller(),highlightIf:e=>!e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});cn("WATER_IN_BLUE",15,{replaceIf:fS,startOnHotbar:!1,baseCastTime:1.5,baseManaCost:300,basePotency:[["NEVER",390],["PICTOMANCY_MASTERY_II",460],["PICTOMANCY_MASTERY_III",500],["PICTOMANCY_MASTERY_IV",570]],applicationDelay:.98,validateAttempt:e=>bb.condition(e)&&!e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>{e.doFiller(),e.resources.get("PALETTE_GAUGE").gain(25),e.hasTraitUnlocked("ENHANCED_ARTISTRY")&&e.resources.get("PAINT").gain(1)},highlightIf:e=>!e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});cn("FIRE_II_IN_RED",25,{replaceIf:mS,baseCastTime:1.5,baseManaCost:300,basePotency:[["NEVER",120],["PICTOMANCY_MASTERY_II",150],["PICTOMANCY_MASTERY_IV",180]],falloff:0,applicationDelay:.84,validateAttempt:e=>Mb.condition(e)&&!e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller()});cn("AERO_II_IN_GREEN",35,{replaceIf:mS,startOnHotbar:!1,baseCastTime:1.5,baseManaCost:300,basePotency:[["NEVER",140],["PICTOMANCY_MASTERY_II",170],["PICTOMANCY_MASTERY_IV",200]],falloff:0,applicationDelay:.89,validateAttempt:e=>Lb.condition(e)&&!e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller(),highlightIf:e=>!e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});cn("WATER_II_IN_BLUE",45,{replaceIf:mS,startOnHotbar:!1,baseCastTime:1.5,baseManaCost:300,basePotency:[["NEVER",170],["PICTOMANCY_MASTERY_II",190],["PICTOMANCY_MASTERY_IV",220]],falloff:0,applicationDelay:.89,validateAttempt:e=>Hb.condition(e)&&!e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>{e.doFiller(),e.resources.get("PALETTE_GAUGE").gain(25),e.hasTraitUnlocked("ENHANCED_ARTISTRY")&&e.resources.get("PAINT").gain(1)},highlightIf:e=>!e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});cn("BLIZZARD_IN_CYAN",60,{replaceIf:AS,baseCastTime:2.3,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",560],["PICTOMANCY_MASTERY_II",680],["PICTOMANCY_MASTERY_III",750],["PICTOMANCY_MASTERY_IV",860]],applicationDelay:.75,validateAttempt:e=>Db.condition(e)&&e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller(),highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});cn("STONE_IN_YELLOW",60,{replaceIf:AS,startOnHotbar:!1,baseCastTime:2.3,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",600],["PICTOMANCY_MASTERY_II",720],["PICTOMANCY_MASTERY_III",790],["PICTOMANCY_MASTERY_IV",900]],applicationDelay:.8,validateAttempt:e=>yb.condition(e)&&e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller(),highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});cn("THUNDER_IN_MAGENTA",60,{replaceIf:AS,startOnHotbar:!1,baseCastTime:2.3,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",640],["PICTOMANCY_MASTERY_II",760],["PICTOMANCY_MASTERY_III",830],["PICTOMANCY_MASTERY_IV",940]],applicationDelay:.8,validateAttempt:e=>vb.condition(e)&&e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>{e.doFiller(),e.hasTraitUnlocked("ENHANCED_ARTISTRY")&&e.resources.get("PAINT").gain(1)},highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});cn("BLIZZARD_II_IN_CYAN",60,{replaceIf:RS,baseCastTime:2.3,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",270],["PICTOMANCY_MASTERY_II",330],["PICTOMANCY_MASTERY_IV",360]],falloff:0,applicationDelay:.75,validateAttempt:e=>Ub.condition(e)&&e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller(),highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});cn("STONE_II_IN_YELLOW",60,{replaceIf:RS,startOnHotbar:!1,baseCastTime:2.3,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",290],["PICTOMANCY_MASTERY_II",350],["PICTOMANCY_MASTERY_IV",380]],falloff:0,applicationDelay:.8,validateAttempt:e=>xb.condition(e)&&e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller(),highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});cn("THUNDER_II_IN_MAGENTA",60,{replaceIf:RS,startOnHotbar:!1,baseCastTime:2.3,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",310],["PICTOMANCY_MASTERY_II",370],["PICTOMANCY_MASTERY_IV",400]],falloff:0,applicationDelay:.8,validateAttempt:e=>kb.condition(e)&&e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>{e.doFiller(),e.hasTraitUnlocked("ENHANCED_ARTISTRY")&&e.resources.get("PAINT").gain(1)},highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});cn("HOLY_IN_WHITE",80,{baseCastTime:0,baseManaCost:300,basePotency:[["NEVER",460],["PICTOMANCY_MASTERY_III",500],["PICTOMANCY_MASTERY_IV",570]],falloff:.65,applicationDelay:1.34,validateAttempt:e=>!e.hasResourceAvailable("MONOCHROME_TONES")&&e.hasResourceAvailable("PAINT"),onConfirm:e=>{e.tryConsumeResource("PAINT"),e.tryConsumeHyperphantasia()},highlightIf:e=>!e.hasResourceAvailable("MONOCHROME_TONES")&&e.hasResourceAvailable("PAINT")});cn("COMET_IN_BLACK",90,{baseCastTime:0,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",830],["PICTOMANCY_MASTERY_IV",940]],falloff:.6,applicationDelay:1.87,validateAttempt:e=>e.hasResourceAvailable("MONOCHROME_TONES")&&e.hasResourceAvailable("PAINT"),onConfirm:e=>{e.tryConsumeResource("PAINT"),e.tryConsumeResource("MONOCHROME_TONES"),e.tryConsumeHyperphantasia()},highlightIf:e=>e.hasResourceAvailable("MONOCHROME_TONES")});cn("RAINBOW_DRIP",92,{baseCastTime:4,baseRecastTime:6,baseManaCost:400,basePotency:1e3,applicationDelay:1.24,falloff:.85,onConfirm:e=>{e.resources.get("PAINT").gain(1),e.tryConsumeResource("RAINBOW_BRIGHT")},highlightIf:e=>e.hasResourceAvailable("RAINBOW_BRIGHT")});cn("STAR_PRISM",100,{baseCastTime:0,baseManaCost:0,basePotency:1100,applicationDelay:1.25,falloff:.7,validateAttempt:e=>e.hasResourceAvailable("STARSTRUCK"),onConfirm:e=>{e.tryConsumeResource("STARSTRUCK"),e.tryConsumeHyperphantasia()},highlightIf:e=>e.hasResourceAvailable("STARSTRUCK")});Gi("SUBTRACTIVE_PALETTE",60,"cd_SUBTRACTIVE",{cooldown:1,validateAttempt:e=>!e.hasResourceAvailable("SUBTRACTIVE_PALETTE")&&(e.hasResourceAvailable("SUBTRACTIVE_SPECTRUM")||e.hasResourceAvailable("PALETTE_GAUGE",50)),onConfirm:e=>{e.tryConsumeResource("SUBTRACTIVE_SPECTRUM")||e.resources.get("PALETTE_GAUGE").consume(50),e.hasResourceAvailable("MONOCHROME_TONES")&&N.reportWarning({kind:"custom",en:"comet overwrite!",zh:""}),e.hasTraitUnlocked("ENHANCED_PALETTE")&&e.gainStatus("MONOCHROME_TONES"),e.gainStatus("SUBTRACTIVE_PALETTE",3)},highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_SPECTRUM")||e.resources.get("PALETTE_GAUGE").available(50)});const EB=[iB,Pb,wb,Gb,Bb],fB=[["CREATURE_MOTIF",30,e=>!1],["POM_MOTIF",30,Pb.condition],["WING_MOTIF",30,wb.condition],["CLAW_MOTIF",96,Gb.condition],["MAW_MOTIF",96,Bb.condition]];fB.forEach(([e,t,a],i)=>cn(e,t,{replaceIf:EB,startOnHotbar:i===0,baseCastTime:3,baseRecastTime:4,baseManaCost:0,applicationDelay:0,validateAttempt:a,onConfirm:l=>l.resources.get("CREATURE_CANVAS").gain(1)}));const AB=[oB,Fb,zb,jb,Yb],mB=[["LIVING_MUSE",30,0,0,e=>!1],["POM_MUSE",30,[["NEVER",700],["PICTOMANCY_MASTERY_III",800]],.62,Fb.condition],["WINGED_MUSE",30,[["NEVER",700],["PICTOMANCY_MASTERY_III",800]],.98,zb.condition],["CLAWED_MUSE",96,800,.98,jb.condition],["FANGED_MUSE",96,800,1.16,Yb.condition]];mB.forEach(([e,t,a,i,l],r)=>Gi(e,t,"cd_LIVING_MUSE",{replaceIf:AB,startOnHotbar:r===0,potency:a,falloff:.7,applicationDelay:i,cooldown:40,validateAttempt:l,onConfirm:d=>{const E=d.resources.get("DEPICTIONS"),h=d.resources.get("PORTRAIT");d.tryConsumeResource("CREATURE_CANVAS"),E.gain(1),e==="WINGED_MUSE"&&(h.overrideCurrentValue(1),d.hasTraitUnlocked("ENHANCED_PICTOMANCY_IV")||E.overrideCurrentValue(0)),e==="FANGED_MUSE"&&(h.overrideCurrentValue(2),E.overrideCurrentValue(0))},maxCharges:3,highlightIf:d=>d.hasResourceAvailable("CREATURE_CANVAS")}));Gi("MOG_OF_THE_AGES",30,"cd_PORTRAIT",{replaceIf:[sB],potency:[["NEVER",800],["PICTOMANCY_MASTERY_III",1e3]],falloff:.7,applicationDelay:1.15,validateAttempt:e=>e.hasResourceExactly("PORTRAIT",1),onConfirm:e=>e.tryConsumeResource("PORTRAIT"),cooldown:30,highlightIf:e=>e.hasResourceAvailable("PORTRAIT")});Gi("RETRIBUTION_OF_THE_MADEEN",30,"cd_PORTRAIT",{replaceIf:[lB],startOnHotbar:!1,potency:1100,falloff:.7,applicationDelay:1.3,validateAttempt:e=>e.hasResourceExactly("PORTRAIT",2),onConfirm:e=>e.tryConsumeResource("PORTRAIT",!0),cooldown:30,highlightIf:e=>e.hasResourceAvailable("PORTRAIT")});cn("WEAPON_MOTIF",50,{replaceIf:[Kb],baseCastTime:3,baseRecastTime:4,baseManaCost:0,applicationDelay:0,validateAttempt:e=>!1});cn("HAMMER_MOTIF",50,{replaceIf:[rB],startOnHotbar:!1,baseCastTime:3,baseRecastTime:4,baseManaCost:0,applicationDelay:0,validateAttempt:e=>Kb.condition(e)&&!e.hasResourceAvailable("HAMMER_TIME"),onConfirm:e=>e.resources.get("WEAPON_CANVAS").gain(1)});Gi("STEEL_MUSE",50,"cd_STEEL_MUSE",{replaceIf:[uB],cooldown:60,maxCharges:2,validateAttempt:e=>!1});Gi("STRIKING_MUSE",50,"cd_STEEL_MUSE",{replaceIf:[cB],startOnHotbar:!1,requiresCombat:!0,cooldown:60,maxCharges:2,validateAttempt:e=>e.hasResourceAvailable("WEAPON_CANVAS"),onConfirm:e=>{e.tryConsumeResource("WEAPON_CANVAS"),e.gainStatus("HAMMER_TIME",3)},highlightIf:e=>e.hasResourceAvailable("WEAPON_CANVAS")});const hC=[{newSkill:"HAMMER_STAMP",condition:e=>!e.hasTraitUnlocked("ENHANCED_PICTOMANCY_II")||e.getHammerStacks()===3},{newSkill:"HAMMER_BRUSH",condition:e=>e.hasTraitUnlocked("ENHANCED_PICTOMANCY_II")&&e.getHammerStacks()===2},{newSkill:"POLISHING_HAMMER",condition:e=>e.hasTraitUnlocked("ENHANCED_PICTOMANCY_II")&&e.getHammerStacks()===1}],RB=[["HAMMER_STAMP",50,[["NEVER",420],["PICTOMANCY_MASTERY_II",500],["PICTOMANCY_MASTERY_III",540],["PICTOMANCY_MASTERY_IV",560]],1.38],["HAMMER_BRUSH",86,[["NEVER",560],["PICTOMANCY_MASTERY_IV",580]],1.25],["POLISHING_HAMMER",86,[["NEVER",580],["PICTOMANCY_MASTERY_IV",600]],2.1]];RB.forEach(([e,t,a,i],l)=>cn(e,t,{replaceIf:hC,baseCastTime:0,startOnHotbar:l===0,basePotency:a,falloff:.7,applicationDelay:i,validateAttempt:r=>hC[l].condition(r)&&r.hasResourceAvailable("HAMMER_TIME"),onConfirm:r=>r.tryConsumeResource("HAMMER_TIME"),highlightIf:r=>r.hasResourceAvailable("HAMMER_TIME"),jobPotencyModifiers:r=>[X.AutoCDH]}));cn("LANDSCAPE_MOTIF",70,{replaceIf:[Vb],baseCastTime:3,baseRecastTime:4,baseManaCost:0,applicationDelay:0,validateAttempt:e=>!1});cn("STARRY_SKY_MOTIF",70,{replaceIf:[dB],startOnHotbar:!1,baseCastTime:3,baseRecastTime:4,baseManaCost:0,applicationDelay:0,validateAttempt:e=>Vb.condition(e)&&!e.hasResourceAvailable("STARRY_MUSE"),onConfirm:e=>e.resources.get("LANDSCAPE_CANVAS").gain(1)});Gi("SCENIC_MUSE",70,"cd_SCENIC_MUSE",{replaceIf:[Wb],applicationDelay:0,cooldown:120,validateAttempt:e=>!1});Gi("STARRY_MUSE",70,"cd_SCENIC_MUSE",{replaceIf:[hB],startOnHotbar:!1,requiresCombat:!0,applicationDelay:0,cooldown:120,validateAttempt:e=>Wb.condition(e),onConfirm:e=>{e.tryConsumeResource("LANDSCAPE_CANVAS"),e.hasTraitUnlocked("ENHANCED_PICTOMANCY")&&(e.gainStatus("HYPERPHANTASIA",5),e.gainStatus("INSPIRATION")),e.hasTraitUnlocked("ENHANCED_PICTOMANCY_V")&&e.gainStatus("STARSTRUCK"),e.gainStatus("STARRY_MUSE"),e.gainStatus("SUBTRACTIVE_SPECTRUM")},highlightIf:e=>e.hasResourceAvailable("LANDSCAPE_CANVAS")});Ke("PCT","TEMPERA_COAT",10,"cd_TEMPERA_COAT",{rscType:"TEMPERA_COAT",replaceIf:[{newSkill:"TEMPERA_COAT_POP",condition:e=>e.hasResourceAvailable("TEMPERA_COAT")}],applicationDelay:0,cooldown:120});Gi("TEMPERA_GRASSA",88,"cd_GRASSA",{replaceIf:[{newSkill:"TEMPERA_GRASSA_POP",condition:e=>e.hasResourceAvailable("TEMPERA_GRASSA")}],applicationDelay:0,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("TEMPERA_COAT"),onConfirm:e=>{e.tryConsumeResource("TEMPERA_COAT"),e.gainStatus("TEMPERA_GRASSA")},highlightIf:e=>e.hasResourceAvailable("TEMPERA_COAT")});Gi("TEMPERA_COAT_POP",10,"cd_TEMPERA_POP",{replaceIf:[{newSkill:"TEMPERA_GRASSA_POP",condition:e=>e.hasResourceAvailable("TEMPERA_GRASSA")}],startOnHotbar:!1,applicationDelay:0,animationLock:Ia,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("TEMPERA_COAT"),onConfirm:e=>{e.tryConsumeResource("TEMPERA_COAT");const t=e.cooldowns.get("cd_TEMPERA_COAT").timeTillNextStackAvailable();console.assert(t>0,"attempted to pop Tempera Coat when no timer for Tempera Coat CD was active"),e.cooldowns.get("cd_TEMPERA_COAT").overrideTimeTillNextStack(Math.max(0,t-60))},highlightIf:e=>e.hasResourceAvailable("TEMPERA_COAT")});Gi("TEMPERA_GRASSA_POP",10,"cd_TEMPERA_POP",{replaceIf:[{newSkill:"TEMPERA_COAT_POP",condition:e=>e.hasResourceAvailable("TEMPERA_COAT")}],startOnHotbar:!1,applicationDelay:0,animationLock:Ia,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("TEMPERA_GRASSA"),onConfirm:e=>{e.tryConsumeResource("TEMPERA_GRASSA");const t=e.cooldowns.get("cd_TEMPERA_COAT").timeTillNextStackAvailable();console.assert(t>0,"attempted to pop Tempera Grassa when no timer for Tempera Coat CD was active"),e.cooldowns.get("cd_TEMPERA_COAT").overrideTimeTillNextStack(Math.max(0,t-30))},highlightIf:e=>e.hasResourceAvailable("TEMPERA_GRASSA")});Ke("PCT","SMUDGE",20,"cd_SMUDGE",{rscType:"SMUDGE",applicationDelay:0,cooldown:20,animationLock:Wt});Object.keys(MT).forEach(e=>Ft(e,`RDM/${ze[e].name}.png`));class TB extends Xt{jobSpecificSelfTargetedBuffViewProps(){return[...Object.keys(MT).map(t=>this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){const a=this.state.resources,i=a.get("WHITE_MANA").availableAmount(),l=a.get("BLACK_MANA").availableAmount(),r=a.get("MANA_STACKS").availableAmount();return[{kind:"bar",name:g({en:"white mana",zh:""}),color:t.rdm.whiteMana,progress:i/100,valueString:i.toFixed(0)},{kind:"bar",name:g({en:"black mana",zh:""}),color:t.rdm.blackMana,progress:l/100,valueString:l.toFixed(0)},{kind:"counter",name:g({en:"mana stacks",zh:""}),color:t.rdm.manaStack,currentStacks:r,maxStacks:3}]}}const ta=(e,t,a)=>{qe("RDM",e,t,a??{})};ta("WHITE_MANA",100);ta("BLACK_MANA",100);ta("MANA_STACKS",3);ta("ACCELERATION",1,{timeout:20});ta("DUALCAST",1,{timeout:15});ta("EMBOLDEN",1,{timeout:20});ta("GRAND_IMPACT_READY",1,{timeout:30,warnOnTimeout:!0});ta("MAGICK_BARRIER",1,{timeout:10});ta("MAGICKED_SWORDPLAY",3,{timeout:30,warnOnTimeout:!0});ta("MANAFICATION",6,{timeout:30,warnOnTimeout:!0});ta("PREFULGENCE_READY",1,{timeout:30,warnOnTimeout:!0});ta("THORNED_FLOURISH",1,{timeout:30,warnOnTimeout:!0});ta("VERFIRE_READY",1,{timeout:30});ta("VERSTONE_READY",1,{timeout:30});ta("RDM_MELEE_COUNTER",2,{timeout:30});ta("RDM_FINISHER_COUNTER",2,{timeout:30});ta("RDM_AOE_COUNTER",2,{timeout:30});const Xb=["IMPACT","VERAERO","VERTHUNDER","VERAERO_III","VERTHUNDER_III"],qb=["VERHOLY","VERFLARE","SCORCH","RESOLUTION"];class SB extends qt{constructor(t){super(t);const a=this.hasTraitUnlocked("ENHANCED_SWIFTCAST")?40:60,i=this.hasTraitUnlocked("RED_MAGIC_MASTERY")?35:45,l=this.hasTraitUnlocked("ENHANCED_MANAFICATION")?110:120;[new Ge("cd_SWIFTCAST",a,1,1),new Ge("cd_CONTRE_SIXTE",i,1,1),new Ge("cd_MANAFICATION",l,1,1)].forEach(E=>this.cooldowns.set(E));const r=this.hasTraitUnlocked("ENHANCED_ACCELERATION")?2:1;this.cooldowns.set(new Ge("cd_ACCELERATION",55,r,r));const d=this.hasTraitUnlocked("ENHANCED_MANAFICATION_II")?6:this.hasTraitUnlocked("ENHANCED_MANAFICATION")?5:4;this.resources.set(new sa("MANAFICATION",d,0)),this.registerRecurringEvents()}get statusPropsGenerator(){return new TB(this)}jobSpecificAddDamageBuffCovers(t,a){this.hasResourceAvailable("EMBOLDEN")&&a.aspect!==_e.Physical&&t.addBuff(x.Embolden),this.hasResourceAvailable("MANAFICATION")&&a.cdName==="cd_GCD"&&t.addBuff(x.Manafication),a.name==="IMPACT"&&this.hasResourceAvailable("ACCELERATION")&&t.addBuff(x.Acceleration)}hasThreeManaStacks(){return this.hasResourceAvailable("MANA_STACKS",3)}getFinisherCounter(){return this.resources.get("RDM_FINISHER_COUNTER").availableAmount()}processDualcastAndInstants(t){qb.includes(t)||t==="GRAND_IMPACT"&&this.tryConsumeResource("GRAND_IMPACT_READY")||Xb.includes(t)&&this.tryConsumeResource("ACCELERATION")||this.tryConsumeResource("DUALCAST")||this.tryConsumeResource("SWIFTCAST")||this.gainStatus("DUALCAST")}gainColorMana(t){const a=this.resources.get("WHITE_MANA"),i=this.resources.get("BLACK_MANA");if(t.w){const l=i.availableAmount()-a.availableAmount()>30;a.gain(l?Math.floor(t.w/2):t.w)}if(t.b){const l=a.availableAmount()-i.availableAmount()>30;i.gain(l?Math.floor(t.b/2):t.b)}Math.abs(i.availableAmount()-a.availableAmount())>30&&N.reportWarning({kind:"custom",en:"mana difference became more than 30",zh:""})}colorManaExceeds(t){return this.hasResourceAvailable("MAGICKED_SWORDPLAY")||this.hasResourceAvailable("WHITE_MANA",t)&&this.hasResourceAvailable("BLACK_MANA",t)}consumeColorMana(t){this.hasResourceAvailable("MAGICKED_SWORDPLAY")?this.tryConsumeResource("MAGICKED_SWORDPLAY"):(this.resources.get("WHITE_MANA").consume(t),this.resources.get("BLACK_MANA").consume(t))}maybeGainVerproc(t,a=.5){this.maybeGainProc(t,a,!0)}processComboStatus(t){const a=this.resources.get("MANA_STACKS"),i=this.config.level>=80,l=this.config.level>=90,r=this.resources.get("RDM_MELEE_COUNTER").availableAmount(),d=this.resources.get("RDM_FINISHER_COUNTER").availableAmount(),E=this.resources.get("RDM_AOE_COUNTER").availableAmount(),h=r+d+E>0;let A;t==="ENCHANTED_RIPOSTE"||t==="RIPOSTE"?(h&&N.reportComboBreak(),A=[1,0,0],t==="ENCHANTED_RIPOSTE"&&a.gain(1)):t==="ENCHANTED_ZWERCHHAU"||t==="ZWERCHHAU"?(h&&r!==1&&N.reportComboBreak(),A=[r===1?2:0,0,0],t==="ENCHANTED_ZWERCHHAU"&&a.gain(1)):t==="ENCHANTED_REDOUBLEMENT"||t==="REDOUBLEMENT"?(h&&r!==2&&N.reportComboBreak(),A=[0,0,0],t==="ENCHANTED_REDOUBLEMENT"&&a.gain(1)):t==="VERHOLY"||t==="VERFLARE"?(A=[0,i?1:0,0],a.consume(3)):t==="SCORCH"?A=[0,l?2:0,0]:t==="RESOLUTION"?A=[0,0,0]:t==="ENCHANTED_MOULINET"?(r+d>0&&N.reportComboBreak(),A=[0,0,1],a.gain(1)):t==="ENCHANTED_MOULINET_II"?(A=[0,0,2],a.gain(1)):t==="ENCHANTED_MOULINET_III"?(A=[0,0,0],a.gain(1)):t==="ENCHANTED_REPRISE"?A=[r,d,E]:(h&&N.reportComboBreak(),A=[0,0,0],a.consume(a.availableAmount())),this.setComboState("RDM_MELEE_COUNTER",A[0]),this.setComboState("RDM_FINISHER_COUNTER",A[1]),this.setComboState("RDM_AOE_COUNTER",A[2])}processManafic(){this.tryConsumeResource("MANAFICATION")&&!this.hasResourceAvailable("MANAFICATION")&&this.hasTraitUnlocked("ENHANCED_MANAFICATION_III")&&this.gainStatus("PREFULGENCE_READY")}}const jn=(e,t,a)=>{const i=ke(l=>l.processManafic(),a.onConfirm,l=>l.processDualcastAndInstants(e),l=>l.processComboStatus(e));return $a("RDM",e,t,{...a,aspect:a.isPhysical?_e.Physical:void 0,castTime:l=>l.config.adjustedCastTime(a.baseCastTime),recastTime:l=>l.config.adjustedGCD(),manaCost:a.baseManaCost??0,potency:a.basePotency,jobPotencyModifiers:l=>{const r=[];return l.hasResourceAvailable("EMBOLDEN")&&r.push(X.EmboldenMagic),l.hasResourceAvailable("MANAFICATION")&&r.push(X.Manafication),a.jobPotencyModifiers&&r.push(...a.jobPotencyModifiers(l)),r},isInstantFn:l=>qb.includes(e)||e==="GRAND_IMPACT"||Xb.includes(e)&&l.hasResourceAvailable("ACCELERATION")||l.hasResourceAvailable("DUALCAST")||l.hasResourceAvailable("SWIFTCAST"),onConfirm:i})},gi=(e,t,a)=>{const i=!e.toString().startsWith("ENCHANTED"),l=ke(r=>r.processManafic(),r=>r.processComboStatus(e),a.onConfirm);return on("RDM",e,t,{...a,aspect:i?_e.Physical:void 0,onConfirm:l,jobPotencyModifiers:r=>{const d=[];return i||(r.hasResourceAvailable("EMBOLDEN")&&d.push(X.EmboldenMagic),r.hasResourceAvailable("MANAFICATION")&&d.push(X.Manafication)),d}})},ks=(e,t,a,i)=>lt("RDM",e,t,a,{aspect:i.isPhysical?_e.Physical:void 0,jobPotencyModifiers:l=>!i.isPhysical&&l.hasResourceAvailable("EMBOLDEN")?[X.EmboldenMagic]:[],...i}),Zb={newSkill:"SCORCH",condition:e=>e.getFinisherCounter()===1},Qb={newSkill:"RESOLUTION",condition:e=>e.getFinisherCounter()===2},yE={newSkill:"GRAND_IMPACT",condition:e=>e.getFinisherCounter()<1&&e.hasResourceAvailable("GRAND_IMPACT_READY")},nd=[{newSkill:"JOLT_II",condition:e=>e.getFinisherCounter()<1&&!e.hasResourceAvailable("GRAND_IMPACT_READY")},Zb,Qb,yE];jn("JOLT_II",62,{replaceIf:nd,autoUpgrade:{trait:"RED_MAGIC_MASTERY_III",otherSkill:"JOLT_III"},baseCastTime:2,baseManaCost:200,applicationDelay:.8,basePotency:280,validateAttempt:e=>e.getFinisherCounter()<1&&!e.hasResourceAvailable("GRAND_IMPACT_READY"),onConfirm:e=>e.gainColorMana({w:2,b:2})});jn("JOLT_III",84,{replaceIf:nd,autoDowngrade:{trait:"RED_MAGIC_MASTERY_III",otherSkill:"JOLT_II"},baseCastTime:2,baseManaCost:200,applicationDelay:.8,basePotency:360,validateAttempt:e=>e.getFinisherCounter()<1&&!e.hasResourceAvailable("GRAND_IMPACT_READY"),onConfirm:e=>e.gainColorMana({w:2,b:2})});const $b=[["NEVER",300],["RED_MAGIC_MASTERY_II",340],["RED_MAGIC_MASTERY_III",380]];jn("VERSTONE",30,{baseCastTime:2,baseManaCost:200,applicationDelay:.8,basePotency:$b,validateAttempt:e=>e.hasResourceAvailable("VERSTONE_READY"),onConfirm:e=>{e.gainColorMana({w:5}),e.tryConsumeResource("VERSTONE_READY")},highlightIf:e=>e.hasResourceAvailable("VERSTONE_READY")});jn("VERFIRE",26,{baseCastTime:2,baseManaCost:200,applicationDelay:.8,basePotency:$b,validateAttempt:e=>e.hasResourceAvailable("VERFIRE_READY"),onConfirm:e=>{e.gainColorMana({b:5}),e.tryConsumeResource("VERFIRE_READY")},highlightIf:e=>e.hasResourceAvailable("VERFIRE_READY")});const TS={newSkill:"VERHOLY",condition:e=>e.hasThreeManaStacks()},SS={newSkill:"VERFLARE",condition:e=>e.hasThreeManaStacks()};jn("VERAERO",10,{replaceIf:[TS],autoUpgrade:{trait:"RED_MAGIC_MASTERY_II",otherSkill:"VERAERO_III"},baseCastTime:5,baseManaCost:400,applicationDelay:.76,basePotency:360,validateAttempt:e=>!e.hasThreeManaStacks(),onConfirm:e=>{e.gainColorMana({w:6}),e.hasResourceAvailable("ACCELERATION")?e.gainStatus("VERSTONE_READY"):e.maybeGainVerproc("VERSTONE_READY")}});jn("VERTHUNDER",4,{replaceIf:[SS],autoUpgrade:{trait:"RED_MAGIC_MASTERY_II",otherSkill:"VERTHUNDER_III"},baseCastTime:5,baseManaCost:400,applicationDelay:.76,basePotency:360,validateAttempt:e=>!e.hasThreeManaStacks(),onConfirm:e=>{e.gainColorMana({b:6}),e.hasResourceAvailable("ACCELERATION")?e.gainStatus("VERFIRE_READY"):e.maybeGainVerproc("VERFIRE_READY")}});const Jb=[["NEVER",380],["ENCHANTED_BLADE_MASTERY",440]];jn("VERAERO_III",82,{replaceIf:[TS],autoDowngrade:{trait:"RED_MAGIC_MASTERY_II",otherSkill:"VERAERO"},baseCastTime:5,baseManaCost:400,applicationDelay:.76,basePotency:Jb,validateAttempt:e=>!e.hasThreeManaStacks(),onConfirm:e=>{e.gainColorMana({w:6}),e.hasResourceAvailable("ACCELERATION")?e.gainStatus("VERSTONE_READY"):e.maybeGainVerproc("VERSTONE_READY")}});jn("VERTHUNDER_III",82,{replaceIf:[SS],autoDowngrade:{trait:"RED_MAGIC_MASTERY_II",otherSkill:"VERTHUNDER"},baseCastTime:5,baseManaCost:400,applicationDelay:.76,basePotency:Jb,validateAttempt:e=>!e.hasThreeManaStacks(),onConfirm:e=>{e.gainColorMana({b:6}),e.hasResourceAvailable("ACCELERATION")?e.gainStatus("VERFIRE_READY"):e.maybeGainVerproc("VERFIRE_READY")}});const eD=[["NEVER",100],["RED_MAGIC_MASTERY",120],["RED_MAGIC_MASTERY_III",140]];jn("VERAERO_II",22,{replaceIf:[TS],baseCastTime:2,baseManaCost:400,applicationDelay:.8,basePotency:eD,falloff:0,validateAttempt:e=>!e.hasThreeManaStacks(),onConfirm:e=>e.gainColorMana({w:7})});jn("VERTHUNDER_II",18,{replaceIf:[SS],baseCastTime:2,baseManaCost:400,falloff:0,applicationDelay:.8,basePotency:eD,validateAttempt:e=>!e.hasThreeManaStacks(),onConfirm:e=>e.gainColorMana({b:7})});jn("IMPACT",66,{replaceIf:[Zb,Qb,yE],baseCastTime:5,baseManaCost:400,falloff:0,applicationDelay:.76,basePotency:[["NEVER",200],["RED_MAGIC_MASTERY_III",210]],jobPotencyModifiers:e=>e.hasResourceAvailable("ACCELERATION")?[X.AccelerationImpact]:[],validateAttempt:e=>e.getFinisherCounter()<1&&!e.hasResourceAvailable("GRAND_IMPACT_READY"),onConfirm:e=>e.gainColorMana({w:3,b:3})});jn("GRAND_IMPACT",96,{replaceIf:nd,startOnHotbar:!1,baseCastTime:0,baseManaCost:0,basePotency:600,falloff:.55,applicationDelay:1.55,validateAttempt:yE.condition,highlightIf:yE.condition,onConfirm:e=>e.gainColorMana({w:3,b:3})});gi("RIPOSTE",1,{replaceIf:[{newSkill:"ENCHANTED_RIPOSTE",condition:e=>e.colorManaExceeds(20)}],applicationDelay:.62,potency:130,recastTime:2.5,validateAttempt:e=>!e.colorManaExceeds(20)});gi("ZWERCHHAU",35,{replaceIf:[{newSkill:"ENCHANTED_ZWERCHHAU",condition:e=>e.colorManaExceeds(15)}],applicationDelay:.62,potency:100,combo:{potency:150,resource:"RDM_MELEE_COUNTER",resourceValue:1},recastTime:2.5,validateAttempt:e=>!e.colorManaExceeds(15),highlightIf:e=>e.resources.get("RDM_MELEE_COUNTER").availableAmount()===1});gi("REDOUBLEMENT",50,{replaceIf:[{newSkill:"ENCHANTED_REDOUBLEMENT",condition:e=>e.colorManaExceeds(15)}],applicationDelay:.62,potency:100,combo:{potency:230,resource:"RDM_MELEE_COUNTER",resourceValue:2},recastTime:2.5,validateAttempt:e=>!e.colorManaExceeds(15),highlightIf:e=>e.resources.get("RDM_MELEE_COUNTER").availableAmount()===2});gi("ENCHANTED_RIPOSTE",50,{startOnHotbar:!1,replaceIf:[{newSkill:"RIPOSTE",condition:e=>!e.colorManaExceeds(20)}],applicationDelay:.62,potency:[["NEVER",220],["RED_MAGIC_MASTERY_III",280],["ENCHANTED_BLADE_MASTERY",340]],recastTime:1.5,validateAttempt:e=>e.colorManaExceeds(20),onConfirm:e=>e.consumeColorMana(20)});gi("ENCHANTED_ZWERCHHAU",50,{startOnHotbar:!1,replaceIf:[{newSkill:"ZWERCHHAU",condition:e=>!e.colorManaExceeds(15)}],applicationDelay:.62,potency:[["NEVER",100],["RED_MAGIC_MASTERY_III",150],["ENCHANTED_BLADE_MASTERY",190]],combo:{potency:[["NEVER",290],["RED_MAGIC_MASTERY_III",340],["ENCHANTED_BLADE_MASTERY",380]],resource:"RDM_MELEE_COUNTER",resourceValue:1},recastTime:1.5,validateAttempt:e=>e.colorManaExceeds(15),onConfirm:e=>e.consumeColorMana(15),highlightIf:e=>e.resources.get("RDM_MELEE_COUNTER").availableAmount()===1});gi("ENCHANTED_REDOUBLEMENT",50,{startOnHotbar:!1,replaceIf:[{newSkill:"REDOUBLEMENT",condition:e=>!e.colorManaExceeds(15)}],applicationDelay:.62,potency:[["NEVER",100],["RED_MAGIC_MASTERY_III",130],["ENCHANTED_BLADE_MASTERY",190]],combo:{potency:[["NEVER",470],["RED_MAGIC_MASTERY_III",500],["ENCHANTED_BLADE_MASTERY",560]],resource:"RDM_MELEE_COUNTER",resourceValue:2},recastTime:2.2,validateAttempt:e=>e.colorManaExceeds(15),onConfirm:e=>e.consumeColorMana(15),highlightIf:e=>e.resources.get("RDM_MELEE_COUNTER").availableAmount()===2});const vE=e=>e.resources.get("WHITE_MANA").available(5)&&e.resources.get("BLACK_MANA").available(5);gi("REPRISE",76,{replaceIf:[{newSkill:"ENCHANTED_REPRISE",condition:e=>vE(e)}],applicationDelay:.62,potency:100,recastTime:2.5,validateAttempt:e=>!vE(e)});gi("ENCHANTED_REPRISE",76,{startOnHotbar:!1,replaceIf:[{newSkill:"REPRISE",condition:e=>!vE(e)}],applicationDelay:.62,potency:[["NEVER",290],["RED_MAGIC_MASTERY_III",340],["ENCHANTED_BLADE_MASTERY",420]],recastTime:2.5,validateAttempt:e=>vE(e),onConfirm:e=>{e.resources.get("WHITE_MANA").consume(5),e.resources.get("BLACK_MANA").consume(5)}});const $i=[{newSkill:"MOULINET",condition:e=>e.resources.get("RDM_AOE_COUNTER").availableAmount()===0&&!e.colorManaExceeds(20)||!e.colorManaExceeds(15)},{newSkill:"ENCHANTED_MOULINET",condition:e=>e.colorManaExceeds(20)&&e.resources.get("RDM_AOE_COUNTER").availableAmount()===0},{newSkill:"ENCHANTED_MOULINET_II",condition:e=>e.colorManaExceeds(15)&&e.resources.get("RDM_AOE_COUNTER").availableAmount()===1},{newSkill:"ENCHANTED_MOULINET_III",condition:e=>e.colorManaExceeds(15)&&e.resources.get("RDM_AOE_COUNTER").availableAmount()===2}];gi("MOULINET",52,{replaceIf:$i,falloff:0,applicationDelay:.8,potency:60,recastTime:2.5,validateAttempt:$i[0].condition});gi("ENCHANTED_MOULINET",52,{startOnHotbar:!1,replaceIf:$i,falloff:0,applicationDelay:.8,potency:130,recastTime:1.5,validateAttempt:$i[1].condition,onConfirm:e=>e.consumeColorMana(20)});gi("ENCHANTED_MOULINET_II",52,{startOnHotbar:!1,replaceIf:$i,falloff:0,applicationDelay:.8,potency:140,recastTime:1.5,validateAttempt:$i[2].condition,onConfirm:e=>e.consumeColorMana(15),highlightIf:$i[2].condition});gi("ENCHANTED_MOULINET_III",52,{startOnHotbar:!1,replaceIf:$i,falloff:0,applicationDelay:.8,potency:150,recastTime:1.5,validateAttempt:$i[3].condition,onConfirm:e=>e.consumeColorMana(15),highlightIf:$i[3].condition});const tD=[["NEVER",600],["ENCHANTED_BLADE_MASTERY",650]];jn("VERHOLY",70,{startOnHotbar:!1,baseCastTime:0,baseManaCost:400,falloff:.55,applicationDelay:1.43,basePotency:tD,validateAttempt:e=>e.hasThreeManaStacks(),highlightIf:e=>e.hasThreeManaStacks(),onConfirm:e=>{e.resources.get("WHITE_MANA").availableAmount()<e.resources.get("BLACK_MANA").availableAmount()?e.gainStatus("VERSTONE_READY"):e.maybeGainVerproc("VERSTONE_READY",.2),e.gainColorMana({w:11})}});jn("VERFLARE",68,{startOnHotbar:!1,baseCastTime:0,baseManaCost:400,falloff:.55,applicationDelay:1.43,basePotency:tD,validateAttempt:e=>e.hasThreeManaStacks(),highlightIf:e=>e.hasThreeManaStacks(),onConfirm:e=>{e.resources.get("BLACK_MANA").availableAmount()<e.resources.get("WHITE_MANA").availableAmount()?e.gainStatus("VERFIRE_READY"):e.maybeGainVerproc("VERFIRE_READY",.2),e.gainColorMana({b:11})}});jn("SCORCH",80,{startOnHotbar:!1,replaceIf:nd,baseCastTime:0,baseManaCost:400,falloff:.55,applicationDelay:1.83,basePotency:[["NEVER",680],["ENCHANTED_BLADE_MASTERY",750]],validateAttempt:e=>e.getFinisherCounter()===1,onConfirm:e=>e.gainColorMana({w:4,b:4}),highlightIf:e=>e.getFinisherCounter()===1});jn("RESOLUTION",90,{startOnHotbar:!1,replaceIf:nd,baseCastTime:0,baseManaCost:400,falloff:.55,applicationDelay:1.56,basePotency:[["NEVER",750],["ENCHANTED_BLADE_MASTERY",850]],validateAttempt:e=>e.getFinisherCounter()===2,onConfirm:e=>e.gainColorMana({w:4,b:4}),highlightIf:e=>e.getFinisherCounter()===2});jn("VERCURE",54,{baseCastTime:2,baseManaCost:500,applicationDelay:.8,basePotency:0});jn("VERRAISE",64,{baseCastTime:10,baseManaCost:2400,applicationDelay:.81,basePotency:0});Ke("RDM","EMBOLDEN",58,"cd_EMBOLDEN",{replaceIf:[{newSkill:"VICE_OF_THORNS",condition:e=>e.hasResourceAvailable("THORNED_FLOURISH")}],rscType:"EMBOLDEN",applicationDelay:.62,cooldown:120,onApplication:e=>{e.hasTraitUnlocked("ENHANCED_EMBOLDEN")&&e.gainStatus("THORNED_FLOURISH")}});Ke("RDM","MANAFICATION",60,"cd_MANAFICATION",{replaceIf:[{newSkill:"PREFULGENCE",condition:e=>e.hasResourceAvailable("PREFULGENCE_READY")}],rscType:"MANAFICATION",requiresCombat:!0,applicationDelay:0,cooldown:110,onApplication:e=>{e.gainStatus("MAGICKED_SWORDPLAY",3),(e.hasResourceAvailable("RDM_MELEE_COUNTER")||e.hasResourceAvailable("RDM_FINISHER_COUNTER")||e.hasResourceAvailable("RDM_AOE_COUNTER"))&&N.reportComboBreak(),e.setComboState("RDM_MELEE_COUNTER",0),e.setComboState("RDM_FINISHER_COUNTER",0),e.setComboState("RDM_AOE_COUNTER",0)}});ks("CORPS_A_CORPS",6,"cd_CORPS_A_CORPS",{isPhysical:!0,applicationDelay:.62,potency:130,cooldown:35,maxCharges:2,animationLock:Wt});const nD=[["NEVER",130],["ENHANCED_DISPLACEMENT",180]];ks("ENGAGEMENT",40,"cd_DISPLACEMENT",{isPhysical:!0,applicationDelay:.62,potency:nD,cooldown:35,maxCharges:2});ks("DISPLACEMENT",40,"cd_DISPLACEMENT",{isPhysical:!0,applicationDelay:.62,potency:nD,cooldown:35,maxCharges:2,animationLock:Wt});ks("FLECHE",45,"cd_FLECHE",{isPhysical:!0,applicationDelay:1.16,potency:[["NEVER",460],["ENCHANTED_BLADE_MASTERY",480]],cooldown:25});ks("CONTRE_SIXTE",56,"cd_CONTRE_SIXTE",{isPhysical:!0,falloff:0,applicationDelay:1.16,potency:[["NEVER",380],["ENCHANTED_BLADE_MASTERY",420]],cooldown:35});Ke("RDM","ACCELERATION",50,"cd_ACCELERATION",{rscType:"ACCELERATION",applicationDelay:0,cooldown:55,maxCharges:2,onApplication:e=>{e.hasTraitUnlocked("ENHANCED_ACCELERATION_II")&&(e.hasResourceAvailable("GRAND_IMPACT_READY")&&N.reportWarning({kind:"overwrite",rsc:"GRAND_IMPACT_READY"}),e.gainStatus("GRAND_IMPACT_READY"))}});Ke("RDM","MAGICK_BARRIER",86,"cd_MAGICK_BARRIER",{rscType:"MAGICK_BARRIER",applicationDelay:0,cooldown:120});ks("VICE_OF_THORNS",92,"cd_VICE_OF_THORNS",{startOnHotbar:!1,falloff:.55,applicationDelay:.8,potency:900,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("THORNED_FLOURISH"),onConfirm:e=>e.tryConsumeResource("THORNED_FLOURISH"),highlightIf:e=>e.hasResourceAvailable("THORNED_FLOURISH")});ks("PREFULGENCE",100,"cd_PREFULGENCE",{startOnHotbar:!1,falloff:.55,applicationDelay:1.42,potency:1200,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("PREFULGENCE_READY"),onConfirm:e=>e.tryConsumeResource("PREFULGENCE_READY"),highlightIf:e=>e.hasResourceAvailable("PREFULGENCE_READY")});Object.keys(LT).forEach(e=>Ft(e,`RPR/${ze[e].name}.png`));class IB extends Xt{jobSpecificOtherTargetedBuffViewProps(){return[this.makeCommonTimer("DEATHS_DESIGN",!1)]}jobSpecificSelfTargetedBuffViewProps(){return[...Object.keys(LT).filter(t=>t!=="DEATHS_DESIGN").map(t=>t==="SOULSOW"?this.makeCommonTimerless(t):this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){var T,S;const a=this.state.resources,i=a.get("SOUL").availableAmount(),l=a.get("SHROUD").availableAmount(),r=a.get("LEMURE_SHROUD").availableAmount(),d=a.get("VOID_SHROUD").availableAmount(),E=a.get("RPR_COMBO"),h=a.get("RPR_AOE_COMBO"),A=E.available(1)?(T=E.pendingChange)==null?void 0:T.timeTillEvent:h.available(1)?(S=h.pendingChange)==null?void 0:S.timeTillEvent:void 0,R=[{kind:"text",name:g({en:"Combo Timer",zh:""}),text:(A==null?void 0:A.toFixed(3))??"N/A"},{kind:"bar",name:g({en:"Soul Gauge",zh:""}),color:i<50?t.rpr.soulGaugeLow:t.rpr.soulGaugeHigh,progress:i/100,valueString:Math.floor(i)+"/100"}];return this.state.hasTraitUnlocked("SHROUD_GAUGE")&&R.push({kind:"bar",name:g({en:"Shroud Gauge",zh:""}),color:l<50?t.rpr.shroudGaugeLow:t.rpr.shroudGaugeHigh,progress:l/100,valueString:Math.floor(l)+"/100"},{kind:"counter",name:g({en:"Lemure Shroud",zh:""}),color:t.rpr.lemureShroud,currentStacks:r,maxStacks:5}),this.state.hasTraitUnlocked("VOID_SOUL")&&R.push({kind:"counter",name:g({en:"Void Shroud",zh:""}),color:d<2?t.rpr.voidShroudLow:t.rpr.voidShroudHigh,currentStacks:d,maxStacks:5}),R}}function _t(e,t,a){qe("RPR",e,t,a??{})}_t("SOUL",100);_t("SHROUD",100);_t("DEATHS_DESIGN",1,{});_t("SOUL_REAVER",2,{timeout:30});_t("ENHANCED_GIBBET",1,{timeout:60});_t("ENHANCED_GALLOWS",1,{timeout:60});_t("EXECUTIONER",2,{timeout:30});_t("ENSHROUDED",1,{timeout:30});_t("LEMURE_SHROUD",5,{timeout:30});_t("VOID_SHROUD",5);_t("OBLATIO",1,{timeout:30});_t("ENHANCED_VOID_REAPING",1,{timeout:30});_t("ENHANCED_CROSS_REAPING",1,{timeout:30});_t("IDEAL_HOST",1,{timeout:30});_t("PERFECTIO_OCCULTA",1,{timeout:30});_t("PERFECTIO_PARATA",1,{timeout:30});_t("ARCANE_CIRCLE",1,{timeout:20});_t("CIRCLE_OF_SACRIFICE",1,{timeout:5});_t("BLOODSOWN_CIRCLE",1,{timeout:6});_t("IMMORTAL_SACRIFICE",8,{timeout:30});_t("ARCANE_CREST",1,{timeout:5});_t("CREST_OF_TIME_BORROWED",1,{timeout:5});_t("CREST_OF_TIME_RETURNED",1,{timeout:15});_t("SOULSOW",1,{default:1});_t("THRESHOLD",1,{timeout:10});_t("ENHANCED_HARPE",1,{timeout:10});_t("HELLS_INGRESS_USED",1);_t("RPR_COMBO",2,{timeout:30});_t("RPR_AOE_COMBO",1,{timeout:30});class _B extends qt{constructor(t){super(t);const a=this.hasTraitUnlocked("TEMPERED_SOUL")?2:1;this.cooldowns.set(new Ge("cd_SOUL_SLICE",30,a,a)),this.registerRecurringEvents()}get statusPropsGenerator(){return new IB(this)}jobSpecificAddDamageBuffCovers(t,a){this.hasResourceAvailable("ARCANE_CIRCLE")&&t.addBuff(x.ArcaneCircle),this.hasResourceAvailable("DEATHS_DESIGN")&&t.addBuff(x.DeathsDesign)}refreshDeathsDesign(){const t=this.resources.get("DEATHS_DESIGN"),a=Math.min(this.resources.timeTillReady("DEATHS_DESIGN")+30,60);if(t.available(1)){t.overrideTimer(this,a);return}t.gain(1),this.resources.addResourceEvent({rscType:"DEATHS_DESIGN",name:"drop Death's Design",delay:a,fnOnRsc:i=>{i.consume(1)}})}setTimedResource(t,a){this.tryConsumeResource(t),this.resources.get(t).gain(a),this.enqueueResourceDrop(t)}processCombo(t){const a=this.resources.get("RPR_COMBO").availableAmount(),i=this.resources.get("RPR_AOE_COMBO").availableAmount(),[l,r]=new Map([["SLICE",[1,0]],["WAXING_SLICE",[a===1?2:0,0]],["INFERNAL_SLICE",[0,0]],["SPINNING_SCYTHE",[0,1]],["NIGHTMARE_SCYTHE",[0,0]]]).get(t)??[a,i];l!==a&&this.setComboState("RPR_COMBO",l),r!==i&&this.setComboState("RPR_AOE_COMBO",r)}processSoulGauge(t){const a=this.resources.get("SOUL");if(["SLICE","WAXING_SLICE","INFERNAL_SLICE","SPINNING_SCYTHE","NIGHTMARE_SCYTHE","HARPE","HARVEST_MOON"].includes(t)){a.gain(10);return}if(["SOUL_SLICE","SOUL_SCYTHE"].includes(t)){a.gain(50);return}if(["BLOOD_STALK","UNVEILED_GALLOWS","UNVEILED_GIBBET","GRIM_SWATHE","GLUTTONY"].includes(t)){a.consume(50);return}}processShroudGauge(t){const a=this.resources.get("SHROUD");if(["GALLOWS","GIBBET","EXECUTIONERS_GALLOWS","EXECUTIONERS_GIBBET","GUILLOTINE","EXECUTIONERS_GUILLOTINE"].includes(t)){a.gain(10);return}t==="ENSHROUD"&&!this.resources.get("IDEAL_HOST").available(1)&&a.consume(50)}processReaversExecutioner(t){const a=this.resources.get("SOUL_REAVER"),i=this.resources.get("EXECUTIONER");if(["GIBBET","GALLOWS","GUILLOTINE"].includes(t)){a.consume(1);return}if(["EXECUTIONERS_GIBBET","EXECUTIONERS_GALLOWS","EXECUTIONERS_GUILLOTINE"].includes(t)){i.consume(1);return}if(this.skillsList.get(t).cdName==="cd_GCD"&&(a.consume(a.availableAmount()),i.consume(i.availableAmount())),["BLOOD_STALK","UNVEILED_GALLOWS","UNVEILED_GIBBET","GRIM_SWATHE"].includes(t)){a.consume(a.availableAmount()),i.consume(i.availableAmount()),this.setTimedResource("SOUL_REAVER",1);return}if(t==="GLUTTONY"){if(a.consume(a.availableAmount()),i.consume(i.availableAmount()),this.hasTraitUnlocked("ENHANCED_GLUTTONY")){this.setTimedResource("EXECUTIONER",2);return}this.setTimedResource("SOUL_REAVER",2);return}}processGibbetGallows(t){const a=this.resources.get("SOUL_REAVER"),i=this.resources.get("EXECUTIONER");["GIBBET","GALLOWS","EXECUTIONERS_GIBBET","EXECUTIONERS_GALLOWS"].includes(t)||(a.consume(a.availableAmount()),i.consume(i.availableAmount()));const l=new Map([["GIBBET","ENHANCED_GIBBET"],["EXECUTIONERS_GIBBET","ENHANCED_GIBBET"],["GALLOWS","ENHANCED_GALLOWS"],["EXECUTIONERS_GALLOWS","ENHANCED_GALLOWS"]]),r=new Map([["GIBBET","ENHANCED_GALLOWS"],["EXECUTIONERS_GIBBET","ENHANCED_GALLOWS"],["GALLOWS","ENHANCED_GIBBET"],["EXECUTIONERS_GALLOWS","ENHANCED_GIBBET"]]),d=this.resources.get(l.get(t)),E=this.resources.get(r.get(t));d.consume(d.availableAmount()),E.consume(E.availableAmount()),E.gain(1)}processCircleOfSacrifice(t){if(!this.hasResourceAvailable("CIRCLE_OF_SACRIFICE"))return;gl("RPR",t).potencyFn(this)>0&&(this.resources.get("IMMORTAL_SACRIFICE").availableAmount()===0?this.setTimedResource("IMMORTAL_SACRIFICE",1):this.resources.get("IMMORTAL_SACRIFICE").gain(1),this.tryConsumeResource("CIRCLE_OF_SACRIFICE",!0))}enterEnshroud(){this.hasResourceAvailable("IDEAL_HOST")&&this.resources.get("IDEAL_HOST").consume(1),this.hasTraitUnlocked("ENHANCED_ENSHROUD")&&this.setTimedResource("OBLATIO",1),this.setTimedResource("LEMURE_SHROUD",5),this.tryConsumeResource("PERFECTIO_PARATA",!0)}exitEnshroud(){this.tryConsumeResource("ENSHROUDED"),this.tryConsumeResource("OBLATIO"),this.tryConsumeResource("LEMURE_SHROUD"),this.tryConsumeResource("VOID_SHROUD"),this.tryConsumeResource("ENHANCED_CROSS_REAPING"),this.tryConsumeResource("ENHANCED_VOID_REAPING")}}const gB=new Set(["SHADOW_OF_DEATH","WHORL_OF_DEATH","HARVEST_MOON","HARPE","VOID_REAPING","CROSS_REAPING","GRIM_REAPING","LEMURES_SLICE","LEMURES_SCYTHE","SACRIFICIUM","COMMUNIO","ARCANE_CIRCLE","HELLS_EGRESS","HELLS_INGRESS","REGRESS","ARCANE_CREST","FEINT","LEG_SWEEP","BLOODBATH","TRUE_NORTH","ARMS_LENGTH","SECOND_WIND","SPRINT","TINCTURE"]),df=(e,t)=>a=>{const i=["GIBBET","GALLOWS","GUILLOTINE"].includes(t)?a.resources.get("SOUL_REAVER"):a.resources.get("EXECUTIONER");return a.resources.get(e).available(1)||i.available(1)&&!a.hasResourceAvailable("ENHANCED_GIBBET")&&!a.hasResourceAvailable("ENHANCED_GALLOWS")},IS=e=>e.hasResourceAvailable("SOUL_REAVER"),_S=e=>e.hasResourceAvailable("EXECUTIONER"),to=e=>t=>t.resources.get("SOUL").availableAmount()>=e,gS=e=>gB.has(e),hf=e=>ke(t=>t.processCombo(e),t=>t.processSoulGauge(e),t=>t.processShroudGauge(e),t=>t.processReaversExecutioner(e),t=>t.processCircleOfSacrifice(e)),NS=e=>{const t=[];return e.hasResourceAvailable("ARCANE_CIRCLE")&&t.push(X.ArcaneCircle),e.hasResourceAvailable("DEATHS_DESIGN")&&t.push(X.DeathsDesign),t},Ef=(e,t,a)=>{const i=ke(hf(e),a.onConfirm),l=Qu(r=>!r.resources.get("ENSHROUDED").available(1)||gS(e),a.validateAttempt??(()=>!0));return $a("RPR",e,t,{...a,recastTime:r=>r.config.adjustedGCD(a.recastTime),onConfirm:i,validateAttempt:l,isInstantFn:r=>!(e==="COMMUNIO"||e==="HARPE"&&!r.hasResourceAvailable("ENHANCED_HARPE")||e==="SOULSOW"&&r.isInCombat()),jobPotencyModifiers:NS})},Cn=(e,t,a)=>{const i=ke(hf(e),a.onConfirm),l=Qu(r=>!r.resources.get("ENSHROUDED").available(1)||gS(e),a.validateAttempt??(()=>!0));return on("RPR",e,t,{...a,onConfirm:i,jobPotencyModifiers:r=>{const d=NS(r);if(["GIBBET","EXECUTIONERS_GIBBET"].includes(e)&&r.hasResourceAvailable("ENHANCED_GIBBET")&&d.push(X.EnhancedGibbetGallows),["GALLOWS","EXECUTIONERS_GALLOWS"].includes(e)&&r.hasResourceAvailable("ENHANCED_GALLOWS")&&d.push(X.EnhancedGibbetGallows),e==="VOID_REAPING"&&r.hasResourceAvailable("ENHANCED_VOID_REAPING")&&d.push(X.EnhancedReaping),e==="CROSS_REAPING"&&r.hasResourceAvailable("ENHANCED_CROSS_REAPING")&&d.push(X.EnhancedReaping),e==="PLENTIFUL_HARVEST"&&r.hasResourceAvailable("IMMORTAL_SACRIFICE"))for(let E=0;E<r.resources.get("IMMORTAL_SACRIFICE").availableAmount();E++)d.push(X.ImmortalSacrifice);return d},validateAttempt:l})},Pa=(e,t,a,i)=>{const l=ke(hf(e),i.onConfirm),r=Qu(d=>!d.resources.get("ENSHROUDED").available(1)||gS(e),i.validateAttempt??(()=>!0));return lt("RPR",e,t,a,{...i,onConfirm:l,validateAttempt:r,jobPotencyModifiers:NS})};Cn("SHADOW_OF_DEATH",10,{potency:300,aspect:_e.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:1.15,onConfirm:e=>e.refreshDeathsDesign()});Cn("SLICE",1,{potency:[["NEVER",260],["MELEE_MASTERY_II_RPR",320],["MELEE_MASTERY_III_RPR",460]],aspect:_e.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.49});Cn("WAXING_SLICE",5,{potency:[["NEVER",100],["MELEE_MASTERY_II_RPR",160],["MELEE_MASTERY_III_RPR",260]],combo:{potency:[["NEVER",340],["MELEE_MASTERY_II_RPR",400],["MELEE_MASTERY_III_RPR",500]],resource:"RPR_COMBO",resourceValue:1},aspect:_e.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.58,highlightIf:e=>e.hasResourceExactly("RPR_COMBO",1)});Cn("INFERNAL_SLICE",30,{potency:[["NEVER",100],["MELEE_MASTERY_II_RPR",180],["MELEE_MASTERY_III_RPR",280]],combo:{potency:[["NEVER",420],["MELEE_MASTERY_II_RPR",500],["MELEE_MASTERY_III_RPR",600]],resource:"RPR_COMBO",resourceValue:2},aspect:_e.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.54,highlightIf:e=>e.hasResourceExactly("RPR_COMBO",2)});Cn("SOUL_SLICE",60,{potency:[["NEVER",460],["MELEE_MASTERY_III_RPR",520]],aspect:_e.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.99,secondaryCooldown:{cdName:"cd_SOUL_SLICE",cooldown:30,maxCharges:2}});Cn("GIBBET",70,{replaceIf:[{newSkill:"VOID_REAPING",condition:e=>e.hasResourceAvailable("ENSHROUDED")},{newSkill:"EXECUTIONERS_GIBBET",condition:e=>e.hasResourceAvailable("EXECUTIONER")}],potency:[["NEVER",460],["MELEE_MASTERY_III_RPR",500]],positional:{potency:[["NEVER",520],["MELEE_MASTERY_III_RPR",560]],location:"flank"},aspect:_e.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.5,highlightIf:df("ENHANCED_GIBBET","GIBBET"),validateAttempt:IS,onConfirm:e=>{e.tryConsumeResource("ENHANCED_GIBBET"),e.setTimedResource("ENHANCED_GALLOWS",1)}});Cn("GALLOWS",70,{replaceIf:[{newSkill:"CROSS_REAPING",condition:e=>e.hasResourceAvailable("ENSHROUDED")},{newSkill:"EXECUTIONERS_GALLOWS",condition:e=>e.resources.get("EXECUTIONER").available(1)}],potency:[["NEVER",460],["MELEE_MASTERY_III_RPR",500]],positional:{potency:[["NEVER",520],["MELEE_MASTERY_III_RPR",560]],location:"rear"},aspect:_e.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.53,highlightIf:df("ENHANCED_GALLOWS","GALLOWS"),validateAttempt:IS,onConfirm:e=>{e.tryConsumeResource("ENHANCED_GALLOWS"),e.setTimedResource("ENHANCED_GIBBET",1)}});Cn("EXECUTIONERS_GIBBET",96,{startOnHotbar:!1,potency:700,positional:{potency:760,location:"flank"},aspect:_e.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.62,highlightIf:df("ENHANCED_GIBBET","EXECUTIONERS_GIBBET"),validateAttempt:_S,onConfirm:e=>{e.tryConsumeResource("ENHANCED_GIBBET"),e.setTimedResource("ENHANCED_GALLOWS",1)}});Cn("EXECUTIONERS_GALLOWS",96,{startOnHotbar:!1,potency:700,positional:{potency:760,location:"flank"},aspect:_e.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.62,highlightIf:df("ENHANCED_GALLOWS","EXECUTIONERS_GALLOWS"),validateAttempt:_S,onConfirm:e=>{e.tryConsumeResource("ENHANCED_GALLOWS"),e.setTimedResource("ENHANCED_GIBBET",1)}});Cn("PLENTIFUL_HARVEST",88,{potency:720,aspect:_e.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:.2,applicationDelay:1.16,highlightIf:e=>e.hasResourceAvailable("IMMORTAL_SACRIFICE",1),validateAttempt:e=>e.hasResourceAvailable("IMMORTAL_SACRIFICE",1)&&!e.hasResourceAvailable("BLOODSOWN_CIRCLE"),onConfirm:e=>{e.tryConsumeResource("IMMORTAL_SACRIFICE",!0),e.setTimedResource("IDEAL_HOST",1),e.setTimedResource("PERFECTIO_OCCULTA",1)}});Ef("COMMUNIO",90,{replaceIf:[{condition:e=>e.hasResourceAvailable("PERFECTIO_PARATA"),newSkill:"PERFECTIO"}],potency:1100,aspect:_e.Other,castTime:1.3,recastTime:2.5,falloff:.2,applicationDelay:1.16,validateAttempt:e=>e.hasResourceAvailable("ENSHROUDED"),highlightIf:e=>e.hasResourceAvailable("ENSHROUDED")&&e.resources.get("LEMURE_SHROUD").availableAmount()===1,onConfirm:e=>{e.tryConsumeResource("PERFECTIO_OCCULTA")&&e.setTimedResource("PERFECTIO_PARATA",1),e.exitEnshroud(),e.tryConsumeResource("ENHANCED_CROSS_REAPING"),e.tryConsumeResource("ENHANCED_VOID_REAPING")}});Ef("HARPE",15,{potency:300,aspect:_e.Other,castTime:1.3,recastTime:2.5,applicationDelay:.9,highlightIf:e=>e.hasResourceAvailable("ENHANCED_HARPE"),onConfirm:e=>e.tryConsumeResource("ENHANCED_HARPE")});Ef("SOULSOW",82,{potency:0,replaceIf:[{condition:e=>e.hasResourceAvailable("SOULSOW"),newSkill:"HARVEST_MOON"}],startOnHotbar:!0,aspect:_e.Other,castTime:5,recastTime:2.5,applicationDelay:0,onConfirm:e=>e.resources.get("SOULSOW").gain(1)});Ef("HARVEST_MOON",82,{potency:[["NEVER",600],["MELEE_MASTERY_III_RPR",800]],startOnHotbar:!1,aspect:_e.Other,castTime:0,recastTime:2.5,falloff:.4,applicationDelay:.9,validateAttempt:e=>e.hasResourceAvailable("SOULSOW"),highlightIf:e=>e.hasResourceAvailable("SOULSOW"),onConfirm:e=>e.resources.get("SOULSOW").consume(1)});Pa("GLUTTONY",76,"cd_GLUTTONY",{replaceIf:[{condition:e=>e.hasResourceAvailable("ENSHROUDED"),newSkill:"SACRIFICIUM"}],isPhysical:!1,potency:520,startOnHotbar:!0,falloff:.25,applicationDelay:1.06,cooldown:60,validateAttempt:to(50),highlightIf:to(50)});Pa("BLOOD_STALK",50,"cd_BLOOD_STALK",{replaceIf:[{newSkill:"LEMURES_SLICE",condition:e=>e.hasResourceAvailable("ENSHROUDED")},{newSkill:"UNVEILED_GIBBET",condition:e=>e.hasResourceAvailable("ENHANCED_GIBBET")},{newSkill:"UNVEILED_GALLOWS",condition:e=>e.hasResourceAvailable("ENHANCED_GALLOWS")}],isPhysical:!0,potency:340,startOnHotbar:!0,applicationDelay:.89,cooldown:1,validateAttempt:to(50),highlightIf:to(50)});Pa("GRIM_SWATHE",55,"cd_BLOOD_STALK",{replaceIf:[{condition:e=>e.hasResourceAvailable("ENSHROUDED"),newSkill:"LEMURES_SCYTHE"}],isPhysical:!0,potency:140,startOnHotbar:!0,falloff:0,applicationDelay:.58,cooldown:1,validateAttempt:to(50),highlightIf:to(50)});Pa("UNVEILED_GIBBET",70,"cd_BLOOD_STALK",{isPhysical:!0,potency:440,startOnHotbar:!1,applicationDelay:.54,cooldown:1,validateAttempt:to(50),highlightIf:to(50)});Pa("UNVEILED_GALLOWS",70,"cd_BLOOD_STALK",{isPhysical:!0,potency:440,startOnHotbar:!1,applicationDelay:.54,cooldown:1,validateAttempt:to(50),highlightIf:to(50)});Pa("LEMURES_SLICE",86,"cd_LEMURES_SLICE",{isPhysical:!0,potency:[["NEVER",240],["MELEE_MASTERY_III_RPR",280]],startOnHotbar:!1,applicationDelay:.7,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("VOID_SHROUD",2),highlightIf:e=>e.hasResourceAvailable("VOID_SHROUD",2),onConfirm:e=>{e.resources.get("VOID_SHROUD").consume(2)}});Pa("SACRIFICIUM",92,"cd_SACRIFICIUM",{isPhysical:!1,potency:600,startOnHotbar:!1,falloff:.2,applicationDelay:.76,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("OBLATIO"),highlightIf:e=>e.hasResourceAvailable("OBLATIO"),onConfirm:e=>e.tryConsumeResource("OBLATIO")});Ke("RPR","ARCANE_CIRCLE",72,"cd_ARCANE_CIRCLE",{rscType:"ARCANE_CIRCLE",applicationDelay:.6,startOnHotbar:!0,maxCharges:1,potency:0,onApplication:e=>{e.hasTraitUnlocked("ENHANCED_ARCANE_CIRCLE")&&(e.setTimedResource("CIRCLE_OF_SACRIFICE",1),e.setTimedResource("BLOODSOWN_CIRCLE",1))},cooldown:120});Cn("VOID_REAPING",80,{startOnHotbar:!1,potency:[["NEVER",460],["MELEE_MASTERY_III_RPR",540]],aspect:_e.Physical,recastTime:1.5,applicationDelay:.53,highlightIf:e=>e.resources.get("LEMURE_SHROUD").availableAmount()>1&&!e.hasResourceAvailable("ENHANCED_CROSS_REAPING"),validateAttempt:e=>e.hasResourceAvailable("LEMURE_SHROUD"),onConfirm:e=>{e.tryConsumeResource("ENHANCED_VOID_REAPING"),e.setTimedResource("ENHANCED_CROSS_REAPING",1),e.resources.get("LEMURE_SHROUD").consume(1),e.resources.get("VOID_SHROUD").gain(1),e.resources.get("LEMURE_SHROUD").availableAmount()===0&&e.exitEnshroud()}});Cn("CROSS_REAPING",80,{startOnHotbar:!1,potency:[["NEVER",460],["MELEE_MASTERY_III_RPR",540]],aspect:_e.Physical,recastTime:1.5,applicationDelay:.53,highlightIf:e=>e.resources.get("LEMURE_SHROUD").availableAmount()>1&&!e.hasResourceAvailable("ENHANCED_VOID_REAPING"),validateAttempt:e=>e.hasResourceAvailable("LEMURE_SHROUD"),onConfirm:e=>{e.tryConsumeResource("ENHANCED_CROSS_REAPING"),e.setTimedResource("ENHANCED_VOID_REAPING",1),e.resources.get("LEMURE_SHROUD").consume(1),e.resources.get("VOID_SHROUD").gain(1),e.resources.get("LEMURE_SHROUD").availableAmount()===0&&e.exitEnshroud()}});Ke("RPR","ENSHROUD",80,"cd_ENSHROUD",{rscType:"ENSHROUDED",highlightIf:e=>e.hasResourceAvailable("SHROUD",50)||e.hasResourceAvailable("IDEAL_HOST"),applicationDelay:0,startOnHotbar:!0,cooldown:5,validateAttempt:e=>e.hasResourceAvailable("SHROUD",50)||e.hasResourceAvailable("IDEAL_HOST"),onConfirm:ke(hf("ENSHROUD"),e=>e.enterEnshroud())});Cn("PERFECTIO",100,{potency:1300,aspect:_e.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:.2,applicationDelay:1.29,startOnHotbar:!1,highlightIf:e=>e.hasResourceAvailable("PERFECTIO_PARATA"),validateAttempt:e=>e.hasResourceAvailable("PERFECTIO_PARATA"),onConfirm:e=>{e.resources.get("PERFECTIO_PARATA").consume(1)}});Pa("REGRESS",74,"cd_BLOOD_STALK",{cooldown:1,animationLock:Wt,startOnHotbar:!1,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("THRESHOLD"),onConfirm:e=>e.resources.get("THRESHOLD").consume(1)});Pa("HELLS_INGRESS",20,"cd_INGRESS_EGRESS",{replaceIf:[{condition:e=>e.hasResourceAvailable("THRESHOLD")&&e.hasResourceAvailable("HELLS_INGRESS_USED"),newSkill:"REGRESS"}],cooldown:20,animationLock:Wt,onConfirm:e=>{e.resources.get("HELLS_INGRESS_USED").gain(1),e.hasTraitUnlocked("HELLSGATE")&&e.setTimedResource("THRESHOLD",1),e.setTimedResource("ENHANCED_HARPE",1)}});Pa("HELLS_EGRESS",20,"cd_INGRESS_EGRESS",{replaceIf:[{condition:e=>e.hasResourceAvailable("THRESHOLD")&&!e.hasResourceAvailable("HELLS_INGRESS_USED"),newSkill:"REGRESS"}],cooldown:20,animationLock:Wt,onConfirm:e=>{e.tryConsumeResource("HELLS_INGRESS_USED"),e.hasTraitUnlocked("HELLSGATE")&&e.setTimedResource("THRESHOLD",1),e.setTimedResource("ENHANCED_HARPE",1)}});Pa("ARCANE_CREST",40,"cd_ARCANE_CREST",{replaceIf:[{condition:e=>e.hasResourceAvailable("CREST_OF_TIME_BORROWED"),newSkill:"ARCANE_CREST_POP"}],cooldown:30,onConfirm:e=>e.setTimedResource("CREST_OF_TIME_BORROWED",1)});Pa("ARCANE_CREST_POP",40,"cd_ARCANE_CREST_POP",{cooldown:1,animationLock:Ia,startOnHotbar:!1,onConfirm:e=>{e.tryConsumeResource("CREST_OF_TIME_BORROWED"),e.setTimedResource("CREST_OF_TIME_RETURNED",1)},validateAttempt:e=>e.hasResourceAvailable("CREST_OF_TIME_BORROWED"),highlightIf:e=>e.hasResourceAvailable("CREST_OF_TIME_BORROWED")});Cn("WHORL_OF_DEATH",35,{potency:100,aspect:_e.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:1.15,onConfirm:e=>e.refreshDeathsDesign()});Cn("SPINNING_SCYTHE",25,{potency:140,aspect:_e.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.62});Cn("NIGHTMARE_SCYTHE",45,{potency:120,combo:{potency:180,resource:"RPR_AOE_COMBO",resourceValue:1},aspect:_e.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.8,highlightIf:e=>e.hasResourceExactly("RPR_AOE_COMBO",1)});Cn("SOUL_SCYTHE",65,{potency:180,aspect:_e.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.66,secondaryCooldown:{cdName:"cd_SOUL_SLICE",cooldown:30,maxCharges:2}});Cn("EXECUTIONERS_GUILLOTINE",96,{startOnHotbar:!1,potency:260,aspect:_e.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.53,highlightIf:e=>e.hasResourceAvailable("EXECUTIONER"),validateAttempt:_S});Cn("GRIM_REAPING",80,{startOnHotbar:!1,potency:200,recastTime:1.5,falloff:0,applicationDelay:.8,highlightIf:e=>e.resources.get("LEMURE_SHROUD").availableAmount()>1,validateAttempt:e=>e.hasResourceAvailable("LEMURE_SHROUD"),onConfirm:e=>{e.resources.get("LEMURE_SHROUD").consume(1),e.resources.get("VOID_SHROUD").gain(1),e.resources.get("LEMURE_SHROUD").availableAmount()===0&&e.exitEnshroud()},aspect:_e.Physical});Pa("LEMURES_SCYTHE",86,"cd_LEMURES_SLICE",{isPhysical:!0,potency:100,falloff:0,applicationDelay:.66,cooldown:1,startOnHotbar:!1,validateAttempt:e=>e.hasResourceAvailable("VOID_SHROUD",2),highlightIf:e=>e.hasResourceAvailable("VOID_SHROUD",2),onConfirm:e=>{e.resources.get("VOID_SHROUD").consume(2)}});Cn("GUILLOTINE",70,{replaceIf:[{newSkill:"GRIM_REAPING",condition:e=>e.hasResourceAvailable("ENSHROUDED")},{newSkill:"EXECUTIONERS_GUILLOTINE",condition:e=>e.resources.get("EXECUTIONER").available(1)}],potency:200,aspect:_e.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.49,highlightIf:e=>e.hasResourceAvailable("SOUL_REAVER"),validateAttempt:IS});Pa("GAIN_SOUL_GAUGE",50,"cd_GAIN_SOUL_GAUGE",{applicationDelay:0,animationLock:Ia,cooldown:.01,onConfirm:e=>e.resources.get("SOUL").gain(10)});Object.keys(HT).forEach(e=>Ft(e,`SAM/${ze[e].name}.png`));class NB extends Xt{jobSpecificOtherTargetedBuffViewProps(){return[this.makeCommonTimer("HIGANBANA_DOT",!1)]}jobSpecificSelfTargetedBuffViewProps(){return Object.keys(HT).filter(t=>t!=="HIGANBANA_DOT").map(t=>this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){const a=this.state.resources,i=a.get("KENKI").availableAmount(),l=a.get("MEDITATION").availableAmount();return[{kind:"sen",name:g({en:"sen",zh:""}),hasSetsu:this.state.hasResourceAvailable("SETSU"),hasGetsu:this.state.hasResourceAvailable("GETSU"),hasKa:this.state.hasResourceAvailable("KA_SEN"),setsuColor:t.sam.setsu,getsuColor:t.sam.getsu,kaColor:t.sam.kaSen},{kind:"bar",name:g({en:"kenki",zh:""}),color:t.sam.kenki,progress:i/100,valueString:i.toFixed(0)},{kind:"counter",name:g({en:"meditation",zh:""}),color:t.sam.meditation,currentStacks:l,maxStacks:3}]}}const On=(e,t,a)=>{qe("SAM",e,t,a??{})};On("MEIKYO_SHISUI",3,{timeout:20,warnOnTimeout:!0});On("FUGETSU",1,{timeout:40});On("FUKA",1,{timeout:40});On("ZANSHIN_READY",1,{timeout:30});On("TENDO",1,{timeout:30,warnOnTimeout:!0});On("OGI_READY",1,{timeout:30});On("TSUBAME_GAESHI_READY",1,{timeout:30,warnOnTimeout:!0});On("THIRD_EYE",1,{timeout:4});On("TENGENTSU",1,{timeout:4});On("TENGENTSUS_FORESIGHT",1,{timeout:9});On("ENHANCED_ENPI",1,{timeout:15});On("MEDITATE",1,{timeout:15.2});On("KENKI",100,{warnOnOvercap:!0});On("SETSU",1,{warnOnOvercap:!0});On("GETSU",1,{warnOnOvercap:!0});On("KA_SEN",1,{warnOnOvercap:!0});On("MEDITATION",3,{warnOnOvercap:!0});On("HIGANBANA_DOT",1,{timeout:60});const aD=["SAM_TWO_READY","SAM_TWO_AOE_READY","GEKKO_READY","KASHA_READY","KAESHI_OGI_READY"];aD.forEach(e=>On(e,1,{timeout:30}));On("KAESHI_TRACKER",4,{timeout:30});class pB extends qt{constructor(t){super(t);const a=this.hasTraitUnlocked("ENHANCED_HISSATSU")?60:120,i=this.hasTraitUnlocked("ENHANCED_MEIKYO_SHISUI")?2:1;[new Ge("cd_MEIKYO_SHISUI",55,i,i),new Ge("cd_SENEI_GUREN",a,1,1)].forEach(l=>this.cooldowns.set(l)),super.registerRecurringEvents([{reportName:Xe("HIGANBANA_DOT"),groupedEffects:[{effectName:"HIGANBANA_DOT",appliedBy:["HIGANBANA"]}]}])}get statusPropsGenerator(){return new NB(this)}inherentSpeedModifier(){return this.hasTraitUnlocked("ENHANCED_FUGETSU_AND_FUKA")?13:10}jobSpecificAddDamageBuffCovers(t,a){this.hasResourceAvailable("ENHANCED_ENPI")&&a.name==="ENPI"&&t.addBuff(x.EnhancedEnpi),this.hasResourceAvailable("FUGETSU")&&t.addBuff(x.Fugetsu)}jobSpecificAddSpeedBuffCovers(t,a){this.hasResourceAvailable("FUKA")&&a.cdName==="cd_GCD"&&t.addBuff(x.Fuka)}hitCombo(t){return super.hitCombo(t)||this.hasResourceAvailable("MEIKYO_SHISUI")}cancelChanneledSkills(){const t=this.findNextQueuedEventByTag(Ea.MeditateTick);t&&(t.canceled=!0),this.tryConsumeResource("MEDITATE")}getFugetsuModifier(){return this.hasTraitUnlocked("ENHANCED_FUGETSU_AND_FUKA")?X.FugetsuEnhanced:X.FugetsuBase}getFukaModifier(){return this.hasResourceAvailable("FUKA")?this.inherentSpeedModifier():0}checkCombo(t){return this.hasResourceAvailable(t)||this.hasResourceAvailable("MEIKYO_SHISUI")}refreshBuff(t,a){this.addEvent(new ve(`gain ${t}`,a,()=>{this.gainStatus(t)}))}progressActiveCombo(t){aD.forEach(a=>{t.includes(a)||this.setComboState(a,0)}),t.forEach(a=>this.setComboState(a,1))}tryConsumeMeikyo(){this.tryConsumeResource("MEIKYO_SHISUI")}gainKenki(t){this.resources.get("KENKI").gain(t)}gainMeditation(){this.resources.get("MEDITATION").gain(1)}gainSen(t){this.resources.get(t).gain(1)}countSen(){return["GETSU","SETSU","KA_SEN"].reduce((t,a)=>this.hasResourceAvailable(a)?t+1:t,0)}consumeAllSen(){["GETSU","SETSU","KA_SEN"].forEach(t=>this.tryConsumeResource(t))}startMeditateTimer(){const t=a=>{const i=new ve("meditate tick",3,()=>{a<5&&(this.isInCombat()&&(N.reportMeditateTick(this.time,"+kenki/meditation"),this.resources.get("KENKI").gain(10),this.resources.get("MEDITATION").gain(1)),this.addEvent(t(a+1)))});return i.addTag(Ea.MeditateTick),i};this.addEvent(t(0))}}const wt=(e,t,a)=>{const i=r=>{const d=r.hasResourceAvailable("FUGETSU")?[r.getFugetsuModifier()]:[];return a.jobPotencyModifiers&&d.push(...a.jobPotencyModifiers(r)),d};let l=a.baseCastTime||0;return l&&(l=r=>r.hasTraitUnlocked("ENHANCED_IAIJUTSU")?a.baseCastTime||0:r.config.adjustedSksCastTime(1.8,r.getFukaModifier())),on("SAM",e,t,{...a,castTime:l,recastTime:r=>r.config.adjustedSksGCD(a.baseRecastTime??2.5,r.getFukaModifier()),potency:a.basePotency,jobPotencyModifiers:i,isInstantFn:r=>!(a.baseCastTime&&a.baseCastTime>0)})},ei=(e,t,a,i)=>(i.potency&&!i.jobPotencyModifiers&&(i.jobPotencyModifiers=l=>l.hasResourceAvailable("FUGETSU")?[l.getFugetsuModifier()]:[]),lt("SAM",e,t,a,i));wt("ENPI",15,{applicationDelay:.71,basePotency:100,onConfirm:e=>{e.hasResourceAvailable("ENHANCED_ENPI")&&e.tryConsumeResource("ENHANCED_ENPI"),e.gainKenki(10)},jobPotencyModifiers:e=>e.hasResourceAvailable("ENHANCED_ENPI")?[e.hasTraitUnlocked("WAY_OF_THE_SAMURAI_III")?X.YatenpiEnhanced:X.YatenpiBase]:[],highlightIf:e=>e.hasResourceAvailable("ENHANCED_ENPI")});wt("HAKAZE",1,{autoUpgrade:{trait:"HAKAZE_MASTERY",otherSkill:"GYOFU"},applicationDelay:.85,basePotency:200,onConfirm:e=>{e.tryConsumeMeikyo(),e.gainKenki(5),e.progressActiveCombo(["SAM_TWO_READY"])}});wt("GYOFU",92,{autoDowngrade:{trait:"HAKAZE_MASTERY",otherSkill:"HAKAZE"},applicationDelay:.85,basePotency:240,onConfirm:e=>{e.tryConsumeMeikyo(),e.gainKenki(5),e.progressActiveCombo(["SAM_TWO_READY"])}});wt("YUKIKAZE",50,{applicationDelay:.85,basePotency:[["NEVER",100],["WAY_OF_THE_SAMURAI_II",110],["WAY_OF_THE_SAMURAI_III",160]],combo:{potency:[["NEVER",280],["WAY_OF_THE_SAMURAI_II",290],["WAY_OF_THE_SAMURAI_III",340]],resource:"SAM_TWO_READY",resourceValue:1},onConfirm:e=>{e.checkCombo("SAM_TWO_READY")&&(e.gainKenki(15),e.gainSen("SETSU")),e.tryConsumeMeikyo(),e.progressActiveCombo([])},highlightIf:e=>e.checkCombo("SAM_TWO_READY")});wt("JINPU",4,{applicationDelay:.62,basePotency:[["NEVER",120],["WAY_OF_THE_SAMURAI_III",140]],combo:{potency:[["NEVER",280],["WAY_OF_THE_SAMURAI_III",300]],resource:"SAM_TWO_READY",resourceValue:1},onConfirm:e=>{e.checkCombo("SAM_TWO_READY")?(e.gainKenki(5),e.refreshBuff("FUGETSU",.62),e.tryConsumeMeikyo(),e.progressActiveCombo(["GEKKO_READY"])):(e.tryConsumeMeikyo(),e.progressActiveCombo([]))},highlightIf:e=>e.checkCombo("SAM_TWO_READY")});wt("GEKKO",30,{applicationDelay:.76,basePotency:[["NEVER",100],["WAY_OF_THE_SAMURAI_II",110],["WAY_OF_THE_SAMURAI_III",160]],combo:{potency:[["NEVER",310],["WAY_OF_THE_SAMURAI_II",320],["WAY_OF_THE_SAMURAI_III",370]],resource:"GEKKO_READY",resourceValue:1},positional:{potency:[["NEVER",150],["WAY_OF_THE_SAMURAI_II",160],["WAY_OF_THE_SAMURAI_III",210]],comboPotency:[["NEVER",360],["WAY_OF_THE_SAMURAI_II",370],["WAY_OF_THE_SAMURAI_III",420]],location:"rear"},onConfirm:e=>{e.checkCombo("GEKKO_READY")&&(e.gainKenki(10),e.gainSen("GETSU")),e.hasResourceAvailable("MEIKYO_SHISUI")&&e.refreshBuff("FUGETSU",.76),e.tryConsumeMeikyo(),e.progressActiveCombo([])},highlightIf:e=>e.checkCombo("GEKKO_READY")});wt("SHIFU",18,{applicationDelay:.8,basePotency:[["NEVER",120],["WAY_OF_THE_SAMURAI_III",140]],combo:{potency:[["NEVER",280],["WAY_OF_THE_SAMURAI_III",300]],resource:"SAM_TWO_READY",resourceValue:1},onConfirm:e=>{e.checkCombo("SAM_TWO_READY")?(e.gainKenki(5),e.refreshBuff("FUKA",.8),e.tryConsumeMeikyo(),e.progressActiveCombo(["KASHA_READY"])):(e.tryConsumeMeikyo(),e.progressActiveCombo([]))},highlightIf:e=>e.checkCombo("SAM_TWO_READY")});wt("KASHA",40,{applicationDelay:.62,basePotency:[["NEVER",100],["WAY_OF_THE_SAMURAI_II",110],["WAY_OF_THE_SAMURAI_III",160]],combo:{potency:[["NEVER",310],["WAY_OF_THE_SAMURAI_II",320],["WAY_OF_THE_SAMURAI_III",370]],resource:"KASHA_READY",resourceValue:1},positional:{potency:[["NEVER",150],["WAY_OF_THE_SAMURAI_II",160],["WAY_OF_THE_SAMURAI_III",210]],comboPotency:[["NEVER",360],["WAY_OF_THE_SAMURAI_II",370],["WAY_OF_THE_SAMURAI_III",420]],location:"flank"},onConfirm:e=>{e.checkCombo("KASHA_READY")&&(e.gainKenki(10),e.gainSen("KA_SEN")),e.hasResourceAvailable("MEIKYO_SHISUI")&&e.refreshBuff("FUKA",.62),e.tryConsumeMeikyo(),e.progressActiveCombo([])},highlightIf:e=>e.checkCombo("KASHA_READY")});wt("FUGA",26,{autoUpgrade:{trait:"FUGA_MASTERY",otherSkill:"FUKO"},falloff:0,applicationDelay:.76,basePotency:90,onConfirm:e=>{e.gainKenki(5),e.progressActiveCombo(["SAM_TWO_AOE_READY"])}});wt("FUKO",86,{autoDowngrade:{trait:"FUGA_MASTERY",otherSkill:"FUGA"},falloff:0,applicationDelay:.76,basePotency:100,onConfirm:e=>{e.gainKenki(10),e.progressActiveCombo(["SAM_TWO_AOE_READY"])}});wt("MANGETSU",35,{falloff:0,applicationDelay:.62,basePotency:100,combo:{potency:120,resource:"SAM_TWO_AOE_READY",resourceValue:1},onConfirm:e=>{e.checkCombo("SAM_TWO_AOE_READY")&&(e.gainKenki(10),e.refreshBuff("FUGETSU",.62),e.gainSen("GETSU")),e.progressActiveCombo([])},highlightIf:e=>e.checkCombo("SAM_TWO_AOE_READY")});wt("OKA",35,{falloff:0,applicationDelay:.62,basePotency:100,combo:{potency:120,resource:"SAM_TWO_AOE_READY",resourceValue:1},onConfirm:e=>{e.checkCombo("SAM_TWO_AOE_READY")&&(e.gainKenki(10),e.refreshBuff("FUKA",.62),e.gainSen("KA_SEN")),e.progressActiveCombo([])},highlightIf:e=>e.checkCombo("SAM_TWO_AOE_READY")});const iD={newSkill:"HIGANBANA",condition:e=>e.countSen()===1},oD={newSkill:"TENKA_GOKEN",condition:e=>!e.hasResourceAvailable("TENDO")&&e.countSen()===2},lD={newSkill:"TENDO_GOKEN",condition:e=>e.hasResourceAvailable("TENDO")&&e.countSen()===2},sD={newSkill:"MIDARE_SETSUGEKKA",condition:e=>!e.hasResourceAvailable("TENDO")&&e.countSen()===3},rD={newSkill:"TENDO_SETSUGEKKA",condition:e=>e.hasResourceAvailable("TENDO")&&e.countSen()===3},mc=[iD,oD,lD,sD,rD];wt("IAIJUTSU",30,{replaceIf:mc,baseCastTime:1.3,basePotency:0,applicationDelay:0,validateAttempt:e=>!1});wt("HIGANBANA",30,{startOnHotbar:!1,replaceIf:mc,baseCastTime:1.3,basePotency:200,applicationDelay:.62,validateAttempt:iD.condition,onConfirm:(e,t)=>{const a=[];e.hasResourceAvailable("FUGETSU")&&a.push(e.getFugetsuModifier());const i=e.hasTraitUnlocked("WAY_OF_THE_SAMURAI_III")?50:45;e.addDoTPotencies({node:t,effectName:"HIGANBANA_DOT",skillName:"HIGANBANA",tickPotency:i,speedStat:"sks",modifiers:a}),e.consumeAllSen(),e.gainMeditation()},onApplication:(e,t)=>e.applyDoT("HIGANBANA_DOT",t)});const ff=e=>t=>{t.consumeAllSen(),t.gainStatus("KAESHI_TRACKER",e),t.gainMeditation(),t.gainStatus("TSUBAME_GAESHI_READY"),t.tryConsumeResource("TENDO")};wt("TENKA_GOKEN",30,{startOnHotbar:!1,replaceIf:mc,baseCastTime:1.3,basePotency:300,falloff:0,applicationDelay:.62,validateAttempt:oD.condition,onConfirm:ff(1)});wt("TENDO_GOKEN",100,{startOnHotbar:!1,replaceIf:mc,baseCastTime:1.3,basePotency:410,falloff:0,applicationDelay:.36,validateAttempt:lD.condition,onConfirm:ff(2)});wt("MIDARE_SETSUGEKKA",30,{startOnHotbar:!1,replaceIf:mc,baseCastTime:1.3,basePotency:[["NEVER",620],["WAY_OF_THE_SAMURAI_III",640]],applicationDelay:.62,jobPotencyModifiers:e=>[X.AutoCrit],validateAttempt:sD.condition,onConfirm:ff(3)});wt("TENDO_SETSUGEKKA",100,{startOnHotbar:!1,replaceIf:mc,baseCastTime:1.3,basePotency:1100,applicationDelay:1.03,jobPotencyModifiers:e=>[X.AutoCrit],validateAttempt:rD.condition,onConfirm:ff(4)});const eT={newSkill:"KAESHI_GOKEN",condition:e=>e.hasResourceExactly("KAESHI_TRACKER",1)},tT={newSkill:"TENDO_KAESHI_GOKEN",condition:e=>e.hasResourceExactly("KAESHI_TRACKER",2)},nT={newSkill:"KAESHI_SETSUGEKKA",condition:e=>e.hasResourceExactly("KAESHI_TRACKER",3)},aT={newSkill:"TENDO_KAESHI_SETSUGEKKA",condition:e=>e.hasResourceExactly("KAESHI_TRACKER",4)},ad=[eT,tT,nT,aT];wt("TSUBAME_GAESHI",74,{replaceIf:ad,basePotency:0,applicationDelay:0,validateAttempt:e=>!1});const Af=e=>{e.tryConsumeResource("KAESHI_TRACKER",!0),e.tryConsumeResource("TSUBAME_GAESHI_READY"),e.tryConsumeResource("KAESHI_OGI_READY")};wt("KAESHI_GOKEN",74,{startOnHotbar:!1,replaceIf:ad,basePotency:300,falloff:0,applicationDelay:.62,validateAttempt:eT.condition,onConfirm:Af,highlightIf:eT.condition});wt("TENDO_KAESHI_GOKEN",100,{startOnHotbar:!1,replaceIf:ad,basePotency:410,falloff:0,applicationDelay:.36,validateAttempt:tT.condition,onConfirm:Af,highlightIf:tT.condition});wt("KAESHI_SETSUGEKKA",74,{startOnHotbar:!1,replaceIf:ad,basePotency:[["NEVER",620],["WAY_OF_THE_SAMURAI_III",640]],applicationDelay:.62,jobPotencyModifiers:e=>[X.AutoCrit],validateAttempt:nT.condition,onConfirm:Af,highlightIf:nT.condition});wt("TENDO_KAESHI_SETSUGEKKA",74,{startOnHotbar:!1,replaceIf:ad,basePotency:1100,applicationDelay:1.03,jobPotencyModifiers:e=>[X.AutoCrit],validateAttempt:aT.condition,onConfirm:Af,highlightIf:aT.condition});wt("OGI_NAMIKIRI",90,{replaceIf:[{newSkill:"KAESHI_NAMIKIRI",condition:e=>e.hasResourceAvailable("KAESHI_OGI_READY")}],falloff:.4,applicationDelay:.49,basePotency:[["NEVER",860],["WAY_OF_THE_SAMURAI_III",1e3]],baseCastTime:1.3,jobPotencyModifiers:e=>[X.AutoCrit],validateAttempt:e=>e.hasResourceAvailable("OGI_READY"),onConfirm:e=>{e.tryConsumeResource("OGI_READY"),e.gainMeditation(),e.gainStatus("KAESHI_OGI_READY")},highlightIf:e=>e.hasResourceAvailable("OGI_READY")});wt("KAESHI_NAMIKIRI",90,{startOnHotbar:!1,falloff:.4,applicationDelay:.49,basePotency:[["NEVER",860],["WAY_OF_THE_SAMURAI_III",1e3]],jobPotencyModifiers:e=>[X.AutoCrit],validateAttempt:e=>e.hasResourceAvailable("KAESHI_OGI_READY"),onConfirm:e=>e.tryConsumeResource("KAESHI_OGI_READY"),highlightIf:e=>e.hasResourceAvailable("KAESHI_OGI_READY")});ei("MEIKYO_SHISUI",50,"cd_MEIKYO_SHISUI",{cooldown:55,maxCharges:2,onConfirm:e=>{e.gainStatus("MEIKYO_SHISUI",3),e.hasTraitUnlocked("ENHANCED_MEIKYO_SHISUI_II")&&e.gainStatus("TENDO")}});ei("IKISHOTEN",68,"cd_IKISHOTEN",{replaceIf:[{newSkill:"ZANSHIN",condition:e=>e.hasResourceAvailable("ZANSHIN_READY")}],cooldown:120,requiresCombat:!0,onConfirm:e=>{e.gainKenki(50),e.hasTraitUnlocked("ENHANCED_IKISHOTEN")&&e.gainStatus("OGI_READY"),e.hasTraitUnlocked("ENHANCED_IKISHOTEN_II")&&e.gainStatus("ZANSHIN_READY")}});ei("HISSATSU_SHINTEN",52,"cd_SHINTEN",{cooldown:1,potency:250,validateAttempt:e=>e.resources.get("KENKI").available(25),onConfirm:e=>e.resources.get("KENKI").consume(25),highlightIf:e=>e.resources.get("KENKI").available(25)});ei("HISSATSU_KYUTEN",62,"cd_KYUTEN",{cooldown:1,potency:100,falloff:0,validateAttempt:e=>e.resources.get("KENKI").available(25),onConfirm:e=>e.resources.get("KENKI").consume(25),highlightIf:e=>e.resources.get("KENKI").available(25)});ei("HISSATSU_GYOTEN",54,"cd_GYOTEN",{cooldown:5,animationLock:Wt,potency:100,validateAttempt:e=>e.resources.get("KENKI").available(10),onConfirm:e=>e.resources.get("KENKI").consume(10),highlightIf:e=>e.resources.get("KENKI").available(10)});ei("HISSATSU_YATEN",56,"cd_YATEN",{cooldown:10,animationLock:Wt,potency:100,validateAttempt:e=>e.resources.get("KENKI").available(10),onConfirm:e=>{e.resources.get("KENKI").consume(10),e.gainStatus("ENHANCED_ENPI")},highlightIf:e=>e.resources.get("KENKI").available(10)});ei("HISSATSU_SENEI",72,"cd_SENEI_GUREN",{cooldown:60,potency:800,validateAttempt:e=>e.resources.get("KENKI").available(25),onConfirm:e=>e.resources.get("KENKI").consume(25),highlightIf:e=>e.resources.get("KENKI").available(25)});ei("HISSATSU_GUREN",70,"cd_SENEI_GUREN",{cooldown:60,potency:400,falloff:0,validateAttempt:e=>e.resources.get("KENKI").available(25),onConfirm:e=>e.resources.get("KENKI").consume(25),highlightIf:e=>e.resources.get("KENKI").available(25)});ei("HAGAKURE",68,"cd_HAGAKURE",{cooldown:5,validateAttempt:e=>e.countSen()>0,onConfirm:e=>{e.gainKenki(e.countSen()*10),e.consumeAllSen()},highlightIf:e=>e.countSen()===3});ei("SHOHA",80,"cd_SHOHA",{cooldown:15,potency:[["NEVER",560],["WAY_OF_THE_SAMURAI_III",640]],falloff:.4,applicationDelay:.58,validateAttempt:e=>e.resources.get("MEDITATION").available(3),onConfirm:e=>e.tryConsumeResource("MEDITATION",!0),highlightIf:e=>e.resources.get("MEDITATION").available(3)});Ke("SAM","THIRD_EYE",6,"cd_THIRD_EYE",{rscType:"THIRD_EYE",autoUpgrade:{trait:"THIRD_EYE_MASTERY",otherSkill:"TENGENTSU"},replaceIf:[{newSkill:"THIRD_EYE_POP",condition:e=>e.hasResourceAvailable("THIRD_EYE")}],cooldown:15,applicationDelay:0});Ke("SAM","TENGENTSU",82,"cd_THIRD_EYE",{rscType:"TENGENTSU",autoDowngrade:{trait:"THIRD_EYE_MASTERY",otherSkill:"THIRD_EYE"},replaceIf:[{newSkill:"TENGENTSU_POP",condition:e=>e.hasResourceAvailable("TENGENTSU")}],cooldown:15,applicationDelay:0});ei("THIRD_EYE_POP",6,"cd_THIRD_EYE_POP",{startOnHotbar:!1,applicationDelay:0,animationLock:Ia,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("THIRD_EYE"),onConfirm:e=>{e.tryConsumeResource("THIRD_EYE"),e.gainKenki(10)},highlightIf:e=>e.hasResourceAvailable("THIRD_EYE")});ei("TENGENTSU_POP",82,"cd_THIRD_EYE_POP",{startOnHotbar:!1,applicationDelay:0,animationLock:Ia,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("TENGENTSU"),onConfirm:e=>{e.tryConsumeResource("TENGENTSU"),e.gainStatus("TENGENTSUS_FORESIGHT"),e.gainKenki(10)},highlightIf:e=>e.hasResourceAvailable("TENGENTSU")});ei("ZANSHIN",96,"cd_ZANSHIN",{startOnHotbar:!1,cooldown:1,falloff:.4,applicationDelay:1.03,potency:940,validateAttempt:e=>e.hasResourceAvailable("ZANSHIN_READY")&&e.resources.get("KENKI").available(50),onConfirm:e=>{e.resources.get("KENKI").consume(50),e.tryConsumeResource("ZANSHIN_READY")},highlightIf:e=>e.hasResourceAvailable("ZANSHIN_READY")});Ke("SAM","MEDITATE",60,"cd_MEDITATE",{rscType:"MEDITATE",cooldown:60,applicationDelay:.62,validateAttempt:e=>e.cooldowns.get("cd_GCD").stacksAvailable()>0,onConfirm:e=>{const t=e.config.adjustedSksGCD(2.5,e.getFukaModifier());e.cooldowns.get("cd_GCD").useStackWithRecast(e.config.getAfterTaxGCD(t))},onApplication:e=>e.startMeditateTimer()});Object.keys(kT).forEach(e=>Ft(e,`SMN/${ze[e].name}.png`));class CB extends Xt{jobSpecificSelfTargetedBuffViewProps(){const t=["AETHERFLOW","IFRITS_FAVOR","TITANS_FAVOR","GARUDAS_FAVOR","CRIMSON_STRIKE_READY"];return[...Object.keys(kT).map(a=>t.includes(a)?this.makeCommonTimerless(a):this.makeCommonTimer(a))]}jobSpecificResourceViewProps(t){const a=this.state.resources,i=Math.max(a.timeTillReady("FIRE_ATTUNEMENT"),a.timeTillReady("EARTH_ATTUNEMENT"),a.timeTillReady("WIND_ATTUNEMENT")),l=a.get("ACTIVE_DEMI").availableAmount(),r=a.timeTillReady("ACTIVE_DEMI");a.get("RUBY_ARCANUM").available(1),a.get("TOPAZ_ARCANUM").available(1),a.get("EMERALD_ARCANUM").available(1);const d=l===iT.BAHAMUT?t.smn.bahamut:l===iT.PHOENIX?t.smn.phoenix:t.smn.solar,E=a.get("FIRE_ATTUNEMENT").available(1)?t.smn.ruby:a.get("EARTH_ATTUNEMENT").available(1)?t.smn.topaz:t.smn.emerald,h=this.state.cooldowns.get("cd_SUMMON_LOCKOUT"),A=h.timeTillNextStackAvailable();return[{kind:"counter",name:g({en:"aetherflow",zh:""}),color:t.smn.aetherflow,currentStacks:a.get("AETHERFLOW").availableAmount(),maxStacks:2},{kind:"bar",name:g({en:"demi summon",zh:""}),color:d,progress:r===0?0:1-r/15,valueString:r.toFixed(3)},{kind:"attunement",aetherName:g({en:"aether",zh:""}),attunementName:g({en:"attunement",zh:""}),ruby:a.get("RUBY_ARCANUM").available(1),topaz:a.get("TOPAZ_ARCANUM").available(1),emerald:a.get("EMERALD_ARCANUM").available(1),attunementCount:Math.max(a.get("FIRE_ATTUNEMENT").availableAmount(),a.get("EARTH_ATTUNEMENT").availableAmount(),a.get("WIND_ATTUNEMENT").availableAmount()),timeRemaining:i,rubyColor:t.smn.ruby,topazColor:t.smn.topaz,emeraldColor:t.smn.emerald},{kind:"bar",name:g({en:"summon lock",zh:""}),color:E,progress:A>0?1-h.timeTillNextStackAvailable()/h.currentStackCd():0,valueString:A.toFixed(3)}]}}const Qt=(e,t,a)=>{qe("SMN",e,t,a??{})};var iT=(e=>(e[e.NONE=0]="NONE",e[e.SOLAR=1]="SOLAR",e[e.BAHAMUT=2]="BAHAMUT",e[e.PHOENIX=3]="PHOENIX",e))(iT||{});const cD=15;Qt("AETHERFLOW",2,{warnOnOvercap:!0});Qt("RUBY_ARCANUM",1);Qt("TOPAZ_ARCANUM",1);Qt("EMERALD_ARCANUM",1);Qt("FIRE_ATTUNEMENT",2,{timeout:30});Qt("EARTH_ATTUNEMENT",4,{timeout:30});Qt("WIND_ATTUNEMENT",4,{timeout:30});Qt("CRIMSON_STRIKE_READY",1);Qt("EVERLASTING_FLIGHT",1,{timeout:21});Qt("FURTHER_RUIN",1,{timeout:60});Qt("GARUDAS_FAVOR",1);Qt("IFRITS_FAVOR",1);Qt("TITANS_FAVOR",1);Qt("RADIANT_AEGIS",1,{timeout:30});Qt("REFULGENT_LUX",1,{timeout:30});Qt("REKINDLE",1,{timeout:30});Qt("UNDYING_FLAME",1,{timeout:15});Qt("RUBYS_GLIMMER",1,{timeout:30,warnOnTimeout:!0});Qt("SEARING_LIGHT",1,{timeout:20});Qt("SLIPSTREAM",1,{timeout:15});Qt("ACTIVE_DEMI",3,{timeout:cD});Qt("NEXT_DEMI_CYCLE",3);Qt("DEMI_AUTO",4);const EC=3.163,OB=new Map([["SUMMON_IFRIT_II",2.1],["SUMMON_GARUDA_II",2.1],["SUMMON_TITAN_II",2.1],["SUMMON_IFRIT",2.46],["SUMMON_GARUDA",2.1],["SUMMON_TITAN",2.46]]),fC=new Map([["SUMMON_IFRIT_II",1.96],["SUMMON_GARUDA_II",1.29],["SUMMON_TITAN_II",1.96],["SUMMON_IFRIT",.936],["SUMMON_GARUDA",.8],["SUMMON_TITAN",.8],["ENKINDLE_BAHAMUT",.894],["ENKINDLE_PHOENIX",1.026],["ENKINDLE_SOLAR_BAHAMUT",.846]]),bB=new Map([["SUMMON_IFRIT_II",6.29],["SUMMON_GARUDA_II",6.29],["SUMMON_TITAN_II",6.29],["SUMMON_IFRIT",4.6],["SUMMON_GARUDA",4.3],["SUMMON_TITAN",4.6]]);class DB extends qt{constructor(t){super(t);const a=this.hasTraitUnlocked("ENHANCED_SWIFTCAST")?40:60;this.cooldowns.set(new Ge("cd_SWIFTCAST",a,1,1));const i=this.hasTraitUnlocked("ENHANCED_RADIANT_AEGIS")?2:1;this.cooldowns.set(new Ge("cd_RADIANT_AEGIS",60,i,i)),this.cooldowns.set(new Ge("cd_DEMI_SUMMON",this.config.adjustedGCD(60),1,1)),this.cooldowns.set(new Ge("cd_SUMMON_LOCKOUT",5,1,1)),this.registerRecurringEvents([{groupedEffects:[{effectName:"SLIPSTREAM",appliedBy:["SLIPSTREAM"],isGroundTargeted:!0}]}],["SUMMON_BAHAMUT","SUMMON_PHOENIX","SUMMON_SOLAR_BAHAMUT"])}get statusPropsGenerator(){return new CB(this)}jobSpecificAddDamageBuffCovers(t,a){this.hasResourceAvailable("SEARING_LIGHT")&&t.addBuff(x.SearingLight)}get activeDemi(){return this.resources.get("ACTIVE_DEMI").availableAmount()}get nextDemi(){const t=this.resources.get("NEXT_DEMI_CYCLE").availableAmount();return this.hasTraitUnlocked("ENHANCED_SUMMON_BAHAMUT_II")?t===1?2:t===3?3:1:this.hasTraitUnlocked("ENHANCED_SUMMON_BAHAMUT")?t%2===0?2:3:2}get hasActivePet(){return this.activeDemi!==0||this.cooldowns.get("cd_SUMMON_LOCKOUT").stacksAvailable()===0}snapSearingAndTincture(t,a){const i=a.modifiers;this.hasResourceAvailable("SEARING_LIGHT")&&i.push(X.SearingLight),this.hasResourceAvailable("TINCTURE")&&(i.push(X.Tincture),t.addBuff(x.Tincture))}makePetPotency(t,a,i,l,r){const d=new tn({config:this.config,sourceTime:i,sourceSkill:a,aspect:_e.Other,basePotency:l,snapshotTime:this.getDisplayTime(),description:"",targetCount:t,falloff:r}),E=[X.SmnPet];return d.modifiers=E,d}handleDemiAuto(){if(!this.hasResourceAvailable("DEMI_AUTO"))return;const t=4-this.resources.get("DEMI_AUTO").availableAmount();if(t<0)return;const a=this.resources.get("DEMI_AUTO").node;if(a!==void 0){const i=a.getDotPotencies("DEMI_AUTO")[t];this.snapSearingAndTincture(a,i),i.snapshotTime=this.getDisplayTime(),N.resolvePotency(i)}this.tryConsumeResource("DEMI_AUTO"),this.addEvent(new ve("demi auto",EC,()=>this.handleDemiAuto()))}startPetAutos(t,a){const i=this.resources.get("DEMI_AUTO"),l=this.activeDemi===1?160:150;i.gain(4),i.node=t;for(let r=0;r<4;r++)t.addDoTPotency(this.makePetPotency(1,a,this.getDisplayTime(),l),"DEMI_AUTO");this.addEvent(new ve("first demi auto",EC,()=>this.handleDemiAuto()))}queuePetDamageEvent(t,a,i,l,r,d){const E=this.getDisplayTime();this.addEvent(new ve(i+" pet snapshot",r,()=>{const h=this.makePetPotency(t.targetCount,i,E,l,.6);t.addPotency(h),this.snapSearingAndTincture(t,h),this.jobSpecificAddDamageBuffCovers(t,gl("SMN",a)),this.addEvent(new ve(i+" application",d,()=>N.resolvePotency(h)))}))}queueEnkindle(t,a){let i,l;a==="ENKINDLE_BAHAMUT"?(i="AKH_MORN",l=1300):a==="ENKINDLE_PHOENIX"?(i="REVELATION",l=1300):(i="EXODUS",l=1500);const r=this.resources.get("ACTIVE_DEMI").pendingChange;console.assert(r),r&&r.timeTillEvent<2.5&&N.reportWarning({kind:"custom",en:"enkindle used near end of demi window may ghost"}),this.queuePetDamageEvent(t,a,i,l,0,fC.get(a))}queuePrimalSummon(t,a){let i=600;this.hasTraitUnlocked("ARCANE_MASTERY")?i=800:this.hasTraitUnlocked("ENKINDLE_II")&&(i=750);let l;a.includes("IFRIT")?l="INFERNO":a.includes("TITAN")?l="EARTHEN_FURY":l="AERIAL_BLAST",this.queuePetDamageEvent(t,a,l,i,OB.get(a),fC.get(a));const r=bB.get(a);this.cooldowns.get("cd_SUMMON_LOCKOUT").useStackWithRecast(r)}}const at=(e,t,a)=>{const i=a.baseCastTime??0,l=a.baseRecastTime??2.5,r=i>0?ke(d=>d.tryConsumeResource("SWIFTCAST"),a.onConfirm):a.onConfirm;return $a("SMN",e,t,{...a,castTime:d=>d.config.adjustedCastTime(i),recastTime:d=>l<=1.5?l:d.config.adjustedGCD(l),potency:a.basePotency,jobPotencyModifiers:d=>{const E=[];return a.isPetAttack&&E.push(X.SmnPet),d.hasResourceAvailable("SEARING_LIGHT")&&E.push(X.SearingLight),E},isInstantFn:d=>d.hasResourceAvailable("SWIFTCAST")||i===0,onConfirm:r})},oo=(e,t,a,i)=>lt("SMN",e,t,a,{...i,jobPotencyModifiers:l=>l.hasResourceAvailable("SEARING_LIGHT")?[X.SearingLight]:[]}),Hs=[{newSkill:"RUIN_III",condition:e=>e.activeDemi===0},{newSkill:"ASTRAL_IMPULSE",condition:e=>e.activeDemi===2},{newSkill:"FOUNTAIN_OF_FIRE",condition:e=>e.activeDemi===3},{newSkill:"UMBRAL_IMPULSE",condition:e=>e.activeDemi===1}];at("RUIN_III",54,{basePotency:[["NEVER",300],["RUIN_MASTERY_IV",310],["ARCANE_MASTERY",400]],baseCastTime:1.5,manaCost:300,replaceIf:Hs,applicationDelay:.8});at("ASTRAL_IMPULSE",58,{basePotency:[["NEVER",440],["ARCANE_MASTERY",500]],manaCost:300,replaceIf:Hs,applicationDelay:.67,validateAttempt:Hs[1].condition,startOnHotbar:!1});at("FOUNTAIN_OF_FIRE",80,{basePotency:[["NEVER",540],["ARCANE_MASTERY",580]],manaCost:300,replaceIf:Hs,applicationDelay:1.07,validateAttempt:Hs[2].condition,startOnHotbar:!1});at("UMBRAL_IMPULSE",100,{basePotency:620,manaCost:300,replaceIf:Hs,applicationDelay:.8,validateAttempt:Hs[3].condition,startOnHotbar:!1});const Ml=[{newSkill:"OUTBURST",condition:e=>e.activeDemi===0},{newSkill:"ASTRAL_FLARE",condition:e=>e.activeDemi===2},{newSkill:"BRAND_OF_PURGATORY",condition:e=>e.activeDemi===3},{newSkill:"UMBRAL_FLARE",condition:e=>e.activeDemi===1}];at("OUTBURST",26,{autoUpgrade:{trait:"OUTBURST_MASTERY",otherSkill:"TRI_DISASTER"},basePotency:100,baseCastTime:1.5,manaCost:300,replaceIf:Ml,applicationDelay:.8,falloff:0});at("TRI_DISASTER",74,{autoDowngrade:{trait:"OUTBURST_MASTERY",otherSkill:"OUTBURST"},basePotency:120,baseCastTime:1.5,manaCost:300,replaceIf:Ml,applicationDelay:.8,falloff:0});at("ASTRAL_FLARE",58,{basePotency:180,manaCost:300,replaceIf:Ml,applicationDelay:.54,validateAttempt:Ml[1].condition,falloff:0,startOnHotbar:!1});at("BRAND_OF_PURGATORY",80,{basePotency:240,manaCost:300,replaceIf:Ml,applicationDelay:.8,validateAttempt:Ml[2].condition,falloff:0,startOnHotbar:!1});at("UMBRAL_FLARE",100,{basePotency:280,manaCost:300,replaceIf:Ml,applicationDelay:.53,validateAttempt:Ml[2].condition,falloff:0,startOnHotbar:!1});const yB=[{newSkill:"RUBY_RUIN_III",condition:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT")},{newSkill:"TOPAZ_RUIN_III",condition:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT")},{newSkill:"EMERALD_RUIN_III",condition:e=>e.hasResourceAvailable("WIND_ATTUNEMENT")}];at("GEMSHINE",6,{replaceIf:yB,applicationDelay:0,validateAttempt:e=>!1});at("RUBY_RUIN_III",54,{autoUpgrade:{trait:"RUIN_MASTERY_III",otherSkill:"RUBY_RITE"},basePotency:410,baseCastTime:2.8,baseRecastTime:3,applicationDelay:.62,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("FIRE_ATTUNEMENT"),startOnHotbar:!1});at("TOPAZ_RUIN_III",54,{autoUpgrade:{trait:"RUIN_MASTERY_III",otherSkill:"TOPAZ_RITE"},basePotency:300,applicationDelay:.62,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("EARTH_ATTUNEMENT"),startOnHotbar:!1});at("EMERALD_RUIN_III",54,{autoUpgrade:{trait:"RUIN_MASTERY_III",otherSkill:"EMERALD_RITE"},baseRecastTime:1.5,basePotency:180,applicationDelay:.62,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("WIND_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("WIND_ATTUNEMENT"),startOnHotbar:!1});at("RUBY_RITE",72,{autoDowngrade:{trait:"RUIN_MASTERY_III",otherSkill:"RUBY_RITE"},basePotency:[["NEVER",480],["RUIN_MASTERY_IV",510],["ARCANE_MASTERY",580]],baseCastTime:2.8,baseRecastTime:3,applicationDelay:.62,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("FIRE_ATTUNEMENT"),startOnHotbar:!1});at("TOPAZ_RITE",72,{autoDowngrade:{trait:"RUIN_MASTERY_III",otherSkill:"TOPAZ_RUIN_III"},basePotency:[["NEVER",320],["RUIN_MASTERY_IV",330],["ARCANE_MASTERY",340]],applicationDelay:.62,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT"),onConfirm:e=>{e.tryConsumeResource("EARTH_ATTUNEMENT"),e.gainStatus("TITANS_FAVOR")},startOnHotbar:!1});at("EMERALD_RITE",72,{autoDowngrade:{trait:"RUIN_MASTERY_III",otherSkill:"EMERALD_RUIN_III"},baseRecastTime:1.5,basePotency:[["NEVER",220],["RUIN_MASTERY_IV",230],["ARCANE_MASTERY",280]],applicationDelay:.62,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("WIND_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("WIND_ATTUNEMENT"),startOnHotbar:!1});const vB=[{newSkill:"RUBY_OUTBURST",condition:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT")},{newSkill:"TOPAZ_OUTBURST",condition:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT")},{newSkill:"EMERALD_OUTBURST",condition:e=>e.hasResourceAvailable("WIND_ATTUNEMENT")}];at("PRECIOUS_BRILLIANCE",26,{replaceIf:vB,applicationDelay:0,validateAttempt:e=>!1});at("RUBY_OUTBURST",26,{autoUpgrade:{trait:"OUTBURST_MASTERY",otherSkill:"RUBY_DISASTER"},basePotency:160,baseCastTime:2.8,baseRecastTime:3,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("FIRE_ATTUNEMENT"),falloff:0,startOnHotbar:!1});at("TOPAZ_OUTBURST",26,{autoUpgrade:{trait:"OUTBURST_MASTERY",otherSkill:"TOPAZ_DISASTER"},basePotency:110,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("EARTH_ATTUNEMENT"),falloff:0,startOnHotbar:!1});at("EMERALD_OUTBURST",26,{autoUpgrade:{trait:"OUTBURST_MASTERY",otherSkill:"EMERALD_DISASTER"},baseRecastTime:1.5,basePotency:70,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("WIND_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("WIND_ATTUNEMENT"),falloff:0,startOnHotbar:!1});at("RUBY_DISASTER",74,{autoDowngrade:{trait:"OUTBURST_MASTERY",otherSkill:"RUBY_OUTBURST"},autoUpgrade:{trait:"OUTBURST_MASTERY_II",otherSkill:"RUBY_CATASTROPHE"},basePotency:190,baseCastTime:2.8,baseRecastTime:3,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("FIRE_ATTUNEMENT"),falloff:0,startOnHotbar:!1});at("TOPAZ_DISASTER",74,{autoDowngrade:{trait:"OUTBURST_MASTERY",otherSkill:"TOPAZ_OUTBURST"},autoUpgrade:{trait:"OUTBURST_MASTERY_II",otherSkill:"TOPAZ_CATASTROPHE"},basePotency:130,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("EARTH_ATTUNEMENT"),falloff:0,startOnHotbar:!1});at("EMERALD_DISASTER",74,{autoDowngrade:{trait:"OUTBURST_MASTERY",otherSkill:"EMERALD_OUTBURST"},autoUpgrade:{trait:"OUTBURST_MASTERY_II",otherSkill:"EMERALD_CATASTROPHE"},baseRecastTime:1.5,basePotency:90,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("WIND_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("WIND_ATTUNEMENT"),falloff:0,startOnHotbar:!1});at("RUBY_CATASTROPHE",82,{autoDowngrade:{trait:"OUTBURST_MASTERY_II",otherSkill:"RUBY_DISASTER"},basePotency:210,baseCastTime:2.8,baseRecastTime:3,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("FIRE_ATTUNEMENT"),falloff:0,startOnHotbar:!1});at("TOPAZ_CATASTROPHE",82,{autoDowngrade:{trait:"OUTBURST_MASTERY_II",otherSkill:"TOPAZ_DISASTER"},basePotency:140,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT"),onConfirm:e=>{e.tryConsumeResource("EARTH_ATTUNEMENT"),e.gainStatus("TITANS_FAVOR")},falloff:0,startOnHotbar:!1});at("EMERALD_CATASTROPHE",82,{autoDowngrade:{trait:"OUTBURST_MASTERY_II",otherSkill:"EMERALD_DISASTER"},baseRecastTime:1.5,basePotency:100,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("WIND_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("WIND_ATTUNEMENT"),falloff:0,startOnHotbar:!1});const MB=[{newSkill:"SUMMON_BAHAMUT",condition:e=>e.nextDemi===2},{newSkill:"SUMMON_PHOENIX",condition:e=>e.nextDemi===3},{newSkill:"SUMMON_SOLAR_BAHAMUT",condition:e=>e.nextDemi===1}],LB={cdName:"cd_DEMI_SUMMON",cooldown:60,maxCharges:1};[{name:"SUMMON_BAHAMUT",autoName:"WYRMWAVE",level:70,activeValue:2},{name:"SUMMON_PHOENIX",autoName:"SCARLET_FLAME",level:80,activeValue:3},{name:"SUMMON_SOLAR_BAHAMUT",autoName:"LUXWAVE",level:100,activeValue:1}].forEach((e,t)=>at(e.name,e.level,{applicationDelay:.76,replaceIf:MB,secondaryCooldown:LB,validateAttempt:a=>!a.hasActivePet&&a.nextDemi===e.activeValue,drawsAggro:!0,onConfirm:(a,i)=>{a.gainStatus("ACTIVE_DEMI",e.activeValue),a.startPetAutos(i,e.autoName),["RUBY_ARCANUM","TOPAZ_ARCANUM","EMERALD_ARCANUM"].forEach(l=>a.gainStatus(l,1)),["FIRE_ATTUNEMENT","EARTH_ATTUNEMENT","WIND_ATTUNEMENT"].forEach(l=>a.tryConsumeResource(l,!0)),a.tryConsumeResource("IFRITS_FAVOR"),a.tryConsumeResource("CRIMSON_STRIKE_READY"),a.tryConsumeResource("GARUDAS_FAVOR"),a.tryConsumeResource("TITANS_FAVOR"),e.name==="SUMMON_SOLAR_BAHAMUT"&&a.gainStatus("REFULGENT_LUX"),a.addEvent(new ve("update next demi",cD,()=>{a.resources.get("NEXT_DEMI_CYCLE").gainWrapping(1)}))},onApplication:a=>{a.isInCombat()||a.resources.get("IN_COMBAT").gain(1)},startOnHotbar:t===0}));const ME=e=>!e.hasActivePet&&e.hasResourceAvailable("RUBY_ARCANUM"),LE=e=>!e.hasActivePet&&e.hasResourceAvailable("TOPAZ_ARCANUM"),HE=e=>!e.hasActivePet&&e.hasResourceAvailable("EMERALD_ARCANUM"),uD=e=>(t,a)=>{t.tryConsumeResource("RUBY_ARCANUM"),t.gainStatus("FIRE_ATTUNEMENT",2),t.queuePrimalSummon(a,e),t.tryConsumeResource("EARTH_ATTUNEMENT",!0),t.tryConsumeResource("WIND_ATTUNEMENT",!0),t.tryConsumeResource("TITANS_FAVOR"),t.tryConsumeResource("GARUDAS_FAVOR")},dD=e=>(t,a)=>{t.tryConsumeResource("TOPAZ_ARCANUM"),t.gainStatus("EARTH_ATTUNEMENT",4),t.queuePrimalSummon(a,e),t.tryConsumeResource("FIRE_ATTUNEMENT",!0),t.tryConsumeResource("WIND_ATTUNEMENT",!0),t.tryConsumeResource("IFRITS_FAVOR"),t.tryConsumeResource("CRIMSON_STRIKE_READY"),t.tryConsumeResource("GARUDAS_FAVOR")},hD=e=>(t,a)=>{t.tryConsumeResource("EMERALD_ARCANUM"),t.gainStatus("WIND_ATTUNEMENT",4),t.queuePrimalSummon(a,e),t.tryConsumeResource("FIRE_ATTUNEMENT",!0),t.tryConsumeResource("EARTH_ATTUNEMENT",!0),t.tryConsumeResource("IFRITS_FAVOR"),t.tryConsumeResource("CRIMSON_STRIKE_READY"),t.tryConsumeResource("TITANS_FAVOR")},Rc=.5;at("SUMMON_IFRIT",30,{autoUpgrade:{trait:"ENKINDLE_II",otherSkill:"SUMMON_IFRIT_II"},applicationDelay:0,highlightIf:ME,validateAttempt:ME,onConfirm:uD("SUMMON_IFRIT"),falloff:Rc});at("SUMMON_TITAN",35,{autoUpgrade:{trait:"ENKINDLE_II",otherSkill:"SUMMON_TITAN_II"},applicationDelay:0,highlightIf:LE,validateAttempt:LE,onConfirm:dD("SUMMON_TITAN"),falloff:Rc});at("SUMMON_GARUDA",45,{autoUpgrade:{trait:"ENKINDLE_II",otherSkill:"SUMMON_GARUDA_II"},applicationDelay:0,highlightIf:HE,validateAttempt:HE,onConfirm:hD("SUMMON_GARUDA"),falloff:Rc});at("SUMMON_IFRIT_II",90,{autoDowngrade:{trait:"ENKINDLE_II",otherSkill:"SUMMON_IFRIT"},applicationDelay:0,highlightIf:ME,validateAttempt:ME,onConfirm:ke(e=>e.gainStatus("IFRITS_FAVOR"),uD("SUMMON_IFRIT_II")),falloff:Rc});at("SUMMON_TITAN_II",90,{autoDowngrade:{trait:"ENKINDLE_II",otherSkill:"SUMMON_TITAN"},applicationDelay:0,highlightIf:LE,validateAttempt:LE,onConfirm:dD("SUMMON_TITAN_II"),falloff:Rc});at("SUMMON_GARUDA_II",90,{autoDowngrade:{trait:"ENKINDLE_II",otherSkill:"SUMMON_GARUDA"},applicationDelay:0,highlightIf:HE,validateAttempt:HE,onConfirm:ke(e=>e.gainStatus("GARUDAS_FAVOR"),hD("SUMMON_GARUDA_II")),falloff:Rc});const Ta=[{newSkill:"DEATHFLARE",condition:e=>e.activeDemi===2},{newSkill:"REKINDLE",condition:e=>e.activeDemi===3},{newSkill:"SUNFLARE",condition:e=>e.activeDemi===1},{newSkill:"CRIMSON_CYCLONE",condition:e=>e.hasResourceAvailable("IFRITS_FAVOR")},{newSkill:"CRIMSON_STRIKE",condition:e=>e.hasResourceAvailable("CRIMSON_STRIKE_READY")},{newSkill:"MOUNTAIN_BUSTER",condition:e=>e.hasResourceAvailable("TITANS_FAVOR")},{newSkill:"SLIPSTREAM",condition:e=>e.hasResourceAvailable("GARUDAS_FAVOR")}];oo("ASTRAL_FLOW",60,"cd_ASTRAL_FLOW",{applicationDelay:0,cooldown:20,replaceIf:Ta,validateAttempt:e=>!1});oo("DEATHFLARE",60,"cd_ASTRAL_FLOW",{potency:500,applicationDelay:.8,cooldown:20,replaceIf:Ta,highlightIf:e=>!0,validateAttempt:Ta[0].condition,falloff:.5,startOnHotbar:!1});oo("REKINDLE",80,"cd_ASTRAL_FLOW",{applicationDelay:1.03,cooldown:20,replaceIf:Ta,highlightIf:e=>!0,validateAttempt:Ta[1].condition,onConfirm:e=>e.gainStatus("REKINDLE"),startOnHotbar:!1});oo("SUNFLARE",100,"cd_ASTRAL_FLOW",{potency:800,applicationDelay:.8,cooldown:20,replaceIf:Ta,highlightIf:e=>!0,validateAttempt:Ta[2].condition,falloff:.5,startOnHotbar:!1});at("CRIMSON_CYCLONE",86,{basePotency:[["NEVER",430],["ARCANE_MASTERY",520]],applicationDelay:.8,replaceIf:Ta,highlightIf:e=>!0,validateAttempt:Ta[3].condition,onConfirm:e=>{e.tryConsumeResource("IFRITS_FAVOR"),e.gainStatus("CRIMSON_STRIKE_READY")},falloff:.6,startOnHotbar:!1});at("CRIMSON_STRIKE",86,{basePotency:[["NEVER",430],["ARCANE_MASTERY",520]],applicationDelay:.76,replaceIf:Ta,highlightIf:e=>!0,validateAttempt:Ta[4].condition,onConfirm:e=>e.tryConsumeResource("CRIMSON_STRIKE_READY"),falloff:.6,startOnHotbar:!1});oo("MOUNTAIN_BUSTER",86,"cd_MOUNTAIN_BUSTER",{potency:[["NEVER",150],["ARCANE_MASTERY",160]],cooldown:1,applicationDelay:.76,replaceIf:Ta,highlightIf:e=>!0,validateAttempt:Ta[5].condition,onConfirm:e=>e.tryConsumeResource("TITANS_FAVOR"),falloff:.6,startOnHotbar:!1});at("SLIPSTREAM",86,{baseCastTime:3,baseRecastTime:3.5,basePotency:[["NEVER",430],["ARCANE_MASTERY",520]],applicationDelay:1.02,replaceIf:Ta,highlightIf:e=>!0,validateAttempt:Ta[6].condition,onConfirm:(e,t)=>{e.tryConsumeResource("GARUDAS_FAVOR"),e.addDoTPotencies({node:t,effectName:"SLIPSTREAM",skillName:"SLIPSTREAM",tickPotency:30,speedStat:"sps"})},onApplication:(e,t)=>e.applyDoT("SLIPSTREAM",t),falloff:.6,startOnHotbar:!1});const HB=[{newSkill:"ENKINDLE_BAHAMUT",condition:e=>[0,2].includes(e.activeDemi)},{newSkill:"ENKINDLE_PHOENIX",condition:e=>e.activeDemi===3},{newSkill:"ENKINDLE_SOLAR_BAHAMUT",condition:e=>e.activeDemi===1}];[{name:"ENKINDLE_BAHAMUT",level:70,activeValue:2,falloff:.5},{name:"ENKINDLE_PHOENIX",level:80,activeValue:3,falloff:.5},{name:"ENKINDLE_SOLAR_BAHAMUT",level:100,activeValue:1,falloff:.5}].forEach((e,t)=>oo(e.name,e.level,"cd_ENKINDLE",{applicationDelay:0,cooldown:20,replaceIf:HB,validateAttempt:a=>a.activeDemi===e.activeValue,onConfirm:(a,i)=>a.queueEnkindle(i,e.name),startOnHotbar:t===0,falloff:e.falloff}));at("RUIN_IV",62,{basePotency:[["NEVER",430],["ARCANE_MASTERY",520]],manaCost:400,applicationDelay:.8,falloff:.6,highlightIf:e=>e.hasResourceAvailable("FURTHER_RUIN"),validateAttempt:e=>e.hasResourceAvailable("FURTHER_RUIN"),onConfirm:e=>e.tryConsumeResource("FURTHER_RUIN")});[{name:"ENERGY_DRAIN",level:10,potency:200,applicationDelay:1.07},{name:"ENERGY_SIPHON",level:52,potency:100,applicationDelay:1.02,falloff:0}].forEach(e=>oo(e.name,e.level,"cd_ENERGY_DRAIN",{...e,cooldown:60,onConfirm:t=>{t.gainStatus("AETHERFLOW",2),t.gainStatus("FURTHER_RUIN")}}));[{name:"FESTER",level:10,potency:340,applicationDelay:.71,autoUpgrade:{trait:"ENHANCED_FESTER",otherSkill:"NECROTIZE"}},{name:"PAINFLARE",level:40,potency:150,applicationDelay:.44,falloff:0},{name:"NECROTIZE",level:92,potency:460,applicationDelay:.71,autoDowngrade:{trait:"ENHANCED_FESTER",otherSkill:"FESTER"}}].forEach(e=>oo(e.name,e.level,"cd_AETHERFLOW",{...e,cooldown:1,validateAttempt:t=>t.hasResourceAvailable("AETHERFLOW"),onConfirm:t=>t.tryConsumeResource("AETHERFLOW")}));Ke("SMN","SEARING_LIGHT",66,"cd_SEARING_LIGHT",{rscType:"SEARING_LIGHT",applicationDelay:0,cooldown:120,onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_SEARING_LIGHT")&&e.gainStatus("RUBYS_GLIMMER")},replaceIf:[{newSkill:"SEARING_FLASH",condition:e=>e.hasResourceAvailable("RUBYS_GLIMMER")}]});oo("SEARING_FLASH",96,"cd_SEARING_FLASH",{potency:600,applicationDelay:.8,cooldown:1,falloff:0,startOnHotbar:!1,highlightIf:e=>e.hasResourceAvailable("RUBYS_GLIMMER"),validateAttempt:e=>e.hasResourceAvailable("RUBYS_GLIMMER"),onConfirm:e=>e.tryConsumeResource("RUBYS_GLIMMER")});Ke("SMN","RADIANT_AEGIS",2,"cd_RADIANT_AEGIS",{rscType:"RADIANT_AEGIS",applicationDelay:.45,cooldown:60,maxCharges:2,validateAttempt:e=>!e.hasActivePet});oo("LUX_SOLARIS",100,"cd_LUX_SOLARIS",{applicationDelay:.62,cooldown:60,highlightIf:e=>e.hasResourceAvailable("REFULGENT_LUX"),validateAttempt:e=>e.hasResourceAvailable("REFULGENT_LUX"),onConfirm:e=>e.tryConsumeResource("REFULGENT_LUX")});at("RESURRECTION",12,{baseCastTime:8,manaCost:2400,applicationDelay:1.11,basePotency:0});Object.keys($C).forEach(e=>Ft(e,`SGE/${ze[e].name}.png`));const UB=["EUKRASIAN_DOSIS","EUKRASIAN_DOSIS_II","EUKRASIAN_DOSIS_III","EUKRASIAN_DYSKRASIA"],xB=["EUKRASIAN_DIAGNOSIS","KRASIS","TAUROCHOLE","HAIMA","HAIMATINON","KARDION"],kB=["EUKRASIA","SOTERIA","ZOE","PHILOSOPHIA","KARDIA"],PB=["EUKRASIAN_PROGNOSIS","PANHAIMA","PANHAIMATINON","KERACHOLE","KERAKEIA","EUDAIMONIA","HOLOS","HOLOSAKOS"];class wB extends Xt{jobSpecificOtherTargetedBuffViewProps(){return[...UB,...xB].map(t=>t==="KARDION"?this.makeCommonTimerless(t,!1):this.makeCommonTimer(t,!1))}jobSpecificSelfTargetedBuffViewProps(){return[...PB,...kB].map(t=>t==="KARDIA"||t==="EUKRASIA"?this.makeCommonTimerless(t):this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){const a=this.state.resources.get("ADDERSGALL"),i=Vt("SGE","ADDERSGALL").maxTimeout,l=a.availableAmount()<a.maxValue?this.state.resources.timeTillReady("ADDERSGALL"):i,r=this.state.resources.get("ADDERSTING");return[{kind:"counter",name:g({en:ze.ADDERSGALL.name,zh:ze.ADDERSGALL.label.zh}),color:t.sge.addersgall,currentStacks:a.availableAmount(),maxStacks:a.maxValue},{kind:"bar",name:g({en:ze.ADDERSGALL.name+" timer",zh:ze.ADDERSGALL.label.zh+""}),color:t.sge.addersgall,progress:1-l/i,valueString:l.toFixed(3)},{kind:"counter",name:g({en:ze.ADDERSTING.name,zh:ze.ADDERSTING.label.zh}),color:t.sge.addersting,currentStacks:r.availableAmount(),maxStacks:r.maxValue}]}}const Dt=(e,t,a)=>{qe("SGE",e,t,a??{})};Dt("ADDERSGALL",3,{default:3,timeout:20});Dt("ADDERSTING",3,{default:3});Dt("EUKRASIA",1);Dt("KARDIA",1,{default:1});Dt("KARDION",1,{default:1});Dt("EUKRASIAN_DIAGNOSIS",1,{timeout:30});Dt("DIFFERENTIAL_DIAGNOSIS",1,{timeout:30});Dt("EUKRASIAN_PROGNOSIS",1,{timeout:30});Dt("HAIMA",1,{timeout:15});Dt("HAIMATINON",5,{timeout:15});Dt("PANHAIMA",1,{timeout:15});Dt("PANHAIMATINON",5,{timeout:15});Dt("PHYSIS_II",1,{timeout:15});Dt("AUTOPHYSIS",1,{timeout:15});Dt("PHILOSOPHIA",1,{timeout:20});Dt("EUDAIMONIA",1,{timeout:20});Dt("HOLOS",1,{timeout:20});Dt("HOLOSAKOS",1,{timeout:30});Dt("SOTERIA",4,{timeout:15});Dt("ZOE",1,{timeout:30});Dt("KRASIS",1,{timeout:10});Dt("KERACHOLE",1,{timeout:15});Dt("KERAKEIA",1,{timeout:15});Dt("TAUROCHOLE",1,{timeout:15});Dt("EUKRASIAN_DOSIS",1,{timeout:30});Dt("EUKRASIAN_DOSIS_II",1,{timeout:30});Dt("EUKRASIAN_DOSIS_III",1,{timeout:30});Dt("EUKRASIAN_DYSKRASIA",1,{timeout:30});class GB extends qt{constructor(t){if(super(t),this.hasTraitUnlocked("ENHANCED_SWIFTCAST")||this.cooldowns.set(new Ge("cd_SWIFTCAST",60,1,1)),!this.hasTraitUnlocked("ENHANCED_PHYSIS_II")){const a=Ji(this.job).get("AUTOPHYSIS");a.maxTimeout=10,Ji(this.job).set("AUTOPHYSIS",a)}this.hasTraitUnlocked("ENHANCED_SOTERIA")||this.cooldowns.set(new Ge("cd_SOTERIA",90,1,1)),this.hasTraitUnlocked("ENHANCED_ZOE")||this.cooldowns.set(new Ge("cd_ZOE",120,1,1)),this.registerRecurringEvents([{reportName:g({en:"Eukrasian DoT"}),groupedEffects:[{effectName:"EUKRASIAN_DOSIS",appliedBy:["EUKRASIAN_DOSIS"]},{effectName:"EUKRASIAN_DOSIS_II",appliedBy:["EUKRASIAN_DOSIS_II"]},{effectName:"EUKRASIAN_DOSIS_III",appliedBy:["EUKRASIAN_DOSIS_III"]},{effectName:"EUKRASIAN_DYSKRASIA",appliedBy:["EUKRASIAN_DYSKRASIA"]}]},{isHealing:!0,groupedEffects:[{effectName:"PHYSIS_II",appliedBy:["PHYSIS_II"]}]},{isHealing:!0,groupedEffects:[{effectName:"KERAKEIA",appliedBy:["KERACHOLE"]}]}])}get statusPropsGenerator(){return new wB(this)}jobSpecificRegisterRecurringEvents(){const t=a=>{const i=Vt("SGE","ADDERSGALL");this.hasResourceAvailable("ADDERSGALL",i.maxValue)||this.resources.get("ADDERSGALL").gain(1),this.resources.addResourceEvent({rscType:"ADDERSGALL",name:"gain addersgall if not currently capped",delay:i.maxTimeout,fnOnRsc:t})};t(this.resources.get("ADDERSGALL"))}jobSpecificAddHealingBuffCovers(t,a){this.hasResourceAvailable("AUTOPHYSIS")&&t.addBuff(x.Autophysis),this.hasResourceAvailable("KRASIS")&&t.addBuff(x.Krasis),a.cdName==="cd_GCD"&&(this.hasResourceAvailable("ZOE")&&t.addBuff(x.Zoe),this.hasResourceAvailable("PHILOSOPHIA")&&t.addBuff(x.Philosophia))}consumeAddersgall(){const t=Vt("SGE","ADDERSGALL");this.hasResourceAvailable("ADDERSGALL",t.maxValue)&&this.resources.get("ADDERSGALL").overrideTimer(this,t.maxTimeout),this.tryConsumeResource("ADDERSGALL"),this.resources.get("MANA").gain(700)}addPepsisPotency(t,a){const i=new tn({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:"PEPSIS",aspect:_e.Other,basePotency:t==="EUKRASIAN_DIAGNOSIS"?450:350,description:Xe(t),targetCount:t==="EUKRASIAN_DIAGNOSIS"?1:this.partySize,snapshotTime:this.getDisplayTime()});if(this.hasResourceAvailable("TINCTURE")&&i.modifiers.push(X.Tincture),this.hasResourceAvailable("AUTOPHYSIS")&&i.modifiers.push(X.Autophysis),this.hasResourceAvailable("KRASIS")){if(t==="EUKRASIAN_PROGNOSIS"){const l=new tn({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:"PEPSIS",aspect:_e.Other,basePotency:i.base,description:Xe(t),targetCount:i.targetCount-1,snapshotTime:this.getDisplayTime()});a.addHoTPotency(l,"PEPSIS"),i.targetCount=1,i.description+=", "+Xe("KRASIS")}i.modifiers.push(X.Krasis)}a.addHoTPotency(i,"PEPSIS")}addHaimaExpirationPotency(t,a){if(!(t==="HAIMA"||t==="PANHAIMA"))return;const i=new tn({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t==="HAIMA"?"HAIMA":"PANHAIMA",aspect:_e.Other,basePotency:t==="HAIMA"?150:100,description:"",targetCount:t==="HAIMA"?1:this.partySize,snapshotTime:this.getDisplayTime()});if(this.hasResourceAvailable("TINCTURE")&&i.modifiers.push(X.Tincture),this.hasResourceAvailable("AUTOPHYSIS")&&i.modifiers.push(X.Autophysis),this.hasResourceAvailable("KRASIS")){if(t==="PANHAIMA"){const l=new tn({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:"PANHAIMA",aspect:_e.Other,basePotency:100,description:"",targetCount:this.partySize-1,snapshotTime:this.getDisplayTime()});a.addHoTPotency(l,t),i.targetCount=1}i.modifiers.push(X.Krasis)}a.addHoTPotency(i,t)}handleHaimaExpiration(t,a){if(!(t==="HAIMA"||t==="PANHAIMA"))return;const i=t==="HAIMA"?"HAIMATINON":"PANHAIMATINON",l=this.resources.get(i).availableAmount();l<=0||this.addEvent(new ve(`${ze[t].name} expiration heal`,.001,()=>{a.getHotPotencies(t).forEach(r=>{r.description=Xe(t)+" "+g({en:"expiration"})+" ("+l+" "+g({en:"stacks"})+")",t==="PANHAIMA"&&r.modifiers.includes(X.Krasis)&&(r.description+=", "+Xe("KRASIS")),r.base*=l,N.resolveHealingPotency(r)})}))}addHealingMagicPotencyModifiers(t){this.hasResourceAvailable("ZOE")&&t.push(X.Zoe),this.hasResourceAvailable("PHILOSOPHIA")&&t.push(X.Philosophia)}addHealingActionPotencyModifiers(t){this.hasResourceAvailable("AUTOPHYSIS")&&t.push(X.Autophysis),this.hasResourceAvailable("KRASIS")&&t.push(X.Krasis)}}const un=(e,t,a)=>{const i=E=>E.config.adjustedCastTime(1.5),l=E=>E.config.adjustedGCD(2.5),r=E=>{if(!a.healingPotency)return[];const h=[];return E.addHealingMagicPotencyModifiers(h),E.addHealingActionPotencyModifiers(h),h},d=ke(E=>{a.castTime!==0&&E.tryConsumeResource("SWIFTCAST")},(E,h)=>{if(!(E.hasResourceAvailable("KARDIA")&&h.getInitialPotency()))return;const A=new tn({config:E.config,sourceTime:E.getDisplayTime(),sourceSkill:e,aspect:_e.Other,basePotency:E.hasTraitUnlocked("ENHANCED_HEALING_MAGIC")?170:130,description:Xe("KARDIA"),targetCount:1,snapshotTime:E.getDisplayTime()});E.hasResourceAvailable("TINCTURE")&&A.modifiers.push(X.Tincture),E.hasResourceAvailable("SOTERIA")&&A.modifiers.push(X.Soteria),E.addHealingActionPotencyModifiers(A.modifiers),h.addHoTPotency(A,"KARDION")},(E,h)=>{if(!E.hasResourceAvailable("EUDAIMONIA"))return;const A=new tn({config:E.config,sourceTime:E.getDisplayTime(),sourceSkill:e,aspect:_e.Other,basePotency:150,description:Xe("EUDAIMONIA"),targetCount:E.partySize,snapshotTime:E.getDisplayTime()});E.hasResourceAvailable("TINCTURE")&&A.modifiers.push(X.Tincture),E.addHealingActionPotencyModifiers(A.modifiers),h.addHoTPotency(A,"EUDAIMONIA")},E=>{a.healingPotency&&E.tryConsumeResource("ZOE")},a.onConfirm);return $a("SGE",e,t,{...a,castTime:a.castTime??i,recastTime:a.recastTime??l,isInstantFn:E=>E.hasResourceAvailable("SWIFTCAST"),jobHealingPotencyModifiers:r,onConfirm:d,onApplication:ke((E,h)=>{const A=h.getHotPotencies("KARDION"),R=h.getHotPotencies("EUDAIMONIA");A.length>0&&(N.resolveHealingPotency(A[0]),E.tryConsumeResource("SOTERIA")),R.forEach(T=>{N.resolveHealingPotency(T)})},a.onApplication)})},Hn=(e,t,a,i)=>lt("SGE",e,t,a,{...i,jobHealingPotencyModifiers:r=>{if(!i.healingPotency)return[];const d=[];return r.addHealingActionPotencyModifiers(d),d}}),pS=(e,t,a,i)=>Ke("SGE",e,t,a,i);un("EUKRASIA",30,{castTime:0,recastTime:1,applicationDelay:0,validateAttempt:e=>!e.hasResourceAvailable("EUKRASIA"),onConfirm:e=>e.gainStatus("EUKRASIA")});un("DOSIS",1,{replaceIf:[{condition:e=>e.hasResourceAvailable("EUKRASIA"),newSkill:"EUKRASIAN_DOSIS"}],autoUpgrade:{trait:"OFFENSIVE_MAGIC_MASTERY",otherSkill:"DOSIS_II"},manaCost:300,potency:300,applicationDelay:.67});un("DOSIS_II",72,{startOnHotbar:!1,replaceIf:[{condition:e=>e.hasResourceAvailable("EUKRASIA"),newSkill:"EUKRASIAN_DOSIS_II"}],autoUpgrade:{trait:"OFFENSIVE_MAGIC_MASTERY_II",otherSkill:"DOSIS_III"},manaCost:400,potency:320,applicationDelay:.67});const CS=[["NEVER",330],["MAGICK_MASTERY_HEALER",380]];un("DOSIS_III",82,{startOnHotbar:!1,replaceIf:[{condition:e=>e.hasResourceAvailable("EUKRASIA"),newSkill:"EUKRASIAN_DOSIS_III"}],manaCost:400,potency:CS,applicationDelay:.67});un("EUKRASIAN_DOSIS",30,{startOnHotbar:!1,manaCost:400,castTime:0,recastTime:1.5,applicationDelay:.76,drawsAggro:!0,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"EUKRASIAN_DOSIS",skillName:"EUKRASIAN_DOSIS",tickPotency:40,speedStat:"sps"}),e.tryConsumeResource("EUKRASIA")},onApplication:(e,t)=>{e.applyDoT("EUKRASIAN_DOSIS",t)}});un("EUKRASIAN_DOSIS_II",72,{startOnHotbar:!1,manaCost:400,castTime:0,recastTime:1.5,applicationDelay:.76,drawsAggro:!0,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"EUKRASIAN_DOSIS_II",skillName:"EUKRASIAN_DOSIS_II",tickPotency:60,speedStat:"sps"}),e.tryConsumeResource("EUKRASIA")},onApplication:(e,t)=>{e.applyDoT("EUKRASIAN_DOSIS_II",t)}});un("EUKRASIAN_DOSIS_III",82,{startOnHotbar:!1,manaCost:400,castTime:0,recastTime:1.5,applicationDelay:.76,drawsAggro:!0,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"EUKRASIAN_DOSIS_III",skillName:"EUKRASIAN_DOSIS_III",tickPotency:80,speedStat:"sps"}),e.tryConsumeResource("EUKRASIA")},onApplication:(e,t)=>{e.applyDoT("EUKRASIAN_DOSIS_III",t)}});un("TOXIKON",66,{autoUpgrade:{trait:"OFFENSIVE_MAGIC_MASTERY_II",otherSkill:"TOXIKON_II"},potency:[["NEVER",240],["OFFENSIVE_MAGIC_MASTERY",300]],falloff:.5,applicationDelay:1.2,castTime:0,validateAttempt:e=>e.hasResourceAvailable("ADDERSTING"),onConfirm:e=>e.tryConsumeResource("ADDERSTING")});un("TOXIKON_II",82,{startOnHotbar:!1,potency:CS,falloff:.5,applicationDelay:1.2,castTime:0,validateAttempt:e=>e.hasResourceAvailable("ADDERSTING"),onConfirm:e=>e.tryConsumeResource("ADDERSTING")});un("PHLEGMA",26,{autoUpgrade:{trait:"OFFENSIVE_MAGIC_MASTERY",otherSkill:"PHLEGMA_II"},potency:400,falloff:.5,applicationDelay:.67,manaCost:400,castTime:0,secondaryCooldown:{cdName:"cd_PHLEGMA",maxCharges:2,cooldown:40}});un("PHLEGMA_II",72,{startOnHotbar:!1,autoUpgrade:{trait:"OFFENSIVE_MAGIC_MASTERY_II",otherSkill:"PHLEGMA_III"},potency:490,falloff:.5,applicationDelay:.67,manaCost:400,castTime:0,secondaryCooldown:{cdName:"cd_PHLEGMA",maxCharges:2,cooldown:40}});un("PHLEGMA_III",82,{startOnHotbar:!1,potency:600,falloff:.5,applicationDelay:.67,manaCost:400,castTime:0,secondaryCooldown:{cdName:"cd_PHLEGMA",maxCharges:2,cooldown:40}});Hn("PSYCHE",92,"cd_PSYCHE",{potency:600,falloff:.5,applicationDelay:2.1,cooldown:60});un("DYSKRASIA",46,{autoUpgrade:{trait:"OFFENSIVE_MAGIC_MASTERY_II",otherSkill:"DYSKRASIA_II"},potency:160,falloff:0,applicationDelay:.76,manaCost:400,castTime:0});un("DYSKRASIA_II",82,{startOnHotbar:!1,replaceIf:[{condition:e=>e.hasResourceAvailable("EUKRASIA"),newSkill:"EUKRASIAN_DYSKRASIA"}],potency:170,falloff:0,applicationDelay:.76,manaCost:400,castTime:0});un("EUKRASIAN_DYSKRASIA",82,{startOnHotbar:!1,falloff:0,applicationDelay:1.03,castTime:0,recastTime:1.5,drawsAggro:!0,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"EUKRASIAN_DYSKRASIA",skillName:"EUKRASIAN_DYSKRASIA",tickPotency:40,speedStat:"sps"}),e.tryConsumeResource("EUKRASIA")},onApplication:(e,t)=>{e.applyDoT("EUKRASIAN_DYSKRASIA",t)}});un("DIAGNOSIS",2,{healingPotency:[["NEVER",400],["ENHANCED_HEALING_MAGIC",450]],applicationDelay:.58,replaceIf:[{condition:e=>e.hasResourceAvailable("EUKRASIA"),newSkill:"EUKRASIAN_DIAGNOSIS"}],manaCost:400});un("EUKRASIAN_DIAGNOSIS",30,{startOnHotbar:!1,healingPotency:300,applicationDelay:.67,castTime:0,recastTime:1.5,manaCost:800,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:e=>e.tryConsumeResource("EUKRASIA"),onApplication:e=>e.gainStatus("EUKRASIAN_DIAGNOSIS")});Hn("EUKRASIAN_DIAGNOSIS_POP",30,"cd_DIAGNOSIS_POP",{animationLock:Ia,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("EUKRASIAN_DIAGNOSIS"),onConfirm:e=>{e.tryConsumeResource("EUKRASIAN_DIAGNOSIS"),e.resources.get("ADDERSTING").gain(1)},highlightIf:e=>e.hasResourceAvailable("EUKRASIAN_DIAGNOSIS")});un("PROGNOSIS",10,{healingPotency:300,aoeHeal:!0,applicationDelay:.58,replaceIf:[{condition:e=>e.hasResourceAvailable("EUKRASIA")&&e.hasTraitUnlocked("EUKRASIAN_PROGNOSIS_MASTERY"),newSkill:"EUKRASIAN_PROGNOSIS_II"},{condition:e=>e.hasResourceAvailable("EUKRASIA")&&!e.hasTraitUnlocked("EUKRASIAN_PROGNOSIS_MASTERY"),newSkill:"EUKRASIAN_PROGNOSIS"}],manaCost:700,castTime:e=>e.config.adjustedCastTime(2)});un("EUKRASIAN_PROGNOSIS",30,{startOnHotbar:!1,autoUpgrade:{trait:"EUKRASIAN_PROGNOSIS_MASTERY",otherSkill:"EUKRASIAN_PROGNOSIS_II"},healingPotency:100,aoeHeal:!0,applicationDelay:.94,castTime:0,recastTime:1.5,manaCost:800,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:e=>e.tryConsumeResource("EUKRASIA"),onApplication:e=>e.gainStatus("EUKRASIAN_PROGNOSIS")});un("EUKRASIAN_PROGNOSIS_II",96,{startOnHotbar:!1,healingPotency:100,aoeHeal:!0,applicationDelay:.94,castTime:0,recastTime:1.5,manaCost:800,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:e=>e.tryConsumeResource("EUKRASIA"),onApplication:e=>e.gainStatus("EUKRASIAN_PROGNOSIS")});Hn("EUKRASIAN_PROGNOSIS_POP",30,"cd_PROGNOSIS_POP",{autoUpgrade:{trait:"EUKRASIAN_PROGNOSIS_MASTERY",otherSkill:"EUKRASIAN_PROGNOSIS_II_POP"},animationLock:Ia,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("EUKRASIAN_PROGNOSIS"),onConfirm:e=>{e.tryConsumeResource("EUKRASIAN_PROGNOSIS"),e.resources.get("ADDERSTING").gain(1)},highlightIf:e=>e.hasResourceAvailable("EUKRASIAN_PROGNOSIS")});Hn("EUKRASIAN_PROGNOSIS_II_POP",30,"cd_PROGNOSIS_POP",{startOnHotbar:!1,animationLock:Ia,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("EUKRASIAN_PROGNOSIS"),onConfirm:e=>{e.tryConsumeResource("EUKRASIAN_PROGNOSIS"),e.resources.get("ADDERSTING").gain(1)},highlightIf:e=>e.hasResourceAvailable("EUKRASIAN_PROGNOSIS")});un("PNEUMA",90,{potency:CS,falloff:.4,healingPotency:600,aoeHeal:!0,applicationDelay:.58,manaCost:700,secondaryCooldown:{cdName:"cd_PNEUMA",maxCharges:1,cooldown:120}});pS("ZOE",56,"cd_ZOE",{rscType:"ZOE",applicationDelay:0,cooldown:90});Hn("PEPSIS",58,"cd_PEPSIS",{cooldown:30,applicationDelay:1.16,onConfirm:(e,t)=>{e.hasResourceAvailable("EUKRASIAN_DIAGNOSIS")&&(e.addPepsisPotency("EUKRASIAN_DIAGNOSIS",t),e.tryConsumeResource("EUKRASIAN_DIAGNOSIS")),e.hasResourceAvailable("EUKRASIAN_PROGNOSIS")&&(e.addPepsisPotency("EUKRASIAN_PROGNOSIS",t),e.tryConsumeResource("EUKRASIAN_PROGNOSIS"))},onApplication:(e,t)=>{t.getHotPotencies("PEPSIS").forEach(a=>{N.resolveHealingPotency(a)})}});pS("SOTERIA",35,"cd_SOTERIA",{rscType:"SOTERIA",applicationDelay:.8,cooldown:60});pS("KRASIS",86,"cd_KRASIS",{rscType:"KRASIS",applicationDelay:.76,cooldown:60});Hn("HAIMA",70,"cd_HAIMA",{replaceIf:[{condition:e=>e.hasResourceAvailable("HAIMA"),newSkill:"HAIMA_POP"}],applicationDelay:.76,cooldown:120,onConfirm:(e,t)=>e.addHaimaExpirationPotency("HAIMA",t),onApplication:(e,t)=>{const a=Vt("SGE","HAIMATINON").maxValue;e.gainStatus("HAIMA"),e.gainStatus("HAIMATINON",a),e.addEvent(new ve("Haima Expiration heal Check",Vt("SGE","HAIMA").maxTimeout-.001,()=>e.handleHaimaExpiration("HAIMA",t)))}});Hn("HAIMA_POP",70,"cd_HAIMA_POP",{startOnHotbar:!1,animationLock:Ia,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("HAIMA"),highlightIf:e=>e.hasResourceAvailable("HAIMA"),onConfirm:e=>{e.hasResourceAvailable("HAIMATINON")?e.tryConsumeResource("HAIMATINON"):e.tryConsumeResource("HAIMA")}});Hn("PHYSIS_II",60,"cd_PHYSIS",{aoeHeal:!0,applicationDelay:.85,cooldown:60,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"PHYSIS_II",effectName:"PHYSIS_II",speedStat:"sps",tickPotency:130})},onApplication:(e,t)=>{e.applyHoT("PHYSIS_II",t),e.gainStatus("AUTOPHYSIS")}});Hn("PHILOSOPHIA",100,"cd_PHILOSOPHIA",{applicationDelay:1.83,cooldown:180,onApplication:e=>{e.gainStatus("PHILOSOPHIA"),e.gainStatus("EUDAIMONIA")}});Hn("HOLOS",76,"cd_HOLOS",{applicationDelay:.62,cooldown:120,onApplication:e=>{e.gainStatus("HOLOS"),e.gainStatus("HOLOSAKOS")}});Hn("PANHAIMA",80,"cd_PANHAIMA",{replaceIf:[{condition:e=>e.hasResourceAvailable("PANHAIMA"),newSkill:"PANHAIMA_POP"}],applicationDelay:.62,cooldown:120,onConfirm:(e,t)=>e.addHaimaExpirationPotency("PANHAIMA",t),onApplication:(e,t)=>{const a=Vt("SGE","PANHAIMATINON").maxValue;e.gainStatus("PANHAIMA"),e.gainStatus("PANHAIMATINON",a),e.addEvent(new ve("Panhaima Expiration heal Check",Vt("SGE","PANHAIMA").maxTimeout-.001,()=>e.handleHaimaExpiration("PANHAIMA",t)))}});Hn("PANHAIMA_POP",80,"cd_PANHAIMA_POP",{startOnHotbar:!1,animationLock:Ia,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("PANHAIMA"),highlightIf:e=>e.hasResourceAvailable("PANHAIMA"),onConfirm:e=>{e.hasResourceAvailable("PANHAIMATINON")?e.tryConsumeResource("PANHAIMATINON"):e.tryConsumeResource("PANHAIMA")}});Hn("RHIZOMATA",74,"cd_RHIZOMATA",{cooldown:90,onConfirm:e=>e.resources.get("ADDERSGALL").gain(1)});Hn("DRUOCHOLE",45,"cd_DRUOCHOLE",{cooldown:1,healingPotency:600,applicationDelay:.78,validateAttempt:e=>e.hasResourceAvailable("ADDERSGALL"),onConfirm:e=>e.consumeAddersgall()});Hn("IXOCHOLE",52,"cd_IXOCHOLE",{cooldown:30,healingPotency:400,aoeHeal:!0,applicationDelay:.756,validateAttempt:e=>e.hasResourceAvailable("ADDERSGALL"),onConfirm:e=>e.consumeAddersgall()});Hn("TAUROCHOLE",62,"cd_TAUROCHOLE",{cooldown:45,applicationDelay:.67,onConfirm:e=>e.consumeAddersgall(),onApplication:e=>e.gainStatus("TAUROCHOLE")});Hn("KERACHOLE",50,"cd_KERACHOLE",{cooldown:30,aoeHeal:!0,applicationDelay:.81,validateAttempt:e=>e.hasResourceAvailable("ADDERSGALL"),onConfirm:(e,t)=>{e.consumeAddersgall(),e.addHoTPotencies({node:t,skillName:"KERACHOLE",effectName:"KERAKEIA",speedStat:"sps",tickPotency:100})},onApplication:(e,t)=>{e.gainStatus("KERACHOLE"),e.hasTraitUnlocked("ENHANCED_KERACHOLE")&&e.applyHoT("KERAKEIA",t)}});un("EGEIRO",12,{applicationDelay:.58,manaCost:2400,castTime:8});Hn("KARDIA",4,"cd_KARDIA",{applicationDelay:.62,cooldown:5,onApplication:e=>{e.gainStatus("KARDIA"),e.gainStatus("KARDION")}});Hn("ICARUS",40,"cd_ICARUS",{cooldown:45,animationLock:Wt});Object.keys(wT).forEach(e=>Ft(e,`WAR/${ze[e].name}.png`));class BB extends Xt{jobSpecificSelfTargetedBuffViewProps(){return Object.keys(wT).map(t=>this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){var h,A;const a=this.state.resources,i=a.get("BEAST_GAUGE").availableAmount(),l=a.get("STORM_COMBO"),r=a.get("TEMPEST_COMBO"),d=l.available(1)?(h=l.pendingChange)==null?void 0:h.timeTillEvent:r.available(1)?(A=r.pendingChange)==null?void 0:A.timeTillEvent:void 0;return[{kind:"text",name:g({en:"Combo Timer",zh:""}),text:(d==null?void 0:d.toFixed(3))??"N/A"},{kind:"bar",name:g({en:"Beast Gauge",zh:""}),color:t.war.beastGauge,progress:i/100,valueString:i.toFixed(0)}]}}const Gt=(e,t,a)=>{qe("WAR",e,t,a??{})};Gt("BEAST_GAUGE",100,{warnOnOvercap:!0});const OS=.74,ED=1.16;Gt("SURGING_TEMPEST",1,{timeout:60});Gt("NASCENT_CHAOS",1,{timeout:30});Gt("INNER_RELEASE",3,{timeout:15+OS});Gt("INNER_STRENGTH",1,{timeout:15+OS});Gt("BURGEONING_FURY",3,{timeout:30});Gt("WRATHFUL",1,{timeout:30});Gt("PRIMAL_REND_READY",1,{timeout:30+OS,warnOnTimeout:!0});Gt("PRIMAL_RUINATION_READY",1,{timeout:20+ED,warnOnTimeout:!0});Gt("THRILL_OF_BATTLE",1,{timeout:10});Gt("EQUILIBRIUM",1,{timeout:15});Gt("RAW_INTUITION",1,{timeout:6});Gt("BLOODWHETTING",1,{timeout:8});Gt("STEM_THE_FLOW",1,{timeout:4});Gt("STEM_THE_TIDE",1,{timeout:20});Gt("NASCENT_FLASH",1,{timeout:8});Gt("VENGEANCE",1,{timeout:15});Gt("DAMNATION",1,{timeout:15});Gt("PRIMEVAL_IMPULSE",1,{timeout:15});Gt("SHAKE_IT_OFF",1,{timeout:30});Gt("SHAKE_IT_OFF_OVER_TIME",1,{timeout:15});Gt("HOLMGANG",1,{timeout:10});Gt("DEFIANCE",1);Gt("STORM_COMBO",2,{timeout:30});Gt("TEMPEST_COMBO",1,{timeout:30});const FB=["HEAVY_SWING","MAIM","STORMS_EYE","STORMS_PATH"],fD=["OVERPOWER","MYTHRIL_TEMPEST"],zB=[...FB,...fD],AC=["FELL_CLEAVE","DECIMATE"],jB=["THRILL_OF_BATTLE","DAMNATION","BLOODWHETTING","VENGEANCE","RAW_INTUITION"];class YB extends qt{constructor(t){super(t),this.hasTraitUnlocked("ENHANCED_ONSLAUGHT")&&this.cooldowns.set(new Ge("cd_ONSLAUGHT",30,3,3)),this.registerRecurringEvents()}get statusPropsGenerator(){return new BB(this)}processComboStatus(t){if(!zB.includes(t))return;const a=fD.includes(t),i=a?"TEMPEST_COMBO":"STORM_COMBO",l=a?"STORM_COMBO":"TEMPEST_COMBO";this.setComboState(l,0);const r=this.resources.get(i).availableAmount();let d=0;a?t==="OVERPOWER"&&(d=1):t==="HEAVY_SWING"?d=1:r===1&&t==="MAIM"&&(d=2),this.setComboState(i,d)}hasComboStatus(t,a){return this.hasResourceExactly(t,a)}gainBeastGauge(t){this.resources.get("BEAST_GAUGE").gain(t)}gainProc(t,a){const i=Vt("WAR",t).maxTimeout;this.hasResourceAvailable(t)?(t==="BURGEONING_FURY"&&this.resources.get(t).gain(1),this.resources.get(t).overrideTimer(this,i)):(this.resources.get(t).gain(a??1),i&&this.enqueueResourceDrop(t,i))}gainSurgingTempest(t){var r;const a=this.resources.get("SURGING_TEMPEST"),i=Vt("WAR","SURGING_TEMPEST").maxTimeout,l=(((r=a.pendingChange)==null?void 0:r.timeTillEvent)??0)+t;a.overrideTimer(this,l>=i?i:l)}gainSurgingTempestGCD(t,a,i){this.hasResourceAvailable("SURGING_TEMPEST")?this.addEvent(new ve("surging tempest refresh",a,()=>{this.hasResourceAvailable("SURGING_TEMPEST")?this.gainSurgingTempest(t):(this.resources.get("SURGING_TEMPEST").gain(1),this.enqueueResourceDrop("SURGING_TEMPEST",t))})):(this.resources.get("SURGING_TEMPEST").gain(1),this.enqueueResourceDrop("SURGING_TEMPEST",t+i))}}const ti=(e,t,a)=>{const i=ke(a.onConfirm,r=>r.processComboStatus(e),r=>{AC.includes(e)&&r.tryConsumeResource("INNER_RELEASE")&&r.hasTraitUnlocked("ENHANCED_INNER_RELEASE")&&(r.gainProc("BURGEONING_FURY"),r.hasResourceAvailable("BURGEONING_FURY",3)&&(r.gainProc("WRATHFUL"),r.tryConsumeResource("BURGEONING_FURY",!0)))}),l=a.jobPotencyModifiers??(r=>[]);return on("WAR",e,t,{...a,onConfirm:i,recastTime:r=>r.config.adjustedSksGCD(),jobPotencyModifiers:r=>{const d=l(r);return r.hasResourceAvailable("SURGING_TEMPEST")&&d.push(X.SurgingTempest),r.hasResourceAvailable("INNER_RELEASE")&&AC.includes(e)&&d.push(X.AutoCDH),d}})},Tc=(e,t,a,i)=>lt("WAR",e,t,a,{...i,jobPotencyModifiers:l=>{const r=[];return l.hasResourceAvailable("SURGING_TEMPEST")&&r.push(X.SurgingTempest),r}});ti("TOMAHAWK",15,{potency:150,applicationDelay:.71});ti("HEAVY_SWING",1,{potency:[["NEVER",150],["MELEE_MASTERY_TANK",200],["MELEE_MASTERY_II_TANK",240]],applicationDelay:.53});ti("MAIM",4,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",150],["MELEE_MASTERY_II_TANK",190]],combo:{potency:[["NEVER",250],["MELEE_MASTERY_TANK",300],["MELEE_MASTERY_II_TANK",340]],resource:"STORM_COMBO",resourceValue:1},applicationDelay:.62,onConfirm:e=>{e.hasComboStatus("STORM_COMBO",1)&&e.gainBeastGauge(10)},highlightIf:e=>e.hasComboStatus("STORM_COMBO",1)});ti("STORMS_PATH",26,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",160],["MELEE_MASTERY_II_TANK",220]],combo:{potency:[["NEVER",380],["MELEE_MASTERY_TANK",440],["MELEE_MASTERY_II_TANK",500]],resource:"STORM_COMBO",resourceValue:2},applicationDelay:1.52,onConfirm:e=>{e.hasComboStatus("STORM_COMBO",2)&&e.gainBeastGauge(20)},highlightIf:e=>e.hasComboStatus("STORM_COMBO",2)});ti("STORMS_EYE",50,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",160],["MELEE_MASTERY_II_TANK",220]],combo:{potency:[["NEVER",380],["MELEE_MASTERY_TANK",440],["MELEE_MASTERY_II_TANK",500]],resource:"STORM_COMBO",resourceValue:2},applicationDelay:1.65,onConfirm:e=>{e.hasComboStatus("STORM_COMBO",2)&&(e.gainBeastGauge(10),e.gainSurgingTempestGCD(30,1.65,1.7))},highlightIf:e=>e.hasComboStatus("STORM_COMBO",2)});ti("OVERPOWER",10,{potency:110,falloff:0,applicationDelay:.62});ti("MYTHRIL_TEMPEST",40,{potency:100,combo:{potency:140,resource:"TEMPEST_COMBO",resourceValue:1},falloff:0,applicationDelay:.49,onConfirm:e=>{e.hasComboStatus("TEMPEST_COMBO",1)&&(e.gainBeastGauge(20),e.gainSurgingTempestGCD(30,.49,.45))},highlightIf:e=>e.hasComboStatus("TEMPEST_COMBO",1)});function mf(e){e.cooldowns.get("cd_INFURIATE").restore(5)}ti("FELL_CLEAVE",54,{potency:[["NEVER",520],["MELEE_MASTERY_II_TANK",580]],applicationDelay:.62,validateAttempt:e=>e.resources.get("BEAST_GAUGE").available(50)||e.resources.get("INNER_RELEASE").available(1),onConfirm:e=>{e.hasResourceAvailable("INNER_RELEASE")||e.resources.get("BEAST_GAUGE").consume(50),mf(e)},replaceIf:[{newSkill:"INNER_CHAOS",condition:e=>e.hasResourceAvailable("NASCENT_CHAOS")}],highlightIf:e=>e.hasResourceAvailable("BEAST_GAUGE",50)||e.hasResourceAvailable("INNER_RELEASE")});ti("DECIMATE",60,{potency:180,falloff:0,applicationDelay:1.83,validateAttempt:e=>e.hasResourceAvailable("BEAST_GAUGE",50)||e.hasResourceAvailable("INNER_RELEASE"),onConfirm:e=>{e.hasResourceAvailable("INNER_RELEASE")||e.resources.get("BEAST_GAUGE").consume(50),mf(e)},highlightIf:e=>e.hasResourceAvailable("BEAST_GAUGE",50)||e.hasResourceAvailable("INNER_RELEASE"),replaceIf:[{newSkill:"CHAOTIC_CYCLONE",condition:e=>e.hasResourceAvailable("NASCENT_CHAOS")}]});Tc("INNER_RELEASE",70,"cd_INNER_RELEASE",{applicationDelay:0,requiresCombat:!0,cooldown:60,maxCharges:1,onConfirm:e=>{e.gainProc("INNER_RELEASE",3),e.gainProc("INNER_STRENGTH"),e.hasResourceAvailable("SURGING_TEMPEST")&&e.gainSurgingTempest(10),e.config.level>=nt.lvl90&&e.gainProc("PRIMAL_REND_READY")},replaceIf:[{newSkill:"PRIMAL_WRATH",condition:e=>e.hasResourceAvailable("WRATHFUL")}]});ti("PRIMAL_REND",90,{potency:700,applicationDelay:ED,falloff:.5,animationLock:1.2,validateAttempt:e=>e.hasResourceAvailable("PRIMAL_REND_READY"),onConfirm:e=>{e.tryConsumeResource("PRIMAL_REND_READY"),e.hasTraitUnlocked("ENHANCED_PRIMAL_REND")&&e.gainProc("PRIMAL_RUINATION_READY")},highlightIf:e=>e.hasResourceAvailable("PRIMAL_REND_READY"),replaceIf:[{newSkill:"PRIMAL_RUINATION",condition:e=>e.hasResourceAvailable("PRIMAL_RUINATION_READY")}],jobPotencyModifiers:e=>[X.AutoCDH]});Tc("PRIMAL_WRATH",96,"cd_PRIMAL_WRATH",{startOnHotbar:!1,potency:700,falloff:.5,applicationDelay:1.15,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("WRATHFUL"),onConfirm:e=>e.tryConsumeResource("WRATHFUL"),highlightIf:e=>!0});ti("PRIMAL_RUINATION",100,{startOnHotbar:!1,potency:780,falloff:.5,applicationDelay:1.06,validateAttempt:e=>e.hasResourceAvailable("PRIMAL_RUINATION_READY"),onConfirm:e=>{e.tryConsumeResource("PRIMAL_RUINATION_READY")},highlightIf:e=>!0,jobPotencyModifiers:e=>[X.AutoCDH]});Tc("INFURIATE",50,"cd_INFURIATE",{applicationDelay:0,requiresCombat:!0,cooldown:60,maxCharges:2,onApplication:e=>{e.gainBeastGauge(50),e.hasTraitUnlocked("NASCENT_CHAOS")&&e.gainProc("NASCENT_CHAOS")}});ti("INNER_CHAOS",80,{startOnHotbar:!1,potency:660,applicationDelay:.94,validateAttempt:e=>e.hasResourceAvailable("BEAST_GAUGE",50)&&e.hasResourceAvailable("NASCENT_CHAOS"),onConfirm:e=>{e.tryConsumeResource("NASCENT_CHAOS"),e.resources.get("BEAST_GAUGE").consume(50),mf(e)},highlightIf:e=>e.hasResourceAvailable("BEAST_GAUGE",50),jobPotencyModifiers:e=>[X.AutoCDH]});ti("CHAOTIC_CYCLONE",72,{startOnHotbar:!1,potency:200,falloff:0,applicationDelay:1.43,validateAttempt:e=>e.hasResourceAvailable("BEAST_GAUGE",50)&&e.hasResourceAvailable("NASCENT_CHAOS"),onConfirm:e=>{e.tryConsumeResource("NASCENT_CHAOS"),e.resources.get("BEAST_GAUGE").consume(50),mf(e)},highlightIf:e=>e.hasResourceAvailable("BEAST_GAUGE",50),jobPotencyModifiers:e=>[X.AutoCDH]});Tc("ONSLAUGHT",62,"cd_ONSLAUGHT",{potency:150,applicationDelay:.63,cooldown:30,maxCharges:2,animationLock:Wt});Tc("UPHEAVAL",64,"cd_UPHEAVAL",{potency:420,applicationDelay:.62,cooldown:30});Tc("OROGENY",86,"cd_UPHEAVAL",{potency:150,falloff:0,applicationDelay:.62,cooldown:30});Ke("WAR","VENGEANCE",38,"cd_VENGEANCE",{rscType:"VENGEANCE",autoUpgrade:{trait:"VENGEANCE_MASTERY",otherSkill:"DAMNATION"},cooldown:120,applicationDelay:.62});Ke("WAR","DAMNATION",92,"cd_VENGEANCE",{rscType:"DAMNATION",autoDowngrade:{trait:"VENGEANCE_MASTERY",otherSkill:"VENGEANCE"},cooldown:120,applicationDelay:.62});Ke("WAR","RAW_INTUITION",56,"cd_RAW_INTUITION",{rscType:"RAW_INTUITION",autoUpgrade:{trait:"RAW_INTUITION_MASTERY",otherSkill:"BLOODWHETTING"},cooldown:25,applicationDelay:.45});Ke("WAR","BLOODWHETTING",82,"cd_RAW_INTUITION",{rscType:"BLOODWHETTING",autoDowngrade:{trait:"RAW_INTUITION_MASTERY",otherSkill:"RAW_INTUITION"},onApplication:e=>{e.gainProc("STEM_THE_FLOW"),e.gainProc("STEM_THE_TIDE")},cooldown:25,applicationDelay:.45});lt("WAR","NASCENT_FLASH",76,"cd_RAW_INTUITION",{onApplication:e=>{let t=6;e.hasTraitUnlocked("ENHANCED_NASCENT_FLASH")&&(t=8),e.resources.get("NASCENT_FLASH").gain(1),e.enqueueResourceDrop("NASCENT_FLASH",t)},cooldown:25,applicationDelay:.45});Ke("WAR","HOLMGANG",45,"cd_HOLMGANG",{rscType:"HOLMGANG",cooldown:240,applicationDelay:.45});Ke("WAR","THRILL_OF_BATTLE",30,"cd_THRILL_OF_BATTLE",{rscType:"THRILL_OF_BATTLE",cooldown:90,applicationDelay:.62});lt("WAR","EQUILIBRIUM",58,"cd_EQUILIBRIUM",{cooldown:60,applicationDelay:.62,onApplication:e=>{e.hasTraitUnlocked("ENHANCED_EQUILIBRIUM")&&e.gainProc("EQUILIBRIUM")}});Ke("WAR","SHAKE_IT_OFF",68,"cd_SHAKE_IT_OFF",{rscType:"SHAKE_IT_OFF",cooldown:90,onApplication:(e,t)=>{let a=0;jB.forEach(i=>{e.tryConsumeResource(i)&&(a+=1)}),console.debug(`Shake It Off dispelled ${a} buffs`),e.gainProc("SHAKE_IT_OFF_OVER_TIME")},applicationDelay:0});lt("WAR","DEFIANCE",10,"cd_DEFIANCE",{cooldown:2,maxCharges:1,applicationDelay:0,validateAttempt:e=>!e.hasResourceAvailable("DEFIANCE"),onConfirm:e=>e.resources.get("DEFIANCE").gain(1),replaceIf:[{newSkill:"RELEASE_DEFIANCE",condition:e=>e.hasResourceAvailable("DEFIANCE")}],secondaryCooldown:{cdName:"cd_RELEASE_DEFIANCE",cooldown:1,maxCharges:1}});lt("WAR","RELEASE_DEFIANCE",10,"cd_RELEASE_DEFIANCE",{startOnHotbar:!1,cooldown:1,maxCharges:1,secondaryCooldown:{cdName:"cd_DEFIANCE",cooldown:2,maxCharges:1},applicationDelay:0,validateAttempt:e=>e.hasResourceAvailable("DEFIANCE"),onConfirm:e=>e.tryConsumeResource("DEFIANCE")});const AD=["CIRCLE_OF_SCORN_DOT"],KB=Object.keys(vT).filter(e=>!AD.includes(e));Object.keys(vT).forEach(e=>Ft(e,`PLD/${ze[e].name}.png`));class VB extends Xt{jobSpecificOtherTargetedBuffViewProps(){return[...AD.map(t=>this.makeCommonTimer(t,!1))]}jobSpecificSelfTargetedBuffViewProps(){return KB.map(t=>this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){var T,S;const a=this.state.resources,i=a.get("PLD_COMBO_TRACKER"),l=a.get("PLD_AOE_COMBO_TRACKER"),r=a.get("OATH_GAUGE").availableAmount(),d=a.get("IRON_WILL").availableAmount(),E=i.available(1)?(T=i.pendingChange)==null?void 0:T.timeTillEvent:l.available(1)?(S=l.pendingChange)==null?void 0:S.timeTillEvent:void 0,h=this.state.findAutoAttackTimerInQueue();let A="";return this.state.hasResourceAvailable("STORED_AUTO")?A="stored":A=h!==-1?h.toFixed(3):"N/A",[{kind:"bar",name:g({en:"Auto Tracker"}),color:t.pld.ironWillColor,progress:h!==-1?(3-h)/3:0,valueString:A},{kind:"bar",name:g({en:"Combo Timer",zh:""}),color:t.pld.pldComboTimer,progress:E?E/30:0,valueString:(E==null?void 0:E.toFixed(3))??"N/A"},{kind:"counter",name:g({en:"Iron Will",zh:""}),color:t.pld.ironWillColor,currentStacks:d,maxStacks:1},{kind:"bar",name:g({en:"Oath Gauge",zh:""}),color:t.pld.oathGaugeColor,progress:r/100,valueString:r.toFixed(0)}]}}const gt=(e,t,a)=>{qe("PLD",e,t,a??{})};gt("FIGHT_OR_FLIGHT",1,{timeout:20});gt("IRON_WILL",1);gt("OATH_GAUGE",100);gt("SHELTRON",1,{timeout:6});gt("SENTINEL",1,{timeout:15});gt("CIRCLE_OF_SCORN_DOT",1,{timeout:15});gt("HALLOWED_GROUND",1,{timeout:10});gt("BULWARK",1,{timeout:10});gt("GORING_BLADE_READY",1,{timeout:30});gt("DIVINE_VEIL",1,{timeout:30});gt("ATONEMENT_READY",1,{timeout:30,warnOnTimeout:!0});gt("DIVINE_MIGHT",1,{timeout:30,warnOnTimeout:!0});gt("KNIGHTS_RESOLVE",1,{timeout:4});gt("KNIGHTS_BENEDICTION",1,{timeout:12});gt("REQUIESCAT",4,{timeout:30,warnOnTimeout:!0});gt("CONFITEOR_READY",1,{timeout:30,warnOnTimeout:!0});gt("PASSAGE_OF_ARMS",1,{timeout:18});gt("SUPPLICATION_READY",1,{timeout:30,warnOnTimeout:!0});gt("SEPULCHRE_READY",1,{timeout:30,warnOnTimeout:!0});gt("HOLY_SHELTRON",1,{timeout:8});gt("BLADE_OF_HONOR_READY",1,{timeout:30,warnOnTimeout:!0});gt("GUARDIAN",1,{timeout:15});gt("GUARDIANS_WILL",1,{timeout:15});gt("PLD_COMBO_TRACKER",2,{timeout:30});gt("PLD_CONFITEOR_COMBO_TRACKER",3,{timeout:30});gt("PLD_AOE_COMBO_TRACKER",1,{timeout:30});gt("INTERVENTION",1,{timeout:8});gt("ARMS_UP",1);gt("COVER",1,{timeout:12});const SR=new Map([["TOTAL_ECLIPSE",0],["PROMINENCE",1]]),IR=new Map([["FAST_BLADE",0],["RIOT_BLADE",1],["ROYAL_AUTHORITY",2]]),mD=new Map([["CONFITEOR",0],["BLADE_OF_FAITH",1],["BLADE_OF_TRUTH",2],["BLADE_OF_VALOR",3]]),Jh=["HOLY_SPIRIT","HOLY_CIRCLE"];class WB extends qt{constructor(t){super(t),this.resources.get("OATH_GAUGE").gain(100),this.registerRecurringEvents([{groupedEffects:[{effectName:"CIRCLE_OF_SCORN_DOT",appliedBy:["CIRCLE_OF_SCORN"]}]}])}get statusPropsGenerator(){return new VB(this)}jobSpecificAddDamageBuffCovers(t,a){this.hasResourceAvailable("FIGHT_OR_FLIGHT")&&t.addBuff(x.FightOrFlight);const i=a.name;this.hasResourceAvailable("DIVINE_MIGHT")&&(i==="HOLY_SPIRIT"||i==="HOLY_CIRCLE")?t.addBuff(x.DivineMight):this.hasResourceAvailable("REQUIESCAT")&&(i==="HOLY_SPIRIT"||i==="HOLY_CIRCLE"||i==="CONFITEOR"||i==="BLADE_OF_FAITH"||i==="BLADE_OF_TRUTH"||i==="BLADE_OF_VALOR")&&t.addBuff(x.Requiescat)}cancelChanneledSkills(){this.tryConsumeResource("PASSAGE_OF_ARMS")}jobSpecificOnAutoAttack(){N.reportAutoTick(this.time,"auto"),this.resources.get("OATH_GAUGE").gain(5)}isSpellInstant(t){return t!=="CLEMENCY"?this.hasResourceAvailable("DIVINE_MIGHT")||this.hasResourceAvailable("REQUIESCAT"):this.hasResourceAvailable("REQUIESCAT")}captureSpellCastTime(t,a){return this.isSpellInstant(t)?0:this.config.adjustedCastTime(a)}tryConsumeRequiescat(t){(Jh.includes(t)||mD.has(t)||t==="CLEMENCY")&&this.tryConsumeResource("REQUIESCAT")}isHolySpiritCircleGoodForReq(){const t=this.resources.get("REQUIESCAT").availableAmount();return t===0||this.hasResourceAvailable("PLD_CONFITEOR_COMBO_TRACKER")||this.config.level>=90?!1:this.config.level>=80?!this.hasResourceAvailable("CONFITEOR_READY")||this.hasResourceAvailable("CONFITEOR_READY")&&t>1:!0}progressComboTracker(t,a,i){const l=this.resources.get(a).maxValue,r=i.get(t)??-1,d=this.resources.get(a).availableAmount();this.tryConsumeResource(a,!0),(r!==l&&r===d||r===0)&&(this.resources.get(a).gain(r+1),this.enqueueResourceDrop(a))}fixPLDPhysicalComboState(t){SR.has(t)?(this.tryConsumeResource("PLD_COMBO_TRACKER",!0),this.progressComboTracker(t,"PLD_AOE_COMBO_TRACKER",SR)):IR.has(t)&&(this.tryConsumeResource("PLD_AOE_COMBO_TRACKER",!0),this.progressComboTracker(t,"PLD_COMBO_TRACKER",IR)),(SR.has(t)||IR.has(t)||t==="SHIELD_BASH")&&this.tryConsumeResource("PLD_CONFITEOR_COMBO_TRACKER",!0)}getDelayedManaFromAction(t,a){this.addEvent(new ve("get MP from "+a,this.skillsList.get(a).applicationDelay,()=>{this.resources.get("MANA").gain(t)}))}refreshBuff(t,a){this.addEvent(new ve("gain buff",a,()=>{this.resources.get(t).gain(1),this.enqueueResourceDrop(t)}))}}const Bi=(e,t,a)=>{const i=ke(a.onConfirm,l=>{e!=="SHIELD_LOB"&&e!=="SHIELD_BASH"&&e!=="GORING_BLADE"&&l.fixPLDPhysicalComboState(e)});return on("PLD",e,t,{...a,onConfirm:i,recastTime:l=>l.config.adjustedSksGCD(),jobPotencyModifiers:l=>l.hasResourceAvailable("FIGHT_OR_FLIGHT")?[X.FightOrFlight]:[]})},Ps=(e,t,a)=>{const i=ke((l,r)=>{l.hasResourceAvailable("DIVINE_MIGHT")&&Jh.includes(e)?l.tryConsumeResource("DIVINE_MIGHT"):l.tryConsumeRequiescat(e)},a.onConfirm);return $a("PLD",e,t,{...a,castTime:l=>l.captureSpellCastTime(e,a.baseCastTime),recastTime:l=>l.config.adjustedGCD(),manaCost:a.baseManaCost??0,potency:a.basePotency,jobPotencyModifiers:l=>{const r=[];return Jh.includes(e)&&l.hasResourceAvailable("DIVINE_MIGHT")?a.dmPotency&&r.push(MU(an(l,a.dmPotency)-an(l,a.basePotency))):(Jh.includes(e)||mD.has(e))&&l.hasResourceAvailable("REQUIESCAT")&&a.reqPotency&&r.push(vU(an(l,a.reqPotency)-an(l,a.basePotency))),e!=="CLEMENCY"&&l.hasResourceAvailable("FIGHT_OR_FLIGHT")&&r.push(X.FightOrFlight),a.jobPotencyModifiers&&r.push(...a.jobPotencyModifiers(l)),r},isInstantFn:l=>l.isSpellInstant(e),onConfirm:i})},Yn=(e,t,a,i)=>lt("PLD",e,t,a,{...i,jobPotencyModifiers:l=>{const r=[];return l.hasResourceAvailable("FIGHT_OR_FLIGHT")&&r.push(X.FightOrFlight),r}}),RD=(e,t,a,i)=>Ke("PLD",e,t,a,{...i,rscType:i.rscType,cooldown:i.cooldown,applicationDelay:i.applicationDelay}),TD={newSkill:"ATONEMENT",condition:e=>e.hasResourceAvailable("ATONEMENT_READY")},SD={newSkill:"SUPPLICATION",condition:e=>e.hasResourceAvailable("SUPPLICATION_READY")},ID={newSkill:"SEPULCHRE",condition:e=>e.hasResourceAvailable("SEPULCHRE_READY")},bS={newSkill:"CONFITEOR",condition:e=>e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").availableAmount()===0},Fu={newSkill:"BLADE_OF_FAITH",condition:e=>e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").availableAmount()===1},zu={newSkill:"BLADE_OF_TRUTH",condition:e=>e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").availableAmount()===2},ju={newSkill:"BLADE_OF_VALOR",condition:e=>e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").availableAmount()===3},oT={newSkill:"BLADE_OF_HONOR",condition:e=>e.hasResourceAvailable("BLADE_OF_HONOR_READY")},XB={newSkill:"IMPERATOR",condition:e=>!e.hasResourceAvailable("BLADE_OF_HONOR_READY")},qB={newSkill:"IRON_WILL",condition:e=>!e.hasResourceAvailable("IRON_WILL")},ZB={newSkill:"RELEASE_IRON_WILL",condition:e=>e.hasResourceAvailable("IRON_WILL")};Bi("SHIELD_LOB",15,{potency:100,applicationDelay:.89,startsAuto:!1});Bi("FAST_BLADE",1,{potency:[["NEVER",150],["MELEE_MASTERY_TANK",200],["MELEE_MASTERY_II_TANK",220]],applicationDelay:.62});Bi("RIOT_BLADE",4,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",140],["MELEE_MASTERY_II_TANK",170]],combo:{potency:[["NEVER",260],["MELEE_MASTERY_TANK",300],["MELEE_MASTERY_II_TANK",330]],resource:"PLD_COMBO_TRACKER",resourceValue:1},highlightIf:e=>e.resources.get("PLD_COMBO_TRACKER").availableAmount()===1,applicationDelay:.76,onConfirm:e=>{e.resources.get("PLD_COMBO_TRACKER").availableAmount()===1&&e.getDelayedManaFromAction(1e3,"RIOT_BLADE")}});Bi("ROYAL_AUTHORITY",60,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",140],["MELEE_MASTERY_II_TANK",200]],combo:{potency:[["NEVER",360],["MELEE_MASTERY_TANK",400],["MELEE_MASTERY_II_TANK",460]],resource:"PLD_COMBO_TRACKER",resourceValue:2},highlightIf:e=>e.resources.get("PLD_COMBO_TRACKER").availableAmount()===2,applicationDelay:.62,onConfirm:e=>{e.resources.get("PLD_COMBO_TRACKER").availableAmount()===2&&(e.refreshBuff("DIVINE_MIGHT",0),e.hasTraitUnlocked("SWORD_OATH")&&(e.refreshBuff("ATONEMENT_READY",0),e.tryConsumeResource("SUPPLICATION_READY"),e.tryConsumeResource("SEPULCHRE_READY")))}});Bi("ATONEMENT",76,{replaceIf:[SD,ID],potency:[["NEVER",360],["MELEE_MASTERY_TANK",400],["MELEE_MASTERY_II_TANK",460]],applicationDelay:1.26,validateAttempt:e=>e.hasResourceAvailable("ATONEMENT_READY"),highlightIf:e=>e.hasResourceAvailable("ATONEMENT_READY"),onConfirm:e=>{e.tryConsumeResource("ATONEMENT_READY"),e.refreshBuff("SUPPLICATION_READY",0),e.getDelayedManaFromAction(400,"ATONEMENT")}});Bi("SUPPLICATION",76,{startOnHotbar:!1,replaceIf:[TD,ID],potency:[["NEVER",380],["MELEE_MASTERY_TANK",420],["MELEE_MASTERY_II_TANK",500]],applicationDelay:1.16,validateAttempt:e=>e.hasResourceAvailable("SUPPLICATION_READY"),highlightIf:e=>e.hasResourceAvailable("SUPPLICATION_READY"),onConfirm:e=>{e.tryConsumeResource("SUPPLICATION_READY"),e.refreshBuff("SEPULCHRE_READY",0),e.getDelayedManaFromAction(400,"SUPPLICATION")}});Bi("SEPULCHRE",76,{startOnHotbar:!1,replaceIf:[TD,SD],potency:[["NEVER",400],["MELEE_MASTERY_TANK",440],["MELEE_MASTERY_II_TANK",540]],applicationDelay:1.29,validateAttempt:e=>e.hasResourceAvailable("SEPULCHRE_READY"),highlightIf:e=>e.hasResourceAvailable("SEPULCHRE_READY"),onConfirm:e=>{e.tryConsumeResource("SEPULCHRE_READY"),e.getDelayedManaFromAction(400,"SEPULCHRE")}});Bi("TOTAL_ECLIPSE",6,{potency:120,applicationDelay:.76,falloff:0});Bi("PROMINENCE",40,{potency:100,combo:{potency:220,resource:"PLD_AOE_COMBO_TRACKER",resourceValue:1},applicationDelay:.62,falloff:0,highlightIf:e=>e.resources.get("PLD_AOE_COMBO_TRACKER").availableAmount()===1,onConfirm:e=>{e.resources.get("PLD_AOE_COMBO_TRACKER").availableAmount()===1&&e.hasTraitUnlocked("ENHANCED_PROMINENCE")&&(e.refreshBuff("DIVINE_MIGHT",0),e.getDelayedManaFromAction(500,"PROMINENCE"))}});Ps("HOLY_SPIRIT",64,{baseCastTime:1.5,applicationDelay:.76,baseManaCost:1e3,startsAuto:!1,basePotency:[["NEVER",300],["MELEE_MASTERY_TANK",350],["MELEE_MASTERY_II_TANK",400]],reqPotency:[["NEVER",600],["MELEE_MASTERY_TANK",650],["MELEE_MASTERY_II_TANK",700]],dmPotency:[["NEVER",400],["MELEE_MASTERY_TANK",450],["MELEE_MASTERY_II_TANK",500]],highlightIf:e=>e.hasResourceAvailable("DIVINE_MIGHT")||e.isHolySpiritCircleGoodForReq()});Ps("HOLY_CIRCLE",72,{baseCastTime:1.5,applicationDelay:.62,baseManaCost:1e3,basePotency:100,reqPotency:350,dmPotency:250,falloff:0,highlightIf:e=>e.hasResourceAvailable("DIVINE_MIGHT")||e.isHolySpiritCircleGoodForReq()});Bi("GORING_BLADE",54,{applicationDelay:.53,potency:700,validateAttempt:e=>e.hasResourceAvailable("GORING_BLADE_READY"),highlightIf:e=>e.hasResourceAvailable("GORING_BLADE_READY"),onConfirm:e=>{e.tryConsumeResource("GORING_BLADE_READY")}});Ps("CONFITEOR",80,{replaceIf:[Fu,zu,ju],baseCastTime:0,applicationDelay:.62,baseManaCost:1e3,startsAuto:!1,basePotency:[["NEVER",420],["MELEE_MASTERY_II_TANK",500]],reqPotency:[["NEVER",920],["MELEE_MASTERY_II_TANK",1e3]],falloff:.6,validateAttempt:e=>e.hasResourceAvailable("CONFITEOR_READY"),highlightIf:e=>e.hasResourceAvailable("CONFITEOR_READY"),onConfirm:e=>{e.tryConsumeResource("CONFITEOR_READY"),e.tryConsumeResource("PLD_CONFITEOR_COMBO_TRACKER",!0),e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").gain(1),e.enqueueResourceDrop("PLD_CONFITEOR_COMBO_TRACKER")}});Ps("BLADE_OF_FAITH",90,{replaceIf:[bS,zu,ju],startOnHotbar:!1,baseCastTime:0,baseManaCost:1e3,startsAuto:!1,applicationDelay:.62,basePotency:[["NEVER",220],["MELEE_MASTERY_II_TANK",260]],reqPotency:[["NEVER",720],["MELEE_MASTERY_II_TANK",760]],falloff:.6,validateAttempt:e=>Fu.condition(e),highlightIf:e=>Fu.condition(e),onConfirm:e=>{e.tryConsumeResource("PLD_CONFITEOR_COMBO_TRACKER",!0),e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").gain(2),e.enqueueResourceDrop("PLD_CONFITEOR_COMBO_TRACKER")}});Ps("BLADE_OF_TRUTH",90,{replaceIf:[bS,Fu,ju],startOnHotbar:!1,baseCastTime:0,baseManaCost:1e3,applicationDelay:.89,startsAuto:!1,basePotency:[["NEVER",320],["MELEE_MASTERY_II_TANK",380]],reqPotency:[["NEVER",820],["MELEE_MASTERY_II_TANK",880]],falloff:.6,validateAttempt:e=>zu.condition(e),highlightIf:e=>zu.condition(e),onConfirm:e=>{e.tryConsumeResource("PLD_CONFITEOR_COMBO_TRACKER",!0),e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").gain(3),e.enqueueResourceDrop("PLD_CONFITEOR_COMBO_TRACKER")}});Ps("BLADE_OF_VALOR",90,{replaceIf:[bS,Fu,zu],startOnHotbar:!1,baseCastTime:0,baseManaCost:1e3,applicationDelay:.89,startsAuto:!1,basePotency:[["NEVER",420],["MELEE_MASTERY_II_TANK",500]],reqPotency:[["NEVER",920],["MELEE_MASTERY_II_TANK",1e3]],falloff:.6,validateAttempt:e=>ju.condition(e),highlightIf:e=>ju.condition(e),onConfirm:e=>{e.tryConsumeResource("PLD_CONFITEOR_COMBO_TRACKER",!0),e.refreshBuff("BLADE_OF_HONOR_READY",0)}});Yn("FIGHT_OR_FLIGHT",2,"cd_FIGHT_OR_FLIGHT",{applicationDelay:.62,cooldown:60,onConfirm:e=>{e.refreshBuff("GORING_BLADE_READY",0),e.refreshBuff("FIGHT_OR_FLIGHT",.62)}});Yn("REQUIESCAT",68,"cd_REQUIESCAT",{autoUpgrade:{trait:"REQUIESCAT_MASTERY",otherSkill:"IMPERATOR"},applicationDelay:.62,cooldown:60,potency:320,onConfirm:e=>{e.resources.get("REQUIESCAT").gain(4),e.enqueueResourceDrop("REQUIESCAT",30),e.hasTraitUnlocked("ENHANCED_REQUIESCAT")&&e.refreshBuff("CONFITEOR_READY",0)}});Yn("IMPERATOR",96,"cd_IMPERATOR",{autoDowngrade:{trait:"REQUIESCAT_MASTERY",otherSkill:"REQUIESCAT"},replaceIf:[oT],applicationDelay:1.29,cooldown:60,potency:580,falloff:.6,onConfirm:e=>{e.resources.get("REQUIESCAT").gain(4),e.enqueueResourceDrop("REQUIESCAT",30,4),e.hasTraitUnlocked("ENHANCED_REQUIESCAT")&&e.refreshBuff("CONFITEOR_READY",0)}});Yn("BLADE_OF_HONOR",100,"cd_BLADE_OF_HONOR",{startOnHotbar:!1,cooldown:1,replaceIf:[XB],validateAttempt:oT.condition,highlightIf:oT.condition,applicationDelay:1.16,potency:1e3,startsAuto:!1,falloff:.5,onConfirm:e=>{e.tryConsumeResource("BLADE_OF_HONOR_READY")}});Yn("SPIRITS_WITHIN",30,"cd_SPIRITS_WITHIN",{autoUpgrade:{trait:"SPIRITS_WITHIN_MASTERY",otherSkill:"EXPIACION"},applicationDelay:.89,cooldown:30,potency:270,onConfirm:e=>{e.getDelayedManaFromAction(500,"SPIRITS_WITHIN")}});Yn("EXPIACION",86,"cd_EXPIACION",{autoDowngrade:{trait:"SPIRITS_WITHIN_MASTERY",otherSkill:"SPIRITS_WITHIN"},applicationDelay:.36,cooldown:30,potency:450,falloff:.6,onConfirm:e=>{e.getDelayedManaFromAction(500,"EXPIACION")}});Yn("CIRCLE_OF_SCORN",50,"cd_CIRCLE_OF_SCORN",{applicationDelay:1.02,cooldown:30,potency:140,falloff:0,onConfirm:(e,t)=>{const a=[];e.hasResourceAvailable("FIGHT_OR_FLIGHT")&&a.push(X.FightOrFlight),e.addDoTPotencies({node:t,effectName:"CIRCLE_OF_SCORN_DOT",skillName:"CIRCLE_OF_SCORN",tickPotency:30,speedStat:"sks",modifiers:a}),e.addEvent(new ve("apply CoS dot",1.02,()=>{e.applyDoT("CIRCLE_OF_SCORN_DOT",t)}))}});Yn("INTERVENE",66,"cd_INTERVENE",{applicationDelay:.62,cooldown:30,potency:150,maxCharges:2,animationLock:Wt});Ps("CLEMENCY",58,{baseCastTime:1.5,applicationDelay:.62,baseManaCost:2e3,basePotency:0,highlightIf:e=>e.hasResourceAvailable("REQUIESCAT")});Yn("SHELTRON",35,"cd_SHELTRON",{autoUpgrade:{trait:"SHELTRON_MASTERY",otherSkill:"HOLY_SHELTRON"},validateAttempt:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,highlightIf:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,applicationDelay:0,cooldown:5,onConfirm:e=>{e.resources.get("OATH_GAUGE").consume(50),e.refreshBuff("SHELTRON",0)}});Yn("HOLY_SHELTRON",82,"cd_HOLY_SHELTRON",{autoDowngrade:{trait:"SHELTRON_MASTERY",otherSkill:"SHELTRON"},applicationDelay:0,cooldown:5,validateAttempt:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,highlightIf:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,onConfirm:e=>{e.refreshBuff("HOLY_SHELTRON",0),e.refreshBuff("KNIGHTS_RESOLVE",0),e.refreshBuff("KNIGHTS_BENEDICTION",0),e.resources.get("OATH_GAUGE").consume(50)}});Yn("INTERVENTION",62,"cd_INTERVENTION",{applicationDelay:.8,cooldown:10,validateAttempt:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,highlightIf:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,onConfirm:e=>{e.resources.get("OATH_GAUGE").consume(50)}});RD("HALLOWED_GROUND",50,"cd_HALLOWED_GROUND",{rscType:"HALLOWED_GROUND",applicationDelay:0,cooldown:420});RD("BULWARK",52,"cd_BULWARK",{rscType:"BULWARK",applicationDelay:0,cooldown:90});Yn("SENTINEL",38,"cd_SENTINEL",{autoUpgrade:{trait:"SENTINEL_MASTERY",otherSkill:"GUARDIAN"},applicationDelay:.53,cooldown:120,onConfirm:e=>{e.refreshBuff("SENTINEL",.53)}});Yn("GUARDIAN",92,"cd_GUARDIAN",{autoDowngrade:{trait:"SENTINEL_MASTERY",otherSkill:"SENTINEL"},applicationDelay:.53,cooldown:120,onConfirm:e=>{e.refreshBuff("GUARDIAN",.53),e.refreshBuff("GUARDIANS_WILL",.53)}});Yn("DIVINE_VEIL",56,"cd_DIVINE_VEIL",{applicationDelay:0,cooldown:90,onConfirm:e=>{e.refreshBuff("DIVINE_VEIL",0)}});Yn("PASSAGE_OF_ARMS",70,"cd_PASSAGE_OF_ARMS",{applicationDelay:.62,cooldown:120,onConfirm:e=>{e.refreshBuff("PASSAGE_OF_ARMS",.62)}});Yn("COVER",45,"cd_COVER",{applicationDelay:.62,cooldown:120,validateAttempt:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,highlightIf:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,onConfirm:e=>{e.resources.get("OATH_GAUGE").consume(50)}});Yn("IRON_WILL",10,"cd_IRON_WILL",{applicationDelay:0,cooldown:2,validateAttempt:e=>!e.hasResourceAvailable("IRON_WILL"),onConfirm:e=>{e.resources.get("IRON_WILL").gain(1)},replaceIf:[ZB],secondaryCooldown:{cdName:"cd_RELEASE_IRON_WILL",cooldown:1,maxCharges:1}});Yn("RELEASE_IRON_WILL",10,"cd_RELEASE_IRON_WILL",{startOnHotbar:!1,replaceIf:[qB],applicationDelay:0,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("IRON_WILL"),onConfirm:e=>{e.tryConsumeResource("IRON_WILL")},secondaryCooldown:{cdName:"cd_IRON_WILL",cooldown:2,maxCharges:1}});Bi("SHIELD_BASH",10,{potency:100,applicationDelay:.45});Object.keys(pT).forEach(e=>Ft(e,`DRK/${ze[e].name}.png`));const QB=Object.keys(pT);class $B extends Xt{jobSpecificOtherTargetedBuffViewProps(){return[]}jobSpecificSelfTargetedBuffViewProps(){return QB.map(t=>t==="GRIT"?this.makeCommonTimerless(t):this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){var T,S,I;const a=this.state.resources,i=a.get("DRK_COMBO_TRACKER"),l=a.get("DRK_AOE_COMBO_TRACKER"),r=a.get("BLOOD_GAUGE").availableAmount(),d=a.get("GRIT").availableAmount(),E=((T=a.get("DARKSIDE").pendingChange)==null?void 0:T.timeTillEvent)??0,h=a.get("DARK_ARTS").availableAmount(),A=i.available(1)?(S=i.pendingChange)==null?void 0:S.timeTillEvent:l.available(1)?(I=l.pendingChange)==null?void 0:I.timeTillEvent:void 0;return[{kind:"bar",name:g({en:"Combo Timer",zh:""}),color:t.drk.drkComboTimer,progress:A?A/30:0,valueString:(A==null?void 0:A.toFixed(3))??"N/A"},{kind:"counter",name:Xe("GRIT"),color:t.drk.grit,currentStacks:d,maxStacks:1},{kind:"bar",name:Xe("DARKSIDE"),color:t.drk.darkside,progress:E?E/60:0,valueString:E.toFixed(3)},{kind:"counter",name:Xe("DARK_ARTS"),color:t.drk.darkarts,currentStacks:h,maxStacks:1},{kind:"bar",name:Xe("BLOOD_GAUGE"),color:t.drk.blood,progress:r/100,valueString:r.toFixed(0)}]}}const dn=(e,t,a)=>{qe("DRK",e,t,a??{})};dn("DARKSIDE",1,{timeout:60});dn("BLOOD_GAUGE",100,{warnOnOvercap:!0});dn("SALTED_EARTH",1,{timeout:15});dn("GRIT",1);dn("SHADOW_WALL",1,{timeout:15});dn("DARK_MIND",1,{timeout:10});dn("LIVING_DEAD",1,{timeout:10});dn("WALKING_DEAD",1,{timeout:10});dn("UNDEAD_REBIRTH",1);dn("DARK_MISSIONARY",1,{timeout:15});dn("DELIRIUM",3,{timeout:15,warnOnTimeout:!0});dn("BLOOD_WEAPON",3,{timeout:15,warnOnTimeout:!0});dn("BLACKEST_NIGHT",1,{timeout:7,warnOnTimeout:!0});dn("SCORN",1,{timeout:30,warnOnTimeout:!0});dn("OBLATION",1,{timeout:10});dn("SHADOWED_VIGIL",1,{timeout:15});dn("VIGILANT",1,{timeout:20});dn("DARK_ARTS",1,{warnOnOvercap:!0});dn("DRK_COMBO_TRACKER",2,{timeout:30});dn("DRK_AOE_COMBO_TRACKER",1,{timeout:30});dn("DRK_DELIRIUM_COMBO_TRACKER",2,{timeout:30});const DS=6;dn("ESTEEM_TRACKER",DS);const JB=6.8,e2=2.18;class t2 extends qt{constructor(t){super(t),this.registerRecurringEvents([{groupedEffects:[{effectName:"SALTED_EARTH",appliedBy:["SALTED_EARTH"],isGroundTargeted:!0}]}],["LIVING_SHADOW"])}get statusPropsGenerator(){return new $B(this)}refreshDarkside(){var t;if(this.hasResourceAvailable("DARKSIDE")){const a=this.resources.get("DARKSIDE"),i=Vt("DRK","DARKSIDE").maxTimeout,l=(((t=a.pendingChange)==null?void 0:t.timeTillEvent)??0)+30;a.overrideTimer(this,Math.min(i,l))}else this.resources.get("DARKSIDE").gain(1),this.enqueueResourceDrop("DARKSIDE",30)}gainBloodGauge(t){this.resources.get("BLOOD_GAUGE").gain(t)}bloodWeaponConfirm(t){this.hasResourceAvailable("BLOOD_WEAPON")&&(this.tryConsumeResource("BLOOD_WEAPON"),this.gainBloodGauge(10),this.addEvent(new ve("gain blood weapon mana",t,()=>{this.resources.get("MANA").gain(600)})))}processComboStatus(t){if(["DISESTEEM","UNMEND","BLOODSPILLER","QUIETUS"].includes(t))return;let a=[this.resources.get("DRK_COMBO_TRACKER").availableAmount(),this.resources.get("DRK_AOE_COMBO_TRACKER").availableAmount(),this.resources.get("DRK_DELIRIUM_COMBO_TRACKER").availableAmount()];t==="HARD_SLASH"?a=[1,0,0]:t==="SYPHON_STRIKE"?a=[a[0]===1?2:0,0,0]:t==="SOULEATER"?a=[0,0,0]:t==="IMPALEMENT"?a[2]=0:t==="SCARLET_DELIRIUM"?a[2]=1:t==="COMEUPPANCE"?a[2]=2:t==="TORCLEAVER"?a[2]=0:t==="UNLEASH"?a=[0,1,0]:t==="STALWART_SOUL"?a=[0,0,0]:a=[0,0,0],this.setComboState("DRK_COMBO_TRACKER",a[0]),this.setComboState("DRK_AOE_COMBO_TRACKER",a[1]),this.setComboState("DRK_DELIRIUM_COMBO_TRACKER",a[2])}handleEsteemAttack(){if(!this.hasResourceAvailable("ESTEEM_TRACKER"))return;const t=this.resources.get("ESTEEM_TRACKER").node;t!==void 0&&this.resolveEsteemPotency(t),this.resources.get("ESTEEM_TRACKER").consume(1),this.hasResourceAvailable("ESTEEM_TRACKER")&&this.addEvent(new ve("esteem hit",e2,()=>this.handleEsteemAttack()))}resolveEsteemPotency(t){const a=this.resources.get("ESTEEM_TRACKER").availableAmount();if(a===0)return;const i=t.getDotPotencies("ESTEEM_TRACKER")[DS-a];i.modifiers.push(X.DrkPet),this.hasResourceAvailable("TINCTURE")&&i.modifiers.push(X.Tincture),i.snapshotTime=this.getDisplayTime(),N.resolvePotency(i)}}const Pl=(e,t,a)=>on("DRK",e,t,{...a,onConfirm:ke(a.onConfirm,i=>i.bloodWeaponConfirm(a.applicationDelay),i=>i.processComboStatus(e)),recastTime:i=>i.config.adjustedSksGCD(),jobPotencyModifiers:i=>i.hasResourceAvailable("DARKSIDE")?[X.Darkside]:[]}),yS=(e,t,a)=>$a("DRK",e,t,{...a,onConfirm:ke(a.onConfirm,i=>i.processComboStatus(e)),recastTime:i=>i.config.adjustedGCD(),jobPotencyModifiers:i=>i.hasResourceAvailable("DARKSIDE")?[X.Darkside]:[]}),Na=(e,t,a,i)=>lt("DRK",e,t,a,{...i,jobPotencyModifiers:l=>l.hasResourceAvailable("DARKSIDE")?[X.Darkside]:[]}),ws=(e,t,a,i)=>Ke("DRK",e,t,a,i);yS("UNMEND",15,{applicationDelay:.98,potency:150,onConfirm:e=>{if(e.hasTraitUnlocked("ENHANCED_UNMEND")){const t=e.cooldowns.get("cd_SHADOWSTRIDE").timeTillNextStackAvailable();e.cooldowns.get("cd_SHADOWSTRIDE").overrideTimeTillNextStack(Math.max(0,t-5))}}});Pl("HARD_SLASH",1,{applicationDelay:.58,potency:[["NEVER",150],["MELEE_MASTERY_TANK",180],["MELEE_MASTERY_II_TANK",300]]});Pl("SYPHON_STRIKE",2,{applicationDelay:.62,highlightIf:e=>e.hasResourceExactly("DRK_COMBO_TRACKER",1),potency:[["NEVER",100],["MELEE_MASTERY_TANK",120],["MELEE_MASTERY_II_TANK",240]],combo:{potency:[["NEVER",240],["MELEE_MASTERY_TANK",260],["MELEE_MASTERY_II_TANK",380]],resource:"DRK_COMBO_TRACKER",resourceValue:1},onConfirm:e=>{e.hasResourceExactly("DRK_COMBO_TRACKER",1)&&e.addEvent(new ve("gain syphon strike mana",.62,()=>{e.resources.get("MANA").gain(600)}))}});Pl("SOULEATER",26,{applicationDelay:.62,highlightIf:e=>e.hasResourceExactly("DRK_COMBO_TRACKER",2),potency:[["NEVER",100],["MELEE_MASTERY_TANK",140],["MELEE_MASTERY_II_TANK",260]],combo:{potency:[["NEVER",320],["MELEE_MASTERY_TANK",360],["MELEE_MASTERY_II_TANK",480]],resource:"DRK_COMBO_TRACKER",resourceValue:2},onConfirm:e=>{e.hasResourceAvailable("DRK_COMBO_TRACKER",2)&&e.gainBloodGauge(20)}});yS("UNLEASH",6,{applicationDelay:.71,potency:120,falloff:0});yS("STALWART_SOUL",40,{applicationDelay:.62,highlightIf:e=>e.hasResourceExactly("DRK_AOE_COMBO_TRACKER",1),potency:[["NEVER",100],["MELEE_MASTERY_II_TANK",120]],combo:{potency:[["NEVER",140],["MELEE_MASTERY_II_TANK",160]],resource:"DRK_AOE_COMBO_TRACKER",resourceValue:1},falloff:0,onConfirm:e=>{e.hasResourceExactly("DRK_AOE_COMBO_TRACKER",1)&&(e.gainBloodGauge(20),e.addEvent(new ve("gain stalwart soul mana",.62,()=>{e.resources.get("MANA").gain(600)})))}});const Rf=e=>{e.tryConsumeResource("DARK_ARTS"),e.refreshDarkside()},Tf=e=>e.hasResourceAvailable("DARK_ARTS"),Sf=e=>e.hasResourceAvailable("DARK_ARTS")?0:3e3;Na("EDGE_OF_DARKNESS",40,"cd_FLOOD_OF_DARKNESS",{applicationDelay:.62,autoUpgrade:{trait:"DAKRSIDE_MASTERY",otherSkill:"EDGE_OF_SHADOW"},cooldown:1,manaCost:Sf,highlightIf:Tf,potency:300,onConfirm:Rf});Na("EDGE_OF_SHADOW",74,"cd_FLOOD_OF_DARKNESS",{applicationDelay:.62,autoDowngrade:{trait:"DAKRSIDE_MASTERY",otherSkill:"EDGE_OF_DARKNESS"},cooldown:1,manaCost:Sf,highlightIf:Tf,potency:460,onConfirm:Rf});Na("FLOOD_OF_DARKNESS",30,"cd_FLOOD_OF_DARKNESS",{applicationDelay:.62,autoUpgrade:{trait:"DAKRSIDE_MASTERY",otherSkill:"FLOOD_OF_SHADOW"},cooldown:1,manaCost:Sf,highlightIf:Tf,potency:100,falloff:0,onConfirm:Rf});Na("FLOOD_OF_SHADOW",74,"cd_FLOOD_OF_DARKNESS",{applicationDelay:.62,autoDowngrade:{trait:"DAKRSIDE_MASTERY",otherSkill:"FLOOD_OF_DARKNESS"},cooldown:1,manaCost:Sf,highlightIf:Tf,potency:160,falloff:0,onConfirm:Rf});const UE=e=>e.hasResourceAvailable("BLOOD_GAUGE",50)||e.hasResourceAvailable("DELIRIUM"),eE=[{newSkill:"BLOODSPILLER",condition:e=>!e.hasTraitUnlocked("ENHANCED_DELIRIUM")||!e.hasResourceAvailable("DELIRIUM")},{newSkill:"SCARLET_DELIRIUM",condition:e=>e.hasTraitUnlocked("ENHANCED_DELIRIUM")&&e.hasResourceAvailable("DELIRIUM")&&e.hasResourceExactly("DRK_DELIRIUM_COMBO_TRACKER",0)},{newSkill:"COMEUPPANCE",condition:e=>e.hasTraitUnlocked("ENHANCED_DELIRIUM")&&e.hasResourceAvailable("DELIRIUM")&&e.hasResourceExactly("DRK_DELIRIUM_COMBO_TRACKER",1)},{newSkill:"TORCLEAVER",condition:e=>e.hasTraitUnlocked("ENHANCED_DELIRIUM")&&e.hasResourceAvailable("DELIRIUM")&&e.hasResourceExactly("DRK_DELIRIUM_COMBO_TRACKER",2)}];Pl("BLOODSPILLER",62,{applicationDelay:.8,validateAttempt:UE,highlightIf:UE,replaceIf:eE,potency:[["NEVER",500],["MELEE_MASTERY_II_TANK",600]],onConfirm:e=>e.tryConsumeResource("DELIRIUM")||e.resources.get("BLOOD_GAUGE").consume(50)});const tE=e=>e.hasTraitUnlocked("ENHANCED_DELIRIUM")&&e.hasResourceAvailable("DELIRIUM");Pl("QUIETUS",64,{applicationDelay:.76,validateAttempt:UE,highlightIf:UE,replaceIf:[{newSkill:"IMPALEMENT",condition:tE}],potency:[["NEVER",200],["MELEE_MASTERY_II_TANK",240]],falloff:0,onConfirm:e=>e.tryConsumeResource("DELIRIUM")||e.resources.get("BLOOD_GAUGE").consume(50)});[["SCARLET_DELIRIUM",.62,620],["COMEUPPANCE",.67,720],["TORCLEAVER",.62,820]].forEach((e,t)=>{const[a,i,l]=e;Pl(a,96,{startOnHotbar:!1,applicationDelay:i,validateAttempt:eE[t+1].condition,highlightIf:eE[t+1].condition,replaceIf:eE,potency:l,onConfirm:r=>r.tryConsumeResource("DELIRIUM"),onApplication:r=>r.resources.get("MANA").gain(200)})});Pl("IMPALEMENT",96,{startOnHotbar:!1,applicationDelay:.98,validateAttempt:tE,highlightIf:tE,replaceIf:[{newSkill:"QUIETUS",condition:e=>!tE(e)}],potency:300,falloff:0,onConfirm:e=>e.tryConsumeResource("DELIRIUM"),onApplication:e=>e.resources.get("MANA").gain(500)});const lT=e=>e.hasResourceAvailable("SCORN");Pl("DISESTEEM",100,{startOnHotbar:!1,applicationDelay:1.65,validateAttempt:lT,highlightIf:lT,potency:1e3,falloff:.25,onConfirm:e=>e.tryConsumeResource("SCORN")});Na("DELIRIUM",68,"cd_DELIRIUM",{applicationDelay:0,cooldown:60,onConfirm:e=>{e.gainStatus("DELIRIUM",3),e.gainStatus("BLOOD_WEAPON",3)}});Na("CARVE_AND_SPIT",60,"cd_ABYSSAL_DRAIN",{applicationDelay:1.47,cooldown:60,potency:[["NEVER",510],["MELEE_MASTERY_II_TANK",540]],healingPotency:500,onApplication:e=>e.resources.get("MANA").gain(600)});Na("ABYSSAL_DRAIN",56,"cd_ABYSSAL_DRAIN",{applicationDelay:.98,cooldown:60,potency:240,healingPotency:500,onApplication:e=>e.resources.get("MANA").gain(600)});const _D=e=>e.resources.get("SALTED_EARTH").availableAmountIncludingDisabled()>0;Na("SALTED_EARTH",52,"cd_SALTED_EARTH",{applicationDelay:.76,cooldown:90,replaceIf:[{newSkill:"SALT_AND_DARKNESS",condition:_D}],onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"SALTED_EARTH",skillName:"SALTED_EARTH",tickPotency:50,speedStat:"sks"})},falloff:0,onApplication:(e,t)=>{e.applyDoT("SALTED_EARTH",t),e.gainStatus("SALTED_EARTH")}});Na("SALT_AND_DARKNESS",86,"cd_SALT_AND_DARKNESS",{startOnHotbar:!1,highlightIf:e=>!0,validateAttempt:_D,applicationDelay:.76,cooldown:20,potency:500,falloff:.25});Na("LIVING_SHADOW",80,"cd_LIVING_SHADOW",{applicationDelay:0,replaceIf:[{newSkill:"DISESTEEM",condition:e=>lT(e)}],cooldown:120,onConfirm:(e,t)=>{e.gainStatus("SCORN"),e.resources.get("ESTEEM_TRACKER").gain(DS);const a=e.hasTraitUnlocked("ENHANCED_LIVING_SHADOW")?420:340;[["ABYSSAL_DRAIN_PET",a,0],["SHADOWSTRIDE_PET",0,void 0],e.hasTraitUnlocked("ENHANCED_LIVING_SHADOW_II")?["SHADOWBRINGER_PET",570,.25]:["FLOOD_OF_SHADOW_PET",a,0],["EDGE_OF_SHADOW_PET",a,void 0],["BLOODSPILLER_PET",a,void 0],e.hasTraitUnlocked("ENHANCED_LIVING_SHADOW_III")?["DISESTEEM_PET",620,.25]:["CARVE_AND_SPIT_PET",a,void 0]].forEach(l=>{const[r,d,E]=l;t.addDoTPotency(new tn({config:e.config,sourceTime:e.getDisplayTime(),sourceSkill:r,aspect:_e.Other,description:"",basePotency:d,snapshotTime:void 0,targetCount:t.targetCount,falloff:E}),"ESTEEM_TRACKER")}),e.resources.get("ESTEEM_TRACKER").node=t,e.addEvent(new ve("initial esteem hit",JB,()=>e.handleEsteemAttack()))}});Na("SHADOWBRINGER",90,"cd_SHADOWBRINGER",{applicationDelay:.67,cooldown:60,potency:600,falloff:.25,maxCharges:2,validateAttempt:e=>e.hasResourceAvailable("DARKSIDE")});Na("SHADOWSTRIDE",54,"cd_SHADOWSTRIDE",{applicationDelay:.66,animationLock:Wt,cooldown:30,maxCharges:2});ws("THE_BLACKEST_NIGHT",70,"cd_THE_BLACKEST_NIGHT",{rscType:"BLACKEST_NIGHT",manaCost:3e3,replaceIf:[{newSkill:"THE_BLACKEST_NIGHT_POP",condition:e=>e.hasResourceAvailable("BLACKEST_NIGHT")}],applicationDelay:.62,cooldown:15});Na("THE_BLACKEST_NIGHT_POP",70,"cd_THE_BLACKEST_NIGHT_POP",{startOnHotbar:!1,highlightIf:e=>!0,applicationDelay:0,animationLock:Ia,cooldown:1,onConfirm:e=>{e.gainStatus("DARK_ARTS"),e.tryConsumeResource("BLACKEST_NIGHT")}});ws("SHADOW_WALL",38,"cd_SHADOW_WALL",{rscType:"SHADOW_WALL",autoUpgrade:{otherSkill:"SHADOWED_VIGIL",trait:"SHADOW_WALL_MASTERY"},applicationDelay:.62,cooldown:120});ws("SHADOWED_VIGIL",92,"cd_SHADOW_WALL",{rscType:"SHADOWED_VIGIL",autoDowngrade:{otherSkill:"SHADOW_WALL",trait:"SHADOW_WALL_MASTERY"},applicationDelay:.62,cooldown:120,onApplication:e=>e.gainStatus("VIGILANT")});ws("DARK_MIND",45,"cd_DARK_MIND",{rscType:"DARK_MIND",applicationDelay:.62,cooldown:60});ws("LIVING_DEAD",50,"cd_LIVING_DEAD",{rscType:"LIVING_DEAD",applicationDelay:0,cooldown:300});ws("DARK_MISSIONARY",66,"cd_DARK_MISSIONARY",{rscType:"DARK_MISSIONARY",applicationDelay:.62,cooldown:90});ws("OBLATION",82,"cd_OBLATION",{rscType:"OBLATION",applicationDelay:0,maxCharges:2,cooldown:60});Na("GRIT",10,"cd_GRIT",{applicationDelay:0,cooldown:2,validateAttempt:e=>!e.hasResourceAvailable("GRIT"),onConfirm:e=>e.resources.get("GRIT").gain(1),replaceIf:[{newSkill:"RELEASE_GRIT",condition:e=>e.hasResourceAvailable("GRIT")}],secondaryCooldown:{cdName:"cd_RELEASE_GRIT",cooldown:1,maxCharges:1}});Na("RELEASE_GRIT",10,"cd_RELEASE_GRIT",{startOnHotbar:!1,replaceIf:[{newSkill:"GRIT",condition:e=>!e.hasResourceAvailable("GRIT")}],applicationDelay:0,cooldown:1,validateAttempt:e=>!e.hasResourceAvailable("GRIT"),onConfirm:e=>e.tryConsumeResource("GRIT"),secondaryCooldown:{cdName:"cd_GRIT",cooldown:2,maxCharges:1}});Object.keys(ST).forEach(e=>Ft(e,`AST/${ze[e].name}.png`));const gD=["COMBUST_II","COMBUST_III"],n2=Object.keys(ST).filter(e=>!gD.includes(e));class a2 extends Xt{jobSpecificOtherTargetedBuffViewProps(){return[...gD.map(t=>this.makeCommonTimer(t))]}jobSpecificSelfTargetedBuffViewProps(){return[...n2.map(t=>this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){return[{kind:"arcana",name:Xe("ARCANA"),currentArcanaColor:this.state.drawnAstral()?t.ast.astralCard:t.ast.umbralCard,activeSlots:["ARCANA_1","ARCANA_2","ARCANA_3","MINOR_ARCANA"].map(a=>this.state.hasResourceAvailable(a))}]}}const st=(e,t,a)=>{qe("AST",e,t,a??{})};st("ARCANA",1);st("MINOR_ARCANA",1,{default:1});st("LIGHTSPEED",1,{timeout:15});st("THE_BALANCE",1,{timeout:15});st("THE_ARROW",1,{timeout:15});st("THE_SPIRE",1,{timeout:30});st("THE_SPEAR",1,{timeout:15});st("THE_BOLE",1,{timeout:15});st("THE_EWER",1,{timeout:15});st("ASPECTED_BENEFIC",1,{timeout:15});st("ASPECTED_HELIOS",1,{timeout:15});st("SYNASTRY",1,{timeout:20});st("DIVINATION",1,{timeout:20});st("DIVINING",1,{timeout:30,warnOnTimeout:!0});st("COLLECTIVE_UNCONSCIOUS",1,{timeout:18});st("COLLECTIVE_UNCONSCIOUS_MIT",1,{timeout:5});st("WHEEL_OF_FORTUNE",1,{timeout:15});st("OPPOSITION",1,{timeout:15});st("EARTHLY_DOMINANCE",1,{timeout:10});st("GIANT_DOMINANCE",1,{timeout:10});st("COMBUST_II",1,{timeout:30});st("COMBUST_III",1,{timeout:30});st("INTERSECTION",1,{timeout:30});st("NEUTRAL_SECT",1,{timeout:20});st("NEUTRAL_SECT_SHIELD",1,{timeout:30});st("HOROSCOPE",1,{timeout:10});st("HOROSCOPE_HELIOS",1,{timeout:30});st("SUNTOUCHED",1,{timeout:30});st("EXALTATION",1,{timeout:8});st("MACROCOSMOS",1,{timeout:15});st("HELIOS_CONJUNCTION",1,{timeout:15});st("SUN_SIGN",1,{timeout:15});st("ARCANA_1",1,{default:1});st("ARCANA_2",1,{default:1});st("ARCANA_3",1,{default:1});st("NEXT_DRAW",1);class i2 extends qt{constructor(t){super(t);const a=this.hasTraitUnlocked("ENHANCED_ESSENTIAL_DIGNITY_II")?3:this.hasTraitUnlocked("ENHANCED_ESSENTIAL_DIGNITY")?2:1,i=this.hasTraitUnlocked("ENHANCED_CELESTIAL_INTERSECTION")?2:1;this.cooldowns.set(new Ge("cd_ESSENTIAL_DIGNITY",40,a,a)),this.cooldowns.set(new Ge("cd_CELESTIAL_INTERSECTION",30,i,i)),this.cooldowns.set(new Ge("cd_SWIFTCAST",this.hasTraitUnlocked("ENHANCED_SWIFTCAST")?40:60,1,1)),this.registerRecurringEvents([{reportName:g({en:"Combust DoT",zh:"DoT"}),groupedEffects:[{effectName:"COMBUST_II",appliedBy:["COMBUST_II"]},{effectName:"COMBUST_III",appliedBy:["COMBUST_III"]}]},{isHealing:!0,groupedEffects:[{effectName:"WHEEL_OF_FORTUNE",appliedBy:["COLLECTIVE_UNCONSCIOUS"]}]},{isHealing:!0,groupedEffects:[{effectName:"OPPOSITION",appliedBy:["CELESTIAL_OPPOSITION"]}]},{isHealing:!0,groupedEffects:[{effectName:"ASPECTED_BENEFIC",appliedBy:["ASPECTED_BENEFIC"]}]},{isHealing:!0,groupedEffects:[{effectName:"ASPECTED_HELIOS",appliedBy:["ASPECTED_HELIOS"]},{effectName:"HELIOS_CONJUNCTION",appliedBy:["HELIOS_CONJUNCTION"]}]}])}drawnAstral(){return!this.hasResourceAvailable("NEXT_DRAW")}cancelChanneledSkills(){this.tryConsumeResource("COLLECTIVE_UNCONSCIOUS")}jobSpecificAddHealingBuffCovers(t,a){a.cdName==="cd_GCD"&&this.hasResourceAvailable("NEUTRAL_SECT")&&t.addBuff(x.NeutralSect),a.cdName==="cd_GCD"&&!a.aoeHeal&&this.hasResourceAvailable("SYNASTRY")&&t.addBuff(x.Synastry),this.hasResourceAvailable("THE_ARROW")&&t.addBuff(x.TheArrow)}jobSpecificAddDamageBuffCovers(t,a){this.hasResourceAvailable("DIVINATION")&&t.addBuff(x.Divination)}get statusPropsGenerator(){return new a2(this)}}const pa=(e,t,a)=>{const i=r=>{if(!a.healingPotency)return[];const d=[];return r.hasResourceAvailable("SYNASTRY")&&!a.aoeHeal&&d.push(X.Synastry),r.hasResourceAvailable("NEUTRAL_SECT")&&d.push(X.NeutralSect),r.hasResourceAvailable("THE_ARROW")&&d.push(X.TheArrow),d},l=a.baseCastTime??0;return $a("AST",e,t,{...a,jobHealingPotencyModifiers:i,jobPotencyModifiers:a.potency?r=>r.hasResourceAvailable("DIVINATION")?[X.Divination]:[]:void 0,castTime:r=>Math.max(0,r.config.adjustedCastTime(r.hasResourceAvailable("LIGHTSPEED")?l-2.5:l)),recastTime:r=>r.config.adjustedGCD(2.5),isInstantFn:r=>!a.baseCastTime||r.hasResourceAvailable("SWIFTCAST"),onConfirm:ke(l?r=>r.tryConsumeResource("SWIFTCAST"):void 0,a.onConfirm)})},Ca=(e,t,a,i)=>lt("AST",e,t,a,{...i,jobHealingPotencyModifiers:i.healingPotency?l=>{const r=[];return l.hasResourceAvailable("THE_ARROW")&&r.push(X.TheArrow),e==="STELLAR_DETONATION"&&r.push(X.AstPet),r}:void 0,jobPotencyModifiers:i.potency?l=>{const r=[];return l.hasResourceAvailable("DIVINATION")&&r.push(X.Divination),e==="STELLAR_DETONATION"&&r.push(X.AstPet),r}:void 0}),Gs=(e,t,a,i)=>Ke("AST",e,t,a,{...i,jobHealingPotencyModifiers:l=>i.healingPotency&&l.hasResourceAvailable("THE_ARROW")?[X.TheArrow]:[],jobPotencyModifiers:i.potency?l=>l.hasResourceAvailable("DIVINATION")?[X.Divination]:[]:void 0});pa("MALEFIC_III",64,{autoUpgrade:{otherSkill:"MALEFIC_IV",trait:"MALEFIC_MASTERY_III"},baseCastTime:1.5,applicationDelay:1.07,potency:190,manaCost:400});pa("MALEFIC_IV",72,{autoDowngrade:{otherSkill:"MALEFIC_III",trait:"MALEFIC_MASTERY_III"},autoUpgrade:{otherSkill:"FALL_MALEFIC",trait:"MALEFIC_MASTERY_IV"},baseCastTime:1.5,applicationDelay:1.07,potency:230,manaCost:400});pa("FALL_MALEFIC",82,{autoDowngrade:{otherSkill:"MALEFIC_IV",trait:"MALEFIC_MASTERY_IV"},baseCastTime:1.5,applicationDelay:1.07,potency:[["NEVER",250],["MAGICK_MASTERY_HEALER",270]],manaCost:400});pa("COMBUST_II",46,{autoUpgrade:{otherSkill:"COMBUST_III",trait:"COMBUST_MASTERY_II"},applicationDelay:.62,manaCost:400,drawsAggro:!0,onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"COMBUST_II",skillName:"COMBUST_II",tickPotency:60,speedStat:"sps"})},onApplication:(e,t)=>e.applyDoT("COMBUST_II",t)});pa("COMBUST_III",72,{autoDowngrade:{otherSkill:"COMBUST_II",trait:"COMBUST_MASTERY_II"},applicationDelay:.62,manaCost:400,drawsAggro:!0,onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"COMBUST_III",skillName:"COMBUST_III",tickPotency:e.hasTraitUnlocked("MAGICK_MASTERY_HEALER")?70:65,speedStat:"sps"})},onApplication:(e,t)=>e.applyDoT("COMBUST_III",t)});pa("GRAVITY",45,{autoUpgrade:{otherSkill:"GRAVITY_II",trait:"GRAVITY_MASTERY"},baseCastTime:1.5,applicationDelay:1.16,potency:120,falloff:0,manaCost:400});pa("GRAVITY_II",82,{autoDowngrade:{otherSkill:"GRAVITY",trait:"GRAVITY_MASTERY"},baseCastTime:1.5,applicationDelay:1.16,potency:[["NEVER",130],["MAGICK_MASTERY_HEALER",140]],falloff:0,manaCost:400});pa("MACROCOSMOS",90,{applicationDelay:.75,secondaryCooldown:{cdName:"cd_MACROCOSMOS",cooldown:180,maxCharges:1},potency:[["NEVER",250],["MAGICK_MASTERY_HEALER",270]],falloff:.4,manaCost:600,replaceIf:[{newSkill:"MICROCOSMOS",condition:e=>e.hasResourceAvailable("MACROCOSMOS")}],onConfirm:e=>e.gainStatus("MACROCOSMOS")});Ca("MICROCOSMOS",90,"cd_MICROCOSMOS",{startOnHotbar:!1,applicationDelay:.045,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("MACROCOSMOS"),onConfirm:e=>e.tryConsumeResource("MACROCOSMOS")});pa("ASPECTED_BENEFIC",34,{applicationDelay:.98,healingPotency:[["NEVER",200],["ENHANCED_HEALING_MAGIC",250]],manaCost:400,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"ASPECTED_BENEFIC",effectName:"ASPECTED_BENEFIC",speedStat:"sps",tickPotency:e.hasTraitUnlocked("ENHANCED_HEALING_MAGIC")?250:200}),e.hasResourceAvailable("NEUTRAL_SECT")&&e.gainStatus("NEUTRAL_SECT_SHIELD")},onApplication:(e,t)=>{e.applyHoT("ASPECTED_BENEFIC",t),e.gainStatus("ASPECTED_BENEFIC")}});pa("BENEFIC",2,{baseCastTime:1.5,applicationDelay:.98,healingPotency:[["NEVER",450],["ENHANCED_HEALING_MAGIC",500]],manaCost:400});pa("BENEFIC_II",26,{baseCastTime:1.5,applicationDelay:1.07,healingPotency:[["NEVER",700],["ENHANCED_HEALING_MAGIC",800]],manaCost:700});pa("ASPECTED_HELIOS",40,{autoUpgrade:{otherSkill:"HELIOS_CONJUNCTION",trait:"ASPECTED_HELIOS_MASTERY"},baseCastTime:1.5,applicationDelay:1.07,healingPotency:[["NEVER",200],["ENHANCED_HEALING_MAGIC",250]],aoeHeal:!0,manaCost:800,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"ASPECTED_HELIOS",effectName:"ASPECTED_HELIOS",speedStat:"sps",tickPotency:e.hasTraitUnlocked("ENHANCED_HEALING_MAGIC")?150:100}),e.tryConsumeResource("HOROSCOPE")&&e.gainStatus("HOROSCOPE_HELIOS"),e.hasResourceAvailable("NEUTRAL_SECT")&&e.gainStatus("NEUTRAL_SECT_SHIELD")},onApplication:(e,t)=>{e.applyHoT("ASPECTED_HELIOS",t),e.gainStatus("ASPECTED_HELIOS")}});pa("HELIOS_CONJUNCTION",96,{autoDowngrade:{otherSkill:"ASPECTED_HELIOS",trait:"ASPECTED_HELIOS_MASTERY"},baseCastTime:1.5,applicationDelay:1.07,healingPotency:250,aoeHeal:!0,manaCost:800,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"HELIOS_CONJUNCTION",effectName:"HELIOS_CONJUNCTION",speedStat:"sps",tickPotency:175}),e.tryConsumeResource("HOROSCOPE")&&e.gainStatus("HOROSCOPE_HELIOS"),e.hasResourceAvailable("NEUTRAL_SECT")&&e.gainStatus("NEUTRAL_SECT_SHIELD")},onApplication:(e,t)=>{e.applyHoT("HELIOS_CONJUNCTION",t),e.gainStatus("HELIOS_CONJUNCTION")}});pa("HELIOS",10,{baseCastTime:1.5,applicationDelay:1.07,healingPotency:[["NEVER",300],["ENHANCED_HEALING_MAGIC",400]],aoeHeal:!0,manaCost:700,onConfirm:e=>{e.tryConsumeResource("HOROSCOPE")&&e.gainStatus("HOROSCOPE_HELIOS")}});pa("ASCEND",12,{baseCastTime:8,applicationDelay:1.07,manaCost:2400});const id=e=>e.drawnAstral(),od=e=>!e.drawnAstral(),ND=e=>{(e.hasResourceAvailable("ARCANA_1")||e.drawnAstral()&&e.hasResourceAvailable("MINOR_ARCANA"))&&N.reportWarning({kind:"custom",en:"damage card overwritten!",zh:""}),e.resources.get("NEXT_DRAW").gainWrapping(1),["MINOR_ARCANA","ARCANA_1","ARCANA_2","ARCANA_3"].forEach(t=>e.resources.get(t).gain(1))},pD=e=>e.resources.get("MANA").gain(2e3);Ca("ASTRAL_DRAW",30,"cd_ASTRAL_DRAW",{replaceIf:[{newSkill:"UMBRAL_DRAW",condition:id}],applicationDelay:0,cooldown:55,validateAttempt:od,onConfirm:ND,onApplication:pD});Ca("UMBRAL_DRAW",30,"cd_ASTRAL_DRAW",{startOnHotbar:!1,replaceIf:[{newSkill:"ASTRAL_DRAW",condition:od}],applicationDelay:0,cooldown:55,validateAttempt:id,onConfirm:ND,onApplication:pD});const vS=(e,t,a)=>{console.assert(a.length===3);const i=[{newSkill:a[0],condition:l=>!l.hasResourceAvailable(t)},{newSkill:a[1],condition:l=>id(l)&&l.hasResourceAvailable(t)},{newSkill:a[2],condition:l=>od(l)&&l.hasResourceAvailable(t)}];i.forEach(({newSkill:l,condition:r},d)=>{const E=i.slice();E.splice(d,1),Ca(l,30,e,{startOnHotbar:d===0,replaceIf:E,applicationDelay:.62,cooldown:1,validateAttempt:d===0?()=>!1:r,onConfirm:d!==0?h=>h.tryConsumeResource(t):void 0,onApplication:d!==0?h=>h.gainStatus(l):void 0})})};vS("cd_PLAY_I","ARCANA_1",["PLAY_I","THE_BALANCE","THE_SPEAR"]);vS("cd_PLAY_II","ARCANA_2",["PLAY_II","THE_ARROW","THE_BOLE"]);vS("cd_PLAY_III","ARCANA_3",["PLAY_III","THE_SPIRE","THE_EWER"]);Ca("MINOR_ARCANA",70,"cd_MINOR_ARCANA",{applicationDelay:0,replaceIf:[{newSkill:"LORD_OF_CROWNS",condition:e=>id(e)&&e.hasResourceAvailable("MINOR_ARCANA")},{newSkill:"LADY_OF_CROWNS",condition:e=>od(e)&&e.hasResourceAvailable("MINOR_ARCANA")}],cooldown:1,validateAttempt:()=>!1});Ca("LORD_OF_CROWNS",70,"cd_MINOR_ARCANA",{startOnHotbar:!1,replaceIf:[{newSkill:"MINOR_ARCANA",condition:e=>!e.hasResourceAvailable("MINOR_ARCANA")},{newSkill:"LADY_OF_CROWNS",condition:e=>od(e)&&e.hasResourceAvailable("MINOR_ARCANA")}],applicationDelay:.62,cooldown:1,potency:400,falloff:0,onConfirm:e=>e.tryConsumeResource("MINOR_ARCANA")});Ca("LADY_OF_CROWNS",70,"cd_MINOR_ARCANA",{startOnHotbar:!1,replaceIf:[{newSkill:"MINOR_ARCANA",condition:e=>!e.hasResourceAvailable("MINOR_ARCANA")},{newSkill:"LORD_OF_CROWNS",condition:e=>id(e)&&e.hasResourceAvailable("MINOR_ARCANA")}],applicationDelay:.62,cooldown:1,healingPotency:400,aoeHeal:!0,onConfirm:e=>e.tryConsumeResource("MINOR_ARCANA")});Gs("LIGHTSPEED",6,"cd_LIGHTSPEED",{rscType:"LIGHTSPEED",applicationDelay:0,cooldown:60,maxCharges:2});const CD=437,OD=1015;Ca("EARTHLY_STAR",62,"cd_EARTHLY_STAR",{applicationDelay:0,cooldown:60,falloff:0,replaceIf:[{newSkill:"STELLAR_DETONATION",condition:e=>e.hasResourceAvailable("EARTHLY_DOMINANCE")||e.hasResourceAvailable("GIANT_DOMINANCE")}],onConfirm:(e,t)=>{e.gainStatus("EARTHLY_DOMINANCE"),e.resources.addResourceEvent({rscType:"EARTHLY_DOMINANCE",name:"expand earthly star",delay:10,fnOnRsc:()=>{e.gainStatus("GIANT_DOMINANCE"),e.resources.addResourceEvent({rscType:"GIANT_DOMINANCE",name:"auto-detonate earthly star",delay:10,fnOnRsc:()=>{const a=[],i=new tn({config:e.config,sourceTime:e.getDisplayTime(),sourceSkill:"STELLAR_DETONATION",aspect:_e.Other,basePotency:CD,snapshotTime:e.getDisplayTime(),description:"",targetCount:t.targetCount,falloff:0});e.hasResourceAvailable("TINCTURE")&&a.push(X.Tincture),e.hasResourceAvailable("DIVINATION")&&a.push(X.Divination),i.modifiers=a,t.addPotency(i);const l=new tn({config:e.config,sourceTime:e.getDisplayTime(),sourceSkill:"STELLAR_DETONATION",aspect:_e.Other,basePotency:OD,snapshotTime:e.getDisplayTime(),description:"",targetCount:t.healTargetCount,falloff:0});e.hasResourceAvailable("THE_ARROW"),t.addHealingPotency(l),N.resolvePotency(i),N.resolveHealingPotency(l)}})}})}});Ca("STELLAR_DETONATION",62,"cd_STELLAR_DETONATION",{startOnHotbar:!1,applicationDelay:.53,cooldown:3,potency:e=>e.hasResourceAvailable("GIANT_DOMINANCE")?CD:290,falloff:0,healingPotency:e=>e.hasResourceAvailable("GIANT_DOMINANCE")?OD:762,aoeHeal:!0,onConfirm:e=>e.tryConsumeResource("EARTHLY_DOMINANCE")&&e.tryConsumeResource("GIANT_DOMINANCE")});Gs("DIVINATION",50,"cd_DIVINATION",{rscType:"DIVINATION",applicationDelay:.62,cooldown:120,replaceIf:[{newSkill:"ORACLE",condition:e=>e.hasResourceAvailable("DIVINING")}],onConfirm:e=>e.gainStatus("DIVINING")});Ca("ORACLE",92,"cd_ORACLE",{startOnHotbar:!1,applicationDelay:1.74,cooldown:1,highlightIf:e=>e.hasResourceAvailable("DIVINING"),validateAttempt:e=>e.hasResourceAvailable("DIVINING"),onConfirm:e=>e.tryConsumeResource("DIVINING")});Ca("ESSENTIAL_DIGNITY",15,"cd_ESSENTIAL_DIGNITY",{applicationDelay:.62,cooldown:40,maxCharges:3,healingPotency:400});Gs("SYNASTRY",50,"cd_SYNASTRY",{rscType:"SYNASTRY",applicationDelay:.62,cooldown:120});Gs("EXALTATION",86,"cd_EXALTATION",{rscType:"EXALTATION",applicationDelay:.71,cooldown:60});Ca("COLLECTIVE_UNCONSCIOUS",58,"cd_COLLECTIVE_UNCONSCIOUS",{applicationDelay:.42,cooldown:60,onConfirm:(e,t)=>{e.gainStatus("COLLECTIVE_UNCONSCIOUS"),e.gainStatus("COLLECTIVE_UNCONSCIOUS_MIT"),e.addHoTPotencies({node:t,skillName:"COLLECTIVE_UNCONSCIOUS",effectName:"WHEEL_OF_FORTUNE",speedStat:"sps",tickPotency:100})},onApplication:e=>e.gainStatus("WHEEL_OF_FORTUNE")});Ca("CELESTIAL_OPPOSITION",60,"cd_CELESTIAL_OPPOSITION",{applicationDelay:1.07,cooldown:60,healingPotency:200,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"CELESTIAL_OPPOSITION",effectName:"OPPOSITION",speedStat:"sps",tickPotency:100})},onApplication:e=>e.gainStatus("OPPOSITION")});Ca("CELESTIAL_INTERSECTION",74,"cd_CELESTIAL_INTERSECTION",{applicationDelay:0,cooldown:30,maxCharges:1,healingPotency:200,aoeHeal:!0});Gs("HOROSCOPE",76,"cd_HOROSCOPE",{rscType:"HOROSCOPE",applicationDelay:0,cooldown:60,replaceIf:[{newSkill:"HOROSCOPE_RECAST",condition:e=>e.hasResourceAvailable("HOROSCOPE_HELIOS")||e.hasResourceAvailable("HOROSCOPE")}]});Ca("HOROSCOPE_RECAST",76,"cd_HOROSCOPE_RECAST",{startOnHotbar:!1,applicationDelay:.62,cooldown:1,healingPotency:e=>e.hasResourceAvailable("HOROSCOPE_HELIOS")?400:200,aoeHeal:!0,validateAttempt:e=>e.hasResourceAvailable("HOROSCOPE_HELIOS")||e.hasResourceAvailable("HOROSCOPE"),onConfirm:e=>e.tryConsumeResource("HOROSCOPE_HELIOS")||e.tryConsumeResource("HOROSCOPE")});Gs("NEUTRAL_SECT",80,"cd_NEUTRAL_SECT",{rscType:"NEUTRAL_SECT",applicationDelay:.62,cooldown:120,replaceIf:[{newSkill:"SUN_SIGN",condition:e=>e.hasResourceAvailable("SUNTOUCHED")}],onConfirm:e=>e.gainStatus("SUNTOUCHED")});Gs("SUN_SIGN",100,"cd_SUN_SIGN",{startOnHotbar:!1,rscType:"SUN_SIGN",applicationDelay:1.47,cooldown:1,highlightIf:e=>e.hasResourceAvailable("SUNTOUCHED"),validateAttempt:e=>e.hasResourceAvailable("SUNTOUCHED"),onConfirm:e=>e.tryConsumeResource("SUNTOUCHED")});Object.keys(xT).forEach(e=>Ft(e,`SCH/${ze[e].name}.png`));const bD=["BIO_II","BIOLYSIS","CHAIN_STRATAGEM","BANEFUL_IMPACTION"],o2=Object.keys(xT).filter(e=>!bD.includes(e));class l2 extends Xt{jobSpecificOtherTargetedBuffViewProps(){return[...bD.map(t=>this.makeCommonTimer(t))]}jobSpecificSelfTargetedBuffViewProps(){return[...o2.map(t=>t==="FEY_UNION"?this.makeCommonTimerless(t):t==="SACRED_SOIL_ZONE"?this.makeToggleableTimer(t):this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){var d;const a=this.state.resources.get("SERAPH_SUMMON_TIMER"),i=a.available(1)?(d=a.pendingChange)==null?void 0:d.timeTillEvent:void 0,l=this.state.resources.get("FAERIE_GAUGE").availableAmount(),r=this.state.resources.get("AETHERFLOW").availableAmount();return[{kind:"text",name:Xe("SERAPH_SUMMON_TIMER"),text:(i==null?void 0:i.toFixed(3))??"N/A",color:i?t.sch.seraph:void 0},{kind:"bar",name:Xe("FAERIE_GAUGE"),color:t.sch.faerieGauge,progress:l/100,valueString:l.toFixed(0)},{kind:"counter",name:Xe("AETHERFLOW"),color:t.sch.aetherflow,currentStacks:r,maxStacks:3,valueString:r.toFixed(0)}]}}const Ut=(e,t,a)=>{qe("SCH",e,t,a??{})};Ut("AETHERFLOW",3,{warnOnOvercap:!0});Ut("FAERIE_GAUGE",100);Ut("BIO_II",1,{timeout:30});Ut("CATALYZE",1,{timeout:30});Ut("GALVANIZE",1,{timeout:30});Ut("WHISPERING_DAWN",1,{timeout:21});Ut("ANGELS_WHISPER",1,{timeout:21});Ut("FEY_ILLUMINATION",1,{timeout:20});Ut("SERAPHIC_ILLUMINATION",1,{timeout:20});Ut("SACRED_SOIL_ZONE",1,{timeout:30});Ut("SACRED_SOIL_MIT",1,{timeout:4.96});Ut("EMERGENCY_TACTICS",1,{timeout:15});Ut("DISSIPATION",1,{timeout:30});Ut("EXCOGITATION",1,{timeout:45});Ut("CHAIN_STRATAGEM",1,{timeout:20});Ut("IMPACT_IMMINENT",1,{timeout:30,warnOnTimeout:!0});Ut("BIOLYSIS",1,{timeout:30});Ut("RECITATION",1,{timeout:15});Ut("FEY_UNION",1);Ut("SERAPHIC_VEIL",1,{timeout:30});Ut("PROTRACTION",1,{timeout:10});Ut("EXPEDIENCE",1,{timeout:10});Ut("DESPERATE_MEASURES",1,{timeout:20});Ut("BANEFUL_IMPACTION",1,{timeout:15});Ut("SERAPHISM",1,{timeout:20});Ut("SERAPHISM_REGEN",1,{timeout:5});Ut("SERAPH_SUMMON_TIMER",1,{timeout:22});const ld=.09,sd=new Map([["FEY_BLESSING",.667],["WHISPERING_DAWN",1.156],["CONSOLATION",.889],["ANGELS_WHISPER",1.029],["AETHERPACT",.668],["FEY_ILLUMINATION",1.205]]);class s2 extends qt{constructor(a){super(a);Z(this,"nextEstimatedPetApplication");this.nextEstimatedPetApplication=void 0;const i=this.hasTraitUnlocked("ENHANCED_DEPLOYMENT_TACTICS")?90:120,l=this.hasTraitUnlocked("ENHANCED_RECITATION")?60:90;this.cooldowns.set(new Ge("cd_DEPLOYMENT_TACTICS",i,1,1)),this.cooldowns.set(new Ge("cd_RECITATION",l,1,1)),this.cooldowns.set(new Ge("cd_SWIFTCAST",this.hasTraitUnlocked("ENHANCED_SWIFTCAST")?40:60,1,1)),this.registerRecurringEvents([{reportName:g({en:"Bio/Biolysis DoT",zh:"DoT"}),groupedEffects:[{effectName:"BIO_II",appliedBy:["BIO_II"]},{effectName:"BIOLYSIS",appliedBy:["BIOLYSIS"]}]},{groupedEffects:[{effectName:"BANEFUL_IMPACTION",appliedBy:["BANEFUL_IMPACTION"]}]},{isHealing:!0,groupedEffects:[{effectName:"WHISPERING_DAWN",appliedBy:["WHISPERING_DAWN"]},{effectName:"ANGELS_WHISPER",appliedBy:["WHISPERING_DAWN"]}]},{isHealing:!0,groupedEffects:[{effectName:"SACRED_SOIL_MIT",appliedBy:["SACRED_SOIL"],isGroundTargeted:!0}]},{isHealing:!0,groupedEffects:[{effectName:"SERAPHISM_REGEN",appliedBy:["SERAPHISM"]}]}])}jobSpecificAddHealingBuffCovers(a,i){i.cdName==="cd_GCD"&&((this.hasResourceAvailable("FEY_ILLUMINATION")||this.hasResourceAvailable("SERAPHIC_ILLUMINATION"))&&a.addBuff(x.FeyIllumination),this.hasResourceAvailable("DISSIPATION")&&a.addBuff(x.Dissipation)),this.hasResourceAvailable("PROTRACTION")&&a.addBuff(x.Protraction);const l=["ADLOQUIUM","SUCCOR","CONCITATION","EXCOGITATION","INDOMITABILITY"];this.hasResourceAvailable("RECITATION")&&l.includes(i.name)&&a.addBuff(x.Recitation)}jobSpecificAddDamageBuffCovers(a,i){this.hasResourceAvailable("CHAIN_STRATAGEM")&&a.addBuff(x.ChainStratagem)}jobSpecificRegisterRecurringEvents(){const a=()=>new ve("sch special hot ticks",3,()=>{this.hasResourceAvailable("FEY_UNION")&&this.resources.get("FAERIE_GAUGE").available(10)&&this.resources.get("FAERIE_GAUGE").consume(10),this.resources.get("FAERIE_GAUGE").available(10)||this.tryConsumeResource("FEY_UNION"),this.hasResourceAvailable("SACRED_SOIL_ZONE")&&this.gainStatus("SACRED_SOIL_MIT"),this.hasResourceAvailable("SERAPHISM")&&this.gainStatus("SERAPHISM_REGEN"),this.addEvent(a())});this.addEvent(new ve("begin sch special hot ticks",this.hotTickOffset,()=>this.addEvent(a())))}makePetPotency(a,i,l,r){const d=new tn({config:this.config,sourceTime:l,sourceSkill:i,aspect:_e.Other,basePotency:r,snapshotTime:this.getDisplayTime(),description:"",targetCount:a,falloff:void 0}),E=[X.SchPet];return d.modifiers=E,d}queuePetAction(a,i,l,r,d,E){var R;const h=this.getDisplayTime();this.nextEstimatedPetApplication=h+r+d;const A=(R=this.resources.get("SERAPH_SUMMON_TIMER").pendingChange)==null?void 0:R.timeTillEvent;A!==void 0&&this.nextEstimatedPetApplication>A+h&&N.reportWarning({kind:"custom",en:`${Ti(i)} is likely to ghost when seraph leaves!`}),this.addEvent(new ve(l+" pet snapshot",r,()=>{const T=E(this);this.addEvent(new ve(l+" application",d,()=>{T(this)}))}))}warnLastPetGhost(){this.nextEstimatedPetApplication!==void 0&&this.nextEstimatedPetApplication>this.getDisplayTime()&&N.reportWarning({kind:"custom",en:"previous pet command is likely to ghost!"})}hasRealFairy(){return!this.hasResourceAvailable("DISSIPATION")&&!this.hasResourceAvailable("SERAPH_SUMMON_TIMER")}maybeChainModifier(){return this.hasResourceAvailable("CHAIN_STRATAGEM")?[X.ChainStrat]:[]}maybeGainFaerieGauge(){this.hasResourceAvailable("DISSIPATION")||this.resources.get("FAERIE_GAUGE").gain(10)}addHealingMagicPotencyModifiers(a){(this.hasResourceAvailable("FEY_ILLUMINATION")||this.hasResourceAvailable("SERAPHIC_ILLUMINATION"))&&a.push(X.FeyIllum),this.hasResourceAvailable("DISSIPATION")&&a.push(X.Dissipation)}addHealingActionPotencyModifiers(a){this.hasResourceAvailable("PROTRACTION")&&a.push(X.Protraction)}get statusPropsGenerator(){return new l2(this)}}const Oa=(e,t,a)=>$a("SCH",e,t,{...a,castTime:l=>l.config.adjustedCastTime(a.baseCastTime??0),recastTime:l=>l.config.adjustedGCD(2.5),isInstantFn:l=>!a.baseCastTime||l.hasResourceAvailable("SWIFTCAST"),jobPotencyModifiers:l=>l.maybeChainModifier(),jobHealingPotencyModifiers:l=>{if(!a.healingPotency)return[];const r=[];return l.addHealingMagicPotencyModifiers(r),l.addHealingActionPotencyModifiers(r),l.hasResourceAvailable("RECITATION")&&e!=="ACCESSION"&&e!=="MANIFESTATION"&&r.push(X.AutoCrit),r},onConfirm:ke(a.baseCastTime?l=>l.tryConsumeResource("SWIFTCAST"):void 0,a.onConfirm)}),wa=(e,t,a,i)=>lt("SCH",e,t,a,{...i,jobPotencyModifiers:r=>r.maybeChainModifier(),jobHealingPotencyModifiers:r=>{if(!i.healingPotency)return[];const d=[];return r.addHealingActionPotencyModifiers(d),r.hasResourceAvailable("RECITATION")&&(e==="INDOMITABILITY"||e==="EXCOGITATION")&&d.push(X.AutoCrit),d}}),wl=(e,t,a,i)=>Ke("SCH",e,t,a,i),DD=[{newSkill:"ADLOQUIUM",condition:e=>!e.hasResourceAvailable("SERAPHISM")},{newSkill:"MANIFESTATION",condition:e=>e.hasResourceAvailable("SERAPHISM")}],yD=[{newSkill:"CONCITATION",condition:e=>!e.hasResourceAvailable("SERAPHISM")},{newSkill:"ACCESSION",condition:e=>e.hasResourceAvailable("SERAPHISM")}];Oa("BROIL_II",64,{autoUpgrade:{otherSkill:"BROIL_III",trait:"BROIL_MASTERY_III"},applicationDelay:.8,baseCastTime:1.5,manaCost:400,potency:240});Oa("BROIL_III",72,{autoDowngrade:{otherSkill:"BROIL_II",trait:"BROIL_MASTERY_III"},autoUpgrade:{otherSkill:"BROIL_IV",trait:"BROIL_MASTERY_IV"},applicationDelay:.8,baseCastTime:1.5,manaCost:400,potency:255});Oa("BROIL_IV",82,{autoDowngrade:{otherSkill:"BROIL_III",trait:"BROIL_MASTERY_IV"},applicationDelay:.8,baseCastTime:1.5,manaCost:400,potency:[["NEVER",295],["TACTICIANS_MASTERY",320]]});Oa("BIO_II",26,{autoUpgrade:{otherSkill:"BIOLYSIS",trait:"CORRUPTION_MASTERY_II"},applicationDelay:1.15,baseCastTime:0,manaCost:300,drawsAggro:!0,onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"BIO_II",skillName:"BIO_II",tickPotency:40,speedStat:"sps",modifiers:e.maybeChainModifier()})},onApplication:(e,t)=>e.applyDoT("BIO_II",t)});Oa("BIOLYSIS",72,{autoDowngrade:{otherSkill:"BIO_II",trait:"CORRUPTION_MASTERY_II"},applicationDelay:.67,baseCastTime:0,manaCost:300,drawsAggro:!0,onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"BIOLYSIS",skillName:"BIOLYSIS",tickPotency:e.hasTraitUnlocked("TACTICIANS_MASTERY")?80:70,speedStat:"sps",modifiers:e.maybeChainModifier()})},onApplication:(e,t)=>e.applyDoT("BIOLYSIS",t)});Oa("RUIN_II",38,{applicationDelay:.94,potency:[["NEVER",200],["BROIL_MASTERY_IV",220]],baseCastTime:0,manaCost:400});Oa("ART_OF_WAR",46,{autoUpgrade:{otherSkill:"ART_OF_WAR_II",trait:"ART_OF_WAR_MASTERY"},applicationDelay:.67,baseCastTime:0,manaCost:400,potency:165,falloff:0});Oa("ART_OF_WAR_II",82,{autoDowngrade:{otherSkill:"ART_OF_WAR",trait:"ART_OF_WAR_MASTERY"},applicationDelay:.67,baseCastTime:0,manaCost:400,potency:180,falloff:0});wl("CHAIN_STRATAGEM",66,"cd_CHAIN_STRATAGEM",{replaceIf:[{newSkill:"BANEFUL_IMPACTION",condition:e=>e.hasResourceAvailable("IMPACT_IMMINENT")}],rscType:"CHAIN_STRATAGEM",applicationDelay:.8,cooldown:120,onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_CHAIN_STRATAGEM")&&e.gainStatus("IMPACT_IMMINENT")}});wa("BANEFUL_IMPACTION",92,"cd_BANEFUL_IMPACTION",{startOnHotbar:!1,applicationDelay:1.29,cooldown:1,falloff:0,highlightIf:e=>e.hasResourceAvailable("IMPACT_IMMINENT"),validateAttempt:e=>e.hasResourceAvailable("IMPACT_IMMINENT"),onConfirm:(e,t)=>{e.tryConsumeResource("IMPACT_IMMINENT"),e.addDoTPotencies({node:t,effectName:"BANEFUL_IMPACTION",skillName:"BANEFUL_IMPACTION",tickPotency:140,speedStat:"sps",modifiers:e.maybeChainModifier()})},onApplication:(e,t)=>e.applyDoT("BANEFUL_IMPACTION",t)});wa("ENERGY_DRAIN",45,"cd_ENERGY_DRAIN",{applicationDelay:1.07,cooldown:1,potency:100,validateAttempt:e=>e.hasResourceAvailable("AETHERFLOW"),onConfirm:e=>{e.maybeGainFaerieGauge(),e.tryConsumeResource("AETHERFLOW")}});Oa("ADLOQUIUM",30,{replaceIf:DD,applicationDelay:.98,baseCastTime:2,manaCost:900,healingPotency:300,onConfirm:e=>{const t=e.tryConsumeResource("EMERGENCY_TACTICS");t||e.gainStatus("GALVANIZE"),(e.tryConsumeResource("RECITATION")||e.triggersEffect(e.config.critRate))&&!t&&e.gainStatus("CATALYZE")}});const vD=e=>{e.tryConsumeResource("RECITATION"),e.tryConsumeResource("EMERGENCY_TACTICS")||e.gainStatus("GALVANIZE")};Oa("SUCCOR",35,{autoUpgrade:{otherSkill:"CONCITATION",trait:"SUCCOR_MASTERY"},applicationDelay:1.12,baseCastTime:2,manaCost:900,healingPotency:200,onConfirm:vD});Oa("CONCITATION",96,{autoDowngrade:{otherSkill:"CONCITATION",trait:"SUCCOR_MASTERY"},replaceIf:yD,applicationDelay:1.12,baseCastTime:2,manaCost:900,healingPotency:200,onConfirm:vD});Oa("PHYSICK",4,{applicationDelay:1.03,healingPotency:[["NEVER",400],["ENHANCED_HEALING_MAGIC",450]],baseCastTime:1.5,manaCost:300});Oa("RESURRECTION",12,{applicationDelay:.98,baseCastTime:8,manaCost:2400});wa("AETHERFLOW",45,"cd_AETHERFLOW",{applicationDelay:0,cooldown:60,requiresCombat:!0,onConfirm:e=>{e.resources.get("MANA").gain(2e3),e.resources.get("AETHERFLOW").gain(3)}});wl("DISSIPATION",60,"cd_DISSIPATION",{rscType:"DISSIPATION",applicationDelay:0,cooldown:180,requiresCombat:!0,validateAttempt:e=>!e.hasResourceAvailable("SERAPH_SUMMON_TIMER"),onConfirm:e=>{e.warnLastPetGhost(),e.resources.get("AETHERFLOW").gain(3),e.tryConsumeResource("SERAPHISM")}});wa("LUSTRATE",45,"cd_LUSTRATE",{applicationDelay:.62,cooldown:1,healingPotency:600,validateAttempt:e=>e.hasResourceAvailable("AETHERFLOW"),onConfirm:e=>{e.maybeGainFaerieGauge(),e.tryConsumeResource("AETHERFLOW")}});wl("SACRED_SOIL",50,"cd_SACRED_SOIL",{rscType:"SACRED_SOIL_ZONE",applicationDelay:.62,cooldown:30,validateAttempt:e=>e.hasResourceAvailable("AETHERFLOW"),onConfirm:(e,t)=>{e.maybeGainFaerieGauge(),e.tryConsumeResource("AETHERFLOW"),e.hasTraitUnlocked("ENHANCED_SACRED_SOIL")&&e.addHoTPotencies({node:t,skillName:"SACRED_SOIL",effectName:"SACRED_SOIL_MIT",speedStat:"sps",tickPotency:100},34.96+.62)},onApplication:(e,t)=>{e.hasTraitUnlocked("ENHANCED_SACRED_SOIL")&&(e.applyHoT("SACRED_SOIL_MIT",t,34.96),e.gainStatus("SACRED_SOIL_MIT"))}});wl("EXCOGITATION",62,"cd_EXCOGITATION",{rscType:"EXCOGITATION",applicationDelay:.8,cooldown:45,healingPotency:800,validateAttempt:e=>e.hasResourceAvailable("RECITATION")||e.hasResourceAvailable("AETHERFLOW"),onConfirm:e=>{e.maybeGainFaerieGauge(),e.tryConsumeResource("RECITATION")||e.tryConsumeResource("AETHERFLOW")}});wa("INDOMITABILITY",52,"cd_INDOMITABILITY",{applicationDelay:.62,cooldown:30,healingPotency:400,validateAttempt:e=>e.hasResourceAvailable("RECITATION")||e.hasResourceAvailable("AETHERFLOW"),onConfirm:e=>{e.maybeGainFaerieGauge(),e.tryConsumeResource("RECITATION")||e.tryConsumeResource("AETHERFLOW")}});wa("WHISPERING_DAWN",20,"cd_WHISPERING_DAWN",{applicationDelay:0,cooldown:60,validateAttempt:e=>!e.hasResourceAvailable("DISSIPATION"),onConfirm:(e,t)=>{e.tryConsumeResource("FEY_UNION");const a=e.hasResourceAvailable("SERAPH_SUMMON_TIMER")?"ANGELS_WHISPER":"WHISPERING_DAWN",i=l=>(l.addHoTPotencies({node:t,skillName:"WHISPERING_DAWN",effectName:a,speedStat:"sps",tickPotency:80}),r=>{r.applyHoT(a,t),t.getHotPotencies("WHISPERING_DAWN").forEach(d=>{d.modifiers.includes(X.SchPet)||d.modifiers.push(X.SchPet)}),r.gainStatus(a)});e.queuePetAction(t,"WHISPERING_DAWN",a,ld,sd.get(a),i)}});wa("FEY_ILLUMINATION",40,"cd_FEY_ILLUMINATION",{applicationDelay:0,cooldown:120,validateAttempt:e=>!e.hasResourceAvailable("DISSIPATION"),onConfirm:(e,t)=>{e.tryConsumeResource("FEY_UNION");const a=e.hasResourceAvailable("SERAPH_SUMMON_TIMER")?"SERAPHIC_ILLUMINATION":"FEY_ILLUMINATION",i=l=>r=>r.gainStatus(a);e.queuePetAction(t,"FEY_ILLUMINATION","FEY_ILLUMINATION",ld,sd.get("FEY_ILLUMINATION"),i)}});wa("DEPLOYMENT_TACTICS",56,"cd_DEPLOYMENT_TACTICS",{applicationDelay:.89,cooldown:120});wl("EMERGENCY_TACTICS",58,"cd_EMERGENCY_TACTICS",{rscType:"EMERGENCY_TACTICS",applicationDelay:0,cooldown:15});wa("AETHERPACT",70,"cd_AETHERPACT",{replaceIf:[{newSkill:"DISSOLVE_UNION",condition:e=>e.hasResourceAvailable("FEY_UNION")}],applicationDelay:0,cooldown:3,validateAttempt:e=>e.resources.get("FAERIE_GAUGE").available(10)&&e.hasRealFairy(),onConfirm:(e,t)=>{e.gainStatus("FEY_UNION");const a=i=>l=>l.gainStatus("FEY_UNION");e.queuePetAction(t,"AETHERPACT","AETHERPACT",ld,sd.get("AETHERPACT"),a)}});wa("DISSOLVE_UNION",70,"cd_DISSOLVE_UNION",{startOnHotbar:!1,applicationDelay:0,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("FEY_UNION"),onConfirm:e=>e.tryConsumeResource("FEY_UNION")});wl("RECITATION",74,"cd_RECITATION",{rscType:"RECITATION",applicationDelay:0,cooldown:90});wa("FEY_BLESSING",76,"cd_FEY_BLESSING",{applicationDelay:0,cooldown:60,healingPotency:320,validateAttempt:e=>e.hasRealFairy(),onConfirm:(e,t)=>{e.tryConsumeResource("FEY_UNION");const a=i=>{const l=i.makePetPotency(t.healTargetCount,"FEY_BLESSING",i.getDisplayTime(),320);return i.addHealingActionPotencyModifiers(l.modifiers),r=>N.resolveHealingPotency(l)};e.queuePetAction(t,"FEY_BLESSING","FEY_BLESSING",ld,sd.get("FEY_BLESSING"),a)}});wa("SUMMON_SERAPH",80,"cd_SUMMON_SERAPH",{replaceIf:[{newSkill:"CONSOLATION",condition:e=>e.hasResourceAvailable("SERAPH_SUMMON_TIMER")}],applicationDelay:0,cooldown:120,validateAttempt:e=>e.hasRealFairy(),onConfirm:e=>{e.warnLastPetGhost(),e.gainStatus("SERAPH_SUMMON_TIMER"),e.tryConsumeResource("FEY_UNION")}});wa("CONSOLATION",80,"cd_CONSOLATION",{startOnHotbar:!1,applicationDelay:0,cooldown:1,secondaryCooldown:{cdName:"cd_CONSOLATION_INTERNAL",cooldown:30,maxCharges:2},healingPotency:250,validateAttempt:e=>e.hasResourceAvailable("SERAPH_SUMMON_TIMER"),onConfirm:(e,t)=>{const a=i=>{const l=i.makePetPotency(t.healTargetCount,"CONSOLATION",i.getDisplayTime(),250);return r=>{r.gainStatus("SERAPHIC_VEIL"),N.resolveHealingPotency(l)}};e.queuePetAction(t,"CONSOLATION","CONSOLATION",ld,sd.get("CONSOLATION"),a)}});wl("PROTRACTION",86,"cd_PROTRACTION",{rscType:"PROTRACTION",applicationDelay:.76,cooldown:60});wa("EXPEDIENT",90,"cd_EXPEDIENT",{applicationDelay:0,cooldown:120});wl("SERAPHISM",100,"cd_SERAPHISM",{rscType:"SERAPHISM",applicationDelay:0,cooldown:180,validateAttempt:e=>!e.hasResourceAvailable("DISSIPATION"),onConfirm:(e,t)=>{const a=e.cooldowns.get("cd_EMERGENCY_TACTICS");a.restore(15),e.cooldowns.set(new Ge("cd_EMERGENCY_TACTICS",1,1,1)),e.addEvent(new ve("restore etact cd",e.getStatusDuration("SERAPHISM"),()=>e.cooldowns.set(a))),e.addHoTPotencies({node:t,skillName:"SERAPHISM",effectName:"SERAPHISM_REGEN",speedStat:"sps",tickPotency:100},24.96)},onApplication:(e,t)=>{e.applyHoT("SERAPHISM_REGEN",t,24.96),e.gainStatus("SERAPHISM_REGEN")}});Oa("MANIFESTATION",100,{startOnHotbar:!1,replaceIf:DD,applicationDelay:1.16,healingPotency:360,baseCastTime:0,manaCost:900,validateAttempt:e=>e.hasResourceAvailable("SERAPHISM"),onConfirm:e=>{e.tryConsumeResource("EMERGENCY_TACTICS")||(e.gainStatus("GALVANIZE"),e.triggersEffect(e.config.critRate)&&e.gainStatus("CATALYZE"))}});Oa("ACCESSION",100,{startOnHotbar:!1,replaceIf:yD,applicationDelay:.98,healingPotency:240,baseCastTime:0,manaCost:900,validateAttempt:e=>e.hasResourceAvailable("SERAPHISM"),onConfirm:e=>!e.tryConsumeResource("EMERGENCY_TACTICS")&&e.gainStatus("GALVANIZE")});Object.keys(GT).forEach(e=>Ft(e,`WHM/${ze[e].name}.png`));const MD=["AERO_II","DIA"],r2=Object.keys(GT).filter(e=>!MD.includes(e));class c2 extends Xt{jobSpecificOtherTargetedBuffViewProps(){return[...MD.map(t=>this.makeCommonTimer(t))]}jobSpecificSelfTargetedBuffViewProps(){return[...r2.map(t=>this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){const a=this.state.resources,i=a.get("LILLIES"),l=a.get("LILY_TIMER").available(1)?a.timeTillReady("LILY_TIMER"):20,r=i.availableAmount(),d=a.get("BLOOD_LILY").availableAmount(),E=[{kind:"bar",name:Xe("LILY_TIMER"),color:t.whm.lily,progress:1-l/20,valueString:l.toFixed(3)},{kind:"counter",name:Xe("LILLIES"),color:t.whm.lily,currentStacks:r,maxStacks:3}];return this.state.hasTraitUnlocked("TRANSCENDENT_AFFLATUS")&&E.push({kind:"counter",name:Xe("BLOOD_LILY"),color:t.whm.blood,currentStacks:d,maxStacks:3}),E}}const Rn=(e,t,a)=>{qe("WHM",e,t,a??{})};Rn("LILLIES",3);Rn("LILY_TIMER",1);Rn("BLOOD_LILY",3,{warnOnOvercap:!0});Rn("FREECURE",1,{timeout:15});Rn("PRESENCE_OF_MIND",1,{timeout:15});Rn("SACRED_SIGHT",3,{timeout:30,warnOnTimeout:!0});Rn("REGEN",1,{timeout:18});Rn("AERO_II",1,{timeout:30});Rn("MEDICA_II",1,{timeout:15});Rn("ASYLUM",1,{timeout:24});Rn("THIN_AIR",1,{timeout:12});Rn("DIVINE_BENISON",1,{timeout:15});Rn("CONFESSION",1,{timeout:10});Rn("DIA",1,{timeout:30});Rn("TEMPERANCE",1,{timeout:20});Rn("DIVINE_GRACE",1,{timeout:30});Rn("AQUAVEIL",1,{timeout:8});Rn("LITURGY_OF_THE_BELL",5,{timeout:20});Rn("MEDICA_III",1,{timeout:15});Rn("DIVINE_CARESS",1,{timeout:10});Rn("DIVINE_AURA",1,{timeout:15});class u2 extends qt{constructor(t){super(t);const a=this.hasTraitUnlocked("ENHANCED_DIVINE_BENISON")?2:1,i=this.hasTraitUnlocked("ENHANCED_TETRAGRAMMATON")?2:1;this.cooldowns.set(new Ge("cd_DIVINE_BENISON",30,a,a)),this.cooldowns.set(new Ge("cd_TETRAGRAMMATON",60,i,i)),this.cooldowns.set(new Ge("cd_SWIFTCAST",this.hasTraitUnlocked("ENHANCED_SWIFTCAST")?40:60,1,1)),this.registerRecurringEvents([{reportName:g({en:"Dia/Aero DoT",zh:"/DoT"}),groupedEffects:[{effectName:"AERO_II",appliedBy:["AERO_II"]},{effectName:"DIA",appliedBy:["DIA"]}]},{isHealing:!0,groupedEffects:[{effectName:"DIVINE_AURA",appliedBy:["DIVINE_CARESS"]}]},{isHealing:!0,groupedEffects:[{effectName:"ASYLUM",appliedBy:["ASYLUM"]}]},{isHealing:!0,groupedEffects:[{effectName:"REGEN",appliedBy:["REGEN"]}]},{isHealing:!0,groupedEffects:[{effectName:"MEDICA_II",appliedBy:["MEDICA_II"]},{effectName:"MEDICA_III",appliedBy:["MEDICA_III"]}]}])}jobSpecificRegisterRecurringEvents(){(this.isInCombat()||this.hasResourceAvailable("LILY_TIMER"))&&!this.hasResourceAvailable("LILLIES",3)&&this.startLilyTimer()}jobSpecificAddHealingBuffCovers(t,a){this.hasTraitUnlocked("ENHANCED_ASYLUM")&&this.hasResourceAvailable("ASYLUM")&&t.addBuff(x.Asylum),this.hasResourceAvailable("TEMPERANCE")&&t.addBuff(x.Temperance),a.cdName==="cd_GCD"&&a.aoeHeal&&this.hasResourceAvailable("CONFESSION")&&t.addBuff(x.Confession)}recurringLilyGain(){this.resources.addResourceEvent({rscType:"LILY_TIMER",name:"gain lily",delay:20,fnOnRsc:()=>{this.resources.get("LILLIES").gain(1),this.hasResourceAvailable("LILLIES",3)?this.tryConsumeResource("LILY_TIMER"):this.recurringLilyGain()}})}startLilyTimer(){this.hasResourceAvailable("LILY_TIMER")||this.hasResourceAvailable("LILLIES",3)||(this.resources.get("LILY_TIMER").gain(1),this.recurringLilyGain())}addHealingActionPotencyModifiers(t){this.hasTraitUnlocked("ENHANCED_ASYLUM")&&this.hasResourceAvailable("ASYLUM")&&t.push(X.Asylum),this.hasResourceAvailable("TEMPERANCE")&&t.push(X.Temperance)}get statusPropsGenerator(){return new c2(this)}}const Un=(e,t,a)=>{const i=l=>{if(!a.healingPotency)return[];const r=[];return l.hasResourceAvailable("CONFESSION")&&a.aoeHeal&&r.push(X.Confession),l.addHealingActionPotencyModifiers(r),r};return $a("WHM",e,t,{...a,castTime:l=>l.config.adjustedCastTime(a.baseCastTime??0,l.hasResourceAvailable("PRESENCE_OF_MIND")?20:0),recastTime:l=>l.config.adjustedGCD(2.5,l.hasResourceAvailable("PRESENCE_OF_MIND")?20:0),isInstantFn:l=>!a.baseCastTime||l.hasResourceAvailable("SWIFTCAST"),manaCost:a.manaCost?l=>l.hasResourceAvailable("THIN_AIR")?0:ma(a.manaCost)(l):void 0,jobHealingPotencyModifiers:i,onConfirm:ke(l=>l.tryConsumeResource("THIN_AIR"),a.baseCastTime?l=>l.tryConsumeResource("SWIFTCAST"):void 0,a.onConfirm),onApplication:ke(a.potency||e=="AFFLATUS_SOLACE"||e=="AFFLATUS_RAPTURE"?l=>l.startLilyTimer():void 0,a.onApplication)})},Bs=(e,t,a,i)=>lt("WHM",e,t,a,{...i,jobHealingPotencyModifiers:r=>{if(!i.healingPotency)return[];const d=[];return i.isPetHeal&&d.push(X.WhmPet),r.addHealingActionPotencyModifiers(d),d}}),Gl=(e,t,a,i)=>Ke("WHM",e,t,a,{...i,jobHealingPotencyModifiers:r=>{if(!i.healingPotency)return[];const d=[];return r.addHealingActionPotencyModifiers(d),d}});Un("STONE_IV",64,{autoUpgrade:{otherSkill:"GLARE",trait:"STONE_MASTERY_IV"},applicationDelay:.8,baseCastTime:1.5,potency:260,manaCost:400});Un("GLARE",72,{autoDowngrade:{otherSkill:"STONE_IV",trait:"STONE_MASTERY_IV"},autoUpgrade:{otherSkill:"GLARE_III",trait:"GLARE_MASTERY"},applicationDelay:1.29,baseCastTime:1.5,potency:290,manaCost:400});Un("GLARE_III",82,{autoDowngrade:{otherSkill:"GLARE",trait:"GLARE_MASTERY"},applicationDelay:1.29,baseCastTime:1.5,potency:[["NEVER",310],["WHITE_MAGIC_MASTERY",340]],manaCost:400});Un("AERO_II",46,{autoUpgrade:{otherSkill:"DIA",trait:"AERO_MASTERY_II"},applicationDelay:1.15,potency:50,manaCost:200,onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"AERO_II",skillName:"AERO_II",tickPotency:50,speedStat:"sps"})},onApplication:(e,t)=>e.applyDoT("AERO_II",t)});Un("DIA",72,{autoDowngrade:{otherSkill:"AERO_II",trait:"AERO_MASTERY_II"},applicationDelay:1.29,potency:[["NEVER",65],["WHITE_MAGIC_MASTERY",85]],manaCost:400,onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"DIA",skillName:"DIA",tickPotency:e.hasTraitUnlocked("WHITE_MAGIC_MASTERY")?85:65,speedStat:"sps"})},onApplication:(e,t)=>e.applyDoT("DIA",t)});Un("HOLY",45,{autoUpgrade:{otherSkill:"HOLY_III",trait:"HOLY_MASTERY"},applicationDelay:2.13,potency:140,baseCastTime:1.5,falloff:0,manaCost:400});Un("HOLY_III",82,{autoDowngrade:{otherSkill:"HOLY",trait:"HOLY_MASTERY"},applicationDelay:2.13,potency:150,baseCastTime:1.5,falloff:0,manaCost:400});Un("AFFLATUS_MISERY",74,{applicationDelay:.58,potency:[["NEVER",1240],["WHITE_MAGIC_MASTERY",1360]],falloff:.5,manaCost:0,highlightIf:e=>e.hasResourceExactly("BLOOD_LILY",3),validateAttempt:e=>e.hasResourceExactly("BLOOD_LILY",3),onConfirm:e=>e.tryConsumeResource("BLOOD_LILY",!0)});Un("AFFLATUS_SOLACE",52,{applicationDelay:.53,healingPotency:[["NEVER",700],["ENHANCED_HEALING_MAGIC",800]],manaCost:0,validateAttempt:e=>e.hasResourceAvailable("LILLIES"),onConfirm:e=>{e.tryConsumeResource("LILLIES"),e.resources.get("BLOOD_LILY").gain(1)}});Un("AFFLATUS_RAPTURE",76,{applicationDelay:.58,healingPotency:[["NEVER",300],["ENHANCED_HEALING_MAGIC",400]],manaCost:0,aoeHeal:!0,validateAttempt:e=>e.hasResourceAvailable("LILLIES"),onConfirm:e=>{e.tryConsumeResource("LILLIES"),e.resources.get("BLOOD_LILY").gain(1)}});Un("REGEN",35,{applicationDelay:1.02,healingPotency:[["NEVER",200],["ENHANCED_HEALING_MAGIC",250]],manaCost:400,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"REGEN",effectName:"REGEN",speedStat:"sps",tickPotency:e.hasTraitUnlocked("ENHANCED_HEALING_MAGIC")?250:200})},onApplication:(e,t)=>{e.applyHoT("REGEN",t),e.gainStatus("REGEN")}});Un("CURE",2,{applicationDelay:1.03,healingPotency:[["NEVER",450],["ENHANCED_HEALING_MAGIC",500]],baseCastTime:1.5,manaCost:400,onConfirm:e=>e.maybeGainProc("FREECURE",.15)});Un("CURE_II",30,{applicationDelay:.98,healingPotency:[["NEVER",700],["ENHANCED_HEALING_MAGIC",800]],baseCastTime:2,manaCost:e=>e.hasResourceAvailable("FREECURE")?0:1e3,highlightIf:e=>e.hasResourceAvailable("FREECURE"),onConfirm:e=>e.tryConsumeResource("FREECURE")});Un("CURE_III",40,{applicationDelay:.98,healingPotency:[["NEVER",550],["ENHANCED_HEALING_MAGIC",600]],baseCastTime:2,manaCost:1500,aoeHeal:!0});Un("MEDICA",10,{applicationDelay:1.02,healingPotency:[["NEVER",300],["ENHANCED_HEALING_MAGIC",400]],baseCastTime:2,manaCost:900,aoeHeal:!0});Un("MEDICA_II",50,{autoUpgrade:{otherSkill:"MEDICA_III",trait:"MEDICA_MASTERY"},applicationDelay:.84,healingPotency:[["NEVER",200],["ENHANCED_HEALING_MAGIC",250]],baseCastTime:2,manaCost:1e3,aoeHeal:!0,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"MEDICA_II",effectName:"MEDICA_II",speedStat:"sps",tickPotency:e.hasTraitUnlocked("ENHANCED_HEALING_MAGIC")?150:100})},onApplication:(e,t)=>{e.applyHoT("MEDICA_II",t),e.gainStatus("MEDICA_II")}});Un("MEDICA_III",96,{autoDowngrade:{otherSkill:"MEDICA_II",trait:"MEDICA_MASTERY"},applicationDelay:.84,healingPotency:250,baseCastTime:2,manaCost:1e3,aoeHeal:!0,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"MEDICA_III",effectName:"MEDICA_III",speedStat:"sps",tickPotency:175})},onApplication:(e,t)=>{e.applyHoT("MEDICA_III",t),e.gainStatus("MEDICA_III")}});Un("RAISE",12,{baseCastTime:8,manaCost:2400,applicationDelay:1.16});Bs("ASSIZE",56,"cd_ASSIZE",{applicationDelay:.67,cooldown:40,potency:400,falloff:0,healingPotency:400,onApplication:e=>e.resources.get("MANA").gain(500)});Gl("PRESENCE_OF_MIND",30,"cd_PRESENCE_OF_MIND",{rscType:"PRESENCE_OF_MIND",applicationDelay:.53,cooldown:120,replaceIf:[{newSkill:"GLARE_IV",condition:e=>e.hasResourceAvailable("SACRED_SIGHT")}],onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_PRESENCE_OF_MIND")&&e.gainStatus("SACRED_SIGHT",3)}});Un("GLARE_IV",92,{startOnHotbar:!1,applicationDelay:.85,potency:640,falloff:.4,manaCost:0,highlightIf:e=>e.hasResourceAvailable("SACRED_SIGHT"),validateAttempt:e=>e.hasResourceAvailable("SACRED_SIGHT"),onConfirm:e=>e.tryConsumeResource("SACRED_SIGHT")});Gl("THIN_AIR",58,"cd_THIN_AIR",{rscType:"THIN_AIR",applicationDelay:0,cooldown:60,maxCharges:2});Bs("AETHERIAL_SHIFT",40,"cd_AETHERIAL_SHIFT",{applicationDelay:0,cooldown:60,animationLock:Wt});Gl("DIVINE_BENISON",66,"cd_DIVINE_BENISON",{rscType:"DIVINE_BENISON",applicationDelay:.8,cooldown:30,maxCharges:2});Gl("AQUAVEIL",86,"cd_AQUAVEIL",{rscType:"AQUAVEIL",applicationDelay:.62,cooldown:60});Bs("TETRAGRAMMATON",60,"cd_TETRAGRAMMATON",{applicationDelay:.53,cooldown:60,maxCharges:2,healingPotency:700});Bs("BENEDICTION",50,"cd_BENEDICTION",{applicationDelay:.62,cooldown:180});Bs("ASYLUM",52,"cd_ASYLUM",{applicationDelay:.85,cooldown:90,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"ASYLUM",effectName:"ASYLUM",speedStat:"sps",tickPotency:100})},onApplication:e=>e.gainStatus("ASYLUM")});Gl("PLENARY_INDULGENCE",70,"cd_PLENARY_INDULGENCE",{rscType:"CONFESSION",applicationDelay:.8,cooldown:60});Gl("TEMPERANCE",80,"cd_TEMPERANCE",{rscType:"TEMPERANCE",applicationDelay:.62,cooldown:120,replaceIf:[{newSkill:"DIVINE_CARESS",condition:e=>e.hasResourceAvailable("DIVINE_GRACE")}],onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_TEMPERANCE")&&e.gainStatus("DIVINE_GRACE")}});Gl("LITURGY_OF_THE_BELL",90,"cd_LITURGY_OF_THE_BELL",{rscType:"LITURGY_OF_THE_BELL",applicationDelay:0,cooldown:180,replaceIf:[{newSkill:"LITURGY_POP",condition:e=>e.hasResourceAvailable("LITURGY_OF_THE_BELL")}]});Bs("LITURGY_TRIGGER",90,"cd_LITURGY_TRIGGER",{applicationDelay:0,cooldown:1,isPetHeal:!0,healingPotency:425,animationLock:Ia,validateAttempt:e=>e.hasResourceAvailable("LITURGY_OF_THE_BELL"),highlightIf:e=>e.hasResourceAvailable("LITURGY_OF_THE_BELL"),onConfirm:e=>e.tryConsumeResource("LITURGY_OF_THE_BELL")});Bs("LITURGY_POP",90,"cd_LITURGY_POP",{startOnHotbar:!1,applicationDelay:0,cooldown:1,isPetHeal:!0,healingPotency:e=>212*e.resources.get("LITURGY_OF_THE_BELL").availableAmount(),validateAttempt:e=>e.hasResourceAvailable("LITURGY_OF_THE_BELL"),highlightIf:e=>e.hasResourceAvailable("LITURGY_OF_THE_BELL"),onConfirm:e=>e.tryConsumeResource("LITURGY_OF_THE_BELL",!0)});Gl("DIVINE_CARESS",100,"cd_DIVINE_CARESS",{startOnHotbar:!1,rscType:"DIVINE_CARESS",applicationDelay:0,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("DIVINE_GRACE"),highlightIf:e=>e.hasResourceAvailable("DIVINE_GRACE"),onConfirm:e=>e.tryConsumeResource("DIVINE_GRACE"),onApplication:e=>{e.resources.addResourceEvent({rscType:"DIVINE_CARESS",name:"trigger divine aura on divine caress expiry",delay:10,fnOnRsc:()=>e.gainStatus("DIVINE_AURA")})}});Object.keys(DT).forEach(e=>Ft(e,`NIN/${ze[e].name}.png`));const LD=["DOKUMORI","TRICK_ATTACK","KUNAIS_BANE"],d2=Object.keys(DT).filter(e=>!LD.includes(e));class h2 extends Xt{jobSpecificOtherTargetedBuffViewProps(){return[...LD.map(t=>this.makeCommonTimer(t,!1))]}jobSpecificSelfTargetedBuffViewProps(){return d2.map(t=>t==="HIDDEN"?this.makeCommonTimerless(t):this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){var A,R;const a=this.state.resources,i=a.get("NIN_COMBO_TRACKER"),l=a.get("NIN_AOE_COMBO_TRACKER"),r=a.get("KAZEMATOI").availableAmount(),d=a.get("NINKI").availableAmount(),E=i.available(1)?(A=i.pendingChange)==null?void 0:A.timeTillEvent:l.available(1)?(R=l.pendingChange)==null?void 0:R.timeTillEvent:void 0;return[{kind:"bar",name:g({en:"Combo Timer",zh:""}),color:t.nin.ninComboTimer,progress:E?E/30:0,valueString:(E==null?void 0:E.toFixed(3))??"N/A"},{kind:"counter",name:Xe("KAZEMATOI"),color:t.nin.kazematoi,currentStacks:r,maxStacks:5},{kind:"bar",name:Xe("NINKI"),color:t.nin.ninki,progress:d/100,valueString:d.toFixed(0)}]}}const hn=(e,t,a)=>{qe("NIN",e,t,a??{})};hn("KAZEMATOI",5,{warnOnOvercap:!0});hn("NINKI",100,{warnOnOvercap:!0});hn("SHADE_SHIFT",1,{timeout:20});hn("MUDRA",1,{timeout:6});hn("HIDDEN",1);hn("TRICK_ATTACK",1,{timeout:15.77});hn("KASSATSU",1,{timeout:15,warnOnTimeout:!0});hn("DOKUMORI",1,{timeout:21});hn("TENRI_JINDO_READY",1,{timeout:30,warnOnTimeout:!0});hn("TEN_CHI_JIN",1,{timeout:6});hn("MEISUI",1,{timeout:30});hn("SHADOW_WALKER",1,{timeout:20});hn("BUNSHIN",5,{timeout:30,warnOnTimeout:!0});hn("PHANTOM_KAMAITACHI_READY",1,{timeout:45,warnOnTimeout:!0});hn("RAIJU_READY",3,{timeout:30,warnOnTimeout:!0});hn("KUNAIS_BANE",1,{timeout:16.25});hn("HIGI",1,{timeout:30});hn("DOTON",1,{timeout:18});hn("NIN_COMBO_TRACKER",2,{timeout:30});hn("NIN_AOE_COMBO_TRACKER",1,{timeout:30});hn("MUDRA_TRACKER",1e4);hn("BUNNY",1);const E2=["SPINNING_EDGE","GUST_SLASH","AEOLIAN_EDGE","ARMOR_CRUSH","THROWING_DAGGER","DEATH_BLOSSOM","HAKKE_MUJINSATSU","FORKED_RAIJU","FLEETING_RAIJU"];class f2 extends qt{constructor(t){super(t);const a=this.hasTraitUnlocked("ENHANCED_SHUKUCHI_II")?2:1;this.cooldowns.set(new Ge("cd_SHUKUCHI",60,a,a)),this.registerRecurringEvents([{groupedEffects:[{effectName:"DOTON",appliedBy:["DOTON","DOTON_CHI"],isGroundTargeted:!0}]}])}jobSpecificAddDamageBuffCovers(t,a){this.hasResourceAvailable("DOKUMORI")&&t.addBuff(x.Dokumori),this.hasResourceAvailable("TRICK_ATTACK")&&t.addBuff(x.TrickAttack),this.hasResourceAvailable("KUNAIS_BANE")&&t.addBuff(x.KunaisBane),this.hasResourceAvailable("BUNSHIN")&&E2.includes(a.name)&&t.addBuff(x.Bunshin)}inherentSpeedModifier(){return 15}get statusPropsGenerator(){return new h2(this)}stackRaijuReady(){this.resources.get("RAIJU_READY").gain(1),this.enqueueResourceDrop("RAIJU_READY")}gainNinki(t){this.resources.get("NINKI").gain(t)}processComboStatus(t){if(["THROWING_DAGGER","FORKED_RAIJU","FLEETING_RAIJU","PHANTOM_KAMAITACHI"].includes(t))return;let a=[this.resources.get("NIN_COMBO_TRACKER").availableAmount(),this.resources.get("NIN_AOE_COMBO_TRACKER").availableAmount()];t==="SPINNING_EDGE"?a=[1,0]:t==="GUST_SLASH"&&a[0]===1?a=[2,0]:t==="DEATH_BLOSSOM"?a=[0,1]:a=[0,0],this.setComboState("NIN_COMBO_TRACKER",a[0]),this.setComboState("NIN_AOE_COMBO_TRACKER",a[1])}parseMudraTracker(){if(this.hasResourceAvailable("BUNNY"))return;const t=this.resources.get("MUDRA_TRACKER").availableAmount();if(t===0)return[];if(t<10)return console.assert(t<4,`mudra tracker value ${t} was invalid`),[t];if(t<100)return console.assert(t%10!==0,`mudra tracker value ${t} was invalid`),[Math.floor(t/10),t%10];if(t<1e3)return[Math.floor(t/100),Math.floor(t/10)%10,t%10]}isMudraTrackerIn(t){const a=this.parseMudraTracker();return a!==void 0&&t.some(i=>a.length===i.length&&a.every((l,r)=>i[r]===l))}clearMudraInfo(){this.tryConsumeResource("MUDRA"),this.tryConsumeResource("KASSATSU"),this.resources.get("MUDRA_TRACKER").overrideCurrentValue(0),this.resources.get("BUNNY").overrideCurrentValue(0)}pushMudra(t,a){const i=this.resources.get("MUDRA_TRACKER"),l=i.availableAmount();if(l===0&&!a&&(console.assert(this.resources.get("MUDRA_TRACKER").availableAmount()===0),console.assert(this.resources.get("BUNNY").availableAmount()===0),this.gainStatus("MUDRA"),this.resources.get("MUDRA").removeTimer(),this.resources.addResourceEvent({rscType:"MUDRA",name:"clear mudra tracker/bunny",delay:Vt("NIN","MUDRA").maxTimeout,fnOnRsc:()=>this.clearMudraInfo()})),l>1e3)return;const r=l*10+t;i.overrideCurrentValue(r),a&&r>100&&(this.tryConsumeResource("TEN_CHI_JIN"),this.clearMudraInfo())}}const mC=e=>!e.hasResourceAvailable("TEN_CHI_JIN"),MS=e=>{e.hasResourceAvailable("MUDRA")&&e.gainStatus("BUNNY")},LS=e=>e===void 0?mC:t=>mC(t)&&e(t),Sc=(e,t)=>{e.hasResourceAvailable("DOKUMORI")&&t.push(X.Dokumori),e.hasResourceAvailable("TRICK_ATTACK")&&t.push(X.TrickAttack),e.hasResourceAvailable("KUNAIS_BANE")&&t.push(X.KunaisBane)},lo=(e,t,a)=>on("NIN",e,t,{...a,recastTime:i=>i.config.adjustedSksGCD(2.5,i.inherentSpeedModifier()),validateAttempt:LS(a.validateAttempt),onConfirm:ke(MS,(i,l)=>{var r;return(r=a.onConfirm)==null?void 0:r.call(a,i,l)},i=>{e!=="PHANTOM_KAMAITACHI"&&i.tryConsumeResource("BUNSHIN")&&i.gainNinki(5)},["THROWING_DAGGER","PHANTOM_KAMAITACHI","FORKED_RAIJU","FLEETING_RAIJU"].includes(e)?void 0:i=>i.tryConsumeResource("RAIJU_READY",!0)&&N.reportWarning({kind:"overwrite",rsc:"RAIJU_READY"}),i=>i.processComboStatus(e)),jobPotencyModifiers:i=>{var r;const l=((r=a.jobPotencyModifiers)==null?void 0:r.call(a,i))??[];return i.hasResourceAvailable("BUNSHIN")&&e!=="PHANTOM_KAMAITACHI"&&(e==="DEATH_BLOSSOM"||e==="HAKKE_MUJINSATSU"?l.push(X.BunshinAOE):l.push(X.BunshinST)),Sc(i,l),l}}),so=(e,t,a,i)=>lt("NIN",e,t,a,{...i,validateAttempt:LS(i.validateAttempt),onConfirm:ke(MS,(l,r)=>{var d;return(d=i.onConfirm)==null?void 0:d.call(i,l,r)}),jobPotencyModifiers:l=>{var d;const r=((d=i.jobPotencyModifiers)==null?void 0:d.call(i,l))??[];return Sc(l,r),r}}),rd=(e,t,a,i)=>Ke("NIN",e,t,a,{...i,validateAttempt:LS(i.validateAttempt),onConfirm:ke(MS,(l,r)=>{var d;return(d=i.onConfirm)==null?void 0:d.call(i,l,r)})});lo("THROWING_DAGGER",15,{applicationDelay:.62,potency:[["NEVER",120],["MELEE_MASTERY_II_NIN",200]],onConfirm:e=>e.gainNinki(5)});lo("SPINNING_EDGE",1,{applicationDelay:.4,potency:[["NEVER",180],["MELEE_MASTERY_II_NIN",220],["MELEE_MASTERY_III_NIN",300]],onConfirm:e=>e.gainNinki(5)});lo("GUST_SLASH",4,{applicationDelay:.4,potency:[["NEVER",100],["MELEE_MASTERY_NIN",120],["MELEE_MASTERY_II_NIN",160],["MELEE_MASTERY_III_NIN",240]],combo:{potency:[["NEVER",260],["MELEE_MASTERY_NIN",280],["MELEE_MASTERY_II_NIN",320],["MELEE_MASTERY_III_NIN",400]],resource:"NIN_COMBO_TRACKER",resourceValue:1},highlightIf:e=>e.hasResourceExactly("NIN_COMBO_TRACKER",1),onConfirm:e=>e.hasResourceExactly("NIN_COMBO_TRACKER",1)&&e.gainNinki(5)});const HD=e=>e.gainNinki(e.hasTraitUnlocked("SHUKIHO_III")?15:e.hasTraitUnlocked("SHUKIHO_II")?10:5);lo("AEOLIAN_EDGE",26,{applicationDelay:.54,potency:[["NEVER",100],["MELEE_MASTERY_NIN",140],["MELEE_MASTERY_III_NIN",220]],combo:{potency:[["NEVER",340],["MELEE_MASTERY_III_NIN",400]],resource:"NIN_COMBO_TRACKER",resourceValue:2},positional:{potency:[["NEVER",160],["MELEE_MASTERY_NIN",200],["MELEE_MASTERY_III_NIN",280]],comboPotency:[["NEVER",400],["MELEE_MASTERY_III_NIN",460]],location:"rear"},highlightIf:e=>e.hasResourceExactly("NIN_COMBO_TRACKER",2),onConfirm:HD,jobPotencyModifiers:e=>e.tryConsumeResource("KAZEMATOI")?[X.Kazematoi]:[]});lo("ARMOR_CRUSH",54,{applicationDelay:.62,potency:[["NEVER",100],["MELEE_MASTERY_NIN",140],["MELEE_MASTERY_III_NIN",240]],combo:{potency:[["NEVER",320],["MELEE_MASTERY_NIN",360],["MELEE_MASTERY_III_NIN",440]],resource:"NIN_COMBO_TRACKER",resourceValue:2},positional:{potency:[["NEVER",160],["MELEE_MASTERY_NIN",200],["MELEE_MASTERY_III_NIN",300]],comboPotency:[["NEVER",380],["MELEE_MASTERY_NIN",420],["MELEE_MASTERY_III_NIN",500]],location:"flank"},highlightIf:e=>e.hasResourceExactly("NIN_COMBO_TRACKER",2),onConfirm:ke(e=>{e.hasResourceExactly("NIN_COMBO_TRACKER",2)&&e.resources.get("KAZEMATOI").gain(2)},HD)});lo("DEATH_BLOSSOM",38,{applicationDelay:.71,potency:100,falloff:0,onConfirm:e=>e.gainNinki(5)});lo("HAKKE_MUJINSATSU",52,{applicationDelay:.62,potency:100,combo:{potency:120,resource:"NIN_AOE_COMBO_TRACKER",resourceValue:1},falloff:0,highlightIf:e=>e.hasResourceExactly("NIN_AOE_COMBO_TRACKER",1),onConfirm:e=>e.hasResourceExactly("NIN_AOE_COMBO_TRACKER",1)&&e.gainNinki(5),jobPotencyModifiers:e=>e.hasResourceExactly("NIN_AOE_COMBO_TRACKER",1)&&e.hasResourceAvailable("DOTON")?[X.HollowNozuchi]:[]});const Vr=e=>e.hasResourceAvailable("TEN_CHI_JIN")&&e.isMudraTrackerIn([[]]),UD=e=>e.hasResourceAvailable("TEN_CHI_JIN")&&e.isMudraTrackerIn([[2],[3]]),xD=e=>e.hasResourceAvailable("TEN_CHI_JIN")&&e.isMudraTrackerIn([[1],[3]]),kD=e=>e.hasResourceAvailable("TEN_CHI_JIN")&&e.isMudraTrackerIn([[1],[2]]),PD=e=>e.hasResourceAvailable("TEN_CHI_JIN")&&e.isMudraTrackerIn([[3,2],[2,3]]),wD=e=>e.hasResourceAvailable("TEN_CHI_JIN")&&e.isMudraTrackerIn([[1,3],[3,1]]),GD=e=>e.hasResourceAvailable("TEN_CHI_JIN")&&e.isMudraTrackerIn([[1,2],[2,1]]),BD=[{newSkill:"TEN",condition:e=>!e.hasResourceAvailable("TEN_CHI_JIN")},{newSkill:"FUMA_SHURIKEN_TEN",condition:Vr},{newSkill:"KATON_TEN",condition:UD},{newSkill:"HUTON_TEN",condition:PD}],HS=[{newSkill:"CHI",condition:e=>!e.hasResourceAvailable("TEN_CHI_JIN")},{newSkill:"FUMA_SHURIKEN_CHI",condition:Vr},{newSkill:"RAITON_CHI",condition:xD},{newSkill:"DOTON_CHI",condition:wD}],FD=[{newSkill:"JIN",condition:e=>!e.hasResourceAvailable("TEN_CHI_JIN")},{newSkill:"FUMA_SHURIKEN_JIN",condition:Vr},{newSkill:"HYOTON_JIN",condition:kD},{newSkill:"SUITON_JIN",condition:GD}],zD=[["FUMA_SHURIKEN",30,.89,[["NEVER",450],["MELEE_MASTERY_III_NIN",500]],void 0],["KATON",35,.94,350,0],["RAITON",35,.71,[["NEVER",650],["MELEE_MASTERY_III_NIN",740]],void 0],["HYOTON",45,1.16,350,void 0],["HUTON",45,.98,240,0],["SUITON",45,.98,[["NEVER",500],["MELEE_MASTERY_III_NIN",580]],void 0],["GOKA_MEKKYAKU",76,.76,600,0],["HYOSHO_RANRYU",76,.62,1300,void 0]],A2=new Map(zD.map(([e,t,a,i,l])=>[e,[t,a,i,l]])),m2=[["FUMA_SHURIKEN_TEN",Vr],["FUMA_SHURIKEN_CHI",Vr],["FUMA_SHURIKEN_JIN",Vr],["KATON_TEN",UD],["RAITON_CHI",xD],["HYOTON_JIN",kD],["HUTON_TEN",PD],["SUITON_JIN",GD]];m2.forEach(([e,t])=>{const[,a,i,l]=A2.get(e.substring(0,e.length-4)),r=e.substring(e.length-3);on("NIN",e,70,{startOnHotbar:!1,applicationDelay:a,recastTime:e==="HUTON_TEN"||e==="SUITON_JIN"?1.5:1,potency:i,falloff:l,replaceIf:r==="TEN"?BD:r==="CHI"?HS:FD,validateAttempt:t,jobPotencyModifiers:E=>{const h=[];return Sc(E,h),e==="KATON"&&E.hasResourceAvailable("DOTON")&&h.push(X.HollowNozuchi),h},onConfirm:ke(E=>E.pushMudra(r==="TEN"?1:r==="CHI"?2:3,!0),e==="RAITON_CHI"?E=>E.stackRaijuReady():e==="SUITON_JIN"||e==="HUTON_TEN"?E=>E.gainStatus("SHADOW_WALKER"):void 0)})});const jD=(e,t)=>{e.applyDoT("DOTON",t),e.gainStatus("DOTON")};on("NIN","DOTON_CHI",70,{startOnHotbar:!1,recastTime:1.5,replaceIf:HS,validateAttempt:wD,jobPotencyModifiers:e=>{const t=[];return Sc(e,t),t},onConfirm:ke((e,t)=>{e.addDoTPotencies({node:t,effectName:"DOTON",skillName:"DOTON",tickPotency:80,speedStat:"sks"})},e=>e.pushMudra(2,!0)),onApplication:jD});[["TEN",30,BD],["CHI",35,HS],["JIN",45,FD]].forEach(([e,t,a],i)=>{on("NIN",e,t,{recastTime:.5,animationLock:.5,replaceIf:a,secondaryCooldown:{cdName:"cd_MUDRA",cooldown:20,maxCharges:2},jobPotencyModifiers:l=>{const r=[];return Sc(l,r),r},validateAttempt:l=>!l.hasResourceAvailable("TEN_CHI_JIN"),onConfirm:l=>l.pushMudra(i+1,!1)})});const R2=e=>e.hasTraitUnlocked("ENHANCED_KASSATSU")&&e.hasResourceAvailable("KASSATSU")&&e.isMudraTrackerIn([[2,1],[3,1]]),T2=e=>e.hasTraitUnlocked("ENHANCED_KASSATSU")&&e.hasResourceAvailable("KASSATSU")&&e.isMudraTrackerIn([[1,3],[2,3]]),S2=e=>e.hasResourceAvailable("MUDRA")&&e.isMudraTrackerIn([[1],[2],[3]]),I2=e=>(!e.hasTraitUnlocked("ENHANCED_KASSATSU")||!e.hasResourceAvailable("KASSATSU"))&&e.hasResourceAvailable("MUDRA")&&e.isMudraTrackerIn([[2,1],[3,1]]),_2=e=>e.hasResourceAvailable("MUDRA")&&e.isMudraTrackerIn([[1,2],[3,2]]),g2=e=>(!e.hasTraitUnlocked("ENHANCED_KASSATSU")||!e.hasResourceAvailable("KASSATSU"))&&e.hasResourceAvailable("MUDRA")&&e.isMudraTrackerIn([[1,3],[2,3]]),N2=e=>e.hasResourceAvailable("MUDRA")&&e.isMudraTrackerIn([[3,2,1],[2,3,1]]),p2=e=>e.hasResourceAvailable("MUDRA")&&e.isMudraTrackerIn([[1,3,2],[3,1,2]]),C2=e=>e.hasResourceAvailable("MUDRA")&&e.isMudraTrackerIn([[1,2,3],[2,1,3]]),O2=e=>e.hasResourceAvailable("MUDRA")&&(e.hasResourceAvailable("BUNNY")||!e.isMudraTrackerIn([[1],[2],[3],[2,1],[3,1],[1,2],[3,2],[1,3],[2,3],[3,2,1],[2,3,1],[1,3,2],[3,1,2],[1,2,3],[2,1,3]])),If=[{newSkill:"GOKA_MEKKYAKU",condition:R2},{newSkill:"HYOSHO_RANRYU",condition:T2},{newSkill:"FUMA_SHURIKEN",condition:S2},{newSkill:"KATON",condition:I2},{newSkill:"RAITON",condition:_2},{newSkill:"HYOTON",condition:g2},{newSkill:"HUTON",condition:N2},{newSkill:"DOTON",condition:p2},{newSkill:"SUITON",condition:C2},{newSkill:"RABBIT_MEDIUM",condition:e=>e.hasResourceAvailable("MUDRA")&&(e.hasResourceAvailable("BUNNY")||O2(e))},{newSkill:"NINJUTSU",condition:e=>!e.hasResourceAvailable("MUDRA")}],_f=e=>If.filter(t=>t.newSkill!==e);on("NIN","NINJUTSU",30,{recastTime:1.5,validateAttempt:e=>!1,replaceIf:_f("NINJUTSU")});on("NIN","RABBIT_MEDIUM",30,{startOnHotbar:!1,recastTime:1.5,replaceIf:_f("RABBIT_MEDIUM"),validateAttempt:If.find(e=>e.newSkill==="RABBIT_MEDIUM").condition,onConfirm:e=>e.clearMudraInfo()});zD.forEach(([e,t,a,i,l])=>{on("NIN",e,t,{startOnHotbar:!1,applicationDelay:a,recastTime:r=>r.hasResourceAvailable("TEN_CHI_JIN")?1:1.5,potency:i,falloff:l,replaceIf:_f(e),validateAttempt:If.find(r=>r.newSkill===e).condition,onConfirm:ke(["KATON","RAITON","HYOTON"].includes(e)?r=>{r.cooldowns.get("cd_SHUKUCHI").timeTillNextStackAvailable()!==0&&r.cooldowns.get("cd_SHUKUCHI").restore(60)}:void 0,e==="RAITON"?r=>r.stackRaijuReady():e==="SUITON"||e==="HUTON"?r=>r.gainStatus("SHADOW_WALKER"):void 0,r=>r.clearMudraInfo()),jobPotencyModifiers:r=>{const d=[];return r.hasResourceAvailable("KASSATSU")&&d.push(X.Kassatsu),r.hasResourceAvailable("DOTON")&&["KATON","GOKA_MEKKYAKU"].includes(e)&&d.push(X.HollowNozuchi),Sc(r,d),d}})});on("NIN","DOTON",45,{startOnHotbar:!1,recastTime:e=>e.hasResourceAvailable("TEN_CHI_JIN")?1:1.5,potency:0,falloff:0,replaceIf:_f("DOTON"),validateAttempt:If.find(e=>e.newSkill==="DOTON").condition,onConfirm:ke((e,t)=>{e.addDoTPotencies({node:t,effectName:"DOTON",skillName:"DOTON",tickPotency:80,speedStat:"sks"})},e=>e.clearMudraInfo()),onApplication:jD});const xE=e=>e.hasResourceAvailable("RAIJU_READY"),YD=[["NEVER",560],["MELEE_MASTERY_III_NIN",700]];lo("FORKED_RAIJU",90,{applicationDelay:.62,potency:YD,animationLock:Wt,highlightIf:xE,validateAttempt:xE,onConfirm:e=>{e.gainNinki(5),e.tryConsumeResource("RAIJU_READY")}});lo("FLEETING_RAIJU",90,{applicationDelay:.76,potency:YD,highlightIf:xE,validateAttempt:xE,onConfirm:e=>{e.gainNinki(5),e.tryConsumeResource("RAIJU_READY")}});so("DOKUMORI",66,"cd_DOKUMORI",{applicationDelay:1.07,potency:400,falloff:0,cooldown:120,onConfirm:e=>{e.gainStatus("DOKUMORI"),e.gainNinki(40),e.hasTraitUnlocked("ENHANCED_DOKUMORI")&&e.gainStatus("HIGI")}});const kE=e=>e.hasResourceAvailable("HIDDEN")||e.hasResourceAvailable("SHADOW_WALKER");so("TRICK_ATTACK",18,"cd_TRICK_ATTACK",{autoUpgrade:{trait:"TRICK_ATTACK_MASTERY",otherSkill:"KUNAIS_BANE"},applicationDelay:.8,potency:300,positional:{potency:400,location:"rear"},cooldown:60,highlightIf:kE,validateAttempt:kE,onConfirm:e=>{e.gainStatus("TRICK_ATTACK"),e.tryConsumeResource("SHADOW_WALKER")}});so("KUNAIS_BANE",92,"cd_TRICK_ATTACK",{autoDowngrade:{trait:"TRICK_ATTACK_MASTERY",otherSkill:"TRICK_ATTACK"},startOnHotbar:!1,applicationDelay:1.29,cooldown:60,potency:700,falloff:0,highlightIf:kE,validateAttempt:kE,onConfirm:e=>{e.gainStatus("KUNAIS_BANE"),e.tryConsumeResource("SHADOW_WALKER")}});so("DREAM_WITHIN_A_DREAM",56,"cd_DREAM_WITHIN_A_DREAM",{applicationDelay:.98,cooldown:60,potency:180*3});rd("KASSATSU",50,"cd_KASSATSU",{rscType:"KASSATSU",cooldown:60,applicationDelay:0,validateAttempt:e=>!e.hasResourceAvailable("TEN_CHI_JIN")});const no=e=>e.resources.get("NINKI").available(50),cd=e=>e.resources.get("NINKI").consume(50);so("BHAVACAKRA",68,"cd_BHAVACAKRA",{applicationDelay:.62,cooldown:1,potency:[["NEVER",350],["MELEE_MASTERY_III_NIN",400]],highlightIf:no,validateAttempt:no,replaceIf:[{newSkill:"ZESHO_MEPPO",condition:e=>e.hasResourceAvailable("HIGI")}],onConfirm:ke(cd,e=>e.tryConsumeResource("MEISUI")),jobPotencyModifiers:e=>e.hasResourceAvailable("MEISUI")?[X.Meisui]:[]});so("ZESHO_MEPPO",96,"cd_BHAVACAKRA",{startOnHotbar:!1,applicationDelay:1.03,cooldown:1,potency:700,highlightIf:e=>e.hasResourceAvailable("HIGI")&&no(e),validateAttempt:e=>e.hasResourceAvailable("HIGI")&&no(e),replaceIf:[{newSkill:"BHAVACAKRA",condition:e=>!e.hasResourceAvailable("HIGI")}],onConfirm:ke(cd,e=>{e.tryConsumeResource("MEISUI"),e.tryConsumeResource("HIGI")}),jobPotencyModifiers:e=>e.hasResourceAvailable("MEISUI")?[X.Meisui]:[]});so("HELLFROG_MEDIUM",62,"cd_BHAVACAKRA",{applicationDelay:.8,cooldown:1,potency:250,falloff:0,highlightIf:no,validateAttempt:no,replaceIf:[{newSkill:"DEATHFROG_MEDIUM",condition:e=>e.hasResourceAvailable("HIGI")}],onConfirm:cd});so("DEATHFROG_MEDIUM",96,"cd_BHAVACAKRA",{startOnHotbar:!1,applicationDelay:.8,cooldown:1,potency:400,falloff:0,highlightIf:e=>e.hasResourceAvailable("HIGI")&&no(e),validateAttempt:e=>e.hasResourceAvailable("HIGI")&&no(e),onConfirm:ke(cd,e=>e.tryConsumeResource("HIGI"))});rd("MEISUI",72,"cd_MEISUI",{rscType:"MEISUI",cooldown:120,applicationDelay:0,highlightIf:e=>e.hasResourceAvailable("SHADOW_WALKER"),validateAttempt:e=>e.hasResourceAvailable("SHADOW_WALKER"),onConfirm:e=>{e.tryConsumeResource("SHADOW_WALKER"),e.gainNinki(50)}});rd("BUNSHIN",80,"cd_BUNSHIN",{rscType:"BUNSHIN",cooldown:90,applicationDelay:0,replaceIf:[{newSkill:"PHANTOM_KAMAITACHI",condition:e=>e.hasResourceAvailable("PHANTOM_KAMAITACHI_READY")}],highlightIf:no,validateAttempt:no,onConfirm:ke(cd,e=>e.gainStatus("PHANTOM_KAMAITACHI_READY"))});lo("PHANTOM_KAMAITACHI",80,{startOnHotbar:!1,potency:700,falloff:0,applicationDelay:1.57,highlightIf:e=>e.hasResourceAvailable("PHANTOM_KAMAITACHI_READY"),validateAttempt:e=>e.hasResourceAvailable("PHANTOM_KAMAITACHI_READY"),onConfirm:e=>{e.tryConsumeResource("PHANTOM_KAMAITACHI_READY"),e.gainNinki(10)},jobPotencyModifiers:e=>e.hasResourceAvailable("DOTON")?[X.HollowNozuchi,X.NinPet]:[X.NinPet]});rd("TEN_CHI_JIN",70,"cd_TEN_CHI_JIN",{rscType:"TEN_CHI_JIN",applicationDelay:0,cooldown:120,replaceIf:[{newSkill:"TENRI_JINDO",condition:e=>e.hasResourceAvailable("TENRI_JINDO_READY")}],validateAttempt:e=>!e.hasResourceAvailable("KASSATSU"),onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_TEN_CHI_JIN")&&e.gainStatus("TENRI_JINDO_READY"),e.clearMudraInfo()}});so("TENRI_JINDO",100,"cd_TENRI_JINDO",{startOnHotbar:!1,applicationDelay:1.69,cooldown:1,potency:1100,falloff:0,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("TENRI_JINDO_READY"),onConfirm:e=>e.tryConsumeResource("TENRI_JINDO_READY")});so("SHUKUCHI",40,"cd_SHUKUCHI",{applicationDelay:0,cooldown:60,maxCharges:2,animationLock:Wt});rd("SHADE_SHIFT",2,"cd_SHADE_SHIFT",{rscType:"SHADE_SHIFT",applicationDelay:.4,cooldown:120});Object.keys(bT).forEach(e=>Ft(e,`MNK/${QC[e].name}.png`));function b2(e){switch(e){case 1:return"opo";case 2:return"raptor";case 3:return"coeurl"}return null}function D2(e){switch(e){case"opo":return g({en:"o",zh:""});case"raptor":return g({en:"r",zh:""});case"coeurl":return g({en:"c",zh:""})}return null}function RC(e){switch(e){case"lunar":return g({en:e,zh:""});case"solar":return g({en:e,zh:""})}return null}class y2 extends Xt{jobSpecificSelfTargetedBuffViewProps(){return Object.keys(bT).map(t=>this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){var A;const a=this.state.resources,i=["BEAST_CHAKRA_1","BEAST_CHAKRA_2","BEAST_CHAKRA_3"].map(R=>a.get(R).availableAmount()).map(b2),l=a.get("LUNAR_NADI").available(1),r=a.get("SOLAR_NADI").available(1),d=i.map(D2).filter(R=>R!==null).join("+"),E=[RC(l?"lunar":null),RC(r?"solar":null)].filter(R=>R!==null).join("+");return[{kind:"counter",name:Xe("OPO_OPOS_FURY"),color:t.mnk.opo,currentStacks:a.get("OPO_OPOS_FURY").availableAmount(),maxStacks:1},{kind:"counter",name:Xe("RAPTORS_FURY"),color:t.mnk.raptor,currentStacks:a.get("RAPTORS_FURY").availableAmount(),maxStacks:1},{kind:"counter",name:Xe("COEURLS_FURY"),color:t.mnk.coeurl,currentStacks:a.get("COEURLS_FURY").availableAmount(),maxStacks:2},{kind:"chakra",name:Xe("CHAKRA"),regularColor:t.mnk.chakra,overflowColor:t.mnk.extraChakra,value:a.get("CHAKRA").availableAmount(),wrapCount:5},{kind:"text",name:Xe("BEAST_CHAKRA_TIMER"),text:i.every(R=>R!==null)?(A=a.get("BEAST_CHAKRA_1").pendingChange)==null?void 0:A.timeTillEvent.toFixed(3):"n/a"},{kind:"beast",name:Xe("BEAST_CHAKRA"),label:d,chakras:i,opoColor:t.mnk.opo,raptorColor:t.mnk.raptor,coeurlColor:t.mnk.coeurl},{kind:"nadi",name:Xe("NADI"),label:E,lunar:l,solar:r,lunarColor:t.mnk.lunar,solarColor:t.mnk.solar}]}}const xt=(e,t,a)=>{qe("MNK",e,t,a??{})};xt("CHAKRA",5,{default:5});xt("BEAST_CHAKRA",1);xt("NADI",1);xt("OPO_OPOS_FURY",1,{warnOnOvercap:!0});xt("RAPTORS_FURY",1,{warnOnOvercap:!0});xt("COEURLS_FURY",2,{warnOnOvercap:!0});xt("MANTRA",1,{timeout:15});xt("OPO_OPO_FORM",1,{timeout:30});xt("RAPTOR_FORM",1,{timeout:30});xt("COEURL_FORM",1,{timeout:30});xt("PERFECT_BALANCE",3,{timeout:20});xt("FORMLESS_FIST",1,{timeout:30,default:1});xt("RIDDLE_OF_EARTH",1,{timeout:10});xt("EARTHS_RESOLVE",1,{timeout:15});xt("EARTHS_RUMINATION",1,{timeout:30});xt("RIDDLE_OF_FIRE",1,{timeout:20.72});xt("FIRES_RUMINATION",1,{timeout:20,warnOnTimeout:!0});xt("BROTHERHOOD",1,{timeout:20});xt("MEDITATIVE_BROTHERHOOD",1,{timeout:20});xt("RIDDLE_OF_WIND",1,{timeout:15.78});xt("WINDS_RUMINATION",1,{timeout:15,warnOnTimeout:!0});xt("SIX_SIDED_STAR",1,{timeout:5});const Ll=["BEAST_CHAKRA_1","BEAST_CHAKRA_2","BEAST_CHAKRA_3"];xt("BEAST_CHAKRA_1",3);xt("BEAST_CHAKRA_2",3);xt("BEAST_CHAKRA_3",3);xt("LUNAR_NADI",1);xt("SOLAR_NADI",1);class v2 extends qt{constructor(t){super(t);const a=this.hasTraitUnlocked("ENHANCED_THUNDERCLAP")?3:2;this.cooldowns.set(new Ge("cd_THUNDERCLAP",30,a,a)),this.registerRecurringEvents()}getForm(){if(this.hasResourceAvailable("OPO_OPO_FORM"))return"opo";if(this.hasResourceAvailable("RAPTOR_FORM"))return"raptor";if(this.hasResourceAvailable("COEURL_FORM"))return"coeurl"}setForm(t){["OPO_OPO_FORM","RAPTOR_FORM","COEURL_FORM","FORMLESS_FIST"].forEach(i=>this.tryConsumeResource(i));const a=t==="opo"?"OPO_OPO_FORM":t==="raptor"?"RAPTOR_FORM":t==="coeurl"?"COEURL_FORM":"FORMLESS_FIST";this.gainStatus(a)}canDoForm(t){return this.hasResourceAvailable("PERFECT_BALANCE")||this.hasResourceAvailable("FORMLESS_FIST")||this.getForm()===t}gainChakra(){this.resources.get("CHAKRA").gain(1)}maybeGainChakra(t){if(this.hasResourceAvailable("MEDITATIVE_BROTHERHOOD"))for(let l=0;l<this.resources.get("PARTY_SIZE").availableAmount()-1;l++)this.triggersEffect(.2,!0)&&this.gainChakra();if(this.hasTraitUnlocked("ENHANCED_BROTHERHOOD")&&this.hasResourceAvailable("MEDITATIVE_BROTHERHOOD")){this.gainChakra();return}const a=t?1:this.config.critRate,i=this.triggersEffect(a,!0);if(t||i){const l=this.hasTraitUnlocked("DEEP_MEDITATION_II")?1:.8,r=this.triggersEffect(l);(l===1||r)&&this.gainChakra()}}consumeFiveChakra(){const t=this.resources.get("CHAKRA");t.consume(Math.min(t.availableAmount(),5))}startPB(){["OPO_OPO_FORM","RAPTOR_FORM","COEURL_FORM","FORMLESS_FIST"].forEach(t=>this.tryConsumeResource(t)),this.gainStatus("PERFECT_BALANCE")}jobSpecificAddDamageBuffCovers(t,a){this.hasResourceAvailable("RIDDLE_OF_FIRE")&&t.addBuff(x.RiddleOfFire),this.hasResourceAvailable("BROTHERHOOD")&&t.addBuff(x.Brotherhood)}inherentSpeedModifier(){return this.hasTraitUnlocked("ENHANCED_GREASED_LIGHTNING_III")?20:15}get statusPropsGenerator(){return new y2(this)}}const Kn=(e,t,a)=>{const i=a.form?l=>a.form.requiredForm===void 0||l.canDoForm(a.form.requiredForm):void 0;return on("MNK",e,t,{...a,positional:void 0,highlightIf:l=>{var r;return!i&&!a.ball&&!a.highlightIf?!1:((i==null?void 0:i(l))??!0)&&(a.ball?l.hasResourceAvailable(a.ball.rsc):!0)&&(((r=a.highlightIf)==null?void 0:r.call(a,l))??!0)},validateAttempt:l=>{var r;return((i==null?void 0:i(l))??!0)&&(((r=a.validateAttempt)==null?void 0:r.call(a,l))??!0)},recastTime:l=>l.config.adjustedSksGCD(a.recastTime??2.5,l.inherentSpeedModifier()),onConfirm:ke(a.onConfirm,e!=="SIX_SIDED_STAR"&&a.potency?(l,r)=>{const d=r.getInitialPotency();d&&l.maybeGainChakra(d.modifiers.includes(X.AutoCrit))}:void 0,a.form?l=>{const r=a.form.nextForm;if(l.tryConsumeResource("PERFECT_BALANCE")){for(const E of Ll)if(!l.hasResourceAvailable(E)){let h=3;r==="raptor"?h=1:r==="coeurl"&&(h=2),l.resources.get(E).gain(h),E==="BEAST_CHAKRA_3"&&Ll.forEach(A=>l.enqueueResourceDrop(A,20));break}}else l.setForm(r)}:void 0,a.ball?l=>l.tryConsumeResource(a.ball.rsc):void 0),jobPotencyModifiers:l=>{var E;const r=((E=a.jobPotencyModifiers)==null?void 0:E.call(a,l))??[],d=a.positional&&l.hitPositional(a.positional.location);return l.hasResourceAvailable("BROTHERHOOD")&&r.push(X.Brotherhood),l.hasResourceAvailable("RIDDLE_OF_FIRE")&&r.push(X.RiddleOfFire),a.ball&&l.hasResourceAvailable(a.ball.rsc)?(r.push({kind:"adder",source:k.MNK_BALL,additiveAmount:an(l,a.ball.potency)-an(l,a.potency)}),a.positional&&d&&r.push(rE(an(l,a.positional.ballPotency)-an(l,a.ball.potency)))):a.positional&&d&&r.push(rE(an(l,a.positional.potency)-an(l,a.potency))),r}})},gf=(e,t,a,i)=>lt("MNK",e,t,a,{...i}),Ic=(e,t,a,i)=>Ke("MNK",e,t,a,i);[["BOOTSHINE",1,1.11,[["NEVER",180],["MELEE_MASTERY_MNK",220]]],["LEAPING_OPO",92,.62,260]].forEach(([e,t,a,i],l)=>{Kn(e,t,{...l===0?{autoUpgrade:{otherSkill:"LEAPING_OPO",trait:"BEAST_CHAKRA_MASTERY"}}:{autoDowngrade:{otherSkill:"BOOTSHINE",trait:"BEAST_CHAKRA_MASTERY"}},form:{nextForm:"raptor"},ball:{potency:l===0?[["NEVER",380],["MELEE_MASTERY_MNK",420]]:460,rsc:"OPO_OPOS_FURY"},applicationDelay:a,potency:i,highlightIf:d=>d.canDoForm("opo"),jobPotencyModifiers:d=>d.hasResourceAvailable("OPO_OPOS_FURY")?[X.AutoCrit]:[]})});[["TRUE_STRIKE",4,.8,[["NEVER",260],["MELEE_MASTERY_MNK",300]]],["RISING_RAPTOR",92,.89,340]].forEach(([e,t,a,i],l)=>{Kn(e,t,{...l===0?{autoUpgrade:{otherSkill:"RISING_RAPTOR",trait:"BEAST_CHAKRA_MASTERY"}}:{autoDowngrade:{otherSkill:"TRUE_STRIKE",trait:"BEAST_CHAKRA_MASTERY"}},form:{requiredForm:"raptor",nextForm:"coeurl"},ball:{potency:l===0?[["NEVER",460],["MELEE_MASTERY_MNK",500]]:540,rsc:"RAPTORS_FURY"},applicationDelay:a,potency:i})});[["SNAP_PUNCH",6,.76,[["NEVER",230],["MELEE_MASTERY_MNK",270]]],["POUNCING_COEURL",92,1.02,310]].forEach(([e,t,a,i],l)=>{Kn(e,t,{...l===0?{autoUpgrade:{otherSkill:"POUNCING_COEURL",trait:"BEAST_CHAKRA_MASTERY"}}:{autoDowngrade:{otherSkill:"SNAP_PUNCH",trait:"BEAST_CHAKRA_MASTERY"}},form:{requiredForm:"coeurl",nextForm:"opo"},ball:{potency:l===0?[["NEVER",380],["MELEE_MASTERY_MNK",420]]:460,rsc:"COEURLS_FURY"},positional:{potency:l===0?[["NEVER",290],["MELEE_MASTERY_MNK",330]]:370,ballPotency:l===0?[["NEVER",440],["MELEE_MASTERY_MNK",480]]:520,location:"flank"},applicationDelay:a,potency:i})});Kn("DRAGON_KICK",50,{applicationDelay:1.29,potency:[["NEVER",240],["MELEE_MASTERY_MNK",280],["MELEE_MASTERY_II_MNK",320]],form:{nextForm:"raptor"},highlightIf:e=>e.canDoForm("opo")&&!e.hasResourceAvailable("OPO_OPOS_FURY"),onConfirm:e=>e.resources.get("OPO_OPOS_FURY").gain(1)});Kn("TWIN_SNAKES",18,{applicationDelay:.84,potency:[["NEVER",340],["MELEE_MASTERY_MNK",380],["MELEE_MASTERY_II_MNK",420]],form:{requiredForm:"raptor",nextForm:"coeurl"},highlightIf:e=>!e.hasResourceAvailable("RAPTORS_FURY"),onConfirm:e=>e.resources.get("RAPTORS_FURY").gain(1)});Kn("DEMOLISH",30,{applicationDelay:1.6,potency:[["NEVER",280],["MELEE_MASTERY_MNK",320],["MELEE_MASTERY_II_MNK",360]],form:{requiredForm:"coeurl",nextForm:"opo"},positional:{potency:[["NEVER",340],["MELEE_MASTERY_MNK",380],["MELEE_MASTERY_II_MNK",420]],location:"rear"},highlightIf:e=>!e.hasResourceAvailable("COEURLS_FURY"),onConfirm:e=>e.resources.get("COEURLS_FURY").gain(2)});[["ARM_OF_THE_DESTROYER",26,.54,110],["SHADOW_OF_THE_DESTROYER",82,.4,120]].forEach(([e,t,a,i],l)=>{Kn(e,t,{...l===0?{autoUpgrade:{otherSkill:"SHADOW_OF_THE_DESTROYER",trait:"ARM_OF_THE_DESTROYER_MASTERY"}}:{autoDowngrade:{otherSkill:"ARM_OF_THE_DESTROYER",trait:"ARM_OF_THE_DESTROYER_MASTERY"}},applicationDelay:a,potency:i,falloff:0,form:{nextForm:"raptor"},highlightIf:d=>d.canDoForm("opo"),jobPotencyModifiers:l===1?d=>d.hasResourceAvailable("OPO_OPO_FORM")?[X.AutoCrit]:[]:void 0})});Kn("ROCKBREAKER",30,{applicationDelay:.94,potency:150,falloff:0,form:{requiredForm:"raptor",nextForm:"coeurl"}});Kn("FOUR_POINT_FURY",45,{applicationDelay:.97,potency:140,falloff:0,form:{requiredForm:"coeurl",nextForm:"opo"}});const KD=e=>{const t=Ll.map(a=>e.resources.get(a).availableAmount());return e.hasResourceAvailable("LUNAR_NADI")&&e.hasResourceAvailable("SOLAR_NADI")&&t.every(a=>a>0)},US=e=>{const t=Ll.map(l=>e.resources.get(l).availableAmount()),a=t[0];return a>0&&t[1]===a&&t[2]===a&&!(e.hasResourceAvailable("LUNAR_NADI")&&e.hasResourceAvailable("SOLAR_NADI"))},xS=e=>{const t=Ll.map(i=>e.resources.get(i).availableAmount()),a=[!1,!1,!1];return t.forEach(i=>{console.assert(i<4,"beast chakra had invalid value"),i<4&&i>0&&(a[i-1]=!0)}),a.every(i=>i)&&t.every(i=>i>0)&&!(e.hasResourceAvailable("LUNAR_NADI")&&e.hasResourceAvailable("SOLAR_NADI"))},VD=e=>{const t=Ll.map(a=>e.resources.get(a).availableAmount());return!US(e)&&!xS(e)&&t.every(a=>a>0)&&!(e.hasResourceAvailable("LUNAR_NADI")&&e.hasResourceAvailable("SOLAR_NADI"))},M2=e=>!KD(e)&&!US(e)&&!xS(e)&&!VD(e),ud=[{newSkill:"MASTERFUL_BLITZ",condition:M2},{newSkill:"ELIXIR_FIELD",condition:US},{newSkill:"FLINT_STRIKE",condition:xS},{newSkill:"CELESTIAL_REVOLUTION",condition:VD},{newSkill:"TORNADO_KICK",condition:KD}],Nf=e=>{Ll.forEach(t=>e.tryConsumeResource(t,!0)),e.setForm("formless")},WD=e=>t=>t.resources.get(e==="lunar"?"LUNAR_NADI":"SOLAR_NADI").gain(1);Kn("MASTERFUL_BLITZ",60,{applicationDelay:0,replaceIf:ud,validateAttempt:e=>!1});[["TORNADO_KICK",60,1.69,1200],["PHANTOM_RUSH",90,.4,1500]].forEach(([e,t,a,i],l)=>{Kn(e,t,{...l===0?{autoUpgrade:{otherSkill:"PHANTOM_RUSH",trait:"TORNADO_KICK_MASTERY"}}:{autoDowngrade:{otherSkill:"TORNADO_KICK",trait:"TORNADO_KICK_MASTERY"}},startOnHotbar:!1,applicationDelay:a,replaceIf:ud,highlightIf:d=>!0,potency:i,falloff:.35,onConfirm:ke(Nf,d=>{d.tryConsumeResource("LUNAR_NADI"),d.tryConsumeResource("SOLAR_NADI")})})});[["ELIXIR_FIELD",60,1.07,800],["ELIXIR_BURST",92,1.42,900]].forEach(([e,t,a,i],l)=>{Kn(e,t,{...l===0?{autoUpgrade:{otherSkill:"ELIXIR_BURST",trait:"BEAST_CHAKRA_MASTERY"}}:{autoDowngrade:{otherSkill:"ELIXIR_FIELD",trait:"BEAST_CHAKRA_MASTERY"}},startOnHotbar:!1,applicationDelay:a,replaceIf:ud,highlightIf:d=>!0,potency:i,falloff:.35,onConfirm:ke(Nf,WD("lunar"))})});Kn("CELESTIAL_REVOLUTION",60,{startOnHotbar:!1,applicationDelay:.89,replaceIf:ud,highlightIf:e=>!0,potency:600,onConfirm:ke(Nf,e=>e.resources.get(e.hasResourceAvailable("LUNAR_NADI")?"SOLAR_NADI":"LUNAR_NADI").gain(1))});[["FLINT_STRIKE",60,.53,800],["RISING_PHOENIX",86,.76,900]].forEach(([e,t,a,i],l)=>{Kn(e,t,{...l===0?{autoUpgrade:{otherSkill:"RISING_PHOENIX",trait:"FLINT_STRIKE_MASTERY"}}:{autoDowngrade:{otherSkill:"FLINT_STRIKE",trait:"FLINT_STRIKE_MASTERY"}},startOnHotbar:!1,applicationDelay:a,replaceIf:ud,highlightIf:d=>!0,potency:i,falloff:.35,onConfirm:ke(Nf,WD("solar"))})});Kn("SIX_SIDED_STAR",80,{recastTime:5,applicationDelay:.62,potency:[["NEVER",710],["MELEE_MASTERY_II_MNK",780]],onConfirm:e=>{e.tryConsumeResource("CHAKRA",!0),e.gainStatus("SIX_SIDED_STAR")},jobPotencyModifiers:e=>{const t=e.resources.get("CHAKRA").availableAmount();return t>0?[{kind:"adder",additiveAmount:80*t,source:k.SSS_CHAKRA}]:[]}});Kn("FORM_SHIFT",52,{applicationDelay:0,onConfirm:e=>e.setForm("formless")});function kS(e,t,a){return on("MNK",e,t,{autoUpgrade:a.autoUpgrade,autoDowngrade:a.autoDowngrade,recastTime:1,applicationDelay:0,replaceIf:[{newSkill:a.spender,condition:i=>i.resources.get("CHAKRA").available(5)}],validateAttempt:i=>!i.resources.get("CHAKRA").available(5),onConfirm:i=>i.resources.get("CHAKRA").gain(i.isInCombat()?1:5)})}kS("FORBIDDEN_MEDITATION",54,{spender:"THE_FORBIDDEN_CHAKRA"});kS("INSPIRITED_MEDITATION",40,{autoUpgrade:{otherSkill:"ENLIGHTENED_MEDITATION",trait:"HOWLING_FIST_MASTERY"},spender:"HOWLING_FIST"});kS("ENLIGHTENED_MEDITATION",74,{autoDowngrade:{otherSkill:"ENLIGHTENED_MEDITATION",trait:"HOWLING_FIST_MASTERY"},spender:"ENLIGHTENMENT"});[["HOWLING_FIST",40,1.16,100,"cd_THE_FORBIDDEN_CHAKRA"],["ENLIGHTENMENT",74,.76,160,"cd_ENLIGHTENMENT"]].forEach(([e,t,a,i,l],r)=>{gf(e,t,l,{...r===0?{autoUpgrade:{otherSkill:"ENLIGHTENMENT",trait:"HOWLING_FIST_MASTERY"}}:{autoDowngrade:{otherSkill:"HOWLING_FIST",trait:"HOWLING_FIST_MASTERY"}},startOnHotbar:!1,applicationDelay:a,cooldown:1,potency:i,falloff:0,requiresCombat:!0,highlightIf:E=>E.resources.get("CHAKRA").available(5),validateAttempt:E=>E.resources.get("CHAKRA").available(5),onConfirm:E=>E.consumeFiveChakra()})});gf("THE_FORBIDDEN_CHAKRA",54,"cd_THE_FORBIDDEN_CHAKRA",{startOnHotbar:!1,replaceIf:[{newSkill:"FORBIDDEN_MEDITATION",condition:e=>!e.resources.get("CHAKRA").available(5)}],applicationDelay:1.48,cooldown:1,potency:[["NEVER",310],["MELEE_MASTERY_MNK",400]],requiresCombat:!0,highlightIf:e=>e.resources.get("CHAKRA").available(5),validateAttempt:e=>e.resources.get("CHAKRA").available(5),onConfirm:e=>e.consumeFiveChakra()});Ic("PERFECT_BALANCE",50,"cd_PERFECT_BALANCE",{rscType:"PERFECT_BALANCE",applicationDelay:0,cooldown:40,maxCharges:2,requiresCombat:!0,validateAttempt:e=>!Ll.map(t=>e.hasResourceAvailable(t)).some(t=>t),onConfirm:e=>e.startPB()});Ic("RIDDLE_OF_FIRE",68,"cd_RIDDLE_OF_FIRE",{rscType:"RIDDLE_OF_FIRE",applicationDelay:0,cooldown:60,replaceIf:[{newSkill:"FIRES_REPLY",condition:e=>e.hasResourceAvailable("FIRES_RUMINATION")}],onConfirm:e=>e.gainStatus("FIRES_RUMINATION")});Ic("BROTHERHOOD",70,"cd_BROTHERHOOD",{rscType:"BROTHERHOOD",applicationDelay:.76,cooldown:120,onApplication:e=>{e.gainStatus("MEDITATIVE_BROTHERHOOD"),e.resources.set(new sa("CHAKRA",10,e.resources.get("CHAKRA").availableAmount())),e.addEvent(new ve("restore BH max stacks",Vt("MNK","BROTHERHOOD").maxTimeout,()=>e.resources.set(new sa("CHAKRA",5,e.resources.get("CHAKRA").availableAmount()))))}});Ic("RIDDLE_OF_WIND",72,"cd_RIDDLE_OF_WIND",{rscType:"RIDDLE_OF_WIND",applicationDelay:0,cooldown:90,replaceIf:[{newSkill:"WINDS_REPLY",condition:e=>e.hasResourceAvailable("WINDS_RUMINATION")}],onConfirm:e=>e.gainStatus("WINDS_RUMINATION")});gf("THUNDERCLAP",35,"cd_THUNDERCLAP",{applicationDelay:0,cooldown:30,maxCharges:3,animationLock:Wt,drawsAggro:!0});Ic("MANTRA",42,"cd_MANTRA",{rscType:"MANTRA",applicationDelay:1.5,cooldown:90});Ic("RIDDLE_OF_EARTH",64,"cd_RIDDLE_OF_EARTH",{rscType:"RIDDLE_OF_EARTH",applicationDelay:0,cooldown:120,healingPotency:100,replaceIf:[{newSkill:"EARTHS_REPLY",condition:e=>e.hasResourceAvailable("EARTHS_RUMINATION")}],onConfirm:e=>e.gainStatus("EARTHS_RUMINATION")});gf("EARTHS_REPLY",64,"cd_EARTHS_REPLY",{startOnHotbar:!1,applicationDelay:1.07,cooldown:1,healingPotency:300,highlightIf:e=>e.hasResourceAvailable("EARTHS_RUMINATION"),validateAttempt:e=>e.hasResourceAvailable("EARTHS_RUMINATION"),onConfirm:e=>e.tryConsumeResource("EARTHS_RUMINATION")});Kn("WINDS_REPLY",96,{startOnHotbar:!1,applicationDelay:1.2,potency:1040,falloff:.35,highlightIf:e=>e.hasResourceAvailable("WINDS_RUMINATION"),validateAttempt:e=>e.hasResourceAvailable("WINDS_RUMINATION"),onConfirm:e=>e.tryConsumeResource("WINDS_RUMINATION")});Kn("FIRES_REPLY",100,{startOnHotbar:!1,applicationDelay:1.42,potency:1400,falloff:.35,highlightIf:e=>e.hasResourceAvailable("FIRES_RUMINATION"),validateAttempt:e=>e.hasResourceAvailable("FIRES_RUMINATION"),onConfirm:e=>{e.tryConsumeResource("FIRES_RUMINATION"),e.setForm("formless")}});Object.keys(PT).forEach(e=>Ft(e,`VPR/${ze[e].name}.png`));const L2=Object.keys(PT);class H2 extends Xt{jobSpecificOtherTargetedBuffViewProps(){return[]}jobSpecificSelfTargetedBuffViewProps(){return L2.map(t=>this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){var I,C;const a=this.state.resources,i=a.get("VPR_COMBO"),l=a.get("VPR_AOE_COMBO"),r=["HUNTERS_COIL_READY","SWIFTSKINS_COIL_READY","HUNTERS_DEN_READY","SWIFTSKINS_DEN_READY"],d=a.get("RATTLING_COIL").availableAmount(),E=a.get("SERPENT_OFFERINGS").availableAmount(),h=a.get("ANGUINE_TRIBUTE").availableAmount(),A=i.available(1)?(I=i.pendingChange)==null?void 0:I.timeTillEvent:l.available(1)?(C=l.pendingChange)==null?void 0:C.timeTillEvent:void 0,R=r.filter(_=>a.get(_).available(1)),T=R.length>0?Math.max(...R.map(_=>a.get(_).pendingChange.timeTillEvent)):void 0,S=[{kind:"bar",name:g({en:"Dual Wield Combo Timer",zh:""}),color:t.vpr.vprComboTimer,progress:A?A/30:0,valueString:(A==null?void 0:A.toFixed(3))??"N/A"},{kind:"bar",name:g({en:"Twinblade Combo Timer",zh:""}),color:t.vpr.vprComboTimer,progress:T?T/30:0,valueString:(T==null?void 0:T.toFixed(3))??"N/A"},{kind:"counter",name:Xe("RATTLING_COIL"),color:t.vpr.rattlingCoil,currentStacks:d,maxStacks:a.get("RATTLING_COIL").maxValue}];return this.state.hasTraitUnlocked("SERPENTS_LINEAGE")&&S.push({kind:"bar",name:Xe("SERPENT_OFFERINGS"),color:E>=50?t.vpr.anguineTribute:t.vpr.serpentOfferings,progress:E/100,valueString:E.toFixed(0)},{kind:"counter",name:Xe("ANGUINE_TRIBUTE"),color:t.vpr.anguineTribute,currentStacks:h,maxStacks:a.get("ANGUINE_TRIBUTE").maxValue}),S}}const dt=(e,t,a)=>{qe("VPR",e,t,a??{})};dt("RATTLING_COIL",3,{warnOnOvercap:!0});dt("SERPENT_OFFERINGS",100,{warnOnOvercap:!0});dt("ANGUINE_TRIBUTE",5,{timeout:30});dt("HUNTERS_INSTINCT",1,{timeout:40});dt("SWIFTSCALED",1,{timeout:40});dt("HONED_STEEL",1,{timeout:60});dt("HONED_REAVERS",1,{timeout:60});dt("FLANKSTUNG_VENOM",1,{timeout:60});dt("HINDSTUNG_VENOM",1,{timeout:60});dt("FLANKSBANE_VENOM",1,{timeout:60});dt("HINDSBANE_VENOM",1,{timeout:60});dt("GRIMSKINS_VENOM",1,{timeout:60});dt("GRIMHUNTERS_VENOM",1,{timeout:60});dt("HUNTERS_VENOM",1,{timeout:30});dt("SWIFTSKINS_VENOM",1,{timeout:30});dt("POISED_FOR_TWINFANG",1,{timeout:60});dt("POISED_FOR_TWINBLOOD",1,{timeout:60});dt("FELLHUNTERS_VENOM",1,{timeout:30});dt("FELLSKINS_VENOM",1,{timeout:30});dt("READY_TO_REAWAKEN",1,{timeout:30,warnOnTimeout:!0});dt("REAWAKENED",1,{timeout:30,warnOnTimeout:!0});dt("DEATH_RATTLE_READY",1);dt("COIL_OGCD_READY",2);dt("DEN_OGCD_READY",2);dt("UNCOILED_OGCD_READY",2);dt("HUNTERS_COIL_READY",1,{timeout:30,warnOnTimeout:!0});dt("HUNTERS_DEN_READY",1,{timeout:30,warnOnTimeout:!0});dt("SWIFTSKINS_COIL_READY",1,{timeout:30,warnOnTimeout:!0});dt("SWIFTSKINS_DEN_READY",1,{timeout:30,warnOnTimeout:!0});dt("LAST_LASH_READY",1);dt("LEGACY_READY",4);dt("VPR_COMBO",4,{timeout:30});dt("VPR_AOE_COMBO",2,{timeout:30});dt("REAWAKEN_COMBO",4);const XD=["DEATH_RATTLE_READY","LAST_LASH_READY","COIL_OGCD_READY","UNCOILED_OGCD_READY","HUNTERS_VENOM","SWIFTSKINS_VENOM","POISED_FOR_TWINFANG","POISED_FOR_TWINBLOOD","DEN_OGCD_READY","LEGACY_READY"],qD=["FLANKSBANE_VENOM","FLANKSTUNG_VENOM"],ZD=["HINDSBANE_VENOM","HINDSTUNG_VENOM"],uc=[...qD,...ZD];class U2 extends qt{constructor(t){super(t);const a=this.hasTraitUnlocked("ENHANCED_SLITHER")?3:2;this.cooldowns.set(new Ge("cd_SLITHER",30,a,a));const i=this.hasTraitUnlocked("ENHANCED_VIPERS_RATTLE")?3:2,l=this.hasTraitUnlocked("ENHANCED_SERPENTS_LINEAGE")?5:4;this.resources.set(new sa("RATTLING_COIL",i,0,!0)),this.resources.set(new sa("ANGUINE_TRIBUTE",l,0)),this.registerRecurringEvents()}inherentSpeedModifier(){return 15}jobSpecificAddDamageBuffCovers(t,a){this.hasResourceAvailable("HUNTERS_INSTINCT")&&t.addBuff(x.HuntersInstinct)}jobSpecificAddSpeedBuffCovers(t,a){this.hasResourceAvailable("SWIFTSCALED")&&a.cdName==="cd_GCD"&&t.addBuff(x.Swiftscaled)}get statusPropsGenerator(){return new H2(this)}getSwiftscaledModifier(){return this.hasResourceAvailable("SWIFTSCALED")?this.inherentSpeedModifier():0}isNoReawakenComboAt(t){return!this.hasResourceAvailable("REAWAKENED")&&this.hasResourceExactly("VPR_COMBO",t)}isNoReawakenAoeComboAt(t){return!this.hasResourceAvailable("REAWAKENED")&&this.hasResourceExactly("VPR_AOE_COMBO",t)}setLegacy(t){this.hasTraitUnlocked("SERPENTS_LEGACY")&&this.resources.get("LEGACY_READY").overrideCurrentValue(t)}gainOfferings(t){this.hasTraitUnlocked("SERPENTS_LINEAGE")&&this.resources.get("SERPENT_OFFERINGS").gain(t)}processCombo(t){if(t==="WRITHING_SNAP"||t==="UNCOILED_FURY")return;const i=["REAWAKEN","FIRST_GENERATION","SECOND_GENERATION","THIRD_GENERATION","FOURTH_GENERATION"].indexOf(t);if(i!==-1){this.setComboState("REAWAKEN_COMBO",(i+1)%5);return}const l=this.resources.get("VPR_COMBO").availableAmount(),r=this.resources.get("VPR_AOE_COMBO").availableAmount(),[d,E]=new Map([["STEEL_FANGS",[1,0]],["REAVING_FANGS",[1,0]],["HUNTERS_STING",[2,0]],["SWIFTSKINS_STING",[3,0]],["FLANKSTING_STRIKE",[0,0]],["FLANKSBANE_FANG",[0,0]],["HINDSTING_STRIKE",[0,0]],["HINDSBANE_FANG",[0,0]],["STEEL_MAW",[0,1]],["REAVING_MAW",[0,1]],["HUNTERS_BITE",[0,2]],["SWIFTSKINS_BITE",[0,2]],["JAGGED_MAW",[0,0]],["BLOODIED_MAW",[0,0]]]).get(t)??[l,r];d!==l&&this.setComboState("VPR_COMBO",d),E!==r&&this.setComboState("VPR_AOE_COMBO",E),this.setComboState("REAWAKEN_COMBO",0)}cancelVicewinderCombo(t){t!=="SWIFTSKINS_COIL"&&this.tryConsumeResource("HUNTERS_COIL_READY"),t!=="HUNTERS_COIL"&&this.tryConsumeResource("SWIFTSKINS_COIL_READY"),t!=="SWIFTSKINS_DEN"&&this.tryConsumeResource("HUNTERS_DEN_READY"),t!=="HUNTERS_DEN"&&this.tryConsumeResource("SWIFTSKINS_DEN_READY")}consumeAnguine(){this.tryConsumeResource("ANGUINE_TRIBUTE"),this.hasResourceAvailable("ANGUINE_TRIBUTE")||this.cancelReawaken()}cancelReawaken(){this.tryConsumeResource("LEGACY_READY",!0),this.tryConsumeResource("ANGUINE_TRIBUTE",!0),this.tryConsumeResource("REAWAKENED"),this.setComboState("REAWAKEN_COMBO",0)}applyExtendedStatus(t,a){uc.includes(t)&&uc.forEach(r=>r!==t&&this.tryConsumeResource(r));const i=this.resources.get(t),l=Vt("VPR",t);this.hasResourceAvailable(t)?l.maxTimeout>0&&i.overrideTimer(this,l.maxTimeout+a):(i.gain(1),l.maxTimeout>0&&this.enqueueResourceDrop(t,l.maxTimeout+a))}}const En=(e,t,a)=>{var l,r;const i=(r=(l=a.replaceIf)==null?void 0:l.find(d=>d.newSkill===e))==null?void 0:r.condition;return on("VPR",e,t,{...a,recastTime:d=>d.config.adjustedSksGCD(a.baseRecastTime??2.5,d.getSwiftscaledModifier()),validateAttempt:Qu(a.validateAttempt,i),onConfirm:ke(d=>{e!=="UNCOILED_FURY"&&e!=="WRITHING_SNAP"&&d.cancelVicewinderCombo(e),XD.forEach(E=>{d.tryConsumeResource(E,!0)&&N.reportWarning({kind:"overwrite",rsc:E})})},a.onConfirm,a.extendedStatus?d=>d.applyExtendedStatus(a.extendedStatus,a.applicationDelay):void 0,d=>d.processCombo(e)),jobPotencyModifiers:d=>{var h;const E=((h=a.jobPotencyModifiers)==null?void 0:h.call(a,d))??[];return d.hasResourceAvailable("HUNTERS_INSTINCT")&&E.push(X.HuntersInstinct),E}})},Fo=(e,t,a,i)=>lt("VPR",e,t,a,{...i,jobPotencyModifiers:l=>{var d;const r=((d=i.jobPotencyModifiers)==null?void 0:d.call(i,l))??[];return l.hasResourceAvailable("HUNTERS_INSTINCT")&&r.push(X.HuntersInstinct),r}}),QD={newSkill:"FIRST_GENERATION",condition:e=>e.hasResourceAvailable("REAWAKENED")},$D={newSkill:"SECOND_GENERATION",condition:e=>e.hasResourceAvailable("REAWAKENED")},dc=[QD];dc.push(...["STEEL_FANGS","HUNTERS_STING","FLANKSTING_STRIKE","HINDSTING_STRIKE"].map((e,t)=>({newSkill:e,condition:a=>a.isNoReawakenComboAt(t)})));const hc=[$D];hc.push(...["REAVING_FANGS","SWIFTSKINS_STING","FLANKSBANE_FANG","HINDSBANE_FANG"].map((e,t)=>({newSkill:e,condition:a=>a.isNoReawakenComboAt(t)})));const pf=[QD];pf.push(...["STEEL_MAW","HUNTERS_BITE","JAGGED_MAW"].map((e,t)=>({newSkill:e,condition:a=>a.isNoReawakenAoeComboAt(t)})));const Cf=[$D];Cf.push(...["REAVING_MAW","SWIFTSKINS_BITE","BLOODIED_MAW"].map((e,t)=>({newSkill:e,condition:a=>a.isNoReawakenAoeComboAt(t)})));const JD=[{newSkill:"HUNTERS_COIL",condition:e=>!e.hasResourceAvailable("REAWAKENED")},{newSkill:"THIRD_GENERATION",condition:e=>e.hasResourceAvailable("REAWAKENED")}],ey=[{newSkill:"SWIFTSKINS_COIL",condition:e=>!e.hasResourceAvailable("REAWAKENED")},{newSkill:"FOURTH_GENERATION",condition:e=>e.hasResourceAvailable("REAWAKENED")}],Of=[{newSkill:"SERPENTS_TAIL",condition:e=>!XD.some(t=>e.hasResourceAvailable(t))},{newSkill:"DEATH_RATTLE",condition:e=>e.hasResourceAvailable("DEATH_RATTLE_READY")},{newSkill:"LAST_LASH",condition:e=>e.hasResourceAvailable("LAST_LASH_READY")},{newSkill:"FIRST_LEGACY",condition:e=>e.hasResourceExactly("LEGACY_READY",1)},{newSkill:"SECOND_LEGACY",condition:e=>e.hasResourceExactly("LEGACY_READY",2)},{newSkill:"THIRD_LEGACY",condition:e=>e.hasResourceExactly("LEGACY_READY",3)},{newSkill:"FOURTH_LEGACY",condition:e=>e.hasResourceExactly("LEGACY_READY",4)}],ty=[{newSkill:"TWINFANG",condition:e=>!["COIL_OGCD_READY","UNCOILED_OGCD_READY","DEN_OGCD_READY"].some(t=>e.hasResourceAvailable(t))},{newSkill:"TWINFANG_BITE",condition:e=>e.hasResourceAvailable("COIL_OGCD_READY")},{newSkill:"TWINFANG_THRESH",condition:e=>e.hasResourceAvailable("DEN_OGCD_READY")},{newSkill:"UNCOILED_TWINFANG",condition:e=>e.hasResourceAvailable("UNCOILED_OGCD_READY")}],ny=[{newSkill:"TWINBLOOD",condition:e=>!["COIL_OGCD_READY","UNCOILED_OGCD_READY","DEN_OGCD_READY"].some(t=>e.hasResourceAvailable(t))},{newSkill:"TWINBLOOD_BITE",condition:e=>e.hasResourceAvailable("COIL_OGCD_READY")},{newSkill:"TWINBLOOD_THRESH",condition:e=>e.hasResourceAvailable("DEN_OGCD_READY")},{newSkill:"UNCOILED_TWINBLOOD",condition:e=>e.hasResourceAvailable("UNCOILED_OGCD_READY")}],ay=[{newSkill:"REAWAKEN",condition:e=>!e.hasResourceAvailable("ANGUINE_TRIBUTE")},{newSkill:"OUROBOROS",condition:e=>e.hasResourceAvailable("ANGUINE_TRIBUTE")}];En("WRITHING_SNAP",15,{applicationDelay:.488,potency:200});En("STEEL_FANGS",1,{replaceIf:dc,applicationDelay:1.158,potency:[["NEVER",180],["MELEE_MASTERY_VPR",200]],jobPotencyModifiers:e=>e.hasResourceAvailable("HONED_STEEL")?[X.HonedST]:[],highlightIf:e=>e.hasResourceAvailable("HONED_STEEL"),onConfirm:e=>e.tryConsumeResource("HONED_STEEL"),extendedStatus:"HONED_REAVERS"});En("REAVING_FANGS",10,{replaceIf:hc,applicationDelay:1.293,potency:[["NEVER",180],["MELEE_MASTERY_VPR",200]],jobPotencyModifiers:e=>e.hasResourceAvailable("HONED_REAVERS")?[X.HonedST]:[],highlightIf:e=>e.hasResourceAvailable("HONED_REAVERS"),onConfirm:e=>e.tryConsumeResource("HONED_REAVERS"),extendedStatus:"HONED_STEEL"});En("HUNTERS_STING",5,{startOnHotbar:!1,replaceIf:dc,applicationDelay:.89,potency:[["NEVER",240],["MELEE_MASTERY_VPR",300]],highlightIf:e=>!uc.some(t=>e.hasResourceAvailable(t))||qD.some(t=>e.hasResourceAvailable(t)),extendedStatus:"HUNTERS_INSTINCT"});En("SWIFTSKINS_STING",20,{startOnHotbar:!1,replaceIf:hc,applicationDelay:1.16,potency:[["NEVER",280],["MELEE_MASTERY_VPR",300]],highlightIf:e=>!uc.some(t=>e.hasResourceAvailable(t))||ZD.some(t=>e.hasResourceAvailable(t)),extendedStatus:"SWIFTSCALED"});const x2=[["FLANKSTING_STRIKE",1.649,"flank","FLANKSTUNG_VENOM","HINDSTUNG_VENOM",dc],["FLANKSBANE_FANG",1.604,"flank","FLANKSBANE_VENOM","HINDSBANE_VENOM",hc],["HINDSTING_STRIKE",.98,"rear","HINDSTUNG_VENOM","FLANKSBANE_VENOM",dc],["HINDSBANE_FANG",1.203,"rear","HINDSBANE_VENOM","FLANKSTUNG_VENOM",hc]];x2.forEach(([e,t,a,i,l,r])=>{En(e,30,{startOnHotbar:!1,replaceIf:r,applicationDelay:t,potency:[["NEVER",320],["MELEE_MASTERY_II_VPR",340]],positional:{potency:[["NEVER",380],["MELEE_MASTERY_II_VPR",400]],location:a},jobPotencyModifiers:d=>d.hasResourceAvailable(i)?[X.VenomST]:[],highlightIf:d=>!uc.some(E=>d.hasResourceAvailable(E))||d.hasResourceAvailable(i),onConfirm:d=>{d.gainStatus("DEATH_RATTLE_READY"),d.resources.get("SERPENT_OFFERINGS").gain(10),uc.filter(E=>E!==i).some(E=>d.hasResourceAvailable(E))&&N.reportWarning({kind:"custom",en:"incorrect combo ender!"})},extendedStatus:l})});En("HUNTERS_COIL",65,{replaceIf:JD,applicationDelay:.982,potency:570,positional:{potency:620,location:"flank"},baseRecastTime:3,highlightIf:e=>e.hasResourceAvailable("HUNTERS_COIL_READY"),validateAttempt:e=>e.hasResourceAvailable("HUNTERS_COIL_READY"),onConfirm:e=>{e.gainOfferings(5),e.hasTraitUnlocked("VIPERS_BITE")&&(e.gainStatus("HUNTERS_VENOM"),e.gainStatus("COIL_OGCD_READY",2)),e.hasResourceAvailable("SWIFTSKINS_COIL_READY")&&e.gainStatus("SWIFTSKINS_COIL_READY")},extendedStatus:"HUNTERS_INSTINCT"});En("SWIFTSKINS_COIL",65,{replaceIf:ey,applicationDelay:1.473,potency:570,positional:{potency:620,location:"rear"},baseRecastTime:3,highlightIf:e=>e.hasResourceAvailable("SWIFTSKINS_COIL_READY"),validateAttempt:e=>e.hasResourceAvailable("SWIFTSKINS_COIL_READY"),onConfirm:e=>{e.gainOfferings(5),e.hasTraitUnlocked("VIPERS_BITE")&&(e.gainStatus("SWIFTSKINS_VENOM"),e.gainStatus("COIL_OGCD_READY",2)),e.hasResourceAvailable("HUNTERS_COIL_READY")&&e.gainStatus("HUNTERS_COIL_READY")},extendedStatus:"SWIFTSCALED"});En("REAWAKEN",90,{replaceIf:ay,applicationDelay:.625,potency:750,falloff:.65,baseRecastTime:2.2,highlightIf:e=>e.hasResourceAvailable("SERPENT_OFFERINGS",50)||e.hasResourceAvailable("READY_TO_REAWAKEN"),validateAttempt:e=>e.hasResourceAvailable("SERPENT_OFFERINGS",50)||e.hasResourceAvailable("READY_TO_REAWAKEN"),onConfirm:e=>{e.tryConsumeResource("READY_TO_REAWAKEN")||e.resources.get("SERPENT_OFFERINGS").consume(50),e.gainStatus("ANGUINE_TRIBUTE",e.resources.get("ANGUINE_TRIBUTE").maxValue),e.gainStatus("REAWAKENED"),e.resources.get("REAWAKENED").removeTimer(),e.resources.addResourceEvent({rscType:"REAWAKENED",name:"cancel reawaken",delay:Vt("VPR","REAWAKENED").maxTimeout,fnOnRsc:()=>e.cancelReawaken()})}});En("OUROBOROS",96,{startOnHotbar:!1,replaceIf:ay,applicationDelay:2.313,potency:1150,falloff:.65,baseRecastTime:3,highlightIf:e=>e.hasResourceExactly("ANGUINE_TRIBUTE",1),onConfirm:e=>e.cancelReawaken()});En("VICEWINDER",65,{applicationDelay:.581,potency:500,secondaryCooldown:{cdName:"cd_VICEWINDER",cooldown:40,maxCharges:2},baseRecastTime:3,validateAttempt:e=>!e.hasResourceAvailable("REAWAKENED")&&!e.hasResourceAvailable("HUNTERS_COIL_READY")&&!e.hasResourceAvailable("SWIFTSKINS_COIL_READY")&&!e.hasResourceAvailable("HUNTERS_DEN_READY")&&!e.hasResourceAvailable("SWIFTSKINS_DEN_READY"),onConfirm:e=>{e.hasTraitUnlocked("VIPERS_RATTLE")&&e.resources.get("RATTLING_COIL").gain(1),e.gainStatus("HUNTERS_COIL_READY"),e.gainStatus("SWIFTSKINS_COIL_READY")}});En("UNCOILED_FURY",82,{applicationDelay:.804,potency:680,falloff:.6,baseRecastTime:3.5,highlightIf:e=>e.hasResourceAvailable("RATTLING_COIL"),validateAttempt:e=>e.hasResourceAvailable("RATTLING_COIL"),onConfirm:e=>{e.tryConsumeResource("RATTLING_COIL"),e.hasTraitUnlocked("UNCOILED_FANGS")&&(e.gainStatus("POISED_FOR_TWINFANG"),e.gainStatus("UNCOILED_OGCD_READY",2))}});En("STEEL_MAW",25,{replaceIf:pf,applicationDelay:1.091,potency:100,falloff:0,jobPotencyModifiers:e=>e.hasResourceAvailable("HONED_STEEL")?[X.HonedAoE]:[],highlightIf:e=>e.hasResourceAvailable("HONED_STEEL"),onConfirm:e=>e.tryConsumeResource("HONED_STEEL"),extendedStatus:"HONED_REAVERS"});En("REAVING_MAW",35,{replaceIf:Cf,applicationDelay:.908,potency:100,falloff:0,jobPotencyModifiers:e=>e.hasResourceAvailable("HONED_REAVERS")?[X.HonedAoE]:[],highlightIf:e=>e.hasResourceAvailable("HONED_REAVERS"),onConfirm:e=>e.tryConsumeResource("HONED_REAVERS"),extendedStatus:"HONED_STEEL"});En("HUNTERS_BITE",40,{startOnHotbar:!1,replaceIf:pf,applicationDelay:1.134,potency:130,falloff:0,highlightIf:e=>!0,extendedStatus:"HUNTERS_INSTINCT"});En("SWIFTSKINS_BITE",45,{startOnHotbar:!1,replaceIf:Cf,applicationDelay:1.445,potency:130,falloff:0,highlightIf:e=>!0,extendedStatus:"SWIFTSCALED"});En("JAGGED_MAW",50,{startOnHotbar:!1,replaceIf:pf,applicationDelay:1.127,potency:140,falloff:0,jobPotencyModifiers:e=>e.hasResourceAvailable("GRIMSKINS_VENOM")?[X.VenomAoE]:[],highlightIf:e=>e.hasResourceAvailable("GRIMSKINS_VENOM")||!e.hasResourceAvailable("GRIMHUNTERS_VENOM"),onConfirm:e=>{e.gainStatus("LAST_LASH_READY"),e.resources.get("SERPENT_OFFERINGS").gain(10)},extendedStatus:"GRIMHUNTERS_VENOM"});En("BLOODIED_MAW",50,{startOnHotbar:!1,replaceIf:Cf,applicationDelay:.866,potency:140,falloff:0,jobPotencyModifiers:e=>e.hasResourceAvailable("GRIMHUNTERS_VENOM")?[X.VenomAoE]:[],highlightIf:e=>e.hasResourceAvailable("GRIMHUNTERS_VENOM")||!e.hasResourceAvailable("GRIMSKINS_VENOM"),onConfirm:e=>{e.gainStatus("LAST_LASH_READY"),e.resources.get("SERPENT_OFFERINGS").gain(10)},extendedStatus:"GRIMSKINS_VENOM"});En("HUNTERS_DEN",70,{replaceIf:[{newSkill:"HUNTERS_DEN",condition:e=>!e.hasResourceAvailable("REAWAKENED")},{newSkill:"THIRD_GENERATION",condition:e=>e.hasResourceAvailable("REAWAKENED")}],applicationDelay:.569,potency:280,falloff:0,baseRecastTime:3,highlightIf:e=>e.hasResourceAvailable("HUNTERS_DEN_READY"),validateAttempt:e=>e.hasResourceAvailable("HUNTERS_DEN_READY"),onConfirm:e=>{e.gainOfferings(5),e.hasTraitUnlocked("VIPERS_THRESH")&&(e.gainStatus("FELLHUNTERS_VENOM"),e.gainStatus("DEN_OGCD_READY",2)),e.hasResourceAvailable("SWIFTSKINS_DEN_READY")&&e.gainStatus("SWIFTSKINS_DEN_READY")},extendedStatus:"HUNTERS_INSTINCT"});En("SWIFTSKINS_DEN",70,{replaceIf:[{newSkill:"SWIFTSKINS_DEN",condition:e=>!e.hasResourceAvailable("REAWAKENED")},{newSkill:"FOURTH_GENERATION",condition:e=>e.hasResourceAvailable("REAWAKENED")}],applicationDelay:.999,potency:280,falloff:0,baseRecastTime:3,highlightIf:e=>e.hasResourceAvailable("SWIFTSKINS_DEN_READY"),validateAttempt:e=>e.hasResourceAvailable("SWIFTSKINS_DEN_READY"),onConfirm:e=>{e.gainOfferings(5),e.hasTraitUnlocked("VIPERS_THRESH")&&(e.gainStatus("FELLSKINS_VENOM"),e.gainStatus("DEN_OGCD_READY",2)),e.hasResourceAvailable("HUNTERS_DEN_READY")&&e.gainStatus("HUNTERS_DEN_READY")},extendedStatus:"SWIFTSCALED"});En("VICEPIT",70,{applicationDelay:.827,potency:220,secondaryCooldown:{cdName:"cd_VICEWINDER",cooldown:40,maxCharges:2},falloff:0,baseRecastTime:3,validateAttempt:e=>!e.hasResourceAvailable("REAWAKENED")&&!e.hasResourceAvailable("HUNTERS_COIL_READY")&&!e.hasResourceAvailable("SWIFTSKINS_COIL_READY")&&!e.hasResourceAvailable("HUNTERS_DEN_READY")&&!e.hasResourceAvailable("SWIFTSKINS_DEN_READY"),onConfirm:e=>{e.hasTraitUnlocked("VIPERS_RATTLE")&&(N.timeline.duringUntargetable(e.getDisplayTime())||e.resources.get("RATTLING_COIL").gain(1)),e.gainStatus("HUNTERS_DEN_READY"),e.gainStatus("SWIFTSKINS_DEN_READY")}});Fo("SERPENTS_IRE",86,"cd_SERPENTS_IRE",{applicationDelay:0,cooldown:120,requiresCombat:!0,onConfirm:e=>{e.resources.get("RATTLING_COIL").gain(1),e.hasTraitUnlocked("SERPENTS_LINEAGE")&&e.gainStatus("READY_TO_REAWAKEN")}});Fo("SLITHER",40,"cd_SLITHER",{applicationDelay:0,cooldown:30,maxCharges:3,animationLock:Wt});Fo("SERPENTS_TAIL",55,"cd_SERPENTS_TAIL",{replaceIf:Of,applicationDelay:0,cooldown:1,validateAttempt:e=>!1});Fo("DEATH_RATTLE",55,"cd_SERPENTS_TAIL",{startOnHotbar:!1,replaceIf:Of,applicationDelay:1.697,cooldown:1,potency:280,highlightIf:e=>!0,onConfirm:e=>e.tryConsumeResource("DEATH_RATTLE_READY")});Fo("LAST_LASH",60,"cd_SERPENTS_TAIL",{startOnHotbar:!1,replaceIf:Of,applicationDelay:1.226,cooldown:1,potency:100,falloff:0,highlightIf:e=>!0,onConfirm:e=>e.tryConsumeResource("LAST_LASH_READY")});Fo("TWINFANG",75,"cd_TWINFANG",{replaceIf:ty,applicationDelay:0,cooldown:1,validateAttempt:e=>!1});Fo("TWINBLOOD",75,"cd_TWINBLOOD",{replaceIf:ny,applicationDelay:0,cooldown:1,validateAttempt:e=>!1});const k2=[["TWINFANG_BITE",75,"fang",.629,120,void 0,"COIL_OGCD_READY","HUNTERS_VENOM",X.VenomOGCDST,"SWIFTSKINS_VENOM"],["TWINBLOOD_BITE",75,"blood",.714,120,void 0,"COIL_OGCD_READY","SWIFTSKINS_VENOM",X.VenomOGCDST,"HUNTERS_VENOM"],["TWINFANG_THRESH",80,"fang",.666,50,0,"DEN_OGCD_READY","FELLHUNTERS_VENOM",X.VenomOGCDAoE,"FELLSKINS_VENOM"],["TWINBLOOD_THRESH",80,"blood",.764,50,0,"DEN_OGCD_READY","FELLSKINS_VENOM",X.VenomOGCDAoE,"FELLHUNTERS_VENOM"],["UNCOILED_TWINFANG",92,"fang",1.04,120,.6,"UNCOILED_OGCD_READY","POISED_FOR_TWINFANG",X.Poised,"POISED_FOR_TWINBLOOD"],["UNCOILED_TWINBLOOD",92,"blood",.977,120,.6,"UNCOILED_OGCD_READY","POISED_FOR_TWINBLOOD",X.Poised,"POISED_FOR_TWINFANG"]];k2.forEach(([e,t,a,i,l,r,d,E,h,A])=>{Fo(e,t,a==="fang"?"cd_TWINFANG":"cd_TWINBLOOD",{startOnHotbar:!1,replaceIf:a==="fang"?ty:ny,applicationDelay:i,cooldown:1,potency:l,falloff:r,highlightIf:R=>R.hasResourceAvailable(E),jobPotencyModifiers:R=>R.hasResourceAvailable(E)?[h]:[],onConfirm:R=>{R.tryConsumeResource(d),R.hasResourceAvailable(E)||N.reportWarning({kind:"custom",en:`unbuffed twin${a} ability!`}),R.tryConsumeResource(E)&&R.hasResourceAvailable(d)?R.gainStatus(A):R.tryConsumeResource(A)}})});const P2=[["FIRST_GENERATION",1.702,dc],["SECOND_GENERATION",1.473,hc],["THIRD_GENERATION",1.473,JD],["FOURTH_GENERATION",1.473,ey]];P2.forEach(([e,t,a],i)=>{En(e,90,{replaceIf:a,startOnHotbar:!1,applicationDelay:t,potency:420,falloff:.65,baseRecastTime:2,combo:{resource:"REAWAKEN_COMBO",resourceValue:i+1,potency:680},highlightIf:l=>l.hasResourceExactly("REAWAKEN_COMBO",i+1),onConfirm:l=>{l.setLegacy(i+1),l.consumeAnguine()}})});const w2=[["FIRST_LEGACY",1.289],["SECOND_LEGACY",1.065],["THIRD_LEGACY",1.19],["FOURTH_LEGACY",1.065]];w2.forEach(([e,t])=>{Fo(e,100,"cd_SERPENTS_TAIL",{startOnHotbar:!1,replaceIf:Of,applicationDelay:t,cooldown:1,potency:320,falloff:.65,highlightIf:a=>!0,onConfirm:a=>a.tryConsumeResource("LEGACY_READY",!0)})});const iy=["SONG_OF_TORMENT","NIGHTBLOOM","FEATHER_RAIN","MORTAL_FLAME","BREATH_OF_MAGIC","WANING_NOCTURNE","DIAMONDBACK","BRUSH_WITH_DEATH"],G2=Object.keys(BT).filter(e=>!iy.includes(e));Object.keys(BT).forEach(e=>Ft(e,`BLU/${ze[e].name}.png`));class B2 extends Xt{jobSpecificOtherTargetedBuffViewProps(){return[...iy.map(t=>this.makeCommonTimer(t,!1))]}jobSpecificSelfTargetedBuffViewProps(){return G2.map(t=>this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){return[]}}const xn=(e,t,a)=>{qe("BLU",e,t,a??{})};xn("NIGHTBLOOM",1,{timeout:60});xn("SONG_OF_TORMENT",1,{timeout:30});xn("FEATHER_RAIN",1,{timeout:6});xn("WAXING_NOCTURNE",1,{timeout:15});xn("WANING_NOCTURNE",1,{timeout:15});xn("DIAMONDBACK",1,{timeout:10});xn("BRISTLE",1,{timeout:30});xn("WHISTLE",1,{timeout:30});xn("TINGLE",1,{timeout:15});xn("COLD_FOG",1,{timeout:5});xn("TOUCH_OF_FROST",1,{timeout:15});xn("PHANTOM_FLURRY",1,{timeout:5});xn("APOKALYPSIS",1,{timeout:10});xn("WINGED_REPROBATION",4);xn("WINGED_REDEMPTION",1,{timeout:10});xn("BREATH_OF_MAGIC",1,{timeout:60});xn("MORTAL_FLAME",1,{timeout:900});xn("SURPANAKHAS_FURY",4,{timeout:3});xn("BRUSH_WITH_DEATH",1,{timeout:600});class F2 extends qt{constructor(t){super(t),this.cooldowns.set(new Ge("cd_SWIFTCAST",60,1,1)),this.registerRecurringEvents([{groupedEffects:[{effectName:"NIGHTBLOOM",appliedBy:["NIGHTBLOOM"]},{effectName:"SONG_OF_TORMENT",appliedBy:["SONG_OF_TORMENT"]}]},{groupedEffects:[{effectName:"FEATHER_RAIN",appliedBy:["FEATHER_RAIN"]}]},{groupedEffects:[{effectName:"BREATH_OF_MAGIC",appliedBy:["BREATH_OF_MAGIC"]}]},{groupedEffects:[{effectName:"MORTAL_FLAME",appliedBy:["MORTAL_FLAME"]}]},{groupedEffects:[{effectName:"PHANTOM_FLURRY",appliedBy:["PHANTOM_FLURRY"],isGroundTargeted:!0,exclude:!0},{effectName:"APOKALYPSIS",appliedBy:["APOKALYPSIS"],isGroundTargeted:!0,exclude:!0}]}])}get statusPropsGenerator(){return new B2(this)}refreshBuff(t,a){this.addEvent(new ve("gain buff",a,()=>{if(this.resources.get(t).gain(1),this.enqueueResourceDrop(t),t==="WANING_NOCTURNE"||t==="DIAMONDBACK"){const i=Vt("BLU",t).maxTimeout,l=this.resources.get("NOT_ANIMATION_LOCKED").pendingChange;l!==void 0?this.resources.get("NOT_ANIMATION_LOCKED").overrideTimer(this,Math.max(i,l.timeTillEvent)):this.resources.takeResourceLock("NOT_ANIMATION_LOCKED",i)}}))}jobSpecificRegisterRecurringEvents(){const t=()=>{this.handleDoTTick("PHANTOM_FLURRY"),this.getDisplayTime()>=0&&N.reportDotTick(this.time,"PHANTOM_FLURRY"),this.addEvent(new ve("kick tick",1,()=>{t()}))},a=()=>{this.handleDoTTick("APOKALYPSIS"),this.getDisplayTime()>=0&&N.reportDotTick(this.time,"APOKALYPSIS"),this.addEvent(new ve("Apokalypsis tick",1,()=>{a()}))};let i=this.config.timeTillFirstManaTick+this.dotTickOffset;for(;i>1;)i--;this.addEvent(new ve("initial kick tick",i,t));let l=this.config.timeTillFirstManaTick+this.dotTickOffset;for(;l>1;)l--;this.addEvent(new ve("initial Apokalypsis tick",l,a))}cancelChanneledSkills(){this.tryConsumeResource("PHANTOM_FLURRY"),this.tryConsumeResource("APOKALYPSIS")}}const PS=e=>e.hasResourceAvailable("WANING_NOCTURNE")||e.hasResourceAvailable("DIAMONDBACK"),z2=e=>e.hasResourceAvailable("PHANTOM_FLURRY"),j2={newSkill:"END_PHANTOM_FLURRY",condition:e=>z2(e)},zt=(e,t,a)=>{const i=a.basePotency??Number,l=a.aspect??_e.Other,r=a.baseCastTime??0,d=r>0?ke(h=>h.tryConsumeResource("SWIFTCAST"),a.onConfirm):a.onConfirm,E=a.jobPotencyModifiers??(h=>[]);return $a("BLU",e,t,{...a,aspect:l,castTime:h=>h.config.adjustedCastTime(r),potency:a.basePotency,validateAttempt:h=>{var A;return!PS(h)&&(((A=a.validateAttempt)==null?void 0:A.call(a,h))??!0)},jobPotencyModifiers:h=>{const A=E(h);return h.hasResourceAvailable("WAXING_NOCTURNE")&&A.push(X.MoonFlute),i!==0&&h.hasResourceAvailable("BRISTLE")&&A.push(X.Bristle)&&h.tryConsumeResource("BRISTLE"),l===_e.Physical&&h.hasResourceAvailable("WHISTLE")&&A.push(X.Whistle)&&h.tryConsumeResource("WHISTLE"),l===_e.Physical&&e!=="TRIPLE_TRIDENT"&&h.hasResourceAvailable("TINGLE")&&A.push(X.TingleA)&&h.tryConsumeResource("TINGLE"),e==="TRIPLE_TRIDENT"&&h.hasResourceAvailable("TINGLE")&&A.push(X.TingleB)&&h.tryConsumeResource("TINGLE"),e==="CONVICTION_MARCATO"&&h.hasResourceAvailable("WINGED_REDEMPTION")&&A.push(X.WingedRedemption)&&h.tryConsumeResource("WINGED_REDEMPTION"),e==="WINGED_REPROBATION"&&h.resources.get("WINGED_REPROBATION").availableAmount()===3&&A.push(X.WingedReprobation),A},isInstantFn:h=>h.hasResourceAvailable("SWIFTCAST")||r===0,onConfirm:d})},ba=(e,t,a,i)=>lt("BLU",e,t,a,{jobPotencyModifiers:l=>{const r=[];return l.hasResourceAvailable("WAXING_NOCTURNE")&&r.push(X.MoonFlute),r},validateAttempt:l=>{var r;return!PS(l)&&(((r=i.validateAttempt)==null?void 0:r.call(i,l))??!0)},...i});zt("SONIC_BOOM",1,{basePotency:210,baseCastTime:1,manaCost:200,applicationDelay:.5});zt("SHARPENED_KNIFE",1,{aspect:_e.Physical,basePotency:220,baseCastTime:1,manaCost:200,applicationDelay:.5});zt("GOBLIN_PUNCH",1,{aspect:_e.Physical,basePotency:220,baseCastTime:0,manaCost:200,applicationDelay:.5});zt("REVENGE_BLAST",1,{aspect:_e.Physical,basePotency:500,baseCastTime:2,manaCost:200,applicationDelay:.5});zt("WILD_RAGE",1,{aspect:_e.Physical,basePotency:500,baseCastTime:5,manaCost:0,applicationDelay:.5});zt("CONVICTION_MARCATO",1,{basePotency:220,baseCastTime:2,manaCost:200,applicationDelay:.5});zt("WATER_CANNON",1,{basePotency:200,baseCastTime:2,manaCost:200,applicationDelay:.5});zt("HYDRO_PULL",1,{basePotency:220,baseCastTime:2,manaCost:200,applicationDelay:.5});zt("THE_ROSE_OF_DESTRUCTION",1,{basePotency:400,baseCastTime:2,manaCost:300,applicationDelay:.5,secondaryCooldown:{cdName:"cd_THE_ROSE_OF_DESTRUCTION",cooldown:30,maxCharges:1}});zt("MOON_FLUTE",1,{baseCastTime:2,manaCost:500,applicationDelay:.6,onConfirm:e=>{e.hasResourceAvailable("WAXING_NOCTURNE")||(e.refreshBuff("WAXING_NOCTURNE",.6),e.addEvent(new ve("Waxing_Nocturne ended",15.6,()=>{e.hasResourceAvailable("WANING_NOCTURNE")||e.refreshBuff("WANING_NOCTURNE",0)})))}});zt("DIAMONDBACK",1,{baseCastTime:2,manaCost:3e3,applicationDelay:.6,onConfirm:e=>{e.hasResourceAvailable("WAXING_NOCTURNE")&&(e.tryConsumeResource("WAXING_NOCTURNE"),e.refreshBuff("WANING_NOCTURNE",0)),e.refreshBuff("DIAMONDBACK",.6)}});zt("MATRA_MAGIC",1,{basePotency:800,baseCastTime:2,manaCost:200,applicationDelay:.5,secondaryCooldown:{cdName:"cd_MATRA_MAGIC",cooldown:120,maxCharges:1}});zt("SONG_OF_TORMENT",1,{basePotency:50,baseCastTime:2,manaCost:400,applicationDelay:.5,onConfirm:(e,t)=>{const a=[];e.hasResourceAvailable("WAXING_NOCTURNE")&&a.push(X.MoonFlute),e.hasResourceAvailable("BRISTLE")&&a.push(X.Bristle),e.addDoTPotencies({node:t,effectName:"SONG_OF_TORMENT",skillName:"SONG_OF_TORMENT",tickPotency:50,speedStat:"sps",modifiers:a})},onApplication:(e,t)=>{e.applyDoT("SONG_OF_TORMENT",t)}});zt("BREATH_OF_MAGIC",1,{basePotency:0,baseCastTime:2,manaCost:300,applicationDelay:.5,onConfirm:(e,t)=>{const a=[];e.hasResourceAvailable("WAXING_NOCTURNE")&&a.push(X.MoonFlute),e.hasResourceAvailable("BRISTLE")&&a.push(X.Bristle),e.tryConsumeResource("BRISTLE"),e.addDoTPotencies({node:t,effectName:"BREATH_OF_MAGIC",skillName:"BREATH_OF_MAGIC",tickPotency:120,speedStat:"sps",modifiers:a})},onApplication:(e,t)=>{e.applyDoT("BREATH_OF_MAGIC",t)}});zt("MORTAL_FLAME",1,{basePotency:0,baseCastTime:2,manaCost:500,applicationDelay:.5,onConfirm:(e,t)=>{const a=[];e.hasResourceAvailable("WAXING_NOCTURNE")&&a.push(X.MoonFlute),e.hasResourceAvailable("BRISTLE")&&a.push(X.Bristle),e.tryConsumeResource("BRISTLE"),e.addDoTPotencies({node:t,effectName:"MORTAL_FLAME",skillName:"MORTAL_FLAME",tickPotency:40,speedStat:"sps",modifiers:a})},onApplication:(e,t)=>{e.applyDoT("MORTAL_FLAME",t)}});zt("WHISTLE",1,{baseCastTime:1,manaCost:200,applicationDelay:0,onConfirm:e=>{e.tryConsumeResource("BRISTLE"),e.refreshBuff("WHISTLE",0)}});zt("BRISTLE",1,{baseCastTime:1,manaCost:200,applicationDelay:0,onConfirm:e=>{e.tryConsumeResource("WHISTLE"),e.refreshBuff("BRISTLE",0)}});zt("FINAL_STING",1,{aspect:_e.Physical,basePotency:2e3,baseCastTime:2,manaCost:0,applicationDelay:.5,validateAttempt:e=>!e.hasResourceAvailable("BRUSH_WITH_DEATH"),onConfirm:e=>{e.refreshBuff("BRUSH_WITH_DEATH",0)}});zt("TINGLE",1,{basePotency:100,baseCastTime:2,manaCost:200,applicationDelay:.5,onConfirm:e=>{e.refreshBuff("TINGLE",0)}});zt("TRIPLE_TRIDENT",1,{aspect:_e.Physical,basePotency:450,baseCastTime:2,manaCost:300,applicationDelay:.5,secondaryCooldown:{cdName:"cd_TRIPLE_TRIDENT",cooldown:90,maxCharges:1}});const Y2=e=>e.hasResourceAvailable("COLD_FOG"),K2=e=>e.hasResourceAvailable("TOUCH_OF_FROST"),V2=[{newSkill:"POP_COLD_FOG",condition:e=>Y2(e)},{newSkill:"WHITE_DEATH",condition:e=>K2(e)}];zt("COLD_FOG",1,{replaceIf:V2,baseCastTime:2,cooldown:90,manaCost:300,applicationDelay:.5,secondaryCooldown:{cdName:"cd_COLD_FOG",cooldown:90,maxCharges:1},onConfirm:e=>{e.refreshBuff("COLD_FOG",0)}});zt("WHITE_DEATH",1,{startOnHotbar:!1,basePotency:400,baseCastTime:0,manaCost:0,applicationDelay:.5,validateAttempt:e=>!PS(e)&&e.hasResourceAvailable("TOUCH_OF_FROST")});ba("POP_COLD_FOG",1,"cd_COLD_FOG_POP",{startOnHotbar:!1,applicationDelay:0,animationLock:Ia,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("COLD_FOG"),onConfirm:e=>{e.tryConsumeResource("COLD_FOG"),e.refreshBuff("TOUCH_OF_FROST",0)}});zt("END_PHANTOM_FLURRY",1,{startOnHotbar:!1,basePotency:600,baseCastTime:0,manaCost:0,applicationDelay:.5});zt("WINGED_REPROBATION",1,{aspect:_e.Physical,basePotency:300,baseCastTime:1,manaCost:200,applicationDelay:.5,secondaryCooldown:{cdName:"cd_WINGED_REPROBATION",cooldown:90,maxCharges:1},onConfirm:e=>{e.resources.get("WINGED_REPROBATION").gain(1),e.resources.get("WINGED_REPROBATION").availableAmount()<=3&&e.cooldowns.get("cd_WINGED_REPROBATION").restore(90),e.resources.get("WINGED_REPROBATION").availableAmount()===4&&(e.tryConsumeResource("WINGED_REPROBATION",!0),e.refreshBuff("WINGED_REDEMPTION",0))}});ba("ERUPTION",1,"cd_ERUPTION",{cooldown:30,manaCost:300,potency:300,applicationDelay:.62});ba("FEATHER_RAIN",1,"cd_ERUPTION",{cooldown:30,manaCost:300,potency:220,applicationDelay:.62,onConfirm:(e,t)=>{const a=[];e.hasResourceAvailable("WAXING_NOCTURNE")&&a.push(X.MoonFlute),e.addDoTPotencies({node:t,effectName:"FEATHER_RAIN",skillName:"FEATHER_RAIN",tickPotency:40,speedStat:"sps",modifiers:a}),e.applyDoT("FEATHER_RAIN",t)}});ba("MOUNTAIN_BUSTER",1,"cd_SHOCK_STRIKE",{cooldown:60,manaCost:400,potency:400,applicationDelay:.62});ba("SHOCK_STRIKE",1,"cd_SHOCK_STRIKE",{cooldown:60,manaCost:400,potency:400,applicationDelay:.62});ba("GLASS_DANCE",1,"cd_GLASS_DANCE",{cooldown:90,manaCost:500,potency:350,applicationDelay:.62});ba("QUASAR",1,"cd_QUASAR",{cooldown:60,manaCost:300,potency:300,applicationDelay:.62});ba("J_KICK",1,"cd_QUASAR",{cooldown:60,manaCost:300,potency:300,applicationDelay:1,animationLock:1});ba("BOTH_ENDS",1,"cd_NIGHTBLOOM",{cooldown:120,manaCost:300,potency:600,applicationDelay:.62});ba("SEA_SHANTY",1,"cd_SEA_SHANTY",{cooldown:120,manaCost:300,potency:500,applicationDelay:.62});ba("BEING_MORTAL",1,"cd_BEING_MORTAL",{cooldown:120,manaCost:300,potency:800,applicationDelay:.62});ba("APOKALYPSIS",1,"cd_BEING_MORTAL",{cooldown:120,manaCost:300,potency:0,applicationDelay:1.38,animationLock:1.38,onConfirm:(e,t)=>{const a=[];e.hasResourceAvailable("WAXING_NOCTURNE")&&a.push(X.MoonFlute),e.addDoTPotencies({node:t,effectName:"APOKALYPSIS",skillName:"APOKALYPSIS",tickPotency:100,tickFrequency:1,speedStat:"unscaled",modifiers:a})},onApplication:(e,t)=>{e.applyDoT("APOKALYPSIS",t)}});ba("NIGHTBLOOM",1,"cd_NIGHTBLOOM",{cooldown:120,manaCost:300,potency:400,applicationDelay:.62,onConfirm:(e,t)=>{const a=[];e.hasResourceAvailable("WAXING_NOCTURNE")&&a.push(X.MoonFlute),e.addDoTPotencies({node:t,effectName:"NIGHTBLOOM",skillName:"NIGHTBLOOM",tickPotency:75,speedStat:"sps",modifiers:a})},onApplication:(e,t)=>{e.applyDoT("NIGHTBLOOM",t)}});ba("PHANTOM_FLURRY",1,"cd_PHANTOM_FLURRY",{replaceIf:[j2],cooldown:120,manaCost:300,potency:0,applicationDelay:.5,onConfirm:(e,t)=>{const a=[];e.hasResourceAvailable("WAXING_NOCTURNE")&&a.push(X.MoonFlute),e.addDoTPotencies({node:t,effectName:"PHANTOM_FLURRY",skillName:"PHANTOM_FLURRY",tickPotency:200,tickFrequency:1,speedStat:"unscaled",modifiers:a})},onApplication:(e,t)=>{e.applyDoT("PHANTOM_FLURRY",t)}});ba("SURPANAKHA",1,"cd_SURPANAKHA_LOCKOUT",{cooldown:1,manaCost:200,potency:e=>200*(1+.5*e.resources.get("SURPANAKHAS_FURY").availableAmount()),applicationDelay:.62,onApplication:e=>{e.resources.get("SURPANAKHAS_FURY").availableAmount()===3?e.tryConsumeResource("SURPANAKHAS_FURY",!0):e.refreshBuff("SURPANAKHAS_FURY",0)},secondaryCooldown:{cdName:"cd_SURPANAKHA",cooldown:30,maxCharges:4}});function wr(e){switch(e.job){case"PLD":return new WB(e);case"WAR":return new YB(e);case"DRK":return new t2(e);case"GNB":return new FG(e);case"WHM":return new u2(e);case"SCH":return new s2(e);case"AST":return new i2(e);case"SGE":return new GB(e);case"MNK":return new v2(e);case"DRG":return new yG(e);case"NIN":return new f2(e);case"SAM":return new pB(e);case"RPR":return new _B(e);case"VPR":return new U2(e);case"BRD":return new TG(e);case"MCH":return new QG(e);case"DNC":return new NG(e);case"BLM":return new fG(e);case"SMN":return new DB(e);case"RDM":return new SB(e);case"PCT":return new aB(e);case"BLU":return new F2(e)}return new qt(e)}let oy=e=>{};function W2(e){return`
		.castTimeTable {
			border-collapse: collapse;
			width: 100%;
		}
		.castTimeTable th, .castTimeTable td {
			text-align: center;
			padding: 0.15em;
			border: 1px solid ${e};
			width: 33%
		}
	`}function X2(e){const t=Vt(e.job,e.override.type);let a;const i=Xe(e.override.type);if(t.isCoolDown)a=g({en:i+" full in "+e.override.timeTillFullOrDrop+"s",zh:`${i}${e.override.timeTillFullOrDrop}`});else{a=i;const r=g({en:" (",zh:""}),d=g({en:") ",zh:""});(ze[e.override.type].mayBeToggled??!1)&&(a+=r+(e.override.effectOrTimerEnabled?g({en:"enabled",zh:""}):g({en:"disabled",zh:""}))+d),t.maxValue>1&&(a+=g({en:` (amount: ${e.override.stacks})`,zh:`${e.override.stacks}`})),t.maxTimeout>=0&&(e.override.type==="POLYGLOT"?e.override.timeTillFullOrDrop>0&&(a+=g({en:` next stack ready in ${e.override.timeTillFullOrDrop}s`,zh:`${e.override.timeTillFullOrDrop}`})):e.override.effectOrTimerEnabled&&(a+=g({en:` drops in ${e.override.timeTillFullOrDrop}s`,zh:`${e.override.timeTillFullOrDrop}`})))}a+=" ";let l;if(e.deleteFn){const r=e.deleteFn;l=c.jsx(Ms,{content:"[x]",onClickFn:d=>{r(e.override.type)}})}return c.jsxs("div",{style:{marginTop:10,color:"mediumpurple"},children:[a,l]})}function q2(e){const t=_=>{const b=e.initialResourceOverrides.findIndex(y=>y.type===_);b!==-1&&(e.initialResourceOverrides.splice(b,1),e.setInitialResourceOverrides(e.initialResourceOverrides))},a=e.initialResourceOverrides.map((_,b)=>c.jsx(X2,{job:e.job,override:_,deleteFn:t},b)),i=new Set(e.initialResourceOverrides.map(_=>_.type)),l=Ji(e.job),d=l.entries().flatMap(([_,b])=>i.has(_)?[]:[{rsc:_,isCoolDown:b.isCoolDown?1:0}]).toArray().sort((_,b)=>_.isCoolDown-b.isCoolDown).map((_,b)=>c.jsx("option",{value:_.rsc,children:Xe(_.rsc)},b)),E=e.selectedOverrideResource,h=l.get(E);let A,R=!0;if(h!==void 0){let _,b,y="-1",U,L="0",M;h.isCoolDown?(_=!0,b=!1,R=!1,y=e.overrideTimer,U=e.setOverrideTimer):(h.maxTimeout>=0?(_=!0,y=e.overrideTimer,U=e.setOverrideTimer):_=!1,h.maxValue>1||h.maxValue===h.defaultValue?(b=!0,L=e.overrideStacks,M=e.setOverrideStacks):b=!1,R=ze[E].mayBeToggled??!1);const G=h.isCoolDown?g({en:"Time till full: ",zh:"CD"}):g(E==="POLYGLOT"?{en:"Time till next stack: ",zh:""}:{en:"Time till drop: ",zh:" "}),H=g({en:"enabled",zh:""});A=c.jsxs("div",{style:{margin:"6px 0"},children:[c.jsx("div",{hidden:!_,children:c.jsx(Yt,{description:G,defaultValue:y,onChange:U})}),c.jsx("div",{hidden:!b,children:c.jsx(Yt,{description:g({en:"Amount: ",zh:""}),defaultValue:L,onChange:M})}),c.jsxs("div",{hidden:!R,children:[c.jsx("input",{style:{position:"relative",top:3,marginRight:5},type:"checkbox",checked:e.overrideEnabled,onChange:P=>e.setOverrideEnabled(P.target.checked)}),c.jsx("span",{children:H})]})]})}const T=O.useContext(Nn),S=xo(T,"bgMediumContrast"),I=_=>{_.preventDefault();const b=e.selectedOverrideResource,y=Ji(e.job).get(b);let U=parseFloat(e.overrideTimer);const L=parseInt(e.overrideStacks),M=e.overrideEnabled;if(b==="POLYGLOT"&&e.overrideTimer===""&&(U=0),isNaN(L)||isNaN(U)){window.alert("some inputs are not numbers!");return}let G;if(y.isCoolDown){const H=y.maxStacks*y.cdPerStack;if(U<0||U>H){window.alert("invalid input timeout (must be in range [0, "+H+"])");return}G={type:b,timeTillFullOrDrop:U,stacks:y.maxStacks>1?L:1,effectOrTimerEnabled:!0}}else{if((y.maxValue>1||y.maxValue===y.defaultValue)&&(L<0||L>y.maxValue)){window.alert("invalid input amount (must be in range [0, "+y.maxValue+"])");return}if(y.maxTimeout>=0&&(U<0||U>y.maxTimeout)){window.alert("invalid input timeout (must be in range [0, "+y.maxTimeout+"])");return}G={type:b,timeTillFullOrDrop:y.maxTimeout>=0?U:-1,stacks:y.maxValue>1||y.maxValue===y.defaultValue?L:1,effectOrTimerEnabled:R||M}}e.setInitialResourceOverrides([...e.initialResourceOverrides,G])},C=c.jsx("div",{children:c.jsxs("form",{onSubmit:_=>I(_),style:{marginTop:16,outline:"1px solid "+S,outlineOffset:6},children:[c.jsx("select",{value:e.selectedOverrideResource,onChange:_=>{_.target&&e.setSelectedOverrideResource(_.target.value)},children:d}),A,c.jsx("input",{type:"submit",value:g({en:"add override",zh:""})})]})});return c.jsx("div",{style:{marginTop:10},children:c.jsx(Yr,{title:"overrideInitialResources",titleNode:c.jsxs("span",{children:[g({en:"Override initial resources",zh:""})," ",c.jsx(We,{topic:"overrideInitialResources",content:g({en:c.jsxs("div",{children:[c.jsx("div",{className:"paragraph",style:{color:"orangered"},children:c.jsx("b",{children:"Can create invalid game states. Go over Instructions/Troubleshoot first and use carefully at your own risk!"})}),c.jsx("div",{className:"paragraph",children:"Also, currently thunder dot buff created this way doesn't actually tick. It just shows the remaining buff timer."}),c.jsx("div",{className:"paragraph",children:"I would recommend saving settings (stats, lines presets, timeline markers etc.) to files first, in case invalid game states really mess up the tool and a complete reset is required."})]}),zh:c.jsxs("div",{children:[c.jsx("div",{className:"paragraph",style:{color:"orangered"},children:c.jsx("b",{children:"/"})}),c.jsx("div",{className:"paragraph",children:"dot"}),c.jsx("div",{className:"paragraph",children:""})]})})})]}),content:c.jsxs("div",{children:[c.jsx("button",{onClick:_=>{e.initialResourceOverrides.length>0&&e.setInitialResourceOverrides([]),_.preventDefault()},children:g({en:"clear all overrides",zh:""})}),a,C]})})})}function Z2(e){const t=N.game.lucidTickOffset.toFixed(3),a=g({en:"the random time offset of lucid dreaming ticks relative to mp ticks",zh:"buff"}),i=N.game.dotTickOffset.toFixed(3),l=g({en:"the random time offset of DoT ticks relative to mp ticks",zh:"DoT"}),r=N.gameConfig.procMode,d=N.gameConfig.initialResourceOverrides.length,E=N.gameConfig.legacy_casterTax,h=g({en:`WARNING: this record was created in an earlier version of XIV in the Shell and uses the deprecated caster tax of ${E}s instead of calculating from your FPS input below. Hover for details: `,zh:`${E}`}),A=Mt().warning,R=(I,C)=>{const _=u0[I];if(_.warningContent)return c.jsx("p",{style:{color:C},children:g(_.warningContent)})},T=g({en:c.jsxs("div",{children:[c.jsx("div",{className:"paragraph",children:"The caster tax config is now replaced by 0.1s + FPS tax and is more precise. You can read more about FPS tax in the Github repository wiki's implementation notes section."}),c.jsx("div",{className:"paragraph",style:{color:A},children:"You are strongly encouraged to create a new record (in another timeline slot or from 'apply and reset') and migrate your fight plan. Support for loading legacy files might drop in the future."})]}),zh:c.jsxs("div",{children:[c.jsx("div",{className:"paragraph",children:"0.1s /"}),c.jsx("div",{className:"paragraph",style:{color:A},children:""})]})}),S=c.jsxs("p",{style:{color:A},children:[h,c.jsx(We,{topic:"legacy-caster-tax",content:T})]});return c.jsxs("div",{style:{textDecoration:e.dirty?"line-through":"none",marginLeft:5,paddingLeft:10,borderLeft:"1px solid "+Mt().bgHighContrast},children:[N.gameConfig.shellVersion<vo.FpsTax?S:void 0,R(Et[e.job].implementationLevel,A),["CASTER","HEALER"].includes(Et[e.job].role)&&c.jsxs("div",{children:[g({en:"Lucid tick offset ",zh:"& "}),c.jsx(We,{topic:"lucidTickOffset",content:a}),": ",t]}),N.game.dotResources.length>0&&c.jsxs("div",{children:[g({en:"DoT tick offset ",zh:"& "}),c.jsx(We,{topic:"dotTickOffset",content:l}),": ",i]}),e.job==="MNK"&&c.jsxs("div",{children:[g({en:"SSS GCD",zh:"GCD"}),":"," ",N.gameConfig.adjustedSksGCD(5,N.game.inherentSpeedModifier()).toFixed(2)]}),c.jsxs("p",{children:[g({en:"Procs",zh:""}),": ",r]}),d>0&&c.jsx("p",{children:g({en:`${d} initial resource override(s)`,zh:`${d}`})})]})}function Q2(){const t=(()=>{const T=bt("playbackSettings");if(T)return JSON.parse(T)})(),[a,i]=O.useState((t==null?void 0:t.tickMode)??1),[l,r]=O.useState((t==null?void 0:t.timeScale)??hi.Manual),d=(T,S)=>{const I=JSON.stringify({tickMode:S,timeScale:T});It("playbackSettings",I)},E=T=>{if(!T||!T.target||isNaN(parseInt(T.target.value)))return;r(parseInt(T.target.value));const S=parseInt(T.target.value);isNaN(S)||(N.setTimeControlSettings({tickMode:S,timeScale:a}),d(a,S))},h=T=>{const S=parseFloat(T);i(S),isNaN(S)||(N.setTimeControlSettings({tickMode:l,timeScale:S}),d(S,a))};O.useEffect(()=>{N.setTimeControlSettings({tickMode:l,timeScale:a})});const A={position:"relative",top:3,marginRight:"0.75em"},R={display:"inline-block",marginRight:"0.5em"};return c.jsxs("div",{children:[c.jsxs("p",{children:[c.jsxs("label",{style:R,children:[c.jsx("input",{style:A,type:"radio",onChange:E,value:hi.RealTimeAutoPause,checked:l===hi.RealTimeAutoPause,name:"tick mode"}),g({en:"real-time auto pause",zh:"("})]}),c.jsx(We,{topic:"ctrl-realTimeAutoPause",content:c.jsxs("div",{className:"toolTip",children:[g({en:c.jsx("div",{className:"paragraph",children:"*Recommended*"}),zh:c.jsx("div",{className:"paragraph",children:"**"})}),g({en:c.jsxs("div",{className:"paragraph",children:["- click to use a skill. if the skill is on cooldown, or you're in an animation lock, then the simulation will automatically skip ahead to when the skill can be used again",c.jsx("br",{}),"- animation locks and cast bars will play out in sped-up real time until done"]}),zh:c.jsx("div",{className:"paragraph",children:"- ; CDCD"})})]})}),c.jsx("br",{}),c.jsxs("label",{style:R,children:[c.jsx("input",{style:A,type:"radio",onChange:E,value:hi.Manual,checked:l===hi.Manual,name:"tick mode"}),g({en:"manual",zh:""})]}),c.jsx(We,{topic:"ctrl-manual",content:c.jsx("div",{className:"toolTip",children:g({en:c.jsxs("div",{className:"paragraph",children:["- click to use a skill. if the skill is on cooldown, or you're in an animation lock, then the simulation will automatically skip ahead to when the skill can be used again",c.jsx("br",{}),"- animation locks and cast times are skipped immediately"]}),zh:c.jsx("div",{className:"paragraph",children:"- ; CDCD"})})})})]}),c.jsx(Yt,{defaultValue:`${a}`,description:c.jsxs("span",{children:[g({en:"time scale ",zh:" "}),c.jsx(We,{topic:"timeScale",content:c.jsx("div",{children:g({en:"rate at which game time advances automatically (aka when in real-time)",zh:""})})}),":"," "]}),onChange:h})]})}function $2(e){const t=O.useContext(Nn),a=e.imported?xo(t,"success"):xo(t,"text");return c.jsx(Yt,{style:{color:a},defaultValue:e.initial,description:e.description,onChange:i=>{e.dispatch({[e.name]:i}),e.removeImportedField(e.name)}})}function J2(e){const t=Ui(O.useContext(Nn)),[a,i]=O.useState(""),{imported:l,setImported:r}=e,d=async A=>{A.preventDefault();const R=URL.parse(a),T=new Headers;try{if(R&&R.hostname==="etro.gg"){const S=R.pathname.split("/");if(S[1]!=="gearset"&&S.length!==3)throw new Error("Invalid etro gearset link (hover ? in URL input box for details)");T.append("Content-Type","application/json");const I=await fetch("https://etro.gg/api/gearsets/"+S[2],{method:"GET",headers:T});if(I.ok){const C=await I.json(),_=new Map(C.totalParams.map(G=>[G.name,G.value])),b=C.totalParams.length>0?C.totalParams[0].value:0;if(!(C.jobAbbrev in Et))throw new Error("Imported gearset was for a job ("+C.jobAbbrev+") that XIV in the Shell doesn't support");const y=Ot.getSubstatBase(parseFloat(C.level)).toString(),U=_.get("SPS")??y,L=_.get("SKS")??y,M=["job","level","criticalHit","directHit","determination","main"];_.has("SPS")&&M.push("spellSpeed"),_.has("SKS")&&M.push("skillSpeed"),_.has("PIE")&&M.push("piety"),_.has("TEN")&&M.push("tenacity"),_.has("Weapon Damage")&&M.push("wd"),e.dispatch({job:C.jobAbbrev,level:C.level,spellSpeed:U,skillSpeed:L,wd:_.get("Weapon Damage"),criticalHit:_.get("CRT"),directHit:_.get("DH"),determination:_.get("DET"),piety:_.get("PIE"),tenacity:_.get("TEN"),main:b}),e.setImportedFields(M),r(!0)}else throw console.error(I),new Error("etro load failed (please check your link)")}else if(R&&R.hostname==="xivgear.app"){const S=R.searchParams.get("page");if(!S)throw new Error("xivgear link must be to a specific set (hover ? in URL input box for details)");const I=S.startsWith("sl|")?S.substr(3):S;T.append("Content-Type","application/json");const C=await fetch("https://api.xivgear.app/fulldata/"+I,{method:"GET",headers:T});if(C.ok){const _=await C.json();if(!(_.job in Et))throw new Error("Imported gearset was for a job ("+_.job+") that XIV in the Shell doesn't support");const b=_.sets[0].computedStats,y=Math.max(...["strength","dexterity","intelligence","mind"].map(M=>b[M]??0)).toString(),U=Math.max(b.wdPhys??0,b.wdMag??0).toString(),L={job:_.job,level:_.level,spellSpeed:b.spellspeed,skillSpeed:b.skillspeed,criticalHit:b.crit,directHit:b.dhit,determination:b.determination,piety:b.piety,tenacity:b.tenacity,wd:U,main:y};e.dispatch(L),e.setImportedFields(Object.keys(L)),r(!0)}else throw console.error("xivgear load failed: "+C),new Error("xivgear load failed (please check your link)")}else throw new Error("Invalid gearset link (must be from etro.gg or xivgear.app)")}catch(S){console.error(S),window.alert(S.message)}},E=c.jsx("a",{href:"https://etro.gg",target:"_blank",rel:"noreferrer",children:"etro"}),h=c.jsx("a",{href:"https://xivgear.app",target:"_blank",rel:"noreferrer",children:"xivgear"});return c.jsxs("form",{onSubmit:d,children:[g({en:c.jsxs("span",{children:["Load stats from ",E,"/",h,":"," "]}),zh:c.jsxs("span",{children:["",E,"",h,""]})}),c.jsx(We,{topic:"gearImport",content:c.jsxs(c.Fragment,{children:[c.jsx("p",{children:g({en:c.jsxs("span",{children:["Enter and ",c.jsx(yi,{text:"Load"})," a link to a gearset from xivgear.app or etro.gg, edit the rest of config, then"," ",c.jsx(yi,{text:"apply and reset"}),"."]}),zh:c.jsxs("span",{children:["xivgear.appetro.gg",c.jsx(yi,{text:""}),"",c.jsx(yi,{text:""}),""]})})}),c.jsx("p",{children:g({en:"etro: Copy/paste the link to the set (example: https://etro.gg/gearset/e13d5960-4794-4dc4-b273-24ecfed6745e)",zh:"etrohttps://etro.gg/gearset/e13d5960-4794-4dc4-b273-24ecfed6745e"})}),c.jsx("p",{children:g({en:'xivgear: At the top of the page, click "Export" -> "Selected Set" -> "Link to This Set" -> "Generate" (example: https://xivgear.app/?page=sl%7C143f3245-c35b-4391-8b2b-db5cc1a8de9a)',zh:'xivgear "Export" -> "Selected Set" -> "Link to This Set" -> "Generate"https://xivgear.app/?page=sl%7C143f3245-c35b-4391-8b2b-db5cc1a8de9a'})})]})}),c.jsxs("div",{style:{position:"relative",marginTop:5},children:[c.jsx(Yt,{style:{display:"inline-block"},width:25,description:"",onChange:A=>i(A)}),c.jsx("span",{children:" "}),c.jsx("input",{style:{display:"inline-block"},type:"submit",value:g({en:"Load",zh:""})}),c.jsx(yL,{style:{display:l?"inline":"none",color:t.success,position:"relative",top:4,marginLeft:8}})]})]})}function TC(e,t,a,i){const l=parseInt(a),r=parseInt(e),d=parseFloat(t);let E,h;if(isNaN(l)||isNaN(r)||isNaN(d)||r<Ot.getSubstatBase(l))E="n/a",h="n/a";else{const A=Ot.preTaxGcd(l,r,2.5,i);E=A.toFixed(2),h=Ot.afterFpsTax(d,A).toFixed(3)}return{gcdStr:E,taxedGcdStr:h}}function eF(e){const t=new Map(e.map(d=>[d.type,d]));if(t.has("ASTRAL_FIRE")&&t.has("UMBRAL_ICE")){const d=t.get("ASTRAL_FIRE").stacks,E=t.get("UMBRAL_ICE").stacks;if(d>0&&E>0)return window.alert("shouldn't have both AF and UI stacks"),!1}let a=0,i=0,l=0;if(t.has("ASTRAL_FIRE")&&(a=t.get("ASTRAL_FIRE").stacks),t.has("UMBRAL_ICE")&&(i=t.get("UMBRAL_ICE").stacks),t.has("UMBRAL_HEART")&&(l=t.get("UMBRAL_HEART").stacks),l>0&&a===0&&i===0)return window.alert("since there's at least one UH stack, there should also be Enochian and AF or UI"),!1;let r=!1;return(a>0||i>0||l>0)&&(r=!0),t.has("POLYGLOT")&&t.get("POLYGLOT").timeTillFullOrDrop>0&&!r?(window.alert("since a timer for polyglot is set (time till next stack > 0), there must also be AF/UI"),!1):!0}function tF(){const e=Ui(O.useContext(Nn)),[t,a]=O.useState(void 0),[i,l]=O.useState(vo.AllaganGcdFormula),[r,d]=O.useState([]),[E,h]=O.useState("0"),[A,R]=O.useState("0"),[T,S]=O.useState(!0),I=oe=>{H(!0),d(oe),b(oe)},[C,_]=O.useState("NEVER"),b=oe=>{const pe=new Set(oe.map(Ce=>Ce.type)),Ie=Ji(M.job).keys().find(Ce=>!pe.has(Ce))??"NEVER";_(Ie)},[y,U]=O.useState(!1);function L(oe,pe){var Ce,ye;const Ie={...oe,...pe};if(!Object.is(Ie,oe)){if(Ie.dirty=pe.dirty??!0,pe.job!==void 0&&pe.job!==oe.job){const we=new Ei($R(pe.job,parseInt(pe.level??oe.level))),Ze=wr(we).inherentSpeedModifier();if(a(Ze),pe.job===((Ce=N.record.config)==null?void 0:Ce.job))Object.assign(Ie,N.gameConfig.serialized()),d(N.gameConfig.initialResourceOverrides);else{d([]);const mt=((ye=Ji(pe.job).keys().toArray())==null?void 0:ye[0])??"NEVER";_(mt),Object.assign(Ie,jw(pe.job))}}if(pe.level!==void 0&&pe.level!==oe.level){const we=new Ei($R(oe.job,parseInt(pe.level))),Ze=wr(we).inherentSpeedModifier();a(Ze)}U(parseInt(Ie.level)!==N.gameConfig.level||Ie.job!==N.gameConfig.job)}return Ie}const[M,G]=O.useReducer(L,{job:"BLM",level:`${nt.lvl100}`,spellSpeed:"0",skillSpeed:"0",criticalHit:"0",directHit:"0",determination:"0",piety:"0",animationLock:"0",fps:"0",gcdSkillCorrection:"0",timeTillFirstManaTick:"0",countdown:"0",randomSeed:"",procMode:fa.RNG,tenacity:"0",wd:"0",main:"0",dirty:!1}),H=oe=>G({dirty:oe}),P=oe=>pe=>G({[oe]:pe}),[q,ne]=O.useState(!1),Ee=Object.fromEntries(Object.keys(M).map(oe=>[oe,!1])),[ue,de]=O.useState(Ee),fe=oe=>{de({...ue,...Object.fromEntries(oe.map(pe=>[pe,!0]))})},Q=oe=>{de({...ue,[oe]:!1})},J=()=>{de(Ee),ne(!1)};O.useEffect(()=>{oy=oe=>{l(oe.shellVersion),I(oe.initialResourceOverrides),G({...Object.fromEntries(Object.entries(oe).flatMap(([pe,Ie])=>pe!=="initialResourceOverrides"?[[pe,Ie.toString()]]:[]))}),H(!1),J(),b(oe.initialResourceOverrides)}});const F=oe=>ue[oe]?e.success:e.text,w=c.jsxs("div",{style:{marginBottom:10},children:[c.jsx("span",{children:g({en:"job: ",zh:""})}),c.jsx("select",{style:{outline:"none",color:F("job")},value:M.job,onChange:oe=>{Q("job"),G({job:oe.target.value})},children:Os.filter(oe=>Et[oe].implementationLevel!=="UNIMPLEMENTED").map(oe=>{const pe=Et[oe].implementationLevel;return pe!=="LIVE"?c.jsx("option",{value:oe,children:oe+` (${g(u0[pe].label??{en:""})})`},oe):c.jsx("option",{value:oe,children:oe},oe)})})]}),{gcdStr:K,taxedGcdStr:W}=TC(M.spellSpeed,M.fps,M.level,t),{gcdStr:D,taxedGcdStr:Y}=TC(M.skillSpeed,M.fps,M.level,t),z=i>=vo.FpsTax?e.text:e.warning,B=M.job,ee=Et[B].role==="CASTER"||Et[B].role==="HEALER",he={en:ee?"spell":"skill",zh:ee?"":""},se=oe=>Ot.preTaxGcd(parseFloat(M.level),parseFloat(ee?M.spellSpeed:M.skillSpeed),oe,t),Ae=oe=>Ot.afterFpsTax(parseFloat(M.fps),se(oe)),Re=c.jsxs("div",{children:[c.jsx("style",{children:W2(e.bgHighContrast)}),c.jsx("div",{style:{marginBottom:10},children:g({en:`Preview numbers based on your current ${he.en} speed and FPS input:`,zh:`${he.zh}`})}),c.jsx("table",{className:"castTimeTable",children:c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("th",{children:g({en:"GCD time",zh:"GCD"})}),c.jsx("th",{children:g({en:"After FPS tax",zh:""})})]}),[2.5,3,3.5,4].map((oe,pe)=>c.jsxs("tr",{children:[c.jsxs("td",{children:[se(oe).toFixed(2)," (",oe.toFixed(2)," ",g({en:"base",zh:""}),")"]}),c.jsx("td",{children:Ae(oe).toFixed(3)})]},"gcdPreview"+pe.toString()))]})})]}),Oe=(oe,pe)=>{if(oe.preventDefault(),!pe&&y){console.error("attempted to apply w/o reset, but job or level changed");return}if(eF(r)){let Ie=M.randomSeed;if(Ie.length===0){for(let Ze=0;Ze<4;Ze++)Ie+=Math.floor(Math.random()*10).toString();G({randomSeed:Ie})}const Ce=["spellSpeed","skillSpeed","criticalHit","directHit","determination","animationLock","fps","gcdSkillCorrection","timeTillFirstManaTick","countdown","level","wd","main","tenacity"];if(Ce.map(Ze=>isNaN(parseFloat(M[Ze].toString()))).some(Ze=>Ze)){window.alert("Some config fields are not numbers!");return}if(!(M.job in Et)){window.alert("Invalid job: "+M.job);return}const ye=N.gameConfig.serialized(),we=N.record.serialized();N.setConfigAndRestart({job:M.job,randomSeed:Ie.trim(),procMode:M.procMode,initialResourceOverrides:r,...Object.fromEntries(Ce.map(Ze=>[Ze,parseFloat(M[Ze].toString())]))},pe),N.undoStack.push(new ww(ye,N.gameConfig.serialized(),pe?we:void 0)),H(!1),U(!1),J(),N.updateAllDisplay(),N.scrollToTime()}},ge=["criticalHit","directHit","determination","piety","animationLock"].map(oe=>c.jsx($2,{name:oe,description:gu(oe),initial:M[oe].toString(),dispatch:G,imported:ue[oe],removeImportedField:pe=>Q(pe)},oe)),Ne=c.jsxs("div",{style:{marginBottom:16},children:[c.jsxs("div",{children:[c.jsx("span",{children:g({en:"level: ",zh:""})}),c.jsxs("select",{style:{outline:"none",color:F("level")},value:M.level,onChange:oe=>G({level:oe.target.value}),children:[(M.level==="100"||B!=="BLU")&&c.jsx("option",{value:nt.lvl100,children:"100"},nt.lvl100),(M.level==="90"||B!=="BLU")&&c.jsx("option",{value:nt.lvl90,children:"90"},nt.lvl90),c.jsx("option",{value:nt.lvl80,children:"80"},nt.lvl80),c.jsx("option",{value:nt.lvl70,children:"70"},nt.lvl70)]})]}),c.jsxs("div",{children:[c.jsx(Yt,{style:{display:"inline-block",color:F("spellSpeed")},defaultValue:M.spellSpeed,description:gu("spellSpeed"),onChange:P("spellSpeed")}),c.jsxs("span",{children:[" ","(GCD: ",K," ",c.jsx(We,{topic:"gcdPreview",content:c.jsxs(c.Fragment,{children:[c.jsx("p",{children:g({en:"Preview of displayed GCD based on your spell speed.",zh:"GCD."})}),c.jsx("p",{children:g({en:`Measured average GCD should be ${W} due to FPS tax.`,zh:`GCD${W}`})})]})}),")"]})]}),c.jsxs("div",{children:[c.jsx(Yt,{style:{display:"inline-block",color:F("skillSpeed")},defaultValue:M.skillSpeed,description:gu("skillSpeed"),onChange:P("skillSpeed")}),c.jsxs("span",{children:[" ","(GCD: ",D," ",c.jsx(We,{topic:"sksGcdPreview",content:c.jsxs(c.Fragment,{children:[c.jsx("p",{children:g({en:"Preview of displayed GCD based on your skill speed.",zh:"GCD."})}),c.jsx("p",{children:g({en:`Measured average GCD should be ${Y} due to FPS tax.`,zh:`GCD${Y}`})})]})}),")"]})]}),ge,c.jsxs("div",{children:[c.jsx(Yt,{componentColor:z,style:{display:"inline-block"},defaultValue:M.fps,description:gu("fps"),onChange:P("fps")}),c.jsxs("span",{children:[" ","(",g({en:`${se(2.5).toFixed(2)}s w/ tax`,zh:`${se(2.5).toFixed(2)}s+`}),": ",Ae(2.5).toFixed(3)," ",c.jsx(We,{topic:"gcdTaxPreview",content:Re}),")"]})]}),c.jsx(Yt,{componentColor:z,defaultValue:M.gcdSkillCorrection,description:c.jsxs("span",{children:[g({en:"GCD correction",zh:"GCD"})," ",c.jsx(We,{topic:"cast-time-correction",content:g({en:"Leaving this at 0 will probably give you the most accurate simulation. But if you want to manually correct your GCD skill durations (including casts) for whatever reason, you can put a small number (can be negative)",zh:"0GCD"})}),":"," "]}),onChange:P("gcdSkillCorrection")}),c.jsx(Yt,{defaultValue:M.timeTillFirstManaTick,description:g({en:"time till first MP tick: ",zh:""}),onChange:P("timeTillFirstManaTick")}),c.jsx(Yt,{defaultValue:M.countdown,description:c.jsxs("span",{children:[g({en:"countdown ",zh:" "}),c.jsx(We,{topic:"countdown",content:g({en:"can use a negative countdown to start from a specific time of fight",zh:""})}),":"," "]}),onChange:P("countdown")}),c.jsx(Yt,{defaultValue:M.randomSeed,description:c.jsxs("span",{children:[g({en:"random seed ",zh:" "}),c.jsx(We,{topic:"randomSeed",content:g({en:"can be anything, or leave empty to get 4 random digits.",zh:"4"})}),":"," "]}),onChange:P("randomSeed")}),c.jsxs("div",{children:[c.jsxs("span",{children:[g({en:"proc mode ",zh:"BUFF "}),c.jsx(We,{topic:"procMode",content:g({en:"Default RNG: 40% Firestarter",zh:"RNG40%AlwaysNever"})}),":"," "]}),c.jsxs("select",{style:{outline:"none"},value:M.procMode,onChange:oe=>G({procMode:oe.target.value}),children:[c.jsx("option",{value:fa.RNG,children:"RNG"},fa.RNG),c.jsx("option",{value:fa.Never,children:"Never"},fa.Never),c.jsx("option",{value:fa.Always,children:"Always"},fa.Always)]})]}),c.jsx(q2,{job:M.job,initialResourceOverrides:r,overrideTimer:E,overrideStacks:A,overrideEnabled:T,setInitialResourceOverrides:I,selectedOverrideResource:C,setSelectedOverrideResource:_,setOverrideTimer:h,setOverrideStacks:R,setOverrideEnabled:S})]});return c.jsxs("div",{style:{marginBottom:20},children:[c.jsx(J2,{imported:q,setImported:ne,setImportedFields:fe,dispatch:G}),c.jsx("br",{}),w,c.jsx(Z2,{job:N.getActiveJob(),dirty:M.dirty}),Ne,c.jsx("p",{style:{paddingBottom:5},children:g({en:"You can also import/export fights from/to local files at the bottom of the page.",zh:""})}),c.jsx("div",{className:"invisibleScrollbar",style:{boxSizing:"border-box",width:"100%",position:"absolute",paddingRight:5,paddingLeft:5,bottom:0,left:0,overflowY:"scroll"},children:c.jsxs("div",{style:{width:"100%",boxSizing:"border-box",backgroundColor:e.background,borderTop:"1px solid "+e.bgMediumContrast,paddingTop:5,paddingBottom:5,display:"flex",flexDirection:"row",justifyContent:"space-between",gap:5},children:[c.jsxs("button",{onClick:oe=>Oe(oe,!1),style:{width:"100%",fontWeight:!y&&M.dirty?"bold":"normal",textDecoration:y?"line-through":void 0},disabled:y,children:[g({en:"apply",zh:""}),y&&" ",y&&c.jsx(We,{topic:"applyWithoutReset",content:g({en:"Must reset timeline because job or level changed.",zh:""})}),!y&&M.dirty?"*":""]}),c.jsxs("button",{onClick:oe=>Oe(oe,!0),style:{width:"100%",fontWeight:M.dirty?"bold":"normal"},children:[g({en:"apply and reset",zh:""}),M.dirty?"*":""]})]})})]})}function ly(e){let t=Os[0],a=0;return Os.forEach(i=>{const l=e.reduce((r,d)=>YU(i,d)?r+1:r,0);l>a&&(t=i,a=l)}),t}var bl,nE,sy;class nF{constructor(){Ye(this,bl);Z(this,"presetLines",[]);be(this,bl,sy).call(this)}serialized(){return{fileType:Li.SkillSequencePresets,presets:this.presetLines.map(({actions:t,job:a})=>t.serialized())}}deserializeAndAppend(t){for(const a of t.presets){const i=sc.deserialize(a.actions);i.name=a.name;const l=i.actions.flatMap(r=>r.info.type===Ve.Skill?[r.info.skillName]:[]);this.addLine(i,a.job??ly(l))}}getLinesForJob(t){return this.presetLines.flatMap(({actions:a,job:i})=>i===t?[a]:[])}addLine(t,a){this.presetLines.push({actions:t,job:a}),pl(),be(this,bl,nE).call(this)}deleteLine(t){for(let a=0;a<this.presetLines.length;a++)if(this.presetLines[a].actions===t){this.presetLines.splice(a,1),pl(),be(this,bl,nE).call(this);return}console.assert(!1)}deleteAllLines(){this.presetLines=[],pl(),be(this,bl,nE).call(this)}}bl=new WeakSet,nE=function(){It("presetLines",JSON.stringify(this.serialized()))},sy=function(){const t=bt("presetLines");if(t!==null){const a=JSON.parse(t);return this.deserializeAndAppend(a),!0}return!1};const aF=new Set(["BLIZZARD","FIRE","BLIZZARD_II","FIRE_II","BLIZZARD_III","FIRE_III","FREEZE","FLARE","BLIZZARD_IV","FIRE_IV","DESPAIR","HIGH_FIRE_II","HIGH_BLIZZARD_II","FLARE_STAR"]),iF=new Set(["FOUL","XENOGLOSSY","PARADOX"]),Al=new Set([]),Jn=e=>N.getUntargetableMask()&&N.timeline.duringUntargetable(e),Ec=(e,t)=>N.getUntargetableMask()?N.timeline.getTargetableDurationBetween(e,t):t-e;function Es(e){return e.info.type===Ve.Skill&&N.game.dotSkills.includes(e.info.skillName)}function oF(e,t,a){console.assert(Es(e),`${e.getNameForMessage()} is not registered as a dot skill`);const i=e.getInitialPotency(),l={castTime:e.tmp_startLockTime?e.tmp_startLockTime-N.gameConfig.countdown:0,applicationTime:e.applicationTime?e.applicationTime-N.gameConfig.countdown:0,displayedModifiers:[],gap:0,override:0,mainPotencyHit:!0,baseMainPotency:0,baseDotPotency:0,initialHitCalculationModifiers:[],tickCalculationModifiers:[],totalNumTicks:0,numHitTicks:0,potencyWithoutPot:0,potPotency:0,partyBuffPotency:0,targetCount:e.targetCount,mainHitFalloff:(i==null?void 0:i.falloff)??0};l.gap=e.getOverTimeGap(t,"damage"),l.override=e.getOverTimeOverrideAmount(t,"damage"),l.baseMainPotency=(i==null?void 0:i.base)??0,l.initialHitCalculationModifiers=(i==null?void 0:i.modifiers)??[],l.mainPotencyHit=e.hitBoss(Jn),l.tickCalculationModifiers=l.initialHitCalculationModifiers.filter(h=>h.source!==k.COMBO&&h.source!==k.POSITIONAL);for(let h=0;h<l.initialHitCalculationModifiers.length;h++){const A=l.initialHitCalculationModifiers[h].source;[k.ENO,k.FUGETSU,k.NO_MERCY,k.POWER_SURGE,k.LANCE_CHARGE,k.LIFE_OF_THE_DRAGON,k.BATTLE_LITANY,k.FIGHT_OR_FLIGHT,k.MOON_FLUTE,k.WHISTLE,k.BRISTLE,k.TINGLEA,k.TINGLEA].includes(A)&&l.displayedModifiers.push(A)}e.getDotPotencies(t).forEach((h,A)=>{h.hasResolved()&&(l.totalNumTicks++,l.baseDotPotency=h.base,h.hasHitBoss(Jn)&&l.numHitTicks++)});const r=e.getPotency({tincturePotencyMultiplier:1,includePartyBuffs:!1,untargetable:Jn,includeSplash:!0}).applied,d=e.getPotency({tincturePotencyMultiplier:N.getTincturePotencyMultiplier(),includePartyBuffs:!1,untargetable:Jn,includeSplash:!0}).applied,E=e.getPotency({tincturePotencyMultiplier:N.getTincturePotencyMultiplier(),includePartyBuffs:!0,untargetable:Jn,includeSplash:!0}).applied;return l.potencyWithoutPot=r,l.potPotency=d-r,l.partyBuffPotency=E-d,l}function lF(e){const t={basePotency:0,displayedModifiers:[],calculationModifiers:[],falloff:1,targetCount:1};if(e.info.type===Ve.Skill){const a=e.info.skillName,i=e.getInitialPotency();if(i)if(t.targetCount=e.targetCount,t.falloff=i.falloff??1,aF.has(a)){t.basePotency=i.base,t.calculationModifiers=i.modifiers;for(const l of i.modifiers){const r=l.source;if(r!==k.ENO&&r!==k.POT){t.displayedModifiers.push(r);break}}}else if(iF.has(a))for(const l of i.modifiers){const r=l.source;if(r===k.ENO){t.basePotency=i.base,t.displayedModifiers=[r],t.calculationModifiers=i.modifiers;break}}else if(Es(e))t.basePotency=i.base,e.info.targetCount=i.targetCount;else{t.basePotency=i.base;for(const l of i.modifiers){const r=l.source;r!==k.POT&&r!==k.NO_CDH&&(t.displayedModifiers.push(r),t.calculationModifiers.push(l))}}return t}else return console.assert(!1),t}function sF(e,t){if(e.length!==t.length)return!1;for(let a=0;a<e.length;a++)if(e[a]!==t[a])return!1;return!0}function rF(e,t){const a=lF(t),i={mainTableIndex:-1,expandedNode:a};for(let l=0;l<e.length;l++)if(t.info.type===Ve.Skill&&t.info.skillName===e[l].skillName&&sF(a.displayedModifiers,e[l].displayedModifiers)&&t.targetCount===e[l].targetCount)return i.mainTableIndex=l,i;return i}function fi(e){return!Al.has(e)}function cF(){return Al.size===0}function SC(e){e.include&&Al.has(e.skillNameOrDoT)?(Al.delete(e.skillNameOrDoT),e.skillNameOrDoT==="DoT"?N.game.dotSkills.forEach(t=>Al.delete(t)):N.game.dotSkills.includes(e.skillNameOrDoT)&&Al.delete("DoT")):(Al.add(e.skillNameOrDoT),e.skillNameOrDoT!=="DoT"&&N.game.dotSkills.includes(e.skillNameOrDoT)&&Al.add("DoT")),N.displayCurrentState(),N.updateStats()}function uF(e){const t={totalDuration:0,targetableDuration:0,potency:{applied:0,pending:0},gcdSkills:{applied:0,pending:0}},a=N.record.getFirstSelection(),i=N.record.getLastSelection();if(a&&i&&a.tmp_startLockTime!==void 0&&i.tmp_endLockTime!==void 0){t.totalDuration=i.tmp_endLockTime-a.tmp_startLockTime;const l=N.gameConfig.countdown;t.targetableDuration=Ec(a.tmp_startLockTime-l,i.tmp_endLockTime-l)}return N.record.iterateSelected(l=>{if(l.info.type===Ve.Skill&&!(l.info.skillName in Lo)){const r=fi(l.info.skillName);N.game.skillsList.get(l.info.skillName).cdName==="cd_GCD"&&r&&(l.hitBoss(Jn)?t.gcdSkills.applied++:l.resolved()||t.gcdSkills.pending++);const E=l.getPotency({tincturePotencyMultiplier:N.getTincturePotencyMultiplier(),untargetable:Jn,includePartyBuffs:!0,excludeDoT:Es(l)&&!fi("DoT"),includeSplash:!0});r&&(t.potency.applied+=E.applied,t.potency.pending+=E.snapshottedButPending)}}),t}function dF(e){let t=bu.Normal;N.displayingUpToDateGameState||(t=bu.Historical),N.record.getFirstSelection()&&(t=bu.Selected);const a={applied:0,pending:0},i={applied:0,pending:0},l=[],r={totalPotencyWithoutPot:0,totalPotPotency:0,totalPartyBuffPotency:0},d=new Map,E=new Map,h=A=>{if(A.info.type===Ve.Skill){const R=A.info.skillName,T=fi(R),S=R in Lo;N.game.skillsList.get(R).cdName==="cd_GCD"&&T&&(A.hitBoss(Jn)?i.applied++:A.resolved()||i.pending++);const C=A.getPotency({tincturePotencyMultiplier:N.getTincturePotencyMultiplier(),untargetable:Jn,includePartyBuffs:!0,includeSplash:!0,excludeDoT:Es(A)&&!fi("DoT")});if(T&&!S&&(a.applied+=C.applied,a.pending+=C.snapshottedButPending),A.resolved()){const _=rF(l,A);_.mainTableIndex<0&&(l.push({skillName:R,displayedModifiers:_.expandedNode.displayedModifiers,basePotency:S?0:_.expandedNode.basePotency,calculationModifiers:_.expandedNode.calculationModifiers,usageCount:0,hitCount:0,totalPotencyWithoutPot:0,showPotency:A.anyPotencies(),potPotency:0,potCount:0,partyBuffPotency:0,falloff:_.expandedNode.falloff,targetCount:_.expandedNode.targetCount}),_.mainTableIndex=l.length-1);const b=A.hitBoss(Jn);if(l[_.mainTableIndex].usageCount+=1,b&&(l[_.mainTableIndex].hitCount+=1),S)return;const y=A.getPotency({tincturePotencyMultiplier:1,untargetable:Jn,includePartyBuffs:!1,excludeDoT:Es(A)&&!fi("DoT"),includeSplash:!0}).applied,U=A.getPotency({tincturePotencyMultiplier:N.getTincturePotencyMultiplier(),untargetable:Jn,includePartyBuffs:!1,excludeDoT:Es(A)&&!fi("DoT"),includeSplash:!0}).applied,L=A.getPotency({tincturePotencyMultiplier:N.getTincturePotencyMultiplier(),untargetable:Jn,includePartyBuffs:!0,excludeDoT:Es(A)&&!fi("DoT"),includeSplash:!0}).applied;l[_.mainTableIndex].totalPotencyWithoutPot+=y,l[_.mainTableIndex].potPotency+=U-y,l[_.mainTableIndex].partyBuffPotency+=L-U,b&&A.hasBuff(x.Tincture)&&(l[_.mainTableIndex].potCount+=1);let M=E.get(R)??0;M+=L,E.set(R,M),T&&(r.totalPotencyWithoutPot+=y,r.totalPotPotency+=U-y,r.totalPartyBuffPotency+=L-U),A.getAllDotPotencies().forEach((G,H)=>{let P=d.get(H);const q=N.game.excludedDoTs.includes(H);P||(P={tableRows:[],summary:{cumulativeGap:0,cumulativeOverride:0,timeSinceLastDoTDropped:0,totalTicks:0,maxTicks:N.getMaxTicks(N.game.time,H,q),dotCoverageTimeFraction:N.getDotCoverageTimeFraction(N.game.getDisplayTime(),H),totalPotencyWithoutPot:0,totalPotPotency:0,totalPartyBuffPotency:0},lastDoT:void 0},d.set(H,P));const ne=oF(A,H,P.lastDoT);P.tableRows.push(ne),P.lastDoT=A,P.summary.cumulativeGap+=ne.gap,P.summary.cumulativeOverride+=ne.override,P.summary.totalTicks+=ne.numHitTicks,P.summary.totalPotencyWithoutPot+=ne.potencyWithoutPot,P.summary.totalPotPotency+=ne.potPotency,P.summary.totalPartyBuffPotency+=ne.partyBuffPotency})}}};return t===bu.Selected?N.record.iterateSelected(h):N.record.iterateAll(h),d.forEach((A,R)=>{if(A.lastDoT){const T=A.lastDoT.applicationTime;console.assert(T!==void 0,`DoT node for ${R} was not resolved`);const S=T+N.game.getStatusDuration(R),I=Ec(S,N.game.getDisplayTime()),C=N.game.getDisplayTime()-S;C>0&&(A.summary.cumulativeGap+=I,A.summary.timeSinceLastDoTDropped=C)}else{const T=Ec(0,Math.max(0,N.game.getDisplayTime()));A.summary.cumulativeGap=T,A.summary.timeSinceLastDoTDropped=T}}),l.sort((A,R)=>{if(A.showPotency!==R.showPotency){const T=A.showPotency?1:0;return(R.showPotency?1:0)-T}else if(A.skillName!==R.skillName){const T=E.get(A.skillName)??0;return(E.get(R.skillName)??0)-T}else{if(A.targetCount!==R.targetCount)return R.targetCount-A.targetCount;if(A.displayedModifiers.length!==R.displayedModifiers.length)return R.displayedModifiers.length-A.displayedModifiers.length;for(let T=0;T<A.displayedModifiers.length;T++){const S=A.displayedModifiers[T]-R.displayedModifiers[T];if(S!==0)return S}return 0}}),{time:N.game.time,tinctureBuffPercentage:e.tinctureBuffPercentage,totalPotency:a,lastDamageApplicationTime:e.lastDamageApplicationTime,countdown:N.gameConfig.countdown,gcdSkills:i,mainTable:l,mainTableSummary:r,dotTables:d,mode:t}}var bu=(e=>(e[e.Normal=0]="Normal",e[e.Historical=1]="Historical",e[e.Selected=2]="Selected",e))(bu||{});let sT=e=>{},ry=e=>{};function IC(e){const t=GU(e.buff),a=UU(e.buff);return c.jsx("span",{style:{borderRadius:2,border:"1px solid "+a,fontSize:11,marginRight:4,padding:"1px 4px",background:a+"1f"},children:c.jsx("b",{style:{color:a},children:t})})}function _R(e){let t=e.basePotency,a=e.basePotency.toFixed(2)+g({en:"(base)",zh:"()"});e.explainUntargetable&&(a+=g({en:"(untargetable)",zh:"()"}));let i="";if(e.calc.forEach(l=>{l.kind==="adder"&&l.additiveAmount>0&&(t+=l.additiveAmount,i+=" + "+l.additiveAmount+"("+qN(l.source)+")")}),i&&(a="[ "+a+i+" ]"),e.calc.forEach(l=>{l.kind==="multiplier"&&l.potencyFactor!==1&&(t*=l.potencyFactor,a+="  "+l.potencyFactor+"("+qN(l.source)+")")}),e.targetCount&&e.falloff!==void 0&&e.targetCount>1){const l=1+(1-e.falloff)*(e.targetCount-1);a=`[ ${a} ] x ${l}(${e.targetCount}${g({en:" targets",zh:""})})`,t*=l}return c.jsxs("span",{style:{textDecoration:e.includeInStats?"none":"line-through"},children:[t.toFixed(2)," ",c.jsx(We,{topic:e.helpTopic,content:a})]})}function hF(){const[e,t]=O.useState("8"),a=l=>{t(l);const r=parseFloat(l);isNaN(r)||(N.setTinctureBuffPercentage(r),It("tinctureBuffPercentage",l))};O.useEffect(()=>{const l=bt("tinctureBuffPercentage");l!==null&&a(l)},[]);const i=c.jsxs("span",{children:[g({en:"exclude damage when untargetable",zh:"Boss0"})," ",c.jsx(We,{topic:"untargetableMask",content:c.jsxs("div",{children:[c.jsx("div",{className:"paragraph",children:g({en:"Having this checked will exclude damages from untargetable phases.",zh:"Boss"})}),c.jsx("div",{className:"paragraph",children:g({en:'You can mark up such phases using timeline markers of type "Untargetable".',zh:"  "})}),c.jsx("div",{className:"paragraph",children:g({en:"This is just a statistics helper though. For example it doesn't prevent you from using skills when the boss is untargetable.",zh:"  "})})]})})]});return c.jsxs("div",{children:[c.jsx(Yt,{defaultValue:e,description:g({en:" tincture potency buff ",zh:" "}),onChange:a,width:2,style:{display:"inline"}}),c.jsx("span",{children:"%"}),c.jsx(Cu,{uniqueName:"untargetableMask",label:i,onChange:l=>{N.setUntargetableMask(l)}})]})}const _C="0.375em 0.75em";class cy extends ra.Component{constructor(a){super(a);Z(this,"selected",{totalDuration:0,targetableDuration:0,potency:{applied:0,pending:0},gcdSkills:{applied:0,pending:0}});Z(this,"data",{time:0,tinctureBuffPercentage:0,countdown:0,totalPotency:{applied:0,pending:0},lastDamageApplicationTime:0,gcdSkills:{applied:0,pending:0},mainTable:[],mainTableSummary:{totalPotencyWithoutPot:0,totalPotPotency:0,totalPartyBuffPotency:0},dotTables:new Map,mode:0});sT=i=>{this.data={...this.data,...i},this.forceUpdate()},ry=i=>{this.selected={...this.selected,...i},this.forceUpdate()}}componentWillUnmount(){sT=a=>{}}render(){const a=Ui(this.context),i=cF(),l=g({en:": ",zh:""}),r=g({en:" (",zh:""}),d=g({en:") ",zh:""}),E=i?"":g({en:" (checked only)",zh:""}),h=this.data.lastDamageApplicationTime-this.data.countdown,A=Ec(0,h),R=this.data.lastDamageApplicationTime>-this.data.countdown,T=R?h.toFixed(3).toString():"N/A";let S=g({en:"Total potency",zh:""}),I=g({en:"Selected potency",zh:""});if(this.data.tinctureBuffPercentage>0){const w=r+g({en:"pot +",zh:" +"})+this.data.tinctureBuffPercentage+"%"+d;S+=w,I+=w}S+=E,I+=E,S+=l+this.data.totalPotency.applied.toFixed(2),I+=l+this.selected.potency.applied.toFixed(2),this.data.totalPotency.pending>0&&(S+=r+this.data.totalPotency.pending.toFixed(2)+g({en:" pending",zh:""})+d),this.selected.potency.pending>0&&(I+=r+this.selected.potency.pending.toFixed(2)+g({en:" pending",zh:""})+d);let C=g({en:"GCD skills",zh:"GCD"})+E+l+this.data.gcdSkills.applied,_=g({en:"Selected GCD skills",zh:"GCD"})+E+l+this.selected.gcdSkills.applied;this.data.gcdSkills.pending>0&&(C+=r+"+"+this.data.gcdSkills.pending+g({en:" not yet applied",zh:""})+d),this.selected.gcdSkills.pending>0&&(_+=r+"+"+this.selected.gcdSkills.pending+g({en:" not yet applied",zh:""})+d);const b=N.game.overTimeEffectGroups.filter(w=>w.reportName&&!w.isHealing).map(w=>{let K=w.reportName+g({en:" uptime",zh:""})+l,W=0,D=0,Y=0;return w.groupedEffects.forEach(z=>{const B=this.data.dotTables.get(z.effectName);B&&(W+=B.summary.dotCoverageTimeFraction,D+=B.summary.totalTicks,Y=Math.max(Y,B.summary.maxTicks))}),K+=(W*100).toFixed(2)+"%",K+=r+g({en:"ticks",zh:""})+l+D+"/"+Y+d,c.jsx("div",{children:K},`dot-uptime-${w.reportName}`)});let y;const U=this.selected.targetableDuration>0;this.selected.totalDuration>0&&(y=c.jsxs("div",{style:{flex:1,color:a.accent},children:[c.jsxs("div",{children:[g({en:"Selected duration",zh:""}),l,this.selected.totalDuration.toFixed(3)]}),c.jsx("div",{children:I}),c.jsxs("div",{children:[g({en:"Selected PPS",zh:"PPS"}),l,U?(this.selected.potency.applied/this.selected.targetableDuration).toFixed(2):"N/A"]}),c.jsx("div",{children:_})]}));const L=c.jsxs("div",{style:{display:"flex",marginBottom:10,flexDirection:"row"},children:[c.jsxs("div",{style:{flex:1},children:[c.jsxs("div",{style:{color:this.data.mode!==0?a.historical:a.text},children:[c.jsxs("div",{children:[g({en:"Last damage application time",zh:""}),l,T]}),c.jsx("div",{children:S}),c.jsxs("div",{children:["PPS"," ",c.jsx(We,{topic:"ppsNotes",content:c.jsxs("div",{className:"toolTip",children:[c.jsx("div",{className:"paragraph",children:g({en:"(total applied potency of checked skills) / (total targetable duration from 0s until last damage application time).",zh:" / (0s - )"})}),c.jsx("div",{className:"paragraph",children:g({en:"could be inaccurate if any damage happens before pull, or if some damage's not applied yet",zh:"0sPPS"})})]})}),l,R?(this.data.totalPotency.applied/A).toFixed(2):"N/A"]}),c.jsx("div",{children:C}),b]}),c.jsxs("div",{style:{marginTop:10},children:[c.jsx(hF,{}),c.jsx(Ol,{fileFormat:Uo.Csv,getContentFn:()=>({body:N.getDamageLogCsv()}),filename:"damage-log",displayName:g({en:"download detailed damage log as CSV file",zh:"CSV"})})]})]}),y]}),M=function(w){return{verticalAlign:"middle",boxSizing:"border-box",display:"inline-block",width:w+"%",padding:_C}},G=function(w){return N.game.dotSkills.includes(w)},H=function(w){return G(w)?!0:["AUTOMATON_QUEEN","WILDFIRE",...Object.keys(Lo)].includes(w)},P=function(w){const K=w.row.skillName===w.lastRowSkill,W=[];W.push(w.row.displayedModifiers.map((Oe,Pe)=>c.jsx(IC,{buff:Oe},Pe)));const D=fi(w.row.skillName),Y=[];!K&&w.row.basePotency>0&&!(w.row.skillName in Lo)&&Y.push(c.jsx("input",{type:"checkbox",style:{position:"relative",top:2,marginRight:10},checked:D,onChange:()=>{SC({skillNameOrDoT:w.row.skillName,include:!D})}},"main")),!K&&G(w.row.skillName)&&Y.push(c.jsx("input",{type:"checkbox",style:{position:"relative",top:2,marginRight:10},checked:fi("DoT"),onChange:()=>{SC({skillNameOrDoT:"DoT",include:!fi("DoT")})}},"dot"));let z;K||(z=c.jsxs("span",{children:[c.jsxs("span",{style:{textDecoration:D?"none":"line-through",color:D?a.text:a.bgHighContrast},children:[Ti(w.row.skillName)," ",G(w.row.skillName)?c.jsx(We,{topic:"potencyStats-thunder",content:g({en:"See table below for details",zh:""})}):void 0]}),G(w.row.skillName)?c.jsxs("span",{style:{textDecoration:fi("DoT")?"none":"line-through",color:fi("DoT")?a.text:a.bgHighContrast},children:[c.jsx("br",{}),g({en:"(DoT)",zh:"DoT"})," "]}):void 0]}));let B;w.row.targetCount&&w.row.basePotency>0&&(B=c.jsx("span",{style:{textDecoration:D?"none":"line-through"},children:w.row.targetCount}));let ee;w.row.basePotency>0&&!H(w.row.skillName)&&(ee=c.jsx(_R,{includeInStats:D,basePotency:w.row.basePotency,helpTopic:"mainTable-potencyCalc-"+w.key,calc:w.row.calculationModifiers,falloff:w.row.falloff,targetCount:w.row.targetCount}));const he=w.row.usageCount-w.row.hitCount,se=c.jsxs("span",{style:{textDecoration:D?"none":"line-through"},children:[w.row.hitCount,he>0?c.jsxs("span",{style:{color:a.timeline.untargetableDamageMark+"af"},children:[" ","+",he," ",c.jsx(We,{topic:"mainTable-numUntargetableUsages-"+w.key,content:g({en:"usage(s) when untargetable",zh:"Boss"})})]}):void 0]});let Ae;w.row.showPotency&&!(w.row.skillName in Lo)&&(Ae=c.jsxs("span",{style:{textDecoration:D?"none":"line-through"},children:[w.row.totalPotencyWithoutPot.toFixed(2),w.row.potPotency>0?c.jsxs("span",{style:{color:D?a.timeline.potCover:a.bgHighContrast},children:[" ","+",w.row.potPotency.toFixed(2),"(",g({en:"pot",zh:""}),")(",w.row.potCount,")"]}):void 0,w.row.partyBuffPotency>0?c.jsxs("span",{style:{color:D?a.accent:a.bgHighContrast},children:[" ","+",w.row.partyBuffPotency.toFixed(2),"(",g({en:"party",zh:""}),")"]}):void 0]}));const Re={textAlign:"left",position:"relative",borderTop:K?"none":"1px solid "+a.bgMediumContrast};return D||(Re.color=a.bgHighContrast),c.jsxs("div",{style:Re,children:[c.jsx("div",{style:M(3),children:Y}),c.jsx("div",{style:M(18),children:z}),c.jsx("div",{style:M(8),children:B}),c.jsx("div",{style:M(19),children:W}),c.jsx("div",{style:M(14),children:ee}),c.jsx("div",{style:M(8),children:se}),c.jsx("div",{style:M(30),children:Ae})]},w.key)},q=[];for(let w=0;w<this.data.mainTable.length;w++)q.push(P({row:this.data.mainTable[w],key:w,lastRowSkill:w===0?void 0:this.data.mainTable[w-1].skillName}));const ne=function(w){const K=[];K.push(w.row.displayedModifiers.map((Re,Oe)=>c.jsx(IC,{buff:Re},Oe)));const W=w.row.gap.toFixed(3),D=w.row.gap>0?c.jsx("span",{children:W}):c.jsx("span",{}),Y=w.row.override.toFixed(3),z=w.row.override>0?c.jsx("span",{children:Y}):c.jsx("span",{}),B=c.jsx(_R,{basePotency:w.row.mainPotencyHit?w.row.baseMainPotency:0,includeInStats:!0,explainUntargetable:!w.row.mainPotencyHit,helpTopic:"thunderTable-main-"+w.key,calc:w.row.initialHitCalculationModifiers,targetCount:w.row.targetCount,falloff:w.row.mainHitFalloff}),ee=c.jsx(_R,{basePotency:w.row.baseDotPotency,includeInStats:!0,helpTopic:"thunderTable-dot-"+w.key,calc:w.row.tickCalculationModifiers,targetCount:w.row.targetCount,falloff:0}),he=w.row.totalNumTicks-w.row.numHitTicks,se=c.jsxs("span",{children:[w.row.numHitTicks,he>0?c.jsxs("span",{style:{color:a.timeline.untargetableDamageMark+"af"},children:[" ","+",he," ",c.jsx(We,{topic:"thunderTable-numUntargetableTicks-"+w.key,content:g({en:"tick(s) when untargetable",zh:"BossDoT"})})]}):void 0]}),Ae=c.jsxs("span",{children:[w.row.potencyWithoutPot.toFixed(2),w.row.potPotency>0?c.jsxs("span",{style:{color:a.timeline.potCover},children:[" ","+",w.row.potPotency.toFixed(2),"(",g({en:"pot",zh:""}),")"]}):void 0,w.row.partyBuffPotency>0?c.jsxs("span",{style:{color:a.accent},children:[" ","+",w.row.partyBuffPotency.toFixed(2),"(",g({en:"party",zh:""}),")"]}):void 0]});return c.jsxs("div",{style:{textAlign:"left",position:"relative",borderTop:"1px solid "+a.bgMediumContrast},children:[c.jsx("div",{style:M(8),children:w.row.castTime.toFixed(3)}),c.jsx("div",{style:M(8),children:w.row.applicationTime.toFixed(3)}),c.jsx("div",{style:M(12),children:K}),c.jsx("div",{style:M(10),children:D}),c.jsx("div",{style:M(10),children:z}),c.jsx("div",{style:M(10),children:B}),c.jsx("div",{style:M(10),children:ee}),c.jsx("div",{style:M(8),children:se}),c.jsx("div",{style:M(24),children:Ae})]},w.key)},Ee=[];this.data.dotTables.forEach((w,K)=>{const W=[];for(let D=0;D<w.tableRows.length;D++)W.push(ne({row:w.tableRows[D],key:D}));Ee.push({dotName:K,tableRows:W})});const ue={display:"inline-block",padding:_C};let de=g(i?{en:"Applied Skills",zh:""}:{en:"Applied Skills (Checked Only)",zh:""}),fe="";if(this.data.mode===1){const w=(this.data.time-this.data.countdown).toFixed(3)+"s",K=r+g({en:"up till "+w,zh:""+w})+d;de+=K,fe=K}else if(this.data.mode===2){const w=r+g({en:"from selected skills",zh:""})+d;de+=w,fe+=w}let Q=a.text;this.data.mode===1?Q=a.historical:this.data.mode===2&&(Q=a.accent);const J=c.jsxs("div",{id:"damageTable",style:{position:"relative",margin:"0 auto",marginBottom:40,maxWidth:960},children:[c.jsx("div",{style:{...M(100),textAlign:"center",marginBottom:10},children:c.jsx("b",{style:{color:Q},children:de})}),c.jsxs("div",{style:{outline:"1px solid "+a.bgMediumContrast},children:[c.jsxs("div",{children:[c.jsx("div",{style:{display:"inline-block",width:"21%"},children:c.jsx("span",{style:ue,children:c.jsx("b",{children:g({en:"skill",zh:""})})})}),c.jsx("div",{style:{display:"inline-block",width:"27%"},children:c.jsx("span",{style:ue,children:c.jsx("b",{children:g({en:"targets",zh:""})})})}),c.jsx("div",{style:{display:"inline-block",width:"14%"},children:c.jsx("span",{style:ue,children:c.jsx("b",{children:g({en:"potency",zh:""})})})}),c.jsx("div",{style:{display:"inline-block",width:"8%"},children:c.jsx("span",{style:ue,children:c.jsx("b",{children:g({en:"count",zh:""})})})}),c.jsx("div",{style:{display:"inline-block",width:"30%"},children:c.jsx("span",{style:ue,children:c.jsx("b",{children:g({en:"total",zh:""})})})})]}),q,c.jsxs("div",{style:{textAlign:"left",position:"relative",borderTop:"1px solid "+a.bgMediumContrast},children:[c.jsx("div",{style:M(70)}),c.jsx("div",{style:M(30),children:c.jsxs("span",{children:[this.data.mainTableSummary.totalPotencyWithoutPot.toFixed(2),this.data.mainTableSummary.totalPotPotency>0?c.jsxs("span",{style:{color:a.timeline.potCover},children:[" ","+",this.data.mainTableSummary.totalPotPotency.toFixed(2),g({en:" (pot +"+this.data.tinctureBuffPercentage+"%)",zh:"( +"+this.data.tinctureBuffPercentage+"%)"})]}):void 0,this.data.mainTableSummary.totalPartyBuffPotency>0?c.jsxs("span",{style:{color:a.accent},children:[" ","+",this.data.mainTableSummary.totalPartyBuffPotency.toFixed(2),"(",g({en:"party",zh:""}),")"]}):void 0]})})]})]})]}),F=Ee.map(w=>{var Y;const K=w.tableRows,W=(Y=this.data.dotTables.get(w.dotName))==null?void 0:Y.summary;if(W===void 0)return c.jsx(c.Fragment,{});const D=Xe(w.dotName)+fe;return c.jsxs("div",{style:{position:"relative",margin:"0 auto",marginBottom:40,maxWidth:960},children:[c.jsx("div",{style:{...M(100),textAlign:"center",marginBottom:10},children:c.jsx("b",{style:{color:Q},children:D})}),c.jsxs("div",{style:{outline:"1px solid "+a.bgMediumContrast},children:[c.jsxs("div",{children:[c.jsx("div",{style:{display:"inline-block",width:"8%"},children:c.jsx("span",{style:ue,children:c.jsx("b",{children:g({en:"cast time",zh:""})})})}),c.jsx("div",{style:{display:"inline-block",width:"8%"},children:c.jsx("span",{style:ue,children:c.jsx("b",{children:g({en:"application time",zh:""})})})}),c.jsx("div",{style:{display:"inline-block",width:"12%"},children:c.jsx("span",{style:ue})}),c.jsx("div",{style:{display:"inline-block",width:"10%"},children:c.jsxs("span",{style:ue,children:[c.jsxs("b",{children:[g({en:"gap",zh:"DoT"})," "]}),c.jsx(We,{topic:"dot-gap-title",content:g({en:c.jsxs("div",{children:[c.jsx("div",{className:"paragraph",children:"DoT coverage time gap since pull or previous application"}),c.jsx("div",{className:"paragraph",children:"The last row also includes gap at the beginning and end of the fight"})]}),zh:c.jsx("div",{children:"DoTDoT"})})})]})}),c.jsx("div",{style:{display:"inline-block",width:"10%"},children:c.jsxs("span",{style:ue,children:[c.jsxs("b",{children:[g({en:"override",zh:"DoT"})," "]}),c.jsx(We,{topic:"dot-override-title",content:g({en:c.jsx("div",{children:"Overridden DoT time from previous application"}),zh:c.jsx("div",{children:"DoT"})})})]})}),c.jsx("div",{style:{display:"inline-block",width:"10%"},children:c.jsx("span",{style:ue,children:c.jsx("b",{children:g({en:"initial",zh:""})})})}),c.jsx("div",{style:{display:"inline-block",width:"10%"},children:c.jsx("span",{style:ue,children:c.jsx("b",{children:g({en:"DoT",zh:"DoT"})})})}),c.jsx("div",{style:{display:"inline-block",width:"8%"},children:c.jsx("span",{style:ue,children:c.jsx("b",{children:g({en:"ticks",zh:""})})})}),c.jsx("div",{style:{display:"inline-block",width:"24%"},children:c.jsx("span",{style:ue,children:c.jsx("b",{children:g({en:"total",zh:""})})})})]}),K,c.jsxs("div",{style:{textAlign:"left",position:"relative",borderTop:"1px solid "+a.bgMediumContrast},children:[c.jsx("div",{style:M(28)}),c.jsx("div",{style:M(10),children:W.cumulativeGap.toFixed(3)}),c.jsx("div",{style:M(10),children:W.cumulativeOverride.toFixed(3)}),c.jsx("div",{style:M(20)}),c.jsx("div",{style:M(8),children:N.game.fullTimeDoTs.includes(w.dotName)?c.jsxs(c.Fragment,{children:[W.totalTicks,"/",W.maxTicks]}):c.jsx(c.Fragment,{children:W.totalTicks})}),c.jsxs("div",{style:M(24),children:[W.totalPotencyWithoutPot.toFixed(2),W.totalPotPotency>0?c.jsxs("span",{style:{color:a.timeline.potCover},children:[" ","+",W.totalPotPotency.toFixed(2),g({en:"(pot +"+this.data.tinctureBuffPercentage+"%)",zh:"( +"+this.data.tinctureBuffPercentage+"%)"})]}):void 0,W.totalPartyBuffPotency>0?c.jsxs("span",{style:{color:a.accent},children:[" ","+",W.totalPartyBuffPotency.toFixed(2),"(",g({en:"party",zh:""}),")"]}):void 0]})]})]})]},`dot-table-${w.dotName}`)});return c.jsxs("div",{children:[L,c.jsxs("div",{children:[J,F]})]})}}Z(cy,"contextType",Nn);const dd=e=>{e.job==="RDM"&&e.tryConsumeResource("DUALCAST")&&N.reportWarning({kind:"custom",en:"dualcast dropped"})},Fi=e=>e.job!=="NIN"||!e.hasResourceAvailable("TEN_CHI_JIN"),zi=e=>{e.job==="NIN"&&e.hasResourceAvailable("MUDRA")&&e.gainStatus("BUNNY")};lt(Sa,"INTERJECT",18,"cd_HEAD_GRAZE",{applicationDelay:0,cooldown:30,assetPath:"Role/Interject.png",startsAuto:!0});lt(Ul,"HEAD_GRAZE",24,"cd_HEAD_GRAZE",{applicationDelay:0,cooldown:30,assetPath:"Role/Head Graze.png"});Sa.forEach(e=>{qe(e,"REPRISAL",1,{timeout:15})});Ke(Sa,"REPRISAL",22,"cd_REPRISAL",{rscType:"REPRISAL",applicationDelay:.62,cooldown:60,duration:e=>e.hasTraitUnlocked("ENHANCED_REPRISAL")&&15||10,assetPath:"Role/Reprisal.png",startsAuto:!0});ca.forEach(e=>{qe(e,"FEINT",1,{timeout:15})});Ke(ca,"FEINT",22,"cd_FEINT",{rscType:"FEINT",applicationDelay:.537,cooldown:90,duration:e=>e.hasTraitUnlocked("ENHANCED_FEINT")&&15||10,assetPath:"Role/Feint.png",validateAttempt:Fi,onConfirm:zi});[...fc,...Ii].forEach(e=>{qe(e,"ADDLE",1,{timeout:15})});Ke([...Ii,...fc],"ADDLE",8,"cd_ADDLE",{rscType:"ADDLE",applicationDelay:.621,cooldown:90,duration:e=>e.hasTraitUnlocked("ENHANCED_ADDLE")&&15||10,assetPath:"Role/Addle.png"});Sa.forEach(e=>{qe(e,"RAMPART",1,{timeout:20})});Ke(Sa,"RAMPART",8,"cd_RAMPART",{rscType:"RAMPART",applicationDelay:.62,cooldown:90,assetPath:"Role/Rampart.png"});ca.forEach(e=>{qe(e,"TRUE_NORTH",1,{timeout:10})});Ke(ca,"TRUE_NORTH",50,"cd_TRUE_NORTH",{rscType:"TRUE_NORTH",applicationDelay:0,cooldown:45,maxCharges:2,assetPath:"Role/True North.png",validateAttempt:Fi,onConfirm:zi});[...Si,...Ii,...fc].forEach(e=>{qe(e,"SWIFTCAST",1,{timeout:10})});Ke([...Si,...Ii,...fc],"SWIFTCAST",18,"cd_SWIFTCAST",{rscType:"SWIFTCAST",applicationDelay:0,cooldown:40,assetPath:"Role/Swiftcast.png"});[...Si,...Ii,...fc].forEach(e=>{qe(e,"LUCID_DREAMING",1,{timeout:21})});Ke([...Si,...Ii,...fc],"LUCID_DREAMING",14,"cd_LUCID_DREAMING",{rscType:"LUCID_DREAMING",applicationDelay:.623,cooldown:60,assetPath:"Role/Lucid Dreaming.png",onApplication:(e,t)=>{const a=e.resources.get("LUCID_DREAMING");a.node=t,a.tickCount=0;const i=e.findNextQueuedEventByTag(Ea.LucidTick);i&&i.addTag(Ea.ManaGain)}});[...Sa,...ca,...Ul].forEach(e=>{qe(e,"ARMS_LENGTH",1,{timeout:6.5})});Ke([...Sa,...ca,...Ul],"ARMS_LENGTH",32,"cd_ARMS_LENGTH",{rscType:"ARMS_LENGTH",applicationDelay:.62,cooldown:120,assetPath:"Role/Arms Length.png",validateAttempt:Fi,onConfirm:zi});[...Si,...Ii].forEach(e=>{qe(e,"SURECAST",1,{timeout:6.5})});Ke([...Si,...Ii],"SURECAST",44,"cd_SURECAST",{rscType:"SURECAST",applicationDelay:0,cooldown:120,assetPath:"Role/Surecast.png"});ca.forEach(e=>{qe(e,"BLOODBATH",1,{timeout:20})});Ke(ca,"BLOODBATH",8,"cd_BLOODBATH",{rscType:"BLOODBATH",applicationDelay:.625,cooldown:90,assetPath:"Role/Bloodbath.png",validateAttempt:Fi,onConfirm:zi});lt([...ca,...Ul],"SECOND_WIND",12,"cd_SECOND_WIND",{healingPotency:600,applicationDelay:.625,cooldown:120,assetPath:"Role/Second Wind.png",validateAttempt:Fi,onConfirm:zi});lt(Sa,"PROVOKE",15,"cd_PROVOKE",{applicationDelay:.62,cooldown:30,assetPath:"Role/Provoke.png",drawsAggro:!0,startsAuto:!0});lt(Sa,"SHIRK",48,"cd_SHIRK",{applicationDelay:0,cooldown:120,assetPath:"Role/Shirk.png"});lt(Sa,"LOW_BLOW",25,"cd_LOW_BLOW",{applicationDelay:.62,cooldown:25,assetPath:"Role/Low Blow.png",startsAuto:!0});$a(Si,"ESUNA",10,{manaCost:400,castTime:0,applicationDelay:1.14,assetPath:"Role/Esuna.png"});lt(Si,"RESCUE",48,"cd_RESCUE",{applicationDelay:0,cooldown:120,assetPath:"Role/Rescue.png"});lt(ca,"LEG_SWEEP",10,"cd_LEG_SWEEP",{applicationDelay:.625,cooldown:40,assetPath:"Role/Leg Sweep.png",validateAttempt:Fi,onConfirm:zi});Ke(Os,"TINCTURE",1,"cd_TINCTURE",{rscType:"TINCTURE",applicationDelay:.64,cooldown:270,assetPath:"General/Tincture.png",validateAttempt:Fi,onConfirm:ke(dd,zi)});Ke(Os,"SPRINT",1,"cd_SPRINT",{rscType:"SPRINT",applicationDelay:.133,cooldown:60,assetPath:"General/Sprint.png",validateAttempt:Fi,onConfirm:ke(dd,zi)});Sa.forEach(e=>{qe(e,"SHIELD_WALL",1,{timeout:10}),qe(e,"STRONGHOLD",1,{timeout:12})});const wS=e=>Object.keys(JC).forEach(t=>{t!=="UNKNOWN"&&e.tryConsumeResource(t)});_a(Sa,"SHIELD_WALL","cd_LIMIT_BREAK_1",{tier:"1",applicationDelay:.45,animationLock:1.93,onApplication:e=>{wS(e),e.gainStatus("SHIELD_WALL")}});_a(Sa,"STRONGHOLD","cd_LIMIT_BREAK_2",{tier:"2",applicationDelay:.89,animationLock:3.86,onApplication:e=>{wS(e),e.gainStatus("STRONGHOLD")}});Sa.forEach(e=>{const t=Et[e].limitBreak??"UNKNOWN",a=Et[e].limitBreakBuff??"UNKNOWN";qe(e,a,1,{timeout:8}),_a(e,t,"cd_LIMIT_BREAK_3",{tier:"3",applicationDelay:1.34,animationLock:3.86,onApplication:i=>{wS(i),i.gainStatus(a)}})});_a(Si,"HEALING_WIND","cd_LIMIT_BREAK_1",{tier:"1",castTime:2,healingPotency:25,applicationDelay:.76,animationLock:2.1});_a(Si,"BREATH_OF_THE_EARTH","cd_LIMIT_BREAK_2",{tier:"2",castTime:2,healingPotency:50,applicationDelay:.8,animationLock:5.13});Si.forEach(e=>{const t=Et[e].limitBreak??"UNKNOWN";_a(e,t,"cd_LIMIT_BREAK_3",{tier:"3",castTime:2,healingPotency:100,applicationDelay:.8,animationLock:8.1})});_a(ca,"BRAVER","cd_LIMIT_BREAK_1",{tier:"1",castTime:2,applicationDelay:2.23,animationLock:3.86,potency:1e3,validateAttempt:Fi,onConfirm:zi});_a(ca,"BLADEDANCE","cd_LIMIT_BREAK_2",{tier:"2",castTime:3,applicationDelay:3.28,animationLock:3.86,potency:2200,validateAttempt:Fi,onConfirm:zi});ca.forEach(e=>{const t=Et[e].limitBreak??"UNKNOWN";_a(e,t,"cd_LIMIT_BREAK_3",{tier:"3",castTime:4.5,applicationDelay:2.26,animationLock:3.7,potency:3500,validateAttempt:Fi,onConfirm:zi})});_a(Ul,"BIGSHOT","cd_LIMIT_BREAK_1",{tier:"1",castTime:2,applicationDelay:2.23,animationLock:3.1,potency:540});_a(Ul,"DESPERADO","cd_LIMIT_BREAK_2",{tier:"2",castTime:3,applicationDelay:2.49,animationLock:3.1,potency:1170});Ul.forEach(e=>{const t=Et[e].limitBreak??"UNKNOWN";_a(e,t,"cd_LIMIT_BREAK_3",{tier:"3",castTime:4.5,applicationDelay:3.16,animationLock:3.7,potency:1890})});_a(Ii,"SKYSHARD","cd_LIMIT_BREAK_1",{tier:"1",castTime:2,applicationDelay:1.64,animationLock:3.1,onConfirm:dd,potency:600});_a(Ii,"STARSTORM","cd_LIMIT_BREAK_2",{tier:"2",castTime:3,applicationDelay:3.75,animationLock:5.1,onConfirm:dd,potency:1300});Ii.forEach(e=>{const t=Et[e].limitBreak??"UNKNOWN";_a(e,t,"cd_LIMIT_BREAK_3",{tier:"3",castTime:4.5,applicationDelay:4.5,animationLock:8.1,onConfirm:e==="RDM"?dd:void 0,potency:2100})});const gC="stdtick";var Zi,As,ac,di,ms,qu,Do,ic,Zu,Rs,Ts,Ss,Ln,oc,Di,Il,Le,hl,uy,El,Du,rT,qn,aE,dy,cT,cs,uT;class EF{constructor(){Ye(this,Le);Z(this,"timeScale");Z(this,"shouldLoop");Z(this,"tickMode");Z(this,"timeline");Ye(this,Zi);Z(this,"gameConfig");Z(this,"record");Z(this,"imageExportConfig");Z(this,"timelineDrawOptions",Iw);Z(this,"queuedPastes");Z(this,"clipboardMode");Z(this,"game");Ye(this,As,0);Ye(this,ac,!0);Ye(this,di);Ye(this,ms,[]);Ye(this,qu,[]);Ye(this,Do,[]);Ye(this,ic,new Map);Ye(this,Zu,new Map);Ye(this,Rs,new Map);Ye(this,Ts,new Map);Z(this,"savedHistoricalGame");Z(this,"savedHistoricalRecord");Ye(this,Ss,!1);Ye(this,Ln,!1);Ye(this,oc,!1);Ye(this,Di,!1);Z(this,"displayingUpToDateGameState",!0);Ye(this,Il,0);Z(this,"lastSkillTime",0);Z(this,"undoStack");this.timeScale=1,this.shouldLoop=!1,this.queuedPastes=0,this.tickMode=hi.RealTimeAutoPause,this.timeline=new YP,this.timeline.reset(),Ue(this,Zi,new nF),this.gameConfig=new Ei(Yh),this.game=wr(this.gameConfig),this.record=new po,this.record.config=this.gameConfig,this.imageExportConfig={wrapThresholdSeconds:JSON.parse(bt("img: wrapThresholdSeconds")??"0"),includeTime:JSON.parse(bt("img: includeTime")??"true")},this.clipboardMode=bt("radio: clipboardMode")??"plain",Ue(this,di,-this.gameConfig.countdown),this.savedHistoricalGame=this.game,this.savedHistoricalRecord=this.record,this.undoStack=new Lw,be(this,Le,El).call(this)}get inputLocked(){return this.shouldLoop||this.queuedPastes>0}updateStats(){be(this,Le,Du).call(this),be(this,Le,rT).call(this)}updateAllDisplay(t=this.game){oy(t.config.serialized()),this.updateStatusDisplay(t),this.updateSkillButtons(t),this.updateTimelineDisplay(),this.updateStats(),GE(this.getActiveJob())}checkRecordValidity(t,a,i=!1){console.assert(t.config!==void 0);const l={isValid:!0,invalidActions:[],skillUseTimes:[],straightenedIfValid:void 0};if(a===void 0)return console.log("no edit happened"),l;be(this,Le,El).call(this,!1);const r=t.config??this.gameConfig;this.game=wr(r),this.record=new po,this.record.config=r,Ue(this,di,-r.countdown),be(this,Le,hl).call(this,this.record.config);const d=be(this,Le,cs).call(this,{line:t,replayMode:Mn.Edited,firstEditedNodeIndex:a,selectionStart:t.getFirstSelection(),selectionEnd:t.getLastSelection()});return this.record.selectionStartIndex=t.selectionStartIndex,this.record.selectionStartIndex=t.selectionStartIndex,l.isValid=d.invalidActions.length===0,l.invalidActions=d.invalidActions,l.skillUseTimes=d.skillUseTimes,d.success&&(l.straightenedIfValid=this.record),this.displayingUpToDateGameState=i,l}displayHistoricalState(t,a){const i=t+this.gameConfig.countdown,l=this.record.getFirstSelection()!==void 0;be(this,Le,uy).call(this,()=>{const r=this.record;this.game=wr(this.gameConfig),this.record=new po,this.record.config=this.gameConfig,Ue(this,di,-this.gameConfig.countdown),be(this,Le,hl).call(this,this.record.config),be(this,Le,cs).call(this,{line:r,replayMode:Mn.Exact,maxReplayTime:i,cutoffIndex:a}),this.timeline.updateElem({type:rt.s_HistoricalCursor,time:this.game.time,displayTime:this.game.getDisplayTime(),enabled:!0}),this.updateStatusDisplay(this.game),this.updateSkillButtons(this.game),pl(),be(this,Le,Du).call(this),this.timeline.drawElements()}),FE(!0),l&&be(this,Le,Du).call(this,!0),be(this,Le,rT).call(this)}displayCurrentState(){this.displayingUpToDateGameState=!0,this.timeline.updateElem({type:rt.s_HistoricalCursor,enabled:!1,time:0,displayTime:0}),FE(!1),this.updateAllDisplay(this.game)}restart(){be(this,Le,El).call(this),be(this,Le,hl).call(this,this.gameConfig)}getPresetLines(){return le(this,Zi).getLinesForJob(this.getActiveJob())}serializedPresets(){return le(this,Zi).serialized()}addSelectionToPreset(t="(untitled)"){console.assert(this.record.getFirstSelection());const a=this.record.getSelected();a.name=t,le(this,Zi).addLine(a,this.getActiveJob())}appendFilePresets(t){le(this,Zi).deserializeAndAppend(t)}loadBattleRecordFromFile(t){t.config===void 0&&(window.alert("Error loading record: saved record had no config object"),console.error(t)),t.config.procMode===void 0&&(t.config.rngProcs!==void 0?t.config.procMode=t.config.rngProcs?fa.RNG:fa.Never:t.config.procMode=fa.RNG),t.config.fps===void 0&&(t.config.fps=Yh.fps),t.config.gcdSkillCorrection===void 0&&(t.config.gcdSkillCorrection=Yh.gcdSkillCorrection),t.config.level&&(t.config.level=parseInt(t.config.level)),t.config.skillSpeed===void 0&&(t.config.skillSpeed=Ot.getSubstatBase(t.config.level)),t.config.shellVersion===void 0&&(t.config.shellVersion=vo.Initial),t.config.job===void 0&&(t.config.job=ly(t.actions.flatMap(a=>a.skillName?[YT(a.skillName)]:[]))),ca.includes(t.config.job)||(t.config.initialResourceOverrides=t.config.initialResourceOverrides.filter(a=>![ze.FLANK_POSITIONAL.name,ze.REAR_POSITIONAL.name].includes(a.type))),Ou(()=>{const a=new Ei(t.config);this.gameConfig=a,this.record=new po,this.record.config=a,be(this,Le,El).call(this),be(this,Le,hl).call(this,this.gameConfig);const i=sc.deserialize(t.actions),l=be(this,Le,cs).call(this,{line:i,replayMode:Mn.Exact});if(!l.success){let r=`Error loading record- 
`;if(l.invalidActions.length>0){const d=l.invalidActions[0].node;if(d.info.type===Ve.Skill){const E=d.info.skillName?Ti(d.info.skillName):"(unknown)";r+=`Stopped here because the next action ${E} can't be added: `}else r+=`Stopped here because the next action ${d.info.type} can't be added: `}r+=l.invalidActions[0].reason,window.alert(r)}})}applyEditedRecord(){const t=this.record;this.record=new po,this.record.config=t.config,be(this,Le,El).call(this),be(this,Le,hl).call(this,this.gameConfig);const a=be(this,Le,cs).call(this,{line:t,replayMode:Mn.Exact,removeTrailingIdleTime:!0});console.assert(a.success),t.selectionStartIndex!==void 0&&(this.record.selectSingle(t.selectionStartIndex),this.record.selectUntil(t.selectionEndIndex)),this.autoSave()}deleteSelectedSkills(){const t=this.record.selectionStartIndex;if(t!==void 0){this.record.deleteSelected();const a=$n();t<this.record.length?(this.record.selectSingle(t),this.displayHistoricalState(a.skillUseTimes[t],t)):this.displayCurrentState(),this.autoSave()}}getTincturePotencyMultiplier(){return 1+le(this,As)*.01}setTinctureBuffPercentage(t){Ue(this,As,t),this.displayCurrentState(),Go()}setUntargetableMask(t){Ue(this,ac,t),this.displayCurrentState(),Go()}getUntargetableMask(){return le(this,ac)}getMaxTicks(t,a,i){let l=0;const r=[a];return i||r.push(gC),r.forEach(d=>{var E;(E=le(this,ic).get(d))==null||E.forEach(h=>{!Jn(h-this.gameConfig.countdown)&&h<=t&&l++})}),l}getDotCoverageTimeFraction(t,a){return this.getOverTimeCoverageTimeFraction(t,a,le(this,Rs))}getHotCoverageTimeFraction(t,a){return this.getOverTimeCoverageTimeFraction(t,a,le(this,Ts))}getOverTimeCoverageTimeFraction(t,a,i){if(t<=_n.epsilon)return 0;const l=i.get(a);if(!l)return 0;let r=0;l.forEach(E=>{if(E.tStartDisplay<=t){const h=Math.max(0,E.tStartDisplay);let A=E.tEndDisplay!==void 0&&E.tEndDisplay<=t?E.tEndDisplay:t;A=Math.max(0,A),r+=Ec(h,A)}});const d=Ec(0,t);return r/d}setTimelineOptions(t){this.timelineDrawOptions={...this.timelineDrawOptions,...t},this.updateTimelineDisplay()}getTimelineRenderingProps(){var l,r;const t=this.record.getFirstSelection()!=null&&this.record.getLastSelection()!=null;let a=this.gameConfig.countdown;const i=this.timeline.getAllSlotsTimeInfo();return i!==null&&(a=Math.max(a,i.countdown)),{timelineWidth:this.timeline.getCanvasWidth(),timelineHeight:this.timeline.getCanvasHeight(),scale:this.timeline.scale,countdown:a,tincturePotencyMultiplier:this.getTincturePotencyMultiplier(),untargetableMask:le(this,ac),sharedElements:this.timeline.sharedElements,slots:this.timeline.slots,activeSlotIndex:this.timeline.activeSlotIndex,allMarkers:this.timeline.getAllMarkers(),untargetableMarkers:this.timeline.getUntargetableMarkers(),buffMarkers:this.timeline.getBuffMarkers(),showSelection:t,selectionStartDisplayTime:(((l=this.record.getFirstSelection())==null?void 0:l.tmp_startLockTime)??0)-this.gameConfig.countdown,selectionEndDisplayTime:(((r=this.record.getLastSelection())==null?void 0:r.tmp_endLockTime)??0)-this.gameConfig.countdown,drawOptions:this.timelineDrawOptions}}reportWarning(t){le(this,Ln)||this.timeline.addElement({type:rt.WarningMark,warningType:t,time:this.game.time,displayTime:this.game.getDisplayTime()})}reportComboBreak(){this.reportWarning({kind:"combobreak"})}resolvePotency(t){this.resolveAnyPotency(t,rt.DamageMark,le(this,ms)),be(this,Le,Du).call(this)}resolveHealingPotency(t){this.resolveAnyPotency(t,rt.HealingMark,le(this,qu))}resolveOverTimePotency(t,a){a==="damage"?this.resolveAnyPotency(t,rt.DamageMark,le(this,ms)):this.resolveAnyPotency(t,rt.HealingMark,le(this,qu))}resolveAnyPotency(t,a,i){t.resolve(this.game.getDisplayTime()),Ue(this,di,this.game.time),t.base===0&&(a=rt.AggroMark);let l=!1;if(t.modifiers.forEach(r=>{r.source===k.POT&&(l=!0)}),!le(this,Ln)){let r="{skill}@"+t.sourceTime.toFixed(3);t.description.length>0&&(r+=" "+t.description);const d={potency:t,sourceDesc:r,sourceSkill:t.sourceSkill},E=this.timeline.tryGetElement(this.game.time,a);E?(E.potencyInfos.push(d),l&&!E.buffs.includes("TINCTURE")&&E.buffs.push("TINCTURE")):this.timeline.addElement({type:a,potencyInfos:[d],buffs:l?["TINCTURE"]:[],time:this.game.time,displayTime:this.game.getDisplayTime()}),i.push({time:this.game.getDisplayTime(),source:t.sourceSkill+"@"+t.sourceTime,potency:t.getAmount({tincturePotencyMultiplier:1,includePartyBuffs:!0,includeSplash:!0}),buffs:l?["TINCTURE"]:[]})}}reportLucidTick(t,a){le(this,Ln)||this.timeline.addElement({type:rt.LucidMark,time:t,displayTime:this.game.getDisplayTime(),sourceDesc:a})}reportManaTick(t,a){le(this,Ln)||this.timeline.addElement({type:rt.MPTickMark,time:t,displayTime:this.game.getDisplayTime(),sourceDesc:a})}reportMeditateTick(t,a){le(this,Ln)||this.timeline.addElement({type:rt.MeditateTickMark,time:t,displayTime:this.game.getDisplayTime(),sourceDesc:a})}reportAutoTick(t,a){le(this,Ln)||this.timeline.addElement({type:rt.AutoTickMark,time:t,displayTime:this.game.getDisplayTime(),sourceDesc:a})}reportDotTick(t,a){this.reportOverTimeTick(t,le(this,ic),a)}reportHotTick(t,a){this.reportOverTimeTick(t,le(this,Zu),a)}reportOverTimeTick(t,a,i){if(!le(this,Ln)){const l=i??gC;let r=a.get(l);r||(r=[],a.set(l,r)),r.push(t),this.updateStats()}}reportDotStart(t,a){this.reportOverTimeStart(t,a,"damage")}reportHotStart(t,a){this.reportOverTimeStart(t,a,"healing")}reportOverTimeStart(t,a,i){if(!le(this,Ln)){const l=i==="damage"?le(this,Rs):le(this,Ts);let r=l.get(a);r||(r=[],l.set(a,r));const d=r.length;console.assert(d===0||r[d-1].tEndDisplay!==void 0),r.push({tStartDisplay:t,tEndDisplay:void 0})}}reportDotDrop(t,a){this.reportOverTimeDrop(t,a,"damage")}reportHotDrop(t,a){this.reportOverTimeDrop(t,a,"healing")}reportOverTimeDrop(t,a,i){if(!le(this,Ln)){const r=(i==="damage"?le(this,Rs):le(this,Ts)).get(a);if(console.assert(r,`Reported dropping ${a} when no coverage was detected`),!r)return;const d=r.length;console.assert(d>0&&r[d-1].tEndDisplay===void 0),r[d-1].tEndDisplay=t}}updateStatusDisplay(t){const a=t.resources.get("NOT_CASTER_TAXED"),i=t.resources.get("NOT_ANIMATION_LOCKED"),l=t.cooldowns.get("cd_GCD"),r={gcdReady:l.stacksAvailable()>0,gcd:l.currentStackCd(),timeTillGCDReady:t.cooldowns.timeTillAnyStackAvailable("cd_GCD"),castLocked:t.resources.timeTillReady("NOT_CASTER_TAXED")>0,castLockTotalDuration:a.pendingChange?a.pendingChange.delay:0,castLockCountdown:t.resources.timeTillReady("NOT_CASTER_TAXED"),animLocked:t.resources.timeTillReady("NOT_ANIMATION_LOCKED")>0,animLockTotalDuration:i.pendingChange?i.pendingChange.delay:0,animLockCountdown:t.resources.timeTillReady("NOT_ANIMATION_LOCKED"),canMove:t.resources.get("MOVEMENT").available(1)},d=t.statusPropsGenerator;ob(E=>({time:t.getDisplayTime(),resources:d.getAllResourceViewProps(E),resourceLocks:r,enemyBuffs:d.getAllOtherTargetedBuffViewProps(),selfBuffs:d.getAllSelfTargetedBuffViewProps(),level:t.config.level}),d.statusLayoutFn)}updateTimelineDisplay(){this.timeline.setTimeSegment(0,this.game.time),pl(),Bu(),le(this,Ln)||this.timeline.updateElem({type:rt.s_Cursor,time:this.game.time,displayTime:this.game.getDisplayTime()}),this.timeline.drawElements()}updateSkillButtons(t){TO(this.game.displayedSkills.getCurrentSkillNames(this.game).map(a=>t.getSkillAvailabilityStatus(a)))}setTimeControlSettings(t){this.timeScale=t.timeScale,this.tickMode=t.tickMode,this.shouldLoop=!1}setConfigAndRestart(t,a=!0){const i=this.gameConfig.job!==t.job,l=this.gameConfig.countdown,r=l<t.countdown;i&&!a&&(console.error("attempted to apply config without reset even though job changed; forcing reset"),a=!0),Ou(()=>{this.gameConfig=new Ei({...t,shellVersion:TT.version}),a?this.record=new po:r&&this.record.prependActionNode(_l(-l)),this.record.config=this.gameConfig,be(this,Le,El).call(this),be(this,Le,hl).call(this,this.gameConfig),i&&GE(t.job)}),this.autoSave()}getDisplayedGame(){return this.displayingUpToDateGameState?this.game:this.savedHistoricalGame}getActiveJob(){return this.game.job}getSkillInfo(t){return t.game.getSkillAvailabilityStatus(t.skillName)}autoSave(){const t=this.record.serialized();this.timeline.saveCurrentSlot(t,this.gameConfig.countdown,this.game.time)}tryAutoLoad(){const t=bt("gameRecord");t!==null&&(console.log("migrating existing record to slot 0"),It("gameRecord0",t),MR("gameRecord"));for(let l=0;l<Mi;l++)this.timeline.loadSlot(l);this.timeline.slots.length>0||this.timeline.addSlot();const i=parseInt(bt("activeSlotIndex")??"0");this.setActiveSlot(i>=Mi?0:i),this.undoStack.clear()}setActiveSlot(t){be(this,Le,aE).call(this,{shouldLoop:!1}),Ou(()=>{this.autoSave(),this.record.unselectAll(),this.timeline.loadSlot(t)||console.error(`failed to load timeline in cached active slot ${t}`)}),this.savedHistoricalGame=this.game,this.savedHistoricalRecord=this.record,this.displayCurrentState(),It("activeSlotIndex",t.toString())}cloneActiveSlot(){if(this.timeline.activeSlotIndex<0||this.timeline.activeSlotIndex>=this.timeline.slots.length){console.error("tried to clone slot with invalid activeSlotIndex "+this.timeline.activeSlotIndex);return}be(this,Le,aE).call(this,{shouldLoop:!1}),Ou(()=>{const t=this.record.serialized();this.timeline.addSlot(),this.loadBattleRecordFromFile(t),this.autoSave(),this.timeline.loadSlot(this.timeline.slots.length-1)}),this.displayCurrentState()}getDamageLogCsv(){const t=le(this,ms).map(a=>{let i=!1;a.buffs.forEach(r=>{r==="TINCTURE"&&(i=!0)});let l=a.potency;return i&&(l*=this.getTincturePotencyMultiplier()),[a.time,a.source,l]});return[["time","damageSource","potency"]].concat(t)}getActionsLogCsv(){const t=le(this,Do).map(a=>[a.time,a.action,a.isGCD,a.castTime]);return[["time","action","isGCD","castTime"]].concat(t)}getAmaSimCsv(){const t=_=>_===In.TINCTURE.name?"Grade 3 Gemdraught":_.endsWith("(Ten)")||_.endsWith("(Chi)")||_.endsWith("(Jin)")?_.substring(0,_.length-6):_.replace(" 2"," II").replace(" 3"," III").replace(" 4"," IV"),a=this.getActiveJob(),i=Sa.includes(a)||ca.includes(a),l=this.timeline.getBuffMarkers().map(_=>{const b=new gE(_.description);let y=b.info.name;b.info.name===x.Card_TheSpear?y="The Spear":b.info.name===x.Card_TheBalance?y="The Balance":[x.RadiantFinale1,x.RadiantFinale2,x.RadiantFinale3].includes(b.info.name)&&(y="Radiant Finale");const U=b.info.name===x.Dokumori||b.info.name===x.ChainStratagem,L=()=>U?"Debuff Only":b.info.name===x.RadiantFinale1?'"1 Coda, Buff Only"':b.info.name===x.RadiantFinale2?'"2 Coda, Buff Only"':b.info.name===x.RadiantFinale3?'"3 Coda, Buff Only"':[x.ArmysPaeon,x.MagesBallad,x.WanderersMinuet,x.StandardFinish,x.TechnicalFinish].includes(b.info.name)?"Buff Only":b.info.name===x.Card_TheSpear?i?"Small":"Big":b.info.name===x.Card_TheBalance?i?"Big":"Small":"";return[_.time,y,b.info.job,L(),U?"Boss0":""]});let r=this.gameConfig.getOverrideStacks("MAGES_CODA")??0,d=this.gameConfig.getOverrideStacks("WANDERERS_CODA")??0,E=this.gameConfig.getOverrideStacks("ARMYS_CODA")??0,h=this.gameConfig.getOverrideStacks("RADIANT_CODA")??0;const A=le(this,Do).filter(_=>!_.action.includes("Toggle buff")).map(_=>{let b="";if(_.isDamaging&&_.targetCount!==void 0){b='"';for(let L=0;L<_.targetCount;L++)L!==0&&(b+=", "),b+="Boss"+L.toString();b+='"'}let y="";const U=r+d+E;return _.action==="Mage's Ballad"?r=1:_.action==="The Wanderer's Minuet"?d=1:_.action==="Army's Paeon"?E=1:_.action==="Radiant Finale"?U>0&&(h=U,y=`${U} Coda`,r=0,d=0,E=0):_.action==="Radiant Encore"&&h>0&&(y=`${h} Encore`,h=0),[_.time,t(_.action),"",y,b]}),R=["use_strict_skill_naming = False"],T=!(i||Ul.includes(a)),S={[nt.lvl70]:new Map([["WHM",162],["SCH",264],["AST",148],["SGE",177],["BLM",133],["SMN",264],["RDM",162],["PCT",148]]),[nt.lvl80]:new Map([["WHM",189],["SCH",308],["AST",172],["SGE",206],["BLM",155],["SMN",308],["RDM",189],["PCT",172]]),[nt.lvl90]:new Map([["WHM",216],["SCH",353],["AST",197],["SGE",236],["BLM",177],["SMN",353],["RDM",216],["PCT",197]]),[nt.lvl100]:new Map([["WHM",244],["SCH",398],["AST",222],["SGE",266],["BLM",200],["SMN",398],["RDM",244],["PCT",222]])};let I={job_class:a,det_stat:this.gameConfig.determination,crit_stat:this.gameConfig.criticalHit,dh_stat:this.gameConfig.directHit,tenacity:this.gameConfig.tenacity,speed_stat:T?this.gameConfig.spellSpeed:this.gameConfig.skillSpeed,version:LL,level:this.gameConfig.level,wd:this.gameConfig.wd,main_stat:this.gameConfig.main};S[this.gameConfig.level].has(a)&&(I={...I,healer_or_caster_strength:S[this.gameConfig.level].get(a)}),R.push("stats = "+JSON.stringify(I));const C=this.timeline.getUntargetableMarkers().map(_=>`(${_.time}, ${_.time+_.duration}),`);return C.length>0&&R.push("downtime_windows = ("+C.join(" ")+")"),{meta:R,body:[["time","skill_name","job_class","skill_conditional","targets"]].concat(l,A)}}tryAddLine(t,a=Mn.SkillSequence){const i=N.record.length,l=be(this,Le,cs).call(this,{line:t,replayMode:a});return l.success?(this.undoStack.push(new dS(t.actions,i,"preset")),this.autoSave(),$n(),!0):(this.rewindUntilBefore(l.firstAddedIndex,!1),window.alert('Failed to add line "'+t.name+'" due to insufficient resources and/or stats mismatch.'),!1)}deleteLine(t){le(this,Zi).deleteLine(t)}deleteAllLines(){le(this,Zi).deleteAllLines()}reportInterruption(t){if(le(this,oc)||this.tickMode===hi.RealTimeAutoPause&&this.shouldLoop){const a=t.failNode.getNameForMessage();window.alert("Cast interrupted! Resources for "+a+" are no longer available"),console.warn("failed: "+a);const i=this.game.time,l=this.shouldLoop;this.rewindUntilBefore(t.failIndex,!1),this.autoSave(),be(this,Le,qn).call(this,{deltaTime:i-this.game.time,waitKind:"duration"}),this.shouldLoop=l}else Ue(this,Ss,!0),le(this,Ln)||this.timeline.invalidateLastElement()}rewindUntilBefore(t,a){const i=this.record;this.record=new po,this.record.config=this.gameConfig,be(this,Le,El).call(this),be(this,Le,hl).call(this,this.gameConfig),t!==void 0&&(i.spliceUpTo(t),be(this,Le,cs).call(this,{line:i,replayMode:Mn.Exact,removeTrailingIdleTime:a}))}removeTrailingIdleTime(){let t;for(let i=this.record.tailIndex;i>=0;i--)if(this.record.actions[i].info.type===Ve.Skill){t=i;break}const a=t===void 0?this.record.actions.slice():this.record.actions.slice(t+1);a.length>0&&this.undoStack.push(new Pr((t??-1)+1,a,"delete")),t===void 0?this.rewindUntilBefore(0,!0):this.rewindUntilBefore(t+1,!0),$n()}waitTillNextMpOrLucidTick(){const t=be(this,Le,qn).call(this,{deltaTime:this.game.timeTillNextMpGainEvent(),waitKind:"mp"});t!==void 0&&this.undoStack.push(new ls(t,this.record.tailIndex)),$n(),this.updateAllDisplay()}insertRecordNodes(t,a){this.record.insertActionNodes(t,a),this.autoSave();const i=$n();let l;t.length>1?(l=Math.min(a,this.record.tailIndex),this.record.selectSingle(l),this.record.selectUntil(l+t.length-1)):(l=Math.min(a+1,this.record.tailIndex),this.record.selectSingle(l)),this.displayHistoricalState(i.skillUseTimes[l],l)}insertRecordNode(t,a){this.insertRecordNodes([t],a)}requestUseSkill(t,a=!1){if(Ue(this,oc,!0),!this.inputLocked)if(this.displayingUpToDateGameState)be(this,Le,cT).call(this,t.skillName,t.targetCount,this.tickMode,-1,!1,a).status.ready()&&(this.scrollToTime(this.game.time),this.autoSave(),this.tickMode!==hi.RealTimeAutoPause&&$n());else{const i=this.record.selectionStartIndex;if(i!==void 0){const l=gs(t.skillName,t.targetCount);this.insertRecordNode(l,i),a&&this.undoStack.push(new ls(l,i))}}Ue(this,oc,!1)}requestToggleBuff(t,a=!1){if(!this.game.requestToggleBuff(t))return!1;const l=UR(t);return l.tmp_startLockTime=this.game.time,l.tmp_endLockTime=l.tmp_startLockTime,this.record.addActionNode(l),a&&this.undoStack.push(new ls(l,this.record.tailIndex)),le(this,Do).push({time:this.game.getDisplayTime(),action:"Toggle buff: "+ze[t].name,isGCD:0,castTime:0,isDamaging:!1}),!0}scrollToTime(t){const a=t===void 0?this.game.time:t;setTimeout(()=>{Gy(et.positionFromTimeAndScale(a,this.timeline.scale))},0)}step(t,a=!1){let i,l=this.record.length;this.displayingUpToDateGameState?(i=be(this,Le,qn).call(this,{deltaTime:t,waitKind:"duration"}),this.autoSave(),this.updateAllDisplay()):this.record.selectionStartIndex!==void 0&&(l=this.record.selectionStartIndex,i=Fr(t),this.insertRecordNode(i,l)),a&&i&&this.undoStack.push(new ls(i,l))}stepUntil(t,a=!1){let i,l=this.record.length;this.displayingUpToDateGameState?(i=be(this,Le,qn).call(this,{deltaTime:t-this.game.getDisplayTime(),waitKind:"target"}),this.autoSave(),this.updateAllDisplay()):this.record.selectionStartIndex!==void 0&&(l=this.record.selectionStartIndex,i=_l(t),this.insertRecordNode(i,l)),a&&i&&this.undoStack.push(new ls(i,l))}handleKeyboardEvent(t){if(this.inputLocked)return;const a=t.ctrlKey||t.metaKey,i=N.record.selectionStartIndex,l=i!==void 0;let r=!1;this.displayingUpToDateGameState&&t.key==="u"&&(this.undoStack.doThenPush(new Pr(this.record.tailIndex,[this.record.actions[this.record.tailIndex]],"delete")),r=!0),t.key==="z"&&a?(this.undoStack.undo(),r=!0):t.key==="Z"&&a||t.key==="y"&&a?(this.undoStack.redo(),r=!0):t.key==="Paste"||t.key==="v"&&a?(tb(),r=!0):t.key==="Copy"||t.key==="c"&&a?l&&(QR(),r=!0):(t.key==="Cut"||t.key==="x"&&a)&&l&&(QR(),N.undoStack.push(new Pr(i,N.record.getSelected().actions,"delete")),N.deleteSelectedSkills(),r=!0),r&&t.preventDefault()}handleTimelineKeyboardEvent(t){var a,i;if(!this.inputLocked){const l=t.ctrlKey||t.metaKey,r=N.record.selectionStartIndex,d=N.record.selectionEndIndex,E=r!==void 0;let h=!1,A=!1;t.key==="Backspace"||t.key==="Delete"?E&&(N.undoStack.push(new Pr(r,N.record.getSelected().actions,"delete")),N.deleteSelectedSkills()):t.key==="ArrowUp"?E?(t.shiftKey?N.timeline.resizeSelection(!0):N.timeline.onClickTimelineAction(r-1,!1),h=!0,t.preventDefault()):N.record.length>0&&(N.timeline.onClickTimelineAction(N.record.tailIndex,!1),h=!0,t.preventDefault()):t.key==="ArrowDown"?E?(t.shiftKey?N.timeline.resizeSelection(!1):N.timeline.onClickTimelineAction(d+1,!1),A=!0,t.preventDefault()):N.record.length>0&&(N.timeline.onClickTimelineAction(0,!1),A=!0,t.preventDefault()):t.key==="Home"?(N.timeline.onClickTimelineAction(0,t.shiftKey),h=!0):t.key==="End"?(N.timeline.onClickTimelineAction(N.record.tailIndex,t.shiftKey),A=!0):t.key==="Escape"?(N.record.unselectAll(),N.displayCurrentState()):t.key==="a"&&l&&(N.timeline.onClickTimelineAction(0,!1),N.timeline.onClickTimelineAction(N.record.tailIndex,!0),t.preventDefault()),h?(this.scrollToTime((a=this.record.selectionStart)==null?void 0:a.tmp_startLockTime),cS()):A&&(this.scrollToTime((i=this.record.selectionEnd)==null?void 0:i.tmp_startLockTime),qO())}}setImageExportConfig(t){this.imageExportConfig=t}}Zi=new WeakMap,As=new WeakMap,ac=new WeakMap,di=new WeakMap,ms=new WeakMap,qu=new WeakMap,Do=new WeakMap,ic=new WeakMap,Zu=new WeakMap,Rs=new WeakMap,Ts=new WeakMap,Ss=new WeakMap,Ln=new WeakMap,oc=new WeakMap,Di=new WeakMap,Il=new WeakMap,Le=new WeakSet,hl=function(t){const a=t.initialResourceOverrides;for(let i=0;i<a.length;i++)a[i].applyTo(this.game)},uy=function(t){const a=le(this,Ln);this.displayingUpToDateGameState=!1,Ue(this,Ln,!0);const i=this.game,l=this.record,r=le(this,di);t(),Ue(this,Ln,a),this.savedHistoricalGame=this.game,this.savedHistoricalRecord=this.record,this.game=i,this.record=l,Ue(this,di,r)},El=function(t=!0){this.game=wr(this.gameConfig),be(this,Le,aE).call(this,{shouldLoop:!1}),this.timeline.reset(),t&&this.record.unselectAll(),Ue(this,di,-this.gameConfig.countdown),Ue(this,ms,[]),Ue(this,Do,[]),Ue(this,ic,new Map),Ue(this,Rs,new Map),Ue(this,Zu,new Map),Ue(this,Ts,new Map),Ue(this,Ss,!1),this.displayingUpToDateGameState=!0},Du=function(t=!1){if(!le(this,Di)){let a=dF({tinctureBuffPercentage:le(this,As),lastDamageApplicationTime:le(this,di)});t&&(a={mainTable:a.mainTable,mainTableSummary:a.mainTableSummary,dotTables:a.dotTables,mode:a.mode}),sT(a)}},rT=function(){if(!le(this,Di)){const t=uF({tinctureBuffPercentage:le(this,As),lastDamageApplicationTime:le(this,di)});ry(t)}},qn=function(t){const a=this.game.time,i=t.deltaTime+this.game.getDisplayTime();if(t.deltaTime>0){Ue(this,Il,t.deltaTime);const l=this.game.tick(t.deltaTime,t.prematureStopCondition?t.prematureStopCondition:()=>!1);let r;return t.waitKind==="duration"?r=Fr(l):t.waitKind==="target"?r=_l(i):t.waitKind==="mp"&&(r=p0()),r!==void 0&&(r.tmp_startLockTime=a,r.tmp_endLockTime=t.deltaTime+a,this.record.addActionNode(r)),r}},aE=function(t){const a=t.shouldLoop;this.shouldLoop!==a&&(this.shouldLoop=a,this.shouldLoop&&be(this,Le,uT).call(this,()=>this.shouldLoop))},dy=function(t){let a=this.game.timeTillAnySkillAvailable();t>=0&&(a=Math.min(t-this.game.time,a)),be(this,Le,qn).call(this,{deltaTime:a})},cT=function(t,a,i=this.tickMode,l=-1,r=!0,d=!1){let E=this.game.getSkillAvailabilityStatus(t);const h=this.game.time,A=E.timeTillAvailable,R=be(this,Le,qn).call(this,{deltaTime:A});d&&R&&this.undoStack.push(new ls(R,this.record.tailIndex)),t=N0(t,this.game),E=this.game.getSkillAvailabilityStatus(t);const T=gs(t,a);let S;if(E.status.ready())T.tmp_startLockTime=this.game.time,this.record.addActionNode(T),S=this.record.tailIndex,d&&T&&this.undoStack.push(new ls(T,this.record.tailIndex)),this.game.useSkill(t,T,S),T.tmp_invalid_reasons=[],i===hi.RealTimeAutoPause&&(this.shouldLoop=!0,be(this,Le,uT).call(this,()=>this.game.timeTillAnySkillAvailable()>0,!0));else{if(!r){if(A>0){const C=Fr(A);C.tmp_startLockTime=h,C.tmp_endLockTime=this.game.time,this.record.addActionNode(C)}return E}this.record.addActionNode(T),S=this.record.tailIndex,this.game.useInvalidSkill(t,T),T.tmp_invalid_reasons=E.status.unavailableReasons}const I=this.game.timeTillAnySkillAvailable();if(T.tmp_startLockTime=this.game.time,T.tmp_endLockTime=this.game.time+I,!le(this,Ln)){this.lastSkillTime=this.game.time;const C=this.game.getSkillAvailabilityStatus(t,!0);let b=this.game.skillsList.get(t).cdName==="cd_GCD";const y=E.castTime>0&&!E.instantCast,U=y?E.castTime-Ei.getSlidecastWindow(E.castTime):0;let L=C.cdRecastTime;t==="MEDITATE"&&(b=!0,L=this.game.getSkillAvailabilityStatus("YUKIKAZE").cdRecastTime),this.timeline.addElement({type:rt.Skill,displayTime:this.game.getDisplayTime(),skillName:t,isGCD:b,isSpellCast:y,time:this.game.time,relativeSnapshotTime:U,lockDuration:I,recastDuration:L,node:T,actionIndex:S}),le(this,Do).push({time:this.game.getDisplayTime(),action:In[t].name,isGCD:b?1:0,castTime:E.instantCast?0:E.castTime,targetCount:T.targetCount,isDamaging:T.anyPotencies()})}return i!==hi.RealTimeAutoPause&&be(this,Le,dy).call(this,l),le(this,Di)||Bu(),E},cs=function(t){const a=le(this,Di);Ue(this,Di,!0),t.removeTrailingIdleTime===void 0&&(t.removeTrailingIdleTime=!1);const i=t.maxReplayTime??-1;let l=t.replayMode;t.replayMode===Mn.Edited&&(l=Mn.Exact);const r=t.line,d=[],E=[];if(r.length===0)return Ue(this,Di,a),{success:!0,firstAddedIndex:void 0,invalidActions:d,skillUseTimes:E};let h=this.record.length,A;const R=t.cutoffIndex??r.actions.length,T=r.actions.slice();for(let C=0;C<R;C++){const _=T[C];t.replayMode===Mn.Edited&&l===Mn.Exact&&C===t.firstEditedNodeIndex&&(l=Mn.Edited);let b=0;if(_.info.type===Ve.Wait?b=_.info.waitDuration:_.info.type===Ve.JumpToTimestamp?b=_.info.targetTime-this.game.getDisplayTime():_.info.type===Ve.WaitForMP?b=this.game.timeTillNextMpGainEvent():_.info.type===Ve.Skill&&(b=this.game.getSkillAvailabilityStatus(_.info.skillName).timeTillAvailable),C>0){const U=T[C-1].legacyWaitDuration;if(U!==void 0&&Math.abs(U-le(this,Il))>_n.epsilon){const L=U-le(this,Il);if(L>0&&_.info.type!==Ve.Wait){let M;if(_.info.type===Ve.Skill){const G=this.game.getSkillAvailabilityStatus(_.info.skillName).timeTillAvailable;Math.abs(G-L)>_n.epsilon&&(M="duration")}M&&(be(this,Le,qn).call(this,{deltaTime:L,waitKind:M}),h++)}else _.info.type===Ve.Wait&&(b+=L)}}if(i>=0&&i-this.game.time<b&&l===Mn.Exact)return be(this,Le,qn).call(this,{deltaTime:i-this.game.time,waitKind:"duration"}),Ue(this,Di,!1),this.updateAllDisplay(),{success:!0,firstAddedIndex:A,invalidActions:d,skillUseTimes:E};if(E.push(this.game.getDisplayTime()),[Ve.Wait,Ve.JumpToTimestamp,Ve.WaitForMP].includes(_.info.type))if(b>=0)be(this,Le,qn).call(this,{deltaTime:b,waitKind:_.info.type===Ve.Wait?"duration":_.info.type===Ve.JumpToTimestamp?"target":"mp"});else{const y=Mu();if(_.info.type===Ve.JumpToTimestamp){const U=_l(_.info.targetTime);U.tmp_startLockTime=this.game.time,U.tmp_endLockTime=U.tmp_startLockTime,this.record.addActionNode(U)}else console.error("non-jump wait somehow failed: "+_.info.type);y.addUnavailableReason(ft.PastTargetTime),d.push({node:_,index:C,reason:y})}else if(_.info.type===Ve.Skill){let y=_.info.skillName;t.replayMode===Mn.SkillSequence&&(y=lc(this.game.job,y,this.gameConfig.level));const U=be(this,Le,cT).call(this,y,_.info.targetCount,hi.Manual,i);E[E.length-1]=U.usedAt,U.status.ready()||d.push({node:_,index:C,reason:U.status.clone()}),le(this,Ss)&&(Ue(this,Ss,!1),this.shouldLoop||(U.status.addUnavailableReason(ft.CastCanceled),d.push({node:_,index:C,reason:U.status})))}else if(_.info.type===Ve.SetResourceEnabled&&(l===Mn.Exact||l===Mn.Edited)){const y=this.requestToggleBuff(_.info.buffName),U=l===Mn.Exact;if(y)be(this,Le,qn).call(this,{deltaTime:U?b:Math.min(b,this.game.timeTillAnySkillAvailable())});else{const L=Mu();L.addUnavailableReason(ft.BuffNoLongerAvailable),d.push({node:_,index:C,reason:L})}}else if(_.info.type===Ve.Unknown){const{skillName:y,targetCount:U}=_.info,L=XU(y,U);this.record.addActionNode(L);const M=Mu();M.addUnavailableReason(ft.UnknownSkill),d.push({node:_,index:C,reason:M}),L.tmp_invalid_reasons=M.unavailableReasons;const G=this.gameConfig.animationLock;le(this,Ln)||(this.lastSkillTime=this.game.time,this.timeline.addElement({type:rt.Skill,displayTime:this.game.getDisplayTime(),skillName:y,isGCD:!1,isSpellCast:!1,time:this.game.time,relativeSnapshotTime:this.game.time,lockDuration:G,recastDuration:0,node:L,actionIndex:C}),le(this,Do).push({time:this.game.getDisplayTime(),action:y,isGCD:0,castTime:0,targetCount:L.targetCount,isDamaging:!1})),be(this,Le,qn).call(this,{deltaTime:G})}else console.error("did not process ActionNode "+JSON.stringify(_.info));if(t.replayMode===Mn.Edited){const y=this.record.tailIndex;_===t.selectionStart&&y>=0?this.record.selectSingle(y):_===t.selectionEnd&&y>=0&&this.record.selectUntil(y)}this.record.length!==h&&A===void 0&&(A=this.record.tailIndex)}if(t.cutoffIndex!==void 0){const C=T[t.cutoffIndex].info;if(C.type===Ve.Skill){const _=this.game.getSkillAvailabilityStatus(C.skillName);be(this,Le,qn).call(this,{deltaTime:_.timeTillAvailable})}}const S=T[T.length-1],I=S.legacyWaitDuration;if(I!==void 0&&(S.info.type===Ve.Skill||S.info.type===Ve.SetResourceEnabled)&&Math.abs(I-le(this,Il))>_n.epsilon){const C=I-le(this,Il);be(this,Le,qn).call(this,{deltaTime:C,waitKind:"duration"})}return Ue(this,Di,a),this.updateAllDisplay(),{success:!0,firstAddedIndex:A,invalidActions:d,skillUseTimes:E}},uT=function(t,a=!1){let i=0;const l=this,r=function(d){var A,R,T;i===0&&(i=d);const E=(d-i)/1e3*l.timeScale,h=l.game.timeTillAnySkillAvailable();h>=E?be(A=l,Le,qn).call(A,{deltaTime:E,prematureStopCondition:()=>!t()}):(be(R=l,Le,qn).call(R,{deltaTime:h,prematureStopCondition:()=>!t()}),be(T=l,Le,qn).call(T,{deltaTime:E-h,prematureStopCondition:()=>!t()})),l.updateAllDisplay(),i=d,t()?requestAnimationFrame(r):(l.shouldLoop=!1,l.autoSave(),BE(!1),a&&$n())};BE(!0),requestAnimationFrame(r)};const N=new EF,He=new Map;He.set(x.LeyLines,"Buffs/BLM/Ley Lines.png");He.set(x.Tincture,"Buffs/General/Tincture.png");He.set(x.ArcaneCircle,"Buffs/RPR/Arcane Circle.png");He.set(x.ArmysPaeon,"Buffs/BRD/Army's Paeon.png");He.set(x.BattleLitany,"PartyBuffs/battle_litany.png");He.set(x.BattleVoice,"Buffs/BRD/Battle Voice.png");He.set(x.Brotherhood,"PartyBuffs/brotherhood.png");He.set(x.Card_TheBalance,"PartyBuffs/the_balance.png");He.set(x.Card_TheSpear,"PartyBuffs/the_spear.png");He.set(x.ChainStratagem,"PartyBuffs/chain_stratagem.png");He.set(x.Devilment,"Buffs/DNC/Devilment.png");He.set(x.Divination,"PartyBuffs/divination.png");He.set(x.Dokumori,"PartyBuffs/dokumori.png");He.set(x.Embolden,"PartyBuffs/Embolden.png");He.set(x.MagesBallad,"Buffs/BRD/Mage's Ballad.png");He.set(x.RadiantFinale1,"Buffs/BRD/Radiant Finale.png");He.set(x.RadiantFinale2,"Buffs/BRD/Radiant Finale.png");He.set(x.RadiantFinale3,"Buffs/BRD/Radiant Finale.png");He.set(x.SearingLight,"PartyBuffs/searing_light.png");He.set(x.StandardFinish,"Buffs/DNC/Standard Finish.png");He.set(x.StarryMuse,"Buffs/PCT/Starry Muse.png");He.set(x.TechnicalFinish,"Buffs/DNC/Technical Finish.png");He.set(x.WanderersMinuet,"Buffs/BRD/Wanderer's Minuet.png");He.set(x.Manafication,"PartyBuffs/manafication.png");He.set(x.Acceleration,"Buffs/RDM/Acceleration.png");He.set(x.Fuka,"Buffs/SAM/Fuka.png");He.set(x.Fugetsu,"Buffs/SAM/Fugetsu.png");He.set(x.EnhancedEnpi,"Buffs/SAM/Enhanced Enpi.png");He.set(x.DeathsDesign,"Buffs/RPR/Death's Design.png");He.set(x.ArcaneCircle,"Buffs/RPR/Arcane Circle.png");He.set(x.RagingStrikes,"Buffs/BRD/Raging Strikes.png");He.set(x.Barrage,"Buffs/BRD/Barrage.png");He.set(x.NoMercy,"Buffs/GNB/No Mercy.png");He.set(x.EnhancedPiercingTalon,"Buffs/DRG/Enhanced Piercing Talon.png");He.set(x.PowerSurge,"Buffs/DRG/Power Surge.png");He.set(x.LanceCharge,"Buffs/DRG/Lance Charge.png");He.set(x.LifeOfTheDragon,"Buffs/DRG/Life of the Dragon.png");He.set(x.LifeSurge,"Buffs/DRG/Life Surge.png");He.set(x.DivineMight,"Buffs/PLD/Divine Might.png");He.set(x.Requiescat,"Buffs/PLD/Requiescat Zero.png");He.set(x.FightOrFlight,"Buffs/PLD/Fight or Flight.png");He.set(x.Zoe,"Buffs/SGE/Zoe.png");He.set(x.Autophysis,"Buffs/SGE/Autophysis.png");He.set(x.Krasis,"Buffs/SGE/Krasis.png");He.set(x.Philosophia,"Buffs/SGE/Philosophia.png");He.set(x.Soteria,"Buffs/SGE/Soteria.png");He.set(x.TrickAttack,"Buffs/NIN/Trick Attack.png");He.set(x.KunaisBane,"Buffs/NIN/Kunai's Bane.png");He.set(x.Bunshin,"Buffs/NIN/Bunshin.png");He.set(x.RiddleOfFire,"Buffs/MNK/Riddle of Fire.png");He.set(x.NeutralSect,"Buffs/AST/Neutral Sect.png");He.set(x.Synastry,"Buffs/AST/Synastry.png");He.set(x.TheArrow,"Buffs/AST/The Arrow.png");He.set(x.Confession,"Buffs/WHM/Confession.png");He.set(x.Asylum,"Buffs/WHM/Asylum.png");He.set(x.Temperance,"Buffs/WHM/Temperance.png");He.set(x.HuntersInstinct,"Buffs/VPR/Hunter's Instinct.png");He.set(x.Swiftscaled,"Buffs/VPR/Swiftscaled.png");He.set(x.FeyIllumination,"Buffs/SCH/Fey Illumination.png");He.set(x.Dissipation,"Buffs/SCH/Dissipation.png");He.set(x.Protraction,"Buffs/SCH/Protraction.png");He.set(x.Recitation,"Buffs/SCH/Recitation.png");const Cs=new Map;He.forEach((e,t)=>{const a=new Image;a.src="assets/"+e,a.onload=function(){Go()},Cs.set(t,a)});const PE=400,Ha=28,hy=e=>{e.setDraggedSkillElem(void 0),N.record.unselectAll(),N.displayCurrentState(),e.setBgSelecting(!0)};function fF(e){const{ctx:t,lines:a,images:i,viewInfo:l}=e;let{mouseX:r,mouseY:d}=e;const{colors:E,visibleWidth:h,renderingProps:A}=l;if(!a.length)return;const R=14,T=24,S=8,I=4;t.font="12px monospace";let C=-1;a.forEach(H=>{C=Math.max(C,t.measureText(H).width)});let[_,b]=[C+2*S,R*a.length+2*I];i&&i.length>0&&(_=Math.max(_,S+i.length*(T+S)),b+=T+I);const y=4,U=11;let L=!1;d>=b+y?d=d-b-y:d+b<=A.timelineHeight?d=d+U+y:L=!0,L?(d=d-b/2,r=r+U+y):r-_/2>=0&&r+_/2<h?r=r-_/2:r-_/2<0?r=0:r=h-_,t.strokeStyle=E.bgHighContrast,t.lineWidth=1,t.fillStyle=E.tipBackground,t.fillRect(r,d,_,b),t.strokeRect(r,d,_,b),t.fillStyle=E.emphasis,t.textBaseline="top",t.textAlign="left";for(let H=0;H<a.length;H++)t.fillText(a[H],r+S,d+H*R+2+I);const M=r+S,G=d+a.length*R+2+I;if(i)for(let H=0;H<i.length;H++)i[H]&&t.drawImage(i[H],M+H*T,G,T*.75,T)}function AF(e){const{ctx:t,viewInfo:a,markerTracksTopY:i,markerTracksBottomY:l,timelineOrigin:r,trackBins:d,testInteraction:E}=e,h=a.colors,{countdown:A,scale:R}=a.renderingProps;t.lineCap="round",t.lineWidth=4,t.font="11px monospace",t.textAlign="left",d.forEach((T,S)=>{let I=l-(S+1)*De.trackHeight;S===Cl&&(I=i);for(let C=0;C<T.length;C++){const _=T[C];let b=_.description;_.markerType===oa.Untargetable?b=g({en:"Untargetable",zh:""}):_.markerType===oa.Buff&&(b=c0(_.description));const y=r+et.positionFromTimeAndScale(_.time+A,R),U=()=>{const L=N.timeline.deleteMarker(_);console.assert(L),N.updateStats(),KR(_)};if(_.duration>0){const L=et.positionFromTimeAndScale(_.duration,R);if(_.markerType===oa.Buff){t.fillStyle=_.color+h.timeline.markerAlpha,t.fillRect(y,I,L,De.trackHeight);const G=Cs.get(_.description);G&&t.drawImage(G,y,I,De.trackHeight*.75,De.trackHeight),t.fillStyle=h.emphasis,t.fillText(b,y+De.trackHeight*1.5,I+10)}else _.showText?(t.fillStyle=_.color+h.timeline.markerAlpha,t.fillRect(y,I,L,De.trackHeight),t.fillStyle=h.emphasis,t.fillText(b,y+De.trackHeight/2,I+10)):(t.strokeStyle=_.color,t.beginPath(),t.moveTo(y,I+De.trackHeight/2),t.lineTo(y+L,I+De.trackHeight/2),t.stroke());const M=_.time+" - "+parseFloat((_.time+_.duration).toFixed(3));E({x:y,y:I,w:Math.max(L,De.trackHeight),h:De.trackHeight},{hoverTip:[`[${M}] ${b}`],onMouseUp:U})}else t.fillStyle=_.color,t.beginPath(),t.ellipse(y,I+De.trackHeight/2,4,4,0,0,2*Math.PI),t.fill(),_.showText&&(t.fillStyle=h.emphasis,t.beginPath(),t.fillText(b,y+De.trackHeight/2,I+10)),E({x:y-De.trackHeight/2,y:I,w:De.trackHeight,h:De.trackHeight},{hoverTip:[`[${_.time}] ${b}`],onMouseUp:U})}})}function mF(e){const{ctx:t,viewInfo:a,timelineOriginX:i,timelineOriginY:l,elems:r,testInteraction:d}=e,E=a.colors,h=a.renderingProps.scale;t.lineWidth=1,t.strokeStyle=E.timeline.mpTickMark,t.beginPath(),r.forEach(A=>{const R=i+et.positionFromTimeAndScale(A.displayTime,h);t.moveTo(R,l),t.lineTo(R,l+De.renderSlotHeight()),d({x:R-2,y:l,w:4,h:De.renderSlotHeight()},{hoverTip:[`[${A.displayTime.toFixed(3)}] ${A.sourceDesc}`]})}),t.stroke()}function RF(e){const{ctx:t,viewInfo:a,timelineOriginX:i,timelineOriginY:l,elems:r,testInteraction:d}=e,E=a.colors,h=a.renderingProps.scale;t.lineWidth=1,t.strokeStyle=E.sam.meditation,t.beginPath(),r.forEach(A=>{const R=i+et.positionFromTimeAndScale(A.displayTime,h);t.moveTo(R,l),t.lineTo(R,l+De.renderSlotHeight()),d({x:R-2,y:l,w:4,h:De.renderSlotHeight()},{hoverTip:[`[${A.displayTime.toFixed(3)}] ${A.sourceDesc}`]})}),t.stroke()}function TF(e){const{ctx:t,viewInfo:a,timelineOriginX:i,timelineOriginY:l,elems:r,testInteraction:d}=e,E=a.colors,h=a.renderingProps.scale;t.lineWidth=1,t.strokeStyle=E.pld.ironWillColor,t.beginPath(),r.forEach(A=>{const R=i+et.positionFromTimeAndScale(A.displayTime,h);t.moveTo(R,l),t.lineTo(R,l+De.renderSlotHeight()),d({x:R-2,y:l,w:4,h:De.renderSlotHeight()},{hoverTip:[`[${A.displayTime.toFixed(3)}] ${A.sourceDesc}`]})}),t.stroke()}function SF(e){const{ctx:t,viewInfo:a,timelineOriginX:i,timelineOriginY:l,elems:r,testInteraction:d}=e,E=a.colors,h=a.renderingProps.scale;t.font="bold 10px monospace",r.forEach(A=>{const R=i+et.positionFromTimeAndScale(A.displayTime,h),T=12,S=l+T;t.beginPath(),t.textAlign="center",t.moveTo(R,S-T),t.lineTo(R-T/2,S),t.lineTo(R+T/2,S),t.fillStyle=E.timeline.warningMark,t.fill(),t.fillStyle="white",t.fillText("!",R,S-1);let I="["+A.displayTime.toFixed(3)+"] ";switch(A.warningType.kind){case"combobreak":I+=g({en:"broken combo!",zh:""}).toString();break;case"overcap":I+=Xe(A.warningType.rsc).toString()+g({en:" overcap!",zh:""}).toString();break;case"overwrite":I+=Xe(A.warningType.rsc).toString()+g({en:" overwrite!",zh:""}).toString();break;case"timeout":I+=Xe(A.warningType.rsc).toString()+g({en:" expired!",zh:""});break;default:I+=g({en:A.warningType.en,zh:A.warningType.zh});break}d({x:R-T/2,y:S-T,w:T,h:T},{hoverTip:[I]})})}function gR(e){const{ctx:t,viewInfo:a,timelineOriginX:i,timelineOriginY:l,elems:r,testInteraction:d}=e,{colors:E,renderingProps:h}=a,A=h.scale;r.forEach(R=>{const T=R.type===rt.DamageMark&&Jn(R.displayTime),S=i+et.positionFromTimeAndScale(R.displayTime,A);let I="["+R.displayTime.toFixed(3)+"] ";const C=g({en:"Untargetable",zh:""});switch(R.type){case rt.AggroMark:t.fillStyle=E.timeline.aggroMark,I+=g({en:"aggro"});break;case rt.HealingMark:t.fillStyle=E.timeline.healingMark,I+=g({en:"healing potency",zh:""});break;default:t.fillStyle=T?E.timeline.untargetableDamageMark:E.timeline.damageMark,I+=g({en:"damage potency",zh:""})}t.beginPath(),R.type===rt.AggroMark||R.type===rt.DamageMark?(t.moveTo(S-3,l),t.lineTo(S+3,l),t.lineTo(S,l+6)):(t.moveTo(S-3,l+12),t.lineTo(S+3,l+12),t.lineTo(S,l+6)),t.fill();const _=R.buffs.filter(L=>L==="TINCTURE").length>0,b=[],y=[];R.potencyInfos.forEach(L=>{const M=L.sourceDesc.replace("{skill}",Ti(L.sourceSkill));if(T)b.push(0 .toFixed(3)+" ("+M+")");else if(L.sourceSkill in Lo){const G=g({en:"LB"});b.push(G+" ("+M+")")}else{const G=L.potency.getAmount({tincturePotencyMultiplier:h.tincturePotencyMultiplier,includePartyBuffs:!0,includeSplash:!1});if(L.potency.targetCount>1){const H=G*(1-(L.potency.falloff??1)),P=L.potency.targetCount-1,q=H.toFixed(2)+(P>1?` x ${P}`:""),ne=P>1?g({en:`${M}, ${P} additional targets`,zh:`${M}, ${P} `}):g({en:`${M}, 1 additional target`,zh:`${M}, 1 `});b.push(G.toFixed(2)+" ("+g({en:`${M}, primary target`,zh:`${M}, `})+")"),b.push(q+` (${ne})`)}else b.push(G.toFixed(2)+" ("+M+")");_&&!y.includes(Cs.get(x.Tincture))&&y.push(Cs.get(x.Tincture)),L.potency.getPartyBuffs().forEach(H=>{const P=Cs.get(H);y.includes(P)||y.push()})}});const U=R.type===rt.HealingMark?{x:S-3,y:l+6,w:6,h:6}:{x:S-3,y:l,w:6,h:6};d(U,{hoverTip:T?[I,...b,C]:[I,...b],hoverImages:y})})}function IF(e){const{ctx:t,viewInfo:a,timelineOriginX:i,timelineOriginY:l,elems:r,testInteraction:d}=e,E=a.colors,h=a.renderingProps.scale;t.fillStyle=E.timeline.lucidTickMark,r.forEach(A=>{const R=i+et.positionFromTimeAndScale(A.displayTime,h);t.beginPath(),t.moveTo(R-3,l),t.lineTo(R+3,l),t.lineTo(R,l+6),t.fill();const T=`[${A.displayTime.toFixed(3)}] ${A.sourceDesc.replace("{skill}",Ti("LUCID_DREAMING"))}`;d({x:R-3,y:l,w:6,h:6},{hoverTip:[T]})})}function _F(e){const{ctx:t,viewInfo:a,timelineOriginX:i,timelineOriginY:l,elems:r,interactive:d,testInteraction:E}=e,{colors:h,renderingProps:A}=a,R=A.scale,T=[],S=[],I=[],C=[],_=[],b=new Map([[x.Tincture,{color:h.timeline.potCover,showImage:!0}],[x.LeyLines,{color:h.timeline.llCover,showImage:!0}],[x.SearingLight,{color:h.smn.searing,showImage:!0}],[x.Hyperphantasia,{color:h.timeline.llCover,showImage:!1}],[x.StarryMuse,{color:h.timeline.buffCover,showImage:!0}],[x.Embolden,{color:h.rdm.emboldenBuff,showImage:!0}],[x.Manafication,{color:h.rdm.manaficBuff,showImage:!0}],[x.Acceleration,{color:h.rdm.accelBuff,showImage:!0}],[x.TechnicalFinish,{color:h.dnc.esprit,showImage:!0}],[x.Devilment,{color:h.dnc.feathers,showImage:!0}],[x.Fuka,{color:h.timeline.llCover,showImage:!0}],[x.Fugetsu,{color:h.sam.fugetsu,showImage:!0}],[x.NoMercy,{color:h.sam.fugetsu,showImage:!0}],[x.EnhancedPiercingTalon,{color:h.drg.enhancedPiercingTalon,showImage:!0}],[x.PowerSurge,{color:h.drg.powerSurge,showImage:!0}],[x.LifeSurge,{color:h.drg.lifeSurge,showImage:!0}],[x.LanceCharge,{color:h.drg.lanceCharge,showImage:!0}],[x.LifeOfTheDragon,{color:h.drg.lifeOfTheDragon,showImage:!0}],[x.BattleLitany,{color:h.drg.battleLitany,showImage:!0}],[x.DivineMight,{color:h.pld.divineMight,showImage:!0}],[x.Requiescat,{color:h.pld.requiescat,showImage:!0}],[x.FightOrFlight,{color:h.pld.fightOrFlight,showImage:!0}],[x.EnhancedEnpi,{color:h.rdm.accelBuff,showImage:!0}],[x.ArcaneCircle,{color:h.rpr.arcaneCircle,showImage:!0}],[x.DeathsDesign,{color:h.rpr.deathsDesign,showImage:!0}],[x.WanderersMinuet,{color:h.brd.wanderersCoda,showImage:!0}],[x.MagesBallad,{color:h.brd.magesCoda,showImage:!0}],[x.ArmysPaeon,{color:h.brd.armysCoda,showImage:!0}],[x.RagingStrikes,{color:h.brd.ragingStrikes,showImage:!0}],[x.Barrage,{color:h.brd.barrage,showImage:!0}],[x.BattleVoice,{color:h.brd.battleVoice,showImage:!0}],[x.RadiantFinale1,{color:h.brd.radiantFinale,showImage:!0}],[x.RadiantFinale2,{color:h.brd.radiantFinale,showImage:!0}],[x.RadiantFinale3,{color:h.brd.radiantFinale,showImage:!0}],[x.Zoe,{color:h.sge.zoe,showImage:!0}],[x.Autophysis,{color:h.sge.autophysis,showImage:!0}],[x.Krasis,{color:h.sge.krasis,showImage:!0}],[x.Soteria,{color:h.sge.soteria,showImage:!0}],[x.Philosophia,{color:h.sge.philosophia,showImage:!0}],[x.WaxingNocturne,{color:h.blu.moonflute,showImage:!0}],[x.Bristle,{color:h.blu.bristle,showImage:!0}],[x.Whistle,{color:h.blu.whistle,showImage:!0}],[x.TingleA,{color:h.blu.tinglea,showImage:!0}],[x.TingleB,{color:h.blu.tingleb,showImage:!0}],[x.Dokumori,{color:h.nin.dokumori,showImage:!0}],[x.TrickAttack,{color:h.nin.trick,showImage:!0}],[x.KunaisBane,{color:h.nin.trick,showImage:!0}],[x.Bunshin,{color:h.nin.bunshin,showImage:!0}],[x.RiddleOfFire,{color:h.mnk.riddleOfFire,showImage:!0}],[x.Brotherhood,{color:h.mnk.brotherhood,showImage:!0}],[x.Divination,{color:h.ast.div,showImage:!0}],[x.NeutralSect,{color:h.ast.neutral,showImage:!0}],[x.Synastry,{color:h.ast.synastry,showImage:!0}],[x.TheArrow,{color:h.ast.arrow,showImage:!0}],[x.Confession,{color:h.whm.confession,showImage:!0}],[x.Asylum,{color:h.whm.asylum,showImage:!0}],[x.Temperance,{color:h.whm.temperance,showImage:!0}],[x.HuntersInstinct,{color:h.vpr.huntersInstinct,showImage:!0}],[x.Swiftscaled,{color:h.vpr.swiftscaled,showImage:!0}],[x.ChainStratagem,{color:h.sch.chain,showImage:!0}],[x.FeyIllumination,{color:h.sch.feyIllumination,showImage:!0}],[x.Dissipation,{color:h.sch.dissipation,showImage:!0}],[x.Protraction,{color:h.sch.protraction,showImage:!0}],[x.Recitation,{color:h.sch.recitation,showImage:!0}]]),y=new Map;b.forEach((q,ne)=>y.set(ne,[]));const U=[],L=[],M=[],G=l+De.skillButtonHeight/2;r.forEach(q=>{const ne=q,Ee=i+et.positionFromTimeAndScale(ne.displayTime,R),ue=ne.isGCD?G+De.skillButtonHeight/2:G,de=ne.node.targetCount;de>1&&T.push({count:de,x:Ee+De.skillButtonHeight/2,y:ue-5});const fe=2,Q=et.positionFromTimeAndScale(ne.lockDuration,R);if(ne.isSpellCast?(I.push({x:Ee+fe,y:ue,w:Q-fe,h:De.skillButtonHeight/2}),_.push(Ee+et.positionFromTimeAndScale(ne.relativeSnapshotTime,R))):S.push({x:Ee+fe,y:ue,w:Q-fe,h:De.skillButtonHeight}),ne.isGCD){const K=et.positionFromTimeAndScale(ne.recastDuration,R);C.push({x:Ee+fe,y:ue+De.skillButtonHeight/2,w:K-fe,h:De.skillButtonHeight/2})}if(ne.skillName in Lo){const K=et.positionFromTimeAndScale(ne.recastDuration,R);S.push({x:Ee+fe,y:ue+De.skillButtonHeight/2,w:K-fe,h:De.skillButtonHeight/2})}ne.node.tmp_invalid_reasons.length>0&&L.push({x:Ee,y:l+De.slotPaddingTop,w:et.positionFromTimeAndScale(ne.isGCD?Math.max(ne.recastDuration,ne.lockDuration):ne.lockDuration,R),h:De.renderSlotHeight()-De.slotPaddingBottom-De.slotPaddingTop});let J=0;y.forEach((K,W)=>{ne.node.hasBuff(W)&&(J+=F(J,K))}),ne.node.hasPartyBuff()&&F(J,U);function F(K,W){return A.drawOptions.drawBuffIndicators&&W.push({x:Ee,y:ue+Ha+K*4,w:Ha,h:4}),1}WR(ne.skillName)&&M.push({elem:q,x:Ee,y:ue})}),t.font="13px monospace",t.fillStyle=h.text,t.textAlign="center",T.forEach(q=>{t.fillText("x"+q.count.toString(),q.x,q.y)});const H=q=>{t.rect(q.x,q.y,q.w,q.h),d&&E(q,{onMouseDown:hy})};t.fillStyle=h.timeline.castBar,t.beginPath(),I.forEach(H),t.fill(),t.lineWidth=1,t.strokeStyle="rgba(151, 85, 239, 0.4)",t.beginPath(),_.forEach(q=>{t.moveTo(q,G+Ha/2),t.lineTo(q,G+Ha)}),t.stroke(),t.fillStyle=h.timeline.gcdBar,t.beginPath(),C.forEach(H),t.fill(),t.fillStyle=h.timeline.lockBar,t.beginPath(),S.forEach(H),t.fill(),y.forEach((q,ne)=>{t.fillStyle=b.get(ne).color,t.beginPath(),q.forEach(H),t.fill()}),t.fillStyle=h.timeline.buffCover,t.beginPath(),U.forEach(H),t.fill(),t.beginPath(),M.forEach(q=>{t.drawImage(WR(q.elem.skillName),q.x,q.y,Ha,Ha);const ne=q.elem.node,Ee=[],ue=[],de=Ti(q.elem.skillName)+"@"+q.elem.displayTime.toFixed(3);if(Ee.push(de),!((ne.maybeGetActionKey()??"NEVER")in Lo)){if(ne.getInitialPotency()){const Q=ne.getPotency({tincturePotencyMultiplier:A.tincturePotencyMultiplier,includePartyBuffs:!0,includeSplash:!0,untargetable:Jn}).applied;Ee.push(g({en:"potency: ",zh:""})+Q.toFixed(2))}if(ne.getInitialHealingPotency()){const Q=ne.getHealingPotency({tincturePotencyMultiplier:A.tincturePotencyMultiplier,includeSplash:!0,includePartyBuffs:!0,untargetable:Jn}).applied;Ee.push(g({en:"healing potency: "})+Q.toFixed(2))}}let fe=0;ne.tmp_endLockTime!==void 0&&ne.tmp_startLockTime!==void 0&&(fe=ne.tmp_endLockTime-ne.tmp_startLockTime),Ee.push(g({en:"duration: ",zh:""})+fe.toFixed(3)),ne.tmp_invalid_reasons.length>0&&(Ee.push(""),Ee.push(g({en:"skill is invalid:",zh:""}).toString()),ne.tmp_invalid_reasons.forEach(Q=>Ee.push("- "+_s(Q)))),b.forEach((Q,J)=>{Q.showImage&&ne.hasBuff(J)&&ue.push(Cs.get(J))}),ne.getPartyBuffs().forEach(Q=>{const J=Cs.get(Q);J&&ue.push(J)}),d?E({x:q.x,y:q.y,w:Ha,h:Ha},{hoverTip:Ee,onMouseUp:Q=>{Q.draggedSkillElem===void 0&&(Q.bgSelecting||(N.timeline.onClickTimelineAction(q.elem.actionIndex,Q.shiftKey),cS()))},onMouseDown:Q=>{Q.dragLock||Q.setDraggedSkillElem(q.elem)},pointerMouse:!0,hoverImages:ue}):E({x:q.x,y:q.y,w:Ha,h:Ha},{hoverTip:Ee,pointerMouse:!1,hoverImages:ue})});const P=t.globalAlpha;return t.fillStyle=h.timeline.invalidBg,t.globalAlpha=.2,t.beginPath(),L.forEach(q=>{t.rect(q.x,q.y,q.w,q.h)}),t.fill(),t.globalAlpha=P,new Map(d?M.map(q=>[q.elem.actionIndex,{x:q.x,y:q.y,w:Ha,h:Ha}]):[])}function dT(e){const{ctx:t,color:a,x:i,y1:l,y2:r,y3:d,tip:E,width:h,testInteraction:A}=e;t.fillStyle=a,t.beginPath(),t.moveTo(i-3,0),t.lineTo(i+3,0),t.lineTo(i,6),t.fill(),t.lineWidth=1,t.strokeStyle=a,t.setLineDash([]),t.beginPath(),t.moveTo(i,0),t.lineTo(i,l),t.stroke(),t.strokeStyle=a+"9f",t.setLineDash([2,3]),t.beginPath(),t.moveTo(i,l),t.lineTo(i,r),t.stroke();const R=t.lineWidth;h!==void 0&&(t.lineWidth=h),t.strokeStyle=a,t.setLineDash([]),t.beginPath(),t.moveTo(i,r),t.lineTo(i,d),t.stroke(),t.lineWidth=R,t.strokeStyle=a+"9f",t.setLineDash([2,3]),t.beginPath(),t.moveTo(i,d),t.lineTo(i,PE),t.stroke(),E!==void 0&&(A==null||A({x:i-3,y:0,w:6,h:PE},{hoverTip:[E]})),t.setLineDash([])}function Ey(e){const{ctx:t,viewInfo:a,originX:i,testInteraction:l}=e,r=e.ignoreVisibleX??!1,{colors:d,renderingProps:E,visibleWidth:h}=a,A=r?et.positionFromTimeAndScale(N.game.time+E.countdown,E.scale):h;t.fillStyle=d.timeline.ruler,t.fillRect(0,0,A,De.rulerHeight),l({x:De.leftBufferWidth,y:0,w:A-De.leftBufferWidth,h:De.rulerHeight},{hoverTip:C=>[(et.timeFromPositionAndScale(C.x-i,E.scale)-E.countdown).toFixed(3)],onMouseDown:C=>{const _=et.timeFromPositionAndScale(C.x-i,E.scale)-E.countdown;_<N.game.getDisplayTime()&&_>=-N.game.config.countdown?N.displayHistoricalState(_,void 0):N.displayCurrentState()}}),t.lineCap="butt",t.beginPath();const R=E.scale*100,T=E.countdown*R;t.lineWidth=1,t.strokeStyle=d.text,t.textBaseline="alphabetic",t.font="13px monospace",t.textAlign="center",t.fillStyle=d.text;const S=50,I=function(C,_,b){const y=C*R,U=i+y+T;U>=-50&&U<=A+S&&(t.moveTo(U,0),t.lineTo(U,_),b&&t.fillText(et.displayTime(y/R,0),U,23))};if(R>=6){for(let C=0;C*R<E.timelineWidth-T;C+=1)C%5!==0&&I(C,6,!1);for(let C=-1;C*R>=-T;C-=1)C%5!==0&&I(C,6,!1)}for(let C=0;C*R<E.timelineWidth-T;C+=5)I(C,10,!0);for(let C=-5;C*R>=-T;C-=5)I(C,10,!0);return t.stroke(),De.rulerHeight}function fy(e){const{ctx:t,viewInfo:a,originX:i,originY:l,testInteraction:r}=e,d=e.ignoreVisibleX??!1,{colors:E,renderingProps:h,visibleWidth:A}=a,R=d?et.positionFromTimeAndScale(N.game.time+h.countdown,h.scale):A,T=new Map;h.allMarkers.forEach(_=>{let b=T.get(_.track);b===void 0&&(b=[]),b.push(_),T.set(_.track,b)}),t.beginPath();let S=0,I=!1;for(const _ of T.keys())S=Math.max(S,_+1),_===Cl&&(I=!0);I&&(S+=1);const C=l+S*De.trackHeight;t.fillStyle=E.timeline.tracks;for(let _=0;_<S;_+=2){const b=C-(_+1)*De.trackHeight;t.rect(0,b,R,De.trackHeight)}return t.fill(),AF({ctx:t,viewInfo:a,markerTracksTopY:l,markerTracksBottomY:C,timelineOrigin:i,trackBins:T,testInteraction:r}),S*De.trackHeight}function Ay(e,t){e.fillStyle="rgba(147, 112, 219, 0.15)",e.fillRect(t.x,t.y,t.w,t.h),e.strokeStyle="rgba(147, 112, 219, 0.5)",e.lineWidth=1,e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(t.x,t.y+t.h),e.moveTo(t.x+t.w,t.y),e.lineTo(t.x+t.w,t.y+t.h),e.stroke()}function my(e){const{ctx:t,viewInfo:a,originX:i,originY:l,isImageExportMode:r,testInteraction:d}=e,{colors:E,renderingProps:h}=a,A=i+et.positionFromTimeAndScale(h.countdown,h.scale);let R=new Map;for(let I=0;I<h.slots.length;I++){const C=I===h.activeSlotIndex,_=new Map;if(r&&!C)continue;h.slots[I].elements.forEach(L=>{const M=_.get(L.type)??[];M.push(L),_.set(L.type,M)});let b=l+I*De.renderSlotHeight();r&&(b=l);const y={ctx:t,viewInfo:a,timelineOriginX:A,timelineOriginY:b,testInteraction:d};h.drawOptions.drawMPTickMarks&&mF({...y,elems:_.get(rt.MPTickMark)??[]}),h.drawOptions.drawHealingMarks&&gR({...y,elems:_.get(rt.HealingMark)??[]}),h.drawOptions.drawDamageMarks&&(gR({...y,elems:_.get(rt.DamageMark)??[]}),gR({...y,elems:_.get(rt.AggroMark)??[]})),h.drawOptions.drawMPTickMarks&&IF({...y,elems:_.get(rt.LucidMark)??[]}),RF({...y,elems:_.get(rt.MeditateTickMark)??[]}),TF({...y,elems:_.get(rt.AutoTickMark)??[]}),SF({...y,elems:_.get(rt.WarningMark)??[]});const U=_F({...y,elems:_.get(rt.Skill)??[],interactive:C});if(C&&(R=U),h.showSelection&&C&&!r){const L=A+et.positionFromTimeAndScale(h.selectionStartDisplayTime,h.scale),M=et.positionFromTimeAndScale(h.selectionEndDisplayTime-h.selectionStartDisplayTime,h.scale);Ay(t,{x:L,y:b,w:M,h:De.renderSlotHeight()})}}const T=et.positionFromTimeAndScale(h.countdown,h.scale);let S=De.renderSlotHeight()*h.slots.length;if(h.slots.length<Mi&&(S+=De.addSlotButtonHeight),t.fillStyle=E.timeline.countdown,t.fillRect(i-De.leftBufferWidth,l,T+De.leftBufferWidth,S),r)return new Map;for(let I=0;I<h.slots.length;I++){const _={x:0,y:l+I*De.renderSlotHeight()+1,w:14,h:De.renderSlotHeight()-2};if(t.fillStyle=I===h.activeSlotIndex?E.accent:E.bgMediumContrast,t.fillRect(_.x,_.y,_.w,_.h),d(_,{hoverTip:I===h.activeSlotIndex?void 0:[g({en:"set active",zh:""})],onMouseUp:(b,y)=>{y&&N.undoStack.doThenPush(new Uw(h.activeSlotIndex,I))},pointerMouse:!0}),h.slots.length>1&&I===h.activeSlotIndex){t.fillStyle=E.emphasis,t.font="bold 14px monospace",t.textAlign="center",t.fillText("",_.x+_.w/2,_.y+_.h-4);const b={x:_.x,y:_.y+_.h-_.w,w:_.w,h:_.w};d(b,{hoverTip:[g({en:"delete",zh:""})],onMouseUp:(y,U)=>{U&&N.undoStack.doThenPush(new xw(h.activeSlotIndex,N.record.serialized()))},pointerMouse:!0})}}return R}function gF(e){const{ctx:t,viewInfo:a,originX:i,timelineStartY:l,testInteraction:r}=e,{colors:d,renderingProps:E}=a,h=i+et.positionFromTimeAndScale(E.countdown,E.scale),A=De.renderSlotHeight(),R=l+E.activeSlotIndex*A,T=new Map;E.sharedElements.forEach(I=>{const C=T.get(I.type)??[];C.push(I),T.set(I.type,C)});const S={y1:l,y2:R,y3:R+A};(T.get(rt.s_HistoricalCursor)??[]).forEach(I=>{const C=I;if(C.enabled){const _=h+et.positionFromTimeAndScale(I.displayTime,E.scale);dT({ctx:t,color:d.historical,x:_,...S,tip:g({en:"cursor: ",zh:""})+C.displayTime.toFixed(3),testInteraction:r})}}),(T.get(rt.s_Cursor)??[]).forEach(I=>{const C=I,_=h+et.positionFromTimeAndScale(C.displayTime,E.scale);dT({ctx:t,color:d.emphasis,x:_,...S,tip:g({en:"cursor: ",zh:""})+C.displayTime.toFixed(3),testInteraction:r})})}function NF(e){const{ctx:t,viewInfo:a,timelineStartY:i,mouseX:l,mouseY:r,selectStartX:d,selectStartY:E,interactionInfo:h,dragTargetTime:A}=e,{bgSelecting:R,draggedSkillElem:T}=h,{colors:S,visibleLeft:I,renderingProps:C}=a;if(R){const U={x:Math.min(d,l),y:Math.min(E,r),w:Math.abs(d-l),h:Math.abs(E-r)};Ay(t,U)}const b=-I+De.leftBufferWidth+et.positionFromTimeAndScale(C.countdown,C.scale);if(T){const U=t.globalAlpha;t.globalAlpha=.4,t.drawImage(WR(T.skillName),l,r,Ha,Ha),t.globalAlpha=U}const y=A;if(y!==null){const U=De.renderSlotHeight(),L=i+C.activeSlotIndex*U,M=b+et.positionFromTimeAndScale(y,C.scale);dT({ctx:t,color:S.dropTarget,x:M,y1:i,y2:L,y3:L+U,width:4})}}function pF(e){const{ctx:t,viewInfo:{colors:a,renderingProps:i},originY:l,testInteraction:r}=e;if(i.slots.length<Mi){const h={x:4,y:l+2,w:192,h:De.addSlotButtonHeight-4};t.fillStyle=a.bgLowContrast,t.fillRect(h.x,h.y,h.w,h.h),t.strokeStyle=a.bgHighContrast,t.lineWidth=1,t.strokeRect(h.x,h.y,h.w,h.h),t.font="13px monospace",t.fillStyle=a.text,t.textAlign="center",t.fillText(g({en:"Add timeline slot",zh:""}),h.x+h.w/2,h.y+h.h-4),r(h,{onMouseUp:(R,T)=>{T&&N.undoStack.doThenPush(new kw(i.activeSlotIndex))},pointerMouse:!0});const A={x:2*4+192,y:l+2,w:192,h:De.addSlotButtonHeight-4};return t.fillStyle=a.bgLowContrast,t.fillRect(A.x,A.y,A.w,A.h),t.strokeStyle=a.bgHighContrast,t.lineWidth=1,t.strokeRect(A.x,A.y,A.w,A.h),t.font="13px monospace",t.fillStyle=a.text,t.textAlign="center",t.fillText(g({en:"Clone timeline slot",zh:""}),A.x+A.w/2,A.y+A.h-4),r(A,{onMouseUp:(R,T)=>{T&&N.undoStack.doThenPush(new Pw(i.activeSlotIndex))},pointerMouse:!0}),De.addSlotButtonHeight}return 0}function Ry(){let e=0,t=!1;for(const a of N.timeline.getAllMarkers()){const i=a.track;e=Math.max(e,i+1),i===Cl&&(t=!0)}return t&&(e+=1),e*De.trackHeight}function Ty(){return De.rulerHeight+Ry()}function CF(e){const{ctx:t,viewInfo:a,testInteraction:i}=e,{renderingProps:l,colors:r,visibleLeft:d,visibleWidth:E}=a,h=-d+De.leftBufferWidth;let A=0;return t.fillStyle=r.background,t.fillRect(0,0,E+1,l.timelineHeight+1),i({x:0,y:0,w:E,h:PE},{onMouseDown:hy}),A+=Ey({ctx:t,originX:h,viewInfo:a,testInteraction:i}),A+=Ry(),my({ctx:t,viewInfo:a,originX:h,originY:A,isImageExportMode:!1,testInteraction:i})}function OF(e){const{ctx:t,viewInfo:a,testInteraction:i}=e,l=-a.visibleLeft+De.leftBufferWidth;fy({ctx:t,viewInfo:a,originX:l,originY:De.rulerHeight,testInteraction:i}),pF({ctx:t,viewInfo:a,originY:Ty()+De.renderSlotHeight()*a.renderingProps.slots.length,testInteraction:i})}function NC(e){const{ctx:t,viewInfo:a,dragTargetTime:i,activeHoverTip:l,activeHoverImages:r,mouseX:d,mouseY:E,selectStartX:h,selectStartY:A,mouseInteractionInfo:R,testInteraction:T}=e,S=-a.visibleLeft+De.leftBufferWidth,I=Ty();gF({ctx:t,viewInfo:a,originX:S,timelineStartY:I,testInteraction:T}),R&&NF({ctx:t,viewInfo:a,timelineStartY:I,mouseX:d,mouseY:E,selectStartX:h,selectStartY:A,interactionInfo:R,dragTargetTime:i}),l!==void 0&&fF({ctx:t,viewInfo:a,lines:l,images:r,mouseX:d,mouseY:E})}function pC(e,t){const a=e.x+e.w<t.x,i=e.x>t.x+t.w,l=e.y+e.h<t.y,r=e.y>t.y+t.h;return!(a||i||l||r)}function Sy(e,t){const[a,i]=e;return a!==void 0&&i!==void 0&&a>t.x&&a<t.x+t.w&&i>t.y&&i<t.y+t.h}function NR(e,t,a){const i=Iy(e,t,a);return i!==void 0?i[0]:void 0}function Iy(e,t,a){for(const[i,l]of Array.from(a.entries()).reverse())if(Sy([e,t],i))return[l,i]}function pR(){return{mouseDown:new Map,mouseUp:new Map,mouseHover:new Map,pointer:new Map}}function Uh(e){["mouseDown","mouseHover","mouseUp","pointer"].forEach(t=>e[t].clear())}function bF(e){const t=O.useRef(null),a=O.useRef(null),i=O.useRef(null),l=window.devicePixelRatio,r=e.visibleWidth*l,d=e.timelineHeight*l,E=O.useContext(Nn),h=O.useContext(yf),A=O.useContext(Ed),R=O.useRef([null,null]),T=O.useRef(0),S=O.useRef(0),I=O.useRef(void 0),C=O.useRef(void 0),_=O.useRef(0),b=O.useRef(0),y=O.useRef({}),U=O.useRef(new Map),L=O.useRef({live:pR(),interactive:pR(),lowUpdate:pR()});function M(K){const W=L.current;return new Map([...W.live[K],...W.interactive[K],...W.lowUpdate[K]])}const G=O.useRef(void 0),H=K=>{G.current=K},P=O.useRef(!1),q=K=>{P.current=K},ne=K=>(W,D)=>{const{hoverTip:Y,onMouseUp:z,onMouseDown:B,pointerMouse:ee,hoverImages:he}=D,se=L.current[K];(Y||he)&&se.mouseHover.set(W,{tip:Y,images:he}),z&&se.mouseUp.set(W,z),B&&se.mouseDown.set(W,B),ee!==void 0&&se.pointer.set(W,ee)},Ee=K=>{const W=-e.visibleLeft-De.leftBufferWidth,D=e.visibleWidth-W;K.clearRect(W,0,D,PE)},ue=()=>{const K=y.current.tip,W={x:T.current,y:S.current,shiftKey:!1,dragLock:A.value,draggedSkillElem:G.current,bgSelecting:P.current,setDraggedSkillElem:H,setBgSelecting:q};return{viewInfo:{renderingProps:N.getTimelineRenderingProps(),colors:Ui(E),visibleLeft:e.visibleLeft,visibleWidth:e.visibleWidth},dragTargetTime:h.dragTargetTime,mouseX:T.current,mouseY:S.current,selectStartX:_.current,selectStartY:b.current,activeHoverTip:K!==void 0?Array.isArray(K)?K:K(W):void 0,activeHoverImages:y.current.images,mouseInteractionInfo:W}},de=()=>{var W;const K=(W=a.current)==null?void 0:W.getContext("2d",{alpha:!0});K&&(K.scale(l,l),Ee(K),Uh(L.current.interactive),NC({ctx:K,...ue(),testInteraction:ne("interactive")}),K.scale(1/l,1/l))},fe={onMouseMove:(K,W)=>{if(T.current=K,S.current=W,y.current=NR(K,W,M("mouseHover"))??{},P.current){const D={x:Math.min(_.current,K),y:Math.min(b.current,W),w:Math.abs(_.current-K),h:Math.abs(b.current-W)};let Y=null,z=null;for(const[B,ee]of U.current.entries())if(pC(ee,D)){Y=B,z=B;break}if(z!==null)for(const[B,ee]of Array.from(U.current.entries()).reverse()){if(z>=B)break;if(pC(ee,D)){z=B;break}}(Y!==R.current[0]||z!==R.current[1])&&(R.current=[Y,z],Y!==null&&z!==null?(N.record.selectSingle(Y),N.record.selectUntil(z)):N.record.unselectAll(),N.displayCurrentState())}if(G.current){N.record.isInSelection(G.current.actionIndex)||N.timeline.onClickTimelineAction(G.current.actionIndex,!1);const D=-e.visibleLeft+De.leftBufferWidth;let Y=1/0,z=-1,B;const ee=U.current,he=Array.from(ee.entries());for(let oe=0;oe<he.length;oe++){const[pe,Ie]=he[oe],Ce=Math.abs(T.current-Ie.x);if(B!==void 0&&Ce>B)break;Ce<Y&&(Y=Ce,z=pe),B=Ce}let se=1/0;const Ae=N.getTimelineRenderingProps(),Re=Ae.sharedElements.filter(oe=>oe.type==rt.s_Cursor);let Oe;const Pe=Re[Re.length-1].displayTime+Ae.countdown;Re.length>0&&(Oe=D+et.positionFromTimeAndScale(Pe,Ae.scale),se=Math.abs(T.current-Oe));let ge=null;const Ne=Array.from(ee.keys());Oe!==void 0&&se<Y&&ee.size>0&&z===Ne[Ne.length-1]&&(z=Ne[Ne.length-1]+1,ge=Pe-Ae.countdown),z!==-1&&h.dragTargetIndex!==z&&(ge===null&&(z>0&&!G.current.isGCD?ge=N.record.actions[z-1].tmp_endLockTime??null:ge=N.record.actions[z].tmp_startLockTime??null,ge!==null&&(ge-=N.gameConfig.countdown)),h.setDragTarget(z,ge))}e.setPointerMouse(NR(K,W,M("pointer"))??!1),de()},onMouseEnter:()=>{},onMouseLeave:()=>{I.current=void 0,C.current=void 0,P.current=!1,(y.current.tip!==void 0||y.current.images!==void 0)&&(y.current={tip:void 0,images:void 0},de())},onMouseUp:(K,W,D)=>{if(T.current=W,S.current=D,G.current){const Y=h.dragTargetIndex;h.setDragTarget(null,null),H(void 0);let z=!0;if(Y!==null){const B=N.record.selectionStartIndex??0;let ee=Y-(B??0);if(ee>0&&(ee-=N.record.getSelectionLength()),ee!==0){N.undoStack.push(new jh(B,N.record.getSelectionLength(),ee)),N.record.moveSelected(ee),N.autoSave();const he=$n();Go();const se=N.record.selectionStartIndex;se!==void 0?N.displayHistoricalState(he.skillUseTimes[se],se):N.displayCurrentState(),z=!1}}z&&de()}if(!N.inputLocked){const Y=Iy(W,D,M("mouseUp"));if(Y!==void 0){const[z,B]=Y;z({x:W,y:D,shiftKey:K.shiftKey,dragLock:A.value,bgSelecting:P.current,setDraggedSkillElem:H,setBgSelecting:q},Sy([I.current,C.current],B))}}P.current=!1},onMouseDown:(K,W)=>{var D;if(I.current=K,C.current=W,T.current=K,S.current=W,!N.inputLocked){const Y=M("mouseDown");_.current=K,b.current=W,(D=NR(K,W,Y))==null||D({x:K,y:W,shiftKey:!1,dragLock:A.value,bgSelecting:P.current,setDraggedSkillElem:H,setBgSelecting:q})}},onKeyDown:K=>{N.handleTimelineKeyboardEvent(K),N.inputLocked||K.key==="Escape"&&(h.setDragTarget(null,null),H(void 0))}};O.useEffect(()=>e.setCallbacks(fe),[h.dragTargetTime,A.value]);const Q=()=>{const[K,W,D]=[t,a,i].map((Y,z)=>{var B;return(B=Y.current)==null?void 0:B.getContext("2d",{alpha:z!==0})});if(K&&W&&D){[K,W,D].forEach(z=>z.scale(l,l)),Uh(L.current.live),Uh(L.current.interactive),Uh(L.current.lowUpdate),[W,D].forEach(z=>Ee(z));const Y={renderingProps:N.getTimelineRenderingProps(),colors:Ui(E),visibleLeft:e.visibleLeft,visibleWidth:e.visibleWidth};U.current=CF({ctx:K,viewInfo:Y,testInteraction:ne("live")}),NC({ctx:W,...ue(),testInteraction:ne("interactive")}),OF({ctx:D,viewInfo:Y,testInteraction:ne("lowUpdate")}),[K,W,D].forEach(z=>z.scale(1/l,1/l))}};O.useEffect(de,[h.dragTargetTime]),O.useEffect(()=>{A.value||(de(),h.setDragTarget(null,null),H(void 0))},[A.value]),O.useEffect(Q,[T,S,e.version,l]),O.useEffect(()=>{Q(),e.setCallbacks(fe)},[e.visibleLeft,e.visibleWidth]);const J={width:e.visibleWidth,height:e.timelineHeight,position:"absolute",pointerEvents:"none",cursor:e.pointerMouse?"pointer":"default",left:0,top:0},F=Math.ceil(r),w=Math.ceil(d);return c.jsxs("div",{style:{position:"relative"},children:[c.jsx("canvas",{ref:t,width:F,height:w,tabIndex:0,style:{...J,zIndex:0}}),c.jsx("canvas",{ref:i,width:F,height:w,tabIndex:-1,style:{...J,zIndex:1,backgroundColor:"transparent"}}),c.jsx("canvas",{ref:a,width:F,height:w,tabIndex:-1,style:{...J,zIndex:2,backgroundColor:"transparent"}})]})}const GS=O.createContext(void 0),BS=O.createContext(void 0);function DF(){const e=O.useContext(BS),t=O.useContext(GS);if(!(t===void 0&&e===void 0))return{...e,...t}}function Fs(){const e=O.useContext(BS),t=O.useContext(GS);if(t===void 0)throw new Error("Base UI: DialogRootContext is missing. Dialog parts must be placed within <Dialog.Root>.");return{...e,...t}}function _c(e){const t=typeof e.render=="string"?e.render:void 0,a=typeof e.render=="string"?void 0:e.render;return{renderElement:af(t,{className:e.className,render:a},{...e,props:e.extraProps})}}const yF={...nf,...nS},_y=O.forwardRef(function(t,a){const{render:i,className:l,...r}=t,{open:d,nested:E,mounted:h,transitionStatus:A,backdropRef:R}=Fs(),T=O.useMemo(()=>({open:d,transitionStatus:A}),[d,A]),S=Ac(R,a),{renderElement:I}=_c({render:i??"div",className:l,state:T,ref:S,extraProps:Bo({role:"presentation",hidden:!h,style:{userSelect:"none",WebkitUserSelect:"none"}},r),customStyleHookMapping:yF});return E?null:I()});function vF(e){const{rootElementName:t=""}=e,[a,i]=O.useState(t.toUpperCase()),l=O.useCallback(r=>{i((r==null?void 0:r.tagName)??"")},[]);return{rootElementName:a,updateRootElementName:l}}const MF=O.createContext(void 0);function LF(e=!1){const t=O.useContext(MF);if(t===void 0&&!e)throw new Error("Base UI: CompositeRootContext is missing. Composite parts must be placed within <Composite.Root>.");return t}function gy(e={}){const{buttonRef:t,disabled:a=!1,focusableWhenDisabled:i,tabIndex:l,type:r="button",elementName:d}=e,E=O.useRef(null),{rootElementName:h,updateRootElementName:A}=vF({rootElementName:d}),R=LF(!0)!==void 0,T=Ri(()=>{const b=E.current;return h==="BUTTON"||h==="INPUT"&&["button","submit","reset"].includes(b==null?void 0:b.type)}),S=Ri(()=>{const b=E.current;return!!(h==="A"&&(b!=null&&b.href))}),I=Ac(A,t,E),C=O.useMemo(()=>{const b={};return l!==void 0&&!R&&(b.tabIndex=l),h==="BUTTON"||h==="INPUT"?i||R?b["aria-disabled"]=a:R||(b.disabled=a):h!==""&&(h!=="A"?(b.role="button",R||(b.tabIndex=l??0)):l&&!R&&(b.tabIndex=l),a&&(b["aria-disabled"]=a,R||(b.tabIndex=i?l??0:-1))),b},[a,h,i,R,l]);return eo(()=>{const b=E.current;b instanceof HTMLButtonElement&&R&&a&&C.disabled===void 0&&b.disabled&&(b.disabled=!1)},[a,C.disabled,R]),{getButtonProps:O.useCallback((b={})=>{const{onClick:y,onMouseDown:U,onKeyUp:L,onKeyDown:M,onPointerDown:G,...H}=b;return Bo({type:h==="BUTTON"||h==="INPUT"?r:void 0,onClick(P){if(a){P.preventDefault();return}y==null||y(P)},onMouseDown(P){a||U==null||U(P)},onKeyDown(P){(a&&i&&P.key!=="Tab"||P.target===P.currentTarget&&!T()&&P.key===" ")&&P.preventDefault(),a||(YR(P),M==null||M(P)),!P.baseUIHandlerPrevented&&P.target===P.currentTarget&&!T()&&!S()&&P.key==="Enter"&&!a&&(y==null||y(P),P.preventDefault())},onKeyUp(P){a||(YR(P),L==null||L(P)),!P.baseUIHandlerPrevented&&P.target===P.currentTarget&&!T()&&!a&&P.key===" "&&(y==null||y(P))},onPointerDown(P){if(a){P.preventDefault();return}G==null||G(P)},ref:I},C,H)},[C,a,h,i,T,S,I,r]),buttonRef:I}}function HF(e){const{open:t,setOpen:a,rootRef:i,disabled:l}=e,r=Ri(h=>{t&&a(!1,h.nativeEvent,"click")}),{getButtonProps:d}=gy({disabled:l,buttonRef:i});return{getRootProps:h=>Bo({onClick:r},h,d)}}const Ny=O.forwardRef(function(t,a){const{render:i,className:l,disabled:r=!1,...d}=t,{open:E,setOpen:h}=Fs(),{getRootProps:A}=HF({disabled:r,open:E,setOpen:h,rootRef:a}),R=O.useMemo(()=>({disabled:r}),[r]),{renderElement:T}=_c({render:i??"button",className:l,state:R,propGetter:A,extraProps:d});return T()});let CC=0;function UF(e,t="mui"){const[a,i]=O.useState(e),l=e||a;return O.useEffect(()=>{a==null&&(CC+=1,i(`${t}-${CC}`))},[a,t]),l}const xF={...jE},OC=xF.useId;function kF(e,t){if(OC!==void 0){const a=OC();return e??`${t}-${a}`}return UF(e,t)}function py(e){return kF(e,"base-ui")}const PF={},Cy=O.forwardRef(function(t,a){const{render:i,className:l,id:r,...d}=t,{setDescriptionElementId:E}=Fs(),h=py(r);eo(()=>(E(h),()=>{E(void 0)}),[h,E]);const A=O.useCallback((T={})=>Bo({id:h},T),[h]),{renderElement:R}=_c({propGetter:A,render:i??"p",className:l,state:PF,ref:a,extraProps:d});return R()});function wF(e){const{descriptionElementId:t,getPopupProps:a,initialFocus:i,modal:l,mounted:r,openMethod:d,ref:E,setPopupElement:h,titleElementId:A}=e,R=O.useRef(null),T=Ac(E,R,h),S=O.useCallback(_=>_==="touch"?R:0,[]),I=O.useMemo(()=>i==null?S(d??""):typeof i=="function"?i(d??""):i,[S,i,d]);return{getRootProps:_=>Bo({"aria-labelledby":A??void 0,"aria-describedby":t??void 0,"aria-modal":r&&l===!0?!0:void 0,role:"dialog",tabIndex:-1,...a(),ref:T,hidden:!r},_),resolvedInitialFocus:I}}let GF=function(e){return e.nestedDialogs="--nested-dialogs",e}({}),BF=function(e){return e[e.open=hs.open]="open",e[e.closed=hs.closed]="closed",e[e.startingStyle=hs.startingStyle]="startingStyle",e[e.endingStyle=hs.endingStyle]="endingStyle",e.nested="data-nested",e.nestedDialogOpen="data-nested-dialog-open",e}({});const FF=O.forwardRef(function(t,a){return c.jsx("div",{ref:a,role:"presentation","data-floating-ui-inert":!0,...t,style:{position:"fixed",inset:0,userSelect:"none",WebkitUserSelect:"none"}})}),Oy=O.createContext(void 0);function zF(){const e=O.useContext(Oy);if(e===void 0)throw new Error("Base UI: <Dialog.Portal> is missing.");return e}function jF(e){return rO(19)?e:e?"true":void 0}const YF={...nf,...nS,nestedDialogOpen(e){return e?{[BF.nestedDialogOpen]:""}:null}},by=O.forwardRef(function(t,a){const{className:i,finalFocus:l,initialFocus:r,render:d,...E}=t,{descriptionElementId:h,dismissible:A,floatingRootContext:R,getPopupProps:T,modal:S,mounted:I,nested:C,nestedOpenDialogCount:_,open:b,openMethod:y,popupRef:U,setPopupElement:L,titleElementId:M,transitionStatus:G,onOpenChangeComplete:H,internalBackdropRef:P}=Fs();zF(),tf({open:b,ref:U,onComplete(){b&&(H==null||H(!0))}});const q=Ac(a,U),{getRootProps:ne,resolvedInitialFocus:Ee}=wF({descriptionElementId:h,getPopupProps:T,initialFocus:r,modal:S,mounted:I,openMethod:y,ref:q,setPopupElement:L,titleElementId:M}),ue=_>0,de=O.useMemo(()=>({open:b,nested:C,transitionStatus:G,nestedDialogOpen:ue}),[b,C,G,ue]),{renderElement:fe}=_c({render:d??"div",className:i,state:de,propGetter:ne,extraProps:{...E,style:{...E.style,[GF.nestedDialogs]:_}},customStyleHookMapping:YF});return c.jsxs(O.Fragment,{children:[I&&S===!0&&c.jsx(FF,{ref:P,inert:jF(!b)}),c.jsx(jk,{context:R,disabled:!I,closeOnFocusOut:A,initialFocus:Ee,returnFocus:l,modal:S!==!1,children:fe()})]})});function Dy(e){const{children:t,keepMounted:a=!1,container:i}=e,{mounted:l}=Fs();return l||a?c.jsx(Oy.Provider,{value:a,children:c.jsx(wk,{root:i,children:t})}):null}const KF=typeof document<"u"?ra.useLayoutEffect:()=>{};function hT(...e){return(...t)=>{for(let a of e)typeof a=="function"&&a(...t)}}function FS(e){var t;return typeof window<"u"&&window.navigator!=null?e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform):!1}function bf(e){let t=null;return()=>(t==null&&(t=e()),t)}const VF=bf(function(){return FS(/^Mac/i)}),WF=bf(function(){return FS(/^iPhone/i)}),XF=bf(function(){return FS(/^iPad/i)||VF()&&navigator.maxTouchPoints>1}),qF=bf(function(){return WF()||XF()});function bC(e,t){if(!e)return!1;let a=window.getComputedStyle(e),i=/(auto|scroll)/.test(a.overflow+a.overflowX+a.overflowY);return i&&t&&(i=e.scrollHeight!==e.clientHeight||e.scrollWidth!==e.clientWidth),i}function yy(e,t){let a=e;for(bC(a,t)&&(a=a.parentElement);a&&!bC(a,t);)a=a.parentElement;return a||document.scrollingElement||document.documentElement}const CR=typeof document<"u"&&window.visualViewport,ZF=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let xh=0,OR;function QF(e={}){let{isDisabled:t}=e;KF(()=>{if(!t)return xh++,xh===1&&(qF()?OR=JF():OR=$F()),()=>{xh--,xh===0&&OR()}},[t])}function $F(){return hT(Gr(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`),Gr(document.documentElement,"overflow","hidden"))}function JF(){let e,t,a=A=>{e=yy(A.target,!0),!(e===document.documentElement&&e===document.body)&&e instanceof HTMLElement&&window.getComputedStyle(e).overscrollBehavior==="auto"&&(t=Gr(e,"overscrollBehavior","contain"))},i=A=>{if(!e||e===document.documentElement||e===document.body){A.preventDefault();return}e.scrollHeight===e.clientHeight&&e.scrollWidth===e.clientWidth&&A.preventDefault()},l=()=>{t&&t()},r=A=>{let R=A.target;e3(R)&&(E(),R.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{R.style.transform="",CR&&(CR.height<window.innerHeight?requestAnimationFrame(()=>{DC(R)}):CR.addEventListener("resize",()=>DC(R),{once:!0}))}))},d=null,E=()=>{if(d)return;let A=()=>{window.scrollTo(0,0)},R=window.pageXOffset,T=window.pageYOffset;d=hT(_u(window,"scroll",A),Gr(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`),Gr(document.documentElement,"overflow","hidden"),Gr(document.body,"marginTop",`-${T}px`),()=>{window.scrollTo(R,T)}),window.scrollTo(0,0)},h=hT(_u(document,"touchstart",a,{passive:!1,capture:!0}),_u(document,"touchmove",i,{passive:!1,capture:!0}),_u(document,"touchend",l,{passive:!1,capture:!0}),_u(document,"focus",r,!0));return()=>{t==null||t(),d==null||d(),h()}}function Gr(e,t,a){let i=e.style[t];return e.style[t]=a,()=>{e.style[t]=i}}function _u(e,t,a,i){return e.addEventListener(t,a,i),()=>{e.removeEventListener(t,a,i)}}function DC(e){let t=document.scrollingElement||document.documentElement,a=e;for(;a&&a!==t;){let i=yy(a);if(i!==document.documentElement&&i!==document.body&&i!==a){let l=i.getBoundingClientRect().top,r=a.getBoundingClientRect().top;r>l+a.clientHeight&&(i.scrollTop+=r-l)}a=i.parentElement}}function e3(e){return e instanceof HTMLInputElement&&!ZF.has(e.type)||e instanceof HTMLTextAreaElement||e instanceof HTMLElement&&e.isContentEditable}function t3(){if(typeof navigator>"u")return{platform:"",maxTouchPoints:-1};const e=navigator.userAgentData;return e!=null&&e.platform?{platform:e.platform,maxTouchPoints:navigator.maxTouchPoints}:{platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints}}function vy(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter:none")}function ET(){const e=t3();return e.platform==="MacIntel"&&e.maxTouchPoints>1?!0:/iP(hone|ad|od)|iOS/.test(e.platform)}function n3(){return/firefox/i.test(ZT())}function hd(e){return e&&e.ownerDocument||document}function My(e){return hd(e).defaultView||window}let yC={},vC={},MC="",yu=0,LC=()=>{};function a3(){return yu}function i3(){return typeof CSS<"u"&&typeof CSS.supports=="function"&&CSS.supports("height","1dvh")}function o3(e){if(typeof document>"u")return!1;const t=hd(e);return My(t).innerWidth-t.documentElement.clientWidth>0}function l3(e){var T;const t=hd(e),a=t.documentElement,i=t.body,l=My(a);let r=0,d=0,E=-1;if(vy()&&(((T=l.visualViewport)==null?void 0:T.scale)??1)!==1)return()=>{};function h(){var P;const S=l.getComputedStyle(a),I=l.getComputedStyle(i);r=a.scrollTop,d=a.scrollLeft,yC={overflowY:a.style.overflowY,overflowX:a.style.overflowX},MC=a.style.scrollBehavior,vC={position:i.style.position,height:i.style.height,width:i.style.width,boxSizing:i.style.boxSizing,overflowY:i.style.overflowY,overflowX:i.style.overflowX,scrollBehavior:i.style.scrollBehavior};const C=(P=S.scrollbarGutter)==null?void 0:P.includes("stable"),_=a.scrollHeight>a.clientHeight,b=a.scrollWidth>a.clientWidth,y=S.overflowY==="scroll"||I.overflowY==="scroll",U=S.overflowX==="scroll"||I.overflowX==="scroll",L=Math.max(0,l.innerWidth-a.clientWidth),M=Math.max(0,l.innerHeight-a.clientHeight);Object.assign(a.style,{overflowY:!C&&(_||y)?"scroll":"hidden",overflowX:!C&&(b||U)?"scroll":"hidden"});const G=parseFloat(I.marginTop)+parseFloat(I.marginBottom),H=parseFloat(I.marginLeft)+parseFloat(I.marginRight);Object.assign(i.style,{position:"relative",height:G||M?`calc(100dvh - ${G+M}px)`:"100dvh",width:H||L?`calc(100vw - ${H+L}px)`:"100vw",boxSizing:"border-box",overflow:"hidden",scrollBehavior:"unset"}),i.scrollTop=r,i.scrollLeft=d,a.setAttribute("data-base-ui-scroll-locked",""),a.style.scrollBehavior="unset"}function A(){Object.assign(a.style,yC),Object.assign(i.style,vC),a.scrollTop=r,a.scrollLeft=d,a.removeAttribute("data-base-ui-scroll-locked"),a.style.scrollBehavior=MC}function R(){A(),cancelAnimationFrame(E),E=requestAnimationFrame(h)}return h(),l.addEventListener("resize",R),()=>{cancelAnimationFrame(E),A(),l.removeEventListener("resize",R)}}function s3(e){const{enabled:t=!0,mounted:a,open:i,referenceElement:l}=e,r=O.useMemo(()=>t&&(ET()||!i3()||n3()&&!o3(l)),[t,l]);eo(()=>{if(a&&!i&&vy()){const d=hd(l),E=d.body.style.userSelect,h=d.body.style.webkitUserSelect;return d.body.style.userSelect="none",d.body.style.webkitUserSelect="none",()=>{d.body.style.userSelect=E,d.body.style.webkitUserSelect=h}}},[a,i,l]),QF({isDisabled:!r}),eo(()=>{if(!(!t||r))return yu+=1,yu===1&&(LC=l3(l)),()=>{yu-=1,yu===0&&LC()}},[t,r,l])}function r3(e){const t=O.useRef(""),a=O.useCallback(l=>{l.defaultPrevented||(t.current=l.pointerType)},[]);return{onClick:O.useCallback(l=>{if(l.detail===0){e(l,"keyboard");return}"pointerType"in l&&e(l,l.pointerType),e(l,t.current),t.current=""},[e]),onPointerDown:a}}function c3(e){const[t,a]=O.useState(null);!e&&t!==null&&a(null);const i=O.useCallback((d,E)=>{e||a(E)},[e,a]),{onClick:l,onPointerDown:r}=r3(i);return O.useMemo(()=>({openMethod:t,triggerProps:{onClick:l,onPointerDown:r}}),[t,l,r])}function u3(e){const{enabled:t,setLock:a,popupRef:i}=e,l=Ri(a),r=O.useRef(t);eo(()=>{if(!ET()||(t&&(r.current=!0),!r.current))return;const h=hd(i.current).documentElement;if(t){const A=h.scrollLeft,R=h.scrollTop;return()=>{a3()===0&&(h.scrollLeft=A,h.scrollTop=R)}}},[t,i]);const d=Ri(E=>{if(!ET())return;const h=vi(E.nativeEvent);$E(h)&&(l(!1),setTimeout(()=>l(!0)))});return O.useMemo(()=>({floating:{onFocus:d,onClick:d}}),[d])}function d3(e){const{defaultOpen:t,dismissible:a,modal:i,onNestedDialogClose:l,onNestedDialogOpen:r,onOpenChange:d,open:E,onOpenChangeComplete:h}=e,[A,R]=tO({controlled:E,default:t,name:"DialogRoot",state:"open"}),T=O.useRef(null),S=O.useRef(null),I=O.useRef(null),[C,_]=O.useState(void 0),[b,y]=O.useState(void 0),[U,L]=O.useState(null),[M,G]=O.useState(null),[H,P]=O.useState(!0),{mounted:q,setMounted:ne,transitionStatus:Ee}=nO(A),ue=Ri((ge,Ne,oe)=>{d==null||d(ge,Ne,oe),R(ge)}),de=Ri(()=>{ne(!1),h==null||h(!1)});tf({enabled:!e.actionsRef,open:A,ref:T,onComplete(){A||de()}}),O.useImperativeHandle(e.actionsRef,()=>({unmount:de}),[de]);const Q=tS({elements:{reference:U,floating:M},open:A,onOpenChange:(ge,Ne,oe)=>{ue(ge,Ne,iO(oe))}}),[J,F]=O.useState(0),w=J===0,K=Jk(Q),W=Kk(Q),D=J0(Q,{outsidePressEvent:"mousedown",outsidePress(ge){if(ge.button!==0)return!1;const Ne=vi(ge);if(w&&a){const oe=Ne;return i?oe?[I.current,S.current].includes(oe):!1:!0}return!1},escapeKey:w}),Y=A&&i===!0,z=Y&&H,B=u3({enabled:Y,setLock:P,popupRef:T});s3({enabled:z,mounted:q,open:A,referenceElement:M});const{getReferenceProps:ee,getFloatingProps:he}=eO([K,W,D,B]);O.useEffect(()=>(r&&A&&r(J),l&&!A&&l(),()=>{l&&A&&l()}),[A,l,r,J]);const se=O.useCallback(ge=>{F(ge+1)},[]),Ae=O.useCallback(()=>{F(0)},[]),{openMethod:Re,triggerProps:Oe}=c3(A),Pe=O.useCallback((ge={})=>ee(Bo(Oe,ge)),[ee,Oe]);return O.useMemo(()=>({modal:i,setOpen:ue,open:A,titleElementId:C,setTitleElementId:_,descriptionElementId:b,setDescriptionElementId:y,onNestedDialogOpen:se,onNestedDialogClose:Ae,nestedOpenDialogCount:J,openMethod:Re,mounted:q,transitionStatus:Ee,getTriggerProps:Pe,getPopupProps:he,setTriggerElement:L,setPopupElement:G,popupRef:T,backdropRef:S,internalBackdropRef:I,floatingRootContext:Q}),[i,ue,A,C,b,se,Ae,J,Re,q,Ee,Pe,he,Q])}const Ly=function(t){const{children:a,defaultOpen:i=!1,dismissible:l=!0,modal:r=!0,onOpenChange:d,open:E,actionsRef:h,onOpenChangeComplete:A}=t,R=DF(),T=d3({open:E,defaultOpen:i,onOpenChange:d,modal:r,dismissible:l,actionsRef:h,onOpenChangeComplete:A,onNestedDialogClose:R==null?void 0:R.onNestedDialogClose,onNestedDialogOpen:R==null?void 0:R.onNestedDialogOpen}),S=!!R,I=O.useMemo(()=>({...T,nested:S,onOpenChangeComplete:A}),[T,S,A]),C=O.useMemo(()=>({dismissible:l}),[l]);return c.jsx(GS.Provider,{value:I,children:c.jsx(BS.Provider,{value:C,children:a})})},h3={},Hy=O.forwardRef(function(t,a){const{render:i,className:l,id:r,...d}=t,{setTitleElementId:E}=Fs(),h=py(r);eo(()=>(E(h),()=>{E(void 0)}),[h,E]);const A=O.useCallback((T={})=>Bo({id:h},T),[h]),{renderElement:R}=_c({propGetter:A,render:i??"h2",className:l,state:h3,ref:a,extraProps:d});return R()}),Uy=O.forwardRef(function(t,a){const{render:i,className:l,disabled:r=!1,...d}=t,{open:E,setTriggerElement:h,getTriggerProps:A}=Fs(),R=O.useMemo(()=>({disabled:r,open:E}),[r,E]),T=Ac(a,h),{getButtonProps:S}=gy({disabled:r,buttonRef:T}),{renderElement:I}=_c({render:i??"button",className:l,state:R,propGetter:C=>S(A(C)),extraProps:d,customStyleHookMapping:lO});return I()}),xy=window.location.hostname==="xivintheshell.com"?"a023d800-1740-426a-8134-915efc395aa3":window.location.hostname==="beta.xivintheshell.com"?"a0281008-3d39-4afc-81b4-a8ddbf7cbd44":window.location.host==="localhost:3000"?"a028101a-803b-4ad4-99b6-bacb8484e214":window.location.host==="localhost:4173"?"a0281237-7471-47d4-b33c-52a6cbaed4c1":"",E3="https://www.fflogs.com/oauth/authorize",f3="https://www.fflogs.com/oauth/token";function A3(){const e=new Uint8Array(64);return window.crypto.getRandomValues(e),Array.from(e,t=>t.toString(16).padStart(2,"0")).join("")}async function m3(e){const a=new TextEncoder().encode(e),i=await window.crypto.subtle.digest("SHA-256",a);return btoa(String.fromCharCode(...new Uint8Array(i))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}const wE="pkceCodeVerifier",Yu="pkceStateBlob";async function HC(){const e=A3(),t=await m3(e),a=window.crypto.randomUUID();localStorage.getItem(wE)===null&&window.localStorage.setItem(wE,e),window.localStorage.getItem(Yu)===null&&window.localStorage.setItem(Yu,a);const i=new URLSearchParams({client_id:xy,code_challenge:t,code_challenge_method:"S256",state:a,redirect_uri:window.location.origin,response_type:"code"});window.location.href=`${E3}?${i.toString()}`}function bR(){window.localStorage.removeItem(wE),window.localStorage.removeItem(Yu)}var iE=(e=>(e[e.UNAUTHORIZED=0]="UNAUTHORIZED",e[e.NO_PKCE_VERIFIER=1]="NO_PKCE_VERIFIER",e[e.BAD_PKCE_STATE=2]="BAD_PKCE_STATE",e[e.SUCCESS=3]="SUCCESS",e[e.FAILURE=4]="FAILURE",e))(iE||{});async function UC(){const e=new URLSearchParams(window.location.search);window.history.replaceState({},"",window.location.pathname);const t=e.get("code"),a=window.localStorage.getItem(wE),i=window.localStorage.getItem(Yu);if(!t)return 0;if(!a)return console.error("PKCE verifier could not be retrieved"),bR(),1;e.get("state")!==i&&(console.error("PKCE response did not have expected state; force setting new value"),console.log("expected:",i),console.log("actual:",e.get("state")),window.localStorage.setItem(Yu,e.get("state")));const l=new URLSearchParams({client_id:xy,code_verifier:a,redirect_uri:window.location.origin,grant_type:"authorization_code",code:t});try{const r=await fetch(f3,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:l.toString()});if(r.ok){const d=await r.json();return window.sessionStorage.setItem("fflogsAuthToken",d.access_token),console.log("saved auth tokens to sessionStorage"),3}else return console.log("PKCE response was not ok; clearing intermediate state"),console.error(r),bR(),4}catch(r){return console.log("PKCE exchange failed; clearing intermediate state"),console.error(r),bR(),4}}function R3(e){const t=URL.parse(e);if(t===null)return{apiBaseUrl:"",reportCode:"",error:{en:"invalid URL",zh:""}};if(t.hostname!=="www.fflogs.com"&&t.hostname!=="cn.fflogs.com")return{apiBaseUrl:"",reportCode:"",error:{en:"must be a link to www.fflogs.com or cn.fflogs.com",zh:"www.fflogs.comcn.fflogs.com"}};const a=t.pathname.split("/").filter(A=>A.length>0);if(a.length!==2)return console.error("parsed link parts:",a),{apiBaseUrl:"",reportCode:"",error:{en:"link must contain a single report",zh:""}};console.assert(a.length>0);const i=a[a.length-1],l=t.searchParams,r=parseInt(l.get("fight")??"NaN"),d=isNaN(r)?void 0:r,E=parseInt(l.get("source")??"NaN"),h=isNaN(E)?void 0:E;return{apiBaseUrl:`https://${t.hostname}/api/v2/user/`,reportCode:i,fightID:d,playerID:h}}const ky=new Map([["Paladin","PLD"],["Warrior","WAR"],["DarkKnight","DRK"],["Gunbreaker","GNB"],["WhiteMage","WHM"],["Scholar","SCH"],["Astrologian","AST"],["Sage","SGE"],["Monk","MNK"],["Dragoon","DRG"],["Ninja","NIN"],["Viper","VPR"],["Samurai","SAM"],["Reaper","RPR"],["Bard","BRD"],["Machinist","MCH"],["Dancer","DNC"],["BlackMage","BLM"],["RedMage","RDM"],["Pictomancer","PCT"],["BlueMage","BLU"]]),xC=new Set([7,33218,34682]),ss={TEMPERA_COAT:1003686,TEMPERA_GRASSA:1003687,BLACKEST_NIGHT:1001178,TENGENTSU:1003853,THIRD_EYE:1001232,CREST_OF_TIME_BORROWED:1002596},T3=new Map([["TEMPERA_COAT_POP","TEMPERA_COAT"],["TEMPERA_GRASSA_POP","TEMPERA_GRASSA"],["THE_BLACKEST_NIGHT_POP","THE_BLACKEST_NIGHT"],["TENGENTSU_POP","TENGENTSU"],["THIRD_EYE_POP","THIRD_EYE"],["ARCANE_CREST_POP","ARCANE_CREST"]]),S3=`
query ListReportFights($reportCode: String) {
	reportData {
		report(code: $reportCode) {
			fights {
				bossPercentage
				encounterID
				id
				name
				kill
				startTime
			}
			startTime
		}
	}
}`,I3=`
query ListReportFightIDs($reportCode: String) {
	reportData {
		report(code: $reportCode) {
			fights {
				id
			}
		}
	}
}`,_3=`
query ListFightPlayers($reportCode: String, $fightID: Int) {
	reportData {
		report(code: $reportCode) {
			fights(fightIDs: [$fightID]) {
				bossPercentage
				encounterID
				id
				name
				kill
				startTime
			}
			startTime
			playerDetails(fightIDs: [$fightID])
		}
	}
}`,g3=`
query GetPlayerEvents($reportCode: String, $fightID: Int, $playerID: Int) {
	reportData {
		report(code: $reportCode) {
			events(sourceID: $playerID, fightIDs: [$fightID]) {
				data
				nextPageTimestamp
			}
			fights(fightIDs: [$fightID]) {
				name
				combatTime
				startTime
				endTime
			}
			playerDetails(fightIDs: [$fightID])
		}
	}
}`;async function Df(e,t,a){const i={method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${window.sessionStorage.getItem("fflogsAuthToken")}`},body:JSON.stringify({query:t,variables:a})};return fetch(e,i).then(l=>l.json()).then(l=>{if(l.error!==void 0)throw new Error(l.error);if(l.errors!==void 0)throw new Error(l.errors);return l.data})}const kC=new Map;function Py(e,t){const a=t.bossPercentage===null?g({en:"(trash)",zh:""}).toString():t.bossPercentage.toFixed(1)+"%";return{label:{en:`${t.name} - ${t.kill?"kill":a}`,zh:`${t.name} - ${t.kill?"":a}`},id:t.id,unixStartTime:e+t.startTime}}async function N3(e,t){const a=kC.get(t);if(a!==void 0)return a;const i=await Df(e,S3,{reportCode:t}),l=i.reportData.report.startTime,r=i.reportData.report.fights.map(d=>Py(l,d));return kC.set(t,r),r}async function p3(e,t){const i=(await Df(e,I3,{reportCode:t})).reportData.report.fights.map(l=>l.id);return Math.max(...i)}function wy(e){return`${e.name??g({en:"(name unknown)",zh:""})} @ ${e.server??g({en:"(world unknown)",zh:""})}`}const kh=new Map;async function PC(e,t,a){var h;const i=(h=kh.get(t))==null?void 0:h.get(a);if(i!==void 0)return i;const l=await Df(e,_3,{reportCode:t,fightID:a}),r=Object.values(l.reportData.report.playerDetails.data.playerDetails).flat().map(A=>({id:A.id,name:wy(A),job:ky.get(A.type)??"???"})),d=l.reportData.report.startTime,E=Py(d,l.reportData.report.fights[0]);return kh.has(t)?kh.get(t).set(a,[E,r]):kh.set(t,new Map([[a,[E,r]]])),[E,r]}const Mr=new Map;async function wC(e){var b,y,U;const t=(y=(b=Mr.get(e.reportCode))==null?void 0:b.get(e.fightID))==null?void 0:y.get(e.playerID);if(t!==void 0)return console.log("query cache hit for",e),t;const a=await Df(e.apiBaseUrl,g3,e),i=Object.values(a.reportData.report.playerDetails.data.playerDetails).flat().filter(L=>L.id===e.playerID)[0],l=ky.get(i.type),r=wy(i);let d,E;const h=a.reportData.report.fights[0],A=[],R=[];let T;const S=new Map,I=new Map;for(let L of a.reportData.report.events.data)if(L.sourceID===e.playerID)if(L.type==="cast"&&!xC.has(L.abilityGameID))T!==void 0&&(T.abilityGameID===L.abilityGameID&&(L=T),T=void 0),A.push(L),R.push(L.timestamp);else if(L.type==="begincast"&&!xC.has(L.abilityGameID))T=L;else if(L.type==="combatantinfo")d=L.level,E={main:L[Et[l].mainStat],spellSpeed:L.spellSpeed,skillSpeed:L.skillSpeed,criticalHit:L.criticalHit,directHit:L.directHit,determination:L.determination,piety:L.piety,tenacity:L.tenacity};else if(L.type==="removebuff"){let M;const G=L.timestamp,H=L.abilityGameID;l==="PCT"&&L.targetID===e.playerID?H===ss.TEMPERA_COAT?M="TEMPERA_COAT_POP":H===ss.TEMPERA_GRASSA&&(M="TEMPERA_GRASSA_POP"):l==="DRK"?H===ss.BLACKEST_NIGHT&&(M="THE_BLACKEST_NIGHT_POP"):l==="SAM"&&L.targetID===e.playerID?H===ss.TENGENTSU?M="TENGENTSU_POP":H===ss.THIRD_EYE&&(M="THIRD_EYE_POP"):l==="RPR"&&L.targetID===e.playerID&&H===ss.CREST_OF_TIME_BORROWED&&(M="ARCANE_CREST_POP"),M!==void 0&&(S.has(M)?S.get(M).add(G):S.set(M,new Set([G])))}else L.type==="applybuff"&&L.targetID===e.playerID&&l==="PCT"&&L.abilityGameID===ss.TEMPERA_GRASSA&&(I.has("TEMPERA_GRASSA")||I.set("TEMPERA_GRASSA",new Set),I.get("TEMPERA_GRASSA").add(L.timestamp));(U=I.get("TEMPERA_GRASSA"))==null||U.forEach(L=>{var M;return(M=S.get("TEMPERA_COAT_POP"))==null?void 0:M.delete(L)});const C=A.map(L=>{const M=L.abilityGameID,G=ku.has(M)?ku.get(M):M>3e7?"TINCTURE":"NEVER";return G==="NEVER"&&console.error("unknown action id",M),{type:Ve.Skill,skillName:G,targetCount:1,healTargetCount:void 0}}),_={playerName:r,job:l,level:d,statsInLog:E!==void 0&&Object.values(E).every(L=>L!==void 0),inferredConfig:E,buffRemovalActions:Array.from(S.entries().flatMap(([L,M])=>M.entries().map(([G])=>({popKey:L,applyKey:T3.get(L),timestamp:G})))).sort((L,M)=>L.timestamp-M.timestamp),actions:C,timestamps:R,combatStartTime:h.endTime-h.combatTime};return Mr.has(e.reportCode)?Mr.get(e.reportCode).has(e.fightID)?Mr.get(e.reportCode).get(e.fightID).set(e.playerID,_):Mr.get(e.reportCode).set(e.fightID,new Map([[e.playerID,_]])):Mr.set(e.reportCode,new Map([[e.fightID,new Map([[e.playerID,_]])]])),_}const Ph={width:"100%",height:"1.6em",outline:"none"};function*C3(e,t){const a=N.gameConfig.serialized(),i={...a,procMode:fa.Always,job:e.job};for(const[y,U]of Object.entries(e.inferredConfig??{}))typeof U=="number"&&(i[y]=U);e.level!==void 0&&(i.level=e.level),N.setConfigAndRestart(i,t||i.job!==a.job||a.procMode!==i.procMode);const l=N.record.length,r=e.actions;if(console.assert(r.length===e.timestamps.length),r.length===0)return yield{processed:0,total:0,deltas:[],spilledDeltas:0},[];const d=r.map(y=>new Qa(y)),h=(e.timestamps[0]-e.combatStartTime)/1e3,A=N.game.getSkillAvailabilityStatus(r[0].skillName).castTime,R=A>0?h-A+Ei.getSlidecastWindow(A):h;d.unshift(_l(R)),console.log("initial jump time:",h),-R>N.gameConfig.countdown&&N.setConfigAndRestart({...i,countdown:-Math.floor(R)}),N.insertRecordNodes(d,l);const T={processed:1,total:r.length,deltas:[],spilledDeltas:0};let S=1;const I=N.gameConfig.countdown,C=e.buffRemovalActions[Symbol.iterator]();let _=C.next();for(let y=1;y<r.length;y++){const U=r[y],L=l+y+S,M=N.record.actions[L],G=(e.timestamps[y]-e.combatStartTime)/1e3,H=U.skillName;console.assert(M.info.type===Ve.Skill&&M.tmp_startLockTime);const P=M.tmp_startLockTime-I,q=N.record.actions[L-1],ne=q.tmp_endLockTime-I;if(!_.done){const{popKey:de,applyKey:fe,timestamp:Q}=_.value,J=(Q-e.combatStartTime)/1e3;let F;if(ne>J?q.info.type===Ve.Skill&&q.info.skillName===fe?F=L:F=L-1:G>J&&(F=L),F!==void 0){N.insertRecordNode(gs(de),F),_=C.next(),y--,S++;continue}}const Ee=G-P,ue=.05;if(Ee>3.5)N.insertRecordNode(_l(G),L),S++;else if(Ee>ue){const de=G-ne;console.assert(de>0),N.insertRecordNode(Fr(de),L),S++}else Ee<-.05&&(T.deltas.length>=10?T.spilledDeltas++:T.deltas.push({skill:H,logTime:G,simTime:P}));T.processed++,yield T}const b=N.record.actions.slice(l);return console.log(`inserted ${S} non-skill nodes`),N.undoStack.push(new Hw(b,l,a,i)),N.autoSave(),$n().invalidActions}const Lr={textAlign:"left",paddingLeft:"0.3em"},O3=["spellSpeed","skillSpeed","criticalHit","directHit","determination","piety","fps"];function b3(e){var i;const t=Mt(),a=N.gameConfig[e.field];return c.jsx(Yt,{style:{display:"inline-block",color:t.text},defaultValue:((i=e.inferredStateValue)==null?void 0:i.toString())??"",description:gu(e.field),onChange:l=>{l.length===0&&e.setValue(void 0);const r=parseInt(l);isNaN(r)||e.setValue(r)},placeholder:a.toString()})}function D3(){const[e,t]=O.useState(new URLSearchParams(window.location.search).has("code")),a={},i=O.useContext(Nn)==="Light",l=Mt(),[r,d]=O.useState(!0),E=O.useRef(null),[h,A]=O.useState(""),[R,T]=O.useState(0),S=Ie=>{R===8&&(C(null),d(!0),b([])),Ie!==6&&Ie!==7&&P(void 0),Ie!==4&&Ie!==5&&(L.current=[],G.current=[],M.current=void 0),[2,4,5].includes(Ie)||(U.current=void 0),T(Ie)},[I,C]=O.useState(null),[_,b]=O.useState([]),y=Ie=>{(Ie||R!==7)&&(!Ie&&R===8&&S(2),t(Ie))};O.useEffect(()=>{if(!new URLSearchParams(window.location.search).has("code")&&window.sessionStorage.getItem("fflogsAuthToken")!==null){S(2),console.log("already authorized to fflogs");return}S(1);async function Ie(){let Ce=0;try{const ye=await UC();if(ye===iE.SUCCESS)Ce=2;else if(e&&ye===iE.UNAUTHORIZED){await HC();const we=await UC();console.log(we),we===iE.SUCCESS&&(Ce=2)}}catch(ye){console.log("Error during automatic FFLogs authentication"),console.error(ye)}S(Ce)}Ie()},[]);const U=O.useRef(void 0),L=O.useRef([]),M=O.useRef(void 0),G=O.useRef([]),[H,P]=O.useState(void 0),q={color:l.emphasis,backgroundColor:l.accent},ne=c.jsx("button",{onClick:()=>S(2),children:g({en:"cancel",zh:""})}),Ee=c.jsxs("div",{className:"importPage",children:[c.jsx("div",{children:c.jsx("button",{onClick:()=>{HC(),S(1)},children:g({en:"click here to authorize your fflogs account",zh:"fflogs"})})}),c.jsx("span",{children:g({en:"(will redirect to www.fflogs.com)",zh:"www.fflogs.com"})})]}),ue=c.jsx("div",{className:"importPage",children:c.jsx("p",{children:g({en:"verifying authorization...",zh:"..."})})}),de=c.jsxs(c.Fragment,{children:[c.jsx("div",{children:c.jsx("b",{children:g({en:"Limitations",zh:""})})}),c.jsxs("div",{children:[g({en:"Log import is currently subject to the following limitations:",zh:"logs"}),c.jsxs("ul",{children:[c.jsx("li",{children:g({en:"FFLogs only records combat stats for the creator of the log, so stats must be manually entered for other players.",zh:"FFLogs"})}),c.jsx("li",{children:g({en:"FFLogs cannot record actions that were performed before combat began. Pre-pull actions must be entered manually before import.",zh:"FFLogslogs"})}),c.jsx("li",{children:g({en:"Manual buff click-offs, and buff toggles from entering/leaving a zone (for example: leaving Ley Lines or Sacred Soil) are not currently processed by XIV in the Shell.",zh:"XIV in the Shellbuff/buff"})}),c.jsx("li",{children:g({en:"The offset of MP and Lucid Dreaming ticks are not currently synchronized in XIV in the Shell.",zh:"XIV in the Shelllogs"})}),c.jsx("li",{children:g({en:"XIV in the Shell currently does not track when multiple enemies are hit by an ability.",zh:"XIV in the Shell"})}),c.jsx("li",{children:g({en:"XIV in the Shell does not reflect job gauge updates that are affected by random factors, or by whether an enemy is hit or killed.",zh:"XIV in the Shell//"})})]}),g({en:"These may change in future updates.",zh:""})]})]}),fe=R!==2||!h,Q=c.jsxs("div",{className:"importPage",children:[c.jsxs("form",{onSubmit:async Ie=>{if(Ie.preventDefault(),R===2)try{const Ce=R3(h);if(Ce.error)throw new Error(g(Ce.error).toString());if(S(3),new URL(h).searchParams.get("fight")==="last"){console.log("querying last fight ID");const ye=await p3(Ce.apiBaseUrl,Ce.reportCode);Ce.fightID=ye}if(U.current=Ce,Ce.fightID===void 0){const ye=await N3(Ce.apiBaseUrl,Ce.reportCode);L.current=ye,console.log("choosing from",ye.length,"fights"),S(4)}else if(Ce.playerID===void 0){const ye=await PC(Ce.apiBaseUrl,Ce.reportCode,Ce.fightID);L.current=[],[M.current,G.current]=ye,console.log("choosing from",G.current.length,"players"),S(5)}else{const ye=await wC({apiBaseUrl:Ce.apiBaseUrl,reportCode:Ce.reportCode,fightID:Ce.fightID,playerID:Ce.playerID});P(ye),console.log(`preparing to import ${ye.actions.length} skills`),S(6)}}catch(Ce){console.error(Ce),window.alert(Ce),S(2)}},children:[c.jsx(Yt,{description:c.jsx("div",{children:g({en:"enter an FFLogs report link",zh:"FFLogs"})}),style:{width:"100%"},onChange:A,defaultValue:h,fullWidthInput:!0,autoFocus:!0}),c.jsxs("div",{className:"buttonHolder",style:{marginTop:10},children:[c.jsx("button",{style:fe?{}:q,type:"submit",disabled:fe,children:g({en:"import",zh:""})}),c.jsx("button",{type:"button",onClick:()=>S(0),children:g({en:"back to authorization",zh:""})})]})]}),c.jsx("hr",{}),de]}),J=c.jsx("div",{className:"importPage",children:c.jsx("p",{children:g({en:"retrieving log...",zh:"logs"})})}),F=O.useRef(!1),w=c.jsxs("div",{className:"importPage",children:[c.jsx("b",{children:g({en:"Choose a fight",zh:""})}),c.jsx("ul",{children:L.current.map((Ie,Ce)=>c.jsx("li",{onClick:()=>{if(F.current)return;const ye=U.current;if(ye===void 0){console.error("log info was undefined in fight choice state"),S(2);return}F.current=!0,PC(ye.apiBaseUrl,ye.reportCode,Ie.id).then(we=>{[M.current,G.current]=we,ye.fightID=Ie.id,console.log("choosing from",G.current.length,"players"),S(5)}).catch(we=>{console.error(we),window.alert(we),S(2)}).finally(()=>{F.current=!1})},children:c.jsxs("span",{className:"clickableLinkLike",children:[new Date(Ie.unixStartTime).toLocaleString()," - ",g(Ie.label)]})},Ce))}),c.jsx("div",{children:ne})]}),K=c.jsxs("div",{className:"importPage",children:[M.current&&c.jsxs("span",{children:[new Date(M.current.unixStartTime).toLocaleString()," - ",g(M.current.label)]}),c.jsx("b",{children:g({en:"Choose a player",zh:""})}),c.jsx("ul",{children:G.current.map((Ie,Ce)=>c.jsx("li",{onClick:()=>{if(F.current)return;const ye=U.current;if(ye===void 0){console.error("log info was undefined in player choice state"),S(2);return}if(ye.fightID===void 0){console.error("fight ID was undefined in player choice state"),S(2);return}F.current=!0,wC({apiBaseUrl:ye.apiBaseUrl,reportCode:ye.reportCode,fightID:ye.fightID,playerID:Ie.id}).then(we=>{P(we),console.log(`preparing to import ${we.actions.length} skills`),S(6)}).catch(we=>{console.error(we),window.alert(we),S(2)}).finally(()=>{F.current=!1})},children:c.jsxs("span",{className:"clickableLinkLike",children:[Ie.job," - ",Ie.name]})},Ce))}),L.current.length===0?c.jsx("div",{children:ne}):c.jsx("div",{children:c.jsx("button",{onClick:()=>{S(4),G.current=[]},children:g({en:"back to fight selection",zh:""})})})]}),W=()=>N.gameConfig.job!==(H==null?void 0:H.job),D=c.jsx(We,{container:E,topic:"fflogsConfigReset",content:g({en:c.jsxs("div",{children:['FFLogs only records exact combat stats for the player that created the log. All other stats must be entered manually. Any configuration not specified in this dialog, including initial resource overrides, will use the values set in the main "Config" panel.',c.jsx("br",{}),'After a log import, the "proc mode" field is set to "Always". You can manually adjust this later.']})})}),Y=c.jsx(We,{container:E,topic:"fflogsConfigResetActive",content:g({en:c.jsxs("div",{children:[c.jsx("i",{children:"Actions in the current timeline will be cleared and replaced with those imported from the log."}),c.jsx("br",{}),"FFLogs does not record actions performed before combat begins. To add pre-pull actions, manually insert them after importing, or add them beforehand and uncheck this option."]}),zh:c.jsxs("div",{children:[c.jsx("i",{children:"logs"}),c.jsx("br",{}),"FFLogslogs"]})})}),z=c.jsx(We,{container:E,topic:"fflogsConfigResetActive",content:g({en:c.jsx("span",{children:c.jsx("i",{children:"Actions imported from the log will be added to the end of the existing timeline."})}),zh:c.jsx("span",{children:c.jsx("i",{children:"logs"})})})}),B=c.jsxs("div",{className:"importPage",children:[g({en:c.jsxs("p",{children:["Reading ",(H==null?void 0:H.actions.length)??0," skills for"," ",c.jsx("b",{children:H==null?void 0:H.playerName})]}),zh:c.jsxs("p",{children:["",c.jsx("b",{children:H==null?void 0:H.playerName}),"",(H==null?void 0:H.actions.length)??0,""]})}),c.jsxs("div",{children:[H!=null&&H.statsInLog?g({en:"Using stats found in log. Please adjust as needed.",zh:"logs"}):g({en:"Exact stats not found in log; using values in current game config. Please enter manually or adjust with the Config pane after import. ",zh:"Logs"}),D]}),c.jsx("hr",{}),c.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:5},children:[c.jsxs("div",{children:[c.jsx("span",{children:g({en:"job: ",zh:""})}),(H==null?void 0:H.job)??N.game.job]}),H&&c.jsxs("div",{children:[c.jsx("span",{children:g({en:"level: ",zh:""})}),c.jsxs("select",{style:{outline:"none",color:l.text},value:H.level,onChange:Ie=>P({...H,level:parseInt(Ie.target.value)}),children:[c.jsx("option",{value:nt.lvl100,children:"100"},nt.lvl100),c.jsx("option",{value:nt.lvl90,children:"90"},nt.lvl90),c.jsx("option",{value:nt.lvl80,children:"80"},nt.lvl80),c.jsx("option",{value:nt.lvl70,children:"70"},nt.lvl70)]})]})]}),c.jsx("div",{style:{display:"flex",gap:5,flexDirection:"column"},children:O3.map(Ie=>{var Ce;return c.jsx("div",{children:c.jsx(b3,{field:Ie,inferredStateValue:(Ce=H==null?void 0:H.inferredConfig)==null?void 0:Ce[Ie],setValue:ye=>{(H==null?void 0:H.inferredConfig)!==void 0&&P({...H,inferredConfig:{...H.inferredConfig,[Ie]:ye}})}})},Ie)})}),c.jsx("hr",{}),W()?c.jsx("div",{children:c.jsx("span",{children:g({en:"Imported actions will replace the current timeline.",zh:""})})}):c.jsxs("div",{children:[c.jsx("input",{className:"shellCheckbox",type:"checkbox",onChange:Ie=>{d(Ie.currentTarget.checked)},checked:r}),c.jsxs("span",{children:[g({en:"Reset timeline on import",zh:""})," "]}),r?Y:z]}),c.jsxs("div",{className:"buttonHolder",children:[c.jsx("button",{style:q,onClick:()=>{if(H){S(7);const Ie=C3(H,r||W());setTimeout(()=>{let Ce=Ie.next();for(;!Ce.done;)C({...Ce.value}),Ce=Ie.next();b(Ce.value),S(8)},0)}else console.error("intermediate state was undefined when confirming import"),S(2),y(!1)},children:g({en:"go",zh:""})}),ne]})]}),ee={position:"relative",width:"100%",borderCollapse:"collapse",borderColor:l.bgMediumContrast,borderWidth:"1px",borderStyle:"solid"},he={backgroundColor:l.timelineEditor.headerFooter,...ps(l)},se=Ie=>Ie%2===1?l.timelineEditor.bgAlternateRow:"transparent",Ae=(I==null?void 0:I.deltas.length)&&c.jsxs(c.Fragment,{children:[c.jsx("hr",{}),c.jsx("div",{children:g({en:"Some simulated actions had timestamps in XIV in the Shell different from the recorded values in FFLogs. Minor differences are normal, but if you see a very large discrepancy, this means there's either a bug in XIV in the Shell, or the configured spell speed/skill speed/fps was incorrect.",zh:"XIV in the Shell/logsXIV in the Shellbug//"})}),c.jsxs("table",{style:ee,children:[c.jsx("thead",{children:c.jsxs("tr",{style:Ph,children:[c.jsx("th",{style:{...he,...Lr,width:"35%"},children:g({en:"skill",zh:""})}),c.jsx("th",{style:{...he,...fl},children:g({en:"log time",zh:""})}),c.jsx("th",{style:{...he,...fl},children:g({en:"shell time",zh:""})}),c.jsx("th",{style:{...he,...fl},children:g({en:"difference",zh:""})})]})}),c.jsx("tbody",{children:I.deltas.map((Ie,Ce)=>c.jsxs("tr",{style:{...Ph,background:se(Ce)},children:[c.jsx("td",{style:{...Lr,width:"35%"},children:Ti(Ie.skill)}),c.jsx("td",{style:fl,children:et.displayTime(Ie.logTime,3)}),c.jsx("td",{style:fl,children:et.displayTime(Ie.simTime,3)}),c.jsx("td",{style:fl,children:et.displayTime(Ie.logTime-Ie.simTime,3)})]},Ce))})]}),I.spilledDeltas?c.jsx("span",{children:g({en:`...and ${I.spilledDeltas} more`,zh:`${I.spilledDeltas}`})}):void 0]}),Re=c.jsxs("div",{className:"importPage",children:[c.jsx("div",{children:g({en:"processing actions (this may take a moment)...",zh:""})}),I&&c.jsxs("div",{children:[c.jsxs("span",{children:[I.processed," / ",I.total]}),c.jsx("br",{}),Ae]})]}),Oe=_.length>0?c.jsxs(c.Fragment,{children:[g({en:`The imported timeline produced ${_.length} invalid action${_.length===1?"":"s"}:`,zh:`${_.length}`}),c.jsxs("table",{style:ee,children:[c.jsx("thead",{children:c.jsxs("tr",{style:Ph,children:[c.jsx("th",{style:{...he,...Kr},children:"#"}),c.jsx("th",{style:{...he,...Lr},children:g({en:"action",zh:""})}),c.jsx("th",{style:{...he,...Lr},children:g({en:"reason",zh:""})})]})}),c.jsx("tbody",{children:_.slice(0,10).map((Ie,Ce)=>c.jsxs("tr",{style:{...Ph,background:se(Ce)},children:[c.jsx("td",{style:Kr,children:Ie.index}),c.jsx("td",{style:Lr,children:Ie.node.toLocalizedString()}),c.jsx("td",{style:Lr,children:Ie.reason.unavailableReasons.map(_s).join(g({en:"; ",zh:""}).toString())})]},Ce))})]}),_.length>10?c.jsx("span",{children:g({en:`...and ${_.length-10} more`,zh:`...${_.length-10}`})}):void 0]}):void 0,Pe=c.jsxs("div",{className:"importPage",children:[c.jsxs("p",{children:[c.jsx("b",{children:g({en:"Import successful!",zh:""})}),g({en:" You may now close this dialog.",zh:""})]}),Ae,c.jsx("br",{}),Oe,c.jsx("br",{}),c.jsx("div",{children:c.jsx("button",{onClick:()=>y(!1),children:g({en:"finish",zh:""})})})]}),ge=R===0?Ee:R===1?ue:R===2?Q:R===3?J:R===4?w:R===5?K:R===6?B:R===7?Re:R===8?Pe:c.jsxs("div",{children:["Bad state: ",R,". Please contact us with a bug report."]}),Ne=c.jsxs("div",{ref:E,children:[c.jsx("style",{children:`
			button {
				min-width: 35%;
			}
			.buttonHolder {
				width: 100%;
				display: flex;
				flex-direction: column;
				gap: 0.8em;
				align-items: start;
			}
		`}),ge]}),oe=c.jsx("div",{className:"clickable",children:c.jsx("span",{style:a,children:c.jsx("span",{className:"clickableLinkLike",children:g({en:"Click to open dialog",zh:""})})})}),pe=c.jsx(WC,{className:"dialogExit",style:{color:l.bgHighContrast}});return c.jsxs(Ly,{open:e,onOpenChange:y,children:[c.jsx(Uy,{render:oe,nativeButton:!1}),c.jsxs(Dy,{children:[c.jsx(_y,{className:"Backdrop",style:{opacity:i?.2:.7}}),c.jsxs(by,{className:"Popup visibleScrollbar",id:"dialogPopup",style:{backgroundColor:l.background,border:"1px solid "+l.bgMediumContrast,color:l.text},children:[c.jsx(Hy,{render:c.jsx("h3",{children:g({en:"Import from FFLogs",zh:"FFLogs"})})}),c.jsx(Ny,{render:pe,nativeButton:!1}),c.jsx(Cy,{className:"Description",render:Ne})]})]})]})}function y3(e,t){const a=N.getTimelineRenderingProps();let i=a.selectionStartDisplayTime,l=a.selectionEndDisplayTime;i===l&&(i=-a.countdown,l=N.game.time-a.countdown+4);const r=N.imageExportConfig;let d,E;r.wrapThresholdSeconds===0?(d=1,E=l-i):(d=Math.ceil((l-i)/r.wrapThresholdSeconds),E=r.wrapThresholdSeconds);const h=document.createElement("canvas"),A=document.createElement("canvas"),R=De.trackHeight/2,T=N.timeline,S=T.positionFromTime(a.countdown);h.width=T.positionFromTime(l)+S;let I=De.renderSlotHeight();e&&(I+=De.rulerHeight,I+=De.trackHeight*T.getNumMarkerTracks()),h.height=I;const C=h.getContext("2d",{willReadFrequently:!0}),_=0;C.fillStyle=t.background,C.fillRect(0,0,h.width,h.height);let b=0;const y={renderingProps:N.getTimelineRenderingProps(),colors:t,visibleLeft:0,visibleWidth:100};e&&(b+=Ey({ctx:C,viewInfo:y,originX:0,ignoreVisibleX:!0,testInteraction:()=>{}}),b+=fy({ctx:C,viewInfo:y,originX:_,originY:b,ignoreVisibleX:!0,testInteraction:()=>{}})),my({ctx:C,viewInfo:y,isImageExportMode:!0,originX:_,originY:b,testInteraction:()=>{}});const U=T.positionFromTime(i)+S,L=T.positionFromTime(l)+S;A.height=(R+I)*(d-1)+I,A.width=d===1?L-U:T.positionFromTime(E);const M=A.getContext("2d");for(let G=0;G<d;G++){const H=T.positionFromTime(E);if(U>L)break;const P=Math.min(L-(U+G*H),H),q=C.getImageData(U+G*H,0,P+1,h.height+1);M.putImageData(q,0,G*(R+I)),G>0&&P<H&&(M.fillStyle=t.background,M.fillRect(P,G*(R+I),H-P,h.height+1))}return A}function v3(){const[e,t]=O.useState(N.imageExportConfig),a=(h,A)=>{const R=Object.assign({},e);R[h]=A,N.setImageExportConfig(R),t(R),It("img: "+h,JSON.stringify(A))},i={position:"relative",top:3,marginRight:"0.25em"},l=(h,A)=>c.jsxs("div",{style:{marginBottom:5},children:[c.jsx("input",{type:"checkbox",onClick:R=>a(h,R.currentTarget.checked),value:e[h]?"on":"off",style:i,defaultChecked:e[h]}),c.jsx("span",{children:g(A)})]}),r=h=>{Number.isNaN(parseFloat(h))||a("wrapThresholdSeconds",parseFloat(h))},d=c.jsxs(c.Fragment,{children:[c.jsx("div",{children:c.jsx(Yt,{defaultValue:e.wrapThresholdSeconds.toString(),description:c.jsxs("span",{children:[g({en:"seconds before wrapping ",zh:" "}),c.jsx(We,{topic:"png-wrap",content:g({en:"number of elapsed seconds, including the countdown, in each row in the image (set to 0 to never wrap)",zh:"0"})}),":"," "]}),onChange:r,style:{margin:"10px 0"}})}),l("includeTime",{en:"include time and markers",zh:""})]}),E=Mt();return c.jsxs("div",{children:[c.jsx("p",{children:g({en:c.jsx("span",{children:"export the selected part of the timeline as a png according to the current display settings, or the whole timeline if nothing is selected"}),zh:"png"})}),d,c.jsx("p",{children:c.jsx(Ol,{filename:"fight",fileFormat:Uo.Png,getContentFn:()=>y3(e.includeTime,E),displayName:g({en:"export selection as png",zh:"png"})})})]})}function M3(){const e=O.useContext(Nn),t=E=>{E.fileType===Li.Record?N.undoStack.doThenPush(new Gw(N.record.serialized(),E)):E.fileType===Li.MarkerTrackIndividual||E.fileType===Li.MarkerTracksCombined?window.alert("wrong file type '"+E.fileType+`'; use the "Timeline markers" section instead if you meant import markers.`):window.alert("wrong file type '"+E.fileType+"'.")},a=g({en:"Export fight to file",zh:""}),i=c.jsxs("div",{children:[c.jsx("p",{children:g({en:"for sharing and importing:",zh:""})}),c.jsx(Ol,{fileFormat:Uo.Json,getContentFn:()=>N.record.serialized(),filename:"fight",displayName:g({en:"txt format",zh:"txt"})}),c.jsx("p",{children:g({en:c.jsxs("span",{children:["for external tools such as excel and"," ",c.jsx("a",{href:"https://github.com/Tischel/BLMInTheShell",children:"Tischel's plugin"}),":"]}),zh:c.jsxs("span",{children:["excel",c.jsx("a",{href:"https://github.com/Tischel/BLMInTheShell",children:"Tischel"}),""]})})}),c.jsx(Ol,{fileFormat:Uo.Csv,getContentFn:()=>({body:N.getActionsLogCsv()}),filename:"fight",displayName:g({en:"csv format",zh:"csv"})}),c.jsx("p",{children:g({en:c.jsxs("span",{children:["for use with"," ",c.jsx("a",{href:"https://colab.research.google.com/github/zqsz-xiv/xivintheshell-ama-sim-notebook/blob/main/in_the_shell_with_ama_sim.ipynb",children:"Amarantine's combat simulator"}),":"]}),zh:c.jsxs("span",{children:["",c.jsx("a",{href:"https://github.com/Amarantine-xiv/Amas-FF14-Combat-Sim",children:"Amarantine"}),""]})})}),c.jsx(Ol,{fileFormat:Uo.Csv,getContentFn:()=>N.getAmaSimCsv(),filename:"fight",displayName:g({en:"csv format",zh:"csv"})})]}),l=g({en:"Import fight from file",zh:""}),r=c.jsxs(c.Fragment,{children:[c.jsx(CE,{allowLoadFromUrl:!1,onLoadFn:t}),c.jsx("hr",{style:{marginTop:15,border:"none",borderTop:"1px solid "+xo(e,"bgHighContrast")}}),c.jsx("div",{style:{marginTop:15,marginBottom:10},children:c.jsx("b",{children:g({en:"Import fight from FFLogs",zh:"FFLogs"})})}),c.jsx(D3,{})]}),d=c.jsx(c.Fragment,{children:g({en:"Image Export",zh:""})});return c.jsx(rS,{contentHeight:zS,children:[{defaultSize:25,title:l,content:r},{defaultSize:30,title:a,content:i},{defaultSize:45,title:d,content:c.jsx(v3,{})}]})}function L3(){const e=(d,E)=>c.jsxs("div",{style:{marginBottom:5},children:[c.jsx("b",{children:g(d)})," ",E]}),t=c.jsx(We,{topic:"settings-display",content:g({en:"Configure how elements are displayed in the visual timeline and image exports.",zh:""})}),a=c.jsx(We,{topic:"settings-copypaste",content:g({en:c.jsxs("div",{children:["Configure the format used when copying a sequence of skills from XIV in the Shell to paste in other applications.",c.jsx("br",{}),"Any of the provided formats can be pasted ",c.jsx("i",{children:"from"})," external applications to XIV in the Shell at any time, regardless of the value of this setting."]}),zh:c.jsxs("div",{children:["",c.jsx("br",{}),""]})})}),i=c.jsx(We,{topic:"settings-copypaste-plain",content:g({en:c.jsxs("div",{children:["A comma-separated list of skill names.",c.jsx("br",{}),c.jsx("br",{}),"Example:",c.jsx("br",{}),c.jsx("span",{children:"Fire 3, Fire 4, Despair"})]}),zh:c.jsxs("div",{children:["",c.jsx("br",{}),c.jsx("br",{}),"",c.jsx("br",{}),c.jsx("span",{children:"34"})]})})}),l=c.jsx(We,{topic:"settings-copypaste-plain",content:g({en:c.jsxs("div",{children:["A tab-separated list of usage timestamps, target counts, and skill names, for use with external spreadsheet applications.",c.jsx("br",{}),c.jsx("br",{}),"Example:",c.jsx("table",{children:c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("td",{children:"-3.500"}),c.jsx("td",{children:"1"}),c.jsx("td",{children:"Fire 3"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"0.042"}),c.jsx("td",{children:"1"}),c.jsx("td",{children:"Fire 4"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"2.500"}),c.jsx("td",{children:"1"}),c.jsx("td",{children:"Despair"})]})]})})]}),zh:c.jsxs("div",{children:["",c.jsx("br",{}),c.jsx("br",{}),"",c.jsx("table",{children:c.jsxs("tbody",{children:[c.jsxs("tr",{children:[c.jsx("td",{children:"-3.500"}),c.jsx("td",{children:"1"}),c.jsx("td",{children:"3"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"0.042"}),c.jsx("td",{children:"1"}),c.jsx("td",{children:"4"})]}),c.jsxs("tr",{children:[c.jsx("td",{children:"2.500"}),c.jsx("td",{children:"1"}),c.jsx("td",{children:""})]})]})})]})})}),r=c.jsx(We,{topic:"settings-copypaste-discord",content:g({en:c.jsxs("div",{children:["A sequence of Discord emotes (only verified for BLM and PCT). Requires access to a server with appropriately-named emotes to use.",c.jsx("br",{}),c.jsx("br",{}),"Example:",c.jsx("br",{}),c.jsx("span",{children:":F3: :F4: :Despair:"})]}),zh:c.jsxs("div",{children:["Discord)Discord",c.jsx("br",{}),c.jsx("br",{}),"",c.jsx("br",{}),c.jsx("span",{children:":F3: :F4: :Despair:"})]})})});return c.jsxs("div",{children:[e({en:"Display settings",zh:""},t),c.jsx(Cu,{uniqueName:"showDamageMarks",label:g({en:"show damage marks",zh:""}),onChange:d=>{N.setTimelineOptions({drawDamageMarks:d})}}),c.jsx(Cu,{uniqueName:"showHealingMarks",label:g({en:"show healing marks",zh:""}),onChange:d=>{N.setTimelineOptions({drawHealingMarks:d})}}),c.jsx(Cu,{uniqueName:"showMPAndLucidTickMarks",label:g({en:"show MP and lucid ticks",zh:""}),onChange:d=>{N.setTimelineOptions({drawMPTickMarks:d})}}),c.jsx(Cu,{uniqueName:"showBuffIndicators",label:g({en:"show buff indicators",zh:"buff"}),onChange:d=>{N.setTimelineOptions({drawBuffIndicators:d})}}),c.jsx("br",{}),e({en:"Clipboard copy mode",zh:""},a),c.jsx(bw,{uniqueName:"clipboardMode",onChange:d=>N.clipboardMode=d,options:[["plain",c.jsxs("span",{children:[g({en:"plain text",zh:""})," ",i]})],["tsv",c.jsxs("span",{children:[g({en:"tab-separated lines",zh:""})," ",l]})],["discord",c.jsxs("span",{children:["discord",g({en:" emotes",zh:""})," ",r]})]]})]})}let Go=()=>{},Gy=e=>{};const By="dragLock",H3=bt(By),Fy=H3==="true",Ed=O.createContext({value:Fy,setter:e=>{}}),yf=O.createContext({dragTargetIndex:null,dragTargetTime:null,setDragTarget:(e,t)=>{}});function U3(){const e=O.useRef(null),[t,a]=O.useState(11),[i,l]=O.useState(300),[r,d]=O.useState(23),[E,h]=O.useState(66),[A,R]=O.useState(0),[T,S]=O.useState(!1),[I,C]=O.useState({onMouseMove:()=>{},onMouseEnter:()=>{},onMouseLeave:()=>{},onMouseUp:()=>{},onMouseDown:()=>{},onKeyDown:()=>{}}),_=()=>{e.current&&(d(e.current.scrollLeft),h(e.current.clientWidth))};Go=()=>{a(N.timeline.getCanvasWidth()),l(N.timeline.getCanvasHeight()),R(A+1)},Gy=L=>{if(e.current!=null){const M=e.current.clientWidth;e.current.scrollLeft=L-M*.6}_()},O.useEffect(()=>{a(N.timeline.getCanvasWidth()),l(N.timeline.getCanvasHeight()),_()},[]);const b=c.jsx(bF,{timelineHeight:i,visibleLeft:r,visibleWidth:E,version:A,pointerMouse:T,setCallbacks:C,setPointerMouse:S}),y=O.useContext(Nn),U=xo(y,"bgMediumContrast");return c.jsxs("div",{style:{position:"relative"},children:[b,c.jsx("div",{tabIndex:0,className:"visibleScrollbar",style:{position:"relative",width:"100%",overflowX:"scroll",overflowY:"clip",outline:"1px solid "+U,cursor:T?"pointer":"default"},ref:e,onScroll:()=>{e.current&&(e.current.scrollLeft=Math.min(e.current.scrollWidth-e.current.clientWidth,e.current.scrollLeft),d(e.current.scrollLeft),h(e.current.clientWidth))},onMouseMove:L=>{if(e.current){const M=e.current.getBoundingClientRect(),G=L.clientX-M.left,H=L.clientY-M.top;I.onMouseMove(G,H)}},onMouseDown:L=>{if(e.current){const M=e.current.getBoundingClientRect(),G=L.clientX-M.left,H=L.clientY-M.top;I.onMouseDown(G,H)}},onMouseEnter:()=>I.onMouseEnter(),onMouseLeave:()=>I.onMouseLeave(),onMouseUp:L=>{if(e.current){const M=e.current.getBoundingClientRect(),G=L.clientX-M.left,H=L.clientY-M.top;I.onMouseUp(L,G,H)}},onKeyDown:L=>I.onKeyDown(L),children:c.jsx("div",{style:{position:"relative",backgroundColor:"transparent",width:t,height:i,pointerEvents:"none"}})})]})}const zy=320,zS=zy-40;function x3(){const{value:e,setter:t}=O.useContext(Ed),a=O.useContext(Nn),i=window.innerWidth>1024,l=window.innerWidth>800;return c.jsxs("div",{style:{position:"relative",margin:6},children:[c.jsx(YO,{uniqueName:"timeline",maxWidth:1440,content:[{titleNode:g({en:"Timeline markers",zh:""}),contentNode:c.jsx(AO,{})},{titleNode:c.jsxs("div",{style:{position:"relative"},children:[g({en:"Timeline editor ",zh:" "}),c.jsx(We,{topic:"timeline editor",content:c.jsx("div",{children:c.jsx("div",{className:"paragraph",children:g({en:'Table view for editing the current timeline. Changes made here are not saved until the "apply changes" button is pressed.',zh:""})})})})]}),contentNode:c.jsx(vw,{})},{titleNode:g({en:"Import/Export",zh:"/"}),contentNode:c.jsx("div",{children:c.jsx(M3,{})})},{titleNode:g({en:"Settings",zh:""}),contentNode:c.jsx(L3,{})}],collapsible:!0,scrollable:!1,height:zy,defaultSelectedIndex:void 0}),c.jsxs("div",{style:{position:"absolute",top:0,right:6,display:"flex",flexDirection:"row",gap:20},children:[i&&c.jsxs("div",{style:{height:kr,lineHeight:`${kr}px`,verticalAlign:"middle",cursor:"pointer",userSelect:"none"},onClick:r=>{r.preventDefault(),t(!e)},children:[g({en:"drag lock",zh:""})," ",c.jsx(We,{topic:"dragLock",content:g({en:c.jsx("div",{children:"When locked, disables click/drag to rearrange timeline skills."}),zh:c.jsx("div",{children:""})})})," ",c.jsx(Br.Provider,{value:{color:e?xo(a,"accent"):void 0,style:{width:12,height:12,verticalAlign:"baseline"}},children:e?c.jsx(ML,{}):c.jsx(vL,{})})]}),l&&c.jsx(Ow,{uniqueName:"timelineDisplayScale",description:g({en:"horizontal scale ",zh:" "}),defaultValue:"0.4",style:{height:kr,lineHeight:`${kr}px`,verticalAlign:"middle"},onChange:r=>{N.timeline.setHorizontalScale(parseFloat(r)),N.scrollToTime()}})]})]})}function k3(){const[e,t]=O.useState(Fy),[[a,i],l]=O.useState([null,null]),r=(d,E)=>{if(e)d=null,E=null;else{const h=N.record.selectionStartIndex??0;let A=(d??0)-(h??0);A>0&&(A-=N.record.getSelectionLength()),(A===0||d!==null&&N.record.isInSelection(d))&&(d=null,E=null)}(d!==a||E!==i)&&l([d,E])};return c.jsx("div",{style:{bottom:0,left:0,right:0,paddingLeft:0,paddingRight:0,borderTop:"2px solid "+Mt().bgHighContrast,flex:0},children:c.jsx(Ed.Provider,{value:{value:e,setter:d=>{It(By,d.toString()),t(d)}},children:c.jsxs(yf.Provider,{value:{dragTargetIndex:a,dragTargetTime:i,setDragTarget:r},children:[c.jsx(U3,{}),c.jsx(x3,{})]})})})}const ka=JSON.parse(`[{"date":"11/11/25","changes":["Fixed a bug where timeline skill tooltips would be acidentally cut off.","[SCH] Fixed a bug where Energy Drain and Physick were not recognized during log import."],"changes_zh":["","log"]},{"date":"11/7/25","changes":["Added the ability to import fights from FFLogs! You can find it in the Import/Export tab at the bottom of the page.","[WAR] Fixed a typo in the name of Storm's Path and Storm's Eye"],"changes_zh":["FFLogs/"],"level":"major"},{"date":"10/13/25","changes":["Added tracks for The Final Verse (Quantum) Q40."],"level":"minor"},{"date":"9/29/25","changes":["Updated the text of the timeline editor help tooltip.","New developer blog post (English only): https://blog.xivintheshell.com/posts/progressive-ux-improvements/"],"changes_zh":[""],"level":"minor"},{"date":"9/20/25","changes":["[!] Skills can now be inserted in the middle of a timeline.","[!] Pressing backspace/delete now deletes only the selected skills.","Using the up and down arrow keys changes the selected skills.","Most actions can now be undone/redone with ctrl/cmd+z and ctrl/cmd+y.","Actions can now be copy/pasted both within and outside the site (see \\"Settings\\" at the bottom of the page for details).","Adjusted the appearance of some website elements on Firefox."],"changes_zh":["[!]","[!]backspacedelete","    ","ctrl/cmd+zctrl/cmd+y/","",""],"level":"major"},{"date":"9/14/25","changes":["Fixed a bug where certain config stats couldn't be changed."]},{"date":"9/12/25","changes":["Added an \\"apply\\" button to the configuration section, which can be used to change configuration without resetting the timeline."],"changes_zh":[""]},{"date":"9/8/25","changes":["Fixed a crash when loading xivgear/etro links from a job different from the active one.","Fixed an issue where speed effects and certain sps/sks values were displayed incorrectly at level 70 (this was only a cosmetic issue in the configuration panel).","Changing jobs now uses the last saved stats you set for that job.","Creating a new timeline with a different job will now use one of The Balance's best-in-slot gear sets for the current patch."]},{"date":"9/2/25","changes":["Added different tincture images for each job.","Timelines with invalid skill names can now be loaded."]},{"date":"9/1/25","changes":["Added DSR P2 markers from Caro."]},{"date":"8/28/25","changes":["[BRD] Fixed typos in the names of Apex Arrow, The Wanderer's Minuet, and Rain of Death.","[BRD] Export to Ama's combat sim now tracks codas for Radiant Finale and Radiant Encore.","Updated export to Ama's combat sim to include hard-coded STR stats for healer/caster auto-attacks."]},{"date":"8/19/25","changes":["[WHM] Fixed a bug where Lillies would continue to generate even when at full stacks.","Fixed a bug where clicking on the timeline ruler would not immediately display historical state."],"level":"minor"},{"date":"8/17/25","changes":["Changed timeline slot buttons to trigger only if the mouse was both pressed and released on top of them."],"level":"minor"},{"date":"8/11/25","changes":["Made some internal adjustments to the implementation of click/drag selection and skill arrangements.","[WAR] Fixed a bug where Decimate consumed 2 stacks of Inner Release, and failed to grant Burgeoning Fury.","[WAR] Fixed Storm's Eye using an incorrect application delay.","[WAR] Extended the duration of the Inner Release, Primal Rend Ready, and Primal Ruination buffs to match in-game behavior.","[NIN] Fixed a bug where using Gust Slash without an active combo incorrectly advanced combo state.","[NIN] Fixed a bug where damage from Doton ticks was not computed.","[NIN] Fixed a bug where using Katon under Ten Chi Jin did not trigger Hollow Nozuchi."],"level":"minor"},{"date":"8/10/25","changes":["[NIN] Fixed a bug where Ninjutsu abilities were not buffed by Kunai's Bane and Dokumori."],"level":"minor"},{"date":"8/8/25","changes":["Added quick links to our GitHub, Bluesky, and (new) developer blog.","Added Bluesky, the dev blog, and the legacy game version site to the links in the \\"about\\" section."],"level":"minor"},{"date":"8/4/25","changes":["Updated for patch 7.3."],"changes_zh":["7.3"],"level":"major"},{"date":"8/3/25","changes":["The active timeline slot is now saved across page reloads.","Click and drag to rearrange skills, both in the visual timeline and timeline editor table.","Click and drag on the background of the visual timeline to select multiple skills.","Use the \\"drag lock\\" switch to the right of the display settings tabs to disable click+drag behavior."],"changes_zh":["","","",""],"level":"major"},{"date":"7/27/25","changes":["Updated FPS adjustment preview tooltip to use GCD time instead of cast times."]},{"date":"7/26/25","changes":["[WHM][AST][SCH] Fixed a bug where Swiftcast's cooldown was set to 40s below level 100."]},{"date":"7/25/25","changes":["[SCH] Initial SCH implementation. Thanks to Caro for help with numbers and some mechanics.","That's every job now in the shell! Stay tuned for more features and improvements to come."],"changes_zh":["Caro",""],"level":"major"},{"date":"7/22/25","changes":["[DNC] Fixed a bug where Fountain and Bladeshower could grant Silken Flow when used without combo."]},{"date":"7/20/25","changes":["[VPR] Added initial support for VPR. Thanks to Verra for help testing.","[BLU] Using an action while Waning Nocturne or Diamondback are active now uses the action as soon as the debuff expires."],"changes_zh":[" Verra","\\"\\"\\"\\""],"level":"major"},{"date":"7/15/25","changes":["Fixed \\"real-time auto pause\\" display.","[GNB] Fixed a bug where Fated Circle broke combos."],"changes_zh":["\\"(\\"",""],"level":"minor"},{"date":"7/14/25","changes":["[BLU] Fixed a bug where Apokalypsis and Phantom Flurry's potencies were incorrect.","[BLU] Fixed a bug where Surpanakha's 30-second cooldown was not applied."],"changes_zh":["\\"\\"\\"\\"","\\"\\"30CD"],"level":"minor"},{"date":"7/10/25","changes":["[MNK] Now begins encounters with Formless Fist active by default.","[DRG][NIN] Fixed a bug where using combo actions out of sequence granted combo potency bonus.","[AST] Fixed Macrocosmos/Microcosmos."],"changes_zh":["\\"\\"","",""],"level":"minor"},{"date":"7/8/25","changes":["[AST] Added initial support for AST.","[WHM] Addd initial support for WHM.","[SAM][NIN][MNK] GCD calculations in the configuration panel now account for jobs' natural speed buffs."],"changes_zh":[" "," ","GCD"],"level":"major"},{"date":"7/5/25","changes":["[MNK] Added initial support for MNK."],"changes_zh":[" "],"level":"major"},{"date":"6/25/25","changes":["Fixed a bug where timestamps would not appear for wait events in the timeline editor.","Fixed a bug where selecting a skill in the visual canvas did not cause the editor table to scroll to its location."],"level":"minor"},{"date":"6/24/25","changes":["[NIN] Added initial support for NIN."],"changes_zh":[" "],"level":"major"},{"date":"6/19/25","changes":["[DRK] Added initial support for DRK."],"changes_zh":[" "],"level":"major"},{"date":"6/18/25","changes":["Fixed a bug where the \\"wait until timestamp\\" events would change times unexpectedly."],"changes_zh":["\\"\\""],"level":"minor"},{"date":"6/17/25","changes":["Fixed timestamps not appearing in the timeline editor when a new skill is added.","Fixed skill selections ending on \\"wait\\" events not rendering correctly in the graphical timeline.","Fixed skill tooltips in the graphical timeline not displaying AoE potency."],"changes_zh":["","\\"\\"","aoe"],"level":"minor"},{"date":"6/16/25","changes":["[BLU] Added support for Blue Mage."],"changes_zh":[""],"level":"minor"},{"date":"6/6/25","changes":["[GNB][SGE] Chinese localization."],"changes_zh":[""],"level":"minor"},{"date":"6/3/25","changes":["Added the ability to save invalid timelines on the visual canvas. Changes in the timeline editor now reflect in the graphical timeline as well.","The \\"jump to timestamp\\" and \\"wait for MP tick\\" buttons will now always look for the specified timestamp/next MP tick, even when actions are shifted in the timeline editor.","Added a \\"Clone timeline slot\\" button.","See our \\"known bugs\\" page on GitHub for limitations: https://github.com/xivintheshell/xivintheshell/wiki/Known-Bugs"],"changes_zh":["","","","GitHubhttps://github.com/xivintheshell/xivintheshell/wiki/Known-Bugs"],"level":"major"},{"date":"5/29/25","changes":["[PLD] Chinese localization adjustments.","[SMN] Chinese localization; fix summon lock bar not showing progress."],"changes_zh":["",""],"level":"minor"},{"date":"5/28/25","changes":["[PLD] Chinese localization first draft."],"changes_zh":[""],"level":"minor"},{"date":"5/27/25","changes":["[BRD][MCH][SMN] Adjusted AoE potencies to reflect patch 7.25."],"changes_zh":["7.25"],"level":"minor"},{"date":"5/26/25","changes":["Fixed a bug where damage log CSV export didn't work (thanks ryxiv)."],"level":"minor"},{"date":"5/23/25","changes":["Adjusted the calculations for the effect of crit/DH party buffs on auto-crit/DH hits, like PCT's Hammer combo.","Fixed a bug with export to Ama's combat sim where Chain Stratagem and Dokumori would not apply to the boss."],"changes_zh":["","Fixed a bug with export to Ama's combat sim where Chain Stratagem and Dokumori would not apply to the boss."],"level":"minor"},{"date":"5/18/25","changes":["Updated the site to automatically use dark mode if your system is set to use it. Manually using the theme selector overrides this.","[GNB] Fixed a typo where \\"Lightning Shot\\" was incorrectly called \\"Lightning Shock.\\"","[GNB] Updated the application delay of Trajectory from 0.22 to 0.66 to match the current version of the game."],"level":"minor"},{"date":"5/17/25","changes":["We've made some big updates to the tools we use to build XIV in the Shell. The site should work the same as before, but if you notice anything broken or slow, please let us know posthaste.","We're planning on adding some large features in the near feature, so we've also made the changelog more prominent in anticipation. Please look forward to it."],"changes_zh":["XIV in the Shell",""],"level":"major"},{"date":"5/10/25","changes":["[PLD] Added initial support for PLD"],"changes_zh":[" "],"level":"major"},{"date":"5/9/25","changes":["[RPR] Fixed a bug where Regress wasn't usable in enshroud","[RPR] Fixed a bug where Grim Swathe was replaced with Lemure's Slice instead of Lemure's Scythe","[RPR] Fixed a bug where Perfectio was usable in enshroud","[RPR] Fixed a bug where Executioner's Gibbet/Gallows weren't replaced with Void/Cross Reaping while in enshroud","[SMN] Fixed a bug where Slipstream's initial hit falloff was displayed incorrectly in the DoT table (thanks omor1)","[SMN] Fixed the potency of Mountain Buster (was incorrectly listed as 170 instead of 160, thanks omor1)"]},{"date":"5/2/25","changes":["Changed Ama's combat sim export to disable auto-attacks for healer/caster jobs."]},{"date":"4/28/25","changes":["Refactored cooldown logic. Changes should not affect end users, but let us know if anything is off.","Added a few missing translations"]},{"date":"4/21/25","changes":["Updated compatibility with Ama's combat sim for newly-supported jobs."]},{"date":"4/17/25","changes":["[RPR] Added a button to gain +10 Soul Gauge to simulate a target dying with Death's Design active","[BRD] Fixed a bug where Iron Jaws checked the dot status at application time instead of confirmation time (thanks Yumiya)","[BRD] Fixed a bug where Empyreal Arrow applied repertoire at application time instead of confirmation time (also thanks Yumiya)"]},{"date":"4/13/25","changes":["Added English-language markers for M8S"]},{"date":"4/7/25","changes":["Added English-language markers for M7S"]},{"date":"4/6/25","changes":["Added English-language markers for M5S + M6S"]},{"date":"3/29/25","changes":["[BLM] Removed \\"outdated\\" status"]},{"date":"3/26/25","changes":["Added user survey link"]},{"date":"3/24/25","changes":["We have updated the site in accordance with the 7.2 patch notes. Goodbye to the Enochian timer o7","[BLM] will remain in \\"outdated\\" status until we have a change to play with the changes in-game.","Since most jobs received only potency changes, your old 7.1 plans should work, but as usual, please let us know if anything seems incorrect."]},{"date":"3/20/25","changes":["[DNC] Fixed an issue where the icons for Finishing Move Ready and Last Dance Ready were swapped, and an issue where Last Dance Ready was not consumed by Last Dance (thank you bluke)"]},{"date":"3/16/25","changes":["Fixed an issue where resource toggles were shown in the timeline editor with their internal keys rather than localized text.","Fixed mistakes in DoT effect override calculations.","In anticipation of patch 7.2, we're working on some changes to make it easier to migrate timelines after site or game changes. The following things have changed:","- Single-clicking an action will now try to use it as soon as the current animation lock/skill cooldown is over (this used to require double-clicking). If the action cannot be used, a wait is automatically added to the timeilne.","- In \\"manual\\" control mode, you no longer need to press space to advance past an action's animation lock (it will now advance automatically when a skill is used).","- Displayed wait durations are now always calculated from the end of the previous animation lock. Any existing timelines will automatically be adjusted--the shown wait times may be different, but the times where actions are used will remain the same.","- Skill sequence presets now include wait durations. This lets you load/save sequences that use late weaves or wait for MP ticks (assuming ticks still line up correctly).","As a consequence of these changes, you actually might now be able to load BLM timelines from 7.05/7.0 that previously were broken as a result of Despair becoming instant. Despair will still be instant and other buff usage will be unchanged, but the time between abilities should be correct.","These changes are very large, and while we've tested to make sure they won't break your existing timelines, there might still be some bugs that slipped through the cracks. As always, please reach out to us if you encounter any problems."]},{"date":"3/1/25","changes":["Make it so that you can only delete the currently active slot, to hopefully reduce the chance of accidentally deleting a slot when switching"]},{"date":"2/26/25","changes":["Updated the GCD formula because the old formula may be off by 0.01s when there is haste buff. Thank you Yuyuka for spotting the error. Note: old timelines (including timelines in browser localStorage) aren't affected; only newly created timelines use the new formula."]},{"date":"2/22/25","changes":["Added Queen Eternal markers by "]},{"date":"2/21/25","changes":["[BRD][GNB][SMN] Removed testing tag"]},{"date":"2/20/25","changes":["[SGE] Initial implementation for SGE","- Some rough edges still exist around Krasis' healing potency modification and Eukrasian shield handling.","- Basic functionality should be reasonably complete.","[RDM] Fixed a bug where Manafication could be used before combat"]},{"date":"2/16/25","changes":["[SAM] Fixed Hagakure only being usable at 3 sen"]},{"date":"2/15/25","changes":["[BLM] Fixed Manafont CD at lvl80 and below: should be 120s"]},{"date":"2/13/25","changes":["Updated English FRU tracks to more accurately reflect downtime between phases. We previously used the \\"death\\" event in a log as the end of a phase, but it turns out this is inaccurate as the last damage application to the boss occurs ~2 seconds before its recorded death.","- P1 to P2 untargetable duration increased by 2 seconds","- P2 to intermission untargetable duration decreased to align with the \\"crystals become targetable\\" mark","- Intermission to P3 downtime increased to match Gaia's attack killing the crystal","In order to not break existing timelines, the preset EN full fight track now treats P1 as dying 2 seconds before the end of the enrage cast. The start times of all phases are unaffected."]},{"date":"2/4/25","changes":["[SAM] Fixed AoE combo actions not ending the combo","[DRG] Added initial support for DRG"]},{"date":"2/2/25","changes":["[BRD][DNC] Fixed bonuses given from certain crit/DH buffs not applying in total potency calculations"]},{"date":"2/1/25","changes":["[WAR][SAM][RPR][MCH][DNC] Implemented localization for some recently added jobs"]},{"date":"1/27/25","changes":["[SMN] Added initial support for SMN"]},{"date":"1/26/25","changes":["[WAR][GNB] Fixed missing icon for tank LB3s"]},{"date":"1/18/25","changes":["[GNB] Added initial support for GNB"]},{"date":"1/17/25","changes":["Added \\"move end of selection to start of selection\\" button to the timeline editor"]},{"date":"1/12/25","changes":["[RPR] Fixed a bug where oGCDs would improperly consume Reaver/Executioner stacks"]},{"date":"1/8/25","changes":["[WAR] Fixed surging tempest text not showing up in potency modifier tooltip","[MCH] Fixed Overheated potency modifier not being applied"]},{"date":"1/5/25","changes":["Fixed a bug where multi-target spells lost their target counts when using the timeline editor"]},{"date":"1/4/25","changes":["Added support for multi-target abilities"]},{"date":"1/3/25","changes":["[WAR][SAM][RPR] Removed testing tag"]},{"date":"1/1/25","changes":["Added combined English FRU tracks"]},{"date":"12/28/24","changes":["[PCT] Fixed warning for Palette Gauge overcap"]},{"date":"12/24/24","changes":["[MCH] Added support for Flamethrower"]},{"date":"12/22/24","changes":["[BRD] Added initial support for BRD","Overhaul DoT tracking to provide better usage statistics","[BLM] Added High Thunder II"]},{"date":"12/20/24","changes":["Fixed stats tables not including party buff potencies for most skills","Removed flank/rear positional resources for non-melee jobs"]},{"date":"12/19/24","changes":["[WAR] Adjusted animation lock of Primal Rend","Fixed Down for the Count timing in FRU P4 (thanks xi12570)"]},{"date":"12/16/24","changes":["Limit breaks for all jobs!","[MCH][DNC] Removed testing tag","Updated \\"About this tool\\" section","More underlying implementation changes","[PCT] Made Hammer combo expire with Hammer Time buff (changed in 7.1)"]},{"date":"12/13/24","changes":["Fixed sometimes unable to use skills in manual mode with double click","[RPR] Added timer for Immortal Sacrifice","[RPR] Removed enhanced reapings whenever shroud is exited","[RPR] Separated cooldowns of Sacrificium and Lemure's Slice","[RPR] Fixed sks scaling","[WAR] Added initial WAR support"]},{"date":"12/12/24","changes":["Updated English FRU tracks and added P4 + P5"]},{"date":"12/8/24","changes":["Updated Chinese FRU tracks to latest (12/8 ver)","Make stats tables only include selected skills when there is selection"]},{"date":"12/7/24","changes":["Updated positional buff icons","Misc cleanups and optimizations (hey devs: rerun npm install)","[BLM] Fixed Retrace button not changing back to LL if LL is disabled when the buff drops"]},{"date":"12/5/24","changes":["Updated Chinese FRU tracks to latest (12/2 version)","Additional Chinese localization changes (preset lines; initial resource overrides section; many resource names)","New skill icon progress bar visuals "]},{"date":"12/4/24","changes":["Added English FRU P3 tracks by Yara","[RDM] Fixed Swiftcast being consumed before Dualcast when both are active"]},{"date":"12/2/24","changes":["Added English FRU P2 tracks by Yara","Fixed a bug where 'Load tracks starting at timestamp' did not accept some time formats","[RDM] Removed the 'testing' label"]},{"date":"12/1/24","changes":["Updated full FRU tracks in Chinese by  & czmm"]},{"date":"11/30/24","changes":["[MCH] Fixed Scattergun's heat generation (thanks Kairos)","[PCT] Fixed Monochrome Tones appearing when synced to level 80 and other internal trait logic (thanks misterperson)"]},{"date":"11/29/24","changes":["[MCH] Fixed bugs with MCH Overheat consumption on AoE abilities (thanks FloatingGhost)"]},{"date":"11/28/24","changes":["Added some Chinese tracks (M1S-M4S, FRU before P2.5)"]},{"date":"11/27/24","changes":["Added the ability to override stacks to 0 for 1-stack resources that start present by default","Added preliminary FRU P1 tracks by Yara"]},{"date":"11/26/24","changes":["Added the ability to load marker tracks starting from a particular timestamp"]},{"date":"11/25/24","changes":["[RPR] Added initial RPR support"]},{"date":"11/24/24","changes":["[MCH] Added initial MCH support"]},{"date":"11/21/24","changes":["[SAM] Fixed a bug where Fuka haste was doubly applied","[SAM] Added GCD under Fuka in playback control"]},{"date":"11/20/24","changes":["[DNC] Added initial DNC support","[SAM] Added initial SAM support (thank you Sterling Sylva for the initial work)","Added support for skill speed in addition to spell speed"]},{"date":"11/17/24","changes":["[RDM] Fix Manafication CD (thanks )","[all casters] Fix Surecast duration: previously 10s, now 6.5s (ty erii)"]},{"date":"11/16/24","changes":["Make DET use main stat formula and default to 440","Add hyperlinks for xivgear and etro"]},{"date":"11/15/24","changes":["(thank you Yuyuka for reporting a bunch of RDM bugs)","[RDM] Added some additional warnings on unintended buff drops, overwrites, and combo breaks","[RDM] Fixed the duration of the Acceleration buff","[RDM] Fixed the MP costs of Veraero II/Verthunder II","[RDM] Fixed Manafication failing to interrupt combos","[RDM] Fixed Manafication being usable out of combat","[RDM] Fixed Enchanted Reprise clearing mana stacks","[RDM] Made Prefulgence and Vice of Thorns into button replacements"]},{"date":"11/14/24","changes":["(thank you Wan Shott for reporting a bunch of RDM bugs)","[RDM] Fixed bugs where Verfire and Grand Impact didn't grant correct mana","[RDM] Fixed a bug where it was possible to use un-enchanted Moulinet under certain incorrect conditions","mark newly-implemented jobs as in testing and display a warning message when using those jobs"]},{"date":"11/13/24","changes":["Fixed a bug where party buff potencies were not displayed","[PCT] Fixed a bug where using two hammer combos within 30s of each other caused the combo to break","[RDM] Fixed a bug where level synced RDM still received Grand Impact Ready from Acceleration","[RDM] Fixed a bug where Acceleration did not always grant a Verstone/Verfire proc","[RDM] Fixed a bug where certain role buffs were not being displayed on the hotbar","[RDM] Fixed a bug where buffs were overlapping the hotbar","[RDM] Fixed a bug where Contre Sixte's cooldown was improperly affected by traits","Removed debug and implementation notes sections (see repository wiki for implementation notes)"]},{"date":"11/12/24","changes":["Initial XIV in the Shell! Supporting patch 7.1 BLM and PCT, plus preliminary RDM"]}]`);function DR(){return ka[0].date}function GC(e){const t=Mt();return c.jsxs("div",{className:"changelogGroup",children:[c.jsx("div",{children:e.date}),c.jsx("div",{children:g({en:c.jsx(c.Fragment,{children:e.changes.map((a,i)=>c.jsx("div",{className:"changelogLine",style:{color:a.substring(1,5)==="BETA"?t.warning:t.text},children:a},i))}),zh:e.changes_zh!==void 0?c.jsx(c.Fragment,{children:e.changes_zh.map((a,i)=>c.jsx("div",{className:"changelogLine",style:{color:a.substring(1,5)==="BETA"?t.warning:t.text},children:a},i))}):void 0})})]})}const P3=`
.changelogGroup {
	margin-top: 1em;
	margin-bottom: 1em;
}

.changelogLine {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
	margin-left: 0.5em;
}
`;function w3(){let e,t,a={};const i=O.useRef(5),[l,r]=O.useState(!1),[d,E]=O.useState(!1),h=O.useContext(Nn)==="Light",A=Mt();O.useEffect(()=>{let I=bt("changelogLastRead"),C=bt("changelogLastReadChangeCount");!xL&&(I===null||C===null)&&(I="5/10/25",C="1");const _=I===null||C===null||I===ka[0].date&&C===ka[0].changes.length.toString();if(r(_),I!==null&&C!==null){if(!_){let b=0,y=!1;for(;b<ka.length-1;b++){if(I===ka[b].date){C!==ka[b].changes.length.toString()&&b++;break}y=y||ka[b].level==="major"}E(y),i.current=b}}else It("changelogLastRead",ka[0].date),It("changelogLastReadChangeCount",ka[0].changes.length.toString())},[]);const R=I=>{I||(i.current=5,l||(It("changelogLastRead",ka[0].date),It("changelogLastReadChangeCount",ka[0].changes.length.toString())),r(!0))};if(l)e=g({en:"Changelog",zh:"",ja:""}),t="";else{const I=Mt();e=g({en:"Changelog (new updates"+(d?"!!":"")+")",zh:""+(d?"":"")+""}),t="!",d?a={color:I.warning,fontWeight:"bold"}:a={fontWeight:"bold"}}const T=c.jsx("div",{className:"clickable",children:c.jsxs("span",{style:a,children:[c.jsxs("span",{children:[t," "]}),c.jsx("span",{className:"clickableLinkLike",children:e})]})}),S=c.jsx(WC,{className:"dialogExit",style:{color:A.bgHighContrast}});return c.jsxs(c.Fragment,{children:[c.jsx("style",{children:P3}),c.jsxs(Ly,{onOpenChange:R,children:[c.jsx(Uy,{render:T,nativeButton:!1}),c.jsxs(Dy,{children:[c.jsx(_y,{className:"Backdrop",style:{opacity:h?.2:.7}}),c.jsxs(by,{className:"Popup visibleScrollbar",id:"changelogPopup",style:{backgroundColor:A.background,border:"1px solid "+A.bgMediumContrast,color:A.text},children:[c.jsx(Hy,{render:c.jsx("h3",{children:e})}),c.jsx(Ny,{render:S,nativeButton:!1}),c.jsx(Cy,{className:"Description",render:c.jsx(G3,{hiddenStartIndex:i.current,newChanges:!l})})]})]})]})]})}function G3(e){const t=[],a=[];for(let A=0;A<e.hiddenStartIndex;A++)t.push(GC(ka[A]));for(let A=e.hiddenStartIndex;A<ka.length;A++)a.push(GC(ka[A]));const i=g({en:e.newChanges?"New Changes":"Recent Changes",zh:e.newChanges?"":""}),l=c.jsxs("div",{style:{marginTop:10,marginBottom:10},children:[c.jsx("span",{style:{marginTop:10,marginBottom:10},children:c.jsx("b",{children:i})}),c.jsx("div",{style:{margin:10,paddingLeft:6},children:t.map((A,R)=>c.jsx("div",{children:A},R))})]}),[r,d]=O.useState(!1),E=g({en:"Older Changes",zh:""}),h=c.jsxs("div",{style:{marginTop:10,marginBottom:10},children:[c.jsx(Ms,{content:c.jsxs("span",{children:[c.jsx("span",{children:r?"- ":"+ "}),c.jsx("b",{children:E})]}),onClickFn:()=>d(!r)}),c.jsx("div",{style:{position:"relative",display:r?"block":"none"},children:c.jsxs("div",{style:{margin:10,paddingLeft:6,marginBottom:20},children:[c.jsx("div",{children:a.map((A,R)=>c.jsx("div",{children:A},R))}),c.jsxs("div",{children:["For older changelog entries before the BLM/PCT in the Shell rejoining, see",c.jsx("b",{children:"About this site/Changelog"})," on the old sites:",c.jsx("a",{target:"_blank",rel:"noreferrer",href:"https://miyehn.me/ffxiv-blm-rotation/",children:"BLM in the Shell"}),",",c.jsx("a",{target:"_blank",rel:"noreferrer",href:"https://picto.zqsz.me/",children:"PCT in the Shell"})]})]})})]});return c.jsxs("div",{children:[l,h]})}const yR=vu?"https://beta.xivintheshell.com":"https://xivintheshell.com",oE="https://github.com/xivintheshell/xivintheshell",fT="https://bsky.app/profile/xivintheshell.com",AT="https://blog.xivintheshell.com",jy="https://discord.com/channels/277897135515762698/1307922201726685236",vR="https://discord.gg/thebalanceffxiv",B3=()=>c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"paragraph",children:g({en:c.jsxs(c.Fragment,{children:[c.jsx("span",{children:"This tool was initially Black Mage in the Shell, "}),c.jsxs("span",{children:["ideated by ",c.jsx("b",{children:"Eshiya (Galahad)"})," and developed by ",c.jsx("b",{children:"miyehn"})," specifically for BLM during Endwalker since around February 2022."," "]}),c.jsx("span",{children:"After Dawntrail's release, it was expanded to support other jobs and is now maintained by a small team of developers:"})]}),zh:c.jsxs(c.Fragment,{children:[c.jsx("span",{children:"miyehn202226.x"}),c.jsx("span",{children:"7.0"})]})})}),g({en:c.jsxs("ul",{children:[c.jsxs("li",{children:["Tool design and core systems: ",c.jsx("b",{children:"shanzhe"}),", ",c.jsx("b",{children:"miyehn"}),", ",c.jsx("b",{children:"Turtle"}),","," ",c.jsx("b",{children:"Akairyu"})]}),c.jsxs("li",{children:["BLM: ",c.jsx("b",{children:"shanzhe"}),", ",c.jsx("b",{children:"Akairyu"}),", ",c.jsx("b",{children:"Turtle"}),", ",c.jsx("b",{children:"miyehn"})]}),c.jsxs("li",{children:["PCT, RDM, SMN, DRK, NIN, MNK, WHM, AST, SCH: ",c.jsx("b",{children:"shanzhe"})]}),c.jsxs("li",{children:["SAM: ",c.jsx("b",{children:"Sterling"}),", ",c.jsx("b",{children:"shanzhe"})]}),c.jsxs("li",{children:["DNC, MCH, BRD, SGE: ",c.jsx("b",{children:"Akairyu"})]}),c.jsxs("li",{children:["RPR: ",c.jsx("b",{children:"Honey B. Lovely's Favorite Bee"})]}),c.jsxs("li",{children:["WAR: ",c.jsx("b",{children:"misterperson"})]}),c.jsxs("li",{children:["GNB, DRG, PLD: ",c.jsx("b",{children:"Sterling"})]}),c.jsxs("li",{children:["BLU: ",c.jsx("b",{children:""})]}),c.jsxs("li",{children:["VPR: ",c.jsx("b",{children:"shanzhe"}),", ",c.jsx("b",{children:"misterperson"})]}),c.jsxs("li",{children:["Framework for adding new jobs: ",c.jsx("b",{children:"shanzhe"})]}),c.jsxs("li",{children:["Chinese localization: ",c.jsx("b",{children:"miyehn"}),", ",c.jsx("b",{children:"Eshiya"}),", ",c.jsx("b",{children:"Yuyuka"}),", ",c.jsx("b",{children:"shanzhe"}),","," ",c.jsx("b",{children:""}),", ",c.jsx("b",{children:""}),", ",c.jsx("b",{children:""}),", ",c.jsx("b",{children:""}),", ",c.jsx("b",{children:""}),", ",c.jsx("b",{children:""})]})]}),zh:c.jsxs("ul",{children:[c.jsxs("li",{children:["",c.jsx("b",{children:"shanzhe"}),"",c.jsx("b",{children:"miyehn"}),"",c.jsx("b",{children:"Turtle"}),"",c.jsx("b",{children:"Akairyu"})]}),c.jsxs("li",{children:["",c.jsx("b",{children:"shanzhe"}),"",c.jsx("b",{children:"Akairyu"}),"",c.jsx("b",{children:"Turtle"}),"",c.jsx("b",{children:"miyehn"})]}),c.jsxs("li",{children:["",c.jsx("b",{children:"shanzhe"})]}),c.jsxs("li",{children:["",c.jsx("b",{children:"Sterling"}),"",c.jsx("b",{children:"shanzhe"})]}),c.jsxs("li",{children:["",c.jsx("b",{children:"Akairyu"})]}),c.jsxs("li",{children:["",c.jsx("b",{children:"Honey B. Lovely's Favorite Bee"})]}),c.jsxs("li",{children:["",c.jsx("b",{children:"misterperson"})]}),c.jsxs("li",{children:["",c.jsx("b",{children:"Sterling"})]}),c.jsxs("li",{children:["",c.jsx("b",{children:""})]}),c.jsxs("li",{children:["",c.jsx("b",{children:"shanzhe"}),"",c.jsx("b",{children:"misterperson"})]}),c.jsxs("li",{children:["",c.jsx("b",{children:"shanzhe"})]}),c.jsxs("li",{children:["",c.jsx("b",{children:"miyehn"}),"",c.jsx("b",{children:""}),"",c.jsx("b",{children:""}),"",c.jsx("b",{children:"shanzhe"}),"",c.jsx("b",{children:""}),"",c.jsx("b",{children:""}),"",c.jsx("b",{children:""}),"",c.jsx("b",{children:""}),"",c.jsx("b",{children:""}),"",c.jsx("b",{children:""})]})]})}),c.jsx("div",{className:"paragraph",children:g({en:"And many thanks to Yara, Spider, Santa, players in , kiyozero, czmm, and other players and groups who contributed feature suggestions, timeline markers, bug reports, etc.",zh:"YaraSpiderSantakiyozeroczmmbug"})}),g({en:c.jsxs("div",{className:"paragraph",children:["If you have questions or would like to provide feedback, you can message in"," ",c.jsx("a",{target:"_blank",href:jy,rel:"noreferrer",children:"this channel in The Balance"})," ",'(requires the "Misc. Support" role). In case of sending a bug report, attaching the fight record (download "fight.txt" from the bottom or name it anything else) would be very helpful.']}),zh:c.jsxs("div",{className:"paragraph",children:[c.jsx("span",{children:"bugmiyehnQQ870340705"}),c.jsx("span",{children:"bugbugfight.txt"})]}),ja:c.jsx("div",{className:"paragraph",children:"[outdated (ja)] Discordmiyehnellyn.waterford@gmail.com fight.txt"})})]});function F3(e){const t={marginBottom:5},a=Mt(),i=e.job,l=d=>c.jsx(yi,{text:d}),r=l(navigator.platform.includes("Mac")?"cmd":"ctrl");return c.jsxs("div",{children:[c.jsx(w3,{}),c.jsx(Yr,{defaultShow:!0,title:"instructions",titleNode:c.jsxs("span",{children:[g({en:"Instructions ",zh:" ",ja:" "}),c.jsx(We,{topic:"expandable",content:g({en:"click me to expand or collapse",zh:"/",ja:""})})]}),content:c.jsxs("div",{children:[c.jsx("div",{className:"paragraph",children:c.jsx("b",{children:g({en:"General Usage",zh:"",ja:""})})}),g({en:c.jsxs("ul",{children:[c.jsxs("li",{style:t,children:["Set your stats in ",c.jsx("b",{children:"Config"})," on the right, then"," ",l("apply and reset"),"."]}),c.jsx("li",{style:t,children:"Click on a skill to use it at the selected point in the timeline. The simulation will always jump to when the last animation lock ends and the skill's cooldown becomes available."}),c.jsxs("li",{style:t,children:["Press ",l("u")," to delete the last added action (effective when not running in real-time). Use ",r,"+",l("z"),"and ",r,"+",l("y")," to undo/redo."]}),c.jsx("li",{style:t,children:"Click on a buff applied to self to remove it. Clicking on certain ground-targeted buffs like BLM's Ley Lines, DRK's Salt and Darkness, and SCH's Sacred Soil temporarily disables their effects. Clicking again re-enables them."}),c.jsx("li",{style:t,children:'Click and drag in the visual timeline or use the "Timeline Editor" tab at the bottom of the page to re-arrange skills.'})]}),zh:c.jsxs("ul",{children:[c.jsxs("li",{style:t,children:["",c.jsx("b",{children:""}),""," ",l("")," "]}),c.jsx("li",{style:t,children:"CD"}),c.jsxs("li",{style:t,children:[" ",l("u")," "," ",r,"+",l("z"),"  ",r,"+",l("y")," "]}),c.jsx("li",{style:t,children:"buffbuff"}),c.jsx("li",{style:t,children:""})]}),ja:c.jsxs("ul",{children:[c.jsxs("li",{style:t,children:["",c.jsx("b",{children:""}),"",c.jsx(yi,{text:""}),""]}),c.jsx("li",{style:t,children:""}),c.jsxs("li",{style:t,children:[c.jsx(yi,{text:"u"}),""]}),c.jsx("li",{style:t,children:""})]})}),c.jsx("div",{className:"paragraph",children:c.jsx("b",{children:g({en:"Timeline",zh:"",ja:""})})}),g({en:c.jsxs("ul",{children:[c.jsxs("li",{style:t,children:["Holding ",l("shift")," lets you scroll horizontally."]}),c.jsxs("li",{style:t,children:["Click to select/unselect a single skill on the timeline."," ",l("shift"),"+click or click/drag to select a sequence of skills."]}),c.jsxs("li",{style:t,children:["Use ",l("backspace")," or ",l("delete")," to delete the selected skill(s)."]}),c.jsxs("li",{style:t,children:["Use ",r,"+",l("c")," and ",r,"+",l("v")," to copy/paste skills."]}),c.jsx("li",{style:t,children:"Click on the timeline's ruler-like header to view historical game states. Click on somewhere else on the timeline to return to the most recent game state."})]}),zh:c.jsxs("ul",{children:[c.jsxs("li",{style:t,children:[" ",l("shift")," "]}),c.jsxs("li",{style:t,children:[" shift  ",l("shift")," ",""]}),c.jsxs("li",{style:t,children:[" ",l("backspace"),"  ",l("delete")," "]}),c.jsxs("li",{style:t,children:[" ",r,"+",l("c"),"  ",r,"+",l("v")," ",""]}),c.jsx("li",{style:t,children:""})]}),ja:c.jsxs("ul",{children:[c.jsxs("li",{style:t,children:[c.jsx(yi,{text:"shift"}),""]}),c.jsxs("li",{style:t,children:["",c.jsx(yi,{text:"shift"}),""]}),c.jsxs("li",{style:t,children:[c.jsx(yi,{text:"backspace"}),"",c.jsx(yi,{text:"delete"}),""]}),c.jsxs("li",{style:t,children:["",c.jsx("b",{style:{color:"darkorange"},children:""})," "]})]})}),g({en:c.jsxs("div",{className:"paragraph",children:[c.jsx("span",{style:{color:a.fileDownload,cursor:"pointer"},children:c.jsx("u",{children:"[these]"})})," ","are file download links. Click to download, or right click to choose save location."]}),zh:c.jsxs("div",{className:"paragraph",children:[c.jsx("span",{style:{color:a.fileDownload,cursor:"pointer"},children:c.jsx("u",{children:"[]"})})," ",""]}),ja:c.jsxs("div",{className:"paragraph",children:[c.jsx("span",{style:{color:a.fileDownload,cursor:"pointer"},children:c.jsx("u",{children:"[]"})}),""]})}),g({en:c.jsxs("div",{className:"paragraph",children:["You can save/load fight records at the bottom, under the"," ",c.jsx("b",{children:"Import/Export"})," tab. Most edits are also automatically saved in your browser cache, so it's generally okay to refresh the page and not worry about losing progress."]}),zh:c.jsxs("div",{className:"paragraph",children:[" ",c.jsx("b",{children:"/"})," ","/"]})}),g({en:c.jsxs("div",{className:"paragraph",children:["Hover over ",c.jsx(We,{topic:"sampleTips",content:"sample tip"})," ","everywhere to see more tips."]}),zh:c.jsxs("div",{className:"paragraph",children:[" ",c.jsx(We,{topic:"sampleTips",content:""})," ",""]}),ja:c.jsxs("div",{className:"paragraph",children:[c.jsx(We,{topic:"sampleTips",content:""}),""]})}),c.jsx("div",{className:"paragraph",style:{marginTop:16},children:c.jsx(Yr,{title:"Troubleshoot",titleNode:g({en:c.jsx("b",{children:"troubleshoot"}),zh:c.jsx("b",{children:""}),ja:c.jsx("b",{children:""})}),content:c.jsxs(c.Fragment,{children:[g({en:c.jsxs("div",{children:[c.jsx("div",{className:"paragraph",children:"I can't guarantee that my updates are always backward compatible. If your fight record files aren't loading properly but you don't understand why, contact me and I'll try my best to help."}),c.jsxs("div",{className:"paragraph",children:["If the browser cache is somehow messed up (likely due to invalid game states), this is how to reset it:",c.jsx("br",{}),"Enter this tool from"," ",c.jsx("b",{children:yR+"?{command}"})," replacing"," ",c.jsx("b",{children:"{command}"})," with one of the following:",c.jsxs("ul",{children:[c.jsxs("li",{style:t,children:[c.jsx("b",{children:"resetResourceOverrides"}),": delete all resource overrides and all actions on the current timeline."]}),c.jsxs("li",{style:t,children:[c.jsx("b",{children:"resetAll"}),": delete all browser-cached settings."]})]})]})]}),zh:c.jsxs("div",{children:[c.jsx("div",{className:"paragraph",children:""}),c.jsxs("div",{className:"paragraph",children:["",c.jsx("br",{}),"",c.jsx("b",{children:yR+"?{command}"}),"",c.jsx("b",{children:"{command}"}),"",c.jsxs("ul",{children:[c.jsxs("li",{style:t,children:[c.jsx("b",{children:"resetResourceOverrides"}),": "]}),c.jsxs("li",{style:t,children:[c.jsx("b",{children:"resetAll"}),": "]})]})]})]}),ja:c.jsxs("div",{children:[c.jsx("div",{className:"paragraph",children:""}),c.jsxs("div",{className:"paragraph",children:["",c.jsx("br",{}),c.jsx("b",{children:yR+"?{command}"})," ",c.jsx("b",{children:"{command}"})," ","",c.jsxs("ul",{children:[c.jsxs("li",{style:t,children:[c.jsx("b",{children:"resetResourceOverrides"}),": "]}),c.jsxs("li",{style:t,children:[c.jsx("b",{children:"resetAll"}),": "]})]})]})]})}),c.jsxs("div",{children:[g({en:"Or just: ",zh:""}),c.jsx("button",{className:"dangerButton",onClick:()=>{qC(),window.location.reload()},children:g({en:"[DANGER!] clear browser cache and reload",zh:"[] ",ja:"[] "})})]})]})})})]})}),c.jsx(Yr,{defaultShow:!1,title:"About this tool",titleNode:g({en:"About this tool",zh:"",ja:""}),content:c.jsxs("div",{children:[c.jsx("div",{className:"paragraph",children:g({en:"This is a FFXIV simulator & rotation planner.",zh:"FF14/",ja:"FF14"})}),B3(),c.jsx("div",{className:"paragraph",children:g({en:"Some links:",zh:"",ja:""})}),g({en:c.jsxs("ul",{children:[c.jsx("li",{children:c.jsx("a",{href:oE,children:"Github repository"})}),c.jsxs("li",{children:[c.jsx("a",{href:fT,children:"Bluesky account"})," and our"," ",c.jsx("a",{href:AT,children:"developer blog"})]}),c.jsxs("li",{children:[c.jsx("a",{href:"https://xivintheshell.github.io/legacy/",children:"XIV in the Shell (Legacy)"}),": a snapshot of this tool at the end of the previous major game patch (currently 7.25)."]}),c.jsxs("li",{children:[c.jsx("a",{href:"https://miyehn.me/ffxiv-blm-rotation-endwalker/",children:"Black Mage in the Shell (Endwalker)"}),": a snapshot of this tool at the end of Endwalker. It also contains some notable fight plans from Endwalker, as memoir."]}),c.jsxs("li",{children:[c.jsx("a",{href:"https://spide-r.github.io/ffxiv-blm-rotation/",children:"Black Mage in the Bozjan Shell"}),": a variation for Save the Queens areas, created by"," ",c.jsx("b",{children:"A'zhek Silvaire @ Zalera"})]}),c.jsx("li",{children:c.jsx("a",{href:"https://na.finalfantasyxiv.com/jobguide/battle/",children:"Official FFXIV job guides"})}),c.jsxs("li",{children:["The Balance's community"," ",c.jsx("a",{href:"https://www.thebalanceffxiv.com/",children:"job guides"})," and"," ",c.jsx("a",{href:vR,children:"Discord"})]})]}),zh:c.jsxs("ul",{children:[c.jsx("li",{children:c.jsx("a",{href:oE,children:"Github"})}),c.jsxs("li",{children:[c.jsx("a",{href:fT,children:""}),"",c.jsx("a",{href:AT,children:""}),""]}),c.jsxs("li",{children:[c.jsx("a",{href:"https://xivintheshell.github.io/legacy/",children:""}),"FF147.25"]}),c.jsxs("li",{children:[c.jsx("a",{href:"https://miyehn.me/ffxiv-blm-rotation-endwalker/",children:"6.x"}),"6.x"]}),c.jsxs("li",{children:[c.jsx("a",{href:"https://spide-r.github.io/ffxiv-blm-rotation/",children:"Black Mage in the Bozjan Shell"}),": /"," ",c.jsx("b",{children:"A'zhek Silvaire @ Zalera"})]}),c.jsx("li",{children:c.jsx("a",{href:"https://na.finalfantasyxiv.com/jobguide/battle/",children:""})}),c.jsxs("li",{children:["The Balance",c.jsxs("a",{href:"https://www.thebalanceffxiv.com/",children:[" ",""]})," ",c.jsx("a",{href:vR,children:"Discord"})]})]}),ja:c.jsx("ul",{children:c.jsxs(c.Fragment,{children:[c.jsx("li",{children:c.jsx("a",{href:oE,children:"Github repository"})}),c.jsxs("li",{children:[c.jsx("a",{href:"https://spide-r.github.io/ffxiv-blm-rotation/",children:"Black Mage in the Bozjan Shell"}),": ",c.jsx("b",{children:"A'zhek Silvaire @ Zalera"})]}),c.jsx("li",{children:c.jsx("a",{href:"https://na.finalfantasyxiv.com/jobguide/blackmage/",children:"Official FFXIV black mage job guide"})}),c.jsxs("li",{children:[c.jsxs("a",{target:"_blank",href:vR,rel:"noreferrer",children:[i," resources channel on The Balance"]})," ","Discord"," "]})]})})})]})})]})}function z3(){const e=O.useContext(Nn),t=xo(e,"text");return c.jsxs("div",{style:{display:"inline-block",fontSize:16},children:[c.jsx("style",{children:`
		.linkOption {
			display: inline-block;
			cursor: pointer;
			vertical-align: top;
			margin-top: 1px;
		}
		.linkOption:hover {
			border-bottom: 1px solid;
		}
		`}),c.jsxs("div",{style:{display:"inline-block"},children:[c.jsx(Br.Provider,{value:{color:t,className:"linkOption"},children:c.jsx("a",{href:fT,title:g({en:"Bluesky",zh:""}),children:c.jsx(OL,{})})}),"|",c.jsx(Br.Provider,{value:{color:t,className:"linkOption"},children:c.jsx("a",{href:oE,title:g({en:"GitHub",zh:"GitHub"}),children:c.jsx(bL,{})})}),"|",c.jsx(Br.Provider,{value:{color:t,className:"linkOption"},children:c.jsx("a",{href:AT,title:g({en:"Blog",zh:""}),children:c.jsx(DL,{})})})]})]})}var j3={};let GE=e=>{},BE=e=>{},FE=e=>{};function Y3(e){if(e==="resetAll")qC();else if(e==="resetResourceOverrides"){const t=bt("gameRecord");for(let a=0;a<Mi;a++){let i=bt("gameRecord"+a.toString());if(a===0&&i===null&&t!==null&&(i=t),i!==null){const l=JSON.parse(i);console.log(l),l.config&&(l.config.initialResourceOverrides=[]),l.actions=[],It("gameRecord"+a.toString(),JSON.stringify(l))}}}else e==="code"?console.log("FFLogs authorization triggered."):e!==void 0&&console.log("unrecognized command '"+e+"'")}function K3(e){return c.jsx("div",{style:{flex:3,height:e.height,marginLeft:6,position:"relative",verticalAlign:"top"},children:c.jsx(YO,{uniqueName:"mainConfig",content:[{titleNode:g({en:"Config",zh:""}),contentNode:c.jsx(tF,{})},{titleNode:g({en:"Control",zh:""}),contentNode:c.jsx(Q2,{})}],collapsible:!1,scrollable:!0,height:e.height,defaultSelectedIndex:0})})}function BC(e){const t=e.color??Mt().accent;return c.jsx("div",{style:{display:e.hidden===!0?"none":"block",color:t,border:"1px solid "+t,borderRadius:4,padding:"10px 10px 0 10px"},children:e.children})}const FC=vu?"[BETA] ":"";class V3 extends ra.Component{constructor(a){super(a);Z(this,"controlRegionRef");Z(this,"gameplayKeyCapture");Z(this,"setColorTheme");Z(this,"state");Y3(a.command),this.state={job:N.getActiveJob(),hasFocus:!1,historical:!1,realTime:!1,controlRegionHeight:0,colorTheme:r0()},this.controlRegionRef=ra.createRef(),this.gameplayKeyCapture=i=>{N.handleKeyboardEvent(i)},GE=i=>{this.setState({job:i});const l=document.querySelector("link[rel~='icon']");l&&(vu?l.href="/favicons/beta.ico":i in Et?l.href="/favicons/"+i.toString().toLocaleLowerCase()+".ico":l.href=j3.PUBLIC_URL+"/favicon.ico");const r=document.getElementById("pageTitle");r&&(r.text=`${FC}XIV in the Shell (${i})`)},BE=i=>{this.setState({realTime:i})},FE=i=>{this.setState({historical:i})},this.setColorTheme=i=>{i!==this.state.colorTheme&&(N.updateAllDisplay(),this.setState({colorTheme:i}),It("colorTheme",i))}}componentDidMount(){N.tryAutoLoad(),N.updateAllDisplay(),this.controlRegionRef.current&&new ResizeObserver(()=>{var i;const a=((i=this.controlRegionRef.current)==null?void 0:i.clientHeight)??0;this.setState({controlRegionHeight:a})}).observe(this.controlRegionRef.current)}componentWillUnmount(){GE=a=>{},BE=a=>{},FE=a=>{}}render(){const a=Ui(this.state.colorTheme),i={height:"100%",accentColor:a.accent,fontFamily:"monospace",fontSize:13,color:a.text,backgroundColor:a.background,display:"flex",flexDirection:"column"};let l;this.state.historical?l="2px solid "+a.historical:this.state.hasFocus?this.state.realTime?l="2px solid "+a.realTime:l="2px solid "+a.accent:l="1px solid "+a.bgMediumContrast;const r={marginBottom:"5px"},d=c.jsx("div",{style:{flex:7,display:"inline-block",position:"relative"},children:c.jsxs("div",{onFocus:()=>{this.setState({hasFocus:!0})},onBlur:()=>{this.setState({hasFocus:!1})},style:{display:"inline-block",padding:8,outline:l},tabIndex:-1,ref:this.controlRegionRef,children:[c.jsx(lb,{}),c.jsx(SO,{})]})}),E=window.innerWidth>1024;return c.jsxs("div",{style:{position:"fixed",top:0,bottom:0,left:0,right:0,outline:"none"},tabIndex:-1,onKeyDown:this.gameplayKeyCapture,children:[c.jsx("style",{children:`
				@supports selector(::-webkit-scrollbar) {
					.visibleScrollbar::-webkit-scrollbar {
						appearance: none;
						background-color: ${a.bgLowContrast};
						height: 8px;
						width: 5px;
					}
					.visibleScrollbar::-webkit-scrollbar-thumb {
						background-color: ${a.bgHighContrast};
					}
					.invisibleScrollbar::-webkit-scrollbar {
						appearance: none;
						background-color: clear;
						height: 8px;
						width: 5px;
					}
					.invisibleScrollbar::-webkit-scrollbar-thumb {
						background-color: ${a.bgHighContrast};
					}
				}
				@supports not selector(::-webkit-scrollbar) {
					.visibleScrollbar {
						scrollbar-color: ${a.bgHighContrast} ${a.bgLowContrast};
						scrollbar-width: thin;
					}
					.invisibleScrollbar {
						scrollbar-width: none;
					}
				}
				a {
					color: ${a.accent};
				}
				b, h1, h2, h3, h4 {
					color: ${a.emphasis};
				}
				p {
					margin-block-start: 10px;
					margin-block-end: 10px;
				}
				p:first-child {
					margin-block-start: 0px;
				}
				::selection {
					background: rgba(147, 112, 219, 0.4);
				}
				option, select {
					color: ${a.text};
					background-color: ${a.background};
				}
				button, input[type="submit"], ::-webkit-file-upload-button {
					color: ${a.text};
					background-color: ${a.bgLowContrast};
					border: 1px solid ${a.bgHighContrast};
				}
				input[type="radio"] {
					appearance: none;
					width: 1em;
					height: 1em;
					border: 1px solid ${a.bgHighContrast};
					border-radius: 50%;
					background-clip: content-box;
					padding: 2px;
				}
				input[type="radio"]:checked {
					background-color: ${a.accent};
				}
				input[type="checkbox"] {
					appearance: none;
					width: 1em;
					height: 1em;
					border: 1px solid ${a.bgHighContrast};
					border-radius: 1px;
					background-clip: content-box;
					padding: 2px;
				}
				input[type="checkbox"]:checked:after {
					content: '\\2714';
					color: ${a.accent};
					position: absolute;
					font-size: 22px;
					top: -6px;
					left: -2px;
				}
				input[type="range"] {
					appearance: none;
					background-color: transparent;
					border: 1px solid ${a.bgHighContrast};
					vertical-align: middle;
					height: 0.9em;
					border-radius: 0.45em;
					overflow: hidden;
					padding: 0.05em;
				}
				input[type="range"]::-webkit-slider-thumb {
					appearance: none;
					background-color: ${a.accent};
					width: 0.8em;
					height: 0.8em;
					border-radius: 0.4em;
				}
				.help-tooltip {
					color: ${a.text};
					background-color: ${a.tipBackground};
					opacity: 0.98;
					max-width: 300px;
					outline: 1px solid ${a.bgHighContrast};
					transition: none;
					font-size: 100%;
					z-index: 10;
				}
				button:disabled {
					background-color: ${a.background};
				}
			`}),c.jsx(Nn.Provider,{value:this.state.colorTheme,children:c.jsxs("div",{style:i,id:"globalHelpTooltipAnchor",children:[c.jsx("div",{style:{flex:1,overflowY:"scroll",overscrollBehaviorY:"contain"},children:c.jsxs("div",{style:{position:"relative",maxWidth:1060,margin:"0 auto",marginTop:40,display:"grid"},children:[c.jsxs("div",{style:{position:"absolute",display:"flex",flexWrap:"wrap",justifySelf:"right",justifyContent:"space-between",alignItems:"flex-start",gap:"1.4em"},children:[E&&c.jsx(z3,{}),c.jsx(BU,{}),c.jsx(xU,{setColorTheme:this.setColorTheme})]}),c.jsxs("div",{children:[c.jsxs("h3",{style:{marginTop:0,marginBottom:6},children:[FC,"XIV in the Shell"]}),g({en:c.jsxs("div",{style:{marginBottom:16},children:["Last updated: ",DR()," (see ",c.jsx("b",{children:"Changelog"}),")"]}),zh:c.jsxs("div",{style:{marginBottom:16},children:["",DR(),"",c.jsx("b",{children:""}),""]}),ja:c.jsxs("div",{style:{marginBottom:16},children:["",kU(DR()),"",c.jsx("b",{children:""}),"",c.jsx("a",{href:"https://coda.io/d/_d-N3WFoMZ8e/Black-Mage-in-the-Shell_suRLF",children:""}),""]})}),UL()?c.jsx("div",{style:{margin:"10px 0",padding:"10px",border:"1px solid "+a.warning,color:a.warning,borderRadius:4},children:g({en:c.jsxs("div",{children:["NOTE: Your browser cache contains data from BLM in the Shell before it's updated for Dawntrail. Visit the Endwalker archive at"," ",c.jsx("a",{style:{color:a.warning},href:"https://miyehn.me/ffxiv-blm-rotation-endwalker",children:"miyehn.me/ffxiv-blm-rotation-endwalker"})," ","to access and automatically re-save it. Once you do that, this notice will also go away."]}),zh:c.jsxs("div",{children:["7.06.0",c.jsx("a",{style:{color:a.warning},href:"https://miyehn.me/ffxiv-blm-rotation-endwalker",children:"miyehn.me/ffxiv-blm-rotation-endwalker"}),""]})})}):void 0,vu&&c.jsx(BC,{color:a.warning,children:g({en:c.jsxs("div",{style:{marginBottom:"10px"},children:[c.jsx("span",{children:c.jsx("b",{style:{color:a.warning},children:"You're currently using the BETA version of XIV in the Shell."})}),c.jsxs("ul",{children:[c.jsx("li",{style:r,children:"Things may break in unexpected ways at any time. Use at your own peril, and make sure to export in-progress files frequently."}),c.jsx("li",{style:r,children:"Application data is not shared with the main site. Anything you do here stays here. Files created on the BETA site may not work on the main site, but files made on the main site should be importable here (if they are not, please report this as a bug)."}),c.jsx("li",{style:r,children:"If the page becomes un-loadable, please contact us and tell us what your last actions on the site were, and we can help you debug what went wrong. You can also try resetting your browser's localStorage data for beta.xivintheshell.com."}),c.jsxs("li",{style:r,children:["To report an issue, you can contact us on Discord in The Balance (",c.jsx("a",{href:jy,children:"#xiv_in_the_shell_support"}),"), or file an issue on"," ",c.jsx("a",{href:"https://github.com/xivintheshell/xivintheshell/issues",children:"our GitHub"}),"."]})]})]}),zh:c.jsxs("div",{style:{marginBottom:"10px"},children:[c.jsx("span",{children:c.jsx("b",{style:{color:a.warning},children:"XIV in the ShellBETA"})}),c.jsxs("ul",{children:[c.jsx("li",{style:r,children:""}),c.jsx("li",{style:r,children:"BETABETAbug"}),c.jsx("li",{style:r,children:"beta.xivintheshell.comlocalStorage"}),c.jsxs("li",{style:r,children:["miyehnQQ870340705",c.jsx("a",{href:"https://github.com/xivintheshell/xivintheshell/issues",children:"GitHub"}),"issue"]})]})]})})}),vu&&c.jsx("div",{style:{margin:"10px"}}),c.jsx(F3,{job:this.state.job}),c.jsx(Yr,{defaultShow:!0,title:"7-2-user-survey",titleNode:c.jsx("span",{children:g({en:"7.2 User Survey",zh:"7.2"})}),content:c.jsx(BC,{children:g({en:c.jsx(c.Fragment,{children:c.jsxs("p",{children:["Help us improve XIV in the Shell! Please take our user survey:"," ",c.jsx("b",{children:c.jsx("a",{target:"_blank",rel:"noreferrer",href:"https://forms.gle/eKVygxxZVd894323A",children:"https://forms.gle/eKVygxxZVd894323A"})})]})}),zh:c.jsx(c.Fragment,{children:c.jsxs("p",{children:[""," ",c.jsx("b",{children:c.jsx("a",{target:"_blank",rel:"noreferrer",href:"https://www.wjx.cn/vm/mQ1gV2b.aspx",children:"https://www.wjx.cn/vm/mQ1gV2b.aspx"})})]})})})})})]}),c.jsxs("div",{style:{display:"flex",flexDirection:"row",position:"relative",marginBottom:"20px"},children:[d,c.jsx(K3,{height:this.state.controlRegionHeight})]}),c.jsx(zP,{}),c.jsx("hr",{style:{margin:"30px 0px",border:"none",borderTop:"1px solid "+a.bgHighContrast}}),c.jsx(cy,{})]})}),c.jsx(k3,{})]})})]})}}const W3=TL.createRoot(document.getElementById("root")),X3=new URLSearchParams(document.location.search),zC=Array.from(X3.keys());W3.render(c.jsx(V3,{command:zC.length>0?zC[0]:void 0}));
