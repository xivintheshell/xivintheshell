function DM(e,t){for(var a=0;a<t.length;a++){const o=t[a];if(typeof o!="string"&&!Array.isArray(o)){for(const s in o)if(s!=="default"&&!(s in e)){const c=Object.getOwnPropertyDescriptor(o,s);c&&Object.defineProperty(e,s,c.get?c:{enumerable:!0,get:()=>o[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function a(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerPolicy&&(c.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?c.credentials="include":s.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(s){if(s.ep)return;s.ep=!0;const c=a(s);fetch(s.href,c)}})();function jN(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function yM(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var a=function o(){var s=!1;try{s=this instanceof o}catch{}return s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};a.prototype=t.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(e).forEach(function(o){var s=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(a,o,s.get?s:{enumerable:!0,get:function(){return e[o]}})}),a}var EA={exports:{}},tu={};var V_;function vM(){if(V_)return tu;V_=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function a(o,s,c){var d=null;if(c!==void 0&&(d=""+c),s.key!==void 0&&(d=""+s.key),"key"in s){c={};for(var f in s)f!=="key"&&(c[f]=s[f])}else c=s;return s=c.ref,{$$typeof:e,type:o,key:d,ref:s!==void 0?s:null,props:c}}return tu.Fragment=t,tu.jsx=a,tu.jsxs=a,tu}var W_;function MM(){return W_||(W_=1,EA.exports=vM()),EA.exports}var l=MM(),mA={exports:{}},nu={},AA={exports:{}},RA={};var X_;function LM(){return X_||(X_=1,function(e){function t(w,z){var se=w.length;w.push(z);e:for(;0<se;){var Ee=se-1>>>1,M=w[Ee];if(0<s(M,z))w[Ee]=z,w[se]=M,se=Ee;else break e}}function a(w){return w.length===0?null:w[0]}function o(w){if(w.length===0)return null;var z=w[0],se=w.pop();if(se!==z){w[0]=se;e:for(var Ee=0,M=w.length,ee=M>>>1;Ee<ee;){var de=2*(Ee+1)-1,W=w[de],Y=de+1,Q=w[Y];if(0>s(W,se))Y<M&&0>s(Q,W)?(w[Ee]=Q,w[Y]=se,Ee=Y):(w[Ee]=W,w[de]=se,Ee=de);else if(Y<M&&0>s(Q,se))w[Ee]=Q,w[Y]=se,Ee=Y;else break e}}return z}function s(w,z){var se=w.sortIndex-z.sortIndex;return se!==0?se:w.id-z.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;e.unstable_now=function(){return c.now()}}else{var d=Date,f=d.now();e.unstable_now=function(){return d.now()-f}}var h=[],m=[],R=1,T=null,S=3,g=!1,_=!1,p=!1,O=!1,y=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;function D(w){for(var z=a(m);z!==null;){if(z.callback===null)o(m);else if(z.startTime<=w)o(m),z.sortIndex=z.expirationTime,t(h,z);else break;z=a(m)}}function k(w){if(p=!1,D(w),!_)if(a(h)!==null)_=!0,G||(G=!0,j());else{var z=a(m);z!==null&&ce(k,z.startTime-w)}}var G=!1,B=-1,K=5,V=-1;function ae(){return O?!0:!(e.unstable_now()-V<K)}function oe(){if(O=!1,G){var w=e.unstable_now();V=w;var z=!0;try{e:{_=!1,p&&(p=!1,L(B),B=-1),g=!0;var se=S;try{t:{for(D(w),T=a(h);T!==null&&!(T.expirationTime>w&&ae());){var Ee=T.callback;if(typeof Ee=="function"){T.callback=null,S=T.priorityLevel;var M=Ee(T.expirationTime<=w);if(w=e.unstable_now(),typeof M=="function"){T.callback=M,D(w),z=!0;break t}T===a(h)&&o(h),D(w)}else o(h);T=a(h)}if(T!==null)z=!0;else{var ee=a(m);ee!==null&&ce(k,ee.startTime-w),z=!1}}break e}finally{T=null,S=se,g=!1}z=void 0}}finally{z?j():G=!1}}}var j;if(typeof P=="function")j=function(){P(oe)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,X=$.port2;$.port1.onmessage=oe,j=function(){X.postMessage(null)}}else j=function(){y(oe,0)};function ce(w,z){B=y(function(){w(e.unstable_now())},z)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(w){w.callback=null},e.unstable_forceFrameRate=function(w){0>w||125<w?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):K=0<w?Math.floor(1e3/w):5},e.unstable_getCurrentPriorityLevel=function(){return S},e.unstable_next=function(w){switch(S){case 1:case 2:case 3:var z=3;break;default:z=S}var se=S;S=z;try{return w()}finally{S=se}},e.unstable_requestPaint=function(){O=!0},e.unstable_runWithPriority=function(w,z){switch(w){case 1:case 2:case 3:case 4:case 5:break;default:w=3}var se=S;S=w;try{return z()}finally{S=se}},e.unstable_scheduleCallback=function(w,z,se){var Ee=e.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?Ee+se:Ee):se=Ee,w){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=se+M,w={id:R++,callback:z,priorityLevel:w,startTime:se,expirationTime:M,sortIndex:-1},se>Ee?(w.sortIndex=se,t(m,w),a(h)===null&&w===a(m)&&(p?(L(B),B=-1):p=!0,ce(k,se-Ee))):(w.sortIndex=M,t(h,w),_||g||(_=!0,G||(G=!0,j()))),w},e.unstable_shouldYield=ae,e.unstable_wrapCallback=function(w){var z=S;return function(){var se=S;S=z;try{return w.apply(this,arguments)}finally{S=se}}}}(RA)),RA}var q_;function xM(){return q_||(q_=1,AA.exports=LM()),AA.exports}var TA={exports:{}},We={};var Z_;function HM(){if(Z_)return We;Z_=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),T=Symbol.iterator;function S(M){return M===null||typeof M!="object"?null:(M=T&&M[T]||M["@@iterator"],typeof M=="function"?M:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,p={};function O(M,ee,de){this.props=M,this.context=ee,this.refs=p,this.updater=de||g}O.prototype.isReactComponent={},O.prototype.setState=function(M,ee){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,ee,"setState")},O.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function y(){}y.prototype=O.prototype;function L(M,ee,de){this.props=M,this.context=ee,this.refs=p,this.updater=de||g}var P=L.prototype=new y;P.constructor=L,_(P,O.prototype),P.isPureReactComponent=!0;var D=Array.isArray,k={H:null,A:null,T:null,S:null,V:null},G=Object.prototype.hasOwnProperty;function B(M,ee,de,W,Y,Q){return de=Q.ref,{$$typeof:e,type:M,key:ee,ref:de!==void 0?de:null,props:Q}}function K(M,ee){return B(M.type,ee,void 0,void 0,void 0,M.props)}function V(M){return typeof M=="object"&&M!==null&&M.$$typeof===e}function ae(M){var ee={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(de){return ee[de]})}var oe=/\/+/g;function j(M,ee){return typeof M=="object"&&M!==null&&M.key!=null?ae(""+M.key):ee.toString(36)}function $(){}function X(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then($,$):(M.status="pending",M.then(function(ee){M.status==="pending"&&(M.status="fulfilled",M.value=ee)},function(ee){M.status==="pending"&&(M.status="rejected",M.reason=ee)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function ce(M,ee,de,W,Y){var Q=typeof M;(Q==="undefined"||Q==="boolean")&&(M=null);var x=!1;if(M===null)x=!0;else switch(Q){case"bigint":case"string":case"number":x=!0;break;case"object":switch(M.$$typeof){case e:case t:x=!0;break;case R:return x=M._init,ce(x(M._payload),ee,de,W,Y)}}if(x)return Y=Y(M),x=W===""?"."+j(M,0):W,D(Y)?(de="",x!=null&&(de=x.replace(oe,"$&/")+"/"),ce(Y,ee,de,"",function(fe){return fe})):Y!=null&&(V(Y)&&(Y=K(Y,de+(Y.key==null||M&&M.key===Y.key?"":(""+Y.key).replace(oe,"$&/")+"/")+x)),ee.push(Y)),1;x=0;var Z=W===""?".":W+":";if(D(M))for(var ne=0;ne<M.length;ne++)W=M[ne],Q=Z+j(W,ne),x+=ce(W,ee,de,Q,Y);else if(ne=S(M),typeof ne=="function")for(M=ne.call(M),ne=0;!(W=M.next()).done;)W=W.value,Q=Z+j(W,ne++),x+=ce(W,ee,de,Q,Y);else if(Q==="object"){if(typeof M.then=="function")return ce(X(M),ee,de,W,Y);throw ee=String(M),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return x}function w(M,ee,de){if(M==null)return M;var W=[],Y=0;return ce(M,W,"","",function(Q){return ee.call(de,Q,Y++)}),W}function z(M){if(M._status===-1){var ee=M._result;ee=ee(),ee.then(function(de){(M._status===0||M._status===-1)&&(M._status=1,M._result=de)},function(de){(M._status===0||M._status===-1)&&(M._status=2,M._result=de)}),M._status===-1&&(M._status=0,M._result=ee)}if(M._status===1)return M._result.default;throw M._result}var se=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)};function Ee(){}return We.Children={map:w,forEach:function(M,ee,de){w(M,function(){ee.apply(this,arguments)},de)},count:function(M){var ee=0;return w(M,function(){ee++}),ee},toArray:function(M){return w(M,function(ee){return ee})||[]},only:function(M){if(!V(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},We.Component=O,We.Fragment=a,We.Profiler=s,We.PureComponent=L,We.StrictMode=o,We.Suspense=h,We.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,We.__COMPILER_RUNTIME={__proto__:null,c:function(M){return k.H.useMemoCache(M)}},We.cache=function(M){return function(){return M.apply(null,arguments)}},We.cloneElement=function(M,ee,de){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var W=_({},M.props),Y=M.key,Q=void 0;if(ee!=null)for(x in ee.ref!==void 0&&(Q=void 0),ee.key!==void 0&&(Y=""+ee.key),ee)!G.call(ee,x)||x==="key"||x==="__self"||x==="__source"||x==="ref"&&ee.ref===void 0||(W[x]=ee[x]);var x=arguments.length-2;if(x===1)W.children=de;else if(1<x){for(var Z=Array(x),ne=0;ne<x;ne++)Z[ne]=arguments[ne+2];W.children=Z}return B(M.type,Y,void 0,void 0,Q,W)},We.createContext=function(M){return M={$$typeof:d,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:c,_context:M},M},We.createElement=function(M,ee,de){var W,Y={},Q=null;if(ee!=null)for(W in ee.key!==void 0&&(Q=""+ee.key),ee)G.call(ee,W)&&W!=="key"&&W!=="__self"&&W!=="__source"&&(Y[W]=ee[W]);var x=arguments.length-2;if(x===1)Y.children=de;else if(1<x){for(var Z=Array(x),ne=0;ne<x;ne++)Z[ne]=arguments[ne+2];Y.children=Z}if(M&&M.defaultProps)for(W in x=M.defaultProps,x)Y[W]===void 0&&(Y[W]=x[W]);return B(M,Q,void 0,void 0,null,Y)},We.createRef=function(){return{current:null}},We.forwardRef=function(M){return{$$typeof:f,render:M}},We.isValidElement=V,We.lazy=function(M){return{$$typeof:R,_payload:{_status:-1,_result:M},_init:z}},We.memo=function(M,ee){return{$$typeof:m,type:M,compare:ee===void 0?null:ee}},We.startTransition=function(M){var ee=k.T,de={};k.T=de;try{var W=M(),Y=k.S;Y!==null&&Y(de,W),typeof W=="object"&&W!==null&&typeof W.then=="function"&&W.then(Ee,se)}catch(Q){se(Q)}finally{k.T=ee}},We.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},We.use=function(M){return k.H.use(M)},We.useActionState=function(M,ee,de){return k.H.useActionState(M,ee,de)},We.useCallback=function(M,ee){return k.H.useCallback(M,ee)},We.useContext=function(M){return k.H.useContext(M)},We.useDebugValue=function(){},We.useDeferredValue=function(M,ee){return k.H.useDeferredValue(M,ee)},We.useEffect=function(M,ee,de){var W=k.H;if(typeof de=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return W.useEffect(M,ee)},We.useId=function(){return k.H.useId()},We.useImperativeHandle=function(M,ee,de){return k.H.useImperativeHandle(M,ee,de)},We.useInsertionEffect=function(M,ee){return k.H.useInsertionEffect(M,ee)},We.useLayoutEffect=function(M,ee){return k.H.useLayoutEffect(M,ee)},We.useMemo=function(M,ee){return k.H.useMemo(M,ee)},We.useOptimistic=function(M,ee){return k.H.useOptimistic(M,ee)},We.useReducer=function(M,ee,de){return k.H.useReducer(M,ee,de)},We.useRef=function(M){return k.H.useRef(M)},We.useState=function(M){return k.H.useState(M)},We.useSyncExternalStore=function(M,ee,de){return k.H.useSyncExternalStore(M,ee,de)},We.useTransition=function(){return k.H.useTransition()},We.version="19.1.0",We}var Q_;function LR(){return Q_||(Q_=1,TA.exports=HM()),TA.exports}var SA={exports:{}},ia={};var $_;function kM(){if($_)return ia;$_=1;var e=LR();function t(h){var m="https://react.dev/errors/"+h;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var R=2;R<arguments.length;R++)m+="&args[]="+encodeURIComponent(arguments[R])}return"Minified React error #"+h+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var o={d:{f:a,r:function(){throw Error(t(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},s=Symbol.for("react.portal");function c(h,m,R){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:T==null?null:""+T,children:h,containerInfo:m,implementation:R}}var d=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(h,m){if(h==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return ia.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,ia.createPortal=function(h,m){var R=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(t(299));return c(h,m,null,R)},ia.flushSync=function(h){var m=d.T,R=o.p;try{if(d.T=null,o.p=2,h)return h()}finally{d.T=m,o.p=R,o.d.f()}},ia.preconnect=function(h,m){typeof h=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,o.d.C(h,m))},ia.prefetchDNS=function(h){typeof h=="string"&&o.d.D(h)},ia.preinit=function(h,m){if(typeof h=="string"&&m&&typeof m.as=="string"){var R=m.as,T=f(R,m.crossOrigin),S=typeof m.integrity=="string"?m.integrity:void 0,g=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;R==="style"?o.d.S(h,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:T,integrity:S,fetchPriority:g}):R==="script"&&o.d.X(h,{crossOrigin:T,integrity:S,fetchPriority:g,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},ia.preinitModule=function(h,m){if(typeof h=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var R=f(m.as,m.crossOrigin);o.d.M(h,{crossOrigin:R,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&o.d.M(h)},ia.preload=function(h,m){if(typeof h=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var R=m.as,T=f(R,m.crossOrigin);o.d.L(h,R,{crossOrigin:T,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},ia.preloadModule=function(h,m){if(typeof h=="string")if(m){var R=f(m.as,m.crossOrigin);o.d.m(h,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:R,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else o.d.m(h)},ia.requestFormReset=function(h){o.d.r(h)},ia.unstable_batchedUpdates=function(h,m){return h(m)},ia.useFormState=function(h,m,R){return d.H.useFormState(h,m,R)},ia.useFormStatus=function(){return d.H.useHostTransitionStatus()},ia.version="19.1.0",ia}var J_;function zN(){if(J_)return SA.exports;J_=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),SA.exports=kM(),SA.exports}var ep;function UM(){if(ep)return nu;ep=1;var e=xM(),t=LR(),a=zN();function o(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)i+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function c(n){var i=n,r=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(r=i.return),n=i.return;while(n)}return i.tag===3?r:null}function d(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function f(n){if(c(n)!==n)throw Error(o(188))}function h(n){var i=n.alternate;if(!i){if(i=c(n),i===null)throw Error(o(188));return i!==n?null:n}for(var r=n,u=i;;){var E=r.return;if(E===null)break;var A=E.alternate;if(A===null){if(u=E.return,u!==null){r=u;continue}break}if(E.child===A.child){for(A=E.child;A;){if(A===r)return f(E),n;if(A===u)return f(E),i;A=A.sibling}throw Error(o(188))}if(r.return!==u.return)r=E,u=A;else{for(var b=!1,v=E.child;v;){if(v===r){b=!0,r=E,u=A;break}if(v===u){b=!0,u=E,r=A;break}v=v.sibling}if(!b){for(v=A.child;v;){if(v===r){b=!0,r=A,u=E;break}if(v===u){b=!0,u=A,r=E;break}v=v.sibling}if(!b)throw Error(o(189))}}if(r.alternate!==u)throw Error(o(190))}if(r.tag!==3)throw Error(o(188));return r.stateNode.current===r?n:i}function m(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=m(n),i!==null)return i;n=n.sibling}return null}var R=Object.assign,T=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),L=Symbol.for("react.consumer"),P=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),K=Symbol.for("react.lazy"),V=Symbol.for("react.activity"),ae=Symbol.for("react.memo_cache_sentinel"),oe=Symbol.iterator;function j(n){return n===null||typeof n!="object"?null:(n=oe&&n[oe]||n["@@iterator"],typeof n=="function"?n:null)}var $=Symbol.for("react.client.reference");function X(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===$?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case _:return"Fragment";case O:return"Profiler";case p:return"StrictMode";case k:return"Suspense";case G:return"SuspenseList";case V:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case g:return"Portal";case P:return(n.displayName||"Context")+".Provider";case L:return(n._context.displayName||"Context")+".Consumer";case D:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case B:return i=n.displayName||null,i!==null?i:X(n.type)||"Memo";case K:i=n._payload,n=n._init;try{return X(n(i))}catch{}}return null}var ce=Array.isArray,w=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se={pending:!1,data:null,method:null,action:null},Ee=[],M=-1;function ee(n){return{current:n}}function de(n){0>M||(n.current=Ee[M],Ee[M]=null,M--)}function W(n,i){M++,Ee[M]=n.current,n.current=i}var Y=ee(null),Q=ee(null),x=ee(null),Z=ee(null);function ne(n,i){switch(W(x,i),W(Q,n),W(Y,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?g_(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=g_(i),n=I_(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}de(Y),W(Y,n)}function fe(){de(Y),de(Q),de(x)}function Re(n){n.memoizedState!==null&&W(Z,n);var i=Y.current,r=I_(i,n.type);i!==r&&(W(Q,n),W(Y,r))}function Ne(n){Q.current===n&&(de(Y),de(Q)),Z.current===n&&(de(Z),Zc._currentValue=se)}var Me=Object.prototype.hasOwnProperty,me=e.unstable_scheduleCallback,Ce=e.unstable_cancelCallback,ge=e.unstable_shouldYield,_e=e.unstable_requestPaint,De=e.unstable_now,Be=e.unstable_getCurrentPriorityLevel,$t=e.unstable_ImmediatePriority,Na=e.unstable_UserBlockingPriority,Ca=e.unstable_NormalPriority,lo=e.unstable_LowPriority,so=e.unstable_IdlePriority,Ds=e.log,ys=e.unstable_setDisableYieldValue,ko=null,rt=null;function Kt(n){if(typeof Ds=="function"&&ys(n),rt&&typeof rt.setStrictMode=="function")try{rt.setStrictMode(ko,n)}catch{}}var Bt=Math.clz32?Math.clz32:oc,$a=Math.log,vs=Math.LN2;function oc(n){return n>>>=0,n===0?32:31-($a(n)/vs|0)|0}var vl=256,Ms=4194304;function wi(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Ls(n,i,r){var u=n.pendingLanes;if(u===0)return 0;var E=0,A=n.suspendedLanes,b=n.pingedLanes;n=n.warmLanes;var v=u&134217727;return v!==0?(u=v&~A,u!==0?E=wi(u):(b&=v,b!==0?E=wi(b):r||(r=v&~n,r!==0&&(E=wi(r))))):(v=u&~A,v!==0?E=wi(v):b!==0?E=wi(b):r||(r=u&~n,r!==0&&(E=wi(r)))),E===0?0:i!==0&&i!==E&&(i&A)===0&&(A=E&-E,r=i&-i,A>=r||A===32&&(r&4194048)!==0)?i:E}function Ml(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function aE(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Bu(){var n=vl;return vl<<=1,(vl&4194048)===0&&(vl=256),n}function xs(){var n=Ms;return Ms<<=1,(Ms&62914560)===0&&(Ms=4194304),n}function Hs(n){for(var i=[],r=0;31>r;r++)i.push(n);return i}function Ll(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function iE(n,i,r,u,E,A){var b=n.pendingLanes;n.pendingLanes=r,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=r,n.entangledLanes&=r,n.errorRecoveryDisabledLanes&=r,n.shellSuspendCounter=0;var v=n.entanglements,F=n.expirationTimes,re=n.hiddenUpdates;for(r=b&~r;0<r;){var Ae=31-Bt(r),Se=1<<Ae;v[Ae]=0,F[Ae]=-1;var ue=re[Ae];if(ue!==null)for(re[Ae]=null,Ae=0;Ae<ue.length;Ae++){var he=ue[Ae];he!==null&&(he.lane&=-536870913)}r&=~Se}u!==0&&Fu(n,u,0),A!==0&&E===0&&n.tag!==0&&(n.suspendedLanes|=A&~(b&~i))}function Fu(n,i,r){n.pendingLanes|=i,n.suspendedLanes&=~i;var u=31-Bt(i);n.entangledLanes|=i,n.entanglements[u]=n.entanglements[u]|1073741824|r&4194090}function ju(n,i){var r=n.entangledLanes|=i;for(n=n.entanglements;r;){var u=31-Bt(r),E=1<<u;E&i|n[u]&i&&(n[u]|=i),r&=~E}}function lc(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function oE(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function sS(){var n=z.p;return n!==0?n:(n=window.event,n===void 0?32:B_(n.type))}function Ry(n,i){var r=z.p;try{return z.p=n,i()}finally{z.p=r}}var Uo=Math.random().toString(36).slice(2),na="__reactFiber$"+Uo,ba="__reactProps$"+Uo,ks="__reactContainer$"+Uo,lE="__reactEvents$"+Uo,Ty="__reactListeners$"+Uo,Sy="__reactHandles$"+Uo,rS="__reactResources$"+Uo,sc="__reactMarker$"+Uo;function sE(n){delete n[na],delete n[ba],delete n[lE],delete n[Ty],delete n[Sy]}function Us(n){var i=n[na];if(i)return i;for(var r=n.parentNode;r;){if(i=r[ks]||r[na]){if(r=i.alternate,i.child!==null||r!==null&&r.child!==null)for(n=C_(n);n!==null;){if(r=n[na])return r;n=C_(n)}return i}n=r,r=n.parentNode}return null}function Ps(n){if(n=n[na]||n[ks]){var i=n.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return n}return null}function rc(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(o(33))}function ws(n){var i=n[rS];return i||(i=n[rS]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function kn(n){n[sc]=!0}var cS=new Set,uS={};function xl(n,i){Gs(n,i),Gs(n+"Capture",i)}function Gs(n,i){for(uS[n]=i,n=0;n<i.length;n++)cS.add(i[n])}var gy=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),dS={},hS={};function Iy(n){return Me.call(hS,n)?!0:Me.call(dS,n)?!1:gy.test(n)?hS[n]=!0:(dS[n]=!0,!1)}function zu(n,i,r){if(Iy(i))if(r===null)n.removeAttribute(i);else{switch(typeof r){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+r)}}function Yu(n,i,r){if(r===null)n.removeAttribute(i);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+r)}}function ro(n,i,r,u){if(u===null)n.removeAttribute(r);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttributeNS(i,r,""+u)}}var rE,fS;function Bs(n){if(rE===void 0)try{throw Error()}catch(r){var i=r.stack.trim().match(/\n( *(at )?)/);rE=i&&i[1]||"",fS=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+rE+n+fS}var cE=!1;function uE(n,i){if(!n||cE)return"";cE=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var Se=function(){throw Error()};if(Object.defineProperty(Se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Se,[])}catch(he){var ue=he}Reflect.construct(n,[],Se)}else{try{Se.call()}catch(he){ue=he}n.call(Se.prototype)}}else{try{throw Error()}catch(he){ue=he}(Se=n())&&typeof Se.catch=="function"&&Se.catch(function(){})}}catch(he){if(he&&ue&&typeof he.stack=="string")return[he.stack,ue.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var A=u.DetermineComponentFrameRoot(),b=A[0],v=A[1];if(b&&v){var F=b.split(`
`),re=v.split(`
`);for(E=u=0;u<F.length&&!F[u].includes("DetermineComponentFrameRoot");)u++;for(;E<re.length&&!re[E].includes("DetermineComponentFrameRoot");)E++;if(u===F.length||E===re.length)for(u=F.length-1,E=re.length-1;1<=u&&0<=E&&F[u]!==re[E];)E--;for(;1<=u&&0<=E;u--,E--)if(F[u]!==re[E]){if(u!==1||E!==1)do if(u--,E--,0>E||F[u]!==re[E]){var Ae=`
`+F[u].replace(" at new "," at ");return n.displayName&&Ae.includes("<anonymous>")&&(Ae=Ae.replace("<anonymous>",n.displayName)),Ae}while(1<=u&&0<=E);break}}}finally{cE=!1,Error.prepareStackTrace=r}return(r=n?n.displayName||n.name:"")?Bs(r):""}function _y(n){switch(n.tag){case 26:case 27:case 5:return Bs(n.type);case 16:return Bs("Lazy");case 13:return Bs("Suspense");case 19:return Bs("SuspenseList");case 0:case 15:return uE(n.type,!1);case 11:return uE(n.type.render,!1);case 1:return uE(n.type,!0);case 31:return Bs("Activity");default:return""}}function ES(n){try{var i="";do i+=_y(n),n=n.return;while(n);return i}catch(r){return`
Error generating stack: `+r.message+`
`+r.stack}}function Ja(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function mS(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function py(n){var i=mS(n)?"checked":"value",r=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),u=""+n[i];if(!n.hasOwnProperty(i)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var E=r.get,A=r.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return E.call(this)},set:function(b){u=""+b,A.call(this,b)}}),Object.defineProperty(n,i,{enumerable:r.enumerable}),{getValue:function(){return u},setValue:function(b){u=""+b},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Ku(n){n._valueTracker||(n._valueTracker=py(n))}function AS(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var r=i.getValue(),u="";return n&&(u=mS(n)?n.checked?"true":"false":n.value),n=u,n!==r?(i.setValue(n),!0):!1}function Vu(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Ny=/[\n"\\]/g;function ei(n){return n.replace(Ny,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function dE(n,i,r,u,E,A,b,v){n.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?n.type=b:n.removeAttribute("type"),i!=null?b==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+Ja(i)):n.value!==""+Ja(i)&&(n.value=""+Ja(i)):b!=="submit"&&b!=="reset"||n.removeAttribute("value"),i!=null?hE(n,b,Ja(i)):r!=null?hE(n,b,Ja(r)):u!=null&&n.removeAttribute("value"),E==null&&A!=null&&(n.defaultChecked=!!A),E!=null&&(n.checked=E&&typeof E!="function"&&typeof E!="symbol"),v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?n.name=""+Ja(v):n.removeAttribute("name")}function RS(n,i,r,u,E,A,b,v){if(A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(n.type=A),i!=null||r!=null){if(!(A!=="submit"&&A!=="reset"||i!=null))return;r=r!=null?""+Ja(r):"",i=i!=null?""+Ja(i):r,v||i===n.value||(n.value=i),n.defaultValue=i}u=u??E,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=v?n.checked:!!u,n.defaultChecked=!!u,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(n.name=b)}function hE(n,i,r){i==="number"&&Vu(n.ownerDocument)===n||n.defaultValue===""+r||(n.defaultValue=""+r)}function Fs(n,i,r,u){if(n=n.options,i){i={};for(var E=0;E<r.length;E++)i["$"+r[E]]=!0;for(r=0;r<n.length;r++)E=i.hasOwnProperty("$"+n[r].value),n[r].selected!==E&&(n[r].selected=E),E&&u&&(n[r].defaultSelected=!0)}else{for(r=""+Ja(r),i=null,E=0;E<n.length;E++){if(n[E].value===r){n[E].selected=!0,u&&(n[E].defaultSelected=!0);return}i!==null||n[E].disabled||(i=n[E])}i!==null&&(i.selected=!0)}}function TS(n,i,r){if(i!=null&&(i=""+Ja(i),i!==n.value&&(n.value=i),r==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=r!=null?""+Ja(r):""}function SS(n,i,r,u){if(i==null){if(u!=null){if(r!=null)throw Error(o(92));if(ce(u)){if(1<u.length)throw Error(o(93));u=u[0]}r=u}r==null&&(r=""),i=r}r=Ja(i),n.defaultValue=r,u=n.textContent,u===r&&u!==""&&u!==null&&(n.value=u)}function js(n,i){if(i){var r=n.firstChild;if(r&&r===n.lastChild&&r.nodeType===3){r.nodeValue=i;return}}n.textContent=i}var Cy=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function gS(n,i,r){var u=i.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?u?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":u?n.setProperty(i,r):typeof r!="number"||r===0||Cy.has(i)?i==="float"?n.cssFloat=r:n[i]=(""+r).trim():n[i]=r+"px"}function IS(n,i,r){if(i!=null&&typeof i!="object")throw Error(o(62));if(n=n.style,r!=null){for(var u in r)!r.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var E in i)u=i[E],i.hasOwnProperty(E)&&r[E]!==u&&gS(n,E,u)}else for(var A in i)i.hasOwnProperty(A)&&gS(n,A,i[A])}function fE(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var by=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Oy=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Wu(n){return Oy.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var EE=null;function mE(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var zs=null,Ys=null;function _S(n){var i=Ps(n);if(i&&(n=i.stateNode)){var r=n[ba]||null;e:switch(n=i.stateNode,i.type){case"input":if(dE(n,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),i=r.name,r.type==="radio"&&i!=null){for(r=n;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+ei(""+i)+'"][type="radio"]'),i=0;i<r.length;i++){var u=r[i];if(u!==n&&u.form===n.form){var E=u[ba]||null;if(!E)throw Error(o(90));dE(u,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(i=0;i<r.length;i++)u=r[i],u.form===n.form&&AS(u)}break e;case"textarea":TS(n,r.value,r.defaultValue);break e;case"select":i=r.value,i!=null&&Fs(n,!!r.multiple,i,!1)}}}var AE=!1;function pS(n,i,r){if(AE)return n(i,r);AE=!0;try{var u=n(i);return u}finally{if(AE=!1,(zs!==null||Ys!==null)&&(Ld(),zs&&(i=zs,n=Ys,Ys=zs=null,_S(i),n)))for(i=0;i<n.length;i++)_S(n[i])}}function cc(n,i){var r=n.stateNode;if(r===null)return null;var u=r[ba]||null;if(u===null)return null;r=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(r&&typeof r!="function")throw Error(o(231,i,typeof r));return r}var co=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),RE=!1;if(co)try{var uc={};Object.defineProperty(uc,"passive",{get:function(){RE=!0}}),window.addEventListener("test",uc,uc),window.removeEventListener("test",uc,uc)}catch{RE=!1}var Po=null,TE=null,Xu=null;function NS(){if(Xu)return Xu;var n,i=TE,r=i.length,u,E="value"in Po?Po.value:Po.textContent,A=E.length;for(n=0;n<r&&i[n]===E[n];n++);var b=r-n;for(u=1;u<=b&&i[r-u]===E[A-u];u++);return Xu=E.slice(n,1<u?1-u:void 0)}function qu(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Zu(){return!0}function CS(){return!1}function Oa(n){function i(r,u,E,A,b){this._reactName=r,this._targetInst=E,this.type=u,this.nativeEvent=A,this.target=b,this.currentTarget=null;for(var v in n)n.hasOwnProperty(v)&&(r=n[v],this[v]=r?r(A):A[v]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?Zu:CS,this.isPropagationStopped=CS,this}return R(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Zu)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Zu)},persist:function(){},isPersistent:Zu}),i}var Hl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qu=Oa(Hl),dc=R({},Hl,{view:0,detail:0}),Dy=Oa(dc),SE,gE,hc,$u=R({},dc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_E,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==hc&&(hc&&n.type==="mousemove"?(SE=n.screenX-hc.screenX,gE=n.screenY-hc.screenY):gE=SE=0,hc=n),SE)},movementY:function(n){return"movementY"in n?n.movementY:gE}}),bS=Oa($u),yy=R({},$u,{dataTransfer:0}),vy=Oa(yy),My=R({},dc,{relatedTarget:0}),IE=Oa(My),Ly=R({},Hl,{animationName:0,elapsedTime:0,pseudoElement:0}),xy=Oa(Ly),Hy=R({},Hl,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),ky=Oa(Hy),Uy=R({},Hl,{data:0}),OS=Oa(Uy),Py={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function By(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Gy[n])?!!i[n]:!1}function _E(){return By}var Fy=R({},dc,{key:function(n){if(n.key){var i=Py[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=qu(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?wy[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_E,charCode:function(n){return n.type==="keypress"?qu(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?qu(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),jy=Oa(Fy),zy=R({},$u,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),DS=Oa(zy),Yy=R({},dc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_E}),Ky=Oa(Yy),Vy=R({},Hl,{propertyName:0,elapsedTime:0,pseudoElement:0}),Wy=Oa(Vy),Xy=R({},$u,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),qy=Oa(Xy),Zy=R({},Hl,{newState:0,oldState:0}),Qy=Oa(Zy),$y=[9,13,27,32],pE=co&&"CompositionEvent"in window,fc=null;co&&"documentMode"in document&&(fc=document.documentMode);var Jy=co&&"TextEvent"in window&&!fc,yS=co&&(!pE||fc&&8<fc&&11>=fc),vS=" ",MS=!1;function LS(n,i){switch(n){case"keyup":return $y.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xS(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ks=!1;function ev(n,i){switch(n){case"compositionend":return xS(i);case"keypress":return i.which!==32?null:(MS=!0,vS);case"textInput":return n=i.data,n===vS&&MS?null:n;default:return null}}function tv(n,i){if(Ks)return n==="compositionend"||!pE&&LS(n,i)?(n=NS(),Xu=TE=Po=null,Ks=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return yS&&i.locale!=="ko"?null:i.data;default:return null}}var nv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function HS(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!nv[n.type]:i==="textarea"}function kS(n,i,r,u){zs?Ys?Ys.push(u):Ys=[u]:zs=u,i=wd(i,"onChange"),0<i.length&&(r=new Qu("onChange","change",null,r,u),n.push({event:r,listeners:i}))}var Ec=null,mc=null;function av(n){m_(n,0)}function Ju(n){var i=rc(n);if(AS(i))return n}function US(n,i){if(n==="change")return i}var PS=!1;if(co){var NE;if(co){var CE="oninput"in document;if(!CE){var wS=document.createElement("div");wS.setAttribute("oninput","return;"),CE=typeof wS.oninput=="function"}NE=CE}else NE=!1;PS=NE&&(!document.documentMode||9<document.documentMode)}function GS(){Ec&&(Ec.detachEvent("onpropertychange",BS),mc=Ec=null)}function BS(n){if(n.propertyName==="value"&&Ju(mc)){var i=[];kS(i,mc,n,mE(n)),pS(av,i)}}function iv(n,i,r){n==="focusin"?(GS(),Ec=i,mc=r,Ec.attachEvent("onpropertychange",BS)):n==="focusout"&&GS()}function ov(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Ju(mc)}function lv(n,i){if(n==="click")return Ju(i)}function sv(n,i){if(n==="input"||n==="change")return Ju(i)}function rv(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Ua=typeof Object.is=="function"?Object.is:rv;function Ac(n,i){if(Ua(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var r=Object.keys(n),u=Object.keys(i);if(r.length!==u.length)return!1;for(u=0;u<r.length;u++){var E=r[u];if(!Me.call(i,E)||!Ua(n[E],i[E]))return!1}return!0}function FS(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function jS(n,i){var r=FS(n);n=0;for(var u;r;){if(r.nodeType===3){if(u=n+r.textContent.length,n<=i&&u>=i)return{node:r,offset:i-n};n=u}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=FS(r)}}function zS(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?zS(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function YS(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=Vu(n.document);i instanceof n.HTMLIFrameElement;){try{var r=typeof i.contentWindow.location.href=="string"}catch{r=!1}if(r)n=i.contentWindow;else break;i=Vu(n.document)}return i}function bE(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var cv=co&&"documentMode"in document&&11>=document.documentMode,Vs=null,OE=null,Rc=null,DE=!1;function KS(n,i,r){var u=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;DE||Vs==null||Vs!==Vu(u)||(u=Vs,"selectionStart"in u&&bE(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Rc&&Ac(Rc,u)||(Rc=u,u=wd(OE,"onSelect"),0<u.length&&(i=new Qu("onSelect","select",null,i,r),n.push({event:i,listeners:u}),i.target=Vs)))}function kl(n,i){var r={};return r[n.toLowerCase()]=i.toLowerCase(),r["Webkit"+n]="webkit"+i,r["Moz"+n]="moz"+i,r}var Ws={animationend:kl("Animation","AnimationEnd"),animationiteration:kl("Animation","AnimationIteration"),animationstart:kl("Animation","AnimationStart"),transitionrun:kl("Transition","TransitionRun"),transitionstart:kl("Transition","TransitionStart"),transitioncancel:kl("Transition","TransitionCancel"),transitionend:kl("Transition","TransitionEnd")},yE={},VS={};co&&(VS=document.createElement("div").style,"AnimationEvent"in window||(delete Ws.animationend.animation,delete Ws.animationiteration.animation,delete Ws.animationstart.animation),"TransitionEvent"in window||delete Ws.transitionend.transition);function Ul(n){if(yE[n])return yE[n];if(!Ws[n])return n;var i=Ws[n],r;for(r in i)if(i.hasOwnProperty(r)&&r in VS)return yE[n]=i[r];return n}var WS=Ul("animationend"),XS=Ul("animationiteration"),qS=Ul("animationstart"),uv=Ul("transitionrun"),dv=Ul("transitionstart"),hv=Ul("transitioncancel"),ZS=Ul("transitionend"),QS=new Map,vE="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");vE.push("scrollEnd");function pi(n,i){QS.set(n,i),xl(i,[n])}var $S=new WeakMap;function ti(n,i){if(typeof n=="object"&&n!==null){var r=$S.get(n);return r!==void 0?r:(i={value:n,source:i,stack:ES(i)},$S.set(n,i),i)}return{value:n,source:i,stack:ES(i)}}var ni=[],Xs=0,ME=0;function ed(){for(var n=Xs,i=ME=Xs=0;i<n;){var r=ni[i];ni[i++]=null;var u=ni[i];ni[i++]=null;var E=ni[i];ni[i++]=null;var A=ni[i];if(ni[i++]=null,u!==null&&E!==null){var b=u.pending;b===null?E.next=E:(E.next=b.next,b.next=E),u.pending=E}A!==0&&JS(r,E,A)}}function td(n,i,r,u){ni[Xs++]=n,ni[Xs++]=i,ni[Xs++]=r,ni[Xs++]=u,ME|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function LE(n,i,r,u){return td(n,i,r,u),nd(n)}function qs(n,i){return td(n,null,null,i),nd(n)}function JS(n,i,r){n.lanes|=r;var u=n.alternate;u!==null&&(u.lanes|=r);for(var E=!1,A=n.return;A!==null;)A.childLanes|=r,u=A.alternate,u!==null&&(u.childLanes|=r),A.tag===22&&(n=A.stateNode,n===null||n._visibility&1||(E=!0)),n=A,A=A.return;return n.tag===3?(A=n.stateNode,E&&i!==null&&(E=31-Bt(r),n=A.hiddenUpdates,u=n[E],u===null?n[E]=[i]:u.push(i),i.lane=r|536870912),A):null}function nd(n){if(50<jc)throw jc=0,wm=null,Error(o(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var Zs={};function fv(n,i,r,u){this.tag=n,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pa(n,i,r,u){return new fv(n,i,r,u)}function xE(n){return n=n.prototype,!(!n||!n.isReactComponent)}function uo(n,i){var r=n.alternate;return r===null?(r=Pa(n.tag,i,n.key,n.mode),r.elementType=n.elementType,r.type=n.type,r.stateNode=n.stateNode,r.alternate=n,n.alternate=r):(r.pendingProps=i,r.type=n.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=n.flags&65011712,r.childLanes=n.childLanes,r.lanes=n.lanes,r.child=n.child,r.memoizedProps=n.memoizedProps,r.memoizedState=n.memoizedState,r.updateQueue=n.updateQueue,i=n.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},r.sibling=n.sibling,r.index=n.index,r.ref=n.ref,r.refCleanup=n.refCleanup,r}function eg(n,i){n.flags&=65011714;var r=n.alternate;return r===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=r.childLanes,n.lanes=r.lanes,n.child=r.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=r.memoizedProps,n.memoizedState=r.memoizedState,n.updateQueue=r.updateQueue,n.type=r.type,i=r.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function ad(n,i,r,u,E,A){var b=0;if(u=n,typeof n=="function")xE(n)&&(b=1);else if(typeof n=="string")b=mM(n,r,Y.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case V:return n=Pa(31,r,i,E),n.elementType=V,n.lanes=A,n;case _:return Pl(r.children,E,A,i);case p:b=8,E|=24;break;case O:return n=Pa(12,r,i,E|2),n.elementType=O,n.lanes=A,n;case k:return n=Pa(13,r,i,E),n.elementType=k,n.lanes=A,n;case G:return n=Pa(19,r,i,E),n.elementType=G,n.lanes=A,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case y:case P:b=10;break e;case L:b=9;break e;case D:b=11;break e;case B:b=14;break e;case K:b=16,u=null;break e}b=29,r=Error(o(130,n===null?"null":typeof n,"")),u=null}return i=Pa(b,r,i,E),i.elementType=n,i.type=u,i.lanes=A,i}function Pl(n,i,r,u){return n=Pa(7,n,u,i),n.lanes=r,n}function HE(n,i,r){return n=Pa(6,n,null,i),n.lanes=r,n}function kE(n,i,r){return i=Pa(4,n.children!==null?n.children:[],n.key,i),i.lanes=r,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var Qs=[],$s=0,id=null,od=0,ai=[],ii=0,wl=null,ho=1,fo="";function Gl(n,i){Qs[$s++]=od,Qs[$s++]=id,id=n,od=i}function tg(n,i,r){ai[ii++]=ho,ai[ii++]=fo,ai[ii++]=wl,wl=n;var u=ho;n=fo;var E=32-Bt(u)-1;u&=~(1<<E),r+=1;var A=32-Bt(i)+E;if(30<A){var b=E-E%5;A=(u&(1<<b)-1).toString(32),u>>=b,E-=b,ho=1<<32-Bt(i)+E|r<<E|u,fo=A+n}else ho=1<<A|r<<E|u,fo=n}function UE(n){n.return!==null&&(Gl(n,1),tg(n,1,0))}function PE(n){for(;n===id;)id=Qs[--$s],Qs[$s]=null,od=Qs[--$s],Qs[$s]=null;for(;n===wl;)wl=ai[--ii],ai[ii]=null,fo=ai[--ii],ai[ii]=null,ho=ai[--ii],ai[ii]=null}var ra=null,Jt=null,At=!1,Bl=null,Gi=!1,wE=Error(o(519));function Fl(n){var i=Error(o(418,""));throw gc(ti(i,n)),wE}function ng(n){var i=n.stateNode,r=n.type,u=n.memoizedProps;switch(i[na]=n,i[ba]=u,r){case"dialog":nt("cancel",i),nt("close",i);break;case"iframe":case"object":case"embed":nt("load",i);break;case"video":case"audio":for(r=0;r<Yc.length;r++)nt(Yc[r],i);break;case"source":nt("error",i);break;case"img":case"image":case"link":nt("error",i),nt("load",i);break;case"details":nt("toggle",i);break;case"input":nt("invalid",i),RS(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),Ku(i);break;case"select":nt("invalid",i);break;case"textarea":nt("invalid",i),SS(i,u.value,u.defaultValue,u.children),Ku(i)}r=u.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||i.textContent===""+r||u.suppressHydrationWarning===!0||S_(i.textContent,r)?(u.popover!=null&&(nt("beforetoggle",i),nt("toggle",i)),u.onScroll!=null&&nt("scroll",i),u.onScrollEnd!=null&&nt("scrollend",i),u.onClick!=null&&(i.onclick=Gd),i=!0):i=!1,i||Fl(n)}function ag(n){for(ra=n.return;ra;)switch(ra.tag){case 5:case 13:Gi=!1;return;case 27:case 3:Gi=!0;return;default:ra=ra.return}}function Tc(n){if(n!==ra)return!1;if(!At)return ag(n),At=!0,!1;var i=n.tag,r;if((r=i!==3&&i!==27)&&((r=i===5)&&(r=n.type,r=!(r!=="form"&&r!=="button")||eA(n.type,n.memoizedProps)),r=!r),r&&Jt&&Fl(n),ag(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(o(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8)if(r=n.data,r==="/$"){if(i===0){Jt=Ci(n.nextSibling);break e}i--}else r!=="$"&&r!=="$!"&&r!=="$?"||i++;n=n.nextSibling}Jt=null}}else i===27?(i=Jt,Jo(n.type)?(n=iA,iA=null,Jt=n):Jt=i):Jt=ra?Ci(n.stateNode.nextSibling):null;return!0}function Sc(){Jt=ra=null,At=!1}function ig(){var n=Bl;return n!==null&&(va===null?va=n:va.push.apply(va,n),Bl=null),n}function gc(n){Bl===null?Bl=[n]:Bl.push(n)}var GE=ee(null),jl=null,Eo=null;function wo(n,i,r){W(GE,i._currentValue),i._currentValue=r}function mo(n){n._currentValue=GE.current,de(GE)}function BE(n,i,r){for(;n!==null;){var u=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),n===r)break;n=n.return}}function FE(n,i,r,u){var E=n.child;for(E!==null&&(E.return=n);E!==null;){var A=E.dependencies;if(A!==null){var b=E.child;A=A.firstContext;e:for(;A!==null;){var v=A;A=E;for(var F=0;F<i.length;F++)if(v.context===i[F]){A.lanes|=r,v=A.alternate,v!==null&&(v.lanes|=r),BE(A.return,r,n),u||(b=null);break e}A=v.next}}else if(E.tag===18){if(b=E.return,b===null)throw Error(o(341));b.lanes|=r,A=b.alternate,A!==null&&(A.lanes|=r),BE(b,r,n),b=null}else b=E.child;if(b!==null)b.return=E;else for(b=E;b!==null;){if(b===n){b=null;break}if(E=b.sibling,E!==null){E.return=b.return,b=E;break}b=b.return}E=b}}function Ic(n,i,r,u){n=null;for(var E=i,A=!1;E!==null;){if(!A){if((E.flags&524288)!==0)A=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var b=E.alternate;if(b===null)throw Error(o(387));if(b=b.memoizedProps,b!==null){var v=E.type;Ua(E.pendingProps.value,b.value)||(n!==null?n.push(v):n=[v])}}else if(E===Z.current){if(b=E.alternate,b===null)throw Error(o(387));b.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(n!==null?n.push(Zc):n=[Zc])}E=E.return}n!==null&&FE(i,n,r,u),i.flags|=262144}function ld(n){for(n=n.firstContext;n!==null;){if(!Ua(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function zl(n){jl=n,Eo=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function aa(n){return og(jl,n)}function sd(n,i){return jl===null&&zl(n),og(n,i)}function og(n,i){var r=i._currentValue;if(i={context:i,memoizedValue:r,next:null},Eo===null){if(n===null)throw Error(o(308));Eo=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else Eo=Eo.next=i;return r}var Ev=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(r,u){n.push(u)}};this.abort=function(){i.aborted=!0,n.forEach(function(r){return r()})}},mv=e.unstable_scheduleCallback,Av=e.unstable_NormalPriority,Dn={$$typeof:P,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function jE(){return{controller:new Ev,data:new Map,refCount:0}}function _c(n){n.refCount--,n.refCount===0&&mv(Av,function(){n.controller.abort()})}var pc=null,zE=0,Js=0,er=null;function Rv(n,i){if(pc===null){var r=pc=[];zE=0,Js=Km(),er={status:"pending",value:void 0,then:function(u){r.push(u)}}}return zE++,i.then(lg,lg),i}function lg(){if(--zE===0&&pc!==null){er!==null&&(er.status="fulfilled");var n=pc;pc=null,Js=0,er=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function Tv(n,i){var r=[],u={status:"pending",value:null,reason:null,then:function(E){r.push(E)}};return n.then(function(){u.status="fulfilled",u.value=i;for(var E=0;E<r.length;E++)(0,r[E])(i)},function(E){for(u.status="rejected",u.reason=E,E=0;E<r.length;E++)(0,r[E])(void 0)}),u}var sg=w.S;w.S=function(n,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&Rv(n,i),sg!==null&&sg(n,i)};var Yl=ee(null);function YE(){var n=Yl.current;return n!==null?n:xt.pooledCache}function rd(n,i){i===null?W(Yl,Yl.current):W(Yl,i.pool)}function rg(){var n=YE();return n===null?null:{parent:Dn._currentValue,pool:n}}var Nc=Error(o(460)),cg=Error(o(474)),cd=Error(o(542)),KE={then:function(){}};function ug(n){return n=n.status,n==="fulfilled"||n==="rejected"}function ud(){}function dg(n,i,r){switch(r=n[r],r===void 0?n.push(i):r!==i&&(i.then(ud,ud),i=r),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,fg(n),n;default:if(typeof i.status=="string")i.then(ud,ud);else{if(n=xt,n!==null&&100<n.shellSuspendCounter)throw Error(o(482));n=i,n.status="pending",n.then(function(u){if(i.status==="pending"){var E=i;E.status="fulfilled",E.value=u}},function(u){if(i.status==="pending"){var E=i;E.status="rejected",E.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,fg(n),n}throw Cc=i,Nc}}var Cc=null;function hg(){if(Cc===null)throw Error(o(459));var n=Cc;return Cc=null,n}function fg(n){if(n===Nc||n===cd)throw Error(o(483))}var Go=!1;function VE(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function WE(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Bo(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Fo(n,i,r){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(gt&2)!==0){var E=u.pending;return E===null?i.next=i:(i.next=E.next,E.next=i),u.pending=i,i=nd(n),JS(n,null,r),i}return td(n,u,i,r),nd(n)}function bc(n,i,r){if(i=i.updateQueue,i!==null&&(i=i.shared,(r&4194048)!==0)){var u=i.lanes;u&=n.pendingLanes,r|=u,i.lanes=r,ju(n,r)}}function XE(n,i){var r=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,r===u)){var E=null,A=null;if(r=r.firstBaseUpdate,r!==null){do{var b={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};A===null?E=A=b:A=A.next=b,r=r.next}while(r!==null);A===null?E=A=i:A=A.next=i}else E=A=i;r={baseState:u.baseState,firstBaseUpdate:E,lastBaseUpdate:A,shared:u.shared,callbacks:u.callbacks},n.updateQueue=r;return}n=r.lastBaseUpdate,n===null?r.firstBaseUpdate=i:n.next=i,r.lastBaseUpdate=i}var qE=!1;function Oc(){if(qE){var n=er;if(n!==null)throw n}}function Dc(n,i,r,u){qE=!1;var E=n.updateQueue;Go=!1;var A=E.firstBaseUpdate,b=E.lastBaseUpdate,v=E.shared.pending;if(v!==null){E.shared.pending=null;var F=v,re=F.next;F.next=null,b===null?A=re:b.next=re,b=F;var Ae=n.alternate;Ae!==null&&(Ae=Ae.updateQueue,v=Ae.lastBaseUpdate,v!==b&&(v===null?Ae.firstBaseUpdate=re:v.next=re,Ae.lastBaseUpdate=F))}if(A!==null){var Se=E.baseState;b=0,Ae=re=F=null,v=A;do{var ue=v.lane&-536870913,he=ue!==v.lane;if(he?(ct&ue)===ue:(u&ue)===ue){ue!==0&&ue===Js&&(qE=!0),Ae!==null&&(Ae=Ae.next={lane:0,tag:v.tag,payload:v.payload,callback:null,next:null});e:{var Fe=n,Pe=v;ue=i;var bt=r;switch(Pe.tag){case 1:if(Fe=Pe.payload,typeof Fe=="function"){Se=Fe.call(bt,Se,ue);break e}Se=Fe;break e;case 3:Fe.flags=Fe.flags&-65537|128;case 0:if(Fe=Pe.payload,ue=typeof Fe=="function"?Fe.call(bt,Se,ue):Fe,ue==null)break e;Se=R({},Se,ue);break e;case 2:Go=!0}}ue=v.callback,ue!==null&&(n.flags|=64,he&&(n.flags|=8192),he=E.callbacks,he===null?E.callbacks=[ue]:he.push(ue))}else he={lane:ue,tag:v.tag,payload:v.payload,callback:v.callback,next:null},Ae===null?(re=Ae=he,F=Se):Ae=Ae.next=he,b|=ue;if(v=v.next,v===null){if(v=E.shared.pending,v===null)break;he=v,v=he.next,he.next=null,E.lastBaseUpdate=he,E.shared.pending=null}}while(!0);Ae===null&&(F=Se),E.baseState=F,E.firstBaseUpdate=re,E.lastBaseUpdate=Ae,A===null&&(E.shared.lanes=0),qo|=b,n.lanes=b,n.memoizedState=Se}}function Eg(n,i){if(typeof n!="function")throw Error(o(191,n));n.call(i)}function mg(n,i){var r=n.callbacks;if(r!==null)for(n.callbacks=null,n=0;n<r.length;n++)Eg(r[n],i)}var tr=ee(null),dd=ee(0);function Ag(n,i){n=_o,W(dd,n),W(tr,i),_o=n|i.baseLanes}function ZE(){W(dd,_o),W(tr,tr.current)}function QE(){_o=dd.current,de(tr),de(dd)}var jo=0,Ze=null,Nt=null,gn=null,hd=!1,nr=!1,Kl=!1,fd=0,yc=0,ar=null,Sv=0;function En(){throw Error(o(321))}function $E(n,i){if(i===null)return!1;for(var r=0;r<i.length&&r<n.length;r++)if(!Ua(n[r],i[r]))return!1;return!0}function JE(n,i,r,u,E,A){return jo=A,Ze=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,w.H=n===null||n.memoizedState===null?Jg:eI,Kl=!1,A=r(u,E),Kl=!1,nr&&(A=Tg(i,r,u,E)),Rg(n),A}function Rg(n){w.H=Sd;var i=Nt!==null&&Nt.next!==null;if(jo=0,gn=Nt=Ze=null,hd=!1,yc=0,ar=null,i)throw Error(o(300));n===null||Un||(n=n.dependencies,n!==null&&ld(n)&&(Un=!0))}function Tg(n,i,r,u){Ze=n;var E=0;do{if(nr&&(ar=null),yc=0,nr=!1,25<=E)throw Error(o(301));if(E+=1,gn=Nt=null,n.updateQueue!=null){var A=n.updateQueue;A.lastEffect=null,A.events=null,A.stores=null,A.memoCache!=null&&(A.memoCache.index=0)}w.H=bv,A=i(r,u)}while(nr);return A}function gv(){var n=w.H,i=n.useState()[0];return i=typeof i.then=="function"?vc(i):i,n=n.useState()[0],(Nt!==null?Nt.memoizedState:null)!==n&&(Ze.flags|=1024),i}function em(){var n=fd!==0;return fd=0,n}function tm(n,i,r){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~r}function nm(n){if(hd){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}hd=!1}jo=0,gn=Nt=Ze=null,nr=!1,yc=fd=0,ar=null}function Da(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gn===null?Ze.memoizedState=gn=n:gn=gn.next=n,gn}function In(){if(Nt===null){var n=Ze.alternate;n=n!==null?n.memoizedState:null}else n=Nt.next;var i=gn===null?Ze.memoizedState:gn.next;if(i!==null)gn=i,Nt=n;else{if(n===null)throw Ze.alternate===null?Error(o(467)):Error(o(310));Nt=n,n={memoizedState:Nt.memoizedState,baseState:Nt.baseState,baseQueue:Nt.baseQueue,queue:Nt.queue,next:null},gn===null?Ze.memoizedState=gn=n:gn=gn.next=n}return gn}function am(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function vc(n){var i=yc;return yc+=1,ar===null&&(ar=[]),n=dg(ar,n,i),i=Ze,(gn===null?i.memoizedState:gn.next)===null&&(i=i.alternate,w.H=i===null||i.memoizedState===null?Jg:eI),n}function Ed(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return vc(n);if(n.$$typeof===P)return aa(n)}throw Error(o(438,String(n)))}function im(n){var i=null,r=Ze.updateQueue;if(r!==null&&(i=r.memoCache),i==null){var u=Ze.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(E){return E.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),r===null&&(r=am(),Ze.updateQueue=r),r.memoCache=i,r=i.data[i.index],r===void 0)for(r=i.data[i.index]=Array(n),u=0;u<n;u++)r[u]=ae;return i.index++,r}function Ao(n,i){return typeof i=="function"?i(n):i}function md(n){var i=In();return om(i,Nt,n)}function om(n,i,r){var u=n.queue;if(u===null)throw Error(o(311));u.lastRenderedReducer=r;var E=n.baseQueue,A=u.pending;if(A!==null){if(E!==null){var b=E.next;E.next=A.next,A.next=b}i.baseQueue=E=A,u.pending=null}if(A=n.baseState,E===null)n.memoizedState=A;else{i=E.next;var v=b=null,F=null,re=i,Ae=!1;do{var Se=re.lane&-536870913;if(Se!==re.lane?(ct&Se)===Se:(jo&Se)===Se){var ue=re.revertLane;if(ue===0)F!==null&&(F=F.next={lane:0,revertLane:0,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null}),Se===Js&&(Ae=!0);else if((jo&ue)===ue){re=re.next,ue===Js&&(Ae=!0);continue}else Se={lane:0,revertLane:re.revertLane,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null},F===null?(v=F=Se,b=A):F=F.next=Se,Ze.lanes|=ue,qo|=ue;Se=re.action,Kl&&r(A,Se),A=re.hasEagerState?re.eagerState:r(A,Se)}else ue={lane:Se,revertLane:re.revertLane,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null},F===null?(v=F=ue,b=A):F=F.next=ue,Ze.lanes|=Se,qo|=Se;re=re.next}while(re!==null&&re!==i);if(F===null?b=A:F.next=v,!Ua(A,n.memoizedState)&&(Un=!0,Ae&&(r=er,r!==null)))throw r;n.memoizedState=A,n.baseState=b,n.baseQueue=F,u.lastRenderedState=A}return E===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function lm(n){var i=In(),r=i.queue;if(r===null)throw Error(o(311));r.lastRenderedReducer=n;var u=r.dispatch,E=r.pending,A=i.memoizedState;if(E!==null){r.pending=null;var b=E=E.next;do A=n(A,b.action),b=b.next;while(b!==E);Ua(A,i.memoizedState)||(Un=!0),i.memoizedState=A,i.baseQueue===null&&(i.baseState=A),r.lastRenderedState=A}return[A,u]}function Sg(n,i,r){var u=Ze,E=In(),A=At;if(A){if(r===void 0)throw Error(o(407));r=r()}else r=i();var b=!Ua((Nt||E).memoizedState,r);b&&(E.memoizedState=r,Un=!0),E=E.queue;var v=_g.bind(null,u,E,n);if(Mc(2048,8,v,[n]),E.getSnapshot!==i||b||gn!==null&&gn.memoizedState.tag&1){if(u.flags|=2048,ir(9,Ad(),Ig.bind(null,u,E,r,i),null),xt===null)throw Error(o(349));A||(jo&124)!==0||gg(u,i,r)}return r}function gg(n,i,r){n.flags|=16384,n={getSnapshot:i,value:r},i=Ze.updateQueue,i===null?(i=am(),Ze.updateQueue=i,i.stores=[n]):(r=i.stores,r===null?i.stores=[n]:r.push(n))}function Ig(n,i,r,u){i.value=r,i.getSnapshot=u,pg(i)&&Ng(n)}function _g(n,i,r){return r(function(){pg(i)&&Ng(n)})}function pg(n){var i=n.getSnapshot;n=n.value;try{var r=i();return!Ua(n,r)}catch{return!0}}function Ng(n){var i=qs(n,2);i!==null&&ja(i,n,2)}function sm(n){var i=Da();if(typeof n=="function"){var r=n;if(n=r(),Kl){Kt(!0);try{r()}finally{Kt(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ao,lastRenderedState:n},i}function Cg(n,i,r,u){return n.baseState=r,om(n,Nt,typeof u=="function"?u:Ao)}function Iv(n,i,r,u,E){if(Td(n))throw Error(o(485));if(n=i.action,n!==null){var A={payload:E,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){A.listeners.push(b)}};w.T!==null?r(!0):A.isTransition=!1,u(A),r=i.pending,r===null?(A.next=i.pending=A,bg(i,A)):(A.next=r.next,i.pending=r.next=A)}}function bg(n,i){var r=i.action,u=i.payload,E=n.state;if(i.isTransition){var A=w.T,b={};w.T=b;try{var v=r(E,u),F=w.S;F!==null&&F(b,v),Og(n,i,v)}catch(re){rm(n,i,re)}finally{w.T=A}}else try{A=r(E,u),Og(n,i,A)}catch(re){rm(n,i,re)}}function Og(n,i,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(u){Dg(n,i,u)},function(u){return rm(n,i,u)}):Dg(n,i,r)}function Dg(n,i,r){i.status="fulfilled",i.value=r,yg(i),n.state=r,i=n.pending,i!==null&&(r=i.next,r===i?n.pending=null:(r=r.next,i.next=r,bg(n,r)))}function rm(n,i,r){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=r,yg(i),i=i.next;while(i!==u)}n.action=null}function yg(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function vg(n,i){return i}function Mg(n,i){if(At){var r=xt.formState;if(r!==null){e:{var u=Ze;if(At){if(Jt){t:{for(var E=Jt,A=Gi;E.nodeType!==8;){if(!A){E=null;break t}if(E=Ci(E.nextSibling),E===null){E=null;break t}}A=E.data,E=A==="F!"||A==="F"?E:null}if(E){Jt=Ci(E.nextSibling),u=E.data==="F!";break e}}Fl(u)}u=!1}u&&(i=r[0])}}return r=Da(),r.memoizedState=r.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vg,lastRenderedState:i},r.queue=u,r=Zg.bind(null,Ze,u),u.dispatch=r,u=sm(!1),A=fm.bind(null,Ze,!1,u.queue),u=Da(),E={state:i,dispatch:null,action:n,pending:null},u.queue=E,r=Iv.bind(null,Ze,E,A,r),E.dispatch=r,u.memoizedState=n,[i,r,!1]}function Lg(n){var i=In();return xg(i,Nt,n)}function xg(n,i,r){if(i=om(n,i,vg)[0],n=md(Ao)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=vc(i)}catch(b){throw b===Nc?cd:b}else u=i;i=In();var E=i.queue,A=E.dispatch;return r!==i.memoizedState&&(Ze.flags|=2048,ir(9,Ad(),_v.bind(null,E,r),null)),[u,A,n]}function _v(n,i){n.action=i}function Hg(n){var i=In(),r=Nt;if(r!==null)return xg(i,r,n);In(),i=i.memoizedState,r=In();var u=r.queue.dispatch;return r.memoizedState=n,[i,u,!1]}function ir(n,i,r,u){return n={tag:n,create:r,deps:u,inst:i,next:null},i=Ze.updateQueue,i===null&&(i=am(),Ze.updateQueue=i),r=i.lastEffect,r===null?i.lastEffect=n.next=n:(u=r.next,r.next=n,n.next=u,i.lastEffect=n),n}function Ad(){return{destroy:void 0,resource:void 0}}function kg(){return In().memoizedState}function Rd(n,i,r,u){var E=Da();u=u===void 0?null:u,Ze.flags|=n,E.memoizedState=ir(1|i,Ad(),r,u)}function Mc(n,i,r,u){var E=In();u=u===void 0?null:u;var A=E.memoizedState.inst;Nt!==null&&u!==null&&$E(u,Nt.memoizedState.deps)?E.memoizedState=ir(i,A,r,u):(Ze.flags|=n,E.memoizedState=ir(1|i,A,r,u))}function Ug(n,i){Rd(8390656,8,n,i)}function Pg(n,i){Mc(2048,8,n,i)}function wg(n,i){return Mc(4,2,n,i)}function Gg(n,i){return Mc(4,4,n,i)}function Bg(n,i){if(typeof i=="function"){n=n();var r=i(n);return function(){typeof r=="function"?r():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Fg(n,i,r){r=r!=null?r.concat([n]):null,Mc(4,4,Bg.bind(null,i,n),r)}function cm(){}function jg(n,i){var r=In();i=i===void 0?null:i;var u=r.memoizedState;return i!==null&&$E(i,u[1])?u[0]:(r.memoizedState=[n,i],n)}function zg(n,i){var r=In();i=i===void 0?null:i;var u=r.memoizedState;if(i!==null&&$E(i,u[1]))return u[0];if(u=n(),Kl){Kt(!0);try{n()}finally{Kt(!1)}}return r.memoizedState=[u,i],u}function um(n,i,r){return r===void 0||(jo&1073741824)!==0?n.memoizedState=i:(n.memoizedState=r,n=VI(),Ze.lanes|=n,qo|=n,r)}function Yg(n,i,r,u){return Ua(r,i)?r:tr.current!==null?(n=um(n,r,u),Ua(n,i)||(Un=!0),n):(jo&42)===0?(Un=!0,n.memoizedState=r):(n=VI(),Ze.lanes|=n,qo|=n,i)}function Kg(n,i,r,u,E){var A=z.p;z.p=A!==0&&8>A?A:8;var b=w.T,v={};w.T=v,fm(n,!1,i,r);try{var F=E(),re=w.S;if(re!==null&&re(v,F),F!==null&&typeof F=="object"&&typeof F.then=="function"){var Ae=Tv(F,u);Lc(n,i,Ae,Fa(n))}else Lc(n,i,u,Fa(n))}catch(Se){Lc(n,i,{then:function(){},status:"rejected",reason:Se},Fa())}finally{z.p=A,w.T=b}}function pv(){}function dm(n,i,r,u){if(n.tag!==5)throw Error(o(476));var E=Vg(n).queue;Kg(n,E,i,se,r===null?pv:function(){return Wg(n),r(u)})}function Vg(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:se,baseState:se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ao,lastRenderedState:se},next:null};var r={};return i.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ao,lastRenderedState:r},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function Wg(n){var i=Vg(n).next.queue;Lc(n,i,{},Fa())}function hm(){return aa(Zc)}function Xg(){return In().memoizedState}function qg(){return In().memoizedState}function Nv(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var r=Fa();n=Bo(r);var u=Fo(i,n,r);u!==null&&(ja(u,i,r),bc(u,i,r)),i={cache:jE()},n.payload=i;return}i=i.return}}function Cv(n,i,r){var u=Fa();r={lane:u,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null},Td(n)?Qg(i,r):(r=LE(n,i,r,u),r!==null&&(ja(r,n,u),$g(r,i,u)))}function Zg(n,i,r){var u=Fa();Lc(n,i,r,u)}function Lc(n,i,r,u){var E={lane:u,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null};if(Td(n))Qg(i,E);else{var A=n.alternate;if(n.lanes===0&&(A===null||A.lanes===0)&&(A=i.lastRenderedReducer,A!==null))try{var b=i.lastRenderedState,v=A(b,r);if(E.hasEagerState=!0,E.eagerState=v,Ua(v,b))return td(n,i,E,0),xt===null&&ed(),!1}catch{}finally{}if(r=LE(n,i,E,u),r!==null)return ja(r,n,u),$g(r,i,u),!0}return!1}function fm(n,i,r,u){if(u={lane:2,revertLane:Km(),action:u,hasEagerState:!1,eagerState:null,next:null},Td(n)){if(i)throw Error(o(479))}else i=LE(n,r,u,2),i!==null&&ja(i,n,2)}function Td(n){var i=n.alternate;return n===Ze||i!==null&&i===Ze}function Qg(n,i){nr=hd=!0;var r=n.pending;r===null?i.next=i:(i.next=r.next,r.next=i),n.pending=i}function $g(n,i,r){if((r&4194048)!==0){var u=i.lanes;u&=n.pendingLanes,r|=u,i.lanes=r,ju(n,r)}}var Sd={readContext:aa,use:Ed,useCallback:En,useContext:En,useEffect:En,useImperativeHandle:En,useLayoutEffect:En,useInsertionEffect:En,useMemo:En,useReducer:En,useRef:En,useState:En,useDebugValue:En,useDeferredValue:En,useTransition:En,useSyncExternalStore:En,useId:En,useHostTransitionStatus:En,useFormState:En,useActionState:En,useOptimistic:En,useMemoCache:En,useCacheRefresh:En},Jg={readContext:aa,use:Ed,useCallback:function(n,i){return Da().memoizedState=[n,i===void 0?null:i],n},useContext:aa,useEffect:Ug,useImperativeHandle:function(n,i,r){r=r!=null?r.concat([n]):null,Rd(4194308,4,Bg.bind(null,i,n),r)},useLayoutEffect:function(n,i){return Rd(4194308,4,n,i)},useInsertionEffect:function(n,i){Rd(4,2,n,i)},useMemo:function(n,i){var r=Da();i=i===void 0?null:i;var u=n();if(Kl){Kt(!0);try{n()}finally{Kt(!1)}}return r.memoizedState=[u,i],u},useReducer:function(n,i,r){var u=Da();if(r!==void 0){var E=r(i);if(Kl){Kt(!0);try{r(i)}finally{Kt(!1)}}}else E=i;return u.memoizedState=u.baseState=E,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:E},u.queue=n,n=n.dispatch=Cv.bind(null,Ze,n),[u.memoizedState,n]},useRef:function(n){var i=Da();return n={current:n},i.memoizedState=n},useState:function(n){n=sm(n);var i=n.queue,r=Zg.bind(null,Ze,i);return i.dispatch=r,[n.memoizedState,r]},useDebugValue:cm,useDeferredValue:function(n,i){var r=Da();return um(r,n,i)},useTransition:function(){var n=sm(!1);return n=Kg.bind(null,Ze,n.queue,!0,!1),Da().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,r){var u=Ze,E=Da();if(At){if(r===void 0)throw Error(o(407));r=r()}else{if(r=i(),xt===null)throw Error(o(349));(ct&124)!==0||gg(u,i,r)}E.memoizedState=r;var A={value:r,getSnapshot:i};return E.queue=A,Ug(_g.bind(null,u,A,n),[n]),u.flags|=2048,ir(9,Ad(),Ig.bind(null,u,A,r,i),null),r},useId:function(){var n=Da(),i=xt.identifierPrefix;if(At){var r=fo,u=ho;r=(u&~(1<<32-Bt(u)-1)).toString(32)+r,i=""+i+"R"+r,r=fd++,0<r&&(i+="H"+r.toString(32)),i+=""}else r=Sv++,i=""+i+"r"+r.toString(32)+"";return n.memoizedState=i},useHostTransitionStatus:hm,useFormState:Mg,useActionState:Mg,useOptimistic:function(n){var i=Da();i.memoizedState=i.baseState=n;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=r,i=fm.bind(null,Ze,!0,r),r.dispatch=i,[n,i]},useMemoCache:im,useCacheRefresh:function(){return Da().memoizedState=Nv.bind(null,Ze)}},eI={readContext:aa,use:Ed,useCallback:jg,useContext:aa,useEffect:Pg,useImperativeHandle:Fg,useInsertionEffect:wg,useLayoutEffect:Gg,useMemo:zg,useReducer:md,useRef:kg,useState:function(){return md(Ao)},useDebugValue:cm,useDeferredValue:function(n,i){var r=In();return Yg(r,Nt.memoizedState,n,i)},useTransition:function(){var n=md(Ao)[0],i=In().memoizedState;return[typeof n=="boolean"?n:vc(n),i]},useSyncExternalStore:Sg,useId:Xg,useHostTransitionStatus:hm,useFormState:Lg,useActionState:Lg,useOptimistic:function(n,i){var r=In();return Cg(r,Nt,n,i)},useMemoCache:im,useCacheRefresh:qg},bv={readContext:aa,use:Ed,useCallback:jg,useContext:aa,useEffect:Pg,useImperativeHandle:Fg,useInsertionEffect:wg,useLayoutEffect:Gg,useMemo:zg,useReducer:lm,useRef:kg,useState:function(){return lm(Ao)},useDebugValue:cm,useDeferredValue:function(n,i){var r=In();return Nt===null?um(r,n,i):Yg(r,Nt.memoizedState,n,i)},useTransition:function(){var n=lm(Ao)[0],i=In().memoizedState;return[typeof n=="boolean"?n:vc(n),i]},useSyncExternalStore:Sg,useId:Xg,useHostTransitionStatus:hm,useFormState:Hg,useActionState:Hg,useOptimistic:function(n,i){var r=In();return Nt!==null?Cg(r,Nt,n,i):(r.baseState=n,[n,r.queue.dispatch])},useMemoCache:im,useCacheRefresh:qg},or=null,xc=0;function gd(n){var i=xc;return xc+=1,or===null&&(or=[]),dg(or,n,i)}function Hc(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function Id(n,i){throw i.$$typeof===T?Error(o(525)):(n=Object.prototype.toString.call(i),Error(o(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function tI(n){var i=n._init;return i(n._payload)}function nI(n){function i(te,q){if(n){var ie=te.deletions;ie===null?(te.deletions=[q],te.flags|=16):ie.push(q)}}function r(te,q){if(!n)return null;for(;q!==null;)i(te,q),q=q.sibling;return null}function u(te){for(var q=new Map;te!==null;)te.key!==null?q.set(te.key,te):q.set(te.index,te),te=te.sibling;return q}function E(te,q){return te=uo(te,q),te.index=0,te.sibling=null,te}function A(te,q,ie){return te.index=ie,n?(ie=te.alternate,ie!==null?(ie=ie.index,ie<q?(te.flags|=67108866,q):ie):(te.flags|=67108866,q)):(te.flags|=1048576,q)}function b(te){return n&&te.alternate===null&&(te.flags|=67108866),te}function v(te,q,ie,Te){return q===null||q.tag!==6?(q=HE(ie,te.mode,Te),q.return=te,q):(q=E(q,ie),q.return=te,q)}function F(te,q,ie,Te){var ye=ie.type;return ye===_?Ae(te,q,ie.props.children,Te,ie.key):q!==null&&(q.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===K&&tI(ye)===q.type)?(q=E(q,ie.props),Hc(q,ie),q.return=te,q):(q=ad(ie.type,ie.key,ie.props,null,te.mode,Te),Hc(q,ie),q.return=te,q)}function re(te,q,ie,Te){return q===null||q.tag!==4||q.stateNode.containerInfo!==ie.containerInfo||q.stateNode.implementation!==ie.implementation?(q=kE(ie,te.mode,Te),q.return=te,q):(q=E(q,ie.children||[]),q.return=te,q)}function Ae(te,q,ie,Te,ye){return q===null||q.tag!==7?(q=Pl(ie,te.mode,Te,ye),q.return=te,q):(q=E(q,ie),q.return=te,q)}function Se(te,q,ie){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=HE(""+q,te.mode,ie),q.return=te,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case S:return ie=ad(q.type,q.key,q.props,null,te.mode,ie),Hc(ie,q),ie.return=te,ie;case g:return q=kE(q,te.mode,ie),q.return=te,q;case K:var Te=q._init;return q=Te(q._payload),Se(te,q,ie)}if(ce(q)||j(q))return q=Pl(q,te.mode,ie,null),q.return=te,q;if(typeof q.then=="function")return Se(te,gd(q),ie);if(q.$$typeof===P)return Se(te,sd(te,q),ie);Id(te,q)}return null}function ue(te,q,ie,Te){var ye=q!==null?q.key:null;if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return ye!==null?null:v(te,q,""+ie,Te);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case S:return ie.key===ye?F(te,q,ie,Te):null;case g:return ie.key===ye?re(te,q,ie,Te):null;case K:return ye=ie._init,ie=ye(ie._payload),ue(te,q,ie,Te)}if(ce(ie)||j(ie))return ye!==null?null:Ae(te,q,ie,Te,null);if(typeof ie.then=="function")return ue(te,q,gd(ie),Te);if(ie.$$typeof===P)return ue(te,q,sd(te,ie),Te);Id(te,ie)}return null}function he(te,q,ie,Te,ye){if(typeof Te=="string"&&Te!==""||typeof Te=="number"||typeof Te=="bigint")return te=te.get(ie)||null,v(q,te,""+Te,ye);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case S:return te=te.get(Te.key===null?ie:Te.key)||null,F(q,te,Te,ye);case g:return te=te.get(Te.key===null?ie:Te.key)||null,re(q,te,Te,ye);case K:var Qe=Te._init;return Te=Qe(Te._payload),he(te,q,ie,Te,ye)}if(ce(Te)||j(Te))return te=te.get(ie)||null,Ae(q,te,Te,ye,null);if(typeof Te.then=="function")return he(te,q,ie,gd(Te),ye);if(Te.$$typeof===P)return he(te,q,ie,sd(q,Te),ye);Id(q,Te)}return null}function Fe(te,q,ie,Te){for(var ye=null,Qe=null,xe=q,we=q=0,wn=null;xe!==null&&we<ie.length;we++){xe.index>we?(wn=xe,xe=null):wn=xe.sibling;var mt=ue(te,xe,ie[we],Te);if(mt===null){xe===null&&(xe=wn);break}n&&xe&&mt.alternate===null&&i(te,xe),q=A(mt,q,we),Qe===null?ye=mt:Qe.sibling=mt,Qe=mt,xe=wn}if(we===ie.length)return r(te,xe),At&&Gl(te,we),ye;if(xe===null){for(;we<ie.length;we++)xe=Se(te,ie[we],Te),xe!==null&&(q=A(xe,q,we),Qe===null?ye=xe:Qe.sibling=xe,Qe=xe);return At&&Gl(te,we),ye}for(xe=u(xe);we<ie.length;we++)wn=he(xe,te,we,ie[we],Te),wn!==null&&(n&&wn.alternate!==null&&xe.delete(wn.key===null?we:wn.key),q=A(wn,q,we),Qe===null?ye=wn:Qe.sibling=wn,Qe=wn);return n&&xe.forEach(function(il){return i(te,il)}),At&&Gl(te,we),ye}function Pe(te,q,ie,Te){if(ie==null)throw Error(o(151));for(var ye=null,Qe=null,xe=q,we=q=0,wn=null,mt=ie.next();xe!==null&&!mt.done;we++,mt=ie.next()){xe.index>we?(wn=xe,xe=null):wn=xe.sibling;var il=ue(te,xe,mt.value,Te);if(il===null){xe===null&&(xe=wn);break}n&&xe&&il.alternate===null&&i(te,xe),q=A(il,q,we),Qe===null?ye=il:Qe.sibling=il,Qe=il,xe=wn}if(mt.done)return r(te,xe),At&&Gl(te,we),ye;if(xe===null){for(;!mt.done;we++,mt=ie.next())mt=Se(te,mt.value,Te),mt!==null&&(q=A(mt,q,we),Qe===null?ye=mt:Qe.sibling=mt,Qe=mt);return At&&Gl(te,we),ye}for(xe=u(xe);!mt.done;we++,mt=ie.next())mt=he(xe,te,we,mt.value,Te),mt!==null&&(n&&mt.alternate!==null&&xe.delete(mt.key===null?we:mt.key),q=A(mt,q,we),Qe===null?ye=mt:Qe.sibling=mt,Qe=mt);return n&&xe.forEach(function(OM){return i(te,OM)}),At&&Gl(te,we),ye}function bt(te,q,ie,Te){if(typeof ie=="object"&&ie!==null&&ie.type===_&&ie.key===null&&(ie=ie.props.children),typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case S:e:{for(var ye=ie.key;q!==null;){if(q.key===ye){if(ye=ie.type,ye===_){if(q.tag===7){r(te,q.sibling),Te=E(q,ie.props.children),Te.return=te,te=Te;break e}}else if(q.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===K&&tI(ye)===q.type){r(te,q.sibling),Te=E(q,ie.props),Hc(Te,ie),Te.return=te,te=Te;break e}r(te,q);break}else i(te,q);q=q.sibling}ie.type===_?(Te=Pl(ie.props.children,te.mode,Te,ie.key),Te.return=te,te=Te):(Te=ad(ie.type,ie.key,ie.props,null,te.mode,Te),Hc(Te,ie),Te.return=te,te=Te)}return b(te);case g:e:{for(ye=ie.key;q!==null;){if(q.key===ye)if(q.tag===4&&q.stateNode.containerInfo===ie.containerInfo&&q.stateNode.implementation===ie.implementation){r(te,q.sibling),Te=E(q,ie.children||[]),Te.return=te,te=Te;break e}else{r(te,q);break}else i(te,q);q=q.sibling}Te=kE(ie,te.mode,Te),Te.return=te,te=Te}return b(te);case K:return ye=ie._init,ie=ye(ie._payload),bt(te,q,ie,Te)}if(ce(ie))return Fe(te,q,ie,Te);if(j(ie)){if(ye=j(ie),typeof ye!="function")throw Error(o(150));return ie=ye.call(ie),Pe(te,q,ie,Te)}if(typeof ie.then=="function")return bt(te,q,gd(ie),Te);if(ie.$$typeof===P)return bt(te,q,sd(te,ie),Te);Id(te,ie)}return typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint"?(ie=""+ie,q!==null&&q.tag===6?(r(te,q.sibling),Te=E(q,ie),Te.return=te,te=Te):(r(te,q),Te=HE(ie,te.mode,Te),Te.return=te,te=Te),b(te)):r(te,q)}return function(te,q,ie,Te){try{xc=0;var ye=bt(te,q,ie,Te);return or=null,ye}catch(xe){if(xe===Nc||xe===cd)throw xe;var Qe=Pa(29,xe,null,te.mode);return Qe.lanes=Te,Qe.return=te,Qe}finally{}}}var lr=nI(!0),aI=nI(!1),oi=ee(null),Bi=null;function zo(n){var i=n.alternate;W(yn,yn.current&1),W(oi,n),Bi===null&&(i===null||tr.current!==null||i.memoizedState!==null)&&(Bi=n)}function iI(n){if(n.tag===22){if(W(yn,yn.current),W(oi,n),Bi===null){var i=n.alternate;i!==null&&i.memoizedState!==null&&(Bi=n)}}else Yo()}function Yo(){W(yn,yn.current),W(oi,oi.current)}function Ro(n){de(oi),Bi===n&&(Bi=null),de(yn)}var yn=ee(0);function _d(n){for(var i=n;i!==null;){if(i.tag===13){var r=i.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||aA(r)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function Em(n,i,r,u){i=n.memoizedState,r=r(u,i),r=r==null?i:R({},i,r),n.memoizedState=r,n.lanes===0&&(n.updateQueue.baseState=r)}var mm={enqueueSetState:function(n,i,r){n=n._reactInternals;var u=Fa(),E=Bo(u);E.payload=i,r!=null&&(E.callback=r),i=Fo(n,E,u),i!==null&&(ja(i,n,u),bc(i,n,u))},enqueueReplaceState:function(n,i,r){n=n._reactInternals;var u=Fa(),E=Bo(u);E.tag=1,E.payload=i,r!=null&&(E.callback=r),i=Fo(n,E,u),i!==null&&(ja(i,n,u),bc(i,n,u))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var r=Fa(),u=Bo(r);u.tag=2,i!=null&&(u.callback=i),i=Fo(n,u,r),i!==null&&(ja(i,n,r),bc(i,n,r))}};function oI(n,i,r,u,E,A,b){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,A,b):i.prototype&&i.prototype.isPureReactComponent?!Ac(r,u)||!Ac(E,A):!0}function lI(n,i,r,u){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(r,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(r,u),i.state!==n&&mm.enqueueReplaceState(i,i.state,null)}function Vl(n,i){var r=i;if("ref"in i){r={};for(var u in i)u!=="ref"&&(r[u]=i[u])}if(n=n.defaultProps){r===i&&(r=R({},r));for(var E in n)r[E]===void 0&&(r[E]=n[E])}return r}var pd=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function sI(n){pd(n)}function rI(n){console.error(n)}function cI(n){pd(n)}function Nd(n,i){try{var r=n.onUncaughtError;r(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function uI(n,i,r){try{var u=n.onCaughtError;u(r.value,{componentStack:r.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function Am(n,i,r){return r=Bo(r),r.tag=3,r.payload={element:null},r.callback=function(){Nd(n,i)},r}function dI(n){return n=Bo(n),n.tag=3,n}function hI(n,i,r,u){var E=r.type.getDerivedStateFromError;if(typeof E=="function"){var A=u.value;n.payload=function(){return E(A)},n.callback=function(){uI(i,r,u)}}var b=r.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(n.callback=function(){uI(i,r,u),typeof E!="function"&&(Zo===null?Zo=new Set([this]):Zo.add(this));var v=u.stack;this.componentDidCatch(u.value,{componentStack:v!==null?v:""})})}function Ov(n,i,r,u,E){if(r.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=r.alternate,i!==null&&Ic(i,r,E,!0),r=oi.current,r!==null){switch(r.tag){case 13:return Bi===null?Bm():r.alternate===null&&en===0&&(en=3),r.flags&=-257,r.flags|=65536,r.lanes=E,u===KE?r.flags|=16384:(i=r.updateQueue,i===null?r.updateQueue=new Set([u]):i.add(u),jm(n,u,E)),!1;case 22:return r.flags|=65536,u===KE?r.flags|=16384:(i=r.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},r.updateQueue=i):(r=i.retryQueue,r===null?i.retryQueue=new Set([u]):r.add(u)),jm(n,u,E)),!1}throw Error(o(435,r.tag))}return jm(n,u,E),Bm(),!1}if(At)return i=oi.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=E,u!==wE&&(n=Error(o(422),{cause:u}),gc(ti(n,r)))):(u!==wE&&(i=Error(o(423),{cause:u}),gc(ti(i,r))),n=n.current.alternate,n.flags|=65536,E&=-E,n.lanes|=E,u=ti(u,r),E=Am(n.stateNode,u,E),XE(n,E),en!==4&&(en=2)),!1;var A=Error(o(520),{cause:u});if(A=ti(A,r),Fc===null?Fc=[A]:Fc.push(A),en!==4&&(en=2),i===null)return!0;u=ti(u,r),r=i;do{switch(r.tag){case 3:return r.flags|=65536,n=E&-E,r.lanes|=n,n=Am(r.stateNode,u,n),XE(r,n),!1;case 1:if(i=r.type,A=r.stateNode,(r.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(Zo===null||!Zo.has(A))))return r.flags|=65536,E&=-E,r.lanes|=E,E=dI(E),hI(E,n,r,u),XE(r,E),!1}r=r.return}while(r!==null);return!1}var fI=Error(o(461)),Un=!1;function Wn(n,i,r,u){i.child=n===null?aI(i,null,r,u):lr(i,n.child,r,u)}function EI(n,i,r,u,E){r=r.render;var A=i.ref;if("ref"in u){var b={};for(var v in u)v!=="ref"&&(b[v]=u[v])}else b=u;return zl(i),u=JE(n,i,r,b,A,E),v=em(),n!==null&&!Un?(tm(n,i,E),To(n,i,E)):(At&&v&&UE(i),i.flags|=1,Wn(n,i,u,E),i.child)}function mI(n,i,r,u,E){if(n===null){var A=r.type;return typeof A=="function"&&!xE(A)&&A.defaultProps===void 0&&r.compare===null?(i.tag=15,i.type=A,AI(n,i,A,u,E)):(n=ad(r.type,null,u,i,i.mode,E),n.ref=i.ref,n.return=i,i.child=n)}if(A=n.child,!Nm(n,E)){var b=A.memoizedProps;if(r=r.compare,r=r!==null?r:Ac,r(b,u)&&n.ref===i.ref)return To(n,i,E)}return i.flags|=1,n=uo(A,u),n.ref=i.ref,n.return=i,i.child=n}function AI(n,i,r,u,E){if(n!==null){var A=n.memoizedProps;if(Ac(A,u)&&n.ref===i.ref)if(Un=!1,i.pendingProps=u=A,Nm(n,E))(n.flags&131072)!==0&&(Un=!0);else return i.lanes=n.lanes,To(n,i,E)}return Rm(n,i,r,u,E)}function RI(n,i,r){var u=i.pendingProps,E=u.children,A=n!==null?n.memoizedState:null;if(u.mode==="hidden"){if((i.flags&128)!==0){if(u=A!==null?A.baseLanes|r:r,n!==null){for(E=i.child=n.child,A=0;E!==null;)A=A|E.lanes|E.childLanes,E=E.sibling;i.childLanes=A&~u}else i.childLanes=0,i.child=null;return TI(n,i,u,r)}if((r&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&rd(i,A!==null?A.cachePool:null),A!==null?Ag(i,A):ZE(),iI(i);else return i.lanes=i.childLanes=536870912,TI(n,i,A!==null?A.baseLanes|r:r,r)}else A!==null?(rd(i,A.cachePool),Ag(i,A),Yo(),i.memoizedState=null):(n!==null&&rd(i,null),ZE(),Yo());return Wn(n,i,E,r),i.child}function TI(n,i,r,u){var E=YE();return E=E===null?null:{parent:Dn._currentValue,pool:E},i.memoizedState={baseLanes:r,cachePool:E},n!==null&&rd(i,null),ZE(),iI(i),n!==null&&Ic(n,i,u,!0),null}function Cd(n,i){var r=i.ref;if(r===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(o(284));(n===null||n.ref!==r)&&(i.flags|=4194816)}}function Rm(n,i,r,u,E){return zl(i),r=JE(n,i,r,u,void 0,E),u=em(),n!==null&&!Un?(tm(n,i,E),To(n,i,E)):(At&&u&&UE(i),i.flags|=1,Wn(n,i,r,E),i.child)}function SI(n,i,r,u,E,A){return zl(i),i.updateQueue=null,r=Tg(i,u,r,E),Rg(n),u=em(),n!==null&&!Un?(tm(n,i,A),To(n,i,A)):(At&&u&&UE(i),i.flags|=1,Wn(n,i,r,A),i.child)}function gI(n,i,r,u,E){if(zl(i),i.stateNode===null){var A=Zs,b=r.contextType;typeof b=="object"&&b!==null&&(A=aa(b)),A=new r(u,A),i.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,A.updater=mm,i.stateNode=A,A._reactInternals=i,A=i.stateNode,A.props=u,A.state=i.memoizedState,A.refs={},VE(i),b=r.contextType,A.context=typeof b=="object"&&b!==null?aa(b):Zs,A.state=i.memoizedState,b=r.getDerivedStateFromProps,typeof b=="function"&&(Em(i,r,b,u),A.state=i.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(b=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),b!==A.state&&mm.enqueueReplaceState(A,A.state,null),Dc(i,u,A,E),Oc(),A.state=i.memoizedState),typeof A.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(n===null){A=i.stateNode;var v=i.memoizedProps,F=Vl(r,v);A.props=F;var re=A.context,Ae=r.contextType;b=Zs,typeof Ae=="object"&&Ae!==null&&(b=aa(Ae));var Se=r.getDerivedStateFromProps;Ae=typeof Se=="function"||typeof A.getSnapshotBeforeUpdate=="function",v=i.pendingProps!==v,Ae||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(v||re!==b)&&lI(i,A,u,b),Go=!1;var ue=i.memoizedState;A.state=ue,Dc(i,u,A,E),Oc(),re=i.memoizedState,v||ue!==re||Go?(typeof Se=="function"&&(Em(i,r,Se,u),re=i.memoizedState),(F=Go||oI(i,r,F,u,ue,re,b))?(Ae||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(i.flags|=4194308)):(typeof A.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=re),A.props=u,A.state=re,A.context=b,u=F):(typeof A.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{A=i.stateNode,WE(n,i),b=i.memoizedProps,Ae=Vl(r,b),A.props=Ae,Se=i.pendingProps,ue=A.context,re=r.contextType,F=Zs,typeof re=="object"&&re!==null&&(F=aa(re)),v=r.getDerivedStateFromProps,(re=typeof v=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(b!==Se||ue!==F)&&lI(i,A,u,F),Go=!1,ue=i.memoizedState,A.state=ue,Dc(i,u,A,E),Oc();var he=i.memoizedState;b!==Se||ue!==he||Go||n!==null&&n.dependencies!==null&&ld(n.dependencies)?(typeof v=="function"&&(Em(i,r,v,u),he=i.memoizedState),(Ae=Go||oI(i,r,Ae,u,ue,he,F)||n!==null&&n.dependencies!==null&&ld(n.dependencies))?(re||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(u,he,F),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(u,he,F)),typeof A.componentDidUpdate=="function"&&(i.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof A.componentDidUpdate!="function"||b===n.memoizedProps&&ue===n.memoizedState||(i.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||b===n.memoizedProps&&ue===n.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=he),A.props=u,A.state=he,A.context=F,u=Ae):(typeof A.componentDidUpdate!="function"||b===n.memoizedProps&&ue===n.memoizedState||(i.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||b===n.memoizedProps&&ue===n.memoizedState||(i.flags|=1024),u=!1)}return A=u,Cd(n,i),u=(i.flags&128)!==0,A||u?(A=i.stateNode,r=u&&typeof r.getDerivedStateFromError!="function"?null:A.render(),i.flags|=1,n!==null&&u?(i.child=lr(i,n.child,null,E),i.child=lr(i,null,r,E)):Wn(n,i,r,E),i.memoizedState=A.state,n=i.child):n=To(n,i,E),n}function II(n,i,r,u){return Sc(),i.flags|=256,Wn(n,i,r,u),i.child}var Tm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Sm(n){return{baseLanes:n,cachePool:rg()}}function gm(n,i,r){return n=n!==null?n.childLanes&~r:0,i&&(n|=li),n}function _I(n,i,r){var u=i.pendingProps,E=!1,A=(i.flags&128)!==0,b;if((b=A)||(b=n!==null&&n.memoizedState===null?!1:(yn.current&2)!==0),b&&(E=!0,i.flags&=-129),b=(i.flags&32)!==0,i.flags&=-33,n===null){if(At){if(E?zo(i):Yo(),At){var v=Jt,F;if(F=v){e:{for(F=v,v=Gi;F.nodeType!==8;){if(!v){v=null;break e}if(F=Ci(F.nextSibling),F===null){v=null;break e}}v=F}v!==null?(i.memoizedState={dehydrated:v,treeContext:wl!==null?{id:ho,overflow:fo}:null,retryLane:536870912,hydrationErrors:null},F=Pa(18,null,null,0),F.stateNode=v,F.return=i,i.child=F,ra=i,Jt=null,F=!0):F=!1}F||Fl(i)}if(v=i.memoizedState,v!==null&&(v=v.dehydrated,v!==null))return aA(v)?i.lanes=32:i.lanes=536870912,null;Ro(i)}return v=u.children,u=u.fallback,E?(Yo(),E=i.mode,v=bd({mode:"hidden",children:v},E),u=Pl(u,E,r,null),v.return=i,u.return=i,v.sibling=u,i.child=v,E=i.child,E.memoizedState=Sm(r),E.childLanes=gm(n,b,r),i.memoizedState=Tm,u):(zo(i),Im(i,v))}if(F=n.memoizedState,F!==null&&(v=F.dehydrated,v!==null)){if(A)i.flags&256?(zo(i),i.flags&=-257,i=_m(n,i,r)):i.memoizedState!==null?(Yo(),i.child=n.child,i.flags|=128,i=null):(Yo(),E=u.fallback,v=i.mode,u=bd({mode:"visible",children:u.children},v),E=Pl(E,v,r,null),E.flags|=2,u.return=i,E.return=i,u.sibling=E,i.child=u,lr(i,n.child,null,r),u=i.child,u.memoizedState=Sm(r),u.childLanes=gm(n,b,r),i.memoizedState=Tm,i=E);else if(zo(i),aA(v)){if(b=v.nextSibling&&v.nextSibling.dataset,b)var re=b.dgst;b=re,u=Error(o(419)),u.stack="",u.digest=b,gc({value:u,source:null,stack:null}),i=_m(n,i,r)}else if(Un||Ic(n,i,r,!1),b=(r&n.childLanes)!==0,Un||b){if(b=xt,b!==null&&(u=r&-r,u=(u&42)!==0?1:lc(u),u=(u&(b.suspendedLanes|r))!==0?0:u,u!==0&&u!==F.retryLane))throw F.retryLane=u,qs(n,u),ja(b,n,u),fI;v.data==="$?"||Bm(),i=_m(n,i,r)}else v.data==="$?"?(i.flags|=192,i.child=n.child,i=null):(n=F.treeContext,Jt=Ci(v.nextSibling),ra=i,At=!0,Bl=null,Gi=!1,n!==null&&(ai[ii++]=ho,ai[ii++]=fo,ai[ii++]=wl,ho=n.id,fo=n.overflow,wl=i),i=Im(i,u.children),i.flags|=4096);return i}return E?(Yo(),E=u.fallback,v=i.mode,F=n.child,re=F.sibling,u=uo(F,{mode:"hidden",children:u.children}),u.subtreeFlags=F.subtreeFlags&65011712,re!==null?E=uo(re,E):(E=Pl(E,v,r,null),E.flags|=2),E.return=i,u.return=i,u.sibling=E,i.child=u,u=E,E=i.child,v=n.child.memoizedState,v===null?v=Sm(r):(F=v.cachePool,F!==null?(re=Dn._currentValue,F=F.parent!==re?{parent:re,pool:re}:F):F=rg(),v={baseLanes:v.baseLanes|r,cachePool:F}),E.memoizedState=v,E.childLanes=gm(n,b,r),i.memoizedState=Tm,u):(zo(i),r=n.child,n=r.sibling,r=uo(r,{mode:"visible",children:u.children}),r.return=i,r.sibling=null,n!==null&&(b=i.deletions,b===null?(i.deletions=[n],i.flags|=16):b.push(n)),i.child=r,i.memoizedState=null,r)}function Im(n,i){return i=bd({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function bd(n,i){return n=Pa(22,n,null,i),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function _m(n,i,r){return lr(i,n.child,null,r),n=Im(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function pI(n,i,r){n.lanes|=i;var u=n.alternate;u!==null&&(u.lanes|=i),BE(n.return,i,r)}function pm(n,i,r,u,E){var A=n.memoizedState;A===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:r,tailMode:E}:(A.isBackwards=i,A.rendering=null,A.renderingStartTime=0,A.last=u,A.tail=r,A.tailMode=E)}function NI(n,i,r){var u=i.pendingProps,E=u.revealOrder,A=u.tail;if(Wn(n,i,u.children,r),u=yn.current,(u&2)!==0)u=u&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&pI(n,r,i);else if(n.tag===19)pI(n,r,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}u&=1}switch(W(yn,u),E){case"forwards":for(r=i.child,E=null;r!==null;)n=r.alternate,n!==null&&_d(n)===null&&(E=r),r=r.sibling;r=E,r===null?(E=i.child,i.child=null):(E=r.sibling,r.sibling=null),pm(i,!1,E,r,A);break;case"backwards":for(r=null,E=i.child,i.child=null;E!==null;){if(n=E.alternate,n!==null&&_d(n)===null){i.child=E;break}n=E.sibling,E.sibling=r,r=E,E=n}pm(i,!0,r,null,A);break;case"together":pm(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function To(n,i,r){if(n!==null&&(i.dependencies=n.dependencies),qo|=i.lanes,(r&i.childLanes)===0)if(n!==null){if(Ic(n,i,r,!1),(r&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(o(153));if(i.child!==null){for(n=i.child,r=uo(n,n.pendingProps),i.child=r,r.return=i;n.sibling!==null;)n=n.sibling,r=r.sibling=uo(n,n.pendingProps),r.return=i;r.sibling=null}return i.child}function Nm(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&ld(n)))}function Dv(n,i,r){switch(i.tag){case 3:ne(i,i.stateNode.containerInfo),wo(i,Dn,n.memoizedState.cache),Sc();break;case 27:case 5:Re(i);break;case 4:ne(i,i.stateNode.containerInfo);break;case 10:wo(i,i.type,i.memoizedProps.value);break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(zo(i),i.flags|=128,null):(r&i.child.childLanes)!==0?_I(n,i,r):(zo(i),n=To(n,i,r),n!==null?n.sibling:null);zo(i);break;case 19:var E=(n.flags&128)!==0;if(u=(r&i.childLanes)!==0,u||(Ic(n,i,r,!1),u=(r&i.childLanes)!==0),E){if(u)return NI(n,i,r);i.flags|=128}if(E=i.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),W(yn,yn.current),u)break;return null;case 22:case 23:return i.lanes=0,RI(n,i,r);case 24:wo(i,Dn,n.memoizedState.cache)}return To(n,i,r)}function CI(n,i,r){if(n!==null)if(n.memoizedProps!==i.pendingProps)Un=!0;else{if(!Nm(n,r)&&(i.flags&128)===0)return Un=!1,Dv(n,i,r);Un=(n.flags&131072)!==0}else Un=!1,At&&(i.flags&1048576)!==0&&tg(i,od,i.index);switch(i.lanes=0,i.tag){case 16:e:{n=i.pendingProps;var u=i.elementType,E=u._init;if(u=E(u._payload),i.type=u,typeof u=="function")xE(u)?(n=Vl(u,n),i.tag=1,i=gI(null,i,u,n,r)):(i.tag=0,i=Rm(null,i,u,n,r));else{if(u!=null){if(E=u.$$typeof,E===D){i.tag=11,i=EI(null,i,u,n,r);break e}else if(E===B){i.tag=14,i=mI(null,i,u,n,r);break e}}throw i=X(u)||u,Error(o(306,i,""))}}return i;case 0:return Rm(n,i,i.type,i.pendingProps,r);case 1:return u=i.type,E=Vl(u,i.pendingProps),gI(n,i,u,E,r);case 3:e:{if(ne(i,i.stateNode.containerInfo),n===null)throw Error(o(387));u=i.pendingProps;var A=i.memoizedState;E=A.element,WE(n,i),Dc(i,u,null,r);var b=i.memoizedState;if(u=b.cache,wo(i,Dn,u),u!==A.cache&&FE(i,[Dn],r,!0),Oc(),u=b.element,A.isDehydrated)if(A={element:u,isDehydrated:!1,cache:b.cache},i.updateQueue.baseState=A,i.memoizedState=A,i.flags&256){i=II(n,i,u,r);break e}else if(u!==E){E=ti(Error(o(424)),i),gc(E),i=II(n,i,u,r);break e}else{switch(n=i.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Jt=Ci(n.firstChild),ra=i,At=!0,Bl=null,Gi=!0,r=aI(i,null,u,r),i.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(Sc(),u===E){i=To(n,i,r);break e}Wn(n,i,u,r)}i=i.child}return i;case 26:return Cd(n,i),n===null?(r=y_(i.type,null,i.pendingProps,null))?i.memoizedState=r:At||(r=i.type,n=i.pendingProps,u=Bd(x.current).createElement(r),u[na]=i,u[ba]=n,qn(u,r,n),kn(u),i.stateNode=u):i.memoizedState=y_(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return Re(i),n===null&&At&&(u=i.stateNode=b_(i.type,i.pendingProps,x.current),ra=i,Gi=!0,E=Jt,Jo(i.type)?(iA=E,Jt=Ci(u.firstChild)):Jt=E),Wn(n,i,i.pendingProps.children,r),Cd(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&At&&((E=u=Jt)&&(u=nM(u,i.type,i.pendingProps,Gi),u!==null?(i.stateNode=u,ra=i,Jt=Ci(u.firstChild),Gi=!1,E=!0):E=!1),E||Fl(i)),Re(i),E=i.type,A=i.pendingProps,b=n!==null?n.memoizedProps:null,u=A.children,eA(E,A)?u=null:b!==null&&eA(E,b)&&(i.flags|=32),i.memoizedState!==null&&(E=JE(n,i,gv,null,null,r),Zc._currentValue=E),Cd(n,i),Wn(n,i,u,r),i.child;case 6:return n===null&&At&&((n=r=Jt)&&(r=aM(r,i.pendingProps,Gi),r!==null?(i.stateNode=r,ra=i,Jt=null,n=!0):n=!1),n||Fl(i)),null;case 13:return _I(n,i,r);case 4:return ne(i,i.stateNode.containerInfo),u=i.pendingProps,n===null?i.child=lr(i,null,u,r):Wn(n,i,u,r),i.child;case 11:return EI(n,i,i.type,i.pendingProps,r);case 7:return Wn(n,i,i.pendingProps,r),i.child;case 8:return Wn(n,i,i.pendingProps.children,r),i.child;case 12:return Wn(n,i,i.pendingProps.children,r),i.child;case 10:return u=i.pendingProps,wo(i,i.type,u.value),Wn(n,i,u.children,r),i.child;case 9:return E=i.type._context,u=i.pendingProps.children,zl(i),E=aa(E),u=u(E),i.flags|=1,Wn(n,i,u,r),i.child;case 14:return mI(n,i,i.type,i.pendingProps,r);case 15:return AI(n,i,i.type,i.pendingProps,r);case 19:return NI(n,i,r);case 31:return u=i.pendingProps,r=i.mode,u={mode:u.mode,children:u.children},n===null?(r=bd(u,r),r.ref=i.ref,i.child=r,r.return=i,i=r):(r=uo(n.child,u),r.ref=i.ref,i.child=r,r.return=i,i=r),i;case 22:return RI(n,i,r);case 24:return zl(i),u=aa(Dn),n===null?(E=YE(),E===null&&(E=xt,A=jE(),E.pooledCache=A,A.refCount++,A!==null&&(E.pooledCacheLanes|=r),E=A),i.memoizedState={parent:u,cache:E},VE(i),wo(i,Dn,E)):((n.lanes&r)!==0&&(WE(n,i),Dc(i,null,null,r),Oc()),E=n.memoizedState,A=i.memoizedState,E.parent!==u?(E={parent:u,cache:u},i.memoizedState=E,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=E),wo(i,Dn,u)):(u=A.cache,wo(i,Dn,u),u!==E.cache&&FE(i,[Dn],r,!0))),Wn(n,i,i.pendingProps.children,r),i.child;case 29:throw i.pendingProps}throw Error(o(156,i.tag))}function So(n){n.flags|=4}function bI(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!H_(i)){if(i=oi.current,i!==null&&((ct&4194048)===ct?Bi!==null:(ct&62914560)!==ct&&(ct&536870912)===0||i!==Bi))throw Cc=KE,cg;n.flags|=8192}}function Od(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?xs():536870912,n.lanes|=i,ur|=i)}function kc(n,i){if(!At)switch(n.tailMode){case"hidden":i=n.tail;for(var r=null;i!==null;)i.alternate!==null&&(r=i),i=i.sibling;r===null?n.tail=null:r.sibling=null;break;case"collapsed":r=n.tail;for(var u=null;r!==null;)r.alternate!==null&&(u=r),r=r.sibling;u===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function Vt(n){var i=n.alternate!==null&&n.alternate.child===n.child,r=0,u=0;if(i)for(var E=n.child;E!==null;)r|=E.lanes|E.childLanes,u|=E.subtreeFlags&65011712,u|=E.flags&65011712,E.return=n,E=E.sibling;else for(E=n.child;E!==null;)r|=E.lanes|E.childLanes,u|=E.subtreeFlags,u|=E.flags,E.return=n,E=E.sibling;return n.subtreeFlags|=u,n.childLanes=r,i}function yv(n,i,r){var u=i.pendingProps;switch(PE(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vt(i),null;case 1:return Vt(i),null;case 3:return r=i.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),mo(Dn),fe(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(Tc(i)?So(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,ig())),Vt(i),null;case 26:return r=i.memoizedState,n===null?(So(i),r!==null?(Vt(i),bI(i,r)):(Vt(i),i.flags&=-16777217)):r?r!==n.memoizedState?(So(i),Vt(i),bI(i,r)):(Vt(i),i.flags&=-16777217):(n.memoizedProps!==u&&So(i),Vt(i),i.flags&=-16777217),null;case 27:Ne(i),r=x.current;var E=i.type;if(n!==null&&i.stateNode!=null)n.memoizedProps!==u&&So(i);else{if(!u){if(i.stateNode===null)throw Error(o(166));return Vt(i),null}n=Y.current,Tc(i)?ng(i):(n=b_(E,u,r),i.stateNode=n,So(i))}return Vt(i),null;case 5:if(Ne(i),r=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==u&&So(i);else{if(!u){if(i.stateNode===null)throw Error(o(166));return Vt(i),null}if(n=Y.current,Tc(i))ng(i);else{switch(E=Bd(x.current),n){case 1:n=E.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:n=E.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":n=E.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":n=E.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":n=E.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof u.is=="string"?E.createElement("select",{is:u.is}):E.createElement("select"),u.multiple?n.multiple=!0:u.size&&(n.size=u.size);break;default:n=typeof u.is=="string"?E.createElement(r,{is:u.is}):E.createElement(r)}}n[na]=i,n[ba]=u;e:for(E=i.child;E!==null;){if(E.tag===5||E.tag===6)n.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===i)break e;for(;E.sibling===null;){if(E.return===null||E.return===i)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}i.stateNode=n;e:switch(qn(n,r,u),r){case"button":case"input":case"select":case"textarea":n=!!u.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&So(i)}}return Vt(i),i.flags&=-16777217,null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==u&&So(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(o(166));if(n=x.current,Tc(i)){if(n=i.stateNode,r=i.memoizedProps,u=null,E=ra,E!==null)switch(E.tag){case 27:case 5:u=E.memoizedProps}n[na]=i,n=!!(n.nodeValue===r||u!==null&&u.suppressHydrationWarning===!0||S_(n.nodeValue,r)),n||Fl(i)}else n=Bd(n).createTextNode(u),n[na]=i,i.stateNode=n}return Vt(i),null;case 13:if(u=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(E=Tc(i),u!==null&&u.dehydrated!==null){if(n===null){if(!E)throw Error(o(318));if(E=i.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(o(317));E[na]=i}else Sc(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Vt(i),E=!1}else E=ig(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=E),E=!0;if(!E)return i.flags&256?(Ro(i),i):(Ro(i),null)}if(Ro(i),(i.flags&128)!==0)return i.lanes=r,i;if(r=u!==null,n=n!==null&&n.memoizedState!==null,r){u=i.child,E=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(E=u.alternate.memoizedState.cachePool.pool);var A=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(A=u.memoizedState.cachePool.pool),A!==E&&(u.flags|=2048)}return r!==n&&r&&(i.child.flags|=8192),Od(i,i.updateQueue),Vt(i),null;case 4:return fe(),n===null&&qm(i.stateNode.containerInfo),Vt(i),null;case 10:return mo(i.type),Vt(i),null;case 19:if(de(yn),E=i.memoizedState,E===null)return Vt(i),null;if(u=(i.flags&128)!==0,A=E.rendering,A===null)if(u)kc(E,!1);else{if(en!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(A=_d(n),A!==null){for(i.flags|=128,kc(E,!1),n=A.updateQueue,i.updateQueue=n,Od(i,n),i.subtreeFlags=0,n=r,r=i.child;r!==null;)eg(r,n),r=r.sibling;return W(yn,yn.current&1|2),i.child}n=n.sibling}E.tail!==null&&De()>vd&&(i.flags|=128,u=!0,kc(E,!1),i.lanes=4194304)}else{if(!u)if(n=_d(A),n!==null){if(i.flags|=128,u=!0,n=n.updateQueue,i.updateQueue=n,Od(i,n),kc(E,!0),E.tail===null&&E.tailMode==="hidden"&&!A.alternate&&!At)return Vt(i),null}else 2*De()-E.renderingStartTime>vd&&r!==536870912&&(i.flags|=128,u=!0,kc(E,!1),i.lanes=4194304);E.isBackwards?(A.sibling=i.child,i.child=A):(n=E.last,n!==null?n.sibling=A:i.child=A,E.last=A)}return E.tail!==null?(i=E.tail,E.rendering=i,E.tail=i.sibling,E.renderingStartTime=De(),i.sibling=null,n=yn.current,W(yn,u?n&1|2:n&1),i):(Vt(i),null);case 22:case 23:return Ro(i),QE(),u=i.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(r&536870912)!==0&&(i.flags&128)===0&&(Vt(i),i.subtreeFlags&6&&(i.flags|=8192)):Vt(i),r=i.updateQueue,r!==null&&Od(i,r.retryQueue),r=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(r=n.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==r&&(i.flags|=2048),n!==null&&de(Yl),null;case 24:return r=null,n!==null&&(r=n.memoizedState.cache),i.memoizedState.cache!==r&&(i.flags|=2048),mo(Dn),Vt(i),null;case 25:return null;case 30:return null}throw Error(o(156,i.tag))}function vv(n,i){switch(PE(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return mo(Dn),fe(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return Ne(i),null;case 13:if(Ro(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(o(340));Sc()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return de(yn),null;case 4:return fe(),null;case 10:return mo(i.type),null;case 22:case 23:return Ro(i),QE(),n!==null&&de(Yl),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return mo(Dn),null;case 25:return null;default:return null}}function OI(n,i){switch(PE(i),i.tag){case 3:mo(Dn),fe();break;case 26:case 27:case 5:Ne(i);break;case 4:fe();break;case 13:Ro(i);break;case 19:de(yn);break;case 10:mo(i.type);break;case 22:case 23:Ro(i),QE(),n!==null&&de(Yl);break;case 24:mo(Dn)}}function Uc(n,i){try{var r=i.updateQueue,u=r!==null?r.lastEffect:null;if(u!==null){var E=u.next;r=E;do{if((r.tag&n)===n){u=void 0;var A=r.create,b=r.inst;u=A(),b.destroy=u}r=r.next}while(r!==E)}}catch(v){yt(i,i.return,v)}}function Ko(n,i,r){try{var u=i.updateQueue,E=u!==null?u.lastEffect:null;if(E!==null){var A=E.next;u=A;do{if((u.tag&n)===n){var b=u.inst,v=b.destroy;if(v!==void 0){b.destroy=void 0,E=i;var F=r,re=v;try{re()}catch(Ae){yt(E,F,Ae)}}}u=u.next}while(u!==A)}}catch(Ae){yt(i,i.return,Ae)}}function DI(n){var i=n.updateQueue;if(i!==null){var r=n.stateNode;try{mg(i,r)}catch(u){yt(n,n.return,u)}}}function yI(n,i,r){r.props=Vl(n.type,n.memoizedProps),r.state=n.memoizedState;try{r.componentWillUnmount()}catch(u){yt(n,i,u)}}function Pc(n,i){try{var r=n.ref;if(r!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof r=="function"?n.refCleanup=r(u):r.current=u}}catch(E){yt(n,i,E)}}function Fi(n,i){var r=n.ref,u=n.refCleanup;if(r!==null)if(typeof u=="function")try{u()}catch(E){yt(n,i,E)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(E){yt(n,i,E)}else r.current=null}function vI(n){var i=n.type,r=n.memoizedProps,u=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":r.autoFocus&&u.focus();break e;case"img":r.src?u.src=r.src:r.srcSet&&(u.srcset=r.srcSet)}}catch(E){yt(n,n.return,E)}}function Cm(n,i,r){try{var u=n.stateNode;Qv(u,n.type,r,i),u[ba]=i}catch(E){yt(n,n.return,E)}}function MI(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Jo(n.type)||n.tag===4}function bm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||MI(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Jo(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Om(n,i,r){var u=n.tag;if(u===5||u===6)n=n.stateNode,i?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(n,i):(i=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,i.appendChild(n),r=r._reactRootContainer,r!=null||i.onclick!==null||(i.onclick=Gd));else if(u!==4&&(u===27&&Jo(n.type)&&(r=n.stateNode,i=null),n=n.child,n!==null))for(Om(n,i,r),n=n.sibling;n!==null;)Om(n,i,r),n=n.sibling}function Dd(n,i,r){var u=n.tag;if(u===5||u===6)n=n.stateNode,i?r.insertBefore(n,i):r.appendChild(n);else if(u!==4&&(u===27&&Jo(n.type)&&(r=n.stateNode),n=n.child,n!==null))for(Dd(n,i,r),n=n.sibling;n!==null;)Dd(n,i,r),n=n.sibling}function LI(n){var i=n.stateNode,r=n.memoizedProps;try{for(var u=n.type,E=i.attributes;E.length;)i.removeAttributeNode(E[0]);qn(i,u,r),i[na]=n,i[ba]=r}catch(A){yt(n,n.return,A)}}var go=!1,mn=!1,Dm=!1,xI=typeof WeakSet=="function"?WeakSet:Set,Pn=null;function Mv(n,i){if(n=n.containerInfo,$m=Vd,n=YS(n),bE(n)){if("selectionStart"in n)var r={start:n.selectionStart,end:n.selectionEnd};else e:{r=(r=n.ownerDocument)&&r.defaultView||window;var u=r.getSelection&&r.getSelection();if(u&&u.rangeCount!==0){r=u.anchorNode;var E=u.anchorOffset,A=u.focusNode;u=u.focusOffset;try{r.nodeType,A.nodeType}catch{r=null;break e}var b=0,v=-1,F=-1,re=0,Ae=0,Se=n,ue=null;t:for(;;){for(var he;Se!==r||E!==0&&Se.nodeType!==3||(v=b+E),Se!==A||u!==0&&Se.nodeType!==3||(F=b+u),Se.nodeType===3&&(b+=Se.nodeValue.length),(he=Se.firstChild)!==null;)ue=Se,Se=he;for(;;){if(Se===n)break t;if(ue===r&&++re===E&&(v=b),ue===A&&++Ae===u&&(F=b),(he=Se.nextSibling)!==null)break;Se=ue,ue=Se.parentNode}Se=he}r=v===-1||F===-1?null:{start:v,end:F}}else r=null}r=r||{start:0,end:0}}else r=null;for(Jm={focusedElem:n,selectionRange:r},Vd=!1,Pn=i;Pn!==null;)if(i=Pn,n=i.child,(i.subtreeFlags&1024)!==0&&n!==null)n.return=i,Pn=n;else for(;Pn!==null;){switch(i=Pn,A=i.alternate,n=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&A!==null){n=void 0,r=i,E=A.memoizedProps,A=A.memoizedState,u=r.stateNode;try{var Fe=Vl(r.type,E,r.elementType===r.type);n=u.getSnapshotBeforeUpdate(Fe,A),u.__reactInternalSnapshotBeforeUpdate=n}catch(Pe){yt(r,r.return,Pe)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,r=n.nodeType,r===9)nA(n);else if(r===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":nA(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(o(163))}if(n=i.sibling,n!==null){n.return=i.return,Pn=n;break}Pn=i.return}}function HI(n,i,r){var u=r.flags;switch(r.tag){case 0:case 11:case 15:Vo(n,r),u&4&&Uc(5,r);break;case 1:if(Vo(n,r),u&4)if(n=r.stateNode,i===null)try{n.componentDidMount()}catch(b){yt(r,r.return,b)}else{var E=Vl(r.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(E,i,n.__reactInternalSnapshotBeforeUpdate)}catch(b){yt(r,r.return,b)}}u&64&&DI(r),u&512&&Pc(r,r.return);break;case 3:if(Vo(n,r),u&64&&(n=r.updateQueue,n!==null)){if(i=null,r.child!==null)switch(r.child.tag){case 27:case 5:i=r.child.stateNode;break;case 1:i=r.child.stateNode}try{mg(n,i)}catch(b){yt(r,r.return,b)}}break;case 27:i===null&&u&4&&LI(r);case 26:case 5:Vo(n,r),i===null&&u&4&&vI(r),u&512&&Pc(r,r.return);break;case 12:Vo(n,r);break;case 13:Vo(n,r),u&4&&PI(n,r),u&64&&(n=r.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(r=Bv.bind(null,r),iM(n,r))));break;case 22:if(u=r.memoizedState!==null||go,!u){i=i!==null&&i.memoizedState!==null||mn,E=go;var A=mn;go=u,(mn=i)&&!A?Wo(n,r,(r.subtreeFlags&8772)!==0):Vo(n,r),go=E,mn=A}break;case 30:break;default:Vo(n,r)}}function kI(n){var i=n.alternate;i!==null&&(n.alternate=null,kI(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&sE(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Ft=null,ya=!1;function Io(n,i,r){for(r=r.child;r!==null;)UI(n,i,r),r=r.sibling}function UI(n,i,r){if(rt&&typeof rt.onCommitFiberUnmount=="function")try{rt.onCommitFiberUnmount(ko,r)}catch{}switch(r.tag){case 26:mn||Fi(r,i),Io(n,i,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:mn||Fi(r,i);var u=Ft,E=ya;Jo(r.type)&&(Ft=r.stateNode,ya=!1),Io(n,i,r),Vc(r.stateNode),Ft=u,ya=E;break;case 5:mn||Fi(r,i);case 6:if(u=Ft,E=ya,Ft=null,Io(n,i,r),Ft=u,ya=E,Ft!==null)if(ya)try{(Ft.nodeType===9?Ft.body:Ft.nodeName==="HTML"?Ft.ownerDocument.body:Ft).removeChild(r.stateNode)}catch(A){yt(r,i,A)}else try{Ft.removeChild(r.stateNode)}catch(A){yt(r,i,A)}break;case 18:Ft!==null&&(ya?(n=Ft,N_(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,r.stateNode),eu(n)):N_(Ft,r.stateNode));break;case 4:u=Ft,E=ya,Ft=r.stateNode.containerInfo,ya=!0,Io(n,i,r),Ft=u,ya=E;break;case 0:case 11:case 14:case 15:mn||Ko(2,r,i),mn||Ko(4,r,i),Io(n,i,r);break;case 1:mn||(Fi(r,i),u=r.stateNode,typeof u.componentWillUnmount=="function"&&yI(r,i,u)),Io(n,i,r);break;case 21:Io(n,i,r);break;case 22:mn=(u=mn)||r.memoizedState!==null,Io(n,i,r),mn=u;break;default:Io(n,i,r)}}function PI(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{eu(n)}catch(r){yt(i,i.return,r)}}function Lv(n){switch(n.tag){case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new xI),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new xI),i;default:throw Error(o(435,n.tag))}}function ym(n,i){var r=Lv(n);i.forEach(function(u){var E=Fv.bind(null,n,u);r.has(u)||(r.add(u),u.then(E,E))})}function wa(n,i){var r=i.deletions;if(r!==null)for(var u=0;u<r.length;u++){var E=r[u],A=n,b=i,v=b;e:for(;v!==null;){switch(v.tag){case 27:if(Jo(v.type)){Ft=v.stateNode,ya=!1;break e}break;case 5:Ft=v.stateNode,ya=!1;break e;case 3:case 4:Ft=v.stateNode.containerInfo,ya=!0;break e}v=v.return}if(Ft===null)throw Error(o(160));UI(A,b,E),Ft=null,ya=!1,A=E.alternate,A!==null&&(A.return=null),E.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)wI(i,n),i=i.sibling}var Ni=null;function wI(n,i){var r=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:wa(i,n),Ga(n),u&4&&(Ko(3,n,n.return),Uc(3,n),Ko(5,n,n.return));break;case 1:wa(i,n),Ga(n),u&512&&(mn||r===null||Fi(r,r.return)),u&64&&go&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(r=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=r===null?u:r.concat(u))));break;case 26:var E=Ni;if(wa(i,n),Ga(n),u&512&&(mn||r===null||Fi(r,r.return)),u&4){var A=r!==null?r.memoizedState:null;if(u=n.memoizedState,r===null)if(u===null)if(n.stateNode===null){e:{u=n.type,r=n.memoizedProps,E=E.ownerDocument||E;t:switch(u){case"title":A=E.getElementsByTagName("title")[0],(!A||A[sc]||A[na]||A.namespaceURI==="http://www.w3.org/2000/svg"||A.hasAttribute("itemprop"))&&(A=E.createElement(u),E.head.insertBefore(A,E.querySelector("head > title"))),qn(A,u,r),A[na]=n,kn(A),u=A;break e;case"link":var b=L_("link","href",E).get(u+(r.href||""));if(b){for(var v=0;v<b.length;v++)if(A=b[v],A.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&A.getAttribute("rel")===(r.rel==null?null:r.rel)&&A.getAttribute("title")===(r.title==null?null:r.title)&&A.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){b.splice(v,1);break t}}A=E.createElement(u),qn(A,u,r),E.head.appendChild(A);break;case"meta":if(b=L_("meta","content",E).get(u+(r.content||""))){for(v=0;v<b.length;v++)if(A=b[v],A.getAttribute("content")===(r.content==null?null:""+r.content)&&A.getAttribute("name")===(r.name==null?null:r.name)&&A.getAttribute("property")===(r.property==null?null:r.property)&&A.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&A.getAttribute("charset")===(r.charSet==null?null:r.charSet)){b.splice(v,1);break t}}A=E.createElement(u),qn(A,u,r),E.head.appendChild(A);break;default:throw Error(o(468,u))}A[na]=n,kn(A),u=A}n.stateNode=u}else x_(E,n.type,n.stateNode);else n.stateNode=M_(E,u,n.memoizedProps);else A!==u?(A===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):A.count--,u===null?x_(E,n.type,n.stateNode):M_(E,u,n.memoizedProps)):u===null&&n.stateNode!==null&&Cm(n,n.memoizedProps,r.memoizedProps)}break;case 27:wa(i,n),Ga(n),u&512&&(mn||r===null||Fi(r,r.return)),r!==null&&u&4&&Cm(n,n.memoizedProps,r.memoizedProps);break;case 5:if(wa(i,n),Ga(n),u&512&&(mn||r===null||Fi(r,r.return)),n.flags&32){E=n.stateNode;try{js(E,"")}catch(he){yt(n,n.return,he)}}u&4&&n.stateNode!=null&&(E=n.memoizedProps,Cm(n,E,r!==null?r.memoizedProps:E)),u&1024&&(Dm=!0);break;case 6:if(wa(i,n),Ga(n),u&4){if(n.stateNode===null)throw Error(o(162));u=n.memoizedProps,r=n.stateNode;try{r.nodeValue=u}catch(he){yt(n,n.return,he)}}break;case 3:if(zd=null,E=Ni,Ni=Fd(i.containerInfo),wa(i,n),Ni=E,Ga(n),u&4&&r!==null&&r.memoizedState.isDehydrated)try{eu(i.containerInfo)}catch(he){yt(n,n.return,he)}Dm&&(Dm=!1,GI(n));break;case 4:u=Ni,Ni=Fd(n.stateNode.containerInfo),wa(i,n),Ga(n),Ni=u;break;case 12:wa(i,n),Ga(n);break;case 13:wa(i,n),Ga(n),n.child.flags&8192&&n.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(km=De()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,ym(n,u)));break;case 22:E=n.memoizedState!==null;var F=r!==null&&r.memoizedState!==null,re=go,Ae=mn;if(go=re||E,mn=Ae||F,wa(i,n),mn=Ae,go=re,Ga(n),u&8192)e:for(i=n.stateNode,i._visibility=E?i._visibility&-2:i._visibility|1,E&&(r===null||F||go||mn||Wl(n)),r=null,i=n;;){if(i.tag===5||i.tag===26){if(r===null){F=r=i;try{if(A=F.stateNode,E)b=A.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{v=F.stateNode;var Se=F.memoizedProps.style,ue=Se!=null&&Se.hasOwnProperty("display")?Se.display:null;v.style.display=ue==null||typeof ue=="boolean"?"":(""+ue).trim()}}catch(he){yt(F,F.return,he)}}}else if(i.tag===6){if(r===null){F=i;try{F.stateNode.nodeValue=E?"":F.memoizedProps}catch(he){yt(F,F.return,he)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;r===i&&(r=null),i=i.return}r===i&&(r=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=n.updateQueue,u!==null&&(r=u.retryQueue,r!==null&&(u.retryQueue=null,ym(n,r))));break;case 19:wa(i,n),Ga(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,ym(n,u)));break;case 30:break;case 21:break;default:wa(i,n),Ga(n)}}function Ga(n){var i=n.flags;if(i&2){try{for(var r,u=n.return;u!==null;){if(MI(u)){r=u;break}u=u.return}if(r==null)throw Error(o(160));switch(r.tag){case 27:var E=r.stateNode,A=bm(n);Dd(n,A,E);break;case 5:var b=r.stateNode;r.flags&32&&(js(b,""),r.flags&=-33);var v=bm(n);Dd(n,v,b);break;case 3:case 4:var F=r.stateNode.containerInfo,re=bm(n);Om(n,re,F);break;default:throw Error(o(161))}}catch(Ae){yt(n,n.return,Ae)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function GI(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;GI(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function Vo(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)HI(n,i.alternate,i),i=i.sibling}function Wl(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:Ko(4,i,i.return),Wl(i);break;case 1:Fi(i,i.return);var r=i.stateNode;typeof r.componentWillUnmount=="function"&&yI(i,i.return,r),Wl(i);break;case 27:Vc(i.stateNode);case 26:case 5:Fi(i,i.return),Wl(i);break;case 22:i.memoizedState===null&&Wl(i);break;case 30:Wl(i);break;default:Wl(i)}n=n.sibling}}function Wo(n,i,r){for(r=r&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,E=n,A=i,b=A.flags;switch(A.tag){case 0:case 11:case 15:Wo(E,A,r),Uc(4,A);break;case 1:if(Wo(E,A,r),u=A,E=u.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(re){yt(u,u.return,re)}if(u=A,E=u.updateQueue,E!==null){var v=u.stateNode;try{var F=E.shared.hiddenCallbacks;if(F!==null)for(E.shared.hiddenCallbacks=null,E=0;E<F.length;E++)Eg(F[E],v)}catch(re){yt(u,u.return,re)}}r&&b&64&&DI(A),Pc(A,A.return);break;case 27:LI(A);case 26:case 5:Wo(E,A,r),r&&u===null&&b&4&&vI(A),Pc(A,A.return);break;case 12:Wo(E,A,r);break;case 13:Wo(E,A,r),r&&b&4&&PI(E,A);break;case 22:A.memoizedState===null&&Wo(E,A,r),Pc(A,A.return);break;case 30:break;default:Wo(E,A,r)}i=i.sibling}}function vm(n,i){var r=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(r=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==r&&(n!=null&&n.refCount++,r!=null&&_c(r))}function Mm(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&_c(n))}function ji(n,i,r,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)BI(n,i,r,u),i=i.sibling}function BI(n,i,r,u){var E=i.flags;switch(i.tag){case 0:case 11:case 15:ji(n,i,r,u),E&2048&&Uc(9,i);break;case 1:ji(n,i,r,u);break;case 3:ji(n,i,r,u),E&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&_c(n)));break;case 12:if(E&2048){ji(n,i,r,u),n=i.stateNode;try{var A=i.memoizedProps,b=A.id,v=A.onPostCommit;typeof v=="function"&&v(b,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(F){yt(i,i.return,F)}}else ji(n,i,r,u);break;case 13:ji(n,i,r,u);break;case 23:break;case 22:A=i.stateNode,b=i.alternate,i.memoizedState!==null?A._visibility&2?ji(n,i,r,u):wc(n,i):A._visibility&2?ji(n,i,r,u):(A._visibility|=2,sr(n,i,r,u,(i.subtreeFlags&10256)!==0)),E&2048&&vm(b,i);break;case 24:ji(n,i,r,u),E&2048&&Mm(i.alternate,i);break;default:ji(n,i,r,u)}}function sr(n,i,r,u,E){for(E=E&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var A=n,b=i,v=r,F=u,re=b.flags;switch(b.tag){case 0:case 11:case 15:sr(A,b,v,F,E),Uc(8,b);break;case 23:break;case 22:var Ae=b.stateNode;b.memoizedState!==null?Ae._visibility&2?sr(A,b,v,F,E):wc(A,b):(Ae._visibility|=2,sr(A,b,v,F,E)),E&&re&2048&&vm(b.alternate,b);break;case 24:sr(A,b,v,F,E),E&&re&2048&&Mm(b.alternate,b);break;default:sr(A,b,v,F,E)}i=i.sibling}}function wc(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var r=n,u=i,E=u.flags;switch(u.tag){case 22:wc(r,u),E&2048&&vm(u.alternate,u);break;case 24:wc(r,u),E&2048&&Mm(u.alternate,u);break;default:wc(r,u)}i=i.sibling}}var Gc=8192;function rr(n){if(n.subtreeFlags&Gc)for(n=n.child;n!==null;)FI(n),n=n.sibling}function FI(n){switch(n.tag){case 26:rr(n),n.flags&Gc&&n.memoizedState!==null&&RM(Ni,n.memoizedState,n.memoizedProps);break;case 5:rr(n);break;case 3:case 4:var i=Ni;Ni=Fd(n.stateNode.containerInfo),rr(n),Ni=i;break;case 22:n.memoizedState===null&&(i=n.alternate,i!==null&&i.memoizedState!==null?(i=Gc,Gc=16777216,rr(n),Gc=i):rr(n));break;default:rr(n)}}function jI(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function Bc(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var r=0;r<i.length;r++){var u=i[r];Pn=u,YI(u,n)}jI(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)zI(n),n=n.sibling}function zI(n){switch(n.tag){case 0:case 11:case 15:Bc(n),n.flags&2048&&Ko(9,n,n.return);break;case 3:Bc(n);break;case 12:Bc(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,yd(n)):Bc(n);break;default:Bc(n)}}function yd(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var r=0;r<i.length;r++){var u=i[r];Pn=u,YI(u,n)}jI(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:Ko(8,i,i.return),yd(i);break;case 22:r=i.stateNode,r._visibility&2&&(r._visibility&=-3,yd(i));break;default:yd(i)}n=n.sibling}}function YI(n,i){for(;Pn!==null;){var r=Pn;switch(r.tag){case 0:case 11:case 15:Ko(8,r,i);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var u=r.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:_c(r.memoizedState.cache)}if(u=r.child,u!==null)u.return=r,Pn=u;else e:for(r=n;Pn!==null;){u=Pn;var E=u.sibling,A=u.return;if(kI(u),u===r){Pn=null;break e}if(E!==null){E.return=A,Pn=E;break e}Pn=A}}}var xv={getCacheForType:function(n){var i=aa(Dn),r=i.data.get(n);return r===void 0&&(r=n(),i.data.set(n,r)),r}},Hv=typeof WeakMap=="function"?WeakMap:Map,gt=0,xt=null,tt=null,ct=0,It=0,Ba=null,Xo=!1,cr=!1,Lm=!1,_o=0,en=0,qo=0,Xl=0,xm=0,li=0,ur=0,Fc=null,va=null,Hm=!1,km=0,vd=1/0,Md=null,Zo=null,Xn=0,Qo=null,dr=null,hr=0,Um=0,Pm=null,KI=null,jc=0,wm=null;function Fa(){if((gt&2)!==0&&ct!==0)return ct&-ct;if(w.T!==null){var n=Js;return n!==0?n:Km()}return sS()}function VI(){li===0&&(li=(ct&536870912)===0||At?Bu():536870912);var n=oi.current;return n!==null&&(n.flags|=32),li}function ja(n,i,r){(n===xt&&(It===2||It===9)||n.cancelPendingCommit!==null)&&(fr(n,0),$o(n,ct,li,!1)),Ll(n,r),((gt&2)===0||n!==xt)&&(n===xt&&((gt&2)===0&&(Xl|=r),en===4&&$o(n,ct,li,!1)),zi(n))}function WI(n,i,r){if((gt&6)!==0)throw Error(o(327));var u=!r&&(i&124)===0&&(i&n.expiredLanes)===0||Ml(n,i),E=u?Pv(n,i):Fm(n,i,!0),A=u;do{if(E===0){cr&&!u&&$o(n,i,0,!1);break}else{if(r=n.current.alternate,A&&!kv(r)){E=Fm(n,i,!1),A=!1;continue}if(E===2){if(A=i,n.errorRecoveryDisabledLanes&A)var b=0;else b=n.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){i=b;e:{var v=n;E=Fc;var F=v.current.memoizedState.isDehydrated;if(F&&(fr(v,b).flags|=256),b=Fm(v,b,!1),b!==2){if(Lm&&!F){v.errorRecoveryDisabledLanes|=A,Xl|=A,E=4;break e}A=va,va=E,A!==null&&(va===null?va=A:va.push.apply(va,A))}E=b}if(A=!1,E!==2)continue}}if(E===1){fr(n,0),$o(n,i,0,!0);break}e:{switch(u=n,A=E,A){case 0:case 1:throw Error(o(345));case 4:if((i&4194048)!==i)break;case 6:$o(u,i,li,!Xo);break e;case 2:va=null;break;case 3:case 5:break;default:throw Error(o(329))}if((i&62914560)===i&&(E=km+300-De(),10<E)){if($o(u,i,li,!Xo),Ls(u,0,!0)!==0)break e;u.timeoutHandle=__(XI.bind(null,u,r,va,Md,Hm,i,li,Xl,ur,Xo,A,2,-0,0),E);break e}XI(u,r,va,Md,Hm,i,li,Xl,ur,Xo,A,0,-0,0)}}break}while(!0);zi(n)}function XI(n,i,r,u,E,A,b,v,F,re,Ae,Se,ue,he){if(n.timeoutHandle=-1,Se=i.subtreeFlags,(Se&8192||(Se&16785408)===16785408)&&(qc={stylesheets:null,count:0,unsuspend:AM},FI(i),Se=TM(),Se!==null)){n.cancelPendingCommit=Se(t_.bind(null,n,i,A,r,u,E,b,v,F,Ae,1,ue,he)),$o(n,A,b,!re);return}t_(n,i,A,r,u,E,b,v,F)}function kv(n){for(var i=n;;){var r=i.tag;if((r===0||r===11||r===15)&&i.flags&16384&&(r=i.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var u=0;u<r.length;u++){var E=r[u],A=E.getSnapshot;E=E.value;try{if(!Ua(A(),E))return!1}catch{return!1}}if(r=i.child,i.subtreeFlags&16384&&r!==null)r.return=i,i=r;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function $o(n,i,r,u){i&=~xm,i&=~Xl,n.suspendedLanes|=i,n.pingedLanes&=~i,u&&(n.warmLanes|=i),u=n.expirationTimes;for(var E=i;0<E;){var A=31-Bt(E),b=1<<A;u[A]=-1,E&=~b}r!==0&&Fu(n,r,i)}function Ld(){return(gt&6)===0?(zc(0),!1):!0}function Gm(){if(tt!==null){if(It===0)var n=tt.return;else n=tt,Eo=jl=null,nm(n),or=null,xc=0,n=tt;for(;n!==null;)OI(n.alternate,n),n=n.return;tt=null}}function fr(n,i){var r=n.timeoutHandle;r!==-1&&(n.timeoutHandle=-1,Jv(r)),r=n.cancelPendingCommit,r!==null&&(n.cancelPendingCommit=null,r()),Gm(),xt=n,tt=r=uo(n.current,null),ct=i,It=0,Ba=null,Xo=!1,cr=Ml(n,i),Lm=!1,ur=li=xm=Xl=qo=en=0,va=Fc=null,Hm=!1,(i&8)!==0&&(i|=i&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=i;0<u;){var E=31-Bt(u),A=1<<E;i|=n[E],u&=~A}return _o=i,ed(),r}function qI(n,i){Ze=null,w.H=Sd,i===Nc||i===cd?(i=hg(),It=3):i===cg?(i=hg(),It=4):It=i===fI?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Ba=i,tt===null&&(en=1,Nd(n,ti(i,n.current)))}function ZI(){var n=w.H;return w.H=Sd,n===null?Sd:n}function QI(){var n=w.A;return w.A=xv,n}function Bm(){en=4,Xo||(ct&4194048)!==ct&&oi.current!==null||(cr=!0),(qo&134217727)===0&&(Xl&134217727)===0||xt===null||$o(xt,ct,li,!1)}function Fm(n,i,r){var u=gt;gt|=2;var E=ZI(),A=QI();(xt!==n||ct!==i)&&(Md=null,fr(n,i)),i=!1;var b=en;e:do try{if(It!==0&&tt!==null){var v=tt,F=Ba;switch(It){case 8:Gm(),b=6;break e;case 3:case 2:case 9:case 6:oi.current===null&&(i=!0);var re=It;if(It=0,Ba=null,Er(n,v,F,re),r&&cr){b=0;break e}break;default:re=It,It=0,Ba=null,Er(n,v,F,re)}}Uv(),b=en;break}catch(Ae){qI(n,Ae)}while(!0);return i&&n.shellSuspendCounter++,Eo=jl=null,gt=u,w.H=E,w.A=A,tt===null&&(xt=null,ct=0,ed()),b}function Uv(){for(;tt!==null;)$I(tt)}function Pv(n,i){var r=gt;gt|=2;var u=ZI(),E=QI();xt!==n||ct!==i?(Md=null,vd=De()+500,fr(n,i)):cr=Ml(n,i);e:do try{if(It!==0&&tt!==null){i=tt;var A=Ba;t:switch(It){case 1:It=0,Ba=null,Er(n,i,A,1);break;case 2:case 9:if(ug(A)){It=0,Ba=null,JI(i);break}i=function(){It!==2&&It!==9||xt!==n||(It=7),zi(n)},A.then(i,i);break e;case 3:It=7;break e;case 4:It=5;break e;case 7:ug(A)?(It=0,Ba=null,JI(i)):(It=0,Ba=null,Er(n,i,A,7));break;case 5:var b=null;switch(tt.tag){case 26:b=tt.memoizedState;case 5:case 27:var v=tt;if(!b||H_(b)){It=0,Ba=null;var F=v.sibling;if(F!==null)tt=F;else{var re=v.return;re!==null?(tt=re,xd(re)):tt=null}break t}}It=0,Ba=null,Er(n,i,A,5);break;case 6:It=0,Ba=null,Er(n,i,A,6);break;case 8:Gm(),en=6;break e;default:throw Error(o(462))}}wv();break}catch(Ae){qI(n,Ae)}while(!0);return Eo=jl=null,w.H=u,w.A=E,gt=r,tt!==null?0:(xt=null,ct=0,ed(),en)}function wv(){for(;tt!==null&&!ge();)$I(tt)}function $I(n){var i=CI(n.alternate,n,_o);n.memoizedProps=n.pendingProps,i===null?xd(n):tt=i}function JI(n){var i=n,r=i.alternate;switch(i.tag){case 15:case 0:i=SI(r,i,i.pendingProps,i.type,void 0,ct);break;case 11:i=SI(r,i,i.pendingProps,i.type.render,i.ref,ct);break;case 5:nm(i);default:OI(r,i),i=tt=eg(i,_o),i=CI(r,i,_o)}n.memoizedProps=n.pendingProps,i===null?xd(n):tt=i}function Er(n,i,r,u){Eo=jl=null,nm(i),or=null,xc=0;var E=i.return;try{if(Ov(n,E,i,r,ct)){en=1,Nd(n,ti(r,n.current)),tt=null;return}}catch(A){if(E!==null)throw tt=E,A;en=1,Nd(n,ti(r,n.current)),tt=null;return}i.flags&32768?(At||u===1?n=!0:cr||(ct&536870912)!==0?n=!1:(Xo=n=!0,(u===2||u===9||u===3||u===6)&&(u=oi.current,u!==null&&u.tag===13&&(u.flags|=16384))),e_(i,n)):xd(i)}function xd(n){var i=n;do{if((i.flags&32768)!==0){e_(i,Xo);return}n=i.return;var r=yv(i.alternate,i,_o);if(r!==null){tt=r;return}if(i=i.sibling,i!==null){tt=i;return}tt=i=n}while(i!==null);en===0&&(en=5)}function e_(n,i){do{var r=vv(n.alternate,n);if(r!==null){r.flags&=32767,tt=r;return}if(r=n.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!i&&(n=n.sibling,n!==null)){tt=n;return}tt=n=r}while(n!==null);en=6,tt=null}function t_(n,i,r,u,E,A,b,v,F){n.cancelPendingCommit=null;do Hd();while(Xn!==0);if((gt&6)!==0)throw Error(o(327));if(i!==null){if(i===n.current)throw Error(o(177));if(A=i.lanes|i.childLanes,A|=ME,iE(n,r,A,b,v,F),n===xt&&(tt=xt=null,ct=0),dr=i,Qo=n,hr=r,Um=A,Pm=E,KI=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,jv(Ca,function(){return l_(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=w.T,w.T=null,E=z.p,z.p=2,b=gt,gt|=4;try{Mv(n,i,r)}finally{gt=b,z.p=E,w.T=u}}Xn=1,n_(),a_(),i_()}}function n_(){if(Xn===1){Xn=0;var n=Qo,i=dr,r=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||r){r=w.T,w.T=null;var u=z.p;z.p=2;var E=gt;gt|=4;try{wI(i,n);var A=Jm,b=YS(n.containerInfo),v=A.focusedElem,F=A.selectionRange;if(b!==v&&v&&v.ownerDocument&&zS(v.ownerDocument.documentElement,v)){if(F!==null&&bE(v)){var re=F.start,Ae=F.end;if(Ae===void 0&&(Ae=re),"selectionStart"in v)v.selectionStart=re,v.selectionEnd=Math.min(Ae,v.value.length);else{var Se=v.ownerDocument||document,ue=Se&&Se.defaultView||window;if(ue.getSelection){var he=ue.getSelection(),Fe=v.textContent.length,Pe=Math.min(F.start,Fe),bt=F.end===void 0?Pe:Math.min(F.end,Fe);!he.extend&&Pe>bt&&(b=bt,bt=Pe,Pe=b);var te=jS(v,Pe),q=jS(v,bt);if(te&&q&&(he.rangeCount!==1||he.anchorNode!==te.node||he.anchorOffset!==te.offset||he.focusNode!==q.node||he.focusOffset!==q.offset)){var ie=Se.createRange();ie.setStart(te.node,te.offset),he.removeAllRanges(),Pe>bt?(he.addRange(ie),he.extend(q.node,q.offset)):(ie.setEnd(q.node,q.offset),he.addRange(ie))}}}}for(Se=[],he=v;he=he.parentNode;)he.nodeType===1&&Se.push({element:he,left:he.scrollLeft,top:he.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<Se.length;v++){var Te=Se[v];Te.element.scrollLeft=Te.left,Te.element.scrollTop=Te.top}}Vd=!!$m,Jm=$m=null}finally{gt=E,z.p=u,w.T=r}}n.current=i,Xn=2}}function a_(){if(Xn===2){Xn=0;var n=Qo,i=dr,r=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||r){r=w.T,w.T=null;var u=z.p;z.p=2;var E=gt;gt|=4;try{HI(n,i.alternate,i)}finally{gt=E,z.p=u,w.T=r}}Xn=3}}function i_(){if(Xn===4||Xn===3){Xn=0,_e();var n=Qo,i=dr,r=hr,u=KI;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Xn=5:(Xn=0,dr=Qo=null,o_(n,n.pendingLanes));var E=n.pendingLanes;if(E===0&&(Zo=null),oE(r),i=i.stateNode,rt&&typeof rt.onCommitFiberRoot=="function")try{rt.onCommitFiberRoot(ko,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=w.T,E=z.p,z.p=2,w.T=null;try{for(var A=n.onRecoverableError,b=0;b<u.length;b++){var v=u[b];A(v.value,{componentStack:v.stack})}}finally{w.T=i,z.p=E}}(hr&3)!==0&&Hd(),zi(n),E=n.pendingLanes,(r&4194090)!==0&&(E&42)!==0?n===wm?jc++:(jc=0,wm=n):jc=0,zc(0)}}function o_(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,_c(i)))}function Hd(n){return n_(),a_(),i_(),l_()}function l_(){if(Xn!==5)return!1;var n=Qo,i=Um;Um=0;var r=oE(hr),u=w.T,E=z.p;try{z.p=32>r?32:r,w.T=null,r=Pm,Pm=null;var A=Qo,b=hr;if(Xn=0,dr=Qo=null,hr=0,(gt&6)!==0)throw Error(o(331));var v=gt;if(gt|=4,zI(A.current),BI(A,A.current,b,r),gt=v,zc(0,!1),rt&&typeof rt.onPostCommitFiberRoot=="function")try{rt.onPostCommitFiberRoot(ko,A)}catch{}return!0}finally{z.p=E,w.T=u,o_(n,i)}}function s_(n,i,r){i=ti(r,i),i=Am(n.stateNode,i,2),n=Fo(n,i,2),n!==null&&(Ll(n,2),zi(n))}function yt(n,i,r){if(n.tag===3)s_(n,n,r);else for(;i!==null;){if(i.tag===3){s_(i,n,r);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Zo===null||!Zo.has(u))){n=ti(r,n),r=dI(2),u=Fo(i,r,2),u!==null&&(hI(r,u,i,n),Ll(u,2),zi(u));break}}i=i.return}}function jm(n,i,r){var u=n.pingCache;if(u===null){u=n.pingCache=new Hv;var E=new Set;u.set(i,E)}else E=u.get(i),E===void 0&&(E=new Set,u.set(i,E));E.has(r)||(Lm=!0,E.add(r),n=Gv.bind(null,n,i,r),i.then(n,n))}function Gv(n,i,r){var u=n.pingCache;u!==null&&u.delete(i),n.pingedLanes|=n.suspendedLanes&r,n.warmLanes&=~r,xt===n&&(ct&r)===r&&(en===4||en===3&&(ct&62914560)===ct&&300>De()-km?(gt&2)===0&&fr(n,0):xm|=r,ur===ct&&(ur=0)),zi(n)}function r_(n,i){i===0&&(i=xs()),n=qs(n,i),n!==null&&(Ll(n,i),zi(n))}function Bv(n){var i=n.memoizedState,r=0;i!==null&&(r=i.retryLane),r_(n,r)}function Fv(n,i){var r=0;switch(n.tag){case 13:var u=n.stateNode,E=n.memoizedState;E!==null&&(r=E.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(o(314))}u!==null&&u.delete(i),r_(n,r)}function jv(n,i){return me(n,i)}var kd=null,mr=null,zm=!1,Ud=!1,Ym=!1,ql=0;function zi(n){n!==mr&&n.next===null&&(mr===null?kd=mr=n:mr=mr.next=n),Ud=!0,zm||(zm=!0,Yv())}function zc(n,i){if(!Ym&&Ud){Ym=!0;do for(var r=!1,u=kd;u!==null;){if(n!==0){var E=u.pendingLanes;if(E===0)var A=0;else{var b=u.suspendedLanes,v=u.pingedLanes;A=(1<<31-Bt(42|n)+1)-1,A&=E&~(b&~v),A=A&201326741?A&201326741|1:A?A|2:0}A!==0&&(r=!0,h_(u,A))}else A=ct,A=Ls(u,u===xt?A:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(A&3)===0||Ml(u,A)||(r=!0,h_(u,A));u=u.next}while(r);Ym=!1}}function zv(){c_()}function c_(){Ud=zm=!1;var n=0;ql!==0&&($v()&&(n=ql),ql=0);for(var i=De(),r=null,u=kd;u!==null;){var E=u.next,A=u_(u,i);A===0?(u.next=null,r===null?kd=E:r.next=E,E===null&&(mr=r)):(r=u,(n!==0||(A&3)!==0)&&(Ud=!0)),u=E}zc(n)}function u_(n,i){for(var r=n.suspendedLanes,u=n.pingedLanes,E=n.expirationTimes,A=n.pendingLanes&-62914561;0<A;){var b=31-Bt(A),v=1<<b,F=E[b];F===-1?((v&r)===0||(v&u)!==0)&&(E[b]=aE(v,i)):F<=i&&(n.expiredLanes|=v),A&=~v}if(i=xt,r=ct,r=Ls(n,n===i?r:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,r===0||n===i&&(It===2||It===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&Ce(u),n.callbackNode=null,n.callbackPriority=0;if((r&3)===0||Ml(n,r)){if(i=r&-r,i===n.callbackPriority)return i;switch(u!==null&&Ce(u),oE(r)){case 2:case 8:r=Na;break;case 32:r=Ca;break;case 268435456:r=so;break;default:r=Ca}return u=d_.bind(null,n),r=me(r,u),n.callbackPriority=i,n.callbackNode=r,i}return u!==null&&u!==null&&Ce(u),n.callbackPriority=2,n.callbackNode=null,2}function d_(n,i){if(Xn!==0&&Xn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var r=n.callbackNode;if(Hd()&&n.callbackNode!==r)return null;var u=ct;return u=Ls(n,n===xt?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(WI(n,u,i),u_(n,De()),n.callbackNode!=null&&n.callbackNode===r?d_.bind(null,n):null)}function h_(n,i){if(Hd())return null;WI(n,i,!0)}function Yv(){eM(function(){(gt&6)!==0?me($t,zv):c_()})}function Km(){return ql===0&&(ql=Bu()),ql}function f_(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Wu(""+n)}function E_(n,i){var r=i.ownerDocument.createElement("input");return r.name=i.name,r.value=i.value,n.id&&r.setAttribute("form",n.id),i.parentNode.insertBefore(r,i),n=new FormData(n),r.parentNode.removeChild(r),n}function Kv(n,i,r,u,E){if(i==="submit"&&r&&r.stateNode===E){var A=f_((E[ba]||null).action),b=u.submitter;b&&(i=(i=b[ba]||null)?f_(i.formAction):b.getAttribute("formAction"),i!==null&&(A=i,b=null));var v=new Qu("action","action",null,u,E);n.push({event:v,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(ql!==0){var F=b?E_(E,b):new FormData(E);dm(r,{pending:!0,data:F,method:E.method,action:A},null,F)}}else typeof A=="function"&&(v.preventDefault(),F=b?E_(E,b):new FormData(E),dm(r,{pending:!0,data:F,method:E.method,action:A},A,F))},currentTarget:E}]})}}for(var Vm=0;Vm<vE.length;Vm++){var Wm=vE[Vm],Vv=Wm.toLowerCase(),Wv=Wm[0].toUpperCase()+Wm.slice(1);pi(Vv,"on"+Wv)}pi(WS,"onAnimationEnd"),pi(XS,"onAnimationIteration"),pi(qS,"onAnimationStart"),pi("dblclick","onDoubleClick"),pi("focusin","onFocus"),pi("focusout","onBlur"),pi(uv,"onTransitionRun"),pi(dv,"onTransitionStart"),pi(hv,"onTransitionCancel"),pi(ZS,"onTransitionEnd"),Gs("onMouseEnter",["mouseout","mouseover"]),Gs("onMouseLeave",["mouseout","mouseover"]),Gs("onPointerEnter",["pointerout","pointerover"]),Gs("onPointerLeave",["pointerout","pointerover"]),xl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),xl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),xl("onBeforeInput",["compositionend","keypress","textInput","paste"]),xl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),xl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),xl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xv=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Yc));function m_(n,i){i=(i&4)!==0;for(var r=0;r<n.length;r++){var u=n[r],E=u.event;u=u.listeners;e:{var A=void 0;if(i)for(var b=u.length-1;0<=b;b--){var v=u[b],F=v.instance,re=v.currentTarget;if(v=v.listener,F!==A&&E.isPropagationStopped())break e;A=v,E.currentTarget=re;try{A(E)}catch(Ae){pd(Ae)}E.currentTarget=null,A=F}else for(b=0;b<u.length;b++){if(v=u[b],F=v.instance,re=v.currentTarget,v=v.listener,F!==A&&E.isPropagationStopped())break e;A=v,E.currentTarget=re;try{A(E)}catch(Ae){pd(Ae)}E.currentTarget=null,A=F}}}}function nt(n,i){var r=i[lE];r===void 0&&(r=i[lE]=new Set);var u=n+"__bubble";r.has(u)||(A_(i,n,2,!1),r.add(u))}function Xm(n,i,r){var u=0;i&&(u|=4),A_(r,n,u,i)}var Pd="_reactListening"+Math.random().toString(36).slice(2);function qm(n){if(!n[Pd]){n[Pd]=!0,cS.forEach(function(r){r!=="selectionchange"&&(Xv.has(r)||Xm(r,!1,n),Xm(r,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Pd]||(i[Pd]=!0,Xm("selectionchange",!1,i))}}function A_(n,i,r,u){switch(B_(i)){case 2:var E=IM;break;case 8:E=_M;break;default:E=cA}r=E.bind(null,i,r,n),E=void 0,!RE||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(E=!0),u?E!==void 0?n.addEventListener(i,r,{capture:!0,passive:E}):n.addEventListener(i,r,!0):E!==void 0?n.addEventListener(i,r,{passive:E}):n.addEventListener(i,r,!1)}function Zm(n,i,r,u,E){var A=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var b=u.tag;if(b===3||b===4){var v=u.stateNode.containerInfo;if(v===E)break;if(b===4)for(b=u.return;b!==null;){var F=b.tag;if((F===3||F===4)&&b.stateNode.containerInfo===E)return;b=b.return}for(;v!==null;){if(b=Us(v),b===null)return;if(F=b.tag,F===5||F===6||F===26||F===27){u=A=b;continue e}v=v.parentNode}}u=u.return}pS(function(){var re=A,Ae=mE(r),Se=[];e:{var ue=QS.get(n);if(ue!==void 0){var he=Qu,Fe=n;switch(n){case"keypress":if(qu(r)===0)break e;case"keydown":case"keyup":he=jy;break;case"focusin":Fe="focus",he=IE;break;case"focusout":Fe="blur",he=IE;break;case"beforeblur":case"afterblur":he=IE;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":he=bS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":he=vy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":he=Ky;break;case WS:case XS:case qS:he=xy;break;case ZS:he=Wy;break;case"scroll":case"scrollend":he=Dy;break;case"wheel":he=qy;break;case"copy":case"cut":case"paste":he=ky;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":he=DS;break;case"toggle":case"beforetoggle":he=Qy}var Pe=(i&4)!==0,bt=!Pe&&(n==="scroll"||n==="scrollend"),te=Pe?ue!==null?ue+"Capture":null:ue;Pe=[];for(var q=re,ie;q!==null;){var Te=q;if(ie=Te.stateNode,Te=Te.tag,Te!==5&&Te!==26&&Te!==27||ie===null||te===null||(Te=cc(q,te),Te!=null&&Pe.push(Kc(q,Te,ie))),bt)break;q=q.return}0<Pe.length&&(ue=new he(ue,Fe,null,r,Ae),Se.push({event:ue,listeners:Pe}))}}if((i&7)===0){e:{if(ue=n==="mouseover"||n==="pointerover",he=n==="mouseout"||n==="pointerout",ue&&r!==EE&&(Fe=r.relatedTarget||r.fromElement)&&(Us(Fe)||Fe[ks]))break e;if((he||ue)&&(ue=Ae.window===Ae?Ae:(ue=Ae.ownerDocument)?ue.defaultView||ue.parentWindow:window,he?(Fe=r.relatedTarget||r.toElement,he=re,Fe=Fe?Us(Fe):null,Fe!==null&&(bt=c(Fe),Pe=Fe.tag,Fe!==bt||Pe!==5&&Pe!==27&&Pe!==6)&&(Fe=null)):(he=null,Fe=re),he!==Fe)){if(Pe=bS,Te="onMouseLeave",te="onMouseEnter",q="mouse",(n==="pointerout"||n==="pointerover")&&(Pe=DS,Te="onPointerLeave",te="onPointerEnter",q="pointer"),bt=he==null?ue:rc(he),ie=Fe==null?ue:rc(Fe),ue=new Pe(Te,q+"leave",he,r,Ae),ue.target=bt,ue.relatedTarget=ie,Te=null,Us(Ae)===re&&(Pe=new Pe(te,q+"enter",Fe,r,Ae),Pe.target=ie,Pe.relatedTarget=bt,Te=Pe),bt=Te,he&&Fe)t:{for(Pe=he,te=Fe,q=0,ie=Pe;ie;ie=Ar(ie))q++;for(ie=0,Te=te;Te;Te=Ar(Te))ie++;for(;0<q-ie;)Pe=Ar(Pe),q--;for(;0<ie-q;)te=Ar(te),ie--;for(;q--;){if(Pe===te||te!==null&&Pe===te.alternate)break t;Pe=Ar(Pe),te=Ar(te)}Pe=null}else Pe=null;he!==null&&R_(Se,ue,he,Pe,!1),Fe!==null&&bt!==null&&R_(Se,bt,Fe,Pe,!0)}}e:{if(ue=re?rc(re):window,he=ue.nodeName&&ue.nodeName.toLowerCase(),he==="select"||he==="input"&&ue.type==="file")var ye=US;else if(HS(ue))if(PS)ye=sv;else{ye=ov;var Qe=iv}else he=ue.nodeName,!he||he.toLowerCase()!=="input"||ue.type!=="checkbox"&&ue.type!=="radio"?re&&fE(re.elementType)&&(ye=US):ye=lv;if(ye&&(ye=ye(n,re))){kS(Se,ye,r,Ae);break e}Qe&&Qe(n,ue,re),n==="focusout"&&re&&ue.type==="number"&&re.memoizedProps.value!=null&&hE(ue,"number",ue.value)}switch(Qe=re?rc(re):window,n){case"focusin":(HS(Qe)||Qe.contentEditable==="true")&&(Vs=Qe,OE=re,Rc=null);break;case"focusout":Rc=OE=Vs=null;break;case"mousedown":DE=!0;break;case"contextmenu":case"mouseup":case"dragend":DE=!1,KS(Se,r,Ae);break;case"selectionchange":if(cv)break;case"keydown":case"keyup":KS(Se,r,Ae)}var xe;if(pE)e:{switch(n){case"compositionstart":var we="onCompositionStart";break e;case"compositionend":we="onCompositionEnd";break e;case"compositionupdate":we="onCompositionUpdate";break e}we=void 0}else Ks?LS(n,r)&&(we="onCompositionEnd"):n==="keydown"&&r.keyCode===229&&(we="onCompositionStart");we&&(yS&&r.locale!=="ko"&&(Ks||we!=="onCompositionStart"?we==="onCompositionEnd"&&Ks&&(xe=NS()):(Po=Ae,TE="value"in Po?Po.value:Po.textContent,Ks=!0)),Qe=wd(re,we),0<Qe.length&&(we=new OS(we,n,null,r,Ae),Se.push({event:we,listeners:Qe}),xe?we.data=xe:(xe=xS(r),xe!==null&&(we.data=xe)))),(xe=Jy?ev(n,r):tv(n,r))&&(we=wd(re,"onBeforeInput"),0<we.length&&(Qe=new OS("onBeforeInput","beforeinput",null,r,Ae),Se.push({event:Qe,listeners:we}),Qe.data=xe)),Kv(Se,n,re,r,Ae)}m_(Se,i)})}function Kc(n,i,r){return{instance:n,listener:i,currentTarget:r}}function wd(n,i){for(var r=i+"Capture",u=[];n!==null;){var E=n,A=E.stateNode;if(E=E.tag,E!==5&&E!==26&&E!==27||A===null||(E=cc(n,r),E!=null&&u.unshift(Kc(n,E,A)),E=cc(n,i),E!=null&&u.push(Kc(n,E,A))),n.tag===3)return u;n=n.return}return[]}function Ar(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function R_(n,i,r,u,E){for(var A=i._reactName,b=[];r!==null&&r!==u;){var v=r,F=v.alternate,re=v.stateNode;if(v=v.tag,F!==null&&F===u)break;v!==5&&v!==26&&v!==27||re===null||(F=re,E?(re=cc(r,A),re!=null&&b.unshift(Kc(r,re,F))):E||(re=cc(r,A),re!=null&&b.push(Kc(r,re,F)))),r=r.return}b.length!==0&&n.push({event:i,listeners:b})}var qv=/\r\n?/g,Zv=/\u0000|\uFFFD/g;function T_(n){return(typeof n=="string"?n:""+n).replace(qv,`
`).replace(Zv,"")}function S_(n,i){return i=T_(i),T_(n)===i}function Gd(){}function Ct(n,i,r,u,E,A){switch(r){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||js(n,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&js(n,""+u);break;case"className":Yu(n,"class",u);break;case"tabIndex":Yu(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Yu(n,r,u);break;case"style":IS(n,u,A);break;case"data":if(i!=="object"){Yu(n,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||r!=="href")){n.removeAttribute(r);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(r);break}u=Wu(""+u),n.setAttribute(r,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof A=="function"&&(r==="formAction"?(i!=="input"&&Ct(n,i,"name",E.name,E,null),Ct(n,i,"formEncType",E.formEncType,E,null),Ct(n,i,"formMethod",E.formMethod,E,null),Ct(n,i,"formTarget",E.formTarget,E,null)):(Ct(n,i,"encType",E.encType,E,null),Ct(n,i,"method",E.method,E,null),Ct(n,i,"target",E.target,E,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(r);break}u=Wu(""+u),n.setAttribute(r,u);break;case"onClick":u!=null&&(n.onclick=Gd);break;case"onScroll":u!=null&&nt("scroll",n);break;case"onScrollEnd":u!=null&&nt("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(o(61));if(r=u.__html,r!=null){if(E.children!=null)throw Error(o(60));n.innerHTML=r}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}r=Wu(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(r,""+u):n.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(r,""):n.removeAttribute(r);break;case"capture":case"download":u===!0?n.setAttribute(r,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(r,u):n.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(r,u):n.removeAttribute(r);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(r):n.setAttribute(r,u);break;case"popover":nt("beforetoggle",n),nt("toggle",n),zu(n,"popover",u);break;case"xlinkActuate":ro(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":ro(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":ro(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":ro(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":ro(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":ro(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":ro(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":ro(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":ro(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":zu(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=by.get(r)||r,zu(n,r,u))}}function Qm(n,i,r,u,E,A){switch(r){case"style":IS(n,u,A);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(o(61));if(r=u.__html,r!=null){if(E.children!=null)throw Error(o(60));n.innerHTML=r}}break;case"children":typeof u=="string"?js(n,u):(typeof u=="number"||typeof u=="bigint")&&js(n,""+u);break;case"onScroll":u!=null&&nt("scroll",n);break;case"onScrollEnd":u!=null&&nt("scrollend",n);break;case"onClick":u!=null&&(n.onclick=Gd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!uS.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(E=r.endsWith("Capture"),i=r.slice(2,E?r.length-7:void 0),A=n[ba]||null,A=A!=null?A[r]:null,typeof A=="function"&&n.removeEventListener(i,A,E),typeof u=="function")){typeof A!="function"&&A!==null&&(r in n?n[r]=null:n.hasAttribute(r)&&n.removeAttribute(r)),n.addEventListener(i,u,E);break e}r in n?n[r]=u:u===!0?n.setAttribute(r,""):zu(n,r,u)}}}function qn(n,i,r){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":nt("error",n),nt("load",n);var u=!1,E=!1,A;for(A in r)if(r.hasOwnProperty(A)){var b=r[A];if(b!=null)switch(A){case"src":u=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,i));default:Ct(n,i,A,b,r,null)}}E&&Ct(n,i,"srcSet",r.srcSet,r,null),u&&Ct(n,i,"src",r.src,r,null);return;case"input":nt("invalid",n);var v=A=b=E=null,F=null,re=null;for(u in r)if(r.hasOwnProperty(u)){var Ae=r[u];if(Ae!=null)switch(u){case"name":E=Ae;break;case"type":b=Ae;break;case"checked":F=Ae;break;case"defaultChecked":re=Ae;break;case"value":A=Ae;break;case"defaultValue":v=Ae;break;case"children":case"dangerouslySetInnerHTML":if(Ae!=null)throw Error(o(137,i));break;default:Ct(n,i,u,Ae,r,null)}}RS(n,A,v,F,re,b,E,!1),Ku(n);return;case"select":nt("invalid",n),u=b=A=null;for(E in r)if(r.hasOwnProperty(E)&&(v=r[E],v!=null))switch(E){case"value":A=v;break;case"defaultValue":b=v;break;case"multiple":u=v;default:Ct(n,i,E,v,r,null)}i=A,r=b,n.multiple=!!u,i!=null?Fs(n,!!u,i,!1):r!=null&&Fs(n,!!u,r,!0);return;case"textarea":nt("invalid",n),A=E=u=null;for(b in r)if(r.hasOwnProperty(b)&&(v=r[b],v!=null))switch(b){case"value":u=v;break;case"defaultValue":E=v;break;case"children":A=v;break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(o(91));break;default:Ct(n,i,b,v,r,null)}SS(n,u,E,A),Ku(n);return;case"option":for(F in r)if(r.hasOwnProperty(F)&&(u=r[F],u!=null))switch(F){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Ct(n,i,F,u,r,null)}return;case"dialog":nt("beforetoggle",n),nt("toggle",n),nt("cancel",n),nt("close",n);break;case"iframe":case"object":nt("load",n);break;case"video":case"audio":for(u=0;u<Yc.length;u++)nt(Yc[u],n);break;case"image":nt("error",n),nt("load",n);break;case"details":nt("toggle",n);break;case"embed":case"source":case"link":nt("error",n),nt("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(re in r)if(r.hasOwnProperty(re)&&(u=r[re],u!=null))switch(re){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,i));default:Ct(n,i,re,u,r,null)}return;default:if(fE(i)){for(Ae in r)r.hasOwnProperty(Ae)&&(u=r[Ae],u!==void 0&&Qm(n,i,Ae,u,r,void 0));return}}for(v in r)r.hasOwnProperty(v)&&(u=r[v],u!=null&&Ct(n,i,v,u,r,null))}function Qv(n,i,r,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,A=null,b=null,v=null,F=null,re=null,Ae=null;for(he in r){var Se=r[he];if(r.hasOwnProperty(he)&&Se!=null)switch(he){case"checked":break;case"value":break;case"defaultValue":F=Se;default:u.hasOwnProperty(he)||Ct(n,i,he,null,u,Se)}}for(var ue in u){var he=u[ue];if(Se=r[ue],u.hasOwnProperty(ue)&&(he!=null||Se!=null))switch(ue){case"type":A=he;break;case"name":E=he;break;case"checked":re=he;break;case"defaultChecked":Ae=he;break;case"value":b=he;break;case"defaultValue":v=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(o(137,i));break;default:he!==Se&&Ct(n,i,ue,he,u,Se)}}dE(n,b,v,F,re,Ae,A,E);return;case"select":he=b=v=ue=null;for(A in r)if(F=r[A],r.hasOwnProperty(A)&&F!=null)switch(A){case"value":break;case"multiple":he=F;default:u.hasOwnProperty(A)||Ct(n,i,A,null,u,F)}for(E in u)if(A=u[E],F=r[E],u.hasOwnProperty(E)&&(A!=null||F!=null))switch(E){case"value":ue=A;break;case"defaultValue":v=A;break;case"multiple":b=A;default:A!==F&&Ct(n,i,E,A,u,F)}i=v,r=b,u=he,ue!=null?Fs(n,!!r,ue,!1):!!u!=!!r&&(i!=null?Fs(n,!!r,i,!0):Fs(n,!!r,r?[]:"",!1));return;case"textarea":he=ue=null;for(v in r)if(E=r[v],r.hasOwnProperty(v)&&E!=null&&!u.hasOwnProperty(v))switch(v){case"value":break;case"children":break;default:Ct(n,i,v,null,u,E)}for(b in u)if(E=u[b],A=r[b],u.hasOwnProperty(b)&&(E!=null||A!=null))switch(b){case"value":ue=E;break;case"defaultValue":he=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(o(91));break;default:E!==A&&Ct(n,i,b,E,u,A)}TS(n,ue,he);return;case"option":for(var Fe in r)if(ue=r[Fe],r.hasOwnProperty(Fe)&&ue!=null&&!u.hasOwnProperty(Fe))switch(Fe){case"selected":n.selected=!1;break;default:Ct(n,i,Fe,null,u,ue)}for(F in u)if(ue=u[F],he=r[F],u.hasOwnProperty(F)&&ue!==he&&(ue!=null||he!=null))switch(F){case"selected":n.selected=ue&&typeof ue!="function"&&typeof ue!="symbol";break;default:Ct(n,i,F,ue,u,he)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Pe in r)ue=r[Pe],r.hasOwnProperty(Pe)&&ue!=null&&!u.hasOwnProperty(Pe)&&Ct(n,i,Pe,null,u,ue);for(re in u)if(ue=u[re],he=r[re],u.hasOwnProperty(re)&&ue!==he&&(ue!=null||he!=null))switch(re){case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(o(137,i));break;default:Ct(n,i,re,ue,u,he)}return;default:if(fE(i)){for(var bt in r)ue=r[bt],r.hasOwnProperty(bt)&&ue!==void 0&&!u.hasOwnProperty(bt)&&Qm(n,i,bt,void 0,u,ue);for(Ae in u)ue=u[Ae],he=r[Ae],!u.hasOwnProperty(Ae)||ue===he||ue===void 0&&he===void 0||Qm(n,i,Ae,ue,u,he);return}}for(var te in r)ue=r[te],r.hasOwnProperty(te)&&ue!=null&&!u.hasOwnProperty(te)&&Ct(n,i,te,null,u,ue);for(Se in u)ue=u[Se],he=r[Se],!u.hasOwnProperty(Se)||ue===he||ue==null&&he==null||Ct(n,i,Se,ue,u,he)}var $m=null,Jm=null;function Bd(n){return n.nodeType===9?n:n.ownerDocument}function g_(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function I_(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function eA(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var tA=null;function $v(){var n=window.event;return n&&n.type==="popstate"?n===tA?!1:(tA=n,!0):(tA=null,!1)}var __=typeof setTimeout=="function"?setTimeout:void 0,Jv=typeof clearTimeout=="function"?clearTimeout:void 0,p_=typeof Promise=="function"?Promise:void 0,eM=typeof queueMicrotask=="function"?queueMicrotask:typeof p_<"u"?function(n){return p_.resolve(null).then(n).catch(tM)}:__;function tM(n){setTimeout(function(){throw n})}function Jo(n){return n==="head"}function N_(n,i){var r=i,u=0,E=0;do{var A=r.nextSibling;if(n.removeChild(r),A&&A.nodeType===8)if(r=A.data,r==="/$"){if(0<u&&8>u){r=u;var b=n.ownerDocument;if(r&1&&Vc(b.documentElement),r&2&&Vc(b.body),r&4)for(r=b.head,Vc(r),b=r.firstChild;b;){var v=b.nextSibling,F=b.nodeName;b[sc]||F==="SCRIPT"||F==="STYLE"||F==="LINK"&&b.rel.toLowerCase()==="stylesheet"||r.removeChild(b),b=v}}if(E===0){n.removeChild(A),eu(i);return}E--}else r==="$"||r==="$?"||r==="$!"?E++:u=r.charCodeAt(0)-48;else u=0;r=A}while(r);eu(i)}function nA(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var r=i;switch(i=i.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":nA(r),sE(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}n.removeChild(r)}}function nM(n,i,r,u){for(;n.nodeType===1;){var E=r;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[sc])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(A=n.getAttribute("rel"),A==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(A!==E.rel||n.getAttribute("href")!==(E.href==null||E.href===""?null:E.href)||n.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||n.getAttribute("title")!==(E.title==null?null:E.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(A=n.getAttribute("src"),(A!==(E.src==null?null:E.src)||n.getAttribute("type")!==(E.type==null?null:E.type)||n.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&A&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var A=E.name==null?null:""+E.name;if(E.type==="hidden"&&n.getAttribute("name")===A)return n}else return n;if(n=Ci(n.nextSibling),n===null)break}return null}function aM(n,i,r){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!r||(n=Ci(n.nextSibling),n===null))return null;return n}function aA(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function iM(n,i){var r=n.ownerDocument;if(n.data!=="$?"||r.readyState==="complete")i();else{var u=function(){i(),r.removeEventListener("DOMContentLoaded",u)};r.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function Ci(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return n}var iA=null;function C_(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var r=n.data;if(r==="$"||r==="$!"||r==="$?"){if(i===0)return n;i--}else r==="/$"&&i++}n=n.previousSibling}return null}function b_(n,i,r){switch(i=Bd(r),n){case"html":if(n=i.documentElement,!n)throw Error(o(452));return n;case"head":if(n=i.head,!n)throw Error(o(453));return n;case"body":if(n=i.body,!n)throw Error(o(454));return n;default:throw Error(o(451))}}function Vc(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);sE(n)}var si=new Map,O_=new Set;function Fd(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var po=z.d;z.d={f:oM,r:lM,D:sM,C:rM,L:cM,m:uM,X:hM,S:dM,M:fM};function oM(){var n=po.f(),i=Ld();return n||i}function lM(n){var i=Ps(n);i!==null&&i.tag===5&&i.type==="form"?Wg(i):po.r(n)}var Rr=typeof document>"u"?null:document;function D_(n,i,r){var u=Rr;if(u&&typeof i=="string"&&i){var E=ei(i);E='link[rel="'+n+'"][href="'+E+'"]',typeof r=="string"&&(E+='[crossorigin="'+r+'"]'),O_.has(E)||(O_.add(E),n={rel:n,crossOrigin:r,href:i},u.querySelector(E)===null&&(i=u.createElement("link"),qn(i,"link",n),kn(i),u.head.appendChild(i)))}}function sM(n){po.D(n),D_("dns-prefetch",n,null)}function rM(n,i){po.C(n,i),D_("preconnect",n,i)}function cM(n,i,r){po.L(n,i,r);var u=Rr;if(u&&n&&i){var E='link[rel="preload"][as="'+ei(i)+'"]';i==="image"&&r&&r.imageSrcSet?(E+='[imagesrcset="'+ei(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(E+='[imagesizes="'+ei(r.imageSizes)+'"]')):E+='[href="'+ei(n)+'"]';var A=E;switch(i){case"style":A=Tr(n);break;case"script":A=Sr(n)}si.has(A)||(n=R({rel:"preload",href:i==="image"&&r&&r.imageSrcSet?void 0:n,as:i},r),si.set(A,n),u.querySelector(E)!==null||i==="style"&&u.querySelector(Wc(A))||i==="script"&&u.querySelector(Xc(A))||(i=u.createElement("link"),qn(i,"link",n),kn(i),u.head.appendChild(i)))}}function uM(n,i){po.m(n,i);var r=Rr;if(r&&n){var u=i&&typeof i.as=="string"?i.as:"script",E='link[rel="modulepreload"][as="'+ei(u)+'"][href="'+ei(n)+'"]',A=E;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":A=Sr(n)}if(!si.has(A)&&(n=R({rel:"modulepreload",href:n},i),si.set(A,n),r.querySelector(E)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Xc(A)))return}u=r.createElement("link"),qn(u,"link",n),kn(u),r.head.appendChild(u)}}}function dM(n,i,r){po.S(n,i,r);var u=Rr;if(u&&n){var E=ws(u).hoistableStyles,A=Tr(n);i=i||"default";var b=E.get(A);if(!b){var v={loading:0,preload:null};if(b=u.querySelector(Wc(A)))v.loading=5;else{n=R({rel:"stylesheet",href:n,"data-precedence":i},r),(r=si.get(A))&&oA(n,r);var F=b=u.createElement("link");kn(F),qn(F,"link",n),F._p=new Promise(function(re,Ae){F.onload=re,F.onerror=Ae}),F.addEventListener("load",function(){v.loading|=1}),F.addEventListener("error",function(){v.loading|=2}),v.loading|=4,jd(b,i,u)}b={type:"stylesheet",instance:b,count:1,state:v},E.set(A,b)}}}function hM(n,i){po.X(n,i);var r=Rr;if(r&&n){var u=ws(r).hoistableScripts,E=Sr(n),A=u.get(E);A||(A=r.querySelector(Xc(E)),A||(n=R({src:n,async:!0},i),(i=si.get(E))&&lA(n,i),A=r.createElement("script"),kn(A),qn(A,"link",n),r.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},u.set(E,A))}}function fM(n,i){po.M(n,i);var r=Rr;if(r&&n){var u=ws(r).hoistableScripts,E=Sr(n),A=u.get(E);A||(A=r.querySelector(Xc(E)),A||(n=R({src:n,async:!0,type:"module"},i),(i=si.get(E))&&lA(n,i),A=r.createElement("script"),kn(A),qn(A,"link",n),r.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},u.set(E,A))}}function y_(n,i,r,u){var E=(E=x.current)?Fd(E):null;if(!E)throw Error(o(446));switch(n){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(i=Tr(r.href),r=ws(E).hoistableStyles,u=r.get(i),u||(u={type:"style",instance:null,count:0,state:null},r.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){n=Tr(r.href);var A=ws(E).hoistableStyles,b=A.get(n);if(b||(E=E.ownerDocument||E,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},A.set(n,b),(A=E.querySelector(Wc(n)))&&!A._p&&(b.instance=A,b.state.loading=5),si.has(n)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},si.set(n,r),A||EM(E,n,r,b.state))),i&&u===null)throw Error(o(528,""));return b}if(i&&u!==null)throw Error(o(529,""));return null;case"script":return i=r.async,r=r.src,typeof r=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Sr(r),r=ws(E).hoistableScripts,u=r.get(i),u||(u={type:"script",instance:null,count:0,state:null},r.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,n))}}function Tr(n){return'href="'+ei(n)+'"'}function Wc(n){return'link[rel="stylesheet"]['+n+"]"}function v_(n){return R({},n,{"data-precedence":n.precedence,precedence:null})}function EM(n,i,r,u){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=n.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),qn(i,"link",r),kn(i),n.head.appendChild(i))}function Sr(n){return'[src="'+ei(n)+'"]'}function Xc(n){return"script[async]"+n}function M_(n,i,r){if(i.count++,i.instance===null)switch(i.type){case"style":var u=n.querySelector('style[data-href~="'+ei(r.href)+'"]');if(u)return i.instance=u,kn(u),u;var E=R({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),kn(u),qn(u,"style",E),jd(u,r.precedence,n),i.instance=u;case"stylesheet":E=Tr(r.href);var A=n.querySelector(Wc(E));if(A)return i.state.loading|=4,i.instance=A,kn(A),A;u=v_(r),(E=si.get(E))&&oA(u,E),A=(n.ownerDocument||n).createElement("link"),kn(A);var b=A;return b._p=new Promise(function(v,F){b.onload=v,b.onerror=F}),qn(A,"link",u),i.state.loading|=4,jd(A,r.precedence,n),i.instance=A;case"script":return A=Sr(r.src),(E=n.querySelector(Xc(A)))?(i.instance=E,kn(E),E):(u=r,(E=si.get(A))&&(u=R({},r),lA(u,E)),n=n.ownerDocument||n,E=n.createElement("script"),kn(E),qn(E,"link",u),n.head.appendChild(E),i.instance=E);case"void":return null;default:throw Error(o(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,jd(u,r.precedence,n));return i.instance}function jd(n,i,r){for(var u=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=u.length?u[u.length-1]:null,A=E,b=0;b<u.length;b++){var v=u[b];if(v.dataset.precedence===i)A=v;else if(A!==E)break}A?A.parentNode.insertBefore(n,A.nextSibling):(i=r.nodeType===9?r.head:r,i.insertBefore(n,i.firstChild))}function oA(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function lA(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var zd=null;function L_(n,i,r){if(zd===null){var u=new Map,E=zd=new Map;E.set(r,u)}else E=zd,u=E.get(r),u||(u=new Map,E.set(r,u));if(u.has(n))return u;for(u.set(n,null),r=r.getElementsByTagName(n),E=0;E<r.length;E++){var A=r[E];if(!(A[sc]||A[na]||n==="link"&&A.getAttribute("rel")==="stylesheet")&&A.namespaceURI!=="http://www.w3.org/2000/svg"){var b=A.getAttribute(i)||"";b=n+b;var v=u.get(b);v?v.push(A):u.set(b,[A])}}return u}function x_(n,i,r){n=n.ownerDocument||n,n.head.insertBefore(r,i==="title"?n.querySelector("head > title"):null)}function mM(n,i,r){if(r===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return n=i.disabled,typeof i.precedence=="string"&&n==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function H_(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var qc=null;function AM(){}function RM(n,i,r){if(qc===null)throw Error(o(475));var u=qc;if(i.type==="stylesheet"&&(typeof r.media!="string"||matchMedia(r.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var E=Tr(r.href),A=n.querySelector(Wc(E));if(A){n=A._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(u.count++,u=Yd.bind(u),n.then(u,u)),i.state.loading|=4,i.instance=A,kn(A);return}A=n.ownerDocument||n,r=v_(r),(E=si.get(E))&&oA(r,E),A=A.createElement("link"),kn(A);var b=A;b._p=new Promise(function(v,F){b.onload=v,b.onerror=F}),qn(A,"link",r),i.instance=A}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(i,n),(n=i.state.preload)&&(i.state.loading&3)===0&&(u.count++,i=Yd.bind(u),n.addEventListener("load",i),n.addEventListener("error",i))}}function TM(){if(qc===null)throw Error(o(475));var n=qc;return n.stylesheets&&n.count===0&&sA(n,n.stylesheets),0<n.count?function(i){var r=setTimeout(function(){if(n.stylesheets&&sA(n,n.stylesheets),n.unsuspend){var u=n.unsuspend;n.unsuspend=null,u()}},6e4);return n.unsuspend=i,function(){n.unsuspend=null,clearTimeout(r)}}:null}function Yd(){if(this.count--,this.count===0){if(this.stylesheets)sA(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Kd=null;function sA(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Kd=new Map,i.forEach(SM,n),Kd=null,Yd.call(n))}function SM(n,i){if(!(i.state.loading&4)){var r=Kd.get(n);if(r)var u=r.get(null);else{r=new Map,Kd.set(n,r);for(var E=n.querySelectorAll("link[data-precedence],style[data-precedence]"),A=0;A<E.length;A++){var b=E[A];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(r.set(b.dataset.precedence,b),u=b)}u&&r.set(null,u)}E=i.instance,b=E.getAttribute("data-precedence"),A=r.get(b)||u,A===u&&r.set(null,E),r.set(b,E),this.count++,u=Yd.bind(this),E.addEventListener("load",u),E.addEventListener("error",u),A?A.parentNode.insertBefore(E,A.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(E,n.firstChild)),i.state.loading|=4}}var Zc={$$typeof:P,Provider:null,Consumer:null,_currentValue:se,_currentValue2:se,_threadCount:0};function gM(n,i,r,u,E,A,b,v){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Hs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hs(0),this.hiddenUpdates=Hs(null),this.identifierPrefix=u,this.onUncaughtError=E,this.onCaughtError=A,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=v,this.incompleteTransitions=new Map}function k_(n,i,r,u,E,A,b,v,F,re,Ae,Se){return n=new gM(n,i,r,b,v,F,re,Se),i=1,A===!0&&(i|=24),A=Pa(3,null,null,i),n.current=A,A.stateNode=n,i=jE(),i.refCount++,n.pooledCache=i,i.refCount++,A.memoizedState={element:u,isDehydrated:r,cache:i},VE(A),n}function U_(n){return n?(n=Zs,n):Zs}function P_(n,i,r,u,E,A){E=U_(E),u.context===null?u.context=E:u.pendingContext=E,u=Bo(i),u.payload={element:r},A=A===void 0?null:A,A!==null&&(u.callback=A),r=Fo(n,u,i),r!==null&&(ja(r,n,i),bc(r,n,i))}function w_(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var r=n.retryLane;n.retryLane=r!==0&&r<i?r:i}}function rA(n,i){w_(n,i),(n=n.alternate)&&w_(n,i)}function G_(n){if(n.tag===13){var i=qs(n,67108864);i!==null&&ja(i,n,67108864),rA(n,67108864)}}var Vd=!0;function IM(n,i,r,u){var E=w.T;w.T=null;var A=z.p;try{z.p=2,cA(n,i,r,u)}finally{z.p=A,w.T=E}}function _M(n,i,r,u){var E=w.T;w.T=null;var A=z.p;try{z.p=8,cA(n,i,r,u)}finally{z.p=A,w.T=E}}function cA(n,i,r,u){if(Vd){var E=uA(u);if(E===null)Zm(n,i,u,Wd,r),F_(n,u);else if(NM(E,n,i,r,u))u.stopPropagation();else if(F_(n,u),i&4&&-1<pM.indexOf(n)){for(;E!==null;){var A=Ps(E);if(A!==null)switch(A.tag){case 3:if(A=A.stateNode,A.current.memoizedState.isDehydrated){var b=wi(A.pendingLanes);if(b!==0){var v=A;for(v.pendingLanes|=2,v.entangledLanes|=2;b;){var F=1<<31-Bt(b);v.entanglements[1]|=F,b&=~F}zi(A),(gt&6)===0&&(vd=De()+500,zc(0))}}break;case 13:v=qs(A,2),v!==null&&ja(v,A,2),Ld(),rA(A,2)}if(A=uA(u),A===null&&Zm(n,i,u,Wd,r),A===E)break;E=A}E!==null&&u.stopPropagation()}else Zm(n,i,u,null,r)}}function uA(n){return n=mE(n),dA(n)}var Wd=null;function dA(n){if(Wd=null,n=Us(n),n!==null){var i=c(n);if(i===null)n=null;else{var r=i.tag;if(r===13){if(n=d(i),n!==null)return n;n=null}else if(r===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return Wd=n,null}function B_(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Be()){case $t:return 2;case Na:return 8;case Ca:case lo:return 32;case so:return 268435456;default:return 32}default:return 32}}var hA=!1,el=null,tl=null,nl=null,Qc=new Map,$c=new Map,al=[],pM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function F_(n,i){switch(n){case"focusin":case"focusout":el=null;break;case"dragenter":case"dragleave":tl=null;break;case"mouseover":case"mouseout":nl=null;break;case"pointerover":case"pointerout":Qc.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":$c.delete(i.pointerId)}}function Jc(n,i,r,u,E,A){return n===null||n.nativeEvent!==A?(n={blockedOn:i,domEventName:r,eventSystemFlags:u,nativeEvent:A,targetContainers:[E]},i!==null&&(i=Ps(i),i!==null&&G_(i)),n):(n.eventSystemFlags|=u,i=n.targetContainers,E!==null&&i.indexOf(E)===-1&&i.push(E),n)}function NM(n,i,r,u,E){switch(i){case"focusin":return el=Jc(el,n,i,r,u,E),!0;case"dragenter":return tl=Jc(tl,n,i,r,u,E),!0;case"mouseover":return nl=Jc(nl,n,i,r,u,E),!0;case"pointerover":var A=E.pointerId;return Qc.set(A,Jc(Qc.get(A)||null,n,i,r,u,E)),!0;case"gotpointercapture":return A=E.pointerId,$c.set(A,Jc($c.get(A)||null,n,i,r,u,E)),!0}return!1}function j_(n){var i=Us(n.target);if(i!==null){var r=c(i);if(r!==null){if(i=r.tag,i===13){if(i=d(r),i!==null){n.blockedOn=i,Ry(n.priority,function(){if(r.tag===13){var u=Fa();u=lc(u);var E=qs(r,u);E!==null&&ja(E,r,u),rA(r,u)}});return}}else if(i===3&&r.stateNode.current.memoizedState.isDehydrated){n.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Xd(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var r=uA(n.nativeEvent);if(r===null){r=n.nativeEvent;var u=new r.constructor(r.type,r);EE=u,r.target.dispatchEvent(u),EE=null}else return i=Ps(r),i!==null&&G_(i),n.blockedOn=r,!1;i.shift()}return!0}function z_(n,i,r){Xd(n)&&r.delete(i)}function CM(){hA=!1,el!==null&&Xd(el)&&(el=null),tl!==null&&Xd(tl)&&(tl=null),nl!==null&&Xd(nl)&&(nl=null),Qc.forEach(z_),$c.forEach(z_)}function qd(n,i){n.blockedOn===i&&(n.blockedOn=null,hA||(hA=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,CM)))}var Zd=null;function Y_(n){Zd!==n&&(Zd=n,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Zd===n&&(Zd=null);for(var i=0;i<n.length;i+=3){var r=n[i],u=n[i+1],E=n[i+2];if(typeof u!="function"){if(dA(u||r)===null)continue;break}var A=Ps(r);A!==null&&(n.splice(i,3),i-=3,dm(A,{pending:!0,data:E,method:r.method,action:u},u,E))}}))}function eu(n){function i(F){return qd(F,n)}el!==null&&qd(el,n),tl!==null&&qd(tl,n),nl!==null&&qd(nl,n),Qc.forEach(i),$c.forEach(i);for(var r=0;r<al.length;r++){var u=al[r];u.blockedOn===n&&(u.blockedOn=null)}for(;0<al.length&&(r=al[0],r.blockedOn===null);)j_(r),r.blockedOn===null&&al.shift();if(r=(n.ownerDocument||n).$$reactFormReplay,r!=null)for(u=0;u<r.length;u+=3){var E=r[u],A=r[u+1],b=E[ba]||null;if(typeof A=="function")b||Y_(r);else if(b){var v=null;if(A&&A.hasAttribute("formAction")){if(E=A,b=A[ba]||null)v=b.formAction;else if(dA(E)!==null)continue}else v=b.action;typeof v=="function"?r[u+1]=v:(r.splice(u,3),u-=3),Y_(r)}}}function fA(n){this._internalRoot=n}Qd.prototype.render=fA.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(o(409));var r=i.current,u=Fa();P_(r,u,n,i,null,null)},Qd.prototype.unmount=fA.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;P_(n.current,2,null,n,null,null),Ld(),i[ks]=null}};function Qd(n){this._internalRoot=n}Qd.prototype.unstable_scheduleHydration=function(n){if(n){var i=sS();n={blockedOn:null,target:n,priority:i};for(var r=0;r<al.length&&i!==0&&i<al[r].priority;r++);al.splice(r,0,n),r===0&&j_(n)}};var K_=t.version;if(K_!=="19.1.0")throw Error(o(527,K_,"19.1.0"));z.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(o(188)):(n=Object.keys(n).join(","),Error(o(268,n)));return n=h(i),n=n!==null?m(n):null,n=n===null?null:n.stateNode,n};var bM={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:w,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $d=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$d.isDisabled&&$d.supportsFiber)try{ko=$d.inject(bM),rt=$d}catch{}}return nu.createRoot=function(n,i){if(!s(n))throw Error(o(299));var r=!1,u="",E=sI,A=rI,b=cI,v=null;return i!=null&&(i.unstable_strictMode===!0&&(r=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(E=i.onUncaughtError),i.onCaughtError!==void 0&&(A=i.onCaughtError),i.onRecoverableError!==void 0&&(b=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(v=i.unstable_transitionCallbacks)),i=k_(n,1,!1,null,null,r,u,E,A,b,v,null),n[ks]=i.current,qm(n),new fA(i)},nu.hydrateRoot=function(n,i,r){if(!s(n))throw Error(o(299));var u=!1,E="",A=sI,b=rI,v=cI,F=null,re=null;return r!=null&&(r.unstable_strictMode===!0&&(u=!0),r.identifierPrefix!==void 0&&(E=r.identifierPrefix),r.onUncaughtError!==void 0&&(A=r.onUncaughtError),r.onCaughtError!==void 0&&(b=r.onCaughtError),r.onRecoverableError!==void 0&&(v=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(F=r.unstable_transitionCallbacks),r.formState!==void 0&&(re=r.formState)),i=k_(n,1,!0,i,r??null,u,E,A,b,v,F,re),i.context=U_(null),r=i.current,u=Fa(),u=lc(u),E=Bo(u),E.callback=null,Fo(r,E,u),r=u,i.current.lanes=r,Ll(i,r),zi(i),n[ks]=i.current,qm(n),new Qd(i)},nu.version="19.1.0",nu}var tp;function PM(){if(tp)return mA.exports;tp=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),mA.exports=UM(),mA.exports}var wM=PM(),C=LR();const Ha=jN(C),xR=DM({__proto__:null,default:Ha},[C]);var YN={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Jl=Ha.createContext&&Ha.createContext(YN),GM=["attr","size","title"];function BM(e,t){if(e==null)return{};var a=FM(e,t),o,s;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(s=0;s<c.length;s++)o=c[s],!(t.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(a[o]=e[o])}return a}function FM(e,t){if(e==null)return{};var a={};for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){if(t.indexOf(o)>=0)continue;a[o]=e[o]}return a}function Lh(){return Lh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},Lh.apply(this,arguments)}function np(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,o)}return a}function xh(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?np(Object(a),!0).forEach(function(o){jM(e,o,a[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):np(Object(a)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(a,o))})}return e}function jM(e,t,a){return t=zM(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function zM(e){var t=YM(e,"string");return typeof t=="symbol"?t:t+""}function YM(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var o=a.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function KN(e){return e&&e.map((t,a)=>Ha.createElement(t.tag,xh({key:a},t.attr),KN(t.child)))}function Ai(e){return t=>Ha.createElement(KM,Lh({attr:xh({},e.attr)},t),KN(e.child))}function KM(e){var t=a=>{var{attr:o,size:s,title:c}=e,d=BM(e,GM),f=s||a.size||"1em",h;return a.className&&(h=a.className),e.className&&(h=(h?h+" ":"")+e.className),Ha.createElement("svg",Lh({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},a.attr,o,d,{className:h,style:xh(xh({color:e.color||a.color},a.style),e.style),height:f,width:f,xmlns:"http://www.w3.org/2000/svg"}),c&&Ha.createElement("title",null,c),e.children)};return Jl!==void 0?Ha.createElement(Jl.Consumer,null,a=>t(a)):t(YN)}function VM(e){return Ai({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M407.8 294.7c-3.3-.4-6.7-.8-10-1.3c3.4 .4 6.7 .9 10 1.3zM288 227.1C261.9 176.4 190.9 81.9 124.9 35.3C61.6-9.4 37.5-1.7 21.6 5.5C3.3 13.8 0 41.9 0 58.4S9.1 194 15 213.9c19.5 65.7 89.1 87.9 153.2 80.7c3.3-.5 6.6-.9 10-1.4c-3.3 .5-6.6 1-10 1.4C74.3 308.6-9.1 342.8 100.3 464.5C220.6 589.1 265.1 437.8 288 361.1c22.9 76.7 49.2 222.5 185.6 103.4c102.4-103.4 28.1-156-65.8-169.9c-3.3-.4-6.7-.8-10-1.3c3.4 .4 6.7 .9 10 1.3c64.1 7.1 133.6-15.1 153.2-80.7C566.9 194 576 75 576 58.4s-3.3-44.7-21.6-52.9c-15.8-7.1-40-14.9-103.2 29.8C385.1 81.9 314.1 176.4 288 227.1z"},child:[]}]})(e)}function WM(e){return Ai({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"},child:[]}]})(e)}function XM(e){return Ai({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M192 32c0 17.7 14.3 32 32 32c123.7 0 224 100.3 224 224c0 17.7 14.3 32 32 32s32-14.3 32-32C512 128.9 383.1 0 224 0c-17.7 0-32 14.3-32 32zm0 96c0 17.7 14.3 32 32 32c70.7 0 128 57.3 128 128c0 17.7 14.3 32 32 32s32-14.3 32-32c0-106-86-192-192-192c-17.7 0-32 14.3-32 32zM96 144c0-26.5-21.5-48-48-48S0 117.5 0 144V368c0 79.5 64.5 144 144 144s144-64.5 144-144s-64.5-144-144-144H128v96h16c26.5 0 48 21.5 48 48s-21.5 48-48 48s-48-21.5-48-48V144z"},child:[]}]})(e)}function qM(e){return Ai({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M249.6 471.5c10.8 3.8 22.4-4.1 22.4-15.5V78.6c0-4.2-1.6-8.4-5-11C247.4 52 202.4 32 144 32C93.5 32 46.3 45.3 18.1 56.1C6.8 60.5 0 71.7 0 83.8V454.1c0 11.9 12.8 20.2 24.1 16.5C55.6 460.1 105.5 448 144 448c33.9 0 79 14 105.6 23.5zm76.8 0C353 462 398.1 448 432 448c38.5 0 88.4 12.1 119.9 22.6c11.3 3.8 24.1-4.6 24.1-16.5V83.8c0-12.1-6.8-23.3-18.1-27.6C529.7 45.3 482.5 32 432 32c-58.4 0-103.4 20-123 35.6c-3.3 2.6-5 6.8-5 11V456c0 11.4 11.7 19.3 22.4 15.5z"},child:[]}]})(e)}function ZM(e){return Ai({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"},child:[]}]})(e)}function QM(e){return Ai({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M352 144c0-44.2 35.8-80 80-80s80 35.8 80 80v48c0 17.7 14.3 32 32 32s32-14.3 32-32V144C576 64.5 511.5 0 432 0S288 64.5 288 144v48H64c-35.3 0-64 28.7-64 64V448c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V256c0-35.3-28.7-64-64-64H352V144z"},child:[]}]})(e)}function $M(e){return Ai({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M144 144v48H304V144c0-44.2-35.8-80-80-80s-80 35.8-80 80zM80 192V144C80 64.5 144.5 0 224 0s144 64.5 144 144v48h16c35.3 0 64 28.7 64 64V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V256c0-35.3 28.7-64 64-64H80z"},child:[]}]})(e)}function VN(e){return Ai({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"},child:[]}]})(e)}const JM="7.41",bi=16;var vn=(e=>(e.Exact="Exact",e.SkillSequence="SkillSequence",e.Edited="Edited",e))(vn||{}),di=(e=>(e.Record="Record",e.SkillSequencePresets="SkillSequencePresets",e.MarkerTrackIndividual="MarkerTrackIndividual",e.MarkerTracksCombined="MarkerTracksCombined",e.MarkerTrackSet="MarkerTrackSet",e))(di||{}),ri=(e=>(e[e.RealTime=0]="RealTime",e[e.RealTimeAutoPause=1]="RealTimeAutoPause",e[e.Manual=2]="Manual",e))(ri||{}),Oo=(e=>(e[e.Initial=0]="Initial",e[e.FpsTax=1]="FpsTax",e[e.AllaganGcdFormula=2]="AllaganGcdFormula",e))(Oo||{});const HR={version:2};let WN=!1;function eL(){return WN}const Ef="DT",uu=window.location.hostname.startsWith("beta"),tL=localStorage.length===0;function Rt(e){const t=localStorage.getItem(Ef+"."+e);return localStorage.getItem(e)!==null&&(WN=!0),t}function St(e,t){localStorage.setItem(Ef+"."+e,t)}function $A(e){localStorage.removeItem(Ef+"."+e)}function XN(){Object.keys(localStorage).forEach(e=>{e.startsWith(Ef+".")&&localStorage.removeItem(e)})}function qN(e,t){const a=e in gA?gA[e]:gA.NEVER;return t>=a.level}const le=()=>e=>e,nL=le()({BENEFIC:{id:3594,name:"Benefic",label:{zh:"",ja:""}},LIGHTSPEED:{id:3606,name:"Lightspeed",label:{zh:"",ja:""}},HELIOS:{id:3600,name:"Helios",label:{zh:"",ja:""}},ASCEND:{id:3603,name:"Ascend",label:{zh:"",ja:""}},ESSENTIAL_DIGNITY:{id:3614,name:"Essential Dignity",label:{zh:"",ja:""}},BENEFIC_II:{id:3610,name:"Benefic II",label:{zh:"",ja:""}},ASTRAL_DRAW:{id:37017,name:"Astral Draw",label:{zh:"",ja:""}},UMBRAL_DRAW:{id:37018,name:"Umbral Draw",label:{zh:"",ja:""}},PLAY_I:{id:37019,name:"Play I",label:{zh:"I",ja:"I"}},PLAY_II:{id:37020,name:"Play II",label:{zh:"II",ja:"II"}},PLAY_III:{id:37021,name:"Play III",label:{zh:"III",ja:"III"}},ASPECTED_BENEFIC:{id:3595,name:"Aspected Benefic",label:{zh:"",ja:""}},ASPECTED_HELIOS:{id:3601,name:"Aspected Helios",label:{zh:"",ja:""}},GRAVITY:{id:3615,name:"Gravity",label:{zh:"",ja:""}},COMBUST_II:{id:3608,name:"Combust II",label:{zh:"",ja:""}},SYNASTRY:{id:3612,name:"Synastry",label:{zh:"",ja:""}},DIVINATION:{id:16552,name:"Divination",label:{zh:"",ja:""}},COLLECTIVE_UNCONSCIOUS:{id:3613,name:"Collective Unconscious",label:{zh:"",ja:""}},CELESTIAL_OPPOSITION:{id:16553,name:"Celestial Opposition",label:{zh:"",ja:""}},EARTHLY_STAR:{id:7439,name:"Earthly Star",label:{zh:"",ja:""}},STELLAR_DETONATION:{id:8324,name:"Stellar Detonation",label:{zh:"",ja:""}},MALEFIC_III:{id:7442,name:"Malefic III",label:{zh:"",ja:""}},MINOR_ARCANA:{id:37022,name:"Minor Arcana",label:{zh:"",ja:""}},COMBUST_III:{id:16554,name:"Combust III",label:{zh:"",ja:""}},MALEFIC_IV:{id:16555,name:"Malefic IV",label:{zh:"",ja:""}},CELESTIAL_INTERSECTION:{id:16556,name:"Celestial Intersection",label:{zh:"",ja:""}},HOROSCOPE:{id:16557,name:"Horoscope",label:{zh:"",ja:""}},HOROSCOPE_RECAST:{id:16558,name:"Horoscope (Recast)",label:{zh:"",ja:""}},NEUTRAL_SECT:{id:16559,name:"Neutral Sect",label:{zh:"",ja:""}},FALL_MALEFIC:{id:25871,name:"Fall Malefic",label:{zh:"",ja:""}},GRAVITY_II:{id:25872,name:"Gravity II",label:{zh:"",ja:""}},EXALTATION:{id:25873,name:"Exaltation",label:{zh:"",ja:""}},MACROCOSMOS:{id:25874,name:"Macrocosmos",label:{zh:"",ja:""}},MICROCOSMOS:{id:25875,name:"Microcosmos",label:{zh:"",ja:""}},ORACLE:{id:37029,name:"Oracle",label:{zh:"",ja:""}},HELIOS_CONJUNCTION:{id:37030,name:"Helios Conjunction",label:{zh:"",ja:""}},SUN_SIGN:{id:37031,name:"Sun Sign",label:{zh:"",ja:""}},THE_BALANCE:{id:37023,name:"The Balance",label:{zh:"",ja:""}},THE_ARROW:{id:37024,name:"The Arrow",label:{zh:"",ja:""}},THE_SPIRE:{id:37025,name:"The Spire",label:{zh:"",ja:""}},THE_SPEAR:{id:37026,name:"The Spear",label:{zh:"",ja:""}},THE_BOLE:{id:37027,name:"The Bole",label:{zh:"",ja:""}},THE_EWER:{id:37028,name:"The Ewer",label:{zh:"",ja:""}},LORD_OF_CROWNS:{id:7444,name:"Lord of Crowns",label:{zh:"",ja:""}},LADY_OF_CROWNS:{id:7445,name:"Lady of Crowns",label:{zh:"",ja:""}}}),aL=le()({cd_LIGHTSPEED:{name:"cd_Lightspeed"},cd_ESSENTIAL_DIGNITY:{name:"cd_EssentialDignity"},cd_ASTRAL_DRAW:{name:"cd_AstralDraw"},cd_PLAY_I:{name:"cd_PlayI"},cd_PLAY_II:{name:"cd_PlayII"},cd_PLAY_III:{name:"cd_PlayIII"},cd_SYNASTRY:{name:"cd_Synastry"},cd_DIVINATION:{name:"cd_Divination"},cd_COLLECTIVE_UNCONSCIOUS:{name:"cd_CollectiveUnconscious"},cd_CELESTIAL_OPPOSITION:{name:"cd_CelestialOpposition"},cd_EARTHLY_STAR:{name:"cd_EarthlyStar"},cd_STELLAR_DETONATION:{name:"cd_StellarDetonation"},cd_MINOR_ARCANA:{name:"cd_MinorArcana"},cd_CELESTIAL_INTERSECTION:{name:"cd_CelestialIntersection"},cd_HOROSCOPE:{name:"cd_Horoscope"},cd_HOROSCOPE_RECAST:{name:"cd_HoroscopeRecast"},cd_NEUTRAL_SECT:{name:"cd_NeutralSect"},cd_EXALTATION:{name:"cd_Exaltation"},cd_MACROCOSMOS:{name:"cd_Macrocosmos"},cd_MICROCOSMOS:{name:"cd_Microcosmos"},cd_ORACLE:{name:"cd_Oracle"},cd_SUN_SIGN:{name:"cd_SunSign"}}),iL=le()({ARCANA:{name:"Arcana",label:{zh:""}},MINOR_ARCANA:{name:"Minor Arcana",label:{zh:""}}}),kR=le()({LIGHTSPEED:{name:"Lightspeed",label:{zh:""}},THE_BALANCE:{name:"The Balance",label:{zh:""}},THE_ARROW:{name:"The Arrow",label:{zh:""}},THE_SPIRE:{name:"The Spire",label:{zh:""}},THE_SPEAR:{name:"The Spear",label:{zh:""}},THE_BOLE:{name:"The Bole",label:{zh:""}},THE_EWER:{name:"The Ewer",label:{zh:""}},ASPECTED_BENEFIC:{name:"Aspected Benefic",label:{zh:""}},ASPECTED_HELIOS:{name:"Aspected Helios",label:{zh:""}},SYNASTRY:{name:"Synastry",label:{zh:""}},DIVINATION:{name:"Divination",label:{zh:""}},DIVINING:{name:"Divining",label:{zh:""}},COLLECTIVE_UNCONSCIOUS:{name:"Collective Unconscious",label:{zh:""}},COLLECTIVE_UNCONSCIOUS_MIT:{name:"Collective Unconscious (Mitigation)",label:{zh:""}},WHEEL_OF_FORTUNE:{name:"Wheel of Fortune",label:{zh:""}},OPPOSITION:{name:"Opposition",label:{zh:""}},EARTHLY_DOMINANCE:{name:"Earthly Dominance",mayNotBeCanceled:!0,label:{zh:""}},GIANT_DOMINANCE:{name:"Giant Dominance",mayNotBeCanceled:!0,label:{zh:""}},COMBUST_II:{name:"Combust II",label:{zh:""}},COMBUST_III:{name:"Combust III",label:{zh:""}},INTERSECTION:{name:"Intersection",label:{zh:""}},HOROSCOPE:{name:"Horoscope",label:{zh:""}},HOROSCOPE_HELIOS:{name:"Horoscope Helios",label:{zh:""}},NEUTRAL_SECT:{name:"Neutral Sect",label:{zh:""}},NEUTRAL_SECT_SHIELD:{name:"Neutral Sect (Shield)",label:{zh:""}},SUNTOUCHED:{name:"Suntouched",label:{zh:""}},EXALTATION:{name:"Exaltation",label:{zh:""}},MACROCOSMOS:{name:"Macrocosmos",label:{zh:""}},HELIOS_CONJUNCTION:{name:"Helios Conjunction",label:{zh:""}},SUN_SIGN:{name:"Sun Sign",label:{zh:""}}}),oL=le()({ARCANA_1:{name:"Arcana 1",label:{zh:"1"}},ARCANA_2:{name:"Arcana 2",label:{zh:"2"}},ARCANA_3:{name:"Arcana 3",label:{zh:"3"}},NEXT_DRAW:{name:"Next Draw",label:{zh:""}}}),lL=le()({COMBUST_MASTERY_II:{name:"Combust Mastery II",level:72},MALEFIC_MASTERY_III:{name:"Malefic Mastery III",level:82},ENHANCED_ESSENTIAL_DIGNITY:{name:"Enhanced Essential Dignity",level:78},MALEFIC_MASTERY_IV:{name:"Malefic Mastery IV",level:82},GRAVITY_MASTERY:{name:"Gravity Mastery",level:82},ENHANCED_CELESTIAL_INTERSECTION:{name:"Enhanced Celestial Intersection",level:88},ENHANCED_DIVINATION:{name:"Enhanced Divination",level:92},ASPECTED_HELIOS_MASTERY:{name:"Aspected Helios Mastery",level:96},ENHANCED_ESSENTIAL_DIGNITY_II:{name:"Enhanced Essential Dignity_II",level:98},ENHANCED_NEUTRAL_SECT:{name:"Enhanced Neutral Sect",level:100}}),sL={...iL,...kR,...oL},rL=le()({BLIZZARD:{id:142,name:"Blizzard",label:{zh:"1",ja:""},discordEmote:"B1"},FIRE:{id:141,name:"Fire",label:{zh:"1",ja:""},discordEmote:"F1"},BLIZZARD_II:{id:25793,name:"Blizzard 2",label:{zh:"2",ja:""},discordEmote:"F2"},FIRE_II:{id:147,name:"Fire 2",label:{zh:"2",ja:""},discordEmote:"F2"},TRANSPOSE:{id:149,name:"Transpose",label:{zh:"",ja:""},discordEmote:"Transpose"},THUNDER_III:{id:153,name:"Thunder 3",label:{zh:"3",ja:""},discordEmote:"T3"},THUNDER_IV:{id:7420,name:"Thunder 4",label:{zh:""},discordEmote:"T4"},MANAWARD:{id:157,name:"Manaward",label:{zh:"",ja:""},discordEmote:"Manaward"},MANAFONT:{id:158,name:"Manafont",label:{zh:"",ja:""},discordEmote:"Manafont"},LEY_LINES:{id:3573,name:"Ley Lines",label:{zh:"",ja:""},discordEmote:"LL"},FIRE_III:{id:152,name:"Fire 3",label:{zh:"3",ja:""},discordEmote:"F3"},BLIZZARD_III:{id:154,name:"Blizzard 3",label:{zh:"3",ja:""},discordEmote:"B3"},FREEZE:{id:159,name:"Freeze",label:{zh:"",ja:""},discordEmote:"Freeze"},FLARE:{id:162,name:"Flare",label:{zh:"",ja:""},discordEmote:"Flare"},BLIZZARD_IV:{id:3576,name:"Blizzard 4",label:{zh:"4",ja:""},discordEmote:"B4"},FIRE_IV:{id:3577,name:"Fire 4",label:{zh:"4",ja:""},discordEmote:"F4"},BETWEEN_THE_LINES:{id:7419,name:"Between the Lines",label:{zh:"",ja:""},discordEmote:"BtL"},AETHERIAL_MANIPULATION:{id:155,name:"Aetherial Manipulation",label:{zh:"",ja:""},discordEmote:"AM"},TRIPLECAST:{id:7421,name:"Triplecast",label:{zh:"",ja:""},discordEmote:"Triple"},FOUL:{id:7422,name:"Foul",label:{zh:"",ja:""},discordEmote:"Foul"},DESPAIR:{id:16505,name:"Despair",label:{zh:"",ja:""},discordEmote:"Despair"},UMBRAL_SOUL:{id:16506,name:"Umbral Soul",label:{zh:"",ja:""},discordEmote:"Soul"},XENOGLOSSY:{id:16507,name:"Xenoglossy",label:{zh:"",ja:""},discordEmote:"Xeno"},HIGH_FIRE_II:{id:25794,name:"High Fire 2",label:{zh:"2",ja:""},discordEmote:"HF2"},HIGH_BLIZZARD_II:{id:25795,name:"High Blizzard 2",label:{zh:"2",ja:""},discordEmote:"HB2"},AMPLIFIER:{id:25796,name:"Amplifier",label:{zh:"",ja:""},discordEmote:"Amplifier"},PARADOX:{id:25797,name:"Paradox",label:{zh:"",ja:""},discordEmote:"Para"},HIGH_THUNDER:{id:36986,name:"High Thunder",label:{zh:"",ja:""},discordEmote:"HThunder"},HIGH_THUNDER_II:{id:36987,name:"High Thunder 2",label:{zh:""},discordEmote:"HThunder2"},FLARE_STAR:{id:36989,name:"Flare Star",label:{zh:"",ja:""},discordEmote:"FS"},RETRACE:{id:36988,name:"Retrace",label:{zh:"",ja:""}}}),cL=le()({cd_TRANSPOSE:{name:"cd_Transpose"},cd_LEY_LINES:{name:"cd_LeyLines"},cd_MANAWARD:{name:"cd_Manaward"},cd_BETWEEN_THE_LINES:{name:"cd_BetweenTheLines"},cd_AETHERIAL_MANIPULATION:{name:"cd_AetherialManipulation"},cd_TRIPLECAST:{name:"cd_Triplecast"},cd_MANAFONT:{name:"cd_Manafont"},cd_AMPLIFIER:{name:"cd_Amplifier"},cd_RETRACE:{name:"cd_Retrace"}}),uL=le()({POLYGLOT:{name:"Polyglot",label:{zh:""}},ASTRAL_FIRE:{name:"Astral Fire",label:{zh:""}},UMBRAL_ICE:{name:"Umbral Ice",label:{zh:""}},UMBRAL_HEART:{name:"Umbral Heart",label:{zh:""}},ENOCHIAN:{name:"Enochian",label:{zh:""}},PARADOX:{name:"Paradox",label:{zh:""}},ASTRAL_SOUL:{name:"Astral Soul",label:{zh:""}}}),UR=le()({LEY_LINES:{name:"Ley Lines",label:{zh:""},mayBeToggled:!0},TRIPLECAST:{name:"Triplecast",label:{zh:""},maximumStacks:3},FIRESTARTER:{name:"Firestarter",label:{zh:""}},THUNDERHEAD:{name:"Thunderhead",label:{zh:""}},THUNDER_III:{name:"Thunder III",label:{zh:""}},THUNDER_IV:{name:"Thunder IV",label:{zh:""}},HIGH_THUNDER:{name:"High Thunder",label:{zh:""}},HIGH_THUNDER_II:{name:"High Thunder II",label:{zh:""}},MANAWARD:{name:"Manaward",label:{zh:""}}}),dL=le()({}),hL=le()({ENHANCED_ENOCHIAN_II:{name:"Enhanced Enochian II",level:78},ENHANCED_POLYGLOT:{name:"Enhanced Polyglot",level:80},ENHANCED_FOUL:{name:"Enhanced Foul",level:80},ASPECT_MASTERY_IV:{name:"Aspect Mastery IV",level:82},ENHANCED_MANAFONT:{name:"Enhanced Manafont",level:84},ENHANCED_ENOCHIAN_III:{name:"Enhanced Enochian III",level:86},ASPECT_MASTERY_V:{name:"Aspect Mastery V",level:90},THUNDER_MASTERY_III:{name:"Thunder Mastery III",level:92},ENHANCED_LEYLINES:{name:"Enhanced Ley Lines",level:96},ENHANCED_ENOCHIAN_IV:{name:"Enhanced Enochian IV",level:96},ENHANCED_POLYGLOT_II:{name:"Enhanced Polyglot II",level:98},ENHANCED_ASTRAL_FIRE:{name:"Enhanced Astral Fire",level:100}}),fL={...uL,...UR,...dL},EL=le()({HEAVY_SHOT:{id:97,name:"Heavy Shot"},QUICK_NOCK:{id:100,name:"Quick Nock"},BLOODLETTER:{id:110,name:"Bloodletter"},BARRAGE:{id:107,name:"Barrage"},RAGING_STRIKES:{id:101,name:"Raging Strikes"},REPELLING_SHOT:{id:112,name:"Repelling Shot"},WIDE_VOLLEY:{id:111,name:"Wide Volley"},MAGES_BALLAD:{id:114,name:"Mage's Ballad"},ARMYS_PAEON:{id:116,name:"Army's Paeon"},RAIN_OF_DEATH:{id:117,name:"Rain of Death"},BATTLE_VOICE:{id:118,name:"Battle Voice"},EMYPREAL_ARROW:{id:3558,name:"Empyreal Arrow"},WANDERERS_MINUET:{id:3559,name:"The Wanderer's Minuet"},IRON_JAWS:{id:3560,name:"Iron Jaws"},WARDENS_PAEAN:{id:3561,name:"Warden's Paean"},SIDEWINDER:{id:3562,name:"Sidewinder"},PITCH_PERFECT:{id:7404,name:"Pitch Perfect"},TROUBADOUR:{id:7405,name:"Troubadour"},CAUSTIC_BITE:{id:7406,name:"Caustic Bite"},STORMBITE:{id:7407,name:"Stormbite"},NATURES_MINNE:{id:7408,name:"Nature's Minne"},REFULGENT_ARROW:{id:7409,name:"Refulgent Arrow"},SHADOWBITE:{id:16494,name:"Shadowbite"},BURST_SHOT:{id:16495,name:"Burst Shot"},APEX_ARROW:{id:16496,name:"Apex Arrow"},LADONSBITE:{id:25783,name:"Ladonsbite"},BLAST_ARROW:{id:25784,name:"Blast Arrow"},RADIANT_FINALE:{id:25785,name:"Radiant Finale"},HEARTBREAK_SHOT:{id:36975,name:"Heartbreak Shot"},RESONANT_ARROW:{id:36976,name:"Resonant Arrow"},RADIANT_ENCORE:{id:36977,name:"Radiant Encore"}}),mL=le()({cd_RAGING_STRIKES:{name:"cd_RagingStrikes"},cd_BARRAGE:{name:"cd_Barrage"},cd_EMPYREAL_ARROW:{name:"cd_EmpyrealArrow"},cd_HEARTBREAK_SHOT:{name:"cd_HeartbreakShot"},cd_SIDEWINDER:{name:"cd_Sidewinder"},cd_WANDERERS_MINUET:{name:"cd_WanderersMinuet"},cd_MAGES_BALLAD:{name:"cd_MagesBallad"},cd_ARMYS_PAEON:{name:"cd_ArmysPaeon"},cd_WARDENS_PAEAN:{name:"cd_WardensPaean"},cd_NATURES_MINNE:{name:"cd_NaturesMinne"},cd_REPELLING_SHOT:{name:"cd_RepellingShot"},cd_BATTLE_VOICE:{name:"cd_BattleVoice"},cd_RADIANT_FINALE:{name:"cd_RadiantFinale"},cd_TROUBADOUR:{name:"cd_Troubadour"},cd_PITCH_PERFECT:{name:"cd_PitchPerfect"}}),AL=le()({SONG_TIMER:{name:"SongTimer"},SOUL_VOICE:{name:"Soul Voice"},PITCH_PERFECT:{name:"Pitch Perfect"},REPERTOIRE:{name:"Repertoire"},WANDERERS_CODA:{name:"Wanderer's Coda"},MAGES_CODA:{name:"Mage's Coda"},ARMYS_CODA:{name:"Army's Coda"}}),PR=le()({HAWKS_EYE:{name:"Hawk's Eye"},RAGING_STRIKES:{name:"Raging Strikes"},BARRAGE:{name:"Barrage"},ARMYS_MUSE:{name:"Army's Muse"},ARMYS_ETHOS:{name:"Army's Ethos"},BLAST_ARROW_READY:{name:"Blast Arrow Ready"},RESONANT_ARROW_READY:{name:"Resonant Arrow Ready"},RADIANT_ENCORE_READY:{name:"Radiant Encore Ready"},CAUSTIC_BITE:{name:"Caustic Bite"},STORMBITE:{name:"Stormbite"},MAGES_BALLAD:{name:"Mage's Ballad"},ARMYS_PAEON:{name:"Army's Paeon"},WANDERERS_MINUET:{name:"Wanderer's Minuet"},BATTLE_VOICE:{name:"Battle Voice"},WARDENS_PAEAN:{name:"Warden's Paean"},TROUBADOUR:{name:"Troubadour"},NATURES_MINNE:{name:"Nature's Minne"},RADIANT_FINALE:{name:"Radiant Finale"}}),RL=le()({RADIANT_CODA:{name:"Radiant Coda"},MUSE_REPERTOIRE:{name:"Muse Repertoire"},ETHOS_REPERTOIRE:{name:"Ethos Repertoire"}}),TL=le()({WIDE_VOLLEY_MASTERY:{name:"Wide Volley Mastery",level:72},BITE_MASTERY_II:{name:"Bite Mastery II",level:76},HEAVY_SHOT_MASTERY:{name:"Heavy Shot Mastery",level:76},ENHANCED_ARMYS_PAEON:{name:"Enhanced Army's Paeon",level:78},SOUL_VOICE:{name:"Soul Voice",level:80},QUICK_NOCK_MASTERY:{name:"Quick Nock Mastery",level:82},ENHANCED_BLOODLETTER:{name:"Enhanced Bloodletter",level:84},ENHANCED_APEX_ARROW:{name:"Enhanced Apex Arrow",level:86},ENHANCED_TROUBADOUR:{name:"Enhanced Troubadour",level:88},MINSTRELS_CODA:{name:"Minstrel's Coda",level:90},BLOODLETTER_MASTERY:{name:"Bloodletter Mastery",level:92},RANGED_MASTERY:{name:"Ranged Mastery",level:94},ENHANCED_BARRAGE:{name:"Enhanced Barrage",level:96},ENHANCED_RADIANT_FINALE:{name:"Enhanced Radiant Finale",level:100}}),SL={...AL,...PR,...RL},gL=le()({STANDARD_FINISH:{id:16003,name:"Standard Finish",label:{zh:""}},SINGLE_STANDARD_FINISH:{id:16191,name:"Single Standard Finish",label:{zh:""}},DOUBLE_STANDARD_FINISH:{id:16192,name:"Double Standard Finish",label:{zh:""}},FINISHING_MOVE:{id:36984,name:"Finishing Move",label:{zh:""}},LAST_DANCE:{id:36983,name:"Last Dance",label:{zh:""}},TECHNICAL_FINISH:{id:16004,name:"Technical Finish",label:{zh:""}},SINGLE_TECHNICAL_FINISH:{id:16193,name:"Single Technical Finish",label:{zh:""}},DOUBLE_TECHNICAL_FINISH:{id:16194,name:"Double Technical Finish",label:{zh:""}},TRIPLE_TECHNICAL_FINISH:{id:16195,name:"Triple Technical Finish",label:{zh:""}},QUADRUPLE_TECHNICAL_FINISH:{id:16196,name:"Quadruple Technical Finish",label:{zh:""}},TILLANA:{id:25790,name:"Tillana",label:{zh:""}},CASCADE:{id:15989,name:"Cascade",label:{zh:""}},FOUNTAIN:{id:15990,name:"Fountain",label:{zh:""}},REVERSE_CASCADE:{id:15991,name:"Reverse Cascade",label:{zh:""}},FOUNTAINFALL:{id:15992,name:"Fountainfall",label:{zh:""}},WINDMILL:{id:15993,name:"Windmill",label:{zh:""}},BLADESHOWER:{id:15994,name:"Bladeshower",label:{zh:""}},RISING_WINDMILL:{id:15995,name:"Rising Windmill",label:{zh:""}},BLOODSHOWER:{id:15996,name:"Bloodshower",label:{zh:""}},STANDARD_STEP:{id:15997,name:"Standard Step",label:{zh:""}},TECHNICAL_STEP:{id:15998,name:"Technical Step",label:{zh:""}},EMBOITE:{id:15999,name:"Emboite",label:{zh:""}},ENTRECHAT:{id:16e3,name:"Entrechat",label:{zh:""}},JETE:{id:16001,name:"Jete",label:{zh:""}},PIROUETTE:{id:16002,name:"Pirouette",label:{zh:""}},SABER_DANCE:{id:16005,name:"Saber Dance",label:{zh:""}},DANCE_OF_THE_DAWN:{id:36985,name:"Dance of the Dawn",label:{zh:""}},CLOSED_POSITION:{id:16006,name:"Closed Position",label:{zh:""}},FAN_DANCE:{id:16007,name:"Fan Dance",label:{zh:""}},FAN_DANCE_II:{id:16008,name:"Fan Dance II",label:{zh:""}},FAN_DANCE_III:{id:16009,name:"Fan Dance III",label:{zh:""}},FAN_DANCE_IV:{id:25791,name:"Fan Dance IV",label:{zh:""}},EN_AVANT:{id:16010,name:"En Avant",label:{zh:""}},DEVILMENT:{id:16011,name:"Devilment",label:{zh:""}},STARFALL_DANCE:{id:25792,name:"Starfall Dance",label:{zh:""}},SHIELD_SAMBA:{id:16012,name:"Shield Samba",label:{zh:""}},FLOURISH:{id:16013,name:"Flourish",label:{zh:""}},IMPROVISATION:{id:16014,name:"Improvisation",label:{zh:""}},IMPROVISED_FINISH:{id:25789,name:"Improvised Finish",label:{zh:""}},CURING_WALTZ:{id:16015,name:"Curing Waltz",label:{zh:""}},ENDING:{id:18073,name:"Ending",label:{zh:""}}}),IL=le()({cd_STANDARD_STEP:{name:"cd_StandardStep"},cd_TECHNICAL_STEP:{name:"cd_TechnicalStep"},cd_CLOSED_POSITION:{name:"cd_ClosedPosition"},cd_FAN_DANCE:{name:"cd_FanDance"},cd_FAN_DANCE_II:{name:"cd_FanDanceII",label:{zh:"CD"}},cd_FAN_DANCE_III:{name:"cd_FanDanceIII",label:{zh:"CD"}},cd_FAN_DANCE_IV:{name:"cd_FanDanceIV",label:{zh:"CD"}},cd_EN_AVANT:{name:"cd_EnAvant"},cd_DEVILMENT:{name:"cd_Devilment"},cd_SHIELD_SAMBA:{name:"cd_ShieldSamba"},cd_FLOURISH:{name:"cd_Flourish"},cd_IMPROVISATION:{name:"cd_Improvisation"},cd_IMPROVISED_FINISH:{name:"cd_ImprovisedFinish"},cd_CURING_WALTZ:{name:"cd_CuringWaltz"},cd_ENDING:{name:"cd_Ending"}}),_L=le()({ESPRIT_GAUGE:{name:"EspritGauge",label:{zh:""}},FEATHER_GAUGE:{name:"Feathers",label:{zh:""}},STANDARD_DANCE:{name:"Standard Dance",label:{zh:""}},TECHNICAL_DANCE:{name:"Technical Dance",label:{zh:""}}}),wR=le()({SILKEN_SYMMETRY:{name:"Silken Symmetry",label:{zh:""}},SILKEN_FLOW:{name:"Silken Flow",label:{zh:""}},FLOURISHING_SYMMETRY:{name:"Flourishing Symmetry",label:{zh:""}},FLOURISHING_FLOW:{name:"Flourishing Flow",label:{zh:""}},THREEFOLD_FAN_DANCE:{name:"Threefold Fan Dance",label:{zh:""}},FOURFOLD_FAN_DANCE:{name:"Fourfold Fan Dance",label:{zh:""}},FINISHING_MOVE_READY:{name:"Finishing Move Ready",label:{zh:""}},FLOURISHING_STARFALL:{name:"Flourishing Starfall",label:{zh:""}},STANDARD_STEP:{name:"Standard Step",label:{zh:""},mayNotBeCanceled:!0},TECHNICAL_STEP:{name:"Technical Step",label:{zh:""},mayNotBeCanceled:!0},LAST_DANCE_READY:{name:"Last Dance Ready",label:{zh:""}},DANCE_OF_THE_DAWN_READY:{name:"Dance of the Dawn Ready",label:{zh:""}},FLOURISHING_FINISH:{name:"Flourishing Finish",label:{zh:""}},SHIELD_SAMBA:{name:"Shield Samba",label:{zh:""}},IMPROVISATION:{name:"Improvisation",label:{zh:""},mayNotBeCanceled:!0},RISING_RHYTHM:{name:"Rising Rhythm",label:{zh:""},maximumStacks:4},IMPROVISATION_REGEN:{name:"Improvisation Regen",label:{zh:""}},IMPROVISED_FINISH:{name:"Improvised Finish",label:{zh:""}},DEVILMENT:{name:"Devilment",label:{zh:""}},TECHNICAL_FINISH:{name:"Technical Finish",label:{zh:""}},ESPRIT:{name:"Esprit",label:{zh:""},mayNotBeCanceled:!0},STANDARD_FINISH:{name:"Standard Finish",label:{zh:""}},CLOSED_POSITION:{name:"Closed Position",label:{zh:""},mayNotBeCanceled:!0},DANCE_PARTNER:{name:"Dance Partner",label:{zh:""}},STANDARD_FINISH_PARTNER:{name:"Standard Finish Partner",label:{zh:"buff"}},ESPRIT_PARTNER:{name:"Esprit Partner",label:{zh:"buff"}},ESPRIT_TECHNICAL:{name:"Esprit Technical",label:{zh:"buff"}}}),pL=le()({CASCADE_COMBO:{name:"CascadeCombo",label:{zh:""}},WINDMILL_COMBO:{name:"WindmillCombo",label:{zh:""}},STANDARD_BONUS:{name:"StandardBonus",label:{zh:""}},TECHNICAL_BONUS:{name:"TechnicalBonus",label:{zh:""}}}),NL=le()({ESPRIT:{name:"Esprit",level:76},ENHANCED_EN_AVANT_II:{name:"Enhanced En Avant II",level:78},ENHANCED_TECHNICAL_FINISH:{name:"Enhanced Technical Finish",level:82},ENHANCED_ESPRIT:{name:"Enhanced Esprit",level:84},ENHANCED_FLOURISH:{name:"Enhanced Flourish",level:86},ENHANCED_SHIELD_SAMBA:{name:"Enhanced Shield Samba",level:88},ENHANCED_DEVILMENT:{name:"Enhanced Devilment",level:90},ENHANCED_STANDARD_FINISH:{name:"Enhanced Standard Finish",level:92},DYNAMIC_DANCER:{name:"Dynamic Dancer",level:94},ENHANCED_FLOURISH_II:{name:"Enhanced Flourish II",level:96},ENHANCED_TECHNICAL_FINISH_II:{name:"Enhanced Technical Finish II",level:100}}),CL={..._L,...wR,...pL},bL=le()({PIERCING_TALON:{id:90,name:"Piercing Talon"},TRUE_THRUST:{id:75,name:"True Thrust"},RAIDEN_THRUST:{id:16479,name:"Raiden Thrust"},DISEMBOWEL:{id:87,name:"Disembowel"},SPIRAL_BLOW:{id:36955,name:"Spiral Blow"},CHAOS_THRUST:{id:88,name:"Chaos Thrust"},CHAOTIC_SPRING:{id:25772,name:"Chaotic Spring"},WHEELING_THRUST:{id:3556,name:"Wheeling Thrust"},VORPAL_THRUST:{id:78,name:"Vorpal Thrust"},LANCE_BARRAGE:{id:36954,name:"Lance Barrage"},FULL_THRUST:{id:84,name:"Full Thrust"},HEAVENS_THRUST:{id:25771,name:"Heavens' Thrust"},FANG_AND_CLAW:{id:3554,name:"Fang and Claw"},DRAKESBANE:{id:36952,name:"Drakesbane"},DOOM_SPIKE:{id:86,name:"Doom Spike"},DRACONIAN_FURY:{id:25770,name:"Draconian Fury"},SONIC_THRUST:{id:7397,name:"Sonic Thrust"},COERTHAN_TORMENT:{id:16477,name:"Coerthan Torment"},LIFE_SURGE:{id:83,name:"Life Surge"},LANCE_CHARGE:{id:85,name:"Lance Charge"},JUMP:{id:92,name:"Jump"},HIGH_JUMP:{id:16478,name:"High Jump"},MIRAGE_DIVE:{id:7399,name:"Mirage Dive"},DRAGONFIRE_DIVE:{id:96,name:"Dragonfire Dive"},RISE_OF_THE_DRAGON:{id:36953,name:"Rise of the Dragon"},BATTLE_LITANY:{id:3557,name:"Battle Litany"},WYRMWIND_THRUST:{id:25773,name:"Wyrmwind Thrust"},GEIRSKOGUL:{id:3555,name:"Geirskogul"},NASTROND:{id:7400,name:"Nastrond"},STARDIVER:{id:16480,name:"Stardiver"},STARCROSS:{id:36956,name:"Starcross"},ELUSIVE_JUMP:{id:94,name:"Elusive Jump"},WINGED_GLIDE:{id:36951,name:"Winged Glide"}}),OL=le()({cd_LIFE_SURGE:{name:"cd_LifeSurge"},cd_LANCE_CHARGE:{name:"cd_LanceCharge"},cd_JUMP:{name:"cd_Jump"},cd_HIGH_JUMP:{name:"cd_HighJump"},cd_ELUSIVE_JUMP:{name:"cd_ElusiveJump"},cd_WINGED_GLIDE:{name:"cd_WingedGlide"},cd_DRAGONFIRE_DIVE:{name:"cd_DragonfireDive"},cd_BATTLE_LITANY:{name:"cd_BattleLitany"},cd_GEIRSKOGUL:{name:"cd_Geirskogul"},cd_MIRAGE_DIVE:{name:"cd_MirageDive"},cd_NASTROND:{name:"cd_Nastrond"},cd_STARDIVER:{name:"cd_Stardiver"},cd_WYRMWIND_THRUST:{name:"cd_WyrmwindThrust"},cd_RISE_OF_THE_DRAGON:{name:"cd_RiseOfTheDragon"},cd_STARCROSS:{name:"cd_Starcross"}}),DL=le()({LIFE_OF_THE_DRAGON:{name:"Life of the Dragon"},FIRSTMINDS_FOCUS:{name:"Firstminds' Focus"}}),GR=le()({LIFE_SURGE:{name:"Life Surge"},ENHANCED_PIERCING_TALON:{name:"Enhanced Piercing Talon"},POWER_SURGE:{name:"Power Surge"},LANCE_CHARGE:{name:"Lance Charge"},DIVE_READY:{name:"Dive Ready"},CHAOS_THRUST_DOT:{name:"Chaos Thrust DoT"},CHAOTIC_SPRING_DOT:{name:"Chaotic Spring DoT"},DRAGONS_FLIGHT:{name:"Dragon's Flight"},BATTLE_LITANY:{name:"Battle Litany"},NASTROND_READY:{name:"Nastrond Ready"},DRACONIAN_FIRE:{name:"Draconian Fire"},STARCROSS_READY:{name:"Starcross Ready"}}),yL=le()({DRG_CHAOS_COMBO_TRACKER:{name:"DRG Chaos Combo"},DRG_HEAVENS_COMBO_TRACKER:{name:"DRG Heavens Combo"},DRG_AOE_COMBO_TRACKER:{name:"DRG AOE Combo"}}),vL=le()({JUMP_MASTERY:{name:"Jump Mastery",level:74},LANCE_MASTERY:{name:"Lance Mastery",level:76},ENHANCED_COERTHAN_TORMENT:{name:"Enhanced Coerthan Torment",level:82},ENHANCED_WINGED_GLIDE:{name:"Enhanced Winged Glide",level:84},LANCE_MASTERY_II:{name:"Lance Mastery II",level:86},ENHANCED_LIFE_SURGE:{name:"Enhanced Life Surge",level:88},LANCE_MASTERY_III:{name:"Lance Mastery III",level:90},ENHANCED_DRAGONFIRE_DIVE:{name:"Enhanced Dragonfire Dive",level:92},MELEE_MASTERY_DRG:{name:"Melee Mastery DRG",level:94},LANCE_MASTERY_IV:{name:"Lance Mastery IV",level:96},ENHANCED_STARDIVER:{name:"Enhanced Stardiver",level:100}}),ML={...DL,...GR,...yL},LL=le()({HARD_SLASH:{id:3617,name:"Hard Slash",label:{zh:""}},SYPHON_STRIKE:{id:3623,name:"Syphon Strike",label:{zh:""}},UNLEASH:{id:3621,name:"Unleash",label:{zh:""}},GRIT:{id:3629,name:"Grit",label:{zh:""}},RELEASE_GRIT:{id:32067,name:"Release Grit",label:{zh:""}},UNMEND:{id:3624,name:"Unmend",label:{zh:""}},SOULEATER:{id:3632,name:"Souleater",label:{zh:""}},FLOOD_OF_DARKNESS:{name:"Flood of Darkness",label:{zh:""}},BLOOD_WEAPON:{id:3625,name:"Blood Weapon",label:{zh:""}},SHADOW_WALL:{id:3636,name:"Shadow Wall",label:{zh:""}},STALWART_SOUL:{id:16468,name:"Stalwart Soul",label:{zh:""}},EDGE_OF_DARKNESS:{name:"Edge of Darkness",label:{zh:""}},DARK_MIND:{id:3634,name:"Dark Mind",label:{zh:""}},LIVING_DEAD:{id:3638,name:"Living Dead",label:{zh:""}},SALTED_EARTH:{id:3639,name:"Salted Earth",label:{zh:""}},SHADOWSTRIDE:{id:36926,name:"Shadowstride",label:{zh:""}},ABYSSAL_DRAIN:{id:3641,name:"Abyssal Drain",label:{zh:""}},CARVE_AND_SPIT:{id:3643,name:"Carve and Spit",label:{zh:""}},BLOODSPILLER:{id:7392,name:"Bloodspiller",label:{zh:""}},QUIETUS:{id:7391,name:"Quietus",label:{zh:""}},DARK_MISSIONARY:{id:16471,name:"Dark Missionary",label:{zh:""}},DELIRIUM:{id:7390,name:"Delirium",label:{zh:""}},THE_BLACKEST_NIGHT:{id:7393,name:"The Blackest Night",label:{zh:""}},THE_BLACKEST_NIGHT_POP:{name:"Pop The Blackest Night",label:{zh:""}},FLOOD_OF_SHADOW:{id:16469,name:"Flood of Shadow",label:{zh:""}},EDGE_OF_SHADOW:{id:16470,name:"Edge of Shadow",label:{zh:""}},LIVING_SHADOW:{id:16472,name:"Living Shadow",label:{zh:""}},OBLATION:{id:25754,name:"Oblation",label:{zh:""}},SALT_AND_DARKNESS:{id:25755,name:"Salt and Darkness",label:{zh:""}},SHADOWBRINGER:{id:25757,name:"Shadowbringer",label:{zh:""}},SHADOWED_VIGIL:{id:36927,name:"Shadowed Vigil",label:{zh:""}},SCARLET_DELIRIUM:{id:36928,name:"Scarlet Delirium",label:{zh:""}},COMEUPPANCE:{id:36929,name:"Comeuppance",label:{zh:""}},TORCLEAVER:{id:36930,name:"Torcleaver",label:{zh:""}},IMPALEMENT:{id:36931,name:"Impalement",label:{zh:""}},DISESTEEM:{id:36932,name:"Disesteem",label:{zh:""}},ABYSSAL_DRAIN_PET:{id:17904,name:"Abyssal Drain (Esteem)",label:{zh:""}},SHADOWSTRIDE_PET:{id:38512,name:"Shadowstride (Esteem)",label:{zh:""}},SHADOWBRINGER_PET:{id:25881,name:"Shadowbringer (Esteem)",label:{zh:""}},EDGE_OF_SHADOW_PET:{id:17908,name:"Edge of Shadow (Esteem)",label:{zh:""}},FLOOD_OF_SHADOW_PET:{name:"Flood of Shadow (Esteem)",label:{zh:""}},BLOODSPILLER_PET:{id:17909,name:"Bloodspiller (Esteem)",label:{zh:""}},CARVE_AND_SPIT_PET:{name:"Carve and Spit (Esteem)",label:{zh:""}},DISESTEEM_PET:{id:36933,name:"Disesteem (Esteem)",label:{zh:""}}}),xL=le()({cd_GRIT:{name:"cd_Grit"},cd_RELEASE_GRIT:{name:"cd_ReleaseGrit"},cd_FLOOD_OF_DARKNESS:{name:"cd_FloodOfDarkness"},cd_SHADOW_WALL:{name:"cd_ShadowWall"},cd_DARK_MIND:{name:"cd_DarkMind"},cd_LIVING_DEAD:{name:"cd_LivingDead"},cd_SALTED_EARTH:{name:"cd_SaltedEarth"},cd_SHADOWSTRIDE:{name:"cd_Shadowstride"},cd_ABYSSAL_DRAIN:{name:"cd_AbyssalDrain"},cd_DARK_MISSIONARY:{name:"cd_DarkMissionary"},cd_DELIRIUM:{name:"cd_Delirium"},cd_THE_BLACKEST_NIGHT:{name:"cd_TheBlackestNight"},cd_THE_BLACKEST_NIGHT_POP:{name:"cd_TheBlackestNightPop"},cd_LIVING_SHADOW:{name:"cd_LivingShadow"},cd_OBLATION:{name:"cd_Oblation"},cd_SALT_AND_DARKNESS:{name:"cd_SaltAndDarkness"},cd_SHADOWBRINGER:{name:"cd_Shadowbringer"},cd_POP_TBN:{name:"cd_PopTBN"}}),HL=le()({DARKSIDE:{name:"Darkside",label:{zh:""}},BLOOD_GAUGE:{name:"Blood Gauge",label:{zh:""}}}),BR=le()({SALTED_EARTH:{name:"Salted Earth",mayBeToggled:!0,label:{zh:""}},GRIT:{name:"Grit",label:{zh:""}},SHADOW_WALL:{name:"Shadow Wall",label:{zh:""}},DARK_MIND:{name:"Dark Mind",label:{zh:""}},LIVING_DEAD:{name:"Living Dead",label:{zh:""}},WALKING_DEAD:{name:"Walking Dead",label:{zh:""}},UNDEAD_REBIRTH:{name:"Undead Rebirth",label:{zh:""}},DARK_MISSIONARY:{name:"Dark Missionary",label:{zh:""}},DELIRIUM:{name:"Delirium",maximumStacks:3,label:{zh:""}},BLOOD_WEAPON:{name:"Blood Weapon",maximumStacks:3,label:{zh:""}},BLACKEST_NIGHT:{name:"Blackest Night",label:{zh:""}},SCORN:{name:"Scorn",label:{zh:""}},OBLATION:{name:"Oblation",label:{zh:""}},SHADOWED_VIGIL:{name:"Shadowed Vigil",label:{zh:""}},VIGILANT:{name:"Vigilant",label:{zh:""}}}),kL=le()({DRK_COMBO_TRACKER:{name:"DRK Combo",label:{zh:""}},DRK_AOE_COMBO_TRACKER:{name:"DRK AOE Combo",label:{zh:"AOE"}},DRK_DELIRIUM_COMBO_TRACKER:{name:"DRK Delirium Combo",label:{zh:""}},DARK_ARTS:{name:"Dark Arts",label:{zh:""}},ESTEEM_TRACKER:{name:"Esteem Attacks",label:{zh:""}}}),UL=le()({DAKRSIDE_MASTERY:{name:"Darkside Mastery",level:74},ENHANCED_UNMEND:{name:"Enhanced Unmend",level:84},ENHANCED_LIVING_SHADOW:{name:"Enhanced Living Shadow",level:88},ENHANCED_LIVING_SHADOW_II:{name:"Enhanced Living Shadow II",level:90},SHADOW_WALL_MASTERY:{name:"Shadow Wall Mastery",level:92},ENHANCED_DELIRIUM:{name:"Enhanced Delirium",level:96},ENHANCED_LIVING_SHADOW_III:{name:"Enhanced Living Shadow III",level:100}}),PL={...HL,...BR,...kL},wL=le()({LIGHTNING_SHOT:{id:16143,name:"Lightning Shot",label:{zh:""}},KEEN_EDGE:{id:16137,name:"Keen Edge",label:{zh:""}},BRUTAL_SHELL:{id:16139,name:"Brutal Shell",label:{zh:""}},SOLID_BARREL:{id:16145,name:"Solid Barrel",label:{zh:""}},DEMON_SLICE:{id:16141,name:"Demon Slice",label:{zh:""}},DEMON_SLAUGHTER:{id:16149,name:"Demon Slaughter",label:{zh:""}},BURST_STRIKE:{id:16162,name:"Burst Strike",label:{zh:""}},FATED_CIRCLE:{id:16163,name:"Fated Circle",label:{zh:""}},BLOODFEST:{id:16164,name:"Bloodfest",label:{zh:""}},NO_MERCY:{id:16138,name:"No Mercy",label:{zh:""}},SONIC_BREAK:{id:16153,name:"Sonic Break",label:{zh:""}},GNASHING_FANG:{id:16146,name:"Gnashing Fang",label:{zh:""}},SAVAGE_CLAW:{id:16147,name:"Savage Claw",label:{zh:""}},WICKED_TALON:{id:16150,name:"Wicked Talon",label:{zh:""}},DOUBLE_DOWN:{id:25760,name:"Double Down",label:{zh:""}},REIGN_OF_BEASTS:{id:36937,name:"Reign of Beasts",label:{zh:""}},NOBLE_BLOOD:{id:36938,name:"Noble Blood",label:{zh:""}},LION_HEART:{id:36939,name:"Lion Heart",label:{zh:""}},CONTINUATION:{id:16155,name:"Continuation",label:{zh:""}},HYPERVELOCITY:{id:25759,name:"Hypervelocity",label:{zh:""}},FATED_BRAND:{id:36936,name:"Fated Brand",label:{zh:""}},JUGULAR_RIP:{id:16156,name:"Jugular Rip",label:{zh:""}},ABDOMEN_TEAR:{id:16157,name:"Abdomen Tear",label:{zh:""}},EYE_GOUGE:{id:16158,name:"Eye Gouge",label:{zh:""}},DANGER_ZONE:{id:16144,name:"Danger Zone",label:{zh:""}},BLASTING_ZONE:{id:16165,name:"Blasting Zone",label:{zh:""}},BOW_SHOCK:{id:16159,name:"Bow Shock",label:{zh:""}},TRAJECTORY:{id:36934,name:"Trajectory",label:{zh:""}},HEART_OF_STONE:{id:16161,name:"Heart of Stone",label:{zh:""}},HEART_OF_CORUNDUM:{id:25758,name:"Heart of Corundum",label:{zh:""}},SUPERBOLIDE:{id:16152,name:"Superbolide",label:{zh:""}},CAMOUFLAGE:{id:16140,name:"Camouflage",label:{zh:""}},NEBULA:{id:16148,name:"Nebula",label:{zh:""}},GREAT_NEBULA:{id:36935,name:"Great Nebula",label:{zh:""}},HEART_OF_LIGHT:{id:16160,name:"Heart of Light",label:{zh:""}},AURORA:{id:16151,name:"Aurora",label:{zh:""}},ROYAL_GUARD:{id:16142,name:"Royal Guard",label:{zh:""}},RELEASE_ROYAL_GUARD:{id:32068,name:"Release Royal Guard",label:{zh:""}}}),GL=le()({cd_NO_MERCY:{name:"cd_NoMercy"},cd_BLOODFEST:{name:"cd_Bloodfest"},cd_CAMOUFLAGE:{name:"cd_Camouflage"},cd_ROYAL_GUARD:{name:"cd_RoyalGuard"},cd_RELEASE_ROYAL_GUARD:{name:"cd_ReleaseRoyalGuard"},cd_DANGER_ZONE:{name:"cd_DangerZone"},cd_BLASTING_ZONE:{name:"cd_BlastingZone"},cd_NEBULA:{name:"cd_Nebula"},cd_GREAT_NEBULA:{name:"cd_GreatNebula"},cd_AURORA:{name:"cd_Aurora"},cd_SUPERBOLIDE:{name:"cd_Superbolide"},cd_TRAJECTORY:{name:"cd_Trajectory"},cd_GNASHING_FANG:{name:"cd_GnashingFang"},cd_BOW_SHOCK:{name:"cd_BowShock"},cd_HEART_OF_LIGHT:{name:"cd_HeartOfLight"},cd_HEART_OF_STONE:{name:"cd_HeartOfStone"},cd_HEART_OF_CORUNDUM:{name:"cd_HeartOfCorundum"},cd_DOUBLE_DOWN:{name:"cd_DoubleDown"},cd_CONTINUATION:{name:"cd_Continuation"},cd_HYPERVELOCITY:{name:"cd_Hypervelocity"},cd_FATED_BRAND:{name:"cd_FatedBrand"},cd_JUGULAR_RIP:{name:"cd_JugularRip"},cd_ABDOMEN_TEAR:{name:"cd_AbdomenTear"},cd_EYE_GOUGE:{name:"cd_EyeGouge"}}),BL=le()({POWDER_GAUGE:{name:"Powder Gauge",label:{zh:""}}}),FR=le()({NO_MERCY:{name:"No Mercy",label:{zh:""}},AURORA:{name:"Aurora",label:{zh:""}},BOW_SHOCK_DOT:{name:"Bow Shock DoT",label:{zh:""}},CAMOUFLAGE:{name:"Camouflage",label:{zh:""}},HEART_OF_CORUNDUM:{name:"Heart of Corundum",label:{zh:""}},CLARITY_OF_CORUNDUM:{name:"Clarity of Corundum",label:{zh:""}},CATHARSIS_OF_CORUNDUM:{name:"Catharsis of Corundum",label:{zh:""}},NEBULA:{name:"Nebula",label:{zh:""}},GREAT_NEBULA:{name:"Great Nebula",label:{zh:""}},HEART_OF_LIGHT:{name:"Heart of Light",label:{zh:""}},HEART_OF_STONE:{name:"Heart of Stone",label:{zh:""}},READY_TO_BLAST:{name:"Ready to Blast",label:{zh:""}},READY_TO_BREAK:{name:"Ready to Break",label:{zh:""}},READY_TO_GOUGE:{name:"Ready to Gouge",label:{zh:""}},READY_TO_RAZE:{name:"Ready to Raze",label:{zh:""}},READY_TO_REIGN:{name:"Ready to Reign",label:{zh:""}},READY_TO_RIP:{name:"Ready to Rip",label:{zh:""}},READY_TO_TEAR:{name:"Ready to Tear",label:{zh:""}},ROYAL_GUARD:{name:"Royal Guard",label:{zh:""}},SONIC_BREAK_DOT:{name:"Sonic Break DoT",label:{zh:""}},SUPERBOLIDE:{name:"Superbolide",label:{zh:""}},BRUTAL_SHELL:{name:"Brutal Shell",label:{zh:""}},BLOODFEST:{name:"Bloodfest",label:{zh:""}}}),FL=le()({GNB_COMBO_TRACKER:{name:"GNB Combo",label:{zh:""}},GNB_AOE_COMBO_TRACKER:{name:"GNB AOE Combo",label:{zh:"AOE"}},GNB_GNASHING_COMBO_TRACKER:{name:"GNB Gnashing Combo",label:{zh:""}},GNB_REIGN_COMBO_TRACKER:{name:"GNB Reign Combo",label:{zh:""}}}),jL=le()({DANGER_ZONE_MASTERY:{name:"Danger Zone Mastery",level:80},HEART_OF_STONE_MASTERY:{name:"Heart Of Stone Mastery",level:82},ENHANCED_AURORA:{name:"Enhanced Aurora",level:84},ENHANCED_CONTINUATION:{name:"Enhanced Continuation",level:86},CARTRIDGE_CHARGE_II:{name:"Cartridge Charge II",level:88},NEBULA_MASTERY:{name:"Nebula Mastery",level:92},ENHANCED_CONTINUATION_II:{name:"Enhanced Continuation II",level:96},ENHANCED_BLOODFEST:{name:"Enhanced Bloodfest",level:100}}),zL={...BL,...FR,...FL},YL=le()({HEATED_SPLIT_SHOT:{id:7411,name:"Heated Split Shot",label:{zh:""}},HEATED_SLUG_SHOT:{id:7412,name:"Heated Slug Shot",label:{zh:""}},HEATED_CLEAN_SHOT:{id:7413,name:"Heated Clean Shot",label:{zh:""}},DRILL:{id:16498,name:"Drill",label:{zh:""}},HOT_SHOT:{id:2872,name:"Hot Shot",label:{zh:""}},AIR_ANCHOR:{id:16500,name:"Air Anchor",label:{zh:""}},CHAIN_SAW:{id:25788,name:"Chain Saw",label:{zh:""}},EXCAVATOR:{id:36981,name:"Excavator",label:{zh:""}},GAUSS_ROUND:{id:2874,name:"Gauss Round",label:{zh:""}},DOUBLE_CHECK:{id:36979,name:"Double Check",label:{zh:""}},RICOCHET:{id:2890,name:"Ricochet",label:{zh:""}},CHECKMATE:{id:36980,name:"Checkmate",label:{zh:""}},BLAZING_SHOT:{id:36978,name:"Blazing Shot",label:{zh:""}},WILDFIRE:{id:2878,name:"Wildfire",label:{zh:""}},DETONATOR:{id:16766,name:"Detonator",label:{zh:""}},HYPERCHARGE:{id:17209,name:"Hypercharge",label:{zh:""}},ROOK_AUTOTURRET:{id:2864,name:"Rook Autoturret",label:{zh:""}},ROOK_OVERDRIVE:{id:7415,name:"Rook Overdrive",label:{zh:""}},AUTOMATON_QUEEN:{id:16501,name:"Automaton Queen",label:{zh:""}},QUEEN_OVERDRIVE:{id:16502,name:"Queen Overdrive",label:{zh:""}},BARREL_STABILIZER:{id:7414,name:"Barrel Stabilizer",label:{zh:""}},REASSEMBLE:{id:2876,name:"Reassemble",label:{zh:""}},FULL_METAL_FIELD:{id:36982,name:"Full Metal Field",label:{zh:""}},SPREAD_SHOT:{id:2870,name:"Spread Shot",label:{zh:""}},SCATTERGUN:{id:25786,name:"Scattergun",label:{zh:""}},AUTO_CROSSBOW:{id:16497,name:"Auto Crossbow",label:{zh:""}},BIOBLASTER:{id:16499,name:"Bioblaster",label:{zh:""}},FLAMETHROWER:{id:7418,name:"Flamethrower",label:{zh:""}},DISMANTLE:{id:2887,name:"Dismantle",label:{zh:""}},TACTICIAN:{id:16889,name:"Tactician",label:{zh:""}},VOLLEY_FIRE:{id:2891,name:"Volley Fire",label:{zh:""}},ARM_PUNCH:{id:16504,name:"Arm Punch",label:{zh:""}},ROOK_OVERLOAD:{id:7416,name:"Rook Overload",label:{zh:""}},PILE_BUNKER:{id:16503,name:"Pile Bunker",label:{zh:""}},CROWNED_COLLIDER:{id:25787,name:"Crowned Collider",label:{zh:""}}}),KL=le()({cd_REASSEMBLE:{name:"cd_Reassemble"},cd_DRILL:{name:"cd_Drill"},cd_CHECKMATE:{name:"cd_Checkmate"},cd_DOUBLE_CHECK:{name:"cd_DoubleCheck"},cd_AIR_ANCHOR:{name:"cd_AirAnchor"},cd_CHAINSAW:{name:"cd_Chainsaw",label:{zh:"CD"}},cd_BARREL_STABILIZER:{name:"cd_BarrelStabilizer"},cd_WILDFIRE:{name:"cd_Wildfire"},cd_QUEEN:{name:"cd_Queen",label:{zh:"CD"}},cd_OVERDRIVE:{name:"cd_Overdrive",label:{zh:"CD/"}},cd_DISMANTLE:{name:"cd_Dismantle"},cd_TACTICIAN:{name:"cd_Tactician"},cd_HYPERCHARGE:{name:"cd_Hypercharge"},cd_DETONATOR:{name:"cd_Detonator"},cd_FLAMETHROWER:{name:"cd_Flamethrower"}}),VL=le()({HEAT_GAUGE:{name:"Heat",label:{zh:""}},BATTERY_GAUGE:{name:"Battery",label:{zh:""}}}),jR=le()({REASSEMBLED:{name:"Reassembled",label:{zh:""}},OVERHEATED:{name:"Overheated",label:{zh:""},maximumStacks:5},WILDFIRE:{name:"Wildfire",label:{zh:""}},WILDFIRE_SELF:{name:"Wildfire Self",label:{zh:""}},FLAMETHROWER:{name:"Flamethrower",label:{zh:""}},BIOBLASTER:{name:"Bioblaster",label:{zh:"dot"}},TACTICIAN:{name:"Tactician",label:{zh:"buff"}},HYPERCHARGED:{name:"Hypercharged",label:{zh:""}},EXCAVATOR_READY:{name:"Excavator Ready",label:{zh:""}},FULL_METAL_MACHINIST:{name:"Full Metal Machinist",label:{zh:""}}}),WL=le()({HEAT_COMBO:{name:"Heat Combo",label:{zh:""}},QUEEN:{name:"Queen",label:{zh:""}},QUEEN_PUNCHES:{name:"QueenPunches",label:{zh:""}},QUEEN_FINISHERS:{name:"QueenFinishers",label:{zh:""}},BATTERY_BONUS:{name:"BatteryBonus",label:{zh:""}},WILDFIRE_HITS:{name:"WildfireHits",label:{zh:""}}}),XL=le()({CHARGED_ACTION_MASTERY:{name:"Charged Action Mastery",level:74},HOT_SHOT_MASTERY:{name:"Hot Shot Mastery",level:76},ENHANCED_WILD_FIRE:{name:"Enhanced Wildfire",level:88},PROMOTION:{name:"Promotion",level:80},SPREAD_SHOT_MASTERY:{name:"Spread Shot Mastery",level:82},ENHANCED_REASSEMBLE:{name:"Enhanced Reassemble",level:84},MARKSMANS_MASTERY:{name:"Marksman's Mastery",level:84},QUEENS_GAMBIT:{name:"Queen's Gambit",level:86},ENHANCED_TACTICIAN:{name:"Enhanced Tactician",level:88},DOUBLE_BARREL_MASTERY:{name:"Double-Barrel Mastery",level:92},ENHANCED_MULTI_WEAPON:{name:"Enhanced Multiweapon",level:94},MARKSMANS_MASTERY_II:{name:"Marksman's Mastery II",level:94},ENHANCED_MULTI_WEAPON_II:{name:"Enhanced Multiweapon II",level:96},ENHANCED_BARREL_STABILIZER:{name:"Enhanced Barrel Stabilizer",level:100}}),qL={...VL,...jR,...WL},ZL=le()({BOOTSHINE:{id:53,name:"Bootshine",label:{zh:"",ja:""}},TRUE_STRIKE:{id:54,name:"True Strike",label:{zh:"",ja:""}},SNAP_PUNCH:{id:56,name:"Snap Punch",label:{zh:"",ja:""}},TWIN_SNAKES:{id:61,name:"Twin Snakes",label:{zh:"",ja:""}},ARM_OF_THE_DESTROYER:{id:62,name:"Arm of the Destroyer",label:{zh:"",ja:""}},DEMOLISH:{id:66,name:"Demolish",label:{zh:"",ja:""}},ROCKBREAKER:{id:70,name:"Rockbreaker",label:{zh:"",ja:""}},THUNDERCLAP:{id:25762,name:"Thunderclap",label:{zh:"",ja:""}},HOWLING_FIST:{id:25763,name:"Howling Fist",label:{zh:"",ja:""}},MANTRA:{id:65,name:"Mantra",label:{zh:"",ja:""}},FOUR_POINT_FURY:{id:16473,name:"Four-point Fury",label:{zh:"",ja:""}},DRAGON_KICK:{id:74,name:"Dragon Kick",label:{zh:"",ja:""}},PERFECT_BALANCE:{id:69,name:"Perfect Balance",label:{zh:"",ja:""}},FORM_SHIFT:{id:4262,name:"Form Shift",label:{zh:"",ja:""}},FORBIDDEN_MEDITATION:{id:36942,name:"Forbidden Meditation",label:{zh:"",ja:""}},THE_FORBIDDEN_CHAKRA:{id:3547,name:"The Forbidden Chakra",label:{zh:"",ja:""}},MASTERFUL_BLITZ:{id:25764,name:"Masterful Blitz",label:{zh:"",ja:""}},TORNADO_KICK:{id:3543,name:"Tornado Kick",label:{zh:"",ja:""}},ELIXIR_FIELD:{id:3545,name:"Elixir Field",label:{zh:"",ja:""}},CELESTIAL_REVOLUTION:{id:25765,name:"Celestial Revolution",label:{zh:"",ja:""}},FLINT_STRIKE:{id:25882,name:"Flint Strike",label:{zh:"",ja:""}},RIDDLE_OF_EARTH:{id:7394,name:"Riddle of Earth",label:{zh:"",ja:""}},EARTHS_REPLY:{id:36944,name:"Earth's Reply",label:{zh:"",ja:""}},RIDDLE_OF_FIRE:{id:7395,name:"Riddle of Fire",label:{zh:"",ja:""}},BROTHERHOOD:{id:7396,name:"Brotherhood",label:{zh:"",ja:""}},RIDDLE_OF_WIND:{id:25766,name:"Riddle of Wind",label:{zh:"",ja:""}},INSPIRITED_MEDITATION:{id:36941,name:"Inspirited Meditation",label:{zh:"",ja:""}},ENLIGHTENED_MEDITATION:{id:36943,name:"Enlightened Meditation",label:{zh:"",ja:""}},ENLIGHTENMENT:{id:16474,name:"Enlightenment",label:{zh:"",ja:""}},SIX_SIDED_STAR:{id:16476,name:"Six-sided Star",label:{zh:"",ja:""}},SHADOW_OF_THE_DESTROYER:{id:25767,name:"Shadow of the Destroyer",label:{zh:"",ja:""}},RISING_PHOENIX:{id:25768,name:"Rising Phoenix",label:{zh:"",ja:""}},PHANTOM_RUSH:{id:25769,name:"Phantom Rush",label:{zh:"",ja:""}},LEAPING_OPO:{id:36945,name:"Leaping Opo",label:{zh:"",ja:""}},RISING_RAPTOR:{id:36946,name:"Rising Raptor",label:{zh:"",ja:""}},POUNCING_COEURL:{id:36947,name:"Pouncing Coeurl",label:{zh:"",ja:""}},ELIXIR_BURST:{id:36948,name:"Elixir Burst",label:{zh:"",ja:""}},WINDS_REPLY:{id:36949,name:"Wind's Reply",label:{zh:"",ja:""}},FIRES_REPLY:{id:36950,name:"Fire's Reply",label:{zh:"",ja:""}}}),QL=le()({cd_THUNDERCLAP:{name:"cd_Thunderclap"},cd_MANTRA:{name:"cd_Mantra"},cd_PERFECT_BALANCE:{name:"cd_PerfectBalance"},cd_ENLIGHTENMENT:{name:"cd_Enlightenment"},cd_THE_FORBIDDEN_CHAKRA:{name:"cd_TheForbiddenChakra"},cd_RIDDLE_OF_EARTH:{name:"cd_RiddleOfEarth"},cd_EARTHS_REPLY:{name:"cd_EarthsReply"},cd_RIDDLE_OF_FIRE:{name:"cd_RiddleOfFire"},cd_BROTHERHOOD:{name:"cd_Brotherhood"},cd_RIDDLE_OF_WIND:{name:"cd_RiddleOfWind"}}),$L=le()({CHAKRA:{name:"Chakra",label:{zh:""}},BEAST_CHAKRA:{name:"Beast Chakra",label:{zh:""}},BEAST_CHAKRA_TIMER:{name:"Beast Timer",label:{zh:""}},NADI:{name:"Nadi",label:{zh:"/"}},LUNAR_NADI:{name:"Lunar Nadi",label:{zh:""}},SOLAR_NADI:{name:"Solar Nadi",label:{zh:""}},OPO_OPOS_FURY:{name:"Opo-opo's Fury",label:{zh:""}},RAPTORS_FURY:{name:"Raptor's Fury",label:{zh:""}},COEURLS_FURY:{name:"Coeurl's Fury",label:{zh:""}}}),zR=le()({MANTRA:{name:"Mantra",label:{zh:""}},OPO_OPO_FORM:{name:"Opo-opo Form",label:{zh:""}},RAPTOR_FORM:{name:"Raptor Form",label:{zh:""}},COEURL_FORM:{name:"Coeurl Form",label:{zh:""}},PERFECT_BALANCE:{name:"Perfect Balance",maximumStacks:3,label:{zh:""}},FORMLESS_FIST:{name:"Formless Fist",label:{zh:""}},RIDDLE_OF_EARTH:{name:"Riddle of Earth",label:{zh:""}},EARTHS_RESOLVE:{name:"Earth's Resolve",label:{zh:""}},EARTHS_RUMINATION:{name:"Earth's Rumination",label:{zh:""}},RIDDLE_OF_FIRE:{name:"Riddle of Fire",label:{zh:""}},FIRES_RUMINATION:{name:"Fire's Rumination",label:{zh:""}},BROTHERHOOD:{name:"Brotherhood",label:{zh:""}},MEDITATIVE_BROTHERHOOD:{name:"Meditative Brotherhood",label:{zh:""}},RIDDLE_OF_WIND:{name:"Riddle of Wind",label:{zh:""}},WINDS_RUMINATION:{name:"Wind's Rumination",label:{zh:""}},SIX_SIDED_STAR:{name:"Six-sided Star",label:{zh:""}}}),JL=le()({BEAST_CHAKRA_1:{name:"Beast Chakra 1",label:{zh:"1"}},BEAST_CHAKRA_2:{name:"Beast Chakra 2",label:{zh:"2"}},BEAST_CHAKRA_3:{name:"Beast Chakra 3",label:{zh:"3"}}}),e1=le()({DEEP_MEDITATION_II:{name:"Deep Meditation II",level:74},HOWLING_FIST_MASTERY:{name:"Howling Fist Mastery",level:74},ENHANCED_GREASED_LIGHTNING_III:{name:"Enhanced Greased Lightning III",level:76},ARM_OF_THE_DESTROYER_MASTERY:{name:"Arm of the Destroyer Mastery",level:82},ENHANCED_THUNDERCLAP:{name:"Enhanced Thunderclap",level:84},MELEE_MASTERY_MNK:{name:"Melee Mastery MNK",level:84},FLINT_STRIKE_MASTERY:{name:"Flint Strike Mastery",level:86},ENHANCED_BROTHERHOOD:{name:"Enhanced Brotherhood",level:88},TORNADO_KICK_MASTERY:{name:"Tornado Kick Mastery",level:90},BEAST_CHAKRA_MASTERY:{name:"Beast Chakra Mastery",level:92},MELEE_MASTERY_II_MNK:{name:"Melee Mastery II MNK",level:94},ENHANCED_RIDDLE_OF_WIND:{name:"Enhanced Riddle of Wind",level:96},ENHANCED_RIDDLE_OF_FIRE:{name:"Enhanced Riddle of Fire",level:100}}),ZN={...$L,...zR,...JL},t1=le()({SPINNING_EDGE:{id:2240,name:"Spinning Edge",label:{zh:""}},SHADE_SHIFT:{id:2241,name:"Shade Shift",label:{zh:""}},GUST_SLASH:{id:2242,name:"Gust Slash",label:{zh:""}},HIDE:{id:2245,name:"Hide",label:{zh:""}},THROWING_DAGGER:{id:2247,name:"Throwing Dagger",label:{zh:""}},TRICK_ATTACK:{id:2258,name:"Trick Attack",label:{zh:""}},AEOLIAN_EDGE:{id:2255,name:"Aeolian Edge",label:{zh:""}},TEN:{id:2259,name:"Ten",label:{zh:""}},NINJUTSU:{id:2260,name:"Ninjutsu",label:{zh:""}},CHI:{id:2261,name:"Chi",label:{zh:""}},DEATH_BLOSSOM:{id:2254,name:"Death Blossom",label:{zh:""}},SHUKUCHI:{id:2262,name:"Shukuchi",label:{zh:""}},JIN:{id:2263,name:"Jin",label:{zh:""}},KASSATSU:{id:2264,name:"Kassatsu",label:{zh:""}},HAKKE_MUJINSATSU:{id:16488,name:"Hakke Mujinsatsu",label:{zh:""}},ARMOR_CRUSH:{id:3563,name:"Armor Crush",label:{zh:""}},DREAM_WITHIN_A_DREAM:{id:3566,name:"Dream Within a Dream",label:{zh:""}},HELLFROG_MEDIUM:{id:7401,name:"Hellfrog Medium",label:{zh:""}},DOKUMORI:{id:36957,name:"Dokumori",label:{zh:""}},BHAVACAKRA:{id:7402,name:"Bhavacakra",label:{zh:""}},TEN_CHI_JIN:{id:7403,name:"Ten Chi Jin",label:{zh:""}},MEISUI:{id:16489,name:"Meisui",label:{zh:""}},BUNSHIN:{id:16493,name:"Bunshin",label:{zh:""}},PHANTOM_KAMAITACHI:{id:25774,name:"Phantom Kamaitachi",label:{zh:""}},FORKED_RAIJU:{id:25777,name:"Forked Raiju",label:{zh:""}},FLEETING_RAIJU:{id:25778,name:"Fleeting Raiju",label:{zh:""}},KUNAIS_BANE:{id:36958,name:"Kunai's Bane",label:{zh:""}},DEATHFROG_MEDIUM:{id:36959,name:"Deathfrog Medium",label:{zh:""}},ZESHO_MEPPO:{id:36960,name:"Zesho Meppo",label:{zh:""}},TENRI_JINDO:{id:36961,name:"Tenri Jindo",label:{zh:""}},KATON:{id:2266,name:"Katon",label:{zh:""}},RAITON:{id:2267,name:"Raiton",label:{zh:""}},HYOTON:{id:2268,name:"Hyoton",label:{zh:""}},HUTON:{id:2269,name:"Huton",label:{zh:""}},DOTON:{id:2270,name:"Doton",label:{zh:""}},SUITON:{id:2271,name:"Suiton",label:{zh:""}},GOKA_MEKKYAKU:{id:16491,name:"Goka Mekkyaku",label:{zh:""}},HYOSHO_RANRYU:{id:16492,name:"Hyosho Ranryu",label:{zh:""}},RABBIT_MEDIUM:{id:2272,name:"Rabbit Medium",label:{zh:""}},FUMA_SHURIKEN:{id:2265,name:"Fuma Shuriken",label:{zh:""}},FUMA_SHURIKEN_TEN:{id:18873,name:"Fuma Shuriken (Ten)",label:{zh:""}},FUMA_SHURIKEN_CHI:{id:18874,name:"Fuma Shuriken (Chi)",label:{zh:""}},FUMA_SHURIKEN_JIN:{id:18875,name:"Fuma Shuriken (Jin)",label:{zh:""}},KATON_TEN:{id:18876,name:"Katon (Ten)",label:{zh:""}},RAITON_CHI:{id:18877,name:"Raiton (Chi)",label:{zh:""}},HYOTON_JIN:{id:18878,name:"Hyoton (Jin)",label:{zh:""}},HUTON_TEN:{id:18879,name:"Huton (Ten)",label:{zh:""}},DOTON_CHI:{id:18880,name:"Doton (Chi)",label:{zh:""}},SUITON_JIN:{id:18881,name:"Suiton (Jin)",label:{zh:""}}}),n1=le()({cd_MUDRA_HACK:{name:"cd_MudraHack"},cd_MUDRA:{name:"cd_Mudra"},cd_SHADE_SHIFT:{name:"cd_Shadeshift"},cd_HIDE:{name:"cd_Hide"},cd_TRICK_ATTACK:{name:"cd_TrickAttack"},cd_SHUKUCHI:{name:"cd_Shukuchi"},cd_KASSATSU:{name:"cd_Kassatsu"},cd_DREAM_WITHIN_A_DREAM:{name:"cd_DREAM_WITHIN_A_DREAM"},cd_DOKUMORI:{name:"cd_Dokumori"},cd_TEN_CHI_JIN:{name:"cd_TenChiJin"},cd_MEISUI:{name:"cd_Meisui"},cd_BUNSHIN:{name:"cd_Bunshin"},cd_BHAVACAKRA:{name:"cd_Bhavacakra"},cd_TENRI_JINDO:{name:"cd_TenriJindo"}}),a1=le()({KAZEMATOI:{name:"Kazematoi",label:{zh:""}},NINKI:{name:"Ninki",label:{zh:""}}}),YR=le()({MUDRA:{name:"Mudra",label:{zh:""}},SHADE_SHIFT:{name:"Shade Shift",label:{zh:""}},HIDDEN:{name:"Hidden",label:{zh:""}},TRICK_ATTACK:{name:"Trick Attack",label:{zh:""},specialDebuff:!0},KASSATSU:{name:"Kassatsu",label:{zh:""}},DOKUMORI:{name:"Dokumori",label:{zh:""},specialDebuff:!0},TENRI_JINDO_READY:{name:"Tenri Jindo Ready",label:{zh:""}},TEN_CHI_JIN:{name:"Ten Chi Jin",maximumStacks:3,label:{zh:""}},MEISUI:{name:"Meisui",label:{zh:""}},SHADOW_WALKER:{name:"Shadow Walker",label:{zh:""}},BUNSHIN:{name:"Bunshin",maximumStacks:5,label:{zh:""}},PHANTOM_KAMAITACHI_READY:{name:"Phantom Kamaitachi Ready",label:{zh:""}},RAIJU_READY:{name:"Raiju Ready",maximumStacks:3,label:{zh:""}},KUNAIS_BANE:{name:"Kunai's Bane",label:{zh:""},specialDebuff:!0},HIGI:{name:"Higi",label:{zh:""}},DOTON:{name:"Doton",mayBeToggled:!0,label:{zh:""}}}),i1=le()({NIN_COMBO_TRACKER:{name:"NIN Combo",label:{zh:""}},NIN_AOE_COMBO_TRACKER:{name:"NIN AOE Combo",label:{zh:"AOE"}},MUDRA_TRACKER:{name:"Mudra Tracker",label:{zh:""}},BUNNY:{name:"Bunny",label:{zh:""}}}),o1=le()({ENHANCED_SHUKUCHI_II:{name:"Enhanced Shukuchi II",level:74},MELEE_MASTERY_NIN:{name:"Melee Mastery NIN",level:74},ENHANCED_KASSATSU:{name:"Enhanced Kassatsu",level:76},SHUKIHO_II:{name:"Shukiho II",level:78},SHUKIHO_III:{name:"Shukiho III",level:84},MELEE_MASTERY_II_NIN:{name:"Melee Mastery II NIN",level:84},ENHANCED_MEISUI:{name:"Enhanced Meisui",level:88},ENHANCED_RAITON:{name:"Enhanced Raiton",level:90},TRICK_ATTACK_MASTERY:{name:"Trick Attack Mastery",level:92},MELEE_MASTERY_III_NIN:{name:"Melee Mastery III NIN",level:94},ENHANCED_DOKUMORI:{name:"Enhanced Dokumori",level:96},ENHANCED_TEN_CHI_JIN:{name:"Enhanced Ten Chi Jin",level:100}}),l1={...a1,...YR,...i1},s1=le()({FIRE_IN_RED:{id:34650,name:"Fire in Red",label:{zh:"",ja:""}},AERO_IN_GREEN:{id:34651,name:"Aero in Green",label:{zh:"",ja:""}},WATER_IN_BLUE:{id:34652,name:"Water in Blue",label:{zh:"",ja:""}},FIRE_II_IN_RED:{id:34656,name:"Fire II in Red",label:{zh:"",ja:""},discordEmote:"Fire2inRed"},AERO_II_IN_GREEN:{id:34657,name:"Aero II in Green",label:{zh:"",ja:""},discordEmote:"Aero2inGreen"},WATER_II_IN_BLUE:{id:34658,name:"Water II in Blue",label:{zh:"",ja:""},discordEmote:"Water2inBlue"},BLIZZARD_IN_CYAN:{id:34653,name:"Blizzard in Cyan",label:{zh:"",ja:""}},STONE_IN_YELLOW:{id:34654,name:"Stone in Yellow",label:{zh:"",ja:""}},THUNDER_IN_MAGENTA:{id:34655,name:"Thunder in Magenta",label:{zh:"",ja:""}},BLIZZARD_II_IN_CYAN:{id:34659,name:"Blizzard II in Cyan",label:{zh:"",ja:""},discordEmote:"Blizzard2inCyan"},STONE_II_IN_YELLOW:{id:34660,name:"Stone II in Yellow",label:{zh:"",ja:""},discordEmote:"Stone2inYellow"},THUNDER_II_IN_MAGENTA:{id:34661,name:"Thunder II in Magenta",label:{zh:"",ja:""},discordEmote:"Thunder2inMagenta"},HOLY_IN_WHITE:{id:34662,name:"Holy in White",label:{zh:"",ja:""}},COMET_IN_BLACK:{id:34663,name:"Comet in Black",label:{zh:"",ja:""}},RAINBOW_DRIP:{id:34688,name:"Rainbow Drip",label:{zh:"",ja:""}},STAR_PRISM:{id:34681,name:"Star Prism",label:{zh:"",ja:""}},TEMPERA_COAT:{id:34685,name:"Tempera Coat",label:{zh:"",ja:""}},TEMPERA_GRASSA:{id:34686,name:"Tempera Grassa",label:{zh:"",ja:""}},TEMPERA_COAT_POP:{name:"Pop Tempera Coat",label:{zh:"",ja:""}},TEMPERA_GRASSA_POP:{name:"Pop Tempera Grassa",label:{zh:"",ja:""}},SMUDGE:{id:34684,name:"Smudge",label:{zh:"",ja:""}},SUBTRACTIVE_PALETTE:{id:34683,name:"Subtractive Palette",label:{zh:"",ja:""}},CREATURE_MOTIF:{id:34689,name:"Creature Motif",label:{zh:"",ja:""}},POM_MOTIF:{id:34664,name:"Pom Motif",label:{zh:"",ja:""}},WING_MOTIF:{id:34665,name:"Wing Motif",label:{zh:"",ja:""}},CLAW_MOTIF:{id:34666,name:"Claw Motif",label:{zh:"",ja:""}},MAW_MOTIF:{id:34667,name:"Maw Motif",label:{zh:"",ja:""}},LIVING_MUSE:{id:35347,name:"Living Muse",label:{zh:"",ja:""}},POM_MUSE:{id:34670,name:"Pom Muse",label:{zh:"",ja:""}},WINGED_MUSE:{id:34671,name:"Winged Muse",label:{zh:"",ja:""}},CLAWED_MUSE:{id:34672,name:"Clawed Muse",label:{zh:"",ja:""}},FANGED_MUSE:{id:34673,name:"Fanged Muse",label:{zh:"",ja:""}},MOG_OF_THE_AGES:{id:34676,name:"Mog of the Ages",label:{zh:"",ja:""}},RETRIBUTION_OF_THE_MADEEN:{id:34677,name:"Retribution of the Madeen",label:{zh:"",ja:""}},WEAPON_MOTIF:{id:34690,name:"Weapon Motif",label:{zh:"",ja:""}},STEEL_MUSE:{id:35348,name:"Steel Muse",label:{zh:"",ja:""}},HAMMER_MOTIF:{id:34668,name:"Hammer Motif",label:{zh:"",ja:""}},STRIKING_MUSE:{id:34674,name:"Striking Muse",label:{zh:"",ja:""}},HAMMER_STAMP:{id:34678,name:"Hammer Stamp",label:{zh:"",ja:""}},HAMMER_BRUSH:{id:34679,name:"Hammer Brush",label:{zh:"",ja:""}},POLISHING_HAMMER:{id:34680,name:"Polishing Hammer",label:{zh:"",ja:""}},LANDSCAPE_MOTIF:{id:34691,name:"Landscape Motif",label:{zh:"",ja:""}},SCENIC_MUSE:{id:35349,name:"Scenic Muse",label:{zh:"",ja:""}},STARRY_SKY_MOTIF:{id:34669,name:"Starry Sky Motif",label:{zh:"",ja:""}},STARRY_MUSE:{id:34675,name:"Starry Muse",label:{zh:"",ja:""}}}),r1=le()({cd_TEMPERA_COAT:{name:"cd_TemperaCoat"},cd_SMUDGE:{name:"cd_Smudge"},cd_LIVING_MUSE:{name:"cd_LivingMuse"},cd_PORTRAIT:{name:"cd_Portrait",label:{zh:"CD/"}},cd_STEEL_MUSE:{name:"cd_SteelMuse"},cd_SCENIC_MUSE:{name:"cd_ScenicMuse"},cd_SUBTRACTIVE:{name:"cd_Subtractive",label:{zh:"CD"}},cd_GRASSA:{name:"cd_Grassa",label:{zh:"CD"}},cd_TEMPERA_POP:{name:"cd_TemperaPop",label:{zh:"CD"}}}),c1=le()({PORTRAIT:{name:"Portrait",label:{zh:"//"}},DEPICTIONS:{name:"Depictions",label:{zh:"///"}},CREATURE_CANVAS:{name:"Creature Canvas",label:{zh:""}},WEAPON_CANVAS:{name:"Weapon Canvas",label:{zh:""}},LANDSCAPE_CANVAS:{name:"Landscape Canvas",label:{zh:""}},PALETTE_GAUGE:{name:"Palette Gauge",label:{zh:""}},PAINT:{name:"Paint",label:{zh:""}}}),KR=le()({AETHERHUES:{name:"Aetherhues",label:{zh:""},mayNotBeCanceled:!0,maximumStacks:2},MONOCHROME_TONES:{name:"Monochrome Tones",label:{zh:""}},SUBTRACTIVE_PALETTE:{name:"Subtractive Palette",label:{zh:""},mayNotBeCanceled:!0,maximumStacks:3},HAMMER_TIME:{name:"Hammer Time",label:{zh:""},mayNotBeCanceled:!0,maximumStacks:3},INSPIRATION:{name:"Inspiration",label:{zh:""},mayBeToggled:!0},SUBTRACTIVE_SPECTRUM:{name:"Subtractive Spectrum",label:{zh:""}},HYPERPHANTASIA:{name:"Hyperphantasia",label:{zh:""},maximumStacks:5},RAINBOW_BRIGHT:{name:"Rainbow Bright",label:{zh:""}},STARSTRUCK:{name:"Starstruck",label:{zh:""}},STARRY_MUSE:{name:"Starry Muse",label:{zh:""}},TEMPERA_COAT:{name:"Tempera Coat",label:{zh:""}},TEMPERA_GRASSA:{name:"Tempera Grassa",label:{zh:""}},SMUDGE:{name:"Smudge",label:{zh:""}}}),u1=le()({HAMMER_COMBO:{name:"Hammer Combo Counter",label:{zh:""}}}),d1=le()({PICTOMANCY_MASTERY_II:{name:"Pictomancy Mastery II",level:74},ENHANCED_ARTISTRY:{name:"Enhanced Artistry",level:80},ENHANCED_PICTOMANCY:{name:"Enhanced Pictomancy",level:82},ENHANCED_SMUDGE:{name:"Enhanced Smudge",level:84},PICTOMANCY_MASTERY_III:{name:"Pictomancy Mastery III",level:84},ENHANCED_PICTOMANCY_II:{name:"Enhanced Pictomancy II",level:86},ENHANCED_TEMPERA:{name:"Enhanced Tempera",level:88},ENHANCED_PALETTE:{name:"Enhanced Palette",level:90},ENHANCED_PICTOMANCY_III:{name:"Enhanced Pictomancy III",level:92},PICTOMANCY_MASTERY_IV:{name:"Pictomancy Mastery IV",level:94},ENHANCED_PICTOMANCY_IV:{name:"Enhanced Pictomancy IV",level:96},ENHANCED_PICTOMANCY_V:{name:"Enhanced Pictomancy V",level:100}}),h1={...c1,...KR,...u1},f1=le()({FAST_BLADE:{id:9,name:"Fast Blade",label:{zh:""}},FIGHT_OR_FLIGHT:{id:20,name:"Fight or Flight",label:{zh:""}},RIOT_BLADE:{id:15,name:"Riot Blade",label:{zh:""}},TOTAL_ECLIPSE:{id:7381,name:"Total Eclipse",label:{zh:""}},SHIELD_BASH:{id:16,name:"Shield Bash",label:{zh:""}},IRON_WILL:{id:28,name:"Iron Will",label:{zh:""}},RELEASE_IRON_WILL:{id:32065,name:"Release Iron Will",label:{zh:""}},SHIELD_LOB:{id:24,name:"Shield Lob",label:{zh:""}},SPIRITS_WITHIN:{id:29,name:"Spirits Within",label:{zh:""}},SHELTRON:{id:3542,name:"Sheltron",label:{zh:""}},SENTINEL:{id:17,name:"Sentinel",label:{zh:""}},PROMINENCE:{id:16457,name:"Prominence",label:{zh:""}},COVER:{id:27,name:"Cover",label:{zh:""}},CIRCLE_OF_SCORN:{id:23,name:"Circle of Scorn",label:{zh:""}},HALLOWED_GROUND:{id:30,name:"Hallowed Ground",label:{zh:""}},BULWARK:{id:22,name:"Bulwark",label:{zh:""}},GORING_BLADE:{id:3538,name:"Goring Blade",label:{zh:""}},DIVINE_VEIL:{id:3540,name:"Divine Veil",label:{zh:""}},CLEMENCY:{id:3541,name:"Clemency",label:{zh:""}},ROYAL_AUTHORITY:{id:3539,name:"Royal Authority",label:{zh:""}},INTERVENTION:{id:7382,name:"Intervention",label:{zh:""}},HOLY_SPIRIT:{id:7384,name:"Holy Spirit",label:{zh:""}},INTERVENE:{id:16461,name:"Intervene",label:{zh:""}},REQUIESCAT:{id:7383,name:"Requiescat",label:{zh:""}},PASSAGE_OF_ARMS:{id:7385,name:"Passage of Arms",label:{zh:""}},HOLY_CIRCLE:{id:16458,name:"Holy Circle",label:{zh:""}},ATONEMENT:{id:16460,name:"Atonement",label:{zh:""}},SUPPLICATION:{id:36918,name:"Supplication",label:{zh:"2"}},SEPULCHRE:{id:36919,name:"Sepulchre",label:{zh:"3"}},CONFITEOR:{id:16459,name:"Confiteor",label:{zh:""}},HOLY_SHELTRON:{id:25746,name:"Holy Sheltron",label:{zh:""}},EXPIACION:{id:25747,name:"Expiacion",label:{zh:""}},BLADE_OF_FAITH:{id:25748,name:"Blade of Faith",label:{zh:"2"}},BLADE_OF_TRUTH:{id:25749,name:"Blade of Truth",label:{zh:"3"}},BLADE_OF_VALOR:{id:25750,name:"Blade of Valor",label:{zh:"4"}},GUARDIAN:{id:36920,name:"Guardian",label:{zh:""}},IMPERATOR:{id:36921,name:"Imperator",label:{zh:""}},BLADE_OF_HONOR:{id:36922,name:"Blade of Honor",label:{zh:""}}}),E1=le()({cd_FIGHT_OR_FLIGHT:{name:"cd_FightOrFlight"},cd_IRON_WILL:{name:"cd_IronWill"},cd_RELEASE_IRON_WILL:{name:"cd_ReleaseIronWill"},cd_SPIRITS_WITHIN:{name:"cd_SpiritsWithin"},cd_SHELTRON:{name:"cd_Sheltron"},cd_SENTINEL:{name:"cd_Sentinel"},cd_COVER:{name:"cd_Cover"},cd_CIRCLE_OF_SCORN:{name:"cd_CircleOfScorn"},cd_HALLOWED_GROUND:{name:"cd_HallowedGround"},cd_BULWARK:{name:"cd_Bulwark"},cd_DIVINE_VEIL:{name:"cd_DivineVeil"},cd_INTERVENTION:{name:"cd_Intervention"},cd_INTERVENE:{name:"cd_Intervene"},cd_REQUIESCAT:{name:"cd_Requiescat"},cd_PASSAGE_OF_ARMS:{name:"cd_PassageOfArms"},cd_HOLY_SHELTRON:{name:"cd_HolySheltron"},cd_EXPIACION:{name:"cd_Expiacion"},cd_GUARDIAN:{name:"cd_Guardian"},cd_IMPERATOR:{name:"cd_Imperator"},cd_BLADE_OF_HONOR:{name:"cd_BladeOfHonor"}}),m1=le()({OATH_GAUGE:{name:"Oath Gauge",label:{zh:""}}}),VR=le()({FIGHT_OR_FLIGHT:{name:"Fight or Flight",label:{zh:""}},IRON_WILL:{name:"Iron Will",label:{zh:""}},CIRCLE_OF_SCORN_DOT:{name:"Circle of Scorn DoT",label:{zh:"DOT"}},SHELTRON:{name:"Sheltron",label:{zh:""}},SENTINEL:{name:"Sentinel",label:{zh:""}},COVER:{name:"Cover",label:{zh:""}},HALLOWED_GROUND:{name:"Hallowed Ground",label:{zh:""}},BULWARK:{name:"Bulwark",label:{zh:""}},GORING_BLADE_READY:{name:"Goring Blade Ready",label:{zh:""}},DIVINE_VEIL:{name:"Divine Veil",label:{zh:""}},ATONEMENT_READY:{name:"Atonement Ready",label:{zh:""}},DIVINE_MIGHT:{name:"Divine Might",label:{zh:""}},INTERVENTION:{name:"Intervention",label:{zh:""}},KNIGHTS_RESOLVE:{name:"Knight's Resolve",label:{zh:""}},KNIGHTS_BENEDICTION:{name:"Knight's Benediction",label:{zh:""}},REQUIESCAT:{name:"Requiescat",maximumStacks:4,label:{zh:""}},CONFITEOR_READY:{name:"Confiteor Ready",label:{zh:""}},PASSAGE_OF_ARMS:{name:"Passage of Arms",label:{zh:""}},ARMS_UP:{name:"Arms Up",label:{zh:""}},SUPPLICATION_READY:{name:"Supplication Ready",label:{zh:""}},SEPULCHRE_READY:{name:"Sepulchre Ready",label:{zh:""}},HOLY_SHELTRON:{name:"Holy Sheltron",label:{zh:""}},BLADE_OF_HONOR_READY:{name:"Blade of Honor Ready",label:{zh:""}},GUARDIAN:{name:"Guardian",label:{zh:""}},GUARDIANS_WILL:{name:"Guardian's Will",label:{zh:""}}}),A1=le()({PLD_COMBO_TRACKER:{name:"PLD Combo Tracker",label:{zh:""}},PLD_CONFITEOR_COMBO_TRACKER:{name:"PLD Confiteor Combo Tracker",label:{zh:""}},PLD_AOE_COMBO_TRACKER:{name:"PLD AOE Combo Tracker",label:{zh:"AOE"}}}),R1=le()({ENHANCED_PROMINENCE:{name:"Enhanced Prominence",level:72},ENHANCED_SHELTRON:{name:"Enhanced Sheltron",level:74},SWORD_OATH:{name:"Sword Oath",level:76},ENHANCED_REQUIESCAT:{name:"Enhanced Requiescat",level:80},SHELTRON_MASTERY:{name:"Sheltron Mastery",level:82},ENHANCED_INTERVENTION:{name:"Enhanced Intervention",level:82},DIVINE_MAGIC_MASTERY_II:{name:"Divine Magic Mastery II",level:84},SPIRITS_WITHIN_MASTERY:{name:"Spirits Within Mastery",level:86},ENHANCED_DIVINE_VEIL:{name:"Enhanced Divine Veil",level:88},SENTINEL_MASTERY:{name:"Sentinel Mastery",level:92},REQUIESCAT_MASTERY:{name:"Requiescat Mastery",level:96},ENHANCED_BLADE_OF_VALOR:{name:"Enhanced Blade of Valor",level:100}}),T1={...m1,...VR,...A1},S1=le()({RIPOSTE:{id:7504,name:"Riposte",label:{zh:"",ja:""}},VERTHUNDER:{id:7505,name:"Verthunder",label:{zh:"",ja:""}},CORPS_A_CORPS:{id:7506,name:"Corps-a-corps",label:{zh:"",ja:""}},VERAERO:{id:7507,name:"Veraero",label:{zh:"",ja:""}},VERFIRE:{id:7510,name:"Verfire",label:{zh:"",ja:""}},VERSTONE:{id:7511,name:"Verstone",label:{zh:"",ja:""}},ZWERCHHAU:{id:7512,name:"Zwerchhau",label:{zh:"",ja:""}},DISPLACEMENT:{id:7515,name:"Displacement",label:{zh:"",ja:""}},FLECHE:{id:7517,name:"Fleche",label:{zh:"",ja:""}},REDOUBLEMENT:{id:7516,name:"Redoublement",label:{zh:"",ja:""}},ACCELERATION:{id:7518,name:"Acceleration",label:{zh:"",ja:""}},MOULINET:{id:7513,name:"Moulinet",label:{zh:"",ja:""}},VERCURE:{id:7514,name:"Vercure",label:{zh:"",ja:""}},CONTRE_SIXTE:{id:7519,name:"Contre Sixte",label:{zh:"",ja:""}},EMBOLDEN:{id:7520,name:"Embolden",label:{zh:"",ja:""}},MANAFICATION:{id:7521,name:"Manafication",label:{zh:"",ja:""}},JOLT_II:{id:7524,name:"Jolt II",label:{zh:"",ja:""}},VERRAISE:{id:7523,name:"Verraise",label:{zh:"",ja:""}},IMPACT:{id:16526,name:"Impact",label:{zh:"",ja:""}},VERFLARE:{id:7525,name:"Verflare",label:{zh:"",ja:""}},VERHOLY:{id:7526,name:"Verholy",label:{zh:"",ja:""}},ENCHANTED_RIPOSTE:{id:7527,name:"Enchanted Riposte",label:{zh:"",ja:""}},ENCHANTED_ZWERCHHAU:{id:7528,name:"Enchanted Zwerchhau",label:{zh:"",ja:""}},ENCHANTED_REDOUBLEMENT:{id:7529,name:"Enchanted Redoublement",label:{zh:"",ja:""}},ENCHANTED_MOULINET:{id:7530,name:"Enchanted Moulinet",label:{zh:"",ja:""}},VERTHUNDER_II:{id:16524,name:"Verthunder II",label:{zh:"",ja:""}},VERAERO_II:{id:16525,name:"Veraero II",label:{zh:"",ja:""}},ENGAGEMENT:{id:16527,name:"Engagement",label:{zh:"",ja:""}},ENCHANTED_REPRISE:{id:16528,name:"Enchanted Reprise",label:{zh:"",ja:""}},REPRISE:{id:16529,name:"Reprise",label:{zh:"",ja:""}},SCORCH:{id:16530,name:"Scorch",label:{zh:"",ja:""}},VERTHUNDER_III:{id:25855,name:"Verthunder III",label:{zh:"",ja:""}},VERAERO_III:{id:25856,name:"Veraero III",label:{zh:"",ja:""}},MAGICK_BARRIER:{id:25857,name:"Magick Barrier",label:{zh:"",ja:""}},RESOLUTION:{id:25858,name:"Resolution",label:{zh:"",ja:""}},ENCHANTED_MOULINET_II:{id:37002,name:"Enchanted Moulinet Deux",label:{zh:"",ja:""}},ENCHANTED_MOULINET_III:{id:37003,name:"Enchanted Moulinet Trois",label:{zh:"",ja:""}},JOLT_III:{id:37004,name:"Jolt III",label:{zh:"",ja:""}},VICE_OF_THORNS:{id:37005,name:"Vice of Thorns",label:{zh:"",ja:""}},GRAND_IMPACT:{id:37006,name:"Grand Impact",label:{zh:"",ja:""}},PREFULGENCE:{id:37007,name:"Prefulgence",label:{zh:"",ja:""}}}),g1=le()({cd_CORPS_A_CORPS:{name:"cd_CorpsACorps"},cd_DISPLACEMENT:{name:"cd_Displacement"},cd_FLECHE:{name:"cd_Fleche"},cd_ACCELERATION:{name:"cd_Acceleration"},cd_CONTRE_SIXTE:{name:"cd_ContreSixte"},cd_EMBOLDEN:{name:"cd_Embolden"},cd_MANAFICATION:{name:"cd_Manafication"},cd_MAGICK_BARRIER:{name:"cd_MagickBarrier"},cd_VICE_OF_THORNS:{name:"cd_ViceOfThorns"},cd_PREFULGENCE:{name:"cd_Prefulgence"}}),I1=le()({WHITE_MANA:{name:"White Mana",label:{zh:""}},BLACK_MANA:{name:"Black Mana",label:{zh:""}},MANA_STACKS:{name:"Mana Stacks",label:{zh:""}}}),WR=le()({ACCELERATION:{name:"Acceleration",label:{zh:""}},DUALCAST:{name:"Dualcast",label:{zh:""}},EMBOLDEN:{name:"Embolden",label:{zh:""}},GRAND_IMPACT_READY:{name:"Grand Impact Ready",label:{zh:""}},MAGICK_BARRIER:{name:"Magick Barrier",label:{zh:""}},MAGICKED_SWORDPLAY:{name:"Magicked Swordplay",label:{zh:""},maximumStacks:3},MANAFICATION:{name:"Manafication",label:{zh:""}},PREFULGENCE_READY:{name:"Prefulgence Ready",label:{zh:""}},THORNED_FLOURISH:{name:"Thorned Flourish",label:{zh:""}},VERFIRE_READY:{name:"Verfire Ready",label:{zh:""}},VERSTONE_READY:{name:"Verstone Ready",label:{zh:""}}}),_1=le()({RDM_MELEE_COUNTER:{name:"RDM Melee Combo",label:{zh:""}},RDM_FINISHER_COUNTER:{name:"RDM Finisher Combo",label:{zh:"/"}},RDM_AOE_COUNTER:{name:"RDM AoE Combo",label:{zh:"AOE"}}}),p1=le()({ENHANCED_DISPLACEMENT:{name:"Enhanced Displacement",level:72},RED_MAGIC_MASTERY:{name:"Red Magic Mastery",level:74},RED_MAGIC_MASTERY_II:{name:"Red Magic Mastery II",level:82},RED_MAGIC_MASTERY_III:{name:"Red Magic Mastery III",level:84},ENHANCED_ACCELERATION:{name:"Enhanced Acceleration",level:88},ENHANCED_EMBOLDEN:{name:"Enhanced Embolden",level:92},ENCHANTED_BLADE_MASTERY:{name:"Enchanted Blade Mastery",level:94},ENHANCED_ACCELERATION_II:{name:"Enhanced Acceleration II",level:96},ENHANCED_MANAFICATION:{name:"Enhanced Manafication",level:100}}),N1={...I1,...WR,..._1},C1=le()({SLICE:{id:24373,name:"Slice",label:{zh:""}},WAXING_SLICE:{id:24374,name:"Waxing Slice",label:{zh:""}},INFERNAL_SLICE:{id:24375,name:"Infernal Slice",label:{zh:""}},SHADOW_OF_DEATH:{id:24378,name:"Shadow of Death",label:{zh:""}},SOUL_SLICE:{id:24380,name:"Soul Slice",label:{zh:""}},GIBBET:{id:24382,name:"Gibbet",label:{zh:""}},GALLOWS:{id:24383,name:"Gallows",label:{zh:""}},EXECUTIONERS_GIBBET:{id:36970,name:"Executioner's Gibbet",label:{zh:""}},EXECUTIONERS_GALLOWS:{id:36971,name:"Executioner's Gallows",label:{zh:""}},VOID_REAPING:{id:24395,name:"Void Reaping",label:{zh:""}},CROSS_REAPING:{id:24396,name:"Cross Reaping",label:{zh:""}},PLENTIFUL_HARVEST:{id:24385,name:"Plentiful Harvest",label:{zh:""}},HARVEST_MOON:{id:24388,name:"Harvest Moon",label:{zh:""}},COMMUNIO:{id:24398,name:"Communio",label:{zh:""}},PERFECTIO:{id:36973,name:"Perfectio",label:{zh:""}},SOULSOW:{id:24387,name:"Soulsow",label:{zh:""}},HARPE:{id:24386,name:"Harpe",label:{zh:""}},BLOOD_STALK:{id:24389,name:"Blood Stalk",label:{zh:""}},UNVEILED_GIBBET:{id:24390,name:"Unveiled Gibbet",label:{zh:""}},UNVEILED_GALLOWS:{id:24391,name:"Unveiled Gallows",label:{zh:""}},LEMURES_SLICE:{id:24399,name:"Lemure's Slice",label:{zh:""}},SACRIFICIUM:{id:36969,name:"Sacrificium",label:{zh:""}},ARCANE_CIRCLE:{id:24405,name:"Arcane Circle",label:{zh:""}},GLUTTONY:{id:24393,name:"Gluttony",label:{zh:""}},ENSHROUD:{id:24394,name:"Enshroud",label:{zh:""}},SPINNING_SCYTHE:{id:24376,name:"Spinning Scythe",label:{zh:""}},NIGHTMARE_SCYTHE:{id:24377,name:"Nightmare Scythe",label:{zh:""}},WHORL_OF_DEATH:{id:24379,name:"Whorl of Death",label:{zh:""}},SOUL_SCYTHE:{id:24381,name:"Soul Scythe",label:{zh:""}},GUILLOTINE:{id:24384,name:"Guillotine",label:{zh:""}},EXECUTIONERS_GUILLOTINE:{id:36972,name:"Executioner's Guillotine",label:{zh:""}},GRIM_REAPING:{id:24397,name:"Grim Reaping",label:{zh:""}},GRIM_SWATHE:{id:24392,name:"Grim Swathe",label:{zh:""}},LEMURES_SCYTHE:{id:24400,name:"Lemure's Scythe",label:{zh:""}},ARCANE_CREST:{id:24404,name:"Arcane Crest",label:{zh:""}},ARCANE_CREST_POP:{name:"Pop Arcane Crest",label:{zh:""}},HELLS_INGRESS:{id:24401,name:"Hell's Ingress",label:{zh:""}},HELLS_EGRESS:{id:24402,name:"Hell's Egress",label:{zh:""}},REGRESS:{id:24403,name:"Regress",label:{zh:""}},GAIN_SOUL_GAUGE:{name:"+10 Soul Gauge",label:{zh:"+10"}}}),b1=le()({cd_ARCANE_CIRCLE:{name:"cd_ArcaneCircle"},cd_GLUTTONY:{name:"cd_Gluttony"},cd_SOUL_SLICE:{name:"cd_SoulSlice"},cd_ENSHROUD:{name:"cd_Enshroud"},cd_INGRESS_EGRESS:{name:"cd_IngressEgress",label:{zh:"CD/"}},cd_ARCANE_CREST:{name:"cd_ArcaneCrest"},cd_ARCANE_CREST_POP:{name:"cd_ArcaneCrestPop"},cd_BLOOD_STALK:{name:"cd_BloodStalk"},cd_LEMURES_SLICE:{name:"cd_LemuresSlice"},cd_SACRIFICIUM:{name:"cd_Sacrificium"},cd_GAIN_SOUL_GAUGE:{name:"cd_GainSoulGauge"}}),O1=le()({SOUL:{name:"Soul",label:{zh:""}},SHROUD:{name:"Shroud",label:{zh:""}},LEMURE_SHROUD:{name:"Lemure Shroud",label:{zh:""}},VOID_SHROUD:{name:"Void Shroud",label:{zh:""}}}),XR=le()({DEATHS_DESIGN:{name:"Death's Design",label:{zh:""},specialDebuff:!0},SOUL_REAVER:{name:"Soul Reaver",label:{zh:""},maximumStacks:2},ENHANCED_GIBBET:{name:"Enhanced Gibbet",label:{zh:""}},ENHANCED_GALLOWS:{name:"Enhanced Gallows",label:{zh:""}},EXECUTIONER:{name:"Executioner",label:{zh:""},maximumStacks:2},ENSHROUDED:{name:"Enshrouded",label:{zh:""}},ENHANCED_VOID_REAPING:{name:"Enhanced Void Reaping",label:{zh:""}},ENHANCED_CROSS_REAPING:{name:"Enhanced Cross Reaping",label:{zh:""}},OBLATIO:{name:"Oblatio",label:{zh:""}},IDEAL_HOST:{name:"Ideal Host",label:{zh:""}},PERFECTIO_OCCULTA:{name:"Perfectio Occulta",label:{zh:""}},PERFECTIO_PARATA:{name:"Perfectio Parata",label:{zh:""}},ARCANE_CIRCLE:{name:"Arcane Circle",label:{zh:""}},CIRCLE_OF_SACRIFICE:{name:"Circle of Sacrifice",label:{zh:""}},BLOODSOWN_CIRCLE:{name:"Bloodsown Circle",label:{zh:""}},IMMORTAL_SACRIFICE:{name:"Immortal Sacrifice",label:{zh:""},maximumStacks:8},CREST_OF_TIME_BORROWED:{name:"Crest of Time Borrowed",label:{zh:""}},CREST_OF_TIME_RETURNED:{name:"Crest of Time Returned",label:{zh:""}},SOULSOW:{name:"Soulsow",label:{zh:""}},THRESHOLD:{name:"Threshold",label:{zh:""}},ENHANCED_HARPE:{name:"Enhanced Harpe",label:{zh:""}}}),D1=le()({ARCANE_CREST:{name:"Arcane Crest",label:{zh:""}},HELLS_INGRESS_USED:{name:"Hell's Ingress Used",label:{zh:""}},RPR_COMBO:{name:"RPR Combo",label:{zh:""}},RPR_AOE_COMBO:{name:"RPR AoE Combo",label:{zh:"AOE"}}}),y1=le()({HELLSGATE:{name:"Hellsgate",level:74},TEMPERED_SOUL:{name:"Tempered Soul",level:78},SHROUD_GAUGE:{name:"Shroud Gauge",level:80},ENHANCED_ARCANE_CREST:{name:"Enhanced Arcane Crest",level:84},MELEE_MASTERY_II_RPR:{name:"Melee Mastery II",level:84},VOID_SOUL:{name:"Void Soul",level:86},ENHANCED_ARCANE_CIRCLE:{name:"Enhanced Arcane Circle",level:88},ENHANCED_ENSHROUD:{name:"Enhanced Enshroud",level:92},MELEE_MASTERY_III_RPR:{name:"Melee Mastery III",level:94},ENHANCED_GLUTTONY:{name:"Enhanced Gluttony",level:96},ENHANCED_PLENTIFUL_HARVEST:{name:"Enhanced Plentiful Harvest",level:100}}),v1={...O1,...XR,...D1},M1=le()({ENPI:{id:7486,name:"Enpi",label:{zh:""}},HAKAZE:{id:7477,name:"Hakaze",label:{zh:""}},GYOFU:{id:36963,name:"Gyofu",label:{zh:""}},YUKIKAZE:{id:7480,name:"Yukikaze",label:{zh:""}},JINPU:{id:7478,name:"Jinpu",label:{zh:""}},GEKKO:{id:7481,name:"Gekko",label:{zh:""}},SHIFU:{id:7479,name:"Shifu",label:{zh:""}},KASHA:{id:7482,name:"Kasha",label:{zh:""}},FUGA:{id:7483,name:"Fuga",label:{zh:""}},FUKO:{id:25780,name:"Fuko",label:{zh:""}},MANGETSU:{id:7484,name:"Mangetsu",label:{zh:""}},OKA:{id:7485,name:"Oka",label:{zh:""}},MEIKYO_SHISUI:{id:7499,name:"Meikyo Shisui",label:{zh:""}},IKISHOTEN:{id:16482,name:"Ikishoten",label:{zh:""}},HISSATSU_SHINTEN:{id:7490,name:"Hissatsu: Shinten",label:{zh:""}},HISSATSU_KYUTEN:{id:7491,name:"Hissatsu: Kyuten",label:{zh:""}},HISSATSU_GYOTEN:{id:7492,name:"Hissatsu: Gyoten",label:{zh:""}},HISSATSU_YATEN:{id:7493,name:"Hissatsu: Yaten",label:{zh:""}},HISSATSU_SENEI:{id:16481,name:"Hissatsu: Senei",label:{zh:""}},HISSATSU_GUREN:{id:7496,name:"Hissatsu: Guren",label:{zh:""}},HAGAKURE:{id:7495,name:"Hagakure",label:{zh:""}},IAIJUTSU:{id:7867,name:"Iaijutsu",label:{zh:""}},TSUBAME_GAESHI:{id:16483,name:"Tsubame-gaeshi",label:{zh:""}},SHOHA:{id:16487,name:"Shoha",label:{zh:""}},THIRD_EYE:{id:7498,name:"Third Eye",label:{zh:""}},TENGENTSU:{id:36962,name:"Tengentsu",label:{zh:""}},OGI_NAMIKIRI:{id:25781,name:"Ogi Namikiri",label:{zh:""}},KAESHI_NAMIKIRI:{id:25782,name:"Kaeshi: Namikiri",label:{zh:""}},ZANSHIN:{id:36964,name:"Zanshin",label:{zh:""}},MEDITATE:{id:7497,name:"Meditate",label:{zh:""}},HIGANBANA:{id:7489,name:"Higanbana",label:{zh:""}},TENKA_GOKEN:{id:7488,name:"Tenka Goken",label:{zh:""}},KAESHI_GOKEN:{id:16485,name:"Kaeshi: Goken",label:{zh:""}},TENDO_GOKEN:{id:36965,name:"Tendo Goken",label:{zh:""}},TENDO_KAESHI_GOKEN:{id:36967,name:"Tendo Kaeshi Goken",label:{zh:""}},MIDARE_SETSUGEKKA:{id:7487,name:"Midare Setsugekka",label:{zh:""}},KAESHI_SETSUGEKKA:{id:16486,name:"Kaeshi: Setsugekka",label:{zh:""}},TENDO_SETSUGEKKA:{id:36966,name:"Tendo Setsugekka",label:{zh:""}},TENDO_KAESHI_SETSUGEKKA:{id:36968,name:"Tendo Kaeshi Setsugekka",label:{zh:""}},THIRD_EYE_POP:{name:"Pop Third Eye",label:{zh:""}},TENGENTSU_POP:{name:"Pop Tengentsu",label:{zh:""}}}),L1=le()({cd_YATEN:{name:"cd_Yaten",label:{zh:"CD"}},cd_GYOTEN:{name:"cd_Gyoten",label:{zh:"CD"}},cd_SENEI_GUREN:{name:"cd_Senei",label:{zh:"CD: /"}},cd_SHINTEN:{name:"cd_Shinten",label:{zh:"CD"}},cd_KYUTEN:{name:"cd_Kyuten",label:{zh:"CD"}},cd_MEDITATE:{name:"cd_Meditate"},cd_IKISHOTEN:{name:"cd_Ikishoten"},cd_ZANSHIN:{name:"cd_Zanshin"},cd_HAGAKURE:{name:"cd_Hagakure"},cd_SHOHA:{name:"cd_Shoha"},cd_MEIKYO_SHISUI:{name:"cd_MeikyoShisui"},cd_THIRD_EYE:{name:"cd_ThirdEye"},cd_THIRD_EYE_POP:{name:"cd_ThirdEyePop"}}),x1=le()({KENKI:{name:"Kenki",label:{zh:""}},SETSU:{name:"Setsu",label:{zh:""}},GETSU:{name:"Getsu",label:{zh:""}},KA_SEN:{name:"Ka",label:{zh:""}},MEDITATION:{name:"Meditation",label:{zh:""}}}),qR=le()({MEIKYO_SHISUI:{name:"Meikyo Shisui",label:{zh:""},maximumStacks:3},FUGETSU:{name:"Fugetsu",label:{zh:""}},FUKA:{name:"Fuka",label:{zh:""}},ZANSHIN_READY:{name:"Zanshin Ready",label:{zh:""}},TENDO:{name:"Tendo",label:{zh:""}},OGI_READY:{name:"Ogi Namikiri Ready",label:{zh:""}},TSUBAME_GAESHI_READY:{name:"Tsubame-gaeshi Ready",label:{zh:""}},THIRD_EYE:{name:"Third Eye",label:{zh:""}},TENGENTSU:{name:"Tengentsu",label:{zh:""}},TENGENTSUS_FORESIGHT:{name:"Tengentsu's Foresight",label:{zh:""}},MEDITATE:{name:"Meditate",label:{zh:""}},ENHANCED_ENPI:{name:"Enhanced Enpi",label:{zh:""}},HIGANBANA_DOT:{name:"HiganbanaDoT",label:{zh:"dot"}}}),H1=le()({SAM_TWO_READY:{name:"SAMTwoReady",label:{zh:"2"}},SAM_TWO_AOE_READY:{name:"SAMTwoAoeReady",label:{zh:"AOE2"}},GEKKO_READY:{name:"GekkoReady",label:{zh:""}},KASHA_READY:{name:"KashaReady",label:{zh:""}},KAESHI_OGI_READY:{name:"KaeshiOgiReady",label:{zh:""}},KAESHI_TRACKER:{name:"KaeshiTracker",label:{zh:""}}}),k1=le()({ENHANCED_IAIJUTSU:{name:"Enhanced Iaijutsu",level:74},ENHANCED_MEIKYO_SHISUI:{name:"Enhanced Meikyo Shisui",level:76},ENHANCED_FUGETSU_AND_FUKA:{name:"Enhanced Fugetsu and Fuka",level:78},THIRD_EYE_MASTERY:{name:"Third Eye Mastery",level:82},WAY_OF_THE_SAMURAI_II:{name:"Way of the Samurai II",level:84},FUGA_MASTERY:{name:"Fuga Mastery",level:86},ENHANCED_IKISHOTEN:{name:"Enhanced Ikishoten",level:90},HAKAZE_MASTERY:{name:"Hakaze Mastery",level:92},ENHANCED_HISSATSU:{name:"Enhanced Hissatsu",level:94},WAY_OF_THE_SAMURAI_III:{name:"Way of the Samurai III",level:94},ENHANCED_IKISHOTEN_II:{name:"Enhanced Ikishoten II",level:96},ENHANCED_MEIKYO_SHISUI_II:{name:"Enhanced Meikyo Shisui II",level:100}}),U1={...x1,...qR,...H1},ZR=le()({PHYSICK:{id:190,name:"Physick",label:{zh:"",ja:""}},SUMMON_EOS:{id:17215,name:"Summon Eos",label:{zh:"",ja:""}},RESURRECTION:{id:173,name:"Resurrection",label:{zh:"",ja:""}},WHISPERING_DAWN:{id:16537,name:"Whispering Dawn",label:{zh:"",ja:""}},BIO_II:{id:17865,name:"Bio II",label:{zh:"",ja:""}},ADLOQUIUM:{id:185,name:"Adloquium",label:{zh:"",ja:""}},SUCCOR:{id:186,name:"Succor",label:{zh:"",ja:""}},RUIN_II:{id:17870,name:"Ruin II",label:{zh:"",ja:""}},FEY_ILLUMINATION:{id:16538,name:"Fey Illumination",label:{zh:"",ja:""}},AETHERFLOW:{id:166,name:"Aetherflow",label:{zh:"",ja:""}},ENERGY_DRAIN:{id:167,name:"Energy Drain",label:{zh:"",ja:""}},LUSTRATE:{id:189,name:"Lustrate",label:{zh:"",ja:""}},ART_OF_WAR:{id:16539,name:"Art of War",label:{zh:"",ja:""}},SACRED_SOIL:{id:188,name:"Sacred Soil",label:{zh:"",ja:""}},INDOMITABILITY:{id:3583,name:"Indomitability",label:{zh:"",ja:""}},DEPLOYMENT_TACTICS:{id:3585,name:"Deployment Tactics",label:{zh:"",ja:""}},EMERGENCY_TACTICS:{id:3586,name:"Emergency Tactics",label:{zh:"",ja:""}},DISSIPATION:{id:3587,name:"Dissipation",label:{zh:"",ja:""}},EXCOGITATION:{id:7434,name:"Excogitation",label:{zh:"",ja:""}},BROIL_II:{id:7435,name:"Broil II",label:{zh:"",ja:""}},CHAIN_STRATAGEM:{id:7436,name:"Chain Stratagem",label:{zh:"",ja:""}},AETHERPACT:{id:7437,name:"Aetherpact",label:{zh:"",ja:""}},DISSOLVE_UNION:{id:7869,name:"Dissolve Union",label:{zh:"",ja:""}},BIOLYSIS:{id:16540,name:"Biolysis",label:{zh:"",ja:""}},BROIL_III:{id:16541,name:"Broil III",label:{zh:"",ja:""}},RECITATION:{id:16542,name:"Recitation",label:{zh:"",ja:""}},FEY_BLESSING:{id:16543,name:"Fey Blessing",label:{zh:"",ja:""}},SUMMON_SERAPH:{id:16545,name:"Summon Seraph",label:{zh:"",ja:""}},CONSOLATION:{id:16546,name:"Consolation",label:{zh:"",ja:""}},BROIL_IV:{id:25865,name:"Broil IV",label:{zh:"",ja:""}},ART_OF_WAR_II:{id:25866,name:"Art of War II",label:{zh:"",ja:""}},PROTRACTION:{id:25867,name:"Protraction",label:{zh:"",ja:""}},EXPEDIENT:{id:25868,name:"Expedient",label:{zh:"",ja:""}},BANEFUL_IMPACTION:{id:37012,name:"Baneful Impaction",label:{zh:"",ja:""}},CONCITATION:{id:37013,name:"Concitation",label:{zh:"",ja:""}},SERAPHISM:{id:37014,name:"Seraphism",label:{zh:"",ja:""}},MANIFESTATION:{id:37015,name:"Manifestation",label:{zh:"",ja:""}},ACCESSION:{id:37016,name:"Accession",label:{zh:"",ja:""}},ANGELS_WHISPER:{name:"Angel's Whisper",label:{zh:""}}}),P1=le()({cd_WHISPERING_DAWN:{name:"cd_WhisperingDawn"},cd_FEY_ILLUMINATION:{name:"cd_FeyIllumination"},cd_AETHERFLOW:{name:"cd_Aetherflow"},cd_ENERGY_DRAIN:{name:"cd_EnergyDrain"},cd_LUSTRATE:{name:"cd_Lustrate"},cd_SACRED_SOIL:{name:"cd_SacredSoil"},cd_INDOMITABILITY:{name:"cd_Indomitability"},cd_DEPLOYMENT_TACTICS:{name:"cd_DeploymentTactics"},cd_EMERGENCY_TACTICS:{name:"cd_EmergencyTactics"},cd_DISSIPATION:{name:"cd_Dissipation"},cd_EXCOGITATION:{name:"cd_Excogitation"},cd_CHAIN_STRATAGEM:{name:"cd_ChainStratagem"},cd_AETHERPACT:{name:"cd_Aetherpact"},cd_DISSOLVE_UNION:{name:"cd_DissolveUnion"},cd_RECITATION:{name:"cd_Recitation"},cd_FEY_BLESSING:{name:"cd_FeyBlessing"},cd_SUMMON_SERAPH:{name:"cd_SummonSeraph"},cd_CONSOLATION:{name:"cd_Consolation"},cd_CONSOLATION_INTERNAL:{name:"cd_ConsolationInternal"},cd_PROTRACTION:{name:"cd_Protraction"},cd_EXPEDIENT:{name:"cd_Expedient"},cd_BANEFUL_IMPACTION:{name:"cd_BanefulImpaction"},cd_SERAPHISM:{name:"cd_Seraphism"}}),w1=le()({AETHERFLOW:{name:"Aetherflow",maximumCharges:3,label:{zh:""}},FAERIE_GAUGE:{name:"Faerie Gauge",maximumStacks:100,label:{zh:""}}}),QR=le()({BIO_II:{name:"Bio II",label:{zh:""}},CATALYZE:{name:"Catalyze",label:{zh:""}},GALVANIZE:{name:"Galvanize",label:{zh:""}},WHISPERING_DAWN:{name:"Whispering Dawn",label:{zh:""}},ANGELS_WHISPER:{name:"Angel's Whisper",label:{zh:""}},FEY_ILLUMINATION:{name:"Fey Illumination",label:{zh:""}},SERAPHIC_ILLUMINATION:{name:"Seraphic Illumination",label:{zh:""}},SACRED_SOIL_MIT:{name:"Sacred Soil (Mitigation)",label:{zh:"[]"},mayNotBeCanceled:!0},SACRED_SOIL_ZONE:{name:"Sacred Soil",label:{zh:""},mayBeToggled:!0},EMERGENCY_TACTICS:{name:"Emergency Tactics",label:{zh:""}},DISSIPATION:{name:"Dissipation",label:{zh:""},mayNotBeCanceled:!0},EXCOGITATION:{name:"Excogitation",label:{zh:""}},CHAIN_STRATAGEM:{name:"Chain Stratagem",label:{zh:""},specialDebuff:!0},IMPACT_IMMINENT:{name:"Impact Imminent",label:{zh:""}},BIOLYSIS:{name:"Biolysis",label:{zh:""}},RECITATION:{name:"Recitation",label:{zh:""}},FEY_UNION:{name:"Fey Union",label:{zh:""}},SERAPHIC_VEIL:{name:"Seraphic Veil",label:{zh:""}},PROTRACTION:{name:"Protraction",label:{zh:""}},EXPEDIENCE:{name:"Expedience",label:{zh:""}},DESPERATE_MEASURES:{name:"Desperate Measures",label:{zh:""}},BANEFUL_IMPACTION:{name:"Baneful Impaction",label:{zh:""}},SERAPHISM:{name:"Seraphism",label:{zh:""},mayNotBeCanceled:!0},SERAPHISM_REGEN:{name:"Seraphism (Regen)",label:{zh:"[]"}}}),G1=le()({SERAPH_SUMMON_TIMER:{name:"Seraph Summon Timer",label:{zh:""}}}),B1=le()({CORRUPTION_MASTERY_II:{name:"Corruption Mastery II",level:72},BROIL_MASTERY_III:{name:"Broil Mastery III",level:72},ENHANCED_SACRED_SOIL:{name:"Enhanced Sacred Soil",level:78},BROIL_MASTERY_IV:{name:"Broil Mastery IV",level:82},ART_OF_WAR_MASTERY:{name:"Art of War Mastery",level:82},ENHANCED_DEPLOYMENT_TACTICS:{name:"Enhanced Deployment Tactics",level:88},ENHANCED_CHAIN_STRATAGEM:{name:"Enhanced Chain Stratagem",level:92},TACTICIANS_MASTERY:{name:"Tactician's Mastery",level:94},SUCCOR_MASTERY:{name:"Succor Mastery",level:96},ENHANCED_RECITATION:{name:"Enhanced Recitation",level:98}}),F1={...w1,...QR,...G1},j1=le()({DIAGNOSIS:{id:24284,name:"Diagnosis",label:{zh:""}},EUKRASIAN_DIAGNOSIS:{id:24291,name:"Eukrasian Diagnosis",label:{zh:""}},EUKRASIAN_DIAGNOSIS_POP:{name:"Pop Eukrasian Diagnosis",label:{zh:""}},HAIMA:{id:24305,name:"Haima",label:{zh:""}},HAIMA_POP:{name:"Pop Haima",label:{zh:""}},EGEIRO:{id:24287,name:"Egeiro",label:{zh:""}},PROGNOSIS:{id:24286,name:"Prognosis",label:{zh:""}},EUKRASIAN_PROGNOSIS:{id:24292,name:"Eukrasian Prognosis",label:{zh:""}},EUKRASIAN_PROGNOSIS_II:{id:37034,name:"Eukrasian Prognosis II",label:{zh:" II"}},EUKRASIAN_PROGNOSIS_POP:{name:"Pop Eukrasian Prognosis",label:{zh:""}},EUKRASIAN_PROGNOSIS_II_POP:{name:"Pop Eukrasian Prognosis II",label:{zh:" II "}},PANHAIMA:{id:24311,name:"Panhaima",label:{zh:""}},PANHAIMA_POP:{name:"Pop Panhaima",label:{zh:""}},PHYSIS_II:{id:24302,name:"Physis II",label:{zh:" II"}},HOLOS:{id:24310,name:"Holos",label:{zh:""}},PEPSIS:{id:24301,name:"Pepsis",label:{zh:""}},KARDIA:{id:24285,name:"Kardia",label:{zh:""}},EUKRASIA:{id:24290,name:"Eukrasia",label:{zh:""}},SOTERIA:{id:24294,name:"Soteria",label:{zh:""}},ICARUS:{id:24295,name:"Icarus",label:{zh:""}},ZOE:{id:24300,name:"Zoe",label:{zh:""}},KRASIS:{id:24317,name:"Krasis",label:{zh:""}},PHILOSOPHIA:{id:37035,name:"Philosophia",label:{zh:""}},RHIZOMATA:{id:24309,name:"Rhizomata",label:{zh:""}},DRUOCHOLE:{id:24296,name:"Druochole",label:{zh:""}},IXOCHOLE:{id:24299,name:"Ixochole",label:{zh:""}},KERACHOLE:{id:24298,name:"Kerachole",label:{zh:""}},TAUROCHOLE:{id:24303,name:"Taurochole",label:{zh:""}},DOSIS:{id:24283,name:"Dosis",label:{zh:""}},DOSIS_II:{id:24306,name:"Dosis II",label:{zh:" II"}},DOSIS_III:{id:24312,name:"Dosis III",label:{zh:" III"}},EUKRASIAN_DOSIS:{id:24293,name:"Eukrasian Dosis",label:{zh:""}},EUKRASIAN_DOSIS_II:{id:24308,name:"Eukrasian Dosis II",label:{zh:" II"}},EUKRASIAN_DOSIS_III:{id:24314,name:"Eukrasian Dosis III",label:{zh:" III"}},TOXIKON:{id:24304,name:"Toxikon",label:{zh:""}},TOXIKON_II:{id:24316,name:"Toxikon II",label:{zh:" II"}},DYSKRASIA:{id:24297,name:"Dyskrasia",label:{zh:""}},DYSKRASIA_II:{id:24315,name:"Dyskrasia II",label:{zh:" II"}},EUKRASIAN_DYSKRASIA:{id:37032,name:"Eukrasian Dyskrasia",label:{zh:""}},PHLEGMA:{id:24289,name:"Phlegma",label:{zh:""}},PHLEGMA_II:{id:24307,name:"Phlegma II",label:{zh:" II"}},PHLEGMA_III:{id:24313,name:"Phlegma III",label:{zh:" III"}},PSYCHE:{id:37033,name:"Psyche",label:{zh:""}},PNEUMA:{id:24318,name:"Pneuma",label:{zh:""}}}),z1=le()({cd_HAIMA:{name:"cd_Haima"},cd_PANHAIMA:{name:"cd_PANHAIMA"},cd_PHYSIS:{name:"cd_PHYSIS",label:{zh:"CD"}},cd_HOLOS:{name:"cd_HOLOS"},cd_PEPSIS:{name:"cd_PEPSIS"},cd_KARDIA:{name:"cd_KARDIA"},cd_EUKRASIA:{name:"cd_EUKRASIA"},cd_SOTERIA:{name:"cd_SOTERIA"},cd_ICARUS:{name:"cd_ICARUS"},cd_ZOE:{name:"cd_ZOE"},cd_KRASIS:{name:"cd_KRASIS"},cd_PHILOSOPHIA:{name:"cd_PHILOSOPHIA"},cd_RHIZOMATA:{name:"cd_RHIZOMATA"},cd_DRUOCHOLE:{name:"cd_DRUOCHOLE"},cd_IXOCHOLE:{name:"cd_IXOCHOLE"},cd_KERACHOLE:{name:"cd_KERACHOLE"},cd_TAUROCHOLE:{name:"cd_TAUROCHOLE"},cd_PHLEGMA:{name:"cd_PHLEGMA"},cd_PSYCHE:{name:"cd_PSYCHE"},cd_PNEUMA:{name:"cd_PNEUMA"},cd_DIAGNOSIS_POP:{name:"cd_DIAGNOSIS_POP",label:{zh:"CD"}},cd_PROGNOSIS_POP:{name:"cd_PROGNOSIS_POP",label:{zh:"CD"}},cd_HAIMA_POP:{name:"cd_HAIMA_POP"},cd_PANHAIMA_POP:{name:"cd_PANHAIMA_POP"}}),Y1=le()({ADDERSGALL:{name:"Addersgall",label:{zh:""}},ADDERSTING:{name:"Addersting",label:{zh:""}}}),QN=le()({EUKRASIA:{id:2606,name:"Eukrasia",label:{zh:""}},EUKRASIAN_DIAGNOSIS:{id:2607,name:"Eukrasian Diagnosis",label:{zh:""}},DIFFERENTIAL_DIAGNOSIS:{id:2608,name:"Differential Diagnosis",label:{zh:""}},HAIMA:{id:2612,name:"Haima",label:{zh:""},mayNotBeCanceled:!0},HAIMATINON:{id:2642,name:"Haimatinon",label:{zh:""},maximumStacks:5,mayNotBeCanceled:!0},EUKRASIAN_PROGNOSIS:{id:2609,name:"Eukrasian Prognosis",label:{zh:""}},PANHAIMA:{id:2613,name:"Panhaima",label:{zh:""},mayNotBeCanceled:!0},PANHAIMATINON:{id:2643,name:"Panhaimatinon",label:{zh:""},maximumStacks:5,mayNotBeCanceled:!0},PHYSIS_II:{id:2620,name:"Physis II",label:{zh:" II"}},AUTOPHYSIS:{id:2621,name:"Autophysis",label:{zh:""}},KARDIA:{id:2604,name:"Kardia",label:{zh:""}},KARDION:{id:2605,name:"Kardion",label:{zh:""}},PHILOSOPHIA:{id:3898,name:"Philosophia",label:{zh:""}},EUDAIMONIA:{id:3899,name:"Eudaimonia",label:{zh:""}},SOTERIA:{id:2610,name:"Soteria",label:{zh:""},maximumStacks:4},ZOE:{id:2611,name:"Zoe",label:{zh:""}},KRASIS:{id:2622,name:"Krasis",label:{zh:""}},KERACHOLE:{id:2618,name:"Kerachole",label:{zh:""}},KERAKEIA:{id:2938,name:"Kerakeia",label:{zh:"[]"}},TAUROCHOLE:{id:2619,name:"Taurochole",label:{zh:""}},EUKRASIAN_DOSIS:{id:2614,name:"Eukrasian Dosis",label:{zh:""}},EUKRASIAN_DOSIS_II:{id:2615,name:"Eukrasian Dosis II",label:{zh:" II"}},EUKRASIAN_DOSIS_III:{id:2616,name:"Eukrasian Dosis III",label:{zh:" III"}},EUKRASIAN_DYSKRASIA:{id:3897,name:"Eukrasian Dyskrasia",label:{zh:""}},PNEUMA:{id:2623,name:"Pneuma",label:{zh:""}},HOLOS:{id:3003,name:"Holos",label:{zh:""}},HOLOSAKOS:{id:3365,name:"Holosakos",label:{zh:""}}}),K1=le()({PEPSIS:{name:"Pepsis",label:{zh:""}}}),V1=le()({OFFENSIVE_MAGIC_MASTERY:{name:"Offensive Magic Mastery",level:72},OFFENSIVE_MAGIC_MASTERY_II:{name:"Offensive Magic Mastery II",level:82},ENHANCED_KERACHOLE:{name:"Enhanced Kerachole",level:78},ENHANCED_ZOE:{name:"Enhanced Zoe",level:88},ENHANCED_SOTERIA:{name:"Enhanced Soteria",level:94},EUKRASIAN_PROGNOSIS_MASTERY:{name:"Eukrasian Prognosis Mastery",level:96},ENHANCED_PHYSIS_II:{name:"Enhanced Physis II",level:98}}),W1={...Y1,...QN,...K1},$N=le()({SUMMON_CARBUNCLE:{id:25798,name:"Summon Carbuncle",label:{zh:""}},RADIANT_AEGIS:{id:25799,name:"Radiant Aegis",label:{zh:""}},PHYSICK:{id:16230,name:"Physick",label:{zh:""}},GEMSHINE:{id:25883,name:"Gemshine",label:{zh:""}},FESTER:{id:181,name:"Fester",label:{zh:""}},ENERGY_DRAIN:{id:16508,name:"Energy Drain",label:{zh:""}},RESURRECTION:{id:173,name:"Resurrection",label:{zh:""}},OUTBURST:{id:16511,name:"Outburst",label:{zh:""}},PRECIOUS_BRILLIANCE:{id:25884,name:"Precious Brilliance",label:{zh:""}},RUBY_OUTBURST:{id:25814,name:"Ruby Outburst",label:{zh:""}},TOPAZ_OUTBURST:{id:25815,name:"Topaz Outburst",label:{zh:""}},EMERALD_OUTBURST:{id:25816,name:"Emerald Outburst",label:{zh:""}},SUMMON_IFRIT:{id:25805,name:"Summon Ifrit",label:{zh:""}},PAINFLARE:{id:3578,name:"Painflare",label:{zh:""}},SUMMON_TITAN:{id:25806,name:"Summon Titan",label:{zh:""}},SUMMON_GARUDA:{id:25807,name:"Summon Garuda",label:{zh:""}},ENERGY_SIPHON:{id:16510,name:"Energy Siphon",label:{zh:""}},RUBY_RUIN_III:{id:25817,name:"Ruby Ruin III",label:{zh:""}},TOPAZ_RUIN_III:{id:25818,name:"Topaz Ruin III",label:{zh:""}},EMERALD_RUIN_III:{id:25819,name:"Emerald Ruin III",label:{zh:""}},RUIN_III:{id:3579,name:"Ruin III",label:{zh:""}},ASTRAL_IMPULSE:{id:25820,name:"Astral Impulse",label:{zh:""}},ASTRAL_FLARE:{id:25821,name:"Astral Flare",label:{zh:""}},ASTRAL_FLOW:{id:25822,name:"Astral Flow",label:{zh:""}},DEATHFLARE:{id:3582,name:"Deathflare",label:{zh:""}},RUIN_IV:{id:7426,name:"Ruin IV",label:{zh:""}},SEARING_LIGHT:{id:25801,name:"Searing Light",label:{zh:""}},SUMMON_BAHAMUT:{id:7427,name:"Summon Bahamut",label:{zh:""}},ENKINDLE_BAHAMUT:{id:7429,name:"Enkindle Bahamut",label:{zh:""}},RUBY_RITE:{id:25823,name:"Ruby Rite",label:{zh:""}},TOPAZ_RITE:{id:25824,name:"Topaz Rite",label:{zh:""}},EMERALD_RITE:{id:25825,name:"Emerald Rite",label:{zh:""}},TRI_DISASTER:{id:25826,name:"Tri-disaster",label:{zh:""}},RUBY_DISASTER:{id:25827,name:"Ruby Disaster",label:{zh:""}},TOPAZ_DISASTER:{id:25828,name:"Topaz Disaster",label:{zh:""}},EMERALD_DISASTER:{id:25829,name:"Emerald Disaster",label:{zh:""}},SUMMON_PHOENIX:{id:25831,name:"Summon Phoenix",label:{zh:""}},FOUNTAIN_OF_FIRE:{id:16514,name:"Fountain of Fire",label:{zh:""}},BRAND_OF_PURGATORY:{id:16515,name:"Brand of Purgatory",label:{zh:""}},REKINDLE:{id:25830,name:"Rekindle",label:{zh:""}},ENKINDLE_PHOENIX:{id:16516,name:"Enkindle Phoenix",label:{zh:""}},RUBY_CATASTROPHE:{id:25832,name:"Ruby Catastrophe",label:{zh:""}},TOPAZ_CATASTROPHE:{id:25833,name:"Topaz Catastrophe",label:{zh:""}},EMERALD_CATASTROPHE:{id:25834,name:"Emerald Catastrophe",label:{zh:""}},CRIMSON_CYCLONE:{id:25835,name:"Crimson Cyclone",label:{zh:""}},CRIMSON_STRIKE:{id:25885,name:"Crimson Strike",label:{zh:""}},MOUNTAIN_BUSTER:{id:25836,name:"Mountain Buster",label:{zh:""}},SLIPSTREAM:{id:25837,name:"Slipstream",label:{zh:""}},SUMMON_IFRIT_II:{id:25838,name:"Summon Ifrit II",label:{zh:" II"}},SUMMON_TITAN_II:{id:25839,name:"Summon Titan II",label:{zh:" II"}},SUMMON_GARUDA_II:{id:25840,name:"Summon Garuda II",label:{zh:" II"}},NECROTIZE:{id:36990,name:"Necrotize",label:{zh:""}},SEARING_FLASH:{id:36991,name:"Searing Flash",label:{zh:""}},SUMMON_SOLAR_BAHAMUT:{id:36992,name:"Summon Solar Bahamut",label:{zh:""}},UMBRAL_IMPULSE:{id:36994,name:"Umbral Impulse",label:{zh:""}},UMBRAL_FLARE:{id:36995,name:"Umbral Flare",label:{zh:""}},SUNFLARE:{id:36996,name:"Sunflare",label:{zh:""}},ENKINDLE_SOLAR_BAHAMUT:{id:36998,name:"Enkindle Solar Bahamut",label:{zh:""}},LUX_SOLARIS:{id:36997,name:"Lux Solaris",label:{zh:""}},INFERNO:{id:25852,name:"Inferno",label:{zh:""}},EARTHEN_FURY:{id:25853,name:"Earthen Fury",label:{zh:""}},AERIAL_BLAST:{id:25854,name:"Aerial Blast",label:{zh:""}},WYRMWAVE:{id:7428,name:"Wyrmwave",label:{zh:""}},SCARLET_FLAME:{id:16519,name:"Scarlet Flame",label:{zh:""}},LUXWAVE:{id:36993,name:"Luxwave",label:{zh:""}},AKH_MORN:{id:7449,name:"Akh Morn",label:{zh:""}},REVELATION:{id:16518,name:"Revelation",label:{zh:""}},EXODUS:{id:36999,name:"Exodus",label:{zh:""}}}),X1=le()({cd_RADIANT_AEGIS:{name:"cd_RADIANT_AEGIS"},cd_ASTRAL_FLOW:{name:"cd_ASTRAL_FLOW"},cd_ENKINDLE:{name:"cd_ENKINDLE",label:{zh:"CD//"}},cd_DEMI_SUMMON:{name:"cd_DEMI_SUMMON",label:{zh:"CD"}},cd_ENERGY_DRAIN:{name:"cd_ENERGY_DRAIN"},cd_AETHERFLOW:{name:"cd_AETHERFLOW",label:{zh:"CD"}},cd_SEARING_LIGHT:{name:"cd_SEARING_LIGHT"},cd_SEARING_FLASH:{name:"cd_SEARING_FLASH"},cd_LUX_SOLARIS:{name:"cd_LUX_SOLARIS"},cd_MOUNTAIN_BUSTER:{name:"cd_MOUNTAIN_BUSTER"},cd_SUMMON_LOCKOUT:{name:"cd_SUMMON_LOCKOUT"}}),q1=le()({AETHERFLOW:{name:"Aetherflow",label:{zh:""}},RUBY_ARCANUM:{name:"Ruby Arcanum",label:{zh:""}},TOPAZ_ARCANUM:{name:"Topaz Arcanum",label:{zh:""}},EMERALD_ARCANUM:{name:"Emerald Arcanum",label:{zh:""}},FIRE_ATTUNEMENT:{name:"Fire Attunement",label:{zh:""}},EARTH_ATTUNEMENT:{name:"Earth Attunement",label:{zh:""}},WIND_ATTUNEMENT:{name:"Wind Attunement",label:{zh:""}},ACTIVE_DEMI:{name:"Active Demi",label:{zh:""}}}),$R=le()({AETHERFLOW:{name:"Aetherflow",maximumStacks:2,label:{zh:""}},CRIMSON_STRIKE_READY:{name:"Crimson Strike Ready",label:{zh:""}},EVERLASTING_FLIGHT:{name:"Everlasting Flight",label:{zh:""}},FURTHER_RUIN:{name:"Further Ruin",label:{zh:""}},GARUDAS_FAVOR:{name:"Garuda's Favor",label:{zh:""}},IFRITS_FAVOR:{name:"Ifrit's Favor",label:{zh:""}},RADIANT_AEGIS:{name:"Radiant Aegis",label:{zh:""}},REFULGENT_LUX:{name:"Refulgent Lux",label:{zh:""}},REKINDLE:{name:"Rekindle",label:{zh:""}},RUBYS_GLIMMER:{name:"Ruby's Glimmer",label:{zh:""}},SEARING_LIGHT:{name:"Searing Light",label:{zh:""}},SLIPSTREAM:{name:"Slipstream",mayBeToggled:!0,label:{zh:""}},TITANS_FAVOR:{name:"Titan's Favor",label:{zh:""}},UNDYING_FLAME:{name:"Undying Flame",label:{zh:""}}}),Z1=le()({NEXT_DEMI_CYCLE:{name:"Next Demi Cycle",label:{zh:""}},DEMI_AUTO:{name:"Demi Auto-attack",label:{zh:""}}}),Q1=le()({RUIN_MASTERY_III:{name:"Ruin Mastery III",level:72},OUTBURST_MASTERY:{name:"Outburst Mastery",level:74},ENHANCED_SUMMON_BAHAMUT:{name:"Enhanced Summon Bahamut",level:80},OUTBURST_MASTERY_II:{name:"Outburst Mastery II",level:82},RUIN_MASTERY_IV:{name:"Ruin Mastery IV",level:84},ELEMENTAL_MASTERY:{name:"Elemental Mastery",level:86},ENHANCED_RADIANT_AEGIS:{name:"Enhanced Radiant Aegis",level:88},ENKINDLE_II:{name:"Enkindle II",level:90},ENHANCED_FESTER:{name:"Enhanced Fester",level:92},ARCANE_MASTERY:{name:"Arcane Mastery",level:94},ENHANCED_SEARING_LIGHT:{name:"Enhanced Searing Light",level:96},ENHANCED_SUMMON_BAHAMUT_II:{name:"Enhanced Summon Bahamut II",level:100}}),$1={...q1,...$R,...Z1},J1=le()({STEEL_FANGS:{id:34606,name:"Steel Fangs",label:{zh:"",ja:""}},HUNTERS_STING:{id:34608,name:"Hunter's Sting",label:{zh:"",ja:""}},REAVING_FANGS:{id:34607,name:"Reaving Fangs",label:{zh:"",ja:""}},WRITHING_SNAP:{id:34632,name:"Writhing Snap",label:{zh:"",ja:""}},SWIFTSKINS_STING:{id:34609,name:"Swiftskin's Sting",label:{zh:"",ja:""}},STEEL_MAW:{id:34614,name:"Steel Maw",label:{zh:"",ja:""}},FLANKSTING_STRIKE:{id:34610,name:"Flanksting Strike",label:{zh:"",ja:""}},FLANKSBANE_FANG:{id:34611,name:"Flanksbane Fang",label:{zh:"",ja:""}},HINDSTING_STRIKE:{id:34612,name:"Hindsting Strike",label:{zh:"",ja:""}},HINDSBANE_FANG:{id:34613,name:"Hindsbane Fang",label:{zh:"",ja:""}},REAVING_MAW:{id:34615,name:"Reaving Maw",label:{zh:"",ja:""}},SLITHER:{id:34646,name:"Slither",label:{zh:"",ja:""}},HUNTERS_BITE:{id:34616,name:"Hunter's Bite",label:{zh:"",ja:""}},SWIFTSKINS_BITE:{id:34617,name:"Swiftskin's Bite",label:{zh:"",ja:""}},JAGGED_MAW:{id:34618,name:"Jagged Maw",label:{zh:"",ja:""}},BLOODIED_MAW:{id:34619,name:"Bloodied Maw",label:{zh:"",ja:""}},SERPENTS_TAIL:{id:35920,name:"Serpent's Tail",label:{zh:"",ja:""}},DEATH_RATTLE:{id:34634,name:"Death Rattle",label:{zh:"",ja:""}},LAST_LASH:{id:34635,name:"Last Lash",label:{zh:"",ja:""}},VICEWINDER:{id:34620,name:"Vicewinder",label:{zh:"",ja:""}},HUNTERS_COIL:{id:34621,name:"Hunter's Coil",label:{zh:"",ja:""}},SWIFTSKINS_COIL:{id:34622,name:"Swiftskin's Coil",label:{zh:"",ja:""}},VICEPIT:{id:34623,name:"Vicepit",label:{zh:"",ja:""}},HUNTERS_DEN:{id:34624,name:"Hunter's Den",label:{zh:"",ja:""}},SWIFTSKINS_DEN:{id:34625,name:"Swiftskin's Den",label:{zh:"",ja:""}},TWINFANG:{id:35921,name:"Twinfang",label:{zh:"",ja:""}},TWINBLOOD:{id:35922,name:"Twinblood",label:{zh:"",ja:""}},TWINFANG_BITE:{id:34636,name:"Twinfang Bite",label:{zh:"",ja:""}},TWINBLOOD_BITE:{id:34637,name:"Twinblood Bite",label:{zh:"",ja:""}},TWINFANG_THRESH:{id:34638,name:"Twinfang Thresh",label:{zh:"",ja:""}},TWINBLOOD_THRESH:{id:34639,name:"Twinblood Thresh",label:{zh:"",ja:""}},UNCOILED_FURY:{id:34633,name:"Uncoiled Fury",label:{zh:"",ja:""}},SERPENTS_IRE:{id:34647,name:"Serpent's Ire",label:{zh:"",ja:""}},REAWAKEN:{id:34626,name:"Reawaken",label:{zh:"",ja:""}},FIRST_GENERATION:{id:34627,name:"First Generation",label:{zh:"",ja:""}},SECOND_GENERATION:{id:34628,name:"Second Generation",label:{zh:"",ja:""}},THIRD_GENERATION:{id:34629,name:"Third Generation",label:{zh:"",ja:""}},FOURTH_GENERATION:{id:34630,name:"Fourth Generation",label:{zh:"",ja:""}},UNCOILED_TWINFANG:{id:34644,name:"Uncoiled Twinfang",label:{zh:"",ja:""}},UNCOILED_TWINBLOOD:{id:34645,name:"Uncoiled Twinblood",label:{zh:"",ja:""}},OUROBOROS:{id:34631,name:"Ouroboros",label:{zh:"",ja:""}},FIRST_LEGACY:{id:34640,name:"First Legacy",label:{zh:"",ja:""}},SECOND_LEGACY:{id:34641,name:"Second Legacy",label:{zh:"",ja:""}},THIRD_LEGACY:{id:34642,name:"Third Legacy",label:{zh:"",ja:""}},FOURTH_LEGACY:{id:34643,name:"Fourth Legacy",label:{zh:"",ja:""}}}),ex=le()({cd_SERPENTS_IRE:{name:"cd_SerpentsIre"},cd_VICEWINDER:{name:"cd_Vicewinder"},cd_SLITHER:{name:"cd_Slither"},cd_SERPENTS_TAIL:{name:"cd_SerpentsTail"},cd_TWINFANG:{name:"cd_Twinfang"},cd_TWINBLOOD:{name:"cd_Twinblood"}}),tx=le()({RATTLING_COIL:{name:"Rattling Coil",label:{zh:""}},SERPENT_OFFERINGS:{name:"Serpent Offerings",label:{zh:""}},ANGUINE_TRIBUTE:{name:"Anguine Tribute",label:{zh:""}}}),JR=le()({HUNTERS_INSTINCT:{name:"Hunter's Instinct",label:{zh:""}},SWIFTSCALED:{name:"Swiftscaled",label:{zh:""}},HONED_STEEL:{name:"Honed Steel",label:{zh:""}},HONED_REAVERS:{name:"Honed Reavers",label:{zh:""}},FLANKSTUNG_VENOM:{name:"Flankstung Venom",label:{zh:""}},HINDSTUNG_VENOM:{name:"Hindstung Venom",label:{zh:""}},FLANKSBANE_VENOM:{name:"Flanksbane Venom",label:{zh:""}},HINDSBANE_VENOM:{name:"Hindsbane Venom",label:{zh:""}},GRIMSKINS_VENOM:{name:"Grimskin's Venom",label:{zh:""}},GRIMHUNTERS_VENOM:{name:"Grimhunter's Venom",label:{zh:""}},HUNTERS_VENOM:{name:"Hunter's Venom",label:{zh:""}},SWIFTSKINS_VENOM:{name:"Swiftskin's Venom",label:{zh:""}},POISED_FOR_TWINFANG:{name:"Poised for Twinfang",label:{zh:""}},POISED_FOR_TWINBLOOD:{name:"Poised for Twinblood",label:{zh:""}},FELLHUNTERS_VENOM:{name:"Fellhunter's Venom",label:{zh:""}},FELLSKINS_VENOM:{name:"Fellskin's Venom",label:{zh:""}},READY_TO_REAWAKEN:{name:"Ready to Reawaken",label:{zh:""}},REAWAKENED:{name:"Reawakened",label:{zh:""},mayNotBeCanceled:!0}}),nx=le()({VPR_COMBO:{name:"VPR Combo"},DEATH_RATTLE_READY:{name:"Death Rattle Ready"},VPR_AOE_COMBO:{name:"VPR AoE Combo"},LAST_LASH_READY:{name:"Last Lash Ready"},HUNTERS_COIL_READY:{name:"Hunter's Coil Ready"},SWIFTSKINS_COIL_READY:{name:"Swiftskin's Coil Ready"},COIL_OGCD_READY:{name:"Coil oGCD Ready"},HUNTERS_DEN_READY:{name:"Hunter's Den Ready"},SWIFTSKINS_DEN_READY:{name:"Swiftskin's Den Ready"},DEN_OGCD_READY:{name:"Den oGCD Ready"},UNCOILED_OGCD_READY:{name:"Uncoiled oGCD Ready"},REAWAKEN_COMBO:{name:"Reawaken Combo"},LEGACY_READY:{name:"Legacy Ready"}}),ax=le()({MELEE_MASTERY_VPR:{name:"Melee Mastery VPR",level:74},VIPERS_BITE:{name:"Viper's Bite",level:75},VIPERS_THRESH:{name:"Viper's Thresh",level:80},VIPERS_RATTLE:{name:"Viper's Rattle",level:82},ENHANCED_SLITHER:{name:"Enhanced Slither",level:84},MELEE_MASTERY_II_VPR:{name:"Melee Mastery II VPR",level:84},ENHANCED_VIPERS_RATTLE:{name:"Enhanced Viper's Rattle",level:88},SERPENTS_LINEAGE:{name:"Serpent's Lineage",level:90},UNCOILED_FANGS:{name:"Uncoiled Fangs",level:92},ENHANCED_SERPENTS_LINEAGE:{name:"Enhanced Serpent's Lineage",level:96},SERPENTS_LEGACY:{name:"Serpent's Legacy",level:100}}),ix={...tx,...JR,...nx},ox=le()({HEAVY_SWING:{id:31,name:"Heavy Swing",label:{zh:""}},MAIM:{id:37,name:"Maim",label:{zh:""}},STORMS_PATH:{id:42,name:"Storm's Path",label:{zh:""}},STORMS_EYE:{id:45,name:"Storm's Eye",label:{zh:""}},FELL_CLEAVE:{id:3549,name:"Fell Cleave",label:{zh:""}},UPHEAVAL:{id:7387,name:"Upheaval",label:{zh:""}},ONSLAUGHT:{id:7386,name:"Onslaught",label:{zh:""}},TOMAHAWK:{id:46,name:"Tomahawk",label:{zh:""}},OVERPOWER:{id:41,name:"Overpower",label:{zh:""}},MYTHRIL_TEMPEST:{id:16462,name:"Mythril Tempest",label:{zh:""}},DECIMATE:{id:3550,name:"Decimate",label:{zh:""}},OROGENY:{id:25752,name:"Orogeny",label:{zh:""}},INNER_RELEASE:{id:7389,name:"Inner Release",label:{zh:""}},PRIMAL_WRATH:{id:36924,name:"Primal Wrath",label:{zh:""}},PRIMAL_REND:{id:25753,name:"Primal Rend",label:{zh:""}},PRIMAL_RUINATION:{id:36925,name:"Primal Ruination",label:{zh:""}},INFURIATE:{id:52,name:"Infuriate",label:{zh:""}},INNER_CHAOS:{id:16465,name:"Inner Chaos",label:{zh:""}},CHAOTIC_CYCLONE:{id:16463,name:"Chaotic Cyclone",label:{zh:""}},THRILL_OF_BATTLE:{id:40,name:"Thrill of Battle",label:{zh:""}},EQUILIBRIUM:{id:3552,name:"Equilibrium",label:{zh:""}},SHAKE_IT_OFF:{id:7388,name:"Shake It Off",label:{zh:""}},RAW_INTUITION:{id:3551,name:"Raw Intuition",label:{zh:""}},NASCENT_FLASH:{id:16464,name:"Nascent Flash",label:{zh:""}},BLOODWHETTING:{id:25751,name:"Bloodwhetting",label:{zh:""}},VENGEANCE:{id:44,name:"Vengeance",label:{zh:""}},DAMNATION:{id:36923,name:"Damnation",label:{zh:""}},HOLMGANG:{id:43,name:"Holmgang",label:{zh:""}},DEFIANCE:{id:48,name:"Defiance",label:{zh:""}},RELEASE_DEFIANCE:{id:32066,name:"Release Defiance",label:{zh:""}}}),lx=le()({cd_INNER_RELEASE:{name:"cd_InnerRelease"},cd_PRIMAL_WRATH:{name:"cd_PrimalWrath"},cd_UPHEAVAL:{name:"cd_Upheaval"},cd_ONSLAUGHT:{name:"cd_Onslaught"},cd_INFURIATE:{name:"cd_Infuriate"},cd_VENGEANCE:{name:"cd_Vengeance"},cd_THRILL_OF_BATTLE:{name:"cd_ThrillOfBattle"},cd_RAW_INTUITION:{name:"cd_RawIntuition"},cd_EQUILIBRIUM:{name:"cd_Equilibrium"},cd_SHAKE_IT_OFF:{name:"cd_ShakeItOff"},cd_HOLMGANG:{name:"cd_Holmgang"},cd_DEFIANCE:{name:"cd_Defiance"},cd_RELEASE_DEFIANCE:{name:"cd_ReleaseDefiance"}}),sx=le()({BEAST_GAUGE:{name:"Beast Gauge",label:{zh:""}}}),eT=le()({SURGING_TEMPEST:{name:"Surging Tempest",label:{zh:"buff"}},INNER_RELEASE:{name:"Inner Release",label:{zh:"buff"},maximumStacks:3},INNER_STRENGTH:{name:"Inner Strength",label:{zh:"buff"}},BURGEONING_FURY:{name:"Burgeoning Fury",label:{zh:"buff"},maximumStacks:3},WRATHFUL:{name:"Wrathful",label:{zh:""}},PRIMAL_REND_READY:{name:"Primal Rend Ready",label:{zh:""}},PRIMAL_RUINATION_READY:{name:"Primal Ruination Ready",label:{zh:""}},NASCENT_CHAOS:{name:"Nascent Chaos",label:{zh:"buff"}},NASCENT_FLASH:{name:"Nascent Flash",label:{zh:"buff"}},THRILL_OF_BATTLE:{name:"Thrill of Battle",label:{zh:""}},EQUILIBRIUM:{name:"Equilibrium",label:{zh:"hot"}},SHAKE_IT_OFF:{name:"Shake It Off",label:{zh:""}},SHAKE_IT_OFF_OVER_TIME:{name:"Shake It Off Over Time",label:{zh:"hot"}},RAW_INTUITION:{name:"Raw Intuition",label:{zh:"buff"}},STEM_THE_TIDE:{name:"Stem the Tide",label:{zh:"buff"}},STEM_THE_FLOW:{name:"Stem the Flow",label:{zh:"buff"}},BLOODWHETTING:{name:"Bloodwhetting",label:{zh:"buff"}},VENGEANCE:{name:"Vengeance",label:{zh:"30"}},DAMNATION:{name:"Damnation",label:{zh:"40"}},PRIMEVAL_IMPULSE:{name:"Primeval Impulse",label:{zh:"hot"}},HOLMGANG:{name:"Holmgang",label:{zh:"buff"}},DEFIANCE:{name:"Defiance",label:{zh:"buff"},mayNotBeCanceled:!0}}),rx=le()({STORM_COMBO:{name:"Storm Combo",label:{zh:""}},TEMPEST_COMBO:{name:"Tempest Combo",label:{zh:"aoe"}}}),cx=le()({NASCENT_CHAOS:{name:"Nascent Chaos",level:72},MASTERING_THE_BEAST:{name:"Mastering the Beast",level:74},ENHANCED_SHAKE_IT_OFF:{name:"Enhanced Shake It Off",level:76},ENHANCED_THRILL_OF_BATTLE:{name:"Enhanced Thrill of Battle",level:78},RAW_INTUITION_MASTERY:{name:"Raw Intuition Mastery",level:82},ENHANCED_NASCENT_FLASH:{name:"Enhanced Nascent Flash",level:82},ENHANCED_EQUILIBRIUM:{name:"Enhanced Equilibrium",level:84},ENHANCED_ONSLAUGHT:{name:"Enhanced Onslaught",level:88},VENGEANCE_MASTERY:{name:"Vengeance Mastery",level:92},ENHANCED_INNER_RELEASE:{name:"Enhanced Inner Release",level:96},ENHANCED_PRIMAL_REND:{name:"Enhanced Primal Rend",level:100}}),ux={...sx,...eT,...rx},dx=le()({CURE:{id:120,name:"Cure",label:{zh:"",ja:""}},MEDICA:{id:124,name:"Medica",label:{zh:"",ja:""}},RAISE:{id:125,name:"Raise",label:{zh:"",ja:""}},CURE_II:{id:135,name:"Cure II",label:{zh:"",ja:""}},PRESENCE_OF_MIND:{id:136,name:"Presence of Mind",label:{zh:"",ja:""}},REGEN:{id:137,name:"Regen",label:{zh:"",ja:""}},CURE_III:{id:131,name:"Cure III",label:{zh:"",ja:""}},AETHERIAL_SHIFT:{id:37008,name:"Aetherial Shift",label:{zh:"",ja:""}},HOLY:{id:139,name:"Holy",label:{zh:"",ja:""}},AERO_II:{id:132,name:"Aero II",label:{zh:"",ja:""}},MEDICA_II:{id:133,name:"Medica II",label:{zh:"",ja:""}},BENEDICTION:{id:140,name:"Benediction",label:{zh:"",ja:""}},AFFLATUS_SOLACE:{id:16531,name:"Afflatus Solace",label:{zh:"",ja:""}},ASYLUM:{id:3569,name:"Asylum",label:{zh:"",ja:""}},ASSIZE:{id:3571,name:"Assize",label:{zh:"",ja:""}},THIN_AIR:{id:7430,name:"Thin Air",label:{zh:"",ja:""}},TETRAGRAMMATON:{id:3570,name:"Tetragrammaton",label:{zh:"",ja:""}},STONE_IV:{id:7431,name:"Stone IV",label:{zh:"",ja:""}},DIVINE_BENISON:{id:7432,name:"Divine Benison",label:{zh:"",ja:""}},PLENARY_INDULGENCE:{id:7433,name:"Plenary Indulgence",label:{zh:"",ja:""}},DIA:{id:16532,name:"Dia",label:{zh:"",ja:""}},GLARE:{id:16533,name:"Glare",label:{zh:"",ja:""}},AFFLATUS_MISERY:{id:16535,name:"Afflatus Misery",label:{zh:"",ja:""}},AFFLATUS_RAPTURE:{id:16534,name:"Afflatus Rapture",label:{zh:"",ja:""}},TEMPERANCE:{id:16536,name:"Temperance",label:{zh:"",ja:""}},GLARE_III:{id:25859,name:"Glare III",label:{zh:"",ja:""}},HOLY_III:{id:25860,name:"Holy III",label:{zh:"",ja:""}},AQUAVEIL:{id:25861,name:"Aquaveil",label:{zh:"",ja:""}},LITURGY_OF_THE_BELL:{id:25862,name:"Liturgy of the Bell",label:{zh:"",ja:""}},LITURGY_POP:{name:"Pop Liturgy of the Bell",label:{zh:""}},LITURGY_TRIGGER:{name:"Trigger Liturgy of the Bell",label:{zh:""}},GLARE_IV:{id:37009,name:"Glare IV",label:{zh:"",ja:""}},MEDICA_III:{id:37010,name:"Medica III",label:{zh:"",ja:""}},DIVINE_CARESS:{id:37011,name:"Divine Caress",label:{zh:"",ja:""}}}),hx=le()({cd_PRESENCE_OF_MIND:{name:"cd_PresenceOfMind"},cd_AETHERIAL_SHIFT:{name:"cd_AetherialShift"},cd_BENEDICTION:{name:"cd_Benediction"},cd_ASYLUM:{name:"cd_Asylum"},cd_ASSIZE:{name:"cd_Assize"},cd_THIN_AIR:{name:"cd_ThinAir"},cd_TETRAGRAMMATON:{name:"cd_Tetragrammaton"},cd_DIVINE_BENISON:{name:"cd_DivineBenison"},cd_PLENARY_INDULGENCE:{name:"cd_PlenaryIndulgence"},cd_TEMPERANCE:{name:"cd_Temperance"},cd_AQUAVEIL:{name:"cd_Aquaveil"},cd_LITURGY_OF_THE_BELL:{name:"cd_LiturgyOfTheBell"},cd_LITURGY_POP:{name:"cd_LiturgyPop"},cd_LITURGY_TRIGGER:{name:"cd_LiturgyTrigger"},cd_DIVINE_CARESS:{name:"cd_DivineCaress"}}),fx=le()({LILLIES:{name:"Lillies",maximumCharges:3,label:{zh:""}},LILY_TIMER:{name:"Lily Timer",label:{zh:""}},BLOOD_LILY:{name:"Blood Lily",maximumCharges:3,label:{zh:""}}}),tT=le()({FREECURE:{name:"Freecure",label:{zh:""}},PRESENCE_OF_MIND:{name:"Presence of Mind",label:{zh:""}},SACRED_SIGHT:{name:"Sacred Sight",maximumStacks:3,label:{zh:""}},REGEN:{name:"Regen",label:{zh:""}},AERO_II:{name:"Aero II",label:{zh:""}},MEDICA_II:{name:"Medica II",label:{zh:""}},ASYLUM:{name:"Asylum",mayBeToggled:!0,label:{zh:""}},THIN_AIR:{name:"Thin Air",label:{zh:""}},DIVINE_BENISON:{name:"Divine Benison",label:{zh:""}},CONFESSION:{name:"Confession",label:{zh:""}},DIA:{name:"Dia",label:{zh:""}},TEMPERANCE:{name:"Temperance",label:{zh:""}},DIVINE_GRACE:{name:"Divine Grace",label:{zh:""}},AQUAVEIL:{name:"Aquaveil",label:{zh:""}},LITURGY_OF_THE_BELL:{name:"Liturgy of the Bell",maximumStacks:5,mayNotBeCanceled:!0,label:{zh:""}},MEDICA_III:{name:"Medica III",label:{zh:""}},DIVINE_CARESS:{name:"Divine Caress",label:{zh:""}},DIVINE_AURA:{name:"Divine Aura",label:{zh:""}}}),Ex=le()({}),mx=le()({AERO_MASTERY_II:{name:"Aero Mastery II",level:72},STONE_MASTERY_IV:{name:"Stone Mastery IV",level:72},TRANSCENDENT_AFFLATUS:{name:"Transcendent Afflatus",level:74},ENHANCED_ASYLUM:{name:"Enhanced Asylum",level:78},GLARE_MASTERY:{name:"Glare Mastery",level:82},HOLY_MASTERY:{name:"Holy Mastery",level:82},ENHANCED_DIVINE_BENISON:{name:"Enhanced Divine Benison",level:88},ENHANCED_PRESENCE_OF_MIND:{name:"Enhanced Presence of Mind",level:92},WHITE_MAGIC_MASTERY:{name:"White Magic Mastery",level:94},MEDICA_MASTERY:{name:"Medica Mastery",level:96},ENHANCED_TETRAGRAMMATON:{name:"Enhanced Tetragrammaton",level:98},ENHANCED_TEMPERANCE:{name:"Enhanced Temperance",level:100}}),Ax={...fx,...tT,...Ex},Rx=le()({WATER_CANNON:{name:"Water Cannon",label:{zh:"(2200)"},id:11385},SONIC_BOOM:{name:"Sonic Boom",label:{zh:"(1210)"},id:18308},SHARPENED_KNIFE:{name:"Sharpened Knife",label:{zh:"(1220)"},id:11400},HYDRO_PULL:{name:"Hydro Pull",label:{zh:"(2220)"},id:23282},MOON_FLUTE:{name:"Moon Flute",label:{zh:""},id:11415},DIAMONDBACK:{name:"Diamondback",label:{zh:""},id:11424},SONG_OF_TORMENT:{name:"Song of Torment",label:{zh:""},id:11386},WHISTLE:{name:"Whistle",label:{zh:""},id:18309},BRISTLE:{name:"Bristle",label:{zh:""},id:11393},TINGLE:{name:"Tingle",label:{zh:""},id:23265},FINAL_STING:{name:"Final Sting",label:{zh:""},id:11407},COLD_FOG:{name:"Cold Fog",label:{zh:""},id:23267},WHITE_DEATH:{name:"White Death",label:{zh:""},id:23268},POP_COLD_FOG:{name:"Pop Cold Fog",label:{zh:""}},PHANTOM_FLURRY:{name:"Phantom Flurry",label:{zh:""},id:23288},END_PHANTOM_FLURRY:{name:"End Phantom Flurry",label:{zh:""},id:23289},MATRA_MAGIC:{name:"Matra Magic",label:{zh:""},id:23285},WINGED_REPROBATION:{name:"Winged Reprobation",label:{zh:""},id:34576},CONVICTION_MARCATO:{name:"Conviction Marcato",label:{zh:""},id:34574},REVENGE_BLAST:{name:"Revenge Blast",label:{zh:""},id:18316},WILD_RAGE:{name:"Wild Rage",label:{zh:""},id:34568},GOBLIN_PUNCH:{name:"Goblin Punch",label:{zh:""},id:34563},THE_ROSE_OF_DESTRUCTION:{name:"The Rose of Destruction",label:{zh:""},id:23275},ERUPTION:{name:"Eruption",label:{zh:""},id:11427},FEATHER_RAIN:{name:"Feather Rain",label:{zh:""},id:11426},MOUNTAIN_BUSTER:{name:"Mountain Buster",label:{zh:""},id:11428},SHOCK_STRIKE:{name:"Shock Strike",label:{zh:""},id:11429},GLASS_DANCE:{name:"Glass Dance",label:{zh:""},id:11430},QUASAR:{name:"Quasar",label:{zh:""},id:18324},J_KICK:{name:"J Kick",label:{zh:""},id:18325},TRIPLE_TRIDENT:{name:"Triple Trident",label:{zh:""},id:23264},BOTH_ENDS:{name:"Both Ends",label:{zh:""},id:23287},NIGHTBLOOM:{name:"Nightbloom",label:{zh:""},id:23290},SEA_SHANTY:{name:"Sea Shanty",label:{zh:""},id:34580},APOKALYPSIS:{name:"Apokalypsis",label:{zh:""},id:34581},BEING_MORTAL:{name:"Being Mortal",label:{zh:""},id:34582},BREATH_OF_MAGIC:{name:"Breath of Magic",label:{zh:""},id:34567},MORTAL_FLAME:{name:"Mortal Flame",label:{zh:""},id:34579},SURPANAKHA:{name:"Surpanakha",label:{zh:""},id:18323}}),Tx=le()({cd_ERUPTION:{name:"cd_Eruption",label:{zh:"CD: /"}},cd_SHOCK_STRIKE:{name:"cd_Shock_Strike",label:{zh:"CD: /"}},cd_GLASS_DANCE:{name:"cd_Glass_Dance",label:{zh:"CD: "}},cd_SURPANAKHA:{name:"cd_Surpanakha",label:{zh:"CD: "}},cd_QUASAR:{name:"cd_Quasar",label:{zh:"CD: /"}},cd_NIGHTBLOOM:{name:"cd_Nightbloom",label:{zh:"CD: /"}},cd_SEA_SHANTY:{name:"cd_Sea_Shanty",label:{zh:"CD: "}},cd_BEING_MORTAL:{name:"cd_Being_Mortal",label:{zh:"CD: /"}},cd_COLD_FOG:{name:"cd_Cold_Fog",label:{zh:"CD: "}},cd_TRIPLE_TRIDENT:{name:"cd_Triple_Trident",label:{zh:"CD: "}},cd_PHANTOM_FLURRY:{name:"cd_Phantom_Flurry",label:{zh:"CD: "}},cd_COLD_FOG_POP:{name:"cd_Cold_Fog_Pop",label:{zh:"CD: "}},cd_MATRA_MAGIC:{name:"cd_Matra_Magic",label:{zh:"CD: "}},cd_WINGED_REPROBATION:{name:"cd_Winged_Reprobation",label:{zh:"CD: "}},cd_THE_ROSE_OF_DESTRUCTION:{name:"cd_The_Rose_of_Destruction",label:{zh:"CD: "}},cd_SURPANAKHA_LOCKOUT:{name:"cd_SurpanakhaLockout",label:{zh:"CD: "}}}),Sx=le()({}),nT=le()({NIGHTBLOOM:{name:"Bleeding",label:{zh:""}},SONG_OF_TORMENT:{name:"Bleeding",label:{zh:""}},FEATHER_RAIN:{name:"Feather Rain",label:{zh:""}},WAXING_NOCTURNE:{name:"Waxing Nocturne",label:{zh:""}},WANING_NOCTURNE:{name:"Waning Nocturne",label:{zh:""}},WHISTLE:{name:"Whistle",label:{zh:""}},BRISTLE:{name:"Bristle",label:{zh:""}},TINGLE:{name:"Tingle",label:{zh:""}},COLD_FOG:{name:"Cold Fog",label:{zh:""}},TOUCH_OF_FROST:{name:"Touch of Frost",label:{zh:""}},PHANTOM_FLURRY:{name:"Phantom Flurry",label:{zh:""}},DIAMONDBACK:{name:"Diamondback",label:{zh:""}},APOKALYPSIS:{name:"Apokalypsis",label:{zh:""}},WINGED_REDEMPTION:{name:"Winged Redemption",label:{zh:""}},BREATH_OF_MAGIC:{name:"Breath of Magic",label:{zh:""}},MORTAL_FLAME:{name:"Mortal Flame",label:{zh:""}},WINGED_REPROBATION:{name:"Winged Reprobation",label:{zh:""},maximumStacks:4},SURPANAKHAS_FURY:{name:"Surpanakha's Fury",label:{zh:""},maximumStacks:4},BRUSH_WITH_DEATH:{name:"Brush with Death",label:{zh:""}}}),gx=le()({SURPANAKHA_LOCKOUT:{name:"Supranakha Lockout",label:{zh:""}}}),Ix=le()({}),_x={...Sx,...nT,...gx},px=le()({NEVER:{name:"NEVER"},TINCTURE:{name:"Tincture",label:{zh:"",ja:""}},SPRINT:{id:3,name:"Sprint",label:{zh:"",ja:""}}}),Nx=le()({NEVER:{name:"Never"},cd_GCD:{name:"cd_GCD",label:{zh:"GCD"}},cd_TINCTURE:{name:"cd_Tincture"},cd_SPRINT:{name:"cd_Sprint"}}),Cx=le()({MANA:{name:"Mana",label:{zh:"MP"}}}),bx=le()({TINCTURE:{name:"Tincture",label:{zh:""}},SPRINT:{name:"Sprint",label:{zh:""}}}),Ox=le()({MOVEMENT:{name:"Movement"},NOT_ANIMATION_LOCKED:{name:"NotAnimationLocked"},NOT_CASTER_TAXED:{name:"NotCasterTaxed"},IN_COMBAT:{name:"InCombat",label:{zh:""}},AUTOS_ENGAGED:{name:"Autos Engaged"},STORED_AUTO:{name:"Stored Auto"},PARTY_SIZE:{name:"PartySize",label:{zh:""}},NEVER:{name:"Never"}}),Dx=le()({NEVER:{name:"Never",level:1}}),yx={...Cx,...bx,...Ox},vx=le()({LAST_BASTION:{id:199,name:"Last Bastion",label:{zh:""}},LAND_WAKER:{id:4240,name:"Land Waker",label:{zh:""}},DARK_FORCE:{id:4241,name:"Dark Force",label:{zh:""}},GUNMETAL_SOUL:{id:17105,name:"Gunmetal Soul",label:{zh:""}}}),Mx=le()({PULSE_OF_LIFE:{id:208,name:"Pulse of Life"},ANGEL_FEATHERS:{id:4247,name:"Angel Feathers"},ASTRAL_STASIS:{id:4248,name:"Astral Stasis"},TECHNE_MAKRE:{id:24859,name:"Techne Makre"}}),Lx=le()({FINAL_HEAVEN:{id:202,name:"Final Heaven"},DRAGONSONG_DIVE:{id:4242,name:"Dragonsong Dive"},CHIMATSURI:{id:4243,name:"Chimatsuri"},DOOM_OF_THE_LIVING:{id:7861,name:"Doom of the Living"},THE_END:{id:24858,name:"The End"},WORLD_SWALLOWER:{id:34866,name:"World-swallower"}}),xx=le()({SAGITTARIUS_ARROW:{id:4244,name:"Sagittarius Arrow"},SATELLITE_BEAM:{id:4245,name:"Satellite Beam"},CRIMSON_LOTUS:{id:17106,name:"Crimson Lotus"}}),Hx=le()({METEOR:{id:205,name:"Meteor"},TERAFLARE:{id:3009,name:"Teraflare"},VERMILLION_SCOURGE:{id:7862,name:"Vermillion Scourge"},CHROMATIC_FANTASY:{id:34867,name:"Chromatic Fantasy"}}),kx=le()({LAST_BASTION:{name:"Last Bastion",label:{zh:"LB3 buff"}},LAND_WAKER:{name:"Land Waker",label:{zh:"LB3 buff"}},DARK_FORCE:{name:"Dark Force",label:{zh:"LB3 buff"}},GUNMETAL_SOUL:{name:"Gunmetal Soul",label:{zh:"LB3 buff"}}}),Ux=le()({cd_LIMIT_BREAK_1:{name:"cd_LIMIT_BREAK_1",label:{zh:"CDLB"}},cd_LIMIT_BREAK_2:{name:"cd_LIMIT_BREAK_2",label:{zh:"CDLB"}},cd_LIMIT_BREAK_3:{name:"cd_LIMIT_BREAK_3",label:{zh:"CDLB"}}}),Px=le()({UNKNOWN:{name:"Unknown"},SHIELD_WALL:{id:197,name:"Shield Wall"},STRONGHOLD:{id:198,name:"Stronghold"},HEALING_WIND:{id:206,name:"Healing Wind"},BREATH_OF_THE_EARTH:{id:207,name:"Breath of the Earth"},BRAVER:{id:200,name:"Braver"},BLADEDANCE:{id:201,name:"Bladedance"},BIGSHOT:{id:4238,name:"Big Shot"},DESPERADO:{id:4239,name:"Desperado"},SKYSHARD:{id:203,name:"Skyshard"},STARSTORM:{id:204,name:"Starstorm"}}),JN=le()({UNKNOWN:{name:"Unknown"},SHIELD_WALL:{name:"Shield Wall",label:{zh:"LB1 buff"}},STRONGHOLD:{name:"Stronghold",label:{zh:"LB2 buff"}}}),wx={...vx,...Mx,...Lx,...xx,...Hx},Do={...Px,...wx},eC={...JN,...kx},Gx=le()({ARMS_LENGTH:{id:7548,name:"Arm's Length",label:{zh:""}},SECOND_WIND:{id:7541,name:"Second Wind",label:{zh:""}},HEAD_GRAZE:{id:7551,name:"Head Graze",label:{zh:""}},ESUNA:{id:7568,name:"Esuna",label:{zh:""}},RESCUE:{id:7571,name:"Rescue",label:{zh:""}},ADDLE:{id:7560,name:"Addle",label:{zh:"",ja:""},discordEmote:"Addle"},SWIFTCAST:{id:7561,name:"Swiftcast",label:{zh:"",ja:""}},LUCID_DREAMING:{id:7562,name:"Lucid Dreaming",label:{zh:"",ja:""},discordEmote:"Lucid"},SURECAST:{id:7559,name:"Surecast",label:{zh:"",ja:""},discordEmote:"Surecast"},FEINT:{id:7549,name:"Feint",label:{zh:""}},BLOODBATH:{id:7542,name:"Bloodbath",label:{zh:""}},TRUE_NORTH:{id:7546,name:"True North",label:{zh:""}},LEG_SWEEP:{id:7863,name:"Leg Sweep",label:{zh:""}},RAMPART:{id:7531,name:"Rampart",label:{zh:""}},REPRISAL:{id:7535,name:"Reprisal",label:{zh:""}},LOW_BLOW:{id:7540,name:"Low Blow",label:{zh:""}},INTERJECT:{id:7538,name:"Interject",label:{zh:""}},PROVOKE:{id:7533,name:"Provoke",label:{zh:""}},SHIRK:{id:7537,name:"Shirk",label:{zh:""}}}),Bx=le()({cd_ADDLE:{name:"cd_Addle"},cd_SWIFTCAST:{name:"cd_Swiftcast"},cd_LUCID_DREAMING:{name:"cd_LucidDreaming"},cd_SURECAST:{name:"cd_Surecast"},cd_SECOND_WIND:{name:"cd_SecondWind"},cd_ARMS_LENGTH:{name:"cd_ArmsLength"},cd_RESCUE:{name:"cd_Rescue"},cd_FEINT:{name:"cd_Feint"},cd_TRUE_NORTH:{name:"cd_TrueNorth"},cd_BLOODBATH:{name:"cd_Bloodbath"},cd_LEG_SWEEP:{name:"cd_LegSweep"},cd_RAMPART:{name:"cd_Rampart"},cd_REPRISAL:{name:"cd_Reprisal"},cd_LOW_BLOW:{name:"cd_LowBlow"},cd_INTERJECT:{name:"cd_Interject"},cd_PROVOKE:{name:"cd_Provoke"},cd_SHIRK:{name:"cd_Shirk"},cd_HEAD_GRAZE:{name:"cd_HeadGraze"}}),Fx=le()({ADDLE:{name:"Addle",label:{zh:""}},SWIFTCAST:{name:"Swiftcast",label:{zh:""}},LUCID_DREAMING:{name:"Lucid Dreaming",label:{zh:""}},SURECAST:{name:"Surecast",label:{zh:""}},ARMS_LENGTH:{name:"Arms Length",label:{zh:""}},FEINT:{name:"Feint",label:{zh:""}},TRUE_NORTH:{name:"True North",label:{zh:""}},BLOODBATH:{name:"Bloodbath",label:{zh:""}},RAMPART:{name:"Rampart",label:{zh:"buff"}},REPRISAL:{name:"Reprisal",label:{zh:"buff"}}}),jx=le()({REAR_POSITIONAL:{name:"Rear Positional",label:{zh:""},mayBeToggled:!0},FLANK_POSITIONAL:{name:"Flank Positional",label:{zh:""},mayBeToggled:!0},AUTOS_ENGAGED:{name:"Autos Engaged",mayBeToggled:!0}}),zx=le()({ENHANCED_SWIFTCAST:{name:"Enhanced Swiftcast",level:94},ENHANCED_ADDLE:{name:"Enhanced Addle",level:98},ENHANCED_HEALING_MAGIC:{name:"Enhanced Healing Magic",level:85},MAGICK_MASTERY_HEALER:{name:"Magick Mastery",level:94},ENHANCED_SECOND_WIND:{name:"Enhanced Second Wind",level:94},ENHANCED_FEINT:{name:"Enhanced Feint",level:98},MELEE_MASTERY_TANK:{name:"Melee Mastery",level:84},ENHANCED_RAMPART:{name:"Enhanced Rampart",level:94},MELEE_MASTERY_II_TANK:{name:"Melee Mastery II",level:94},ENHANCED_REPRISAL:{name:"Enhanced Reprisal",level:98}}),tC={...Fx,...jx},_n={...px,...Gx,...Do,...f1,...ox,...LL,...wL,...dx,...ZR,...nL,...j1,...ZL,...bL,...t1,...M1,...C1,...J1,...EL,...YL,...gL,...rL,...$N,...S1,...s1,...Rx},ns={...Nx,...Bx,...Ux,...E1,...lx,...xL,...GL,...hx,...P1,...aL,...z1,...QL,...OL,...n1,...L1,...b1,...ex,...mL,...KL,...IL,...cL,...X1,...g1,...r1,...Tx},Ge={...yx,...tC,...eC,...T1,...ux,...PL,...zL,...Ax,...F1,...sL,...W1,...ZN,...ML,...l1,...U1,...v1,...ix,...SL,...qL,...CL,...fL,...$1,...N1,...h1,..._x},gA={...Dx,...zx,...R1,...cx,...UL,...jL,...mx,...B1,...lL,...V1,...e1,...vL,...o1,...k1,...y1,...ax,...TL,...XL,...NL,...hL,...Q1,...p1,...d1,...Ix},Tn={epsilon:1e-6};var $e=(e=>(e[e.lvl70=70]="lvl70",e[e.lvl80=80]="lvl80",e[e.lvl90=90]="lvl90",e[e.lvl100=100]="lvl100",e))($e||{});const Yx=.1;var Ie=(e=>(e.Fire="Fire",e.Ice="Ice",e.Lightning="Lightning",e.Wind="Wind",e.Earth="Earth",e.Physical="Physical",e.Other="Other",e))(Ie||{}),ua=(e=>(e.RNG="RNG",e.Never="Never",e.Always="Always",e))(ua||{}),Et=(e=>(e.Blocked="blocked by CD, animation lock or caster tax",e.SecondaryBlocked="blocked by secondary CD",e.NotEnoughMP="not enough MP",e.NotInCombat="not in combat (must wait for first damage application)",e.RequirementsNotMet="skill requirements not satisfied",e.SkillNotUnlocked="skill not unlocked at provided level",e.BuffNoLongerAvailable="buff no longer available",e.PastTargetTime="jump target time has already passed",e.CastCanceled="cast canceled (skill requirements no longer met at confirmation time)",e.UnknownSkill="unknown skill",e))(Et||{});function du(){return{unavailableReasons:[],ready:function(){return this.unavailableReasons.length===0},toString:function(){return this.ready()?"ready":this.unavailableReasons.join("; ")},addUnavailableReason:function(e){this.unavailableReasons.includes(e)||this.unavailableReasons.push(e)},clone:function(){const e=du();return this.unavailableReasons.forEach(t=>e.addUnavailableReason(t)),e}}}var H=(e=>(e.LeyLines="Ley Lines",e.Hyperphantasia="Hyperphantasia",e.Acceleration="Acceleration",e.Fuka="Fuka",e.Fugetsu="Fugetsu",e.EnhancedEnpi="Enhanced Enpi",e.NoMercy="No Mercy",e.PowerSurge="Power Surge",e.LanceCharge="Lance Charge",e.LifeOfTheDragon="Life Of The Dragon",e.EnhancedPiercingTalon="Enhanced Piercing Talon",e.LifeSurge="Life Surge",e.DivineMight="Divine Might",e.Requiescat="Requiescat",e.FightOrFlight="Fight Or Flight",e.Tincture="Tincture",e.ArcaneCircle="Arcane Circle",e.ArmysPaeon="Army's Paeon",e.BattleLitany="Battle Litany",e.BattleVoice="Battle Voice",e.Brotherhood="Brotherhood",e.Card_TheBalance="Card - The Balance",e.Card_TheSpear="Card - The Spear",e.ChainStratagem="Chain Stratagem",e.Devilment="Devilment",e.Divination="Divination",e.Dokumori="Dokumori",e.Embolden="Embolden",e.MagesBallad="Mage's Ballad",e.RadiantFinale1="Radiant Finale (1)",e.RadiantFinale2="Radiant Finale (2)",e.RadiantFinale3="Radiant Finale (3)",e.Barrage="Barrage",e.SearingLight="Searing Light",e.StandardFinish="Standard Finish",e.StarryMuse="Starry Muse",e.TechnicalFinish="Technical Finish",e.WanderersMinuet="The Wanderer's Minuet",e.RagingStrikes="Raging Strikes",e.DeathsDesign="Death's Design",e.Zoe="Zoe",e.Autophysis="Autophysis",e.Krasis="Krasis",e.Philosophia="Philosophia",e.Soteria="Soteria",e.WaxingNocturne="Waxing Nocturne",e.Whistle="Whistle",e.Bristle="Bristle",e.TingleA="TingleA",e.TingleB="TingleB",e.TrickAttack="Trick Attack",e.KunaisBane="Kunai's Bane",e.Bunshin="Bunshin",e.RiddleOfFire="Riddle of Fire",e.TheArrow="The Arrow",e.NeutralSect="Neutral Sect",e.Synastry="Synastry",e.Confession="Confession",e.Asylum="Asylum",e.Temperance="Temperance",e.HuntersInstinct="Hunter's Instinct",e.Swiftscaled="Swiftscaled",e.FeyIllumination="Fey Illumination",e.Dissipation="Dissipation",e.Protraction="Protraction",e.Recitation="Recitation",e))(H||{});function Kx(e){return Ai({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93 6h-2.95a15.65 15.65 0 0 0-1.38-3.56A8.03 8.03 0 0 1 18.92 8zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56A7.987 7.987 0 0 1 5.08 16zm2.95-8H5.08a7.987 7.987 0 0 1 4.33-3.56A15.65 15.65 0 0 0 8.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2zm.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95a8.03 8.03 0 0 1-4.33 3.56zM16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.38z"},child:[]}]})(e)}function Vx(e){return Ai({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 3a9 9 0 1 0 9 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 0 1-4.4 2.26 5.403 5.403 0 0 1-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"},child:[]}]})(e)}function Wx(e){return Ai({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58a.996.996 0 0 0-1.41 0 .996.996 0 0 0 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37a.996.996 0 0 0-1.41 0 .996.996 0 0 0 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0a.996.996 0 0 0 0-1.41l-1.06-1.06zm1.06-10.96a.996.996 0 0 0 0-1.41.996.996 0 0 0-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36a.996.996 0 0 0 0-1.41.996.996 0 0 0-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z"},child:[]}]})(e)}function IA(e,t){const a=Math.pow(10,t);return Math.floor(e*a)/a}class ut{static getMainstatBase(t){switch(t){case $e.lvl70:return 292;case $e.lvl80:return 340;case $e.lvl90:return 390;case $e.lvl100:return 440}}static getSubstatBase(t){switch(t){case $e.lvl70:return 364;case $e.lvl80:return 380;case $e.lvl90:return 400;case $e.lvl100:return 420}}static getStatDiv(t){switch(t){case $e.lvl70:return 900;case $e.lvl80:return 1300;case $e.lvl90:return 1900;case $e.lvl100:return 2780}}static calculateDamage(t,a,o,s,c,d,f){let h=c;const m=d>=1?d:d<0?0:ut.criticalHitRate(t,a)+d,R=f>=1?f:f<0?0:ut.#t(t,o)+f;if(m===0&&R===0)return h;const T=ut.#e(t,a),S=1.25,g=m>=1&&R>=1,_=m>1?IA(1+(T-1)*(d-1),3):1,p=R>1?IA(1+(S-1)*(f-1),3):1,O=m>1?1:m,y=R>1?1:R;g?h*=IA(ut.#a(t,s)+ut.#n(t,o),3):h*=ut.#a(t,s);const L=h*_*T,P=h*p*S,D=L*p*S,k=O*y,G=1-O-y+k;return h*G+L*(O-k)+P*(y-k)+D*k}static criticalHitRate(t,a){const o=this.getSubstatBase(t),s=this.getStatDiv(t);return(Math.floor(200*(a-o)/s)+50)*.001}static#e(t,a){const o=this.getSubstatBase(t),s=this.getStatDiv(t);return(Math.floor(200*(a-o)/s)+1400)*.001}static#t(t,a){const o=this.getSubstatBase(t),s=this.getStatDiv(t);return Math.floor(550*(a-o)/s)*.001}static#n(t,a){const o=this.getSubstatBase(t),s=this.getStatDiv(t);return Math.floor(140*(a-o)/s)*.001}static#a(t,a){const o=this.getMainstatBase(t),s=this.getStatDiv(t);return Math.floor(1e3+140*(a-o)/s)*.001}static overtimePotency(t,a,o){const s=this.getSubstatBase(t),c=this.getStatDiv(t),d=(1e3+Math.floor((a-s)*130/c))*.001;return o*d}static mpTick(t,a){const o=this.getMainstatBase(t),s=this.getStatDiv(t);return 200+Math.floor(150*(a-o)/s)}static preTaxGcd(t,a,o,s){const c=this.getSubstatBase(t),d=this.getStatDiv(t),f=Math.ceil((c-a)*130/d),h=Math.floor(o*(1e3+f));return Math.floor((100-(s??0))*h/1e3)/100}static preTaxGcdLegacy(t,a,o,s){const c=this.getSubstatBase(t),d=this.getStatDiv(t);return Math.floor(Math.floor(Math.floor((100-(s??0))*100/100)*Math.floor((2e3-Math.floor(130*(a-c)/d+1e3))*(1e3*o)/1e4)/100)*100/100)/100}static preTaxCastTime(t,a,o,s){const c=this.getSubstatBase(t),d=this.getStatDiv(t);return Math.floor(Math.floor(Math.floor((100-(s??0))*100/100)*Math.floor((2e3-Math.floor(130*(a-c)/d+1e3))*(1e3*o)/1e3)/100)*100/100)/1e3}static afterFpsTax(t,a){return Math.floor(a*t+1)/t}}var U=(e=>(e[e.AF3=0]="AF3",e[e.AF2=1]="AF2",e[e.AF1=2]="AF1",e[e.UI3=3]="UI3",e[e.UI2=4]="UI2",e[e.UI1=5]="UI1",e[e.ENO=6]="ENO",e[e.STARRY=7]="STARRY",e[e.EMBOLDEN_M=8]="EMBOLDEN_M",e[e.ACCELERATION=9]="ACCELERATION",e[e.POT=10]="POT",e[e.COMBO=11]="COMBO",e[e.AUTO_CDH=12]="AUTO_CDH",e[e.NO_CDH=13]="NO_CDH",e[e.PARTY=14]="PARTY",e[e.STANDARD_SINGLE=15]="STANDARD_SINGLE",e[e.STANDARD_DOUBLE=16]="STANDARD_DOUBLE",e[e.TECHNICAL_SINGLE=17]="TECHNICAL_SINGLE",e[e.TECHNICAL_DOUBLE=18]="TECHNICAL_DOUBLE",e[e.TECHNICAL_TRIPLE=19]="TECHNICAL_TRIPLE",e[e.TECHNICAL_QUADRUPLE=20]="TECHNICAL_QUADRUPLE",e[e.DEVILMENT=21]="DEVILMENT",e[e.FUGETSU=22]="FUGETSU",e[e.AUTO_CRIT=23]="AUTO_CRIT",e[e.YATEN=24]="YATEN",e[e.POSITIONAL=25]="POSITIONAL",e[e.ARCANE_CIRCLE=26]="ARCANE_CIRCLE",e[e.DEATHSDESIGN=27]="DEATHSDESIGN",e[e.ENHANCED_GIBBET_GALLOWS=28]="ENHANCED_GIBBET_GALLOWS",e[e.ENHANCED_REAPING=29]="ENHANCED_REAPING",e[e.IMMORTAL_SACRIFICE=30]="IMMORTAL_SACRIFICE",e[e.OVERHEATED=31]="OVERHEATED",e[e.SURGING_TEMPEST=32]="SURGING_TEMPEST",e[e.RAGING_STRIKES=33]="RAGING_STRIKES",e[e.WANDERERS_MINUET=34]="WANDERERS_MINUET",e[e.MAGES_BALLAD=35]="MAGES_BALLAD",e[e.ARMYS_PAEON=36]="ARMYS_PAEON",e[e.BATTLE_VOICE=37]="BATTLE_VOICE",e[e.RADIANT_FINALE_ONE_CODA=38]="RADIANT_FINALE_ONE_CODA",e[e.RADIANT_FINALE_TWO_CODA=39]="RADIANT_FINALE_TWO_CODA",e[e.RADIANT_FINALE_THREE_CODA=40]="RADIANT_FINALE_THREE_CODA",e[e.BARRAGE=41]="BARRAGE",e[e.NO_MERCY=42]="NO_MERCY",e[e.SEARING_LIGHT=43]="SEARING_LIGHT",e[e.POWER_SURGE=44]="POWER_SURGE",e[e.ENHANCED_PIERCING_TALON=45]="ENHANCED_PIERCING_TALON",e[e.LANCE_CHARGE=46]="LANCE_CHARGE",e[e.LIFE_OF_THE_DRAGON=47]="LIFE_OF_THE_DRAGON",e[e.LIFE_SURGE=48]="LIFE_SURGE",e[e.BATTLE_LITANY=49]="BATTLE_LITANY",e[e.FIGHT_OR_FLIGHT=50]="FIGHT_OR_FLIGHT",e[e.DIVINE_MIGHT=51]="DIVINE_MIGHT",e[e.REQUIESCAT=52]="REQUIESCAT",e[e.PET=53]="PET",e[e.ZOE=54]="ZOE",e[e.SOTERIA=55]="SOTERIA",e[e.KRASIS=56]="KRASIS",e[e.AUTOPHYSIS=57]="AUTOPHYSIS",e[e.PHILOSOPHIA=58]="PHILOSOPHIA",e[e.MOON_FLUTE=59]="MOON_FLUTE",e[e.BRISTLE=60]="BRISTLE",e[e.WHISTLE=61]="WHISTLE",e[e.TINGLEA=62]="TINGLEA",e[e.TINGLEB=63]="TINGLEB",e[e.SURPANAKHA=64]="SURPANAKHA",e[e.WINGED_REPROBATION=65]="WINGED_REPROBATION",e[e.WINGED_REDEMPTION=66]="WINGED_REDEMPTION",e[e.DARKSIDE=67]="DARKSIDE",e[e.BUNSHIN=68]="BUNSHIN",e[e.KASSATSU=69]="KASSATSU",e[e.HOLLOW_NOZUCHI=70]="HOLLOW_NOZUCHI",e[e.KAZEMATOI=71]="KAZEMATOI",e[e.MEISUI=72]="MEISUI",e[e.DOKUMORI=73]="DOKUMORI",e[e.TRICK_ATTACK=74]="TRICK_ATTACK",e[e.KUNAIS_BANE=75]="KUNAIS_BANE",e[e.BROTHERHOOD=76]="BROTHERHOOD",e[e.RIDDLE_OF_FIRE=77]="RIDDLE_OF_FIRE",e[e.SSS_CHAKRA=78]="SSS_CHAKRA",e[e.MNK_BALL=79]="MNK_BALL",e[e.DIVINATION=80]="DIVINATION",e[e.NEUTRAL_SECT=81]="NEUTRAL_SECT",e[e.THE_ARROW=82]="THE_ARROW",e[e.SYNASTRY=83]="SYNASTRY",e[e.CONFESSION=84]="CONFESSION",e[e.ASYLUM=85]="ASYLUM",e[e.TEMPERANCE=86]="TEMPERANCE",e[e.EXTRA_BELL_STACKS=87]="EXTRA_BELL_STACKS",e[e.HUNTERS_INSTINCT=88]="HUNTERS_INSTINCT",e[e.HONED=89]="HONED",e[e.VENOM=90]="VENOM",e[e.POISED=91]="POISED",e[e.CHAIN_STRAT=92]="CHAIN_STRAT",e[e.FEY_ILLUMINATION=93]="FEY_ILLUMINATION",e[e.DISSIPATION=94]="DISSIPATION",e[e.PROTRACTION=95]="PROTRACTION",e))(U||{});const ap=1.1,_A=.9,J={Tincture:{kind:"multiplier",source:10,potencyFactor:1},AutoCrit:{kind:"critDirect",source:23,critBonus:1,dhBonus:0},AutoCDH:{kind:"critDirect",source:12,critBonus:1,dhBonus:1},NoCDH:{kind:"critDirect",source:13,critBonus:0,dhBonus:0},Starry:{kind:"multiplier",source:7,potencyFactor:1.05},EmboldenMagic:{kind:"multiplier",source:8,potencyFactor:1.1},AccelerationImpact:{kind:"adder",source:9,additiveAmount:50},SingleStandardFinish:{kind:"multiplier",source:15,potencyFactor:1.02},DoubleStandardFinish:{kind:"multiplier",source:16,potencyFactor:1.05},SingleTechnicalFinish:{kind:"multiplier",source:17,potencyFactor:1.01},TripleTechnicalFinish:{kind:"multiplier",source:19,potencyFactor:1.03},QuadrupleTechnicalFinish:{kind:"multiplier",source:20,potencyFactor:1.05},Devilment:{kind:"critDirect",source:21,critBonus:.2,dhBonus:.2},FugetsuBase:{kind:"multiplier",source:22,potencyFactor:1.1},FugetsuEnhanced:{kind:"multiplier",source:22,potencyFactor:1.13},YatenpiBase:{kind:"adder",source:24,additiveAmount:160},YatenpiEnhanced:{kind:"adder",source:24,additiveAmount:170},ArcaneCircle:{kind:"multiplier",source:26,potencyFactor:1.03},DeathsDesign:{kind:"multiplier",source:27,potencyFactor:1.1},EnhancedGibbetGallows:{kind:"adder",source:28,additiveAmount:60},EnhancedReaping:{kind:"adder",source:29,additiveAmount:60},ImmortalSacrifice:{kind:"adder",source:30,additiveAmount:40},Overheated:{kind:"adder",source:31,additiveAmount:20},SurgingTempest:{kind:"multiplier",source:32,potencyFactor:1.1},RagingStrikes:{kind:"multiplier",source:33,potencyFactor:1.15},MagesBallad:{kind:"multiplier",source:35,potencyFactor:1.01},ArmysPaeon:{kind:"critDirect",source:36,critBonus:0,dhBonus:.03},WanderersMinuet:{kind:"critDirect",source:34,critBonus:.02,dhBonus:0},BattleVoice:{kind:"critDirect",source:37,critBonus:0,dhBonus:.2},RadiantFinaleOneCoda:{kind:"multiplier",source:38,potencyFactor:1.02},RadiantFinaleTwoCoda:{kind:"multiplier",source:39,potencyFactor:1.04},RadiantFinaleThreeCoda:{kind:"multiplier",source:40,potencyFactor:1.06},BarrageRefulgent:{kind:"multiplier",source:41,potencyFactor:3},BarrageWideVolley:{kind:"adder",source:41,additiveAmount:80},BarrageShadowbite:{kind:"adder",source:41,additiveAmount:100},NoMercy:{kind:"multiplier",source:42,potencyFactor:1.2},SearingLight:{kind:"multiplier",source:43,potencyFactor:1.05},SmnPet:{kind:"multiplier",source:53,potencyFactor:.8},PowerSurge:{kind:"multiplier",source:44,potencyFactor:1.1},LanceCharge:{kind:"multiplier",source:46,potencyFactor:1.1},LifeOfTheDragon:{kind:"multiplier",source:47,potencyFactor:1.15},BattleLitany:{kind:"critDirect",source:49,critBonus:.1,dhBonus:0},EnhancedPiercingTalon:{kind:"adder",source:45,additiveAmount:150},LifeSurge:{kind:"critDirect",source:48,critBonus:1,dhBonus:0},FightOrFlight:{kind:"multiplier",source:50,potencyFactor:1.25},Zoe:{kind:"multiplier",source:54,potencyFactor:1.5},Soteria:{kind:"multiplier",source:55,potencyFactor:1.7},Krasis:{kind:"multiplier",source:56,potencyFactor:1.2},Autophysis:{kind:"multiplier",source:57,potencyFactor:1.1},Philosophia:{kind:"multiplier",source:58,potencyFactor:1.2},MoonFlute:{kind:"multiplier",source:59,potencyFactor:1.5},Whistle:{kind:"multiplier",source:61,potencyFactor:1.8},Bristle:{kind:"multiplier",source:60,potencyFactor:1.5},TingleA:{kind:"adder",source:62,additiveAmount:100},TingleB:{kind:"adder",source:63,additiveAmount:300},WingedReprobation:{kind:"adder",source:65,additiveAmount:100},WingedRedemption:{kind:"adder",source:66,additiveAmount:220},Darkside:{kind:"multiplier",source:67,potencyFactor:ap},DrkPet:{kind:"multiplier",source:53,potencyFactor:1.05*ap},BunshinST:{kind:"adder",source:68,additiveAmount:160*_A},BunshinAOE:{kind:"adder",source:68,additiveAmount:80*_A},NinPet:{kind:"multiplier",source:53,potencyFactor:_A},Kassatsu:{kind:"multiplier",source:69,potencyFactor:1.3},HollowNozuchi:{kind:"adder",source:70,additiveAmount:70},Kazematoi:{kind:"adder",source:71,additiveAmount:100},Meisui:{kind:"adder",source:72,additiveAmount:150},Dokumori:{kind:"multiplier",source:73,potencyFactor:1.05},TrickAttack:{kind:"multiplier",source:74,potencyFactor:1.1},KunaisBane:{kind:"multiplier",source:75,potencyFactor:1.1},Brotherhood:{kind:"multiplier",source:76,potencyFactor:1.05},RiddleOfFire:{kind:"multiplier",source:77,potencyFactor:1.15},Divination:{kind:"multiplier",source:80,potencyFactor:1.06},NeutralSect:{kind:"multiplier",source:81,potencyFactor:1.2},TheArrow:{kind:"multiplier",source:82,potencyFactor:1.1},Synastry:{kind:"multiplier",source:83,potencyFactor:1.4},AstPet:{kind:"multiplier",source:53,potencyFactor:.98},Confession:{kind:"adder",source:84,additiveAmount:200},Asylum:{kind:"multiplier",source:85,potencyFactor:1.1},Temperance:{kind:"multiplier",source:86,potencyFactor:1.2},WhmPet:{kind:"multiplier",source:53,potencyFactor:.96},HuntersInstinct:{kind:"multiplier",source:88,potencyFactor:1.1},HonedST:{kind:"adder",source:89,additiveAmount:100},HonedAoE:{kind:"adder",source:89,additiveAmount:20},VenomST:{kind:"adder",source:90,additiveAmount:100},VenomAoE:{kind:"adder",source:90,additiveAmount:40},VenomOGCDST:{kind:"adder",source:90,additiveAmount:50},VenomOGCDAoE:{kind:"adder",source:90,additiveAmount:30},Poised:{kind:"adder",source:91,additiveAmount:50},ChainStrat:{kind:"critDirect",source:92,critBonus:.1,dhBonus:0},SchPet:{kind:"multiplier",source:53,potencyFactor:.9},FeyIllum:{kind:"multiplier",source:93,potencyFactor:1.1},Dissipation:{kind:"multiplier",source:94,potencyFactor:1.2},Protraction:{kind:"multiplier",source:95,potencyFactor:1.1}};function Xx(e){return{kind:"adder",source:11,additiveAmount:e}}function qx(e){return{kind:"adder",source:52,additiveAmount:e}}function Zx(e){return{kind:"adder",source:51,additiveAmount:e}}function Hh(e){return{kind:"adder",source:25,additiveAmount:e}}class tn{config;sourceTime;sourceSkill;aspect;description;base;#e;#t;falloff;snapshotTime;applicationTime;#n=[];#a;constructor(t){if(this.config=t.config,this.sourceTime=t.sourceTime,this.sourceSkill=t.sourceSkill,this.aspect=t.aspect,this.base=t.basePotency,this.snapshotTime=t.snapshotTime,this.description=t.description,t.targetList!==void 0&&t.healTargetCount!==void 0)throw new Error("targetList and healTargetCount cannot both be specified.");if(t.targetList===void 0&&t.healTargetCount===void 0)throw new Error("At least one of targetList or healTargetCount must be specified.");this.#e=t.targetList,this.#t=t.healTargetCount??this.#e?.length??0,this.falloff=t.falloff,this.#a=void 0}hasTarget(t){return this.targetList.includes(t)}get targetList(){return this.#e??[]}tryRemoveTarget(t){const a=this.#e?.indexOf(t)??-1;return a>-1?(this.#e.splice(a,1),this.#t=this.targetList.length,!0):!1}addTargetSpecificModifiers(t){this.#a===void 0&&(this.#a=new Map),t.forEach((a,o)=>{const s=this.#a.get(o);s?s.push(...a):this.#a.set(o,[...a])})}get targetCount(){return this.#t}get healTargetCount(){return console.assert(this.#e===void 0),this.#t}set healTargetCount(t){console.assert(this.#e===void 0),this.#t=t}addModifiers(...t){this.#n.push(...t)}getDisplayedModifiers(t){if(t!==void 0){const a=new Set;return this.#a?.forEach((o,s)=>{t.includes(s)&&o.forEach(c=>a.add(c))}),[...this.#n,...a]}return this.#n}getAmount(t){const a=this.targetCount-(this.#a?.size??0);let o=this.#i(t,this.targetList.length===0||!this.#a?.has(this.targetList[0]),a,this.#n);if(this.targetList.length===0)return o;const s=this.targetList[0];return this.#a?.forEach((c,d)=>{o+=this.#i(t,d===s,1,[...this.#n,...c])}),o}#i(t,a,o,s){let c=1,d=0,f=0,h=0,m=!1,R=!1,T=!1;s.forEach(_=>{_.source===10?c*=t.tincturePotencyMultiplier:_.source===12?m=!0:_.source===23?R=!0:_.source===13?T=!0:_.kind==="critDirect"?(f+=_.critBonus,h+=_.dhBonus):_.kind==="multiplier"?c*=_.potencyFactor:_.kind==="adder"&&(d+=_.additiveAmount)}),console.assert(!(T&&(m||R)),"skills that can't CDH cannot be auto-crit or auto-CDH"),T&&(m=!1,R=!1),console.assert(!(m&&R),"cannot be both auto-crit and auto-CDH"),t.includePartyBuffs&&this.snapshotTime&&I.game.getPartyBuffs(this.snapshotTime).forEach(_=>{_.kind==="multiplier"?c*=_.potencyFactor:_.kind==="critDirect"&&(f+=_.critBonus,h+=_.dhBonus)});const S=this.base+d;let g=S*this.#r(c,T?0:f,T?0:h);if(m?g*=this.#c(f,h):R?g*=this.#s(f,h):T&&(g=S*c/ut.calculateDamage(this.config.level,this.config.criticalHit,this.config.directHit,this.config.determination,c,0,0)),t.includeSplash){const _=a?1+(1-(this.falloff??1))*(o-1):(1-(this.falloff??1))*o;g*=_}return g}getPartyBuffs(t){return this.sourceSkill==="SALTED_EARTH"||this.sourceSkill==="SLIPSTREAM"||this.sourceSkill==="DOTON"?t?[...I.game.getPartyBuffs(t).keys()]:[]:this.snapshotTime?[...I.game.getPartyBuffs(this.snapshotTime).keys()]:[]}resolve(t){console.assert(this.snapshotTime!==void 0,`${this.sourceSkill} displayed at ${t} did not have snapshotTime`),console.assert(this.applicationTime===void 0,`${this.sourceSkill} displayed at ${t} was already resolved at ${this.applicationTime}`),this.applicationTime=t}hasResolved(){return this.applicationTime!==void 0}hasHitBoss(t){return this.applicationTime!==void 0&&!t(this.applicationTime)}hasSnapshotted(){return this.snapshotTime!==void 0}#c(t,a){const o=this.config.level,s=ut.calculateDamage(o,I.gameConfig.criticalHit,I.gameConfig.directHit,I.gameConfig.determination,1,t,a);return ut.calculateDamage(o,I.gameConfig.criticalHit,I.gameConfig.directHit,I.gameConfig.determination,1,1+t,1+a)/s}#s(t,a){const o=this.config.level,s=ut.calculateDamage(o,I.gameConfig.criticalHit,I.gameConfig.directHit,I.gameConfig.determination,1,t,a);return ut.calculateDamage(o,I.gameConfig.criticalHit,I.gameConfig.directHit,I.gameConfig.determination,1,1+t,a)/s}#r(t,a,o){const s=this.config.level,c=this.config.criticalHit,d=this.config.directHit,f=this.config.determination,h=ut.calculateDamage(s,c,d,f,1,0,0);return ut.calculateDamage(s,c,d,f,t,a,o)/h}}var ft=(e=>(e.Red="#f64141",e.Orange="#e89b5f",e.Yellow="#ffd535",e.Green="#50c53d",e.Cyan="#53e5e5",e.Blue="#217ff5",e.Purple="#9755ef",e.Pink="#ee79ee",e.Grey="#6f6f6f",e))(ft||{});const Tt=()=>ha(C.useContext(Nn)),ha=e=>e==="Dark"?Qx:$x,Sl=(e,t)=>ha(e)[t],Qx={accent:"mediumpurple",jobAccents:{BLM:"#9370db",BLU:"#9370db",PCT:"#e176c2",RDM:"#ff0000",DNC:"#e2b0af",SAM:"#f59542",MCH:"#6ee1d6",WAR:"#b10b0b",RPR:"#965a90",BRD:"#91ba5e",GNB:"#f6b26b",SMN:"#2D9B78",SGE:"#80a0f0"},editingValid:"#ffdc00",editingInvalid:"#ff0000",dropTarget:"#5579f1",realTime:"mediumseagreen",historical:"#ff8c00",fileDownload:"#798c3f",text:"#b0b0b0",emphasis:"#dadada",success:"mediumseagreen",warning:"#ff6224",background:"#1f1f21",tipBackground:"#2a2a2a",bgLowContrast:"#333",bgMediumContrast:"#393939",bgHighContrast:"#626262",timelineEditor:{headerFooter:"#424242",bgAlternateRow:"#282828"},resources:{gcdBar:"#5cab43",lockBar:"#737373",mana:"#62a5d2",manaTick:"#3d5c73",cdhTag:"#d55124",comboTag:"#5c8bad",petTag:"#eb9b5f"},blm:{enochian:"#b69241",astralFire:"#d55124",astralSoul:"#cb8046",umbralIce:"#509bd5",umbralHeart:"#8fced5",paradox:"#d953ee",polyTimer:"#594472",polyStacks:"#b138ee"},blu:{moonflute:"#b69241",whistle:"#b69241",bristle:"#b69241",tinglea:"#217ff5",tingleb:"#217ff5",surpanakha:"#b69241",wingedreprobation:"#ffd535"},pct:{creatureCanvas:"#a948e3",weaponCanvas:"#a53535",landscapeCanvas:"#2e51dd",paletteGauge:"#b69241",holyPaint:"#9bc6dd",cometPaint:"#7e19aa",starryBuff:"#509bd5"},rdm:{whiteMana:"#dddddd",blackMana:"#2a4bf5",manaStack:"#cb8046",emboldenBuff:"#de0202",accelBuff:"#f0d1e8"},dnc:{esprit:"#e2b0af",feathers:"#8DA147",emboite:"#bf615c",entrechat:"#3a8db7",jete:"#539350",pirouette:"#b0984e"},sam:{kenki:"#d55124",setsu:"#c7ffff",getsu:"#7987fc",kaSen:"#f8a2a6",meditation:"#ff853d",fugetsu:"#0f52ba",iai:"#89cfef"},mch:{heat:"#D35A10",battery:"#2C9FCB"},rpr:{soulGaugeLow:"#660929",soulGaugeHigh:"#e5004e",shroudGaugeLow:"#03706c",shroudGaugeHigh:"#00fcf3",lemureShroud:"#53ffff",voidShroudLow:"#5c125c",voidShroudHigh:"#ff04ff",deathsDesign:"#ab0009",arcaneCircle:"#ff94fd"},war:{beastGauge:"#ffba00"},brd:{soulVoice:"#5DBD99",pitchPerfect:"#9ac5f1",repertoire:"#e8c35a",wanderersCoda:"#add549",magesCoda:"#ffbcf8",armysCoda:"#eb9b5f",ragingStrikes:"#c04414",barrage:"#e6c65b",battleVoice:"#71bed1",radiantFinale:"#edcce7"},gnb:{},smn:{aetherflow:"#ffd4ff",bahamut:"#2D9B78",phoenix:"#d55124",solar:"#9bc6dd",ruby:"#e5004e",topaz:"#b0984e",emerald:"#539350",searing:"#2D9B78"},drg:{lifeSurge:"#ff6633",lanceCharge:"#d6002d",lifeOfTheDragon:"#0968af",battleLitany:"#33b8e3",powerSurge:"#59ed78",enhancedPiercingTalon:"#f4caa6",firstmindsFocusStacks:"#9926c8",lifeOfTheDragonBar:"#d74936",drgComboTimer:"#3d61ae"},sge:{addersgall:"#80a0f0",addersting:"#9e2dca",zoe:"cyan",autophysis:"lightblue",krasis:"teal",soteria:"green",philosophia:"lightgreen"},pld:{divineMight:"#ff6633",requiescat:"#d6002d",fightOrFlight:"#0968af",pldComboTimer:"#59ed78",ironWillColor:"#d74936",oathGaugeColor:"#3d61ae"},drk:{darkside:"#c000d1",blood:"#8803fc",darkarts:"#ffdf0d",drkComboTimer:"#cb8046",grit:"#82cad9"},nin:{ninComboTimer:"#8532a8",kazematoi:"#ab1fd1",meisui:"#559ef2",ninki:"#8532a8",bunshin:"#ed8021",kassatsu:"#fa9bd4",nozuchi:"#d6a440",dokumori:"#9a0ec4",trick:"#ffd454"},mnk:{opo:"#feabf7",raptor:"#c495fb",coeurl:"#00d9a5",lunar:"#a984f5",solar:"#c6c5c3",riddleOfFire:"#d98d58",brotherhood:"#da4c32",chakra:"#fffea5",extraChakra:"#fe9b28"},whm:{lily:"#d3ffff",blood:"#e08889",pom:"#9788e0",asylum:"#b5e075",confession:"#8df2e8",temperance:"#77f7b7"},ast:{div:"#ffd535",astralCard:"#52d3f7",umbralCard:"#f7b3ff",lord:"#de1200",lady:"#f8facd",neutral:"#354869",synastry:"#578a7e",arrow:"#1690a8"},vpr:{vprComboTimer:"#dea65d",rattlingCoil:"#f64141",serpentOfferings:"#f64141",anguineTribute:"#24e2ff",huntersInstinct:"#9e5a02",swiftscaled:"#ffe20a"},sch:{chain:"#6f6f6f",faerieGauge:"#96ffbd",aetherflow:"#acfff7",seraph:"#44b6fd",feyIllumination:"#2cc7b0",dissipation:"#c4c4c4",protraction:"#77c990",recitation:"#ffce1c"},timeline:{ruler:"#2d2d2d",tracks:"#242424",castBar:"#42364d",lockBar:"#696969",gcdBar:"#354931",invalidBg:"#f25449",llCover:"#5ea647",potCover:"#c4543a",buffCover:"#9370db",damageMark:"#ff0000",healingMark:"#2cda30",aggroMark:"#ff8000",untargetableDamageMark:"#7f7f7f",mpTickMark:"#32525e",warningMark:"#9d7103",lucidTickMark:"#56b3d5",countdown:"rgba(15, 15, 15, 0.4)",markerAlpha:"4f"}},$x={accent:"mediumpurple",jobAccents:{BLM:"#9370db",BLU:"#9370db",PCT:"#f485d6",RDM:"#ff0000",DNC:"#e2b0af",SAM:"#f59542",MCH:"#6ee1d6",WAR:"#b10b0b",RPR:"#965a90",BRD:"#91ba5e",SMN:"#2D9B78",SGE:"#80a0f0"},editingValid:"#ffdc00",editingInvalid:"#ff0000",dropTarget:"#4665ff",realTime:"mediumseagreen",historical:"#ff8c00",fileDownload:"#798c3f",text:"#000000",emphasis:"#000000",success:"mediumseagreen",warning:"#ff4d07",background:"#ffffff",tipBackground:"#ffffff",bgLowContrast:"#efefef",bgMediumContrast:"lightgrey",bgHighContrast:"darkgrey",timelineEditor:{headerFooter:"#cacaca",bgAlternateRow:"#eeeeee"},resources:{gcdBar:"#8edc72",lockBar:"#cbcbcb",mana:"#8ACEEA",manaTick:"#C2EAFF",cdhTag:"#ff6633",comboTag:"#53a7c9",petTag:"#eb9b5f"},blm:{enochian:"#f5cf96",astralFire:"#ff6633",astralSoul:"#ffa641",umbralIce:"#66bbff",umbralHeart:"#95dae3",paradox:"#d953ee",polyTimer:"#d5bbf1",polyStacks:"#b138ee"},blu:{moonflute:"#b69241",whistle:"#b69241",bristle:"#b69241",tinglea:"#217ff5",tingleb:"#217ff5",surpanakha:"#b69241",wingedreprobation:"#ffd535"},pct:{creatureCanvas:"#b854e8",weaponCanvas:"#d54d48",landscapeCanvas:"#4568f6",paletteGauge:"#f5cf96",holyPaint:"#b7c9d5",cometPaint:"#9926c8",starryBuff:"#66bbff"},rdm:{whiteMana:"#fcd8d4",blackMana:"#467aeb",manaStack:"#9926c8",emboldenBuff:"#c91310",accelBuff:"#c973b4"},dnc:{esprit:"#e2b0af",feathers:"#8DA147",emboite:"#bf615c",entrechat:"#3a8db7",jete:"#539350",pirouette:"#b0984e"},sam:{kenki:"#d55124",setsu:"#addede",getsu:"#7987fc",kaSen:"#f8a2a6",meditation:"#ff853d",fugetsu:"#0f52ba",iai:"#89cfef"},mch:{heat:"#D35A10",battery:"#2C9FCB"},rpr:{soulGaugeLow:"#660929",soulGaugeHigh:"#e5004e",shroudGaugeLow:"#03706c",shroudGaugeHigh:"#00fcf3",lemureShroud:"#53ffff",voidShroudLow:"#5c125c",voidShroudHigh:"#ff04ff",deathsDesign:"#ab0009",arcaneCircle:"#ff94fd"},war:{beastGauge:"#e74a3c"},brd:{soulVoice:"#5DBD99",pitchPerfect:"#9ac5f1",repertoire:"#e8c35a",wanderersCoda:"#add549",magesCoda:"#ffbcf8",armysCoda:"#eb9b5f",ragingStrikes:"#c04414",barrage:"#e6c65b",battleVoice:"#71bed1",radiantFinale:"#edcce7"},gnb:{},smn:{aetherflow:"#ffd4ff",bahamut:"#2D9B78",phoenix:"#d55124",solar:"#9bc6dd",ruby:"#e5004e",topaz:"#b0984e",emerald:"#539350",searing:"#2D9B78"},drg:{lifeSurge:"#ff6633",lanceCharge:"#d6002d",lifeOfTheDragon:"#0968af",battleLitany:"#33b8e3",powerSurge:"#59ed78",enhancedPiercingTalon:"#f4caa6",firstmindsFocusStacks:"#9926c8",lifeOfTheDragonBar:"#d74936",drgComboTimer:"#3d61ae"},sge:{addersgall:"#80a0f0",addersting:"#9e2dca",zoe:"cyan",autophysis:"lightblue",krasis:"teal",soteria:"green",philosophia:"lightgreen"},pld:{divineMight:"#ff6633",requiescat:"#d6002d",fightOrFlight:"#0968af",pldComboTimer:"#59ed78",ironWillColor:"#d74936",oathGaugeColor:"#3d61ae"},drk:{darkside:"#c000d1",blood:"#8803fc",darkarts:"#ffdf0d",drkComboTimer:"#cb8046",grit:"#82cad9"},nin:{ninComboTimer:"#8532a8",kazematoi:"#ab1fd1",meisui:"#559ef2",ninki:"#8532a8",bunshin:"#ed8021",kassatsu:"#fa9bd4",nozuchi:"#d6a440",dokumori:"#7e03a3",trick:"#e6b525"},mnk:{opo:"#feabf7",raptor:"#c495fb",coeurl:"#00d9a5",lunar:"#a984f5",solar:"#c6c5c3",riddleOfFire:"#d98d58",brotherhood:"#da4c32",chakra:"#fee11c",extraChakra:"#fe9b28"},whm:{lily:"#a5d0e8",blood:"#ff5454",pom:"#9788e0",asylum:"#b5e075",confession:"#8df2e8",temperance:"#77f7b7"},ast:{div:"#ffd535",astralCard:"#52d3f7",umbralCard:"#f7b3ff",lord:"#de1200",lady:"#d3d672",neutral:"#354869",synastry:"#578a7e",arrow:"#1690a8"},vpr:{vprComboTimer:"#dea65d",rattlingCoil:"#f64141",serpentOfferings:"#f64141",anguineTribute:"#24e2ff",huntersInstinct:"#9e5a02",swiftscaled:"#ffe20a"},sch:{chain:"#6f6f6f",faerieGauge:"#96ffbd",aetherflow:"#79d9d0",seraph:"#3299d9",feyIllumination:"#2cc7b0",dissipation:"#c4c4c4",protraction:"#77c990",recitation:"#ffce1c"},timeline:{ruler:"#e9e9e9",tracks:"#f3f3f3",castBar:"#ecd6f3",lockBar:"#9d9d9d",gcdBar:"#ccefc6",invalidBg:"#c21104",llCover:"#87ec71",potCover:"#ff865c",buffCover:"#9370db",damageMark:"#ff0000",healingMark:"#2cda30",aggroMark:"#ff8000",untargetableDamageMark:"#7f7f7f",mpTickMark:"#b6dfea",warningMark:"#ffbb29",lucidTickMark:"#88cae0",countdown:"rgba(0, 0, 0, 0.1)",markerAlpha:"7f"}};function Jx(e){const t=Tt(),a=new Map([[U.AF3,t.blm.astralFire],[U.AF2,t.blm.astralFire],[U.AF1,t.blm.astralFire],[U.UI3,t.blm.umbralIce],[U.UI2,t.blm.umbralIce],[U.UI1,t.blm.umbralIce],[U.ENO,t.blm.enochian],[U.AUTO_CDH,t.resources.cdhTag],[U.STARRY,t.pct.starryBuff],[U.EMBOLDEN_M,t.rdm.emboldenBuff],[U.ACCELERATION,t.rdm.accelBuff],[U.STANDARD_SINGLE,t.dnc.jete],[U.STANDARD_DOUBLE,t.dnc.jete],[U.TECHNICAL_SINGLE,t.dnc.esprit],[U.TECHNICAL_DOUBLE,t.dnc.esprit],[U.TECHNICAL_TRIPLE,t.dnc.esprit],[U.TECHNICAL_QUADRUPLE,t.dnc.esprit],[U.DEVILMENT,t.dnc.feathers],[U.OVERHEATED,"#ee79ee"],[U.COMBO,t.resources.comboTag],[U.FUGETSU,t.sam.fugetsu],[U.AUTO_CRIT,t.resources.cdhTag],[U.YATEN,t.pct.cometPaint],[U.POSITIONAL,"#50c53d"],[U.ARCANE_CIRCLE,"#ee79ee"],[U.DEATHSDESIGN,"#f64141"],[U.ENHANCED_GIBBET_GALLOWS,"#217ff5"],[U.ENHANCED_REAPING,"#9755ef"],[U.IMMORTAL_SACRIFICE,"#ee79ee"],[U.SURGING_TEMPEST,"#9755ef"],[U.BARRAGE,t.brd.barrage],[U.RAGING_STRIKES,t.brd.ragingStrikes],[U.BATTLE_VOICE,t.brd.battleVoice],[U.RADIANT_FINALE_THREE_CODA,t.brd.radiantFinale],[U.RADIANT_FINALE_TWO_CODA,t.brd.radiantFinale],[U.RADIANT_FINALE_ONE_CODA,t.brd.radiantFinale],[U.WANDERERS_MINUET,t.brd.wanderersCoda],[U.MAGES_BALLAD,t.brd.magesCoda],[U.ARMYS_PAEON,t.brd.armysCoda],[U.NO_MERCY,t.rdm.blackMana],[U.SEARING_LIGHT,t.smn.searing],[U.LIFE_SURGE,t.drg.lifeSurge],[U.LANCE_CHARGE,t.drg.lanceCharge],[U.LIFE_OF_THE_DRAGON,t.drg.lifeOfTheDragon],[U.BATTLE_LITANY,t.drg.battleLitany],[U.POWER_SURGE,t.drg.powerSurge],[U.ENHANCED_PIERCING_TALON,t.drg.enhancedPiercingTalon],[U.DIVINE_MIGHT,t.pld.divineMight],[U.REQUIESCAT,t.pld.requiescat],[U.FIGHT_OR_FLIGHT,t.pld.fightOrFlight],[U.PET,t.resources.petTag],[U.MOON_FLUTE,t.blu.moonflute],[U.WHISTLE,t.blu.whistle],[U.BRISTLE,t.blu.bristle],[U.TINGLEA,t.blu.tinglea],[U.TINGLEB,t.blu.tingleb],[U.SURPANAKHA,t.blu.surpanakha],[U.WINGED_REDEMPTION,t.blu.wingedreprobation],[U.WINGED_REPROBATION,t.blu.wingedreprobation],[U.DARKSIDE,t.drk.darkside],[U.BUNSHIN,t.nin.bunshin],[U.KASSATSU,t.nin.kassatsu],[U.HOLLOW_NOZUCHI,t.nin.nozuchi],[U.KAZEMATOI,t.nin.kazematoi],[U.MEISUI,t.nin.meisui],[U.DOKUMORI,t.nin.dokumori],[U.TRICK_ATTACK,t.nin.trick],[U.KUNAIS_BANE,t.nin.trick],[U.BROTHERHOOD,t.mnk.brotherhood],[U.RIDDLE_OF_FIRE,t.mnk.riddleOfFire],[U.MNK_BALL,t.mnk.opo],[U.SSS_CHAKRA,t.mnk.chakra],[U.DIVINATION,t.ast.div],[U.HUNTERS_INSTINCT,t.vpr.huntersInstinct],[U.HONED,t.vpr.vprComboTimer],[U.VENOM,t.vpr.vprComboTimer],[U.POISED,t.vpr.vprComboTimer],[U.CHAIN_STRAT,t.sch.chain],[U.NO_CDH,t.timeline.untargetableDamageMark]]);return console.assert(a.has(e),`modifier ${e} doesn't have a color!`),a.get(e)??t.text}function ip(e){const t=e.colorTheme==="Dark",a=t?l.jsx(Vx,{}):l.jsx(Wx,{}),o=Tt(),s=C.useContext(Nn),c=N({en:t?"Dark Mode":"Light Mode",zh:t?"":""});return l.jsx("div",{title:c,style:{display:"inline-block",cursor:"pointer",borderBottom:e.colorTheme===s?"none":"1px solid "+o.text,borderTop:e.colorTheme===s?"1px solid "+o.text:"none"},onClick:()=>e.setColorTheme(e.colorTheme),children:a})}const mf=()=>{const e=Rt("colorTheme");return e==="Light"||e==="Dark"?e:window.matchMedia?.("(prefers-color-scheme: dark)").matches?"Dark":"Light"},Nn=C.createContext(mf());function eH(e){return l.jsx("div",{style:{display:"inline-block"},children:l.jsxs("div",{style:{display:"inline-block",fontSize:16},children:[l.jsx(ip,{colorTheme:"Light",setColorTheme:e.setColorTheme}),"|",l.jsx(ip,{colorTheme:"Dark",setColorTheme:e.setColorTheme})]})})}class kh{static getJob(t){return dt[t]}static getAction(t){return _n[t]}static findAction(t){return this.findByName(_n,t)}static findActionKey(t){return this.findKeyByName(_n,t)}static getResource(t){return Ge[t]}static findResource(t){return this.findByName(Ge,t)}static findResourceKey(t){return this.findKeyByName(Ge,t)}static getCooldown(t){return ns[t]}static findCooldown(t){return this.findByName(ns,t)}static findCooldownKey(t){return this.findKeyByName(ns,t)}static findByName(t,a){return Object.values(t).find(o=>o.name===a)}static findKeyByName(t,a){const o=Object.entries(t).find(([s,c])=>c.name===a);if(o)return o[0]}}function Jd(e){const t=Mi();return t==="zh"?e==="en"?"":e==="zh"?"":"":t==="ja"?e==="en"?"":e==="zh"?"":"":e.toString()}function N(e){const t=Mi();return t==="zh"&&e.zh?e.zh:t==="ja"&&e.ja?e.ja:e.en}function tH(e,t){{const[a,o,s]=e.split("/");return`20${s}${a}${o}`}}function iu(e){switch(e){case"spellSpeed":return N({en:"spell speed: ",zh:""}).toString();case"skillSpeed":return N({en:"skill speed: ",zh:""}).toString();case"fps":return N({en:"FPS: ",zh:""}).toString();case"criticalHit":return N({en:"crit: ",zh:""}).toString();case"directHit":return N({en:"direct hit: ",zh:""}).toString();case"determination":return N({en:"determination: ",zh:""}).toString();case"piety":return N({en:"piety: ",zh:""}).toString();case"animationLock":return N({en:"animation lock: ",zh:""}).toString()}return e}function Wa(e){if(e==="NEVER")return N({en:"unknown skill",zh:""}).toString();if(!(e in _n))return e;const t=kh.getAction(e);return N({en:t.name,...t.label}).toString()}function as(e){if(e===void 0)return N({en:"reason unknown",zh:""}).toString();let t="";return e===Et.Blocked?t="CD":e===Et.SecondaryBlocked?t="CD":e===Et.NotEnoughMP?t="MP":e===Et.NotInCombat?t="":e===Et.RequirementsNotMet?t="":e===Et.SkillNotUnlocked?t="Lv":e===Et.BuffNoLongerAvailable?t="BUFF":e===Et.PastTargetTime?t="":e===Et.CastCanceled?t="":e===Et.UnknownSkill?t="":console.error("unlocalized reason: "+e),N({en:e,zh:t}).toString()}const nH=new Map([[H.LeyLines,""],[H.Hyperphantasia,""],[H.Tincture,""],[H.ArcaneCircle,""],[H.ArmysPaeon,""],[H.BattleLitany,""],[H.BattleVoice,""],[H.Brotherhood,""],[H.Card_TheBalance,""],[H.Card_TheSpear,""],[H.ChainStratagem,""],[H.Devilment,""],[H.Divination,""],[H.Dokumori,""],[H.Embolden,""],[H.MagesBallad,""],[H.RadiantFinale1,"1"],[H.RadiantFinale2,"2"],[H.RadiantFinale3,"3"],[H.SearingLight,""],[H.StandardFinish,""],[H.StarryMuse,""],[H.TechnicalFinish,""],[H.WanderersMinuet,""]]),aH=new Map([[H.LeyLines,""],[H.Tincture,""],[H.ArcaneCircle,""],[H.ArmysPaeon,""],[H.BattleLitany,""],[H.BattleVoice,""],[H.Brotherhood,""],[H.Card_TheBalance,""],[H.Card_TheSpear,""],[H.ChainStratagem,""],[H.Devilment,""],[H.Divination,""],[H.Dokumori,""],[H.Embolden,""],[H.MagesBallad,""],[H.RadiantFinale1,"1"],[H.RadiantFinale2,"2"],[H.RadiantFinale3,"3"],[H.SearingLight,""],[H.StandardFinish,""],[H.StarryMuse,""],[H.TechnicalFinish,""],[H.WanderersMinuet,""]]);function nC(e){const t=Mi();return t==="zh"?nH.get(e)??e:t==="ja"?aH.get(e)??e:e}function Ke(e){const t=Mi();if(e in ns){const o=kh.getCooldown(e),s=N({en:o.name,...o.label}).toString();if(t!=="en"&&s===o.name){const c=e.slice(3),d=Object.keys(_n).find(f=>_n[f].name===c||f===c);if(d!==void 0)return"CD"+Wa(d)}return s}const a=kh.getResource(e);return N({en:a.name,...a.label}).toString()}const op=new Map([[U.AF3,{en:"AF3",zh:""}],[U.AF2,{en:"AF2",zh:""}],[U.AF1,{en:"AF1",zh:""}],[U.UI3,{en:"UI3",zh:""}],[U.UI2,{en:"UI2",zh:""}],[U.UI1,{en:"UI1",zh:""}],[U.ENO,{en:"enochian",zh:""}],[U.POT,{en:"pot",zh:""}],[U.PARTY,{en:"party",zh:""}],[U.AUTO_CDH,{en:"auto crit/direct hit",zh:""}],[U.STARRY,{en:"starry muse",zh:""}],[U.EMBOLDEN_M,{en:"embolden",zh:""}],[U.ACCELERATION,{en:"acceleration",zh:""}],[U.STANDARD_SINGLE,{en:"single standard finish",zh:""}],[U.STANDARD_DOUBLE,{en:"double standard finish",zh:""}],[U.TECHNICAL_SINGLE,{en:"single technical finish",zh:""}],[U.TECHNICAL_DOUBLE,{en:"double technical finish",zh:""}],[U.TECHNICAL_TRIPLE,{en:"triple technical finish",zh:""}],[U.TECHNICAL_QUADRUPLE,{en:"quadruple technical finish",zh:""}],[U.DEVILMENT,{en:"devilment",zh:""}],[U.OVERHEATED,{en:"overheated",zh:""}],[U.COMBO,{en:"combo",zh:""}],[U.FUGETSU,{en:"fugetsu",zh:""}],[U.AUTO_CRIT,{en:"auto crit",zh:""}],[U.YATEN,{en:"yaten",zh:""}],[U.POSITIONAL,{en:"positional",zh:""}],[U.ARCANE_CIRCLE,{en:"arcane circle",zh:""}],[U.DEATHSDESIGN,{en:"death's design",zh:""}],[U.ENHANCED_GIBBET_GALLOWS,{en:"enhanced gibbet/gallows",zh:"/"}],[U.ENHANCED_REAPING,{en:"enhanced reaping",zh:"/"}],[U.IMMORTAL_SACRIFICE,{en:"immortal sacrifice"}],[U.BARRAGE,{en:"barrage"}],[U.RAGING_STRIKES,{en:"raging strikes"}],[U.BATTLE_VOICE,{en:"battle voice"}],[U.RADIANT_FINALE_THREE_CODA,{en:"three coda radiant finale"}],[U.RADIANT_FINALE_TWO_CODA,{en:"two coda radiant finale"}],[U.RADIANT_FINALE_ONE_CODA,{en:"one coda radiant finale"}],[U.WANDERERS_MINUET,{en:"wanderer's minuet"}],[U.MAGES_BALLAD,{en:"mage's ballad"}],[U.ARMYS_PAEON,{en:"army's paeon"}],[U.NO_MERCY,{en:"no mercy",zh:""}],[U.SEARING_LIGHT,{en:"searing light",zh:""}],[U.SURGING_TEMPEST,{en:"surging tempest",zh:""}],[U.POWER_SURGE,{en:"power surge"}],[U.LANCE_CHARGE,{en:"lance charge"}],[U.ENHANCED_PIERCING_TALON,{en:"enhanced piercing talon"}],[U.LIFE_OF_THE_DRAGON,{en:"life of the dragon"}],[U.LIFE_SURGE,{en:"life surge"}],[U.PET,{en:"pet modifier",zh:""}],[U.DIVINE_MIGHT,{en:"divine might",zh:""}],[U.REQUIESCAT,{en:"requiescat",zh:""}],[U.FIGHT_OR_FLIGHT,{en:"fight or flight",zh:""}],[U.WHISTLE,{en:"WH",zh:""}],[U.BRISTLE,{en:"BR",zh:""}],[U.MOON_FLUTE,{en:"MF",zh:""}],[U.TINGLEA,{en:"TING",zh:""}],[U.TINGLEB,{en:"TING",zh:""}],[U.WINGED_REPROBATION,{en:"WREP",zh:""}],[U.WINGED_REDEMPTION,{en:"WRED",zh:""}],[U.DARKSIDE,{en:"darkside",zh:""}],[U.BUNSHIN,{en:"bunshin",zh:""}],[U.KASSATSU,{en:"kassatsu",zh:""}],[U.HOLLOW_NOZUCHI,{en:"hollow nozuchi",zh:""}],[U.KAZEMATOI,{en:"kazematoi",zh:""}],[U.MEISUI,{en:"meisui",zh:""}],[U.DOKUMORI,{en:"dokumori",zh:""}],[U.TRICK_ATTACK,{en:"trick attack",zh:""}],[U.KUNAIS_BANE,{en:"kunai's bane",zh:""}],[U.BROTHERHOOD,{en:"brotherhood",zh:""}],[U.RIDDLE_OF_FIRE,{en:"riddle of fire",zh:""}],[U.MNK_BALL,{en:"ball",zh:""}],[U.SSS_CHAKRA,{en:"chakra",zh:""}],[U.DIVINATION,{en:"divination",zh:""}],[U.HUNTERS_INSTINCT,{en:"hunter's instinct",zh:""}],[U.HONED,{en:"honed"}],[U.VENOM,{en:"venom"}],[U.POISED,{en:"poised"}],[U.CHAIN_STRAT,{en:"chain stratagem",zh:""}],[U.NO_CDH,{en:"no crit/direct hit",zh:""}]]);function lp(e){return console.assert(op.has(e),`modifier ${e} doesn't have a name!`),N(op.get(e)??{en:"unknown"})}const sp=new Map([[U.AF3,{en:"AF3",zh:""}],[U.AF2,{en:"AF2",zh:""}],[U.AF1,{en:"AF1",zh:""}],[U.UI3,{en:"UI3",zh:""}],[U.UI2,{en:"UI2",zh:""}],[U.UI1,{en:"UI1",zh:""}],[U.ENO,{en:"ENO",zh:""}],[U.POT,{en:"pot",zh:""}],[U.PARTY,{en:"party",zh:""}],[U.AUTO_CDH,{en:"CDH",zh:""}],[U.STARRY,{en:"STARRY",zh:""}],[U.EMBOLDEN_M,{en:"MB",zh:""}],[U.ACCELERATION,{en:"ACC",zh:""}],[U.STANDARD_SINGLE,{en:"SSF",zh:""}],[U.STANDARD_DOUBLE,{en:"DSF",zh:""}],[U.TECHNICAL_SINGLE,{en:"STF",zh:""}],[U.TECHNICAL_DOUBLE,{en:"DTF",zh:""}],[U.TECHNICAL_TRIPLE,{en:"TTF",zh:""}],[U.TECHNICAL_QUADRUPLE,{en:"QTF",zh:""}],[U.DEVILMENT,{en:"DEV",zh:""}],[U.OVERHEATED,{en:"OVERHEATED",zh:""}],[U.COMBO,{en:"CMB",zh:""}],[U.FUGETSU,{en:"FGS",zh:""}],[U.AUTO_CRIT,{en:"CRIT",zh:""}],[U.YATEN,{en:"ENH",zh:""}],[U.POSITIONAL,{en:"PS",zh:""}],[U.ARCANE_CIRCLE,{en:"AC",zh:""}],[U.DEATHSDESIGN,{en:"DD",zh:""}],[U.ENHANCED_GIBBET_GALLOWS,{en:"E. GIB/GAL",zh:"/"}],[U.ENHANCED_REAPING,{en:"E. REAPING",zh:"/"}],[U.IMMORTAL_SACRIFICE,{en:"IMMORTAL SAC",zh:""}],[U.BARRAGE,{en:"BRG"}],[U.RAGING_STRIKES,{en:"RS"}],[U.BATTLE_VOICE,{en:"BV"}],[U.RADIANT_FINALE_THREE_CODA,{en:"RF3"}],[U.RADIANT_FINALE_TWO_CODA,{en:"RF2"}],[U.RADIANT_FINALE_ONE_CODA,{en:"RF1"}],[U.WANDERERS_MINUET,{en:"WM"}],[U.MAGES_BALLAD,{en:"MB"}],[U.ARMYS_PAEON,{en:"AP"}],[U.NO_MERCY,{en:"NM",zh:""}],[U.SEARING_LIGHT,{en:"SL",zh:""}],[U.SURGING_TEMPEST,{en:"SURGING",zh:""}],[U.POWER_SURGE,{en:"PWS"}],[U.LANCE_CHARGE,{en:"LC"}],[U.LIFE_OF_THE_DRAGON,{en:"LIFE"}],[U.ENHANCED_PIERCING_TALON,{en:"ENH"}],[U.LIFE_SURGE,{en:"LS"}],[U.BATTLE_LITANY,{en:"BL"}],[U.DIVINE_MIGHT,{en:"DM",zh:""}],[U.REQUIESCAT,{en:"REQ",zh:""}],[U.FIGHT_OR_FLIGHT,{en:"FOF",zh:""}],[U.PET,{en:"PET",zh:""}],[U.WHISTLE,{en:"WH",zh:""}],[U.BRISTLE,{en:"BR",zh:""}],[U.MOON_FLUTE,{en:"MF",zh:""}],[U.TINGLEA,{en:"TING",zh:""}],[U.TINGLEB,{en:"TING",zh:""}],[U.WINGED_REPROBATION,{en:"WREP",zh:""}],[U.WINGED_REDEMPTION,{en:"WRED",zh:""}],[U.DARKSIDE,{en:"DS",zh:""}],[U.BUNSHIN,{en:"BUN",zh:""}],[U.KASSATSU,{en:"KASS",zh:""}],[U.HOLLOW_NOZUCHI,{en:"NOZ",zh:""}],[U.KAZEMATOI,{en:"KAZ",zh:""}],[U.MEISUI,{en:"MEI",zh:""}],[U.DOKUMORI,{en:"DOKU",zh:""}],[U.TRICK_ATTACK,{en:"TRICK",zh:""}],[U.KUNAIS_BANE,{en:"KB",zh:""}],[U.BROTHERHOOD,{en:"BH",zh:""}],[U.RIDDLE_OF_FIRE,{en:"ROF",zh:""}],[U.MNK_BALL,{en:"BALL",zh:""}],[U.SSS_CHAKRA,{en:"CHAKRA",zh:""}],[U.DIVINATION,{en:"DIV",zh:""}],[U.HUNTERS_INSTINCT,{en:"HI",zh:""}],[U.HONED,{en:"HONED"}],[U.VENOM,{en:"VENOM"}],[U.POISED,{en:"POISED"}],[U.CHAIN_STRAT,{en:"CHAIN",zh:""}],[U.NO_CDH,{en:"NO CDH",zh:""}]]);function iH(e){return console.assert(sp.has(e),`modifier ${e} doesn't have a tag name!`),N(sp.get(e)??{en:"unknown"})}const aC=navigator.language==="zh-CN"||navigator.language==="zh"?"zh":"en";let Mi=()=>Rt("language")||aC;function rp(e){let t="English";e.lang==="zh"&&(t=""),e.lang==="ja"&&(t="");const a=Tt();return l.jsx("div",{style:{display:"inline-block",cursor:"pointer",textDecoration:e.lang===Mi()?"none":"underline",borderTop:e.lang===Mi()?"1px solid "+a.text:"none"},onClick:()=>{e.setCurrentLanguage(e.lang)},children:t})}function oH(){const e=Rt("language"),t=e!==null&&["zh","ja","en"].includes(e)?e:aC,[a,o]=C.useState(t),s=c=>{o(c),St("language",c)};return C.useEffect(()=>(Mi=()=>a,()=>{Mi=()=>a})),C.useEffect(()=>{I.updateAllDisplay()},[a]),l.jsxs("div",{style:{display:"inline-block"},children:[l.jsx("span",{style:{display:"inline-block",fontSize:17,position:"relative",marginRight:2},children:l.jsx(Kx,{})}),l.jsxs("div",{style:{display:"inline-block",fontSize:14,verticalAlign:"top"},children:[l.jsx(rp,{lang:"en",setCurrentLanguage:s}),"|",l.jsx(rp,{lang:"zh",setCurrentLanguage:s})]})]})}const iC=le()({UNIMPLEMENTED:{},OUTDATED:{label:{en:"Outdated",zh:""},warningContent:{en:"WARNING: This job recently had significant changes, and may not have been fully updated to reflect them. Exported plans may not load correctly following these changes, so be cautious about relying on them until the job has been fully updated.",zh:"bugtxt"}},TESTING:{label:{en:"Testing",zh:""},warningContent:{en:"WARNING: This job was recently added to XIV in the Shell and is still being tested. There may be bugs or changes in the near future, so make sure to frequently export and save timelines for this job to make sure you don't lose your work.",zh:"txt"}},LIVE:{}});le()({TANK:{label:N({en:"Tank"})},HEALER:{label:N({en:"Healer"})},MELEE:{label:N({en:"Melee"})},RANGED:{label:N({en:"Ranged"})},CASTER:{label:N({en:"Caster"})},LIMITED:{label:N({en:"Limited"})}});const oC=le()({PLD:{role:"TANK",implementationLevel:"TESTING",usesMp:!0,limitBreak:"LAST_BASTION",limitBreakBuff:"LAST_BASTION",mainStat:"strength",zh:""},WAR:{role:"TANK",implementationLevel:"LIVE",limitBreak:"LAND_WAKER",limitBreakBuff:"LAND_WAKER",mainStat:"strength",zh:""},DRK:{role:"TANK",implementationLevel:"LIVE",usesMp:!0,limitBreak:"DARK_FORCE",limitBreakBuff:"DARK_FORCE",mainStat:"strength",zh:""},GNB:{role:"TANK",implementationLevel:"LIVE",limitBreak:"GUNMETAL_SOUL",limitBreakBuff:"GUNMETAL_SOUL",mainStat:"strength",zh:""}}),aT=le()({WHM:{role:"HEALER",implementationLevel:"TESTING",usesMp:!0,limitBreak:"PULSE_OF_LIFE",mainStat:"mind",zh:""},SCH:{role:"HEALER",implementationLevel:"TESTING",usesMp:!0,limitBreak:"ANGEL_FEATHERS",mainStat:"mind",zh:""},AST:{role:"HEALER",implementationLevel:"TESTING",usesMp:!0,limitBreak:"ASTRAL_STASIS",mainStat:"mind",zh:""},SGE:{role:"HEALER",implementationLevel:"TESTING",usesMp:!0,limitBreak:"TECHNE_MAKRE",mainStat:"mind",zh:""}}),lC=le()({MNK:{role:"MELEE",implementationLevel:"LIVE",limitBreak:"FINAL_HEAVEN",mainStat:"strength",zh:""},DRG:{role:"MELEE",implementationLevel:"LIVE",limitBreak:"DRAGONSONG_DIVE",mainStat:"strength",zh:""},NIN:{role:"MELEE",implementationLevel:"LIVE",limitBreak:"CHIMATSURI",mainStat:"dexterity",zh:""},SAM:{role:"MELEE",implementationLevel:"LIVE",limitBreak:"DOOM_OF_THE_LIVING",mainStat:"strength",zh:""},RPR:{role:"MELEE",implementationLevel:"LIVE",limitBreak:"THE_END",mainStat:"strength",zh:""},VPR:{role:"MELEE",implementationLevel:"LIVE",limitBreak:"WORLD_SWALLOWER",mainStat:"dexterity",zh:""}}),sC=le()({BRD:{role:"RANGED",implementationLevel:"LIVE",limitBreak:"SAGITTARIUS_ARROW",mainStat:"dexterity",zh:""},MCH:{role:"RANGED",implementationLevel:"LIVE",limitBreak:"SATELLITE_BEAM",mainStat:"dexterity",zh:""},DNC:{role:"RANGED",implementationLevel:"LIVE",limitBreak:"CRIMSON_LOTUS",mainStat:"dexterity",zh:""}}),rC=le()({BLM:{role:"CASTER",implementationLevel:"LIVE",usesMp:!0,limitBreak:"METEOR",mainStat:"intelligence",zh:""},SMN:{role:"CASTER",implementationLevel:"LIVE",usesMp:!0,limitBreak:"TERAFLARE",mainStat:"intelligence",zh:""},RDM:{role:"CASTER",implementationLevel:"LIVE",usesMp:!0,limitBreak:"VERMILLION_SCOURGE",mainStat:"intelligence",zh:""},PCT:{role:"CASTER",implementationLevel:"LIVE",usesMp:!0,limitBreak:"CHROMATIC_FANTASY",mainStat:"intelligence",zh:""}}),cC=le()({BLU:{role:"LIMITED",implementationLevel:"TESTING",usesMp:!0,mainStat:"intelligence",zh:""}}),dt={...oC,...aT,...lC,...sC,...rC,...cC,...le()({NEVER:{role:"LIMITED",implementationLevel:"UNIMPLEMENTED",usesMp:!1,mainStat:"strength",zh:""}})},us=Object.keys(dt),Ea=Object.keys(oC),Ri=Object.keys(aT),oa=Object.keys(lC),pl=Object.keys(sC),Ti=Object.keys(rC),Nl=Object.keys(cC);var ca=(e=>(e[e.ManaGain=0]="ManaGain",e[e.MpTick=1]="MpTick",e[e.LucidTick=2]="LucidTick",e[e.MeditateTick=3]="MeditateTick",e[e.AutoTick=4]="AutoTick",e))(ca||{});class Oe{name;#e;timeTillEvent;delay;effectFn;canceled;constructor(t,a,o){this.name=t,this.#e=[],this.timeTillEvent=a,this.delay=a,this.effectFn=o,this.canceled=!1}hasTag(t){for(let a=0;a<this.#e.length;a++)if(t===this.#e[a])return!0;return!1}addTag(t){this.hasTag(t)||this.#e.push(t)}}class uC{maxValue;currentValue;constructor(t,a){this.maxValue=t,this.currentValue=a}availableAmount(){return this.currentValue}consume(t){this.currentValue<t-Tn.epsilon&&console.warn(`invalid resource consumption: ${this.type}, ${this.currentValue} - ${t}`),this.currentValue=Math.max(this.currentValue-t,0)}gain(t){this.currentValue=Math.min(this.currentValue+t,this.maxValue)}overrideCurrentValue(t){(t<0||t>this.maxValue)&&console.warn(`invalid resource value override: ${this.type}, ${t} should be in [0, ${this.maxValue}]`),this.currentValue=t}}class pn extends uC{type;enabled;warnOnOvercap;pendingChange;#e;constructor(t,a,o,s=!1){super(a,o),this.type=t,this.enabled=!0,this.warnOnOvercap=s}available(t){return this.availableAmount()+Tn.epsilon>=t}availableAmountIncludingDisabled(){return this.currentValue}availableAmount(){return this.enabled?super.availableAmount():0}gain(t){this.warnOnOvercap&&this.currentValue+t>this.maxValue&&I.reportWarning({kind:"overcap",rsc:this.type}),super.gain(t)}gainWrapping(t){this.currentValue=(this.currentValue+t)%(this.maxValue+1)}overrideTimer(t,a){this.pendingChange?(t.addEvent(new Oe("override "+this.pendingChange.name+" timer: "+a,0,()=>{this.pendingChange&&(this.pendingChange.timeTillEvent=a)})),this.pendingChange.timeTillEvent=a):console.error(`Failed to override non-pending resource timer for resource: ${this.type}`)}removeTimer(){this.pendingChange&&(this.pendingChange.canceled=!0,this.pendingChange=void 0)}getLastExpirationTime(){return this.#e}consume(t){super.consume(t),this.currentValue===0&&(this.#e=I.game.getDisplayTime())}}class Ue extends uC{type;#e;#t;#n;constructor(t,a,o,s){super(o,s),this.type=t,this.#e=a,this.#t=a,this.#n=0}currentStackCd(){return this.#t}maxStacks(){return this.maxValue}useStack(){this.stacksAvailable()===this.maxStacks()&&(this.#n=this.#t),super.consume(1)}useStackWithRecast(t){console.assert(this.maxStacks()===1,"class CoolDown assumes special recasts are only available for skills with at most 1 stack"),this.#t=t,this.useStack()}restore(t){for(;t>0&&super.availableAmount()<this.maxStacks();){const a=Math.min(this.#n,t);this.#n-=a,this.#n<Tn.epsilon&&(super.gain(1),this.#t=this.#e,this.stacksAvailable()<this.maxStacks()&&(this.#n+=this.#e)),t-=a}}timeTillNextStackAvailable(){return this.#n}overrideTimeTillNextStack(t){this.#n=t}stacksAvailable(){return super.availableAmount()}}class lH{game;#e;constructor(t){this.game=t,this.#e=new Map}forEach(t){this.#e.forEach(t)}get(t){const a=this.#e.get(t);return a||(console.assert(!1,`no cooldown for resource ${t}`),new Ue("NEVER",0,0,0))}set(t){this.#e.set(t.type,t)}tick(t){for(const a of this.#e.values())a.restore(t)}timeTillNextStackAvailable(t){return this.get(t).timeTillNextStackAvailable()}timeTillAnyStackAvailable(t){const a=this.get(t);return a.stacksAvailable()>0?0:a.timeTillNextStackAvailable()}}class sH{game;#e;constructor(t){this.game=t,this.#e=new Map}get(t){const a=this.#e.get(t);return a||(console.error(`could not find resource ${t}`),new pn("NEVER",0,0))}set(t){this.#e.set(t.type,t)}timeTillReady(t){const a=this.get(t);return a.pendingChange?a.pendingChange.timeTillEvent:0}addResourceEvent(t){const a=this.get(t.rscType),o=new Oe(t.name,t.delay,()=>{a.pendingChange=void 0,t.fnOnRsc(a)});a.pendingChange=o,t.tags&&t.tags.forEach(s=>{o.addTag(s)}),this.game.addEvent(o)}takeResourceLock(t,a){this.get(t).consume(1),this.addResourceEvent({rscType:t,name:"[resource ready] "+t,delay:a,fnOnRsc:o=>{o.gain(1)}})}}class rH{game;#e;constructor(t){this.game=t,this.#e=Array(bi).fill(0).map(()=>new Map)}initialize(t){const a=Ut(this.game.job,t);for(let o=0;o<bi;o++){const s=new pn(t,a.maxValue,a.defaultValue,a.warnOnOvercap);s.tickCount=0,this.#e[o].set(t,s)}}hasAny(t){return this.#e.some(a=>a.has(t))}hasAnyActive(t){return this.#e.some(a=>a.get(t)?.available(1))}get(t,a){if(a<1||a>bi){console.error("targetNumber "+a+" is out of range");const s=new pn("NEVER",0,0);return s.tickCount=0,s}const o=this.#e[a-1].get(t);if(o)return o;{console.error(`could not find debuff ${t}`);const s=new pn("NEVER",0,0);return s.tickCount=0,s}}set(t,a){if(a<1||a>bi){console.error("targetNumber "+a+" is out of range");return}this.#e[a-1].set(t.type,t)}timeTillExpiry(t,a){if(a<1||a>bi)return console.error("targetNumber "+a+" is out of range"),0;const o=this.get(t,a);return o.pendingChange?o.pendingChange.timeTillEvent:0}addDebuffEvent(t){const a=this.get(t.rscType,t.targetNumber),o=new Oe(t.name,t.delay,()=>{a.pendingChange=void 0,t.fnOnRsc(a)});a.pendingChange=o,t.tags&&t.tags.forEach(s=>{o.addTag(s)}),this.game.addEvent(o)}}const Uh=new Map,dC=new Map,hC=new Map,fC=new Map;function cp(e){return dC.get(e.toLowerCase())??hC.get(e)??fC.get(e)}function Ut(e,t){const a=Uh.get(e);return a.has(t)||console.error(`no resource info found for ${t}`),a.get(t)}function Qi(e){return Uh.has(e)||console.error("could not find resources for job "+e),Uh.get(e)}function Ve(e,t,a,o){Qi(e).set(t,{isCoolDown:!1,defaultValue:o.default??0,maxValue:a,maxTimeout:o.timeout??-1,warnOnOvercap:o.warnOnOvercap??!1,warnOnTimeout:o.warnOnTimeout??!1});const s=Ge[t].label;dC.set(Ge[t].name.toLowerCase(),t),s?.zh!==void 0&&hC.set(s.zh,t),s?.ja!==void 0&&fC.set(s.ja,t)}us.forEach(e=>{Uh.set(e,new Map([["cd_GCD",{isCoolDown:!0,maxStacks:1,cdPerStack:2.5}]])),Ve(e,"IN_COMBAT",1,{default:0}),Ve(e,"MANA",1e4,{default:1e4}),Ve(e,"TINCTURE",1,{timeout:30}),Ve(e,"SPRINT",1,{timeout:10}),Ve(e,"PARTY_SIZE",8,{default:8}),Ve(e,"AUTOS_ENGAGED",1,{default:0}),Ve(e,"STORED_AUTO",1,{default:0})});oa.forEach(e=>{Ve(e,"REAR_POSITIONAL",1,{default:1}),Ve(e,"FLANK_POSITIONAL",1,{default:1})});function Eu(e,t,a,o=1){Qi(e).set(t,{isCoolDown:!0,cdPerStack:a,maxStacks:o})}class iT{type;timeTillFullOrDrop;stacks;effectOrTimerEnabled;constructor(t){this.type=t.type,this.timeTillFullOrDrop=t.timeTillFullOrDrop,this.stacks=t.stacks,this.effectOrTimerEnabled=t.effectOrTimerEnabled}equals(t){return this.type===t.type&&this.timeTillFullOrDrop===t.timeTillFullOrDrop&&this.stacks===t.stacks&&this.effectOrTimerEnabled===t.effectOrTimerEnabled}static fromGameState(t){const a=[];return t.cooldowns.forEach((o,s)=>{o.availableAmount(),a.push(new iT({type:s,timeTillFullOrDrop:o.maxValue-o.availableAmount(),stacks:0,effectOrTimerEnabled:!0}))}),a}applyTo(t){const a=Qi(t.job).get(this.type);if(!a){console.assert(!1,`can't apply override ${this.type} to job ${t.job}`);return}if(a.isCoolDown){const o=t.cooldowns.get(this.type),s=o.maxStacks()*o.currentStackCd()-this.timeTillFullOrDrop,c=Math.floor((s+Tn.epsilon)/o.currentStackCd()),d=this.timeTillFullOrDrop%o.currentStackCd();o.overrideCurrentValue(c),o.overrideTimeTillNextStack(d)}else{const o=t.resources.get(this.type),s=c=>{o.removeTimer(),t.resources.addResourceEvent({rscType:o.type,name:"drop "+o.type,delay:c,fnOnRsc:d=>{o.type==="ENOCHIAN"?t.loseEnochian():d.consume(d.availableAmount())}})};if(o.type==="LEY_LINES")o.consume(o.availableAmount()),o.gain(1),s(this.timeTillFullOrDrop),o.enabled=this.effectOrTimerEnabled;else if(o.type==="POLYGLOT"){const c=this.stacks;o.consume(o.availableAmount()),o.gain(c);const d=this.timeTillFullOrDrop;d>0&&o.overrideTimer(t,d)}else{const c=this.stacks;o.consume(o.availableAmount()),o.gain(c);const d=this.timeTillFullOrDrop;c>0&&a.maxTimeout>=0&&s(d)}}}serialized(){return{type:this.type,timeTillFullOrDrop:this.timeTillFullOrDrop,stacks:this.stacks,effectOrTimerEnabled:this.effectOrTimerEnabled}}}const Wt=.8,ma=.01;function mu(e,t){}function Le(e,...t){return(a,o)=>{e!==void 0&&e(a,o);for(const s of t)s!==void 0&&s(a,o)}}function bu(e,...t){return a=>(e===void 0||e(a))&&t.every(o=>o===void 0||o(a))}const ds=new Map,oT=new Map;us.forEach(e=>{ds.set(e,new Map),oT.set(e,new Map)});const Ph=new Map,Af="General/Missing.png",Li=new Map;Li.set(ZR.ENERGY_DRAIN.id,"ENERGY_DRAIN");Li.set(ZR.PHYSICK.id,"PHYSICK");Li.set($N.MOUNTAIN_BUSTER.id,"MOUNTAIN_BUSTER");Li.set(45960,"ENCHANTED_RIPOSTE");Li.set(45961,"ENCHANTED_ZWERCHHAU");Li.set(45962,"ENCHANTED_REDOUBLEMENT");Li.set(18805,"TEN");Li.set(18806,"CHI");Li.set(18807,"JIN");const up=new Set,JA=new Map,EC=new Map,mC=new Map,dp=new Map([["Lightning Shock","Lightning Shot"],["Wanderer's Minuet","The Wanderer's Minuet"],["Apex Arow","Apex Arrow"],["Storms Eye","Storm's Eye"],["Storms Path","Storm's Path"]]);function lT(e){return dp.has(e)&&(e=dp.get(e)),e=e.toLowerCase(),!JA.has(e)&&!up.has(e)&&(console.error(`could not find skill with name: ${e}`),up.add(e)),JA.get(e)}function cH(e){return e in Ge?e:kh.findResourceKey(e)}function Wi(e,t){return ds.get(e).get(t)}function AC(e){return Ph.get(e)??Af}function uH(e,t){return ds.get(e).has(t)}function Rf(e,t,a){ds.get(e).set(t,a),oT.get(e).set(_n[t].discordEmote??_n[t].name.replaceAll(" ",""),t),JA.set(_n[t].name.toLowerCase(),t);const o=_n[t].label;o?.zh!==void 0&&EC.set(o.zh,t),o?.ja!==void 0&&mC.set(o.ja,t),Ph.set(t,a.assetPath),_n[t].id!==void 0&&Li.set(_n[t].id,t)}function da(e,t){return e===void 0?a=>t||0:typeof e=="number"?a=>e:e}function dH(e){return console.assert(e.length>0,`invalid trait potency array: ${e}`),t=>{let a;const o=t.config.level;for(const[s,c]of e)t.hasTraitUnlocked(s)&&(a=c);return console.assert(a!==void 0,`no applicable potency at level ${o} found in array ${e}`),a||0}}function an(e,t){return(Array.isArray(t)?dH(t):da(t,0))(e)}function sT(e,t){const a=_n[t].name;return`${e}/${a.replace(":","")}.png`}function Xa(e,t,a,o){Array.isArray(e)||(e=[e]);const s=Le((h,m)=>m.applicationTime=h.time,o.onApplication),c=Le(h=>h.maybeCancelChanneledSkills(t),o.onExecute),d=h=>{const m=[];return o.potency&&(o.combo||o.positional)&&m.push(...h.computeComboAndPositionalModifiers(an(h,o.potency),o.combo,o.positional)),o.jobPotencyModifiers&&m.push(...o.jobPotencyModifiers(h)),m},f={kind:"spell",name:t,assetPath:o.assetPath??(e.length===1?sT(e[0],t):Af),unlockLevel:a,autoUpgrade:o.autoUpgrade,autoDowngrade:o.autoDowngrade,cdName:"cd_GCD",secondaryCd:o.secondaryCooldown,aspect:o.aspect??Ie.Other,replaceIf:o.replaceIf??[],startOnHotbar:o.startOnHotbar??!0,highlightIf:o.highlightIf??(h=>!1),castTimeFn:da(o.castTime,0),recastTimeFn:da(o.recastTime,2.5),animationLockFn:h=>da(o.animationLock,h.config.animationLock)(h),manaCostFn:da(o.manaCost,0),potencyFn:h=>an(h,o.potency),jobPotencyModifiers:d,jobTargetPotencyModifiers:o.jobTargetPotencyModifiers??(h=>new Map),drawsAggro:o.drawsAggro??!1,savesTargets:o.savesTargets??!1,falloff:o.falloff,healingPotencyFn:h=>an(h,o.healingPotency),jobHealingPotencyModifiers:o.jobHealingPotencyModifiers??(h=>[]),aoeHeal:o.aoeHeal??!1,validateAttempt:o.validateAttempt??(h=>!0),isInstantFn:o.isInstantFn??(h=>!1),onExecute:c,onConfirm:o.onConfirm??mu,onApplication:s,applicationDelay:o.applicationDelay??0,startsAuto:o.startsAuto??!1};if(e.forEach(h=>Rf(h,f.name,f)),o.secondaryCooldown!==void 0){const{cdName:h,cooldown:m,maxCharges:R}=o.secondaryCooldown;e.forEach(T=>Eu(T,h,m,R))}return f}function on(e,t,a,o){Array.isArray(e)||(e=[e]);const s=Le((h,m)=>m.applicationTime=h.time,o.onApplication),c=Le(h=>h.maybeCancelChanneledSkills(t),o.onExecute),d=h=>{const m=[];return o.potency&&(o.combo||o.positional)&&m.push(...h.computeComboAndPositionalModifiers(an(h,o.potency),o.combo,o.positional)),o.jobPotencyModifiers&&m.push(...o.jobPotencyModifiers(h)),m},f={kind:"weaponskill",name:t,assetPath:o.assetPath??(e.length===1?sT(e[0],t):Af),unlockLevel:a,autoUpgrade:o.autoUpgrade,autoDowngrade:o.autoDowngrade,cdName:"cd_GCD",secondaryCd:o.secondaryCooldown,aspect:o.aspect??Ie.Other,replaceIf:o.replaceIf??[],startOnHotbar:o.startOnHotbar??!0,highlightIf:o.highlightIf??(h=>!1),castTimeFn:da(o.castTime,0),recastTimeFn:da(o.recastTime,2.5),animationLockFn:h=>da(o.animationLock,h.config.animationLock)(h),manaCostFn:da(o.manaCost,0),potencyFn:h=>an(h,o.potency),jobPotencyModifiers:d,jobTargetPotencyModifiers:o.jobTargetPotencyModifiers??(h=>new Map),drawsAggro:o.drawsAggro??!1,savesTargets:o.savesTargets??!1,falloff:o.falloff,healingPotencyFn:h=>an(h,o.healingPotency),jobHealingPotencyModifiers:o.jobHealingPotencyModifiers??(h=>[]),aoeHeal:o.aoeHeal??!1,validateAttempt:o.validateAttempt??(h=>!0),isInstantFn:o.isInstantFn??(h=>!0),onExecute:c,onConfirm:o.onConfirm??mu,onApplication:s,applicationDelay:o.applicationDelay??0,startsAuto:o.startsAuto??!0};if(e.forEach(h=>Rf(h,f.name,f)),o.secondaryCooldown!==void 0){const{cdName:h,cooldown:m,maxCharges:R}=o.secondaryCooldown;e.forEach(T=>Eu(T,h,m,R))}return f}function at(e,t,a,o,s){Array.isArray(e)||(e=[e]);const c=Le((m,R)=>R.applicationTime=m.time,s.onApplication),d=Le(m=>m.maybeCancelChanneledSkills(t),s.onExecute),f=bu(m=>s.requiresCombat?m.isInCombat():!0,s.validateAttempt??(m=>!0)),h={kind:"ability",name:t,assetPath:s.assetPath??(e.length===1?sT(e[0],t):Af),requiresCombat:s.requiresCombat,unlockLevel:a,autoUpgrade:s.autoUpgrade,autoDowngrade:s.autoDowngrade,cdName:o,secondaryCd:s.secondaryCooldown,aspect:s.aspect??Ie.Other,replaceIf:s.replaceIf??[],startOnHotbar:s.startOnHotbar??!0,highlightIf:s.highlightIf??(m=>!1),animationLockFn:m=>da(s.animationLock,m.config.animationLock)(m),manaCostFn:da(s.manaCost,0),potencyFn:m=>an(m,s.potency),jobPotencyModifiers:s.jobPotencyModifiers??(m=>[]),jobTargetPotencyModifiers:s.jobTargetPotencyModifiers??(m=>new Map),drawsAggro:s.drawsAggro??!1,savesTargets:s.savesTargets??!1,falloff:s.falloff,healingPotencyFn:m=>an(m,s.healingPotency),jobHealingPotencyModifiers:s.jobHealingPotencyModifiers??(m=>[]),aoeHeal:s.aoeHeal??!1,applicationDelay:s.applicationDelay??0,validateAttempt:f,onExecute:d,onConfirm:s.onConfirm??mu,onApplication:c,startsAuto:s.startsAuto??!1};if(e.forEach(m=>Rf(m,h.name,h)),s.cooldown!==void 0&&e.forEach(m=>Eu(m,o,s.cooldown,s.maxCharges??1)),s.secondaryCooldown!==void 0){const{cdName:m,cooldown:R,maxCharges:T}=s.secondaryCooldown;e.forEach(S=>Eu(S,m,R,T))}return h}function Ye(e,t,a,o,s){const c=Le((d,f)=>{const h=d.resources.get(s.rscType),m=s.duration??Ut(d.job,s.rscType).maxTimeout,R=typeof m=="number"?T=>m:m;h.gain(h.maxValue),d.enqueueResourceDrop(s.rscType,R(d))},s?.onApplication);return at(e,t,a,o,{...s,onApplication:c})}function Aa(e,t,a,o){Array.isArray(e)||(e=[e]);const s="Limit Break "+o.tier,c=Le(f=>f.maybeCancelChanneledSkills(t),o.onExecute),d={kind:"limitbreak",name:t,animationLockFn:f=>o.animationLock,assetPath:`General/${s}.png`,unlockLevel:1,autoUpgrade:void 0,autoDowngrade:void 0,cdName:a,secondaryCd:void 0,aspect:Ie.Other,replaceIf:[],startOnHotbar:!0,castTimeFn:da(o.castTime,0),highlightIf:f=>!1,manaCostFn:f=>0,potencyFn:da(o.potency,0),jobPotencyModifiers:f=>[],jobTargetPotencyModifiers:f=>new Map,healingPotencyFn:da(o.healingPotency,0),jobHealingPotencyModifiers:f=>[],aoeHeal:!1,drawsAggro:!1,savesTargets:!1,applicationDelay:o.applicationDelay??0,validateAttempt:o.validateAttempt??(f=>!0),onExecute:c,onConfirm:o.onConfirm??mu,onApplication:o.onApplication??mu,startsAuto:!1};return e.forEach(f=>Rf(f,d.name,d)),e.forEach(f=>Eu(f,a,(o.castTime??0)+o.animationLock,1)),d}class hH{job;constructor(t){this.job=t.job}get(t){const a=ds.get(this.job).get(t);return a||(console.error(`creating placeholder skill ${t} for ${this.job}`),at([this.job],t,1,"NEVER",{validateAttempt:o=>!1}))}}function Pr(e,t,a){let o=Wi(e,t);for(;o.autoUpgrade&&qN(o.autoUpgrade.trait,a);)o=Wi(e,Pr(e,o.autoUpgrade.otherSkill,a));for(;o.autoDowngrade&&a<o.unlockLevel;)o=Wi(e,Pr(e,o.autoDowngrade.otherSkill,a));return o.name}function RC(e,t){const a=Wi(t.job,e);for(const o of a.replaceIf){if(o.newSkill===e)continue;const s=Wi(t.job,o.newSkill);if(!s)throw new Error("couldn't find skill info for "+o.newSkill);if(t.config.level>=s.unlockLevel&&o.condition(t))return Pr(t.job,o.newSkill,t.config.level)}return Pr(t.job,a.name,t.config.level)}class fH{#e;constructor(t,a){this.#e=[],console.assert(ds.has(t),`No skill map found for job: ${t}`);for(const s of ds.get(t).values())s.name!=="NEVER"&&s.cdName!=="NEVER"&&a>=s.unlockLevel&&s.autoDowngrade===void 0&&s.startOnHotbar&&this.#e.push(Pr(t,s.name,a));let o=Ph.get("TINCTURE");switch(dt[t].role){case"TANK":case"MELEE":t==="NIN"||t==="VPR"?o="Role/Dexterity Tincture.png":o="Role/Strength Tincture.png";break;case"HEALER":o="Role/Mind Tincture.png";break;case"LIMITED":case"CASTER":o="Role/Intelligence Tincture.png";break;case"RANGED":o="Role/Dexterity Tincture.png";break}Ph.set("TINCTURE",o)}getCurrentSkillNames(t){return this.#e.map(a=>RC(a,t))}}var ke=(e=>(e.Skill="Skill",e.Wait="Wait",e.JumpToTimestamp="JumpToTimestamp",e.WaitForMP="WaitForMP",e.SetResourceEnabled="SetResourceEnabled",e.Unknown="Unknown",e.Invalid="Invalid",e))(ke||{});function El(e,t){return new Va({type:"Skill",skillName:e,targetList:t??[1],healTargetCount:void 0})}function EH(e,t){return new Va({type:"Unknown",skillName:e,targetList:t??[1],healTargetCount:void 0})}function yr(e){return new Va({type:"Wait",waitDuration:e})}function dl(e){return new Va({type:"JumpToTimestamp",targetTime:e})}function TC(){return new Va({type:"WaitForMP"})}function eR(e,t){return new Va({type:"SetResourceEnabled",buffName:e,targetNumber:t})}class Va{#e;#t;#n;#a;#i;applicationTime;#c;#s;#r;#u;info;legacyWaitDuration;tmp_startLockTime;tmp_endLockTime;tmp_invalid_reasons;constructor(t,a){this.info=t,this.#e=new Set,this.#n=new Map,this.#i=new Map,this.#c=new Map,this.#s=new Map,this.#r=new Map,this.#u=new Map,this.legacyWaitDuration=a,this.tmp_invalid_reasons=[]}serialized(){return this.info.type==="Skill"?{type:"Skill",skillName:_n[this.info.skillName].name,targetList:this.info.targetList,healTargetCount:this.info.healTargetCount}:this.info.type==="SetResourceEnabled"?{type:"SetResourceEnabled",buffName:this.info.buffName.toString(),targetNumber:this.info.targetNumber}:this.info.type==="Unknown"?{type:"Skill",skillName:this.info.skillName,targetList:this.info.targetList,healTargetCount:this.info.healTargetCount}:this.info}toLocalizedString(){if(this.info.type==="Skill")return Wa(this.info.skillName);if(this.info.type==="SetResourceEnabled")return N({en:"toggle ",zh:""}).toString()+Ke(this.info.buffName);if(this.info.type==="Wait"){const t=this.info.waitDuration.toFixed(3);return N({en:`wait ${t}`,zh:`${t}`}).toString()}else{if(this.info.type==="WaitForMP")return N({en:"wait MP",zh:""}).toString();if(this.info.type==="JumpToTimestamp"){const t=this.info.targetTime.toFixed(3);return N({en:`jump ${t}`,zh:`${t}`}).toString()}}return"(unknown)"}maybeGetActionKey(){return this.info.type==="Skill"?this.info.skillName:void 0}get targetList(){return this.info.type==="Skill"?this.info.targetList.slice():[]}set targetList(t){this.info.type==="Skill"&&(this.info.targetList=t)}get healTargetCount(){return this.info.type==="Skill"?this.info.healTargetCount??0:0}getNameForMessage(){return this.info.type==="Skill"?_n[this.info.skillName].name:this.info.type.toString()}getClone(){return new Va(this.info,this.legacyWaitDuration)}addBuff(t){this.#e.add(t)}hasBuff(t){return this.#e.has(t)}hasPartyBuff(){const t=this.#t?.snapshotTime;return t!==void 0&&I.game.getPartyBuffs(t).size>0}getPartyBuffs(){const t=this.#t?.snapshotTime;return t?[...I.game.getPartyBuffs(t).keys()]:[]}forceOneTarget(){this.info.type==="Skill"&&(this.info.targetList=[this.info.targetList.length>0?this.info.targetList[0]:1])}setHealTargetCount(t){this.info.type==="Skill"&&(this.info.healTargetCount=t)}resolveAll(t){this.#t&&this.#t.resolve(t),this.#n.forEach(a=>{a.forEach(o=>{o.resolve(t)})})}resolved(){return this.applicationTime!==void 0}hitBoss(t){return this.#t?.hasHitBoss(t)??!0}getPotency(t){const a={applied:0,snapshottedButPending:0};return this.#t&&this.recordPotency(t,this.#t,a),t.excludeDoT||this.#n.forEach(o=>{o.forEach(s=>{this.recordPotency(t,s,a)})}),a}getHealingPotency(t){const a={applied:0,snapshottedButPending:0};return this.#a&&this.recordPotency(t,this.#a,a),t.excludeHoT||this.#i.forEach(o=>{o.forEach(s=>{this.recordPotency(t,s,a)})}),a}recordPotency(t,a,o){t.targetNumber!==void 0&&!a.hasTarget(t.targetNumber)||(a.hasHitBoss(t.untargetable)?o.applied+=a.getAmount(t):!a.hasResolved()&&a.hasSnapshotted()&&(o.snapshottedButPending+=a.getAmount(t)))}removeUnresolvedOvertimePotencies(t,a){(t==="damage"?this.#n:this.#i).forEach(s=>{for(let c=0;c<s.length;c++){const d=s[c];if(!d.hasResolved()&&(a!==void 0&&d.tryRemoveTarget(a),a===void 0||d.targetList.length===0)){s.splice(c);break}}})}anyPotencies(){return this.#t!==void 0||this.#n.size>0}anyHealingPotencies(){return this.#a!==void 0||this.#i.size>0}getInitialPotency(){return this.#t}getInitialHealingPotency(){return this.#a}getAllDotPotencies(){return this.getAllOverTimePotencies("damage")}getAllHotPotencies(){return this.getAllOverTimePotencies("healing")}getAllOverTimePotencies(t){return t==="damage"?this.#n:this.#i}getDotPotencies(t){return this.getOverTimePotencies(t,"damage")}getHotPotencies(t){return this.getOverTimePotencies(t,"healing")}getOverTimePotencies(t,a){return a==="damage"?this.#n.get(t)??[]:this.#i.get(t)??[]}addPotency(t){console.assert(!this.#t,`ActionNode for ${this.getNameForMessage()} already had an initial potency`),this.#t=t}addHealingPotency(t){console.assert(!this.#a,`ActionNode for ${this.getNameForMessage()} already had an initial healing potency`),this.#a=t}addDoTPotency(t,a){this.addOverTimePotency(t,a,"damage")}addHoTPotency(t,a){this.addOverTimePotency(t,a,"healing")}addOverTimePotency(t,a,o){const s=o==="damage"?this.#n:this.#i,c=s.get(a)??[];c.length===0&&s.set(a,c),c.push(t)}setOverTimeGap(t,a,o,s){this.setOverTimeMappedAmount(t,a,o,o==="damage"?this.#s:this.#u,s)}getOverTimeGap(t,a,o){return this.getOverTimeMappedAmount(t,a,a==="damage"?this.#s:this.#u,o)}setOverTimeOverrideAmount(t,a,o,s){this.setOverTimeMappedAmount(t,a,o,o==="damage"?this.#c:this.#r,s)}getOverTimeOverrideAmount(t,a,o){return this.getOverTimeMappedAmount(t,a,a==="damage"?this.#c:this.#r,o)}setOverTimeMappedAmount(t,a,o,s,c){s.has(t)||s.set(t,new Map),c!==void 0?s.get(t).set(c,a):this.getOverTimePotencies(t,o)[0].targetList?.forEach(f=>s.get(t).set(f,a))}getOverTimeMappedAmount(t,a,o,s){if(o.has(t)||o.set(t,new Map),s!==void 0)return o.get(t).get(s)??0;{const c=this.getOverTimePotencies(t,a)[0].targetList[0]??1;return o.get(t).get(c)??0}}}class wr{actions;name="(anonymous line)";constructor(){this.actions=[]}get length(){return this.actions.length}get head(){return this.length>0?this.actions[0]:void 0}get tail(){return this.length>0?this.actions[this.actions.length-1]:void 0}get tailIndex(){return this.length-1}prependActionNode(t){console.assert(t!==void 0),this.actions.unshift(t)}insertActionNodes(t,a){t.length>0&&this.actions.splice(a,0,...t)}addActionNode(t){console.assert(t!==void 0),this.actions.push(t)}iterateAll(t){this.actions.forEach(a=>t(a))}serialized(){return{name:this.name,actions:this.actions.map(t=>t.serialized())}}exportCsv(){return[]}static deserialize(t){const a=t.map(s=>{if(s.type==="Skill"){const c=lT(s.skillName),d="waitDuration"in s?s.waitDuration:void 0,f=s.targetCount!==void 0?Array(s.targetCount).fill(0).map((h,m)=>m+1):s.targetList??[1];return new Va(c!==void 0?{type:"Skill",skillName:c,targetList:f,healTargetCount:s.healTargetCount}:{type:"Unknown",skillName:s.skillName,targetList:f,healTargetCount:s.healTargetCount},d)}else if(s.type==="SetResourceEnabled"){const c="waitDuration"in s?s.waitDuration:void 0;return new Va({type:"SetResourceEnabled",buffName:cH(s.buffName),targetNumber:s.targetNumber??1},c)}else return s.type==="Wait"||s.type==="JumpToTimestamp"||s.type==="WaitForMP"?new Va(s):(window.alert("unparseable action: "+JSON.stringify(s)),new Va({type:"Invalid"}))}),o=new wr;return o.actions=a,o}}class Co extends wr{selectionStartIndex;selectionEndIndex;startIsPivot=!0;config;get selectionStart(){return this.selectionStartIndex!==void 0?this.actions[this.selectionStartIndex]:void 0}get selectionEnd(){return this.selectionEndIndex!==void 0?this.actions[this.selectionEndIndex]:void 0}getFirstSelection(){return this.selectionStart&&console.assert(this.selectionEnd!==void 0),this.selectionStart}getLastSelection(){return this.selectionEnd&&console.assert(this.selectionStart!==void 0),this.selectionEnd}isInSelection(t){return this.selectionStartIndex!==void 0&&this.selectionEndIndex!==void 0&&t>=this.selectionStartIndex&&t<=this.selectionEndIndex}iterateSelected(t){if(!(this.selectionStartIndex===void 0||this.selectionEndIndex===void 0))for(let a=this.selectionStartIndex;a<=this.selectionEndIndex;a++)t(this.actions[a])}getSelected(){const t=new wr;return this.selectionStartIndex!==void 0&&this.selectionEndIndex!==void 0&&(t.actions=this.actions.slice(this.selectionStartIndex,this.selectionEndIndex+1)),t}getSelectionLength(){return this.selectionStartIndex===void 0||this.selectionEndIndex===void 0?0:this.selectionEndIndex-this.selectionStartIndex+1}selectSingle(t){this.unselectAll(),this.selectionStartIndex=t,this.selectionEndIndex=t,this.startIsPivot=!0}unselectAll(){this.selectionStartIndex=void 0,this.selectionEndIndex=void 0,this.startIsPivot=!0}#e(t,a){this.unselectAll(),this.selectionStartIndex=t,this.selectionEndIndex=a}selectUntil(t){if(this.selectionStartIndex!==void 0&&this.selectionStartIndex===this.selectionEndIndex)this.selectionStartIndex<=t?(this.#e(this.selectionStartIndex,t),this.startIsPivot=!0):(this.#e(t,this.selectionStartIndex),this.startIsPivot=!1);else if(this.selectionStartIndex!==void 0&&this.selectionStartIndex!==this.selectionEndIndex){const a=this.startIsPivot?this.selectionStartIndex:this.selectionEndIndex;this.selectionStartIndex=a,this.selectionEndIndex=a,this.selectUntil(t)}}onClickNode(t,a){a&&this.selectionStartIndex!==void 0?this.selectUntil(t):this.selectionStartIndex===t&&this.selectionEndIndex===t?this.unselectAll():this.selectSingle(t)}moveSelected(t){if(t===0||this.selectionStartIndex===void 0||this.selectionEndIndex===void 0)return;const a=this.selectionStartIndex,o=this.getSelectionLength(),s=this.actions.splice(a,o);let c=a+t;return c=Math.max(c,0),c=Math.min(c,this.length),this.actions.splice(c,0,...s),this.selectionStartIndex=c,this.selectionEndIndex=c+o-1,c}deleteSelected(){if(this.selectionStartIndex===void 0||this.selectionEndIndex===void 0)return;const t=this.selectionStartIndex;return this.actions.splice(t,this.getSelectionLength()),this.unselectAll(),t}replaceNode(t,a){a>=0&&a<this.actions.length?this.actions[a]=t:console.error("invalid index for replaceNode",a)}serialized(){console.assert(this.config);const t=super.serialized();return{name:t.name,fileType:di.Record,config:this.config?.serialized(),actions:t.actions}}spliceUpTo(t){const a=this.selectionStartIndex,o=this.selectionEndIndex;this.unselectAll(),t<this.length&&this.actions.splice(t,this.length-t),a!==void 0&&(this.selectSingle(a),this.selectUntil(o))}getCloneWithSharedConfig(){const t=new Co;return t.config=this.config,t.actions=this.actions.map(a=>a.getClone()),t.selectionStartIndex=this.selectionStartIndex,t.selectionEndIndex=this.selectionEndIndex,t}}function mH(e){return l.jsxs("div",{style:{marginBottom:5,cursor:"pointer"},onClick:()=>{e.state===0&&e.onChange(e.state,2),e.state===1&&(console.error("Target select radio must be in PRIMARY or NONE state, but was in TARGETED. Defaulting to PRIMARY."),e.onChange(e.state,2))},children:[l.jsx("input",{className:"shellCheckbox"+(e.state===2?" checkbox-star":""),style:{cursor:"pointer"},type:"radio",role:"radio","aria-checked":e.state===2,checked:!1}),l.jsx("span",{children:e.i===0?N({en:"Boss 1",zh:"Boss 1"}):e.i+1})]})}function AH(e){return l.jsxs("div",{style:{marginBottom:5,cursor:"pointer"},onClick:()=>{e.state===0&&e.onChange(e.state,2),e.state===2&&e.onChange(e.state,1),e.state===1&&e.onChange(e.state,0)},children:[l.jsx("input",{className:"shellCheckbox"+(e.state===2?" checkbox-star":""),style:{cursor:"pointer"},type:"checkbox",onChange:()=>{},checked:e.state===1}),l.jsx("span",{children:e.i===0?N({en:"Boss 1",zh:"Boss 1"}):e.i+1})]})}function SC(e){const t=e.primaryOnly?mH:AH,a=e.selected.map((o,s)=>l.jsx(t,{i:s,state:e.primary===s?2:o?1:0,onChange:(c,d)=>{let f=e.selected.slice(),h=e.primary;if(d===0){if(f[s]=!1,f.filter(m=>m).length===0)return}else d===1?f[s]=!0:d===2&&c!==2&&(e.primaryOnly&&(f=Array(f.length).fill(!1)),f[s]=!0,e.onPrimaryChange?.(s),h=s);if(c===2&&d!==2){for(let m=0;m<f.length;m++)if(m!==s&&f[m]){e.onPrimaryChange?.(m),h=m;break}}e.onSelectedChange?.(f),e.onAnySelectionChange?.(h,f)}},s));return l.jsx("div",{style:{display:"grid",grid:"auto-flow / repeat(8, 1fr)",...e.style},children:a})}var qr=zN();function gC({controlled:e,default:t,name:a,state:o="value"}){const{current:s}=C.useRef(e!==void 0),[c,d]=C.useState(t),f=s?e:c,h=C.useCallback(m=>{s||d(m)},[]);return[f,h]}const hp={};function Zr(e,t){const a=C.useRef(hp);return a.current===hp&&(a.current=e(t)),a}const pA=xR[`useInsertionEffect${Math.random().toFixed(1)}`.slice(0,-3)],RH=pA&&pA!==C.useLayoutEffect?pA:e=>e();function lt(e){const t=Zr(TH).current;return t.next=e,RH(t.effect),t.trampoline}function TH(){const e={next:void 0,callback:SH,trampoline:(...t)=>e.callback?.(...t),effect:()=>{e.callback=e.next}};return e}function SH(){}const IC=C.createContext(void 0);function Tf(){const e=C.useContext(IC);if(e===void 0)throw new Error("Base UI: TooltipRootContext is missing. Tooltip parts must be placed within <Tooltip.Root>.");return e}const gH=[];function _C(e){C.useEffect(e,gH)}const au=0;class gl{static create(){return new gl}currentId=au;start(t,a){this.clear(),this.currentId=setTimeout(()=>{this.currentId=au,a()},t)}isStarted(){return this.currentId!==au}clear=()=>{this.currentId!==au&&(clearTimeout(this.currentId),this.currentId=au)};disposeEffect=()=>this.clear}function Gr(){const e=Zr(gl.create).current;return _C(e.disposeEffect),e}const IH=()=>{},Pt=typeof document<"u"?C.useLayoutEffect:IH;function Sf(){return typeof window<"u"}function Cl(e){return rT(e)?(e.nodeName||"").toLowerCase():"#document"}function Fn(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function eo(e){var t;return(t=(rT(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function rT(e){return Sf()?e instanceof Node||e instanceof Fn(e).Node:!1}function kt(e){return Sf()?e instanceof Element||e instanceof Fn(e).Element:!1}function Bn(e){return Sf()?e instanceof HTMLElement||e instanceof Fn(e).HTMLElement:!1}function tR(e){return!Sf()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Fn(e).ShadowRoot}const _H=new Set(["inline","contents"]);function Ou(e){const{overflow:t,overflowX:a,overflowY:o,display:s}=Ei(e);return/auto|scroll|overlay|hidden|clip/.test(t+o+a)&&!_H.has(s)}const pH=new Set(["table","td","th"]);function NH(e){return pH.has(Cl(e))}const CH=[":popover-open",":modal"];function gf(e){return CH.some(t=>{try{return e.matches(t)}catch{return!1}})}const bH=["transform","translate","scale","rotate","perspective"],OH=["transform","translate","scale","rotate","perspective","filter"],DH=["paint","layout","strict","content"];function cT(e){const t=If(),a=kt(e)?Ei(e):e;return bH.some(o=>a[o]?a[o]!=="none":!1)||(a.containerType?a.containerType!=="normal":!1)||!t&&(a.backdropFilter?a.backdropFilter!=="none":!1)||!t&&(a.filter?a.filter!=="none":!1)||OH.some(o=>(a.willChange||"").includes(o))||DH.some(o=>(a.contain||"").includes(o))}function yH(e){let t=Mo(e);for(;Bn(t)&&!yo(t);){if(cT(t))return t;if(gf(t))return null;t=Mo(t)}return null}function If(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const vH=new Set(["html","body","#document"]);function yo(e){return vH.has(Cl(e))}function Ei(e){return Fn(e).getComputedStyle(e)}function _f(e){return kt(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Mo(e){if(Cl(e)==="html")return e;const t=e.assignedSlot||e.parentNode||tR(e)&&e.host||eo(e);return tR(t)?t.host:t}function pC(e){const t=Mo(e);return yo(t)?e.ownerDocument?e.ownerDocument.body:e.body:Bn(t)&&Ou(t)?t:pC(t)}function ml(e,t,a){var o;t===void 0&&(t=[]),a===void 0&&(a=!0);const s=pC(e),c=s===((o=e.ownerDocument)==null?void 0:o.body),d=Fn(s);if(c){const f=nR(d);return t.concat(d,d.visualViewport||[],Ou(s)?s:[],f&&a?ml(f):[])}return t.concat(s,ml(s,[],a))}function nR(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Di(e){const t=Zr(MH,e).current;return t.next=e,Pt(t.effect),t}function MH(e){const t={current:e,next:e,effect:()=>{t.current=t.next}};return t}const Qr=typeof navigator<"u",NA=HH(),NC=UH(),CC=kH(),bC=typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter:none"),LH=NA.platform==="MacIntel"&&NA.maxTouchPoints>1?!0:/iP(hone|ad|od)|iOS/.test(NA.platform),OC=Qr&&/apple/i.test(navigator.vendor),aR=Qr&&/android/i.test(NC)||/android/i.test(CC),xH=Qr&&NC.toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints,DC=CC.includes("jsdom/");function HH(){if(!Qr)return{platform:"",maxTouchPoints:-1};const e=navigator.userAgentData;return e?.platform?{platform:e.platform,maxTouchPoints:navigator.maxTouchPoints}:{platform:navigator.platform??"",maxTouchPoints:navigator.maxTouchPoints??-1}}function kH(){if(!Qr)return"";const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(({brand:t,version:a})=>`${t}/${a}`).join(" "):navigator.userAgent}function UH(){if(!Qr)return"";const e=navigator.userAgentData;return e?.platform?e.platform:navigator.platform??""}const iR="data-base-ui-focusable",yC="active",vC="selected",PH="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function rl(e){let t=e.activeElement;for(;t?.shadowRoot?.activeElement!=null;)t=t.shadowRoot.activeElement;return t}function Rn(e,t){if(!e||!t)return!1;const a=t.getRootNode?.();if(e.contains(t))return!0;if(a&&tR(a)){let o=t;for(;o;){if(e===o)return!0;o=o.parentNode||o.host}}return!1}function Ya(e){return"composedPath"in e?e.composedPath()[0]:e.target}function No(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const a=e;return a.target!=null&&t.contains(a.target)}function wH(e){return e.matches("html,body")}function Gn(e){return e?.ownerDocument||document}function MC(e){return Bn(e)&&e.matches(PH)}function fp(e){return e?e.getAttribute("role")==="combobox"&&MC(e):!1}function GH(e){if(!e||DC)return!0;try{return e.matches(":focus-visible")}catch{return!0}}function oR(e){return e?e.hasAttribute(iR)?e:e.querySelector(`[${iR}]`)||e:null}function is(e,t,a=!0){return e.filter(s=>s.parentId===t&&(!a||s.context?.open)).flatMap(s=>[s,...is(e,s.id,a)])}function Ep(e,t){let a=[],o=e.find(s=>s.id===t)?.parentId;for(;o;){const s=e.find(c=>c.id===o);o=s?.parentId,s&&(a=a.concat(s))}return a}function BH(e){e.preventDefault(),e.stopPropagation()}function FH(e){return"nativeEvent"in e}function jH(e){return e.mozInputSource===0&&e.isTrusted?!0:aR&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function zH(e){return DC?!1:!aR&&e.width===0&&e.height===0||aR&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function Br(e,t){const a=["mouse","pen"];return t||a.push("",void 0),a.includes(e)}const YH=["top","right","bottom","left"],Fr=Math.min,Ka=Math.max,wh=Math.round,eh=Math.floor,Xi=e=>({x:e,y:e}),KH={left:"right",right:"left",bottom:"top",top:"bottom"},VH={start:"end",end:"start"};function lR(e,t,a){return Ka(e,Fr(t,a))}function Lo(e,t){return typeof e=="function"?e(t):e}function mi(e){return e.split("-")[0]}function bl(e){return e.split("-")[1]}function uT(e){return e==="x"?"y":"x"}function dT(e){return e==="y"?"height":"width"}const WH=new Set(["top","bottom"]);function yi(e){return WH.has(mi(e))?"y":"x"}function hT(e){return uT(yi(e))}function XH(e,t,a){a===void 0&&(a=!1);const o=bl(e),s=hT(e),c=dT(s);let d=s==="x"?o===(a?"end":"start")?"right":"left":o==="start"?"bottom":"top";return t.reference[c]>t.floating[c]&&(d=Gh(d)),[d,Gh(d)]}function qH(e){const t=Gh(e);return[sR(e),t,sR(t)]}function sR(e){return e.replace(/start|end/g,t=>VH[t])}const mp=["left","right"],Ap=["right","left"],ZH=["top","bottom"],QH=["bottom","top"];function $H(e,t,a){switch(e){case"top":case"bottom":return a?t?Ap:mp:t?mp:Ap;case"left":case"right":return t?ZH:QH;default:return[]}}function JH(e,t,a,o){const s=bl(e);let c=$H(mi(e),a==="start",o);return s&&(c=c.map(d=>d+"-"+s),t&&(c=c.concat(c.map(sR)))),c}function Gh(e){return e.replace(/left|right|bottom|top/g,t=>KH[t])}function ek(e){return{top:0,right:0,bottom:0,left:0,...e}}function LC(e){return typeof e!="number"?ek(e):{top:e,right:e,bottom:e,left:e}}function Bh(e){const{x:t,y:a,width:o,height:s}=e;return{width:o,height:s,top:a,left:t,right:t+o,bottom:a+s,x:t,y:a}}var tk=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Fh=tk.join(","),xC=typeof Element>"u",jr=xC?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,jh=!xC&&Element.prototype.getRootNode?function(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}:function(e){return e?.ownerDocument},zh=function e(t,a){var o;a===void 0&&(a=!0);var s=t==null||(o=t.getAttribute)===null||o===void 0?void 0:o.call(t,"inert"),c=s===""||s==="true",d=c||a&&t&&e(t.parentNode);return d},nk=function(t){var a,o=t==null||(a=t.getAttribute)===null||a===void 0?void 0:a.call(t,"contenteditable");return o===""||o==="true"},HC=function(t,a,o){if(zh(t))return[];var s=Array.prototype.slice.apply(t.querySelectorAll(Fh));return a&&jr.call(t,Fh)&&s.unshift(t),s=s.filter(o),s},kC=function e(t,a,o){for(var s=[],c=Array.from(t);c.length;){var d=c.shift();if(!zh(d,!1))if(d.tagName==="SLOT"){var f=d.assignedElements(),h=f.length?f:d.children,m=e(h,!0,o);o.flatten?s.push.apply(s,m):s.push({scopeParent:d,candidates:m})}else{var R=jr.call(d,Fh);R&&o.filter(d)&&(a||!t.includes(d))&&s.push(d);var T=d.shadowRoot||typeof o.getShadowRoot=="function"&&o.getShadowRoot(d),S=!zh(T,!1)&&(!o.shadowRootFilter||o.shadowRootFilter(d));if(T&&S){var g=e(T===!0?d.children:T.children,!0,o);o.flatten?s.push.apply(s,g):s.push({scopeParent:d,candidates:g})}else c.unshift.apply(c,d.children)}}return s},UC=function(t){return!isNaN(parseInt(t.getAttribute("tabindex"),10))},PC=function(t){if(!t)throw new Error("No node provided");return t.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||nk(t))&&!UC(t)?0:t.tabIndex},ak=function(t,a){var o=PC(t);return o<0&&a&&!UC(t)?0:o},ik=function(t,a){return t.tabIndex===a.tabIndex?t.documentOrder-a.documentOrder:t.tabIndex-a.tabIndex},wC=function(t){return t.tagName==="INPUT"},ok=function(t){return wC(t)&&t.type==="hidden"},lk=function(t){var a=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(o){return o.tagName==="SUMMARY"});return a},sk=function(t,a){for(var o=0;o<t.length;o++)if(t[o].checked&&t[o].form===a)return t[o]},rk=function(t){if(!t.name)return!0;var a=t.form||jh(t),o=function(f){return a.querySelectorAll('input[type="radio"][name="'+f+'"]')},s;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")s=o(window.CSS.escape(t.name));else try{s=o(t.name)}catch(d){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",d.message),!1}var c=sk(s,t.form);return!c||c===t},ck=function(t){return wC(t)&&t.type==="radio"},uk=function(t){return ck(t)&&!rk(t)},dk=function(t){var a,o=t&&jh(t),s=(a=o)===null||a===void 0?void 0:a.host,c=!1;if(o&&o!==t){var d,f,h;for(c=!!((d=s)!==null&&d!==void 0&&(f=d.ownerDocument)!==null&&f!==void 0&&f.contains(s)||t!=null&&(h=t.ownerDocument)!==null&&h!==void 0&&h.contains(t));!c&&s;){var m,R,T;o=jh(s),s=(m=o)===null||m===void 0?void 0:m.host,c=!!((R=s)!==null&&R!==void 0&&(T=R.ownerDocument)!==null&&T!==void 0&&T.contains(s))}}return c},Rp=function(t){var a=t.getBoundingClientRect(),o=a.width,s=a.height;return o===0&&s===0},hk=function(t,a){var o=a.displayCheck,s=a.getShadowRoot;if(getComputedStyle(t).visibility==="hidden")return!0;var c=jr.call(t,"details>summary:first-of-type"),d=c?t.parentElement:t;if(jr.call(d,"details:not([open]) *"))return!0;if(!o||o==="full"||o==="legacy-full"){if(typeof s=="function"){for(var f=t;t;){var h=t.parentElement,m=jh(t);if(h&&!h.shadowRoot&&s(h)===!0)return Rp(t);t.assignedSlot?t=t.assignedSlot:!h&&m!==t.ownerDocument?t=m.host:t=h}t=f}if(dk(t))return!t.getClientRects().length;if(o!=="legacy-full")return!0}else if(o==="non-zero-area")return Rp(t);return!1},fk=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var a=t.parentElement;a;){if(a.tagName==="FIELDSET"&&a.disabled){for(var o=0;o<a.children.length;o++){var s=a.children.item(o);if(s.tagName==="LEGEND")return jr.call(a,"fieldset[disabled] *")?!0:!s.contains(t)}return!0}a=a.parentElement}return!1},rR=function(t,a){return!(a.disabled||zh(a)||ok(a)||hk(a,t)||lk(a)||fk(a))},cR=function(t,a){return!(uk(a)||PC(a)<0||!rR(t,a))},Ek=function(t){var a=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(a)||a>=0)},mk=function e(t){var a=[],o=[];return t.forEach(function(s,c){var d=!!s.scopeParent,f=d?s.scopeParent:s,h=ak(f,d),m=d?e(s.candidates):f;h===0?d?a.push.apply(a,m):a.push(f):o.push({documentOrder:c,tabIndex:h,item:s,isScope:d,content:m})}),o.sort(ik).reduce(function(s,c){return c.isScope?s.push.apply(s,c.content):s.push(c.content),s},[]).concat(a)},pf=function(t,a){a=a||{};var o;return a.getShadowRoot?o=kC([t],a.includeContainer,{filter:cR.bind(null,a),flatten:!1,getShadowRoot:a.getShadowRoot,shadowRootFilter:Ek}):o=HC(t,a.includeContainer,cR.bind(null,a)),mk(o)},Ak=function(t,a){a=a||{};var o;return a.getShadowRoot?o=kC([t],a.includeContainer,{filter:rR.bind(null,a),flatten:!0,getShadowRoot:a.getShadowRoot}):o=HC(t,a.includeContainer,rR.bind(null,a)),o},GC=function(t,a){if(a=a||{},!t)throw new Error("No node provided");return jr.call(t,Fh)===!1?!1:cR(a,t)};const Du=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function BC(e,t){const a=pf(e,Du()),o=a.length;if(o===0)return;const s=rl(Gn(e)),c=a.indexOf(s),d=c===-1?t===1?0:o-1:c+t;return a[d]}function FC(e){return BC(Gn(e).body,1)||e}function jC(e){return BC(Gn(e).body,-1)||e}function hu(e,t){const a=t||e.currentTarget,o=e.relatedTarget;return!o||!Rn(a,o)}function Rk(e){pf(e,Du()).forEach(a=>{a.dataset.tabindex=a.getAttribute("tabindex")||"",a.setAttribute("tabindex","-1")})}function Tp(e){e.querySelectorAll("[data-tabindex]").forEach(a=>{const o=a.dataset.tabindex;delete a.dataset.tabindex,o?a.setAttribute("tabindex",o):a.removeAttribute("tabindex")})}const Tk={...xR};let Sp=0;function Sk(e,t="mui"){const[a,o]=C.useState(e),s=e||a;return C.useEffect(()=>{a==null&&(Sp+=1,o(`${t}-${Sp}`))},[a,t]),s}const gp=Tk.useId;function Nf(e,t){if(gp!==void 0){const a=gp();return e??(t?`${t}-${a}`:a)}return Sk(e,t)}function gk(){const e=new Map;return{emit(t,a){e.get(t)?.forEach(o=>o(a))},on(t,a){e.has(t)||e.set(t,new Set),e.get(t).add(a)},off(t,a){e.get(t)?.delete(a)}}}const Ik=C.createContext(null),_k=C.createContext(null),fT=()=>C.useContext(Ik)?.id||null,Cf=()=>C.useContext(_k);function zr(e){return`data-base-ui-${e}`}const Ip=zr("safe-polygon");function hh(e,t,a){if(a&&!Br(a))return 0;if(typeof e=="number")return e;if(typeof e=="function"){const o=e();return typeof o=="number"?o:o?.[t]}return e?.[t]}function CA(e){return typeof e=="function"?e():e}function pk(e,t={}){const{open:a,onOpenChange:o,dataRef:s,events:c,elements:d}=e,{enabled:f=!0,delay:h=0,handleClose:m=null,mouseOnly:R=!1,restMs:T=0,move:S=!0}=t,g=Cf(),_=fT(),p=Di(m),O=Di(h),y=Di(a),L=Di(T),P=C.useRef(void 0),D=Gr(),k=C.useRef(void 0),G=Gr(),B=C.useRef(!0),K=C.useRef(!1),V=C.useRef(()=>{}),ae=C.useRef(!1),oe=lt(()=>{const z=s.current.openEvent?.type;return z?.includes("mouse")&&z!=="mousedown"});C.useEffect(()=>{if(!f)return;function z({open:se}){se||(D.clear(),G.clear(),B.current=!0,ae.current=!1)}return c.on("openchange",z),()=>{c.off("openchange",z)}},[f,c,D,G]),C.useEffect(()=>{if(!f||!p.current||!a)return;function z(Ee){oe()&&o(!1,Ee,"hover")}const se=Gn(d.floating).documentElement;return se.addEventListener("mouseleave",z),()=>{se.removeEventListener("mouseleave",z)}},[d.floating,a,o,f,p,oe]);const j=C.useCallback((z,se=!0,Ee="hover")=>{const M=hh(O.current,"close",P.current);M&&!k.current?D.start(M,()=>o(!1,z,Ee)):se&&(D.clear(),o(!1,z,Ee))},[O,o,D]),$=lt(()=>{V.current(),k.current=void 0}),X=lt(()=>{if(K.current){const z=Gn(d.floating).body;z.style.pointerEvents="",z.removeAttribute(Ip),K.current=!1}}),ce=lt(()=>s.current.openEvent?["click","mousedown"].includes(s.current.openEvent.type):!1);C.useEffect(()=>{if(!f)return;function z(de){if(D.clear(),B.current=!1,R&&!Br(P.current)||CA(L.current)>0&&!hh(O.current,"open"))return;const W=hh(O.current,"open",P.current);W?D.start(W,()=>{y.current||o(!0,de,"hover")}):a||o(!0,de,"hover")}function se(de){if(ce()){X();return}V.current();const W=Gn(d.floating);if(G.clear(),ae.current=!1,p.current&&s.current.floatingContext){a||D.clear(),k.current=p.current({...s.current.floatingContext,tree:g,x:de.clientX,y:de.clientY,onClose(){X(),$(),ce()||j(de,!0,"safe-polygon")}});const Q=k.current;W.addEventListener("mousemove",Q),V.current=()=>{W.removeEventListener("mousemove",Q)};return}(P.current==="touch"?!Rn(d.floating,de.relatedTarget):!0)&&j(de)}function Ee(de){ce()||s.current.floatingContext&&p.current?.({...s.current.floatingContext,tree:g,x:de.clientX,y:de.clientY,onClose(){X(),$(),ce()||j(de)}})(de)}function M(){D.clear()}function ee(de){ce()||j(de,!1)}if(kt(d.domReference)){const de=d.domReference,W=d.floating;return a&&de.addEventListener("mouseleave",Ee),S&&de.addEventListener("mousemove",z,{once:!0}),de.addEventListener("mouseenter",z),de.addEventListener("mouseleave",se),W&&(W.addEventListener("mouseleave",Ee),W.addEventListener("mouseenter",M),W.addEventListener("mouseleave",ee)),()=>{a&&de.removeEventListener("mouseleave",Ee),S&&de.removeEventListener("mousemove",z),de.removeEventListener("mouseenter",z),de.removeEventListener("mouseleave",se),W&&(W.removeEventListener("mouseleave",Ee),W.removeEventListener("mouseenter",M),W.removeEventListener("mouseleave",ee))}}},[d,f,e,R,S,j,$,X,o,a,y,g,O,p,s,ce,L,D,G]),Pt(()=>{if(f&&a&&p.current?.__options?.blockPointerEvents&&oe()){K.current=!0;const z=d.floating;if(kt(d.domReference)&&z){const se=Gn(d.floating).body;se.setAttribute(Ip,"");const Ee=d.domReference,M=g?.nodesRef.current.find(ee=>ee.id===_)?.context?.elements.floating;return M&&(M.style.pointerEvents=""),se.style.pointerEvents="none",Ee.style.pointerEvents="auto",z.style.pointerEvents="auto",()=>{se.style.pointerEvents="",Ee.style.pointerEvents="",z.style.pointerEvents=""}}}},[f,a,_,d,g,p,oe]),Pt(()=>{a||(P.current=void 0,ae.current=!1,$(),X())},[a,$,X]),C.useEffect(()=>()=>{$(),D.clear(),G.clear(),X()},[f,d.domReference,$,X,D,G]);const w=C.useMemo(()=>{function z(se){P.current=se.pointerType}return{onPointerDown:z,onPointerEnter:z,onMouseMove(se){const{nativeEvent:Ee}=se;function M(){!B.current&&!y.current&&o(!0,Ee,"hover")}R&&!Br(P.current)||a||CA(L.current)===0||ae.current&&se.movementX**2+se.movementY**2<2||(G.clear(),P.current==="touch"?M():(ae.current=!0,G.start(CA(L.current),M)))}}},[R,o,a,y,L,G]);return C.useMemo(()=>f?{reference:w}:{},[f,w])}const Nk=C.createContext({hasProvider:!1,timeoutMs:0,delayRef:{current:0},initialDelayRef:{current:0},timeout:new gl,currentIdRef:{current:null},currentContextRef:{current:null}});function Ck(e,t={}){const{open:a,onOpenChange:o,floatingId:s}=e,{enabled:c=!0}=t,d=C.useContext(Nk),{currentIdRef:f,delayRef:h,timeoutMs:m,initialDelayRef:R,currentContextRef:T,hasProvider:S,timeout:g}=d,[_,p]=C.useState(!1);return Pt(()=>{function O(){p(!1),T.current?.setIsInstantPhase(!1),f.current=null,T.current=null,h.current=R.current}if(c&&f.current&&!a&&f.current===s){if(p(!1),m)return g.start(m,O),()=>{g.clear()};O()}},[c,a,s,f,h,m,R,T,g]),Pt(()=>{if(!c||!a)return;const O=T.current,y=f.current;T.current={onOpenChange:o,setIsInstantPhase:p},f.current=s,h.current={open:0,close:hh(R.current,"close")},y!==null&&y!==s?(g.clear(),p(!0),O?.setIsInstantPhase(!0),O?.onOpenChange(!1)):(p(!1),O?.setIsInstantPhase(!1))},[c,a,s,o,f,h,m,R,T,g]),Pt(()=>()=>{T.current=null},[T]),C.useMemo(()=>({hasProvider:S,delayRef:h,isInstantPhase:_}),[S,h,_])}function Yr(e,t,a,o){const s=Zr(zC).current;return Ok(s,e,t,a,o)&&YC(s,[e,t,a,o]),s.callback}function bk(e){const t=Zr(zC).current;return Dk(t,e)&&YC(t,e),t.callback}function zC(){return{callback:null,cleanup:null,refs:[]}}function Ok(e,t,a,o,s){return e.refs[0]!==t||e.refs[1]!==a||e.refs[2]!==o||e.refs[3]!==s}function Dk(e,t){return e.refs.length!==t.length||e.refs.some((a,o)=>a!==t[o])}function YC(e,t){if(e.refs=t,t.every(a=>a==null)){e.callback=null;return}e.callback=a=>{if(e.cleanup&&(e.cleanup(),e.cleanup=null),a!=null){const o=Array(t.length).fill(null);for(let s=0;s<t.length;s+=1){const c=t[s];if(c!=null)switch(typeof c){case"function":{const d=c(a);typeof d=="function"&&(o[s]=d);break}case"object":{c.current=a;break}}}e.cleanup=()=>{for(let s=0;s<t.length;s+=1){const c=t[s];if(c!=null)switch(typeof c){case"function":{const d=o[s];typeof d=="function"?d():c(null);break}case"object":{c.current=null;break}}}}}}}const ET={clip:"rect(0 0 0 0)",overflow:"hidden",whiteSpace:"nowrap",position:"fixed",top:0,left:0,border:0,padding:0,width:1,height:1,margin:-1},Yh=C.forwardRef(function(t,a){const[o,s]=C.useState();Pt(()=>{OC&&s("button")},[]);const c={ref:a,tabIndex:0,role:o,"aria-hidden":o?void 0:!0,style:ET};return l.jsx("span",{...t,...c,"data-base-ui-focus-guard":""})});let _p=0;function bA(e,t={}){const{preventScroll:a=!1,cancelPrevious:o=!0,sync:s=!1}=t;o&&cancelAnimationFrame(_p);const c=()=>e?.focus({preventScroll:a});s?c():_p=requestAnimationFrame(c)}const vr={inert:new WeakMap,"aria-hidden":new WeakMap,none:new WeakMap};function pp(e){return e==="inert"?vr.inert:e==="aria-hidden"?vr["aria-hidden"]:vr.none}let th=new WeakSet,nh={},OA=0;const KC=e=>e&&(e.host||KC(e.parentNode)),yk=(e,t)=>t.map(a=>{if(e.contains(a))return a;const o=KC(a);return e.contains(o)?o:null}).filter(a=>a!=null);function vk(e,t,a,o){const s="data-base-ui-inert",c=o?"inert":a?"aria-hidden":null,d=yk(t,e),f=new Set,h=new Set(d),m=[];nh[s]||(nh[s]=new WeakMap);const R=nh[s];d.forEach(T),S(t),f.clear();function T(g){!g||f.has(g)||(f.add(g),g.parentNode&&T(g.parentNode))}function S(g){!g||h.has(g)||[].forEach.call(g.children,_=>{if(Cl(_)!=="script")if(f.has(_))S(_);else{const p=c?_.getAttribute(c):null,O=p!==null&&p!=="false",y=pp(c),L=(y.get(_)||0)+1,P=(R.get(_)||0)+1;y.set(_,L),R.set(_,P),m.push(_),L===1&&O&&th.add(_),P===1&&_.setAttribute(s,""),!O&&c&&_.setAttribute(c,c==="inert"?"":"true")}})}return OA+=1,()=>{m.forEach(g=>{const _=pp(c),O=(_.get(g)||0)-1,y=(R.get(g)||0)-1;_.set(g,O),R.set(g,y),O||(!th.has(g)&&c&&g.removeAttribute(c),th.delete(g)),y||g.removeAttribute(s)}),OA-=1,OA||(vr.inert=new WeakMap,vr["aria-hidden"]=new WeakMap,vr.none=new WeakMap,th=new WeakSet,nh={})}}function Mk(e,t=!1,a=!1){const o=Gn(e[0]).body;return vk(e.concat(Array.from(o.querySelectorAll("[aria-live]"))),o,t,a)}const VC=C.createContext(null),WC=()=>C.useContext(VC),Np=zr("portal");function XC(e={}){const{id:t,root:a}=e,o=Nf(),s=WC(),[c,d]=C.useState(null),f=C.useRef(null);return Pt(()=>()=>{c?.remove(),queueMicrotask(()=>{f.current=null})},[c]),Pt(()=>{if(!o||f.current)return;const h=t?document.getElementById(t):null;if(!h)return;const m=document.createElement("div");m.id=o,m.setAttribute(Np,""),h.appendChild(m),f.current=m,d(m)},[t,o]),Pt(()=>{if(a===null||!o||f.current)return;let h=a||s?.portalNode;h&&!rT(h)&&(h=h.current),h=h||document.body;let m=null;t&&(m=document.createElement("div"),m.id=t,h.appendChild(m));const R=document.createElement("div");R.id=o,R.setAttribute(Np,""),h=m||h,h.appendChild(R),f.current=R,d(R)},[t,a,o,s]),c}function Lk(e){const{children:t,id:a,root:o,preserveTabOrder:s=!0}=e,c=XC({id:a,root:o}),[d,f]=C.useState(null),h=C.useRef(null),m=C.useRef(null),R=C.useRef(null),T=C.useRef(null),S=d?.modal,g=d?.open,_=!!d&&!d.modal&&d.open&&s&&!!(o||c);return C.useEffect(()=>{if(!c||!s||S)return;function p(O){c&&hu(O)&&(O.type==="focusin"?Tp:Rk)(c)}return c.addEventListener("focusin",p,!0),c.addEventListener("focusout",p,!0),()=>{c.removeEventListener("focusin",p,!0),c.removeEventListener("focusout",p,!0)}},[c,s,S]),C.useEffect(()=>{c&&(g||Tp(c))},[g,c]),l.jsxs(VC.Provider,{value:C.useMemo(()=>({preserveTabOrder:s,beforeOutsideRef:h,afterOutsideRef:m,beforeInsideRef:R,afterInsideRef:T,portalNode:c,setFocusManagerState:f}),[s,c]),children:[_&&c&&l.jsx(Yh,{"data-type":"outside",ref:h,onFocus:p=>{if(hu(p,c))R.current?.focus();else{const O=d?d.domReference:null;jC(O)?.focus()}}}),_&&c&&l.jsx("span",{"aria-owns":c.id,style:ET}),c&&qr.createPortal(t,c),_&&c&&l.jsx(Yh,{"data-type":"outside",ref:m,onFocus:p=>{if(hu(p,c))T.current?.focus();else{const O=d?d.domReference:null;FC(O)?.focus(),d?.closeOnFocusOut&&d?.onOpenChange(!1,p.nativeEvent,"focus-out")}}})]})}const xk={style:{transition:"none"}},cl={},qC="data-base-ui-click-trigger",Hk={fallbackAxisSide:"end"},Cp=20;let hl=[];function mT(){hl=hl.filter(e=>e.isConnected)}function kk(e){mT(),e&&Cl(e)!=="body"&&(hl.push(e),hl.length>Cp&&(hl=hl.slice(-Cp)))}function bp(){return mT(),hl[hl.length-1]}function Uk(e){const t=Du();return GC(e,t)?e:pf(e,t)[0]||e}function Op(e,t){if(!t.current.includes("floating")&&!e.getAttribute("role")?.includes("dialog"))return;const a=Du(),s=Ak(e,a).filter(d=>{const f=d.getAttribute("data-tabindex")||"";return GC(d,a)||d.hasAttribute("data-tabindex")&&!f.startsWith("-")}),c=e.getAttribute("tabindex");t.current.includes("floating")||s.length===0?c!=="0"&&e.setAttribute("tabindex","0"):(c!=="-1"||e.hasAttribute("data-tabindex")&&e.getAttribute("data-tabindex")!=="-1")&&(e.setAttribute("tabindex","-1"),e.setAttribute("data-tabindex","-1"))}function Pk(e){const{context:t,children:a,disabled:o=!1,order:s=["content"],initialFocus:c=0,returnFocus:d=!0,restoreFocus:f=!1,modal:h=!0,closeOnFocusOut:m=!0,getInsideElements:R=()=>[]}=e,{open:T,onOpenChange:S,events:g,dataRef:_,elements:{domReference:p,floating:O}}=t,y=lt(()=>_.current.floatingContext?.nodeId),L=lt(R),P=typeof c=="number"&&c<0,D=fp(p)&&P,k=Di(s),G=Di(c),B=Di(d),K=Cf(),V=WC(),ae=C.useRef(null),oe=C.useRef(null),j=C.useRef(!1),$=C.useRef(!1),X=C.useRef(-1),ce=Gr(),w=V!=null,z=oR(O),se=lt((Q=z)=>Q?pf(Q,Du()):[]),Ee=lt(Q=>{const x=se(Q);return k.current.map(()=>x).filter(Boolean).flat()});C.useEffect(()=>{if(o||!h)return;function Q(Z){Z.key==="Tab"&&Rn(z,rl(Gn(z)))&&se().length===0&&!D&&BH(Z)}const x=Gn(z);return x.addEventListener("keydown",Q),()=>{x.removeEventListener("keydown",Q)}},[o,p,z,h,k,D,se,Ee]),C.useEffect(()=>{if(o||!O)return;function Q(x){const Z=Ya(x),fe=se().indexOf(Z);fe!==-1&&(X.current=fe)}return O.addEventListener("focusin",Q),()=>{O.removeEventListener("focusin",Q)}},[o,O,se]),C.useEffect(()=>{if(o||!m)return;function Q(){$.current=!0}function x(fe){const Re=fe.relatedTarget,Ne=fe.currentTarget,Me=Ya(fe);queueMicrotask(()=>{const me=y(),Ce=!(Rn(p,Re)||Rn(O,Re)||Rn(Re,O)||Rn(V?.portalNode,Re)||Re?.hasAttribute(zr("focus-guard"))||K&&(is(K.nodesRef.current,me).find(ge=>Rn(ge.context?.elements.floating,Re)||Rn(ge.context?.elements.domReference,Re))||Ep(K.nodesRef.current,me).find(ge=>[ge.context?.elements.floating,oR(ge.context?.elements.floating)].includes(Re)||ge.context?.elements.domReference===Re)));if(Ne===p&&z&&Op(z,k),f&&Ne!==p&&!Me?.isConnected&&rl(Gn(z))===Gn(z).body){Bn(z)&&z.focus();const ge=X.current,_e=se(),De=_e[ge]||_e[_e.length-1]||z;Bn(De)&&De.focus()}if(_.current.insideReactTree){_.current.insideReactTree=!1;return}if($.current){$.current=!1;return}(D||!h)&&Re&&Ce&&Re!==bp()&&(j.current=!0,S(!1,fe,"focus-out"))})}const Z=!!(!K&&V);function ne(){_.current.insideReactTree=!0,ce.start(0,()=>{_.current.insideReactTree=!1})}if(O&&Bn(p))return p.addEventListener("focusout",x),p.addEventListener("pointerdown",Q),O.addEventListener("focusout",x),Z&&O.addEventListener("focusout",ne,!0),()=>{p.removeEventListener("focusout",x),p.removeEventListener("pointerdown",Q),O.removeEventListener("focusout",x),Z&&O.removeEventListener("focusout",ne,!0)}},[o,p,O,z,h,K,V,S,m,f,se,D,y,k,_,ce]);const M=C.useRef(null),ee=C.useRef(null),de=Yr(M,V?.beforeInsideRef),W=Yr(ee,V?.afterInsideRef);C.useEffect(()=>{if(o||!O)return;const Q=Array.from(V?.portalNode?.querySelectorAll(`[${zr("portal")}]`)||[]),Z=(K?Ep(K.nodesRef.current,y()):[]).find(Re=>fp(Re.context?.elements.domReference||null))?.context?.elements.domReference,ne=[O,Z,...Q,...L(),ae.current,oe.current,M.current,ee.current,V?.beforeOutsideRef.current,V?.afterOutsideRef.current,D?p:null].filter(Re=>Re!=null),fe=Mk(ne,h||D);return()=>{fe()}},[o,p,O,h,k,V,D,K,y,L]),Pt(()=>{if(o||!Bn(z))return;const Q=Gn(z),x=rl(Q);queueMicrotask(()=>{const Z=Ee(z),ne=G.current,fe=(typeof ne=="number"?Z[ne]:ne.current)||z,Re=Rn(z,x);!P&&!Re&&T&&bA(fe,{preventScroll:fe===z})})},[o,T,z,P,Ee,G]),Pt(()=>{if(o||!z)return;const Q=Gn(z),x=rl(Q);kk(x);function Z({reason:Re,event:Ne,nested:Me}){if(["hover","safe-polygon"].includes(Re)&&Ne.type==="mouseleave"&&(j.current=!0),Re==="outside-press")if(Me)j.current=!1;else if(jH(Ne)||zH(Ne))j.current=!1;else{let me=!1;document.createElement("div").focus({get preventScroll(){return me=!0,!1}}),me?j.current=!1:j.current=!0}}g.on("openchange",Z);const ne=Q.createElement("span");ne.setAttribute("tabindex","-1"),ne.setAttribute("aria-hidden","true"),Object.assign(ne.style,ET),w&&p&&p.insertAdjacentElement("afterend",ne);function fe(){if(typeof B.current=="boolean"){const Re=p||bp();return Re&&Re.isConnected?Re:ne}return B.current.current||ne}return()=>{g.off("openchange",Z);const Re=rl(Q),Ne=Rn(O,Re)||K&&is(K.nodesRef.current,y(),!1).some(me=>Rn(me.context?.elements.floating,Re)),Me=fe();queueMicrotask(()=>{const me=Uk(Me);B.current&&!j.current&&Bn(me)&&(!(me!==Re&&Re!==Q.body)||Ne)&&me.focus({preventScroll:!0}),ne.remove()})}},[o,O,z,B,_,g,K,w,p,y]),C.useEffect(()=>{queueMicrotask(()=>{j.current=!1})},[o]),C.useEffect(()=>{if(o||!T)return;function Q(Z){Ya(Z)?.closest(`[${qC}]`)&&($.current=!0)}const x=Gn(z);return x.addEventListener("pointerdown",Q,!0),()=>{x.removeEventListener("pointerdown",Q,!0)}},[o,T,z]),Pt(()=>{if(!o&&V)return V.setFocusManagerState({modal:h,closeOnFocusOut:m,open:T,onOpenChange:S,domReference:p}),()=>{V.setFocusManagerState(null)}},[o,V,h,T,S,m,p]),Pt(()=>{if(!(o||!z))return Op(z,k),()=>{queueMicrotask(mT)}},[o,z,k]);const Y=!o&&(h?!D:!0)&&(w||h);return l.jsxs(C.Fragment,{children:[Y&&l.jsx(Yh,{"data-type":"inside",ref:de,onFocus:Q=>{if(h){const x=Ee();bA(x[x.length-1])}else V?.preserveTabOrder&&V.portalNode&&(j.current=!1,hu(Q,V.portalNode)?FC(p)?.focus():V.beforeOutsideRef.current?.focus())}}),a,Y&&l.jsx(Yh,{"data-type":"inside",ref:W,onFocus:Q=>{h?bA(Ee()[0]):V?.preserveTabOrder&&V.portalNode&&(m&&(j.current=!0),hu(Q,V.portalNode)?jC(p)?.focus():V.afterOutsideRef.current?.focus())}})]})}const ah=null;class wk{callbacks=[];callbacksCount=0;nextId=1;startId=1;isScheduled=!1;tick=t=>{this.isScheduled=!1;const a=this.callbacks,o=this.callbacksCount;if(this.callbacks=[],this.callbacksCount=0,this.startId=this.nextId,o>0)for(let s=0;s<a.length;s+=1)a[s]?.(t)};request(t){const a=this.nextId;return this.nextId+=1,this.callbacks.push(t),this.callbacksCount+=1,(!this.isScheduled||!1)&&(requestAnimationFrame(this.tick),this.isScheduled=!0),a}cancel(t){const a=t-this.startId;a<0||a>=this.callbacks.length||(this.callbacks[a]=null,this.callbacksCount-=1)}}const ih=new wk;class Ki{static create(){return new Ki}static request(t){return ih.request(t)}static cancel(t){return ih.cancel(t)}currentId=ah;request(t){this.cancel(),this.currentId=ih.request(()=>{this.currentId=ah,t()})}cancel=()=>{this.currentId!==ah&&(ih.cancel(this.currentId),this.currentId=ah)};disposeEffect=()=>this.cancel}function ZC(){const e=Zr(Ki.create).current;return _C(e.disposeEffect),e}function Gk(e,t={}){const{open:a,onOpenChange:o,dataRef:s}=e,{enabled:c=!0,event:d="click",toggle:f=!0,ignoreMouse:h=!1,stickIfOpen:m=!0}=t,R=C.useRef(void 0),T=ZC(),S=C.useMemo(()=>({onPointerDown(g){R.current=g.pointerType},onMouseDown(g){const _=R.current,p=g.nativeEvent;if(g.button!==0||d==="click"||Br(_,!0)&&h)return;const O=s.current.openEvent,y=O?.type,L=!(a&&f&&(!(O&&m)||y==="click"||y==="mousedown"));T.request(()=>{o(L,p,"click")})},onClick(g){const _=R.current;if(d==="mousedown"&&_){R.current=void 0;return}if(Br(_,!0)&&h)return;const p=s.current.openEvent,O=p?.type;o(!(a&&f&&(!(p&&m)||O==="click"||O==="mousedown"||O==="keydown"||O==="keyup")),g.nativeEvent,"click")},onKeyDown(){R.current=void 0}}),[s,d,h,o,a,m,f,T]);return C.useMemo(()=>c?{reference:S}:cl,[c,S])}function Bk(e,t){let a=null,o=null,s=!1;return{contextElement:e||void 0,getBoundingClientRect(){const c=e?.getBoundingClientRect()||{width:0,height:0,x:0,y:0},d=t.axis==="x"||t.axis==="both",f=t.axis==="y"||t.axis==="both",h=["mouseenter","mousemove"].includes(t.dataRef.current.openEvent?.type||"")&&t.pointerType!=="touch";let m=c.width,R=c.height,T=c.x,S=c.y;return a==null&&t.x&&d&&(a=c.x-t.x),o==null&&t.y&&f&&(o=c.y-t.y),T-=a||0,S-=o||0,m=0,R=0,!s||h?(m=t.axis==="y"?c.width:0,R=t.axis==="x"?c.height:0,T=d&&t.x!=null?t.x:T,S=f&&t.y!=null?t.y:S):s&&!h&&(R=t.axis==="x"?c.height:R,m=t.axis==="y"?c.width:m),s=!0,{width:m,height:R,x:T,y:S,top:S,right:T+m,bottom:S+R,left:T}}}}function Dp(e){return e!=null&&e.clientX!=null}function Fk(e,t={}){const{open:a,dataRef:o,elements:{floating:s,domReference:c},refs:d}=e,{enabled:f=!0,axis:h="both",x:m=null,y:R=null}=t,T=C.useRef(!1),S=C.useRef(null),[g,_]=C.useState(),[p,O]=C.useState([]),y=lt((G,B)=>{T.current||o.current.openEvent&&!Dp(o.current.openEvent)||d.setPositionReference(Bk(c,{x:G,y:B,axis:h,dataRef:o,pointerType:g}))}),L=lt(G=>{m!=null||R!=null||(a?S.current||O([]):y(G.clientX,G.clientY))}),P=Br(g)?s:a,D=C.useCallback(()=>{if(!P||!f||m!=null||R!=null)return;const G=Fn(s);function B(K){const V=Ya(K);Rn(s,V)?(G.removeEventListener("mousemove",B),S.current=null):y(K.clientX,K.clientY)}if(!o.current.openEvent||Dp(o.current.openEvent)){G.addEventListener("mousemove",B);const K=()=>{G.removeEventListener("mousemove",B),S.current=null};return S.current=K,K}d.setPositionReference(c)},[P,f,m,R,s,o,d,c,y]);C.useEffect(()=>D(),[D,p]),C.useEffect(()=>{f&&!s&&(T.current=!1)},[f,s]),C.useEffect(()=>{!f&&a&&(T.current=!0)},[f,a]),Pt(()=>{f&&(m!=null||R!=null)&&(T.current=!1,y(m,R))},[f,m,R,y]);const k=C.useMemo(()=>{function G(B){_(B.pointerType)}return{onPointerDown:G,onPointerEnter:G,onMouseMove:L,onMouseEnter:L}},[L]);return C.useMemo(()=>f?{reference:k}:{},[f,k])}function yp(e,t,a){let{reference:o,floating:s}=e;const c=yi(t),d=hT(t),f=dT(d),h=mi(t),m=c==="y",R=o.x+o.width/2-s.width/2,T=o.y+o.height/2-s.height/2,S=o[f]/2-s[f]/2;let g;switch(h){case"top":g={x:R,y:o.y-s.height};break;case"bottom":g={x:R,y:o.y+o.height};break;case"right":g={x:o.x+o.width,y:T};break;case"left":g={x:o.x-s.width,y:T};break;default:g={x:o.x,y:o.y}}switch(bl(t)){case"start":g[d]-=S*(a&&m?-1:1);break;case"end":g[d]+=S*(a&&m?-1:1);break}return g}const jk=async(e,t,a)=>{const{placement:o="bottom",strategy:s="absolute",middleware:c=[],platform:d}=a,f=c.filter(Boolean),h=await(d.isRTL==null?void 0:d.isRTL(t));let m=await d.getElementRects({reference:e,floating:t,strategy:s}),{x:R,y:T}=yp(m,o,h),S=o,g={},_=0;for(let p=0;p<f.length;p++){const{name:O,fn:y}=f[p],{x:L,y:P,data:D,reset:k}=await y({x:R,y:T,initialPlacement:o,placement:S,strategy:s,middlewareData:g,rects:m,platform:d,elements:{reference:e,floating:t}});R=L??R,T=P??T,g={...g,[O]:{...g[O],...D}},k&&_<=50&&(_++,typeof k=="object"&&(k.placement&&(S=k.placement),k.rects&&(m=k.rects===!0?await d.getElementRects({reference:e,floating:t,strategy:s}):k.rects),{x:R,y:T}=yp(m,S,h)),p=-1)}return{x:R,y:T,placement:S,strategy:s,middlewareData:g}};async function Au(e,t){var a;t===void 0&&(t={});const{x:o,y:s,platform:c,rects:d,elements:f,strategy:h}=e,{boundary:m="clippingAncestors",rootBoundary:R="viewport",elementContext:T="floating",altBoundary:S=!1,padding:g=0}=Lo(t,e),_=LC(g),O=f[S?T==="floating"?"reference":"floating":T],y=Bh(await c.getClippingRect({element:(a=await(c.isElement==null?void 0:c.isElement(O)))==null||a?O:O.contextElement||await(c.getDocumentElement==null?void 0:c.getDocumentElement(f.floating)),boundary:m,rootBoundary:R,strategy:h})),L=T==="floating"?{x:o,y:s,width:d.floating.width,height:d.floating.height}:d.reference,P=await(c.getOffsetParent==null?void 0:c.getOffsetParent(f.floating)),D=await(c.isElement==null?void 0:c.isElement(P))?await(c.getScale==null?void 0:c.getScale(P))||{x:1,y:1}:{x:1,y:1},k=Bh(c.convertOffsetParentRelativeRectToViewportRelativeRect?await c.convertOffsetParentRelativeRectToViewportRelativeRect({elements:f,rect:L,offsetParent:P,strategy:h}):L);return{top:(y.top-k.top+_.top)/D.y,bottom:(k.bottom-y.bottom+_.bottom)/D.y,left:(y.left-k.left+_.left)/D.x,right:(k.right-y.right+_.right)/D.x}}const zk=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var a,o;const{placement:s,middlewareData:c,rects:d,initialPlacement:f,platform:h,elements:m}=t,{mainAxis:R=!0,crossAxis:T=!0,fallbackPlacements:S,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:_="none",flipAlignment:p=!0,...O}=Lo(e,t);if((a=c.arrow)!=null&&a.alignmentOffset)return{};const y=mi(s),L=yi(f),P=mi(f)===f,D=await(h.isRTL==null?void 0:h.isRTL(m.floating)),k=S||(P||!p?[Gh(f)]:qH(f)),G=_!=="none";!S&&G&&k.push(...JH(f,p,_,D));const B=[f,...k],K=await Au(t,O),V=[];let ae=((o=c.flip)==null?void 0:o.overflows)||[];if(R&&V.push(K[y]),T){const X=XH(s,d,D);V.push(K[X[0]],K[X[1]])}if(ae=[...ae,{placement:s,overflows:V}],!V.every(X=>X<=0)){var oe,j;const X=(((oe=c.flip)==null?void 0:oe.index)||0)+1,ce=B[X];if(ce&&(!(T==="alignment"?L!==yi(ce):!1)||ae.every(se=>yi(se.placement)===L?se.overflows[0]>0:!0)))return{data:{index:X,overflows:ae},reset:{placement:ce}};let w=(j=ae.filter(z=>z.overflows[0]<=0).sort((z,se)=>z.overflows[1]-se.overflows[1])[0])==null?void 0:j.placement;if(!w)switch(g){case"bestFit":{var $;const z=($=ae.filter(se=>{if(G){const Ee=yi(se.placement);return Ee===L||Ee==="y"}return!0}).map(se=>[se.placement,se.overflows.filter(Ee=>Ee>0).reduce((Ee,M)=>Ee+M,0)]).sort((se,Ee)=>se[1]-Ee[1])[0])==null?void 0:$[0];z&&(w=z);break}case"initialPlacement":w=f;break}if(s!==w)return{reset:{placement:w}}}return{}}}};function vp(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Mp(e){return YH.some(t=>e[t]>=0)}const Yk=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:a}=t,{strategy:o="referenceHidden",...s}=Lo(e,t);switch(o){case"referenceHidden":{const c=await Au(t,{...s,elementContext:"reference"}),d=vp(c,a.reference);return{data:{referenceHiddenOffsets:d,referenceHidden:Mp(d)}}}case"escaped":{const c=await Au(t,{...s,altBoundary:!0}),d=vp(c,a.floating);return{data:{escapedOffsets:d,escaped:Mp(d)}}}default:return{}}}}},QC=new Set(["left","top"]);async function Kk(e,t){const{placement:a,platform:o,elements:s}=e,c=await(o.isRTL==null?void 0:o.isRTL(s.floating)),d=mi(a),f=bl(a),h=yi(a)==="y",m=QC.has(d)?-1:1,R=c&&h?-1:1,T=Lo(t,e);let{mainAxis:S,crossAxis:g,alignmentAxis:_}=typeof T=="number"?{mainAxis:T,crossAxis:0,alignmentAxis:null}:{mainAxis:T.mainAxis||0,crossAxis:T.crossAxis||0,alignmentAxis:T.alignmentAxis};return f&&typeof _=="number"&&(g=f==="end"?_*-1:_),h?{x:g*R,y:S*m}:{x:S*m,y:g*R}}const Vk=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var a,o;const{x:s,y:c,placement:d,middlewareData:f}=t,h=await Kk(t,e);return d===((a=f.offset)==null?void 0:a.placement)&&(o=f.arrow)!=null&&o.alignmentOffset?{}:{x:s+h.x,y:c+h.y,data:{...h,placement:d}}}}},Wk=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:a,y:o,placement:s}=t,{mainAxis:c=!0,crossAxis:d=!1,limiter:f={fn:O=>{let{x:y,y:L}=O;return{x:y,y:L}}},...h}=Lo(e,t),m={x:a,y:o},R=await Au(t,h),T=yi(mi(s)),S=uT(T);let g=m[S],_=m[T];if(c){const O=S==="y"?"top":"left",y=S==="y"?"bottom":"right",L=g+R[O],P=g-R[y];g=lR(L,g,P)}if(d){const O=T==="y"?"top":"left",y=T==="y"?"bottom":"right",L=_+R[O],P=_-R[y];_=lR(L,_,P)}const p=f.fn({...t,[S]:g,[T]:_});return{...p,data:{x:p.x-a,y:p.y-o,enabled:{[S]:c,[T]:d}}}}}},Xk=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:a,y:o,placement:s,rects:c,middlewareData:d}=t,{offset:f=0,mainAxis:h=!0,crossAxis:m=!0}=Lo(e,t),R={x:a,y:o},T=yi(s),S=uT(T);let g=R[S],_=R[T];const p=Lo(f,t),O=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(h){const P=S==="y"?"height":"width",D=c.reference[S]-c.floating[P]+O.mainAxis,k=c.reference[S]+c.reference[P]-O.mainAxis;g<D?g=D:g>k&&(g=k)}if(m){var y,L;const P=S==="y"?"width":"height",D=QC.has(mi(s)),k=c.reference[T]-c.floating[P]+(D&&((y=d.offset)==null?void 0:y[T])||0)+(D?0:O.crossAxis),G=c.reference[T]+c.reference[P]+(D?0:((L=d.offset)==null?void 0:L[T])||0)-(D?O.crossAxis:0);_<k?_=k:_>G&&(_=G)}return{[S]:g,[T]:_}}}},qk=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var a,o;const{placement:s,rects:c,platform:d,elements:f}=t,{apply:h=()=>{},...m}=Lo(e,t),R=await Au(t,m),T=mi(s),S=bl(s),g=yi(s)==="y",{width:_,height:p}=c.floating;let O,y;T==="top"||T==="bottom"?(O=T,y=S===(await(d.isRTL==null?void 0:d.isRTL(f.floating))?"start":"end")?"left":"right"):(y=T,O=S==="end"?"top":"bottom");const L=p-R.top-R.bottom,P=_-R.left-R.right,D=Fr(p-R[O],L),k=Fr(_-R[y],P),G=!t.middlewareData.shift;let B=D,K=k;if((a=t.middlewareData.shift)!=null&&a.enabled.x&&(K=P),(o=t.middlewareData.shift)!=null&&o.enabled.y&&(B=L),G&&!S){const ae=Ka(R.left,0),oe=Ka(R.right,0),j=Ka(R.top,0),$=Ka(R.bottom,0);g?K=_-2*(ae!==0||oe!==0?ae+oe:Ka(R.left,R.right)):B=p-2*(j!==0||$!==0?j+$:Ka(R.top,R.bottom))}await h({...t,availableWidth:K,availableHeight:B});const V=await d.getDimensions(f.floating);return _!==V.width||p!==V.height?{reset:{rects:!0}}:{}}}};function $C(e){const t=Ei(e);let a=parseFloat(t.width)||0,o=parseFloat(t.height)||0;const s=Bn(e),c=s?e.offsetWidth:a,d=s?e.offsetHeight:o,f=wh(a)!==c||wh(o)!==d;return f&&(a=c,o=d),{width:a,height:o,$:f}}function AT(e){return kt(e)?e:e.contextElement}function Mr(e){const t=AT(e);if(!Bn(t))return Xi(1);const a=t.getBoundingClientRect(),{width:o,height:s,$:c}=$C(t);let d=(c?wh(a.width):a.width)/o,f=(c?wh(a.height):a.height)/s;return(!d||!Number.isFinite(d))&&(d=1),(!f||!Number.isFinite(f))&&(f=1),{x:d,y:f}}const Zk=Xi(0);function JC(e){const t=Fn(e);return!If()||!t.visualViewport?Zk:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Qk(e,t,a){return t===void 0&&(t=!1),!a||t&&a!==Fn(e)?!1:t}function hs(e,t,a,o){t===void 0&&(t=!1),a===void 0&&(a=!1);const s=e.getBoundingClientRect(),c=AT(e);let d=Xi(1);t&&(o?kt(o)&&(d=Mr(o)):d=Mr(e));const f=Qk(c,a,o)?JC(c):Xi(0);let h=(s.left+f.x)/d.x,m=(s.top+f.y)/d.y,R=s.width/d.x,T=s.height/d.y;if(c){const S=Fn(c),g=o&&kt(o)?Fn(o):o;let _=S,p=nR(_);for(;p&&o&&g!==_;){const O=Mr(p),y=p.getBoundingClientRect(),L=Ei(p),P=y.left+(p.clientLeft+parseFloat(L.paddingLeft))*O.x,D=y.top+(p.clientTop+parseFloat(L.paddingTop))*O.y;h*=O.x,m*=O.y,R*=O.x,T*=O.y,h+=P,m+=D,_=Fn(p),p=nR(_)}}return Bh({width:R,height:T,x:h,y:m})}function bf(e,t){const a=_f(e).scrollLeft;return t?t.left+a:hs(eo(e)).left+a}function eb(e,t){const a=e.getBoundingClientRect(),o=a.left+t.scrollLeft-bf(e,a),s=a.top+t.scrollTop;return{x:o,y:s}}function $k(e){let{elements:t,rect:a,offsetParent:o,strategy:s}=e;const c=s==="fixed",d=eo(o),f=t?gf(t.floating):!1;if(o===d||f&&c)return a;let h={scrollLeft:0,scrollTop:0},m=Xi(1);const R=Xi(0),T=Bn(o);if((T||!T&&!c)&&((Cl(o)!=="body"||Ou(d))&&(h=_f(o)),Bn(o))){const g=hs(o);m=Mr(o),R.x=g.x+o.clientLeft,R.y=g.y+o.clientTop}const S=d&&!T&&!c?eb(d,h):Xi(0);return{width:a.width*m.x,height:a.height*m.y,x:a.x*m.x-h.scrollLeft*m.x+R.x+S.x,y:a.y*m.y-h.scrollTop*m.y+R.y+S.y}}function Jk(e){return Array.from(e.getClientRects())}function eU(e){const t=eo(e),a=_f(e),o=e.ownerDocument.body,s=Ka(t.scrollWidth,t.clientWidth,o.scrollWidth,o.clientWidth),c=Ka(t.scrollHeight,t.clientHeight,o.scrollHeight,o.clientHeight);let d=-a.scrollLeft+bf(e);const f=-a.scrollTop;return Ei(o).direction==="rtl"&&(d+=Ka(t.clientWidth,o.clientWidth)-s),{width:s,height:c,x:d,y:f}}const Lp=25;function tU(e,t){const a=Fn(e),o=eo(e),s=a.visualViewport;let c=o.clientWidth,d=o.clientHeight,f=0,h=0;if(s){c=s.width,d=s.height;const R=If();(!R||R&&t==="fixed")&&(f=s.offsetLeft,h=s.offsetTop)}const m=bf(o);if(m<=0){const R=o.ownerDocument,T=R.body,S=getComputedStyle(T),g=R.compatMode==="CSS1Compat"&&parseFloat(S.marginLeft)+parseFloat(S.marginRight)||0,_=Math.abs(o.clientWidth-T.clientWidth-g);_<=Lp&&(c-=_)}else m<=Lp&&(c+=m);return{width:c,height:d,x:f,y:h}}const nU=new Set(["absolute","fixed"]);function aU(e,t){const a=hs(e,!0,t==="fixed"),o=a.top+e.clientTop,s=a.left+e.clientLeft,c=Bn(e)?Mr(e):Xi(1),d=e.clientWidth*c.x,f=e.clientHeight*c.y,h=s*c.x,m=o*c.y;return{width:d,height:f,x:h,y:m}}function xp(e,t,a){let o;if(t==="viewport")o=tU(e,a);else if(t==="document")o=eU(eo(e));else if(kt(t))o=aU(t,a);else{const s=JC(e);o={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return Bh(o)}function tb(e,t){const a=Mo(e);return a===t||!kt(a)||yo(a)?!1:Ei(a).position==="fixed"||tb(a,t)}function iU(e,t){const a=t.get(e);if(a)return a;let o=ml(e,[],!1).filter(f=>kt(f)&&Cl(f)!=="body"),s=null;const c=Ei(e).position==="fixed";let d=c?Mo(e):e;for(;kt(d)&&!yo(d);){const f=Ei(d),h=cT(d);!h&&f.position==="fixed"&&(s=null),(c?!h&&!s:!h&&f.position==="static"&&!!s&&nU.has(s.position)||Ou(d)&&!h&&tb(e,d))?o=o.filter(R=>R!==d):s=f,d=Mo(d)}return t.set(e,o),o}function oU(e){let{element:t,boundary:a,rootBoundary:o,strategy:s}=e;const d=[...a==="clippingAncestors"?gf(t)?[]:iU(t,this._c):[].concat(a),o],f=d[0],h=d.reduce((m,R)=>{const T=xp(t,R,s);return m.top=Ka(T.top,m.top),m.right=Fr(T.right,m.right),m.bottom=Fr(T.bottom,m.bottom),m.left=Ka(T.left,m.left),m},xp(t,f,s));return{width:h.right-h.left,height:h.bottom-h.top,x:h.left,y:h.top}}function lU(e){const{width:t,height:a}=$C(e);return{width:t,height:a}}function sU(e,t,a){const o=Bn(t),s=eo(t),c=a==="fixed",d=hs(e,!0,c,t);let f={scrollLeft:0,scrollTop:0};const h=Xi(0);function m(){h.x=bf(s)}if(o||!o&&!c)if((Cl(t)!=="body"||Ou(s))&&(f=_f(t)),o){const g=hs(t,!0,c,t);h.x=g.x+t.clientLeft,h.y=g.y+t.clientTop}else s&&m();c&&!o&&s&&m();const R=s&&!o&&!c?eb(s,f):Xi(0),T=d.left+f.scrollLeft-h.x-R.x,S=d.top+f.scrollTop-h.y-R.y;return{x:T,y:S,width:d.width,height:d.height}}function DA(e){return Ei(e).position==="static"}function Hp(e,t){if(!Bn(e)||Ei(e).position==="fixed")return null;if(t)return t(e);let a=e.offsetParent;return eo(e)===a&&(a=a.ownerDocument.body),a}function nb(e,t){const a=Fn(e);if(gf(e))return a;if(!Bn(e)){let s=Mo(e);for(;s&&!yo(s);){if(kt(s)&&!DA(s))return s;s=Mo(s)}return a}let o=Hp(e,t);for(;o&&NH(o)&&DA(o);)o=Hp(o,t);return o&&yo(o)&&DA(o)&&!cT(o)?a:o||yH(e)||a}const rU=async function(e){const t=this.getOffsetParent||nb,a=this.getDimensions,o=await a(e.floating);return{reference:sU(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:o.width,height:o.height}}};function cU(e){return Ei(e).direction==="rtl"}const uU={convertOffsetParentRelativeRectToViewportRelativeRect:$k,getDocumentElement:eo,getClippingRect:oU,getOffsetParent:nb,getElementRects:rU,getClientRects:Jk,getDimensions:lU,getScale:Mr,isElement:kt,isRTL:cU};function ab(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function dU(e,t){let a=null,o;const s=eo(e);function c(){var f;clearTimeout(o),(f=a)==null||f.disconnect(),a=null}function d(f,h){f===void 0&&(f=!1),h===void 0&&(h=1),c();const m=e.getBoundingClientRect(),{left:R,top:T,width:S,height:g}=m;if(f||t(),!S||!g)return;const _=eh(T),p=eh(s.clientWidth-(R+S)),O=eh(s.clientHeight-(T+g)),y=eh(R),P={rootMargin:-_+"px "+-p+"px "+-O+"px "+-y+"px",threshold:Ka(0,Fr(1,h))||1};let D=!0;function k(G){const B=G[0].intersectionRatio;if(B!==h){if(!D)return d();B?d(!1,B):o=setTimeout(()=>{d(!1,1e-7)},1e3)}B===1&&!ab(m,e.getBoundingClientRect())&&d(),D=!1}try{a=new IntersectionObserver(k,{...P,root:s.ownerDocument})}catch{a=new IntersectionObserver(k,P)}a.observe(e)}return d(!0),c}function kp(e,t,a,o){o===void 0&&(o={});const{ancestorScroll:s=!0,ancestorResize:c=!0,elementResize:d=typeof ResizeObserver=="function",layoutShift:f=typeof IntersectionObserver=="function",animationFrame:h=!1}=o,m=AT(e),R=s||c?[...m?ml(m):[],...ml(t)]:[];R.forEach(y=>{s&&y.addEventListener("scroll",a,{passive:!0}),c&&y.addEventListener("resize",a)});const T=m&&f?dU(m,a):null;let S=-1,g=null;d&&(g=new ResizeObserver(y=>{let[L]=y;L&&L.target===m&&g&&(g.unobserve(t),cancelAnimationFrame(S),S=requestAnimationFrame(()=>{var P;(P=g)==null||P.observe(t)})),a()}),m&&!h&&g.observe(m),g.observe(t));let _,p=h?hs(e):null;h&&O();function O(){const y=hs(e);p&&!ab(p,y)&&a(),p=y,_=requestAnimationFrame(O)}return a(),()=>{var y;R.forEach(L=>{s&&L.removeEventListener("scroll",a),c&&L.removeEventListener("resize",a)}),T?.(),(y=g)==null||y.disconnect(),g=null,h&&cancelAnimationFrame(_)}}const hU=Vk,fU=Wk,EU=zk,mU=qk,AU=Yk,RU=Xk,TU=(e,t,a)=>{const o=new Map,s={platform:uU,...a},c={...s.platform,_c:o};return jk(e,t,{...s,platform:c})};var SU=typeof document<"u",gU=function(){},fh=SU?C.useLayoutEffect:gU;function Kh(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let a,o,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(a=e.length,a!==t.length)return!1;for(o=a;o--!==0;)if(!Kh(e[o],t[o]))return!1;return!0}if(s=Object.keys(e),a=s.length,a!==Object.keys(t).length)return!1;for(o=a;o--!==0;)if(!{}.hasOwnProperty.call(t,s[o]))return!1;for(o=a;o--!==0;){const c=s[o];if(!(c==="_owner"&&e.$$typeof)&&!Kh(e[c],t[c]))return!1}return!0}return e!==e&&t!==t}function ib(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Up(e,t){const a=ib(e);return Math.round(t*a)/a}function yA(e){const t=C.useRef(e);return fh(()=>{t.current=e}),t}function IU(e){e===void 0&&(e={});const{placement:t="bottom",strategy:a="absolute",middleware:o=[],platform:s,elements:{reference:c,floating:d}={},transform:f=!0,whileElementsMounted:h,open:m}=e,[R,T]=C.useState({x:0,y:0,strategy:a,placement:t,middlewareData:{},isPositioned:!1}),[S,g]=C.useState(o);Kh(S,o)||g(o);const[_,p]=C.useState(null),[O,y]=C.useState(null),L=C.useCallback(se=>{se!==G.current&&(G.current=se,p(se))},[]),P=C.useCallback(se=>{se!==B.current&&(B.current=se,y(se))},[]),D=c||_,k=d||O,G=C.useRef(null),B=C.useRef(null),K=C.useRef(R),V=h!=null,ae=yA(h),oe=yA(s),j=yA(m),$=C.useCallback(()=>{if(!G.current||!B.current)return;const se={placement:t,strategy:a,middleware:S};oe.current&&(se.platform=oe.current),TU(G.current,B.current,se).then(Ee=>{const M={...Ee,isPositioned:j.current!==!1};X.current&&!Kh(K.current,M)&&(K.current=M,qr.flushSync(()=>{T(M)}))})},[S,t,a,oe,j]);fh(()=>{m===!1&&K.current.isPositioned&&(K.current.isPositioned=!1,T(se=>({...se,isPositioned:!1})))},[m]);const X=C.useRef(!1);fh(()=>(X.current=!0,()=>{X.current=!1}),[]),fh(()=>{if(D&&(G.current=D),k&&(B.current=k),D&&k){if(ae.current)return ae.current(D,k,$);$()}},[D,k,$,ae,V]);const ce=C.useMemo(()=>({reference:G,floating:B,setReference:L,setFloating:P}),[L,P]),w=C.useMemo(()=>({reference:D,floating:k}),[D,k]),z=C.useMemo(()=>{const se={position:a,left:0,top:0};if(!w.floating)return se;const Ee=Up(w.floating,R.x),M=Up(w.floating,R.y);return f?{...se,transform:"translate("+Ee+"px, "+M+"px)",...ib(w.floating)>=1.5&&{willChange:"transform"}}:{position:a,left:Ee,top:M}},[a,f,w.floating,R.x,R.y]);return C.useMemo(()=>({...R,update:$,refs:ce,elements:w,floatingStyles:z}),[R,$,ce,w,z])}const _U=(e,t)=>({...hU(e),options:[e,t]}),pU=(e,t)=>({...fU(e),options:[e,t]}),NU=(e,t)=>({...RU(e),options:[e,t]}),CU=(e,t)=>({...EU(e),options:[e,t]}),bU=(e,t)=>({...mU(e),options:[e,t]}),OU=(e,t)=>({...AU(e),options:[e,t]}),DU={intentional:"onClick",sloppy:"onPointerDown"};function Pp(e){return{escapeKey:typeof e=="boolean"?e:e?.escapeKey??!1,outsidePress:typeof e=="boolean"?e:e?.outsidePress??!0}}function ob(e,t={}){const{open:a,onOpenChange:o,elements:s,dataRef:c}=e,{enabled:d=!0,escapeKey:f=!0,outsidePress:h=!0,outsidePressEvent:m="sloppy",referencePress:R=!1,referencePressEvent:T="sloppy",ancestorScroll:S=!1,bubbles:g,capture:_}=t,p=Cf(),O=lt(typeof h=="function"?h:()=>!1),y=typeof h=="function"?O:h,L=C.useRef(!1),{escapeKey:P,outsidePress:D}=Pp(g),{escapeKey:k,outsidePress:G}=Pp(_),B=C.useRef(null),K=Gr(),V=Gr(),ae=C.useRef(!1),oe=C.useRef(""),j=lt(x=>{oe.current=x.pointerType}),$=lt(()=>{const x=oe.current,Z=x==="pen"||!x?"mouse":x;return typeof m=="string"?m:m[Z]}),X=lt(x=>{if(!a||!d||!f||x.key!=="Escape"||ae.current)return;const Z=c.current.floatingContext?.nodeId,ne=p?is(p.nodesRef.current,Z):[];if(!P&&(x.stopPropagation(),ne.length>0)){let fe=!0;if(ne.forEach(Re=>{Re.context?.open&&!Re.context.dataRef.current.__escapeKeyBubbles&&(fe=!1)}),!fe)return}o(!1,FH(x)?x.nativeEvent:x,"escape-key")}),ce=lt(x=>{const Z=$();return Z==="intentional"&&x.type!=="click"||Z==="sloppy"&&x.type==="click"}),w=lt(x=>{const Z=()=>{X(x),Ya(x)?.removeEventListener("keydown",Z)};Ya(x)?.addEventListener("keydown",Z)}),z=lt(x=>{if(ce(x))return;const Z=c.current.insideReactTree;c.current.insideReactTree=!1;const ne=L.current;if(L.current=!1,$()==="intentional"&&ne||Z||typeof y=="function"&&!y(x))return;const fe=Ya(x),Re=`[${zr("inert")}]`,Ne=Gn(s.floating).querySelectorAll(Re);let Me=kt(fe)?fe:null;for(;Me&&!yo(Me);){const _e=Mo(Me);if(yo(_e)||!kt(_e))break;Me=_e}if(Ne.length&&kt(fe)&&!wH(fe)&&!Rn(fe,s.floating)&&Array.from(Ne).every(_e=>!Rn(Me,_e)))return;if(Bn(fe)){const _e=yo(fe),De=Ei(fe),Be=/auto|scroll/,$t=_e||Be.test(De.overflowX),Na=_e||Be.test(De.overflowY),Ca=$t&&fe.clientWidth>0&&fe.scrollWidth>fe.clientWidth,lo=Na&&fe.clientHeight>0&&fe.scrollHeight>fe.clientHeight,so=De.direction==="rtl",Ds=lo&&(so?x.offsetX<=fe.offsetWidth-fe.clientWidth:x.offsetX>fe.clientWidth),ys=Ca&&x.offsetY>fe.clientHeight;if(Ds||ys)return}const me=c.current.floatingContext?.nodeId,Ce=p&&is(p.nodesRef.current,me).some(_e=>No(x,_e.context?.elements.floating));if(No(x,s.floating)||No(x,s.domReference)||Ce)return;const ge=p?is(p.nodesRef.current,me):[];if(ge.length>0){let _e=!0;if(ge.forEach(De=>{De.context?.open&&!De.context.dataRef.current.__outsidePressBubbles&&(_e=!1)}),!_e)return}o(!1,x,"outside-press")}),se=lt(x=>{if(!($()!=="sloppy"||!a||!d||No(x,s.floating)||No(x,s.domReference))){if(x.pointerType==="touch"){B.current={startTime:Date.now(),startX:x.clientX,startY:x.clientY,dismissOnPointerUp:!1,dismissOnMouseDown:!0},K.start(1e3,()=>{B.current&&(B.current.dismissOnPointerUp=!1,B.current.dismissOnMouseDown=!1)});return}z(x)}}),Ee=lt(x=>{if(ce(x)||(K.clear(),x.type==="mousedown"&&B.current&&!B.current.dismissOnMouseDown))return;const Z=()=>{x.type==="pointerdown"?se(x):z(x),Ya(x)?.removeEventListener(x.type,Z)};Ya(x)?.addEventListener(x.type,Z)}),M=lt(x=>{if($()!=="sloppy"||x.pointerType!=="touch"||!B.current||No(x,s.floating)||No(x,s.domReference))return;const Z=Math.abs(x.clientX-B.current.startX),ne=Math.abs(x.clientY-B.current.startY),fe=Math.sqrt(Z*Z+ne*ne);fe>5&&(B.current.dismissOnPointerUp=!0),fe>10&&(z(x),K.clear(),B.current=null)}),ee=lt(x=>{$()!=="sloppy"||x.pointerType!=="touch"||!B.current||No(x,s.floating)||No(x,s.domReference)||(B.current.dismissOnPointerUp&&z(x),K.clear(),B.current=null)});C.useEffect(()=>{if(!a||!d)return;c.current.__escapeKeyBubbles=P,c.current.__outsidePressBubbles=D;const x=new gl;function Z(Me){o(!1,Me,"ancestor-scroll")}function ne(){x.clear(),ae.current=!0}function fe(){x.start(If()?5:0,()=>{ae.current=!1})}const Re=Gn(s.floating);Re.addEventListener("pointerdown",j,!0),f&&(Re.addEventListener("keydown",k?w:X,k),Re.addEventListener("compositionstart",ne),Re.addEventListener("compositionend",fe)),y&&(Re.addEventListener("click",G?Ee:z,G),Re.addEventListener("pointerdown",G?Ee:z,G),Re.addEventListener("pointermove",M,G),Re.addEventListener("pointerup",ee,G),Re.addEventListener("mousedown",Ee,G));let Ne=[];return S&&(kt(s.domReference)&&(Ne=ml(s.domReference)),kt(s.floating)&&(Ne=Ne.concat(ml(s.floating))),!kt(s.reference)&&s.reference&&s.reference.contextElement&&(Ne=Ne.concat(ml(s.reference.contextElement)))),Ne=Ne.filter(Me=>Me!==Re.defaultView?.visualViewport),Ne.forEach(Me=>{Me.addEventListener("scroll",Z,{passive:!0})}),()=>{Re.removeEventListener("pointerdown",j,!0),f&&(Re.removeEventListener("keydown",k?w:X,k),Re.removeEventListener("compositionstart",ne),Re.removeEventListener("compositionend",fe)),y&&(Re.removeEventListener("click",G?Ee:z,G),Re.removeEventListener("pointerdown",G?Ee:z,G),Re.removeEventListener("pointermove",M,G),Re.removeEventListener("pointerup",ee,G),Re.removeEventListener("mousedown",Ee,G)),Ne.forEach(Me=>{Me.removeEventListener("scroll",Z)}),x.clear()}},[c,s,f,y,m,a,o,S,d,P,D,X,k,w,z,G,Ee,se,M,ee,j]),C.useEffect(()=>{c.current.insideReactTree=!1},[c,y]);const de=C.useMemo(()=>({onKeyDown:X,...R&&{[DU[T]]:x=>{o(!1,x.nativeEvent,"reference-press")},...T!=="intentional"&&{onClick(x){o(!1,x.nativeEvent,"reference-press")}}}}),[X,o,R,T]),W=lt(x=>{const Z=Ya(x.nativeEvent);Rn(s.floating,Z)&&(L.current=!0)}),Y=lt(()=>{c.current.insideReactTree=!0,V.start(0,()=>{c.current.insideReactTree=!1})}),Q=C.useMemo(()=>({onKeyDown:X,onMouseDown:W,onMouseUp:W,onPointerDownCapture:Y,onMouseDownCapture:Y,onClickCapture:Y}),[X,W,Y]);return C.useMemo(()=>d?{reference:de,floating:Q}:{},[d,de,Q])}function RT(e){const{open:t=!1,onOpenChange:a,elements:o}=e,s=Nf(),c=C.useRef({}),[d]=C.useState(()=>gk()),f=fT()!=null,[h,m]=C.useState(o.reference),R=lt((g,_,p)=>{c.current.openEvent=g?_:void 0,d.emit("openchange",{open:g,event:_,reason:p,nested:f}),a?.(g,_,p)}),T=C.useMemo(()=>({setPositionReference:m}),[]),S=C.useMemo(()=>({reference:h||o.reference||null,floating:o.floating||null,domReference:o.reference}),[h,o.reference,o.floating]);return C.useMemo(()=>({dataRef:c,open:t,onOpenChange:R,elements:S,events:d,floatingId:s,refs:T}),[t,R,S,d,s,T])}function yU(e={}){const{nodeId:t}=e,a=RT({...e,elements:{reference:null,floating:null,...e.elements}}),o=e.rootContext||a,s=o.elements,[c,d]=C.useState(null),[f,h]=C.useState(null),R=s?.domReference||c,T=C.useRef(null),S=Cf();Pt(()=>{R&&(T.current=R)},[R]);const g=IU({...e,elements:{...s,...f&&{reference:f}}}),_=C.useCallback(P=>{const D=kt(P)?{getBoundingClientRect:()=>P.getBoundingClientRect(),getClientRects:()=>P.getClientRects(),contextElement:P}:P;h(D),g.refs.setReference(D)},[g.refs]),p=C.useCallback(P=>{(kt(P)||P===null)&&(T.current=P,d(P)),(kt(g.refs.reference.current)||g.refs.reference.current===null||P!==null&&!kt(P))&&g.refs.setReference(P)},[g.refs]),O=C.useMemo(()=>({...g.refs,setReference:p,setPositionReference:_,domReference:T}),[g.refs,p,_]),y=C.useMemo(()=>({...g.elements,domReference:R}),[g.elements,R]),L=C.useMemo(()=>({...g,...o,refs:O,elements:y,nodeId:t}),[g,O,y,t,o]);return Pt(()=>{o.dataRef.current.floatingContext=L;const P=S?.nodesRef.current.find(D=>D.id===t);P&&(P.context=L)}),C.useMemo(()=>({...g,context:L,refs:O,elements:y}),[g,O,y,L])}const vA=xH&&OC;function vU(e,t={}){const{open:a,onOpenChange:o,events:s,dataRef:c,elements:d}=e,{enabled:f=!0,visibleOnly:h=!0}=t,m=C.useRef(!1),R=Gr(),T=C.useRef(!0);C.useEffect(()=>{if(!f)return;const g=Fn(d.domReference);function _(){!a&&Bn(d.domReference)&&d.domReference===rl(Gn(d.domReference))&&(m.current=!0)}function p(){T.current=!0}function O(){T.current=!1}return g.addEventListener("blur",_),vA&&(g.addEventListener("keydown",p,!0),g.addEventListener("pointerdown",O,!0)),()=>{g.removeEventListener("blur",_),vA&&(g.removeEventListener("keydown",p,!0),g.removeEventListener("pointerdown",O,!0))}},[d.domReference,a,f]),C.useEffect(()=>{if(!f)return;function g({reason:_}){(_==="reference-press"||_==="escape-key")&&(m.current=!0)}return s.on("openchange",g),()=>{s.off("openchange",g)}},[s,f]);const S=C.useMemo(()=>({onMouseLeave(){m.current=!1},onFocus(g){if(m.current)return;const _=Ya(g.nativeEvent);if(h&&kt(_)){if(vA&&!g.relatedTarget){if(!T.current&&!MC(_))return}else if(!GH(_))return}o(!0,g.nativeEvent,"focus")},onBlur(g){m.current=!1;const _=g.relatedTarget,p=g.nativeEvent,O=kt(_)&&_.hasAttribute(zr("focus-guard"))&&_.getAttribute("data-type")==="outside";R.start(0,()=>{const y=rl(d.domReference?d.domReference.ownerDocument:document);!_&&y===d.domReference||Rn(c.current.floatingContext?.refs.floating.current,y)||Rn(d.domReference,y)||O||o(!1,p,"focus")})}}),[c,d.domReference,o,h,R]);return C.useMemo(()=>f?{reference:S}:{},[f,S])}function lb(e=[]){const t=e.map(f=>f?.reference),a=e.map(f=>f?.floating),o=e.map(f=>f?.item),s=C.useCallback(f=>MA(f,e,"reference"),t),c=C.useCallback(f=>MA(f,e,"floating"),a),d=C.useCallback(f=>MA(f,e,"item"),o);return C.useMemo(()=>({getReferenceProps:s,getFloatingProps:c,getItemProps:d}),[s,c,d])}function MA(e,t,a){const o=new Map,s=a==="item",c={};a==="floating"&&(c.tabIndex=-1,c[iR]="");for(const d in e)s&&e&&(d===yC||d===vC)||(c[d]=e[d]);for(let d=0;d<t.length;d+=1){let f;const h=t[d]?.[a];typeof h=="function"?f=e?h(e):null:f=h,f&&wp(c,f,s,o)}return wp(c,e,s,o),c}function wp(e,t,a,o){for(const s in t){const c=t[s];a&&(s===yC||s===vC)||(s.startsWith("on")?(o.has(s)||o.set(s,[]),typeof c=="function"&&(o.get(s)?.push(c),e[s]=(...d)=>o.get(s)?.map(f=>f(...d)).find(f=>f!==void 0))):e[s]=c)}}const MU=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function LU(e,t={}){const{open:a,elements:o,floatingId:s}=e,{enabled:c=!0,role:d="dialog"}=t,f=Nf(),h=o.domReference?.id||f,m=C.useMemo(()=>oR(o.floating)?.id||s,[o.floating,s]),R=MU.get(d)??d,S=fT()!=null,g=C.useMemo(()=>R==="tooltip"||d==="label"?{[`aria-${d==="label"?"labelledby":"describedby"}`]:a?m:void 0}:{"aria-expanded":a?"true":"false","aria-haspopup":R==="alertdialog"?"dialog":R,"aria-controls":a?m:void 0,...R==="listbox"&&{role:"combobox"},...R==="menu"&&{id:h},...R==="menu"&&S&&{role:"menuitem"},...d==="select"&&{"aria-autocomplete":"none"},...d==="combobox"&&{"aria-autocomplete":"list"}},[R,m,S,a,h,d]),_=C.useMemo(()=>{const O={id:m,...R&&{role:R}};return R==="tooltip"||d==="label"?O:{...O,...R==="menu"&&{"aria-labelledby":h}}},[R,m,h,d]),p=C.useCallback(({active:O,selected:y})=>{const L={role:"option",...O&&{id:`${m}-fui-option`}};switch(d){case"select":case"combobox":return{...L,"aria-selected":y}}return{}},[m,d]);return C.useMemo(()=>c?{reference:g,floating:_,item:p}:{},[c,g,_,p])}function Gp(e,t){const[a,o]=e;let s=!1;const c=t.length;for(let d=0,f=c-1;d<c;f=d++){const[h,m]=t[d]||[0,0],[R,T]=t[f]||[0,0];m>=o!=T>=o&&a<=(R-h)*(o-m)/(T-m)+h&&(s=!s)}return s}function xU(e,t){return e[0]>=t.x&&e[0]<=t.x+t.width&&e[1]>=t.y&&e[1]<=t.y+t.height}function HU(e={}){const{buffer:t=.5,blockPointerEvents:a=!1,requireIntent:o=!0}=e,s=new gl;let c=!1,d=null,f=null,h=typeof performance<"u"?performance.now():0;function m(T,S){const g=performance.now(),_=g-h;if(d===null||f===null||_===0)return d=T,f=S,h=g,null;const p=T-d,O=S-f,L=Math.sqrt(p*p+O*O)/_;return d=T,f=S,h=g,L}const R=({x:T,y:S,placement:g,elements:_,onClose:p,nodeId:O,tree:y})=>function(P){function D(){s.clear(),p()}if(s.clear(),!_.domReference||!_.floating||g==null||T==null||S==null)return;const{clientX:k,clientY:G}=P,B=[k,G],K=Ya(P),V=P.type==="mouseleave",ae=Rn(_.floating,K),oe=Rn(_.domReference,K),j=_.domReference.getBoundingClientRect(),$=_.floating.getBoundingClientRect(),X=g.split("-")[0],ce=T>$.right-$.width/2,w=S>$.bottom-$.height/2,z=xU(B,j),se=$.width>j.width,Ee=$.height>j.height,M=(se?j:$).left,ee=(se?j:$).right,de=(Ee?j:$).top,W=(Ee?j:$).bottom;if(ae&&(c=!0,!V))return;if(oe&&(c=!1),oe&&!V){c=!0;return}if(V&&kt(P.relatedTarget)&&Rn(_.floating,P.relatedTarget)||y&&is(y.nodesRef.current,O).some(({context:x})=>x?.open))return;if(X==="top"&&S>=j.bottom-1||X==="bottom"&&S<=j.top+1||X==="left"&&T>=j.right-1||X==="right"&&T<=j.left+1)return D();let Y=[];switch(X){case"top":Y=[[M,j.top+1],[M,$.bottom-1],[ee,$.bottom-1],[ee,j.top+1]];break;case"bottom":Y=[[M,$.top+1],[M,j.bottom-1],[ee,j.bottom-1],[ee,$.top+1]];break;case"left":Y=[[$.right-1,W],[$.right-1,de],[j.left+1,de],[j.left+1,W]];break;case"right":Y=[[j.right-1,W],[j.right-1,de],[$.left+1,de],[$.left+1,W]];break}function Q([x,Z]){switch(X){case"top":{const ne=[se?x+t/2:ce?x+t*4:x-t*4,Z+t+1],fe=[se?x-t/2:ce?x+t*4:x-t*4,Z+t+1],Re=[[$.left,ce||se?$.bottom-t:$.top],[$.right,ce?se?$.bottom-t:$.top:$.bottom-t]];return[ne,fe,...Re]}case"bottom":{const ne=[se?x+t/2:ce?x+t*4:x-t*4,Z-t],fe=[se?x-t/2:ce?x+t*4:x-t*4,Z-t],Re=[[$.left,ce||se?$.top+t:$.bottom],[$.right,ce?se?$.top+t:$.bottom:$.top+t]];return[ne,fe,...Re]}case"left":{const ne=[x+t+1,Ee?Z+t/2:w?Z+t*4:Z-t*4],fe=[x+t+1,Ee?Z-t/2:w?Z+t*4:Z-t*4];return[...[[w||Ee?$.right-t:$.left,$.top],[w?Ee?$.right-t:$.left:$.right-t,$.bottom]],ne,fe]}case"right":{const ne=[x-t,Ee?Z+t/2:w?Z+t*4:Z-t*4],fe=[x-t,Ee?Z-t/2:w?Z+t*4:Z-t*4],Re=[[w||Ee?$.left+t:$.right,$.top],[w?Ee?$.left+t:$.right:$.left+t,$.bottom]];return[ne,fe,...Re]}default:return[]}}if(!Gp([k,G],Y)){if(c&&!z)return D();if(!V&&o){const x=m(P.clientX,P.clientY);if(x!==null&&x<.1)return D()}Gp([k,G],Q([T,S]))?!c&&o&&s.start(40,D):D()}};return R.__options={blockPointerEvents:a},R}function sb(e,t=!1,a=!1){const[o,s]=C.useState(e&&t?"idle":void 0),[c,d]=C.useState(e);return e&&!c&&(d(!0),s("starting")),!e&&c&&o!=="ending"&&!a&&s("ending"),!e&&!c&&o==="ending"&&s(void 0),Pt(()=>{if(!e&&c&&o!=="ending"&&a){const f=Ki.request(()=>{s("ending")});return()=>{Ki.cancel(f)}}},[e,c,o,a]),Pt(()=>{if(!e||t)return;const f=Ki.request(()=>{qr.flushSync(()=>{s(void 0)})});return()=>{Ki.cancel(f)}},[t,e]),Pt(()=>{if(!e||!t)return;e&&c&&o!=="idle"&&s("starting");const f=Ki.request(()=>{s("idle")});return()=>{Ki.cancel(f)}},[t,e,c,s,o]),C.useMemo(()=>({mounted:c,setMounted:d,transitionStatus:o}),[c,o])}const kU=600;function rb(e){if(e)return{"focus-out":"focus-out","escape-key":"escape-key","outside-press":"outside-press","list-navigation":"list-navigation",click:"trigger-press",hover:"trigger-hover",focus:"trigger-focus","reference-press":"trigger-press","safe-polygon":"trigger-hover","ancestor-scroll":void 0}[e]}function UU(e,t=!1){const a=ZC();return lt((o,s=null)=>{if(a.cancel(),e==null)return;let c;if("current"in e){if(e.current==null)return;c=e.current}else c=e;typeof c.getAnimations!="function"||globalThis.BASE_UI_ANIMATIONS_DISABLED?o():a.request(()=>{function d(){c&&Promise.allSettled(c.getAnimations().map(f=>f.finished)).then(()=>{s!=null&&s.aborted||qr.flushSync(o)})}t?a.request(d):d()})})}function Of(e){const{enabled:t=!0,open:a,ref:o,onComplete:s}=e,c=Di(a),d=lt(s),f=UU(o,a);C.useEffect(()=>{t&&f(()=>{a===c.current&&d()})},[t,a,d,f,c])}const PU=C.createContext(void 0);function wU(){return C.useContext(PU)}function cb(e){const{disabled:t=!1,defaultOpen:a=!1,onOpenChange:o,open:s,delay:c,closeDelay:d,hoverable:f=!0,trackCursorAxis:h="none",actionsRef:m,onOpenChangeComplete:R}=e,T=c??kU,S=d??0,[g,_]=C.useState(null),[p,O]=C.useState(null),[y,L]=C.useState(),P=C.useRef(null),[D,k]=gC({controlled:s,default:a,name:"Tooltip",state:"open"}),G=!t&&D;function B(Z,ne,fe){const Re=fe==="trigger-hover",Ne=Z&&fe==="trigger-focus",Me=!Z&&(fe==="trigger-press"||fe==="escape-key");function me(){o?.(Z,ne,fe),k(Z)}Re?qr.flushSync(me):me(),Ne||Me?L(Ne?"focus":"dismiss"):fe==="trigger-hover"&&L(void 0)}const K=lt(B);D&&t&&B(!1,void 0,"disabled");const{mounted:V,setMounted:ae,transitionStatus:oe}=sb(G),j=lt(()=>{ae(!1),R?.(!1)});Of({enabled:!m,open:G,ref:P,onComplete(){G||j()}}),C.useImperativeHandle(m,()=>({unmount:j}),[j]);const $=RT({elements:{reference:g,floating:p},open:G,onOpenChange(Z,ne,fe){K(Z,ne,rb(fe))}}),X=wU(),{delayRef:ce,isInstantPhase:w,hasProvider:z}=Ck($),se=w?"delay":y,Ee=pk($,{enabled:!t,mouseOnly:!0,move:!1,handleClose:f&&h!=="both"?HU():null,restMs(){const Z=X?.delay,ne=typeof ce.current=="object"?ce.current.open:void 0;let fe=T;return z&&(ne!==0?fe=c??Z??T:fe=0),fe},delay(){const Z=typeof ce.current=="object"?ce.current.close:void 0;let ne=S;return d==null&&z&&(ne=Z),{close:ne}}}),M=vU($,{enabled:!t}),ee=ob($,{enabled:!t,referencePress:!0}),de=Fk($,{enabled:!t&&h!=="none",axis:h==="none"?void 0:h}),{getReferenceProps:W,getFloatingProps:Y}=lb([Ee,M,ee,de]),Q=C.useMemo(()=>({open:G,setOpen:K,mounted:V,setMounted:ae,setTriggerElement:_,positionerElement:p,setPositionerElement:O,popupRef:P,triggerProps:W(),popupProps:Y(),floatingRootContext:$,instantType:se,transitionStatus:oe,onOpenChangeComplete:R}),[G,K,V,ae,_,p,O,P,W,Y,$,se,oe,R]),x=C.useMemo(()=>({...Q,delay:T,closeDelay:S,trackCursorAxis:h,hoverable:f}),[Q,T,S,h,f]);return l.jsx(IC.Provider,{value:x,children:e.children})}let Vh=function(e){return e.startingStyle="data-starting-style",e.endingStyle="data-ending-style",e}({});const GU={[Vh.startingStyle]:""},BU={[Vh.endingStyle]:""},TT={transitionStatus(e){return e==="starting"?GU:e==="ending"?BU:null}};let es=function(e){return e.open="data-open",e.closed="data-closed",e[e.startingStyle=Vh.startingStyle]="startingStyle",e[e.endingStyle=Vh.endingStyle]="endingStyle",e.anchorHidden="data-anchor-hidden",e}({}),FU=function(e){return e.popupOpen="data-popup-open",e.pressed="data-pressed",e}({});const jU={[FU.popupOpen]:""},zU={[es.open]:""},YU={[es.closed]:""},KU={[es.anchorHidden]:""},ub={open(e){return e?jU:null}},Df={open(e){return e?zU:YU},anchorHidden(e){return e?KU:null}},VU=parseInt(C.version,10);function db(e){return VU>=e}function hb(e,t){if(e&&!t)return e;if(!e&&t)return t;if(e||t)return{...e,...t}}function WU(e,t){const a={};for(const o in e){const s=e[o];if(t?.hasOwnProperty(o)){const c=t[o](s);c!=null&&Object.assign(a,c);continue}s===!0?a[`data-${o.toLowerCase()}`]="":s&&(a[`data-${o.toLowerCase()}`]=s.toString())}return a}function XU(e,t){return typeof e=="function"?e(t):e}const fu={};function ST(e,t,a,o,s){let c={...uR(e,fu)};return t&&(c=Eh(c,t)),a&&(c=Eh(c,a)),o&&(c=Eh(c,o)),c}function qU(e){if(e.length===0)return fu;if(e.length===1)return uR(e[0],fu);let t={...uR(e[0],fu)};for(let a=1;a<e.length;a+=1)t=Eh(t,e[a]);return t}function Eh(e,t){return fb(t)?t(e):ZU(e,t)}function ZU(e,t){if(!t)return e;for(const a in t){const o=t[a];switch(a){case"style":{e[a]=hb(e.style,o);break}case"className":{e[a]=Eb(e.className,o);break}default:QU(a,o)?e[a]=$U(e[a],o):e[a]=o}}return e}function QU(e,t){const a=e.charCodeAt(0),o=e.charCodeAt(1),s=e.charCodeAt(2);return a===111&&o===110&&s>=65&&s<=90&&(typeof t=="function"||typeof t>"u")}function fb(e){return typeof e=="function"}function uR(e,t){return fb(e)?e(t):e??fu}function $U(e,t){return t?e?a=>{if(JU(a)){const s=a;dR(s);const c=t(s);return s.baseUIHandlerPrevented||e?.(s),c}const o=t(a);return e?.(a),o}:t:e}function dR(e){return e.preventBaseUIHandler=()=>{e.baseUIHandlerPrevented=!0},e}function Eb(e,t){return t?e?t+" "+e:t:e}function JU(e){return e!=null&&typeof e=="object"&&"nativeEvent"in e}function to(e,t,a={}){const o=t.render,s=eP(t,a);if(a.enabled===!1)return null;const c=a.state??cl;return tP(e,o,s,c)}function eP(e,t={}){const{className:a,render:o}=e,{state:s=cl,ref:c,props:d,disableStyleHooks:f,customStyleHookMapping:h,enabled:m=!0}=t,R=m?XU(a,s):void 0;let T;f!==!0&&(T=C.useMemo(()=>m?WU(s,h):cl,[s,h,m]));const S=m?hb(T,Array.isArray(d)?qU(d):d)??cl:cl;return typeof document<"u"&&(m?Array.isArray(c)?S.ref=bk([S.ref,Bp(o),...c]):S.ref=Yr(S.ref,Bp(o),c):Yr(null,null)),m?(R!==void 0&&(S.className=Eb(S.className,R)),S):cl}function tP(e,t,a,o){if(t){if(typeof t=="function")return t(a,o);const s=ST(a,t.props);return s.ref=a.ref,C.cloneElement(t,s)}if(e&&typeof e=="string")return nP(e,a);throw new Error("Base UI: Render element or function are not defined.")}function nP(e,t){return e==="button"?l.jsx("button",{type:"button",...t}):e==="img"?l.jsx("img",{alt:"",...t}):C.createElement(e,t)}function Bp(e){return e&&typeof e!="function"?db(19)?e.props.ref:e.ref:null}const aP=C.forwardRef(function(t,a){const{className:o,render:s,...c}=t,{open:d,setTriggerElement:f,triggerProps:h}=Tf(),m=C.useMemo(()=>({open:d}),[d]);return to("button",t,{state:m,ref:[a,f],props:[h,c],customStyleHookMapping:ub})}),mb=C.createContext(void 0);function iP(){const e=C.useContext(mb);if(e===void 0)throw new Error("Base UI: <Tooltip.Portal> is missing.");return e}function oP(e){const t=XC({root:e.root});return t&&qr.createPortal(e.children,t)}function Ab(e){const{children:t,keepMounted:a=!1,container:o}=e,{mounted:s}=Tf();return s||a?l.jsx(mb.Provider,{value:a,children:l.jsx(oP,{root:o,children:t})}):null}const Rb=C.createContext(void 0);function lP(){const e=C.useContext(Rb);if(e===void 0)throw new Error("Base UI: TooltipPositionerContext is missing. TooltipPositioner parts must be placed within <Tooltip.Positioner>.");return e}function $r(e){return e?.ownerDocument||document}const sP=C.createContext(void 0);function rP(e=!0){const t=C.useContext(sP);if(t===void 0&&!e)throw new Error("Base UI: DirectionContext is missing.");return t?.direction??"ltr"}const cP=e=>({name:"arrow",options:e,async fn(t){const{x:a,y:o,placement:s,rects:c,platform:d,elements:f,middlewareData:h}=t,{element:m,padding:R=0,offsetParent:T="real"}=Lo(e,t)||{};if(m==null)return{};const S=LC(R),g={x:a,y:o},_=hT(s),p=dT(_),O=await d.getDimensions(m),y=_==="y",L=y?"top":"left",P=y?"bottom":"right",D=y?"clientHeight":"clientWidth",k=c.reference[p]+c.reference[_]-g[_]-c.floating[p],G=g[_]-c.reference[_],B=T==="real"?await d.getOffsetParent?.(m):f.floating;let K=f.floating[D]||c.floating[p];(!K||!await d.isElement?.(B))&&(K=f.floating[D]||c.floating[p]);const V=k/2-G/2,ae=K/2-O[p]/2-1,oe=Math.min(S[L],ae),j=Math.min(S[P],ae),$=oe,X=K-O[p]-j,ce=K/2-O[p]/2+V,w=lR($,ce,X),z=!h.arrow&&bl(s)!=null&&ce!==w&&c.reference[p]/2-(ce<$?oe:j)-O[p]/2<0,se=z?ce<$?ce-$:ce-X:0;return{[_]:g[_]+se,data:{[_]:w,centerOffset:ce-w-se,...z&&{alignmentOffset:se}},reset:z}}}),uP=(e,t)=>({...cP(e),options:[e,t]});function Tb(e,t,a){const o=e==="inline-start"||e==="inline-end";return{top:"top",right:o?a?"inline-start":"inline-end":"right",bottom:"bottom",left:o?a?"inline-end":"inline-start":"left"}[t]}function Fp(e,t,a){const{rects:o,placement:s}=e;return{side:Tb(t,mi(s),a),align:bl(s)||"center",anchor:{width:o.reference.width,height:o.reference.height},positioner:{width:o.floating.width,height:o.floating.height}}}function dP(e){const{anchor:t,positionMethod:a="absolute",side:o="bottom",sideOffset:s=0,align:c="center",alignOffset:d=0,collisionBoundary:f,collisionPadding:h=5,sticky:m=!1,arrowPadding:R=5,trackAnchor:T=!0,keepMounted:S=!1,floatingRootContext:g,mounted:_,collisionAvoidance:p,shiftCrossAxis:O=!1,nodeId:y,adaptiveOrigin:L}=e,P=p.side||"flip",D=p.align||"flip",k=p.fallbackAxisSide||"end",G=typeof t=="function"?t:void 0,B=lt(G),K=G?B:t,V=Di(t),oe=rP()==="rtl",j={top:"top",right:"right",bottom:"bottom",left:"left","inline-end":oe?"left":"right","inline-start":oe?"right":"left"}[o],$=c==="center"?j:`${j}-${c}`,X={boundary:f==="clipping-ancestors"?"clippingAncestors":f,padding:h},ce=C.useRef(null),w=Di(s),z=Di(d),M=[_U(rt=>{const Kt=Fp(rt,o,oe),Bt=typeof w.current=="function"?w.current(Kt):w.current,$a=typeof z.current=="function"?z.current(Kt):z.current;return{mainAxis:Bt,crossAxis:$a,alignmentAxis:$a}},[typeof s!="function"?s:0,typeof d!="function"?d:0,oe,o])],ee=D==="none"&&P!=="shift",de=!ee&&(m||O||P==="shift"),W=P==="none"?null:CU({...X,mainAxis:!O&&P==="flip",crossAxis:D==="flip"?"alignment":!1,fallbackAxisSideDirection:k}),Y=ee?null:pU(rt=>{const Kt=$r(rt.elements.floating).documentElement;return{...X,rootBoundary:O?{x:0,y:0,width:Kt.clientWidth,height:Kt.clientHeight}:void 0,mainAxis:D!=="none",crossAxis:de,limiter:m||O?void 0:NU(()=>{if(!ce.current)return{};const{height:Bt}=ce.current.getBoundingClientRect();return{offset:Bt/2+(typeof h=="number"?h:0)}})}},[X,m,O,h,D]);P==="shift"||D==="shift"||c==="center"?M.push(Y,W):M.push(W,Y),M.push(bU({...X,apply({elements:{floating:rt},rects:{reference:Kt},availableWidth:Bt,availableHeight:$a}){Object.entries({"--available-width":`${Bt}px`,"--available-height":`${$a}px`,"--anchor-width":`${Kt.width}px`,"--anchor-height":`${Kt.height}px`}).forEach(([vs,oc])=>{rt.style.setProperty(vs,oc)})}}),uP(()=>({element:ce.current||document.createElement("div"),padding:R,offsetParent:"floating"}),[R]),OU(),{name:"transformOrigin",fn(rt){const{elements:Kt,middlewareData:Bt,placement:$a,rects:vs,y:oc}=rt,vl=mi($a),Ms=yi(vl),wi=ce.current,Ls=Bt.arrow?.x||0,Ml=Bt.arrow?.y||0,aE=wi?.clientWidth||0,Bu=wi?.clientHeight||0,xs=Ls+aE/2,Hs=Ml+Bu/2,Ll=Math.abs(Bt.shift?.y||0),iE=vs.reference.height/2,Fu=Ll>(typeof s=="function"?s(Fp(rt,o,oe)):s),ju={top:`${xs}px calc(100% + ${s}px)`,bottom:`${xs}px ${-s}px`,left:`calc(100% + ${s}px) ${Hs}px`,right:`${-s}px ${Hs}px`}[vl],lc=`${xs}px ${vs.reference.y+iE-oc}px`;return Kt.floating.style.setProperty("--transform-origin",de&&Ms==="y"&&Fu?lc:ju),{}}},L);let Q=g;!_&&g&&(Q={...g,elements:{reference:null,floating:null,domReference:null}});const x=C.useMemo(()=>({elementResize:T&&typeof ResizeObserver<"u",layoutShift:T&&typeof IntersectionObserver<"u"}),[T]),{refs:Z,elements:ne,x:fe,y:Re,middlewareData:Ne,update:Me,placement:me,context:Ce,isPositioned:ge,floatingStyles:_e}=yU({rootContext:Q,placement:$,middleware:M,strategy:a,whileElementsMounted:S?void 0:(...rt)=>kp(...rt,x),nodeId:y}),{sideX:De,sideY:Be}=Ne.adaptiveOrigin||{},$t=C.useMemo(()=>L?{position:a,[De]:`${fe}px`,[Be]:`${Re}px`}:_e,[L,De,Be,a,fe,Re,_e]),Na=C.useRef(null);Pt(()=>{if(!_)return;const rt=V.current,Kt=typeof rt=="function"?rt():rt,$a=(jp(Kt)?Kt.current:Kt)||null||null;$a!==Na.current&&(Z.setPositionReference($a),Na.current=$a)},[_,Z,K,V]),C.useEffect(()=>{if(!_)return;const rt=V.current;typeof rt!="function"&&jp(rt)&&rt.current!==Na.current&&(Z.setPositionReference(rt.current),Na.current=rt.current)},[_,Z,K,V]),C.useEffect(()=>{if(S&&_&&ne.domReference&&ne.floating)return kp(ne.domReference,ne.floating,Me,x)},[S,_,ne,Me,x]);const Ca=mi(me),lo=Tb(o,Ca,oe),so=bl(me)||"center",Ds=!!Ne.hide?.referenceHidden,ys=C.useMemo(()=>({position:"absolute",top:Ne.arrow?.y,left:Ne.arrow?.x}),[Ne.arrow]),ko=Ne.arrow?.centerOffset!==0;return C.useMemo(()=>({positionerStyles:$t,arrowStyles:ys,arrowRef:ce,arrowUncentered:ko,side:lo,align:so,anchorHidden:Ds,refs:Z,context:Ce,isPositioned:ge,update:Me}),[$t,ys,ce,ko,lo,so,Ds,Z,Ce,ge,Me])}function jp(e){return e!=null&&"current"in e}const Sb=C.forwardRef(function(t,a){const{render:o,className:s,anchor:c,positionMethod:d="absolute",side:f="top",align:h="center",sideOffset:m=0,alignOffset:R=0,collisionBoundary:T="clipping-ancestors",collisionPadding:S=5,arrowPadding:g=5,sticky:_=!1,trackAnchor:p=!0,collisionAvoidance:O=Hk,...y}=t,{open:L,setPositionerElement:P,mounted:D,floatingRootContext:k,trackCursorAxis:G,hoverable:B}=Tf(),K=iP(),V=dP({anchor:c,positionMethod:d,floatingRootContext:k,mounted:D,side:f,sideOffset:m,align:h,alignOffset:R,collisionBoundary:T,collisionPadding:S,sticky:_,arrowPadding:g,trackAnchor:p,keepMounted:K,collisionAvoidance:O}),ae=C.useMemo(()=>{const ce={};return(!L||G==="both"||!B)&&(ce.pointerEvents="none"),{role:"presentation",hidden:!D,style:{...V.positionerStyles,...ce}}},[L,G,B,D,V.positionerStyles]),oe=C.useMemo(()=>({props:ae,...V}),[ae,V]),j=C.useMemo(()=>({open:L,side:oe.side,align:oe.align,anchorHidden:oe.anchorHidden}),[L,oe.side,oe.align,oe.anchorHidden]),$=C.useMemo(()=>({...j,arrowRef:oe.arrowRef,arrowStyles:oe.arrowStyles,arrowUncentered:oe.arrowUncentered}),[j,oe.arrowRef,oe.arrowStyles,oe.arrowUncentered]),X=to("div",t,{state:j,props:[oe.props,y],ref:[a,P],customStyleHookMapping:Df});return l.jsx(Rb.Provider,{value:$,children:X})}),hP={...Df,...TT},gb=C.forwardRef(function(t,a){const{className:o,render:s,...c}=t,{open:d,instantType:f,transitionStatus:h,popupProps:m,popupRef:R,onOpenChangeComplete:T}=Tf(),{side:S,align:g}=lP();Of({open:d,ref:R,onComplete(){d&&T?.(!0)}});const _=C.useMemo(()=>({open:d,side:S,align:g,instant:f,transitionStatus:h}),[d,S,g,f,h]);return to("div",t,{state:_,ref:[a,R],props:[m,h==="starting"?xk:cl,c],customStyleHookMapping:hP})}),LA=new Map,Ib="assets/Skills/General/Missing.png",hR=e=>{if(LA.has(e))return LA.get(e);const t=`assets/Skills/${AC(e)}`;if(t){const a=new Image;return a.src=t,a.onerror=o=>{a.src=Ib,console.error("failed to load skill image: "+t),a.onerror=null},a.onload=()=>xo(),LA.set(e,a),a}};function _b(e){const t=`assets/Skills/${AC(e.skillName)}`,[a,o]=C.useState(!1);return l.jsx("img",{style:e.style,src:a?Ib:t,onError:s=>o(!0),alt:e.skillName})}function fP(e={diameter:50,progress:.7,color:"rgba(0, 0, 0, 0.6)"}){const t=e.diameter/2,a=Math.PI*t,o=a*(1-e.progress),s=a-o,c=o+","+s,d=l.jsx("circle",{r:t/2,cx:20,cy:21,fill:"none",stroke:e.color,strokeWidth:t,strokeDasharray:c,strokeDashoffset:a/4+o}),f=t,h=l.jsx("circle",{r:t+f/2,cx:20,cy:21,fill:"none",stroke:e.color,strokeWidth:f});return l.jsxs("svg",{width:48,height:48,style:{position:"absolute",left:"50%",marginLeft:-20,pointerEvents:"none"},children:[d,h]})}function EP(e={diameter:50,progress:.7,color:"rgba(0, 0, 0, 0.5)"}){const t=e.diameter/2,a=2*Math.PI*t,o=a*e.progress,s=a-o,c=o+","+s,d=l.jsx("circle",{r:t,cx:20,cy:21,fill:"none",stroke:e.color,strokeWidth:2,strokeDashoffset:a/4,strokeDasharray:c});return l.jsx("svg",{width:48,height:48,style:{position:"absolute",left:"50%",marginLeft:-20,pointerEvents:"none"},children:d})}function mP(e={diameter:50,progress:.7,color:"rgba(0, 0, 0, 0.5)"}){const t=e.diameter/2,a=Math.PI*t*2,o=a*e.progress,s=a-o,c=o+","+s,d=2*Math.PI*e.progress,f="#ffffffef",h=l.jsx("circle",{r:t,cx:20,cy:21,fill:"none",stroke:f,strokeWidth:1,strokeDasharray:c,strokeDashoffset:a/4}),m=l.jsx("line",{x1:20,y1:21,x2:20,y2:21-t,stroke:f,strokeWidth:1}),R=l.jsx("line",{x1:20,y1:21,x2:20+t*Math.cos(d-Math.PI/2),y2:21+t*Math.sin(d-Math.PI/2),stroke:f,strokeWidth:1});return l.jsxs("svg",{width:48,height:48,style:{position:"absolute",left:"50%",marginLeft:-20,pointerEvents:"none"},children:[h,m,R]})}function AP(e){const[t,a]=C.useState(l.jsx("div",{})),o=C.useContext(Nn),s=()=>{const G=I.getSkillInfo({game:I.getDisplayedGame(),skillName:e.skillName}),B=ha(o),K=[];if(G.status.ready()){let j="ready ("+G.stacksAvailable,$=" ("+G.stacksAvailable;G.timeTillNextStackReady>0&&(j+=") (next stack ready in "+G.timeTillNextStackReady.toFixed(3),$+=") ("+G.timeTillNextStackReady.toFixed(3)+""),j+=")",$+=")",K.push(N({en:j,zh:$}))}else{if(G.status.unavailableReasons.includes(Et.RequirementsNotMet)&&K.push(as(Et.RequirementsNotMet)),G.status.unavailableReasons.includes(Et.NotEnoughMP)&&K.push(as(Et.NotEnoughMP)+N({en:" (needs "+G.capturedManaCost+")",zh:" "+G.capturedManaCost+""})),G.status.unavailableReasons.includes(Et.Blocked)){const j=Math.max(G.timeTillNextStackReady,G.timeTillSecondaryReady??0),$=N({en:"possibly ready in "+G.timeTillAvailable.toFixed(3),zh:""+G.timeTillAvailable.toFixed(3)+""}),X=N({en:" (next stack ready in "+j.toFixed(3)+")",zh:""+j.toFixed(3)+"CD"});K.push(l.jsxs(l.Fragment,{children:[$,G.stacksAvailable<G.maxStacks?X:void 0]}))}G.status.unavailableReasons.includes(Et.NotInCombat)&&K.push(as(Et.NotInCombat))}const V=G.instantCast?0:G.castTime;let ae="";G.status.ready()&&(ae+=N({en:"cast: ",zh:""})+V.toFixed(3),G.llCovered&&V>Tn.epsilon&&(ae+=" (LL)"),ae+=N({en:", cast+delay: ",zh:" +"})+G.timeTillDamageApplication.toFixed(3));const oe=l.jsxs("div",{style:{color:I.displayingUpToDateGameState?B.text:B.historical},children:[l.jsx("div",{className:"paragraph",children:l.jsx("b",{children:Wa(e.skillName)})}),l.jsx("div",{className:"paragraph",children:K.map((j,$)=>l.jsxs("span",{children:[j,l.jsx("br",{})]},$))}),l.jsx("div",{className:"paragraph",children:ae})]});a(oe)},c={width:48,height:48,verticalAlign:"top",position:"relative",display:"inline-block"},d={width:40,height:40,position:"absolute",top:2,left:"50%",marginLeft:-20};let f="transparent";e.readyAsideFromCd||(f="rgba(0, 0, 0, 0.6)");const h=I.getSkillInfo({game:I.getDisplayedGame(),skillName:e.skillName}),m=h.stacksAvailable,R=h.maxStacks;let T;const S=48,g=S/3+4;let _,p;if(m>0){_="0 0 2px rgba(255, 50, 0, 1), 0 0 3px rgba(255, 100, 0, 1), 0 0 5px rgba(255, 100, 0, 1)";const G=m===R?5:3;for(let B=0;B<G;B++)_+=", 0 0 10px black";p="white"}else _="0 0 4px black, 0 0 8px black",p="rgb(223,60,60)";R>1?T=l.jsx("div",{tabIndex:-1,style:{fontFamily:"Goldman Regular",color:p,fontSize:`${g}px`,textShadow:_,width:g,textAlign:"center",bottom:2,right:1,zIndex:3,position:"absolute"},children:m}):T=l.jsx(l.Fragment,{});const O=l.jsx(fP,{diameter:38,progress:e.cdProgress,color:e.ready?"rgba(0, 0, 0, 0)":"rgba(0, 0, 0, 0.6)"}),y=l.jsx(mP,{diameter:38,progress:e.cdProgress,color:e.ready?"rgba(0, 0, 0, 0)":"rgba(255, 255, 255, 1.0)"}),L=e.secondaryCdProgress&&l.jsx(EP,{diameter:32,progress:e.secondaryCdProgress,color:"rgba(250,186,47,255)"}),P=l.jsx("img",{hidden:!e.highlight,src:"/misc/proc.png",alt:"skill proc",style:{position:"absolute",width:44,height:44,top:0,left:2,zIndex:2}}),D=l.jsxs("div",{onMouseEnter:s,children:[l.jsxs("div",{style:c,children:[" ",l.jsx(_b,{style:d,skillName:e.skillName}),l.jsxs("div",{style:{position:"absolute",width:40,height:41,top:1,left:"50%",marginLeft:-20,borderRadius:3,overflow:"hidden",zIndex:1,background:f},children:[e.cdProgress>1-Tn.epsilon||!e.readyAsideFromCd||O,e.cdProgress>1-Tn.epsilon||y,!e.secondaryCdProgress||e.secondaryCdProgress>1-Tn.epsilon||L]}),l.jsx("div",{style:{position:"absolute",width:S,height:S,background:"url('/misc/skillIcon_overlay.png') no-repeat"}})]}),P,T]}),k=l.jsx("span",{title:_n[e.skillName].name,className:"skillButton",children:l.jsx(Es,{onClickFn:()=>{I.requestUseSkill({skillName:e.skillName,targetList:e.targetList},!0)},content:D})});return l.jsxs(cb,{delay:0,hoverable:!1,children:[l.jsx(aP,{render:k}),l.jsx(Ab,{container:document.getElementById("skillsWindowAnchor"),children:l.jsx(Sb,{sideOffset:3,side:"top",className:"tooltip-positioner",children:l.jsx(gb,{className:"info-tooltip tooltip",children:t})})})]})}let pb=e=>{};function RP(){const[e,t]=C.useState([]),[a,o]=C.useState("1"),[s,c]=C.useState("Now"),[d,f]=C.useState("0:00"),h=Array(bi).fill(!1);h[0]=!0;const[m,R]=C.useState(h),[T,S]=C.useState(0),g=()=>{const j=m.flatMap(($,X)=>$&&X!==T?[X+1]:[]);return j.splice(0,0,T+1),j},_=Tt();C.useEffect(()=>{pb=j=>t(j)},[]);const p=j=>{!j||!j.target||o(j.target.value)},O=j=>{j.preventDefault();const $=parseFloat(a);if(!isNaN($))if(s==="Now")I.step($,!0);else if(s==="LastSkill"){const X=I.game.time-I.lastSkillTime,ce=$-X;ce<=0?window.alert("Invalid input: trying to jump to "+$+"s since the last action, but "+X+"s has already elapsed."):I.step(ce,!0)}else console.assert(!1)},y=j=>{!j||!j.target||f(j.target.value)},L=j=>{j.preventDefault();const $=Vi(d);isNaN($)||($>(I.displayingUpToDateGameState?I.game.getDisplayTime():I.savedHistoricalGame.getDisplayTime())?I.stepUntil($,!0):window.alert("Can only jump to a time in the future!"))},P=j=>c(j.target.value),D=()=>I.removeTrailingIdleTime(),k=()=>I.waitTillNextMpOrLucidTick(),G=j=>{let $=m.reduce((w,z)=>z?w+1:w,0);const X=parseInt(j.target.value),ce=m.slice();if(X>0&&X<$){for(let w=ce.length-1;w>=0&&(w!==T&&ce[w]&&(ce[w]=!1,$--),$!==X);w--);R(ce)}else if(X>$){for(let w=0;w<ce.length&&(ce[w]||(ce[w]=!0,$++),X!==$);w++);R(ce)}},B=e.map((j,$)=>{const X=j.skillName,ce=j?!j.status.unavailableReasons.some(w=>w!==Et.Blocked):!1;return l.jsx(AP,{highlight:j?j.highlight:!1,skillName:X,ready:j?j.status.ready():!1,readyAsideFromCd:ce,cdProgress:j?1-j.timeTillNextStackReady/j.cdRecastTime:1,secondaryCdProgress:j&&j.secondaryCdRecastTime&&j.timeTillSecondaryReady?1-j.timeTillSecondaryReady/j.secondaryCdRecastTime:1,targetList:g()},$)}),K=l.jsx(ze,{topic:"waitUntilInputFormat",content:l.jsxs("div",{children:[l.jsx("div",{className:"paragraph",children:N({en:"Examples:",zh:""})}),l.jsxs("div",{className:"paragraph",children:["12 ",l.jsx("br",{}),"1.5 ",l.jsx("br",{}),"10:04.2 ",l.jsx("br",{}),"-0:03"]})]})}),V={display:"inline-block",flex:"auto"},ae={outline:"none",border:"none",borderBottom:"1px solid "+_.text,borderRadius:0,background:"transparent",color:_.text},oe=l.jsx(ze,{topic:"targetCount",content:N({en:l.jsxs(l.Fragment,{children:[l.jsx("span",{children:"The number of targets hit by the next ability. Damage fall-off is automatically computed. If the number of targets set is more than the number of enemies the ability can hit, then the additional targets are ignored."}),l.jsx("br",{}),l.jsx("br",{}),l.jsxs("span",{children:["An ",l.jsx("span",{style:{color:_.timeline.aggroMark},children:"orange"})," star indicates which enemy is the primary target, and a"," ",l.jsx("span",{style:{color:_.accent},children:"purple"}),' checkmark indicates which enemies are additionally hit by the attack. Modifying the "# of targets" field will automatically change these boxes, and vice versa.'," "]}),l.jsx("br",{}),l.jsx("br",{}),l.jsxs("span",{children:["Exactly one primary target must be selected at all times. Clicking an un-selected enemy turns it into the primary target. When multiple enemies are selected, clicking on the primary target will demote it to a secondary target, and clicking on a secondary target will de-target it."," "]}),l.jsx("br",{}),l.jsx("br",{}),l.jsx("span",{children:"Damage calculations with party buff markers for enemy debuffs like Dokumori and Chain Stratagem may be inaccurate when multiple targets are selected."})]}),zh:l.jsxs("div",{children:[l.jsx("span",{children:"2"}),l.jsx("br",{}),l.jsx("br",{}),l.jsxs("span",{children:[l.jsx("span",{style:{color:_.timeline.aggroMark},children:""}),"",l.jsx("span",{style:{color:_.accent},children:""}),""]}),l.jsx("br",{}),l.jsx("br",{}),l.jsx("span",{children:""}),l.jsx("br",{}),l.jsx("br",{}),l.jsx("span",{children:""})]})})});return l.jsx("div",{className:"skillsWindow",id:"skillsWindowAnchor",children:l.jsxs("div",{className:"skillIcons",children:[l.jsx("style",{children:`
				.info-tooltip {
					color: ${_.text};
					background-color: ${_.tipBackground};
					opacity: 0.98;
					max-width: 300px;
					outline: 1px solid ${_.bgHighContrast};
					transition: none;
					font-size: 100%;
					z-index: 10;
				}
			`}),B,l.jsxs("div",{style:{margin:"10px 0"},children:[N({en:"# of targets hit",zh:""})," ",oe,":"," ",l.jsx("input",{type:"number",min:1,max:bi,style:{width:30,...ae},value:m.filter(j=>j).length,onChange:G}),l.jsx(SC,{style:{width:"75%",marginBlock:"5px"},selected:m,primary:T,primaryOnly:!1,onSelectedChange:R,onPrimaryChange:S}),l.jsxs("div",{style:{display:"flex",flexDirection:"row",marginBottom:6},children:[N({en:l.jsxs("form",{onSubmit:O,style:V,children:["Wait until"," ",l.jsx("input",{type:"text",style:{width:40,...ae},value:a,onChange:p})," ","second(s) since"," ",l.jsxs("select",{style:{display:"inline-block",outline:"none"},value:s,onChange:P,children:[l.jsx("option",{value:"Now",children:"now"}),l.jsx("option",{value:"LastSkill",children:"last action"})]})," ",l.jsx("input",{type:"submit",value:"GO"})]}),zh:l.jsxs("form",{onSubmit:O,style:V,children:[""," ",l.jsxs("select",{style:{display:"inline-block",outline:"none"},value:s,onChange:P,children:[l.jsx("option",{value:"Now",children:""}),l.jsx("option",{value:"LastSkill",children:""})]})," ",""," ",l.jsx("input",{type:"text",style:{width:30,...ae},value:a,onChange:p})," "," ",l.jsx("input",{type:"submit",value:"GO"})]}),ja:l.jsxs("form",{onSubmit:O,style:V,children:[l.jsxs("select",{style:{display:"inline-block",outline:"none",marginRight:"4px"},value:s,onChange:P,children:[l.jsx("option",{value:"Now",children:""}),l.jsx("option",{value:"LastSkill",children:""})]}),"",l.jsx("input",{type:"text",style:{width:30,...ae},value:a,onChange:p}),"",l.jsx("input",{type:"submit",value:"GO"})]})}),N({en:l.jsxs("form",{onSubmit:L,style:V,children:["Wait until ",K," ",l.jsx("input",{type:"text",style:{width:60,...ae},value:d,onChange:y}),l.jsx("input",{type:"submit",value:"GO"})]}),zh:l.jsxs("form",{onSubmit:L,style:V,children:[" ",K," ",l.jsx("input",{type:"text",style:{width:60,...ae},value:d,onChange:y}),l.jsx("input",{type:"submit",value:"GO"})]}),ja:l.jsxs("form",{onSubmit:L,style:V,children:[" ",K," ",l.jsx("input",{type:"text",style:{width:60,...ae},value:d,onChange:y}),l.jsx("input",{type:"submit",value:"GO"})]})})]}),l.jsx("button",{onClick:k,children:N({en:"Wait until MP tick / lucid tick",zh:"/"})}),l.jsx("span",{children:" "}),l.jsx("button",{onClick:D,children:N({en:"Remove trailing idle time",zh:""})})]})]})})}let Al=()=>{};function TP(e){const[t,a]=C.useState("(untitled)"),o=s=>a(s);return l.jsxs("form",{children:[l.jsx(jt,{style:{display:"inline-block",marginTop:"10px"},defaultValue:t,description:N({en:"name: ",zh:""}),width:30,onChange:o}),l.jsx("span",{children:" "}),l.jsx("button",{type:"submit",disabled:!e.enabled,onClick:s=>{I.addSelectionToPreset(t),s.preventDefault()},children:N({en:"add selection to preset",zh:""})})]})}function SP(e){const t=e.line,a=[];let o=0;const s={margin:"0 1px",width:"18px",verticalAlign:"middle"};for(const d of t.actions)if(d.info.type===ke.Skill){const f=d.info.skillName;a.push(l.jsx(_b,{style:s,skillName:f},o)),o++}const c=l.jsxs("span",{children:[t.name," (",a,")"]});return l.jsxs("div",{style:{marginBottom:"8px"},children:[l.jsx(Es,{content:c,onClickFn:()=>{const d=I.record.selectionStartIndex;I.displayingUpToDateGameState?(I.tryAddLine(t,vn.SkillSequence),I.updateAllDisplay(),I.scrollToTime()):d!==void 0&&I.undoStack.doThenPush(new OT(t.actions,d,"preset"))}}),l.jsx("span",{children:" "}),l.jsx(Es,{content:"[x]",onClickFn:()=>{I.deleteLine(t)}})]})}function gP(){const e=C.useContext(Nn),[,t]=C.useReducer(c=>c+1,0);C.useEffect(()=>(Al=()=>t(),()=>{Al=()=>{}}),[]);const a=I.record.getFirstSelection()!==void 0,o=Sl(e,"bgMediumContrast"),s=l.jsxs("div",{children:[l.jsx("button",{style:{marginBottom:10},onClick:()=>{I.deleteAllLines()},children:N({en:"clear all presets",zh:""})}),l.jsx(qh,{allowLoadFromUrl:!1,defaultLoadUrl:"https://miyehn.me/ffxiv-blm-rotation/presets/lines/default.txt",onLoadFn:c=>{c.fileType===di.SkillSequencePresets?I.appendFilePresets(c):window.alert("incorrect file type '"+c.fileType+"'")}}),l.jsxs("div",{style:{outline:"1px solid "+o,margin:"10px 0",padding:"10px"},children:[I.getPresetLines().map((c,d)=>l.jsx(SP,{line:c},d)),l.jsx(TP,{enabled:a}),l.jsx("div",{style:{marginTop:16},children:l.jsx(Rl,{fileFormat:vo.Json,getContentFn:()=>I.serializedPresets(),filename:"presets",displayName:N({en:"download presets to file",zh:""})})})]})]});return l.jsx(Tl,{title:N({en:"Skill sequence presets",zh:""}),content:s,defaultShow:!1})}const Oi=4;var ot=(e=>(e.s_Cursor="s_Cursor",e.s_HistoricalCursor="s_HistoricalCursor",e.DamageMark="DamageMark",e.HealingMark="HealingMark",e.AggroMark="AggroMark",e.LucidMark="LucidMark",e.MPTickMark="MPTickMark",e.MeditateTickMark="MeditateTickMark",e.AutoTickMark="AutoTickMark",e.Skill="Skill",e.Marker="Marker",e.WarningMark="WarningMark",e.Buff="Buff",e))(ot||{});const qi=-1;var Qn=(e=>(e.Info="Info",e.Untargetable="Untargetable",e.Buff="Buff",e))(Qn||{});function IP(e){return e.type==="s_Cursor"||e.type==="s_HistoricalCursor"}let _P=class{scale;startTime;elapsedTime;sharedElements;slots;activeSlotIndex;#e;#t;#n;constructor(){this.scale=.25,this.startTime=0,this.elapsedTime=0,this.sharedElements=[],this.slots=[],this.activeSlotIndex=-1,this.#e=[],this.#t=[],this.#n=[],this.#u()}setTimeSegment(t,a){this.startTime=t,this.elapsedTime=a}addElement(t){IP(t)?this.sharedElements.push(t):(console.assert(this.slots.length>0),this.slots[this.activeSlotIndex].elements.push(t))}invalidateLastElement(){if(this.slots.length>0){const t=this.slots[this.activeSlotIndex].elements;for(let a=t.length-1;a>=0;a--){const o=t[a];if(o.type==="Skill"){o.node.tmp_invalid_reasons=[Et.CastCanceled];return}}}}tryGetElement(t,a){return this.slots[this.activeSlotIndex].elements.find(o=>o.time===t&&o.type===a)}getAllMarkers(){return this.#e}getUntargetableMarkers(){return this.#t}getBuffMarkers(){return this.#n}#a(t,a){const o=function(s,c){return Math.abs(s-c)<Tn.epsilon};return!(t.markerType!==a.markerType||!o(t.time,a.time)||!o(t.duration,a.duration)||t.color!==a.color||t.track!==a.track||t.showText!==a.showText||t.description!==a.description)}addMarker(t){this.#e.push(t),t.markerType==="Untargetable"?this.#t.push(t):t.markerType==="Buff"&&this.#n.push(t),this.drawElements(),this.#r()}deleteMarker(t){let a=!1;for(let o=0;o<this.#e.length;o++)t===this.#e[o]&&(this.#e.splice(o,1),this.drawElements(),this.#r(),a=!0);return this.#i(),this.#c(),a}#i(){this.#t=[],this.#e.forEach(t=>{t.markerType==="Untargetable"&&this.#t.push(t)}),Mn()}#c(){this.#n=[],this.#e.forEach(t=>{t.markerType==="Buff"&&(t.description==="Wanderer's Minuet"&&(t.description=H.WanderersMinuet),this.#n.push(t))})}sortAndRemoveDuplicateMarkers(){this.#e.sort((a,o)=>a.time-o.time);let t=0;for(let a=this.#e.length-1;a>0;a--)this.#a(this.#e[a],this.#e[a-1])&&(this.#e.splice(a,1),t++);return this.#i(),this.#c(),this.#r(),t}#s(t,a,o,s){let c=t.markers.map(d=>({time:d.time+o,duration:d.duration,color:d.color,description:d.description,track:d.markerType==="Untargetable"?qi:a,type:"Marker",markerType:d.markerType??"Info",showText:d.showText??!1}));s!==void 0&&(c=c.filter(d=>s===void 0||d.time<=s+Tn.epsilon)),this.#e=this.#e.concat(c),this.#i(),this.#c(),this.#r()}loadCombinedTracksPreset(t,a,o){if(t.fileType!==di.MarkerTracksCombined){window.alert("wrong file type '"+t.fileType+"'");return}t.tracks.forEach(s=>{this.loadIndividualTrackPreset(s,s.track,a,o)})}loadIndividualTrackPreset(t,a,o,s){if(t.fileType!==di.MarkerTrackIndividual){window.alert("wrong file type '"+t.fileType+"'");return}this.#s(t,a,o,s)}deleteAllMarkers(){const t=this.#t.length>0;this.#e=[],this.#t=[],this.#n=[],this.drawElements(),t&&Mn(),this.#r()}addSlotAtIndex(t){if(t<0||t>this.slots.length||this.slots.length+1>Oi){console.error("attempted to add slot at invalid index",t);return}for(let a=Oi-1;a>=t;a--){let o=Rt(`gameRecord${a}`);o!==null&&St(`gameRecord${a+1}`,o),o=Rt(`gameTimeInfo${a}`),o!==null&&St(`gameTimeInfo${a+1}`,o)}this.slots.splice(t,0,{job:"BLM",elements:[]}),this.activeSlotIndex=t,I.setConfigAndRestart(I.gameConfig)}addSlot(){this.addSlotAtIndex(this.slots.length)}removeSlot(t){console.assert(t<this.slots.length);for(let a=t;a<Oi;a++){let o=Rt("gameRecord"+(a+1).toString());o!==null&&St("gameRecord"+a.toString(),o),o=Rt("gameTimeInfo"+(a+1).toString()),o!==null&&St("gameTimeInfo"+a.toString(),o)}this.slots.splice(t,1);for(let a=this.slots.length;a<Oi;a++)$A("gameRecord"+a.toString()),$A("gameTimeInfo"+a.toString());this.activeSlotIndex>=t&&(this.activeSlotIndex=Math.max(0,this.activeSlotIndex-1)),this.loadSlot(this.activeSlotIndex),St("activeSlotIndex",this.activeSlotIndex.toString())}saveCurrentSlot(t,a,o){St("gameRecord"+this.activeSlotIndex.toString(),JSON.stringify(t)),St("gameTimeInfo"+this.activeSlotIndex.toString(),JSON.stringify({countdown:a,elapsedTime:o})),I.gameConfig.savePartialConfig()}loadSlot(t){const a=Rt("gameRecord"+t.toString());if(a!==null){for(this.activeSlotIndex=t;this.slots.length<=t;)this.slots.push({job:"BLM",elements:[]});const o=JSON.parse(a);return I.loadBattleRecordFromFile(o),this.slots[t].job=I.game.job,!0}else return!1}reset(){this.startTime=0,this.elapsedTime=0,this.slots.length>0&&(this.slots[this.activeSlotIndex].elements=[]),this.sharedElements=[],this.addElement({type:"s_Cursor",time:0,displayTime:0}),this.addElement({type:"s_HistoricalCursor",time:0,displayTime:0,enabled:!1})}updateElem(t){console.assert(t&&t.type.substring(0,2)==="s_");for(let a=0;a<this.sharedElements.length;a++)if(this.sharedElements[a].type===t.type){this.sharedElements[a]=t;return}console.assert(!1)}setHorizontalScale(t){this.scale=t,this.drawElements()}getAllSlotsTimeInfo(){let t=0,a=0,o=!1;for(let s=0;s<Oi;s++){const c=Rt("gameTimeInfo"+s.toString());if(c!==null){const d=JSON.parse(c);t=Math.max(t,d.countdown),a=Math.max(a,d.elapsedTime),o=!0}}return o?{countdown:t,rightMostTime:a}:null}getCanvasWidth(){let t=Math.max(0,this.elapsedTime),a=I.gameConfig.countdown;const o=this.getAllSlotsTimeInfo();return o!==null&&(a=Math.max(a,o.countdown),t=Math.max(t,o.rightMostTime)),this.#e.forEach(c=>{const d=c.time+c.duration;t=Math.max(t,d+a)}),Math.ceil((t+Math.max(0,a)+4)/8)*8*100*this.scale}getCanvasHeight(){const t=this.getNumMarkerTracks();return pe.timelineCanvasHeight(t,this.slots.length)}positionFromTime(t){return t*this.scale*100}timeFromPosition(t){return t/(this.scale*100)}drawElements(){xo(),this.updateTimelineMarkers()}getTrackIndices(){return Array.from(new Set(this.#e.map(t=>t.track))).sort()}updateTimelineMarkers(){xo()}onClickTimelineAction(t,a){if(t<0||t>=I.record.length)return;I.record.onClickNode(t,a),Al(),Su();const o=I.record.selectionStartIndex;o!==void 0?I.displayHistoricalState(-1/0,o):I.displayHistoricalState(-1/0,t)}resizeSelection(t){const a=I.record.selectionStartIndex,o=I.record.selectionEndIndex;if(a!==void 0&&o!==void 0){const s=(I.record.startIsPivot?o:a)+(t?-1:1);s>=0&&s<I.record.length&&this.onClickTimelineAction(s,!0)}}getNumMarkerTracks(){let t=-1,a=!1;for(let o=0;o<this.#e.length;o++)t=Math.max(t,this.#e[o].track),this.#e[o].track===qi&&(a=!0);return a?t+2:t+1}duringUntargetable(t){for(let a=0;a<this.#t.length;a++){const o=this.#t[a],s=o.time,c=o.time+o.duration;if(t>=s&&t<c)return!0}return!1}getTargetableDurationBetween(t,a){const o=function([d,f],[h,m]){const R=[];return d<h&&R.push([d,Math.min(f,h)]),m<f&&R.push([Math.max(m,d),f]),R};let s=[[t,a]];for(let d=0;d<this.#t.length;d++){const f=this.#t[d],h=f.time,m=f.time+f.duration;let R=[];s.forEach(T=>{R=R.concat(o(T,[h,m]))}),s=R}let c=0;return s.forEach(d=>{c+=d[1]-d[0]}),c}#r(){const t=this.serializedSeparateMarkerTracks();St("timelineMarkers",JSON.stringify(t))}#u(){const t=Rt("timelineMarkers");t!==null&&JSON.parse(t).forEach(o=>{this.#s(o,o.track,0)})}serializedSeparateMarkerTracks(){const t=this.getNumMarkerTracks()-1,a=new Map;for(let s=qi;s<t+1;s++)a.set(s,[]);this.#e.forEach(s=>{const c=a.get(s.track);console.assert(c),c&&(c.push({time:s.time,markerType:s.markerType,duration:s.duration,description:s.description,color:s.color,showText:s.showText}),a.set(s.track,c))});const o=[];return a.forEach((s,c)=>{s.length>0&&o.push({fileType:di.MarkerTrackIndividual,track:c,markers:s})}),o}serializedCombinedMarkerTracks(){const t=this.serializedSeparateMarkerTracks();return{fileType:di.MarkerTracksCombined,tracks:t}}};function pP(e){return Ai({attr:{viewBox:"0 0 32 32"},child:[{tag:"path",attr:{d:"M 5 5 L 5 27 L 27 27 L 27 5 Z M 7 7 L 25 7 L 25 25 L 7 25 Z M 9 20 L 9 22 L 23 22 L 23 20 Z"},child:[]}]})(e)}const yf=C.createContext(null);yf.displayName="PanelGroupContext";const nn={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},gT=10,os=C.useLayoutEffect,zp=xR.useId,NP=typeof zp=="function"?zp:()=>null;let CP=0;function IT(e=null){const t=NP(),a=C.useRef(e||t||null);return a.current===null&&(a.current=""+CP++),e??a.current}function Nb({children:e,className:t="",collapsedSize:a,collapsible:o,defaultSize:s,forwardedRef:c,id:d,maxSize:f,minSize:h,onCollapse:m,onExpand:R,onResize:T,order:S,style:g,tagName:_="div",...p}){const O=C.useContext(yf);if(O===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:y,expandPanel:L,getPanelSize:P,getPanelStyle:D,groupId:k,isPanelCollapsed:G,reevaluatePanelConstraints:B,registerPanel:K,resizePanel:V,unregisterPanel:ae}=O,oe=IT(d),j=C.useRef({callbacks:{onCollapse:m,onExpand:R,onResize:T},constraints:{collapsedSize:a,collapsible:o,defaultSize:s,maxSize:f,minSize:h},id:oe,idIsFromProps:d!==void 0,order:S});C.useRef({didLogMissingDefaultSizeWarning:!1}),os(()=>{const{callbacks:X,constraints:ce}=j.current,w={...ce};j.current.id=oe,j.current.idIsFromProps=d!==void 0,j.current.order=S,X.onCollapse=m,X.onExpand=R,X.onResize=T,ce.collapsedSize=a,ce.collapsible=o,ce.defaultSize=s,ce.maxSize=f,ce.minSize=h,(w.collapsedSize!==ce.collapsedSize||w.collapsible!==ce.collapsible||w.maxSize!==ce.maxSize||w.minSize!==ce.minSize)&&B(j.current,w)}),os(()=>{const X=j.current;return K(X),()=>{ae(X)}},[S,oe,K,ae]),C.useImperativeHandle(c,()=>({collapse:()=>{y(j.current)},expand:X=>{L(j.current,X)},getId(){return oe},getSize(){return P(j.current)},isCollapsed(){return G(j.current)},isExpanded(){return!G(j.current)},resize:X=>{V(j.current,X)}}),[y,L,P,G,oe,V]);const $=D(j.current,s);return C.createElement(_,{...p,children:e,className:t,id:oe,style:{...$,...g},[nn.groupId]:k,[nn.panel]:"",[nn.panelCollapsible]:o||void 0,[nn.panelId]:oe,[nn.panelSize]:parseFloat(""+$.flexGrow).toFixed(1)})}const Cb=C.forwardRef((e,t)=>C.createElement(Nb,{...e,forwardedRef:t}));Nb.displayName="Panel";Cb.displayName="forwardRef(Panel)";let fR=null,mh=-1,ul=null;function bP(e,t){if(t){const a=(t&vb)!==0,o=(t&Mb)!==0,s=(t&Lb)!==0,c=(t&xb)!==0;if(a)return s?"se-resize":c?"ne-resize":"e-resize";if(o)return s?"sw-resize":c?"nw-resize":"w-resize";if(s)return"s-resize";if(c)return"n-resize"}switch(e){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function OP(){ul!==null&&(document.head.removeChild(ul),fR=null,ul=null,mh=-1)}function xA(e,t){var a,o;const s=bP(e,t);if(fR!==s){if(fR=s,ul===null&&(ul=document.createElement("style"),document.head.appendChild(ul)),mh>=0){var c;(c=ul.sheet)===null||c===void 0||c.removeRule(mh)}mh=(a=(o=ul.sheet)===null||o===void 0?void 0:o.insertRule(`*{cursor: ${s} !important;}`))!==null&&a!==void 0?a:-1}}function bb(e){return e.type==="keydown"}function Ob(e){return e.type.startsWith("pointer")}function Db(e){return e.type.startsWith("mouse")}function vf(e){if(Ob(e)){if(e.isPrimary)return{x:e.clientX,y:e.clientY}}else if(Db(e))return{x:e.clientX,y:e.clientY};return{x:1/0,y:1/0}}function DP(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function yP(e,t,a){return e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y}function vP(e,t){if(e===t)throw new Error("Cannot compare node with itself");const a={a:Vp(e),b:Vp(t)};let o;for(;a.a.at(-1)===a.b.at(-1);)e=a.a.pop(),t=a.b.pop(),o=e;qe(o,"Stacking order can only be calculated for elements with a common ancestor");const s={a:Kp(Yp(a.a)),b:Kp(Yp(a.b))};if(s.a===s.b){const c=o.childNodes,d={a:a.a.at(-1),b:a.b.at(-1)};let f=c.length;for(;f--;){const h=c[f];if(h===d.a)return 1;if(h===d.b)return-1}}return Math.sign(s.a-s.b)}const MP=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function LP(e){var t;const a=getComputedStyle((t=yb(e))!==null&&t!==void 0?t:e).display;return a==="flex"||a==="inline-flex"}function xP(e){const t=getComputedStyle(e);return!!(t.position==="fixed"||t.zIndex!=="auto"&&(t.position!=="static"||LP(e))||+t.opacity<1||"transform"in t&&t.transform!=="none"||"webkitTransform"in t&&t.webkitTransform!=="none"||"mixBlendMode"in t&&t.mixBlendMode!=="normal"||"filter"in t&&t.filter!=="none"||"webkitFilter"in t&&t.webkitFilter!=="none"||"isolation"in t&&t.isolation==="isolate"||MP.test(t.willChange)||t.webkitOverflowScrolling==="touch")}function Yp(e){let t=e.length;for(;t--;){const a=e[t];if(qe(a,"Missing node"),xP(a))return a}return null}function Kp(e){return e&&Number(getComputedStyle(e).zIndex)||0}function Vp(e){const t=[];for(;e;)t.push(e),e=yb(e);return t}function yb(e){const{parentNode:t}=e;return t&&t instanceof ShadowRoot?t.host:t}const vb=1,Mb=2,Lb=4,xb=8,HP=DP()==="coarse";let vi=[],Lr=!1,$l=new Map,Mf=new Map;const Ru=new Set;function kP(e,t,a,o,s){var c;const{ownerDocument:d}=t,f={direction:a,element:t,hitAreaMargins:o,setResizeHandlerState:s},h=(c=$l.get(d))!==null&&c!==void 0?c:0;return $l.set(d,h+1),Ru.add(f),Wh(),function(){var R;Mf.delete(e),Ru.delete(f);const T=(R=$l.get(d))!==null&&R!==void 0?R:1;if($l.set(d,T-1),Wh(),T===1&&$l.delete(d),vi.includes(f)){const S=vi.indexOf(f);S>=0&&vi.splice(S,1),pT(),s("up",!0,null)}}}function UP(e){const{target:t}=e,{x:a,y:o}=vf(e);Lr=!0,_T({target:t,x:a,y:o}),Wh(),vi.length>0&&(Xh("down",e),e.preventDefault(),Hb(t)||e.stopImmediatePropagation())}function HA(e){const{x:t,y:a}=vf(e);if(Lr&&e.buttons===0&&(Lr=!1,Xh("up",e)),!Lr){const{target:o}=e;_T({target:o,x:t,y:a})}Xh("move",e),pT(),vi.length>0&&e.preventDefault()}function kA(e){const{target:t}=e,{x:a,y:o}=vf(e);Mf.clear(),Lr=!1,vi.length>0&&(e.preventDefault(),Hb(t)||e.stopImmediatePropagation()),Xh("up",e),_T({target:t,x:a,y:o}),pT(),Wh()}function Hb(e){let t=e;for(;t;){if(t.hasAttribute(nn.resizeHandle))return!0;t=t.parentElement}return!1}function _T({target:e,x:t,y:a}){vi.splice(0);let o=null;(e instanceof HTMLElement||e instanceof SVGElement)&&(o=e),Ru.forEach(s=>{const{element:c,hitAreaMargins:d}=s,f=c.getBoundingClientRect(),{bottom:h,left:m,right:R,top:T}=f,S=HP?d.coarse:d.fine;if(t>=m-S&&t<=R+S&&a>=T-S&&a<=h+S){if(o!==null&&document.contains(o)&&c!==o&&!c.contains(o)&&!o.contains(c)&&vP(o,c)>0){let _=o,p=!1;for(;_&&!_.contains(c);){if(yP(_.getBoundingClientRect(),f)){p=!0;break}_=_.parentElement}if(p)return}vi.push(s)}})}function UA(e,t){Mf.set(e,t)}function pT(){let e=!1,t=!1;vi.forEach(o=>{const{direction:s}=o;s==="horizontal"?e=!0:t=!0});let a=0;Mf.forEach(o=>{a|=o}),e&&t?xA("intersection",a):e?xA("horizontal",a):t?xA("vertical",a):OP()}let PA=new AbortController;function Wh(){PA.abort(),PA=new AbortController;const e={capture:!0,signal:PA.signal};Ru.size&&(Lr?(vi.length>0&&$l.forEach((t,a)=>{const{body:o}=a;t>0&&(o.addEventListener("contextmenu",kA,e),o.addEventListener("pointerleave",HA,e),o.addEventListener("pointermove",HA,e))}),window.addEventListener("pointerup",kA,e),window.addEventListener("pointercancel",kA,e)):$l.forEach((t,a)=>{const{body:o}=a;t>0&&(o.addEventListener("pointerdown",UP,e),o.addEventListener("pointermove",HA,e))}))}function Xh(e,t){Ru.forEach(a=>{const{setResizeHandlerState:o}=a,s=vi.includes(a);o(e,s,t)})}function PP(){const[e,t]=C.useState(0);return C.useCallback(()=>t(a=>a+1),[])}function qe(e,t){if(!e)throw console.error(t),Error(t)}function fs(e,t,a=gT){return e.toFixed(a)===t.toFixed(a)?0:e>t?1:-1}function bo(e,t,a=gT){return fs(e,t,a)===0}function za(e,t,a){return fs(e,t,a)===0}function wP(e,t,a){if(e.length!==t.length)return!1;for(let o=0;o<e.length;o++){const s=e[o],c=t[o];if(!za(s,c,a))return!1}return!0}function Cr({panelConstraints:e,panelIndex:t,size:a}){const o=e[t];qe(o!=null,`Panel constraints not found for index ${t}`);let{collapsedSize:s=0,collapsible:c,maxSize:d=100,minSize:f=0}=o;if(fs(a,f)<0)if(c){const h=(s+f)/2;fs(a,h)<0?a=s:a=f}else a=f;return a=Math.min(d,a),a=parseFloat(a.toFixed(gT)),a}function ou({delta:e,initialLayout:t,panelConstraints:a,pivotIndices:o,prevLayout:s,trigger:c}){if(za(e,0))return t;const d=[...t],[f,h]=o;qe(f!=null,"Invalid first pivot index"),qe(h!=null,"Invalid second pivot index");let m=0;if(c==="keyboard"){{const T=e<0?h:f,S=a[T];qe(S,`Panel constraints not found for index ${T}`);const{collapsedSize:g=0,collapsible:_,minSize:p=0}=S;if(_){const O=t[T];if(qe(O!=null,`Previous layout not found for panel index ${T}`),za(O,g)){const y=p-O;fs(y,Math.abs(e))>0&&(e=e<0?0-y:y)}}}{const T=e<0?f:h,S=a[T];qe(S,`No panel constraints found for index ${T}`);const{collapsedSize:g=0,collapsible:_,minSize:p=0}=S;if(_){const O=t[T];if(qe(O!=null,`Previous layout not found for panel index ${T}`),za(O,p)){const y=O-g;fs(y,Math.abs(e))>0&&(e=e<0?0-y:y)}}}}{const T=e<0?1:-1;let S=e<0?h:f,g=0;for(;;){const p=t[S];qe(p!=null,`Previous layout not found for panel index ${S}`);const y=Cr({panelConstraints:a,panelIndex:S,size:100})-p;if(g+=y,S+=T,S<0||S>=a.length)break}const _=Math.min(Math.abs(e),Math.abs(g));e=e<0?0-_:_}{let S=e<0?f:h;for(;S>=0&&S<a.length;){const g=Math.abs(e)-Math.abs(m),_=t[S];qe(_!=null,`Previous layout not found for panel index ${S}`);const p=_-g,O=Cr({panelConstraints:a,panelIndex:S,size:p});if(!za(_,O)&&(m+=_-O,d[S]=O,m.toPrecision(3).localeCompare(Math.abs(e).toPrecision(3),void 0,{numeric:!0})>=0))break;e<0?S--:S++}}if(wP(s,d))return s;{const T=e<0?h:f,S=t[T];qe(S!=null,`Previous layout not found for panel index ${T}`);const g=S+m,_=Cr({panelConstraints:a,panelIndex:T,size:g});if(d[T]=_,!za(_,g)){let p=g-_,y=e<0?h:f;for(;y>=0&&y<a.length;){const L=d[y];qe(L!=null,`Previous layout not found for panel index ${y}`);const P=L+p,D=Cr({panelConstraints:a,panelIndex:y,size:P});if(za(L,D)||(p-=D-L,d[y]=D),za(p,0))break;e>0?y--:y++}}}const R=d.reduce((T,S)=>S+T,0);return za(R,100)?d:s}function GP({layout:e,panelsArray:t,pivotIndices:a}){let o=0,s=100,c=0,d=0;const f=a[0];qe(f!=null,"No pivot index found"),t.forEach((T,S)=>{const{constraints:g}=T,{maxSize:_=100,minSize:p=0}=g;S===f?(o=p,s=_):(c+=p,d+=_)});const h=Math.min(s,100-c),m=Math.max(o,100-d),R=e[f];return{valueMax:h,valueMin:m,valueNow:R}}function Tu(e,t=document){return Array.from(t.querySelectorAll(`[${nn.resizeHandleId}][data-panel-group-id="${e}"]`))}function kb(e,t,a=document){const s=Tu(e,a).findIndex(c=>c.getAttribute(nn.resizeHandleId)===t);return s??null}function Ub(e,t,a){const o=kb(e,t,a);return o!=null?[o,o+1]:[-1,-1]}function Pb(e,t=document){var a;if(t instanceof HTMLElement&&(t==null||(a=t.dataset)===null||a===void 0?void 0:a.panelGroupId)==e)return t;const o=t.querySelector(`[data-panel-group][data-panel-group-id="${e}"]`);return o||null}function Lf(e,t=document){const a=t.querySelector(`[${nn.resizeHandleId}="${e}"]`);return a||null}function BP(e,t,a,o=document){var s,c,d,f;const h=Lf(t,o),m=Tu(e,o),R=h?m.indexOf(h):-1,T=(s=(c=a[R])===null||c===void 0?void 0:c.id)!==null&&s!==void 0?s:null,S=(d=(f=a[R+1])===null||f===void 0?void 0:f.id)!==null&&d!==void 0?d:null;return[T,S]}function FP({committedValuesRef:e,eagerValuesRef:t,groupId:a,layout:o,panelDataArray:s,panelGroupElement:c,setLayout:d}){C.useRef({didWarnAboutMissingResizeHandle:!1}),os(()=>{if(!c)return;const f=Tu(a,c);for(let h=0;h<s.length-1;h++){const{valueMax:m,valueMin:R,valueNow:T}=GP({layout:o,panelsArray:s,pivotIndices:[h,h+1]}),S=f[h];if(S!=null){const g=s[h];qe(g,`No panel data found for index "${h}"`),S.setAttribute("aria-controls",g.id),S.setAttribute("aria-valuemax",""+Math.round(m)),S.setAttribute("aria-valuemin",""+Math.round(R)),S.setAttribute("aria-valuenow",T!=null?""+Math.round(T):"")}}return()=>{f.forEach((h,m)=>{h.removeAttribute("aria-controls"),h.removeAttribute("aria-valuemax"),h.removeAttribute("aria-valuemin"),h.removeAttribute("aria-valuenow")})}},[a,o,s,c]),C.useEffect(()=>{if(!c)return;const f=t.current;qe(f,"Eager values not found");const{panelDataArray:h}=f,m=Pb(a,c);qe(m!=null,`No group found for id "${a}"`);const R=Tu(a,c);qe(R,`No resize handles found for group id "${a}"`);const T=R.map(S=>{const g=S.getAttribute(nn.resizeHandleId);qe(g,"Resize handle element has no handle id attribute");const[_,p]=BP(a,g,h,c);if(_==null||p==null)return()=>{};const O=y=>{if(!y.defaultPrevented)switch(y.key){case"Enter":{y.preventDefault();const L=h.findIndex(P=>P.id===_);if(L>=0){const P=h[L];qe(P,`No panel data found for index ${L}`);const D=o[L],{collapsedSize:k=0,collapsible:G,minSize:B=0}=P.constraints;if(D!=null&&G){const K=ou({delta:za(D,k)?B-k:k-D,initialLayout:o,panelConstraints:h.map(V=>V.constraints),pivotIndices:Ub(a,g,c),prevLayout:o,trigger:"keyboard"});o!==K&&d(K)}}break}}};return S.addEventListener("keydown",O),()=>{S.removeEventListener("keydown",O)}});return()=>{T.forEach(S=>S())}},[c,e,t,a,o,s,d])}function Wp(e,t){if(e.length!==t.length)return!1;for(let a=0;a<e.length;a++)if(e[a]!==t[a])return!1;return!0}function wb(e,t){const a=e==="horizontal",{x:o,y:s}=vf(t);return a?o:s}function jP(e,t,a,o,s){const c=a==="horizontal",d=Lf(t,s);qe(d,`No resize handle element found for id "${t}"`);const f=d.getAttribute(nn.groupId);qe(f,"Resize handle element has no group id attribute");let{initialCursorPosition:h}=o;const m=wb(a,e),R=Pb(f,s);qe(R,`No group element found for id "${f}"`);const T=R.getBoundingClientRect(),S=c?T.width:T.height;return(m-h)/S*100}function zP(e,t,a,o,s,c){if(bb(e)){const d=a==="horizontal";let f=0;e.shiftKey?f=100:s!=null?f=s:f=10;let h=0;switch(e.key){case"ArrowDown":h=d?0:f;break;case"ArrowLeft":h=d?-f:0;break;case"ArrowRight":h=d?f:0;break;case"ArrowUp":h=d?0:-f;break;case"End":h=100;break;case"Home":h=-100;break}return h}else return o==null?0:jP(e,t,a,o,c)}function YP({panelDataArray:e}){const t=Array(e.length),a=e.map(c=>c.constraints);let o=0,s=100;for(let c=0;c<e.length;c++){const d=a[c];qe(d,`Panel constraints not found for index ${c}`);const{defaultSize:f}=d;f!=null&&(o++,t[c]=f,s-=f)}for(let c=0;c<e.length;c++){const d=a[c];qe(d,`Panel constraints not found for index ${c}`);const{defaultSize:f}=d;if(f!=null)continue;const h=e.length-o,m=s/h;o++,t[c]=m,s-=m}return t}function gr(e,t,a){t.forEach((o,s)=>{const c=e[s];qe(c,`Panel data not found for index ${s}`);const{callbacks:d,constraints:f,id:h}=c,{collapsedSize:m=0,collapsible:R}=f,T=a[h];if(T==null||o!==T){a[h]=o;const{onCollapse:S,onExpand:g,onResize:_}=d;_&&_(o,T),R&&(S||g)&&(g&&(T==null||bo(T,m))&&!bo(o,m)&&g(),S&&(T==null||!bo(T,m))&&bo(o,m)&&S())}})}function oh(e,t){if(e.length!==t.length)return!1;for(let a=0;a<e.length;a++)if(e[a]!=t[a])return!1;return!0}function KP({defaultSize:e,dragState:t,layout:a,panelData:o,panelIndex:s,precision:c=3}){const d=a[s];let f;return d==null?f=e!=null?e.toPrecision(c):"1":o.length===1?f="1":f=d.toPrecision(c),{flexBasis:0,flexGrow:f,flexShrink:1,overflow:"hidden",pointerEvents:t!==null?"none":void 0}}function VP(e,t=10){let a=null;return(...s)=>{a!==null&&clearTimeout(a),a=setTimeout(()=>{e(...s)},t)}}function Xp(e){try{if(typeof localStorage<"u")e.getItem=t=>localStorage.getItem(t),e.setItem=(t,a)=>{localStorage.setItem(t,a)};else throw new Error("localStorage not supported in this environment")}catch(t){console.error(t),e.getItem=()=>null,e.setItem=()=>{}}}function Gb(e){return`react-resizable-panels:${e}`}function Bb(e){return e.map(t=>{const{constraints:a,id:o,idIsFromProps:s,order:c}=t;return s?o:c?`${c}:${JSON.stringify(a)}`:JSON.stringify(a)}).sort((t,a)=>t.localeCompare(a)).join(",")}function Fb(e,t){try{const a=Gb(e),o=t.getItem(a);if(o){const s=JSON.parse(o);if(typeof s=="object"&&s!=null)return s}}catch{}return null}function WP(e,t,a){var o,s;const c=(o=Fb(e,a))!==null&&o!==void 0?o:{},d=Bb(t);return(s=c[d])!==null&&s!==void 0?s:null}function XP(e,t,a,o,s){var c;const d=Gb(e),f=Bb(t),h=(c=Fb(e,s))!==null&&c!==void 0?c:{};h[f]={expandToSizes:Object.fromEntries(a.entries()),layout:o};try{s.setItem(d,JSON.stringify(h))}catch(m){console.error(m)}}function qp({layout:e,panelConstraints:t}){const a=[...e],o=a.reduce((c,d)=>c+d,0);if(a.length!==t.length)throw Error(`Invalid ${t.length} panel layout: ${a.map(c=>`${c}%`).join(", ")}`);if(!za(o,100)&&a.length>0)for(let c=0;c<t.length;c++){const d=a[c];qe(d!=null,`No layout data found for index ${c}`);const f=100/o*d;a[c]=f}let s=0;for(let c=0;c<t.length;c++){const d=a[c];qe(d!=null,`No layout data found for index ${c}`);const f=Cr({panelConstraints:t,panelIndex:c,size:d});d!=f&&(s+=d-f,a[c]=f)}if(!za(s,0))for(let c=0;c<t.length;c++){const d=a[c];qe(d!=null,`No layout data found for index ${c}`);const f=d+s,h=Cr({panelConstraints:t,panelIndex:c,size:f});if(d!==h&&(s-=h-d,a[c]=h,za(s,0)))break}return a}const qP=100,lu={getItem:e=>(Xp(lu),lu.getItem(e)),setItem:(e,t)=>{Xp(lu),lu.setItem(e,t)}},Zp={};function jb({autoSaveId:e=null,children:t,className:a="",direction:o,forwardedRef:s,id:c=null,onLayout:d=null,keyboardResizeBy:f=null,storage:h=lu,style:m,tagName:R="div",...T}){const S=IT(c),g=C.useRef(null),[_,p]=C.useState(null),[O,y]=C.useState([]),L=PP(),P=C.useRef({}),D=C.useRef(new Map),k=C.useRef(0),G=C.useRef({autoSaveId:e,direction:o,dragState:_,id:S,keyboardResizeBy:f,onLayout:d,storage:h}),B=C.useRef({layout:O,panelDataArray:[],panelDataArrayChanged:!1});C.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),C.useImperativeHandle(s,()=>({getId:()=>G.current.id,getLayout:()=>{const{layout:W}=B.current;return W},setLayout:W=>{const{onLayout:Y}=G.current,{layout:Q,panelDataArray:x}=B.current,Z=qp({layout:W,panelConstraints:x.map(ne=>ne.constraints)});Wp(Q,Z)||(y(Z),B.current.layout=Z,Y&&Y(Z),gr(x,Z,P.current))}}),[]),os(()=>{G.current.autoSaveId=e,G.current.direction=o,G.current.dragState=_,G.current.id=S,G.current.onLayout=d,G.current.storage=h}),FP({committedValuesRef:G,eagerValuesRef:B,groupId:S,layout:O,panelDataArray:B.current.panelDataArray,setLayout:y,panelGroupElement:g.current}),C.useEffect(()=>{const{panelDataArray:W}=B.current;if(e){if(O.length===0||O.length!==W.length)return;let Y=Zp[e];Y==null&&(Y=VP(XP,qP),Zp[e]=Y);const Q=[...W],x=new Map(D.current);Y(e,Q,x,O,h)}},[e,O,h]),C.useEffect(()=>{});const K=C.useCallback(W=>{const{onLayout:Y}=G.current,{layout:Q,panelDataArray:x}=B.current;if(W.constraints.collapsible){const Z=x.map(Ne=>Ne.constraints),{collapsedSize:ne=0,panelSize:fe,pivotIndices:Re}=Zl(x,W,Q);if(qe(fe!=null,`Panel size not found for panel "${W.id}"`),!bo(fe,ne)){D.current.set(W.id,fe);const Me=Nr(x,W)===x.length-1?fe-ne:ne-fe,me=ou({delta:Me,initialLayout:Q,panelConstraints:Z,pivotIndices:Re,prevLayout:Q,trigger:"imperative-api"});oh(Q,me)||(y(me),B.current.layout=me,Y&&Y(me),gr(x,me,P.current))}}},[]),V=C.useCallback((W,Y)=>{const{onLayout:Q}=G.current,{layout:x,panelDataArray:Z}=B.current;if(W.constraints.collapsible){const ne=Z.map(Ce=>Ce.constraints),{collapsedSize:fe=0,panelSize:Re=0,minSize:Ne=0,pivotIndices:Me}=Zl(Z,W,x),me=Y??Ne;if(bo(Re,fe)){const Ce=D.current.get(W.id),ge=Ce!=null&&Ce>=me?Ce:me,De=Nr(Z,W)===Z.length-1?Re-ge:ge-Re,Be=ou({delta:De,initialLayout:x,panelConstraints:ne,pivotIndices:Me,prevLayout:x,trigger:"imperative-api"});oh(x,Be)||(y(Be),B.current.layout=Be,Q&&Q(Be),gr(Z,Be,P.current))}}},[]),ae=C.useCallback(W=>{const{layout:Y,panelDataArray:Q}=B.current,{panelSize:x}=Zl(Q,W,Y);return qe(x!=null,`Panel size not found for panel "${W.id}"`),x},[]),oe=C.useCallback((W,Y)=>{const{panelDataArray:Q}=B.current,x=Nr(Q,W);return KP({defaultSize:Y,dragState:_,layout:O,panelData:Q,panelIndex:x})},[_,O]),j=C.useCallback(W=>{const{layout:Y,panelDataArray:Q}=B.current,{collapsedSize:x=0,collapsible:Z,panelSize:ne}=Zl(Q,W,Y);return qe(ne!=null,`Panel size not found for panel "${W.id}"`),Z===!0&&bo(ne,x)},[]),$=C.useCallback(W=>{const{layout:Y,panelDataArray:Q}=B.current,{collapsedSize:x=0,collapsible:Z,panelSize:ne}=Zl(Q,W,Y);return qe(ne!=null,`Panel size not found for panel "${W.id}"`),!Z||fs(ne,x)>0},[]),X=C.useCallback(W=>{const{panelDataArray:Y}=B.current;Y.push(W),Y.sort((Q,x)=>{const Z=Q.order,ne=x.order;return Z==null&&ne==null?0:Z==null?-1:ne==null?1:Z-ne}),B.current.panelDataArrayChanged=!0,L()},[L]);os(()=>{if(B.current.panelDataArrayChanged){B.current.panelDataArrayChanged=!1;const{autoSaveId:W,onLayout:Y,storage:Q}=G.current,{layout:x,panelDataArray:Z}=B.current;let ne=null;if(W){const Re=WP(W,Z,Q);Re&&(D.current=new Map(Object.entries(Re.expandToSizes)),ne=Re.layout)}ne==null&&(ne=YP({panelDataArray:Z}));const fe=qp({layout:ne,panelConstraints:Z.map(Re=>Re.constraints)});Wp(x,fe)||(y(fe),B.current.layout=fe,Y&&Y(fe),gr(Z,fe,P.current))}}),os(()=>{const W=B.current;return()=>{W.layout=[]}},[]);const ce=C.useCallback(W=>{let Y=!1;const Q=g.current;return Q&&window.getComputedStyle(Q,null).getPropertyValue("direction")==="rtl"&&(Y=!0),function(Z){Z.preventDefault();const ne=g.current;if(!ne)return()=>null;const{direction:fe,dragState:Re,id:Ne,keyboardResizeBy:Me,onLayout:me}=G.current,{layout:Ce,panelDataArray:ge}=B.current,{initialLayout:_e}=Re??{},De=Ub(Ne,W,ne);let Be=zP(Z,W,fe,Re,Me,ne);const $t=fe==="horizontal";$t&&Y&&(Be=-Be);const Na=ge.map(so=>so.constraints),Ca=ou({delta:Be,initialLayout:_e??Ce,panelConstraints:Na,pivotIndices:De,prevLayout:Ce,trigger:bb(Z)?"keyboard":"mouse-or-touch"}),lo=!oh(Ce,Ca);(Ob(Z)||Db(Z))&&k.current!=Be&&(k.current=Be,!lo&&Be!==0?$t?UA(W,Be<0?vb:Mb):UA(W,Be<0?Lb:xb):UA(W,0)),lo&&(y(Ca),B.current.layout=Ca,me&&me(Ca),gr(ge,Ca,P.current))}},[]),w=C.useCallback((W,Y)=>{const{onLayout:Q}=G.current,{layout:x,panelDataArray:Z}=B.current,ne=Z.map(Ce=>Ce.constraints),{panelSize:fe,pivotIndices:Re}=Zl(Z,W,x);qe(fe!=null,`Panel size not found for panel "${W.id}"`);const Me=Nr(Z,W)===Z.length-1?fe-Y:Y-fe,me=ou({delta:Me,initialLayout:x,panelConstraints:ne,pivotIndices:Re,prevLayout:x,trigger:"imperative-api"});oh(x,me)||(y(me),B.current.layout=me,Q&&Q(me),gr(Z,me,P.current))},[]),z=C.useCallback((W,Y)=>{const{layout:Q,panelDataArray:x}=B.current,{collapsedSize:Z=0,collapsible:ne}=Y,{collapsedSize:fe=0,collapsible:Re,maxSize:Ne=100,minSize:Me=0}=W.constraints,{panelSize:me}=Zl(x,W,Q);me!=null&&(ne&&Re&&bo(me,Z)?bo(Z,fe)||w(W,fe):me<Me?w(W,Me):me>Ne&&w(W,Ne))},[w]),se=C.useCallback((W,Y)=>{const{direction:Q}=G.current,{layout:x}=B.current;if(!g.current)return;const Z=Lf(W,g.current);qe(Z,`Drag handle element not found for id "${W}"`);const ne=wb(Q,Y);p({dragHandleId:W,dragHandleRect:Z.getBoundingClientRect(),initialCursorPosition:ne,initialLayout:x})},[]),Ee=C.useCallback(()=>{p(null)},[]),M=C.useCallback(W=>{const{panelDataArray:Y}=B.current,Q=Nr(Y,W);Q>=0&&(Y.splice(Q,1),delete P.current[W.id],B.current.panelDataArrayChanged=!0,L())},[L]),ee=C.useMemo(()=>({collapsePanel:K,direction:o,dragState:_,expandPanel:V,getPanelSize:ae,getPanelStyle:oe,groupId:S,isPanelCollapsed:j,isPanelExpanded:$,reevaluatePanelConstraints:z,registerPanel:X,registerResizeHandle:ce,resizePanel:w,startDragging:se,stopDragging:Ee,unregisterPanel:M,panelGroupElement:g.current}),[K,_,o,V,ae,oe,S,j,$,z,X,ce,w,se,Ee,M]),de={display:"flex",flexDirection:o==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return C.createElement(yf.Provider,{value:ee},C.createElement(R,{...T,children:t,className:a,id:c,ref:g,style:{...de,...m},[nn.group]:"",[nn.groupDirection]:o,[nn.groupId]:S}))}const zb=C.forwardRef((e,t)=>C.createElement(jb,{...e,forwardedRef:t}));jb.displayName="PanelGroup";zb.displayName="forwardRef(PanelGroup)";function Nr(e,t){return e.findIndex(a=>a===t||a.id===t.id)}function Zl(e,t,a){const o=Nr(e,t),c=o===e.length-1?[o-1,o]:[o,o+1],d=a[o];return{...t.constraints,panelSize:d,pivotIndices:c}}function ZP({disabled:e,handleId:t,resizeHandler:a,panelGroupElement:o}){C.useEffect(()=>{if(e||a==null||o==null)return;const s=Lf(t,o);if(s==null)return;const c=d=>{if(!d.defaultPrevented)switch(d.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{d.preventDefault(),a(d);break}case"F6":{d.preventDefault();const f=s.getAttribute(nn.groupId);qe(f,`No group element found for id "${f}"`);const h=Tu(f,o),m=kb(f,t,o);qe(m!==null,`No resize element found for id "${t}"`);const R=d.shiftKey?m>0?m-1:h.length-1:m+1<h.length?m+1:0;h[R].focus();break}}};return s.addEventListener("keydown",c),()=>{s.removeEventListener("keydown",c)}},[o,e,t,a])}function Yb({children:e=null,className:t="",disabled:a=!1,hitAreaMargins:o,id:s,onBlur:c,onClick:d,onDragging:f,onFocus:h,onPointerDown:m,onPointerUp:R,style:T={},tabIndex:S=0,tagName:g="div",..._}){var p,O;const y=C.useRef(null),L=C.useRef({onClick:d,onDragging:f,onPointerDown:m,onPointerUp:R});C.useEffect(()=>{L.current.onClick=d,L.current.onDragging=f,L.current.onPointerDown=m,L.current.onPointerUp=R});const P=C.useContext(yf);if(P===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:D,groupId:k,registerResizeHandle:G,startDragging:B,stopDragging:K,panelGroupElement:V}=P,ae=IT(s),[oe,j]=C.useState("inactive"),[$,X]=C.useState(!1),[ce,w]=C.useState(null),z=C.useRef({state:oe});os(()=>{z.current.state=oe}),C.useEffect(()=>{if(a)w(null);else{const ee=G(ae);w(()=>ee)}},[a,ae,G]);const se=(p=o?.coarse)!==null&&p!==void 0?p:15,Ee=(O=o?.fine)!==null&&O!==void 0?O:5;C.useEffect(()=>{if(a||ce==null)return;const ee=y.current;qe(ee,"Element ref not attached");let de=!1;return kP(ae,ee,D,{coarse:se,fine:Ee},(Y,Q,x)=>{if(!Q){j("inactive");return}switch(Y){case"down":{j("drag"),de=!1,qe(x,'Expected event to be defined for "down" action'),B(ae,x);const{onDragging:Z,onPointerDown:ne}=L.current;Z?.(!0),ne?.();break}case"move":{const{state:Z}=z.current;de=!0,Z!=="drag"&&j("hover"),qe(x,'Expected event to be defined for "move" action'),ce(x);break}case"up":{j("hover"),K();const{onClick:Z,onDragging:ne,onPointerUp:fe}=L.current;ne?.(!1),fe?.(),de||Z?.();break}}})},[se,D,a,Ee,G,ae,ce,B,K]),ZP({disabled:a,handleId:ae,resizeHandler:ce,panelGroupElement:V});const M={touchAction:"none",userSelect:"none"};return C.createElement(g,{..._,children:e,className:t,id:s,onBlur:()=>{X(!1),c?.()},onFocus:()=>{X(!0),h?.()},ref:y,role:"separator",style:{...M,...T},tabIndex:S,[nn.groupDirection]:D,[nn.groupId]:k,[nn.resizeHandle]:"",[nn.resizeHandleActive]:oe==="drag"?"pointer":$?"keyboard":void 0,[nn.resizeHandleEnabled]:!a,[nn.resizeHandleId]:ae,[nn.resizeHandleState]:oe})}Yb.displayName="PanelResizeHandle";const Kb=navigator.userAgent.indexOf("Firefox")>=0,hi="XIVShell Defaults, , sans-serif",QP=3,pe={rulerHeight:30,trackHeight:14,slotPaddingTop:4,damageMarkerHeight:8,skillButtonHeight:28,buffCoverHeight:4,slotPaddingBottom:4,renderSlotHeight:()=>pe.slotPaddingTop+pe.damageMarkerHeight+pe.skillButtonHeight*1.5+pe.buffCoverHeight*QP+pe.slotPaddingBottom,timelineCanvasHeight:(e,t)=>{let a=pe.rulerHeight;return a+=pe.trackHeight*e,a+=pe.renderSlotHeight()*t,t<Oi&&(a+=pe.addSlotButtonHeight),a},leftBufferWidth:20,addSlotButtonHeight:20},$P={drawMarkers:!0,drawDamageMarks:!0,drawHealingMarks:!0,drawMPTickMarks:!0,drawBuffIndicators:!0};function JP(e){const t=new Blob([JSON.stringify(e)],{type:"text/plain;charset=utf-8"});return window.URL.createObjectURL(t)}function ew(e){let t="";e.meta?.forEach(o=>{t+="#"+o.toString()+`
`}),e.body.forEach(o=>{for(let s=0;s<o.length;s++)t+=o[s].toString(),s<o.length-1&&(t+=",");t+=`
`});const a=new Blob([t],{type:"text/csv;charset=utf-8"});return window.URL.createObjectURL(a)}var vo=(e=>(e.Json="JSON",e.Csv="CSV",e.Png="PNG",e))(vo||{});function Rl(e){const[t,a]=C.useState({jsonContent:{},csvContent:{body:[]},pngContent:void 0}),o=()=>{const c=e.getContentFn();e.fileFormat==="JSON"?a({jsonContent:c}):e.fileFormat==="CSV"?a({csvContent:c}):e.fileFormat==="PNG"?a({pngContent:c}):console.assert(!1)};let s="";return e.fileFormat==="JSON"?s=JP(t.jsonContent):e.fileFormat==="CSV"?s=ew(t.csvContent):e.fileFormat==="PNG"?s=t.pngContent?.toDataURL()??"":console.assert(!1),l.jsx("a",{style:{color:Tt().fileDownload,marginRight:6},href:s,download:e.filename,onClick:()=>o(),onContextMenu:()=>o(),children:`[${e.displayName===void 0?"download":e.displayName}]`})}function tw(e,t=a=>{console.log(a)}){const a=new FileReader;a.onload=function(o){const s=o.target?.result?.toString()??"";let c;try{c=JSON.parse(s)}catch(d){window.alert(N({en:"Parse error! Are you sure this is the correct file? This tool only reads text files in JSON format.",zh:"- JSON"})),console.error(d)}t(c)},a.readAsText(e,"UTF-8")}const Xe={positionFromTimeAndScale:function(e,t){return e*t*100},timeFromPositionAndScale:function(e,t){return e/(t*100)},displayTime:function(e,t){const a=Math.abs(e),o=Math.floor(a/60),s=a-60*o;return(e<0?"-":"")+o.toString()+":"+(s+Tn.epsilon<10?"0":"")+s.toFixed(t).toString()}},nw=function(e){console.log("[asyncFetch] some error occurred")},Qp=new Map;function Vb(e,t,a=nw){const o=Qp.get(e);if(o){t(o);return}const s=new XMLHttpRequest;s.addEventListener("error",a),s.addEventListener("load",c=>{t(s.responseText),Qp.set(e,s.responseText)}),s.open("GET",e),s.send()}function Vi(e){const t=e.trim();let a=1;e[0]==="-"&&(a=-1,e=e.substring(1));const o=t.indexOf(":");if(o<0)return parseFloat(t);const s=parseInt(t.substring(0,o)),c=parseFloat(t.substring(o+1));return a*(s*60+c)}function Es(e){return l.jsx("div",{className:"clickable",onClick:e.onClickFn,style:e.style,children:e.content})}function aw(e){const a={position:"relative",display:"inline-block",verticalAlign:"top",border:"1px solid "+Tt().bgHighContrast,borderRadius:4,height:8,top:e.offsetY,width:e.width},o={background:`${e.backgroundColor}`,height:"100%",borderRadius:"inherit",width:`${e.progress*100}%`};return l.jsx("div",{style:a,children:l.jsx("div",{style:o})})}const br=26;function Wb(e){const t=br-2,[a,o]=Ha.useState(void 0);C.useEffect(()=>{let h=e.defaultSelectedIndex;const m=Rt("tabs: "+e.uniqueName);m!==null&&(m==="none"?h=void 0:h=parseInt(m)),o(h)},[e.defaultSelectedIndex,e.uniqueName]);const s=Tt(),c=function(h){const R="1px solid "+(h===a?s.bgHighContrast:s.bgMediumContrast),T="1px solid "+s.background;let S=R;(h===a||a===void 0)&&(S=T);const g=h===a?R:T;let _=T,p=T;return h===a?(_=R,p=R):h>0&&(a===void 0||a+1!==h)&&(_=R),{margin:0,display:"inline-block",boxSizing:"border-box",padding:"0 12px",borderBottom:S,borderTop:g,borderLeft:_,borderRight:p,lineHeight:`${t}px`,color:h===a?s.emphasis:s.text,cursor:e.collapsible||h!==a?"pointer":"default"}},d=[],f=[];for(let h=0;h<e.content.length;h++){const m=e.content[h],R=h===a;d.push(l.jsx("span",{style:c(h),onClick:()=>{let S=a;R?e.collapsible&&(S=void 0):S=h,o(S),St("tabs: "+e.uniqueName,S===void 0?"none":`${S}`)},children:m.titleNode},h));const T={display:R?"block":"none"};e.maxWidth!==void 0&&(T.maxWidth=e.maxWidth),f.push(l.jsx("div",{style:T,children:m.contentNode},h))}return e.collapsible&&a!==void 0&&d.push(l.jsx("span",{onClick:()=>{o(void 0),St("tabs: "+e.uniqueName,"none")},children:l.jsx(pP,{style:{marginLeft:16,fontSize:14,cursor:"pointer",position:"relative",top:3}})},d.length)),l.jsxs("div",{style:{position:"relative",...e.style},children:[l.jsx("div",{children:d}),l.jsx("div",{className:e.scrollable?"visibleScrollbar":void 0,style:{display:a===void 0?"none":"block",height:e.height-br,boxSizing:"border-box",padding:`10px ${Kb?15:5}px`,overflowY:e.scrollable?"scroll":"hidden"},children:f})]})}function NT(e){const t=Tt(),a=[];for(let o=0;o<e.children.length;o++){const s=e.children[o],c=o<e.children.length-1?e.children[o+1]:void 0;if(a.push(l.jsxs(Cb,{className:s.showScrollbar?"visibleScrollbar":"invisibleScrollbar",defaultSize:s.defaultSize,minSize:s.minSize??20,style:{border:s.fullBorder===!0?`1px solid ${t.bgMediumContrast}`:void 0,boxSizing:"border-box",height:e.contentHeight,overflowY:"scroll"},children:[s.title?l.jsx("div",{style:{marginBottom:10},children:l.jsx("b",{children:s.title})}):void 0,s.content]},`column-${o}`)),o<e.children.length-1){const f=s.fullBorder===!0||c!==void 0&&c.fullBorder===!0?{margin:"0 5px"}:{borderLeft:"1px solid "+t.bgMediumContrast,margin:"0 15px 0 10px"};a.push(l.jsx(Yb,{style:f},`divider-${o}`))}}return l.jsx(zb,{direction:"horizontal",children:a})}function jt(e){const t=d=>{e.onChange&&e.onChange(d.target.value)},a=Tt(),o=e.fullWidthInput?void 0:e.width??5,s={color:e.style?.color??e.componentColor??a.text,backgroundColor:"transparent",outline:"none",border:"none",borderBottom:"1px solid "+(e.componentColor??a.text),width:e.fullWidthInput?"100%":void 0},c=e.style??{};return l.jsxs("div",{style:{...c,color:e.componentColor},children:[l.jsx("span",{children:e.description}),l.jsx("input",{style:s,size:o,type:"text",value:e.defaultValue,onChange:t,onKeyDown:d=>d.stopPropagation(),autoFocus:e.autoFocus,placeholder:e.placeholder})]})}function iw(e){const t=e.description??"default description",[a,o]=C.useState(e.defaultValue??""),s=c=>{o(c.target.value),e.onChange&&e.onChange(c.target.value),St("slider: "+e.uniqueName,c.target.value)};return C.useEffect(()=>{let c=a;const d=Rt("slider: "+e.uniqueName);d!==null&&(c=d,o(d)),e.onChange&&e.onChange(c)},[]),l.jsxs("div",{style:{display:"inline-block",...e.style},children:[l.jsx("span",{children:t??""}),l.jsx("input",{size:10,type:"range",value:a,min:.05,max:1,step:.025,onChange:s,style:{position:"relative",outline:"none"}})]})}function Xb(e){const t=Rt(`radio: ${e.uniqueName}`)??e.selected??e.options[0][0],[a,o]=C.useState(t);C.useEffect(()=>{e.selected!==void 0&&(o(e.selected),St(`radio: ${e.uniqueName}`,e.selected),e.onChange(e.selected))},[e.selected]);const s={position:"relative",top:3,marginRight:"0.25em"},c=e.options.map(([d,f])=>l.jsxs("div",{style:s,children:[l.jsx("input",{type:"radio",id:d,name:e.uniqueName,value:d,checked:a===d,onChange:()=>{o(d),St(`radio: ${e.uniqueName}`,d),e.onChange(d)}}),l.jsxs("label",{htmlFor:d,style:{verticalAlign:"top"},children:[" ",f]})]},d));return l.jsx("div",{style:e.containerStyle,children:c})}function su(e){const[t,a]=C.useState(!1);return C.useEffect(()=>{let o=e.defaultChecked??!0;const s=Rt("checked: "+e.uniqueName);s!==null&&(o=parseInt(s)>0),a(o),e.onChange(o)},[]),l.jsxs("div",{style:{marginBottom:5},children:[l.jsx("input",{className:"shellCheckbox",type:"checkbox",onChange:o=>{const s=o.currentTarget.checked;a(s),St("checked: "+e.uniqueName,s?"1":"0"),e.onChange(s)},checked:t}),l.jsx("span",{children:e.label})]})}function Tl(e){const[t,a]=C.useState(e.defaultShow??!1),o=e.autoIndent??!0,s=()=>{const d=!t;a(d),e.onExpand&&d&&e.onExpand(),e.onCollapse&&!d&&e.onCollapse(),St("exp: "+e.title,(d?1:0).toString())};C.useEffect(()=>{const d=Rt("exp: "+e.title);d!==null&&a(parseInt(d)===1)},[]);const c=o?{margin:10,paddingLeft:6,marginBottom:20}:{};return l.jsxs("div",{style:e.noMargin?{}:{marginTop:10,marginBottom:10},children:[l.jsx(Es,{content:l.jsxs("span",{children:[l.jsx("span",{children:t?"- ":"+ "}),e.titleNode??e.title]}),onClickFn:s}),l.jsx("div",{style:{position:"relative",display:t?"block":"none",marginTop:e.titleBodyGap},children:l.jsx("div",{style:c,children:e.content})})]})}function qh(e){const t=C.useRef(null);let a=e.defaultLoadUrl??"";const o=h=>{h.target&&(a=h.target.value)},s=()=>{const h=t.current;if(h&&h.files&&h.files.length>0){const m=h.files[0];tw(m,R=>e.onLoadFn(R)),h.value=""}},c=()=>{const h=function(m){console.log("some error occurred")};Vb(a,m=>{try{const R=JSON.parse(m);e.onLoadFn(R)}catch{h()}},m=>{h()})},d=Tt(),f={color:d.text,background:"transparent",outline:"none",border:"none",borderBottom:"1px solid "+d.text,width:"30em"};return l.jsxs("div",{children:[l.jsxs("div",{children:[l.jsx("span",{children:e.label??N({en:"Load from file: ",zh:""})}),l.jsx("input",{style:{width:"110px",color:"transparent"},type:"file",ref:t,onChange:s})]}),e.allowLoadFromUrl?l.jsxs("form",{children:[l.jsx("span",{children:N({en:"Load from URL: ",zh:"URL"})}),l.jsx("input",{defaultValue:a,style:f,onChange:o}),l.jsx("span",{children:" "}),l.jsx("button",{type:"submit",onClick:h=>{c(),h.preventDefault()},children:N({en:"load",zh:""})})]}):void 0]})}function xa(e){const t=Tt();return l.jsx("span",{style:{fontSize:11,border:"1px solid "+t.bgHighContrast,borderRadius:2,padding:"1px 4px",background:t.bgLowContrast},children:e.text})}const ow=100;function ze(e){const a={display:"inline-block",position:"relative",width:12,height:12,lineHeight:1,cursor:"help",background:Tt().bgHighContrast,borderRadius:6,textAlign:"center",verticalAlign:"middle"},o=C.useRef(0),[s,c]=C.useState(!1);return l.jsxs(cb,{delay:0,open:s,children:[l.jsx("span",{id:`help-${e.topic}`,className:"help-icon global-help-tooltip",style:a,"data-tooltip-offset":4,onMouseEnter:()=>{const d=Date.now();d-o.current>ow&&c(!0),o.current=d},onMouseLeave:()=>c(!1),children:l.jsx("span",{style:{position:"relative",top:-1,color:"white"},children:"?"})}),l.jsx(Ab,{container:e.container??document.getElementById("globalHelpTooltipAnchor"),children:l.jsx(Sb,{className:"tooltip-positioner",anchor:document.getElementById(`help-${e.topic}`),children:l.jsx(gb,{className:"help-tooltip tooltip",children:e.content})})})]})}const Zh="3f";let Su=()=>{},Mn=()=>({isValid:!1,invalidActions:[],skillUseTimes:[],straightenedIfValid:void 0}),ru=e=>{e()};const qb=C.createContext(e=>({drop:t=>{},setSelected:t=>{}})),ls=e=>({borderColor:e.bgMediumContrast,borderWidth:"1px",borderStyle:"solid"}),xr={width:"1.5%",textAlign:"right",paddingRight:"0.3em",paddingLeft:"0.3em"},ll={width:"12%",textAlign:"right",paddingRight:"0.3em",paddingLeft:"0.3em"},Zb={width:"86.5%",textAlign:"left",paddingLeft:"0.3em"},Qb={width:"100%",height:"1.6em",userSelect:"none",outline:"none"},$b=e=>({borderTopWidth:"4px",borderTopStyle:"solid",borderColor:e.dropTarget});function ER(e){return(e??0)+1}function lw(e){const t=Tt();let a=e.index%2===1?t.timelineEditor.bgAlternateRow:"transparent";e.isSelected&&(a="rgba(151,111,246,0.25)"),e.recordIsDirty&&e.isSelected&&(a=t.editingValid+Zh);let o=N({en:"(other)",zh:""});if(e.node.info.type===ke.Skill){const T=e.node.targetList,S=T.length;let g="";S>1?g=N({en:` (${S} targets)`,zh:`${S}`}).toString():S===1&&T[0]!==1&&(g=N({en:` (Boss ${T[0]})`,zh:` Boss ${T[0]}`}).toString()),o=e.node.info.skillName?Wa(e.node.info.skillName)+g:N({en:"(unknown skill)",zh:""})}else if(e.node.info.type===ke.Wait)o=N({en:"(wait for "+e.node.info.waitDuration.toFixed(3)+"s)",zh:""+e.node.info.waitDuration.toFixed(3)+""});else if(e.node.info.type===ke.JumpToTimestamp)o=N({en:"(jump to time "+Xe.displayTime(e.node.info.targetTime,3)+")",zh:" "+Xe.displayTime(e.node.info.targetTime,3)+""});else if(e.node.info.type===ke.WaitForMP)o=N({en:"(wait until MP/lucid tick)",zh:"/"});else if(e.node.info.type===ke.SetResourceEnabled){const T=Ke(e.node.info.buffName);o=N({en:"(toggle resource: "+T+")",zh:"BUFF"+T+""})}else e.node.info.type===ke.Unknown&&(o=e.node.info.skillName);const s=l.jsxs("td",{style:{...Zb,...ls(t)},children:[e.isInvalid?l.jsx("span",{style:{marginRight:6,padding:"0 4px",backgroundColor:t.editingInvalid+Zh},children:""}):void 0,l.jsx("span",{children:o})]}),c=e.includeDetails?l.jsx("td",{style:{...xr,...ls(t)},children:ER(e.index)}):void 0,d=e.includeDetails?l.jsx("td",{style:{...ll,...ls(t)},children:Xe.displayTime(e.usedAt,3)}):void 0,f=C.useContext($f),h=f.dragTargetIndex===e.index,m=C.useContext(Gu),R=C.useContext(qb)(e.index);return l.jsxs("tr",{style:{...Qb,background:a,...h?$b(t):{}},ref:e.refObj??null,draggable:!m.value,onDragStart:T=>{R.setSelected(!0),e.isSelected||I.timeline.onClickTimelineAction(e.index,!1)},onDragLeave:T=>{f.setDragTarget(null,null)},onDrop:T=>{R.drop(T),f.setDragTarget(null,null)},onDragOver:T=>{T.preventDefault();let S=e.usedAt;const g=e.index>0?I.record.actions[e.index-1]:void 0;g?.tmp_endLockTime!==void 0&&e.node.info.type===ke.Skill&&Wi(I.game.job,e.node.info.skillName).cdName==="cd_GCD"&&(S=g.tmp_endLockTime-I.gameConfig.countdown),f.setDragTarget(e.index,S)},onClick:T=>{R.setSelected(!0),e.recordIsDirty?I.timeline.onClickTimelineAction(e.index,T.shiftKey):(I.timeline.onClickTimelineAction(e.index,T.shiftKey),e.node.tmp_startLockTime!==void 0&&I.scrollToTime(e.node.tmp_startLockTime))},tabIndex:-1,onKeyDown:e.onKeyDown,children:[c,d,s]})}let CT=()=>{},Jb=()=>{};function sw(){const e=Tt(),t=C.useRef(null),a=C.useRef(null),[o,s]=C.useState(!1),[c,d]=C.useState(void 0),[f,h]=C.useState(void 0),[,m]=C.useReducer(Y=>Y+1,0),R=C.useRef(!1),T=I.record.getFirstSelection()?.targetList,S=T&&T.length>0?T[0]-1:void 0,g=Array(bi).fill(!1);T?.forEach(Y=>{g[Y-1]=!0});const _=C.useRef(void 0);C.useEffect(()=>(Su=()=>{m()},Mn=()=>{const Y=I.checkRecordValidity(I.record,0,!0);return d(Y),Y},ru=Y=>{o&&_.current&&(I.record=_.current,I.checkRecordValidity(I.record,0,!0)),Y(),s(!1),_.current=I.record,d(I.checkRecordValidity(I.record,0,!0))},CT=()=>{setTimeout(()=>{t.current?.scrollIntoView({behavior:"smooth",block:"nearest"})},0)},Jb=()=>{setTimeout(()=>{(I.record.getSelectionLength()===1?t:a).current?.scrollIntoView({behavior:"smooth",block:"nearest"})},0)},d(I.checkRecordValidity(I.record,0,!0)),()=>{Su=()=>{}}),[]);const p=c&&c.isValid,O=Y=>{Y&&_.current&&(I.record=_.current),s(!1),d(I.checkRecordValidity(I.record,0,!0)),h(void 0)},y=5,L=()=>l.jsx("button",{style:{display:"block",marginTop:10,marginLeft:y},onClick:Y=>{R.current=!0,o||console.error("attempted to discard edits while timeline editor was not dirty"),O(!0)},children:N({en:"discard changes",zh:""})}),P=()=>(o||(_.current=I.record,I.record=I.record.getCloneWithSharedConfig(),s(!0)),I.record),D=(Y,Q)=>{const x=Y?.node,Z=Y?.index,ne=Y?.reason,fe=Mi()==="en",Re=(ge,_e)=>fe?ge:_e;let Ne=Re("(unknown node)","");if(x)if(x.info.type===ke.Wait)Ne=Re("(Wait)","");else if(x.info.type===ke.JumpToTimestamp)Ne=Re("(Jump to time)","");else if(x.info.type===ke.WaitForMP)Ne=Re("(Wait for MP/lucid tick)","/");else if(x.info.type===ke.SetResourceEnabled){const ge=Ke(x.info.buffName);Ne=Re("(Toggle resource "+ge+")","BUFF "+ge+"")}else x.info.type===ke.Skill?Ne=x.info.skillName?Wa(x.info.skillName):Re("(unknown skill)",""):x.info.type===ke.Unknown&&(Ne=x.info.skillName);let Me;const me=Z!==void 0?c?.skillUseTimes[Z]:void 0,Ce=ne?.unavailableReasons.map(as).join(Re("; ",""))??as(void 0);if(Q?Me=Re(`This sequence contains invalid actions! Check action #${ER(Z)}: ${Ne}`,`${ER(Z)} ${Ne}`):Me=Re(`This action is invalid! ${Ne}`,` ${Ne}`),me!==void 0){const ge=Xe.displayTime(me,3);Me+=` @ ${ge}`+Re(".","")}return{en:l.jsxs(l.Fragment,{children:[Me,l.jsx("br",{}),l.jsx("br",{}),"Reason: ",Ce]}),zh:l.jsxs(l.Fragment,{children:[Me,l.jsx("br",{}),l.jsx("br",{}),"",Ce]})}},k={padding:"0.3em"},G=()=>{const Y=I.record,Q=Y.getSelectionLength();if(Q===0)return l.jsx("div",{style:k,children:N({en:"No actions selected.",zh:""})});if(Q===1){const x=Y.selectionStartIndex,ne=Y.getFirstSelection().info;let fe=l.jsx(l.Fragment,{});const Re=Xe.displayTime(c?.skillUseTimes[x]??0,3);if(ne.type===ke.Skill){const Ne=ne.skillName,Me=Wi(I.game.job,Ne),me=Me?.potencyFn(I.game)>0||Me?.savesTargets||I.game.dotSkills.includes(Ne);fe=l.jsxs(l.Fragment,{children:[l.jsx("b",{children:Wa(Ne)})," @ ",Re,l.jsx("br",{}),me&&l.jsx(SC,{style:{marginBlock:"5px"},primaryOnly:Me.falloff===void 0&&!Me.savesTargets,selected:g,primary:S,onAnySelectionChange:(Ce,ge)=>V(_e=>{const De=ge.flatMap(($t,Na)=>$t&&Na!==Ce?[Na+1]:[]);De.splice(0,0,Ce+1);const Be=new uw(El(Ne,De),x);return I.undoStack.push(Be),Be.redo(),x})})]})}else if(ne.type===ke.Wait){const Ne=ne.waitDuration.toFixed(3);fe=l.jsx(l.Fragment,{children:N({en:`wait for ${Ne}s @ ${Re}`,zh:`${Ne} @ ${Re}`})})}else if(ne.type===ke.JumpToTimestamp){const Ne=Xe.displayTime(ne.targetTime,3);fe=l.jsx(l.Fragment,{children:N({en:`jump from time ${Re} to ${Ne}`,zh:` ${Re}  ${Ne}`})})}else if(ne.type===ke.WaitForMP)fe=l.jsx(l.Fragment,{children:N({en:`wait for MP/lucid tick @ ${Re}`,zh:`/ @ ${Re}`})});else if(ne.type===ke.SetResourceEnabled){const Ne=Ke(ne.buffName);fe=l.jsx(l.Fragment,{children:N({en:"toggle resource: ",zh:"BUFF"}).toString()+Ne+(ne.targetNumber!==void 0?N({en:`(Boss ${ne.targetNumber})`,zh:`Boss ${ne.targetNumber}`}):"")+" @ "+Re})}else ne.type===ke.Unknown&&(fe=l.jsx(l.Fragment,{children:"nodeInfo.skillName"}));return l.jsx("div",{style:k,children:fe})}else return l.jsx("div",{style:k,children:N({en:`${Q} actions selected.`,zh:`${Q}`})})},B=()=>{if(o)return l.jsxs("div",{children:[l.jsx("div",{style:{...k,backgroundColor:(p?e.editingValid:e.editingInvalid)+Zh},children:N(p?{en:"This edited sequence is valid.",zh:""}:D(c?.invalidActions[0],!0))}),l.jsx("button",{style:{display:"block",marginTop:10,marginLeft:y},onClick:Y=>{R.current=!0,o?I.applyEditedRecord():console.error("attempted to apply edits while timeline editor was not dirty"),O(!1),I.displayCurrentState()},children:N({en:"apply changes to timeline and save",zh:""})}),L()]});if(p)return l.jsx("div",{style:k,children:N({en:"Timeline is up to date.",zh:""})});{const Y=new Map;c?.invalidActions.forEach(fe=>Y.set(fe.index,fe));const Q=c?.invalidActions[0];let x=Q,Z=!0;const ne=I.record;if(Q!==void 0&&ne.selectionStartIndex!==void 0){const fe=c?.invalidActions.find(Ne=>ne.isInSelection(Ne.index)),Re=ne.getSelectionLength();Re===1&&fe!==void 0?(x=Y.get(ne.selectionStartIndex),Z=!1):Re>1&&fe!==void 0&&(x=fe)}return l.jsx("div",{children:l.jsx("div",{style:{...k,backgroundColor:e.editingInvalid+Zh},children:N(D(x,Z))})})}},K={display:"block",width:"100%",padding:3},V=Y=>{if(I.record.getFirstSelection()){R.current=!0;const Q=P();let x=f;const Z=Y(Q);Z!==void 0&&(x===void 0?x=Z:x=Math.min(Z,x));const ne=I.checkRecordValidity(Q,x);Z!==void 0&&ne.straightenedIfValid?(I.record=ne.straightenedIfValid,h(void 0)):h(x),d(ne),xo()}},ae=I.undoStack.peekUndoMessage(),oe=I.undoStack.peekRedoMessage(),j=l.jsxs("div",{style:{marginBottom:6,flex:1,display:"flex",flexDirection:"column",gap:10},children:[l.jsx("button",{style:K,onClick:Y=>V(Q=>(I.undoStack.push(new Ah(Q.selectionStartIndex,Q.getSelectionLength(),-1)),Q.moveSelected(-1))),children:N({en:"move up",zh:""})}),l.jsx("button",{style:K,onClick:Y=>V(Q=>(I.undoStack.push(new Ah(Q.selectionStartIndex,Q.getSelectionLength(),1)),Q.moveSelected(1))),children:N({en:"move down",zh:""})}),l.jsx("button",{style:K,onClick:Y=>V(Q=>(I.undoStack.push(new Or(Q.selectionStartIndex,Q.getSelected().actions,"delete")),Q.deleteSelected())),children:N({en:"delete selected",zh:""})}),l.jsx("button",{style:K,onClick:Y=>{const Q=I.record.getSelectionLength();Q>1&&V(x=>{const Z=x.selectionStartIndex,ne=x.selectionEndIndex;return I.undoStack.push(new Ah(ne,1,-(Q-1))),x.selectSingle(ne),x.moveSelected(-(Q-1)),x.selectSingle(Z),x.selectUntil(ne),x.selectionStartIndex})},children:N({en:l.jsxs(l.Fragment,{children:["move end of selection",l.jsx("br",{}),"to start of selection"]}),zh:l.jsxs(l.Fragment,{children:["",l.jsx("br",{}),""]})})}),l.jsx("hr",{style:{backgroundColor:e.bgLowContrast,height:2,marginTop:-2,marginBottom:-2,border:0,width:"100%"}}),l.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:6},children:[l.jsx("button",{style:K,onClick:mR,disabled:I.record.getSelectionLength()===0,children:N({en:"copy ",zh:""})}),l.jsx("button",{style:K,onClick:o0,children:N({en:"paste ",zh:""})})]}),l.jsxs("button",{style:K,onClick:()=>I.undoStack.undo(),disabled:ae===void 0,children:[N({en:"undo ",zh:""}),N(ae??{en:""})]}),l.jsxs("button",{style:K,onClick:()=>I.undoStack.redo(),disabled:oe===void 0,children:[N({en:"redo ",zh:""}),N(oe??{en:""})]})]}),$=Y=>{const Q=I.record.selectionStartIndex;Q!==void 0&&(Y.key==="Backspace"||Y.key==="Delete"?V(Z=>(I.undoStack.push(new Or(Q,Z.getSelected().actions,"delete")),Z.deleteSelected())):(I.handleTimelineKeyboardEvent(Y),Y.key==="Escape"&&Ee.setDragTarget(null,null)))},X=!0,ce=[],w=new Set(c?.invalidActions.map(Y=>Y.index));I.record.actions.forEach((Y,Q)=>{const x=!o&&Q===I.record.selectionStartIndex,Z=!o&&Q===I.record.selectionEndIndex;ce.push(l.jsx(lw,{index:Q,node:Y,isSelected:I.record.isInSelection(Q),recordIsDirty:o,isInvalid:w.has(Q),usedAt:c?.skillUseTimes[Q]??0,includeDetails:X,onKeyDown:$,refObj:x?t:Z?a:void 0},Q))});const z=Y=>({drop:Q=>{const x=I.record.selectionStartIndex??0;let Z=Y-(x??0);Z>0&&(Z-=I.record.getSelectionLength()),Z!==0&&V(ne=>ne.moveSelected(Z))},setSelected:Q=>{R.current=Q}}),se=C.useContext(Gu),Ee=C.useContext($f),M=ce.length,ee=z(M),de=Ee.dragTargetIndex===M;M>0&&ce.push(l.jsxs("tr",{tabIndex:-1,style:{height:"0.8em",background:e.timelineEditor.headerFooter,userSelect:"none",...de?$b(e):{}},draggable:!se.value,onDragStart:Y=>Y.preventDefault(),onDragLeave:Y=>{Ee.setDragTarget(null,null)},onDrop:Y=>{ee.drop(Y),Ee.setDragTarget(null,null)},onDragOver:Y=>{Y.preventDefault(),Ee.setDragTarget(M,I.game.getDisplayTime())},children:[l.jsx("td",{style:{border:"none"}}),l.jsx("td",{style:{border:"none"}}),l.jsx("td",{style:{border:"none"}})]},M));const W={backgroundColor:e.timelineEditor.headerFooter};return l.jsx("div",{onClick:Y=>{!Y.shiftKey&&!R.current&&(I.record.unselectAll(),I.displayCurrentState()),R.current=!1},children:l.jsx(NT,{contentHeight:oS,children:[{content:j,defaultSize:20},{content:l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:xr.paddingLeft},children:[l.jsxs("table",{style:{position:"relative",width:"100%",borderCollapse:"collapse",borderColor:e.bgMediumContrast,borderWidth:"1px",borderStyle:"solid"},children:[l.jsx("thead",{children:l.jsxs("tr",{style:Qb,children:[l.jsx("th",{className:"stickyTh",style:{...W,...xr,...ls(e)},children:"#"}),l.jsx("th",{className:"stickyTh",style:{...W,...ll,...ls(e)},children:N({en:"Time",zh:""})}),l.jsx("th",{className:"stickyTh",style:{...W,...Zb,...ls(e)},children:N({en:"Actions",zh:""})})]})}),l.jsx("tbody",{children:l.jsx(qb.Provider,{value:z,children:ce})})]}),M===0&&l.jsx("span",{style:{paddingLeft:xr.paddingLeft,fontStyle:"italic"},children:N({en:"No actions to display yet.",zh:""})})]}),defaultSize:40,fullBorder:!0,showScrollbar:!0},{content:l.jsxs("div",{style:{display:"flex 4 6",flexDirection:"column",height:"100%",width:"100%"},children:[l.jsx("div",{style:{height:"30%"},children:G()}),l.jsx("hr",{style:{marginLeft:"5px",border:"none",borderTop:"1px solid "+e.bgHighContrast}}),l.jsx("div",{style:{height:"60%"},children:B()})]}),defaultSize:40,fullBorder:!0}]})})}const rw=30;class cw{actions;cursor;constructor(){this.cursor=0,this.actions=[]}clear(){this.cursor=0,this.actions=[]}get length(){return this.actions.length}push(t){this.actions.splice(this.cursor,this.actions.length-this.cursor,t),this.actions.length>rw&&this.actions.shift(),this.cursor=this.actions.length}doThenPush(t){t.redo(),this.push(t)}emitLog(...t){}undo(){this.cursor>0?(this.actions[--this.cursor].undo(),this.emitLog("UNDO",this.actions[this.cursor])):this.emitLog("nothing to undo")}redo(){this.cursor<this.actions.length?(this.emitLog("REDO",this.actions[this.cursor]),this.actions[this.cursor++].redo()):this.emitLog("nothing to redo")}peekUndoMessage(){return this.cursor>0?this.actions[this.cursor-1].message:void 0}peekRedoMessage(){return this.cursor<this.actions.length?this.actions[this.cursor].message:void 0}}class Si{message;constructor(t){this.message=t}}function bT(e){return e>0?"actions":"action"}class Ql extends Si{node;index;constructor(t,a){super({en:"add action",zh:""}),this.node=t,this.index=a}undo(){I.record.selectSingle(this.index),I.deleteSelectedSkills()}redo(){I.insertRecordNode(this.node,this.index)}}class uw extends Si{oldNode;newNode;index;constructor(t,a){super({en:"edit action",zh:""}),I.record.selectSingle(a),this.oldNode=I.record.getFirstSelection(),console.assert(this.oldNode!==void 0),this.newNode=t,this.index=a}undo(){I.record.replaceNode(this.oldNode,this.index),I.autoSave(),Mn()}redo(){I.record.replaceNode(this.newNode,this.index),I.autoSave(),Mn()}}class Ah extends Si{startIndex;selectCount;offset;constructor(t,a,o){super({en:`move ${a} ${bT(a)}`,zh:`${a}`}),this.startIndex=t,this.selectCount=a,this.offset=o}undo(){I.record.selectSingle(this.startIndex+this.offset),I.record.selectUntil(this.startIndex+this.selectCount+this.offset-1),I.record.moveSelected(-this.offset),I.autoSave(),Mn()}redo(){I.record.selectSingle(this.startIndex),I.record.selectUntil(this.startIndex+this.selectCount-1),I.record.moveSelected(this.offset),I.autoSave(),Mn()}}class Or extends Si{startIndex;nodes;source;constructor(t,a,o){super({en:`${o} ${a.length} ${bT(a.length)}`,zh:`${o==="delete"?"":""}${a.length}`}),this.startIndex=t,this.nodes=a,this.source=o}undo(){I.insertRecordNodes(this.nodes,this.startIndex)}redo(){I.record.selectSingle(this.startIndex),I.record.selectUntil(this.startIndex+this.nodes.length-1),I.deleteSelectedSkills(),Mn()}}class OT extends Si{nodes;index;source;constructor(t,a,o){super({en:o==="preset"?"add preset sequence":`paste ${t.length} ${bT(t.length)}`,zh:o==="preset"?"":`${t.length}`}),this.nodes=t,this.index=a,this.source=o}undo(){I.record.selectSingle(this.index),I.record.selectUntil(this.index+this.nodes.length-1),I.deleteSelectedSkills()}redo(){I.insertRecordNodes(this.nodes,this.index)}}class dw extends Si{nodes;index;oldConfig;newConfig;constructor(t,a,o,s){super({en:"import from fflogs",zh:"fflogs"}),this.nodes=t,this.index=a,this.oldConfig=o,this.newConfig=s}undo(){I.record.selectSingle(this.index),I.record.selectUntil(this.index+this.nodes.length-1),I.deleteSelectedSkills(),I.setConfigAndRestart(this.oldConfig,!1),I.updateAllDisplay(),I.scrollToTime()}redo(){I.insertRecordNodes(this.nodes,this.index),I.setConfigAndRestart(this.newConfig,!1),I.updateAllDisplay(),I.scrollToTime()}}class hw extends Si{oldIndex;newIndex;constructor(t,a){super({en:"change active slot",zh:""}),this.oldIndex=t,this.newIndex=a}undo(){I.setActiveSlot(this.oldIndex),I.displayCurrentState()}redo(){I.setActiveSlot(this.newIndex),I.displayCurrentState()}}class fw extends Si{deleteIndex;deletedRecord;constructor(t,a){super({en:"delete slot",zh:""}),this.deleteIndex=t,this.deletedRecord=a}undo(){I.timeline.addSlotAtIndex(this.deleteIndex),I.loadBattleRecordFromFile(this.deletedRecord),I.autoSave(),I.displayCurrentState()}redo(){I.timeline.removeSlot(this.deleteIndex),I.displayCurrentState()}}class Ew extends Si{oldIndex;constructor(t){super({en:"add slot",zh:""}),this.oldIndex=t}undo(){I.timeline.removeSlot(I.timeline.slots.length-1),I.setActiveSlot(this.oldIndex),I.displayCurrentState()}redo(){I.setActiveSlot(this.oldIndex),I.timeline.addSlot(),I.displayCurrentState()}}class mw extends Si{sourceIndex;constructor(t){super({en:"clone slot",zh:""}),this.sourceIndex=t}undo(){I.timeline.removeSlot(I.timeline.slots.length-1),I.setActiveSlot(this.sourceIndex),I.displayCurrentState()}redo(){I.setActiveSlot(this.sourceIndex),I.cloneActiveSlot(),I.displayCurrentState()}}class Aw extends Si{oldConfig;newConfig;oldRecord;constructor(t,a,o){super({en:"change config",zh:""}),this.oldConfig=t,this.newConfig=a,o===void 0&&(t.job!==a.job||t.level!==a.level)&&console.error("config apply w/o reset but job or level changed"),this.oldRecord=o}undo(){this.oldRecord!==void 0?(I.loadBattleRecordFromFile(this.oldRecord),I.autoSave()):I.setConfigAndRestart(this.oldConfig,!1),I.updateAllDisplay(),I.scrollToTime()}redo(){I.setConfigAndRestart(this.newConfig,this.oldRecord!==void 0),I.updateAllDisplay(),I.scrollToTime()}}class Rw extends Si{oldRecord;importedRecord;constructor(t,a){super({en:"import from file",zh:""}),this.oldRecord=t,this.importedRecord=a}undo(){I.loadBattleRecordFromFile(this.oldRecord),I.autoSave(),I.displayCurrentState()}redo(){I.loadBattleRecordFromFile(this.importedRecord),I.autoSave(),I.displayCurrentState()}}let e0,t0=[];const n0="",a0=", ",wA=":";function Tw(e){const t=I.record.getSelected().actions,a=I.record.selectionStartIndex;if(a===void 0)return"";let o="";if(e==="plain"){const s=[];t.forEach(d=>s.push(d.toLocalizedString()));const c=Mi()==="zh"?n0:a0;o=s.join(c)}else if(e==="tsv"){const s=[],c=I.checkRecordValidity(I.record,0);t.forEach((d,f)=>s.push([c.skillUseTimes[f+a].toFixed(3),d.targetList.length,d.toLocalizedString()].join("	"))),o=s.join(`
`)}else if(e==="discord"){const s=[];t.forEach(c=>{if(c.info.type===ke.Skill){const d=c.info.skillName;d==="TINCTURE"?s.push(":IntPot:"):d==="SWIFTCAST"?s.push(I.gameConfig.job==="BLM"?":Swift:":":Swiftcast:"):s.push(`:${_n[d].discordEmote??_n[d].name.replaceAll(" ","")}:`)}else s.push(c.toLocalizedString())}),o=s.join(" ")}else console.error("invalid clipboard mode",e);return e0=o,t0=t,o}function Sw(e){return e==="."||e>="0"&&e<="9"}function i0(e,t){const a=e.toLowerCase(),o=t?.toLowerCase();if(a==="wait mp"||e===""||a==="wait"&&o===" mp"||e===""&&t?.substring(3,5)==="")return TC();const s=e.split(" ");if(!(t!==void 0&&Sw(t[0]))){if(s.length===2&&s[0]==="wait"){const c=Vi(s[1]);return isNaN(c)?void 0:yr(c)}if(e.startsWith("")){const c=Vi(e.substring(3));return isNaN(c)?void 0:yr(c)}if(s.length===2&&s[0]==="jump"){const c=Vi(s[1]);return isNaN(c)?void 0:dl(c)}if(e.startsWith("")){const c=Vi(e.substring(2));return isNaN(c)?void 0:dl(c)}if(s.length>=2&&s[0]==="toggle"){const c=cp(s.slice(1).join(" "));return c!==void 0?eR(c):void 0}if(e.startsWith("")){const c=cp(e.substring(2));return c!==void 0?eR(c):void 0}}}function $p(e,t=1){const a=i0(e,void 0);if(a!==void 0)return a;const o=lT(e)??EC.get(e)??mC.get(e);return o!==void 0?El(o,Array(t).fill(0).map((s,c)=>c+1)):void 0}function gw(e){if(e===e0)return t0;const t=e.split(`
`),a=[];for(const o of t){const s=o.trimStart();if(o.includes("	")){const c=o.split("	");if(c.length>0){const d=c[c.length-1].trim();let f=1;if(c.length>1){const m=parseInt(c[c.length-2]);isNaN(m)||(f=m)}const h=$p(d,f);h!==void 0&&a.push(h)}}else if(s.length>2&&s[0]===wA){let c=!0,d="";for(let f=1;f<s.length;f++){const h=s[f];if(c&&(h===wA||h===" ")){const R=d.indexOf("~");if(R>0&&(d=d.substring(0,R)),d.toLowerCase().endsWith("_ogcd")&&(d=d.substring(0,d.length-5)),d.length!==0)if(d==="IntPot")a.push(El("TINCTURE"));else if(d==="Swift"||d==="Swiftcast")a.push(El("SWIFTCAST"));else{const T=oT.get(I.gameConfig.job).get(d);T!==void 0?a.push(El(T)):console.error("unrecognized discord emote",d)}d="",c=!1;continue}if(h===wA&&d.length===0){c=!0,d="";continue}(d.length>0||h!==" ")&&(d+=h);const m=s.substring(f+1,f+4);if(!c){const R=i0(d,m);R!==void 0&&(a.push(R),d="")}}}else{let c=s.split(a0);c.length<2&&(c=s.split(n0)),c.forEach(d=>{if(d.length>0){const f=$p(d.trim());f!==void 0&&a.push(f)}})}}return a}function mR(){navigator.clipboard.writeText(Tw(I.clipboardMode))}function o0(){I.queuedPastes++,navigator.clipboard.readText().then(e=>{if(e.startsWith("https://")||e.startsWith("www.")||e.startsWith("cn."))return;const t=gw(e);if(t===void 0||t.length===0){console.error("failed to paste parsed clipboard contents:"),console.error(e);return}I.undoStack.doThenPush(new OT(t,I.record.selectionStartIndex??I.record.length,"paste"))}).finally(()=>{I.queuedPastes--,console.assert(I.queuedPastes>=0)})}class An{name;duration;color;damageFactor;critBonus;dhBonus;job;constructor(t,a,o,s,c,d,f){this.name=t,this.duration=o,this.color=a,this.damageFactor=s,this.critBonus=c,this.dhBonus=d,this.job=f}}const DT=[new An(H.ArcaneCircle,ft.Pink,20,1.03,0,0,"RPR"),new An(H.ArmysPaeon,ft.Yellow,45,1,0,.03,"BRD"),new An(H.BattleLitany,ft.Blue,20,1,.1,0,"DRG"),new An(H.BattleVoice,ft.Orange,20,1,0,.2,"BRD"),new An(H.Brotherhood,ft.Orange,20,1.05,0,0,"MNK"),new An(H.Card_TheBalance,ft.Red,15,1.03,0,0,"AST"),new An(H.Card_TheSpear,ft.Blue,15,1.06,0,0,"AST"),new An(H.ChainStratagem,ft.Grey,20,1,.1,0,"SCH"),new An(H.Devilment,ft.Green,20,1,.2,.2,"DNC"),new An(H.Divination,ft.Yellow,20,1.06,0,0,"AST"),new An(H.Dokumori,ft.Purple,21,1.05,0,0,"NIN"),new An(H.Embolden,ft.Grey,20,1.05,0,0,"RDM"),new An(H.MagesBallad,ft.Purple,45,1.01,0,0,"BRD"),new An(H.RadiantFinale1,ft.Purple,20,1.02,0,0,"BRD"),new An(H.RadiantFinale2,ft.Purple,20,1.04,0,0,"BRD"),new An(H.RadiantFinale3,ft.Purple,20,1.06,0,0,"BRD"),new An(H.SearingLight,ft.Blue,20,1.05,0,0,"SMN"),new An(H.StandardFinish,ft.Yellow,60,1.05,0,0,"DNC"),new An(H.StarryMuse,ft.Purple,20.5,1.05,0,0,"PCT"),new An(H.TechnicalFinish,ft.Blue,20,1.05,0,0,"DNC"),new An(H.WanderersMinuet,ft.Green,45,1,.02,0,"BRD")],l0=new Map;DT.forEach(e=>{l0.set(e.name,e)});let Qh=class{name;info;constructor(t){this.name=t;let a=l0.get(t);a||(a=DT[0],console.error("Buff info not found!")),this.info=a}};const s0=152,lh=5882,Zn=5925,GA={main:Zn,spellSpeed:420,skillSpeed:420,criticalHit:3387,directHit:1935,determination:2407,piety:440,tenacity:420},$h={DRK:{main:lh,spellSpeed:420,skillSpeed:420,criticalHit:3404,directHit:1068,determination:2883,piety:440,tenacity:794},GNB:{main:lh,spellSpeed:420,skillSpeed:420,criticalHit:3404,directHit:1068,determination:2883,piety:440,tenacity:794},PLD:{main:lh,spellSpeed:420,skillSpeed:420,criticalHit:3242,directHit:1230,determination:2883,piety:440,tenacity:794},WAR:{main:lh,spellSpeed:420,skillSpeed:420,criticalHit:3404,directHit:1068,determination:2883,piety:440,tenacity:794},AST:{main:Zn,spellSpeed:704,skillSpeed:420,criticalHit:3427,directHit:1230,determination:2510,piety:718,tenacity:420},SCH:{main:Zn,spellSpeed:1221,skillSpeed:420,criticalHit:3484,directHit:852,determination:2314,piety:718,tenacity:420},SGE:{main:Zn,spellSpeed:704,skillSpeed:420,criticalHit:3427,directHit:1230,determination:2510,piety:718,tenacity:420},WHM:{main:Zn,spellSpeed:704,skillSpeed:420,criticalHit:3427,directHit:1230,determination:2510,piety:718,tenacity:420},DRG:{main:Zn,spellSpeed:420,skillSpeed:420,criticalHit:3425,directHit:1996,determination:2308,piety:440,tenacity:420},MNK:{main:Zn,spellSpeed:420,skillSpeed:968,criticalHit:3487,directHit:1685,determination:2009,piety:440,tenacity:420},NIN:{main:Zn,spellSpeed:420,skillSpeed:420,criticalHit:3378,directHit:1981,determination:2370,piety:440,tenacity:420},RPR:{main:Zn,spellSpeed:420,skillSpeed:474,criticalHit:3425,directHit:1942,determination:2308,piety:440,tenacity:420},SAM:{main:Zn,spellSpeed:420,skillSpeed:690,criticalHit:3425,directHit:2045,determination:1989,piety:440,tenacity:420},VPR:{main:Zn,spellSpeed:420,skillSpeed:420,criticalHit:3378,directHit:1981,determination:2370,piety:440,tenacity:420},DNC:GA,BRD:GA,MCH:GA,BLM:{main:Zn,spellSpeed:978,skillSpeed:420,criticalHit:3456,directHit:1764,determination:1951,piety:440,tenacity:420},RDM:{main:Zn,spellSpeed:528,skillSpeed:420,criticalHit:3399,directHit:1872,determination:2350,piety:440,tenacity:420},SMN:{main:Zn,spellSpeed:528,skillSpeed:420,criticalHit:3399,directHit:1872,determination:2350,piety:440,tenacity:420},PCT:{main:Zn,spellSpeed:420,skillSpeed:420,criticalHit:3399,directHit:1764,determination:2566,piety:440,tenacity:420},BLU:{main:1701,spellSpeed:1573,skillSpeed:380,criticalHit:1343,directHit:785,determination:676,piety:340,tenacity:380},NEVER:{main:Zn,spellSpeed:420,skillSpeed:420,criticalHit:420,directHit:420,determination:440,piety:440,tenacity:420}};function AR(e,t=$e.lvl100){return{job:e,shellVersion:HR.version,level:t??(e==="BLU"?$e.lvl80:$e.lvl100),...$h[e],wd:s0,countdown:5,randomSeed:"sup",fps:60,gcdSkillCorrection:0,animationLock:.7,timeTillFirstManaTick:1.2,procMode:ua.Never,initialResourceOverrides:[]}}function Iw(e){const t=Rt(`defaultPartialConfig: ${e}`);if(t===null)return $h[e];const a=JSON.parse(t);return Object.entries($h[e]).forEach(([o,s])=>{a[o]===void 0&&(a[o]=s)}),a}const Rh=AR("BLM");class ci{job;shellVersion=HR.version;level;wd;main;spellSpeed;skillSpeed;criticalHit;directHit;determination;piety;tenacity;countdown;randomSeed;fps;gcdSkillCorrection;animationLock;timeTillFirstManaTick;procMode;initialResourceOverrides;legacy_casterTax;constructor(t){this.job=t.job,this.shellVersion=t.shellVersion;const a=Rh;this.level=t.level??a.level,this.spellSpeed=t.spellSpeed,this.skillSpeed=t.skillSpeed??a.skillSpeed,this.criticalHit=t.criticalHit??a.criticalHit,this.directHit=t.directHit??a.directHit,this.determination=t.determination??a.determination,this.piety=t.piety??a.piety,this.countdown=t.countdown,this.randomSeed=t.randomSeed,this.fps=t.fps,this.gcdSkillCorrection=t.gcdSkillCorrection,this.animationLock=t.animationLock,this.timeTillFirstManaTick=t.timeTillFirstManaTick,this.procMode=t.procMode,this.initialResourceOverrides=t.initialResourceOverrides.map(o=>{if(o.effectOrTimerEnabled===void 0&&(o.enabled===void 0?o.effectOrTimerEnabled=!0:o.effectOrTimerEnabled=o.enabled),!(o.type in Ge||o.type in ns))if(o.type.toString()==="AstralFire")o.type="ASTRAL_FIRE";else if(o.type.toString()==="UmbralIce")o.type="UMBRAL_ICE";else if(o.type.toString()==="UmbralHeart")o.type="UMBRAL_HEART";else{let s=Object.keys(Ge).find(c=>Ge[c].name===o.type);s||(s=Object.keys(ns).find(c=>ns[c].name===o.type)),s&&(o.type=s)}return new iT(o)}),this.legacy_casterTax=t?.casterTax??0,this.tenacity=t?.tenacity??420,this.main=t?.main??Zn,this.wd=t?.wd??s0}adjustedOvertimePotency(t,a){return ut.overtimePotency(this.level,a==="sks"?this.skillSpeed:a==="sps"?this.spellSpeed:ut.getSubstatBase(this.level),t)}adjustedGCD(t=2.5,a){return this.shellVersion>=Oo.AllaganGcdFormula?ut.preTaxGcd(this.level,this.spellSpeed,t,a):ut.preTaxGcdLegacy(this.level,this.spellSpeed,t,a)}adjustedSksGCD(t=2.5,a){return this.shellVersion>=Oo.AllaganGcdFormula?ut.preTaxGcd(this.level,this.skillSpeed,t,a):ut.preTaxGcdLegacy(this.level,this.skillSpeed,t,a)}adjustedCastTime(t,a){return ut.preTaxCastTime(this.level,this.spellSpeed,t,a)}adjustedSksCastTime(t,a){return ut.preTaxCastTime(this.level,this.skillSpeed,t,a)}getAfterTaxGCD(t){return this.shellVersion<Oo.FpsTax?t:ut.afterFpsTax(this.fps,t)+this.gcdSkillCorrection}getAfterTaxCastTime(t){return this.shellVersion<Oo.FpsTax?this.legacy_casterTax+t:ut.afterFpsTax(this.fps,t)+ut.afterFpsTax(this.fps,Yx)+this.gcdSkillCorrection}static getSlidecastWindow(t){return .5}get critRate(){return ut.criticalHitRate(this.level,this.criticalHit)}getOverrideStacks(t){return this.initialResourceOverrides.find(a=>a.type===t)?.stacks}savePartialConfig(){const t={};Object.keys($h[this.job]).forEach(a=>{t[a]=this[a]}),St(`defaultPartialConfig: ${this.job}`,JSON.stringify(t))}serialized(){return{job:this.job,shellVersion:this.shellVersion,level:this.level,wd:this.wd,main:this.main,spellSpeed:this.spellSpeed,skillSpeed:this.skillSpeed,criticalHit:this.criticalHit,directHit:this.directHit,determination:this.determination,piety:this.piety,tenacity:this.tenacity,countdown:this.countdown,randomSeed:this.randomSeed,casterTax:this.legacy_casterTax,fps:this.fps,gcdSkillCorrection:this.gcdSkillCorrection,animationLock:this.animationLock,timeTillFirstManaTick:this.timeTillFirstManaTick,procMode:this.procMode,initialResourceOverrides:this.initialResourceOverrides.map(t=>t.serialized())}}}function _w(e){const t=Tt();return l.jsx("div",{style:{top:1+(e.offset?.y??0),left:e.offset?.x??0,marginRight:8,position:"relative",width:16,height:16,borderRadius:8,display:"inline-block",border:"1px solid "+t.bgHighContrast,verticalAlign:"top"},children:e.color&&l.jsx("div",{style:{backgroundColor:`${e.color}`,position:"absolute",top:2,bottom:2,left:2,right:2,borderRadius:"inherit"}})})}function pw(e){const t=Tt(),a=e.heightPx??30,o=e.widthPx??24;let s;return e.imgUrl?s=l.jsx("img",{src:e.imgUrl,alt:"resource img",style:{display:"block",margin:"2px auto",maxWidth:a-4,maxHeight:o-4}}):e.color&&(s=l.jsx("div",{style:{backgroundColor:e.color,position:"absolute",top:3,bottom:3,left:3,right:3}})),l.jsx("div",{style:{display:"inline-block",position:"relative",top:e.offset?.y??0,left:e.offset?.x??0,width:a,height:o,border:"1px solid "+t.bgHighContrast,marginRight:4},children:s})}function Th(e={name:"placeholder",color:"#6cf",value:"0.34/1.00",progress:.34,width:100,hidden:!1}){return l.jsxs("div",{hidden:e.hidden,style:{marginBottom:4,lineHeight:"1.5em"},children:[l.jsx("div",{style:{display:"inline-block",height:"100%",width:108},children:e.name}),l.jsxs("div",{style:{width:200,display:"inline-block"},children:[l.jsx(aw,{backgroundColor:e.color,progress:e.progress,width:e.width,offsetY:4}),l.jsx("div",{style:{marginLeft:6,height:"100%",display:"inline-block"},children:e.value})]})]})}function Yi(e){const t=e.containerType==="box"||e.items.some(o=>o.imgUrl!==void 0),a=e.items.map((o,s)=>e.containerType==="circle"&&o.imgUrl===void 0?l.jsx(_w,{color:o.color,offset:t?{x:0,y:3}:void 0},s):l.jsx(pw,{color:o.color,imgUrl:o.imgUrl,offset:t?{x:-2,y:0}:void 0,heightPx:o.boxHeightPx,widthPx:o.boxWidthPx},s));return t?l.jsxs("div",{style:{marginBottom:4},children:[l.jsx("div",{style:{display:"inline-block",position:"relative",verticalAlign:"top",top:6,width:108},children:e.name}),l.jsx("div",{style:{display:"inline-block"},children:a}),e.label?l.jsx("div",{style:{marginLeft:6,display:"inline-block",position:"relative",verticalAlign:"top",top:6},children:e.label}):void 0]}):l.jsxs("div",{style:{marginBottom:4,lineHeight:"1.5em"},children:[l.jsx("div",{style:{display:"inline-block",height:"100%",width:108},children:e.name}),l.jsxs("div",{style:{width:200,display:"inline-block"},children:[l.jsx("div",{style:{display:"inline-block"},children:a}),e.label?l.jsx("div",{style:{marginLeft:6,height:"100%",display:"inline-block"},children:e.label}):void 0]})]})}function Jp(e){return l.jsxs("div",{className:e.className,style:{marginBottom:4,lineHeight:"1.5em"},children:[l.jsx("div",{style:{display:"inline-block",height:"100%",width:108},children:e.name}),l.jsx("div",{style:{width:200,display:"inline-block"},children:l.jsx("div",{style:{display:"inline-block",marginLeft:6,color:e.color},children:e.text})})]})}const ms=new Map;function zt(e,t){ms.set(e,`Buffs/${t}`);const a=Ge[e].maximumStacks??1;for(let o=2;o<=a;o++)ms.set(e+o,`Buffs/${t.replace(Ge[e].name,Ge[e].name+o)}`)}Object.keys(tC).forEach(e=>{const t=Ge[e].name;ms.set(e,`Buffs/Role/${t}.png`)});Object.keys(eC).forEach(e=>ms.set(e,"Buffs/Role/Tank Limit Break.png"));ms.set("SPRINT","Buffs/General/Sprint.png");ms.set("TINCTURE","Buffs/General/Tincture.png");function Nw(e){let t=e.rscType;e.stacks>1&&(t+=e.stacks);let a;e.rscType==="AUTOS_ENGAGED"||e.rscType==="REAR_POSITIONAL"||e.rscType==="FLANK_POSITIONAL"?a={height:40}:a={height:40};const o=Ge[e.rscType].mayNotBeCanceled,s={display:"inline-block",verticalAlign:"top",filter:e.enabled?"none":"grayScale(100%)"},c=l.jsx("img",{style:a,src:"assets/"+ms.get(t),alt:e.rscType});return l.jsxs("div",{title:Ke(e.rscType),className:e.className+" buff "+e.rscType,children:[o?l.jsx("div",{style:s,children:c}):l.jsx(Es,{content:c,style:s,onClickFn:()=>{(e.onSelf||e.targetNumber!==void 0)&&(I.requestToggleBuff(e.rscType,!0,e.targetNumber),I.updateStatusDisplay(I.game),I.updateSkillButtons(I.game),I.autoSave(),Mn())}}),l.jsx("span",{className:"buff-label",style:{visibility:e.timeRemaining===void 0?"hidden":void 0},children:(e.timeRemaining??"0.000")+(e.targetNumber!==void 0?` ( ${e.targetNumber})`:"")})]})}function Jh(e){const t=e.data,a=[];for(let s=0;s<t.length;s++)a.push(l.jsx(Nw,{...t[s]},s));let o={height:54,textAlign:"right",lineHeight:"1em"};return e.style&&(o={...o,...e.style}),l.jsx("div",{style:o,children:a})}function r0(e){const t=Tt(),a=e.data,o=l.jsx(Th,{name:"GCD",color:t.resources.gcdBar,progress:a.gcdReady?0:1-a.timeTillGCDReady/a.gcd,value:a.timeTillGCDReady.toFixed(3),width:100,hidden:a.gcdReady}),s=l.jsx(Th,{name:"casting/taxed",color:a.canMove?t.resources.gcdBar:t.resources.lockBar,progress:a.castLocked?1-a.castLockCountdown/a.castLockTotalDuration:0,value:a.castLockCountdown.toFixed(3),width:100,hidden:!a.castLocked}),c=l.jsx(Th,{name:"using skill",color:t.resources.lockBar,progress:a.animLocked?1-a.animLockCountdown/a.animLockTotalDuration:0,value:a.animLockCountdown.toFixed(3),width:100,hidden:!a.animLocked});return l.jsxs("div",{style:{position:"absolute"},children:[o,s,c]})}function c0(e){const t=e.data.resources.map((o,s)=>{switch(o.kind){case"bar":return l.jsx(Th,{name:o.name,color:o.color,progress:o.progress,value:o.valueString,width:o.widthPx??100,hidden:o.hidden??!1},"resourceDisplay"+s);case"counter":{const c=[];for(let d=0;d<o.maxStacks;d++)c.push({color:d<o.currentStacks?o.color:void 0});return l.jsx(Yi,{containerType:"circle",name:o.name,label:o.valueString??`${o.currentStacks}/${o.maxStacks}`,items:c},"resourceDisplay"+s)}case"paint":{const c=[];for(let f=0;f<o.maxStacks;f++){const h=o.hasComet&&f===o.currentStacks-1?o.cometColor:o.holyColor;c.push({color:f<o.currentStacks?h:void 0,imgUrl:void 0})}const d=`${o.currentStacks}/${o.maxStacks}`;return l.jsx(Yi,{containerType:"circle",name:o.name,label:d,items:c},"resourceDisplay"+s)}case"dance":{const c=o.currentStacks,d=[o.emboiteColor,o.entrechatColor,o.jeteColor,o.pirouetteColor],f=[];for(let m=0;m<o.maxStacks;m++)f.push({color:m<c?d[m]:void 0});const h=`${c}/${o.maxStacks}`;return l.jsx(Yi,{containerType:"circle",name:o.name,label:h,items:f},"resourceDisplay"+s)}case"sen":{const c=[{present:o.hasSetsu,color:o.setsuColor,name:"setsu"},{present:o.hasGetsu,color:o.getsuColor,name:"getsu"},{present:o.hasKa,color:o.kaColor,name:"ka"}],d=l.jsx(ze,{topic:"senExplanation",content:N({en:"from left to right: setsu (yukikaze), getsu (gekko/mangetsu), ka (kasha/oka)",zh:"//"})});return l.jsx(Yi,{name:l.jsxs(l.Fragment,{children:[o.name," ",d]}),label:c.filter(f=>f.present).map(f=>f.name).join("+"),containerType:"circle",items:c.map(f=>({color:f.present?f.color:void 0}))},"resourceDisplay"+s)}case"coda":{const c=[{present:o.hasWanderers,color:o.wanderersColor},{present:o.hasMages,color:o.magesColor},{present:o.hasArmys,color:o.armysColor}],d=l.jsx(ze,{topic:"codaExplanation",content:N({en:"from left to right: wanderer's coda, mage's coda, army's coda"})});return l.jsx(Yi,{name:l.jsxs(l.Fragment,{children:[o.name," ",d]}),containerType:"circle",items:c.map(f=>({color:f.present?f.color:void 0}))},"resourceDisplay"+s)}case"attunement":{const c=[{gem:o.ruby,color:o.rubyColor},{gem:o.topaz,color:o.topazColor},{gem:o.emerald,color:o.emeraldColor}];return l.jsxs("div",{children:[l.jsx(Yi,{name:o.aetherName,containerType:"circle",items:c.map(d=>({color:d.gem?d.color:void 0}))}),l.jsx(Jp,{name:o.attunementName,text:o.attunementCount.toString()+(o.attunementCount>0?` | ${o.timeRemaining.toFixed(3)}`:"")})]},"resourceDisplay"+s)}case"nadi":return l.jsx("div",{children:l.jsx(Yi,{name:o.name,label:o.label,containerType:"circle",items:[{color:o.lunar?o.lunarColor:void 0},{color:o.solar?o.solarColor:void 0}]})},"resourceDisplay"+s);case"beast":{const c=new Array(3).map(d=>({color:void 0}));return o.chakras.map((d,f)=>{c[f]={color:d==="opo"?o.opoColor:d==="raptor"?o.raptorColor:d==="coeurl"?o.coeurlColor:void 0}}),l.jsx("div",{children:l.jsx(Yi,{name:o.name,label:o.label,containerType:"circle",items:c})},"resourceDisplay"+s)}case"chakra":{const c=o.value>o.wrapCount,d=c?o.value%o.wrapCount:o.value,f=new Array(o.wrapCount);for(let h=0;h<o.wrapCount;h++)f[h]={color:c?h+1>d?o.regularColor:o.overflowColor:h+1>d?void 0:o.regularColor};return l.jsx("div",{children:l.jsx(Yi,{name:o.name,label:o.label,containerType:"circle",items:f})},"resourceDisplay"+s)}case"arcana":{const c=o.activeSlots.map((d,f)=>{const h=f===o.activeSlots.length-1?18:20,m=f===o.activeSlots.length-1?16:20;return{color:d?o.currentArcanaColor:void 0,boxHeightPx:h,boxWidthPx:m}});return l.jsx("div",{children:l.jsx(Yi,{name:o.name,containerType:"box",items:c})},"resourceDisplay"+s)}default:return l.jsx(Jp,{name:o.name,text:o.text,color:o.color},"resourceDisplay"+s)}});let a={textAlign:"left",minHeight:"13.5em"};return e.style&&(a={...a,...e.style}),l.jsx("div",{style:a,children:t})}let u0=(e,t)=>{};class Cw extends Ha.Component{state;static contextType=Nn;constructor(t){super(t),this.state={time:0,resources:[],enemyBuffs:[],selfBuffs:[],level:100,layoutFn:a=>l.jsx("div",{})},u0=(a,o)=>{const s=a(ha(this.context));this.setState({layoutFn:o,...s})}}componentDidMount(){I.updateStatusDisplay(I.game)}render(){return l.jsxs("div",{style:{position:"relative",textAlign:"left",margin:"8px 0"},children:[l.jsx("div",{style:{position:"absolute",top:-8,right:0,zIndex:1},children:l.jsx(ze,{topic:"mainControlRegion",content:l.jsx("div",{className:"toolTip",children:N({en:l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"paragraph",children:[l.jsx("span",{style:{color:"lightgray"},children:"grey"})," border: not focused"]}),l.jsxs("div",{className:"paragraph",children:[l.jsx("b",{style:{color:"mediumpurple"},children:"purple"})," border: up-to-date, receiving input"]}),l.jsxs("div",{className:"paragraph",children:[l.jsx("b",{style:{color:"mediumseagreen"},children:"green"})," border: real-time"]}),l.jsxs("div",{className:"paragraph",children:[l.jsx("b",{style:{color:"darkorange"},children:"orange"})," border: viewing historical state, receiving input"]})]}),zh:l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"paragraph",children:[l.jsx("span",{style:{color:"lightgray"},children:""}),""]}),l.jsxs("div",{className:"paragraph",children:[l.jsx("b",{style:{color:"mediumpurple"},children:""}),""]}),l.jsxs("div",{className:"paragraph",children:[l.jsx("b",{style:{color:"mediumseagreen"},children:""}),""]}),l.jsxs("div",{className:"paragraph",children:[l.jsx("b",{style:{color:"darkorange"},children:""}),""]})]}),ja:l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"paragraph",children:[l.jsx("span",{style:{color:"lightgray"},children:""})," : "]}),l.jsxs("div",{className:"paragraph",children:[l.jsx("b",{style:{color:"mediumpurple"},children:""})," : "]}),l.jsxs("div",{className:"paragraph",children:[l.jsx("b",{style:{color:"mediumseagreen"},children:""})," : "]}),l.jsxs("div",{className:"paragraph",children:[l.jsx("b",{style:{color:"darkorange"},children:""})," : "]})]})})})})}),this.state.layoutFn(this.state)]})}}class Xt{state;constructor(t){this.state=t}makeCommonTimer(t,a=!0){const o=this.state.resources.timeTillReady(t),s=this.state.resources.get(t);return{rscType:t,onSelf:a,enabled:s.enabled,stacks:s.availableAmount(),timeRemaining:o.toFixed(3),className:s.availableAmountIncludingDisabled()>0?"":"hidden"}}makeTargetedTimers(t){return Array(bi).fill(0).map((a,o)=>{const s=o+1,c=this.state.debuffs.timeTillExpiry(t,s),d=this.state.debuffs.get(t,s);return{rscType:t,onSelf:!1,targetNumber:s,enabled:d.enabled,stacks:d.availableAmount(),timeRemaining:c.toFixed(3),className:d.availableAmountIncludingDisabled()>0?"":"hidden"}})}makeToggleableTimer(t,a=!0){const o=this.state.resources.timeTillReady(t),s=this.state.resources.get(t);return{rscType:t,onSelf:a,enabled:s.enabled,stacks:s.availableAmount(),timeRemaining:o.toFixed(3),className:s.availableAmountIncludingDisabled()>0?"":"hidden"}}makeCommonTimerless(t,a=!0){return{rscType:t,onSelf:a,enabled:!0,stacks:this.state.resources.get(t).availableAmount(),className:this.state.hasResourceAvailable(t)?"":"hidden"}}makeToggleableTimerless(t,a=!0){const o=this.state.resources.get(t);return{rscType:t,onSelf:a,enabled:o.enabled,stacks:o.availableAmount(),className:o.availableAmountIncludingDisabled()>0?"":"hidden"}}jobSpecificOtherTargetedBuffViewProps(){return[]}getAllOtherTargetedBuffViewProps(){const t=this.state.job,a=[];return dt[t].role==="TANK"&&a.push(this.makeCommonTimer("REPRISAL",!1)),dt[t].role==="MELEE"&&a.push(this.makeCommonTimer("FEINT",!1)),dt[t].role==="CASTER"&&a.push(this.makeCommonTimer("ADDLE",!1)),[...this.jobSpecificOtherTargetedBuffViewProps(),...a]}jobSpecificSelfTargetedBuffViewProps(){return[]}getAllSelfTargetedBuffViewProps(){const t=this.state.job,a=this.state.resources,o=[];if(dt[t].role==="TANK"){o.push(...["RAMPART","SHIELD_WALL","STRONGHOLD"].map(c=>this.makeCommonTimer(c)));const s=dt[t].limitBreakBuff??"UNKNOWN";s&&o.push(this.makeCommonTimer(s))}return dt[t].role==="MELEE"&&o.push(...["TRUE_NORTH","BLOODBATH"].map(s=>this.makeCommonTimer(s))),["TANK","MELEE","RANGED"].includes(dt[t].role)&&o.push(this.makeCommonTimer("ARMS_LENGTH")),["HEALER","CASTER"].includes(dt[t].role)&&o.push(...["SWIFTCAST","LUCID_DREAMING","SURECAST"].map(s=>this.makeCommonTimer(s))),o.push(this.makeCommonTimer("TINCTURE"),this.makeCommonTimer("SPRINT")),dt[t].role==="MELEE"&&o.push(...["REAR_POSITIONAL","FLANK_POSITIONAL"].map(s=>({rscType:s,onSelf:!0,enabled:a.get(s).enabled,stacks:1,className:""}))),(dt[t].role==="TANK"||dt[t].role==="MELEE")&&o.push(...["AUTOS_ENGAGED"].map(s=>({rscType:s,onSelf:!0,enabled:a.get(s).available(1),stacks:1,className:""}))),[...this.jobSpecificSelfTargetedBuffViewProps(),...o]}jobSpecificResourceViewProps(t){return[]}getAllResourceViewProps(t){if(!dt[this.state.job].usesMp)return this.jobSpecificResourceViewProps(t);const a=this.state.resources,o=a.timeTillReady("MANA"),s=a.get("MANA").availableAmount();return[{kind:"bar",name:"MP",color:t.resources.mana,progress:s/1e4,valueString:Math.floor(s)+"/10000"},{kind:"bar",name:N({en:"MP tick",zh:"",ja:"MP"}),color:t.resources.manaTick,progress:1-o/3,valueString:(3-o).toFixed(3)+"/3"},...this.jobSpecificResourceViewProps(t)]}statusLayoutFn(t){return l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:{display:"inline-block",verticalAlign:"top",width:"50%",height:"100%"},children:[l.jsxs("span",{style:{display:"block",marginBottom:10},children:[N({en:"time: ",zh:"",ja:""}),`${Xe.displayTime(t.time,3)} (${t.time.toFixed(3)})`]}),t.resources?l.jsx(c0,{data:{level:t.level,resources:t.resources}}):void 0]}),l.jsxs("div",{style:{position:"relative",display:"inline-block",float:"right",width:"50%"},children:[t.resourceLocks?l.jsx(r0,{data:t.resourceLocks}):void 0,l.jsx(Jh,{data:t.enemyBuffs,style:{marginBottom:"3em"}}),l.jsx(Jh,{data:t.selfBuffs})]})]})}}var Sh={exports:{}},bw=Sh.exports,eN;function Ow(){return eN||(eN=1,function(e){(function(t,a,o){function s(h){var m=this,R=f();m.next=function(){var T=2091639*m.s0+m.c*23283064365386963e-26;return m.s0=m.s1,m.s1=m.s2,m.s2=T-(m.c=T|0)},m.c=1,m.s0=R(" "),m.s1=R(" "),m.s2=R(" "),m.s0-=R(h),m.s0<0&&(m.s0+=1),m.s1-=R(h),m.s1<0&&(m.s1+=1),m.s2-=R(h),m.s2<0&&(m.s2+=1),R=null}function c(h,m){return m.c=h.c,m.s0=h.s0,m.s1=h.s1,m.s2=h.s2,m}function d(h,m){var R=new s(h),T=m&&m.state,S=R.next;return S.int32=function(){return R.next()*4294967296|0},S.double=function(){return S()+(S()*2097152|0)*11102230246251565e-32},S.quick=S,T&&(typeof T=="object"&&c(T,R),S.state=function(){return c(R,{})}),S}function f(){var h=4022871197,m=function(R){R=String(R);for(var T=0;T<R.length;T++){h+=R.charCodeAt(T);var S=.02519603282416938*h;h=S>>>0,S-=h,S*=h,h=S>>>0,S-=h,h+=S*4294967296}return(h>>>0)*23283064365386963e-26};return m}a&&a.exports?a.exports=d:this.alea=d})(bw,e)}(Sh)),Sh.exports}var gh={exports:{}},Dw=gh.exports,tN;function yw(){return tN||(tN=1,function(e){(function(t,a,o){function s(f){var h=this,m="";h.x=0,h.y=0,h.z=0,h.w=0,h.next=function(){var T=h.x^h.x<<11;return h.x=h.y,h.y=h.z,h.z=h.w,h.w^=h.w>>>19^T^T>>>8},f===(f|0)?h.x=f:m+=f;for(var R=0;R<m.length+64;R++)h.x^=m.charCodeAt(R)|0,h.next()}function c(f,h){return h.x=f.x,h.y=f.y,h.z=f.z,h.w=f.w,h}function d(f,h){var m=new s(f),R=h&&h.state,T=function(){return(m.next()>>>0)/4294967296};return T.double=function(){do var S=m.next()>>>11,g=(m.next()>>>0)/4294967296,_=(S+g)/(1<<21);while(_===0);return _},T.int32=m.next,T.quick=T,R&&(typeof R=="object"&&c(R,m),T.state=function(){return c(m,{})}),T}a&&a.exports?a.exports=d:this.xor128=d})(Dw,e)}(gh)),gh.exports}var Ih={exports:{}},vw=Ih.exports,nN;function Mw(){return nN||(nN=1,function(e){(function(t,a,o){function s(f){var h=this,m="";h.next=function(){var T=h.x^h.x>>>2;return h.x=h.y,h.y=h.z,h.z=h.w,h.w=h.v,(h.d=h.d+362437|0)+(h.v=h.v^h.v<<4^(T^T<<1))|0},h.x=0,h.y=0,h.z=0,h.w=0,h.v=0,f===(f|0)?h.x=f:m+=f;for(var R=0;R<m.length+64;R++)h.x^=m.charCodeAt(R)|0,R==m.length&&(h.d=h.x<<10^h.x>>>4),h.next()}function c(f,h){return h.x=f.x,h.y=f.y,h.z=f.z,h.w=f.w,h.v=f.v,h.d=f.d,h}function d(f,h){var m=new s(f),R=h&&h.state,T=function(){return(m.next()>>>0)/4294967296};return T.double=function(){do var S=m.next()>>>11,g=(m.next()>>>0)/4294967296,_=(S+g)/(1<<21);while(_===0);return _},T.int32=m.next,T.quick=T,R&&(typeof R=="object"&&c(R,m),T.state=function(){return c(m,{})}),T}a&&a.exports?a.exports=d:this.xorwow=d})(vw,e)}(Ih)),Ih.exports}var _h={exports:{}},Lw=_h.exports,aN;function xw(){return aN||(aN=1,function(e){(function(t,a,o){function s(f){var h=this;h.next=function(){var R=h.x,T=h.i,S,g;return S=R[T],S^=S>>>7,g=S^S<<24,S=R[T+1&7],g^=S^S>>>10,S=R[T+3&7],g^=S^S>>>3,S=R[T+4&7],g^=S^S<<7,S=R[T+7&7],S=S^S<<13,g^=S^S<<9,R[T]=g,h.i=T+1&7,g};function m(R,T){var S,g=[];if(T===(T|0))g[0]=T;else for(T=""+T,S=0;S<T.length;++S)g[S&7]=g[S&7]<<15^T.charCodeAt(S)+g[S+1&7]<<13;for(;g.length<8;)g.push(0);for(S=0;S<8&&g[S]===0;++S);for(S==8?g[7]=-1:g[S],R.x=g,R.i=0,S=256;S>0;--S)R.next()}m(h,f)}function c(f,h){return h.x=f.x.slice(),h.i=f.i,h}function d(f,h){f==null&&(f=+new Date);var m=new s(f),R=h&&h.state,T=function(){return(m.next()>>>0)/4294967296};return T.double=function(){do var S=m.next()>>>11,g=(m.next()>>>0)/4294967296,_=(S+g)/(1<<21);while(_===0);return _},T.int32=m.next,T.quick=T,R&&(R.x&&c(R,m),T.state=function(){return c(m,{})}),T}a&&a.exports?a.exports=d:this.xorshift7=d})(Lw,e)}(_h)),_h.exports}var ph={exports:{}},Hw=ph.exports,iN;function kw(){return iN||(iN=1,function(e){(function(t,a,o){function s(f){var h=this;h.next=function(){var R=h.w,T=h.X,S=h.i,g,_;return h.w=R=R+1640531527|0,_=T[S+34&127],g=T[S=S+1&127],_^=_<<13,g^=g<<17,_^=_>>>15,g^=g>>>12,_=T[S]=_^g,h.i=S,_+(R^R>>>16)|0};function m(R,T){var S,g,_,p,O,y=[],L=128;for(T===(T|0)?(g=T,T=null):(T=T+"\0",g=0,L=Math.max(L,T.length)),_=0,p=-32;p<L;++p)T&&(g^=T.charCodeAt((p+32)%T.length)),p===0&&(O=g),g^=g<<10,g^=g>>>15,g^=g<<4,g^=g>>>13,p>=0&&(O=O+1640531527|0,S=y[p&127]^=g+O,_=S==0?_+1:0);for(_>=128&&(y[(T&&T.length||0)&127]=-1),_=127,p=4*128;p>0;--p)g=y[_+34&127],S=y[_=_+1&127],g^=g<<13,S^=S<<17,g^=g>>>15,S^=S>>>12,y[_]=g^S;R.w=O,R.X=y,R.i=_}m(h,f)}function c(f,h){return h.i=f.i,h.w=f.w,h.X=f.X.slice(),h}function d(f,h){f==null&&(f=+new Date);var m=new s(f),R=h&&h.state,T=function(){return(m.next()>>>0)/4294967296};return T.double=function(){do var S=m.next()>>>11,g=(m.next()>>>0)/4294967296,_=(S+g)/(1<<21);while(_===0);return _},T.int32=m.next,T.quick=T,R&&(R.X&&c(R,m),T.state=function(){return c(m,{})}),T}a&&a.exports?a.exports=d:this.xor4096=d})(Hw,e)}(ph)),ph.exports}var Nh={exports:{}},Uw=Nh.exports,oN;function Pw(){return oN||(oN=1,function(e){(function(t,a,o){function s(f){var h=this,m="";h.next=function(){var T=h.b,S=h.c,g=h.d,_=h.a;return T=T<<25^T>>>7^S,S=S-g|0,g=g<<24^g>>>8^_,_=_-T|0,h.b=T=T<<20^T>>>12^S,h.c=S=S-g|0,h.d=g<<16^S>>>16^_,h.a=_-T|0},h.a=0,h.b=0,h.c=-1640531527,h.d=1367130551,f===Math.floor(f)?(h.a=f/4294967296|0,h.b=f|0):m+=f;for(var R=0;R<m.length+20;R++)h.b^=m.charCodeAt(R)|0,h.next()}function c(f,h){return h.a=f.a,h.b=f.b,h.c=f.c,h.d=f.d,h}function d(f,h){var m=new s(f),R=h&&h.state,T=function(){return(m.next()>>>0)/4294967296};return T.double=function(){do var S=m.next()>>>11,g=(m.next()>>>0)/4294967296,_=(S+g)/(1<<21);while(_===0);return _},T.int32=m.next,T.quick=T,R&&(typeof R=="object"&&c(R,m),T.state=function(){return c(m,{})}),T}a&&a.exports?a.exports=d:this.tychei=d})(Uw,e)}(Nh)),Nh.exports}var Ch={exports:{}};const ww={},Gw=Object.freeze(Object.defineProperty({__proto__:null,default:ww},Symbol.toStringTag,{value:"Module"})),Bw=yM(Gw);var Fw=Ch.exports,lN;function jw(){return lN||(lN=1,function(e){(function(t,a,o){var s=256,c=6,d=52,f="random",h=o.pow(s,c),m=o.pow(2,d),R=m*2,T=s-1,S;function g(D,k,G){var B=[];k=k==!0?{entropy:!0}:k||{};var K=y(O(k.entropy?[D,P(a)]:D??L(),3),B),V=new _(B),ae=function(){for(var oe=V.g(c),j=h,$=0;oe<m;)oe=(oe+$)*s,j*=s,$=V.g(1);for(;oe>=R;)oe/=2,j/=2,$>>>=1;return(oe+$)/j};return ae.int32=function(){return V.g(4)|0},ae.quick=function(){return V.g(4)/4294967296},ae.double=ae,y(P(V.S),a),(k.pass||G||function(oe,j,$,X){return X&&(X.S&&p(X,V),oe.state=function(){return p(V,{})}),$?(o[f]=oe,j):oe})(ae,K,"global"in k?k.global:this==o,k.state)}function _(D){var k,G=D.length,B=this,K=0,V=B.i=B.j=0,ae=B.S=[];for(G||(D=[G++]);K<s;)ae[K]=K++;for(K=0;K<s;K++)ae[K]=ae[V=T&V+D[K%G]+(k=ae[K])],ae[V]=k;(B.g=function(oe){for(var j,$=0,X=B.i,ce=B.j,w=B.S;oe--;)j=w[X=T&X+1],$=$*s+w[T&(w[X]=w[ce=T&ce+j])+(w[ce]=j)];return B.i=X,B.j=ce,$})(s)}function p(D,k){return k.i=D.i,k.j=D.j,k.S=D.S.slice(),k}function O(D,k){var G=[],B=typeof D,K;if(k&&B=="object")for(K in D)try{G.push(O(D[K],k-1))}catch{}return G.length?G:B=="string"?D:D+"\0"}function y(D,k){for(var G=D+"",B,K=0;K<G.length;)k[T&K]=T&(B^=k[T&K]*19)+G.charCodeAt(K++);return P(k)}function L(){try{var D;return S&&(D=S.randomBytes)?D=D(s):(D=new Uint8Array(s),(t.crypto||t.msCrypto).getRandomValues(D)),P(D)}catch{var k=t.navigator,G=k&&k.plugins;return[+new Date,t,G,t.screen,P(a)]}}function P(D){return String.fromCharCode.apply(0,D)}if(y(o.random(),a),e.exports){e.exports=g;try{S=Bw}catch{}}else o["seed"+f]=g})(typeof self<"u"?self:Fw,[],Math)}(Ch)),Ch.exports}var BA,sN;function zw(){if(sN)return BA;sN=1;var e=Ow(),t=yw(),a=Mw(),o=xw(),s=kw(),c=Pw(),d=jw();return d.alea=e,d.xor128=t,d.xorwow=a,d.xorshift7=o,d.xor4096=s,d.tychei=c,BA=d,BA}var Yw=zw();const rN=jN(Yw);class qt{config;rng;nonProcRng;lucidTickOffset;dotTickOffset;hotTickOffset;time;resources;debuffs;cooldowns;eventsQueue;skillsList;displayedSkills;autoAttackDelay;overTimeEffectGroups=[];dotResources=[];hotResources=[];excludedDoTs=[];excludedHoTs=[];fullTimeDoTs=[];#e=[];#t=[];dotSkills=[];hotSkills=[];#n=new Map;#a=new Map;constructor(t){this.config=t,this.rng=rN(t.randomSeed),this.nonProcRng=rN(t.randomSeed+"_nonProcs"),this.lucidTickOffset=this.nonProcRng()*3,this.dotTickOffset=this.nonProcRng()*3,this.hotTickOffset=this.nonProcRng()*3,this.time=0,this.resources=new sH(this),this.debuffs=new rH(this),this.cooldowns=new lH(this),Qi(this.job).forEach((o,s)=>{o.isCoolDown?this.cooldowns.set(new Ue(s,o.cdPerStack,o.maxStacks,o.maxStacks)):Ge[s].specialDebuff?this.debuffs.initialize(s):this.resources.set(new pn(s,o.maxValue,o.defaultValue,o.warnOnOvercap))});let a=2.5;switch(dt[this.job].role){case"TANK":case"MELEE":case"RANGED":a=t.adjustedSksGCD();break;case"HEALER":case"CASTER":a=t.adjustedGCD();break}this.cooldowns.set(new Ue("cd_GCD",t.getAfterTaxGCD(a),1,1)),this.resources.set(new pn("MOVEMENT",1,1)),this.resources.set(new pn("NOT_ANIMATION_LOCKED",1,1)),this.resources.set(new pn("NOT_CASTER_TAXED",1,1)),this.resources.set(new pn("IN_COMBAT",1,0)),this.cooldowns.set(new Ue("NEVER",0,0,0)),this.eventsQueue=[],this.skillsList=new hH(this),this.displayedSkills=new fH(this.job,t.level),this.autoAttackDelay=2.5}get statusPropsGenerator(){return new Xt(this)}get job(){return this.config.job}get partySize(){return this.resources.get("PARTY_SIZE").availableAmount()}registerRecurringEvents(t=[],a=[]){const o=this;{const f=()=>{const h=this.resources.get("MANA"),m=this.captureManaRegenAmount();h.gain(m);const R=h.availableAmount();I.reportManaTick(o.time,"+"+m+" (MP="+R+")"),this.resources.addResourceEvent({rscType:"MANA",name:"mana tick",delay:3,fnOnRsc:T=>{f()},tags:[ca.MpTick,ca.ManaGain]})};this.resources.addResourceEvent({rscType:"MANA",name:"initial mana tick",delay:this.config.timeTillFirstManaTick,fnOnRsc:f,tags:[ca.MpTick,ca.ManaGain]})}const s=()=>{const f=this.resources.get("LUCID_DREAMING");if(f.available(1)&&(f.tickCount++,!(this.job==="BLM"&&this.hasResourceAvailable("ASTRAL_FIRE")))){const m=this.resources.get("MANA");m.gain(550);let R="+550";if(console.assert(f.node!==void 0),f.node){let T="??";f.node.tmp_startLockTime&&(T=(f.node.tmp_startLockTime-this.config.countdown).toFixed(3)),R+=" {skill}@"+T,R+=" ("+f.tickCount+"/7)"}R+=" (MP="+m.availableAmount()+")",I.reportLucidTick(this.time,R)}const h=new Oe("lucid tick",3,()=>{s()});h.addTag(ca.LucidTick),f.available(1)&&f.pendingChange&&f.pendingChange.timeTillEvent>=3&&h.addTag(ca.ManaGain),this.addEvent(h)};if([...Ri,...Ti].includes(this.job)){let f=this.config.timeTillFirstManaTick+this.lucidTickOffset;for(;f>3;)f-=3;const h=new Oe("initial lucid tick",f,s);h.addTag(ca.LucidTick),this.addEvent(h)}const c=()=>{this.dotResources.filter(f=>!this.excludedDoTs.includes(f)).forEach(f=>this.handleDoTTick(f)),this.getDisplayTime()>=0&&I.reportDotTick(this.time),this.addEvent(new Oe("DoT tick",3,()=>{c()}))},d=()=>{this.hotResources.filter(f=>!this.excludedHoTs.includes(f)).forEach(f=>this.handleHoTTick(f)),this.getDisplayTime()>=0&&I.reportHotTick(this.time),this.addEvent(new Oe("HoT tick",3,()=>{d()}))};if(t.forEach(f=>{f.groupedEffects.forEach(h=>{let m=this.dotResources,R=this.#e,T=this.#n,S=this.excludedDoTs;f.isHealing&&(m=this.hotResources,R=this.#t,T=this.#a,S=this.excludedHoTs),m.includes(h.effectName)?console.assert(!1,`${h.effectName} was registered as an over time effect multiple times for ${this.job}`):(!h.isGroundTargeted&&!f.isHealing&&this.debuffs.initialize(h.effectName),m.push(h.effectName),h.appliedBy.forEach(g=>{!f.isHealing&&!this.dotSkills.includes(g)&&this.dotSkills.push(g),f.isHealing&&!this.hotSkills.includes(g)&&this.hotSkills.push(g)}),T.set(h.effectName,f.groupedEffects.filter(g=>g!==h).map(g=>g.effectName)),h.isGroundTargeted&&!R.includes(h.effectName)&&R.push(h.effectName),h.exclude&&!S.includes(h.effectName)&&S.push(h.effectName),!f.isHealing&&f.reportName&&!this.fullTimeDoTs.includes(h.effectName)&&this.fullTimeDoTs.push(h.effectName))})}),a.forEach(f=>this.dotSkills.push(f)),this.overTimeEffectGroups=t,this.dotResources.filter(f=>!this.excludedDoTs.includes(f)).length>0){let f=this.config.timeTillFirstManaTick+this.dotTickOffset;for(;f>3;)f-=3;this.addEvent(new Oe("initial DoT tick",f,c))}if(this.hotResources.filter(f=>!this.excludedHoTs.includes(f)).length>0){let f=this.config.timeTillFirstManaTick+this.hotTickOffset;for(;f>3;)f-=3;this.addEvent(new Oe("initial HoT tick",f,d))}this.jobSpecificRegisterRecurringEvents()}onResolveOverTimeTick(t,a){a==="damage"?this.jobSpecificOnResolveDotTick(t):this.jobSpecificOnResolveHotTick(t)}inherentSpeedModifier(){}jobSpecificRegisterRecurringEvents(){}jobSpecificOnResolveDotTick(t){}jobSpecificOnResolveHotTick(t){}jobSpecificAddDamageBuffCovers(t,a){}jobSpecificAddSpeedBuffCovers(t,a){}jobSpecificAddHealingBuffCovers(t,a){}maybeCancelChanneledSkills(t){const a=this.skillsList.get(t);a&&(a.animationLockFn(this)<=ma||this.cancelChanneledSkills())}cancelChanneledSkills(){}jobSpecificOnAutoAttack(){}onAutoAttack(){this.jobSpecificOnAutoAttack()}getStatusDuration(t){return Ut(this.job,t).maxTimeout}gainDebuff(t,a){a.forEach(o=>{const s=this.debuffs.get(t,o),c=Ut(this.job,t);s.availableAmountIncludingDisabled()>0?s.overrideTimer(this,c.maxTimeout):(s.gain(1),this.debuffs.addDebuffEvent({rscType:t,targetNumber:o,name:`drop ${t} on target ${o}`,delay:c.maxTimeout,fnOnRsc:d=>d.consume(1)}))})}gainStatus(t,a=1){const o=this.resources.get(t),s=Ut(this.job,t);this.hasResourceAvailable(t)?(s.warnOnOvercap&&a>=o.availableAmount()&&I.reportWarning({kind:"overcap",rsc:t}),s.maxTimeout>0&&o.overrideTimer(this,s.maxTimeout),o.availableAmount()!==a&&o.overrideCurrentValue(a)):(o.gain(a),s.maxTimeout>0&&this.enqueueResourceDrop(t))}maybeGainProc(t,a=.5,o=!1){this.triggersEffect(a,o)&&this.gainStatus(t)}triggersEffect(t,a=!1){if(this.config.procMode===ua.Never)return!1;const o=a?this.rng():void 0;return this.config.procMode===ua.Always?!0:(o??this.rng())<t}handleDoTTick(t){this.handleOverTimeTick(t,"damage")}handleHoTTick(t){this.handleOverTimeTick(t,"healing")}handleOverTimeTick(t,a){if(this.debuffs.hasAny(t)){for(let o=1;o<=bi;o++){const s=this.debuffs.get(t,o);s.availableAmountIncludingDisabled()>0&&s.node&&!s.enabled&&s.node.getOverTimePotencies(t,a)[s.tickCount].tryRemoveTarget(o)}for(let o=1;o<=bi;o++){const s=this.debuffs.get(t,o);if(s.availableAmountIncludingDisabled()>0){if(s.node&&s.enabled){const c=s.node.getOverTimePotencies(t,a)[s.tickCount];c.hasResolved()||I.resolveOverTimePotency(c,a),this.onResolveOverTimeTick(t,a)}s.tickCount++}else s.node&&(s.node.removeUnresolvedOvertimePotencies(a,o),s.node=void 0)}}else{const o=this.resources.get(t);if(o.availableAmountIncludingDisabled()>0){if(o.node&&o.enabled){const s=o.node.getOverTimePotencies(t,a)[o.tickCount];I.resolveOverTimePotency(s,a),this.onResolveOverTimeTick(t,a)}o.tickCount++}else o.node&&(o.node.removeUnresolvedOvertimePotencies(a),o.node=void 0)}}tick(t,a=()=>!1){let o=0;for(;o<t&&this.eventsQueue.length>0&&!a();){this.eventsQueue.sort((f,h)=>f.timeTillEvent-h.timeTillEvent);const s=Math.min(t-o,this.eventsQueue[0].timeTillEvent);o=Math.min(o+s,t),this.time+=s,this.cooldowns.tick(s);const c=[];for(let f=0;f<this.eventsQueue.length;f++)c.push(this.eventsQueue[f]);c.forEach(f=>{f.timeTillEvent-=s});let d=0;c.forEach(f=>{f.timeTillEvent<=Tn.epsilon&&(f.canceled||f.effectFn(),d++)}),this.eventsQueue.splice(0,d)}return o}addEvent(t){this.eventsQueue.push(t)}getDisplayTime(){return this.time-this.config.countdown}captureManaRegenAmount(){return this.isInCombat()?this.job in aT?ut.mpTick(this.config.level,this.config.piety):200:600}requestToggleBuff(t,a){if(this.debuffs.hasAny(t)){const s=this.debuffs.get(t,a??1);return s.available(1)?s.enabled=!1:s.enabled=!0,!0}if(t==="AUTOS_ENGAGED")return this.toggleAutosEngaged(),!0;const o=this.resources.get(t);if(Ge[t].mayBeToggled)return o.available(1)?(o.enabled=!1,!0):(o.enabled=!0,!0);if(Ge[t].mayNotBeCanceled)return!1;if(t==="MEDITATE"){const s=this.findNextQueuedEventByTag(ca.MeditateTick);s&&(s.canceled=!0)}return t==="KARDIA"&&this.tryConsumeResource("KARDION"),(t==="TEN_CHI_JIN"||t==="MUDRA")&&(this.tryConsumeResource("MUDRA"),this.tryConsumeResource("KASSATSU"),this.resources.get("MUDRA_TRACKER").overrideCurrentValue(0),this.resources.get("BUNNY").overrideCurrentValue(0)),o.consume(o.availableAmount()),o.removeTimer(),!0}addRecurringAutoAttackEvent(t,a){const o=(s,c)=>{const d=new Oe("aa tick",s,()=>{this.resources.get("AUTOS_ENGAGED").available(1)&&this.isInCombat()&&this.onAutoAttack(),this.addEvent(o(c,c))});return d.addTag(ca.AutoTick),d};this.addEvent(o(t,a))}findAutoAttackTimerInQueue(){let t=-1;return this.eventsQueue.forEach(a=>{a.name==="aa tick"&&(t=a.timeTillEvent)}),t}startAutoAttackTimer(t,a,o){if(this.findAutoAttackTimerInQueue()!==-1)this.removeAutoAttackTimer();else if(this.resources.get("STORED_AUTO").available(1)){const f=new Oe("stored auto",o||0,()=>{this.onAutoAttack()});this.addEvent(f)}this.tryConsumeResource("STORED_AUTO"),this.resources.get("AUTOS_ENGAGED").availableAmount()===0&&this.resources.get("AUTOS_ENGAGED").gain(1);const c=a||3;let d=0;t===-1?d=c:d=t??c,this.addRecurringAutoAttackEvent(d,c)}removeAutoAttackTimer(){let t=0;this.eventsQueue.forEach(a=>{a.name==="aa tick"&&this.eventsQueue.splice(t,1),t++})}toggleAutosEngaged(){const t=this.findAutoAttackTimerInQueue();if(this.resources.get("AUTOS_ENGAGED").availableAmount()===0)this.startAutoAttackTimer(t===-1?3:t);else if(this.resources.get("AUTOS_ENGAGED").consume(1),t!==-1){this.removeAutoAttackTimer();const a=new Oe("aa tick",t,()=>{this.resources.get("STORED_AUTO").available(0)&&this.resources.get("STORED_AUTO").gain(1)});this.addEvent(a)}}refreshAutoBasedOnSkill(t,a,o){const s=a!==0,c=this.resources.get("AUTOS_ENGAGED").available(1),d=this.autoAttackDelay,f=this.findAutoAttackTimerInQueue(),h=t.startsAuto;if(o){if(this.isInCombat()){if(s&&c){const m=a+(f===-1?d:f);this.startAutoAttackTimer(m,d,a)}else if(!s&&!c)h&&this.startAutoAttackTimer(f,d);else if(s&&!c){if(h){const m=a+(f===-1?d:f);this.startAutoAttackTimer(m,d,a)}else if(f>0){this.removeAutoAttackTimer();const m=new Oe("aa tick",f+a,()=>{this.resources.get("STORED_AUTO").available(0)&&this.resources.get("STORED_AUTO").gain(1)});this.addEvent(m)}}}else if(h){const m=a+(f===-1?d:f);this.startAutoAttackTimer(m,d,a)}}else if(this.isInCombat()){if(s&&c){const m=this.findAutoAttackTimerInQueue(),R=a+(m===-1?d:m);this.startAutoAttackTimer(R)}else if(s&&!c&&f>0){this.removeAutoAttackTimer();const m=new Oe("aa tick",f+a,()=>{this.resources.get("STORED_AUTO").available(0)&&this.resources.get("STORED_AUTO").gain(1)});this.addEvent(m)}}}useSpellOrWeaponskill(t,a,o){const s=this.cooldowns.get(t.cdName),d=!(this.job==="NIN"&&(this.hasResourceAvailable("MUDRA")||this.hasResourceAvailable("KASSATSU"))&&["TEN","CHI","JIN"].includes(t.name))&&t.secondaryCd?this.cooldowns.get(t.secondaryCd.cdName):void 0,f=t.castTimeFn(this),h=t.recastTimeFn(this);this.jobSpecificAddSpeedBuffCovers(a,t);const m=t.potencyFn(this);let R=a.getInitialPotency();const T=this.dotSkills.includes(t.name);!R&&(m>0||t.drawsAggro&&!this.isInCombat()||T)?(this.refreshAutoBasedOnSkill(t,f,!0),R=new tn({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t.name,aspect:t.aspect,basePotency:m,snapshotTime:void 0,description:"",targetList:a.targetList,falloff:t.falloff}),a.addPotency(R)):this.refreshAutoBasedOnSkill(t,f,!1);const S=t.healingPotencyFn(this);let g=a.getInitialHealingPotency();!g&&S>0&&(g=new tn({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t.name,aspect:t.aspect,basePotency:S,snapshotTime:void 0,description:"",healTargetCount:a.healTargetCount,falloff:0}),a.addHealingPotency(g));const _=()=>{const O=t.manaCostFn(this);O>this.resources.get("MANA").availableAmount()?I.reportInterruption({failNode:a,failIndex:o}):O>0&&this.resources.get("MANA").consume(O);const y=m>0||T;R&&(R.snapshotTime=this.getDisplayTime(),y&&(this.hasResourceAvailable("TINCTURE")&&R.addModifiers(J.Tincture),R.addModifiers(...t.jobPotencyModifiers(this)),R.addTargetSpecificModifiers(t.jobTargetPotencyModifiers(this,a)))),y&&(this.hasResourceAvailable("TINCTURE")&&!a.hasBuff(H.Tincture)&&a.addBuff(H.Tincture),this.jobSpecificAddDamageBuffCovers(a,t));const L=S>0;if(g&&(g.snapshotTime=this.getDisplayTime(),this.hasResourceAvailable("TINCTURE")&&g.addModifiers(J.Tincture),g.addModifiers(...t.jobHealingPotencyModifiers(this))),L&&(this.hasResourceAvailable("TINCTURE")&&!a.hasBuff(H.Tincture)&&a.addBuff(H.Tincture),this.jobSpecificAddHealingBuffCovers(a,t)),t.onConfirm(this,a),this.addEvent(new Oe(t.name+" applied",t.applicationDelay,()=>{R&&(I.resolvePotency(R),this.hasResourceAvailable("IN_COMBAT")||this.resources.get("IN_COMBAT").gain(1)),g&&I.resolveHealingPotency(g),t.onApplication(this,a)})),R&&!this.hasResourceAvailable("IN_COMBAT")){const P=this.resources.timeTillReady("IN_COMBAT");(P===0||P>t.applicationDelay)&&this.resources.addResourceEvent({rscType:"IN_COMBAT",name:"begin combat if necessary",delay:t.applicationDelay,fnOnRsc:D=>{D.gain(1)}})}};if(f===0||t.isInstantFn(this))this.resources.takeResourceLock("NOT_ANIMATION_LOCKED",t.animationLockFn(this)),_();else{this.resources.takeResourceLock("MOVEMENT",f-ci.getSlidecastWindow(f)),this.resources.takeResourceLock("NOT_CASTER_TAXED",this.config.getAfterTaxCastTime(f));const O=f-ci.getSlidecastWindow(f);this.addEvent(new Oe(t.name+" captured",O,()=>{t.validateAttempt(this)?_():I.reportInterruption({failNode:a,failIndex:o})}))}s.useStackWithRecast(this.config.getAfterTaxGCD(h)),d?.useStack()}useAbility(t,a){console.assert(a);const o=this.cooldowns.get(t.cdName),s=t.secondaryCd?this.cooldowns.get(t.secondaryCd.cdName):void 0,c=t.potencyFn(this);let d;const f=this.dotSkills.includes(t.name);(c>0||t.drawsAggro||f)&&(d=new tn({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t.name,aspect:t.aspect,basePotency:c,snapshotTime:this.getDisplayTime(),description:"",targetList:a.targetList,falloff:t.falloff})),d&&(c>0||f)&&(this.hasResourceAvailable("TINCTURE")&&d.addModifiers(J.Tincture),d.addModifiers(...t.jobPotencyModifiers(this)),d.addTargetSpecificModifiers(t.jobTargetPotencyModifiers(this,a)),a.addPotency(d));const h=this.resources.get("AUTOS_ENGAGED").available(1),m=this.autoAttackDelay,R=this.findAutoAttackTimerInQueue(),T=t.startsAuto||d&&c>0;if(T)if(this.isInCombat())h||T&&this.startAutoAttackTimer(R,m);else{const p=R===-1?m:R;this.startAutoAttackTimer(p,m,void 0)}const S=t.healingPotencyFn(this);let g;S>0&&(g=new tn({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t.name,aspect:t.aspect,basePotency:S,snapshotTime:this.getDisplayTime(),description:"",healTargetCount:a.healTargetCount,falloff:0}),this.hasResourceAvailable("TINCTURE")&&g.addModifiers(J.Tincture),g.addModifiers(...t.jobHealingPotencyModifiers(this)),a.addHealingPotency(g)),(c>0||f)&&!a.hasBuff(H.Tincture)&&(this.hasResourceAvailable("TINCTURE")&&a.addBuff(H.Tincture),this.jobSpecificAddDamageBuffCovers(a,t)),S>0&&(this.hasResourceAvailable("TINCTURE")&&!a.hasBuff(H.Tincture)&&a.addBuff(H.Tincture),this.jobSpecificAddHealingBuffCovers(a,t));const _=t.manaCostFn(this);if(_>0&&this.resources.get("MANA").consume(_),t.onConfirm(this,a),d&&!this.hasResourceAvailable("IN_COMBAT")){const p=this.resources.timeTillReady("IN_COMBAT");(p===0||p>t.applicationDelay)&&this.resources.addResourceEvent({rscType:"IN_COMBAT",name:"begin combat if necessary",delay:t.applicationDelay,fnOnRsc:O=>{O.gain(1)}})}t.applicationDelay>0?this.addEvent(new Oe(t.name+" applied",t.applicationDelay,()=>{d&&I.resolvePotency(d),g&&I.resolveHealingPotency(g),t.onApplication(this,a)})):(d&&I.resolvePotency(d),g&&I.resolveHealingPotency(g),t.onApplication(this,a)),o.useStack(),s?.useStack(),this.resources.takeResourceLock("NOT_ANIMATION_LOCKED",t.animationLockFn(this))}useLimitBreak(t,a,o){const s=this.cooldowns.get(t.cdName),c=t.castTimeFn(this),d=c>0?ci.getSlidecastWindow(c):0,f=t.potencyFn(this);let h;f>0&&(h=new tn({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t.name,aspect:t.aspect,basePotency:f,snapshotTime:void 0,description:"",targetList:a.targetList,falloff:t.falloff}),a.addPotency(h));const m=t.healingPotencyFn(this);let R;m>0&&(R=new tn({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t.name,aspect:t.aspect,basePotency:m,snapshotTime:void 0,description:"",healTargetCount:a.healTargetCount,falloff:0}),a.addHealingPotency(R));const T=()=>{t.onConfirm(this,a),h&&(h.snapshotTime=this.getDisplayTime()),R&&(R.snapshotTime=this.getDisplayTime()),this.addEvent(new Oe(t.name+" applied",t.applicationDelay,()=>{h&&I.resolvePotency(h),R&&I.resolveHealingPotency(R),t.onApplication(this,a)})),this.resources.takeResourceLock("NOT_ANIMATION_LOCKED",d+t.animationLockFn(this))};if(c===0)T();else{this.resources.takeResourceLock("MOVEMENT",c-d),this.resources.takeResourceLock("NOT_CASTER_TAXED",this.config.getAfterTaxCastTime(c));const g=c-d;this.addEvent(new Oe(t.name+" captured",g,()=>{t.validateAttempt(this)?T():I.reportInterruption({failNode:a,failIndex:o})}))}s.useStack()}#i(t){const a=this.skillsList.get(t),s=this.job==="NIN"&&(this.hasResourceAvailable("MUDRA")||this.hasResourceAvailable("KASSATSU"))&&["TEN","CHI","JIN"].includes(a.name)?void 0:a.secondaryCd?.cdName;let c=this.cooldowns.timeTillAnyStackAvailable(a.cdName);return s&&(c=Math.max(c,this.cooldowns.timeTillAnyStackAvailable(s))),Math.max(this.timeTillAnySkillAvailable(),c)}timeTillAnySkillAvailable(){const t=this.resources.timeTillReady("NOT_ANIMATION_LOCKED"),a=this.resources.timeTillReady("NOT_CASTER_TAXED");return Math.max(t,a)}findNextQueuedEventByTag(t){for(let a=0;a<this.eventsQueue.length;a++){const o=this.eventsQueue[a];if(o.hasTag(t))return o}}hasResourceAvailable(t,a){return this.resources.get(t).available(a??1)}hasResourceExactly(t,a){return this.resources.get(t).availableAmount()===a}hasDebuffActive(t,a){return this.debuffs.get(t,a).available(1)}hitPositional(t){return this.hasResourceAvailable("TRUE_NORTH")||t==="flank"&&this.hasResourceAvailable("FLANK_POSITIONAL")||t==="rear"&&this.hasResourceAvailable("REAR_POSITIONAL")}hitCombo(t){return this.hasResourceExactly(t.resource,t.resourceValue)}computeComboAndPositionalModifiers(t,a,o){const s=[];return a&&this.hitCombo(a)?(s.push(Xx(an(this,a.potency)-t)),o&&this.hitPositional(o.location)&&s.push(Hh(an(this,o.comboPotency)-an(this,a.potency)))):o&&this.hitPositional(o.location)&&s.push(Hh(an(this,o.potency)-t)),s}enqueueResourceDrop(t,a,o){if(a===void 0){const c=Ut(this.job,t);console.assert(c?.maxTimeout,`could not find timeout declaration for resource ${t}`),a=c.maxTimeout}const s=(o===void 0?"drop all ":`drop ${o} `)+t;this.resources.get(t).removeTimer(),this.resources.addResourceEvent({rscType:t,name:s,delay:a,fnOnRsc:c=>{c.consume(o??c.availableAmountIncludingDisabled()),Ut(this.job,c.type).warnOnTimeout&&I.reportWarning({kind:"timeout",rsc:c.type})}})}getOverriddenDots(t){return this.#n.get(t)??[]}getOverriddenHots(t){return this.#a.get(t)??[]}applyDoT(t,a){this.applyOverTimeEffect(t,a,"damage")}applyHoT(t,a,o){this.applyOverTimeEffect(t,a,"healing",o)}applyOverTimeEffect(t,a,o,s){if(this.debuffs.hasAny(t)){if(o!=="damage"){console.error(`over time debuff ${t} must have kind="damage", instead got ${o}`);return}const m=s??this.getStatusDuration(t);a.targetList.forEach(R=>{const T=this.debuffs.get(t,R);let S;if(this.getOverriddenDots(t).forEach(_=>{if(!this.hasDebuffActive(_,R)){const p=this.debuffs.get(_,R).getLastExpirationTime();if(p){const O=this.getDisplayTime()-p;S=S===void 0?O:Math.min(S,O)}return}a.setOverTimeOverrideAmount(t,a.getOverTimeOverrideAmount(t,o,R)+this.debuffs.timeTillExpiry(_,R),o,R),I.reportOverTimeDrop(this.getDisplayTime(),_,o,[R]),S=0,this.tryRemoveDebuff(_,R)}),T.availableAmountIncludingDisabled()>0){if(T.node===void 0){console.error(`DoT debuff for ${t}, target ${R} has no node`);return}T.enabled=!0,T.node.removeUnresolvedOvertimePotencies(o),a.setOverTimeOverrideAmount(t,a.getOverTimeOverrideAmount(t,o,R)+this.debuffs.timeTillExpiry(t,R),o,R),T.overrideTimer(this,m)}else{const _=this.getDisplayTime()-(T.getLastExpirationTime()??0);S=S===void 0?_:Math.min(S,_),T.gain(1);const p=o==="damage"?" DoT":" HoT";I.reportOverTimeStart(this.getDisplayTime(),t,o,[R]),this.debuffs.addDebuffEvent({rscType:t,name:"drop "+t+p+" on "+R,targetNumber:R,delay:m,fnOnRsc:O=>{O.consume(1),I.reportOverTimeDrop(this.getDisplayTime(),t,o,[R])}})}a.setOverTimeGap(t,S??0,o,R),T.node=a,T.tickCount=0});return}const c=this.resources.get(t),d=s??this.getStatusDuration(t);let f;if((o==="damage"?this.getOverriddenDots(t):this.getOverriddenHots(t)).forEach(m=>{if(m!==t){if(!this.hasResourceAvailable(m)){const R=this.resources.get(m).getLastExpirationTime();if(R){const T=this.getDisplayTime()-R;f=f===void 0?T:Math.min(f,T)}return}a.setOverTimeOverrideAmount(t,a.getOverTimeOverrideAmount(t,o)+this.resources.timeTillReady(m),o),I.reportOverTimeDrop(this.getDisplayTime(),m,o,a.targetList),f=0,this.tryConsumeResource(m)}}),c.available(1))console.assert(c.node),c.node.removeUnresolvedOvertimePotencies(o),a.setOverTimeOverrideAmount(t,a.getOverTimeOverrideAmount(t,o)+this.resources.timeTillReady(t),o),c.overrideTimer(this,d);else{const m=this.getDisplayTime()-(c.getLastExpirationTime()??0);f=f===void 0?m:Math.min(f,m),c.gain(1);const R=o==="damage"?" DoT":" HoT";I.reportOverTimeStart(this.getDisplayTime(),t,o,a.targetList),this.resources.addResourceEvent({rscType:t,name:"drop "+t+R,delay:d,fnOnRsc:T=>{T.consume(1),I.reportOverTimeDrop(this.getDisplayTime(),t,o,a.targetList)}})}a.setOverTimeGap(t,f??0,o),c.node=a,c.tickCount=0,this.#e.includes(t)&&(this.handleDoTTick(t),I.reportDotTick(this.time,t)),this.#t.includes(t)&&(this.handleHoTTick(t),I.reportHotTick(this.time,t))}addDoTPotencies(t){this.addOverTimePotencies(t,"damage")}addHoTPotencies(t,a){this.addOverTimePotencies(t,"healing",a)}addOverTimePotencies(t,a,o){const s=t.modifiers??[];this.hasResourceAvailable("TINCTURE")&&!s.includes(J.Tincture)&&(s.push(J.Tincture),t.node.addBuff(H.Tincture));const c=o??this.getStatusDuration(t.effectName),d=this.#e.includes(t.effectName)||this.#t.includes(t.effectName),f=Math.ceil(c/(t.tickFrequency??3))+(d?1:0),h=a==="damage"?"DoT":"HoT";for(let m=0;m<f;m++){const R=new tn({config:I.record.config??I.gameConfig,sourceTime:this.getDisplayTime(),sourceSkill:t.skillName,aspect:t.aspect??Ie.Other,basePotency:this.config.adjustedOvertimePotency(t.tickPotency,t.speedStat),snapshotTime:this.getDisplayTime(),description:Ke(t.effectName)+` ${h} `+(m+1)+`/${f}`,targetList:a==="damage"?t.node.targetList:void 0,healTargetCount:a==="healing"?t.node.healTargetCount:void 0,falloff:0});R.addModifiers(...s),t.targetModifiers&&R.addTargetSpecificModifiers(t.targetModifiers),t.node.addOverTimePotency(R,t.effectName,a)}}refreshDoT(t,a=!1){this.refreshOverTimeEffect(t,"damage",a)}refreshHoT(t,a=!1){this.refreshOverTimeEffect(t,"healing",a)}refreshOverTimeEffect(t,a,o){!o&&!this.hasResourceAvailable(t.effectName)||(this.addOverTimePotencies(t,a),this.applyOverTimeEffect(t.effectName,t.node,a))}timeTillNextMpGainEvent(){const t=this.findNextQueuedEventByTag(ca.ManaGain);return t?t.timeTillEvent:0}timeTillNextDamageEvent(){return this.resources.timeTillReady("IN_COMBAT")}getSkillAvailabilityStatus(t,a=!1){const o=this.skillsList.get(t);let s=this.#i(o.name);const c=o.manaCostFn(this),d=this.job==="BLM"&&this.resources.get("LEY_LINES").available(1),f=o.kind==="weaponskill"||o.kind==="spell"||o.kind==="limitbreak"?o.castTimeFn(this):0,h=f===0||o.kind==="ability"||o.kind!=="limitbreak"&&o.kind!=="unknown"&&o.isInstantFn(this),m=this.resources.get("MANA").availableAmount(),R=s>Tn.epsilon,T=c<=m,S=o.validateAttempt(this),g=this.config.level>=o.unlockLevel,_=this.job==="NIN"&&(this.hasResourceAvailable("MUDRA")||this.hasResourceAvailable("KASSATSU"))&&["TEN","CHI","JIN"].includes(o.name),p=du();if(R&&p.addUnavailableReason(Et.Blocked),!_&&o.secondaryCd&&this.cooldowns.get(o.secondaryCd.cdName).stacksAvailable()===0&&p.addUnavailableReason(Et.SecondaryBlocked),g||p.addUnavailableReason(Et.SkillNotUnlocked),S||p.addUnavailableReason(Et.RequirementsNotMet),T||p.addUnavailableReason(Et.NotEnoughMP),o.name==="MEDITATE"&&(s>Tn.epsilon||this.cooldowns.get("cd_GCD").timeTillNextStackAvailable()>Tn.epsilon)){const j=p.unavailableReasons.indexOf(Et.RequirementsNotMet);j>=0&&p.unavailableReasons.splice(j,1),p.addUnavailableReason(Et.Blocked)}o.requiresCombat&&p.unavailableReasons.includes(Et.RequirementsNotMet)&&(p.addUnavailableReason(Et.NotInCombat),s=this.timeTillNextDamageEvent());let O=this.cooldowns.get(o.cdName);const y=!_&&o.secondaryCd?this.cooldowns.get(o.secondaryCd.cdName):void 0;let L=O.timeTillNextStackAvailable()%O.currentStackCd();const P=!_&&o.secondaryCd?this.cooldowns.timeTillNextStackAvailable(o.secondaryCd.cdName):void 0;let D=O.currentStackCd();if(t==="MEDITATE"&&L<Tn.epsilon){const j=this.cooldowns.get("cd_GCD"),$=j.currentStackCd();j.timeTillNextStackAvailable()>L&&(O=j,D=$,L=j.timeTillNextStackAvailable(),s=L)}if(_){const j=this.cooldowns.get("cd_GCD"),$=j.currentStackCd();O=j,D=$,L=j.timeTillNextStackAvailable(),s=L}const k=O.stacksAvailable(),G=O.maxStacks(),B=y?.currentStackCd()??0;let K=0;p.ready()&&(o.kind==="spell"?K=(h?0:f-ci.getSlidecastWindow(f))+o.applicationDelay:o.kind==="limitbreak"?K=f+o.applicationDelay:K=o.applicationDelay);const V=y?.stacksAvailable()??0,ae=y?.maxStacks()??0,oe=o.highlightIf(this);return{skillName:o.name,status:p,stacksAvailable:ae>0?V:k,maxStacks:Math.max(G,ae),castTime:f,instantCast:h,cdRecastTime:D,secondaryCdRecastTime:B,timeTillNextStackReady:L,timeTillSecondaryReady:P,timeTillAvailable:s,timeTillDamageApplication:K,capturedManaCost:c,highlight:oe,llCovered:d,usedAt:this.getDisplayTime()}}useSkill(t,a,o){const s=this.skillsList.get(t);s.onExecute(this,a),s.falloff===void 0&&!s.savesTargets&&a.forceOneTarget(),s.aoeHeal&&a.setHealTargetCount(this.resources.get("PARTY_SIZE").availableAmount()),s.kind==="spell"||s.kind==="weaponskill"?this.useSpellOrWeaponskill(s,a,o):s.kind==="ability"?this.useAbility(s,a):s.kind==="limitbreak"&&this.useLimitBreak(s,a,o)}useInvalidSkill(t,a){const o=this.skillsList.get(t);if(o.falloff===void 0&&a.forceOneTarget(),o.aoeHeal&&a.setHealTargetCount(this.resources.get("PARTY_SIZE").availableAmount()),o.kind==="spell"||o.kind==="weaponskill"){const s=o.castTimeFn(this),c=o.recastTimeFn(this);s===0||o.isInstantFn(this)?this.resources.takeResourceLock("NOT_ANIMATION_LOCKED",o.animationLockFn(this)):this.resources.takeResourceLock("NOT_CASTER_TAXED",this.config.getAfterTaxCastTime(s)),this.cooldowns.get("cd_GCD").useStackWithRecast(this.config.getAfterTaxGCD(c))}else if(o.kind==="ability")this.resources.takeResourceLock("NOT_ANIMATION_LOCKED",o.animationLockFn(this));else if(o.kind==="limitbreak"){const s=o.castTimeFn(this),c=ci.getSlidecastWindow(s);this.resources.takeResourceLock("NOT_ANIMATION_LOCKED",c+o.animationLockFn(this))}}getPartyBuffs(t){const a=new Map;return I.timeline.getBuffMarkers().filter(s=>s.time<=t&&s.time+s.duration>=t).forEach(s=>{const c=new Qh(s.description);a.has(c.name)||(c.info.damageFactor===1?a.set(c.name,{kind:"critDirect",source:U.PARTY,buffType:c.name,critBonus:c.info.critBonus,dhBonus:c.info.dhBonus}):a.set(c.name,{kind:"multiplier",source:U.PARTY,buffType:c.name,potencyFactor:c.info.damageFactor}))}),a}tryConsumeResource(t,a=!1){const o=this.resources.get(t),s=a?o.availableAmount():1;return s>0&&o.available(s)?(o.consume(s),o.available(s)||o.removeTimer(),!0):!1}tryRemoveDebuff(t,a){const o=this.debuffs.get(t,a),s=o.availableAmount();return s>0?(o.consume(s),o.removeTimer(),!0):!1}setComboState(t,a){a===0?this.tryConsumeResource(t,!0):(this.resources.get(t).overrideCurrentValue(a),this.enqueueResourceDrop(t,30))}hasTraitUnlocked(t){return qN(t,this.config.level)}isInCombat(){return this.hasResourceAvailable("IN_COMBAT")}}const d0=["THUNDER_III","THUNDER_IV","HIGH_THUNDER","HIGH_THUNDER_II"],Kw=Object.keys(UR).filter(e=>!d0.includes(e));Object.keys(UR).forEach(e=>zt(e,`BLM/${Ge[e].name}.png`));class Vw extends Xt{jobSpecificOtherTargetedBuffViewProps(){return[...d0.flatMap(t=>this.makeTargetedTimers(t))]}jobSpecificSelfTargetedBuffViewProps(){return Kw.map(t=>t==="LEY_LINES"?this.makeToggleableTimer(t):t==="THUNDERHEAD"||t==="FIRESTARTER"?this.makeCommonTimerless(t):this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){const a=this.state.resources.get("ENOCHIAN"),o=this.state.resources,s=this.state.getFireStacks(),c=this.state.getIceStacks(),d=o.get("UMBRAL_HEART").availableAmount(),f=o.get("PARADOX").availableAmount(),h=o.get("ASTRAL_SOUL").availableAmount(),m=a.available(1)?o.timeTillReady("POLYGLOT"):30,R=o.get("POLYGLOT").availableAmount(),T=this.state.hasTraitUnlocked("ENHANCED_POLYGLOT_II")&&3||this.state.hasTraitUnlocked("ENHANCED_POLYGLOT")&&2||1,S=[{kind:"counter",name:N({en:"AF/UI",zh:"",ja:"AF/UB"}),color:s>0?t.blm.astralFire:t.blm.umbralIce,currentStacks:s>0?s:c,maxStacks:3},{kind:"counter",name:N({en:"hearts",zh:"",ja:""}),color:t.blm.umbralHeart,currentStacks:d,maxStacks:3},{kind:"counter",name:N({en:"paradox",zh:"",ja:""}),color:t.blm.paradox,currentStacks:f,maxStacks:1}];return this.state.hasTraitUnlocked("ENHANCED_ASTRAL_FIRE")&&S.push({kind:"counter",name:N({en:"astral soul",zh:"",ja:""}),color:t.blm.astralSoul,currentStacks:h,maxStacks:6}),S.push({kind:"bar",name:N({en:"poly timer",zh:"",ja:""}),color:t.blm.polyTimer,progress:1-m/30,valueString:m.toFixed(3)},{kind:"counter",name:N({en:"poly stacks",zh:"",ja:""}),color:t.blm.polyStacks,currentStacks:R,maxStacks:T}),S}}const la=(e,t,a)=>{Ve("BLM",e,t,a??{})};la("POLYGLOT",3,{timeout:30,warnOnOvercap:!0});la("ASTRAL_FIRE",3);la("UMBRAL_ICE",3);la("UMBRAL_HEART",3);la("ASTRAL_SOUL",6);la("LEY_LINES",1,{timeout:20});la("ENOCHIAN",1);la("PARADOX",1);la("FIRESTARTER",1);la("THUNDERHEAD",1);la("THUNDER_III",1,{timeout:27});la("THUNDER_IV",1,{timeout:21});la("HIGH_THUNDER",1,{timeout:30});la("HIGH_THUNDER_II",1,{timeout:24});la("MANAWARD",1,{timeout:20});la("TRIPLECAST",3,{timeout:15.7});class Ww extends qt{thunderTickOffset;constructor(t){super(t),t.initialResourceOverrides.some(d=>(d.type==="ASTRAL_FIRE"||d.type==="UMBRAL_ICE")&&d.stacks>0)&&this.gainStatus("ENOCHIAN"),this.thunderTickOffset=this.nonProcRng()*3;const o=this.hasTraitUnlocked("ENHANCED_POLYGLOT_II")&&3||this.hasTraitUnlocked("ENHANCED_POLYGLOT")&&2||1;this.resources.set(new pn("POLYGLOT",o,0,!0));const s=this.hasTraitUnlocked("ENHANCED_MANAFONT")&&100||120,c=this.hasTraitUnlocked("ENHANCED_SWIFTCAST")&&40||60;[new Ue("cd_MANAFONT",s,1,1),new Ue("cd_SWIFTCAST",c,1,1)].forEach(d=>this.cooldowns.set(d)),this.registerRecurringEvents([{reportName:N({en:"Thunder DoT",zh:"DoT"}),groupedEffects:[{effectName:"HIGH_THUNDER",appliedBy:["HIGH_THUNDER"]},{effectName:"HIGH_THUNDER_II",appliedBy:["HIGH_THUNDER_II"]},{effectName:"THUNDER_III",appliedBy:["THUNDER_III"]},{effectName:"THUNDER_IV",appliedBy:["THUNDER_IV"]}]}])}get statusPropsGenerator(){return new Vw(this)}jobSpecificRegisterRecurringEvents(){const t=a=>{this.hasEnochian()&&a.gain(1),this.resources.addResourceEvent({rscType:"POLYGLOT",name:"gain polyglot if currently has enochian",delay:30,fnOnRsc:t})};this.resources.addResourceEvent({rscType:"POLYGLOT",name:"gain polyglot if currently has enochian",delay:30,fnOnRsc:t})}jobSpecificAddSpeedBuffCovers(t,a){this.hasResourceAvailable("LEY_LINES")&&a.cdName==="cd_GCD"&&t.addBuff(H.LeyLines)}captureManaRegenAmount(){return this.getFireStacks()>0?0:200}getFireStacks(){return this.resources.get("ASTRAL_FIRE").availableAmount()}getIceStacks(){return this.resources.get("UMBRAL_ICE").availableAmount()}getUmbralHearts(){return this.resources.get("UMBRAL_HEART").availableAmount()}getMP(){return this.resources.get("MANA").availableAmount()}switchToAForUI(t,a){console.assert(a>0);const o=this.resources.get("ASTRAL_FIRE"),s=this.resources.get("UMBRAL_ICE"),c=this.resources.get("UMBRAL_HEART"),d=this.resources.get("PARADOX"),f=this.resources.get("ASTRAL_SOUL");t==="ASTRAL_FIRE"?(o.availableAmount()===0&&this.gainStatus("THUNDERHEAD"),o.gain(a),this.hasTraitUnlocked("ASPECT_MASTERY_V")&&s.available(3)&&c.available(3)&&d.gain(1),s.consume(s.availableAmount())):t==="UMBRAL_ICE"&&(s.availableAmount()===0&&this.gainStatus("THUNDERHEAD"),s.gain(a),this.hasTraitUnlocked("ASPECT_MASTERY_V")&&o.available(3)&&d.gain(1),o.consume(o.availableAmount()),f.consume(f.availableAmount()))}gainUmbralMana(t=0){let a=0;switch(this.resources.get("UMBRAL_ICE").availableAmount()){case 1:a=2500;break;case 2:a=5e3;break;case 3:a=1e4;break;default:a=0;break}this.addEvent(new Oe("gain umbral mana",t,()=>{this.resources.get("MANA").gain(a)}))}captureManaCost(t,a,o){const s=this.getIceStacks(),c=this.getFireStacks(),d=this.getUmbralHearts();if(t==="PARADOX"&&this.getIceStacks()>0||t==="FIRE_III"&&this.hasResourceAvailable("FIRESTARTER"))return 0;let f=1;return a===Ie.Fire&&s>0||a===Ie.Ice&&(s>0||c>0)?f=0:a===Ie.Fire&&c>0&&d===0&&(f=2),o*f}captureSpellCastTimeAFUI(t,a){const o=this.config.adjustedCastTime(t,this.hasResourceAvailable("LEY_LINES")?15:void 0);let s=1;return(a===Ie.Fire&&this.getIceStacks()===3||a===Ie.Ice&&this.getFireStacks()===3)&&(s=.5),o*s}hasEnochian(){return this.hasResourceAvailable("ENOCHIAN")}startOrRefreshEnochian(){const t=this.resources.get("ENOCHIAN");t.available(1)||(this.resources.get("POLYGLOT").overrideTimer(this,30),t.gain(1))}loseEnochian(){["ENOCHIAN","ASTRAL_FIRE","UMBRAL_ICE","UMBRAL_HEART","PARADOX","ASTRAL_SOUL"].forEach(a=>this.tryConsumeResource(a,!0))}}const h0=e=>e.resources.get("LEY_LINES").availableAmountIncludingDisabled()>0,yT=e=>e.hasResourceAvailable("PARADOX"),f0=e=>e.hasTraitUnlocked("ENHANCED_ENOCHIAN_IV")&&1.27||e.hasTraitUnlocked("ENHANCED_ENOCHIAN_III")&&1.22||e.hasTraitUnlocked("ENHANCED_ENOCHIAN_II")&&1.15||1.1,ln=(e,t,a)=>{const o=a.aspect??Ie.Other,s=Le((c,d)=>{a.baseCastTime===0||e==="DESPAIR"&&c.hasTraitUnlocked("ENHANCED_ASTRAL_FIRE")||e==="FOUL"&&c.hasTraitUnlocked("ENHANCED_FOUL")||e==="FIRE_III"&&c.hasResourceAvailable("FIRESTARTER")||c.tryConsumeResource("SWIFTCAST")||c.tryConsumeResource("TRIPLECAST")},(c,d)=>{c.getFireStacks()>0&&o===Ie.Fire&&!["DESPAIR","FLARE_STAR","FLARE"].includes(e)&&!(e==="FIRE_III"&&c.hasResourceAvailable("FIRESTARTER"))&&c.tryConsumeResource("UMBRAL_HEART"),o===Ie.Ice&&c.gainUmbralMana(a.applicationDelay)},a.onConfirm);return Xa("BLM",e,t,{...a,aspect:o,castTime:c=>c.captureSpellCastTimeAFUI(a.baseCastTime,o),recastTime:c=>c.config.adjustedGCD(2.5,c.hasResourceAvailable("LEY_LINES")?15:0),manaCost:c=>c.captureManaCost(e,o,a.baseManaCost),potency:c=>a.basePotency,isInstantFn:c=>e==="DESPAIR"&&c.hasTraitUnlocked("ENHANCED_ASTRAL_FIRE")||e==="FOUL"&&c.hasTraitUnlocked("ENHANCED_FOUL")||e==="FIRE_III"&&c.hasResourceAvailable("FIRESTARTER")||c.hasResourceAvailable("SWIFTCAST")||c.hasResourceAvailable("TRIPLECAST"),onConfirm:s,jobPotencyModifiers:c=>{const d=[];if(c.hasResourceAvailable("ENOCHIAN")){const m=f0(c);d.push({kind:"multiplier",source:U.ENO,potencyFactor:m})}const f=c.getIceStacks(),h=c.getFireStacks();return f===1?o===Ie.Fire?d.push({kind:"multiplier",source:U.UI1,potencyFactor:.9}):o===Ie.Ice&&d.push({kind:"multiplier",source:U.UI1,potencyFactor:1}):f===2?o===Ie.Fire?d.push({kind:"multiplier",source:U.UI2,potencyFactor:.8}):o===Ie.Ice&&d.push({kind:"multiplier",source:U.UI2,potencyFactor:1}):f===3&&(o===Ie.Fire?d.push({kind:"multiplier",source:U.UI3,potencyFactor:.7}):o===Ie.Ice&&d.push({kind:"multiplier",source:U.UI3,potencyFactor:1})),h===1?o===Ie.Ice?d.push({kind:"multiplier",source:U.AF1,potencyFactor:.9}):o===Ie.Fire&&d.push({kind:"multiplier",source:U.AF1,potencyFactor:1.4}):h===2?o===Ie.Ice?d.push({kind:"multiplier",source:U.AF2,potencyFactor:.8}):o===Ie.Fire&&d.push({kind:"multiplier",source:U.AF2,potencyFactor:1.6}):h===3&&(o===Ie.Ice?d.push({kind:"multiplier",source:U.AF3,potencyFactor:.7}):o===Ie.Fire&&d.push({kind:"multiplier",source:U.AF3,potencyFactor:1.8})),d}})},Ss=(e,t,a,o)=>at("BLM",e,t,a,o);ln("BLIZZARD",1,{aspect:Ie.Ice,baseCastTime:2,baseManaCost:400,basePotency:180,applicationDelay:.846,onConfirm:(e,t)=>{e.getFireStacks()===0?(e.switchToAForUI("UMBRAL_ICE",1),e.startOrRefreshEnochian()):(e.resources.get("ENOCHIAN").removeTimer(),e.loseEnochian())},replaceIf:[{newSkill:"PARADOX",condition:yT}]});ln("FIRE",2,{aspect:Ie.Fire,baseCastTime:2,baseManaCost:800,basePotency:180,applicationDelay:1.871,onConfirm:(e,t)=>{e.triggersEffect(.4,!0)&&e.gainStatus("FIRESTARTER"),e.getIceStacks()===0?(e.switchToAForUI("ASTRAL_FIRE",1),e.startOrRefreshEnochian()):(e.resources.get("ENOCHIAN").removeTimer(),e.loseEnochian())},replaceIf:[{newSkill:"PARADOX",condition:yT}]});Ss("TRANSPOSE",4,"cd_TRANSPOSE",{applicationDelay:0,cooldown:5,validateAttempt:e=>e.getFireStacks()>0||e.getIceStacks()>0,onApplication:(e,t)=>{(e.getFireStacks()!==0||e.getIceStacks()!==0)&&(e.switchToAForUI(e.getFireStacks()>0?"UMBRAL_ICE":"ASTRAL_FIRE",1),e.startOrRefreshEnochian())}});const xf=(e,t)=>(a,o)=>{let s=0;switch(e){case"HIGH_THUNDER":s=60;break;case"THUNDER_III":s=50;break;case"THUNDER_IV":s=35;break;case"HIGH_THUNDER_II":s=40;break}const c=[];if(a.hasResourceAvailable("ENOCHIAN")){const d=f0(a);c.push({kind:"multiplier",source:U.ENO,potencyFactor:d})}console.assert(s>0,`${e} was applied as a Thunder DoT`),a.addDoTPotencies({node:o,effectName:t,skillName:e,tickPotency:s,speedStat:"sps",aspect:Ie.Lightning,modifiers:c}),a.tryConsumeResource("THUNDERHEAD")};ln("THUNDER_III",45,{aspect:Ie.Lightning,baseCastTime:0,baseManaCost:0,basePotency:120,applicationDelay:1.03,validateAttempt:e=>e.hasResourceAvailable("THUNDERHEAD"),onConfirm:xf("THUNDER_III","THUNDER_III"),onApplication:(e,t)=>e.applyDoT("THUNDER_III",t),autoUpgrade:{trait:"THUNDER_MASTERY_III",otherSkill:"HIGH_THUNDER"},highlightIf:e=>e.hasResourceAvailable("THUNDERHEAD")});Ye("BLM","MANAWARD",30,"cd_MANAWARD",{rscType:"MANAWARD",applicationDelay:1.114,cooldown:120});Ss("MANAFONT",30,"cd_MANAFONT",{applicationDelay:.2,cooldown:100,validateAttempt:e=>e.getFireStacks()>0,onConfirm:(e,t)=>{e=e,e.resources.get("ASTRAL_FIRE").gain(3),e.resources.get("UMBRAL_HEART").gain(3),e.hasTraitUnlocked("ASPECT_MASTERY_V")&&e.resources.get("PARADOX").gain(1),e.gainStatus("THUNDERHEAD"),e.startOrRefreshEnochian()},onApplication:(e,t)=>{e.resources.get("MANA").gain(1e4)}});ln("FIRE_III",35,{aspect:Ie.Fire,baseCastTime:3.5,baseManaCost:2e3,basePotency:290,applicationDelay:1.292,onConfirm:(e,t)=>{e.tryConsumeResource("FIRESTARTER"),e.switchToAForUI("ASTRAL_FIRE",3),e.startOrRefreshEnochian()},highlightIf:e=>e.hasResourceAvailable("FIRESTARTER")});ln("BLIZZARD_III",35,{aspect:Ie.Ice,baseCastTime:3.5,baseManaCost:800,basePotency:290,applicationDelay:.89,onConfirm:(e,t)=>{e.switchToAForUI("UMBRAL_ICE",3),e.startOrRefreshEnochian()}});ln("FREEZE",40,{aspect:Ie.Ice,baseCastTime:2,baseManaCost:1e3,basePotency:120,applicationDelay:.664,falloff:0,validateAttempt:e=>e.getIceStacks()>0,onConfirm:(e,t)=>e.resources.get("UMBRAL_HEART").gain(3)});ln("FLARE",50,{aspect:Ie.Fire,baseCastTime:2,baseManaCost:0,basePotency:240,applicationDelay:1.157,falloff:.3,validateAttempt:e=>e.getFireStacks()>0&&e.getMP()>=800,onConfirm:(e,t)=>{const a=e.resources.get("UMBRAL_HEART"),o=e.resources.get("MANA"),s=a.available(1)?o.availableAmount()*.66:o.availableAmount();e.resources.get("MANA").consume(s),a.consume(a.availableAmount()),e.resources.get("ASTRAL_FIRE").gain(3),e.hasTraitUnlocked("ENHANCED_ASTRAL_FIRE")&&e.resources.get("ASTRAL_SOUL").gain(3),e.startOrRefreshEnochian()}});Ye("BLM","LEY_LINES",52,"cd_LEY_LINES",{rscType:"LEY_LINES",applicationDelay:.49,cooldown:120,maxCharges:2,validateAttempt:e=>!(e.resources.get("LEY_LINES").availableAmountIncludingDisabled()>0),onApplication:(e,t)=>{e.resources.get("LEY_LINES").enabled=!0},replaceIf:[{newSkill:"RETRACE",condition:h0}]});ln("BLIZZARD_IV",58,{aspect:Ie.Ice,baseCastTime:2,baseManaCost:800,basePotency:300,applicationDelay:1.156,validateAttempt:e=>e.getIceStacks()>0,onConfirm:(e,t)=>e.resources.get("UMBRAL_HEART").gain(3)});ln("FIRE_IV",60,{aspect:Ie.Fire,baseCastTime:2,baseManaCost:800,basePotency:300,applicationDelay:1.159,validateAttempt:e=>e.getFireStacks()>0,onConfirm:(e,t)=>{e.hasTraitUnlocked("ENHANCED_ASTRAL_FIRE")&&e.resources.get("ASTRAL_SOUL").gain(1)}});Ss("BETWEEN_THE_LINES",62,"cd_BETWEEN_THE_LINES",{applicationDelay:0,cooldown:3,animationLock:Wt,validateAttempt:e=>e.resources.get("LEY_LINES").availableAmountIncludingDisabled()>0,onConfirm:(e,t)=>{e.resources.get("LEY_LINES").enabled=!0}});Ss("AETHERIAL_MANIPULATION",50,"cd_AETHERIAL_MANIPULATION",{applicationDelay:0,cooldown:10,animationLock:Wt});Ss("TRIPLECAST",66,"cd_TRIPLECAST",{applicationDelay:0,cooldown:60,maxCharges:2,onApplication:(e,t)=>e.gainStatus("TRIPLECAST",3)});ln("FOUL",70,{baseCastTime:2,baseManaCost:0,basePotency:600,falloff:.25,applicationDelay:1.158,validateAttempt:e=>e.hasResourceAvailable("POLYGLOT"),onConfirm:(e,t)=>e.resources.get("POLYGLOT").consume(1),highlightIf:e=>e.hasResourceAvailable("POLYGLOT")});ln("DESPAIR",72,{aspect:Ie.Fire,baseCastTime:2,baseManaCost:0,basePotency:350,applicationDelay:.556,validateAttempt:e=>e.getFireStacks()>0&&e.getMP()>=800,onConfirm:(e,t)=>{const a=e.resources.get("MANA"),o=a.availableAmount();console.assert(o>=800,`tried to confirm despair at ${o} MP`),a.consume(o),e.resources.get("ASTRAL_FIRE").gain(3),e.startOrRefreshEnochian()}});ln("UMBRAL_SOUL",35,{aspect:Ie.Ice,baseCastTime:0,baseManaCost:0,basePotency:0,applicationDelay:.633,validateAttempt:e=>e.getIceStacks()>0,onConfirm:(e,t)=>{e.resources.get("UMBRAL_ICE").gain(1),e.resources.get("UMBRAL_HEART").gain(1)}});ln("XENOGLOSSY",80,{baseCastTime:0,baseManaCost:0,basePotency:890,applicationDelay:.63,validateAttempt:e=>e.hasResourceAvailable("POLYGLOT"),onConfirm:(e,t)=>e.resources.get("POLYGLOT").consume(1),highlightIf:e=>e.hasResourceAvailable("POLYGLOT")});ln("FIRE_II",18,{aspect:Ie.Fire,baseCastTime:3,baseManaCost:1500,basePotency:80,falloff:0,applicationDelay:1.154,autoUpgrade:{trait:"ASPECT_MASTERY_IV",otherSkill:"HIGH_FIRE_II"},onConfirm:(e,t)=>{e.switchToAForUI("ASTRAL_FIRE",3),e.startOrRefreshEnochian()}});ln("BLIZZARD_II",12,{aspect:Ie.Ice,baseCastTime:3,baseManaCost:800,basePotency:80,falloff:0,applicationDelay:1.158,autoUpgrade:{trait:"ASPECT_MASTERY_IV",otherSkill:"HIGH_BLIZZARD_II"},onConfirm:(e,t)=>{e.switchToAForUI("UMBRAL_ICE",3),e.startOrRefreshEnochian()}});ln("HIGH_FIRE_II",82,{aspect:Ie.Fire,baseCastTime:3,baseManaCost:1500,basePotency:100,falloff:0,applicationDelay:1.154,autoDowngrade:{trait:"ASPECT_MASTERY_IV",otherSkill:"FIRE_II"},onConfirm:(e,t)=>{e.switchToAForUI("ASTRAL_FIRE",3),e.startOrRefreshEnochian()}});ln("HIGH_BLIZZARD_II",82,{aspect:Ie.Ice,baseCastTime:3,baseManaCost:800,basePotency:100,falloff:0,applicationDelay:1.158,autoDowngrade:{trait:"ASPECT_MASTERY_IV",otherSkill:"BLIZZARD_II"},onConfirm:(e,t)=>{e.switchToAForUI("UMBRAL_ICE",3),e.startOrRefreshEnochian()}});Ss("AMPLIFIER",86,"cd_AMPLIFIER",{applicationDelay:0,cooldown:120,validateAttempt:e=>e.getFireStacks()>0||e.getIceStacks()>0,onApplication:(e,t)=>{e.resources.get("POLYGLOT").gain(1)}});ln("PARADOX",90,{baseCastTime:0,baseManaCost:1600,basePotency:540,applicationDelay:.624,validateAttempt:yT,onConfirm:(e,t)=>{e.resources.get("PARADOX").consume(1),e.getFireStacks()>0?e.gainStatus("FIRESTARTER"):e.getIceStacks()===0&&console.error("cannot cast Paradox outside of AF/UI")},replaceIf:[{newSkill:"BLIZZARD",condition:e=>!e.hasResourceAvailable("PARADOX")&&e.getIceStacks()>0},{newSkill:"FIRE",condition:e=>!e.hasResourceAvailable("PARADOX")&&e.getFireStacks()>0}],startOnHotbar:!1,highlightIf:e=>!0});ln("HIGH_THUNDER",92,{aspect:Ie.Lightning,baseCastTime:0,baseManaCost:0,basePotency:150,applicationDelay:.757,validateAttempt:e=>e.hasResourceAvailable("THUNDERHEAD"),onConfirm:xf("HIGH_THUNDER","HIGH_THUNDER"),onApplication:(e,t)=>e.applyDoT("HIGH_THUNDER",t),autoDowngrade:{trait:"THUNDER_MASTERY_III",otherSkill:"THUNDER_III"},highlightIf:e=>e.hasResourceAvailable("THUNDERHEAD")});ln("FLARE_STAR",100,{aspect:Ie.Fire,baseCastTime:2,baseManaCost:0,basePotency:500,falloff:.65,applicationDelay:.622,validateAttempt:e=>e.hasResourceAvailable("ASTRAL_SOUL",6),onConfirm:(e,t)=>e.tryConsumeResource("ASTRAL_SOUL",!0),highlightIf:e=>e.hasResourceAvailable("ASTRAL_SOUL",6)});ln("THUNDER_IV",64,{aspect:Ie.Lightning,baseCastTime:0,baseManaCost:0,basePotency:80,falloff:0,applicationDelay:1.16,validateAttempt:e=>e.hasResourceAvailable("THUNDERHEAD"),onConfirm:xf("THUNDER_IV","THUNDER_IV"),onApplication:(e,t)=>e.applyDoT("THUNDER_IV",t),autoUpgrade:{trait:"THUNDER_MASTERY_III",otherSkill:"HIGH_THUNDER_II"},highlightIf:e=>e.hasResourceAvailable("THUNDERHEAD")});ln("HIGH_THUNDER_II",92,{aspect:Ie.Lightning,baseCastTime:0,baseManaCost:0,basePotency:100,falloff:0,applicationDelay:.8,validateAttempt:e=>e.hasResourceAvailable("THUNDERHEAD"),onConfirm:xf("HIGH_THUNDER_II","HIGH_THUNDER_II"),onApplication:(e,t)=>e.applyDoT("HIGH_THUNDER_II",t),autoDowngrade:{trait:"THUNDER_MASTERY_III",otherSkill:"THUNDER_IV"},highlightIf:e=>e.hasResourceAvailable("THUNDERHEAD")});Ss("RETRACE",96,"cd_RETRACE",{applicationDelay:0,cooldown:40,validateAttempt:h0,onConfirm:(e,t)=>{const a=e.resources.get("LEY_LINES");a.enabled=!0,console.assert(a.pendingChange!==void 0,"LL should def have a timer when Retrace is used"),a.pendingChange.timeTillEvent=Math.floor(a.pendingChange.timeTillEvent)+.5},startOnHotbar:!1});const E0=["CAUSTIC_BITE","STORMBITE"],Xw=Object.keys(PR).filter(e=>!E0.includes(e));Object.keys(PR).forEach(e=>zt(e,`BRD/${Ge[e].name}.png`));class qw extends Xt{jobSpecificOtherTargetedBuffViewProps(){return[...E0.flatMap(t=>this.makeTargetedTimers(t))]}jobSpecificSelfTargetedBuffViewProps(){return[...Xw.map(t=>this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){const a=this.state.resources,o=a.get("PITCH_PERFECT"),s=a.get("REPERTOIRE"),c=[{kind:"counter",name:N({en:"Pitch Perfect"}),color:t.brd.pitchPerfect,currentStacks:o.availableAmount(),maxStacks:o.maxValue},{kind:"counter",name:N({en:"Paeon Repertoire"}),color:t.brd.repertoire,currentStacks:s.availableAmount(),maxStacks:s.maxValue}];if(this.state.hasTraitUnlocked("SOUL_VOICE")){const d=a.get("SOUL_VOICE");c.push({kind:"bar",name:N({en:"Soul Voice"}),color:t.brd.soulVoice,progress:d.availableAmount()/d.maxValue,valueString:d.availableAmount().toFixed(0)})}return this.state.hasTraitUnlocked("MINSTRELS_CODA")&&c.push({kind:"coda",name:N({en:"Coda"}),hasWanderers:this.state.hasResourceAvailable("WANDERERS_CODA"),hasMages:this.state.hasResourceAvailable("MAGES_CODA"),hasArmys:this.state.hasResourceAvailable("ARMYS_CODA"),wanderersColor:t.brd.wanderersCoda,magesColor:t.brd.magesCoda,armysColor:t.brd.armysCoda}),c}}const vt=(e,t,a)=>{Ve("BRD",e,t,a??{})};vt("SOUL_VOICE",100,{warnOnOvercap:!0});vt("PITCH_PERFECT",3);vt("REPERTOIRE",4);vt("WANDERERS_CODA",1,{warnOnOvercap:!0});vt("MAGES_CODA",1,{warnOnOvercap:!0});vt("ARMYS_CODA",1,{warnOnOvercap:!0});vt("ETHOS_REPERTOIRE",4);vt("MUSE_REPERTOIRE",4);vt("HAWKS_EYE",1,{timeout:30});vt("RAGING_STRIKES",1,{timeout:20});vt("BARRAGE",1,{timeout:10});vt("ARMYS_MUSE",4,{timeout:10});vt("ARMYS_ETHOS",4,{timeout:30});vt("BLAST_ARROW_READY",1,{timeout:10});vt("RESONANT_ARROW_READY",1,{timeout:30});vt("RADIANT_ENCORE_READY",1,{timeout:30});vt("MAGES_BALLAD",1,{timeout:45});vt("ARMYS_PAEON",1,{timeout:45});vt("WANDERERS_MINUET",1,{timeout:45});vt("BATTLE_VOICE",1,{timeout:20});vt("WARDENS_PAEAN",1,{timeout:30});vt("TROUBADOUR",1,{timeout:15});vt("NATURES_MINNE",1,{timeout:15});vt("RADIANT_FINALE",1,{timeout:20});vt("RADIANT_CODA",3);vt("CAUSTIC_BITE",1,{timeout:45});vt("STORMBITE",1,{timeout:45});const cN=["WANDERERS_MINUET","MAGES_BALLAD","ARMYS_PAEON"],Zw=["REFULGENT_ARROW","SHADOWBITE","WIDE_VOLLEY"];class Qw extends qt{constructor(t){super(t),this.hasTraitUnlocked("ENHANCED_BLOODLETTER")||this.cooldowns.set(new Ue("cd_HEARTBREAK_SHOT",15,2,2)),this.hasTraitUnlocked("ENHANCED_TROUBADOUR")||this.cooldowns.set(new Ue("cd_TROUBADOUR",120,1,1)),this.registerRecurringEvents([{reportName:Ke("STORMBITE"),groupedEffects:[{effectName:"STORMBITE",appliedBy:["STORMBITE","IRON_JAWS"]}]},{reportName:Ke("CAUSTIC_BITE"),groupedEffects:[{effectName:"CAUSTIC_BITE",appliedBy:["CAUSTIC_BITE","IRON_JAWS"]}]}])}get statusPropsGenerator(){return new qw(this)}jobSpecificAddDamageBuffCovers(t,a){switch(this.hasResourceAvailable("RAGING_STRIKES")&&t.addBuff(H.RagingStrikes),this.hasResourceAvailable("BATTLE_VOICE")&&t.addBuff(H.BattleVoice),this.resources.get("RADIANT_FINALE").availableAmount()){case 1:t.addBuff(H.RadiantFinale1);break;case 2:t.addBuff(H.RadiantFinale2);break;case 3:t.addBuff(H.RadiantFinale3);break}this.hasResourceAvailable("BARRAGE")&&Zw.includes(a.name)&&t.addBuff(H.Barrage),this.hasResourceAvailable("WANDERERS_MINUET")?t.addBuff(H.WanderersMinuet):this.hasResourceAvailable("MAGES_BALLAD")?t.addBuff(H.MagesBallad):this.hasResourceAvailable("ARMYS_PAEON")&&t.addBuff(H.ArmysPaeon)}songTick(t){this.resourceIsSong(t)&&this.hasResourceAvailable(t)&&(this.triggersEffect(.8)&&this.gainRepertoireEffect(t),this.resources.timeTillReady(t)>3+Tn.epsilon&&this.addEvent(new Oe(`${t} tick`,3,()=>{this.songTick(t)})))}gainRepertoireEffect(t){if(t||(this.hasResourceAvailable("WANDERERS_MINUET")?t="WANDERERS_MINUET":this.hasResourceAvailable("MAGES_BALLAD")?t="MAGES_BALLAD":this.hasResourceAvailable("ARMYS_PAEON")&&(t="ARMYS_PAEON")),!!t&&this.resourceIsSong(t)){switch(t){case"WANDERERS_MINUET":this.resources.get("PITCH_PERFECT").gain(1);break;case"MAGES_BALLAD":this.cooldowns.get("cd_HEARTBREAK_SHOT").restore(7.5);break;case"ARMYS_PAEON":this.resources.get("REPERTOIRE").gain(1);break}this.hasTraitUnlocked("SOUL_VOICE")&&this.resources.get("SOUL_VOICE").gain(5)}}resourceIsSong(t){return cN.includes(t)}beginSong(t){if(this.resourceIsSong(t)){if(cN.forEach(a=>this.tryExpireSong(a)),t!=="ARMYS_PAEON"&&this.hasResourceAvailable("ARMYS_ETHOS")){const a=this.resources.get("ETHOS_REPERTOIRE").availableAmount();this.resources.get("MUSE_REPERTOIRE").gain(a),this.tryConsumeResource("ARMYS_ETHOS"),this.tryConsumeResource("ETHOS_REPERTOIRE",!0),this.gainStatus("ARMYS_MUSE")}if(this.hasTraitUnlocked("MINSTRELS_CODA")){const a=t==="WANDERERS_MINUET"?"WANDERERS_CODA":t==="MAGES_BALLAD"?"MAGES_CODA":"ARMYS_CODA";this.resources.get(a).gain(1)}this.resources.get(t).gain(1),this.resources.addResourceEvent({rscType:t,name:"drop "+t,delay:this.getStatusDuration(t),fnOnRsc:a=>this.tryExpireSong(t)}),this.addEvent(new Oe(`${t} tick`,3,()=>{this.songTick(t)}))}}tryExpireSong(t){if(this.resourceIsSong(t)&&this.hasResourceAvailable(t)){switch(t){case"WANDERERS_MINUET":this.tryConsumeResource("PITCH_PERFECT",!0);break;case"ARMYS_PAEON":if(this.hasTraitUnlocked("ENHANCED_ARMYS_PAEON")){const a=this.resources.get("REPERTOIRE").availableAmount();a>0&&(this.resources.get("ETHOS_REPERTOIRE").gain(a),this.gainStatus("ARMYS_ETHOS")),this.tryConsumeResource("MUSE_REPERTOIRE",!0)}this.tryConsumeResource("REPERTOIRE",!0);break}this.tryConsumeResource(t)}}getCodaCount(){const t=this.resources.get("WANDERERS_CODA").availableAmount(),a=this.resources.get("MAGES_CODA").availableAmount(),o=this.resources.get("ARMYS_CODA").availableAmount();return t+a+o}getJobPotencyModifiers(t){const a=[];if([{rscType:"WANDERERS_MINUET",mod:J.WanderersMinuet},{rscType:"MAGES_BALLAD",mod:J.MagesBallad},{rscType:"ARMYS_PAEON",mod:J.ArmysPaeon},{rscType:"RAGING_STRIKES",mod:J.RagingStrikes},{rscType:"BATTLE_VOICE",mod:J.BattleVoice}].forEach(s=>{this.hasResourceAvailable(s.rscType)&&a.push(s.mod)}),this.hasResourceAvailable("RADIANT_FINALE")){const s=this.resources.get("RADIANT_CODA").availableAmount();s===3?a.push(J.RadiantFinaleThreeCoda):s===2?a.push(J.RadiantFinaleTwoCoda):s===1&&a.push(J.RadiantFinaleOneCoda)}if(this.hasResourceAvailable("BARRAGE"))switch(t){case"REFULGENT_ARROW":a.push(J.BarrageRefulgent);break;case"SHADOWBITE":a.push(J.BarrageShadowbite);break;case"WIDE_VOLLEY":a.push(J.BarrageWideVolley);break}return a}getSpeedModifier(t){if(t==="ARMYS_PAEON")return this.resources.get("REPERTOIRE").availableAmount()*4;if(t==="ARMYS_MUSE"){const a=this.resources.get("MUSE_REPERTOIRE").availableAmount();return a===4?12:a===3?4:a}return 0}}const qa=(e,t,a)=>on("BRD",e,t,{...a,recastTime:o=>{let s;o.hasResourceAvailable("ARMYS_PAEON")?s="ARMYS_PAEON":o.hasResourceAvailable("ARMYS_MUSE")&&(s="ARMYS_MUSE");const c=o.getSpeedModifier(s);return o.config.adjustedSksGCD(2.5,c)},jobPotencyModifiers:o=>o.getJobPotencyModifiers(e)}),Ol=(e,t,a,o)=>at("BRD",e,t,a,{...o,jobPotencyModifiers:s=>s.getJobPotencyModifiers(e)}),gs=(e,t,a,o)=>Ye("BRD",e,t,a,o);qa("HEAVY_SHOT",1,{potency:160,applicationDelay:1.47,onApplication:e=>e.maybeGainProc("HAWKS_EYE",.2),autoUpgrade:{trait:"HEAVY_SHOT_MASTERY",otherSkill:"BURST_SHOT"}});qa("BURST_SHOT",1,{startOnHotbar:!1,potency:[["NEVER",200],["RANGED_MASTERY",220]],applicationDelay:1.47,onApplication:e=>e.maybeGainProc("HAWKS_EYE",.35)});qa("REFULGENT_ARROW",70,{potency:[["NEVER",260],["RANGED_MASTERY",280]],applicationDelay:1.47,onConfirm:e=>{e.hasResourceAvailable("BARRAGE")?e.tryConsumeResource("BARRAGE"):e.tryConsumeResource("HAWKS_EYE")},validateAttempt:e=>e.hasResourceAvailable("HAWKS_EYE")||e.hasResourceAvailable("BARRAGE"),highlightIf:e=>e.hasResourceAvailable("HAWKS_EYE")||e.hasResourceAvailable("BARRAGE")});const RR=[{skillName:"CAUSTIC_BITE",dotName:"CAUSTIC_BITE",initialPotency:150,tickPotency:20},{skillName:"STORMBITE",dotName:"STORMBITE",initialPotency:100,tickPotency:25}];RR.forEach(e=>{qa(e.skillName,1,{potency:e.initialPotency,applicationDelay:1.29,onConfirm:(t,a)=>t.addDoTPotencies({node:a,effectName:e.dotName,skillName:e.skillName,tickPotency:e.tickPotency,speedStat:"sks",modifiers:t.getJobPotencyModifiers(e.skillName)}),onApplication:(t,a)=>{t.applyDoT(e.dotName,a),t.hasTraitUnlocked("BITE_MASTERY_II")&&t.maybeGainProc("HAWKS_EYE",.35)}})});qa("IRON_JAWS",56,{potency:100,applicationDelay:.67,onConfirm:(e,t)=>{console.assert(t.targetList.length===1,"Iron Jaws must have exactly 1 target");const a=RR.map(o=>e.hasDebuffActive(o.dotName,t.targetList[0]));e.addEvent(new Oe("iron jaws dot refresh",.67,()=>{RR.forEach((o,s)=>{e.refreshDoT({node:t,effectName:o.dotName,tickPotency:o.tickPotency,skillName:"IRON_JAWS",speedStat:"sks",modifiers:e.getJobPotencyModifiers("IRON_JAWS")},a[s])}),e.hasTraitUnlocked("BITE_MASTERY_II")&&e.maybeGainProc("HAWKS_EYE",.35)}))}});qa("APEX_ARROW",80,{potency:e=>{const t=e.resources.get("SOUL_VOICE"),a=20,o=e.hasTraitUnlocked("RANGED_MASTERY")?140:100,s=e.hasTraitUnlocked("RANGED_MASTERY")?700:500,c=1*(t.availableAmount()-a)/(t.maxValue-a);return(s-o)*c+o},falloff:0,applicationDelay:1.07,onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_APEX_ARROW")&&e.resources.get("SOUL_VOICE").availableAmount()>=80&&e.gainStatus("BLAST_ARROW_READY"),e.tryConsumeResource("SOUL_VOICE",!0)},validateAttempt:e=>e.hasResourceAvailable("SOUL_VOICE",20),highlightIf:e=>e.hasResourceAvailable("SOUL_VOICE",80),replaceIf:[{newSkill:"BLAST_ARROW",condition:e=>e.hasResourceAvailable("BLAST_ARROW_READY")}]});qa("BLAST_ARROW",86,{startOnHotbar:!1,potency:[["NEVER",600],["RANGED_MASTERY",700]],falloff:.5,applicationDelay:1.65,validateAttempt:e=>e.hasResourceAvailable("BLAST_ARROW_READY"),highlightIf:e=>e.hasResourceAvailable("BLAST_ARROW_READY"),onConfirm:e=>e.tryConsumeResource("BLAST_ARROW_READY")});Ol("EMYPREAL_ARROW",54,"cd_EMPYREAL_ARROW",{potency:[["NEVER",240],["RANGED_MASTERY",260]],cooldown:15,applicationDelay:1.03,onConfirm:e=>e.gainRepertoireEffect()});Ol("BLOODLETTER",12,"cd_HEARTBREAK_SHOT",{potency:130,cooldown:15,maxCharges:3,applicationDelay:1.65,autoUpgrade:{otherSkill:"HEARTBREAK_SHOT",trait:"BLOODLETTER_MASTERY"}});Ol("HEARTBREAK_SHOT",92,"cd_HEARTBREAK_SHOT",{startOnHotbar:!1,potency:180,cooldown:15,maxCharges:3,applicationDelay:1.65});Ol("SIDEWINDER",60,"cd_SIDEWINDER",{potency:[["NEVER",320],["RANGED_MASTERY",400]],cooldown:60,applicationDelay:.53});const $w=[{skillName:"WANDERERS_MINUET",song:"WANDERERS_MINUET",skillLevel:52,cdName:"cd_WANDERERS_MINUET",replaceIf:[{newSkill:"PITCH_PERFECT",condition:e=>e.hasResourceAvailable("WANDERERS_MINUET")}]},{skillName:"MAGES_BALLAD",song:"MAGES_BALLAD",skillLevel:30,cdName:"cd_MAGES_BALLAD"},{skillName:"ARMYS_PAEON",song:"ARMYS_PAEON",skillLevel:40,cdName:"cd_ARMYS_PAEON"}];$w.forEach(e=>{Ol(e.skillName,e.skillLevel,e.cdName,{applicationDelay:0,requiresCombat:!0,cooldown:120,replaceIf:e.replaceIf,onConfirm:t=>t.beginSong(e.song)})});Ol("PITCH_PERFECT",52,"cd_PITCH_PERFECT",{startOnHotbar:!1,applicationDelay:.8,cooldown:1,potency:e=>{const t=e.resources.get("PITCH_PERFECT").availableAmount();return t===3?360:t===2?220:100},falloff:.5,onConfirm:e=>e.tryConsumeResource("PITCH_PERFECT",!0),validateAttempt:e=>e.hasResourceAvailable("WANDERERS_MINUET")&&e.hasResourceAvailable("PITCH_PERFECT"),highlightIf:e=>e.hasResourceAvailable("WANDERERS_MINUET")&&e.hasResourceAvailable("PITCH_PERFECT")});gs("BARRAGE",38,"cd_BARRAGE",{rscType:"BARRAGE",applicationDelay:0,cooldown:120,onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_BARRAGE")&&e.gainStatus("RESONANT_ARROW_READY")},replaceIf:[{newSkill:"RESONANT_ARROW",condition:e=>e.hasResourceAvailable("RESONANT_ARROW_READY")}]});qa("RESONANT_ARROW",96,{startOnHotbar:!1,potency:640,falloff:.5,applicationDelay:1.16,onConfirm:e=>e.tryConsumeResource("RESONANT_ARROW_READY"),validateAttempt:e=>e.hasResourceAvailable("RESONANT_ARROW_READY"),highlightIf:e=>e.hasResourceAvailable("RESONANT_ARROW_READY")});gs("RADIANT_FINALE",90,"cd_RADIANT_FINALE",{rscType:"RADIANT_FINALE",applicationDelay:.62,cooldown:110,onConfirm:e=>{const t=e.getCodaCount();e.resources.get("RADIANT_CODA").overrideCurrentValue(t),e.tryConsumeResource("WANDERERS_CODA"),e.tryConsumeResource("MAGES_CODA"),e.tryConsumeResource("ARMYS_CODA"),e.hasTraitUnlocked("ENHANCED_RADIANT_FINALE")&&e.gainStatus("RADIANT_ENCORE_READY")},validateAttempt:e=>e.getCodaCount()>0,replaceIf:[{newSkill:"RADIANT_ENCORE",condition:e=>e.hasResourceAvailable("RADIANT_ENCORE_READY")}]});qa("RADIANT_ENCORE",100,{startOnHotbar:!1,potency:e=>{const t=e.resources.get("RADIANT_CODA").availableAmount();return t===3?1100:t===2?800:700},falloff:.5,applicationDelay:1.96,onConfirm:e=>e.tryConsumeResource("RADIANT_ENCORE_READY"),validateAttempt:e=>e.hasResourceAvailable("RADIANT_ENCORE_READY"),highlightIf:e=>e.hasResourceAvailable("RADIANT_ENCORE_READY")});gs("RAGING_STRIKES",4,"cd_RAGING_STRIKES",{rscType:"RAGING_STRIKES",applicationDelay:.53,cooldown:120});gs("BATTLE_VOICE",50,"cd_BATTLE_VOICE",{rscType:"BATTLE_VOICE",applicationDelay:.62,cooldown:120});qa("QUICK_NOCK",18,{potency:110,applicationDelay:1.11,onApplication:e=>e.maybeGainProc("HAWKS_EYE",.2),falloff:0,autoUpgrade:{trait:"QUICK_NOCK_MASTERY",otherSkill:"LADONSBITE"}});qa("LADONSBITE",82,{startOnHotbar:!1,potency:140,falloff:0,applicationDelay:1.11,onApplication:e=>e.maybeGainProc("HAWKS_EYE",.35)});qa("WIDE_VOLLEY",18,{potency:140,falloff:0,applicationDelay:1.43,onConfirm:e=>{e.hasResourceAvailable("BARRAGE")?e.tryConsumeResource("BARRAGE"):e.tryConsumeResource("HAWKS_EYE")},validateAttempt:e=>e.hasResourceAvailable("HAWKS_EYE")||e.hasResourceAvailable("BARRAGE"),highlightIf:e=>e.hasResourceAvailable("HAWKS_EYE")||e.hasResourceAvailable("BARRAGE"),autoUpgrade:{trait:"WIDE_VOLLEY_MASTERY",otherSkill:"SHADOWBITE"}});qa("SHADOWBITE",72,{startOnHotbar:!1,potency:200,falloff:0,applicationDelay:1.43,onConfirm:e=>{e.hasResourceAvailable("BARRAGE")?e.tryConsumeResource("BARRAGE"):e.tryConsumeResource("HAWKS_EYE")},validateAttempt:e=>e.hasResourceAvailable("HAWKS_EYE")||e.hasResourceAvailable("BARRAGE"),highlightIf:e=>e.hasResourceAvailable("HAWKS_EYE")||e.hasResourceAvailable("BARRAGE")});Ol("RAIN_OF_DEATH",45,"cd_HEARTBREAK_SHOT",{potency:100,cooldown:15,maxCharges:3,falloff:0,applicationDelay:1.65});gs("WARDENS_PAEAN",35,"cd_WARDENS_PAEAN",{rscType:"WARDENS_PAEAN",cooldown:45,applicationDelay:.62});gs("NATURES_MINNE",35,"cd_NATURES_MINNE",{rscType:"NATURES_MINNE",cooldown:120,applicationDelay:.62});Ol("REPELLING_SHOT",15,"cd_REPELLING_SHOT",{cooldown:30,animationLock:Wt});gs("TROUBADOUR",56,"cd_TROUBADOUR",{rscType:"TROUBADOUR",maxCharges:1,cooldown:90,applicationDelay:0});Object.keys(wR).filter(e=>!(e==="ESPRIT_PARTNER"||e==="STANDARD_FINISH_PARTNER")).forEach(e=>zt(e,`DNC/${Ge[e].name}.png`));zt("ESPRIT_PARTNER","DNC/Esprit.png");zt("STANDARD_FINISH_PARTNER","DNC/Standard Finish.png");const uN=["ESPRIT_TECHNICAL","ESPRIT_PARTNER","STANDARD_FINISH_PARTNER","DANCE_PARTNER"];class Jw extends Xt{jobSpecificOtherTargetedBuffViewProps(){return uN.map(t=>t==="DANCE_PARTNER"?this.makeCommonTimerless(t,!1):this.makeCommonTimer(t,!1))}jobSpecificSelfTargetedBuffViewProps(){return[...Object.keys(wR).filter(t=>!uN.includes(t)).map(t=>t==="CLOSED_POSITION"||t==="RISING_RHYTHM"?this.makeCommonTimerless(t):this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){const a=this.state.resources,o=a.get("FEATHER_GAUGE").availableAmount(),s=a.get("STANDARD_DANCE").availableAmount(),c=a.get("TECHNICAL_DANCE").availableAmount(),d=[];if(this.state.hasTraitUnlocked("ESPRIT")){const f=a.get("ESPRIT_GAUGE").availableAmount();d.push({kind:"bar",name:N({en:"Esprit",zh:""}),color:t.dnc.esprit,progress:f/100,valueString:f.toFixed(0)})}return d.push({kind:"counter",name:N({en:"Feathers",zh:""}),color:t.dnc.feathers,currentStacks:o,maxStacks:4},{kind:"dance",name:N({en:"Standard",zh:""}),maxStacks:2,currentStacks:s,emboiteColor:t.dnc.emboite,entrechatColor:t.dnc.entrechat,jeteColor:t.dnc.jete,pirouetteColor:t.dnc.pirouette},{kind:"dance",name:N({en:"Technical",zh:""}),maxStacks:4,currentStacks:c,emboiteColor:t.dnc.emboite,entrechatColor:t.dnc.entrechat,jeteColor:t.dnc.jete,pirouetteColor:t.dnc.pirouette}),d}statusLayoutFn(t){return l.jsxs("div",{children:[l.jsxs("div",{style:{display:"inline-block",verticalAlign:"top",width:"50%",height:"100%"},children:[l.jsxs("span",{style:{display:"block",marginBottom:10},children:[N({en:"time: ",zh:"",ja:""}),`${Xe.displayTime(t.time,3)} (${t.time.toFixed(3)})`]}),t.resources?l.jsx(c0,{data:{level:t.level,resources:t.resources},style:{height:"17em"}}):void 0]}),l.jsxs("div",{style:{position:"relative",display:"inline-block",float:"right",width:"50%"},children:[t.resourceLocks?l.jsx(r0,{data:t.resourceLocks}):void 0,l.jsx(Jh,{data:t.enemyBuffs,style:{marginTop:50,marginBottom:"2em"}}),l.jsx(Jh,{data:t.selfBuffs,style:{position:"absolute",right:0,width:"200%"}})]})]})}}const st=(e,t,a)=>{Ve("DNC",e,t,a??{})};st("ESPRIT_GAUGE",100,{warnOnOvercap:!0});st("FEATHER_GAUGE",4,{warnOnOvercap:!0});st("STANDARD_DANCE",2);st("TECHNICAL_DANCE",4);st("SILKEN_SYMMETRY",1,{timeout:30});st("SILKEN_FLOW",1,{timeout:30});st("FLOURISHING_SYMMETRY",1,{timeout:30});st("FLOURISHING_FLOW",1,{timeout:30});st("THREEFOLD_FAN_DANCE",1,{timeout:30,warnOnOvercap:!0});st("FOURFOLD_FAN_DANCE",1,{timeout:30});st("FINISHING_MOVE_READY",1,{timeout:30});st("FLOURISHING_STARFALL",1,{timeout:20});st("STANDARD_STEP",1,{timeout:15});st("STANDARD_FINISH",1,{timeout:60});st("STANDARD_BONUS",2,{timeout:60});st("ESPRIT",1,{timeout:60});st("TECHNICAL_STEP",1,{timeout:15});st("TECHNICAL_FINISH",1,{timeout:20.5});st("TECHNICAL_BONUS",4,{timeout:20.5});st("LAST_DANCE_READY",1,{timeout:30});st("DANCE_OF_THE_DAWN_READY",1,{timeout:30});st("FLOURISHING_FINISH",1,{timeout:30});st("CLOSED_POSITION",1,{default:1});st("DEVILMENT",1,{timeout:20});st("SHIELD_SAMBA",1,{timeout:15});st("IMPROVISATION",1,{timeout:15});st("RISING_RHYTHM",4,{timeout:15});st("IMPROVISATION_REGEN",1,{timeout:15});st("IMPROVISED_FINISH",1,{timeout:30});st("DANCE_PARTNER",1,{default:1});st("ESPRIT_PARTNER",1,{timeout:60});st("STANDARD_FINISH_PARTNER",1,{timeout:60});st("ESPRIT_TECHNICAL",1,{timeout:20});st("CASCADE_COMBO",1,{timeout:30});st("WINDMILL_COMBO",1,{timeout:30});const eG=["CASCADE","FOUNTAIN","WINDMILL","BLADESHOWER"],tG=["EMBOITE","ENTRECHAT","JETE","PIROUETTE"];class nG extends qt{constructor(t){super(t),this.hasTraitUnlocked("ESPRIT")||this.resources.set(new pn("ESPRIT_GAUGE",0,0,!0));const a=this.hasTraitUnlocked("ENHANCED_EN_AVANT_II")?3:2;this.cooldowns.set(new Ue("cd_EN_AVANT",30,a,a));const o=this.hasTraitUnlocked("ENHANCED_SHIELD_SAMBA")?90:120;this.cooldowns.set(new Ue("cd_SHIELD_SAMBA",o,1,1)),this.registerRecurringEvents()}get statusPropsGenerator(){return new Jw(this)}jobSpecificAddDamageBuffCovers(t,a){this.hasResourceAvailable("TECHNICAL_FINISH")&&t.addBuff(H.TechnicalFinish),this.hasResourceAvailable("DEVILMENT")&&t.addBuff(H.Devilment)}cancelChanneledSkills(){this.tryConsumeResource("IMPROVISATION"),this.tryConsumeResource("RISING_RHYTHM",!0)}processComboStatus(t){if(!eG.includes(t))return;const a=t==="CASCADE",o=t==="WINDMILL";this.setComboState("CASCADE_COMBO",a?1:0),this.setComboState("WINDMILL_COMBO",o?1:0)}getCurrentDanceStatus(){const t=this.hasResourceAvailable("STANDARD_STEP")?"STANDARD_DANCE":"TECHNICAL_DANCE";return this.resources.get(t).availableAmount()}processDanceStatus(t){if(!tG.includes(t))return;const a=this.hasResourceAvailable("STANDARD_STEP")?"STANDARD_DANCE":"TECHNICAL_DANCE";let o=0;switch(t){case"ENTRECHAT":o=1;break;case"JETE":o=2;break;case"PIROUETTE":o=3;break}const s=this.resources.get(a);s.availableAmount()===o&&s.gain(1)}gainProc(t){this.gainStatus(t)}maybeGainProc(t,a=.5){super.maybeGainProc(t,a,!0)}gainProcIfCombo(t,a){this.triggersEffect(.5,!0)&&a&&this.gainProc(t)}gainResource(t,a){this.resources.get(t).gain(a)}maybeGainResource(t,a,o=.5){this.triggersEffect(o,!0)&&this.gainResource(t,a)}simulatePartyEspritGain(){if(this.hasResourceAvailable("ESPRIT_TECHNICAL")){for(let t=0;t<this.resources.get("PARTY_SIZE").availableAmount()-1;t++)this.maybeGainResource("ESPRIT_GAUGE",10,.2);return}this.hasResourceAvailable("ESPRIT_PARTNER")&&this.maybeGainResource("ESPRIT_GAUGE",10,.2)}applyStandardFinish(t){t!==0&&(this.gainProc("STANDARD_FINISH"),this.gainStatus("STANDARD_BONUS",t),this.hasResourceAvailable("DANCE_PARTNER")&&this.gainProc("STANDARD_FINISH_PARTNER"),this.hasTraitUnlocked("ESPRIT")&&(this.gainProc("ESPRIT"),this.hasResourceAvailable("DANCE_PARTNER")&&this.gainProc("ESPRIT_PARTNER")),this.hasTraitUnlocked("ENHANCED_STANDARD_FINISH")&&this.gainProc("LAST_DANCE_READY"))}}const sn=e=>e.hasResourceAvailable("STANDARD_STEP")||e.hasResourceAvailable("TECHNICAL_STEP"),m0={newSkill:"EMBOITE",condition:e=>sn(e)},A0={newSkill:"ENTRECHAT",condition:e=>sn(e)},R0={newSkill:"JETE",condition:e=>sn(e)},T0={newSkill:"PIROUETTE",condition:e=>sn(e)},Zt=(e,t,a)=>{const o=Le(s=>{a.potency&&s.simulatePartyEspritGain()},a.onConfirm,s=>s.processComboStatus(e));return on("DNC",e,t,{...a,onConfirm:o,jobPotencyModifiers:s=>{const c=[];if(s.hasResourceAvailable("STANDARD_FINISH")){const d=s.resources.get("STANDARD_BONUS").availableAmount()===2?J.DoubleStandardFinish:J.SingleStandardFinish;c.push(d)}if(s.hasResourceAvailable("TECHNICAL_FINISH")){const d=s.resources.get("TECHNICAL_BONUS").availableAmount(),f=d===4?J.QuadrupleTechnicalFinish:d===3?J.TripleTechnicalFinish:J.SingleTechnicalFinish;c.push(f)}return s.hasResourceAvailable("DEVILMENT")&&c.push(J.Devilment),e==="STARFALL_DANCE"&&c.push(J.AutoCDH),c}})},xi=(e,t,a,o)=>at("DNC",e,t,a,{...o,onConfirm:o.onConfirm,jobPotencyModifiers:s=>{const c=[];if(s.hasResourceAvailable("STANDARD_FINISH")){const d=s.resources.get("STANDARD_BONUS").availableAmount()===2?J.DoubleStandardFinish:J.SingleStandardFinish;c.push(d)}if(s.hasResourceAvailable("TECHNICAL_FINISH")){const d=s.resources.get("TECHNICAL_BONUS").availableAmount(),f=d===4?J.QuadrupleTechnicalFinish:d===3?J.TripleTechnicalFinish:J.SingleTechnicalFinish;c.push(f)}return s.hasResourceAvailable("DEVILMENT")&&c.push(J.Devilment),c}}),S0=(e,t,a,o)=>Ye("DNC",e,t,a,o);Zt("EMBOITE",15,{startOnHotbar:!1,recastTime:1,onConfirm:e=>e.processDanceStatus("EMBOITE"),highlightIf:e=>sn(e)&&e.getCurrentDanceStatus()===0});Zt("ENTRECHAT",15,{startOnHotbar:!1,recastTime:1,onConfirm:e=>e.processDanceStatus("ENTRECHAT"),highlightIf:e=>sn(e)&&e.getCurrentDanceStatus()===1});Zt("JETE",15,{startOnHotbar:!1,recastTime:1,onConfirm:e=>e.processDanceStatus("JETE"),highlightIf:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===2});Zt("PIROUETTE",15,{startOnHotbar:!1,recastTime:1,onConfirm:e=>e.processDanceStatus("PIROUETTE"),highlightIf:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===3});Zt("CASCADE",1,{replaceIf:[m0],potency:[["NEVER",200],["DYNAMIC_DANCER",220]],recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.8,onConfirm:e=>{e.maybeGainProc("SILKEN_SYMMETRY"),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",5)}});Zt("FOUNTAIN",2,{replaceIf:[A0],potency:[["NEVER",100],["DYNAMIC_DANCER",120]],combo:{potency:[["NEVER",260],["DYNAMIC_DANCER",280]],resource:"CASCADE_COMBO",resourceValue:1},recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.98,onConfirm:e=>{e.gainProcIfCombo("SILKEN_FLOW",e.hasResourceExactly("CASCADE_COMBO",1)),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",5)},highlightIf:e=>e.resources.get("CASCADE_COMBO").availableAmount()===1});Zt("REVERSE_CASCADE",20,{replaceIf:[R0],potency:[["NEVER",260],["DYNAMIC_DANCER",280]],recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("SILKEN_SYMMETRY")||e.hasResourceAvailable("FLOURISHING_SYMMETRY"),onConfirm:e=>{e.hasResourceAvailable("SILKEN_SYMMETRY")?e.tryConsumeResource("SILKEN_SYMMETRY"):e.tryConsumeResource("FLOURISHING_SYMMETRY"),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",10),e.maybeGainResource("FEATHER_GAUGE",1)},highlightIf:e=>e.hasResourceAvailable("SILKEN_SYMMETRY")||e.hasResourceAvailable("FLOURISHING_SYMMETRY")});Zt("FOUNTAINFALL",40,{replaceIf:[T0],potency:[["NEVER",320],["DYNAMIC_DANCER",340]],recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:1.21,validateAttempt:e=>e.hasResourceAvailable("SILKEN_FLOW")||e.hasResourceAvailable("FLOURISHING_FLOW"),onConfirm:e=>{e.hasResourceAvailable("SILKEN_FLOW")?e.tryConsumeResource("SILKEN_FLOW"):e.tryConsumeResource("FLOURISHING_FLOW"),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",10),e.maybeGainResource("FEATHER_GAUGE",1)},highlightIf:e=>e.hasResourceAvailable("SILKEN_FLOW")||e.hasResourceAvailable("FLOURISHING_FLOW")});xi("FAN_DANCE",30,"cd_FAN_DANCE",{potency:[["NEVER",150],["DYNAMIC_DANCER",180]],cooldown:1,applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("FEATHER_GAUGE")&&!sn(e),highlightIf:e=>e.hasResourceAvailable("FEATHER_GAUGE"),onConfirm:e=>{e.tryConsumeResource("FEATHER_GAUGE"),e.maybeGainProc("THREEFOLD_FAN_DANCE")}});Zt("SABER_DANCE",76,{replaceIf:[{newSkill:"DANCE_OF_THE_DAWN",condition:e=>e.hasResourceAvailable("DANCE_OF_THE_DAWN_READY")&&e.hasResourceAvailable("ESPRIT_GAUGE",50)}],potency:[["NEVER",500],["DYNAMIC_DANCER",540]],recastTime:e=>e.config.adjustedSksGCD(),falloff:.6,applicationDelay:.44,validateAttempt:e=>e.hasResourceAvailable("ESPRIT_GAUGE",50)&&!sn(e),highlightIf:e=>e.hasResourceAvailable("ESPRIT_GAUGE",50),onConfirm:e=>e.resources.get("ESPRIT_GAUGE").consume(50)});Zt("DANCE_OF_THE_DAWN",100,{startOnHotbar:!1,potency:1e3,recastTime:e=>e.config.adjustedSksGCD(),falloff:.6,applicationDelay:.44,validateAttempt:e=>e.hasResourceAvailable("ESPRIT_GAUGE",50)&&!sn(e),highlightIf:e=>e.hasResourceAvailable("ESPRIT_GAUGE",50),onConfirm:e=>{e.resources.get("ESPRIT_GAUGE").consume(50),e.tryConsumeResource("DANCE_OF_THE_DAWN_READY")}});Zt("LAST_DANCE",92,{potency:540,recastTime:e=>e.config.adjustedSksGCD(),falloff:.6,applicationDelay:1.26,validateAttempt:e=>e.hasResourceAvailable("LAST_DANCE_READY")&&!sn(e),highlightIf:e=>e.hasResourceAvailable("LAST_DANCE_READY"),onConfirm:e=>e.tryConsumeResource("LAST_DANCE_READY")});Zt("STANDARD_STEP",15,{replaceIf:[{newSkill:"STANDARD_FINISH",condition:e=>e.hasResourceAvailable("STANDARD_STEP")&&e.getCurrentDanceStatus()===0},{newSkill:"SINGLE_STANDARD_FINISH",condition:e=>e.hasResourceAvailable("STANDARD_STEP")&&e.getCurrentDanceStatus()===1},{newSkill:"DOUBLE_STANDARD_FINISH",condition:e=>e.hasResourceAvailable("STANDARD_STEP")&&e.getCurrentDanceStatus()===2},{newSkill:"FINISHING_MOVE",condition:e=>e.hasResourceAvailable("FINISHING_MOVE_READY")}],validateAttempt:e=>!sn(e),onConfirm:e=>e.gainProc("STANDARD_STEP"),recastTime:1.5,secondaryCooldown:{cdName:"cd_STANDARD_STEP",cooldown:30,maxCharges:1}});Zt("FINISHING_MOVE",96,{startOnHotbar:!1,potency:850,recastTime:e=>e.config.adjustedSksGCD(),falloff:.6,applicationDelay:2.05,onConfirm:e=>{e.applyStandardFinish(2),e.tryConsumeResource("FINISHING_MOVE_READY")},secondaryCooldown:{cdName:"cd_STANDARD_STEP",cooldown:30,maxCharges:1},validateAttempt:e=>e.hasResourceAvailable("FINISHING_MOVE_READY")&&!sn(e),highlightIf:e=>e.hasResourceAvailable("FINISHING_MOVE_READY")});const aG=[{skill:"STANDARD_FINISH",potency:360},{skill:"SINGLE_STANDARD_FINISH",potency:540},{skill:"DOUBLE_STANDARD_FINISH",potency:[["NEVER",800],["DYNAMIC_DANCER",850]]}];aG.forEach(e=>{Zt(e.skill,15,{assetPath:"DNC/Standard Finish.png",startOnHotbar:!1,potency:e.potency,falloff:.6,applicationDelay:.54,onConfirm:t=>{const a=t.getCurrentDanceStatus();t.tryConsumeResource("STANDARD_STEP"),t.tryConsumeResource("STANDARD_DANCE",!0),a!==0&&t.applyStandardFinish(a)},recastTime:1.5,validateAttempt:t=>t.hasResourceAvailable("STANDARD_STEP"),highlightIf:t=>t.hasResourceAvailable("STANDARD_STEP")&&t.getCurrentDanceStatus()===2})});xi("FLOURISH",72,"cd_FLOURISH",{cooldown:60,requiresCombat:!0,validateAttempt:e=>!sn(e),onConfirm:e=>{e.gainProc("FLOURISHING_SYMMETRY"),e.gainProc("FLOURISHING_FLOW"),e.gainProc("THREEFOLD_FAN_DANCE"),e.hasTraitUnlocked("ENHANCED_FLOURISH")&&e.gainProc("FOURFOLD_FAN_DANCE"),e.hasTraitUnlocked("ENHANCED_FLOURISH_II")&&e.gainProc("FINISHING_MOVE_READY")}});xi("FAN_DANCE_III",66,"cd_FAN_DANCE_III",{potency:[["NEVER",200],["DYNAMIC_DANCER",220]],cooldown:1,falloff:.6,applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("THREEFOLD_FAN_DANCE")&&!sn(e),highlightIf:e=>e.hasResourceAvailable("THREEFOLD_FAN_DANCE"),onConfirm:e=>e.tryConsumeResource("THREEFOLD_FAN_DANCE")});xi("FAN_DANCE_IV",86,"cd_FAN_DANCE_IV",{potency:[["NEVER",300],["DYNAMIC_DANCER",460]],falloff:.6,cooldown:1,applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("FOURFOLD_FAN_DANCE")&&!sn(e),highlightIf:e=>e.hasResourceAvailable("FOURFOLD_FAN_DANCE"),onConfirm:e=>e.tryConsumeResource("FOURFOLD_FAN_DANCE")});Zt("TECHNICAL_STEP",70,{replaceIf:[{newSkill:"TECHNICAL_FINISH",condition:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===0},{newSkill:"SINGLE_TECHNICAL_FINISH",condition:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===1},{newSkill:"DOUBLE_TECHNICAL_FINISH",condition:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===2},{newSkill:"TRIPLE_TECHNICAL_FINISH",condition:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===3},{newSkill:"QUADRUPLE_TECHNICAL_FINISH",condition:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===4},{newSkill:"TILLANA",condition:e=>e.hasResourceAvailable("FLOURISHING_FINISH")}],validateAttempt:e=>!sn(e),onConfirm:e=>e.gainProc("TECHNICAL_STEP"),recastTime:1.5,falloff:.75,secondaryCooldown:{cdName:"cd_TECHNICAL_STEP",cooldown:120,maxCharges:1}});Zt("TILLANA",82,{startOnHotbar:!1,potency:600,recastTime:e=>e.config.adjustedSksGCD(),falloff:.6,applicationDelay:.84,onConfirm:e=>{e.gainResource("ESPRIT_GAUGE",50),e.tryConsumeResource("FLOURISHING_FINISH")},validateAttempt:e=>e.hasResourceAvailable("FLOURISHING_FINISH")&&!sn(e),highlightIf:e=>e.hasResourceAvailable("FLOURISHING_FINISH")});Zt("TECHNICAL_FINISH",70,{startOnHotbar:!1,potency:350,applicationDelay:.54,onConfirm:e=>{e.tryConsumeResource("TECHNICAL_STEP"),e.tryConsumeResource("TECHNICAL_DANCE",!0)},recastTime:1.5,validateAttempt:e=>e.hasResourceAvailable("TECHNICAL_STEP")});const iG=[{skill:"TECHNICAL_FINISH",potency:350},{skill:"SINGLE_TECHNICAL_FINISH",potency:540},{skill:"DOUBLE_TECHNICAL_FINISH",potency:720},{skill:"TRIPLE_TECHNICAL_FINISH",potency:900},{skill:"QUADRUPLE_TECHNICAL_FINISH",potency:[["NEVER",1200],["DYNAMIC_DANCER",1300]]}];iG.forEach(e=>{Zt(e.skill,70,{assetPath:"DNC/Technical Finish.png",startOnHotbar:!1,potency:e.potency,applicationDelay:.54,falloff:.6,onConfirm:t=>{const a=t.getCurrentDanceStatus();t.tryConsumeResource("TECHNICAL_STEP"),t.tryConsumeResource("TECHNICAL_DANCE",!0),a!==0&&(t.gainProc("TECHNICAL_FINISH"),t.hasTraitUnlocked("ESPRIT")&&t.gainProc("ESPRIT_TECHNICAL"),t.gainStatus("TECHNICAL_BONUS",a),t.hasTraitUnlocked("ENHANCED_TECHNICAL_FINISH")&&t.gainProc("FLOURISHING_FINISH"),t.hasTraitUnlocked("ENHANCED_TECHNICAL_FINISH_II")&&t.gainProc("DANCE_OF_THE_DAWN_READY"))},recastTime:1.5,validateAttempt:t=>t.hasResourceAvailable("TECHNICAL_STEP"),highlightIf:t=>t.hasResourceAvailable("TECHNICAL_STEP")&&t.getCurrentDanceStatus()===4})});S0("DEVILMENT",62,"cd_DEVILMENT",{replaceIf:[{newSkill:"STARFALL_DANCE",condition:e=>e.hasResourceAvailable("FLOURISHING_STARFALL")}],rscType:"DEVILMENT",applicationDelay:0,cooldown:120,validateAttempt:e=>!sn(e),onApplication:e=>{e.hasTraitUnlocked("ENHANCED_DEVILMENT")&&e.gainProc("FLOURISHING_STARFALL")}});Zt("STARFALL_DANCE",90,{startOnHotbar:!1,potency:600,recastTime:e=>e.config.adjustedSksGCD(),falloff:.75,applicationDelay:.89,validateAttempt:e=>e.hasResourceAvailable("FLOURISHING_STARFALL")&&!sn(e),highlightIf:e=>e.hasResourceAvailable("FLOURISHING_STARFALL"),onConfirm:e=>e.tryConsumeResource("FLOURISHING_STARFALL")});Zt("WINDMILL",15,{replaceIf:[m0],potency:120,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.62,onConfirm:e=>{e.maybeGainProc("SILKEN_SYMMETRY"),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",5)}});Zt("BLADESHOWER",25,{replaceIf:[A0],potency:100,recastTime:e=>e.config.adjustedSksGCD(),combo:{potency:160,resource:"WINDMILL_COMBO",resourceValue:1},falloff:0,applicationDelay:.62,onConfirm:e=>{e.gainProcIfCombo("SILKEN_FLOW",e.hasResourceExactly("WINDMILL_COMBO",1)),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",5)},highlightIf:e=>e.resources.get("WINDMILL_COMBO").availableAmount()===1});Zt("RISING_WINDMILL",35,{replaceIf:[R0],potency:160,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("SILKEN_SYMMETRY")||e.hasResourceAvailable("FLOURISHING_SYMMETRY"),onConfirm:e=>{e.hasResourceAvailable("SILKEN_SYMMETRY")?e.tryConsumeResource("SILKEN_SYMMETRY"):e.tryConsumeResource("FLOURISHING_SYMMETRY"),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",10),e.maybeGainResource("FEATHER_GAUGE",1)},highlightIf:e=>e.hasResourceAvailable("SILKEN_SYMMETRY")||e.hasResourceAvailable("FLOURISHING_SYMMETRY")});Zt("BLOODSHOWER",45,{replaceIf:[T0],potency:200,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("SILKEN_FLOW")||e.hasResourceAvailable("FLOURISHING_FLOW"),onConfirm:e=>{e.hasResourceAvailable("SILKEN_FLOW")?e.tryConsumeResource("SILKEN_FLOW"):e.tryConsumeResource("FLOURISHING_FLOW"),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",10),e.maybeGainResource("FEATHER_GAUGE",1)},highlightIf:e=>e.hasResourceAvailable("SILKEN_FLOW")||e.hasResourceAvailable("FLOURISHING_FLOW")});xi("FAN_DANCE_II",30,"cd_FAN_DANCE_II",{potency:100,cooldown:1,falloff:0,applicationDelay:.54,validateAttempt:e=>e.hasResourceAvailable("FEATHER_GAUGE")&&!sn(e),highlightIf:e=>e.hasResourceAvailable("FEATHER_GAUGE"),onConfirm:e=>{e.tryConsumeResource("FEATHER_GAUGE"),e.maybeGainProc("THREEFOLD_FAN_DANCE")}});xi("CURING_WALTZ",52,"cd_CURING_WALTZ",{cooldown:60,applicationDelay:.58});xi("IMPROVISATION",80,"cd_IMPROVISATION",{replaceIf:[{newSkill:"IMPROVISED_FINISH",condition:e=>e.hasResourceAvailable("IMPROVISATION")}],cooldown:120,applicationDelay:.89,validateAttempt:e=>!sn(e),onConfirm:e=>{e.gainProc("IMPROVISATION"),e.gainProc("IMPROVISATION_REGEN");const t=()=>{e.hasResourceAvailable("IMPROVISATION")&&(e.resources.get("RISING_RHYTHM").gain(1),e.gainProc("IMPROVISATION_REGEN"),e.resources.addResourceEvent({rscType:"RISING_RHYTHM",name:"rising rhythm tic",delay:3,fnOnRsc:a=>t()}))};e.resources.addResourceEvent({rscType:"RISING_RHYTHM",name:"rising rhythm tic",delay:3,fnOnRsc:a=>t()}),e.resources.addResourceEvent({rscType:"IMPROVISATION",name:"improvisation timeout",delay:Ut("DNC","IMPROVISATION").maxTimeout,fnOnRsc:a=>{a.consume(1),e.tryConsumeResource("RISING_RHYTHM",!0)}})}});xi("IMPROVISED_FINISH",80,"cd_IMPROVISED_FINISH",{startOnHotbar:!1,cooldown:120,applicationDelay:.71,validateAttempt:e=>!sn(e),onConfirm:e=>e.gainProc("IMPROVISED_FINISH")});xi("EN_AVANT",50,"cd_EN_AVANT",{cooldown:30,maxCharges:3,animationLock:Wt});S0("SHIELD_SAMBA",56,"cd_SHIELD_SAMBA",{rscType:"SHIELD_SAMBA",maxCharges:1,cooldown:90,applicationDelay:0});xi("CLOSED_POSITION",60,"cd_CLOSED_POSITION",{replaceIf:[{newSkill:"ENDING",condition:e=>e.hasResourceAvailable("CLOSED_POSITION")}],cooldown:30,maxCharges:1,applicationDelay:0,onConfirm:e=>{e.resources.get("CLOSED_POSITION").gain(1),e.resources.get("DANCE_PARTNER").gain(1)},validateAttempt:e=>!e.hasResourceAvailable("CLOSED_POSITION"),secondaryCooldown:{cdName:"cd_ENDING",cooldown:1,maxCharges:1}});xi("ENDING",60,"cd_ENDING",{startOnHotbar:!1,cooldown:1,maxCharges:1,applicationDelay:0,onConfirm:e=>{e.tryConsumeResource("CLOSED_POSITION",!0),e.tryConsumeResource("DANCE_PARTNER",!0),e.tryConsumeResource("STANDARD_FINISH_PARTNER",!0),e.tryConsumeResource("ESPRIT_PARTNER",!0)},secondaryCooldown:{cdName:"cd_CLOSED_POSITION",cooldown:30,maxCharges:1}});const g0=["CHAOS_THRUST_DOT","CHAOTIC_SPRING_DOT"],oG=Object.keys(GR).filter(e=>!g0.includes(e));Object.keys(GR).forEach(e=>zt(e,`DRG/${Ge[e].name}.png`));class lG extends Xt{jobSpecificOtherTargetedBuffViewProps(){return[...g0.flatMap(t=>this.makeTargetedTimers(t))]}jobSpecificSelfTargetedBuffViewProps(){return oG.map(t=>this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){const a=this.state.resources,o=a.get("DRG_CHAOS_COMBO_TRACKER"),s=a.get("DRG_HEAVENS_COMBO_TRACKER"),c=a.get("DRG_AOE_COMBO_TRACKER"),d=a.get("FIRSTMINDS_FOCUS").availableAmount(),f=a.get("LIFE_OF_THE_DRAGON"),h=f.available(1)?f.pendingChange?.timeTillEvent:void 0,m=o.available(1)?o.pendingChange?.timeTillEvent:s.available(1)?s.pendingChange?.timeTillEvent:c.available(1)?c.pendingChange?.timeTillEvent:void 0;return[{kind:"bar",name:N({en:"Combo Timer",zh:""}),color:t.drg.drgComboTimer,progress:m?m/30:0,valueString:m?.toFixed(3)??"N/A"},{kind:"bar",name:N({en:"Life of the Dragon"}),color:t.drg.lifeOfTheDragonBar,progress:h?h/20:0,valueString:h?h.toFixed(3):"N/A"},{kind:"counter",name:N({en:"Firstmind's Focus"}),color:t.drg.firstmindsFocusStacks,currentStacks:d,maxStacks:2}]}}const ea=(e,t,a)=>{Ve("DRG",e,t,a??{})};ea("POWER_SURGE",1,{timeout:30});ea("LIFE_SURGE",1,{timeout:5.52,warnOnTimeout:!0});ea("ENHANCED_PIERCING_TALON",1,{timeout:15.62});ea("LANCE_CHARGE",1,{timeout:20});ea("DIVE_READY",1,{timeout:15.46,warnOnTimeout:!0});ea("CHAOS_THRUST_DOT",1,{timeout:24});ea("BATTLE_LITANY",1,{timeout:20});ea("LIFE_OF_THE_DRAGON",1,{timeout:20});ea("NASTROND_READY",1,{timeout:20,warnOnTimeout:!0});ea("DRACONIAN_FIRE",1,{timeout:30});ea("CHAOTIC_SPRING_DOT",1,{timeout:24});ea("FIRSTMINDS_FOCUS",2,{warnOnOvercap:!0});ea("DRAGONS_FLIGHT",1,{timeout:30.79});ea("STARCROSS_READY",1,{timeout:20,warnOnTimeout:!0});ea("DRG_CHAOS_COMBO_TRACKER",4,{timeout:30});ea("DRG_HEAVENS_COMBO_TRACKER",4,{timeout:30});ea("DRG_AOE_COMBO_TRACKER",2,{timeout:30});const sG=["DOOM_SPIKE","SONIC_THRUST","COERTHAN_TORMENT","DRACONIAN_FURY"],dN=new Map([["DISEMBOWEL",1],["SPIRAL_BLOW",1],["CHAOS_THRUST",2],["CHAOTIC_SPRING",2],["WHEELING_THRUST",3]]),hN=new Map([["VORPAL_THRUST",1],["LANCE_BARRAGE",1],["FULL_THRUST",2],["HEAVENS_THRUST",2],["FANG_AND_CLAW",3]]);class rG extends qt{constructor(t){super(t);const a=this.hasTraitUnlocked("ENHANCED_WINGED_GLIDE")?2:1,o=this.hasTraitUnlocked("ENHANCED_LIFE_SURGE")?2:1;[new Ue("cd_WINGED_GLIDE",60,a,a),new Ue("cd_LIFE_SURGE",40,o,o)].forEach(s=>this.cooldowns.set(s)),this.registerRecurringEvents([{groupedEffects:[{effectName:"CHAOS_THRUST_DOT",appliedBy:["CHAOS_THRUST"]}]},{groupedEffects:[{effectName:"CHAOTIC_SPRING_DOT",appliedBy:["CHAOTIC_SPRING"]}]}])}get statusPropsGenerator(){return new lG(this)}jobSpecificAddDamageBuffCovers(t,a){this.hasResourceAvailable("POWER_SURGE")&&t.addBuff(H.PowerSurge),this.hasResourceAvailable("LANCE_CHARGE")&&t.addBuff(H.LanceCharge),this.hasResourceAvailable("LIFE_OF_THE_DRAGON")&&t.addBuff(H.LifeOfTheDragon),this.hasResourceAvailable("BATTLE_LITANY")&&t.addBuff(H.BattleLitany),a.name==="PIERCING_TALON"&&this.hasResourceAvailable("ENHANCED_PIERCING_TALON")&&t.addBuff(H.EnhancedPiercingTalon),a.cdName==="cd_GCD"&&this.hasResourceAvailable("LIFE_SURGE")&&t.addBuff(H.LifeSurge)}pushUniversalModifiers(t){this.hasResourceAvailable("POWER_SURGE")&&t.push(J.PowerSurge),this.hasResourceAvailable("LANCE_CHARGE")&&t.push(J.LanceCharge),this.hasResourceAvailable("LIFE_OF_THE_DRAGON")&&t.push(J.LifeOfTheDragon),this.hasResourceAvailable("BATTLE_LITANY")&&t.push(J.BattleLitany)}fixDRGComboState(t){if(this.tryConsumeResource("DRACONIAN_FIRE",!0),sG.includes(t)){this.tryConsumeResource("DRG_CHAOS_COMBO_TRACKER",!0),this.tryConsumeResource("DRG_HEAVENS_COMBO_TRACKER",!0);let a=0;t==="DOOM_SPIKE"||t==="DRACONIAN_FURY"?a=1:t==="SONIC_THRUST"&&this.hasResourceExactly("DRG_AOE_COMBO_TRACKER",1)&&(a=2),this.setComboState("DRG_AOE_COMBO_TRACKER",a);return}if(this.tryConsumeResource("DRG_AOE_COMBO_TRACKER",!0),t==="TRUE_THRUST"||t==="RAIDEN_THRUST"){this.tryConsumeResource("DRG_CHAOS_COMBO_TRACKER",!0),this.tryConsumeResource("DRG_HEAVENS_COMBO_TRACKER",!0),this.setComboState("DRG_CHAOS_COMBO_TRACKER",1),this.setComboState("DRG_HEAVENS_COMBO_TRACKER",1);return}if(dN.has(t)){const a=dN.get(t);this.tryConsumeResource("DRG_HEAVENS_COMBO_TRACKER",!0),this.setComboState("DRG_CHAOS_COMBO_TRACKER",this.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",a)?a+1:0)}else if(hN.has(t)){const a=hN.get(t);this.tryConsumeResource("DRG_CHAOS_COMBO_TRACKER",!0),this.setComboState("DRG_HEAVENS_COMBO_TRACKER",this.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",a)?a+1:0)}else t==="DRAKESBANE"&&(this.tryConsumeResource("DRG_HEAVENS_COMBO_TRACKER",!0),this.tryConsumeResource("DRG_CHAOS_COMBO_TRACKER",!0))}checkCombo(t){return this.hasResourceAvailable(t)}gainScale(t){this.resources.get("FIRSTMINDS_FOCUS").gain(t)}refreshBuff(t,a){this.addEvent(new Oe("gain buff",a,()=>{this.resources.get(t).gain(1),this.enqueueResourceDrop(t)}))}}const jn=(e,t,a)=>{const o=Le(a.onConfirm,s=>{e!=="PIERCING_TALON"&&s.fixDRGComboState(e),s.tryConsumeResource("LIFE_SURGE")});return on("DRG",e,t,{...a,onConfirm:o,recastTime:s=>s.config.adjustedSksGCD(),jobPotencyModifiers:s=>{const c=a.jobPotencyModifiers?.(s)??[];return e==="PIERCING_TALON"&&s.hasResourceAvailable("ENHANCED_PIERCING_TALON")&&c.push(J.EnhancedPiercingTalon),s.pushUniversalModifiers(c),s.hasResourceAvailable("LIFE_SURGE")&&c.push(J.LifeSurge),c}})},gi=(e,t,a,o)=>at("DRG",e,t,a,{...o,onConfirm:o.onConfirm,jobPotencyModifiers:s=>{const c=[];return s.pushUniversalModifiers(c),c}}),cG={newSkill:"DRAKESBANE",condition:e=>e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",4)},uG={newSkill:"DRAKESBANE",condition:e=>e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",4)},dG={newSkill:"RAIDEN_THRUST",condition:e=>e.resources.get("DRACONIAN_FIRE").available(1)},hG={newSkill:"TRUE_THRUST",condition:e=>!e.resources.get("DRACONIAN_FIRE").available(1)},fG={newSkill:"DRACONIAN_FURY",condition:e=>e.resources.get("DRACONIAN_FIRE").available(1)},EG={newSkill:"DOOM_SPIKE",condition:e=>!e.resources.get("DRACONIAN_FIRE").available(1)},mG={newSkill:"STARCROSS",condition:e=>e.hasResourceAvailable("STARCROSS_READY")&&e.hasResourceAvailable("LIFE_OF_THE_DRAGON")},AG={newSkill:"STARDIVER",condition:e=>!e.hasResourceAvailable("STARCROSS_READY")};jn("PIERCING_TALON",15,{potency:[["NEVER",150],["LANCE_MASTERY",200]],applicationDelay:.85,onConfirm:e=>{e.tryConsumeResource("ENHANCED_PIERCING_TALON")},highlightIf:e=>e.hasResourceAvailable("ENHANCED_PIERCING_TALON")});jn("TRUE_THRUST",1,{replaceIf:[dG],potency:[["NEVER",200],["LANCE_MASTERY",230]],applicationDelay:.76});jn("RAIDEN_THRUST",76,{startOnHotbar:!1,replaceIf:[hG],potency:[["NEVER",280],["MELEE_MASTERY_DRG",320]],applicationDelay:.62,validateAttempt:e=>e.resources.get("DRACONIAN_FIRE").available(1),highlightIf:e=>e.resources.get("DRACONIAN_FIRE").available(1),onConfirm:e=>{e.hasTraitUnlocked("LANCE_MASTERY_III")&&e.gainScale(1)}});jn("DISEMBOWEL",18,{autoUpgrade:{trait:"LANCE_MASTERY_IV",otherSkill:"SPIRAL_BLOW"},applicationDelay:1.65,potency:[["NEVER",100],["LANCE_MASTERY",140]],combo:{potency:[["NEVER",220],["LANCE_MASTERY",250]],resource:"DRG_CHAOS_COMBO_TRACKER",resourceValue:1},onConfirm:e=>{e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",1)&&(e.resources.get("POWER_SURGE").gain(1),e.enqueueResourceDrop("POWER_SURGE",31.63))},highlightIf:e=>e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",1)});jn("SPIRAL_BLOW",96,{autoDowngrade:{trait:"LANCE_MASTERY_IV",otherSkill:"DISEMBOWEL"},applicationDelay:1.38,potency:140,combo:{potency:[["NEVER",300]],resource:"DRG_CHAOS_COMBO_TRACKER",resourceValue:1},onConfirm:e=>{e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",1)&&(e.resources.get("POWER_SURGE").gain(1),e.enqueueResourceDrop("POWER_SURGE",31.38))},highlightIf:e=>e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",1)});jn("CHAOS_THRUST",50,{autoUpgrade:{trait:"LANCE_MASTERY_II",otherSkill:"CHAOTIC_SPRING"},applicationDelay:1.65,potency:100,combo:{potency:220,resource:"DRG_CHAOS_COMBO_TRACKER",resourceValue:2},positional:{potency:140,comboPotency:260,location:"rear"},onConfirm:(e,t)=>{if(e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",2)){const a=[];e.pushUniversalModifiers(a),e.addDoTPotencies({node:t,effectName:"CHAOS_THRUST_DOT",skillName:"CHAOS_THRUST",tickPotency:40,speedStat:"sks",modifiers:a}),e.addEvent(new Oe("apply chaos thrust dot",1.65,()=>{e.applyDoT("CHAOS_THRUST_DOT",t)}))}},highlightIf:e=>e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",2)});jn("CHAOTIC_SPRING",86,{autoDowngrade:{trait:"LANCE_MASTERY_II",otherSkill:"CHAOS_THRUST"},applicationDelay:.45,potency:140,combo:{potency:300,resource:"DRG_CHAOS_COMBO_TRACKER",resourceValue:2},positional:{potency:180,comboPotency:340,location:"rear"},onConfirm:(e,t)=>{if(e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",2)){const a=[];e.pushUniversalModifiers(a),e.addDoTPotencies({node:t,effectName:"CHAOTIC_SPRING_DOT",skillName:"CHAOTIC_SPRING",tickPotency:45,speedStat:"sks",modifiers:a}),e.addEvent(new Oe("apply chaotic spring dot",.45,()=>{e.applyDoT("CHAOTIC_SPRING_DOT",t)}))}},highlightIf:e=>e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",2)});jn("WHEELING_THRUST",58,{replaceIf:[cG],applicationDelay:.67,potency:[["NEVER",100],["MELEE_MASTERY_DRG",140]],combo:{potency:[["NEVER",260],["MELEE_MASTERY_DRG",300]],resource:"DRG_CHAOS_COMBO_TRACKER",resourceValue:3},positional:{potency:[["NEVER",140],["MELEE_MASTERY_DRG",180]],comboPotency:[["NEVER",300],["MELEE_MASTERY_DRG",340]],location:"rear"},highlightIf:e=>e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",3)});jn("VORPAL_THRUST",4,{autoUpgrade:{trait:"LANCE_MASTERY_IV",otherSkill:"LANCE_BARRAGE"},applicationDelay:1.02,potency:[["NEVER",100],["LANCE_MASTERY",130]],combo:{potency:[["NEVER",250],["LANCE_MASTERY",280]],resource:"DRG_HEAVENS_COMBO_TRACKER",resourceValue:1},highlightIf:e=>e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",1)});jn("LANCE_BARRAGE",96,{autoDowngrade:{trait:"LANCE_MASTERY_IV",otherSkill:"VORPAL_THRUST"},applicationDelay:.94,potency:130,combo:{potency:340,resource:"DRG_HEAVENS_COMBO_TRACKER",resourceValue:1},highlightIf:e=>e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",1)});jn("FULL_THRUST",26,{autoUpgrade:{trait:"LANCE_MASTERY_II",otherSkill:"HEAVENS_THRUST"},applicationDelay:1.12,potency:100,combo:{potency:380,resource:"DRG_HEAVENS_COMBO_TRACKER",resourceValue:2},highlightIf:e=>e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",2)});jn("HEAVENS_THRUST",86,{autoDowngrade:{trait:"LANCE_MASTERY_II",otherSkill:"FULL_THRUST"},applicationDelay:.71,potency:[["NEVER",100],["MELEE_MASTERY_DRG",160]],combo:{potency:[["NEVER",400],["MELEE_MASTERY_DRG",460]],resource:"DRG_HEAVENS_COMBO_TRACKER",resourceValue:2},highlightIf:e=>e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",2)});jn("FANG_AND_CLAW",56,{replaceIf:[uG],applicationDelay:.62,potency:[["NEVER",100],["MELEE_MASTERY_DRG",140]],combo:{potency:[["NEVER",260],["MELEE_MASTERY_DRG",300]],resource:"DRG_HEAVENS_COMBO_TRACKER",resourceValue:3},positional:{potency:[["NEVER",140],["MELEE_MASTERY_DRG",180]],comboPotency:[["NEVER",300],["MELEE_MASTERY_DRG",340]],location:"flank"},highlightIf:e=>e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",3)});jn("DRAKESBANE",64,{startOnHotbar:!1,applicationDelay:1,potency:[["NEVER",380],["LANCE_MASTERY_II",400],["MELEE_MASTERY_DRG",460]],validateAttempt:e=>e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",4)||e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",4),onConfirm:e=>{(e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",4)||e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",4))&&e.refreshBuff("DRACONIAN_FIRE",0)},highlightIf:e=>e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",4)||e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",4)});jn("DOOM_SPIKE",40,{replaceIf:[fG],potency:110,falloff:0,applicationDelay:1.29});jn("DRACONIAN_FURY",82,{replaceIf:[EG],startOnHotbar:!1,potency:130,falloff:0,applicationDelay:.76,validateAttempt:e=>e.resources.get("DRACONIAN_FIRE").available(1),highlightIf:e=>e.resources.get("DRACONIAN_FIRE").available(1),onConfirm:e=>{e.hasTraitUnlocked("LANCE_MASTERY_III")&&e.gainScale(1)}});jn("SONIC_THRUST",62,{applicationDelay:.8,potency:100,combo:{potency:120,resource:"DRG_AOE_COMBO_TRACKER",resourceValue:1},falloff:0,highlightIf:e=>e.hasResourceExactly("DRG_AOE_COMBO_TRACKER",1),onConfirm:e=>{e.hasResourceExactly("DRG_AOE_COMBO_TRACKER",1)&&(e.resources.get("POWER_SURGE").gain(1),e.enqueueResourceDrop("POWER_SURGE",30.79))}});jn("COERTHAN_TORMENT",72,{applicationDelay:.49,potency:100,combo:{potency:150,resource:"DRG_AOE_COMBO_TRACKER",resourceValue:2},falloff:0,highlightIf:e=>e.hasResourceExactly("DRG_AOE_COMBO_TRACKER",2),onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_COERTHAN_TORMENT")&&e.hasResourceExactly("DRG_AOE_COMBO_TRACKER",2)&&e.refreshBuff("DRACONIAN_FIRE",0)}});Ye("DRG","LIFE_SURGE",6,"cd_LIFE_SURGE",{rscType:"LIFE_SURGE",applicationDelay:0,cooldown:40,maxCharges:2});gi("WYRMWIND_THRUST",90,"cd_WYRMWIND_THRUST",{applicationDelay:1.2,validateAttempt:e=>e.hasResourceExactly("FIRSTMINDS_FOCUS",2),highlightIf:e=>e.hasResourceExactly("FIRSTMINDS_FOCUS",2),potency:[["NEVER",420],["MELEE_MASTERY_DRG",440]],falloff:.5,cooldown:10,onConfirm:e=>{e.tryConsumeResource("FIRSTMINDS_FOCUS",!0)}});Ye("DRG","LANCE_CHARGE",30,"cd_LANCE_CHARGE",{rscType:"LANCE_CHARGE",applicationDelay:.62,cooldown:60});Ye("DRG","BATTLE_LITANY",52,"cd_BATTLE_LITANY",{rscType:"BATTLE_LITANY",applicationDelay:.62,cooldown:120});gi("GEIRSKOGUL",60,"cd_GEIRSKOGUL",{applicationDelay:.67,potency:[["NEVER",200],["LANCE_MASTERY_III",280]],falloff:.5,cooldown:60,onConfirm:e=>{e.refreshBuff("LIFE_OF_THE_DRAGON",0),e.refreshBuff("NASTROND_READY",0),e.addEvent(new Oe("drop starcross when life drops",20,()=>{e.tryConsumeResource("STARCROSS_READY")}))}});gi("NASTROND",70,"cd_NASTROND",{applicationDelay:.76,potency:[["NEVER",600],["LANCE_MASTERY_III",720]],falloff:.5,cooldown:2,validateAttempt:e=>e.resources.get("LIFE_OF_THE_DRAGON").available(1)&&e.resources.get("NASTROND_READY").available(1),highlightIf:e=>e.resources.get("LIFE_OF_THE_DRAGON").available(1)&&e.resources.get("NASTROND_READY").available(1),onConfirm:e=>{e.tryConsumeResource("NASTROND_READY")}});gi("JUMP",30,"cd_JUMP",{autoUpgrade:{trait:"JUMP_MASTERY",otherSkill:"HIGH_JUMP"},applicationDelay:.49,animationLock:.8,potency:320,cooldown:30,onConfirm:e=>{e.refreshBuff("DIVE_READY",0)}});gi("HIGH_JUMP",74,"cd_HIGH_JUMP",{autoDowngrade:{trait:"JUMP_MASTERY",otherSkill:"JUMP"},applicationDelay:.49,animationLock:.8,potency:400,cooldown:30,onConfirm:e=>{e.refreshBuff("DIVE_READY",0)}});gi("MIRAGE_DIVE",68,"cd_MIRAGE_DIVE",{applicationDelay:.8,validateAttempt:e=>e.hasResourceAvailable("DIVE_READY"),highlightIf:e=>e.hasResourceAvailable("DIVE_READY"),potency:380,cooldown:1,onConfirm:e=>{e.tryConsumeResource("DIVE_READY")}});gi("DRAGONFIRE_DIVE",50,"cd_DRAGONFIRE_DIVE",{applicationDelay:.8,animationLock:.8,potency:500,falloff:.5,cooldown:120,onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_DRAGONFIRE_DIVE")&&e.refreshBuff("DRAGONS_FLIGHT",0)}});gi("RISE_OF_THE_DRAGON",92,"cd_RISE_OF_THE_DRAGON",{applicationDelay:1.16,potency:550,falloff:.5,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("DRAGONS_FLIGHT"),highlightIf:e=>e.hasResourceAvailable("DRAGONS_FLIGHT"),onConfirm:e=>{e.tryConsumeResource("DRAGONS_FLIGHT")}});gi("STARDIVER",80,"cd_STARDIVER",{replaceIf:[mG],applicationDelay:1.29,animationLock:1.5,potency:[["NEVER",720],["MELEE_MASTERY_DRG",840]],falloff:.4,cooldown:30,validateAttempt:e=>e.hasResourceAvailable("LIFE_OF_THE_DRAGON"),onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_STARDIVER")&&e.refreshBuff("STARCROSS_READY",0)}});gi("STARCROSS",100,"cd_STARCROSS",{startOnHotbar:!1,replaceIf:[AG],applicationDelay:.98,potency:1e3,falloff:.4,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("STARCROSS_READY")&&e.hasResourceAvailable("LIFE_OF_THE_DRAGON"),highlightIf:e=>e.hasResourceAvailable("STARCROSS_READY")&&e.hasResourceAvailable("LIFE_OF_THE_DRAGON"),onConfirm:e=>{e.tryConsumeResource("STARCROSS_READY")}});gi("ELUSIVE_JUMP",35,"cd_ELUSIVE_JUMP",{potency:0,applicationDelay:0,animationLock:1,cooldown:30,onConfirm:e=>{e.refreshBuff("ENHANCED_PIERCING_TALON",0)}});gi("WINGED_GLIDE",45,"cd_WINGED_GLIDE",{potency:0,applicationDelay:0,animationLock:Wt,cooldown:60,maxCharges:2});const I0=["SONIC_BREAK_DOT","BOW_SHOCK_DOT"],RG=Object.keys(FR).filter(e=>!I0.includes(e));Object.keys(FR).forEach(e=>zt(e,`GNB/${Ge[e].name}.png`));class TG extends Xt{jobSpecificOtherTargetedBuffViewProps(){return[...I0.flatMap(t=>this.makeTargetedTimers(t))]}jobSpecificSelfTargetedBuffViewProps(){return RG.map(t=>t==="ROYAL_GUARD"?this.makeCommonTimerless(t):this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){const a=this.state.resources,o=a.get("GNB_COMBO_TRACKER"),s=a.get("GNB_AOE_COMBO_TRACKER"),c=a.get("POWDER_GAUGE").availableAmount(),d=a.get("ROYAL_GUARD").availableAmount(),f=o.available(1)?o.pendingChange?.timeTillEvent:s.available(1)?s.pendingChange?.timeTillEvent:void 0,h=a.get("BLOODFEST").available(1)?2:1;return[{kind:"bar",name:N({en:"Combo Timer",zh:""}),color:t.rdm.manaStack,progress:f?f/30:0,valueString:f?.toFixed(3)??"N/A"},{kind:"counter",name:N({en:"Royal Guard",zh:""}),color:t.rdm.manaStack,currentStacks:d,maxStacks:1},{kind:"counter",name:N({en:"Powder Gauge",zh:""}),color:t.rdm.manaStack,currentStacks:c,maxStacks:(this.state.hasTraitUnlocked("CARTRIDGE_CHARGE_II")?3:2)*h}]}}const Ot=(e,t,a)=>{Ve("GNB",e,t,a??{})};Ot("POWDER_GAUGE",3,{warnOnOvercap:!0});Ot("ROYAL_GUARD",1);Ot("NO_MERCY",1,{timeout:20});Ot("AURORA",1,{timeout:18});Ot("BOW_SHOCK_DOT",1,{timeout:15});Ot("CAMOUFLAGE",1,{timeout:20});Ot("HEART_OF_CORUNDUM",1,{timeout:8});Ot("CLARITY_OF_CORUNDUM",1,{timeout:15});Ot("CATHARSIS_OF_CORUNDUM",1,{timeout:20});Ot("NEBULA",1,{timeout:15});Ot("GREAT_NEBULA",1,{timeout:15});Ot("HEART_OF_LIGHT",1,{timeout:15});Ot("HEART_OF_STONE",1,{timeout:8});Ot("READY_TO_BLAST",1,{timeout:10,warnOnTimeout:!0});Ot("READY_TO_BREAK",1,{timeout:30,warnOnTimeout:!0});Ot("READY_TO_GOUGE",1,{timeout:10,warnOnTimeout:!0});Ot("READY_TO_RAZE",1,{timeout:10,warnOnTimeout:!0});Ot("READY_TO_REIGN",1,{timeout:30,warnOnTimeout:!0});Ot("READY_TO_RIP",1,{timeout:10,warnOnTimeout:!0});Ot("READY_TO_TEAR",1,{timeout:10,warnOnTimeout:!0});Ot("SONIC_BREAK_DOT",1,{timeout:15});Ot("SUPERBOLIDE",1,{timeout:10});Ot("BRUTAL_SHELL",1,{timeout:30});Ot("GNB_COMBO_TRACKER",2,{timeout:30});Ot("GNB_AOE_COMBO_TRACKER",1,{timeout:30});Ot("GNB_GNASHING_COMBO_TRACKER",2,{timeout:30});Ot("GNB_REIGN_COMBO_TRACKER",2,{timeout:30});Ot("BLOODFEST",1,{timeout:30});const fN=["KEEN_EDGE","BRUTAL_SHELL","SOLID_BARREL"],SG=["DEMON_SLICE","DEMON_SLAUGHTER"],EN=["GNASHING_FANG","SAVAGE_CLAW","WICKED_TALON"],mN=["REIGN_OF_BEASTS","NOBLE_BLOOD","LION_HEART"];class gG extends qt{constructor(t){super(t);const a=this.hasTraitUnlocked("ENHANCED_AURORA")?2:1;[new Ue("cd_AURORA",60,a,a)].forEach(s=>this.cooldowns.set(s)),this.cooldowns.set(new Ue("cd_DOUBLE_DOWN",this.config.adjustedSksGCD(60),1,1));const o=this.hasTraitUnlocked("CARTRIDGE_CHARGE_II")?3:2;this.resources.set(new pn("POWDER_GAUGE",o,0,!0)),this.registerRecurringEvents([{groupedEffects:[{effectName:"SONIC_BREAK_DOT",appliedBy:["SONIC_BREAK"]}]},{groupedEffects:[{effectName:"BOW_SHOCK_DOT",appliedBy:["BOW_SHOCK"]}]}])}get statusPropsGenerator(){return new TG(this)}jobSpecificAddDamageBuffCovers(t,a){this.hasResourceAvailable("NO_MERCY")&&t.addBuff(H.NoMercy)}fixGNBComboState(t){if(SG.includes(t)){this.tryConsumeResource("GNB_COMBO_TRACKER",!0),this.tryConsumeResource("GNB_REIGN_COMBO_TRACKER",!0),this.tryConsumeResource("GNB_GNASHING_COMBO_TRACKER",!0),this.tryConsumeResource("GNB_AOE_COMBO_TRACKER"),t==="DEMON_SLICE"&&this.setComboState("GNB_AOE_COMBO_TRACKER",1);return}let a="GNB_COMBO_TRACKER",o=-1;fN.includes(t)?(this.tryConsumeResource("GNB_AOE_COMBO_TRACKER",!0),this.tryConsumeResource("GNB_REIGN_COMBO_TRACKER",!0),this.tryConsumeResource("GNB_GNASHING_COMBO_TRACKER",!0),o=fN.indexOf(t)):EN.includes(t)?(this.tryConsumeResource("GNB_REIGN_COMBO_TRACKER",!0),a="GNB_GNASHING_COMBO_TRACKER",o=EN.indexOf(t)):mN.includes(t)&&(this.tryConsumeResource("GNB_GNASHING_COMBO_TRACKER",!0),a="GNB_REIGN_COMBO_TRACKER",o=mN.indexOf(t));let s=0;o===0?s=1:o===1&&this.hasResourceExactly(a,1)&&(s=2),this.setComboState(a,s)}gainCartridge(t){this.resources.get("POWDER_GAUGE").gain(t)}refreshBuff(t,a){this.addEvent(new Oe("gain buff",a,()=>{this.resources.get(t).gain(1),this.enqueueResourceDrop(t)}))}}const sa=(e,t,a)=>{const o=Le(a.onConfirm,s=>{["SONIC_BREAK","BURST_STRIKE","FATED_CIRCLE","DOUBLE_DOWN","LIGHTNING_SHOT"].includes(e)||s.fixGNBComboState(e),s.tryConsumeResource("READY_TO_BLAST"),s.tryConsumeResource("READY_TO_RAZE"),s.tryConsumeResource("READY_TO_RIP"),s.tryConsumeResource("READY_TO_TEAR"),s.tryConsumeResource("READY_TO_GOUGE")});return on("GNB",e,t,{...a,onConfirm:o,recastTime:s=>s.config.adjustedSksGCD(),jobPotencyModifiers:s=>s.hasResourceAvailable("NO_MERCY")?[J.NoMercy]:[]})},rn=(e,t,a,o)=>at("GNB",e,t,a,{...o,jobPotencyModifiers:s=>s.hasResourceAvailable("NO_MERCY")?[J.NoMercy]:[]}),_0={newSkill:"GNASHING_FANG",condition:e=>e.resources.get("GNB_GNASHING_COMBO_TRACKER").availableAmount()===0},p0={newSkill:"SAVAGE_CLAW",condition:e=>e.resources.get("GNB_GNASHING_COMBO_TRACKER").availableAmount()===1},N0={newSkill:"WICKED_TALON",condition:e=>e.resources.get("GNB_GNASHING_COMBO_TRACKER").availableAmount()===2},C0={newSkill:"REIGN_OF_BEASTS",condition:e=>e.resources.get("GNB_REIGN_COMBO_TRACKER").availableAmount()===0},b0={newSkill:"NOBLE_BLOOD",condition:e=>e.resources.get("GNB_REIGN_COMBO_TRACKER").availableAmount()===1},O0={newSkill:"LION_HEART",condition:e=>e.resources.get("GNB_REIGN_COMBO_TRACKER").availableAmount()===2},IG={newSkill:"HYPERVELOCITY",condition:e=>e.hasResourceAvailable("READY_TO_BLAST")},_G={newSkill:"FATED_BRAND",condition:e=>e.hasResourceAvailable("READY_TO_RAZE")},pG={newSkill:"JUGULAR_RIP",condition:e=>e.hasResourceAvailable("READY_TO_RIP")},NG={newSkill:"ABDOMEN_TEAR",condition:e=>e.hasResourceAvailable("READY_TO_TEAR")},CG={newSkill:"EYE_GOUGE",condition:e=>e.hasResourceAvailable("READY_TO_GOUGE")},bG={newSkill:"ROYAL_GUARD",condition:e=>!e.hasResourceAvailable("ROYAL_GUARD")},OG={newSkill:"RELEASE_ROYAL_GUARD",condition:e=>e.hasResourceAvailable("ROYAL_GUARD")};sa("LIGHTNING_SHOT",15,{potency:150,applicationDelay:.72});sa("KEEN_EDGE",1,{potency:[["NEVER",150],["MELEE_MASTERY_TANK",200],["MELEE_MASTERY_II_TANK",300]],applicationDelay:.89});sa("BRUTAL_SHELL",4,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",160],["MELEE_MASTERY_II_TANK",240]],combo:{potency:[["NEVER",240],["MELEE_MASTERY_TANK",300],["MELEE_MASTERY_II_TANK",380]],resource:"GNB_COMBO_TRACKER",resourceValue:1},applicationDelay:1.07,onConfirm:e=>{e.hasResourceExactly("GNB_COMBO_TRACKER",1)&&e.refreshBuff("BRUTAL_SHELL",0)},highlightIf:e=>e.hasResourceExactly("GNB_COMBO_TRACKER",1)});sa("SOLID_BARREL",26,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",140],["MELEE_MASTERY_II_TANK",240]],combo:{potency:[["NEVER",320],["MELEE_MASTERY_TANK",360],["MELEE_MASTERY_II_TANK",460]],resource:"GNB_COMBO_TRACKER",resourceValue:2},applicationDelay:1.07,onConfirm:e=>{e.hasResourceExactly("GNB_COMBO_TRACKER",2)&&e.gainCartridge(1)},highlightIf:e=>e.hasResourceExactly("GNB_COMBO_TRACKER",2)});sa("DEMON_SLICE",10,{potency:100,falloff:0,applicationDelay:.62});sa("DEMON_SLAUGHTER",40,{potency:100,combo:{potency:160,resource:"GNB_AOE_COMBO_TRACKER",resourceValue:1},falloff:0,applicationDelay:.62,onConfirm:e=>{e.hasResourceExactly("GNB_AOE_COMBO_TRACKER",1)&&e.gainCartridge(1)},highlightIf:e=>e.hasResourceExactly("GNB_AOE_COMBO_TRACKER",1)});sa("BURST_STRIKE",30,{potency:[["NEVER",340],["MELEE_MASTERY_II_TANK",420]],applicationDelay:.71,validateAttempt:e=>e.hasResourceAvailable("POWDER_GAUGE"),onConfirm:e=>{e.tryConsumeResource("POWDER_GAUGE"),e.hasTraitUnlocked("ENHANCED_CONTINUATION")&&e.refreshBuff("READY_TO_BLAST",0)},highlightIf:e=>e.hasResourceAvailable("POWDER_GAUGE")});sa("FATED_CIRCLE",72,{potency:300,falloff:0,applicationDelay:.54,validateAttempt:e=>e.hasResourceAvailable("POWDER_GAUGE"),onConfirm:e=>{e.tryConsumeResource("POWDER_GAUGE"),e.hasTraitUnlocked("ENHANCED_CONTINUATION_II")&&e.refreshBuff("READY_TO_RAZE",0)},highlightIf:e=>e.hasResourceAvailable("POWDER_GAUGE")});rn("BLOODFEST",76,"cd_BLOODFEST",{applicationDelay:0,cooldown:60,maxCharges:1,onConfirm:e=>{const t=e.hasTraitUnlocked("CARTRIDGE_CHARGE_II")?3:2;e.gainStatus("BLOODFEST"),e.resources.set(new pn("POWDER_GAUGE",t*2,e.resources.get("POWDER_GAUGE").availableAmount(),!0)),e.addEvent(new Oe("restore bloodfest max stacks",Ut("GNB","BLOODFEST").maxTimeout,()=>{e.resources.get("POWDER_GAUGE").availableAmount()>t&&I.reportWarning({kind:"overcap",rsc:"POWDER_GAUGE"}),e.resources.set(new pn("POWDER_GAUGE",t,Math.min(e.resources.get("POWDER_GAUGE").availableAmount(),t),!0))})),e.gainCartridge(t),e.hasTraitUnlocked("ENHANCED_BLOODFEST")&&e.refreshBuff("READY_TO_REIGN",0)}});rn("NO_MERCY",2,"cd_NO_MERCY",{applicationDelay:0,cooldown:60,maxCharges:1,onConfirm:e=>{e.refreshBuff("NO_MERCY",.62),e.refreshBuff("READY_TO_BREAK",0)}});sa("SONIC_BREAK",54,{potency:340,applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("READY_TO_BREAK"),onConfirm:(e,t)=>{e.tryConsumeResource("READY_TO_BREAK");const a=[];e.hasResourceAvailable("NO_MERCY")&&a.push(J.NoMercy),e.addDoTPotencies({node:t,effectName:"SONIC_BREAK_DOT",skillName:"SONIC_BREAK",tickPotency:120,speedStat:"sks",modifiers:a})},onApplication:(e,t)=>e.applyDoT("SONIC_BREAK_DOT",t),highlightIf:e=>e.hasResourceAvailable("READY_TO_BREAK")});sa("GNASHING_FANG",60,{replaceIf:[p0,N0],potency:[["NEVER",330],["MELEE_MASTERY_II_TANK",440]],applicationDelay:.62,recastTime:e=>e.config.adjustedSksGCD(),validateAttempt:e=>e.hasResourceAvailable("POWDER_GAUGE"),onConfirm:e=>{e.refreshBuff("READY_TO_RIP",0),e.tryConsumeResource("POWDER_GAUGE")},highlightIf:e=>e.hasResourceAvailable("POWDER_GAUGE")&&!e.hasResourceAvailable("GNB_REIGN_COMBO_TRACKER"),secondaryCooldown:{cdName:"cd_GNASHING_FANG",cooldown:30,maxCharges:2}});sa("SAVAGE_CLAW",60,{startOnHotbar:!1,replaceIf:[_0,N0],potency:[["NEVER",410],["MELEE_MASTERY_II_TANK",500]],applicationDelay:.62,validateAttempt:e=>e.hasResourceExactly("GNB_GNASHING_COMBO_TRACKER",1),onConfirm:e=>{e.refreshBuff("READY_TO_TEAR",0)},highlightIf:e=>e.hasResourceExactly("GNB_GNASHING_COMBO_TRACKER",1)});sa("WICKED_TALON",60,{startOnHotbar:!1,replaceIf:[_0,p0],potency:[["NEVER",490],["MELEE_MASTERY_II_TANK",560]],applicationDelay:1.16,validateAttempt:e=>e.hasResourceExactly("GNB_GNASHING_COMBO_TRACKER",2),onConfirm:e=>{e.refreshBuff("READY_TO_GOUGE",0)},highlightIf:e=>e.hasResourceExactly("GNB_GNASHING_COMBO_TRACKER",2)});sa("DOUBLE_DOWN",90,{potency:1e3,falloff:.15,applicationDelay:.72,recastTime:e=>e.config.adjustedSksGCD(),validateAttempt:e=>e.hasResourceAvailable("POWDER_GAUGE",2),onConfirm:e=>{e.resources.get("POWDER_GAUGE").consume(2)},highlightIf:e=>e.hasResourceAvailable("POWDER_GAUGE",2),secondaryCooldown:{cdName:"cd_DOUBLE_DOWN",cooldown:60,maxCharges:1}});sa("REIGN_OF_BEASTS",100,{replaceIf:[b0,O0],potency:800,falloff:.6,applicationDelay:1.16,validateAttempt:e=>e.hasResourceAvailable("READY_TO_REIGN"),onConfirm:e=>{e.tryConsumeResource("READY_TO_REIGN")},highlightIf:e=>e.hasResourceAvailable("READY_TO_REIGN")});sa("NOBLE_BLOOD",100,{startOnHotbar:!1,replaceIf:[C0,O0],potency:900,falloff:.6,applicationDelay:1.65,validateAttempt:e=>e.hasResourceExactly("GNB_REIGN_COMBO_TRACKER",1),highlightIf:e=>e.hasResourceExactly("GNB_REIGN_COMBO_TRACKER",1)});sa("LION_HEART",100,{startOnHotbar:!1,replaceIf:[C0,b0],potency:1e3,falloff:.6,applicationDelay:1.79,validateAttempt:e=>e.hasResourceExactly("GNB_REIGN_COMBO_TRACKER",2),highlightIf:e=>e.hasResourceExactly("GNB_REIGN_COMBO_TRACKER",2)});rn("CONTINUATION",70,"cd_CONTINUATION",{replaceIf:[IG,_G,pG,NG,CG],applicationDelay:0,potency:0,cooldown:1,validateAttempt:e=>!1});rn("HYPERVELOCITY",86,"cd_HYPERVELOCITY",{startOnHotbar:!1,applicationDelay:.76,potency:[["NEVER",140],["MELEE_MASTERY_II_TANK",180]],cooldown:1,validateAttempt:e=>e.hasResourceAvailable("READY_TO_BLAST"),highlightIf:e=>e.hasResourceAvailable("READY_TO_BLAST"),onConfirm:e=>{e.tryConsumeResource("READY_TO_BLAST")}});rn("FATED_BRAND",96,"cd_FATED_BRAND",{startOnHotbar:!1,applicationDelay:1.16,potency:120,falloff:0,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("READY_TO_RAZE"),highlightIf:e=>e.hasResourceAvailable("READY_TO_RAZE"),onConfirm:e=>{e.tryConsumeResource("READY_TO_RAZE")}});rn("JUGULAR_RIP",70,"cd_JUGULAR_RIP",{startOnHotbar:!1,applicationDelay:.8,potency:[["NEVER",180],["MELEE_MASTERY_II_TANK",220]],cooldown:1,validateAttempt:e=>e.hasResourceAvailable("READY_TO_RIP"),highlightIf:e=>e.hasResourceAvailable("READY_TO_RIP"),onConfirm:e=>{e.tryConsumeResource("READY_TO_RIP")}});rn("ABDOMEN_TEAR",70,"cd_ABDOMEN_TEAR",{startOnHotbar:!1,applicationDelay:.76,potency:[["NEVER",220],["MELEE_MASTERY_II_TANK",260]],cooldown:1,validateAttempt:e=>e.hasResourceAvailable("READY_TO_TEAR"),highlightIf:e=>e.hasResourceAvailable("READY_TO_TEAR"),onConfirm:e=>{e.tryConsumeResource("READY_TO_TEAR")}});rn("EYE_GOUGE",70,"cd_EYE_GOUGE",{startOnHotbar:!1,applicationDelay:.98,potency:[["NEVER",260],["MELEE_MASTERY_II_TANK",300]],cooldown:1,validateAttempt:e=>e.hasResourceAvailable("READY_TO_GOUGE"),highlightIf:e=>e.hasResourceAvailable("READY_TO_GOUGE"),onConfirm:e=>{e.tryConsumeResource("READY_TO_GOUGE")}});rn("DANGER_ZONE",18,"cd_DANGER_ZONE",{autoUpgrade:{trait:"DANGER_ZONE_MASTERY",otherSkill:"BLASTING_ZONE"},applicationDelay:.62,potency:250,cooldown:30});rn("BLASTING_ZONE",80,"cd_BLASTING_ZONE",{startOnHotbar:!1,applicationDelay:.62,potency:800,cooldown:30});rn("BOW_SHOCK",62,"cd_BOW_SHOCK",{applicationDelay:.62,potency:150,falloff:0,cooldown:60,onConfirm:(e,t)=>{const a=[];e.hasResourceAvailable("NO_MERCY")&&a.push(J.NoMercy),e.addDoTPotencies({node:t,effectName:"BOW_SHOCK_DOT",skillName:"BOW_SHOCK",tickPotency:60,speedStat:"sks",modifiers:a})},onApplication:(e,t)=>e.applyDoT("BOW_SHOCK_DOT",t)});rn("TRAJECTORY",56,"cd_TRAJECTORY",{animationLock:Wt,cooldown:30,maxCharges:2,applicationDelay:.66,drawsAggro:!0});rn("HEART_OF_STONE",68,"cd_HEART_OF_STONE",{autoUpgrade:{trait:"HEART_OF_STONE_MASTERY",otherSkill:"HEART_OF_CORUNDUM"},applicationDelay:.62,cooldown:25,onApplication:e=>{e.refreshBuff("HEART_OF_STONE",0)}});rn("HEART_OF_CORUNDUM",82,"cd_HEART_OF_CORUNDUM",{startOnHotbar:!1,applicationDelay:.62,cooldown:25,onApplication:e=>{e.refreshBuff("CATHARSIS_OF_CORUNDUM",0),e.refreshBuff("HEART_OF_CORUNDUM",0),e.refreshBuff("CLARITY_OF_CORUNDUM",0)}});rn("SUPERBOLIDE",50,"cd_SUPERBOLIDE",{applicationDelay:0,cooldown:360,onConfirm:e=>{e.refreshBuff("SUPERBOLIDE",0)}});rn("CAMOUFLAGE",6,"cd_CAMOUFLAGE",{applicationDelay:.62,cooldown:90,onConfirm:e=>{e.refreshBuff("CAMOUFLAGE",0)}});rn("NEBULA",38,"cd_NEBULA",{autoUpgrade:{trait:"NEBULA_MASTERY",otherSkill:"GREAT_NEBULA"},applicationDelay:.56,cooldown:120,onConfirm:e=>{e.refreshBuff("NEBULA",0)}});rn("GREAT_NEBULA",38,"cd_GREAT_NEBULA",{startOnHotbar:!1,applicationDelay:.56,cooldown:120,onConfirm:e=>{e.refreshBuff("GREAT_NEBULA",0)}});rn("HEART_OF_LIGHT",64,"cd_HEART_OF_LIGHT",{applicationDelay:.62,cooldown:60,onConfirm:e=>{e.refreshBuff("HEART_OF_LIGHT",0)}});rn("AURORA",45,"cd_AURORA",{applicationDelay:.62,cooldown:60,onConfirm:e=>{e.refreshBuff("AURORA",0)},maxCharges:2});rn("ROYAL_GUARD",10,"cd_ROYAL_GUARD",{applicationDelay:0,cooldown:2,validateAttempt:e=>!e.hasResourceAvailable("ROYAL_GUARD"),onConfirm:e=>{e.resources.get("ROYAL_GUARD").gain(1)},replaceIf:[OG],secondaryCooldown:{cdName:"cd_RELEASE_ROYAL_GUARD",cooldown:1,maxCharges:1}});rn("RELEASE_ROYAL_GUARD",10,"cd_RELEASE_ROYAL_GUARD",{startOnHotbar:!1,replaceIf:[bG],applicationDelay:0,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("ROYAL_GUARD"),onConfirm:e=>{e.tryConsumeResource("ROYAL_GUARD")},secondaryCooldown:{cdName:"cd_ROYAL_GUARD",cooldown:2,maxCharges:1}});Object.keys(jR).forEach(e=>zt(e,`MCH/${Ge[e].name}.png`));class DG extends Xt{jobSpecificOtherTargetedBuffViewProps(){return[...["WILDFIRE","BIOBLASTER"].flatMap(t=>this.makeTargetedTimers(t))]}jobSpecificSelfTargetedBuffViewProps(){return[...Object.keys(jR).filter(t=>!(t==="WILDFIRE"||t==="BIOBLASTER")).map(t=>this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){const a=this.state.resources,o=a.get("HEAT_GAUGE").availableAmount(),s=a.get("BATTERY_GAUGE").availableAmount(),c=a.get("QUEEN_PUNCHES"),d=a.get("QUEEN_FINISHERS"),f=c.availableAmount()+d.availableAmount(),h=c.maxValue+d.maxValue;return[{kind:"bar",name:N({en:"Heat",zh:""}),color:t.mch.heat,progress:o/100,valueString:o.toFixed(0)},{kind:"bar",name:N({en:"Battery",zh:""}),color:t.mch.battery,progress:s/100,valueString:s.toFixed(0)},{kind:"bar",name:N({en:"Queen Hits",zh:""}),color:t.mch.battery,progress:f/h,valueString:f.toFixed(0)}]}}const zn=(e,t,a)=>{Ve("MCH",e,t,a??{})};zn("HEAT_GAUGE",100,{warnOnOvercap:!0});zn("BATTERY_GAUGE",100,{warnOnOvercap:!0});zn("REASSEMBLED",1,{timeout:5,warnOnTimeout:!0});zn("OVERHEATED",5,{timeout:10,warnOnTimeout:!0});zn("WILDFIRE",1,{timeout:10});zn("WILDFIRE_SELF",1,{timeout:10});zn("FLAMETHROWER",1,{timeout:10});zn("BIOBLASTER",1,{timeout:15});zn("TACTICIAN",1,{timeout:15});zn("HYPERCHARGED",1,{timeout:30,warnOnTimeout:!0});zn("EXCAVATOR_READY",1,{timeout:30,warnOnTimeout:!0});zn("FULL_METAL_MACHINIST",1,{timeout:30,warnOnTimeout:!0});zn("HEAT_COMBO",2,{timeout:30});zn("QUEEN",7);zn("QUEEN_PUNCHES",5);zn("QUEEN_FINISHERS",2);zn("WILDFIRE_HITS",6);zn("BATTERY_BONUS",50);const yG=["HEATED_CLEAN_SHOT","HEATED_SLUG_SHOT","HEATED_SPLIT_SHOT","SPREAD_SHOT","SCATTERGUN"],AN=["CHAIN_SAW","EXCAVATOR","FULL_METAL_FIELD","SCATTERGUN","BIOBLASTER","SPREAD_SHOT"];class vG extends qt{constructor(t){super(t),this.cooldowns.set(new Ue("cd_AIR_ANCHOR",this.config.adjustedSksGCD(40),1,1)),this.cooldowns.set(new Ue("cd_CHAINSAW",this.config.adjustedSksGCD(60),1,1)),this.hasTraitUnlocked("QUEENS_GAMBIT")||(this.resources.set(new pn("QUEEN_FINISHERS",1,0)),this.resources.set(new pn("QUEEN",6,0))),this.hasTraitUnlocked("ENHANCED_REASSEMBLE")||this.cooldowns.set(new Ue("cd_REASSEMBLE",55,1,1)),this.hasTraitUnlocked("ENHANCED_MULTI_WEAPON")||this.cooldowns.set(new Ue("cd_DRILL",this.config.adjustedSksGCD(20),1,1)),this.hasTraitUnlocked("CHARGED_ACTION_MASTERY")||(this.cooldowns.set(new Ue("cd_DOUBLE_CHECK",30,2,2)),this.cooldowns.set(new Ue("cd_CHECKMATE",30,2,2))),this.hasTraitUnlocked("ENHANCED_TACTICIAN")||this.cooldowns.set(new Ue("cd_TACTICIAN",120,1,1)),this.registerRecurringEvents([{groupedEffects:[{effectName:"BIOBLASTER",appliedBy:["BIOBLASTER"]}]},{groupedEffects:[{effectName:"FLAMETHROWER",appliedBy:["FLAMETHROWER"],isGroundTargeted:!0,exclude:!0}]}],["ROOK_AUTOTURRET","AUTOMATON_QUEEN","WILDFIRE"])}get statusPropsGenerator(){return new DG(this)}jobSpecificRegisterRecurringEvents(){const t=()=>{this.handleDoTTick("FLAMETHROWER"),this.getDisplayTime()>=0&&I.reportDotTick(this.time,"FLAMETHROWER"),this.addEvent(new Oe("Flamethrower tick",1,()=>{t()}))};let a=this.config.timeTillFirstManaTick+this.dotTickOffset;for(;a>1;)a--;this.addEvent(new Oe("initial Flamethrower tick",a,t))}cancelChanneledSkills(){this.tryConsumeResource("FLAMETHROWER")}processComboStatus(t){if(!yG.includes(t))return;const a=this.resources.get("HEAT_COMBO").availableAmount();let o=0;a===0&&t==="HEATED_SPLIT_SHOT"?o=1:a===1&&t==="HEATED_SLUG_SHOT"&&(o=2),this.setComboState("HEAT_COMBO",o)}gainResource(t,a){this.resources.get(t).gain(a)}handleQueenPunch=()=>{if(!this.hasResourceAvailable("QUEEN_PUNCHES")){this.handleQueenFinisher();return}const t=this.resources.get("QUEEN").node;t!==void 0&&this.resolveQueenPotency(t),this.resources.get("QUEEN_PUNCHES").consume(1),this.hasResourceAvailable("QUEEN_PUNCHES")?this.addEvent(new Oe("queen punch",1.56,()=>this.handleQueenPunch())):this.addEvent(new Oe("queen finisher",1.56,()=>this.handleQueenFinisher()))};resolveQueenPotency(t){const a=this.resources.get("QUEEN_PUNCHES").availableAmount()+this.resources.get("QUEEN_FINISHERS").availableAmount(),o=this.resources.get("QUEEN").availableAmount()-a;if(o<0)return;const s=t.getDotPotencies("QUEEN")[o];this.hasResourceAvailable("TINCTURE")&&s.addModifiers(J.Tincture),s.snapshotTime=this.getDisplayTime(),I.resolvePotency(s)}calculateQueenPotency(t,a){const o=this.resources.get("BATTERY_BONUS").availableAmount(),s=(a-t)*(o/50);return Math.floor((t+s)*.89)}handleQueenFinisher=()=>{if(!this.hasResourceAvailable("QUEEN_FINISHERS"))return;const t=this.resources.get("QUEEN").node;t!==void 0&&this.resolveQueenPotency(t),this.resources.get("QUEEN_FINISHERS").consume(1),this.hasResourceAvailable("QUEEN_FINISHERS")?this.addEvent(new Oe("queen finisher",2,()=>this.handleQueenFinisher())):(this.tryConsumeResource("BATTERY_BONUS",!0),this.addEvent(new Oe("expire queen",5,()=>{this.tryConsumeResource("QUEEN",!0)})))};expireWildfire(){if(!this.hasResourceAvailable("WILDFIRE_HITS"))return;this.tryConsumeResource("WILDFIRE_SELF"),this.tryConsumeResource("WILDFIRE");const t=this.hasTraitUnlocked("ENHANCED_WILD_FIRE")?240:100,a=Math.min(this.resources.get("WILDFIRE_HITS").availableAmount(),6)*t,o=this.resources.get("WILDFIRE").node;if(o===void 0)return;const s=o.getDotPotencies("WILDFIRE")[0];s.base=a,I.resolvePotency(s),this.tryConsumeResource("WILDFIRE_HITS",!0)}}const Ra=(e,t,a)=>{const o=Le(a.onConfirm,s=>s.processComboStatus(e),s=>{e!=="FULL_METAL_FIELD"&&s.tryConsumeResource("REASSEMBLED")},s=>{s.hasResourceAvailable("WILDFIRE_SELF")&&s.resources.get("WILDFIRE_HITS").gain(1)},s=>{AN.includes(e)||s.tryConsumeResource("OVERHEATED")});return on("MCH",e,t,{...a,onConfirm:o,jobPotencyModifiers:s=>{const c=[];return(s.hasResourceAvailable("REASSEMBLED")||e==="FULL_METAL_FIELD")&&c.push(J.AutoCDH),s.hasResourceAvailable("OVERHEATED")&&!AN.includes(e)&&c.push(J.Overheated),c}})},no=(e,t,a,o)=>at("MCH",e,t,a,o),vT=(e,t,a,o)=>{const s=Le(o.onConfirm);return Ye("MCH",e,t,a,{...o,onConfirm:s})};Ra("HEATED_SPLIT_SHOT",54,{potency:[["NEVER",180],["MARKSMANS_MASTERY",200],["MARKSMANS_MASTERY_II",220]],applicationDelay:.8,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.gainResource("HEAT_GAUGE",5)});Ra("HEATED_SLUG_SHOT",60,{potency:[["NEVER",100],["MARKSMANS_MASTERY",120],["MARKSMANS_MASTERY_II",140]],combo:{potency:[["NEVER",280],["MARKSMANS_MASTERY",300],["MARKSMANS_MASTERY_II",320]],resource:"HEAT_COMBO",resourceValue:1},applicationDelay:.8,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.gainResource("HEAT_GAUGE",5),highlightIf:e=>e.hasResourceExactly("HEAT_COMBO",1)});Ra("HEATED_CLEAN_SHOT",64,{potency:[["NEVER",100],["MARKSMANS_MASTERY",120],["MARKSMANS_MASTERY_II",160]],combo:{potency:[["NEVER",360],["MARKSMANS_MASTERY",380],["MARKSMANS_MASTERY_II",420]],resource:"HEAT_COMBO",resourceValue:2},applicationDelay:.8,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>{e.gainResource("HEAT_GAUGE",5),e.gainResource("BATTERY_GAUGE",10)},highlightIf:e=>e.hasResourceExactly("HEAT_COMBO",2)});vT("REASSEMBLE",10,"cd_REASSEMBLE",{rscType:"REASSEMBLED",applicationDelay:0,cooldown:55,maxCharges:2});const Hf=[["NEVER",620],["MARKSMANS_MASTERY_II",660]];Ra("DRILL",58,{potency:Hf,applicationDelay:1.15,recastTime:e=>e.config.adjustedSksGCD(),secondaryCooldown:{cdName:"cd_DRILL",cooldown:20,maxCharges:2}});Ra("HOT_SHOT",4,{autoUpgrade:{trait:"HOT_SHOT_MASTERY",otherSkill:"AIR_ANCHOR"},potency:240,applicationDelay:1.15,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.gainResource("BATTERY_GAUGE",20),secondaryCooldown:{cdName:"cd_AIR_ANCHOR",cooldown:40,maxCharges:1}});Ra("AIR_ANCHOR",76,{startOnHotbar:!1,potency:Hf,applicationDelay:1.15,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.gainResource("BATTERY_GAUGE",20),secondaryCooldown:{cdName:"cd_AIR_ANCHOR",cooldown:40,maxCharges:1}});Ra("CHAIN_SAW",90,{replaceIf:[{newSkill:"EXCAVATOR",condition:e=>e.hasResourceAvailable("EXCAVATOR_READY")}],potency:Hf,falloff:.25,applicationDelay:1.03,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>{e.gainResource("BATTERY_GAUGE",20),e.hasTraitUnlocked("ENHANCED_MULTI_WEAPON_II")&&e.gainStatus("EXCAVATOR_READY")},secondaryCooldown:{cdName:"cd_CHAINSAW",cooldown:60,maxCharges:1}});Ra("EXCAVATOR",90,{startOnHotbar:!1,potency:Hf,falloff:.25,applicationDelay:1.07,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>{e.gainResource("BATTERY_GAUGE",20),e.tryConsumeResource("EXCAVATOR_READY")},validateAttempt:e=>e.hasResourceAvailable("EXCAVATOR_READY"),highlightIf:e=>e.hasResourceAvailable("EXCAVATOR_READY")});no("BARREL_STABILIZER",66,"cd_BARREL_STABILIZER",{replaceIf:[{newSkill:"FULL_METAL_FIELD",condition:e=>e.hasResourceAvailable("FULL_METAL_MACHINIST")}],applicationDelay:0,cooldown:120,maxCharges:1,requiresCombat:!0,onConfirm:e=>{e.gainStatus("HYPERCHARGED"),e.hasTraitUnlocked("ENHANCED_BARREL_STABILIZER")&&e.gainStatus("FULL_METAL_MACHINIST")}});Ra("FULL_METAL_FIELD",100,{startOnHotbar:!1,potency:900,falloff:.25,applicationDelay:1.02,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.tryConsumeResource("FULL_METAL_MACHINIST"),validateAttempt:e=>e.hasResourceAvailable("FULL_METAL_MACHINIST"),highlightIf:e=>e.hasResourceAvailable("FULL_METAL_MACHINIST")});vT("HYPERCHARGE",30,"cd_HYPERCHARGE",{rscType:"OVERHEATED",applicationDelay:0,cooldown:10,maxCharges:1,onConfirm:e=>{e.hasResourceAvailable("HYPERCHARGED")?e.tryConsumeResource("HYPERCHARGED"):e.resources.get("HEAT_GAUGE").consume(50)},validateAttempt:e=>e.hasResourceAvailable("HEAT_GAUGE",50)||e.hasResourceAvailable("HYPERCHARGED"),highlightIf:e=>e.hasResourceAvailable("HEAT_GAUGE",50)||e.hasResourceAvailable("HYPERCHARGED")});no("WILDFIRE",45,"cd_WILDFIRE",{replaceIf:[{newSkill:"DETONATOR",condition:e=>e.hasResourceAvailable("WILDFIRE_SELF")}],applicationDelay:.67,cooldown:120,maxCharges:1,onConfirm:(e,t)=>{e.gainStatus("WILDFIRE_SELF");const a=e.resources.get("WILDFIRE"),o=new tn({config:e.config,sourceTime:e.getDisplayTime(),sourceSkill:"WILDFIRE",aspect:Ie.Physical,basePotency:0,snapshotTime:e.getDisplayTime(),description:"wildfire",targetList:t.targetList});o.addModifiers(J.NoCDH),e.hasResourceAvailable("TINCTURE")&&o.addModifiers(J.Tincture),t.addDoTPotency(o,"WILDFIRE"),a.gain(1),a.node=t,e.resources.addResourceEvent({rscType:"WILDFIRE",name:"wildfire expiration",delay:Ut("MCH","WILDFIRE").maxTimeout,fnOnRsc:s=>e.expireWildfire()})}});no("DETONATOR",45,"cd_DETONATOR",{startOnHotbar:!1,applicationDelay:.62,cooldown:1,maxCharges:1,onConfirm:e=>e.expireWildfire(),validateAttempt:e=>e.hasResourceAvailable("WILDFIRE_SELF")});Ra("BLAZING_SHOT",68,{potency:[["NEVER",220],["MARKSMANS_MASTERY_II",240]],applicationDelay:.85,recastTime:1.5,onConfirm:e=>{e.cooldowns.get("cd_DOUBLE_CHECK").restore(15),e.cooldowns.get("cd_CHECKMATE").restore(15)},validateAttempt:e=>e.hasResourceAvailable("OVERHEATED"),highlightIf:e=>e.hasResourceAvailable("OVERHEATED")});no("GAUSS_ROUND",15,"cd_DOUBLE_CHECK",{autoUpgrade:{trait:"DOUBLE_BARREL_MASTERY",otherSkill:"DOUBLE_CHECK"},potency:130,applicationDelay:.71,cooldown:30,maxCharges:3});no("DOUBLE_CHECK",92,"cd_DOUBLE_CHECK",{startOnHotbar:!1,potency:180,falloff:.3,applicationDelay:.71,cooldown:30,maxCharges:3});no("RICOCHET",50,"cd_CHECKMATE",{autoUpgrade:{trait:"DOUBLE_BARREL_MASTERY",otherSkill:"CHECKMATE"},potency:130,falloff:.3,applicationDelay:.71,cooldown:30,maxCharges:3});no("CHECKMATE",92,"cd_CHECKMATE",{startOnHotbar:!1,potency:180,falloff:.3,applicationDelay:.71,cooldown:30,maxCharges:3});const MG=[{skillName:"ROOK_AUTOTURRET",skillLevel:40,autoUpgrade:{otherSkill:"AUTOMATON_QUEEN",trait:"PROMOTION"}},{skillName:"AUTOMATON_QUEEN",skillLevel:80,startOnHotbar:!1}];MG.forEach(e=>{no(e.skillName,e.skillLevel,"cd_QUEEN",{startOnHotbar:e.startOnHotbar,autoUpgrade:e.autoUpgrade,applicationDelay:0,cooldown:6,maxCharges:1,validateAttempt:t=>t.hasResourceAvailable("BATTERY_GAUGE",50)&&!t.hasResourceAvailable("QUEEN"),onConfirm:(t,a)=>{const o=t.resources.get("BATTERY_GAUGE").availableAmount();t.resources.get("BATTERY_BONUS").gain(o-50),t.tryConsumeResource("BATTERY_GAUGE",!0);const s=t.resources.get("QUEEN_PUNCHES");s.gain(5);const c=t.hasTraitUnlocked("QUEENS_GAMBIT")?2:1;t.resources.get("QUEEN_FINISHERS").gain(c),t.resources.get("QUEEN").gain(s.availableAmount()+c);let d="VOLLEY_FIRE",f=0;t.hasTraitUnlocked("PROMOTION")?(d="ARM_PUNCH",f=t.calculateQueenPotency(120,240)):f=t.calculateQueenPotency(35,75);for(let h=0;h<s.availableAmount();h++)a.addDoTPotency(new tn({config:t.config,sourceTime:t.getDisplayTime(),sourceSkill:d,aspect:Ie.Physical,description:"",basePotency:f,snapshotTime:void 0,targetList:a.targetList}),"QUEEN");d=t.hasTraitUnlocked("PROMOTION")?"PILE_BUNKER":"ROOK_OVERLOAD",d==="PILE_BUNKER"?f=t.calculateQueenPotency(340,680):f=t.calculateQueenPotency(160,320),a.addDoTPotency(new tn({config:t.config,sourceTime:t.getDisplayTime(),sourceSkill:d,aspect:Ie.Physical,description:"",basePotency:f,snapshotTime:void 0,targetList:a.targetList}),"QUEEN"),t.hasTraitUnlocked("QUEENS_GAMBIT")&&a.addDoTPotency(new tn({config:t.config,sourceTime:t.getDisplayTime(),sourceSkill:"CROWNED_COLLIDER",aspect:Ie.Physical,description:"",basePotency:t.calculateQueenPotency(390,780),snapshotTime:void 0,targetList:a.targetList}),"QUEEN"),t.resources.get("QUEEN").node=a,t.addEvent(new Oe("initial queen punch",5.5,()=>t.handleQueenPunch()))}})});const LG=[{skillName:"ROOK_OVERDRIVE",skillLevel:40,autoUpgrade:{otherSkill:"QUEEN_OVERDRIVE",trait:"PROMOTION"}},{skillName:"QUEEN_OVERDRIVE",skillLevel:80,startOnHotbar:!1}];LG.forEach(e=>{no(e.skillName,e.skillLevel,"cd_OVERDRIVE",{startOnHotbar:e.startOnHotbar,autoUpgrade:e.autoUpgrade,applicationDelay:0,cooldown:15,maxCharges:1,validateAttempt:t=>t.hasResourceAvailable("QUEEN_PUNCHES"),onConfirm:t=>{t.tryConsumeResource("QUEEN_PUNCHES",!0)}})});Ra("SPREAD_SHOT",18,{autoUpgrade:{trait:"SPREAD_SHOT_MASTERY",otherSkill:"SCATTERGUN"},potency:110,falloff:0,applicationDelay:.8,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.gainResource("HEAT_GAUGE",5)});Ra("SCATTERGUN",82,{startOnHotbar:!1,potency:130,falloff:0,applicationDelay:1.15,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.gainResource("HEAT_GAUGE",10)});Ra("BIOBLASTER",58,{potency:50,falloff:0,applicationDelay:.97,recastTime:e=>e.config.adjustedSksGCD(),secondaryCooldown:{cdName:"cd_DRILL",cooldown:20,maxCharges:2},onConfirm:(e,t)=>e.addDoTPotencies({node:t,effectName:"BIOBLASTER",skillName:"BIOBLASTER",tickPotency:50,speedStat:"sks"}),onApplication:(e,t)=>e.applyDoT("BIOBLASTER",t)});Ra("AUTO_CROSSBOW",52,{potency:[["NEVER",140],["MARKSMANS_MASTERY_II",180]],falloff:0,applicationDelay:.89,recastTime:1.5,validateAttempt:e=>e.hasResourceAvailable("OVERHEATED"),highlightIf:e=>e.hasResourceAvailable("OVERHEATED")});Ra("FLAMETHROWER",70,{applicationDelay:.89,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"FLAMETHROWER",skillName:"FLAMETHROWER",tickPotency:120,tickFrequency:1,speedStat:"sks"})},onApplication:(e,t)=>{e.applyDoT("FLAMETHROWER",t)},secondaryCooldown:{cdName:"cd_FLAMETHROWER",cooldown:60,maxCharges:1}});vT("TACTICIAN",56,"cd_TACTICIAN",{rscType:"TACTICIAN",maxCharges:1,cooldown:90,applicationDelay:.62});no("DISMANTLE",62,"cd_DISMANTLE",{maxCharges:1,cooldown:120,applicationDelay:.62});Object.keys(KR).forEach(e=>zt(e,`PCT/${Ge[e].name}.png`));class xG extends Xt{jobSpecificSelfTargetedBuffViewProps(){return[...Object.keys(KR).map(t=>t==="MONOCHROME_TONES"||t==="SUBTRACTIVE_PALETTE"?this.makeCommonTimerless(t):t==="INSPIRATION"?this.makeToggleableTimerless(t):this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){const a=this.state.resources,o=a.get("PORTRAIT").availableAmount(),s=a.get("DEPICTIONS").availableAmount(),c=a.get("CREATURE_CANVAS").availableAmount(),d=a.get("WEAPON_CANVAS").availableAmount(),f=a.get("LANDSCAPE_CANVAS").availableAmount(),h=a.get("PALETTE_GAUGE").availableAmount(),m=a.get("PAINT").availableAmount(),R=a.get("MONOCHROME_TONES").available(1),T=[{kind:"text",name:N({en:"portrait",zh:""}),text:o===0?"/":N(o===1?{en:"moogle",zh:""}:{en:"madeen",zh:""})},{kind:"text",name:N({en:"depictions",zh:""}),text:s===0?"/":N(s===1?{en:"pom",zh:""}:s===2?{en:"wing",zh:""}:s===3?{en:"fang",zh:""}:{en:"maw",zh:""})},{kind:"counter",name:N({en:"creature",zh:""}),color:t.pct.creatureCanvas,currentStacks:c,maxStacks:1},{kind:"counter",name:N({en:"weapon",zh:""}),color:t.pct.weaponCanvas,currentStacks:d,maxStacks:1},{kind:"counter",name:N({en:"landscape",zh:""}),color:t.pct.landscapeCanvas,currentStacks:f,maxStacks:1},{kind:"bar",name:N({en:"palette gauge",zh:""}),color:t.pct.paletteGauge,progress:h/100,valueString:h.toFixed(0)}];return this.state.hasTraitUnlocked("ENHANCED_ARTISTRY")&&T.push({kind:"paint",name:N({en:"paint gauge",zh:""}),holyColor:t.pct.holyPaint,cometColor:t.pct.cometPaint,currentStacks:m,maxStacks:5,hasComet:this.state.hasTraitUnlocked("ENHANCED_PALETTE")&&R}),T}}const Cn=(e,t,a)=>{Ve("PCT",e,t,a??{})};Cn("PORTRAIT",2);Cn("DEPICTIONS",3);Cn("CREATURE_CANVAS",1,{default:1});Cn("WEAPON_CANVAS",1,{default:1});Cn("LANDSCAPE_CANVAS",1,{default:1});Cn("PALETTE_GAUGE",100,{warnOnOvercap:!0});Cn("PAINT",5);Cn("AETHERHUES",2,{timeout:30.8});Cn("MONOCHROME_TONES",1);Cn("SUBTRACTIVE_PALETTE",3);Cn("HAMMER_TIME",3,{timeout:30});Cn("INSPIRATION",1,{timeout:30});Cn("SUBTRACTIVE_SPECTRUM",1,{timeout:30,warnOnTimeout:!0});Cn("HYPERPHANTASIA",5,{timeout:30,warnOnTimeout:!0});Cn("RAINBOW_BRIGHT",1,{timeout:30,warnOnTimeout:!0});Cn("STARSTRUCK",1,{timeout:20,warnOnTimeout:!0});Cn("STARRY_MUSE",1,{timeout:20.5});Cn("TEMPERA_COAT",1,{timeout:10});Cn("TEMPERA_GRASSA",1,{timeout:10});Cn("SMUDGE",1,{timeout:5});const HG=["FIRE_IN_RED","FIRE_II_IN_RED","AERO_IN_GREEN","AERO_II_IN_GREEN","WATER_IN_BLUE","WATER_II_IN_BLUE","HOLY_IN_WHITE","BLIZZARD_IN_CYAN","BLIZZARD_II_IN_CYAN","STONE_IN_YELLOW","STONE_II_IN_YELLOW","THUNDER_IN_MAGENTA","THUNDER_II_IN_MAGENTA","COMET_IN_BLACK","STAR_PRISM"],RN=["POM_MOTIF","WING_MOTIF","CLAW_MOTIF","MAW_MOTIF"],kG=["HAMMER_BRUSH","HAMMER_STAMP","POLISHING_HAMMER"];class UG extends qt{constructor(t){super(t);const a=this.hasTraitUnlocked("ENHANCED_SWIFTCAST")&&40||60;[new Ue("cd_SWIFTCAST",a,1,1)].forEach(c=>this.cooldowns.set(c));const o=this.hasTraitUnlocked("ENHANCED_PICTOMANCY_IV")?3:2;this.cooldowns.set(new Ue("cd_LIVING_MUSE",40,o,o));const s=this.hasTraitUnlocked("ENHANCED_PICTOMANCY_II")?2:1;this.cooldowns.set(new Ue("cd_STEEL_MUSE",60,s,s)),this.registerRecurringEvents()}get statusPropsGenerator(){return new xG(this)}jobSpecificAddDamageBuffCovers(t,a){this.hasResourceAvailable("STARRY_MUSE")&&t.addBuff(H.StarryMuse)}jobSpecificAddSpeedBuffCovers(t,a){this.hasResourceAvailable("INSPIRATION")&&HG.includes(a.name)&&t.addBuff(H.Hyperphantasia)}captureSpellCastTime(t,a){return RN.includes(t)?a:t==="RAINBOW_DRIP"?this.hasResourceAvailable("RAINBOW_BRIGHT")?0:this.config.adjustedCastTime(a):this.config.adjustedCastTime(a,this.hasResourceAvailable("INSPIRATION")?25:void 0)}captureSpellRecastTime(t,a){if(RN.includes(t))return a;if(t==="RAINBOW_DRIP"){const o=this.config.adjustedGCD(a);return this.hasResourceAvailable("RAINBOW_BRIGHT")?o-3.5:o}return kG.includes(t)?this.config.adjustedGCD(a):this.config.adjustedGCD(a,this.hasResourceAvailable("INSPIRATION")?25:void 0)}getHammerStacks(){return this.resources.get("HAMMER_TIME").availableAmount()}doFiller(){this.cycleAetherhues(),this.tryConsumeHyperphantasia(),this.tryConsumeResource("SUBTRACTIVE_PALETTE")}cycleAetherhues(){const t=this.resources.get("AETHERHUES").availableAmount();this.tryConsumeResource("AETHERHUES",!0),t===2||(t===1?this.gainStatus("AETHERHUES",2):this.gainStatus("AETHERHUES",1))}tryConsumeHyperphantasia(){this.hasResourceAvailable("INSPIRATION")&&this.tryConsumeResource("HYPERPHANTASIA")&&!this.hasResourceAvailable("HYPERPHANTASIA")&&(this.tryConsumeResource("INSPIRATION"),this.hasTraitUnlocked("ENHANCED_PICTOMANCY_III")&&this.gainStatus("RAINBOW_BRIGHT"))}}const cn=(e,t,a)=>{const o=a.baseRecastTime??2.5,s=Le((c,d)=>{e==="RAINBOW_DRIP"&&c.hasResourceAvailable("RAINBOW_BRIGHT")||a.baseCastTime===0||c.tryConsumeResource("SWIFTCAST")},a.onConfirm);return Xa("PCT",e,t,{...a,castTime:c=>c.captureSpellCastTime(e,a.baseCastTime),recastTime:c=>c.captureSpellRecastTime(e,o),manaCost:a.baseManaCost??0,potency:a.basePotency,jobPotencyModifiers:c=>{const d=[];return c.hasResourceAvailable("STARRY_MUSE")&&d.push(J.Starry),a.jobPotencyModifiers&&d.push(...a.jobPotencyModifiers(c)),d},isInstantFn:c=>e==="RAINBOW_DRIP"&&c.hasResourceAvailable("RAINBOW_BRIGHT")||a.baseCastTime===0||c.hasResourceAvailable("SWIFTCAST"),onConfirm:s})},Hi=(e,t,a,o)=>at("PCT",e,t,a,{...o,jobPotencyModifiers:s=>s.hasResourceAvailable("STARRY_MUSE")?[J.Starry]:[]}),D0={newSkill:"FIRE_IN_RED",condition:e=>!e.hasResourceAvailable("AETHERHUES")},y0={newSkill:"AERO_IN_GREEN",condition:e=>e.hasResourceExactly("AETHERHUES",1)},v0={newSkill:"WATER_IN_BLUE",condition:e=>e.hasResourceExactly("AETHERHUES",2)},M0={newSkill:"BLIZZARD_IN_CYAN",condition:e=>!e.hasResourceAvailable("AETHERHUES")},L0={newSkill:"STONE_IN_YELLOW",condition:e=>e.hasResourceExactly("AETHERHUES",1)},x0={newSkill:"THUNDER_IN_MAGENTA",condition:e=>e.hasResourceExactly("AETHERHUES",2)},H0={newSkill:"FIRE_II_IN_RED",condition:e=>!e.hasResourceAvailable("AETHERHUES")},k0={newSkill:"AERO_II_IN_GREEN",condition:e=>e.hasResourceExactly("AETHERHUES",1)},U0={newSkill:"WATER_II_IN_BLUE",condition:e=>e.hasResourceExactly("AETHERHUES",2)},P0={newSkill:"BLIZZARD_II_IN_CYAN",condition:e=>!e.hasResourceAvailable("AETHERHUES")},w0={newSkill:"STONE_II_IN_YELLOW",condition:e=>e.hasResourceExactly("AETHERHUES",1)},G0={newSkill:"THUNDER_II_IN_MAGENTA",condition:e=>e.hasResourceExactly("AETHERHUES",2)},MT=[D0,y0,v0],LT=[M0,L0,x0],xT=[H0,k0,U0],HT=[P0,w0,G0],PG={newSkill:"CREATURE_MOTIF",condition:e=>e.hasResourceAvailable("CREATURE_CANVAS")},B0={newSkill:"POM_MOTIF",condition:e=>!e.hasResourceAvailable("CREATURE_CANVAS")&&!e.hasResourceAvailable("DEPICTIONS")},F0={newSkill:"WING_MOTIF",condition:e=>!e.hasResourceAvailable("CREATURE_CANVAS")&&e.hasResourceExactly("DEPICTIONS",1)},j0={newSkill:"CLAW_MOTIF",condition:e=>!e.hasResourceAvailable("CREATURE_CANVAS")&&e.hasResourceExactly("DEPICTIONS",2)},z0={newSkill:"MAW_MOTIF",condition:e=>!e.hasResourceAvailable("CREATURE_CANVAS")&&e.hasResourceExactly("DEPICTIONS",3)},wG={newSkill:"LIVING_MUSE",condition:e=>!e.hasResourceAvailable("CREATURE_CANVAS")},Y0={newSkill:"POM_MUSE",condition:e=>e.hasResourceAvailable("CREATURE_CANVAS")&&!e.hasResourceAvailable("DEPICTIONS")},K0={newSkill:"WINGED_MUSE",condition:e=>e.hasResourceAvailable("CREATURE_CANVAS")&&e.hasResourceExactly("DEPICTIONS",1)},V0={newSkill:"CLAWED_MUSE",condition:e=>e.hasResourceAvailable("CREATURE_CANVAS")&&e.hasResourceExactly("DEPICTIONS",2)},W0={newSkill:"FANGED_MUSE",condition:e=>e.hasResourceAvailable("CREATURE_CANVAS")&&e.hasResourceExactly("DEPICTIONS",3)},GG={newSkill:"MOG_OF_THE_AGES",condition:e=>e.resources.get("PORTRAIT").availableAmount()!==2},BG={newSkill:"RETRIBUTION_OF_THE_MADEEN",condition:e=>e.resources.get("PORTRAIT").availableAmount()===2},FG={newSkill:"WEAPON_MOTIF",condition:e=>e.hasResourceAvailable("WEAPON_CANVAS")},X0={newSkill:"HAMMER_MOTIF",condition:e=>!e.hasResourceAvailable("WEAPON_CANVAS")},jG={newSkill:"STEEL_MUSE",condition:e=>!e.hasResourceAvailable("WEAPON_CANVAS")},zG={newSkill:"STRIKING_MUSE",condition:e=>e.hasResourceAvailable("WEAPON_CANVAS")},YG={newSkill:"LANDSCAPE_MOTIF",condition:e=>e.hasResourceAvailable("LANDSCAPE_CANVAS")},q0={newSkill:"STARRY_SKY_MOTIF",condition:e=>!e.hasResourceAvailable("LANDSCAPE_CANVAS")},KG={newSkill:"SCENIC_MUSE",condition:e=>!e.hasResourceAvailable("LANDSCAPE_CANVAS")},Z0={newSkill:"STARRY_MUSE",condition:e=>e.hasResourceAvailable("LANDSCAPE_CANVAS")};cn("FIRE_IN_RED",1,{replaceIf:MT,baseCastTime:1.5,baseManaCost:300,basePotency:[["NEVER",310],["PICTOMANCY_MASTERY_II",380],["PICTOMANCY_MASTERY_III",420],["PICTOMANCY_MASTERY_IV",490]],applicationDelay:.84,validateAttempt:e=>D0.condition(e)&&!e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller()});cn("AERO_IN_GREEN",5,{replaceIf:MT,startOnHotbar:!1,baseCastTime:1.5,baseManaCost:300,basePotency:[["NEVER",350],["PICTOMANCY_MASTERY_II",420],["PICTOMANCY_MASTERY_III",460],["PICTOMANCY_MASTERY_IV",530]],applicationDelay:.89,validateAttempt:e=>y0.condition(e)&&!e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller(),highlightIf:e=>!e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});cn("WATER_IN_BLUE",15,{replaceIf:MT,startOnHotbar:!1,baseCastTime:1.5,baseManaCost:300,basePotency:[["NEVER",390],["PICTOMANCY_MASTERY_II",460],["PICTOMANCY_MASTERY_III",500],["PICTOMANCY_MASTERY_IV",570]],applicationDelay:.98,validateAttempt:e=>v0.condition(e)&&!e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>{e.doFiller(),e.resources.get("PALETTE_GAUGE").gain(25),e.hasTraitUnlocked("ENHANCED_ARTISTRY")&&e.resources.get("PAINT").gain(1)},highlightIf:e=>!e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});cn("FIRE_II_IN_RED",25,{replaceIf:xT,baseCastTime:1.5,baseManaCost:300,basePotency:[["NEVER",120],["PICTOMANCY_MASTERY_II",150],["PICTOMANCY_MASTERY_IV",180]],falloff:0,applicationDelay:.84,validateAttempt:e=>H0.condition(e)&&!e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller()});cn("AERO_II_IN_GREEN",35,{replaceIf:xT,startOnHotbar:!1,baseCastTime:1.5,baseManaCost:300,basePotency:[["NEVER",140],["PICTOMANCY_MASTERY_II",170],["PICTOMANCY_MASTERY_IV",200]],falloff:0,applicationDelay:.89,validateAttempt:e=>k0.condition(e)&&!e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller(),highlightIf:e=>!e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});cn("WATER_II_IN_BLUE",45,{replaceIf:xT,startOnHotbar:!1,baseCastTime:1.5,baseManaCost:300,basePotency:[["NEVER",170],["PICTOMANCY_MASTERY_II",190],["PICTOMANCY_MASTERY_IV",220]],falloff:0,applicationDelay:.89,validateAttempt:e=>U0.condition(e)&&!e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>{e.doFiller(),e.resources.get("PALETTE_GAUGE").gain(25),e.hasTraitUnlocked("ENHANCED_ARTISTRY")&&e.resources.get("PAINT").gain(1)},highlightIf:e=>!e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});cn("BLIZZARD_IN_CYAN",60,{replaceIf:LT,baseCastTime:2.3,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",560],["PICTOMANCY_MASTERY_II",680],["PICTOMANCY_MASTERY_III",750],["PICTOMANCY_MASTERY_IV",860]],applicationDelay:.75,validateAttempt:e=>M0.condition(e)&&e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller(),highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});cn("STONE_IN_YELLOW",60,{replaceIf:LT,startOnHotbar:!1,baseCastTime:2.3,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",600],["PICTOMANCY_MASTERY_II",720],["PICTOMANCY_MASTERY_III",790],["PICTOMANCY_MASTERY_IV",900]],applicationDelay:.8,validateAttempt:e=>L0.condition(e)&&e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller(),highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});cn("THUNDER_IN_MAGENTA",60,{replaceIf:LT,startOnHotbar:!1,baseCastTime:2.3,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",640],["PICTOMANCY_MASTERY_II",760],["PICTOMANCY_MASTERY_III",830],["PICTOMANCY_MASTERY_IV",940]],applicationDelay:.8,validateAttempt:e=>x0.condition(e)&&e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>{e.doFiller(),e.hasTraitUnlocked("ENHANCED_ARTISTRY")&&e.resources.get("PAINT").gain(1)},highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});cn("BLIZZARD_II_IN_CYAN",60,{replaceIf:HT,baseCastTime:2.3,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",270],["PICTOMANCY_MASTERY_II",330],["PICTOMANCY_MASTERY_IV",360]],falloff:0,applicationDelay:.75,validateAttempt:e=>P0.condition(e)&&e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller(),highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});cn("STONE_II_IN_YELLOW",60,{replaceIf:HT,startOnHotbar:!1,baseCastTime:2.3,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",290],["PICTOMANCY_MASTERY_II",350],["PICTOMANCY_MASTERY_IV",380]],falloff:0,applicationDelay:.8,validateAttempt:e=>w0.condition(e)&&e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller(),highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});cn("THUNDER_II_IN_MAGENTA",60,{replaceIf:HT,startOnHotbar:!1,baseCastTime:2.3,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",310],["PICTOMANCY_MASTERY_II",370],["PICTOMANCY_MASTERY_IV",400]],falloff:0,applicationDelay:.8,validateAttempt:e=>G0.condition(e)&&e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>{e.doFiller(),e.hasTraitUnlocked("ENHANCED_ARTISTRY")&&e.resources.get("PAINT").gain(1)},highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});cn("HOLY_IN_WHITE",80,{baseCastTime:0,baseManaCost:300,basePotency:[["NEVER",460],["PICTOMANCY_MASTERY_III",500],["PICTOMANCY_MASTERY_IV",570]],falloff:.65,applicationDelay:1.34,validateAttempt:e=>!e.hasResourceAvailable("MONOCHROME_TONES")&&e.hasResourceAvailable("PAINT"),onConfirm:e=>{e.tryConsumeResource("PAINT"),e.tryConsumeHyperphantasia()},highlightIf:e=>!e.hasResourceAvailable("MONOCHROME_TONES")&&e.hasResourceAvailable("PAINT")});cn("COMET_IN_BLACK",90,{baseCastTime:0,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",830],["PICTOMANCY_MASTERY_IV",940]],falloff:.6,applicationDelay:1.87,validateAttempt:e=>e.hasResourceAvailable("MONOCHROME_TONES")&&e.hasResourceAvailable("PAINT"),onConfirm:e=>{e.tryConsumeResource("PAINT"),e.tryConsumeResource("MONOCHROME_TONES"),e.tryConsumeHyperphantasia()},highlightIf:e=>e.hasResourceAvailable("MONOCHROME_TONES")});cn("RAINBOW_DRIP",92,{baseCastTime:4,baseRecastTime:6,baseManaCost:400,basePotency:1e3,applicationDelay:1.24,falloff:.85,onConfirm:e=>{e.resources.get("PAINT").gain(1),e.tryConsumeResource("RAINBOW_BRIGHT")},highlightIf:e=>e.hasResourceAvailable("RAINBOW_BRIGHT")});cn("STAR_PRISM",100,{baseCastTime:0,baseManaCost:0,basePotency:1100,applicationDelay:1.25,falloff:.7,validateAttempt:e=>e.hasResourceAvailable("STARSTRUCK"),onConfirm:e=>{e.tryConsumeResource("STARSTRUCK"),e.tryConsumeHyperphantasia()},highlightIf:e=>e.hasResourceAvailable("STARSTRUCK")});Hi("SUBTRACTIVE_PALETTE",60,"cd_SUBTRACTIVE",{cooldown:1,validateAttempt:e=>!e.hasResourceAvailable("SUBTRACTIVE_PALETTE")&&(e.hasResourceAvailable("SUBTRACTIVE_SPECTRUM")||e.hasResourceAvailable("PALETTE_GAUGE",50)),onConfirm:e=>{e.tryConsumeResource("SUBTRACTIVE_SPECTRUM")||e.resources.get("PALETTE_GAUGE").consume(50),e.hasResourceAvailable("MONOCHROME_TONES")&&I.reportWarning({kind:"custom",en:"comet overwrite!",zh:""}),e.hasTraitUnlocked("ENHANCED_PALETTE")&&e.gainStatus("MONOCHROME_TONES"),e.gainStatus("SUBTRACTIVE_PALETTE",3)},highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_SPECTRUM")||e.resources.get("PALETTE_GAUGE").available(50)});const VG=[PG,B0,F0,j0,z0],WG=[["CREATURE_MOTIF",30,e=>!1],["POM_MOTIF",30,B0.condition],["WING_MOTIF",30,F0.condition],["CLAW_MOTIF",96,j0.condition],["MAW_MOTIF",96,z0.condition]];WG.forEach(([e,t,a],o)=>cn(e,t,{replaceIf:VG,startOnHotbar:o===0,baseCastTime:3,baseRecastTime:4,baseManaCost:0,applicationDelay:0,validateAttempt:a,onConfirm:s=>s.resources.get("CREATURE_CANVAS").gain(1)}));const XG=[wG,Y0,K0,V0,W0],qG=[["LIVING_MUSE",30,0,0,e=>!1],["POM_MUSE",30,[["NEVER",700],["PICTOMANCY_MASTERY_III",800]],.62,Y0.condition],["WINGED_MUSE",30,[["NEVER",700],["PICTOMANCY_MASTERY_III",800]],.98,K0.condition],["CLAWED_MUSE",96,800,.98,V0.condition],["FANGED_MUSE",96,800,1.16,W0.condition]];qG.forEach(([e,t,a,o,s],c)=>Hi(e,t,"cd_LIVING_MUSE",{replaceIf:XG,startOnHotbar:c===0,potency:a,falloff:.7,applicationDelay:o,cooldown:40,validateAttempt:s,onConfirm:d=>{const f=d.resources.get("DEPICTIONS"),h=d.resources.get("PORTRAIT");d.tryConsumeResource("CREATURE_CANVAS"),f.gain(1),e==="WINGED_MUSE"&&(h.overrideCurrentValue(1),d.hasTraitUnlocked("ENHANCED_PICTOMANCY_IV")||f.overrideCurrentValue(0)),e==="FANGED_MUSE"&&(h.overrideCurrentValue(2),f.overrideCurrentValue(0))},maxCharges:3,highlightIf:d=>d.hasResourceAvailable("CREATURE_CANVAS")}));Hi("MOG_OF_THE_AGES",30,"cd_PORTRAIT",{replaceIf:[BG],potency:[["NEVER",800],["PICTOMANCY_MASTERY_III",1e3]],falloff:.7,applicationDelay:1.15,validateAttempt:e=>e.hasResourceExactly("PORTRAIT",1),onConfirm:e=>e.tryConsumeResource("PORTRAIT"),cooldown:30,highlightIf:e=>e.hasResourceAvailable("PORTRAIT")});Hi("RETRIBUTION_OF_THE_MADEEN",30,"cd_PORTRAIT",{replaceIf:[GG],startOnHotbar:!1,potency:1100,falloff:.7,applicationDelay:1.3,validateAttempt:e=>e.hasResourceExactly("PORTRAIT",2),onConfirm:e=>e.tryConsumeResource("PORTRAIT",!0),cooldown:30,highlightIf:e=>e.hasResourceAvailable("PORTRAIT")});cn("WEAPON_MOTIF",50,{replaceIf:[X0],baseCastTime:3,baseRecastTime:4,baseManaCost:0,applicationDelay:0,validateAttempt:e=>!1});cn("HAMMER_MOTIF",50,{replaceIf:[FG],startOnHotbar:!1,baseCastTime:3,baseRecastTime:4,baseManaCost:0,applicationDelay:0,validateAttempt:e=>X0.condition(e)&&!e.hasResourceAvailable("HAMMER_TIME"),onConfirm:e=>e.resources.get("WEAPON_CANVAS").gain(1)});Hi("STEEL_MUSE",50,"cd_STEEL_MUSE",{replaceIf:[zG],cooldown:60,maxCharges:2,validateAttempt:e=>!1});Hi("STRIKING_MUSE",50,"cd_STEEL_MUSE",{replaceIf:[jG],startOnHotbar:!1,requiresCombat:!0,cooldown:60,maxCharges:2,validateAttempt:e=>e.hasResourceAvailable("WEAPON_CANVAS"),onConfirm:e=>{e.tryConsumeResource("WEAPON_CANVAS"),e.gainStatus("HAMMER_TIME",3)},highlightIf:e=>e.hasResourceAvailable("WEAPON_CANVAS")});const TN=[{newSkill:"HAMMER_STAMP",condition:e=>!e.hasTraitUnlocked("ENHANCED_PICTOMANCY_II")||e.getHammerStacks()===3},{newSkill:"HAMMER_BRUSH",condition:e=>e.hasTraitUnlocked("ENHANCED_PICTOMANCY_II")&&e.getHammerStacks()===2},{newSkill:"POLISHING_HAMMER",condition:e=>e.hasTraitUnlocked("ENHANCED_PICTOMANCY_II")&&e.getHammerStacks()===1}],ZG=[["HAMMER_STAMP",50,[["NEVER",420],["PICTOMANCY_MASTERY_II",500],["PICTOMANCY_MASTERY_III",540],["PICTOMANCY_MASTERY_IV",560]],1.38],["HAMMER_BRUSH",86,[["NEVER",560],["PICTOMANCY_MASTERY_IV",580]],1.25],["POLISHING_HAMMER",86,[["NEVER",580],["PICTOMANCY_MASTERY_IV",600]],2.1]];ZG.forEach(([e,t,a,o],s)=>cn(e,t,{replaceIf:TN,baseCastTime:0,startOnHotbar:s===0,basePotency:a,falloff:.7,applicationDelay:o,validateAttempt:c=>TN[s].condition(c)&&c.hasResourceAvailable("HAMMER_TIME"),onConfirm:c=>c.tryConsumeResource("HAMMER_TIME"),highlightIf:c=>c.hasResourceAvailable("HAMMER_TIME"),jobPotencyModifiers:c=>[J.AutoCDH]}));cn("LANDSCAPE_MOTIF",70,{replaceIf:[q0],baseCastTime:3,baseRecastTime:4,baseManaCost:0,applicationDelay:0,validateAttempt:e=>!1});cn("STARRY_SKY_MOTIF",70,{replaceIf:[YG],startOnHotbar:!1,baseCastTime:3,baseRecastTime:4,baseManaCost:0,applicationDelay:0,validateAttempt:e=>q0.condition(e)&&!e.hasResourceAvailable("STARRY_MUSE"),onConfirm:e=>e.resources.get("LANDSCAPE_CANVAS").gain(1)});Hi("SCENIC_MUSE",70,"cd_SCENIC_MUSE",{replaceIf:[Z0],applicationDelay:0,cooldown:120,validateAttempt:e=>!1});Hi("STARRY_MUSE",70,"cd_SCENIC_MUSE",{replaceIf:[KG],startOnHotbar:!1,requiresCombat:!0,applicationDelay:0,cooldown:120,validateAttempt:e=>Z0.condition(e),onConfirm:e=>{e.tryConsumeResource("LANDSCAPE_CANVAS"),e.hasTraitUnlocked("ENHANCED_PICTOMANCY")&&(e.gainStatus("HYPERPHANTASIA",5),e.gainStatus("INSPIRATION")),e.hasTraitUnlocked("ENHANCED_PICTOMANCY_V")&&e.gainStatus("STARSTRUCK"),e.gainStatus("STARRY_MUSE"),e.gainStatus("SUBTRACTIVE_SPECTRUM")},highlightIf:e=>e.hasResourceAvailable("LANDSCAPE_CANVAS")});Ye("PCT","TEMPERA_COAT",10,"cd_TEMPERA_COAT",{rscType:"TEMPERA_COAT",replaceIf:[{newSkill:"TEMPERA_COAT_POP",condition:e=>e.hasResourceAvailable("TEMPERA_COAT")}],applicationDelay:0,cooldown:120});Hi("TEMPERA_GRASSA",88,"cd_GRASSA",{replaceIf:[{newSkill:"TEMPERA_GRASSA_POP",condition:e=>e.hasResourceAvailable("TEMPERA_GRASSA")}],applicationDelay:0,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("TEMPERA_COAT"),onConfirm:e=>{e.tryConsumeResource("TEMPERA_COAT"),e.gainStatus("TEMPERA_GRASSA")},highlightIf:e=>e.hasResourceAvailable("TEMPERA_COAT")});Hi("TEMPERA_COAT_POP",10,"cd_TEMPERA_POP",{replaceIf:[{newSkill:"TEMPERA_GRASSA_POP",condition:e=>e.hasResourceAvailable("TEMPERA_GRASSA")}],startOnHotbar:!1,applicationDelay:0,animationLock:ma,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("TEMPERA_COAT"),onConfirm:e=>{e.tryConsumeResource("TEMPERA_COAT");const t=e.cooldowns.get("cd_TEMPERA_COAT").timeTillNextStackAvailable();console.assert(t>0,"attempted to pop Tempera Coat when no timer for Tempera Coat CD was active"),e.cooldowns.get("cd_TEMPERA_COAT").overrideTimeTillNextStack(Math.max(0,t-60))},highlightIf:e=>e.hasResourceAvailable("TEMPERA_COAT")});Hi("TEMPERA_GRASSA_POP",10,"cd_TEMPERA_POP",{replaceIf:[{newSkill:"TEMPERA_COAT_POP",condition:e=>e.hasResourceAvailable("TEMPERA_COAT")}],startOnHotbar:!1,applicationDelay:0,animationLock:ma,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("TEMPERA_GRASSA"),onConfirm:e=>{e.tryConsumeResource("TEMPERA_GRASSA");const t=e.cooldowns.get("cd_TEMPERA_COAT").timeTillNextStackAvailable();console.assert(t>0,"attempted to pop Tempera Grassa when no timer for Tempera Coat CD was active"),e.cooldowns.get("cd_TEMPERA_COAT").overrideTimeTillNextStack(Math.max(0,t-30))},highlightIf:e=>e.hasResourceAvailable("TEMPERA_GRASSA")});Ye("PCT","SMUDGE",20,"cd_SMUDGE",{rscType:"SMUDGE",applicationDelay:0,cooldown:20,animationLock:Wt});Object.keys(WR).forEach(e=>zt(e,`RDM/${Ge[e].name}.png`));class QG extends Xt{jobSpecificSelfTargetedBuffViewProps(){return[...Object.keys(WR).map(t=>this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){const a=this.state.resources,o=a.get("WHITE_MANA").availableAmount(),s=a.get("BLACK_MANA").availableAmount(),c=a.get("MANA_STACKS").availableAmount();return[{kind:"bar",name:N({en:"white mana",zh:""}),color:t.rdm.whiteMana,progress:o/100,valueString:o.toFixed(0)},{kind:"bar",name:N({en:"black mana",zh:""}),color:t.rdm.blackMana,progress:s/100,valueString:s.toFixed(0)},{kind:"counter",name:N({en:"mana stacks",zh:""}),color:t.rdm.manaStack,currentStacks:c,maxStacks:3}]}}const ta=(e,t,a)=>{Ve("RDM",e,t,a??{})};ta("WHITE_MANA",100);ta("BLACK_MANA",100);ta("MANA_STACKS",3);ta("ACCELERATION",1,{timeout:20});ta("DUALCAST",1,{timeout:15});ta("EMBOLDEN",1,{timeout:20});ta("GRAND_IMPACT_READY",1,{timeout:30,warnOnTimeout:!0});ta("MAGICK_BARRIER",1,{timeout:10});ta("MAGICKED_SWORDPLAY",3,{timeout:30,warnOnTimeout:!0});ta("MANAFICATION",1,{timeout:30});ta("PREFULGENCE_READY",1,{timeout:30,warnOnTimeout:!0});ta("THORNED_FLOURISH",1,{timeout:30,warnOnTimeout:!0});ta("VERFIRE_READY",1,{timeout:30});ta("VERSTONE_READY",1,{timeout:30});ta("RDM_MELEE_COUNTER",2,{timeout:30});ta("RDM_FINISHER_COUNTER",2,{timeout:30});ta("RDM_AOE_COUNTER",2,{timeout:30});const Q0=["IMPACT","VERAERO","VERTHUNDER","VERAERO_III","VERTHUNDER_III"],$0=["VERHOLY","VERFLARE","SCORCH","RESOLUTION"];class $G extends qt{constructor(t){super(t);const a=this.hasTraitUnlocked("ENHANCED_SWIFTCAST")?40:60,o=this.hasTraitUnlocked("RED_MAGIC_MASTERY")?35:45;[new Ue("cd_SWIFTCAST",a,1,1),new Ue("cd_CONTRE_SIXTE",o,1,1)].forEach(c=>this.cooldowns.set(c));const s=this.hasTraitUnlocked("ENHANCED_ACCELERATION")?2:1;this.cooldowns.set(new Ue("cd_ACCELERATION",55,s,s)),this.registerRecurringEvents()}get statusPropsGenerator(){return new QG(this)}jobSpecificAddDamageBuffCovers(t,a){this.hasResourceAvailable("EMBOLDEN")&&a.aspect!==Ie.Physical&&t.addBuff(H.Embolden),a.name==="IMPACT"&&this.hasResourceAvailable("ACCELERATION")&&t.addBuff(H.Acceleration)}hasThreeManaStacks(){return this.hasResourceAvailable("MANA_STACKS",3)}getFinisherCounter(){return this.resources.get("RDM_FINISHER_COUNTER").availableAmount()}processDualcastAndInstants(t){$0.includes(t)||t==="GRAND_IMPACT"&&this.tryConsumeResource("GRAND_IMPACT_READY")||Q0.includes(t)&&this.tryConsumeResource("ACCELERATION")||this.tryConsumeResource("DUALCAST")||this.tryConsumeResource("SWIFTCAST")||this.gainStatus("DUALCAST")}gainColorMana(t){const a=this.resources.get("WHITE_MANA"),o=this.resources.get("BLACK_MANA");if(t.w){const s=o.availableAmount()-a.availableAmount()>30;a.gain(s?Math.floor(t.w/2):t.w)}if(t.b){const s=a.availableAmount()-o.availableAmount()>30;o.gain(s?Math.floor(t.b/2):t.b)}Math.abs(o.availableAmount()-a.availableAmount())>30&&I.reportWarning({kind:"custom",en:"mana difference became more than 30",zh:""})}colorManaExceeds(t){return this.hasResourceAvailable("MAGICKED_SWORDPLAY")||this.hasResourceAvailable("WHITE_MANA",t)&&this.hasResourceAvailable("BLACK_MANA",t)}consumeColorMana(t){this.hasResourceAvailable("MAGICKED_SWORDPLAY")?this.tryConsumeResource("MAGICKED_SWORDPLAY"):(this.resources.get("WHITE_MANA").consume(t),this.resources.get("BLACK_MANA").consume(t))}maybeGainVerproc(t,a=.5){this.maybeGainProc(t,a,!0)}processComboStatus(t){const a=this.resources.get("MANA_STACKS"),o=this.config.level>=80,s=this.config.level>=90,c=this.resources.get("RDM_MELEE_COUNTER").availableAmount(),d=this.resources.get("RDM_FINISHER_COUNTER").availableAmount(),f=this.resources.get("RDM_AOE_COUNTER").availableAmount(),h=c+d+f>0;let m;t==="ENCHANTED_RIPOSTE"||t==="RIPOSTE"?(h&&I.reportComboBreak(),m=[1,0,0],t==="ENCHANTED_RIPOSTE"&&a.gain(1)):t==="ENCHANTED_ZWERCHHAU"||t==="ZWERCHHAU"?(h&&c!==1&&I.reportComboBreak(),m=[c===1?2:0,0,0],t==="ENCHANTED_ZWERCHHAU"&&a.gain(1)):t==="ENCHANTED_REDOUBLEMENT"||t==="REDOUBLEMENT"?(h&&c!==2&&I.reportComboBreak(),m=[0,0,0],t==="ENCHANTED_REDOUBLEMENT"&&a.gain(1)):t==="VERHOLY"||t==="VERFLARE"?(m=[0,o?1:0,0],a.consume(3)):t==="SCORCH"?m=[0,s?2:0,0]:t==="RESOLUTION"?m=[0,0,0]:t==="ENCHANTED_MOULINET"?(c+d>0&&I.reportComboBreak(),m=[0,0,1],a.gain(1)):t==="ENCHANTED_MOULINET_II"?(m=[0,0,2],a.gain(1)):t==="ENCHANTED_MOULINET_III"?(m=[0,0,0],a.gain(1)):t==="ENCHANTED_REPRISE"?m=[c,d,f]:(h&&I.reportComboBreak(),m=[0,0,0],a.consume(a.availableAmount())),this.setComboState("RDM_MELEE_COUNTER",m[0]),this.setComboState("RDM_FINISHER_COUNTER",m[1]),this.setComboState("RDM_AOE_COUNTER",m[2])}}const Yn=(e,t,a)=>{const o=Le(a.onConfirm,s=>s.processDualcastAndInstants(e),s=>s.processComboStatus(e));return Xa("RDM",e,t,{...a,aspect:a.isPhysical?Ie.Physical:void 0,castTime:s=>s.config.adjustedCastTime(a.baseCastTime),recastTime:s=>s.config.adjustedGCD(),manaCost:a.baseManaCost??0,potency:a.basePotency,jobPotencyModifiers:s=>{const c=[];return s.hasResourceAvailable("EMBOLDEN")&&c.push(J.EmboldenMagic),a.jobPotencyModifiers&&c.push(...a.jobPotencyModifiers(s)),c},isInstantFn:s=>$0.includes(e)||e==="GRAND_IMPACT"||Q0.includes(e)&&s.hasResourceAvailable("ACCELERATION")||s.hasResourceAvailable("DUALCAST")||s.hasResourceAvailable("SWIFTCAST"),onConfirm:o})},Ii=(e,t,a)=>{const o=!e.toString().startsWith("ENCHANTED"),s=Le(c=>c.processComboStatus(e),a.onConfirm);return on("RDM",e,t,{...a,aspect:o?Ie.Physical:void 0,onConfirm:s,jobPotencyModifiers:c=>{const d=[];return o||c.hasResourceAvailable("EMBOLDEN")&&d.push(J.EmboldenMagic),d}})},Is=(e,t,a,o)=>at("RDM",e,t,a,{aspect:o.isPhysical?Ie.Physical:void 0,jobPotencyModifiers:s=>!o.isPhysical&&s.hasResourceAvailable("EMBOLDEN")?[J.EmboldenMagic]:[],...o}),J0={newSkill:"SCORCH",condition:e=>e.getFinisherCounter()===1},eO={newSkill:"RESOLUTION",condition:e=>e.getFinisherCounter()===2},ef={newSkill:"GRAND_IMPACT",condition:e=>e.getFinisherCounter()<1&&e.hasResourceAvailable("GRAND_IMPACT_READY")},yu=[{newSkill:"JOLT_II",condition:e=>e.getFinisherCounter()<1&&!e.hasResourceAvailable("GRAND_IMPACT_READY")},J0,eO,ef];Yn("JOLT_II",62,{replaceIf:yu,autoUpgrade:{trait:"RED_MAGIC_MASTERY_III",otherSkill:"JOLT_III"},baseCastTime:2,baseManaCost:200,applicationDelay:.8,basePotency:280,validateAttempt:e=>e.getFinisherCounter()<1&&!e.hasResourceAvailable("GRAND_IMPACT_READY"),onConfirm:e=>e.gainColorMana({w:2,b:2})});Yn("JOLT_III",84,{replaceIf:yu,autoDowngrade:{trait:"RED_MAGIC_MASTERY_III",otherSkill:"JOLT_II"},baseCastTime:2,baseManaCost:200,applicationDelay:.8,basePotency:360,validateAttempt:e=>e.getFinisherCounter()<1&&!e.hasResourceAvailable("GRAND_IMPACT_READY"),onConfirm:e=>e.gainColorMana({w:2,b:2})});const tO=[["NEVER",300],["RED_MAGIC_MASTERY_II",340],["RED_MAGIC_MASTERY_III",380]];Yn("VERSTONE",30,{baseCastTime:2,baseManaCost:200,applicationDelay:.8,basePotency:tO,validateAttempt:e=>e.hasResourceAvailable("VERSTONE_READY"),onConfirm:e=>{e.gainColorMana({w:5}),e.tryConsumeResource("VERSTONE_READY")},highlightIf:e=>e.hasResourceAvailable("VERSTONE_READY")});Yn("VERFIRE",26,{baseCastTime:2,baseManaCost:200,applicationDelay:.8,basePotency:tO,validateAttempt:e=>e.hasResourceAvailable("VERFIRE_READY"),onConfirm:e=>{e.gainColorMana({b:5}),e.tryConsumeResource("VERFIRE_READY")},highlightIf:e=>e.hasResourceAvailable("VERFIRE_READY")});const kT={newSkill:"VERHOLY",condition:e=>e.hasThreeManaStacks()},UT={newSkill:"VERFLARE",condition:e=>e.hasThreeManaStacks()};Yn("VERAERO",10,{replaceIf:[kT],autoUpgrade:{trait:"RED_MAGIC_MASTERY_II",otherSkill:"VERAERO_III"},baseCastTime:5,baseManaCost:400,applicationDelay:.76,basePotency:360,validateAttempt:e=>!e.hasThreeManaStacks(),onConfirm:e=>{e.gainColorMana({w:6}),e.hasResourceAvailable("ACCELERATION")?e.gainStatus("VERSTONE_READY"):e.maybeGainVerproc("VERSTONE_READY")}});Yn("VERTHUNDER",4,{replaceIf:[UT],autoUpgrade:{trait:"RED_MAGIC_MASTERY_II",otherSkill:"VERTHUNDER_III"},baseCastTime:5,baseManaCost:400,applicationDelay:.76,basePotency:360,validateAttempt:e=>!e.hasThreeManaStacks(),onConfirm:e=>{e.gainColorMana({b:6}),e.hasResourceAvailable("ACCELERATION")?e.gainStatus("VERFIRE_READY"):e.maybeGainVerproc("VERFIRE_READY")}});const nO=[["NEVER",380],["ENCHANTED_BLADE_MASTERY",440]];Yn("VERAERO_III",82,{replaceIf:[kT],autoDowngrade:{trait:"RED_MAGIC_MASTERY_II",otherSkill:"VERAERO"},baseCastTime:5,baseManaCost:400,applicationDelay:.76,basePotency:nO,validateAttempt:e=>!e.hasThreeManaStacks(),onConfirm:e=>{e.gainColorMana({w:6}),e.hasResourceAvailable("ACCELERATION")?e.gainStatus("VERSTONE_READY"):e.maybeGainVerproc("VERSTONE_READY")}});Yn("VERTHUNDER_III",82,{replaceIf:[UT],autoDowngrade:{trait:"RED_MAGIC_MASTERY_II",otherSkill:"VERTHUNDER"},baseCastTime:5,baseManaCost:400,applicationDelay:.76,basePotency:nO,validateAttempt:e=>!e.hasThreeManaStacks(),onConfirm:e=>{e.gainColorMana({b:6}),e.hasResourceAvailable("ACCELERATION")?e.gainStatus("VERFIRE_READY"):e.maybeGainVerproc("VERFIRE_READY")}});const aO=[["NEVER",100],["RED_MAGIC_MASTERY",120],["RED_MAGIC_MASTERY_III",140]];Yn("VERAERO_II",22,{replaceIf:[kT],baseCastTime:2,baseManaCost:400,applicationDelay:.8,basePotency:aO,falloff:0,validateAttempt:e=>!e.hasThreeManaStacks(),onConfirm:e=>e.gainColorMana({w:7})});Yn("VERTHUNDER_II",18,{replaceIf:[UT],baseCastTime:2,baseManaCost:400,falloff:0,applicationDelay:.8,basePotency:aO,validateAttempt:e=>!e.hasThreeManaStacks(),onConfirm:e=>e.gainColorMana({b:7})});Yn("IMPACT",66,{replaceIf:[J0,eO,ef],baseCastTime:5,baseManaCost:400,falloff:0,applicationDelay:.76,basePotency:[["NEVER",200],["RED_MAGIC_MASTERY_III",210]],jobPotencyModifiers:e=>e.hasResourceAvailable("ACCELERATION")?[J.AccelerationImpact]:[],validateAttempt:e=>e.getFinisherCounter()<1&&!e.hasResourceAvailable("GRAND_IMPACT_READY"),onConfirm:e=>e.gainColorMana({w:3,b:3})});Yn("GRAND_IMPACT",96,{replaceIf:yu,startOnHotbar:!1,baseCastTime:0,baseManaCost:0,basePotency:600,falloff:.55,applicationDelay:1.55,validateAttempt:ef.condition,highlightIf:ef.condition,onConfirm:e=>e.gainColorMana({w:3,b:3})});Ii("RIPOSTE",1,{replaceIf:[{newSkill:"ENCHANTED_RIPOSTE",condition:e=>e.colorManaExceeds(20)}],applicationDelay:.62,potency:130,recastTime:2.5,validateAttempt:e=>!e.colorManaExceeds(20)});Ii("ZWERCHHAU",35,{replaceIf:[{newSkill:"ENCHANTED_ZWERCHHAU",condition:e=>e.colorManaExceeds(15)}],applicationDelay:.62,potency:100,combo:{potency:150,resource:"RDM_MELEE_COUNTER",resourceValue:1},recastTime:2.5,validateAttempt:e=>!e.colorManaExceeds(15),highlightIf:e=>e.resources.get("RDM_MELEE_COUNTER").availableAmount()===1});Ii("REDOUBLEMENT",50,{replaceIf:[{newSkill:"ENCHANTED_REDOUBLEMENT",condition:e=>e.colorManaExceeds(15)}],applicationDelay:.62,potency:100,combo:{potency:230,resource:"RDM_MELEE_COUNTER",resourceValue:2},recastTime:2.5,validateAttempt:e=>!e.colorManaExceeds(15),highlightIf:e=>e.resources.get("RDM_MELEE_COUNTER").availableAmount()===2});Ii("ENCHANTED_RIPOSTE",50,{startOnHotbar:!1,replaceIf:[{newSkill:"RIPOSTE",condition:e=>!e.colorManaExceeds(20)}],applicationDelay:.62,potency:[["NEVER",220],["RED_MAGIC_MASTERY_III",280],["ENCHANTED_BLADE_MASTERY",340]],recastTime:1.5,validateAttempt:e=>e.colorManaExceeds(20),onConfirm:e=>e.consumeColorMana(20)});Ii("ENCHANTED_ZWERCHHAU",50,{startOnHotbar:!1,replaceIf:[{newSkill:"ZWERCHHAU",condition:e=>!e.colorManaExceeds(15)}],applicationDelay:.62,potency:[["NEVER",100],["RED_MAGIC_MASTERY_III",150],["ENCHANTED_BLADE_MASTERY",190]],combo:{potency:[["NEVER",290],["RED_MAGIC_MASTERY_III",340],["ENCHANTED_BLADE_MASTERY",380]],resource:"RDM_MELEE_COUNTER",resourceValue:1},recastTime:1.5,validateAttempt:e=>e.colorManaExceeds(15),onConfirm:e=>e.consumeColorMana(15),highlightIf:e=>e.resources.get("RDM_MELEE_COUNTER").availableAmount()===1});Ii("ENCHANTED_REDOUBLEMENT",50,{startOnHotbar:!1,replaceIf:[{newSkill:"REDOUBLEMENT",condition:e=>!e.colorManaExceeds(15)}],applicationDelay:.62,potency:[["NEVER",100],["RED_MAGIC_MASTERY_III",130],["ENCHANTED_BLADE_MASTERY",190]],combo:{potency:[["NEVER",470],["RED_MAGIC_MASTERY_III",500],["ENCHANTED_BLADE_MASTERY",560]],resource:"RDM_MELEE_COUNTER",resourceValue:2},recastTime:2.2,validateAttempt:e=>e.colorManaExceeds(15),onConfirm:e=>e.consumeColorMana(15),highlightIf:e=>e.resources.get("RDM_MELEE_COUNTER").availableAmount()===2});const tf=e=>e.resources.get("WHITE_MANA").available(5)&&e.resources.get("BLACK_MANA").available(5);Ii("REPRISE",76,{replaceIf:[{newSkill:"ENCHANTED_REPRISE",condition:e=>tf(e)}],applicationDelay:.62,potency:100,recastTime:2.5,validateAttempt:e=>!tf(e)});Ii("ENCHANTED_REPRISE",76,{startOnHotbar:!1,replaceIf:[{newSkill:"REPRISE",condition:e=>!tf(e)}],applicationDelay:.62,potency:[["NEVER",290],["RED_MAGIC_MASTERY_III",340],["ENCHANTED_BLADE_MASTERY",420]],recastTime:2.5,validateAttempt:e=>tf(e),onConfirm:e=>{e.resources.get("WHITE_MANA").consume(5),e.resources.get("BLACK_MANA").consume(5)}});const Zi=[{newSkill:"MOULINET",condition:e=>e.resources.get("RDM_AOE_COUNTER").availableAmount()===0&&!e.colorManaExceeds(20)||!e.colorManaExceeds(15)},{newSkill:"ENCHANTED_MOULINET",condition:e=>e.colorManaExceeds(20)&&e.resources.get("RDM_AOE_COUNTER").availableAmount()===0},{newSkill:"ENCHANTED_MOULINET_II",condition:e=>e.colorManaExceeds(15)&&e.resources.get("RDM_AOE_COUNTER").availableAmount()===1},{newSkill:"ENCHANTED_MOULINET_III",condition:e=>e.colorManaExceeds(15)&&e.resources.get("RDM_AOE_COUNTER").availableAmount()===2}];Ii("MOULINET",52,{replaceIf:Zi,falloff:0,applicationDelay:.8,potency:60,recastTime:2.5,validateAttempt:Zi[0].condition});Ii("ENCHANTED_MOULINET",52,{startOnHotbar:!1,replaceIf:Zi,falloff:0,applicationDelay:.8,potency:130,recastTime:1.5,validateAttempt:Zi[1].condition,onConfirm:e=>e.consumeColorMana(20)});Ii("ENCHANTED_MOULINET_II",52,{startOnHotbar:!1,replaceIf:Zi,falloff:0,applicationDelay:.8,potency:140,recastTime:1.5,validateAttempt:Zi[2].condition,onConfirm:e=>e.consumeColorMana(15),highlightIf:Zi[2].condition});Ii("ENCHANTED_MOULINET_III",52,{startOnHotbar:!1,replaceIf:Zi,falloff:0,applicationDelay:.8,potency:150,recastTime:1.5,validateAttempt:Zi[3].condition,onConfirm:e=>e.consumeColorMana(15),highlightIf:Zi[3].condition});const iO=[["NEVER",600],["ENCHANTED_BLADE_MASTERY",650]];Yn("VERHOLY",70,{startOnHotbar:!1,baseCastTime:0,baseManaCost:400,falloff:.55,applicationDelay:1.43,basePotency:iO,validateAttempt:e=>e.hasThreeManaStacks(),highlightIf:e=>e.hasThreeManaStacks(),onConfirm:e=>{e.resources.get("WHITE_MANA").availableAmount()<e.resources.get("BLACK_MANA").availableAmount()?e.gainStatus("VERSTONE_READY"):e.maybeGainVerproc("VERSTONE_READY",.2),e.gainColorMana({w:11})}});Yn("VERFLARE",68,{startOnHotbar:!1,baseCastTime:0,baseManaCost:400,falloff:.55,applicationDelay:1.43,basePotency:iO,validateAttempt:e=>e.hasThreeManaStacks(),highlightIf:e=>e.hasThreeManaStacks(),onConfirm:e=>{e.resources.get("BLACK_MANA").availableAmount()<e.resources.get("WHITE_MANA").availableAmount()?e.gainStatus("VERFIRE_READY"):e.maybeGainVerproc("VERFIRE_READY",.2),e.gainColorMana({b:11})}});Yn("SCORCH",80,{startOnHotbar:!1,replaceIf:yu,baseCastTime:0,baseManaCost:400,falloff:.55,applicationDelay:1.83,basePotency:[["NEVER",680],["ENCHANTED_BLADE_MASTERY",750]],validateAttempt:e=>e.getFinisherCounter()===1,onConfirm:e=>e.gainColorMana({w:4,b:4}),highlightIf:e=>e.getFinisherCounter()===1});Yn("RESOLUTION",90,{startOnHotbar:!1,replaceIf:yu,baseCastTime:0,baseManaCost:400,falloff:.55,applicationDelay:1.56,basePotency:[["NEVER",750],["ENCHANTED_BLADE_MASTERY",850]],validateAttempt:e=>e.getFinisherCounter()===2,onConfirm:e=>e.gainColorMana({w:4,b:4}),highlightIf:e=>e.getFinisherCounter()===2});Yn("VERCURE",54,{baseCastTime:2,baseManaCost:500,applicationDelay:.8,basePotency:0});Yn("VERRAISE",64,{baseCastTime:10,baseManaCost:2400,applicationDelay:.81,basePotency:0});Ye("RDM","EMBOLDEN",58,"cd_EMBOLDEN",{replaceIf:[{newSkill:"VICE_OF_THORNS",condition:e=>e.hasResourceAvailable("THORNED_FLOURISH")}],rscType:"EMBOLDEN",applicationDelay:.62,cooldown:120,onApplication:e=>{e.hasTraitUnlocked("ENHANCED_EMBOLDEN")&&e.gainStatus("THORNED_FLOURISH")}});Ye("RDM","MANAFICATION",60,"cd_MANAFICATION",{replaceIf:[{newSkill:"PREFULGENCE",condition:e=>e.hasResourceAvailable("PREFULGENCE_READY")}],rscType:"MANAFICATION",requiresCombat:!0,applicationDelay:0,cooldown:110,onApplication:e=>{e.hasTraitUnlocked("ENHANCED_MANAFICATION")&&e.gainStatus("PREFULGENCE_READY"),e.gainStatus("MAGICKED_SWORDPLAY",3),(e.hasResourceAvailable("RDM_MELEE_COUNTER")||e.hasResourceAvailable("RDM_FINISHER_COUNTER")||e.hasResourceAvailable("RDM_AOE_COUNTER"))&&I.reportComboBreak(),e.setComboState("RDM_MELEE_COUNTER",0),e.setComboState("RDM_FINISHER_COUNTER",0),e.setComboState("RDM_AOE_COUNTER",0)}});Is("CORPS_A_CORPS",6,"cd_CORPS_A_CORPS",{isPhysical:!0,applicationDelay:.62,potency:130,cooldown:35,maxCharges:2,animationLock:Wt});const oO=[["NEVER",130],["ENHANCED_DISPLACEMENT",180]];Is("ENGAGEMENT",40,"cd_DISPLACEMENT",{isPhysical:!0,applicationDelay:.62,potency:oO,cooldown:35,maxCharges:2});Is("DISPLACEMENT",40,"cd_DISPLACEMENT",{isPhysical:!0,applicationDelay:.62,potency:oO,cooldown:35,maxCharges:2,animationLock:Wt});Is("FLECHE",45,"cd_FLECHE",{isPhysical:!0,applicationDelay:1.16,potency:[["NEVER",460],["ENCHANTED_BLADE_MASTERY",480]],cooldown:25});Is("CONTRE_SIXTE",56,"cd_CONTRE_SIXTE",{isPhysical:!0,falloff:0,applicationDelay:1.16,potency:[["NEVER",380],["ENCHANTED_BLADE_MASTERY",420]],cooldown:35});Ye("RDM","ACCELERATION",50,"cd_ACCELERATION",{rscType:"ACCELERATION",applicationDelay:0,cooldown:55,maxCharges:2,onApplication:e=>{e.hasTraitUnlocked("ENHANCED_ACCELERATION_II")&&(e.hasResourceAvailable("GRAND_IMPACT_READY")&&I.reportWarning({kind:"overwrite",rsc:"GRAND_IMPACT_READY"}),e.gainStatus("GRAND_IMPACT_READY"))}});Ye("RDM","MAGICK_BARRIER",86,"cd_MAGICK_BARRIER",{rscType:"MAGICK_BARRIER",applicationDelay:0,cooldown:120});Is("VICE_OF_THORNS",92,"cd_VICE_OF_THORNS",{startOnHotbar:!1,falloff:.55,applicationDelay:.8,potency:950,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("THORNED_FLOURISH"),onConfirm:e=>e.tryConsumeResource("THORNED_FLOURISH"),highlightIf:e=>e.hasResourceAvailable("THORNED_FLOURISH")});Is("PREFULGENCE",100,"cd_PREFULGENCE",{startOnHotbar:!1,falloff:.55,applicationDelay:1.42,potency:1200,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("PREFULGENCE_READY"),onConfirm:e=>e.tryConsumeResource("PREFULGENCE_READY"),highlightIf:e=>e.hasResourceAvailable("PREFULGENCE_READY")});Object.keys(XR).forEach(e=>zt(e,`RPR/${Ge[e].name}.png`));class JG extends Xt{jobSpecificOtherTargetedBuffViewProps(){return this.makeTargetedTimers("DEATHS_DESIGN")}jobSpecificSelfTargetedBuffViewProps(){return[...Object.keys(XR).filter(t=>t!=="DEATHS_DESIGN").map(t=>t==="SOULSOW"?this.makeCommonTimerless(t):this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){const a=this.state.resources,o=a.get("SOUL").availableAmount(),s=a.get("SHROUD").availableAmount(),c=a.get("LEMURE_SHROUD").availableAmount(),d=a.get("VOID_SHROUD").availableAmount(),f=a.get("RPR_COMBO"),h=a.get("RPR_AOE_COMBO"),m=f.available(1)?f.pendingChange?.timeTillEvent:h.available(1)?h.pendingChange?.timeTillEvent:void 0,R=[{kind:"text",name:N({en:"Combo Timer",zh:""}),text:m?.toFixed(3)??"N/A"},{kind:"bar",name:N({en:"Soul Gauge",zh:""}),color:o<50?t.rpr.soulGaugeLow:t.rpr.soulGaugeHigh,progress:o/100,valueString:Math.floor(o)+"/100"}];return this.state.hasTraitUnlocked("SHROUD_GAUGE")&&R.push({kind:"bar",name:N({en:"Shroud Gauge",zh:""}),color:s<50?t.rpr.shroudGaugeLow:t.rpr.shroudGaugeHigh,progress:s/100,valueString:Math.floor(s)+"/100"},{kind:"counter",name:N({en:"Lemure Shroud",zh:""}),color:t.rpr.lemureShroud,currentStacks:c,maxStacks:5}),this.state.hasTraitUnlocked("VOID_SOUL")&&R.push({kind:"counter",name:N({en:"Void Shroud",zh:""}),color:d<2?t.rpr.voidShroudLow:t.rpr.voidShroudHigh,currentStacks:d,maxStacks:5}),R}}function _t(e,t,a){Ve("RPR",e,t,a??{})}_t("SOUL",100);_t("SHROUD",100);_t("DEATHS_DESIGN",1,{});_t("SOUL_REAVER",2,{timeout:30});_t("ENHANCED_GIBBET",1,{timeout:60});_t("ENHANCED_GALLOWS",1,{timeout:60});_t("EXECUTIONER",2,{timeout:30});_t("ENSHROUDED",1,{timeout:30});_t("LEMURE_SHROUD",5,{timeout:30});_t("VOID_SHROUD",5);_t("OBLATIO",1,{timeout:30});_t("ENHANCED_VOID_REAPING",1,{timeout:30});_t("ENHANCED_CROSS_REAPING",1,{timeout:30});_t("IDEAL_HOST",1,{timeout:30});_t("PERFECTIO_OCCULTA",1,{timeout:30});_t("PERFECTIO_PARATA",1,{timeout:30});_t("ARCANE_CIRCLE",1,{timeout:20});_t("CIRCLE_OF_SACRIFICE",1,{timeout:5});_t("BLOODSOWN_CIRCLE",1,{timeout:6});_t("IMMORTAL_SACRIFICE",8,{timeout:30});_t("ARCANE_CREST",1,{timeout:5});_t("CREST_OF_TIME_BORROWED",1,{timeout:5});_t("CREST_OF_TIME_RETURNED",1,{timeout:15});_t("SOULSOW",1,{default:1});_t("THRESHOLD",1,{timeout:10});_t("ENHANCED_HARPE",1,{timeout:10});_t("HELLS_INGRESS_USED",1);_t("RPR_COMBO",2,{timeout:30});_t("RPR_AOE_COMBO",1,{timeout:30});class eB extends qt{constructor(t){super(t);const a=this.hasTraitUnlocked("TEMPERED_SOUL")?2:1;this.cooldowns.set(new Ue("cd_SOUL_SLICE",30,a,a)),this.registerRecurringEvents()}get statusPropsGenerator(){return new JG(this)}jobSpecificAddDamageBuffCovers(t,a){this.hasResourceAvailable("ARCANE_CIRCLE")&&t.addBuff(H.ArcaneCircle),t.targetList.some(o=>this.hasDebuffActive("DEATHS_DESIGN",o))&&t.addBuff(H.DeathsDesign)}refreshDeathsDesign(t){const a=this.debuffs.get("DEATHS_DESIGN",t),o=Math.min(this.debuffs.timeTillExpiry("DEATHS_DESIGN",t)+30,60);if(a.available(1)){a.overrideTimer(this,o);return}a.gain(1),this.debuffs.addDebuffEvent({rscType:"DEATHS_DESIGN",name:"drop Death's Design on target "+t,targetNumber:t,delay:o,fnOnRsc:s=>{s.consume(1)}})}setTimedResource(t,a){this.tryConsumeResource(t),this.resources.get(t).gain(a),this.enqueueResourceDrop(t)}processCombo(t){const a=this.resources.get("RPR_COMBO").availableAmount(),o=this.resources.get("RPR_AOE_COMBO").availableAmount(),[s,c]=new Map([["SLICE",[1,0]],["WAXING_SLICE",[a===1?2:0,0]],["INFERNAL_SLICE",[0,0]],["SPINNING_SCYTHE",[0,1]],["NIGHTMARE_SCYTHE",[0,0]]]).get(t)??[a,o];s!==a&&this.setComboState("RPR_COMBO",s),c!==o&&this.setComboState("RPR_AOE_COMBO",c)}processSoulGauge(t){const a=this.resources.get("SOUL");if(["SLICE","WAXING_SLICE","INFERNAL_SLICE","SPINNING_SCYTHE","NIGHTMARE_SCYTHE","HARPE","HARVEST_MOON"].includes(t)){a.gain(10);return}if(["SOUL_SLICE","SOUL_SCYTHE"].includes(t)){a.gain(50);return}if(["BLOOD_STALK","UNVEILED_GALLOWS","UNVEILED_GIBBET","GRIM_SWATHE","GLUTTONY"].includes(t)){a.consume(50);return}}processShroudGauge(t){const a=this.resources.get("SHROUD");if(["GALLOWS","GIBBET","EXECUTIONERS_GALLOWS","EXECUTIONERS_GIBBET","GUILLOTINE","EXECUTIONERS_GUILLOTINE"].includes(t)){a.gain(10);return}t==="ENSHROUD"&&!this.resources.get("IDEAL_HOST").available(1)&&a.consume(50)}processReaversExecutioner(t){const a=this.resources.get("SOUL_REAVER"),o=this.resources.get("EXECUTIONER");if(["GIBBET","GALLOWS","GUILLOTINE"].includes(t)){a.consume(1);return}if(["EXECUTIONERS_GIBBET","EXECUTIONERS_GALLOWS","EXECUTIONERS_GUILLOTINE"].includes(t)){o.consume(1);return}if(this.skillsList.get(t).cdName==="cd_GCD"&&(a.consume(a.availableAmount()),o.consume(o.availableAmount())),["BLOOD_STALK","UNVEILED_GALLOWS","UNVEILED_GIBBET","GRIM_SWATHE"].includes(t)){a.consume(a.availableAmount()),o.consume(o.availableAmount()),this.setTimedResource("SOUL_REAVER",1);return}if(t==="GLUTTONY"){if(a.consume(a.availableAmount()),o.consume(o.availableAmount()),this.hasTraitUnlocked("ENHANCED_GLUTTONY")){this.setTimedResource("EXECUTIONER",2);return}this.setTimedResource("SOUL_REAVER",2);return}}processGibbetGallows(t){const a=this.resources.get("SOUL_REAVER"),o=this.resources.get("EXECUTIONER");["GIBBET","GALLOWS","EXECUTIONERS_GIBBET","EXECUTIONERS_GALLOWS"].includes(t)||(a.consume(a.availableAmount()),o.consume(o.availableAmount()));const s=new Map([["GIBBET","ENHANCED_GIBBET"],["EXECUTIONERS_GIBBET","ENHANCED_GIBBET"],["GALLOWS","ENHANCED_GALLOWS"],["EXECUTIONERS_GALLOWS","ENHANCED_GALLOWS"]]),c=new Map([["GIBBET","ENHANCED_GALLOWS"],["EXECUTIONERS_GIBBET","ENHANCED_GALLOWS"],["GALLOWS","ENHANCED_GIBBET"],["EXECUTIONERS_GALLOWS","ENHANCED_GIBBET"]]),d=this.resources.get(s.get(t)),f=this.resources.get(c.get(t));d.consume(d.availableAmount()),f.consume(f.availableAmount()),f.gain(1)}processCircleOfSacrifice(t){if(!this.hasResourceAvailable("CIRCLE_OF_SACRIFICE"))return;Wi("RPR",t).potencyFn(this)>0&&(this.resources.get("IMMORTAL_SACRIFICE").availableAmount()===0?this.setTimedResource("IMMORTAL_SACRIFICE",1):this.resources.get("IMMORTAL_SACRIFICE").gain(1),this.tryConsumeResource("CIRCLE_OF_SACRIFICE",!0))}enterEnshroud(){this.hasResourceAvailable("IDEAL_HOST")&&this.resources.get("IDEAL_HOST").consume(1),this.hasTraitUnlocked("ENHANCED_ENSHROUD")&&this.setTimedResource("OBLATIO",1),this.setTimedResource("LEMURE_SHROUD",5),this.tryConsumeResource("PERFECTIO_PARATA",!0)}exitEnshroud(){this.tryConsumeResource("ENSHROUDED"),this.tryConsumeResource("OBLATIO"),this.tryConsumeResource("LEMURE_SHROUD"),this.tryConsumeResource("VOID_SHROUD"),this.tryConsumeResource("ENHANCED_CROSS_REAPING"),this.tryConsumeResource("ENHANCED_VOID_REAPING")}}const tB=new Set(["SHADOW_OF_DEATH","WHORL_OF_DEATH","HARVEST_MOON","HARPE","SOULSOW","VOID_REAPING","CROSS_REAPING","GRIM_REAPING","LEMURES_SLICE","LEMURES_SCYTHE","SACRIFICIUM","COMMUNIO","ARCANE_CIRCLE","HELLS_EGRESS","HELLS_INGRESS","REGRESS","ARCANE_CREST","FEINT","LEG_SWEEP","BLOODBATH","TRUE_NORTH","ARMS_LENGTH","SECOND_WIND","SPRINT","TINCTURE"]),kf=(e,t)=>a=>{const o=["GIBBET","GALLOWS","GUILLOTINE"].includes(t)?a.resources.get("SOUL_REAVER"):a.resources.get("EXECUTIONER");return a.resources.get(e).available(1)||o.available(1)&&!a.hasResourceAvailable("ENHANCED_GIBBET")&&!a.hasResourceAvailable("ENHANCED_GALLOWS")},PT=e=>e.hasResourceAvailable("SOUL_REAVER"),wT=e=>e.hasResourceAvailable("EXECUTIONER"),$i=e=>t=>t.resources.get("SOUL").availableAmount()>=e,GT=e=>tB.has(e),Uf=e=>Le(t=>t.processCombo(e),t=>t.processSoulGauge(e),t=>t.processShroudGauge(e),t=>t.processReaversExecutioner(e),t=>t.processCircleOfSacrifice(e)),BT=e=>{const t=[];return e.hasResourceAvailable("ARCANE_CIRCLE")&&t.push(J.ArcaneCircle),t},FT=(e,t)=>{const a=new Map;return t.targetList.forEach(o=>{e.debuffs.get("DEATHS_DESIGN",o).available(1)&&a.set(o,[J.DeathsDesign])}),a},Pf=(e,t,a)=>{const o=Le(Uf(e),a.onConfirm),s=bu(c=>!c.resources.get("ENSHROUDED").available(1)||GT(e),a.validateAttempt??(()=>!0));return Xa("RPR",e,t,{...a,recastTime:c=>c.config.adjustedGCD(a.recastTime),onConfirm:o,validateAttempt:s,isInstantFn:c=>!(e==="COMMUNIO"||e==="HARPE"&&!c.hasResourceAvailable("ENHANCED_HARPE")||e==="SOULSOW"&&c.isInCombat()),jobPotencyModifiers:BT,jobTargetPotencyModifiers:FT})},bn=(e,t,a)=>{const o=Le(Uf(e),a.onConfirm),s=bu(c=>!c.resources.get("ENSHROUDED").available(1)||GT(e),a.validateAttempt??(()=>!0));return on("RPR",e,t,{...a,onConfirm:o,jobPotencyModifiers:c=>{const d=BT(c);if(["GIBBET","EXECUTIONERS_GIBBET"].includes(e)&&c.hasResourceAvailable("ENHANCED_GIBBET")&&d.push(J.EnhancedGibbetGallows),["GALLOWS","EXECUTIONERS_GALLOWS"].includes(e)&&c.hasResourceAvailable("ENHANCED_GALLOWS")&&d.push(J.EnhancedGibbetGallows),e==="VOID_REAPING"&&c.hasResourceAvailable("ENHANCED_VOID_REAPING")&&d.push(J.EnhancedReaping),e==="CROSS_REAPING"&&c.hasResourceAvailable("ENHANCED_CROSS_REAPING")&&d.push(J.EnhancedReaping),e==="PLENTIFUL_HARVEST"&&c.hasResourceAvailable("IMMORTAL_SACRIFICE"))for(let f=0;f<c.resources.get("IMMORTAL_SACRIFICE").availableAmount();f++)d.push(J.ImmortalSacrifice);return d},jobTargetPotencyModifiers:FT,validateAttempt:s})},ka=(e,t,a,o)=>{const s=Le(Uf(e),o.onConfirm),c=bu(d=>!d.resources.get("ENSHROUDED").available(1)||GT(e),o.validateAttempt??(()=>!0));return at("RPR",e,t,a,{...o,onConfirm:s,validateAttempt:c,jobPotencyModifiers:BT,jobTargetPotencyModifiers:FT})};bn("SHADOW_OF_DEATH",10,{potency:300,aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:1.15,onConfirm:(e,t)=>e.refreshDeathsDesign(t.targetList[0])});bn("SLICE",1,{potency:[["NEVER",260],["MELEE_MASTERY_II_RPR",320],["MELEE_MASTERY_III_RPR",420]],aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.49});bn("WAXING_SLICE",5,{potency:[["NEVER",100],["MELEE_MASTERY_II_RPR",160],["MELEE_MASTERY_III_RPR",260]],combo:{potency:[["NEVER",340],["MELEE_MASTERY_II_RPR",400],["MELEE_MASTERY_III_RPR",500]],resource:"RPR_COMBO",resourceValue:1},aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.58,highlightIf:e=>e.hasResourceExactly("RPR_COMBO",1)});bn("INFERNAL_SLICE",30,{potency:[["NEVER",100],["MELEE_MASTERY_II_RPR",180],["MELEE_MASTERY_III_RPR",280]],combo:{potency:[["NEVER",420],["MELEE_MASTERY_II_RPR",500],["MELEE_MASTERY_III_RPR",600]],resource:"RPR_COMBO",resourceValue:2},aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.54,highlightIf:e=>e.hasResourceExactly("RPR_COMBO",2)});bn("SOUL_SLICE",60,{potency:[["NEVER",460],["MELEE_MASTERY_III_RPR",520]],aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.99,secondaryCooldown:{cdName:"cd_SOUL_SLICE",cooldown:30,maxCharges:2}});bn("GIBBET",70,{replaceIf:[{newSkill:"VOID_REAPING",condition:e=>e.hasResourceAvailable("ENSHROUDED")},{newSkill:"EXECUTIONERS_GIBBET",condition:e=>e.hasResourceAvailable("EXECUTIONER")}],potency:[["NEVER",460],["MELEE_MASTERY_III_RPR",500]],positional:{potency:[["NEVER",520],["MELEE_MASTERY_III_RPR",560]],location:"flank"},aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.5,highlightIf:kf("ENHANCED_GIBBET","GIBBET"),validateAttempt:PT,onConfirm:e=>{e.tryConsumeResource("ENHANCED_GIBBET"),e.setTimedResource("ENHANCED_GALLOWS",1)}});bn("GALLOWS",70,{replaceIf:[{newSkill:"CROSS_REAPING",condition:e=>e.hasResourceAvailable("ENSHROUDED")},{newSkill:"EXECUTIONERS_GALLOWS",condition:e=>e.resources.get("EXECUTIONER").available(1)}],potency:[["NEVER",460],["MELEE_MASTERY_III_RPR",500]],positional:{potency:[["NEVER",520],["MELEE_MASTERY_III_RPR",560]],location:"rear"},aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.53,highlightIf:kf("ENHANCED_GALLOWS","GALLOWS"),validateAttempt:PT,onConfirm:e=>{e.tryConsumeResource("ENHANCED_GALLOWS"),e.setTimedResource("ENHANCED_GIBBET",1)}});bn("EXECUTIONERS_GIBBET",96,{startOnHotbar:!1,potency:700,positional:{potency:760,location:"flank"},aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.62,highlightIf:kf("ENHANCED_GIBBET","EXECUTIONERS_GIBBET"),validateAttempt:wT,onConfirm:e=>{e.tryConsumeResource("ENHANCED_GIBBET"),e.setTimedResource("ENHANCED_GALLOWS",1)}});bn("EXECUTIONERS_GALLOWS",96,{startOnHotbar:!1,potency:700,positional:{potency:760,location:"flank"},aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.62,highlightIf:kf("ENHANCED_GALLOWS","EXECUTIONERS_GALLOWS"),validateAttempt:wT,onConfirm:e=>{e.tryConsumeResource("ENHANCED_GALLOWS"),e.setTimedResource("ENHANCED_GIBBET",1)}});bn("PLENTIFUL_HARVEST",88,{potency:720,aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:.2,applicationDelay:1.16,highlightIf:e=>e.hasResourceAvailable("IMMORTAL_SACRIFICE",1),validateAttempt:e=>e.hasResourceAvailable("IMMORTAL_SACRIFICE",1)&&!e.hasResourceAvailable("BLOODSOWN_CIRCLE"),onConfirm:e=>{e.tryConsumeResource("IMMORTAL_SACRIFICE",!0),e.setTimedResource("IDEAL_HOST",1),e.hasTraitUnlocked("ENHANCED_PLENTIFUL_HARVEST")&&e.setTimedResource("PERFECTIO_OCCULTA",1)}});Pf("COMMUNIO",90,{replaceIf:[{condition:e=>e.hasResourceAvailable("PERFECTIO_PARATA"),newSkill:"PERFECTIO"}],potency:1100,aspect:Ie.Other,castTime:1.3,recastTime:2.5,falloff:.2,applicationDelay:1.16,validateAttempt:e=>e.hasResourceAvailable("ENSHROUDED"),highlightIf:e=>e.hasResourceAvailable("ENSHROUDED")&&e.resources.get("LEMURE_SHROUD").availableAmount()===1,onConfirm:e=>{e.tryConsumeResource("PERFECTIO_OCCULTA")&&e.hasTraitUnlocked("ENHANCED_PLENTIFUL_HARVEST")&&e.setTimedResource("PERFECTIO_PARATA",1),e.exitEnshroud(),e.tryConsumeResource("ENHANCED_CROSS_REAPING"),e.tryConsumeResource("ENHANCED_VOID_REAPING")}});Pf("HARPE",15,{potency:300,aspect:Ie.Other,castTime:1.3,recastTime:2.5,applicationDelay:.9,highlightIf:e=>e.hasResourceAvailable("ENHANCED_HARPE"),onConfirm:e=>e.tryConsumeResource("ENHANCED_HARPE")});Pf("SOULSOW",82,{potency:0,replaceIf:[{condition:e=>e.hasResourceAvailable("SOULSOW"),newSkill:"HARVEST_MOON"}],startOnHotbar:!0,aspect:Ie.Other,castTime:5,recastTime:2.5,applicationDelay:0,onConfirm:e=>e.resources.get("SOULSOW").gain(1)});Pf("HARVEST_MOON",82,{potency:[["NEVER",600],["MELEE_MASTERY_III_RPR",800]],startOnHotbar:!1,aspect:Ie.Other,castTime:0,recastTime:2.5,falloff:.4,applicationDelay:.9,validateAttempt:e=>e.hasResourceAvailable("SOULSOW"),highlightIf:e=>e.hasResourceAvailable("SOULSOW"),onConfirm:e=>e.resources.get("SOULSOW").consume(1)});ka("GLUTTONY",76,"cd_GLUTTONY",{replaceIf:[{condition:e=>e.hasResourceAvailable("ENSHROUDED"),newSkill:"SACRIFICIUM"}],isPhysical:!1,potency:520,startOnHotbar:!0,falloff:.25,applicationDelay:1.06,cooldown:60,validateAttempt:$i(50),highlightIf:$i(50)});ka("BLOOD_STALK",50,"cd_BLOOD_STALK",{replaceIf:[{newSkill:"LEMURES_SLICE",condition:e=>e.hasResourceAvailable("ENSHROUDED")},{newSkill:"UNVEILED_GIBBET",condition:e=>e.hasResourceAvailable("ENHANCED_GIBBET")},{newSkill:"UNVEILED_GALLOWS",condition:e=>e.hasResourceAvailable("ENHANCED_GALLOWS")}],isPhysical:!0,potency:340,startOnHotbar:!0,applicationDelay:.89,cooldown:1,validateAttempt:$i(50),highlightIf:$i(50)});ka("GRIM_SWATHE",55,"cd_BLOOD_STALK",{replaceIf:[{condition:e=>e.hasResourceAvailable("ENSHROUDED"),newSkill:"LEMURES_SCYTHE"}],isPhysical:!0,potency:140,startOnHotbar:!0,falloff:0,applicationDelay:.58,cooldown:1,validateAttempt:$i(50),highlightIf:$i(50)});ka("UNVEILED_GIBBET",70,"cd_BLOOD_STALK",{isPhysical:!0,potency:440,startOnHotbar:!1,applicationDelay:.54,cooldown:1,validateAttempt:$i(50),highlightIf:$i(50)});ka("UNVEILED_GALLOWS",70,"cd_BLOOD_STALK",{isPhysical:!0,potency:440,startOnHotbar:!1,applicationDelay:.54,cooldown:1,validateAttempt:$i(50),highlightIf:$i(50)});ka("LEMURES_SLICE",86,"cd_LEMURES_SLICE",{isPhysical:!0,potency:[["NEVER",240],["MELEE_MASTERY_III_RPR",280]],startOnHotbar:!1,applicationDelay:.7,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("VOID_SHROUD",2),highlightIf:e=>e.hasResourceAvailable("VOID_SHROUD",2),onConfirm:e=>{e.resources.get("VOID_SHROUD").consume(2)}});ka("SACRIFICIUM",92,"cd_SACRIFICIUM",{isPhysical:!1,potency:600,startOnHotbar:!1,falloff:.2,applicationDelay:.76,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("OBLATIO"),highlightIf:e=>e.hasResourceAvailable("OBLATIO"),onConfirm:e=>e.tryConsumeResource("OBLATIO")});Ye("RPR","ARCANE_CIRCLE",72,"cd_ARCANE_CIRCLE",{rscType:"ARCANE_CIRCLE",applicationDelay:.6,startOnHotbar:!0,maxCharges:1,potency:0,onApplication:e=>{e.hasTraitUnlocked("ENHANCED_ARCANE_CIRCLE")&&(e.setTimedResource("CIRCLE_OF_SACRIFICE",1),e.setTimedResource("BLOODSOWN_CIRCLE",1))},cooldown:120});bn("VOID_REAPING",80,{startOnHotbar:!1,potency:[["NEVER",460],["MELEE_MASTERY_III_RPR",540]],aspect:Ie.Physical,recastTime:1.5,applicationDelay:.53,highlightIf:e=>e.resources.get("LEMURE_SHROUD").availableAmount()>1&&!e.hasResourceAvailable("ENHANCED_CROSS_REAPING"),validateAttempt:e=>e.hasResourceAvailable("LEMURE_SHROUD"),onConfirm:e=>{e.tryConsumeResource("ENHANCED_VOID_REAPING"),e.setTimedResource("ENHANCED_CROSS_REAPING",1),e.resources.get("LEMURE_SHROUD").consume(1),e.resources.get("VOID_SHROUD").gain(1),e.resources.get("LEMURE_SHROUD").availableAmount()===0&&e.exitEnshroud()}});bn("CROSS_REAPING",80,{startOnHotbar:!1,potency:[["NEVER",460],["MELEE_MASTERY_III_RPR",540]],aspect:Ie.Physical,recastTime:1.5,applicationDelay:.53,highlightIf:e=>e.resources.get("LEMURE_SHROUD").availableAmount()>1&&!e.hasResourceAvailable("ENHANCED_VOID_REAPING"),validateAttempt:e=>e.hasResourceAvailable("LEMURE_SHROUD"),onConfirm:e=>{e.tryConsumeResource("ENHANCED_CROSS_REAPING"),e.setTimedResource("ENHANCED_VOID_REAPING",1),e.resources.get("LEMURE_SHROUD").consume(1),e.resources.get("VOID_SHROUD").gain(1),e.resources.get("LEMURE_SHROUD").availableAmount()===0&&e.exitEnshroud()}});Ye("RPR","ENSHROUD",80,"cd_ENSHROUD",{rscType:"ENSHROUDED",highlightIf:e=>e.hasResourceAvailable("SHROUD",50)||e.hasResourceAvailable("IDEAL_HOST"),applicationDelay:0,startOnHotbar:!0,cooldown:5,validateAttempt:e=>e.hasResourceAvailable("SHROUD",50)||e.hasResourceAvailable("IDEAL_HOST"),onConfirm:Le(Uf("ENSHROUD"),e=>e.enterEnshroud())});bn("PERFECTIO",100,{potency:1300,aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:.2,applicationDelay:1.29,startOnHotbar:!1,highlightIf:e=>e.hasResourceAvailable("PERFECTIO_PARATA"),validateAttempt:e=>e.hasResourceAvailable("PERFECTIO_PARATA"),onConfirm:e=>{e.resources.get("PERFECTIO_PARATA").consume(1)}});ka("REGRESS",74,"cd_BLOOD_STALK",{cooldown:1,animationLock:Wt,startOnHotbar:!1,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("THRESHOLD"),onConfirm:e=>e.resources.get("THRESHOLD").consume(1)});ka("HELLS_INGRESS",20,"cd_INGRESS_EGRESS",{replaceIf:[{condition:e=>e.hasResourceAvailable("THRESHOLD")&&e.hasResourceAvailable("HELLS_INGRESS_USED"),newSkill:"REGRESS"}],cooldown:20,animationLock:Wt,onConfirm:e=>{e.resources.get("HELLS_INGRESS_USED").gain(1),e.hasTraitUnlocked("HELLSGATE")&&e.setTimedResource("THRESHOLD",1),e.setTimedResource("ENHANCED_HARPE",1)}});ka("HELLS_EGRESS",20,"cd_INGRESS_EGRESS",{replaceIf:[{condition:e=>e.hasResourceAvailable("THRESHOLD")&&!e.hasResourceAvailable("HELLS_INGRESS_USED"),newSkill:"REGRESS"}],cooldown:20,animationLock:Wt,onConfirm:e=>{e.tryConsumeResource("HELLS_INGRESS_USED"),e.hasTraitUnlocked("HELLSGATE")&&e.setTimedResource("THRESHOLD",1),e.setTimedResource("ENHANCED_HARPE",1)}});ka("ARCANE_CREST",40,"cd_ARCANE_CREST",{replaceIf:[{condition:e=>e.hasResourceAvailable("CREST_OF_TIME_BORROWED"),newSkill:"ARCANE_CREST_POP"}],cooldown:30,onConfirm:e=>e.setTimedResource("CREST_OF_TIME_BORROWED",1)});ka("ARCANE_CREST_POP",40,"cd_ARCANE_CREST_POP",{cooldown:1,animationLock:ma,startOnHotbar:!1,onConfirm:e=>{e.tryConsumeResource("CREST_OF_TIME_BORROWED"),e.setTimedResource("CREST_OF_TIME_RETURNED",1)},validateAttempt:e=>e.hasResourceAvailable("CREST_OF_TIME_BORROWED"),highlightIf:e=>e.hasResourceAvailable("CREST_OF_TIME_BORROWED")});bn("WHORL_OF_DEATH",35,{potency:100,aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:1.15,onConfirm:(e,t)=>t.targetList.forEach(a=>e.refreshDeathsDesign(a))});bn("SPINNING_SCYTHE",25,{potency:140,aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.62});bn("NIGHTMARE_SCYTHE",45,{potency:120,combo:{potency:180,resource:"RPR_AOE_COMBO",resourceValue:1},aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.8,highlightIf:e=>e.hasResourceExactly("RPR_AOE_COMBO",1)});bn("SOUL_SCYTHE",65,{potency:180,aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.66,secondaryCooldown:{cdName:"cd_SOUL_SLICE",cooldown:30,maxCharges:2}});bn("EXECUTIONERS_GUILLOTINE",96,{startOnHotbar:!1,potency:260,aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.53,highlightIf:e=>e.hasResourceAvailable("EXECUTIONER"),validateAttempt:wT});bn("GRIM_REAPING",80,{startOnHotbar:!1,potency:200,recastTime:1.5,falloff:0,applicationDelay:.8,highlightIf:e=>e.resources.get("LEMURE_SHROUD").availableAmount()>1,validateAttempt:e=>e.hasResourceAvailable("LEMURE_SHROUD"),onConfirm:e=>{e.resources.get("LEMURE_SHROUD").consume(1),e.resources.get("VOID_SHROUD").gain(1),e.resources.get("LEMURE_SHROUD").availableAmount()===0&&e.exitEnshroud()},aspect:Ie.Physical});ka("LEMURES_SCYTHE",86,"cd_LEMURES_SLICE",{isPhysical:!0,potency:100,falloff:0,applicationDelay:.66,cooldown:1,startOnHotbar:!1,validateAttempt:e=>e.hasResourceAvailable("VOID_SHROUD",2),highlightIf:e=>e.hasResourceAvailable("VOID_SHROUD",2),onConfirm:e=>{e.resources.get("VOID_SHROUD").consume(2)}});bn("GUILLOTINE",70,{replaceIf:[{newSkill:"GRIM_REAPING",condition:e=>e.hasResourceAvailable("ENSHROUDED")},{newSkill:"EXECUTIONERS_GUILLOTINE",condition:e=>e.resources.get("EXECUTIONER").available(1)}],potency:200,aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.49,highlightIf:e=>e.hasResourceAvailable("SOUL_REAVER"),validateAttempt:PT});ka("GAIN_SOUL_GAUGE",50,"cd_GAIN_SOUL_GAUGE",{applicationDelay:0,animationLock:ma,cooldown:.01,onConfirm:e=>e.resources.get("SOUL").gain(10)});Object.keys(qR).forEach(e=>zt(e,`SAM/${Ge[e].name}.png`));class nB extends Xt{jobSpecificOtherTargetedBuffViewProps(){return this.makeTargetedTimers("HIGANBANA_DOT")}jobSpecificSelfTargetedBuffViewProps(){return Object.keys(qR).filter(t=>t!=="HIGANBANA_DOT").map(t=>this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){const a=this.state.resources,o=a.get("KENKI").availableAmount(),s=a.get("MEDITATION").availableAmount();return[{kind:"sen",name:N({en:"sen",zh:""}),hasSetsu:this.state.hasResourceAvailable("SETSU"),hasGetsu:this.state.hasResourceAvailable("GETSU"),hasKa:this.state.hasResourceAvailable("KA_SEN"),setsuColor:t.sam.setsu,getsuColor:t.sam.getsu,kaColor:t.sam.kaSen},{kind:"bar",name:N({en:"kenki",zh:""}),color:t.sam.kenki,progress:o/100,valueString:o.toFixed(0)},{kind:"counter",name:N({en:"meditation",zh:""}),color:t.sam.meditation,currentStacks:s,maxStacks:3}]}}const On=(e,t,a)=>{Ve("SAM",e,t,a??{})};On("MEIKYO_SHISUI",3,{timeout:20,warnOnTimeout:!0});On("FUGETSU",1,{timeout:40});On("FUKA",1,{timeout:40});On("ZANSHIN_READY",1,{timeout:30});On("TENDO",1,{timeout:30,warnOnTimeout:!0});On("OGI_READY",1,{timeout:30});On("TSUBAME_GAESHI_READY",1,{timeout:30,warnOnTimeout:!0});On("THIRD_EYE",1,{timeout:4});On("TENGENTSU",1,{timeout:4});On("TENGENTSUS_FORESIGHT",1,{timeout:9});On("ENHANCED_ENPI",1,{timeout:15});On("MEDITATE",1,{timeout:15.2});On("KENKI",100,{warnOnOvercap:!0});On("SETSU",1,{warnOnOvercap:!0});On("GETSU",1,{warnOnOvercap:!0});On("KA_SEN",1,{warnOnOvercap:!0});On("MEDITATION",3,{warnOnOvercap:!0});On("HIGANBANA_DOT",1,{timeout:60});const lO=["SAM_TWO_READY","SAM_TWO_AOE_READY","GEKKO_READY","KASHA_READY","KAESHI_OGI_READY"];lO.forEach(e=>On(e,1,{timeout:30}));On("KAESHI_TRACKER",4,{timeout:30});class aB extends qt{constructor(t){super(t);const a=this.hasTraitUnlocked("ENHANCED_HISSATSU")?60:120,o=this.hasTraitUnlocked("ENHANCED_MEIKYO_SHISUI")?2:1;[new Ue("cd_MEIKYO_SHISUI",55,o,o),new Ue("cd_SENEI_GUREN",a,1,1)].forEach(s=>this.cooldowns.set(s)),super.registerRecurringEvents([{reportName:Ke("HIGANBANA_DOT"),groupedEffects:[{effectName:"HIGANBANA_DOT",appliedBy:["HIGANBANA"]}]}])}get statusPropsGenerator(){return new nB(this)}inherentSpeedModifier(){return this.hasTraitUnlocked("ENHANCED_FUGETSU_AND_FUKA")?13:10}jobSpecificAddDamageBuffCovers(t,a){this.hasResourceAvailable("ENHANCED_ENPI")&&a.name==="ENPI"&&t.addBuff(H.EnhancedEnpi),this.hasResourceAvailable("FUGETSU")&&t.addBuff(H.Fugetsu)}jobSpecificAddSpeedBuffCovers(t,a){this.hasResourceAvailable("FUKA")&&a.cdName==="cd_GCD"&&t.addBuff(H.Fuka)}hitCombo(t){return super.hitCombo(t)||this.hasResourceAvailable("MEIKYO_SHISUI")}cancelChanneledSkills(){const t=this.findNextQueuedEventByTag(ca.MeditateTick);t&&(t.canceled=!0),this.tryConsumeResource("MEDITATE")}getFugetsuModifier(){return this.hasTraitUnlocked("ENHANCED_FUGETSU_AND_FUKA")?J.FugetsuEnhanced:J.FugetsuBase}getFukaModifier(){return this.hasResourceAvailable("FUKA")?this.inherentSpeedModifier():0}checkCombo(t){return this.hasResourceAvailable(t)||this.hasResourceAvailable("MEIKYO_SHISUI")}refreshBuff(t,a){this.addEvent(new Oe(`gain ${t}`,a,()=>{this.gainStatus(t)}))}progressActiveCombo(t){lO.forEach(a=>{t.includes(a)||this.setComboState(a,0)}),t.forEach(a=>this.setComboState(a,1))}tryConsumeMeikyo(){this.tryConsumeResource("MEIKYO_SHISUI")}gainKenki(t){this.resources.get("KENKI").gain(t)}gainMeditation(){this.resources.get("MEDITATION").gain(1)}gainSen(t){this.resources.get(t).gain(1)}countSen(){return["GETSU","SETSU","KA_SEN"].reduce((t,a)=>this.hasResourceAvailable(a)?t+1:t,0)}consumeAllSen(){["GETSU","SETSU","KA_SEN"].forEach(t=>this.tryConsumeResource(t))}startMeditateTimer(){const t=a=>{const o=new Oe("meditate tick",3,()=>{a<5&&(this.isInCombat()&&(I.reportMeditateTick(this.time,"+kenki/meditation"),this.resources.get("KENKI").gain(10),this.resources.get("MEDITATION").gain(1)),this.addEvent(t(a+1)))});return o.addTag(ca.MeditateTick),o};this.addEvent(t(0))}}const wt=(e,t,a)=>{const o=c=>{const d=c.hasResourceAvailable("FUGETSU")?[c.getFugetsuModifier()]:[];return a.jobPotencyModifiers&&d.push(...a.jobPotencyModifiers(c)),d};let s=a.baseCastTime||0;return s&&(s=c=>c.hasTraitUnlocked("ENHANCED_IAIJUTSU")?a.baseCastTime||0:c.config.adjustedSksCastTime(1.8,c.getFukaModifier())),on("SAM",e,t,{...a,castTime:s,recastTime:c=>c.config.adjustedSksGCD(a.baseRecastTime??2.5,c.getFukaModifier()),potency:a.basePotency,jobPotencyModifiers:o,isInstantFn:c=>!(a.baseCastTime&&a.baseCastTime>0)})},Za=(e,t,a,o)=>(o.potency&&!o.jobPotencyModifiers&&(o.jobPotencyModifiers=s=>s.hasResourceAvailable("FUGETSU")?[s.getFugetsuModifier()]:[]),at("SAM",e,t,a,o));wt("ENPI",15,{applicationDelay:.71,basePotency:100,onConfirm:e=>{e.hasResourceAvailable("ENHANCED_ENPI")&&e.tryConsumeResource("ENHANCED_ENPI"),e.gainKenki(10)},jobPotencyModifiers:e=>e.hasResourceAvailable("ENHANCED_ENPI")?[e.hasTraitUnlocked("WAY_OF_THE_SAMURAI_III")?J.YatenpiEnhanced:J.YatenpiBase]:[],highlightIf:e=>e.hasResourceAvailable("ENHANCED_ENPI")});wt("HAKAZE",1,{autoUpgrade:{trait:"HAKAZE_MASTERY",otherSkill:"GYOFU"},applicationDelay:.85,basePotency:200,onConfirm:e=>{e.tryConsumeMeikyo(),e.gainKenki(5),e.progressActiveCombo(["SAM_TWO_READY"])}});wt("GYOFU",92,{autoDowngrade:{trait:"HAKAZE_MASTERY",otherSkill:"HAKAZE"},applicationDelay:.85,basePotency:240,onConfirm:e=>{e.tryConsumeMeikyo(),e.gainKenki(5),e.progressActiveCombo(["SAM_TWO_READY"])}});wt("YUKIKAZE",50,{applicationDelay:.85,basePotency:[["NEVER",100],["WAY_OF_THE_SAMURAI_II",110],["WAY_OF_THE_SAMURAI_III",160]],combo:{potency:[["NEVER",280],["WAY_OF_THE_SAMURAI_II",290],["WAY_OF_THE_SAMURAI_III",340]],resource:"SAM_TWO_READY",resourceValue:1},onConfirm:e=>{e.checkCombo("SAM_TWO_READY")&&(e.gainKenki(15),e.gainSen("SETSU")),e.tryConsumeMeikyo(),e.progressActiveCombo([])},highlightIf:e=>e.checkCombo("SAM_TWO_READY")});wt("JINPU",4,{applicationDelay:.62,basePotency:[["NEVER",120],["WAY_OF_THE_SAMURAI_III",140]],combo:{potency:[["NEVER",280],["WAY_OF_THE_SAMURAI_III",300]],resource:"SAM_TWO_READY",resourceValue:1},onConfirm:e=>{e.checkCombo("SAM_TWO_READY")?(e.gainKenki(5),e.refreshBuff("FUGETSU",.62),e.tryConsumeMeikyo(),e.progressActiveCombo(["GEKKO_READY"])):(e.tryConsumeMeikyo(),e.progressActiveCombo([]))},highlightIf:e=>e.checkCombo("SAM_TWO_READY")});wt("GEKKO",30,{applicationDelay:.76,basePotency:[["NEVER",100],["WAY_OF_THE_SAMURAI_II",110],["WAY_OF_THE_SAMURAI_III",160]],combo:{potency:[["NEVER",310],["WAY_OF_THE_SAMURAI_II",320],["WAY_OF_THE_SAMURAI_III",370]],resource:"GEKKO_READY",resourceValue:1},positional:{potency:[["NEVER",150],["WAY_OF_THE_SAMURAI_II",160],["WAY_OF_THE_SAMURAI_III",210]],comboPotency:[["NEVER",360],["WAY_OF_THE_SAMURAI_II",370],["WAY_OF_THE_SAMURAI_III",420]],location:"rear"},onConfirm:e=>{e.checkCombo("GEKKO_READY")&&(e.gainKenki(10),e.gainSen("GETSU")),e.hasResourceAvailable("MEIKYO_SHISUI")&&e.refreshBuff("FUGETSU",.76),e.tryConsumeMeikyo(),e.progressActiveCombo([])},highlightIf:e=>e.checkCombo("GEKKO_READY")});wt("SHIFU",18,{applicationDelay:.8,basePotency:[["NEVER",120],["WAY_OF_THE_SAMURAI_III",140]],combo:{potency:[["NEVER",280],["WAY_OF_THE_SAMURAI_III",300]],resource:"SAM_TWO_READY",resourceValue:1},onConfirm:e=>{e.checkCombo("SAM_TWO_READY")?(e.gainKenki(5),e.refreshBuff("FUKA",.8),e.tryConsumeMeikyo(),e.progressActiveCombo(["KASHA_READY"])):(e.tryConsumeMeikyo(),e.progressActiveCombo([]))},highlightIf:e=>e.checkCombo("SAM_TWO_READY")});wt("KASHA",40,{applicationDelay:.62,basePotency:[["NEVER",100],["WAY_OF_THE_SAMURAI_II",110],["WAY_OF_THE_SAMURAI_III",160]],combo:{potency:[["NEVER",310],["WAY_OF_THE_SAMURAI_II",320],["WAY_OF_THE_SAMURAI_III",370]],resource:"KASHA_READY",resourceValue:1},positional:{potency:[["NEVER",150],["WAY_OF_THE_SAMURAI_II",160],["WAY_OF_THE_SAMURAI_III",210]],comboPotency:[["NEVER",360],["WAY_OF_THE_SAMURAI_II",370],["WAY_OF_THE_SAMURAI_III",420]],location:"flank"},onConfirm:e=>{e.checkCombo("KASHA_READY")&&(e.gainKenki(10),e.gainSen("KA_SEN")),e.hasResourceAvailable("MEIKYO_SHISUI")&&e.refreshBuff("FUKA",.62),e.tryConsumeMeikyo(),e.progressActiveCombo([])},highlightIf:e=>e.checkCombo("KASHA_READY")});wt("FUGA",26,{autoUpgrade:{trait:"FUGA_MASTERY",otherSkill:"FUKO"},falloff:0,applicationDelay:.76,basePotency:90,onConfirm:e=>{e.gainKenki(5),e.progressActiveCombo(["SAM_TWO_AOE_READY"])}});wt("FUKO",86,{autoDowngrade:{trait:"FUGA_MASTERY",otherSkill:"FUGA"},falloff:0,applicationDelay:.76,basePotency:100,onConfirm:e=>{e.gainKenki(10),e.progressActiveCombo(["SAM_TWO_AOE_READY"])}});wt("MANGETSU",35,{falloff:0,applicationDelay:.62,basePotency:100,combo:{potency:120,resource:"SAM_TWO_AOE_READY",resourceValue:1},onConfirm:e=>{e.checkCombo("SAM_TWO_AOE_READY")&&(e.gainKenki(10),e.refreshBuff("FUGETSU",.62),e.gainSen("GETSU")),e.progressActiveCombo([])},highlightIf:e=>e.checkCombo("SAM_TWO_AOE_READY")});wt("OKA",35,{falloff:0,applicationDelay:.62,basePotency:100,combo:{potency:120,resource:"SAM_TWO_AOE_READY",resourceValue:1},onConfirm:e=>{e.checkCombo("SAM_TWO_AOE_READY")&&(e.gainKenki(10),e.refreshBuff("FUKA",.62),e.gainSen("KA_SEN")),e.progressActiveCombo([])},highlightIf:e=>e.checkCombo("SAM_TWO_AOE_READY")});const sO={newSkill:"HIGANBANA",condition:e=>e.countSen()===1},rO={newSkill:"TENKA_GOKEN",condition:e=>!e.hasResourceAvailable("TENDO")&&e.countSen()===2},cO={newSkill:"TENDO_GOKEN",condition:e=>e.hasResourceAvailable("TENDO")&&e.countSen()===2},uO={newSkill:"MIDARE_SETSUGEKKA",condition:e=>!e.hasResourceAvailable("TENDO")&&e.countSen()===3},dO={newSkill:"TENDO_SETSUGEKKA",condition:e=>e.hasResourceAvailable("TENDO")&&e.countSen()===3},Jr=[sO,rO,cO,uO,dO];wt("IAIJUTSU",30,{replaceIf:Jr,baseCastTime:1.3,basePotency:0,applicationDelay:0,validateAttempt:e=>!1});wt("HIGANBANA",30,{startOnHotbar:!1,replaceIf:Jr,baseCastTime:1.3,basePotency:200,applicationDelay:.62,validateAttempt:sO.condition,onConfirm:(e,t)=>{const a=[];e.hasResourceAvailable("FUGETSU")&&a.push(e.getFugetsuModifier());const o=e.hasTraitUnlocked("WAY_OF_THE_SAMURAI_III")?50:45;e.addDoTPotencies({node:t,effectName:"HIGANBANA_DOT",skillName:"HIGANBANA",tickPotency:o,speedStat:"sks",modifiers:a}),e.consumeAllSen(),e.gainMeditation()},onApplication:(e,t)=>e.applyDoT("HIGANBANA_DOT",t)});const wf=e=>t=>{t.consumeAllSen(),t.gainStatus("KAESHI_TRACKER",e),t.gainMeditation(),t.gainStatus("TSUBAME_GAESHI_READY"),t.tryConsumeResource("TENDO")};wt("TENKA_GOKEN",30,{startOnHotbar:!1,replaceIf:Jr,baseCastTime:1.3,basePotency:300,falloff:0,applicationDelay:.62,validateAttempt:rO.condition,onConfirm:wf(1)});wt("TENDO_GOKEN",100,{startOnHotbar:!1,replaceIf:Jr,baseCastTime:1.3,basePotency:410,falloff:0,applicationDelay:.36,validateAttempt:cO.condition,onConfirm:wf(2)});wt("MIDARE_SETSUGEKKA",30,{startOnHotbar:!1,replaceIf:Jr,baseCastTime:1.3,basePotency:[["NEVER",620],["WAY_OF_THE_SAMURAI_III",640]],applicationDelay:.62,jobPotencyModifiers:e=>[J.AutoCrit],validateAttempt:uO.condition,onConfirm:wf(3)});wt("TENDO_SETSUGEKKA",100,{startOnHotbar:!1,replaceIf:Jr,baseCastTime:1.3,basePotency:1100,applicationDelay:1.03,jobPotencyModifiers:e=>[J.AutoCrit],validateAttempt:dO.condition,onConfirm:wf(4)});const TR={newSkill:"KAESHI_GOKEN",condition:e=>e.hasResourceExactly("KAESHI_TRACKER",1)},SR={newSkill:"TENDO_KAESHI_GOKEN",condition:e=>e.hasResourceExactly("KAESHI_TRACKER",2)},gR={newSkill:"KAESHI_SETSUGEKKA",condition:e=>e.hasResourceExactly("KAESHI_TRACKER",3)},IR={newSkill:"TENDO_KAESHI_SETSUGEKKA",condition:e=>e.hasResourceExactly("KAESHI_TRACKER",4)},vu=[TR,SR,gR,IR];wt("TSUBAME_GAESHI",74,{replaceIf:vu,basePotency:0,applicationDelay:0,validateAttempt:e=>!1});const Gf=e=>{e.tryConsumeResource("KAESHI_TRACKER",!0),e.tryConsumeResource("TSUBAME_GAESHI_READY"),e.tryConsumeResource("KAESHI_OGI_READY")};wt("KAESHI_GOKEN",74,{startOnHotbar:!1,replaceIf:vu,basePotency:300,falloff:0,applicationDelay:.62,validateAttempt:TR.condition,onConfirm:Gf,highlightIf:TR.condition});wt("TENDO_KAESHI_GOKEN",100,{startOnHotbar:!1,replaceIf:vu,basePotency:410,falloff:0,applicationDelay:.36,validateAttempt:SR.condition,onConfirm:Gf,highlightIf:SR.condition});wt("KAESHI_SETSUGEKKA",74,{startOnHotbar:!1,replaceIf:vu,basePotency:[["NEVER",620],["WAY_OF_THE_SAMURAI_III",640]],applicationDelay:.62,jobPotencyModifiers:e=>[J.AutoCrit],validateAttempt:gR.condition,onConfirm:Gf,highlightIf:gR.condition});wt("TENDO_KAESHI_SETSUGEKKA",74,{startOnHotbar:!1,replaceIf:vu,basePotency:1100,applicationDelay:1.03,jobPotencyModifiers:e=>[J.AutoCrit],validateAttempt:IR.condition,onConfirm:Gf,highlightIf:IR.condition});wt("OGI_NAMIKIRI",90,{replaceIf:[{newSkill:"KAESHI_NAMIKIRI",condition:e=>e.hasResourceAvailable("KAESHI_OGI_READY")}],falloff:.4,applicationDelay:.49,basePotency:[["NEVER",860],["WAY_OF_THE_SAMURAI_III",1e3]],baseCastTime:1.3,jobPotencyModifiers:e=>[J.AutoCrit],validateAttempt:e=>e.hasResourceAvailable("OGI_READY"),onConfirm:e=>{e.tryConsumeResource("OGI_READY"),e.gainMeditation(),e.gainStatus("KAESHI_OGI_READY")},highlightIf:e=>e.hasResourceAvailable("OGI_READY")});wt("KAESHI_NAMIKIRI",90,{startOnHotbar:!1,falloff:.4,applicationDelay:.49,basePotency:[["NEVER",860],["WAY_OF_THE_SAMURAI_III",1e3]],jobPotencyModifiers:e=>[J.AutoCrit],validateAttempt:e=>e.hasResourceAvailable("KAESHI_OGI_READY"),onConfirm:e=>e.tryConsumeResource("KAESHI_OGI_READY"),highlightIf:e=>e.hasResourceAvailable("KAESHI_OGI_READY")});Za("MEIKYO_SHISUI",50,"cd_MEIKYO_SHISUI",{cooldown:55,maxCharges:2,onConfirm:e=>{e.gainStatus("MEIKYO_SHISUI",3),e.hasTraitUnlocked("ENHANCED_MEIKYO_SHISUI_II")&&e.gainStatus("TENDO")}});Za("IKISHOTEN",68,"cd_IKISHOTEN",{replaceIf:[{newSkill:"ZANSHIN",condition:e=>e.hasResourceAvailable("ZANSHIN_READY")}],cooldown:120,requiresCombat:!0,onConfirm:e=>{e.gainKenki(50),e.hasTraitUnlocked("ENHANCED_IKISHOTEN")&&e.gainStatus("OGI_READY"),e.hasTraitUnlocked("ENHANCED_IKISHOTEN_II")&&e.gainStatus("ZANSHIN_READY")}});Za("HISSATSU_SHINTEN",52,"cd_SHINTEN",{cooldown:1,applicationDelay:.62,potency:250,validateAttempt:e=>e.resources.get("KENKI").available(25),onConfirm:e=>e.resources.get("KENKI").consume(25),highlightIf:e=>e.resources.get("KENKI").available(25)});Za("HISSATSU_KYUTEN",62,"cd_KYUTEN",{cooldown:1,applicationDelay:.62,potency:100,falloff:0,validateAttempt:e=>e.resources.get("KENKI").available(25),onConfirm:e=>e.resources.get("KENKI").consume(25),highlightIf:e=>e.resources.get("KENKI").available(25)});Za("HISSATSU_GYOTEN",54,"cd_GYOTEN",{cooldown:5,applicationDelay:.49,animationLock:Wt,potency:100,validateAttempt:e=>e.resources.get("KENKI").available(10),onConfirm:e=>e.resources.get("KENKI").consume(10),highlightIf:e=>e.resources.get("KENKI").available(10)});Za("HISSATSU_YATEN",56,"cd_YATEN",{cooldown:10,applicationDelay:.45,animationLock:Wt,potency:100,validateAttempt:e=>e.resources.get("KENKI").available(10),onConfirm:e=>{e.resources.get("KENKI").consume(10),e.gainStatus("ENHANCED_ENPI")},highlightIf:e=>e.resources.get("KENKI").available(10)});Za("HISSATSU_SENEI",72,"cd_SENEI_GUREN",{cooldown:60,applicationDelay:.67,potency:800,validateAttempt:e=>e.resources.get("KENKI").available(25),onConfirm:e=>e.resources.get("KENKI").consume(25),highlightIf:e=>e.resources.get("KENKI").available(25)});Za("HISSATSU_GUREN",70,"cd_SENEI_GUREN",{cooldown:60,applicationDelay:.62,potency:400,falloff:0,validateAttempt:e=>e.resources.get("KENKI").available(25),onConfirm:e=>e.resources.get("KENKI").consume(25),highlightIf:e=>e.resources.get("KENKI").available(25)});Za("HAGAKURE",68,"cd_HAGAKURE",{cooldown:5,validateAttempt:e=>e.countSen()>0,onConfirm:e=>{e.gainKenki(e.countSen()*10),e.consumeAllSen()},highlightIf:e=>e.countSen()===3});Za("SHOHA",80,"cd_SHOHA",{cooldown:15,potency:[["NEVER",560],["WAY_OF_THE_SAMURAI_III",640]],falloff:.4,applicationDelay:.58,validateAttempt:e=>e.resources.get("MEDITATION").available(3),onConfirm:e=>e.tryConsumeResource("MEDITATION",!0),highlightIf:e=>e.resources.get("MEDITATION").available(3)});Ye("SAM","THIRD_EYE",6,"cd_THIRD_EYE",{rscType:"THIRD_EYE",autoUpgrade:{trait:"THIRD_EYE_MASTERY",otherSkill:"TENGENTSU"},replaceIf:[{newSkill:"THIRD_EYE_POP",condition:e=>e.hasResourceAvailable("THIRD_EYE")}],cooldown:15,applicationDelay:0});Ye("SAM","TENGENTSU",82,"cd_THIRD_EYE",{rscType:"TENGENTSU",autoDowngrade:{trait:"THIRD_EYE_MASTERY",otherSkill:"THIRD_EYE"},replaceIf:[{newSkill:"TENGENTSU_POP",condition:e=>e.hasResourceAvailable("TENGENTSU")}],cooldown:15,applicationDelay:0});Za("THIRD_EYE_POP",6,"cd_THIRD_EYE_POP",{startOnHotbar:!1,applicationDelay:0,animationLock:ma,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("THIRD_EYE"),onConfirm:e=>{e.tryConsumeResource("THIRD_EYE"),e.gainKenki(10)},highlightIf:e=>e.hasResourceAvailable("THIRD_EYE")});Za("TENGENTSU_POP",82,"cd_THIRD_EYE_POP",{startOnHotbar:!1,applicationDelay:0,animationLock:ma,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("TENGENTSU"),onConfirm:e=>{e.tryConsumeResource("TENGENTSU"),e.gainStatus("TENGENTSUS_FORESIGHT"),e.gainKenki(10)},highlightIf:e=>e.hasResourceAvailable("TENGENTSU")});Za("ZANSHIN",96,"cd_ZANSHIN",{startOnHotbar:!1,cooldown:1,falloff:.4,applicationDelay:1.03,potency:940,validateAttempt:e=>e.hasResourceAvailable("ZANSHIN_READY")&&e.resources.get("KENKI").available(50),onConfirm:e=>{e.resources.get("KENKI").consume(50),e.tryConsumeResource("ZANSHIN_READY")},highlightIf:e=>e.hasResourceAvailable("ZANSHIN_READY")});Ye("SAM","MEDITATE",60,"cd_MEDITATE",{rscType:"MEDITATE",cooldown:60,applicationDelay:.62,validateAttempt:e=>e.cooldowns.get("cd_GCD").stacksAvailable()>0,onConfirm:e=>{const t=e.config.adjustedSksGCD(2.5,e.getFukaModifier());e.cooldowns.get("cd_GCD").useStackWithRecast(e.config.getAfterTaxGCD(t))},onApplication:e=>e.startMeditateTimer()});Object.keys($R).forEach(e=>zt(e,`SMN/${Ge[e].name}.png`));class iB extends Xt{jobSpecificSelfTargetedBuffViewProps(){const t=["AETHERFLOW","IFRITS_FAVOR","TITANS_FAVOR","GARUDAS_FAVOR","CRIMSON_STRIKE_READY"];return[...Object.keys($R).map(a=>t.includes(a)?this.makeCommonTimerless(a):this.makeCommonTimer(a))]}jobSpecificResourceViewProps(t){const a=this.state.resources,o=Math.max(a.timeTillReady("FIRE_ATTUNEMENT"),a.timeTillReady("EARTH_ATTUNEMENT"),a.timeTillReady("WIND_ATTUNEMENT")),s=a.get("ACTIVE_DEMI").availableAmount(),c=a.timeTillReady("ACTIVE_DEMI");a.get("RUBY_ARCANUM").available(1),a.get("TOPAZ_ARCANUM").available(1),a.get("EMERALD_ARCANUM").available(1);const d=s===_R.BAHAMUT?t.smn.bahamut:s===_R.PHOENIX?t.smn.phoenix:t.smn.solar,f=a.get("FIRE_ATTUNEMENT").available(1)?t.smn.ruby:a.get("EARTH_ATTUNEMENT").available(1)?t.smn.topaz:t.smn.emerald,h=this.state.cooldowns.get("cd_SUMMON_LOCKOUT"),m=h.timeTillNextStackAvailable();return[{kind:"counter",name:N({en:"aetherflow",zh:""}),color:t.smn.aetherflow,currentStacks:a.get("AETHERFLOW").availableAmount(),maxStacks:2},{kind:"bar",name:N({en:"demi summon",zh:""}),color:d,progress:c===0?0:1-c/15,valueString:c.toFixed(3)},{kind:"attunement",aetherName:N({en:"aether",zh:""}),attunementName:N({en:"attunement",zh:""}),ruby:a.get("RUBY_ARCANUM").available(1),topaz:a.get("TOPAZ_ARCANUM").available(1),emerald:a.get("EMERALD_ARCANUM").available(1),attunementCount:Math.max(a.get("FIRE_ATTUNEMENT").availableAmount(),a.get("EARTH_ATTUNEMENT").availableAmount(),a.get("WIND_ATTUNEMENT").availableAmount()),timeRemaining:o,rubyColor:t.smn.ruby,topazColor:t.smn.topaz,emeraldColor:t.smn.emerald},{kind:"bar",name:N({en:"summon lock",zh:""}),color:f,progress:m>0?1-h.timeTillNextStackAvailable()/h.currentStackCd():0,valueString:m.toFixed(3)}]}}const Qt=(e,t,a)=>{Ve("SMN",e,t,a??{})};var _R=(e=>(e[e.NONE=0]="NONE",e[e.SOLAR=1]="SOLAR",e[e.BAHAMUT=2]="BAHAMUT",e[e.PHOENIX=3]="PHOENIX",e))(_R||{});const hO=15;Qt("AETHERFLOW",2,{warnOnOvercap:!0});Qt("RUBY_ARCANUM",1);Qt("TOPAZ_ARCANUM",1);Qt("EMERALD_ARCANUM",1);Qt("FIRE_ATTUNEMENT",2,{timeout:30});Qt("EARTH_ATTUNEMENT",4,{timeout:30});Qt("WIND_ATTUNEMENT",4,{timeout:30});Qt("CRIMSON_STRIKE_READY",1);Qt("EVERLASTING_FLIGHT",1,{timeout:21});Qt("FURTHER_RUIN",1,{timeout:60});Qt("GARUDAS_FAVOR",1);Qt("IFRITS_FAVOR",1);Qt("TITANS_FAVOR",1);Qt("RADIANT_AEGIS",1,{timeout:30});Qt("REFULGENT_LUX",1,{timeout:30});Qt("REKINDLE",1,{timeout:30});Qt("UNDYING_FLAME",1,{timeout:15});Qt("RUBYS_GLIMMER",1,{timeout:30,warnOnTimeout:!0});Qt("SEARING_LIGHT",1,{timeout:20});Qt("SLIPSTREAM",1,{timeout:15});Qt("ACTIVE_DEMI",3,{timeout:hO});Qt("NEXT_DEMI_CYCLE",3);Qt("DEMI_AUTO",4);const SN=3.163,oB=new Map([["SUMMON_IFRIT_II",2.1],["SUMMON_GARUDA_II",2.1],["SUMMON_TITAN_II",2.1],["SUMMON_IFRIT",2.46],["SUMMON_GARUDA",2.1],["SUMMON_TITAN",2.46]]),gN=new Map([["SUMMON_IFRIT_II",1.96],["SUMMON_GARUDA_II",1.29],["SUMMON_TITAN_II",1.96],["SUMMON_IFRIT",.936],["SUMMON_GARUDA",.8],["SUMMON_TITAN",.8],["ENKINDLE_BAHAMUT",.894],["ENKINDLE_PHOENIX",1.026],["ENKINDLE_SOLAR_BAHAMUT",.846]]),lB=new Map([["SUMMON_IFRIT_II",6.29],["SUMMON_GARUDA_II",6.29],["SUMMON_TITAN_II",6.29],["SUMMON_IFRIT",4.6],["SUMMON_GARUDA",4.3],["SUMMON_TITAN",4.6]]);class sB extends qt{constructor(t){super(t);const a=this.hasTraitUnlocked("ENHANCED_SWIFTCAST")?40:60;this.cooldowns.set(new Ue("cd_SWIFTCAST",a,1,1));const o=this.hasTraitUnlocked("ENHANCED_RADIANT_AEGIS")?2:1;this.cooldowns.set(new Ue("cd_RADIANT_AEGIS",60,o,o)),this.cooldowns.set(new Ue("cd_DEMI_SUMMON",this.config.adjustedGCD(60),1,1)),this.cooldowns.set(new Ue("cd_SUMMON_LOCKOUT",5,1,1)),this.registerRecurringEvents([{groupedEffects:[{effectName:"SLIPSTREAM",appliedBy:["SLIPSTREAM"],isGroundTargeted:!0}]}],["SUMMON_BAHAMUT","SUMMON_PHOENIX","SUMMON_SOLAR_BAHAMUT"])}get statusPropsGenerator(){return new iB(this)}jobSpecificAddDamageBuffCovers(t,a){this.hasResourceAvailable("SEARING_LIGHT")&&t.addBuff(H.SearingLight)}get activeDemi(){return this.resources.get("ACTIVE_DEMI").availableAmount()}get nextDemi(){const t=this.resources.get("NEXT_DEMI_CYCLE").availableAmount();return this.hasTraitUnlocked("ENHANCED_SUMMON_BAHAMUT_II")?t===1?2:t===3?3:1:this.hasTraitUnlocked("ENHANCED_SUMMON_BAHAMUT")?t%2===0?2:3:2}get hasActivePet(){return this.activeDemi!==0||this.cooldowns.get("cd_SUMMON_LOCKOUT").stacksAvailable()===0}snapSearingAndTincture(t,a){this.hasResourceAvailable("SEARING_LIGHT")&&a.addModifiers(J.SearingLight),this.hasResourceAvailable("TINCTURE")&&(a.addModifiers(J.Tincture),t.addBuff(H.Tincture))}makePetPotency(t,a,o,s,c){const d=new tn({config:this.config,sourceTime:o,sourceSkill:a,aspect:Ie.Other,basePotency:s,snapshotTime:this.getDisplayTime(),description:"",targetList:t,falloff:c});return d.addModifiers(J.SmnPet),d}handleDemiAuto(){if(!this.hasResourceAvailable("DEMI_AUTO"))return;const t=4-this.resources.get("DEMI_AUTO").availableAmount();if(t<0)return;const a=this.resources.get("DEMI_AUTO").node;if(a!==void 0){const o=a.getDotPotencies("DEMI_AUTO")[t];this.snapSearingAndTincture(a,o),o.snapshotTime=this.getDisplayTime(),I.resolvePotency(o)}this.tryConsumeResource("DEMI_AUTO"),this.addEvent(new Oe("demi auto",SN,()=>this.handleDemiAuto()))}startPetAutos(t,a){const o=this.resources.get("DEMI_AUTO"),s=this.activeDemi===1?160:150;o.gain(4),o.node=t;for(let c=0;c<4;c++)t.addDoTPotency(this.makePetPotency(t.targetList,a,this.getDisplayTime(),s),"DEMI_AUTO");this.addEvent(new Oe("first demi auto",SN,()=>this.handleDemiAuto()))}queuePetDamageEvent(t,a,o,s,c,d){const f=this.getDisplayTime();this.addEvent(new Oe(o+" pet snapshot",c,()=>{const h=this.makePetPotency(t.targetList,o,f,s,.6);t.addPotency(h),this.snapSearingAndTincture(t,h),this.jobSpecificAddDamageBuffCovers(t,Wi("SMN",a)),this.addEvent(new Oe(o+" application",d,()=>I.resolvePotency(h)))}))}queueEnkindle(t,a){let o,s;a==="ENKINDLE_BAHAMUT"?(o="AKH_MORN",s=1300):a==="ENKINDLE_PHOENIX"?(o="REVELATION",s=1300):(o="EXODUS",s=1500);const c=this.resources.get("ACTIVE_DEMI").pendingChange;console.assert(c),c&&c.timeTillEvent<2.5&&I.reportWarning({kind:"custom",en:"enkindle used near end of demi window may ghost"}),this.queuePetDamageEvent(t,a,o,s,0,gN.get(a))}queuePrimalSummon(t,a){let o=600;this.hasTraitUnlocked("ARCANE_MASTERY")?o=800:this.hasTraitUnlocked("ENKINDLE_II")&&(o=750);let s;a.includes("IFRIT")?s="INFERNO":a.includes("TITAN")?s="EARTHEN_FURY":s="AERIAL_BLAST",this.queuePetDamageEvent(t,a,s,o,oB.get(a),gN.get(a));const c=lB.get(a);this.cooldowns.get("cd_SUMMON_LOCKOUT").useStackWithRecast(c)}}const et=(e,t,a)=>{const o=a.baseCastTime??0,s=a.baseRecastTime??2.5,c=o>0?Le(d=>d.tryConsumeResource("SWIFTCAST"),a.onConfirm):a.onConfirm;return Xa("SMN",e,t,{...a,castTime:d=>d.config.adjustedCastTime(o),recastTime:d=>s<=1.5?s:d.config.adjustedGCD(s),potency:a.basePotency,jobPotencyModifiers:d=>{const f=[];return a.isPetAttack&&f.push(J.SmnPet),d.hasResourceAvailable("SEARING_LIGHT")&&f.push(J.SearingLight),f},isInstantFn:d=>d.hasResourceAvailable("SWIFTCAST")||o===0,onConfirm:c})},ao=(e,t,a,o)=>at("SMN",e,t,a,{...o,jobPotencyModifiers:s=>s.hasResourceAvailable("SEARING_LIGHT")?[J.SearingLight]:[]}),As=[{newSkill:"RUIN_III",condition:e=>e.activeDemi===0},{newSkill:"ASTRAL_IMPULSE",condition:e=>e.activeDemi===2},{newSkill:"FOUNTAIN_OF_FIRE",condition:e=>e.activeDemi===3},{newSkill:"UMBRAL_IMPULSE",condition:e=>e.activeDemi===1}];et("RUIN_III",54,{basePotency:[["NEVER",300],["RUIN_MASTERY_IV",310],["ARCANE_MASTERY",400]],baseCastTime:1.5,manaCost:300,replaceIf:As,applicationDelay:.8});et("ASTRAL_IMPULSE",58,{basePotency:[["NEVER",440],["ARCANE_MASTERY",500]],manaCost:300,replaceIf:As,applicationDelay:.67,validateAttempt:As[1].condition,startOnHotbar:!1});et("FOUNTAIN_OF_FIRE",80,{basePotency:[["NEVER",540],["ARCANE_MASTERY",580]],manaCost:300,replaceIf:As,applicationDelay:1.07,validateAttempt:As[2].condition,startOnHotbar:!1});et("UMBRAL_IMPULSE",100,{basePotency:640,manaCost:300,replaceIf:As,applicationDelay:.8,validateAttempt:As[3].condition,startOnHotbar:!1});const Il=[{newSkill:"OUTBURST",condition:e=>e.activeDemi===0},{newSkill:"ASTRAL_FLARE",condition:e=>e.activeDemi===2},{newSkill:"BRAND_OF_PURGATORY",condition:e=>e.activeDemi===3},{newSkill:"UMBRAL_FLARE",condition:e=>e.activeDemi===1}];et("OUTBURST",26,{autoUpgrade:{trait:"OUTBURST_MASTERY",otherSkill:"TRI_DISASTER"},basePotency:100,baseCastTime:1.5,manaCost:300,replaceIf:Il,applicationDelay:.8,falloff:0});et("TRI_DISASTER",74,{autoDowngrade:{trait:"OUTBURST_MASTERY",otherSkill:"OUTBURST"},basePotency:120,baseCastTime:1.5,manaCost:300,replaceIf:Il,applicationDelay:.8,falloff:0});et("ASTRAL_FLARE",58,{basePotency:180,manaCost:300,replaceIf:Il,applicationDelay:.54,validateAttempt:Il[1].condition,falloff:0,startOnHotbar:!1});et("BRAND_OF_PURGATORY",80,{basePotency:240,manaCost:300,replaceIf:Il,applicationDelay:.8,validateAttempt:Il[2].condition,falloff:0,startOnHotbar:!1});et("UMBRAL_FLARE",100,{basePotency:300,manaCost:300,replaceIf:Il,applicationDelay:.53,validateAttempt:Il[2].condition,falloff:0,startOnHotbar:!1});const rB=[{newSkill:"RUBY_RUIN_III",condition:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT")},{newSkill:"TOPAZ_RUIN_III",condition:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT")},{newSkill:"EMERALD_RUIN_III",condition:e=>e.hasResourceAvailable("WIND_ATTUNEMENT")}];et("GEMSHINE",6,{replaceIf:rB,applicationDelay:0,validateAttempt:e=>!1});et("RUBY_RUIN_III",54,{autoUpgrade:{trait:"RUIN_MASTERY_III",otherSkill:"RUBY_RITE"},basePotency:410,baseCastTime:2.8,baseRecastTime:3,applicationDelay:.62,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("FIRE_ATTUNEMENT"),startOnHotbar:!1});et("TOPAZ_RUIN_III",54,{autoUpgrade:{trait:"RUIN_MASTERY_III",otherSkill:"TOPAZ_RITE"},basePotency:300,applicationDelay:.62,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("EARTH_ATTUNEMENT"),startOnHotbar:!1});et("EMERALD_RUIN_III",54,{autoUpgrade:{trait:"RUIN_MASTERY_III",otherSkill:"EMERALD_RITE"},baseRecastTime:1.5,basePotency:180,applicationDelay:.62,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("WIND_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("WIND_ATTUNEMENT"),startOnHotbar:!1});et("RUBY_RITE",72,{autoDowngrade:{trait:"RUIN_MASTERY_III",otherSkill:"RUBY_RITE"},basePotency:[["NEVER",480],["RUIN_MASTERY_IV",510],["ARCANE_MASTERY",580]],baseCastTime:2.8,baseRecastTime:3,applicationDelay:.62,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("FIRE_ATTUNEMENT"),startOnHotbar:!1});et("TOPAZ_RITE",72,{autoDowngrade:{trait:"RUIN_MASTERY_III",otherSkill:"TOPAZ_RUIN_III"},basePotency:[["NEVER",320],["RUIN_MASTERY_IV",330],["ARCANE_MASTERY",340]],applicationDelay:.62,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT"),onConfirm:e=>{e.tryConsumeResource("EARTH_ATTUNEMENT"),e.gainStatus("TITANS_FAVOR")},startOnHotbar:!1});et("EMERALD_RITE",72,{autoDowngrade:{trait:"RUIN_MASTERY_III",otherSkill:"EMERALD_RUIN_III"},baseRecastTime:1.5,basePotency:[["NEVER",220],["RUIN_MASTERY_IV",230],["ARCANE_MASTERY",280]],applicationDelay:.62,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("WIND_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("WIND_ATTUNEMENT"),startOnHotbar:!1});const cB=[{newSkill:"RUBY_OUTBURST",condition:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT")},{newSkill:"TOPAZ_OUTBURST",condition:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT")},{newSkill:"EMERALD_OUTBURST",condition:e=>e.hasResourceAvailable("WIND_ATTUNEMENT")}];et("PRECIOUS_BRILLIANCE",26,{replaceIf:cB,applicationDelay:0,validateAttempt:e=>!1});et("RUBY_OUTBURST",26,{autoUpgrade:{trait:"OUTBURST_MASTERY",otherSkill:"RUBY_DISASTER"},basePotency:160,baseCastTime:2.8,baseRecastTime:3,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("FIRE_ATTUNEMENT"),falloff:0,startOnHotbar:!1});et("TOPAZ_OUTBURST",26,{autoUpgrade:{trait:"OUTBURST_MASTERY",otherSkill:"TOPAZ_DISASTER"},basePotency:110,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("EARTH_ATTUNEMENT"),falloff:0,startOnHotbar:!1});et("EMERALD_OUTBURST",26,{autoUpgrade:{trait:"OUTBURST_MASTERY",otherSkill:"EMERALD_DISASTER"},baseRecastTime:1.5,basePotency:70,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("WIND_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("WIND_ATTUNEMENT"),falloff:0,startOnHotbar:!1});et("RUBY_DISASTER",74,{autoDowngrade:{trait:"OUTBURST_MASTERY",otherSkill:"RUBY_OUTBURST"},autoUpgrade:{trait:"OUTBURST_MASTERY_II",otherSkill:"RUBY_CATASTROPHE"},basePotency:190,baseCastTime:2.8,baseRecastTime:3,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("FIRE_ATTUNEMENT"),falloff:0,startOnHotbar:!1});et("TOPAZ_DISASTER",74,{autoDowngrade:{trait:"OUTBURST_MASTERY",otherSkill:"TOPAZ_OUTBURST"},autoUpgrade:{trait:"OUTBURST_MASTERY_II",otherSkill:"TOPAZ_CATASTROPHE"},basePotency:130,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("EARTH_ATTUNEMENT"),falloff:0,startOnHotbar:!1});et("EMERALD_DISASTER",74,{autoDowngrade:{trait:"OUTBURST_MASTERY",otherSkill:"EMERALD_OUTBURST"},autoUpgrade:{trait:"OUTBURST_MASTERY_II",otherSkill:"EMERALD_CATASTROPHE"},baseRecastTime:1.5,basePotency:90,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("WIND_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("WIND_ATTUNEMENT"),falloff:0,startOnHotbar:!1});et("RUBY_CATASTROPHE",82,{autoDowngrade:{trait:"OUTBURST_MASTERY_II",otherSkill:"RUBY_DISASTER"},basePotency:210,baseCastTime:2.8,baseRecastTime:3,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("FIRE_ATTUNEMENT"),falloff:0,startOnHotbar:!1});et("TOPAZ_CATASTROPHE",82,{autoDowngrade:{trait:"OUTBURST_MASTERY_II",otherSkill:"TOPAZ_DISASTER"},basePotency:140,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT"),onConfirm:e=>{e.tryConsumeResource("EARTH_ATTUNEMENT"),e.gainStatus("TITANS_FAVOR")},falloff:0,startOnHotbar:!1});et("EMERALD_CATASTROPHE",82,{autoDowngrade:{trait:"OUTBURST_MASTERY_II",otherSkill:"EMERALD_DISASTER"},baseRecastTime:1.5,basePotency:100,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("WIND_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("WIND_ATTUNEMENT"),falloff:0,startOnHotbar:!1});const uB=[{newSkill:"SUMMON_BAHAMUT",condition:e=>e.nextDemi===2},{newSkill:"SUMMON_PHOENIX",condition:e=>e.nextDemi===3},{newSkill:"SUMMON_SOLAR_BAHAMUT",condition:e=>e.nextDemi===1}],dB={cdName:"cd_DEMI_SUMMON",cooldown:60,maxCharges:1};[{name:"SUMMON_BAHAMUT",autoName:"WYRMWAVE",level:70,activeValue:2},{name:"SUMMON_PHOENIX",autoName:"SCARLET_FLAME",level:80,activeValue:3},{name:"SUMMON_SOLAR_BAHAMUT",autoName:"LUXWAVE",level:100,activeValue:1}].forEach((e,t)=>et(e.name,e.level,{applicationDelay:.76,replaceIf:uB,secondaryCooldown:dB,validateAttempt:a=>!a.hasActivePet&&a.nextDemi===e.activeValue,drawsAggro:!0,onConfirm:(a,o)=>{a.gainStatus("ACTIVE_DEMI",e.activeValue),a.startPetAutos(o,e.autoName),["RUBY_ARCANUM","TOPAZ_ARCANUM","EMERALD_ARCANUM"].forEach(s=>a.gainStatus(s,1)),["FIRE_ATTUNEMENT","EARTH_ATTUNEMENT","WIND_ATTUNEMENT"].forEach(s=>a.tryConsumeResource(s,!0)),a.tryConsumeResource("IFRITS_FAVOR"),a.tryConsumeResource("CRIMSON_STRIKE_READY"),a.tryConsumeResource("GARUDAS_FAVOR"),a.tryConsumeResource("TITANS_FAVOR"),e.name==="SUMMON_SOLAR_BAHAMUT"&&a.gainStatus("REFULGENT_LUX"),a.addEvent(new Oe("update next demi",hO,()=>{a.resources.get("NEXT_DEMI_CYCLE").gainWrapping(1)}))},onApplication:a=>{a.isInCombat()||a.resources.get("IN_COMBAT").gain(1)},startOnHotbar:t===0}));const nf=e=>!e.hasActivePet&&e.hasResourceAvailable("RUBY_ARCANUM"),af=e=>!e.hasActivePet&&e.hasResourceAvailable("TOPAZ_ARCANUM"),of=e=>!e.hasActivePet&&e.hasResourceAvailable("EMERALD_ARCANUM"),fO=e=>(t,a)=>{t.tryConsumeResource("RUBY_ARCANUM"),t.gainStatus("FIRE_ATTUNEMENT",2),t.queuePrimalSummon(a,e),t.tryConsumeResource("EARTH_ATTUNEMENT",!0),t.tryConsumeResource("WIND_ATTUNEMENT",!0),t.tryConsumeResource("TITANS_FAVOR"),t.tryConsumeResource("GARUDAS_FAVOR")},EO=e=>(t,a)=>{t.tryConsumeResource("TOPAZ_ARCANUM"),t.gainStatus("EARTH_ATTUNEMENT",4),t.queuePrimalSummon(a,e),t.tryConsumeResource("FIRE_ATTUNEMENT",!0),t.tryConsumeResource("WIND_ATTUNEMENT",!0),t.tryConsumeResource("IFRITS_FAVOR"),t.tryConsumeResource("CRIMSON_STRIKE_READY"),t.tryConsumeResource("GARUDAS_FAVOR")},mO=e=>(t,a)=>{t.tryConsumeResource("EMERALD_ARCANUM"),t.gainStatus("WIND_ATTUNEMENT",4),t.queuePrimalSummon(a,e),t.tryConsumeResource("FIRE_ATTUNEMENT",!0),t.tryConsumeResource("EARTH_ATTUNEMENT",!0),t.tryConsumeResource("IFRITS_FAVOR"),t.tryConsumeResource("CRIMSON_STRIKE_READY"),t.tryConsumeResource("TITANS_FAVOR")},ec=.5;et("SUMMON_IFRIT",30,{autoUpgrade:{trait:"ENKINDLE_II",otherSkill:"SUMMON_IFRIT_II"},applicationDelay:0,highlightIf:nf,validateAttempt:nf,onConfirm:fO("SUMMON_IFRIT"),falloff:ec,savesTargets:!0});et("SUMMON_TITAN",35,{autoUpgrade:{trait:"ENKINDLE_II",otherSkill:"SUMMON_TITAN_II"},applicationDelay:0,highlightIf:af,validateAttempt:af,onConfirm:EO("SUMMON_TITAN"),falloff:ec,savesTargets:!0});et("SUMMON_GARUDA",45,{autoUpgrade:{trait:"ENKINDLE_II",otherSkill:"SUMMON_GARUDA_II"},applicationDelay:0,highlightIf:of,validateAttempt:of,onConfirm:mO("SUMMON_GARUDA"),falloff:ec,savesTargets:!0});et("SUMMON_IFRIT_II",90,{autoDowngrade:{trait:"ENKINDLE_II",otherSkill:"SUMMON_IFRIT"},applicationDelay:0,highlightIf:nf,validateAttempt:nf,onConfirm:Le(e=>e.gainStatus("IFRITS_FAVOR"),fO("SUMMON_IFRIT_II")),falloff:ec,savesTargets:!0});et("SUMMON_TITAN_II",90,{autoDowngrade:{trait:"ENKINDLE_II",otherSkill:"SUMMON_TITAN"},applicationDelay:0,highlightIf:af,validateAttempt:af,onConfirm:EO("SUMMON_TITAN_II"),falloff:ec,savesTargets:!0});et("SUMMON_GARUDA_II",90,{autoDowngrade:{trait:"ENKINDLE_II",otherSkill:"SUMMON_GARUDA"},applicationDelay:0,highlightIf:of,validateAttempt:of,onConfirm:Le(e=>e.gainStatus("GARUDAS_FAVOR"),mO("SUMMON_GARUDA_II")),falloff:ec,savesTargets:!0});const fa=[{newSkill:"DEATHFLARE",condition:e=>e.activeDemi===2},{newSkill:"REKINDLE",condition:e=>e.activeDemi===3},{newSkill:"SUNFLARE",condition:e=>e.activeDemi===1},{newSkill:"CRIMSON_CYCLONE",condition:e=>e.hasResourceAvailable("IFRITS_FAVOR")},{newSkill:"CRIMSON_STRIKE",condition:e=>e.hasResourceAvailable("CRIMSON_STRIKE_READY")},{newSkill:"MOUNTAIN_BUSTER",condition:e=>e.hasResourceAvailable("TITANS_FAVOR")},{newSkill:"SLIPSTREAM",condition:e=>e.hasResourceAvailable("GARUDAS_FAVOR")}];ao("ASTRAL_FLOW",60,"cd_ASTRAL_FLOW",{applicationDelay:0,cooldown:20,replaceIf:fa,validateAttempt:e=>!1});ao("DEATHFLARE",60,"cd_ASTRAL_FLOW",{potency:500,applicationDelay:.8,cooldown:20,replaceIf:fa,highlightIf:e=>!0,validateAttempt:fa[0].condition,falloff:.5,startOnHotbar:!1});ao("REKINDLE",80,"cd_ASTRAL_FLOW",{applicationDelay:1.03,cooldown:20,replaceIf:fa,highlightIf:e=>!0,validateAttempt:fa[1].condition,onConfirm:e=>e.gainStatus("REKINDLE"),startOnHotbar:!1});ao("SUNFLARE",100,"cd_ASTRAL_FLOW",{potency:1e3,applicationDelay:.8,cooldown:20,replaceIf:fa,highlightIf:e=>!0,validateAttempt:fa[2].condition,falloff:.5,startOnHotbar:!1});et("CRIMSON_CYCLONE",86,{basePotency:[["NEVER",430],["ARCANE_MASTERY",520]],applicationDelay:.8,replaceIf:fa,highlightIf:e=>!0,validateAttempt:fa[3].condition,onConfirm:e=>{e.tryConsumeResource("IFRITS_FAVOR"),e.gainStatus("CRIMSON_STRIKE_READY")},falloff:.6,startOnHotbar:!1});et("CRIMSON_STRIKE",86,{basePotency:[["NEVER",430],["ARCANE_MASTERY",520]],applicationDelay:.76,replaceIf:fa,highlightIf:e=>!0,validateAttempt:fa[4].condition,onConfirm:e=>e.tryConsumeResource("CRIMSON_STRIKE_READY"),falloff:.6,startOnHotbar:!1});ao("MOUNTAIN_BUSTER",86,"cd_MOUNTAIN_BUSTER",{potency:[["NEVER",150],["ARCANE_MASTERY",160]],cooldown:1,applicationDelay:.76,replaceIf:fa,highlightIf:e=>!0,validateAttempt:fa[5].condition,onConfirm:e=>e.tryConsumeResource("TITANS_FAVOR"),falloff:.6,startOnHotbar:!1});et("SLIPSTREAM",86,{baseCastTime:3,baseRecastTime:3.5,basePotency:[["NEVER",430],["ARCANE_MASTERY",520]],applicationDelay:1.02,replaceIf:fa,highlightIf:e=>!0,validateAttempt:fa[6].condition,onConfirm:(e,t)=>{e.tryConsumeResource("GARUDAS_FAVOR"),e.addDoTPotencies({node:t,effectName:"SLIPSTREAM",skillName:"SLIPSTREAM",tickPotency:30,speedStat:"sps"})},onApplication:(e,t)=>e.applyDoT("SLIPSTREAM",t),falloff:.6,startOnHotbar:!1});const hB=[{newSkill:"ENKINDLE_BAHAMUT",condition:e=>[0,2].includes(e.activeDemi)},{newSkill:"ENKINDLE_PHOENIX",condition:e=>e.activeDemi===3},{newSkill:"ENKINDLE_SOLAR_BAHAMUT",condition:e=>e.activeDemi===1}];[{name:"ENKINDLE_BAHAMUT",level:70,activeValue:2,falloff:.5},{name:"ENKINDLE_PHOENIX",level:80,activeValue:3,falloff:.5},{name:"ENKINDLE_SOLAR_BAHAMUT",level:100,activeValue:1,falloff:.5}].forEach((e,t)=>ao(e.name,e.level,"cd_ENKINDLE",{applicationDelay:0,cooldown:20,replaceIf:hB,validateAttempt:a=>a.activeDemi===e.activeValue,onConfirm:(a,o)=>a.queueEnkindle(o,e.name),startOnHotbar:t===0,savesTargets:!0,falloff:e.falloff}));et("RUIN_IV",62,{basePotency:[["NEVER",430],["ARCANE_MASTERY",520]],manaCost:400,applicationDelay:.8,falloff:.6,highlightIf:e=>e.hasResourceAvailable("FURTHER_RUIN"),validateAttempt:e=>e.hasResourceAvailable("FURTHER_RUIN"),onConfirm:e=>e.tryConsumeResource("FURTHER_RUIN")});[{name:"ENERGY_DRAIN",level:10,potency:200,applicationDelay:1.07},{name:"ENERGY_SIPHON",level:52,potency:100,applicationDelay:1.02,falloff:0}].forEach(e=>ao(e.name,e.level,"cd_ENERGY_DRAIN",{...e,cooldown:60,onConfirm:t=>{t.gainStatus("AETHERFLOW",2),t.gainStatus("FURTHER_RUIN")}}));[{name:"FESTER",level:10,potency:340,applicationDelay:.71,autoUpgrade:{trait:"ENHANCED_FESTER",otherSkill:"NECROTIZE"}},{name:"PAINFLARE",level:40,potency:150,applicationDelay:.44,falloff:0},{name:"NECROTIZE",level:92,potency:460,applicationDelay:.71,autoDowngrade:{trait:"ENHANCED_FESTER",otherSkill:"FESTER"}}].forEach(e=>ao(e.name,e.level,"cd_AETHERFLOW",{...e,cooldown:1,validateAttempt:t=>t.hasResourceAvailable("AETHERFLOW"),onConfirm:t=>t.tryConsumeResource("AETHERFLOW")}));Ye("SMN","SEARING_LIGHT",66,"cd_SEARING_LIGHT",{rscType:"SEARING_LIGHT",applicationDelay:0,cooldown:120,onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_SEARING_LIGHT")&&e.gainStatus("RUBYS_GLIMMER")},replaceIf:[{newSkill:"SEARING_FLASH",condition:e=>e.hasResourceAvailable("RUBYS_GLIMMER")}]});ao("SEARING_FLASH",96,"cd_SEARING_FLASH",{potency:700,applicationDelay:.8,cooldown:1,falloff:0,startOnHotbar:!1,highlightIf:e=>e.hasResourceAvailable("RUBYS_GLIMMER"),validateAttempt:e=>e.hasResourceAvailable("RUBYS_GLIMMER"),onConfirm:e=>e.tryConsumeResource("RUBYS_GLIMMER")});Ye("SMN","RADIANT_AEGIS",2,"cd_RADIANT_AEGIS",{rscType:"RADIANT_AEGIS",applicationDelay:.45,cooldown:60,maxCharges:2,validateAttempt:e=>!e.hasActivePet});ao("LUX_SOLARIS",100,"cd_LUX_SOLARIS",{applicationDelay:.62,cooldown:60,highlightIf:e=>e.hasResourceAvailable("REFULGENT_LUX"),validateAttempt:e=>e.hasResourceAvailable("REFULGENT_LUX"),onConfirm:e=>e.tryConsumeResource("REFULGENT_LUX")});et("RESURRECTION",12,{baseCastTime:8,manaCost:2400,applicationDelay:1.11,basePotency:0});Object.keys(QN).forEach(e=>zt(e,`SGE/${Ge[e].name}.png`));const fB=["EUKRASIAN_DOSIS","EUKRASIAN_DOSIS_II","EUKRASIAN_DOSIS_III","EUKRASIAN_DYSKRASIA"],EB=["EUKRASIAN_DIAGNOSIS","KRASIS","TAUROCHOLE","HAIMA","HAIMATINON","KARDION"],mB=["EUKRASIA","SOTERIA","ZOE","PHILOSOPHIA","KARDIA"],AB=["EUKRASIAN_PROGNOSIS","PANHAIMA","PANHAIMATINON","KERACHOLE","KERAKEIA","EUDAIMONIA","HOLOS","HOLOSAKOS"];class RB extends Xt{jobSpecificOtherTargetedBuffViewProps(){return[...fB,...EB].flatMap(t=>t==="KARDION"?[this.makeCommonTimerless(t,!1)]:this.makeTargetedTimers(t))}jobSpecificSelfTargetedBuffViewProps(){return[...AB,...mB].map(t=>t==="KARDIA"||t==="EUKRASIA"?this.makeCommonTimerless(t):this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){const a=this.state.resources.get("ADDERSGALL"),o=Ut("SGE","ADDERSGALL").maxTimeout,s=a.availableAmount()<a.maxValue?this.state.resources.timeTillReady("ADDERSGALL"):o,c=this.state.resources.get("ADDERSTING");return[{kind:"counter",name:N({en:Ge.ADDERSGALL.name,zh:Ge.ADDERSGALL.label.zh}),color:t.sge.addersgall,currentStacks:a.availableAmount(),maxStacks:a.maxValue},{kind:"bar",name:N({en:Ge.ADDERSGALL.name+" timer",zh:Ge.ADDERSGALL.label.zh+""}),color:t.sge.addersgall,progress:1-s/o,valueString:s.toFixed(3)},{kind:"counter",name:N({en:Ge.ADDERSTING.name,zh:Ge.ADDERSTING.label.zh}),color:t.sge.addersting,currentStacks:c.availableAmount(),maxStacks:c.maxValue}]}}const Dt=(e,t,a)=>{Ve("SGE",e,t,a??{})};Dt("ADDERSGALL",3,{default:3,timeout:20});Dt("ADDERSTING",3,{default:3});Dt("EUKRASIA",1);Dt("KARDIA",1,{default:1});Dt("KARDION",1,{default:1});Dt("EUKRASIAN_DIAGNOSIS",1,{timeout:30});Dt("DIFFERENTIAL_DIAGNOSIS",1,{timeout:30});Dt("EUKRASIAN_PROGNOSIS",1,{timeout:30});Dt("HAIMA",1,{timeout:15});Dt("HAIMATINON",5,{timeout:15});Dt("PANHAIMA",1,{timeout:15});Dt("PANHAIMATINON",5,{timeout:15});Dt("PHYSIS_II",1,{timeout:15});Dt("AUTOPHYSIS",1,{timeout:15});Dt("PHILOSOPHIA",1,{timeout:20});Dt("EUDAIMONIA",1,{timeout:20});Dt("HOLOS",1,{timeout:20});Dt("HOLOSAKOS",1,{timeout:30});Dt("SOTERIA",4,{timeout:15});Dt("ZOE",1,{timeout:30});Dt("KRASIS",1,{timeout:10});Dt("KERACHOLE",1,{timeout:15});Dt("KERAKEIA",1,{timeout:15});Dt("TAUROCHOLE",1,{timeout:15});Dt("EUKRASIAN_DOSIS",1,{timeout:30});Dt("EUKRASIAN_DOSIS_II",1,{timeout:30});Dt("EUKRASIAN_DOSIS_III",1,{timeout:30});Dt("EUKRASIAN_DYSKRASIA",1,{timeout:30});class TB extends qt{constructor(t){if(super(t),this.hasTraitUnlocked("ENHANCED_SWIFTCAST")||this.cooldowns.set(new Ue("cd_SWIFTCAST",60,1,1)),!this.hasTraitUnlocked("ENHANCED_PHYSIS_II")){const a=Qi(this.job).get("AUTOPHYSIS");a.maxTimeout=10,Qi(this.job).set("AUTOPHYSIS",a)}this.hasTraitUnlocked("ENHANCED_SOTERIA")||this.cooldowns.set(new Ue("cd_SOTERIA",90,1,1)),this.hasTraitUnlocked("ENHANCED_ZOE")||this.cooldowns.set(new Ue("cd_ZOE",120,1,1)),this.registerRecurringEvents([{reportName:N({en:"Eukrasian DoT"}),groupedEffects:[{effectName:"EUKRASIAN_DOSIS",appliedBy:["EUKRASIAN_DOSIS"]},{effectName:"EUKRASIAN_DOSIS_II",appliedBy:["EUKRASIAN_DOSIS_II"]},{effectName:"EUKRASIAN_DOSIS_III",appliedBy:["EUKRASIAN_DOSIS_III"]},{effectName:"EUKRASIAN_DYSKRASIA",appliedBy:["EUKRASIAN_DYSKRASIA"]}]},{isHealing:!0,groupedEffects:[{effectName:"PHYSIS_II",appliedBy:["PHYSIS_II"]}]},{isHealing:!0,groupedEffects:[{effectName:"KERAKEIA",appliedBy:["KERACHOLE"]}]}])}get statusPropsGenerator(){return new RB(this)}jobSpecificRegisterRecurringEvents(){const t=a=>{const o=Ut("SGE","ADDERSGALL");this.hasResourceAvailable("ADDERSGALL",o.maxValue)||this.resources.get("ADDERSGALL").gain(1),this.resources.addResourceEvent({rscType:"ADDERSGALL",name:"gain addersgall if not currently capped",delay:o.maxTimeout,fnOnRsc:t})};t(this.resources.get("ADDERSGALL"))}jobSpecificAddHealingBuffCovers(t,a){this.hasResourceAvailable("AUTOPHYSIS")&&t.addBuff(H.Autophysis),this.hasResourceAvailable("KRASIS")&&t.addBuff(H.Krasis),a.cdName==="cd_GCD"&&(this.hasResourceAvailable("ZOE")&&t.addBuff(H.Zoe),this.hasResourceAvailable("PHILOSOPHIA")&&t.addBuff(H.Philosophia))}consumeAddersgall(){const t=Ut("SGE","ADDERSGALL");this.hasResourceAvailable("ADDERSGALL",t.maxValue)&&this.resources.get("ADDERSGALL").overrideTimer(this,t.maxTimeout),this.tryConsumeResource("ADDERSGALL"),this.resources.get("MANA").gain(700)}addPepsisPotency(t,a){const o=new tn({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:"PEPSIS",aspect:Ie.Other,basePotency:t==="EUKRASIAN_DIAGNOSIS"?450:350,description:Ke(t),healTargetCount:t==="EUKRASIAN_DIAGNOSIS"?1:this.partySize,snapshotTime:this.getDisplayTime()});if(this.hasResourceAvailable("TINCTURE")&&o.addModifiers(J.Tincture),this.hasResourceAvailable("AUTOPHYSIS")&&o.addModifiers(J.Autophysis),this.hasResourceAvailable("KRASIS")){if(t==="EUKRASIAN_PROGNOSIS"){const s=new tn({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:"PEPSIS",aspect:Ie.Other,basePotency:o.base,description:Ke(t),healTargetCount:o.targetCount-1,snapshotTime:this.getDisplayTime()});a.addHoTPotency(s,"PEPSIS"),o.healTargetCount=1,o.description+=", "+Ke("KRASIS")}o.addModifiers(J.Krasis)}a.addHoTPotency(o,"PEPSIS")}addHaimaExpirationPotency(t,a){if(!(t==="HAIMA"||t==="PANHAIMA"))return;const o=new tn({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t==="HAIMA"?"HAIMA":"PANHAIMA",aspect:Ie.Other,basePotency:t==="HAIMA"?150:100,description:"",healTargetCount:t==="HAIMA"?1:this.partySize,snapshotTime:this.getDisplayTime()});if(this.hasResourceAvailable("TINCTURE")&&o.addModifiers(J.Tincture),this.hasResourceAvailable("AUTOPHYSIS")&&o.addModifiers(J.Autophysis),this.hasResourceAvailable("KRASIS")){if(t==="PANHAIMA"){const s=new tn({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:"PANHAIMA",aspect:Ie.Other,basePotency:100,description:"",healTargetCount:this.partySize-1,snapshotTime:this.getDisplayTime()});a.addHoTPotency(s,t),o.healTargetCount=1}o.addModifiers(J.Krasis)}a.addHoTPotency(o,t)}handleHaimaExpiration(t,a){if(!(t==="HAIMA"||t==="PANHAIMA"))return;const o=t==="HAIMA"?"HAIMATINON":"PANHAIMATINON",s=this.resources.get(o).availableAmount();s<=0||this.addEvent(new Oe(`${Ge[t].name} expiration heal`,.001,()=>{a.getHotPotencies(t).forEach(c=>{c.description=Ke(t)+" "+N({en:"expiration"})+" ("+s+" "+N({en:"stacks"})+")",t==="PANHAIMA"&&c.getDisplayedModifiers().includes(J.Krasis)&&(c.description+=", "+Ke("KRASIS")),c.base*=s,I.resolveHealingPotency(c)})}))}addHealingMagicPotencyModifiers(t){this.hasResourceAvailable("ZOE")&&t.push(J.Zoe),this.hasResourceAvailable("PHILOSOPHIA")&&t.push(J.Philosophia)}addHealingActionPotencyModifiers(t){this.hasResourceAvailable("AUTOPHYSIS")&&t.push(J.Autophysis),this.hasResourceAvailable("KRASIS")&&t.push(J.Krasis)}}const un=(e,t,a)=>{const o=f=>f.config.adjustedCastTime(1.5),s=f=>f.config.adjustedGCD(2.5),c=f=>{if(!a.healingPotency)return[];const h=[];return f.addHealingMagicPotencyModifiers(h),f.addHealingActionPotencyModifiers(h),h},d=Le(f=>{a.castTime!==0&&f.tryConsumeResource("SWIFTCAST")},(f,h)=>{if(!(f.hasResourceAvailable("KARDIA")&&h.getInitialPotency()))return;const m=new tn({config:f.config,sourceTime:f.getDisplayTime(),sourceSkill:e,aspect:Ie.Other,basePotency:f.hasTraitUnlocked("ENHANCED_HEALING_MAGIC")?170:130,description:Ke("KARDIA"),healTargetCount:1,snapshotTime:f.getDisplayTime()});f.hasResourceAvailable("TINCTURE")&&m.addModifiers(J.Tincture),f.hasResourceAvailable("SOTERIA")&&m.addModifiers(J.Soteria),f.addHealingActionPotencyModifiers(m.getDisplayedModifiers()),h.addHoTPotency(m,"KARDION")},(f,h)=>{if(!f.hasResourceAvailable("EUDAIMONIA"))return;const m=new tn({config:f.config,sourceTime:f.getDisplayTime(),sourceSkill:e,aspect:Ie.Other,basePotency:150,description:Ke("EUDAIMONIA"),healTargetCount:f.partySize,snapshotTime:f.getDisplayTime()});f.hasResourceAvailable("TINCTURE")&&m.addModifiers(J.Tincture),f.addHealingActionPotencyModifiers(m.getDisplayedModifiers()),h.addHoTPotency(m,"EUDAIMONIA")},f=>{a.healingPotency&&f.tryConsumeResource("ZOE")},a.onConfirm);return Xa("SGE",e,t,{...a,castTime:a.castTime??o,recastTime:a.recastTime??s,isInstantFn:f=>f.hasResourceAvailable("SWIFTCAST"),jobHealingPotencyModifiers:c,onConfirm:d,onApplication:Le((f,h)=>{const m=h.getHotPotencies("KARDION"),R=h.getHotPotencies("EUDAIMONIA");m.length>0&&(I.resolveHealingPotency(m[0]),f.tryConsumeResource("SOTERIA")),R.forEach(T=>{I.resolveHealingPotency(T)})},a.onApplication)})},Ln=(e,t,a,o)=>at("SGE",e,t,a,{...o,jobHealingPotencyModifiers:c=>{if(!o.healingPotency)return[];const d=[];return c.addHealingActionPotencyModifiers(d),d}}),jT=(e,t,a,o)=>Ye("SGE",e,t,a,o);un("EUKRASIA",30,{castTime:0,recastTime:1,applicationDelay:0,validateAttempt:e=>!e.hasResourceAvailable("EUKRASIA"),onConfirm:e=>e.gainStatus("EUKRASIA")});un("DOSIS",1,{replaceIf:[{condition:e=>e.hasResourceAvailable("EUKRASIA"),newSkill:"EUKRASIAN_DOSIS"}],autoUpgrade:{trait:"OFFENSIVE_MAGIC_MASTERY",otherSkill:"DOSIS_II"},manaCost:300,potency:300,applicationDelay:.67});un("DOSIS_II",72,{startOnHotbar:!1,replaceIf:[{condition:e=>e.hasResourceAvailable("EUKRASIA"),newSkill:"EUKRASIAN_DOSIS_II"}],autoUpgrade:{trait:"OFFENSIVE_MAGIC_MASTERY_II",otherSkill:"DOSIS_III"},manaCost:400,potency:320,applicationDelay:.67});const zT=[["NEVER",330],["MAGICK_MASTERY_HEALER",380]];un("DOSIS_III",82,{startOnHotbar:!1,replaceIf:[{condition:e=>e.hasResourceAvailable("EUKRASIA"),newSkill:"EUKRASIAN_DOSIS_III"}],manaCost:400,potency:zT,applicationDelay:.67});un("EUKRASIAN_DOSIS",30,{startOnHotbar:!1,manaCost:400,castTime:0,recastTime:1.5,applicationDelay:.76,drawsAggro:!0,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"EUKRASIAN_DOSIS",skillName:"EUKRASIAN_DOSIS",tickPotency:40,speedStat:"sps"}),e.tryConsumeResource("EUKRASIA")},onApplication:(e,t)=>{e.applyDoT("EUKRASIAN_DOSIS",t)}});un("EUKRASIAN_DOSIS_II",72,{startOnHotbar:!1,manaCost:400,castTime:0,recastTime:1.5,applicationDelay:.76,drawsAggro:!0,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"EUKRASIAN_DOSIS_II",skillName:"EUKRASIAN_DOSIS_II",tickPotency:60,speedStat:"sps"}),e.tryConsumeResource("EUKRASIA")},onApplication:(e,t)=>{e.applyDoT("EUKRASIAN_DOSIS_II",t)}});un("EUKRASIAN_DOSIS_III",82,{startOnHotbar:!1,manaCost:400,castTime:0,recastTime:1.5,applicationDelay:.76,drawsAggro:!0,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"EUKRASIAN_DOSIS_III",skillName:"EUKRASIAN_DOSIS_III",tickPotency:85,speedStat:"sps"}),e.tryConsumeResource("EUKRASIA")},onApplication:(e,t)=>{e.applyDoT("EUKRASIAN_DOSIS_III",t)}});un("TOXIKON",66,{autoUpgrade:{trait:"OFFENSIVE_MAGIC_MASTERY_II",otherSkill:"TOXIKON_II"},potency:[["NEVER",240],["OFFENSIVE_MAGIC_MASTERY",300]],falloff:.5,applicationDelay:1.2,castTime:0,validateAttempt:e=>e.hasResourceAvailable("ADDERSTING"),onConfirm:e=>e.tryConsumeResource("ADDERSTING")});un("TOXIKON_II",82,{startOnHotbar:!1,potency:zT,falloff:.5,applicationDelay:1.2,castTime:0,validateAttempt:e=>e.hasResourceAvailable("ADDERSTING"),onConfirm:e=>e.tryConsumeResource("ADDERSTING")});un("PHLEGMA",26,{autoUpgrade:{trait:"OFFENSIVE_MAGIC_MASTERY",otherSkill:"PHLEGMA_II"},potency:400,falloff:.5,applicationDelay:.67,manaCost:400,castTime:0,secondaryCooldown:{cdName:"cd_PHLEGMA",maxCharges:2,cooldown:40}});un("PHLEGMA_II",72,{startOnHotbar:!1,autoUpgrade:{trait:"OFFENSIVE_MAGIC_MASTERY_II",otherSkill:"PHLEGMA_III"},potency:490,falloff:.5,applicationDelay:.67,manaCost:400,castTime:0,secondaryCooldown:{cdName:"cd_PHLEGMA",maxCharges:2,cooldown:40}});un("PHLEGMA_III",82,{startOnHotbar:!1,potency:600,falloff:.5,applicationDelay:.67,manaCost:400,castTime:0,secondaryCooldown:{cdName:"cd_PHLEGMA",maxCharges:2,cooldown:40}});Ln("PSYCHE",92,"cd_PSYCHE",{potency:600,falloff:.5,applicationDelay:2.1,cooldown:60});un("DYSKRASIA",46,{autoUpgrade:{trait:"OFFENSIVE_MAGIC_MASTERY_II",otherSkill:"DYSKRASIA_II"},potency:160,falloff:0,applicationDelay:.76,manaCost:400,castTime:0});un("DYSKRASIA_II",82,{startOnHotbar:!1,replaceIf:[{condition:e=>e.hasResourceAvailable("EUKRASIA"),newSkill:"EUKRASIAN_DYSKRASIA"}],potency:170,falloff:0,applicationDelay:.76,manaCost:400,castTime:0});un("EUKRASIAN_DYSKRASIA",82,{startOnHotbar:!1,falloff:0,applicationDelay:1.03,castTime:0,recastTime:1.5,drawsAggro:!0,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"EUKRASIAN_DYSKRASIA",skillName:"EUKRASIAN_DYSKRASIA",tickPotency:40,speedStat:"sps"}),e.tryConsumeResource("EUKRASIA")},onApplication:(e,t)=>{e.applyDoT("EUKRASIAN_DYSKRASIA",t)}});un("DIAGNOSIS",2,{healingPotency:[["NEVER",400],["ENHANCED_HEALING_MAGIC",450]],applicationDelay:.58,replaceIf:[{condition:e=>e.hasResourceAvailable("EUKRASIA"),newSkill:"EUKRASIAN_DIAGNOSIS"}],manaCost:400});un("EUKRASIAN_DIAGNOSIS",30,{startOnHotbar:!1,healingPotency:300,applicationDelay:.67,castTime:0,recastTime:1.5,manaCost:800,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:e=>e.tryConsumeResource("EUKRASIA"),onApplication:e=>e.gainStatus("EUKRASIAN_DIAGNOSIS")});Ln("EUKRASIAN_DIAGNOSIS_POP",30,"cd_DIAGNOSIS_POP",{animationLock:ma,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("EUKRASIAN_DIAGNOSIS"),onConfirm:e=>{e.tryConsumeResource("EUKRASIAN_DIAGNOSIS"),e.resources.get("ADDERSTING").gain(1)},highlightIf:e=>e.hasResourceAvailable("EUKRASIAN_DIAGNOSIS")});un("PROGNOSIS",10,{healingPotency:300,aoeHeal:!0,applicationDelay:.58,replaceIf:[{condition:e=>e.hasResourceAvailable("EUKRASIA")&&e.hasTraitUnlocked("EUKRASIAN_PROGNOSIS_MASTERY"),newSkill:"EUKRASIAN_PROGNOSIS_II"},{condition:e=>e.hasResourceAvailable("EUKRASIA")&&!e.hasTraitUnlocked("EUKRASIAN_PROGNOSIS_MASTERY"),newSkill:"EUKRASIAN_PROGNOSIS"}],manaCost:700,castTime:e=>e.config.adjustedCastTime(2)});un("EUKRASIAN_PROGNOSIS",30,{startOnHotbar:!1,autoUpgrade:{trait:"EUKRASIAN_PROGNOSIS_MASTERY",otherSkill:"EUKRASIAN_PROGNOSIS_II"},healingPotency:100,aoeHeal:!0,applicationDelay:.94,castTime:0,recastTime:1.5,manaCost:800,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:e=>e.tryConsumeResource("EUKRASIA"),onApplication:e=>e.gainStatus("EUKRASIAN_PROGNOSIS")});un("EUKRASIAN_PROGNOSIS_II",96,{startOnHotbar:!1,healingPotency:100,aoeHeal:!0,applicationDelay:.94,castTime:0,recastTime:1.5,manaCost:800,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:e=>e.tryConsumeResource("EUKRASIA"),onApplication:e=>e.gainStatus("EUKRASIAN_PROGNOSIS")});Ln("EUKRASIAN_PROGNOSIS_POP",30,"cd_PROGNOSIS_POP",{autoUpgrade:{trait:"EUKRASIAN_PROGNOSIS_MASTERY",otherSkill:"EUKRASIAN_PROGNOSIS_II_POP"},animationLock:ma,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("EUKRASIAN_PROGNOSIS"),onConfirm:e=>{e.tryConsumeResource("EUKRASIAN_PROGNOSIS"),e.resources.get("ADDERSTING").gain(1)},highlightIf:e=>e.hasResourceAvailable("EUKRASIAN_PROGNOSIS")});Ln("EUKRASIAN_PROGNOSIS_II_POP",30,"cd_PROGNOSIS_POP",{startOnHotbar:!1,animationLock:ma,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("EUKRASIAN_PROGNOSIS"),onConfirm:e=>{e.tryConsumeResource("EUKRASIAN_PROGNOSIS"),e.resources.get("ADDERSTING").gain(1)},highlightIf:e=>e.hasResourceAvailable("EUKRASIAN_PROGNOSIS")});un("PNEUMA",90,{potency:zT,falloff:.4,healingPotency:600,aoeHeal:!0,applicationDelay:.58,manaCost:700,secondaryCooldown:{cdName:"cd_PNEUMA",maxCharges:1,cooldown:120}});jT("ZOE",56,"cd_ZOE",{rscType:"ZOE",applicationDelay:0,cooldown:90});Ln("PEPSIS",58,"cd_PEPSIS",{cooldown:30,applicationDelay:1.16,onConfirm:(e,t)=>{e.hasResourceAvailable("EUKRASIAN_DIAGNOSIS")&&(e.addPepsisPotency("EUKRASIAN_DIAGNOSIS",t),e.tryConsumeResource("EUKRASIAN_DIAGNOSIS")),e.hasResourceAvailable("EUKRASIAN_PROGNOSIS")&&(e.addPepsisPotency("EUKRASIAN_PROGNOSIS",t),e.tryConsumeResource("EUKRASIAN_PROGNOSIS"))},onApplication:(e,t)=>{t.getHotPotencies("PEPSIS").forEach(a=>{I.resolveHealingPotency(a)})}});jT("SOTERIA",35,"cd_SOTERIA",{rscType:"SOTERIA",applicationDelay:.8,cooldown:60});jT("KRASIS",86,"cd_KRASIS",{rscType:"KRASIS",applicationDelay:.76,cooldown:60});Ln("HAIMA",70,"cd_HAIMA",{replaceIf:[{condition:e=>e.hasResourceAvailable("HAIMA"),newSkill:"HAIMA_POP"}],applicationDelay:.76,cooldown:120,onConfirm:(e,t)=>e.addHaimaExpirationPotency("HAIMA",t),onApplication:(e,t)=>{const a=Ut("SGE","HAIMATINON").maxValue;e.gainStatus("HAIMA"),e.gainStatus("HAIMATINON",a),e.addEvent(new Oe("Haima Expiration heal Check",Ut("SGE","HAIMA").maxTimeout-.001,()=>e.handleHaimaExpiration("HAIMA",t)))}});Ln("HAIMA_POP",70,"cd_HAIMA_POP",{startOnHotbar:!1,animationLock:ma,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("HAIMA"),highlightIf:e=>e.hasResourceAvailable("HAIMA"),onConfirm:e=>{e.hasResourceAvailable("HAIMATINON")?e.tryConsumeResource("HAIMATINON"):e.tryConsumeResource("HAIMA")}});Ln("PHYSIS_II",60,"cd_PHYSIS",{aoeHeal:!0,applicationDelay:.85,cooldown:60,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"PHYSIS_II",effectName:"PHYSIS_II",speedStat:"sps",tickPotency:130})},onApplication:(e,t)=>{e.applyHoT("PHYSIS_II",t),e.gainStatus("AUTOPHYSIS")}});Ln("PHILOSOPHIA",100,"cd_PHILOSOPHIA",{applicationDelay:1.83,cooldown:180,onApplication:e=>{e.gainStatus("PHILOSOPHIA"),e.gainStatus("EUDAIMONIA")}});Ln("HOLOS",76,"cd_HOLOS",{applicationDelay:.62,cooldown:120,onApplication:e=>{e.gainStatus("HOLOS"),e.gainStatus("HOLOSAKOS")}});Ln("PANHAIMA",80,"cd_PANHAIMA",{replaceIf:[{condition:e=>e.hasResourceAvailable("PANHAIMA"),newSkill:"PANHAIMA_POP"}],applicationDelay:.62,cooldown:120,onConfirm:(e,t)=>e.addHaimaExpirationPotency("PANHAIMA",t),onApplication:(e,t)=>{const a=Ut("SGE","PANHAIMATINON").maxValue;e.gainStatus("PANHAIMA"),e.gainStatus("PANHAIMATINON",a),e.addEvent(new Oe("Panhaima Expiration heal Check",Ut("SGE","PANHAIMA").maxTimeout-.001,()=>e.handleHaimaExpiration("PANHAIMA",t)))}});Ln("PANHAIMA_POP",80,"cd_PANHAIMA_POP",{startOnHotbar:!1,animationLock:ma,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("PANHAIMA"),highlightIf:e=>e.hasResourceAvailable("PANHAIMA"),onConfirm:e=>{e.hasResourceAvailable("PANHAIMATINON")?e.tryConsumeResource("PANHAIMATINON"):e.tryConsumeResource("PANHAIMA")}});Ln("RHIZOMATA",74,"cd_RHIZOMATA",{cooldown:90,onConfirm:e=>e.resources.get("ADDERSGALL").gain(1)});Ln("DRUOCHOLE",45,"cd_DRUOCHOLE",{cooldown:1,healingPotency:600,applicationDelay:.78,validateAttempt:e=>e.hasResourceAvailable("ADDERSGALL"),onConfirm:e=>e.consumeAddersgall()});Ln("IXOCHOLE",52,"cd_IXOCHOLE",{cooldown:30,healingPotency:400,aoeHeal:!0,applicationDelay:.756,validateAttempt:e=>e.hasResourceAvailable("ADDERSGALL"),onConfirm:e=>e.consumeAddersgall()});Ln("TAUROCHOLE",62,"cd_TAUROCHOLE",{cooldown:45,applicationDelay:.67,onConfirm:e=>e.consumeAddersgall(),onApplication:e=>e.gainStatus("TAUROCHOLE")});Ln("KERACHOLE",50,"cd_KERACHOLE",{cooldown:30,aoeHeal:!0,applicationDelay:.81,validateAttempt:e=>e.hasResourceAvailable("ADDERSGALL"),onConfirm:(e,t)=>{e.consumeAddersgall(),e.addHoTPotencies({node:t,skillName:"KERACHOLE",effectName:"KERAKEIA",speedStat:"sps",tickPotency:100})},onApplication:(e,t)=>{e.gainStatus("KERACHOLE"),e.hasTraitUnlocked("ENHANCED_KERACHOLE")&&e.applyHoT("KERAKEIA",t)}});un("EGEIRO",12,{applicationDelay:.58,manaCost:2400,castTime:8});Ln("KARDIA",4,"cd_KARDIA",{applicationDelay:.62,cooldown:5,onApplication:e=>{e.gainStatus("KARDIA"),e.gainStatus("KARDION")}});Ln("ICARUS",40,"cd_ICARUS",{cooldown:45,animationLock:Wt});Object.keys(eT).forEach(e=>zt(e,`WAR/${Ge[e].name}.png`));class SB extends Xt{jobSpecificSelfTargetedBuffViewProps(){return Object.keys(eT).map(t=>this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){const a=this.state.resources,o=a.get("BEAST_GAUGE").availableAmount(),s=a.get("STORM_COMBO"),c=a.get("TEMPEST_COMBO"),d=s.available(1)?s.pendingChange?.timeTillEvent:c.available(1)?c.pendingChange?.timeTillEvent:void 0;return[{kind:"text",name:N({en:"Combo Timer",zh:""}),text:d?.toFixed(3)??"N/A"},{kind:"bar",name:N({en:"Beast Gauge",zh:""}),color:t.war.beastGauge,progress:o/100,valueString:o.toFixed(0)}]}}const Gt=(e,t,a)=>{Ve("WAR",e,t,a??{})};Gt("BEAST_GAUGE",100,{warnOnOvercap:!0});const YT=.74,AO=1.16;Gt("SURGING_TEMPEST",1,{timeout:60});Gt("NASCENT_CHAOS",1,{timeout:30});Gt("INNER_RELEASE",3,{timeout:15+YT});Gt("INNER_STRENGTH",1,{timeout:15+YT});Gt("BURGEONING_FURY",3,{timeout:30});Gt("WRATHFUL",1,{timeout:30});Gt("PRIMAL_REND_READY",1,{timeout:30+YT,warnOnTimeout:!0});Gt("PRIMAL_RUINATION_READY",1,{timeout:20+AO,warnOnTimeout:!0});Gt("THRILL_OF_BATTLE",1,{timeout:10});Gt("EQUILIBRIUM",1,{timeout:15});Gt("RAW_INTUITION",1,{timeout:6});Gt("BLOODWHETTING",1,{timeout:8});Gt("STEM_THE_FLOW",1,{timeout:4});Gt("STEM_THE_TIDE",1,{timeout:20});Gt("NASCENT_FLASH",1,{timeout:8});Gt("VENGEANCE",1,{timeout:15});Gt("DAMNATION",1,{timeout:15});Gt("PRIMEVAL_IMPULSE",1,{timeout:15});Gt("SHAKE_IT_OFF",1,{timeout:30});Gt("SHAKE_IT_OFF_OVER_TIME",1,{timeout:15});Gt("HOLMGANG",1,{timeout:10});Gt("DEFIANCE",1);Gt("STORM_COMBO",2,{timeout:30});Gt("TEMPEST_COMBO",1,{timeout:30});const gB=["HEAVY_SWING","MAIM","STORMS_EYE","STORMS_PATH"],RO=["OVERPOWER","MYTHRIL_TEMPEST"],IB=[...gB,...RO],IN=["FELL_CLEAVE","DECIMATE"],_B=["THRILL_OF_BATTLE","DAMNATION","BLOODWHETTING","VENGEANCE","RAW_INTUITION"];class pB extends qt{constructor(t){super(t),this.hasTraitUnlocked("ENHANCED_ONSLAUGHT")&&this.cooldowns.set(new Ue("cd_ONSLAUGHT",30,3,3)),this.registerRecurringEvents()}get statusPropsGenerator(){return new SB(this)}processComboStatus(t){if(!IB.includes(t))return;const a=RO.includes(t),o=a?"TEMPEST_COMBO":"STORM_COMBO",s=a?"STORM_COMBO":"TEMPEST_COMBO";this.setComboState(s,0);const c=this.resources.get(o).availableAmount();let d=0;a?t==="OVERPOWER"&&(d=1):t==="HEAVY_SWING"?d=1:c===1&&t==="MAIM"&&(d=2),this.setComboState(o,d)}hasComboStatus(t,a){return this.hasResourceExactly(t,a)}gainBeastGauge(t){this.resources.get("BEAST_GAUGE").gain(t)}gainProc(t,a){const o=Ut("WAR",t).maxTimeout;this.hasResourceAvailable(t)?(t==="BURGEONING_FURY"&&this.resources.get(t).gain(1),this.resources.get(t).overrideTimer(this,o)):(this.resources.get(t).gain(a??1),o&&this.enqueueResourceDrop(t,o))}gainSurgingTempest(t){const a=this.resources.get("SURGING_TEMPEST"),o=Ut("WAR","SURGING_TEMPEST").maxTimeout,s=(a.pendingChange?.timeTillEvent??0)+t;a.overrideTimer(this,s>=o?o:s)}gainSurgingTempestGCD(t,a,o){this.hasResourceAvailable("SURGING_TEMPEST")?this.addEvent(new Oe("surging tempest refresh",a,()=>{this.hasResourceAvailable("SURGING_TEMPEST")?this.gainSurgingTempest(t):(this.resources.get("SURGING_TEMPEST").gain(1),this.enqueueResourceDrop("SURGING_TEMPEST",t))})):(this.resources.get("SURGING_TEMPEST").gain(1),this.enqueueResourceDrop("SURGING_TEMPEST",t+o))}}const Qa=(e,t,a)=>{const o=Le(a.onConfirm,c=>c.processComboStatus(e),c=>{IN.includes(e)&&c.tryConsumeResource("INNER_RELEASE")&&c.hasTraitUnlocked("ENHANCED_INNER_RELEASE")&&(c.gainProc("BURGEONING_FURY"),c.hasResourceAvailable("BURGEONING_FURY",3)&&(c.gainProc("WRATHFUL"),c.tryConsumeResource("BURGEONING_FURY",!0)))}),s=a.jobPotencyModifiers??(c=>[]);return on("WAR",e,t,{...a,onConfirm:o,recastTime:c=>c.config.adjustedSksGCD(),jobPotencyModifiers:c=>{const d=s(c);return c.hasResourceAvailable("SURGING_TEMPEST")&&d.push(J.SurgingTempest),c.hasResourceAvailable("INNER_RELEASE")&&IN.includes(e)&&d.push(J.AutoCDH),d}})},tc=(e,t,a,o)=>at("WAR",e,t,a,{...o,jobPotencyModifiers:s=>{const c=[];return s.hasResourceAvailable("SURGING_TEMPEST")&&c.push(J.SurgingTempest),c}});Qa("TOMAHAWK",15,{potency:150,applicationDelay:.71});Qa("HEAVY_SWING",1,{potency:[["NEVER",150],["MELEE_MASTERY_TANK",200],["MELEE_MASTERY_II_TANK",240]],applicationDelay:.53});Qa("MAIM",4,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",150],["MELEE_MASTERY_II_TANK",190]],combo:{potency:[["NEVER",250],["MELEE_MASTERY_TANK",300],["MELEE_MASTERY_II_TANK",340]],resource:"STORM_COMBO",resourceValue:1},applicationDelay:.62,onConfirm:e=>{e.hasComboStatus("STORM_COMBO",1)&&e.gainBeastGauge(10)},highlightIf:e=>e.hasComboStatus("STORM_COMBO",1)});Qa("STORMS_PATH",26,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",160],["MELEE_MASTERY_II_TANK",220]],combo:{potency:[["NEVER",380],["MELEE_MASTERY_TANK",440],["MELEE_MASTERY_II_TANK",500]],resource:"STORM_COMBO",resourceValue:2},applicationDelay:1.52,onConfirm:e=>{e.hasComboStatus("STORM_COMBO",2)&&e.gainBeastGauge(20)},highlightIf:e=>e.hasComboStatus("STORM_COMBO",2)});Qa("STORMS_EYE",50,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",160],["MELEE_MASTERY_II_TANK",220]],combo:{potency:[["NEVER",380],["MELEE_MASTERY_TANK",440],["MELEE_MASTERY_II_TANK",500]],resource:"STORM_COMBO",resourceValue:2},applicationDelay:1.65,onConfirm:e=>{e.hasComboStatus("STORM_COMBO",2)&&(e.gainBeastGauge(10),e.gainSurgingTempestGCD(30,1.65,1.7))},highlightIf:e=>e.hasComboStatus("STORM_COMBO",2)});Qa("OVERPOWER",10,{potency:110,falloff:0,applicationDelay:.62});Qa("MYTHRIL_TEMPEST",40,{potency:100,combo:{potency:140,resource:"TEMPEST_COMBO",resourceValue:1},falloff:0,applicationDelay:.49,onConfirm:e=>{e.hasComboStatus("TEMPEST_COMBO",1)&&(e.gainBeastGauge(20),e.gainSurgingTempestGCD(30,.49,.45))},highlightIf:e=>e.hasComboStatus("TEMPEST_COMBO",1)});function Bf(e){e.cooldowns.get("cd_INFURIATE").restore(5)}Qa("FELL_CLEAVE",54,{potency:[["NEVER",520],["MELEE_MASTERY_II_TANK",580]],applicationDelay:.62,validateAttempt:e=>e.resources.get("BEAST_GAUGE").available(50)||e.resources.get("INNER_RELEASE").available(1),onConfirm:e=>{e.hasResourceAvailable("INNER_RELEASE")||e.resources.get("BEAST_GAUGE").consume(50),Bf(e)},replaceIf:[{newSkill:"INNER_CHAOS",condition:e=>e.hasResourceAvailable("NASCENT_CHAOS")}],highlightIf:e=>e.hasResourceAvailable("BEAST_GAUGE",50)||e.hasResourceAvailable("INNER_RELEASE")});Qa("DECIMATE",60,{potency:180,falloff:0,applicationDelay:1.83,validateAttempt:e=>e.hasResourceAvailable("BEAST_GAUGE",50)||e.hasResourceAvailable("INNER_RELEASE"),onConfirm:e=>{e.hasResourceAvailable("INNER_RELEASE")||e.resources.get("BEAST_GAUGE").consume(50),Bf(e)},highlightIf:e=>e.hasResourceAvailable("BEAST_GAUGE",50)||e.hasResourceAvailable("INNER_RELEASE"),replaceIf:[{newSkill:"CHAOTIC_CYCLONE",condition:e=>e.hasResourceAvailable("NASCENT_CHAOS")}]});tc("INNER_RELEASE",70,"cd_INNER_RELEASE",{applicationDelay:0,cooldown:60,maxCharges:1,onConfirm:e=>{e.gainProc("INNER_RELEASE",3),e.gainProc("INNER_STRENGTH"),e.hasResourceAvailable("SURGING_TEMPEST")&&e.gainSurgingTempest(10),e.config.level>=$e.lvl90&&e.gainProc("PRIMAL_REND_READY")},replaceIf:[{newSkill:"PRIMAL_WRATH",condition:e=>e.hasResourceAvailable("WRATHFUL")}]});Qa("PRIMAL_REND",90,{potency:700,applicationDelay:AO,falloff:.5,animationLock:1.2,validateAttempt:e=>e.hasResourceAvailable("PRIMAL_REND_READY"),onConfirm:e=>{e.tryConsumeResource("PRIMAL_REND_READY"),e.hasTraitUnlocked("ENHANCED_PRIMAL_REND")&&e.gainProc("PRIMAL_RUINATION_READY")},highlightIf:e=>e.hasResourceAvailable("PRIMAL_REND_READY"),replaceIf:[{newSkill:"PRIMAL_RUINATION",condition:e=>e.hasResourceAvailable("PRIMAL_RUINATION_READY")}],jobPotencyModifiers:e=>[J.AutoCDH]});tc("PRIMAL_WRATH",96,"cd_PRIMAL_WRATH",{startOnHotbar:!1,potency:700,falloff:.5,applicationDelay:1.15,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("WRATHFUL"),onConfirm:e=>e.tryConsumeResource("WRATHFUL"),highlightIf:e=>!0});Qa("PRIMAL_RUINATION",100,{startOnHotbar:!1,potency:780,falloff:.5,applicationDelay:1.06,validateAttempt:e=>e.hasResourceAvailable("PRIMAL_RUINATION_READY"),onConfirm:e=>{e.tryConsumeResource("PRIMAL_RUINATION_READY")},highlightIf:e=>!0,jobPotencyModifiers:e=>[J.AutoCDH]});tc("INFURIATE",50,"cd_INFURIATE",{applicationDelay:0,requiresCombat:!0,cooldown:60,maxCharges:2,onApplication:e=>{e.gainBeastGauge(50),e.hasTraitUnlocked("NASCENT_CHAOS")&&e.gainProc("NASCENT_CHAOS")}});Qa("INNER_CHAOS",80,{startOnHotbar:!1,potency:660,applicationDelay:.94,validateAttempt:e=>e.hasResourceAvailable("BEAST_GAUGE",50)&&e.hasResourceAvailable("NASCENT_CHAOS"),onConfirm:e=>{e.tryConsumeResource("NASCENT_CHAOS"),e.resources.get("BEAST_GAUGE").consume(50),Bf(e)},highlightIf:e=>e.hasResourceAvailable("BEAST_GAUGE",50),jobPotencyModifiers:e=>[J.AutoCDH]});Qa("CHAOTIC_CYCLONE",72,{startOnHotbar:!1,potency:200,falloff:0,applicationDelay:1.43,validateAttempt:e=>e.hasResourceAvailable("BEAST_GAUGE",50)&&e.hasResourceAvailable("NASCENT_CHAOS"),onConfirm:e=>{e.tryConsumeResource("NASCENT_CHAOS"),e.resources.get("BEAST_GAUGE").consume(50),Bf(e)},highlightIf:e=>e.hasResourceAvailable("BEAST_GAUGE",50),jobPotencyModifiers:e=>[J.AutoCDH]});tc("ONSLAUGHT",62,"cd_ONSLAUGHT",{potency:150,applicationDelay:.63,cooldown:30,maxCharges:2,animationLock:Wt});tc("UPHEAVAL",64,"cd_UPHEAVAL",{potency:420,applicationDelay:.62,cooldown:30});tc("OROGENY",86,"cd_UPHEAVAL",{potency:150,falloff:0,applicationDelay:.62,cooldown:30});Ye("WAR","VENGEANCE",38,"cd_VENGEANCE",{rscType:"VENGEANCE",autoUpgrade:{trait:"VENGEANCE_MASTERY",otherSkill:"DAMNATION"},cooldown:120,applicationDelay:.62});Ye("WAR","DAMNATION",92,"cd_VENGEANCE",{rscType:"DAMNATION",autoDowngrade:{trait:"VENGEANCE_MASTERY",otherSkill:"VENGEANCE"},cooldown:120,applicationDelay:.62});Ye("WAR","RAW_INTUITION",56,"cd_RAW_INTUITION",{rscType:"RAW_INTUITION",autoUpgrade:{trait:"RAW_INTUITION_MASTERY",otherSkill:"BLOODWHETTING"},cooldown:25,applicationDelay:.45});Ye("WAR","BLOODWHETTING",82,"cd_RAW_INTUITION",{rscType:"BLOODWHETTING",autoDowngrade:{trait:"RAW_INTUITION_MASTERY",otherSkill:"RAW_INTUITION"},onApplication:e=>{e.gainProc("STEM_THE_FLOW"),e.gainProc("STEM_THE_TIDE")},cooldown:25,applicationDelay:.45});at("WAR","NASCENT_FLASH",76,"cd_RAW_INTUITION",{onApplication:e=>{let t=6;e.hasTraitUnlocked("ENHANCED_NASCENT_FLASH")&&(t=8),e.resources.get("NASCENT_FLASH").gain(1),e.enqueueResourceDrop("NASCENT_FLASH",t)},cooldown:25,applicationDelay:.45});Ye("WAR","HOLMGANG",45,"cd_HOLMGANG",{rscType:"HOLMGANG",cooldown:240,applicationDelay:.45});Ye("WAR","THRILL_OF_BATTLE",30,"cd_THRILL_OF_BATTLE",{rscType:"THRILL_OF_BATTLE",cooldown:90,applicationDelay:.62});at("WAR","EQUILIBRIUM",58,"cd_EQUILIBRIUM",{cooldown:60,applicationDelay:.62,onApplication:e=>{e.hasTraitUnlocked("ENHANCED_EQUILIBRIUM")&&e.gainProc("EQUILIBRIUM")}});Ye("WAR","SHAKE_IT_OFF",68,"cd_SHAKE_IT_OFF",{rscType:"SHAKE_IT_OFF",cooldown:90,onApplication:(e,t)=>{let a=0;_B.forEach(o=>{e.tryConsumeResource(o)&&(a+=1)}),console.debug(`Shake It Off dispelled ${a} buffs`),e.gainProc("SHAKE_IT_OFF_OVER_TIME")},applicationDelay:0});at("WAR","DEFIANCE",10,"cd_DEFIANCE",{cooldown:2,maxCharges:1,applicationDelay:0,validateAttempt:e=>!e.hasResourceAvailable("DEFIANCE"),onConfirm:e=>e.resources.get("DEFIANCE").gain(1),replaceIf:[{newSkill:"RELEASE_DEFIANCE",condition:e=>e.hasResourceAvailable("DEFIANCE")}],secondaryCooldown:{cdName:"cd_RELEASE_DEFIANCE",cooldown:1,maxCharges:1}});at("WAR","RELEASE_DEFIANCE",10,"cd_RELEASE_DEFIANCE",{startOnHotbar:!1,cooldown:1,maxCharges:1,secondaryCooldown:{cdName:"cd_DEFIANCE",cooldown:2,maxCharges:1},applicationDelay:0,validateAttempt:e=>e.hasResourceAvailable("DEFIANCE"),onConfirm:e=>e.tryConsumeResource("DEFIANCE")});const TO=["CIRCLE_OF_SCORN_DOT"],NB=Object.keys(VR).filter(e=>!TO.includes(e));Object.keys(VR).forEach(e=>zt(e,`PLD/${Ge[e].name}.png`));class CB extends Xt{jobSpecificOtherTargetedBuffViewProps(){return[...TO.flatMap(t=>this.makeTargetedTimers(t))]}jobSpecificSelfTargetedBuffViewProps(){return NB.map(t=>this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){const a=this.state.resources,o=a.get("PLD_COMBO_TRACKER"),s=a.get("PLD_AOE_COMBO_TRACKER"),c=a.get("OATH_GAUGE").availableAmount(),d=a.get("IRON_WILL").availableAmount(),f=o.available(1)?o.pendingChange?.timeTillEvent:s.available(1)?s.pendingChange?.timeTillEvent:void 0,h=this.state.findAutoAttackTimerInQueue();let m="";return this.state.hasResourceAvailable("STORED_AUTO")?m="stored":m=h!==-1?h.toFixed(3):"N/A",[{kind:"bar",name:N({en:"Auto Tracker"}),color:t.pld.ironWillColor,progress:h!==-1?(3-h)/3:0,valueString:m},{kind:"bar",name:N({en:"Combo Timer",zh:""}),color:t.pld.pldComboTimer,progress:f?f/30:0,valueString:f?.toFixed(3)??"N/A"},{kind:"counter",name:N({en:"Iron Will",zh:""}),color:t.pld.ironWillColor,currentStacks:d,maxStacks:1},{kind:"bar",name:N({en:"Oath Gauge",zh:""}),color:t.pld.oathGaugeColor,progress:c/100,valueString:c.toFixed(0)}]}}const pt=(e,t,a)=>{Ve("PLD",e,t,a??{})};pt("FIGHT_OR_FLIGHT",1,{timeout:20});pt("IRON_WILL",1);pt("OATH_GAUGE",100);pt("SHELTRON",1,{timeout:6});pt("SENTINEL",1,{timeout:15});pt("CIRCLE_OF_SCORN_DOT",1,{timeout:15});pt("HALLOWED_GROUND",1,{timeout:10});pt("BULWARK",1,{timeout:10});pt("GORING_BLADE_READY",1,{timeout:30});pt("DIVINE_VEIL",1,{timeout:30});pt("ATONEMENT_READY",1,{timeout:30,warnOnTimeout:!0});pt("DIVINE_MIGHT",1,{timeout:30,warnOnTimeout:!0});pt("KNIGHTS_RESOLVE",1,{timeout:4});pt("KNIGHTS_BENEDICTION",1,{timeout:12});pt("REQUIESCAT",4,{timeout:30,warnOnTimeout:!0});pt("CONFITEOR_READY",1,{timeout:30,warnOnTimeout:!0});pt("PASSAGE_OF_ARMS",1,{timeout:18});pt("SUPPLICATION_READY",1,{timeout:30,warnOnTimeout:!0});pt("SEPULCHRE_READY",1,{timeout:30,warnOnTimeout:!0});pt("HOLY_SHELTRON",1,{timeout:8});pt("BLADE_OF_HONOR_READY",1,{timeout:30,warnOnTimeout:!0});pt("GUARDIAN",1,{timeout:15});pt("GUARDIANS_WILL",1,{timeout:15});pt("PLD_COMBO_TRACKER",2,{timeout:30});pt("PLD_CONFITEOR_COMBO_TRACKER",3,{timeout:30});pt("PLD_AOE_COMBO_TRACKER",1,{timeout:30});pt("INTERVENTION",1,{timeout:8});pt("ARMS_UP",1);pt("COVER",1,{timeout:12});const FA=new Map([["TOTAL_ECLIPSE",0],["PROMINENCE",1]]),jA=new Map([["FAST_BLADE",0],["RIOT_BLADE",1],["ROYAL_AUTHORITY",2]]),SO=new Map([["CONFITEOR",0],["BLADE_OF_FAITH",1],["BLADE_OF_TRUTH",2],["BLADE_OF_VALOR",3]]),bh=["HOLY_SPIRIT","HOLY_CIRCLE"];class bB extends qt{constructor(t){super(t),this.resources.get("OATH_GAUGE").gain(100),this.registerRecurringEvents([{groupedEffects:[{effectName:"CIRCLE_OF_SCORN_DOT",appliedBy:["CIRCLE_OF_SCORN"]}]}])}get statusPropsGenerator(){return new CB(this)}jobSpecificAddDamageBuffCovers(t,a){this.hasResourceAvailable("FIGHT_OR_FLIGHT")&&t.addBuff(H.FightOrFlight);const o=a.name;this.hasResourceAvailable("DIVINE_MIGHT")&&(o==="HOLY_SPIRIT"||o==="HOLY_CIRCLE")?t.addBuff(H.DivineMight):this.hasResourceAvailable("REQUIESCAT")&&(o==="HOLY_SPIRIT"||o==="HOLY_CIRCLE"||o==="CONFITEOR"||o==="BLADE_OF_FAITH"||o==="BLADE_OF_TRUTH"||o==="BLADE_OF_VALOR")&&t.addBuff(H.Requiescat)}cancelChanneledSkills(){this.tryConsumeResource("PASSAGE_OF_ARMS")}jobSpecificOnAutoAttack(){I.reportAutoTick(this.time,"auto"),this.resources.get("OATH_GAUGE").gain(5)}isSpellInstant(t){return t!=="CLEMENCY"?this.hasResourceAvailable("DIVINE_MIGHT")||this.hasResourceAvailable("REQUIESCAT"):this.hasResourceAvailable("REQUIESCAT")}captureSpellCastTime(t,a){return this.isSpellInstant(t)?0:this.config.adjustedCastTime(a)}tryConsumeRequiescat(t){(bh.includes(t)||SO.has(t)||t==="CLEMENCY")&&this.tryConsumeResource("REQUIESCAT")}isHolySpiritCircleGoodForReq(){const t=this.resources.get("REQUIESCAT").availableAmount();return t===0||this.hasResourceAvailable("PLD_CONFITEOR_COMBO_TRACKER")||this.config.level>=90?!1:this.config.level>=80?!this.hasResourceAvailable("CONFITEOR_READY")||this.hasResourceAvailable("CONFITEOR_READY")&&t>1:!0}progressComboTracker(t,a,o){const s=this.resources.get(a).maxValue,c=o.get(t)??-1,d=this.resources.get(a).availableAmount();this.tryConsumeResource(a,!0),(c!==s&&c===d||c===0)&&(this.resources.get(a).gain(c+1),this.enqueueResourceDrop(a))}fixPLDPhysicalComboState(t){FA.has(t)?(this.tryConsumeResource("PLD_COMBO_TRACKER",!0),this.progressComboTracker(t,"PLD_AOE_COMBO_TRACKER",FA)):jA.has(t)&&(this.tryConsumeResource("PLD_AOE_COMBO_TRACKER",!0),this.progressComboTracker(t,"PLD_COMBO_TRACKER",jA)),(FA.has(t)||jA.has(t)||t==="SHIELD_BASH")&&this.tryConsumeResource("PLD_CONFITEOR_COMBO_TRACKER",!0)}getDelayedManaFromAction(t,a){this.addEvent(new Oe("get MP from "+a,this.skillsList.get(a).applicationDelay,()=>{this.resources.get("MANA").gain(t)}))}refreshBuff(t,a){this.addEvent(new Oe("gain buff",a,()=>{this.resources.get(t).gain(1),this.enqueueResourceDrop(t)}))}}const ki=(e,t,a)=>{const o=Le(a.onConfirm,s=>{e!=="SHIELD_LOB"&&e!=="SHIELD_BASH"&&e!=="GORING_BLADE"&&s.fixPLDPhysicalComboState(e)});return on("PLD",e,t,{...a,onConfirm:o,recastTime:s=>s.config.adjustedSksGCD(),jobPotencyModifiers:s=>s.hasResourceAvailable("FIGHT_OR_FLIGHT")?[J.FightOrFlight]:[]})},_s=(e,t,a)=>{const o=Le((s,c)=>{s.hasResourceAvailable("DIVINE_MIGHT")&&bh.includes(e)?s.tryConsumeResource("DIVINE_MIGHT"):s.tryConsumeRequiescat(e)},a.onConfirm);return Xa("PLD",e,t,{...a,castTime:s=>s.captureSpellCastTime(e,a.baseCastTime),recastTime:s=>s.config.adjustedGCD(),manaCost:a.baseManaCost??0,potency:a.basePotency,jobPotencyModifiers:s=>{const c=[];return bh.includes(e)&&s.hasResourceAvailable("DIVINE_MIGHT")?a.dmPotency&&c.push(Zx(an(s,a.dmPotency)-an(s,a.basePotency))):(bh.includes(e)||SO.has(e))&&s.hasResourceAvailable("REQUIESCAT")&&a.reqPotency&&c.push(qx(an(s,a.reqPotency)-an(s,a.basePotency))),e!=="CLEMENCY"&&s.hasResourceAvailable("FIGHT_OR_FLIGHT")&&c.push(J.FightOrFlight),a.jobPotencyModifiers&&c.push(...a.jobPotencyModifiers(s)),c},isInstantFn:s=>s.isSpellInstant(e),onConfirm:o})},Kn=(e,t,a,o)=>at("PLD",e,t,a,{...o,jobPotencyModifiers:s=>{const c=[];return s.hasResourceAvailable("FIGHT_OR_FLIGHT")&&c.push(J.FightOrFlight),c}}),gO=(e,t,a,o)=>Ye("PLD",e,t,a,{...o,rscType:o.rscType,cooldown:o.cooldown,applicationDelay:o.applicationDelay}),IO={newSkill:"ATONEMENT",condition:e=>e.hasResourceAvailable("ATONEMENT_READY")},_O={newSkill:"SUPPLICATION",condition:e=>e.hasResourceAvailable("SUPPLICATION_READY")},pO={newSkill:"SEPULCHRE",condition:e=>e.hasResourceAvailable("SEPULCHRE_READY")},KT={newSkill:"CONFITEOR",condition:e=>e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").availableAmount()===0},gu={newSkill:"BLADE_OF_FAITH",condition:e=>e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").availableAmount()===1},Iu={newSkill:"BLADE_OF_TRUTH",condition:e=>e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").availableAmount()===2},_u={newSkill:"BLADE_OF_VALOR",condition:e=>e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").availableAmount()===3},pR={newSkill:"BLADE_OF_HONOR",condition:e=>e.hasResourceAvailable("BLADE_OF_HONOR_READY")},OB={newSkill:"IMPERATOR",condition:e=>!e.hasResourceAvailable("BLADE_OF_HONOR_READY")},DB={newSkill:"IRON_WILL",condition:e=>!e.hasResourceAvailable("IRON_WILL")},yB={newSkill:"RELEASE_IRON_WILL",condition:e=>e.hasResourceAvailable("IRON_WILL")};ki("SHIELD_LOB",15,{potency:100,applicationDelay:.89,startsAuto:!1});ki("FAST_BLADE",1,{potency:[["NEVER",150],["MELEE_MASTERY_TANK",200],["MELEE_MASTERY_II_TANK",220]],applicationDelay:.62});ki("RIOT_BLADE",4,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",140],["MELEE_MASTERY_II_TANK",170]],combo:{potency:[["NEVER",260],["MELEE_MASTERY_TANK",300],["MELEE_MASTERY_II_TANK",330]],resource:"PLD_COMBO_TRACKER",resourceValue:1},highlightIf:e=>e.resources.get("PLD_COMBO_TRACKER").availableAmount()===1,applicationDelay:.76,onConfirm:e=>{e.resources.get("PLD_COMBO_TRACKER").availableAmount()===1&&e.getDelayedManaFromAction(1e3,"RIOT_BLADE")}});ki("ROYAL_AUTHORITY",60,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",140],["MELEE_MASTERY_II_TANK",200]],combo:{potency:[["NEVER",360],["MELEE_MASTERY_TANK",400],["MELEE_MASTERY_II_TANK",460]],resource:"PLD_COMBO_TRACKER",resourceValue:2},highlightIf:e=>e.resources.get("PLD_COMBO_TRACKER").availableAmount()===2,applicationDelay:.62,onConfirm:e=>{e.resources.get("PLD_COMBO_TRACKER").availableAmount()===2&&(e.refreshBuff("DIVINE_MIGHT",0),e.hasTraitUnlocked("SWORD_OATH")&&(e.refreshBuff("ATONEMENT_READY",0),e.tryConsumeResource("SUPPLICATION_READY"),e.tryConsumeResource("SEPULCHRE_READY")))}});ki("ATONEMENT",76,{replaceIf:[_O,pO],potency:[["NEVER",360],["MELEE_MASTERY_TANK",400],["MELEE_MASTERY_II_TANK",460]],applicationDelay:1.26,validateAttempt:e=>e.hasResourceAvailable("ATONEMENT_READY"),highlightIf:e=>e.hasResourceAvailable("ATONEMENT_READY"),onConfirm:e=>{e.tryConsumeResource("ATONEMENT_READY"),e.refreshBuff("SUPPLICATION_READY",0),e.getDelayedManaFromAction(400,"ATONEMENT")}});ki("SUPPLICATION",76,{startOnHotbar:!1,replaceIf:[IO,pO],potency:[["NEVER",380],["MELEE_MASTERY_TANK",420],["MELEE_MASTERY_II_TANK",500]],applicationDelay:1.16,validateAttempt:e=>e.hasResourceAvailable("SUPPLICATION_READY"),highlightIf:e=>e.hasResourceAvailable("SUPPLICATION_READY"),onConfirm:e=>{e.tryConsumeResource("SUPPLICATION_READY"),e.refreshBuff("SEPULCHRE_READY",0),e.getDelayedManaFromAction(400,"SUPPLICATION")}});ki("SEPULCHRE",76,{startOnHotbar:!1,replaceIf:[IO,_O],potency:[["NEVER",400],["MELEE_MASTERY_TANK",440],["MELEE_MASTERY_II_TANK",540]],applicationDelay:1.29,validateAttempt:e=>e.hasResourceAvailable("SEPULCHRE_READY"),highlightIf:e=>e.hasResourceAvailable("SEPULCHRE_READY"),onConfirm:e=>{e.tryConsumeResource("SEPULCHRE_READY"),e.getDelayedManaFromAction(400,"SEPULCHRE")}});ki("TOTAL_ECLIPSE",6,{potency:120,applicationDelay:.76,falloff:0});ki("PROMINENCE",40,{potency:100,combo:{potency:220,resource:"PLD_AOE_COMBO_TRACKER",resourceValue:1},applicationDelay:.62,falloff:0,highlightIf:e=>e.resources.get("PLD_AOE_COMBO_TRACKER").availableAmount()===1,onConfirm:e=>{e.resources.get("PLD_AOE_COMBO_TRACKER").availableAmount()===1&&e.hasTraitUnlocked("ENHANCED_PROMINENCE")&&(e.refreshBuff("DIVINE_MIGHT",0),e.getDelayedManaFromAction(500,"PROMINENCE"))}});_s("HOLY_SPIRIT",64,{baseCastTime:1.5,applicationDelay:.76,baseManaCost:1e3,startsAuto:!1,basePotency:[["NEVER",300],["MELEE_MASTERY_TANK",350],["MELEE_MASTERY_II_TANK",400]],reqPotency:[["NEVER",600],["MELEE_MASTERY_TANK",650],["MELEE_MASTERY_II_TANK",700]],dmPotency:[["NEVER",400],["MELEE_MASTERY_TANK",450],["MELEE_MASTERY_II_TANK",500]],highlightIf:e=>e.hasResourceAvailable("DIVINE_MIGHT")||e.isHolySpiritCircleGoodForReq()});_s("HOLY_CIRCLE",72,{baseCastTime:1.5,applicationDelay:.62,baseManaCost:1e3,basePotency:100,reqPotency:350,dmPotency:250,falloff:0,highlightIf:e=>e.hasResourceAvailable("DIVINE_MIGHT")||e.isHolySpiritCircleGoodForReq()});ki("GORING_BLADE",54,{applicationDelay:.53,potency:700,validateAttempt:e=>e.hasResourceAvailable("GORING_BLADE_READY"),highlightIf:e=>e.hasResourceAvailable("GORING_BLADE_READY"),onConfirm:e=>{e.tryConsumeResource("GORING_BLADE_READY")}});_s("CONFITEOR",80,{replaceIf:[gu,Iu,_u],baseCastTime:0,applicationDelay:.62,baseManaCost:1e3,startsAuto:!1,basePotency:[["NEVER",420],["MELEE_MASTERY_II_TANK",500]],reqPotency:[["NEVER",920],["MELEE_MASTERY_II_TANK",1e3]],falloff:.6,validateAttempt:e=>e.hasResourceAvailable("CONFITEOR_READY"),highlightIf:e=>e.hasResourceAvailable("CONFITEOR_READY"),onConfirm:e=>{e.tryConsumeResource("CONFITEOR_READY"),e.tryConsumeResource("PLD_CONFITEOR_COMBO_TRACKER",!0),e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").gain(1),e.enqueueResourceDrop("PLD_CONFITEOR_COMBO_TRACKER")}});_s("BLADE_OF_FAITH",90,{replaceIf:[KT,Iu,_u],startOnHotbar:!1,baseCastTime:0,baseManaCost:1e3,startsAuto:!1,applicationDelay:.62,basePotency:[["NEVER",220],["MELEE_MASTERY_II_TANK",260]],reqPotency:[["NEVER",720],["MELEE_MASTERY_II_TANK",760]],falloff:.6,validateAttempt:e=>gu.condition(e),highlightIf:e=>gu.condition(e),onConfirm:e=>{e.tryConsumeResource("PLD_CONFITEOR_COMBO_TRACKER",!0),e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").gain(2),e.enqueueResourceDrop("PLD_CONFITEOR_COMBO_TRACKER")}});_s("BLADE_OF_TRUTH",90,{replaceIf:[KT,gu,_u],startOnHotbar:!1,baseCastTime:0,baseManaCost:1e3,applicationDelay:.89,startsAuto:!1,basePotency:[["NEVER",320],["MELEE_MASTERY_II_TANK",380]],reqPotency:[["NEVER",820],["MELEE_MASTERY_II_TANK",880]],falloff:.6,validateAttempt:e=>Iu.condition(e),highlightIf:e=>Iu.condition(e),onConfirm:e=>{e.tryConsumeResource("PLD_CONFITEOR_COMBO_TRACKER",!0),e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").gain(3),e.enqueueResourceDrop("PLD_CONFITEOR_COMBO_TRACKER")}});_s("BLADE_OF_VALOR",90,{replaceIf:[KT,gu,Iu],startOnHotbar:!1,baseCastTime:0,baseManaCost:1e3,applicationDelay:.89,startsAuto:!1,basePotency:[["NEVER",420],["MELEE_MASTERY_II_TANK",500]],reqPotency:[["NEVER",920],["MELEE_MASTERY_II_TANK",1e3]],falloff:.6,validateAttempt:e=>_u.condition(e),highlightIf:e=>_u.condition(e),onConfirm:e=>{e.tryConsumeResource("PLD_CONFITEOR_COMBO_TRACKER",!0),e.refreshBuff("BLADE_OF_HONOR_READY",0)}});Kn("FIGHT_OR_FLIGHT",2,"cd_FIGHT_OR_FLIGHT",{applicationDelay:.62,cooldown:60,onConfirm:e=>{e.refreshBuff("GORING_BLADE_READY",0),e.refreshBuff("FIGHT_OR_FLIGHT",.62)}});Kn("REQUIESCAT",68,"cd_REQUIESCAT",{autoUpgrade:{trait:"REQUIESCAT_MASTERY",otherSkill:"IMPERATOR"},applicationDelay:.62,cooldown:60,potency:320,onConfirm:e=>{e.resources.get("REQUIESCAT").gain(4),e.enqueueResourceDrop("REQUIESCAT",30),e.hasTraitUnlocked("ENHANCED_REQUIESCAT")&&e.refreshBuff("CONFITEOR_READY",0)}});Kn("IMPERATOR",96,"cd_IMPERATOR",{autoDowngrade:{trait:"REQUIESCAT_MASTERY",otherSkill:"REQUIESCAT"},replaceIf:[pR],applicationDelay:1.29,cooldown:60,potency:580,falloff:.6,onConfirm:e=>{e.resources.get("REQUIESCAT").gain(4),e.enqueueResourceDrop("REQUIESCAT",30,4),e.hasTraitUnlocked("ENHANCED_REQUIESCAT")&&e.refreshBuff("CONFITEOR_READY",0)}});Kn("BLADE_OF_HONOR",100,"cd_BLADE_OF_HONOR",{startOnHotbar:!1,cooldown:1,replaceIf:[OB],validateAttempt:pR.condition,highlightIf:pR.condition,applicationDelay:1.16,potency:1e3,startsAuto:!1,falloff:.5,onConfirm:e=>{e.tryConsumeResource("BLADE_OF_HONOR_READY")}});Kn("SPIRITS_WITHIN",30,"cd_SPIRITS_WITHIN",{autoUpgrade:{trait:"SPIRITS_WITHIN_MASTERY",otherSkill:"EXPIACION"},applicationDelay:.89,cooldown:30,potency:270,onConfirm:e=>{e.getDelayedManaFromAction(500,"SPIRITS_WITHIN")}});Kn("EXPIACION",86,"cd_EXPIACION",{autoDowngrade:{trait:"SPIRITS_WITHIN_MASTERY",otherSkill:"SPIRITS_WITHIN"},applicationDelay:.36,cooldown:30,potency:450,falloff:.6,onConfirm:e=>{e.getDelayedManaFromAction(500,"EXPIACION")}});Kn("CIRCLE_OF_SCORN",50,"cd_CIRCLE_OF_SCORN",{applicationDelay:1.02,cooldown:30,potency:140,falloff:0,onConfirm:(e,t)=>{const a=[];e.hasResourceAvailable("FIGHT_OR_FLIGHT")&&a.push(J.FightOrFlight),e.addDoTPotencies({node:t,effectName:"CIRCLE_OF_SCORN_DOT",skillName:"CIRCLE_OF_SCORN",tickPotency:30,speedStat:"sks",modifiers:a}),e.addEvent(new Oe("apply CoS dot",1.02,()=>{e.applyDoT("CIRCLE_OF_SCORN_DOT",t)}))}});Kn("INTERVENE",66,"cd_INTERVENE",{applicationDelay:.62,cooldown:30,potency:150,maxCharges:2,animationLock:Wt});_s("CLEMENCY",58,{baseCastTime:1.5,applicationDelay:.62,baseManaCost:2e3,basePotency:0,highlightIf:e=>e.hasResourceAvailable("REQUIESCAT")});Kn("SHELTRON",35,"cd_SHELTRON",{autoUpgrade:{trait:"SHELTRON_MASTERY",otherSkill:"HOLY_SHELTRON"},validateAttempt:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,highlightIf:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,applicationDelay:0,cooldown:5,onConfirm:e=>{e.resources.get("OATH_GAUGE").consume(50),e.refreshBuff("SHELTRON",0)}});Kn("HOLY_SHELTRON",82,"cd_HOLY_SHELTRON",{autoDowngrade:{trait:"SHELTRON_MASTERY",otherSkill:"SHELTRON"},applicationDelay:0,cooldown:5,validateAttempt:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,highlightIf:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,onConfirm:e=>{e.refreshBuff("HOLY_SHELTRON",0),e.refreshBuff("KNIGHTS_RESOLVE",0),e.refreshBuff("KNIGHTS_BENEDICTION",0),e.resources.get("OATH_GAUGE").consume(50)}});Kn("INTERVENTION",62,"cd_INTERVENTION",{applicationDelay:.8,cooldown:10,validateAttempt:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,highlightIf:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,onConfirm:e=>{e.resources.get("OATH_GAUGE").consume(50)}});gO("HALLOWED_GROUND",50,"cd_HALLOWED_GROUND",{rscType:"HALLOWED_GROUND",applicationDelay:0,cooldown:420});gO("BULWARK",52,"cd_BULWARK",{rscType:"BULWARK",applicationDelay:0,cooldown:90});Kn("SENTINEL",38,"cd_SENTINEL",{autoUpgrade:{trait:"SENTINEL_MASTERY",otherSkill:"GUARDIAN"},applicationDelay:.53,cooldown:120,onConfirm:e=>{e.refreshBuff("SENTINEL",.53)}});Kn("GUARDIAN",92,"cd_GUARDIAN",{autoDowngrade:{trait:"SENTINEL_MASTERY",otherSkill:"SENTINEL"},applicationDelay:.53,cooldown:120,onConfirm:e=>{e.refreshBuff("GUARDIAN",.53),e.refreshBuff("GUARDIANS_WILL",.53)}});Kn("DIVINE_VEIL",56,"cd_DIVINE_VEIL",{applicationDelay:0,cooldown:90,onConfirm:e=>{e.refreshBuff("DIVINE_VEIL",0)}});Kn("PASSAGE_OF_ARMS",70,"cd_PASSAGE_OF_ARMS",{applicationDelay:.62,cooldown:120,onConfirm:e=>{e.refreshBuff("PASSAGE_OF_ARMS",.62)}});Kn("COVER",45,"cd_COVER",{applicationDelay:.62,cooldown:120,validateAttempt:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,highlightIf:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,onConfirm:e=>{e.resources.get("OATH_GAUGE").consume(50)}});Kn("IRON_WILL",10,"cd_IRON_WILL",{applicationDelay:0,cooldown:2,validateAttempt:e=>!e.hasResourceAvailable("IRON_WILL"),onConfirm:e=>{e.resources.get("IRON_WILL").gain(1)},replaceIf:[yB],secondaryCooldown:{cdName:"cd_RELEASE_IRON_WILL",cooldown:1,maxCharges:1}});Kn("RELEASE_IRON_WILL",10,"cd_RELEASE_IRON_WILL",{startOnHotbar:!1,replaceIf:[DB],applicationDelay:0,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("IRON_WILL"),onConfirm:e=>{e.tryConsumeResource("IRON_WILL")},secondaryCooldown:{cdName:"cd_IRON_WILL",cooldown:2,maxCharges:1}});ki("SHIELD_BASH",10,{potency:100,applicationDelay:.45});Object.keys(BR).forEach(e=>zt(e,`DRK/${Ge[e].name}.png`));const vB=Object.keys(BR);class MB extends Xt{jobSpecificOtherTargetedBuffViewProps(){return[]}jobSpecificSelfTargetedBuffViewProps(){return vB.map(t=>t==="GRIT"?this.makeCommonTimerless(t):this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){const a=this.state.resources,o=a.get("DRK_COMBO_TRACKER"),s=a.get("DRK_AOE_COMBO_TRACKER"),c=a.get("BLOOD_GAUGE").availableAmount(),d=a.get("GRIT").availableAmount(),f=a.get("DARKSIDE").pendingChange?.timeTillEvent??0,h=a.get("DARK_ARTS").availableAmount(),m=o.available(1)?o.pendingChange?.timeTillEvent:s.available(1)?s.pendingChange?.timeTillEvent:void 0;return[{kind:"bar",name:N({en:"Combo Timer",zh:""}),color:t.drk.drkComboTimer,progress:m?m/30:0,valueString:m?.toFixed(3)??"N/A"},{kind:"counter",name:Ke("GRIT"),color:t.drk.grit,currentStacks:d,maxStacks:1},{kind:"bar",name:Ke("DARKSIDE"),color:t.drk.darkside,progress:f?f/60:0,valueString:f.toFixed(3)},{kind:"counter",name:Ke("DARK_ARTS"),color:t.drk.darkarts,currentStacks:h,maxStacks:1},{kind:"bar",name:Ke("BLOOD_GAUGE"),color:t.drk.blood,progress:c/100,valueString:c.toFixed(0)}]}}const dn=(e,t,a)=>{Ve("DRK",e,t,a??{})};dn("DARKSIDE",1,{timeout:60});dn("BLOOD_GAUGE",100,{warnOnOvercap:!0});dn("SALTED_EARTH",1,{timeout:15});dn("GRIT",1);dn("SHADOW_WALL",1,{timeout:15});dn("DARK_MIND",1,{timeout:10});dn("LIVING_DEAD",1,{timeout:10});dn("WALKING_DEAD",1,{timeout:10});dn("UNDEAD_REBIRTH",1);dn("DARK_MISSIONARY",1,{timeout:15});dn("DELIRIUM",3,{timeout:15,warnOnTimeout:!0});dn("BLOOD_WEAPON",3,{timeout:15,warnOnTimeout:!0});dn("BLACKEST_NIGHT",1,{timeout:7,warnOnTimeout:!0});dn("SCORN",1,{timeout:30,warnOnTimeout:!0});dn("OBLATION",1,{timeout:10});dn("SHADOWED_VIGIL",1,{timeout:15});dn("VIGILANT",1,{timeout:20});dn("DARK_ARTS",1,{warnOnOvercap:!0});dn("DRK_COMBO_TRACKER",2,{timeout:30});dn("DRK_AOE_COMBO_TRACKER",1,{timeout:30});dn("DRK_DELIRIUM_COMBO_TRACKER",2,{timeout:30});const VT=6;dn("ESTEEM_TRACKER",VT);const LB=6.8,xB=2.18;class HB extends qt{constructor(t){super(t),this.registerRecurringEvents([{groupedEffects:[{effectName:"SALTED_EARTH",appliedBy:["SALTED_EARTH"],isGroundTargeted:!0}]}],["LIVING_SHADOW"])}get statusPropsGenerator(){return new MB(this)}refreshDarkside(){if(this.hasResourceAvailable("DARKSIDE")){const t=this.resources.get("DARKSIDE"),a=Ut("DRK","DARKSIDE").maxTimeout,o=(t.pendingChange?.timeTillEvent??0)+30;t.overrideTimer(this,Math.min(a,o))}else this.resources.get("DARKSIDE").gain(1),this.enqueueResourceDrop("DARKSIDE",30)}gainBloodGauge(t){this.resources.get("BLOOD_GAUGE").gain(t)}bloodWeaponConfirm(t){this.hasResourceAvailable("BLOOD_WEAPON")&&(this.tryConsumeResource("BLOOD_WEAPON"),this.gainBloodGauge(10),this.addEvent(new Oe("gain blood weapon mana",t,()=>{this.resources.get("MANA").gain(600)})))}processComboStatus(t){if(["DISESTEEM","UNMEND","BLOODSPILLER","QUIETUS"].includes(t))return;let a=[this.resources.get("DRK_COMBO_TRACKER").availableAmount(),this.resources.get("DRK_AOE_COMBO_TRACKER").availableAmount(),this.resources.get("DRK_DELIRIUM_COMBO_TRACKER").availableAmount()];t==="HARD_SLASH"?a=[1,0,0]:t==="SYPHON_STRIKE"?a=[a[0]===1?2:0,0,0]:t==="SOULEATER"?a=[0,0,0]:t==="IMPALEMENT"?a[2]=0:t==="SCARLET_DELIRIUM"?a[2]=1:t==="COMEUPPANCE"?a[2]=2:t==="TORCLEAVER"?a[2]=0:t==="UNLEASH"?a=[0,1,0]:t==="STALWART_SOUL"?a=[0,0,0]:a=[0,0,0],this.setComboState("DRK_COMBO_TRACKER",a[0]),this.setComboState("DRK_AOE_COMBO_TRACKER",a[1]),this.setComboState("DRK_DELIRIUM_COMBO_TRACKER",a[2])}handleEsteemAttack(){if(!this.hasResourceAvailable("ESTEEM_TRACKER"))return;const t=this.resources.get("ESTEEM_TRACKER").node;t!==void 0&&this.resolveEsteemPotency(t),this.resources.get("ESTEEM_TRACKER").consume(1),this.hasResourceAvailable("ESTEEM_TRACKER")&&this.addEvent(new Oe("esteem hit",xB,()=>this.handleEsteemAttack()))}resolveEsteemPotency(t){const a=this.resources.get("ESTEEM_TRACKER").availableAmount();if(a===0)return;const o=t.getDotPotencies("ESTEEM_TRACKER")[VT-a];o.addModifiers(J.DrkPet),this.hasResourceAvailable("TINCTURE")&&o.addModifiers(J.Tincture),o.snapshotTime=this.getDisplayTime(),I.resolvePotency(o)}}const Dl=(e,t,a)=>on("DRK",e,t,{...a,onConfirm:Le(a.onConfirm,o=>o.bloodWeaponConfirm(a.applicationDelay),o=>o.processComboStatus(e)),recastTime:o=>o.config.adjustedSksGCD(),jobPotencyModifiers:o=>o.hasResourceAvailable("DARKSIDE")?[J.Darkside]:[]}),WT=(e,t,a)=>Xa("DRK",e,t,{...a,onConfirm:Le(a.onConfirm,o=>o.processComboStatus(e)),recastTime:o=>o.config.adjustedGCD(),jobPotencyModifiers:o=>o.hasResourceAvailable("DARKSIDE")?[J.Darkside]:[]}),Ta=(e,t,a,o)=>at("DRK",e,t,a,{...o,jobPotencyModifiers:s=>s.hasResourceAvailable("DARKSIDE")?[J.Darkside]:[]}),ps=(e,t,a,o)=>Ye("DRK",e,t,a,o);WT("UNMEND",15,{applicationDelay:.98,potency:150,onConfirm:e=>{if(e.hasTraitUnlocked("ENHANCED_UNMEND")){const t=e.cooldowns.get("cd_SHADOWSTRIDE").timeTillNextStackAvailable();e.cooldowns.get("cd_SHADOWSTRIDE").overrideTimeTillNextStack(Math.max(0,t-5))}}});Dl("HARD_SLASH",1,{applicationDelay:.58,potency:[["NEVER",150],["MELEE_MASTERY_TANK",180],["MELEE_MASTERY_II_TANK",300]]});Dl("SYPHON_STRIKE",2,{applicationDelay:.62,highlightIf:e=>e.hasResourceExactly("DRK_COMBO_TRACKER",1),potency:[["NEVER",100],["MELEE_MASTERY_TANK",120],["MELEE_MASTERY_II_TANK",240]],combo:{potency:[["NEVER",240],["MELEE_MASTERY_TANK",260],["MELEE_MASTERY_II_TANK",380]],resource:"DRK_COMBO_TRACKER",resourceValue:1},onConfirm:e=>{e.hasResourceExactly("DRK_COMBO_TRACKER",1)&&e.addEvent(new Oe("gain syphon strike mana",.62,()=>{e.resources.get("MANA").gain(600)}))}});Dl("SOULEATER",26,{applicationDelay:.62,highlightIf:e=>e.hasResourceExactly("DRK_COMBO_TRACKER",2),potency:[["NEVER",100],["MELEE_MASTERY_TANK",140],["MELEE_MASTERY_II_TANK",260]],combo:{potency:[["NEVER",320],["MELEE_MASTERY_TANK",360],["MELEE_MASTERY_II_TANK",480]],resource:"DRK_COMBO_TRACKER",resourceValue:2},onConfirm:e=>{e.hasResourceAvailable("DRK_COMBO_TRACKER",2)&&e.gainBloodGauge(20)}});WT("UNLEASH",6,{applicationDelay:.71,potency:120,falloff:0});WT("STALWART_SOUL",40,{applicationDelay:.62,highlightIf:e=>e.hasResourceExactly("DRK_AOE_COMBO_TRACKER",1),potency:[["NEVER",100],["MELEE_MASTERY_II_TANK",120]],combo:{potency:[["NEVER",140],["MELEE_MASTERY_II_TANK",160]],resource:"DRK_AOE_COMBO_TRACKER",resourceValue:1},falloff:0,onConfirm:e=>{e.hasResourceExactly("DRK_AOE_COMBO_TRACKER",1)&&(e.gainBloodGauge(20),e.addEvent(new Oe("gain stalwart soul mana",.62,()=>{e.resources.get("MANA").gain(600)})))}});const Ff=e=>{e.tryConsumeResource("DARK_ARTS"),e.refreshDarkside()},jf=e=>e.hasResourceAvailable("DARK_ARTS"),zf=e=>e.hasResourceAvailable("DARK_ARTS")?0:3e3;Ta("EDGE_OF_DARKNESS",40,"cd_FLOOD_OF_DARKNESS",{applicationDelay:.62,autoUpgrade:{trait:"DAKRSIDE_MASTERY",otherSkill:"EDGE_OF_SHADOW"},cooldown:1,manaCost:zf,highlightIf:jf,potency:300,onConfirm:Ff});Ta("EDGE_OF_SHADOW",74,"cd_FLOOD_OF_DARKNESS",{applicationDelay:.62,autoDowngrade:{trait:"DAKRSIDE_MASTERY",otherSkill:"EDGE_OF_DARKNESS"},cooldown:1,manaCost:zf,highlightIf:jf,potency:460,onConfirm:Ff});Ta("FLOOD_OF_DARKNESS",30,"cd_FLOOD_OF_DARKNESS",{applicationDelay:.62,autoUpgrade:{trait:"DAKRSIDE_MASTERY",otherSkill:"FLOOD_OF_SHADOW"},cooldown:1,manaCost:zf,highlightIf:jf,potency:100,falloff:0,onConfirm:Ff});Ta("FLOOD_OF_SHADOW",74,"cd_FLOOD_OF_DARKNESS",{applicationDelay:.62,autoDowngrade:{trait:"DAKRSIDE_MASTERY",otherSkill:"FLOOD_OF_DARKNESS"},cooldown:1,manaCost:zf,highlightIf:jf,potency:160,falloff:0,onConfirm:Ff});const lf=e=>e.hasResourceAvailable("BLOOD_GAUGE",50)||e.hasResourceAvailable("DELIRIUM"),Oh=[{newSkill:"BLOODSPILLER",condition:e=>!e.hasTraitUnlocked("ENHANCED_DELIRIUM")||!e.hasResourceAvailable("DELIRIUM")},{newSkill:"SCARLET_DELIRIUM",condition:e=>e.hasTraitUnlocked("ENHANCED_DELIRIUM")&&e.hasResourceAvailable("DELIRIUM")&&e.hasResourceExactly("DRK_DELIRIUM_COMBO_TRACKER",0)},{newSkill:"COMEUPPANCE",condition:e=>e.hasTraitUnlocked("ENHANCED_DELIRIUM")&&e.hasResourceAvailable("DELIRIUM")&&e.hasResourceExactly("DRK_DELIRIUM_COMBO_TRACKER",1)},{newSkill:"TORCLEAVER",condition:e=>e.hasTraitUnlocked("ENHANCED_DELIRIUM")&&e.hasResourceAvailable("DELIRIUM")&&e.hasResourceExactly("DRK_DELIRIUM_COMBO_TRACKER",2)}];Dl("BLOODSPILLER",62,{applicationDelay:.8,validateAttempt:lf,highlightIf:lf,replaceIf:Oh,potency:[["NEVER",500],["MELEE_MASTERY_II_TANK",600]],onConfirm:e=>e.tryConsumeResource("DELIRIUM")||e.resources.get("BLOOD_GAUGE").consume(50)});const Dh=e=>e.hasTraitUnlocked("ENHANCED_DELIRIUM")&&e.hasResourceAvailable("DELIRIUM");Dl("QUIETUS",64,{applicationDelay:.76,validateAttempt:lf,highlightIf:lf,replaceIf:[{newSkill:"IMPALEMENT",condition:Dh}],potency:[["NEVER",200],["MELEE_MASTERY_II_TANK",240]],falloff:0,onConfirm:e=>e.tryConsumeResource("DELIRIUM")||e.resources.get("BLOOD_GAUGE").consume(50)});[["SCARLET_DELIRIUM",.62,620],["COMEUPPANCE",.67,720],["TORCLEAVER",.62,820]].forEach((e,t)=>{const[a,o,s]=e;Dl(a,96,{startOnHotbar:!1,applicationDelay:o,validateAttempt:Oh[t+1].condition,highlightIf:Oh[t+1].condition,replaceIf:Oh,potency:s,onConfirm:c=>c.tryConsumeResource("DELIRIUM"),onApplication:c=>c.resources.get("MANA").gain(200)})});Dl("IMPALEMENT",96,{startOnHotbar:!1,applicationDelay:.98,validateAttempt:Dh,highlightIf:Dh,replaceIf:[{newSkill:"QUIETUS",condition:e=>!Dh(e)}],potency:300,falloff:0,onConfirm:e=>e.tryConsumeResource("DELIRIUM"),onApplication:e=>e.resources.get("MANA").gain(500)});const NR=e=>e.hasResourceAvailable("SCORN");Dl("DISESTEEM",100,{startOnHotbar:!1,applicationDelay:1.65,validateAttempt:NR,highlightIf:NR,potency:1e3,falloff:.25,onConfirm:e=>e.tryConsumeResource("SCORN")});Ta("DELIRIUM",68,"cd_DELIRIUM",{applicationDelay:0,cooldown:60,onConfirm:e=>{e.gainStatus("DELIRIUM",3),e.gainStatus("BLOOD_WEAPON",3)}});Ta("CARVE_AND_SPIT",60,"cd_ABYSSAL_DRAIN",{applicationDelay:1.47,cooldown:60,potency:[["NEVER",510],["MELEE_MASTERY_II_TANK",540]],healingPotency:500,onApplication:e=>e.resources.get("MANA").gain(600)});Ta("ABYSSAL_DRAIN",56,"cd_ABYSSAL_DRAIN",{applicationDelay:.98,cooldown:60,potency:240,healingPotency:500,onApplication:e=>e.resources.get("MANA").gain(600)});const NO=e=>e.resources.get("SALTED_EARTH").availableAmountIncludingDisabled()>0;Ta("SALTED_EARTH",52,"cd_SALTED_EARTH",{applicationDelay:.76,cooldown:90,replaceIf:[{newSkill:"SALT_AND_DARKNESS",condition:NO}],onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"SALTED_EARTH",skillName:"SALTED_EARTH",tickPotency:50,speedStat:"sks"})},falloff:0,onApplication:(e,t)=>{e.applyDoT("SALTED_EARTH",t),e.gainStatus("SALTED_EARTH")}});Ta("SALT_AND_DARKNESS",86,"cd_SALT_AND_DARKNESS",{startOnHotbar:!1,highlightIf:e=>!0,validateAttempt:NO,applicationDelay:.76,cooldown:20,potency:500,falloff:.25});Ta("LIVING_SHADOW",80,"cd_LIVING_SHADOW",{applicationDelay:0,replaceIf:[{newSkill:"DISESTEEM",condition:e=>NR(e)}],cooldown:120,onConfirm:(e,t)=>{e.hasTraitUnlocked("ENHANCED_LIVING_SHADOW_III")&&e.gainStatus("SCORN"),e.resources.get("ESTEEM_TRACKER").gain(VT);const a=e.hasTraitUnlocked("ENHANCED_LIVING_SHADOW")?420:340;[["ABYSSAL_DRAIN_PET",a,0],["SHADOWSTRIDE_PET",0,void 0],e.hasTraitUnlocked("ENHANCED_LIVING_SHADOW_II")?["SHADOWBRINGER_PET",570,.25]:["FLOOD_OF_SHADOW_PET",a,0],["EDGE_OF_SHADOW_PET",a,void 0],["BLOODSPILLER_PET",a,void 0],e.hasTraitUnlocked("ENHANCED_LIVING_SHADOW_III")?["DISESTEEM_PET",620,.25]:["CARVE_AND_SPIT_PET",a,void 0]].forEach(s=>{const[c,d,f]=s;t.addDoTPotency(new tn({config:e.config,sourceTime:e.getDisplayTime(),sourceSkill:c,aspect:Ie.Other,description:"",basePotency:d,snapshotTime:void 0,targetList:t.targetList,falloff:f}),"ESTEEM_TRACKER")}),e.resources.get("ESTEEM_TRACKER").node=t,e.addEvent(new Oe("initial esteem hit",LB,()=>e.handleEsteemAttack()))}});Ta("SHADOWBRINGER",90,"cd_SHADOWBRINGER",{applicationDelay:.67,cooldown:60,potency:600,falloff:.25,maxCharges:2,validateAttempt:e=>e.hasResourceAvailable("DARKSIDE")});Ta("SHADOWSTRIDE",54,"cd_SHADOWSTRIDE",{applicationDelay:.66,animationLock:Wt,cooldown:30,maxCharges:2});ps("THE_BLACKEST_NIGHT",70,"cd_THE_BLACKEST_NIGHT",{rscType:"BLACKEST_NIGHT",manaCost:3e3,replaceIf:[{newSkill:"THE_BLACKEST_NIGHT_POP",condition:e=>e.hasResourceAvailable("BLACKEST_NIGHT")}],applicationDelay:.62,cooldown:15});Ta("THE_BLACKEST_NIGHT_POP",70,"cd_THE_BLACKEST_NIGHT_POP",{startOnHotbar:!1,highlightIf:e=>!0,applicationDelay:0,animationLock:ma,cooldown:1,onConfirm:e=>{e.gainStatus("DARK_ARTS"),e.tryConsumeResource("BLACKEST_NIGHT")}});ps("SHADOW_WALL",38,"cd_SHADOW_WALL",{rscType:"SHADOW_WALL",autoUpgrade:{otherSkill:"SHADOWED_VIGIL",trait:"SHADOW_WALL_MASTERY"},applicationDelay:.62,cooldown:120});ps("SHADOWED_VIGIL",92,"cd_SHADOW_WALL",{rscType:"SHADOWED_VIGIL",autoDowngrade:{otherSkill:"SHADOW_WALL",trait:"SHADOW_WALL_MASTERY"},applicationDelay:.62,cooldown:120,onApplication:e=>e.gainStatus("VIGILANT")});ps("DARK_MIND",45,"cd_DARK_MIND",{rscType:"DARK_MIND",applicationDelay:.62,cooldown:60});ps("LIVING_DEAD",50,"cd_LIVING_DEAD",{rscType:"LIVING_DEAD",applicationDelay:0,cooldown:300});ps("DARK_MISSIONARY",66,"cd_DARK_MISSIONARY",{rscType:"DARK_MISSIONARY",applicationDelay:.62,cooldown:90});ps("OBLATION",82,"cd_OBLATION",{rscType:"OBLATION",applicationDelay:0,maxCharges:2,cooldown:60});Ta("GRIT",10,"cd_GRIT",{applicationDelay:0,cooldown:2,validateAttempt:e=>!e.hasResourceAvailable("GRIT"),onConfirm:e=>e.resources.get("GRIT").gain(1),replaceIf:[{newSkill:"RELEASE_GRIT",condition:e=>e.hasResourceAvailable("GRIT")}],secondaryCooldown:{cdName:"cd_RELEASE_GRIT",cooldown:1,maxCharges:1}});Ta("RELEASE_GRIT",10,"cd_RELEASE_GRIT",{startOnHotbar:!1,replaceIf:[{newSkill:"GRIT",condition:e=>!e.hasResourceAvailable("GRIT")}],applicationDelay:0,cooldown:1,validateAttempt:e=>!e.hasResourceAvailable("GRIT"),onConfirm:e=>e.tryConsumeResource("GRIT"),secondaryCooldown:{cdName:"cd_GRIT",cooldown:2,maxCharges:1}});Object.keys(kR).forEach(e=>zt(e,`AST/${Ge[e].name}.png`));const CO=["COMBUST_II","COMBUST_III"],kB=Object.keys(kR).filter(e=>!CO.includes(e));class UB extends Xt{jobSpecificOtherTargetedBuffViewProps(){return[...CO.flatMap(t=>this.makeTargetedTimers(t))]}jobSpecificSelfTargetedBuffViewProps(){return[...kB.map(t=>this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){return[{kind:"arcana",name:Ke("ARCANA"),currentArcanaColor:this.state.drawnAstral()?t.ast.astralCard:t.ast.umbralCard,activeSlots:["ARCANA_1","ARCANA_2","ARCANA_3","MINOR_ARCANA"].map(a=>this.state.hasResourceAvailable(a))}]}}const it=(e,t,a)=>{Ve("AST",e,t,a??{})};it("ARCANA",1);it("MINOR_ARCANA",1,{default:1});it("LIGHTSPEED",1,{timeout:15});it("THE_BALANCE",1,{timeout:15});it("THE_ARROW",1,{timeout:15});it("THE_SPIRE",1,{timeout:30});it("THE_SPEAR",1,{timeout:15});it("THE_BOLE",1,{timeout:15});it("THE_EWER",1,{timeout:15});it("ASPECTED_BENEFIC",1,{timeout:15});it("ASPECTED_HELIOS",1,{timeout:15});it("SYNASTRY",1,{timeout:20});it("DIVINATION",1,{timeout:20});it("DIVINING",1,{timeout:30,warnOnTimeout:!0});it("COLLECTIVE_UNCONSCIOUS",1,{timeout:18});it("COLLECTIVE_UNCONSCIOUS_MIT",1,{timeout:10});it("WHEEL_OF_FORTUNE",1,{timeout:15});it("OPPOSITION",1,{timeout:15});it("EARTHLY_DOMINANCE",1,{timeout:10});it("GIANT_DOMINANCE",1,{timeout:10});it("COMBUST_II",1,{timeout:30});it("COMBUST_III",1,{timeout:30});it("INTERSECTION",1,{timeout:30});it("NEUTRAL_SECT",1,{timeout:20});it("NEUTRAL_SECT_SHIELD",1,{timeout:30});it("HOROSCOPE",1,{timeout:10});it("HOROSCOPE_HELIOS",1,{timeout:30});it("SUNTOUCHED",1,{timeout:30});it("EXALTATION",1,{timeout:8});it("MACROCOSMOS",1,{timeout:15});it("HELIOS_CONJUNCTION",1,{timeout:15});it("SUN_SIGN",1,{timeout:15});it("ARCANA_1",1,{default:1});it("ARCANA_2",1,{default:1});it("ARCANA_3",1,{default:1});it("NEXT_DRAW",1);class PB extends qt{constructor(t){super(t);const a=this.hasTraitUnlocked("ENHANCED_ESSENTIAL_DIGNITY_II")?3:this.hasTraitUnlocked("ENHANCED_ESSENTIAL_DIGNITY")?2:1,o=this.hasTraitUnlocked("ENHANCED_CELESTIAL_INTERSECTION")?2:1;this.cooldowns.set(new Ue("cd_ESSENTIAL_DIGNITY",40,a,a)),this.cooldowns.set(new Ue("cd_CELESTIAL_INTERSECTION",30,o,o)),this.cooldowns.set(new Ue("cd_SWIFTCAST",this.hasTraitUnlocked("ENHANCED_SWIFTCAST")?40:60,1,1)),this.registerRecurringEvents([{reportName:N({en:"Combust DoT",zh:"DoT"}),groupedEffects:[{effectName:"COMBUST_II",appliedBy:["COMBUST_II"]},{effectName:"COMBUST_III",appliedBy:["COMBUST_III"]}]},{isHealing:!0,groupedEffects:[{effectName:"WHEEL_OF_FORTUNE",appliedBy:["COLLECTIVE_UNCONSCIOUS"]}]},{isHealing:!0,groupedEffects:[{effectName:"OPPOSITION",appliedBy:["CELESTIAL_OPPOSITION"]}]},{isHealing:!0,groupedEffects:[{effectName:"ASPECTED_BENEFIC",appliedBy:["ASPECTED_BENEFIC"]}]},{isHealing:!0,groupedEffects:[{effectName:"ASPECTED_HELIOS",appliedBy:["ASPECTED_HELIOS"]},{effectName:"HELIOS_CONJUNCTION",appliedBy:["HELIOS_CONJUNCTION"]}]}])}drawnAstral(){return!this.hasResourceAvailable("NEXT_DRAW")}cancelChanneledSkills(){this.tryConsumeResource("COLLECTIVE_UNCONSCIOUS")}jobSpecificAddHealingBuffCovers(t,a){a.cdName==="cd_GCD"&&this.hasResourceAvailable("NEUTRAL_SECT")&&t.addBuff(H.NeutralSect),a.cdName==="cd_GCD"&&!a.aoeHeal&&this.hasResourceAvailable("SYNASTRY")&&t.addBuff(H.Synastry),this.hasResourceAvailable("THE_ARROW")&&t.addBuff(H.TheArrow)}jobSpecificAddDamageBuffCovers(t,a){this.hasResourceAvailable("DIVINATION")&&t.addBuff(H.Divination)}get statusPropsGenerator(){return new UB(this)}}const Sa=(e,t,a)=>{const o=c=>{if(!a.healingPotency)return[];const d=[];return c.hasResourceAvailable("SYNASTRY")&&!a.aoeHeal&&d.push(J.Synastry),c.hasResourceAvailable("NEUTRAL_SECT")&&d.push(J.NeutralSect),c.hasResourceAvailable("THE_ARROW")&&d.push(J.TheArrow),d},s=a.baseCastTime??0;return Xa("AST",e,t,{...a,jobHealingPotencyModifiers:o,jobPotencyModifiers:c=>c.hasResourceAvailable("DIVINATION")?[J.Divination]:[],castTime:c=>Math.max(0,c.config.adjustedCastTime(c.hasResourceAvailable("LIGHTSPEED")?s-2.5:s)),recastTime:c=>c.config.adjustedGCD(2.5),isInstantFn:c=>!a.baseCastTime||c.hasResourceAvailable("SWIFTCAST"),onConfirm:Le(s?c=>c.tryConsumeResource("SWIFTCAST"):void 0,a.onConfirm)})},ga=(e,t,a,o)=>at("AST",e,t,a,{...o,jobHealingPotencyModifiers:o.healingPotency?s=>{const c=[];return s.hasResourceAvailable("THE_ARROW")&&c.push(J.TheArrow),e==="STELLAR_DETONATION"&&c.push(J.AstPet),c}:void 0,jobPotencyModifiers:s=>{const c=[];return s.hasResourceAvailable("DIVINATION")&&c.push(J.Divination),e==="STELLAR_DETONATION"&&c.push(J.AstPet),c}}),Ns=(e,t,a,o)=>Ye("AST",e,t,a,{...o,jobHealingPotencyModifiers:s=>o.healingPotency&&s.hasResourceAvailable("THE_ARROW")?[J.TheArrow]:[],jobPotencyModifiers:o.potency?s=>s.hasResourceAvailable("DIVINATION")?[J.Divination]:[]:void 0});Sa("MALEFIC_III",64,{autoUpgrade:{otherSkill:"MALEFIC_IV",trait:"MALEFIC_MASTERY_III"},baseCastTime:1.5,applicationDelay:1.07,potency:190,manaCost:400});Sa("MALEFIC_IV",72,{autoDowngrade:{otherSkill:"MALEFIC_III",trait:"MALEFIC_MASTERY_III"},autoUpgrade:{otherSkill:"FALL_MALEFIC",trait:"MALEFIC_MASTERY_IV"},baseCastTime:1.5,applicationDelay:1.07,potency:230,manaCost:400});Sa("FALL_MALEFIC",82,{autoDowngrade:{otherSkill:"MALEFIC_IV",trait:"MALEFIC_MASTERY_IV"},baseCastTime:1.5,applicationDelay:1.07,potency:[["NEVER",250],["MAGICK_MASTERY_HEALER",270]],manaCost:400});Sa("COMBUST_II",46,{autoUpgrade:{otherSkill:"COMBUST_III",trait:"COMBUST_MASTERY_II"},applicationDelay:.62,manaCost:400,drawsAggro:!0,onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"COMBUST_II",skillName:"COMBUST_II",tickPotency:60,speedStat:"sps"})},onApplication:(e,t)=>e.applyDoT("COMBUST_II",t)});Sa("COMBUST_III",72,{autoDowngrade:{otherSkill:"COMBUST_II",trait:"COMBUST_MASTERY_II"},applicationDelay:.62,manaCost:400,drawsAggro:!0,onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"COMBUST_III",skillName:"COMBUST_III",tickPotency:e.hasTraitUnlocked("MAGICK_MASTERY_HEALER")?70:65,speedStat:"sps"})},onApplication:(e,t)=>e.applyDoT("COMBUST_III",t)});Sa("GRAVITY",45,{autoUpgrade:{otherSkill:"GRAVITY_II",trait:"GRAVITY_MASTERY"},baseCastTime:1.5,applicationDelay:1.16,potency:120,falloff:0,manaCost:400});Sa("GRAVITY_II",82,{autoDowngrade:{otherSkill:"GRAVITY",trait:"GRAVITY_MASTERY"},baseCastTime:1.5,applicationDelay:1.16,potency:[["NEVER",130],["MAGICK_MASTERY_HEALER",140]],falloff:0,manaCost:400});Sa("MACROCOSMOS",90,{applicationDelay:.75,secondaryCooldown:{cdName:"cd_MACROCOSMOS",cooldown:180,maxCharges:1},potency:[["NEVER",250],["MAGICK_MASTERY_HEALER",270]],falloff:.4,manaCost:600,replaceIf:[{newSkill:"MICROCOSMOS",condition:e=>e.hasResourceAvailable("MACROCOSMOS")}],onConfirm:e=>e.gainStatus("MACROCOSMOS")});ga("MICROCOSMOS",90,"cd_MICROCOSMOS",{startOnHotbar:!1,applicationDelay:.045,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("MACROCOSMOS"),onConfirm:e=>e.tryConsumeResource("MACROCOSMOS")});Sa("ASPECTED_BENEFIC",34,{applicationDelay:.98,healingPotency:[["NEVER",200],["ENHANCED_HEALING_MAGIC",250]],manaCost:400,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"ASPECTED_BENEFIC",effectName:"ASPECTED_BENEFIC",speedStat:"sps",tickPotency:e.hasTraitUnlocked("ENHANCED_HEALING_MAGIC")?250:200}),e.hasResourceAvailable("NEUTRAL_SECT")&&e.gainStatus("NEUTRAL_SECT_SHIELD")},onApplication:(e,t)=>{e.applyHoT("ASPECTED_BENEFIC",t),e.gainStatus("ASPECTED_BENEFIC")}});Sa("BENEFIC",2,{baseCastTime:1.5,applicationDelay:.98,healingPotency:[["NEVER",450],["ENHANCED_HEALING_MAGIC",500]],manaCost:400});Sa("BENEFIC_II",26,{baseCastTime:1.5,applicationDelay:1.07,healingPotency:[["NEVER",700],["ENHANCED_HEALING_MAGIC",800]],manaCost:700});Sa("ASPECTED_HELIOS",40,{autoUpgrade:{otherSkill:"HELIOS_CONJUNCTION",trait:"ASPECTED_HELIOS_MASTERY"},baseCastTime:1.5,applicationDelay:1.07,healingPotency:[["NEVER",200],["ENHANCED_HEALING_MAGIC",250]],aoeHeal:!0,manaCost:800,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"ASPECTED_HELIOS",effectName:"ASPECTED_HELIOS",speedStat:"sps",tickPotency:e.hasTraitUnlocked("ENHANCED_HEALING_MAGIC")?150:100}),e.tryConsumeResource("HOROSCOPE")&&e.gainStatus("HOROSCOPE_HELIOS"),e.hasResourceAvailable("NEUTRAL_SECT")&&e.gainStatus("NEUTRAL_SECT_SHIELD")},onApplication:(e,t)=>{e.applyHoT("ASPECTED_HELIOS",t),e.gainStatus("ASPECTED_HELIOS")}});Sa("HELIOS_CONJUNCTION",96,{autoDowngrade:{otherSkill:"ASPECTED_HELIOS",trait:"ASPECTED_HELIOS_MASTERY"},baseCastTime:1.5,applicationDelay:1.07,healingPotency:250,aoeHeal:!0,manaCost:800,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"HELIOS_CONJUNCTION",effectName:"HELIOS_CONJUNCTION",speedStat:"sps",tickPotency:175}),e.tryConsumeResource("HOROSCOPE")&&e.gainStatus("HOROSCOPE_HELIOS"),e.hasResourceAvailable("NEUTRAL_SECT")&&e.gainStatus("NEUTRAL_SECT_SHIELD")},onApplication:(e,t)=>{e.applyHoT("HELIOS_CONJUNCTION",t),e.gainStatus("HELIOS_CONJUNCTION")}});Sa("HELIOS",10,{baseCastTime:1.5,applicationDelay:1.07,healingPotency:[["NEVER",300],["ENHANCED_HEALING_MAGIC",400]],aoeHeal:!0,manaCost:700,onConfirm:e=>{e.tryConsumeResource("HOROSCOPE")&&e.gainStatus("HOROSCOPE_HELIOS")}});Sa("ASCEND",12,{baseCastTime:8,applicationDelay:1.07,manaCost:2400});const Mu=e=>e.drawnAstral(),Lu=e=>!e.drawnAstral(),bO=e=>{(e.hasResourceAvailable("ARCANA_1")||e.drawnAstral()&&e.hasResourceAvailable("MINOR_ARCANA"))&&I.reportWarning({kind:"custom",en:"damage card overwritten!",zh:""}),e.resources.get("NEXT_DRAW").gainWrapping(1),["MINOR_ARCANA","ARCANA_1","ARCANA_2","ARCANA_3"].forEach(t=>e.resources.get(t).gain(1))},OO=e=>e.resources.get("MANA").gain(2e3);ga("ASTRAL_DRAW",30,"cd_ASTRAL_DRAW",{replaceIf:[{newSkill:"UMBRAL_DRAW",condition:Mu}],applicationDelay:0,cooldown:55,validateAttempt:Lu,onConfirm:bO,onApplication:OO});ga("UMBRAL_DRAW",30,"cd_ASTRAL_DRAW",{startOnHotbar:!1,replaceIf:[{newSkill:"ASTRAL_DRAW",condition:Lu}],applicationDelay:0,cooldown:55,validateAttempt:Mu,onConfirm:bO,onApplication:OO});const XT=(e,t,a)=>{console.assert(a.length===3);const o=[{newSkill:a[0],condition:s=>!s.hasResourceAvailable(t)},{newSkill:a[1],condition:s=>Mu(s)&&s.hasResourceAvailable(t)},{newSkill:a[2],condition:s=>Lu(s)&&s.hasResourceAvailable(t)}];o.forEach(({newSkill:s,condition:c},d)=>{const f=o.slice();f.splice(d,1),ga(s,30,e,{startOnHotbar:d===0,replaceIf:f,applicationDelay:.62,cooldown:1,validateAttempt:d===0?()=>!1:c,onConfirm:d!==0?h=>h.tryConsumeResource(t):void 0,onApplication:d!==0?h=>h.gainStatus(s):void 0})})};XT("cd_PLAY_I","ARCANA_1",["PLAY_I","THE_BALANCE","THE_SPEAR"]);XT("cd_PLAY_II","ARCANA_2",["PLAY_II","THE_ARROW","THE_BOLE"]);XT("cd_PLAY_III","ARCANA_3",["PLAY_III","THE_SPIRE","THE_EWER"]);ga("MINOR_ARCANA",70,"cd_MINOR_ARCANA",{applicationDelay:0,replaceIf:[{newSkill:"LORD_OF_CROWNS",condition:e=>Mu(e)&&e.hasResourceAvailable("MINOR_ARCANA")},{newSkill:"LADY_OF_CROWNS",condition:e=>Lu(e)&&e.hasResourceAvailable("MINOR_ARCANA")}],cooldown:1,validateAttempt:()=>!1});ga("LORD_OF_CROWNS",70,"cd_MINOR_ARCANA",{startOnHotbar:!1,replaceIf:[{newSkill:"MINOR_ARCANA",condition:e=>!e.hasResourceAvailable("MINOR_ARCANA")},{newSkill:"LADY_OF_CROWNS",condition:e=>Lu(e)&&e.hasResourceAvailable("MINOR_ARCANA")}],applicationDelay:.62,cooldown:1,potency:400,falloff:0,onConfirm:e=>e.tryConsumeResource("MINOR_ARCANA")});ga("LADY_OF_CROWNS",70,"cd_MINOR_ARCANA",{startOnHotbar:!1,replaceIf:[{newSkill:"MINOR_ARCANA",condition:e=>!e.hasResourceAvailable("MINOR_ARCANA")},{newSkill:"LORD_OF_CROWNS",condition:e=>Mu(e)&&e.hasResourceAvailable("MINOR_ARCANA")}],applicationDelay:.62,cooldown:1,healingPotency:400,aoeHeal:!0,onConfirm:e=>e.tryConsumeResource("MINOR_ARCANA")});Ns("LIGHTSPEED",6,"cd_LIGHTSPEED",{rscType:"LIGHTSPEED",applicationDelay:0,cooldown:60,maxCharges:2});const DO=437,yO=1015;ga("EARTHLY_STAR",62,"cd_EARTHLY_STAR",{applicationDelay:0,cooldown:60,falloff:0,savesTargets:!0,replaceIf:[{newSkill:"STELLAR_DETONATION",condition:e=>e.hasResourceAvailable("EARTHLY_DOMINANCE")||e.hasResourceAvailable("GIANT_DOMINANCE")}],onConfirm:(e,t)=>{e.gainStatus("EARTHLY_DOMINANCE"),e.resources.addResourceEvent({rscType:"EARTHLY_DOMINANCE",name:"expand earthly star",delay:10,fnOnRsc:()=>{e.gainStatus("GIANT_DOMINANCE"),e.resources.addResourceEvent({rscType:"GIANT_DOMINANCE",name:"auto-detonate earthly star",delay:10,fnOnRsc:()=>{const a=new tn({config:e.config,sourceTime:e.getDisplayTime(),sourceSkill:"STELLAR_DETONATION",aspect:Ie.Other,basePotency:DO,snapshotTime:e.getDisplayTime(),description:"",targetList:t.targetList,falloff:0});e.hasResourceAvailable("TINCTURE")&&a.addModifiers(J.Tincture),e.hasResourceAvailable("DIVINATION")&&a.addModifiers(J.Divination),a.addModifiers(J.AstPet),t.addPotency(a);const o=new tn({config:e.config,sourceTime:e.getDisplayTime(),sourceSkill:"STELLAR_DETONATION",aspect:Ie.Other,basePotency:yO,snapshotTime:e.getDisplayTime(),description:"",healTargetCount:t.healTargetCount,falloff:0});e.hasResourceAvailable("THE_ARROW"),t.addHealingPotency(o),I.resolvePotency(a),I.resolveHealingPotency(o)}})}})}});ga("STELLAR_DETONATION",62,"cd_STELLAR_DETONATION",{startOnHotbar:!1,applicationDelay:.53,cooldown:3,potency:e=>e.hasResourceAvailable("GIANT_DOMINANCE")?DO:290,falloff:0,healingPotency:e=>e.hasResourceAvailable("GIANT_DOMINANCE")?yO:762,aoeHeal:!0,validateAttempt:e=>e.hasResourceAvailable("EARTHLY_DOMINANCE")||e.hasResourceAvailable("GIANT_DOMINANCE"),onConfirm:e=>{e.tryConsumeResource("EARTHLY_DOMINANCE"),e.tryConsumeResource("GIANT_DOMINANCE")}});Ns("DIVINATION",50,"cd_DIVINATION",{rscType:"DIVINATION",applicationDelay:.62,cooldown:120,replaceIf:[{newSkill:"ORACLE",condition:e=>e.hasResourceAvailable("DIVINING")}],onConfirm:e=>e.gainStatus("DIVINING")});ga("ORACLE",92,"cd_ORACLE",{startOnHotbar:!1,applicationDelay:1.74,cooldown:1,potency:860,falloff:.5,highlightIf:e=>e.hasResourceAvailable("DIVINING"),validateAttempt:e=>e.hasResourceAvailable("DIVINING"),onConfirm:e=>e.tryConsumeResource("DIVINING")});ga("ESSENTIAL_DIGNITY",15,"cd_ESSENTIAL_DIGNITY",{applicationDelay:.62,cooldown:40,maxCharges:3,healingPotency:400});Ns("SYNASTRY",50,"cd_SYNASTRY",{rscType:"SYNASTRY",applicationDelay:.62,cooldown:120});Ns("EXALTATION",86,"cd_EXALTATION",{rscType:"EXALTATION",applicationDelay:.71,cooldown:60});ga("COLLECTIVE_UNCONSCIOUS",58,"cd_COLLECTIVE_UNCONSCIOUS",{applicationDelay:.42,cooldown:60,onConfirm:(e,t)=>{e.gainStatus("COLLECTIVE_UNCONSCIOUS"),e.gainStatus("COLLECTIVE_UNCONSCIOUS_MIT"),e.addHoTPotencies({node:t,skillName:"COLLECTIVE_UNCONSCIOUS",effectName:"WHEEL_OF_FORTUNE",speedStat:"sps",tickPotency:100})},onApplication:e=>e.gainStatus("WHEEL_OF_FORTUNE")});ga("CELESTIAL_OPPOSITION",60,"cd_CELESTIAL_OPPOSITION",{applicationDelay:1.07,cooldown:60,healingPotency:200,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"CELESTIAL_OPPOSITION",effectName:"OPPOSITION",speedStat:"sps",tickPotency:100})},onApplication:e=>e.gainStatus("OPPOSITION")});ga("CELESTIAL_INTERSECTION",74,"cd_CELESTIAL_INTERSECTION",{applicationDelay:0,cooldown:30,maxCharges:1,healingPotency:200,aoeHeal:!0});Ns("HOROSCOPE",76,"cd_HOROSCOPE",{rscType:"HOROSCOPE",applicationDelay:0,cooldown:60,replaceIf:[{newSkill:"HOROSCOPE_RECAST",condition:e=>e.hasResourceAvailable("HOROSCOPE_HELIOS")||e.hasResourceAvailable("HOROSCOPE")}]});ga("HOROSCOPE_RECAST",76,"cd_HOROSCOPE_RECAST",{startOnHotbar:!1,applicationDelay:.62,cooldown:1,healingPotency:e=>e.hasResourceAvailable("HOROSCOPE_HELIOS")?400:200,aoeHeal:!0,validateAttempt:e=>e.hasResourceAvailable("HOROSCOPE_HELIOS")||e.hasResourceAvailable("HOROSCOPE"),onConfirm:e=>e.tryConsumeResource("HOROSCOPE_HELIOS")||e.tryConsumeResource("HOROSCOPE")});Ns("NEUTRAL_SECT",80,"cd_NEUTRAL_SECT",{rscType:"NEUTRAL_SECT",applicationDelay:.62,cooldown:120,replaceIf:[{newSkill:"SUN_SIGN",condition:e=>e.hasResourceAvailable("SUNTOUCHED")}],onConfirm:e=>e.gainStatus("SUNTOUCHED")});Ns("SUN_SIGN",100,"cd_SUN_SIGN",{startOnHotbar:!1,rscType:"SUN_SIGN",applicationDelay:1.47,cooldown:1,highlightIf:e=>e.hasResourceAvailable("SUNTOUCHED"),validateAttempt:e=>e.hasResourceAvailable("SUNTOUCHED"),onConfirm:e=>e.tryConsumeResource("SUNTOUCHED")});Object.keys(QR).forEach(e=>zt(e,`SCH/${Ge[e].name}.png`));const vO=["BIO_II","BIOLYSIS","CHAIN_STRATAGEM","BANEFUL_IMPACTION"],wB=Object.keys(QR).filter(e=>!vO.includes(e));class GB extends Xt{jobSpecificOtherTargetedBuffViewProps(){return[...vO.flatMap(t=>this.makeTargetedTimers(t))]}jobSpecificSelfTargetedBuffViewProps(){return[...wB.map(t=>t==="FEY_UNION"?this.makeCommonTimerless(t):t==="SACRED_SOIL_ZONE"?this.makeToggleableTimer(t):this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){const a=this.state.resources.get("SERAPH_SUMMON_TIMER"),o=a.available(1)?a.pendingChange?.timeTillEvent:void 0,s=this.state.resources.get("FAERIE_GAUGE").availableAmount(),c=this.state.resources.get("AETHERFLOW").availableAmount();return[{kind:"text",name:Ke("SERAPH_SUMMON_TIMER"),text:o?.toFixed(3)??"N/A",color:o?t.sch.seraph:void 0},{kind:"bar",name:Ke("FAERIE_GAUGE"),color:t.sch.faerieGauge,progress:s/100,valueString:s.toFixed(0)},{kind:"counter",name:Ke("AETHERFLOW"),color:t.sch.aetherflow,currentStacks:c,maxStacks:3,valueString:c.toFixed(0)}]}}const Mt=(e,t,a)=>{Ve("SCH",e,t,a??{})};Mt("AETHERFLOW",3,{warnOnOvercap:!0});Mt("FAERIE_GAUGE",100);Mt("BIO_II",1,{timeout:30});Mt("CATALYZE",1,{timeout:30});Mt("GALVANIZE",1,{timeout:30});Mt("WHISPERING_DAWN",1,{timeout:21});Mt("ANGELS_WHISPER",1,{timeout:21});Mt("FEY_ILLUMINATION",1,{timeout:20});Mt("SERAPHIC_ILLUMINATION",1,{timeout:20});Mt("SACRED_SOIL_ZONE",1,{timeout:15});Mt("SACRED_SOIL_MIT",1,{timeout:4.96});Mt("EMERGENCY_TACTICS",1,{timeout:15});Mt("DISSIPATION",1,{timeout:30});Mt("EXCOGITATION",1,{timeout:45});Mt("CHAIN_STRATAGEM",1,{timeout:20});Mt("IMPACT_IMMINENT",1,{timeout:30,warnOnTimeout:!0});Mt("BIOLYSIS",1,{timeout:30});Mt("RECITATION",1,{timeout:15});Mt("FEY_UNION",1);Mt("SERAPHIC_VEIL",1,{timeout:30});Mt("PROTRACTION",1,{timeout:10});Mt("EXPEDIENCE",1,{timeout:10});Mt("DESPERATE_MEASURES",1,{timeout:20});Mt("BANEFUL_IMPACTION",1,{timeout:15});Mt("SERAPHISM",1,{timeout:20});Mt("SERAPHISM_REGEN",1,{timeout:5});Mt("SERAPH_SUMMON_TIMER",1,{timeout:22});const xu=.09,Hu=new Map([["FEY_BLESSING",.667],["WHISPERING_DAWN",1.156],["CONSOLATION",.889],["ANGELS_WHISPER",1.029],["AETHERPACT",.668],["FEY_ILLUMINATION",1.205]]);class BB extends qt{nextEstimatedPetApplication;constructor(t){super(t),this.nextEstimatedPetApplication=void 0;const a=this.hasTraitUnlocked("ENHANCED_DEPLOYMENT_TACTICS")?90:120,o=this.hasTraitUnlocked("ENHANCED_RECITATION")?60:90;this.cooldowns.set(new Ue("cd_DEPLOYMENT_TACTICS",a,1,1)),this.cooldowns.set(new Ue("cd_RECITATION",o,1,1)),this.cooldowns.set(new Ue("cd_SWIFTCAST",this.hasTraitUnlocked("ENHANCED_SWIFTCAST")?40:60,1,1)),this.registerRecurringEvents([{reportName:N({en:"Bio/Biolysis DoT",zh:"DoT"}),groupedEffects:[{effectName:"BIO_II",appliedBy:["BIO_II"]},{effectName:"BIOLYSIS",appliedBy:["BIOLYSIS"]}]},{groupedEffects:[{effectName:"BANEFUL_IMPACTION",appliedBy:["BANEFUL_IMPACTION"]}]},{isHealing:!0,groupedEffects:[{effectName:"WHISPERING_DAWN",appliedBy:["WHISPERING_DAWN"]},{effectName:"ANGELS_WHISPER",appliedBy:["WHISPERING_DAWN"]}]},{isHealing:!0,groupedEffects:[{effectName:"SACRED_SOIL_MIT",appliedBy:["SACRED_SOIL"],isGroundTargeted:!0}]},{isHealing:!0,groupedEffects:[{effectName:"SERAPHISM_REGEN",appliedBy:["SERAPHISM"]}]}])}jobSpecificAddHealingBuffCovers(t,a){a.cdName==="cd_GCD"&&((this.hasResourceAvailable("FEY_ILLUMINATION")||this.hasResourceAvailable("SERAPHIC_ILLUMINATION"))&&t.addBuff(H.FeyIllumination),this.hasResourceAvailable("DISSIPATION")&&t.addBuff(H.Dissipation)),this.hasResourceAvailable("PROTRACTION")&&t.addBuff(H.Protraction);const o=["ADLOQUIUM","SUCCOR","CONCITATION","EXCOGITATION","INDOMITABILITY"];this.hasResourceAvailable("RECITATION")&&o.includes(a.name)&&t.addBuff(H.Recitation)}jobSpecificAddDamageBuffCovers(t,a){t.targetList.some(o=>this.hasDebuffActive("CHAIN_STRATAGEM",o))&&t.addBuff(H.ChainStratagem)}jobSpecificRegisterRecurringEvents(){const t=()=>new Oe("sch special hot ticks",3,()=>{this.hasResourceAvailable("FEY_UNION")&&this.resources.get("FAERIE_GAUGE").available(10)&&this.resources.get("FAERIE_GAUGE").consume(10),this.resources.get("FAERIE_GAUGE").available(10)||this.tryConsumeResource("FEY_UNION"),this.hasResourceAvailable("SACRED_SOIL_ZONE")&&this.gainStatus("SACRED_SOIL_MIT"),this.hasResourceAvailable("SERAPHISM")&&this.gainStatus("SERAPHISM_REGEN"),this.addEvent(t())});this.addEvent(new Oe("begin sch special hot ticks",this.hotTickOffset,()=>this.addEvent(t())))}makePetPotency(t,a,o,s){const c=new tn({config:this.config,sourceTime:o,sourceSkill:a,aspect:Ie.Other,basePotency:s,snapshotTime:this.getDisplayTime(),description:"",healTargetCount:t,falloff:void 0});return c.addModifiers(J.SchPet),c}queuePetAction(t,a,o,s,c,d){const f=this.getDisplayTime();this.nextEstimatedPetApplication=f+s+c;const h=this.resources.get("SERAPH_SUMMON_TIMER").pendingChange?.timeTillEvent;h!==void 0&&this.nextEstimatedPetApplication>h+f&&I.reportWarning({kind:"custom",en:`${Wa(a)} is likely to ghost when seraph leaves!`}),this.addEvent(new Oe(o+" pet snapshot",s,()=>{const m=d(this);this.addEvent(new Oe(o+" application",c,()=>{m(this)}))}))}warnLastPetGhost(){this.nextEstimatedPetApplication!==void 0&&this.nextEstimatedPetApplication>this.getDisplayTime()&&I.reportWarning({kind:"custom",en:"previous pet command is likely to ghost!"})}hasRealFairy(){return!this.hasResourceAvailable("DISSIPATION")&&!this.hasResourceAvailable("SERAPH_SUMMON_TIMER")}maybeChainModifier(t){const a=new Map;return t.targetList.forEach(o=>{this.hasDebuffActive("CHAIN_STRATAGEM",o)&&a.set(o,[J.ChainStrat])}),a}maybeGainFaerieGauge(){this.hasResourceAvailable("DISSIPATION")||this.resources.get("FAERIE_GAUGE").gain(10)}addHealingMagicPotencyModifiers(t){(this.hasResourceAvailable("FEY_ILLUMINATION")||this.hasResourceAvailable("SERAPHIC_ILLUMINATION"))&&t.push(J.FeyIllum),this.hasResourceAvailable("DISSIPATION")&&t.push(J.Dissipation)}addHealingActionPotencyModifiers(t){this.hasResourceAvailable("PROTRACTION")&&t.push(J.Protraction)}get statusPropsGenerator(){return new GB(this)}}const Ia=(e,t,a)=>Xa("SCH",e,t,{...a,castTime:s=>s.config.adjustedCastTime(a.baseCastTime??0),recastTime:s=>s.config.adjustedGCD(2.5),isInstantFn:s=>!a.baseCastTime||s.hasResourceAvailable("SWIFTCAST"),jobTargetPotencyModifiers:(s,c)=>s.maybeChainModifier(c),jobHealingPotencyModifiers:s=>{if(!a.healingPotency)return[];const c=[];return s.addHealingMagicPotencyModifiers(c),s.addHealingActionPotencyModifiers(c),s.hasResourceAvailable("RECITATION")&&e!=="ACCESSION"&&e!=="MANIFESTATION"&&c.push(J.AutoCrit),c},onConfirm:Le(a.baseCastTime?s=>s.tryConsumeResource("SWIFTCAST"):void 0,a.onConfirm)}),_a=(e,t,a,o)=>at("SCH",e,t,a,{...o,jobTargetPotencyModifiers:(c,d)=>c.maybeChainModifier(d),jobHealingPotencyModifiers:c=>{if(!o.healingPotency)return[];const d=[];return c.addHealingActionPotencyModifiers(d),c.hasResourceAvailable("RECITATION")&&(e==="INDOMITABILITY"||e==="EXCOGITATION")&&d.push(J.AutoCrit),d}}),Cs=(e,t,a,o)=>Ye("SCH",e,t,a,o),MO=[{newSkill:"ADLOQUIUM",condition:e=>!e.hasResourceAvailable("SERAPHISM")},{newSkill:"MANIFESTATION",condition:e=>e.hasResourceAvailable("SERAPHISM")}],LO=[{newSkill:"CONCITATION",condition:e=>!e.hasResourceAvailable("SERAPHISM")},{newSkill:"ACCESSION",condition:e=>e.hasResourceAvailable("SERAPHISM")}];Ia("BROIL_II",64,{autoUpgrade:{otherSkill:"BROIL_III",trait:"BROIL_MASTERY_III"},applicationDelay:.8,baseCastTime:1.5,manaCost:400,potency:240});Ia("BROIL_III",72,{autoDowngrade:{otherSkill:"BROIL_II",trait:"BROIL_MASTERY_III"},autoUpgrade:{otherSkill:"BROIL_IV",trait:"BROIL_MASTERY_IV"},applicationDelay:.8,baseCastTime:1.5,manaCost:400,potency:255});Ia("BROIL_IV",82,{autoDowngrade:{otherSkill:"BROIL_III",trait:"BROIL_MASTERY_IV"},applicationDelay:.8,baseCastTime:1.5,manaCost:400,potency:[["NEVER",295],["TACTICIANS_MASTERY",320]]});Ia("BIO_II",26,{autoUpgrade:{otherSkill:"BIOLYSIS",trait:"CORRUPTION_MASTERY_II"},applicationDelay:1.15,baseCastTime:0,manaCost:300,drawsAggro:!0,onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"BIO_II",skillName:"BIO_II",tickPotency:40,speedStat:"sps",targetModifiers:e.maybeChainModifier(t)})},onApplication:(e,t)=>e.applyDoT("BIO_II",t)});Ia("BIOLYSIS",72,{autoDowngrade:{otherSkill:"BIO_II",trait:"CORRUPTION_MASTERY_II"},applicationDelay:.67,baseCastTime:0,manaCost:300,drawsAggro:!0,onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"BIOLYSIS",skillName:"BIOLYSIS",tickPotency:e.hasTraitUnlocked("TACTICIANS_MASTERY")?85:70,speedStat:"sps",targetModifiers:e.maybeChainModifier(t)})},onApplication:(e,t)=>e.applyDoT("BIOLYSIS",t)});Ia("RUIN_II",38,{applicationDelay:.94,potency:[["NEVER",200],["BROIL_MASTERY_IV",220]],baseCastTime:0,manaCost:400});Ia("ART_OF_WAR",46,{autoUpgrade:{otherSkill:"ART_OF_WAR_II",trait:"ART_OF_WAR_MASTERY"},applicationDelay:.67,baseCastTime:0,manaCost:400,potency:165,falloff:0});Ia("ART_OF_WAR_II",82,{autoDowngrade:{otherSkill:"ART_OF_WAR",trait:"ART_OF_WAR_MASTERY"},applicationDelay:.67,baseCastTime:0,manaCost:400,potency:180,falloff:0});_a("CHAIN_STRATAGEM",66,"cd_CHAIN_STRATAGEM",{replaceIf:[{newSkill:"BANEFUL_IMPACTION",condition:e=>e.hasResourceAvailable("IMPACT_IMMINENT")}],applicationDelay:.8,cooldown:120,onConfirm:(e,t)=>{e.hasTraitUnlocked("ENHANCED_CHAIN_STRATAGEM")&&e.gainStatus("IMPACT_IMMINENT")},onApplication:(e,t)=>e.gainDebuff("CHAIN_STRATAGEM",[t.targetList[0]])});_a("BANEFUL_IMPACTION",92,"cd_BANEFUL_IMPACTION",{startOnHotbar:!1,applicationDelay:1.29,cooldown:1,falloff:0,highlightIf:e=>e.hasResourceAvailable("IMPACT_IMMINENT"),validateAttempt:e=>e.hasResourceAvailable("IMPACT_IMMINENT"),onConfirm:(e,t)=>{e.tryConsumeResource("IMPACT_IMMINENT"),e.addDoTPotencies({node:t,effectName:"BANEFUL_IMPACTION",skillName:"BANEFUL_IMPACTION",tickPotency:140,speedStat:"sps",targetModifiers:e.maybeChainModifier(t)})},onApplication:(e,t)=>e.applyDoT("BANEFUL_IMPACTION",t)});_a("ENERGY_DRAIN",45,"cd_ENERGY_DRAIN",{applicationDelay:1.07,cooldown:1,potency:100,validateAttempt:e=>e.hasResourceAvailable("AETHERFLOW"),onConfirm:e=>{e.maybeGainFaerieGauge(),e.tryConsumeResource("AETHERFLOW")}});const FB=900,xO=900;Ia("ADLOQUIUM",30,{replaceIf:MO,applicationDelay:.98,baseCastTime:2,manaCost:e=>e.hasResourceAvailable("RECITATION")?0:FB,healingPotency:300,onConfirm:e=>{const t=e.tryConsumeResource("EMERGENCY_TACTICS");t||e.gainStatus("GALVANIZE"),(e.tryConsumeResource("RECITATION")||e.triggersEffect(e.config.critRate))&&!t&&e.gainStatus("CATALYZE")}});const HO=e=>{e.tryConsumeResource("EMERGENCY_TACTICS")||e.gainStatus("GALVANIZE")};Ia("SUCCOR",35,{autoUpgrade:{otherSkill:"CONCITATION",trait:"SUCCOR_MASTERY"},applicationDelay:1.12,baseCastTime:2,manaCost:e=>e.hasResourceAvailable("RECITATION")?0:xO,healingPotency:200,onConfirm:HO});Ia("CONCITATION",96,{autoDowngrade:{otherSkill:"CONCITATION",trait:"SUCCOR_MASTERY"},replaceIf:LO,applicationDelay:1.12,baseCastTime:2,manaCost:e=>e.hasResourceAvailable("RECITATION")?0:xO,healingPotency:200,onConfirm:HO});Ia("PHYSICK",4,{applicationDelay:1.03,healingPotency:[["NEVER",400],["ENHANCED_HEALING_MAGIC",450]],baseCastTime:1.5,manaCost:300});Ia("RESURRECTION",12,{applicationDelay:.98,baseCastTime:8,manaCost:2400});_a("AETHERFLOW",45,"cd_AETHERFLOW",{applicationDelay:0,cooldown:60,requiresCombat:!0,onConfirm:e=>{e.resources.get("MANA").gain(2e3),e.resources.get("AETHERFLOW").gain(3)}});Cs("DISSIPATION",60,"cd_DISSIPATION",{rscType:"DISSIPATION",applicationDelay:0,cooldown:180,requiresCombat:!0,validateAttempt:e=>!e.hasResourceAvailable("SERAPH_SUMMON_TIMER"),onConfirm:e=>{e.warnLastPetGhost(),e.resources.get("AETHERFLOW").gain(3),e.tryConsumeResource("SERAPHISM")}});_a("LUSTRATE",45,"cd_LUSTRATE",{applicationDelay:.62,cooldown:1,healingPotency:600,validateAttempt:e=>e.hasResourceAvailable("AETHERFLOW"),onConfirm:e=>{e.maybeGainFaerieGauge(),e.tryConsumeResource("AETHERFLOW")}});Cs("SACRED_SOIL",50,"cd_SACRED_SOIL",{rscType:"SACRED_SOIL_ZONE",applicationDelay:.62,cooldown:30,validateAttempt:e=>e.hasResourceAvailable("AETHERFLOW"),onConfirm:(e,t)=>{e.maybeGainFaerieGauge(),e.tryConsumeResource("AETHERFLOW"),e.hasTraitUnlocked("ENHANCED_SACRED_SOIL")&&e.addHoTPotencies({node:t,skillName:"SACRED_SOIL",effectName:"SACRED_SOIL_MIT",speedStat:"sps",tickPotency:100},34.96+.62)},onApplication:(e,t)=>{e.hasTraitUnlocked("ENHANCED_SACRED_SOIL")&&(e.applyHoT("SACRED_SOIL_MIT",t,34.96),e.gainStatus("SACRED_SOIL_MIT"))}});Cs("EXCOGITATION",62,"cd_EXCOGITATION",{rscType:"EXCOGITATION",applicationDelay:.8,cooldown:45,healingPotency:800,validateAttempt:e=>e.hasResourceAvailable("RECITATION")||e.hasResourceAvailable("AETHERFLOW"),onConfirm:e=>{e.maybeGainFaerieGauge(),e.tryConsumeResource("RECITATION")||e.tryConsumeResource("AETHERFLOW")}});_a("INDOMITABILITY",52,"cd_INDOMITABILITY",{applicationDelay:.62,cooldown:30,healingPotency:400,validateAttempt:e=>e.hasResourceAvailable("RECITATION")||e.hasResourceAvailable("AETHERFLOW"),onConfirm:e=>{e.maybeGainFaerieGauge(),e.tryConsumeResource("RECITATION")||e.tryConsumeResource("AETHERFLOW")}});_a("WHISPERING_DAWN",20,"cd_WHISPERING_DAWN",{applicationDelay:0,cooldown:60,validateAttempt:e=>!e.hasResourceAvailable("DISSIPATION"),onConfirm:(e,t)=>{e.tryConsumeResource("FEY_UNION");const a=e.hasResourceAvailable("SERAPH_SUMMON_TIMER")?"ANGELS_WHISPER":"WHISPERING_DAWN",o=s=>(s.addHoTPotencies({node:t,skillName:"WHISPERING_DAWN",effectName:a,speedStat:"sps",tickPotency:80}),c=>{c.applyHoT(a,t),t.getHotPotencies("WHISPERING_DAWN").forEach(d=>{d.getDisplayedModifiers().includes(J.SchPet)||d.addModifiers(J.SchPet)}),c.gainStatus(a)});e.queuePetAction(t,"WHISPERING_DAWN",a,xu,Hu.get(a),o)}});_a("FEY_ILLUMINATION",40,"cd_FEY_ILLUMINATION",{applicationDelay:0,cooldown:120,validateAttempt:e=>!e.hasResourceAvailable("DISSIPATION"),onConfirm:(e,t)=>{e.tryConsumeResource("FEY_UNION");const a=e.hasResourceAvailable("SERAPH_SUMMON_TIMER")?"SERAPHIC_ILLUMINATION":"FEY_ILLUMINATION",o=s=>c=>c.gainStatus(a);e.queuePetAction(t,"FEY_ILLUMINATION","FEY_ILLUMINATION",xu,Hu.get("FEY_ILLUMINATION"),o)}});_a("DEPLOYMENT_TACTICS",56,"cd_DEPLOYMENT_TACTICS",{applicationDelay:.89,cooldown:120});Cs("EMERGENCY_TACTICS",58,"cd_EMERGENCY_TACTICS",{rscType:"EMERGENCY_TACTICS",applicationDelay:0,cooldown:15});_a("AETHERPACT",70,"cd_AETHERPACT",{replaceIf:[{newSkill:"DISSOLVE_UNION",condition:e=>e.hasResourceAvailable("FEY_UNION")}],applicationDelay:0,cooldown:3,validateAttempt:e=>e.resources.get("FAERIE_GAUGE").available(10)&&e.hasRealFairy(),onConfirm:(e,t)=>{e.gainStatus("FEY_UNION");const a=o=>s=>s.gainStatus("FEY_UNION");e.queuePetAction(t,"AETHERPACT","AETHERPACT",xu,Hu.get("AETHERPACT"),a)}});_a("DISSOLVE_UNION",70,"cd_DISSOLVE_UNION",{startOnHotbar:!1,applicationDelay:0,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("FEY_UNION"),onConfirm:e=>e.tryConsumeResource("FEY_UNION")});Cs("RECITATION",74,"cd_RECITATION",{rscType:"RECITATION",applicationDelay:0,cooldown:90});_a("FEY_BLESSING",76,"cd_FEY_BLESSING",{applicationDelay:0,cooldown:60,healingPotency:320,validateAttempt:e=>e.hasRealFairy(),onConfirm:(e,t)=>{e.tryConsumeResource("FEY_UNION");const a=o=>{const s=o.makePetPotency(t.healTargetCount,"FEY_BLESSING",o.getDisplayTime(),320);return o.addHealingActionPotencyModifiers(s.getDisplayedModifiers()),c=>I.resolveHealingPotency(s)};e.queuePetAction(t,"FEY_BLESSING","FEY_BLESSING",xu,Hu.get("FEY_BLESSING"),a)}});_a("SUMMON_SERAPH",80,"cd_SUMMON_SERAPH",{replaceIf:[{newSkill:"CONSOLATION",condition:e=>e.hasResourceAvailable("SERAPH_SUMMON_TIMER")}],applicationDelay:0,cooldown:120,validateAttempt:e=>e.hasRealFairy(),onConfirm:e=>{e.warnLastPetGhost(),e.gainStatus("SERAPH_SUMMON_TIMER"),e.tryConsumeResource("FEY_UNION")}});_a("CONSOLATION",80,"cd_CONSOLATION",{startOnHotbar:!1,applicationDelay:0,cooldown:1,secondaryCooldown:{cdName:"cd_CONSOLATION_INTERNAL",cooldown:30,maxCharges:2},healingPotency:250,validateAttempt:e=>e.hasResourceAvailable("SERAPH_SUMMON_TIMER"),onConfirm:(e,t)=>{const a=o=>{const s=o.makePetPotency(t.healTargetCount,"CONSOLATION",o.getDisplayTime(),250);return c=>{c.gainStatus("SERAPHIC_VEIL"),I.resolveHealingPotency(s)}};e.queuePetAction(t,"CONSOLATION","CONSOLATION",xu,Hu.get("CONSOLATION"),a)}});Cs("PROTRACTION",86,"cd_PROTRACTION",{rscType:"PROTRACTION",applicationDelay:.76,cooldown:60});_a("EXPEDIENT",90,"cd_EXPEDIENT",{applicationDelay:0,cooldown:120,onConfirm:e=>{e.gainStatus("EXPEDIENCE"),e.gainStatus("DESPERATE_MEASURES")}});Cs("SERAPHISM",100,"cd_SERAPHISM",{requiresCombat:!0,rscType:"SERAPHISM",applicationDelay:0,cooldown:180,validateAttempt:e=>!e.hasResourceAvailable("DISSIPATION"),onConfirm:(e,t)=>{const a=e.cooldowns.get("cd_EMERGENCY_TACTICS");a.restore(15),e.cooldowns.set(new Ue("cd_EMERGENCY_TACTICS",1,1,1)),e.addEvent(new Oe("restore etact cd",e.getStatusDuration("SERAPHISM"),()=>e.cooldowns.set(a))),e.addHoTPotencies({node:t,skillName:"SERAPHISM",effectName:"SERAPHISM_REGEN",speedStat:"sps",tickPotency:100},24.96)},onApplication:(e,t)=>{e.applyHoT("SERAPHISM_REGEN",t,24.96),e.gainStatus("SERAPHISM_REGEN")}});Ia("MANIFESTATION",100,{startOnHotbar:!1,replaceIf:MO,applicationDelay:1.16,healingPotency:360,baseCastTime:0,manaCost:900,validateAttempt:e=>e.hasResourceAvailable("SERAPHISM"),onConfirm:e=>{e.tryConsumeResource("EMERGENCY_TACTICS")||(e.gainStatus("GALVANIZE"),e.triggersEffect(e.config.critRate)&&e.gainStatus("CATALYZE"))}});Ia("ACCESSION",100,{startOnHotbar:!1,replaceIf:LO,applicationDelay:.98,healingPotency:240,baseCastTime:0,manaCost:900,validateAttempt:e=>e.hasResourceAvailable("SERAPHISM"),onConfirm:e=>!e.tryConsumeResource("EMERGENCY_TACTICS")&&e.gainStatus("GALVANIZE")});Object.keys(tT).forEach(e=>zt(e,`WHM/${Ge[e].name}.png`));const kO=["AERO_II","DIA"],jB=Object.keys(tT).filter(e=>!kO.includes(e));class zB extends Xt{jobSpecificOtherTargetedBuffViewProps(){return[...kO.flatMap(t=>this.makeTargetedTimers(t))]}jobSpecificSelfTargetedBuffViewProps(){return[...jB.map(t=>this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){const a=this.state.resources,o=a.get("LILLIES"),s=a.get("LILY_TIMER").available(1)?a.timeTillReady("LILY_TIMER"):20,c=o.availableAmount(),d=a.get("BLOOD_LILY").availableAmount(),f=[{kind:"bar",name:Ke("LILY_TIMER"),color:t.whm.lily,progress:1-s/20,valueString:s.toFixed(3)},{kind:"counter",name:Ke("LILLIES"),color:t.whm.lily,currentStacks:c,maxStacks:3}];return this.state.hasTraitUnlocked("TRANSCENDENT_AFFLATUS")&&f.push({kind:"counter",name:Ke("BLOOD_LILY"),color:t.whm.blood,currentStacks:d,maxStacks:3}),f}}const Sn=(e,t,a)=>{Ve("WHM",e,t,a??{})};Sn("LILLIES",3,{default:3});Sn("LILY_TIMER",1);Sn("BLOOD_LILY",3,{default:3,warnOnOvercap:!0});Sn("FREECURE",1,{timeout:15});Sn("PRESENCE_OF_MIND",1,{timeout:15});Sn("SACRED_SIGHT",3,{timeout:30,warnOnTimeout:!0});Sn("REGEN",1,{timeout:18});Sn("AERO_II",1,{timeout:30});Sn("MEDICA_II",1,{timeout:15});Sn("ASYLUM",1,{timeout:24});Sn("THIN_AIR",1,{timeout:12});Sn("DIVINE_BENISON",1,{timeout:15});Sn("CONFESSION",1,{timeout:10});Sn("DIA",1,{timeout:30});Sn("TEMPERANCE",1,{timeout:20});Sn("DIVINE_GRACE",1,{timeout:30});Sn("AQUAVEIL",1,{timeout:8});Sn("LITURGY_OF_THE_BELL",5,{timeout:20});Sn("MEDICA_III",1,{timeout:15});Sn("DIVINE_CARESS",1,{timeout:10});Sn("DIVINE_AURA",1,{timeout:15});class YB extends qt{constructor(t){super(t);const a=this.hasTraitUnlocked("ENHANCED_DIVINE_BENISON")?2:1,o=this.hasTraitUnlocked("ENHANCED_TETRAGRAMMATON")?2:1;this.cooldowns.set(new Ue("cd_DIVINE_BENISON",30,a,a)),this.cooldowns.set(new Ue("cd_TETRAGRAMMATON",60,o,o)),this.cooldowns.set(new Ue("cd_SWIFTCAST",this.hasTraitUnlocked("ENHANCED_SWIFTCAST")?40:60,1,1)),this.registerRecurringEvents([{reportName:N({en:"Dia/Aero DoT",zh:"/DoT"}),groupedEffects:[{effectName:"AERO_II",appliedBy:["AERO_II"]},{effectName:"DIA",appliedBy:["DIA"]}]},{isHealing:!0,groupedEffects:[{effectName:"DIVINE_AURA",appliedBy:["DIVINE_CARESS"]}]},{isHealing:!0,groupedEffects:[{effectName:"ASYLUM",appliedBy:["ASYLUM"]}]},{isHealing:!0,groupedEffects:[{effectName:"REGEN",appliedBy:["REGEN"]}]},{isHealing:!0,groupedEffects:[{effectName:"MEDICA_II",appliedBy:["MEDICA_II"]},{effectName:"MEDICA_III",appliedBy:["MEDICA_III"]}]}])}jobSpecificRegisterRecurringEvents(){(this.isInCombat()||this.hasResourceAvailable("LILY_TIMER"))&&!this.hasResourceAvailable("LILLIES",3)&&this.startLilyTimer()}jobSpecificAddHealingBuffCovers(t,a){this.hasTraitUnlocked("ENHANCED_ASYLUM")&&this.hasResourceAvailable("ASYLUM")&&t.addBuff(H.Asylum),this.hasResourceAvailable("TEMPERANCE")&&t.addBuff(H.Temperance),a.cdName==="cd_GCD"&&a.aoeHeal&&this.hasResourceAvailable("CONFESSION")&&t.addBuff(H.Confession)}recurringLilyGain(){this.resources.addResourceEvent({rscType:"LILY_TIMER",name:"gain lily",delay:20,fnOnRsc:()=>{this.resources.get("LILLIES").gain(1),this.hasResourceAvailable("LILLIES",3)?this.tryConsumeResource("LILY_TIMER"):this.recurringLilyGain()}})}startLilyTimer(){this.hasResourceAvailable("LILY_TIMER")||this.hasResourceAvailable("LILLIES",3)||(this.resources.get("LILY_TIMER").gain(1),this.recurringLilyGain())}addHealingActionPotencyModifiers(t){this.hasTraitUnlocked("ENHANCED_ASYLUM")&&this.hasResourceAvailable("ASYLUM")&&t.push(J.Asylum),this.hasResourceAvailable("TEMPERANCE")&&t.push(J.Temperance)}get statusPropsGenerator(){return new zB(this)}}const xn=(e,t,a)=>{const o=s=>{if(!a.healingPotency)return[];const c=[];return s.hasResourceAvailable("CONFESSION")&&a.aoeHeal&&c.push(J.Confession),s.addHealingActionPotencyModifiers(c),c};return Xa("WHM",e,t,{...a,castTime:s=>s.config.adjustedCastTime(a.baseCastTime??0,s.hasResourceAvailable("PRESENCE_OF_MIND")?20:0),recastTime:s=>s.config.adjustedGCD(2.5,s.hasResourceAvailable("PRESENCE_OF_MIND")?20:0),isInstantFn:s=>!a.baseCastTime||s.hasResourceAvailable("SWIFTCAST"),manaCost:a.manaCost?s=>s.hasResourceAvailable("THIN_AIR")?0:da(a.manaCost)(s):void 0,jobHealingPotencyModifiers:o,onConfirm:Le(s=>s.tryConsumeResource("THIN_AIR"),a.baseCastTime?s=>s.tryConsumeResource("SWIFTCAST"):void 0,a.onConfirm),onApplication:Le(a.potency||e=="AFFLATUS_SOLACE"||e=="AFFLATUS_RAPTURE"?s=>s.startLilyTimer():void 0,a.onApplication)})},bs=(e,t,a,o)=>at("WHM",e,t,a,{...o,jobHealingPotencyModifiers:c=>{if(!o.healingPotency)return[];const d=[];return o.isPetHeal&&d.push(J.WhmPet),c.addHealingActionPotencyModifiers(d),d}}),yl=(e,t,a,o)=>Ye("WHM",e,t,a,{...o,jobHealingPotencyModifiers:c=>{if(!o.healingPotency)return[];const d=[];return c.addHealingActionPotencyModifiers(d),d}});xn("STONE_IV",64,{autoUpgrade:{otherSkill:"GLARE",trait:"STONE_MASTERY_IV"},applicationDelay:.8,baseCastTime:1.5,potency:260,manaCost:400});xn("GLARE",72,{autoDowngrade:{otherSkill:"STONE_IV",trait:"STONE_MASTERY_IV"},autoUpgrade:{otherSkill:"GLARE_III",trait:"GLARE_MASTERY"},applicationDelay:1.29,baseCastTime:1.5,potency:290,manaCost:400});xn("GLARE_III",82,{autoDowngrade:{otherSkill:"GLARE",trait:"GLARE_MASTERY"},applicationDelay:1.29,baseCastTime:1.5,potency:[["NEVER",310],["WHITE_MAGIC_MASTERY",350]],manaCost:400});xn("AERO_II",46,{autoUpgrade:{otherSkill:"DIA",trait:"AERO_MASTERY_II"},applicationDelay:1.15,potency:50,manaCost:200,onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"AERO_II",skillName:"AERO_II",tickPotency:50,speedStat:"sps"})},onApplication:(e,t)=>e.applyDoT("AERO_II",t)});xn("DIA",72,{autoDowngrade:{otherSkill:"AERO_II",trait:"AERO_MASTERY_II"},applicationDelay:1.29,potency:[["NEVER",65],["WHITE_MAGIC_MASTERY",85]],manaCost:400,onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"DIA",skillName:"DIA",tickPotency:e.hasTraitUnlocked("WHITE_MAGIC_MASTERY")?85:65,speedStat:"sps"})},onApplication:(e,t)=>e.applyDoT("DIA",t)});xn("HOLY",45,{autoUpgrade:{otherSkill:"HOLY_III",trait:"HOLY_MASTERY"},applicationDelay:2.13,potency:140,baseCastTime:1.5,falloff:0,manaCost:400});xn("HOLY_III",82,{autoDowngrade:{otherSkill:"HOLY",trait:"HOLY_MASTERY"},applicationDelay:2.13,potency:150,baseCastTime:1.5,falloff:0,manaCost:400});xn("AFFLATUS_MISERY",74,{applicationDelay:.58,potency:[["NEVER",1240],["WHITE_MAGIC_MASTERY",1400]],falloff:.5,manaCost:0,highlightIf:e=>e.hasResourceExactly("BLOOD_LILY",3),validateAttempt:e=>e.hasResourceExactly("BLOOD_LILY",3),onConfirm:e=>e.tryConsumeResource("BLOOD_LILY",!0)});xn("AFFLATUS_SOLACE",52,{applicationDelay:.53,healingPotency:[["NEVER",700],["ENHANCED_HEALING_MAGIC",800]],manaCost:0,validateAttempt:e=>e.hasResourceAvailable("LILLIES"),onConfirm:e=>{e.tryConsumeResource("LILLIES"),e.resources.get("BLOOD_LILY").gain(1)}});xn("AFFLATUS_RAPTURE",76,{applicationDelay:.58,healingPotency:[["NEVER",300],["ENHANCED_HEALING_MAGIC",400]],manaCost:0,aoeHeal:!0,validateAttempt:e=>e.hasResourceAvailable("LILLIES"),onConfirm:e=>{e.tryConsumeResource("LILLIES"),e.resources.get("BLOOD_LILY").gain(1)}});xn("REGEN",35,{applicationDelay:1.02,healingPotency:[["NEVER",200],["ENHANCED_HEALING_MAGIC",250]],manaCost:400,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"REGEN",effectName:"REGEN",speedStat:"sps",tickPotency:e.hasTraitUnlocked("ENHANCED_HEALING_MAGIC")?250:200})},onApplication:(e,t)=>{e.applyHoT("REGEN",t),e.gainStatus("REGEN")}});xn("CURE",2,{applicationDelay:1.03,healingPotency:[["NEVER",450],["ENHANCED_HEALING_MAGIC",500]],baseCastTime:1.5,manaCost:400,onConfirm:e=>e.maybeGainProc("FREECURE",.15)});xn("CURE_II",30,{applicationDelay:.98,healingPotency:[["NEVER",700],["ENHANCED_HEALING_MAGIC",800]],baseCastTime:2,manaCost:e=>e.hasResourceAvailable("FREECURE")?0:1e3,highlightIf:e=>e.hasResourceAvailable("FREECURE"),onConfirm:e=>e.tryConsumeResource("FREECURE")});xn("CURE_III",40,{applicationDelay:.98,healingPotency:[["NEVER",550],["ENHANCED_HEALING_MAGIC",600]],baseCastTime:2,manaCost:1500,aoeHeal:!0});xn("MEDICA",10,{applicationDelay:1.02,healingPotency:[["NEVER",300],["ENHANCED_HEALING_MAGIC",400]],baseCastTime:2,manaCost:900,aoeHeal:!0});xn("MEDICA_II",50,{autoUpgrade:{otherSkill:"MEDICA_III",trait:"MEDICA_MASTERY"},applicationDelay:.84,healingPotency:[["NEVER",200],["ENHANCED_HEALING_MAGIC",250]],baseCastTime:2,manaCost:1e3,aoeHeal:!0,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"MEDICA_II",effectName:"MEDICA_II",speedStat:"sps",tickPotency:e.hasTraitUnlocked("ENHANCED_HEALING_MAGIC")?150:100})},onApplication:(e,t)=>{e.applyHoT("MEDICA_II",t),e.gainStatus("MEDICA_II")}});xn("MEDICA_III",96,{autoDowngrade:{otherSkill:"MEDICA_II",trait:"MEDICA_MASTERY"},applicationDelay:.84,healingPotency:250,baseCastTime:2,manaCost:1e3,aoeHeal:!0,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"MEDICA_III",effectName:"MEDICA_III",speedStat:"sps",tickPotency:175})},onApplication:(e,t)=>{e.applyHoT("MEDICA_III",t),e.gainStatus("MEDICA_III")}});xn("RAISE",12,{baseCastTime:8,manaCost:2400,applicationDelay:1.16});bs("ASSIZE",56,"cd_ASSIZE",{applicationDelay:.67,cooldown:40,potency:400,falloff:0,healingPotency:400,onApplication:e=>e.resources.get("MANA").gain(500)});yl("PRESENCE_OF_MIND",30,"cd_PRESENCE_OF_MIND",{rscType:"PRESENCE_OF_MIND",applicationDelay:.53,cooldown:120,replaceIf:[{newSkill:"GLARE_IV",condition:e=>e.hasResourceAvailable("SACRED_SIGHT")}],onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_PRESENCE_OF_MIND")&&e.gainStatus("SACRED_SIGHT",3)}});xn("GLARE_IV",92,{startOnHotbar:!1,applicationDelay:.85,potency:640,falloff:.4,manaCost:0,highlightIf:e=>e.hasResourceAvailable("SACRED_SIGHT"),validateAttempt:e=>e.hasResourceAvailable("SACRED_SIGHT"),onConfirm:e=>e.tryConsumeResource("SACRED_SIGHT")});yl("THIN_AIR",58,"cd_THIN_AIR",{rscType:"THIN_AIR",applicationDelay:0,cooldown:60,maxCharges:2});bs("AETHERIAL_SHIFT",40,"cd_AETHERIAL_SHIFT",{applicationDelay:0,cooldown:60,animationLock:Wt});yl("DIVINE_BENISON",66,"cd_DIVINE_BENISON",{rscType:"DIVINE_BENISON",applicationDelay:.8,cooldown:30,maxCharges:2});yl("AQUAVEIL",86,"cd_AQUAVEIL",{rscType:"AQUAVEIL",applicationDelay:.62,cooldown:60});bs("TETRAGRAMMATON",60,"cd_TETRAGRAMMATON",{applicationDelay:.53,cooldown:60,maxCharges:2,healingPotency:700});bs("BENEDICTION",50,"cd_BENEDICTION",{applicationDelay:.62,cooldown:180});bs("ASYLUM",52,"cd_ASYLUM",{applicationDelay:.85,cooldown:90,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"ASYLUM",effectName:"ASYLUM",speedStat:"sps",tickPotency:100})},onApplication:e=>e.gainStatus("ASYLUM")});yl("PLENARY_INDULGENCE",70,"cd_PLENARY_INDULGENCE",{rscType:"CONFESSION",applicationDelay:.8,cooldown:60});yl("TEMPERANCE",80,"cd_TEMPERANCE",{rscType:"TEMPERANCE",applicationDelay:.62,cooldown:120,replaceIf:[{newSkill:"DIVINE_CARESS",condition:e=>e.hasResourceAvailable("DIVINE_GRACE")}],onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_TEMPERANCE")&&e.gainStatus("DIVINE_GRACE")}});yl("LITURGY_OF_THE_BELL",90,"cd_LITURGY_OF_THE_BELL",{rscType:"LITURGY_OF_THE_BELL",applicationDelay:0,cooldown:180,replaceIf:[{newSkill:"LITURGY_POP",condition:e=>e.hasResourceAvailable("LITURGY_OF_THE_BELL")}]});bs("LITURGY_TRIGGER",90,"cd_LITURGY_TRIGGER",{applicationDelay:0,cooldown:1,isPetHeal:!0,healingPotency:425,animationLock:ma,validateAttempt:e=>e.hasResourceAvailable("LITURGY_OF_THE_BELL"),highlightIf:e=>e.hasResourceAvailable("LITURGY_OF_THE_BELL"),onConfirm:e=>e.tryConsumeResource("LITURGY_OF_THE_BELL")});bs("LITURGY_POP",90,"cd_LITURGY_POP",{startOnHotbar:!1,applicationDelay:0,cooldown:1,isPetHeal:!0,healingPotency:e=>212*e.resources.get("LITURGY_OF_THE_BELL").availableAmount(),validateAttempt:e=>e.hasResourceAvailable("LITURGY_OF_THE_BELL"),highlightIf:e=>e.hasResourceAvailable("LITURGY_OF_THE_BELL"),onConfirm:e=>e.tryConsumeResource("LITURGY_OF_THE_BELL",!0)});yl("DIVINE_CARESS",100,"cd_DIVINE_CARESS",{startOnHotbar:!1,rscType:"DIVINE_CARESS",applicationDelay:0,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("DIVINE_GRACE"),highlightIf:e=>e.hasResourceAvailable("DIVINE_GRACE"),onConfirm:e=>e.tryConsumeResource("DIVINE_GRACE"),onApplication:e=>{e.resources.addResourceEvent({rscType:"DIVINE_CARESS",name:"trigger divine aura on divine caress expiry",delay:10,fnOnRsc:()=>e.gainStatus("DIVINE_AURA")})}});Object.keys(YR).forEach(e=>zt(e,`NIN/${Ge[e].name}.png`));const UO=["DOKUMORI","TRICK_ATTACK","KUNAIS_BANE"],KB=Object.keys(YR).filter(e=>!UO.includes(e));class VB extends Xt{jobSpecificOtherTargetedBuffViewProps(){return[...UO.flatMap(t=>this.makeTargetedTimers(t))]}jobSpecificSelfTargetedBuffViewProps(){return KB.map(t=>t==="HIDDEN"?this.makeCommonTimerless(t):this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){const a=this.state.resources,o=a.get("NIN_COMBO_TRACKER"),s=a.get("NIN_AOE_COMBO_TRACKER"),c=a.get("KAZEMATOI").availableAmount(),d=a.get("NINKI").availableAmount(),f=o.available(1)?o.pendingChange?.timeTillEvent:s.available(1)?s.pendingChange?.timeTillEvent:void 0;return[{kind:"bar",name:N({en:"Combo Timer",zh:""}),color:t.nin.ninComboTimer,progress:f?f/30:0,valueString:f?.toFixed(3)??"N/A"},{kind:"counter",name:Ke("KAZEMATOI"),color:t.nin.kazematoi,currentStacks:c,maxStacks:5},{kind:"bar",name:Ke("NINKI"),color:t.nin.ninki,progress:d/100,valueString:d.toFixed(0)}]}}const hn=(e,t,a)=>{Ve("NIN",e,t,a??{})};hn("KAZEMATOI",5,{warnOnOvercap:!0});hn("NINKI",100,{warnOnOvercap:!0});hn("SHADE_SHIFT",1,{timeout:20});hn("MUDRA",1,{timeout:6});hn("HIDDEN",1);hn("TRICK_ATTACK",1,{timeout:15.77});hn("KASSATSU",1,{timeout:15,warnOnTimeout:!0});hn("DOKUMORI",1,{timeout:21});hn("TENRI_JINDO_READY",1,{timeout:30,warnOnTimeout:!0});hn("TEN_CHI_JIN",1,{timeout:6});hn("MEISUI",1,{timeout:30});hn("SHADOW_WALKER",1,{timeout:20});hn("BUNSHIN",5,{timeout:30,warnOnTimeout:!0});hn("PHANTOM_KAMAITACHI_READY",1,{timeout:45,warnOnTimeout:!0});hn("RAIJU_READY",3,{timeout:30,warnOnTimeout:!0});hn("KUNAIS_BANE",1,{timeout:16.25});hn("HIGI",1,{timeout:30});hn("DOTON",1,{timeout:18});hn("NIN_COMBO_TRACKER",2,{timeout:30});hn("NIN_AOE_COMBO_TRACKER",1,{timeout:30});hn("MUDRA_TRACKER",1e4);hn("BUNNY",1);const WB=["SPINNING_EDGE","GUST_SLASH","AEOLIAN_EDGE","ARMOR_CRUSH","THROWING_DAGGER","DEATH_BLOSSOM","HAKKE_MUJINSATSU","FORKED_RAIJU","FLEETING_RAIJU"];class XB extends qt{constructor(t){super(t);const a=this.hasTraitUnlocked("ENHANCED_SHUKUCHI_II")?2:1;this.cooldowns.set(new Ue("cd_SHUKUCHI",60,a,a)),this.registerRecurringEvents([{groupedEffects:[{effectName:"DOTON",appliedBy:["DOTON","DOTON_CHI"],isGroundTargeted:!0}]}])}jobSpecificAddDamageBuffCovers(t,a){t.targetList.forEach(o=>{this.hasDebuffActive("DOKUMORI",o)&&t.addBuff(H.Dokumori),this.hasDebuffActive("TRICK_ATTACK",o)&&t.addBuff(H.TrickAttack),this.hasDebuffActive("KUNAIS_BANE",o)&&t.addBuff(H.KunaisBane)}),this.hasResourceAvailable("BUNSHIN")&&WB.includes(a.name)&&t.addBuff(H.Bunshin)}inherentSpeedModifier(){return 15}get statusPropsGenerator(){return new VB(this)}stackRaijuReady(){this.resources.get("RAIJU_READY").gain(1),this.enqueueResourceDrop("RAIJU_READY")}gainNinki(t){this.resources.get("NINKI").gain(t)}processComboStatus(t){if(["THROWING_DAGGER","FORKED_RAIJU","FLEETING_RAIJU","PHANTOM_KAMAITACHI"].includes(t))return;let a=[this.resources.get("NIN_COMBO_TRACKER").availableAmount(),this.resources.get("NIN_AOE_COMBO_TRACKER").availableAmount()];t==="SPINNING_EDGE"?a=[1,0]:t==="GUST_SLASH"&&a[0]===1?a=[2,0]:t==="DEATH_BLOSSOM"?a=[0,1]:a=[0,0],this.setComboState("NIN_COMBO_TRACKER",a[0]),this.setComboState("NIN_AOE_COMBO_TRACKER",a[1])}parseMudraTracker(){if(this.hasResourceAvailable("BUNNY"))return;const t=this.resources.get("MUDRA_TRACKER").availableAmount();if(t===0)return[];if(t<10)return console.assert(t<4,`mudra tracker value ${t} was invalid`),[t];if(t<100)return console.assert(t%10!==0,`mudra tracker value ${t} was invalid`),[Math.floor(t/10),t%10];if(t<1e3)return[Math.floor(t/100),Math.floor(t/10)%10,t%10]}isMudraTrackerIn(t){const a=this.parseMudraTracker();return a!==void 0&&t.some(o=>a.length===o.length&&a.every((s,c)=>o[c]===s))}clearMudraInfo(){this.tryConsumeResource("MUDRA"),this.tryConsumeResource("KASSATSU"),this.resources.get("MUDRA_TRACKER").overrideCurrentValue(0),this.resources.get("BUNNY").overrideCurrentValue(0)}pushMudra(t,a){const o=this.resources.get("MUDRA_TRACKER"),s=o.availableAmount();if(s===0&&!a&&(console.assert(this.resources.get("MUDRA_TRACKER").availableAmount()===0),console.assert(this.resources.get("BUNNY").availableAmount()===0),this.gainStatus("MUDRA"),this.resources.get("MUDRA").removeTimer(),this.resources.addResourceEvent({rscType:"MUDRA",name:"clear mudra tracker/bunny",delay:Ut("NIN","MUDRA").maxTimeout,fnOnRsc:()=>this.clearMudraInfo()})),s>1e3)return;const c=s*10+t;o.overrideCurrentValue(c),a&&c>100&&(this.tryConsumeResource("TEN_CHI_JIN"),this.clearMudraInfo())}}const _N=e=>!e.hasResourceAvailable("TEN_CHI_JIN"),qT=e=>{e.hasResourceAvailable("MUDRA")&&e.gainStatus("BUNNY")},ZT=e=>e===void 0?_N:t=>_N(t)&&e(t),nc=(e,t)=>{const a=new Map;return t.targetList.forEach(o=>{const s=[];e.hasDebuffActive("DOKUMORI",o)&&s.push(J.Dokumori),e.hasDebuffActive("TRICK_ATTACK",o)&&s.push(J.TrickAttack),e.hasDebuffActive("KUNAIS_BANE",o)&&s.push(J.KunaisBane),s.length>0&&a.set(o,s)}),a},io=(e,t,a)=>on("NIN",e,t,{...a,recastTime:o=>o.config.adjustedSksGCD(2.5,o.inherentSpeedModifier()),validateAttempt:ZT(a.validateAttempt),onConfirm:Le(qT,(o,s)=>a.onConfirm?.(o,s),o=>{e!=="PHANTOM_KAMAITACHI"&&o.tryConsumeResource("BUNSHIN")&&o.gainNinki(5)},["THROWING_DAGGER","PHANTOM_KAMAITACHI","FORKED_RAIJU","FLEETING_RAIJU"].includes(e)?void 0:o=>o.tryConsumeResource("RAIJU_READY",!0)&&I.reportWarning({kind:"overwrite",rsc:"RAIJU_READY"}),o=>o.processComboStatus(e)),jobPotencyModifiers:o=>{const s=a.jobPotencyModifiers?.(o)??[];return o.hasResourceAvailable("BUNSHIN")&&e!=="PHANTOM_KAMAITACHI"&&(e==="DEATH_BLOSSOM"||e==="HAKKE_MUJINSATSU"?s.push(J.BunshinAOE):s.push(J.BunshinST)),s},jobTargetPotencyModifiers:nc}),oo=(e,t,a,o)=>at("NIN",e,t,a,{...o,validateAttempt:ZT(o.validateAttempt),onConfirm:Le(qT,(s,c)=>o.onConfirm?.(s,c)),jobTargetPotencyModifiers:nc}),ku=(e,t,a,o)=>Ye("NIN",e,t,a,{...o,validateAttempt:ZT(o.validateAttempt),onConfirm:Le(qT,(s,c)=>o.onConfirm?.(s,c))});io("THROWING_DAGGER",15,{applicationDelay:.62,potency:[["NEVER",120],["MELEE_MASTERY_II_NIN",200]],onConfirm:e=>e.gainNinki(5)});io("SPINNING_EDGE",1,{applicationDelay:.4,potency:[["NEVER",180],["MELEE_MASTERY_II_NIN",220],["MELEE_MASTERY_III_NIN",300]],onConfirm:e=>e.gainNinki(5)});io("GUST_SLASH",4,{applicationDelay:.4,potency:[["NEVER",100],["MELEE_MASTERY_NIN",120],["MELEE_MASTERY_II_NIN",160],["MELEE_MASTERY_III_NIN",240]],combo:{potency:[["NEVER",260],["MELEE_MASTERY_NIN",280],["MELEE_MASTERY_II_NIN",320],["MELEE_MASTERY_III_NIN",400]],resource:"NIN_COMBO_TRACKER",resourceValue:1},highlightIf:e=>e.hasResourceExactly("NIN_COMBO_TRACKER",1),onConfirm:e=>e.hasResourceExactly("NIN_COMBO_TRACKER",1)&&e.gainNinki(5)});const PO=e=>e.gainNinki(e.hasTraitUnlocked("SHUKIHO_III")?15:e.hasTraitUnlocked("SHUKIHO_II")?10:5);io("AEOLIAN_EDGE",26,{applicationDelay:.54,potency:[["NEVER",100],["MELEE_MASTERY_NIN",140],["MELEE_MASTERY_III_NIN",220]],combo:{potency:[["NEVER",340],["MELEE_MASTERY_III_NIN",400]],resource:"NIN_COMBO_TRACKER",resourceValue:2},positional:{potency:[["NEVER",160],["MELEE_MASTERY_NIN",200],["MELEE_MASTERY_III_NIN",280]],comboPotency:[["NEVER",400],["MELEE_MASTERY_III_NIN",460]],location:"rear"},highlightIf:e=>e.hasResourceExactly("NIN_COMBO_TRACKER",2),onConfirm:PO,jobPotencyModifiers:e=>e.tryConsumeResource("KAZEMATOI")?[J.Kazematoi]:[]});io("ARMOR_CRUSH",54,{applicationDelay:.62,potency:[["NEVER",100],["MELEE_MASTERY_NIN",140],["MELEE_MASTERY_III_NIN",240]],combo:{potency:[["NEVER",320],["MELEE_MASTERY_NIN",360],["MELEE_MASTERY_III_NIN",440]],resource:"NIN_COMBO_TRACKER",resourceValue:2},positional:{potency:[["NEVER",160],["MELEE_MASTERY_NIN",200],["MELEE_MASTERY_III_NIN",300]],comboPotency:[["NEVER",380],["MELEE_MASTERY_NIN",420],["MELEE_MASTERY_III_NIN",500]],location:"flank"},highlightIf:e=>e.hasResourceExactly("NIN_COMBO_TRACKER",2),onConfirm:Le(e=>{e.hasResourceExactly("NIN_COMBO_TRACKER",2)&&e.resources.get("KAZEMATOI").gain(2)},PO)});io("DEATH_BLOSSOM",38,{applicationDelay:.71,potency:100,falloff:0,onConfirm:e=>e.gainNinki(5)});io("HAKKE_MUJINSATSU",52,{applicationDelay:.62,potency:100,combo:{potency:120,resource:"NIN_AOE_COMBO_TRACKER",resourceValue:1},falloff:0,highlightIf:e=>e.hasResourceExactly("NIN_AOE_COMBO_TRACKER",1),onConfirm:e=>e.hasResourceExactly("NIN_AOE_COMBO_TRACKER",1)&&e.gainNinki(5),jobPotencyModifiers:e=>e.hasResourceExactly("NIN_AOE_COMBO_TRACKER",1)&&e.hasResourceAvailable("DOTON")?[J.HollowNozuchi]:[]});const Hr=e=>e.hasResourceAvailable("TEN_CHI_JIN")&&e.isMudraTrackerIn([[]]),wO=e=>e.hasResourceAvailable("TEN_CHI_JIN")&&e.isMudraTrackerIn([[2],[3]]),GO=e=>e.hasResourceAvailable("TEN_CHI_JIN")&&e.isMudraTrackerIn([[1],[3]]),BO=e=>e.hasResourceAvailable("TEN_CHI_JIN")&&e.isMudraTrackerIn([[1],[2]]),FO=e=>e.hasResourceAvailable("TEN_CHI_JIN")&&e.isMudraTrackerIn([[3,2],[2,3]]),jO=e=>e.hasResourceAvailable("TEN_CHI_JIN")&&e.isMudraTrackerIn([[1,3],[3,1]]),zO=e=>e.hasResourceAvailable("TEN_CHI_JIN")&&e.isMudraTrackerIn([[1,2],[2,1]]),YO=[{newSkill:"TEN",condition:e=>!e.hasResourceAvailable("TEN_CHI_JIN")},{newSkill:"FUMA_SHURIKEN_TEN",condition:Hr},{newSkill:"KATON_TEN",condition:wO},{newSkill:"HUTON_TEN",condition:FO}],QT=[{newSkill:"CHI",condition:e=>!e.hasResourceAvailable("TEN_CHI_JIN")},{newSkill:"FUMA_SHURIKEN_CHI",condition:Hr},{newSkill:"RAITON_CHI",condition:GO},{newSkill:"DOTON_CHI",condition:jO}],KO=[{newSkill:"JIN",condition:e=>!e.hasResourceAvailable("TEN_CHI_JIN")},{newSkill:"FUMA_SHURIKEN_JIN",condition:Hr},{newSkill:"HYOTON_JIN",condition:BO},{newSkill:"SUITON_JIN",condition:zO}],VO=[["FUMA_SHURIKEN",30,.89,[["NEVER",450],["MELEE_MASTERY_III_NIN",500]],void 0],["KATON",35,.94,350,0],["RAITON",35,.71,[["NEVER",650],["MELEE_MASTERY_III_NIN",740]],void 0],["HYOTON",45,1.16,350,void 0],["HUTON",45,.98,240,0],["SUITON",45,.98,[["NEVER",500],["MELEE_MASTERY_III_NIN",580]],void 0],["GOKA_MEKKYAKU",76,.76,850,0],["HYOSHO_RANRYU",76,.62,1300,void 0]],qB=new Map(VO.map(([e,t,a,o,s])=>[e,[t,a,o,s]])),ZB=[["FUMA_SHURIKEN_TEN",Hr],["FUMA_SHURIKEN_CHI",Hr],["FUMA_SHURIKEN_JIN",Hr],["KATON_TEN",wO],["RAITON_CHI",GO],["HYOTON_JIN",BO],["HUTON_TEN",FO],["SUITON_JIN",zO]];ZB.forEach(([e,t])=>{const[,a,o,s]=qB.get(e.substring(0,e.length-4)),c=e.substring(e.length-3);on("NIN",e,70,{startOnHotbar:!1,applicationDelay:a,recastTime:e==="HUTON_TEN"||e==="SUITON_JIN"?1.5:1,potency:o,falloff:s,replaceIf:c==="TEN"?YO:c==="CHI"?QT:KO,validateAttempt:t,jobPotencyModifiers:f=>{const h=[];return e==="KATON"&&f.hasResourceAvailable("DOTON")&&h.push(J.HollowNozuchi),h},jobTargetPotencyModifiers:nc,onConfirm:Le(f=>f.pushMudra(c==="TEN"?1:c==="CHI"?2:3,!0),e==="RAITON_CHI"?f=>f.stackRaijuReady():e==="SUITON_JIN"||e==="HUTON_TEN"?f=>f.gainStatus("SHADOW_WALKER"):void 0)})});const WO=(e,t)=>{e.applyDoT("DOTON",t),e.gainStatus("DOTON")};on("NIN","DOTON_CHI",70,{startOnHotbar:!1,recastTime:1.5,replaceIf:QT,falloff:0,validateAttempt:jO,jobTargetPotencyModifiers:nc,onConfirm:Le((e,t)=>{e.addDoTPotencies({node:t,effectName:"DOTON",skillName:"DOTON",tickPotency:80,speedStat:"sks"})},e=>e.pushMudra(2,!0)),onApplication:WO});[["TEN",30,YO],["CHI",35,QT],["JIN",45,KO]].forEach(([e,t,a],o)=>{on("NIN",e,t,{recastTime:.5,animationLock:.5,replaceIf:a,secondaryCooldown:{cdName:"cd_MUDRA",cooldown:20,maxCharges:2},jobTargetPotencyModifiers:nc,validateAttempt:s=>!s.hasResourceAvailable("TEN_CHI_JIN"),onConfirm:s=>s.pushMudra(o+1,!1)})});const QB=e=>e.hasTraitUnlocked("ENHANCED_KASSATSU")&&e.hasResourceAvailable("KASSATSU")&&e.isMudraTrackerIn([[2,1],[3,1]]),$B=e=>e.hasTraitUnlocked("ENHANCED_KASSATSU")&&e.hasResourceAvailable("KASSATSU")&&e.isMudraTrackerIn([[1,3],[2,3]]),JB=e=>e.hasResourceAvailable("MUDRA")&&e.isMudraTrackerIn([[1],[2],[3]]),e2=e=>(!e.hasTraitUnlocked("ENHANCED_KASSATSU")||!e.hasResourceAvailable("KASSATSU"))&&e.hasResourceAvailable("MUDRA")&&e.isMudraTrackerIn([[2,1],[3,1]]),t2=e=>e.hasResourceAvailable("MUDRA")&&e.isMudraTrackerIn([[1,2],[3,2]]),n2=e=>(!e.hasTraitUnlocked("ENHANCED_KASSATSU")||!e.hasResourceAvailable("KASSATSU"))&&e.hasResourceAvailable("MUDRA")&&e.isMudraTrackerIn([[1,3],[2,3]]),a2=e=>e.hasResourceAvailable("MUDRA")&&e.isMudraTrackerIn([[3,2,1],[2,3,1]]),i2=e=>e.hasResourceAvailable("MUDRA")&&e.isMudraTrackerIn([[1,3,2],[3,1,2]]),o2=e=>e.hasResourceAvailable("MUDRA")&&e.isMudraTrackerIn([[1,2,3],[2,1,3]]),l2=e=>e.hasResourceAvailable("MUDRA")&&(e.hasResourceAvailable("BUNNY")||!e.isMudraTrackerIn([[1],[2],[3],[2,1],[3,1],[1,2],[3,2],[1,3],[2,3],[3,2,1],[2,3,1],[1,3,2],[3,1,2],[1,2,3],[2,1,3]])),Yf=[{newSkill:"GOKA_MEKKYAKU",condition:QB},{newSkill:"HYOSHO_RANRYU",condition:$B},{newSkill:"FUMA_SHURIKEN",condition:JB},{newSkill:"KATON",condition:e2},{newSkill:"RAITON",condition:t2},{newSkill:"HYOTON",condition:n2},{newSkill:"HUTON",condition:a2},{newSkill:"DOTON",condition:i2},{newSkill:"SUITON",condition:o2},{newSkill:"RABBIT_MEDIUM",condition:e=>e.hasResourceAvailable("MUDRA")&&(e.hasResourceAvailable("BUNNY")||l2(e))},{newSkill:"NINJUTSU",condition:e=>!e.hasResourceAvailable("MUDRA")}],Kf=e=>Yf.filter(t=>t.newSkill!==e);on("NIN","NINJUTSU",30,{recastTime:1.5,validateAttempt:e=>!1,replaceIf:Kf("NINJUTSU")});on("NIN","RABBIT_MEDIUM",30,{startOnHotbar:!1,recastTime:1.5,replaceIf:Kf("RABBIT_MEDIUM"),validateAttempt:Yf.find(e=>e.newSkill==="RABBIT_MEDIUM").condition,onConfirm:e=>e.clearMudraInfo()});VO.forEach(([e,t,a,o,s])=>{on("NIN",e,t,{startOnHotbar:!1,applicationDelay:a,recastTime:c=>c.hasResourceAvailable("TEN_CHI_JIN")?1:1.5,potency:o,falloff:s,replaceIf:Kf(e),validateAttempt:Yf.find(c=>c.newSkill===e).condition,onConfirm:Le(["KATON","RAITON","HYOTON"].includes(e)?c=>{c.cooldowns.get("cd_SHUKUCHI").timeTillNextStackAvailable()!==0&&c.cooldowns.get("cd_SHUKUCHI").restore(60)}:void 0,e==="RAITON"?c=>c.stackRaijuReady():e==="SUITON"||e==="HUTON"?c=>c.gainStatus("SHADOW_WALKER"):void 0,c=>c.clearMudraInfo()),jobPotencyModifiers:c=>{const d=[];return c.hasResourceAvailable("KASSATSU")&&d.push(J.Kassatsu),c.hasResourceAvailable("DOTON")&&["KATON","GOKA_MEKKYAKU"].includes(e)&&d.push(J.HollowNozuchi),d},jobTargetPotencyModifiers:nc})});on("NIN","DOTON",45,{startOnHotbar:!1,recastTime:e=>e.hasResourceAvailable("TEN_CHI_JIN")?1:1.5,potency:0,falloff:0,replaceIf:Kf("DOTON"),validateAttempt:Yf.find(e=>e.newSkill==="DOTON").condition,onConfirm:Le((e,t)=>{e.addDoTPotencies({node:t,effectName:"DOTON",skillName:"DOTON",tickPotency:80,speedStat:"sks"})},e=>e.clearMudraInfo()),onApplication:WO});const sf=e=>e.hasResourceAvailable("RAIJU_READY"),XO=[["NEVER",560],["MELEE_MASTERY_III_NIN",700]];io("FORKED_RAIJU",90,{applicationDelay:.62,potency:XO,animationLock:Wt,highlightIf:sf,validateAttempt:sf,onConfirm:e=>{e.gainNinki(5),e.tryConsumeResource("RAIJU_READY")}});io("FLEETING_RAIJU",90,{applicationDelay:.76,potency:XO,highlightIf:sf,validateAttempt:sf,onConfirm:e=>{e.gainNinki(5),e.tryConsumeResource("RAIJU_READY")}});oo("DOKUMORI",66,"cd_DOKUMORI",{applicationDelay:1.07,potency:400,falloff:0,cooldown:120,onConfirm:(e,t)=>{e.gainDebuff("DOKUMORI",t.targetList),e.gainNinki(40),e.hasTraitUnlocked("ENHANCED_DOKUMORI")&&e.gainStatus("HIGI")}});const rf=e=>e.hasResourceAvailable("HIDDEN")||e.hasResourceAvailable("SHADOW_WALKER");oo("TRICK_ATTACK",18,"cd_TRICK_ATTACK",{autoUpgrade:{trait:"TRICK_ATTACK_MASTERY",otherSkill:"KUNAIS_BANE"},applicationDelay:.8,potency:300,positional:{potency:400,location:"rear"},cooldown:60,highlightIf:rf,validateAttempt:rf,onConfirm:(e,t)=>{e.gainDebuff("TRICK_ATTACK",[t.targetList[0]]),e.tryConsumeResource("SHADOW_WALKER")}});oo("KUNAIS_BANE",92,"cd_TRICK_ATTACK",{autoDowngrade:{trait:"TRICK_ATTACK_MASTERY",otherSkill:"TRICK_ATTACK"},startOnHotbar:!1,applicationDelay:1.29,cooldown:60,potency:700,falloff:0,highlightIf:rf,validateAttempt:rf,onConfirm:(e,t)=>{e.gainDebuff("KUNAIS_BANE",t.targetList),e.tryConsumeResource("SHADOW_WALKER")}});oo("DREAM_WITHIN_A_DREAM",56,"cd_DREAM_WITHIN_A_DREAM",{applicationDelay:.98,cooldown:60,potency:180*3});ku("KASSATSU",50,"cd_KASSATSU",{rscType:"KASSATSU",cooldown:60,applicationDelay:0,validateAttempt:e=>!e.hasResourceAvailable("TEN_CHI_JIN")});const Ji=e=>e.resources.get("NINKI").available(50),Uu=e=>e.resources.get("NINKI").consume(50);oo("BHAVACAKRA",68,"cd_BHAVACAKRA",{applicationDelay:.62,cooldown:1,potency:[["NEVER",350],["MELEE_MASTERY_III_NIN",400]],highlightIf:Ji,validateAttempt:Ji,replaceIf:[{newSkill:"ZESHO_MEPPO",condition:e=>e.hasResourceAvailable("HIGI")}],onConfirm:Le(Uu,e=>e.tryConsumeResource("MEISUI")),jobPotencyModifiers:e=>e.hasResourceAvailable("MEISUI")?[J.Meisui]:[]});oo("ZESHO_MEPPO",96,"cd_BHAVACAKRA",{startOnHotbar:!1,applicationDelay:1.03,cooldown:1,potency:700,highlightIf:e=>e.hasResourceAvailable("HIGI")&&Ji(e),validateAttempt:e=>e.hasResourceAvailable("HIGI")&&Ji(e),replaceIf:[{newSkill:"BHAVACAKRA",condition:e=>!e.hasResourceAvailable("HIGI")}],onConfirm:Le(Uu,e=>{e.tryConsumeResource("MEISUI"),e.tryConsumeResource("HIGI")}),jobPotencyModifiers:e=>e.hasResourceAvailable("MEISUI")?[J.Meisui]:[]});oo("HELLFROG_MEDIUM",62,"cd_BHAVACAKRA",{applicationDelay:.8,cooldown:1,potency:250,falloff:0,highlightIf:Ji,validateAttempt:Ji,replaceIf:[{newSkill:"DEATHFROG_MEDIUM",condition:e=>e.hasResourceAvailable("HIGI")}],onConfirm:Uu});oo("DEATHFROG_MEDIUM",96,"cd_BHAVACAKRA",{startOnHotbar:!1,applicationDelay:.8,cooldown:1,potency:400,falloff:0,highlightIf:e=>e.hasResourceAvailable("HIGI")&&Ji(e),validateAttempt:e=>e.hasResourceAvailable("HIGI")&&Ji(e),onConfirm:Le(Uu,e=>e.tryConsumeResource("HIGI"))});ku("MEISUI",72,"cd_MEISUI",{rscType:"MEISUI",cooldown:120,applicationDelay:0,highlightIf:e=>e.hasResourceAvailable("SHADOW_WALKER"),validateAttempt:e=>e.hasResourceAvailable("SHADOW_WALKER"),onConfirm:e=>{e.tryConsumeResource("SHADOW_WALKER"),e.gainNinki(50)}});ku("BUNSHIN",80,"cd_BUNSHIN",{rscType:"BUNSHIN",cooldown:90,applicationDelay:0,replaceIf:[{newSkill:"PHANTOM_KAMAITACHI",condition:e=>e.hasResourceAvailable("PHANTOM_KAMAITACHI_READY")}],highlightIf:Ji,validateAttempt:Ji,onConfirm:Le(Uu,e=>e.gainStatus("PHANTOM_KAMAITACHI_READY"))});io("PHANTOM_KAMAITACHI",80,{startOnHotbar:!1,potency:700,falloff:0,applicationDelay:1.57,highlightIf:e=>e.hasResourceAvailable("PHANTOM_KAMAITACHI_READY"),validateAttempt:e=>e.hasResourceAvailable("PHANTOM_KAMAITACHI_READY"),onConfirm:e=>{e.tryConsumeResource("PHANTOM_KAMAITACHI_READY"),e.gainNinki(10)},jobPotencyModifiers:e=>e.hasResourceAvailable("DOTON")?[J.HollowNozuchi,J.NinPet]:[J.NinPet]});ku("TEN_CHI_JIN",70,"cd_TEN_CHI_JIN",{rscType:"TEN_CHI_JIN",applicationDelay:0,cooldown:120,replaceIf:[{newSkill:"TENRI_JINDO",condition:e=>e.hasResourceAvailable("TENRI_JINDO_READY")}],validateAttempt:e=>!e.hasResourceAvailable("KASSATSU"),onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_TEN_CHI_JIN")&&e.gainStatus("TENRI_JINDO_READY"),e.clearMudraInfo()}});oo("TENRI_JINDO",100,"cd_TENRI_JINDO",{startOnHotbar:!1,applicationDelay:1.69,cooldown:1,potency:1100,falloff:0,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("TENRI_JINDO_READY"),onConfirm:e=>e.tryConsumeResource("TENRI_JINDO_READY")});oo("SHUKUCHI",40,"cd_SHUKUCHI",{applicationDelay:0,cooldown:60,maxCharges:2,animationLock:Wt});ku("SHADE_SHIFT",2,"cd_SHADE_SHIFT",{rscType:"SHADE_SHIFT",applicationDelay:.4,cooldown:120});Object.keys(zR).forEach(e=>zt(e,`MNK/${ZN[e].name}.png`));function s2(e){switch(e){case 1:return"opo";case 2:return"raptor";case 3:return"coeurl"}return null}function r2(e){switch(e){case"opo":return N({en:"o",zh:""});case"raptor":return N({en:"r",zh:""});case"coeurl":return N({en:"c",zh:""})}return null}function pN(e){switch(e){case"lunar":return N({en:e,zh:""});case"solar":return N({en:e,zh:""})}return null}class c2 extends Xt{jobSpecificSelfTargetedBuffViewProps(){return Object.keys(zR).map(t=>this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){const a=this.state.resources,o=["BEAST_CHAKRA_1","BEAST_CHAKRA_2","BEAST_CHAKRA_3"].map(m=>a.get(m).availableAmount()).map(s2),s=a.get("LUNAR_NADI").available(1),c=a.get("SOLAR_NADI").available(1),d=o.map(r2).filter(m=>m!==null).join("+"),f=[pN(s?"lunar":null),pN(c?"solar":null)].filter(m=>m!==null).join("+");return[{kind:"counter",name:Ke("OPO_OPOS_FURY"),color:t.mnk.opo,currentStacks:a.get("OPO_OPOS_FURY").availableAmount(),maxStacks:1},{kind:"counter",name:Ke("RAPTORS_FURY"),color:t.mnk.raptor,currentStacks:a.get("RAPTORS_FURY").availableAmount(),maxStacks:1},{kind:"counter",name:Ke("COEURLS_FURY"),color:t.mnk.coeurl,currentStacks:a.get("COEURLS_FURY").availableAmount(),maxStacks:2},{kind:"chakra",name:Ke("CHAKRA"),regularColor:t.mnk.chakra,overflowColor:t.mnk.extraChakra,value:a.get("CHAKRA").availableAmount(),wrapCount:5},{kind:"text",name:Ke("BEAST_CHAKRA_TIMER"),text:o.every(m=>m!==null)?a.get("BEAST_CHAKRA_1").pendingChange?.timeTillEvent.toFixed(3):"n/a"},{kind:"beast",name:Ke("BEAST_CHAKRA"),label:d,chakras:o,opoColor:t.mnk.opo,raptorColor:t.mnk.raptor,coeurlColor:t.mnk.coeurl},{kind:"nadi",name:Ke("NADI"),label:f,lunar:s,solar:c,lunarColor:t.mnk.lunar,solarColor:t.mnk.solar}]}}const Lt=(e,t,a)=>{Ve("MNK",e,t,a??{})};Lt("CHAKRA",5,{default:5});Lt("BEAST_CHAKRA",1);Lt("NADI",1);Lt("OPO_OPOS_FURY",1,{warnOnOvercap:!0});Lt("RAPTORS_FURY",1,{warnOnOvercap:!0});Lt("COEURLS_FURY",2,{warnOnOvercap:!0});Lt("MANTRA",1,{timeout:15});Lt("OPO_OPO_FORM",1,{timeout:30});Lt("RAPTOR_FORM",1,{timeout:30});Lt("COEURL_FORM",1,{timeout:30});Lt("PERFECT_BALANCE",3,{timeout:20});Lt("FORMLESS_FIST",1,{timeout:30,default:1});Lt("RIDDLE_OF_EARTH",1,{timeout:10});Lt("EARTHS_RESOLVE",1,{timeout:15});Lt("EARTHS_RUMINATION",1,{timeout:30});Lt("RIDDLE_OF_FIRE",1,{timeout:20.72});Lt("FIRES_RUMINATION",1,{timeout:20,warnOnTimeout:!0});Lt("BROTHERHOOD",1,{timeout:20});Lt("MEDITATIVE_BROTHERHOOD",1,{timeout:20});Lt("RIDDLE_OF_WIND",1,{timeout:15.78});Lt("WINDS_RUMINATION",1,{timeout:15,warnOnTimeout:!0});Lt("SIX_SIDED_STAR",1,{timeout:5});const _l=["BEAST_CHAKRA_1","BEAST_CHAKRA_2","BEAST_CHAKRA_3"];Lt("BEAST_CHAKRA_1",3);Lt("BEAST_CHAKRA_2",3);Lt("BEAST_CHAKRA_3",3);Lt("LUNAR_NADI",1);Lt("SOLAR_NADI",1);class u2 extends qt{constructor(t){super(t);const a=this.hasTraitUnlocked("ENHANCED_THUNDERCLAP")?3:2;this.cooldowns.set(new Ue("cd_THUNDERCLAP",30,a,a)),this.registerRecurringEvents()}getForm(){if(this.hasResourceAvailable("OPO_OPO_FORM"))return"opo";if(this.hasResourceAvailable("RAPTOR_FORM"))return"raptor";if(this.hasResourceAvailable("COEURL_FORM"))return"coeurl"}setForm(t){["OPO_OPO_FORM","RAPTOR_FORM","COEURL_FORM","FORMLESS_FIST"].forEach(o=>this.tryConsumeResource(o));const a=t==="opo"?"OPO_OPO_FORM":t==="raptor"?"RAPTOR_FORM":t==="coeurl"?"COEURL_FORM":"FORMLESS_FIST";this.gainStatus(a)}canDoForm(t){return this.hasResourceAvailable("PERFECT_BALANCE")||this.hasResourceAvailable("FORMLESS_FIST")||this.getForm()===t}gainChakra(){this.resources.get("CHAKRA").gain(1)}maybeGainChakra(t){if(this.hasResourceAvailable("MEDITATIVE_BROTHERHOOD"))for(let s=0;s<this.resources.get("PARTY_SIZE").availableAmount()-1;s++)this.triggersEffect(.2,!0)&&this.gainChakra();if(this.hasTraitUnlocked("ENHANCED_BROTHERHOOD")&&this.hasResourceAvailable("MEDITATIVE_BROTHERHOOD")){this.gainChakra();return}const a=t?1:this.config.critRate,o=this.triggersEffect(a,!0);if(t||o){const s=this.hasTraitUnlocked("DEEP_MEDITATION_II")?1:.8,c=this.triggersEffect(s);(s===1||c)&&this.gainChakra()}}consumeFiveChakra(){const t=this.resources.get("CHAKRA");t.consume(Math.min(t.availableAmount(),5))}startPB(){["OPO_OPO_FORM","RAPTOR_FORM","COEURL_FORM","FORMLESS_FIST"].forEach(t=>this.tryConsumeResource(t)),this.gainStatus("PERFECT_BALANCE")}jobSpecificAddDamageBuffCovers(t,a){this.hasResourceAvailable("RIDDLE_OF_FIRE")&&t.addBuff(H.RiddleOfFire),this.hasResourceAvailable("BROTHERHOOD")&&t.addBuff(H.Brotherhood)}inherentSpeedModifier(){return this.hasTraitUnlocked("ENHANCED_GREASED_LIGHTNING_III")?20:15}get statusPropsGenerator(){return new c2(this)}}const Vn=(e,t,a)=>{const o=a.form?s=>a.form.requiredForm===void 0||s.canDoForm(a.form.requiredForm):void 0;return on("MNK",e,t,{...a,positional:void 0,highlightIf:s=>!o&&!a.ball&&!a.highlightIf?!1:(o?.(s)??!0)&&(a.ball?s.hasResourceAvailable(a.ball.rsc):!0)&&(a.highlightIf?.(s)??!0),validateAttempt:s=>(o?.(s)??!0)&&(a.validateAttempt?.(s)??!0),recastTime:s=>s.config.adjustedSksGCD(a.recastTime??2.5,s.inherentSpeedModifier()),onConfirm:Le(a.onConfirm,e!=="SIX_SIDED_STAR"&&a.potency?(s,c)=>{const d=c.getInitialPotency();d&&s.maybeGainChakra(d.getDisplayedModifiers().includes(J.AutoCrit))}:void 0,a.form?s=>{const c=a.form.nextForm;if(s.tryConsumeResource("PERFECT_BALANCE")){for(const f of _l)if(!s.hasResourceAvailable(f)){let h=3;c==="raptor"?h=1:c==="coeurl"&&(h=2),s.resources.get(f).gain(h),f==="BEAST_CHAKRA_3"&&_l.forEach(m=>s.enqueueResourceDrop(m,20));break}}else s.setForm(c)}:void 0,a.ball?s=>s.tryConsumeResource(a.ball.rsc):void 0),jobPotencyModifiers:s=>{const c=a.jobPotencyModifiers?.(s)??[],d=a.positional&&s.hitPositional(a.positional.location);return s.hasResourceAvailable("BROTHERHOOD")&&c.push(J.Brotherhood),s.hasResourceAvailable("RIDDLE_OF_FIRE")&&c.push(J.RiddleOfFire),a.ball&&s.hasResourceAvailable(a.ball.rsc)?(c.push({kind:"adder",source:U.MNK_BALL,additiveAmount:an(s,a.ball.potency)-an(s,a.potency)}),a.positional&&d&&c.push(Hh(an(s,a.positional.ballPotency)-an(s,a.ball.potency)))):a.positional&&d&&c.push(Hh(an(s,a.positional.potency)-an(s,a.potency))),c}})},Vf=(e,t,a,o)=>at("MNK",e,t,a,{jobPotencyModifiers:s=>{const c=o.jobPotencyModifiers?.(s)??[];return s.hasResourceAvailable("BROTHERHOOD")&&c.push(J.Brotherhood),s.hasResourceAvailable("RIDDLE_OF_FIRE")&&c.push(J.RiddleOfFire),c},...o}),ac=(e,t,a,o)=>Ye("MNK",e,t,a,o);[["BOOTSHINE",1,1.11,[["NEVER",180],["MELEE_MASTERY_MNK",220]]],["LEAPING_OPO",92,.62,260]].forEach(([e,t,a,o],s)=>{Vn(e,t,{...s===0?{autoUpgrade:{otherSkill:"LEAPING_OPO",trait:"BEAST_CHAKRA_MASTERY"}}:{autoDowngrade:{otherSkill:"BOOTSHINE",trait:"BEAST_CHAKRA_MASTERY"}},form:{nextForm:"raptor"},ball:{potency:s===0?[["NEVER",380],["MELEE_MASTERY_MNK",420]]:460,rsc:"OPO_OPOS_FURY"},applicationDelay:a,potency:o,highlightIf:d=>d.canDoForm("opo"),jobPotencyModifiers:d=>d.hasResourceAvailable("OPO_OPOS_FURY")?[J.AutoCrit]:[]})});[["TRUE_STRIKE",4,.8,[["NEVER",260],["MELEE_MASTERY_MNK",300]]],["RISING_RAPTOR",92,.89,340]].forEach(([e,t,a,o],s)=>{Vn(e,t,{...s===0?{autoUpgrade:{otherSkill:"RISING_RAPTOR",trait:"BEAST_CHAKRA_MASTERY"}}:{autoDowngrade:{otherSkill:"TRUE_STRIKE",trait:"BEAST_CHAKRA_MASTERY"}},form:{requiredForm:"raptor",nextForm:"coeurl"},ball:{potency:s===0?[["NEVER",460],["MELEE_MASTERY_MNK",500]]:540,rsc:"RAPTORS_FURY"},applicationDelay:a,potency:o})});[["SNAP_PUNCH",6,.76,[["NEVER",230],["MELEE_MASTERY_MNK",270]]],["POUNCING_COEURL",92,1.02,310]].forEach(([e,t,a,o],s)=>{Vn(e,t,{...s===0?{autoUpgrade:{otherSkill:"POUNCING_COEURL",trait:"BEAST_CHAKRA_MASTERY"}}:{autoDowngrade:{otherSkill:"SNAP_PUNCH",trait:"BEAST_CHAKRA_MASTERY"}},form:{requiredForm:"coeurl",nextForm:"opo"},ball:{potency:s===0?[["NEVER",380],["MELEE_MASTERY_MNK",420]]:460,rsc:"COEURLS_FURY"},positional:{potency:s===0?[["NEVER",290],["MELEE_MASTERY_MNK",330]]:370,ballPotency:s===0?[["NEVER",440],["MELEE_MASTERY_MNK",480]]:520,location:"flank"},applicationDelay:a,potency:o})});Vn("DRAGON_KICK",50,{applicationDelay:1.29,potency:[["NEVER",240],["MELEE_MASTERY_MNK",280],["MELEE_MASTERY_II_MNK",320]],form:{nextForm:"raptor"},highlightIf:e=>e.canDoForm("opo")&&!e.hasResourceAvailable("OPO_OPOS_FURY"),onConfirm:e=>e.resources.get("OPO_OPOS_FURY").gain(1)});Vn("TWIN_SNAKES",18,{applicationDelay:.84,potency:[["NEVER",340],["MELEE_MASTERY_MNK",380],["MELEE_MASTERY_II_MNK",420]],form:{requiredForm:"raptor",nextForm:"coeurl"},highlightIf:e=>!e.hasResourceAvailable("RAPTORS_FURY"),onConfirm:e=>e.resources.get("RAPTORS_FURY").gain(1)});Vn("DEMOLISH",30,{applicationDelay:1.6,potency:[["NEVER",280],["MELEE_MASTERY_MNK",320],["MELEE_MASTERY_II_MNK",360]],form:{requiredForm:"coeurl",nextForm:"opo"},positional:{potency:[["NEVER",340],["MELEE_MASTERY_MNK",380],["MELEE_MASTERY_II_MNK",420]],location:"rear"},highlightIf:e=>!e.hasResourceAvailable("COEURLS_FURY"),onConfirm:e=>e.resources.get("COEURLS_FURY").gain(2)});[["ARM_OF_THE_DESTROYER",26,.54,110],["SHADOW_OF_THE_DESTROYER",82,.4,120]].forEach(([e,t,a,o],s)=>{Vn(e,t,{...s===0?{autoUpgrade:{otherSkill:"SHADOW_OF_THE_DESTROYER",trait:"ARM_OF_THE_DESTROYER_MASTERY"}}:{autoDowngrade:{otherSkill:"ARM_OF_THE_DESTROYER",trait:"ARM_OF_THE_DESTROYER_MASTERY"}},applicationDelay:a,potency:o,falloff:0,form:{nextForm:"raptor"},highlightIf:d=>d.canDoForm("opo"),jobPotencyModifiers:s===1?d=>d.hasResourceAvailable("OPO_OPO_FORM")?[J.AutoCrit]:[]:void 0})});Vn("ROCKBREAKER",30,{applicationDelay:.94,potency:150,falloff:0,form:{requiredForm:"raptor",nextForm:"coeurl"}});Vn("FOUR_POINT_FURY",45,{applicationDelay:.97,potency:140,falloff:0,form:{requiredForm:"coeurl",nextForm:"opo"}});const qO=e=>{const t=_l.map(a=>e.resources.get(a).availableAmount());return e.hasResourceAvailable("LUNAR_NADI")&&e.hasResourceAvailable("SOLAR_NADI")&&t.every(a=>a>0)},$T=e=>{const t=_l.map(s=>e.resources.get(s).availableAmount()),a=t[0];return a>0&&t[1]===a&&t[2]===a&&!(e.hasResourceAvailable("LUNAR_NADI")&&e.hasResourceAvailable("SOLAR_NADI"))},JT=e=>{const t=_l.map(o=>e.resources.get(o).availableAmount()),a=[!1,!1,!1];return t.forEach(o=>{console.assert(o<4,"beast chakra had invalid value"),o<4&&o>0&&(a[o-1]=!0)}),a.every(o=>o)&&t.every(o=>o>0)&&!(e.hasResourceAvailable("LUNAR_NADI")&&e.hasResourceAvailable("SOLAR_NADI"))},ZO=e=>{const t=_l.map(a=>e.resources.get(a).availableAmount());return!$T(e)&&!JT(e)&&t.every(a=>a>0)&&!(e.hasResourceAvailable("LUNAR_NADI")&&e.hasResourceAvailable("SOLAR_NADI"))},d2=e=>!qO(e)&&!$T(e)&&!JT(e)&&!ZO(e),Pu=[{newSkill:"MASTERFUL_BLITZ",condition:d2},{newSkill:"ELIXIR_FIELD",condition:$T},{newSkill:"FLINT_STRIKE",condition:JT},{newSkill:"CELESTIAL_REVOLUTION",condition:ZO},{newSkill:"TORNADO_KICK",condition:qO}],Wf=e=>{_l.forEach(t=>e.tryConsumeResource(t,!0)),e.setForm("formless")},QO=e=>t=>t.resources.get(e==="lunar"?"LUNAR_NADI":"SOLAR_NADI").gain(1);Vn("MASTERFUL_BLITZ",60,{applicationDelay:0,replaceIf:Pu,validateAttempt:e=>!1});[["TORNADO_KICK",60,1.69,1200],["PHANTOM_RUSH",90,.4,1500]].forEach(([e,t,a,o],s)=>{Vn(e,t,{...s===0?{autoUpgrade:{otherSkill:"PHANTOM_RUSH",trait:"TORNADO_KICK_MASTERY"}}:{autoDowngrade:{otherSkill:"TORNADO_KICK",trait:"TORNADO_KICK_MASTERY"}},startOnHotbar:!1,applicationDelay:a,replaceIf:Pu,highlightIf:d=>!0,potency:o,falloff:.35,onConfirm:Le(Wf,d=>{d.tryConsumeResource("LUNAR_NADI"),d.tryConsumeResource("SOLAR_NADI")})})});[["ELIXIR_FIELD",60,1.07,800],["ELIXIR_BURST",92,1.42,900]].forEach(([e,t,a,o],s)=>{Vn(e,t,{...s===0?{autoUpgrade:{otherSkill:"ELIXIR_BURST",trait:"BEAST_CHAKRA_MASTERY"}}:{autoDowngrade:{otherSkill:"ELIXIR_FIELD",trait:"BEAST_CHAKRA_MASTERY"}},startOnHotbar:!1,applicationDelay:a,replaceIf:Pu,highlightIf:d=>!0,potency:o,falloff:.35,onConfirm:Le(Wf,QO("lunar"))})});Vn("CELESTIAL_REVOLUTION",60,{startOnHotbar:!1,applicationDelay:.89,replaceIf:Pu,highlightIf:e=>!0,potency:600,onConfirm:Le(Wf,e=>e.resources.get(e.hasResourceAvailable("LUNAR_NADI")?"SOLAR_NADI":"LUNAR_NADI").gain(1))});[["FLINT_STRIKE",60,.53,800],["RISING_PHOENIX",86,.76,900]].forEach(([e,t,a,o],s)=>{Vn(e,t,{...s===0?{autoUpgrade:{otherSkill:"RISING_PHOENIX",trait:"FLINT_STRIKE_MASTERY"}}:{autoDowngrade:{otherSkill:"FLINT_STRIKE",trait:"FLINT_STRIKE_MASTERY"}},startOnHotbar:!1,applicationDelay:a,replaceIf:Pu,highlightIf:d=>!0,potency:o,falloff:.35,onConfirm:Le(Wf,QO("solar"))})});Vn("SIX_SIDED_STAR",80,{recastTime:5,applicationDelay:.62,potency:[["NEVER",710],["MELEE_MASTERY_II_MNK",780]],onConfirm:e=>{e.tryConsumeResource("CHAKRA",!0),e.gainStatus("SIX_SIDED_STAR")},jobPotencyModifiers:e=>{const t=e.resources.get("CHAKRA").availableAmount();return t>0?[{kind:"adder",additiveAmount:80*t,source:U.SSS_CHAKRA}]:[]}});Vn("FORM_SHIFT",52,{applicationDelay:0,onConfirm:e=>e.setForm("formless")});function eS(e,t,a){return on("MNK",e,t,{autoUpgrade:a.autoUpgrade,autoDowngrade:a.autoDowngrade,recastTime:1,applicationDelay:0,replaceIf:[{newSkill:a.spender,condition:o=>o.resources.get("CHAKRA").available(5)}],validateAttempt:o=>!o.resources.get("CHAKRA").available(5),onConfirm:o=>o.resources.get("CHAKRA").gain(o.isInCombat()?1:5)})}eS("FORBIDDEN_MEDITATION",54,{spender:"THE_FORBIDDEN_CHAKRA"});eS("INSPIRITED_MEDITATION",40,{autoUpgrade:{otherSkill:"ENLIGHTENED_MEDITATION",trait:"HOWLING_FIST_MASTERY"},spender:"HOWLING_FIST"});eS("ENLIGHTENED_MEDITATION",74,{autoDowngrade:{otherSkill:"ENLIGHTENED_MEDITATION",trait:"HOWLING_FIST_MASTERY"},spender:"ENLIGHTENMENT"});[["HOWLING_FIST",40,1.16,100,"cd_THE_FORBIDDEN_CHAKRA"],["ENLIGHTENMENT",74,.76,160,"cd_ENLIGHTENMENT"]].forEach(([e,t,a,o,s],c)=>{Vf(e,t,s,{...c===0?{autoUpgrade:{otherSkill:"ENLIGHTENMENT",trait:"HOWLING_FIST_MASTERY"}}:{autoDowngrade:{otherSkill:"HOWLING_FIST",trait:"HOWLING_FIST_MASTERY"}},startOnHotbar:!1,applicationDelay:a,cooldown:1,potency:o,falloff:0,requiresCombat:!0,highlightIf:f=>f.resources.get("CHAKRA").available(5),validateAttempt:f=>f.resources.get("CHAKRA").available(5),onConfirm:f=>f.consumeFiveChakra()})});Vf("THE_FORBIDDEN_CHAKRA",54,"cd_THE_FORBIDDEN_CHAKRA",{startOnHotbar:!1,replaceIf:[{newSkill:"FORBIDDEN_MEDITATION",condition:e=>!e.resources.get("CHAKRA").available(5)}],applicationDelay:1.48,cooldown:1,potency:[["NEVER",310],["MELEE_MASTERY_MNK",400]],requiresCombat:!0,highlightIf:e=>e.resources.get("CHAKRA").available(5),validateAttempt:e=>e.resources.get("CHAKRA").available(5),onConfirm:e=>e.consumeFiveChakra()});ac("PERFECT_BALANCE",50,"cd_PERFECT_BALANCE",{rscType:"PERFECT_BALANCE",applicationDelay:0,cooldown:40,maxCharges:2,requiresCombat:!0,validateAttempt:e=>!_l.map(t=>e.hasResourceAvailable(t)).some(t=>t),onConfirm:e=>e.startPB()});ac("RIDDLE_OF_FIRE",68,"cd_RIDDLE_OF_FIRE",{rscType:"RIDDLE_OF_FIRE",applicationDelay:0,cooldown:60,replaceIf:[{newSkill:"FIRES_REPLY",condition:e=>e.hasResourceAvailable("FIRES_RUMINATION")}],onConfirm:e=>e.gainStatus("FIRES_RUMINATION")});ac("BROTHERHOOD",70,"cd_BROTHERHOOD",{rscType:"BROTHERHOOD",applicationDelay:.76,cooldown:120,onApplication:e=>{e.gainStatus("MEDITATIVE_BROTHERHOOD"),e.resources.set(new pn("CHAKRA",10,e.resources.get("CHAKRA").availableAmount())),e.addEvent(new Oe("restore BH max stacks",Ut("MNK","BROTHERHOOD").maxTimeout,()=>e.resources.set(new pn("CHAKRA",5,Math.min(e.resources.get("CHAKRA").availableAmount(),5)))))}});ac("RIDDLE_OF_WIND",72,"cd_RIDDLE_OF_WIND",{rscType:"RIDDLE_OF_WIND",applicationDelay:0,cooldown:90,replaceIf:[{newSkill:"WINDS_REPLY",condition:e=>e.hasResourceAvailable("WINDS_RUMINATION")}],onConfirm:e=>e.gainStatus("WINDS_RUMINATION")});Vf("THUNDERCLAP",35,"cd_THUNDERCLAP",{applicationDelay:0,cooldown:30,maxCharges:3,animationLock:Wt,drawsAggro:!0});ac("MANTRA",42,"cd_MANTRA",{rscType:"MANTRA",applicationDelay:1.5,cooldown:90});ac("RIDDLE_OF_EARTH",64,"cd_RIDDLE_OF_EARTH",{rscType:"RIDDLE_OF_EARTH",applicationDelay:0,cooldown:120,healingPotency:100,replaceIf:[{newSkill:"EARTHS_REPLY",condition:e=>e.hasResourceAvailable("EARTHS_RUMINATION")}],onConfirm:e=>e.gainStatus("EARTHS_RUMINATION")});Vf("EARTHS_REPLY",64,"cd_EARTHS_REPLY",{startOnHotbar:!1,applicationDelay:1.07,cooldown:1,healingPotency:300,highlightIf:e=>e.hasResourceAvailable("EARTHS_RUMINATION"),validateAttempt:e=>e.hasResourceAvailable("EARTHS_RUMINATION"),onConfirm:e=>e.tryConsumeResource("EARTHS_RUMINATION")});Vn("WINDS_REPLY",96,{startOnHotbar:!1,applicationDelay:1.2,potency:1040,falloff:.35,highlightIf:e=>e.hasResourceAvailable("WINDS_RUMINATION"),validateAttempt:e=>e.hasResourceAvailable("WINDS_RUMINATION"),onConfirm:e=>e.tryConsumeResource("WINDS_RUMINATION")});Vn("FIRES_REPLY",100,{startOnHotbar:!1,applicationDelay:1.42,potency:1400,falloff:.35,highlightIf:e=>e.hasResourceAvailable("FIRES_RUMINATION"),validateAttempt:e=>e.hasResourceAvailable("FIRES_RUMINATION"),onConfirm:e=>{e.tryConsumeResource("FIRES_RUMINATION"),e.setForm("formless")}});Object.keys(JR).forEach(e=>zt(e,`VPR/${Ge[e].name}.png`));const h2=Object.keys(JR);class f2 extends Xt{jobSpecificOtherTargetedBuffViewProps(){return[]}jobSpecificSelfTargetedBuffViewProps(){return h2.map(t=>this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){const a=this.state.resources,o=a.get("VPR_COMBO"),s=a.get("VPR_AOE_COMBO"),c=["HUNTERS_COIL_READY","SWIFTSKINS_COIL_READY","HUNTERS_DEN_READY","SWIFTSKINS_DEN_READY"],d=a.get("RATTLING_COIL").availableAmount(),f=a.get("SERPENT_OFFERINGS").availableAmount(),h=a.get("ANGUINE_TRIBUTE").availableAmount(),m=o.available(1)?o.pendingChange?.timeTillEvent:s.available(1)?s.pendingChange?.timeTillEvent:void 0,R=c.filter(g=>a.get(g).available(1)),T=R.length>0?Math.max(...R.map(g=>a.get(g).pendingChange.timeTillEvent)):void 0,S=[{kind:"bar",name:N({en:"Dual Wield Combo Timer",zh:""}),color:t.vpr.vprComboTimer,progress:m?m/30:0,valueString:m?.toFixed(3)??"N/A"},{kind:"bar",name:N({en:"Twinblade Combo Timer",zh:""}),color:t.vpr.vprComboTimer,progress:T?T/30:0,valueString:T?.toFixed(3)??"N/A"},{kind:"counter",name:Ke("RATTLING_COIL"),color:t.vpr.rattlingCoil,currentStacks:d,maxStacks:a.get("RATTLING_COIL").maxValue}];return this.state.hasTraitUnlocked("SERPENTS_LINEAGE")&&S.push({kind:"bar",name:Ke("SERPENT_OFFERINGS"),color:f>=50?t.vpr.anguineTribute:t.vpr.serpentOfferings,progress:f/100,valueString:f.toFixed(0)},{kind:"counter",name:Ke("ANGUINE_TRIBUTE"),color:t.vpr.anguineTribute,currentStacks:h,maxStacks:a.get("ANGUINE_TRIBUTE").maxValue}),S}}const ht=(e,t,a)=>{Ve("VPR",e,t,a??{})};ht("RATTLING_COIL",3,{warnOnOvercap:!0});ht("SERPENT_OFFERINGS",100,{warnOnOvercap:!0});ht("ANGUINE_TRIBUTE",5,{timeout:30});ht("HUNTERS_INSTINCT",1,{timeout:40});ht("SWIFTSCALED",1,{timeout:40});ht("HONED_STEEL",1,{timeout:60});ht("HONED_REAVERS",1,{timeout:60});ht("FLANKSTUNG_VENOM",1,{timeout:60});ht("HINDSTUNG_VENOM",1,{timeout:60});ht("FLANKSBANE_VENOM",1,{timeout:60});ht("HINDSBANE_VENOM",1,{timeout:60});ht("GRIMSKINS_VENOM",1,{timeout:60});ht("GRIMHUNTERS_VENOM",1,{timeout:60});ht("HUNTERS_VENOM",1,{timeout:30});ht("SWIFTSKINS_VENOM",1,{timeout:30});ht("POISED_FOR_TWINFANG",1,{timeout:60});ht("POISED_FOR_TWINBLOOD",1,{timeout:60});ht("FELLHUNTERS_VENOM",1,{timeout:30});ht("FELLSKINS_VENOM",1,{timeout:30});ht("READY_TO_REAWAKEN",1,{timeout:30,warnOnTimeout:!0});ht("REAWAKENED",1,{timeout:30,warnOnTimeout:!0});ht("DEATH_RATTLE_READY",1);ht("COIL_OGCD_READY",2);ht("DEN_OGCD_READY",2);ht("UNCOILED_OGCD_READY",2);ht("HUNTERS_COIL_READY",1,{timeout:30,warnOnTimeout:!0});ht("HUNTERS_DEN_READY",1,{timeout:30,warnOnTimeout:!0});ht("SWIFTSKINS_COIL_READY",1,{timeout:30,warnOnTimeout:!0});ht("SWIFTSKINS_DEN_READY",1,{timeout:30,warnOnTimeout:!0});ht("LAST_LASH_READY",1);ht("LEGACY_READY",4);ht("VPR_COMBO",4,{timeout:30});ht("VPR_AOE_COMBO",2,{timeout:30});ht("REAWAKEN_COMBO",4);const $O=["DEATH_RATTLE_READY","LAST_LASH_READY","COIL_OGCD_READY","UNCOILED_OGCD_READY","HUNTERS_VENOM","SWIFTSKINS_VENOM","POISED_FOR_TWINFANG","POISED_FOR_TWINBLOOD","DEN_OGCD_READY","LEGACY_READY"],JO=["FLANKSBANE_VENOM","FLANKSTUNG_VENOM"],eD=["HINDSBANE_VENOM","HINDSTUNG_VENOM"],Kr=[...JO,...eD];class E2 extends qt{constructor(t){super(t);const a=this.hasTraitUnlocked("ENHANCED_SLITHER")?3:2;this.cooldowns.set(new Ue("cd_SLITHER",30,a,a));const o=this.hasTraitUnlocked("ENHANCED_VIPERS_RATTLE")?3:2,s=this.hasTraitUnlocked("ENHANCED_SERPENTS_LINEAGE")?5:4;this.resources.set(new pn("RATTLING_COIL",o,0,!0)),this.resources.set(new pn("ANGUINE_TRIBUTE",s,0)),this.registerRecurringEvents()}inherentSpeedModifier(){return 15}jobSpecificAddDamageBuffCovers(t,a){this.hasResourceAvailable("HUNTERS_INSTINCT")&&t.addBuff(H.HuntersInstinct)}jobSpecificAddSpeedBuffCovers(t,a){this.hasResourceAvailable("SWIFTSCALED")&&a.cdName==="cd_GCD"&&t.addBuff(H.Swiftscaled)}get statusPropsGenerator(){return new f2(this)}getSwiftscaledModifier(){return this.hasResourceAvailable("SWIFTSCALED")?this.inherentSpeedModifier():0}isNoReawakenComboAt(t){return!this.hasResourceAvailable("REAWAKENED")&&this.hasResourceExactly("VPR_COMBO",t)}isNoReawakenAoeComboAt(t){return!this.hasResourceAvailable("REAWAKENED")&&this.hasResourceExactly("VPR_AOE_COMBO",t)}setLegacy(t){this.hasTraitUnlocked("SERPENTS_LEGACY")&&this.resources.get("LEGACY_READY").overrideCurrentValue(t)}gainOfferings(t){this.hasTraitUnlocked("SERPENTS_LINEAGE")&&this.resources.get("SERPENT_OFFERINGS").gain(t)}processCombo(t){if(t==="WRITHING_SNAP"||t==="UNCOILED_FURY")return;const o=["REAWAKEN","FIRST_GENERATION","SECOND_GENERATION","THIRD_GENERATION","FOURTH_GENERATION"].indexOf(t);if(o!==-1){this.setComboState("REAWAKEN_COMBO",(o+1)%5);return}const s=this.resources.get("VPR_COMBO").availableAmount(),c=this.resources.get("VPR_AOE_COMBO").availableAmount(),[d,f]=new Map([["STEEL_FANGS",[1,0]],["REAVING_FANGS",[1,0]],["HUNTERS_STING",[2,0]],["SWIFTSKINS_STING",[3,0]],["FLANKSTING_STRIKE",[0,0]],["FLANKSBANE_FANG",[0,0]],["HINDSTING_STRIKE",[0,0]],["HINDSBANE_FANG",[0,0]],["STEEL_MAW",[0,1]],["REAVING_MAW",[0,1]],["HUNTERS_BITE",[0,2]],["SWIFTSKINS_BITE",[0,2]],["JAGGED_MAW",[0,0]],["BLOODIED_MAW",[0,0]]]).get(t)??[s,c];d!==s&&this.setComboState("VPR_COMBO",d),f!==c&&this.setComboState("VPR_AOE_COMBO",f),this.setComboState("REAWAKEN_COMBO",0)}cancelVicewinderCombo(t){t!=="SWIFTSKINS_COIL"&&this.tryConsumeResource("HUNTERS_COIL_READY"),t!=="HUNTERS_COIL"&&this.tryConsumeResource("SWIFTSKINS_COIL_READY"),t!=="SWIFTSKINS_DEN"&&this.tryConsumeResource("HUNTERS_DEN_READY"),t!=="HUNTERS_DEN"&&this.tryConsumeResource("SWIFTSKINS_DEN_READY")}consumeAnguine(){this.tryConsumeResource("ANGUINE_TRIBUTE"),this.hasResourceAvailable("ANGUINE_TRIBUTE")||this.cancelReawaken()}cancelReawaken(){this.tryConsumeResource("LEGACY_READY",!0),this.tryConsumeResource("ANGUINE_TRIBUTE",!0),this.tryConsumeResource("REAWAKENED"),this.setComboState("REAWAKEN_COMBO",0)}applyExtendedStatus(t,a){Kr.includes(t)&&Kr.forEach(c=>c!==t&&this.tryConsumeResource(c));const o=this.resources.get(t),s=Ut("VPR",t);this.hasResourceAvailable(t)?s.maxTimeout>0&&o.overrideTimer(this,s.maxTimeout+a):(o.gain(1),s.maxTimeout>0&&this.enqueueResourceDrop(t,s.maxTimeout+a))}}const fn=(e,t,a)=>{const o=a.replaceIf?.find(s=>s.newSkill===e)?.condition;return on("VPR",e,t,{...a,recastTime:s=>s.config.adjustedSksGCD(a.baseRecastTime??2.5,s.getSwiftscaledModifier()),validateAttempt:bu(a.validateAttempt,o),onConfirm:Le(s=>{e!=="UNCOILED_FURY"&&e!=="WRITHING_SNAP"&&s.cancelVicewinderCombo(e),$O.forEach(c=>{s.tryConsumeResource(c,!0)&&I.reportWarning({kind:"overwrite",rsc:c})})},a.onConfirm,a.extendedStatus?s=>s.applyExtendedStatus(a.extendedStatus,a.applicationDelay):void 0,s=>s.processCombo(e)),jobPotencyModifiers:s=>{const c=a.jobPotencyModifiers?.(s)??[];return s.hasResourceAvailable("HUNTERS_INSTINCT")&&c.push(J.HuntersInstinct),c}})},Ho=(e,t,a,o)=>at("VPR",e,t,a,{...o,jobPotencyModifiers:s=>{const c=o.jobPotencyModifiers?.(s)??[];return s.hasResourceAvailable("HUNTERS_INSTINCT")&&c.push(J.HuntersInstinct),c}}),tD={newSkill:"FIRST_GENERATION",condition:e=>e.hasResourceAvailable("REAWAKENED")},nD={newSkill:"SECOND_GENERATION",condition:e=>e.hasResourceAvailable("REAWAKENED")},Vr=[tD];Vr.push(...["STEEL_FANGS","HUNTERS_STING","FLANKSTING_STRIKE","HINDSTING_STRIKE"].map((e,t)=>({newSkill:e,condition:a=>a.isNoReawakenComboAt(t)})));const Wr=[nD];Wr.push(...["REAVING_FANGS","SWIFTSKINS_STING","FLANKSBANE_FANG","HINDSBANE_FANG"].map((e,t)=>({newSkill:e,condition:a=>a.isNoReawakenComboAt(t)})));const Xf=[tD];Xf.push(...["STEEL_MAW","HUNTERS_BITE","JAGGED_MAW"].map((e,t)=>({newSkill:e,condition:a=>a.isNoReawakenAoeComboAt(t)})));const qf=[nD];qf.push(...["REAVING_MAW","SWIFTSKINS_BITE","BLOODIED_MAW"].map((e,t)=>({newSkill:e,condition:a=>a.isNoReawakenAoeComboAt(t)})));const aD=[{newSkill:"HUNTERS_COIL",condition:e=>!e.hasResourceAvailable("REAWAKENED")},{newSkill:"THIRD_GENERATION",condition:e=>e.hasResourceAvailable("REAWAKENED")}],iD=[{newSkill:"SWIFTSKINS_COIL",condition:e=>!e.hasResourceAvailable("REAWAKENED")},{newSkill:"FOURTH_GENERATION",condition:e=>e.hasResourceAvailable("REAWAKENED")}],Zf=[{newSkill:"SERPENTS_TAIL",condition:e=>!$O.some(t=>e.hasResourceAvailable(t))},{newSkill:"DEATH_RATTLE",condition:e=>e.hasResourceAvailable("DEATH_RATTLE_READY")},{newSkill:"LAST_LASH",condition:e=>e.hasResourceAvailable("LAST_LASH_READY")},{newSkill:"FIRST_LEGACY",condition:e=>e.hasResourceExactly("LEGACY_READY",1)},{newSkill:"SECOND_LEGACY",condition:e=>e.hasResourceExactly("LEGACY_READY",2)},{newSkill:"THIRD_LEGACY",condition:e=>e.hasResourceExactly("LEGACY_READY",3)},{newSkill:"FOURTH_LEGACY",condition:e=>e.hasResourceExactly("LEGACY_READY",4)}],oD=[{newSkill:"TWINFANG",condition:e=>!["COIL_OGCD_READY","UNCOILED_OGCD_READY","DEN_OGCD_READY"].some(t=>e.hasResourceAvailable(t))},{newSkill:"TWINFANG_BITE",condition:e=>e.hasResourceAvailable("COIL_OGCD_READY")},{newSkill:"TWINFANG_THRESH",condition:e=>e.hasResourceAvailable("DEN_OGCD_READY")},{newSkill:"UNCOILED_TWINFANG",condition:e=>e.hasResourceAvailable("UNCOILED_OGCD_READY")}],lD=[{newSkill:"TWINBLOOD",condition:e=>!["COIL_OGCD_READY","UNCOILED_OGCD_READY","DEN_OGCD_READY"].some(t=>e.hasResourceAvailable(t))},{newSkill:"TWINBLOOD_BITE",condition:e=>e.hasResourceAvailable("COIL_OGCD_READY")},{newSkill:"TWINBLOOD_THRESH",condition:e=>e.hasResourceAvailable("DEN_OGCD_READY")},{newSkill:"UNCOILED_TWINBLOOD",condition:e=>e.hasResourceAvailable("UNCOILED_OGCD_READY")}],sD=[{newSkill:"REAWAKEN",condition:e=>!e.hasResourceAvailable("ANGUINE_TRIBUTE")},{newSkill:"OUROBOROS",condition:e=>e.hasResourceAvailable("ANGUINE_TRIBUTE")}];fn("WRITHING_SNAP",15,{applicationDelay:.488,potency:200});fn("STEEL_FANGS",1,{replaceIf:Vr,applicationDelay:1.158,potency:[["NEVER",180],["MELEE_MASTERY_VPR",200]],jobPotencyModifiers:e=>e.hasResourceAvailable("HONED_STEEL")?[J.HonedST]:[],highlightIf:e=>e.hasResourceAvailable("HONED_STEEL"),onConfirm:e=>e.tryConsumeResource("HONED_STEEL"),extendedStatus:"HONED_REAVERS"});fn("REAVING_FANGS",10,{replaceIf:Wr,applicationDelay:1.293,potency:[["NEVER",180],["MELEE_MASTERY_VPR",200]],jobPotencyModifiers:e=>e.hasResourceAvailable("HONED_REAVERS")?[J.HonedST]:[],highlightIf:e=>e.hasResourceAvailable("HONED_REAVERS"),onConfirm:e=>e.tryConsumeResource("HONED_REAVERS"),extendedStatus:"HONED_STEEL"});fn("HUNTERS_STING",5,{startOnHotbar:!1,replaceIf:Vr,applicationDelay:.89,potency:[["NEVER",240],["MELEE_MASTERY_VPR",300]],highlightIf:e=>!Kr.some(t=>e.hasResourceAvailable(t))||JO.some(t=>e.hasResourceAvailable(t)),extendedStatus:"HUNTERS_INSTINCT"});fn("SWIFTSKINS_STING",20,{startOnHotbar:!1,replaceIf:Wr,applicationDelay:1.16,potency:[["NEVER",280],["MELEE_MASTERY_VPR",300]],highlightIf:e=>!Kr.some(t=>e.hasResourceAvailable(t))||eD.some(t=>e.hasResourceAvailable(t)),extendedStatus:"SWIFTSCALED"});const m2=[["FLANKSTING_STRIKE",1.649,"flank","FLANKSTUNG_VENOM","HINDSTUNG_VENOM",Vr],["FLANKSBANE_FANG",1.604,"flank","FLANKSBANE_VENOM","HINDSBANE_VENOM",Wr],["HINDSTING_STRIKE",.98,"rear","HINDSTUNG_VENOM","FLANKSBANE_VENOM",Vr],["HINDSBANE_FANG",1.203,"rear","HINDSBANE_VENOM","FLANKSTUNG_VENOM",Wr]];m2.forEach(([e,t,a,o,s,c])=>{fn(e,30,{startOnHotbar:!1,replaceIf:c,applicationDelay:t,potency:[["NEVER",320],["MELEE_MASTERY_II_VPR",340]],positional:{potency:[["NEVER",380],["MELEE_MASTERY_II_VPR",400]],location:a},jobPotencyModifiers:d=>d.hasResourceAvailable(o)?[J.VenomST]:[],highlightIf:d=>!Kr.some(f=>d.hasResourceAvailable(f))||d.hasResourceAvailable(o),onConfirm:d=>{d.gainStatus("DEATH_RATTLE_READY"),d.resources.get("SERPENT_OFFERINGS").gain(10),Kr.filter(f=>f!==o).some(f=>d.hasResourceAvailable(f))&&I.reportWarning({kind:"custom",en:"incorrect combo ender!"})},extendedStatus:s})});fn("HUNTERS_COIL",65,{replaceIf:aD,applicationDelay:.982,potency:570,positional:{potency:620,location:"flank"},baseRecastTime:3,highlightIf:e=>e.hasResourceAvailable("HUNTERS_COIL_READY"),validateAttempt:e=>e.hasResourceAvailable("HUNTERS_COIL_READY"),onConfirm:e=>{e.gainOfferings(5),e.hasTraitUnlocked("VIPERS_BITE")&&(e.gainStatus("HUNTERS_VENOM"),e.gainStatus("COIL_OGCD_READY",2)),e.hasResourceAvailable("SWIFTSKINS_COIL_READY")&&e.gainStatus("SWIFTSKINS_COIL_READY")},extendedStatus:"HUNTERS_INSTINCT"});fn("SWIFTSKINS_COIL",65,{replaceIf:iD,applicationDelay:1.473,potency:570,positional:{potency:620,location:"rear"},baseRecastTime:3,highlightIf:e=>e.hasResourceAvailable("SWIFTSKINS_COIL_READY"),validateAttempt:e=>e.hasResourceAvailable("SWIFTSKINS_COIL_READY"),onConfirm:e=>{e.gainOfferings(5),e.hasTraitUnlocked("VIPERS_BITE")&&(e.gainStatus("SWIFTSKINS_VENOM"),e.gainStatus("COIL_OGCD_READY",2)),e.hasResourceAvailable("HUNTERS_COIL_READY")&&e.gainStatus("HUNTERS_COIL_READY")},extendedStatus:"SWIFTSCALED"});fn("REAWAKEN",90,{replaceIf:sD,applicationDelay:.625,potency:750,falloff:.8,baseRecastTime:2.2,highlightIf:e=>e.hasResourceAvailable("SERPENT_OFFERINGS",50)||e.hasResourceAvailable("READY_TO_REAWAKEN"),validateAttempt:e=>e.hasResourceAvailable("SERPENT_OFFERINGS",50)||e.hasResourceAvailable("READY_TO_REAWAKEN"),onConfirm:e=>{e.tryConsumeResource("READY_TO_REAWAKEN")||e.resources.get("SERPENT_OFFERINGS").consume(50),e.gainStatus("ANGUINE_TRIBUTE",e.resources.get("ANGUINE_TRIBUTE").maxValue),e.gainStatus("REAWAKENED"),e.resources.get("REAWAKENED").removeTimer(),e.resources.addResourceEvent({rscType:"REAWAKENED",name:"cancel reawaken",delay:Ut("VPR","REAWAKENED").maxTimeout,fnOnRsc:()=>e.cancelReawaken()})}});fn("OUROBOROS",96,{startOnHotbar:!1,replaceIf:sD,applicationDelay:2.313,potency:1150,falloff:.8,baseRecastTime:3,highlightIf:e=>e.hasResourceExactly("ANGUINE_TRIBUTE",1),onConfirm:e=>e.cancelReawaken()});fn("VICEWINDER",65,{applicationDelay:.581,potency:500,secondaryCooldown:{cdName:"cd_VICEWINDER",cooldown:40,maxCharges:2},baseRecastTime:3,validateAttempt:e=>!e.hasResourceAvailable("REAWAKENED")&&!e.hasResourceAvailable("HUNTERS_COIL_READY")&&!e.hasResourceAvailable("SWIFTSKINS_COIL_READY")&&!e.hasResourceAvailable("HUNTERS_DEN_READY")&&!e.hasResourceAvailable("SWIFTSKINS_DEN_READY"),onConfirm:e=>{e.hasTraitUnlocked("VIPERS_RATTLE")&&e.resources.get("RATTLING_COIL").gain(1),e.gainStatus("HUNTERS_COIL_READY"),e.gainStatus("SWIFTSKINS_COIL_READY")}});fn("UNCOILED_FURY",82,{applicationDelay:.804,potency:680,falloff:.75,baseRecastTime:3.5,highlightIf:e=>e.hasResourceAvailable("RATTLING_COIL"),validateAttempt:e=>e.hasResourceAvailable("RATTLING_COIL"),onConfirm:e=>{e.tryConsumeResource("RATTLING_COIL"),e.hasTraitUnlocked("UNCOILED_FANGS")&&(e.gainStatus("POISED_FOR_TWINFANG"),e.gainStatus("UNCOILED_OGCD_READY",2))}});fn("STEEL_MAW",25,{replaceIf:Xf,applicationDelay:1.091,potency:120,falloff:0,jobPotencyModifiers:e=>e.hasResourceAvailable("HONED_STEEL")?[J.HonedAoE]:[],highlightIf:e=>e.hasResourceAvailable("HONED_STEEL"),onConfirm:e=>e.tryConsumeResource("HONED_STEEL"),extendedStatus:"HONED_REAVERS"});fn("REAVING_MAW",35,{replaceIf:qf,applicationDelay:.908,potency:120,falloff:0,jobPotencyModifiers:e=>e.hasResourceAvailable("HONED_REAVERS")?[J.HonedAoE]:[],highlightIf:e=>e.hasResourceAvailable("HONED_REAVERS"),onConfirm:e=>e.tryConsumeResource("HONED_REAVERS"),extendedStatus:"HONED_STEEL"});fn("HUNTERS_BITE",40,{startOnHotbar:!1,replaceIf:Xf,applicationDelay:1.134,potency:180,falloff:0,highlightIf:e=>!0,extendedStatus:"HUNTERS_INSTINCT"});fn("SWIFTSKINS_BITE",45,{startOnHotbar:!1,replaceIf:qf,applicationDelay:1.445,potency:180,falloff:0,highlightIf:e=>!0,extendedStatus:"SWIFTSCALED"});fn("JAGGED_MAW",50,{startOnHotbar:!1,replaceIf:Xf,applicationDelay:1.127,potency:180,falloff:0,jobPotencyModifiers:e=>e.hasResourceAvailable("GRIMSKINS_VENOM")?[J.VenomAoE]:[],highlightIf:e=>e.hasResourceAvailable("GRIMSKINS_VENOM")||!e.hasResourceAvailable("GRIMHUNTERS_VENOM"),onConfirm:e=>{e.gainStatus("LAST_LASH_READY"),e.resources.get("SERPENT_OFFERINGS").gain(10)},extendedStatus:"GRIMHUNTERS_VENOM"});fn("BLOODIED_MAW",50,{startOnHotbar:!1,replaceIf:qf,applicationDelay:.866,potency:180,falloff:0,jobPotencyModifiers:e=>e.hasResourceAvailable("GRIMHUNTERS_VENOM")?[J.VenomAoE]:[],highlightIf:e=>e.hasResourceAvailable("GRIMHUNTERS_VENOM")||!e.hasResourceAvailable("GRIMSKINS_VENOM"),onConfirm:e=>{e.gainStatus("LAST_LASH_READY"),e.resources.get("SERPENT_OFFERINGS").gain(10)},extendedStatus:"GRIMSKINS_VENOM"});fn("HUNTERS_DEN",70,{replaceIf:[{newSkill:"HUNTERS_DEN",condition:e=>!e.hasResourceAvailable("REAWAKENED")},{newSkill:"THIRD_GENERATION",condition:e=>e.hasResourceAvailable("REAWAKENED")}],applicationDelay:.569,potency:300,falloff:0,baseRecastTime:3,highlightIf:e=>e.hasResourceAvailable("HUNTERS_DEN_READY"),validateAttempt:e=>e.hasResourceAvailable("HUNTERS_DEN_READY"),onConfirm:e=>{e.gainOfferings(5),e.hasTraitUnlocked("VIPERS_THRESH")&&(e.gainStatus("FELLHUNTERS_VENOM"),e.gainStatus("DEN_OGCD_READY",2)),e.hasResourceAvailable("SWIFTSKINS_DEN_READY")&&e.gainStatus("SWIFTSKINS_DEN_READY")},extendedStatus:"HUNTERS_INSTINCT"});fn("SWIFTSKINS_DEN",70,{replaceIf:[{newSkill:"SWIFTSKINS_DEN",condition:e=>!e.hasResourceAvailable("REAWAKENED")},{newSkill:"FOURTH_GENERATION",condition:e=>e.hasResourceAvailable("REAWAKENED")}],applicationDelay:.999,potency:300,falloff:0,baseRecastTime:3,highlightIf:e=>e.hasResourceAvailable("SWIFTSKINS_DEN_READY"),validateAttempt:e=>e.hasResourceAvailable("SWIFTSKINS_DEN_READY"),onConfirm:e=>{e.gainOfferings(5),e.hasTraitUnlocked("VIPERS_THRESH")&&(e.gainStatus("FELLSKINS_VENOM"),e.gainStatus("DEN_OGCD_READY",2)),e.hasResourceAvailable("HUNTERS_DEN_READY")&&e.gainStatus("HUNTERS_DEN_READY")},extendedStatus:"SWIFTSCALED"});fn("VICEPIT",70,{applicationDelay:.827,potency:250,secondaryCooldown:{cdName:"cd_VICEWINDER",cooldown:40,maxCharges:2},falloff:0,baseRecastTime:3,validateAttempt:e=>!e.hasResourceAvailable("REAWAKENED")&&!e.hasResourceAvailable("HUNTERS_COIL_READY")&&!e.hasResourceAvailable("SWIFTSKINS_COIL_READY")&&!e.hasResourceAvailable("HUNTERS_DEN_READY")&&!e.hasResourceAvailable("SWIFTSKINS_DEN_READY"),onConfirm:e=>{e.hasTraitUnlocked("VIPERS_RATTLE")&&(I.timeline.duringUntargetable(e.getDisplayTime())||e.resources.get("RATTLING_COIL").gain(1)),e.gainStatus("HUNTERS_DEN_READY"),e.gainStatus("SWIFTSKINS_DEN_READY")}});Ho("SERPENTS_IRE",86,"cd_SERPENTS_IRE",{applicationDelay:0,cooldown:120,requiresCombat:!0,onConfirm:e=>{e.resources.get("RATTLING_COIL").gain(1),e.hasTraitUnlocked("SERPENTS_LINEAGE")&&e.gainStatus("READY_TO_REAWAKEN")}});Ho("SLITHER",40,"cd_SLITHER",{applicationDelay:0,cooldown:30,maxCharges:3,animationLock:Wt});Ho("SERPENTS_TAIL",55,"cd_SERPENTS_TAIL",{replaceIf:Zf,applicationDelay:0,cooldown:1,validateAttempt:e=>!1});Ho("DEATH_RATTLE",55,"cd_SERPENTS_TAIL",{startOnHotbar:!1,replaceIf:Zf,applicationDelay:1.697,cooldown:1,potency:280,highlightIf:e=>!0,onConfirm:e=>e.tryConsumeResource("DEATH_RATTLE_READY")});Ho("LAST_LASH",60,"cd_SERPENTS_TAIL",{startOnHotbar:!1,replaceIf:Zf,applicationDelay:1.226,cooldown:1,potency:120,falloff:0,highlightIf:e=>!0,onConfirm:e=>e.tryConsumeResource("LAST_LASH_READY")});Ho("TWINFANG",75,"cd_TWINFANG",{replaceIf:oD,applicationDelay:0,cooldown:1,validateAttempt:e=>!1});Ho("TWINBLOOD",75,"cd_TWINBLOOD",{replaceIf:lD,applicationDelay:0,cooldown:1,validateAttempt:e=>!1});const A2=[["TWINFANG_BITE",75,"fang",.629,120,void 0,"COIL_OGCD_READY","HUNTERS_VENOM",J.VenomOGCDST,"SWIFTSKINS_VENOM"],["TWINBLOOD_BITE",75,"blood",.714,120,void 0,"COIL_OGCD_READY","SWIFTSKINS_VENOM",J.VenomOGCDST,"HUNTERS_VENOM"],["TWINFANG_THRESH",80,"fang",.666,50,0,"DEN_OGCD_READY","FELLHUNTERS_VENOM",J.VenomOGCDAoE,"FELLSKINS_VENOM"],["TWINBLOOD_THRESH",80,"blood",.764,50,0,"DEN_OGCD_READY","FELLSKINS_VENOM",J.VenomOGCDAoE,"FELLHUNTERS_VENOM"],["UNCOILED_TWINFANG",92,"fang",1.04,120,.75,"UNCOILED_OGCD_READY","POISED_FOR_TWINFANG",J.Poised,"POISED_FOR_TWINBLOOD"],["UNCOILED_TWINBLOOD",92,"blood",.977,120,.75,"UNCOILED_OGCD_READY","POISED_FOR_TWINBLOOD",J.Poised,"POISED_FOR_TWINFANG"]];A2.forEach(([e,t,a,o,s,c,d,f,h,m])=>{Ho(e,t,a==="fang"?"cd_TWINFANG":"cd_TWINBLOOD",{startOnHotbar:!1,replaceIf:a==="fang"?oD:lD,applicationDelay:o,cooldown:1,potency:s,falloff:c,highlightIf:R=>R.hasResourceAvailable(f),jobPotencyModifiers:R=>R.hasResourceAvailable(f)?[h]:[],onConfirm:R=>{R.tryConsumeResource(d),R.hasResourceAvailable(f)||I.reportWarning({kind:"custom",en:`unbuffed twin${a} ability!`}),R.tryConsumeResource(f)&&R.hasResourceAvailable(d)?R.gainStatus(m):R.tryConsumeResource(m)}})});const R2=[["FIRST_GENERATION",1.702,Vr],["SECOND_GENERATION",1.473,Wr],["THIRD_GENERATION",1.473,aD],["FOURTH_GENERATION",1.473,iD]];R2.forEach(([e,t,a],o)=>{fn(e,90,{replaceIf:a,startOnHotbar:!1,applicationDelay:t,potency:420,falloff:.8,baseRecastTime:2,combo:{resource:"REAWAKEN_COMBO",resourceValue:o+1,potency:680},highlightIf:s=>s.hasResourceExactly("REAWAKEN_COMBO",o+1),onConfirm:s=>{s.setLegacy(o+1),s.consumeAnguine()}})});const T2=[["FIRST_LEGACY",1.289],["SECOND_LEGACY",1.065],["THIRD_LEGACY",1.19],["FOURTH_LEGACY",1.065]];T2.forEach(([e,t])=>{Ho(e,100,"cd_SERPENTS_TAIL",{startOnHotbar:!1,replaceIf:Zf,applicationDelay:t,cooldown:1,potency:320,falloff:.8,highlightIf:a=>!0,onConfirm:a=>a.tryConsumeResource("LEGACY_READY",!0)})});const rD=["SONG_OF_TORMENT","NIGHTBLOOM","FEATHER_RAIN","MORTAL_FLAME","BREATH_OF_MAGIC","WANING_NOCTURNE","DIAMONDBACK","BRUSH_WITH_DEATH"],S2=Object.keys(nT).filter(e=>!rD.includes(e));Object.keys(nT).forEach(e=>zt(e,`BLU/${Ge[e].name}.png`));class g2 extends Xt{jobSpecificOtherTargetedBuffViewProps(){return[...rD.map(t=>this.makeCommonTimer(t,!1))]}jobSpecificSelfTargetedBuffViewProps(){return S2.map(t=>this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){return[]}}const Hn=(e,t,a)=>{Ve("BLU",e,t,a??{})};Hn("NIGHTBLOOM",1,{timeout:60});Hn("SONG_OF_TORMENT",1,{timeout:30});Hn("FEATHER_RAIN",1,{timeout:6});Hn("WAXING_NOCTURNE",1,{timeout:15});Hn("WANING_NOCTURNE",1,{timeout:15});Hn("DIAMONDBACK",1,{timeout:10});Hn("BRISTLE",1,{timeout:30});Hn("WHISTLE",1,{timeout:30});Hn("TINGLE",1,{timeout:15});Hn("COLD_FOG",1,{timeout:5});Hn("TOUCH_OF_FROST",1,{timeout:15});Hn("PHANTOM_FLURRY",1,{timeout:5});Hn("APOKALYPSIS",1,{timeout:10});Hn("WINGED_REPROBATION",4);Hn("WINGED_REDEMPTION",1,{timeout:10});Hn("BREATH_OF_MAGIC",1,{timeout:60});Hn("MORTAL_FLAME",1,{timeout:900});Hn("SURPANAKHAS_FURY",4,{timeout:3});Hn("BRUSH_WITH_DEATH",1,{timeout:600});class I2 extends qt{constructor(t){super(t),this.cooldowns.set(new Ue("cd_SWIFTCAST",60,1,1)),this.registerRecurringEvents([{groupedEffects:[{effectName:"NIGHTBLOOM",appliedBy:["NIGHTBLOOM"]},{effectName:"SONG_OF_TORMENT",appliedBy:["SONG_OF_TORMENT"]}]},{groupedEffects:[{effectName:"FEATHER_RAIN",appliedBy:["FEATHER_RAIN"]}]},{groupedEffects:[{effectName:"BREATH_OF_MAGIC",appliedBy:["BREATH_OF_MAGIC"]}]},{groupedEffects:[{effectName:"MORTAL_FLAME",appliedBy:["MORTAL_FLAME"]}]},{groupedEffects:[{effectName:"PHANTOM_FLURRY",appliedBy:["PHANTOM_FLURRY"],isGroundTargeted:!0,exclude:!0},{effectName:"APOKALYPSIS",appliedBy:["APOKALYPSIS"],isGroundTargeted:!0,exclude:!0}]}])}get statusPropsGenerator(){return new g2(this)}refreshBuff(t,a){this.addEvent(new Oe("gain buff",a,()=>{if(this.resources.get(t).gain(1),this.enqueueResourceDrop(t),t==="WANING_NOCTURNE"||t==="DIAMONDBACK"){const o=Ut("BLU",t).maxTimeout,s=this.resources.get("NOT_ANIMATION_LOCKED").pendingChange;s!==void 0?this.resources.get("NOT_ANIMATION_LOCKED").overrideTimer(this,Math.max(o,s.timeTillEvent)):this.resources.takeResourceLock("NOT_ANIMATION_LOCKED",o)}}))}jobSpecificRegisterRecurringEvents(){const t=()=>{this.handleDoTTick("PHANTOM_FLURRY"),this.getDisplayTime()>=0&&I.reportDotTick(this.time,"PHANTOM_FLURRY"),this.addEvent(new Oe("kick tick",1,()=>{t()}))},a=()=>{this.handleDoTTick("APOKALYPSIS"),this.getDisplayTime()>=0&&I.reportDotTick(this.time,"APOKALYPSIS"),this.addEvent(new Oe("Apokalypsis tick",1,()=>{a()}))};let o=this.config.timeTillFirstManaTick+this.dotTickOffset;for(;o>1;)o--;this.addEvent(new Oe("initial kick tick",o,t));let s=this.config.timeTillFirstManaTick+this.dotTickOffset;for(;s>1;)s--;this.addEvent(new Oe("initial Apokalypsis tick",s,a))}cancelChanneledSkills(){this.tryConsumeResource("PHANTOM_FLURRY"),this.tryConsumeResource("APOKALYPSIS")}}const tS=e=>e.hasResourceAvailable("WANING_NOCTURNE")||e.hasResourceAvailable("DIAMONDBACK"),_2=e=>e.hasResourceAvailable("PHANTOM_FLURRY"),p2={newSkill:"END_PHANTOM_FLURRY",condition:e=>_2(e)},Yt=(e,t,a)=>{const o=a.basePotency??Number,s=a.aspect??Ie.Other,c=a.baseCastTime??0,d=a.jobPotencyModifiers??(f=>[]);return Xa("BLU",e,t,{...a,aspect:s,castTime:f=>f.config.adjustedCastTime(c),potency:a.basePotency,validateAttempt:f=>!tS(f)&&(a.validateAttempt?.(f)??!0),jobPotencyModifiers:f=>{const h=d(f);return f.hasResourceAvailable("WAXING_NOCTURNE")&&h.push(J.MoonFlute),o!==0&&f.hasResourceAvailable("BRISTLE")&&h.push(J.Bristle)&&f.tryConsumeResource("BRISTLE"),s===Ie.Physical&&f.hasResourceAvailable("WHISTLE")&&h.push(J.Whistle)&&f.tryConsumeResource("WHISTLE"),s===Ie.Physical&&e!=="TRIPLE_TRIDENT"&&f.hasResourceAvailable("TINGLE")&&h.push(J.TingleA)&&f.tryConsumeResource("TINGLE"),e==="TRIPLE_TRIDENT"&&f.hasResourceAvailable("TINGLE")&&h.push(J.TingleB)&&f.tryConsumeResource("TINGLE"),e==="CONVICTION_MARCATO"&&f.hasResourceAvailable("WINGED_REDEMPTION")&&h.push(J.WingedRedemption)&&f.tryConsumeResource("WINGED_REDEMPTION"),e==="WINGED_REPROBATION"&&f.resources.get("WINGED_REPROBATION").availableAmount()===3&&h.push(J.WingedReprobation),h},isInstantFn:f=>f.hasResourceAvailable("SWIFTCAST")||c===0,onConfirm:Le(f=>f.tryConsumeResource("SURPANAKHAS_FURY"),a.baseCastTime?f=>f.tryConsumeResource("SWIFTCAST"):void 0,a.onConfirm)})},pa=(e,t,a,o)=>at("BLU",e,t,a,{jobPotencyModifiers:s=>{const c=[];return s.hasResourceAvailable("WAXING_NOCTURNE")&&c.push(J.MoonFlute),c},validateAttempt:s=>!tS(s)&&(o.validateAttempt?.(s)??!0),...o,onConfirm:Le(s=>{e!=="SURPANAKHA"&&s.tryConsumeResource("SURPANAKHAS_FURY")},o.onConfirm)});Yt("SONIC_BOOM",1,{basePotency:210,baseCastTime:1,manaCost:200,applicationDelay:.5});Yt("SHARPENED_KNIFE",1,{aspect:Ie.Physical,basePotency:220,baseCastTime:1,manaCost:200,applicationDelay:.5});Yt("GOBLIN_PUNCH",1,{aspect:Ie.Physical,basePotency:220,baseCastTime:0,manaCost:200,applicationDelay:.5});Yt("REVENGE_BLAST",1,{aspect:Ie.Physical,basePotency:500,baseCastTime:2,manaCost:200,applicationDelay:.5});Yt("WILD_RAGE",1,{aspect:Ie.Physical,basePotency:500,baseCastTime:5,manaCost:0,applicationDelay:.5});Yt("CONVICTION_MARCATO",1,{basePotency:220,baseCastTime:2,manaCost:200,applicationDelay:.5});Yt("WATER_CANNON",1,{basePotency:200,baseCastTime:2,manaCost:200,applicationDelay:.5});Yt("HYDRO_PULL",1,{basePotency:220,baseCastTime:2,manaCost:200,applicationDelay:.5});Yt("THE_ROSE_OF_DESTRUCTION",1,{basePotency:400,baseCastTime:2,manaCost:300,applicationDelay:.5,secondaryCooldown:{cdName:"cd_THE_ROSE_OF_DESTRUCTION",cooldown:30,maxCharges:1}});Yt("MOON_FLUTE",1,{baseCastTime:2,manaCost:500,applicationDelay:.6,onConfirm:e=>{e.hasResourceAvailable("WAXING_NOCTURNE")||(e.refreshBuff("WAXING_NOCTURNE",.6),e.addEvent(new Oe("Waxing_Nocturne ended",15.6,()=>{e.hasResourceAvailable("WANING_NOCTURNE")||e.refreshBuff("WANING_NOCTURNE",0)})))}});Yt("DIAMONDBACK",1,{baseCastTime:2,manaCost:3e3,applicationDelay:.6,onConfirm:e=>{e.hasResourceAvailable("WAXING_NOCTURNE")&&(e.tryConsumeResource("WAXING_NOCTURNE"),e.refreshBuff("WANING_NOCTURNE",0)),e.refreshBuff("DIAMONDBACK",.6)}});Yt("MATRA_MAGIC",1,{basePotency:800,baseCastTime:2,manaCost:200,applicationDelay:.5,secondaryCooldown:{cdName:"cd_MATRA_MAGIC",cooldown:120,maxCharges:1}});Yt("SONG_OF_TORMENT",1,{basePotency:50,baseCastTime:2,manaCost:400,applicationDelay:.5,onConfirm:(e,t)=>{const a=[];e.hasResourceAvailable("WAXING_NOCTURNE")&&a.push(J.MoonFlute),e.hasResourceAvailable("BRISTLE")&&a.push(J.Bristle),e.addDoTPotencies({node:t,effectName:"SONG_OF_TORMENT",skillName:"SONG_OF_TORMENT",tickPotency:50,speedStat:"sps",modifiers:a})},onApplication:(e,t)=>{e.applyDoT("SONG_OF_TORMENT",t)}});Yt("BREATH_OF_MAGIC",1,{basePotency:0,baseCastTime:2,manaCost:300,applicationDelay:.5,onConfirm:(e,t)=>{const a=[];e.hasResourceAvailable("WAXING_NOCTURNE")&&a.push(J.MoonFlute),e.hasResourceAvailable("BRISTLE")&&a.push(J.Bristle),e.tryConsumeResource("BRISTLE"),e.addDoTPotencies({node:t,effectName:"BREATH_OF_MAGIC",skillName:"BREATH_OF_MAGIC",tickPotency:120,speedStat:"sps",modifiers:a})},onApplication:(e,t)=>{e.applyDoT("BREATH_OF_MAGIC",t)}});Yt("MORTAL_FLAME",1,{basePotency:0,baseCastTime:2,manaCost:500,applicationDelay:.5,onConfirm:(e,t)=>{const a=[];e.hasResourceAvailable("WAXING_NOCTURNE")&&a.push(J.MoonFlute),e.hasResourceAvailable("BRISTLE")&&a.push(J.Bristle),e.tryConsumeResource("BRISTLE"),e.addDoTPotencies({node:t,effectName:"MORTAL_FLAME",skillName:"MORTAL_FLAME",tickPotency:40,speedStat:"sps",modifiers:a})},onApplication:(e,t)=>{e.applyDoT("MORTAL_FLAME",t)}});Yt("WHISTLE",1,{baseCastTime:1,manaCost:200,applicationDelay:0,onConfirm:e=>{e.tryConsumeResource("BRISTLE"),e.refreshBuff("WHISTLE",0)}});Yt("BRISTLE",1,{baseCastTime:1,manaCost:200,applicationDelay:0,onConfirm:e=>{e.tryConsumeResource("WHISTLE"),e.refreshBuff("BRISTLE",0)}});Yt("FINAL_STING",1,{aspect:Ie.Physical,basePotency:2e3,baseCastTime:2,manaCost:0,applicationDelay:.5,validateAttempt:e=>!e.hasResourceAvailable("BRUSH_WITH_DEATH"),onConfirm:e=>{e.refreshBuff("BRUSH_WITH_DEATH",0)}});Yt("TINGLE",1,{basePotency:100,baseCastTime:2,manaCost:200,applicationDelay:.5,onConfirm:e=>{e.refreshBuff("TINGLE",0)}});Yt("TRIPLE_TRIDENT",1,{aspect:Ie.Physical,basePotency:450,baseCastTime:2,manaCost:300,applicationDelay:.5,secondaryCooldown:{cdName:"cd_TRIPLE_TRIDENT",cooldown:90,maxCharges:1}});const N2=e=>e.hasResourceAvailable("COLD_FOG"),C2=e=>e.hasResourceAvailable("TOUCH_OF_FROST"),b2=[{newSkill:"POP_COLD_FOG",condition:e=>N2(e)},{newSkill:"WHITE_DEATH",condition:e=>C2(e)}];Yt("COLD_FOG",1,{replaceIf:b2,baseCastTime:2,cooldown:90,manaCost:300,applicationDelay:.5,secondaryCooldown:{cdName:"cd_COLD_FOG",cooldown:90,maxCharges:1},onConfirm:e=>{e.refreshBuff("COLD_FOG",0)}});Yt("WHITE_DEATH",1,{startOnHotbar:!1,basePotency:400,baseCastTime:0,manaCost:0,applicationDelay:.5,validateAttempt:e=>!tS(e)&&e.hasResourceAvailable("TOUCH_OF_FROST")});pa("POP_COLD_FOG",1,"cd_COLD_FOG_POP",{startOnHotbar:!1,applicationDelay:0,animationLock:ma,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("COLD_FOG"),onConfirm:e=>{e.tryConsumeResource("COLD_FOG"),e.refreshBuff("TOUCH_OF_FROST",0)}});Yt("END_PHANTOM_FLURRY",1,{startOnHotbar:!1,basePotency:600,baseCastTime:0,manaCost:0,applicationDelay:.5,validateAttempt:e=>e.hasResourceAvailable("PHANTOM_FLURRY")});Yt("WINGED_REPROBATION",1,{aspect:Ie.Physical,basePotency:300,baseCastTime:1,manaCost:200,applicationDelay:.5,secondaryCooldown:{cdName:"cd_WINGED_REPROBATION",cooldown:90,maxCharges:1},onConfirm:e=>{e.resources.get("WINGED_REPROBATION").gain(1),e.resources.get("WINGED_REPROBATION").availableAmount()<=3&&e.cooldowns.get("cd_WINGED_REPROBATION").restore(90),e.resources.get("WINGED_REPROBATION").availableAmount()===4&&(e.tryConsumeResource("WINGED_REPROBATION",!0),e.refreshBuff("WINGED_REDEMPTION",0))}});pa("ERUPTION",1,"cd_ERUPTION",{cooldown:30,manaCost:300,potency:300,applicationDelay:.62});pa("FEATHER_RAIN",1,"cd_ERUPTION",{cooldown:30,manaCost:300,potency:220,applicationDelay:.62,onConfirm:(e,t)=>{const a=[];e.hasResourceAvailable("WAXING_NOCTURNE")&&a.push(J.MoonFlute),e.addDoTPotencies({node:t,effectName:"FEATHER_RAIN",skillName:"FEATHER_RAIN",tickPotency:40,speedStat:"sps",modifiers:a}),e.applyDoT("FEATHER_RAIN",t)}});pa("MOUNTAIN_BUSTER",1,"cd_SHOCK_STRIKE",{cooldown:60,manaCost:400,potency:400,applicationDelay:.62});pa("SHOCK_STRIKE",1,"cd_SHOCK_STRIKE",{cooldown:60,manaCost:400,potency:400,applicationDelay:.62});pa("GLASS_DANCE",1,"cd_GLASS_DANCE",{cooldown:90,manaCost:500,potency:350,applicationDelay:.62});pa("QUASAR",1,"cd_QUASAR",{cooldown:60,manaCost:300,potency:300,applicationDelay:.62});pa("J_KICK",1,"cd_QUASAR",{cooldown:60,manaCost:300,potency:300,applicationDelay:1,animationLock:1});pa("BOTH_ENDS",1,"cd_NIGHTBLOOM",{cooldown:120,manaCost:300,potency:600,applicationDelay:.62});pa("SEA_SHANTY",1,"cd_SEA_SHANTY",{cooldown:120,manaCost:300,potency:500,applicationDelay:.62});pa("BEING_MORTAL",1,"cd_BEING_MORTAL",{cooldown:120,manaCost:300,potency:800,applicationDelay:.62});pa("APOKALYPSIS",1,"cd_BEING_MORTAL",{cooldown:120,manaCost:300,potency:0,applicationDelay:1.38,animationLock:1.38,onConfirm:(e,t)=>{const a=[];e.hasResourceAvailable("WAXING_NOCTURNE")&&a.push(J.MoonFlute),e.addDoTPotencies({node:t,effectName:"APOKALYPSIS",skillName:"APOKALYPSIS",tickPotency:140,tickFrequency:1,speedStat:"unscaled",modifiers:a})},onApplication:(e,t)=>{e.applyDoT("APOKALYPSIS",t)}});pa("NIGHTBLOOM",1,"cd_NIGHTBLOOM",{cooldown:120,manaCost:300,potency:400,applicationDelay:.62,onConfirm:(e,t)=>{const a=[];e.hasResourceAvailable("WAXING_NOCTURNE")&&a.push(J.MoonFlute),e.addDoTPotencies({node:t,effectName:"NIGHTBLOOM",skillName:"NIGHTBLOOM",tickPotency:75,speedStat:"sps",modifiers:a})},onApplication:(e,t)=>{e.applyDoT("NIGHTBLOOM",t)}});pa("PHANTOM_FLURRY",1,"cd_PHANTOM_FLURRY",{replaceIf:[p2],cooldown:120,manaCost:300,potency:0,applicationDelay:.5,onConfirm:(e,t)=>{const a=[];e.hasResourceAvailable("WAXING_NOCTURNE")&&a.push(J.MoonFlute),e.addDoTPotencies({node:t,effectName:"PHANTOM_FLURRY",skillName:"PHANTOM_FLURRY",tickPotency:200,tickFrequency:1,speedStat:"unscaled",modifiers:a})},onApplication:(e,t)=>{e.applyDoT("PHANTOM_FLURRY",t)}});pa("SURPANAKHA",1,"cd_SURPANAKHA_LOCKOUT",{cooldown:1,manaCost:200,potency:e=>200*(1+.5*e.resources.get("SURPANAKHAS_FURY").availableAmount()),applicationDelay:.62,onApplication:e=>{e.resources.get("SURPANAKHAS_FURY").availableAmount()===3?e.tryConsumeResource("SURPANAKHAS_FURY",!0):e.refreshBuff("SURPANAKHAS_FURY",0)},secondaryCooldown:{cdName:"cd_SURPANAKHA",cooldown:30,maxCharges:4}});function Dr(e){switch(e.job){case"PLD":return new bB(e);case"WAR":return new pB(e);case"DRK":return new HB(e);case"GNB":return new gG(e);case"WHM":return new YB(e);case"SCH":return new BB(e);case"AST":return new PB(e);case"SGE":return new TB(e);case"MNK":return new u2(e);case"DRG":return new rG(e);case"NIN":return new XB(e);case"SAM":return new aB(e);case"RPR":return new eB(e);case"VPR":return new E2(e);case"BRD":return new Qw(e);case"MCH":return new vG(e);case"DNC":return new nG(e);case"BLM":return new Ww(e);case"SMN":return new sB(e);case"RDM":return new $G(e);case"PCT":return new UG(e);case"BLU":return new I2(e)}return new qt(e)}let cD=e=>{};function O2(e){return`
		.castTimeTable {
			border-collapse: collapse;
			width: 100%;
		}
		.castTimeTable th, .castTimeTable td {
			text-align: center;
			padding: 0.15em;
			border: 1px solid ${e};
			width: 33%
		}
	`}function D2(e){const t=Ut(e.job,e.override.type);let a;const o=Ke(e.override.type);if(t.isCoolDown)a=N({en:o+" full in "+e.override.timeTillFullOrDrop+"s",zh:`${o}${e.override.timeTillFullOrDrop}`});else{a=o;const c=N({en:" (",zh:""}),d=N({en:") ",zh:""});(Ge[e.override.type].mayBeToggled??!1)&&(a+=c+(e.override.effectOrTimerEnabled?N({en:"enabled",zh:""}):N({en:"disabled",zh:""}))+d),t.maxValue>1&&(a+=N({en:` (amount: ${e.override.stacks})`,zh:`${e.override.stacks}`})),t.maxTimeout>=0&&(e.override.type==="POLYGLOT"?e.override.timeTillFullOrDrop>0&&(a+=N({en:` next stack ready in ${e.override.timeTillFullOrDrop}s`,zh:`${e.override.timeTillFullOrDrop}`})):e.override.effectOrTimerEnabled&&(a+=N({en:` drops in ${e.override.timeTillFullOrDrop}s`,zh:`${e.override.timeTillFullOrDrop}`})))}a+=" ";let s;if(e.deleteFn){const c=e.deleteFn;s=l.jsx(Es,{content:"[x]",onClickFn:d=>{c(e.override.type)}})}return l.jsxs("div",{style:{marginTop:10,color:"mediumpurple"},children:[a,s]})}function y2(e){const t=p=>{const O=e.initialResourceOverrides.findIndex(y=>y.type===p);O!==-1&&(e.initialResourceOverrides.splice(O,1),e.setInitialResourceOverrides(e.initialResourceOverrides))},a=e.initialResourceOverrides.map((p,O)=>l.jsx(D2,{job:e.job,override:p,deleteFn:t},O)),o=new Set(e.initialResourceOverrides.map(p=>p.type)),s=Qi(e.job),d=s.entries().flatMap(([p,O])=>o.has(p)?[]:[{rsc:p,isCoolDown:O.isCoolDown?1:0}]).toArray().sort((p,O)=>p.isCoolDown-O.isCoolDown).map((p,O)=>l.jsx("option",{value:p.rsc,children:Ke(p.rsc)},O)),f=e.selectedOverrideResource,h=s.get(f);let m,R=!0;if(h!==void 0){let p,O,y="-1",L,P="0",D;h.isCoolDown?(p=!0,O=!1,R=!1,y=e.overrideTimer,L=e.setOverrideTimer):(h.maxTimeout>=0?(p=!0,y=e.overrideTimer,L=e.setOverrideTimer):p=!1,h.maxValue>1||h.maxValue===h.defaultValue?(O=!0,P=e.overrideStacks,D=e.setOverrideStacks):O=!1,R=Ge[f].mayBeToggled??!1);const k=h.isCoolDown?N({en:"Time till full: ",zh:"CD"}):N(f==="POLYGLOT"?{en:"Time till next stack: ",zh:""}:{en:"Time till drop: ",zh:" "}),G=N({en:"enabled",zh:""});m=l.jsxs("div",{style:{margin:"6px 0"},children:[l.jsx("div",{hidden:!p,children:l.jsx(jt,{description:k,defaultValue:y,onChange:L})}),l.jsx("div",{hidden:!O,children:l.jsx(jt,{description:N({en:"Amount: ",zh:""}),defaultValue:P,onChange:D})}),l.jsxs("div",{hidden:!R,children:[l.jsx("input",{style:{position:"relative",top:3,marginRight:5},type:"checkbox",checked:e.overrideEnabled,onChange:B=>e.setOverrideEnabled(B.target.checked)}),l.jsx("span",{children:G})]})]})}const T=C.useContext(Nn),S=Sl(T,"bgMediumContrast"),g=p=>{p.preventDefault();const O=e.selectedOverrideResource,y=Qi(e.job).get(O);let L=parseFloat(e.overrideTimer);const P=parseInt(e.overrideStacks),D=e.overrideEnabled;if(O==="POLYGLOT"&&e.overrideTimer===""&&(L=0),isNaN(P)||isNaN(L)){window.alert("some inputs are not numbers!");return}let k;if(y.isCoolDown){const G=y.maxStacks*y.cdPerStack;if(L<0||L>G){window.alert("invalid input timeout (must be in range [0, "+G+"])");return}k={type:O,timeTillFullOrDrop:L,stacks:y.maxStacks>1?P:1,effectOrTimerEnabled:!0}}else{if((y.maxValue>1||y.maxValue===y.defaultValue)&&(P<0||P>y.maxValue)){window.alert("invalid input amount (must be in range [0, "+y.maxValue+"])");return}if(y.maxTimeout>=0&&(L<0||L>y.maxTimeout)){window.alert("invalid input timeout (must be in range [0, "+y.maxTimeout+"])");return}k={type:O,timeTillFullOrDrop:y.maxTimeout>=0?L:-1,stacks:y.maxValue>1||y.maxValue===y.defaultValue?P:1,effectOrTimerEnabled:R||D}}e.setInitialResourceOverrides([...e.initialResourceOverrides,k])},_=l.jsx("div",{children:l.jsxs("form",{onSubmit:p=>g(p),style:{marginTop:16,outline:"1px solid "+S,outlineOffset:6},children:[l.jsx("select",{value:e.selectedOverrideResource,onChange:p=>{p.target&&e.setSelectedOverrideResource(p.target.value)},children:d}),m,l.jsx("input",{type:"submit",value:N({en:"add override",zh:""})})]})});return l.jsx("div",{style:{marginTop:10},children:l.jsx(Tl,{title:"overrideInitialResources",titleNode:l.jsxs("span",{children:[N({en:"Override initial resources",zh:""})," ",l.jsx(ze,{topic:"overrideInitialResources",content:N({en:l.jsxs("div",{children:[l.jsx("div",{className:"paragraph",style:{color:"orangered"},children:l.jsx("b",{children:"Can create invalid game states. Go over Instructions/Troubleshoot first and use carefully at your own risk!"})}),l.jsx("div",{className:"paragraph",children:"Also, currently thunder dot buff created this way doesn't actually tick. It just shows the remaining buff timer."}),l.jsx("div",{className:"paragraph",children:"I would recommend saving settings (stats, lines presets, timeline markers etc.) to files first, in case invalid game states really mess up the tool and a complete reset is required."})]}),zh:l.jsxs("div",{children:[l.jsx("div",{className:"paragraph",style:{color:"orangered"},children:l.jsx("b",{children:"/"})}),l.jsx("div",{className:"paragraph",children:"dot"}),l.jsx("div",{className:"paragraph",children:""})]})})})]}),content:l.jsxs("div",{children:[l.jsx("button",{onClick:p=>{e.initialResourceOverrides.length>0&&e.setInitialResourceOverrides([]),p.preventDefault()},children:N({en:"clear all overrides",zh:""})}),a,_]})})})}function v2(e){const t=I.game.lucidTickOffset.toFixed(3),a=N({en:"the random time offset of lucid dreaming ticks relative to mp ticks",zh:"buff"}),o=I.game.dotTickOffset.toFixed(3),s=N({en:"the random time offset of DoT ticks relative to mp ticks",zh:"DoT"}),c=I.gameConfig.procMode,d=I.gameConfig.initialResourceOverrides.length,f=I.gameConfig.legacy_casterTax,h=N({en:`WARNING: this record was created in an earlier version of XIV in the Shell and uses the deprecated caster tax of ${f}s instead of calculating from your FPS input below. Hover for details: `,zh:`${f}`}),m=Tt().warning,R=(g,_)=>{const p=iC[g];if(p.warningContent)return l.jsx("p",{style:{color:_},children:N(p.warningContent)})},T=N({en:l.jsxs("div",{children:[l.jsx("div",{className:"paragraph",children:"The caster tax config is now replaced by 0.1s + FPS tax and is more precise. You can read more about FPS tax in the Github repository wiki's implementation notes section."}),l.jsx("div",{className:"paragraph",style:{color:m},children:"You are strongly encouraged to create a new record (in another timeline slot or from 'apply and reset') and migrate your fight plan. Support for loading legacy files might drop in the future."})]}),zh:l.jsxs("div",{children:[l.jsx("div",{className:"paragraph",children:"0.1s /"}),l.jsx("div",{className:"paragraph",style:{color:m},children:""})]})}),S=l.jsxs("p",{style:{color:m},children:[h,l.jsx(ze,{topic:"legacy-caster-tax",content:T})]});return l.jsxs("div",{style:{textDecoration:e.dirty?"line-through":"none",marginLeft:5,paddingLeft:10,borderLeft:"1px solid "+Tt().bgHighContrast},children:[I.gameConfig.shellVersion<Oo.FpsTax?S:void 0,R(dt[e.job].implementationLevel,m),["CASTER","HEALER"].includes(dt[e.job].role)&&l.jsxs("div",{children:[N({en:"Lucid tick offset ",zh:"& "}),l.jsx(ze,{topic:"lucidTickOffset",content:a}),": ",t]}),I.game.dotResources.length>0&&l.jsxs("div",{children:[N({en:"DoT tick offset ",zh:"& "}),l.jsx(ze,{topic:"dotTickOffset",content:s}),": ",o]}),e.job==="MNK"&&l.jsxs("div",{children:[N({en:"SSS GCD",zh:"GCD"}),":"," ",I.gameConfig.adjustedSksGCD(5,I.game.inherentSpeedModifier()).toFixed(2)]}),l.jsxs("p",{children:[N({en:"Procs",zh:""}),": ",c]}),d>0&&l.jsx("p",{children:N({en:`${d} initial resource override(s)`,zh:`${d}`})})]})}function M2(){const t=(()=>{const T=Rt("playbackSettings");if(T)return JSON.parse(T)})(),[a,o]=C.useState(t?.tickMode??1),[s,c]=C.useState(t?.timeScale??ri.Manual),d=(T,S)=>{const g=JSON.stringify({tickMode:S,timeScale:T});St("playbackSettings",g)},f=T=>{if(!T||!T.target||isNaN(parseInt(T.target.value)))return;c(parseInt(T.target.value));const S=parseInt(T.target.value);isNaN(S)||(I.setTimeControlSettings({tickMode:S,timeScale:a}),d(a,S))},h=T=>{const S=parseFloat(T);o(S),isNaN(S)||(I.setTimeControlSettings({tickMode:s,timeScale:S}),d(S,a))};C.useEffect(()=>{I.setTimeControlSettings({tickMode:s,timeScale:a})});const m={position:"relative",top:3,marginRight:"0.75em"},R={display:"inline-block",marginRight:"0.5em"};return l.jsxs("div",{children:[l.jsxs("p",{children:[l.jsxs("label",{style:R,children:[l.jsx("input",{style:m,type:"radio",onChange:f,value:ri.RealTimeAutoPause,checked:s===ri.RealTimeAutoPause,name:"tick mode"}),N({en:"real-time auto pause",zh:"("})]}),l.jsx(ze,{topic:"ctrl-realTimeAutoPause",content:l.jsxs("div",{className:"toolTip",children:[N({en:l.jsx("div",{className:"paragraph",children:"*Recommended*"}),zh:l.jsx("div",{className:"paragraph",children:"**"})}),N({en:l.jsxs("div",{className:"paragraph",children:["- click to use a skill. if the skill is on cooldown, or you're in an animation lock, then the simulation will automatically skip ahead to when the skill can be used again",l.jsx("br",{}),"- animation locks and cast bars will play out in sped-up real time until done"]}),zh:l.jsx("div",{className:"paragraph",children:"- ; CDCD"})})]})}),l.jsx("br",{}),l.jsxs("label",{style:R,children:[l.jsx("input",{style:m,type:"radio",onChange:f,value:ri.Manual,checked:s===ri.Manual,name:"tick mode"}),N({en:"manual",zh:""})]}),l.jsx(ze,{topic:"ctrl-manual",content:l.jsx("div",{className:"toolTip",children:N({en:l.jsxs("div",{className:"paragraph",children:["- click to use a skill. if the skill is on cooldown, or you're in an animation lock, then the simulation will automatically skip ahead to when the skill can be used again",l.jsx("br",{}),"- animation locks and cast times are skipped immediately"]}),zh:l.jsx("div",{className:"paragraph",children:"- ; CDCD"})})})})]}),l.jsx(jt,{defaultValue:`${a}`,description:l.jsxs("span",{children:[N({en:"time scale ",zh:" "}),l.jsx(ze,{topic:"timeScale",content:l.jsx("div",{children:N({en:"rate at which game time advances automatically (aka when in real-time)",zh:""})})}),":"," "]}),onChange:h})]})}function L2(e){const t=C.useContext(Nn),a=e.imported?Sl(t,"success"):Sl(t,"text");return l.jsx(jt,{style:{color:a},defaultValue:e.initial,description:e.description,onChange:o=>{e.dispatch({[e.name]:o}),e.removeImportedField(e.name)}})}function x2(e){const t=ha(C.useContext(Nn)),[a,o]=C.useState(""),{imported:s,setImported:c}=e,d=async m=>{m.preventDefault();const R=URL.parse(a),T=new Headers;try{if(R&&R.hostname==="etro.gg"){const S=R.pathname.split("/");if(S[1]!=="gearset"&&S.length!==3)throw new Error("Invalid etro gearset link (hover ? in URL input box for details)");T.append("Content-Type","application/json");const g=await fetch("https://etro.gg/api/gearsets/"+S[2],{method:"GET",headers:T});if(g.ok){const _=await g.json(),p=new Map(_.totalParams.map(k=>[k.name,k.value])),O=_.totalParams.length>0?_.totalParams[0].value:0;if(!(_.jobAbbrev in dt))throw new Error("Imported gearset was for a job ("+_.jobAbbrev+") that XIV in the Shell doesn't support");const y=ut.getSubstatBase(parseFloat(_.level)).toString(),L=p.get("SPS")??y,P=p.get("SKS")??y,D=["job","level","criticalHit","directHit","determination","main"];p.has("SPS")&&D.push("spellSpeed"),p.has("SKS")&&D.push("skillSpeed"),p.has("PIE")&&D.push("piety"),p.has("TEN")&&D.push("tenacity"),p.has("Weapon Damage")&&D.push("wd"),e.dispatch({job:_.jobAbbrev,level:_.level,spellSpeed:L,skillSpeed:P,wd:p.get("Weapon Damage"),criticalHit:p.get("CRT"),directHit:p.get("DH"),determination:p.get("DET"),piety:p.get("PIE"),tenacity:p.get("TEN"),main:O}),e.setImportedFields(D),c(!0)}else throw console.error(g),new Error("etro load failed (please check your link)")}else if(R&&R.hostname==="xivgear.app"){const S=R.searchParams.get("page");if(!S)throw new Error("xivgear link must be to a specific set (hover ? in URL input box for details)");const g=S.startsWith("sl|")?S.substr(3):S;T.append("Content-Type","application/json");const _=await fetch("https://api.xivgear.app/fulldata/"+g,{method:"GET",headers:T});if(_.ok){const p=await _.json();if(!(p.job in dt))throw new Error("Imported gearset was for a job ("+p.job+") that XIV in the Shell doesn't support");const O=p.sets[0].computedStats,y=Math.max(...["strength","dexterity","intelligence","mind"].map(D=>O[D]??0)).toString(),L=Math.max(O.wdPhys??0,O.wdMag??0).toString(),P={job:p.job,level:p.level,spellSpeed:O.spellspeed,skillSpeed:O.skillspeed,criticalHit:O.crit,directHit:O.dhit,determination:O.determination,piety:O.piety,tenacity:O.tenacity,wd:L,main:y};e.dispatch(P),e.setImportedFields(Object.keys(P)),c(!0)}else throw console.error("xivgear load failed: "+_),new Error("xivgear load failed (please check your link)")}else throw new Error("Invalid gearset link (must be from etro.gg or xivgear.app)")}catch(S){console.error(S),window.alert(S.message)}},f=l.jsx("a",{href:"https://etro.gg",target:"_blank",rel:"noreferrer",children:"etro"}),h=l.jsx("a",{href:"https://xivgear.app",target:"_blank",rel:"noreferrer",children:"xivgear"});return l.jsxs("form",{onSubmit:d,children:[N({en:l.jsxs("span",{children:["Load stats from ",f,"/",h,":"," "]}),zh:l.jsxs("span",{children:["",f,"",h,""]})}),l.jsx(ze,{topic:"gearImport",content:l.jsxs(l.Fragment,{children:[l.jsx("p",{children:N({en:l.jsxs("span",{children:["Enter and ",l.jsx(xa,{text:"Load"})," a link to a gearset from xivgear.app or etro.gg, edit the rest of config, then"," ",l.jsx(xa,{text:"apply and reset"}),"."]}),zh:l.jsxs("span",{children:["xivgear.appetro.gg",l.jsx(xa,{text:""}),"",l.jsx(xa,{text:""}),""]})})}),l.jsx("p",{children:N({en:"etro: Copy/paste the link to the set (example: https://etro.gg/gearset/e13d5960-4794-4dc4-b273-24ecfed6745e)",zh:"etrohttps://etro.gg/gearset/e13d5960-4794-4dc4-b273-24ecfed6745e"})}),l.jsx("p",{children:N({en:'xivgear: At the top of the page, click "Export" -> "Selected Set" -> "Link to This Set" -> "Generate" (example: https://xivgear.app/?page=sl%7C143f3245-c35b-4391-8b2b-db5cc1a8de9a)',zh:'xivgear "Export" -> "Selected Set" -> "Link to This Set" -> "Generate"https://xivgear.app/?page=sl%7C143f3245-c35b-4391-8b2b-db5cc1a8de9a'})})]})}),l.jsxs("div",{style:{position:"relative",marginTop:5},children:[l.jsx(jt,{style:{display:"inline-block"},width:25,description:"",onChange:m=>o(m)}),l.jsx("span",{children:" "}),l.jsx("input",{style:{display:"inline-block"},type:"submit",value:N({en:"Load",zh:""})}),l.jsx(ZM,{style:{display:s?"inline":"none",color:t.success,position:"relative",top:4,marginLeft:8}})]})]})}function NN(e,t,a,o){const s=parseInt(a),c=parseInt(e),d=parseFloat(t);let f,h;if(isNaN(s)||isNaN(c)||isNaN(d)||c<ut.getSubstatBase(s))f="n/a",h="n/a";else{const m=ut.preTaxGcd(s,c,2.5,o);f=m.toFixed(2),h=ut.afterFpsTax(d,m).toFixed(3)}return{gcdStr:f,taxedGcdStr:h}}function H2(e){const t=new Map(e.map(d=>[d.type,d]));if(t.has("ASTRAL_FIRE")&&t.has("UMBRAL_ICE")){const d=t.get("ASTRAL_FIRE").stacks,f=t.get("UMBRAL_ICE").stacks;if(d>0&&f>0)return window.alert("shouldn't have both AF and UI stacks"),!1}let a=0,o=0,s=0;if(t.has("ASTRAL_FIRE")&&(a=t.get("ASTRAL_FIRE").stacks),t.has("UMBRAL_ICE")&&(o=t.get("UMBRAL_ICE").stacks),t.has("UMBRAL_HEART")&&(s=t.get("UMBRAL_HEART").stacks),s>0&&a===0&&o===0)return window.alert("since there's at least one UH stack, there should also be Enochian and AF or UI"),!1;let c=!1;return(a>0||o>0||s>0)&&(c=!0),t.has("POLYGLOT")&&t.get("POLYGLOT").timeTillFullOrDrop>0&&!c?(window.alert("since a timer for polyglot is set (time till next stack > 0), there must also be AF/UI"),!1):!0}function k2(){const e=ha(C.useContext(Nn)),[t,a]=C.useState(void 0),[o,s]=C.useState(Oo.AllaganGcdFormula),[c,d]=C.useState([]),[f,h]=C.useState("0"),[m,R]=C.useState("0"),[T,S]=C.useState(!0),g=me=>{G(!0),d(me),O(me)},[_,p]=C.useState("NEVER"),O=me=>{const Ce=new Set(me.map(_e=>_e.type)),ge=Qi(D.job).keys().find(_e=>!Ce.has(_e))??"NEVER";p(ge)},[y,L]=C.useState(!1);function P(me,Ce){const ge={...me,...Ce};if(!Object.is(ge,me)){if(ge.dirty=Ce.dirty??!0,Ce.job!==void 0&&Ce.job!==me.job){const _e=new ci(AR(Ce.job,parseInt(Ce.level??me.level))),De=Dr(_e).inherentSpeedModifier();if(a(De),Ce.job===I.record.config?.job)Object.assign(ge,I.gameConfig.serialized()),d(I.gameConfig.initialResourceOverrides);else{d([]);const Be=Qi(Ce.job).keys().toArray()?.[0]??"NEVER";p(Be),Object.assign(ge,Iw(Ce.job))}}if(Ce.level!==void 0&&Ce.level!==me.level){const _e=new ci(AR(me.job,parseInt(Ce.level))),De=Dr(_e).inherentSpeedModifier();a(De)}L(parseInt(ge.level)!==I.gameConfig.level||ge.job!==I.gameConfig.job)}return ge}const[D,k]=C.useReducer(P,{job:"BLM",level:`${$e.lvl100}`,spellSpeed:"0",skillSpeed:"0",criticalHit:"0",directHit:"0",determination:"0",piety:"0",animationLock:"0",fps:"0",gcdSkillCorrection:"0",timeTillFirstManaTick:"0",countdown:"0",randomSeed:"",procMode:ua.RNG,tenacity:"0",wd:"0",main:"0",dirty:!1}),G=me=>k({dirty:me}),B=me=>Ce=>k({[me]:Ce}),[K,V]=C.useState(!1),ae=Object.fromEntries(Object.keys(D).map(me=>[me,!1])),[oe,j]=C.useState(ae),$=me=>{j({...oe,...Object.fromEntries(me.map(Ce=>[Ce,!0]))})},X=me=>{j({...oe,[me]:!1})},ce=()=>{j(ae),V(!1)};C.useEffect(()=>{cD=me=>{s(me.shellVersion),g(me.initialResourceOverrides),k({...Object.fromEntries(Object.entries(me).flatMap(([Ce,ge])=>Ce!=="initialResourceOverrides"?[[Ce,ge.toString()]]:[]))}),G(!1),ce(),O(me.initialResourceOverrides)}});const w=me=>oe[me]?e.success:e.text,z=l.jsxs("div",{style:{marginBottom:10},children:[l.jsx("span",{children:N({en:"job: ",zh:""})}),l.jsx("select",{style:{outline:"none",color:w("job")},value:D.job,onChange:me=>{X("job"),k({job:me.target.value})},children:us.filter(me=>dt[me].implementationLevel!=="UNIMPLEMENTED").map(me=>{const Ce=N({en:me,zh:dt[me].zh}),ge=dt[me].implementationLevel;return ge!=="LIVE"?l.jsx("option",{value:me,children:Ce+` (${N(iC[ge].label??{en:""})})`},me):l.jsx("option",{value:me,children:Ce},me)})})]}),{gcdStr:se,taxedGcdStr:Ee}=NN(D.spellSpeed,D.fps,D.level,t),{gcdStr:M,taxedGcdStr:ee}=NN(D.skillSpeed,D.fps,D.level,t),de=o>=Oo.FpsTax?e.text:e.warning,W=D.job,Y=dt[W].role==="CASTER"||dt[W].role==="HEALER",Q={en:Y?"spell":"skill",zh:Y?"":""},x=me=>ut.preTaxGcd(parseFloat(D.level),parseFloat(Y?D.spellSpeed:D.skillSpeed),me,t),Z=me=>ut.afterFpsTax(parseFloat(D.fps),x(me)),ne=l.jsxs("div",{children:[l.jsx("style",{children:O2(e.bgHighContrast)}),l.jsx("div",{style:{marginBottom:10},children:N({en:`Preview numbers based on your current ${Q.en} speed and FPS input:`,zh:`${Q.zh}`})}),l.jsx("table",{className:"castTimeTable",children:l.jsxs("tbody",{children:[l.jsxs("tr",{children:[l.jsx("th",{children:N({en:"GCD time",zh:"GCD"})}),l.jsx("th",{children:N({en:"After FPS tax",zh:""})})]}),[2.5,3,3.5,4].map((me,Ce)=>l.jsxs("tr",{children:[l.jsxs("td",{children:[x(me).toFixed(2)," (",me.toFixed(2)," ",N({en:"base",zh:""}),")"]}),l.jsx("td",{children:Z(me).toFixed(3)})]},"gcdPreview"+Ce.toString()))]})})]}),fe=(me,Ce)=>{if(me.preventDefault(),!Ce&&y){console.error("attempted to apply w/o reset, but job or level changed");return}if(H2(c)){let ge=D.randomSeed;if(ge.length===0){for(let $t=0;$t<4;$t++)ge+=Math.floor(Math.random()*10).toString();k({randomSeed:ge})}const _e=["spellSpeed","skillSpeed","criticalHit","directHit","determination","animationLock","fps","gcdSkillCorrection","timeTillFirstManaTick","countdown","level","wd","main","piety","tenacity"];if(_e.map($t=>isNaN(parseFloat(D[$t].toString()))).some($t=>$t)){window.alert("Some config fields are not numbers!");return}if(!(D.job in dt)){window.alert("Invalid job: "+D.job);return}const De=I.gameConfig.serialized(),Be=I.record.serialized();I.setConfigAndRestart({job:D.job,randomSeed:ge.trim(),procMode:D.procMode,initialResourceOverrides:c,...Object.fromEntries(_e.map($t=>[$t,parseFloat(D[$t].toString())]))},Ce),I.undoStack.push(new Aw(De,I.gameConfig.serialized(),Ce?Be:void 0)),G(!1),L(!1),ce(),I.updateAllDisplay(),I.scrollToTime()}},Ne=["criticalHit","directHit","determination","piety","animationLock"].map(me=>l.jsx(L2,{name:me,description:iu(me),initial:D[me].toString(),dispatch:k,imported:oe[me],removeImportedField:Ce=>X(Ce)},me)),Me=l.jsxs("div",{style:{marginBottom:16},children:[l.jsxs("div",{children:[l.jsx("span",{children:N({en:"level: ",zh:""})}),l.jsxs("select",{style:{outline:"none",color:w("level")},value:D.level,onChange:me=>k({level:me.target.value}),children:[(D.level==="100"||W!=="BLU")&&l.jsx("option",{value:$e.lvl100,children:"100"},$e.lvl100),(D.level==="90"||W!=="BLU")&&l.jsx("option",{value:$e.lvl90,children:"90"},$e.lvl90),l.jsx("option",{value:$e.lvl80,children:"80"},$e.lvl80),l.jsx("option",{value:$e.lvl70,children:"70"},$e.lvl70)]})]}),l.jsxs("div",{children:[l.jsx(jt,{style:{display:"inline-block",color:w("spellSpeed")},defaultValue:D.spellSpeed,description:iu("spellSpeed"),onChange:B("spellSpeed")}),l.jsxs("span",{children:[" ","(GCD: ",se," ",l.jsx(ze,{topic:"gcdPreview",content:l.jsxs(l.Fragment,{children:[l.jsx("p",{children:N({en:"Preview of displayed GCD based on your spell speed.",zh:"GCD."})}),l.jsx("p",{children:N({en:`Measured average GCD should be ${Ee} due to FPS tax.`,zh:`GCD${Ee}`})})]})}),")"]})]}),l.jsxs("div",{children:[l.jsx(jt,{style:{display:"inline-block",color:w("skillSpeed")},defaultValue:D.skillSpeed,description:iu("skillSpeed"),onChange:B("skillSpeed")}),l.jsxs("span",{children:[" ","(GCD: ",M," ",l.jsx(ze,{topic:"sksGcdPreview",content:l.jsxs(l.Fragment,{children:[l.jsx("p",{children:N({en:"Preview of displayed GCD based on your skill speed.",zh:"GCD."})}),l.jsx("p",{children:N({en:`Measured average GCD should be ${ee} due to FPS tax.`,zh:`GCD${ee}`})})]})}),")"]})]}),Ne,l.jsxs("div",{children:[l.jsx(jt,{componentColor:de,style:{display:"inline-block"},defaultValue:D.fps,description:iu("fps"),onChange:B("fps")}),l.jsxs("span",{children:[" ","(",N({en:`${x(2.5).toFixed(2)}s w/ tax`,zh:`${x(2.5).toFixed(2)}s+`}),": ",Z(2.5).toFixed(3)," ",l.jsx(ze,{topic:"gcdTaxPreview",content:ne}),")"]})]}),l.jsx(jt,{componentColor:de,defaultValue:D.gcdSkillCorrection,description:l.jsxs("span",{children:[N({en:"GCD correction",zh:"GCD"})," ",l.jsx(ze,{topic:"cast-time-correction",content:N({en:"Leaving this at 0 will probably give you the most accurate simulation. But if you want to manually correct your GCD skill durations (including casts) for whatever reason, you can put a small number (can be negative)",zh:"0GCD"})}),":"," "]}),onChange:B("gcdSkillCorrection")}),l.jsx(jt,{defaultValue:D.timeTillFirstManaTick,description:N({en:"time till first MP tick: ",zh:""}),onChange:B("timeTillFirstManaTick")}),l.jsx(jt,{defaultValue:D.countdown,description:l.jsxs("span",{children:[N({en:"countdown ",zh:" "}),l.jsx(ze,{topic:"countdown",content:N({en:"can use a negative countdown to start from a specific time of fight",zh:""})}),":"," "]}),onChange:B("countdown")}),l.jsx(jt,{defaultValue:D.randomSeed,description:l.jsxs("span",{children:[N({en:"random seed ",zh:" "}),l.jsx(ze,{topic:"randomSeed",content:N({en:"can be anything, or leave empty to get 4 random digits.",zh:"4"})}),":"," "]}),onChange:B("randomSeed")}),l.jsxs("div",{children:[l.jsxs("span",{children:[N({en:"proc mode ",zh:"BUFF "}),l.jsx(ze,{topic:"procMode",content:N({en:"Default RNG: 40% Firestarter",zh:"RNG40%AlwaysNever"})}),":"," "]}),l.jsxs("select",{style:{outline:"none"},value:D.procMode,onChange:me=>k({procMode:me.target.value}),children:[l.jsx("option",{value:ua.RNG,children:"RNG"},ua.RNG),l.jsx("option",{value:ua.Never,children:"Never"},ua.Never),l.jsx("option",{value:ua.Always,children:"Always"},ua.Always)]})]}),l.jsx(y2,{job:D.job,initialResourceOverrides:c,overrideTimer:f,overrideStacks:m,overrideEnabled:T,setInitialResourceOverrides:g,selectedOverrideResource:_,setSelectedOverrideResource:p,setOverrideTimer:h,setOverrideStacks:R,setOverrideEnabled:S})]});return l.jsxs("div",{style:{marginBottom:20},children:[l.jsx(x2,{imported:K,setImported:V,setImportedFields:$,dispatch:k}),l.jsx("br",{}),z,l.jsx(v2,{job:I.getActiveJob(),dirty:D.dirty}),Me,l.jsx("p",{style:{paddingBottom:5},children:N({en:"You can also import/export fights from/to local files at the bottom of the page.",zh:""})}),l.jsx("div",{className:"invisibleScrollbar",style:{boxSizing:"border-box",width:"100%",position:"absolute",paddingRight:5,paddingLeft:5,bottom:0,left:0,overflowY:"scroll"},children:l.jsxs("div",{style:{width:"100%",boxSizing:"border-box",backgroundColor:e.background,borderTop:"1px solid "+e.bgMediumContrast,paddingTop:5,paddingBottom:5,display:"flex",flexDirection:"row",justifyContent:"space-between",gap:5},children:[l.jsxs("button",{onClick:me=>fe(me,!1),style:{width:"100%",fontWeight:!y&&D.dirty?"bold":"normal",textDecoration:y?"line-through":void 0},disabled:y,children:[N({en:"apply",zh:""}),y&&" ",y&&l.jsx(ze,{topic:"applyWithoutReset",content:N({en:"Must reset timeline because job or level changed.",zh:""})}),!y&&D.dirty?"*":""]}),l.jsxs("button",{onClick:me=>fe(me,!0),style:{width:"100%",fontWeight:D.dirty?"bold":"normal"},children:[N({en:"apply and reset",zh:""}),D.dirty?"*":""]})]})})]})}function uD(e){let t=us[0],a=0;return us.forEach(o=>{const s=e.reduce((c,d)=>uH(o,d)?c+1:c,0);s>a&&(t=o,a=s)}),t}class U2{presetLines=[];constructor(){this.#t()}#e(){St("presetLines",JSON.stringify(this.serialized()))}#t(){const t=Rt("presetLines");if(t!==null){const a=JSON.parse(t);return this.deserializeAndAppend(a),!0}return!1}serialized(){return{fileType:di.SkillSequencePresets,presets:this.presetLines.map(({actions:t,job:a})=>t.serialized())}}deserializeAndAppend(t){for(const a of t.presets){const o=wr.deserialize(a.actions);o.name=a.name;const s=o.actions.flatMap(c=>c.info.type===ke.Skill?[c.info.skillName]:[]);this.addLine(o,a.job??uD(s))}}getLinesForJob(t){return this.presetLines.flatMap(({actions:a,job:o})=>o===t?[a]:[])}addLine(t,a){this.presetLines.push({actions:t,job:a}),Al(),this.#e()}deleteLine(t){for(let a=0;a<this.presetLines.length;a++)if(this.presetLines[a].actions===t){this.presetLines.splice(a,1),Al(),this.#e();return}console.assert(!1)}deleteAllLines(){this.presetLines=[],Al(),this.#e()}}const P2=new Set(["BLIZZARD","FIRE","BLIZZARD_II","FIRE_II","BLIZZARD_III","FIRE_III","FREEZE","FLARE","BLIZZARD_IV","FIRE_IV","DESPAIR","HIGH_FIRE_II","HIGH_BLIZZARD_II","FLARE_STAR"]),w2=new Set(["FOUL","XENOGLOSSY","PARADOX"]),sl=new Set([]),Jn=e=>I.getUntargetableMask()&&I.timeline.duringUntargetable(e),Xr=(e,t)=>I.getUntargetableMask()?I.timeline.getTargetableDurationBetween(e,t):t-e;function ts(e){return e.info.type===ke.Skill&&I.game.dotSkills.includes(e.info.skillName)}function G2(e,t,a){console.assert(ts(e),`${e.getNameForMessage()} is not registered as a dot skill`);const o=e.getInitialPotency(),s={castTime:e.tmp_startLockTime?e.tmp_startLockTime-I.gameConfig.countdown:0,applicationTime:e.applicationTime?e.applicationTime-I.gameConfig.countdown:0,displayedModifiers:[],gap:0,override:0,mainPotencyHit:!0,baseMainPotency:0,baseDotPotency:0,initialHitCalculationModifiers:[],tickCalculationModifiers:[],totalNumTicks:0,numHitTicks:0,potencyWithoutPot:0,potPotency:0,partyBuffPotency:0,mainHitFalloff:o?.falloff??0};s.gap=e.getOverTimeGap(t,"damage",a),s.override=e.getOverTimeOverrideAmount(t,"damage",a),s.baseMainPotency=o?.base??0,s.initialHitCalculationModifiers=o?.getDisplayedModifiers([a])??[],s.mainPotencyHit=e.hitBoss(Jn),s.tickCalculationModifiers=s.initialHitCalculationModifiers.filter(h=>h.source!==U.COMBO&&h.source!==U.POSITIONAL),t==="WILDFIRE"&&s.displayedModifiers.push(U.NO_CDH);for(let h=0;h<s.initialHitCalculationModifiers.length;h++){const m=s.initialHitCalculationModifiers[h].source;[U.ENO,U.FUGETSU,U.NO_MERCY,U.POWER_SURGE,U.LANCE_CHARGE,U.LIFE_OF_THE_DRAGON,U.BATTLE_LITANY,U.FIGHT_OR_FLIGHT,U.MOON_FLUTE,U.WHISTLE,U.BRISTLE,U.TINGLEA,U.TINGLEB,U.DIVINATION,U.CHAIN_STRAT].includes(m)&&s.displayedModifiers.push(m)}e.getDotPotencies(t).forEach(h=>{h.hasResolved()&&h.hasTarget(a)&&(s.totalNumTicks++,s.baseDotPotency=h.base,h.hasHitBoss(Jn)&&s.numHitTicks++)});const c=e.getPotency({tincturePotencyMultiplier:1,includePartyBuffs:!1,untargetable:Jn,includeSplash:!1,targetNumber:a}).applied,d=e.getPotency({tincturePotencyMultiplier:I.getTincturePotencyMultiplier(),includePartyBuffs:!1,untargetable:Jn,includeSplash:!1,targetNumber:a}).applied,f=e.getPotency({tincturePotencyMultiplier:I.getTincturePotencyMultiplier(),includePartyBuffs:!0,untargetable:Jn,includeSplash:!1,targetNumber:a}).applied;return s.potencyWithoutPot=c,s.potPotency=d-c,s.partyBuffPotency=f-d,s}function B2(e){const t={basePotency:0,displayedModifiers:[],calculationModifiers:[],falloff:1,targetList:[1]};if(e.info.type===ke.Skill){const a=e.info.skillName,o=e.getInitialPotency(),s=o?.getDisplayedModifiers(e.targetList);if(o)if(t.targetList=e.targetList,t.falloff=o.falloff??1,P2.has(a)){t.basePotency=o.base,t.calculationModifiers=s;for(const c of t.calculationModifiers){const d=c.source;if(d!==U.ENO&&d!==U.POT){t.displayedModifiers.push(d);break}}}else if(w2.has(a))for(const c of o.getDisplayedModifiers(e.targetList)){const d=c.source;if(d===U.ENO){t.basePotency=o.base,t.displayedModifiers=[d],t.calculationModifiers=s;break}}else if(ts(e))t.basePotency=o.base,e.info.targetList=o.targetList;else{t.basePotency=o.base;for(const c of s){const d=c.source;d!==U.POT&&(t.displayedModifiers.push(d),t.calculationModifiers.push(c))}}return t}else return console.assert(!1),t}function F2(e,t){if(e.length!==t.length)return!1;for(let a=0;a<e.length;a++)if(e[a]!==t[a])return!1;return!0}function j2(e,t){const a=B2(t),o={mainTableIndex:-1,expandedNode:a};for(let s=0;s<e.length;s++)if(t.info.type===ke.Skill&&t.info.skillName===e[s].skillName&&F2(a.displayedModifiers,e[s].displayedModifiers)&&t.targetList.length===e[s].targetCount)return o.mainTableIndex=s,o;return o}function ui(e){return!sl.has(e)}function z2(){return sl.size===0}function CN(e){e.include&&sl.has(e.skillNameOrDoT)?(sl.delete(e.skillNameOrDoT),e.skillNameOrDoT==="DoT"?I.game.dotSkills.forEach(t=>sl.delete(t)):I.game.dotSkills.includes(e.skillNameOrDoT)&&sl.delete("DoT")):(sl.add(e.skillNameOrDoT),e.skillNameOrDoT!=="DoT"&&I.game.dotSkills.includes(e.skillNameOrDoT)&&sl.add("DoT")),I.displayCurrentState(),I.updateStats()}function Y2(e){const t={totalDuration:0,targetableDuration:0,potency:{applied:0,pending:0},gcdSkills:{applied:0,pending:0}},a=I.record.getFirstSelection(),o=I.record.getLastSelection();if(a&&o&&a.tmp_startLockTime!==void 0&&o.tmp_endLockTime!==void 0){t.totalDuration=o.tmp_endLockTime-a.tmp_startLockTime;const s=I.gameConfig.countdown;t.targetableDuration=Xr(a.tmp_startLockTime-s,o.tmp_endLockTime-s)}return I.record.iterateSelected(s=>{if(s.info.type===ke.Skill&&!(s.info.skillName in Do)){const c=ui(s.info.skillName);I.game.skillsList.get(s.info.skillName).cdName==="cd_GCD"&&c&&(s.hitBoss(Jn)?t.gcdSkills.applied++:s.resolved()||t.gcdSkills.pending++);const f=s.getPotency({tincturePotencyMultiplier:I.getTincturePotencyMultiplier(),untargetable:Jn,includePartyBuffs:!0,excludeDoT:ts(s)&&!ui("DoT"),includeSplash:!0});c&&(t.potency.applied+=f.applied,t.potency.pending+=f.snapshottedButPending)}}),t}function K2(e){let t=cu.Normal;I.displayingUpToDateGameState||(t=cu.Historical),I.record.getFirstSelection()&&(t=cu.Selected);const a={applied:0,pending:0},o={applied:0,pending:0},s=[],c={totalPotencyWithoutPot:0,totalPotPotency:0,totalPartyBuffPotency:0},d=new Map,f=new Map,h=m=>{if(m.info.type===ke.Skill){const R=m.info.skillName,T=ui(R),S=R in Do;I.game.skillsList.get(R).cdName==="cd_GCD"&&T&&(m.hitBoss(Jn)?o.applied++:m.resolved()||o.pending++);const _=m.getPotency({tincturePotencyMultiplier:I.getTincturePotencyMultiplier(),untargetable:Jn,includePartyBuffs:!0,includeSplash:!0,excludeDoT:ts(m)&&!ui("DoT")});if(T&&!S&&(a.applied+=_.applied,a.pending+=_.snapshottedButPending),m.resolved()){const p=j2(s,m);p.mainTableIndex<0&&(s.push({skillName:R,displayedModifiers:p.expandedNode.displayedModifiers,basePotency:S?0:p.expandedNode.basePotency,calculationModifiers:p.expandedNode.calculationModifiers,usageCount:0,hitCount:0,totalPotencyWithoutPot:0,showPotency:m.anyPotencies(),potPotency:0,potCount:0,partyBuffPotency:0,falloff:p.expandedNode.falloff,targetCount:p.expandedNode.targetList.length}),p.mainTableIndex=s.length-1);const O=m.hitBoss(Jn);if(s[p.mainTableIndex].usageCount+=1,O&&(s[p.mainTableIndex].hitCount+=1),S)return;const y=m.getPotency({tincturePotencyMultiplier:1,untargetable:Jn,includePartyBuffs:!1,excludeDoT:ts(m)&&!ui("DoT"),includeSplash:!0}).applied,L=m.getPotency({tincturePotencyMultiplier:I.getTincturePotencyMultiplier(),untargetable:Jn,includePartyBuffs:!1,excludeDoT:ts(m)&&!ui("DoT"),includeSplash:!0}).applied,P=m.getPotency({tincturePotencyMultiplier:I.getTincturePotencyMultiplier(),untargetable:Jn,includePartyBuffs:!0,excludeDoT:ts(m)&&!ui("DoT"),includeSplash:!0}).applied;s[p.mainTableIndex].totalPotencyWithoutPot+=y,s[p.mainTableIndex].potPotency+=L-y,s[p.mainTableIndex].partyBuffPotency+=P-L,O&&m.hasBuff(H.Tincture)&&(s[p.mainTableIndex].potCount+=1);let D=f.get(R)??0;D+=P,f.set(R,D),T&&(c.totalPotencyWithoutPot+=y,c.totalPotPotency+=L-y,c.totalPartyBuffPotency+=P-L),m.getAllDotPotencies().forEach((k,G)=>{let B=d.get(G);B||(B=new Map,d.set(G,B));const K=I.game.excludedDoTs.includes(G);[...new Set(k.flatMap(ae=>ae.targetList))].sort().forEach(ae=>{let oe=B.get(ae);oe===void 0&&(oe={tableRows:[],summary:{cumulativeGap:0,cumulativeOverride:0,timeSinceLastDoTDropped:0,totalTicks:0,maxTicks:I.getMaxTicks(I.game.time,G,K),dotCoverageTimeFraction:I.getDotCoverageTimeFraction(I.game.getDisplayTime(),G,ae),totalPotencyWithoutPot:0,totalPotPotency:0,totalPartyBuffPotency:0},lastDoT:void 0},B.set(ae,oe));const j=G2(m,G,ae);oe.tableRows.push(j),oe.lastDoT=m,oe.summary.cumulativeGap+=j.gap,oe.summary.cumulativeOverride+=j.override,oe.summary.totalTicks+=j.numHitTicks,oe.summary.totalPotencyWithoutPot+=j.potencyWithoutPot,oe.summary.totalPotPotency+=j.potPotency,oe.summary.totalPartyBuffPotency+=j.partyBuffPotency})})}}};return t===cu.Selected?I.record.iterateSelected(h):I.record.iterateAll(h),d.forEach((m,R)=>{m.forEach((T,S)=>{if(T.lastDoT){const g=T.lastDoT.applicationTime;console.assert(g!==void 0,`DoT node for ${R} was not resolved`);const _=g+I.game.getStatusDuration(R),p=Xr(_,I.game.getDisplayTime()),O=I.game.getDisplayTime()-_;O>0&&(T.summary.cumulativeGap+=p,T.summary.timeSinceLastDoTDropped=O)}else{const g=Xr(0,Math.max(0,I.game.getDisplayTime()));T.summary.cumulativeGap=g,T.summary.timeSinceLastDoTDropped=g}})}),s.sort((m,R)=>{if(m.showPotency!==R.showPotency){const T=m.showPotency?1:0;return(R.showPotency?1:0)-T}else if(m.skillName!==R.skillName){const T=f.get(m.skillName)??0,S=f.get(R.skillName)??0;return T===S?m.skillName.localeCompare(R.skillName):S-T}else{if(m.targetCount!==R.targetCount)return m.targetCount-R.targetCount;if(m.displayedModifiers.length!==R.displayedModifiers.length)return R.displayedModifiers.length-m.displayedModifiers.length;for(let T=0;T<m.displayedModifiers.length;T++){const S=m.displayedModifiers[T]-R.displayedModifiers[T];if(S!==0)return S}return 0}}),{time:I.game.time,tinctureBuffPercentage:e.tinctureBuffPercentage,totalPotency:a,lastDamageApplicationTime:e.lastDamageApplicationTime,countdown:I.gameConfig.countdown,gcdSkills:o,mainTable:s,mainTableSummary:c,dotTables:d,mode:t}}var cu=(e=>(e[e.Normal=0]="Normal",e[e.Historical=1]="Historical",e[e.Selected=2]="Selected",e))(cu||{});let CR=e=>{},dD=e=>{};function hD(e){const t=iH(e.buff),a=Jx(e.buff);return l.jsx("span",{style:{borderRadius:2,border:"1px solid "+a,fontSize:11,marginRight:4,padding:"1px 4px",background:a+"1f"},children:l.jsx("b",{style:{color:a},children:t})})}function bR(e){let t=e.basePotency,a=e.basePotency.toFixed(2)+N({en:"(base)",zh:"()"});e.explainUntargetable&&(a+=N({en:"(untargetable)",zh:"()"}));let o="";if(e.calc.forEach(s=>{s.kind==="adder"&&s.additiveAmount>0&&(t+=s.additiveAmount,o+=" + "+s.additiveAmount+"("+lp(s.source)+")")}),o&&(a="[ "+a+o+" ]"),e.calc.forEach(s=>{s.kind==="multiplier"&&s.potencyFactor!==1&&(t*=s.potencyFactor,a+="  "+s.potencyFactor+"("+lp(s.source)+")")}),e.targetCount&&e.falloff!==void 0&&e.targetCount>1){const s=1+(1-e.falloff)*(e.targetCount-1);a=`[ ${a} ]  ${s}(${e.targetCount}${N({en:" targets",zh:""})})`,t*=s}return l.jsxs("span",{style:{textDecoration:e.includeInStats?"none":"line-through"},children:[t.toFixed(2)," ",l.jsx(ze,{topic:e.helpTopic,content:a})]})}function V2(){const[e,t]=C.useState("8"),a=s=>{t(s);const c=parseFloat(s);isNaN(c)||(I.setTinctureBuffPercentage(c),St("tinctureBuffPercentage",s))};C.useEffect(()=>{const s=Rt("tinctureBuffPercentage");s!==null&&a(s)},[]);const o=l.jsxs("span",{children:[N({en:"exclude damage when untargetable",zh:"Boss0"})," ",l.jsx(ze,{topic:"untargetableMask",content:l.jsxs("div",{children:[l.jsx("div",{className:"paragraph",children:N({en:"Having this checked will exclude damages from untargetable phases.",zh:"Boss"})}),l.jsx("div",{className:"paragraph",children:N({en:'You can mark up such phases using timeline markers of type "Untargetable".',zh:"  "})}),l.jsx("div",{className:"paragraph",children:N({en:"This is just a statistics helper though. For example it doesn't prevent you from using skills when the boss is untargetable.",zh:"  "})})]})})]});return l.jsxs("div",{children:[l.jsx(jt,{defaultValue:e,description:N({en:" tincture potency buff ",zh:" "}),onChange:a,width:2,style:{display:"inline"}}),l.jsx("span",{children:"%"}),l.jsx(su,{uniqueName:"untargetableMask",label:o,onChange:s=>{I.setUntargetableMask(s)}})]})}const fD="0.375em 0.75em",Ht=function(e){return{verticalAlign:"middle",boxSizing:"border-box",display:"inline-block",width:e+"%",padding:fD}};function W2(e){const t=Tt(),a=e.row.displayedModifiers.map((S,g)=>l.jsx(hD,{buff:S},g)),o=e.row.gap.toFixed(3),s=e.row.gap>0?l.jsx("span",{children:o}):l.jsx("span",{}),c=e.row.override.toFixed(3),d=e.row.override>0?l.jsx("span",{children:c}):l.jsx("span",{}),f=l.jsx(bR,{basePotency:e.row.mainPotencyHit?e.row.baseMainPotency:0,includeInStats:!0,explainUntargetable:!e.row.mainPotencyHit,helpTopic:e.name+"Table-main-"+e.targetNumber,calc:e.row.initialHitCalculationModifiers,targetCount:1,falloff:e.row.mainHitFalloff}),h=l.jsx(bR,{basePotency:e.row.baseDotPotency,includeInStats:!0,helpTopic:e.name+"Table-dot-"+e.targetNumber,calc:e.row.tickCalculationModifiers,targetCount:1,falloff:0}),m=e.row.totalNumTicks-e.row.numHitTicks,R=l.jsxs("span",{children:[e.row.numHitTicks,m>0?l.jsxs("span",{style:{color:t.timeline.untargetableDamageMark+"af"},children:[" ","+",m," ",l.jsx(ze,{topic:e.name+"Table-numUntargetableTicks-"+e.targetNumber,content:N({en:"tick(s) when untargetable",zh:"BossDoT"})})]}):void 0]}),T=l.jsxs("span",{children:[e.row.potencyWithoutPot.toFixed(2),e.row.potPotency>0?l.jsxs("span",{style:{color:t.timeline.potCover},children:[" ","+",e.row.potPotency.toFixed(2),"(",N({en:"pot",zh:""}),")"]}):void 0,e.row.partyBuffPotency>0?l.jsxs("span",{style:{color:t.accent},children:[" ","+",e.row.partyBuffPotency.toFixed(2),"(",N({en:"party",zh:""}),")"]}):void 0]});return l.jsxs("div",{style:{textAlign:"left",position:"relative",borderTop:"1px solid "+t.bgMediumContrast},children:[l.jsx("div",{style:Ht(8),children:e.row.castTime.toFixed(3)}),l.jsx("div",{style:Ht(8),children:e.row.applicationTime.toFixed(3)}),l.jsx("div",{style:Ht(12),children:a}),l.jsx("div",{style:Ht(10),children:s}),l.jsx("div",{style:Ht(10),children:d}),l.jsx("div",{style:Ht(10),children:f}),l.jsx("div",{style:Ht(10),children:h}),l.jsx("div",{style:Ht(8),children:R}),l.jsx("div",{style:Ht(24),children:T})]})}function X2(e){const t=e.summary,a=e.headerCellStyle,o=`${Ke(e.dotName)}  Boss ${e.targetNumber} ${e.dotHeaderSuffix}`,s=Tt(),c=e.tableRows.map((d,f)=>l.jsx(W2,{name:e.dotName,targetNumber:e.targetNumber,row:d},f));return l.jsxs("div",{style:{position:"relative",margin:"0 auto",marginBottom:40,maxWidth:960},children:[l.jsx("div",{style:{...Ht(100),textAlign:"center",marginBottom:10},children:l.jsx("b",{style:{color:s.text},children:o})}),l.jsxs("div",{style:{outline:"1px solid "+s.bgMediumContrast},children:[l.jsxs("div",{children:[l.jsx("div",{style:{display:"inline-block",width:"8%"},children:l.jsx("span",{style:a,children:l.jsx("b",{children:N({en:"cast time",zh:""})})})}),l.jsx("div",{style:{display:"inline-block",width:"8%"},children:l.jsx("span",{style:a,children:l.jsx("b",{children:N({en:"application time",zh:""})})})}),l.jsx("div",{style:{display:"inline-block",width:"12%"},children:l.jsx("span",{style:a})}),l.jsx("div",{style:{display:"inline-block",width:"10%"},children:l.jsxs("span",{style:a,children:[l.jsxs("b",{children:[N({en:"gap",zh:"DoT"})," "]}),l.jsx(ze,{topic:`dot-gap-title-${e.dotName}-${e.targetNumber}`,content:N({en:l.jsxs("div",{children:[l.jsx("div",{className:"paragraph",children:"DoT coverage time gap since pull or previous application"}),l.jsx("div",{className:"paragraph",children:"The last row also includes gap at the beginning and end of the fight"})]}),zh:l.jsx("div",{children:"DoTDoT"})})})]})}),l.jsx("div",{style:{display:"inline-block",width:"10%"},children:l.jsxs("span",{style:a,children:[l.jsxs("b",{children:[N({en:"override",zh:"DoT"})," "]}),l.jsx(ze,{topic:`dot-override-title-${e.dotName}-${e.targetNumber}`,content:N({en:l.jsx("div",{children:"Overridden DoT time from previous application"}),zh:l.jsx("div",{children:"DoT"})})})]})}),l.jsx("div",{style:{display:"inline-block",width:"10%"},children:l.jsx("span",{style:a,children:l.jsx("b",{children:N({en:"initial",zh:""})})})}),l.jsx("div",{style:{display:"inline-block",width:"10%"},children:l.jsx("span",{style:a,children:l.jsx("b",{children:N({en:"DoT",zh:"DoT"})})})}),l.jsx("div",{style:{display:"inline-block",width:"8%"},children:l.jsx("span",{style:a,children:l.jsx("b",{children:N({en:"ticks",zh:"DoT"})})})}),l.jsx("div",{style:{display:"inline-block",width:"24%"},children:l.jsx("span",{style:a,children:l.jsx("b",{children:N({en:"total",zh:""})})})})]}),c,l.jsxs("div",{style:{textAlign:"left",position:"relative",borderTop:"1px solid "+s.bgMediumContrast},children:[l.jsx("div",{style:Ht(28)}),l.jsx("div",{style:Ht(10),children:t.cumulativeGap.toFixed(3)}),l.jsx("div",{style:Ht(10),children:t.cumulativeOverride.toFixed(3)}),l.jsx("div",{style:Ht(20)}),l.jsx("div",{style:Ht(8),children:I.game.fullTimeDoTs.includes(e.dotName)?l.jsxs(l.Fragment,{children:[t.totalTicks,"/",t.maxTicks]}):l.jsx(l.Fragment,{children:t.totalTicks})}),l.jsxs("div",{style:Ht(24),children:[t.totalPotencyWithoutPot.toFixed(2),t.totalPotPotency>0?l.jsxs("span",{style:{color:s.timeline.potCover},children:[" ","+",t.totalPotPotency.toFixed(2),N({en:"(pot +"+e.tinctureBuffPercentage+"%)",zh:"( +"+e.tinctureBuffPercentage+"%)"})]}):void 0,t.totalPartyBuffPotency>0?l.jsxs("span",{style:{color:s.accent},children:[" ","+",t.totalPartyBuffPotency.toFixed(2),"(",N({en:"party",zh:""}),")"]}):void 0]})]})]})]})}class q2 extends Ha.Component{selected={totalDuration:0,targetableDuration:0,potency:{applied:0,pending:0},gcdSkills:{applied:0,pending:0}};data={time:0,tinctureBuffPercentage:0,countdown:0,totalPotency:{applied:0,pending:0},lastDamageApplicationTime:0,gcdSkills:{applied:0,pending:0},mainTable:[],mainTableSummary:{totalPotencyWithoutPot:0,totalPotPotency:0,totalPartyBuffPotency:0},dotTables:new Map,mode:0};static contextType=Nn;constructor(t){super(t),CR=a=>{this.data={...this.data,...a},this.forceUpdate()},dD=a=>{this.selected={...this.selected,...a},this.forceUpdate()}}componentWillUnmount(){CR=t=>{}}render(){const t=ha(this.context),a=z2(),o=N({en:": ",zh:""}),s=N({en:" (",zh:""}),c=N({en:") ",zh:""}),d=a?"":N({en:" (checked only)",zh:""}),f=this.data.lastDamageApplicationTime-this.data.countdown,h=Xr(0,f),m=this.data.lastDamageApplicationTime>-this.data.countdown,R=m?f.toFixed(3).toString():"N/A";let T=N({en:"Total potency",zh:""}),S=N({en:"Selected potency",zh:""});if(this.data.tinctureBuffPercentage>0){const X=s+N({en:"pot +",zh:" +"})+this.data.tinctureBuffPercentage+"%"+c;T+=X,S+=X}T+=d,S+=d,T+=o+this.data.totalPotency.applied.toFixed(2),S+=o+this.selected.potency.applied.toFixed(2),this.data.totalPotency.pending>0&&(T+=s+this.data.totalPotency.pending.toFixed(2)+N({en:" pending",zh:""})+c),this.selected.potency.pending>0&&(S+=s+this.selected.potency.pending.toFixed(2)+N({en:" pending",zh:""})+c);let g=N({en:"GCD skills",zh:"GCD"})+d+o+this.data.gcdSkills.applied,_=N({en:"Selected GCD skills",zh:"GCD"})+d+o+this.selected.gcdSkills.applied;this.data.gcdSkills.pending>0&&(g+=s+"+"+this.data.gcdSkills.pending+N({en:" not yet applied",zh:""})+c),this.selected.gcdSkills.pending>0&&(_+=s+"+"+this.selected.gcdSkills.pending+N({en:" not yet applied",zh:""})+c);const p=I.game.overTimeEffectGroups.filter(X=>X.reportName&&!X.isHealing).map(X=>{const ce=new Map;X.groupedEffects.forEach(z=>{const se=this.data.dotTables.get(z.effectName);se&&se.forEach((Ee,M)=>{ce.has(M)||ce.set(M,{uptime:0,totalTicks:0,maxTicks:0});const ee=ce.get(M);ee.uptime+=Ee.summary.dotCoverageTimeFraction,ee.totalTicks+=Ee.summary.totalTicks,ee.maxTicks=Math.max(ee.maxTicks,Ee.summary.maxTicks)})});const w=[];return ce.forEach((z,se)=>{let Ee=X.reportName+N({en:` uptime (Boss ${se})`,zh:"Boss ${targetNumber}"})+o;const{uptime:M,totalTicks:ee,maxTicks:de}=z;Ee+=(M*100).toFixed(2)+"%",Ee+=s+N({en:"ticks",zh:"DoT"})+o+ee+"/"+de+c,w.push(l.jsx("div",{children:Ee},`dot-uptime-${X.reportName}-${se}`))}),w});let O;const y=this.selected.targetableDuration>0;this.selected.totalDuration>0&&(O=l.jsxs("div",{style:{flex:1,color:t.accent},children:[l.jsxs("div",{children:[N({en:"Selected duration",zh:""}),o,this.selected.totalDuration.toFixed(3)]}),l.jsx("div",{children:S}),l.jsxs("div",{children:[N({en:"Selected PPS",zh:"PPS"}),o,y?(this.selected.potency.applied/this.selected.targetableDuration).toFixed(2):"N/A"]}),l.jsx("div",{children:_})]}));const L=l.jsxs("div",{style:{display:"flex",marginBottom:10,flexDirection:"row"},children:[l.jsxs("div",{style:{flex:1},children:[l.jsxs("div",{style:{color:this.data.mode!==0?t.historical:t.text},children:[l.jsxs("div",{children:[N({en:"Last damage application time",zh:""}),o,R]}),l.jsx("div",{children:T}),l.jsxs("div",{children:["PPS"," ",l.jsx(ze,{topic:"ppsNotes",content:l.jsxs("div",{className:"toolTip",children:[l.jsx("div",{className:"paragraph",children:N({en:"(total applied potency of checked skills) / (total targetable duration from 0s until last damage application time).",zh:" / (0s - )"})}),l.jsx("div",{className:"paragraph",children:N({en:"could be inaccurate if any damage happens before pull, or if some damage's not applied yet",zh:"0sPPS"})})]})}),o,m?(this.data.totalPotency.applied/h).toFixed(2):"N/A"]}),l.jsx("div",{children:g}),p]}),l.jsxs("div",{style:{marginTop:10},children:[l.jsx(V2,{}),l.jsx(Rl,{fileFormat:vo.Csv,getContentFn:()=>({body:I.getDamageLogCsv()}),filename:"damage-log",displayName:N({en:"download detailed damage log as CSV file",zh:"CSV"})})]})]}),O]}),P=function(X){return I.game.dotSkills.includes(X)},D=function(X){return P(X)?!0:["AUTOMATON_QUEEN","WILDFIRE",...Object.keys(Do)].includes(X)},k=function(X){const ce=X.row.skillName===X.lastRowSkill,w=[];w.push(X.row.displayedModifiers.map((x,Z)=>l.jsx(hD,{buff:x},Z)));const z=ui(X.row.skillName),se=[];!ce&&X.row.basePotency>0&&!(X.row.skillName in Do)&&se.push(l.jsx("input",{type:"checkbox",style:{position:"relative",top:2,marginRight:10},checked:z,onChange:()=>{CN({skillNameOrDoT:X.row.skillName,include:!z})}},"main")),!ce&&P(X.row.skillName)&&se.push(l.jsx("input",{type:"checkbox",style:{position:"relative",top:2,marginRight:10},checked:ui("DoT"),onChange:()=>{CN({skillNameOrDoT:"DoT",include:!ui("DoT")})}},"dot"));let Ee;ce||(Ee=l.jsxs("span",{children:[l.jsxs("span",{style:{textDecoration:z?"none":"line-through",color:z?t.text:t.bgHighContrast},children:[Wa(X.row.skillName)," ",P(X.row.skillName)?l.jsx(ze,{topic:"potencyStats-thunder",content:N({en:"See table below for details",zh:""})}):void 0]}),P(X.row.skillName)?l.jsxs("span",{style:{textDecoration:ui("DoT")?"none":"line-through",color:ui("DoT")?t.text:t.bgHighContrast},children:[l.jsx("br",{}),N({en:"(DoT)",zh:"DoT"})," "]}):void 0]}));let M;X.row.targetCount&&X.row.basePotency>0&&(M=l.jsx("span",{style:{textDecoration:z?"none":"line-through"},children:X.row.targetCount}));let ee;X.row.basePotency>0&&!D(X.row.skillName)&&(ee=l.jsx(bR,{includeInStats:z,basePotency:X.row.basePotency,helpTopic:"mainTable-potencyCalc-"+X.key,calc:X.row.calculationModifiers,falloff:X.row.falloff,targetCount:X.row.targetCount}));const de=X.row.usageCount-X.row.hitCount,W=l.jsxs("span",{style:{textDecoration:z?"none":"line-through"},children:[X.row.hitCount,de>0?l.jsxs("span",{style:{color:t.timeline.untargetableDamageMark+"af"},children:[" ","+",de," ",l.jsx(ze,{topic:"mainTable-numUntargetableUsages-"+X.key,content:N({en:"usage(s) when untargetable",zh:"Boss"})})]}):void 0]});let Y;X.row.showPotency&&!(X.row.skillName in Do)&&(Y=l.jsxs("span",{style:{textDecoration:z?"none":"line-through"},children:[X.row.totalPotencyWithoutPot.toFixed(2),X.row.potPotency>0?l.jsxs("span",{style:{color:z?t.timeline.potCover:t.bgHighContrast},children:[" ","+",X.row.potPotency.toFixed(2),"(",N({en:"pot",zh:""}),")(",X.row.potCount,")"]}):void 0,X.row.partyBuffPotency>0?l.jsxs("span",{style:{color:z?t.accent:t.bgHighContrast},children:[" ","+",X.row.partyBuffPotency.toFixed(2),"(",N({en:"party",zh:""}),")"]}):void 0]}));const Q={textAlign:"left",position:"relative",borderTop:ce?"none":"1px solid "+t.bgMediumContrast};return z||(Q.color=t.bgHighContrast),l.jsxs("div",{style:Q,children:[l.jsx("div",{style:Ht(3),children:se}),l.jsx("div",{style:Ht(18),children:Ee}),l.jsx("div",{style:Ht(8),children:M}),l.jsx("div",{style:Ht(19),children:w}),l.jsx("div",{style:Ht(14),children:ee}),l.jsx("div",{style:Ht(8),children:W}),l.jsx("div",{style:Ht(30),children:Y})]},X.key)},G=[];for(let X=0;X<this.data.mainTable.length;X++)G.push(k({row:this.data.mainTable[X],key:X,lastRowSkill:X===0?void 0:this.data.mainTable[X-1].skillName}));const B={display:"inline-block",padding:fD};let K=N(a?{en:"Applied Skills",zh:""}:{en:"Applied Skills (Checked Only)",zh:""}),V="";if(this.data.mode===1){const X=(this.data.time-this.data.countdown).toFixed(3)+"s",ce=s+N({en:"up till "+X,zh:""+X})+c;K+=ce,V=ce}else if(this.data.mode===2){const X=s+N({en:"from selected skills",zh:""})+c;K+=X,V+=X}let ae=t.text;this.data.mode===1?ae=t.historical:this.data.mode===2&&(ae=t.accent);const oe=l.jsxs("div",{id:"damageTable",style:{position:"relative",margin:"0 auto",marginBottom:40,maxWidth:960},children:[l.jsx("div",{style:{...Ht(100),textAlign:"center",marginBottom:10},children:l.jsx("b",{style:{color:ae},children:K})}),l.jsxs("div",{style:{outline:"1px solid "+t.bgMediumContrast},children:[l.jsxs("div",{children:[l.jsx("div",{style:{display:"inline-block",width:"21%"},children:l.jsx("span",{style:B,children:l.jsx("b",{children:N({en:"skill",zh:""})})})}),l.jsx("div",{style:{display:"inline-block",width:"27%"},children:l.jsx("span",{style:B,children:l.jsx("b",{children:N({en:"targets",zh:""})})})}),l.jsx("div",{style:{display:"inline-block",width:"14%"},children:l.jsx("span",{style:B,children:l.jsx("b",{children:N({en:"potency",zh:""})})})}),l.jsx("div",{style:{display:"inline-block",width:"8%"},children:l.jsx("span",{style:B,children:l.jsx("b",{children:N({en:"count",zh:""})})})}),l.jsx("div",{style:{display:"inline-block",width:"30%"},children:l.jsx("span",{style:B,children:l.jsx("b",{children:N({en:"total",zh:""})})})})]}),G,l.jsxs("div",{style:{textAlign:"left",position:"relative",borderTop:"1px solid "+t.bgMediumContrast},children:[l.jsx("div",{style:Ht(70)}),l.jsx("div",{style:Ht(30),children:l.jsxs("span",{children:[this.data.mainTableSummary.totalPotencyWithoutPot.toFixed(2),this.data.mainTableSummary.totalPotPotency>0?l.jsxs("span",{style:{color:t.timeline.potCover},children:[" ","+",this.data.mainTableSummary.totalPotPotency.toFixed(2),N({en:" (pot +"+this.data.tinctureBuffPercentage+"%)",zh:"( +"+this.data.tinctureBuffPercentage+"%)"})]}):void 0,this.data.mainTableSummary.totalPartyBuffPotency>0?l.jsxs("span",{style:{color:t.accent},children:[" ","+",this.data.mainTableSummary.totalPartyBuffPotency.toFixed(2),"(",N({en:"party",zh:""}),")"]}):void 0]})})]})]})]}),j=[];let $=0;return this.data.dotTables.forEach((X,ce)=>{X.forEach((w,z)=>{const se=this.data.dotTables.get(ce)?.get(z)?.summary;se!==void 0&&j.push({targetNumber:z,dotName:ce,node:l.jsx(X2,{summary:se,tableRows:w.tableRows,dotHeaderSuffix:V,dotName:ce,headerCellStyle:B,targetNumber:z,tinctureBuffPercentage:this.data.tinctureBuffPercentage},$++)})})}),j.sort((X,ce)=>{const w=X.targetNumber-ce.targetNumber;return w===0?X.dotName.localeCompare(ce.dotName):w}),l.jsxs("div",{children:[L,l.jsxs("div",{children:[oe,j.map(X=>X.node)]})]})}}const wu=e=>{e.job==="RDM"&&e.tryConsumeResource("DUALCAST")&&I.reportWarning({kind:"custom",en:"dualcast dropped"})},Ui=e=>e.job!=="NIN"||!e.hasResourceAvailable("TEN_CHI_JIN"),Pi=e=>{e.job==="NIN"&&e.hasResourceAvailable("MUDRA")&&e.gainStatus("BUNNY")};at(Ea,"INTERJECT",18,"cd_HEAD_GRAZE",{applicationDelay:0,cooldown:30,assetPath:"Role/Interject.png",startsAuto:!0});at(pl,"HEAD_GRAZE",24,"cd_HEAD_GRAZE",{applicationDelay:0,cooldown:30,assetPath:"Role/Head Graze.png"});Ea.forEach(e=>{Ve(e,"REPRISAL",1,{timeout:15})});Ye(Ea,"REPRISAL",22,"cd_REPRISAL",{rscType:"REPRISAL",applicationDelay:.62,cooldown:60,duration:e=>e.hasTraitUnlocked("ENHANCED_REPRISAL")&&15||10,assetPath:"Role/Reprisal.png",startsAuto:!0});oa.forEach(e=>{Ve(e,"FEINT",1,{timeout:15})});Ye(oa,"FEINT",22,"cd_FEINT",{rscType:"FEINT",applicationDelay:.537,cooldown:90,duration:e=>e.hasTraitUnlocked("ENHANCED_FEINT")&&15||10,assetPath:"Role/Feint.png",validateAttempt:Ui,onConfirm:Pi});[...Nl,...Ti].forEach(e=>{Ve(e,"ADDLE",1,{timeout:15})});Ye([...Ti,...Nl],"ADDLE",8,"cd_ADDLE",{rscType:"ADDLE",applicationDelay:.621,cooldown:90,duration:e=>e.hasTraitUnlocked("ENHANCED_ADDLE")&&15||10,assetPath:"Role/Addle.png"});Ea.forEach(e=>{Ve(e,"RAMPART",1,{timeout:20})});Ye(Ea,"RAMPART",8,"cd_RAMPART",{rscType:"RAMPART",applicationDelay:.62,cooldown:90,assetPath:"Role/Rampart.png"});oa.forEach(e=>{Ve(e,"TRUE_NORTH",1,{timeout:10})});Ye(oa,"TRUE_NORTH",50,"cd_TRUE_NORTH",{rscType:"TRUE_NORTH",applicationDelay:0,cooldown:45,maxCharges:2,assetPath:"Role/True North.png",validateAttempt:Ui,onConfirm:Pi});[...Ri,...Ti,...Nl].forEach(e=>{Ve(e,"SWIFTCAST",1,{timeout:10})});Ye([...Ri,...Ti,...Nl],"SWIFTCAST",18,"cd_SWIFTCAST",{rscType:"SWIFTCAST",applicationDelay:0,cooldown:40,assetPath:"Role/Swiftcast.png"});[...Ri,...Ti,...Nl].forEach(e=>{Ve(e,"LUCID_DREAMING",1,{timeout:21})});Ye([...Ri,...Ti,...Nl],"LUCID_DREAMING",14,"cd_LUCID_DREAMING",{rscType:"LUCID_DREAMING",applicationDelay:.623,cooldown:60,assetPath:"Role/Lucid Dreaming.png",onApplication:(e,t)=>{const a=e.resources.get("LUCID_DREAMING");a.node=t,a.tickCount=0;const o=e.findNextQueuedEventByTag(ca.LucidTick);o&&o.addTag(ca.ManaGain)}});[...Ea,...oa,...pl].forEach(e=>{Ve(e,"ARMS_LENGTH",1,{timeout:6.5})});Ye([...Ea,...oa,...pl],"ARMS_LENGTH",32,"cd_ARMS_LENGTH",{rscType:"ARMS_LENGTH",applicationDelay:.62,cooldown:120,assetPath:"Role/Arms Length.png",validateAttempt:Ui,onConfirm:Pi});[...Ri,...Ti,...Nl].forEach(e=>{Ve(e,"SURECAST",1,{timeout:6.5})});Ye([...Ri,...Ti,...Nl],"SURECAST",44,"cd_SURECAST",{rscType:"SURECAST",applicationDelay:0,cooldown:120,assetPath:"Role/Surecast.png"});oa.forEach(e=>{Ve(e,"BLOODBATH",1,{timeout:20})});Ye(oa,"BLOODBATH",8,"cd_BLOODBATH",{rscType:"BLOODBATH",applicationDelay:.625,cooldown:90,assetPath:"Role/Bloodbath.png",validateAttempt:Ui,onConfirm:Pi});at([...oa,...pl],"SECOND_WIND",12,"cd_SECOND_WIND",{healingPotency:600,applicationDelay:.625,cooldown:120,assetPath:"Role/Second Wind.png",validateAttempt:Ui,onConfirm:Pi});at(Ea,"PROVOKE",15,"cd_PROVOKE",{applicationDelay:.62,cooldown:30,assetPath:"Role/Provoke.png",drawsAggro:!0,startsAuto:!0});at(Ea,"SHIRK",48,"cd_SHIRK",{applicationDelay:0,cooldown:120,assetPath:"Role/Shirk.png"});at(Ea,"LOW_BLOW",25,"cd_LOW_BLOW",{applicationDelay:.62,cooldown:25,assetPath:"Role/Low Blow.png",startsAuto:!0});Xa(Ri,"ESUNA",10,{manaCost:400,castTime:0,applicationDelay:1.14,assetPath:"Role/Esuna.png"});at(Ri,"RESCUE",48,"cd_RESCUE",{applicationDelay:0,cooldown:120,assetPath:"Role/Rescue.png"});at(oa,"LEG_SWEEP",10,"cd_LEG_SWEEP",{applicationDelay:.625,cooldown:40,assetPath:"Role/Leg Sweep.png",validateAttempt:Ui,onConfirm:Pi});Ye(us,"TINCTURE",1,"cd_TINCTURE",{rscType:"TINCTURE",applicationDelay:.64,cooldown:270,assetPath:"General/Tincture.png",validateAttempt:Ui,onConfirm:Le(wu,Pi)});Ye(us,"SPRINT",1,"cd_SPRINT",{rscType:"SPRINT",applicationDelay:.133,cooldown:60,assetPath:"General/Sprint.png",validateAttempt:Ui,onConfirm:Le(wu,Pi)});Ea.forEach(e=>{Ve(e,"SHIELD_WALL",1,{timeout:10}),Ve(e,"STRONGHOLD",1,{timeout:12})});const nS=e=>Object.keys(JN).forEach(t=>{t!=="UNKNOWN"&&e.tryConsumeResource(t)});Aa(Ea,"SHIELD_WALL","cd_LIMIT_BREAK_1",{tier:"1",applicationDelay:.45,animationLock:1.93,onApplication:e=>{nS(e),e.gainStatus("SHIELD_WALL")}});Aa(Ea,"STRONGHOLD","cd_LIMIT_BREAK_2",{tier:"2",applicationDelay:.89,animationLock:3.86,onApplication:e=>{nS(e),e.gainStatus("STRONGHOLD")}});Ea.forEach(e=>{const t=dt[e].limitBreak??"UNKNOWN",a=dt[e].limitBreakBuff??"UNKNOWN";Ve(e,a,1,{timeout:8}),Aa(e,t,"cd_LIMIT_BREAK_3",{tier:"3",applicationDelay:1.34,animationLock:3.86,onApplication:o=>{nS(o),o.gainStatus(a)}})});Aa(Ri,"HEALING_WIND","cd_LIMIT_BREAK_1",{tier:"1",castTime:2,healingPotency:25,applicationDelay:.76,animationLock:2.1});Aa(Ri,"BREATH_OF_THE_EARTH","cd_LIMIT_BREAK_2",{tier:"2",castTime:2,healingPotency:50,applicationDelay:.8,animationLock:5.13});Ri.forEach(e=>{const t=dt[e].limitBreak??"UNKNOWN";Aa(e,t,"cd_LIMIT_BREAK_3",{tier:"3",castTime:2,healingPotency:100,applicationDelay:.8,animationLock:8.1})});Aa(oa,"BRAVER","cd_LIMIT_BREAK_1",{tier:"1",castTime:2,applicationDelay:2.23,animationLock:3.86,potency:1e3,validateAttempt:Ui,onConfirm:Pi});Aa(oa,"BLADEDANCE","cd_LIMIT_BREAK_2",{tier:"2",castTime:3,applicationDelay:3.28,animationLock:3.86,potency:2200,validateAttempt:Ui,onConfirm:Pi});oa.forEach(e=>{const t=dt[e].limitBreak??"UNKNOWN";Aa(e,t,"cd_LIMIT_BREAK_3",{tier:"3",castTime:4.5,applicationDelay:2.26,animationLock:3.7,potency:3500,validateAttempt:Ui,onConfirm:Pi})});Aa(pl,"BIGSHOT","cd_LIMIT_BREAK_1",{tier:"1",castTime:2,applicationDelay:2.23,animationLock:3.1,potency:540});Aa(pl,"DESPERADO","cd_LIMIT_BREAK_2",{tier:"2",castTime:3,applicationDelay:2.49,animationLock:3.1,potency:1170});pl.forEach(e=>{const t=dt[e].limitBreak??"UNKNOWN";Aa(e,t,"cd_LIMIT_BREAK_3",{tier:"3",castTime:4.5,applicationDelay:3.16,animationLock:3.7,potency:1890})});Aa(Ti,"SKYSHARD","cd_LIMIT_BREAK_1",{tier:"1",castTime:2,applicationDelay:1.64,animationLock:3.1,onConfirm:wu,potency:600});Aa(Ti,"STARSTORM","cd_LIMIT_BREAK_2",{tier:"2",castTime:3,applicationDelay:3.75,animationLock:5.1,onConfirm:wu,potency:1300});Ti.forEach(e=>{const t=dt[e].limitBreak??"UNKNOWN";Aa(e,t,"cd_LIMIT_BREAK_3",{tier:"3",castTime:4.5,applicationDelay:4.5,animationLock:8.1,onConfirm:e==="RDM"?wu:void 0,potency:2100})});const bN="stdtick";class Z2{timeScale;shouldLoop;tickMode;timeline;#e;gameConfig;record;imageExportConfig;timelineDrawOptions=$P;queuedPastes;clipboardMode;game;#t=0;#n=!0;#a;#i=[];#c=[];#s=[];#r=new Map;#u=new Map;#A=new Map;#R=new Map;savedHistoricalGame;savedHistoricalRecord;#T=!1;#o=!1;#g=!1;#d=!1;displayingUpToDateGameState=!0;#m=0;lastSkillTime=0;undoStack;constructor(){this.timeScale=1,this.shouldLoop=!1,this.queuedPastes=0,this.tickMode=ri.RealTimeAutoPause,this.timeline=new _P,this.timeline.reset(),this.#e=new U2,this.gameConfig=new ci(Rh),this.game=Dr(this.gameConfig),this.record=new Co,this.record.config=this.gameConfig,this.imageExportConfig={wrapThresholdSeconds:JSON.parse(Rt("img: wrapThresholdSeconds")??"0"),includeTime:JSON.parse(Rt("img: includeTime")??"true")},this.clipboardMode=Rt("radio: clipboardMode")??"plain",this.#a=-this.gameConfig.countdown,this.savedHistoricalGame=this.game,this.savedHistoricalRecord=this.record,this.undoStack=new cw,this.#f()}get inputLocked(){return this.shouldLoop||this.queuedPastes>0}updateStats(){this.#S(),this.#_()}updateAllDisplay(t=this.game){cD(t.config.serialized()),this.updateStatusDisplay(t),this.updateSkillButtons(t),this.updateTimelineDisplay(),this.updateStats(),df(this.getActiveJob())}#h(t){const a=t.initialResourceOverrides;for(let o=0;o<a.length;o++)a[o].applyTo(this.game)}#C(t){const a=this.#o;this.displayingUpToDateGameState=!1,this.#o=!0;const o=this.game,s=this.record,c=this.#a;t(),this.#o=a,this.savedHistoricalGame=this.game,this.savedHistoricalRecord=this.record,this.game=o,this.record=s,this.#a=c}checkRecordValidity(t,a,o=!1){console.assert(t.config!==void 0);const s={isValid:!0,invalidActions:[],skillUseTimes:[],straightenedIfValid:void 0};if(a===void 0)return console.log("no edit happened"),s;this.#f(!1);const c=t.config??this.gameConfig;this.game=Dr(c),this.record=new Co,this.record.config=c,this.#a=-c.countdown,this.#h(this.record.config);const d=this.#E({line:t,replayMode:vn.Edited,firstEditedNodeIndex:a,selectionStart:t.getFirstSelection(),selectionEnd:t.getLastSelection()});return this.record.selectionStartIndex=t.selectionStartIndex,this.record.selectionStartIndex=t.selectionStartIndex,s.isValid=d.invalidActions.length===0,s.invalidActions=d.invalidActions,s.skillUseTimes=d.skillUseTimes,d.success&&(s.straightenedIfValid=this.record),this.displayingUpToDateGameState=o,s}displayHistoricalState(t,a){const o=t+this.gameConfig.countdown,s=this.record.getFirstSelection()!==void 0;this.#C(()=>{const c=this.record;this.game=Dr(this.gameConfig),this.record=new Co,this.record.config=this.gameConfig,this.#a=-this.gameConfig.countdown,this.#h(this.record.config),this.#E({line:c,replayMode:vn.Exact,maxReplayTime:o,cutoffIndex:a}),this.timeline.updateElem({type:ot.s_HistoricalCursor,time:this.game.time,displayTime:this.game.getDisplayTime(),enabled:!0}),this.updateStatusDisplay(this.game),this.updateSkillButtons(this.game),Al(),this.#S(),this.timeline.drawElements()}),ff(!0),s&&this.#S(!0),this.#_()}displayCurrentState(){this.displayingUpToDateGameState=!0,this.timeline.updateElem({type:ot.s_HistoricalCursor,enabled:!1,time:0,displayTime:0}),ff(!1),this.updateAllDisplay(this.game)}restart(){this.#f(),this.#h(this.gameConfig)}#f(t=!0){this.game=Dr(this.gameConfig),this.#I({shouldLoop:!1}),this.timeline.reset(),t&&this.record.unselectAll(),this.#a=-this.gameConfig.countdown,this.#i=[],this.#s=[],this.#r=new Map,this.#A=new Map,this.#u=new Map,this.#R=new Map,this.#T=!1,this.displayingUpToDateGameState=!0}getPresetLines(){return this.#e.getLinesForJob(this.getActiveJob())}serializedPresets(){return this.#e.serialized()}addSelectionToPreset(t="(untitled)"){console.assert(this.record.getFirstSelection());const a=this.record.getSelected();a.name=t,this.#e.addLine(a,this.getActiveJob())}appendFilePresets(t){this.#e.deserializeAndAppend(t)}loadBattleRecordFromFile(t){t.config===void 0&&(window.alert("Error loading record: saved record had no config object"),console.error(t)),t.config.procMode===void 0&&(t.config.rngProcs!==void 0?t.config.procMode=t.config.rngProcs?ua.RNG:ua.Never:t.config.procMode=ua.RNG),t.config.fps===void 0&&(t.config.fps=Rh.fps),t.config.gcdSkillCorrection===void 0&&(t.config.gcdSkillCorrection=Rh.gcdSkillCorrection),t.config.level&&(t.config.level=parseInt(t.config.level)),t.config.skillSpeed===void 0&&(t.config.skillSpeed=ut.getSubstatBase(t.config.level)),t.config.shellVersion===void 0&&(t.config.shellVersion=Oo.Initial),t.config.job===void 0&&(t.config.job=uD(t.actions.flatMap(a=>a.skillName?[lT(a.skillName)]:[]))),oa.includes(t.config.job)||(t.config.initialResourceOverrides=t.config.initialResourceOverrides.filter(a=>![Ge.FLANK_POSITIONAL.name,Ge.REAR_POSITIONAL.name].includes(a.type))),ru(()=>{const a=new ci(t.config);this.gameConfig=a,this.record=new Co,this.record.config=a,this.#f(),this.#h(this.gameConfig);const o=wr.deserialize(t.actions),s=this.#E({line:o,replayMode:vn.Exact});if(!s.success){let c=`Error loading record- 
`;if(s.invalidActions.length>0){const d=s.invalidActions[0].node;if(d.info.type===ke.Skill){const f=d.info.skillName?Wa(d.info.skillName):"(unknown)";c+=`Stopped here because the next action ${f} can't be added: `}else c+=`Stopped here because the next action ${d.info.type} can't be added: `}c+=s.invalidActions[0].reason,window.alert(c)}})}applyEditedRecord(){const t=this.record;this.record=new Co,this.record.config=t.config,this.#f(),this.#h(this.gameConfig);const a=this.#E({line:t,replayMode:vn.Exact,removeTrailingIdleTime:!0});console.assert(a.success),t.selectionStartIndex!==void 0&&(this.record.selectSingle(t.selectionStartIndex),this.record.selectUntil(t.selectionEndIndex)),this.autoSave()}deleteSelectedSkills(){const t=this.record.selectionStartIndex;if(t!==void 0){this.record.deleteSelected();const a=Mn();t<this.record.length?(this.record.selectSingle(t),this.displayHistoricalState(a.skillUseTimes[t],t)):this.displayCurrentState(),this.autoSave()}}#S(t=!1){if(!this.#d){let a=K2({tinctureBuffPercentage:this.#t,lastDamageApplicationTime:this.#a});t&&(a={mainTable:a.mainTable,mainTableSummary:a.mainTableSummary,dotTables:a.dotTables,mode:a.mode}),CR(a)}}#_(){if(!this.#d){const t=Y2({tinctureBuffPercentage:this.#t,lastDamageApplicationTime:this.#a});dD(t)}}getTincturePotencyMultiplier(){return 1+this.#t*.01}setTinctureBuffPercentage(t){this.#t=t,this.displayCurrentState(),xo()}setUntargetableMask(t){this.#n=t,this.displayCurrentState(),xo()}getUntargetableMask(){return this.#n}getMaxTicks(t,a,o){let s=0;const c=[a];return o||c.push(bN),c.forEach(d=>{this.#r.get(d)?.forEach(f=>{!Jn(f-this.gameConfig.countdown)&&f<=t&&s++})}),s}getDotCoverageTimeFraction(t,a,o){return this.getOverTimeCoverageTimeFraction(t,a,this.#A,o)}getHotCoverageTimeFraction(t,a,o){return this.getOverTimeCoverageTimeFraction(t,a,this.#R,o)}getOverTimeCoverageTimeFraction(t,a,o,s){if(t<=Tn.epsilon)return 0;const c=o.get(a);if(!c)return 0;c.has(s)||c.set(s,[]);let d=0;c.get(s).forEach(h=>{if(h.tStartDisplay<=t){const m=Math.max(0,h.tStartDisplay);let R=h.tEndDisplay!==void 0&&h.tEndDisplay<=t?h.tEndDisplay:t;R=Math.max(0,R),d+=Xr(m,R)}});const f=Xr(0,t);return d/f}setTimelineOptions(t){this.timelineDrawOptions={...this.timelineDrawOptions,...t},this.updateTimelineDisplay()}getTimelineRenderingProps(){const t=this.record.getFirstSelection()!=null&&this.record.getLastSelection()!=null;let a=this.gameConfig.countdown;const o=this.timeline.getAllSlotsTimeInfo();return o!==null&&(a=Math.max(a,o.countdown)),{timelineWidth:this.timeline.getCanvasWidth(),timelineHeight:this.timeline.getCanvasHeight(),scale:this.timeline.scale,countdown:a,tincturePotencyMultiplier:this.getTincturePotencyMultiplier(),untargetableMask:this.#n,sharedElements:this.timeline.sharedElements,slots:this.timeline.slots,activeSlotIndex:this.timeline.activeSlotIndex,allMarkers:this.timeline.getAllMarkers(),untargetableMarkers:this.timeline.getUntargetableMarkers(),buffMarkers:this.timeline.getBuffMarkers(),showSelection:t,selectionStartDisplayTime:(this.record.getFirstSelection()?.tmp_startLockTime??0)-this.gameConfig.countdown,selectionEndDisplayTime:(this.record.getLastSelection()?.tmp_endLockTime??0)-this.gameConfig.countdown,drawOptions:this.timelineDrawOptions}}reportWarning(t){this.#o||this.timeline.addElement({type:ot.WarningMark,warningType:t,time:this.game.time,displayTime:this.game.getDisplayTime()})}reportComboBreak(){this.reportWarning({kind:"combobreak"})}resolvePotency(t){this.resolveAnyPotency(t,ot.DamageMark,this.#i),this.#S()}resolveHealingPotency(t){this.resolveAnyPotency(t,ot.HealingMark,this.#c)}resolveOverTimePotency(t,a){a==="damage"?this.resolveAnyPotency(t,ot.DamageMark,this.#i,!1):this.resolveAnyPotency(t,ot.HealingMark,this.#c)}resolveAnyPotency(t,a,o,s=!0){if(t===void 0)return;t.resolve(this.game.getDisplayTime()),this.#a=this.game.time,t.base===0&&(a=ot.AggroMark);const c=t.getDisplayedModifiers().some(d=>d.source===U.POT);if(!this.#o){let d="{skill}@"+t.sourceTime.toFixed(3);t.description.length>0&&(d+=" "+t.description);const f={potency:t,sourceDesc:d,sourceSkill:t.sourceSkill},h=this.timeline.tryGetElement(this.game.time,a);h?(h.potencyInfos.push(f),c&&!h.buffs.includes("TINCTURE")&&h.buffs.push("TINCTURE")):this.timeline.addElement({type:a,potencyInfos:[f],buffs:c?["TINCTURE"]:[],time:this.game.time,displayTime:this.game.getDisplayTime()}),o.push({time:this.game.getDisplayTime(),source:t.sourceSkill+"@"+t.sourceTime,potency:t.getAmount({tincturePotencyMultiplier:1,includePartyBuffs:!0,includeSplash:s}),buffs:c?["TINCTURE"]:[]})}}reportLucidTick(t,a){this.#o||this.timeline.addElement({type:ot.LucidMark,time:t,displayTime:this.game.getDisplayTime(),sourceDesc:a})}reportManaTick(t,a){this.#o||this.timeline.addElement({type:ot.MPTickMark,time:t,displayTime:this.game.getDisplayTime(),sourceDesc:a})}reportMeditateTick(t,a){this.#o||this.timeline.addElement({type:ot.MeditateTickMark,time:t,displayTime:this.game.getDisplayTime(),sourceDesc:a})}reportAutoTick(t,a){this.#o||this.timeline.addElement({type:ot.AutoTickMark,time:t,displayTime:this.game.getDisplayTime(),sourceDesc:a})}reportDotTick(t,a){this.reportOverTimeTick(t,this.#r,a)}reportHotTick(t,a){this.reportOverTimeTick(t,this.#u,a)}reportOverTimeTick(t,a,o){if(!this.#o){const s=o??bN;let c=a.get(s);c||(c=[],a.set(s,c)),c.push(t),this.updateStats()}}reportDotStart(t,a,o){this.reportOverTimeStart(t,a,"damage",o)}reportHotStart(t,a){this.reportOverTimeStart(t,a,"healing",[1])}reportOverTimeStart(t,a,o,s){if(!this.#o){const c=o==="damage"?this.#A:this.#R;let d=c.get(a);d||(d=new Map,c.set(a,d)),s.forEach(f=>{let h=d.get(f);h||(h=[],d.set(f,h));const m=h.length;console.assert(m===0||h[m-1].tEndDisplay!==void 0),h.push({tStartDisplay:t,tEndDisplay:void 0})})}}reportDotDrop(t,a,o){this.reportOverTimeDrop(t,a,"damage",o)}reportHotDrop(t,a){this.reportOverTimeDrop(t,a,"healing",[1])}reportOverTimeDrop(t,a,o,s){if(!this.#o){const c=o==="damage"?this.#A:this.#R;s.forEach(d=>{const f=c.get(a)?.get(d);if(console.assert(f,`Reported dropping ${a} on target ${d} when no coverage was detected`),!f)return;const h=f.length;console.assert(h>0&&f[h-1].tEndDisplay===void 0),f[h-1].tEndDisplay=t})}}updateStatusDisplay(t){const a=t.resources.get("NOT_CASTER_TAXED"),o=t.resources.get("NOT_ANIMATION_LOCKED"),s=t.cooldowns.get("cd_GCD"),c={gcdReady:s.stacksAvailable()>0,gcd:s.currentStackCd(),timeTillGCDReady:t.cooldowns.timeTillAnyStackAvailable("cd_GCD"),castLocked:t.resources.timeTillReady("NOT_CASTER_TAXED")>0,castLockTotalDuration:a.pendingChange?a.pendingChange.delay:0,castLockCountdown:t.resources.timeTillReady("NOT_CASTER_TAXED"),animLocked:t.resources.timeTillReady("NOT_ANIMATION_LOCKED")>0,animLockTotalDuration:o.pendingChange?o.pendingChange.delay:0,animLockCountdown:t.resources.timeTillReady("NOT_ANIMATION_LOCKED"),canMove:t.resources.get("MOVEMENT").available(1)},d=t.statusPropsGenerator;u0(f=>({time:t.getDisplayTime(),resources:d.getAllResourceViewProps(f),resourceLocks:c,enemyBuffs:d.getAllOtherTargetedBuffViewProps(),selfBuffs:d.getAllSelfTargetedBuffViewProps(),level:t.config.level}),d.statusLayoutFn)}updateTimelineDisplay(){this.timeline.setTimeSegment(0,this.game.time),Al(),Su(),this.#o||this.timeline.updateElem({type:ot.s_Cursor,time:this.game.time,displayTime:this.game.getDisplayTime()}),this.timeline.drawElements()}updateSkillButtons(t){pb(this.game.displayedSkills.getCurrentSkillNames(this.game).map(a=>t.getSkillAvailabilityStatus(a)))}#l(t){const a=this.game.time,o=t.deltaTime+this.game.getDisplayTime();if(t.deltaTime>0){this.#m=t.deltaTime;const s=this.game.tick(t.deltaTime,t.prematureStopCondition?t.prematureStopCondition:()=>!1);let c;return t.waitKind==="duration"?c=yr(s):t.waitKind==="target"?c=dl(o):t.waitKind==="mp"&&(c=TC()),c!==void 0&&(c.tmp_startLockTime=a,c.tmp_endLockTime=t.deltaTime+a,this.record.addActionNode(c)),c}}setTimeControlSettings(t){this.timeScale=t.timeScale,this.tickMode=t.tickMode,this.shouldLoop=!1}setConfigAndRestart(t,a=!0){const o=this.gameConfig.job!==t.job,s=this.gameConfig.countdown,c=s<t.countdown;o&&!a&&(console.error("attempted to apply config without reset even though job changed; forcing reset"),a=!0),ru(()=>{this.gameConfig=new ci({...t,shellVersion:HR.version}),a?this.record=new Co:c&&this.record.prependActionNode(dl(-s)),this.record.config=this.gameConfig,this.#f(),this.#h(this.gameConfig),o&&df(t.job)}),this.autoSave()}getDisplayedGame(){return this.displayingUpToDateGameState?this.game:this.savedHistoricalGame}getActiveJob(){return this.game.job}getSkillInfo(t){return t.game.getSkillAvailabilityStatus(t.skillName)}#I(t){const a=t.shouldLoop;this.shouldLoop!==a&&(this.shouldLoop=a,this.shouldLoop&&this.#N(()=>this.shouldLoop))}#b(t){let a=this.game.timeTillAnySkillAvailable();t>=0&&(a=Math.min(t-this.game.time,a)),this.#l({deltaTime:a})}#p(t,a,o=this.tickMode,s=-1,c=!0,d=!1){let f=this.game.getSkillAvailabilityStatus(t);const h=this.game.time,m=f.timeTillAvailable,R=this.#l({deltaTime:m});d&&R&&this.undoStack.push(new Ql(R,this.record.tailIndex)),t=RC(t,this.game),f=this.game.getSkillAvailabilityStatus(t),a=this.filterTargetList(a,t);const T=El(t,a);let S;if(f.status.ready())T.tmp_startLockTime=this.game.time,this.record.addActionNode(T),S=this.record.tailIndex,d&&T&&this.undoStack.push(new Ql(T,this.record.tailIndex)),this.game.useSkill(t,T,S),T.tmp_invalid_reasons=[],o===ri.RealTimeAutoPause&&(this.shouldLoop=!0,this.#N(()=>this.game.timeTillAnySkillAvailable()>0,!0));else{if(!c){if(m>0){const _=yr(m);_.tmp_startLockTime=h,_.tmp_endLockTime=this.game.time,this.record.addActionNode(_)}return f}this.record.addActionNode(T),S=this.record.tailIndex,this.game.useInvalidSkill(t,T),T.tmp_invalid_reasons=f.status.unavailableReasons}const g=this.game.timeTillAnySkillAvailable();if(T.tmp_startLockTime=this.game.time,T.tmp_endLockTime=this.game.time+g,!this.#o){this.lastSkillTime=this.game.time;const _=this.game.getSkillAvailabilityStatus(t,!0);let O=this.game.skillsList.get(t).cdName==="cd_GCD";const y=f.castTime>0&&!f.instantCast,L=y?f.castTime-ci.getSlidecastWindow(f.castTime):0;let P=_.cdRecastTime;t==="MEDITATE"&&(O=!0,P=this.game.getSkillAvailabilityStatus("YUKIKAZE").cdRecastTime),this.timeline.addElement({type:ot.Skill,displayTime:this.game.getDisplayTime(),skillName:t,isGCD:O,isSpellCast:y,time:this.game.time,relativeSnapshotTime:L,lockDuration:g,recastDuration:P,node:T,actionIndex:S}),this.#s.push({time:this.game.getDisplayTime(),action:_n[t].name,isGCD:O?1:0,castTime:f.instantCast?0:f.castTime,targetList:T.targetList,isDamaging:T.anyPotencies()})}return o!==ri.RealTimeAutoPause&&this.#b(s),this.#d||Su(),f}#E(t){const a=this.#d;this.#d=!0,t.removeTrailingIdleTime===void 0&&(t.removeTrailingIdleTime=!1);const o=t.maxReplayTime??-1;let s=t.replayMode;t.replayMode===vn.Edited&&(s=vn.Exact);const c=t.line,d=[],f=[];if(c.length===0)return this.#d=a,{success:!0,firstAddedIndex:void 0,invalidActions:d,skillUseTimes:f};let h=this.record.length,m;const R=t.cutoffIndex??c.actions.length,T=c.actions.slice();for(let _=0;_<R;_++){const p=T[_];t.replayMode===vn.Edited&&s===vn.Exact&&_===t.firstEditedNodeIndex&&(s=vn.Edited);let O=0;if(p.info.type===ke.Wait?O=p.info.waitDuration:p.info.type===ke.JumpToTimestamp?O=p.info.targetTime-this.game.getDisplayTime():p.info.type===ke.WaitForMP?O=this.game.timeTillNextMpGainEvent():p.info.type===ke.Skill&&(O=this.game.getSkillAvailabilityStatus(p.info.skillName).timeTillAvailable),_>0){const L=T[_-1].legacyWaitDuration;if(L!==void 0&&Math.abs(L-this.#m)>Tn.epsilon){const P=L-this.#m;if(P>0&&p.info.type!==ke.Wait){let D;if(p.info.type===ke.Skill){const k=this.game.getSkillAvailabilityStatus(p.info.skillName).timeTillAvailable;Math.abs(k-P)>Tn.epsilon&&(D="duration")}D&&(this.#l({deltaTime:P,waitKind:D}),h++)}else p.info.type===ke.Wait&&(O+=P)}}if(o>=0&&o-this.game.time<O&&s===vn.Exact)return this.#l({deltaTime:o-this.game.time,waitKind:"duration"}),this.#d=!1,this.updateAllDisplay(),{success:!0,firstAddedIndex:m,invalidActions:d,skillUseTimes:f};if(f.push(this.game.getDisplayTime()),[ke.Wait,ke.JumpToTimestamp,ke.WaitForMP].includes(p.info.type))if(O>=0)this.#l({deltaTime:O,waitKind:p.info.type===ke.Wait?"duration":p.info.type===ke.JumpToTimestamp?"target":"mp"});else{const y=du();if(p.info.type===ke.JumpToTimestamp){const L=dl(p.info.targetTime);L.tmp_startLockTime=this.game.time,L.tmp_endLockTime=L.tmp_startLockTime,this.record.addActionNode(L)}else console.error("non-jump wait somehow failed: "+p.info.type);y.addUnavailableReason(Et.PastTargetTime),d.push({node:p,index:_,reason:y})}else if(p.info.type===ke.Skill){let y=p.info.skillName;t.replayMode===vn.SkillSequence&&(y=Pr(this.game.job,y,this.gameConfig.level));const L=this.#p(y,p.info.targetList,ri.Manual,o);f[f.length-1]=L.usedAt,L.status.ready()||d.push({node:p,index:_,reason:L.status.clone()}),this.#T&&(this.#T=!1,this.shouldLoop||(L.status.addUnavailableReason(Et.CastCanceled),d.push({node:p,index:_,reason:L.status})))}else if(p.info.type===ke.SetResourceEnabled&&(s===vn.Exact||s===vn.Edited)){const y=this.requestToggleBuff(p.info.buffName,!1,p.info.targetNumber),L=s===vn.Exact;if(y)this.#l({deltaTime:L?O:Math.min(O,this.game.timeTillAnySkillAvailable())});else{const P=du();P.addUnavailableReason(Et.BuffNoLongerAvailable),d.push({node:p,index:_,reason:P})}}else if(p.info.type===ke.Unknown){const{skillName:y,targetList:L}=p.info,P=EH(y,L);this.record.addActionNode(P);const D=du();D.addUnavailableReason(Et.UnknownSkill),d.push({node:p,index:_,reason:D}),P.tmp_invalid_reasons=D.unavailableReasons;const k=this.gameConfig.animationLock;this.#o||(this.lastSkillTime=this.game.time,this.timeline.addElement({type:ot.Skill,displayTime:this.game.getDisplayTime(),skillName:y,isGCD:!1,isSpellCast:!1,time:this.game.time,relativeSnapshotTime:this.game.time,lockDuration:k,recastDuration:0,node:P,actionIndex:_}),this.#s.push({time:this.game.getDisplayTime(),action:y,isGCD:0,castTime:0,targetList:P.targetList,isDamaging:!1})),this.#l({deltaTime:k})}else console.error("did not process ActionNode "+JSON.stringify(p.info));if(t.replayMode===vn.Edited){const y=this.record.tailIndex;p===t.selectionStart&&y>=0?this.record.selectSingle(y):p===t.selectionEnd&&y>=0&&this.record.selectUntil(y)}this.record.length!==h&&m===void 0&&(m=this.record.tailIndex)}if(t.cutoffIndex!==void 0){const _=T[t.cutoffIndex].info;if(_.type===ke.Skill){const p=this.game.getSkillAvailabilityStatus(_.skillName);this.#l({deltaTime:p.timeTillAvailable})}}const S=T[T.length-1],g=S.legacyWaitDuration;if(g!==void 0&&(S.info.type===ke.Skill||S.info.type===ke.SetResourceEnabled)&&Math.abs(g-this.#m)>Tn.epsilon){const _=g-this.#m;this.#l({deltaTime:_,waitKind:"duration"})}return this.#d=a,this.updateAllDisplay(),{success:!0,firstAddedIndex:m,invalidActions:d,skillUseTimes:f}}autoSave(){const t=this.record.serialized();this.timeline.saveCurrentSlot(t,this.gameConfig.countdown,this.game.time)}tryAutoLoad(){const t=Rt("gameRecord");t!==null&&(console.log("migrating existing record to slot 0"),St("gameRecord0",t),$A("gameRecord"));for(let s=0;s<Oi;s++)this.timeline.loadSlot(s);this.timeline.slots.length>0||this.timeline.addSlot();const o=parseInt(Rt("activeSlotIndex")??"0");this.setActiveSlot(o>=Oi?0:o),this.undoStack.clear()}setActiveSlot(t){this.#I({shouldLoop:!1}),ru(()=>{this.autoSave(),this.record.unselectAll(),this.timeline.loadSlot(t)||console.error(`failed to load timeline in cached active slot ${t}`)}),this.savedHistoricalGame=this.game,this.savedHistoricalRecord=this.record,this.displayCurrentState(),St("activeSlotIndex",t.toString())}cloneActiveSlot(){if(this.timeline.activeSlotIndex<0||this.timeline.activeSlotIndex>=this.timeline.slots.length){console.error("tried to clone slot with invalid activeSlotIndex "+this.timeline.activeSlotIndex);return}this.#I({shouldLoop:!1}),ru(()=>{const t=this.record.serialized();this.timeline.addSlot(),this.loadBattleRecordFromFile(t),this.autoSave(),this.timeline.loadSlot(this.timeline.slots.length-1)}),this.displayCurrentState()}getDamageLogCsv(){const t=this.#i.map(a=>{let o=!1;a.buffs.forEach(c=>{c==="TINCTURE"&&(o=!0)});let s=a.potency;return o&&(s*=this.getTincturePotencyMultiplier()),[a.time,a.source,s]});return[["time","damageSource","potency"]].concat(t)}getActionsLogCsv(){const t=this.#s.map(a=>[a.time,a.action,a.isGCD,a.castTime]);return[["time","action","isGCD","castTime"]].concat(t)}getAmaSimCsv(){const t=O=>O===_n.TINCTURE.name?"Grade 4 Gemdraught":O.endsWith("(Ten)")||O.endsWith("(Chi)")||O.endsWith("(Jin)")?O.substring(0,O.length-6):O.replace(" 2"," II").replace(" 3"," III").replace(" 4"," IV"),a=this.getActiveJob(),o=Ea.includes(a)||oa.includes(a),s=this.timeline.getBuffMarkers().map(O=>{const y=new Qh(O.description);let L=y.info.name;y.info.name===H.Card_TheSpear?L="The Spear":y.info.name===H.Card_TheBalance?L="The Balance":[H.RadiantFinale1,H.RadiantFinale2,H.RadiantFinale3].includes(y.info.name)&&(L="Radiant Finale");const P=y.info.name===H.Dokumori||y.info.name===H.ChainStratagem,D=()=>P?"Debuff Only":y.info.name===H.RadiantFinale1?'"1 Coda, Buff Only"':y.info.name===H.RadiantFinale2?'"2 Coda, Buff Only"':y.info.name===H.RadiantFinale3?'"3 Coda, Buff Only"':[H.ArmysPaeon,H.MagesBallad,H.WanderersMinuet,H.StandardFinish,H.TechnicalFinish].includes(y.info.name)?"Buff Only":y.info.name===H.Card_TheSpear?o?"Small":"Big":y.info.name===H.Card_TheBalance?o?"Big":"Small":"";return[O.time,L,y.info.job,D(),P?"Boss1":""]});let c=this.gameConfig.getOverrideStacks("MAGES_CODA")??0,d=this.gameConfig.getOverrideStacks("WANDERERS_CODA")??0,f=this.gameConfig.getOverrideStacks("ARMYS_CODA")??0,h=this.gameConfig.getOverrideStacks("RADIANT_CODA")??0;const m=this.#s.filter(O=>!O.action.includes("Toggle buff")).map(O=>{let y="";O.isDamaging&&O.targetList!==void 0&&(y='"',y+=O.targetList.map(D=>`Boss${D}`).join(", "),y+='"');let L="";const P=c+d+f;return O.action==="Mage's Ballad"?c=1:O.action==="The Wanderer's Minuet"?d=1:O.action==="Army's Paeon"?f=1:O.action==="Radiant Finale"?P>0&&(h=P,L=`${P} Coda`,c=0,d=0,f=0):O.action==="Radiant Encore"&&h>0&&(L=`${h} Encore`,h=0),[O.time,t(O.action),"",L,y]}),R=["use_strict_skill_naming = False"],T=!(o||pl.includes(a)),S={[$e.lvl70]:new Map([["WHM",162],["SCH",264],["AST",148],["SGE",177],["BLM",133],["SMN",264],["RDM",162],["PCT",148]]),[$e.lvl80]:new Map([["WHM",189],["SCH",308],["AST",172],["SGE",206],["BLM",155],["SMN",308],["RDM",189],["PCT",172]]),[$e.lvl90]:new Map([["WHM",216],["SCH",353],["AST",197],["SGE",236],["BLM",177],["SMN",353],["RDM",216],["PCT",197]]),[$e.lvl100]:new Map([["WHM",244],["SCH",398],["AST",222],["SGE",266],["BLM",200],["SMN",398],["RDM",244],["PCT",222]])};let g={job_class:a,det_stat:this.gameConfig.determination,crit_stat:this.gameConfig.criticalHit,dh_stat:this.gameConfig.directHit,tenacity:this.gameConfig.tenacity,speed_stat:T?this.gameConfig.spellSpeed:this.gameConfig.skillSpeed,version:JM,level:this.gameConfig.level,wd:this.gameConfig.wd,main_stat:this.gameConfig.main};S[this.gameConfig.level].has(a)&&(g={...g,healer_or_caster_strength:S[this.gameConfig.level].get(a)}),R.push("stats = "+JSON.stringify(g));const _=this.timeline.getUntargetableMarkers().map(O=>`(${O.time}, ${O.time+O.duration}),`);_.length>0&&R.push("downtime_windows = ("+_.join(" ")+")");const p=["time","skill_name","job_class","skill_conditional","targets"];return p.push("players_to_buff","overriding_skill_conditional_for_other_players"),s.forEach(O=>O.push("","")),m.forEach(O=>O.push("","")),{meta:R,body:[p].concat(s,m)}}tryAddLine(t,a=vn.SkillSequence){const o=I.record.length,s=this.#E({line:t,replayMode:a});return s.success?(this.undoStack.push(new OT(t.actions,o,"preset")),this.autoSave(),Mn(),!0):(this.rewindUntilBefore(s.firstAddedIndex,!1),window.alert('Failed to add line "'+t.name+'" due to insufficient resources and/or stats mismatch.'),!1)}deleteLine(t){this.#e.deleteLine(t)}deleteAllLines(){this.#e.deleteAllLines()}reportInterruption(t){if(this.#g||this.tickMode===ri.RealTimeAutoPause&&this.shouldLoop){const a=t.failNode.getNameForMessage();window.alert("Cast interrupted! Resources for "+a+" are no longer available"),console.warn("failed: "+a);const o=this.game.time,s=this.shouldLoop;this.rewindUntilBefore(t.failIndex,!1),this.autoSave(),this.#l({deltaTime:o-this.game.time,waitKind:"duration"}),this.shouldLoop=s}else this.#T=!0,this.#o||this.timeline.invalidateLastElement()}rewindUntilBefore(t,a){const o=this.record;this.record=new Co,this.record.config=this.gameConfig,this.#f(),this.#h(this.gameConfig),t!==void 0&&(o.spliceUpTo(t),this.#E({line:o,replayMode:vn.Exact,removeTrailingIdleTime:a}))}removeTrailingIdleTime(){let t;for(let o=this.record.tailIndex;o>=0;o--)if(this.record.actions[o].info.type===ke.Skill){t=o;break}const a=t===void 0?this.record.actions.slice():this.record.actions.slice(t+1);a.length>0&&this.undoStack.push(new Or((t??-1)+1,a,"delete")),t===void 0?this.rewindUntilBefore(0,!0):this.rewindUntilBefore(t+1,!0),Mn()}waitTillNextMpOrLucidTick(){const t=this.#l({deltaTime:this.game.timeTillNextMpGainEvent(),waitKind:"mp"});t!==void 0&&this.undoStack.push(new Ql(t,this.record.tailIndex)),Mn(),this.updateAllDisplay()}insertRecordNodes(t,a){this.record.insertActionNodes(t,a),this.autoSave();const o=Mn();let s;t.length>1?(s=Math.min(a,this.record.tailIndex),this.record.selectSingle(s),this.record.selectUntil(s+t.length-1)):(s=Math.min(a+1,this.record.tailIndex),this.record.selectSingle(s)),this.displayHistoricalState(o.skillUseTimes[s],s)}insertRecordNode(t,a){this.insertRecordNodes([t],a)}filterTargetList(t,a){const o=Wi(I.game.job,a);return o?.potencyFn(I.game)===0&&!o?.savesTargets&&!I.game.dotSkills.includes(a)?[]:t}requestUseSkill(t,a=!1){if(this.#g=!0,!this.inputLocked)if(this.displayingUpToDateGameState)this.#p(t.skillName,t.targetList,this.tickMode,-1,!1,a).status.ready()&&(this.scrollToTime(this.game.time),this.autoSave(),this.tickMode!==ri.RealTimeAutoPause&&Mn());else{const o=this.record.selectionStartIndex;if(o!==void 0){const s=this.filterTargetList(t.targetList,t.skillName),c=El(t.skillName,s);this.insertRecordNode(c,o),a&&this.undoStack.push(new Ql(c,o))}}this.#g=!1}requestToggleBuff(t,a=!1,o){if(!this.game.requestToggleBuff(t,o))return!1;const c=eR(t,o);return c.tmp_startLockTime=this.game.time,c.tmp_endLockTime=c.tmp_startLockTime,this.record.addActionNode(c),a&&this.undoStack.push(new Ql(c,this.record.tailIndex)),this.#s.push({time:this.game.getDisplayTime(),action:"Toggle buff: "+Ge[t].name,isGCD:0,castTime:0,isDamaging:!1}),!0}scrollToTime(t){const a=t===void 0?this.game.time:t;setTimeout(()=>{XD(Xe.positionFromTimeAndScale(a,this.timeline.scale))},0)}#N(t,a=!1){let o=0;const s=this,c=function(d){o===0&&(o=d);const f=(d-o)/1e3*s.timeScale,h=s.game.timeTillAnySkillAvailable();h>=f?s.#l({deltaTime:f,prematureStopCondition:()=>!t()}):(s.#l({deltaTime:h,prematureStopCondition:()=>!t()}),s.#l({deltaTime:f-h,prematureStopCondition:()=>!t()})),s.updateAllDisplay(),o=d,t()?requestAnimationFrame(c):(s.shouldLoop=!1,s.autoSave(),hf(!1),a&&Mn())};hf(!0),requestAnimationFrame(c)}step(t,a=!1){let o,s=this.record.length;this.displayingUpToDateGameState?(o=this.#l({deltaTime:t,waitKind:"duration"}),this.autoSave(),this.updateAllDisplay()):this.record.selectionStartIndex!==void 0&&(s=this.record.selectionStartIndex,o=yr(t),this.insertRecordNode(o,s)),a&&o&&this.undoStack.push(new Ql(o,s))}stepUntil(t,a=!1){let o,s=this.record.length;this.displayingUpToDateGameState?(o=this.#l({deltaTime:t-this.game.getDisplayTime(),waitKind:"target"}),this.autoSave(),this.updateAllDisplay()):this.record.selectionStartIndex!==void 0&&(s=this.record.selectionStartIndex,o=dl(t),this.insertRecordNode(o,s)),a&&o&&this.undoStack.push(new Ql(o,s))}handleKeyboardEvent(t){if(this.inputLocked)return;const a=t.ctrlKey||t.metaKey,o=I.record.selectionStartIndex,s=o!==void 0;let c=!1;this.displayingUpToDateGameState&&t.key==="u"&&(this.undoStack.doThenPush(new Or(this.record.tailIndex,[this.record.actions[this.record.tailIndex]],"delete")),c=!0),t.key==="z"&&a?(this.undoStack.undo(),c=!0):t.key==="Z"&&a||t.key==="y"&&a?(this.undoStack.redo(),c=!0):t.key==="Paste"||t.key==="v"&&a?(o0(),c=!0):t.key==="Copy"||t.key==="c"&&a?s&&(mR(),c=!0):(t.key==="Cut"||t.key==="x"&&a)&&s&&(mR(),I.undoStack.push(new Or(o,I.record.getSelected().actions,"delete")),I.deleteSelectedSkills(),c=!0),c&&t.preventDefault()}handleTimelineKeyboardEvent(t){if(!this.inputLocked){const a=t.ctrlKey||t.metaKey,o=I.record.selectionStartIndex,s=I.record.selectionEndIndex,c=o!==void 0;let d=!1,f=!1;t.key==="Backspace"||t.key==="Delete"?c&&(I.undoStack.push(new Or(o,I.record.getSelected().actions,"delete")),I.deleteSelectedSkills()):t.key==="ArrowUp"?c?(t.shiftKey?I.timeline.resizeSelection(!0):I.timeline.onClickTimelineAction(o-1,!1),d=!0,t.preventDefault()):I.record.length>0&&(I.timeline.onClickTimelineAction(I.record.tailIndex,!1),d=!0,t.preventDefault()):t.key==="ArrowDown"?c?(t.shiftKey?I.timeline.resizeSelection(!1):I.timeline.onClickTimelineAction(s+1,!1),f=!0,t.preventDefault()):I.record.length>0&&(I.timeline.onClickTimelineAction(0,!1),f=!0,t.preventDefault()):t.key==="Home"?(I.timeline.onClickTimelineAction(0,t.shiftKey),d=!0):t.key==="End"?(I.timeline.onClickTimelineAction(I.record.tailIndex,t.shiftKey),f=!0):t.key==="Escape"?(I.record.unselectAll(),I.displayCurrentState()):t.key==="a"&&a&&(I.timeline.onClickTimelineAction(0,!1),I.timeline.onClickTimelineAction(I.record.tailIndex,!0),t.preventDefault()),d?(this.scrollToTime(this.record.selectionStart?.tmp_startLockTime),CT()):f&&(this.scrollToTime(this.record.selectionEnd?.tmp_startLockTime),Jb())}}setImageExportConfig(t){this.imageExportConfig=t}}const I=new Z2;function sh(e){const t=Mi();return t==="en"?e==="fieldop"?"Field Operations":e==="dungeon"?"Dungeons":e==="ultimate"?"Ultimates":e[0].toUpperCase()+e.substring(1):t==="zh"?e==="savage"?"":e==="extreme"?"":e==="ultimate"?"":"":e}function je(e,t,a,o,s){return{name:typeof e=="string"?{en:e,zh:e}:e,fightKind:t,supportedLanguages:typeof a=="string"?[a]:a,authors:typeof o=="string"?[o]:o,phased:s??!1}}const zA=new Map([["m9s",je("M9S","savage","en","shanzhe")],["m9s_zh",je("M9S","savage","zh",["shanzhe",""])],["m10s",je("M10S","savage","en","shanzhe")],["m10s_zh",je("M10S","savage","zh",["shanzhe",""])],["m11s",je("M11S","savage","en","shanzhe")],["m11s_zh",je("M11S","savage","zh",["shanzhe",""])],["m12s_p1",je({en:"M12S P1",zh:"M12S"},"savage","en","shanzhe")],["m12s_p1_zh",je({en:"M12S P1",zh:"M12S"},"savage","zh",["shanzhe",""])],["m12s_p2",je({en:"M12S P2",zh:"M12S"},"savage","en","shanzhe")],["m12s_p2_zh",je({en:"M12S P2",zh:"M12S"},"savage","zh",["shanzhe",""])],["m5s",je("M5S","savage","en","shanzhe")],["m6s",je("M6S","savage","en","shanzhe")],["m7s",je("M7S","savage","en","shanzhe")],["m8s_full",je("M8S","savage","en","shanzhe",!0)],["final_verse_q40",je("The Final Verse Q40","dungeon","en","shanzhe")],["dsr_p2",je("DSR P2","ultimate","en","Caro")],["dsr_p6",je("DSR P6","ultimate","en","Tischel")],["dsr_p7",je("DSR P7","ultimate","en","Tischel")],["TOP_2023_04_02",je("TOP","ultimate","en","Santa")],["m2s",je("M2S","savage","en","shanzhe")],["m3s",je("M3S","savage","en","shanzhe")],["m4s",je("M4S","savage","en","shanzhe")],["m1s_zh",je("M1S","savage","zh","kiyozero")],["m2s_zh",je("M2S","savage","zh","kiyozero")],["m3s_zh",je("M3S","savage","zh","kiyozero")],["m4s_zh",je("M4S","savage","zh","kiyozero")],["fru_en_full",je({en:"FRU",zh:""},"ultimate","en",["Yara","shanzhe"],!0)],["fru_zh",je({en:"FRU",zh:""},"ultimate","zh",["","czmm"])],["queen_eternal",je({en:"Queen Eternal",zh:""},"extreme","zh","")],["p1s_aetherial_shackles_first",je("P1S Aetherial Shackles first","savage","en")],["p1s_shackles_of_time_first",je("P1S Shackles of Time first","savage","en")],["p2s",je("P2S","savage","en")],["p5s_zh",je("P5S","savage","zh","3")],["p6s_zh",je("P6S","savage","zh","3")],["p7s_zh",je("P7S","savage","zh","3")],["p8s_p1_snake_zh",je({en:"P8S P1 snake first",zh:"P8S"},"savage","zh","3")],["p8s_p1_beast_zh",je({en:"P8S P1 dog first",zh:"P8S"},"savage","zh","3")],["p8s_p2_zh",je({en:"P8S P2",zh:"P8S"},"savage","zh","3")],["p9s",je("P9S","savage","en","Lilian")],["p10s",je("P10S","savage","en","Tischel")],["p11s",je("P11S","savage","en","Lilian")],["p12s_p1",je("P12S P1","savage","en","Yara")],["p12s_p2",je("P12S P2","savage","en","Yara")],["p9s_zh",je("P9S","savage","zh","3")],["p10s_zh",je("P10S","savage","zh","3")],["p11s_zh",je("P11S","savage","zh","3")],["p12s_p1_zh",je("P12S","savage","zh","3")],["p12s_p2_zh",je("P12S","savage","zh","3")]]),Q2=["m9s","m10s","m11s","m12s_p1","m12s_p2","m9s_zh","m10s_zh","m11s_zh","m12s_p1_zh","m12s_p2_zh","final_verse_q40","fru_en_full","fru_zh"],$2=["dsr_p2","dsr_p6","dsr_p7","TOP_2023_04_02"],J2=new Map([["7.0-7.3",["m2s","m3s","m4s","m1s_zh","m2s_zh","m3s_zh","m4s_zh","fru_en_full","fru_zh","queen_eternal","m5s","m6s","m7s","m8s_full","final_verse_q40"]],["6.X",["p1s_aetherial_shackles_first","p1s_shackles_of_time_first","p2s","dsr_p2","dsr_p6","dsr_p7","p5s_zh","p6s_zh","p7s_zh","p8s_p1_snake_zh","p8s_p1_beast_zh","p8s_p2_zh","p9s","p9s_zh","TOP_2023_04_02","p9s","p10s","p11s","p12s_p1","p12s_p2","p9s_zh","p10s_zh","p11s_zh","p12s_p1_zh","p12s_p2_zh"]]]);let ED=e=>{};const yh="/presets/markers/",kr=20,Ur=0,ss=5;function eF(e){const t=Tt();return l.jsx("hr",{style:{marginTop:e.marginTop,marginBottom:e.marginBottom,border:"none",borderTop:"1px solid "+t.bgHighContrast}})}const OR=function(e,t){Vb(e,a=>{try{const o=JSON.parse(a);t(o)}catch(o){console.log("Error fetching/parsing JSON "+e),console.error(o)}})},pu=C.createContext(""),rs=C.createContext({trackIndices:[],setTrackIndices:()=>{}});function mD(e,t,a){let o=Vi(a?.globalOffset??"");o=isNaN(o)?0:o;const s=Vi(a?.localOffset??"");I.timeline.loadCombinedTracksPreset(e,o+(isNaN(s)?0:s),a?.cutoff!==void 0?o+a.cutoff:void 0),t(I.timeline.getTrackIndices()),I.updateStats(),I.timeline.drawElements()}function AD(e){const t=C.useContext(pu),{setTrackIndices:a}=C.useContext(rs);return l.jsx("button",{onClick:o=>OR(e.url,s=>mD(s,a,{globalOffset:t,localOffset:e.offsetStr})),children:e.displayName})}function RD(e,t){return{en:(e.authors?.length??0)>0&&t?`${e.name.en} by ${e.authors?.join(" & ")}`:e.name.en,zh:(e.authors?.length??0)>0&&t?`${e.name.zh} ${e.authors?.join(" + ")} `:e.name.zh}}function tF(e){return l.jsx("div",{style:{marginBlock:1},children:l.jsx(AD,{displayName:N(RD(e.meta,e.showAuthors)),url:yh+e.fileName+".txt"})})}function nF(e){const t=C.useContext(pu),{setTrackIndices:a}=C.useContext(rs),o=ha(C.useContext(Nn)),[s,c]=C.useState(new Map),[d,f]=C.useState(void 0);C.useEffect(()=>{OR(yh+e.fileName+".txt",m=>{m.fileType!==di.MarkerTrackSet?console.error(`while parsing ${e.fileName}, got invalid file type ${m.fileType}`):f(m.phasedTracks)})},[]);const h=l.jsx("div",{style:{display:"grid",gridTemplateColumns:"2fr 3fr",gap:ss},children:d?.map(({offset:m,label:R,fileName:T},S)=>{let g=s.get(T);return g?.length||(g=m.toString()),T===void 0&&console.error("missing fileName for phase",R,"of",e.fileName),l.jsxs(Ha.Fragment,{children:[l.jsx("div",{style:{gridRow:S+1,gridColumn:1},children:l.jsx(jt,{description:"@",defaultValue:s.get(T)?.toString()??"",onChange:_=>{const p=new Map(s);_===void 0?p.delete(T):p.set(T,_),c(p)},width:8,placeholder:m.toString()})}),l.jsx("div",{style:{gridRow:S+1,gridColumn:2},children:l.jsx(AD,{displayName:N(R),url:yh+T,offsetStr:g})})]},S)})??N({en:"loading phases...",zh:""})});return l.jsx("div",{style:{display:"flex",flexDirection:"column",marginBlock:ss,marginLeft:5,paddingLeft:10,borderLeft:"1px solid "+o.bgHighContrast,minWidth:240},children:l.jsx(Tl,{title:`trackPresets-phase-${e.fileName}`,titleNode:l.jsxs("div",{style:{display:"inline-flex",flexDirection:"row",gap:ss,alignItems:"baseline",marginBottom:4},children:[l.jsx("div",{children:N(RD(e.meta,e.showAuthors))}),l.jsx("span",{tabIndex:-1,children:" "}),l.jsx("div",{children:l.jsx("button",{onClick:m=>{m.stopPropagation();const R=new Map;d?.forEach((T,S)=>{let g;for(let _=S+1;_<d.length;_++){const p=s.get(d[_].fileName);if(p){const O=Vi(p);(g===void 0||O<g)&&(g=O)}}g!==void 0&&R.set(T.fileName,g)}),d?.forEach(T=>OR(yh+T.fileName,S=>{mD(S,a,{globalOffset:t,localOffset:s.get(T.fileName)??T.offset.toString(),cutoff:R.get(T.fileName)})}))},children:N({en:"Load all phases",zh:""})})})]}),noMargin:!0,autoIndent:!1,content:h})})}function YA(e){const t=new Map,a=c=>{const d=zA.get(c);if(!d){console.error("missing track metadata declaration for "+c);return}t.has(d.fightKind)||t.set(d.fightKind,new Map);const f=t.get(d.fightKind);d.supportedLanguages.forEach(h=>{f.has(h)||f.set(h,{unphased:[],phased:[],commonAuthors:d.authors});const m=f.get(h);(d.phased?m.phased:m.unphased).push(c),d.authors?.join("+")!==m.commonAuthors?.join("+")&&(m.commonAuthors=void 0)})};e.trackList.map(a);const o={marginBlock:1},s=l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:ss,paddingInlineStart:6,marginInlineStart:10},children:t.entries().map(([c,d],f)=>d.entries().flatMap(([h,m])=>[l.jsxs("div",{children:[l.jsxs("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",gap:ss,alignItems:"baseline"},children:[N({en:m.commonAuthors?l.jsxs("p",{style:o,children:[sh(c)," (",Jd(h),") by"," ",m.commonAuthors.join(" & "),":"]}):l.jsxs("p",{style:o,children:[sh(c)," (",Jd(h),"):"]}),zh:m.commonAuthors?l.jsxs("p",{style:o,children:[sh(c),"",Jd(h),""," ",m.commonAuthors.join(" + "),""]}):l.jsxs("p",{style:o,children:[sh(c),"",Jd(h),""]})}),m.unphased.map((R,T)=>l.jsx(tF,{meta:zA.get(R),fileName:R,showAuthors:!m.commonAuthors},T))]}),l.jsx("div",{children:m.phased.map((R,T)=>l.jsx(nF,{meta:zA.get(R),fileName:R,showAuthors:!m.commonAuthors},T))})]},`${f}-${h}`)]).toArray()).toArray()});return l.jsx(Tl,{title:`trackPresets-${e.label.en}`,titleNode:N(e.label),titleBodyGap:ss,defaultShow:e.defaultShow,autoIndent:!1,content:s})}function aF(){const[e,t]=C.useState(Qn.Info),[a,o]=C.useState(ft.Blue),[s,c]=C.useState("0"),[d,f]=C.useState("1"),[h,m]=C.useState("0"),[R,T]=C.useState(""),[S,g]=C.useState(!1),[_,p]=C.useState(H.TechnicalFinish),O={display:"inline-block",marginRight:"1em",marginBottom:6},{setTrackIndices:y}=C.useContext(rs);C.useEffect(()=>{ED=K=>{t(K.markerType),c(K.time.toString()),f(K.duration.toString()),K.markerType===Qn.Info?(o(K.color),c(K.time.toString()),f(K.duration.toString()),m(K.track.toString()),T(K.description),g(K.showText)):K.markerType===Qn.Buff&&(m(K.track.toString()),p(K.description))};const B=Rt("radio: markerType");B!==null&&(t(B),B===Qn.Buff&&D(_))},[]);const L=(B,K)=>l.jsx("option",{value:B,children:K},B),P=l.jsxs("div",{children:[l.jsx(jt,{defaultValue:R,description:N({en:"Description: ",zh:""}),width:40,onChange:T}),l.jsx(jt,{defaultValue:h,description:N({en:"Track: ",zh:""}),width:4,style:O,onChange:m}),l.jsxs("div",{style:{display:"inline-block",marginTop:"4px"},children:[l.jsx("span",{children:N({en:"Color: ",zh:""})}),l.jsx("select",{style:{display:"inline-block",outline:"none"},value:a,onChange:B=>{B.target&&o(B.target.value)},children:[L(ft.Red,N({en:"red",zh:""})),L(ft.Orange,N({en:"orange",zh:""})),L(ft.Yellow,N({en:"yellow",zh:""})),L(ft.Green,N({en:"green",zh:""})),L(ft.Cyan,N({en:"cyan",zh:""})),L(ft.Blue,N({en:"blue",zh:""})),L(ft.Purple,N({en:"purple",zh:""})),L(ft.Pink,N({en:"pink",zh:""}))]}),l.jsx("div",{style:{background:a,marginLeft:"4px",display:"inline-block",verticalAlign:"middle",height:"1em",width:"4em"}})]}),l.jsxs("div",{style:{display:"inline-block",marginTop:"4px",marginLeft:"10px"},children:[l.jsx("input",{type:"checkbox",style:{position:"relative",top:3},checked:S,onChange:B=>{B.target&&g(B.target.checked)}}),l.jsx("span",{style:{marginLeft:4},children:N({en:"show text",zh:""})})]})]}),D=B=>{const K=new Qh(B);f(K.info.duration.toString())},k=DT.map(B=>l.jsx("option",{value:B.name,children:nC(B.name)},B.name)),G=l.jsxs("div",{children:[l.jsx("span",{children:N({en:"Buff: ",zh:""})}),l.jsx("select",{value:_,onChange:B=>{if(B.target){const K=B.target.value;p(K),D(K)}},children:k}),l.jsx("div",{style:{marginTop:5},children:l.jsx(jt,{defaultValue:h,description:N({en:"Track: ",zh:""}),width:4,style:O,onChange:m})})]});return l.jsxs("div",{children:[l.jsx("p",{children:l.jsx("b",{children:N({en:"Add buffs/markers",zh:"buff"})})}),l.jsxs("form",{children:[l.jsxs("fieldset",{style:{display:"flex",alignItems:"baseline",paddingTop:0,paddingLeft:0,paddingBottom:0,marginLeft:0,marginBottom:10,border:0},children:[l.jsx("legend",{style:{float:"left",marginRight:"0.5rem",position:"relative",top:"1px"},children:N({en:"Type: ",zh:""})}),l.jsx(Xb,{containerStyle:{display:"flex",flexDirection:"row",gap:"0.8rem"},uniqueName:"markerType",selected:e,onChange:B=>{t(B),B===Qn.Buff&&D(_)},options:[[Qn.Info,N({en:"Info",zh:""})],[Qn.Buff,N({en:"Buff",zh:""})],[Qn.Untargetable,N({en:"Untargetable",zh:""})]]})]}),l.jsx("span",{children:" "}),l.jsx(jt,{defaultValue:s,description:N({en:"Time: ",zh:""}),width:8,style:O,onChange:c}),l.jsx(jt,{defaultValue:d,description:N({en:"Duration: ",zh:""}),width:8,style:O,onChange:f}),e===Qn.Info?P:void 0,e===Qn.Buff?G:void 0,l.jsx("button",{type:"submit",style:{display:"block",marginTop:"0.5em"},onClick:B=>{const K={type:ot.Marker,markerType:e,time:Vi(s),duration:parseFloat(d),color:a,track:parseInt(h),description:R,showText:S};let V;if(e===Qn.Untargetable&&(K.color=ft.Grey,K.track=qi,K.description="",K.showText=!0),e===Qn.Buff){const ae=new Qh(_),oe=parseFloat(d);!isNaN(oe)&&oe>ae.info.duration&&(V=N({en:`this buff can't last longer than ${ae.info.duration}s`,zh:`${ae.info.duration}`})),K.color=ae.info.color,K.description=ae.name,K.duration=oe,K.showText=!0}if((isNaN(K.duration)||isNaN(K.time)||isNaN(K.track))&&(V=N({en:"some input(s) are invalid",zh:""})),K.track!==qi&&(K.track<Ur||K.track>kr)&&(V=N({en:`marker track number must be between ${Ur} and ${kr}`,zh:`${Ur}${kr}`})),V){window.alert(V),B.preventDefault();return}I.timeline.addMarker(K),I.updateStats(),y(I.timeline.getTrackIndices()),e===Qn.Untargetable&&Mn(),B.preventDefault()},children:N({en:"add marker",zh:""})})]})]})}function iF(){const{trackIndices:e,setTrackIndices:t}=C.useContext(rs),a=parseInt(C.useContext(pu)),o=isNaN(a)?0:a,s=ha(C.useContext(Nn)),[c,d]=C.useState("0"),f=l.jsx("input",{style:{color:s.text,backgroundColor:"transparent",outline:"none",border:"none",borderBottom:"1px solid "+s.text},size:2,type:"text",value:c,onChange:T=>d(T.target.value)}),h=N({en:l.jsxs("span",{children:["Load into individual track ",f,": "]}),zh:l.jsxs("span",{children:["",f,""]})}),m=l.jsxs(l.Fragment,{children:[l.jsx(qh,{allowLoadFromUrl:!1,defaultLoadUrl:"",label:N({en:"Load multiple tracks combined: ",zh:""}),onLoadFn:T=>{I.timeline.loadCombinedTracksPreset(T,o),I.updateStats(),t(I.timeline.getTrackIndices()),I.timeline.drawElements()}}),l.jsx("div",{className:"paragraph",children:l.jsx(qh,{allowLoadFromUrl:!1,label:h,onLoadFn:T=>{const S=parseInt(c);if(isNaN(S)||S!==qi&&(S<Ur||S>kr)){window.alert(N({en:`marker track number must be between ${Ur} and ${kr}`,zh:`${Ur}${kr}`}));return}I.timeline.loadIndividualTrackPreset(T,S,o),I.updateStats(),t(I.timeline.getTrackIndices()),I.timeline.drawElements()}})})]}),R=l.jsxs(l.Fragment,{children:[l.jsx(Rl,{fileFormat:vo.Json,getContentFn:()=>I.timeline.serializedCombinedMarkerTracks(),filename:"tracks_all",displayName:N({en:"all tracks combined",zh:""})},"combined"),e.map(T=>{let S=T.toString(),g=N({en:"track ",zh:""})+S;return T===qi&&(S="untargetable",g=N({en:"track untargetable",zh:""})),l.jsx(Rl,{fileFormat:vo.Json,getContentFn:()=>{const _=I.timeline.serializedSeparateMarkerTracks();for(let p=0;p<_.length;p++)if(_[p].track===T)return _[p];return console.assert(!1),[]},filename:"track_"+S,displayName:g},T)})]});return l.jsxs("div",{children:[l.jsxs("p",{children:[l.jsx("b",{children:N({en:"Load marker tracks from file",zh:""})})," ",l.jsx(ze,{topic:"load tracks",content:N({en:"when loading additional markers, current markers will not be deleted",zh:""})})]}),m,l.jsx("p",{style:{marginTop:16},children:l.jsx("b",{children:N({en:"Save marker tracks to file",zh:""})})}),R]})}function oF(){const[e,t]=C.useState([]);C.useEffect(()=>{t(I.timeline.getTrackIndices())},[]);const[a,o]=C.useState(""),s=Vi(a),c=l.jsx(jt,{defaultValue:a,description:l.jsxs(l.Fragment,{children:[l.jsx("span",{style:{color:isNaN(s)||s===0?"":ft.Purple},children:N({en:"Load tracks with time offset ",zh:" "})}),l.jsx(ze,{topic:"trackLoadOffset",content:N({en:l.jsxs("div",{children:[l.jsx("p",{children:"When specified, all imported and preset tracks will start from the specified timestamp. Use this to combine markers for multi-phase fights with varying kill times."}),l.jsx("p",{children:"Loading preset tracks that already have phase timestamps will add this start value on top of the phase-specific timing."})]}),zh:l.jsxs("div",{children:[l.jsx("p",{children:"P"}),l.jsx("p",{children:"P"})]})})}),":"]}),width:4,onChange:o}),d=l.jsxs(l.Fragment,{children:[l.jsx("p",{children:l.jsx("b",{children:N({en:"Remove buffs/markers",zh:"buff"})})}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"max-content max-content",columnGap:2,rowGap:ss,alignItems:"center"},children:[l.jsx("div",{children:l.jsx("button",{onClick:()=>{I.timeline.deleteAllMarkers(),I.updateStats(),t([])},children:N({en:"clear all markers",zh:""})})}),l.jsx("div",{children:l.jsx("button",{onClick:()=>{const f=I.timeline.sortAndRemoveDuplicateMarkers();f>0?alert("removed "+f+" duplicate markers"):alert("no duplicate markers found"),I.timeline.updateTimelineMarkers()},children:N({en:"remove duplicates",zh:""})})}),l.jsx("div",{style:{gridColumn:"1 / 3"},children:N({en:"click a marker in the timeline to delete it",zh:""})})]})]});return l.jsx(NT,{contentHeight:oS,children:[{defaultSize:35,content:l.jsxs(l.Fragment,{children:[l.jsx("p",{children:l.jsx("b",{children:N({en:"Presets",zh:""})})}),l.jsx("div",{children:c}),l.jsx(pu.Provider,{value:a,children:l.jsxs(rs.Provider,{value:{trackIndices:e,setTrackIndices:t},children:[l.jsx(YA,{label:{en:"Current content",zh:""},trackList:Q2,defaultShow:!0}),l.jsx(YA,{label:{en:"Legacy ultimates",zh:""},trackList:$2,defaultShow:!0}),l.jsx("p",{children:l.jsx("b",{children:N({en:"Archive",zh:""})})}),Array.from(J2.entries().map(([f,h],m)=>l.jsx("div",{children:l.jsx(YA,{label:{en:f},trackList:h})},m)))]})})]})},{defaultSize:30,content:l.jsxs(l.Fragment,{children:[d,l.jsx(eF,{marginTop:15,marginBottom:15}),l.jsx(rs.Provider,{value:{trackIndices:e,setTrackIndices:t},children:l.jsx(aF,{})})]})},{defaultSize:35,content:l.jsx(l.Fragment,{children:l.jsx(pu.Provider,{value:a,children:l.jsx(rs.Provider,{value:{trackIndices:e,setTrackIndices:t},children:l.jsx(iF,{})})})})}]})}const ve=new Map;ve.set(H.LeyLines,"Buffs/BLM/Ley Lines.png");ve.set(H.Tincture,"Buffs/General/Tincture.png");ve.set(H.ArcaneCircle,"Buffs/RPR/Arcane Circle.png");ve.set(H.ArmysPaeon,"Buffs/BRD/Army's Paeon.png");ve.set(H.BattleLitany,"PartyBuffs/battle_litany.png");ve.set(H.BattleVoice,"Buffs/BRD/Battle Voice.png");ve.set(H.Brotherhood,"PartyBuffs/brotherhood.png");ve.set(H.Card_TheBalance,"PartyBuffs/the_balance.png");ve.set(H.Card_TheSpear,"PartyBuffs/the_spear.png");ve.set(H.ChainStratagem,"PartyBuffs/chain_stratagem.png");ve.set(H.Devilment,"Buffs/DNC/Devilment.png");ve.set(H.Divination,"PartyBuffs/divination.png");ve.set(H.Dokumori,"PartyBuffs/dokumori.png");ve.set(H.Embolden,"PartyBuffs/Embolden.png");ve.set(H.MagesBallad,"Buffs/BRD/Mage's Ballad.png");ve.set(H.RadiantFinale1,"Buffs/BRD/Radiant Finale.png");ve.set(H.RadiantFinale2,"Buffs/BRD/Radiant Finale.png");ve.set(H.RadiantFinale3,"Buffs/BRD/Radiant Finale.png");ve.set(H.SearingLight,"PartyBuffs/searing_light.png");ve.set(H.StandardFinish,"Buffs/DNC/Standard Finish.png");ve.set(H.StarryMuse,"Buffs/PCT/Starry Muse.png");ve.set(H.TechnicalFinish,"Buffs/DNC/Technical Finish.png");ve.set(H.WanderersMinuet,"Buffs/BRD/Wanderer's Minuet.png");ve.set(H.Acceleration,"Buffs/RDM/Acceleration.png");ve.set(H.Fuka,"Buffs/SAM/Fuka.png");ve.set(H.Fugetsu,"Buffs/SAM/Fugetsu.png");ve.set(H.EnhancedEnpi,"Buffs/SAM/Enhanced Enpi.png");ve.set(H.DeathsDesign,"Buffs/RPR/Death's Design.png");ve.set(H.ArcaneCircle,"Buffs/RPR/Arcane Circle.png");ve.set(H.RagingStrikes,"Buffs/BRD/Raging Strikes.png");ve.set(H.Barrage,"Buffs/BRD/Barrage.png");ve.set(H.NoMercy,"Buffs/GNB/No Mercy.png");ve.set(H.EnhancedPiercingTalon,"Buffs/DRG/Enhanced Piercing Talon.png");ve.set(H.PowerSurge,"Buffs/DRG/Power Surge.png");ve.set(H.LanceCharge,"Buffs/DRG/Lance Charge.png");ve.set(H.LifeOfTheDragon,"Buffs/DRG/Life of the Dragon.png");ve.set(H.LifeSurge,"Buffs/DRG/Life Surge.png");ve.set(H.DivineMight,"Buffs/PLD/Divine Might.png");ve.set(H.Requiescat,"Buffs/PLD/Requiescat Zero.png");ve.set(H.FightOrFlight,"Buffs/PLD/Fight or Flight.png");ve.set(H.Zoe,"Buffs/SGE/Zoe.png");ve.set(H.Autophysis,"Buffs/SGE/Autophysis.png");ve.set(H.Krasis,"Buffs/SGE/Krasis.png");ve.set(H.Philosophia,"Buffs/SGE/Philosophia.png");ve.set(H.Soteria,"Buffs/SGE/Soteria.png");ve.set(H.TrickAttack,"Buffs/NIN/Trick Attack.png");ve.set(H.KunaisBane,"Buffs/NIN/Kunai's Bane.png");ve.set(H.Bunshin,"Buffs/NIN/Bunshin.png");ve.set(H.RiddleOfFire,"Buffs/MNK/Riddle of Fire.png");ve.set(H.NeutralSect,"Buffs/AST/Neutral Sect.png");ve.set(H.Synastry,"Buffs/AST/Synastry.png");ve.set(H.TheArrow,"Buffs/AST/The Arrow.png");ve.set(H.Confession,"Buffs/WHM/Confession.png");ve.set(H.Asylum,"Buffs/WHM/Asylum.png");ve.set(H.Temperance,"Buffs/WHM/Temperance.png");ve.set(H.HuntersInstinct,"Buffs/VPR/Hunter's Instinct.png");ve.set(H.Swiftscaled,"Buffs/VPR/Swiftscaled.png");ve.set(H.FeyIllumination,"Buffs/SCH/Fey Illumination.png");ve.set(H.Dissipation,"Buffs/SCH/Dissipation.png");ve.set(H.Protraction,"Buffs/SCH/Protraction.png");ve.set(H.Recitation,"Buffs/SCH/Recitation.png");const cs=new Map;ve.forEach((e,t)=>{const a=new Image;a.src="assets/"+e,a.onload=function(){xo()},cs.set(t,a)});const cf=400,Ma=28,TD=e=>{e.setDraggedSkillElem(void 0),I.record.unselectAll(),I.displayCurrentState(),e.setBgSelecting(!0)};function lF(e){const{ctx:t,lines:a,images:o,viewInfo:s}=e;let{mouseX:c,mouseY:d}=e;const{colors:f,visibleWidth:h,renderingProps:m}=s;if(!a.length)return;const R=14,T=24,S=8,g=4;t.font="12px "+hi;let _=-1;a.forEach(G=>{_=Math.max(_,t.measureText(G).width)});let[p,O]=[_+2*S,R*a.length+2*g];o&&o.length>0&&(p=Math.max(p,S+o.length*(T+S)),O+=T+g);const y=4,L=11;let P=!1;d>=O+y?d=d-O-y:d+O<=m.timelineHeight?d=d+L+y:P=!0,P?(d=d-O/2,c=c+L+y):c-p/2>=0&&c+p/2<h?c=c-p/2:c-p/2<0?c=0:c=h-p,t.strokeStyle=f.bgHighContrast,t.lineWidth=1,t.fillStyle=f.tipBackground,t.fillRect(c,d,p,O),t.strokeRect(c,d,p,O),t.fillStyle=f.emphasis,t.textBaseline="top",t.textAlign="left";for(let G=0;G<a.length;G++)t.fillText(a[G],c+S,d+G*R+2+g);const D=c+S,k=d+a.length*R+2+g;if(o)for(let G=0;G<o.length;G++)o[G]&&t.drawImage(o[G],D+G*T,k,T*.75,T)}function sF(e){const{ctx:t,viewInfo:a,markerTracksTopY:o,markerTracksBottomY:s,timelineOrigin:c,trackBins:d,testInteraction:f}=e,h=a.colors,{countdown:m,scale:R}=a.renderingProps;t.lineCap="round",t.lineWidth=4,t.font="11px "+hi,t.textAlign="left",d.forEach((T,S)=>{let g=s-(S+1)*pe.trackHeight;S===qi&&(g=o);for(let _=0;_<T.length;_++){const p=T[_];let O=p.description;p.markerType===Qn.Untargetable?O=N({en:"Untargetable",zh:""}):p.markerType===Qn.Buff&&(O=nC(p.description));const y=c+Xe.positionFromTimeAndScale(p.time+m,R),L=()=>{const P=I.timeline.deleteMarker(p);console.assert(P),I.updateStats(),ED(p)};if(p.duration>0){const P=Xe.positionFromTimeAndScale(p.duration,R);if(p.markerType===Qn.Buff){t.fillStyle=p.color+h.timeline.markerAlpha,t.fillRect(y,g,P,pe.trackHeight);const k=cs.get(p.description);k&&t.drawImage(k,y,g,pe.trackHeight*.75,pe.trackHeight),t.fillStyle=h.emphasis,t.fillText(O,y+pe.trackHeight*1.5,g+10)}else p.showText?(t.fillStyle=p.color+h.timeline.markerAlpha,t.fillRect(y,g,P,pe.trackHeight),t.fillStyle=h.emphasis,t.fillText(O,y+pe.trackHeight/2,g+10)):(t.strokeStyle=p.color,t.beginPath(),t.moveTo(y,g+pe.trackHeight/2),t.lineTo(y+P,g+pe.trackHeight/2),t.stroke());const D=p.time+" - "+parseFloat((p.time+p.duration).toFixed(3));f({x:y,y:g,w:Math.max(P,pe.trackHeight),h:pe.trackHeight},{hoverTip:[`[${D}] ${O}`],onMouseUp:L})}else t.fillStyle=p.color,t.beginPath(),t.ellipse(y,g+pe.trackHeight/2,4,4,0,0,2*Math.PI),t.fill(),p.showText&&(t.fillStyle=h.emphasis,t.beginPath(),t.fillText(O,y+pe.trackHeight/2,g+10)),f({x:y-pe.trackHeight/2,y:g,w:pe.trackHeight,h:pe.trackHeight},{hoverTip:[`[${p.time}] ${O}`],onMouseUp:L})}})}function rF(e){const{ctx:t,viewInfo:a,timelineOriginX:o,timelineOriginY:s,elems:c,testInteraction:d}=e,f=a.colors,h=a.renderingProps.scale;t.lineWidth=1,t.strokeStyle=f.timeline.mpTickMark,t.beginPath(),c.forEach(m=>{const R=o+Xe.positionFromTimeAndScale(m.displayTime,h);t.moveTo(R,s),t.lineTo(R,s+pe.renderSlotHeight()),d({x:R-2,y:s,w:4,h:pe.renderSlotHeight()},{hoverTip:[`[${m.displayTime.toFixed(3)}] ${m.sourceDesc}`]})}),t.stroke()}function cF(e){const{ctx:t,viewInfo:a,timelineOriginX:o,timelineOriginY:s,elems:c,testInteraction:d}=e,f=a.colors,h=a.renderingProps.scale;t.lineWidth=1,t.strokeStyle=f.sam.meditation,t.beginPath(),c.forEach(m=>{const R=o+Xe.positionFromTimeAndScale(m.displayTime,h);t.moveTo(R,s),t.lineTo(R,s+pe.renderSlotHeight()),d({x:R-2,y:s,w:4,h:pe.renderSlotHeight()},{hoverTip:[`[${m.displayTime.toFixed(3)}] ${m.sourceDesc}`]})}),t.stroke()}function uF(e){const{ctx:t,viewInfo:a,timelineOriginX:o,timelineOriginY:s,elems:c,testInteraction:d}=e,f=a.colors,h=a.renderingProps.scale;t.lineWidth=1,t.strokeStyle=f.pld.ironWillColor,t.beginPath(),c.forEach(m=>{const R=o+Xe.positionFromTimeAndScale(m.displayTime,h);t.moveTo(R,s),t.lineTo(R,s+pe.renderSlotHeight()),d({x:R-2,y:s,w:4,h:pe.renderSlotHeight()},{hoverTip:[`[${m.displayTime.toFixed(3)}] ${m.sourceDesc}`]})}),t.stroke()}function dF(e){const{ctx:t,viewInfo:a,timelineOriginX:o,timelineOriginY:s,elems:c,testInteraction:d}=e,f=a.colors,h=a.renderingProps.scale;t.font="bold 10px "+hi,c.forEach(m=>{const R=o+Xe.positionFromTimeAndScale(m.displayTime,h),T=12,S=s+T;t.beginPath(),t.textAlign="center",t.moveTo(R,S-T),t.lineTo(R-T/2,S),t.lineTo(R+T/2,S),t.fillStyle=f.timeline.warningMark,t.fill(),t.fillStyle="white",t.fillText("!",R,S-1);let g="["+m.displayTime.toFixed(3)+"] ";switch(m.warningType.kind){case"combobreak":g+=N({en:"broken combo!",zh:""}).toString();break;case"overcap":g+=Ke(m.warningType.rsc).toString()+N({en:" overcap!",zh:""}).toString();break;case"overwrite":g+=Ke(m.warningType.rsc).toString()+N({en:" overwrite!",zh:""}).toString();break;case"timeout":g+=Ke(m.warningType.rsc).toString()+N({en:" expired!",zh:""});break;default:g+=N({en:m.warningType.en,zh:m.warningType.zh});break}d({x:R-T/2,y:S-T,w:T,h:T},{hoverTip:[g]})})}function KA(e){const{ctx:t,viewInfo:a,timelineOriginX:o,timelineOriginY:s,elems:c,testInteraction:d}=e,{colors:f,renderingProps:h}=a,m=h.scale;c.forEach(R=>{const T=R.type===ot.DamageMark&&Jn(R.displayTime),S=o+Xe.positionFromTimeAndScale(R.displayTime,m);let g="["+R.displayTime.toFixed(3)+"] ";const _=N({en:"Untargetable",zh:""});switch(R.type){case ot.AggroMark:t.fillStyle=f.timeline.aggroMark,g+=N({en:"aggro"});break;case ot.HealingMark:t.fillStyle=f.timeline.healingMark,g+=N({en:"healing potency",zh:""});break;default:t.fillStyle=T?f.timeline.untargetableDamageMark:f.timeline.damageMark,g+=N({en:"damage potency",zh:""})}t.beginPath(),R.type===ot.AggroMark||R.type===ot.DamageMark?(t.moveTo(S-3,s),t.lineTo(S+3,s),t.lineTo(S,s+6)):(t.moveTo(S-3,s+12),t.lineTo(S+3,s+12),t.lineTo(S,s+6)),t.fill();const p=R.buffs.filter(P=>P==="TINCTURE").length>0,O=[],y=[];R.potencyInfos.forEach(P=>{const D=P.sourceDesc.replace("{skill}",Wa(P.sourceSkill));if(T)O.push(0 .toFixed(3)+" ("+D+")");else if(P.sourceSkill in Do){const k=N({en:"LB"});O.push(k+" ("+D+")")}else{const k=P.potency.getAmount({tincturePotencyMultiplier:h.tincturePotencyMultiplier,includePartyBuffs:!0,includeSplash:!1});if(P.potency.targetCount>1){const G=k*(1-(P.potency.falloff??1)),B=P.potency.targetCount-1,K=G.toFixed(2)+(B>1?` x ${B}`:""),V=B>1?N({en:`${D}, ${B} additional targets`,zh:`${D}, ${B} `}):N({en:`${D}, 1 additional target`,zh:`${D}, 1 `});O.push(k.toFixed(2)+" ("+N({en:`${D}, primary target`,zh:`${D}, `})+")"),O.push(K+` (${V})`)}else O.push(k.toFixed(2)+" ("+D+")");p&&!y.includes(cs.get(H.Tincture))&&y.push(cs.get(H.Tincture)),P.potency.getPartyBuffs(R.displayTime).forEach(G=>{const B=cs.get(G);y.includes(B)||y.push(B)})}});const L=R.type===ot.HealingMark?{x:S-3,y:s+6,w:6,h:6}:{x:S-3,y:s,w:6,h:6};d(L,{hoverTip:T?[g,...O,_]:[g,...O],hoverImages:y})})}function hF(e){const{ctx:t,viewInfo:a,timelineOriginX:o,timelineOriginY:s,elems:c,testInteraction:d}=e,f=a.colors,h=a.renderingProps.scale;t.fillStyle=f.timeline.lucidTickMark,c.forEach(m=>{const R=o+Xe.positionFromTimeAndScale(m.displayTime,h);t.beginPath(),t.moveTo(R-3,s),t.lineTo(R+3,s),t.lineTo(R,s+6),t.fill();const T=`[${m.displayTime.toFixed(3)}] ${m.sourceDesc.replace("{skill}",Wa("LUCID_DREAMING"))}`;d({x:R-3,y:s,w:6,h:6},{hoverTip:[T]})})}function fF(e){const{ctx:t,viewInfo:a,timelineOriginX:o,timelineOriginY:s,elems:c,interactive:d,testInteraction:f}=e,{colors:h,renderingProps:m}=a,R=m.scale,T=[],S=[],g=[],_=[],p=[],O=[],y=new Map([[H.Tincture,{color:h.timeline.potCover,showImage:!0}],[H.LeyLines,{color:h.timeline.llCover,showImage:!0}],[H.SearingLight,{color:h.smn.searing,showImage:!0}],[H.Hyperphantasia,{color:h.timeline.llCover,showImage:!1}],[H.StarryMuse,{color:h.timeline.buffCover,showImage:!0}],[H.Embolden,{color:h.rdm.emboldenBuff,showImage:!0}],[H.Acceleration,{color:h.rdm.accelBuff,showImage:!0}],[H.TechnicalFinish,{color:h.dnc.esprit,showImage:!0}],[H.Devilment,{color:h.dnc.feathers,showImage:!0}],[H.Fuka,{color:h.timeline.llCover,showImage:!0}],[H.Fugetsu,{color:h.sam.fugetsu,showImage:!0}],[H.NoMercy,{color:h.sam.fugetsu,showImage:!0}],[H.EnhancedPiercingTalon,{color:h.drg.enhancedPiercingTalon,showImage:!0}],[H.PowerSurge,{color:h.drg.powerSurge,showImage:!0}],[H.LifeSurge,{color:h.drg.lifeSurge,showImage:!0}],[H.LanceCharge,{color:h.drg.lanceCharge,showImage:!0}],[H.LifeOfTheDragon,{color:h.drg.lifeOfTheDragon,showImage:!0}],[H.BattleLitany,{color:h.drg.battleLitany,showImage:!0}],[H.DivineMight,{color:h.pld.divineMight,showImage:!0}],[H.Requiescat,{color:h.pld.requiescat,showImage:!0}],[H.FightOrFlight,{color:h.pld.fightOrFlight,showImage:!0}],[H.EnhancedEnpi,{color:h.rdm.accelBuff,showImage:!0}],[H.ArcaneCircle,{color:h.rpr.arcaneCircle,showImage:!0}],[H.DeathsDesign,{color:h.rpr.deathsDesign,showImage:!0}],[H.WanderersMinuet,{color:h.brd.wanderersCoda,showImage:!0}],[H.MagesBallad,{color:h.brd.magesCoda,showImage:!0}],[H.ArmysPaeon,{color:h.brd.armysCoda,showImage:!0}],[H.RagingStrikes,{color:h.brd.ragingStrikes,showImage:!0}],[H.Barrage,{color:h.brd.barrage,showImage:!0}],[H.BattleVoice,{color:h.brd.battleVoice,showImage:!0}],[H.RadiantFinale1,{color:h.brd.radiantFinale,showImage:!0}],[H.RadiantFinale2,{color:h.brd.radiantFinale,showImage:!0}],[H.RadiantFinale3,{color:h.brd.radiantFinale,showImage:!0}],[H.Zoe,{color:h.sge.zoe,showImage:!0}],[H.Autophysis,{color:h.sge.autophysis,showImage:!0}],[H.Krasis,{color:h.sge.krasis,showImage:!0}],[H.Soteria,{color:h.sge.soteria,showImage:!0}],[H.Philosophia,{color:h.sge.philosophia,showImage:!0}],[H.WaxingNocturne,{color:h.blu.moonflute,showImage:!0}],[H.Bristle,{color:h.blu.bristle,showImage:!0}],[H.Whistle,{color:h.blu.whistle,showImage:!0}],[H.TingleA,{color:h.blu.tinglea,showImage:!0}],[H.TingleB,{color:h.blu.tingleb,showImage:!0}],[H.Dokumori,{color:h.nin.dokumori,showImage:!0}],[H.TrickAttack,{color:h.nin.trick,showImage:!0}],[H.KunaisBane,{color:h.nin.trick,showImage:!0}],[H.Bunshin,{color:h.nin.bunshin,showImage:!0}],[H.RiddleOfFire,{color:h.mnk.riddleOfFire,showImage:!0}],[H.Brotherhood,{color:h.mnk.brotherhood,showImage:!0}],[H.Divination,{color:h.ast.div,showImage:!0}],[H.NeutralSect,{color:h.ast.neutral,showImage:!0}],[H.Synastry,{color:h.ast.synastry,showImage:!0}],[H.TheArrow,{color:h.ast.arrow,showImage:!0}],[H.Confession,{color:h.whm.confession,showImage:!0}],[H.Asylum,{color:h.whm.asylum,showImage:!0}],[H.Temperance,{color:h.whm.temperance,showImage:!0}],[H.HuntersInstinct,{color:h.vpr.huntersInstinct,showImage:!0}],[H.Swiftscaled,{color:h.vpr.swiftscaled,showImage:!0}],[H.ChainStratagem,{color:h.sch.chain,showImage:!0}],[H.FeyIllumination,{color:h.sch.feyIllumination,showImage:!0}],[H.Dissipation,{color:h.sch.dissipation,showImage:!0}],[H.Protraction,{color:h.sch.protraction,showImage:!0}],[H.Recitation,{color:h.sch.recitation,showImage:!0}]]),L=new Map;y.forEach((V,ae)=>L.set(ae,[]));const P=[],D=[],k=[],G=s+pe.skillButtonHeight/2;c.forEach(V=>{const ae=V,oe=o+Xe.positionFromTimeAndScale(ae.displayTime,R),j=ae.isGCD?G+pe.skillButtonHeight/2:G,$=ae.node.targetList;$.length>1?T.push({count:$.length,x:oe+pe.skillButtonHeight/2,y:j-5}):$.length===1&&$[0]!==1&&S.push({target:$[0],x:oe+pe.skillButtonHeight/2,y:j-3});const X=2,ce=Xe.positionFromTimeAndScale(ae.lockDuration,R);if(ae.isSpellCast?(_.push({x:oe+X,y:j,w:ce-X,h:pe.skillButtonHeight/2}),O.push(oe+Xe.positionFromTimeAndScale(ae.relativeSnapshotTime,R))):g.push({x:oe+X,y:j,w:ce-X,h:pe.skillButtonHeight}),ae.isGCD){const Ee=Xe.positionFromTimeAndScale(ae.recastDuration,R);p.push({x:oe+X,y:j+pe.skillButtonHeight/2,w:Ee-X,h:pe.skillButtonHeight/2})}if(ae.skillName in Do){const Ee=Xe.positionFromTimeAndScale(ae.recastDuration,R);g.push({x:oe+X,y:j+pe.skillButtonHeight/2,w:Ee-X,h:pe.skillButtonHeight/2})}ae.node.tmp_invalid_reasons.length>0&&D.push({x:oe,y:s+pe.slotPaddingTop,w:Xe.positionFromTimeAndScale(ae.isGCD?Math.max(ae.recastDuration,ae.lockDuration):ae.lockDuration,R),h:pe.renderSlotHeight()-pe.slotPaddingBottom-pe.slotPaddingTop});let w=0;L.forEach((Ee,M)=>{ae.node.hasBuff(M)&&(w+=z(w,Ee))}),ae.node.hasPartyBuff()&&z(w,P);function z(Ee,M){return m.drawOptions.drawBuffIndicators&&M.push({x:oe,y:j+Ma+Ee*4,w:Ma,h:4}),1}hR(ae.skillName)&&k.push({elem:V,x:oe,y:j})}),t.font="13px "+hi,t.fillStyle=h.text,t.textAlign="center",T.forEach(V=>{t.fillText(""+V.count.toString(),V.x,V.y)}),t.font="26px "+hi,S.forEach(V=>{t.fillText(String.fromCharCode(9312+V.target-1),V.x,V.y)}),t.font="13px "+hi;const B=V=>{t.rect(V.x,V.y,V.w,V.h),d&&f(V,{onMouseDown:TD})};t.fillStyle=h.timeline.castBar,t.beginPath(),_.forEach(B),t.fill(),t.lineWidth=1,t.strokeStyle="rgba(151, 85, 239, 0.4)",t.beginPath(),O.forEach(V=>{t.moveTo(V,G+Ma/2),t.lineTo(V,G+Ma)}),t.stroke(),t.fillStyle=h.timeline.gcdBar,t.beginPath(),p.forEach(B),t.fill(),t.fillStyle=h.timeline.lockBar,t.beginPath(),g.forEach(B),t.fill(),L.forEach((V,ae)=>{t.fillStyle=y.get(ae).color,t.beginPath(),V.forEach(B),t.fill()}),t.fillStyle=h.timeline.buffCover,t.beginPath(),P.forEach(B),t.fill(),t.beginPath(),k.forEach(V=>{t.drawImage(hR(V.elem.skillName),V.x,V.y,Ma,Ma);const ae=V.elem.node,oe=[],j=[],$=Wa(V.elem.skillName)+"@"+V.elem.displayTime.toFixed(3);oe.push($);const X=ae.targetList;if(X.length>0&&(X.length===1?oe.push(N({en:"target: ",zh:""}).toString()+X[0]):oe.push(N({en:"targets: ",zh:""}).toString()+ae.targetList.join(" "))),!((ae.maybeGetActionKey()??"NEVER")in Do)){const w=ae.getPotency({tincturePotencyMultiplier:m.tincturePotencyMultiplier,includePartyBuffs:!0,includeSplash:!0,untargetable:Jn}).applied;w&&oe.push(N({en:"potency: ",zh:""})+w.toFixed(2));const z=ae.getHealingPotency({tincturePotencyMultiplier:m.tincturePotencyMultiplier,includeSplash:!0,includePartyBuffs:!0,untargetable:Jn}).applied;z&&oe.push(N({en:"healing potency: "})+z.toFixed(2))}let ce=0;ae.tmp_endLockTime!==void 0&&ae.tmp_startLockTime!==void 0&&(ce=ae.tmp_endLockTime-ae.tmp_startLockTime),oe.push(N({en:"duration: ",zh:""})+ce.toFixed(3)),ae.tmp_invalid_reasons.length>0&&(oe.push(""),oe.push(N({en:"skill is invalid:",zh:""}).toString()),ae.tmp_invalid_reasons.forEach(w=>oe.push("- "+as(w)))),y.forEach((w,z)=>{w.showImage&&ae.hasBuff(z)&&j.push(cs.get(z))}),ae.getPartyBuffs().forEach(w=>{const z=cs.get(w);z&&j.push(z)}),d?f({x:V.x,y:V.y,w:Ma,h:Ma},{hoverTip:oe,onMouseUp:w=>{w.draggedSkillElem===void 0&&(w.bgSelecting||(I.timeline.onClickTimelineAction(V.elem.actionIndex,w.shiftKey),CT()))},onMouseDown:w=>{w.dragLock||w.setDraggedSkillElem(V.elem)},pointerMouse:!0,hoverImages:j}):f({x:V.x,y:V.y,w:Ma,h:Ma},{hoverTip:oe,pointerMouse:!1,hoverImages:j})});const K=t.globalAlpha;return t.fillStyle=h.timeline.invalidBg,t.globalAlpha=.2,t.beginPath(),D.forEach(V=>{t.rect(V.x,V.y,V.w,V.h)}),t.fill(),t.globalAlpha=K,new Map(d?k.map(V=>[V.elem.actionIndex,{x:V.x,y:V.y,w:Ma,h:Ma}]):[])}function DR(e){const{ctx:t,color:a,x:o,y1:s,y2:c,y3:d,tip:f,width:h,testInteraction:m}=e;t.fillStyle=a,t.beginPath(),t.moveTo(o-3,0),t.lineTo(o+3,0),t.lineTo(o,6),t.fill(),t.lineWidth=1,t.strokeStyle=a,t.setLineDash([]),t.beginPath(),t.moveTo(o,0),t.lineTo(o,s),t.stroke(),t.strokeStyle=a+"9f",t.setLineDash([2,3]),t.beginPath(),t.moveTo(o,s),t.lineTo(o,c),t.stroke();const R=t.lineWidth;h!==void 0&&(t.lineWidth=h),t.strokeStyle=a,t.setLineDash([]),t.beginPath(),t.moveTo(o,c),t.lineTo(o,d),t.stroke(),t.lineWidth=R,t.strokeStyle=a+"9f",t.setLineDash([2,3]),t.beginPath(),t.moveTo(o,d),t.lineTo(o,cf),t.stroke(),f!==void 0&&m?.({x:o-3,y:0,w:6,h:cf},{hoverTip:[f]}),t.setLineDash([])}function SD(e){const{ctx:t,viewInfo:a,originX:o,testInteraction:s}=e,c=e.ignoreVisibleX??!1,{colors:d,renderingProps:f,visibleWidth:h}=a,m=c?Xe.positionFromTimeAndScale(I.game.time+f.countdown,f.scale):h;t.fillStyle=d.timeline.ruler,t.fillRect(0,0,m,pe.rulerHeight),s({x:pe.leftBufferWidth,y:0,w:m-pe.leftBufferWidth,h:pe.rulerHeight},{hoverTip:_=>[(Xe.timeFromPositionAndScale(_.x-o,f.scale)-f.countdown).toFixed(3)],onMouseDown:_=>{const p=Xe.timeFromPositionAndScale(_.x-o,f.scale)-f.countdown;p<I.game.getDisplayTime()&&p>=-I.game.config.countdown?I.displayHistoricalState(p,void 0):I.displayCurrentState()}}),t.lineCap="butt",t.beginPath();const R=f.scale*100,T=f.countdown*R;t.lineWidth=1,t.strokeStyle=d.text,t.textBaseline="alphabetic",t.font="13px "+hi,t.textAlign="center",t.fillStyle=d.text;const S=50,g=function(_,p,O){const y=_*R,L=o+y+T;L>=-S&&L<=m+S&&(t.moveTo(L,0),t.lineTo(L,p),O&&t.fillText(Xe.displayTime(y/R,0),L,23))};if(R>=6){for(let _=0;_*R<f.timelineWidth-T;_+=1)_%5!==0&&g(_,6,!1);for(let _=-1;_*R>=-T;_-=1)_%5!==0&&g(_,6,!1)}for(let _=0;_*R<f.timelineWidth-T;_+=5)g(_,10,!0);for(let _=-5;_*R>=-T;_-=5)g(_,10,!0);return t.stroke(),pe.rulerHeight}function gD(e){const{ctx:t,viewInfo:a,originX:o,originY:s,testInteraction:c}=e,d=e.ignoreVisibleX??!1,{colors:f,renderingProps:h,visibleWidth:m}=a,R=d?Xe.positionFromTimeAndScale(I.game.time+h.countdown,h.scale):m,T=new Map;h.allMarkers.forEach(p=>{let O=T.get(p.track);O===void 0&&(O=[]),O.push(p),T.set(p.track,O)}),t.beginPath();let S=0,g=!1;for(const p of T.keys())S=Math.max(S,p+1),p===qi&&(g=!0);g&&(S+=1);const _=s+S*pe.trackHeight;t.fillStyle=f.timeline.tracks;for(let p=0;p<S;p+=2){const O=_-(p+1)*pe.trackHeight;t.rect(0,O,R,pe.trackHeight)}return t.fill(),sF({ctx:t,viewInfo:a,markerTracksTopY:s,markerTracksBottomY:_,timelineOrigin:o,trackBins:T,testInteraction:c}),S*pe.trackHeight}function ID(e,t){e.fillStyle="rgba(147, 112, 219, 0.15)",e.fillRect(t.x,t.y,t.w,t.h),e.strokeStyle="rgba(147, 112, 219, 0.5)",e.lineWidth=1,e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(t.x,t.y+t.h),e.moveTo(t.x+t.w,t.y),e.lineTo(t.x+t.w,t.y+t.h),e.stroke()}function _D(e){const{ctx:t,viewInfo:a,originX:o,originY:s,isImageExportMode:c,testInteraction:d}=e,{colors:f,renderingProps:h}=a,m=o+Xe.positionFromTimeAndScale(h.countdown,h.scale);let R=new Map;for(let g=0;g<h.slots.length;g++){const _=g===h.activeSlotIndex,p=new Map;if(c&&!_)continue;h.slots[g].elements.forEach(P=>{const D=p.get(P.type)??[];D.push(P),p.set(P.type,D)});let O=s+g*pe.renderSlotHeight();c&&(O=s);const y={ctx:t,viewInfo:a,timelineOriginX:m,timelineOriginY:O,testInteraction:d};h.drawOptions.drawMPTickMarks&&rF({...y,elems:p.get(ot.MPTickMark)??[]}),h.drawOptions.drawHealingMarks&&KA({...y,elems:p.get(ot.HealingMark)??[]}),h.drawOptions.drawDamageMarks&&(KA({...y,elems:p.get(ot.DamageMark)??[]}),KA({...y,elems:p.get(ot.AggroMark)??[]})),h.drawOptions.drawMPTickMarks&&hF({...y,elems:p.get(ot.LucidMark)??[]}),cF({...y,elems:p.get(ot.MeditateTickMark)??[]}),uF({...y,elems:p.get(ot.AutoTickMark)??[]}),dF({...y,elems:p.get(ot.WarningMark)??[]});const L=fF({...y,elems:p.get(ot.Skill)??[],interactive:_});if(_&&(R=L),h.showSelection&&_&&!c){const P=m+Xe.positionFromTimeAndScale(h.selectionStartDisplayTime,h.scale),D=Xe.positionFromTimeAndScale(h.selectionEndDisplayTime-h.selectionStartDisplayTime,h.scale);ID(t,{x:P,y:O,w:D,h:pe.renderSlotHeight()})}}const T=Xe.positionFromTimeAndScale(h.countdown,h.scale);let S=pe.renderSlotHeight()*h.slots.length;if(h.slots.length<Oi&&(S+=pe.addSlotButtonHeight),t.fillStyle=f.timeline.countdown,t.fillRect(o-pe.leftBufferWidth,s,T+pe.leftBufferWidth,S),c)return new Map;for(let g=0;g<h.slots.length;g++){const p={x:0,y:s+g*pe.renderSlotHeight()+1,w:14,h:pe.renderSlotHeight()-2};if(t.fillStyle=g===h.activeSlotIndex?f.accent:f.bgMediumContrast,t.fillRect(p.x,p.y,p.w,p.h),d(p,{hoverTip:g===h.activeSlotIndex?void 0:[N({en:"set active",zh:""})],onMouseUp:(O,y)=>{y&&I.undoStack.doThenPush(new hw(h.activeSlotIndex,g))},pointerMouse:!0}),h.slots.length>1&&g===h.activeSlotIndex){t.fillStyle=f.emphasis,t.font="bold 14px "+hi,t.textAlign="center",t.fillText("",p.x+p.w/2,p.y+p.h-4);const O={x:p.x,y:p.y+p.h-p.w,w:p.w,h:p.w};d(O,{hoverTip:[N({en:"delete",zh:""})],onMouseUp:(y,L)=>{L&&I.undoStack.doThenPush(new fw(h.activeSlotIndex,I.record.serialized()))},pointerMouse:!0})}}return R}function EF(e){const{ctx:t,viewInfo:a,originX:o,timelineStartY:s,testInteraction:c}=e,{colors:d,renderingProps:f}=a,h=o+Xe.positionFromTimeAndScale(f.countdown,f.scale),m=pe.renderSlotHeight(),R=s+f.activeSlotIndex*m,T=new Map;f.sharedElements.forEach(g=>{const _=T.get(g.type)??[];_.push(g),T.set(g.type,_)});const S={y1:s,y2:R,y3:R+m};(T.get(ot.s_HistoricalCursor)??[]).forEach(g=>{const _=g;if(_.enabled){const p=h+Xe.positionFromTimeAndScale(g.displayTime,f.scale);DR({ctx:t,color:d.historical,x:p,...S,tip:N({en:"cursor: ",zh:""})+_.displayTime.toFixed(3),testInteraction:c})}}),(T.get(ot.s_Cursor)??[]).forEach(g=>{const _=g,p=h+Xe.positionFromTimeAndScale(_.displayTime,f.scale);DR({ctx:t,color:d.emphasis,x:p,...S,tip:N({en:"cursor: ",zh:""})+_.displayTime.toFixed(3),testInteraction:c})})}function mF(e){const{ctx:t,viewInfo:a,timelineStartY:o,mouseX:s,mouseY:c,selectStartX:d,selectStartY:f,interactionInfo:h,dragTargetTime:m}=e,{bgSelecting:R,draggedSkillElem:T}=h,{colors:S,visibleLeft:g,renderingProps:_}=a;if(R){const L={x:Math.min(d,s),y:Math.min(f,c),w:Math.abs(d-s),h:Math.abs(f-c)};ID(t,L)}const O=-g+pe.leftBufferWidth+Xe.positionFromTimeAndScale(_.countdown,_.scale);if(T){const L=t.globalAlpha;t.globalAlpha=.4,t.drawImage(hR(T.skillName),s,c,Ma,Ma),t.globalAlpha=L}const y=m;if(y!==null){const L=pe.renderSlotHeight(),P=o+_.activeSlotIndex*L,D=O+Xe.positionFromTimeAndScale(y,_.scale);DR({ctx:t,color:S.dropTarget,x:D,y1:o,y2:P,y3:P+L,width:4})}}function AF(e){const{ctx:t,viewInfo:{colors:a,renderingProps:o},originY:s,testInteraction:c}=e;if(o.slots.length<Oi){const h={x:4,y:s+2,w:192,h:pe.addSlotButtonHeight-4};t.fillStyle=a.bgLowContrast,t.fillRect(h.x,h.y,h.w,h.h),t.strokeStyle=a.bgHighContrast,t.lineWidth=1,t.strokeRect(h.x,h.y,h.w,h.h),t.font="13px "+hi,t.fillStyle=a.text,t.textAlign="center",t.fillText(N({en:"Add timeline slot",zh:""}),h.x+h.w/2,h.y+h.h-4),c(h,{onMouseUp:(R,T)=>{T&&I.undoStack.doThenPush(new Ew(o.activeSlotIndex))},pointerMouse:!0});const m={x:2*4+192,y:s+2,w:192,h:pe.addSlotButtonHeight-4};return t.fillStyle=a.bgLowContrast,t.fillRect(m.x,m.y,m.w,m.h),t.strokeStyle=a.bgHighContrast,t.lineWidth=1,t.strokeRect(m.x,m.y,m.w,m.h),t.font="13px "+hi,t.fillStyle=a.text,t.textAlign="center",t.fillText(N({en:"Clone timeline slot",zh:""}),m.x+m.w/2,m.y+m.h-4),c(m,{onMouseUp:(R,T)=>{T&&I.undoStack.doThenPush(new mw(o.activeSlotIndex))},pointerMouse:!0}),pe.addSlotButtonHeight}return 0}function pD(){let e=0,t=!1;for(const a of I.timeline.getAllMarkers()){const o=a.track;e=Math.max(e,o+1),o===qi&&(t=!0)}return t&&(e+=1),e*pe.trackHeight}function ND(){return pe.rulerHeight+pD()}function RF(e){const{ctx:t,viewInfo:a,testInteraction:o}=e,{renderingProps:s,colors:c,visibleLeft:d,visibleWidth:f}=a,h=-d+pe.leftBufferWidth;let m=0;return t.fillStyle=c.background,t.fillRect(0,0,f+1,s.timelineHeight+1),o({x:0,y:0,w:f,h:cf},{onMouseDown:TD}),m+=SD({ctx:t,originX:h,viewInfo:a,testInteraction:o}),m+=pD(),_D({ctx:t,viewInfo:a,originX:h,originY:m,isImageExportMode:!1,testInteraction:o})}function TF(e){const{ctx:t,viewInfo:a,testInteraction:o}=e,s=-a.visibleLeft+pe.leftBufferWidth,c=gD({ctx:t,viewInfo:a,originX:s,originY:pe.rulerHeight,testInteraction:o});return AF({ctx:t,viewInfo:a,originY:ND()+pe.renderSlotHeight()*a.renderingProps.slots.length,testInteraction:o}),c}function ON(e){const{ctx:t,viewInfo:a,dragTargetTime:o,activeHoverTip:s,activeHoverImages:c,mouseX:d,mouseY:f,selectStartX:h,selectStartY:m,mouseInteractionInfo:R,testInteraction:T}=e,S=-a.visibleLeft+pe.leftBufferWidth,g=ND();EF({ctx:t,viewInfo:a,originX:S,timelineStartY:g,testInteraction:T}),R&&mF({ctx:t,viewInfo:a,timelineStartY:g,mouseX:d,mouseY:f,selectStartX:h,selectStartY:m,interactionInfo:R,dragTargetTime:o}),s!==void 0&&lF({ctx:t,viewInfo:a,lines:s,images:c,mouseX:d,mouseY:f})}function DN(e,t){const a=e.x+e.w<t.x,o=e.x>t.x+t.w,s=e.y+e.h<t.y,c=e.y>t.y+t.h;return!(a||o||s||c)}function CD(e,t){const[a,o]=e;return a!==void 0&&o!==void 0&&a>t.x&&a<t.x+t.w&&o>t.y&&o<t.y+t.h}function VA(e,t,a){const o=bD(e,t,a);return o!==void 0?o[0]:void 0}function bD(e,t,a){for(const[o,s]of Array.from(a.entries()).reverse())if(CD([e,t],o))return[s,o]}function WA(){return{mouseDown:new Map,mouseUp:new Map,mouseHover:new Map,pointer:new Map}}function rh(e){["mouseDown","mouseHover","mouseUp","pointer"].forEach(t=>e[t].clear())}function SF(e){const t=C.useRef(null),a=C.useRef(null),o=C.useRef(null),s=window.devicePixelRatio,c=e.visibleWidth*s,d=e.timelineHeight*s,f=C.useContext(Nn),h=C.useContext($f),m=C.useContext(Gu),R=C.useRef([null,null]),T=C.useRef(0),S=C.useRef(0),g=C.useRef(void 0),_=C.useRef(void 0),p=C.useRef(0),O=C.useRef(0),y=C.useRef({}),[L,P]=C.useState(0),D=C.useRef(new Map),k=C.useRef({live:WA(),interactive:WA(),lowUpdate:WA()});function G(M){const ee=k.current;return new Map([...ee.live[M],...ee.interactive[M],...ee.lowUpdate[M]])}const B=C.useRef(void 0),K=M=>{B.current=M},V=C.useRef(!1),ae=M=>{V.current=M},oe=M=>(ee,de)=>{const{hoverTip:W,onMouseUp:Y,onMouseDown:Q,pointerMouse:x,hoverImages:Z}=de,ne=k.current[M];(W||Z)&&ne.mouseHover.set(ee,{tip:W,images:Z}),Y&&ne.mouseUp.set(ee,Y),Q&&ne.mouseDown.set(ee,Q),x!==void 0&&ne.pointer.set(ee,x)},j=M=>{const ee=-e.visibleLeft-pe.leftBufferWidth,de=e.visibleWidth-ee;M.clearRect(ee,0,de,cf+L)},$=()=>{const M=y.current.tip,ee={x:T.current,y:S.current,shiftKey:!1,dragLock:m.value,draggedSkillElem:B.current,bgSelecting:V.current,setDraggedSkillElem:K,setBgSelecting:ae};return{viewInfo:{renderingProps:I.getTimelineRenderingProps(),colors:ha(f),visibleLeft:e.visibleLeft,visibleWidth:e.visibleWidth},dragTargetTime:h.dragTargetTime,mouseX:T.current,mouseY:S.current,selectStartX:p.current,selectStartY:O.current,activeHoverTip:M!==void 0?Array.isArray(M)?M:M(ee):void 0,activeHoverImages:y.current.images,mouseInteractionInfo:ee}},X=()=>{const M=a.current?.getContext("2d",{alpha:!0});M&&(M.scale(s,s),j(M),rh(k.current.interactive),ON({ctx:M,...$(),testInteraction:oe("interactive")}),M.scale(1/s,1/s))},ce={onMouseMove:(M,ee)=>{if(T.current=M,S.current=ee,y.current=VA(M,ee,G("mouseHover"))??{},V.current){const de={x:Math.min(p.current,M),y:Math.min(O.current,ee),w:Math.abs(p.current-M),h:Math.abs(O.current-ee)};let W=null,Y=null;for(const[Q,x]of D.current.entries())if(DN(x,de)){W=Q,Y=Q;break}if(Y!==null)for(const[Q,x]of Array.from(D.current.entries()).reverse()){if(Y>=Q)break;if(DN(x,de)){Y=Q;break}}(W!==R.current[0]||Y!==R.current[1])&&(R.current=[W,Y],W!==null&&Y!==null?(I.record.selectSingle(W),I.record.selectUntil(Y)):I.record.unselectAll(),I.displayCurrentState())}if(B.current){I.record.isInSelection(B.current.actionIndex)||I.timeline.onClickTimelineAction(B.current.actionIndex,!1);const de=-e.visibleLeft+pe.leftBufferWidth;let W=1/0,Y=-1,Q;const x=D.current,Z=Array.from(x.entries());for(let ge=0;ge<Z.length;ge++){const[_e,De]=Z[ge],Be=Math.abs(T.current-De.x);if(Q!==void 0&&Be>Q)break;Be<W&&(W=Be,Y=_e),Q=Be}let ne=1/0;const fe=I.getTimelineRenderingProps(),Re=fe.sharedElements.filter(ge=>ge.type==ot.s_Cursor);let Ne;const Me=Re[Re.length-1].displayTime+fe.countdown;Re.length>0&&(Ne=de+Xe.positionFromTimeAndScale(Me,fe.scale),ne=Math.abs(T.current-Ne));let me=null;const Ce=Array.from(x.keys());Ne!==void 0&&ne<W&&x.size>0&&Y===Ce[Ce.length-1]&&(Y=Ce[Ce.length-1]+1,me=Me-fe.countdown),Y!==-1&&h.dragTargetIndex!==Y&&(me===null&&(Y>0&&!B.current.isGCD?me=I.record.actions[Y-1].tmp_endLockTime??null:me=I.record.actions[Y].tmp_startLockTime??null,me!==null&&(me-=I.gameConfig.countdown)),h.setDragTarget(Y,me))}e.setPointerMouse(VA(M,ee,G("pointer"))??!1),X()},onMouseEnter:()=>{},onMouseLeave:()=>{g.current=void 0,_.current=void 0,V.current=!1,(y.current.tip!==void 0||y.current.images!==void 0)&&(y.current={tip:void 0,images:void 0},X())},onMouseUp:(M,ee,de)=>{if(T.current=ee,S.current=de,B.current){const W=h.dragTargetIndex;h.setDragTarget(null,null),K(void 0);let Y=!0;if(W!==null){const Q=I.record.selectionStartIndex??0;let x=W-(Q??0);if(x>0&&(x-=I.record.getSelectionLength()),x!==0){I.undoStack.push(new Ah(Q,I.record.getSelectionLength(),x)),I.record.moveSelected(x),I.autoSave();const Z=Mn();xo();const ne=I.record.selectionStartIndex;ne!==void 0?I.displayHistoricalState(Z.skillUseTimes[ne],ne):I.displayCurrentState(),Y=!1}}Y&&X()}if(!I.inputLocked){const W=bD(ee,de,G("mouseUp"));if(W!==void 0){const[Y,Q]=W;Y({x:ee,y:de,shiftKey:M.shiftKey,dragLock:m.value,bgSelecting:V.current,setDraggedSkillElem:K,setBgSelecting:ae},CD([g.current,_.current],Q))}}V.current=!1},onMouseDown:(M,ee)=>{if(g.current=M,_.current=ee,T.current=M,S.current=ee,!I.inputLocked){const de=G("mouseDown");p.current=M,O.current=ee,VA(M,ee,de)?.({x:M,y:ee,shiftKey:!1,dragLock:m.value,bgSelecting:V.current,setDraggedSkillElem:K,setBgSelecting:ae})}},onKeyDown:M=>{I.handleTimelineKeyboardEvent(M),I.inputLocked||M.key==="Escape"&&(h.setDragTarget(null,null),K(void 0))}};C.useEffect(()=>e.setCallbacks(ce),[h.dragTargetTime,m.value]);const w=()=>{const[M,ee,de]=[t,a,o].map((W,Y)=>W.current?.getContext("2d",{alpha:Y!==0}));if(M&&ee&&de){[M,ee,de].forEach(Y=>Y.scale(s,s)),rh(k.current.live),rh(k.current.interactive),rh(k.current.lowUpdate),[ee,de].forEach(Y=>j(Y));const W={renderingProps:I.getTimelineRenderingProps(),colors:ha(f),visibleLeft:e.visibleLeft,visibleWidth:e.visibleWidth};D.current=RF({ctx:M,viewInfo:W,testInteraction:oe("live")}),ON({ctx:ee,...$(),testInteraction:oe("interactive")}),P(TF({ctx:de,viewInfo:W,testInteraction:oe("lowUpdate")})),[M,ee,de].forEach(Y=>Y.scale(1/s,1/s))}};C.useEffect(X,[h.dragTargetTime]),C.useEffect(()=>{m.value||(X(),h.setDragTarget(null,null),K(void 0))},[m.value]),C.useEffect(w,[T,S,e.version,s]),C.useEffect(()=>{w(),e.setCallbacks(ce)},[e.visibleLeft,e.visibleWidth]);const z={width:e.visibleWidth,height:e.timelineHeight,position:"absolute",pointerEvents:"none",cursor:e.pointerMouse?"pointer":"default",left:0,top:0},se=Math.ceil(c),Ee=Math.ceil(d);return l.jsxs("div",{style:{position:"relative"},children:[l.jsx("canvas",{ref:t,width:se,height:Ee,tabIndex:0,style:{...z,zIndex:0}}),l.jsx("canvas",{ref:o,width:se,height:Ee,tabIndex:-1,style:{...z,zIndex:1,backgroundColor:"transparent"}}),l.jsx("canvas",{ref:a,width:se,height:Ee,tabIndex:-1,style:{...z,zIndex:2,backgroundColor:"transparent"}})]})}const aS=C.createContext(void 0),iS=C.createContext(void 0);function gF(){const e=C.useContext(iS),t=C.useContext(aS);if(!(t===void 0&&e===void 0))return{...e,...t}}function Os(){const e=C.useContext(iS),t=C.useContext(aS);if(t===void 0)throw new Error("Base UI: DialogRootContext is missing. Dialog parts must be placed within <Dialog.Root>.");return{...e,...t}}const IF={...Df,...TT},OD=C.forwardRef(function(t,a){const{render:o,className:s,forceRender:c=!1,...d}=t,{open:f,nested:h,mounted:m,transitionStatus:R,backdropRef:T}=Os(),S=C.useMemo(()=>({open:f,transitionStatus:R}),[f,R]);return to("div",t,{state:S,ref:[T,a],customStyleHookMapping:IF,props:[{role:"presentation",hidden:!m,style:{userSelect:"none",WebkitUserSelect:"none"}},d],enabled:c||!h})}),_F=C.createContext(void 0);function pF(e=!1){const t=C.useContext(_F);if(t===void 0&&!e)throw new Error("Base UI: CompositeRootContext is missing. Composite parts must be placed within <Composite.Root>.");return t}function NF(e){const{focusableWhenDisabled:t,disabled:a,composite:o=!1,tabIndex:s=0,isNativeButton:c}=e,d=o&&t!==!1,f=o&&t===!1;return{props:C.useMemo(()=>{const m={onKeyDown(R){a&&t&&R.key!=="Tab"&&R.preventDefault()}};return o||(m.tabIndex=s,!c&&a&&(m.tabIndex=t?s:-1)),(c&&(t||d)||!c&&a)&&(m["aria-disabled"]=a),c&&(!t||f)&&(m.disabled=a),m},[o,a,t,d,f,c,s])}}function DD(e={}){const{disabled:t=!1,focusableWhenDisabled:a,tabIndex:o=0,native:s=!0}=e,c=C.useRef(null),d=pF(!0)!==void 0,f=lt(()=>{const R=c.current;return!!(R?.tagName==="A"&&R?.href)}),{props:h}=NF({focusableWhenDisabled:a,disabled:t,composite:d,tabIndex:o,isNativeButton:s});return Pt(()=>{const R=c.current;R instanceof HTMLButtonElement&&d&&t&&h.disabled===void 0&&R.disabled&&(R.disabled=!1)},[t,h.disabled,d]),{getButtonProps:C.useCallback((R={})=>{const{onClick:T,onMouseDown:S,onKeyUp:g,onKeyDown:_,onPointerDown:p,...O}=R;return ST({type:s?"button":void 0,onClick(L){if(t){L.preventDefault();return}T?.(L)},onMouseDown(L){t||S?.(L)},onKeyDown(L){if(t||(dR(L),_?.(L)),L.baseUIHandlerPrevented)return;const P=L.target===L.currentTarget&&!s&&!f()&&!t,D=L.key==="Enter",k=L.key===" ";P&&((k||D)&&L.preventDefault(),D&&T?.(L))},onKeyUp(L){t||(dR(L),g?.(L)),!L.baseUIHandlerPrevented&&L.target===L.currentTarget&&!s&&!t&&L.key===" "&&T?.(L)},onPointerDown(L){if(t){L.preventDefault();return}p?.(L)}},s?void 0:{role:"button"},h,O)},[t,h,s,f]),buttonRef:c}}function CF(e){const{open:t,setOpen:a,disabled:o,nativeButton:s}=e,c=lt(m=>{t&&a(!1,m.nativeEvent,"close-press")}),{getButtonProps:d,buttonRef:f}=DD({disabled:o,native:s});return{getRootProps:m=>ST({onClick:c},m,d),ref:f}}const yD=C.forwardRef(function(t,a){const{render:o,className:s,disabled:c=!1,nativeButton:d=!0,...f}=t,{open:h,setOpen:m}=Os(),{getRootProps:R,ref:T}=CF({disabled:c,open:h,setOpen:m,nativeButton:d}),S=C.useMemo(()=>({disabled:c}),[c]);return to("button",t,{state:S,ref:[a,T],props:[f,R]})});function vD(e){return Nf(e,"base-ui")}const MD=C.forwardRef(function(t,a){const{render:o,className:s,id:c,...d}=t,{setDescriptionElementId:f}=Os(),h=vD(c);return Pt(()=>(f(h),()=>{f(void 0)}),[h,f]),to("p",t,{ref:a,props:[{id:h},d]})});function bF(e){return db(19)?e:e?"true":void 0}const LD="ArrowUp",xD="ArrowDown",HD="ArrowLeft",kD="ArrowRight",UD="Home",PD="End",OF=new Set([HD,kD]),DF=new Set([LD,xD]),yF=new Set([...OF,...DF]);[...yF];const vF=new Set([LD,xD,HD,kD,UD,PD]);function MF(e){const{descriptionElementId:t,initialFocus:a,mounted:o,openMethod:s,ref:c,setPopupElement:d,titleElementId:f}=e,h=C.useRef(null),m=Yr(c,h,d),R=C.useCallback(g=>g==="touch"?h:0,[]),T=C.useMemo(()=>a==null?R(s??""):typeof a=="function"?a(s??""):a,[R,a,s]);return{popupProps:{"aria-labelledby":f??void 0,"aria-describedby":t??void 0,role:"dialog",tabIndex:-1,ref:m,hidden:!o,onKeyDown(g){vF.has(g.key)&&g.stopPropagation()}},resolvedInitialFocus:T}}let LF=function(e){return e.nestedDialogs="--nested-dialogs",e}({}),xF=function(e){return e[e.open=es.open]="open",e[e.closed=es.closed]="closed",e[e.startingStyle=es.startingStyle]="startingStyle",e[e.endingStyle=es.endingStyle]="endingStyle",e.nested="data-nested",e.nestedDialogOpen="data-nested-dialog-open",e}({});const HF=C.forwardRef(function(t,a){const{cutout:o,...s}=t;let c;if(o){const d=o?.getBoundingClientRect();c=`polygon(
      0% 0%,
      100% 0%,
      100% 100%,
      0% 100%,
      0% 0%,
      ${d.left}px ${d.top}px,
      ${d.left}px ${d.bottom}px,
      ${d.right}px ${d.bottom}px,
      ${d.right}px ${d.top}px,
      ${d.left}px ${d.top}px
    )`}return l.jsx("div",{ref:a,role:"presentation","data-base-ui-inert":"",...s,style:{position:"fixed",inset:0,userSelect:"none",WebkitUserSelect:"none",clipPath:c}})}),wD=C.createContext(void 0);function kF(){const e=C.useContext(wD);if(e===void 0)throw new Error("Base UI: <Dialog.Portal> is missing.");return e}const UF={...Df,...TT,nestedDialogOpen(e){return e?{[xF.nestedDialogOpen]:""}:null}},GD=C.forwardRef(function(t,a){const{className:o,finalFocus:s,initialFocus:c,render:d,...f}=t,{descriptionElementId:h,dismissible:m,floatingRootContext:R,getPopupProps:T,modal:S,mounted:g,nested:_,nestedOpenDialogCount:p,open:O,openMethod:y,popupRef:L,setPopupElement:P,titleElementId:D,transitionStatus:k,onOpenChangeComplete:G,internalBackdropRef:B}=Os();kF(),Of({open:O,ref:L,onComplete(){O&&G?.(!0)}});const K=Yr(a,L),{popupProps:V,resolvedInitialFocus:ae}=MF({descriptionElementId:h,initialFocus:c,mounted:g,openMethod:y,ref:K,setPopupElement:P,titleElementId:D}),oe=p>0,j=C.useMemo(()=>({open:O,nested:_,transitionStatus:k,nestedDialogOpen:oe}),[O,_,k,oe]),$=to("div",t,{state:j,props:[T(),V,{style:{[LF.nestedDialogs]:p}},f],customStyleHookMapping:UF});return l.jsxs(C.Fragment,{children:[g&&S===!0&&l.jsx(HF,{ref:B,inert:bF(!O)}),l.jsx(Pk,{context:R,disabled:!g,closeOnFocusOut:m,initialFocus:ae,returnFocus:s,modal:S!==!1,children:$})]})});function BD(e){const{children:t,keepMounted:a=!1,container:o}=e,{mounted:s}=Os();return s||a?l.jsx(wD.Provider,{value:a,children:l.jsx(Lk,{root:o,children:t})}):null}const PF=()=>{};let yN={},vN={},MN="";function wF(e){if(typeof document>"u")return!1;const t=$r(e);return Fn(t).innerWidth-t.documentElement.clientWidth>0}function GF(e){const a=$r(e).documentElement,o=a.style.overflow;return a.style.overflow="hidden",()=>{a.style.overflow=o}}function BF(e){const t=$r(e),a=t.documentElement,o=t.body,s=Fn(a);let c=0,d=0;const f=Ki.create();if(bC&&(s.visualViewport?.scale??1)!==1)return()=>{};function h(){const T=s.getComputedStyle(a),S=s.getComputedStyle(o);c=a.scrollTop,d=a.scrollLeft,yN={scrollbarGutter:a.style.scrollbarGutter,overflowY:a.style.overflowY,overflowX:a.style.overflowX},MN=a.style.scrollBehavior,vN={position:o.style.position,height:o.style.height,width:o.style.width,boxSizing:o.style.boxSizing,overflowY:o.style.overflowY,overflowX:o.style.overflowX,scrollBehavior:o.style.scrollBehavior};const g=typeof CSS<"u"&&CSS.supports?.("scrollbar-gutter","stable"),_=a.scrollHeight>a.clientHeight,p=a.scrollWidth>a.clientWidth,O=T.overflowY==="scroll"||S.overflowY==="scroll",y=T.overflowX==="scroll"||S.overflowX==="scroll",L=Math.max(0,s.innerWidth-a.clientWidth),P=Math.max(0,s.innerHeight-a.clientHeight),D=parseFloat(S.marginTop)+parseFloat(S.marginBottom),k=parseFloat(S.marginLeft)+parseFloat(S.marginRight);Object.assign(a.style,{scrollbarGutter:"stable",overflowY:!g&&(_||O)?"scroll":"hidden",overflowX:!g&&(p||y)?"scroll":"hidden"}),Object.assign(o.style,{position:"relative",height:D||P?`calc(100dvh - ${D+P}px)`:"100dvh",width:k||L?`calc(100vw - ${k+L}px)`:"100vw",boxSizing:"border-box",overflow:"hidden",scrollBehavior:"unset"}),o.scrollTop=c,o.scrollLeft=d,a.setAttribute("data-base-ui-scroll-locked",""),a.style.scrollBehavior="unset"}function m(){Object.assign(a.style,yN),Object.assign(o.style,vN),a.scrollTop=c,a.scrollLeft=d,a.removeAttribute("data-base-ui-scroll-locked"),a.style.scrollBehavior=MN}function R(){m(),f.request(h)}return h(),s.addEventListener("resize",R),()=>{f.cancel(),m(),s.removeEventListener("resize",R)}}class FF{lockCount=0;restore=null;timeoutLock=gl.create();timeoutUnlock=gl.create();acquire(t){return this.lockCount+=1,this.lockCount===1&&this.restore===null&&this.timeoutLock.start(0,()=>this.lock(t)),this.release}release=()=>{this.lockCount-=1,this.lockCount===0&&this.restore&&this.timeoutUnlock.start(0,this.unlock)};unlock=()=>{this.lockCount===0&&this.restore&&(this.restore?.(),this.restore=null)};lock(t){if(this.lockCount===0||this.restore!==null)return;const o=$r(t).documentElement,s=Fn(o).getComputedStyle(o).overflowY;if(s==="hidden"||s==="clip"){this.restore=PF;return}const c=LH||!wF(t);this.restore=c?GF(t):BF(t)}}const jF=new FF;function zF(e){const{enabled:t=!0,mounted:a,open:o,referenceElement:s=null}=e;Pt(()=>{if(t&&bC&&a&&!o){const c=$r(s),d=c.body.style.userSelect,f=c.body.style.webkitUserSelect;return c.body.style.userSelect="none",c.body.style.webkitUserSelect="none",()=>{c.body.style.userSelect=d,c.body.style.webkitUserSelect=f}}},[t,a,o,s]),Pt(()=>{if(t)return jF.acquire(s)},[t,s])}function YF(e){const t=C.useRef(""),a=C.useCallback(s=>{s.defaultPrevented||(t.current=s.pointerType,e(s,s.pointerType))},[e]);return{onClick:C.useCallback(s=>{if(s.detail===0){e(s,"keyboard");return}"pointerType"in s&&e(s,s.pointerType),e(s,t.current),t.current=""},[e]),onPointerDown:a}}function KF(e){const[t,a]=C.useState(null),o=lt((f,h)=>{e||a(h)}),s=lt(()=>{a(null)}),{onClick:c,onPointerDown:d}=YF(o);return C.useMemo(()=>({openMethod:t,reset:s,triggerProps:{onClick:c,onPointerDown:d}}),[t,s,c,d])}function VF(e){const{defaultOpen:t,dismissible:a,modal:o,onNestedDialogClose:s,onNestedDialogOpen:c,onOpenChange:d,open:f,onOpenChangeComplete:h}=e,[m,R]=gC({controlled:f,default:t,name:"DialogRoot",state:"open"}),T=C.useRef(null),S=C.useRef(null),g=C.useRef(null),[_,p]=C.useState(void 0),[O,y]=C.useState(void 0),[L,P]=C.useState(null),[D,k]=C.useState(null),{mounted:G,setMounted:B,transitionStatus:K}=sb(m),{openMethod:V,triggerProps:ae,reset:oe}=KF(m),j=lt((Z,ne,fe)=>{d?.(Z,ne,fe),R(Z)}),$=lt(()=>{B(!1),h?.(!1),oe()});Of({enabled:!e.actionsRef,open:m,ref:T,onComplete(){m||$()}}),C.useImperativeHandle(e.actionsRef,()=>({unmount:$}),[$]);const ce=RT({elements:{reference:L,floating:D},open:m,onOpenChange:(Z,ne,fe)=>{j(Z,ne,rb(fe))}}),[w,z]=C.useState(0),se=w===0,Ee=LU(ce),M=Gk(ce),ee=ob(ce,{outsidePressEvent:"intentional",outsidePress(Z){if(Z.button!==0)return!1;const ne=Ya(Z);if(se&&a){const fe=ne;return o?fe?g.current===fe||S.current===fe:!1:!0}return!1},escapeKey:se});zF({enabled:m&&o===!0,mounted:G,open:m,referenceElement:D});const{getReferenceProps:de,getFloatingProps:W}=lb([Ee,M,ee]);C.useEffect(()=>(c&&m&&c(w),s&&!m&&s(),()=>{s&&m&&s()}),[m,s,c,w]);const Y=C.useCallback(Z=>{z(Z+1)},[]),Q=C.useCallback(()=>{z(0)},[]),x=C.useMemo(()=>de(ae),[de,ae]);return C.useMemo(()=>({modal:o,setOpen:j,open:m,titleElementId:_,setTitleElementId:p,descriptionElementId:O,setDescriptionElementId:y,onNestedDialogOpen:Y,onNestedDialogClose:Q,nestedOpenDialogCount:w,openMethod:V,mounted:G,transitionStatus:K,triggerProps:x,getPopupProps:W,setTriggerElement:P,setPopupElement:k,popupRef:T,backdropRef:S,internalBackdropRef:g,floatingRootContext:ce}),[o,j,m,_,O,Y,Q,w,V,G,K,x,W,ce])}const FD=function(t){const{children:a,defaultOpen:o=!1,dismissible:s=!0,modal:c=!0,onOpenChange:d,open:f,actionsRef:h,onOpenChangeComplete:m}=t,R=gF(),T=VF({open:f,defaultOpen:o,onOpenChange:d,modal:c,dismissible:s,actionsRef:h,onOpenChangeComplete:m,onNestedDialogClose:R?.onNestedDialogClose,onNestedDialogOpen:R?.onNestedDialogOpen}),S=!!R,g=C.useMemo(()=>({...T,nested:S,onOpenChangeComplete:m}),[T,S,m]),_=C.useMemo(()=>({dismissible:s}),[s]);return l.jsx(aS.Provider,{value:g,children:l.jsx(iS.Provider,{value:_,children:a})})},jD=C.forwardRef(function(t,a){const{render:o,className:s,id:c,...d}=t,{setTitleElementId:f}=Os(),h=vD(c);return Pt(()=>(f(h),()=>{f(void 0)}),[h,f]),to("h2",t,{ref:a,props:[{id:h},d]})}),zD=C.forwardRef(function(t,a){const{render:o,className:s,disabled:c=!1,nativeButton:d=!0,...f}=t,{open:h,setTriggerElement:m,triggerProps:R}=Os(),T=C.useMemo(()=>({disabled:c,open:h}),[c,h]),{getButtonProps:S,buttonRef:g}=DD({disabled:c,native:d});return to("button",t,{state:T,ref:[g,a,m],props:[R,{[qC]:""},f,S],customStyleHookMapping:ub})}),YD=window.location.hostname==="xivintheshell.com"?"a023d800-1740-426a-8134-915efc395aa3":window.location.hostname==="beta.xivintheshell.com"?"a0281008-3d39-4afc-81b4-a8ddbf7cbd44":window.location.host==="localhost:3000"?"a028101a-803b-4ad4-99b6-bacb8484e214":window.location.host==="localhost:4173"?"a0281237-7471-47d4-b33c-52a6cbaed4c1":"",WF="https://www.fflogs.com/oauth/authorize",XF="https://www.fflogs.com/oauth/token";function qF(){const e=new Uint8Array(64);return window.crypto.getRandomValues(e),Array.from(e,t=>t.toString(16).padStart(2,"0")).join("")}async function ZF(e){const a=new TextEncoder().encode(e),o=await window.crypto.subtle.digest("SHA-256",a);return btoa(String.fromCharCode(...new Uint8Array(o))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}const uf="pkceCodeVerifier",Nu="pkceStateBlob";async function LN(){const e=qF(),t=await ZF(e),a=window.crypto.randomUUID();localStorage.getItem(uf)===null&&window.localStorage.setItem(uf,e),window.localStorage.getItem(Nu)===null&&window.localStorage.setItem(Nu,a);const o=new URLSearchParams({client_id:YD,code_challenge:t,code_challenge_method:"S256",state:a,redirect_uri:window.location.origin,response_type:"code"});window.location.href=`${WF}?${o.toString()}`}function vh(){window.localStorage.removeItem(uf),window.localStorage.removeItem(Nu)}var Mh=(e=>(e[e.UNAUTHORIZED=0]="UNAUTHORIZED",e[e.NO_PKCE_VERIFIER=1]="NO_PKCE_VERIFIER",e[e.BAD_PKCE_STATE=2]="BAD_PKCE_STATE",e[e.SUCCESS=3]="SUCCESS",e[e.FAILURE=4]="FAILURE",e))(Mh||{});async function xN(){const e=new URLSearchParams(window.location.search);window.history.replaceState({},"",window.location.pathname);const t=e.get("code"),a=window.localStorage.getItem(uf),o=window.localStorage.getItem(Nu);if(!t)return 0;if(!a)return console.error("PKCE verifier could not be retrieved"),vh(),1;e.get("state")!==o&&(console.error("PKCE response did not have expected state; force setting new value"),console.log("expected:",o),console.log("actual:",e.get("state")),window.localStorage.setItem(Nu,e.get("state")));const s=new URLSearchParams({client_id:YD,code_verifier:a,redirect_uri:window.location.origin,grant_type:"authorization_code",code:t});try{const c=await fetch(XF,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:s.toString()});if(c.ok){const d=await c.json();return window.sessionStorage.setItem("fflogsAuthToken",d.access_token),console.log("saved auth tokens to sessionStorage"),3}else return console.log("PKCE response was not ok; clearing intermediate state"),console.error(c),vh(),4}catch(c){return console.log("PKCE exchange failed; clearing intermediate state"),console.error(c),vh(),4}}function QF(e){const t=URL.parse(e.replace("#","?"));if(t===null)return{apiBaseUrl:"",reportCode:"",error:{en:"invalid URL",zh:""}};if(t.hostname!=="www.fflogs.com"&&t.hostname!=="cn.fflogs.com")return{apiBaseUrl:"",reportCode:"",error:{en:"must be a link to www.fflogs.com or cn.fflogs.com",zh:"www.fflogs.comcn.fflogs.com"}};const a=t.pathname.split("/").filter(m=>m.length>0);if(a.length!==2)return console.error("parsed link parts:",a),{apiBaseUrl:"",reportCode:"",error:{en:"link must contain a single report",zh:""}};console.assert(a.length>0);const o=a[a.length-1],s=t.searchParams,c=parseInt(s.get("fight")??"NaN"),d=isNaN(c)?void 0:c,f=parseInt(s.get("source")??"NaN"),h=isNaN(f)?void 0:f;return{apiBaseUrl:`https://${t.hostname}/api/v2/user/`,reportCode:o,fightID:d,playerID:h}}const KD=new Map([["Paladin","PLD"],["Warrior","WAR"],["DarkKnight","DRK"],["Gunbreaker","GNB"],["WhiteMage","WHM"],["Scholar","SCH"],["Astrologian","AST"],["Sage","SGE"],["Monk","MNK"],["Dragoon","DRG"],["Ninja","NIN"],["Viper","VPR"],["Samurai","SAM"],["Reaper","RPR"],["Bard","BRD"],["Machinist","MCH"],["Dancer","DNC"],["BlackMage","BLM"],["Summoner","SMN"],["RedMage","RDM"],["Pictomancer","PCT"],["BlueMage","BLU"]]),HN=new Set([7,8,33218,34682]),ol={TEMPERA_COAT:1003686,TEMPERA_GRASSA:1003687,BLACKEST_NIGHT:1001178,TENGENTSU:1003853,THIRD_EYE:1001232,CREST_OF_TIME_BORROWED:1002596,COLD_FOG:1002493},$F=new Map([["TEMPERA_COAT_POP","TEMPERA_COAT"],["TEMPERA_GRASSA_POP","TEMPERA_GRASSA"],["THE_BLACKEST_NIGHT_POP","THE_BLACKEST_NIGHT"],["TENGENTSU_POP","TENGENTSU"],["THIRD_EYE_POP","THIRD_EYE"],["ARCANE_CREST_POP","ARCANE_CREST"],["POP_COLD_FOG","COLD_FOG"]]),JF=`
query ListReportFights($reportCode: String) {
	reportData {
		report(code: $reportCode) {
			fights {
				bossPercentage
				encounterID
				id
				name
				kill
				startTime
			}
			startTime
		}
	}
}`,ej=`
query ListReportFightIDs($reportCode: String) {
	reportData {
		report(code: $reportCode) {
			fights {
				id
			}
		}
	}
}`,tj=`
query ListFightPlayers($reportCode: String, $fightID: Int) {
	reportData {
		report(code: $reportCode) {
			fights(fightIDs: [$fightID]) {
				bossPercentage
				encounterID
				id
				name
				kill
				startTime
			}
			startTime
			playerDetails(fightIDs: [$fightID])
		}
	}
}`,nj=`
query GetPlayerEvents($reportCode: String, $fightID: Int, $playerID: Int) {
	reportData {
		report(code: $reportCode) {
			events(sourceID: $playerID, fightIDs: [$fightID]) {
				data
				nextPageTimestamp
			}
			fights(fightIDs: [$fightID]) {
				name
				combatTime
				startTime
				endTime
			}
			playerDetails(fightIDs: [$fightID])
		}
	}
}`;async function Qf(e,t,a){const o={method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${window.sessionStorage.getItem("fflogsAuthToken")}`},body:JSON.stringify({query:t,variables:a})};return fetch(e,o).then(s=>s.json()).then(s=>{if(s.error!==void 0)throw new Error(s.error);if(s.errors!==void 0)throw new Error(s.errors);return s.data})}const kN=new Map;function VD(e,t){const a=t.bossPercentage===null?N({en:"(trash)",zh:""}).toString():t.bossPercentage.toFixed(1)+"%";return{label:{en:`${t.name} - ${t.kill?"kill":a}`,zh:`${t.name} - ${t.kill?"":a}`},id:t.id,unixStartTime:e+t.startTime}}async function aj(e,t){const a=kN.get(t);if(a!==void 0)return a;const o=await Qf(e,JF,{reportCode:t}),s=o.reportData.report.startTime,c=o.reportData.report.fights.map(d=>VD(s,d));return kN.set(t,c),c}async function ij(e,t){const o=(await Qf(e,ej,{reportCode:t})).reportData.report.fights.map(s=>s.id);return Math.max(...o)}function WD(e){return`${e.name??N({en:"(name unknown)",zh:""})} @ ${e.server??N({en:"(world unknown)",zh:""})}`}const ch=new Map;async function UN(e,t,a){const o=ch.get(t)?.get(a);if(o!==void 0)return o;const s=await Qf(e,tj,{reportCode:t,fightID:a}),c=Object.values(s.reportData.report.playerDetails.data.playerDetails).flat().map(h=>({id:h.id,name:WD(h),job:KD.get(h.type)??"???"})),d=s.reportData.report.startTime,f=VD(d,s.reportData.report.fights[0]);return ch.has(t)?ch.get(t).set(a,[f,c]):ch.set(t,new Map([[a,[f,c]]])),[f,c]}const Ir=new Map;async function PN(e){const t=Ir.get(e.reportCode)?.get(e.fightID)?.get(e.playerID);if(t!==void 0)return console.log("query cache hit for",e),t;const a=await Qf(e.apiBaseUrl,nj,e),o=Object.values(a.reportData.report.playerDetails.data.playerDetails).flat().filter(D=>D.id===e.playerID)[0],s=KD.get(o.type),c=WD(o);let d,f;const h=a.reportData.report.fights[0],m=[],R=[],T=[],S=new Set,g=new Map;let _;const p=new Map,O=new Map,y=new Map;for(let D of a.reportData.report.events.data)if(D.sourceID===e.playerID)if(D.type==="cast"&&!HN.has(D.abilityGameID))_!==void 0&&(_.abilityGameID===D.abilityGameID&&(p.set(_.timestamp,D.timestamp),D=_),_=void 0),m.push(D),R.push(D.timestamp);else if(D.type==="begincast"&&!HN.has(D.abilityGameID))_=D;else if(D.type==="calculateddamage"){let k=g.get(D.timestamp);k===void 0&&(k=[],g.set(D.timestamp,k)),k.push(D),S.has(D.targetID)||(T.push(D.targetID),S.add(D.targetID))}else if(D.type==="combatantinfo")d=D.level,f={main:D[dt[s].mainStat],spellSpeed:D.spellSpeed,skillSpeed:D.skillSpeed,criticalHit:D.criticalHit,directHit:D.directHit,determination:D.determination,piety:D.piety,tenacity:D.tenacity};else if(D.type==="removebuff"){let k;const G=D.timestamp,B=D.abilityGameID;s==="PCT"&&D.targetID===e.playerID?B===ol.TEMPERA_COAT?k="TEMPERA_COAT_POP":B===ol.TEMPERA_GRASSA&&(k="TEMPERA_GRASSA_POP"):s==="DRK"?B===ol.BLACKEST_NIGHT&&(k="THE_BLACKEST_NIGHT_POP"):s==="SAM"&&D.targetID===e.playerID?B===ol.TENGENTSU?k="TENGENTSU_POP":B===ol.THIRD_EYE&&(k="THIRD_EYE_POP"):s==="RPR"&&D.targetID===e.playerID?B===ol.CREST_OF_TIME_BORROWED&&(k="ARCANE_CREST_POP"):s==="BLU"&&D.targetID===e.playerID&&B===ol.COLD_FOG&&(k="POP_COLD_FOG"),k!==void 0&&(O.has(k)?O.get(k).add(G):O.set(k,new Set([G])))}else D.type==="applybuff"&&D.targetID===e.playerID&&s==="PCT"&&D.abilityGameID===ol.TEMPERA_GRASSA&&(y.has("TEMPERA_GRASSA")||y.set("TEMPERA_GRASSA",new Set),y.get("TEMPERA_GRASSA").add(D.timestamp));y.get("TEMPERA_GRASSA")?.forEach(D=>O.get("TEMPERA_COAT_POP")?.delete(D));const L=m.map(D=>{const k=D.abilityGameID,G=Li.get(k)??(k>34e6?"TINCTURE":"NEVER");G==="NEVER"&&console.error("unknown action id",k);let B=g.get(D.timestamp)?.filter(V=>V.abilityGameID===k)??[];if(B.length===0){const V=p.get(D.timestamp);V!==void 0&&(B=g.get(V)?.filter(ae=>ae.abilityGameID===k)??[])}let K=[1];if(B.length>0){let V=B[0].targetID,ae=B[0].unmitigatedAmount;const oe=new Set([V]);for(let j=1;j<B.length;j++){const $=B[j];$.unmitigatedAmount>ae&&(V=$.targetID,ae=$.unmitigatedAmount),oe.add($.targetID)}oe.delete(V),K=Array.from(oe),K.splice(0,0,V),K=K.map(j=>T.indexOf(j)+1)}return{type:ke.Skill,skillName:G,targetList:K,healTargetCount:void 0}}),P={playerName:c,job:s,level:d,statsInLog:f!==void 0&&Object.values(f).every(D=>D!==void 0),inferredConfig:f,buffRemovalActions:Array.from(O.entries().flatMap(([D,k])=>k.entries().map(([G])=>({popKey:D,applyKey:$F.get(D),timestamp:G})))).sort((D,k)=>D.timestamp-k.timestamp),actions:L,timestamps:R,combatStartTime:h.endTime-h.combatTime};return Ir.has(e.reportCode)?Ir.get(e.reportCode).has(e.fightID)?Ir.get(e.reportCode).get(e.fightID).set(e.playerID,P):Ir.get(e.reportCode).set(e.fightID,new Map([[e.playerID,P]])):Ir.set(e.reportCode,new Map([[e.fightID,new Map([[e.playerID,P]])]])),P}const uh={width:"100%",height:"1.6em",outline:"none"};function*oj(e,t){const a=I.gameConfig.serialized(),o={...a,procMode:ua.Always,job:e.job,initialResourceOverrides:e.job===a.job?a.initialResourceOverrides:[]};for(const[y,L]of Object.entries(e.inferredConfig??{}))typeof L=="number"&&(o[y]=L);e.level!==void 0&&(o.level=e.level),I.setConfigAndRestart(o,t||o.job!==a.job||a.procMode!==o.procMode);const s=I.record.length,c=e.actions;if(console.assert(c.length===e.timestamps.length),c.length===0)return yield{processed:0,total:0,deltas:[],spilledDeltas:0},[];const d=c.map(y=>new Va(y)),h=(e.timestamps[0]-e.combatStartTime)/1e3,m=I.game.getSkillAvailabilityStatus(c[0].skillName).castTime,R=m>0?h-m+ci.getSlidecastWindow(m):h;d.unshift(dl(R)),console.log("initial jump time:",h),-R>I.gameConfig.countdown&&I.setConfigAndRestart({...o,countdown:-Math.floor(R)}),I.insertRecordNodes(d,s);const T={processed:1,total:c.length,deltas:[],spilledDeltas:0};let S=1;const g=I.gameConfig.countdown,_=e.buffRemovalActions[Symbol.iterator]();let p=_.next();for(let y=1;y<c.length;y++){const L=c[y],P=s+y+S,D=I.record.actions[P],k=(e.timestamps[y]-e.combatStartTime)/1e3,G=L.skillName;console.assert(D.info.type===ke.Skill&&D.tmp_startLockTime);const B=D.tmp_startLockTime-g,K=I.record.actions[P-1],V=K.tmp_endLockTime-g;if(!p.done){const{popKey:j,applyKey:$,timestamp:X}=p.value,ce=(X-e.combatStartTime)/1e3;let w;if(V>ce?K.info.type===ke.Skill&&K.info.skillName===$?w=P:w=P-1:k>ce&&(w=P),w!==void 0){I.insertRecordNode(El(j),w),p=_.next(),y--,S++;continue}}const ae=k-B,oe=.05;if(ae>3.5)I.insertRecordNode(dl(k),P),S++;else if(ae>oe){const j=k-V;console.assert(j>0),I.insertRecordNode(yr(j),P),S++}else ae<-oe&&(T.deltas.length>=10?T.spilledDeltas++:T.deltas.push({skill:G,logTime:k,simTime:B}));T.processed++,yield T}const O=I.record.actions.slice(s);return console.log(`inserted ${S} non-skill nodes`),I.undoStack.push(new dw(O,s,a,o)),I.autoSave(),Mn().invalidActions}const _r={textAlign:"left",paddingLeft:"0.3em"},lj=["spellSpeed","skillSpeed","criticalHit","directHit","determination","piety","fps"];function sj(e){const t=Tt(),a=I.gameConfig[e.field];return l.jsx(jt,{style:{display:"inline-block",color:t.text},defaultValue:e.inferredStateValue?.toString()??"",description:iu(e.field),onChange:o=>{o.length===0&&e.setValue(void 0);const s=parseInt(o);isNaN(s)||e.setValue(s)},placeholder:a.toString()})}function rj(){const[e,t]=C.useState(new URLSearchParams(window.location.search).has("code")),a={},o=C.useContext(Nn)==="Light",s=Tt(),[c,d]=C.useState(!0),f=C.useRef(null),[h,m]=C.useState(""),[R,T]=C.useState(0),S=ge=>{R===8&&(_(null),d(!0),O([])),ge!==6&&ge!==7&&B(void 0),ge!==4&&ge!==5&&(P.current=[],k.current=[],D.current=void 0),[2,4,5].includes(ge)||(L.current=void 0),T(ge)},[g,_]=C.useState(null),[p,O]=C.useState([]),y=ge=>{(ge||R!==7)&&(!ge&&R===8&&S(2),t(ge))};C.useEffect(()=>{if(!new URLSearchParams(window.location.search).has("code")&&window.sessionStorage.getItem("fflogsAuthToken")!==null){S(2),console.log("already authorized to fflogs");return}S(1);async function ge(){let _e=0;try{const De=await xN();if(De===Mh.SUCCESS)_e=2;else if(e&&De===Mh.UNAUTHORIZED){await LN();const Be=await xN();console.log(Be),Be===Mh.SUCCESS&&(_e=2)}}catch(De){console.log("Error during automatic FFLogs authentication"),console.error(De)}S(_e)}ge()},[]);const L=C.useRef(void 0),P=C.useRef([]),D=C.useRef(void 0),k=C.useRef([]),[G,B]=C.useState(void 0),K={color:s.emphasis,backgroundColor:s.accent},V=l.jsx("button",{onClick:()=>S(2),children:N({en:"cancel",zh:""})}),ae=l.jsxs("div",{className:"importPage",children:[l.jsx("div",{children:l.jsx("button",{onClick:()=>{LN(),S(1)},children:N({en:"click here to authorize your fflogs account",zh:"fflogs"})})}),l.jsx("span",{children:N({en:"(will redirect to www.fflogs.com)",zh:"www.fflogs.com"})})]}),oe=l.jsx("div",{className:"importPage",children:l.jsx("p",{children:N({en:"verifying authorization...",zh:"..."})})}),j=l.jsxs(l.Fragment,{children:[l.jsx("div",{children:l.jsx("b",{children:N({en:"Limitations",zh:""})})}),l.jsxs("div",{children:[N({en:"Log import is currently subject to the following limitations:",zh:"logs"}),l.jsxs("ul",{children:[l.jsx("li",{children:N({en:"FFLogs only records combat stats for the creator of the log, so stats must be manually entered for other players.",zh:"FFLogs"})}),l.jsx("li",{children:N({en:"FFLogs cannot record actions that were performed before combat began. Pre-pull actions must be entered manually before import.",zh:"FFLogslogs"})}),l.jsx("li",{children:N({en:"Manual buff click-offs, and buff toggles from entering/leaving a zone (for example: leaving Ley Lines or Sacred Soil) are not currently processed by XIV in the Shell.",zh:"XIV in the Shellbuff/buff"})}),l.jsx("li",{children:N({en:"The offset of MP and Lucid Dreaming ticks are not currently synchronized in XIV in the Shell.",zh:"XIV in the Shelllogs"})}),l.jsx("li",{children:N({en:"XIV in the Shell currently does not track when multiple enemies are hit by an ability.",zh:"XIV in the Shell"})}),l.jsx("li",{children:N({en:"XIV in the Shell does not reflect job gauge updates that are affected by random factors, or by whether an enemy is hit or killed.",zh:"XIV in the Shell//"})})]}),N({en:"These may change in future updates.",zh:""})]})]}),$=R!==2||!h,X=l.jsxs("div",{className:"importPage",children:[l.jsxs("form",{onSubmit:async ge=>{if(ge.preventDefault(),R===2)try{const _e=QF(h);if(_e.error)throw new Error(N(_e.error).toString());if(S(3),new URL(h).searchParams.get("fight")==="last"){console.log("querying last fight ID");const De=await ij(_e.apiBaseUrl,_e.reportCode);_e.fightID=De}if(L.current=_e,_e.fightID===void 0){const De=await aj(_e.apiBaseUrl,_e.reportCode);P.current=De,console.log("choosing from",De.length,"fights"),S(4)}else if(_e.playerID===void 0){const De=await UN(_e.apiBaseUrl,_e.reportCode,_e.fightID);P.current=[],[D.current,k.current]=De,console.log("choosing from",k.current.length,"players"),S(5)}else{const De=await PN({apiBaseUrl:_e.apiBaseUrl,reportCode:_e.reportCode,fightID:_e.fightID,playerID:_e.playerID});B(De),console.log(`preparing to import ${De.actions.length} skills`),S(6)}}catch(_e){console.error(_e),window.alert(_e),S(2)}},children:[l.jsx(jt,{description:l.jsx("div",{children:N({en:"enter an FFLogs report link",zh:"FFLogs"})}),style:{width:"100%"},onChange:m,defaultValue:h,fullWidthInput:!0,autoFocus:!0}),l.jsxs("div",{className:"buttonHolder",style:{marginTop:10},children:[l.jsx("button",{style:$?{}:K,type:"submit",disabled:$,children:N({en:"import",zh:""})}),l.jsx("button",{type:"button",onClick:()=>S(0),children:N({en:"back to authorization",zh:""})})]})]}),l.jsx("hr",{}),j]}),ce=l.jsx("div",{className:"importPage",children:l.jsx("p",{children:N({en:"retrieving log...",zh:"logs"})})}),w=C.useRef(!1),z=l.jsxs("div",{className:"importPage",children:[l.jsx("b",{children:N({en:"Choose a fight",zh:""})}),l.jsx("ul",{children:P.current.map((ge,_e)=>l.jsx("li",{onClick:()=>{if(w.current)return;const De=L.current;if(De===void 0){console.error("log info was undefined in fight choice state"),S(2);return}w.current=!0,UN(De.apiBaseUrl,De.reportCode,ge.id).then(Be=>{[D.current,k.current]=Be,De.fightID=ge.id,console.log("choosing from",k.current.length,"players"),S(5)}).catch(Be=>{console.error(Be),window.alert(Be),S(2)}).finally(()=>{w.current=!1})},children:l.jsxs("span",{className:"clickableLinkLike",children:[new Date(ge.unixStartTime).toLocaleString()," - ",N(ge.label)]})},_e))}),l.jsx("div",{children:V})]}),se=l.jsxs("div",{className:"importPage",children:[D.current&&l.jsxs("span",{children:[new Date(D.current.unixStartTime).toLocaleString()," - ",N(D.current.label)]}),l.jsx("b",{children:N({en:"Choose a player",zh:""})}),l.jsx("ul",{children:k.current.map((ge,_e)=>l.jsx("li",{onClick:()=>{if(w.current)return;const De=L.current;if(De===void 0){console.error("log info was undefined in player choice state"),S(2);return}if(De.fightID===void 0){console.error("fight ID was undefined in player choice state"),S(2);return}w.current=!0,PN({apiBaseUrl:De.apiBaseUrl,reportCode:De.reportCode,fightID:De.fightID,playerID:ge.id}).then(Be=>{B(Be),console.log(`preparing to import ${Be.actions.length} skills`),S(6)}).catch(Be=>{console.error(Be),window.alert(Be),S(2)}).finally(()=>{w.current=!1})},children:l.jsxs("span",{className:"clickableLinkLike",children:[ge.job," - ",ge.name]})},_e))}),P.current.length===0?l.jsx("div",{children:V}):l.jsx("div",{children:l.jsx("button",{onClick:()=>{S(4),k.current=[]},children:N({en:"back to fight selection",zh:""})})})]}),Ee=()=>I.gameConfig.job!==G?.job,M=l.jsx(ze,{container:f,topic:"fflogsConfigReset",content:N({en:l.jsxs("div",{children:['FFLogs only records exact combat stats for the player that created the log. All other stats must be entered manually. Any configuration not specified in this dialog, including initial resource overrides, will use the values set in the main "Config" panel.',l.jsx("br",{}),'After a log import, the "proc mode" field is set to "Always". You can manually adjust this later.']})})}),ee=l.jsx(ze,{container:f,topic:"fflogsConfigResetActive",content:N({en:l.jsxs("div",{children:[l.jsx("i",{children:"Actions in the current timeline will be cleared and replaced with those imported from the log."}),l.jsx("br",{}),"FFLogs does not record actions performed before combat begins. To add pre-pull actions, manually insert them after importing, or add them beforehand and uncheck this option."]}),zh:l.jsxs("div",{children:[l.jsx("i",{children:"logs"}),l.jsx("br",{}),"FFLogslogs"]})})}),de=l.jsx(ze,{container:f,topic:"fflogsConfigResetActive",content:N({en:l.jsx("span",{children:l.jsx("i",{children:"Actions imported from the log will be added to the end of the existing timeline."})}),zh:l.jsx("span",{children:l.jsx("i",{children:"logs"})})})}),W=l.jsxs("div",{className:"importPage",children:[N({en:l.jsxs("p",{children:["Reading ",G?.actions.length??0," skills for"," ",l.jsx("b",{children:G?.playerName})]}),zh:l.jsxs("p",{children:["",l.jsx("b",{children:G?.playerName}),"",G?.actions.length??0,""]})}),l.jsxs("div",{children:[G?.statsInLog?N({en:"Using stats found in log. Please adjust as needed.",zh:"logs"}):N({en:"Exact stats not found in log; using values in current game config. Please enter manually or adjust with the Config pane after import. ",zh:"Logs"}),M]}),l.jsx("hr",{}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:5},children:[l.jsxs("div",{children:[l.jsx("span",{children:N({en:"job: ",zh:""})}),G?.job??I.game.job]}),G&&l.jsxs("div",{children:[l.jsx("span",{children:N({en:"level: ",zh:""})}),l.jsxs("select",{style:{outline:"none",color:s.text},value:G.level,onChange:ge=>B({...G,level:parseInt(ge.target.value)}),children:[l.jsx("option",{value:$e.lvl100,children:"100"},$e.lvl100),l.jsx("option",{value:$e.lvl90,children:"90"},$e.lvl90),l.jsx("option",{value:$e.lvl80,children:"80"},$e.lvl80),l.jsx("option",{value:$e.lvl70,children:"70"},$e.lvl70)]})]})]}),l.jsx("div",{style:{display:"flex",gap:5,flexDirection:"column"},children:lj.map(ge=>l.jsx("div",{children:l.jsx(sj,{field:ge,inferredStateValue:G?.inferredConfig?.[ge],setValue:_e=>{G?.inferredConfig!==void 0&&B({...G,inferredConfig:{...G.inferredConfig,[ge]:_e}})}})},ge))}),l.jsx("hr",{}),Ee()?l.jsx("div",{children:l.jsx("span",{children:N({en:"Imported actions will replace the current timeline.",zh:""})})}):l.jsxs("div",{children:[l.jsx("input",{className:"shellCheckbox",type:"checkbox",onChange:ge=>{d(ge.currentTarget.checked)},checked:c}),l.jsxs("span",{children:[N({en:"Reset timeline on import",zh:""})," "]}),c?ee:de]}),l.jsxs("div",{className:"buttonHolder",children:[l.jsx("button",{style:K,onClick:()=>{if(G){S(7);const ge=oj(G,c||Ee());setTimeout(()=>{let _e=ge.next();for(;!_e.done;)_({..._e.value}),_e=ge.next();O(_e.value),S(8)},0)}else console.error("intermediate state was undefined when confirming import"),S(2),y(!1)},children:N({en:"go",zh:""})}),V]})]}),Y={position:"relative",width:"100%",borderCollapse:"collapse",borderColor:s.bgMediumContrast,borderWidth:"1px",borderStyle:"solid"},Q={backgroundColor:s.timelineEditor.headerFooter,...ls(s)},x=ge=>ge%2===1?s.timelineEditor.bgAlternateRow:"transparent",Z=g?.deltas.length?l.jsxs(l.Fragment,{children:[l.jsx("hr",{}),l.jsx("div",{children:N({en:"Some simulated actions had timestamps in XIV in the Shell different from the recorded values in FFLogs. Minor differences are normal, but if you see a very large discrepancy, this means there's either a bug in XIV in the Shell, or the configured spell speed/skill speed/fps was incorrect.",zh:"XIV in the Shell/logsXIV in the Shellbug//"})}),l.jsxs("table",{style:Y,children:[l.jsx("thead",{children:l.jsxs("tr",{style:uh,children:[l.jsx("th",{style:{...Q,..._r,width:"35%"},children:N({en:"skill",zh:""})}),l.jsx("th",{style:{...Q,...ll},children:N({en:"log time",zh:""})}),l.jsx("th",{style:{...Q,...ll},children:N({en:"shell time",zh:""})}),l.jsx("th",{style:{...Q,...ll},children:N({en:"difference",zh:""})})]})}),l.jsx("tbody",{children:g.deltas.map((ge,_e)=>l.jsxs("tr",{style:{...uh,background:x(_e)},children:[l.jsx("td",{style:{..._r,width:"35%"},children:Wa(ge.skill)}),l.jsx("td",{style:ll,children:Xe.displayTime(ge.logTime,3)}),l.jsx("td",{style:ll,children:Xe.displayTime(ge.simTime,3)}),l.jsx("td",{style:ll,children:Xe.displayTime(ge.logTime-ge.simTime,3)})]},_e))})]}),g.spilledDeltas?l.jsx("span",{children:N({en:`...and ${g.spilledDeltas} more`,zh:`${g.spilledDeltas}`})}):void 0]}):l.jsx(l.Fragment,{}),ne=l.jsxs("div",{className:"importPage",children:[l.jsx("div",{children:N({en:"processing actions (this may take a moment)...",zh:""})}),g&&l.jsxs("div",{children:[l.jsxs("span",{children:[g.processed," / ",g.total]}),l.jsx("br",{}),Z]})]}),fe=p.length>0?l.jsxs(l.Fragment,{children:[N({en:`The imported timeline produced ${p.length} invalid action${p.length===1?"":"s"}:`,zh:`${p.length}`}),l.jsxs("table",{style:Y,children:[l.jsx("thead",{children:l.jsxs("tr",{style:uh,children:[l.jsx("th",{style:{...Q,...xr},children:"#"}),l.jsx("th",{style:{...Q,..._r},children:N({en:"action",zh:""})}),l.jsx("th",{style:{...Q,..._r},children:N({en:"reason",zh:""})})]})}),l.jsx("tbody",{children:p.slice(0,10).map((ge,_e)=>l.jsxs("tr",{style:{...uh,background:x(_e)},children:[l.jsx("td",{style:xr,children:ge.index}),l.jsx("td",{style:_r,children:ge.node.toLocalizedString()}),l.jsx("td",{style:_r,children:ge.reason.unavailableReasons.map(as).join(N({en:"; ",zh:""}).toString())})]},_e))})]}),p.length>10?l.jsx("span",{children:N({en:`...and ${p.length-10} more`,zh:`...${p.length-10}`})}):void 0]}):void 0,Re=l.jsxs("div",{className:"importPage",children:[l.jsxs("p",{children:[l.jsx("b",{children:N({en:"Import successful!",zh:""})}),N({en:" You may now close this dialog.",zh:""})]}),Z,l.jsx("br",{}),fe,l.jsx("br",{}),l.jsx("div",{children:l.jsx("button",{onClick:()=>y(!1),children:N({en:"finish",zh:""})})})]}),Ne=R===0?ae:R===1?oe:R===2?X:R===3?ce:R===4?z:R===5?se:R===6?W:R===7?ne:R===8?Re:l.jsxs("div",{children:["Bad state: ",R,". Please contact us with a bug report."]}),Me=l.jsxs("div",{ref:f,children:[l.jsx("style",{children:`
			button {
				min-width: 35%;
			}
			.buttonHolder {
				width: 100%;
				display: flex;
				flex-direction: column;
				gap: 0.8em;
				align-items: start;
			}
		`}),Ne]}),me=l.jsx("div",{className:"clickable",children:l.jsx("span",{style:a,children:l.jsx("span",{className:"clickableLinkLike",children:N({en:"Click to open dialog",zh:""})})})}),Ce=l.jsx(VN,{className:"dialogExit",style:{color:s.bgHighContrast}});return l.jsxs(FD,{open:e,onOpenChange:y,children:[l.jsx(zD,{render:me,nativeButton:!1}),l.jsxs(BD,{children:[l.jsx(OD,{className:"Backdrop",style:{opacity:o?.2:.7}}),l.jsxs(GD,{className:"Popup visibleScrollbar",id:"dialogPopup",style:{backgroundColor:s.background,border:"1px solid "+s.bgMediumContrast,color:s.text},children:[l.jsx(jD,{render:l.jsx("h3",{children:N({en:"Import from FFLogs",zh:"FFLogs"})})}),l.jsx(yD,{render:Ce,nativeButton:!1}),l.jsx(MD,{className:"Description",render:Me})]})]})]})}function cj(e,t){const a=I.getTimelineRenderingProps();let o=a.selectionStartDisplayTime,s=a.selectionEndDisplayTime;o===s&&(o=-a.countdown,s=I.game.time-a.countdown+4);const c=I.imageExportConfig;let d,f;c.wrapThresholdSeconds===0?(d=1,f=s-o):(d=Math.ceil((s-o)/c.wrapThresholdSeconds),f=c.wrapThresholdSeconds);const h=document.createElement("canvas"),m=document.createElement("canvas"),R=pe.trackHeight/2,T=I.timeline,S=T.positionFromTime(a.countdown);h.width=T.positionFromTime(s)+S;let g=pe.renderSlotHeight();e&&(g+=pe.rulerHeight,g+=pe.trackHeight*T.getNumMarkerTracks()),h.height=g;const _=h.getContext("2d",{willReadFrequently:!0}),p=0;_.fillStyle=t.background,_.fillRect(0,0,h.width,h.height);let O=0;const y={renderingProps:I.getTimelineRenderingProps(),colors:t,visibleLeft:0,visibleWidth:100};e&&(O+=SD({ctx:_,viewInfo:y,originX:0,ignoreVisibleX:!0,testInteraction:()=>{}}),O+=gD({ctx:_,viewInfo:y,originX:p,originY:O,ignoreVisibleX:!0,testInteraction:()=>{}})),_D({ctx:_,viewInfo:y,isImageExportMode:!0,originX:p,originY:O,testInteraction:()=>{}});const L=T.positionFromTime(o)+S,P=T.positionFromTime(s)+S;m.height=(R+g)*(d-1)+g,m.width=d===1?P-L:T.positionFromTime(f);const D=m.getContext("2d");for(let k=0;k<d;k++){const G=T.positionFromTime(f);if(L>P)break;const B=Math.min(P-(L+k*G),G),K=_.getImageData(L+k*G,0,B+1,h.height+1);D.putImageData(K,0,k*(R+g)),k>0&&B<G&&(D.fillStyle=t.background,D.fillRect(B,k*(R+g),G-B,h.height+1))}return m}function uj(){const[e,t]=C.useState(I.imageExportConfig),a=(h,m)=>{const R=Object.assign({},e);R[h]=m,I.setImageExportConfig(R),t(R),St("img: "+h,JSON.stringify(m))},o={position:"relative",top:3,marginRight:"0.25em"},s=(h,m)=>l.jsxs("div",{style:{marginBottom:5},children:[l.jsx("input",{type:"checkbox",onClick:R=>a(h,R.currentTarget.checked),value:e[h]?"on":"off",style:o,defaultChecked:e[h]}),l.jsx("span",{children:N(m)})]}),c=h=>{Number.isNaN(parseFloat(h))||a("wrapThresholdSeconds",parseFloat(h))},d=l.jsxs(l.Fragment,{children:[l.jsx("div",{children:l.jsx(jt,{defaultValue:e.wrapThresholdSeconds.toString(),description:l.jsxs("span",{children:[N({en:"seconds before wrapping ",zh:" "}),l.jsx(ze,{topic:"png-wrap",content:N({en:"number of elapsed seconds, including the countdown, in each row in the image (set to 0 to never wrap)",zh:"0"})}),":"," "]}),onChange:c,style:{margin:"10px 0"}})}),s("includeTime",{en:"include time and markers",zh:""})]}),f=Tt();return l.jsxs("div",{children:[l.jsx("p",{children:N({en:l.jsx("span",{children:"export the selected part of the timeline as a png according to the current display settings, or the whole timeline if nothing is selected"}),zh:"png"})}),d,l.jsx("p",{children:l.jsx(Rl,{filename:"fight",fileFormat:vo.Png,getContentFn:()=>cj(e.includeTime,f),displayName:N({en:"export selection as png",zh:"png"})})})]})}function dj(){const e=C.useContext(Nn),t=f=>{f.fileType===di.Record?I.undoStack.doThenPush(new Rw(I.record.serialized(),f)):f.fileType===di.MarkerTrackIndividual||f.fileType===di.MarkerTracksCombined?window.alert("wrong file type '"+f.fileType+`'; use the "Timeline markers" section instead if you meant import markers.`):window.alert("wrong file type '"+f.fileType+"'.")},a=N({en:"Export fight to file",zh:""}),o=l.jsxs("div",{children:[l.jsx("p",{children:N({en:"for sharing and importing:",zh:""})}),l.jsx(Rl,{fileFormat:vo.Json,getContentFn:()=>I.record.serialized(),filename:"fight",displayName:N({en:"txt format",zh:"txt"})}),l.jsx("p",{children:N({en:l.jsxs("span",{children:["for external tools such as excel and"," ",l.jsx("a",{href:"https://github.com/Tischel/BLMInTheShell",children:"Tischel's plugin"}),":"]}),zh:l.jsxs("span",{children:["excel",l.jsx("a",{href:"https://github.com/Tischel/BLMInTheShell",children:"Tischel"}),""]})})}),l.jsx(Rl,{fileFormat:vo.Csv,getContentFn:()=>({body:I.getActionsLogCsv()}),filename:"fight",displayName:N({en:"csv format",zh:"csv"})}),l.jsx("p",{children:N({en:l.jsxs("span",{children:["for use with"," ",l.jsx("a",{href:"https://colab.research.google.com/github/zqsz-xiv/xivintheshell-ama-sim-notebook/blob/main/in_the_shell_with_ama_sim.ipynb",children:"Amarantine's combat simulator"}),":"]}),zh:l.jsxs("span",{children:["",l.jsx("a",{href:"https://github.com/Amarantine-xiv/Amas-FF14-Combat-Sim",children:"Amarantine"}),""]})})}),l.jsx(Rl,{fileFormat:vo.Csv,getContentFn:()=>I.getAmaSimCsv(),filename:"fight",displayName:N({en:"csv format",zh:"csv"})})]}),s=N({en:"Import fight from file",zh:""}),c=l.jsxs(l.Fragment,{children:[l.jsx(qh,{allowLoadFromUrl:!1,onLoadFn:t}),l.jsx("hr",{style:{marginTop:15,border:"none",borderTop:"1px solid "+Sl(e,"bgHighContrast")}}),l.jsx("div",{style:{marginTop:15,marginBottom:10},children:l.jsx("b",{children:N({en:"Import fight from FFLogs",zh:"FFLogs"})})}),l.jsx(rj,{})]}),d=l.jsx(l.Fragment,{children:N({en:"Image Export",zh:""})});return l.jsx(NT,{contentHeight:oS,children:[{defaultSize:25,title:s,content:c},{defaultSize:30,title:a,content:o},{defaultSize:45,title:d,content:l.jsx(uj,{})}]})}function hj(){const e=(d,f)=>l.jsxs("div",{style:{marginBottom:5},children:[l.jsx("b",{children:N(d)})," ",f]}),t=l.jsx(ze,{topic:"settings-display",content:N({en:"Configure how elements are displayed in the visual timeline and image exports.",zh:""})}),a=l.jsx(ze,{topic:"settings-copypaste",content:N({en:l.jsxs("div",{children:["Configure the format used when copying a sequence of skills from XIV in the Shell to paste in other applications.",l.jsx("br",{}),"Any of the provided formats can be pasted ",l.jsx("i",{children:"from"})," external applications to XIV in the Shell at any time, regardless of the value of this setting."]}),zh:l.jsxs("div",{children:["",l.jsx("br",{}),""]})})}),o=l.jsx(ze,{topic:"settings-copypaste-plain",content:N({en:l.jsxs("div",{children:["A comma-separated list of skill names.",l.jsx("br",{}),l.jsx("br",{}),"Example:",l.jsx("br",{}),l.jsx("span",{children:"Fire 3, Fire 4, Despair"})]}),zh:l.jsxs("div",{children:["",l.jsx("br",{}),l.jsx("br",{}),"",l.jsx("br",{}),l.jsx("span",{children:"34"})]})})}),s=l.jsx(ze,{topic:"settings-copypaste-plain",content:N({en:l.jsxs("div",{children:["A tab-separated list of usage timestamps, target counts, and skill names, for use with external spreadsheet applications.",l.jsx("br",{}),l.jsx("br",{}),"Example:",l.jsx("table",{children:l.jsxs("tbody",{children:[l.jsxs("tr",{children:[l.jsx("td",{children:"-3.500"}),l.jsx("td",{children:"1"}),l.jsx("td",{children:"Fire 3"})]}),l.jsxs("tr",{children:[l.jsx("td",{children:"0.042"}),l.jsx("td",{children:"1"}),l.jsx("td",{children:"Fire 4"})]}),l.jsxs("tr",{children:[l.jsx("td",{children:"2.500"}),l.jsx("td",{children:"1"}),l.jsx("td",{children:"Despair"})]})]})})]}),zh:l.jsxs("div",{children:["",l.jsx("br",{}),l.jsx("br",{}),"",l.jsx("table",{children:l.jsxs("tbody",{children:[l.jsxs("tr",{children:[l.jsx("td",{children:"-3.500"}),l.jsx("td",{children:"1"}),l.jsx("td",{children:"3"})]}),l.jsxs("tr",{children:[l.jsx("td",{children:"0.042"}),l.jsx("td",{children:"1"}),l.jsx("td",{children:"4"})]}),l.jsxs("tr",{children:[l.jsx("td",{children:"2.500"}),l.jsx("td",{children:"1"}),l.jsx("td",{children:""})]})]})})]})})}),c=l.jsx(ze,{topic:"settings-copypaste-discord",content:N({en:l.jsxs("div",{children:["A sequence of Discord emotes (only verified for BLM and PCT). Requires access to a server with appropriately-named emotes to use.",l.jsx("br",{}),l.jsx("br",{}),"Example:",l.jsx("br",{}),l.jsx("span",{children:":F3: :F4: :Despair:"})]}),zh:l.jsxs("div",{children:["Discord)Discord",l.jsx("br",{}),l.jsx("br",{}),"",l.jsx("br",{}),l.jsx("span",{children:":F3: :F4: :Despair:"})]})})});return l.jsxs("div",{children:[e({en:"Display settings",zh:""},t),l.jsx(su,{uniqueName:"showDamageMarks",label:N({en:"show damage marks",zh:""}),onChange:d=>{I.setTimelineOptions({drawDamageMarks:d})}}),l.jsx(su,{uniqueName:"showHealingMarks",label:N({en:"show healing marks",zh:""}),onChange:d=>{I.setTimelineOptions({drawHealingMarks:d})}}),l.jsx(su,{uniqueName:"showMPAndLucidTickMarks",label:N({en:"show MP and lucid ticks",zh:""}),onChange:d=>{I.setTimelineOptions({drawMPTickMarks:d})}}),l.jsx(su,{uniqueName:"showBuffIndicators",label:N({en:"show buff indicators",zh:"buff"}),onChange:d=>{I.setTimelineOptions({drawBuffIndicators:d})}}),l.jsx("br",{}),e({en:"Clipboard copy mode",zh:""},a),l.jsx(Xb,{uniqueName:"clipboardMode",onChange:d=>I.clipboardMode=d,options:[["plain",l.jsxs("span",{children:[N({en:"plain text",zh:""})," ",o]})],["tsv",l.jsxs("span",{children:[N({en:"tab-separated lines",zh:""})," ",s]})],["discord",l.jsxs("span",{children:["discord",N({en:" emotes",zh:""})," ",c]})]]})]})}let xo=()=>{},XD=e=>{};const qD="dragLock",fj=Rt(qD),ZD=fj==="true",Gu=C.createContext({value:ZD,setter:e=>{}}),$f=C.createContext({dragTargetIndex:null,dragTargetTime:null,setDragTarget:(e,t)=>{}});function Ej(){const e=C.useRef(null),[t,a]=C.useState(11),[o,s]=C.useState(300),[c,d]=C.useState(23),[f,h]=C.useState(66),[m,R]=C.useState(0),[T,S]=C.useState(!1),[g,_]=C.useState({onMouseMove:()=>{},onMouseEnter:()=>{},onMouseLeave:()=>{},onMouseUp:()=>{},onMouseDown:()=>{},onKeyDown:()=>{}}),p=()=>{e.current&&(d(e.current.scrollLeft),h(e.current.clientWidth))};xo=()=>{a(I.timeline.getCanvasWidth()),s(I.timeline.getCanvasHeight()),R(m+1)},XD=D=>{if(e.current!=null){const k=e.current.clientWidth;e.current.scrollLeft=D-k*.6}p()},C.useEffect(()=>{a(I.timeline.getCanvasWidth()),s(I.timeline.getCanvasHeight()),p()},[]);const O=l.jsx(SF,{timelineHeight:o,visibleLeft:c,visibleWidth:f,version:m,pointerMouse:T,setCallbacks:_,setPointerMouse:S}),y=C.useContext(Nn),L=Sl(y,"bgMediumContrast"),P=Kb?l.jsx("div",{style:{height:8},tabIndex:-1}):void 0;return l.jsxs("div",{style:{position:"relative"},children:[O,l.jsxs("div",{tabIndex:0,className:"visibleScrollbar",style:{position:"relative",width:"100%",overflowX:"scroll",overflowY:"clip",outline:"1px solid "+L,cursor:T?"pointer":"default"},ref:e,onScroll:()=>{e.current&&(e.current.scrollLeft=Math.min(e.current.scrollWidth-e.current.clientWidth,e.current.scrollLeft),d(e.current.scrollLeft),h(e.current.clientWidth))},onMouseMove:D=>{if(e.current){const k=e.current.getBoundingClientRect(),G=D.clientX-k.left,B=D.clientY-k.top;g.onMouseMove(G,B)}},onMouseDown:D=>{if(e.current){const k=e.current.getBoundingClientRect(),G=D.clientX-k.left,B=D.clientY-k.top;g.onMouseDown(G,B)}},onMouseEnter:()=>g.onMouseEnter(),onMouseLeave:()=>g.onMouseLeave(),onMouseUp:D=>{if(e.current){const k=e.current.getBoundingClientRect(),G=D.clientX-k.left,B=D.clientY-k.top;g.onMouseUp(D,G,B)}},onKeyDown:D=>g.onKeyDown(D),children:[l.jsx("div",{style:{position:"relative",backgroundColor:"transparent",width:t,height:o,pointerEvents:"none"}}),P]})]})}const QD=320,oS=QD-40;function mj(){const{value:e,setter:t}=C.useContext(Gu),a=C.useContext(Nn),o=window.innerWidth>1024,s=window.innerWidth>800;return l.jsxs("div",{style:{position:"relative",margin:6},children:[l.jsx(Wb,{uniqueName:"timeline",maxWidth:1440,content:[{titleNode:N({en:"Timeline markers",zh:""}),contentNode:l.jsx(oF,{})},{titleNode:l.jsxs("div",{style:{position:"relative"},children:[N({en:"Timeline editor ",zh:" "}),l.jsx(ze,{topic:"timeline editor",content:l.jsx("div",{children:l.jsx("div",{className:"paragraph",children:N({en:'Table view for editing the current timeline. Changes made here are not saved until the "apply changes" button is pressed.',zh:""})})})})]}),contentNode:l.jsx(sw,{})},{titleNode:N({en:"Import/Export",zh:"/"}),contentNode:l.jsx("div",{children:l.jsx(dj,{})})},{titleNode:N({en:"Settings",zh:""}),contentNode:l.jsx(hj,{})}],collapsible:!0,scrollable:!1,height:QD,defaultSelectedIndex:void 0}),l.jsxs("div",{style:{position:"absolute",top:0,right:6,display:"flex",flexDirection:"row",gap:20},children:[o&&l.jsxs("div",{style:{height:br,lineHeight:`${br}px`,verticalAlign:"middle",cursor:"pointer",userSelect:"none"},onClick:c=>{c.preventDefault(),t(!e)},children:[N({en:"drag lock",zh:""})," ",l.jsx(ze,{topic:"dragLock",content:N({en:l.jsx("div",{children:"When locked, disables click/drag to rearrange timeline skills."}),zh:l.jsx("div",{children:""})})})," ",l.jsx(Jl.Provider,{value:{color:e?Sl(a,"accent"):void 0,style:{width:12,height:12,verticalAlign:"baseline"}},children:e?l.jsx($M,{}):l.jsx(QM,{})})]}),s&&l.jsx(iw,{uniqueName:"timelineDisplayScale",description:N({en:"horizontal scale ",zh:" "}),defaultValue:"0.4",style:{height:br,lineHeight:`${br}px`,verticalAlign:"middle"},onChange:c=>{I.timeline.setHorizontalScale(parseFloat(c)),I.scrollToTime()}})]})]})}function Aj(){const[e,t]=C.useState(ZD),[[a,o],s]=C.useState([null,null]),c=(d,f)=>{if(e)d=null,f=null;else{const h=I.record.selectionStartIndex??0;let m=(d??0)-(h??0);m>0&&(m-=I.record.getSelectionLength()),(m===0||d!==null&&I.record.isInSelection(d))&&(d=null,f=null)}(d!==a||f!==o)&&s([d,f])};return l.jsx("div",{style:{bottom:0,left:0,right:0,paddingLeft:0,paddingRight:0,borderTop:"2px solid "+Tt().bgHighContrast,flex:0},children:l.jsx(Gu.Provider,{value:{value:e,setter:d=>{St(qD,d.toString()),t(d)}},children:l.jsxs($f.Provider,{value:{dragTargetIndex:a,dragTargetTime:o,setDragTarget:c},children:[l.jsx(Ej,{}),l.jsx(mj,{})]})})})}const La=JSON.parse(`[{"date":"2/7/26","changes":["Added the ability to choose specific targets for damaging skills. Please see the \\"# of targets hit\\" help item for details.","Abilities imported from FFLogs now correctly track the number of targets hit."],"changes_zh":[""," FFLogs "],"level":"major"},{"date":"2/3/26","changes":["[DRG] Fixed a bug where Mirage Dive was not recognized by FFLogs imports."],"changes_zh":[" FFLogs "]},{"date":"1/28/26","changes":["[GNB] Fixed a bug where overcapping on cartridges after using Bloodfest did not raise a warning."]},{"date":"1/26/26","changes":["Updated for patch 7.41."],"changes_zh":["7.41"]},{"date":"1/25/26","changes":["[NIN] Fixed a bug where Mudras were sometimes not visible after FFLogs import."]},{"date":"1/24/26","changes":["[AST] Fixed a bug where Oracle's potency was missing."],"changes_zh":[""]},{"date":"1/23/26","changes":["[RPR] Fixed a bug where Soulsow could not be cast during Enshroud.","[MNK] Fixed a bug where Chakra spenders did not receive the effects of Brotherhood and Riddle of Fire."],"changes_zh":["","buff"]},{"date":"1/22/26","changes":["Added Chinese-language M9S, M10S, and M12S P2 tracks (translated by yuyuka)."],"changes_zh":[" M9SM10SM12S   "],"level":"major"},{"date":"1/20/26","changes":["Added Chinese-language M11S and M12S P1 tracks (translated by yuyuka)."],"changes_zh":[" M11S  M12S   "]},{"date":"1/19/26","changes":["Added a user manual. You can find it at xivintheshell.com/manual, in the intro section, or in the links at the top right of the page."],"changes_zh":[" xivintheshell.com/manual"],"level":"major"},{"date":"1/17/26","changes":["Fixed a bug where the piety stat could not be configured."]},{"date":"1/15/26","changes":["Added English-language M12S P1 tracks. All Arcadion Heavyweight fights now have tracks. Happy planning!"]},{"date":"1/14/26","changes":["Added English-language M11S tracks.","Added English-language M12S P2 tracks."]},{"date":"1/13/26","changes":["Added Vamp Stomp floor bat explosion timings to M9S tracks.","Added English-language M10S tracks."]},{"date":"1/12/26","changes":["Added English-language M9S tracks.","[RPR] Fixed a bug where Slice had incorrect potency."]},{"date":"1/11/26","changes":["[SCH] Fixed a bug where using Adloquium, Succor, or Concitation under the effect of Recitation consumed MP.","[BLU] Enabled FFLogs import.","Fixed a bug where importing an FFLogs report link with a fight ID would sometimes not pick the specified fight.","Removed marker presets for M5S-M8S from current content. These can still be found in the \\"archive\\" section of marker presets.","Limited the maximum marker track number to 20."]},{"date":"1/5/26","changes":["[NIN] Fixed a bug where using Doton under the effect of Ten Chi Jin did not apply AoE damage.","New developer blog post (English only): https://blog.xivintheshell.com/posts/the-night-before-heavyweight/"]},{"date":"1/2/26","changes":["[MCH] Adjusted the potency of Wildfire to reflect its inability to CDH.","[SCH][AST] Fixed a bug where DoT effects with no on-hit potency did not receive the player's own Chain Stratagem or Divination buffs.","[DRK] Fixed a bug where Living Shadow granted Scorn below level 100."]},{"date":"12/31/25","changes":["Fixed a visual bug where deleting a marker did not set the correct marker type in the marker creation menu.","[SCH] Fixed a bug where Sacred Soil incorrectly had a 30-second duration.","[SCH] Fixed a bug where Expedient did not grant buffs."]},{"date":"12/30/25","changes":["Changed font specification to improve display on computers with Chinese browser/OS.","Updated the site to automatically use Chinese if your browser is set to use it. Manually using the language selector overrides this.","[BLM] Fixed a bug where overriding the initial AF/UI state gave an extra Polyglot stack."],"changes_zh":["/","",".",""]},{"date":"12/29/25","changes":["[SAM] Added missing application delay values for Hissatsu: Shinten, Kyuten, Gyoten, Yaten, Senei, and Guren.","Updated export to Ama's combat sim to use Grade 4 Gemdraughts for potions.","Added support QQ group to Introductions section."],"changes_zh":["QQ","changelog"]},{"date":"12/26/25","changes":["[AST] Fixed a bug where Stellar Detonation could be repeatedly cast.","[AST] Fixed a bug where automatically-detonated Earthly Star did not receive a pet potency modifier."]},{"date":"12/22/25","changes":["[WAR] Fixed Inner Release being unusable before combat."]},{"date":"12/21/25","changes":["Fixed a bug where importing from FFLogs while resource overrides were active for a different job would crash the site.","[SMN] Fixed a bug where SMN logs could not be imported."]},{"date":"12/19/25","changes":["[RDM] Fixed log imports with Enchanted melee combo actions under the effect of Manafication.","Fixed a bug where importing from FFLogs would sometimes crash the site.","[BRD] Fixed a bug where auto-attacks appeared as an action in log import."]},{"date":"12/16/25","changes":["Updated for patch 7.4."],"changes_zh":["7.4"],"level":"major"},{"date":"12/14/25","changes":["Fixed a bug where the graphical timeline did not render properly when fight markers were loaded and all timeline slots were filled."]},{"date":"12/10/25","changes":["Adjusted the layout of marker presets and input."],"changes_zh":[""]},{"date":"12/7/25","changes":["Adjusted the appearance of scroll bars in Firefox."]},{"date":"11/15/25","changes":["Consumables like Pilgrim's Potions and Super-Ethers in FFLogs imports now display as unknown skills instead of Tinctures."]},{"date":"11/11/25","changes":["Fixed a bug where timeline skill tooltips would be acidentally cut off.","[SCH] Fixed a bug where Energy Drain and Physick were not recognized during log import."],"changes_zh":["","log"]},{"date":"11/7/25","changes":["Added the ability to import fights from FFLogs! You can find it in the Import/Export tab at the bottom of the page.","[WAR] Fixed a typo in the name of Storm's Path and Storm's Eye"],"changes_zh":["FFLogs/"],"level":"major"},{"date":"10/13/25","changes":["Added tracks for The Final Verse (Quantum) Q40."],"level":"minor"},{"date":"9/29/25","changes":["Updated the text of the timeline editor help tooltip.","New developer blog post (English only): https://blog.xivintheshell.com/posts/progressive-ux-improvements/"],"changes_zh":[""],"level":"minor"},{"date":"9/20/25","changes":["[!] Skills can now be inserted in the middle of a timeline.","[!] Pressing backspace/delete now deletes only the selected skills.","Using the up and down arrow keys changes the selected skills.","Most actions can now be undone/redone with ctrl/cmd+z and ctrl/cmd+y.","Actions can now be copy/pasted both within and outside the site (see \\"Settings\\" at the bottom of the page for details).","Adjusted the appearance of some website elements on Firefox."],"changes_zh":["[!]","[!]backspacedelete","    ","ctrl/cmd+zctrl/cmd+y/","",""],"level":"major"},{"date":"9/14/25","changes":["Fixed a bug where certain config stats couldn't be changed."]},{"date":"9/12/25","changes":["Added an \\"apply\\" button to the configuration section, which can be used to change configuration without resetting the timeline."],"changes_zh":[""]},{"date":"9/8/25","changes":["Fixed a crash when loading xivgear/etro links from a job different from the active one.","Fixed an issue where speed effects and certain sps/sks values were displayed incorrectly at level 70 (this was only a cosmetic issue in the configuration panel).","Changing jobs now uses the last saved stats you set for that job.","Creating a new timeline with a different job will now use one of The Balance's best-in-slot gear sets for the current patch."]},{"date":"9/2/25","changes":["Added different tincture images for each job.","Timelines with invalid skill names can now be loaded."]},{"date":"9/1/25","changes":["Added DSR P2 markers from Caro."]},{"date":"8/28/25","changes":["[BRD] Fixed typos in the names of Apex Arrow, The Wanderer's Minuet, and Rain of Death.","[BRD] Export to Ama's combat sim now tracks codas for Radiant Finale and Radiant Encore.","Updated export to Ama's combat sim to include hard-coded STR stats for healer/caster auto-attacks."]},{"date":"8/19/25","changes":["[WHM] Fixed a bug where Lillies would continue to generate even when at full stacks.","Fixed a bug where clicking on the timeline ruler would not immediately display historical state."],"level":"minor"},{"date":"8/17/25","changes":["Changed timeline slot buttons to trigger only if the mouse was both pressed and released on top of them."],"level":"minor"},{"date":"8/11/25","changes":["Made some internal adjustments to the implementation of click/drag selection and skill arrangements.","[WAR] Fixed a bug where Decimate consumed 2 stacks of Inner Release, and failed to grant Burgeoning Fury.","[WAR] Fixed Storm's Eye using an incorrect application delay.","[WAR] Extended the duration of the Inner Release, Primal Rend Ready, and Primal Ruination buffs to match in-game behavior.","[NIN] Fixed a bug where using Gust Slash without an active combo incorrectly advanced combo state.","[NIN] Fixed a bug where damage from Doton ticks was not computed.","[NIN] Fixed a bug where using Katon under Ten Chi Jin did not trigger Hollow Nozuchi."],"level":"minor"},{"date":"8/10/25","changes":["[NIN] Fixed a bug where Ninjutsu abilities were not buffed by Kunai's Bane and Dokumori."],"level":"minor"},{"date":"8/8/25","changes":["Added quick links to our GitHub, Bluesky, and (new) developer blog.","Added Bluesky, the dev blog, and the legacy game version site to the links in the \\"about\\" section."],"level":"minor"},{"date":"8/4/25","changes":["Updated for patch 7.3."],"changes_zh":["7.3"],"level":"major"},{"date":"8/3/25","changes":["The active timeline slot is now saved across page reloads.","Click and drag to rearrange skills, both in the visual timeline and timeline editor table.","Click and drag on the background of the visual timeline to select multiple skills.","Use the \\"drag lock\\" switch to the right of the display settings tabs to disable click+drag behavior."],"changes_zh":["","","",""],"level":"major"},{"date":"7/27/25","changes":["Updated FPS adjustment preview tooltip to use GCD time instead of cast times."]},{"date":"7/26/25","changes":["[WHM][AST][SCH] Fixed a bug where Swiftcast's cooldown was set to 40s below level 100."]},{"date":"7/25/25","changes":["[SCH] Initial SCH implementation. Thanks to Caro for help with numbers and some mechanics.","That's every job now in the shell! Stay tuned for more features and improvements to come."],"changes_zh":["Caro",""],"level":"major"},{"date":"7/22/25","changes":["[DNC] Fixed a bug where Fountain and Bladeshower could grant Silken Flow when used without combo."]},{"date":"7/20/25","changes":["[VPR] Added initial support for VPR. Thanks to Verra for help testing.","[BLU] Using an action while Waning Nocturne or Diamondback are active now uses the action as soon as the debuff expires."],"changes_zh":[" Verra","\\"\\"\\"\\""],"level":"major"},{"date":"7/15/25","changes":["Fixed \\"real-time auto pause\\" display.","[GNB] Fixed a bug where Fated Circle broke combos."],"changes_zh":["\\"(\\"",""],"level":"minor"},{"date":"7/14/25","changes":["[BLU] Fixed a bug where Apokalypsis and Phantom Flurry's potencies were incorrect.","[BLU] Fixed a bug where Surpanakha's 30-second cooldown was not applied."],"changes_zh":["\\"\\"\\"\\"","\\"\\"30CD"],"level":"minor"},{"date":"7/10/25","changes":["[MNK] Now begins encounters with Formless Fist active by default.","[DRG][NIN] Fixed a bug where using combo actions out of sequence granted combo potency bonus.","[AST] Fixed Macrocosmos/Microcosmos."],"changes_zh":["\\"\\"","",""],"level":"minor"},{"date":"7/8/25","changes":["[AST] Added initial support for AST.","[WHM] Addd initial support for WHM.","[SAM][NIN][MNK] GCD calculations in the configuration panel now account for jobs' natural speed buffs."],"changes_zh":[" "," ","GCD"],"level":"major"},{"date":"7/5/25","changes":["[MNK] Added initial support for MNK."],"changes_zh":[" "],"level":"major"},{"date":"6/25/25","changes":["Fixed a bug where timestamps would not appear for wait events in the timeline editor.","Fixed a bug where selecting a skill in the visual canvas did not cause the editor table to scroll to its location."],"level":"minor"},{"date":"6/24/25","changes":["[NIN] Added initial support for NIN."],"changes_zh":[" "],"level":"major"},{"date":"6/19/25","changes":["[DRK] Added initial support for DRK."],"changes_zh":[" "],"level":"major"},{"date":"6/18/25","changes":["Fixed a bug where the \\"wait until timestamp\\" events would change times unexpectedly."],"changes_zh":["\\"\\""],"level":"minor"},{"date":"6/17/25","changes":["Fixed timestamps not appearing in the timeline editor when a new skill is added.","Fixed skill selections ending on \\"wait\\" events not rendering correctly in the graphical timeline.","Fixed skill tooltips in the graphical timeline not displaying AoE potency."],"changes_zh":["","\\"\\"","aoe"],"level":"minor"},{"date":"6/16/25","changes":["[BLU] Added support for Blue Mage."],"changes_zh":[""],"level":"minor"},{"date":"6/6/25","changes":["[GNB][SGE] Chinese localization."],"changes_zh":[""],"level":"minor"},{"date":"6/3/25","changes":["Added the ability to save invalid timelines on the visual canvas. Changes in the timeline editor now reflect in the graphical timeline as well.","The \\"jump to timestamp\\" and \\"wait for MP tick\\" buttons will now always look for the specified timestamp/next MP tick, even when actions are shifted in the timeline editor.","Added a \\"Clone timeline slot\\" button.","See our \\"known bugs\\" page on GitHub for limitations: https://github.com/xivintheshell/xivintheshell/wiki/Known-Bugs"],"changes_zh":["","","","GitHubhttps://github.com/xivintheshell/xivintheshell/wiki/Known-Bugs"],"level":"major"},{"date":"5/29/25","changes":["[PLD] Chinese localization adjustments.","[SMN] Chinese localization; fix summon lock bar not showing progress."],"changes_zh":["",""],"level":"minor"},{"date":"5/28/25","changes":["[PLD] Chinese localization first draft."],"changes_zh":[""],"level":"minor"},{"date":"5/27/25","changes":["[BRD][MCH][SMN] Adjusted AoE potencies to reflect patch 7.25."],"changes_zh":["7.25"],"level":"minor"},{"date":"5/26/25","changes":["Fixed a bug where damage log CSV export didn't work (thanks ryxiv)."],"level":"minor"},{"date":"5/23/25","changes":["Adjusted the calculations for the effect of crit/DH party buffs on auto-crit/DH hits, like PCT's Hammer combo.","Fixed a bug with export to Ama's combat sim where Chain Stratagem and Dokumori would not apply to the boss."],"changes_zh":["","Fixed a bug with export to Ama's combat sim where Chain Stratagem and Dokumori would not apply to the boss."],"level":"minor"},{"date":"5/18/25","changes":["Updated the site to automatically use dark mode if your system is set to use it. Manually using the theme selector overrides this.","[GNB] Fixed a typo where \\"Lightning Shot\\" was incorrectly called \\"Lightning Shock.\\"","[GNB] Updated the application delay of Trajectory from 0.22 to 0.66 to match the current version of the game."],"level":"minor"},{"date":"5/17/25","changes":["We've made some big updates to the tools we use to build XIV in the Shell. The site should work the same as before, but if you notice anything broken or slow, please let us know posthaste.","We're planning on adding some large features in the near feature, so we've also made the changelog more prominent in anticipation. Please look forward to it."],"changes_zh":["XIV in the Shell",""],"level":"major"},{"date":"5/10/25","changes":["[PLD] Added initial support for PLD"],"changes_zh":[" "],"level":"major"},{"date":"5/9/25","changes":["[RPR] Fixed a bug where Regress wasn't usable in enshroud","[RPR] Fixed a bug where Grim Swathe was replaced with Lemure's Slice instead of Lemure's Scythe","[RPR] Fixed a bug where Perfectio was usable in enshroud","[RPR] Fixed a bug where Executioner's Gibbet/Gallows weren't replaced with Void/Cross Reaping while in enshroud","[SMN] Fixed a bug where Slipstream's initial hit falloff was displayed incorrectly in the DoT table (thanks omor1)","[SMN] Fixed the potency of Mountain Buster (was incorrectly listed as 170 instead of 160, thanks omor1)"]},{"date":"5/2/25","changes":["Changed Ama's combat sim export to disable auto-attacks for healer/caster jobs."]},{"date":"4/28/25","changes":["Refactored cooldown logic. Changes should not affect end users, but let us know if anything is off.","Added a few missing translations"]},{"date":"4/21/25","changes":["Updated compatibility with Ama's combat sim for newly-supported jobs."]},{"date":"4/17/25","changes":["[RPR] Added a button to gain +10 Soul Gauge to simulate a target dying with Death's Design active","[BRD] Fixed a bug where Iron Jaws checked the dot status at application time instead of confirmation time (thanks Yumiya)","[BRD] Fixed a bug where Empyreal Arrow applied repertoire at application time instead of confirmation time (also thanks Yumiya)"]},{"date":"4/13/25","changes":["Added English-language markers for M8S"]},{"date":"4/7/25","changes":["Added English-language markers for M7S"]},{"date":"4/6/25","changes":["Added English-language markers for M5S + M6S"]},{"date":"3/29/25","changes":["[BLM] Removed \\"outdated\\" status"]},{"date":"3/26/25","changes":["Added user survey link"]},{"date":"3/24/25","changes":["We have updated the site in accordance with the 7.2 patch notes. Goodbye to the Enochian timer o7","[BLM] will remain in \\"outdated\\" status until we have a change to play with the changes in-game.","Since most jobs received only potency changes, your old 7.1 plans should work, but as usual, please let us know if anything seems incorrect."]},{"date":"3/20/25","changes":["[DNC] Fixed an issue where the icons for Finishing Move Ready and Last Dance Ready were swapped, and an issue where Last Dance Ready was not consumed by Last Dance (thank you bluke)"]},{"date":"3/16/25","changes":["Fixed an issue where resource toggles were shown in the timeline editor with their internal keys rather than localized text.","Fixed mistakes in DoT effect override calculations.","In anticipation of patch 7.2, we're working on some changes to make it easier to migrate timelines after site or game changes. The following things have changed:","- Single-clicking an action will now try to use it as soon as the current animation lock/skill cooldown is over (this used to require double-clicking). If the action cannot be used, a wait is automatically added to the timeilne.","- In \\"manual\\" control mode, you no longer need to press space to advance past an action's animation lock (it will now advance automatically when a skill is used).","- Displayed wait durations are now always calculated from the end of the previous animation lock. Any existing timelines will automatically be adjusted--the shown wait times may be different, but the times where actions are used will remain the same.","- Skill sequence presets now include wait durations. This lets you load/save sequences that use late weaves or wait for MP ticks (assuming ticks still line up correctly).","As a consequence of these changes, you actually might now be able to load BLM timelines from 7.05/7.0 that previously were broken as a result of Despair becoming instant. Despair will still be instant and other buff usage will be unchanged, but the time between abilities should be correct.","These changes are very large, and while we've tested to make sure they won't break your existing timelines, there might still be some bugs that slipped through the cracks. As always, please reach out to us if you encounter any problems."]},{"date":"3/1/25","changes":["Make it so that you can only delete the currently active slot, to hopefully reduce the chance of accidentally deleting a slot when switching"]},{"date":"2/26/25","changes":["Updated the GCD formula because the old formula may be off by 0.01s when there is haste buff. Thank you Yuyuka for spotting the error. Note: old timelines (including timelines in browser localStorage) aren't affected; only newly created timelines use the new formula."]},{"date":"2/22/25","changes":["Added Queen Eternal markers by "]},{"date":"2/21/25","changes":["[BRD][GNB][SMN] Removed testing tag"]},{"date":"2/20/25","changes":["[SGE] Initial implementation for SGE","- Some rough edges still exist around Krasis' healing potency modification and Eukrasian shield handling.","- Basic functionality should be reasonably complete.","[RDM] Fixed a bug where Manafication could be used before combat"]},{"date":"2/16/25","changes":["[SAM] Fixed Hagakure only being usable at 3 sen"]},{"date":"2/15/25","changes":["[BLM] Fixed Manafont CD at lvl80 and below: should be 120s"]},{"date":"2/13/25","changes":["Updated English FRU tracks to more accurately reflect downtime between phases. We previously used the \\"death\\" event in a log as the end of a phase, but it turns out this is inaccurate as the last damage application to the boss occurs ~2 seconds before its recorded death.","- P1 to P2 untargetable duration increased by 2 seconds","- P2 to intermission untargetable duration decreased to align with the \\"crystals become targetable\\" mark","- Intermission to P3 downtime increased to match Gaia's attack killing the crystal","In order to not break existing timelines, the preset EN full fight track now treats P1 as dying 2 seconds before the end of the enrage cast. The start times of all phases are unaffected."]},{"date":"2/4/25","changes":["[SAM] Fixed AoE combo actions not ending the combo","[DRG] Added initial support for DRG"]},{"date":"2/2/25","changes":["[BRD][DNC] Fixed bonuses given from certain crit/DH buffs not applying in total potency calculations"]},{"date":"2/1/25","changes":["[WAR][SAM][RPR][MCH][DNC] Implemented localization for some recently added jobs"]},{"date":"1/27/25","changes":["[SMN] Added initial support for SMN"]},{"date":"1/26/25","changes":["[WAR][GNB] Fixed missing icon for tank LB3s"]},{"date":"1/18/25","changes":["[GNB] Added initial support for GNB"]},{"date":"1/17/25","changes":["Added \\"move end of selection to start of selection\\" button to the timeline editor"]},{"date":"1/12/25","changes":["[RPR] Fixed a bug where oGCDs would improperly consume Reaver/Executioner stacks"]},{"date":"1/8/25","changes":["[WAR] Fixed surging tempest text not showing up in potency modifier tooltip","[MCH] Fixed Overheated potency modifier not being applied"]},{"date":"1/5/25","changes":["Fixed a bug where multi-target spells lost their target counts when using the timeline editor"]},{"date":"1/4/25","changes":["Added support for multi-target abilities"]},{"date":"1/3/25","changes":["[WAR][SAM][RPR] Removed testing tag"]},{"date":"1/1/25","changes":["Added combined English FRU tracks"]},{"date":"12/28/24","changes":["[PCT] Fixed warning for Palette Gauge overcap"]},{"date":"12/24/24","changes":["[MCH] Added support for Flamethrower"]},{"date":"12/22/24","changes":["[BRD] Added initial support for BRD","Overhaul DoT tracking to provide better usage statistics","[BLM] Added High Thunder II"]},{"date":"12/20/24","changes":["Fixed stats tables not including party buff potencies for most skills","Removed flank/rear positional resources for non-melee jobs"]},{"date":"12/19/24","changes":["[WAR] Adjusted animation lock of Primal Rend","Fixed Down for the Count timing in FRU P4 (thanks xi12570)"]},{"date":"12/16/24","changes":["Limit breaks for all jobs!","[MCH][DNC] Removed testing tag","Updated \\"About this tool\\" section","More underlying implementation changes","[PCT] Made Hammer combo expire with Hammer Time buff (changed in 7.1)"]},{"date":"12/13/24","changes":["Fixed sometimes unable to use skills in manual mode with double click","[RPR] Added timer for Immortal Sacrifice","[RPR] Removed enhanced reapings whenever shroud is exited","[RPR] Separated cooldowns of Sacrificium and Lemure's Slice","[RPR] Fixed sks scaling","[WAR] Added initial WAR support"]},{"date":"12/12/24","changes":["Updated English FRU tracks and added P4 + P5"]},{"date":"12/8/24","changes":["Updated Chinese FRU tracks to latest (12/8 ver)","Make stats tables only include selected skills when there is selection"]},{"date":"12/7/24","changes":["Updated positional buff icons","Misc cleanups and optimizations (hey devs: rerun npm install)","[BLM] Fixed Retrace button not changing back to LL if LL is disabled when the buff drops"]},{"date":"12/5/24","changes":["Updated Chinese FRU tracks to latest (12/2 version)","Additional Chinese localization changes (preset lines; initial resource overrides section; many resource names)","New skill icon progress bar visuals "]},{"date":"12/4/24","changes":["Added English FRU P3 tracks by Yara","[RDM] Fixed Swiftcast being consumed before Dualcast when both are active"]},{"date":"12/2/24","changes":["Added English FRU P2 tracks by Yara","Fixed a bug where 'Load tracks starting at timestamp' did not accept some time formats","[RDM] Removed the 'testing' label"]},{"date":"12/1/24","changes":["Updated full FRU tracks in Chinese by  & czmm"]},{"date":"11/30/24","changes":["[MCH] Fixed Scattergun's heat generation (thanks Kairos)","[PCT] Fixed Monochrome Tones appearing when synced to level 80 and other internal trait logic (thanks misterperson)"]},{"date":"11/29/24","changes":["[MCH] Fixed bugs with MCH Overheat consumption on AoE abilities (thanks FloatingGhost)"]},{"date":"11/28/24","changes":["Added some Chinese tracks (M1S-M4S, FRU before P2.5)"]},{"date":"11/27/24","changes":["Added the ability to override stacks to 0 for 1-stack resources that start present by default","Added preliminary FRU P1 tracks by Yara"]},{"date":"11/26/24","changes":["Added the ability to load marker tracks starting from a particular timestamp"]},{"date":"11/25/24","changes":["[RPR] Added initial RPR support"]},{"date":"11/24/24","changes":["[MCH] Added initial MCH support"]},{"date":"11/21/24","changes":["[SAM] Fixed a bug where Fuka haste was doubly applied","[SAM] Added GCD under Fuka in playback control"]},{"date":"11/20/24","changes":["[DNC] Added initial DNC support","[SAM] Added initial SAM support (thank you Sterling Sylva for the initial work)","Added support for skill speed in addition to spell speed"]},{"date":"11/17/24","changes":["[RDM] Fix Manafication CD (thanks )","[all casters] Fix Surecast duration: previously 10s, now 6.5s (ty erii)"]},{"date":"11/16/24","changes":["Make DET use main stat formula and default to 440","Add hyperlinks for xivgear and etro"]},{"date":"11/15/24","changes":["(thank you Yuyuka for reporting a bunch of RDM bugs)","[RDM] Added some additional warnings on unintended buff drops, overwrites, and combo breaks","[RDM] Fixed the duration of the Acceleration buff","[RDM] Fixed the MP costs of Veraero II/Verthunder II","[RDM] Fixed Manafication failing to interrupt combos","[RDM] Fixed Manafication being usable out of combat","[RDM] Fixed Enchanted Reprise clearing mana stacks","[RDM] Made Prefulgence and Vice of Thorns into button replacements"]},{"date":"11/14/24","changes":["(thank you Wan Shott for reporting a bunch of RDM bugs)","[RDM] Fixed bugs where Verfire and Grand Impact didn't grant correct mana","[RDM] Fixed a bug where it was possible to use un-enchanted Moulinet under certain incorrect conditions","mark newly-implemented jobs as in testing and display a warning message when using those jobs"]},{"date":"11/13/24","changes":["Fixed a bug where party buff potencies were not displayed","[PCT] Fixed a bug where using two hammer combos within 30s of each other caused the combo to break","[RDM] Fixed a bug where level synced RDM still received Grand Impact Ready from Acceleration","[RDM] Fixed a bug where Acceleration did not always grant a Verstone/Verfire proc","[RDM] Fixed a bug where certain role buffs were not being displayed on the hotbar","[RDM] Fixed a bug where buffs were overlapping the hotbar","[RDM] Fixed a bug where Contre Sixte's cooldown was improperly affected by traits","Removed debug and implementation notes sections (see repository wiki for implementation notes)"]},{"date":"11/12/24","changes":["Initial XIV in the Shell! Supporting patch 7.1 BLM and PCT, plus preliminary RDM"]}]`);function XA(){return La[0].date}function wN(e){const t=Tt();return l.jsxs("div",{className:"changelogGroup",children:[l.jsx("div",{children:e.date}),l.jsx("div",{children:N({en:l.jsx(l.Fragment,{children:e.changes.map((a,o)=>l.jsx("div",{className:"changelogLine",style:{color:a.substring(1,5)==="BETA"?t.warning:t.text},children:a},o))}),zh:e.changes_zh!==void 0?l.jsx(l.Fragment,{children:e.changes_zh.map((a,o)=>l.jsx("div",{className:"changelogLine",style:{color:a.substring(1,5)==="BETA"?t.warning:t.text},children:a},o))}):void 0})})]})}const Rj=`
.changelogGroup {
	margin-top: 1em;
	margin-bottom: 1em;
}

.changelogLine {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
	margin-left: 0.5em;
}
`;function Tj(){let e,t,a={};const o=C.useRef(5),[s,c]=C.useState(!1),[d,f]=C.useState(!1),h=C.useContext(Nn)==="Light",m=Tt();C.useEffect(()=>{let g=Rt("changelogLastRead"),_=Rt("changelogLastReadChangeCount");!tL&&(g===null||_===null)&&(g="5/10/25",_="1");const p=g===null||_===null||g===La[0].date&&_===La[0].changes.length.toString();if(c(p),g!==null&&_!==null){if(!p){let O=0,y=!1;for(;O<La.length-1;O++){if(g===La[O].date){_!==La[O].changes.length.toString()&&O++;break}y=y||La[O].level==="major"}f(y),o.current=O}}else St("changelogLastRead",La[0].date),St("changelogLastReadChangeCount",La[0].changes.length.toString())},[]);const R=g=>{g||(o.current=5,s||(St("changelogLastRead",La[0].date),St("changelogLastReadChangeCount",La[0].changes.length.toString())),c(!0))};if(s)e=N({en:"Changelog",zh:"",ja:""}),t="";else{const g=Tt();e=N({en:"Changelog (new updates"+(d?"!!":"")+")",zh:""+(d?"":"")+""}),t="!",d?a={color:g.warning,fontWeight:"bold"}:a={fontWeight:"bold"}}const T=l.jsx("div",{className:"clickable",children:l.jsxs("span",{style:a,children:[l.jsxs("span",{children:[t," "]}),l.jsx("span",{className:"clickableLinkLike",children:e})]})}),S=l.jsx(VN,{className:"dialogExit",style:{color:m.bgHighContrast}});return l.jsxs(l.Fragment,{children:[l.jsx("style",{children:Rj}),l.jsxs(FD,{onOpenChange:R,children:[l.jsx(zD,{render:T,nativeButton:!1}),l.jsxs(BD,{children:[l.jsx(OD,{className:"Backdrop",style:{opacity:h?.2:.7}}),l.jsxs(GD,{className:"Popup visibleScrollbar",id:"changelogPopup",style:{backgroundColor:m.background,border:"1px solid "+m.bgMediumContrast,color:m.text},children:[l.jsx(jD,{render:l.jsx("h3",{children:e})}),l.jsx(yD,{render:S,nativeButton:!1}),l.jsx(MD,{className:"Description",render:l.jsx(Sj,{hiddenStartIndex:o.current,newChanges:!s})})]})]})]})]})}function Sj(e){const t=[],a=[];for(let m=0;m<e.hiddenStartIndex;m++)t.push(wN(La[m]));for(let m=e.hiddenStartIndex;m<La.length;m++)a.push(wN(La[m]));const o=N({en:e.newChanges?"New Changes":"Recent Changes",zh:e.newChanges?"":""}),s=l.jsxs("div",{style:{marginTop:10,marginBottom:10},children:[l.jsx("span",{style:{marginTop:10,marginBottom:10},children:l.jsx("b",{children:o})}),l.jsx("div",{style:{margin:10,paddingLeft:6},children:t.map((m,R)=>l.jsx("div",{children:m},R))})]}),[c,d]=C.useState(!1),f=N({en:"Older Changes",zh:""}),h=l.jsxs("div",{style:{marginTop:10,marginBottom:10},children:[l.jsx(Es,{content:l.jsxs("span",{children:[l.jsx("span",{children:c?"- ":"+ "}),l.jsx("b",{children:f})]}),onClickFn:()=>d(!c)}),l.jsx("div",{style:{position:"relative",display:c?"block":"none"},children:l.jsxs("div",{style:{margin:10,paddingLeft:6,marginBottom:20},children:[l.jsx("div",{children:a.map((m,R)=>l.jsx("div",{children:m},R))}),l.jsxs("div",{children:["For older changelog entries before the BLM/PCT in the Shell rejoining, see",l.jsx("b",{children:"About this site/Changelog"})," on the old sites:",l.jsx("a",{target:"_blank",rel:"noreferrer",href:"https://miyehn.me/ffxiv-blm-rotation/",children:"BLM in the Shell"}),",",l.jsx("a",{target:"_blank",rel:"noreferrer",href:"https://picto.zqsz.me/",children:"PCT in the Shell"})]})]})})]});return l.jsxs("div",{children:[s,h]})}const qA=uu?"https://beta.xivintheshell.com":"https://xivintheshell.com",fi="https://github.com/xivintheshell/xivintheshell",Rs="https://bsky.app/profile/xivintheshell.com",Cu="https://blog.xivintheshell.com",Ts="https://discord.com/channels/277897135515762698/1307922201726685236",yR="913451994",ZA="https://discord.gg/thebalanceffxiv",gj=()=>l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"paragraph",children:N({en:l.jsxs(l.Fragment,{children:[l.jsx("span",{children:"This tool was initially Black Mage in the Shell, "}),l.jsxs("span",{children:["ideated by ",l.jsx("b",{children:"Eshiya (Galahad)"})," and developed by ",l.jsx("b",{children:"miyehn"})," specifically for BLM during Endwalker since around February 2022."," "]}),l.jsx("span",{children:"After Dawntrail's release, it was expanded to support other jobs and is now maintained by a small team of developers:"})]}),zh:l.jsxs(l.Fragment,{children:[l.jsx("span",{children:"miyehn202226.x"}),l.jsx("span",{children:"7.0"})]})})}),N({en:l.jsxs("ul",{children:[l.jsxs("li",{children:["Tool design and core systems: ",l.jsx("b",{children:"shanzhe"}),", ",l.jsx("b",{children:"miyehn"}),", ",l.jsx("b",{children:"Turtle"}),","," ",l.jsx("b",{children:"Akairyu"})]}),l.jsxs("li",{children:["BLM: ",l.jsx("b",{children:"shanzhe"}),", ",l.jsx("b",{children:"Akairyu"}),", ",l.jsx("b",{children:"Turtle"}),", ",l.jsx("b",{children:"miyehn"})]}),l.jsxs("li",{children:["PCT, RDM, SMN, DRK, NIN, MNK, WHM, AST, SCH: ",l.jsx("b",{children:"shanzhe"})]}),l.jsxs("li",{children:["SAM: ",l.jsx("b",{children:"Sterling"}),", ",l.jsx("b",{children:"shanzhe"})]}),l.jsxs("li",{children:["DNC, MCH, BRD, SGE: ",l.jsx("b",{children:"Akairyu"})]}),l.jsxs("li",{children:["RPR: ",l.jsx("b",{children:"Honey B. Lovely's Favorite Bee"})]}),l.jsxs("li",{children:["WAR: ",l.jsx("b",{children:"misterperson"})]}),l.jsxs("li",{children:["GNB, DRG, PLD: ",l.jsx("b",{children:"Sterling"})]}),l.jsxs("li",{children:["BLU: ",l.jsx("b",{children:""})]}),l.jsxs("li",{children:["VPR: ",l.jsx("b",{children:"shanzhe"}),", ",l.jsx("b",{children:"misterperson"})]}),l.jsxs("li",{children:["Framework for adding new jobs: ",l.jsx("b",{children:"shanzhe"})]}),l.jsxs("li",{children:["Chinese localization: ",l.jsx("b",{children:"miyehn"}),", ",l.jsx("b",{children:"Eshiya"}),", ",l.jsx("b",{children:"Yuyuka"}),", ",l.jsx("b",{children:"shanzhe"}),","," ",l.jsx("b",{children:""}),", ",l.jsx("b",{children:""}),", ",l.jsx("b",{children:""}),", ",l.jsx("b",{children:""}),", ",l.jsx("b",{children:""}),", ",l.jsx("b",{children:""})]})]}),zh:l.jsxs("ul",{children:[l.jsxs("li",{children:["",l.jsx("b",{children:"shanzhe"}),"",l.jsx("b",{children:"miyehn"}),"",l.jsx("b",{children:"Turtle"}),"",l.jsx("b",{children:"Akairyu"})]}),l.jsxs("li",{children:["",l.jsx("b",{children:"shanzhe"}),"",l.jsx("b",{children:"Akairyu"}),"",l.jsx("b",{children:"Turtle"}),"",l.jsx("b",{children:"miyehn"})]}),l.jsxs("li",{children:["",l.jsx("b",{children:"shanzhe"})]}),l.jsxs("li",{children:["",l.jsx("b",{children:"Sterling"}),"",l.jsx("b",{children:"shanzhe"})]}),l.jsxs("li",{children:["",l.jsx("b",{children:"Akairyu"})]}),l.jsxs("li",{children:["",l.jsx("b",{children:"Honey B. Lovely's Favorite Bee"})]}),l.jsxs("li",{children:["",l.jsx("b",{children:"misterperson"})]}),l.jsxs("li",{children:["",l.jsx("b",{children:"Sterling"})]}),l.jsxs("li",{children:["",l.jsx("b",{children:""})]}),l.jsxs("li",{children:["",l.jsx("b",{children:"shanzhe"}),"",l.jsx("b",{children:"misterperson"})]}),l.jsxs("li",{children:["",l.jsx("b",{children:"shanzhe"})]}),l.jsxs("li",{children:["",l.jsx("b",{children:"miyehn"}),"",l.jsx("b",{children:""}),"",l.jsx("b",{children:""}),"",l.jsx("b",{children:"shanzhe"}),"",l.jsx("b",{children:""}),"",l.jsx("b",{children:""}),"",l.jsx("b",{children:""}),"",l.jsx("b",{children:""}),"",l.jsx("b",{children:""}),"",l.jsx("b",{children:""})]})]})}),l.jsx("div",{className:"paragraph",children:N({en:"And many thanks to Yara, Spider, Santa, players in , kiyozero, czmm, and other players and groups who contributed feature suggestions, timeline markers, bug reports, etc.",zh:"YaraSpiderSantakiyozeroczmmbug"})}),N({en:l.jsxs("div",{className:"paragraph",children:["If you have questions or would like to provide feedback, you can message in"," ",l.jsx("a",{target:"_blank",href:Ts,rel:"noreferrer",children:"this channel in The Balance"})," ",'(requires the "Misc. Support" role), or join QQ group ',yR,' where you can use Chinese. In case of sending a bug report, attaching the fight record (download "fight.txt" from the bottom or name it anything else) would be very helpful.']}),zh:l.jsxs("div",{className:"paragraph",children:[l.jsxs("span",{children:["bugQQ:"," ",yR," Discord The Balance ",l.jsx("a",{target:"_blank",href:Ts,rel:"noreferrer",children:""}),' "Misc. Support" role ']}),l.jsx("span",{children:"bugbugfight.txt"})]}),ja:l.jsx("div",{className:"paragraph",children:"[outdated (ja)] Discordmiyehnellyn.waterford@gmail.com fight.txt"})})]});function Ij(e){const t={marginBottom:5},a=Tt(),o=e.job,s=d=>l.jsx(xa,{text:d}),c=s(navigator.platform.includes("Mac")?"cmd":"ctrl");return l.jsxs("div",{children:[l.jsx(Tj,{}),l.jsx(Tl,{defaultShow:!0,title:"instructions",titleNode:l.jsxs("span",{children:[N({en:"Instructions ",zh:" ",ja:" "}),l.jsx(ze,{topic:"expandable",content:N({en:"click me to expand or collapse",zh:"/",ja:""})})]}),content:l.jsxs("div",{children:[l.jsx("div",{className:"paragraph",children:l.jsx("b",{children:N({en:"General Usage",zh:"",ja:""})})}),N({en:l.jsxs("ul",{children:[l.jsxs("li",{style:t,children:["Set your stats in ",l.jsx("b",{children:"Config"})," on the right, then"," ",s("apply and reset"),"."]}),l.jsx("li",{style:t,children:"Click on a skill to use it at the selected point in the timeline. The simulation will always jump to when the last animation lock ends and the skill's cooldown becomes available."}),l.jsxs("li",{style:t,children:["Press ",s("u")," to delete the last added action (effective when not running in real-time). Use ",c,"+",s("z"),"and ",c,"+",s("y")," to undo/redo."]}),l.jsx("li",{style:t,children:"Click on a buff applied to self to remove it. Clicking on certain ground-targeted buffs like BLM's Ley Lines, DRK's Salt and Darkness, and SCH's Sacred Soil temporarily disables their effects. Clicking again re-enables them."}),l.jsx("li",{style:t,children:'Click and drag in the visual timeline or use the "Timeline Editor" tab at the bottom of the page to re-arrange skills.'})]}),zh:l.jsxs("ul",{children:[l.jsxs("li",{style:t,children:["",l.jsx("b",{children:""}),""," ",s("")," "]}),l.jsx("li",{style:t,children:"CD"}),l.jsxs("li",{style:t,children:[" ",s("u")," "," ",c,"+",s("z"),"  ",c,"+",s("y")," "]}),l.jsx("li",{style:t,children:"buffbuff"}),l.jsx("li",{style:t,children:""})]}),ja:l.jsxs("ul",{children:[l.jsxs("li",{style:t,children:["",l.jsx("b",{children:""}),"",l.jsx(xa,{text:""}),""]}),l.jsx("li",{style:t,children:""}),l.jsxs("li",{style:t,children:[l.jsx(xa,{text:"u"}),""]}),l.jsx("li",{style:t,children:""})]})}),l.jsx("div",{className:"paragraph",children:l.jsx("b",{children:N({en:"Timeline",zh:"",ja:""})})}),N({en:l.jsxs("ul",{children:[l.jsxs("li",{style:t,children:["Holding ",s("shift")," lets you scroll horizontally."]}),l.jsxs("li",{style:t,children:["Click to select/unselect a single skill on the timeline."," ",s("shift"),"+click or click/drag to select a sequence of skills."]}),l.jsxs("li",{style:t,children:["Use ",s("backspace")," or ",s("delete")," to delete the selected skill(s)."]}),l.jsxs("li",{style:t,children:["Use ",c,"+",s("c")," and ",c,"+",s("v")," to copy/paste skills."]}),l.jsx("li",{style:t,children:"Click on the timeline's ruler-like header to view historical game states. Click on somewhere else on the timeline to return to the most recent game state."})]}),zh:l.jsxs("ul",{children:[l.jsxs("li",{style:t,children:[" ",s("shift")," "]}),l.jsxs("li",{style:t,children:[" shift  ",s("shift")," ",""]}),l.jsxs("li",{style:t,children:[" ",s("backspace"),"  ",s("delete")," "]}),l.jsxs("li",{style:t,children:[" ",c,"+",s("c"),"  ",c,"+",s("v")," ",""]}),l.jsx("li",{style:t,children:""})]}),ja:l.jsxs("ul",{children:[l.jsxs("li",{style:t,children:[l.jsx(xa,{text:"shift"}),""]}),l.jsxs("li",{style:t,children:["",l.jsx(xa,{text:"shift"}),""]}),l.jsxs("li",{style:t,children:[l.jsx(xa,{text:"backspace"}),"",l.jsx(xa,{text:"delete"}),""]}),l.jsxs("li",{style:t,children:["",l.jsx("b",{style:{color:"darkorange"},children:""})," "]})]})}),N({en:l.jsxs("div",{className:"paragraph",children:[l.jsx("span",{style:{color:a.fileDownload,cursor:"pointer"},children:l.jsx("u",{children:"[these]"})})," ","are file download links. Click to download, or right click to choose save location."]}),zh:l.jsxs("div",{className:"paragraph",children:[l.jsx("span",{style:{color:a.fileDownload,cursor:"pointer"},children:l.jsx("u",{children:"[]"})})," ",""]}),ja:l.jsxs("div",{className:"paragraph",children:[l.jsx("span",{style:{color:a.fileDownload,cursor:"pointer"},children:l.jsx("u",{children:"[]"})}),""]})}),N({en:l.jsxs("div",{className:"paragraph",children:["You can save/load fight records at the bottom, under the"," ",l.jsx("b",{children:"Import/Export"})," tab. Most edits are also automatically saved in your browser cache, so it's generally okay to refresh the page and not worry about losing progress."]}),zh:l.jsxs("div",{className:"paragraph",children:[" ",l.jsx("b",{children:"/"})," ","/"]})}),N({en:l.jsxs("div",{className:"paragraph",children:["Hover over ",l.jsx(ze,{topic:"sampleTips",content:"sample tip"})," ","everywhere to see more tips."]}),zh:l.jsxs("div",{className:"paragraph",children:[" ",l.jsx(ze,{topic:"sampleTips",content:""})," ",""]}),ja:l.jsxs("div",{className:"paragraph",children:[l.jsx(ze,{topic:"sampleTips",content:""}),""]})}),N({en:l.jsxs("div",{className:"paragraph",children:["For more detailed instructions, please refer to our"," ",l.jsx("a",{href:"/manual",children:"user manual"}),"."]}),zh:l.jsxs("div",{className:"paragraph",children:["",l.jsx("a",{href:"/manual",children:""}),""]})}),l.jsx("div",{className:"paragraph",style:{marginTop:16},children:l.jsx(Tl,{title:"Troubleshoot",titleNode:N({en:l.jsx("b",{children:"troubleshoot"}),zh:l.jsx("b",{children:""}),ja:l.jsx("b",{children:""})}),content:l.jsxs(l.Fragment,{children:[N({en:l.jsxs("div",{children:[l.jsx("div",{className:"paragraph",children:"I can't guarantee that my updates are always backward compatible. If your fight record files aren't loading properly but you don't understand why, contact me and I'll try my best to help."}),l.jsxs("div",{className:"paragraph",children:["If the browser cache is somehow messed up (likely due to invalid game states), this is how to reset it:",l.jsx("br",{}),"Enter this tool from"," ",l.jsx("b",{children:qA+"?{command}"})," replacing"," ",l.jsx("b",{children:"{command}"})," with one of the following:",l.jsxs("ul",{children:[l.jsxs("li",{style:t,children:[l.jsx("b",{children:"resetResourceOverrides"}),": delete all resource overrides and all actions on the current timeline."]}),l.jsxs("li",{style:t,children:[l.jsx("b",{children:"resetAll"}),": delete all browser-cached settings."]})]})]})]}),zh:l.jsxs("div",{children:[l.jsx("div",{className:"paragraph",children:""}),l.jsxs("div",{className:"paragraph",children:["",l.jsx("br",{}),"",l.jsx("b",{children:qA+"?{command}"}),"",l.jsx("b",{children:"{command}"}),"",l.jsxs("ul",{children:[l.jsxs("li",{style:t,children:[l.jsx("b",{children:"resetResourceOverrides"}),": "]}),l.jsxs("li",{style:t,children:[l.jsx("b",{children:"resetAll"}),": "]})]})]})]}),ja:l.jsxs("div",{children:[l.jsx("div",{className:"paragraph",children:""}),l.jsxs("div",{className:"paragraph",children:["",l.jsx("br",{}),l.jsx("b",{children:qA+"?{command}"})," ",l.jsx("b",{children:"{command}"})," ","",l.jsxs("ul",{children:[l.jsxs("li",{style:t,children:[l.jsx("b",{children:"resetResourceOverrides"}),": "]}),l.jsxs("li",{style:t,children:[l.jsx("b",{children:"resetAll"}),": "]})]})]})]})}),l.jsxs("div",{children:[N({en:"Or just: ",zh:""}),l.jsx("button",{className:"dangerButton",onClick:()=>{XN(),window.location.reload()},children:N({en:"[DANGER!] clear browser cache and reload",zh:"[] ",ja:"[] "})})]})]})})})]})}),l.jsx(Tl,{defaultShow:!1,title:"About this tool",titleNode:N({en:"About this tool",zh:"",ja:""}),content:l.jsxs("div",{children:[l.jsx("div",{className:"paragraph",children:N({en:"This is a FFXIV simulator & rotation planner.",zh:"FF14/",ja:"FF14"})}),gj(),l.jsx("div",{className:"paragraph",children:N({en:"Some links:",zh:"",ja:""})}),N({en:l.jsxs("ul",{children:[l.jsx("li",{children:l.jsx("a",{href:fi,children:"Github repository"})}),l.jsxs("li",{children:[l.jsx("a",{href:Rs,children:"Bluesky account"})," and our"," ",l.jsx("a",{href:Cu,children:"developer blog"})]}),l.jsxs("li",{children:[l.jsx("a",{href:"https://xivintheshell.github.io/legacy/",children:"XIV in the Shell (Legacy)"}),": a snapshot of this tool at the end of the previous major game patch (currently 7.25)."]}),l.jsxs("li",{children:[l.jsx("a",{href:"https://miyehn.me/ffxiv-blm-rotation-endwalker/",children:"Black Mage in the Shell (Endwalker)"}),": a snapshot of this tool at the end of Endwalker. It also contains some notable fight plans from Endwalker, as memoir."]}),l.jsxs("li",{children:[l.jsx("a",{href:"https://spide-r.github.io/ffxiv-blm-rotation/",children:"Black Mage in the Bozjan Shell"}),": a variation for Save the Queens areas, created by"," ",l.jsx("b",{children:"A'zhek Silvaire @ Zalera"})]}),l.jsx("li",{children:l.jsx("a",{href:"https://na.finalfantasyxiv.com/jobguide/battle/",children:"Official FFXIV job guides"})}),l.jsxs("li",{children:["The Balance's community"," ",l.jsx("a",{href:"https://www.thebalanceffxiv.com/",children:"job guides"})," and"," ",l.jsx("a",{href:ZA,children:"Discord"})]})]}),zh:l.jsxs("ul",{children:[l.jsx("li",{children:l.jsx("a",{href:fi,children:"Github"})}),l.jsxs("li",{children:[l.jsx("a",{href:Rs,children:""}),"",l.jsx("a",{href:Cu,children:""}),""]}),l.jsxs("li",{children:[l.jsx("a",{href:"https://xivintheshell.github.io/legacy/",children:""}),"FF147.25"]}),l.jsxs("li",{children:[l.jsx("a",{href:"https://miyehn.me/ffxiv-blm-rotation-endwalker/",children:"6.x"}),"6.x"]}),l.jsxs("li",{children:[l.jsx("a",{href:"https://spide-r.github.io/ffxiv-blm-rotation/",children:"Black Mage in the Bozjan Shell"}),": /"," ",l.jsx("b",{children:"A'zhek Silvaire @ Zalera"})]}),l.jsx("li",{children:l.jsx("a",{href:"https://na.finalfantasyxiv.com/jobguide/battle/",children:""})}),l.jsxs("li",{children:["The Balance",l.jsxs("a",{href:"https://www.thebalanceffxiv.com/",children:[" ",""]})," ",l.jsx("a",{href:ZA,children:"Discord"})]})]}),ja:l.jsx("ul",{children:l.jsxs(l.Fragment,{children:[l.jsx("li",{children:l.jsx("a",{href:fi,children:"Github repository"})}),l.jsxs("li",{children:[l.jsx("a",{href:"https://spide-r.github.io/ffxiv-blm-rotation/",children:"Black Mage in the Bozjan Shell"}),": ",l.jsx("b",{children:"A'zhek Silvaire @ Zalera"})]}),l.jsx("li",{children:l.jsx("a",{href:"https://na.finalfantasyxiv.com/jobguide/blackmage/",children:"Official FFXIV black mage job guide"})}),l.jsxs("li",{children:[l.jsxs("a",{target:"_blank",href:ZA,rel:"noreferrer",children:[o," resources channel on The Balance"]})," ","Discord"," "]})]})})})]})})]})}function _j(){const e=C.useContext(Nn),t=Sl(e,"text");return l.jsxs("div",{style:{display:"inline-block",fontSize:16},children:[l.jsx("style",{children:`
		.linkOption {
			display: inline-block;
			cursor: pointer;
			vertical-align: top;
			margin-top: 1px;
		}
		.linkOption:hover {
			border-bottom: 1px solid;
		}
		`}),l.jsxs("div",{style:{display:"inline-block"},children:[l.jsx(Jl.Provider,{value:{color:t,className:"linkOption"},children:l.jsx("a",{href:Rs,title:N({en:"Bluesky",zh:""}),children:l.jsx(VM,{})})}),"|",l.jsx(Jl.Provider,{value:{color:t,className:"linkOption"},children:l.jsx("a",{href:fi,title:N({en:"GitHub",zh:"GitHub"}),children:l.jsx(WM,{})})}),"|",l.jsx(Jl.Provider,{value:{color:t,className:"linkOption"},children:l.jsx("a",{href:Cu,title:N({en:"Blog",zh:""}),children:l.jsx(XM,{})})}),"|",l.jsx(Jl.Provider,{value:{color:t,className:"linkOption"},children:l.jsx("a",{href:"/manual",title:N({en:"User Manual",zh:""}),children:l.jsx(qM,{})})})]})]})}var pj={};let df=e=>{},hf=e=>{},ff=e=>{};function Nj(e){if(e==="resetAll")XN();else if(e==="resetResourceOverrides"){const t=Rt("gameRecord");for(let a=0;a<Oi;a++){let o=Rt("gameRecord"+a.toString());if(a===0&&o===null&&t!==null&&(o=t),o!==null){const s=JSON.parse(o);console.log(s),s.config&&(s.config.initialResourceOverrides=[]),s.actions=[],St("gameRecord"+a.toString(),JSON.stringify(s))}}}else e==="code"?console.log("FFLogs authorization triggered."):e==="resetFFLogsAuth"?(console.log("Reset FFLogs PKCE authorization state and session token."),window.sessionStorage.removeItem("fflogsAuthToken"),vh()):e!==void 0&&console.log("unrecognized command '"+e+"'")}function Cj(e){return l.jsx("div",{style:{flex:3,height:e.height,marginLeft:6,position:"relative",verticalAlign:"top"},children:l.jsx(Wb,{uniqueName:"mainConfig",content:[{titleNode:N({en:"Config",zh:""}),contentNode:l.jsx(k2,{})},{titleNode:N({en:"Control",zh:""}),contentNode:l.jsx(M2,{})}],collapsible:!1,scrollable:!0,height:e.height,defaultSelectedIndex:0})})}function GN(e){const t=e.color??Tt().accent;return l.jsx("div",{style:{display:e.hidden===!0?"none":"block",color:t,border:"1px solid "+t,borderRadius:4,padding:"10px 10px 0 10px"},children:e.children})}const BN=uu?"[BETA] ":"";class bj extends Ha.Component{controlRegionRef;gameplayKeyCapture;setColorTheme;state;constructor(t){super(t),Nj(t.command),this.state={job:I.getActiveJob(),hasFocus:!1,historical:!1,realTime:!1,controlRegionHeight:0,colorTheme:mf()},this.controlRegionRef=Ha.createRef(),this.gameplayKeyCapture=a=>{I.handleKeyboardEvent(a)},df=a=>{this.setState({job:a});const o=document.querySelector("link[rel~='icon']");o&&(uu?o.href="/favicons/beta.ico":a in dt?o.href="/favicons/"+a.toString().toLocaleLowerCase()+".ico":o.href=pj.PUBLIC_URL+"/favicon.ico");const s=document.getElementById("pageTitle");s&&(s.text=`${BN}XIV in the Shell (${a})`)},hf=a=>{this.setState({realTime:a})},ff=a=>{this.setState({historical:a})},this.setColorTheme=a=>{a!==this.state.colorTheme&&(I.updateAllDisplay(),this.setState({colorTheme:a}),St("colorTheme",a))}}componentDidMount(){I.tryAutoLoad(),I.updateAllDisplay(),this.controlRegionRef.current&&new ResizeObserver(()=>{const t=this.controlRegionRef.current?.clientHeight??0;this.setState({controlRegionHeight:t})}).observe(this.controlRegionRef.current)}componentWillUnmount(){df=t=>{},hf=t=>{},ff=t=>{}}render(){const t=ha(this.state.colorTheme),a={height:"100%",accentColor:t.accent,fontFamily:hi,fontSize:13,color:t.text,backgroundColor:t.background,display:"flex",flexDirection:"column"};let o;this.state.historical?o="2px solid "+t.historical:this.state.hasFocus?this.state.realTime?o="2px solid "+t.realTime:o="2px solid "+t.accent:o="1px solid "+t.bgMediumContrast;const s={marginBottom:"5px"},c=l.jsx("div",{style:{flex:7,display:"inline-block",position:"relative"},children:l.jsxs("div",{onFocus:()=>{this.setState({hasFocus:!0})},onBlur:()=>{this.setState({hasFocus:!1})},style:{display:"inline-block",padding:8,outline:o},tabIndex:-1,ref:this.controlRegionRef,children:[l.jsx(Cw,{}),l.jsx(RP,{})]})}),d=window.innerWidth>1024;return l.jsxs("div",{style:{position:"fixed",top:0,bottom:0,left:0,right:0,outline:"none"},tabIndex:-1,onKeyDown:this.gameplayKeyCapture,children:[l.jsx("style",{children:`
				@supports selector(::-webkit-scrollbar) {
					.visibleScrollbar::-webkit-scrollbar {
						appearance: none;
						background-color: ${t.bgLowContrast};
						height: 8px;
						width: 5px;
					}
					.visibleScrollbar::-webkit-scrollbar-thumb {
						background-color: ${t.bgHighContrast};
					}
					.invisibleScrollbar::-webkit-scrollbar {
						appearance: none;
						background-color: clear;
						height: 8px;
						width: 5px;
					}
					.invisibleScrollbar::-webkit-scrollbar-thumb {
						background-color: ${t.bgHighContrast};
					}
				}
				@supports not selector(::-webkit-scrollbar) {
					.visibleScrollbar {
						scrollbar-color: ${t.bgHighContrast} ${t.bgLowContrast};
						scrollbar-width: auto;
					}
					.invisibleScrollbar {
						scrollbar-width: none;
					}
				}
				a {
					color: ${t.accent};
				}
				b, h1, h2, h3, h4 {
					color: ${t.emphasis};
				}
				p {
					margin-block-start: 10px;
					margin-block-end: 10px;
				}
				p:first-child {
					margin-block-start: 0px;
				}
				::selection {
					background: rgba(147, 112, 219, 0.4);
				}
				option, select {
					color: ${t.text};
					background-color: ${t.background};
				}
				button, input[type="submit"], ::-webkit-file-upload-button {
					color: ${t.text};
					background-color: ${t.bgLowContrast};
					border: 1px solid ${t.bgHighContrast};
				}
				input[type="radio"] {
					appearance: none;
					width: 1em;
					height: 1em;
					border: 1px solid ${t.bgHighContrast};
					border-radius: 50%;
					background-clip: content-box;
					padding: 2px;
				}
				input[type="radio"]:checked {
					background-color: ${t.accent};
				}
				input[type="checkbox"] {
					appearance: none;
					width: 1em;
					height: 1em;
					border: 1px solid ${t.bgHighContrast};
					border-radius: 1px;
					background-clip: content-box;
					padding: 2px;
				}
				input[type="checkbox"]:checked:after {
					content: '\\2714';
					color: ${t.accent};
					position: absolute;
					font-size: 22px;
					top: -6px;
					left: -2px;
				}
				.checkbox-star:before {
					content: "\\2605";
					color: ${t.timeline.aggroMark};
					position: absolute;
					font-size: 22px;
					top: -7px;
					left: -3px;
					visibility: visible;
				}
				input[type="range"] {
					appearance: none;
					background-color: transparent;
					border: 1px solid ${t.bgHighContrast};
					vertical-align: middle;
					height: 0.9em;
					border-radius: 0.45em;
					overflow: hidden;
					padding: 0.05em;
				}
				input[type="range"]::-webkit-slider-thumb {
					appearance: none;
					background-color: ${t.accent};
					width: 0.8em;
					height: 0.8em;
					border-radius: 0.4em;
				}
				.help-tooltip {
					color: ${t.text};
					background-color: ${t.tipBackground};
					opacity: 0.98;
					max-width: 300px;
					outline: 1px solid ${t.bgHighContrast};
					transition: none;
					font-size: 100%;
					z-index: 10;
				}
				button:disabled {
					background-color: ${t.background};
				}
			`}),l.jsx(Nn.Provider,{value:this.state.colorTheme,children:l.jsxs("div",{style:a,id:"globalHelpTooltipAnchor",children:[l.jsx("div",{style:{flex:1,overflowY:"scroll",overscrollBehaviorY:"contain"},children:l.jsxs("div",{style:{position:"relative",maxWidth:1060,margin:"0 auto",marginTop:40,display:"grid"},children:[l.jsxs("div",{style:{position:"absolute",display:"flex",flexWrap:"wrap",justifySelf:"right",justifyContent:"space-between",alignItems:"flex-start",gap:"1.4em"},children:[d&&l.jsx(_j,{}),l.jsx(oH,{}),l.jsx(eH,{setColorTheme:this.setColorTheme})]}),l.jsxs("div",{children:[l.jsxs("h3",{style:{marginTop:0,marginBottom:6},children:[BN,"XIV in the Shell"]}),N({en:l.jsxs("div",{style:{marginBottom:16},children:["Last updated: ",XA()," (see ",l.jsx("b",{children:"Changelog"}),")"]}),zh:l.jsxs("div",{style:{marginBottom:16},children:["",XA(),"",l.jsx("b",{children:""}),""]}),ja:l.jsxs("div",{style:{marginBottom:16},children:["",tH(XA()),"",l.jsx("b",{children:""}),"",l.jsx("a",{href:"https://coda.io/d/_d-N3WFoMZ8e/Black-Mage-in-the-Shell_suRLF",children:""}),""]})}),eL()?l.jsx("div",{style:{margin:"10px 0",padding:"10px",border:"1px solid "+t.warning,color:t.warning,borderRadius:4},children:N({en:l.jsxs("div",{children:["NOTE: Your browser cache contains data from BLM in the Shell before it's updated for Dawntrail. Visit the Endwalker archive at"," ",l.jsx("a",{style:{color:t.warning},href:"https://miyehn.me/ffxiv-blm-rotation-endwalker",children:"miyehn.me/ffxiv-blm-rotation-endwalker"})," ","to access and automatically re-save it. Once you do that, this notice will also go away."]}),zh:l.jsxs("div",{children:["7.06.0",l.jsx("a",{style:{color:t.warning},href:"https://miyehn.me/ffxiv-blm-rotation-endwalker",children:"miyehn.me/ffxiv-blm-rotation-endwalker"}),""]})})}):void 0,uu&&l.jsx(GN,{color:t.warning,children:N({en:l.jsxs("div",{style:{marginBottom:"10px"},children:[l.jsx("span",{children:l.jsx("b",{style:{color:t.warning},children:"You're currently using the BETA version of XIV in the Shell."})}),l.jsxs("ul",{children:[l.jsx("li",{style:s,children:"Things may break in unexpected ways at any time. Use at your own peril, and make sure to export in-progress files frequently."}),l.jsx("li",{style:s,children:"Application data is not shared with the main site. Anything you do here stays here. Files created on the BETA site may not work on the main site, but files made on the main site should be importable here (if they are not, please report this as a bug)."}),l.jsx("li",{style:s,children:"If the page becomes un-loadable, please contact us and tell us what your last actions on the site were, and we can help you debug what went wrong. You can also try resetting your browser's localStorage data for beta.xivintheshell.com."}),l.jsxs("li",{style:s,children:["To report an issue, you can contact us on Discord in The Balance (",l.jsx("a",{href:Ts,children:"#xiv_in_the_shell_support"}),"), or file an issue on"," ",l.jsx("a",{href:"https://github.com/xivintheshell/xivintheshell/issues",children:"our GitHub"}),"."]})]})]}),zh:l.jsxs("div",{style:{marginBottom:"10px"},children:[l.jsx("span",{children:l.jsx("b",{style:{color:t.warning},children:"XIV in the ShellBETA"})}),l.jsxs("ul",{children:[l.jsx("li",{style:s,children:""}),l.jsx("li",{style:s,children:"BETABETAbug"}),l.jsx("li",{style:s,children:"beta.xivintheshell.comlocalStorage"}),l.jsxs("li",{style:s,children:["miyehnQQ870340705",l.jsx("a",{href:"https://github.com/xivintheshell/xivintheshell/issues",children:"GitHub"}),"issue"]})]})]})})}),uu&&l.jsx("div",{style:{margin:"10px"}}),l.jsx(Ij,{job:this.state.job}),l.jsx(Tl,{defaultShow:!0,title:"7-2-user-survey",titleNode:l.jsx("span",{children:N({en:"7.2 User Survey",zh:"7.2"})}),content:l.jsx(GN,{children:N({en:l.jsx(l.Fragment,{children:l.jsxs("p",{children:["Help us improve XIV in the Shell! Please take our user survey:"," ",l.jsx("b",{children:l.jsx("a",{target:"_blank",rel:"noreferrer",href:"https://forms.gle/eKVygxxZVd894323A",children:"https://forms.gle/eKVygxxZVd894323A"})})]})}),zh:l.jsx(l.Fragment,{children:l.jsxs("p",{children:[""," ",l.jsx("b",{children:l.jsx("a",{target:"_blank",rel:"noreferrer",href:"https://www.wjx.cn/vm/mQ1gV2b.aspx",children:"https://www.wjx.cn/vm/mQ1gV2b.aspx"})})]})})})})})]}),l.jsxs("div",{style:{display:"flex",flexDirection:"row",position:"relative",marginBottom:"20px"},children:[c,l.jsx(Cj,{height:this.state.controlRegionHeight})]}),l.jsx(gP,{}),l.jsx("hr",{style:{margin:"30px 0px",border:"none",borderTop:"1px solid "+t.bgHighContrast}}),l.jsx(q2,{})]})}),l.jsx(Aj,{})]})})]})}}const Oj=C.forwardRef(function(t,a){const{className:o,render:s,orientation:c="horizontal",...d}=t,f=C.useMemo(()=>({orientation:c}),[c]);return to("div",t,{state:f,ref:a,props:[{role:"separator","aria-orientation":c},d]})}),Dj="https://support.na.square-enix.com/rule.php?id=5382&la=1&tag=authc",Jf="https://www.thebalanceffxiv.com/",eE="https://www.icy-veins.com/ffxiv/",$D="https://www.fflogs.com/",yj="https://blog.xivintheshell.com/posts/what-is-xiv-in-the-shell/",JD="https://etro.gg/",lS="https://xivgear.app/",ic="https://github.com/Amarantine-xiv/Amas-FF14-Combat-Sim_source",ey="https://xivanalysis.com/",ty="https://xivraider.com/",vj="https://na.finalfantasyxiv.com/jobguide/battle/",Mj="https://ffxiv.consolegameswiki.com/wiki/FF14_Wiki",ny="http://xivapi.com",ay="https://arcanedisgea.github.io/xiv-id/",iy="https://www.akhmorning.com/allagan-studies/",oy="https://discord.com/channels/277897135515762698/1199477934075953242",ly="https://docs.google.com/document/d/1c1a16tUifUN09KoCgNx1EyOsk1HLYGm-b-q7lz6W8C4/edit",sy="https://docs.google.com/document/d/1c1a16tUifUN09KoCgNx1EyOsk1HLYGm-b-q7lz6W8C4/edit",ry="https://docs.google.com/document/d/13ggP7PoOs-ic6ve_Huo4A2-3Mx7ozeRPXzC7N_edgHU/edit#heading=h.d8b4r5is0qbm",cy="https://www.bilibili.com/read/cv29822181/?jump_opus=1",uy="https://docs.google.com/document/d/1zxUd7vFfs24cGteOeCnEsoCzfDxIvKNROIvDUqG-6no/edit",tE="https://github.com/Tischel/BLMInTheShell",dy="https://github.com/xivintheshell/xivintheshell/blob/main/scripts/csv2track.py",hy="https://github.com/xivintheshell/xivintheshell/wiki/Creating-timeline-tracks",fy="https://colab.research.google.com/drive/1XiVqn-W5teCaXGMtLoq3Zqx5zrk50Fh3?usp=sharing",Ey="https://github.com/leifengsang/XivInTheShellMarkerGen",Lj="https://en.wikipedia.org/wiki/Random_seed",xj="https://www.bilibili.com/video/BV1SGvZBAEsm/",Hj="https://actff1.web.sdo.com/project/20190917jobguid/index.html#/index",kj="https://ff14.huijiwiki.com/wiki/%E9%A6%96%E9%A1%B5",Uj="https://bbs.nga.cn/read.php?tid=19736925",Pj="https://asvel.github.io/ffxiv-gearing/",wj=mf(),vR=()=>l.jsx(Oj,{orientation:"vertical",style:{width:"1px",backgroundColor:ha(wj).text}}),my={marginLeft:"2em",marginTop:"-0.2em",marginBottom:"1em",display:"flex",gap:"0.5rem"};function Gj(){return l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:my,children:[l.jsx("div",{children:l.jsx("i",{children:"by Shanzhe Qi @ Seraph"})}),l.jsx(vR,{}),l.jsx("div",{children:"last updated 7 February 2026"})]}),l.jsxs("p",{className:"no-indent",children:["Welcome to ",l.jsx("i",{children:"XIV in the Shell"}),", a rotation planner tool for ",l.jsx("i",{children:"Final Fantasy XIV"}),"! This page walks you through how to make the most of our timeline creation and manipulation features to improve your gameplay. Use the navigation bar on the right to find help for a specific feature."]}),l.jsxs("p",{children:["This manual only covers how to use this tool for planning, not how to choose what abilities to use in your rotation. For resources for learning and optimizing your job, please refer to other sites like ",l.jsx("a",{href:Jf,children:"The Balance"})," and"," ",l.jsx("a",{href:eE,children:"Icy Veins"}),". Further information about jobs and FFXIV's combat system can be found in the ",l.jsx("a",{href:"#additional-resources",children:"Additional Resources"})," ","section of this page."]}),l.jsxs("p",{children:["For feedback or questions about this page, please reach out to us on"," ",l.jsx("a",{href:fi,children:"GitHub"})," on Discord through our"," ",l.jsx("a",{href:Ts,children:"support channel in The Balance"}),", or on"," ",l.jsx("a",{href:Rs,children:"Bluesky"}),"."]}),l.jsxs("p",{children:["This manual page can always be found at ",l.jsx("a",{href:"/manual",children:"xivintheshell.com/manual"})," ","or ",l.jsx("a",{href:"/manual_en",children:"xivintheshell.com/manual_en"}),"."]}),l.jsxs("p",{children:["FINAL FANTASY is a registered trademark of Square Enix Holdings Co., Ltd. Game ability and status images are  SQUARE ENIX, and used for non-commercial purposes in compliance with the ",l.jsx("a",{href:Dj,children:"Final Fantasy XIV Materials Usage License"}),"."]})]})}function Bj(){return l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:my,children:[l.jsx("i",{children:"Shanzhe Qi @ Seraph"})," ",l.jsx(vR,{})," ",l.jsx("i",{children:"ai"})," ",l.jsx(vR,{})," ","2026119"]}),l.jsxs("p",{children:[" XIV in the ShellXIV",l.jsx("a",{href:xj,children:""}),""]}),l.jsxs("p",{children:[""," ",l.jsx("a",{href:Jf,children:"The Balance"}),"",l.jsx("a",{href:eE,children:"Icy Veins"})," ","XIV"]}),l.jsxs("p",{children:["",l.jsx("a",{href:fi,children:"GitHub"})," XIV in the ShellQQ",yR,"",l.jsx("a",{href:Ts,children:"The Balance Discord"}),""," ",l.jsx("a",{href:Rs,children:"Bluesky"}),""]}),l.jsxs("p",{children:["",l.jsx("a",{href:"/manual",children:"xivintheshell.com/manual"}),"",l.jsx("a",{href:"/manual_zh",children:"xivintheshell.com/manual_zh"}),""]}),l.jsx("p",{children:"FINAL FANTASY  Square Enix Holdings Co., Ltd.  SQUARE ENIXXIV "})]})}const be=e=>l.jsx(xa,{text:e});function Fj(){return l.jsxs(l.Fragment,{children:[l.jsx(_i,{id:"overview",label:l.jsx(l.Fragment,{children:"Overview"})}),l.jsx(He,{id:"what-is-xivintheshell",label:l.jsxs(l.Fragment,{children:["What is ",l.jsx("i",{children:"XIV in the Shell"}),"?"]})}),l.jsxs("p",{children:["I answered this question in more detail in our ",l.jsx("a",{href:yj,children:"first blog post"}),", but Ive copied the important parts here."]}),l.jsx("p",{children:l.jsxs("b",{children:[l.jsx("i",{children:"XIV in the Shell"})," (",l.jsx("a",{href:"/",children:"https://xivintheshell.com"}),") is a web-based FFXIV rotation planner and job simulator."]})}),l.jsx("p",{children:"Thats it! Most high-end raids in FFXIV have very predictable timelines, and the mechanics of each fight force players to react differently to maintain a coherent rotation. Melees may need to disengage, casters may need to save resources for extended movement, and parties may adjust buff window timings in unconventional ways. Our tool lets you compare a DPS timeline against a fight's mechanic timeline and party buff windows, and makes precise planning accessible in a way that traditional spreadsheet-based tools do not."}),l.jsx("p",{children:"Making rotational adaptations on the fly is a valuable skill for raiders to have, but planning while outside instance is useful all the same. Even outside hardcore optimization environments, there are a myriad of reasons to create rotation plans for a fight:"}),l.jsxs("ul",{children:[l.jsx("li",{children:"Theorycrafting sequences for your job"}),l.jsx("li",{children:"Getting more comfortable in fights you haven't yet cleared"}),l.jsx("li",{children:"Getting more comfortable in fights you've already cleared"}),l.jsx("li",{children:"Improving your understanding of a job's fundamentals"}),l.jsx("li",{children:"Moving the colored number on your FFLogs profile up"})]}),l.jsx("p",{children:"Rotation planning can also just be plain fun for its own sake. The interaction between fight mechanics and job kits is a challenging puzzle to solve, and discovering creative solutions then executing them well in-game is a uniquely rewarding experience."}),l.jsx(He,{id:"features",label:"Features"}),l.jsxs("p",{children:[l.jsx("i",{children:"XIV in the Shell"})," provides the following capabilities:"]}),l.jsxs("ul",{children:[l.jsx("li",{children:"Rotation visualization in both a graphical timeline and spreadsheet-like table"}),l.jsx("li",{children:"Full simulation of cooldowns, buffs, MP, and job gauge resources"}),l.jsx("li",{children:"Customizable starting resources for planning specific phases"}),l.jsxs("li",{children:["Combat stat configuration and import from ",l.jsx("a",{href:JD,children:"etro"}),"/",l.jsx("a",{href:lS,children:"XivGear"})]}),l.jsx("li",{children:"Rotation import from FFLogs"}),l.jsx("li",{children:"Preset fight timelines for most high-end difficulty encounters"}),l.jsx("li",{children:"Rotations and fight markers shareable as text files"}),l.jsx("li",{children:"Customizable buff timings and timeline markers"}),l.jsx("li",{children:"Customizable macros for sequences of multiple skills"}),l.jsx("li",{children:"Potency calculation with party buffs and potion usage"}),l.jsxs("li",{children:["Compatibility with ",l.jsx("a",{href:ic,children:"Amarantine's combat simulator"})," for more advanced DPS simulation"]}),l.jsx("li",{children:"Import/export from plain text, spreadsheets, and Discord emotes"})]}),l.jsx(He,{id:"quickstart",label:"Quick Start"}),l.jsx("p",{children:"To get started with making a timeline:"}),l.jsxs("ol",{children:[l.jsx("li",{children:'Choose your job and combat stats from the "config" panel to the right of the skill hotbar, then click "apply and reset."'}),l.jsx("p",{children:'[optional] Load fight markers for a specific encounter from the "Timeline markers" tab at the bottom of the page.'}),l.jsx("li",{children:"Input skills by clicking on their icon in the skill hotbar. The simulation will automatically advance to the end of its animation lock or cast time. Clicking a skill will attempt to use it as soon as its cooldown and the current animation lock/GCD timer allows."}),l.jsxs("li",{children:["Rearrange skills by clicking/dragging in the graphical timeline, and hit"," ",be("Delete")," to remove selected skills."]}),l.jsx("p",{children:"For more details on how to use or configure specific features, please refer to the corresponding section in the navigation bar on the right."})]}),l.jsx(He,{id:"shortcuts",label:"Keyboard Shortcuts"}),l.jsxs("p",{children:["The following keyboard shortcuts are available anywhere on the site, except when editing a text/number input field (replace ",be("ctrl")," with ",be("cmd")," for Mac users):"]}),l.jsxs("ul",{children:[l.jsxs("li",{children:[be("u")," Delete the last action in the active timeline."]}),l.jsxs("li",{children:[be("ctrl"),"+",be("z")," Undo last action."]}),l.jsxs("li",{children:[be("ctrl"),"+",be("y")," OR ",be("ctrl"),"+",be("shift"),"+",be("z")," Redo last action."]}),l.jsxs("li",{children:[be("ctrl"),"+",be("c")," Copy selected skills to clipboard. The format can be changed in the Settings tab at the bottom of the page."]}),l.jsxs("li",{children:[be("ctrl"),"+",be("x")," Cut selected skills to clipboard."]}),l.jsxs("li",{children:[be("ctrl"),"+",be("v")," Paste skills from the clipboard."]})]}),l.jsxs("ul",{children:[l.jsx("p",{children:'The following shortcuts are available when interacting with the graphical timeline and the "Timeline editor" table:'}),l.jsxs("li",{children:[be("Backspace")," OR ",be("Delete")," Delete the selected skills from the timeline. Subsequent actions are rearranged to be used as soon as possible."]}),l.jsxs("li",{children:[be("")," Select the previous action in the timeline. If no actions are currently selected, select the last action in the timeline."]}),l.jsxs("li",{children:[be("")," Select the next action in the timeline. If no actions are currently selected, select the first action in the timeline."]}),l.jsxs("li",{children:[be("Home")," Select the first action in the timeline."]}),l.jsxs("li",{children:[be("End")," Select the last action in the timeline."]}),l.jsxs("li",{children:[be("Shift"),"+",be("")," / ",be("Shift"),"+",be("")," / ",be("Shift"),"+",be("Home")," /"," ",be("Shift"),"+",be("End")," Extend the selection window to the previous/next/first/last action."]}),l.jsxs("li",{children:[be("Escape")," Deselect all actions."]}),l.jsxs("li",{children:[be("ctrl"),"+",be("a")," Select all actions."]})]}),l.jsx(He,{id:"update-policy",label:"Update Policy"}),l.jsxs("p",{children:[l.jsx("i",{children:"XIV in the Shell"})," frequently receives updates to improve user experience and accuracy of its simulations. We make our best effort to ensure our updates do not break saved timelines whenever possible, but cannot always guarantee this, whether due to developer error or in-game changes. Please export your timelines often to reduce the risk of losing work."]}),l.jsxs("p",{children:["Potencies and job mechanics in ",l.jsx("i",{children:"XIV in the Shell"})," reflect those in the latest global server version of FFXIV. We try to make updates available within a few days of each patch release, but may be slower depending on the developers' availability."]}),l.jsx(He,{id:"technical-details",label:"Quick Technical Details"}),l.jsxs("p",{children:[l.jsx("i",{children:"XIV in the Shell"})," is a client-only single page application. All data is stored within your web browser's localStorage module, so clearing your browsing data for"," ",l.jsx("a",{href:"/",children:"xivintheshell.com"})," will permanently delete all of your saved rotations and markers. This also means that if you lose any data, we (the developers) are unable to recover it for you, because it never leaves the confines of your browser unless you explicitly send us your exported files through some other platform. It is highly unlikely that we will ever maintain a server of any kind, so as to keep development/maintenance costs minimal and reduce the likelihood of site downtime."]}),l.jsxs("p",{children:["This site is made in Typescript with Vite + React, and hosted with GitHub Pages. You can find our source code on GitHub at ",l.jsx("a",{href:fi,children:fi}),". Contributions, bug reports, and feature requests are welcome!"]}),l.jsx(He,{id:"troubleshooting",label:"Troubleshooting"}),l.jsx("p",{children:"In very rare cases, you may encounter a bug that completely breaks the website, causing it to render nothing but a white screen. If this happens, please raise a bug report with us on GitHub or Discord, and describe the most recent actions you took before the site crashed."}),l.jsx("p",{children:"If you're unable to communicate with us, you may attempt to fix the issue yourself by visiting one of the following links:"}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"xivintheshell.com?resetResourceOverrides"})," Deletes all resource overrides and clears all actions in your saved timelines."]}),l.jsxs("li",{children:[l.jsx("b",{children:"xivintheshell.com?resetAll"})," Deletes all your saved data in"," ",l.jsx("i",{children:"XIV in the Shell"}),"."]}),l.jsxs("li",{children:[l.jsx("b",{children:"xivintheshell.com?resetFFLogsAuth"})," Resets data related to FFLogs authorization."]})]}),l.jsx("p",{children:"If all these steps fail, please clear your browsing data for xivintheshell.com through your web browser's settings. Once again: remember to frequently download and save your timelines, should the worst come to pass!"})]})}function jj(){return l.jsxs(l.Fragment,{children:[l.jsx(_i,{id:"overview",label:l.jsx(l.Fragment,{children:""})}),l.jsx(He,{id:"what-is-xivintheshell",label:l.jsx(l.Fragment,{children:"XIV in the Shell "})}),l.jsxs("p",{children:["XIV in the Shell",l.jsx("a",{href:"/",children:"https://xivintheshell.com"}),"XIV"]}),l.jsx("p",{children:"XIV"}),l.jsx("p",{children:""}),l.jsxs("ul",{children:[l.jsx("li",{children:""}),l.jsx("li",{children:""}),l.jsx("li",{children:""}),l.jsx("li",{children:""}),l.jsx("li",{children:" FFLogs "})]}),l.jsx("p",{children:""}),l.jsx(He,{id:"features",label:""}),l.jsx("p",{children:"XIV in the Shell "}),l.jsxs("ul",{children:[l.jsx("li",{children:""}),l.jsx("li",{children:"CDBuff"}),l.jsx("li",{children:""}),l.jsxs("li",{children:[" ",l.jsx("a",{href:JD,children:"etro"}),"/",l.jsx("a",{href:lS,children:"XivGear"})," ",""]}),l.jsx("li",{children:" FFLogs "}),l.jsx("li",{children:""}),l.jsx("li",{children:""}),l.jsx("li",{children:""}),l.jsx("li",{children:""}),l.jsx("li",{children:""}),l.jsxs("li",{children:["",l.jsx("a",{href:ic,children:"Amarantine"})," DPS "]}),l.jsx("li",{children:"Discord /"})]}),l.jsx(He,{id:"quickstart",label:""}),l.jsx("p",{children:""}),l.jsxs("ol",{children:[l.jsx("li",{children:""}),l.jsx("p",{children:""}),l.jsx("li",{children:""}),l.jsxs("li",{children:[" ",be("Delete")," "]}),l.jsx("p",{children:""})]}),l.jsx(He,{id:"shortcuts",label:""}),l.jsxs("p",{children:["T/Mac  ",be("ctrl")," "," ",be("cmd"),""]}),l.jsxs("ul",{children:[l.jsxs("li",{children:[be("u")," "]}),l.jsxs("li",{children:[be("ctrl"),"+",be("z")," "]}),l.jsxs("li",{children:[be("ctrl"),"+",be("y"),"  ",be("ctrl"),"+",be("shift"),"+",be("z")," "]}),l.jsxs("li",{children:[be("ctrl"),"+",be("c")," "]}),l.jsxs("li",{children:[be("ctrl"),"+",be("x")," "]}),l.jsxs("li",{children:[be("ctrl"),"+",be("v")," "]})]}),l.jsxs("ul",{children:[l.jsx("p",{children:""}),l.jsxs("li",{children:[be("Backspace"),"  ",be("Delete")," "]}),l.jsxs("li",{children:[be("")," "]}),l.jsxs("li",{children:[be("")," "]}),l.jsxs("li",{children:[be("Home")," "]}),l.jsxs("li",{children:[be("End")," "]}),l.jsxs("li",{children:[be("Shift"),"+",be("")," / ",be("Shift"),"+",be("")," / ",be("Shift"),"+",be("Home")," /"," ",be("Shift"),"+",be("End")," ///"]}),l.jsxs("li",{children:[be("Escape")," "]}),l.jsxs("li",{children:[be("ctrl"),"+",be("a")," "]})]}),l.jsx(He,{id:"update-policy",label:""}),l.jsx("p",{children:"XIV in the Shell "}),l.jsx(He,{id:"technical-details",label:""}),l.jsx("p",{children:"XIV in the Shell  xivintheshell.com /"}),l.jsxs("p",{children:[" TypeScript + Vite + React  GitHub Pages"," ",l.jsx("a",{href:fi,children:fi})," Bug "]}),l.jsx(He,{id:"troubleshooting",label:""}),l.jsx("p",{children:" Bug GitHubQQ Discord "}),l.jsx("p",{children:""}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"xivintheshell.com?resetResourceOverrides"})," ",""]}),l.jsxs("li",{children:[l.jsx("b",{children:"xivintheshell.com?resetAll"}),"  XIV in the Shell "]}),l.jsxs("li",{children:[l.jsx("b",{children:"xivintheshell.com?resetFFLogsAuth"}),"  FFLogs "]})]}),l.jsx("p",{children:" xivintheshell.com"})]})}const $n=e=>l.jsx(xa,{text:e});function zj(){return l.jsxs(l.Fragment,{children:[l.jsx(_i,{id:"timeline-creation",label:"Timeline Creation and Editing"}),l.jsx(He,{id:"setup-config",label:"Setup and Configuration"}),l.jsx("p",{children:'The "Config" panel to the right of the skill input area lets you adjust combat statistics and other simulation settings.'}),l.jsx(Je,{id:1,name:"config"}),l.jsxs("ol",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"Etro/XivGear import"})," Import a gearset from an etro or XivGear link."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Job selector"})," Set the job of the active timeline slot. Combat stats will use a default value for the job, or the most recently-used configuration for that job. Resource overrides are cleared when the job changes."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Information area"})," Summarizes the randomly generated offset of Lucid Dreaming ticks (healers/casters only), DoT ticks, initial resource overrides, and random procs."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Level selector and combat stats"})," Adjust the job level and combat stats. Critical hit, direct hit, and determination are used to estimate the effects of critical hit buffs like SCH's Chain Stratagem and DNC's Devilment, and potency for abilities that always crit or crit-direct hit."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Animation lock"})," Adjust the amount of time an ability's animation takes, preventing you from using other abilities. This should very roughly be 0.6 + 2  (your ping). Certain abilities, such as movement skills and DRG's jumps, have separate animation locks that cannot be configured."]}),l.jsxs("li",{children:[l.jsx("b",{children:"FPS"})," Adjust the estimated FPS of your game client. FFXIV only accepts ability inputs when a new frame is rendered, which can accumulate over time to create delays on GCD actions over the course of a fight. To ignore the effects of FPS, set this value to 9999."]}),l.jsxs("li",{children:[l.jsx("b",{children:"GCD correction"})," Adjust the duration of GCDs and cast times. This should generally be left at 0, but you can use this to shorten or lengthen these durations if you believe the FPS correction formula is inaccurate."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Time till first MP tick"}),' Adjust the amount of time until the first MP tick (also known as the "actor tick") occurs, relative to the start of the simulation. Mostly relevant only for BLM.']}),l.jsxs("li",{children:[l.jsx("b",{children:"Countdown"})," Adjust the amount of time available pre-pull. Setting this to a negative value begins the simulation after the fight has begun."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Random seed and proc mode"})," A ",l.jsx("a",{href:Lj,children:"random seed"})," ",`used to determine the occurrence of random events, such as RDM's Verstone Ready and DNC's Feather gauge. The proc mode setting can be set to "RNG" to use this seed, "Never" to prevent all random events from occurring, or "Always" to make random events occur whenever possible.`]})]}),l.jsx(Je,{id:2,name:"resource_overrides"}),l.jsxs("ol",{start:11,children:[l.jsxs("li",{children:[l.jsx("b",{children:"Override initial resources"})," Specify the initial values of job gauges, status effects, and cooldowns. This is useful for planning specific phases of long fights in isolation, or for encounters that allow you to prepare resources in advance."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Apply/apply and reset"}),' Pressing "apply" confirms any configuration changes, applying them to the current timeline. "Apply and reset" applies the configuration changes to the current timeline, and clears its previously-saved actions.']})]}),l.jsx(Je,{id:3,name:"control"}),l.jsx("p",{children:'The "Control" panel contains simulation settings.'}),l.jsx("p",{children:'When "real-time auto pause" mode is enabled, using an action will simulate its animation lock and cast time in real time, pausing when the next action can be performed. Adjusting the "time scale" field advances through time more quickly.'}),l.jsx("p",{children:'When "manual" mode is enabled, animation locks and cast times are immediately skipped after using an action.'}),l.jsx(He,{id:"adding-skills",label:"Adding Skills, Time Delays, and Waits"}),l.jsx(Je,{id:4,name:"hotbar"}),l.jsxs("p",{children:["Click on a skill's icon in the hotbar ",l.jsx("b",{children:"(1)"})," to add it. It will be inserted at the location of the cursor in the timeline. If action(s) are currently selected, attempting to add a new skill will place it before the selection. Attempting to use a skill will automatically wait for the duration of the skill's cooldown, as well as the current animation lock and/or GCD before activating it."]}),l.jsxs("p",{children:['To configure the number of targets hit by an AoE ability, adjust the "# of targets hit" field ',l.jsx("b",{children:"(2)"}),'. This will affect all subsequent AoE ability inputs, and is ignored for abilities that can only hit a single target. To configure the number of targets hit by an AoE ability, adjust the "# of targets hit" field ',l.jsx("b",{children:"(2)"}),', or manually select which targets to hit through the selector checkboxes below. This will affect all subsequent AoE ability inputs, and is ignored for abilities that can only hit a single target. An orange  indicates which enemy is the primary target of the ability, and will receive the most damage: if an ability is used that can only hit a single target, then this is the enemy that will be hit. A purple  indicates a secondary target that will be additionally hit by splash damage. Modifying the checkboxes will automatically modify the "targets hit" field, and vice versa.']}),l.jsx("p",{children:"When multiple targets are selected, clicking on the current primary target will demote it to a secondary target, and clicking on a secondary target will de-target it. Clicking on an unselected enemy will turn that enemy into the new primary target. Exactly one enemy must be selected as the primary target at all times."}),l.jsxs("p",{children:['To wait a specified duration after the end of the current animation lock, use the "wait until _ second(s) since" input ',l.jsx("b",{children:"(3)"}),'. This is useful for simulating deliberate "late weaves" with a duration of 0.6s-1.0s, depending on your needs.']}),l.jsxs("p",{children:['To jump to a specific timestamp in a fight (such as the beginning of a mechanic or the end of a downtime phase), use the "Wait until _" input ',l.jsx("b",{children:"(4)"}),". This input will always end at the specified timestamp, even if surrounding skills are rearranged."]}),l.jsxs("p",{children:['To wait until the next MP tick or Lucid Dreaming tick, press the "Wait until MP tick / lucid tick" button ',l.jsx("b",{children:"(5)"}),". This will always wait until the next tick occurs, even if surrounding skills are rearranged."]}),l.jsxs("p",{children:['To delete all wait events at the end of the timeline, use the "Remove trailing idle time" button ',l.jsx("b",{children:"(6)"}),"."]}),l.jsxs("p",{children:["To remove a buff or debuff before its natural expiration time, click its icon in the status section ",l.jsx("b",{children:"(7)"}),". Ground-based abilities such as BLM's Ley Lines, SCH's Sacred Soil, and DRK's Salted Earth, can be temporarily disabled, then later re-enabled, by clicking on them here."]}),l.jsx(He,{id:"positionals",label:"Positionals and Auto-Attacks"}),l.jsx(Je,{id:5,name:"positional"}),l.jsxs("p",{children:['Melee jobs have a pair of "Rear Positional" ',l.jsx("b",{children:"(1)"}),' and "Flank Positional" ',l.jsx("b",{children:"(2)"})," ",'buffs. Abilities with bonuses for landing positional hits will receive bonuses when the appropriate buff is active. Click the appropriate buff icon to toggle it. The "True North" buff will grant all positional bonuses, overriding the effect of these buffs.']}),l.jsxs("p",{children:['Melee and tank jobs have an additional "auto-attacks engaged" buff ',l.jsx("b",{children:"(3)"}),". This is currently only used on PLD to compute Oath Gauge generation, and can be temporarily disabled to simulate disengagements. Using a melee-range weaponskill or ability will automatically re-enable auto-attacks."]}),l.jsx("p",{children:"Potency computation for auto-attacks is not currently supported, and will be added at a later date."}),l.jsx(He,{id:"skill-sequence-presets",label:"Skill Sequence Presets"}),l.jsx(Je,{id:"6",name:"presets"}),l.jsx("p",{children:'Below the skill input window is the "skill sequence presets" menu. Here, you can add sequences of multiple skills that can later be added in bulk to the timeline by clicking on the preset entry.'}),l.jsx("p",{children:"Skills that replace other buttons, such as GNB's Gnashing Fang combo + Continuation and PCT's Red/Green/Blue combo, will automatically transform into the appropriate action when loaded from a preset."}),l.jsx(He,{id:"timeline-visualization",label:"Timeline Visualization"}),l.jsx("p",{children:"The graphical timeline displays visual information about skill usages and animation locks."}),l.jsx(Je,{id:"7",name:"timelines"}),l.jsxs("ol",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"Time ruler"})," Displays timestamp information."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Skill icons"})," A skill icon image represents the usage of a skill (image width not to scale with animation lock time). Mousing over an icon will display a tooltip with its snapshot time, potency, animation lock/cast time, and active damage/haste effects.",l.jsxs("ol",{type:"a",children:[l.jsxs("li",{children:[l.jsx("b",{children:"Cast bars"})," A purple bar represents a cast time, during which other abilities cannot be used. The vertical line in the middle of the bar represents the cast's snapshot time (also known as the slidecast window)."]}),l.jsxs("li",{children:[l.jsx("b",{children:"GCD bars"})," A green bar represents a GCD recast lock."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Animation lock bars"})," (not visible in screenshot) A grey bar represents an animation lock. These are only visible at higher horizontal scale levels, or for abilities with exceptionally long animation locks."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Buff underlines"})," The colored bars beneath a skill icon summarize the haste and amplification buffs that the ability snapshots."]})]})]}),l.jsxs("li",{children:[l.jsx("b",{children:"Damage ticks"})," A red triangle represents the application timing of a damage event. Mousing over a damage tick shows its exact timestamp, potency, and snapshotted buffs."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Heal ticks"})," A green triangle represents the application timing of a heal event. Similar to damage events, mousing over a heal tick will show its timestamp and potency."]}),l.jsxs("li",{children:[l.jsx("b",{children:"MP ticks"}),' A vertical blue line in the background of the timeline represents the timing of a natural MP tick, also known as the "actor tick." These ticks occur every three seconds, and timing of the first tick can be adjusted in the configuration panel.',l.jsx("ol",{type:"a",children:l.jsxs("li",{children:[l.jsx("b",{children:"Lucid Dreaming ticks"})," A light blue triangle represents the timing of a Lucid Dreaming MP tick. These ticks occur every three seconds (independent of the standard actor tick), and the timing of the first tick is randomly generated for each timeline."]})})]}),l.jsxs("li",{children:[l.jsx("b",{children:"Auto-attacks"})," A vertical orange line represents the occurrence of an auto-attack. This is currently only used for PLD to determine Oath Gauge generation."]})]}),l.jsx("p",{children:'If you wish to hide some of these elements, you may do so by unchecking the relevant options in the "Settings" tab at the bottom of the page.'}),l.jsx(He,{id:"editing-timelines",label:"Editing Timelines"}),l.jsx(Je,{id:"8a",name:"editor"}),l.jsxs("p",{children:["Click on a skill icon in the graphical timeline ",l.jsx("b",{children:"(1)"}),' or a row in the "Timeline editor" tab ',l.jsx("b",{children:"(2)"})," to select it. Use ",$n("Shift")," + click, or click and drag on the background of the graphical timeline to select a sequence of skills. While skill(s) are selected, use ",$n("Backspace")," or ",$n("Delete")," to delete them."]}),l.jsxs("p",{children:["When the timeline extends beyond the bounds of the screen, use ",$n("Shift"),' + scroll wheel while your cursor is within the timeline area to scroll through it. You can also adjust the "horizontal scale" slider ',l.jsx("b",{children:"(3)"})," to increase or decrease the number of visible skills."]}),l.jsxs("p",{children:['While skill(s) in the timeline are selected, click and drag their icons in the graphical timeline to rearrange them. While dragging, a blue line will appear indicating the time at which the simulator will try to use the skill. Click the "drag lock" setting'," ",l.jsx("b",{children:"(4)"})," to toggle this behavior to prevent accidental edits. All editing actions can also be undone and redone with ",$n("ctrl"),"+",$n("z")," and ",$n("ctrl"),"+",$n("y"),", respectively. See ",l.jsx("a",{href:"#shortcuts",children:"keyboard shortcuts"})," for additional navigation shortcuts."]}),l.jsxs("p",{children:['Use the "Add timeline slot" button ',l.jsx("b",{children:"(5)"}),' to, you guessed it, add an additional timeline. Use the "Clone timeline slot" button ',l.jsx("b",{children:"(6)"})," to replicate the currently-selected timeline. Up to four timelines can be stored at once."]}),l.jsxs("p",{children:[`Click on the handle next to a timeline to set it as active. Clicking the small "x" at the bottom of the active timeline's handle `,l.jsx("b",{children:"(7)"})," will delete it."]}),l.jsx(He,{id:"timeline-editor-table",label:"The Timeline Editor Table"}),l.jsx(Je,{id:"8b",name:"editor"}),l.jsxs("p",{children:['The "Timeline editor" tab at the bottom of the page provides a compact view of the skills used in the active timeline. Any edits made in this table must be confirmed or discarded with the "apply changes to timeline and save" / "discard changes" buttons on the right ',l.jsx("b",{children:"(1)"}),". If edits would cause a timeline to be invalid (that is, its activation conditions are no longer met), then the offending skill will be highlighted in red, and the first invalid skill will be described in the box to the right of the table."]}),l.jsxs("p",{children:["The enemy selector checkboxes ",l.jsx("b",{children:"(2)"})," modify which enemies are targeted by the selected ability. This behaves the same as the enemy selector in the skill input area (described in ",l.jsx("a",{href:"#adding-skills",children:'"Adding Skills"'}),"), except single-target abilities will automatically target only a single enemy."]}),l.jsxs("p",{children:["Clicking a row in the editor table ",l.jsx("b",{children:"(3)"})," selects it. Shift + click allows selecting a range of rows. Dragging and dropping the selected actions will reorder them."]}),l.jsxs("p",{children:['The "move up" and "move down" buttons ',l.jsx("b",{children:"(4)"}),' move the selected actions up or down in the timeline. The "delete selected" button ',l.jsx("b",{children:"(5)"}),' deletes selected actions. The "move end of selection to start of selection" button ',l.jsx("b",{children:"(6)"})," moves the last selected skill ahead of the first selected skill."]}),l.jsxs("p",{children:['"Copy" and "paste" ',l.jsx("b",{children:"(7)"})," copy or paste selected actions to/from the clipboard."]}),l.jsxs("p",{children:['The "undo" and "redo" buttons ',l.jsx("b",{children:"(8)"})," undo or redo the last timeline manipulation action, including those done outside the timeline editor. Undo history is lost upon reloading the page."]})]})}function Yj(){return l.jsxs(l.Fragment,{children:[l.jsx(_i,{id:"timeline-creation",label:""}),l.jsx(He,{id:"setup-config",label:""}),l.jsx("p",{children:""}),l.jsx(Je,{id:1,name:"config"}),l.jsxs("ol",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"Etro / XivGear "}),"  etro  XivGear "]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," ",""]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," ","/DoT"]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," ","/"]}),l.jsxs("li",{children:[l.jsx("b",{children:""}),"   0.6 s + 2  "]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," ","FFXIVGCD 9999"]}),l.jsxs("li",{children:[l.jsx("b",{children:"GCD"}),"  GCD/0"]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," "]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," "]}),l.jsxs("li",{children:[l.jsx("b",{children:"BUFF"})," ","BUFFRNGNeverAlways"]})]}),l.jsx(Je,{id:2,name:"resource_overrides"}),l.jsxs("ol",{start:11,children:[l.jsxs("li",{children:[l.jsx("b",{children:""})," ","BUFFCD"]}),l.jsxs("li",{children:[l.jsx("b",{children:"/"})," ",""]})]}),l.jsx(Je,{id:3,name:"control"}),l.jsx("p",{children:""}),l.jsx("p",{children:"/"}),l.jsx("p",{children:""}),l.jsx(He,{id:"adding-skills",label:""}),l.jsx(Je,{id:"4",name:"hotbar"}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(1)"})," ",""]}),l.jsxs("p",{children:["AoE ",l.jsx("b",{children:"(2)"}),"  AoE "]}),l.jsxs("p",{children:["____ ",l.jsx("b",{children:"(3)"})," ","GCD0.6s~1.0s"]}),l.jsxs("p",{children:[":"," ",l.jsx("b",{children:"(4)"}),""]}),l.jsxs("p",{children:["/ ",l.jsx("b",{children:"(5)"})," ",""]}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(6)"})," "]}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(7)"}),"  Buff/Debuff Buff/Debuff"]}),l.jsx(He,{id:"positionals",label:"A"}),l.jsx(Je,{id:"5",name:"positional"}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(1)"}),"  ",l.jsx("b",{children:"(2)"})," ",""]}),l.jsxs("p",{children:["A ",l.jsx("b",{children:"(3)"})," ","AAA"]}),l.jsx(He,{id:"skill-sequence-presets",label:""}),l.jsx(Je,{id:"6",name:"presets"}),l.jsx("p",{children:""}),l.jsx("p",{children:"//"}),l.jsx(He,{id:"timeline-visualization",label:""}),l.jsx("p",{children:"/"}),l.jsx(Je,{id:"7",name:"timelines"}),l.jsxs("ol",{children:[l.jsxs("li",{children:[l.jsx("b",{children:""})," "]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," ","//Buff",l.jsxs("ol",{type:"a",children:[l.jsxs("li",{children:[l.jsx("b",{children:""})," ",""]}),l.jsxs("li",{children:[l.jsx("b",{children:"GCD "})," GCD"]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," "]}),l.jsxs("li",{children:[l.jsx("b",{children:"Buff "})," / Buff"]})]})]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," ","Buff"]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," ","Buff"]}),l.jsxs("li",{children:[l.jsx("b",{children:""}),"  3 ",l.jsx("ol",{type:"a",children:l.jsxs("li",{children:[l.jsx("b",{children:""})," ","3"]})})]}),l.jsxs("li",{children:[l.jsx("b",{children:"A"})," "]})]}),l.jsx("p",{children:"A"}),l.jsx(He,{id:"editing-timelines",label:""}),l.jsx(Je,{id:"8a",name:"editor"}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(1)"}),"  ",l.jsx("b",{children:"(2)"})," ","",$n("Shift"),"+"," ",$n("Backspace"),"  ",$n("Delete")," "]}),l.jsxs("p",{children:[" ",$n("Shift"),"+ ",l.jsx("b",{children:"(3)"})," "]}),l.jsxs("p",{children:[""," ",l.jsx("b",{children:"(4)"})," "]}),l.jsxs("p",{children:[" ",$n("ctrl"),"+",$n("z")," / ",$n("ctrl"),"+",$n("y")," ","",l.jsx("a",{href:"#shortcuts",children:""}),""]}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(5)"}),"  ",l.jsx("b",{children:"(6)"})," "," 4 "]}),l.jsxs("p",{children:['"" ',l.jsx("b",{children:"(7)"})," ",""]}),l.jsx(He,{id:"timeline-editor-table",label:""}),l.jsx(Je,{id:"8b",name:"editor"}),l.jsxs("p",{children:[""," ",l.jsx("b",{children:"(1)"})," ",""]}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(3)"})," ",$n("Shift"),"+"]}),l.jsxs("p",{children:['"/" ',l.jsx("b",{children:"(4)"}),"  ",l.jsx("b",{children:"(5)"})," "," ",l.jsx("b",{children:"(6)"})," ",""]}),l.jsxs("p",{children:['"/" ',l.jsx("b",{children:"(7)"})," "]}),l.jsxs("p",{children:['"/" ',l.jsx("b",{children:"(8)"})," ",""]})]})}function Kj(){const e=C.useRef(null);return l.jsxs(l.Fragment,{children:[l.jsx(_i,{id:"timeline-analysis",label:"Timeline Analysis"}),l.jsx(He,{id:"damage-table",label:"Potency, PPS, and the Damage Table"}),l.jsx(Je,{id:"9",name:"potency"}),l.jsxs("ol",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"Summary statistics"})," The top section summarizes the total potency, potency per second (PPS), number of GCD skills applied, and damage over time (DoT) coverage for the current timeline. When a skill or sequence of skills is selected, these values are updated to reflect the selected range.",l.jsxs("ul",{children:[l.jsx("li",{children:'If an ability has been used but its damage application delay has not yet passed in the simulation, its potency will be described as "pending." To include it in the total potency and PPS calculations, add a "wait" event at the end of your timeline, or use an additional skill.'}),l.jsx("li",{children:"PPS is calculated as damage applied starting from time 0 until the end of the final recorded damage application event. This differs from convention for many jobs, which may calculate time from the start of the first GCD until the end of the cast/recast time of the final GCD."}),l.jsx("li",{children:"Potencies are calculated from the values given in ability tooltips, accounting for bonuses from active status buffs (such as DNC's Technical Step and DRG's Lance Charge + Battle Litany) and job gauge buffs (such as BLM's Enochian and DRG's Life of the Dragon). Because of differences in damage calculation multipliers and other combat stats, potencies in timelines of different jobs (or the same job with different GCD speeds) generally cannot be meaningfully compared with each other without the aid of external potency-to-damage conversion tools."})]})]}),l.jsxs("li",{children:[l.jsx("b",{children:"Tincture potency configuration"})," Potions/tinctures/gemdraughts increase the strength of damaging actions by temporarily boosting the character's main combat stat (STR/DEX/MND/INT). Because ",l.jsx("i",{children:"XIV in the Shell"})," simulates only potencies rather than calculating the full damage formula, we approximate tinctures as an 8% buff to skill potencies. If you need a different approximation value, you may configure it here."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Exclude damage when untargetable"}),' When checked, damage application events and DoT ticks that occur during an "Untargetable" marker are automatically excluded from calculations.']}),l.jsxs("li",{ref:e,children:[l.jsx("b",{children:"Potency table"})," Displays the number of times each ability was cast under different sets of self-applied buffs. Hovering the"," ",l.jsx(ze,{topic:"manual-sample-help",content:"potency explanation",container:e})," ","tooltip next to a potency value displays the effect of each buff on a skill's potency. When a skill or sequence of skills is selected, these values are updated to reflect the selected range.",l.jsx("ul",{children:l.jsx("li",{children:'The effect of party buffs added through markers, as well as estimated potency boosts from tinctures, are not visible in this breakdown, and only appear in the purple value in the "total" column.'})})]})]}),l.jsx(He,{id:"dot-breakdown",label:"DoT Breakdown"}),l.jsx(Je,{id:"10",name:"thunder"}),l.jsx("p",{children:"Every used DoT ability has a separate table detailing the timing of its usage. The offset at which DoT effects tick is randomly generated for each timeline."}),l.jsxs("ol",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"Cast time and application time"})," The snapshot of the ability, and the time at which the DoT effect was applied."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Gap and override"})," The gap (duration where the DoT debuff was not applied) and override (duration remaining on the previous DoT debuff) for this application of the DoT. The total gap and override are displayed at the bottom of this column."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Initial and DoT"})," The on-hit and per-tick potencies of the DoT, including the effect of self-applied buffs."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Ticks"})," The number of ticks triggered from this DoT application. The total number of hit ticks and the total possible number of ticks, are displayed at the bottom of this column."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Total"})," The total potency from this DoT application, including both the initial hit and subsequent ticks. Similar to the general potency table, the effects of party buff markers and tinctures are displayed here."]})]}),l.jsx("p",{children:`Jobs that attack with summoned pets (DRK's Living Shadow, MCH's Automaton Queen, and SMN's Demi-summons) also have potencies displayed in a DoT table. The per-tick "DoT" column for pets is unreliable, but the total potency column and buff snapshots are correct. This will be updated to be clearer some time in the future.`})]})}function Vj(){const e=C.useRef(null);return l.jsxs(l.Fragment,{children:[l.jsx(_i,{id:"timeline-analysis",label:""}),l.jsx(He,{id:"damage-table",label:"PPS"}),l.jsx(Je,{id:"9",name:"potency"}),l.jsxs("ol",{children:[l.jsxs("li",{children:[l.jsx("b",{children:""})," PPSGCD DoT ",l.jsxs("ul",{children:[l.jsx("li",{children:""}),l.jsx("li",{children:"PPS  0 GCD GCD"}),l.jsx("li",{children:'/""'})]})]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," /// XIV in the Shell  8% "]}),l.jsxs("li",{children:[l.jsx("b",{children:"Boss0"})," ","DoT"]}),l.jsxs("li",{ref:e,children:[l.jsx("b",{children:""})," Buff"," ",l.jsx(ze,{topic:"manual-sample-help",content:"",container:e})," ","Buff",l.jsx("ul",{children:l.jsx("li",{children:""})})]})]}),l.jsx(He,{id:"dot-breakdown",label:"DoT "}),l.jsx(Je,{id:"10",name:"thunder"}),l.jsx("p",{children:"DoTDoT "}),l.jsxs("ol",{children:[l.jsxs("li",{children:[l.jsx("b",{children:""})," DoT"]}),l.jsxs("li",{children:[l.jsx("b",{children:"DoTDoT"})," ","DoTDoTDoTDoTDoTDoT"]}),l.jsxs("li",{children:[l.jsx("b",{children:"DoT"})," ","DoTBuff"]}),l.jsxs("li",{children:[l.jsx("b",{children:"DoT"})," ","DoT"]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," ","DoT"]})]}),l.jsx("p",{children:"DoTBuff"})]})}function Wj(){return l.jsxs(l.Fragment,{children:[l.jsx(_i,{id:"fight-markers",label:"Fight and Buff Markers"}),l.jsx(He,{id:"loading-presets",label:"Loading Preset Fight Markers"}),l.jsx(Je,{id:"11",name:"markers"}),l.jsxs("p",{children:[l.jsx("i",{children:"XIV in the Shell"})," provides preset timeline markers for on-content savage and ultimate fights, as well as a variety of other high-end content. These tracks are created by developers and community members, and illustrate precise timings for mechanics, downtimes, and incoming damage."]}),l.jsxs("p",{children:["Clicking the button with the name of a fight ",l.jsx("b",{children:"(1)"})," adds its markers to the graphical timeline. Clicking the name of tracks for certain fights with phases"," ",l.jsx("b",{children:"(2)"})," may also have separate tracks for each phase, explained in more detail in the next section."]}),l.jsx("p",{children:"Presets are split into three categories:"}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"Current content"})," The most recent tier of Savage-difficulty raid encounters, along with the current expansion's Ultimate encounters. This may also contain tracks for certain other high-end content, including Extreme trials, Criterion dungeons, and Quantum bosses."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Legacy ultimates"})," Full encounters or select phases of Ultimate encounters from previous expansions."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Archive"})," Older Savage tiers and other encounters from previous expansions."]})]}),l.jsxs("p",{children:['To load tracks beginning from a certain timestamp, adjust the value in the "Load tracks with time offset" field ',l.jsx("b",{children:"(3)"}),", which adds the specified difference in seconds to all markers (for example, a value of 4 would delay all markers by 4 seconds, and a value of -4 would move all markers forward by 4 seconds). This offset is applied on top of individual phase offsets."]}),l.jsxs("p",{children:['Use the "clear all markers" button ',l.jsx("b",{children:"(4)"}),' to clear all markers. Use "remove duplicates" ',l.jsx("b",{children:"(5)"})," to remove all extra copies of identical markers (same text, timestamp, track number, etc.), which may occur if a fight preset is loaded multiple times by mistake."]}),l.jsx(He,{id:"loading-presets-phases",label:"Loading Preset Markers for Fights With Phases"}),l.jsx(Je,{id:"12",name:"phase_load"}),l.jsxs("p",{children:["If a preset track supports separate phases, click its name ",l.jsx("b",{children:"(1)"})," to expand/collapse timing information for its phases."]}),l.jsxs("p",{children:['The "Load all phases" button ',l.jsx("b",{children:"(2)"})," loads markers for all phases. The default timestamp for the start of a phase is shown next to each field ",l.jsx("b",{children:"(3)"}),". These should be adjusted to account for different kill or push timings. Clicking the name of a particular phase ",l.jsx("b",{children:"(4)"})," loads that phase's markers to the timeline; to create a timeline beginning from the start of a particular phase, set its offset to 0 before loading."]}),l.jsx("p",{children:'The default phase transition timings in presets usually assume the previous phase lasted as long as possible. The beginning of a phase follows the definition provided by FFLogs, which is either the end of a "Down for the Count" debuff, or a boss becoming targetable. You can find these timings for a particular FFLogs report with the `type="targetabilityupdate"` filter, as shown below.'}),l.jsx("img",{src:"assets/ManualScreenshots/targetabilityupdate.png"}),l.jsx("p",{children:"Presets take time to create, and the languages in which they are available depend on the work of the community members that create them. If you're interested in submitting markers for a fight, please reach out to us!"}),l.jsx(He,{id:"adding-custom-markers",label:"Adding Party Buffs and Custom Markers"}),l.jsx(Je,{id:"13a",name:"pct_opener"}),l.jsxs("p",{children:[`In addition to the site's built-in presets, you can add your own markers in the "Add buffs/markers" section `,l.jsx("b",{children:"(1)"}),". Markers are split into three distinct categories:"]}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"Info"})," markers represent generic information about a timeline. This includes events like enemy cast bars, boss movements, and mechanic resolution timings."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Buff"})," markers represent raid buffs granted by party members. All buffs will automatically use their default in-game durations (which can be adjusted to account for edge cases like varying propagation timings or Dance Partner swaps), and their potency boosts are automatically applied to the damage table. You can see which abilities snapshot party buffs and self-applied buffs by a colored underline in the graphical timeline, or by hovering the skill image icon."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Untargetable"}),' markers represent periods of time where all enemies are immune to damage, and cannot be targeted. Damage application events that would "ghost" by a boss becoming untargetable and DoT ticks that occur during an untargetable period are not added to potency totals.']})]}),l.jsxs("p",{children:["Each marker has a track number ",l.jsx("b",{children:"(2)"})," that determines where it is visible in the timeline, where 0 is the bottom-most marker line, and increasing numbers stack on the lines above."]}),l.jsxs("p",{children:["Clicking on a marker in the timeline ",l.jsx("b",{children:"(3)"}),' will remove it, and restore its properties to the "Add buffs/markers" menu for further editing.']}),l.jsx(He,{id:"exporting-markers",label:"Exporting Markers"}),l.jsx(Je,{id:"13b",name:"pct_opener"}),l.jsxs("p",{children:['Marker tracks can be exported and shared with other users in the "Save marker tracks to file" menu ',l.jsx("b",{children:"(1)"}),'. Click the "all tracks combined" link ',l.jsx("b",{children:"(2)"}),' to download a single file containing all markers, which can then be imported through the "Load multiple tracks combined" option ',l.jsx("b",{children:"(3)"}),". Clicking a link corresponding to a single track ",l.jsx("b",{children:"(4)"}),' will export all markers with that track number, which can then be imported with the "Load into individual track" option ',l.jsx("b",{children:"(5)"}),"."]}),l.jsx(He,{id:"creating-markers-from-logs",label:"Creating Marker Tracks From Logs"}),l.jsx("p",{children:"A single encounter can have a very large number of events that you may wish to encode within a marker track file. In these cases, you will most likely find it easier to produce markers in bulk from an FFLogs report."}),l.jsxs("p",{children:[l.jsx("i",{children:"XIV in the Shell"})," developers use a custom"," ",l.jsx("a",{href:dy,children:"Python script"})," to generate track files from CSV files exported from FFLogs. See ",l.jsx("a",{href:hy,children:"this page"})," for detailed usage instructions. If you're unwilling or unable to run the Python script on your own computer, you may also run it directly in your web browser through our"," ",l.jsx("a",{href:fy,children:"Colab notebook"}),"."]}),l.jsxs("p",{children:["To retrieve markers directly from a report using the FFLogs API, you may also use leifengsang's ",l.jsx("a",{href:Ey,children:"XivInTheShellMarkerGen"})," Python script (instructions in Chinese). This script reads a user-provided configuration file with names of enemy cast and damage events, and produces a track file directly from a report ID."]})]})}function Xj(){return l.jsxs(l.Fragment,{children:[l.jsx(_i,{id:"fight-markers",label:""}),l.jsx(He,{id:"loading-presets",label:""}),l.jsx(Je,{id:"11",name:"markers"}),l.jsx("p",{children:"XIV in the Shell "}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(1)"})," "," ",l.jsx("b",{children:"(2)"})," /"]}),l.jsx("p",{children:""}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("b",{children:""})," ",""]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," "]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," "]})]}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(3)"})," ",""]}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(4)"}),"  ",l.jsx("b",{children:"(5)"})," ",""]}),l.jsx(He,{id:"loading-presets-phases",label:""}),l.jsx(Je,{id:"12",name:"phase_load"}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(1)"})," /"]}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(2)"})," "," ",l.jsx("b",{children:"(3)"})," 0 ",l.jsx("b",{children:"(5)"})," ",""]}),l.jsx("p",{children:' FFLogs BOSSLogs FFLogs  Filter Expression type="targetabilityupdate" '}),l.jsx("img",{src:"assets/ManualScreenshots/targetabilityupdate.png"}),l.jsx("p",{children:""}),l.jsx(He,{id:"adding-custom-markers",label:""}),l.jsx(Je,{id:"13a",name:"pct_opener"}),l.jsxs("p",{children:["Buff ",l.jsx("b",{children:"(1)"})," ",""]}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("b",{children:""})," Boss "]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," ",""]}),l.jsxs("li",{children:[l.jsx("b",{children:""}),"  Boss  DoT "]})]}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(2)"})," 0 "]}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(3)"})," ","Buff"]}),l.jsx(He,{id:"exporting-markers",label:""}),l.jsx(Je,{id:"13b",name:"pct_opener"}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(1)"}),"  ",l.jsx("b",{children:"(2)"})," "," ",l.jsx("b",{children:"(3)"})," "]}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(4)"})," _"," ",l.jsx("b",{children:"(4)"})," "]}),l.jsx(He,{id:"creating-markers-from-logs",label:"Logs"}),l.jsx("p",{children:" FFLogs "}),l.jsxs("p",{children:["XIV in the Shell ",l.jsx("a",{href:dy,children:"Python"})," FFLogs  CSV ",l.jsx("a",{href:hy,children:""}),""," ",l.jsx("a",{href:fy,children:"Colab notebook"})," "]}),l.jsxs("p",{children:[" ",l.jsx("a",{href:Ey,children:"XivInTheShellMarkerGen"})," Python  FFLogs API  ID gui"]})]})}const fl=e=>l.jsx(xa,{text:e});function qj(){return l.jsxs(l.Fragment,{children:[l.jsx(_i,{id:"import-export",label:"Import and Export"}),l.jsx(He,{id:"exporting-text",label:"Exporting to a Text File"}),l.jsx(Je,{id:"14",name:"importexport"}),l.jsxs("p",{children:['You can download the active timeline as a text file from the "Import/Export" menu, by clicking the "txt format" link ',l.jsx("b",{children:"(1)"}),'. This file can then be shared and imported through the "Load from file" menu ',l.jsx("b",{children:"(2)"}),". We recommend you export your plans frequently to avoid accidentally losing progress."]}),l.jsx(He,{id:"importing-fflogs",label:"Importing From FFLogs"}),l.jsx("p",{children:'Fight plans can be imported directly from FFLogs reports from the "Import fight from FFLogs" menu. This will open a dialog to begin the first step of the log import process.'}),l.jsxs("ol",{children:[l.jsxs("li",{children:["Click the button to allow ",l.jsx("i",{children:"XIV in the Shell"})," to read FFLogs reports on your behalf."]}),l.jsxs("li",{children:["Paste a log report URL. The link may contain a full report, a specific fight number, and/or a specific player number.",l.jsxs("ol",{type:"a",children:[l.jsx("li",{children:"If the URL did not specify a single fight, click the desired pull from the list of fights."}),l.jsx("li",{children:"After choosing a specific fight and a player was not specified in the URL, click the desired player name from the list of players."})]})]}),l.jsx("li",{children:"Enter the combat stats of the selected player. Due to limitations with FFLogs, all stats for players other than the creator of the log must be entered manually or estimated, and will use the values of the most recently-created timeline for that job by default."}),l.jsxs("li",{children:['After pressing "go," ',l.jsx("i",{children:"XIV in the Shell"}),' will import the list of actions from the log to the active timeline slot, automatically inserting "wait" and "delay" events as appropriate. You will see a table summarizing the differences between simulated timestamps and those recorded in the log, as well as a list of actions that the simulation believes did not meet their activation requirements. After closing the dialog, you may edit the configuration and timeline actions as needed to make the timeline valid.']})]}),l.jsx(He,{id:"text-copy-paste",label:"Text Copy/Paste"}),l.jsxs("p",{children:[l.jsx("i",{children:"XIV in the Shell"})," allows copy/pasting sequences of actions with ",fl("ctrl"),"+",fl("c")," and ",fl("ctrl"),"+",fl("v"),". Three different formats are supported:"]}),l.jsx("p",{children:l.jsx("i",{children:"Example sequence: Fire III, Fire IV, Despair"})}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"Plain text"})," A comma-separated list of actions names.",l.jsx("p",{className:"no-indent",children:l.jsx("i",{children:"Example:"})}),l.jsx("p",{children:"Fire 3, Fire 4, Despair"})]}),l.jsxs("li",{children:[l.jsx("b",{children:"Tab-separated lines"})," A tab-separated list of usage timestamps, target counts, and skill names, compatible with external spreadsheet applications.",l.jsx("p",{className:"no-indent",children:l.jsx("i",{children:"Example:"})}),l.jsx("table",{style:{marginLeft:"1.5rem"},children:l.jsxs("tbody",{children:[l.jsxs("tr",{children:[l.jsx("td",{children:"-3.500"}),l.jsx("td",{children:"1"}),l.jsx("td",{children:"Fire 3"})]}),l.jsxs("tr",{children:[l.jsx("td",{children:"0.042"}),l.jsx("td",{children:"1"}),l.jsx("td",{children:"Fire 4"})]}),l.jsxs("tr",{children:[l.jsx("td",{children:"2.500"}),l.jsx("td",{children:"1"}),l.jsx("td",{children:"despair"})]})]})})]}),l.jsxs("li",{children:[l.jsx("b",{children:"Discord emotes"})," A sequence of Discord emotes (only verified for BLM and PCT).",l.jsx("p",{className:"no-indent",children:l.jsx("i",{children:"Example:"})}),l.jsx("p",{children:":F3: :F4: :Despair:"})]})]}),l.jsxs("p",{children:["The format copied to the clipboard from ",l.jsx("i",{children:"XIV in the Shell"}),' is determined by the "Clipboard copy mode" found in the "Settings" tab at the bottom of the page. Pasting from any of these three formats is always valid, regardless of the value of this setting.']}),l.jsx(He,{id:"exporting-images",label:"Exporting an Image"}),l.jsx(Je,{id:"18b",name:"importexport"}),l.jsxs("p",{children:["Besides using your computer's built-in screenshot functionality, you may also use"," ",l.jsx("i",{children:"XIV in the Shell"}),`'s "Image Export" feature to download a timeline as a PNG image.`]}),l.jsxs("p",{children:['To export the selected portion of a timeline as an image, press the "export selection as png" link ',l.jsx("b",{children:"(1)"}),". If no actions are selected, the entirety of the active timeline is selected."]}),l.jsxs("p",{children:['To split the exported image across multiple lines, set the "seconds before wrapping" field ',l.jsx("b",{children:"(2)"})," to a non-zero value. Each row in the image will contain at most the specified number of seconds."]}),l.jsx("p",{children:'To omit the time ruler and fight markers from export, uncheck the "include time and markers" setting. Timeline elements in the export are also affected by the display settings configured in the "Settings" tab.'}),l.jsx(He,{id:"exporting-damage-logs",label:"Exporting Damage Logs"}),l.jsx(Je,{id:"17",name:"damageexport"}),l.jsxs("p",{children:['You can export a detailed log of all damage events by clicking the "downloaded detailed damage log as CSV file" button ',l.jsx("b",{children:"(1)"})," above the site's potency summary table. The output contains 3 columns:"]}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"time"})," The decimal timestamp, in seconds, at which the damage event occurred."]}),l.jsxs("li",{children:[l.jsx("b",{children:"damageSource"})," The name and usage time of the ability that caused this damage event."]}),l.jsxs("li",{children:[l.jsx("b",{children:"potency"})," The total potency (including buffs and modifiers) of this damage event."]})]}),l.jsx(He,{id:"exporting-for-external-tools",label:"Exporting for External Tools"}),l.jsx(Je,{id:"18b",name:"importexport"}),l.jsxs("p",{children:[`Use the "excel / Tischel's plugin csv format" download link `,l.jsx("b",{children:"(1)"})," to generate a file compatible with external tools, like spreadsheet software or Tischel's"," ",l.jsx("a",{href:tE,children:"BLM in the Shell Plugin"}),". The exported CSV will contain the following columns:"]}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"time"})," The decimal timestamp, in seconds, at which the action was used."]}),l.jsxs("li",{children:[l.jsx("b",{children:"action"})," The name of the action used."]}),l.jsxs("li",{children:[l.jsx("b",{children:"isGCD"})," 1 if the action is a GCD ability, 0 if not."]}),l.jsxs("li",{children:[l.jsx("b",{children:"castTime"})," The duration, in seconds, of this action's cast time. 0 If the action did not have a cast time."]})]}),l.jsx(He,{id:"exporting-for-combat-sim",label:"Exporting to Amarantine's Combat Simulator"}),l.jsxs("p",{children:[l.jsx("a",{href:ic,children:"Amarantine's Combat Simulator"})," provides powerful DPS simulation and kill time estimation capabilities. ",l.jsx("i",{children:"XIV in the Shell"})," can be used to generate and edit timelines that are compatible with this simulator, and both tools are used by many speedkill teams as part of their planning process."]}),l.jsxs("p",{children:[`To download a CSV file compatible with Ama's Combat Sim, use the "Amarantine's combat simulator csv format" download link `,l.jsx("b",{children:"(2)"}),". The generated CSV file will also contain metadata headers describing the configured combat stats, external party buff timeline markers, and untargetable downtime windows."]}),l.jsxs("p",{children:["Note that if the configured combat stats were originally imported from XivGear or etro, stats in the gearset that cannot be directly configured within ",l.jsx("i",{children:"XIV in the Shell"})," ","(WD, STR/DEX/MND/INT, and TEN) will also be included in the export file for simulation purposes."]})]})}function Zj(){return l.jsxs(l.Fragment,{children:[l.jsx(_i,{id:"import-export",label:""}),l.jsx(He,{id:"exporting-text",label:""}),l.jsx(Je,{id:"14",name:"importexport"}),l.jsxs("p",{children:['"/""txt " ',l.jsx("b",{children:"(1)"}),"txt ",l.jsx("b",{children:"(2)"})," ",""]}),l.jsx(He,{id:"importing-fflogs",label:" FFLogs "}),l.jsx("p",{children:'" FFLogs "'}),l.jsxs("ol",{children:[l.jsx("li",{children:" XIV in the Shell  FFLogs "}),l.jsxs("li",{children:["FFLogs/",l.jsxs("ol",{type:"a",children:[l.jsx("li",{children:""}),l.jsx("li",{children:""})]})]}),l.jsx("li",{children:" FFLogs "}),l.jsx("li",{children:"XIV in the Shell "})]}),l.jsx(He,{id:"text-copy-paste",label:"/"}),l.jsxs("p",{children:["XIV in the Shell  ",fl("ctrl"),"+",fl("c")," / ",fl("ctrl"),"+",fl("v")," ",""]}),l.jsx("p",{children:l.jsx("i",{children:""})}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("b",{children:""})," ","",l.jsx("p",{className:"no-indent",children:l.jsx("i",{children:""})}),l.jsx("p",{children:""})]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," ",l.jsx("p",{className:"no-indent",children:l.jsx("i",{children:""})}),l.jsx("table",{style:{marginLeft:"1.5rem"},children:l.jsxs("tbody",{children:[l.jsxs("tr",{children:[l.jsx("td",{children:"-3.500"}),l.jsx("td",{children:"1"}),l.jsx("td",{children:""})]}),l.jsxs("tr",{children:[l.jsx("td",{children:"0.042"}),l.jsx("td",{children:"1"}),l.jsx("td",{children:""})]}),l.jsxs("tr",{children:[l.jsx("td",{children:"2.500"}),l.jsx("td",{children:"1"}),l.jsx("td",{children:""})]})]})})]}),l.jsxs("li",{children:[l.jsx("b",{children:"Discord "})," Discord / ",l.jsx("p",{className:"no-indent",children:l.jsx("i",{children:""})}),l.jsx("p",{children:":F3: :F4: :Despair:"})]})]}),l.jsx("p",{children:""}),l.jsx(He,{id:"exporting-images",label:""}),l.jsx(Je,{id:"18b",name:"importexport"}),l.jsx("p",{children:" PNG"}),l.jsxs("p",{children:['" png" ',l.jsx("b",{children:"(1)"})," ",""]}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(2)"})," "]}),l.jsx("p",{children:""}),l.jsx(He,{id:"exporting-damage-logs",label:""}),l.jsx(Je,{id:"17",name:"damageexport"}),l.jsxs("p",{children:['"CSV" ',l.jsx("b",{children:"(1)"})," ",""]}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"time"})," "]}),l.jsxs("li",{children:[l.jsx("b",{children:"damageSource"})," "]}),l.jsxs("li",{children:[l.jsx("b",{children:"potency"})," Buff"]})]}),l.jsx(He,{id:"exporting-for-external-tools",label:""}),l.jsx(Je,{id:"18a",name:"importexport"}),l.jsxs("p",{children:['"excel / Tischel CSV " ',l.jsx("b",{children:"(1)"}),"  Tischel "," ",l.jsx("a",{href:tE,children:"BLM in the Shell Plugin"})," "]}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"time"})," "]}),l.jsxs("li",{children:[l.jsx("b",{children:"action"})," "]}),l.jsxs("li",{children:[l.jsx("b",{children:"isGCD"})," 1GCD 0 "]}),l.jsxs("li",{children:[l.jsx("b",{children:"castTime"})," 0"]})]}),l.jsx(He,{id:"exporting-for-combat-sim",label:"Amarantine"}),l.jsxs("p",{children:[l.jsx("a",{href:ic,children:"Amarantine"})," DPS XIV in the Shell "]}),l.jsxs("p",{children:[' Amarantine CSV "Amarantine CSV " ',l.jsx("b",{children:"(2)"}),""]}),l.jsx("p",{children:" CSV "}),l.jsx("p",{children:" XivGear  etro  XIV in the Shell "})]})}function Qj(){return l.jsxs(l.Fragment,{children:[l.jsx(_i,{id:"additional-resources",label:"Additional Resources"}),l.jsxs("p",{className:"no-indent",children:[l.jsx("i",{children:"XIV in the Shell"}),": ",l.jsx("a",{href:fi,children:"GitHub"})," - ",l.jsx("a",{href:Cu,children:"Blog"})," -"," ",l.jsx("a",{href:Rs,children:"Bluesky"})," -"," ",l.jsx("a",{href:Ts,children:"Discord channel in The Balance"})," -"," ",l.jsx("a",{href:tE,children:"Tischel's BLM in the Shell Dalamud Plugin"})]}),l.jsxs("p",{className:"no-indent",children:["Game assets and information:"," ",l.jsx("a",{href:vj,children:"Official FFXIV PvE job guide"})," -"," ",l.jsx("a",{href:Mj,children:"FFXIV Community Wiki"})," - ",l.jsx("a",{href:ny,children:"XIVAPI"})," -"," ",l.jsx("a",{href:ay,children:"XIV-ID"})]}),l.jsxs("p",{className:"no-indent",children:["Job gameplay: ",l.jsx("a",{href:Jf,children:"The Balance"})," -"," ",l.jsx("a",{href:eE,children:"Icy Veins"})," - ",l.jsx("a",{href:$D,children:"FFLogs"})]}),l.jsxs("p",{className:"no-indent",children:["Game formulas, mechanics, and other cursed knowledge:"," ",l.jsx("a",{href:iy,children:"Allagan Studies"})," -"," ",l.jsx("a",{href:oy,children:"#battle_system_discussion in The Balance"})," - Savage Speedkill Memorandum [",l.jsx("a",{href:ly,children:"JP"}),"][",l.jsx("a",{href:sy,children:"EN"}),"] -"," ",l.jsx("a",{href:ry,children:"Game's Haunted"})," - FPS tax research [",l.jsx("a",{href:cy,children:"CN"}),"][",l.jsx("a",{href:uy,children:"EN"}),"]"]}),l.jsxs("p",{className:"no-indent",children:["Other FFXIV community tools: ",l.jsx("a",{href:ey,children:"xivanalysis"})," -"," ",l.jsx("a",{href:lS,children:"XivGear"})," - ",l.jsx("a",{href:ty,children:"XIV Raider"})," and"," ",l.jsx("a",{href:ic,children:"Ama's Combat Sim"})]})]})}function $j(){return l.jsxs(l.Fragment,{children:[l.jsx(_i,{id:"additional-resources",label:""}),l.jsxs("p",{className:"no-indent",children:[l.jsx("i",{children:"XIV in the Shell"}),": ",l.jsx("a",{href:fi,children:"GitHub"})," - ",l.jsx("a",{href:Cu,children:"Blog"})," -"," ",l.jsx("a",{href:Rs,children:"Bluesky"})," - ",l.jsx("a",{href:Ts,children:"Discord"})," -"," ",l.jsx("a",{href:tE,children:"TischelBLM in the Shell"})]}),l.jsxs("p",{className:"no-indent",children:[": ",l.jsx("a",{href:Hj,children:"XIV"})," -"," ",l.jsx("a",{href:kj,children:"XIVwiki"})," - ",l.jsx("a",{href:ny,children:"XIVAPI"})," -"," ",l.jsx("a",{href:ay,children:"XIV-ID"})]}),l.jsxs("p",{className:"no-indent",children:[": ",l.jsx("a",{href:Jf,children:"The Balance"})," -"," ",l.jsx("a",{href:eE,children:"Icy Veins"})," - ",l.jsx("a",{href:$D,children:"FFLogs"})]}),l.jsxs("p",{className:"no-indent",children:[": ",l.jsx("a",{href:iy,children:"Allagan Studies"})," -"," ",l.jsx("a",{href:Uj,children:" "})," -"," ",l.jsx("a",{href:oy,children:"The Balance"})," -  [",l.jsx("a",{href:ly,children:""}),"][",l.jsx("a",{href:sy,children:""}),"] -"," ",l.jsx("a",{href:ry,children:"Game's Haunted"})," -  [",l.jsx("a",{href:cy,children:""}),"][",l.jsx("a",{href:uy,children:""}),"]"]}),l.jsxs("p",{className:"no-indent",children:[": ",l.jsx("a",{href:ey,children:"xivanalysis"})," -"," ",l.jsx("a",{href:Pj,children:"14"})," - ",l.jsx("a",{href:ty,children:"XIV Raider"})," "," ",l.jsx("a",{href:ic,children:"Ama"})]})]})}const MR=mf(),nE=C.createContext({items:[],addItem:()=>{}});function Jj(e){const t=C.useContext(nE);return l.jsxs("nav",{style:{float:"right",zIndex:1,maxWidth:"18%"},children:[l.jsx("p",{className:"no-indent",style:{paddingLeft:"0.8rem"},children:e.language==="zh"?"":"Navigation"}),l.jsxs("ul",{style:{listStyleType:"none",paddingLeft:"0.8rem",marginTop:"0.3rem"},children:[l.jsx("li",{style:{paddingBlockEnd:"0.15rem"},children:l.jsx("a",{href:"#top",children:e.language==="zh"?"":"back to top"})}),t.items.map(({id:a,label:o,indentLevel:s})=>l.jsx("li",{style:{paddingLeft:s>0?`${s*1.5}em`:void 0,paddingBlock:"0.15rem"},children:l.jsx("a",{href:"#"+a,children:o})},a))]})]})}function _i(e){const t=C.useContext(nE);return C.useEffect(()=>t.addItem({id:e.id,label:e.label,indentLevel:0}),[]),l.jsxs(l.Fragment,{children:[l.jsx("h2",{id:e.id,children:e.label}),e.content]})}function He(e){const t=C.useContext(nE);return C.useEffect(()=>t.addItem({id:e.id,label:e.label,indentLevel:1}),[]),l.jsxs(l.Fragment,{children:[l.jsx("h3",{id:e.id,children:e.label}),e.content]})}const Ay=C.createContext("en");function Je(e){const t=C.useContext(Ay),a=`${e.id}_${MR==="Dark"?"D":"L"}_${t==="zh"?"Z":"E"}_${e.name}.jpg`;return l.jsx("img",{src:`assets/ManualScreenshots/${a}`,alt:e.alt})}function QA(e){const t=ha(MR),a=l.jsx("style",{children:`
		@supports selector(::-webkit-scrollbar) {
			.visibleScrollbar::-webkit-scrollbar {
				appearance: none;
				background-color: ${t.bgLowContrast};
				height: 8px;
				width: 10px;
			}
			.visibleScrollbar::-webkit-scrollbar-thumb {
				background-color: ${t.bgHighContrast};
			}
		}
		@supports not selector(::-webkit-scrollbar) {
			.visibleScrollbar {
				scrollbar-color: ${t.bgHighContrast} ${t.bgLowContrast};
			}
		}
		a {
			color: ${t.accent};
		}
		b, h1, h2, h3, h4 {
			color: ${t.emphasis};
			margin-bottom: 0.2em;
		}
		p {
			margin-block-start: 0.2em;
			margin-block-end: 0.2em;
			text-indent: 2em;
		}
		.no-indent {
			text-indent: 0;
		}
		p:first-child {
			margin-block-start: 0px;
		}
		.help-tooltip {
			color: ${t.text};
			background-color: ${t.tipBackground};
			opacity: 0.98;
			max-width: 300px;
			outline: 1px solid ${t.bgHighContrast};
			transition: none;
			font-size: 100%;
			z-index: 10;
		}
		button:disabled {
			background-color: ${t.background};
		}
		img {
			width: 80%;
			max-width: fit-content;
			border: 2px dashed ${ha(MR).bgMediumContrast};
			align-self: center;
			margin: 5px;
		}
		ul {
			margin-block: 0;
		}
		ol {
			margin-block: 0;
		}
	`}),o=C.useRef(null);C.useEffect(()=>{o.current?.focus();const f=window.location.hash.slice(1);f&&o.current&&setTimeout(()=>{const m=document.getElementById(f);if(m&&o.current){const R=o.current.getBoundingClientRect(),T=m.getBoundingClientRect(),S=o.current.scrollTop,g=T.top-R.top+S;o.current.scrollTo({top:g-20,behavior:"smooth"})}},100)},[]);const[s,c]=C.useState([]),d=C.useCallback(({id:f,label:h,indentLevel:m})=>{c(R=>R.find(T=>T.id===f)?R:[...R,{id:f,label:h,indentLevel:m}])},[]);return l.jsxs("div",{ref:o,className:"visibleScrollbar",style:{position:"fixed",top:0,bottom:0,left:0,right:0,outline:"none",accentColor:t.accent,fontFamily:hi,fontSize:14,color:t.text,backgroundColor:t.background,height:"100%",overflow:"auto"},tabIndex:-1,children:[a,l.jsxs(nE.Provider,{value:{items:s,addItem:d},children:[window.innerWidth>1024&&l.jsx("div",{id:"nav-container",style:{position:"sticky",top:"1rem",marginInline:"1rem"},children:l.jsx(Jj,{language:e.language})}),l.jsx(Ay.Provider,{value:e.language??"en",children:l.jsx("div",{style:{marginLeft:"1em",marginRight:"1em",paddingRight:"1em",marginBottom:"1em",display:"flex",flexDirection:"column"},tabIndex:-1,children:e.language==="zh"?t3():e3()})})]})]})}function e3(){return l.jsxs(l.Fragment,{children:[l.jsx("h1",{id:"top",children:"XIV in the Shell User Manual"}),l.jsx(Gj,{}),l.jsx(Fj,{}),l.jsx(zj,{}),l.jsx(Kj,{}),l.jsx(Wj,{}),l.jsx(qj,{}),l.jsx(Qj,{})]})}function t3(){return l.jsxs(l.Fragment,{children:[l.jsx("h1",{id:"top",children:"XIV in the Shell "}),l.jsx(Bj,{}),l.jsx(jj,{}),l.jsx(Yj,{}),l.jsx(Vj,{}),l.jsx(Xj,{}),l.jsx(Zj,{}),l.jsx($j,{})]})}const dh=wM.createRoot(document.getElementById("root")),n3=new URLSearchParams(document.location.search),FN=Array.from(n3.keys()),pr=window.location.pathname;pr==="/manual"||pr==="/manual/"?dh.render(l.jsx(QA,{language:Rt("language")??void 0})):pr==="/manual_en"||pr==="/manual_en/"?dh.render(l.jsx(QA,{language:"en"})):pr==="/manual_zh"||pr==="/manual_zh/"?dh.render(l.jsx(QA,{language:"zh"})):dh.render(l.jsx(bj,{command:FN.length>0?FN[0]:void 0}));
