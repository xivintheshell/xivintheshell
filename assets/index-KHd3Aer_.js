function NM(e,t){for(var a=0;a<t.length;a++){const o=t[a];if(typeof o!="string"&&!Array.isArray(o)){for(const s in o)if(s!=="default"&&!(s in e)){const c=Object.getOwnPropertyDescriptor(o,s);c&&Object.defineProperty(e,s,c.get?c:{enumerable:!0,get:()=>o[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function a(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerPolicy&&(c.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?c.credentials="include":s.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(s){if(s.ep)return;s.ep=!0;const c=a(s);fetch(s.href,c)}})();function FN(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function CM(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var a=function o(){var s=!1;try{s=this instanceof o}catch{}return s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};a.prototype=t.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(e).forEach(function(o){var s=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(a,o,s.get?s:{enumerable:!0,get:function(){return e[o]}})}),a}var hA={exports:{}},$c={};var zg;function bM(){if(zg)return $c;zg=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function a(o,s,c){var d=null;if(c!==void 0&&(d=""+c),s.key!==void 0&&(d=""+s.key),"key"in s){c={};for(var h in s)h!=="key"&&(c[h]=s[h])}else c=s;return s=c.ref,{$$typeof:e,type:o,key:d,ref:s!==void 0?s:null,props:c}}return $c.Fragment=t,$c.jsx=a,$c.jsxs=a,$c}var Yg;function OM(){return Yg||(Yg=1,hA.exports=bM()),hA.exports}var l=OM(),fA={exports:{}},eu={},EA={exports:{}},mA={};var Kg;function DM(){return Kg||(Kg=1,function(e){function t(M,K){var $=M.length;M.push(K);e:for(;0<$;){var de=$-1>>>1,y=M[de];if(0<s(y,K))M[de]=K,M[$]=y,$=de;else break e}}function a(M){return M.length===0?null:M[0]}function o(M){if(M.length===0)return null;var K=M[0],$=M.pop();if($!==K){M[0]=$;e:for(var de=0,y=M.length,Y=y>>>1;de<Y;){var W=2*(de+1)-1,j=M[W],Z=W+1,ae=M[Z];if(0>s(j,$))Z<y&&0>s(ae,j)?(M[de]=ae,M[Z]=$,de=Z):(M[de]=j,M[W]=$,de=W);else if(Z<y&&0>s(ae,$))M[de]=ae,M[Z]=$,de=Z;else break e}}return K}function s(M,K){var $=M.sortIndex-K.sortIndex;return $!==0?$:M.id-K.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;e.unstable_now=function(){return c.now()}}else{var d=Date,h=d.now();e.unstable_now=function(){return d.now()-h}}var f=[],m=[],R=1,T=null,S=3,I=!1,C=!1,_=!1,O=!1,D=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;function L(M){for(var K=a(m);K!==null;){if(K.callback===null)o(m);else if(K.startTime<=M)o(m),K.sortIndex=K.expirationTime,t(f,K);else break;K=a(m)}}function w(M){if(_=!1,L(M),!C)if(a(f)!==null)C=!0,G||(G=!0,te());else{var K=a(m);K!==null&&he(w,K.startTime-M)}}var G=!1,B=-1,z=5,Q=-1;function ce(){return O?!0:!(e.unstable_now()-Q<z)}function ue(){if(O=!1,G){var M=e.unstable_now();Q=M;var K=!0;try{e:{C=!1,_&&(_=!1,H(B),B=-1),I=!0;var $=S;try{t:{for(L(M),T=a(f);T!==null&&!(T.expirationTime>M&&ce());){var de=T.callback;if(typeof de=="function"){T.callback=null,S=T.priorityLevel;var y=de(T.expirationTime<=M);if(M=e.unstable_now(),typeof y=="function"){T.callback=y,L(M),K=!0;break t}T===a(f)&&o(f),L(M)}else o(f);T=a(f)}if(T!==null)K=!0;else{var Y=a(m);Y!==null&&he(w,Y.startTime-M),K=!1}}break e}finally{T=null,S=$,I=!1}K=void 0}}finally{K?te():G=!1}}}var te;if(typeof x=="function")te=function(){x(ue)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,Ee=ee.port2;ee.port1.onmessage=ue,te=function(){Ee.postMessage(null)}}else te=function(){D(ue,0)};function he(M,K){B=D(function(){M(e.unstable_now())},K)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return S},e.unstable_next=function(M){switch(S){case 1:case 2:case 3:var K=3;break;default:K=S}var $=S;S=K;try{return M()}finally{S=$}},e.unstable_requestPaint=function(){O=!0},e.unstable_runWithPriority=function(M,K){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var $=S;S=M;try{return K()}finally{S=$}},e.unstable_scheduleCallback=function(M,K,$){var de=e.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?de+$:de):$=de,M){case 1:var y=-1;break;case 2:y=250;break;case 5:y=1073741823;break;case 4:y=1e4;break;default:y=5e3}return y=$+y,M={id:R++,callback:K,priorityLevel:M,startTime:$,expirationTime:y,sortIndex:-1},$>de?(M.sortIndex=$,t(m,M),a(f)===null&&M===a(m)&&(_?(H(B),B=-1):_=!0,he(w,$-de))):(M.sortIndex=y,t(f,M),C||I||(C=!0,G||(G=!0,te()))),M},e.unstable_shouldYield=ce,e.unstable_wrapCallback=function(M){var K=S;return function(){var $=S;S=K;try{return M.apply(this,arguments)}finally{S=$}}}}(mA)),mA}var Vg;function yM(){return Vg||(Vg=1,EA.exports=DM()),EA.exports}var AA={exports:{}},We={};var Wg;function vM(){if(Wg)return We;Wg=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),T=Symbol.iterator;function S(y){return y===null||typeof y!="object"?null:(y=T&&y[T]||y["@@iterator"],typeof y=="function"?y:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,_={};function O(y,Y,W){this.props=y,this.context=Y,this.refs=_,this.updater=W||I}O.prototype.isReactComponent={},O.prototype.setState=function(y,Y){if(typeof y!="object"&&typeof y!="function"&&y!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,y,Y,"setState")},O.prototype.forceUpdate=function(y){this.updater.enqueueForceUpdate(this,y,"forceUpdate")};function D(){}D.prototype=O.prototype;function H(y,Y,W){this.props=y,this.context=Y,this.refs=_,this.updater=W||I}var x=H.prototype=new D;x.constructor=H,C(x,O.prototype),x.isPureReactComponent=!0;var L=Array.isArray,w={H:null,A:null,T:null,S:null,V:null},G=Object.prototype.hasOwnProperty;function B(y,Y,W,j,Z,ae){return W=ae.ref,{$$typeof:e,type:y,key:Y,ref:W!==void 0?W:null,props:ae}}function z(y,Y){return B(y.type,Y,void 0,void 0,void 0,y.props)}function Q(y){return typeof y=="object"&&y!==null&&y.$$typeof===e}function ce(y){var Y={"=":"=0",":":"=2"};return"$"+y.replace(/[=:]/g,function(W){return Y[W]})}var ue=/\/+/g;function te(y,Y){return typeof y=="object"&&y!==null&&y.key!=null?ce(""+y.key):Y.toString(36)}function ee(){}function Ee(y){switch(y.status){case"fulfilled":return y.value;case"rejected":throw y.reason;default:switch(typeof y.status=="string"?y.then(ee,ee):(y.status="pending",y.then(function(Y){y.status==="pending"&&(y.status="fulfilled",y.value=Y)},function(Y){y.status==="pending"&&(y.status="rejected",y.reason=Y)})),y.status){case"fulfilled":return y.value;case"rejected":throw y.reason}}throw y}function he(y,Y,W,j,Z){var ae=typeof y;(ae==="undefined"||ae==="boolean")&&(y=null);var P=!1;if(y===null)P=!0;else switch(ae){case"bigint":case"string":case"number":P=!0;break;case"object":switch(y.$$typeof){case e:case t:P=!0;break;case R:return P=y._init,he(P(y._payload),Y,W,j,Z)}}if(P)return Z=Z(y),P=j===""?"."+te(y,0):j,L(Z)?(W="",P!=null&&(W=P.replace(ue,"$&/")+"/"),he(Z,Y,W,"",function(fe){return fe})):Z!=null&&(Q(Z)&&(Z=z(Z,W+(Z.key==null||y&&y.key===Z.key?"":(""+Z.key).replace(ue,"$&/")+"/")+P)),Y.push(Z)),1;P=0;var q=j===""?".":j+":";if(L(y))for(var se=0;se<y.length;se++)j=y[se],ae=q+te(j,se),P+=he(j,Y,W,ae,Z);else if(se=S(y),typeof se=="function")for(y=se.call(y),se=0;!(j=y.next()).done;)j=j.value,ae=q+te(j,se++),P+=he(j,Y,W,ae,Z);else if(ae==="object"){if(typeof y.then=="function")return he(Ee(y),Y,W,j,Z);throw Y=String(y),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(y).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return P}function M(y,Y,W){if(y==null)return y;var j=[],Z=0;return he(y,j,"","",function(ae){return Y.call(W,ae,Z++)}),j}function K(y){if(y._status===-1){var Y=y._result;Y=Y(),Y.then(function(W){(y._status===0||y._status===-1)&&(y._status=1,y._result=W)},function(W){(y._status===0||y._status===-1)&&(y._status=2,y._result=W)}),y._status===-1&&(y._status=0,y._result=Y)}if(y._status===1)return y._result.default;throw y._result}var $=typeof reportError=="function"?reportError:function(y){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof y=="object"&&y!==null&&typeof y.message=="string"?String(y.message):String(y),error:y});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",y);return}console.error(y)};function de(){}return We.Children={map:M,forEach:function(y,Y,W){M(y,function(){Y.apply(this,arguments)},W)},count:function(y){var Y=0;return M(y,function(){Y++}),Y},toArray:function(y){return M(y,function(Y){return Y})||[]},only:function(y){if(!Q(y))throw Error("React.Children.only expected to receive a single React element child.");return y}},We.Component=O,We.Fragment=a,We.Profiler=s,We.PureComponent=H,We.StrictMode=o,We.Suspense=f,We.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=w,We.__COMPILER_RUNTIME={__proto__:null,c:function(y){return w.H.useMemoCache(y)}},We.cache=function(y){return function(){return y.apply(null,arguments)}},We.cloneElement=function(y,Y,W){if(y==null)throw Error("The argument must be a React element, but you passed "+y+".");var j=C({},y.props),Z=y.key,ae=void 0;if(Y!=null)for(P in Y.ref!==void 0&&(ae=void 0),Y.key!==void 0&&(Z=""+Y.key),Y)!G.call(Y,P)||P==="key"||P==="__self"||P==="__source"||P==="ref"&&Y.ref===void 0||(j[P]=Y[P]);var P=arguments.length-2;if(P===1)j.children=W;else if(1<P){for(var q=Array(P),se=0;se<P;se++)q[se]=arguments[se+2];j.children=q}return B(y.type,Z,void 0,void 0,ae,j)},We.createContext=function(y){return y={$$typeof:d,_currentValue:y,_currentValue2:y,_threadCount:0,Provider:null,Consumer:null},y.Provider=y,y.Consumer={$$typeof:c,_context:y},y},We.createElement=function(y,Y,W){var j,Z={},ae=null;if(Y!=null)for(j in Y.key!==void 0&&(ae=""+Y.key),Y)G.call(Y,j)&&j!=="key"&&j!=="__self"&&j!=="__source"&&(Z[j]=Y[j]);var P=arguments.length-2;if(P===1)Z.children=W;else if(1<P){for(var q=Array(P),se=0;se<P;se++)q[se]=arguments[se+2];Z.children=q}if(y&&y.defaultProps)for(j in P=y.defaultProps,P)Z[j]===void 0&&(Z[j]=P[j]);return B(y,ae,void 0,void 0,null,Z)},We.createRef=function(){return{current:null}},We.forwardRef=function(y){return{$$typeof:h,render:y}},We.isValidElement=Q,We.lazy=function(y){return{$$typeof:R,_payload:{_status:-1,_result:y},_init:K}},We.memo=function(y,Y){return{$$typeof:m,type:y,compare:Y===void 0?null:Y}},We.startTransition=function(y){var Y=w.T,W={};w.T=W;try{var j=y(),Z=w.S;Z!==null&&Z(W,j),typeof j=="object"&&j!==null&&typeof j.then=="function"&&j.then(de,$)}catch(ae){$(ae)}finally{w.T=Y}},We.unstable_useCacheRefresh=function(){return w.H.useCacheRefresh()},We.use=function(y){return w.H.use(y)},We.useActionState=function(y,Y,W){return w.H.useActionState(y,Y,W)},We.useCallback=function(y,Y){return w.H.useCallback(y,Y)},We.useContext=function(y){return w.H.useContext(y)},We.useDebugValue=function(){},We.useDeferredValue=function(y,Y){return w.H.useDeferredValue(y,Y)},We.useEffect=function(y,Y,W){var j=w.H;if(typeof W=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return j.useEffect(y,Y)},We.useId=function(){return w.H.useId()},We.useImperativeHandle=function(y,Y,W){return w.H.useImperativeHandle(y,Y,W)},We.useInsertionEffect=function(y,Y){return w.H.useInsertionEffect(y,Y)},We.useLayoutEffect=function(y,Y){return w.H.useLayoutEffect(y,Y)},We.useMemo=function(y,Y){return w.H.useMemo(y,Y)},We.useOptimistic=function(y,Y){return w.H.useOptimistic(y,Y)},We.useReducer=function(y,Y,W){return w.H.useReducer(y,Y,W)},We.useRef=function(y){return w.H.useRef(y)},We.useState=function(y){return w.H.useState(y)},We.useSyncExternalStore=function(y,Y,W){return w.H.useSyncExternalStore(y,Y,W)},We.useTransition=function(){return w.H.useTransition()},We.version="19.1.0",We}var Xg;function vR(){return Xg||(Xg=1,AA.exports=vM()),AA.exports}var RA={exports:{}},aa={};var qg;function MM(){if(qg)return aa;qg=1;var e=vR();function t(f){var m="https://react.dev/errors/"+f;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var R=2;R<arguments.length;R++)m+="&args[]="+encodeURIComponent(arguments[R])}return"Minified React error #"+f+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var o={d:{f:a,r:function(){throw Error(t(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},s=Symbol.for("react.portal");function c(f,m,R){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:T==null?null:""+T,children:f,containerInfo:m,implementation:R}}var d=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(f,m){if(f==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return aa.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,aa.createPortal=function(f,m){var R=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(t(299));return c(f,m,null,R)},aa.flushSync=function(f){var m=d.T,R=o.p;try{if(d.T=null,o.p=2,f)return f()}finally{d.T=m,o.p=R,o.d.f()}},aa.preconnect=function(f,m){typeof f=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,o.d.C(f,m))},aa.prefetchDNS=function(f){typeof f=="string"&&o.d.D(f)},aa.preinit=function(f,m){if(typeof f=="string"&&m&&typeof m.as=="string"){var R=m.as,T=h(R,m.crossOrigin),S=typeof m.integrity=="string"?m.integrity:void 0,I=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;R==="style"?o.d.S(f,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:T,integrity:S,fetchPriority:I}):R==="script"&&o.d.X(f,{crossOrigin:T,integrity:S,fetchPriority:I,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},aa.preinitModule=function(f,m){if(typeof f=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var R=h(m.as,m.crossOrigin);o.d.M(f,{crossOrigin:R,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&o.d.M(f)},aa.preload=function(f,m){if(typeof f=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var R=m.as,T=h(R,m.crossOrigin);o.d.L(f,R,{crossOrigin:T,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},aa.preloadModule=function(f,m){if(typeof f=="string")if(m){var R=h(m.as,m.crossOrigin);o.d.m(f,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:R,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else o.d.m(f)},aa.requestFormReset=function(f){o.d.r(f)},aa.unstable_batchedUpdates=function(f,m){return f(m)},aa.useFormState=function(f,m,R){return d.H.useFormState(f,m,R)},aa.useFormStatus=function(){return d.H.useHostTransitionStatus()},aa.version="19.1.0",aa}var Zg;function jN(){if(Zg)return RA.exports;Zg=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),RA.exports=MM(),RA.exports}var Qg;function LM(){if(Qg)return eu;Qg=1;var e=yM(),t=vR(),a=jN();function o(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)i+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function c(n){var i=n,r=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(r=i.return),n=i.return;while(n)}return i.tag===3?r:null}function d(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function h(n){if(c(n)!==n)throw Error(o(188))}function f(n){var i=n.alternate;if(!i){if(i=c(n),i===null)throw Error(o(188));return i!==n?null:n}for(var r=n,u=i;;){var E=r.return;if(E===null)break;var A=E.alternate;if(A===null){if(u=E.return,u!==null){r=u;continue}break}if(E.child===A.child){for(A=E.child;A;){if(A===r)return h(E),n;if(A===u)return h(E),i;A=A.sibling}throw Error(o(188))}if(r.return!==u.return)r=E,u=A;else{for(var N=!1,v=E.child;v;){if(v===r){N=!0,r=E,u=A;break}if(v===u){N=!0,u=E,r=A;break}v=v.sibling}if(!N){for(v=A.child;v;){if(v===r){N=!0,r=A,u=E;break}if(v===u){N=!0,u=A,r=E;break}v=v.sibling}if(!N)throw Error(o(189))}}if(r.alternate!==u)throw Error(o(190))}if(r.tag!==3)throw Error(o(188));return r.stateNode.current===r?n:i}function m(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=m(n),i!==null)return i;n=n.sibling}return null}var R=Object.assign,T=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),I=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),H=Symbol.for("react.consumer"),x=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),Q=Symbol.for("react.activity"),ce=Symbol.for("react.memo_cache_sentinel"),ue=Symbol.iterator;function te(n){return n===null||typeof n!="object"?null:(n=ue&&n[ue]||n["@@iterator"],typeof n=="function"?n:null)}var ee=Symbol.for("react.client.reference");function Ee(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===ee?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case C:return"Fragment";case O:return"Profiler";case _:return"StrictMode";case w:return"Suspense";case G:return"SuspenseList";case Q:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case I:return"Portal";case x:return(n.displayName||"Context")+".Provider";case H:return(n._context.displayName||"Context")+".Consumer";case L:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case B:return i=n.displayName||null,i!==null?i:Ee(n.type)||"Memo";case z:i=n._payload,n=n._init;try{return Ee(n(i))}catch{}}return null}var he=Array.isArray,M=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$={pending:!1,data:null,method:null,action:null},de=[],y=-1;function Y(n){return{current:n}}function W(n){0>y||(n.current=de[y],de[y]=null,y--)}function j(n,i){y++,de[y]=n.current,n.current=i}var Z=Y(null),ae=Y(null),P=Y(null),q=Y(null);function se(n,i){switch(j(P,i),j(ae,n),j(Z,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?Rg(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=Rg(i),n=Tg(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}W(Z),j(Z,n)}function fe(){W(Z),W(ae),W(P)}function Se(n){n.memoizedState!==null&&j(q,n);var i=Z.current,r=Tg(i,n.type);i!==r&&(j(ae,n),j(Z,r))}function Oe(n){ae.current===n&&(W(Z),W(ae)),q.current===n&&(W(q),Xc._currentValue=$)}var Ue=Object.prototype.hasOwnProperty,me=e.unstable_scheduleCallback,De=e.unstable_cancelCallback,_e=e.unstable_shouldYield,ge=e.unstable_requestPaint,ve=e.unstable_now,Ye=e.unstable_getCurrentPriorityLevel,Sn=e.unstable_ImmediatePriority,Si=e.unstable_UserBlockingPriority,pa=e.unstable_NormalPriority,ao=e.unstable_LowPriority,io=e.unstable_IdlePriority,bs=e.log,Os=e.unstable_setDisableYieldValue,Lo=null,rt=null;function Yt(n){if(typeof bs=="function"&&Os(n),rt&&typeof rt.setStrictMode=="function")try{rt.setStrictMode(Lo,n)}catch{}}var wt=Math.clz32?Math.clz32:ac,qa=Math.log,Ds=Math.LN2;function ac(n){return n>>>=0,n===0?32:31-(qa(n)/Ds|0)|0}var Dl=256,ys=4194304;function ki(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function vs(n,i,r){var u=n.pendingLanes;if(u===0)return 0;var E=0,A=n.suspendedLanes,N=n.pingedLanes;n=n.warmLanes;var v=u&134217727;return v!==0?(u=v&~A,u!==0?E=ki(u):(N&=v,N!==0?E=ki(N):r||(r=v&~n,r!==0&&(E=ki(r))))):(v=u&~A,v!==0?E=ki(v):N!==0?E=ki(N):r||(r=u&~n,r!==0&&(E=ki(r)))),E===0?0:i!==0&&i!==E&&(i&A)===0&&(A=E&-E,r=i&-i,A>=r||A===32&&(r&4194048)!==0)?i:E}function yl(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function tE(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wu(){var n=Dl;return Dl<<=1,(Dl&4194048)===0&&(Dl=256),n}function Ms(){var n=ys;return ys<<=1,(ys&62914560)===0&&(ys=4194304),n}function Ls(n){for(var i=[],r=0;31>r;r++)i.push(n);return i}function vl(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function nE(n,i,r,u,E,A){var N=n.pendingLanes;n.pendingLanes=r,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=r,n.entangledLanes&=r,n.errorRecoveryDisabledLanes&=r,n.shellSuspendCounter=0;var v=n.entanglements,F=n.expirationTimes,oe=n.hiddenUpdates;for(r=N&~r;0<r;){var Ae=31-wt(r),Te=1<<Ae;v[Ae]=0,F[Ae]=-1;var le=oe[Ae];if(le!==null)for(oe[Ae]=null,Ae=0;Ae<le.length;Ae++){var re=le[Ae];re!==null&&(re.lane&=-536870913)}r&=~Te}u!==0&&Gu(n,u,0),A!==0&&E===0&&n.tag!==0&&(n.suspendedLanes|=A&~(N&~i))}function Gu(n,i,r){n.pendingLanes|=i,n.suspendedLanes&=~i;var u=31-wt(i);n.entangledLanes|=i,n.entanglements[u]=n.entanglements[u]|1073741824|r&4194090}function Bu(n,i){var r=n.entangledLanes|=i;for(n=n.entanglements;r;){var u=31-wt(r),E=1<<u;E&i|n[u]&i&&(n[u]|=i),r&=~E}}function ic(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function aE(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function iS(){var n=K.p;return n!==0?n:(n=window.event,n===void 0?32:Pg(n.type))}function fy(n,i){var r=K.p;try{return K.p=n,i()}finally{K.p=r}}var xo=Math.random().toString(36).slice(2),ta="__reactFiber$"+xo,Na="__reactProps$"+xo,xs="__reactContainer$"+xo,iE="__reactEvents$"+xo,Ey="__reactListeners$"+xo,my="__reactHandles$"+xo,oS="__reactResources$"+xo,oc="__reactMarker$"+xo;function oE(n){delete n[ta],delete n[Na],delete n[iE],delete n[Ey],delete n[my]}function Hs(n){var i=n[ta];if(i)return i;for(var r=n.parentNode;r;){if(i=r[xs]||r[ta]){if(r=i.alternate,i.child!==null||r!==null&&r.child!==null)for(n=gg(n);n!==null;){if(r=n[ta])return r;n=gg(n)}return i}n=r,r=n.parentNode}return null}function ks(n){if(n=n[ta]||n[xs]){var i=n.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return n}return null}function lc(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(o(33))}function Us(n){var i=n[oS];return i||(i=n[oS]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Ln(n){n[oc]=!0}var lS=new Set,sS={};function Ml(n,i){Ps(n,i),Ps(n+"Capture",i)}function Ps(n,i){for(sS[n]=i,n=0;n<i.length;n++)lS.add(i[n])}var Ay=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),rS={},cS={};function Ry(n){return Ue.call(cS,n)?!0:Ue.call(rS,n)?!1:Ay.test(n)?cS[n]=!0:(rS[n]=!0,!1)}function Fu(n,i,r){if(Ry(i))if(r===null)n.removeAttribute(i);else{switch(typeof r){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+r)}}function ju(n,i,r){if(r===null)n.removeAttribute(i);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+r)}}function oo(n,i,r,u){if(u===null)n.removeAttribute(r);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttributeNS(i,r,""+u)}}var lE,uS;function ws(n){if(lE===void 0)try{throw Error()}catch(r){var i=r.stack.trim().match(/\n( *(at )?)/);lE=i&&i[1]||"",uS=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+lE+n+uS}var sE=!1;function rE(n,i){if(!n||sE)return"";sE=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var Te=function(){throw Error()};if(Object.defineProperty(Te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Te,[])}catch(re){var le=re}Reflect.construct(n,[],Te)}else{try{Te.call()}catch(re){le=re}n.call(Te.prototype)}}else{try{throw Error()}catch(re){le=re}(Te=n())&&typeof Te.catch=="function"&&Te.catch(function(){})}}catch(re){if(re&&le&&typeof re.stack=="string")return[re.stack,le.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var A=u.DetermineComponentFrameRoot(),N=A[0],v=A[1];if(N&&v){var F=N.split(`
`),oe=v.split(`
`);for(E=u=0;u<F.length&&!F[u].includes("DetermineComponentFrameRoot");)u++;for(;E<oe.length&&!oe[E].includes("DetermineComponentFrameRoot");)E++;if(u===F.length||E===oe.length)for(u=F.length-1,E=oe.length-1;1<=u&&0<=E&&F[u]!==oe[E];)E--;for(;1<=u&&0<=E;u--,E--)if(F[u]!==oe[E]){if(u!==1||E!==1)do if(u--,E--,0>E||F[u]!==oe[E]){var Ae=`
`+F[u].replace(" at new "," at ");return n.displayName&&Ae.includes("<anonymous>")&&(Ae=Ae.replace("<anonymous>",n.displayName)),Ae}while(1<=u&&0<=E);break}}}finally{sE=!1,Error.prepareStackTrace=r}return(r=n?n.displayName||n.name:"")?ws(r):""}function Ty(n){switch(n.tag){case 26:case 27:case 5:return ws(n.type);case 16:return ws("Lazy");case 13:return ws("Suspense");case 19:return ws("SuspenseList");case 0:case 15:return rE(n.type,!1);case 11:return rE(n.type.render,!1);case 1:return rE(n.type,!0);case 31:return ws("Activity");default:return""}}function dS(n){try{var i="";do i+=Ty(n),n=n.return;while(n);return i}catch(r){return`
Error generating stack: `+r.message+`
`+r.stack}}function Za(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function hS(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Sy(n){var i=hS(n)?"checked":"value",r=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),u=""+n[i];if(!n.hasOwnProperty(i)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var E=r.get,A=r.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return E.call(this)},set:function(N){u=""+N,A.call(this,N)}}),Object.defineProperty(n,i,{enumerable:r.enumerable}),{getValue:function(){return u},setValue:function(N){u=""+N},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function zu(n){n._valueTracker||(n._valueTracker=Sy(n))}function fS(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var r=i.getValue(),u="";return n&&(u=hS(n)?n.checked?"true":"false":n.value),n=u,n!==r?(i.setValue(n),!0):!1}function Yu(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Iy=/[\n"\\]/g;function Qa(n){return n.replace(Iy,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function cE(n,i,r,u,E,A,N,v){n.name="",N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?n.type=N:n.removeAttribute("type"),i!=null?N==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+Za(i)):n.value!==""+Za(i)&&(n.value=""+Za(i)):N!=="submit"&&N!=="reset"||n.removeAttribute("value"),i!=null?uE(n,N,Za(i)):r!=null?uE(n,N,Za(r)):u!=null&&n.removeAttribute("value"),E==null&&A!=null&&(n.defaultChecked=!!A),E!=null&&(n.checked=E&&typeof E!="function"&&typeof E!="symbol"),v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?n.name=""+Za(v):n.removeAttribute("name")}function ES(n,i,r,u,E,A,N,v){if(A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(n.type=A),i!=null||r!=null){if(!(A!=="submit"&&A!=="reset"||i!=null))return;r=r!=null?""+Za(r):"",i=i!=null?""+Za(i):r,v||i===n.value||(n.value=i),n.defaultValue=i}u=u??E,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=v?n.checked:!!u,n.defaultChecked=!!u,N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(n.name=N)}function uE(n,i,r){i==="number"&&Yu(n.ownerDocument)===n||n.defaultValue===""+r||(n.defaultValue=""+r)}function Gs(n,i,r,u){if(n=n.options,i){i={};for(var E=0;E<r.length;E++)i["$"+r[E]]=!0;for(r=0;r<n.length;r++)E=i.hasOwnProperty("$"+n[r].value),n[r].selected!==E&&(n[r].selected=E),E&&u&&(n[r].defaultSelected=!0)}else{for(r=""+Za(r),i=null,E=0;E<n.length;E++){if(n[E].value===r){n[E].selected=!0,u&&(n[E].defaultSelected=!0);return}i!==null||n[E].disabled||(i=n[E])}i!==null&&(i.selected=!0)}}function mS(n,i,r){if(i!=null&&(i=""+Za(i),i!==n.value&&(n.value=i),r==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=r!=null?""+Za(r):""}function AS(n,i,r,u){if(i==null){if(u!=null){if(r!=null)throw Error(o(92));if(he(u)){if(1<u.length)throw Error(o(93));u=u[0]}r=u}r==null&&(r=""),i=r}r=Za(i),n.defaultValue=r,u=n.textContent,u===r&&u!==""&&u!==null&&(n.value=u)}function Bs(n,i){if(i){var r=n.firstChild;if(r&&r===n.lastChild&&r.nodeType===3){r.nodeValue=i;return}}n.textContent=i}var _y=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function RS(n,i,r){var u=i.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?u?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":u?n.setProperty(i,r):typeof r!="number"||r===0||_y.has(i)?i==="float"?n.cssFloat=r:n[i]=(""+r).trim():n[i]=r+"px"}function TS(n,i,r){if(i!=null&&typeof i!="object")throw Error(o(62));if(n=n.style,r!=null){for(var u in r)!r.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var E in i)u=i[E],i.hasOwnProperty(E)&&r[E]!==u&&RS(n,E,u)}else for(var A in i)i.hasOwnProperty(A)&&RS(n,A,i[A])}function dE(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gy=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),py=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ku(n){return py.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var hE=null;function fE(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Fs=null,js=null;function SS(n){var i=ks(n);if(i&&(n=i.stateNode)){var r=n[Na]||null;e:switch(n=i.stateNode,i.type){case"input":if(cE(n,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),i=r.name,r.type==="radio"&&i!=null){for(r=n;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+Qa(""+i)+'"][type="radio"]'),i=0;i<r.length;i++){var u=r[i];if(u!==n&&u.form===n.form){var E=u[Na]||null;if(!E)throw Error(o(90));cE(u,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(i=0;i<r.length;i++)u=r[i],u.form===n.form&&fS(u)}break e;case"textarea":mS(n,r.value,r.defaultValue);break e;case"select":i=r.value,i!=null&&Gs(n,!!r.multiple,i,!1)}}}var EE=!1;function IS(n,i,r){if(EE)return n(i,r);EE=!0;try{var u=n(i);return u}finally{if(EE=!1,(Fs!==null||js!==null)&&(vd(),Fs&&(i=Fs,n=js,js=Fs=null,SS(i),n)))for(i=0;i<n.length;i++)SS(n[i])}}function sc(n,i){var r=n.stateNode;if(r===null)return null;var u=r[Na]||null;if(u===null)return null;r=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(r&&typeof r!="function")throw Error(o(231,i,typeof r));return r}var lo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),mE=!1;if(lo)try{var rc={};Object.defineProperty(rc,"passive",{get:function(){mE=!0}}),window.addEventListener("test",rc,rc),window.removeEventListener("test",rc,rc)}catch{mE=!1}var Ho=null,AE=null,Vu=null;function _S(){if(Vu)return Vu;var n,i=AE,r=i.length,u,E="value"in Ho?Ho.value:Ho.textContent,A=E.length;for(n=0;n<r&&i[n]===E[n];n++);var N=r-n;for(u=1;u<=N&&i[r-u]===E[A-u];u++);return Vu=E.slice(n,1<u?1-u:void 0)}function Wu(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Xu(){return!0}function gS(){return!1}function Ca(n){function i(r,u,E,A,N){this._reactName=r,this._targetInst=E,this.type=u,this.nativeEvent=A,this.target=N,this.currentTarget=null;for(var v in n)n.hasOwnProperty(v)&&(r=n[v],this[v]=r?r(A):A[v]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?Xu:gS,this.isPropagationStopped=gS,this}return R(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Xu)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Xu)},persist:function(){},isPersistent:Xu}),i}var Ll={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qu=Ca(Ll),cc=R({},Ll,{view:0,detail:0}),Ny=Ca(cc),RE,TE,uc,Zu=R({},cc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:IE,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==uc&&(uc&&n.type==="mousemove"?(RE=n.screenX-uc.screenX,TE=n.screenY-uc.screenY):TE=RE=0,uc=n),RE)},movementY:function(n){return"movementY"in n?n.movementY:TE}}),pS=Ca(Zu),Cy=R({},Zu,{dataTransfer:0}),by=Ca(Cy),Oy=R({},cc,{relatedTarget:0}),SE=Ca(Oy),Dy=R({},Ll,{animationName:0,elapsedTime:0,pseudoElement:0}),yy=Ca(Dy),vy=R({},Ll,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),My=Ca(vy),Ly=R({},Ll,{data:0}),NS=Ca(Ly),xy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ky={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Uy(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=ky[n])?!!i[n]:!1}function IE(){return Uy}var Py=R({},cc,{key:function(n){if(n.key){var i=xy[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Wu(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Hy[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:IE,charCode:function(n){return n.type==="keypress"?Wu(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Wu(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),wy=Ca(Py),Gy=R({},Zu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),CS=Ca(Gy),By=R({},cc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:IE}),Fy=Ca(By),jy=R({},Ll,{propertyName:0,elapsedTime:0,pseudoElement:0}),zy=Ca(jy),Yy=R({},Zu,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Ky=Ca(Yy),Vy=R({},Ll,{newState:0,oldState:0}),Wy=Ca(Vy),Xy=[9,13,27,32],_E=lo&&"CompositionEvent"in window,dc=null;lo&&"documentMode"in document&&(dc=document.documentMode);var qy=lo&&"TextEvent"in window&&!dc,bS=lo&&(!_E||dc&&8<dc&&11>=dc),OS=" ",DS=!1;function yS(n,i){switch(n){case"keyup":return Xy.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vS(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var zs=!1;function Zy(n,i){switch(n){case"compositionend":return vS(i);case"keypress":return i.which!==32?null:(DS=!0,OS);case"textInput":return n=i.data,n===OS&&DS?null:n;default:return null}}function Qy(n,i){if(zs)return n==="compositionend"||!_E&&yS(n,i)?(n=_S(),Vu=AE=Ho=null,zs=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return bS&&i.locale!=="ko"?null:i.data;default:return null}}var Jy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function MS(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!Jy[n.type]:i==="textarea"}function LS(n,i,r,u){Fs?js?js.push(u):js=[u]:Fs=u,i=Ud(i,"onChange"),0<i.length&&(r=new qu("onChange","change",null,r,u),n.push({event:r,listeners:i}))}var hc=null,fc=null;function $y(n){hg(n,0)}function Qu(n){var i=lc(n);if(fS(i))return n}function xS(n,i){if(n==="change")return i}var HS=!1;if(lo){var gE;if(lo){var pE="oninput"in document;if(!pE){var kS=document.createElement("div");kS.setAttribute("oninput","return;"),pE=typeof kS.oninput=="function"}gE=pE}else gE=!1;HS=gE&&(!document.documentMode||9<document.documentMode)}function US(){hc&&(hc.detachEvent("onpropertychange",PS),fc=hc=null)}function PS(n){if(n.propertyName==="value"&&Qu(fc)){var i=[];LS(i,fc,n,fE(n)),IS($y,i)}}function ev(n,i,r){n==="focusin"?(US(),hc=i,fc=r,hc.attachEvent("onpropertychange",PS)):n==="focusout"&&US()}function tv(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Qu(fc)}function nv(n,i){if(n==="click")return Qu(i)}function av(n,i){if(n==="input"||n==="change")return Qu(i)}function iv(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Ha=typeof Object.is=="function"?Object.is:iv;function Ec(n,i){if(Ha(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var r=Object.keys(n),u=Object.keys(i);if(r.length!==u.length)return!1;for(u=0;u<r.length;u++){var E=r[u];if(!Ue.call(i,E)||!Ha(n[E],i[E]))return!1}return!0}function wS(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function GS(n,i){var r=wS(n);n=0;for(var u;r;){if(r.nodeType===3){if(u=n+r.textContent.length,n<=i&&u>=i)return{node:r,offset:i-n};n=u}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=wS(r)}}function BS(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?BS(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function FS(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=Yu(n.document);i instanceof n.HTMLIFrameElement;){try{var r=typeof i.contentWindow.location.href=="string"}catch{r=!1}if(r)n=i.contentWindow;else break;i=Yu(n.document)}return i}function NE(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var ov=lo&&"documentMode"in document&&11>=document.documentMode,Ys=null,CE=null,mc=null,bE=!1;function jS(n,i,r){var u=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;bE||Ys==null||Ys!==Yu(u)||(u=Ys,"selectionStart"in u&&NE(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),mc&&Ec(mc,u)||(mc=u,u=Ud(CE,"onSelect"),0<u.length&&(i=new qu("onSelect","select",null,i,r),n.push({event:i,listeners:u}),i.target=Ys)))}function xl(n,i){var r={};return r[n.toLowerCase()]=i.toLowerCase(),r["Webkit"+n]="webkit"+i,r["Moz"+n]="moz"+i,r}var Ks={animationend:xl("Animation","AnimationEnd"),animationiteration:xl("Animation","AnimationIteration"),animationstart:xl("Animation","AnimationStart"),transitionrun:xl("Transition","TransitionRun"),transitionstart:xl("Transition","TransitionStart"),transitioncancel:xl("Transition","TransitionCancel"),transitionend:xl("Transition","TransitionEnd")},OE={},zS={};lo&&(zS=document.createElement("div").style,"AnimationEvent"in window||(delete Ks.animationend.animation,delete Ks.animationiteration.animation,delete Ks.animationstart.animation),"TransitionEvent"in window||delete Ks.transitionend.transition);function Hl(n){if(OE[n])return OE[n];if(!Ks[n])return n;var i=Ks[n],r;for(r in i)if(i.hasOwnProperty(r)&&r in zS)return OE[n]=i[r];return n}var YS=Hl("animationend"),KS=Hl("animationiteration"),VS=Hl("animationstart"),lv=Hl("transitionrun"),sv=Hl("transitionstart"),rv=Hl("transitioncancel"),WS=Hl("transitionend"),XS=new Map,DE="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");DE.push("scrollEnd");function Ii(n,i){XS.set(n,i),Ml(i,[n])}var qS=new WeakMap;function Ja(n,i){if(typeof n=="object"&&n!==null){var r=qS.get(n);return r!==void 0?r:(i={value:n,source:i,stack:dS(i)},qS.set(n,i),i)}return{value:n,source:i,stack:dS(i)}}var $a=[],Vs=0,yE=0;function Ju(){for(var n=Vs,i=yE=Vs=0;i<n;){var r=$a[i];$a[i++]=null;var u=$a[i];$a[i++]=null;var E=$a[i];$a[i++]=null;var A=$a[i];if($a[i++]=null,u!==null&&E!==null){var N=u.pending;N===null?E.next=E:(E.next=N.next,N.next=E),u.pending=E}A!==0&&ZS(r,E,A)}}function $u(n,i,r,u){$a[Vs++]=n,$a[Vs++]=i,$a[Vs++]=r,$a[Vs++]=u,yE|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function vE(n,i,r,u){return $u(n,i,r,u),ed(n)}function Ws(n,i){return $u(n,null,null,i),ed(n)}function ZS(n,i,r){n.lanes|=r;var u=n.alternate;u!==null&&(u.lanes|=r);for(var E=!1,A=n.return;A!==null;)A.childLanes|=r,u=A.alternate,u!==null&&(u.childLanes|=r),A.tag===22&&(n=A.stateNode,n===null||n._visibility&1||(E=!0)),n=A,A=A.return;return n.tag===3?(A=n.stateNode,E&&i!==null&&(E=31-wt(r),n=A.hiddenUpdates,u=n[E],u===null?n[E]=[i]:u.push(i),i.lane=r|536870912),A):null}function ed(n){if(50<Bc)throw Bc=0,Um=null,Error(o(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var Xs={};function cv(n,i,r,u){this.tag=n,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ka(n,i,r,u){return new cv(n,i,r,u)}function ME(n){return n=n.prototype,!(!n||!n.isReactComponent)}function so(n,i){var r=n.alternate;return r===null?(r=ka(n.tag,i,n.key,n.mode),r.elementType=n.elementType,r.type=n.type,r.stateNode=n.stateNode,r.alternate=n,n.alternate=r):(r.pendingProps=i,r.type=n.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=n.flags&65011712,r.childLanes=n.childLanes,r.lanes=n.lanes,r.child=n.child,r.memoizedProps=n.memoizedProps,r.memoizedState=n.memoizedState,r.updateQueue=n.updateQueue,i=n.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},r.sibling=n.sibling,r.index=n.index,r.ref=n.ref,r.refCleanup=n.refCleanup,r}function QS(n,i){n.flags&=65011714;var r=n.alternate;return r===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=r.childLanes,n.lanes=r.lanes,n.child=r.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=r.memoizedProps,n.memoizedState=r.memoizedState,n.updateQueue=r.updateQueue,n.type=r.type,i=r.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function td(n,i,r,u,E,A){var N=0;if(u=n,typeof n=="function")ME(n)&&(N=1);else if(typeof n=="string")N=dM(n,r,Z.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case Q:return n=ka(31,r,i,E),n.elementType=Q,n.lanes=A,n;case C:return kl(r.children,E,A,i);case _:N=8,E|=24;break;case O:return n=ka(12,r,i,E|2),n.elementType=O,n.lanes=A,n;case w:return n=ka(13,r,i,E),n.elementType=w,n.lanes=A,n;case G:return n=ka(19,r,i,E),n.elementType=G,n.lanes=A,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case D:case x:N=10;break e;case H:N=9;break e;case L:N=11;break e;case B:N=14;break e;case z:N=16,u=null;break e}N=29,r=Error(o(130,n===null?"null":typeof n,"")),u=null}return i=ka(N,r,i,E),i.elementType=n,i.type=u,i.lanes=A,i}function kl(n,i,r,u){return n=ka(7,n,u,i),n.lanes=r,n}function LE(n,i,r){return n=ka(6,n,null,i),n.lanes=r,n}function xE(n,i,r){return i=ka(4,n.children!==null?n.children:[],n.key,i),i.lanes=r,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var qs=[],Zs=0,nd=null,ad=0,ei=[],ti=0,Ul=null,ro=1,co="";function Pl(n,i){qs[Zs++]=ad,qs[Zs++]=nd,nd=n,ad=i}function JS(n,i,r){ei[ti++]=ro,ei[ti++]=co,ei[ti++]=Ul,Ul=n;var u=ro;n=co;var E=32-wt(u)-1;u&=~(1<<E),r+=1;var A=32-wt(i)+E;if(30<A){var N=E-E%5;A=(u&(1<<N)-1).toString(32),u>>=N,E-=N,ro=1<<32-wt(i)+E|r<<E|u,co=A+n}else ro=1<<A|r<<E|u,co=n}function HE(n){n.return!==null&&(Pl(n,1),JS(n,1,0))}function kE(n){for(;n===nd;)nd=qs[--Zs],qs[Zs]=null,ad=qs[--Zs],qs[Zs]=null;for(;n===Ul;)Ul=ei[--ti],ei[ti]=null,co=ei[--ti],ei[ti]=null,ro=ei[--ti],ei[ti]=null}var ra=null,Qt=null,At=!1,wl=null,Ui=!1,UE=Error(o(519));function Gl(n){var i=Error(o(418,""));throw Tc(Ja(i,n)),UE}function $S(n){var i=n.stateNode,r=n.type,u=n.memoizedProps;switch(i[ta]=n,i[Na]=u,r){case"dialog":nt("cancel",i),nt("close",i);break;case"iframe":case"object":case"embed":nt("load",i);break;case"video":case"audio":for(r=0;r<jc.length;r++)nt(jc[r],i);break;case"source":nt("error",i);break;case"img":case"image":case"link":nt("error",i),nt("load",i);break;case"details":nt("toggle",i);break;case"input":nt("invalid",i),ES(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),zu(i);break;case"select":nt("invalid",i);break;case"textarea":nt("invalid",i),AS(i,u.value,u.defaultValue,u.children),zu(i)}r=u.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||i.textContent===""+r||u.suppressHydrationWarning===!0||Ag(i.textContent,r)?(u.popover!=null&&(nt("beforetoggle",i),nt("toggle",i)),u.onScroll!=null&&nt("scroll",i),u.onScrollEnd!=null&&nt("scrollend",i),u.onClick!=null&&(i.onclick=Pd),i=!0):i=!1,i||Gl(n)}function eI(n){for(ra=n.return;ra;)switch(ra.tag){case 5:case 13:Ui=!1;return;case 27:case 3:Ui=!0;return;default:ra=ra.return}}function Ac(n){if(n!==ra)return!1;if(!At)return eI(n),At=!0,!1;var i=n.tag,r;if((r=i!==3&&i!==27)&&((r=i===5)&&(r=n.type,r=!(r!=="form"&&r!=="button")||Jm(n.type,n.memoizedProps)),r=!r),r&&Qt&&Gl(n),eI(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(o(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8)if(r=n.data,r==="/$"){if(i===0){Qt=gi(n.nextSibling);break e}i--}else r!=="$"&&r!=="$!"&&r!=="$?"||i++;n=n.nextSibling}Qt=null}}else i===27?(i=Qt,Zo(n.type)?(n=nA,nA=null,Qt=n):Qt=i):Qt=ra?gi(n.stateNode.nextSibling):null;return!0}function Rc(){Qt=ra=null,At=!1}function tI(){var n=wl;return n!==null&&(Da===null?Da=n:Da.push.apply(Da,n),wl=null),n}function Tc(n){wl===null?wl=[n]:wl.push(n)}var PE=Y(null),Bl=null,uo=null;function ko(n,i,r){j(PE,i._currentValue),i._currentValue=r}function ho(n){n._currentValue=PE.current,W(PE)}function wE(n,i,r){for(;n!==null;){var u=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),n===r)break;n=n.return}}function GE(n,i,r,u){var E=n.child;for(E!==null&&(E.return=n);E!==null;){var A=E.dependencies;if(A!==null){var N=E.child;A=A.firstContext;e:for(;A!==null;){var v=A;A=E;for(var F=0;F<i.length;F++)if(v.context===i[F]){A.lanes|=r,v=A.alternate,v!==null&&(v.lanes|=r),wE(A.return,r,n),u||(N=null);break e}A=v.next}}else if(E.tag===18){if(N=E.return,N===null)throw Error(o(341));N.lanes|=r,A=N.alternate,A!==null&&(A.lanes|=r),wE(N,r,n),N=null}else N=E.child;if(N!==null)N.return=E;else for(N=E;N!==null;){if(N===n){N=null;break}if(E=N.sibling,E!==null){E.return=N.return,N=E;break}N=N.return}E=N}}function Sc(n,i,r,u){n=null;for(var E=i,A=!1;E!==null;){if(!A){if((E.flags&524288)!==0)A=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var N=E.alternate;if(N===null)throw Error(o(387));if(N=N.memoizedProps,N!==null){var v=E.type;Ha(E.pendingProps.value,N.value)||(n!==null?n.push(v):n=[v])}}else if(E===q.current){if(N=E.alternate,N===null)throw Error(o(387));N.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(n!==null?n.push(Xc):n=[Xc])}E=E.return}n!==null&&GE(i,n,r,u),i.flags|=262144}function id(n){for(n=n.firstContext;n!==null;){if(!Ha(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Fl(n){Bl=n,uo=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function na(n){return nI(Bl,n)}function od(n,i){return Bl===null&&Fl(n),nI(n,i)}function nI(n,i){var r=i._currentValue;if(i={context:i,memoizedValue:r,next:null},uo===null){if(n===null)throw Error(o(308));uo=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else uo=uo.next=i;return r}var uv=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(r,u){n.push(u)}};this.abort=function(){i.aborted=!0,n.forEach(function(r){return r()})}},dv=e.unstable_scheduleCallback,hv=e.unstable_NormalPriority,bn={$$typeof:x,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function BE(){return{controller:new uv,data:new Map,refCount:0}}function Ic(n){n.refCount--,n.refCount===0&&dv(hv,function(){n.controller.abort()})}var _c=null,FE=0,Qs=0,Js=null;function fv(n,i){if(_c===null){var r=_c=[];FE=0,Qs=zm(),Js={status:"pending",value:void 0,then:function(u){r.push(u)}}}return FE++,i.then(aI,aI),i}function aI(){if(--FE===0&&_c!==null){Js!==null&&(Js.status="fulfilled");var n=_c;_c=null,Qs=0,Js=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function Ev(n,i){var r=[],u={status:"pending",value:null,reason:null,then:function(E){r.push(E)}};return n.then(function(){u.status="fulfilled",u.value=i;for(var E=0;E<r.length;E++)(0,r[E])(i)},function(E){for(u.status="rejected",u.reason=E,E=0;E<r.length;E++)(0,r[E])(void 0)}),u}var iI=M.S;M.S=function(n,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&fv(n,i),iI!==null&&iI(n,i)};var jl=Y(null);function jE(){var n=jl.current;return n!==null?n:xt.pooledCache}function ld(n,i){i===null?j(jl,jl.current):j(jl,i.pool)}function oI(){var n=jE();return n===null?null:{parent:bn._currentValue,pool:n}}var gc=Error(o(460)),lI=Error(o(474)),sd=Error(o(542)),zE={then:function(){}};function sI(n){return n=n.status,n==="fulfilled"||n==="rejected"}function rd(){}function rI(n,i,r){switch(r=n[r],r===void 0?n.push(i):r!==i&&(i.then(rd,rd),i=r),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,uI(n),n;default:if(typeof i.status=="string")i.then(rd,rd);else{if(n=xt,n!==null&&100<n.shellSuspendCounter)throw Error(o(482));n=i,n.status="pending",n.then(function(u){if(i.status==="pending"){var E=i;E.status="fulfilled",E.value=u}},function(u){if(i.status==="pending"){var E=i;E.status="rejected",E.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,uI(n),n}throw pc=i,gc}}var pc=null;function cI(){if(pc===null)throw Error(o(459));var n=pc;return pc=null,n}function uI(n){if(n===gc||n===sd)throw Error(o(483))}var Uo=!1;function YE(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function KE(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Po(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function wo(n,i,r){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(St&2)!==0){var E=u.pending;return E===null?i.next=i:(i.next=E.next,E.next=i),u.pending=i,i=ed(n),ZS(n,null,r),i}return $u(n,u,i,r),ed(n)}function Nc(n,i,r){if(i=i.updateQueue,i!==null&&(i=i.shared,(r&4194048)!==0)){var u=i.lanes;u&=n.pendingLanes,r|=u,i.lanes=r,Bu(n,r)}}function VE(n,i){var r=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,r===u)){var E=null,A=null;if(r=r.firstBaseUpdate,r!==null){do{var N={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};A===null?E=A=N:A=A.next=N,r=r.next}while(r!==null);A===null?E=A=i:A=A.next=i}else E=A=i;r={baseState:u.baseState,firstBaseUpdate:E,lastBaseUpdate:A,shared:u.shared,callbacks:u.callbacks},n.updateQueue=r;return}n=r.lastBaseUpdate,n===null?r.firstBaseUpdate=i:n.next=i,r.lastBaseUpdate=i}var WE=!1;function Cc(){if(WE){var n=Js;if(n!==null)throw n}}function bc(n,i,r,u){WE=!1;var E=n.updateQueue;Uo=!1;var A=E.firstBaseUpdate,N=E.lastBaseUpdate,v=E.shared.pending;if(v!==null){E.shared.pending=null;var F=v,oe=F.next;F.next=null,N===null?A=oe:N.next=oe,N=F;var Ae=n.alternate;Ae!==null&&(Ae=Ae.updateQueue,v=Ae.lastBaseUpdate,v!==N&&(v===null?Ae.firstBaseUpdate=oe:v.next=oe,Ae.lastBaseUpdate=F))}if(A!==null){var Te=E.baseState;N=0,Ae=oe=F=null,v=A;do{var le=v.lane&-536870913,re=le!==v.lane;if(re?(ct&le)===le:(u&le)===le){le!==0&&le===Qs&&(WE=!0),Ae!==null&&(Ae=Ae.next={lane:0,tag:v.tag,payload:v.payload,callback:null,next:null});e:{var Ge=n,ke=v;le=i;var Ct=r;switch(ke.tag){case 1:if(Ge=ke.payload,typeof Ge=="function"){Te=Ge.call(Ct,Te,le);break e}Te=Ge;break e;case 3:Ge.flags=Ge.flags&-65537|128;case 0:if(Ge=ke.payload,le=typeof Ge=="function"?Ge.call(Ct,Te,le):Ge,le==null)break e;Te=R({},Te,le);break e;case 2:Uo=!0}}le=v.callback,le!==null&&(n.flags|=64,re&&(n.flags|=8192),re=E.callbacks,re===null?E.callbacks=[le]:re.push(le))}else re={lane:le,tag:v.tag,payload:v.payload,callback:v.callback,next:null},Ae===null?(oe=Ae=re,F=Te):Ae=Ae.next=re,N|=le;if(v=v.next,v===null){if(v=E.shared.pending,v===null)break;re=v,v=re.next,re.next=null,E.lastBaseUpdate=re,E.shared.pending=null}}while(!0);Ae===null&&(F=Te),E.baseState=F,E.firstBaseUpdate=oe,E.lastBaseUpdate=Ae,A===null&&(E.shared.lanes=0),Vo|=N,n.lanes=N,n.memoizedState=Te}}function dI(n,i){if(typeof n!="function")throw Error(o(191,n));n.call(i)}function hI(n,i){var r=n.callbacks;if(r!==null)for(n.callbacks=null,n=0;n<r.length;n++)dI(r[n],i)}var $s=Y(null),cd=Y(0);function fI(n,i){n=So,j(cd,n),j($s,i),So=n|i.baseLanes}function XE(){j(cd,So),j($s,$s.current)}function qE(){So=cd.current,W($s),W(cd)}var Go=0,qe=null,pt=null,In=null,ud=!1,er=!1,zl=!1,dd=0,Oc=0,tr=null,mv=0;function hn(){throw Error(o(321))}function ZE(n,i){if(i===null)return!1;for(var r=0;r<i.length&&r<n.length;r++)if(!Ha(n[r],i[r]))return!1;return!0}function QE(n,i,r,u,E,A){return Go=A,qe=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,M.H=n===null||n.memoizedState===null?ZI:QI,zl=!1,A=r(u,E),zl=!1,er&&(A=mI(i,r,u,E)),EI(n),A}function EI(n){M.H=Rd;var i=pt!==null&&pt.next!==null;if(Go=0,In=pt=qe=null,ud=!1,Oc=0,tr=null,i)throw Error(o(300));n===null||xn||(n=n.dependencies,n!==null&&id(n)&&(xn=!0))}function mI(n,i,r,u){qe=n;var E=0;do{if(er&&(tr=null),Oc=0,er=!1,25<=E)throw Error(o(301));if(E+=1,In=pt=null,n.updateQueue!=null){var A=n.updateQueue;A.lastEffect=null,A.events=null,A.stores=null,A.memoCache!=null&&(A.memoCache.index=0)}M.H=gv,A=i(r,u)}while(er);return A}function Av(){var n=M.H,i=n.useState()[0];return i=typeof i.then=="function"?Dc(i):i,n=n.useState()[0],(pt!==null?pt.memoizedState:null)!==n&&(qe.flags|=1024),i}function JE(){var n=dd!==0;return dd=0,n}function $E(n,i,r){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~r}function em(n){if(ud){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}ud=!1}Go=0,In=pt=qe=null,er=!1,Oc=dd=0,tr=null}function ba(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return In===null?qe.memoizedState=In=n:In=In.next=n,In}function _n(){if(pt===null){var n=qe.alternate;n=n!==null?n.memoizedState:null}else n=pt.next;var i=In===null?qe.memoizedState:In.next;if(i!==null)In=i,pt=n;else{if(n===null)throw qe.alternate===null?Error(o(467)):Error(o(310));pt=n,n={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},In===null?qe.memoizedState=In=n:In=In.next=n}return In}function tm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Dc(n){var i=Oc;return Oc+=1,tr===null&&(tr=[]),n=rI(tr,n,i),i=qe,(In===null?i.memoizedState:In.next)===null&&(i=i.alternate,M.H=i===null||i.memoizedState===null?ZI:QI),n}function hd(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Dc(n);if(n.$$typeof===x)return na(n)}throw Error(o(438,String(n)))}function nm(n){var i=null,r=qe.updateQueue;if(r!==null&&(i=r.memoCache),i==null){var u=qe.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(E){return E.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),r===null&&(r=tm(),qe.updateQueue=r),r.memoCache=i,r=i.data[i.index],r===void 0)for(r=i.data[i.index]=Array(n),u=0;u<n;u++)r[u]=ce;return i.index++,r}function fo(n,i){return typeof i=="function"?i(n):i}function fd(n){var i=_n();return am(i,pt,n)}function am(n,i,r){var u=n.queue;if(u===null)throw Error(o(311));u.lastRenderedReducer=r;var E=n.baseQueue,A=u.pending;if(A!==null){if(E!==null){var N=E.next;E.next=A.next,A.next=N}i.baseQueue=E=A,u.pending=null}if(A=n.baseState,E===null)n.memoizedState=A;else{i=E.next;var v=N=null,F=null,oe=i,Ae=!1;do{var Te=oe.lane&-536870913;if(Te!==oe.lane?(ct&Te)===Te:(Go&Te)===Te){var le=oe.revertLane;if(le===0)F!==null&&(F=F.next={lane:0,revertLane:0,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null}),Te===Qs&&(Ae=!0);else if((Go&le)===le){oe=oe.next,le===Qs&&(Ae=!0);continue}else Te={lane:0,revertLane:oe.revertLane,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null},F===null?(v=F=Te,N=A):F=F.next=Te,qe.lanes|=le,Vo|=le;Te=oe.action,zl&&r(A,Te),A=oe.hasEagerState?oe.eagerState:r(A,Te)}else le={lane:Te,revertLane:oe.revertLane,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null},F===null?(v=F=le,N=A):F=F.next=le,qe.lanes|=Te,Vo|=Te;oe=oe.next}while(oe!==null&&oe!==i);if(F===null?N=A:F.next=v,!Ha(A,n.memoizedState)&&(xn=!0,Ae&&(r=Js,r!==null)))throw r;n.memoizedState=A,n.baseState=N,n.baseQueue=F,u.lastRenderedState=A}return E===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function im(n){var i=_n(),r=i.queue;if(r===null)throw Error(o(311));r.lastRenderedReducer=n;var u=r.dispatch,E=r.pending,A=i.memoizedState;if(E!==null){r.pending=null;var N=E=E.next;do A=n(A,N.action),N=N.next;while(N!==E);Ha(A,i.memoizedState)||(xn=!0),i.memoizedState=A,i.baseQueue===null&&(i.baseState=A),r.lastRenderedState=A}return[A,u]}function AI(n,i,r){var u=qe,E=_n(),A=At;if(A){if(r===void 0)throw Error(o(407));r=r()}else r=i();var N=!Ha((pt||E).memoizedState,r);N&&(E.memoizedState=r,xn=!0),E=E.queue;var v=SI.bind(null,u,E,n);if(yc(2048,8,v,[n]),E.getSnapshot!==i||N||In!==null&&In.memoizedState.tag&1){if(u.flags|=2048,nr(9,Ed(),TI.bind(null,u,E,r,i),null),xt===null)throw Error(o(349));A||(Go&124)!==0||RI(u,i,r)}return r}function RI(n,i,r){n.flags|=16384,n={getSnapshot:i,value:r},i=qe.updateQueue,i===null?(i=tm(),qe.updateQueue=i,i.stores=[n]):(r=i.stores,r===null?i.stores=[n]:r.push(n))}function TI(n,i,r,u){i.value=r,i.getSnapshot=u,II(i)&&_I(n)}function SI(n,i,r){return r(function(){II(i)&&_I(n)})}function II(n){var i=n.getSnapshot;n=n.value;try{var r=i();return!Ha(n,r)}catch{return!0}}function _I(n){var i=Ws(n,2);i!==null&&Ba(i,n,2)}function om(n){var i=ba();if(typeof n=="function"){var r=n;if(n=r(),zl){Yt(!0);try{r()}finally{Yt(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fo,lastRenderedState:n},i}function gI(n,i,r,u){return n.baseState=r,am(n,pt,typeof u=="function"?u:fo)}function Rv(n,i,r,u,E){if(Ad(n))throw Error(o(485));if(n=i.action,n!==null){var A={payload:E,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(N){A.listeners.push(N)}};M.T!==null?r(!0):A.isTransition=!1,u(A),r=i.pending,r===null?(A.next=i.pending=A,pI(i,A)):(A.next=r.next,i.pending=r.next=A)}}function pI(n,i){var r=i.action,u=i.payload,E=n.state;if(i.isTransition){var A=M.T,N={};M.T=N;try{var v=r(E,u),F=M.S;F!==null&&F(N,v),NI(n,i,v)}catch(oe){lm(n,i,oe)}finally{M.T=A}}else try{A=r(E,u),NI(n,i,A)}catch(oe){lm(n,i,oe)}}function NI(n,i,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(u){CI(n,i,u)},function(u){return lm(n,i,u)}):CI(n,i,r)}function CI(n,i,r){i.status="fulfilled",i.value=r,bI(i),n.state=r,i=n.pending,i!==null&&(r=i.next,r===i?n.pending=null:(r=r.next,i.next=r,pI(n,r)))}function lm(n,i,r){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=r,bI(i),i=i.next;while(i!==u)}n.action=null}function bI(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function OI(n,i){return i}function DI(n,i){if(At){var r=xt.formState;if(r!==null){e:{var u=qe;if(At){if(Qt){t:{for(var E=Qt,A=Ui;E.nodeType!==8;){if(!A){E=null;break t}if(E=gi(E.nextSibling),E===null){E=null;break t}}A=E.data,E=A==="F!"||A==="F"?E:null}if(E){Qt=gi(E.nextSibling),u=E.data==="F!";break e}}Gl(u)}u=!1}u&&(i=r[0])}}return r=ba(),r.memoizedState=r.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:OI,lastRenderedState:i},r.queue=u,r=WI.bind(null,qe,u),u.dispatch=r,u=om(!1),A=dm.bind(null,qe,!1,u.queue),u=ba(),E={state:i,dispatch:null,action:n,pending:null},u.queue=E,r=Rv.bind(null,qe,E,A,r),E.dispatch=r,u.memoizedState=n,[i,r,!1]}function yI(n){var i=_n();return vI(i,pt,n)}function vI(n,i,r){if(i=am(n,i,OI)[0],n=fd(fo)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=Dc(i)}catch(N){throw N===gc?sd:N}else u=i;i=_n();var E=i.queue,A=E.dispatch;return r!==i.memoizedState&&(qe.flags|=2048,nr(9,Ed(),Tv.bind(null,E,r),null)),[u,A,n]}function Tv(n,i){n.action=i}function MI(n){var i=_n(),r=pt;if(r!==null)return vI(i,r,n);_n(),i=i.memoizedState,r=_n();var u=r.queue.dispatch;return r.memoizedState=n,[i,u,!1]}function nr(n,i,r,u){return n={tag:n,create:r,deps:u,inst:i,next:null},i=qe.updateQueue,i===null&&(i=tm(),qe.updateQueue=i),r=i.lastEffect,r===null?i.lastEffect=n.next=n:(u=r.next,r.next=n,n.next=u,i.lastEffect=n),n}function Ed(){return{destroy:void 0,resource:void 0}}function LI(){return _n().memoizedState}function md(n,i,r,u){var E=ba();u=u===void 0?null:u,qe.flags|=n,E.memoizedState=nr(1|i,Ed(),r,u)}function yc(n,i,r,u){var E=_n();u=u===void 0?null:u;var A=E.memoizedState.inst;pt!==null&&u!==null&&ZE(u,pt.memoizedState.deps)?E.memoizedState=nr(i,A,r,u):(qe.flags|=n,E.memoizedState=nr(1|i,A,r,u))}function xI(n,i){md(8390656,8,n,i)}function HI(n,i){yc(2048,8,n,i)}function kI(n,i){return yc(4,2,n,i)}function UI(n,i){return yc(4,4,n,i)}function PI(n,i){if(typeof i=="function"){n=n();var r=i(n);return function(){typeof r=="function"?r():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function wI(n,i,r){r=r!=null?r.concat([n]):null,yc(4,4,PI.bind(null,i,n),r)}function sm(){}function GI(n,i){var r=_n();i=i===void 0?null:i;var u=r.memoizedState;return i!==null&&ZE(i,u[1])?u[0]:(r.memoizedState=[n,i],n)}function BI(n,i){var r=_n();i=i===void 0?null:i;var u=r.memoizedState;if(i!==null&&ZE(i,u[1]))return u[0];if(u=n(),zl){Yt(!0);try{n()}finally{Yt(!1)}}return r.memoizedState=[u,i],u}function rm(n,i,r){return r===void 0||(Go&1073741824)!==0?n.memoizedState=i:(n.memoizedState=r,n=z_(),qe.lanes|=n,Vo|=n,r)}function FI(n,i,r,u){return Ha(r,i)?r:$s.current!==null?(n=rm(n,r,u),Ha(n,i)||(xn=!0),n):(Go&42)===0?(xn=!0,n.memoizedState=r):(n=z_(),qe.lanes|=n,Vo|=n,i)}function jI(n,i,r,u,E){var A=K.p;K.p=A!==0&&8>A?A:8;var N=M.T,v={};M.T=v,dm(n,!1,i,r);try{var F=E(),oe=M.S;if(oe!==null&&oe(v,F),F!==null&&typeof F=="object"&&typeof F.then=="function"){var Ae=Ev(F,u);vc(n,i,Ae,Ga(n))}else vc(n,i,u,Ga(n))}catch(Te){vc(n,i,{then:function(){},status:"rejected",reason:Te},Ga())}finally{K.p=A,M.T=N}}function Sv(){}function cm(n,i,r,u){if(n.tag!==5)throw Error(o(476));var E=zI(n).queue;jI(n,E,i,$,r===null?Sv:function(){return YI(n),r(u)})}function zI(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:$,baseState:$,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fo,lastRenderedState:$},next:null};var r={};return i.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fo,lastRenderedState:r},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function YI(n){var i=zI(n).next.queue;vc(n,i,{},Ga())}function um(){return na(Xc)}function KI(){return _n().memoizedState}function VI(){return _n().memoizedState}function Iv(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var r=Ga();n=Po(r);var u=wo(i,n,r);u!==null&&(Ba(u,i,r),Nc(u,i,r)),i={cache:BE()},n.payload=i;return}i=i.return}}function _v(n,i,r){var u=Ga();r={lane:u,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null},Ad(n)?XI(i,r):(r=vE(n,i,r,u),r!==null&&(Ba(r,n,u),qI(r,i,u)))}function WI(n,i,r){var u=Ga();vc(n,i,r,u)}function vc(n,i,r,u){var E={lane:u,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null};if(Ad(n))XI(i,E);else{var A=n.alternate;if(n.lanes===0&&(A===null||A.lanes===0)&&(A=i.lastRenderedReducer,A!==null))try{var N=i.lastRenderedState,v=A(N,r);if(E.hasEagerState=!0,E.eagerState=v,Ha(v,N))return $u(n,i,E,0),xt===null&&Ju(),!1}catch{}finally{}if(r=vE(n,i,E,u),r!==null)return Ba(r,n,u),qI(r,i,u),!0}return!1}function dm(n,i,r,u){if(u={lane:2,revertLane:zm(),action:u,hasEagerState:!1,eagerState:null,next:null},Ad(n)){if(i)throw Error(o(479))}else i=vE(n,r,u,2),i!==null&&Ba(i,n,2)}function Ad(n){var i=n.alternate;return n===qe||i!==null&&i===qe}function XI(n,i){er=ud=!0;var r=n.pending;r===null?i.next=i:(i.next=r.next,r.next=i),n.pending=i}function qI(n,i,r){if((r&4194048)!==0){var u=i.lanes;u&=n.pendingLanes,r|=u,i.lanes=r,Bu(n,r)}}var Rd={readContext:na,use:hd,useCallback:hn,useContext:hn,useEffect:hn,useImperativeHandle:hn,useLayoutEffect:hn,useInsertionEffect:hn,useMemo:hn,useReducer:hn,useRef:hn,useState:hn,useDebugValue:hn,useDeferredValue:hn,useTransition:hn,useSyncExternalStore:hn,useId:hn,useHostTransitionStatus:hn,useFormState:hn,useActionState:hn,useOptimistic:hn,useMemoCache:hn,useCacheRefresh:hn},ZI={readContext:na,use:hd,useCallback:function(n,i){return ba().memoizedState=[n,i===void 0?null:i],n},useContext:na,useEffect:xI,useImperativeHandle:function(n,i,r){r=r!=null?r.concat([n]):null,md(4194308,4,PI.bind(null,i,n),r)},useLayoutEffect:function(n,i){return md(4194308,4,n,i)},useInsertionEffect:function(n,i){md(4,2,n,i)},useMemo:function(n,i){var r=ba();i=i===void 0?null:i;var u=n();if(zl){Yt(!0);try{n()}finally{Yt(!1)}}return r.memoizedState=[u,i],u},useReducer:function(n,i,r){var u=ba();if(r!==void 0){var E=r(i);if(zl){Yt(!0);try{r(i)}finally{Yt(!1)}}}else E=i;return u.memoizedState=u.baseState=E,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:E},u.queue=n,n=n.dispatch=_v.bind(null,qe,n),[u.memoizedState,n]},useRef:function(n){var i=ba();return n={current:n},i.memoizedState=n},useState:function(n){n=om(n);var i=n.queue,r=WI.bind(null,qe,i);return i.dispatch=r,[n.memoizedState,r]},useDebugValue:sm,useDeferredValue:function(n,i){var r=ba();return rm(r,n,i)},useTransition:function(){var n=om(!1);return n=jI.bind(null,qe,n.queue,!0,!1),ba().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,r){var u=qe,E=ba();if(At){if(r===void 0)throw Error(o(407));r=r()}else{if(r=i(),xt===null)throw Error(o(349));(ct&124)!==0||RI(u,i,r)}E.memoizedState=r;var A={value:r,getSnapshot:i};return E.queue=A,xI(SI.bind(null,u,A,n),[n]),u.flags|=2048,nr(9,Ed(),TI.bind(null,u,A,r,i),null),r},useId:function(){var n=ba(),i=xt.identifierPrefix;if(At){var r=co,u=ro;r=(u&~(1<<32-wt(u)-1)).toString(32)+r,i=""+i+"R"+r,r=dd++,0<r&&(i+="H"+r.toString(32)),i+=""}else r=mv++,i=""+i+"r"+r.toString(32)+"";return n.memoizedState=i},useHostTransitionStatus:um,useFormState:DI,useActionState:DI,useOptimistic:function(n){var i=ba();i.memoizedState=i.baseState=n;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=r,i=dm.bind(null,qe,!0,r),r.dispatch=i,[n,i]},useMemoCache:nm,useCacheRefresh:function(){return ba().memoizedState=Iv.bind(null,qe)}},QI={readContext:na,use:hd,useCallback:GI,useContext:na,useEffect:HI,useImperativeHandle:wI,useInsertionEffect:kI,useLayoutEffect:UI,useMemo:BI,useReducer:fd,useRef:LI,useState:function(){return fd(fo)},useDebugValue:sm,useDeferredValue:function(n,i){var r=_n();return FI(r,pt.memoizedState,n,i)},useTransition:function(){var n=fd(fo)[0],i=_n().memoizedState;return[typeof n=="boolean"?n:Dc(n),i]},useSyncExternalStore:AI,useId:KI,useHostTransitionStatus:um,useFormState:yI,useActionState:yI,useOptimistic:function(n,i){var r=_n();return gI(r,pt,n,i)},useMemoCache:nm,useCacheRefresh:VI},gv={readContext:na,use:hd,useCallback:GI,useContext:na,useEffect:HI,useImperativeHandle:wI,useInsertionEffect:kI,useLayoutEffect:UI,useMemo:BI,useReducer:im,useRef:LI,useState:function(){return im(fo)},useDebugValue:sm,useDeferredValue:function(n,i){var r=_n();return pt===null?rm(r,n,i):FI(r,pt.memoizedState,n,i)},useTransition:function(){var n=im(fo)[0],i=_n().memoizedState;return[typeof n=="boolean"?n:Dc(n),i]},useSyncExternalStore:AI,useId:KI,useHostTransitionStatus:um,useFormState:MI,useActionState:MI,useOptimistic:function(n,i){var r=_n();return pt!==null?gI(r,pt,n,i):(r.baseState=n,[n,r.queue.dispatch])},useMemoCache:nm,useCacheRefresh:VI},ar=null,Mc=0;function Td(n){var i=Mc;return Mc+=1,ar===null&&(ar=[]),rI(ar,n,i)}function Lc(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function Sd(n,i){throw i.$$typeof===T?Error(o(525)):(n=Object.prototype.toString.call(i),Error(o(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function JI(n){var i=n._init;return i(n._payload)}function $I(n){function i(J,V){if(n){var ne=J.deletions;ne===null?(J.deletions=[V],J.flags|=16):ne.push(V)}}function r(J,V){if(!n)return null;for(;V!==null;)i(J,V),V=V.sibling;return null}function u(J){for(var V=new Map;J!==null;)J.key!==null?V.set(J.key,J):V.set(J.index,J),J=J.sibling;return V}function E(J,V){return J=so(J,V),J.index=0,J.sibling=null,J}function A(J,V,ne){return J.index=ne,n?(ne=J.alternate,ne!==null?(ne=ne.index,ne<V?(J.flags|=67108866,V):ne):(J.flags|=67108866,V)):(J.flags|=1048576,V)}function N(J){return n&&J.alternate===null&&(J.flags|=67108866),J}function v(J,V,ne,Re){return V===null||V.tag!==6?(V=LE(ne,J.mode,Re),V.return=J,V):(V=E(V,ne),V.return=J,V)}function F(J,V,ne,Re){var be=ne.type;return be===C?Ae(J,V,ne.props.children,Re,ne.key):V!==null&&(V.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===z&&JI(be)===V.type)?(V=E(V,ne.props),Lc(V,ne),V.return=J,V):(V=td(ne.type,ne.key,ne.props,null,J.mode,Re),Lc(V,ne),V.return=J,V)}function oe(J,V,ne,Re){return V===null||V.tag!==4||V.stateNode.containerInfo!==ne.containerInfo||V.stateNode.implementation!==ne.implementation?(V=xE(ne,J.mode,Re),V.return=J,V):(V=E(V,ne.children||[]),V.return=J,V)}function Ae(J,V,ne,Re,be){return V===null||V.tag!==7?(V=kl(ne,J.mode,Re,be),V.return=J,V):(V=E(V,ne),V.return=J,V)}function Te(J,V,ne){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=LE(""+V,J.mode,ne),V.return=J,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case S:return ne=td(V.type,V.key,V.props,null,J.mode,ne),Lc(ne,V),ne.return=J,ne;case I:return V=xE(V,J.mode,ne),V.return=J,V;case z:var Re=V._init;return V=Re(V._payload),Te(J,V,ne)}if(he(V)||te(V))return V=kl(V,J.mode,ne,null),V.return=J,V;if(typeof V.then=="function")return Te(J,Td(V),ne);if(V.$$typeof===x)return Te(J,od(J,V),ne);Sd(J,V)}return null}function le(J,V,ne,Re){var be=V!==null?V.key:null;if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return be!==null?null:v(J,V,""+ne,Re);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case S:return ne.key===be?F(J,V,ne,Re):null;case I:return ne.key===be?oe(J,V,ne,Re):null;case z:return be=ne._init,ne=be(ne._payload),le(J,V,ne,Re)}if(he(ne)||te(ne))return be!==null?null:Ae(J,V,ne,Re,null);if(typeof ne.then=="function")return le(J,V,Td(ne),Re);if(ne.$$typeof===x)return le(J,V,od(J,ne),Re);Sd(J,ne)}return null}function re(J,V,ne,Re,be){if(typeof Re=="string"&&Re!==""||typeof Re=="number"||typeof Re=="bigint")return J=J.get(ne)||null,v(V,J,""+Re,be);if(typeof Re=="object"&&Re!==null){switch(Re.$$typeof){case S:return J=J.get(Re.key===null?ne:Re.key)||null,F(V,J,Re,be);case I:return J=J.get(Re.key===null?ne:Re.key)||null,oe(V,J,Re,be);case z:var Qe=Re._init;return Re=Qe(Re._payload),re(J,V,ne,Re,be)}if(he(Re)||te(Re))return J=J.get(ne)||null,Ae(V,J,Re,be,null);if(typeof Re.then=="function")return re(J,V,ne,Td(Re),be);if(Re.$$typeof===x)return re(J,V,ne,od(V,Re),be);Sd(V,Re)}return null}function Ge(J,V,ne,Re){for(var be=null,Qe=null,Le=V,Pe=V=0,kn=null;Le!==null&&Pe<ne.length;Pe++){Le.index>Pe?(kn=Le,Le=null):kn=Le.sibling;var mt=le(J,Le,ne[Pe],Re);if(mt===null){Le===null&&(Le=kn);break}n&&Le&&mt.alternate===null&&i(J,Le),V=A(mt,V,Pe),Qe===null?be=mt:Qe.sibling=mt,Qe=mt,Le=kn}if(Pe===ne.length)return r(J,Le),At&&Pl(J,Pe),be;if(Le===null){for(;Pe<ne.length;Pe++)Le=Te(J,ne[Pe],Re),Le!==null&&(V=A(Le,V,Pe),Qe===null?be=Le:Qe.sibling=Le,Qe=Le);return At&&Pl(J,Pe),be}for(Le=u(Le);Pe<ne.length;Pe++)kn=re(Le,J,Pe,ne[Pe],Re),kn!==null&&(n&&kn.alternate!==null&&Le.delete(kn.key===null?Pe:kn.key),V=A(kn,V,Pe),Qe===null?be=kn:Qe.sibling=kn,Qe=kn);return n&&Le.forEach(function(tl){return i(J,tl)}),At&&Pl(J,Pe),be}function ke(J,V,ne,Re){if(ne==null)throw Error(o(151));for(var be=null,Qe=null,Le=V,Pe=V=0,kn=null,mt=ne.next();Le!==null&&!mt.done;Pe++,mt=ne.next()){Le.index>Pe?(kn=Le,Le=null):kn=Le.sibling;var tl=le(J,Le,mt.value,Re);if(tl===null){Le===null&&(Le=kn);break}n&&Le&&tl.alternate===null&&i(J,Le),V=A(tl,V,Pe),Qe===null?be=tl:Qe.sibling=tl,Qe=tl,Le=kn}if(mt.done)return r(J,Le),At&&Pl(J,Pe),be;if(Le===null){for(;!mt.done;Pe++,mt=ne.next())mt=Te(J,mt.value,Re),mt!==null&&(V=A(mt,V,Pe),Qe===null?be=mt:Qe.sibling=mt,Qe=mt);return At&&Pl(J,Pe),be}for(Le=u(Le);!mt.done;Pe++,mt=ne.next())mt=re(Le,J,Pe,mt.value,Re),mt!==null&&(n&&mt.alternate!==null&&Le.delete(mt.key===null?Pe:mt.key),V=A(mt,V,Pe),Qe===null?be=mt:Qe.sibling=mt,Qe=mt);return n&&Le.forEach(function(pM){return i(J,pM)}),At&&Pl(J,Pe),be}function Ct(J,V,ne,Re){if(typeof ne=="object"&&ne!==null&&ne.type===C&&ne.key===null&&(ne=ne.props.children),typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case S:e:{for(var be=ne.key;V!==null;){if(V.key===be){if(be=ne.type,be===C){if(V.tag===7){r(J,V.sibling),Re=E(V,ne.props.children),Re.return=J,J=Re;break e}}else if(V.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===z&&JI(be)===V.type){r(J,V.sibling),Re=E(V,ne.props),Lc(Re,ne),Re.return=J,J=Re;break e}r(J,V);break}else i(J,V);V=V.sibling}ne.type===C?(Re=kl(ne.props.children,J.mode,Re,ne.key),Re.return=J,J=Re):(Re=td(ne.type,ne.key,ne.props,null,J.mode,Re),Lc(Re,ne),Re.return=J,J=Re)}return N(J);case I:e:{for(be=ne.key;V!==null;){if(V.key===be)if(V.tag===4&&V.stateNode.containerInfo===ne.containerInfo&&V.stateNode.implementation===ne.implementation){r(J,V.sibling),Re=E(V,ne.children||[]),Re.return=J,J=Re;break e}else{r(J,V);break}else i(J,V);V=V.sibling}Re=xE(ne,J.mode,Re),Re.return=J,J=Re}return N(J);case z:return be=ne._init,ne=be(ne._payload),Ct(J,V,ne,Re)}if(he(ne))return Ge(J,V,ne,Re);if(te(ne)){if(be=te(ne),typeof be!="function")throw Error(o(150));return ne=be.call(ne),ke(J,V,ne,Re)}if(typeof ne.then=="function")return Ct(J,V,Td(ne),Re);if(ne.$$typeof===x)return Ct(J,V,od(J,ne),Re);Sd(J,ne)}return typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint"?(ne=""+ne,V!==null&&V.tag===6?(r(J,V.sibling),Re=E(V,ne),Re.return=J,J=Re):(r(J,V),Re=LE(ne,J.mode,Re),Re.return=J,J=Re),N(J)):r(J,V)}return function(J,V,ne,Re){try{Mc=0;var be=Ct(J,V,ne,Re);return ar=null,be}catch(Le){if(Le===gc||Le===sd)throw Le;var Qe=ka(29,Le,null,J.mode);return Qe.lanes=Re,Qe.return=J,Qe}finally{}}}var ir=$I(!0),e_=$I(!1),ni=Y(null),Pi=null;function Bo(n){var i=n.alternate;j(On,On.current&1),j(ni,n),Pi===null&&(i===null||$s.current!==null||i.memoizedState!==null)&&(Pi=n)}function t_(n){if(n.tag===22){if(j(On,On.current),j(ni,n),Pi===null){var i=n.alternate;i!==null&&i.memoizedState!==null&&(Pi=n)}}else Fo()}function Fo(){j(On,On.current),j(ni,ni.current)}function Eo(n){W(ni),Pi===n&&(Pi=null),W(On)}var On=Y(0);function Id(n){for(var i=n;i!==null;){if(i.tag===13){var r=i.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||tA(r)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function hm(n,i,r,u){i=n.memoizedState,r=r(u,i),r=r==null?i:R({},i,r),n.memoizedState=r,n.lanes===0&&(n.updateQueue.baseState=r)}var fm={enqueueSetState:function(n,i,r){n=n._reactInternals;var u=Ga(),E=Po(u);E.payload=i,r!=null&&(E.callback=r),i=wo(n,E,u),i!==null&&(Ba(i,n,u),Nc(i,n,u))},enqueueReplaceState:function(n,i,r){n=n._reactInternals;var u=Ga(),E=Po(u);E.tag=1,E.payload=i,r!=null&&(E.callback=r),i=wo(n,E,u),i!==null&&(Ba(i,n,u),Nc(i,n,u))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var r=Ga(),u=Po(r);u.tag=2,i!=null&&(u.callback=i),i=wo(n,u,r),i!==null&&(Ba(i,n,r),Nc(i,n,r))}};function n_(n,i,r,u,E,A,N){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,A,N):i.prototype&&i.prototype.isPureReactComponent?!Ec(r,u)||!Ec(E,A):!0}function a_(n,i,r,u){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(r,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(r,u),i.state!==n&&fm.enqueueReplaceState(i,i.state,null)}function Yl(n,i){var r=i;if("ref"in i){r={};for(var u in i)u!=="ref"&&(r[u]=i[u])}if(n=n.defaultProps){r===i&&(r=R({},r));for(var E in n)r[E]===void 0&&(r[E]=n[E])}return r}var _d=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function i_(n){_d(n)}function o_(n){console.error(n)}function l_(n){_d(n)}function gd(n,i){try{var r=n.onUncaughtError;r(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function s_(n,i,r){try{var u=n.onCaughtError;u(r.value,{componentStack:r.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function Em(n,i,r){return r=Po(r),r.tag=3,r.payload={element:null},r.callback=function(){gd(n,i)},r}function r_(n){return n=Po(n),n.tag=3,n}function c_(n,i,r,u){var E=r.type.getDerivedStateFromError;if(typeof E=="function"){var A=u.value;n.payload=function(){return E(A)},n.callback=function(){s_(i,r,u)}}var N=r.stateNode;N!==null&&typeof N.componentDidCatch=="function"&&(n.callback=function(){s_(i,r,u),typeof E!="function"&&(Wo===null?Wo=new Set([this]):Wo.add(this));var v=u.stack;this.componentDidCatch(u.value,{componentStack:v!==null?v:""})})}function pv(n,i,r,u,E){if(r.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=r.alternate,i!==null&&Sc(i,r,E,!0),r=ni.current,r!==null){switch(r.tag){case 13:return Pi===null?wm():r.alternate===null&&Jt===0&&(Jt=3),r.flags&=-257,r.flags|=65536,r.lanes=E,u===zE?r.flags|=16384:(i=r.updateQueue,i===null?r.updateQueue=new Set([u]):i.add(u),Bm(n,u,E)),!1;case 22:return r.flags|=65536,u===zE?r.flags|=16384:(i=r.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},r.updateQueue=i):(r=i.retryQueue,r===null?i.retryQueue=new Set([u]):r.add(u)),Bm(n,u,E)),!1}throw Error(o(435,r.tag))}return Bm(n,u,E),wm(),!1}if(At)return i=ni.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=E,u!==UE&&(n=Error(o(422),{cause:u}),Tc(Ja(n,r)))):(u!==UE&&(i=Error(o(423),{cause:u}),Tc(Ja(i,r))),n=n.current.alternate,n.flags|=65536,E&=-E,n.lanes|=E,u=Ja(u,r),E=Em(n.stateNode,u,E),VE(n,E),Jt!==4&&(Jt=2)),!1;var A=Error(o(520),{cause:u});if(A=Ja(A,r),Gc===null?Gc=[A]:Gc.push(A),Jt!==4&&(Jt=2),i===null)return!0;u=Ja(u,r),r=i;do{switch(r.tag){case 3:return r.flags|=65536,n=E&-E,r.lanes|=n,n=Em(r.stateNode,u,n),VE(r,n),!1;case 1:if(i=r.type,A=r.stateNode,(r.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(Wo===null||!Wo.has(A))))return r.flags|=65536,E&=-E,r.lanes|=E,E=r_(E),c_(E,n,r,u),VE(r,E),!1}r=r.return}while(r!==null);return!1}var u_=Error(o(461)),xn=!1;function Yn(n,i,r,u){i.child=n===null?e_(i,null,r,u):ir(i,n.child,r,u)}function d_(n,i,r,u,E){r=r.render;var A=i.ref;if("ref"in u){var N={};for(var v in u)v!=="ref"&&(N[v]=u[v])}else N=u;return Fl(i),u=QE(n,i,r,N,A,E),v=JE(),n!==null&&!xn?($E(n,i,E),mo(n,i,E)):(At&&v&&HE(i),i.flags|=1,Yn(n,i,u,E),i.child)}function h_(n,i,r,u,E){if(n===null){var A=r.type;return typeof A=="function"&&!ME(A)&&A.defaultProps===void 0&&r.compare===null?(i.tag=15,i.type=A,f_(n,i,A,u,E)):(n=td(r.type,null,u,i,i.mode,E),n.ref=i.ref,n.return=i,i.child=n)}if(A=n.child,!gm(n,E)){var N=A.memoizedProps;if(r=r.compare,r=r!==null?r:Ec,r(N,u)&&n.ref===i.ref)return mo(n,i,E)}return i.flags|=1,n=so(A,u),n.ref=i.ref,n.return=i,i.child=n}function f_(n,i,r,u,E){if(n!==null){var A=n.memoizedProps;if(Ec(A,u)&&n.ref===i.ref)if(xn=!1,i.pendingProps=u=A,gm(n,E))(n.flags&131072)!==0&&(xn=!0);else return i.lanes=n.lanes,mo(n,i,E)}return mm(n,i,r,u,E)}function E_(n,i,r){var u=i.pendingProps,E=u.children,A=n!==null?n.memoizedState:null;if(u.mode==="hidden"){if((i.flags&128)!==0){if(u=A!==null?A.baseLanes|r:r,n!==null){for(E=i.child=n.child,A=0;E!==null;)A=A|E.lanes|E.childLanes,E=E.sibling;i.childLanes=A&~u}else i.childLanes=0,i.child=null;return m_(n,i,u,r)}if((r&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&ld(i,A!==null?A.cachePool:null),A!==null?fI(i,A):XE(),t_(i);else return i.lanes=i.childLanes=536870912,m_(n,i,A!==null?A.baseLanes|r:r,r)}else A!==null?(ld(i,A.cachePool),fI(i,A),Fo(),i.memoizedState=null):(n!==null&&ld(i,null),XE(),Fo());return Yn(n,i,E,r),i.child}function m_(n,i,r,u){var E=jE();return E=E===null?null:{parent:bn._currentValue,pool:E},i.memoizedState={baseLanes:r,cachePool:E},n!==null&&ld(i,null),XE(),t_(i),n!==null&&Sc(n,i,u,!0),null}function pd(n,i){var r=i.ref;if(r===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(o(284));(n===null||n.ref!==r)&&(i.flags|=4194816)}}function mm(n,i,r,u,E){return Fl(i),r=QE(n,i,r,u,void 0,E),u=JE(),n!==null&&!xn?($E(n,i,E),mo(n,i,E)):(At&&u&&HE(i),i.flags|=1,Yn(n,i,r,E),i.child)}function A_(n,i,r,u,E,A){return Fl(i),i.updateQueue=null,r=mI(i,u,r,E),EI(n),u=JE(),n!==null&&!xn?($E(n,i,A),mo(n,i,A)):(At&&u&&HE(i),i.flags|=1,Yn(n,i,r,A),i.child)}function R_(n,i,r,u,E){if(Fl(i),i.stateNode===null){var A=Xs,N=r.contextType;typeof N=="object"&&N!==null&&(A=na(N)),A=new r(u,A),i.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,A.updater=fm,i.stateNode=A,A._reactInternals=i,A=i.stateNode,A.props=u,A.state=i.memoizedState,A.refs={},YE(i),N=r.contextType,A.context=typeof N=="object"&&N!==null?na(N):Xs,A.state=i.memoizedState,N=r.getDerivedStateFromProps,typeof N=="function"&&(hm(i,r,N,u),A.state=i.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(N=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),N!==A.state&&fm.enqueueReplaceState(A,A.state,null),bc(i,u,A,E),Cc(),A.state=i.memoizedState),typeof A.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(n===null){A=i.stateNode;var v=i.memoizedProps,F=Yl(r,v);A.props=F;var oe=A.context,Ae=r.contextType;N=Xs,typeof Ae=="object"&&Ae!==null&&(N=na(Ae));var Te=r.getDerivedStateFromProps;Ae=typeof Te=="function"||typeof A.getSnapshotBeforeUpdate=="function",v=i.pendingProps!==v,Ae||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(v||oe!==N)&&a_(i,A,u,N),Uo=!1;var le=i.memoizedState;A.state=le,bc(i,u,A,E),Cc(),oe=i.memoizedState,v||le!==oe||Uo?(typeof Te=="function"&&(hm(i,r,Te,u),oe=i.memoizedState),(F=Uo||n_(i,r,F,u,le,oe,N))?(Ae||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(i.flags|=4194308)):(typeof A.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=oe),A.props=u,A.state=oe,A.context=N,u=F):(typeof A.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{A=i.stateNode,KE(n,i),N=i.memoizedProps,Ae=Yl(r,N),A.props=Ae,Te=i.pendingProps,le=A.context,oe=r.contextType,F=Xs,typeof oe=="object"&&oe!==null&&(F=na(oe)),v=r.getDerivedStateFromProps,(oe=typeof v=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(N!==Te||le!==F)&&a_(i,A,u,F),Uo=!1,le=i.memoizedState,A.state=le,bc(i,u,A,E),Cc();var re=i.memoizedState;N!==Te||le!==re||Uo||n!==null&&n.dependencies!==null&&id(n.dependencies)?(typeof v=="function"&&(hm(i,r,v,u),re=i.memoizedState),(Ae=Uo||n_(i,r,Ae,u,le,re,F)||n!==null&&n.dependencies!==null&&id(n.dependencies))?(oe||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(u,re,F),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(u,re,F)),typeof A.componentDidUpdate=="function"&&(i.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof A.componentDidUpdate!="function"||N===n.memoizedProps&&le===n.memoizedState||(i.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||N===n.memoizedProps&&le===n.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=re),A.props=u,A.state=re,A.context=F,u=Ae):(typeof A.componentDidUpdate!="function"||N===n.memoizedProps&&le===n.memoizedState||(i.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||N===n.memoizedProps&&le===n.memoizedState||(i.flags|=1024),u=!1)}return A=u,pd(n,i),u=(i.flags&128)!==0,A||u?(A=i.stateNode,r=u&&typeof r.getDerivedStateFromError!="function"?null:A.render(),i.flags|=1,n!==null&&u?(i.child=ir(i,n.child,null,E),i.child=ir(i,null,r,E)):Yn(n,i,r,E),i.memoizedState=A.state,n=i.child):n=mo(n,i,E),n}function T_(n,i,r,u){return Rc(),i.flags|=256,Yn(n,i,r,u),i.child}var Am={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Rm(n){return{baseLanes:n,cachePool:oI()}}function Tm(n,i,r){return n=n!==null?n.childLanes&~r:0,i&&(n|=ai),n}function S_(n,i,r){var u=i.pendingProps,E=!1,A=(i.flags&128)!==0,N;if((N=A)||(N=n!==null&&n.memoizedState===null?!1:(On.current&2)!==0),N&&(E=!0,i.flags&=-129),N=(i.flags&32)!==0,i.flags&=-33,n===null){if(At){if(E?Bo(i):Fo(),At){var v=Qt,F;if(F=v){e:{for(F=v,v=Ui;F.nodeType!==8;){if(!v){v=null;break e}if(F=gi(F.nextSibling),F===null){v=null;break e}}v=F}v!==null?(i.memoizedState={dehydrated:v,treeContext:Ul!==null?{id:ro,overflow:co}:null,retryLane:536870912,hydrationErrors:null},F=ka(18,null,null,0),F.stateNode=v,F.return=i,i.child=F,ra=i,Qt=null,F=!0):F=!1}F||Gl(i)}if(v=i.memoizedState,v!==null&&(v=v.dehydrated,v!==null))return tA(v)?i.lanes=32:i.lanes=536870912,null;Eo(i)}return v=u.children,u=u.fallback,E?(Fo(),E=i.mode,v=Nd({mode:"hidden",children:v},E),u=kl(u,E,r,null),v.return=i,u.return=i,v.sibling=u,i.child=v,E=i.child,E.memoizedState=Rm(r),E.childLanes=Tm(n,N,r),i.memoizedState=Am,u):(Bo(i),Sm(i,v))}if(F=n.memoizedState,F!==null&&(v=F.dehydrated,v!==null)){if(A)i.flags&256?(Bo(i),i.flags&=-257,i=Im(n,i,r)):i.memoizedState!==null?(Fo(),i.child=n.child,i.flags|=128,i=null):(Fo(),E=u.fallback,v=i.mode,u=Nd({mode:"visible",children:u.children},v),E=kl(E,v,r,null),E.flags|=2,u.return=i,E.return=i,u.sibling=E,i.child=u,ir(i,n.child,null,r),u=i.child,u.memoizedState=Rm(r),u.childLanes=Tm(n,N,r),i.memoizedState=Am,i=E);else if(Bo(i),tA(v)){if(N=v.nextSibling&&v.nextSibling.dataset,N)var oe=N.dgst;N=oe,u=Error(o(419)),u.stack="",u.digest=N,Tc({value:u,source:null,stack:null}),i=Im(n,i,r)}else if(xn||Sc(n,i,r,!1),N=(r&n.childLanes)!==0,xn||N){if(N=xt,N!==null&&(u=r&-r,u=(u&42)!==0?1:ic(u),u=(u&(N.suspendedLanes|r))!==0?0:u,u!==0&&u!==F.retryLane))throw F.retryLane=u,Ws(n,u),Ba(N,n,u),u_;v.data==="$?"||wm(),i=Im(n,i,r)}else v.data==="$?"?(i.flags|=192,i.child=n.child,i=null):(n=F.treeContext,Qt=gi(v.nextSibling),ra=i,At=!0,wl=null,Ui=!1,n!==null&&(ei[ti++]=ro,ei[ti++]=co,ei[ti++]=Ul,ro=n.id,co=n.overflow,Ul=i),i=Sm(i,u.children),i.flags|=4096);return i}return E?(Fo(),E=u.fallback,v=i.mode,F=n.child,oe=F.sibling,u=so(F,{mode:"hidden",children:u.children}),u.subtreeFlags=F.subtreeFlags&65011712,oe!==null?E=so(oe,E):(E=kl(E,v,r,null),E.flags|=2),E.return=i,u.return=i,u.sibling=E,i.child=u,u=E,E=i.child,v=n.child.memoizedState,v===null?v=Rm(r):(F=v.cachePool,F!==null?(oe=bn._currentValue,F=F.parent!==oe?{parent:oe,pool:oe}:F):F=oI(),v={baseLanes:v.baseLanes|r,cachePool:F}),E.memoizedState=v,E.childLanes=Tm(n,N,r),i.memoizedState=Am,u):(Bo(i),r=n.child,n=r.sibling,r=so(r,{mode:"visible",children:u.children}),r.return=i,r.sibling=null,n!==null&&(N=i.deletions,N===null?(i.deletions=[n],i.flags|=16):N.push(n)),i.child=r,i.memoizedState=null,r)}function Sm(n,i){return i=Nd({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function Nd(n,i){return n=ka(22,n,null,i),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function Im(n,i,r){return ir(i,n.child,null,r),n=Sm(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function I_(n,i,r){n.lanes|=i;var u=n.alternate;u!==null&&(u.lanes|=i),wE(n.return,i,r)}function _m(n,i,r,u,E){var A=n.memoizedState;A===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:r,tailMode:E}:(A.isBackwards=i,A.rendering=null,A.renderingStartTime=0,A.last=u,A.tail=r,A.tailMode=E)}function __(n,i,r){var u=i.pendingProps,E=u.revealOrder,A=u.tail;if(Yn(n,i,u.children,r),u=On.current,(u&2)!==0)u=u&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&I_(n,r,i);else if(n.tag===19)I_(n,r,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}u&=1}switch(j(On,u),E){case"forwards":for(r=i.child,E=null;r!==null;)n=r.alternate,n!==null&&Id(n)===null&&(E=r),r=r.sibling;r=E,r===null?(E=i.child,i.child=null):(E=r.sibling,r.sibling=null),_m(i,!1,E,r,A);break;case"backwards":for(r=null,E=i.child,i.child=null;E!==null;){if(n=E.alternate,n!==null&&Id(n)===null){i.child=E;break}n=E.sibling,E.sibling=r,r=E,E=n}_m(i,!0,r,null,A);break;case"together":_m(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function mo(n,i,r){if(n!==null&&(i.dependencies=n.dependencies),Vo|=i.lanes,(r&i.childLanes)===0)if(n!==null){if(Sc(n,i,r,!1),(r&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(o(153));if(i.child!==null){for(n=i.child,r=so(n,n.pendingProps),i.child=r,r.return=i;n.sibling!==null;)n=n.sibling,r=r.sibling=so(n,n.pendingProps),r.return=i;r.sibling=null}return i.child}function gm(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&id(n)))}function Nv(n,i,r){switch(i.tag){case 3:se(i,i.stateNode.containerInfo),ko(i,bn,n.memoizedState.cache),Rc();break;case 27:case 5:Se(i);break;case 4:se(i,i.stateNode.containerInfo);break;case 10:ko(i,i.type,i.memoizedProps.value);break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(Bo(i),i.flags|=128,null):(r&i.child.childLanes)!==0?S_(n,i,r):(Bo(i),n=mo(n,i,r),n!==null?n.sibling:null);Bo(i);break;case 19:var E=(n.flags&128)!==0;if(u=(r&i.childLanes)!==0,u||(Sc(n,i,r,!1),u=(r&i.childLanes)!==0),E){if(u)return __(n,i,r);i.flags|=128}if(E=i.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),j(On,On.current),u)break;return null;case 22:case 23:return i.lanes=0,E_(n,i,r);case 24:ko(i,bn,n.memoizedState.cache)}return mo(n,i,r)}function g_(n,i,r){if(n!==null)if(n.memoizedProps!==i.pendingProps)xn=!0;else{if(!gm(n,r)&&(i.flags&128)===0)return xn=!1,Nv(n,i,r);xn=(n.flags&131072)!==0}else xn=!1,At&&(i.flags&1048576)!==0&&JS(i,ad,i.index);switch(i.lanes=0,i.tag){case 16:e:{n=i.pendingProps;var u=i.elementType,E=u._init;if(u=E(u._payload),i.type=u,typeof u=="function")ME(u)?(n=Yl(u,n),i.tag=1,i=R_(null,i,u,n,r)):(i.tag=0,i=mm(null,i,u,n,r));else{if(u!=null){if(E=u.$$typeof,E===L){i.tag=11,i=d_(null,i,u,n,r);break e}else if(E===B){i.tag=14,i=h_(null,i,u,n,r);break e}}throw i=Ee(u)||u,Error(o(306,i,""))}}return i;case 0:return mm(n,i,i.type,i.pendingProps,r);case 1:return u=i.type,E=Yl(u,i.pendingProps),R_(n,i,u,E,r);case 3:e:{if(se(i,i.stateNode.containerInfo),n===null)throw Error(o(387));u=i.pendingProps;var A=i.memoizedState;E=A.element,KE(n,i),bc(i,u,null,r);var N=i.memoizedState;if(u=N.cache,ko(i,bn,u),u!==A.cache&&GE(i,[bn],r,!0),Cc(),u=N.element,A.isDehydrated)if(A={element:u,isDehydrated:!1,cache:N.cache},i.updateQueue.baseState=A,i.memoizedState=A,i.flags&256){i=T_(n,i,u,r);break e}else if(u!==E){E=Ja(Error(o(424)),i),Tc(E),i=T_(n,i,u,r);break e}else{switch(n=i.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Qt=gi(n.firstChild),ra=i,At=!0,wl=null,Ui=!0,r=e_(i,null,u,r),i.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(Rc(),u===E){i=mo(n,i,r);break e}Yn(n,i,u,r)}i=i.child}return i;case 26:return pd(n,i),n===null?(r=bg(i.type,null,i.pendingProps,null))?i.memoizedState=r:At||(r=i.type,n=i.pendingProps,u=wd(P.current).createElement(r),u[ta]=i,u[Na]=n,Vn(u,r,n),Ln(u),i.stateNode=u):i.memoizedState=bg(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return Se(i),n===null&&At&&(u=i.stateNode=pg(i.type,i.pendingProps,P.current),ra=i,Ui=!0,E=Qt,Zo(i.type)?(nA=E,Qt=gi(u.firstChild)):Qt=E),Yn(n,i,i.pendingProps.children,r),pd(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&At&&((E=u=Qt)&&(u=Jv(u,i.type,i.pendingProps,Ui),u!==null?(i.stateNode=u,ra=i,Qt=gi(u.firstChild),Ui=!1,E=!0):E=!1),E||Gl(i)),Se(i),E=i.type,A=i.pendingProps,N=n!==null?n.memoizedProps:null,u=A.children,Jm(E,A)?u=null:N!==null&&Jm(E,N)&&(i.flags|=32),i.memoizedState!==null&&(E=QE(n,i,Av,null,null,r),Xc._currentValue=E),pd(n,i),Yn(n,i,u,r),i.child;case 6:return n===null&&At&&((n=r=Qt)&&(r=$v(r,i.pendingProps,Ui),r!==null?(i.stateNode=r,ra=i,Qt=null,n=!0):n=!1),n||Gl(i)),null;case 13:return S_(n,i,r);case 4:return se(i,i.stateNode.containerInfo),u=i.pendingProps,n===null?i.child=ir(i,null,u,r):Yn(n,i,u,r),i.child;case 11:return d_(n,i,i.type,i.pendingProps,r);case 7:return Yn(n,i,i.pendingProps,r),i.child;case 8:return Yn(n,i,i.pendingProps.children,r),i.child;case 12:return Yn(n,i,i.pendingProps.children,r),i.child;case 10:return u=i.pendingProps,ko(i,i.type,u.value),Yn(n,i,u.children,r),i.child;case 9:return E=i.type._context,u=i.pendingProps.children,Fl(i),E=na(E),u=u(E),i.flags|=1,Yn(n,i,u,r),i.child;case 14:return h_(n,i,i.type,i.pendingProps,r);case 15:return f_(n,i,i.type,i.pendingProps,r);case 19:return __(n,i,r);case 31:return u=i.pendingProps,r=i.mode,u={mode:u.mode,children:u.children},n===null?(r=Nd(u,r),r.ref=i.ref,i.child=r,r.return=i,i=r):(r=so(n.child,u),r.ref=i.ref,i.child=r,r.return=i,i=r),i;case 22:return E_(n,i,r);case 24:return Fl(i),u=na(bn),n===null?(E=jE(),E===null&&(E=xt,A=BE(),E.pooledCache=A,A.refCount++,A!==null&&(E.pooledCacheLanes|=r),E=A),i.memoizedState={parent:u,cache:E},YE(i),ko(i,bn,E)):((n.lanes&r)!==0&&(KE(n,i),bc(i,null,null,r),Cc()),E=n.memoizedState,A=i.memoizedState,E.parent!==u?(E={parent:u,cache:u},i.memoizedState=E,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=E),ko(i,bn,u)):(u=A.cache,ko(i,bn,u),u!==E.cache&&GE(i,[bn],r,!0))),Yn(n,i,i.pendingProps.children,r),i.child;case 29:throw i.pendingProps}throw Error(o(156,i.tag))}function Ao(n){n.flags|=4}function p_(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!Mg(i)){if(i=ni.current,i!==null&&((ct&4194048)===ct?Pi!==null:(ct&62914560)!==ct&&(ct&536870912)===0||i!==Pi))throw pc=zE,lI;n.flags|=8192}}function Cd(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?Ms():536870912,n.lanes|=i,rr|=i)}function xc(n,i){if(!At)switch(n.tailMode){case"hidden":i=n.tail;for(var r=null;i!==null;)i.alternate!==null&&(r=i),i=i.sibling;r===null?n.tail=null:r.sibling=null;break;case"collapsed":r=n.tail;for(var u=null;r!==null;)r.alternate!==null&&(u=r),r=r.sibling;u===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function Kt(n){var i=n.alternate!==null&&n.alternate.child===n.child,r=0,u=0;if(i)for(var E=n.child;E!==null;)r|=E.lanes|E.childLanes,u|=E.subtreeFlags&65011712,u|=E.flags&65011712,E.return=n,E=E.sibling;else for(E=n.child;E!==null;)r|=E.lanes|E.childLanes,u|=E.subtreeFlags,u|=E.flags,E.return=n,E=E.sibling;return n.subtreeFlags|=u,n.childLanes=r,i}function Cv(n,i,r){var u=i.pendingProps;switch(kE(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kt(i),null;case 1:return Kt(i),null;case 3:return r=i.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),ho(bn),fe(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(Ac(i)?Ao(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,tI())),Kt(i),null;case 26:return r=i.memoizedState,n===null?(Ao(i),r!==null?(Kt(i),p_(i,r)):(Kt(i),i.flags&=-16777217)):r?r!==n.memoizedState?(Ao(i),Kt(i),p_(i,r)):(Kt(i),i.flags&=-16777217):(n.memoizedProps!==u&&Ao(i),Kt(i),i.flags&=-16777217),null;case 27:Oe(i),r=P.current;var E=i.type;if(n!==null&&i.stateNode!=null)n.memoizedProps!==u&&Ao(i);else{if(!u){if(i.stateNode===null)throw Error(o(166));return Kt(i),null}n=Z.current,Ac(i)?$S(i):(n=pg(E,u,r),i.stateNode=n,Ao(i))}return Kt(i),null;case 5:if(Oe(i),r=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==u&&Ao(i);else{if(!u){if(i.stateNode===null)throw Error(o(166));return Kt(i),null}if(n=Z.current,Ac(i))$S(i);else{switch(E=wd(P.current),n){case 1:n=E.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:n=E.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":n=E.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":n=E.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":n=E.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof u.is=="string"?E.createElement("select",{is:u.is}):E.createElement("select"),u.multiple?n.multiple=!0:u.size&&(n.size=u.size);break;default:n=typeof u.is=="string"?E.createElement(r,{is:u.is}):E.createElement(r)}}n[ta]=i,n[Na]=u;e:for(E=i.child;E!==null;){if(E.tag===5||E.tag===6)n.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===i)break e;for(;E.sibling===null;){if(E.return===null||E.return===i)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}i.stateNode=n;e:switch(Vn(n,r,u),r){case"button":case"input":case"select":case"textarea":n=!!u.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&Ao(i)}}return Kt(i),i.flags&=-16777217,null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==u&&Ao(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(o(166));if(n=P.current,Ac(i)){if(n=i.stateNode,r=i.memoizedProps,u=null,E=ra,E!==null)switch(E.tag){case 27:case 5:u=E.memoizedProps}n[ta]=i,n=!!(n.nodeValue===r||u!==null&&u.suppressHydrationWarning===!0||Ag(n.nodeValue,r)),n||Gl(i)}else n=wd(n).createTextNode(u),n[ta]=i,i.stateNode=n}return Kt(i),null;case 13:if(u=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(E=Ac(i),u!==null&&u.dehydrated!==null){if(n===null){if(!E)throw Error(o(318));if(E=i.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(o(317));E[ta]=i}else Rc(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Kt(i),E=!1}else E=tI(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=E),E=!0;if(!E)return i.flags&256?(Eo(i),i):(Eo(i),null)}if(Eo(i),(i.flags&128)!==0)return i.lanes=r,i;if(r=u!==null,n=n!==null&&n.memoizedState!==null,r){u=i.child,E=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(E=u.alternate.memoizedState.cachePool.pool);var A=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(A=u.memoizedState.cachePool.pool),A!==E&&(u.flags|=2048)}return r!==n&&r&&(i.child.flags|=8192),Cd(i,i.updateQueue),Kt(i),null;case 4:return fe(),n===null&&Wm(i.stateNode.containerInfo),Kt(i),null;case 10:return ho(i.type),Kt(i),null;case 19:if(W(On),E=i.memoizedState,E===null)return Kt(i),null;if(u=(i.flags&128)!==0,A=E.rendering,A===null)if(u)xc(E,!1);else{if(Jt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(A=Id(n),A!==null){for(i.flags|=128,xc(E,!1),n=A.updateQueue,i.updateQueue=n,Cd(i,n),i.subtreeFlags=0,n=r,r=i.child;r!==null;)QS(r,n),r=r.sibling;return j(On,On.current&1|2),i.child}n=n.sibling}E.tail!==null&&ve()>Dd&&(i.flags|=128,u=!0,xc(E,!1),i.lanes=4194304)}else{if(!u)if(n=Id(A),n!==null){if(i.flags|=128,u=!0,n=n.updateQueue,i.updateQueue=n,Cd(i,n),xc(E,!0),E.tail===null&&E.tailMode==="hidden"&&!A.alternate&&!At)return Kt(i),null}else 2*ve()-E.renderingStartTime>Dd&&r!==536870912&&(i.flags|=128,u=!0,xc(E,!1),i.lanes=4194304);E.isBackwards?(A.sibling=i.child,i.child=A):(n=E.last,n!==null?n.sibling=A:i.child=A,E.last=A)}return E.tail!==null?(i=E.tail,E.rendering=i,E.tail=i.sibling,E.renderingStartTime=ve(),i.sibling=null,n=On.current,j(On,u?n&1|2:n&1),i):(Kt(i),null);case 22:case 23:return Eo(i),qE(),u=i.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(r&536870912)!==0&&(i.flags&128)===0&&(Kt(i),i.subtreeFlags&6&&(i.flags|=8192)):Kt(i),r=i.updateQueue,r!==null&&Cd(i,r.retryQueue),r=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(r=n.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==r&&(i.flags|=2048),n!==null&&W(jl),null;case 24:return r=null,n!==null&&(r=n.memoizedState.cache),i.memoizedState.cache!==r&&(i.flags|=2048),ho(bn),Kt(i),null;case 25:return null;case 30:return null}throw Error(o(156,i.tag))}function bv(n,i){switch(kE(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return ho(bn),fe(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return Oe(i),null;case 13:if(Eo(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(o(340));Rc()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return W(On),null;case 4:return fe(),null;case 10:return ho(i.type),null;case 22:case 23:return Eo(i),qE(),n!==null&&W(jl),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return ho(bn),null;case 25:return null;default:return null}}function N_(n,i){switch(kE(i),i.tag){case 3:ho(bn),fe();break;case 26:case 27:case 5:Oe(i);break;case 4:fe();break;case 13:Eo(i);break;case 19:W(On);break;case 10:ho(i.type);break;case 22:case 23:Eo(i),qE(),n!==null&&W(jl);break;case 24:ho(bn)}}function Hc(n,i){try{var r=i.updateQueue,u=r!==null?r.lastEffect:null;if(u!==null){var E=u.next;r=E;do{if((r.tag&n)===n){u=void 0;var A=r.create,N=r.inst;u=A(),N.destroy=u}r=r.next}while(r!==E)}}catch(v){yt(i,i.return,v)}}function jo(n,i,r){try{var u=i.updateQueue,E=u!==null?u.lastEffect:null;if(E!==null){var A=E.next;u=A;do{if((u.tag&n)===n){var N=u.inst,v=N.destroy;if(v!==void 0){N.destroy=void 0,E=i;var F=r,oe=v;try{oe()}catch(Ae){yt(E,F,Ae)}}}u=u.next}while(u!==A)}}catch(Ae){yt(i,i.return,Ae)}}function C_(n){var i=n.updateQueue;if(i!==null){var r=n.stateNode;try{hI(i,r)}catch(u){yt(n,n.return,u)}}}function b_(n,i,r){r.props=Yl(n.type,n.memoizedProps),r.state=n.memoizedState;try{r.componentWillUnmount()}catch(u){yt(n,i,u)}}function kc(n,i){try{var r=n.ref;if(r!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof r=="function"?n.refCleanup=r(u):r.current=u}}catch(E){yt(n,i,E)}}function wi(n,i){var r=n.ref,u=n.refCleanup;if(r!==null)if(typeof u=="function")try{u()}catch(E){yt(n,i,E)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(E){yt(n,i,E)}else r.current=null}function O_(n){var i=n.type,r=n.memoizedProps,u=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":r.autoFocus&&u.focus();break e;case"img":r.src?u.src=r.src:r.srcSet&&(u.srcset=r.srcSet)}}catch(E){yt(n,n.return,E)}}function pm(n,i,r){try{var u=n.stateNode;Wv(u,n.type,r,i),u[Na]=i}catch(E){yt(n,n.return,E)}}function D_(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Zo(n.type)||n.tag===4}function Nm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||D_(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Zo(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Cm(n,i,r){var u=n.tag;if(u===5||u===6)n=n.stateNode,i?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(n,i):(i=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,i.appendChild(n),r=r._reactRootContainer,r!=null||i.onclick!==null||(i.onclick=Pd));else if(u!==4&&(u===27&&Zo(n.type)&&(r=n.stateNode,i=null),n=n.child,n!==null))for(Cm(n,i,r),n=n.sibling;n!==null;)Cm(n,i,r),n=n.sibling}function bd(n,i,r){var u=n.tag;if(u===5||u===6)n=n.stateNode,i?r.insertBefore(n,i):r.appendChild(n);else if(u!==4&&(u===27&&Zo(n.type)&&(r=n.stateNode),n=n.child,n!==null))for(bd(n,i,r),n=n.sibling;n!==null;)bd(n,i,r),n=n.sibling}function y_(n){var i=n.stateNode,r=n.memoizedProps;try{for(var u=n.type,E=i.attributes;E.length;)i.removeAttributeNode(E[0]);Vn(i,u,r),i[ta]=n,i[Na]=r}catch(A){yt(n,n.return,A)}}var Ro=!1,fn=!1,bm=!1,v_=typeof WeakSet=="function"?WeakSet:Set,Hn=null;function Ov(n,i){if(n=n.containerInfo,Zm=Yd,n=FS(n),NE(n)){if("selectionStart"in n)var r={start:n.selectionStart,end:n.selectionEnd};else e:{r=(r=n.ownerDocument)&&r.defaultView||window;var u=r.getSelection&&r.getSelection();if(u&&u.rangeCount!==0){r=u.anchorNode;var E=u.anchorOffset,A=u.focusNode;u=u.focusOffset;try{r.nodeType,A.nodeType}catch{r=null;break e}var N=0,v=-1,F=-1,oe=0,Ae=0,Te=n,le=null;t:for(;;){for(var re;Te!==r||E!==0&&Te.nodeType!==3||(v=N+E),Te!==A||u!==0&&Te.nodeType!==3||(F=N+u),Te.nodeType===3&&(N+=Te.nodeValue.length),(re=Te.firstChild)!==null;)le=Te,Te=re;for(;;){if(Te===n)break t;if(le===r&&++oe===E&&(v=N),le===A&&++Ae===u&&(F=N),(re=Te.nextSibling)!==null)break;Te=le,le=Te.parentNode}Te=re}r=v===-1||F===-1?null:{start:v,end:F}}else r=null}r=r||{start:0,end:0}}else r=null;for(Qm={focusedElem:n,selectionRange:r},Yd=!1,Hn=i;Hn!==null;)if(i=Hn,n=i.child,(i.subtreeFlags&1024)!==0&&n!==null)n.return=i,Hn=n;else for(;Hn!==null;){switch(i=Hn,A=i.alternate,n=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&A!==null){n=void 0,r=i,E=A.memoizedProps,A=A.memoizedState,u=r.stateNode;try{var Ge=Yl(r.type,E,r.elementType===r.type);n=u.getSnapshotBeforeUpdate(Ge,A),u.__reactInternalSnapshotBeforeUpdate=n}catch(ke){yt(r,r.return,ke)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,r=n.nodeType,r===9)eA(n);else if(r===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":eA(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(o(163))}if(n=i.sibling,n!==null){n.return=i.return,Hn=n;break}Hn=i.return}}function M_(n,i,r){var u=r.flags;switch(r.tag){case 0:case 11:case 15:zo(n,r),u&4&&Hc(5,r);break;case 1:if(zo(n,r),u&4)if(n=r.stateNode,i===null)try{n.componentDidMount()}catch(N){yt(r,r.return,N)}else{var E=Yl(r.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(E,i,n.__reactInternalSnapshotBeforeUpdate)}catch(N){yt(r,r.return,N)}}u&64&&C_(r),u&512&&kc(r,r.return);break;case 3:if(zo(n,r),u&64&&(n=r.updateQueue,n!==null)){if(i=null,r.child!==null)switch(r.child.tag){case 27:case 5:i=r.child.stateNode;break;case 1:i=r.child.stateNode}try{hI(n,i)}catch(N){yt(r,r.return,N)}}break;case 27:i===null&&u&4&&y_(r);case 26:case 5:zo(n,r),i===null&&u&4&&O_(r),u&512&&kc(r,r.return);break;case 12:zo(n,r);break;case 13:zo(n,r),u&4&&H_(n,r),u&64&&(n=r.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(r=Uv.bind(null,r),eM(n,r))));break;case 22:if(u=r.memoizedState!==null||Ro,!u){i=i!==null&&i.memoizedState!==null||fn,E=Ro;var A=fn;Ro=u,(fn=i)&&!A?Yo(n,r,(r.subtreeFlags&8772)!==0):zo(n,r),Ro=E,fn=A}break;case 30:break;default:zo(n,r)}}function L_(n){var i=n.alternate;i!==null&&(n.alternate=null,L_(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&oE(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Gt=null,Oa=!1;function To(n,i,r){for(r=r.child;r!==null;)x_(n,i,r),r=r.sibling}function x_(n,i,r){if(rt&&typeof rt.onCommitFiberUnmount=="function")try{rt.onCommitFiberUnmount(Lo,r)}catch{}switch(r.tag){case 26:fn||wi(r,i),To(n,i,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:fn||wi(r,i);var u=Gt,E=Oa;Zo(r.type)&&(Gt=r.stateNode,Oa=!1),To(n,i,r),Yc(r.stateNode),Gt=u,Oa=E;break;case 5:fn||wi(r,i);case 6:if(u=Gt,E=Oa,Gt=null,To(n,i,r),Gt=u,Oa=E,Gt!==null)if(Oa)try{(Gt.nodeType===9?Gt.body:Gt.nodeName==="HTML"?Gt.ownerDocument.body:Gt).removeChild(r.stateNode)}catch(A){yt(r,i,A)}else try{Gt.removeChild(r.stateNode)}catch(A){yt(r,i,A)}break;case 18:Gt!==null&&(Oa?(n=Gt,_g(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,r.stateNode),Jc(n)):_g(Gt,r.stateNode));break;case 4:u=Gt,E=Oa,Gt=r.stateNode.containerInfo,Oa=!0,To(n,i,r),Gt=u,Oa=E;break;case 0:case 11:case 14:case 15:fn||jo(2,r,i),fn||jo(4,r,i),To(n,i,r);break;case 1:fn||(wi(r,i),u=r.stateNode,typeof u.componentWillUnmount=="function"&&b_(r,i,u)),To(n,i,r);break;case 21:To(n,i,r);break;case 22:fn=(u=fn)||r.memoizedState!==null,To(n,i,r),fn=u;break;default:To(n,i,r)}}function H_(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Jc(n)}catch(r){yt(i,i.return,r)}}function Dv(n){switch(n.tag){case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new v_),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new v_),i;default:throw Error(o(435,n.tag))}}function Om(n,i){var r=Dv(n);i.forEach(function(u){var E=Pv.bind(null,n,u);r.has(u)||(r.add(u),u.then(E,E))})}function Ua(n,i){var r=i.deletions;if(r!==null)for(var u=0;u<r.length;u++){var E=r[u],A=n,N=i,v=N;e:for(;v!==null;){switch(v.tag){case 27:if(Zo(v.type)){Gt=v.stateNode,Oa=!1;break e}break;case 5:Gt=v.stateNode,Oa=!1;break e;case 3:case 4:Gt=v.stateNode.containerInfo,Oa=!0;break e}v=v.return}if(Gt===null)throw Error(o(160));x_(A,N,E),Gt=null,Oa=!1,A=E.alternate,A!==null&&(A.return=null),E.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)k_(i,n),i=i.sibling}var _i=null;function k_(n,i){var r=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Ua(i,n),Pa(n),u&4&&(jo(3,n,n.return),Hc(3,n),jo(5,n,n.return));break;case 1:Ua(i,n),Pa(n),u&512&&(fn||r===null||wi(r,r.return)),u&64&&Ro&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(r=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=r===null?u:r.concat(u))));break;case 26:var E=_i;if(Ua(i,n),Pa(n),u&512&&(fn||r===null||wi(r,r.return)),u&4){var A=r!==null?r.memoizedState:null;if(u=n.memoizedState,r===null)if(u===null)if(n.stateNode===null){e:{u=n.type,r=n.memoizedProps,E=E.ownerDocument||E;t:switch(u){case"title":A=E.getElementsByTagName("title")[0],(!A||A[oc]||A[ta]||A.namespaceURI==="http://www.w3.org/2000/svg"||A.hasAttribute("itemprop"))&&(A=E.createElement(u),E.head.insertBefore(A,E.querySelector("head > title"))),Vn(A,u,r),A[ta]=n,Ln(A),u=A;break e;case"link":var N=yg("link","href",E).get(u+(r.href||""));if(N){for(var v=0;v<N.length;v++)if(A=N[v],A.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&A.getAttribute("rel")===(r.rel==null?null:r.rel)&&A.getAttribute("title")===(r.title==null?null:r.title)&&A.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){N.splice(v,1);break t}}A=E.createElement(u),Vn(A,u,r),E.head.appendChild(A);break;case"meta":if(N=yg("meta","content",E).get(u+(r.content||""))){for(v=0;v<N.length;v++)if(A=N[v],A.getAttribute("content")===(r.content==null?null:""+r.content)&&A.getAttribute("name")===(r.name==null?null:r.name)&&A.getAttribute("property")===(r.property==null?null:r.property)&&A.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&A.getAttribute("charset")===(r.charSet==null?null:r.charSet)){N.splice(v,1);break t}}A=E.createElement(u),Vn(A,u,r),E.head.appendChild(A);break;default:throw Error(o(468,u))}A[ta]=n,Ln(A),u=A}n.stateNode=u}else vg(E,n.type,n.stateNode);else n.stateNode=Dg(E,u,n.memoizedProps);else A!==u?(A===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):A.count--,u===null?vg(E,n.type,n.stateNode):Dg(E,u,n.memoizedProps)):u===null&&n.stateNode!==null&&pm(n,n.memoizedProps,r.memoizedProps)}break;case 27:Ua(i,n),Pa(n),u&512&&(fn||r===null||wi(r,r.return)),r!==null&&u&4&&pm(n,n.memoizedProps,r.memoizedProps);break;case 5:if(Ua(i,n),Pa(n),u&512&&(fn||r===null||wi(r,r.return)),n.flags&32){E=n.stateNode;try{Bs(E,"")}catch(re){yt(n,n.return,re)}}u&4&&n.stateNode!=null&&(E=n.memoizedProps,pm(n,E,r!==null?r.memoizedProps:E)),u&1024&&(bm=!0);break;case 6:if(Ua(i,n),Pa(n),u&4){if(n.stateNode===null)throw Error(o(162));u=n.memoizedProps,r=n.stateNode;try{r.nodeValue=u}catch(re){yt(n,n.return,re)}}break;case 3:if(Fd=null,E=_i,_i=Gd(i.containerInfo),Ua(i,n),_i=E,Pa(n),u&4&&r!==null&&r.memoizedState.isDehydrated)try{Jc(i.containerInfo)}catch(re){yt(n,n.return,re)}bm&&(bm=!1,U_(n));break;case 4:u=_i,_i=Gd(n.stateNode.containerInfo),Ua(i,n),Pa(n),_i=u;break;case 12:Ua(i,n),Pa(n);break;case 13:Ua(i,n),Pa(n),n.child.flags&8192&&n.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(xm=ve()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Om(n,u)));break;case 22:E=n.memoizedState!==null;var F=r!==null&&r.memoizedState!==null,oe=Ro,Ae=fn;if(Ro=oe||E,fn=Ae||F,Ua(i,n),fn=Ae,Ro=oe,Pa(n),u&8192)e:for(i=n.stateNode,i._visibility=E?i._visibility&-2:i._visibility|1,E&&(r===null||F||Ro||fn||Kl(n)),r=null,i=n;;){if(i.tag===5||i.tag===26){if(r===null){F=r=i;try{if(A=F.stateNode,E)N=A.style,typeof N.setProperty=="function"?N.setProperty("display","none","important"):N.display="none";else{v=F.stateNode;var Te=F.memoizedProps.style,le=Te!=null&&Te.hasOwnProperty("display")?Te.display:null;v.style.display=le==null||typeof le=="boolean"?"":(""+le).trim()}}catch(re){yt(F,F.return,re)}}}else if(i.tag===6){if(r===null){F=i;try{F.stateNode.nodeValue=E?"":F.memoizedProps}catch(re){yt(F,F.return,re)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;r===i&&(r=null),i=i.return}r===i&&(r=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=n.updateQueue,u!==null&&(r=u.retryQueue,r!==null&&(u.retryQueue=null,Om(n,r))));break;case 19:Ua(i,n),Pa(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Om(n,u)));break;case 30:break;case 21:break;default:Ua(i,n),Pa(n)}}function Pa(n){var i=n.flags;if(i&2){try{for(var r,u=n.return;u!==null;){if(D_(u)){r=u;break}u=u.return}if(r==null)throw Error(o(160));switch(r.tag){case 27:var E=r.stateNode,A=Nm(n);bd(n,A,E);break;case 5:var N=r.stateNode;r.flags&32&&(Bs(N,""),r.flags&=-33);var v=Nm(n);bd(n,v,N);break;case 3:case 4:var F=r.stateNode.containerInfo,oe=Nm(n);Cm(n,oe,F);break;default:throw Error(o(161))}}catch(Ae){yt(n,n.return,Ae)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function U_(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;U_(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function zo(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)M_(n,i.alternate,i),i=i.sibling}function Kl(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:jo(4,i,i.return),Kl(i);break;case 1:wi(i,i.return);var r=i.stateNode;typeof r.componentWillUnmount=="function"&&b_(i,i.return,r),Kl(i);break;case 27:Yc(i.stateNode);case 26:case 5:wi(i,i.return),Kl(i);break;case 22:i.memoizedState===null&&Kl(i);break;case 30:Kl(i);break;default:Kl(i)}n=n.sibling}}function Yo(n,i,r){for(r=r&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,E=n,A=i,N=A.flags;switch(A.tag){case 0:case 11:case 15:Yo(E,A,r),Hc(4,A);break;case 1:if(Yo(E,A,r),u=A,E=u.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(oe){yt(u,u.return,oe)}if(u=A,E=u.updateQueue,E!==null){var v=u.stateNode;try{var F=E.shared.hiddenCallbacks;if(F!==null)for(E.shared.hiddenCallbacks=null,E=0;E<F.length;E++)dI(F[E],v)}catch(oe){yt(u,u.return,oe)}}r&&N&64&&C_(A),kc(A,A.return);break;case 27:y_(A);case 26:case 5:Yo(E,A,r),r&&u===null&&N&4&&O_(A),kc(A,A.return);break;case 12:Yo(E,A,r);break;case 13:Yo(E,A,r),r&&N&4&&H_(E,A);break;case 22:A.memoizedState===null&&Yo(E,A,r),kc(A,A.return);break;case 30:break;default:Yo(E,A,r)}i=i.sibling}}function Dm(n,i){var r=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(r=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==r&&(n!=null&&n.refCount++,r!=null&&Ic(r))}function ym(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Ic(n))}function Gi(n,i,r,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)P_(n,i,r,u),i=i.sibling}function P_(n,i,r,u){var E=i.flags;switch(i.tag){case 0:case 11:case 15:Gi(n,i,r,u),E&2048&&Hc(9,i);break;case 1:Gi(n,i,r,u);break;case 3:Gi(n,i,r,u),E&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Ic(n)));break;case 12:if(E&2048){Gi(n,i,r,u),n=i.stateNode;try{var A=i.memoizedProps,N=A.id,v=A.onPostCommit;typeof v=="function"&&v(N,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(F){yt(i,i.return,F)}}else Gi(n,i,r,u);break;case 13:Gi(n,i,r,u);break;case 23:break;case 22:A=i.stateNode,N=i.alternate,i.memoizedState!==null?A._visibility&2?Gi(n,i,r,u):Uc(n,i):A._visibility&2?Gi(n,i,r,u):(A._visibility|=2,or(n,i,r,u,(i.subtreeFlags&10256)!==0)),E&2048&&Dm(N,i);break;case 24:Gi(n,i,r,u),E&2048&&ym(i.alternate,i);break;default:Gi(n,i,r,u)}}function or(n,i,r,u,E){for(E=E&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var A=n,N=i,v=r,F=u,oe=N.flags;switch(N.tag){case 0:case 11:case 15:or(A,N,v,F,E),Hc(8,N);break;case 23:break;case 22:var Ae=N.stateNode;N.memoizedState!==null?Ae._visibility&2?or(A,N,v,F,E):Uc(A,N):(Ae._visibility|=2,or(A,N,v,F,E)),E&&oe&2048&&Dm(N.alternate,N);break;case 24:or(A,N,v,F,E),E&&oe&2048&&ym(N.alternate,N);break;default:or(A,N,v,F,E)}i=i.sibling}}function Uc(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var r=n,u=i,E=u.flags;switch(u.tag){case 22:Uc(r,u),E&2048&&Dm(u.alternate,u);break;case 24:Uc(r,u),E&2048&&ym(u.alternate,u);break;default:Uc(r,u)}i=i.sibling}}var Pc=8192;function lr(n){if(n.subtreeFlags&Pc)for(n=n.child;n!==null;)w_(n),n=n.sibling}function w_(n){switch(n.tag){case 26:lr(n),n.flags&Pc&&n.memoizedState!==null&&fM(_i,n.memoizedState,n.memoizedProps);break;case 5:lr(n);break;case 3:case 4:var i=_i;_i=Gd(n.stateNode.containerInfo),lr(n),_i=i;break;case 22:n.memoizedState===null&&(i=n.alternate,i!==null&&i.memoizedState!==null?(i=Pc,Pc=16777216,lr(n),Pc=i):lr(n));break;default:lr(n)}}function G_(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function wc(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var r=0;r<i.length;r++){var u=i[r];Hn=u,F_(u,n)}G_(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)B_(n),n=n.sibling}function B_(n){switch(n.tag){case 0:case 11:case 15:wc(n),n.flags&2048&&jo(9,n,n.return);break;case 3:wc(n);break;case 12:wc(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,Od(n)):wc(n);break;default:wc(n)}}function Od(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var r=0;r<i.length;r++){var u=i[r];Hn=u,F_(u,n)}G_(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:jo(8,i,i.return),Od(i);break;case 22:r=i.stateNode,r._visibility&2&&(r._visibility&=-3,Od(i));break;default:Od(i)}n=n.sibling}}function F_(n,i){for(;Hn!==null;){var r=Hn;switch(r.tag){case 0:case 11:case 15:jo(8,r,i);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var u=r.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Ic(r.memoizedState.cache)}if(u=r.child,u!==null)u.return=r,Hn=u;else e:for(r=n;Hn!==null;){u=Hn;var E=u.sibling,A=u.return;if(L_(u),u===r){Hn=null;break e}if(E!==null){E.return=A,Hn=E;break e}Hn=A}}}var yv={getCacheForType:function(n){var i=na(bn),r=i.data.get(n);return r===void 0&&(r=n(),i.data.set(n,r)),r}},vv=typeof WeakMap=="function"?WeakMap:Map,St=0,xt=null,tt=null,ct=0,It=0,wa=null,Ko=!1,sr=!1,vm=!1,So=0,Jt=0,Vo=0,Vl=0,Mm=0,ai=0,rr=0,Gc=null,Da=null,Lm=!1,xm=0,Dd=1/0,yd=null,Wo=null,Kn=0,Xo=null,cr=null,ur=0,Hm=0,km=null,j_=null,Bc=0,Um=null;function Ga(){if((St&2)!==0&&ct!==0)return ct&-ct;if(M.T!==null){var n=Qs;return n!==0?n:zm()}return iS()}function z_(){ai===0&&(ai=(ct&536870912)===0||At?wu():536870912);var n=ni.current;return n!==null&&(n.flags|=32),ai}function Ba(n,i,r){(n===xt&&(It===2||It===9)||n.cancelPendingCommit!==null)&&(dr(n,0),qo(n,ct,ai,!1)),vl(n,r),((St&2)===0||n!==xt)&&(n===xt&&((St&2)===0&&(Vl|=r),Jt===4&&qo(n,ct,ai,!1)),Bi(n))}function Y_(n,i,r){if((St&6)!==0)throw Error(o(327));var u=!r&&(i&124)===0&&(i&n.expiredLanes)===0||yl(n,i),E=u?xv(n,i):Gm(n,i,!0),A=u;do{if(E===0){sr&&!u&&qo(n,i,0,!1);break}else{if(r=n.current.alternate,A&&!Mv(r)){E=Gm(n,i,!1),A=!1;continue}if(E===2){if(A=i,n.errorRecoveryDisabledLanes&A)var N=0;else N=n.pendingLanes&-536870913,N=N!==0?N:N&536870912?536870912:0;if(N!==0){i=N;e:{var v=n;E=Gc;var F=v.current.memoizedState.isDehydrated;if(F&&(dr(v,N).flags|=256),N=Gm(v,N,!1),N!==2){if(vm&&!F){v.errorRecoveryDisabledLanes|=A,Vl|=A,E=4;break e}A=Da,Da=E,A!==null&&(Da===null?Da=A:Da.push.apply(Da,A))}E=N}if(A=!1,E!==2)continue}}if(E===1){dr(n,0),qo(n,i,0,!0);break}e:{switch(u=n,A=E,A){case 0:case 1:throw Error(o(345));case 4:if((i&4194048)!==i)break;case 6:qo(u,i,ai,!Ko);break e;case 2:Da=null;break;case 3:case 5:break;default:throw Error(o(329))}if((i&62914560)===i&&(E=xm+300-ve(),10<E)){if(qo(u,i,ai,!Ko),vs(u,0,!0)!==0)break e;u.timeoutHandle=Sg(K_.bind(null,u,r,Da,yd,Lm,i,ai,Vl,rr,Ko,A,2,-0,0),E);break e}K_(u,r,Da,yd,Lm,i,ai,Vl,rr,Ko,A,0,-0,0)}}break}while(!0);Bi(n)}function K_(n,i,r,u,E,A,N,v,F,oe,Ae,Te,le,re){if(n.timeoutHandle=-1,Te=i.subtreeFlags,(Te&8192||(Te&16785408)===16785408)&&(Wc={stylesheets:null,count:0,unsuspend:hM},w_(i),Te=EM(),Te!==null)){n.cancelPendingCommit=Te(J_.bind(null,n,i,A,r,u,E,N,v,F,Ae,1,le,re)),qo(n,A,N,!oe);return}J_(n,i,A,r,u,E,N,v,F)}function Mv(n){for(var i=n;;){var r=i.tag;if((r===0||r===11||r===15)&&i.flags&16384&&(r=i.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var u=0;u<r.length;u++){var E=r[u],A=E.getSnapshot;E=E.value;try{if(!Ha(A(),E))return!1}catch{return!1}}if(r=i.child,i.subtreeFlags&16384&&r!==null)r.return=i,i=r;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function qo(n,i,r,u){i&=~Mm,i&=~Vl,n.suspendedLanes|=i,n.pingedLanes&=~i,u&&(n.warmLanes|=i),u=n.expirationTimes;for(var E=i;0<E;){var A=31-wt(E),N=1<<A;u[A]=-1,E&=~N}r!==0&&Gu(n,r,i)}function vd(){return(St&6)===0?(Fc(0),!1):!0}function Pm(){if(tt!==null){if(It===0)var n=tt.return;else n=tt,uo=Bl=null,em(n),ar=null,Mc=0,n=tt;for(;n!==null;)N_(n.alternate,n),n=n.return;tt=null}}function dr(n,i){var r=n.timeoutHandle;r!==-1&&(n.timeoutHandle=-1,qv(r)),r=n.cancelPendingCommit,r!==null&&(n.cancelPendingCommit=null,r()),Pm(),xt=n,tt=r=so(n.current,null),ct=i,It=0,wa=null,Ko=!1,sr=yl(n,i),vm=!1,rr=ai=Mm=Vl=Vo=Jt=0,Da=Gc=null,Lm=!1,(i&8)!==0&&(i|=i&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=i;0<u;){var E=31-wt(u),A=1<<E;i|=n[E],u&=~A}return So=i,Ju(),r}function V_(n,i){qe=null,M.H=Rd,i===gc||i===sd?(i=cI(),It=3):i===lI?(i=cI(),It=4):It=i===u_?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,wa=i,tt===null&&(Jt=1,gd(n,Ja(i,n.current)))}function W_(){var n=M.H;return M.H=Rd,n===null?Rd:n}function X_(){var n=M.A;return M.A=yv,n}function wm(){Jt=4,Ko||(ct&4194048)!==ct&&ni.current!==null||(sr=!0),(Vo&134217727)===0&&(Vl&134217727)===0||xt===null||qo(xt,ct,ai,!1)}function Gm(n,i,r){var u=St;St|=2;var E=W_(),A=X_();(xt!==n||ct!==i)&&(yd=null,dr(n,i)),i=!1;var N=Jt;e:do try{if(It!==0&&tt!==null){var v=tt,F=wa;switch(It){case 8:Pm(),N=6;break e;case 3:case 2:case 9:case 6:ni.current===null&&(i=!0);var oe=It;if(It=0,wa=null,hr(n,v,F,oe),r&&sr){N=0;break e}break;default:oe=It,It=0,wa=null,hr(n,v,F,oe)}}Lv(),N=Jt;break}catch(Ae){V_(n,Ae)}while(!0);return i&&n.shellSuspendCounter++,uo=Bl=null,St=u,M.H=E,M.A=A,tt===null&&(xt=null,ct=0,Ju()),N}function Lv(){for(;tt!==null;)q_(tt)}function xv(n,i){var r=St;St|=2;var u=W_(),E=X_();xt!==n||ct!==i?(yd=null,Dd=ve()+500,dr(n,i)):sr=yl(n,i);e:do try{if(It!==0&&tt!==null){i=tt;var A=wa;t:switch(It){case 1:It=0,wa=null,hr(n,i,A,1);break;case 2:case 9:if(sI(A)){It=0,wa=null,Z_(i);break}i=function(){It!==2&&It!==9||xt!==n||(It=7),Bi(n)},A.then(i,i);break e;case 3:It=7;break e;case 4:It=5;break e;case 7:sI(A)?(It=0,wa=null,Z_(i)):(It=0,wa=null,hr(n,i,A,7));break;case 5:var N=null;switch(tt.tag){case 26:N=tt.memoizedState;case 5:case 27:var v=tt;if(!N||Mg(N)){It=0,wa=null;var F=v.sibling;if(F!==null)tt=F;else{var oe=v.return;oe!==null?(tt=oe,Md(oe)):tt=null}break t}}It=0,wa=null,hr(n,i,A,5);break;case 6:It=0,wa=null,hr(n,i,A,6);break;case 8:Pm(),Jt=6;break e;default:throw Error(o(462))}}Hv();break}catch(Ae){V_(n,Ae)}while(!0);return uo=Bl=null,M.H=u,M.A=E,St=r,tt!==null?0:(xt=null,ct=0,Ju(),Jt)}function Hv(){for(;tt!==null&&!_e();)q_(tt)}function q_(n){var i=g_(n.alternate,n,So);n.memoizedProps=n.pendingProps,i===null?Md(n):tt=i}function Z_(n){var i=n,r=i.alternate;switch(i.tag){case 15:case 0:i=A_(r,i,i.pendingProps,i.type,void 0,ct);break;case 11:i=A_(r,i,i.pendingProps,i.type.render,i.ref,ct);break;case 5:em(i);default:N_(r,i),i=tt=QS(i,So),i=g_(r,i,So)}n.memoizedProps=n.pendingProps,i===null?Md(n):tt=i}function hr(n,i,r,u){uo=Bl=null,em(i),ar=null,Mc=0;var E=i.return;try{if(pv(n,E,i,r,ct)){Jt=1,gd(n,Ja(r,n.current)),tt=null;return}}catch(A){if(E!==null)throw tt=E,A;Jt=1,gd(n,Ja(r,n.current)),tt=null;return}i.flags&32768?(At||u===1?n=!0:sr||(ct&536870912)!==0?n=!1:(Ko=n=!0,(u===2||u===9||u===3||u===6)&&(u=ni.current,u!==null&&u.tag===13&&(u.flags|=16384))),Q_(i,n)):Md(i)}function Md(n){var i=n;do{if((i.flags&32768)!==0){Q_(i,Ko);return}n=i.return;var r=Cv(i.alternate,i,So);if(r!==null){tt=r;return}if(i=i.sibling,i!==null){tt=i;return}tt=i=n}while(i!==null);Jt===0&&(Jt=5)}function Q_(n,i){do{var r=bv(n.alternate,n);if(r!==null){r.flags&=32767,tt=r;return}if(r=n.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!i&&(n=n.sibling,n!==null)){tt=n;return}tt=n=r}while(n!==null);Jt=6,tt=null}function J_(n,i,r,u,E,A,N,v,F){n.cancelPendingCommit=null;do Ld();while(Kn!==0);if((St&6)!==0)throw Error(o(327));if(i!==null){if(i===n.current)throw Error(o(177));if(A=i.lanes|i.childLanes,A|=yE,nE(n,r,A,N,v,F),n===xt&&(tt=xt=null,ct=0),cr=i,Xo=n,ur=r,Hm=A,km=E,j_=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,wv(pa,function(){return ag(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=M.T,M.T=null,E=K.p,K.p=2,N=St,St|=4;try{Ov(n,i,r)}finally{St=N,K.p=E,M.T=u}}Kn=1,$_(),eg(),tg()}}function $_(){if(Kn===1){Kn=0;var n=Xo,i=cr,r=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||r){r=M.T,M.T=null;var u=K.p;K.p=2;var E=St;St|=4;try{k_(i,n);var A=Qm,N=FS(n.containerInfo),v=A.focusedElem,F=A.selectionRange;if(N!==v&&v&&v.ownerDocument&&BS(v.ownerDocument.documentElement,v)){if(F!==null&&NE(v)){var oe=F.start,Ae=F.end;if(Ae===void 0&&(Ae=oe),"selectionStart"in v)v.selectionStart=oe,v.selectionEnd=Math.min(Ae,v.value.length);else{var Te=v.ownerDocument||document,le=Te&&Te.defaultView||window;if(le.getSelection){var re=le.getSelection(),Ge=v.textContent.length,ke=Math.min(F.start,Ge),Ct=F.end===void 0?ke:Math.min(F.end,Ge);!re.extend&&ke>Ct&&(N=Ct,Ct=ke,ke=N);var J=GS(v,ke),V=GS(v,Ct);if(J&&V&&(re.rangeCount!==1||re.anchorNode!==J.node||re.anchorOffset!==J.offset||re.focusNode!==V.node||re.focusOffset!==V.offset)){var ne=Te.createRange();ne.setStart(J.node,J.offset),re.removeAllRanges(),ke>Ct?(re.addRange(ne),re.extend(V.node,V.offset)):(ne.setEnd(V.node,V.offset),re.addRange(ne))}}}}for(Te=[],re=v;re=re.parentNode;)re.nodeType===1&&Te.push({element:re,left:re.scrollLeft,top:re.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<Te.length;v++){var Re=Te[v];Re.element.scrollLeft=Re.left,Re.element.scrollTop=Re.top}}Yd=!!Zm,Qm=Zm=null}finally{St=E,K.p=u,M.T=r}}n.current=i,Kn=2}}function eg(){if(Kn===2){Kn=0;var n=Xo,i=cr,r=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||r){r=M.T,M.T=null;var u=K.p;K.p=2;var E=St;St|=4;try{M_(n,i.alternate,i)}finally{St=E,K.p=u,M.T=r}}Kn=3}}function tg(){if(Kn===4||Kn===3){Kn=0,ge();var n=Xo,i=cr,r=ur,u=j_;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Kn=5:(Kn=0,cr=Xo=null,ng(n,n.pendingLanes));var E=n.pendingLanes;if(E===0&&(Wo=null),aE(r),i=i.stateNode,rt&&typeof rt.onCommitFiberRoot=="function")try{rt.onCommitFiberRoot(Lo,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=M.T,E=K.p,K.p=2,M.T=null;try{for(var A=n.onRecoverableError,N=0;N<u.length;N++){var v=u[N];A(v.value,{componentStack:v.stack})}}finally{M.T=i,K.p=E}}(ur&3)!==0&&Ld(),Bi(n),E=n.pendingLanes,(r&4194090)!==0&&(E&42)!==0?n===Um?Bc++:(Bc=0,Um=n):Bc=0,Fc(0)}}function ng(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,Ic(i)))}function Ld(n){return $_(),eg(),tg(),ag()}function ag(){if(Kn!==5)return!1;var n=Xo,i=Hm;Hm=0;var r=aE(ur),u=M.T,E=K.p;try{K.p=32>r?32:r,M.T=null,r=km,km=null;var A=Xo,N=ur;if(Kn=0,cr=Xo=null,ur=0,(St&6)!==0)throw Error(o(331));var v=St;if(St|=4,B_(A.current),P_(A,A.current,N,r),St=v,Fc(0,!1),rt&&typeof rt.onPostCommitFiberRoot=="function")try{rt.onPostCommitFiberRoot(Lo,A)}catch{}return!0}finally{K.p=E,M.T=u,ng(n,i)}}function ig(n,i,r){i=Ja(r,i),i=Em(n.stateNode,i,2),n=wo(n,i,2),n!==null&&(vl(n,2),Bi(n))}function yt(n,i,r){if(n.tag===3)ig(n,n,r);else for(;i!==null;){if(i.tag===3){ig(i,n,r);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Wo===null||!Wo.has(u))){n=Ja(r,n),r=r_(2),u=wo(i,r,2),u!==null&&(c_(r,u,i,n),vl(u,2),Bi(u));break}}i=i.return}}function Bm(n,i,r){var u=n.pingCache;if(u===null){u=n.pingCache=new vv;var E=new Set;u.set(i,E)}else E=u.get(i),E===void 0&&(E=new Set,u.set(i,E));E.has(r)||(vm=!0,E.add(r),n=kv.bind(null,n,i,r),i.then(n,n))}function kv(n,i,r){var u=n.pingCache;u!==null&&u.delete(i),n.pingedLanes|=n.suspendedLanes&r,n.warmLanes&=~r,xt===n&&(ct&r)===r&&(Jt===4||Jt===3&&(ct&62914560)===ct&&300>ve()-xm?(St&2)===0&&dr(n,0):Mm|=r,rr===ct&&(rr=0)),Bi(n)}function og(n,i){i===0&&(i=Ms()),n=Ws(n,i),n!==null&&(vl(n,i),Bi(n))}function Uv(n){var i=n.memoizedState,r=0;i!==null&&(r=i.retryLane),og(n,r)}function Pv(n,i){var r=0;switch(n.tag){case 13:var u=n.stateNode,E=n.memoizedState;E!==null&&(r=E.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(o(314))}u!==null&&u.delete(i),og(n,r)}function wv(n,i){return me(n,i)}var xd=null,fr=null,Fm=!1,Hd=!1,jm=!1,Wl=0;function Bi(n){n!==fr&&n.next===null&&(fr===null?xd=fr=n:fr=fr.next=n),Hd=!0,Fm||(Fm=!0,Bv())}function Fc(n,i){if(!jm&&Hd){jm=!0;do for(var r=!1,u=xd;u!==null;){if(n!==0){var E=u.pendingLanes;if(E===0)var A=0;else{var N=u.suspendedLanes,v=u.pingedLanes;A=(1<<31-wt(42|n)+1)-1,A&=E&~(N&~v),A=A&201326741?A&201326741|1:A?A|2:0}A!==0&&(r=!0,cg(u,A))}else A=ct,A=vs(u,u===xt?A:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(A&3)===0||yl(u,A)||(r=!0,cg(u,A));u=u.next}while(r);jm=!1}}function Gv(){lg()}function lg(){Hd=Fm=!1;var n=0;Wl!==0&&(Xv()&&(n=Wl),Wl=0);for(var i=ve(),r=null,u=xd;u!==null;){var E=u.next,A=sg(u,i);A===0?(u.next=null,r===null?xd=E:r.next=E,E===null&&(fr=r)):(r=u,(n!==0||(A&3)!==0)&&(Hd=!0)),u=E}Fc(n)}function sg(n,i){for(var r=n.suspendedLanes,u=n.pingedLanes,E=n.expirationTimes,A=n.pendingLanes&-62914561;0<A;){var N=31-wt(A),v=1<<N,F=E[N];F===-1?((v&r)===0||(v&u)!==0)&&(E[N]=tE(v,i)):F<=i&&(n.expiredLanes|=v),A&=~v}if(i=xt,r=ct,r=vs(n,n===i?r:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,r===0||n===i&&(It===2||It===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&De(u),n.callbackNode=null,n.callbackPriority=0;if((r&3)===0||yl(n,r)){if(i=r&-r,i===n.callbackPriority)return i;switch(u!==null&&De(u),aE(r)){case 2:case 8:r=Si;break;case 32:r=pa;break;case 268435456:r=io;break;default:r=pa}return u=rg.bind(null,n),r=me(r,u),n.callbackPriority=i,n.callbackNode=r,i}return u!==null&&u!==null&&De(u),n.callbackPriority=2,n.callbackNode=null,2}function rg(n,i){if(Kn!==0&&Kn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var r=n.callbackNode;if(Ld()&&n.callbackNode!==r)return null;var u=ct;return u=vs(n,n===xt?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(Y_(n,u,i),sg(n,ve()),n.callbackNode!=null&&n.callbackNode===r?rg.bind(null,n):null)}function cg(n,i){if(Ld())return null;Y_(n,i,!0)}function Bv(){Zv(function(){(St&6)!==0?me(Sn,Gv):lg()})}function zm(){return Wl===0&&(Wl=wu()),Wl}function ug(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Ku(""+n)}function dg(n,i){var r=i.ownerDocument.createElement("input");return r.name=i.name,r.value=i.value,n.id&&r.setAttribute("form",n.id),i.parentNode.insertBefore(r,i),n=new FormData(n),r.parentNode.removeChild(r),n}function Fv(n,i,r,u,E){if(i==="submit"&&r&&r.stateNode===E){var A=ug((E[Na]||null).action),N=u.submitter;N&&(i=(i=N[Na]||null)?ug(i.formAction):N.getAttribute("formAction"),i!==null&&(A=i,N=null));var v=new qu("action","action",null,u,E);n.push({event:v,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Wl!==0){var F=N?dg(E,N):new FormData(E);cm(r,{pending:!0,data:F,method:E.method,action:A},null,F)}}else typeof A=="function"&&(v.preventDefault(),F=N?dg(E,N):new FormData(E),cm(r,{pending:!0,data:F,method:E.method,action:A},A,F))},currentTarget:E}]})}}for(var Ym=0;Ym<DE.length;Ym++){var Km=DE[Ym],jv=Km.toLowerCase(),zv=Km[0].toUpperCase()+Km.slice(1);Ii(jv,"on"+zv)}Ii(YS,"onAnimationEnd"),Ii(KS,"onAnimationIteration"),Ii(VS,"onAnimationStart"),Ii("dblclick","onDoubleClick"),Ii("focusin","onFocus"),Ii("focusout","onBlur"),Ii(lv,"onTransitionRun"),Ii(sv,"onTransitionStart"),Ii(rv,"onTransitionCancel"),Ii(WS,"onTransitionEnd"),Ps("onMouseEnter",["mouseout","mouseover"]),Ps("onMouseLeave",["mouseout","mouseover"]),Ps("onPointerEnter",["pointerout","pointerover"]),Ps("onPointerLeave",["pointerout","pointerover"]),Ml("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ml("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ml("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ml("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ml("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ml("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yv=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(jc));function hg(n,i){i=(i&4)!==0;for(var r=0;r<n.length;r++){var u=n[r],E=u.event;u=u.listeners;e:{var A=void 0;if(i)for(var N=u.length-1;0<=N;N--){var v=u[N],F=v.instance,oe=v.currentTarget;if(v=v.listener,F!==A&&E.isPropagationStopped())break e;A=v,E.currentTarget=oe;try{A(E)}catch(Ae){_d(Ae)}E.currentTarget=null,A=F}else for(N=0;N<u.length;N++){if(v=u[N],F=v.instance,oe=v.currentTarget,v=v.listener,F!==A&&E.isPropagationStopped())break e;A=v,E.currentTarget=oe;try{A(E)}catch(Ae){_d(Ae)}E.currentTarget=null,A=F}}}}function nt(n,i){var r=i[iE];r===void 0&&(r=i[iE]=new Set);var u=n+"__bubble";r.has(u)||(fg(i,n,2,!1),r.add(u))}function Vm(n,i,r){var u=0;i&&(u|=4),fg(r,n,u,i)}var kd="_reactListening"+Math.random().toString(36).slice(2);function Wm(n){if(!n[kd]){n[kd]=!0,lS.forEach(function(r){r!=="selectionchange"&&(Yv.has(r)||Vm(r,!1,n),Vm(r,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[kd]||(i[kd]=!0,Vm("selectionchange",!1,i))}}function fg(n,i,r,u){switch(Pg(i)){case 2:var E=RM;break;case 8:E=TM;break;default:E=sA}r=E.bind(null,i,r,n),E=void 0,!mE||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(E=!0),u?E!==void 0?n.addEventListener(i,r,{capture:!0,passive:E}):n.addEventListener(i,r,!0):E!==void 0?n.addEventListener(i,r,{passive:E}):n.addEventListener(i,r,!1)}function Xm(n,i,r,u,E){var A=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var N=u.tag;if(N===3||N===4){var v=u.stateNode.containerInfo;if(v===E)break;if(N===4)for(N=u.return;N!==null;){var F=N.tag;if((F===3||F===4)&&N.stateNode.containerInfo===E)return;N=N.return}for(;v!==null;){if(N=Hs(v),N===null)return;if(F=N.tag,F===5||F===6||F===26||F===27){u=A=N;continue e}v=v.parentNode}}u=u.return}IS(function(){var oe=A,Ae=fE(r),Te=[];e:{var le=XS.get(n);if(le!==void 0){var re=qu,Ge=n;switch(n){case"keypress":if(Wu(r)===0)break e;case"keydown":case"keyup":re=wy;break;case"focusin":Ge="focus",re=SE;break;case"focusout":Ge="blur",re=SE;break;case"beforeblur":case"afterblur":re=SE;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=pS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=by;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=Fy;break;case YS:case KS:case VS:re=yy;break;case WS:re=zy;break;case"scroll":case"scrollend":re=Ny;break;case"wheel":re=Ky;break;case"copy":case"cut":case"paste":re=My;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=CS;break;case"toggle":case"beforetoggle":re=Wy}var ke=(i&4)!==0,Ct=!ke&&(n==="scroll"||n==="scrollend"),J=ke?le!==null?le+"Capture":null:le;ke=[];for(var V=oe,ne;V!==null;){var Re=V;if(ne=Re.stateNode,Re=Re.tag,Re!==5&&Re!==26&&Re!==27||ne===null||J===null||(Re=sc(V,J),Re!=null&&ke.push(zc(V,Re,ne))),Ct)break;V=V.return}0<ke.length&&(le=new re(le,Ge,null,r,Ae),Te.push({event:le,listeners:ke}))}}if((i&7)===0){e:{if(le=n==="mouseover"||n==="pointerover",re=n==="mouseout"||n==="pointerout",le&&r!==hE&&(Ge=r.relatedTarget||r.fromElement)&&(Hs(Ge)||Ge[xs]))break e;if((re||le)&&(le=Ae.window===Ae?Ae:(le=Ae.ownerDocument)?le.defaultView||le.parentWindow:window,re?(Ge=r.relatedTarget||r.toElement,re=oe,Ge=Ge?Hs(Ge):null,Ge!==null&&(Ct=c(Ge),ke=Ge.tag,Ge!==Ct||ke!==5&&ke!==27&&ke!==6)&&(Ge=null)):(re=null,Ge=oe),re!==Ge)){if(ke=pS,Re="onMouseLeave",J="onMouseEnter",V="mouse",(n==="pointerout"||n==="pointerover")&&(ke=CS,Re="onPointerLeave",J="onPointerEnter",V="pointer"),Ct=re==null?le:lc(re),ne=Ge==null?le:lc(Ge),le=new ke(Re,V+"leave",re,r,Ae),le.target=Ct,le.relatedTarget=ne,Re=null,Hs(Ae)===oe&&(ke=new ke(J,V+"enter",Ge,r,Ae),ke.target=ne,ke.relatedTarget=Ct,Re=ke),Ct=Re,re&&Ge)t:{for(ke=re,J=Ge,V=0,ne=ke;ne;ne=Er(ne))V++;for(ne=0,Re=J;Re;Re=Er(Re))ne++;for(;0<V-ne;)ke=Er(ke),V--;for(;0<ne-V;)J=Er(J),ne--;for(;V--;){if(ke===J||J!==null&&ke===J.alternate)break t;ke=Er(ke),J=Er(J)}ke=null}else ke=null;re!==null&&Eg(Te,le,re,ke,!1),Ge!==null&&Ct!==null&&Eg(Te,Ct,Ge,ke,!0)}}e:{if(le=oe?lc(oe):window,re=le.nodeName&&le.nodeName.toLowerCase(),re==="select"||re==="input"&&le.type==="file")var be=xS;else if(MS(le))if(HS)be=av;else{be=tv;var Qe=ev}else re=le.nodeName,!re||re.toLowerCase()!=="input"||le.type!=="checkbox"&&le.type!=="radio"?oe&&dE(oe.elementType)&&(be=xS):be=nv;if(be&&(be=be(n,oe))){LS(Te,be,r,Ae);break e}Qe&&Qe(n,le,oe),n==="focusout"&&oe&&le.type==="number"&&oe.memoizedProps.value!=null&&uE(le,"number",le.value)}switch(Qe=oe?lc(oe):window,n){case"focusin":(MS(Qe)||Qe.contentEditable==="true")&&(Ys=Qe,CE=oe,mc=null);break;case"focusout":mc=CE=Ys=null;break;case"mousedown":bE=!0;break;case"contextmenu":case"mouseup":case"dragend":bE=!1,jS(Te,r,Ae);break;case"selectionchange":if(ov)break;case"keydown":case"keyup":jS(Te,r,Ae)}var Le;if(_E)e:{switch(n){case"compositionstart":var Pe="onCompositionStart";break e;case"compositionend":Pe="onCompositionEnd";break e;case"compositionupdate":Pe="onCompositionUpdate";break e}Pe=void 0}else zs?yS(n,r)&&(Pe="onCompositionEnd"):n==="keydown"&&r.keyCode===229&&(Pe="onCompositionStart");Pe&&(bS&&r.locale!=="ko"&&(zs||Pe!=="onCompositionStart"?Pe==="onCompositionEnd"&&zs&&(Le=_S()):(Ho=Ae,AE="value"in Ho?Ho.value:Ho.textContent,zs=!0)),Qe=Ud(oe,Pe),0<Qe.length&&(Pe=new NS(Pe,n,null,r,Ae),Te.push({event:Pe,listeners:Qe}),Le?Pe.data=Le:(Le=vS(r),Le!==null&&(Pe.data=Le)))),(Le=qy?Zy(n,r):Qy(n,r))&&(Pe=Ud(oe,"onBeforeInput"),0<Pe.length&&(Qe=new NS("onBeforeInput","beforeinput",null,r,Ae),Te.push({event:Qe,listeners:Pe}),Qe.data=Le)),Fv(Te,n,oe,r,Ae)}hg(Te,i)})}function zc(n,i,r){return{instance:n,listener:i,currentTarget:r}}function Ud(n,i){for(var r=i+"Capture",u=[];n!==null;){var E=n,A=E.stateNode;if(E=E.tag,E!==5&&E!==26&&E!==27||A===null||(E=sc(n,r),E!=null&&u.unshift(zc(n,E,A)),E=sc(n,i),E!=null&&u.push(zc(n,E,A))),n.tag===3)return u;n=n.return}return[]}function Er(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Eg(n,i,r,u,E){for(var A=i._reactName,N=[];r!==null&&r!==u;){var v=r,F=v.alternate,oe=v.stateNode;if(v=v.tag,F!==null&&F===u)break;v!==5&&v!==26&&v!==27||oe===null||(F=oe,E?(oe=sc(r,A),oe!=null&&N.unshift(zc(r,oe,F))):E||(oe=sc(r,A),oe!=null&&N.push(zc(r,oe,F)))),r=r.return}N.length!==0&&n.push({event:i,listeners:N})}var Kv=/\r\n?/g,Vv=/\u0000|\uFFFD/g;function mg(n){return(typeof n=="string"?n:""+n).replace(Kv,`
`).replace(Vv,"")}function Ag(n,i){return i=mg(i),mg(n)===i}function Pd(){}function Nt(n,i,r,u,E,A){switch(r){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||Bs(n,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&Bs(n,""+u);break;case"className":ju(n,"class",u);break;case"tabIndex":ju(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":ju(n,r,u);break;case"style":TS(n,u,A);break;case"data":if(i!=="object"){ju(n,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||r!=="href")){n.removeAttribute(r);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(r);break}u=Ku(""+u),n.setAttribute(r,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof A=="function"&&(r==="formAction"?(i!=="input"&&Nt(n,i,"name",E.name,E,null),Nt(n,i,"formEncType",E.formEncType,E,null),Nt(n,i,"formMethod",E.formMethod,E,null),Nt(n,i,"formTarget",E.formTarget,E,null)):(Nt(n,i,"encType",E.encType,E,null),Nt(n,i,"method",E.method,E,null),Nt(n,i,"target",E.target,E,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(r);break}u=Ku(""+u),n.setAttribute(r,u);break;case"onClick":u!=null&&(n.onclick=Pd);break;case"onScroll":u!=null&&nt("scroll",n);break;case"onScrollEnd":u!=null&&nt("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(o(61));if(r=u.__html,r!=null){if(E.children!=null)throw Error(o(60));n.innerHTML=r}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}r=Ku(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(r,""+u):n.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(r,""):n.removeAttribute(r);break;case"capture":case"download":u===!0?n.setAttribute(r,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(r,u):n.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(r,u):n.removeAttribute(r);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(r):n.setAttribute(r,u);break;case"popover":nt("beforetoggle",n),nt("toggle",n),Fu(n,"popover",u);break;case"xlinkActuate":oo(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":oo(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":oo(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":oo(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":oo(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":oo(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":oo(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":oo(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":oo(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Fu(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=gy.get(r)||r,Fu(n,r,u))}}function qm(n,i,r,u,E,A){switch(r){case"style":TS(n,u,A);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(o(61));if(r=u.__html,r!=null){if(E.children!=null)throw Error(o(60));n.innerHTML=r}}break;case"children":typeof u=="string"?Bs(n,u):(typeof u=="number"||typeof u=="bigint")&&Bs(n,""+u);break;case"onScroll":u!=null&&nt("scroll",n);break;case"onScrollEnd":u!=null&&nt("scrollend",n);break;case"onClick":u!=null&&(n.onclick=Pd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!sS.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(E=r.endsWith("Capture"),i=r.slice(2,E?r.length-7:void 0),A=n[Na]||null,A=A!=null?A[r]:null,typeof A=="function"&&n.removeEventListener(i,A,E),typeof u=="function")){typeof A!="function"&&A!==null&&(r in n?n[r]=null:n.hasAttribute(r)&&n.removeAttribute(r)),n.addEventListener(i,u,E);break e}r in n?n[r]=u:u===!0?n.setAttribute(r,""):Fu(n,r,u)}}}function Vn(n,i,r){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":nt("error",n),nt("load",n);var u=!1,E=!1,A;for(A in r)if(r.hasOwnProperty(A)){var N=r[A];if(N!=null)switch(A){case"src":u=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,i));default:Nt(n,i,A,N,r,null)}}E&&Nt(n,i,"srcSet",r.srcSet,r,null),u&&Nt(n,i,"src",r.src,r,null);return;case"input":nt("invalid",n);var v=A=N=E=null,F=null,oe=null;for(u in r)if(r.hasOwnProperty(u)){var Ae=r[u];if(Ae!=null)switch(u){case"name":E=Ae;break;case"type":N=Ae;break;case"checked":F=Ae;break;case"defaultChecked":oe=Ae;break;case"value":A=Ae;break;case"defaultValue":v=Ae;break;case"children":case"dangerouslySetInnerHTML":if(Ae!=null)throw Error(o(137,i));break;default:Nt(n,i,u,Ae,r,null)}}ES(n,A,v,F,oe,N,E,!1),zu(n);return;case"select":nt("invalid",n),u=N=A=null;for(E in r)if(r.hasOwnProperty(E)&&(v=r[E],v!=null))switch(E){case"value":A=v;break;case"defaultValue":N=v;break;case"multiple":u=v;default:Nt(n,i,E,v,r,null)}i=A,r=N,n.multiple=!!u,i!=null?Gs(n,!!u,i,!1):r!=null&&Gs(n,!!u,r,!0);return;case"textarea":nt("invalid",n),A=E=u=null;for(N in r)if(r.hasOwnProperty(N)&&(v=r[N],v!=null))switch(N){case"value":u=v;break;case"defaultValue":E=v;break;case"children":A=v;break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(o(91));break;default:Nt(n,i,N,v,r,null)}AS(n,u,E,A),zu(n);return;case"option":for(F in r)if(r.hasOwnProperty(F)&&(u=r[F],u!=null))switch(F){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Nt(n,i,F,u,r,null)}return;case"dialog":nt("beforetoggle",n),nt("toggle",n),nt("cancel",n),nt("close",n);break;case"iframe":case"object":nt("load",n);break;case"video":case"audio":for(u=0;u<jc.length;u++)nt(jc[u],n);break;case"image":nt("error",n),nt("load",n);break;case"details":nt("toggle",n);break;case"embed":case"source":case"link":nt("error",n),nt("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(oe in r)if(r.hasOwnProperty(oe)&&(u=r[oe],u!=null))switch(oe){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,i));default:Nt(n,i,oe,u,r,null)}return;default:if(dE(i)){for(Ae in r)r.hasOwnProperty(Ae)&&(u=r[Ae],u!==void 0&&qm(n,i,Ae,u,r,void 0));return}}for(v in r)r.hasOwnProperty(v)&&(u=r[v],u!=null&&Nt(n,i,v,u,r,null))}function Wv(n,i,r,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,A=null,N=null,v=null,F=null,oe=null,Ae=null;for(re in r){var Te=r[re];if(r.hasOwnProperty(re)&&Te!=null)switch(re){case"checked":break;case"value":break;case"defaultValue":F=Te;default:u.hasOwnProperty(re)||Nt(n,i,re,null,u,Te)}}for(var le in u){var re=u[le];if(Te=r[le],u.hasOwnProperty(le)&&(re!=null||Te!=null))switch(le){case"type":A=re;break;case"name":E=re;break;case"checked":oe=re;break;case"defaultChecked":Ae=re;break;case"value":N=re;break;case"defaultValue":v=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(o(137,i));break;default:re!==Te&&Nt(n,i,le,re,u,Te)}}cE(n,N,v,F,oe,Ae,A,E);return;case"select":re=N=v=le=null;for(A in r)if(F=r[A],r.hasOwnProperty(A)&&F!=null)switch(A){case"value":break;case"multiple":re=F;default:u.hasOwnProperty(A)||Nt(n,i,A,null,u,F)}for(E in u)if(A=u[E],F=r[E],u.hasOwnProperty(E)&&(A!=null||F!=null))switch(E){case"value":le=A;break;case"defaultValue":v=A;break;case"multiple":N=A;default:A!==F&&Nt(n,i,E,A,u,F)}i=v,r=N,u=re,le!=null?Gs(n,!!r,le,!1):!!u!=!!r&&(i!=null?Gs(n,!!r,i,!0):Gs(n,!!r,r?[]:"",!1));return;case"textarea":re=le=null;for(v in r)if(E=r[v],r.hasOwnProperty(v)&&E!=null&&!u.hasOwnProperty(v))switch(v){case"value":break;case"children":break;default:Nt(n,i,v,null,u,E)}for(N in u)if(E=u[N],A=r[N],u.hasOwnProperty(N)&&(E!=null||A!=null))switch(N){case"value":le=E;break;case"defaultValue":re=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(o(91));break;default:E!==A&&Nt(n,i,N,E,u,A)}mS(n,le,re);return;case"option":for(var Ge in r)if(le=r[Ge],r.hasOwnProperty(Ge)&&le!=null&&!u.hasOwnProperty(Ge))switch(Ge){case"selected":n.selected=!1;break;default:Nt(n,i,Ge,null,u,le)}for(F in u)if(le=u[F],re=r[F],u.hasOwnProperty(F)&&le!==re&&(le!=null||re!=null))switch(F){case"selected":n.selected=le&&typeof le!="function"&&typeof le!="symbol";break;default:Nt(n,i,F,le,u,re)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ke in r)le=r[ke],r.hasOwnProperty(ke)&&le!=null&&!u.hasOwnProperty(ke)&&Nt(n,i,ke,null,u,le);for(oe in u)if(le=u[oe],re=r[oe],u.hasOwnProperty(oe)&&le!==re&&(le!=null||re!=null))switch(oe){case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(o(137,i));break;default:Nt(n,i,oe,le,u,re)}return;default:if(dE(i)){for(var Ct in r)le=r[Ct],r.hasOwnProperty(Ct)&&le!==void 0&&!u.hasOwnProperty(Ct)&&qm(n,i,Ct,void 0,u,le);for(Ae in u)le=u[Ae],re=r[Ae],!u.hasOwnProperty(Ae)||le===re||le===void 0&&re===void 0||qm(n,i,Ae,le,u,re);return}}for(var J in r)le=r[J],r.hasOwnProperty(J)&&le!=null&&!u.hasOwnProperty(J)&&Nt(n,i,J,null,u,le);for(Te in u)le=u[Te],re=r[Te],!u.hasOwnProperty(Te)||le===re||le==null&&re==null||Nt(n,i,Te,le,u,re)}var Zm=null,Qm=null;function wd(n){return n.nodeType===9?n:n.ownerDocument}function Rg(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Tg(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function Jm(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var $m=null;function Xv(){var n=window.event;return n&&n.type==="popstate"?n===$m?!1:($m=n,!0):($m=null,!1)}var Sg=typeof setTimeout=="function"?setTimeout:void 0,qv=typeof clearTimeout=="function"?clearTimeout:void 0,Ig=typeof Promise=="function"?Promise:void 0,Zv=typeof queueMicrotask=="function"?queueMicrotask:typeof Ig<"u"?function(n){return Ig.resolve(null).then(n).catch(Qv)}:Sg;function Qv(n){setTimeout(function(){throw n})}function Zo(n){return n==="head"}function _g(n,i){var r=i,u=0,E=0;do{var A=r.nextSibling;if(n.removeChild(r),A&&A.nodeType===8)if(r=A.data,r==="/$"){if(0<u&&8>u){r=u;var N=n.ownerDocument;if(r&1&&Yc(N.documentElement),r&2&&Yc(N.body),r&4)for(r=N.head,Yc(r),N=r.firstChild;N;){var v=N.nextSibling,F=N.nodeName;N[oc]||F==="SCRIPT"||F==="STYLE"||F==="LINK"&&N.rel.toLowerCase()==="stylesheet"||r.removeChild(N),N=v}}if(E===0){n.removeChild(A),Jc(i);return}E--}else r==="$"||r==="$?"||r==="$!"?E++:u=r.charCodeAt(0)-48;else u=0;r=A}while(r);Jc(i)}function eA(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var r=i;switch(i=i.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":eA(r),oE(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}n.removeChild(r)}}function Jv(n,i,r,u){for(;n.nodeType===1;){var E=r;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[oc])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(A=n.getAttribute("rel"),A==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(A!==E.rel||n.getAttribute("href")!==(E.href==null||E.href===""?null:E.href)||n.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||n.getAttribute("title")!==(E.title==null?null:E.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(A=n.getAttribute("src"),(A!==(E.src==null?null:E.src)||n.getAttribute("type")!==(E.type==null?null:E.type)||n.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&A&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var A=E.name==null?null:""+E.name;if(E.type==="hidden"&&n.getAttribute("name")===A)return n}else return n;if(n=gi(n.nextSibling),n===null)break}return null}function $v(n,i,r){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!r||(n=gi(n.nextSibling),n===null))return null;return n}function tA(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function eM(n,i){var r=n.ownerDocument;if(n.data!=="$?"||r.readyState==="complete")i();else{var u=function(){i(),r.removeEventListener("DOMContentLoaded",u)};r.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function gi(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return n}var nA=null;function gg(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var r=n.data;if(r==="$"||r==="$!"||r==="$?"){if(i===0)return n;i--}else r==="/$"&&i++}n=n.previousSibling}return null}function pg(n,i,r){switch(i=wd(r),n){case"html":if(n=i.documentElement,!n)throw Error(o(452));return n;case"head":if(n=i.head,!n)throw Error(o(453));return n;case"body":if(n=i.body,!n)throw Error(o(454));return n;default:throw Error(o(451))}}function Yc(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);oE(n)}var ii=new Map,Ng=new Set;function Gd(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Io=K.d;K.d={f:tM,r:nM,D:aM,C:iM,L:oM,m:lM,X:rM,S:sM,M:cM};function tM(){var n=Io.f(),i=vd();return n||i}function nM(n){var i=ks(n);i!==null&&i.tag===5&&i.type==="form"?YI(i):Io.r(n)}var mr=typeof document>"u"?null:document;function Cg(n,i,r){var u=mr;if(u&&typeof i=="string"&&i){var E=Qa(i);E='link[rel="'+n+'"][href="'+E+'"]',typeof r=="string"&&(E+='[crossorigin="'+r+'"]'),Ng.has(E)||(Ng.add(E),n={rel:n,crossOrigin:r,href:i},u.querySelector(E)===null&&(i=u.createElement("link"),Vn(i,"link",n),Ln(i),u.head.appendChild(i)))}}function aM(n){Io.D(n),Cg("dns-prefetch",n,null)}function iM(n,i){Io.C(n,i),Cg("preconnect",n,i)}function oM(n,i,r){Io.L(n,i,r);var u=mr;if(u&&n&&i){var E='link[rel="preload"][as="'+Qa(i)+'"]';i==="image"&&r&&r.imageSrcSet?(E+='[imagesrcset="'+Qa(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(E+='[imagesizes="'+Qa(r.imageSizes)+'"]')):E+='[href="'+Qa(n)+'"]';var A=E;switch(i){case"style":A=Ar(n);break;case"script":A=Rr(n)}ii.has(A)||(n=R({rel:"preload",href:i==="image"&&r&&r.imageSrcSet?void 0:n,as:i},r),ii.set(A,n),u.querySelector(E)!==null||i==="style"&&u.querySelector(Kc(A))||i==="script"&&u.querySelector(Vc(A))||(i=u.createElement("link"),Vn(i,"link",n),Ln(i),u.head.appendChild(i)))}}function lM(n,i){Io.m(n,i);var r=mr;if(r&&n){var u=i&&typeof i.as=="string"?i.as:"script",E='link[rel="modulepreload"][as="'+Qa(u)+'"][href="'+Qa(n)+'"]',A=E;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":A=Rr(n)}if(!ii.has(A)&&(n=R({rel:"modulepreload",href:n},i),ii.set(A,n),r.querySelector(E)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Vc(A)))return}u=r.createElement("link"),Vn(u,"link",n),Ln(u),r.head.appendChild(u)}}}function sM(n,i,r){Io.S(n,i,r);var u=mr;if(u&&n){var E=Us(u).hoistableStyles,A=Ar(n);i=i||"default";var N=E.get(A);if(!N){var v={loading:0,preload:null};if(N=u.querySelector(Kc(A)))v.loading=5;else{n=R({rel:"stylesheet",href:n,"data-precedence":i},r),(r=ii.get(A))&&aA(n,r);var F=N=u.createElement("link");Ln(F),Vn(F,"link",n),F._p=new Promise(function(oe,Ae){F.onload=oe,F.onerror=Ae}),F.addEventListener("load",function(){v.loading|=1}),F.addEventListener("error",function(){v.loading|=2}),v.loading|=4,Bd(N,i,u)}N={type:"stylesheet",instance:N,count:1,state:v},E.set(A,N)}}}function rM(n,i){Io.X(n,i);var r=mr;if(r&&n){var u=Us(r).hoistableScripts,E=Rr(n),A=u.get(E);A||(A=r.querySelector(Vc(E)),A||(n=R({src:n,async:!0},i),(i=ii.get(E))&&iA(n,i),A=r.createElement("script"),Ln(A),Vn(A,"link",n),r.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},u.set(E,A))}}function cM(n,i){Io.M(n,i);var r=mr;if(r&&n){var u=Us(r).hoistableScripts,E=Rr(n),A=u.get(E);A||(A=r.querySelector(Vc(E)),A||(n=R({src:n,async:!0,type:"module"},i),(i=ii.get(E))&&iA(n,i),A=r.createElement("script"),Ln(A),Vn(A,"link",n),r.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},u.set(E,A))}}function bg(n,i,r,u){var E=(E=P.current)?Gd(E):null;if(!E)throw Error(o(446));switch(n){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(i=Ar(r.href),r=Us(E).hoistableStyles,u=r.get(i),u||(u={type:"style",instance:null,count:0,state:null},r.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){n=Ar(r.href);var A=Us(E).hoistableStyles,N=A.get(n);if(N||(E=E.ownerDocument||E,N={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},A.set(n,N),(A=E.querySelector(Kc(n)))&&!A._p&&(N.instance=A,N.state.loading=5),ii.has(n)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},ii.set(n,r),A||uM(E,n,r,N.state))),i&&u===null)throw Error(o(528,""));return N}if(i&&u!==null)throw Error(o(529,""));return null;case"script":return i=r.async,r=r.src,typeof r=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Rr(r),r=Us(E).hoistableScripts,u=r.get(i),u||(u={type:"script",instance:null,count:0,state:null},r.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,n))}}function Ar(n){return'href="'+Qa(n)+'"'}function Kc(n){return'link[rel="stylesheet"]['+n+"]"}function Og(n){return R({},n,{"data-precedence":n.precedence,precedence:null})}function uM(n,i,r,u){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=n.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),Vn(i,"link",r),Ln(i),n.head.appendChild(i))}function Rr(n){return'[src="'+Qa(n)+'"]'}function Vc(n){return"script[async]"+n}function Dg(n,i,r){if(i.count++,i.instance===null)switch(i.type){case"style":var u=n.querySelector('style[data-href~="'+Qa(r.href)+'"]');if(u)return i.instance=u,Ln(u),u;var E=R({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),Ln(u),Vn(u,"style",E),Bd(u,r.precedence,n),i.instance=u;case"stylesheet":E=Ar(r.href);var A=n.querySelector(Kc(E));if(A)return i.state.loading|=4,i.instance=A,Ln(A),A;u=Og(r),(E=ii.get(E))&&aA(u,E),A=(n.ownerDocument||n).createElement("link"),Ln(A);var N=A;return N._p=new Promise(function(v,F){N.onload=v,N.onerror=F}),Vn(A,"link",u),i.state.loading|=4,Bd(A,r.precedence,n),i.instance=A;case"script":return A=Rr(r.src),(E=n.querySelector(Vc(A)))?(i.instance=E,Ln(E),E):(u=r,(E=ii.get(A))&&(u=R({},r),iA(u,E)),n=n.ownerDocument||n,E=n.createElement("script"),Ln(E),Vn(E,"link",u),n.head.appendChild(E),i.instance=E);case"void":return null;default:throw Error(o(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,Bd(u,r.precedence,n));return i.instance}function Bd(n,i,r){for(var u=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=u.length?u[u.length-1]:null,A=E,N=0;N<u.length;N++){var v=u[N];if(v.dataset.precedence===i)A=v;else if(A!==E)break}A?A.parentNode.insertBefore(n,A.nextSibling):(i=r.nodeType===9?r.head:r,i.insertBefore(n,i.firstChild))}function aA(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function iA(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var Fd=null;function yg(n,i,r){if(Fd===null){var u=new Map,E=Fd=new Map;E.set(r,u)}else E=Fd,u=E.get(r),u||(u=new Map,E.set(r,u));if(u.has(n))return u;for(u.set(n,null),r=r.getElementsByTagName(n),E=0;E<r.length;E++){var A=r[E];if(!(A[oc]||A[ta]||n==="link"&&A.getAttribute("rel")==="stylesheet")&&A.namespaceURI!=="http://www.w3.org/2000/svg"){var N=A.getAttribute(i)||"";N=n+N;var v=u.get(N);v?v.push(A):u.set(N,[A])}}return u}function vg(n,i,r){n=n.ownerDocument||n,n.head.insertBefore(r,i==="title"?n.querySelector("head > title"):null)}function dM(n,i,r){if(r===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return n=i.disabled,typeof i.precedence=="string"&&n==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Mg(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var Wc=null;function hM(){}function fM(n,i,r){if(Wc===null)throw Error(o(475));var u=Wc;if(i.type==="stylesheet"&&(typeof r.media!="string"||matchMedia(r.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var E=Ar(r.href),A=n.querySelector(Kc(E));if(A){n=A._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(u.count++,u=jd.bind(u),n.then(u,u)),i.state.loading|=4,i.instance=A,Ln(A);return}A=n.ownerDocument||n,r=Og(r),(E=ii.get(E))&&aA(r,E),A=A.createElement("link"),Ln(A);var N=A;N._p=new Promise(function(v,F){N.onload=v,N.onerror=F}),Vn(A,"link",r),i.instance=A}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(i,n),(n=i.state.preload)&&(i.state.loading&3)===0&&(u.count++,i=jd.bind(u),n.addEventListener("load",i),n.addEventListener("error",i))}}function EM(){if(Wc===null)throw Error(o(475));var n=Wc;return n.stylesheets&&n.count===0&&oA(n,n.stylesheets),0<n.count?function(i){var r=setTimeout(function(){if(n.stylesheets&&oA(n,n.stylesheets),n.unsuspend){var u=n.unsuspend;n.unsuspend=null,u()}},6e4);return n.unsuspend=i,function(){n.unsuspend=null,clearTimeout(r)}}:null}function jd(){if(this.count--,this.count===0){if(this.stylesheets)oA(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var zd=null;function oA(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,zd=new Map,i.forEach(mM,n),zd=null,jd.call(n))}function mM(n,i){if(!(i.state.loading&4)){var r=zd.get(n);if(r)var u=r.get(null);else{r=new Map,zd.set(n,r);for(var E=n.querySelectorAll("link[data-precedence],style[data-precedence]"),A=0;A<E.length;A++){var N=E[A];(N.nodeName==="LINK"||N.getAttribute("media")!=="not all")&&(r.set(N.dataset.precedence,N),u=N)}u&&r.set(null,u)}E=i.instance,N=E.getAttribute("data-precedence"),A=r.get(N)||u,A===u&&r.set(null,E),r.set(N,E),this.count++,u=jd.bind(this),E.addEventListener("load",u),E.addEventListener("error",u),A?A.parentNode.insertBefore(E,A.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(E,n.firstChild)),i.state.loading|=4}}var Xc={$$typeof:x,Provider:null,Consumer:null,_currentValue:$,_currentValue2:$,_threadCount:0};function AM(n,i,r,u,E,A,N,v){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ls(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ls(0),this.hiddenUpdates=Ls(null),this.identifierPrefix=u,this.onUncaughtError=E,this.onCaughtError=A,this.onRecoverableError=N,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=v,this.incompleteTransitions=new Map}function Lg(n,i,r,u,E,A,N,v,F,oe,Ae,Te){return n=new AM(n,i,r,N,v,F,oe,Te),i=1,A===!0&&(i|=24),A=ka(3,null,null,i),n.current=A,A.stateNode=n,i=BE(),i.refCount++,n.pooledCache=i,i.refCount++,A.memoizedState={element:u,isDehydrated:r,cache:i},YE(A),n}function xg(n){return n?(n=Xs,n):Xs}function Hg(n,i,r,u,E,A){E=xg(E),u.context===null?u.context=E:u.pendingContext=E,u=Po(i),u.payload={element:r},A=A===void 0?null:A,A!==null&&(u.callback=A),r=wo(n,u,i),r!==null&&(Ba(r,n,i),Nc(r,n,i))}function kg(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var r=n.retryLane;n.retryLane=r!==0&&r<i?r:i}}function lA(n,i){kg(n,i),(n=n.alternate)&&kg(n,i)}function Ug(n){if(n.tag===13){var i=Ws(n,67108864);i!==null&&Ba(i,n,67108864),lA(n,67108864)}}var Yd=!0;function RM(n,i,r,u){var E=M.T;M.T=null;var A=K.p;try{K.p=2,sA(n,i,r,u)}finally{K.p=A,M.T=E}}function TM(n,i,r,u){var E=M.T;M.T=null;var A=K.p;try{K.p=8,sA(n,i,r,u)}finally{K.p=A,M.T=E}}function sA(n,i,r,u){if(Yd){var E=rA(u);if(E===null)Xm(n,i,u,Kd,r),wg(n,u);else if(IM(E,n,i,r,u))u.stopPropagation();else if(wg(n,u),i&4&&-1<SM.indexOf(n)){for(;E!==null;){var A=ks(E);if(A!==null)switch(A.tag){case 3:if(A=A.stateNode,A.current.memoizedState.isDehydrated){var N=ki(A.pendingLanes);if(N!==0){var v=A;for(v.pendingLanes|=2,v.entangledLanes|=2;N;){var F=1<<31-wt(N);v.entanglements[1]|=F,N&=~F}Bi(A),(St&6)===0&&(Dd=ve()+500,Fc(0))}}break;case 13:v=Ws(A,2),v!==null&&Ba(v,A,2),vd(),lA(A,2)}if(A=rA(u),A===null&&Xm(n,i,u,Kd,r),A===E)break;E=A}E!==null&&u.stopPropagation()}else Xm(n,i,u,null,r)}}function rA(n){return n=fE(n),cA(n)}var Kd=null;function cA(n){if(Kd=null,n=Hs(n),n!==null){var i=c(n);if(i===null)n=null;else{var r=i.tag;if(r===13){if(n=d(i),n!==null)return n;n=null}else if(r===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return Kd=n,null}function Pg(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ye()){case Sn:return 2;case Si:return 8;case pa:case ao:return 32;case io:return 268435456;default:return 32}default:return 32}}var uA=!1,Qo=null,Jo=null,$o=null,qc=new Map,Zc=new Map,el=[],SM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function wg(n,i){switch(n){case"focusin":case"focusout":Qo=null;break;case"dragenter":case"dragleave":Jo=null;break;case"mouseover":case"mouseout":$o=null;break;case"pointerover":case"pointerout":qc.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zc.delete(i.pointerId)}}function Qc(n,i,r,u,E,A){return n===null||n.nativeEvent!==A?(n={blockedOn:i,domEventName:r,eventSystemFlags:u,nativeEvent:A,targetContainers:[E]},i!==null&&(i=ks(i),i!==null&&Ug(i)),n):(n.eventSystemFlags|=u,i=n.targetContainers,E!==null&&i.indexOf(E)===-1&&i.push(E),n)}function IM(n,i,r,u,E){switch(i){case"focusin":return Qo=Qc(Qo,n,i,r,u,E),!0;case"dragenter":return Jo=Qc(Jo,n,i,r,u,E),!0;case"mouseover":return $o=Qc($o,n,i,r,u,E),!0;case"pointerover":var A=E.pointerId;return qc.set(A,Qc(qc.get(A)||null,n,i,r,u,E)),!0;case"gotpointercapture":return A=E.pointerId,Zc.set(A,Qc(Zc.get(A)||null,n,i,r,u,E)),!0}return!1}function Gg(n){var i=Hs(n.target);if(i!==null){var r=c(i);if(r!==null){if(i=r.tag,i===13){if(i=d(r),i!==null){n.blockedOn=i,fy(n.priority,function(){if(r.tag===13){var u=Ga();u=ic(u);var E=Ws(r,u);E!==null&&Ba(E,r,u),lA(r,u)}});return}}else if(i===3&&r.stateNode.current.memoizedState.isDehydrated){n.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Vd(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var r=rA(n.nativeEvent);if(r===null){r=n.nativeEvent;var u=new r.constructor(r.type,r);hE=u,r.target.dispatchEvent(u),hE=null}else return i=ks(r),i!==null&&Ug(i),n.blockedOn=r,!1;i.shift()}return!0}function Bg(n,i,r){Vd(n)&&r.delete(i)}function _M(){uA=!1,Qo!==null&&Vd(Qo)&&(Qo=null),Jo!==null&&Vd(Jo)&&(Jo=null),$o!==null&&Vd($o)&&($o=null),qc.forEach(Bg),Zc.forEach(Bg)}function Wd(n,i){n.blockedOn===i&&(n.blockedOn=null,uA||(uA=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,_M)))}var Xd=null;function Fg(n){Xd!==n&&(Xd=n,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Xd===n&&(Xd=null);for(var i=0;i<n.length;i+=3){var r=n[i],u=n[i+1],E=n[i+2];if(typeof u!="function"){if(cA(u||r)===null)continue;break}var A=ks(r);A!==null&&(n.splice(i,3),i-=3,cm(A,{pending:!0,data:E,method:r.method,action:u},u,E))}}))}function Jc(n){function i(F){return Wd(F,n)}Qo!==null&&Wd(Qo,n),Jo!==null&&Wd(Jo,n),$o!==null&&Wd($o,n),qc.forEach(i),Zc.forEach(i);for(var r=0;r<el.length;r++){var u=el[r];u.blockedOn===n&&(u.blockedOn=null)}for(;0<el.length&&(r=el[0],r.blockedOn===null);)Gg(r),r.blockedOn===null&&el.shift();if(r=(n.ownerDocument||n).$$reactFormReplay,r!=null)for(u=0;u<r.length;u+=3){var E=r[u],A=r[u+1],N=E[Na]||null;if(typeof A=="function")N||Fg(r);else if(N){var v=null;if(A&&A.hasAttribute("formAction")){if(E=A,N=A[Na]||null)v=N.formAction;else if(cA(E)!==null)continue}else v=N.action;typeof v=="function"?r[u+1]=v:(r.splice(u,3),u-=3),Fg(r)}}}function dA(n){this._internalRoot=n}qd.prototype.render=dA.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(o(409));var r=i.current,u=Ga();Hg(r,u,n,i,null,null)},qd.prototype.unmount=dA.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;Hg(n.current,2,null,n,null,null),vd(),i[xs]=null}};function qd(n){this._internalRoot=n}qd.prototype.unstable_scheduleHydration=function(n){if(n){var i=iS();n={blockedOn:null,target:n,priority:i};for(var r=0;r<el.length&&i!==0&&i<el[r].priority;r++);el.splice(r,0,n),r===0&&Gg(n)}};var jg=t.version;if(jg!=="19.1.0")throw Error(o(527,jg,"19.1.0"));K.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(o(188)):(n=Object.keys(n).join(","),Error(o(268,n)));return n=f(i),n=n!==null?m(n):null,n=n===null?null:n.stateNode,n};var gM={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:M,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zd.isDisabled&&Zd.supportsFiber)try{Lo=Zd.inject(gM),rt=Zd}catch{}}return eu.createRoot=function(n,i){if(!s(n))throw Error(o(299));var r=!1,u="",E=i_,A=o_,N=l_,v=null;return i!=null&&(i.unstable_strictMode===!0&&(r=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(E=i.onUncaughtError),i.onCaughtError!==void 0&&(A=i.onCaughtError),i.onRecoverableError!==void 0&&(N=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(v=i.unstable_transitionCallbacks)),i=Lg(n,1,!1,null,null,r,u,E,A,N,v,null),n[xs]=i.current,Wm(n),new dA(i)},eu.hydrateRoot=function(n,i,r){if(!s(n))throw Error(o(299));var u=!1,E="",A=i_,N=o_,v=l_,F=null,oe=null;return r!=null&&(r.unstable_strictMode===!0&&(u=!0),r.identifierPrefix!==void 0&&(E=r.identifierPrefix),r.onUncaughtError!==void 0&&(A=r.onUncaughtError),r.onCaughtError!==void 0&&(N=r.onCaughtError),r.onRecoverableError!==void 0&&(v=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(F=r.unstable_transitionCallbacks),r.formState!==void 0&&(oe=r.formState)),i=Lg(n,1,!0,i,r??null,u,E,A,N,v,F,oe),i.context=xg(null),r=i.current,u=Ga(),u=ic(u),E=Po(u),E.callback=null,wo(r,E,u),r=u,i.current.lanes=r,vl(i,r),Bi(i),n[xs]=i.current,Wm(n),new qd(i)},eu.version="19.1.0",eu}var Jg;function xM(){if(Jg)return fA.exports;Jg=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),fA.exports=LM(),fA.exports}var HM=xM(),b=vR();const ha=FN(b),MR=NM({__proto__:null,default:ha},[b]);var zN={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Ql=ha.createContext&&ha.createContext(zN),kM=["attr","size","title"];function UM(e,t){if(e==null)return{};var a=PM(e,t),o,s;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(s=0;s<c.length;s++)o=c[s],!(t.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(a[o]=e[o])}return a}function PM(e,t){if(e==null)return{};var a={};for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){if(t.indexOf(o)>=0)continue;a[o]=e[o]}return a}function vh(){return vh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},vh.apply(this,arguments)}function $g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,o)}return a}function Mh(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?$g(Object(a),!0).forEach(function(o){wM(e,o,a[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):$g(Object(a)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(a,o))})}return e}function wM(e,t,a){return t=GM(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function GM(e){var t=BM(e,"string");return typeof t=="symbol"?t:t+""}function BM(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var o=a.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function YN(e){return e&&e.map((t,a)=>ha.createElement(t.tag,Mh({key:a},t.attr),YN(t.child)))}function hi(e){return t=>ha.createElement(FM,vh({attr:Mh({},e.attr)},t),YN(e.child))}function FM(e){var t=a=>{var{attr:o,size:s,title:c}=e,d=UM(e,kM),h=s||a.size||"1em",f;return a.className&&(f=a.className),e.className&&(f=(f?f+" ":"")+e.className),ha.createElement("svg",vh({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},a.attr,o,d,{className:f,style:Mh(Mh({color:e.color||a.color},a.style),e.style),height:h,width:h,xmlns:"http://www.w3.org/2000/svg"}),c&&ha.createElement("title",null,c),e.children)};return Ql!==void 0?ha.createElement(Ql.Consumer,null,a=>t(a)):t(zN)}function jM(e){return hi({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M407.8 294.7c-3.3-.4-6.7-.8-10-1.3c3.4 .4 6.7 .9 10 1.3zM288 227.1C261.9 176.4 190.9 81.9 124.9 35.3C61.6-9.4 37.5-1.7 21.6 5.5C3.3 13.8 0 41.9 0 58.4S9.1 194 15 213.9c19.5 65.7 89.1 87.9 153.2 80.7c3.3-.5 6.6-.9 10-1.4c-3.3 .5-6.6 1-10 1.4C74.3 308.6-9.1 342.8 100.3 464.5C220.6 589.1 265.1 437.8 288 361.1c22.9 76.7 49.2 222.5 185.6 103.4c102.4-103.4 28.1-156-65.8-169.9c-3.3-.4-6.7-.8-10-1.3c3.4 .4 6.7 .9 10 1.3c64.1 7.1 133.6-15.1 153.2-80.7C566.9 194 576 75 576 58.4s-3.3-44.7-21.6-52.9c-15.8-7.1-40-14.9-103.2 29.8C385.1 81.9 314.1 176.4 288 227.1z"},child:[]}]})(e)}function zM(e){return hi({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"},child:[]}]})(e)}function YM(e){return hi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M192 32c0 17.7 14.3 32 32 32c123.7 0 224 100.3 224 224c0 17.7 14.3 32 32 32s32-14.3 32-32C512 128.9 383.1 0 224 0c-17.7 0-32 14.3-32 32zm0 96c0 17.7 14.3 32 32 32c70.7 0 128 57.3 128 128c0 17.7 14.3 32 32 32s32-14.3 32-32c0-106-86-192-192-192c-17.7 0-32 14.3-32 32zM96 144c0-26.5-21.5-48-48-48S0 117.5 0 144V368c0 79.5 64.5 144 144 144s144-64.5 144-144s-64.5-144-144-144H128v96h16c26.5 0 48 21.5 48 48s-21.5 48-48 48s-48-21.5-48-48V144z"},child:[]}]})(e)}function KM(e){return hi({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M249.6 471.5c10.8 3.8 22.4-4.1 22.4-15.5V78.6c0-4.2-1.6-8.4-5-11C247.4 52 202.4 32 144 32C93.5 32 46.3 45.3 18.1 56.1C6.8 60.5 0 71.7 0 83.8V454.1c0 11.9 12.8 20.2 24.1 16.5C55.6 460.1 105.5 448 144 448c33.9 0 79 14 105.6 23.5zm76.8 0C353 462 398.1 448 432 448c38.5 0 88.4 12.1 119.9 22.6c11.3 3.8 24.1-4.6 24.1-16.5V83.8c0-12.1-6.8-23.3-18.1-27.6C529.7 45.3 482.5 32 432 32c-58.4 0-103.4 20-123 35.6c-3.3 2.6-5 6.8-5 11V456c0 11.4 11.7 19.3 22.4 15.5z"},child:[]}]})(e)}function VM(e){return hi({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"},child:[]}]})(e)}function WM(e){return hi({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M352 144c0-44.2 35.8-80 80-80s80 35.8 80 80v48c0 17.7 14.3 32 32 32s32-14.3 32-32V144C576 64.5 511.5 0 432 0S288 64.5 288 144v48H64c-35.3 0-64 28.7-64 64V448c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V256c0-35.3-28.7-64-64-64H352V144z"},child:[]}]})(e)}function XM(e){return hi({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M144 144v48H304V144c0-44.2-35.8-80-80-80s-80 35.8-80 80zM80 192V144C80 64.5 144.5 0 224 0s144 64.5 144 144v48h16c35.3 0 64 28.7 64 64V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V256c0-35.3 28.7-64 64-64H80z"},child:[]}]})(e)}function KN(e){return hi({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"},child:[]}]})(e)}const qM="7.4",ZM=16;var Dn=(e=>(e.Exact="Exact",e.SkillSequence="SkillSequence",e.Edited="Edited",e))(Dn||{}),ri=(e=>(e.Record="Record",e.SkillSequencePresets="SkillSequencePresets",e.MarkerTrackIndividual="MarkerTrackIndividual",e.MarkerTracksCombined="MarkerTracksCombined",e.MarkerTrackSet="MarkerTrackSet",e))(ri||{}),oi=(e=>(e[e.RealTime=0]="RealTime",e[e.RealTimeAutoPause=1]="RealTimeAutoPause",e[e.Manual=2]="Manual",e))(oi||{}),No=(e=>(e[e.Initial=0]="Initial",e[e.FpsTax=1]="FpsTax",e[e.AllaganGcdFormula=2]="AllaganGcdFormula",e))(No||{});const LR={version:2};let VN=!1;function QM(){return VN}const hf="DT",ru=window.location.hostname.startsWith("beta"),JM=localStorage.length===0;function Rt(e){const t=localStorage.getItem(hf+"."+e);return localStorage.getItem(e)!==null&&(VN=!0),t}function Tt(e,t){localStorage.setItem(hf+"."+e,t)}function QA(e){localStorage.removeItem(hf+"."+e)}function WN(){Object.keys(localStorage).forEach(e=>{e.startsWith(hf+".")&&localStorage.removeItem(e)})}function XN(e,t){const a=e in TA?TA[e]:TA.NEVER;return t>=a.level}const ie=()=>e=>e,$M=ie()({BENEFIC:{id:3594,name:"Benefic",label:{zh:"",ja:""}},LIGHTSPEED:{id:3606,name:"Lightspeed",label:{zh:"",ja:""}},HELIOS:{id:3600,name:"Helios",label:{zh:"",ja:""}},ASCEND:{id:3603,name:"Ascend",label:{zh:"",ja:""}},ESSENTIAL_DIGNITY:{id:3614,name:"Essential Dignity",label:{zh:"",ja:""}},BENEFIC_II:{id:3610,name:"Benefic II",label:{zh:"",ja:""}},ASTRAL_DRAW:{id:37017,name:"Astral Draw",label:{zh:"",ja:""}},UMBRAL_DRAW:{id:37018,name:"Umbral Draw",label:{zh:"",ja:""}},PLAY_I:{id:37019,name:"Play I",label:{zh:"I",ja:"I"}},PLAY_II:{id:37020,name:"Play II",label:{zh:"II",ja:"II"}},PLAY_III:{id:37021,name:"Play III",label:{zh:"III",ja:"III"}},ASPECTED_BENEFIC:{id:3595,name:"Aspected Benefic",label:{zh:"",ja:""}},ASPECTED_HELIOS:{id:3601,name:"Aspected Helios",label:{zh:"",ja:""}},GRAVITY:{id:3615,name:"Gravity",label:{zh:"",ja:""}},COMBUST_II:{id:3608,name:"Combust II",label:{zh:"",ja:""}},SYNASTRY:{id:3612,name:"Synastry",label:{zh:"",ja:""}},DIVINATION:{id:16552,name:"Divination",label:{zh:"",ja:""}},COLLECTIVE_UNCONSCIOUS:{id:3613,name:"Collective Unconscious",label:{zh:"",ja:""}},CELESTIAL_OPPOSITION:{id:16553,name:"Celestial Opposition",label:{zh:"",ja:""}},EARTHLY_STAR:{id:7439,name:"Earthly Star",label:{zh:"",ja:""}},STELLAR_DETONATION:{id:8324,name:"Stellar Detonation",label:{zh:"",ja:""}},MALEFIC_III:{id:7442,name:"Malefic III",label:{zh:"",ja:""}},MINOR_ARCANA:{id:37022,name:"Minor Arcana",label:{zh:"",ja:""}},COMBUST_III:{id:16554,name:"Combust III",label:{zh:"",ja:""}},MALEFIC_IV:{id:16555,name:"Malefic IV",label:{zh:"",ja:""}},CELESTIAL_INTERSECTION:{id:16556,name:"Celestial Intersection",label:{zh:"",ja:""}},HOROSCOPE:{id:16557,name:"Horoscope",label:{zh:"",ja:""}},HOROSCOPE_RECAST:{id:16558,name:"Horoscope (Recast)",label:{zh:"",ja:""}},NEUTRAL_SECT:{id:16559,name:"Neutral Sect",label:{zh:"",ja:""}},FALL_MALEFIC:{id:25871,name:"Fall Malefic",label:{zh:"",ja:""}},GRAVITY_II:{id:25872,name:"Gravity II",label:{zh:"",ja:""}},EXALTATION:{id:25873,name:"Exaltation",label:{zh:"",ja:""}},MACROCOSMOS:{id:25874,name:"Macrocosmos",label:{zh:"",ja:""}},MICROCOSMOS:{id:25875,name:"Microcosmos",label:{zh:"",ja:""}},ORACLE:{id:37029,name:"Oracle",label:{zh:"",ja:""}},HELIOS_CONJUNCTION:{id:37030,name:"Helios Conjunction",label:{zh:"",ja:""}},SUN_SIGN:{id:37031,name:"Sun Sign",label:{zh:"",ja:""}},THE_BALANCE:{id:37023,name:"The Balance",label:{zh:"",ja:""}},THE_ARROW:{id:37024,name:"The Arrow",label:{zh:"",ja:""}},THE_SPIRE:{id:37025,name:"The Spire",label:{zh:"",ja:""}},THE_SPEAR:{id:37026,name:"The Spear",label:{zh:"",ja:""}},THE_BOLE:{id:37027,name:"The Bole",label:{zh:"",ja:""}},THE_EWER:{id:37028,name:"The Ewer",label:{zh:"",ja:""}},LORD_OF_CROWNS:{id:7444,name:"Lord of Crowns",label:{zh:"",ja:""}},LADY_OF_CROWNS:{id:7445,name:"Lady of Crowns",label:{zh:"",ja:""}}}),eL=ie()({cd_LIGHTSPEED:{name:"cd_Lightspeed"},cd_ESSENTIAL_DIGNITY:{name:"cd_EssentialDignity"},cd_ASTRAL_DRAW:{name:"cd_AstralDraw"},cd_PLAY_I:{name:"cd_PlayI"},cd_PLAY_II:{name:"cd_PlayII"},cd_PLAY_III:{name:"cd_PlayIII"},cd_SYNASTRY:{name:"cd_Synastry"},cd_DIVINATION:{name:"cd_Divination"},cd_COLLECTIVE_UNCONSCIOUS:{name:"cd_CollectiveUnconscious"},cd_CELESTIAL_OPPOSITION:{name:"cd_CelestialOpposition"},cd_EARTHLY_STAR:{name:"cd_EarthlyStar"},cd_STELLAR_DETONATION:{name:"cd_StellarDetonation"},cd_MINOR_ARCANA:{name:"cd_MinorArcana"},cd_CELESTIAL_INTERSECTION:{name:"cd_CelestialIntersection"},cd_HOROSCOPE:{name:"cd_Horoscope"},cd_HOROSCOPE_RECAST:{name:"cd_HoroscopeRecast"},cd_NEUTRAL_SECT:{name:"cd_NeutralSect"},cd_EXALTATION:{name:"cd_Exaltation"},cd_MACROCOSMOS:{name:"cd_Macrocosmos"},cd_MICROCOSMOS:{name:"cd_Microcosmos"},cd_ORACLE:{name:"cd_Oracle"},cd_SUN_SIGN:{name:"cd_SunSign"}}),tL=ie()({ARCANA:{name:"Arcana",label:{zh:""}},MINOR_ARCANA:{name:"Minor Arcana",label:{zh:""}}}),xR=ie()({LIGHTSPEED:{name:"Lightspeed",label:{zh:""}},THE_BALANCE:{name:"The Balance",label:{zh:""}},THE_ARROW:{name:"The Arrow",label:{zh:""}},THE_SPIRE:{name:"The Spire",label:{zh:""}},THE_SPEAR:{name:"The Spear",label:{zh:""}},THE_BOLE:{name:"The Bole",label:{zh:""}},THE_EWER:{name:"The Ewer",label:{zh:""}},ASPECTED_BENEFIC:{name:"Aspected Benefic",label:{zh:""}},ASPECTED_HELIOS:{name:"Aspected Helios",label:{zh:""}},SYNASTRY:{name:"Synastry",label:{zh:""}},DIVINATION:{name:"Divination",label:{zh:""}},DIVINING:{name:"Divining",label:{zh:""}},COLLECTIVE_UNCONSCIOUS:{name:"Collective Unconscious",label:{zh:""}},COLLECTIVE_UNCONSCIOUS_MIT:{name:"Collective Unconscious (Mitigation)",label:{zh:""}},WHEEL_OF_FORTUNE:{name:"Wheel of Fortune",label:{zh:""}},OPPOSITION:{name:"Opposition",label:{zh:""}},EARTHLY_DOMINANCE:{name:"Earthly Dominance",mayNotBeCanceled:!0,label:{zh:""}},GIANT_DOMINANCE:{name:"Giant Dominance",mayNotBeCanceled:!0,label:{zh:""}},COMBUST_II:{name:"Combust II",label:{zh:""}},COMBUST_III:{name:"Combust III",label:{zh:""}},INTERSECTION:{name:"Intersection",label:{zh:""}},HOROSCOPE:{name:"Horoscope",label:{zh:""}},HOROSCOPE_HELIOS:{name:"Horoscope Helios",label:{zh:""}},NEUTRAL_SECT:{name:"Neutral Sect",label:{zh:""}},NEUTRAL_SECT_SHIELD:{name:"Neutral Sect (Shield)",label:{zh:""}},SUNTOUCHED:{name:"Suntouched",label:{zh:""}},EXALTATION:{name:"Exaltation",label:{zh:""}},MACROCOSMOS:{name:"Macrocosmos",label:{zh:""}},HELIOS_CONJUNCTION:{name:"Helios Conjunction",label:{zh:""}},SUN_SIGN:{name:"Sun Sign",label:{zh:""}}}),nL=ie()({ARCANA_1:{name:"Arcana 1",label:{zh:"1"}},ARCANA_2:{name:"Arcana 2",label:{zh:"2"}},ARCANA_3:{name:"Arcana 3",label:{zh:"3"}},NEXT_DRAW:{name:"Next Draw",label:{zh:""}}}),aL=ie()({COMBUST_MASTERY_II:{name:"Combust Mastery II",level:72},MALEFIC_MASTERY_III:{name:"Malefic Mastery III",level:82},ENHANCED_ESSENTIAL_DIGNITY:{name:"Enhanced Essential Dignity",level:78},MALEFIC_MASTERY_IV:{name:"Malefic Mastery IV",level:82},GRAVITY_MASTERY:{name:"Gravity Mastery",level:82},ENHANCED_CELESTIAL_INTERSECTION:{name:"Enhanced Celestial Intersection",level:88},ENHANCED_DIVINATION:{name:"Enhanced Divination",level:92},ASPECTED_HELIOS_MASTERY:{name:"Aspected Helios Mastery",level:96},ENHANCED_ESSENTIAL_DIGNITY_II:{name:"Enhanced Essential Dignity_II",level:98},ENHANCED_NEUTRAL_SECT:{name:"Enhanced Neutral Sect",level:100}}),iL={...tL,...xR,...nL},oL=ie()({BLIZZARD:{id:142,name:"Blizzard",label:{zh:"1",ja:""},discordEmote:"B1"},FIRE:{id:141,name:"Fire",label:{zh:"1",ja:""},discordEmote:"F1"},BLIZZARD_II:{id:25793,name:"Blizzard 2",label:{zh:"2",ja:""},discordEmote:"F2"},FIRE_II:{id:147,name:"Fire 2",label:{zh:"2",ja:""},discordEmote:"F2"},TRANSPOSE:{id:149,name:"Transpose",label:{zh:"",ja:""},discordEmote:"Transpose"},THUNDER_III:{id:153,name:"Thunder 3",label:{zh:"3",ja:""},discordEmote:"T3"},THUNDER_IV:{id:7420,name:"Thunder 4",label:{zh:""},discordEmote:"T4"},MANAWARD:{id:157,name:"Manaward",label:{zh:"",ja:""},discordEmote:"Manaward"},MANAFONT:{id:158,name:"Manafont",label:{zh:"",ja:""},discordEmote:"Manafont"},LEY_LINES:{id:3573,name:"Ley Lines",label:{zh:"",ja:""},discordEmote:"LL"},FIRE_III:{id:152,name:"Fire 3",label:{zh:"3",ja:""},discordEmote:"F3"},BLIZZARD_III:{id:154,name:"Blizzard 3",label:{zh:"3",ja:""},discordEmote:"B3"},FREEZE:{id:159,name:"Freeze",label:{zh:"",ja:""},discordEmote:"Freeze"},FLARE:{id:162,name:"Flare",label:{zh:"",ja:""},discordEmote:"Flare"},BLIZZARD_IV:{id:3576,name:"Blizzard 4",label:{zh:"4",ja:""},discordEmote:"B4"},FIRE_IV:{id:3577,name:"Fire 4",label:{zh:"4",ja:""},discordEmote:"F4"},BETWEEN_THE_LINES:{id:7419,name:"Between the Lines",label:{zh:"",ja:""},discordEmote:"BtL"},AETHERIAL_MANIPULATION:{id:155,name:"Aetherial Manipulation",label:{zh:"",ja:""},discordEmote:"AM"},TRIPLECAST:{id:7421,name:"Triplecast",label:{zh:"",ja:""},discordEmote:"Triple"},FOUL:{id:7422,name:"Foul",label:{zh:"",ja:""},discordEmote:"Foul"},DESPAIR:{id:16505,name:"Despair",label:{zh:"",ja:""},discordEmote:"Despair"},UMBRAL_SOUL:{id:16506,name:"Umbral Soul",label:{zh:"",ja:""},discordEmote:"Soul"},XENOGLOSSY:{id:16507,name:"Xenoglossy",label:{zh:"",ja:""},discordEmote:"Xeno"},HIGH_FIRE_II:{id:25794,name:"High Fire 2",label:{zh:"2",ja:""},discordEmote:"HF2"},HIGH_BLIZZARD_II:{id:25795,name:"High Blizzard 2",label:{zh:"2",ja:""},discordEmote:"HB2"},AMPLIFIER:{id:25796,name:"Amplifier",label:{zh:"",ja:""},discordEmote:"Amplifier"},PARADOX:{id:25797,name:"Paradox",label:{zh:"",ja:""},discordEmote:"Para"},HIGH_THUNDER:{id:36986,name:"High Thunder",label:{zh:"",ja:""},discordEmote:"HThunder"},HIGH_THUNDER_II:{id:36987,name:"High Thunder 2",label:{zh:""},discordEmote:"HThunder2"},FLARE_STAR:{id:36989,name:"Flare Star",label:{zh:"",ja:""},discordEmote:"FS"},RETRACE:{id:36988,name:"Retrace",label:{zh:"",ja:""}}}),lL=ie()({cd_TRANSPOSE:{name:"cd_Transpose"},cd_LEY_LINES:{name:"cd_LeyLines"},cd_MANAWARD:{name:"cd_Manaward"},cd_BETWEEN_THE_LINES:{name:"cd_BetweenTheLines"},cd_AETHERIAL_MANIPULATION:{name:"cd_AetherialManipulation"},cd_TRIPLECAST:{name:"cd_Triplecast"},cd_MANAFONT:{name:"cd_Manafont"},cd_AMPLIFIER:{name:"cd_Amplifier"},cd_RETRACE:{name:"cd_Retrace"}}),sL=ie()({POLYGLOT:{name:"Polyglot",label:{zh:""}},ASTRAL_FIRE:{name:"Astral Fire",label:{zh:""}},UMBRAL_ICE:{name:"Umbral Ice",label:{zh:""}},UMBRAL_HEART:{name:"Umbral Heart",label:{zh:""}},ENOCHIAN:{name:"Enochian",label:{zh:""}},PARADOX:{name:"Paradox",label:{zh:""}},ASTRAL_SOUL:{name:"Astral Soul",label:{zh:""}}}),HR=ie()({LEY_LINES:{name:"Ley Lines",label:{zh:""},mayBeToggled:!0},TRIPLECAST:{name:"Triplecast",label:{zh:""},maximumStacks:3},FIRESTARTER:{name:"Firestarter",label:{zh:""}},THUNDERHEAD:{name:"Thunderhead",label:{zh:""}},THUNDER_III:{name:"Thunder III",label:{zh:""}},THUNDER_IV:{name:"Thunder IV",label:{zh:""}},HIGH_THUNDER:{name:"High Thunder",label:{zh:""}},HIGH_THUNDER_II:{name:"High Thunder II",label:{zh:""}},MANAWARD:{name:"Manaward",label:{zh:""}}}),rL=ie()({}),cL=ie()({ENHANCED_ENOCHIAN_II:{name:"Enhanced Enochian II",level:78},ENHANCED_POLYGLOT:{name:"Enhanced Polyglot",level:80},ENHANCED_FOUL:{name:"Enhanced Foul",level:80},ASPECT_MASTERY_IV:{name:"Aspect Mastery IV",level:82},ENHANCED_MANAFONT:{name:"Enhanced Manafont",level:84},ENHANCED_ENOCHIAN_III:{name:"Enhanced Enochian III",level:86},ASPECT_MASTERY_V:{name:"Aspect Mastery V",level:90},THUNDER_MASTERY_III:{name:"Thunder Mastery III",level:92},ENHANCED_LEYLINES:{name:"Enhanced Ley Lines",level:96},ENHANCED_ENOCHIAN_IV:{name:"Enhanced Enochian IV",level:96},ENHANCED_POLYGLOT_II:{name:"Enhanced Polyglot II",level:98},ENHANCED_ASTRAL_FIRE:{name:"Enhanced Astral Fire",level:100}}),uL={...sL,...HR,...rL},dL=ie()({HEAVY_SHOT:{id:97,name:"Heavy Shot"},QUICK_NOCK:{id:100,name:"Quick Nock"},BLOODLETTER:{id:110,name:"Bloodletter"},BARRAGE:{id:107,name:"Barrage"},RAGING_STRIKES:{id:101,name:"Raging Strikes"},REPELLING_SHOT:{id:112,name:"Repelling Shot"},WIDE_VOLLEY:{id:111,name:"Wide Volley"},MAGES_BALLAD:{id:114,name:"Mage's Ballad"},ARMYS_PAEON:{id:116,name:"Army's Paeon"},RAIN_OF_DEATH:{id:117,name:"Rain of Death"},BATTLE_VOICE:{id:118,name:"Battle Voice"},EMYPREAL_ARROW:{id:3558,name:"Empyreal Arrow"},WANDERERS_MINUET:{id:3559,name:"The Wanderer's Minuet"},IRON_JAWS:{id:3560,name:"Iron Jaws"},WARDENS_PAEAN:{id:3561,name:"Warden's Paean"},SIDEWINDER:{id:3562,name:"Sidewinder"},PITCH_PERFECT:{id:7404,name:"Pitch Perfect"},TROUBADOUR:{id:7405,name:"Troubadour"},CAUSTIC_BITE:{id:7406,name:"Caustic Bite"},STORMBITE:{id:7407,name:"Stormbite"},NATURES_MINNE:{id:7408,name:"Nature's Minne"},REFULGENT_ARROW:{id:7409,name:"Refulgent Arrow"},SHADOWBITE:{id:16494,name:"Shadowbite"},BURST_SHOT:{id:16495,name:"Burst Shot"},APEX_ARROW:{id:16496,name:"Apex Arrow"},LADONSBITE:{id:25783,name:"Ladonsbite"},BLAST_ARROW:{id:25784,name:"Blast Arrow"},RADIANT_FINALE:{id:25785,name:"Radiant Finale"},HEARTBREAK_SHOT:{id:36975,name:"Heartbreak Shot"},RESONANT_ARROW:{id:36976,name:"Resonant Arrow"},RADIANT_ENCORE:{id:36977,name:"Radiant Encore"}}),hL=ie()({cd_RAGING_STRIKES:{name:"cd_RagingStrikes"},cd_BARRAGE:{name:"cd_Barrage"},cd_EMPYREAL_ARROW:{name:"cd_EmpyrealArrow"},cd_HEARTBREAK_SHOT:{name:"cd_HeartbreakShot"},cd_SIDEWINDER:{name:"cd_Sidewinder"},cd_WANDERERS_MINUET:{name:"cd_WanderersMinuet"},cd_MAGES_BALLAD:{name:"cd_MagesBallad"},cd_ARMYS_PAEON:{name:"cd_ArmysPaeon"},cd_WARDENS_PAEAN:{name:"cd_WardensPaean"},cd_NATURES_MINNE:{name:"cd_NaturesMinne"},cd_REPELLING_SHOT:{name:"cd_RepellingShot"},cd_BATTLE_VOICE:{name:"cd_BattleVoice"},cd_RADIANT_FINALE:{name:"cd_RadiantFinale"},cd_TROUBADOUR:{name:"cd_Troubadour"},cd_PITCH_PERFECT:{name:"cd_PitchPerfect"}}),fL=ie()({SONG_TIMER:{name:"SongTimer"},SOUL_VOICE:{name:"Soul Voice"},PITCH_PERFECT:{name:"Pitch Perfect"},REPERTOIRE:{name:"Repertoire"},WANDERERS_CODA:{name:"Wanderer's Coda"},MAGES_CODA:{name:"Mage's Coda"},ARMYS_CODA:{name:"Army's Coda"}}),kR=ie()({HAWKS_EYE:{name:"Hawk's Eye"},RAGING_STRIKES:{name:"Raging Strikes"},BARRAGE:{name:"Barrage"},ARMYS_MUSE:{name:"Army's Muse"},ARMYS_ETHOS:{name:"Army's Ethos"},BLAST_ARROW_READY:{name:"Blast Arrow Ready"},RESONANT_ARROW_READY:{name:"Resonant Arrow Ready"},RADIANT_ENCORE_READY:{name:"Radiant Encore Ready"},CAUSTIC_BITE:{name:"Caustic Bite"},STORMBITE:{name:"Stormbite"},MAGES_BALLAD:{name:"Mage's Ballad"},ARMYS_PAEON:{name:"Army's Paeon"},WANDERERS_MINUET:{name:"Wanderer's Minuet"},BATTLE_VOICE:{name:"Battle Voice"},WARDENS_PAEAN:{name:"Warden's Paean"},TROUBADOUR:{name:"Troubadour"},NATURES_MINNE:{name:"Nature's Minne"},RADIANT_FINALE:{name:"Radiant Finale"}}),EL=ie()({RADIANT_CODA:{name:"Radiant Coda"},MUSE_REPERTOIRE:{name:"Muse Repertoire"},ETHOS_REPERTOIRE:{name:"Ethos Repertoire"}}),mL=ie()({WIDE_VOLLEY_MASTERY:{name:"Wide Volley Mastery",level:72},BITE_MASTERY_II:{name:"Bite Mastery II",level:76},HEAVY_SHOT_MASTERY:{name:"Heavy Shot Mastery",level:76},ENHANCED_ARMYS_PAEON:{name:"Enhanced Army's Paeon",level:78},SOUL_VOICE:{name:"Soul Voice",level:80},QUICK_NOCK_MASTERY:{name:"Quick Nock Mastery",level:82},ENHANCED_BLOODLETTER:{name:"Enhanced Bloodletter",level:84},ENHANCED_APEX_ARROW:{name:"Enhanced Apex Arrow",level:86},ENHANCED_TROUBADOUR:{name:"Enhanced Troubadour",level:88},MINSTRELS_CODA:{name:"Minstrel's Coda",level:90},BLOODLETTER_MASTERY:{name:"Bloodletter Mastery",level:92},RANGED_MASTERY:{name:"Ranged Mastery",level:94},ENHANCED_BARRAGE:{name:"Enhanced Barrage",level:96},ENHANCED_RADIANT_FINALE:{name:"Enhanced Radiant Finale",level:100}}),AL={...fL,...kR,...EL},RL=ie()({STANDARD_FINISH:{id:16003,name:"Standard Finish",label:{zh:""}},SINGLE_STANDARD_FINISH:{id:16191,name:"Single Standard Finish",label:{zh:""}},DOUBLE_STANDARD_FINISH:{id:16192,name:"Double Standard Finish",label:{zh:""}},FINISHING_MOVE:{id:36984,name:"Finishing Move",label:{zh:""}},LAST_DANCE:{id:36983,name:"Last Dance",label:{zh:""}},TECHNICAL_FINISH:{id:16004,name:"Technical Finish",label:{zh:""}},SINGLE_TECHNICAL_FINISH:{id:16193,name:"Single Technical Finish",label:{zh:""}},DOUBLE_TECHNICAL_FINISH:{id:16194,name:"Double Technical Finish",label:{zh:""}},TRIPLE_TECHNICAL_FINISH:{id:16195,name:"Triple Technical Finish",label:{zh:""}},QUADRUPLE_TECHNICAL_FINISH:{id:16196,name:"Quadruple Technical Finish",label:{zh:""}},TILLANA:{id:25790,name:"Tillana",label:{zh:""}},CASCADE:{id:15989,name:"Cascade",label:{zh:""}},FOUNTAIN:{id:15990,name:"Fountain",label:{zh:""}},REVERSE_CASCADE:{id:15991,name:"Reverse Cascade",label:{zh:""}},FOUNTAINFALL:{id:15992,name:"Fountainfall",label:{zh:""}},WINDMILL:{id:15993,name:"Windmill",label:{zh:""}},BLADESHOWER:{id:15994,name:"Bladeshower",label:{zh:""}},RISING_WINDMILL:{id:15995,name:"Rising Windmill",label:{zh:""}},BLOODSHOWER:{id:15996,name:"Bloodshower",label:{zh:""}},STANDARD_STEP:{id:15997,name:"Standard Step",label:{zh:""}},TECHNICAL_STEP:{id:15998,name:"Technical Step",label:{zh:""}},EMBOITE:{id:15999,name:"Emboite",label:{zh:""}},ENTRECHAT:{id:16e3,name:"Entrechat",label:{zh:""}},JETE:{id:16001,name:"Jete",label:{zh:""}},PIROUETTE:{id:16002,name:"Pirouette",label:{zh:""}},SABER_DANCE:{id:16005,name:"Saber Dance",label:{zh:""}},DANCE_OF_THE_DAWN:{id:36985,name:"Dance of the Dawn",label:{zh:""}},CLOSED_POSITION:{id:16006,name:"Closed Position",label:{zh:""}},FAN_DANCE:{id:16007,name:"Fan Dance",label:{zh:""}},FAN_DANCE_II:{id:16008,name:"Fan Dance II",label:{zh:""}},FAN_DANCE_III:{id:16009,name:"Fan Dance III",label:{zh:""}},FAN_DANCE_IV:{id:25791,name:"Fan Dance IV",label:{zh:""}},EN_AVANT:{id:16010,name:"En Avant",label:{zh:""}},DEVILMENT:{id:16011,name:"Devilment",label:{zh:""}},STARFALL_DANCE:{id:25792,name:"Starfall Dance",label:{zh:""}},SHIELD_SAMBA:{id:16012,name:"Shield Samba",label:{zh:""}},FLOURISH:{id:16013,name:"Flourish",label:{zh:""}},IMPROVISATION:{id:16014,name:"Improvisation",label:{zh:""}},IMPROVISED_FINISH:{id:25789,name:"Improvised Finish",label:{zh:""}},CURING_WALTZ:{id:16015,name:"Curing Waltz",label:{zh:""}},ENDING:{id:18073,name:"Ending",label:{zh:""}}}),TL=ie()({cd_STANDARD_STEP:{name:"cd_StandardStep"},cd_TECHNICAL_STEP:{name:"cd_TechnicalStep"},cd_CLOSED_POSITION:{name:"cd_ClosedPosition"},cd_FAN_DANCE:{name:"cd_FanDance"},cd_FAN_DANCE_II:{name:"cd_FanDanceII",label:{zh:"CD"}},cd_FAN_DANCE_III:{name:"cd_FanDanceIII",label:{zh:"CD"}},cd_FAN_DANCE_IV:{name:"cd_FanDanceIV",label:{zh:"CD"}},cd_EN_AVANT:{name:"cd_EnAvant"},cd_DEVILMENT:{name:"cd_Devilment"},cd_SHIELD_SAMBA:{name:"cd_ShieldSamba"},cd_FLOURISH:{name:"cd_Flourish"},cd_IMPROVISATION:{name:"cd_Improvisation"},cd_IMPROVISED_FINISH:{name:"cd_ImprovisedFinish"},cd_CURING_WALTZ:{name:"cd_CuringWaltz"},cd_ENDING:{name:"cd_Ending"}}),SL=ie()({ESPRIT_GAUGE:{name:"EspritGauge",label:{zh:""}},FEATHER_GAUGE:{name:"Feathers",label:{zh:""}},STANDARD_DANCE:{name:"Standard Dance",label:{zh:""}},TECHNICAL_DANCE:{name:"Technical Dance",label:{zh:""}}}),UR=ie()({SILKEN_SYMMETRY:{name:"Silken Symmetry",label:{zh:""}},SILKEN_FLOW:{name:"Silken Flow",label:{zh:""}},FLOURISHING_SYMMETRY:{name:"Flourishing Symmetry",label:{zh:""}},FLOURISHING_FLOW:{name:"Flourishing Flow",label:{zh:""}},THREEFOLD_FAN_DANCE:{name:"Threefold Fan Dance",label:{zh:""}},FOURFOLD_FAN_DANCE:{name:"Fourfold Fan Dance",label:{zh:""}},FINISHING_MOVE_READY:{name:"Finishing Move Ready",label:{zh:""}},FLOURISHING_STARFALL:{name:"Flourishing Starfall",label:{zh:""}},STANDARD_STEP:{name:"Standard Step",label:{zh:""},mayNotBeCanceled:!0},TECHNICAL_STEP:{name:"Technical Step",label:{zh:""},mayNotBeCanceled:!0},LAST_DANCE_READY:{name:"Last Dance Ready",label:{zh:""}},DANCE_OF_THE_DAWN_READY:{name:"Dance of the Dawn Ready",label:{zh:""}},FLOURISHING_FINISH:{name:"Flourishing Finish",label:{zh:""}},SHIELD_SAMBA:{name:"Shield Samba",label:{zh:""}},IMPROVISATION:{name:"Improvisation",label:{zh:""},mayNotBeCanceled:!0},RISING_RHYTHM:{name:"Rising Rhythm",label:{zh:""},maximumStacks:4},IMPROVISATION_REGEN:{name:"Improvisation Regen",label:{zh:""}},IMPROVISED_FINISH:{name:"Improvised Finish",label:{zh:""}},DEVILMENT:{name:"Devilment",label:{zh:""}},TECHNICAL_FINISH:{name:"Technical Finish",label:{zh:""}},ESPRIT:{name:"Esprit",label:{zh:""},mayNotBeCanceled:!0},STANDARD_FINISH:{name:"Standard Finish",label:{zh:""}},CLOSED_POSITION:{name:"Closed Position",label:{zh:""},mayNotBeCanceled:!0},DANCE_PARTNER:{name:"Dance Partner",label:{zh:""}},STANDARD_FINISH_PARTNER:{name:"Standard Finish Partner",label:{zh:"buff"}},ESPRIT_PARTNER:{name:"Esprit Partner",label:{zh:"buff"}},ESPRIT_TECHNICAL:{name:"Esprit Technical",label:{zh:"buff"}}}),IL=ie()({CASCADE_COMBO:{name:"CascadeCombo",label:{zh:""}},WINDMILL_COMBO:{name:"WindmillCombo",label:{zh:""}},STANDARD_BONUS:{name:"StandardBonus",label:{zh:""}},TECHNICAL_BONUS:{name:"TechnicalBonus",label:{zh:""}}}),_L=ie()({ESPRIT:{name:"Esprit",level:76},ENHANCED_EN_AVANT_II:{name:"Enhanced En Avant II",level:78},ENHANCED_TECHNICAL_FINISH:{name:"Enhanced Technical Finish",level:82},ENHANCED_ESPRIT:{name:"Enhanced Esprit",level:84},ENHANCED_FLOURISH:{name:"Enhanced Flourish",level:86},ENHANCED_SHIELD_SAMBA:{name:"Enhanced Shield Samba",level:88},ENHANCED_DEVILMENT:{name:"Enhanced Devilment",level:90},ENHANCED_STANDARD_FINISH:{name:"Enhanced Standard Finish",level:92},DYNAMIC_DANCER:{name:"Dynamic Dancer",level:94},ENHANCED_FLOURISH_II:{name:"Enhanced Flourish II",level:96},ENHANCED_TECHNICAL_FINISH_II:{name:"Enhanced Technical Finish II",level:100}}),gL={...SL,...UR,...IL},pL=ie()({PIERCING_TALON:{id:90,name:"Piercing Talon"},TRUE_THRUST:{id:75,name:"True Thrust"},RAIDEN_THRUST:{id:16479,name:"Raiden Thrust"},DISEMBOWEL:{id:87,name:"Disembowel"},SPIRAL_BLOW:{id:36955,name:"Spiral Blow"},CHAOS_THRUST:{id:88,name:"Chaos Thrust"},CHAOTIC_SPRING:{id:25772,name:"Chaotic Spring"},WHEELING_THRUST:{id:3556,name:"Wheeling Thrust"},VORPAL_THRUST:{id:78,name:"Vorpal Thrust"},LANCE_BARRAGE:{id:36954,name:"Lance Barrage"},FULL_THRUST:{id:84,name:"Full Thrust"},HEAVENS_THRUST:{id:25771,name:"Heavens' Thrust"},FANG_AND_CLAW:{id:3554,name:"Fang and Claw"},DRAKESBANE:{id:36952,name:"Drakesbane"},DOOM_SPIKE:{id:86,name:"Doom Spike"},DRACONIAN_FURY:{id:25770,name:"Draconian Fury"},SONIC_THRUST:{id:7397,name:"Sonic Thrust"},COERTHAN_TORMENT:{id:16477,name:"Coerthan Torment"},LIFE_SURGE:{id:83,name:"Life Surge"},LANCE_CHARGE:{id:85,name:"Lance Charge"},JUMP:{id:92,name:"Jump"},HIGH_JUMP:{id:16478,name:"High Jump"},MIRAGE_DIVE:{id:7339,name:"Mirage Dive"},DRAGONFIRE_DIVE:{id:96,name:"Dragonfire Dive"},RISE_OF_THE_DRAGON:{id:36953,name:"Rise of the Dragon"},BATTLE_LITANY:{id:3557,name:"Battle Litany"},WYRMWIND_THRUST:{id:25773,name:"Wyrmwind Thrust"},GEIRSKOGUL:{id:3555,name:"Geirskogul"},NASTROND:{id:7400,name:"Nastrond"},STARDIVER:{id:16480,name:"Stardiver"},STARCROSS:{id:36956,name:"Starcross"},ELUSIVE_JUMP:{id:94,name:"Elusive Jump"},WINGED_GLIDE:{id:36951,name:"Winged Glide"}}),NL=ie()({cd_LIFE_SURGE:{name:"cd_LifeSurge"},cd_LANCE_CHARGE:{name:"cd_LanceCharge"},cd_JUMP:{name:"cd_Jump"},cd_HIGH_JUMP:{name:"cd_HighJump"},cd_ELUSIVE_JUMP:{name:"cd_ElusiveJump"},cd_WINGED_GLIDE:{name:"cd_WingedGlide"},cd_DRAGONFIRE_DIVE:{name:"cd_DragonfireDive"},cd_BATTLE_LITANY:{name:"cd_BattleLitany"},cd_GEIRSKOGUL:{name:"cd_Geirskogul"},cd_MIRAGE_DIVE:{name:"cd_MirageDive"},cd_NASTROND:{name:"cd_Nastrond"},cd_STARDIVER:{name:"cd_Stardiver"},cd_WYRMWIND_THRUST:{name:"cd_WyrmwindThrust"},cd_RISE_OF_THE_DRAGON:{name:"cd_RiseOfTheDragon"},cd_STARCROSS:{name:"cd_Starcross"}}),CL=ie()({LIFE_OF_THE_DRAGON:{name:"Life of the Dragon"},FIRSTMINDS_FOCUS:{name:"Firstminds' Focus"}}),PR=ie()({LIFE_SURGE:{name:"Life Surge"},ENHANCED_PIERCING_TALON:{name:"Enhanced Piercing Talon"},POWER_SURGE:{name:"Power Surge"},LANCE_CHARGE:{name:"Lance Charge"},DIVE_READY:{name:"Dive Ready"},CHAOS_THRUST_DOT:{name:"Chaos Thrust DoT"},CHAOTIC_SPRING_DOT:{name:"Chaotic Spring DoT"},DRAGONS_FLIGHT:{name:"Dragon's Flight"},BATTLE_LITANY:{name:"Battle Litany"},NASTROND_READY:{name:"Nastrond Ready"},DRACONIAN_FIRE:{name:"Draconian Fire"},STARCROSS_READY:{name:"Starcross Ready"}}),bL=ie()({DRG_CHAOS_COMBO_TRACKER:{name:"DRG Chaos Combo"},DRG_HEAVENS_COMBO_TRACKER:{name:"DRG Heavens Combo"},DRG_AOE_COMBO_TRACKER:{name:"DRG AOE Combo"}}),OL=ie()({JUMP_MASTERY:{name:"Jump Mastery",level:74},LANCE_MASTERY:{name:"Lance Mastery",level:76},ENHANCED_COERTHAN_TORMENT:{name:"Enhanced Coerthan Torment",level:82},ENHANCED_WINGED_GLIDE:{name:"Enhanced Winged Glide",level:84},LANCE_MASTERY_II:{name:"Lance Mastery II",level:86},ENHANCED_LIFE_SURGE:{name:"Enhanced Life Surge",level:88},LANCE_MASTERY_III:{name:"Lance Mastery III",level:90},ENHANCED_DRAGONFIRE_DIVE:{name:"Enhanced Dragonfire Dive",level:92},MELEE_MASTERY_DRG:{name:"Melee Mastery DRG",level:94},LANCE_MASTERY_IV:{name:"Lance Mastery IV",level:96},ENHANCED_STARDIVER:{name:"Enhanced Stardiver",level:100}}),DL={...CL,...PR,...bL},yL=ie()({HARD_SLASH:{id:3617,name:"Hard Slash",label:{zh:""}},SYPHON_STRIKE:{id:3623,name:"Syphon Strike",label:{zh:""}},UNLEASH:{id:3621,name:"Unleash",label:{zh:""}},GRIT:{id:3629,name:"Grit",label:{zh:""}},RELEASE_GRIT:{id:32067,name:"Release Grit",label:{zh:""}},UNMEND:{id:3624,name:"Unmend",label:{zh:""}},SOULEATER:{id:3632,name:"Souleater",label:{zh:""}},FLOOD_OF_DARKNESS:{name:"Flood of Darkness",label:{zh:""}},BLOOD_WEAPON:{id:3625,name:"Blood Weapon",label:{zh:""}},SHADOW_WALL:{id:3636,name:"Shadow Wall",label:{zh:""}},STALWART_SOUL:{id:16468,name:"Stalwart Soul",label:{zh:""}},EDGE_OF_DARKNESS:{name:"Edge of Darkness",label:{zh:""}},DARK_MIND:{id:3634,name:"Dark Mind",label:{zh:""}},LIVING_DEAD:{id:3638,name:"Living Dead",label:{zh:""}},SALTED_EARTH:{id:3639,name:"Salted Earth",label:{zh:""}},SHADOWSTRIDE:{id:36926,name:"Shadowstride",label:{zh:""}},ABYSSAL_DRAIN:{id:3641,name:"Abyssal Drain",label:{zh:""}},CARVE_AND_SPIT:{id:3643,name:"Carve and Spit",label:{zh:""}},BLOODSPILLER:{id:7392,name:"Bloodspiller",label:{zh:""}},QUIETUS:{id:7391,name:"Quietus",label:{zh:""}},DARK_MISSIONARY:{id:16471,name:"Dark Missionary",label:{zh:""}},DELIRIUM:{id:7390,name:"Delirium",label:{zh:""}},THE_BLACKEST_NIGHT:{id:7393,name:"The Blackest Night",label:{zh:""}},THE_BLACKEST_NIGHT_POP:{name:"Pop The Blackest Night",label:{zh:""}},FLOOD_OF_SHADOW:{id:16469,name:"Flood of Shadow",label:{zh:""}},EDGE_OF_SHADOW:{id:16470,name:"Edge of Shadow",label:{zh:""}},LIVING_SHADOW:{id:16472,name:"Living Shadow",label:{zh:""}},OBLATION:{id:25754,name:"Oblation",label:{zh:""}},SALT_AND_DARKNESS:{id:25755,name:"Salt and Darkness",label:{zh:""}},SHADOWBRINGER:{id:25757,name:"Shadowbringer",label:{zh:""}},SHADOWED_VIGIL:{id:36927,name:"Shadowed Vigil",label:{zh:""}},SCARLET_DELIRIUM:{id:36928,name:"Scarlet Delirium",label:{zh:""}},COMEUPPANCE:{id:36929,name:"Comeuppance",label:{zh:""}},TORCLEAVER:{id:36930,name:"Torcleaver",label:{zh:""}},IMPALEMENT:{id:36931,name:"Impalement",label:{zh:""}},DISESTEEM:{id:36932,name:"Disesteem",label:{zh:""}},ABYSSAL_DRAIN_PET:{id:17904,name:"Abyssal Drain (Esteem)",label:{zh:""}},SHADOWSTRIDE_PET:{id:38512,name:"Shadowstride (Esteem)",label:{zh:""}},SHADOWBRINGER_PET:{id:25881,name:"Shadowbringer (Esteem)",label:{zh:""}},EDGE_OF_SHADOW_PET:{id:17908,name:"Edge of Shadow (Esteem)",label:{zh:""}},FLOOD_OF_SHADOW_PET:{name:"Flood of Shadow (Esteem)",label:{zh:""}},BLOODSPILLER_PET:{id:17909,name:"Bloodspiller (Esteem)",label:{zh:""}},CARVE_AND_SPIT_PET:{name:"Carve and Spit (Esteem)",label:{zh:""}},DISESTEEM_PET:{id:36933,name:"Disesteem (Esteem)",label:{zh:""}}}),vL=ie()({cd_GRIT:{name:"cd_Grit"},cd_RELEASE_GRIT:{name:"cd_ReleaseGrit"},cd_FLOOD_OF_DARKNESS:{name:"cd_FloodOfDarkness"},cd_SHADOW_WALL:{name:"cd_ShadowWall"},cd_DARK_MIND:{name:"cd_DarkMind"},cd_LIVING_DEAD:{name:"cd_LivingDead"},cd_SALTED_EARTH:{name:"cd_SaltedEarth"},cd_SHADOWSTRIDE:{name:"cd_Shadowstride"},cd_ABYSSAL_DRAIN:{name:"cd_AbyssalDrain"},cd_DARK_MISSIONARY:{name:"cd_DarkMissionary"},cd_DELIRIUM:{name:"cd_Delirium"},cd_THE_BLACKEST_NIGHT:{name:"cd_TheBlackestNight"},cd_THE_BLACKEST_NIGHT_POP:{name:"cd_TheBlackestNightPop"},cd_LIVING_SHADOW:{name:"cd_LivingShadow"},cd_OBLATION:{name:"cd_Oblation"},cd_SALT_AND_DARKNESS:{name:"cd_SaltAndDarkness"},cd_SHADOWBRINGER:{name:"cd_Shadowbringer"},cd_POP_TBN:{name:"cd_PopTBN"}}),ML=ie()({DARKSIDE:{name:"Darkside",label:{zh:""}},BLOOD_GAUGE:{name:"Blood Gauge",label:{zh:""}}}),wR=ie()({SALTED_EARTH:{name:"Salted Earth",mayBeToggled:!0,label:{zh:""}},GRIT:{name:"Grit",label:{zh:""}},SHADOW_WALL:{name:"Shadow Wall",label:{zh:""}},DARK_MIND:{name:"Dark Mind",label:{zh:""}},LIVING_DEAD:{name:"Living Dead",label:{zh:""}},WALKING_DEAD:{name:"Walking Dead",label:{zh:""}},UNDEAD_REBIRTH:{name:"Undead Rebirth",label:{zh:""}},DARK_MISSIONARY:{name:"Dark Missionary",label:{zh:""}},DELIRIUM:{name:"Delirium",maximumStacks:3,label:{zh:""}},BLOOD_WEAPON:{name:"Blood Weapon",maximumStacks:3,label:{zh:""}},BLACKEST_NIGHT:{name:"Blackest Night",label:{zh:""}},SCORN:{name:"Scorn",label:{zh:""}},OBLATION:{name:"Oblation",label:{zh:""}},SHADOWED_VIGIL:{name:"Shadowed Vigil",label:{zh:""}},VIGILANT:{name:"Vigilant",label:{zh:""}}}),LL=ie()({DRK_COMBO_TRACKER:{name:"DRK Combo",label:{zh:""}},DRK_AOE_COMBO_TRACKER:{name:"DRK AOE Combo",label:{zh:"AOE"}},DRK_DELIRIUM_COMBO_TRACKER:{name:"DRK Delirium Combo",label:{zh:""}},DARK_ARTS:{name:"Dark Arts",label:{zh:""}},ESTEEM_TRACKER:{name:"Esteem Attacks",label:{zh:""}}}),xL=ie()({DAKRSIDE_MASTERY:{name:"Darkside Mastery",level:74},ENHANCED_UNMEND:{name:"Enhanced Unmend",level:84},ENHANCED_LIVING_SHADOW:{name:"Enhanced Living Shadow",level:88},ENHANCED_LIVING_SHADOW_II:{name:"Enhanced Living Shadow II",level:90},SHADOW_WALL_MASTERY:{name:"Shadow Wall Mastery",level:92},ENHANCED_DELIRIUM:{name:"Enhanced Delirium",level:96},ENHANCED_LIVING_SHADOW_III:{name:"Enhanced Living Shadow III",level:100}}),HL={...ML,...wR,...LL},kL=ie()({LIGHTNING_SHOT:{id:16143,name:"Lightning Shot",label:{zh:""}},KEEN_EDGE:{id:16137,name:"Keen Edge",label:{zh:""}},BRUTAL_SHELL:{id:16139,name:"Brutal Shell",label:{zh:""}},SOLID_BARREL:{id:16145,name:"Solid Barrel",label:{zh:""}},DEMON_SLICE:{id:16141,name:"Demon Slice",label:{zh:""}},DEMON_SLAUGHTER:{id:16149,name:"Demon Slaughter",label:{zh:""}},BURST_STRIKE:{id:16162,name:"Burst Strike",label:{zh:""}},FATED_CIRCLE:{id:16163,name:"Fated Circle",label:{zh:""}},BLOODFEST:{id:16164,name:"Bloodfest",label:{zh:""}},NO_MERCY:{id:16138,name:"No Mercy",label:{zh:""}},SONIC_BREAK:{id:16153,name:"Sonic Break",label:{zh:""}},GNASHING_FANG:{id:16146,name:"Gnashing Fang",label:{zh:""}},SAVAGE_CLAW:{id:16147,name:"Savage Claw",label:{zh:""}},WICKED_TALON:{id:16150,name:"Wicked Talon",label:{zh:""}},DOUBLE_DOWN:{id:25760,name:"Double Down",label:{zh:""}},REIGN_OF_BEASTS:{id:36937,name:"Reign of Beasts",label:{zh:""}},NOBLE_BLOOD:{id:36938,name:"Noble Blood",label:{zh:""}},LION_HEART:{id:36939,name:"Lion Heart",label:{zh:""}},CONTINUATION:{id:16155,name:"Continuation",label:{zh:""}},HYPERVELOCITY:{id:25759,name:"Hypervelocity",label:{zh:""}},FATED_BRAND:{id:36936,name:"Fated Brand",label:{zh:""}},JUGULAR_RIP:{id:16156,name:"Jugular Rip",label:{zh:""}},ABDOMEN_TEAR:{id:16157,name:"Abdomen Tear",label:{zh:""}},EYE_GOUGE:{id:16158,name:"Eye Gouge",label:{zh:""}},DANGER_ZONE:{id:16144,name:"Danger Zone",label:{zh:""}},BLASTING_ZONE:{id:16165,name:"Blasting Zone",label:{zh:""}},BOW_SHOCK:{id:16159,name:"Bow Shock",label:{zh:""}},TRAJECTORY:{id:36934,name:"Trajectory",label:{zh:""}},HEART_OF_STONE:{id:16161,name:"Heart of Stone",label:{zh:""}},HEART_OF_CORUNDUM:{id:25758,name:"Heart of Corundum",label:{zh:""}},SUPERBOLIDE:{id:16152,name:"Superbolide",label:{zh:""}},CAMOUFLAGE:{id:16140,name:"Camouflage",label:{zh:""}},NEBULA:{id:16148,name:"Nebula",label:{zh:""}},GREAT_NEBULA:{id:36935,name:"Great Nebula",label:{zh:""}},HEART_OF_LIGHT:{id:16160,name:"Heart of Light",label:{zh:""}},AURORA:{id:16151,name:"Aurora",label:{zh:""}},ROYAL_GUARD:{id:16142,name:"Royal Guard",label:{zh:""}},RELEASE_ROYAL_GUARD:{id:32068,name:"Release Royal Guard",label:{zh:""}}}),UL=ie()({cd_NO_MERCY:{name:"cd_NoMercy"},cd_BLOODFEST:{name:"cd_Bloodfest"},cd_CAMOUFLAGE:{name:"cd_Camouflage"},cd_ROYAL_GUARD:{name:"cd_RoyalGuard"},cd_RELEASE_ROYAL_GUARD:{name:"cd_ReleaseRoyalGuard"},cd_DANGER_ZONE:{name:"cd_DangerZone"},cd_BLASTING_ZONE:{name:"cd_BlastingZone"},cd_NEBULA:{name:"cd_Nebula"},cd_GREAT_NEBULA:{name:"cd_GreatNebula"},cd_AURORA:{name:"cd_Aurora"},cd_SUPERBOLIDE:{name:"cd_Superbolide"},cd_TRAJECTORY:{name:"cd_Trajectory"},cd_GNASHING_FANG:{name:"cd_GnashingFang"},cd_BOW_SHOCK:{name:"cd_BowShock"},cd_HEART_OF_LIGHT:{name:"cd_HeartOfLight"},cd_HEART_OF_STONE:{name:"cd_HeartOfStone"},cd_HEART_OF_CORUNDUM:{name:"cd_HeartOfCorundum"},cd_DOUBLE_DOWN:{name:"cd_DoubleDown"},cd_CONTINUATION:{name:"cd_Continuation"},cd_HYPERVELOCITY:{name:"cd_Hypervelocity"},cd_FATED_BRAND:{name:"cd_FatedBrand"},cd_JUGULAR_RIP:{name:"cd_JugularRip"},cd_ABDOMEN_TEAR:{name:"cd_AbdomenTear"},cd_EYE_GOUGE:{name:"cd_EyeGouge"}}),PL=ie()({POWDER_GAUGE:{name:"Powder Gauge",label:{zh:""}}}),GR=ie()({NO_MERCY:{name:"No Mercy",label:{zh:""}},AURORA:{name:"Aurora",label:{zh:""}},BOW_SHOCK_DOT:{name:"Bow Shock DoT",label:{zh:""}},CAMOUFLAGE:{name:"Camouflage",label:{zh:""}},HEART_OF_CORUNDUM:{name:"Heart of Corundum",label:{zh:""}},CLARITY_OF_CORUNDUM:{name:"Clarity of Corundum",label:{zh:""}},CATHARSIS_OF_CORUNDUM:{name:"Catharsis of Corundum",label:{zh:""}},NEBULA:{name:"Nebula",label:{zh:""}},GREAT_NEBULA:{name:"Great Nebula",label:{zh:""}},HEART_OF_LIGHT:{name:"Heart of Light",label:{zh:""}},HEART_OF_STONE:{name:"Heart of Stone",label:{zh:""}},READY_TO_BLAST:{name:"Ready to Blast",label:{zh:""}},READY_TO_BREAK:{name:"Ready to Break",label:{zh:""}},READY_TO_GOUGE:{name:"Ready to Gouge",label:{zh:""}},READY_TO_RAZE:{name:"Ready to Raze",label:{zh:""}},READY_TO_REIGN:{name:"Ready to Reign",label:{zh:""}},READY_TO_RIP:{name:"Ready to Rip",label:{zh:""}},READY_TO_TEAR:{name:"Ready to Tear",label:{zh:""}},ROYAL_GUARD:{name:"Royal Guard",label:{zh:""}},SONIC_BREAK_DOT:{name:"Sonic Break DoT",label:{zh:""}},SUPERBOLIDE:{name:"Superbolide",label:{zh:""}},BRUTAL_SHELL:{name:"Brutal Shell",label:{zh:""}},BLOODFEST:{name:"Bloodfest",label:{zh:""}}}),wL=ie()({GNB_COMBO_TRACKER:{name:"GNB Combo",label:{zh:""}},GNB_AOE_COMBO_TRACKER:{name:"GNB AOE Combo",label:{zh:"AOE"}},GNB_GNASHING_COMBO_TRACKER:{name:"GNB Gnashing Combo",label:{zh:""}},GNB_REIGN_COMBO_TRACKER:{name:"GNB Reign Combo",label:{zh:""}}}),GL=ie()({DANGER_ZONE_MASTERY:{name:"Danger Zone Mastery",level:80},HEART_OF_STONE_MASTERY:{name:"Heart Of Stone Mastery",level:82},ENHANCED_AURORA:{name:"Enhanced Aurora",level:84},ENHANCED_CONTINUATION:{name:"Enhanced Continuation",level:86},CARTRIDGE_CHARGE_II:{name:"Cartridge Charge II",level:88},NEBULA_MASTERY:{name:"Nebula Mastery",level:92},ENHANCED_CONTINUATION_II:{name:"Enhanced Continuation II",level:96},ENHANCED_BLOODFEST:{name:"Enhanced Bloodfest",level:100}}),BL={...PL,...GR,...wL},FL=ie()({HEATED_SPLIT_SHOT:{id:7411,name:"Heated Split Shot",label:{zh:""}},HEATED_SLUG_SHOT:{id:7412,name:"Heated Slug Shot",label:{zh:""}},HEATED_CLEAN_SHOT:{id:7413,name:"Heated Clean Shot",label:{zh:""}},DRILL:{id:16498,name:"Drill",label:{zh:""}},HOT_SHOT:{id:2872,name:"Hot Shot",label:{zh:""}},AIR_ANCHOR:{id:16500,name:"Air Anchor",label:{zh:""}},CHAIN_SAW:{id:25788,name:"Chain Saw",label:{zh:""}},EXCAVATOR:{id:36981,name:"Excavator",label:{zh:""}},GAUSS_ROUND:{id:2874,name:"Gauss Round",label:{zh:""}},DOUBLE_CHECK:{id:36979,name:"Double Check",label:{zh:""}},RICOCHET:{id:2890,name:"Ricochet",label:{zh:""}},CHECKMATE:{id:36980,name:"Checkmate",label:{zh:""}},BLAZING_SHOT:{id:36978,name:"Blazing Shot",label:{zh:""}},WILDFIRE:{id:2878,name:"Wildfire",label:{zh:""}},DETONATOR:{id:16766,name:"Detonator",label:{zh:""}},HYPERCHARGE:{id:17209,name:"Hypercharge",label:{zh:""}},ROOK_AUTOTURRET:{id:2864,name:"Rook Autoturret",label:{zh:""}},ROOK_OVERDRIVE:{id:7415,name:"Rook Overdrive",label:{zh:""}},AUTOMATON_QUEEN:{id:16501,name:"Automaton Queen",label:{zh:""}},QUEEN_OVERDRIVE:{id:16502,name:"Queen Overdrive",label:{zh:""}},BARREL_STABILIZER:{id:7414,name:"Barrel Stabilizer",label:{zh:""}},REASSEMBLE:{id:2876,name:"Reassemble",label:{zh:""}},FULL_METAL_FIELD:{id:36982,name:"Full Metal Field",label:{zh:""}},SPREAD_SHOT:{id:2870,name:"Spread Shot",label:{zh:""}},SCATTERGUN:{id:25786,name:"Scattergun",label:{zh:""}},AUTO_CROSSBOW:{id:16497,name:"Auto Crossbow",label:{zh:""}},BIOBLASTER:{id:16499,name:"Bioblaster",label:{zh:""}},FLAMETHROWER:{id:7418,name:"Flamethrower",label:{zh:""}},DISMANTLE:{id:2887,name:"Dismantle",label:{zh:""}},TACTICIAN:{id:16889,name:"Tactician",label:{zh:""}},VOLLEY_FIRE:{id:2891,name:"Volley Fire",label:{zh:""}},ARM_PUNCH:{id:16504,name:"Arm Punch",label:{zh:""}},ROOK_OVERLOAD:{id:7416,name:"Rook Overload",label:{zh:""}},PILE_BUNKER:{id:16503,name:"Pile Bunker",label:{zh:""}},CROWNED_COLLIDER:{id:25787,name:"Crowned Collider",label:{zh:""}}}),jL=ie()({cd_REASSEMBLE:{name:"cd_Reassemble"},cd_DRILL:{name:"cd_Drill"},cd_CHECKMATE:{name:"cd_Checkmate"},cd_DOUBLE_CHECK:{name:"cd_DoubleCheck"},cd_AIR_ANCHOR:{name:"cd_AirAnchor"},cd_CHAINSAW:{name:"cd_Chainsaw",label:{zh:"CD"}},cd_BARREL_STABILIZER:{name:"cd_BarrelStabilizer"},cd_WILDFIRE:{name:"cd_Wildfire"},cd_QUEEN:{name:"cd_Queen",label:{zh:"CD"}},cd_OVERDRIVE:{name:"cd_Overdrive",label:{zh:"CD/"}},cd_DISMANTLE:{name:"cd_Dismantle"},cd_TACTICIAN:{name:"cd_Tactician"},cd_HYPERCHARGE:{name:"cd_Hypercharge"},cd_DETONATOR:{name:"cd_Detonator"},cd_FLAMETHROWER:{name:"cd_Flamethrower"}}),zL=ie()({HEAT_GAUGE:{name:"Heat",label:{zh:""}},BATTERY_GAUGE:{name:"Battery",label:{zh:""}}}),BR=ie()({REASSEMBLED:{name:"Reassembled",label:{zh:""}},OVERHEATED:{name:"Overheated",label:{zh:""},maximumStacks:5},WILDFIRE:{name:"Wildfire",label:{zh:""}},WILDFIRE_SELF:{name:"Wildfire Self",label:{zh:""}},FLAMETHROWER:{name:"Flamethrower",label:{zh:""}},BIOBLASTER:{name:"Bioblaster",label:{zh:"dot"}},TACTICIAN:{name:"Tactician",label:{zh:"buff"}},HYPERCHARGED:{name:"Hypercharged",label:{zh:""}},EXCAVATOR_READY:{name:"Excavator Ready",label:{zh:""}},FULL_METAL_MACHINIST:{name:"Full Metal Machinist",label:{zh:""}}}),YL=ie()({HEAT_COMBO:{name:"Heat Combo",label:{zh:""}},QUEEN:{name:"Queen",label:{zh:""}},QUEEN_PUNCHES:{name:"QueenPunches",label:{zh:""}},QUEEN_FINISHERS:{name:"QueenFinishers",label:{zh:""}},BATTERY_BONUS:{name:"BatteryBonus",label:{zh:""}},WILDFIRE_HITS:{name:"WildfireHits",label:{zh:""}}}),KL=ie()({CHARGED_ACTION_MASTERY:{name:"Charged Action Mastery",level:74},HOT_SHOT_MASTERY:{name:"Hot Shot Mastery",level:76},ENHANCED_WILD_FIRE:{name:"Enhanced Wildfire",level:88},PROMOTION:{name:"Promotion",level:80},SPREAD_SHOT_MASTERY:{name:"Spread Shot Mastery",level:82},ENHANCED_REASSEMBLE:{name:"Enhanced Reassemble",level:84},MARKSMANS_MASTERY:{name:"Marksman's Mastery",level:84},QUEENS_GAMBIT:{name:"Queen's Gambit",level:86},ENHANCED_TACTICIAN:{name:"Enhanced Tactician",level:88},DOUBLE_BARREL_MASTERY:{name:"Double-Barrel Mastery",level:92},ENHANCED_MULTI_WEAPON:{name:"Enhanced Multiweapon",level:94},MARKSMANS_MASTERY_II:{name:"Marksman's Mastery II",level:94},ENHANCED_MULTI_WEAPON_II:{name:"Enhanced Multiweapon II",level:96},ENHANCED_BARREL_STABILIZER:{name:"Enhanced Barrel Stabilizer",level:100}}),VL={...zL,...BR,...YL},WL=ie()({BOOTSHINE:{id:53,name:"Bootshine",label:{zh:"",ja:""}},TRUE_STRIKE:{id:54,name:"True Strike",label:{zh:"",ja:""}},SNAP_PUNCH:{id:56,name:"Snap Punch",label:{zh:"",ja:""}},TWIN_SNAKES:{id:61,name:"Twin Snakes",label:{zh:"",ja:""}},ARM_OF_THE_DESTROYER:{id:62,name:"Arm of the Destroyer",label:{zh:"",ja:""}},DEMOLISH:{id:66,name:"Demolish",label:{zh:"",ja:""}},ROCKBREAKER:{id:70,name:"Rockbreaker",label:{zh:"",ja:""}},THUNDERCLAP:{id:25762,name:"Thunderclap",label:{zh:"",ja:""}},HOWLING_FIST:{id:25763,name:"Howling Fist",label:{zh:"",ja:""}},MANTRA:{id:65,name:"Mantra",label:{zh:"",ja:""}},FOUR_POINT_FURY:{id:16473,name:"Four-point Fury",label:{zh:"",ja:""}},DRAGON_KICK:{id:74,name:"Dragon Kick",label:{zh:"",ja:""}},PERFECT_BALANCE:{id:69,name:"Perfect Balance",label:{zh:"",ja:""}},FORM_SHIFT:{id:4262,name:"Form Shift",label:{zh:"",ja:""}},FORBIDDEN_MEDITATION:{id:36942,name:"Forbidden Meditation",label:{zh:"",ja:""}},THE_FORBIDDEN_CHAKRA:{id:3547,name:"The Forbidden Chakra",label:{zh:"",ja:""}},MASTERFUL_BLITZ:{id:25764,name:"Masterful Blitz",label:{zh:"",ja:""}},TORNADO_KICK:{id:3543,name:"Tornado Kick",label:{zh:"",ja:""}},ELIXIR_FIELD:{id:3545,name:"Elixir Field",label:{zh:"",ja:""}},CELESTIAL_REVOLUTION:{id:25765,name:"Celestial Revolution",label:{zh:"",ja:""}},FLINT_STRIKE:{id:25882,name:"Flint Strike",label:{zh:"",ja:""}},RIDDLE_OF_EARTH:{id:7394,name:"Riddle of Earth",label:{zh:"",ja:""}},EARTHS_REPLY:{id:36944,name:"Earth's Reply",label:{zh:"",ja:""}},RIDDLE_OF_FIRE:{id:7395,name:"Riddle of Fire",label:{zh:"",ja:""}},BROTHERHOOD:{id:7396,name:"Brotherhood",label:{zh:"",ja:""}},RIDDLE_OF_WIND:{id:25766,name:"Riddle of Wind",label:{zh:"",ja:""}},INSPIRITED_MEDITATION:{id:36941,name:"Inspirited Meditation",label:{zh:"",ja:""}},ENLIGHTENED_MEDITATION:{id:36943,name:"Enlightened Meditation",label:{zh:"",ja:""}},ENLIGHTENMENT:{id:16474,name:"Enlightenment",label:{zh:"",ja:""}},SIX_SIDED_STAR:{id:16476,name:"Six-sided Star",label:{zh:"",ja:""}},SHADOW_OF_THE_DESTROYER:{id:25767,name:"Shadow of the Destroyer",label:{zh:"",ja:""}},RISING_PHOENIX:{id:25768,name:"Rising Phoenix",label:{zh:"",ja:""}},PHANTOM_RUSH:{id:25769,name:"Phantom Rush",label:{zh:"",ja:""}},LEAPING_OPO:{id:36945,name:"Leaping Opo",label:{zh:"",ja:""}},RISING_RAPTOR:{id:36946,name:"Rising Raptor",label:{zh:"",ja:""}},POUNCING_COEURL:{id:36947,name:"Pouncing Coeurl",label:{zh:"",ja:""}},ELIXIR_BURST:{id:36948,name:"Elixir Burst",label:{zh:"",ja:""}},WINDS_REPLY:{id:36949,name:"Wind's Reply",label:{zh:"",ja:""}},FIRES_REPLY:{id:36950,name:"Fire's Reply",label:{zh:"",ja:""}}}),XL=ie()({cd_THUNDERCLAP:{name:"cd_Thunderclap"},cd_MANTRA:{name:"cd_Mantra"},cd_PERFECT_BALANCE:{name:"cd_PerfectBalance"},cd_ENLIGHTENMENT:{name:"cd_Enlightenment"},cd_THE_FORBIDDEN_CHAKRA:{name:"cd_TheForbiddenChakra"},cd_RIDDLE_OF_EARTH:{name:"cd_RiddleOfEarth"},cd_EARTHS_REPLY:{name:"cd_EarthsReply"},cd_RIDDLE_OF_FIRE:{name:"cd_RiddleOfFire"},cd_BROTHERHOOD:{name:"cd_Brotherhood"},cd_RIDDLE_OF_WIND:{name:"cd_RiddleOfWind"}}),qL=ie()({CHAKRA:{name:"Chakra",label:{zh:""}},BEAST_CHAKRA:{name:"Beast Chakra",label:{zh:""}},BEAST_CHAKRA_TIMER:{name:"Beast Timer",label:{zh:""}},NADI:{name:"Nadi",label:{zh:"/"}},LUNAR_NADI:{name:"Lunar Nadi",label:{zh:""}},SOLAR_NADI:{name:"Solar Nadi",label:{zh:""}},OPO_OPOS_FURY:{name:"Opo-opo's Fury",label:{zh:""}},RAPTORS_FURY:{name:"Raptor's Fury",label:{zh:""}},COEURLS_FURY:{name:"Coeurl's Fury",label:{zh:""}}}),FR=ie()({MANTRA:{name:"Mantra",label:{zh:""}},OPO_OPO_FORM:{name:"Opo-opo Form",label:{zh:""}},RAPTOR_FORM:{name:"Raptor Form",label:{zh:""}},COEURL_FORM:{name:"Coeurl Form",label:{zh:""}},PERFECT_BALANCE:{name:"Perfect Balance",maximumStacks:3,label:{zh:""}},FORMLESS_FIST:{name:"Formless Fist",label:{zh:""}},RIDDLE_OF_EARTH:{name:"Riddle of Earth",label:{zh:""}},EARTHS_RESOLVE:{name:"Earth's Resolve",label:{zh:""}},EARTHS_RUMINATION:{name:"Earth's Rumination",label:{zh:""}},RIDDLE_OF_FIRE:{name:"Riddle of Fire",label:{zh:""}},FIRES_RUMINATION:{name:"Fire's Rumination",label:{zh:""}},BROTHERHOOD:{name:"Brotherhood",label:{zh:""}},MEDITATIVE_BROTHERHOOD:{name:"Meditative Brotherhood",label:{zh:""}},RIDDLE_OF_WIND:{name:"Riddle of Wind",label:{zh:""}},WINDS_RUMINATION:{name:"Wind's Rumination",label:{zh:""}},SIX_SIDED_STAR:{name:"Six-sided Star",label:{zh:""}}}),ZL=ie()({BEAST_CHAKRA_1:{name:"Beast Chakra 1",label:{zh:"1"}},BEAST_CHAKRA_2:{name:"Beast Chakra 2",label:{zh:"2"}},BEAST_CHAKRA_3:{name:"Beast Chakra 3",label:{zh:"3"}}}),QL=ie()({DEEP_MEDITATION_II:{name:"Deep Meditation II",level:74},HOWLING_FIST_MASTERY:{name:"Howling Fist Mastery",level:74},ENHANCED_GREASED_LIGHTNING_III:{name:"Enhanced Greased Lightning III",level:76},ARM_OF_THE_DESTROYER_MASTERY:{name:"Arm of the Destroyer Mastery",level:82},ENHANCED_THUNDERCLAP:{name:"Enhanced Thunderclap",level:84},MELEE_MASTERY_MNK:{name:"Melee Mastery MNK",level:84},FLINT_STRIKE_MASTERY:{name:"Flint Strike Mastery",level:86},ENHANCED_BROTHERHOOD:{name:"Enhanced Brotherhood",level:88},TORNADO_KICK_MASTERY:{name:"Tornado Kick Mastery",level:90},BEAST_CHAKRA_MASTERY:{name:"Beast Chakra Mastery",level:92},MELEE_MASTERY_II_MNK:{name:"Melee Mastery II MNK",level:94},ENHANCED_RIDDLE_OF_WIND:{name:"Enhanced Riddle of Wind",level:96},ENHANCED_RIDDLE_OF_FIRE:{name:"Enhanced Riddle of Fire",level:100}}),qN={...qL,...FR,...ZL},JL=ie()({SPINNING_EDGE:{id:2240,name:"Spinning Edge",label:{zh:""}},SHADE_SHIFT:{id:2241,name:"Shade Shift",label:{zh:""}},GUST_SLASH:{id:2242,name:"Gust Slash",label:{zh:""}},HIDE:{id:2245,name:"Hide",label:{zh:""}},THROWING_DAGGER:{id:2247,name:"Throwing Dagger",label:{zh:""}},TRICK_ATTACK:{id:2258,name:"Trick Attack",label:{zh:""}},AEOLIAN_EDGE:{id:2255,name:"Aeolian Edge",label:{zh:""}},TEN:{id:2259,name:"Ten",label:{zh:""}},NINJUTSU:{id:2260,name:"Ninjutsu",label:{zh:""}},CHI:{id:2261,name:"Chi",label:{zh:""}},DEATH_BLOSSOM:{id:2254,name:"Death Blossom",label:{zh:""}},SHUKUCHI:{id:2262,name:"Shukuchi",label:{zh:""}},JIN:{id:2263,name:"Jin",label:{zh:""}},KASSATSU:{id:2264,name:"Kassatsu",label:{zh:""}},HAKKE_MUJINSATSU:{id:16488,name:"Hakke Mujinsatsu",label:{zh:""}},ARMOR_CRUSH:{id:3563,name:"Armor Crush",label:{zh:""}},DREAM_WITHIN_A_DREAM:{id:3566,name:"Dream Within a Dream",label:{zh:""}},HELLFROG_MEDIUM:{id:7401,name:"Hellfrog Medium",label:{zh:""}},DOKUMORI:{id:36957,name:"Dokumori",label:{zh:""}},BHAVACAKRA:{id:7402,name:"Bhavacakra",label:{zh:""}},TEN_CHI_JIN:{id:7403,name:"Ten Chi Jin",label:{zh:""}},MEISUI:{id:16489,name:"Meisui",label:{zh:""}},BUNSHIN:{id:16493,name:"Bunshin",label:{zh:""}},PHANTOM_KAMAITACHI:{id:25774,name:"Phantom Kamaitachi",label:{zh:""}},FORKED_RAIJU:{id:25777,name:"Forked Raiju",label:{zh:""}},FLEETING_RAIJU:{id:25778,name:"Fleeting Raiju",label:{zh:""}},KUNAIS_BANE:{id:36958,name:"Kunai's Bane",label:{zh:""}},DEATHFROG_MEDIUM:{id:36959,name:"Deathfrog Medium",label:{zh:""}},ZESHO_MEPPO:{id:36960,name:"Zesho Meppo",label:{zh:""}},TENRI_JINDO:{id:36961,name:"Tenri Jindo",label:{zh:""}},KATON:{id:2266,name:"Katon",label:{zh:""}},RAITON:{id:2267,name:"Raiton",label:{zh:""}},HYOTON:{id:2268,name:"Hyoton",label:{zh:""}},HUTON:{id:2269,name:"Huton",label:{zh:""}},DOTON:{id:2270,name:"Doton",label:{zh:""}},SUITON:{id:2271,name:"Suiton",label:{zh:""}},GOKA_MEKKYAKU:{id:16491,name:"Goka Mekkyaku",label:{zh:""}},HYOSHO_RANRYU:{id:16492,name:"Hyosho Ranryu",label:{zh:""}},RABBIT_MEDIUM:{id:2272,name:"Rabbit Medium",label:{zh:""}},FUMA_SHURIKEN:{id:2265,name:"Fuma Shuriken",label:{zh:""}},FUMA_SHURIKEN_TEN:{id:18873,name:"Fuma Shuriken (Ten)",label:{zh:""}},FUMA_SHURIKEN_CHI:{id:18874,name:"Fuma Shuriken (Chi)",label:{zh:""}},FUMA_SHURIKEN_JIN:{id:18875,name:"Fuma Shuriken (Jin)",label:{zh:""}},KATON_TEN:{id:18876,name:"Katon (Ten)",label:{zh:""}},RAITON_CHI:{id:18877,name:"Raiton (Chi)",label:{zh:""}},HYOTON_JIN:{id:18878,name:"Hyoton (Jin)",label:{zh:""}},HUTON_TEN:{id:18879,name:"Huton (Ten)",label:{zh:""}},DOTON_CHI:{id:18880,name:"Doton (Chi)",label:{zh:""}},SUITON_JIN:{id:18881,name:"Suiton (Jin)",label:{zh:""}}}),$L=ie()({cd_MUDRA_HACK:{name:"cd_MudraHack"},cd_MUDRA:{name:"cd_Mudra"},cd_SHADE_SHIFT:{name:"cd_Shadeshift"},cd_HIDE:{name:"cd_Hide"},cd_TRICK_ATTACK:{name:"cd_TrickAttack"},cd_SHUKUCHI:{name:"cd_Shukuchi"},cd_KASSATSU:{name:"cd_Kassatsu"},cd_DREAM_WITHIN_A_DREAM:{name:"cd_DREAM_WITHIN_A_DREAM"},cd_DOKUMORI:{name:"cd_Dokumori"},cd_TEN_CHI_JIN:{name:"cd_TenChiJin"},cd_MEISUI:{name:"cd_Meisui"},cd_BUNSHIN:{name:"cd_Bunshin"},cd_BHAVACAKRA:{name:"cd_Bhavacakra"},cd_TENRI_JINDO:{name:"cd_TenriJindo"}}),e1=ie()({KAZEMATOI:{name:"Kazematoi",label:{zh:""}},NINKI:{name:"Ninki",label:{zh:""}}}),jR=ie()({MUDRA:{name:"Mudra",label:{zh:""}},SHADE_SHIFT:{name:"Shade Shift",label:{zh:""}},HIDDEN:{name:"Hidden",label:{zh:""}},TRICK_ATTACK:{name:"Trick Attack",label:{zh:""}},KASSATSU:{name:"Kassatsu",label:{zh:""}},DOKUMORI:{name:"Dokumori",label:{zh:""}},TENRI_JINDO_READY:{name:"Tenri Jindo Ready",label:{zh:""}},TEN_CHI_JIN:{name:"Ten Chi Jin",maximumStacks:3,label:{zh:""}},MEISUI:{name:"Meisui",label:{zh:""}},SHADOW_WALKER:{name:"Shadow Walker",label:{zh:""}},BUNSHIN:{name:"Bunshin",maximumStacks:5,label:{zh:""}},PHANTOM_KAMAITACHI_READY:{name:"Phantom Kamaitachi Ready",label:{zh:""}},RAIJU_READY:{name:"Raiju Ready",maximumStacks:3,label:{zh:""}},KUNAIS_BANE:{name:"Kunai's Bane",label:{zh:""}},HIGI:{name:"Higi",label:{zh:""}},DOTON:{name:"Doton",mayBeToggled:!0,label:{zh:""}}}),t1=ie()({NIN_COMBO_TRACKER:{name:"NIN Combo",label:{zh:""}},NIN_AOE_COMBO_TRACKER:{name:"NIN AOE Combo",label:{zh:"AOE"}},MUDRA_TRACKER:{name:"Mudra Tracker",label:{zh:""}},BUNNY:{name:"Bunny",label:{zh:""}}}),n1=ie()({ENHANCED_SHUKUCHI_II:{name:"Enhanced Shukuchi II",level:74},MELEE_MASTERY_NIN:{name:"Melee Mastery NIN",level:74},ENHANCED_KASSATSU:{name:"Enhanced Kassatsu",level:76},SHUKIHO_II:{name:"Shukiho II",level:78},SHUKIHO_III:{name:"Shukiho III",level:84},MELEE_MASTERY_II_NIN:{name:"Melee Mastery II NIN",level:84},ENHANCED_MEISUI:{name:"Enhanced Meisui",level:88},ENHANCED_RAITON:{name:"Enhanced Raiton",level:90},TRICK_ATTACK_MASTERY:{name:"Trick Attack Mastery",level:92},MELEE_MASTERY_III_NIN:{name:"Melee Mastery III NIN",level:94},ENHANCED_DOKUMORI:{name:"Enhanced Dokumori",level:96},ENHANCED_TEN_CHI_JIN:{name:"Enhanced Ten Chi Jin",level:100}}),a1={...e1,...jR,...t1},i1=ie()({FIRE_IN_RED:{id:34650,name:"Fire in Red",label:{zh:"",ja:""}},AERO_IN_GREEN:{id:34651,name:"Aero in Green",label:{zh:"",ja:""}},WATER_IN_BLUE:{id:34652,name:"Water in Blue",label:{zh:"",ja:""}},FIRE_II_IN_RED:{id:34656,name:"Fire II in Red",label:{zh:"",ja:""},discordEmote:"Fire2inRed"},AERO_II_IN_GREEN:{id:34657,name:"Aero II in Green",label:{zh:"",ja:""},discordEmote:"Aero2inGreen"},WATER_II_IN_BLUE:{id:34658,name:"Water II in Blue",label:{zh:"",ja:""},discordEmote:"Water2inBlue"},BLIZZARD_IN_CYAN:{id:34653,name:"Blizzard in Cyan",label:{zh:"",ja:""}},STONE_IN_YELLOW:{id:34654,name:"Stone in Yellow",label:{zh:"",ja:""}},THUNDER_IN_MAGENTA:{id:34655,name:"Thunder in Magenta",label:{zh:"",ja:""}},BLIZZARD_II_IN_CYAN:{id:34659,name:"Blizzard II in Cyan",label:{zh:"",ja:""},discordEmote:"Blizzard2inCyan"},STONE_II_IN_YELLOW:{id:34660,name:"Stone II in Yellow",label:{zh:"",ja:""},discordEmote:"Stone2inYellow"},THUNDER_II_IN_MAGENTA:{id:34661,name:"Thunder II in Magenta",label:{zh:"",ja:""},discordEmote:"Thunder2inMagenta"},HOLY_IN_WHITE:{id:34662,name:"Holy in White",label:{zh:"",ja:""}},COMET_IN_BLACK:{id:34663,name:"Comet in Black",label:{zh:"",ja:""}},RAINBOW_DRIP:{id:34688,name:"Rainbow Drip",label:{zh:"",ja:""}},STAR_PRISM:{id:34681,name:"Star Prism",label:{zh:"",ja:""}},TEMPERA_COAT:{id:34685,name:"Tempera Coat",label:{zh:"",ja:""}},TEMPERA_GRASSA:{id:34686,name:"Tempera Grassa",label:{zh:"",ja:""}},TEMPERA_COAT_POP:{name:"Pop Tempera Coat",label:{zh:"",ja:""}},TEMPERA_GRASSA_POP:{name:"Pop Tempera Grassa",label:{zh:"",ja:""}},SMUDGE:{id:34684,name:"Smudge",label:{zh:"",ja:""}},SUBTRACTIVE_PALETTE:{id:34683,name:"Subtractive Palette",label:{zh:"",ja:""}},CREATURE_MOTIF:{id:34689,name:"Creature Motif",label:{zh:"",ja:""}},POM_MOTIF:{id:34664,name:"Pom Motif",label:{zh:"",ja:""}},WING_MOTIF:{id:34665,name:"Wing Motif",label:{zh:"",ja:""}},CLAW_MOTIF:{id:34666,name:"Claw Motif",label:{zh:"",ja:""}},MAW_MOTIF:{id:34667,name:"Maw Motif",label:{zh:"",ja:""}},LIVING_MUSE:{id:35347,name:"Living Muse",label:{zh:"",ja:""}},POM_MUSE:{id:34670,name:"Pom Muse",label:{zh:"",ja:""}},WINGED_MUSE:{id:34671,name:"Winged Muse",label:{zh:"",ja:""}},CLAWED_MUSE:{id:34672,name:"Clawed Muse",label:{zh:"",ja:""}},FANGED_MUSE:{id:34673,name:"Fanged Muse",label:{zh:"",ja:""}},MOG_OF_THE_AGES:{id:34676,name:"Mog of the Ages",label:{zh:"",ja:""}},RETRIBUTION_OF_THE_MADEEN:{id:34677,name:"Retribution of the Madeen",label:{zh:"",ja:""}},WEAPON_MOTIF:{id:34690,name:"Weapon Motif",label:{zh:"",ja:""}},STEEL_MUSE:{id:35348,name:"Steel Muse",label:{zh:"",ja:""}},HAMMER_MOTIF:{id:34668,name:"Hammer Motif",label:{zh:"",ja:""}},STRIKING_MUSE:{id:34674,name:"Striking Muse",label:{zh:"",ja:""}},HAMMER_STAMP:{id:34678,name:"Hammer Stamp",label:{zh:"",ja:""}},HAMMER_BRUSH:{id:34679,name:"Hammer Brush",label:{zh:"",ja:""}},POLISHING_HAMMER:{id:34680,name:"Polishing Hammer",label:{zh:"",ja:""}},LANDSCAPE_MOTIF:{id:34691,name:"Landscape Motif",label:{zh:"",ja:""}},SCENIC_MUSE:{id:35349,name:"Scenic Muse",label:{zh:"",ja:""}},STARRY_SKY_MOTIF:{id:34669,name:"Starry Sky Motif",label:{zh:"",ja:""}},STARRY_MUSE:{id:34675,name:"Starry Muse",label:{zh:"",ja:""}}}),o1=ie()({cd_TEMPERA_COAT:{name:"cd_TemperaCoat"},cd_SMUDGE:{name:"cd_Smudge"},cd_LIVING_MUSE:{name:"cd_LivingMuse"},cd_PORTRAIT:{name:"cd_Portrait",label:{zh:"CD/"}},cd_STEEL_MUSE:{name:"cd_SteelMuse"},cd_SCENIC_MUSE:{name:"cd_ScenicMuse"},cd_SUBTRACTIVE:{name:"cd_Subtractive",label:{zh:"CD"}},cd_GRASSA:{name:"cd_Grassa",label:{zh:"CD"}},cd_TEMPERA_POP:{name:"cd_TemperaPop",label:{zh:"CD"}}}),l1=ie()({PORTRAIT:{name:"Portrait",label:{zh:"//"}},DEPICTIONS:{name:"Depictions",label:{zh:"///"}},CREATURE_CANVAS:{name:"Creature Canvas",label:{zh:""}},WEAPON_CANVAS:{name:"Weapon Canvas",label:{zh:""}},LANDSCAPE_CANVAS:{name:"Landscape Canvas",label:{zh:""}},PALETTE_GAUGE:{name:"Palette Gauge",label:{zh:""}},PAINT:{name:"Paint",label:{zh:""}}}),zR=ie()({AETHERHUES:{name:"Aetherhues",label:{zh:""},mayNotBeCanceled:!0,maximumStacks:2},MONOCHROME_TONES:{name:"Monochrome Tones",label:{zh:""}},SUBTRACTIVE_PALETTE:{name:"Subtractive Palette",label:{zh:""},mayNotBeCanceled:!0,maximumStacks:3},HAMMER_TIME:{name:"Hammer Time",label:{zh:""},mayNotBeCanceled:!0,maximumStacks:3},INSPIRATION:{name:"Inspiration",label:{zh:""},mayBeToggled:!0},SUBTRACTIVE_SPECTRUM:{name:"Subtractive Spectrum",label:{zh:""}},HYPERPHANTASIA:{name:"Hyperphantasia",label:{zh:""},maximumStacks:5},RAINBOW_BRIGHT:{name:"Rainbow Bright",label:{zh:""}},STARSTRUCK:{name:"Starstruck",label:{zh:""}},STARRY_MUSE:{name:"Starry Muse",label:{zh:""}},TEMPERA_COAT:{name:"Tempera Coat",label:{zh:""}},TEMPERA_GRASSA:{name:"Tempera Grassa",label:{zh:""}},SMUDGE:{name:"Smudge",label:{zh:""}}}),s1=ie()({HAMMER_COMBO:{name:"Hammer Combo Counter",label:{zh:""}}}),r1=ie()({PICTOMANCY_MASTERY_II:{name:"Pictomancy Mastery II",level:74},ENHANCED_ARTISTRY:{name:"Enhanced Artistry",level:80},ENHANCED_PICTOMANCY:{name:"Enhanced Pictomancy",level:82},ENHANCED_SMUDGE:{name:"Enhanced Smudge",level:84},PICTOMANCY_MASTERY_III:{name:"Pictomancy Mastery III",level:84},ENHANCED_PICTOMANCY_II:{name:"Enhanced Pictomancy II",level:86},ENHANCED_TEMPERA:{name:"Enhanced Tempera",level:88},ENHANCED_PALETTE:{name:"Enhanced Palette",level:90},ENHANCED_PICTOMANCY_III:{name:"Enhanced Pictomancy III",level:92},PICTOMANCY_MASTERY_IV:{name:"Pictomancy Mastery IV",level:94},ENHANCED_PICTOMANCY_IV:{name:"Enhanced Pictomancy IV",level:96},ENHANCED_PICTOMANCY_V:{name:"Enhanced Pictomancy V",level:100}}),c1={...l1,...zR,...s1},u1=ie()({FAST_BLADE:{id:9,name:"Fast Blade",label:{zh:""}},FIGHT_OR_FLIGHT:{id:20,name:"Fight or Flight",label:{zh:""}},RIOT_BLADE:{id:15,name:"Riot Blade",label:{zh:""}},TOTAL_ECLIPSE:{id:7381,name:"Total Eclipse",label:{zh:""}},SHIELD_BASH:{id:16,name:"Shield Bash",label:{zh:""}},IRON_WILL:{id:28,name:"Iron Will",label:{zh:""}},RELEASE_IRON_WILL:{id:32065,name:"Release Iron Will",label:{zh:""}},SHIELD_LOB:{id:24,name:"Shield Lob",label:{zh:""}},SPIRITS_WITHIN:{id:29,name:"Spirits Within",label:{zh:""}},SHELTRON:{id:3542,name:"Sheltron",label:{zh:""}},SENTINEL:{id:17,name:"Sentinel",label:{zh:""}},PROMINENCE:{id:16457,name:"Prominence",label:{zh:""}},COVER:{id:27,name:"Cover",label:{zh:""}},CIRCLE_OF_SCORN:{id:23,name:"Circle of Scorn",label:{zh:""}},HALLOWED_GROUND:{id:30,name:"Hallowed Ground",label:{zh:""}},BULWARK:{id:22,name:"Bulwark",label:{zh:""}},GORING_BLADE:{id:3538,name:"Goring Blade",label:{zh:""}},DIVINE_VEIL:{id:3540,name:"Divine Veil",label:{zh:""}},CLEMENCY:{id:3541,name:"Clemency",label:{zh:""}},ROYAL_AUTHORITY:{id:3539,name:"Royal Authority",label:{zh:""}},INTERVENTION:{id:7382,name:"Intervention",label:{zh:""}},HOLY_SPIRIT:{id:7384,name:"Holy Spirit",label:{zh:""}},INTERVENE:{id:16461,name:"Intervene",label:{zh:""}},REQUIESCAT:{id:7383,name:"Requiescat",label:{zh:""}},PASSAGE_OF_ARMS:{id:7385,name:"Passage of Arms",label:{zh:""}},HOLY_CIRCLE:{id:16458,name:"Holy Circle",label:{zh:""}},ATONEMENT:{id:16460,name:"Atonement",label:{zh:""}},SUPPLICATION:{id:36918,name:"Supplication",label:{zh:"2"}},SEPULCHRE:{id:36919,name:"Sepulchre",label:{zh:"3"}},CONFITEOR:{id:16459,name:"Confiteor",label:{zh:""}},HOLY_SHELTRON:{id:25746,name:"Holy Sheltron",label:{zh:""}},EXPIACION:{id:25747,name:"Expiacion",label:{zh:""}},BLADE_OF_FAITH:{id:25748,name:"Blade of Faith",label:{zh:"2"}},BLADE_OF_TRUTH:{id:25749,name:"Blade of Truth",label:{zh:"3"}},BLADE_OF_VALOR:{id:25750,name:"Blade of Valor",label:{zh:"4"}},GUARDIAN:{id:36920,name:"Guardian",label:{zh:""}},IMPERATOR:{id:36921,name:"Imperator",label:{zh:""}},BLADE_OF_HONOR:{id:36922,name:"Blade of Honor",label:{zh:""}}}),d1=ie()({cd_FIGHT_OR_FLIGHT:{name:"cd_FightOrFlight"},cd_IRON_WILL:{name:"cd_IronWill"},cd_RELEASE_IRON_WILL:{name:"cd_ReleaseIronWill"},cd_SPIRITS_WITHIN:{name:"cd_SpiritsWithin"},cd_SHELTRON:{name:"cd_Sheltron"},cd_SENTINEL:{name:"cd_Sentinel"},cd_COVER:{name:"cd_Cover"},cd_CIRCLE_OF_SCORN:{name:"cd_CircleOfScorn"},cd_HALLOWED_GROUND:{name:"cd_HallowedGround"},cd_BULWARK:{name:"cd_Bulwark"},cd_DIVINE_VEIL:{name:"cd_DivineVeil"},cd_INTERVENTION:{name:"cd_Intervention"},cd_INTERVENE:{name:"cd_Intervene"},cd_REQUIESCAT:{name:"cd_Requiescat"},cd_PASSAGE_OF_ARMS:{name:"cd_PassageOfArms"},cd_HOLY_SHELTRON:{name:"cd_HolySheltron"},cd_EXPIACION:{name:"cd_Expiacion"},cd_GUARDIAN:{name:"cd_Guardian"},cd_IMPERATOR:{name:"cd_Imperator"},cd_BLADE_OF_HONOR:{name:"cd_BladeOfHonor"}}),h1=ie()({OATH_GAUGE:{name:"Oath Gauge",label:{zh:""}}}),YR=ie()({FIGHT_OR_FLIGHT:{name:"Fight or Flight",label:{zh:""}},IRON_WILL:{name:"Iron Will",label:{zh:""}},CIRCLE_OF_SCORN_DOT:{name:"Circle of Scorn DoT",label:{zh:"DOT"}},SHELTRON:{name:"Sheltron",label:{zh:""}},SENTINEL:{name:"Sentinel",label:{zh:""}},COVER:{name:"Cover",label:{zh:""}},HALLOWED_GROUND:{name:"Hallowed Ground",label:{zh:""}},BULWARK:{name:"Bulwark",label:{zh:""}},GORING_BLADE_READY:{name:"Goring Blade Ready",label:{zh:""}},DIVINE_VEIL:{name:"Divine Veil",label:{zh:""}},ATONEMENT_READY:{name:"Atonement Ready",label:{zh:""}},DIVINE_MIGHT:{name:"Divine Might",label:{zh:""}},INTERVENTION:{name:"Intervention",label:{zh:""}},KNIGHTS_RESOLVE:{name:"Knight's Resolve",label:{zh:""}},KNIGHTS_BENEDICTION:{name:"Knight's Benediction",label:{zh:""}},REQUIESCAT:{name:"Requiescat",maximumStacks:4,label:{zh:""}},CONFITEOR_READY:{name:"Confiteor Ready",label:{zh:""}},PASSAGE_OF_ARMS:{name:"Passage of Arms",label:{zh:""}},ARMS_UP:{name:"Arms Up",label:{zh:""}},SUPPLICATION_READY:{name:"Supplication Ready",label:{zh:""}},SEPULCHRE_READY:{name:"Sepulchre Ready",label:{zh:""}},HOLY_SHELTRON:{name:"Holy Sheltron",label:{zh:""}},BLADE_OF_HONOR_READY:{name:"Blade of Honor Ready",label:{zh:""}},GUARDIAN:{name:"Guardian",label:{zh:""}},GUARDIANS_WILL:{name:"Guardian's Will",label:{zh:""}}}),f1=ie()({PLD_COMBO_TRACKER:{name:"PLD Combo Tracker",label:{zh:""}},PLD_CONFITEOR_COMBO_TRACKER:{name:"PLD Confiteor Combo Tracker",label:{zh:""}},PLD_AOE_COMBO_TRACKER:{name:"PLD AOE Combo Tracker",label:{zh:"AOE"}}}),E1=ie()({ENHANCED_PROMINENCE:{name:"Enhanced Prominence",level:72},ENHANCED_SHELTRON:{name:"Enhanced Sheltron",level:74},SWORD_OATH:{name:"Sword Oath",level:76},ENHANCED_REQUIESCAT:{name:"Enhanced Requiescat",level:80},SHELTRON_MASTERY:{name:"Sheltron Mastery",level:82},ENHANCED_INTERVENTION:{name:"Enhanced Intervention",level:82},DIVINE_MAGIC_MASTERY_II:{name:"Divine Magic Mastery II",level:84},SPIRITS_WITHIN_MASTERY:{name:"Spirits Within Mastery",level:86},ENHANCED_DIVINE_VEIL:{name:"Enhanced Divine Veil",level:88},SENTINEL_MASTERY:{name:"Sentinel Mastery",level:92},REQUIESCAT_MASTERY:{name:"Requiescat Mastery",level:96},ENHANCED_BLADE_OF_VALOR:{name:"Enhanced Blade of Valor",level:100}}),m1={...h1,...YR,...f1},A1=ie()({RIPOSTE:{id:7504,name:"Riposte",label:{zh:"",ja:""}},VERTHUNDER:{id:7505,name:"Verthunder",label:{zh:"",ja:""}},CORPS_A_CORPS:{id:7506,name:"Corps-a-corps",label:{zh:"",ja:""}},VERAERO:{id:7507,name:"Veraero",label:{zh:"",ja:""}},VERFIRE:{id:7510,name:"Verfire",label:{zh:"",ja:""}},VERSTONE:{id:7511,name:"Verstone",label:{zh:"",ja:""}},ZWERCHHAU:{id:7512,name:"Zwerchhau",label:{zh:"",ja:""}},DISPLACEMENT:{id:7515,name:"Displacement",label:{zh:"",ja:""}},FLECHE:{id:7517,name:"Fleche",label:{zh:"",ja:""}},REDOUBLEMENT:{id:7516,name:"Redoublement",label:{zh:"",ja:""}},ACCELERATION:{id:7518,name:"Acceleration",label:{zh:"",ja:""}},MOULINET:{id:7513,name:"Moulinet",label:{zh:"",ja:""}},VERCURE:{id:7514,name:"Vercure",label:{zh:"",ja:""}},CONTRE_SIXTE:{id:7519,name:"Contre Sixte",label:{zh:"",ja:""}},EMBOLDEN:{id:7520,name:"Embolden",label:{zh:"",ja:""}},MANAFICATION:{id:7521,name:"Manafication",label:{zh:"",ja:""}},JOLT_II:{id:7524,name:"Jolt II",label:{zh:"",ja:""}},VERRAISE:{id:7523,name:"Verraise",label:{zh:"",ja:""}},IMPACT:{id:16526,name:"Impact",label:{zh:"",ja:""}},VERFLARE:{id:7525,name:"Verflare",label:{zh:"",ja:""}},VERHOLY:{id:7526,name:"Verholy",label:{zh:"",ja:""}},ENCHANTED_RIPOSTE:{id:7527,name:"Enchanted Riposte",label:{zh:"",ja:""}},ENCHANTED_ZWERCHHAU:{id:7528,name:"Enchanted Zwerchhau",label:{zh:"",ja:""}},ENCHANTED_REDOUBLEMENT:{id:7529,name:"Enchanted Redoublement",label:{zh:"",ja:""}},ENCHANTED_MOULINET:{id:7530,name:"Enchanted Moulinet",label:{zh:"",ja:""}},VERTHUNDER_II:{id:16524,name:"Verthunder II",label:{zh:"",ja:""}},VERAERO_II:{id:16525,name:"Veraero II",label:{zh:"",ja:""}},ENGAGEMENT:{id:16527,name:"Engagement",label:{zh:"",ja:""}},ENCHANTED_REPRISE:{id:16528,name:"Enchanted Reprise",label:{zh:"",ja:""}},REPRISE:{id:16529,name:"Reprise",label:{zh:"",ja:""}},SCORCH:{id:16530,name:"Scorch",label:{zh:"",ja:""}},VERTHUNDER_III:{id:25855,name:"Verthunder III",label:{zh:"",ja:""}},VERAERO_III:{id:25856,name:"Veraero III",label:{zh:"",ja:""}},MAGICK_BARRIER:{id:25857,name:"Magick Barrier",label:{zh:"",ja:""}},RESOLUTION:{id:25858,name:"Resolution",label:{zh:"",ja:""}},ENCHANTED_MOULINET_II:{id:37002,name:"Enchanted Moulinet Deux",label:{zh:"",ja:""}},ENCHANTED_MOULINET_III:{id:37003,name:"Enchanted Moulinet Trois",label:{zh:"",ja:""}},JOLT_III:{id:37004,name:"Jolt III",label:{zh:"",ja:""}},VICE_OF_THORNS:{id:37005,name:"Vice of Thorns",label:{zh:"",ja:""}},GRAND_IMPACT:{id:37006,name:"Grand Impact",label:{zh:"",ja:""}},PREFULGENCE:{id:37007,name:"Prefulgence",label:{zh:"",ja:""}}}),R1=ie()({cd_CORPS_A_CORPS:{name:"cd_CorpsACorps"},cd_DISPLACEMENT:{name:"cd_Displacement"},cd_FLECHE:{name:"cd_Fleche"},cd_ACCELERATION:{name:"cd_Acceleration"},cd_CONTRE_SIXTE:{name:"cd_ContreSixte"},cd_EMBOLDEN:{name:"cd_Embolden"},cd_MANAFICATION:{name:"cd_Manafication"},cd_MAGICK_BARRIER:{name:"cd_MagickBarrier"},cd_VICE_OF_THORNS:{name:"cd_ViceOfThorns"},cd_PREFULGENCE:{name:"cd_Prefulgence"}}),T1=ie()({WHITE_MANA:{name:"White Mana",label:{zh:""}},BLACK_MANA:{name:"Black Mana",label:{zh:""}},MANA_STACKS:{name:"Mana Stacks",label:{zh:""}}}),KR=ie()({ACCELERATION:{name:"Acceleration",label:{zh:""}},DUALCAST:{name:"Dualcast",label:{zh:""}},EMBOLDEN:{name:"Embolden",label:{zh:""}},GRAND_IMPACT_READY:{name:"Grand Impact Ready",label:{zh:""}},MAGICK_BARRIER:{name:"Magick Barrier",label:{zh:""}},MAGICKED_SWORDPLAY:{name:"Magicked Swordplay",label:{zh:""},maximumStacks:3},MANAFICATION:{name:"Manafication",label:{zh:""}},PREFULGENCE_READY:{name:"Prefulgence Ready",label:{zh:""}},THORNED_FLOURISH:{name:"Thorned Flourish",label:{zh:""}},VERFIRE_READY:{name:"Verfire Ready",label:{zh:""}},VERSTONE_READY:{name:"Verstone Ready",label:{zh:""}}}),S1=ie()({RDM_MELEE_COUNTER:{name:"RDM Melee Combo",label:{zh:""}},RDM_FINISHER_COUNTER:{name:"RDM Finisher Combo",label:{zh:"/"}},RDM_AOE_COUNTER:{name:"RDM AoE Combo",label:{zh:"AOE"}}}),I1=ie()({ENHANCED_DISPLACEMENT:{name:"Enhanced Displacement",level:72},RED_MAGIC_MASTERY:{name:"Red Magic Mastery",level:74},RED_MAGIC_MASTERY_II:{name:"Red Magic Mastery II",level:82},RED_MAGIC_MASTERY_III:{name:"Red Magic Mastery III",level:84},ENHANCED_ACCELERATION:{name:"Enhanced Acceleration",level:88},ENHANCED_EMBOLDEN:{name:"Enhanced Embolden",level:92},ENCHANTED_BLADE_MASTERY:{name:"Enchanted Blade Mastery",level:94},ENHANCED_ACCELERATION_II:{name:"Enhanced Acceleration II",level:96},ENHANCED_MANAFICATION:{name:"Enhanced Manafication",level:100}}),_1={...T1,...KR,...S1},g1=ie()({SLICE:{id:24373,name:"Slice",label:{zh:""}},WAXING_SLICE:{id:24374,name:"Waxing Slice",label:{zh:""}},INFERNAL_SLICE:{id:24375,name:"Infernal Slice",label:{zh:""}},SHADOW_OF_DEATH:{id:24378,name:"Shadow of Death",label:{zh:""}},SOUL_SLICE:{id:24380,name:"Soul Slice",label:{zh:""}},GIBBET:{id:24382,name:"Gibbet",label:{zh:""}},GALLOWS:{id:24383,name:"Gallows",label:{zh:""}},EXECUTIONERS_GIBBET:{id:36970,name:"Executioner's Gibbet",label:{zh:""}},EXECUTIONERS_GALLOWS:{id:36971,name:"Executioner's Gallows",label:{zh:""}},VOID_REAPING:{id:24395,name:"Void Reaping",label:{zh:""}},CROSS_REAPING:{id:24396,name:"Cross Reaping",label:{zh:""}},PLENTIFUL_HARVEST:{id:24385,name:"Plentiful Harvest",label:{zh:""}},HARVEST_MOON:{id:24388,name:"Harvest Moon",label:{zh:""}},COMMUNIO:{id:24398,name:"Communio",label:{zh:""}},PERFECTIO:{id:36973,name:"Perfectio",label:{zh:""}},SOULSOW:{id:24387,name:"Soulsow",label:{zh:""}},HARPE:{id:24386,name:"Harpe",label:{zh:""}},BLOOD_STALK:{id:24389,name:"Blood Stalk",label:{zh:""}},UNVEILED_GIBBET:{id:24390,name:"Unveiled Gibbet",label:{zh:""}},UNVEILED_GALLOWS:{id:24391,name:"Unveiled Gallows",label:{zh:""}},LEMURES_SLICE:{id:24399,name:"Lemure's Slice",label:{zh:""}},SACRIFICIUM:{id:36969,name:"Sacrificium",label:{zh:""}},ARCANE_CIRCLE:{id:24405,name:"Arcane Circle",label:{zh:""}},GLUTTONY:{id:24393,name:"Gluttony",label:{zh:""}},ENSHROUD:{id:24394,name:"Enshroud",label:{zh:""}},SPINNING_SCYTHE:{id:24376,name:"Spinning Scythe",label:{zh:""}},NIGHTMARE_SCYTHE:{id:24377,name:"Nightmare Scythe",label:{zh:""}},WHORL_OF_DEATH:{id:24379,name:"Whorl of Death",label:{zh:""}},SOUL_SCYTHE:{id:24381,name:"Soul Scythe",label:{zh:""}},GUILLOTINE:{id:24384,name:"Guillotine",label:{zh:""}},EXECUTIONERS_GUILLOTINE:{id:36972,name:"Executioner's Guillotine",label:{zh:""}},GRIM_REAPING:{id:24397,name:"Grim Reaping",label:{zh:""}},GRIM_SWATHE:{id:24392,name:"Grim Swathe",label:{zh:""}},LEMURES_SCYTHE:{id:24400,name:"Lemure's Scythe",label:{zh:""}},ARCANE_CREST:{id:24404,name:"Arcane Crest",label:{zh:""}},ARCANE_CREST_POP:{name:"Pop Arcane Crest",label:{zh:""}},HELLS_INGRESS:{id:24401,name:"Hell's Ingress",label:{zh:""}},HELLS_EGRESS:{id:24402,name:"Hell's Egress",label:{zh:""}},REGRESS:{id:24403,name:"Regress",label:{zh:""}},GAIN_SOUL_GAUGE:{name:"+10 Soul Gauge",label:{zh:"+10"}}}),p1=ie()({cd_ARCANE_CIRCLE:{name:"cd_ArcaneCircle"},cd_GLUTTONY:{name:"cd_Gluttony"},cd_SOUL_SLICE:{name:"cd_SoulSlice"},cd_ENSHROUD:{name:"cd_Enshroud"},cd_INGRESS_EGRESS:{name:"cd_IngressEgress",label:{zh:"CD/"}},cd_ARCANE_CREST:{name:"cd_ArcaneCrest"},cd_ARCANE_CREST_POP:{name:"cd_ArcaneCrestPop"},cd_BLOOD_STALK:{name:"cd_BloodStalk"},cd_LEMURES_SLICE:{name:"cd_LemuresSlice"},cd_SACRIFICIUM:{name:"cd_Sacrificium"},cd_GAIN_SOUL_GAUGE:{name:"cd_GainSoulGauge"}}),N1=ie()({SOUL:{name:"Soul",label:{zh:""}},SHROUD:{name:"Shroud",label:{zh:""}},LEMURE_SHROUD:{name:"Lemure Shroud",label:{zh:""}},VOID_SHROUD:{name:"Void Shroud",label:{zh:""}}}),VR=ie()({DEATHS_DESIGN:{name:"Death's Design",label:{zh:""}},SOUL_REAVER:{name:"Soul Reaver",label:{zh:""},maximumStacks:2},ENHANCED_GIBBET:{name:"Enhanced Gibbet",label:{zh:""}},ENHANCED_GALLOWS:{name:"Enhanced Gallows",label:{zh:""}},EXECUTIONER:{name:"Executioner",label:{zh:""},maximumStacks:2},ENSHROUDED:{name:"Enshrouded",label:{zh:""}},ENHANCED_VOID_REAPING:{name:"Enhanced Void Reaping",label:{zh:""}},ENHANCED_CROSS_REAPING:{name:"Enhanced Cross Reaping",label:{zh:""}},OBLATIO:{name:"Oblatio",label:{zh:""}},IDEAL_HOST:{name:"Ideal Host",label:{zh:""}},PERFECTIO_OCCULTA:{name:"Perfectio Occulta",label:{zh:""}},PERFECTIO_PARATA:{name:"Perfectio Parata",label:{zh:""}},ARCANE_CIRCLE:{name:"Arcane Circle",label:{zh:""}},CIRCLE_OF_SACRIFICE:{name:"Circle of Sacrifice",label:{zh:""}},BLOODSOWN_CIRCLE:{name:"Bloodsown Circle",label:{zh:""}},IMMORTAL_SACRIFICE:{name:"Immortal Sacrifice",label:{zh:""},maximumStacks:8},CREST_OF_TIME_BORROWED:{name:"Crest of Time Borrowed",label:{zh:""}},CREST_OF_TIME_RETURNED:{name:"Crest of Time Returned",label:{zh:""}},SOULSOW:{name:"Soulsow",label:{zh:""}},THRESHOLD:{name:"Threshold",label:{zh:""}},ENHANCED_HARPE:{name:"Enhanced Harpe",label:{zh:""}}}),C1=ie()({ARCANE_CREST:{name:"Arcane Crest",label:{zh:""}},HELLS_INGRESS_USED:{name:"Hell's Ingress Used",label:{zh:""}},RPR_COMBO:{name:"RPR Combo",label:{zh:""}},RPR_AOE_COMBO:{name:"RPR AoE Combo",label:{zh:"AOE"}}}),b1=ie()({HELLSGATE:{name:"Hellsgate",level:74},TEMPERED_SOUL:{name:"Tempered Soul",level:78},SHROUD_GAUGE:{name:"Shroud Gauge",level:80},ENHANCED_ARCANE_CREST:{name:"Enhanced Arcane Crest",level:84},MELEE_MASTERY_II_RPR:{name:"Melee Mastery II",level:84},VOID_SOUL:{name:"Void Soul",level:86},ENHANCED_ARCANE_CIRCLE:{name:"Enhanced Arcane Circle",level:88},ENHANCED_ENSHROUD:{name:"Enhanced Enshroud",level:92},MELEE_MASTERY_III_RPR:{name:"Melee Mastery III",level:94},ENHANCED_GLUTTONY:{name:"Enhanced Gluttony",level:96},ENHANCED_PLENTIFUL_HARVEST:{name:"Enhanced Plentiful Harvest",level:100}}),O1={...N1,...VR,...C1},D1=ie()({ENPI:{id:7486,name:"Enpi",label:{zh:""}},HAKAZE:{id:7477,name:"Hakaze",label:{zh:""}},GYOFU:{id:36963,name:"Gyofu",label:{zh:""}},YUKIKAZE:{id:7480,name:"Yukikaze",label:{zh:""}},JINPU:{id:7478,name:"Jinpu",label:{zh:""}},GEKKO:{id:7481,name:"Gekko",label:{zh:""}},SHIFU:{id:7479,name:"Shifu",label:{zh:""}},KASHA:{id:7482,name:"Kasha",label:{zh:""}},FUGA:{id:7483,name:"Fuga",label:{zh:""}},FUKO:{id:25780,name:"Fuko",label:{zh:""}},MANGETSU:{id:7484,name:"Mangetsu",label:{zh:""}},OKA:{id:7485,name:"Oka",label:{zh:""}},MEIKYO_SHISUI:{id:7499,name:"Meikyo Shisui",label:{zh:""}},IKISHOTEN:{id:16482,name:"Ikishoten",label:{zh:""}},HISSATSU_SHINTEN:{id:7490,name:"Hissatsu: Shinten",label:{zh:""}},HISSATSU_KYUTEN:{id:7491,name:"Hissatsu: Kyuten",label:{zh:""}},HISSATSU_GYOTEN:{id:7492,name:"Hissatsu: Gyoten",label:{zh:""}},HISSATSU_YATEN:{id:7493,name:"Hissatsu: Yaten",label:{zh:""}},HISSATSU_SENEI:{id:16481,name:"Hissatsu: Senei",label:{zh:""}},HISSATSU_GUREN:{id:7496,name:"Hissatsu: Guren",label:{zh:""}},HAGAKURE:{id:7495,name:"Hagakure",label:{zh:""}},IAIJUTSU:{id:7867,name:"Iaijutsu",label:{zh:""}},TSUBAME_GAESHI:{id:16483,name:"Tsubame-gaeshi",label:{zh:""}},SHOHA:{id:16487,name:"Shoha",label:{zh:""}},THIRD_EYE:{id:7498,name:"Third Eye",label:{zh:""}},TENGENTSU:{id:36962,name:"Tengentsu",label:{zh:""}},OGI_NAMIKIRI:{id:25781,name:"Ogi Namikiri",label:{zh:""}},KAESHI_NAMIKIRI:{id:25782,name:"Kaeshi: Namikiri",label:{zh:""}},ZANSHIN:{id:36964,name:"Zanshin",label:{zh:""}},MEDITATE:{id:7497,name:"Meditate",label:{zh:""}},HIGANBANA:{id:7489,name:"Higanbana",label:{zh:""}},TENKA_GOKEN:{id:7488,name:"Tenka Goken",label:{zh:""}},KAESHI_GOKEN:{id:16485,name:"Kaeshi: Goken",label:{zh:""}},TENDO_GOKEN:{id:36965,name:"Tendo Goken",label:{zh:""}},TENDO_KAESHI_GOKEN:{id:36967,name:"Tendo Kaeshi Goken",label:{zh:""}},MIDARE_SETSUGEKKA:{id:7487,name:"Midare Setsugekka",label:{zh:""}},KAESHI_SETSUGEKKA:{id:16486,name:"Kaeshi: Setsugekka",label:{zh:""}},TENDO_SETSUGEKKA:{id:36966,name:"Tendo Setsugekka",label:{zh:""}},TENDO_KAESHI_SETSUGEKKA:{id:36968,name:"Tendo Kaeshi Setsugekka",label:{zh:""}},THIRD_EYE_POP:{name:"Pop Third Eye",label:{zh:""}},TENGENTSU_POP:{name:"Pop Tengentsu",label:{zh:""}}}),y1=ie()({cd_YATEN:{name:"cd_Yaten",label:{zh:"CD"}},cd_GYOTEN:{name:"cd_Gyoten",label:{zh:"CD"}},cd_SENEI_GUREN:{name:"cd_Senei",label:{zh:"CD: /"}},cd_SHINTEN:{name:"cd_Shinten",label:{zh:"CD"}},cd_KYUTEN:{name:"cd_Kyuten",label:{zh:"CD"}},cd_MEDITATE:{name:"cd_Meditate"},cd_IKISHOTEN:{name:"cd_Ikishoten"},cd_ZANSHIN:{name:"cd_Zanshin"},cd_HAGAKURE:{name:"cd_Hagakure"},cd_SHOHA:{name:"cd_Shoha"},cd_MEIKYO_SHISUI:{name:"cd_MeikyoShisui"},cd_THIRD_EYE:{name:"cd_ThirdEye"},cd_THIRD_EYE_POP:{name:"cd_ThirdEyePop"}}),v1=ie()({KENKI:{name:"Kenki",label:{zh:""}},SETSU:{name:"Setsu",label:{zh:""}},GETSU:{name:"Getsu",label:{zh:""}},KA_SEN:{name:"Ka",label:{zh:""}},MEDITATION:{name:"Meditation",label:{zh:""}}}),WR=ie()({MEIKYO_SHISUI:{name:"Meikyo Shisui",label:{zh:""},maximumStacks:3},FUGETSU:{name:"Fugetsu",label:{zh:""}},FUKA:{name:"Fuka",label:{zh:""}},ZANSHIN_READY:{name:"Zanshin Ready",label:{zh:""}},TENDO:{name:"Tendo",label:{zh:""}},OGI_READY:{name:"Ogi Namikiri Ready",label:{zh:""}},TSUBAME_GAESHI_READY:{name:"Tsubame-gaeshi Ready",label:{zh:""}},THIRD_EYE:{name:"Third Eye",label:{zh:""}},TENGENTSU:{name:"Tengentsu",label:{zh:""}},TENGENTSUS_FORESIGHT:{name:"Tengentsu's Foresight",label:{zh:""}},MEDITATE:{name:"Meditate",label:{zh:""}},ENHANCED_ENPI:{name:"Enhanced Enpi",label:{zh:""}},HIGANBANA_DOT:{name:"HiganbanaDoT",label:{zh:"dot"}}}),M1=ie()({SAM_TWO_READY:{name:"SAMTwoReady",label:{zh:"2"}},SAM_TWO_AOE_READY:{name:"SAMTwoAoeReady",label:{zh:"AOE2"}},GEKKO_READY:{name:"GekkoReady",label:{zh:""}},KASHA_READY:{name:"KashaReady",label:{zh:""}},KAESHI_OGI_READY:{name:"KaeshiOgiReady",label:{zh:""}},KAESHI_TRACKER:{name:"KaeshiTracker",label:{zh:""}}}),L1=ie()({ENHANCED_IAIJUTSU:{name:"Enhanced Iaijutsu",level:74},ENHANCED_MEIKYO_SHISUI:{name:"Enhanced Meikyo Shisui",level:76},ENHANCED_FUGETSU_AND_FUKA:{name:"Enhanced Fugetsu and Fuka",level:78},THIRD_EYE_MASTERY:{name:"Third Eye Mastery",level:82},WAY_OF_THE_SAMURAI_II:{name:"Way of the Samurai II",level:84},FUGA_MASTERY:{name:"Fuga Mastery",level:86},ENHANCED_IKISHOTEN:{name:"Enhanced Ikishoten",level:90},HAKAZE_MASTERY:{name:"Hakaze Mastery",level:92},ENHANCED_HISSATSU:{name:"Enhanced Hissatsu",level:94},WAY_OF_THE_SAMURAI_III:{name:"Way of the Samurai III",level:94},ENHANCED_IKISHOTEN_II:{name:"Enhanced Ikishoten II",level:96},ENHANCED_MEIKYO_SHISUI_II:{name:"Enhanced Meikyo Shisui II",level:100}}),x1={...v1,...WR,...M1},XR=ie()({PHYSICK:{id:190,name:"Physick",label:{zh:"",ja:""}},SUMMON_EOS:{id:17215,name:"Summon Eos",label:{zh:"",ja:""}},RESURRECTION:{id:173,name:"Resurrection",label:{zh:"",ja:""}},WHISPERING_DAWN:{id:16537,name:"Whispering Dawn",label:{zh:"",ja:""}},BIO_II:{id:17865,name:"Bio II",label:{zh:"",ja:""}},ADLOQUIUM:{id:185,name:"Adloquium",label:{zh:"",ja:""}},SUCCOR:{id:186,name:"Succor",label:{zh:"",ja:""}},RUIN_II:{id:17870,name:"Ruin II",label:{zh:"",ja:""}},FEY_ILLUMINATION:{id:16538,name:"Fey Illumination",label:{zh:"",ja:""}},AETHERFLOW:{id:166,name:"Aetherflow",label:{zh:"",ja:""}},ENERGY_DRAIN:{id:167,name:"Energy Drain",label:{zh:"",ja:""}},LUSTRATE:{id:189,name:"Lustrate",label:{zh:"",ja:""}},ART_OF_WAR:{id:16539,name:"Art of War",label:{zh:"",ja:""}},SACRED_SOIL:{id:188,name:"Sacred Soil",label:{zh:"",ja:""}},INDOMITABILITY:{id:3583,name:"Indomitability",label:{zh:"",ja:""}},DEPLOYMENT_TACTICS:{id:3585,name:"Deployment Tactics",label:{zh:"",ja:""}},EMERGENCY_TACTICS:{id:3586,name:"Emergency Tactics",label:{zh:"",ja:""}},DISSIPATION:{id:3587,name:"Dissipation",label:{zh:"",ja:""}},EXCOGITATION:{id:7434,name:"Excogitation",label:{zh:"",ja:""}},BROIL_II:{id:7435,name:"Broil II",label:{zh:"",ja:""}},CHAIN_STRATAGEM:{id:7436,name:"Chain Stratagem",label:{zh:"",ja:""}},AETHERPACT:{id:7437,name:"Aetherpact",label:{zh:"",ja:""}},DISSOLVE_UNION:{id:7869,name:"Dissolve Union",label:{zh:"",ja:""}},BIOLYSIS:{id:16540,name:"Biolysis",label:{zh:"",ja:""}},BROIL_III:{id:16541,name:"Broil III",label:{zh:"",ja:""}},RECITATION:{id:16542,name:"Recitation",label:{zh:"",ja:""}},FEY_BLESSING:{id:16543,name:"Fey Blessing",label:{zh:"",ja:""}},SUMMON_SERAPH:{id:16545,name:"Summon Seraph",label:{zh:"",ja:""}},CONSOLATION:{id:16546,name:"Consolation",label:{zh:"",ja:""}},BROIL_IV:{id:25865,name:"Broil IV",label:{zh:"",ja:""}},ART_OF_WAR_II:{id:25866,name:"Art of War II",label:{zh:"",ja:""}},PROTRACTION:{id:25867,name:"Protraction",label:{zh:"",ja:""}},EXPEDIENT:{id:25868,name:"Expedient",label:{zh:"",ja:""}},BANEFUL_IMPACTION:{id:37012,name:"Baneful Impaction",label:{zh:"",ja:""}},CONCITATION:{id:37013,name:"Concitation",label:{zh:"",ja:""}},SERAPHISM:{id:37014,name:"Seraphism",label:{zh:"",ja:""}},MANIFESTATION:{id:37015,name:"Manifestation",label:{zh:"",ja:""}},ACCESSION:{id:37016,name:"Accession",label:{zh:"",ja:""}},ANGELS_WHISPER:{name:"Angel's Whisper",label:{zh:""}}}),H1=ie()({cd_WHISPERING_DAWN:{name:"cd_WhisperingDawn"},cd_FEY_ILLUMINATION:{name:"cd_FeyIllumination"},cd_AETHERFLOW:{name:"cd_Aetherflow"},cd_ENERGY_DRAIN:{name:"cd_EnergyDrain"},cd_LUSTRATE:{name:"cd_Lustrate"},cd_SACRED_SOIL:{name:"cd_SacredSoil"},cd_INDOMITABILITY:{name:"cd_Indomitability"},cd_DEPLOYMENT_TACTICS:{name:"cd_DeploymentTactics"},cd_EMERGENCY_TACTICS:{name:"cd_EmergencyTactics"},cd_DISSIPATION:{name:"cd_Dissipation"},cd_EXCOGITATION:{name:"cd_Excogitation"},cd_CHAIN_STRATAGEM:{name:"cd_ChainStratagem"},cd_AETHERPACT:{name:"cd_Aetherpact"},cd_DISSOLVE_UNION:{name:"cd_DissolveUnion"},cd_RECITATION:{name:"cd_Recitation"},cd_FEY_BLESSING:{name:"cd_FeyBlessing"},cd_SUMMON_SERAPH:{name:"cd_SummonSeraph"},cd_CONSOLATION:{name:"cd_Consolation"},cd_CONSOLATION_INTERNAL:{name:"cd_ConsolationInternal"},cd_PROTRACTION:{name:"cd_Protraction"},cd_EXPEDIENT:{name:"cd_Expedient"},cd_BANEFUL_IMPACTION:{name:"cd_BanefulImpaction"},cd_SERAPHISM:{name:"cd_Seraphism"}}),k1=ie()({AETHERFLOW:{name:"Aetherflow",maximumCharges:3,label:{zh:""}},FAERIE_GAUGE:{name:"Faerie Gauge",maximumStacks:100,label:{zh:""}}}),qR=ie()({BIO_II:{name:"Bio II",label:{zh:""}},CATALYZE:{name:"Catalyze",label:{zh:""}},GALVANIZE:{name:"Galvanize",label:{zh:""}},WHISPERING_DAWN:{name:"Whispering Dawn",label:{zh:""}},ANGELS_WHISPER:{name:"Angel's Whisper",label:{zh:""}},FEY_ILLUMINATION:{name:"Fey Illumination",label:{zh:""}},SERAPHIC_ILLUMINATION:{name:"Seraphic Illumination",label:{zh:""}},SACRED_SOIL_MIT:{name:"Sacred Soil (Mitigation)",label:{zh:"[]"},mayNotBeCanceled:!0},SACRED_SOIL_ZONE:{name:"Sacred Soil",label:{zh:""},mayBeToggled:!0},EMERGENCY_TACTICS:{name:"Emergency Tactics",label:{zh:""}},DISSIPATION:{name:"Dissipation",label:{zh:""},mayNotBeCanceled:!0},EXCOGITATION:{name:"Excogitation",label:{zh:""}},CHAIN_STRATAGEM:{name:"Chain Stratagem",label:{zh:""}},IMPACT_IMMINENT:{name:"Impact Imminent",label:{zh:""}},BIOLYSIS:{name:"Biolysis",label:{zh:""}},RECITATION:{name:"Recitation",label:{zh:""}},FEY_UNION:{name:"Fey Union",label:{zh:""}},SERAPHIC_VEIL:{name:"Seraphic Veil",label:{zh:""}},PROTRACTION:{name:"Protraction",label:{zh:""}},EXPEDIENCE:{name:"Expedience",label:{zh:""}},DESPERATE_MEASURES:{name:"Desperate Measures",label:{zh:""}},BANEFUL_IMPACTION:{name:"Baneful Impaction",label:{zh:""}},SERAPHISM:{name:"Seraphism",label:{zh:""},mayNotBeCanceled:!0},SERAPHISM_REGEN:{name:"Seraphism (Regen)",label:{zh:"[]"}}}),U1=ie()({SERAPH_SUMMON_TIMER:{name:"Seraph Summon Timer",label:{zh:""}}}),P1=ie()({CORRUPTION_MASTERY_II:{name:"Corruption Mastery II",level:72},BROIL_MASTERY_III:{name:"Broil Mastery III",level:72},ENHANCED_SACRED_SOIL:{name:"Enhanced Sacred Soil",level:78},BROIL_MASTERY_IV:{name:"Broil Mastery IV",level:82},ART_OF_WAR_MASTERY:{name:"Art of War Mastery",level:82},ENHANCED_DEPLOYMENT_TACTICS:{name:"Enhanced Deployment Tactics",level:88},ENHANCED_CHAIN_STRATAGEM:{name:"Enhanced Chain Stratagem",level:92},TACTICIANS_MASTERY:{name:"Tactician's Mastery",level:94},SUCCOR_MASTERY:{name:"Succor Mastery",level:96},ENHANCED_RECITATION:{name:"Enhanced Recitation",level:98}}),w1={...k1,...qR,...U1},G1=ie()({DIAGNOSIS:{id:24284,name:"Diagnosis",label:{zh:""}},EUKRASIAN_DIAGNOSIS:{id:24291,name:"Eukrasian Diagnosis",label:{zh:""}},EUKRASIAN_DIAGNOSIS_POP:{name:"Pop Eukrasian Diagnosis",label:{zh:""}},HAIMA:{id:24305,name:"Haima",label:{zh:""}},HAIMA_POP:{name:"Pop Haima",label:{zh:""}},EGEIRO:{id:24287,name:"Egeiro",label:{zh:""}},PROGNOSIS:{id:24286,name:"Prognosis",label:{zh:""}},EUKRASIAN_PROGNOSIS:{id:24292,name:"Eukrasian Prognosis",label:{zh:""}},EUKRASIAN_PROGNOSIS_II:{id:37034,name:"Eukrasian Prognosis II",label:{zh:" II"}},EUKRASIAN_PROGNOSIS_POP:{name:"Pop Eukrasian Prognosis",label:{zh:""}},EUKRASIAN_PROGNOSIS_II_POP:{name:"Pop Eukrasian Prognosis II",label:{zh:" II "}},PANHAIMA:{id:24311,name:"Panhaima",label:{zh:""}},PANHAIMA_POP:{name:"Pop Panhaima",label:{zh:""}},PHYSIS_II:{id:24302,name:"Physis II",label:{zh:" II"}},HOLOS:{id:24310,name:"Holos",label:{zh:""}},PEPSIS:{id:24301,name:"Pepsis",label:{zh:""}},KARDIA:{id:24285,name:"Kardia",label:{zh:""}},EUKRASIA:{id:24290,name:"Eukrasia",label:{zh:""}},SOTERIA:{id:24294,name:"Soteria",label:{zh:""}},ICARUS:{id:24295,name:"Icarus",label:{zh:""}},ZOE:{id:24300,name:"Zoe",label:{zh:""}},KRASIS:{id:24317,name:"Krasis",label:{zh:""}},PHILOSOPHIA:{id:37035,name:"Philosophia",label:{zh:""}},RHIZOMATA:{id:24309,name:"Rhizomata",label:{zh:""}},DRUOCHOLE:{id:24296,name:"Druochole",label:{zh:""}},IXOCHOLE:{id:24299,name:"Ixochole",label:{zh:""}},KERACHOLE:{id:24298,name:"Kerachole",label:{zh:""}},TAUROCHOLE:{id:24303,name:"Taurochole",label:{zh:""}},DOSIS:{id:24283,name:"Dosis",label:{zh:""}},DOSIS_II:{id:24306,name:"Dosis II",label:{zh:" II"}},DOSIS_III:{id:24312,name:"Dosis III",label:{zh:" III"}},EUKRASIAN_DOSIS:{id:24293,name:"Eukrasian Dosis",label:{zh:""}},EUKRASIAN_DOSIS_II:{id:24308,name:"Eukrasian Dosis II",label:{zh:" II"}},EUKRASIAN_DOSIS_III:{id:24314,name:"Eukrasian Dosis III",label:{zh:" III"}},TOXIKON:{id:24304,name:"Toxikon",label:{zh:""}},TOXIKON_II:{id:24316,name:"Toxikon II",label:{zh:" II"}},DYSKRASIA:{id:24297,name:"Dyskrasia",label:{zh:""}},DYSKRASIA_II:{id:24315,name:"Dyskrasia II",label:{zh:" II"}},EUKRASIAN_DYSKRASIA:{id:37032,name:"Eukrasian Dyskrasia",label:{zh:""}},PHLEGMA:{id:24289,name:"Phlegma",label:{zh:""}},PHLEGMA_II:{id:24307,name:"Phlegma II",label:{zh:" II"}},PHLEGMA_III:{id:24313,name:"Phlegma III",label:{zh:" III"}},PSYCHE:{id:37033,name:"Psyche",label:{zh:""}},PNEUMA:{id:24318,name:"Pneuma",label:{zh:""}}}),B1=ie()({cd_HAIMA:{name:"cd_Haima"},cd_PANHAIMA:{name:"cd_PANHAIMA"},cd_PHYSIS:{name:"cd_PHYSIS",label:{zh:"CD"}},cd_HOLOS:{name:"cd_HOLOS"},cd_PEPSIS:{name:"cd_PEPSIS"},cd_KARDIA:{name:"cd_KARDIA"},cd_EUKRASIA:{name:"cd_EUKRASIA"},cd_SOTERIA:{name:"cd_SOTERIA"},cd_ICARUS:{name:"cd_ICARUS"},cd_ZOE:{name:"cd_ZOE"},cd_KRASIS:{name:"cd_KRASIS"},cd_PHILOSOPHIA:{name:"cd_PHILOSOPHIA"},cd_RHIZOMATA:{name:"cd_RHIZOMATA"},cd_DRUOCHOLE:{name:"cd_DRUOCHOLE"},cd_IXOCHOLE:{name:"cd_IXOCHOLE"},cd_KERACHOLE:{name:"cd_KERACHOLE"},cd_TAUROCHOLE:{name:"cd_TAUROCHOLE"},cd_PHLEGMA:{name:"cd_PHLEGMA"},cd_PSYCHE:{name:"cd_PSYCHE"},cd_PNEUMA:{name:"cd_PNEUMA"},cd_DIAGNOSIS_POP:{name:"cd_DIAGNOSIS_POP",label:{zh:"CD"}},cd_PROGNOSIS_POP:{name:"cd_PROGNOSIS_POP",label:{zh:"CD"}},cd_HAIMA_POP:{name:"cd_HAIMA_POP"},cd_PANHAIMA_POP:{name:"cd_PANHAIMA_POP"}}),F1=ie()({ADDERSGALL:{name:"Addersgall",label:{zh:""}},ADDERSTING:{name:"Addersting",label:{zh:""}}}),ZN=ie()({EUKRASIA:{id:2606,name:"Eukrasia",label:{zh:""}},EUKRASIAN_DIAGNOSIS:{id:2607,name:"Eukrasian Diagnosis",label:{zh:""}},DIFFERENTIAL_DIAGNOSIS:{id:2608,name:"Differential Diagnosis",label:{zh:""}},HAIMA:{id:2612,name:"Haima",label:{zh:""},mayNotBeCanceled:!0},HAIMATINON:{id:2642,name:"Haimatinon",label:{zh:""},maximumStacks:5,mayNotBeCanceled:!0},EUKRASIAN_PROGNOSIS:{id:2609,name:"Eukrasian Prognosis",label:{zh:""}},PANHAIMA:{id:2613,name:"Panhaima",label:{zh:""},mayNotBeCanceled:!0},PANHAIMATINON:{id:2643,name:"Panhaimatinon",label:{zh:""},maximumStacks:5,mayNotBeCanceled:!0},PHYSIS_II:{id:2620,name:"Physis II",label:{zh:" II"}},AUTOPHYSIS:{id:2621,name:"Autophysis",label:{zh:""}},KARDIA:{id:2604,name:"Kardia",label:{zh:""}},KARDION:{id:2605,name:"Kardion",label:{zh:""}},PHILOSOPHIA:{id:3898,name:"Philosophia",label:{zh:""}},EUDAIMONIA:{id:3899,name:"Eudaimonia",label:{zh:""}},SOTERIA:{id:2610,name:"Soteria",label:{zh:""},maximumStacks:4},ZOE:{id:2611,name:"Zoe",label:{zh:""}},KRASIS:{id:2622,name:"Krasis",label:{zh:""}},KERACHOLE:{id:2618,name:"Kerachole",label:{zh:""}},KERAKEIA:{id:2938,name:"Kerakeia",label:{zh:"[]"}},TAUROCHOLE:{id:2619,name:"Taurochole",label:{zh:""}},EUKRASIAN_DOSIS:{id:2614,name:"Eukrasian Dosis",label:{zh:""}},EUKRASIAN_DOSIS_II:{id:2615,name:"Eukrasian Dosis II",label:{zh:" II"}},EUKRASIAN_DOSIS_III:{id:2616,name:"Eukrasian Dosis III",label:{zh:" III"}},EUKRASIAN_DYSKRASIA:{id:3897,name:"Eukrasian Dyskrasia",label:{zh:""}},PNEUMA:{id:2623,name:"Pneuma",label:{zh:""}},HOLOS:{id:3003,name:"Holos",label:{zh:""}},HOLOSAKOS:{id:3365,name:"Holosakos",label:{zh:""}}}),j1=ie()({PEPSIS:{name:"Pepsis",label:{zh:""}}}),z1=ie()({OFFENSIVE_MAGIC_MASTERY:{name:"Offensive Magic Mastery",level:72},OFFENSIVE_MAGIC_MASTERY_II:{name:"Offensive Magic Mastery II",level:82},ENHANCED_KERACHOLE:{name:"Enhanced Kerachole",level:78},ENHANCED_ZOE:{name:"Enhanced Zoe",level:88},ENHANCED_SOTERIA:{name:"Enhanced Soteria",level:94},EUKRASIAN_PROGNOSIS_MASTERY:{name:"Eukrasian Prognosis Mastery",level:96},ENHANCED_PHYSIS_II:{name:"Enhanced Physis II",level:98}}),Y1={...F1,...ZN,...j1},QN=ie()({SUMMON_CARBUNCLE:{id:25798,name:"Summon Carbuncle",label:{zh:""}},RADIANT_AEGIS:{id:25799,name:"Radiant Aegis",label:{zh:""}},PHYSICK:{id:16230,name:"Physick",label:{zh:""}},GEMSHINE:{id:25883,name:"Gemshine",label:{zh:""}},FESTER:{id:181,name:"Fester",label:{zh:""}},ENERGY_DRAIN:{id:16508,name:"Energy Drain",label:{zh:""}},RESURRECTION:{id:173,name:"Resurrection",label:{zh:""}},OUTBURST:{id:16511,name:"Outburst",label:{zh:""}},PRECIOUS_BRILLIANCE:{id:25884,name:"Precious Brilliance",label:{zh:""}},RUBY_OUTBURST:{id:25814,name:"Ruby Outburst",label:{zh:""}},TOPAZ_OUTBURST:{id:25815,name:"Topaz Outburst",label:{zh:""}},EMERALD_OUTBURST:{id:25816,name:"Emerald Outburst",label:{zh:""}},SUMMON_IFRIT:{id:25805,name:"Summon Ifrit",label:{zh:""}},PAINFLARE:{id:3578,name:"Painflare",label:{zh:""}},SUMMON_TITAN:{id:25806,name:"Summon Titan",label:{zh:""}},SUMMON_GARUDA:{id:25807,name:"Summon Garuda",label:{zh:""}},ENERGY_SIPHON:{id:16510,name:"Energy Siphon",label:{zh:""}},RUBY_RUIN_III:{id:25817,name:"Ruby Ruin III",label:{zh:""}},TOPAZ_RUIN_III:{id:25818,name:"Topaz Ruin III",label:{zh:""}},EMERALD_RUIN_III:{id:25819,name:"Emerald Ruin III",label:{zh:""}},RUIN_III:{id:3579,name:"Ruin III",label:{zh:""}},ASTRAL_IMPULSE:{id:25820,name:"Astral Impulse",label:{zh:""}},ASTRAL_FLARE:{id:25821,name:"Astral Flare",label:{zh:""}},ASTRAL_FLOW:{id:25822,name:"Astral Flow",label:{zh:""}},DEATHFLARE:{id:3582,name:"Deathflare",label:{zh:""}},RUIN_IV:{id:7426,name:"Ruin IV",label:{zh:""}},SEARING_LIGHT:{id:25801,name:"Searing Light",label:{zh:""}},SUMMON_BAHAMUT:{id:7427,name:"Summon Bahamut",label:{zh:""}},ENKINDLE_BAHAMUT:{id:7429,name:"Enkindle Bahamut",label:{zh:""}},RUBY_RITE:{id:25823,name:"Ruby Rite",label:{zh:""}},TOPAZ_RITE:{id:25824,name:"Topaz Rite",label:{zh:""}},EMERALD_RITE:{id:25825,name:"Emerald Rite",label:{zh:""}},TRI_DISASTER:{id:25826,name:"Tri-disaster",label:{zh:""}},RUBY_DISASTER:{id:25827,name:"Ruby Disaster",label:{zh:""}},TOPAZ_DISASTER:{id:25828,name:"Topaz Disaster",label:{zh:""}},EMERALD_DISASTER:{id:25829,name:"Emerald Disaster",label:{zh:""}},SUMMON_PHOENIX:{id:25831,name:"Summon Phoenix",label:{zh:""}},FOUNTAIN_OF_FIRE:{id:16514,name:"Fountain of Fire",label:{zh:""}},BRAND_OF_PURGATORY:{id:16515,name:"Brand of Purgatory",label:{zh:""}},REKINDLE:{id:25830,name:"Rekindle",label:{zh:""}},ENKINDLE_PHOENIX:{id:16516,name:"Enkindle Phoenix",label:{zh:""}},RUBY_CATASTROPHE:{id:25832,name:"Ruby Catastrophe",label:{zh:""}},TOPAZ_CATASTROPHE:{id:25833,name:"Topaz Catastrophe",label:{zh:""}},EMERALD_CATASTROPHE:{id:25834,name:"Emerald Catastrophe",label:{zh:""}},CRIMSON_CYCLONE:{id:25835,name:"Crimson Cyclone",label:{zh:""}},CRIMSON_STRIKE:{id:25885,name:"Crimson Strike",label:{zh:""}},MOUNTAIN_BUSTER:{id:25836,name:"Mountain Buster",label:{zh:""}},SLIPSTREAM:{id:25837,name:"Slipstream",label:{zh:""}},SUMMON_IFRIT_II:{id:25838,name:"Summon Ifrit II",label:{zh:" II"}},SUMMON_TITAN_II:{id:25839,name:"Summon Titan II",label:{zh:" II"}},SUMMON_GARUDA_II:{id:25840,name:"Summon Garuda II",label:{zh:" II"}},NECROTIZE:{id:36990,name:"Necrotize",label:{zh:""}},SEARING_FLASH:{id:36991,name:"Searing Flash",label:{zh:""}},SUMMON_SOLAR_BAHAMUT:{id:36992,name:"Summon Solar Bahamut",label:{zh:""}},UMBRAL_IMPULSE:{id:36994,name:"Umbral Impulse",label:{zh:""}},UMBRAL_FLARE:{id:36995,name:"Umbral Flare",label:{zh:""}},SUNFLARE:{id:36996,name:"Sunflare",label:{zh:""}},ENKINDLE_SOLAR_BAHAMUT:{id:36998,name:"Enkindle Solar Bahamut",label:{zh:""}},LUX_SOLARIS:{id:36997,name:"Lux Solaris",label:{zh:""}},INFERNO:{id:25852,name:"Inferno",label:{zh:""}},EARTHEN_FURY:{id:25853,name:"Earthen Fury",label:{zh:""}},AERIAL_BLAST:{id:25854,name:"Aerial Blast",label:{zh:""}},WYRMWAVE:{id:7428,name:"Wyrmwave",label:{zh:""}},SCARLET_FLAME:{id:16519,name:"Scarlet Flame",label:{zh:""}},LUXWAVE:{id:36993,name:"Luxwave",label:{zh:""}},AKH_MORN:{id:7449,name:"Akh Morn",label:{zh:""}},REVELATION:{id:16518,name:"Revelation",label:{zh:""}},EXODUS:{id:36999,name:"Exodus",label:{zh:""}}}),K1=ie()({cd_RADIANT_AEGIS:{name:"cd_RADIANT_AEGIS"},cd_ASTRAL_FLOW:{name:"cd_ASTRAL_FLOW"},cd_ENKINDLE:{name:"cd_ENKINDLE",label:{zh:"CD//"}},cd_DEMI_SUMMON:{name:"cd_DEMI_SUMMON",label:{zh:"CD"}},cd_ENERGY_DRAIN:{name:"cd_ENERGY_DRAIN"},cd_AETHERFLOW:{name:"cd_AETHERFLOW",label:{zh:"CD"}},cd_SEARING_LIGHT:{name:"cd_SEARING_LIGHT"},cd_SEARING_FLASH:{name:"cd_SEARING_FLASH"},cd_LUX_SOLARIS:{name:"cd_LUX_SOLARIS"},cd_MOUNTAIN_BUSTER:{name:"cd_MOUNTAIN_BUSTER"},cd_SUMMON_LOCKOUT:{name:"cd_SUMMON_LOCKOUT"}}),V1=ie()({AETHERFLOW:{name:"Aetherflow",label:{zh:""}},RUBY_ARCANUM:{name:"Ruby Arcanum",label:{zh:""}},TOPAZ_ARCANUM:{name:"Topaz Arcanum",label:{zh:""}},EMERALD_ARCANUM:{name:"Emerald Arcanum",label:{zh:""}},FIRE_ATTUNEMENT:{name:"Fire Attunement",label:{zh:""}},EARTH_ATTUNEMENT:{name:"Earth Attunement",label:{zh:""}},WIND_ATTUNEMENT:{name:"Wind Attunement",label:{zh:""}},ACTIVE_DEMI:{name:"Active Demi",label:{zh:""}}}),ZR=ie()({AETHERFLOW:{name:"Aetherflow",maximumStacks:2,label:{zh:""}},CRIMSON_STRIKE_READY:{name:"Crimson Strike Ready",label:{zh:""}},EVERLASTING_FLIGHT:{name:"Everlasting Flight",label:{zh:""}},FURTHER_RUIN:{name:"Further Ruin",label:{zh:""}},GARUDAS_FAVOR:{name:"Garuda's Favor",label:{zh:""}},IFRITS_FAVOR:{name:"Ifrit's Favor",label:{zh:""}},RADIANT_AEGIS:{name:"Radiant Aegis",label:{zh:""}},REFULGENT_LUX:{name:"Refulgent Lux",label:{zh:""}},REKINDLE:{name:"Rekindle",label:{zh:""}},RUBYS_GLIMMER:{name:"Ruby's Glimmer",label:{zh:""}},SEARING_LIGHT:{name:"Searing Light",label:{zh:""}},SLIPSTREAM:{name:"Slipstream",mayBeToggled:!0,label:{zh:""}},TITANS_FAVOR:{name:"Titan's Favor",label:{zh:""}},UNDYING_FLAME:{name:"Undying Flame",label:{zh:""}}}),W1=ie()({NEXT_DEMI_CYCLE:{name:"Next Demi Cycle",label:{zh:""}},DEMI_AUTO:{name:"Demi Auto-attack",label:{zh:""}}}),X1=ie()({RUIN_MASTERY_III:{name:"Ruin Mastery III",level:72},OUTBURST_MASTERY:{name:"Outburst Mastery",level:74},ENHANCED_SUMMON_BAHAMUT:{name:"Enhanced Summon Bahamut",level:80},OUTBURST_MASTERY_II:{name:"Outburst Mastery II",level:82},RUIN_MASTERY_IV:{name:"Ruin Mastery IV",level:84},ELEMENTAL_MASTERY:{name:"Elemental Mastery",level:86},ENHANCED_RADIANT_AEGIS:{name:"Enhanced Radiant Aegis",level:88},ENKINDLE_II:{name:"Enkindle II",level:90},ENHANCED_FESTER:{name:"Enhanced Fester",level:92},ARCANE_MASTERY:{name:"Arcane Mastery",level:94},ENHANCED_SEARING_LIGHT:{name:"Enhanced Searing Light",level:96},ENHANCED_SUMMON_BAHAMUT_II:{name:"Enhanced Summon Bahamut II",level:100}}),q1={...V1,...ZR,...W1},Z1=ie()({STEEL_FANGS:{id:34606,name:"Steel Fangs",label:{zh:"",ja:""}},HUNTERS_STING:{id:34608,name:"Hunter's Sting",label:{zh:"",ja:""}},REAVING_FANGS:{id:34607,name:"Reaving Fangs",label:{zh:"",ja:""}},WRITHING_SNAP:{id:34632,name:"Writhing Snap",label:{zh:"",ja:""}},SWIFTSKINS_STING:{id:34609,name:"Swiftskin's Sting",label:{zh:"",ja:""}},STEEL_MAW:{id:34614,name:"Steel Maw",label:{zh:"",ja:""}},FLANKSTING_STRIKE:{id:34610,name:"Flanksting Strike",label:{zh:"",ja:""}},FLANKSBANE_FANG:{id:34611,name:"Flanksbane Fang",label:{zh:"",ja:""}},HINDSTING_STRIKE:{id:34612,name:"Hindsting Strike",label:{zh:"",ja:""}},HINDSBANE_FANG:{id:34613,name:"Hindsbane Fang",label:{zh:"",ja:""}},REAVING_MAW:{id:34615,name:"Reaving Maw",label:{zh:"",ja:""}},SLITHER:{id:34646,name:"Slither",label:{zh:"",ja:""}},HUNTERS_BITE:{id:34616,name:"Hunter's Bite",label:{zh:"",ja:""}},SWIFTSKINS_BITE:{id:34617,name:"Swiftskin's Bite",label:{zh:"",ja:""}},JAGGED_MAW:{id:34618,name:"Jagged Maw",label:{zh:"",ja:""}},BLOODIED_MAW:{id:34619,name:"Bloodied Maw",label:{zh:"",ja:""}},SERPENTS_TAIL:{id:35920,name:"Serpent's Tail",label:{zh:"",ja:""}},DEATH_RATTLE:{id:34634,name:"Death Rattle",label:{zh:"",ja:""}},LAST_LASH:{id:34635,name:"Last Lash",label:{zh:"",ja:""}},VICEWINDER:{id:34620,name:"Vicewinder",label:{zh:"",ja:""}},HUNTERS_COIL:{id:34621,name:"Hunter's Coil",label:{zh:"",ja:""}},SWIFTSKINS_COIL:{id:34622,name:"Swiftskin's Coil",label:{zh:"",ja:""}},VICEPIT:{id:34623,name:"Vicepit",label:{zh:"",ja:""}},HUNTERS_DEN:{id:34624,name:"Hunter's Den",label:{zh:"",ja:""}},SWIFTSKINS_DEN:{id:34625,name:"Swiftskin's Den",label:{zh:"",ja:""}},TWINFANG:{id:35921,name:"Twinfang",label:{zh:"",ja:""}},TWINBLOOD:{id:35922,name:"Twinblood",label:{zh:"",ja:""}},TWINFANG_BITE:{id:34636,name:"Twinfang Bite",label:{zh:"",ja:""}},TWINBLOOD_BITE:{id:34637,name:"Twinblood Bite",label:{zh:"",ja:""}},TWINFANG_THRESH:{id:34638,name:"Twinfang Thresh",label:{zh:"",ja:""}},TWINBLOOD_THRESH:{id:34639,name:"Twinblood Thresh",label:{zh:"",ja:""}},UNCOILED_FURY:{id:34633,name:"Uncoiled Fury",label:{zh:"",ja:""}},SERPENTS_IRE:{id:34647,name:"Serpent's Ire",label:{zh:"",ja:""}},REAWAKEN:{id:34626,name:"Reawaken",label:{zh:"",ja:""}},FIRST_GENERATION:{id:34627,name:"First Generation",label:{zh:"",ja:""}},SECOND_GENERATION:{id:34628,name:"Second Generation",label:{zh:"",ja:""}},THIRD_GENERATION:{id:34629,name:"Third Generation",label:{zh:"",ja:""}},FOURTH_GENERATION:{id:34630,name:"Fourth Generation",label:{zh:"",ja:""}},UNCOILED_TWINFANG:{id:34644,name:"Uncoiled Twinfang",label:{zh:"",ja:""}},UNCOILED_TWINBLOOD:{id:34645,name:"Uncoiled Twinblood",label:{zh:"",ja:""}},OUROBOROS:{id:34631,name:"Ouroboros",label:{zh:"",ja:""}},FIRST_LEGACY:{id:34640,name:"First Legacy",label:{zh:"",ja:""}},SECOND_LEGACY:{id:34641,name:"Second Legacy",label:{zh:"",ja:""}},THIRD_LEGACY:{id:34642,name:"Third Legacy",label:{zh:"",ja:""}},FOURTH_LEGACY:{id:34643,name:"Fourth Legacy",label:{zh:"",ja:""}}}),Q1=ie()({cd_SERPENTS_IRE:{name:"cd_SerpentsIre"},cd_VICEWINDER:{name:"cd_Vicewinder"},cd_SLITHER:{name:"cd_Slither"},cd_SERPENTS_TAIL:{name:"cd_SerpentsTail"},cd_TWINFANG:{name:"cd_Twinfang"},cd_TWINBLOOD:{name:"cd_Twinblood"}}),J1=ie()({RATTLING_COIL:{name:"Rattling Coil",label:{zh:""}},SERPENT_OFFERINGS:{name:"Serpent Offerings",label:{zh:""}},ANGUINE_TRIBUTE:{name:"Anguine Tribute",label:{zh:""}}}),QR=ie()({HUNTERS_INSTINCT:{name:"Hunter's Instinct",label:{zh:""}},SWIFTSCALED:{name:"Swiftscaled",label:{zh:""}},HONED_STEEL:{name:"Honed Steel",label:{zh:""}},HONED_REAVERS:{name:"Honed Reavers",label:{zh:""}},FLANKSTUNG_VENOM:{name:"Flankstung Venom",label:{zh:""}},HINDSTUNG_VENOM:{name:"Hindstung Venom",label:{zh:""}},FLANKSBANE_VENOM:{name:"Flanksbane Venom",label:{zh:""}},HINDSBANE_VENOM:{name:"Hindsbane Venom",label:{zh:""}},GRIMSKINS_VENOM:{name:"Grimskin's Venom",label:{zh:""}},GRIMHUNTERS_VENOM:{name:"Grimhunter's Venom",label:{zh:""}},HUNTERS_VENOM:{name:"Hunter's Venom",label:{zh:""}},SWIFTSKINS_VENOM:{name:"Swiftskin's Venom",label:{zh:""}},POISED_FOR_TWINFANG:{name:"Poised for Twinfang",label:{zh:""}},POISED_FOR_TWINBLOOD:{name:"Poised for Twinblood",label:{zh:""}},FELLHUNTERS_VENOM:{name:"Fellhunter's Venom",label:{zh:""}},FELLSKINS_VENOM:{name:"Fellskin's Venom",label:{zh:""}},READY_TO_REAWAKEN:{name:"Ready to Reawaken",label:{zh:""}},REAWAKENED:{name:"Reawakened",label:{zh:""},mayNotBeCanceled:!0}}),$1=ie()({VPR_COMBO:{name:"VPR Combo"},DEATH_RATTLE_READY:{name:"Death Rattle Ready"},VPR_AOE_COMBO:{name:"VPR AoE Combo"},LAST_LASH_READY:{name:"Last Lash Ready"},HUNTERS_COIL_READY:{name:"Hunter's Coil Ready"},SWIFTSKINS_COIL_READY:{name:"Swiftskin's Coil Ready"},COIL_OGCD_READY:{name:"Coil oGCD Ready"},HUNTERS_DEN_READY:{name:"Hunter's Den Ready"},SWIFTSKINS_DEN_READY:{name:"Swiftskin's Den Ready"},DEN_OGCD_READY:{name:"Den oGCD Ready"},UNCOILED_OGCD_READY:{name:"Uncoiled oGCD Ready"},REAWAKEN_COMBO:{name:"Reawaken Combo"},LEGACY_READY:{name:"Legacy Ready"}}),ex=ie()({MELEE_MASTERY_VPR:{name:"Melee Mastery VPR",level:74},VIPERS_BITE:{name:"Viper's Bite",level:75},VIPERS_THRESH:{name:"Viper's Thresh",level:80},VIPERS_RATTLE:{name:"Viper's Rattle",level:82},ENHANCED_SLITHER:{name:"Enhanced Slither",level:84},MELEE_MASTERY_II_VPR:{name:"Melee Mastery II VPR",level:84},ENHANCED_VIPERS_RATTLE:{name:"Enhanced Viper's Rattle",level:88},SERPENTS_LINEAGE:{name:"Serpent's Lineage",level:90},UNCOILED_FANGS:{name:"Uncoiled Fangs",level:92},ENHANCED_SERPENTS_LINEAGE:{name:"Enhanced Serpent's Lineage",level:96},SERPENTS_LEGACY:{name:"Serpent's Legacy",level:100}}),tx={...J1,...QR,...$1},nx=ie()({HEAVY_SWING:{id:31,name:"Heavy Swing",label:{zh:""}},MAIM:{id:37,name:"Maim",label:{zh:""}},STORMS_PATH:{id:42,name:"Storm's Path",label:{zh:""}},STORMS_EYE:{id:45,name:"Storm's Eye",label:{zh:""}},FELL_CLEAVE:{id:3549,name:"Fell Cleave",label:{zh:""}},UPHEAVAL:{id:7387,name:"Upheaval",label:{zh:""}},ONSLAUGHT:{id:7386,name:"Onslaught",label:{zh:""}},TOMAHAWK:{id:46,name:"Tomahawk",label:{zh:""}},OVERPOWER:{id:41,name:"Overpower",label:{zh:""}},MYTHRIL_TEMPEST:{id:16462,name:"Mythril Tempest",label:{zh:""}},DECIMATE:{id:3550,name:"Decimate",label:{zh:""}},OROGENY:{id:25752,name:"Orogeny",label:{zh:""}},INNER_RELEASE:{id:7389,name:"Inner Release",label:{zh:""}},PRIMAL_WRATH:{id:36924,name:"Primal Wrath",label:{zh:""}},PRIMAL_REND:{id:25753,name:"Primal Rend",label:{zh:""}},PRIMAL_RUINATION:{id:36925,name:"Primal Ruination",label:{zh:""}},INFURIATE:{id:52,name:"Infuriate",label:{zh:""}},INNER_CHAOS:{id:16465,name:"Inner Chaos",label:{zh:""}},CHAOTIC_CYCLONE:{id:16463,name:"Chaotic Cyclone",label:{zh:""}},THRILL_OF_BATTLE:{id:40,name:"Thrill of Battle",label:{zh:""}},EQUILIBRIUM:{id:3552,name:"Equilibrium",label:{zh:""}},SHAKE_IT_OFF:{id:7388,name:"Shake It Off",label:{zh:""}},RAW_INTUITION:{id:3551,name:"Raw Intuition",label:{zh:""}},NASCENT_FLASH:{id:16464,name:"Nascent Flash",label:{zh:""}},BLOODWHETTING:{id:25751,name:"Bloodwhetting",label:{zh:""}},VENGEANCE:{id:44,name:"Vengeance",label:{zh:""}},DAMNATION:{id:36923,name:"Damnation",label:{zh:""}},HOLMGANG:{id:43,name:"Holmgang",label:{zh:""}},DEFIANCE:{id:48,name:"Defiance",label:{zh:""}},RELEASE_DEFIANCE:{id:32066,name:"Release Defiance",label:{zh:""}}}),ax=ie()({cd_INNER_RELEASE:{name:"cd_InnerRelease"},cd_PRIMAL_WRATH:{name:"cd_PrimalWrath"},cd_UPHEAVAL:{name:"cd_Upheaval"},cd_ONSLAUGHT:{name:"cd_Onslaught"},cd_INFURIATE:{name:"cd_Infuriate"},cd_VENGEANCE:{name:"cd_Vengeance"},cd_THRILL_OF_BATTLE:{name:"cd_ThrillOfBattle"},cd_RAW_INTUITION:{name:"cd_RawIntuition"},cd_EQUILIBRIUM:{name:"cd_Equilibrium"},cd_SHAKE_IT_OFF:{name:"cd_ShakeItOff"},cd_HOLMGANG:{name:"cd_Holmgang"},cd_DEFIANCE:{name:"cd_Defiance"},cd_RELEASE_DEFIANCE:{name:"cd_ReleaseDefiance"}}),ix=ie()({BEAST_GAUGE:{name:"Beast Gauge",label:{zh:""}}}),JR=ie()({SURGING_TEMPEST:{name:"Surging Tempest",label:{zh:"buff"}},INNER_RELEASE:{name:"Inner Release",label:{zh:"buff"},maximumStacks:3},INNER_STRENGTH:{name:"Inner Strength",label:{zh:"buff"}},BURGEONING_FURY:{name:"Burgeoning Fury",label:{zh:"buff"},maximumStacks:3},WRATHFUL:{name:"Wrathful",label:{zh:""}},PRIMAL_REND_READY:{name:"Primal Rend Ready",label:{zh:""}},PRIMAL_RUINATION_READY:{name:"Primal Ruination Ready",label:{zh:""}},NASCENT_CHAOS:{name:"Nascent Chaos",label:{zh:"buff"}},NASCENT_FLASH:{name:"Nascent Flash",label:{zh:"buff"}},THRILL_OF_BATTLE:{name:"Thrill of Battle",label:{zh:""}},EQUILIBRIUM:{name:"Equilibrium",label:{zh:"hot"}},SHAKE_IT_OFF:{name:"Shake It Off",label:{zh:""}},SHAKE_IT_OFF_OVER_TIME:{name:"Shake It Off Over Time",label:{zh:"hot"}},RAW_INTUITION:{name:"Raw Intuition",label:{zh:"buff"}},STEM_THE_TIDE:{name:"Stem the Tide",label:{zh:"buff"}},STEM_THE_FLOW:{name:"Stem the Flow",label:{zh:"buff"}},BLOODWHETTING:{name:"Bloodwhetting",label:{zh:"buff"}},VENGEANCE:{name:"Vengeance",label:{zh:"30"}},DAMNATION:{name:"Damnation",label:{zh:"40"}},PRIMEVAL_IMPULSE:{name:"Primeval Impulse",label:{zh:"hot"}},HOLMGANG:{name:"Holmgang",label:{zh:"buff"}},DEFIANCE:{name:"Defiance",label:{zh:"buff"},mayNotBeCanceled:!0}}),ox=ie()({STORM_COMBO:{name:"Storm Combo",label:{zh:""}},TEMPEST_COMBO:{name:"Tempest Combo",label:{zh:"aoe"}}}),lx=ie()({NASCENT_CHAOS:{name:"Nascent Chaos",level:72},MASTERING_THE_BEAST:{name:"Mastering the Beast",level:74},ENHANCED_SHAKE_IT_OFF:{name:"Enhanced Shake It Off",level:76},ENHANCED_THRILL_OF_BATTLE:{name:"Enhanced Thrill of Battle",level:78},RAW_INTUITION_MASTERY:{name:"Raw Intuition Mastery",level:82},ENHANCED_NASCENT_FLASH:{name:"Enhanced Nascent Flash",level:82},ENHANCED_EQUILIBRIUM:{name:"Enhanced Equilibrium",level:84},ENHANCED_ONSLAUGHT:{name:"Enhanced Onslaught",level:88},VENGEANCE_MASTERY:{name:"Vengeance Mastery",level:92},ENHANCED_INNER_RELEASE:{name:"Enhanced Inner Release",level:96},ENHANCED_PRIMAL_REND:{name:"Enhanced Primal Rend",level:100}}),sx={...ix,...JR,...ox},rx=ie()({CURE:{id:120,name:"Cure",label:{zh:"",ja:""}},MEDICA:{id:124,name:"Medica",label:{zh:"",ja:""}},RAISE:{id:125,name:"Raise",label:{zh:"",ja:""}},CURE_II:{id:135,name:"Cure II",label:{zh:"",ja:""}},PRESENCE_OF_MIND:{id:136,name:"Presence of Mind",label:{zh:"",ja:""}},REGEN:{id:137,name:"Regen",label:{zh:"",ja:""}},CURE_III:{id:131,name:"Cure III",label:{zh:"",ja:""}},AETHERIAL_SHIFT:{id:37008,name:"Aetherial Shift",label:{zh:"",ja:""}},HOLY:{id:139,name:"Holy",label:{zh:"",ja:""}},AERO_II:{id:132,name:"Aero II",label:{zh:"",ja:""}},MEDICA_II:{id:133,name:"Medica II",label:{zh:"",ja:""}},BENEDICTION:{id:140,name:"Benediction",label:{zh:"",ja:""}},AFFLATUS_SOLACE:{id:16531,name:"Afflatus Solace",label:{zh:"",ja:""}},ASYLUM:{id:3569,name:"Asylum",label:{zh:"",ja:""}},ASSIZE:{id:3571,name:"Assize",label:{zh:"",ja:""}},THIN_AIR:{id:7430,name:"Thin Air",label:{zh:"",ja:""}},TETRAGRAMMATON:{id:3570,name:"Tetragrammaton",label:{zh:"",ja:""}},STONE_IV:{id:7431,name:"Stone IV",label:{zh:"",ja:""}},DIVINE_BENISON:{id:7432,name:"Divine Benison",label:{zh:"",ja:""}},PLENARY_INDULGENCE:{id:7433,name:"Plenary Indulgence",label:{zh:"",ja:""}},DIA:{id:16532,name:"Dia",label:{zh:"",ja:""}},GLARE:{id:16533,name:"Glare",label:{zh:"",ja:""}},AFFLATUS_MISERY:{id:16535,name:"Afflatus Misery",label:{zh:"",ja:""}},AFFLATUS_RAPTURE:{id:16534,name:"Afflatus Rapture",label:{zh:"",ja:""}},TEMPERANCE:{id:16536,name:"Temperance",label:{zh:"",ja:""}},GLARE_III:{id:25859,name:"Glare III",label:{zh:"",ja:""}},HOLY_III:{id:25860,name:"Holy III",label:{zh:"",ja:""}},AQUAVEIL:{id:25861,name:"Aquaveil",label:{zh:"",ja:""}},LITURGY_OF_THE_BELL:{id:25862,name:"Liturgy of the Bell",label:{zh:"",ja:""}},LITURGY_POP:{name:"Pop Liturgy of the Bell",label:{zh:""}},LITURGY_TRIGGER:{name:"Trigger Liturgy of the Bell",label:{zh:""}},GLARE_IV:{id:37009,name:"Glare IV",label:{zh:"",ja:""}},MEDICA_III:{id:37010,name:"Medica III",label:{zh:"",ja:""}},DIVINE_CARESS:{id:37011,name:"Divine Caress",label:{zh:"",ja:""}}}),cx=ie()({cd_PRESENCE_OF_MIND:{name:"cd_PresenceOfMind"},cd_AETHERIAL_SHIFT:{name:"cd_AetherialShift"},cd_BENEDICTION:{name:"cd_Benediction"},cd_ASYLUM:{name:"cd_Asylum"},cd_ASSIZE:{name:"cd_Assize"},cd_THIN_AIR:{name:"cd_ThinAir"},cd_TETRAGRAMMATON:{name:"cd_Tetragrammaton"},cd_DIVINE_BENISON:{name:"cd_DivineBenison"},cd_PLENARY_INDULGENCE:{name:"cd_PlenaryIndulgence"},cd_TEMPERANCE:{name:"cd_Temperance"},cd_AQUAVEIL:{name:"cd_Aquaveil"},cd_LITURGY_OF_THE_BELL:{name:"cd_LiturgyOfTheBell"},cd_LITURGY_POP:{name:"cd_LiturgyPop"},cd_LITURGY_TRIGGER:{name:"cd_LiturgyTrigger"},cd_DIVINE_CARESS:{name:"cd_DivineCaress"}}),ux=ie()({LILLIES:{name:"Lillies",maximumCharges:3,label:{zh:""}},LILY_TIMER:{name:"Lily Timer",label:{zh:""}},BLOOD_LILY:{name:"Blood Lily",maximumCharges:3,label:{zh:""}}}),$R=ie()({FREECURE:{name:"Freecure",label:{zh:""}},PRESENCE_OF_MIND:{name:"Presence of Mind",label:{zh:""}},SACRED_SIGHT:{name:"Sacred Sight",maximumStacks:3,label:{zh:""}},REGEN:{name:"Regen",label:{zh:""}},AERO_II:{name:"Aero II",label:{zh:""}},MEDICA_II:{name:"Medica II",label:{zh:""}},ASYLUM:{name:"Asylum",mayBeToggled:!0,label:{zh:""}},THIN_AIR:{name:"Thin Air",label:{zh:""}},DIVINE_BENISON:{name:"Divine Benison",label:{zh:""}},CONFESSION:{name:"Confession",label:{zh:""}},DIA:{name:"Dia",label:{zh:""}},TEMPERANCE:{name:"Temperance",label:{zh:""}},DIVINE_GRACE:{name:"Divine Grace",label:{zh:""}},AQUAVEIL:{name:"Aquaveil",label:{zh:""}},LITURGY_OF_THE_BELL:{name:"Liturgy of the Bell",maximumStacks:5,mayNotBeCanceled:!0,label:{zh:""}},MEDICA_III:{name:"Medica III",label:{zh:""}},DIVINE_CARESS:{name:"Divine Caress",label:{zh:""}},DIVINE_AURA:{name:"Divine Aura",label:{zh:""}}}),dx=ie()({}),hx=ie()({AERO_MASTERY_II:{name:"Aero Mastery II",level:72},STONE_MASTERY_IV:{name:"Stone Mastery IV",level:72},TRANSCENDENT_AFFLATUS:{name:"Transcendent Afflatus",level:74},ENHANCED_ASYLUM:{name:"Enhanced Asylum",level:78},GLARE_MASTERY:{name:"Glare Mastery",level:82},HOLY_MASTERY:{name:"Holy Mastery",level:82},ENHANCED_DIVINE_BENISON:{name:"Enhanced Divine Benison",level:88},ENHANCED_PRESENCE_OF_MIND:{name:"Enhanced Presence of Mind",level:92},WHITE_MAGIC_MASTERY:{name:"White Magic Mastery",level:94},MEDICA_MASTERY:{name:"Medica Mastery",level:96},ENHANCED_TETRAGRAMMATON:{name:"Enhanced Tetragrammaton",level:98},ENHANCED_TEMPERANCE:{name:"Enhanced Temperance",level:100}}),fx={...ux,...$R,...dx},Ex=ie()({WATER_CANNON:{name:"Water Cannon",label:{zh:"(2200)"},id:11385},SONIC_BOOM:{name:"Sonic Boom",label:{zh:"(1210)"},id:18308},SHARPENED_KNIFE:{name:"Sharpened Knife",label:{zh:"(1220)"},id:11400},HYDRO_PULL:{name:"Hydro Pull",label:{zh:"(2220)"},id:23282},MOON_FLUTE:{name:"Moon Flute",label:{zh:""},id:11415},DIAMONDBACK:{name:"Diamondback",label:{zh:""},id:11424},SONG_OF_TORMENT:{name:"Song of Torment",label:{zh:""},id:11386},WHISTLE:{name:"Whistle",label:{zh:""},id:18309},BRISTLE:{name:"Bristle",label:{zh:""},id:11393},TINGLE:{name:"Tingle",label:{zh:""},id:23265},FINAL_STING:{name:"Final Sting",label:{zh:""},id:11407},COLD_FOG:{name:"Cold Fog",label:{zh:""},id:23267},WHITE_DEATH:{name:"White Death",label:{zh:""},id:23268},POP_COLD_FOG:{name:"Pop Cold Fog",label:{zh:""}},PHANTOM_FLURRY:{name:"Phantom Flurry",label:{zh:""},id:23288},END_PHANTOM_FLURRY:{name:"End Phantom Flurry",label:{zh:""},id:23289},MATRA_MAGIC:{name:"Matra Magic",label:{zh:""},id:23285},WINGED_REPROBATION:{name:"Winged Reprobation",label:{zh:""},id:34576},CONVICTION_MARCATO:{name:"Conviction Marcato",label:{zh:""},id:34574},REVENGE_BLAST:{name:"Revenge Blast",label:{zh:""},id:18316},WILD_RAGE:{name:"Wild Rage",label:{zh:""},id:34568},GOBLIN_PUNCH:{name:"Goblin Punch",label:{zh:""},id:34563},THE_ROSE_OF_DESTRUCTION:{name:"The Rose of Destruction",label:{zh:""},id:23275},ERUPTION:{name:"Eruption",label:{zh:""},id:11427},FEATHER_RAIN:{name:"Feather Rain",label:{zh:""},id:11426},MOUNTAIN_BUSTER:{name:"Mountain Buster",label:{zh:""},id:11428},SHOCK_STRIKE:{name:"Shock Strike",label:{zh:""},id:11429},GLASS_DANCE:{name:"Glass Dance",label:{zh:""},id:11430},QUASAR:{name:"Quasar",label:{zh:""},id:18324},J_KICK:{name:"J Kick",label:{zh:""},id:18325},TRIPLE_TRIDENT:{name:"Triple Trident",label:{zh:""},id:23264},BOTH_ENDS:{name:"Both Ends",label:{zh:""},id:23287},NIGHTBLOOM:{name:"Nightbloom",label:{zh:""},id:23290},SEA_SHANTY:{name:"Sea Shanty",label:{zh:""},id:34580},APOKALYPSIS:{name:"Apokalypsis",label:{zh:""},id:34581},BEING_MORTAL:{name:"Being Mortal",label:{zh:""},id:34582},BREATH_OF_MAGIC:{name:"Breath of Magic",label:{zh:""},id:34567},MORTAL_FLAME:{name:"Mortal Flame",label:{zh:""},id:34579},SURPANAKHA:{name:"Surpanakha",label:{zh:""},id:18323}}),mx=ie()({cd_ERUPTION:{name:"cd_Eruption",label:{zh:"CD: /"}},cd_SHOCK_STRIKE:{name:"cd_Shock_Strike",label:{zh:"CD: /"}},cd_GLASS_DANCE:{name:"cd_Glass_Dance",label:{zh:"CD: "}},cd_SURPANAKHA:{name:"cd_Surpanakha",label:{zh:"CD: "}},cd_QUASAR:{name:"cd_Quasar",label:{zh:"CD: /"}},cd_NIGHTBLOOM:{name:"cd_Nightbloom",label:{zh:"CD: /"}},cd_SEA_SHANTY:{name:"cd_Sea_Shanty",label:{zh:"CD: "}},cd_BEING_MORTAL:{name:"cd_Being_Mortal",label:{zh:"CD: /"}},cd_COLD_FOG:{name:"cd_Cold_Fog",label:{zh:"CD: "}},cd_TRIPLE_TRIDENT:{name:"cd_Triple_Trident",label:{zh:"CD: "}},cd_PHANTOM_FLURRY:{name:"cd_Phantom_Flurry",label:{zh:"CD: "}},cd_COLD_FOG_POP:{name:"cd_Cold_Fog_Pop",label:{zh:"CD: "}},cd_MATRA_MAGIC:{name:"cd_Matra_Magic",label:{zh:"CD: "}},cd_WINGED_REPROBATION:{name:"cd_Winged_Reprobation",label:{zh:"CD: "}},cd_THE_ROSE_OF_DESTRUCTION:{name:"cd_The_Rose_of_Destruction",label:{zh:"CD: "}},cd_SURPANAKHA_LOCKOUT:{name:"cd_SurpanakhaLockout",label:{zh:"CD: "}}}),Ax=ie()({}),eT=ie()({NIGHTBLOOM:{name:"Bleeding",label:{zh:""}},SONG_OF_TORMENT:{name:"Bleeding",label:{zh:""}},FEATHER_RAIN:{name:"Feather Rain",label:{zh:""}},WAXING_NOCTURNE:{name:"Waxing Nocturne",label:{zh:""}},WANING_NOCTURNE:{name:"Waning Nocturne",label:{zh:""}},WHISTLE:{name:"Whistle",label:{zh:""}},BRISTLE:{name:"Bristle",label:{zh:""}},TINGLE:{name:"Tingle",label:{zh:""}},COLD_FOG:{name:"Cold Fog",label:{zh:""}},TOUCH_OF_FROST:{name:"Touch of Frost",label:{zh:""}},PHANTOM_FLURRY:{name:"Phantom Flurry",label:{zh:""}},DIAMONDBACK:{name:"Diamondback",label:{zh:""}},APOKALYPSIS:{name:"Apokalypsis",label:{zh:""}},WINGED_REDEMPTION:{name:"Winged Redemption",label:{zh:""}},BREATH_OF_MAGIC:{name:"Breath of Magic",label:{zh:""}},MORTAL_FLAME:{name:"Mortal Flame",label:{zh:""}},WINGED_REPROBATION:{name:"Winged Reprobation",label:{zh:""},maximumStacks:4},SURPANAKHAS_FURY:{name:"Surpanakha's Fury",label:{zh:""},maximumStacks:4},BRUSH_WITH_DEATH:{name:"Brush with Death",label:{zh:""}}}),Rx=ie()({SURPANAKHA_LOCKOUT:{name:"Supranakha Lockout",label:{zh:""}}}),Tx=ie()({}),Sx={...Ax,...eT,...Rx},Ix=ie()({NEVER:{name:"NEVER"},TINCTURE:{name:"Tincture",label:{zh:"",ja:""}},SPRINT:{id:3,name:"Sprint",label:{zh:"",ja:""}}}),_x=ie()({NEVER:{name:"Never"},cd_GCD:{name:"cd_GCD",label:{zh:"GCD"}},cd_TINCTURE:{name:"cd_Tincture"},cd_SPRINT:{name:"cd_Sprint"}}),gx=ie()({MANA:{name:"Mana",label:{zh:"MP"}}}),px=ie()({TINCTURE:{name:"Tincture",label:{zh:""}},SPRINT:{name:"Sprint",label:{zh:""}}}),Nx=ie()({MOVEMENT:{name:"Movement"},NOT_ANIMATION_LOCKED:{name:"NotAnimationLocked"},NOT_CASTER_TAXED:{name:"NotCasterTaxed"},IN_COMBAT:{name:"InCombat",label:{zh:""}},AUTOS_ENGAGED:{name:"Autos Engaged"},STORED_AUTO:{name:"Stored Auto"},PARTY_SIZE:{name:"PartySize",label:{zh:""}},NEVER:{name:"Never"}}),Cx=ie()({NEVER:{name:"Never",level:1}}),bx={...gx,...px,...Nx},Ox=ie()({LAST_BASTION:{id:199,name:"Last Bastion",label:{zh:""}},LAND_WAKER:{id:4240,name:"Land Waker",label:{zh:""}},DARK_FORCE:{id:4241,name:"Dark Force",label:{zh:""}},GUNMETAL_SOUL:{id:17105,name:"Gunmetal Soul",label:{zh:""}}}),Dx=ie()({PULSE_OF_LIFE:{id:208,name:"Pulse of Life"},ANGEL_FEATHERS:{id:4247,name:"Angel Feathers"},ASTRAL_STASIS:{id:4248,name:"Astral Stasis"},TECHNE_MAKRE:{id:24859,name:"Techne Makre"}}),yx=ie()({FINAL_HEAVEN:{id:202,name:"Final Heaven"},DRAGONSONG_DIVE:{id:4242,name:"Dragonsong Dive"},CHIMATSURI:{id:4243,name:"Chimatsuri"},DOOM_OF_THE_LIVING:{id:7861,name:"Doom of the Living"},THE_END:{id:24858,name:"The End"},WORLD_SWALLOWER:{id:34866,name:"World-swallower"}}),vx=ie()({SAGITTARIUS_ARROW:{id:4244,name:"Sagittarius Arrow"},SATELLITE_BEAM:{id:4245,name:"Satellite Beam"},CRIMSON_LOTUS:{id:17106,name:"Crimson Lotus"}}),Mx=ie()({METEOR:{id:205,name:"Meteor"},TERAFLARE:{id:3009,name:"Teraflare"},VERMILLION_SCOURGE:{id:7862,name:"Vermillion Scourge"},CHROMATIC_FANTASY:{id:34867,name:"Chromatic Fantasy"}}),Lx=ie()({LAST_BASTION:{name:"Last Bastion",label:{zh:"LB3 buff"}},LAND_WAKER:{name:"Land Waker",label:{zh:"LB3 buff"}},DARK_FORCE:{name:"Dark Force",label:{zh:"LB3 buff"}},GUNMETAL_SOUL:{name:"Gunmetal Soul",label:{zh:"LB3 buff"}}}),xx=ie()({cd_LIMIT_BREAK_1:{name:"cd_LIMIT_BREAK_1",label:{zh:"CDLB"}},cd_LIMIT_BREAK_2:{name:"cd_LIMIT_BREAK_2",label:{zh:"CDLB"}},cd_LIMIT_BREAK_3:{name:"cd_LIMIT_BREAK_3",label:{zh:"CDLB"}}}),Hx=ie()({UNKNOWN:{name:"Unknown"},SHIELD_WALL:{id:197,name:"Shield Wall"},STRONGHOLD:{id:198,name:"Stronghold"},HEALING_WIND:{id:206,name:"Healing Wind"},BREATH_OF_THE_EARTH:{id:207,name:"Breath of the Earth"},BRAVER:{id:200,name:"Braver"},BLADEDANCE:{id:201,name:"Bladedance"},BIGSHOT:{id:4238,name:"Big Shot"},DESPERADO:{id:4239,name:"Desperado"},SKYSHARD:{id:203,name:"Skyshard"},STARSTORM:{id:204,name:"Starstorm"}}),JN=ie()({UNKNOWN:{name:"Unknown"},SHIELD_WALL:{name:"Shield Wall",label:{zh:"LB1 buff"}},STRONGHOLD:{name:"Stronghold",label:{zh:"LB2 buff"}}}),kx={...Ox,...Dx,...yx,...vx,...Mx},Co={...Hx,...kx},$N={...JN,...Lx},Ux=ie()({ARMS_LENGTH:{id:7548,name:"Arm's Length",label:{zh:""}},SECOND_WIND:{id:7541,name:"Second Wind",label:{zh:""}},HEAD_GRAZE:{id:7551,name:"Head Graze",label:{zh:""}},ESUNA:{id:7568,name:"Esuna",label:{zh:""}},RESCUE:{id:7571,name:"Rescue",label:{zh:""}},ADDLE:{id:7560,name:"Addle",label:{zh:"",ja:""},discordEmote:"Addle"},SWIFTCAST:{id:7561,name:"Swiftcast",label:{zh:"",ja:""}},LUCID_DREAMING:{id:7562,name:"Lucid Dreaming",label:{zh:"",ja:""},discordEmote:"Lucid"},SURECAST:{id:7559,name:"Surecast",label:{zh:"",ja:""},discordEmote:"Surecast"},FEINT:{id:7549,name:"Feint",label:{zh:""}},BLOODBATH:{id:7542,name:"Bloodbath",label:{zh:""}},TRUE_NORTH:{id:7546,name:"True North",label:{zh:""}},LEG_SWEEP:{id:7863,name:"Leg Sweep",label:{zh:""}},RAMPART:{id:7531,name:"Rampart",label:{zh:""}},REPRISAL:{id:7535,name:"Reprisal",label:{zh:""}},LOW_BLOW:{id:7540,name:"Low Blow",label:{zh:""}},INTERJECT:{id:7538,name:"Interject",label:{zh:""}},PROVOKE:{id:7533,name:"Provoke",label:{zh:""}},SHIRK:{id:7537,name:"Shirk",label:{zh:""}}}),Px=ie()({cd_ADDLE:{name:"cd_Addle"},cd_SWIFTCAST:{name:"cd_Swiftcast"},cd_LUCID_DREAMING:{name:"cd_LucidDreaming"},cd_SURECAST:{name:"cd_Surecast"},cd_SECOND_WIND:{name:"cd_SecondWind"},cd_ARMS_LENGTH:{name:"cd_ArmsLength"},cd_RESCUE:{name:"cd_Rescue"},cd_FEINT:{name:"cd_Feint"},cd_TRUE_NORTH:{name:"cd_TrueNorth"},cd_BLOODBATH:{name:"cd_Bloodbath"},cd_LEG_SWEEP:{name:"cd_LegSweep"},cd_RAMPART:{name:"cd_Rampart"},cd_REPRISAL:{name:"cd_Reprisal"},cd_LOW_BLOW:{name:"cd_LowBlow"},cd_INTERJECT:{name:"cd_Interject"},cd_PROVOKE:{name:"cd_Provoke"},cd_SHIRK:{name:"cd_Shirk"},cd_HEAD_GRAZE:{name:"cd_HeadGraze"}}),wx=ie()({ADDLE:{name:"Addle",label:{zh:""}},SWIFTCAST:{name:"Swiftcast",label:{zh:""}},LUCID_DREAMING:{name:"Lucid Dreaming",label:{zh:""}},SURECAST:{name:"Surecast",label:{zh:""}},ARMS_LENGTH:{name:"Arms Length",label:{zh:""}},FEINT:{name:"Feint",label:{zh:""}},TRUE_NORTH:{name:"True North",label:{zh:""}},BLOODBATH:{name:"Bloodbath",label:{zh:""}},RAMPART:{name:"Rampart",label:{zh:"buff"}},REPRISAL:{name:"Reprisal",label:{zh:"buff"}}}),Gx=ie()({REAR_POSITIONAL:{name:"Rear Positional",label:{zh:""},mayBeToggled:!0},FLANK_POSITIONAL:{name:"Flank Positional",label:{zh:""},mayBeToggled:!0},AUTOS_ENGAGED:{name:"Autos Engaged",mayBeToggled:!0}}),Bx=ie()({ENHANCED_SWIFTCAST:{name:"Enhanced Swiftcast",level:94},ENHANCED_ADDLE:{name:"Enhanced Addle",level:98},ENHANCED_HEALING_MAGIC:{name:"Enhanced Healing Magic",level:85},MAGICK_MASTERY_HEALER:{name:"Magick Mastery",level:94},ENHANCED_SECOND_WIND:{name:"Enhanced Second Wind",level:94},ENHANCED_FEINT:{name:"Enhanced Feint",level:98},MELEE_MASTERY_TANK:{name:"Melee Mastery",level:84},ENHANCED_RAMPART:{name:"Enhanced Rampart",level:94},MELEE_MASTERY_II_TANK:{name:"Melee Mastery II",level:94},ENHANCED_REPRISAL:{name:"Enhanced Reprisal",level:98}}),eC={...wx,...Gx},gn={...Ix,...Ux,...Co,...u1,...nx,...yL,...kL,...rx,...XR,...$M,...G1,...WL,...pL,...JL,...D1,...g1,...Z1,...dL,...FL,...RL,...oL,...QN,...A1,...i1,...Ex},es={..._x,...Px,...xx,...d1,...ax,...vL,...UL,...cx,...H1,...eL,...B1,...XL,...NL,...$L,...y1,...p1,...Q1,...hL,...jL,...TL,...lL,...K1,...R1,...o1,...mx},we={...bx,...eC,...$N,...m1,...sx,...HL,...BL,...fx,...w1,...iL,...Y1,...qN,...DL,...a1,...x1,...O1,...tx,...AL,...VL,...gL,...uL,...q1,..._1,...c1,...Sx},TA={...Cx,...Bx,...E1,...lx,...xL,...GL,...hx,...P1,...aL,...z1,...QL,...OL,...n1,...L1,...b1,...ex,...mL,...KL,..._L,...cL,...X1,...I1,...r1,...Tx},An={epsilon:1e-6};var Je=(e=>(e[e.lvl70=70]="lvl70",e[e.lvl80=80]="lvl80",e[e.lvl90=90]="lvl90",e[e.lvl100=100]="lvl100",e))(Je||{});const Fx=.1;var Ie=(e=>(e.Fire="Fire",e.Ice="Ice",e.Lightning="Lightning",e.Wind="Wind",e.Earth="Earth",e.Physical="Physical",e.Other="Other",e))(Ie||{}),ua=(e=>(e.RNG="RNG",e.Never="Never",e.Always="Always",e))(ua||{}),Et=(e=>(e.Blocked="blocked by CD, animation lock or caster tax",e.SecondaryBlocked="blocked by secondary CD",e.NotEnoughMP="not enough MP",e.NotInCombat="not in combat (must wait for first damage application)",e.RequirementsNotMet="skill requirements not satisfied",e.SkillNotUnlocked="skill not unlocked at provided level",e.BuffNoLongerAvailable="buff no longer available",e.PastTargetTime="jump target time has already passed",e.CastCanceled="cast canceled (skill requirements no longer met at confirmation time)",e.UnknownSkill="unknown skill",e))(Et||{});function cu(){return{unavailableReasons:[],ready:function(){return this.unavailableReasons.length===0},toString:function(){return this.ready()?"ready":this.unavailableReasons.join("; ")},addUnavailableReason:function(e){this.unavailableReasons.includes(e)||this.unavailableReasons.push(e)},clone:function(){const e=cu();return this.unavailableReasons.forEach(t=>e.addUnavailableReason(t)),e}}}var k=(e=>(e.LeyLines="Ley Lines",e.Hyperphantasia="Hyperphantasia",e.Acceleration="Acceleration",e.Fuka="Fuka",e.Fugetsu="Fugetsu",e.EnhancedEnpi="Enhanced Enpi",e.NoMercy="No Mercy",e.PowerSurge="Power Surge",e.LanceCharge="Lance Charge",e.LifeOfTheDragon="Life Of The Dragon",e.EnhancedPiercingTalon="Enhanced Piercing Talon",e.LifeSurge="Life Surge",e.DivineMight="Divine Might",e.Requiescat="Requiescat",e.FightOrFlight="Fight Or Flight",e.Tincture="Tincture",e.ArcaneCircle="Arcane Circle",e.ArmysPaeon="Army's Paeon",e.BattleLitany="Battle Litany",e.BattleVoice="Battle Voice",e.Brotherhood="Brotherhood",e.Card_TheBalance="Card - The Balance",e.Card_TheSpear="Card - The Spear",e.ChainStratagem="Chain Stratagem",e.Devilment="Devilment",e.Divination="Divination",e.Dokumori="Dokumori",e.Embolden="Embolden",e.MagesBallad="Mage's Ballad",e.RadiantFinale1="Radiant Finale (1)",e.RadiantFinale2="Radiant Finale (2)",e.RadiantFinale3="Radiant Finale (3)",e.Barrage="Barrage",e.SearingLight="Searing Light",e.StandardFinish="Standard Finish",e.StarryMuse="Starry Muse",e.TechnicalFinish="Technical Finish",e.WanderersMinuet="The Wanderer's Minuet",e.RagingStrikes="Raging Strikes",e.DeathsDesign="Death's Design",e.Zoe="Zoe",e.Autophysis="Autophysis",e.Krasis="Krasis",e.Philosophia="Philosophia",e.Soteria="Soteria",e.WaxingNocturne="Waxing Nocturne",e.Whistle="Whistle",e.Bristle="Bristle",e.TingleA="TingleA",e.TingleB="TingleB",e.TrickAttack="Trick Attack",e.KunaisBane="Kunai's Bane",e.Bunshin="Bunshin",e.RiddleOfFire="Riddle of Fire",e.TheArrow="The Arrow",e.NeutralSect="Neutral Sect",e.Synastry="Synastry",e.Confession="Confession",e.Asylum="Asylum",e.Temperance="Temperance",e.HuntersInstinct="Hunter's Instinct",e.Swiftscaled="Swiftscaled",e.FeyIllumination="Fey Illumination",e.Dissipation="Dissipation",e.Protraction="Protraction",e.Recitation="Recitation",e))(k||{});function jx(e){return hi({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93 6h-2.95a15.65 15.65 0 0 0-1.38-3.56A8.03 8.03 0 0 1 18.92 8zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56A7.987 7.987 0 0 1 5.08 16zm2.95-8H5.08a7.987 7.987 0 0 1 4.33-3.56A15.65 15.65 0 0 0 8.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2zm.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95a8.03 8.03 0 0 1-4.33 3.56zM16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.38z"},child:[]}]})(e)}function zx(e){return hi({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 3a9 9 0 1 0 9 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 0 1-4.4 2.26 5.403 5.403 0 0 1-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"},child:[]}]})(e)}function Yx(e){return hi({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58a.996.996 0 0 0-1.41 0 .996.996 0 0 0 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37a.996.996 0 0 0-1.41 0 .996.996 0 0 0 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0a.996.996 0 0 0 0-1.41l-1.06-1.06zm1.06-10.96a.996.996 0 0 0 0-1.41.996.996 0 0 0-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36a.996.996 0 0 0 0-1.41.996.996 0 0 0-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z"},child:[]}]})(e)}function SA(e,t){const a=Math.pow(10,t);return Math.floor(e*a)/a}class ut{static getMainstatBase(t){switch(t){case Je.lvl70:return 292;case Je.lvl80:return 340;case Je.lvl90:return 390;case Je.lvl100:return 440}}static getSubstatBase(t){switch(t){case Je.lvl70:return 364;case Je.lvl80:return 380;case Je.lvl90:return 400;case Je.lvl100:return 420}}static getStatDiv(t){switch(t){case Je.lvl70:return 900;case Je.lvl80:return 1300;case Je.lvl90:return 1900;case Je.lvl100:return 2780}}static calculateDamage(t,a,o,s,c,d,h){let f=c;const m=d>=1?d:d<0?0:ut.criticalHitRate(t,a)+d,R=h>=1?h:h<0?0:ut.#t(t,o)+h;if(m===0&&R===0)return f;const T=ut.#e(t,a),S=1.25,I=m>=1&&R>=1,C=m>1?SA(1+(T-1)*(d-1),3):1,_=R>1?SA(1+(S-1)*(h-1),3):1,O=m>1?1:m,D=R>1?1:R;I?f*=SA(ut.#a(t,s)+ut.#n(t,o),3):f*=ut.#a(t,s);const H=f*C*T,x=f*_*S,L=H*_*S,w=O*D,G=1-O-D+w;return f*G+H*(O-w)+x*(D-w)+L*w}static criticalHitRate(t,a){const o=this.getSubstatBase(t),s=this.getStatDiv(t);return(Math.floor(200*(a-o)/s)+50)*.001}static#e(t,a){const o=this.getSubstatBase(t),s=this.getStatDiv(t);return(Math.floor(200*(a-o)/s)+1400)*.001}static#t(t,a){const o=this.getSubstatBase(t),s=this.getStatDiv(t);return Math.floor(550*(a-o)/s)*.001}static#n(t,a){const o=this.getSubstatBase(t),s=this.getStatDiv(t);return Math.floor(140*(a-o)/s)*.001}static#a(t,a){const o=this.getMainstatBase(t),s=this.getStatDiv(t);return Math.floor(1e3+140*(a-o)/s)*.001}static overtimePotency(t,a,o){const s=this.getSubstatBase(t),c=this.getStatDiv(t),d=(1e3+Math.floor((a-s)*130/c))*.001;return o*d}static mpTick(t,a){const o=this.getMainstatBase(t),s=this.getStatDiv(t);return 200+Math.floor(150*(a-o)/s)}static preTaxGcd(t,a,o,s){const c=this.getSubstatBase(t),d=this.getStatDiv(t),h=Math.ceil((c-a)*130/d),f=Math.floor(o*(1e3+h));return Math.floor((100-(s??0))*f/1e3)/100}static preTaxGcdLegacy(t,a,o,s){const c=this.getSubstatBase(t),d=this.getStatDiv(t);return Math.floor(Math.floor(Math.floor((100-(s??0))*100/100)*Math.floor((2e3-Math.floor(130*(a-c)/d+1e3))*(1e3*o)/1e4)/100)*100/100)/100}static preTaxCastTime(t,a,o,s){const c=this.getSubstatBase(t),d=this.getStatDiv(t);return Math.floor(Math.floor(Math.floor((100-(s??0))*100/100)*Math.floor((2e3-Math.floor(130*(a-c)/d+1e3))*(1e3*o)/1e3)/100)*100/100)/1e3}static afterFpsTax(t,a){return Math.floor(a*t+1)/t}}var U=(e=>(e[e.AF3=0]="AF3",e[e.AF2=1]="AF2",e[e.AF1=2]="AF1",e[e.UI3=3]="UI3",e[e.UI2=4]="UI2",e[e.UI1=5]="UI1",e[e.ENO=6]="ENO",e[e.STARRY=7]="STARRY",e[e.EMBOLDEN_M=8]="EMBOLDEN_M",e[e.ACCELERATION=9]="ACCELERATION",e[e.POT=10]="POT",e[e.COMBO=11]="COMBO",e[e.AUTO_CDH=12]="AUTO_CDH",e[e.NO_CDH=13]="NO_CDH",e[e.PARTY=14]="PARTY",e[e.STANDARD_SINGLE=15]="STANDARD_SINGLE",e[e.STANDARD_DOUBLE=16]="STANDARD_DOUBLE",e[e.TECHNICAL_SINGLE=17]="TECHNICAL_SINGLE",e[e.TECHNICAL_DOUBLE=18]="TECHNICAL_DOUBLE",e[e.TECHNICAL_TRIPLE=19]="TECHNICAL_TRIPLE",e[e.TECHNICAL_QUADRUPLE=20]="TECHNICAL_QUADRUPLE",e[e.DEVILMENT=21]="DEVILMENT",e[e.FUGETSU=22]="FUGETSU",e[e.AUTO_CRIT=23]="AUTO_CRIT",e[e.YATEN=24]="YATEN",e[e.POSITIONAL=25]="POSITIONAL",e[e.ARCANE_CIRCLE=26]="ARCANE_CIRCLE",e[e.DEATHSDESIGN=27]="DEATHSDESIGN",e[e.ENHANCED_GIBBET_GALLOWS=28]="ENHANCED_GIBBET_GALLOWS",e[e.ENHANCED_REAPING=29]="ENHANCED_REAPING",e[e.IMMORTAL_SACRIFICE=30]="IMMORTAL_SACRIFICE",e[e.OVERHEATED=31]="OVERHEATED",e[e.SURGING_TEMPEST=32]="SURGING_TEMPEST",e[e.RAGING_STRIKES=33]="RAGING_STRIKES",e[e.WANDERERS_MINUET=34]="WANDERERS_MINUET",e[e.MAGES_BALLAD=35]="MAGES_BALLAD",e[e.ARMYS_PAEON=36]="ARMYS_PAEON",e[e.BATTLE_VOICE=37]="BATTLE_VOICE",e[e.RADIANT_FINALE_ONE_CODA=38]="RADIANT_FINALE_ONE_CODA",e[e.RADIANT_FINALE_TWO_CODA=39]="RADIANT_FINALE_TWO_CODA",e[e.RADIANT_FINALE_THREE_CODA=40]="RADIANT_FINALE_THREE_CODA",e[e.BARRAGE=41]="BARRAGE",e[e.NO_MERCY=42]="NO_MERCY",e[e.SEARING_LIGHT=43]="SEARING_LIGHT",e[e.POWER_SURGE=44]="POWER_SURGE",e[e.ENHANCED_PIERCING_TALON=45]="ENHANCED_PIERCING_TALON",e[e.LANCE_CHARGE=46]="LANCE_CHARGE",e[e.LIFE_OF_THE_DRAGON=47]="LIFE_OF_THE_DRAGON",e[e.LIFE_SURGE=48]="LIFE_SURGE",e[e.BATTLE_LITANY=49]="BATTLE_LITANY",e[e.FIGHT_OR_FLIGHT=50]="FIGHT_OR_FLIGHT",e[e.DIVINE_MIGHT=51]="DIVINE_MIGHT",e[e.REQUIESCAT=52]="REQUIESCAT",e[e.PET=53]="PET",e[e.ZOE=54]="ZOE",e[e.SOTERIA=55]="SOTERIA",e[e.KRASIS=56]="KRASIS",e[e.AUTOPHYSIS=57]="AUTOPHYSIS",e[e.PHILOSOPHIA=58]="PHILOSOPHIA",e[e.MOON_FLUTE=59]="MOON_FLUTE",e[e.BRISTLE=60]="BRISTLE",e[e.WHISTLE=61]="WHISTLE",e[e.TINGLEA=62]="TINGLEA",e[e.TINGLEB=63]="TINGLEB",e[e.SURPANAKHA=64]="SURPANAKHA",e[e.WINGED_REPROBATION=65]="WINGED_REPROBATION",e[e.WINGED_REDEMPTION=66]="WINGED_REDEMPTION",e[e.DARKSIDE=67]="DARKSIDE",e[e.BUNSHIN=68]="BUNSHIN",e[e.KASSATSU=69]="KASSATSU",e[e.HOLLOW_NOZUCHI=70]="HOLLOW_NOZUCHI",e[e.KAZEMATOI=71]="KAZEMATOI",e[e.MEISUI=72]="MEISUI",e[e.DOKUMORI=73]="DOKUMORI",e[e.TRICK_ATTACK=74]="TRICK_ATTACK",e[e.KUNAIS_BANE=75]="KUNAIS_BANE",e[e.BROTHERHOOD=76]="BROTHERHOOD",e[e.RIDDLE_OF_FIRE=77]="RIDDLE_OF_FIRE",e[e.SSS_CHAKRA=78]="SSS_CHAKRA",e[e.MNK_BALL=79]="MNK_BALL",e[e.DIVINATION=80]="DIVINATION",e[e.NEUTRAL_SECT=81]="NEUTRAL_SECT",e[e.THE_ARROW=82]="THE_ARROW",e[e.SYNASTRY=83]="SYNASTRY",e[e.CONFESSION=84]="CONFESSION",e[e.ASYLUM=85]="ASYLUM",e[e.TEMPERANCE=86]="TEMPERANCE",e[e.EXTRA_BELL_STACKS=87]="EXTRA_BELL_STACKS",e[e.HUNTERS_INSTINCT=88]="HUNTERS_INSTINCT",e[e.HONED=89]="HONED",e[e.VENOM=90]="VENOM",e[e.POISED=91]="POISED",e[e.CHAIN_STRAT=92]="CHAIN_STRAT",e[e.FEY_ILLUMINATION=93]="FEY_ILLUMINATION",e[e.DISSIPATION=94]="DISSIPATION",e[e.PROTRACTION=95]="PROTRACTION",e))(U||{});const ep=1.1,IA=.9,X={Tincture:{kind:"multiplier",source:10,potencyFactor:1},AutoCrit:{kind:"critDirect",source:23,critBonus:1,dhBonus:0},AutoCDH:{kind:"critDirect",source:12,critBonus:1,dhBonus:1},NoCDH:{kind:"critDirect",source:13,critBonus:0,dhBonus:0},Starry:{kind:"multiplier",source:7,potencyFactor:1.05},EmboldenMagic:{kind:"multiplier",source:8,potencyFactor:1.1},AccelerationImpact:{kind:"adder",source:9,additiveAmount:50},SingleStandardFinish:{kind:"multiplier",source:15,potencyFactor:1.02},DoubleStandardFinish:{kind:"multiplier",source:16,potencyFactor:1.05},SingleTechnicalFinish:{kind:"multiplier",source:17,potencyFactor:1.01},TripleTechnicalFinish:{kind:"multiplier",source:19,potencyFactor:1.03},QuadrupleTechnicalFinish:{kind:"multiplier",source:20,potencyFactor:1.05},Devilment:{kind:"critDirect",source:21,critBonus:.2,dhBonus:.2},FugetsuBase:{kind:"multiplier",source:22,potencyFactor:1.1},FugetsuEnhanced:{kind:"multiplier",source:22,potencyFactor:1.13},YatenpiBase:{kind:"adder",source:24,additiveAmount:160},YatenpiEnhanced:{kind:"adder",source:24,additiveAmount:170},ArcaneCircle:{kind:"multiplier",source:26,potencyFactor:1.03},DeathsDesign:{kind:"multiplier",source:27,potencyFactor:1.1},EnhancedGibbetGallows:{kind:"adder",source:28,additiveAmount:60},EnhancedReaping:{kind:"adder",source:29,additiveAmount:60},ImmortalSacrifice:{kind:"adder",source:30,additiveAmount:40},Overheated:{kind:"adder",source:31,additiveAmount:20},SurgingTempest:{kind:"multiplier",source:32,potencyFactor:1.1},RagingStrikes:{kind:"multiplier",source:33,potencyFactor:1.15},MagesBallad:{kind:"multiplier",source:35,potencyFactor:1.01},ArmysPaeon:{kind:"critDirect",source:36,critBonus:0,dhBonus:.03},WanderersMinuet:{kind:"critDirect",source:34,critBonus:.02,dhBonus:0},BattleVoice:{kind:"critDirect",source:37,critBonus:0,dhBonus:.2},RadiantFinaleOneCoda:{kind:"multiplier",source:38,potencyFactor:1.02},RadiantFinaleTwoCoda:{kind:"multiplier",source:39,potencyFactor:1.04},RadiantFinaleThreeCoda:{kind:"multiplier",source:40,potencyFactor:1.06},BarrageRefulgent:{kind:"multiplier",source:41,potencyFactor:3},BarrageWideVolley:{kind:"adder",source:41,additiveAmount:80},BarrageShadowbite:{kind:"adder",source:41,additiveAmount:100},NoMercy:{kind:"multiplier",source:42,potencyFactor:1.2},SearingLight:{kind:"multiplier",source:43,potencyFactor:1.05},SmnPet:{kind:"multiplier",source:53,potencyFactor:.8},PowerSurge:{kind:"multiplier",source:44,potencyFactor:1.1},LanceCharge:{kind:"multiplier",source:46,potencyFactor:1.1},LifeOfTheDragon:{kind:"multiplier",source:47,potencyFactor:1.15},BattleLitany:{kind:"critDirect",source:49,critBonus:.1,dhBonus:0},EnhancedPiercingTalon:{kind:"adder",source:45,additiveAmount:150},LifeSurge:{kind:"critDirect",source:48,critBonus:1,dhBonus:0},FightOrFlight:{kind:"multiplier",source:50,potencyFactor:1.25},Zoe:{kind:"multiplier",source:54,potencyFactor:1.5},Soteria:{kind:"multiplier",source:55,potencyFactor:1.7},Krasis:{kind:"multiplier",source:56,potencyFactor:1.2},Autophysis:{kind:"multiplier",source:57,potencyFactor:1.1},Philosophia:{kind:"multiplier",source:58,potencyFactor:1.2},MoonFlute:{kind:"multiplier",source:59,potencyFactor:1.5},Whistle:{kind:"multiplier",source:61,potencyFactor:1.8},Bristle:{kind:"multiplier",source:60,potencyFactor:1.5},TingleA:{kind:"adder",source:62,additiveAmount:100},TingleB:{kind:"adder",source:63,additiveAmount:300},WingedReprobation:{kind:"adder",source:65,additiveAmount:100},WingedRedemption:{kind:"adder",source:66,additiveAmount:220},Darkside:{kind:"multiplier",source:67,potencyFactor:ep},DrkPet:{kind:"multiplier",source:53,potencyFactor:1.05*ep},BunshinST:{kind:"adder",source:68,additiveAmount:160*IA},BunshinAOE:{kind:"adder",source:68,additiveAmount:80*IA},NinPet:{kind:"multiplier",source:53,potencyFactor:IA},Kassatsu:{kind:"multiplier",source:69,potencyFactor:1.3},HollowNozuchi:{kind:"adder",source:70,additiveAmount:70},Kazematoi:{kind:"adder",source:71,additiveAmount:100},Meisui:{kind:"adder",source:72,additiveAmount:150},Dokumori:{kind:"multiplier",source:73,potencyFactor:1.05},TrickAttack:{kind:"multiplier",source:74,potencyFactor:1.1},KunaisBane:{kind:"multiplier",source:75,potencyFactor:1.1},Brotherhood:{kind:"multiplier",source:76,potencyFactor:1.05},RiddleOfFire:{kind:"multiplier",source:77,potencyFactor:1.15},Divination:{kind:"multiplier",source:80,potencyFactor:1.06},NeutralSect:{kind:"multiplier",source:81,potencyFactor:1.2},TheArrow:{kind:"multiplier",source:82,potencyFactor:1.1},Synastry:{kind:"multiplier",source:83,potencyFactor:1.4},AstPet:{kind:"multiplier",source:53,potencyFactor:.98},Confession:{kind:"adder",source:84,additiveAmount:200},Asylum:{kind:"multiplier",source:85,potencyFactor:1.1},Temperance:{kind:"multiplier",source:86,potencyFactor:1.2},WhmPet:{kind:"multiplier",source:53,potencyFactor:.96},HuntersInstinct:{kind:"multiplier",source:88,potencyFactor:1.1},HonedST:{kind:"adder",source:89,additiveAmount:100},HonedAoE:{kind:"adder",source:89,additiveAmount:20},VenomST:{kind:"adder",source:90,additiveAmount:100},VenomAoE:{kind:"adder",source:90,additiveAmount:40},VenomOGCDST:{kind:"adder",source:90,additiveAmount:50},VenomOGCDAoE:{kind:"adder",source:90,additiveAmount:30},Poised:{kind:"adder",source:91,additiveAmount:50},ChainStrat:{kind:"critDirect",source:92,critBonus:.1,dhBonus:0},SchPet:{kind:"multiplier",source:53,potencyFactor:.9},FeyIllum:{kind:"multiplier",source:93,potencyFactor:1.1},Dissipation:{kind:"multiplier",source:94,potencyFactor:1.2},Protraction:{kind:"multiplier",source:95,potencyFactor:1.1}};function Kx(e){return{kind:"adder",source:11,additiveAmount:e}}function Vx(e){return{kind:"adder",source:52,additiveAmount:e}}function Wx(e){return{kind:"adder",source:51,additiveAmount:e}}function Lh(e){return{kind:"adder",source:25,additiveAmount:e}}class $t{config;sourceTime;sourceSkill;aspect;description;base;targetCount;falloff;snapshotTime;applicationTime;modifiers=[];constructor(t){this.config=t.config,this.sourceTime=t.sourceTime,this.sourceSkill=t.sourceSkill,this.aspect=t.aspect,this.base=t.basePotency,this.snapshotTime=t.snapshotTime,this.description=t.description,this.targetCount=t.targetCount,this.falloff=t.falloff}getAmount(t){let a=1,o=0,s=0,c=0,d=!1,h=!1,f=!1;this.modifiers.forEach(T=>{T.source===10?a*=t.tincturePotencyMultiplier:T.source===12?d=!0:T.source===23?h=!0:T.source===13?f=!0:T.kind==="critDirect"?(s+=T.critBonus,c+=T.dhBonus):T.kind==="multiplier"?a*=T.potencyFactor:T.kind==="adder"&&(o+=T.additiveAmount)}),console.assert(!(f&&(d||h)),"skills that can't CDH cannot be auto-crit or auto-CDH"),f&&(d=!1,h=!1),console.assert(!(d&&h),"cannot be both auto-crit and auto-CDH"),t.includePartyBuffs&&this.snapshotTime&&p.game.getPartyBuffs(this.snapshotTime).forEach(T=>{T.kind==="multiplier"?a*=T.potencyFactor:T.kind==="critDirect"&&(s+=T.critBonus,c+=T.dhBonus)});const m=this.base+o;let R=m*this.#n(a,f?0:s,f?0:c);if(d?R*=this.#e(s,c):h?R*=this.#t(s,c):f&&(R=m*a/ut.calculateDamage(this.config.level,this.config.criticalHit,this.config.directHit,this.config.determination,a,0,0)),t.includeSplash){const T=1+(1-(this.falloff??1))*(this.targetCount-1);R*=T}return R}getPartyBuffs(){return this.snapshotTime?[...p.game.getPartyBuffs(this.snapshotTime).keys()]:[]}resolve(t){console.assert(this.snapshotTime!==void 0,`${this.sourceSkill} displayed at ${t} did not have snapshotTime`),console.assert(this.applicationTime===void 0,`${this.sourceSkill} displayed at ${t} was already resolved at ${this.applicationTime}`),this.applicationTime=t}hasResolved(){return this.applicationTime!==void 0}hasHitBoss(t){return this.applicationTime!==void 0&&!t(this.applicationTime)}hasSnapshotted(){return this.snapshotTime!==void 0}#e(t,a){const o=this.config.level,s=ut.calculateDamage(o,p.gameConfig.criticalHit,p.gameConfig.directHit,p.gameConfig.determination,1,t,a);return ut.calculateDamage(o,p.gameConfig.criticalHit,p.gameConfig.directHit,p.gameConfig.determination,1,1+t,1+a)/s}#t(t,a){const o=this.config.level,s=ut.calculateDamage(o,p.gameConfig.criticalHit,p.gameConfig.directHit,p.gameConfig.determination,1,t,a);return ut.calculateDamage(o,p.gameConfig.criticalHit,p.gameConfig.directHit,p.gameConfig.determination,1,1+t,a)/s}#n(t,a,o){const s=this.config.level,c=this.config.criticalHit,d=this.config.directHit,h=this.config.determination,f=ut.calculateDamage(s,c,d,h,1,0,0);return ut.calculateDamage(s,c,d,h,t,a,o)/f}}var ft=(e=>(e.Red="#f64141",e.Orange="#e89b5f",e.Yellow="#ffd535",e.Green="#50c53d",e.Cyan="#53e5e5",e.Blue="#217ff5",e.Purple="#9755ef",e.Pink="#ee79ee",e.Grey="#6f6f6f",e))(ft||{});const bt=()=>ia(b.useContext(Rn)),ia=e=>e==="Dark"?Xx:qx,Al=(e,t)=>ia(e)[t],Xx={accent:"mediumpurple",jobAccents:{BLM:"#9370db",BLU:"#9370db",PCT:"#e176c2",RDM:"#ff0000",DNC:"#e2b0af",SAM:"#f59542",MCH:"#6ee1d6",WAR:"#b10b0b",RPR:"#965a90",BRD:"#91ba5e",GNB:"#f6b26b",SMN:"#2D9B78",SGE:"#80a0f0"},editingValid:"#ffdc00",editingInvalid:"#ff0000",dropTarget:"#5579f1",realTime:"mediumseagreen",historical:"#ff8c00",fileDownload:"#798c3f",text:"#b0b0b0",emphasis:"#dadada",success:"mediumseagreen",warning:"#ff6224",background:"#1f1f21",tipBackground:"#2a2a2a",bgLowContrast:"#333",bgMediumContrast:"#393939",bgHighContrast:"#626262",timelineEditor:{headerFooter:"#424242",bgAlternateRow:"#282828"},resources:{gcdBar:"#5cab43",lockBar:"#737373",mana:"#62a5d2",manaTick:"#3d5c73",cdhTag:"#d55124",comboTag:"#5c8bad",petTag:"#eb9b5f"},blm:{enochian:"#b69241",astralFire:"#d55124",astralSoul:"#cb8046",umbralIce:"#509bd5",umbralHeart:"#8fced5",paradox:"#d953ee",polyTimer:"#594472",polyStacks:"#b138ee"},blu:{moonflute:"#b69241",whistle:"#b69241",bristle:"#b69241",tinglea:"#217ff5",tingleb:"#217ff5",surpanakha:"#b69241",wingedreprobation:"#ffd535"},pct:{creatureCanvas:"#a948e3",weaponCanvas:"#a53535",landscapeCanvas:"#2e51dd",paletteGauge:"#b69241",holyPaint:"#9bc6dd",cometPaint:"#7e19aa",starryBuff:"#509bd5"},rdm:{whiteMana:"#dddddd",blackMana:"#2a4bf5",manaStack:"#cb8046",emboldenBuff:"#de0202",accelBuff:"#f0d1e8"},dnc:{esprit:"#e2b0af",feathers:"#8DA147",emboite:"#bf615c",entrechat:"#3a8db7",jete:"#539350",pirouette:"#b0984e"},sam:{kenki:"#d55124",setsu:"#c7ffff",getsu:"#7987fc",kaSen:"#f8a2a6",meditation:"#ff853d",fugetsu:"#0f52ba",iai:"#89cfef"},mch:{heat:"#D35A10",battery:"#2C9FCB"},rpr:{soulGaugeLow:"#660929",soulGaugeHigh:"#e5004e",shroudGaugeLow:"#03706c",shroudGaugeHigh:"#00fcf3",lemureShroud:"#53ffff",voidShroudLow:"#5c125c",voidShroudHigh:"#ff04ff",deathsDesign:"#ab0009",arcaneCircle:"#ff94fd"},war:{beastGauge:"#ffba00"},brd:{soulVoice:"#5DBD99",pitchPerfect:"#9ac5f1",repertoire:"#e8c35a",wanderersCoda:"#add549",magesCoda:"#ffbcf8",armysCoda:"#eb9b5f",ragingStrikes:"#c04414",barrage:"#e6c65b",battleVoice:"#71bed1",radiantFinale:"#edcce7"},gnb:{},smn:{aetherflow:"#ffd4ff",bahamut:"#2D9B78",phoenix:"#d55124",solar:"#9bc6dd",ruby:"#e5004e",topaz:"#b0984e",emerald:"#539350",searing:"#2D9B78"},drg:{lifeSurge:"#ff6633",lanceCharge:"#d6002d",lifeOfTheDragon:"#0968af",battleLitany:"#33b8e3",powerSurge:"#59ed78",enhancedPiercingTalon:"#f4caa6",firstmindsFocusStacks:"#9926c8",lifeOfTheDragonBar:"#d74936",drgComboTimer:"#3d61ae"},sge:{addersgall:"#80a0f0",addersting:"#9e2dca",zoe:"cyan",autophysis:"lightblue",krasis:"teal",soteria:"green",philosophia:"lightgreen"},pld:{divineMight:"#ff6633",requiescat:"#d6002d",fightOrFlight:"#0968af",pldComboTimer:"#59ed78",ironWillColor:"#d74936",oathGaugeColor:"#3d61ae"},drk:{darkside:"#c000d1",blood:"#8803fc",darkarts:"#ffdf0d",drkComboTimer:"#cb8046",grit:"#82cad9"},nin:{ninComboTimer:"#8532a8",kazematoi:"#ab1fd1",meisui:"#559ef2",ninki:"#8532a8",bunshin:"#ed8021",kassatsu:"#fa9bd4",nozuchi:"#d6a440",dokumori:"#9a0ec4",trick:"#ffd454"},mnk:{opo:"#feabf7",raptor:"#c495fb",coeurl:"#00d9a5",lunar:"#a984f5",solar:"#c6c5c3",riddleOfFire:"#d98d58",brotherhood:"#da4c32",chakra:"#fffea5",extraChakra:"#fe9b28"},whm:{lily:"#d3ffff",blood:"#e08889",pom:"#9788e0",asylum:"#b5e075",confession:"#8df2e8",temperance:"#77f7b7"},ast:{div:"#ffd535",astralCard:"#52d3f7",umbralCard:"#f7b3ff",lord:"#de1200",lady:"#f8facd",neutral:"#354869",synastry:"#578a7e",arrow:"#1690a8"},vpr:{vprComboTimer:"#dea65d",rattlingCoil:"#f64141",serpentOfferings:"#f64141",anguineTribute:"#24e2ff",huntersInstinct:"#9e5a02",swiftscaled:"#ffe20a"},sch:{chain:"#6f6f6f",faerieGauge:"#96ffbd",aetherflow:"#acfff7",seraph:"#44b6fd",feyIllumination:"#2cc7b0",dissipation:"#c4c4c4",protraction:"#77c990",recitation:"#ffce1c"},timeline:{ruler:"#2d2d2d",tracks:"#242424",castBar:"#42364d",lockBar:"#696969",gcdBar:"#354931",invalidBg:"#f25449",llCover:"#5ea647",potCover:"#c4543a",buffCover:"#9370db",damageMark:"#ff0000",healingMark:"#2cda30",aggroMark:"#ff8000",untargetableDamageMark:"#7f7f7f",mpTickMark:"#32525e",warningMark:"#9d7103",lucidTickMark:"#56b3d5",countdown:"rgba(15, 15, 15, 0.4)",markerAlpha:"4f"}},qx={accent:"mediumpurple",jobAccents:{BLM:"#9370db",BLU:"#9370db",PCT:"#f485d6",RDM:"#ff0000",DNC:"#e2b0af",SAM:"#f59542",MCH:"#6ee1d6",WAR:"#b10b0b",RPR:"#965a90",BRD:"#91ba5e",SMN:"#2D9B78",SGE:"#80a0f0"},editingValid:"#ffdc00",editingInvalid:"#ff0000",dropTarget:"#4665ff",realTime:"mediumseagreen",historical:"#ff8c00",fileDownload:"#798c3f",text:"#000000",emphasis:"#000000",success:"mediumseagreen",warning:"#ff4d07",background:"#ffffff",tipBackground:"#ffffff",bgLowContrast:"#efefef",bgMediumContrast:"lightgrey",bgHighContrast:"darkgrey",timelineEditor:{headerFooter:"#cacaca",bgAlternateRow:"#eeeeee"},resources:{gcdBar:"#8edc72",lockBar:"#cbcbcb",mana:"#8ACEEA",manaTick:"#C2EAFF",cdhTag:"#ff6633",comboTag:"#53a7c9",petTag:"#eb9b5f"},blm:{enochian:"#f5cf96",astralFire:"#ff6633",astralSoul:"#ffa641",umbralIce:"#66bbff",umbralHeart:"#95dae3",paradox:"#d953ee",polyTimer:"#d5bbf1",polyStacks:"#b138ee"},blu:{moonflute:"#b69241",whistle:"#b69241",bristle:"#b69241",tinglea:"#217ff5",tingleb:"#217ff5",surpanakha:"#b69241",wingedreprobation:"#ffd535"},pct:{creatureCanvas:"#b854e8",weaponCanvas:"#d54d48",landscapeCanvas:"#4568f6",paletteGauge:"#f5cf96",holyPaint:"#b7c9d5",cometPaint:"#9926c8",starryBuff:"#66bbff"},rdm:{whiteMana:"#fcd8d4",blackMana:"#467aeb",manaStack:"#9926c8",emboldenBuff:"#c91310",accelBuff:"#c973b4"},dnc:{esprit:"#e2b0af",feathers:"#8DA147",emboite:"#bf615c",entrechat:"#3a8db7",jete:"#539350",pirouette:"#b0984e"},sam:{kenki:"#d55124",setsu:"#addede",getsu:"#7987fc",kaSen:"#f8a2a6",meditation:"#ff853d",fugetsu:"#0f52ba",iai:"#89cfef"},mch:{heat:"#D35A10",battery:"#2C9FCB"},rpr:{soulGaugeLow:"#660929",soulGaugeHigh:"#e5004e",shroudGaugeLow:"#03706c",shroudGaugeHigh:"#00fcf3",lemureShroud:"#53ffff",voidShroudLow:"#5c125c",voidShroudHigh:"#ff04ff",deathsDesign:"#ab0009",arcaneCircle:"#ff94fd"},war:{beastGauge:"#e74a3c"},brd:{soulVoice:"#5DBD99",pitchPerfect:"#9ac5f1",repertoire:"#e8c35a",wanderersCoda:"#add549",magesCoda:"#ffbcf8",armysCoda:"#eb9b5f",ragingStrikes:"#c04414",barrage:"#e6c65b",battleVoice:"#71bed1",radiantFinale:"#edcce7"},gnb:{},smn:{aetherflow:"#ffd4ff",bahamut:"#2D9B78",phoenix:"#d55124",solar:"#9bc6dd",ruby:"#e5004e",topaz:"#b0984e",emerald:"#539350",searing:"#2D9B78"},drg:{lifeSurge:"#ff6633",lanceCharge:"#d6002d",lifeOfTheDragon:"#0968af",battleLitany:"#33b8e3",powerSurge:"#59ed78",enhancedPiercingTalon:"#f4caa6",firstmindsFocusStacks:"#9926c8",lifeOfTheDragonBar:"#d74936",drgComboTimer:"#3d61ae"},sge:{addersgall:"#80a0f0",addersting:"#9e2dca",zoe:"cyan",autophysis:"lightblue",krasis:"teal",soteria:"green",philosophia:"lightgreen"},pld:{divineMight:"#ff6633",requiescat:"#d6002d",fightOrFlight:"#0968af",pldComboTimer:"#59ed78",ironWillColor:"#d74936",oathGaugeColor:"#3d61ae"},drk:{darkside:"#c000d1",blood:"#8803fc",darkarts:"#ffdf0d",drkComboTimer:"#cb8046",grit:"#82cad9"},nin:{ninComboTimer:"#8532a8",kazematoi:"#ab1fd1",meisui:"#559ef2",ninki:"#8532a8",bunshin:"#ed8021",kassatsu:"#fa9bd4",nozuchi:"#d6a440",dokumori:"#7e03a3",trick:"#e6b525"},mnk:{opo:"#feabf7",raptor:"#c495fb",coeurl:"#00d9a5",lunar:"#a984f5",solar:"#c6c5c3",riddleOfFire:"#d98d58",brotherhood:"#da4c32",chakra:"#fee11c",extraChakra:"#fe9b28"},whm:{lily:"#a5d0e8",blood:"#ff5454",pom:"#9788e0",asylum:"#b5e075",confession:"#8df2e8",temperance:"#77f7b7"},ast:{div:"#ffd535",astralCard:"#52d3f7",umbralCard:"#f7b3ff",lord:"#de1200",lady:"#d3d672",neutral:"#354869",synastry:"#578a7e",arrow:"#1690a8"},vpr:{vprComboTimer:"#dea65d",rattlingCoil:"#f64141",serpentOfferings:"#f64141",anguineTribute:"#24e2ff",huntersInstinct:"#9e5a02",swiftscaled:"#ffe20a"},sch:{chain:"#6f6f6f",faerieGauge:"#96ffbd",aetherflow:"#79d9d0",seraph:"#3299d9",feyIllumination:"#2cc7b0",dissipation:"#c4c4c4",protraction:"#77c990",recitation:"#ffce1c"},timeline:{ruler:"#e9e9e9",tracks:"#f3f3f3",castBar:"#ecd6f3",lockBar:"#9d9d9d",gcdBar:"#ccefc6",invalidBg:"#c21104",llCover:"#87ec71",potCover:"#ff865c",buffCover:"#9370db",damageMark:"#ff0000",healingMark:"#2cda30",aggroMark:"#ff8000",untargetableDamageMark:"#7f7f7f",mpTickMark:"#b6dfea",warningMark:"#ffbb29",lucidTickMark:"#88cae0",countdown:"rgba(0, 0, 0, 0.1)",markerAlpha:"7f"}};function Zx(e){const t=bt(),a=new Map([[U.AF3,t.blm.astralFire],[U.AF2,t.blm.astralFire],[U.AF1,t.blm.astralFire],[U.UI3,t.blm.umbralIce],[U.UI2,t.blm.umbralIce],[U.UI1,t.blm.umbralIce],[U.ENO,t.blm.enochian],[U.AUTO_CDH,t.resources.cdhTag],[U.STARRY,t.pct.starryBuff],[U.EMBOLDEN_M,t.rdm.emboldenBuff],[U.ACCELERATION,t.rdm.accelBuff],[U.STANDARD_SINGLE,t.dnc.jete],[U.STANDARD_DOUBLE,t.dnc.jete],[U.TECHNICAL_SINGLE,t.dnc.esprit],[U.TECHNICAL_DOUBLE,t.dnc.esprit],[U.TECHNICAL_TRIPLE,t.dnc.esprit],[U.TECHNICAL_QUADRUPLE,t.dnc.esprit],[U.DEVILMENT,t.dnc.feathers],[U.OVERHEATED,"#ee79ee"],[U.COMBO,t.resources.comboTag],[U.FUGETSU,t.sam.fugetsu],[U.AUTO_CRIT,t.resources.cdhTag],[U.YATEN,t.pct.cometPaint],[U.POSITIONAL,"#50c53d"],[U.ARCANE_CIRCLE,"#ee79ee"],[U.DEATHSDESIGN,"#f64141"],[U.ENHANCED_GIBBET_GALLOWS,"#217ff5"],[U.ENHANCED_REAPING,"#9755ef"],[U.IMMORTAL_SACRIFICE,"#ee79ee"],[U.SURGING_TEMPEST,"#9755ef"],[U.BARRAGE,t.brd.barrage],[U.RAGING_STRIKES,t.brd.ragingStrikes],[U.BATTLE_VOICE,t.brd.battleVoice],[U.RADIANT_FINALE_THREE_CODA,t.brd.radiantFinale],[U.RADIANT_FINALE_TWO_CODA,t.brd.radiantFinale],[U.RADIANT_FINALE_ONE_CODA,t.brd.radiantFinale],[U.WANDERERS_MINUET,t.brd.wanderersCoda],[U.MAGES_BALLAD,t.brd.magesCoda],[U.ARMYS_PAEON,t.brd.armysCoda],[U.NO_MERCY,t.rdm.blackMana],[U.SEARING_LIGHT,t.smn.searing],[U.LIFE_SURGE,t.drg.lifeSurge],[U.LANCE_CHARGE,t.drg.lanceCharge],[U.LIFE_OF_THE_DRAGON,t.drg.lifeOfTheDragon],[U.BATTLE_LITANY,t.drg.battleLitany],[U.POWER_SURGE,t.drg.powerSurge],[U.ENHANCED_PIERCING_TALON,t.drg.enhancedPiercingTalon],[U.DIVINE_MIGHT,t.pld.divineMight],[U.REQUIESCAT,t.pld.requiescat],[U.FIGHT_OR_FLIGHT,t.pld.fightOrFlight],[U.PET,t.resources.petTag],[U.MOON_FLUTE,t.blu.moonflute],[U.WHISTLE,t.blu.whistle],[U.BRISTLE,t.blu.bristle],[U.TINGLEA,t.blu.tinglea],[U.TINGLEB,t.blu.tingleb],[U.SURPANAKHA,t.blu.surpanakha],[U.WINGED_REDEMPTION,t.blu.wingedreprobation],[U.WINGED_REPROBATION,t.blu.wingedreprobation],[U.DARKSIDE,t.drk.darkside],[U.BUNSHIN,t.nin.bunshin],[U.KASSATSU,t.nin.kassatsu],[U.HOLLOW_NOZUCHI,t.nin.nozuchi],[U.KAZEMATOI,t.nin.kazematoi],[U.MEISUI,t.nin.meisui],[U.DOKUMORI,t.nin.dokumori],[U.TRICK_ATTACK,t.nin.trick],[U.KUNAIS_BANE,t.nin.trick],[U.BROTHERHOOD,t.mnk.brotherhood],[U.RIDDLE_OF_FIRE,t.mnk.riddleOfFire],[U.MNK_BALL,t.mnk.opo],[U.SSS_CHAKRA,t.mnk.chakra],[U.DIVINATION,t.ast.div],[U.HUNTERS_INSTINCT,t.vpr.huntersInstinct],[U.HONED,t.vpr.vprComboTimer],[U.VENOM,t.vpr.vprComboTimer],[U.POISED,t.vpr.vprComboTimer],[U.CHAIN_STRAT,t.sch.chain],[U.NO_CDH,t.timeline.untargetableDamageMark]]);return console.assert(a.has(e),`modifier ${e} doesn't have a color!`),a.get(e)??t.text}function tp(e){const t=e.colorTheme==="Dark",a=t?l.jsx(zx,{}):l.jsx(Yx,{}),o=bt(),s=b.useContext(Rn),c=g({en:t?"Dark Mode":"Light Mode",zh:t?"":""});return l.jsx("div",{title:c,style:{display:"inline-block",cursor:"pointer",borderBottom:e.colorTheme===s?"none":"1px solid "+o.text,borderTop:e.colorTheme===s?"1px solid "+o.text:"none"},onClick:()=>e.setColorTheme(e.colorTheme),children:a})}const ff=()=>{const e=Rt("colorTheme");return e==="Light"||e==="Dark"?e:window.matchMedia?.("(prefers-color-scheme: dark)").matches?"Dark":"Light"},Rn=b.createContext(ff());function Qx(e){return l.jsx("div",{style:{display:"inline-block"},children:l.jsxs("div",{style:{display:"inline-block",fontSize:16},children:[l.jsx(tp,{colorTheme:"Light",setColorTheme:e.setColorTheme}),"|",l.jsx(tp,{colorTheme:"Dark",setColorTheme:e.setColorTheme})]})})}class xh{static getJob(t){return dt[t]}static getAction(t){return gn[t]}static findAction(t){return this.findByName(gn,t)}static findActionKey(t){return this.findKeyByName(gn,t)}static getResource(t){return we[t]}static findResource(t){return this.findByName(we,t)}static findResourceKey(t){return this.findKeyByName(we,t)}static getCooldown(t){return es[t]}static findCooldown(t){return this.findByName(es,t)}static findCooldownKey(t){return this.findKeyByName(es,t)}static findByName(t,a){return Object.values(t).find(o=>o.name===a)}static findKeyByName(t,a){const o=Object.entries(t).find(([s,c])=>c.name===a);if(o)return o[0]}}function Qd(e){const t=Oi();return t==="zh"?e==="en"?"":e==="zh"?"":"":t==="ja"?e==="en"?"":e==="zh"?"":"":e.toString()}function g(e){const t=Oi();return t==="zh"&&e.zh?e.zh:t==="ja"&&e.ja?e.ja:e.en}function Jx(e,t){{const[a,o,s]=e.split("/");return`20${s}${a}${o}`}}function nu(e){switch(e){case"spellSpeed":return g({en:"spell speed: ",zh:""}).toString();case"skillSpeed":return g({en:"skill speed: ",zh:""}).toString();case"fps":return g({en:"FPS: ",zh:""}).toString();case"criticalHit":return g({en:"crit: ",zh:""}).toString();case"directHit":return g({en:"direct hit: ",zh:""}).toString();case"determination":return g({en:"determination: ",zh:""}).toString();case"piety":return g({en:"piety: ",zh:""}).toString();case"animationLock":return g({en:"animation lock: ",zh:""}).toString()}return e}function fi(e){if(e==="NEVER")return g({en:"unknown skill",zh:""}).toString();if(!(e in gn))return e;const t=xh.getAction(e);return g({en:t.name,...t.label}).toString()}function ts(e){if(e===void 0)return g({en:"reason unknown",zh:""}).toString();let t="";return e===Et.Blocked?t="CD":e===Et.SecondaryBlocked?t="CD":e===Et.NotEnoughMP?t="MP":e===Et.NotInCombat?t="":e===Et.RequirementsNotMet?t="":e===Et.SkillNotUnlocked?t="Lv":e===Et.BuffNoLongerAvailable?t="BUFF":e===Et.PastTargetTime?t="":e===Et.CastCanceled?t="":e===Et.UnknownSkill?t="":console.error("unlocalized reason: "+e),g({en:e,zh:t}).toString()}const $x=new Map([[k.LeyLines,""],[k.Hyperphantasia,""],[k.Tincture,""],[k.ArcaneCircle,""],[k.ArmysPaeon,""],[k.BattleLitany,""],[k.BattleVoice,""],[k.Brotherhood,""],[k.Card_TheBalance,""],[k.Card_TheSpear,""],[k.ChainStratagem,""],[k.Devilment,""],[k.Divination,""],[k.Dokumori,""],[k.Embolden,""],[k.MagesBallad,""],[k.RadiantFinale1,"1"],[k.RadiantFinale2,"2"],[k.RadiantFinale3,"3"],[k.SearingLight,""],[k.StandardFinish,""],[k.StarryMuse,""],[k.TechnicalFinish,""],[k.WanderersMinuet,""]]),eH=new Map([[k.LeyLines,""],[k.Tincture,""],[k.ArcaneCircle,""],[k.ArmysPaeon,""],[k.BattleLitany,""],[k.BattleVoice,""],[k.Brotherhood,""],[k.Card_TheBalance,""],[k.Card_TheSpear,""],[k.ChainStratagem,""],[k.Devilment,""],[k.Divination,""],[k.Dokumori,""],[k.Embolden,""],[k.MagesBallad,""],[k.RadiantFinale1,"1"],[k.RadiantFinale2,"2"],[k.RadiantFinale3,"3"],[k.SearingLight,""],[k.StandardFinish,""],[k.StarryMuse,""],[k.TechnicalFinish,""],[k.WanderersMinuet,""]]);function tC(e){const t=Oi();return t==="zh"?$x.get(e)??e:t==="ja"?eH.get(e)??e:e}function Ke(e){const t=Oi();if(e in es){const o=xh.getCooldown(e),s=g({en:o.name,...o.label}).toString();if(t!=="en"&&s===o.name){const c=e.slice(3),d=Object.keys(gn).find(h=>gn[h].name===c||h===c);if(d!==void 0)return"CD"+fi(d)}return s}const a=xh.getResource(e);return g({en:a.name,...a.label}).toString()}const np=new Map([[U.AF3,{en:"AF3",zh:""}],[U.AF2,{en:"AF2",zh:""}],[U.AF1,{en:"AF1",zh:""}],[U.UI3,{en:"UI3",zh:""}],[U.UI2,{en:"UI2",zh:""}],[U.UI1,{en:"UI1",zh:""}],[U.ENO,{en:"enochian",zh:""}],[U.POT,{en:"pot",zh:""}],[U.PARTY,{en:"party",zh:""}],[U.AUTO_CDH,{en:"auto crit/direct hit",zh:""}],[U.STARRY,{en:"starry muse",zh:""}],[U.EMBOLDEN_M,{en:"embolden",zh:""}],[U.ACCELERATION,{en:"acceleration",zh:""}],[U.STANDARD_SINGLE,{en:"single standard finish",zh:""}],[U.STANDARD_DOUBLE,{en:"double standard finish",zh:""}],[U.TECHNICAL_SINGLE,{en:"single technical finish",zh:""}],[U.TECHNICAL_DOUBLE,{en:"double technical finish",zh:""}],[U.TECHNICAL_TRIPLE,{en:"triple technical finish",zh:""}],[U.TECHNICAL_QUADRUPLE,{en:"quadruple technical finish",zh:""}],[U.DEVILMENT,{en:"devilment",zh:""}],[U.OVERHEATED,{en:"overheated",zh:""}],[U.COMBO,{en:"combo",zh:""}],[U.FUGETSU,{en:"fugetsu",zh:""}],[U.AUTO_CRIT,{en:"auto crit",zh:""}],[U.YATEN,{en:"yaten",zh:""}],[U.POSITIONAL,{en:"positional",zh:""}],[U.ARCANE_CIRCLE,{en:"arcane circle",zh:""}],[U.DEATHSDESIGN,{en:"death's design",zh:""}],[U.ENHANCED_GIBBET_GALLOWS,{en:"enhanced gibbet/gallows",zh:"/"}],[U.ENHANCED_REAPING,{en:"enhanced reaping",zh:"/"}],[U.IMMORTAL_SACRIFICE,{en:"immortal sacrifice"}],[U.BARRAGE,{en:"barrage"}],[U.RAGING_STRIKES,{en:"raging strikes"}],[U.BATTLE_VOICE,{en:"battle voice"}],[U.RADIANT_FINALE_THREE_CODA,{en:"three coda radiant finale"}],[U.RADIANT_FINALE_TWO_CODA,{en:"two coda radiant finale"}],[U.RADIANT_FINALE_ONE_CODA,{en:"one coda radiant finale"}],[U.WANDERERS_MINUET,{en:"wanderer's minuet"}],[U.MAGES_BALLAD,{en:"mage's ballad"}],[U.ARMYS_PAEON,{en:"army's paeon"}],[U.NO_MERCY,{en:"no mercy",zh:""}],[U.SEARING_LIGHT,{en:"searing light",zh:""}],[U.SURGING_TEMPEST,{en:"surging tempest",zh:""}],[U.POWER_SURGE,{en:"power surge"}],[U.LANCE_CHARGE,{en:"lance charge"}],[U.ENHANCED_PIERCING_TALON,{en:"enhanced piercing talon"}],[U.LIFE_OF_THE_DRAGON,{en:"life of the dragon"}],[U.LIFE_SURGE,{en:"life surge"}],[U.PET,{en:"pet modifier",zh:""}],[U.DIVINE_MIGHT,{en:"divine might",zh:""}],[U.REQUIESCAT,{en:"requiescat",zh:""}],[U.FIGHT_OR_FLIGHT,{en:"fight or flight",zh:""}],[U.WHISTLE,{en:"WH",zh:""}],[U.BRISTLE,{en:"BR",zh:""}],[U.MOON_FLUTE,{en:"MF",zh:""}],[U.TINGLEA,{en:"TING",zh:""}],[U.TINGLEB,{en:"TING",zh:""}],[U.WINGED_REPROBATION,{en:"WREP",zh:""}],[U.WINGED_REDEMPTION,{en:"WRED",zh:""}],[U.DARKSIDE,{en:"darkside",zh:""}],[U.BUNSHIN,{en:"bunshin",zh:""}],[U.KASSATSU,{en:"kassatsu",zh:""}],[U.HOLLOW_NOZUCHI,{en:"hollow nozuchi",zh:""}],[U.KAZEMATOI,{en:"kazematoi",zh:""}],[U.MEISUI,{en:"meisui",zh:""}],[U.DOKUMORI,{en:"dokumori",zh:""}],[U.TRICK_ATTACK,{en:"trick attack",zh:""}],[U.KUNAIS_BANE,{en:"kunai's bane",zh:""}],[U.BROTHERHOOD,{en:"brotherhood",zh:""}],[U.RIDDLE_OF_FIRE,{en:"riddle of fire",zh:""}],[U.MNK_BALL,{en:"ball",zh:""}],[U.SSS_CHAKRA,{en:"chakra",zh:""}],[U.DIVINATION,{en:"divination",zh:""}],[U.HUNTERS_INSTINCT,{en:"hunter's instinct",zh:""}],[U.HONED,{en:"honed"}],[U.VENOM,{en:"venom"}],[U.POISED,{en:"poised"}],[U.CHAIN_STRAT,{en:"chain stratagem",zh:""}],[U.NO_CDH,{en:"no crit/direct hit",zh:""}]]);function ap(e){return console.assert(np.has(e),`modifier ${e} doesn't have a name!`),g(np.get(e)??{en:"unknown"})}const ip=new Map([[U.AF3,{en:"AF3",zh:""}],[U.AF2,{en:"AF2",zh:""}],[U.AF1,{en:"AF1",zh:""}],[U.UI3,{en:"UI3",zh:""}],[U.UI2,{en:"UI2",zh:""}],[U.UI1,{en:"UI1",zh:""}],[U.ENO,{en:"ENO",zh:""}],[U.POT,{en:"pot",zh:""}],[U.PARTY,{en:"party",zh:""}],[U.AUTO_CDH,{en:"CDH",zh:""}],[U.STARRY,{en:"STARRY",zh:""}],[U.EMBOLDEN_M,{en:"MB",zh:""}],[U.ACCELERATION,{en:"ACC",zh:""}],[U.STANDARD_SINGLE,{en:"SSF",zh:""}],[U.STANDARD_DOUBLE,{en:"DSF",zh:""}],[U.TECHNICAL_SINGLE,{en:"STF",zh:""}],[U.TECHNICAL_DOUBLE,{en:"DTF",zh:""}],[U.TECHNICAL_TRIPLE,{en:"TTF",zh:""}],[U.TECHNICAL_QUADRUPLE,{en:"QTF",zh:""}],[U.DEVILMENT,{en:"DEV",zh:""}],[U.OVERHEATED,{en:"OVERHEATED",zh:""}],[U.COMBO,{en:"CMB",zh:""}],[U.FUGETSU,{en:"FGS",zh:""}],[U.AUTO_CRIT,{en:"CRIT",zh:""}],[U.YATEN,{en:"ENH",zh:""}],[U.POSITIONAL,{en:"PS",zh:""}],[U.ARCANE_CIRCLE,{en:"AC",zh:""}],[U.DEATHSDESIGN,{en:"DD",zh:""}],[U.ENHANCED_GIBBET_GALLOWS,{en:"E. GIB/GAL",zh:"/"}],[U.ENHANCED_REAPING,{en:"E. REAPING",zh:"/"}],[U.IMMORTAL_SACRIFICE,{en:"IMMORTAL SAC",zh:""}],[U.BARRAGE,{en:"BRG"}],[U.RAGING_STRIKES,{en:"RS"}],[U.BATTLE_VOICE,{en:"BV"}],[U.RADIANT_FINALE_THREE_CODA,{en:"RF3"}],[U.RADIANT_FINALE_TWO_CODA,{en:"RF2"}],[U.RADIANT_FINALE_ONE_CODA,{en:"RF1"}],[U.WANDERERS_MINUET,{en:"WM"}],[U.MAGES_BALLAD,{en:"MB"}],[U.ARMYS_PAEON,{en:"AP"}],[U.NO_MERCY,{en:"NM",zh:""}],[U.SEARING_LIGHT,{en:"SL",zh:""}],[U.SURGING_TEMPEST,{en:"SURGING",zh:""}],[U.POWER_SURGE,{en:"PWS"}],[U.LANCE_CHARGE,{en:"LC"}],[U.LIFE_OF_THE_DRAGON,{en:"LIFE"}],[U.ENHANCED_PIERCING_TALON,{en:"ENH"}],[U.LIFE_SURGE,{en:"LS"}],[U.BATTLE_LITANY,{en:"BL"}],[U.DIVINE_MIGHT,{en:"DM",zh:""}],[U.REQUIESCAT,{en:"REQ",zh:""}],[U.FIGHT_OR_FLIGHT,{en:"FOF",zh:""}],[U.PET,{en:"PET",zh:""}],[U.WHISTLE,{en:"WH",zh:""}],[U.BRISTLE,{en:"BR",zh:""}],[U.MOON_FLUTE,{en:"MF",zh:""}],[U.TINGLEA,{en:"TING",zh:""}],[U.TINGLEB,{en:"TING",zh:""}],[U.WINGED_REPROBATION,{en:"WREP",zh:""}],[U.WINGED_REDEMPTION,{en:"WRED",zh:""}],[U.DARKSIDE,{en:"DS",zh:""}],[U.BUNSHIN,{en:"BUN",zh:""}],[U.KASSATSU,{en:"KASS",zh:""}],[U.HOLLOW_NOZUCHI,{en:"NOZ",zh:""}],[U.KAZEMATOI,{en:"KAZ",zh:""}],[U.MEISUI,{en:"MEI",zh:""}],[U.DOKUMORI,{en:"DOKU",zh:""}],[U.TRICK_ATTACK,{en:"TRICK",zh:""}],[U.KUNAIS_BANE,{en:"KB",zh:""}],[U.BROTHERHOOD,{en:"BH",zh:""}],[U.RIDDLE_OF_FIRE,{en:"ROF",zh:""}],[U.MNK_BALL,{en:"BALL",zh:""}],[U.SSS_CHAKRA,{en:"CHAKRA",zh:""}],[U.DIVINATION,{en:"DIV",zh:""}],[U.HUNTERS_INSTINCT,{en:"HI",zh:""}],[U.HONED,{en:"HONED"}],[U.VENOM,{en:"VENOM"}],[U.POISED,{en:"POISED"}],[U.CHAIN_STRAT,{en:"CHAIN",zh:""}],[U.NO_CDH,{en:"NO CDH",zh:""}]]);function tH(e){return console.assert(ip.has(e),`modifier ${e} doesn't have a tag name!`),g(ip.get(e)??{en:"unknown"})}const nC=navigator.language==="zh-CN"||navigator.language==="zh"?"zh":"en";let Oi=()=>Rt("language")||nC;function op(e){let t="English";e.lang==="zh"&&(t=""),e.lang==="ja"&&(t="");const a=bt();return l.jsx("div",{style:{display:"inline-block",cursor:"pointer",textDecoration:e.lang===Oi()?"none":"underline",borderTop:e.lang===Oi()?"1px solid "+a.text:"none"},onClick:()=>{e.setCurrentLanguage(e.lang)},children:t})}function nH(){const e=Rt("language"),t=e!==null&&["zh","ja","en"].includes(e)?e:nC,[a,o]=b.useState(t),s=c=>{o(c),Tt("language",c)};return b.useEffect(()=>(Oi=()=>a,()=>{Oi=()=>a})),b.useEffect(()=>{p.updateAllDisplay()},[a]),l.jsxs("div",{style:{display:"inline-block"},children:[l.jsx("span",{style:{display:"inline-block",fontSize:17,position:"relative",marginRight:2},children:l.jsx(jx,{})}),l.jsxs("div",{style:{display:"inline-block",fontSize:14,verticalAlign:"top"},children:[l.jsx(op,{lang:"en",setCurrentLanguage:s}),"|",l.jsx(op,{lang:"zh",setCurrentLanguage:s})]})]})}const aC=ie()({UNIMPLEMENTED:{},OUTDATED:{label:{en:"Outdated",zh:""},warningContent:{en:"WARNING: This job recently had significant changes, and may not have been fully updated to reflect them. Exported plans may not load correctly following these changes, so be cautious about relying on them until the job has been fully updated.",zh:"bugtxt"}},TESTING:{label:{en:"Testing",zh:""},warningContent:{en:"WARNING: This job was recently added to XIV in the Shell and is still being tested. There may be bugs or changes in the near future, so make sure to frequently export and save timelines for this job to make sure you don't lose your work.",zh:"txt"}},LIVE:{}});ie()({TANK:{label:g({en:"Tank"})},HEALER:{label:g({en:"Healer"})},MELEE:{label:g({en:"Melee"})},RANGED:{label:g({en:"Ranged"})},CASTER:{label:g({en:"Caster"})},LIMITED:{label:g({en:"Limited"})}});const iC=ie()({PLD:{role:"TANK",implementationLevel:"TESTING",usesMp:!0,limitBreak:"LAST_BASTION",limitBreakBuff:"LAST_BASTION",mainStat:"strength",zh:""},WAR:{role:"TANK",implementationLevel:"LIVE",limitBreak:"LAND_WAKER",limitBreakBuff:"LAND_WAKER",mainStat:"strength",zh:""},DRK:{role:"TANK",implementationLevel:"LIVE",usesMp:!0,limitBreak:"DARK_FORCE",limitBreakBuff:"DARK_FORCE",mainStat:"strength",zh:""},GNB:{role:"TANK",implementationLevel:"LIVE",limitBreak:"GUNMETAL_SOUL",limitBreakBuff:"GUNMETAL_SOUL",mainStat:"strength",zh:""}}),tT=ie()({WHM:{role:"HEALER",implementationLevel:"TESTING",usesMp:!0,limitBreak:"PULSE_OF_LIFE",mainStat:"mind",zh:""},SCH:{role:"HEALER",implementationLevel:"TESTING",usesMp:!0,limitBreak:"ANGEL_FEATHERS",mainStat:"mind",zh:""},AST:{role:"HEALER",implementationLevel:"TESTING",usesMp:!0,limitBreak:"ASTRAL_STASIS",mainStat:"mind",zh:""},SGE:{role:"HEALER",implementationLevel:"TESTING",usesMp:!0,limitBreak:"TECHNE_MAKRE",mainStat:"mind",zh:""}}),oC=ie()({MNK:{role:"MELEE",implementationLevel:"LIVE",limitBreak:"FINAL_HEAVEN",mainStat:"strength",zh:""},DRG:{role:"MELEE",implementationLevel:"LIVE",limitBreak:"DRAGONSONG_DIVE",mainStat:"strength",zh:""},NIN:{role:"MELEE",implementationLevel:"LIVE",limitBreak:"CHIMATSURI",mainStat:"dexterity",zh:""},SAM:{role:"MELEE",implementationLevel:"LIVE",limitBreak:"DOOM_OF_THE_LIVING",mainStat:"strength",zh:""},RPR:{role:"MELEE",implementationLevel:"LIVE",limitBreak:"THE_END",mainStat:"strength",zh:""},VPR:{role:"MELEE",implementationLevel:"LIVE",limitBreak:"WORLD_SWALLOWER",mainStat:"dexterity",zh:""}}),lC=ie()({BRD:{role:"RANGED",implementationLevel:"LIVE",limitBreak:"SAGITTARIUS_ARROW",mainStat:"dexterity",zh:""},MCH:{role:"RANGED",implementationLevel:"LIVE",limitBreak:"SATELLITE_BEAM",mainStat:"dexterity",zh:""},DNC:{role:"RANGED",implementationLevel:"LIVE",limitBreak:"CRIMSON_LOTUS",mainStat:"dexterity",zh:""}}),sC=ie()({BLM:{role:"CASTER",implementationLevel:"LIVE",usesMp:!0,limitBreak:"METEOR",mainStat:"intelligence",zh:""},SMN:{role:"CASTER",implementationLevel:"LIVE",usesMp:!0,limitBreak:"TERAFLARE",mainStat:"intelligence",zh:""},RDM:{role:"CASTER",implementationLevel:"LIVE",usesMp:!0,limitBreak:"VERMILLION_SCOURGE",mainStat:"intelligence",zh:""},PCT:{role:"CASTER",implementationLevel:"LIVE",usesMp:!0,limitBreak:"CHROMATIC_FANTASY",mainStat:"intelligence",zh:""}}),rC=ie()({BLU:{role:"LIMITED",implementationLevel:"TESTING",usesMp:!0,mainStat:"intelligence",zh:""}}),dt={...iC,...tT,...oC,...lC,...sC,...rC,...ie()({NEVER:{role:"LIMITED",implementationLevel:"UNIMPLEMENTED",usesMp:!1,mainStat:"strength",zh:""}})},cs=Object.keys(dt),Ea=Object.keys(iC),Ei=Object.keys(tT),oa=Object.keys(oC),Il=Object.keys(lC),mi=Object.keys(sC),_l=Object.keys(rC);var ca=(e=>(e[e.ManaGain=0]="ManaGain",e[e.MpTick=1]="MpTick",e[e.LucidTick=2]="LucidTick",e[e.MeditateTick=3]="MeditateTick",e[e.AutoTick=4]="AutoTick",e))(ca||{});class Ce{name;#e;timeTillEvent;delay;effectFn;canceled;constructor(t,a,o){this.name=t,this.#e=[],this.timeTillEvent=a,this.delay=a,this.effectFn=o,this.canceled=!1}hasTag(t){for(let a=0;a<this.#e.length;a++)if(t===this.#e[a])return!0;return!1}addTag(t){this.hasTag(t)||this.#e.push(t)}}class cC{maxValue;currentValue;constructor(t,a){this.maxValue=t,this.currentValue=a}availableAmount(){return this.currentValue}consume(t){this.currentValue<t-An.epsilon&&console.warn(`invalid resource consumption: ${this.type}, ${this.currentValue} - ${t}`),this.currentValue=Math.max(this.currentValue-t,0)}gain(t){this.currentValue=Math.min(this.currentValue+t,this.maxValue)}overrideCurrentValue(t){(t<0||t>this.maxValue)&&console.warn(`invalid resource value override: ${this.type}, ${t} should be in [0, ${this.maxValue}]`),this.currentValue=t}}class Jn extends cC{type;enabled;warnOnOvercap;pendingChange;#e;constructor(t,a,o,s=!1){super(a,o),this.type=t,this.enabled=!0,this.warnOnOvercap=s}available(t){return this.availableAmount()+An.epsilon>=t}availableAmountIncludingDisabled(){return this.currentValue}availableAmount(){return this.enabled?super.availableAmount():0}gain(t){this.warnOnOvercap&&this.currentValue+t>this.maxValue&&p.reportWarning({kind:"overcap",rsc:this.type}),super.gain(t)}gainWrapping(t){this.currentValue=(this.currentValue+t)%(this.maxValue+1)}overrideTimer(t,a){this.pendingChange?(t.addEvent(new Ce("override "+this.pendingChange.name+" timer: "+a,0,()=>{this.pendingChange&&(this.pendingChange.timeTillEvent=a)})),this.pendingChange.timeTillEvent=a):console.error(`Failed to override non-pending resource timer for resource: ${this.type}`)}removeTimer(){this.pendingChange&&(this.pendingChange.canceled=!0,this.pendingChange=void 0)}getLastExpirationTime(){return this.#e}consume(t){super.consume(t),this.currentValue===0&&(this.#e=p.game.getDisplayTime())}}class He extends cC{type;#e;#t;#n;constructor(t,a,o,s){super(o,s),this.type=t,this.#e=a,this.#t=a,this.#n=0}currentStackCd(){return this.#t}maxStacks(){return this.maxValue}useStack(){this.stacksAvailable()===this.maxStacks()&&(this.#n=this.#t),super.consume(1)}useStackWithRecast(t){console.assert(this.maxStacks()===1,"class CoolDown assumes special recasts are only available for skills with at most 1 stack"),this.#t=t,this.useStack()}restore(t){for(;t>0&&super.availableAmount()<this.maxStacks();){const a=Math.min(this.#n,t);this.#n-=a,this.#n<An.epsilon&&(super.gain(1),this.#t=this.#e,this.stacksAvailable()<this.maxStacks()&&(this.#n+=this.#e)),t-=a}}timeTillNextStackAvailable(){return this.#n}overrideTimeTillNextStack(t){this.#n=t}stacksAvailable(){return super.availableAmount()}}class aH{game;#e;constructor(t){this.game=t,this.#e=new Map}forEach(t){this.#e.forEach(t)}get(t){const a=this.#e.get(t);return a||(console.assert(!1,`no cooldown for resource ${t}`),new He("NEVER",0,0,0))}set(t){this.#e.set(t.type,t)}tick(t){for(const a of this.#e.values())a.restore(t)}timeTillNextStackAvailable(t){return this.get(t).timeTillNextStackAvailable()}timeTillAnyStackAvailable(t){const a=this.get(t);return a.stacksAvailable()>0?0:a.timeTillNextStackAvailable()}}class iH{game;#e;constructor(t){this.game=t,this.#e=new Map}get(t){const a=this.#e.get(t);return a||(console.error(`could not find resource ${t}`),new Jn("NEVER",0,0))}set(t){this.#e.set(t.type,t)}timeTillReady(t){const a=this.get(t);return a.pendingChange?a.pendingChange.timeTillEvent:0}addResourceEvent(t){const a=this.get(t.rscType),o=new Ce(t.name,t.delay,()=>{a.pendingChange=void 0,t.fnOnRsc(a)});a.pendingChange=o,t.tags&&t.tags.forEach(s=>{o.addTag(s)}),this.game.addEvent(o)}takeResourceLock(t,a){this.get(t).consume(1),this.addResourceEvent({rscType:t,name:"[resource ready] "+t,delay:a,fnOnRsc:o=>{o.gain(1)}})}}const Hh=new Map,uC=new Map,dC=new Map,hC=new Map;function lp(e){return uC.get(e.toLowerCase())??dC.get(e)??hC.get(e)}function Ft(e,t){const a=Hh.get(e);return a.has(t)||console.error(`no resource info found for ${t}`),a.get(t)}function Wi(e){return Hh.has(e)||console.error("could not find resources for job "+e),Hh.get(e)}function Ve(e,t,a,o){Wi(e).set(t,{isCoolDown:!1,defaultValue:o.default??0,maxValue:a,maxTimeout:o.timeout??-1,warnOnOvercap:o.warnOnOvercap??!1,warnOnTimeout:o.warnOnTimeout??!1});const s=we[t].label;uC.set(we[t].name.toLowerCase(),t),s?.zh!==void 0&&dC.set(s.zh,t),s?.ja!==void 0&&hC.set(s.ja,t)}cs.forEach(e=>{Hh.set(e,new Map([["cd_GCD",{isCoolDown:!0,maxStacks:1,cdPerStack:2.5}]])),Ve(e,"IN_COMBAT",1,{default:0}),Ve(e,"MANA",1e4,{default:1e4}),Ve(e,"TINCTURE",1,{timeout:30}),Ve(e,"SPRINT",1,{timeout:10}),Ve(e,"PARTY_SIZE",8,{default:8}),Ve(e,"AUTOS_ENGAGED",1,{default:0}),Ve(e,"STORED_AUTO",1,{default:0})});oa.forEach(e=>{Ve(e,"REAR_POSITIONAL",1,{default:1}),Ve(e,"FLANK_POSITIONAL",1,{default:1})});function hu(e,t,a,o=1){Wi(e).set(t,{isCoolDown:!0,cdPerStack:a,maxStacks:o})}class nT{type;timeTillFullOrDrop;stacks;effectOrTimerEnabled;constructor(t){this.type=t.type,this.timeTillFullOrDrop=t.timeTillFullOrDrop,this.stacks=t.stacks,this.effectOrTimerEnabled=t.effectOrTimerEnabled}equals(t){return this.type===t.type&&this.timeTillFullOrDrop===t.timeTillFullOrDrop&&this.stacks===t.stacks&&this.effectOrTimerEnabled===t.effectOrTimerEnabled}static fromGameState(t){const a=[];return t.cooldowns.forEach((o,s)=>{o.availableAmount(),a.push(new nT({type:s,timeTillFullOrDrop:o.maxValue-o.availableAmount(),stacks:0,effectOrTimerEnabled:!0}))}),a}applyTo(t){const a=Wi(t.job).get(this.type);if(!a){console.assert(!1,`can't apply override ${this.type} to job ${t.job}`);return}if(a.isCoolDown){const o=t.cooldowns.get(this.type),s=o.maxStacks()*o.currentStackCd()-this.timeTillFullOrDrop,c=Math.floor((s+An.epsilon)/o.currentStackCd()),d=this.timeTillFullOrDrop%o.currentStackCd();o.overrideCurrentValue(c),o.overrideTimeTillNextStack(d)}else{const o=t.resources.get(this.type),s=c=>{o.removeTimer(),t.resources.addResourceEvent({rscType:o.type,name:"drop "+o.type,delay:c,fnOnRsc:d=>{o.type==="ENOCHIAN"?t.loseEnochian():d.consume(d.availableAmount())}})};if(o.type==="LEY_LINES")o.consume(o.availableAmount()),o.gain(1),s(this.timeTillFullOrDrop),o.enabled=this.effectOrTimerEnabled;else if(o.type==="POLYGLOT"){const c=this.stacks;o.consume(o.availableAmount()),o.gain(c);const d=this.timeTillFullOrDrop;d>0&&o.overrideTimer(t,d)}else{const c=this.stacks;o.consume(o.availableAmount()),o.gain(c);const d=this.timeTillFullOrDrop;c>0&&a.maxTimeout>=0&&s(d)}}}serialized(){return{type:this.type,timeTillFullOrDrop:this.timeTillFullOrDrop,stacks:this.stacks,effectOrTimerEnabled:this.effectOrTimerEnabled}}}const Vt=.8,ma=.01;function fu(e,t){}function Me(e,...t){return(a,o)=>{e!==void 0&&e(a,o);for(const s of t)s!==void 0&&s(a,o)}}function Nu(e,...t){return a=>(e===void 0||e(a))&&t.every(o=>o===void 0||o(a))}const us=new Map,aT=new Map;cs.forEach(e=>{us.set(e,new Map),aT.set(e,new Map)});const kh=new Map,Ef="General/Missing.png",Di=new Map;Di.set(XR.ENERGY_DRAIN.id,"ENERGY_DRAIN");Di.set(XR.PHYSICK.id,"PHYSICK");Di.set(QN.MOUNTAIN_BUSTER.id,"MOUNTAIN_BUSTER");Di.set(45960,"ENCHANTED_RIPOSTE");Di.set(45961,"ENCHANTED_ZWERCHHAU");Di.set(45962,"ENCHANTED_REDOUBLEMENT");Di.set(18805,"TEN");Di.set(18806,"CHI");Di.set(18807,"JIN");const sp=new Set,JA=new Map,fC=new Map,EC=new Map,rp=new Map([["Lightning Shock","Lightning Shot"],["Wanderer's Minuet","The Wanderer's Minuet"],["Apex Arow","Apex Arrow"],["Storms Eye","Storm's Eye"],["Storms Path","Storm's Path"]]);function iT(e){return rp.has(e)&&(e=rp.get(e)),e=e.toLowerCase(),!JA.has(e)&&!sp.has(e)&&(console.error(`could not find skill with name: ${e}`),sp.add(e)),JA.get(e)}function oH(e){return e in we?e:xh.findResourceKey(e)}function dl(e,t){return us.get(e).get(t)}function mC(e){return kh.get(e)??Ef}function lH(e,t){return us.get(e).has(t)}function mf(e,t,a){us.get(e).set(t,a),aT.get(e).set(gn[t].discordEmote??gn[t].name.replaceAll(" ",""),t),JA.set(gn[t].name.toLowerCase(),t);const o=gn[t].label;o?.zh!==void 0&&fC.set(o.zh,t),o?.ja!==void 0&&EC.set(o.ja,t),kh.set(t,a.assetPath),gn[t].id!==void 0&&Di.set(gn[t].id,t)}function da(e,t){return e===void 0?a=>t||0:typeof e=="number"?a=>e:e}function sH(e){return console.assert(e.length>0,`invalid trait potency array: ${e}`),t=>{let a;const o=t.config.level;for(const[s,c]of e)t.hasTraitUnlocked(s)&&(a=c);return console.assert(a!==void 0,`no applicable potency at level ${o} found in array ${e}`),a||0}}function tn(e,t){return(Array.isArray(t)?sH(t):da(t,0))(e)}function oT(e,t){const a=gn[t].name;return`${e}/${a.replace(":","")}.png`}function Ka(e,t,a,o){Array.isArray(e)||(e=[e]);const s=Me((f,m)=>m.applicationTime=f.time,o.onApplication),c=Me(f=>f.maybeCancelChanneledSkills(t),o.onExecute),d=f=>{const m=[];return o.potency&&(o.combo||o.positional)&&m.push(...f.computeComboAndPositionalModifiers(tn(f,o.potency),o.combo,o.positional)),o.jobPotencyModifiers&&m.push(...o.jobPotencyModifiers(f)),m},h={kind:"spell",name:t,assetPath:o.assetPath??(e.length===1?oT(e[0],t):Ef),unlockLevel:a,autoUpgrade:o.autoUpgrade,autoDowngrade:o.autoDowngrade,cdName:"cd_GCD",secondaryCd:o.secondaryCooldown,aspect:o.aspect??Ie.Other,replaceIf:o.replaceIf??[],startOnHotbar:o.startOnHotbar??!0,highlightIf:o.highlightIf??(f=>!1),castTimeFn:da(o.castTime,0),recastTimeFn:da(o.recastTime,2.5),animationLockFn:f=>da(o.animationLock,f.config.animationLock)(f),manaCostFn:da(o.manaCost,0),potencyFn:f=>tn(f,o.potency),jobPotencyModifiers:d,drawsAggro:o.drawsAggro??!1,falloff:o.falloff,healingPotencyFn:f=>tn(f,o.healingPotency),jobHealingPotencyModifiers:o.jobHealingPotencyModifiers??(f=>[]),aoeHeal:o.aoeHeal??!1,validateAttempt:o.validateAttempt??(f=>!0),isInstantFn:o.isInstantFn??(f=>!1),onExecute:c,onConfirm:o.onConfirm??fu,onApplication:s,applicationDelay:o.applicationDelay??0,startsAuto:o.startsAuto??!1};if(e.forEach(f=>mf(f,h.name,h)),o.secondaryCooldown!==void 0){const{cdName:f,cooldown:m,maxCharges:R}=o.secondaryCooldown;e.forEach(T=>hu(T,f,m,R))}return h}function nn(e,t,a,o){Array.isArray(e)||(e=[e]);const s=Me((f,m)=>m.applicationTime=f.time,o.onApplication),c=Me(f=>f.maybeCancelChanneledSkills(t),o.onExecute),d=f=>{const m=[];return o.potency&&(o.combo||o.positional)&&m.push(...f.computeComboAndPositionalModifiers(tn(f,o.potency),o.combo,o.positional)),o.jobPotencyModifiers&&m.push(...o.jobPotencyModifiers(f)),m},h={kind:"weaponskill",name:t,assetPath:o.assetPath??(e.length===1?oT(e[0],t):Ef),unlockLevel:a,autoUpgrade:o.autoUpgrade,autoDowngrade:o.autoDowngrade,cdName:"cd_GCD",secondaryCd:o.secondaryCooldown,aspect:o.aspect??Ie.Other,replaceIf:o.replaceIf??[],startOnHotbar:o.startOnHotbar??!0,highlightIf:o.highlightIf??(f=>!1),castTimeFn:da(o.castTime,0),recastTimeFn:da(o.recastTime,2.5),animationLockFn:f=>da(o.animationLock,f.config.animationLock)(f),manaCostFn:da(o.manaCost,0),potencyFn:f=>tn(f,o.potency),jobPotencyModifiers:d,drawsAggro:o.drawsAggro??!1,falloff:o.falloff,healingPotencyFn:f=>tn(f,o.healingPotency),jobHealingPotencyModifiers:o.jobHealingPotencyModifiers??(f=>[]),aoeHeal:o.aoeHeal??!1,validateAttempt:o.validateAttempt??(f=>!0),isInstantFn:o.isInstantFn??(f=>!0),onExecute:c,onConfirm:o.onConfirm??fu,onApplication:s,applicationDelay:o.applicationDelay??0,startsAuto:o.startsAuto??!0};if(e.forEach(f=>mf(f,h.name,h)),o.secondaryCooldown!==void 0){const{cdName:f,cooldown:m,maxCharges:R}=o.secondaryCooldown;e.forEach(T=>hu(T,f,m,R))}return h}function at(e,t,a,o,s){Array.isArray(e)||(e=[e]);const c=Me((m,R)=>R.applicationTime=m.time,s.onApplication),d=Me(m=>m.maybeCancelChanneledSkills(t),s.onExecute),h=Nu(m=>s.requiresCombat?m.isInCombat():!0,s.validateAttempt??(m=>!0)),f={kind:"ability",name:t,assetPath:s.assetPath??(e.length===1?oT(e[0],t):Ef),requiresCombat:s.requiresCombat,unlockLevel:a,autoUpgrade:s.autoUpgrade,autoDowngrade:s.autoDowngrade,cdName:o,secondaryCd:s.secondaryCooldown,aspect:s.aspect??Ie.Other,replaceIf:s.replaceIf??[],startOnHotbar:s.startOnHotbar??!0,highlightIf:s.highlightIf??(m=>!1),animationLockFn:m=>da(s.animationLock,m.config.animationLock)(m),manaCostFn:da(s.manaCost,0),potencyFn:m=>tn(m,s.potency),jobPotencyModifiers:s.jobPotencyModifiers??(m=>[]),drawsAggro:s.drawsAggro??!1,falloff:s.falloff,healingPotencyFn:m=>tn(m,s.healingPotency),jobHealingPotencyModifiers:s.jobHealingPotencyModifiers??(m=>[]),aoeHeal:s.aoeHeal??!1,applicationDelay:s.applicationDelay??0,validateAttempt:h,onExecute:d,onConfirm:s.onConfirm??fu,onApplication:c,startsAuto:s.startsAuto??!1};if(e.forEach(m=>mf(m,f.name,f)),s.cooldown!==void 0&&e.forEach(m=>hu(m,o,s.cooldown,s.maxCharges??1)),s.secondaryCooldown!==void 0){const{cdName:m,cooldown:R,maxCharges:T}=s.secondaryCooldown;e.forEach(S=>hu(S,m,R,T))}return f}function je(e,t,a,o,s){const c=Me((d,h)=>{const f=d.resources.get(s.rscType),m=s.duration??Ft(d.job,s.rscType).maxTimeout,R=typeof m=="number"?T=>m:m;f.gain(f.maxValue),d.enqueueResourceDrop(s.rscType,R(d))},s?.onApplication);return at(e,t,a,o,{...s,onApplication:c})}function Aa(e,t,a,o){Array.isArray(e)||(e=[e]);const s="Limit Break "+o.tier,c=Me(h=>h.maybeCancelChanneledSkills(t),o.onExecute),d={kind:"limitbreak",name:t,animationLockFn:h=>o.animationLock,assetPath:`General/${s}.png`,unlockLevel:1,autoUpgrade:void 0,autoDowngrade:void 0,cdName:a,secondaryCd:void 0,aspect:Ie.Other,replaceIf:[],startOnHotbar:!0,castTimeFn:da(o.castTime,0),highlightIf:h=>!1,manaCostFn:h=>0,potencyFn:da(o.potency,0),jobPotencyModifiers:h=>[],healingPotencyFn:da(o.healingPotency,0),jobHealingPotencyModifiers:h=>[],aoeHeal:!1,drawsAggro:!1,applicationDelay:o.applicationDelay??0,validateAttempt:o.validateAttempt??(h=>!0),onExecute:c,onConfirm:o.onConfirm??fu,onApplication:o.onApplication??fu,startsAuto:!1};return e.forEach(h=>mf(h,d.name,d)),e.forEach(h=>hu(h,a,(o.castTime??0)+o.animationLock,1)),d}class rH{job;constructor(t){this.job=t.job}get(t){const a=us.get(this.job).get(t);return a||(console.error(`creating placeholder skill ${t} for ${this.job}`),at([this.job],t,1,"NEVER",{validateAttempt:o=>!1}))}}function kr(e,t,a){let o=dl(e,t);for(;o.autoUpgrade&&XN(o.autoUpgrade.trait,a);)o=dl(e,kr(e,o.autoUpgrade.otherSkill,a));for(;o.autoDowngrade&&a<o.unlockLevel;)o=dl(e,kr(e,o.autoDowngrade.otherSkill,a));return o.name}function AC(e,t){const a=dl(t.job,e);for(const o of a.replaceIf){if(o.newSkill===e)continue;const s=dl(t.job,o.newSkill);if(!s)throw new Error("couldn't find skill info for "+o.newSkill);if(t.config.level>=s.unlockLevel&&o.condition(t))return kr(t.job,o.newSkill,t.config.level)}return kr(t.job,a.name,t.config.level)}class cH{#e;constructor(t,a){this.#e=[],console.assert(us.has(t),`No skill map found for job: ${t}`);for(const s of us.get(t).values())s.name!=="NEVER"&&s.cdName!=="NEVER"&&a>=s.unlockLevel&&s.autoDowngrade===void 0&&s.startOnHotbar&&this.#e.push(kr(t,s.name,a));let o=kh.get("TINCTURE");switch(dt[t].role){case"TANK":case"MELEE":t==="NIN"||t==="VPR"?o="Role/Dexterity Tincture.png":o="Role/Strength Tincture.png";break;case"HEALER":o="Role/Mind Tincture.png";break;case"LIMITED":case"CASTER":o="Role/Intelligence Tincture.png";break;case"RANGED":o="Role/Dexterity Tincture.png";break}kh.set("TINCTURE",o)}getCurrentSkillNames(t){return this.#e.map(a=>AC(a,t))}}var ze=(e=>(e.Skill="Skill",e.Wait="Wait",e.JumpToTimestamp="JumpToTimestamp",e.WaitForMP="WaitForMP",e.SetResourceEnabled="SetResourceEnabled",e.Unknown="Unknown",e.Invalid="Invalid",e))(ze||{});function ns(e,t){return new Ya({type:"Skill",skillName:e,targetCount:t??1,healTargetCount:void 0})}function uH(e,t){return new Ya({type:"Unknown",skillName:e,targetCount:t??1,healTargetCount:void 0})}function Or(e){return new Ya({type:"Wait",waitDuration:e})}function rl(e){return new Ya({type:"JumpToTimestamp",targetTime:e})}function RC(){return new Ya({type:"WaitForMP"})}function $A(e){return new Ya({type:"SetResourceEnabled",buffName:e})}class Ya{#e;#t;#n;#a;#i;applicationTime;#c;#s;#r;#u;info;legacyWaitDuration;tmp_startLockTime;tmp_endLockTime;tmp_invalid_reasons;constructor(t,a){this.info=t,this.#e=new Set,this.#n=new Map,this.#i=new Map,this.#c=new Map,this.#s=new Map,this.#r=new Map,this.#u=new Map,this.legacyWaitDuration=a,this.tmp_invalid_reasons=[]}serialized(){return this.info.type==="Skill"?{type:"Skill",skillName:gn[this.info.skillName].name,targetCount:this.info.targetCount,healTargetCount:this.info.healTargetCount}:this.info.type==="SetResourceEnabled"?{type:"SetResourceEnabled",buffName:this.info.buffName.toString()}:this.info.type==="Unknown"?{type:"Skill",skillName:this.info.skillName,targetCount:this.info.targetCount,healTargetCount:this.info.healTargetCount}:this.info}toLocalizedString(){if(this.info.type==="Skill")return fi(this.info.skillName);if(this.info.type==="SetResourceEnabled")return g({en:"toggle ",zh:""}).toString()+Ke(this.info.buffName);if(this.info.type==="Wait"){const t=this.info.waitDuration.toFixed(3);return g({en:`wait ${t}`,zh:`${t}`}).toString()}else{if(this.info.type==="WaitForMP")return g({en:"wait MP",zh:""}).toString();if(this.info.type==="JumpToTimestamp"){const t=this.info.targetTime.toFixed(3);return g({en:`jump ${t}`,zh:`${t}`}).toString()}}return"(unknown)"}maybeGetActionKey(){return this.info.type==="Skill"?this.info.skillName:void 0}get targetCount(){return this.info.type==="Skill"?this.info.targetCount:0}get healTargetCount(){return this.info.type==="Skill"?this.info.healTargetCount??0:0}getNameForMessage(){return this.info.type==="Skill"?gn[this.info.skillName].name:this.info.type.toString()}getClone(){return new Ya(this.info,this.legacyWaitDuration)}addBuff(t){this.#e.add(t)}hasBuff(t){return this.#e.has(t)}hasPartyBuff(){const t=this.#t?.snapshotTime;return t!==void 0&&p.game.getPartyBuffs(t).size>0}getPartyBuffs(){const t=this.#t?.snapshotTime;return t?[...p.game.getPartyBuffs(t).keys()]:[]}setTargetCount(t){this.info.type==="Skill"&&(this.info.targetCount=t)}setHealTargetCount(t){this.info.type==="Skill"&&(this.info.healTargetCount=t)}resolveAll(t){this.#t&&this.#t.resolve(t),this.#n.forEach(a=>{a.forEach(o=>{o.resolve(t)})})}resolved(){return this.applicationTime!==void 0}hitBoss(t){return this.#t?.hasHitBoss(t)??!0}getPotency(t){const a={applied:0,snapshottedButPending:0};return this.#t&&this.recordPotency(t,this.#t,a),t.excludeDoT||this.#n.forEach(o=>{o.forEach(s=>{this.recordPotency(t,s,a)})}),a}getHealingPotency(t){const a={applied:0,snapshottedButPending:0};return this.#a&&this.recordPotency(t,this.#a,a),t.excludeHoT||this.#i.forEach(o=>{o.forEach(s=>{this.recordPotency(t,s,a)})}),a}recordPotency(t,a,o){a.hasHitBoss(t.untargetable)?o.applied+=a.getAmount(t):!a.hasResolved()&&a.hasSnapshotted()&&(o.snapshottedButPending+=a.getAmount(t))}removeUnresolvedOvertimePotencies(t){(t==="damage"?this.#n:this.#i).forEach(o=>{const s=o.findIndex(c=>!c.hasResolved());s<0||o.splice(s)})}anyPotencies(){return this.#t!==void 0||this.#n.size>0}anyHealingPotencies(){return this.#a!==void 0||this.#i.size>0}getInitialPotency(){return this.#t}getInitialHealingPotency(){return this.#a}getAllDotPotencies(){return this.getAllOverTimePotencies("damage")}getAllHotPotencies(){return this.getAllOverTimePotencies("healing")}getAllOverTimePotencies(t){return t==="damage"?this.#n:this.#i}getDotPotencies(t){return this.getOverTimePotencies(t,"damage")}getHotPotencies(t){return this.getOverTimePotencies(t,"healing")}getOverTimePotencies(t,a){return a==="damage"?this.#n.get(t)??[]:this.#i.get(t)??[]}addPotency(t){console.assert(!this.#t,`ActionNode for ${this.getNameForMessage()} already had an initial potency`),this.#t=t}addHealingPotency(t){console.assert(!this.#a,`ActionNode for ${this.getNameForMessage()} already had an initial healing potency`),this.#a=t}addDoTPotency(t,a){this.addOverTimePotency(t,a,"damage")}addHoTPotency(t,a){this.addOverTimePotency(t,a,"healing")}addOverTimePotency(t,a,o){const s=o==="damage"?this.#n:this.#i,c=s.get(a)??[];c.length===0&&s.set(a,c),c.push(t)}setOverTimeGap(t,a,o){this.setOverTimeMappedAmount(t,a,o==="damage"?this.#s:this.#u)}getOverTimeGap(t,a){return this.getOverTimeMappedAmount(t,a==="damage"?this.#s:this.#u)}setOverTimeOverrideAmount(t,a,o){this.setOverTimeMappedAmount(t,a,o==="damage"?this.#c:this.#r)}getOverTimeOverrideAmount(t,a){return this.getOverTimeMappedAmount(t,a==="damage"?this.#c:this.#r)}setOverTimeMappedAmount(t,a,o){o.set(t,a)}getOverTimeMappedAmount(t,a){return a.get(t)??0}}class Ur{actions;name="(anonymous line)";constructor(){this.actions=[]}get length(){return this.actions.length}get head(){return this.length>0?this.actions[0]:void 0}get tail(){return this.length>0?this.actions[this.actions.length-1]:void 0}get tailIndex(){return this.length-1}prependActionNode(t){console.assert(t!==void 0),this.actions.unshift(t)}insertActionNodes(t,a){t.length>0&&this.actions.splice(a,0,...t)}addActionNode(t){console.assert(t!==void 0),this.actions.push(t)}iterateAll(t){this.actions.forEach(a=>t(a))}serialized(){return{name:this.name,actions:this.actions.map(t=>t.serialized())}}exportCsv(){return[]}static deserialize(t){const a=t.map(s=>{if(s.type==="Skill"){const c=iT(s.skillName),d="waitDuration"in s?s.waitDuration:void 0;return new Ya(c!==void 0?{type:"Skill",skillName:c,targetCount:s.targetCount,healTargetCount:s.healTargetCount}:{type:"Unknown",skillName:s.skillName,targetCount:s.targetCount,healTargetCount:s.healTargetCount},d)}else if(s.type==="SetResourceEnabled"){const c="waitDuration"in s?s.waitDuration:void 0;return new Ya({type:"SetResourceEnabled",buffName:oH(s.buffName)},c)}else return s.type==="Wait"||s.type==="JumpToTimestamp"||s.type==="WaitForMP"?new Ya(s):(window.alert("unparseable action: "+JSON.stringify(s)),new Ya({type:"Invalid"}))}),o=new Ur;return o.actions=a,o}}class go extends Ur{selectionStartIndex;selectionEndIndex;startIsPivot=!0;config;get selectionStart(){return this.selectionStartIndex!==void 0?this.actions[this.selectionStartIndex]:void 0}get selectionEnd(){return this.selectionEndIndex!==void 0?this.actions[this.selectionEndIndex]:void 0}getFirstSelection(){return this.selectionStart&&console.assert(this.selectionEnd!==void 0),this.selectionStart}getLastSelection(){return this.selectionEnd&&console.assert(this.selectionStart!==void 0),this.selectionEnd}isInSelection(t){return this.selectionStartIndex!==void 0&&this.selectionEndIndex!==void 0&&t>=this.selectionStartIndex&&t<=this.selectionEndIndex}iterateSelected(t){if(!(this.selectionStartIndex===void 0||this.selectionEndIndex===void 0))for(let a=this.selectionStartIndex;a<=this.selectionEndIndex;a++)t(this.actions[a])}getSelected(){const t=new Ur;return this.selectionStartIndex!==void 0&&this.selectionEndIndex!==void 0&&(t.actions=this.actions.slice(this.selectionStartIndex,this.selectionEndIndex+1)),t}getSelectionLength(){return this.selectionStartIndex===void 0||this.selectionEndIndex===void 0?0:this.selectionEndIndex-this.selectionStartIndex+1}selectSingle(t){this.unselectAll(),this.selectionStartIndex=t,this.selectionEndIndex=t,this.startIsPivot=!0}unselectAll(){this.selectionStartIndex=void 0,this.selectionEndIndex=void 0,this.startIsPivot=!0}#e(t,a){this.unselectAll(),this.selectionStartIndex=t,this.selectionEndIndex=a}selectUntil(t){if(this.selectionStartIndex!==void 0&&this.selectionStartIndex===this.selectionEndIndex)this.selectionStartIndex<=t?(this.#e(this.selectionStartIndex,t),this.startIsPivot=!0):(this.#e(t,this.selectionStartIndex),this.startIsPivot=!1);else if(this.selectionStartIndex!==void 0&&this.selectionStartIndex!==this.selectionEndIndex){const a=this.startIsPivot?this.selectionStartIndex:this.selectionEndIndex;this.selectionStartIndex=a,this.selectionEndIndex=a,this.selectUntil(t)}}onClickNode(t,a){a&&this.selectionStartIndex!==void 0?this.selectUntil(t):this.selectionStartIndex===t&&this.selectionEndIndex===t?this.unselectAll():this.selectSingle(t)}moveSelected(t){if(t===0||this.selectionStartIndex===void 0||this.selectionEndIndex===void 0)return;const a=this.selectionStartIndex,o=this.getSelectionLength(),s=this.actions.splice(a,o);let c=a+t;return c=Math.max(c,0),c=Math.min(c,this.length),this.actions.splice(c,0,...s),this.selectionStartIndex=c,this.selectionEndIndex=c+o-1,c}deleteSelected(){if(this.selectionStartIndex===void 0||this.selectionEndIndex===void 0)return;const t=this.selectionStartIndex;return this.actions.splice(t,this.getSelectionLength()),this.unselectAll(),t}serialized(){console.assert(this.config);const t=super.serialized();return{name:t.name,fileType:ri.Record,config:this.config?.serialized(),actions:t.actions}}spliceUpTo(t){const a=this.selectionStartIndex,o=this.selectionEndIndex;this.unselectAll(),t<this.length&&this.actions.splice(t,this.length-t),a!==void 0&&(this.selectSingle(a),this.selectUntil(o))}getCloneWithSharedConfig(){const t=new go;return t.config=this.config,t.actions=this.actions.map(a=>a.getClone()),t.selectionStartIndex=this.selectionStartIndex,t.selectionEndIndex=this.selectionEndIndex,t}}var Wr=jN();function TC({controlled:e,default:t,name:a,state:o="value"}){const{current:s}=b.useRef(e!==void 0),[c,d]=b.useState(t),h=s?e:c,f=b.useCallback(m=>{s||d(m)},[]);return[h,f]}const cp={};function Xr(e,t){const a=b.useRef(cp);return a.current===cp&&(a.current=e(t)),a}const _A=MR[`useInsertionEffect${Math.random().toFixed(1)}`.slice(0,-3)],dH=_A&&_A!==b.useLayoutEffect?_A:e=>e();function lt(e){const t=Xr(hH).current;return t.next=e,dH(t.effect),t.trampoline}function hH(){const e={next:void 0,callback:fH,trampoline:(...t)=>e.callback?.(...t),effect:()=>{e.callback=e.next}};return e}function fH(){}const SC=b.createContext(void 0);function Af(){const e=b.useContext(SC);if(e===void 0)throw new Error("Base UI: TooltipRootContext is missing. Tooltip parts must be placed within <Tooltip.Root>.");return e}const EH=[];function IC(e){b.useEffect(e,EH)}const tu=0;class Rl{static create(){return new Rl}currentId=tu;start(t,a){this.clear(),this.currentId=setTimeout(()=>{this.currentId=tu,a()},t)}isStarted(){return this.currentId!==tu}clear=()=>{this.currentId!==tu&&(clearTimeout(this.currentId),this.currentId=tu)};disposeEffect=()=>this.clear}function Pr(){const e=Xr(Rl.create).current;return IC(e.disposeEffect),e}const mH=()=>{},kt=typeof document<"u"?b.useLayoutEffect:mH;function Rf(){return typeof window<"u"}function gl(e){return lT(e)?(e.nodeName||"").toLowerCase():"#document"}function wn(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Qi(e){var t;return(t=(lT(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function lT(e){return Rf()?e instanceof Node||e instanceof wn(e).Node:!1}function Ht(e){return Rf()?e instanceof Element||e instanceof wn(e).Element:!1}function Pn(e){return Rf()?e instanceof HTMLElement||e instanceof wn(e).HTMLElement:!1}function eR(e){return!Rf()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof wn(e).ShadowRoot}const AH=new Set(["inline","contents"]);function Cu(e){const{overflow:t,overflowX:a,overflowY:o,display:s}=ui(e);return/auto|scroll|overlay|hidden|clip/.test(t+o+a)&&!AH.has(s)}const RH=new Set(["table","td","th"]);function TH(e){return RH.has(gl(e))}const SH=[":popover-open",":modal"];function Tf(e){return SH.some(t=>{try{return e.matches(t)}catch{return!1}})}const IH=["transform","translate","scale","rotate","perspective"],_H=["transform","translate","scale","rotate","perspective","filter"],gH=["paint","layout","strict","content"];function sT(e){const t=Sf(),a=Ht(e)?ui(e):e;return IH.some(o=>a[o]?a[o]!=="none":!1)||(a.containerType?a.containerType!=="normal":!1)||!t&&(a.backdropFilter?a.backdropFilter!=="none":!1)||!t&&(a.filter?a.filter!=="none":!1)||_H.some(o=>(a.willChange||"").includes(o))||gH.some(o=>(a.contain||"").includes(o))}function pH(e){let t=Do(e);for(;Pn(t)&&!bo(t);){if(sT(t))return t;if(Tf(t))return null;t=Do(t)}return null}function Sf(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const NH=new Set(["html","body","#document"]);function bo(e){return NH.has(gl(e))}function ui(e){return wn(e).getComputedStyle(e)}function If(e){return Ht(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Do(e){if(gl(e)==="html")return e;const t=e.assignedSlot||e.parentNode||eR(e)&&e.host||Qi(e);return eR(t)?t.host:t}function _C(e){const t=Do(e);return bo(t)?e.ownerDocument?e.ownerDocument.body:e.body:Pn(t)&&Cu(t)?t:_C(t)}function hl(e,t,a){var o;t===void 0&&(t=[]),a===void 0&&(a=!0);const s=_C(e),c=s===((o=e.ownerDocument)==null?void 0:o.body),d=wn(s);if(c){const h=tR(d);return t.concat(d,d.visualViewport||[],Cu(s)?s:[],h&&a?hl(h):[])}return t.concat(s,hl(s,[],a))}function tR(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Ni(e){const t=Xr(CH,e).current;return t.next=e,kt(t.effect),t}function CH(e){const t={current:e,next:e,effect:()=>{t.current=t.next}};return t}const qr=typeof navigator<"u",gA=DH(),gC=vH(),pC=yH(),NC=typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter:none"),bH=gA.platform==="MacIntel"&&gA.maxTouchPoints>1?!0:/iP(hone|ad|od)|iOS/.test(gA.platform),CC=qr&&/apple/i.test(navigator.vendor),nR=qr&&/android/i.test(gC)||/android/i.test(pC),OH=qr&&gC.toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints,bC=pC.includes("jsdom/");function DH(){if(!qr)return{platform:"",maxTouchPoints:-1};const e=navigator.userAgentData;return e?.platform?{platform:e.platform,maxTouchPoints:navigator.maxTouchPoints}:{platform:navigator.platform??"",maxTouchPoints:navigator.maxTouchPoints??-1}}function yH(){if(!qr)return"";const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(({brand:t,version:a})=>`${t}/${a}`).join(" "):navigator.userAgent}function vH(){if(!qr)return"";const e=navigator.userAgentData;return e?.platform?e.platform:navigator.platform??""}const aR="data-base-ui-focusable",OC="active",DC="selected",MH="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function ol(e){let t=e.activeElement;for(;t?.shadowRoot?.activeElement!=null;)t=t.shadowRoot.activeElement;return t}function mn(e,t){if(!e||!t)return!1;const a=t.getRootNode?.();if(e.contains(t))return!0;if(a&&eR(a)){let o=t;for(;o;){if(e===o)return!0;o=o.parentNode||o.host}}return!1}function ja(e){return"composedPath"in e?e.composedPath()[0]:e.target}function _o(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const a=e;return a.target!=null&&t.contains(a.target)}function LH(e){return e.matches("html,body")}function Un(e){return e?.ownerDocument||document}function yC(e){return Pn(e)&&e.matches(MH)}function up(e){return e?e.getAttribute("role")==="combobox"&&yC(e):!1}function xH(e){if(!e||bC)return!0;try{return e.matches(":focus-visible")}catch{return!0}}function iR(e){return e?e.hasAttribute(aR)?e:e.querySelector(`[${aR}]`)||e:null}function as(e,t,a=!0){return e.filter(s=>s.parentId===t&&(!a||s.context?.open)).flatMap(s=>[s,...as(e,s.id,a)])}function dp(e,t){let a=[],o=e.find(s=>s.id===t)?.parentId;for(;o;){const s=e.find(c=>c.id===o);o=s?.parentId,s&&(a=a.concat(s))}return a}function HH(e){e.preventDefault(),e.stopPropagation()}function kH(e){return"nativeEvent"in e}function UH(e){return e.mozInputSource===0&&e.isTrusted?!0:nR&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function PH(e){return bC?!1:!nR&&e.width===0&&e.height===0||nR&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function wr(e,t){const a=["mouse","pen"];return t||a.push("",void 0),a.includes(e)}const wH=["top","right","bottom","left"],Gr=Math.min,za=Math.max,Uh=Math.round,Jd=Math.floor,Yi=e=>({x:e,y:e}),GH={left:"right",right:"left",bottom:"top",top:"bottom"},BH={start:"end",end:"start"};function oR(e,t,a){return za(e,Gr(t,a))}function yo(e,t){return typeof e=="function"?e(t):e}function di(e){return e.split("-")[0]}function pl(e){return e.split("-")[1]}function rT(e){return e==="x"?"y":"x"}function cT(e){return e==="y"?"height":"width"}const FH=new Set(["top","bottom"]);function Ci(e){return FH.has(di(e))?"y":"x"}function uT(e){return rT(Ci(e))}function jH(e,t,a){a===void 0&&(a=!1);const o=pl(e),s=uT(e),c=cT(s);let d=s==="x"?o===(a?"end":"start")?"right":"left":o==="start"?"bottom":"top";return t.reference[c]>t.floating[c]&&(d=Ph(d)),[d,Ph(d)]}function zH(e){const t=Ph(e);return[lR(e),t,lR(t)]}function lR(e){return e.replace(/start|end/g,t=>BH[t])}const hp=["left","right"],fp=["right","left"],YH=["top","bottom"],KH=["bottom","top"];function VH(e,t,a){switch(e){case"top":case"bottom":return a?t?fp:hp:t?hp:fp;case"left":case"right":return t?YH:KH;default:return[]}}function WH(e,t,a,o){const s=pl(e);let c=VH(di(e),a==="start",o);return s&&(c=c.map(d=>d+"-"+s),t&&(c=c.concat(c.map(lR)))),c}function Ph(e){return e.replace(/left|right|bottom|top/g,t=>GH[t])}function XH(e){return{top:0,right:0,bottom:0,left:0,...e}}function vC(e){return typeof e!="number"?XH(e):{top:e,right:e,bottom:e,left:e}}function wh(e){const{x:t,y:a,width:o,height:s}=e;return{width:o,height:s,top:a,left:t,right:t+o,bottom:a+s,x:t,y:a}}var qH=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Gh=qH.join(","),MC=typeof Element>"u",Br=MC?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Bh=!MC&&Element.prototype.getRootNode?function(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}:function(e){return e?.ownerDocument},Fh=function e(t,a){var o;a===void 0&&(a=!0);var s=t==null||(o=t.getAttribute)===null||o===void 0?void 0:o.call(t,"inert"),c=s===""||s==="true",d=c||a&&t&&e(t.parentNode);return d},ZH=function(t){var a,o=t==null||(a=t.getAttribute)===null||a===void 0?void 0:a.call(t,"contenteditable");return o===""||o==="true"},LC=function(t,a,o){if(Fh(t))return[];var s=Array.prototype.slice.apply(t.querySelectorAll(Gh));return a&&Br.call(t,Gh)&&s.unshift(t),s=s.filter(o),s},xC=function e(t,a,o){for(var s=[],c=Array.from(t);c.length;){var d=c.shift();if(!Fh(d,!1))if(d.tagName==="SLOT"){var h=d.assignedElements(),f=h.length?h:d.children,m=e(f,!0,o);o.flatten?s.push.apply(s,m):s.push({scopeParent:d,candidates:m})}else{var R=Br.call(d,Gh);R&&o.filter(d)&&(a||!t.includes(d))&&s.push(d);var T=d.shadowRoot||typeof o.getShadowRoot=="function"&&o.getShadowRoot(d),S=!Fh(T,!1)&&(!o.shadowRootFilter||o.shadowRootFilter(d));if(T&&S){var I=e(T===!0?d.children:T.children,!0,o);o.flatten?s.push.apply(s,I):s.push({scopeParent:d,candidates:I})}else c.unshift.apply(c,d.children)}}return s},HC=function(t){return!isNaN(parseInt(t.getAttribute("tabindex"),10))},kC=function(t){if(!t)throw new Error("No node provided");return t.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||ZH(t))&&!HC(t)?0:t.tabIndex},QH=function(t,a){var o=kC(t);return o<0&&a&&!HC(t)?0:o},JH=function(t,a){return t.tabIndex===a.tabIndex?t.documentOrder-a.documentOrder:t.tabIndex-a.tabIndex},UC=function(t){return t.tagName==="INPUT"},$H=function(t){return UC(t)&&t.type==="hidden"},ek=function(t){var a=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(o){return o.tagName==="SUMMARY"});return a},tk=function(t,a){for(var o=0;o<t.length;o++)if(t[o].checked&&t[o].form===a)return t[o]},nk=function(t){if(!t.name)return!0;var a=t.form||Bh(t),o=function(h){return a.querySelectorAll('input[type="radio"][name="'+h+'"]')},s;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")s=o(window.CSS.escape(t.name));else try{s=o(t.name)}catch(d){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",d.message),!1}var c=tk(s,t.form);return!c||c===t},ak=function(t){return UC(t)&&t.type==="radio"},ik=function(t){return ak(t)&&!nk(t)},ok=function(t){var a,o=t&&Bh(t),s=(a=o)===null||a===void 0?void 0:a.host,c=!1;if(o&&o!==t){var d,h,f;for(c=!!((d=s)!==null&&d!==void 0&&(h=d.ownerDocument)!==null&&h!==void 0&&h.contains(s)||t!=null&&(f=t.ownerDocument)!==null&&f!==void 0&&f.contains(t));!c&&s;){var m,R,T;o=Bh(s),s=(m=o)===null||m===void 0?void 0:m.host,c=!!((R=s)!==null&&R!==void 0&&(T=R.ownerDocument)!==null&&T!==void 0&&T.contains(s))}}return c},Ep=function(t){var a=t.getBoundingClientRect(),o=a.width,s=a.height;return o===0&&s===0},lk=function(t,a){var o=a.displayCheck,s=a.getShadowRoot;if(getComputedStyle(t).visibility==="hidden")return!0;var c=Br.call(t,"details>summary:first-of-type"),d=c?t.parentElement:t;if(Br.call(d,"details:not([open]) *"))return!0;if(!o||o==="full"||o==="legacy-full"){if(typeof s=="function"){for(var h=t;t;){var f=t.parentElement,m=Bh(t);if(f&&!f.shadowRoot&&s(f)===!0)return Ep(t);t.assignedSlot?t=t.assignedSlot:!f&&m!==t.ownerDocument?t=m.host:t=f}t=h}if(ok(t))return!t.getClientRects().length;if(o!=="legacy-full")return!0}else if(o==="non-zero-area")return Ep(t);return!1},sk=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var a=t.parentElement;a;){if(a.tagName==="FIELDSET"&&a.disabled){for(var o=0;o<a.children.length;o++){var s=a.children.item(o);if(s.tagName==="LEGEND")return Br.call(a,"fieldset[disabled] *")?!0:!s.contains(t)}return!0}a=a.parentElement}return!1},sR=function(t,a){return!(a.disabled||Fh(a)||$H(a)||lk(a,t)||ek(a)||sk(a))},rR=function(t,a){return!(ik(a)||kC(a)<0||!sR(t,a))},rk=function(t){var a=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(a)||a>=0)},ck=function e(t){var a=[],o=[];return t.forEach(function(s,c){var d=!!s.scopeParent,h=d?s.scopeParent:s,f=QH(h,d),m=d?e(s.candidates):h;f===0?d?a.push.apply(a,m):a.push(h):o.push({documentOrder:c,tabIndex:f,item:s,isScope:d,content:m})}),o.sort(JH).reduce(function(s,c){return c.isScope?s.push.apply(s,c.content):s.push(c.content),s},[]).concat(a)},_f=function(t,a){a=a||{};var o;return a.getShadowRoot?o=xC([t],a.includeContainer,{filter:rR.bind(null,a),flatten:!1,getShadowRoot:a.getShadowRoot,shadowRootFilter:rk}):o=LC(t,a.includeContainer,rR.bind(null,a)),ck(o)},uk=function(t,a){a=a||{};var o;return a.getShadowRoot?o=xC([t],a.includeContainer,{filter:sR.bind(null,a),flatten:!0,getShadowRoot:a.getShadowRoot}):o=LC(t,a.includeContainer,sR.bind(null,a)),o},PC=function(t,a){if(a=a||{},!t)throw new Error("No node provided");return Br.call(t,Gh)===!1?!1:rR(a,t)};const bu=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function wC(e,t){const a=_f(e,bu()),o=a.length;if(o===0)return;const s=ol(Un(e)),c=a.indexOf(s),d=c===-1?t===1?0:o-1:c+t;return a[d]}function GC(e){return wC(Un(e).body,1)||e}function BC(e){return wC(Un(e).body,-1)||e}function uu(e,t){const a=t||e.currentTarget,o=e.relatedTarget;return!o||!mn(a,o)}function dk(e){_f(e,bu()).forEach(a=>{a.dataset.tabindex=a.getAttribute("tabindex")||"",a.setAttribute("tabindex","-1")})}function mp(e){e.querySelectorAll("[data-tabindex]").forEach(a=>{const o=a.dataset.tabindex;delete a.dataset.tabindex,o?a.setAttribute("tabindex",o):a.removeAttribute("tabindex")})}const hk={...MR};let Ap=0;function fk(e,t="mui"){const[a,o]=b.useState(e),s=e||a;return b.useEffect(()=>{a==null&&(Ap+=1,o(`${t}-${Ap}`))},[a,t]),s}const Rp=hk.useId;function gf(e,t){if(Rp!==void 0){const a=Rp();return e??(t?`${t}-${a}`:a)}return fk(e,t)}function Ek(){const e=new Map;return{emit(t,a){e.get(t)?.forEach(o=>o(a))},on(t,a){e.has(t)||e.set(t,new Set),e.get(t).add(a)},off(t,a){e.get(t)?.delete(a)}}}const mk=b.createContext(null),Ak=b.createContext(null),dT=()=>b.useContext(mk)?.id||null,pf=()=>b.useContext(Ak);function Fr(e){return`data-base-ui-${e}`}const Tp=Fr("safe-polygon");function uh(e,t,a){if(a&&!wr(a))return 0;if(typeof e=="number")return e;if(typeof e=="function"){const o=e();return typeof o=="number"?o:o?.[t]}return e?.[t]}function pA(e){return typeof e=="function"?e():e}function Rk(e,t={}){const{open:a,onOpenChange:o,dataRef:s,events:c,elements:d}=e,{enabled:h=!0,delay:f=0,handleClose:m=null,mouseOnly:R=!1,restMs:T=0,move:S=!0}=t,I=pf(),C=dT(),_=Ni(m),O=Ni(f),D=Ni(a),H=Ni(T),x=b.useRef(void 0),L=Pr(),w=b.useRef(void 0),G=Pr(),B=b.useRef(!0),z=b.useRef(!1),Q=b.useRef(()=>{}),ce=b.useRef(!1),ue=lt(()=>{const K=s.current.openEvent?.type;return K?.includes("mouse")&&K!=="mousedown"});b.useEffect(()=>{if(!h)return;function K({open:$}){$||(L.clear(),G.clear(),B.current=!0,ce.current=!1)}return c.on("openchange",K),()=>{c.off("openchange",K)}},[h,c,L,G]),b.useEffect(()=>{if(!h||!_.current||!a)return;function K(de){ue()&&o(!1,de,"hover")}const $=Un(d.floating).documentElement;return $.addEventListener("mouseleave",K),()=>{$.removeEventListener("mouseleave",K)}},[d.floating,a,o,h,_,ue]);const te=b.useCallback((K,$=!0,de="hover")=>{const y=uh(O.current,"close",x.current);y&&!w.current?L.start(y,()=>o(!1,K,de)):$&&(L.clear(),o(!1,K,de))},[O,o,L]),ee=lt(()=>{Q.current(),w.current=void 0}),Ee=lt(()=>{if(z.current){const K=Un(d.floating).body;K.style.pointerEvents="",K.removeAttribute(Tp),z.current=!1}}),he=lt(()=>s.current.openEvent?["click","mousedown"].includes(s.current.openEvent.type):!1);b.useEffect(()=>{if(!h)return;function K(W){if(L.clear(),B.current=!1,R&&!wr(x.current)||pA(H.current)>0&&!uh(O.current,"open"))return;const j=uh(O.current,"open",x.current);j?L.start(j,()=>{D.current||o(!0,W,"hover")}):a||o(!0,W,"hover")}function $(W){if(he()){Ee();return}Q.current();const j=Un(d.floating);if(G.clear(),ce.current=!1,_.current&&s.current.floatingContext){a||L.clear(),w.current=_.current({...s.current.floatingContext,tree:I,x:W.clientX,y:W.clientY,onClose(){Ee(),ee(),he()||te(W,!0,"safe-polygon")}});const ae=w.current;j.addEventListener("mousemove",ae),Q.current=()=>{j.removeEventListener("mousemove",ae)};return}(x.current==="touch"?!mn(d.floating,W.relatedTarget):!0)&&te(W)}function de(W){he()||s.current.floatingContext&&_.current?.({...s.current.floatingContext,tree:I,x:W.clientX,y:W.clientY,onClose(){Ee(),ee(),he()||te(W)}})(W)}function y(){L.clear()}function Y(W){he()||te(W,!1)}if(Ht(d.domReference)){const W=d.domReference,j=d.floating;return a&&W.addEventListener("mouseleave",de),S&&W.addEventListener("mousemove",K,{once:!0}),W.addEventListener("mouseenter",K),W.addEventListener("mouseleave",$),j&&(j.addEventListener("mouseleave",de),j.addEventListener("mouseenter",y),j.addEventListener("mouseleave",Y)),()=>{a&&W.removeEventListener("mouseleave",de),S&&W.removeEventListener("mousemove",K),W.removeEventListener("mouseenter",K),W.removeEventListener("mouseleave",$),j&&(j.removeEventListener("mouseleave",de),j.removeEventListener("mouseenter",y),j.removeEventListener("mouseleave",Y))}}},[d,h,e,R,S,te,ee,Ee,o,a,D,I,O,_,s,he,H,L,G]),kt(()=>{if(h&&a&&_.current?.__options?.blockPointerEvents&&ue()){z.current=!0;const K=d.floating;if(Ht(d.domReference)&&K){const $=Un(d.floating).body;$.setAttribute(Tp,"");const de=d.domReference,y=I?.nodesRef.current.find(Y=>Y.id===C)?.context?.elements.floating;return y&&(y.style.pointerEvents=""),$.style.pointerEvents="none",de.style.pointerEvents="auto",K.style.pointerEvents="auto",()=>{$.style.pointerEvents="",de.style.pointerEvents="",K.style.pointerEvents=""}}}},[h,a,C,d,I,_,ue]),kt(()=>{a||(x.current=void 0,ce.current=!1,ee(),Ee())},[a,ee,Ee]),b.useEffect(()=>()=>{ee(),L.clear(),G.clear(),Ee()},[h,d.domReference,ee,Ee,L,G]);const M=b.useMemo(()=>{function K($){x.current=$.pointerType}return{onPointerDown:K,onPointerEnter:K,onMouseMove($){const{nativeEvent:de}=$;function y(){!B.current&&!D.current&&o(!0,de,"hover")}R&&!wr(x.current)||a||pA(H.current)===0||ce.current&&$.movementX**2+$.movementY**2<2||(G.clear(),x.current==="touch"?y():(ce.current=!0,G.start(pA(H.current),y)))}}},[R,o,a,D,H,G]);return b.useMemo(()=>h?{reference:M}:{},[h,M])}const Tk=b.createContext({hasProvider:!1,timeoutMs:0,delayRef:{current:0},initialDelayRef:{current:0},timeout:new Rl,currentIdRef:{current:null},currentContextRef:{current:null}});function Sk(e,t={}){const{open:a,onOpenChange:o,floatingId:s}=e,{enabled:c=!0}=t,d=b.useContext(Tk),{currentIdRef:h,delayRef:f,timeoutMs:m,initialDelayRef:R,currentContextRef:T,hasProvider:S,timeout:I}=d,[C,_]=b.useState(!1);return kt(()=>{function O(){_(!1),T.current?.setIsInstantPhase(!1),h.current=null,T.current=null,f.current=R.current}if(c&&h.current&&!a&&h.current===s){if(_(!1),m)return I.start(m,O),()=>{I.clear()};O()}},[c,a,s,h,f,m,R,T,I]),kt(()=>{if(!c||!a)return;const O=T.current,D=h.current;T.current={onOpenChange:o,setIsInstantPhase:_},h.current=s,f.current={open:0,close:uh(R.current,"close")},D!==null&&D!==s?(I.clear(),_(!0),O?.setIsInstantPhase(!0),O?.onOpenChange(!1)):(_(!1),O?.setIsInstantPhase(!1))},[c,a,s,o,h,f,m,R,T,I]),kt(()=>()=>{T.current=null},[T]),b.useMemo(()=>({hasProvider:S,delayRef:f,isInstantPhase:C}),[S,f,C])}function jr(e,t,a,o){const s=Xr(FC).current;return _k(s,e,t,a,o)&&jC(s,[e,t,a,o]),s.callback}function Ik(e){const t=Xr(FC).current;return gk(t,e)&&jC(t,e),t.callback}function FC(){return{callback:null,cleanup:null,refs:[]}}function _k(e,t,a,o,s){return e.refs[0]!==t||e.refs[1]!==a||e.refs[2]!==o||e.refs[3]!==s}function gk(e,t){return e.refs.length!==t.length||e.refs.some((a,o)=>a!==t[o])}function jC(e,t){if(e.refs=t,t.every(a=>a==null)){e.callback=null;return}e.callback=a=>{if(e.cleanup&&(e.cleanup(),e.cleanup=null),a!=null){const o=Array(t.length).fill(null);for(let s=0;s<t.length;s+=1){const c=t[s];if(c!=null)switch(typeof c){case"function":{const d=c(a);typeof d=="function"&&(o[s]=d);break}case"object":{c.current=a;break}}}e.cleanup=()=>{for(let s=0;s<t.length;s+=1){const c=t[s];if(c!=null)switch(typeof c){case"function":{const d=o[s];typeof d=="function"?d():c(null);break}case"object":{c.current=null;break}}}}}}}const hT={clip:"rect(0 0 0 0)",overflow:"hidden",whiteSpace:"nowrap",position:"fixed",top:0,left:0,border:0,padding:0,width:1,height:1,margin:-1},jh=b.forwardRef(function(t,a){const[o,s]=b.useState();kt(()=>{CC&&s("button")},[]);const c={ref:a,tabIndex:0,role:o,"aria-hidden":o?void 0:!0,style:hT};return l.jsx("span",{...t,...c,"data-base-ui-focus-guard":""})});let Sp=0;function NA(e,t={}){const{preventScroll:a=!1,cancelPrevious:o=!0,sync:s=!1}=t;o&&cancelAnimationFrame(Sp);const c=()=>e?.focus({preventScroll:a});s?c():Sp=requestAnimationFrame(c)}const Dr={inert:new WeakMap,"aria-hidden":new WeakMap,none:new WeakMap};function Ip(e){return e==="inert"?Dr.inert:e==="aria-hidden"?Dr["aria-hidden"]:Dr.none}let $d=new WeakSet,eh={},CA=0;const zC=e=>e&&(e.host||zC(e.parentNode)),pk=(e,t)=>t.map(a=>{if(e.contains(a))return a;const o=zC(a);return e.contains(o)?o:null}).filter(a=>a!=null);function Nk(e,t,a,o){const s="data-base-ui-inert",c=o?"inert":a?"aria-hidden":null,d=pk(t,e),h=new Set,f=new Set(d),m=[];eh[s]||(eh[s]=new WeakMap);const R=eh[s];d.forEach(T),S(t),h.clear();function T(I){!I||h.has(I)||(h.add(I),I.parentNode&&T(I.parentNode))}function S(I){!I||f.has(I)||[].forEach.call(I.children,C=>{if(gl(C)!=="script")if(h.has(C))S(C);else{const _=c?C.getAttribute(c):null,O=_!==null&&_!=="false",D=Ip(c),H=(D.get(C)||0)+1,x=(R.get(C)||0)+1;D.set(C,H),R.set(C,x),m.push(C),H===1&&O&&$d.add(C),x===1&&C.setAttribute(s,""),!O&&c&&C.setAttribute(c,c==="inert"?"":"true")}})}return CA+=1,()=>{m.forEach(I=>{const C=Ip(c),O=(C.get(I)||0)-1,D=(R.get(I)||0)-1;C.set(I,O),R.set(I,D),O||(!$d.has(I)&&c&&I.removeAttribute(c),$d.delete(I)),D||I.removeAttribute(s)}),CA-=1,CA||(Dr.inert=new WeakMap,Dr["aria-hidden"]=new WeakMap,Dr.none=new WeakMap,$d=new WeakSet,eh={})}}function Ck(e,t=!1,a=!1){const o=Un(e[0]).body;return Nk(e.concat(Array.from(o.querySelectorAll("[aria-live]"))),o,t,a)}const YC=b.createContext(null),KC=()=>b.useContext(YC),_p=Fr("portal");function VC(e={}){const{id:t,root:a}=e,o=gf(),s=KC(),[c,d]=b.useState(null),h=b.useRef(null);return kt(()=>()=>{c?.remove(),queueMicrotask(()=>{h.current=null})},[c]),kt(()=>{if(!o||h.current)return;const f=t?document.getElementById(t):null;if(!f)return;const m=document.createElement("div");m.id=o,m.setAttribute(_p,""),f.appendChild(m),h.current=m,d(m)},[t,o]),kt(()=>{if(a===null||!o||h.current)return;let f=a||s?.portalNode;f&&!lT(f)&&(f=f.current),f=f||document.body;let m=null;t&&(m=document.createElement("div"),m.id=t,f.appendChild(m));const R=document.createElement("div");R.id=o,R.setAttribute(_p,""),f=m||f,f.appendChild(R),h.current=R,d(R)},[t,a,o,s]),c}function bk(e){const{children:t,id:a,root:o,preserveTabOrder:s=!0}=e,c=VC({id:a,root:o}),[d,h]=b.useState(null),f=b.useRef(null),m=b.useRef(null),R=b.useRef(null),T=b.useRef(null),S=d?.modal,I=d?.open,C=!!d&&!d.modal&&d.open&&s&&!!(o||c);return b.useEffect(()=>{if(!c||!s||S)return;function _(O){c&&uu(O)&&(O.type==="focusin"?mp:dk)(c)}return c.addEventListener("focusin",_,!0),c.addEventListener("focusout",_,!0),()=>{c.removeEventListener("focusin",_,!0),c.removeEventListener("focusout",_,!0)}},[c,s,S]),b.useEffect(()=>{c&&(I||mp(c))},[I,c]),l.jsxs(YC.Provider,{value:b.useMemo(()=>({preserveTabOrder:s,beforeOutsideRef:f,afterOutsideRef:m,beforeInsideRef:R,afterInsideRef:T,portalNode:c,setFocusManagerState:h}),[s,c]),children:[C&&c&&l.jsx(jh,{"data-type":"outside",ref:f,onFocus:_=>{if(uu(_,c))R.current?.focus();else{const O=d?d.domReference:null;BC(O)?.focus()}}}),C&&c&&l.jsx("span",{"aria-owns":c.id,style:hT}),c&&Wr.createPortal(t,c),C&&c&&l.jsx(jh,{"data-type":"outside",ref:m,onFocus:_=>{if(uu(_,c))T.current?.focus();else{const O=d?d.domReference:null;GC(O)?.focus(),d?.closeOnFocusOut&&d?.onOpenChange(!1,_.nativeEvent,"focus-out")}}})]})}const Ok={style:{transition:"none"}},ll={},WC="data-base-ui-click-trigger",Dk={fallbackAxisSide:"end"},gp=20;let cl=[];function fT(){cl=cl.filter(e=>e.isConnected)}function yk(e){fT(),e&&gl(e)!=="body"&&(cl.push(e),cl.length>gp&&(cl=cl.slice(-gp)))}function pp(){return fT(),cl[cl.length-1]}function vk(e){const t=bu();return PC(e,t)?e:_f(e,t)[0]||e}function Np(e,t){if(!t.current.includes("floating")&&!e.getAttribute("role")?.includes("dialog"))return;const a=bu(),s=uk(e,a).filter(d=>{const h=d.getAttribute("data-tabindex")||"";return PC(d,a)||d.hasAttribute("data-tabindex")&&!h.startsWith("-")}),c=e.getAttribute("tabindex");t.current.includes("floating")||s.length===0?c!=="0"&&e.setAttribute("tabindex","0"):(c!=="-1"||e.hasAttribute("data-tabindex")&&e.getAttribute("data-tabindex")!=="-1")&&(e.setAttribute("tabindex","-1"),e.setAttribute("data-tabindex","-1"))}function Mk(e){const{context:t,children:a,disabled:o=!1,order:s=["content"],initialFocus:c=0,returnFocus:d=!0,restoreFocus:h=!1,modal:f=!0,closeOnFocusOut:m=!0,getInsideElements:R=()=>[]}=e,{open:T,onOpenChange:S,events:I,dataRef:C,elements:{domReference:_,floating:O}}=t,D=lt(()=>C.current.floatingContext?.nodeId),H=lt(R),x=typeof c=="number"&&c<0,L=up(_)&&x,w=Ni(s),G=Ni(c),B=Ni(d),z=pf(),Q=KC(),ce=b.useRef(null),ue=b.useRef(null),te=b.useRef(!1),ee=b.useRef(!1),Ee=b.useRef(-1),he=Pr(),M=Q!=null,K=iR(O),$=lt((ae=K)=>ae?_f(ae,bu()):[]),de=lt(ae=>{const P=$(ae);return w.current.map(()=>P).filter(Boolean).flat()});b.useEffect(()=>{if(o||!f)return;function ae(q){q.key==="Tab"&&mn(K,ol(Un(K)))&&$().length===0&&!L&&HH(q)}const P=Un(K);return P.addEventListener("keydown",ae),()=>{P.removeEventListener("keydown",ae)}},[o,_,K,f,w,L,$,de]),b.useEffect(()=>{if(o||!O)return;function ae(P){const q=ja(P),fe=$().indexOf(q);fe!==-1&&(Ee.current=fe)}return O.addEventListener("focusin",ae),()=>{O.removeEventListener("focusin",ae)}},[o,O,$]),b.useEffect(()=>{if(o||!m)return;function ae(){ee.current=!0}function P(fe){const Se=fe.relatedTarget,Oe=fe.currentTarget,Ue=ja(fe);queueMicrotask(()=>{const me=D(),De=!(mn(_,Se)||mn(O,Se)||mn(Se,O)||mn(Q?.portalNode,Se)||Se?.hasAttribute(Fr("focus-guard"))||z&&(as(z.nodesRef.current,me).find(_e=>mn(_e.context?.elements.floating,Se)||mn(_e.context?.elements.domReference,Se))||dp(z.nodesRef.current,me).find(_e=>[_e.context?.elements.floating,iR(_e.context?.elements.floating)].includes(Se)||_e.context?.elements.domReference===Se)));if(Oe===_&&K&&Np(K,w),h&&Oe!==_&&!Ue?.isConnected&&ol(Un(K))===Un(K).body){Pn(K)&&K.focus();const _e=Ee.current,ge=$(),ve=ge[_e]||ge[ge.length-1]||K;Pn(ve)&&ve.focus()}if(C.current.insideReactTree){C.current.insideReactTree=!1;return}if(ee.current){ee.current=!1;return}(L||!f)&&Se&&De&&Se!==pp()&&(te.current=!0,S(!1,fe,"focus-out"))})}const q=!!(!z&&Q);function se(){C.current.insideReactTree=!0,he.start(0,()=>{C.current.insideReactTree=!1})}if(O&&Pn(_))return _.addEventListener("focusout",P),_.addEventListener("pointerdown",ae),O.addEventListener("focusout",P),q&&O.addEventListener("focusout",se,!0),()=>{_.removeEventListener("focusout",P),_.removeEventListener("pointerdown",ae),O.removeEventListener("focusout",P),q&&O.removeEventListener("focusout",se,!0)}},[o,_,O,K,f,z,Q,S,m,h,$,L,D,w,C,he]);const y=b.useRef(null),Y=b.useRef(null),W=jr(y,Q?.beforeInsideRef),j=jr(Y,Q?.afterInsideRef);b.useEffect(()=>{if(o||!O)return;const ae=Array.from(Q?.portalNode?.querySelectorAll(`[${Fr("portal")}]`)||[]),q=(z?dp(z.nodesRef.current,D()):[]).find(Se=>up(Se.context?.elements.domReference||null))?.context?.elements.domReference,se=[O,q,...ae,...H(),ce.current,ue.current,y.current,Y.current,Q?.beforeOutsideRef.current,Q?.afterOutsideRef.current,L?_:null].filter(Se=>Se!=null),fe=Ck(se,f||L);return()=>{fe()}},[o,_,O,f,w,Q,L,z,D,H]),kt(()=>{if(o||!Pn(K))return;const ae=Un(K),P=ol(ae);queueMicrotask(()=>{const q=de(K),se=G.current,fe=(typeof se=="number"?q[se]:se.current)||K,Se=mn(K,P);!x&&!Se&&T&&NA(fe,{preventScroll:fe===K})})},[o,T,K,x,de,G]),kt(()=>{if(o||!K)return;const ae=Un(K),P=ol(ae);yk(P);function q({reason:Se,event:Oe,nested:Ue}){if(["hover","safe-polygon"].includes(Se)&&Oe.type==="mouseleave"&&(te.current=!0),Se==="outside-press")if(Ue)te.current=!1;else if(UH(Oe)||PH(Oe))te.current=!1;else{let me=!1;document.createElement("div").focus({get preventScroll(){return me=!0,!1}}),me?te.current=!1:te.current=!0}}I.on("openchange",q);const se=ae.createElement("span");se.setAttribute("tabindex","-1"),se.setAttribute("aria-hidden","true"),Object.assign(se.style,hT),M&&_&&_.insertAdjacentElement("afterend",se);function fe(){if(typeof B.current=="boolean"){const Se=_||pp();return Se&&Se.isConnected?Se:se}return B.current.current||se}return()=>{I.off("openchange",q);const Se=ol(ae),Oe=mn(O,Se)||z&&as(z.nodesRef.current,D(),!1).some(me=>mn(me.context?.elements.floating,Se)),Ue=fe();queueMicrotask(()=>{const me=vk(Ue);B.current&&!te.current&&Pn(me)&&(!(me!==Se&&Se!==ae.body)||Oe)&&me.focus({preventScroll:!0}),se.remove()})}},[o,O,K,B,C,I,z,M,_,D]),b.useEffect(()=>{queueMicrotask(()=>{te.current=!1})},[o]),b.useEffect(()=>{if(o||!T)return;function ae(q){ja(q)?.closest(`[${WC}]`)&&(ee.current=!0)}const P=Un(K);return P.addEventListener("pointerdown",ae,!0),()=>{P.removeEventListener("pointerdown",ae,!0)}},[o,T,K]),kt(()=>{if(!o&&Q)return Q.setFocusManagerState({modal:f,closeOnFocusOut:m,open:T,onOpenChange:S,domReference:_}),()=>{Q.setFocusManagerState(null)}},[o,Q,f,T,S,m,_]),kt(()=>{if(!(o||!K))return Np(K,w),()=>{queueMicrotask(fT)}},[o,K,w]);const Z=!o&&(f?!L:!0)&&(M||f);return l.jsxs(b.Fragment,{children:[Z&&l.jsx(jh,{"data-type":"inside",ref:W,onFocus:ae=>{if(f){const P=de();NA(P[P.length-1])}else Q?.preserveTabOrder&&Q.portalNode&&(te.current=!1,uu(ae,Q.portalNode)?GC(_)?.focus():Q.beforeOutsideRef.current?.focus())}}),a,Z&&l.jsx(jh,{"data-type":"inside",ref:j,onFocus:ae=>{f?NA(de()[0]):Q?.preserveTabOrder&&Q.portalNode&&(m&&(te.current=!0),uu(ae,Q.portalNode)?BC(_)?.focus():Q.afterOutsideRef.current?.focus())}})]})}const th=null;class Lk{callbacks=[];callbacksCount=0;nextId=1;startId=1;isScheduled=!1;tick=t=>{this.isScheduled=!1;const a=this.callbacks,o=this.callbacksCount;if(this.callbacks=[],this.callbacksCount=0,this.startId=this.nextId,o>0)for(let s=0;s<a.length;s+=1)a[s]?.(t)};request(t){const a=this.nextId;return this.nextId+=1,this.callbacks.push(t),this.callbacksCount+=1,(!this.isScheduled||!1)&&(requestAnimationFrame(this.tick),this.isScheduled=!0),a}cancel(t){const a=t-this.startId;a<0||a>=this.callbacks.length||(this.callbacks[a]=null,this.callbacksCount-=1)}}const nh=new Lk;class ji{static create(){return new ji}static request(t){return nh.request(t)}static cancel(t){return nh.cancel(t)}currentId=th;request(t){this.cancel(),this.currentId=nh.request(()=>{this.currentId=th,t()})}cancel=()=>{this.currentId!==th&&(nh.cancel(this.currentId),this.currentId=th)};disposeEffect=()=>this.cancel}function XC(){const e=Xr(ji.create).current;return IC(e.disposeEffect),e}function xk(e,t={}){const{open:a,onOpenChange:o,dataRef:s}=e,{enabled:c=!0,event:d="click",toggle:h=!0,ignoreMouse:f=!1,stickIfOpen:m=!0}=t,R=b.useRef(void 0),T=XC(),S=b.useMemo(()=>({onPointerDown(I){R.current=I.pointerType},onMouseDown(I){const C=R.current,_=I.nativeEvent;if(I.button!==0||d==="click"||wr(C,!0)&&f)return;const O=s.current.openEvent,D=O?.type,H=!(a&&h&&(!(O&&m)||D==="click"||D==="mousedown"));T.request(()=>{o(H,_,"click")})},onClick(I){const C=R.current;if(d==="mousedown"&&C){R.current=void 0;return}if(wr(C,!0)&&f)return;const _=s.current.openEvent,O=_?.type;o(!(a&&h&&(!(_&&m)||O==="click"||O==="mousedown"||O==="keydown"||O==="keyup")),I.nativeEvent,"click")},onKeyDown(){R.current=void 0}}),[s,d,f,o,a,m,h,T]);return b.useMemo(()=>c?{reference:S}:ll,[c,S])}function Hk(e,t){let a=null,o=null,s=!1;return{contextElement:e||void 0,getBoundingClientRect(){const c=e?.getBoundingClientRect()||{width:0,height:0,x:0,y:0},d=t.axis==="x"||t.axis==="both",h=t.axis==="y"||t.axis==="both",f=["mouseenter","mousemove"].includes(t.dataRef.current.openEvent?.type||"")&&t.pointerType!=="touch";let m=c.width,R=c.height,T=c.x,S=c.y;return a==null&&t.x&&d&&(a=c.x-t.x),o==null&&t.y&&h&&(o=c.y-t.y),T-=a||0,S-=o||0,m=0,R=0,!s||f?(m=t.axis==="y"?c.width:0,R=t.axis==="x"?c.height:0,T=d&&t.x!=null?t.x:T,S=h&&t.y!=null?t.y:S):s&&!f&&(R=t.axis==="x"?c.height:R,m=t.axis==="y"?c.width:m),s=!0,{width:m,height:R,x:T,y:S,top:S,right:T+m,bottom:S+R,left:T}}}}function Cp(e){return e!=null&&e.clientX!=null}function kk(e,t={}){const{open:a,dataRef:o,elements:{floating:s,domReference:c},refs:d}=e,{enabled:h=!0,axis:f="both",x:m=null,y:R=null}=t,T=b.useRef(!1),S=b.useRef(null),[I,C]=b.useState(),[_,O]=b.useState([]),D=lt((G,B)=>{T.current||o.current.openEvent&&!Cp(o.current.openEvent)||d.setPositionReference(Hk(c,{x:G,y:B,axis:f,dataRef:o,pointerType:I}))}),H=lt(G=>{m!=null||R!=null||(a?S.current||O([]):D(G.clientX,G.clientY))}),x=wr(I)?s:a,L=b.useCallback(()=>{if(!x||!h||m!=null||R!=null)return;const G=wn(s);function B(z){const Q=ja(z);mn(s,Q)?(G.removeEventListener("mousemove",B),S.current=null):D(z.clientX,z.clientY)}if(!o.current.openEvent||Cp(o.current.openEvent)){G.addEventListener("mousemove",B);const z=()=>{G.removeEventListener("mousemove",B),S.current=null};return S.current=z,z}d.setPositionReference(c)},[x,h,m,R,s,o,d,c,D]);b.useEffect(()=>L(),[L,_]),b.useEffect(()=>{h&&!s&&(T.current=!1)},[h,s]),b.useEffect(()=>{!h&&a&&(T.current=!0)},[h,a]),kt(()=>{h&&(m!=null||R!=null)&&(T.current=!1,D(m,R))},[h,m,R,D]);const w=b.useMemo(()=>{function G(B){C(B.pointerType)}return{onPointerDown:G,onPointerEnter:G,onMouseMove:H,onMouseEnter:H}},[H]);return b.useMemo(()=>h?{reference:w}:{},[h,w])}function bp(e,t,a){let{reference:o,floating:s}=e;const c=Ci(t),d=uT(t),h=cT(d),f=di(t),m=c==="y",R=o.x+o.width/2-s.width/2,T=o.y+o.height/2-s.height/2,S=o[h]/2-s[h]/2;let I;switch(f){case"top":I={x:R,y:o.y-s.height};break;case"bottom":I={x:R,y:o.y+o.height};break;case"right":I={x:o.x+o.width,y:T};break;case"left":I={x:o.x-s.width,y:T};break;default:I={x:o.x,y:o.y}}switch(pl(t)){case"start":I[d]-=S*(a&&m?-1:1);break;case"end":I[d]+=S*(a&&m?-1:1);break}return I}const Uk=async(e,t,a)=>{const{placement:o="bottom",strategy:s="absolute",middleware:c=[],platform:d}=a,h=c.filter(Boolean),f=await(d.isRTL==null?void 0:d.isRTL(t));let m=await d.getElementRects({reference:e,floating:t,strategy:s}),{x:R,y:T}=bp(m,o,f),S=o,I={},C=0;for(let _=0;_<h.length;_++){const{name:O,fn:D}=h[_],{x:H,y:x,data:L,reset:w}=await D({x:R,y:T,initialPlacement:o,placement:S,strategy:s,middlewareData:I,rects:m,platform:d,elements:{reference:e,floating:t}});R=H??R,T=x??T,I={...I,[O]:{...I[O],...L}},w&&C<=50&&(C++,typeof w=="object"&&(w.placement&&(S=w.placement),w.rects&&(m=w.rects===!0?await d.getElementRects({reference:e,floating:t,strategy:s}):w.rects),{x:R,y:T}=bp(m,S,f)),_=-1)}return{x:R,y:T,placement:S,strategy:s,middlewareData:I}};async function Eu(e,t){var a;t===void 0&&(t={});const{x:o,y:s,platform:c,rects:d,elements:h,strategy:f}=e,{boundary:m="clippingAncestors",rootBoundary:R="viewport",elementContext:T="floating",altBoundary:S=!1,padding:I=0}=yo(t,e),C=vC(I),O=h[S?T==="floating"?"reference":"floating":T],D=wh(await c.getClippingRect({element:(a=await(c.isElement==null?void 0:c.isElement(O)))==null||a?O:O.contextElement||await(c.getDocumentElement==null?void 0:c.getDocumentElement(h.floating)),boundary:m,rootBoundary:R,strategy:f})),H=T==="floating"?{x:o,y:s,width:d.floating.width,height:d.floating.height}:d.reference,x=await(c.getOffsetParent==null?void 0:c.getOffsetParent(h.floating)),L=await(c.isElement==null?void 0:c.isElement(x))?await(c.getScale==null?void 0:c.getScale(x))||{x:1,y:1}:{x:1,y:1},w=wh(c.convertOffsetParentRelativeRectToViewportRelativeRect?await c.convertOffsetParentRelativeRectToViewportRelativeRect({elements:h,rect:H,offsetParent:x,strategy:f}):H);return{top:(D.top-w.top+C.top)/L.y,bottom:(w.bottom-D.bottom+C.bottom)/L.y,left:(D.left-w.left+C.left)/L.x,right:(w.right-D.right+C.right)/L.x}}const Pk=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var a,o;const{placement:s,middlewareData:c,rects:d,initialPlacement:h,platform:f,elements:m}=t,{mainAxis:R=!0,crossAxis:T=!0,fallbackPlacements:S,fallbackStrategy:I="bestFit",fallbackAxisSideDirection:C="none",flipAlignment:_=!0,...O}=yo(e,t);if((a=c.arrow)!=null&&a.alignmentOffset)return{};const D=di(s),H=Ci(h),x=di(h)===h,L=await(f.isRTL==null?void 0:f.isRTL(m.floating)),w=S||(x||!_?[Ph(h)]:zH(h)),G=C!=="none";!S&&G&&w.push(...WH(h,_,C,L));const B=[h,...w],z=await Eu(t,O),Q=[];let ce=((o=c.flip)==null?void 0:o.overflows)||[];if(R&&Q.push(z[D]),T){const Ee=jH(s,d,L);Q.push(z[Ee[0]],z[Ee[1]])}if(ce=[...ce,{placement:s,overflows:Q}],!Q.every(Ee=>Ee<=0)){var ue,te;const Ee=(((ue=c.flip)==null?void 0:ue.index)||0)+1,he=B[Ee];if(he&&(!(T==="alignment"?H!==Ci(he):!1)||ce.every($=>Ci($.placement)===H?$.overflows[0]>0:!0)))return{data:{index:Ee,overflows:ce},reset:{placement:he}};let M=(te=ce.filter(K=>K.overflows[0]<=0).sort((K,$)=>K.overflows[1]-$.overflows[1])[0])==null?void 0:te.placement;if(!M)switch(I){case"bestFit":{var ee;const K=(ee=ce.filter($=>{if(G){const de=Ci($.placement);return de===H||de==="y"}return!0}).map($=>[$.placement,$.overflows.filter(de=>de>0).reduce((de,y)=>de+y,0)]).sort(($,de)=>$[1]-de[1])[0])==null?void 0:ee[0];K&&(M=K);break}case"initialPlacement":M=h;break}if(s!==M)return{reset:{placement:M}}}return{}}}};function Op(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Dp(e){return wH.some(t=>e[t]>=0)}const wk=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:a}=t,{strategy:o="referenceHidden",...s}=yo(e,t);switch(o){case"referenceHidden":{const c=await Eu(t,{...s,elementContext:"reference"}),d=Op(c,a.reference);return{data:{referenceHiddenOffsets:d,referenceHidden:Dp(d)}}}case"escaped":{const c=await Eu(t,{...s,altBoundary:!0}),d=Op(c,a.floating);return{data:{escapedOffsets:d,escaped:Dp(d)}}}default:return{}}}}},qC=new Set(["left","top"]);async function Gk(e,t){const{placement:a,platform:o,elements:s}=e,c=await(o.isRTL==null?void 0:o.isRTL(s.floating)),d=di(a),h=pl(a),f=Ci(a)==="y",m=qC.has(d)?-1:1,R=c&&f?-1:1,T=yo(t,e);let{mainAxis:S,crossAxis:I,alignmentAxis:C}=typeof T=="number"?{mainAxis:T,crossAxis:0,alignmentAxis:null}:{mainAxis:T.mainAxis||0,crossAxis:T.crossAxis||0,alignmentAxis:T.alignmentAxis};return h&&typeof C=="number"&&(I=h==="end"?C*-1:C),f?{x:I*R,y:S*m}:{x:S*m,y:I*R}}const Bk=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var a,o;const{x:s,y:c,placement:d,middlewareData:h}=t,f=await Gk(t,e);return d===((a=h.offset)==null?void 0:a.placement)&&(o=h.arrow)!=null&&o.alignmentOffset?{}:{x:s+f.x,y:c+f.y,data:{...f,placement:d}}}}},Fk=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:a,y:o,placement:s}=t,{mainAxis:c=!0,crossAxis:d=!1,limiter:h={fn:O=>{let{x:D,y:H}=O;return{x:D,y:H}}},...f}=yo(e,t),m={x:a,y:o},R=await Eu(t,f),T=Ci(di(s)),S=rT(T);let I=m[S],C=m[T];if(c){const O=S==="y"?"top":"left",D=S==="y"?"bottom":"right",H=I+R[O],x=I-R[D];I=oR(H,I,x)}if(d){const O=T==="y"?"top":"left",D=T==="y"?"bottom":"right",H=C+R[O],x=C-R[D];C=oR(H,C,x)}const _=h.fn({...t,[S]:I,[T]:C});return{..._,data:{x:_.x-a,y:_.y-o,enabled:{[S]:c,[T]:d}}}}}},jk=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:a,y:o,placement:s,rects:c,middlewareData:d}=t,{offset:h=0,mainAxis:f=!0,crossAxis:m=!0}=yo(e,t),R={x:a,y:o},T=Ci(s),S=rT(T);let I=R[S],C=R[T];const _=yo(h,t),O=typeof _=="number"?{mainAxis:_,crossAxis:0}:{mainAxis:0,crossAxis:0,..._};if(f){const x=S==="y"?"height":"width",L=c.reference[S]-c.floating[x]+O.mainAxis,w=c.reference[S]+c.reference[x]-O.mainAxis;I<L?I=L:I>w&&(I=w)}if(m){var D,H;const x=S==="y"?"width":"height",L=qC.has(di(s)),w=c.reference[T]-c.floating[x]+(L&&((D=d.offset)==null?void 0:D[T])||0)+(L?0:O.crossAxis),G=c.reference[T]+c.reference[x]+(L?0:((H=d.offset)==null?void 0:H[T])||0)-(L?O.crossAxis:0);C<w?C=w:C>G&&(C=G)}return{[S]:I,[T]:C}}}},zk=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var a,o;const{placement:s,rects:c,platform:d,elements:h}=t,{apply:f=()=>{},...m}=yo(e,t),R=await Eu(t,m),T=di(s),S=pl(s),I=Ci(s)==="y",{width:C,height:_}=c.floating;let O,D;T==="top"||T==="bottom"?(O=T,D=S===(await(d.isRTL==null?void 0:d.isRTL(h.floating))?"start":"end")?"left":"right"):(D=T,O=S==="end"?"top":"bottom");const H=_-R.top-R.bottom,x=C-R.left-R.right,L=Gr(_-R[O],H),w=Gr(C-R[D],x),G=!t.middlewareData.shift;let B=L,z=w;if((a=t.middlewareData.shift)!=null&&a.enabled.x&&(z=x),(o=t.middlewareData.shift)!=null&&o.enabled.y&&(B=H),G&&!S){const ce=za(R.left,0),ue=za(R.right,0),te=za(R.top,0),ee=za(R.bottom,0);I?z=C-2*(ce!==0||ue!==0?ce+ue:za(R.left,R.right)):B=_-2*(te!==0||ee!==0?te+ee:za(R.top,R.bottom))}await f({...t,availableWidth:z,availableHeight:B});const Q=await d.getDimensions(h.floating);return C!==Q.width||_!==Q.height?{reset:{rects:!0}}:{}}}};function ZC(e){const t=ui(e);let a=parseFloat(t.width)||0,o=parseFloat(t.height)||0;const s=Pn(e),c=s?e.offsetWidth:a,d=s?e.offsetHeight:o,h=Uh(a)!==c||Uh(o)!==d;return h&&(a=c,o=d),{width:a,height:o,$:h}}function ET(e){return Ht(e)?e:e.contextElement}function yr(e){const t=ET(e);if(!Pn(t))return Yi(1);const a=t.getBoundingClientRect(),{width:o,height:s,$:c}=ZC(t);let d=(c?Uh(a.width):a.width)/o,h=(c?Uh(a.height):a.height)/s;return(!d||!Number.isFinite(d))&&(d=1),(!h||!Number.isFinite(h))&&(h=1),{x:d,y:h}}const Yk=Yi(0);function QC(e){const t=wn(e);return!Sf()||!t.visualViewport?Yk:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Kk(e,t,a){return t===void 0&&(t=!1),!a||t&&a!==wn(e)?!1:t}function ds(e,t,a,o){t===void 0&&(t=!1),a===void 0&&(a=!1);const s=e.getBoundingClientRect(),c=ET(e);let d=Yi(1);t&&(o?Ht(o)&&(d=yr(o)):d=yr(e));const h=Kk(c,a,o)?QC(c):Yi(0);let f=(s.left+h.x)/d.x,m=(s.top+h.y)/d.y,R=s.width/d.x,T=s.height/d.y;if(c){const S=wn(c),I=o&&Ht(o)?wn(o):o;let C=S,_=tR(C);for(;_&&o&&I!==C;){const O=yr(_),D=_.getBoundingClientRect(),H=ui(_),x=D.left+(_.clientLeft+parseFloat(H.paddingLeft))*O.x,L=D.top+(_.clientTop+parseFloat(H.paddingTop))*O.y;f*=O.x,m*=O.y,R*=O.x,T*=O.y,f+=x,m+=L,C=wn(_),_=tR(C)}}return wh({width:R,height:T,x:f,y:m})}function Nf(e,t){const a=If(e).scrollLeft;return t?t.left+a:ds(Qi(e)).left+a}function JC(e,t){const a=e.getBoundingClientRect(),o=a.left+t.scrollLeft-Nf(e,a),s=a.top+t.scrollTop;return{x:o,y:s}}function Vk(e){let{elements:t,rect:a,offsetParent:o,strategy:s}=e;const c=s==="fixed",d=Qi(o),h=t?Tf(t.floating):!1;if(o===d||h&&c)return a;let f={scrollLeft:0,scrollTop:0},m=Yi(1);const R=Yi(0),T=Pn(o);if((T||!T&&!c)&&((gl(o)!=="body"||Cu(d))&&(f=If(o)),Pn(o))){const I=ds(o);m=yr(o),R.x=I.x+o.clientLeft,R.y=I.y+o.clientTop}const S=d&&!T&&!c?JC(d,f):Yi(0);return{width:a.width*m.x,height:a.height*m.y,x:a.x*m.x-f.scrollLeft*m.x+R.x+S.x,y:a.y*m.y-f.scrollTop*m.y+R.y+S.y}}function Wk(e){return Array.from(e.getClientRects())}function Xk(e){const t=Qi(e),a=If(e),o=e.ownerDocument.body,s=za(t.scrollWidth,t.clientWidth,o.scrollWidth,o.clientWidth),c=za(t.scrollHeight,t.clientHeight,o.scrollHeight,o.clientHeight);let d=-a.scrollLeft+Nf(e);const h=-a.scrollTop;return ui(o).direction==="rtl"&&(d+=za(t.clientWidth,o.clientWidth)-s),{width:s,height:c,x:d,y:h}}const yp=25;function qk(e,t){const a=wn(e),o=Qi(e),s=a.visualViewport;let c=o.clientWidth,d=o.clientHeight,h=0,f=0;if(s){c=s.width,d=s.height;const R=Sf();(!R||R&&t==="fixed")&&(h=s.offsetLeft,f=s.offsetTop)}const m=Nf(o);if(m<=0){const R=o.ownerDocument,T=R.body,S=getComputedStyle(T),I=R.compatMode==="CSS1Compat"&&parseFloat(S.marginLeft)+parseFloat(S.marginRight)||0,C=Math.abs(o.clientWidth-T.clientWidth-I);C<=yp&&(c-=C)}else m<=yp&&(c+=m);return{width:c,height:d,x:h,y:f}}const Zk=new Set(["absolute","fixed"]);function Qk(e,t){const a=ds(e,!0,t==="fixed"),o=a.top+e.clientTop,s=a.left+e.clientLeft,c=Pn(e)?yr(e):Yi(1),d=e.clientWidth*c.x,h=e.clientHeight*c.y,f=s*c.x,m=o*c.y;return{width:d,height:h,x:f,y:m}}function vp(e,t,a){let o;if(t==="viewport")o=qk(e,a);else if(t==="document")o=Xk(Qi(e));else if(Ht(t))o=Qk(t,a);else{const s=QC(e);o={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return wh(o)}function $C(e,t){const a=Do(e);return a===t||!Ht(a)||bo(a)?!1:ui(a).position==="fixed"||$C(a,t)}function Jk(e,t){const a=t.get(e);if(a)return a;let o=hl(e,[],!1).filter(h=>Ht(h)&&gl(h)!=="body"),s=null;const c=ui(e).position==="fixed";let d=c?Do(e):e;for(;Ht(d)&&!bo(d);){const h=ui(d),f=sT(d);!f&&h.position==="fixed"&&(s=null),(c?!f&&!s:!f&&h.position==="static"&&!!s&&Zk.has(s.position)||Cu(d)&&!f&&$C(e,d))?o=o.filter(R=>R!==d):s=h,d=Do(d)}return t.set(e,o),o}function $k(e){let{element:t,boundary:a,rootBoundary:o,strategy:s}=e;const d=[...a==="clippingAncestors"?Tf(t)?[]:Jk(t,this._c):[].concat(a),o],h=d[0],f=d.reduce((m,R)=>{const T=vp(t,R,s);return m.top=za(T.top,m.top),m.right=Gr(T.right,m.right),m.bottom=Gr(T.bottom,m.bottom),m.left=za(T.left,m.left),m},vp(t,h,s));return{width:f.right-f.left,height:f.bottom-f.top,x:f.left,y:f.top}}function eU(e){const{width:t,height:a}=ZC(e);return{width:t,height:a}}function tU(e,t,a){const o=Pn(t),s=Qi(t),c=a==="fixed",d=ds(e,!0,c,t);let h={scrollLeft:0,scrollTop:0};const f=Yi(0);function m(){f.x=Nf(s)}if(o||!o&&!c)if((gl(t)!=="body"||Cu(s))&&(h=If(t)),o){const I=ds(t,!0,c,t);f.x=I.x+t.clientLeft,f.y=I.y+t.clientTop}else s&&m();c&&!o&&s&&m();const R=s&&!o&&!c?JC(s,h):Yi(0),T=d.left+h.scrollLeft-f.x-R.x,S=d.top+h.scrollTop-f.y-R.y;return{x:T,y:S,width:d.width,height:d.height}}function bA(e){return ui(e).position==="static"}function Mp(e,t){if(!Pn(e)||ui(e).position==="fixed")return null;if(t)return t(e);let a=e.offsetParent;return Qi(e)===a&&(a=a.ownerDocument.body),a}function eb(e,t){const a=wn(e);if(Tf(e))return a;if(!Pn(e)){let s=Do(e);for(;s&&!bo(s);){if(Ht(s)&&!bA(s))return s;s=Do(s)}return a}let o=Mp(e,t);for(;o&&TH(o)&&bA(o);)o=Mp(o,t);return o&&bo(o)&&bA(o)&&!sT(o)?a:o||pH(e)||a}const nU=async function(e){const t=this.getOffsetParent||eb,a=this.getDimensions,o=await a(e.floating);return{reference:tU(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:o.width,height:o.height}}};function aU(e){return ui(e).direction==="rtl"}const iU={convertOffsetParentRelativeRectToViewportRelativeRect:Vk,getDocumentElement:Qi,getClippingRect:$k,getOffsetParent:eb,getElementRects:nU,getClientRects:Wk,getDimensions:eU,getScale:yr,isElement:Ht,isRTL:aU};function tb(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function oU(e,t){let a=null,o;const s=Qi(e);function c(){var h;clearTimeout(o),(h=a)==null||h.disconnect(),a=null}function d(h,f){h===void 0&&(h=!1),f===void 0&&(f=1),c();const m=e.getBoundingClientRect(),{left:R,top:T,width:S,height:I}=m;if(h||t(),!S||!I)return;const C=Jd(T),_=Jd(s.clientWidth-(R+S)),O=Jd(s.clientHeight-(T+I)),D=Jd(R),x={rootMargin:-C+"px "+-_+"px "+-O+"px "+-D+"px",threshold:za(0,Gr(1,f))||1};let L=!0;function w(G){const B=G[0].intersectionRatio;if(B!==f){if(!L)return d();B?d(!1,B):o=setTimeout(()=>{d(!1,1e-7)},1e3)}B===1&&!tb(m,e.getBoundingClientRect())&&d(),L=!1}try{a=new IntersectionObserver(w,{...x,root:s.ownerDocument})}catch{a=new IntersectionObserver(w,x)}a.observe(e)}return d(!0),c}function Lp(e,t,a,o){o===void 0&&(o={});const{ancestorScroll:s=!0,ancestorResize:c=!0,elementResize:d=typeof ResizeObserver=="function",layoutShift:h=typeof IntersectionObserver=="function",animationFrame:f=!1}=o,m=ET(e),R=s||c?[...m?hl(m):[],...hl(t)]:[];R.forEach(D=>{s&&D.addEventListener("scroll",a,{passive:!0}),c&&D.addEventListener("resize",a)});const T=m&&h?oU(m,a):null;let S=-1,I=null;d&&(I=new ResizeObserver(D=>{let[H]=D;H&&H.target===m&&I&&(I.unobserve(t),cancelAnimationFrame(S),S=requestAnimationFrame(()=>{var x;(x=I)==null||x.observe(t)})),a()}),m&&!f&&I.observe(m),I.observe(t));let C,_=f?ds(e):null;f&&O();function O(){const D=ds(e);_&&!tb(_,D)&&a(),_=D,C=requestAnimationFrame(O)}return a(),()=>{var D;R.forEach(H=>{s&&H.removeEventListener("scroll",a),c&&H.removeEventListener("resize",a)}),T?.(),(D=I)==null||D.disconnect(),I=null,f&&cancelAnimationFrame(C)}}const lU=Bk,sU=Fk,rU=Pk,cU=zk,uU=wk,dU=jk,hU=(e,t,a)=>{const o=new Map,s={platform:iU,...a},c={...s.platform,_c:o};return Uk(e,t,{...s,platform:c})};var fU=typeof document<"u",EU=function(){},dh=fU?b.useLayoutEffect:EU;function zh(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let a,o,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(a=e.length,a!==t.length)return!1;for(o=a;o--!==0;)if(!zh(e[o],t[o]))return!1;return!0}if(s=Object.keys(e),a=s.length,a!==Object.keys(t).length)return!1;for(o=a;o--!==0;)if(!{}.hasOwnProperty.call(t,s[o]))return!1;for(o=a;o--!==0;){const c=s[o];if(!(c==="_owner"&&e.$$typeof)&&!zh(e[c],t[c]))return!1}return!0}return e!==e&&t!==t}function nb(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function xp(e,t){const a=nb(e);return Math.round(t*a)/a}function OA(e){const t=b.useRef(e);return dh(()=>{t.current=e}),t}function mU(e){e===void 0&&(e={});const{placement:t="bottom",strategy:a="absolute",middleware:o=[],platform:s,elements:{reference:c,floating:d}={},transform:h=!0,whileElementsMounted:f,open:m}=e,[R,T]=b.useState({x:0,y:0,strategy:a,placement:t,middlewareData:{},isPositioned:!1}),[S,I]=b.useState(o);zh(S,o)||I(o);const[C,_]=b.useState(null),[O,D]=b.useState(null),H=b.useCallback($=>{$!==G.current&&(G.current=$,_($))},[]),x=b.useCallback($=>{$!==B.current&&(B.current=$,D($))},[]),L=c||C,w=d||O,G=b.useRef(null),B=b.useRef(null),z=b.useRef(R),Q=f!=null,ce=OA(f),ue=OA(s),te=OA(m),ee=b.useCallback(()=>{if(!G.current||!B.current)return;const $={placement:t,strategy:a,middleware:S};ue.current&&($.platform=ue.current),hU(G.current,B.current,$).then(de=>{const y={...de,isPositioned:te.current!==!1};Ee.current&&!zh(z.current,y)&&(z.current=y,Wr.flushSync(()=>{T(y)}))})},[S,t,a,ue,te]);dh(()=>{m===!1&&z.current.isPositioned&&(z.current.isPositioned=!1,T($=>({...$,isPositioned:!1})))},[m]);const Ee=b.useRef(!1);dh(()=>(Ee.current=!0,()=>{Ee.current=!1}),[]),dh(()=>{if(L&&(G.current=L),w&&(B.current=w),L&&w){if(ce.current)return ce.current(L,w,ee);ee()}},[L,w,ee,ce,Q]);const he=b.useMemo(()=>({reference:G,floating:B,setReference:H,setFloating:x}),[H,x]),M=b.useMemo(()=>({reference:L,floating:w}),[L,w]),K=b.useMemo(()=>{const $={position:a,left:0,top:0};if(!M.floating)return $;const de=xp(M.floating,R.x),y=xp(M.floating,R.y);return h?{...$,transform:"translate("+de+"px, "+y+"px)",...nb(M.floating)>=1.5&&{willChange:"transform"}}:{position:a,left:de,top:y}},[a,h,M.floating,R.x,R.y]);return b.useMemo(()=>({...R,update:ee,refs:he,elements:M,floatingStyles:K}),[R,ee,he,M,K])}const AU=(e,t)=>({...lU(e),options:[e,t]}),RU=(e,t)=>({...sU(e),options:[e,t]}),TU=(e,t)=>({...dU(e),options:[e,t]}),SU=(e,t)=>({...rU(e),options:[e,t]}),IU=(e,t)=>({...cU(e),options:[e,t]}),_U=(e,t)=>({...uU(e),options:[e,t]}),gU={intentional:"onClick",sloppy:"onPointerDown"};function Hp(e){return{escapeKey:typeof e=="boolean"?e:e?.escapeKey??!1,outsidePress:typeof e=="boolean"?e:e?.outsidePress??!0}}function ab(e,t={}){const{open:a,onOpenChange:o,elements:s,dataRef:c}=e,{enabled:d=!0,escapeKey:h=!0,outsidePress:f=!0,outsidePressEvent:m="sloppy",referencePress:R=!1,referencePressEvent:T="sloppy",ancestorScroll:S=!1,bubbles:I,capture:C}=t,_=pf(),O=lt(typeof f=="function"?f:()=>!1),D=typeof f=="function"?O:f,H=b.useRef(!1),{escapeKey:x,outsidePress:L}=Hp(I),{escapeKey:w,outsidePress:G}=Hp(C),B=b.useRef(null),z=Pr(),Q=Pr(),ce=b.useRef(!1),ue=b.useRef(""),te=lt(P=>{ue.current=P.pointerType}),ee=lt(()=>{const P=ue.current,q=P==="pen"||!P?"mouse":P;return typeof m=="string"?m:m[q]}),Ee=lt(P=>{if(!a||!d||!h||P.key!=="Escape"||ce.current)return;const q=c.current.floatingContext?.nodeId,se=_?as(_.nodesRef.current,q):[];if(!x&&(P.stopPropagation(),se.length>0)){let fe=!0;if(se.forEach(Se=>{Se.context?.open&&!Se.context.dataRef.current.__escapeKeyBubbles&&(fe=!1)}),!fe)return}o(!1,kH(P)?P.nativeEvent:P,"escape-key")}),he=lt(P=>{const q=ee();return q==="intentional"&&P.type!=="click"||q==="sloppy"&&P.type==="click"}),M=lt(P=>{const q=()=>{Ee(P),ja(P)?.removeEventListener("keydown",q)};ja(P)?.addEventListener("keydown",q)}),K=lt(P=>{if(he(P))return;const q=c.current.insideReactTree;c.current.insideReactTree=!1;const se=H.current;if(H.current=!1,ee()==="intentional"&&se||q||typeof D=="function"&&!D(P))return;const fe=ja(P),Se=`[${Fr("inert")}]`,Oe=Un(s.floating).querySelectorAll(Se);let Ue=Ht(fe)?fe:null;for(;Ue&&!bo(Ue);){const ge=Do(Ue);if(bo(ge)||!Ht(ge))break;Ue=ge}if(Oe.length&&Ht(fe)&&!LH(fe)&&!mn(fe,s.floating)&&Array.from(Oe).every(ge=>!mn(Ue,ge)))return;if(Pn(fe)){const ge=bo(fe),ve=ui(fe),Ye=/auto|scroll/,Sn=ge||Ye.test(ve.overflowX),Si=ge||Ye.test(ve.overflowY),pa=Sn&&fe.clientWidth>0&&fe.scrollWidth>fe.clientWidth,ao=Si&&fe.clientHeight>0&&fe.scrollHeight>fe.clientHeight,io=ve.direction==="rtl",bs=ao&&(io?P.offsetX<=fe.offsetWidth-fe.clientWidth:P.offsetX>fe.clientWidth),Os=pa&&P.offsetY>fe.clientHeight;if(bs||Os)return}const me=c.current.floatingContext?.nodeId,De=_&&as(_.nodesRef.current,me).some(ge=>_o(P,ge.context?.elements.floating));if(_o(P,s.floating)||_o(P,s.domReference)||De)return;const _e=_?as(_.nodesRef.current,me):[];if(_e.length>0){let ge=!0;if(_e.forEach(ve=>{ve.context?.open&&!ve.context.dataRef.current.__outsidePressBubbles&&(ge=!1)}),!ge)return}o(!1,P,"outside-press")}),$=lt(P=>{if(!(ee()!=="sloppy"||!a||!d||_o(P,s.floating)||_o(P,s.domReference))){if(P.pointerType==="touch"){B.current={startTime:Date.now(),startX:P.clientX,startY:P.clientY,dismissOnPointerUp:!1,dismissOnMouseDown:!0},z.start(1e3,()=>{B.current&&(B.current.dismissOnPointerUp=!1,B.current.dismissOnMouseDown=!1)});return}K(P)}}),de=lt(P=>{if(he(P)||(z.clear(),P.type==="mousedown"&&B.current&&!B.current.dismissOnMouseDown))return;const q=()=>{P.type==="pointerdown"?$(P):K(P),ja(P)?.removeEventListener(P.type,q)};ja(P)?.addEventListener(P.type,q)}),y=lt(P=>{if(ee()!=="sloppy"||P.pointerType!=="touch"||!B.current||_o(P,s.floating)||_o(P,s.domReference))return;const q=Math.abs(P.clientX-B.current.startX),se=Math.abs(P.clientY-B.current.startY),fe=Math.sqrt(q*q+se*se);fe>5&&(B.current.dismissOnPointerUp=!0),fe>10&&(K(P),z.clear(),B.current=null)}),Y=lt(P=>{ee()!=="sloppy"||P.pointerType!=="touch"||!B.current||_o(P,s.floating)||_o(P,s.domReference)||(B.current.dismissOnPointerUp&&K(P),z.clear(),B.current=null)});b.useEffect(()=>{if(!a||!d)return;c.current.__escapeKeyBubbles=x,c.current.__outsidePressBubbles=L;const P=new Rl;function q(Ue){o(!1,Ue,"ancestor-scroll")}function se(){P.clear(),ce.current=!0}function fe(){P.start(Sf()?5:0,()=>{ce.current=!1})}const Se=Un(s.floating);Se.addEventListener("pointerdown",te,!0),h&&(Se.addEventListener("keydown",w?M:Ee,w),Se.addEventListener("compositionstart",se),Se.addEventListener("compositionend",fe)),D&&(Se.addEventListener("click",G?de:K,G),Se.addEventListener("pointerdown",G?de:K,G),Se.addEventListener("pointermove",y,G),Se.addEventListener("pointerup",Y,G),Se.addEventListener("mousedown",de,G));let Oe=[];return S&&(Ht(s.domReference)&&(Oe=hl(s.domReference)),Ht(s.floating)&&(Oe=Oe.concat(hl(s.floating))),!Ht(s.reference)&&s.reference&&s.reference.contextElement&&(Oe=Oe.concat(hl(s.reference.contextElement)))),Oe=Oe.filter(Ue=>Ue!==Se.defaultView?.visualViewport),Oe.forEach(Ue=>{Ue.addEventListener("scroll",q,{passive:!0})}),()=>{Se.removeEventListener("pointerdown",te,!0),h&&(Se.removeEventListener("keydown",w?M:Ee,w),Se.removeEventListener("compositionstart",se),Se.removeEventListener("compositionend",fe)),D&&(Se.removeEventListener("click",G?de:K,G),Se.removeEventListener("pointerdown",G?de:K,G),Se.removeEventListener("pointermove",y,G),Se.removeEventListener("pointerup",Y,G),Se.removeEventListener("mousedown",de,G)),Oe.forEach(Ue=>{Ue.removeEventListener("scroll",q)}),P.clear()}},[c,s,h,D,m,a,o,S,d,x,L,Ee,w,M,K,G,de,$,y,Y,te]),b.useEffect(()=>{c.current.insideReactTree=!1},[c,D]);const W=b.useMemo(()=>({onKeyDown:Ee,...R&&{[gU[T]]:P=>{o(!1,P.nativeEvent,"reference-press")},...T!=="intentional"&&{onClick(P){o(!1,P.nativeEvent,"reference-press")}}}}),[Ee,o,R,T]),j=lt(P=>{const q=ja(P.nativeEvent);mn(s.floating,q)&&(H.current=!0)}),Z=lt(()=>{c.current.insideReactTree=!0,Q.start(0,()=>{c.current.insideReactTree=!1})}),ae=b.useMemo(()=>({onKeyDown:Ee,onMouseDown:j,onMouseUp:j,onPointerDownCapture:Z,onMouseDownCapture:Z,onClickCapture:Z}),[Ee,j,Z]);return b.useMemo(()=>d?{reference:W,floating:ae}:{},[d,W,ae])}function mT(e){const{open:t=!1,onOpenChange:a,elements:o}=e,s=gf(),c=b.useRef({}),[d]=b.useState(()=>Ek()),h=dT()!=null,[f,m]=b.useState(o.reference),R=lt((I,C,_)=>{c.current.openEvent=I?C:void 0,d.emit("openchange",{open:I,event:C,reason:_,nested:h}),a?.(I,C,_)}),T=b.useMemo(()=>({setPositionReference:m}),[]),S=b.useMemo(()=>({reference:f||o.reference||null,floating:o.floating||null,domReference:o.reference}),[f,o.reference,o.floating]);return b.useMemo(()=>({dataRef:c,open:t,onOpenChange:R,elements:S,events:d,floatingId:s,refs:T}),[t,R,S,d,s,T])}function pU(e={}){const{nodeId:t}=e,a=mT({...e,elements:{reference:null,floating:null,...e.elements}}),o=e.rootContext||a,s=o.elements,[c,d]=b.useState(null),[h,f]=b.useState(null),R=s?.domReference||c,T=b.useRef(null),S=pf();kt(()=>{R&&(T.current=R)},[R]);const I=mU({...e,elements:{...s,...h&&{reference:h}}}),C=b.useCallback(x=>{const L=Ht(x)?{getBoundingClientRect:()=>x.getBoundingClientRect(),getClientRects:()=>x.getClientRects(),contextElement:x}:x;f(L),I.refs.setReference(L)},[I.refs]),_=b.useCallback(x=>{(Ht(x)||x===null)&&(T.current=x,d(x)),(Ht(I.refs.reference.current)||I.refs.reference.current===null||x!==null&&!Ht(x))&&I.refs.setReference(x)},[I.refs]),O=b.useMemo(()=>({...I.refs,setReference:_,setPositionReference:C,domReference:T}),[I.refs,_,C]),D=b.useMemo(()=>({...I.elements,domReference:R}),[I.elements,R]),H=b.useMemo(()=>({...I,...o,refs:O,elements:D,nodeId:t}),[I,O,D,t,o]);return kt(()=>{o.dataRef.current.floatingContext=H;const x=S?.nodesRef.current.find(L=>L.id===t);x&&(x.context=H)}),b.useMemo(()=>({...I,context:H,refs:O,elements:D}),[I,O,D,H])}const DA=OH&&CC;function NU(e,t={}){const{open:a,onOpenChange:o,events:s,dataRef:c,elements:d}=e,{enabled:h=!0,visibleOnly:f=!0}=t,m=b.useRef(!1),R=Pr(),T=b.useRef(!0);b.useEffect(()=>{if(!h)return;const I=wn(d.domReference);function C(){!a&&Pn(d.domReference)&&d.domReference===ol(Un(d.domReference))&&(m.current=!0)}function _(){T.current=!0}function O(){T.current=!1}return I.addEventListener("blur",C),DA&&(I.addEventListener("keydown",_,!0),I.addEventListener("pointerdown",O,!0)),()=>{I.removeEventListener("blur",C),DA&&(I.removeEventListener("keydown",_,!0),I.removeEventListener("pointerdown",O,!0))}},[d.domReference,a,h]),b.useEffect(()=>{if(!h)return;function I({reason:C}){(C==="reference-press"||C==="escape-key")&&(m.current=!0)}return s.on("openchange",I),()=>{s.off("openchange",I)}},[s,h]);const S=b.useMemo(()=>({onMouseLeave(){m.current=!1},onFocus(I){if(m.current)return;const C=ja(I.nativeEvent);if(f&&Ht(C)){if(DA&&!I.relatedTarget){if(!T.current&&!yC(C))return}else if(!xH(C))return}o(!0,I.nativeEvent,"focus")},onBlur(I){m.current=!1;const C=I.relatedTarget,_=I.nativeEvent,O=Ht(C)&&C.hasAttribute(Fr("focus-guard"))&&C.getAttribute("data-type")==="outside";R.start(0,()=>{const D=ol(d.domReference?d.domReference.ownerDocument:document);!C&&D===d.domReference||mn(c.current.floatingContext?.refs.floating.current,D)||mn(d.domReference,D)||O||o(!1,_,"focus")})}}),[c,d.domReference,o,f,R]);return b.useMemo(()=>h?{reference:S}:{},[h,S])}function ib(e=[]){const t=e.map(h=>h?.reference),a=e.map(h=>h?.floating),o=e.map(h=>h?.item),s=b.useCallback(h=>yA(h,e,"reference"),t),c=b.useCallback(h=>yA(h,e,"floating"),a),d=b.useCallback(h=>yA(h,e,"item"),o);return b.useMemo(()=>({getReferenceProps:s,getFloatingProps:c,getItemProps:d}),[s,c,d])}function yA(e,t,a){const o=new Map,s=a==="item",c={};a==="floating"&&(c.tabIndex=-1,c[aR]="");for(const d in e)s&&e&&(d===OC||d===DC)||(c[d]=e[d]);for(let d=0;d<t.length;d+=1){let h;const f=t[d]?.[a];typeof f=="function"?h=e?f(e):null:h=f,h&&kp(c,h,s,o)}return kp(c,e,s,o),c}function kp(e,t,a,o){for(const s in t){const c=t[s];a&&(s===OC||s===DC)||(s.startsWith("on")?(o.has(s)||o.set(s,[]),typeof c=="function"&&(o.get(s)?.push(c),e[s]=(...d)=>o.get(s)?.map(h=>h(...d)).find(h=>h!==void 0))):e[s]=c)}}const CU=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function bU(e,t={}){const{open:a,elements:o,floatingId:s}=e,{enabled:c=!0,role:d="dialog"}=t,h=gf(),f=o.domReference?.id||h,m=b.useMemo(()=>iR(o.floating)?.id||s,[o.floating,s]),R=CU.get(d)??d,S=dT()!=null,I=b.useMemo(()=>R==="tooltip"||d==="label"?{[`aria-${d==="label"?"labelledby":"describedby"}`]:a?m:void 0}:{"aria-expanded":a?"true":"false","aria-haspopup":R==="alertdialog"?"dialog":R,"aria-controls":a?m:void 0,...R==="listbox"&&{role:"combobox"},...R==="menu"&&{id:f},...R==="menu"&&S&&{role:"menuitem"},...d==="select"&&{"aria-autocomplete":"none"},...d==="combobox"&&{"aria-autocomplete":"list"}},[R,m,S,a,f,d]),C=b.useMemo(()=>{const O={id:m,...R&&{role:R}};return R==="tooltip"||d==="label"?O:{...O,...R==="menu"&&{"aria-labelledby":f}}},[R,m,f,d]),_=b.useCallback(({active:O,selected:D})=>{const H={role:"option",...O&&{id:`${m}-fui-option`}};switch(d){case"select":case"combobox":return{...H,"aria-selected":D}}return{}},[m,d]);return b.useMemo(()=>c?{reference:I,floating:C,item:_}:{},[c,I,C,_])}function Up(e,t){const[a,o]=e;let s=!1;const c=t.length;for(let d=0,h=c-1;d<c;h=d++){const[f,m]=t[d]||[0,0],[R,T]=t[h]||[0,0];m>=o!=T>=o&&a<=(R-f)*(o-m)/(T-m)+f&&(s=!s)}return s}function OU(e,t){return e[0]>=t.x&&e[0]<=t.x+t.width&&e[1]>=t.y&&e[1]<=t.y+t.height}function DU(e={}){const{buffer:t=.5,blockPointerEvents:a=!1,requireIntent:o=!0}=e,s=new Rl;let c=!1,d=null,h=null,f=typeof performance<"u"?performance.now():0;function m(T,S){const I=performance.now(),C=I-f;if(d===null||h===null||C===0)return d=T,h=S,f=I,null;const _=T-d,O=S-h,H=Math.sqrt(_*_+O*O)/C;return d=T,h=S,f=I,H}const R=({x:T,y:S,placement:I,elements:C,onClose:_,nodeId:O,tree:D})=>function(x){function L(){s.clear(),_()}if(s.clear(),!C.domReference||!C.floating||I==null||T==null||S==null)return;const{clientX:w,clientY:G}=x,B=[w,G],z=ja(x),Q=x.type==="mouseleave",ce=mn(C.floating,z),ue=mn(C.domReference,z),te=C.domReference.getBoundingClientRect(),ee=C.floating.getBoundingClientRect(),Ee=I.split("-")[0],he=T>ee.right-ee.width/2,M=S>ee.bottom-ee.height/2,K=OU(B,te),$=ee.width>te.width,de=ee.height>te.height,y=($?te:ee).left,Y=($?te:ee).right,W=(de?te:ee).top,j=(de?te:ee).bottom;if(ce&&(c=!0,!Q))return;if(ue&&(c=!1),ue&&!Q){c=!0;return}if(Q&&Ht(x.relatedTarget)&&mn(C.floating,x.relatedTarget)||D&&as(D.nodesRef.current,O).some(({context:P})=>P?.open))return;if(Ee==="top"&&S>=te.bottom-1||Ee==="bottom"&&S<=te.top+1||Ee==="left"&&T>=te.right-1||Ee==="right"&&T<=te.left+1)return L();let Z=[];switch(Ee){case"top":Z=[[y,te.top+1],[y,ee.bottom-1],[Y,ee.bottom-1],[Y,te.top+1]];break;case"bottom":Z=[[y,ee.top+1],[y,te.bottom-1],[Y,te.bottom-1],[Y,ee.top+1]];break;case"left":Z=[[ee.right-1,j],[ee.right-1,W],[te.left+1,W],[te.left+1,j]];break;case"right":Z=[[te.right-1,j],[te.right-1,W],[ee.left+1,W],[ee.left+1,j]];break}function ae([P,q]){switch(Ee){case"top":{const se=[$?P+t/2:he?P+t*4:P-t*4,q+t+1],fe=[$?P-t/2:he?P+t*4:P-t*4,q+t+1],Se=[[ee.left,he||$?ee.bottom-t:ee.top],[ee.right,he?$?ee.bottom-t:ee.top:ee.bottom-t]];return[se,fe,...Se]}case"bottom":{const se=[$?P+t/2:he?P+t*4:P-t*4,q-t],fe=[$?P-t/2:he?P+t*4:P-t*4,q-t],Se=[[ee.left,he||$?ee.top+t:ee.bottom],[ee.right,he?$?ee.top+t:ee.bottom:ee.top+t]];return[se,fe,...Se]}case"left":{const se=[P+t+1,de?q+t/2:M?q+t*4:q-t*4],fe=[P+t+1,de?q-t/2:M?q+t*4:q-t*4];return[...[[M||de?ee.right-t:ee.left,ee.top],[M?de?ee.right-t:ee.left:ee.right-t,ee.bottom]],se,fe]}case"right":{const se=[P-t,de?q+t/2:M?q+t*4:q-t*4],fe=[P-t,de?q-t/2:M?q+t*4:q-t*4],Se=[[M||de?ee.left+t:ee.right,ee.top],[M?de?ee.left+t:ee.right:ee.left+t,ee.bottom]];return[se,fe,...Se]}default:return[]}}if(!Up([w,G],Z)){if(c&&!K)return L();if(!Q&&o){const P=m(x.clientX,x.clientY);if(P!==null&&P<.1)return L()}Up([w,G],ae([T,S]))?!c&&o&&s.start(40,L):L()}};return R.__options={blockPointerEvents:a},R}function ob(e,t=!1,a=!1){const[o,s]=b.useState(e&&t?"idle":void 0),[c,d]=b.useState(e);return e&&!c&&(d(!0),s("starting")),!e&&c&&o!=="ending"&&!a&&s("ending"),!e&&!c&&o==="ending"&&s(void 0),kt(()=>{if(!e&&c&&o!=="ending"&&a){const h=ji.request(()=>{s("ending")});return()=>{ji.cancel(h)}}},[e,c,o,a]),kt(()=>{if(!e||t)return;const h=ji.request(()=>{Wr.flushSync(()=>{s(void 0)})});return()=>{ji.cancel(h)}},[t,e]),kt(()=>{if(!e||!t)return;e&&c&&o!=="idle"&&s("starting");const h=ji.request(()=>{s("idle")});return()=>{ji.cancel(h)}},[t,e,c,s,o]),b.useMemo(()=>({mounted:c,setMounted:d,transitionStatus:o}),[c,o])}const yU=600;function lb(e){if(e)return{"focus-out":"focus-out","escape-key":"escape-key","outside-press":"outside-press","list-navigation":"list-navigation",click:"trigger-press",hover:"trigger-hover",focus:"trigger-focus","reference-press":"trigger-press","safe-polygon":"trigger-hover","ancestor-scroll":void 0}[e]}function vU(e,t=!1){const a=XC();return lt((o,s=null)=>{if(a.cancel(),e==null)return;let c;if("current"in e){if(e.current==null)return;c=e.current}else c=e;typeof c.getAnimations!="function"||globalThis.BASE_UI_ANIMATIONS_DISABLED?o():a.request(()=>{function d(){c&&Promise.allSettled(c.getAnimations().map(h=>h.finished)).then(()=>{s!=null&&s.aborted||Wr.flushSync(o)})}t?a.request(d):d()})})}function Cf(e){const{enabled:t=!0,open:a,ref:o,onComplete:s}=e,c=Ni(a),d=lt(s),h=vU(o,a);b.useEffect(()=>{t&&h(()=>{a===c.current&&d()})},[t,a,d,h,c])}const MU=b.createContext(void 0);function LU(){return b.useContext(MU)}function sb(e){const{disabled:t=!1,defaultOpen:a=!1,onOpenChange:o,open:s,delay:c,closeDelay:d,hoverable:h=!0,trackCursorAxis:f="none",actionsRef:m,onOpenChangeComplete:R}=e,T=c??yU,S=d??0,[I,C]=b.useState(null),[_,O]=b.useState(null),[D,H]=b.useState(),x=b.useRef(null),[L,w]=TC({controlled:s,default:a,name:"Tooltip",state:"open"}),G=!t&&L;function B(q,se,fe){const Se=fe==="trigger-hover",Oe=q&&fe==="trigger-focus",Ue=!q&&(fe==="trigger-press"||fe==="escape-key");function me(){o?.(q,se,fe),w(q)}Se?Wr.flushSync(me):me(),Oe||Ue?H(Oe?"focus":"dismiss"):fe==="trigger-hover"&&H(void 0)}const z=lt(B);L&&t&&B(!1,void 0,"disabled");const{mounted:Q,setMounted:ce,transitionStatus:ue}=ob(G),te=lt(()=>{ce(!1),R?.(!1)});Cf({enabled:!m,open:G,ref:x,onComplete(){G||te()}}),b.useImperativeHandle(m,()=>({unmount:te}),[te]);const ee=mT({elements:{reference:I,floating:_},open:G,onOpenChange(q,se,fe){z(q,se,lb(fe))}}),Ee=LU(),{delayRef:he,isInstantPhase:M,hasProvider:K}=Sk(ee),$=M?"delay":D,de=Rk(ee,{enabled:!t,mouseOnly:!0,move:!1,handleClose:h&&f!=="both"?DU():null,restMs(){const q=Ee?.delay,se=typeof he.current=="object"?he.current.open:void 0;let fe=T;return K&&(se!==0?fe=c??q??T:fe=0),fe},delay(){const q=typeof he.current=="object"?he.current.close:void 0;let se=S;return d==null&&K&&(se=q),{close:se}}}),y=NU(ee,{enabled:!t}),Y=ab(ee,{enabled:!t,referencePress:!0}),W=kk(ee,{enabled:!t&&f!=="none",axis:f==="none"?void 0:f}),{getReferenceProps:j,getFloatingProps:Z}=ib([de,y,Y,W]),ae=b.useMemo(()=>({open:G,setOpen:z,mounted:Q,setMounted:ce,setTriggerElement:C,positionerElement:_,setPositionerElement:O,popupRef:x,triggerProps:j(),popupProps:Z(),floatingRootContext:ee,instantType:$,transitionStatus:ue,onOpenChangeComplete:R}),[G,z,Q,ce,C,_,O,x,j,Z,ee,$,ue,R]),P=b.useMemo(()=>({...ae,delay:T,closeDelay:S,trackCursorAxis:f,hoverable:h}),[ae,T,S,f,h]);return l.jsx(SC.Provider,{value:P,children:e.children})}let Yh=function(e){return e.startingStyle="data-starting-style",e.endingStyle="data-ending-style",e}({});const xU={[Yh.startingStyle]:""},HU={[Yh.endingStyle]:""},AT={transitionStatus(e){return e==="starting"?xU:e==="ending"?HU:null}};let Jl=function(e){return e.open="data-open",e.closed="data-closed",e[e.startingStyle=Yh.startingStyle]="startingStyle",e[e.endingStyle=Yh.endingStyle]="endingStyle",e.anchorHidden="data-anchor-hidden",e}({}),kU=function(e){return e.popupOpen="data-popup-open",e.pressed="data-pressed",e}({});const UU={[kU.popupOpen]:""},PU={[Jl.open]:""},wU={[Jl.closed]:""},GU={[Jl.anchorHidden]:""},rb={open(e){return e?UU:null}},bf={open(e){return e?PU:wU},anchorHidden(e){return e?GU:null}},BU=parseInt(b.version,10);function cb(e){return BU>=e}function ub(e,t){if(e&&!t)return e;if(!e&&t)return t;if(e||t)return{...e,...t}}function FU(e,t){const a={};for(const o in e){const s=e[o];if(t?.hasOwnProperty(o)){const c=t[o](s);c!=null&&Object.assign(a,c);continue}s===!0?a[`data-${o.toLowerCase()}`]="":s&&(a[`data-${o.toLowerCase()}`]=s.toString())}return a}function jU(e,t){return typeof e=="function"?e(t):e}const du={};function RT(e,t,a,o,s){let c={...cR(e,du)};return t&&(c=hh(c,t)),a&&(c=hh(c,a)),o&&(c=hh(c,o)),c}function zU(e){if(e.length===0)return du;if(e.length===1)return cR(e[0],du);let t={...cR(e[0],du)};for(let a=1;a<e.length;a+=1)t=hh(t,e[a]);return t}function hh(e,t){return db(t)?t(e):YU(e,t)}function YU(e,t){if(!t)return e;for(const a in t){const o=t[a];switch(a){case"style":{e[a]=ub(e.style,o);break}case"className":{e[a]=hb(e.className,o);break}default:KU(a,o)?e[a]=VU(e[a],o):e[a]=o}}return e}function KU(e,t){const a=e.charCodeAt(0),o=e.charCodeAt(1),s=e.charCodeAt(2);return a===111&&o===110&&s>=65&&s<=90&&(typeof t=="function"||typeof t>"u")}function db(e){return typeof e=="function"}function cR(e,t){return db(e)?e(t):e??du}function VU(e,t){return t?e?a=>{if(WU(a)){const s=a;uR(s);const c=t(s);return s.baseUIHandlerPrevented||e?.(s),c}const o=t(a);return e?.(a),o}:t:e}function uR(e){return e.preventBaseUIHandler=()=>{e.baseUIHandlerPrevented=!0},e}function hb(e,t){return t?e?t+" "+e:t:e}function WU(e){return e!=null&&typeof e=="object"&&"nativeEvent"in e}function Ji(e,t,a={}){const o=t.render,s=XU(t,a);if(a.enabled===!1)return null;const c=a.state??ll;return qU(e,o,s,c)}function XU(e,t={}){const{className:a,render:o}=e,{state:s=ll,ref:c,props:d,disableStyleHooks:h,customStyleHookMapping:f,enabled:m=!0}=t,R=m?jU(a,s):void 0;let T;h!==!0&&(T=b.useMemo(()=>m?FU(s,f):ll,[s,f,m]));const S=m?ub(T,Array.isArray(d)?zU(d):d)??ll:ll;return typeof document<"u"&&(m?Array.isArray(c)?S.ref=Ik([S.ref,Pp(o),...c]):S.ref=jr(S.ref,Pp(o),c):jr(null,null)),m?(R!==void 0&&(S.className=hb(S.className,R)),S):ll}function qU(e,t,a,o){if(t){if(typeof t=="function")return t(a,o);const s=RT(a,t.props);return s.ref=a.ref,b.cloneElement(t,s)}if(e&&typeof e=="string")return ZU(e,a);throw new Error("Base UI: Render element or function are not defined.")}function ZU(e,t){return e==="button"?l.jsx("button",{type:"button",...t}):e==="img"?l.jsx("img",{alt:"",...t}):b.createElement(e,t)}function Pp(e){return e&&typeof e!="function"?cb(19)?e.props.ref:e.ref:null}const QU=b.forwardRef(function(t,a){const{className:o,render:s,...c}=t,{open:d,setTriggerElement:h,triggerProps:f}=Af(),m=b.useMemo(()=>({open:d}),[d]);return Ji("button",t,{state:m,ref:[a,h],props:[f,c],customStyleHookMapping:rb})}),fb=b.createContext(void 0);function JU(){const e=b.useContext(fb);if(e===void 0)throw new Error("Base UI: <Tooltip.Portal> is missing.");return e}function $U(e){const t=VC({root:e.root});return t&&Wr.createPortal(e.children,t)}function Eb(e){const{children:t,keepMounted:a=!1,container:o}=e,{mounted:s}=Af();return s||a?l.jsx(fb.Provider,{value:a,children:l.jsx($U,{root:o,children:t})}):null}const mb=b.createContext(void 0);function eP(){const e=b.useContext(mb);if(e===void 0)throw new Error("Base UI: TooltipPositionerContext is missing. TooltipPositioner parts must be placed within <Tooltip.Positioner>.");return e}function Zr(e){return e?.ownerDocument||document}const tP=b.createContext(void 0);function nP(e=!0){const t=b.useContext(tP);if(t===void 0&&!e)throw new Error("Base UI: DirectionContext is missing.");return t?.direction??"ltr"}const aP=e=>({name:"arrow",options:e,async fn(t){const{x:a,y:o,placement:s,rects:c,platform:d,elements:h,middlewareData:f}=t,{element:m,padding:R=0,offsetParent:T="real"}=yo(e,t)||{};if(m==null)return{};const S=vC(R),I={x:a,y:o},C=uT(s),_=cT(C),O=await d.getDimensions(m),D=C==="y",H=D?"top":"left",x=D?"bottom":"right",L=D?"clientHeight":"clientWidth",w=c.reference[_]+c.reference[C]-I[C]-c.floating[_],G=I[C]-c.reference[C],B=T==="real"?await d.getOffsetParent?.(m):h.floating;let z=h.floating[L]||c.floating[_];(!z||!await d.isElement?.(B))&&(z=h.floating[L]||c.floating[_]);const Q=w/2-G/2,ce=z/2-O[_]/2-1,ue=Math.min(S[H],ce),te=Math.min(S[x],ce),ee=ue,Ee=z-O[_]-te,he=z/2-O[_]/2+Q,M=oR(ee,he,Ee),K=!f.arrow&&pl(s)!=null&&he!==M&&c.reference[_]/2-(he<ee?ue:te)-O[_]/2<0,$=K?he<ee?he-ee:he-Ee:0;return{[C]:I[C]+$,data:{[C]:M,centerOffset:he-M-$,...K&&{alignmentOffset:$}},reset:K}}}),iP=(e,t)=>({...aP(e),options:[e,t]});function Ab(e,t,a){const o=e==="inline-start"||e==="inline-end";return{top:"top",right:o?a?"inline-start":"inline-end":"right",bottom:"bottom",left:o?a?"inline-end":"inline-start":"left"}[t]}function wp(e,t,a){const{rects:o,placement:s}=e;return{side:Ab(t,di(s),a),align:pl(s)||"center",anchor:{width:o.reference.width,height:o.reference.height},positioner:{width:o.floating.width,height:o.floating.height}}}function oP(e){const{anchor:t,positionMethod:a="absolute",side:o="bottom",sideOffset:s=0,align:c="center",alignOffset:d=0,collisionBoundary:h,collisionPadding:f=5,sticky:m=!1,arrowPadding:R=5,trackAnchor:T=!0,keepMounted:S=!1,floatingRootContext:I,mounted:C,collisionAvoidance:_,shiftCrossAxis:O=!1,nodeId:D,adaptiveOrigin:H}=e,x=_.side||"flip",L=_.align||"flip",w=_.fallbackAxisSide||"end",G=typeof t=="function"?t:void 0,B=lt(G),z=G?B:t,Q=Ni(t),ue=nP()==="rtl",te={top:"top",right:"right",bottom:"bottom",left:"left","inline-end":ue?"left":"right","inline-start":ue?"right":"left"}[o],ee=c==="center"?te:`${te}-${c}`,Ee={boundary:h==="clipping-ancestors"?"clippingAncestors":h,padding:f},he=b.useRef(null),M=Ni(s),K=Ni(d),y=[AU(rt=>{const Yt=wp(rt,o,ue),wt=typeof M.current=="function"?M.current(Yt):M.current,qa=typeof K.current=="function"?K.current(Yt):K.current;return{mainAxis:wt,crossAxis:qa,alignmentAxis:qa}},[typeof s!="function"?s:0,typeof d!="function"?d:0,ue,o])],Y=L==="none"&&x!=="shift",W=!Y&&(m||O||x==="shift"),j=x==="none"?null:SU({...Ee,mainAxis:!O&&x==="flip",crossAxis:L==="flip"?"alignment":!1,fallbackAxisSideDirection:w}),Z=Y?null:RU(rt=>{const Yt=Zr(rt.elements.floating).documentElement;return{...Ee,rootBoundary:O?{x:0,y:0,width:Yt.clientWidth,height:Yt.clientHeight}:void 0,mainAxis:L!=="none",crossAxis:W,limiter:m||O?void 0:TU(()=>{if(!he.current)return{};const{height:wt}=he.current.getBoundingClientRect();return{offset:wt/2+(typeof f=="number"?f:0)}})}},[Ee,m,O,f,L]);x==="shift"||L==="shift"||c==="center"?y.push(Z,j):y.push(j,Z),y.push(IU({...Ee,apply({elements:{floating:rt},rects:{reference:Yt},availableWidth:wt,availableHeight:qa}){Object.entries({"--available-width":`${wt}px`,"--available-height":`${qa}px`,"--anchor-width":`${Yt.width}px`,"--anchor-height":`${Yt.height}px`}).forEach(([Ds,ac])=>{rt.style.setProperty(Ds,ac)})}}),iP(()=>({element:he.current||document.createElement("div"),padding:R,offsetParent:"floating"}),[R]),_U(),{name:"transformOrigin",fn(rt){const{elements:Yt,middlewareData:wt,placement:qa,rects:Ds,y:ac}=rt,Dl=di(qa),ys=Ci(Dl),ki=he.current,vs=wt.arrow?.x||0,yl=wt.arrow?.y||0,tE=ki?.clientWidth||0,wu=ki?.clientHeight||0,Ms=vs+tE/2,Ls=yl+wu/2,vl=Math.abs(wt.shift?.y||0),nE=Ds.reference.height/2,Gu=vl>(typeof s=="function"?s(wp(rt,o,ue)):s),Bu={top:`${Ms}px calc(100% + ${s}px)`,bottom:`${Ms}px ${-s}px`,left:`calc(100% + ${s}px) ${Ls}px`,right:`${-s}px ${Ls}px`}[Dl],ic=`${Ms}px ${Ds.reference.y+nE-ac}px`;return Yt.floating.style.setProperty("--transform-origin",W&&ys==="y"&&Gu?ic:Bu),{}}},H);let ae=I;!C&&I&&(ae={...I,elements:{reference:null,floating:null,domReference:null}});const P=b.useMemo(()=>({elementResize:T&&typeof ResizeObserver<"u",layoutShift:T&&typeof IntersectionObserver<"u"}),[T]),{refs:q,elements:se,x:fe,y:Se,middlewareData:Oe,update:Ue,placement:me,context:De,isPositioned:_e,floatingStyles:ge}=pU({rootContext:ae,placement:ee,middleware:y,strategy:a,whileElementsMounted:S?void 0:(...rt)=>Lp(...rt,P),nodeId:D}),{sideX:ve,sideY:Ye}=Oe.adaptiveOrigin||{},Sn=b.useMemo(()=>H?{position:a,[ve]:`${fe}px`,[Ye]:`${Se}px`}:ge,[H,ve,Ye,a,fe,Se,ge]),Si=b.useRef(null);kt(()=>{if(!C)return;const rt=Q.current,Yt=typeof rt=="function"?rt():rt,qa=(Gp(Yt)?Yt.current:Yt)||null||null;qa!==Si.current&&(q.setPositionReference(qa),Si.current=qa)},[C,q,z,Q]),b.useEffect(()=>{if(!C)return;const rt=Q.current;typeof rt!="function"&&Gp(rt)&&rt.current!==Si.current&&(q.setPositionReference(rt.current),Si.current=rt.current)},[C,q,z,Q]),b.useEffect(()=>{if(S&&C&&se.domReference&&se.floating)return Lp(se.domReference,se.floating,Ue,P)},[S,C,se,Ue,P]);const pa=di(me),ao=Ab(o,pa,ue),io=pl(me)||"center",bs=!!Oe.hide?.referenceHidden,Os=b.useMemo(()=>({position:"absolute",top:Oe.arrow?.y,left:Oe.arrow?.x}),[Oe.arrow]),Lo=Oe.arrow?.centerOffset!==0;return b.useMemo(()=>({positionerStyles:Sn,arrowStyles:Os,arrowRef:he,arrowUncentered:Lo,side:ao,align:io,anchorHidden:bs,refs:q,context:De,isPositioned:_e,update:Ue}),[Sn,Os,he,Lo,ao,io,bs,q,De,_e,Ue])}function Gp(e){return e!=null&&"current"in e}const Rb=b.forwardRef(function(t,a){const{render:o,className:s,anchor:c,positionMethod:d="absolute",side:h="top",align:f="center",sideOffset:m=0,alignOffset:R=0,collisionBoundary:T="clipping-ancestors",collisionPadding:S=5,arrowPadding:I=5,sticky:C=!1,trackAnchor:_=!0,collisionAvoidance:O=Dk,...D}=t,{open:H,setPositionerElement:x,mounted:L,floatingRootContext:w,trackCursorAxis:G,hoverable:B}=Af(),z=JU(),Q=oP({anchor:c,positionMethod:d,floatingRootContext:w,mounted:L,side:h,sideOffset:m,align:f,alignOffset:R,collisionBoundary:T,collisionPadding:S,sticky:C,arrowPadding:I,trackAnchor:_,keepMounted:z,collisionAvoidance:O}),ce=b.useMemo(()=>{const he={};return(!H||G==="both"||!B)&&(he.pointerEvents="none"),{role:"presentation",hidden:!L,style:{...Q.positionerStyles,...he}}},[H,G,B,L,Q.positionerStyles]),ue=b.useMemo(()=>({props:ce,...Q}),[ce,Q]),te=b.useMemo(()=>({open:H,side:ue.side,align:ue.align,anchorHidden:ue.anchorHidden}),[H,ue.side,ue.align,ue.anchorHidden]),ee=b.useMemo(()=>({...te,arrowRef:ue.arrowRef,arrowStyles:ue.arrowStyles,arrowUncentered:ue.arrowUncentered}),[te,ue.arrowRef,ue.arrowStyles,ue.arrowUncentered]),Ee=Ji("div",t,{state:te,props:[ue.props,D],ref:[a,x],customStyleHookMapping:bf});return l.jsx(mb.Provider,{value:ee,children:Ee})}),lP={...bf,...AT},Tb=b.forwardRef(function(t,a){const{className:o,render:s,...c}=t,{open:d,instantType:h,transitionStatus:f,popupProps:m,popupRef:R,onOpenChangeComplete:T}=Af(),{side:S,align:I}=eP();Cf({open:d,ref:R,onComplete(){d&&T?.(!0)}});const C=b.useMemo(()=>({open:d,side:S,align:I,instant:h,transitionStatus:f}),[d,S,I,h,f]);return Ji("div",t,{state:C,ref:[a,R],props:[m,f==="starting"?Ok:ll,c],customStyleHookMapping:lP})}),vA=new Map,Sb="assets/Skills/General/Missing.png",dR=e=>{if(vA.has(e))return vA.get(e);const t=`assets/Skills/${mC(e)}`;if(t){const a=new Image;return a.src=t,a.onerror=o=>{a.src=Sb,console.error("failed to load skill image: "+t),a.onerror=null},a.onload=()=>vo(),vA.set(e,a),a}};function Ib(e){const t=`assets/Skills/${mC(e.skillName)}`,[a,o]=b.useState(!1);return l.jsx("img",{style:e.style,src:a?Sb:t,onError:s=>o(!0),alt:e.skillName})}function sP(e={diameter:50,progress:.7,color:"rgba(0, 0, 0, 0.6)"}){const t=e.diameter/2,a=Math.PI*t,o=a*(1-e.progress),s=a-o,c=o+","+s,d=l.jsx("circle",{r:t/2,cx:20,cy:21,fill:"none",stroke:e.color,strokeWidth:t,strokeDasharray:c,strokeDashoffset:a/4+o}),h=t,f=l.jsx("circle",{r:t+h/2,cx:20,cy:21,fill:"none",stroke:e.color,strokeWidth:h});return l.jsxs("svg",{width:48,height:48,style:{position:"absolute",left:"50%",marginLeft:-20,pointerEvents:"none"},children:[d,f]})}function rP(e={diameter:50,progress:.7,color:"rgba(0, 0, 0, 0.5)"}){const t=e.diameter/2,a=2*Math.PI*t,o=a*e.progress,s=a-o,c=o+","+s,d=l.jsx("circle",{r:t,cx:20,cy:21,fill:"none",stroke:e.color,strokeWidth:2,strokeDashoffset:a/4,strokeDasharray:c});return l.jsx("svg",{width:48,height:48,style:{position:"absolute",left:"50%",marginLeft:-20,pointerEvents:"none"},children:d})}function cP(e={diameter:50,progress:.7,color:"rgba(0, 0, 0, 0.5)"}){const t=e.diameter/2,a=Math.PI*t*2,o=a*e.progress,s=a-o,c=o+","+s,d=2*Math.PI*e.progress,h="#ffffffef",f=l.jsx("circle",{r:t,cx:20,cy:21,fill:"none",stroke:h,strokeWidth:1,strokeDasharray:c,strokeDashoffset:a/4}),m=l.jsx("line",{x1:20,y1:21,x2:20,y2:21-t,stroke:h,strokeWidth:1}),R=l.jsx("line",{x1:20,y1:21,x2:20+t*Math.cos(d-Math.PI/2),y2:21+t*Math.sin(d-Math.PI/2),stroke:h,strokeWidth:1});return l.jsxs("svg",{width:48,height:48,style:{position:"absolute",left:"50%",marginLeft:-20,pointerEvents:"none"},children:[f,m,R]})}function uP(e){const[t,a]=b.useState(l.jsx("div",{})),o=b.useContext(Rn),s=()=>{const G=p.getSkillInfo({game:p.getDisplayedGame(),skillName:e.skillName}),B=ia(o),z=[];if(G.status.ready()){let te="ready ("+G.stacksAvailable,ee=" ("+G.stacksAvailable;G.timeTillNextStackReady>0&&(te+=") (next stack ready in "+G.timeTillNextStackReady.toFixed(3),ee+=") ("+G.timeTillNextStackReady.toFixed(3)+""),te+=")",ee+=")",z.push(g({en:te,zh:ee}))}else{if(G.status.unavailableReasons.includes(Et.RequirementsNotMet)&&z.push(ts(Et.RequirementsNotMet)),G.status.unavailableReasons.includes(Et.NotEnoughMP)&&z.push(ts(Et.NotEnoughMP)+g({en:" (needs "+G.capturedManaCost+")",zh:" "+G.capturedManaCost+""})),G.status.unavailableReasons.includes(Et.Blocked)){const te=Math.max(G.timeTillNextStackReady,G.timeTillSecondaryReady??0),ee=g({en:"possibly ready in "+G.timeTillAvailable.toFixed(3),zh:""+G.timeTillAvailable.toFixed(3)+""}),Ee=g({en:" (next stack ready in "+te.toFixed(3)+")",zh:""+te.toFixed(3)+"CD"});z.push(l.jsxs(l.Fragment,{children:[ee,G.stacksAvailable<G.maxStacks?Ee:void 0]}))}G.status.unavailableReasons.includes(Et.NotInCombat)&&z.push(ts(Et.NotInCombat))}const Q=G.instantCast?0:G.castTime;let ce="";G.status.ready()&&(ce+=g({en:"cast: ",zh:""})+Q.toFixed(3),G.llCovered&&Q>An.epsilon&&(ce+=" (LL)"),ce+=g({en:", cast+delay: ",zh:" +"})+G.timeTillDamageApplication.toFixed(3));const ue=l.jsxs("div",{style:{color:p.displayingUpToDateGameState?B.text:B.historical},children:[l.jsx("div",{className:"paragraph",children:l.jsx("b",{children:fi(e.skillName)})}),l.jsx("div",{className:"paragraph",children:z.map((te,ee)=>l.jsxs("span",{children:[te,l.jsx("br",{})]},ee))}),l.jsx("div",{className:"paragraph",children:ce})]});a(ue)},c={width:48,height:48,verticalAlign:"top",position:"relative",display:"inline-block"},d={width:40,height:40,position:"absolute",top:2,left:"50%",marginLeft:-20};let h="transparent";e.readyAsideFromCd||(h="rgba(0, 0, 0, 0.6)");const f=p.getSkillInfo({game:p.getDisplayedGame(),skillName:e.skillName}),m=f.stacksAvailable,R=f.maxStacks;let T;const S=48,I=S/3+4;let C,_;if(m>0){C="0 0 2px rgba(255, 50, 0, 1), 0 0 3px rgba(255, 100, 0, 1), 0 0 5px rgba(255, 100, 0, 1)";const G=m===R?5:3;for(let B=0;B<G;B++)C+=", 0 0 10px black";_="white"}else C="0 0 4px black, 0 0 8px black",_="rgb(223,60,60)";R>1?T=l.jsx("div",{tabIndex:-1,style:{fontFamily:"Goldman Regular",color:_,fontSize:`${I}px`,textShadow:C,width:I,textAlign:"center",bottom:2,right:1,zIndex:3,position:"absolute"},children:m}):T=l.jsx(l.Fragment,{});const O=l.jsx(sP,{diameter:38,progress:e.cdProgress,color:e.ready?"rgba(0, 0, 0, 0)":"rgba(0, 0, 0, 0.6)"}),D=l.jsx(cP,{diameter:38,progress:e.cdProgress,color:e.ready?"rgba(0, 0, 0, 0)":"rgba(255, 255, 255, 1.0)"}),H=e.secondaryCdProgress&&l.jsx(rP,{diameter:32,progress:e.secondaryCdProgress,color:"rgba(250,186,47,255)"}),x=l.jsx("img",{hidden:!e.highlight,src:"/misc/proc.png",alt:"skill proc",style:{position:"absolute",width:44,height:44,top:0,left:2,zIndex:2}}),L=l.jsxs("div",{onMouseEnter:s,children:[l.jsxs("div",{style:c,children:[" ",l.jsx(Ib,{style:d,skillName:e.skillName}),l.jsxs("div",{style:{position:"absolute",width:40,height:41,top:1,left:"50%",marginLeft:-20,borderRadius:3,overflow:"hidden",zIndex:1,background:h},children:[e.cdProgress>1-An.epsilon||!e.readyAsideFromCd||O,e.cdProgress>1-An.epsilon||D,!e.secondaryCdProgress||e.secondaryCdProgress>1-An.epsilon||H]}),l.jsx("div",{style:{position:"absolute",width:S,height:S,background:"url('/misc/skillIcon_overlay.png') no-repeat"}})]}),x,T]}),w=l.jsx("span",{title:gn[e.skillName].name,className:"skillButton",children:l.jsx(fs,{onClickFn:()=>{p.requestUseSkill({skillName:e.skillName,targetCount:e.targetCount},!0)},content:L})});return l.jsxs(sb,{delay:0,hoverable:!1,children:[l.jsx(QU,{render:w}),l.jsx(Eb,{container:document.getElementById("skillsWindowAnchor"),children:l.jsx(Rb,{sideOffset:3,side:"top",className:"tooltip-positioner",children:l.jsx(Tb,{className:"info-tooltip tooltip",children:t})})})]})}let _b=e=>{};class dP extends ha.Component{state;onWaitTimeChange;onWaitTimeSubmit;onWaitUntilChange;onWaitUntilSubmit;onWaitSinceChange;onTargetCountChange;onRemoveTrailingIdleTime;onWaitTillNextMpOrLucidTick;static contextType=Rn;constructor(t){super(t),_b=a=>{this.setState({statusList:a})},this.onWaitTimeChange=a=>{!a||!a.target||this.setState({waitTime:a.target.value})},this.onWaitTimeSubmit=a=>{a.preventDefault();const o=parseFloat(this.state.waitTime);if(!isNaN(o))if(this.state.waitSince==="Now")p.step(o,!0);else if(this.state.waitSince==="LastSkill"){const s=p.game.time-p.lastSkillTime,c=o-s;c<=0?window.alert("Invalid input: trying to jump to "+o+"s since the last action, but "+s+"s has already elapsed."):p.step(c,!0)}else console.assert(!1)},this.onWaitUntilChange=a=>{!a||!a.target||this.setState({waitUntil:a.target.value})},this.onWaitUntilSubmit=a=>{a.preventDefault();const o=zi(this.state.waitUntil);isNaN(o)||(o>(p.displayingUpToDateGameState?p.game.getDisplayTime():p.savedHistoricalGame.getDisplayTime())?p.stepUntil(o,!0):window.alert("Can only jump to a time in the future!"))},this.onWaitSinceChange=a=>{this.setState({waitSince:a.target.value})},this.onTargetCountChange=a=>{this.setState({targetCount:parseInt(a.target.value)})},this.onRemoveTrailingIdleTime=()=>{p.removeTrailingIdleTime()},this.onWaitTillNextMpOrLucidTick=()=>{p.waitTillNextMpOrLucidTick()},this.state={statusList:[],waitTime:"1",waitSince:"Now",waitUntil:"0:00",targetCount:1}}render(){const t=[];for(let h=0;h<this.state.statusList.length;h++){const f=this.state.statusList[h].skillName,m=this.state.statusList[h],R=m?!m.status.unavailableReasons.some(S=>S!==Et.Blocked):!1,T=l.jsx(uP,{highlight:m?m.highlight:!1,skillName:f,ready:m?m.status.ready():!1,readyAsideFromCd:R,cdProgress:m?1-m.timeTillNextStackReady/m.cdRecastTime:1,secondaryCdProgress:m&&m.secondaryCdRecastTime&&m.timeTillSecondaryReady?1-m.timeTillSecondaryReady/m.secondaryCdRecastTime:1,targetCount:this.state.targetCount},h);t.push(T)}const a=l.jsx(Fe,{topic:"waitUntilInputFormat",content:l.jsxs("div",{children:[l.jsx("div",{className:"paragraph",children:g({en:"Examples:",zh:""})}),l.jsxs("div",{className:"paragraph",children:["12 ",l.jsx("br",{}),"1.5 ",l.jsx("br",{}),"10:04.2 ",l.jsx("br",{}),"-0:03"]})]})}),o={display:"inline-block",flex:"auto"},s=ia(this.context),c={outline:"none",border:"none",borderBottom:"1px solid "+s.text,borderRadius:0,background:"transparent",color:s.text},d=l.jsx(Fe,{topic:"targetCount",content:g({en:l.jsxs(l.Fragment,{children:[l.jsx("span",{children:"The number of targets hit by the next ability. Damage fall-off is automatically computed. If the number of targets set is more than the number of enemies the ability can hit, then the additional targets are ignored."}),l.jsx("br",{}),l.jsx("br",{}),l.jsx("span",{children:"Buff calculations for enemy debuffs like Dokumori and Chain Stratagem may be inaccurate when multiple targets are selected."})]}),zh:l.jsxs("div",{children:[l.jsx("span",{children:"2"}),l.jsx("br",{}),l.jsx("br",{}),l.jsx("span",{children:""})]})})});return l.jsx("div",{className:"skillsWindow",id:"skillsWindowAnchor",children:l.jsxs("div",{className:"skillIcons",children:[l.jsx("style",{children:`
					.info-tooltip {
						color: ${s.text};
						background-color: ${s.tipBackground};
						opacity: 0.98;
						max-width: 300px;
						outline: 1px solid ${s.bgHighContrast};
						transition: none;
						font-size: 100%;
						z-index: 10;
					}
				`}),t,l.jsxs("div",{style:{margin:"10px 0"},children:[g({en:"# of targets hit",zh:""})," ",d,":"," ",l.jsx("input",{type:"number",min:1,max:ZM,style:{width:30,...c},value:this.state.targetCount,onChange:this.onTargetCountChange}),l.jsxs("div",{style:{display:"flex",flexDirection:"row",marginBottom:6},children:[g({en:l.jsxs("form",{onSubmit:this.onWaitTimeSubmit,style:o,children:["Wait until"," ",l.jsx("input",{type:"text",style:{width:40,...c},value:this.state.waitTime,onChange:this.onWaitTimeChange})," ","second(s) since"," ",l.jsxs("select",{style:{display:"inline-block",outline:"none"},value:this.state.waitSince,onChange:this.onWaitSinceChange,children:[l.jsx("option",{value:"Now",children:"now"}),l.jsx("option",{value:"LastSkill",children:"last action"})]})," ",l.jsx("input",{type:"submit",value:"GO"})]}),zh:l.jsxs("form",{onSubmit:this.onWaitTimeSubmit,style:o,children:[""," ",l.jsxs("select",{style:{display:"inline-block",outline:"none"},value:this.state.waitSince,onChange:this.onWaitSinceChange,children:[l.jsx("option",{value:"Now",children:""}),l.jsx("option",{value:"LastSkill",children:""})]})," ",""," ",l.jsx("input",{type:"text",style:{width:30,...c},value:this.state.waitTime,onChange:this.onWaitTimeChange})," "," ",l.jsx("input",{type:"submit",value:"GO"})]}),ja:l.jsxs("form",{onSubmit:this.onWaitTimeSubmit,style:o,children:[l.jsxs("select",{style:{display:"inline-block",outline:"none",marginRight:"4px"},value:this.state.waitSince,onChange:this.onWaitSinceChange,children:[l.jsx("option",{value:"Now",children:""}),l.jsx("option",{value:"LastSkill",children:""})]}),"",l.jsx("input",{type:"text",style:{width:30,...c},value:this.state.waitTime,onChange:this.onWaitTimeChange}),"",l.jsx("input",{type:"submit",value:"GO"})]})}),g({en:l.jsxs("form",{onSubmit:this.onWaitUntilSubmit,style:o,children:["Wait until ",a," ",l.jsx("input",{type:"text",style:{width:60,...c},value:this.state.waitUntil,onChange:this.onWaitUntilChange}),l.jsx("input",{type:"submit",value:"GO"})]}),zh:l.jsxs("form",{onSubmit:this.onWaitUntilSubmit,style:o,children:[" ",a," ",l.jsx("input",{type:"text",style:{width:60,...c},value:this.state.waitUntil,onChange:this.onWaitUntilChange}),l.jsx("input",{type:"submit",value:"GO"})]}),ja:l.jsxs("form",{onSubmit:this.onWaitUntilSubmit,style:o,children:[" ",a," ",l.jsx("input",{type:"text",style:{width:60,...c},value:this.state.waitUntil,onChange:this.onWaitUntilChange}),l.jsx("input",{type:"submit",value:"GO"})]})})]}),l.jsx("button",{onClick:this.onWaitTillNextMpOrLucidTick,children:g({en:"Wait until MP tick / lucid tick",zh:"/"})}),l.jsx("span",{children:" "}),l.jsx("button",{onClick:this.onRemoveTrailingIdleTime,children:g({en:"Remove trailing idle time",zh:""})})]})]})})}}let fl=()=>{};function hP(e){const[t,a]=b.useState("(untitled)"),o=s=>a(s);return l.jsxs("form",{children:[l.jsx(Bt,{style:{display:"inline-block",marginTop:"10px"},defaultValue:t,description:g({en:"name: ",zh:""}),width:30,onChange:o}),l.jsx("span",{children:" "}),l.jsx("button",{type:"submit",disabled:!e.enabled,onClick:s=>{p.addSelectionToPreset(t),s.preventDefault()},children:g({en:"add selection to preset",zh:""})})]})}function fP(e){const t=e.line,a=[];let o=0;const s={margin:"0 1px",width:"18px",verticalAlign:"middle"};for(const d of t.actions)if(d.info.type===ze.Skill){const h=d.info.skillName;a.push(l.jsx(Ib,{style:s,skillName:h},o)),o++}const c=l.jsxs("span",{children:[t.name," (",a,")"]});return l.jsxs("div",{style:{marginBottom:"8px"},children:[l.jsx(fs,{content:c,onClickFn:()=>{const d=p.record.selectionStartIndex;p.displayingUpToDateGameState?(p.tryAddLine(t,Dn.SkillSequence),p.updateAllDisplay(),p.scrollToTime()):d!==void 0&&p.undoStack.doThenPush(new CT(t.actions,d,"preset"))}}),l.jsx("span",{children:" "}),l.jsx(fs,{content:"[x]",onClickFn:()=>{p.deleteLine(t)}})]})}function EP(){const e=b.useContext(Rn),[,t]=b.useReducer(c=>c+1,0);b.useEffect(()=>(fl=()=>t(),()=>{fl=()=>{}}),[]);const a=p.record.getFirstSelection()!==void 0,o=Al(e,"bgMediumContrast"),s=l.jsxs("div",{children:[l.jsx("button",{style:{marginBottom:10},onClick:()=>{p.deleteAllLines()},children:g({en:"clear all presets",zh:""})}),l.jsx(Wh,{allowLoadFromUrl:!1,defaultLoadUrl:"https://miyehn.me/ffxiv-blm-rotation/presets/lines/default.txt",onLoadFn:c=>{c.fileType===ri.SkillSequencePresets?p.appendFilePresets(c):window.alert("incorrect file type '"+c.fileType+"'")}}),l.jsxs("div",{style:{outline:"1px solid "+o,margin:"10px 0",padding:"10px"},children:[p.getPresetLines().map((c,d)=>l.jsx(fP,{line:c},d)),l.jsx(hP,{enabled:a}),l.jsx("div",{style:{marginTop:16},children:l.jsx(El,{fileFormat:Oo.Json,getContentFn:()=>p.serializedPresets(),filename:"presets",displayName:g({en:"download presets to file",zh:""})})})]})]});return l.jsx(ml,{title:g({en:"Skill sequence presets",zh:""}),content:s,defaultShow:!1})}const pi=4;var ot=(e=>(e.s_Cursor="s_Cursor",e.s_HistoricalCursor="s_HistoricalCursor",e.DamageMark="DamageMark",e.HealingMark="HealingMark",e.AggroMark="AggroMark",e.LucidMark="LucidMark",e.MPTickMark="MPTickMark",e.MeditateTickMark="MeditateTickMark",e.AutoTickMark="AutoTickMark",e.Skill="Skill",e.Marker="Marker",e.WarningMark="WarningMark",e.Buff="Buff",e))(ot||{});const Ki=-1;var Xn=(e=>(e.Info="Info",e.Untargetable="Untargetable",e.Buff="Buff",e))(Xn||{});function mP(e){return e.type==="s_Cursor"||e.type==="s_HistoricalCursor"}let AP=class{scale;startTime;elapsedTime;sharedElements;slots;activeSlotIndex;#e;#t;#n;constructor(){this.scale=.25,this.startTime=0,this.elapsedTime=0,this.sharedElements=[],this.slots=[],this.activeSlotIndex=-1,this.#e=[],this.#t=[],this.#n=[],this.#u()}setTimeSegment(t,a){this.startTime=t,this.elapsedTime=a}addElement(t){mP(t)?this.sharedElements.push(t):(console.assert(this.slots.length>0),this.slots[this.activeSlotIndex].elements.push(t))}invalidateLastElement(){if(this.slots.length>0){const t=this.slots[this.activeSlotIndex].elements;for(let a=t.length-1;a>=0;a--){const o=t[a];if(o.type==="Skill"){o.node.tmp_invalid_reasons=[Et.CastCanceled];return}}}}tryGetElement(t,a){return this.slots[this.activeSlotIndex].elements.find(o=>o.time===t&&o.type===a)}getAllMarkers(){return this.#e}getUntargetableMarkers(){return this.#t}getBuffMarkers(){return this.#n}#a(t,a){const o=function(s,c){return Math.abs(s-c)<An.epsilon};return!(t.markerType!==a.markerType||!o(t.time,a.time)||!o(t.duration,a.duration)||t.color!==a.color||t.track!==a.track||t.showText!==a.showText||t.description!==a.description)}addMarker(t){this.#e.push(t),t.markerType==="Untargetable"?this.#t.push(t):t.markerType==="Buff"&&this.#n.push(t),this.drawElements(),this.#r()}deleteMarker(t){let a=!1;for(let o=0;o<this.#e.length;o++)t===this.#e[o]&&(this.#e.splice(o,1),this.drawElements(),this.#r(),a=!0);return this.#i(),this.#c(),a}#i(){this.#t=[],this.#e.forEach(t=>{t.markerType==="Untargetable"&&this.#t.push(t)}),Zn()}#c(){this.#n=[],this.#e.forEach(t=>{t.markerType==="Buff"&&(t.description==="Wanderer's Minuet"&&(t.description=k.WanderersMinuet),this.#n.push(t))})}sortAndRemoveDuplicateMarkers(){this.#e.sort((a,o)=>a.time-o.time);let t=0;for(let a=this.#e.length-1;a>0;a--)this.#a(this.#e[a],this.#e[a-1])&&(this.#e.splice(a,1),t++);return this.#i(),this.#c(),this.#r(),t}#s(t,a,o,s){let c=t.markers.map(d=>({time:d.time+o,duration:d.duration,color:d.color,description:d.description,track:d.markerType==="Untargetable"?Ki:a,type:"Marker",markerType:d.markerType??"Info",showText:d.showText??!1}));s!==void 0&&(c=c.filter(d=>s===void 0||d.time<=s+An.epsilon)),this.#e=this.#e.concat(c),this.#i(),this.#c(),this.#r()}loadCombinedTracksPreset(t,a,o){if(t.fileType!==ri.MarkerTracksCombined){window.alert("wrong file type '"+t.fileType+"'");return}t.tracks.forEach(s=>{this.loadIndividualTrackPreset(s,s.track,a,o)})}loadIndividualTrackPreset(t,a,o,s){if(t.fileType!==ri.MarkerTrackIndividual){window.alert("wrong file type '"+t.fileType+"'");return}this.#s(t,a,o,s)}deleteAllMarkers(){const t=this.#t.length>0;this.#e=[],this.#t=[],this.#n=[],this.drawElements(),t&&Zn(),this.#r()}addSlotAtIndex(t){if(t<0||t>this.slots.length||this.slots.length+1>pi){console.error("attempted to add slot at invalid index",t);return}for(let a=pi-1;a>=t;a--){let o=Rt(`gameRecord${a}`);o!==null&&Tt(`gameRecord${a+1}`,o),o=Rt(`gameTimeInfo${a}`),o!==null&&Tt(`gameTimeInfo${a+1}`,o)}this.slots.splice(t,0,{job:"BLM",elements:[]}),this.activeSlotIndex=t,p.setConfigAndRestart(p.gameConfig)}addSlot(){this.addSlotAtIndex(this.slots.length)}removeSlot(t){console.assert(t<this.slots.length);for(let a=t;a<pi;a++){let o=Rt("gameRecord"+(a+1).toString());o!==null&&Tt("gameRecord"+a.toString(),o),o=Rt("gameTimeInfo"+(a+1).toString()),o!==null&&Tt("gameTimeInfo"+a.toString(),o)}this.slots.splice(t,1);for(let a=this.slots.length;a<pi;a++)QA("gameRecord"+a.toString()),QA("gameTimeInfo"+a.toString());this.activeSlotIndex>=t&&(this.activeSlotIndex=Math.max(0,this.activeSlotIndex-1)),this.loadSlot(this.activeSlotIndex),Tt("activeSlotIndex",this.activeSlotIndex.toString())}saveCurrentSlot(t,a,o){Tt("gameRecord"+this.activeSlotIndex.toString(),JSON.stringify(t)),Tt("gameTimeInfo"+this.activeSlotIndex.toString(),JSON.stringify({countdown:a,elapsedTime:o})),p.gameConfig.savePartialConfig()}loadSlot(t){const a=Rt("gameRecord"+t.toString());if(a!==null){for(this.activeSlotIndex=t;this.slots.length<=t;)this.slots.push({job:"BLM",elements:[]});const o=JSON.parse(a);return p.loadBattleRecordFromFile(o),this.slots[t].job=p.game.job,!0}else return!1}reset(){this.startTime=0,this.elapsedTime=0,this.slots.length>0&&(this.slots[this.activeSlotIndex].elements=[]),this.sharedElements=[],this.addElement({type:"s_Cursor",time:0,displayTime:0}),this.addElement({type:"s_HistoricalCursor",time:0,displayTime:0,enabled:!1})}updateElem(t){console.assert(t&&t.type.substring(0,2)==="s_");for(let a=0;a<this.sharedElements.length;a++)if(this.sharedElements[a].type===t.type){this.sharedElements[a]=t;return}console.assert(!1)}setHorizontalScale(t){this.scale=t,this.drawElements()}getAllSlotsTimeInfo(){let t=0,a=0,o=!1;for(let s=0;s<pi;s++){const c=Rt("gameTimeInfo"+s.toString());if(c!==null){const d=JSON.parse(c);t=Math.max(t,d.countdown),a=Math.max(a,d.elapsedTime),o=!0}}return o?{countdown:t,rightMostTime:a}:null}getCanvasWidth(){let t=Math.max(0,this.elapsedTime),a=p.gameConfig.countdown;const o=this.getAllSlotsTimeInfo();return o!==null&&(a=Math.max(a,o.countdown),t=Math.max(t,o.rightMostTime)),this.#e.forEach(c=>{const d=c.time+c.duration;t=Math.max(t,d+a)}),Math.ceil((t+Math.max(0,a)+4)/8)*8*100*this.scale}getCanvasHeight(){const t=this.getNumMarkerTracks();return pe.timelineCanvasHeight(t,this.slots.length)}positionFromTime(t){return t*this.scale*100}timeFromPosition(t){return t/(this.scale*100)}drawElements(){vo(),this.updateTimelineMarkers()}getTrackIndices(){return Array.from(new Set(this.#e.map(t=>t.track))).sort()}updateTimelineMarkers(){vo()}onClickTimelineAction(t,a){if(t<0||t>=p.record.length)return;p.record.onClickNode(t,a),fl(),Ru();const o=p.record.selectionStartIndex;o!==void 0?p.displayHistoricalState(-1/0,o):p.displayHistoricalState(-1/0,t)}resizeSelection(t){const a=p.record.selectionStartIndex,o=p.record.selectionEndIndex;if(a!==void 0&&o!==void 0){const s=(p.record.startIsPivot?o:a)+(t?-1:1);s>=0&&s<p.record.length&&this.onClickTimelineAction(s,!0)}}getNumMarkerTracks(){let t=-1,a=!1;for(let o=0;o<this.#e.length;o++)t=Math.max(t,this.#e[o].track),this.#e[o].track===Ki&&(a=!0);return a?t+2:t+1}duringUntargetable(t){for(let a=0;a<this.#t.length;a++){const o=this.#t[a],s=o.time,c=o.time+o.duration;if(t>=s&&t<c)return!0}return!1}getTargetableDurationBetween(t,a){const o=function([d,h],[f,m]){const R=[];return d<f&&R.push([d,Math.min(h,f)]),m<h&&R.push([Math.max(m,d),h]),R};let s=[[t,a]];for(let d=0;d<this.#t.length;d++){const h=this.#t[d],f=h.time,m=h.time+h.duration;let R=[];s.forEach(T=>{R=R.concat(o(T,[f,m]))}),s=R}let c=0;return s.forEach(d=>{c+=d[1]-d[0]}),c}#r(){const t=this.serializedSeparateMarkerTracks();Tt("timelineMarkers",JSON.stringify(t))}#u(){const t=Rt("timelineMarkers");t!==null&&JSON.parse(t).forEach(o=>{this.#s(o,o.track,0)})}serializedSeparateMarkerTracks(){const t=this.getNumMarkerTracks()-1,a=new Map;for(let s=Ki;s<t+1;s++)a.set(s,[]);this.#e.forEach(s=>{const c=a.get(s.track);console.assert(c),c&&(c.push({time:s.time,markerType:s.markerType,duration:s.duration,description:s.description,color:s.color,showText:s.showText}),a.set(s.track,c))});const o=[];return a.forEach((s,c)=>{s.length>0&&o.push({fileType:ri.MarkerTrackIndividual,track:c,markers:s})}),o}serializedCombinedMarkerTracks(){const t=this.serializedSeparateMarkerTracks();return{fileType:ri.MarkerTracksCombined,tracks:t}}};function RP(e){return hi({attr:{viewBox:"0 0 32 32"},child:[{tag:"path",attr:{d:"M 5 5 L 5 27 L 27 27 L 27 5 Z M 7 7 L 25 7 L 25 25 L 7 25 Z M 9 20 L 9 22 L 23 22 L 23 20 Z"},child:[]}]})(e)}const Of=b.createContext(null);Of.displayName="PanelGroupContext";const en={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},TT=10,is=b.useLayoutEffect,Bp=MR.useId,TP=typeof Bp=="function"?Bp:()=>null;let SP=0;function ST(e=null){const t=TP(),a=b.useRef(e||t||null);return a.current===null&&(a.current=""+SP++),e??a.current}function gb({children:e,className:t="",collapsedSize:a,collapsible:o,defaultSize:s,forwardedRef:c,id:d,maxSize:h,minSize:f,onCollapse:m,onExpand:R,onResize:T,order:S,style:I,tagName:C="div",..._}){const O=b.useContext(Of);if(O===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:D,expandPanel:H,getPanelSize:x,getPanelStyle:L,groupId:w,isPanelCollapsed:G,reevaluatePanelConstraints:B,registerPanel:z,resizePanel:Q,unregisterPanel:ce}=O,ue=ST(d),te=b.useRef({callbacks:{onCollapse:m,onExpand:R,onResize:T},constraints:{collapsedSize:a,collapsible:o,defaultSize:s,maxSize:h,minSize:f},id:ue,idIsFromProps:d!==void 0,order:S});b.useRef({didLogMissingDefaultSizeWarning:!1}),is(()=>{const{callbacks:Ee,constraints:he}=te.current,M={...he};te.current.id=ue,te.current.idIsFromProps=d!==void 0,te.current.order=S,Ee.onCollapse=m,Ee.onExpand=R,Ee.onResize=T,he.collapsedSize=a,he.collapsible=o,he.defaultSize=s,he.maxSize=h,he.minSize=f,(M.collapsedSize!==he.collapsedSize||M.collapsible!==he.collapsible||M.maxSize!==he.maxSize||M.minSize!==he.minSize)&&B(te.current,M)}),is(()=>{const Ee=te.current;return z(Ee),()=>{ce(Ee)}},[S,ue,z,ce]),b.useImperativeHandle(c,()=>({collapse:()=>{D(te.current)},expand:Ee=>{H(te.current,Ee)},getId(){return ue},getSize(){return x(te.current)},isCollapsed(){return G(te.current)},isExpanded(){return!G(te.current)},resize:Ee=>{Q(te.current,Ee)}}),[D,H,x,G,ue,Q]);const ee=L(te.current,s);return b.createElement(C,{..._,children:e,className:t,id:ue,style:{...ee,...I},[en.groupId]:w,[en.panel]:"",[en.panelCollapsible]:o||void 0,[en.panelId]:ue,[en.panelSize]:parseFloat(""+ee.flexGrow).toFixed(1)})}const pb=b.forwardRef((e,t)=>b.createElement(gb,{...e,forwardedRef:t}));gb.displayName="Panel";pb.displayName="forwardRef(Panel)";let hR=null,fh=-1,sl=null;function IP(e,t){if(t){const a=(t&Db)!==0,o=(t&yb)!==0,s=(t&vb)!==0,c=(t&Mb)!==0;if(a)return s?"se-resize":c?"ne-resize":"e-resize";if(o)return s?"sw-resize":c?"nw-resize":"w-resize";if(s)return"s-resize";if(c)return"n-resize"}switch(e){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function _P(){sl!==null&&(document.head.removeChild(sl),hR=null,sl=null,fh=-1)}function MA(e,t){var a,o;const s=IP(e,t);if(hR!==s){if(hR=s,sl===null&&(sl=document.createElement("style"),document.head.appendChild(sl)),fh>=0){var c;(c=sl.sheet)===null||c===void 0||c.removeRule(fh)}fh=(a=(o=sl.sheet)===null||o===void 0?void 0:o.insertRule(`*{cursor: ${s} !important;}`))!==null&&a!==void 0?a:-1}}function Nb(e){return e.type==="keydown"}function Cb(e){return e.type.startsWith("pointer")}function bb(e){return e.type.startsWith("mouse")}function Df(e){if(Cb(e)){if(e.isPrimary)return{x:e.clientX,y:e.clientY}}else if(bb(e))return{x:e.clientX,y:e.clientY};return{x:1/0,y:1/0}}function gP(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function pP(e,t,a){return e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y}function NP(e,t){if(e===t)throw new Error("Cannot compare node with itself");const a={a:zp(e),b:zp(t)};let o;for(;a.a.at(-1)===a.b.at(-1);)e=a.a.pop(),t=a.b.pop(),o=e;Xe(o,"Stacking order can only be calculated for elements with a common ancestor");const s={a:jp(Fp(a.a)),b:jp(Fp(a.b))};if(s.a===s.b){const c=o.childNodes,d={a:a.a.at(-1),b:a.b.at(-1)};let h=c.length;for(;h--;){const f=c[h];if(f===d.a)return 1;if(f===d.b)return-1}}return Math.sign(s.a-s.b)}const CP=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function bP(e){var t;const a=getComputedStyle((t=Ob(e))!==null&&t!==void 0?t:e).display;return a==="flex"||a==="inline-flex"}function OP(e){const t=getComputedStyle(e);return!!(t.position==="fixed"||t.zIndex!=="auto"&&(t.position!=="static"||bP(e))||+t.opacity<1||"transform"in t&&t.transform!=="none"||"webkitTransform"in t&&t.webkitTransform!=="none"||"mixBlendMode"in t&&t.mixBlendMode!=="normal"||"filter"in t&&t.filter!=="none"||"webkitFilter"in t&&t.webkitFilter!=="none"||"isolation"in t&&t.isolation==="isolate"||CP.test(t.willChange)||t.webkitOverflowScrolling==="touch")}function Fp(e){let t=e.length;for(;t--;){const a=e[t];if(Xe(a,"Missing node"),OP(a))return a}return null}function jp(e){return e&&Number(getComputedStyle(e).zIndex)||0}function zp(e){const t=[];for(;e;)t.push(e),e=Ob(e);return t}function Ob(e){const{parentNode:t}=e;return t&&t instanceof ShadowRoot?t.host:t}const Db=1,yb=2,vb=4,Mb=8,DP=gP()==="coarse";let bi=[],vr=!1,Zl=new Map,yf=new Map;const mu=new Set;function yP(e,t,a,o,s){var c;const{ownerDocument:d}=t,h={direction:a,element:t,hitAreaMargins:o,setResizeHandlerState:s},f=(c=Zl.get(d))!==null&&c!==void 0?c:0;return Zl.set(d,f+1),mu.add(h),Kh(),function(){var R;yf.delete(e),mu.delete(h);const T=(R=Zl.get(d))!==null&&R!==void 0?R:1;if(Zl.set(d,T-1),Kh(),T===1&&Zl.delete(d),bi.includes(h)){const S=bi.indexOf(h);S>=0&&bi.splice(S,1),_T(),s("up",!0,null)}}}function vP(e){const{target:t}=e,{x:a,y:o}=Df(e);vr=!0,IT({target:t,x:a,y:o}),Kh(),bi.length>0&&(Vh("down",e),e.preventDefault(),Lb(t)||e.stopImmediatePropagation())}function LA(e){const{x:t,y:a}=Df(e);if(vr&&e.buttons===0&&(vr=!1,Vh("up",e)),!vr){const{target:o}=e;IT({target:o,x:t,y:a})}Vh("move",e),_T(),bi.length>0&&e.preventDefault()}function xA(e){const{target:t}=e,{x:a,y:o}=Df(e);yf.clear(),vr=!1,bi.length>0&&(e.preventDefault(),Lb(t)||e.stopImmediatePropagation()),Vh("up",e),IT({target:t,x:a,y:o}),_T(),Kh()}function Lb(e){let t=e;for(;t;){if(t.hasAttribute(en.resizeHandle))return!0;t=t.parentElement}return!1}function IT({target:e,x:t,y:a}){bi.splice(0);let o=null;(e instanceof HTMLElement||e instanceof SVGElement)&&(o=e),mu.forEach(s=>{const{element:c,hitAreaMargins:d}=s,h=c.getBoundingClientRect(),{bottom:f,left:m,right:R,top:T}=h,S=DP?d.coarse:d.fine;if(t>=m-S&&t<=R+S&&a>=T-S&&a<=f+S){if(o!==null&&document.contains(o)&&c!==o&&!c.contains(o)&&!o.contains(c)&&NP(o,c)>0){let C=o,_=!1;for(;C&&!C.contains(c);){if(pP(C.getBoundingClientRect(),h)){_=!0;break}C=C.parentElement}if(_)return}bi.push(s)}})}function HA(e,t){yf.set(e,t)}function _T(){let e=!1,t=!1;bi.forEach(o=>{const{direction:s}=o;s==="horizontal"?e=!0:t=!0});let a=0;yf.forEach(o=>{a|=o}),e&&t?MA("intersection",a):e?MA("horizontal",a):t?MA("vertical",a):_P()}let kA=new AbortController;function Kh(){kA.abort(),kA=new AbortController;const e={capture:!0,signal:kA.signal};mu.size&&(vr?(bi.length>0&&Zl.forEach((t,a)=>{const{body:o}=a;t>0&&(o.addEventListener("contextmenu",xA,e),o.addEventListener("pointerleave",LA,e),o.addEventListener("pointermove",LA,e))}),window.addEventListener("pointerup",xA,e),window.addEventListener("pointercancel",xA,e)):Zl.forEach((t,a)=>{const{body:o}=a;t>0&&(o.addEventListener("pointerdown",vP,e),o.addEventListener("pointermove",LA,e))}))}function Vh(e,t){mu.forEach(a=>{const{setResizeHandlerState:o}=a,s=bi.includes(a);o(e,s,t)})}function MP(){const[e,t]=b.useState(0);return b.useCallback(()=>t(a=>a+1),[])}function Xe(e,t){if(!e)throw console.error(t),Error(t)}function hs(e,t,a=TT){return e.toFixed(a)===t.toFixed(a)?0:e>t?1:-1}function po(e,t,a=TT){return hs(e,t,a)===0}function Fa(e,t,a){return hs(e,t,a)===0}function LP(e,t,a){if(e.length!==t.length)return!1;for(let o=0;o<e.length;o++){const s=e[o],c=t[o];if(!Fa(s,c,a))return!1}return!0}function pr({panelConstraints:e,panelIndex:t,size:a}){const o=e[t];Xe(o!=null,`Panel constraints not found for index ${t}`);let{collapsedSize:s=0,collapsible:c,maxSize:d=100,minSize:h=0}=o;if(hs(a,h)<0)if(c){const f=(s+h)/2;hs(a,f)<0?a=s:a=h}else a=h;return a=Math.min(d,a),a=parseFloat(a.toFixed(TT)),a}function au({delta:e,initialLayout:t,panelConstraints:a,pivotIndices:o,prevLayout:s,trigger:c}){if(Fa(e,0))return t;const d=[...t],[h,f]=o;Xe(h!=null,"Invalid first pivot index"),Xe(f!=null,"Invalid second pivot index");let m=0;if(c==="keyboard"){{const T=e<0?f:h,S=a[T];Xe(S,`Panel constraints not found for index ${T}`);const{collapsedSize:I=0,collapsible:C,minSize:_=0}=S;if(C){const O=t[T];if(Xe(O!=null,`Previous layout not found for panel index ${T}`),Fa(O,I)){const D=_-O;hs(D,Math.abs(e))>0&&(e=e<0?0-D:D)}}}{const T=e<0?h:f,S=a[T];Xe(S,`No panel constraints found for index ${T}`);const{collapsedSize:I=0,collapsible:C,minSize:_=0}=S;if(C){const O=t[T];if(Xe(O!=null,`Previous layout not found for panel index ${T}`),Fa(O,_)){const D=O-I;hs(D,Math.abs(e))>0&&(e=e<0?0-D:D)}}}}{const T=e<0?1:-1;let S=e<0?f:h,I=0;for(;;){const _=t[S];Xe(_!=null,`Previous layout not found for panel index ${S}`);const D=pr({panelConstraints:a,panelIndex:S,size:100})-_;if(I+=D,S+=T,S<0||S>=a.length)break}const C=Math.min(Math.abs(e),Math.abs(I));e=e<0?0-C:C}{let S=e<0?h:f;for(;S>=0&&S<a.length;){const I=Math.abs(e)-Math.abs(m),C=t[S];Xe(C!=null,`Previous layout not found for panel index ${S}`);const _=C-I,O=pr({panelConstraints:a,panelIndex:S,size:_});if(!Fa(C,O)&&(m+=C-O,d[S]=O,m.toPrecision(3).localeCompare(Math.abs(e).toPrecision(3),void 0,{numeric:!0})>=0))break;e<0?S--:S++}}if(LP(s,d))return s;{const T=e<0?f:h,S=t[T];Xe(S!=null,`Previous layout not found for panel index ${T}`);const I=S+m,C=pr({panelConstraints:a,panelIndex:T,size:I});if(d[T]=C,!Fa(C,I)){let _=I-C,D=e<0?f:h;for(;D>=0&&D<a.length;){const H=d[D];Xe(H!=null,`Previous layout not found for panel index ${D}`);const x=H+_,L=pr({panelConstraints:a,panelIndex:D,size:x});if(Fa(H,L)||(_-=L-H,d[D]=L),Fa(_,0))break;e>0?D--:D++}}}const R=d.reduce((T,S)=>S+T,0);return Fa(R,100)?d:s}function xP({layout:e,panelsArray:t,pivotIndices:a}){let o=0,s=100,c=0,d=0;const h=a[0];Xe(h!=null,"No pivot index found"),t.forEach((T,S)=>{const{constraints:I}=T,{maxSize:C=100,minSize:_=0}=I;S===h?(o=_,s=C):(c+=_,d+=C)});const f=Math.min(s,100-c),m=Math.max(o,100-d),R=e[h];return{valueMax:f,valueMin:m,valueNow:R}}function Au(e,t=document){return Array.from(t.querySelectorAll(`[${en.resizeHandleId}][data-panel-group-id="${e}"]`))}function xb(e,t,a=document){const s=Au(e,a).findIndex(c=>c.getAttribute(en.resizeHandleId)===t);return s??null}function Hb(e,t,a){const o=xb(e,t,a);return o!=null?[o,o+1]:[-1,-1]}function kb(e,t=document){var a;if(t instanceof HTMLElement&&(t==null||(a=t.dataset)===null||a===void 0?void 0:a.panelGroupId)==e)return t;const o=t.querySelector(`[data-panel-group][data-panel-group-id="${e}"]`);return o||null}function vf(e,t=document){const a=t.querySelector(`[${en.resizeHandleId}="${e}"]`);return a||null}function HP(e,t,a,o=document){var s,c,d,h;const f=vf(t,o),m=Au(e,o),R=f?m.indexOf(f):-1,T=(s=(c=a[R])===null||c===void 0?void 0:c.id)!==null&&s!==void 0?s:null,S=(d=(h=a[R+1])===null||h===void 0?void 0:h.id)!==null&&d!==void 0?d:null;return[T,S]}function kP({committedValuesRef:e,eagerValuesRef:t,groupId:a,layout:o,panelDataArray:s,panelGroupElement:c,setLayout:d}){b.useRef({didWarnAboutMissingResizeHandle:!1}),is(()=>{if(!c)return;const h=Au(a,c);for(let f=0;f<s.length-1;f++){const{valueMax:m,valueMin:R,valueNow:T}=xP({layout:o,panelsArray:s,pivotIndices:[f,f+1]}),S=h[f];if(S!=null){const I=s[f];Xe(I,`No panel data found for index "${f}"`),S.setAttribute("aria-controls",I.id),S.setAttribute("aria-valuemax",""+Math.round(m)),S.setAttribute("aria-valuemin",""+Math.round(R)),S.setAttribute("aria-valuenow",T!=null?""+Math.round(T):"")}}return()=>{h.forEach((f,m)=>{f.removeAttribute("aria-controls"),f.removeAttribute("aria-valuemax"),f.removeAttribute("aria-valuemin"),f.removeAttribute("aria-valuenow")})}},[a,o,s,c]),b.useEffect(()=>{if(!c)return;const h=t.current;Xe(h,"Eager values not found");const{panelDataArray:f}=h,m=kb(a,c);Xe(m!=null,`No group found for id "${a}"`);const R=Au(a,c);Xe(R,`No resize handles found for group id "${a}"`);const T=R.map(S=>{const I=S.getAttribute(en.resizeHandleId);Xe(I,"Resize handle element has no handle id attribute");const[C,_]=HP(a,I,f,c);if(C==null||_==null)return()=>{};const O=D=>{if(!D.defaultPrevented)switch(D.key){case"Enter":{D.preventDefault();const H=f.findIndex(x=>x.id===C);if(H>=0){const x=f[H];Xe(x,`No panel data found for index ${H}`);const L=o[H],{collapsedSize:w=0,collapsible:G,minSize:B=0}=x.constraints;if(L!=null&&G){const z=au({delta:Fa(L,w)?B-w:w-L,initialLayout:o,panelConstraints:f.map(Q=>Q.constraints),pivotIndices:Hb(a,I,c),prevLayout:o,trigger:"keyboard"});o!==z&&d(z)}}break}}};return S.addEventListener("keydown",O),()=>{S.removeEventListener("keydown",O)}});return()=>{T.forEach(S=>S())}},[c,e,t,a,o,s,d])}function Yp(e,t){if(e.length!==t.length)return!1;for(let a=0;a<e.length;a++)if(e[a]!==t[a])return!1;return!0}function Ub(e,t){const a=e==="horizontal",{x:o,y:s}=Df(t);return a?o:s}function UP(e,t,a,o,s){const c=a==="horizontal",d=vf(t,s);Xe(d,`No resize handle element found for id "${t}"`);const h=d.getAttribute(en.groupId);Xe(h,"Resize handle element has no group id attribute");let{initialCursorPosition:f}=o;const m=Ub(a,e),R=kb(h,s);Xe(R,`No group element found for id "${h}"`);const T=R.getBoundingClientRect(),S=c?T.width:T.height;return(m-f)/S*100}function PP(e,t,a,o,s,c){if(Nb(e)){const d=a==="horizontal";let h=0;e.shiftKey?h=100:s!=null?h=s:h=10;let f=0;switch(e.key){case"ArrowDown":f=d?0:h;break;case"ArrowLeft":f=d?-h:0;break;case"ArrowRight":f=d?h:0;break;case"ArrowUp":f=d?0:-h;break;case"End":f=100;break;case"Home":f=-100;break}return f}else return o==null?0:UP(e,t,a,o,c)}function wP({panelDataArray:e}){const t=Array(e.length),a=e.map(c=>c.constraints);let o=0,s=100;for(let c=0;c<e.length;c++){const d=a[c];Xe(d,`Panel constraints not found for index ${c}`);const{defaultSize:h}=d;h!=null&&(o++,t[c]=h,s-=h)}for(let c=0;c<e.length;c++){const d=a[c];Xe(d,`Panel constraints not found for index ${c}`);const{defaultSize:h}=d;if(h!=null)continue;const f=e.length-o,m=s/f;o++,t[c]=m,s-=m}return t}function Tr(e,t,a){t.forEach((o,s)=>{const c=e[s];Xe(c,`Panel data not found for index ${s}`);const{callbacks:d,constraints:h,id:f}=c,{collapsedSize:m=0,collapsible:R}=h,T=a[f];if(T==null||o!==T){a[f]=o;const{onCollapse:S,onExpand:I,onResize:C}=d;C&&C(o,T),R&&(S||I)&&(I&&(T==null||po(T,m))&&!po(o,m)&&I(),S&&(T==null||!po(T,m))&&po(o,m)&&S())}})}function ah(e,t){if(e.length!==t.length)return!1;for(let a=0;a<e.length;a++)if(e[a]!=t[a])return!1;return!0}function GP({defaultSize:e,dragState:t,layout:a,panelData:o,panelIndex:s,precision:c=3}){const d=a[s];let h;return d==null?h=e!=null?e.toPrecision(c):"1":o.length===1?h="1":h=d.toPrecision(c),{flexBasis:0,flexGrow:h,flexShrink:1,overflow:"hidden",pointerEvents:t!==null?"none":void 0}}function BP(e,t=10){let a=null;return(...s)=>{a!==null&&clearTimeout(a),a=setTimeout(()=>{e(...s)},t)}}function Kp(e){try{if(typeof localStorage<"u")e.getItem=t=>localStorage.getItem(t),e.setItem=(t,a)=>{localStorage.setItem(t,a)};else throw new Error("localStorage not supported in this environment")}catch(t){console.error(t),e.getItem=()=>null,e.setItem=()=>{}}}function Pb(e){return`react-resizable-panels:${e}`}function wb(e){return e.map(t=>{const{constraints:a,id:o,idIsFromProps:s,order:c}=t;return s?o:c?`${c}:${JSON.stringify(a)}`:JSON.stringify(a)}).sort((t,a)=>t.localeCompare(a)).join(",")}function Gb(e,t){try{const a=Pb(e),o=t.getItem(a);if(o){const s=JSON.parse(o);if(typeof s=="object"&&s!=null)return s}}catch{}return null}function FP(e,t,a){var o,s;const c=(o=Gb(e,a))!==null&&o!==void 0?o:{},d=wb(t);return(s=c[d])!==null&&s!==void 0?s:null}function jP(e,t,a,o,s){var c;const d=Pb(e),h=wb(t),f=(c=Gb(e,s))!==null&&c!==void 0?c:{};f[h]={expandToSizes:Object.fromEntries(a.entries()),layout:o};try{s.setItem(d,JSON.stringify(f))}catch(m){console.error(m)}}function Vp({layout:e,panelConstraints:t}){const a=[...e],o=a.reduce((c,d)=>c+d,0);if(a.length!==t.length)throw Error(`Invalid ${t.length} panel layout: ${a.map(c=>`${c}%`).join(", ")}`);if(!Fa(o,100)&&a.length>0)for(let c=0;c<t.length;c++){const d=a[c];Xe(d!=null,`No layout data found for index ${c}`);const h=100/o*d;a[c]=h}let s=0;for(let c=0;c<t.length;c++){const d=a[c];Xe(d!=null,`No layout data found for index ${c}`);const h=pr({panelConstraints:t,panelIndex:c,size:d});d!=h&&(s+=d-h,a[c]=h)}if(!Fa(s,0))for(let c=0;c<t.length;c++){const d=a[c];Xe(d!=null,`No layout data found for index ${c}`);const h=d+s,f=pr({panelConstraints:t,panelIndex:c,size:h});if(d!==f&&(s-=f-d,a[c]=f,Fa(s,0)))break}return a}const zP=100,iu={getItem:e=>(Kp(iu),iu.getItem(e)),setItem:(e,t)=>{Kp(iu),iu.setItem(e,t)}},Wp={};function Bb({autoSaveId:e=null,children:t,className:a="",direction:o,forwardedRef:s,id:c=null,onLayout:d=null,keyboardResizeBy:h=null,storage:f=iu,style:m,tagName:R="div",...T}){const S=ST(c),I=b.useRef(null),[C,_]=b.useState(null),[O,D]=b.useState([]),H=MP(),x=b.useRef({}),L=b.useRef(new Map),w=b.useRef(0),G=b.useRef({autoSaveId:e,direction:o,dragState:C,id:S,keyboardResizeBy:h,onLayout:d,storage:f}),B=b.useRef({layout:O,panelDataArray:[],panelDataArrayChanged:!1});b.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),b.useImperativeHandle(s,()=>({getId:()=>G.current.id,getLayout:()=>{const{layout:j}=B.current;return j},setLayout:j=>{const{onLayout:Z}=G.current,{layout:ae,panelDataArray:P}=B.current,q=Vp({layout:j,panelConstraints:P.map(se=>se.constraints)});Yp(ae,q)||(D(q),B.current.layout=q,Z&&Z(q),Tr(P,q,x.current))}}),[]),is(()=>{G.current.autoSaveId=e,G.current.direction=o,G.current.dragState=C,G.current.id=S,G.current.onLayout=d,G.current.storage=f}),kP({committedValuesRef:G,eagerValuesRef:B,groupId:S,layout:O,panelDataArray:B.current.panelDataArray,setLayout:D,panelGroupElement:I.current}),b.useEffect(()=>{const{panelDataArray:j}=B.current;if(e){if(O.length===0||O.length!==j.length)return;let Z=Wp[e];Z==null&&(Z=BP(jP,zP),Wp[e]=Z);const ae=[...j],P=new Map(L.current);Z(e,ae,P,O,f)}},[e,O,f]),b.useEffect(()=>{});const z=b.useCallback(j=>{const{onLayout:Z}=G.current,{layout:ae,panelDataArray:P}=B.current;if(j.constraints.collapsible){const q=P.map(Oe=>Oe.constraints),{collapsedSize:se=0,panelSize:fe,pivotIndices:Se}=Xl(P,j,ae);if(Xe(fe!=null,`Panel size not found for panel "${j.id}"`),!po(fe,se)){L.current.set(j.id,fe);const Ue=gr(P,j)===P.length-1?fe-se:se-fe,me=au({delta:Ue,initialLayout:ae,panelConstraints:q,pivotIndices:Se,prevLayout:ae,trigger:"imperative-api"});ah(ae,me)||(D(me),B.current.layout=me,Z&&Z(me),Tr(P,me,x.current))}}},[]),Q=b.useCallback((j,Z)=>{const{onLayout:ae}=G.current,{layout:P,panelDataArray:q}=B.current;if(j.constraints.collapsible){const se=q.map(De=>De.constraints),{collapsedSize:fe=0,panelSize:Se=0,minSize:Oe=0,pivotIndices:Ue}=Xl(q,j,P),me=Z??Oe;if(po(Se,fe)){const De=L.current.get(j.id),_e=De!=null&&De>=me?De:me,ve=gr(q,j)===q.length-1?Se-_e:_e-Se,Ye=au({delta:ve,initialLayout:P,panelConstraints:se,pivotIndices:Ue,prevLayout:P,trigger:"imperative-api"});ah(P,Ye)||(D(Ye),B.current.layout=Ye,ae&&ae(Ye),Tr(q,Ye,x.current))}}},[]),ce=b.useCallback(j=>{const{layout:Z,panelDataArray:ae}=B.current,{panelSize:P}=Xl(ae,j,Z);return Xe(P!=null,`Panel size not found for panel "${j.id}"`),P},[]),ue=b.useCallback((j,Z)=>{const{panelDataArray:ae}=B.current,P=gr(ae,j);return GP({defaultSize:Z,dragState:C,layout:O,panelData:ae,panelIndex:P})},[C,O]),te=b.useCallback(j=>{const{layout:Z,panelDataArray:ae}=B.current,{collapsedSize:P=0,collapsible:q,panelSize:se}=Xl(ae,j,Z);return Xe(se!=null,`Panel size not found for panel "${j.id}"`),q===!0&&po(se,P)},[]),ee=b.useCallback(j=>{const{layout:Z,panelDataArray:ae}=B.current,{collapsedSize:P=0,collapsible:q,panelSize:se}=Xl(ae,j,Z);return Xe(se!=null,`Panel size not found for panel "${j.id}"`),!q||hs(se,P)>0},[]),Ee=b.useCallback(j=>{const{panelDataArray:Z}=B.current;Z.push(j),Z.sort((ae,P)=>{const q=ae.order,se=P.order;return q==null&&se==null?0:q==null?-1:se==null?1:q-se}),B.current.panelDataArrayChanged=!0,H()},[H]);is(()=>{if(B.current.panelDataArrayChanged){B.current.panelDataArrayChanged=!1;const{autoSaveId:j,onLayout:Z,storage:ae}=G.current,{layout:P,panelDataArray:q}=B.current;let se=null;if(j){const Se=FP(j,q,ae);Se&&(L.current=new Map(Object.entries(Se.expandToSizes)),se=Se.layout)}se==null&&(se=wP({panelDataArray:q}));const fe=Vp({layout:se,panelConstraints:q.map(Se=>Se.constraints)});Yp(P,fe)||(D(fe),B.current.layout=fe,Z&&Z(fe),Tr(q,fe,x.current))}}),is(()=>{const j=B.current;return()=>{j.layout=[]}},[]);const he=b.useCallback(j=>{let Z=!1;const ae=I.current;return ae&&window.getComputedStyle(ae,null).getPropertyValue("direction")==="rtl"&&(Z=!0),function(q){q.preventDefault();const se=I.current;if(!se)return()=>null;const{direction:fe,dragState:Se,id:Oe,keyboardResizeBy:Ue,onLayout:me}=G.current,{layout:De,panelDataArray:_e}=B.current,{initialLayout:ge}=Se??{},ve=Hb(Oe,j,se);let Ye=PP(q,j,fe,Se,Ue,se);const Sn=fe==="horizontal";Sn&&Z&&(Ye=-Ye);const Si=_e.map(io=>io.constraints),pa=au({delta:Ye,initialLayout:ge??De,panelConstraints:Si,pivotIndices:ve,prevLayout:De,trigger:Nb(q)?"keyboard":"mouse-or-touch"}),ao=!ah(De,pa);(Cb(q)||bb(q))&&w.current!=Ye&&(w.current=Ye,!ao&&Ye!==0?Sn?HA(j,Ye<0?Db:yb):HA(j,Ye<0?vb:Mb):HA(j,0)),ao&&(D(pa),B.current.layout=pa,me&&me(pa),Tr(_e,pa,x.current))}},[]),M=b.useCallback((j,Z)=>{const{onLayout:ae}=G.current,{layout:P,panelDataArray:q}=B.current,se=q.map(De=>De.constraints),{panelSize:fe,pivotIndices:Se}=Xl(q,j,P);Xe(fe!=null,`Panel size not found for panel "${j.id}"`);const Ue=gr(q,j)===q.length-1?fe-Z:Z-fe,me=au({delta:Ue,initialLayout:P,panelConstraints:se,pivotIndices:Se,prevLayout:P,trigger:"imperative-api"});ah(P,me)||(D(me),B.current.layout=me,ae&&ae(me),Tr(q,me,x.current))},[]),K=b.useCallback((j,Z)=>{const{layout:ae,panelDataArray:P}=B.current,{collapsedSize:q=0,collapsible:se}=Z,{collapsedSize:fe=0,collapsible:Se,maxSize:Oe=100,minSize:Ue=0}=j.constraints,{panelSize:me}=Xl(P,j,ae);me!=null&&(se&&Se&&po(me,q)?po(q,fe)||M(j,fe):me<Ue?M(j,Ue):me>Oe&&M(j,Oe))},[M]),$=b.useCallback((j,Z)=>{const{direction:ae}=G.current,{layout:P}=B.current;if(!I.current)return;const q=vf(j,I.current);Xe(q,`Drag handle element not found for id "${j}"`);const se=Ub(ae,Z);_({dragHandleId:j,dragHandleRect:q.getBoundingClientRect(),initialCursorPosition:se,initialLayout:P})},[]),de=b.useCallback(()=>{_(null)},[]),y=b.useCallback(j=>{const{panelDataArray:Z}=B.current,ae=gr(Z,j);ae>=0&&(Z.splice(ae,1),delete x.current[j.id],B.current.panelDataArrayChanged=!0,H())},[H]),Y=b.useMemo(()=>({collapsePanel:z,direction:o,dragState:C,expandPanel:Q,getPanelSize:ce,getPanelStyle:ue,groupId:S,isPanelCollapsed:te,isPanelExpanded:ee,reevaluatePanelConstraints:K,registerPanel:Ee,registerResizeHandle:he,resizePanel:M,startDragging:$,stopDragging:de,unregisterPanel:y,panelGroupElement:I.current}),[z,C,o,Q,ce,ue,S,te,ee,K,Ee,he,M,$,de,y]),W={display:"flex",flexDirection:o==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return b.createElement(Of.Provider,{value:Y},b.createElement(R,{...T,children:t,className:a,id:c,ref:I,style:{...W,...m},[en.group]:"",[en.groupDirection]:o,[en.groupId]:S}))}const Fb=b.forwardRef((e,t)=>b.createElement(Bb,{...e,forwardedRef:t}));Bb.displayName="PanelGroup";Fb.displayName="forwardRef(PanelGroup)";function gr(e,t){return e.findIndex(a=>a===t||a.id===t.id)}function Xl(e,t,a){const o=gr(e,t),c=o===e.length-1?[o-1,o]:[o,o+1],d=a[o];return{...t.constraints,panelSize:d,pivotIndices:c}}function YP({disabled:e,handleId:t,resizeHandler:a,panelGroupElement:o}){b.useEffect(()=>{if(e||a==null||o==null)return;const s=vf(t,o);if(s==null)return;const c=d=>{if(!d.defaultPrevented)switch(d.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{d.preventDefault(),a(d);break}case"F6":{d.preventDefault();const h=s.getAttribute(en.groupId);Xe(h,`No group element found for id "${h}"`);const f=Au(h,o),m=xb(h,t,o);Xe(m!==null,`No resize element found for id "${t}"`);const R=d.shiftKey?m>0?m-1:f.length-1:m+1<f.length?m+1:0;f[R].focus();break}}};return s.addEventListener("keydown",c),()=>{s.removeEventListener("keydown",c)}},[o,e,t,a])}function jb({children:e=null,className:t="",disabled:a=!1,hitAreaMargins:o,id:s,onBlur:c,onClick:d,onDragging:h,onFocus:f,onPointerDown:m,onPointerUp:R,style:T={},tabIndex:S=0,tagName:I="div",...C}){var _,O;const D=b.useRef(null),H=b.useRef({onClick:d,onDragging:h,onPointerDown:m,onPointerUp:R});b.useEffect(()=>{H.current.onClick=d,H.current.onDragging=h,H.current.onPointerDown=m,H.current.onPointerUp=R});const x=b.useContext(Of);if(x===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:L,groupId:w,registerResizeHandle:G,startDragging:B,stopDragging:z,panelGroupElement:Q}=x,ce=ST(s),[ue,te]=b.useState("inactive"),[ee,Ee]=b.useState(!1),[he,M]=b.useState(null),K=b.useRef({state:ue});is(()=>{K.current.state=ue}),b.useEffect(()=>{if(a)M(null);else{const Y=G(ce);M(()=>Y)}},[a,ce,G]);const $=(_=o?.coarse)!==null&&_!==void 0?_:15,de=(O=o?.fine)!==null&&O!==void 0?O:5;b.useEffect(()=>{if(a||he==null)return;const Y=D.current;Xe(Y,"Element ref not attached");let W=!1;return yP(ce,Y,L,{coarse:$,fine:de},(Z,ae,P)=>{if(!ae){te("inactive");return}switch(Z){case"down":{te("drag"),W=!1,Xe(P,'Expected event to be defined for "down" action'),B(ce,P);const{onDragging:q,onPointerDown:se}=H.current;q?.(!0),se?.();break}case"move":{const{state:q}=K.current;W=!0,q!=="drag"&&te("hover"),Xe(P,'Expected event to be defined for "move" action'),he(P);break}case"up":{te("hover"),z();const{onClick:q,onDragging:se,onPointerUp:fe}=H.current;se?.(!1),fe?.(),W||q?.();break}}})},[$,L,a,de,G,ce,he,B,z]),YP({disabled:a,handleId:ce,resizeHandler:he,panelGroupElement:Q});const y={touchAction:"none",userSelect:"none"};return b.createElement(I,{...C,children:e,className:t,id:s,onBlur:()=>{Ee(!1),c?.()},onFocus:()=>{Ee(!0),f?.()},ref:D,role:"separator",style:{...y,...T},tabIndex:S,[en.groupDirection]:L,[en.groupId]:w,[en.resizeHandle]:"",[en.resizeHandleActive]:ue==="drag"?"pointer":ee?"keyboard":void 0,[en.resizeHandleEnabled]:!a,[en.resizeHandleId]:ce,[en.resizeHandleState]:ue})}jb.displayName="PanelResizeHandle";const zb=navigator.userAgent.indexOf("Firefox")>=0,Xi="XIVShell Defaults, , sans-serif",KP=3,pe={rulerHeight:30,trackHeight:14,slotPaddingTop:4,damageMarkerHeight:8,skillButtonHeight:28,buffCoverHeight:4,slotPaddingBottom:4,renderSlotHeight:()=>pe.slotPaddingTop+pe.damageMarkerHeight+pe.skillButtonHeight*1.5+pe.buffCoverHeight*KP+pe.slotPaddingBottom,timelineCanvasHeight:(e,t)=>{let a=pe.rulerHeight;return a+=pe.trackHeight*e,a+=pe.renderSlotHeight()*t,t<pi&&(a+=pe.addSlotButtonHeight),a},leftBufferWidth:20,addSlotButtonHeight:20},VP={drawMarkers:!0,drawDamageMarks:!0,drawHealingMarks:!0,drawMPTickMarks:!0,drawBuffIndicators:!0};function WP(e){const t=new Blob([JSON.stringify(e)],{type:"text/plain;charset=utf-8"});return window.URL.createObjectURL(t)}function XP(e){let t="";e.meta?.forEach(o=>{t+="#"+o.toString()+`
`}),e.body.forEach(o=>{for(let s=0;s<o.length;s++)t+=o[s].toString(),s<o.length-1&&(t+=",");t+=`
`});const a=new Blob([t],{type:"text/csv;charset=utf-8"});return window.URL.createObjectURL(a)}var Oo=(e=>(e.Json="JSON",e.Csv="CSV",e.Png="PNG",e))(Oo||{});function El(e){const[t,a]=b.useState({jsonContent:{},csvContent:{body:[]},pngContent:void 0}),o=()=>{const c=e.getContentFn();e.fileFormat==="JSON"?a({jsonContent:c}):e.fileFormat==="CSV"?a({csvContent:c}):e.fileFormat==="PNG"?a({pngContent:c}):console.assert(!1)};let s="";return e.fileFormat==="JSON"?s=WP(t.jsonContent):e.fileFormat==="CSV"?s=XP(t.csvContent):e.fileFormat==="PNG"?s=t.pngContent?.toDataURL()??"":console.assert(!1),l.jsx("a",{style:{color:bt().fileDownload,marginRight:6},href:s,download:e.filename,onClick:()=>o(),onContextMenu:()=>o(),children:`[${e.displayName===void 0?"download":e.displayName}]`})}function qP(e,t=a=>{console.log(a)}){const a=new FileReader;a.onload=function(o){const s=o.target?.result?.toString()??"";let c;try{c=JSON.parse(s)}catch(d){window.alert(g({en:"Parse error! Are you sure this is the correct file? This tool only reads text files in JSON format.",zh:"- JSON"})),console.error(d)}t(c)},a.readAsText(e,"UTF-8")}const Ze={positionFromTimeAndScale:function(e,t){return e*t*100},timeFromPositionAndScale:function(e,t){return e/(t*100)},displayTime:function(e,t){const a=Math.abs(e),o=Math.floor(a/60),s=a-60*o;return(e<0?"-":"")+o.toString()+":"+(s+An.epsilon<10?"0":"")+s.toFixed(t).toString()}},ZP=function(e){console.log("[asyncFetch] some error occurred")},Xp=new Map;function Yb(e,t,a=ZP){const o=Xp.get(e);if(o){t(o);return}const s=new XMLHttpRequest;s.addEventListener("error",a),s.addEventListener("load",c=>{t(s.responseText),Xp.set(e,s.responseText)}),s.open("GET",e),s.send()}function zi(e){const t=e.trim();let a=1;e[0]==="-"&&(a=-1,e=e.substring(1));const o=t.indexOf(":");if(o<0)return parseFloat(t);const s=parseInt(t.substring(0,o)),c=parseFloat(t.substring(o+1));return a*(s*60+c)}function fs(e){return l.jsx("div",{className:"clickable",onClick:e.onClickFn,style:e.style,children:e.content})}function QP(e){const a={position:"relative",display:"inline-block",verticalAlign:"top",border:"1px solid "+bt().bgHighContrast,borderRadius:4,height:8,top:e.offsetY,width:e.width},o={background:`${e.backgroundColor}`,height:"100%",borderRadius:"inherit",width:`${e.progress*100}%`};return l.jsx("div",{style:a,children:l.jsx("div",{style:o})})}const Nr=26;function Kb(e){const t=Nr-2,[a,o]=ha.useState(void 0);b.useEffect(()=>{let f=e.defaultSelectedIndex;const m=Rt("tabs: "+e.uniqueName);m!==null&&(m==="none"?f=void 0:f=parseInt(m)),o(f)},[e.defaultSelectedIndex,e.uniqueName]);const s=bt(),c=function(f){const R="1px solid "+(f===a?s.bgHighContrast:s.bgMediumContrast),T="1px solid "+s.background;let S=R;(f===a||a===void 0)&&(S=T);const I=f===a?R:T;let C=T,_=T;return f===a?(C=R,_=R):f>0&&(a===void 0||a+1!==f)&&(C=R),{margin:0,display:"inline-block",boxSizing:"border-box",padding:"0 12px",borderBottom:S,borderTop:I,borderLeft:C,borderRight:_,lineHeight:`${t}px`,color:f===a?s.emphasis:s.text,cursor:e.collapsible||f!==a?"pointer":"default"}},d=[],h=[];for(let f=0;f<e.content.length;f++){const m=e.content[f],R=f===a;d.push(l.jsx("span",{style:c(f),onClick:()=>{let S=a;R?e.collapsible&&(S=void 0):S=f,o(S),Tt("tabs: "+e.uniqueName,S===void 0?"none":`${S}`)},children:m.titleNode},f));const T={display:R?"block":"none"};e.maxWidth!==void 0&&(T.maxWidth=e.maxWidth),h.push(l.jsx("div",{style:T,children:m.contentNode},f))}return e.collapsible&&a!==void 0&&d.push(l.jsx("span",{onClick:()=>{o(void 0),Tt("tabs: "+e.uniqueName,"none")},children:l.jsx(RP,{style:{marginLeft:16,fontSize:14,cursor:"pointer",position:"relative",top:3}})},d.length)),l.jsxs("div",{style:{position:"relative",...e.style},children:[l.jsx("div",{children:d}),l.jsx("div",{className:e.scrollable?"visibleScrollbar":void 0,style:{display:a===void 0?"none":"block",height:e.height-Nr,boxSizing:"border-box",padding:`10px ${zb?15:5}px`,overflowY:e.scrollable?"scroll":"hidden"},children:h})]})}function gT(e){const t=bt(),a=[];for(let o=0;o<e.children.length;o++){const s=e.children[o],c=o<e.children.length-1?e.children[o+1]:void 0;if(a.push(l.jsxs(pb,{className:s.showScrollbar?"visibleScrollbar":"invisibleScrollbar",defaultSize:s.defaultSize,minSize:s.minSize??20,style:{border:s.fullBorder===!0?`1px solid ${t.bgMediumContrast}`:void 0,boxSizing:"border-box",height:e.contentHeight,overflowY:"scroll"},children:[s.title?l.jsx("div",{style:{marginBottom:10},children:l.jsx("b",{children:s.title})}):void 0,s.content]},`column-${o}`)),o<e.children.length-1){const h=s.fullBorder===!0||c!==void 0&&c.fullBorder===!0?{margin:"0 5px"}:{borderLeft:"1px solid "+t.bgMediumContrast,margin:"0 15px 0 10px"};a.push(l.jsx(jb,{style:h},`divider-${o}`))}}return l.jsx(Fb,{direction:"horizontal",children:a})}function Bt(e){const t=d=>{e.onChange&&e.onChange(d.target.value)},a=bt(),o=e.fullWidthInput?void 0:e.width??5,s={color:e.style?.color??e.componentColor??a.text,backgroundColor:"transparent",outline:"none",border:"none",borderBottom:"1px solid "+(e.componentColor??a.text),width:e.fullWidthInput?"100%":void 0},c=e.style??{};return l.jsxs("div",{style:{...c,color:e.componentColor},children:[l.jsx("span",{children:e.description}),l.jsx("input",{style:s,size:o,type:"text",value:e.defaultValue,onChange:t,onKeyDown:d=>d.stopPropagation(),autoFocus:e.autoFocus,placeholder:e.placeholder})]})}function JP(e){const t=e.description??"default description",[a,o]=b.useState(e.defaultValue??""),s=c=>{o(c.target.value),e.onChange&&e.onChange(c.target.value),Tt("slider: "+e.uniqueName,c.target.value)};return b.useEffect(()=>{let c=a;const d=Rt("slider: "+e.uniqueName);d!==null&&(c=d,o(d)),e.onChange&&e.onChange(c)},[]),l.jsxs("div",{style:{display:"inline-block",...e.style},children:[l.jsx("span",{children:t??""}),l.jsx("input",{size:10,type:"range",value:a,min:.05,max:1,step:.025,onChange:s,style:{position:"relative",outline:"none"}})]})}function Vb(e){const t=Rt(`radio: ${e.uniqueName}`)??e.selected??e.options[0][0],[a,o]=b.useState(t);b.useEffect(()=>{e.selected!==void 0&&(o(e.selected),Tt(`radio: ${e.uniqueName}`,e.selected),e.onChange(e.selected))},[e.selected]);const s={position:"relative",top:3,marginRight:"0.25em"},c=e.options.map(([d,h])=>l.jsxs("div",{style:s,children:[l.jsx("input",{type:"radio",id:d,name:e.uniqueName,value:d,checked:a===d,onChange:()=>{o(d),Tt(`radio: ${e.uniqueName}`,d),e.onChange(d)}}),l.jsxs("label",{htmlFor:d,style:{verticalAlign:"top"},children:[" ",h]})]},d));return l.jsx("div",{style:e.containerStyle,children:c})}function ou(e){const[t,a]=b.useState(!1);return b.useEffect(()=>{let o=e.defaultChecked??!0;const s=Rt("checked: "+e.uniqueName);s!==null&&(o=parseInt(s)>0),a(o),e.onChange(o)},[]),l.jsxs("div",{style:{marginBottom:5},children:[l.jsx("input",{className:"shellCheckbox",type:"checkbox",onChange:o=>{const s=o.currentTarget.checked;a(s),Tt("checked: "+e.uniqueName,s?"1":"0"),e.onChange(s)},checked:t}),l.jsx("span",{children:e.label})]})}function ml(e){const[t,a]=b.useState(e.defaultShow??!1),o=e.autoIndent??!0,s=()=>{const d=!t;a(d),e.onExpand&&d&&e.onExpand(),e.onCollapse&&!d&&e.onCollapse(),Tt("exp: "+e.title,(d?1:0).toString())};b.useEffect(()=>{const d=Rt("exp: "+e.title);d!==null&&a(parseInt(d)===1)},[]);const c=o?{margin:10,paddingLeft:6,marginBottom:20}:{};return l.jsxs("div",{style:e.noMargin?{}:{marginTop:10,marginBottom:10},children:[l.jsx(fs,{content:l.jsxs("span",{children:[l.jsx("span",{children:t?"- ":"+ "}),e.titleNode??e.title]}),onClickFn:s}),l.jsx("div",{style:{position:"relative",display:t?"block":"none",marginTop:e.titleBodyGap},children:l.jsx("div",{style:c,children:e.content})})]})}function Wh(e){const t=b.useRef(null);let a=e.defaultLoadUrl??"";const o=f=>{f.target&&(a=f.target.value)},s=()=>{const f=t.current;if(f&&f.files&&f.files.length>0){const m=f.files[0];qP(m,R=>e.onLoadFn(R)),f.value=""}},c=()=>{const f=function(m){console.log("some error occurred")};Yb(a,m=>{try{const R=JSON.parse(m);e.onLoadFn(R)}catch{f()}},m=>{f()})},d=bt(),h={color:d.text,background:"transparent",outline:"none",border:"none",borderBottom:"1px solid "+d.text,width:"30em"};return l.jsxs("div",{children:[l.jsxs("div",{children:[l.jsx("span",{children:e.label??g({en:"Load from file: ",zh:""})}),l.jsx("input",{style:{width:"110px",color:"transparent"},type:"file",ref:t,onChange:s})]}),e.allowLoadFromUrl?l.jsxs("form",{children:[l.jsx("span",{children:g({en:"Load from URL: ",zh:"URL"})}),l.jsx("input",{defaultValue:a,style:h,onChange:o}),l.jsx("span",{children:" "}),l.jsx("button",{type:"submit",onClick:f=>{c(),f.preventDefault()},children:g({en:"load",zh:""})})]}):void 0]})}function Ma(e){const t=bt();return l.jsx("span",{style:{fontSize:11,border:"1px solid "+t.bgHighContrast,borderRadius:2,padding:"1px 4px",background:t.bgLowContrast},children:e.text})}const $P=100;function Fe(e){const a={display:"inline-block",position:"relative",width:12,height:12,lineHeight:1,cursor:"help",background:bt().bgHighContrast,borderRadius:6,textAlign:"center",verticalAlign:"middle"},o=b.useRef(0),[s,c]=b.useState(!1);return l.jsxs(sb,{delay:0,open:s,children:[l.jsx("span",{id:`help-${e.topic}`,className:"help-icon global-help-tooltip",style:a,"data-tooltip-offset":4,onMouseEnter:()=>{const d=Date.now();d-o.current>$P&&c(!0),o.current=d},onMouseLeave:()=>c(!1),children:l.jsx("span",{style:{position:"relative",top:-1,color:"white"},children:"?"})}),l.jsx(Eb,{container:e.container??document.getElementById("globalHelpTooltipAnchor"),children:l.jsx(Rb,{className:"tooltip-positioner",anchor:document.getElementById(`help-${e.topic}`),children:l.jsx(Tb,{className:"help-tooltip tooltip",children:e.content})})})]})}const Xh="3f";let Ru=()=>{},Zn=()=>({isValid:!1,invalidActions:[],skillUseTimes:[],straightenedIfValid:void 0}),lu=e=>{e()};const Wb=b.createContext(e=>({drop:t=>{},setSelected:t=>{}})),os=e=>({borderColor:e.bgMediumContrast,borderWidth:"1px",borderStyle:"solid"}),Mr={width:"1.5%",textAlign:"right",paddingRight:"0.3em",paddingLeft:"0.3em"},al={width:"12%",textAlign:"right",paddingRight:"0.3em",paddingLeft:"0.3em"},Xb={width:"86.5%",textAlign:"left",paddingLeft:"0.3em"},qb={width:"100%",height:"1.6em",userSelect:"none",outline:"none"},Zb=e=>({borderTopWidth:"4px",borderTopStyle:"solid",borderColor:e.dropTarget});function fR(e){return(e??0)+1}function ew(e){const t=bt();let a=e.index%2===1?t.timelineEditor.bgAlternateRow:"transparent";e.isSelected&&(a="rgba(151,111,246,0.25)"),e.recordIsDirty&&e.isSelected&&(a=t.editingValid+Xh);let o=g({en:"(other)",zh:""});if(e.node.info.type===ze.Skill){const T=e.node.info.targetCount>1?g({en:` (${e.node.info.targetCount} targets)`,zh:`${e.node.info.targetCount}`}):"";o=e.node.info.skillName?fi(e.node.info.skillName)+T:g({en:"(unknown skill)",zh:""})}else if(e.node.info.type===ze.Wait)o=g({en:"(wait for "+e.node.info.waitDuration.toFixed(3)+"s)",zh:""+e.node.info.waitDuration.toFixed(3)+""});else if(e.node.info.type===ze.JumpToTimestamp)o=g({en:"(jump to time "+Ze.displayTime(e.node.info.targetTime,3)+")",zh:" "+Ze.displayTime(e.node.info.targetTime,3)+""});else if(e.node.info.type===ze.WaitForMP)o=g({en:"(wait until MP/lucid tick)",zh:"/"});else if(e.node.info.type===ze.SetResourceEnabled){const T=Ke(e.node.info.buffName);o=g({en:"(toggle resource: "+T+")",zh:"BUFF"+T+""})}else e.node.info.type===ze.Unknown&&(o=e.node.info.skillName);const s=l.jsxs("td",{style:{...Xb,...os(t)},children:[e.isInvalid?l.jsx("span",{style:{marginRight:6,padding:"0 4px",backgroundColor:t.editingInvalid+Xh},children:""}):void 0,l.jsx("span",{children:o})]}),c=e.includeDetails?l.jsx("td",{style:{...Mr,...os(t)},children:fR(e.index)}):void 0,d=e.includeDetails?l.jsx("td",{style:{...al,...os(t)},children:Ze.displayTime(e.usedAt,3)}):void 0,h=b.useContext(Zf),f=h.dragTargetIndex===e.index,m=b.useContext(Pu),R=b.useContext(Wb)(e.index);return l.jsxs("tr",{style:{...qb,background:a,...f?Zb(t):{}},ref:e.refObj??null,draggable:!m.value,onDragStart:T=>{R.setSelected(!0),e.isSelected||p.timeline.onClickTimelineAction(e.index,!1)},onDragLeave:T=>{h.setDragTarget(null,null)},onDrop:T=>{R.drop(T),h.setDragTarget(null,null)},onDragOver:T=>{T.preventDefault();let S=e.usedAt;const I=e.index>0?p.record.actions[e.index-1]:void 0;I?.tmp_endLockTime!==void 0&&e.node.info.type===ze.Skill&&dl(p.game.job,e.node.info.skillName).cdName==="cd_GCD"&&(S=I.tmp_endLockTime-p.gameConfig.countdown),h.setDragTarget(e.index,S)},onClick:T=>{R.setSelected(!0),e.recordIsDirty?p.timeline.onClickTimelineAction(e.index,T.shiftKey):(p.timeline.onClickTimelineAction(e.index,T.shiftKey),e.node.tmp_startLockTime!==void 0&&p.scrollToTime(e.node.tmp_startLockTime))},tabIndex:-1,onKeyDown:e.onKeyDown,children:[c,d,s]})}let pT=()=>{},Qb=()=>{};function tw(){const e=bt(),t=b.useRef(null),a=b.useRef(null),[o,s]=b.useState(!1),[c,d]=b.useState(void 0),[h,f]=b.useState(void 0),[,m]=b.useReducer(y=>y+1,0),R=b.useRef(!1),T=b.useRef(void 0);b.useEffect(()=>(Ru=()=>{m()},Zn=()=>{const y=p.checkRecordValidity(p.record,0,!0);return d(y),y},lu=y=>{o&&T.current&&(p.record=T.current,p.checkRecordValidity(p.record,0,!0)),y(),s(!1),T.current=p.record,d(p.checkRecordValidity(p.record,0,!0))},pT=()=>{setTimeout(()=>{t.current?.scrollIntoView({behavior:"smooth",block:"nearest"})},0)},Qb=()=>{setTimeout(()=>{(p.record.getSelectionLength()===1?t:a).current?.scrollIntoView({behavior:"smooth",block:"nearest"})},0)},d(p.checkRecordValidity(p.record,0,!0)),()=>{Ru=()=>{}}),[]);const S=c&&c.isValid,I=y=>{y&&T.current&&(p.record=T.current),s(!1),d(p.checkRecordValidity(p.record,0,!0)),f(void 0)},C=5,_=()=>l.jsx("button",{style:{display:"block",marginTop:10,marginLeft:C},onClick:y=>{R.current=!0,o||console.error("attempted to discard edits while timeline editor was not dirty"),I(!0)},children:g({en:"discard changes",zh:""})}),O=()=>(o||(T.current=p.record,p.record=p.record.getCloneWithSharedConfig(),s(!0)),p.record),D=(y,Y)=>{const W=y?.node,j=y?.index,Z=y?.reason,ae=Oi()==="en",P=(Oe,Ue)=>ae?Oe:Ue;let q=P("(unknown node)","");if(W)if(W.info.type===ze.Wait)q=P("(Wait)","");else if(W.info.type===ze.JumpToTimestamp)q=P("(Jump to time)","");else if(W.info.type===ze.WaitForMP)q=P("(Wait for MP/lucid tick)","/");else if(W.info.type===ze.SetResourceEnabled){const Oe=Ke(W.info.buffName);q=P("(Toggle resource "+Oe+")","BUFF "+Oe+"")}else W.info.type===ze.Skill?q=W.info.skillName?fi(W.info.skillName):P("(unknown skill)",""):W.info.type===ze.Unknown&&(q=W.info.skillName);let se;const fe=j!==void 0?c?.skillUseTimes[j]:void 0,Se=Z?.unavailableReasons.map(ts).join(P("; ",""))??ts(void 0);if(Y?se=P(`This sequence contains invalid actions! Check action #${fR(j)}: ${q}`,`${fR(j)} ${q}`):se=P(`This action is invalid! ${q}`,` ${q}`),fe!==void 0){const Oe=Ze.displayTime(fe,3);se+=` @ ${Oe}`+P(".","")}return{en:l.jsxs(l.Fragment,{children:[se,l.jsx("br",{}),l.jsx("br",{}),"Reason: ",Se]}),zh:l.jsxs(l.Fragment,{children:[se,l.jsx("br",{}),l.jsx("br",{}),"",Se]})}},H={padding:"0.3em"},x=()=>{if(o)return l.jsxs("div",{children:[l.jsx("div",{style:{...H,backgroundColor:(S?e.editingValid:e.editingInvalid)+Xh},children:g(S?{en:"This edited sequence is valid.",zh:""}:D(c?.invalidActions[0],!0))}),l.jsx("button",{style:{display:"block",marginTop:10,marginLeft:C},onClick:y=>{R.current=!0,o?p.applyEditedRecord():console.error("attempted to apply edits while timeline editor was not dirty"),I(!1),p.displayCurrentState()},children:g({en:"apply changes to timeline and save",zh:""})}),_()]});if(S)return l.jsx("div",{style:H,children:g({en:"Timeline is up to date.",zh:""})});{const y=new Map;c?.invalidActions.forEach(ae=>y.set(ae.index,ae));const Y=c?.invalidActions[0];let W=Y,j=!0;const Z=p.record;if(Y!==void 0&&Z.selectionStartIndex!==void 0){const ae=c?.invalidActions.find(q=>Z.isInSelection(q.index)),P=Z.getSelectionLength();P===1&&ae!==void 0?(W=y.get(Z.selectionStartIndex),j=!1):P>1&&ae!==void 0&&(W=ae)}return l.jsx("div",{children:l.jsx("div",{style:{...H,backgroundColor:e.editingInvalid+Xh},children:g(D(W,j))})})}},L={display:"block",width:"100%",padding:3},w=y=>{if(p.record.getFirstSelection()){R.current=!0;const Y=O();let W=h;const j=y(Y);j!==void 0&&(W===void 0?W=j:W=Math.min(j,W));const Z=p.checkRecordValidity(Y,W);j!==void 0&&Z.straightenedIfValid?(p.record=Z.straightenedIfValid,f(void 0)):f(W),d(Z),vo()}},G=p.undoStack.peekUndoMessage(),B=p.undoStack.peekRedoMessage(),z=l.jsxs("div",{style:{marginBottom:6,flex:1,display:"flex",flexDirection:"column",gap:10},children:[l.jsx("button",{style:L,onClick:y=>w(Y=>(p.undoStack.push(new Eh(Y.selectionStartIndex,Y.getSelectionLength(),-1)),Y.moveSelected(-1))),children:g({en:"move up",zh:""})}),l.jsx("button",{style:L,onClick:y=>w(Y=>(p.undoStack.push(new Eh(Y.selectionStartIndex,Y.getSelectionLength(),1)),Y.moveSelected(1))),children:g({en:"move down",zh:""})}),l.jsx("button",{style:L,onClick:y=>w(Y=>(p.undoStack.push(new Cr(Y.selectionStartIndex,Y.getSelected().actions,"delete")),Y.deleteSelected())),children:g({en:"delete selected",zh:""})}),l.jsx("button",{style:L,onClick:y=>{const Y=p.record.getSelectionLength();Y>1&&w(W=>{const j=W.selectionStartIndex,Z=W.selectionEndIndex;return p.undoStack.push(new Eh(Z,1,-(Y-1))),W.selectSingle(Z),W.moveSelected(-(Y-1)),W.selectSingle(j),W.selectUntil(Z),W.selectionStartIndex})},children:g({en:l.jsxs(l.Fragment,{children:["move end of selection",l.jsx("br",{}),"to start of selection"]}),zh:l.jsxs(l.Fragment,{children:["",l.jsx("br",{}),""]})})}),l.jsx("hr",{style:{backgroundColor:e.bgLowContrast,height:2,marginTop:-2,marginBottom:-2,border:0,width:"100%"}}),l.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:6},children:[l.jsx("button",{style:L,onClick:ER,disabled:p.record.getSelectionLength()===0,children:g({en:"copy ",zh:""})}),l.jsx("button",{style:L,onClick:a0,children:g({en:"paste ",zh:""})})]}),l.jsxs("button",{style:L,onClick:()=>p.undoStack.undo(),disabled:G===void 0,children:[g({en:"undo ",zh:""}),g(G??{en:""})]}),l.jsxs("button",{style:L,onClick:()=>p.undoStack.redo(),disabled:B===void 0,children:[g({en:"redo ",zh:""}),g(B??{en:""})]})]}),Q=y=>{const Y=p.record.selectionStartIndex;Y!==void 0&&(y.key==="Backspace"||y.key==="Delete"?w(j=>(p.undoStack.push(new Cr(Y,j.getSelected().actions,"delete")),j.deleteSelected())):(p.handleTimelineKeyboardEvent(y),y.key==="Escape"&&he.setDragTarget(null,null)))},ce=!0,ue=[],te=new Set(c?.invalidActions.map(y=>y.index));p.record.actions.forEach((y,Y)=>{const W=!o&&Y===p.record.selectionStartIndex,j=!o&&Y===p.record.selectionEndIndex;ue.push(l.jsx(ew,{index:Y,node:y,isSelected:p.record.isInSelection(Y),recordIsDirty:o,isInvalid:te.has(Y),usedAt:c?.skillUseTimes[Y]??0,includeDetails:ce,onKeyDown:Q,refObj:W?t:j?a:void 0},Y))});const ee=y=>({drop:Y=>{const W=p.record.selectionStartIndex??0;let j=y-(W??0);j>0&&(j-=p.record.getSelectionLength()),j!==0&&w(Z=>Z.moveSelected(j))},setSelected:Y=>{R.current=Y}}),Ee=b.useContext(Pu),he=b.useContext(Zf),M=ue.length,K=ee(M),$=he.dragTargetIndex===M;M>0&&ue.push(l.jsxs("tr",{tabIndex:-1,style:{height:"0.8em",background:e.timelineEditor.headerFooter,userSelect:"none",...$?Zb(e):{}},draggable:!Ee.value,onDragStart:y=>y.preventDefault(),onDragLeave:y=>{he.setDragTarget(null,null)},onDrop:y=>{K.drop(y),he.setDragTarget(null,null)},onDragOver:y=>{y.preventDefault(),he.setDragTarget(M,p.game.getDisplayTime())},children:[l.jsx("td",{style:{border:"none"}}),l.jsx("td",{style:{border:"none"}}),l.jsx("td",{style:{border:"none"}})]},M));const de={backgroundColor:e.timelineEditor.headerFooter};return l.jsx("div",{onClick:y=>{!y.shiftKey&&!R.current&&(p.record.unselectAll(),p.displayCurrentState()),R.current=!1},children:l.jsx(gT,{contentHeight:nS,children:[{content:z,defaultSize:20},{content:l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:Mr.paddingLeft},children:[l.jsxs("table",{style:{position:"relative",width:"100%",borderCollapse:"collapse",borderColor:e.bgMediumContrast,borderWidth:"1px",borderStyle:"solid"},children:[l.jsx("thead",{children:l.jsxs("tr",{style:qb,children:[l.jsx("th",{className:"stickyTh",style:{...de,...Mr,...os(e)},children:"#"}),l.jsx("th",{className:"stickyTh",style:{...de,...al,...os(e)},children:g({en:"Time",zh:""})}),l.jsx("th",{className:"stickyTh",style:{...de,...Xb,...os(e)},children:g({en:"Actions",zh:""})})]})}),l.jsx("tbody",{children:l.jsx(Wb.Provider,{value:ee,children:ue})})]}),M===0&&l.jsx("span",{style:{paddingLeft:Mr.paddingLeft,fontStyle:"italic"},children:g({en:"No actions to display yet.",zh:""})})]}),defaultSize:40,fullBorder:!0,showScrollbar:!0},{content:x(),defaultSize:40,fullBorder:!0}]})})}const nw=30;class aw{actions;cursor;constructor(){this.cursor=0,this.actions=[]}clear(){this.cursor=0,this.actions=[]}get length(){return this.actions.length}push(t){this.actions.splice(this.cursor,this.actions.length-this.cursor,t),this.actions.length>nw&&this.actions.shift(),this.cursor=this.actions.length}doThenPush(t){t.redo(),this.push(t)}emitLog(...t){}undo(){this.cursor>0?(this.actions[--this.cursor].undo(),this.emitLog("UNDO",this.actions[this.cursor])):this.emitLog("nothing to undo")}redo(){this.cursor<this.actions.length?(this.emitLog("REDO",this.actions[this.cursor]),this.actions[this.cursor++].redo()):this.emitLog("nothing to redo")}peekUndoMessage(){return this.cursor>0?this.actions[this.cursor-1].message:void 0}peekRedoMessage(){return this.cursor<this.actions.length?this.actions[this.cursor].message:void 0}}class yi{message;constructor(t){this.message=t}}function NT(e){return e>0?"actions":"action"}class ql extends yi{node;index;constructor(t,a){super({en:"add action",zh:""}),this.node=t,this.index=a}undo(){p.record.selectSingle(this.index),p.deleteSelectedSkills()}redo(){p.insertRecordNode(this.node,this.index)}}class Eh extends yi{startIndex;selectCount;offset;constructor(t,a,o){super({en:`move ${a} ${NT(a)}`,zh:`${a}`}),this.startIndex=t,this.selectCount=a,this.offset=o}undo(){p.record.selectSingle(this.startIndex+this.offset),p.record.selectUntil(this.startIndex+this.selectCount+this.offset-1),p.record.moveSelected(-this.offset),p.autoSave(),Zn()}redo(){p.record.selectSingle(this.startIndex),p.record.selectUntil(this.startIndex+this.selectCount-1),p.record.moveSelected(this.offset),p.autoSave(),Zn()}}class Cr extends yi{startIndex;nodes;source;constructor(t,a,o){super({en:`${o} ${a.length} ${NT(a.length)}`,zh:`${o==="delete"?"":""}${a.length}`}),this.startIndex=t,this.nodes=a,this.source=o}undo(){p.insertRecordNodes(this.nodes,this.startIndex)}redo(){p.record.selectSingle(this.startIndex),p.record.selectUntil(this.startIndex+this.nodes.length-1),p.deleteSelectedSkills(),Zn()}}class CT extends yi{nodes;index;source;constructor(t,a,o){super({en:o==="preset"?"add preset sequence":`paste ${t.length} ${NT(t.length)}`,zh:o==="preset"?"":`${t.length}`}),this.nodes=t,this.index=a,this.source=o}undo(){p.record.selectSingle(this.index),p.record.selectUntil(this.index+this.nodes.length-1),p.deleteSelectedSkills()}redo(){p.insertRecordNodes(this.nodes,this.index)}}class iw extends yi{nodes;index;oldConfig;newConfig;constructor(t,a,o,s){super({en:"import from fflogs",zh:"fflogs"}),this.nodes=t,this.index=a,this.oldConfig=o,this.newConfig=s}undo(){p.record.selectSingle(this.index),p.record.selectUntil(this.index+this.nodes.length-1),p.deleteSelectedSkills(),p.setConfigAndRestart(this.oldConfig,!1),p.updateAllDisplay(),p.scrollToTime()}redo(){p.insertRecordNodes(this.nodes,this.index),p.setConfigAndRestart(this.newConfig,!1),p.updateAllDisplay(),p.scrollToTime()}}class ow extends yi{oldIndex;newIndex;constructor(t,a){super({en:"change active slot",zh:""}),this.oldIndex=t,this.newIndex=a}undo(){p.setActiveSlot(this.oldIndex),p.displayCurrentState()}redo(){p.setActiveSlot(this.newIndex),p.displayCurrentState()}}class lw extends yi{deleteIndex;deletedRecord;constructor(t,a){super({en:"delete slot",zh:""}),this.deleteIndex=t,this.deletedRecord=a}undo(){p.timeline.addSlotAtIndex(this.deleteIndex),p.loadBattleRecordFromFile(this.deletedRecord),p.autoSave(),p.displayCurrentState()}redo(){p.timeline.removeSlot(this.deleteIndex),p.displayCurrentState()}}class sw extends yi{oldIndex;constructor(t){super({en:"add slot",zh:""}),this.oldIndex=t}undo(){p.timeline.removeSlot(p.timeline.slots.length-1),p.setActiveSlot(this.oldIndex),p.displayCurrentState()}redo(){p.setActiveSlot(this.oldIndex),p.timeline.addSlot(),p.displayCurrentState()}}class rw extends yi{sourceIndex;constructor(t){super({en:"clone slot",zh:""}),this.sourceIndex=t}undo(){p.timeline.removeSlot(p.timeline.slots.length-1),p.setActiveSlot(this.sourceIndex),p.displayCurrentState()}redo(){p.setActiveSlot(this.sourceIndex),p.cloneActiveSlot(),p.displayCurrentState()}}class cw extends yi{oldConfig;newConfig;oldRecord;constructor(t,a,o){super({en:"change config",zh:""}),this.oldConfig=t,this.newConfig=a,o===void 0&&(t.job!==a.job||t.level!==a.level)&&console.error("config apply w/o reset but job or level changed"),this.oldRecord=o}undo(){this.oldRecord!==void 0?(p.loadBattleRecordFromFile(this.oldRecord),p.autoSave()):p.setConfigAndRestart(this.oldConfig,!1),p.updateAllDisplay(),p.scrollToTime()}redo(){p.setConfigAndRestart(this.newConfig,this.oldRecord!==void 0),p.updateAllDisplay(),p.scrollToTime()}}class uw extends yi{oldRecord;importedRecord;constructor(t,a){super({en:"import from file",zh:""}),this.oldRecord=t,this.importedRecord=a}undo(){p.loadBattleRecordFromFile(this.oldRecord),p.autoSave(),p.displayCurrentState()}redo(){p.loadBattleRecordFromFile(this.importedRecord),p.autoSave(),p.displayCurrentState()}}let Jb,$b=[];const e0="",t0=", ",UA=":";function dw(e){const t=p.record.getSelected().actions,a=p.record.selectionStartIndex;if(a===void 0)return"";let o="";if(e==="plain"){const s=[];t.forEach(d=>s.push(d.toLocalizedString()));const c=Oi()==="zh"?e0:t0;o=s.join(c)}else if(e==="tsv"){const s=[],c=p.checkRecordValidity(p.record,0);t.forEach((d,h)=>s.push([c.skillUseTimes[h+a].toFixed(3),d.targetCount,d.toLocalizedString()].join("	"))),o=s.join(`
`)}else if(e==="discord"){const s=[];t.forEach(c=>{if(c.info.type===ze.Skill){const d=c.info.skillName;d==="TINCTURE"?s.push(":IntPot:"):d==="SWIFTCAST"?s.push(p.gameConfig.job==="BLM"?":Swift:":":Swiftcast:"):s.push(`:${gn[d].discordEmote??gn[d].name.replaceAll(" ","")}:`)}else s.push(c.toLocalizedString())}),o=s.join(" ")}else console.error("invalid clipboard mode",e);return Jb=o,$b=t,o}function hw(e){return e==="."||e>="0"&&e<="9"}function n0(e,t){const a=e.toLowerCase(),o=t?.toLowerCase();if(a==="wait mp"||e===""||a==="wait"&&o===" mp"||e===""&&t?.substring(3,5)==="")return RC();const s=e.split(" ");if(!(t!==void 0&&hw(t[0]))){if(s.length===2&&s[0]==="wait"){const c=zi(s[1]);return isNaN(c)?void 0:Or(c)}if(e.startsWith("")){const c=zi(e.substring(3));return isNaN(c)?void 0:Or(c)}if(s.length===2&&s[0]==="jump"){const c=zi(s[1]);return isNaN(c)?void 0:rl(c)}if(e.startsWith("")){const c=zi(e.substring(2));return isNaN(c)?void 0:rl(c)}if(s.length>=2&&s[0]==="toggle"){const c=lp(s.slice(1).join(" "));return c!==void 0?$A(c):void 0}if(e.startsWith("")){const c=lp(e.substring(2));return c!==void 0?$A(c):void 0}}}function qp(e,t=1){const a=n0(e,void 0);if(a!==void 0)return a;const o=iT(e)??fC.get(e)??EC.get(e);return o!==void 0?ns(o,t):void 0}function fw(e){if(e===Jb)return $b;const t=e.split(`
`),a=[];for(const o of t){const s=o.trimStart();if(o.includes("	")){const c=o.split("	");if(c.length>0){const d=c[c.length-1].trim();let h=1;if(c.length>1){const m=parseInt(c[c.length-2]);isNaN(m)||(h=m)}const f=qp(d,h);f!==void 0&&a.push(f)}}else if(s.length>2&&s[0]===UA){let c=!0,d="";for(let h=1;h<s.length;h++){const f=s[h];if(c&&(f===UA||f===" ")){const R=d.indexOf("~");if(R>0&&(d=d.substring(0,R)),d.toLowerCase().endsWith("_ogcd")&&(d=d.substring(0,d.length-5)),d.length!==0)if(d==="IntPot")a.push(ns("TINCTURE",1));else if(d==="Swift"||d==="Swiftcast")a.push(ns("SWIFTCAST",1));else{const T=aT.get(p.gameConfig.job).get(d);T!==void 0?a.push(ns(T)):console.error("unrecognized discord emote",d)}d="",c=!1;continue}if(f===UA&&d.length===0){c=!0,d="";continue}(d.length>0||f!==" ")&&(d+=f);const m=s.substring(h+1,h+4);if(!c){const R=n0(d,m);R!==void 0&&(a.push(R),d="")}}}else{let c=s.split(t0);c.length<2&&(c=s.split(e0)),c.forEach(d=>{if(d.length>0){const h=qp(d.trim());h!==void 0&&a.push(h)}})}}return a}function ER(){navigator.clipboard.writeText(dw(p.clipboardMode))}function a0(){p.queuedPastes++,navigator.clipboard.readText().then(e=>{if(e.startsWith("https://")||e.startsWith("www.")||e.startsWith("cn."))return;const t=fw(e);if(t===void 0||t.length===0){console.error("failed to paste parsed clipboard contents:"),console.error(e);return}p.undoStack.doThenPush(new CT(t,p.record.selectionStartIndex??p.record.length,"paste"))}).finally(()=>{p.queuedPastes--,console.assert(p.queuedPastes>=0)})}class En{name;duration;color;damageFactor;critBonus;dhBonus;job;constructor(t,a,o,s,c,d,h){this.name=t,this.duration=o,this.color=a,this.damageFactor=s,this.critBonus=c,this.dhBonus=d,this.job=h}}const bT=[new En(k.ArcaneCircle,ft.Pink,20,1.03,0,0,"RPR"),new En(k.ArmysPaeon,ft.Yellow,45,1,0,.03,"BRD"),new En(k.BattleLitany,ft.Blue,20,1,.1,0,"DRG"),new En(k.BattleVoice,ft.Orange,20,1,0,.2,"BRD"),new En(k.Brotherhood,ft.Orange,20,1.05,0,0,"MNK"),new En(k.Card_TheBalance,ft.Red,15,1.03,0,0,"AST"),new En(k.Card_TheSpear,ft.Blue,15,1.06,0,0,"AST"),new En(k.ChainStratagem,ft.Grey,20,1,.1,0,"SCH"),new En(k.Devilment,ft.Green,20,1,.2,.2,"DNC"),new En(k.Divination,ft.Yellow,20,1.06,0,0,"AST"),new En(k.Dokumori,ft.Purple,21,1.05,0,0,"NIN"),new En(k.Embolden,ft.Grey,20,1.05,0,0,"RDM"),new En(k.MagesBallad,ft.Purple,45,1.01,0,0,"BRD"),new En(k.RadiantFinale1,ft.Purple,20,1.02,0,0,"BRD"),new En(k.RadiantFinale2,ft.Purple,20,1.04,0,0,"BRD"),new En(k.RadiantFinale3,ft.Purple,20,1.06,0,0,"BRD"),new En(k.SearingLight,ft.Blue,20,1.05,0,0,"SMN"),new En(k.StandardFinish,ft.Yellow,60,1.05,0,0,"DNC"),new En(k.StarryMuse,ft.Purple,20.5,1.05,0,0,"PCT"),new En(k.TechnicalFinish,ft.Blue,20,1.05,0,0,"DNC"),new En(k.WanderersMinuet,ft.Green,45,1,.02,0,"BRD")],i0=new Map;bT.forEach(e=>{i0.set(e.name,e)});let qh=class{name;info;constructor(t){this.name=t;let a=i0.get(t);a||(a=bT[0],console.error("Buff info not found!")),this.info=a}};const o0=152,ih=5882,Wn=5925,PA={main:Wn,spellSpeed:420,skillSpeed:420,criticalHit:3387,directHit:1935,determination:2407,piety:440,tenacity:420},Zh={DRK:{main:ih,spellSpeed:420,skillSpeed:420,criticalHit:3404,directHit:1068,determination:2883,piety:440,tenacity:794},GNB:{main:ih,spellSpeed:420,skillSpeed:420,criticalHit:3404,directHit:1068,determination:2883,piety:440,tenacity:794},PLD:{main:ih,spellSpeed:420,skillSpeed:420,criticalHit:3242,directHit:1230,determination:2883,piety:440,tenacity:794},WAR:{main:ih,spellSpeed:420,skillSpeed:420,criticalHit:3404,directHit:1068,determination:2883,piety:440,tenacity:794},AST:{main:Wn,spellSpeed:704,skillSpeed:420,criticalHit:3427,directHit:1230,determination:2510,piety:718,tenacity:420},SCH:{main:Wn,spellSpeed:1221,skillSpeed:420,criticalHit:3484,directHit:852,determination:2314,piety:718,tenacity:420},SGE:{main:Wn,spellSpeed:704,skillSpeed:420,criticalHit:3427,directHit:1230,determination:2510,piety:718,tenacity:420},WHM:{main:Wn,spellSpeed:704,skillSpeed:420,criticalHit:3427,directHit:1230,determination:2510,piety:718,tenacity:420},DRG:{main:Wn,spellSpeed:420,skillSpeed:420,criticalHit:3425,directHit:1996,determination:2308,piety:440,tenacity:420},MNK:{main:Wn,spellSpeed:420,skillSpeed:968,criticalHit:3487,directHit:1685,determination:2009,piety:440,tenacity:420},NIN:{main:Wn,spellSpeed:420,skillSpeed:420,criticalHit:3378,directHit:1981,determination:2370,piety:440,tenacity:420},RPR:{main:Wn,spellSpeed:420,skillSpeed:474,criticalHit:3425,directHit:1942,determination:2308,piety:440,tenacity:420},SAM:{main:Wn,spellSpeed:420,skillSpeed:690,criticalHit:3425,directHit:2045,determination:1989,piety:440,tenacity:420},VPR:{main:Wn,spellSpeed:420,skillSpeed:420,criticalHit:3378,directHit:1981,determination:2370,piety:440,tenacity:420},DNC:PA,BRD:PA,MCH:PA,BLM:{main:Wn,spellSpeed:978,skillSpeed:420,criticalHit:3456,directHit:1764,determination:1951,piety:440,tenacity:420},RDM:{main:Wn,spellSpeed:528,skillSpeed:420,criticalHit:3399,directHit:1872,determination:2350,piety:440,tenacity:420},SMN:{main:Wn,spellSpeed:528,skillSpeed:420,criticalHit:3399,directHit:1872,determination:2350,piety:440,tenacity:420},PCT:{main:Wn,spellSpeed:420,skillSpeed:420,criticalHit:3399,directHit:1764,determination:2566,piety:440,tenacity:420},BLU:{main:1701,spellSpeed:1573,skillSpeed:380,criticalHit:1343,directHit:785,determination:676,piety:340,tenacity:380},NEVER:{main:Wn,spellSpeed:420,skillSpeed:420,criticalHit:420,directHit:420,determination:440,piety:440,tenacity:420}};function mR(e,t=Je.lvl100){return{job:e,shellVersion:LR.version,level:t??(e==="BLU"?Je.lvl80:Je.lvl100),...Zh[e],wd:o0,countdown:5,randomSeed:"sup",fps:60,gcdSkillCorrection:0,animationLock:.7,timeTillFirstManaTick:1.2,procMode:ua.Never,initialResourceOverrides:[]}}function Ew(e){const t=Rt(`defaultPartialConfig: ${e}`);if(t===null)return Zh[e];const a=JSON.parse(t);return Object.entries(Zh[e]).forEach(([o,s])=>{a[o]===void 0&&(a[o]=s)}),a}const mh=mR("BLM");class li{job;shellVersion=LR.version;level;wd;main;spellSpeed;skillSpeed;criticalHit;directHit;determination;piety;tenacity;countdown;randomSeed;fps;gcdSkillCorrection;animationLock;timeTillFirstManaTick;procMode;initialResourceOverrides;legacy_casterTax;constructor(t){this.job=t.job,this.shellVersion=t.shellVersion;const a=mh;this.level=t.level??a.level,this.spellSpeed=t.spellSpeed,this.skillSpeed=t.skillSpeed??a.skillSpeed,this.criticalHit=t.criticalHit??a.criticalHit,this.directHit=t.directHit??a.directHit,this.determination=t.determination??a.determination,this.piety=t.piety??a.piety,this.countdown=t.countdown,this.randomSeed=t.randomSeed,this.fps=t.fps,this.gcdSkillCorrection=t.gcdSkillCorrection,this.animationLock=t.animationLock,this.timeTillFirstManaTick=t.timeTillFirstManaTick,this.procMode=t.procMode,this.initialResourceOverrides=t.initialResourceOverrides.map(o=>{if(o.effectOrTimerEnabled===void 0&&(o.enabled===void 0?o.effectOrTimerEnabled=!0:o.effectOrTimerEnabled=o.enabled),!(o.type in we||o.type in es))if(o.type.toString()==="AstralFire")o.type="ASTRAL_FIRE";else if(o.type.toString()==="UmbralIce")o.type="UMBRAL_ICE";else if(o.type.toString()==="UmbralHeart")o.type="UMBRAL_HEART";else{let s=Object.keys(we).find(c=>we[c].name===o.type);s||(s=Object.keys(es).find(c=>es[c].name===o.type)),s&&(o.type=s)}return new nT(o)}),this.legacy_casterTax=t?.casterTax??0,this.tenacity=t?.tenacity??420,this.main=t?.main??Wn,this.wd=t?.wd??o0}adjustedOvertimePotency(t,a){return ut.overtimePotency(this.level,a==="sks"?this.skillSpeed:a==="sps"?this.spellSpeed:ut.getSubstatBase(this.level),t)}adjustedGCD(t=2.5,a){return this.shellVersion>=No.AllaganGcdFormula?ut.preTaxGcd(this.level,this.spellSpeed,t,a):ut.preTaxGcdLegacy(this.level,this.spellSpeed,t,a)}adjustedSksGCD(t=2.5,a){return this.shellVersion>=No.AllaganGcdFormula?ut.preTaxGcd(this.level,this.skillSpeed,t,a):ut.preTaxGcdLegacy(this.level,this.skillSpeed,t,a)}adjustedCastTime(t,a){return ut.preTaxCastTime(this.level,this.spellSpeed,t,a)}adjustedSksCastTime(t,a){return ut.preTaxCastTime(this.level,this.skillSpeed,t,a)}getAfterTaxGCD(t){return this.shellVersion<No.FpsTax?t:ut.afterFpsTax(this.fps,t)+this.gcdSkillCorrection}getAfterTaxCastTime(t){return this.shellVersion<No.FpsTax?this.legacy_casterTax+t:ut.afterFpsTax(this.fps,t)+ut.afterFpsTax(this.fps,Fx)+this.gcdSkillCorrection}static getSlidecastWindow(t){return .5}get critRate(){return ut.criticalHitRate(this.level,this.criticalHit)}getOverrideStacks(t){return this.initialResourceOverrides.find(a=>a.type===t)?.stacks}savePartialConfig(){const t={};Object.keys(Zh[this.job]).forEach(a=>{t[a]=this[a]}),Tt(`defaultPartialConfig: ${this.job}`,JSON.stringify(t))}serialized(){return{job:this.job,shellVersion:this.shellVersion,level:this.level,wd:this.wd,main:this.main,spellSpeed:this.spellSpeed,skillSpeed:this.skillSpeed,criticalHit:this.criticalHit,directHit:this.directHit,determination:this.determination,piety:this.piety,tenacity:this.tenacity,countdown:this.countdown,randomSeed:this.randomSeed,casterTax:this.legacy_casterTax,fps:this.fps,gcdSkillCorrection:this.gcdSkillCorrection,animationLock:this.animationLock,timeTillFirstManaTick:this.timeTillFirstManaTick,procMode:this.procMode,initialResourceOverrides:this.initialResourceOverrides.map(t=>t.serialized())}}}function mw(e){const t=bt();return l.jsx("div",{style:{top:1+(e.offset?.y??0),left:e.offset?.x??0,marginRight:8,position:"relative",width:16,height:16,borderRadius:8,display:"inline-block",border:"1px solid "+t.bgHighContrast,verticalAlign:"top"},children:e.color&&l.jsx("div",{style:{backgroundColor:`${e.color}`,position:"absolute",top:2,bottom:2,left:2,right:2,borderRadius:"inherit"}})})}function Aw(e){const t=bt(),a=e.heightPx??30,o=e.widthPx??24;let s;return e.imgUrl?s=l.jsx("img",{src:e.imgUrl,alt:"resource img",style:{display:"block",margin:"2px auto",maxWidth:a-4,maxHeight:o-4}}):e.color&&(s=l.jsx("div",{style:{backgroundColor:e.color,position:"absolute",top:3,bottom:3,left:3,right:3}})),l.jsx("div",{style:{display:"inline-block",position:"relative",top:e.offset?.y??0,left:e.offset?.x??0,width:a,height:o,border:"1px solid "+t.bgHighContrast,marginRight:4},children:s})}function Ah(e={name:"placeholder",color:"#6cf",value:"0.34/1.00",progress:.34,width:100,hidden:!1}){return l.jsxs("div",{hidden:e.hidden,style:{marginBottom:4,lineHeight:"1.5em"},children:[l.jsx("div",{style:{display:"inline-block",height:"100%",width:108},children:e.name}),l.jsxs("div",{style:{width:200,display:"inline-block"},children:[l.jsx(QP,{backgroundColor:e.color,progress:e.progress,width:e.width,offsetY:4}),l.jsx("div",{style:{marginLeft:6,height:"100%",display:"inline-block"},children:e.value})]})]})}function Fi(e){const t=e.containerType==="box"||e.items.some(o=>o.imgUrl!==void 0),a=e.items.map((o,s)=>e.containerType==="circle"&&o.imgUrl===void 0?l.jsx(mw,{color:o.color,offset:t?{x:0,y:3}:void 0},s):l.jsx(Aw,{color:o.color,imgUrl:o.imgUrl,offset:t?{x:-2,y:0}:void 0,heightPx:o.boxHeightPx,widthPx:o.boxWidthPx},s));return t?l.jsxs("div",{style:{marginBottom:4},children:[l.jsx("div",{style:{display:"inline-block",position:"relative",verticalAlign:"top",top:6,width:108},children:e.name}),l.jsx("div",{style:{display:"inline-block"},children:a}),e.label?l.jsx("div",{style:{marginLeft:6,display:"inline-block",position:"relative",verticalAlign:"top",top:6},children:e.label}):void 0]}):l.jsxs("div",{style:{marginBottom:4,lineHeight:"1.5em"},children:[l.jsx("div",{style:{display:"inline-block",height:"100%",width:108},children:e.name}),l.jsxs("div",{style:{width:200,display:"inline-block"},children:[l.jsx("div",{style:{display:"inline-block"},children:a}),e.label?l.jsx("div",{style:{marginLeft:6,height:"100%",display:"inline-block"},children:e.label}):void 0]})]})}function Zp(e){return l.jsxs("div",{className:e.className,style:{marginBottom:4,lineHeight:"1.5em"},children:[l.jsx("div",{style:{display:"inline-block",height:"100%",width:108},children:e.name}),l.jsx("div",{style:{width:200,display:"inline-block"},children:l.jsx("div",{style:{display:"inline-block",marginLeft:6,color:e.color},children:e.text})})]})}const Es=new Map;function jt(e,t){Es.set(e,`Buffs/${t}`);const a=we[e].maximumStacks??1;for(let o=2;o<=a;o++)Es.set(e+o,`Buffs/${t.replace(we[e].name,we[e].name+o)}`)}Object.keys(eC).forEach(e=>{const t=we[e].name;Es.set(e,`Buffs/Role/${t}.png`)});Object.keys($N).forEach(e=>Es.set(e,"Buffs/Role/Tank Limit Break.png"));Es.set("SPRINT","Buffs/General/Sprint.png");Es.set("TINCTURE","Buffs/General/Tincture.png");function Rw(e){let t=e.rscType;e.stacks>1&&(t+=e.stacks);let a;e.rscType==="AUTOS_ENGAGED"||e.rscType==="REAR_POSITIONAL"||e.rscType==="FLANK_POSITIONAL"?a={height:40}:a={height:40};const o=we[e.rscType].mayNotBeCanceled,s={display:"inline-block",verticalAlign:"top",filter:e.enabled?"none":"grayScale(100%)"},c=l.jsx("img",{style:a,src:"assets/"+Es.get(t),alt:e.rscType});return l.jsxs("div",{title:Ke(e.rscType),className:e.className+" buff "+e.rscType,children:[o?l.jsx("div",{style:s,children:c}):l.jsx(fs,{content:c,style:s,onClickFn:()=>{e.onSelf&&(p.requestToggleBuff(e.rscType,!0),p.updateStatusDisplay(p.game),p.updateSkillButtons(p.game),p.autoSave(),Zn())}}),l.jsx("span",{className:"buff-label",style:{visibility:e.timeRemaining===void 0?"hidden":void 0},children:e.timeRemaining??"0.000"})]})}function Qh(e){const t=e.data,a=[];for(let s=0;s<t.length;s++)a.push(l.jsx(Rw,{...t[s]},s));let o={height:54,textAlign:"right",lineHeight:"1em"};return e.style&&(o={...o,...e.style}),l.jsx("div",{style:o,children:a})}function l0(e){const t=bt(),a=e.data,o=l.jsx(Ah,{name:"GCD",color:t.resources.gcdBar,progress:a.gcdReady?0:1-a.timeTillGCDReady/a.gcd,value:a.timeTillGCDReady.toFixed(3),width:100,hidden:a.gcdReady}),s=l.jsx(Ah,{name:"casting/taxed",color:a.canMove?t.resources.gcdBar:t.resources.lockBar,progress:a.castLocked?1-a.castLockCountdown/a.castLockTotalDuration:0,value:a.castLockCountdown.toFixed(3),width:100,hidden:!a.castLocked}),c=l.jsx(Ah,{name:"using skill",color:t.resources.lockBar,progress:a.animLocked?1-a.animLockCountdown/a.animLockTotalDuration:0,value:a.animLockCountdown.toFixed(3),width:100,hidden:!a.animLocked});return l.jsxs("div",{style:{position:"absolute"},children:[o,s,c]})}function s0(e){const t=e.data.resources.map((o,s)=>{switch(o.kind){case"bar":return l.jsx(Ah,{name:o.name,color:o.color,progress:o.progress,value:o.valueString,width:o.widthPx??100,hidden:o.hidden??!1},"resourceDisplay"+s);case"counter":{const c=[];for(let d=0;d<o.maxStacks;d++)c.push({color:d<o.currentStacks?o.color:void 0});return l.jsx(Fi,{containerType:"circle",name:o.name,label:o.valueString??`${o.currentStacks}/${o.maxStacks}`,items:c},"resourceDisplay"+s)}case"paint":{const c=[];for(let h=0;h<o.maxStacks;h++){const f=o.hasComet&&h===o.currentStacks-1?o.cometColor:o.holyColor;c.push({color:h<o.currentStacks?f:void 0,imgUrl:void 0})}const d=`${o.currentStacks}/${o.maxStacks}`;return l.jsx(Fi,{containerType:"circle",name:o.name,label:d,items:c},"resourceDisplay"+s)}case"dance":{const c=o.currentStacks,d=[o.emboiteColor,o.entrechatColor,o.jeteColor,o.pirouetteColor],h=[];for(let m=0;m<o.maxStacks;m++)h.push({color:m<c?d[m]:void 0});const f=`${c}/${o.maxStacks}`;return l.jsx(Fi,{containerType:"circle",name:o.name,label:f,items:h},"resourceDisplay"+s)}case"sen":{const c=[{present:o.hasSetsu,color:o.setsuColor,name:"setsu"},{present:o.hasGetsu,color:o.getsuColor,name:"getsu"},{present:o.hasKa,color:o.kaColor,name:"ka"}],d=l.jsx(Fe,{topic:"senExplanation",content:g({en:"from left to right: setsu (yukikaze), getsu (gekko/mangetsu), ka (kasha/oka)",zh:"//"})});return l.jsx(Fi,{name:l.jsxs(l.Fragment,{children:[o.name," ",d]}),label:c.filter(h=>h.present).map(h=>h.name).join("+"),containerType:"circle",items:c.map(h=>({color:h.present?h.color:void 0}))},"resourceDisplay"+s)}case"coda":{const c=[{present:o.hasWanderers,color:o.wanderersColor},{present:o.hasMages,color:o.magesColor},{present:o.hasArmys,color:o.armysColor}],d=l.jsx(Fe,{topic:"codaExplanation",content:g({en:"from left to right: wanderer's coda, mage's coda, army's coda"})});return l.jsx(Fi,{name:l.jsxs(l.Fragment,{children:[o.name," ",d]}),containerType:"circle",items:c.map(h=>({color:h.present?h.color:void 0}))},"resourceDisplay"+s)}case"attunement":{const c=[{gem:o.ruby,color:o.rubyColor},{gem:o.topaz,color:o.topazColor},{gem:o.emerald,color:o.emeraldColor}];return l.jsxs("div",{children:[l.jsx(Fi,{name:o.aetherName,containerType:"circle",items:c.map(d=>({color:d.gem?d.color:void 0}))}),l.jsx(Zp,{name:o.attunementName,text:o.attunementCount.toString()+(o.attunementCount>0?` | ${o.timeRemaining.toFixed(3)}`:"")})]},"resourceDisplay"+s)}case"nadi":return l.jsx("div",{children:l.jsx(Fi,{name:o.name,label:o.label,containerType:"circle",items:[{color:o.lunar?o.lunarColor:void 0},{color:o.solar?o.solarColor:void 0}]})},"resourceDisplay"+s);case"beast":{const c=new Array(3).map(d=>({color:void 0}));return o.chakras.map((d,h)=>{c[h]={color:d==="opo"?o.opoColor:d==="raptor"?o.raptorColor:d==="coeurl"?o.coeurlColor:void 0}}),l.jsx("div",{children:l.jsx(Fi,{name:o.name,label:o.label,containerType:"circle",items:c})},"resourceDisplay"+s)}case"chakra":{const c=o.value>o.wrapCount,d=c?o.value%o.wrapCount:o.value,h=new Array(o.wrapCount);for(let f=0;f<o.wrapCount;f++)h[f]={color:c?f+1>d?o.regularColor:o.overflowColor:f+1>d?void 0:o.regularColor};return l.jsx("div",{children:l.jsx(Fi,{name:o.name,label:o.label,containerType:"circle",items:h})},"resourceDisplay"+s)}case"arcana":{const c=o.activeSlots.map((d,h)=>{const f=h===o.activeSlots.length-1?18:20,m=h===o.activeSlots.length-1?16:20;return{color:d?o.currentArcanaColor:void 0,boxHeightPx:f,boxWidthPx:m}});return l.jsx("div",{children:l.jsx(Fi,{name:o.name,containerType:"box",items:c})},"resourceDisplay"+s)}default:return l.jsx(Zp,{name:o.name,text:o.text,color:o.color},"resourceDisplay"+s)}});let a={textAlign:"left",minHeight:"13.5em"};return e.style&&(a={...a,...e.style}),l.jsx("div",{style:a,children:t})}let r0=(e,t)=>{};class Tw extends ha.Component{state;static contextType=Rn;constructor(t){super(t),this.state={time:0,resources:[],enemyBuffs:[],selfBuffs:[],level:100,layoutFn:a=>l.jsx("div",{})},r0=(a,o)=>{const s=a(ia(this.context));this.setState({layoutFn:o,...s})}}componentDidMount(){p.updateStatusDisplay(p.game)}render(){return l.jsxs("div",{style:{position:"relative",textAlign:"left",margin:"8px 0"},children:[l.jsx("div",{style:{position:"absolute",top:-8,right:0,zIndex:1},children:l.jsx(Fe,{topic:"mainControlRegion",content:l.jsx("div",{className:"toolTip",children:g({en:l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"paragraph",children:[l.jsx("span",{style:{color:"lightgray"},children:"grey"})," border: not focused"]}),l.jsxs("div",{className:"paragraph",children:[l.jsx("b",{style:{color:"mediumpurple"},children:"purple"})," border: up-to-date, receiving input"]}),l.jsxs("div",{className:"paragraph",children:[l.jsx("b",{style:{color:"mediumseagreen"},children:"green"})," border: real-time"]}),l.jsxs("div",{className:"paragraph",children:[l.jsx("b",{style:{color:"darkorange"},children:"orange"})," border: viewing historical state, receiving input"]})]}),zh:l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"paragraph",children:[l.jsx("span",{style:{color:"lightgray"},children:""}),""]}),l.jsxs("div",{className:"paragraph",children:[l.jsx("b",{style:{color:"mediumpurple"},children:""}),""]}),l.jsxs("div",{className:"paragraph",children:[l.jsx("b",{style:{color:"mediumseagreen"},children:""}),""]}),l.jsxs("div",{className:"paragraph",children:[l.jsx("b",{style:{color:"darkorange"},children:""}),""]})]}),ja:l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"paragraph",children:[l.jsx("span",{style:{color:"lightgray"},children:""})," : "]}),l.jsxs("div",{className:"paragraph",children:[l.jsx("b",{style:{color:"mediumpurple"},children:""})," : "]}),l.jsxs("div",{className:"paragraph",children:[l.jsx("b",{style:{color:"mediumseagreen"},children:""})," : "]}),l.jsxs("div",{className:"paragraph",children:[l.jsx("b",{style:{color:"darkorange"},children:""})," : "]})]})})})})}),this.state.layoutFn(this.state)]})}}class Wt{state;constructor(t){this.state=t}makeCommonTimer(t,a=!0){const o=this.state.resources.timeTillReady(t),s=this.state.resources.get(t);return{rscType:t,onSelf:a,enabled:s.enabled,stacks:s.availableAmount(),timeRemaining:o.toFixed(3),className:s.availableAmountIncludingDisabled()>0?"":"hidden"}}makeToggleableTimer(t,a=!0){const o=this.state.resources.timeTillReady(t),s=this.state.resources.get(t);return{rscType:t,onSelf:a,enabled:s.enabled,stacks:s.availableAmount(),timeRemaining:o.toFixed(3),className:s.availableAmountIncludingDisabled()>0?"":"hidden"}}makeCommonTimerless(t,a=!0){return{rscType:t,onSelf:a,enabled:!0,stacks:this.state.resources.get(t).availableAmount(),className:this.state.hasResourceAvailable(t)?"":"hidden"}}makeToggleableTimerless(t,a=!0){const o=this.state.resources.get(t);return{rscType:t,onSelf:a,enabled:o.enabled,stacks:o.availableAmount(),className:o.availableAmountIncludingDisabled()>0?"":"hidden"}}jobSpecificOtherTargetedBuffViewProps(){return[]}getAllOtherTargetedBuffViewProps(){const t=this.state.job,a=[];return dt[t].role==="TANK"&&a.push(this.makeCommonTimer("REPRISAL",!1)),dt[t].role==="MELEE"&&a.push(this.makeCommonTimer("FEINT",!1)),dt[t].role==="CASTER"&&a.push(this.makeCommonTimer("ADDLE",!1)),[...this.jobSpecificOtherTargetedBuffViewProps(),...a]}jobSpecificSelfTargetedBuffViewProps(){return[]}getAllSelfTargetedBuffViewProps(){const t=this.state.job,a=this.state.resources,o=[];if(dt[t].role==="TANK"){o.push(...["RAMPART","SHIELD_WALL","STRONGHOLD"].map(c=>this.makeCommonTimer(c)));const s=dt[t].limitBreakBuff??"UNKNOWN";s&&o.push(this.makeCommonTimer(s))}return dt[t].role==="MELEE"&&o.push(...["TRUE_NORTH","BLOODBATH"].map(s=>this.makeCommonTimer(s))),["TANK","MELEE","RANGED"].includes(dt[t].role)&&o.push(this.makeCommonTimer("ARMS_LENGTH")),["HEALER","CASTER"].includes(dt[t].role)&&o.push(...["SWIFTCAST","LUCID_DREAMING","SURECAST"].map(s=>this.makeCommonTimer(s))),o.push(this.makeCommonTimer("TINCTURE"),this.makeCommonTimer("SPRINT")),dt[t].role==="MELEE"&&o.push(...["REAR_POSITIONAL","FLANK_POSITIONAL"].map(s=>({rscType:s,onSelf:!0,enabled:a.get(s).enabled,stacks:1,className:""}))),(dt[t].role==="TANK"||dt[t].role==="MELEE")&&o.push(...["AUTOS_ENGAGED"].map(s=>({rscType:s,onSelf:!0,enabled:a.get(s).available(1),stacks:1,className:""}))),[...this.jobSpecificSelfTargetedBuffViewProps(),...o]}jobSpecificResourceViewProps(t){return[]}getAllResourceViewProps(t){if(!dt[this.state.job].usesMp)return this.jobSpecificResourceViewProps(t);const a=this.state.resources,o=a.timeTillReady("MANA"),s=a.get("MANA").availableAmount();return[{kind:"bar",name:"MP",color:t.resources.mana,progress:s/1e4,valueString:Math.floor(s)+"/10000"},{kind:"bar",name:g({en:"MP tick",zh:"",ja:"MP"}),color:t.resources.manaTick,progress:1-o/3,valueString:(3-o).toFixed(3)+"/3"},...this.jobSpecificResourceViewProps(t)]}statusLayoutFn(t){return l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:{display:"inline-block",verticalAlign:"top",width:"50%",height:"100%"},children:[l.jsxs("span",{style:{display:"block",marginBottom:10},children:[g({en:"time: ",zh:"",ja:""}),`${Ze.displayTime(t.time,3)} (${t.time.toFixed(3)})`]}),t.resources?l.jsx(s0,{data:{level:t.level,resources:t.resources}}):void 0]}),l.jsxs("div",{style:{position:"relative",display:"inline-block",float:"right",width:"50%"},children:[t.resourceLocks?l.jsx(l0,{data:t.resourceLocks}):void 0,l.jsx(Qh,{data:t.enemyBuffs,style:{marginBottom:"3em"}}),l.jsx(Qh,{data:t.selfBuffs})]})]})}}var Rh={exports:{}},Sw=Rh.exports,Qp;function Iw(){return Qp||(Qp=1,function(e){(function(t,a,o){function s(f){var m=this,R=h();m.next=function(){var T=2091639*m.s0+m.c*23283064365386963e-26;return m.s0=m.s1,m.s1=m.s2,m.s2=T-(m.c=T|0)},m.c=1,m.s0=R(" "),m.s1=R(" "),m.s2=R(" "),m.s0-=R(f),m.s0<0&&(m.s0+=1),m.s1-=R(f),m.s1<0&&(m.s1+=1),m.s2-=R(f),m.s2<0&&(m.s2+=1),R=null}function c(f,m){return m.c=f.c,m.s0=f.s0,m.s1=f.s1,m.s2=f.s2,m}function d(f,m){var R=new s(f),T=m&&m.state,S=R.next;return S.int32=function(){return R.next()*4294967296|0},S.double=function(){return S()+(S()*2097152|0)*11102230246251565e-32},S.quick=S,T&&(typeof T=="object"&&c(T,R),S.state=function(){return c(R,{})}),S}function h(){var f=4022871197,m=function(R){R=String(R);for(var T=0;T<R.length;T++){f+=R.charCodeAt(T);var S=.02519603282416938*f;f=S>>>0,S-=f,S*=f,f=S>>>0,S-=f,f+=S*4294967296}return(f>>>0)*23283064365386963e-26};return m}a&&a.exports?a.exports=d:this.alea=d})(Sw,e)}(Rh)),Rh.exports}var Th={exports:{}},_w=Th.exports,Jp;function gw(){return Jp||(Jp=1,function(e){(function(t,a,o){function s(h){var f=this,m="";f.x=0,f.y=0,f.z=0,f.w=0,f.next=function(){var T=f.x^f.x<<11;return f.x=f.y,f.y=f.z,f.z=f.w,f.w^=f.w>>>19^T^T>>>8},h===(h|0)?f.x=h:m+=h;for(var R=0;R<m.length+64;R++)f.x^=m.charCodeAt(R)|0,f.next()}function c(h,f){return f.x=h.x,f.y=h.y,f.z=h.z,f.w=h.w,f}function d(h,f){var m=new s(h),R=f&&f.state,T=function(){return(m.next()>>>0)/4294967296};return T.double=function(){do var S=m.next()>>>11,I=(m.next()>>>0)/4294967296,C=(S+I)/(1<<21);while(C===0);return C},T.int32=m.next,T.quick=T,R&&(typeof R=="object"&&c(R,m),T.state=function(){return c(m,{})}),T}a&&a.exports?a.exports=d:this.xor128=d})(_w,e)}(Th)),Th.exports}var Sh={exports:{}},pw=Sh.exports,$p;function Nw(){return $p||($p=1,function(e){(function(t,a,o){function s(h){var f=this,m="";f.next=function(){var T=f.x^f.x>>>2;return f.x=f.y,f.y=f.z,f.z=f.w,f.w=f.v,(f.d=f.d+362437|0)+(f.v=f.v^f.v<<4^(T^T<<1))|0},f.x=0,f.y=0,f.z=0,f.w=0,f.v=0,h===(h|0)?f.x=h:m+=h;for(var R=0;R<m.length+64;R++)f.x^=m.charCodeAt(R)|0,R==m.length&&(f.d=f.x<<10^f.x>>>4),f.next()}function c(h,f){return f.x=h.x,f.y=h.y,f.z=h.z,f.w=h.w,f.v=h.v,f.d=h.d,f}function d(h,f){var m=new s(h),R=f&&f.state,T=function(){return(m.next()>>>0)/4294967296};return T.double=function(){do var S=m.next()>>>11,I=(m.next()>>>0)/4294967296,C=(S+I)/(1<<21);while(C===0);return C},T.int32=m.next,T.quick=T,R&&(typeof R=="object"&&c(R,m),T.state=function(){return c(m,{})}),T}a&&a.exports?a.exports=d:this.xorwow=d})(pw,e)}(Sh)),Sh.exports}var Ih={exports:{}},Cw=Ih.exports,eN;function bw(){return eN||(eN=1,function(e){(function(t,a,o){function s(h){var f=this;f.next=function(){var R=f.x,T=f.i,S,I;return S=R[T],S^=S>>>7,I=S^S<<24,S=R[T+1&7],I^=S^S>>>10,S=R[T+3&7],I^=S^S>>>3,S=R[T+4&7],I^=S^S<<7,S=R[T+7&7],S=S^S<<13,I^=S^S<<9,R[T]=I,f.i=T+1&7,I};function m(R,T){var S,I=[];if(T===(T|0))I[0]=T;else for(T=""+T,S=0;S<T.length;++S)I[S&7]=I[S&7]<<15^T.charCodeAt(S)+I[S+1&7]<<13;for(;I.length<8;)I.push(0);for(S=0;S<8&&I[S]===0;++S);for(S==8?I[7]=-1:I[S],R.x=I,R.i=0,S=256;S>0;--S)R.next()}m(f,h)}function c(h,f){return f.x=h.x.slice(),f.i=h.i,f}function d(h,f){h==null&&(h=+new Date);var m=new s(h),R=f&&f.state,T=function(){return(m.next()>>>0)/4294967296};return T.double=function(){do var S=m.next()>>>11,I=(m.next()>>>0)/4294967296,C=(S+I)/(1<<21);while(C===0);return C},T.int32=m.next,T.quick=T,R&&(R.x&&c(R,m),T.state=function(){return c(m,{})}),T}a&&a.exports?a.exports=d:this.xorshift7=d})(Cw,e)}(Ih)),Ih.exports}var _h={exports:{}},Ow=_h.exports,tN;function Dw(){return tN||(tN=1,function(e){(function(t,a,o){function s(h){var f=this;f.next=function(){var R=f.w,T=f.X,S=f.i,I,C;return f.w=R=R+1640531527|0,C=T[S+34&127],I=T[S=S+1&127],C^=C<<13,I^=I<<17,C^=C>>>15,I^=I>>>12,C=T[S]=C^I,f.i=S,C+(R^R>>>16)|0};function m(R,T){var S,I,C,_,O,D=[],H=128;for(T===(T|0)?(I=T,T=null):(T=T+"\0",I=0,H=Math.max(H,T.length)),C=0,_=-32;_<H;++_)T&&(I^=T.charCodeAt((_+32)%T.length)),_===0&&(O=I),I^=I<<10,I^=I>>>15,I^=I<<4,I^=I>>>13,_>=0&&(O=O+1640531527|0,S=D[_&127]^=I+O,C=S==0?C+1:0);for(C>=128&&(D[(T&&T.length||0)&127]=-1),C=127,_=4*128;_>0;--_)I=D[C+34&127],S=D[C=C+1&127],I^=I<<13,S^=S<<17,I^=I>>>15,S^=S>>>12,D[C]=I^S;R.w=O,R.X=D,R.i=C}m(f,h)}function c(h,f){return f.i=h.i,f.w=h.w,f.X=h.X.slice(),f}function d(h,f){h==null&&(h=+new Date);var m=new s(h),R=f&&f.state,T=function(){return(m.next()>>>0)/4294967296};return T.double=function(){do var S=m.next()>>>11,I=(m.next()>>>0)/4294967296,C=(S+I)/(1<<21);while(C===0);return C},T.int32=m.next,T.quick=T,R&&(R.X&&c(R,m),T.state=function(){return c(m,{})}),T}a&&a.exports?a.exports=d:this.xor4096=d})(Ow,e)}(_h)),_h.exports}var gh={exports:{}},yw=gh.exports,nN;function vw(){return nN||(nN=1,function(e){(function(t,a,o){function s(h){var f=this,m="";f.next=function(){var T=f.b,S=f.c,I=f.d,C=f.a;return T=T<<25^T>>>7^S,S=S-I|0,I=I<<24^I>>>8^C,C=C-T|0,f.b=T=T<<20^T>>>12^S,f.c=S=S-I|0,f.d=I<<16^S>>>16^C,f.a=C-T|0},f.a=0,f.b=0,f.c=-1640531527,f.d=1367130551,h===Math.floor(h)?(f.a=h/4294967296|0,f.b=h|0):m+=h;for(var R=0;R<m.length+20;R++)f.b^=m.charCodeAt(R)|0,f.next()}function c(h,f){return f.a=h.a,f.b=h.b,f.c=h.c,f.d=h.d,f}function d(h,f){var m=new s(h),R=f&&f.state,T=function(){return(m.next()>>>0)/4294967296};return T.double=function(){do var S=m.next()>>>11,I=(m.next()>>>0)/4294967296,C=(S+I)/(1<<21);while(C===0);return C},T.int32=m.next,T.quick=T,R&&(typeof R=="object"&&c(R,m),T.state=function(){return c(m,{})}),T}a&&a.exports?a.exports=d:this.tychei=d})(yw,e)}(gh)),gh.exports}var ph={exports:{}};const Mw={},Lw=Object.freeze(Object.defineProperty({__proto__:null,default:Mw},Symbol.toStringTag,{value:"Module"})),xw=CM(Lw);var Hw=ph.exports,aN;function kw(){return aN||(aN=1,function(e){(function(t,a,o){var s=256,c=6,d=52,h="random",f=o.pow(s,c),m=o.pow(2,d),R=m*2,T=s-1,S;function I(L,w,G){var B=[];w=w==!0?{entropy:!0}:w||{};var z=D(O(w.entropy?[L,x(a)]:L??H(),3),B),Q=new C(B),ce=function(){for(var ue=Q.g(c),te=f,ee=0;ue<m;)ue=(ue+ee)*s,te*=s,ee=Q.g(1);for(;ue>=R;)ue/=2,te/=2,ee>>>=1;return(ue+ee)/te};return ce.int32=function(){return Q.g(4)|0},ce.quick=function(){return Q.g(4)/4294967296},ce.double=ce,D(x(Q.S),a),(w.pass||G||function(ue,te,ee,Ee){return Ee&&(Ee.S&&_(Ee,Q),ue.state=function(){return _(Q,{})}),ee?(o[h]=ue,te):ue})(ce,z,"global"in w?w.global:this==o,w.state)}function C(L){var w,G=L.length,B=this,z=0,Q=B.i=B.j=0,ce=B.S=[];for(G||(L=[G++]);z<s;)ce[z]=z++;for(z=0;z<s;z++)ce[z]=ce[Q=T&Q+L[z%G]+(w=ce[z])],ce[Q]=w;(B.g=function(ue){for(var te,ee=0,Ee=B.i,he=B.j,M=B.S;ue--;)te=M[Ee=T&Ee+1],ee=ee*s+M[T&(M[Ee]=M[he=T&he+te])+(M[he]=te)];return B.i=Ee,B.j=he,ee})(s)}function _(L,w){return w.i=L.i,w.j=L.j,w.S=L.S.slice(),w}function O(L,w){var G=[],B=typeof L,z;if(w&&B=="object")for(z in L)try{G.push(O(L[z],w-1))}catch{}return G.length?G:B=="string"?L:L+"\0"}function D(L,w){for(var G=L+"",B,z=0;z<G.length;)w[T&z]=T&(B^=w[T&z]*19)+G.charCodeAt(z++);return x(w)}function H(){try{var L;return S&&(L=S.randomBytes)?L=L(s):(L=new Uint8Array(s),(t.crypto||t.msCrypto).getRandomValues(L)),x(L)}catch{var w=t.navigator,G=w&&w.plugins;return[+new Date,t,G,t.screen,x(a)]}}function x(L){return String.fromCharCode.apply(0,L)}if(D(o.random(),a),e.exports){e.exports=I;try{S=xw}catch{}}else o["seed"+h]=I})(typeof self<"u"?self:Hw,[],Math)}(ph)),ph.exports}var wA,iN;function Uw(){if(iN)return wA;iN=1;var e=Iw(),t=gw(),a=Nw(),o=bw(),s=Dw(),c=vw(),d=kw();return d.alea=e,d.xor128=t,d.xorwow=a,d.xorshift7=o,d.xor4096=s,d.tychei=c,wA=d,wA}var Pw=Uw();const oN=FN(Pw);class Xt{config;rng;nonProcRng;lucidTickOffset;dotTickOffset;hotTickOffset;time;resources;cooldowns;eventsQueue;skillsList;displayedSkills;autoAttackDelay;overTimeEffectGroups=[];dotResources=[];hotResources=[];excludedDoTs=[];excludedHoTs=[];fullTimeDoTs=[];#e=[];#t=[];dotSkills=[];hotSkills=[];#n=new Map;#a=new Map;constructor(t){this.config=t,this.rng=oN(t.randomSeed),this.nonProcRng=oN(t.randomSeed+"_nonProcs"),this.lucidTickOffset=this.nonProcRng()*3,this.dotTickOffset=this.nonProcRng()*3,this.hotTickOffset=this.nonProcRng()*3,this.time=0,this.resources=new iH(this),this.cooldowns=new aH(this),Wi(this.job).forEach((o,s)=>{o.isCoolDown?this.cooldowns.set(new He(s,o.cdPerStack,o.maxStacks,o.maxStacks)):this.resources.set(new Jn(s,o.maxValue,o.defaultValue,o.warnOnOvercap))});let a=2.5;switch(dt[this.job].role){case"TANK":case"MELEE":case"RANGED":a=t.adjustedSksGCD();break;case"HEALER":case"CASTER":a=t.adjustedGCD();break}this.cooldowns.set(new He("cd_GCD",t.getAfterTaxGCD(a),1,1)),this.resources.set(new Jn("MOVEMENT",1,1)),this.resources.set(new Jn("NOT_ANIMATION_LOCKED",1,1)),this.resources.set(new Jn("NOT_CASTER_TAXED",1,1)),this.resources.set(new Jn("IN_COMBAT",1,0)),this.cooldowns.set(new He("NEVER",0,0,0)),this.eventsQueue=[],this.skillsList=new rH(this),this.displayedSkills=new cH(this.job,t.level),this.autoAttackDelay=2.5}get statusPropsGenerator(){return new Wt(this)}get job(){return this.config.job}get partySize(){return this.resources.get("PARTY_SIZE").availableAmount()}registerRecurringEvents(t=[],a=[]){const o=this;{const h=()=>{const f=this.resources.get("MANA"),m=this.captureManaRegenAmount();f.gain(m);const R=f.availableAmount();p.reportManaTick(o.time,"+"+m+" (MP="+R+")"),this.resources.addResourceEvent({rscType:"MANA",name:"mana tick",delay:3,fnOnRsc:T=>{h()},tags:[ca.MpTick,ca.ManaGain]})};this.resources.addResourceEvent({rscType:"MANA",name:"initial mana tick",delay:this.config.timeTillFirstManaTick,fnOnRsc:h,tags:[ca.MpTick,ca.ManaGain]})}const s=()=>{const h=this.resources.get("LUCID_DREAMING");if(h.available(1)&&(h.tickCount++,!(this.job==="BLM"&&this.hasResourceAvailable("ASTRAL_FIRE")))){const m=this.resources.get("MANA");m.gain(550);let R="+550";if(console.assert(h.node!==void 0),h.node){let T="??";h.node.tmp_startLockTime&&(T=(h.node.tmp_startLockTime-this.config.countdown).toFixed(3)),R+=" {skill}@"+T,R+=" ("+h.tickCount+"/7)"}R+=" (MP="+m.availableAmount()+")",p.reportLucidTick(this.time,R)}const f=new Ce("lucid tick",3,()=>{s()});f.addTag(ca.LucidTick),h.available(1)&&h.pendingChange&&h.pendingChange.timeTillEvent>=3&&f.addTag(ca.ManaGain),this.addEvent(f)};if([...Ei,...mi].includes(this.job)){let h=this.config.timeTillFirstManaTick+this.lucidTickOffset;for(;h>3;)h-=3;const f=new Ce("initial lucid tick",h,s);f.addTag(ca.LucidTick),this.addEvent(f)}const c=()=>{this.dotResources.filter(h=>!this.excludedDoTs.includes(h)).forEach(h=>this.handleDoTTick(h)),this.getDisplayTime()>=0&&p.reportDotTick(this.time),this.addEvent(new Ce("DoT tick",3,()=>{c()}))},d=()=>{this.hotResources.filter(h=>!this.excludedHoTs.includes(h)).forEach(h=>this.handleHoTTick(h)),this.getDisplayTime()>=0&&p.reportHotTick(this.time),this.addEvent(new Ce("HoT tick",3,()=>{d()}))};if(t.forEach(h=>{h.groupedEffects.forEach(f=>{let m=this.dotResources,R=this.#e,T=this.#n,S=this.excludedDoTs;h.isHealing&&(m=this.hotResources,R=this.#t,T=this.#a,S=this.excludedHoTs),m.includes(f.effectName)?console.assert(!1,`${f.effectName} was registered as an over time effect multiple times for ${this.job}`):(m.push(f.effectName),f.appliedBy.forEach(I=>{!h.isHealing&&!this.dotSkills.includes(I)&&this.dotSkills.push(I),h.isHealing&&!this.hotSkills.includes(I)&&this.hotSkills.push(I)}),T.set(f.effectName,h.groupedEffects.filter(I=>I!==f).map(I=>I.effectName)),f.isGroundTargeted&&!R.includes(f.effectName)&&R.push(f.effectName),f.exclude&&!S.includes(f.effectName)&&S.push(f.effectName),!h.isHealing&&h.reportName&&!this.fullTimeDoTs.includes(f.effectName)&&this.fullTimeDoTs.push(f.effectName))})}),a.forEach(h=>this.dotSkills.push(h)),this.overTimeEffectGroups=t,this.dotResources.filter(h=>!this.excludedDoTs.includes(h)).length>0){let h=this.config.timeTillFirstManaTick+this.dotTickOffset;for(;h>3;)h-=3;this.addEvent(new Ce("initial DoT tick",h,c))}if(this.hotResources.filter(h=>!this.excludedHoTs.includes(h)).length>0){let h=this.config.timeTillFirstManaTick+this.hotTickOffset;for(;h>3;)h-=3;this.addEvent(new Ce("initial HoT tick",h,d))}this.jobSpecificRegisterRecurringEvents()}onResolveOverTimeTick(t,a){a==="damage"?this.jobSpecificOnResolveDotTick(t):this.jobSpecificOnResolveHotTick(t)}inherentSpeedModifier(){}jobSpecificRegisterRecurringEvents(){}jobSpecificOnResolveDotTick(t){}jobSpecificOnResolveHotTick(t){}jobSpecificAddDamageBuffCovers(t,a){}jobSpecificAddSpeedBuffCovers(t,a){}jobSpecificAddHealingBuffCovers(t,a){}maybeCancelChanneledSkills(t){const a=this.skillsList.get(t);a&&(a.animationLockFn(this)<=ma||this.cancelChanneledSkills())}cancelChanneledSkills(){}jobSpecificOnAutoAttack(){}onAutoAttack(){this.jobSpecificOnAutoAttack()}getStatusDuration(t){return Ft(this.job,t).maxTimeout}gainStatus(t,a=1){const o=this.resources.get(t),s=Ft(this.job,t);this.hasResourceAvailable(t)?(s.warnOnOvercap&&a>=o.availableAmount()&&p.reportWarning({kind:"overcap",rsc:t}),s.maxTimeout>0&&o.overrideTimer(this,s.maxTimeout),o.availableAmount()!==a&&o.overrideCurrentValue(a)):(o.gain(a),s.maxTimeout>0&&this.enqueueResourceDrop(t))}maybeGainProc(t,a=.5,o=!1){this.triggersEffect(a,o)&&this.gainStatus(t)}triggersEffect(t,a=!1){if(this.config.procMode===ua.Never)return!1;const o=a?this.rng():void 0;return this.config.procMode===ua.Always?!0:(o??this.rng())<t}handleDoTTick(t){this.handleOverTimeTick(t,"damage")}handleHoTTick(t){this.handleOverTimeTick(t,"healing")}handleOverTimeTick(t,a){const o=this.resources.get(t);if(o.availableAmountIncludingDisabled()>0){if(o.node&&o.enabled){const s=o.node.getOverTimePotencies(t,a)[o.tickCount];p.resolveOverTimePotency(s,a),this.onResolveOverTimeTick(t,a)}o.tickCount++}else o.node&&(o.node.removeUnresolvedOvertimePotencies(a),o.node=void 0)}tick(t,a=()=>!1){let o=0;for(;o<t&&this.eventsQueue.length>0&&!a();){this.eventsQueue.sort((h,f)=>h.timeTillEvent-f.timeTillEvent);const s=Math.min(t-o,this.eventsQueue[0].timeTillEvent);o=Math.min(o+s,t),this.time+=s,this.cooldowns.tick(s);const c=[];for(let h=0;h<this.eventsQueue.length;h++)c.push(this.eventsQueue[h]);c.forEach(h=>{h.timeTillEvent-=s});let d=0;c.forEach(h=>{h.timeTillEvent<=An.epsilon&&(h.canceled||h.effectFn(),d++)}),this.eventsQueue.splice(0,d)}return o}addEvent(t){this.eventsQueue.push(t)}getDisplayTime(){return this.time-this.config.countdown}captureManaRegenAmount(){return this.isInCombat()?this.job in tT?ut.mpTick(this.config.level,this.config.piety):200:600}requestToggleBuff(t){const a=this.resources.get(t);if(t==="AUTOS_ENGAGED")return this.toggleAutosEngaged(),!0;if(we[t].mayBeToggled)return a.available(1)?(a.enabled=!1,!0):(a.enabled=!0,!0);if(we[t].mayNotBeCanceled)return!1;if(t==="MEDITATE"){const o=this.findNextQueuedEventByTag(ca.MeditateTick);o&&(o.canceled=!0)}return t==="KARDIA"&&this.tryConsumeResource("KARDION"),(t==="TEN_CHI_JIN"||t==="MUDRA")&&(this.tryConsumeResource("MUDRA"),this.tryConsumeResource("KASSATSU"),this.resources.get("MUDRA_TRACKER").overrideCurrentValue(0),this.resources.get("BUNNY").overrideCurrentValue(0)),a.consume(a.availableAmount()),a.removeTimer(),!0}addRecurringAutoAttackEvent(t,a){const o=(s,c)=>{const d=new Ce("aa tick",s,()=>{this.resources.get("AUTOS_ENGAGED").available(1)&&this.isInCombat()&&this.onAutoAttack(),this.addEvent(o(c,c))});return d.addTag(ca.AutoTick),d};this.addEvent(o(t,a))}findAutoAttackTimerInQueue(){let t=-1;return this.eventsQueue.forEach(a=>{a.name==="aa tick"&&(t=a.timeTillEvent)}),t}startAutoAttackTimer(t,a,o){if(this.findAutoAttackTimerInQueue()!==-1)this.removeAutoAttackTimer();else if(this.resources.get("STORED_AUTO").available(1)){const h=new Ce("stored auto",o||0,()=>{this.onAutoAttack()});this.addEvent(h)}this.tryConsumeResource("STORED_AUTO"),this.resources.get("AUTOS_ENGAGED").availableAmount()===0&&this.resources.get("AUTOS_ENGAGED").gain(1);const c=a||3;let d=0;t===-1?d=c:d=t??c,this.addRecurringAutoAttackEvent(d,c)}removeAutoAttackTimer(){let t=0;this.eventsQueue.forEach(a=>{a.name==="aa tick"&&this.eventsQueue.splice(t,1),t++})}toggleAutosEngaged(){const t=this.findAutoAttackTimerInQueue();if(this.resources.get("AUTOS_ENGAGED").availableAmount()===0)this.startAutoAttackTimer(t===-1?3:t);else if(this.resources.get("AUTOS_ENGAGED").consume(1),t!==-1){this.removeAutoAttackTimer();const a=new Ce("aa tick",t,()=>{this.resources.get("STORED_AUTO").available(0)&&this.resources.get("STORED_AUTO").gain(1)});this.addEvent(a)}}refreshAutoBasedOnSkill(t,a,o){const s=a!==0,c=this.resources.get("AUTOS_ENGAGED").available(1),d=this.autoAttackDelay,h=this.findAutoAttackTimerInQueue(),f=t.startsAuto;if(o){if(this.isInCombat()){if(s&&c){const m=a+(h===-1?d:h);this.startAutoAttackTimer(m,d,a)}else if(!s&&!c)f&&this.startAutoAttackTimer(h,d);else if(s&&!c){if(f){const m=a+(h===-1?d:h);this.startAutoAttackTimer(m,d,a)}else if(h>0){this.removeAutoAttackTimer();const m=new Ce("aa tick",h+a,()=>{this.resources.get("STORED_AUTO").available(0)&&this.resources.get("STORED_AUTO").gain(1)});this.addEvent(m)}}}else if(f){const m=a+(h===-1?d:h);this.startAutoAttackTimer(m,d,a)}}else if(this.isInCombat()){if(s&&c){const m=this.findAutoAttackTimerInQueue(),R=a+(m===-1?d:m);this.startAutoAttackTimer(R)}else if(s&&!c&&h>0){this.removeAutoAttackTimer();const m=new Ce("aa tick",h+a,()=>{this.resources.get("STORED_AUTO").available(0)&&this.resources.get("STORED_AUTO").gain(1)});this.addEvent(m)}}}useSpellOrWeaponskill(t,a,o){const s=this.cooldowns.get(t.cdName),d=!(this.job==="NIN"&&(this.hasResourceAvailable("MUDRA")||this.hasResourceAvailable("KASSATSU"))&&["TEN","CHI","JIN"].includes(t.name))&&t.secondaryCd?this.cooldowns.get(t.secondaryCd.cdName):void 0,h=t.castTimeFn(this),f=t.recastTimeFn(this);this.jobSpecificAddSpeedBuffCovers(a,t);const m=t.potencyFn(this);let R=a.getInitialPotency();const T=this.dotSkills.includes(t.name);!R&&(m>0||t.drawsAggro&&!this.isInCombat()||T)?(this.refreshAutoBasedOnSkill(t,h,!0),R=new $t({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t.name,aspect:t.aspect,basePotency:m,snapshotTime:void 0,description:"",targetCount:a.targetCount,falloff:t.falloff}),a.addPotency(R)):this.refreshAutoBasedOnSkill(t,h,!1);const S=t.healingPotencyFn(this);let I=a.getInitialHealingPotency();!I&&S>0&&(I=new $t({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t.name,aspect:t.aspect,basePotency:S,snapshotTime:void 0,description:"",targetCount:a.healTargetCount,falloff:0}),a.addHealingPotency(I));const C=()=>{const O=t.manaCostFn(this);O>this.resources.get("MANA").availableAmount()?p.reportInterruption({failNode:a,failIndex:o}):O>0&&this.resources.get("MANA").consume(O);const D=m>0||T;if(R&&(R.snapshotTime=this.getDisplayTime(),D)){const x=[];this.hasResourceAvailable("TINCTURE")&&x.push(X.Tincture),x.push(...t.jobPotencyModifiers(this)),R.modifiers=x}D&&(this.hasResourceAvailable("TINCTURE")&&!a.hasBuff(k.Tincture)&&a.addBuff(k.Tincture),this.jobSpecificAddDamageBuffCovers(a,t));const H=S>0;if(I){I.snapshotTime=this.getDisplayTime();const x=[];this.hasResourceAvailable("TINCTURE")&&x.push(X.Tincture),x.push(...t.jobHealingPotencyModifiers(this)),I.modifiers=x}if(H&&(this.hasResourceAvailable("TINCTURE")&&!a.hasBuff(k.Tincture)&&a.addBuff(k.Tincture),this.jobSpecificAddHealingBuffCovers(a,t)),t.onConfirm(this,a),this.addEvent(new Ce(t.name+" applied",t.applicationDelay,()=>{R&&(p.resolvePotency(R),this.hasResourceAvailable("IN_COMBAT")||this.resources.get("IN_COMBAT").gain(1)),I&&p.resolveHealingPotency(I),t.onApplication(this,a)})),R&&!this.hasResourceAvailable("IN_COMBAT")){const x=this.resources.timeTillReady("IN_COMBAT");(x===0||x>t.applicationDelay)&&this.resources.addResourceEvent({rscType:"IN_COMBAT",name:"begin combat if necessary",delay:t.applicationDelay,fnOnRsc:L=>{L.gain(1)}})}};if(h===0||t.isInstantFn(this))this.resources.takeResourceLock("NOT_ANIMATION_LOCKED",t.animationLockFn(this)),C();else{this.resources.takeResourceLock("MOVEMENT",h-li.getSlidecastWindow(h)),this.resources.takeResourceLock("NOT_CASTER_TAXED",this.config.getAfterTaxCastTime(h));const O=h-li.getSlidecastWindow(h);this.addEvent(new Ce(t.name+" captured",O,()=>{t.validateAttempt(this)?C():p.reportInterruption({failNode:a,failIndex:o})}))}s.useStackWithRecast(this.config.getAfterTaxGCD(f)),d?.useStack()}useAbility(t,a){console.assert(a);const o=this.cooldowns.get(t.cdName),s=t.secondaryCd?this.cooldowns.get(t.secondaryCd.cdName):void 0,c=t.potencyFn(this);let d;const h=this.dotSkills.includes(t.name);if((c>0||t.drawsAggro||h)&&(d=new $t({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t.name,aspect:t.aspect,basePotency:c,snapshotTime:this.getDisplayTime(),description:"",targetCount:a.targetCount,falloff:t.falloff})),d&&(c>0||h)){const _=[];this.hasResourceAvailable("TINCTURE")&&_.push(X.Tincture),_.push(...t.jobPotencyModifiers(this)),d.modifiers=_,a.addPotency(d)}const f=this.resources.get("AUTOS_ENGAGED").available(1),m=this.autoAttackDelay,R=this.findAutoAttackTimerInQueue(),T=t.startsAuto||d&&c>0;if(T)if(this.isInCombat())f||T&&this.startAutoAttackTimer(R,m);else{const _=R===-1?m:R;this.startAutoAttackTimer(_,m,void 0)}const S=t.healingPotencyFn(this);let I;if(S>0){I=new $t({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t.name,aspect:t.aspect,basePotency:S,snapshotTime:this.getDisplayTime(),description:"",targetCount:a.healTargetCount,falloff:0});const _=[];this.hasResourceAvailable("TINCTURE")&&_.push(X.Tincture),_.push(...t.jobHealingPotencyModifiers(this)),I.modifiers=_,a.addHealingPotency(I)}(c>0||h)&&!a.hasBuff(k.Tincture)&&(this.hasResourceAvailable("TINCTURE")&&a.addBuff(k.Tincture),this.jobSpecificAddDamageBuffCovers(a,t)),S>0&&(this.hasResourceAvailable("TINCTURE")&&!a.hasBuff(k.Tincture)&&a.addBuff(k.Tincture),this.jobSpecificAddHealingBuffCovers(a,t));const C=t.manaCostFn(this);if(C>0&&this.resources.get("MANA").consume(C),t.onConfirm(this,a),d&&!this.hasResourceAvailable("IN_COMBAT")){const _=this.resources.timeTillReady("IN_COMBAT");(_===0||_>t.applicationDelay)&&this.resources.addResourceEvent({rscType:"IN_COMBAT",name:"begin combat if necessary",delay:t.applicationDelay,fnOnRsc:O=>{O.gain(1)}})}t.applicationDelay>0?this.addEvent(new Ce(t.name+" applied",t.applicationDelay,()=>{d&&p.resolvePotency(d),I&&p.resolveHealingPotency(I),t.onApplication(this,a)})):(d&&p.resolvePotency(d),I&&p.resolveHealingPotency(I),t.onApplication(this,a)),o.useStack(),s?.useStack(),this.resources.takeResourceLock("NOT_ANIMATION_LOCKED",t.animationLockFn(this))}useLimitBreak(t,a,o){const s=this.cooldowns.get(t.cdName),c=t.castTimeFn(this),d=c>0?li.getSlidecastWindow(c):0,h=t.potencyFn(this);let f;h>0&&(f=new $t({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t.name,aspect:t.aspect,basePotency:h,snapshotTime:void 0,description:"",targetCount:a.targetCount,falloff:t.falloff}),a.addPotency(f));const m=t.healingPotencyFn(this);let R;m>0&&(R=new $t({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t.name,aspect:t.aspect,basePotency:m,snapshotTime:void 0,description:"",targetCount:a.healTargetCount,falloff:0}),a.addHealingPotency(R));const T=()=>{t.onConfirm(this,a),f&&(f.snapshotTime=this.getDisplayTime()),R&&(R.snapshotTime=this.getDisplayTime()),this.addEvent(new Ce(t.name+" applied",t.applicationDelay,()=>{f&&p.resolvePotency(f),R&&p.resolveHealingPotency(R),t.onApplication(this,a)})),this.resources.takeResourceLock("NOT_ANIMATION_LOCKED",d+t.animationLockFn(this))};if(c===0)T();else{this.resources.takeResourceLock("MOVEMENT",c-d),this.resources.takeResourceLock("NOT_CASTER_TAXED",this.config.getAfterTaxCastTime(c));const I=c-d;this.addEvent(new Ce(t.name+" captured",I,()=>{t.validateAttempt(this)?T():p.reportInterruption({failNode:a,failIndex:o})}))}s.useStack()}#i(t){const a=this.skillsList.get(t),s=this.job==="NIN"&&(this.hasResourceAvailable("MUDRA")||this.hasResourceAvailable("KASSATSU"))&&["TEN","CHI","JIN"].includes(a.name)?void 0:a.secondaryCd?.cdName;let c=this.cooldowns.timeTillAnyStackAvailable(a.cdName);return s&&(c=Math.max(c,this.cooldowns.timeTillAnyStackAvailable(s))),Math.max(this.timeTillAnySkillAvailable(),c)}timeTillAnySkillAvailable(){const t=this.resources.timeTillReady("NOT_ANIMATION_LOCKED"),a=this.resources.timeTillReady("NOT_CASTER_TAXED");return Math.max(t,a)}findNextQueuedEventByTag(t){for(let a=0;a<this.eventsQueue.length;a++){const o=this.eventsQueue[a];if(o.hasTag(t))return o}}hasResourceAvailable(t,a){return this.resources.get(t).available(a??1)}hasResourceExactly(t,a){return this.resources.get(t).availableAmount()===a}hitPositional(t){return this.hasResourceAvailable("TRUE_NORTH")||t==="flank"&&this.hasResourceAvailable("FLANK_POSITIONAL")||t==="rear"&&this.hasResourceAvailable("REAR_POSITIONAL")}hitCombo(t){return this.hasResourceExactly(t.resource,t.resourceValue)}computeComboAndPositionalModifiers(t,a,o){const s=[];return a&&this.hitCombo(a)?(s.push(Kx(tn(this,a.potency)-t)),o&&this.hitPositional(o.location)&&s.push(Lh(tn(this,o.comboPotency)-tn(this,a.potency)))):o&&this.hitPositional(o.location)&&s.push(Lh(tn(this,o.potency)-t)),s}enqueueResourceDrop(t,a,o){if(a===void 0){const c=Ft(this.job,t);console.assert(c?.maxTimeout,`could not find timeout declaration for resource ${t}`),a=c.maxTimeout}const s=(o===void 0?"drop all ":`drop ${o} `)+t;this.resources.get(t).removeTimer(),this.resources.addResourceEvent({rscType:t,name:s,delay:a,fnOnRsc:c=>{c.consume(o??c.availableAmountIncludingDisabled()),Ft(this.job,c.type).warnOnTimeout&&p.reportWarning({kind:"timeout",rsc:c.type})}})}getOverriddenDots(t){return this.#n.get(t)??[]}getOverriddenHots(t){return this.#a.get(t)??[]}applyDoT(t,a){this.applyOverTimeEffect(t,a,"damage")}applyHoT(t,a,o){this.applyOverTimeEffect(t,a,"healing",o)}applyOverTimeEffect(t,a,o,s){const c=this.resources.get(t),d=s??this.getStatusDuration(t);let h;if((o==="damage"?this.getOverriddenDots(t):this.getOverriddenHots(t)).forEach(m=>{if(m!==t){if(!this.hasResourceAvailable(m)){const R=this.resources.get(m).getLastExpirationTime();if(R){const T=this.getDisplayTime()-R;h=h===void 0?T:Math.min(h,T)}return}a.setOverTimeOverrideAmount(t,a.getOverTimeOverrideAmount(t,o)+this.resources.timeTillReady(m),o),p.reportOverTimeDrop(this.getDisplayTime(),m,o),h=0,this.tryConsumeResource(m)}}),c.available(1))console.assert(c.node),c.node.removeUnresolvedOvertimePotencies(o),a.setOverTimeOverrideAmount(t,a.getOverTimeOverrideAmount(t,o)+this.resources.timeTillReady(t),o),c.overrideTimer(this,d);else{const m=this.getDisplayTime()-(c.getLastExpirationTime()??0);h=h===void 0?m:Math.min(h,m),c.gain(1);const R=o==="damage"?" DoT":" HoT";p.reportOverTimeStart(this.getDisplayTime(),t,o),this.resources.addResourceEvent({rscType:t,name:"drop "+t+R,delay:d,fnOnRsc:T=>{T.consume(1),p.reportOverTimeDrop(this.getDisplayTime(),t,o)}})}a.setOverTimeGap(t,h??0,o),c.node=a,c.tickCount=0,this.#e.includes(t)&&(this.handleDoTTick(t),p.reportDotTick(this.time,t)),this.#t.includes(t)&&(this.handleHoTTick(t),p.reportHotTick(this.time,t))}addDoTPotencies(t){this.addOverTimePotencies(t,"damage")}addHoTPotencies(t,a){this.addOverTimePotencies(t,"healing",a)}addOverTimePotencies(t,a,o){const s=t.modifiers??[];this.hasResourceAvailable("TINCTURE")&&!s.includes(X.Tincture)&&(s.push(X.Tincture),t.node.addBuff(k.Tincture));const c=o??this.getStatusDuration(t.effectName),d=this.#e.includes(t.effectName)||this.#t.includes(t.effectName),h=Math.ceil(c/(t.tickFrequency??3))+(d?1:0),f=a==="damage"?"DoT":"HoT",m=a==="damage"?t.node.targetCount:t.node.healTargetCount;for(let R=0;R<h;R++){const T=new $t({config:p.record.config??p.gameConfig,sourceTime:this.getDisplayTime(),sourceSkill:t.skillName,aspect:t.aspect??Ie.Other,basePotency:this.config.adjustedOvertimePotency(t.tickPotency,t.speedStat),snapshotTime:this.getDisplayTime(),description:Ke(t.effectName)+` ${f} `+(R+1)+`/${h}`,targetCount:m,falloff:0});T.modifiers=s,t.node.addOverTimePotency(T,t.effectName,a)}}refreshDoT(t,a=!1){this.refreshOverTimeEffect(t,"damage",a)}refreshHoT(t,a=!1){this.refreshOverTimeEffect(t,"healing",a)}refreshOverTimeEffect(t,a,o){!o&&!this.hasResourceAvailable(t.effectName)||(this.addOverTimePotencies(t,a),this.applyOverTimeEffect(t.effectName,t.node,a))}timeTillNextMpGainEvent(){const t=this.findNextQueuedEventByTag(ca.ManaGain);return t?t.timeTillEvent:0}timeTillNextDamageEvent(){return this.resources.timeTillReady("IN_COMBAT")}getSkillAvailabilityStatus(t,a=!1){const o=this.skillsList.get(t);let s=this.#i(o.name);const c=o.manaCostFn(this),d=this.job==="BLM"&&this.resources.get("LEY_LINES").available(1),h=o.kind==="weaponskill"||o.kind==="spell"||o.kind==="limitbreak"?o.castTimeFn(this):0,f=h===0||o.kind==="ability"||o.kind!=="limitbreak"&&o.kind!=="unknown"&&o.isInstantFn(this),m=this.resources.get("MANA").availableAmount(),R=s>An.epsilon,T=c<=m,S=o.validateAttempt(this),I=this.config.level>=o.unlockLevel,C=this.job==="NIN"&&(this.hasResourceAvailable("MUDRA")||this.hasResourceAvailable("KASSATSU"))&&["TEN","CHI","JIN"].includes(o.name),_=cu();if(R&&_.addUnavailableReason(Et.Blocked),!C&&o.secondaryCd&&this.cooldowns.get(o.secondaryCd.cdName).stacksAvailable()===0&&_.addUnavailableReason(Et.SecondaryBlocked),I||_.addUnavailableReason(Et.SkillNotUnlocked),S||_.addUnavailableReason(Et.RequirementsNotMet),T||_.addUnavailableReason(Et.NotEnoughMP),o.name==="MEDITATE"&&(s>An.epsilon||this.cooldowns.get("cd_GCD").timeTillNextStackAvailable()>An.epsilon)){const te=_.unavailableReasons.indexOf(Et.RequirementsNotMet);te>=0&&_.unavailableReasons.splice(te,1),_.addUnavailableReason(Et.Blocked)}o.requiresCombat&&_.unavailableReasons.includes(Et.RequirementsNotMet)&&(_.addUnavailableReason(Et.NotInCombat),s=this.timeTillNextDamageEvent());let O=this.cooldowns.get(o.cdName);const D=!C&&o.secondaryCd?this.cooldowns.get(o.secondaryCd.cdName):void 0;let H=O.timeTillNextStackAvailable()%O.currentStackCd();const x=!C&&o.secondaryCd?this.cooldowns.timeTillNextStackAvailable(o.secondaryCd.cdName):void 0;let L=O.currentStackCd();if(t==="MEDITATE"&&H<An.epsilon){const te=this.cooldowns.get("cd_GCD"),ee=te.currentStackCd();te.timeTillNextStackAvailable()>H&&(O=te,L=ee,H=te.timeTillNextStackAvailable(),s=H)}if(C){const te=this.cooldowns.get("cd_GCD"),ee=te.currentStackCd();O=te,L=ee,H=te.timeTillNextStackAvailable(),s=H}const w=O.stacksAvailable(),G=O.maxStacks(),B=D?.currentStackCd()??0;let z=0;_.ready()&&(o.kind==="spell"?z=(f?0:h-li.getSlidecastWindow(h))+o.applicationDelay:o.kind==="limitbreak"?z=h+o.applicationDelay:z=o.applicationDelay);const Q=D?.stacksAvailable()??0,ce=D?.maxStacks()??0,ue=o.highlightIf(this);return{skillName:o.name,status:_,stacksAvailable:ce>0?Q:w,maxStacks:Math.max(G,ce),castTime:h,instantCast:f,cdRecastTime:L,secondaryCdRecastTime:B,timeTillNextStackReady:H,timeTillSecondaryReady:x,timeTillAvailable:s,timeTillDamageApplication:z,capturedManaCost:c,highlight:ue,llCovered:d,usedAt:this.getDisplayTime()}}useSkill(t,a,o){const s=this.skillsList.get(t);s.onExecute(this,a),s.falloff===void 0&&a.setTargetCount(1),s.aoeHeal&&a.setHealTargetCount(this.resources.get("PARTY_SIZE").availableAmount()),s.kind==="spell"||s.kind==="weaponskill"?this.useSpellOrWeaponskill(s,a,o):s.kind==="ability"?this.useAbility(s,a):s.kind==="limitbreak"&&this.useLimitBreak(s,a,o)}useInvalidSkill(t,a){const o=this.skillsList.get(t);if(o.falloff===void 0&&a.setTargetCount(1),o.aoeHeal&&a.setHealTargetCount(this.resources.get("PARTY_SIZE").availableAmount()),o.kind==="spell"||o.kind==="weaponskill"){const s=o.castTimeFn(this),c=o.recastTimeFn(this);s===0||o.isInstantFn(this)?this.resources.takeResourceLock("NOT_ANIMATION_LOCKED",o.animationLockFn(this)):this.resources.takeResourceLock("NOT_CASTER_TAXED",this.config.getAfterTaxCastTime(s)),this.cooldowns.get("cd_GCD").useStackWithRecast(this.config.getAfterTaxGCD(c))}else if(o.kind==="ability")this.resources.takeResourceLock("NOT_ANIMATION_LOCKED",o.animationLockFn(this));else if(o.kind==="limitbreak"){const s=o.castTimeFn(this),c=li.getSlidecastWindow(s);this.resources.takeResourceLock("NOT_ANIMATION_LOCKED",c+o.animationLockFn(this))}}getPartyBuffs(t){const a=new Map;return p.timeline.getBuffMarkers().filter(s=>s.time<=t&&s.time+s.duration>=t).forEach(s=>{const c=new qh(s.description);a.has(c.name)||(c.info.damageFactor===1?a.set(c.name,{kind:"critDirect",source:U.PARTY,buffType:c.name,critBonus:c.info.critBonus,dhBonus:c.info.dhBonus}):a.set(c.name,{kind:"multiplier",source:U.PARTY,buffType:c.name,potencyFactor:c.info.damageFactor}))}),a}tryConsumeResource(t,a=!1){const o=this.resources.get(t),s=a?o.availableAmount():1;return s>0&&o.available(s)?(o.consume(s),o.available(s)||o.removeTimer(),!0):!1}setComboState(t,a){a===0?this.tryConsumeResource(t,!0):(this.resources.get(t).overrideCurrentValue(a),this.enqueueResourceDrop(t,30))}hasTraitUnlocked(t){return XN(t,this.config.level)}isInCombat(){return this.hasResourceAvailable("IN_COMBAT")}}const c0=["THUNDER_III","THUNDER_IV","HIGH_THUNDER","HIGH_THUNDER_II"],ww=Object.keys(HR).filter(e=>!c0.includes(e));Object.keys(HR).forEach(e=>jt(e,`BLM/${we[e].name}.png`));class Gw extends Wt{jobSpecificOtherTargetedBuffViewProps(){return[...c0.map(t=>this.makeCommonTimer(t,!1))]}jobSpecificSelfTargetedBuffViewProps(){return ww.map(t=>t==="LEY_LINES"?this.makeToggleableTimer(t):t==="THUNDERHEAD"||t==="FIRESTARTER"?this.makeCommonTimerless(t):this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){const a=this.state.resources.get("ENOCHIAN"),o=this.state.resources,s=this.state.getFireStacks(),c=this.state.getIceStacks(),d=o.get("UMBRAL_HEART").availableAmount(),h=o.get("PARADOX").availableAmount(),f=o.get("ASTRAL_SOUL").availableAmount(),m=a.available(1)?o.timeTillReady("POLYGLOT"):30,R=o.get("POLYGLOT").availableAmount(),T=this.state.hasTraitUnlocked("ENHANCED_POLYGLOT_II")&&3||this.state.hasTraitUnlocked("ENHANCED_POLYGLOT")&&2||1,S=[{kind:"counter",name:g({en:"AF/UI",zh:"",ja:"AF/UB"}),color:s>0?t.blm.astralFire:t.blm.umbralIce,currentStacks:s>0?s:c,maxStacks:3},{kind:"counter",name:g({en:"hearts",zh:"",ja:""}),color:t.blm.umbralHeart,currentStacks:d,maxStacks:3},{kind:"counter",name:g({en:"paradox",zh:"",ja:""}),color:t.blm.paradox,currentStacks:h,maxStacks:1}];return this.state.hasTraitUnlocked("ENHANCED_ASTRAL_FIRE")&&S.push({kind:"counter",name:g({en:"astral soul",zh:"",ja:""}),color:t.blm.astralSoul,currentStacks:f,maxStacks:6}),S.push({kind:"bar",name:g({en:"poly timer",zh:"",ja:""}),color:t.blm.polyTimer,progress:1-m/30,valueString:m.toFixed(3)},{kind:"counter",name:g({en:"poly stacks",zh:"",ja:""}),color:t.blm.polyStacks,currentStacks:R,maxStacks:T}),S}}const la=(e,t,a)=>{Ve("BLM",e,t,a??{})};la("POLYGLOT",3,{timeout:30,warnOnOvercap:!0});la("ASTRAL_FIRE",3);la("UMBRAL_ICE",3);la("UMBRAL_HEART",3);la("ASTRAL_SOUL",6);la("LEY_LINES",1,{timeout:20});la("ENOCHIAN",1);la("PARADOX",1);la("FIRESTARTER",1);la("THUNDERHEAD",1);la("THUNDER_III",1,{timeout:27});la("THUNDER_IV",1,{timeout:21});la("HIGH_THUNDER",1,{timeout:30});la("HIGH_THUNDER_II",1,{timeout:24});la("MANAWARD",1,{timeout:20});la("TRIPLECAST",3,{timeout:15.7});class Bw extends Xt{thunderTickOffset;constructor(t){super(t),t.initialResourceOverrides.some(d=>(d.type==="ASTRAL_FIRE"||d.type==="UMBRAL_ICE")&&d.stacks>0)&&this.gainStatus("ENOCHIAN"),this.thunderTickOffset=this.nonProcRng()*3;const o=this.hasTraitUnlocked("ENHANCED_POLYGLOT_II")&&3||this.hasTraitUnlocked("ENHANCED_POLYGLOT")&&2||1;this.resources.set(new Jn("POLYGLOT",o,0,!0));const s=this.hasTraitUnlocked("ENHANCED_MANAFONT")&&100||120,c=this.hasTraitUnlocked("ENHANCED_SWIFTCAST")&&40||60;[new He("cd_MANAFONT",s,1,1),new He("cd_SWIFTCAST",c,1,1)].forEach(d=>this.cooldowns.set(d)),this.registerRecurringEvents([{reportName:g({en:"Thunder DoT",zh:"DoT"}),groupedEffects:[{effectName:"HIGH_THUNDER",appliedBy:["HIGH_THUNDER"]},{effectName:"HIGH_THUNDER_II",appliedBy:["HIGH_THUNDER_II"]},{effectName:"THUNDER_III",appliedBy:["THUNDER_III"]},{effectName:"THUNDER_IV",appliedBy:["THUNDER_IV"]}]}])}get statusPropsGenerator(){return new Gw(this)}jobSpecificRegisterRecurringEvents(){const t=a=>{this.hasEnochian()&&a.gain(1),this.resources.addResourceEvent({rscType:"POLYGLOT",name:"gain polyglot if currently has enochian",delay:30,fnOnRsc:t})};this.resources.addResourceEvent({rscType:"POLYGLOT",name:"gain polyglot if currently has enochian",delay:30,fnOnRsc:t})}jobSpecificAddSpeedBuffCovers(t,a){this.hasResourceAvailable("LEY_LINES")&&a.cdName==="cd_GCD"&&t.addBuff(k.LeyLines)}captureManaRegenAmount(){return this.getFireStacks()>0?0:200}getFireStacks(){return this.resources.get("ASTRAL_FIRE").availableAmount()}getIceStacks(){return this.resources.get("UMBRAL_ICE").availableAmount()}getUmbralHearts(){return this.resources.get("UMBRAL_HEART").availableAmount()}getMP(){return this.resources.get("MANA").availableAmount()}switchToAForUI(t,a){console.assert(a>0);const o=this.resources.get("ASTRAL_FIRE"),s=this.resources.get("UMBRAL_ICE"),c=this.resources.get("UMBRAL_HEART"),d=this.resources.get("PARADOX"),h=this.resources.get("ASTRAL_SOUL");t==="ASTRAL_FIRE"?(o.availableAmount()===0&&this.gainStatus("THUNDERHEAD"),o.gain(a),this.hasTraitUnlocked("ASPECT_MASTERY_V")&&s.available(3)&&c.available(3)&&d.gain(1),s.consume(s.availableAmount())):t==="UMBRAL_ICE"&&(s.availableAmount()===0&&this.gainStatus("THUNDERHEAD"),s.gain(a),this.hasTraitUnlocked("ASPECT_MASTERY_V")&&o.available(3)&&d.gain(1),o.consume(o.availableAmount()),h.consume(h.availableAmount()))}gainUmbralMana(t=0){let a=0;switch(this.resources.get("UMBRAL_ICE").availableAmount()){case 1:a=2500;break;case 2:a=5e3;break;case 3:a=1e4;break;default:a=0;break}this.addEvent(new Ce("gain umbral mana",t,()=>{this.resources.get("MANA").gain(a)}))}captureManaCost(t,a,o){const s=this.getIceStacks(),c=this.getFireStacks(),d=this.getUmbralHearts();if(t==="PARADOX"&&this.getIceStacks()>0||t==="FIRE_III"&&this.hasResourceAvailable("FIRESTARTER"))return 0;let h=1;return a===Ie.Fire&&s>0||a===Ie.Ice&&(s>0||c>0)?h=0:a===Ie.Fire&&c>0&&d===0&&(h=2),o*h}captureSpellCastTimeAFUI(t,a){const o=this.config.adjustedCastTime(t,this.hasResourceAvailable("LEY_LINES")?15:void 0);let s=1;return(a===Ie.Fire&&this.getIceStacks()===3||a===Ie.Ice&&this.getFireStacks()===3)&&(s=.5),o*s}hasEnochian(){return this.hasResourceAvailable("ENOCHIAN")}startOrRefreshEnochian(){const t=this.resources.get("ENOCHIAN");t.available(1)||(this.resources.get("POLYGLOT").overrideTimer(this,30),t.gain(1))}loseEnochian(){["ENOCHIAN","ASTRAL_FIRE","UMBRAL_ICE","UMBRAL_HEART","PARADOX","ASTRAL_SOUL"].forEach(a=>this.tryConsumeResource(a,!0))}}const u0=e=>e.resources.get("LEY_LINES").availableAmountIncludingDisabled()>0,OT=e=>e.hasResourceAvailable("PARADOX"),d0=e=>e.hasTraitUnlocked("ENHANCED_ENOCHIAN_IV")&&1.27||e.hasTraitUnlocked("ENHANCED_ENOCHIAN_III")&&1.22||e.hasTraitUnlocked("ENHANCED_ENOCHIAN_II")&&1.15||1.1,an=(e,t,a)=>{const o=a.aspect??Ie.Other,s=Me((c,d)=>{a.baseCastTime===0||e==="DESPAIR"&&c.hasTraitUnlocked("ENHANCED_ASTRAL_FIRE")||e==="FOUL"&&c.hasTraitUnlocked("ENHANCED_FOUL")||e==="FIRE_III"&&c.hasResourceAvailable("FIRESTARTER")||c.tryConsumeResource("SWIFTCAST")||c.tryConsumeResource("TRIPLECAST")},(c,d)=>{c.getFireStacks()>0&&o===Ie.Fire&&!["DESPAIR","FLARE_STAR","FLARE"].includes(e)&&!(e==="FIRE_III"&&c.hasResourceAvailable("FIRESTARTER"))&&c.tryConsumeResource("UMBRAL_HEART"),o===Ie.Ice&&c.gainUmbralMana(a.applicationDelay)},a.onConfirm);return Ka("BLM",e,t,{...a,aspect:o,castTime:c=>c.captureSpellCastTimeAFUI(a.baseCastTime,o),recastTime:c=>c.config.adjustedGCD(2.5,c.hasResourceAvailable("LEY_LINES")?15:0),manaCost:c=>c.captureManaCost(e,o,a.baseManaCost),potency:c=>a.basePotency,isInstantFn:c=>e==="DESPAIR"&&c.hasTraitUnlocked("ENHANCED_ASTRAL_FIRE")||e==="FOUL"&&c.hasTraitUnlocked("ENHANCED_FOUL")||e==="FIRE_III"&&c.hasResourceAvailable("FIRESTARTER")||c.hasResourceAvailable("SWIFTCAST")||c.hasResourceAvailable("TRIPLECAST"),onConfirm:s,jobPotencyModifiers:c=>{const d=[];if(c.hasResourceAvailable("ENOCHIAN")){const m=d0(c);d.push({kind:"multiplier",source:U.ENO,potencyFactor:m})}const h=c.getIceStacks(),f=c.getFireStacks();return h===1?o===Ie.Fire?d.push({kind:"multiplier",source:U.UI1,potencyFactor:.9}):o===Ie.Ice&&d.push({kind:"multiplier",source:U.UI1,potencyFactor:1}):h===2?o===Ie.Fire?d.push({kind:"multiplier",source:U.UI2,potencyFactor:.8}):o===Ie.Ice&&d.push({kind:"multiplier",source:U.UI2,potencyFactor:1}):h===3&&(o===Ie.Fire?d.push({kind:"multiplier",source:U.UI3,potencyFactor:.7}):o===Ie.Ice&&d.push({kind:"multiplier",source:U.UI3,potencyFactor:1})),f===1?o===Ie.Ice?d.push({kind:"multiplier",source:U.AF1,potencyFactor:.9}):o===Ie.Fire&&d.push({kind:"multiplier",source:U.AF1,potencyFactor:1.4}):f===2?o===Ie.Ice?d.push({kind:"multiplier",source:U.AF2,potencyFactor:.8}):o===Ie.Fire&&d.push({kind:"multiplier",source:U.AF2,potencyFactor:1.6}):f===3&&(o===Ie.Ice?d.push({kind:"multiplier",source:U.AF3,potencyFactor:.7}):o===Ie.Fire&&d.push({kind:"multiplier",source:U.AF3,potencyFactor:1.8})),d}})},Ts=(e,t,a,o)=>at("BLM",e,t,a,o);an("BLIZZARD",1,{aspect:Ie.Ice,baseCastTime:2,baseManaCost:400,basePotency:180,applicationDelay:.846,onConfirm:(e,t)=>{e.getFireStacks()===0?(e.switchToAForUI("UMBRAL_ICE",1),e.startOrRefreshEnochian()):(e.resources.get("ENOCHIAN").removeTimer(),e.loseEnochian())},replaceIf:[{newSkill:"PARADOX",condition:OT}]});an("FIRE",2,{aspect:Ie.Fire,baseCastTime:2,baseManaCost:800,basePotency:180,applicationDelay:1.871,onConfirm:(e,t)=>{e.triggersEffect(.4,!0)&&e.gainStatus("FIRESTARTER"),e.getIceStacks()===0?(e.switchToAForUI("ASTRAL_FIRE",1),e.startOrRefreshEnochian()):(e.resources.get("ENOCHIAN").removeTimer(),e.loseEnochian())},replaceIf:[{newSkill:"PARADOX",condition:OT}]});Ts("TRANSPOSE",4,"cd_TRANSPOSE",{applicationDelay:0,cooldown:5,validateAttempt:e=>e.getFireStacks()>0||e.getIceStacks()>0,onApplication:(e,t)=>{(e.getFireStacks()!==0||e.getIceStacks()!==0)&&(e.switchToAForUI(e.getFireStacks()>0?"UMBRAL_ICE":"ASTRAL_FIRE",1),e.startOrRefreshEnochian())}});const Mf=(e,t)=>(a,o)=>{let s=0;switch(e){case"HIGH_THUNDER":s=60;break;case"THUNDER_III":s=50;break;case"THUNDER_IV":s=35;break;case"HIGH_THUNDER_II":s=40;break}const c=[];if(a.hasResourceAvailable("ENOCHIAN")){const d=d0(a);c.push({kind:"multiplier",source:U.ENO,potencyFactor:d})}console.assert(s>0,`${e} was applied as a Thunder DoT`),a.addDoTPotencies({node:o,effectName:t,skillName:e,tickPotency:s,speedStat:"sps",aspect:Ie.Lightning,modifiers:c}),a.tryConsumeResource("THUNDERHEAD")};an("THUNDER_III",45,{aspect:Ie.Lightning,baseCastTime:0,baseManaCost:0,basePotency:120,applicationDelay:1.03,validateAttempt:e=>e.hasResourceAvailable("THUNDERHEAD"),onConfirm:Mf("THUNDER_III","THUNDER_III"),onApplication:(e,t)=>e.applyDoT("THUNDER_III",t),autoUpgrade:{trait:"THUNDER_MASTERY_III",otherSkill:"HIGH_THUNDER"},highlightIf:e=>e.hasResourceAvailable("THUNDERHEAD")});je("BLM","MANAWARD",30,"cd_MANAWARD",{rscType:"MANAWARD",applicationDelay:1.114,cooldown:120});Ts("MANAFONT",30,"cd_MANAFONT",{applicationDelay:.2,cooldown:100,validateAttempt:e=>e.getFireStacks()>0,onConfirm:(e,t)=>{e=e,e.resources.get("ASTRAL_FIRE").gain(3),e.resources.get("UMBRAL_HEART").gain(3),e.hasTraitUnlocked("ASPECT_MASTERY_V")&&e.resources.get("PARADOX").gain(1),e.gainStatus("THUNDERHEAD"),e.startOrRefreshEnochian()},onApplication:(e,t)=>{e.resources.get("MANA").gain(1e4)}});an("FIRE_III",35,{aspect:Ie.Fire,baseCastTime:3.5,baseManaCost:2e3,basePotency:290,applicationDelay:1.292,onConfirm:(e,t)=>{e.tryConsumeResource("FIRESTARTER"),e.switchToAForUI("ASTRAL_FIRE",3),e.startOrRefreshEnochian()},highlightIf:e=>e.hasResourceAvailable("FIRESTARTER")});an("BLIZZARD_III",35,{aspect:Ie.Ice,baseCastTime:3.5,baseManaCost:800,basePotency:290,applicationDelay:.89,onConfirm:(e,t)=>{e.switchToAForUI("UMBRAL_ICE",3),e.startOrRefreshEnochian()}});an("FREEZE",40,{aspect:Ie.Ice,baseCastTime:2,baseManaCost:1e3,basePotency:120,applicationDelay:.664,falloff:0,validateAttempt:e=>e.getIceStacks()>0,onConfirm:(e,t)=>e.resources.get("UMBRAL_HEART").gain(3)});an("FLARE",50,{aspect:Ie.Fire,baseCastTime:2,baseManaCost:0,basePotency:240,applicationDelay:1.157,falloff:.3,validateAttempt:e=>e.getFireStacks()>0&&e.getMP()>=800,onConfirm:(e,t)=>{const a=e.resources.get("UMBRAL_HEART"),o=e.resources.get("MANA"),s=a.available(1)?o.availableAmount()*.66:o.availableAmount();e.resources.get("MANA").consume(s),a.consume(a.availableAmount()),e.resources.get("ASTRAL_FIRE").gain(3),e.hasTraitUnlocked("ENHANCED_ASTRAL_FIRE")&&e.resources.get("ASTRAL_SOUL").gain(3),e.startOrRefreshEnochian()}});je("BLM","LEY_LINES",52,"cd_LEY_LINES",{rscType:"LEY_LINES",applicationDelay:.49,cooldown:120,maxCharges:2,validateAttempt:e=>!(e.resources.get("LEY_LINES").availableAmountIncludingDisabled()>0),onApplication:(e,t)=>{e.resources.get("LEY_LINES").enabled=!0},replaceIf:[{newSkill:"RETRACE",condition:u0}]});an("BLIZZARD_IV",58,{aspect:Ie.Ice,baseCastTime:2,baseManaCost:800,basePotency:300,applicationDelay:1.156,validateAttempt:e=>e.getIceStacks()>0,onConfirm:(e,t)=>e.resources.get("UMBRAL_HEART").gain(3)});an("FIRE_IV",60,{aspect:Ie.Fire,baseCastTime:2,baseManaCost:800,basePotency:300,applicationDelay:1.159,validateAttempt:e=>e.getFireStacks()>0,onConfirm:(e,t)=>{e.hasTraitUnlocked("ENHANCED_ASTRAL_FIRE")&&e.resources.get("ASTRAL_SOUL").gain(1)}});Ts("BETWEEN_THE_LINES",62,"cd_BETWEEN_THE_LINES",{applicationDelay:0,cooldown:3,animationLock:Vt,validateAttempt:e=>e.resources.get("LEY_LINES").availableAmountIncludingDisabled()>0,onConfirm:(e,t)=>{e.resources.get("LEY_LINES").enabled=!0}});Ts("AETHERIAL_MANIPULATION",50,"cd_AETHERIAL_MANIPULATION",{applicationDelay:0,cooldown:10,animationLock:Vt});Ts("TRIPLECAST",66,"cd_TRIPLECAST",{applicationDelay:0,cooldown:60,maxCharges:2,onApplication:(e,t)=>e.gainStatus("TRIPLECAST",3)});an("FOUL",70,{baseCastTime:2,baseManaCost:0,basePotency:600,falloff:.25,applicationDelay:1.158,validateAttempt:e=>e.hasResourceAvailable("POLYGLOT"),onConfirm:(e,t)=>e.resources.get("POLYGLOT").consume(1),highlightIf:e=>e.hasResourceAvailable("POLYGLOT")});an("DESPAIR",72,{aspect:Ie.Fire,baseCastTime:2,baseManaCost:0,basePotency:350,applicationDelay:.556,validateAttempt:e=>e.getFireStacks()>0&&e.getMP()>=800,onConfirm:(e,t)=>{const a=e.resources.get("MANA"),o=a.availableAmount();console.assert(o>=800,`tried to confirm despair at ${o} MP`),a.consume(o),e.resources.get("ASTRAL_FIRE").gain(3),e.startOrRefreshEnochian()}});an("UMBRAL_SOUL",35,{aspect:Ie.Ice,baseCastTime:0,baseManaCost:0,basePotency:0,applicationDelay:.633,validateAttempt:e=>e.getIceStacks()>0,onConfirm:(e,t)=>{e.resources.get("UMBRAL_ICE").gain(1),e.resources.get("UMBRAL_HEART").gain(1)}});an("XENOGLOSSY",80,{baseCastTime:0,baseManaCost:0,basePotency:890,applicationDelay:.63,validateAttempt:e=>e.hasResourceAvailable("POLYGLOT"),onConfirm:(e,t)=>e.resources.get("POLYGLOT").consume(1),highlightIf:e=>e.hasResourceAvailable("POLYGLOT")});an("FIRE_II",18,{aspect:Ie.Fire,baseCastTime:3,baseManaCost:1500,basePotency:80,falloff:0,applicationDelay:1.154,autoUpgrade:{trait:"ASPECT_MASTERY_IV",otherSkill:"HIGH_FIRE_II"},onConfirm:(e,t)=>{e.switchToAForUI("ASTRAL_FIRE",3),e.startOrRefreshEnochian()}});an("BLIZZARD_II",12,{aspect:Ie.Ice,baseCastTime:3,baseManaCost:800,basePotency:80,falloff:0,applicationDelay:1.158,autoUpgrade:{trait:"ASPECT_MASTERY_IV",otherSkill:"HIGH_BLIZZARD_II"},onConfirm:(e,t)=>{e.switchToAForUI("UMBRAL_ICE",3),e.startOrRefreshEnochian()}});an("HIGH_FIRE_II",82,{aspect:Ie.Fire,baseCastTime:3,baseManaCost:1500,basePotency:100,falloff:0,applicationDelay:1.154,autoDowngrade:{trait:"ASPECT_MASTERY_IV",otherSkill:"FIRE_II"},onConfirm:(e,t)=>{e.switchToAForUI("ASTRAL_FIRE",3),e.startOrRefreshEnochian()}});an("HIGH_BLIZZARD_II",82,{aspect:Ie.Ice,baseCastTime:3,baseManaCost:800,basePotency:100,falloff:0,applicationDelay:1.158,autoDowngrade:{trait:"ASPECT_MASTERY_IV",otherSkill:"BLIZZARD_II"},onConfirm:(e,t)=>{e.switchToAForUI("UMBRAL_ICE",3),e.startOrRefreshEnochian()}});Ts("AMPLIFIER",86,"cd_AMPLIFIER",{applicationDelay:0,cooldown:120,validateAttempt:e=>e.getFireStacks()>0||e.getIceStacks()>0,onApplication:(e,t)=>{e.resources.get("POLYGLOT").gain(1)}});an("PARADOX",90,{baseCastTime:0,baseManaCost:1600,basePotency:540,applicationDelay:.624,validateAttempt:OT,onConfirm:(e,t)=>{e.resources.get("PARADOX").consume(1),e.getFireStacks()>0?e.gainStatus("FIRESTARTER"):e.getIceStacks()===0&&console.error("cannot cast Paradox outside of AF/UI")},replaceIf:[{newSkill:"BLIZZARD",condition:e=>!e.hasResourceAvailable("PARADOX")&&e.getIceStacks()>0},{newSkill:"FIRE",condition:e=>!e.hasResourceAvailable("PARADOX")&&e.getFireStacks()>0}],startOnHotbar:!1,highlightIf:e=>!0});an("HIGH_THUNDER",92,{aspect:Ie.Lightning,baseCastTime:0,baseManaCost:0,basePotency:150,applicationDelay:.757,validateAttempt:e=>e.hasResourceAvailable("THUNDERHEAD"),onConfirm:Mf("HIGH_THUNDER","HIGH_THUNDER"),onApplication:(e,t)=>e.applyDoT("HIGH_THUNDER",t),autoDowngrade:{trait:"THUNDER_MASTERY_III",otherSkill:"THUNDER_III"},highlightIf:e=>e.hasResourceAvailable("THUNDERHEAD")});an("FLARE_STAR",100,{aspect:Ie.Fire,baseCastTime:2,baseManaCost:0,basePotency:500,falloff:.65,applicationDelay:.622,validateAttempt:e=>e.hasResourceAvailable("ASTRAL_SOUL",6),onConfirm:(e,t)=>e.tryConsumeResource("ASTRAL_SOUL",!0),highlightIf:e=>e.hasResourceAvailable("ASTRAL_SOUL",6)});an("THUNDER_IV",64,{aspect:Ie.Lightning,baseCastTime:0,baseManaCost:0,basePotency:80,falloff:0,applicationDelay:1.16,validateAttempt:e=>e.hasResourceAvailable("THUNDERHEAD"),onConfirm:Mf("THUNDER_IV","THUNDER_IV"),onApplication:(e,t)=>e.applyDoT("THUNDER_IV",t),autoUpgrade:{trait:"THUNDER_MASTERY_III",otherSkill:"HIGH_THUNDER_II"},highlightIf:e=>e.hasResourceAvailable("THUNDERHEAD")});an("HIGH_THUNDER_II",92,{aspect:Ie.Lightning,baseCastTime:0,baseManaCost:0,basePotency:100,falloff:0,applicationDelay:.8,validateAttempt:e=>e.hasResourceAvailable("THUNDERHEAD"),onConfirm:Mf("HIGH_THUNDER_II","HIGH_THUNDER_II"),onApplication:(e,t)=>e.applyDoT("HIGH_THUNDER_II",t),autoDowngrade:{trait:"THUNDER_MASTERY_III",otherSkill:"THUNDER_IV"},highlightIf:e=>e.hasResourceAvailable("THUNDERHEAD")});Ts("RETRACE",96,"cd_RETRACE",{applicationDelay:0,cooldown:40,validateAttempt:u0,onConfirm:(e,t)=>{const a=e.resources.get("LEY_LINES");a.enabled=!0,console.assert(a.pendingChange!==void 0,"LL should def have a timer when Retrace is used"),a.pendingChange.timeTillEvent=Math.floor(a.pendingChange.timeTillEvent)+.5},startOnHotbar:!1});const h0=["CAUSTIC_BITE","STORMBITE"],Fw=Object.keys(kR).filter(e=>!h0.includes(e));Object.keys(kR).forEach(e=>jt(e,`BRD/${we[e].name}.png`));class jw extends Wt{jobSpecificOtherTargetedBuffViewProps(){return[...h0.map(t=>this.makeCommonTimer(t,!1))]}jobSpecificSelfTargetedBuffViewProps(){return[...Fw.map(t=>this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){const a=this.state.resources,o=a.get("PITCH_PERFECT"),s=a.get("REPERTOIRE"),c=[{kind:"counter",name:g({en:"Pitch Perfect"}),color:t.brd.pitchPerfect,currentStacks:o.availableAmount(),maxStacks:o.maxValue},{kind:"counter",name:g({en:"Paeon Repertoire"}),color:t.brd.repertoire,currentStacks:s.availableAmount(),maxStacks:s.maxValue}];if(this.state.hasTraitUnlocked("SOUL_VOICE")){const d=a.get("SOUL_VOICE");c.push({kind:"bar",name:g({en:"Soul Voice"}),color:t.brd.soulVoice,progress:d.availableAmount()/d.maxValue,valueString:d.availableAmount().toFixed(0)})}return this.state.hasTraitUnlocked("MINSTRELS_CODA")&&c.push({kind:"coda",name:g({en:"Coda"}),hasWanderers:this.state.hasResourceAvailable("WANDERERS_CODA"),hasMages:this.state.hasResourceAvailable("MAGES_CODA"),hasArmys:this.state.hasResourceAvailable("ARMYS_CODA"),wanderersColor:t.brd.wanderersCoda,magesColor:t.brd.magesCoda,armysColor:t.brd.armysCoda}),c}}const vt=(e,t,a)=>{Ve("BRD",e,t,a??{})};vt("SOUL_VOICE",100,{warnOnOvercap:!0});vt("PITCH_PERFECT",3);vt("REPERTOIRE",4);vt("WANDERERS_CODA",1,{warnOnOvercap:!0});vt("MAGES_CODA",1,{warnOnOvercap:!0});vt("ARMYS_CODA",1,{warnOnOvercap:!0});vt("ETHOS_REPERTOIRE",4);vt("MUSE_REPERTOIRE",4);vt("HAWKS_EYE",1,{timeout:30});vt("RAGING_STRIKES",1,{timeout:20});vt("BARRAGE",1,{timeout:10});vt("ARMYS_MUSE",4,{timeout:10});vt("ARMYS_ETHOS",4,{timeout:30});vt("BLAST_ARROW_READY",1,{timeout:10});vt("RESONANT_ARROW_READY",1,{timeout:30});vt("RADIANT_ENCORE_READY",1,{timeout:30});vt("MAGES_BALLAD",1,{timeout:45});vt("ARMYS_PAEON",1,{timeout:45});vt("WANDERERS_MINUET",1,{timeout:45});vt("BATTLE_VOICE",1,{timeout:20});vt("WARDENS_PAEAN",1,{timeout:30});vt("TROUBADOUR",1,{timeout:15});vt("NATURES_MINNE",1,{timeout:15});vt("RADIANT_FINALE",1,{timeout:20});vt("RADIANT_CODA",3);vt("CAUSTIC_BITE",1,{timeout:45});vt("STORMBITE",1,{timeout:45});const lN=["WANDERERS_MINUET","MAGES_BALLAD","ARMYS_PAEON"],zw=["REFULGENT_ARROW","SHADOWBITE","WIDE_VOLLEY"];class Yw extends Xt{constructor(t){super(t),this.hasTraitUnlocked("ENHANCED_BLOODLETTER")||this.cooldowns.set(new He("cd_HEARTBREAK_SHOT",15,2,2)),this.hasTraitUnlocked("ENHANCED_TROUBADOUR")||this.cooldowns.set(new He("cd_TROUBADOUR",120,1,1)),this.registerRecurringEvents([{reportName:Ke("STORMBITE"),groupedEffects:[{effectName:"STORMBITE",appliedBy:["STORMBITE","IRON_JAWS"]}]},{reportName:Ke("CAUSTIC_BITE"),groupedEffects:[{effectName:"CAUSTIC_BITE",appliedBy:["CAUSTIC_BITE","IRON_JAWS"]}]}])}get statusPropsGenerator(){return new jw(this)}jobSpecificAddDamageBuffCovers(t,a){switch(this.hasResourceAvailable("RAGING_STRIKES")&&t.addBuff(k.RagingStrikes),this.hasResourceAvailable("BATTLE_VOICE")&&t.addBuff(k.BattleVoice),this.resources.get("RADIANT_FINALE").availableAmount()){case 1:t.addBuff(k.RadiantFinale1);break;case 2:t.addBuff(k.RadiantFinale2);break;case 3:t.addBuff(k.RadiantFinale3);break}this.hasResourceAvailable("BARRAGE")&&zw.includes(a.name)&&t.addBuff(k.Barrage),this.hasResourceAvailable("WANDERERS_MINUET")?t.addBuff(k.WanderersMinuet):this.hasResourceAvailable("MAGES_BALLAD")?t.addBuff(k.MagesBallad):this.hasResourceAvailable("ARMYS_PAEON")&&t.addBuff(k.ArmysPaeon)}songTick(t){this.resourceIsSong(t)&&this.hasResourceAvailable(t)&&(this.triggersEffect(.8)&&this.gainRepertoireEffect(t),this.resources.timeTillReady(t)>3+An.epsilon&&this.addEvent(new Ce(`${t} tick`,3,()=>{this.songTick(t)})))}gainRepertoireEffect(t){if(t||(this.hasResourceAvailable("WANDERERS_MINUET")?t="WANDERERS_MINUET":this.hasResourceAvailable("MAGES_BALLAD")?t="MAGES_BALLAD":this.hasResourceAvailable("ARMYS_PAEON")&&(t="ARMYS_PAEON")),!!t&&this.resourceIsSong(t)){switch(t){case"WANDERERS_MINUET":this.resources.get("PITCH_PERFECT").gain(1);break;case"MAGES_BALLAD":this.cooldowns.get("cd_HEARTBREAK_SHOT").restore(7.5);break;case"ARMYS_PAEON":this.resources.get("REPERTOIRE").gain(1);break}this.hasTraitUnlocked("SOUL_VOICE")&&this.resources.get("SOUL_VOICE").gain(5)}}resourceIsSong(t){return lN.includes(t)}beginSong(t){if(this.resourceIsSong(t)){if(lN.forEach(a=>this.tryExpireSong(a)),t!=="ARMYS_PAEON"&&this.hasResourceAvailable("ARMYS_ETHOS")){const a=this.resources.get("ETHOS_REPERTOIRE").availableAmount();this.resources.get("MUSE_REPERTOIRE").gain(a),this.tryConsumeResource("ARMYS_ETHOS"),this.tryConsumeResource("ETHOS_REPERTOIRE",!0),this.gainStatus("ARMYS_MUSE")}if(this.hasTraitUnlocked("MINSTRELS_CODA")){const a=t==="WANDERERS_MINUET"?"WANDERERS_CODA":t==="MAGES_BALLAD"?"MAGES_CODA":"ARMYS_CODA";this.resources.get(a).gain(1)}this.resources.get(t).gain(1),this.resources.addResourceEvent({rscType:t,name:"drop "+t,delay:this.getStatusDuration(t),fnOnRsc:a=>this.tryExpireSong(t)}),this.addEvent(new Ce(`${t} tick`,3,()=>{this.songTick(t)}))}}tryExpireSong(t){if(this.resourceIsSong(t)&&this.hasResourceAvailable(t)){switch(t){case"WANDERERS_MINUET":this.tryConsumeResource("PITCH_PERFECT",!0);break;case"ARMYS_PAEON":if(this.hasTraitUnlocked("ENHANCED_ARMYS_PAEON")){const a=this.resources.get("REPERTOIRE").availableAmount();a>0&&(this.resources.get("ETHOS_REPERTOIRE").gain(a),this.gainStatus("ARMYS_ETHOS")),this.tryConsumeResource("MUSE_REPERTOIRE",!0)}this.tryConsumeResource("REPERTOIRE",!0);break}this.tryConsumeResource(t)}}getCodaCount(){const t=this.resources.get("WANDERERS_CODA").availableAmount(),a=this.resources.get("MAGES_CODA").availableAmount(),o=this.resources.get("ARMYS_CODA").availableAmount();return t+a+o}getJobPotencyModifiers(t){const a=[];if([{rscType:"WANDERERS_MINUET",mod:X.WanderersMinuet},{rscType:"MAGES_BALLAD",mod:X.MagesBallad},{rscType:"ARMYS_PAEON",mod:X.ArmysPaeon},{rscType:"RAGING_STRIKES",mod:X.RagingStrikes},{rscType:"BATTLE_VOICE",mod:X.BattleVoice}].forEach(s=>{this.hasResourceAvailable(s.rscType)&&a.push(s.mod)}),this.hasResourceAvailable("RADIANT_FINALE")){const s=this.resources.get("RADIANT_CODA").availableAmount();s===3?a.push(X.RadiantFinaleThreeCoda):s===2?a.push(X.RadiantFinaleTwoCoda):s===1&&a.push(X.RadiantFinaleOneCoda)}if(this.hasResourceAvailable("BARRAGE"))switch(t){case"REFULGENT_ARROW":a.push(X.BarrageRefulgent);break;case"SHADOWBITE":a.push(X.BarrageShadowbite);break;case"WIDE_VOLLEY":a.push(X.BarrageWideVolley);break}return a}getSpeedModifier(t){if(t==="ARMYS_PAEON")return this.resources.get("REPERTOIRE").availableAmount()*4;if(t==="ARMYS_MUSE"){const a=this.resources.get("MUSE_REPERTOIRE").availableAmount();return a===4?12:a===3?4:a}return 0}}const Va=(e,t,a)=>nn("BRD",e,t,{...a,recastTime:o=>{let s;o.hasResourceAvailable("ARMYS_PAEON")?s="ARMYS_PAEON":o.hasResourceAvailable("ARMYS_MUSE")&&(s="ARMYS_MUSE");const c=o.getSpeedModifier(s);return o.config.adjustedSksGCD(2.5,c)},jobPotencyModifiers:o=>o.getJobPotencyModifiers(e)}),Nl=(e,t,a,o)=>at("BRD",e,t,a,{...o,jobPotencyModifiers:s=>s.getJobPotencyModifiers(e)}),Ss=(e,t,a,o)=>je("BRD",e,t,a,o);Va("HEAVY_SHOT",1,{potency:160,applicationDelay:1.47,onApplication:e=>e.maybeGainProc("HAWKS_EYE",.2),autoUpgrade:{trait:"HEAVY_SHOT_MASTERY",otherSkill:"BURST_SHOT"}});Va("BURST_SHOT",1,{startOnHotbar:!1,potency:[["NEVER",200],["RANGED_MASTERY",220]],applicationDelay:1.47,onApplication:e=>e.maybeGainProc("HAWKS_EYE",.35)});Va("REFULGENT_ARROW",70,{potency:[["NEVER",260],["RANGED_MASTERY",280]],applicationDelay:1.47,onConfirm:e=>{e.hasResourceAvailable("BARRAGE")?e.tryConsumeResource("BARRAGE"):e.tryConsumeResource("HAWKS_EYE")},validateAttempt:e=>e.hasResourceAvailable("HAWKS_EYE")||e.hasResourceAvailable("BARRAGE"),highlightIf:e=>e.hasResourceAvailable("HAWKS_EYE")||e.hasResourceAvailable("BARRAGE")});const AR=[{skillName:"CAUSTIC_BITE",dotName:"CAUSTIC_BITE",initialPotency:150,tickPotency:20},{skillName:"STORMBITE",dotName:"STORMBITE",initialPotency:100,tickPotency:25}];AR.forEach(e=>{Va(e.skillName,1,{potency:e.initialPotency,applicationDelay:1.29,onConfirm:(t,a)=>t.addDoTPotencies({node:a,effectName:e.dotName,skillName:e.skillName,tickPotency:e.tickPotency,speedStat:"sks",modifiers:t.getJobPotencyModifiers(e.skillName)}),onApplication:(t,a)=>{t.applyDoT(e.dotName,a),t.hasTraitUnlocked("BITE_MASTERY_II")&&t.maybeGainProc("HAWKS_EYE",.35)}})});Va("IRON_JAWS",56,{potency:100,applicationDelay:.67,onConfirm:(e,t)=>{const a=AR.map(o=>e.hasResourceAvailable(o.dotName));e.addEvent(new Ce("iron jaws dot refresh",.67,()=>{AR.forEach((o,s)=>{e.refreshDoT({node:t,effectName:o.dotName,tickPotency:o.tickPotency,skillName:"IRON_JAWS",speedStat:"sks",modifiers:e.getJobPotencyModifiers("IRON_JAWS")},a[s])}),e.hasTraitUnlocked("BITE_MASTERY_II")&&e.maybeGainProc("HAWKS_EYE",.35)}))}});Va("APEX_ARROW",80,{potency:e=>{const t=e.resources.get("SOUL_VOICE"),a=20,o=e.hasTraitUnlocked("RANGED_MASTERY")?140:100,s=e.hasTraitUnlocked("RANGED_MASTERY")?700:500,c=1*(t.availableAmount()-a)/(t.maxValue-a);return(s-o)*c+o},falloff:0,applicationDelay:1.07,onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_APEX_ARROW")&&e.resources.get("SOUL_VOICE").availableAmount()>=80&&e.gainStatus("BLAST_ARROW_READY"),e.tryConsumeResource("SOUL_VOICE",!0)},validateAttempt:e=>e.hasResourceAvailable("SOUL_VOICE",20),highlightIf:e=>e.hasResourceAvailable("SOUL_VOICE",80),replaceIf:[{newSkill:"BLAST_ARROW",condition:e=>e.hasResourceAvailable("BLAST_ARROW_READY")}]});Va("BLAST_ARROW",86,{startOnHotbar:!1,potency:[["NEVER",600],["RANGED_MASTERY",700]],falloff:.5,applicationDelay:1.65,validateAttempt:e=>e.hasResourceAvailable("BLAST_ARROW_READY"),highlightIf:e=>e.hasResourceAvailable("BLAST_ARROW_READY"),onConfirm:e=>e.tryConsumeResource("BLAST_ARROW_READY")});Nl("EMYPREAL_ARROW",54,"cd_EMPYREAL_ARROW",{potency:[["NEVER",240],["RANGED_MASTERY",260]],cooldown:15,applicationDelay:1.03,onConfirm:e=>e.gainRepertoireEffect()});Nl("BLOODLETTER",12,"cd_HEARTBREAK_SHOT",{potency:130,cooldown:15,maxCharges:3,applicationDelay:1.65,autoUpgrade:{otherSkill:"HEARTBREAK_SHOT",trait:"BLOODLETTER_MASTERY"}});Nl("HEARTBREAK_SHOT",92,"cd_HEARTBREAK_SHOT",{startOnHotbar:!1,potency:180,cooldown:15,maxCharges:3,applicationDelay:1.65});Nl("SIDEWINDER",60,"cd_SIDEWINDER",{potency:[["NEVER",320],["RANGED_MASTERY",400]],cooldown:60,applicationDelay:.53});const Kw=[{skillName:"WANDERERS_MINUET",song:"WANDERERS_MINUET",skillLevel:52,cdName:"cd_WANDERERS_MINUET",replaceIf:[{newSkill:"PITCH_PERFECT",condition:e=>e.hasResourceAvailable("WANDERERS_MINUET")}]},{skillName:"MAGES_BALLAD",song:"MAGES_BALLAD",skillLevel:30,cdName:"cd_MAGES_BALLAD"},{skillName:"ARMYS_PAEON",song:"ARMYS_PAEON",skillLevel:40,cdName:"cd_ARMYS_PAEON"}];Kw.forEach(e=>{Nl(e.skillName,e.skillLevel,e.cdName,{applicationDelay:0,requiresCombat:!0,cooldown:120,replaceIf:e.replaceIf,onConfirm:t=>t.beginSong(e.song)})});Nl("PITCH_PERFECT",52,"cd_PITCH_PERFECT",{startOnHotbar:!1,applicationDelay:.8,cooldown:1,potency:e=>{const t=e.resources.get("PITCH_PERFECT").availableAmount();return t===3?360:t===2?220:100},falloff:.5,onConfirm:e=>e.tryConsumeResource("PITCH_PERFECT",!0),validateAttempt:e=>e.hasResourceAvailable("WANDERERS_MINUET")&&e.hasResourceAvailable("PITCH_PERFECT"),highlightIf:e=>e.hasResourceAvailable("WANDERERS_MINUET")&&e.hasResourceAvailable("PITCH_PERFECT")});Ss("BARRAGE",38,"cd_BARRAGE",{rscType:"BARRAGE",applicationDelay:0,cooldown:120,onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_BARRAGE")&&e.gainStatus("RESONANT_ARROW_READY")},replaceIf:[{newSkill:"RESONANT_ARROW",condition:e=>e.hasResourceAvailable("RESONANT_ARROW_READY")}]});Va("RESONANT_ARROW",96,{startOnHotbar:!1,potency:640,falloff:.5,applicationDelay:1.16,onConfirm:e=>e.tryConsumeResource("RESONANT_ARROW_READY"),validateAttempt:e=>e.hasResourceAvailable("RESONANT_ARROW_READY"),highlightIf:e=>e.hasResourceAvailable("RESONANT_ARROW_READY")});Ss("RADIANT_FINALE",90,"cd_RADIANT_FINALE",{rscType:"RADIANT_FINALE",applicationDelay:.62,cooldown:110,onConfirm:e=>{const t=e.getCodaCount();e.resources.get("RADIANT_CODA").overrideCurrentValue(t),e.tryConsumeResource("WANDERERS_CODA"),e.tryConsumeResource("MAGES_CODA"),e.tryConsumeResource("ARMYS_CODA"),e.hasTraitUnlocked("ENHANCED_RADIANT_FINALE")&&e.gainStatus("RADIANT_ENCORE_READY")},validateAttempt:e=>e.getCodaCount()>0,replaceIf:[{newSkill:"RADIANT_ENCORE",condition:e=>e.hasResourceAvailable("RADIANT_ENCORE_READY")}]});Va("RADIANT_ENCORE",100,{startOnHotbar:!1,potency:e=>{const t=e.resources.get("RADIANT_CODA").availableAmount();return t===3?1100:t===2?800:700},falloff:.5,applicationDelay:1.96,onConfirm:e=>e.tryConsumeResource("RADIANT_ENCORE_READY"),validateAttempt:e=>e.hasResourceAvailable("RADIANT_ENCORE_READY"),highlightIf:e=>e.hasResourceAvailable("RADIANT_ENCORE_READY")});Ss("RAGING_STRIKES",4,"cd_RAGING_STRIKES",{rscType:"RAGING_STRIKES",applicationDelay:.53,cooldown:120});Ss("BATTLE_VOICE",50,"cd_BATTLE_VOICE",{rscType:"BATTLE_VOICE",applicationDelay:.62,cooldown:120});Va("QUICK_NOCK",18,{potency:110,applicationDelay:1.11,onApplication:e=>e.maybeGainProc("HAWKS_EYE",.2),falloff:0,autoUpgrade:{trait:"QUICK_NOCK_MASTERY",otherSkill:"LADONSBITE"}});Va("LADONSBITE",82,{startOnHotbar:!1,potency:140,falloff:0,applicationDelay:1.11,onApplication:e=>e.maybeGainProc("HAWKS_EYE",.35)});Va("WIDE_VOLLEY",18,{potency:140,falloff:0,applicationDelay:1.43,onConfirm:e=>{e.hasResourceAvailable("BARRAGE")?e.tryConsumeResource("BARRAGE"):e.tryConsumeResource("HAWKS_EYE")},validateAttempt:e=>e.hasResourceAvailable("HAWKS_EYE")||e.hasResourceAvailable("BARRAGE"),highlightIf:e=>e.hasResourceAvailable("HAWKS_EYE")||e.hasResourceAvailable("BARRAGE"),autoUpgrade:{trait:"WIDE_VOLLEY_MASTERY",otherSkill:"SHADOWBITE"}});Va("SHADOWBITE",72,{startOnHotbar:!1,potency:200,falloff:0,applicationDelay:1.43,onConfirm:e=>{e.hasResourceAvailable("BARRAGE")?e.tryConsumeResource("BARRAGE"):e.tryConsumeResource("HAWKS_EYE")},validateAttempt:e=>e.hasResourceAvailable("HAWKS_EYE")||e.hasResourceAvailable("BARRAGE"),highlightIf:e=>e.hasResourceAvailable("HAWKS_EYE")||e.hasResourceAvailable("BARRAGE")});Nl("RAIN_OF_DEATH",45,"cd_HEARTBREAK_SHOT",{potency:100,cooldown:15,maxCharges:3,falloff:0,applicationDelay:1.65});Ss("WARDENS_PAEAN",35,"cd_WARDENS_PAEAN",{rscType:"WARDENS_PAEAN",cooldown:45,applicationDelay:.62});Ss("NATURES_MINNE",35,"cd_NATURES_MINNE",{rscType:"NATURES_MINNE",cooldown:120,applicationDelay:.62});Nl("REPELLING_SHOT",15,"cd_REPELLING_SHOT",{cooldown:30,animationLock:Vt});Ss("TROUBADOUR",56,"cd_TROUBADOUR",{rscType:"TROUBADOUR",maxCharges:1,cooldown:90,applicationDelay:0});Object.keys(UR).filter(e=>!(e==="ESPRIT_PARTNER"||e==="STANDARD_FINISH_PARTNER")).forEach(e=>jt(e,`DNC/${we[e].name}.png`));jt("ESPRIT_PARTNER","DNC/Esprit.png");jt("STANDARD_FINISH_PARTNER","DNC/Standard Finish.png");const sN=["ESPRIT_TECHNICAL","ESPRIT_PARTNER","STANDARD_FINISH_PARTNER","DANCE_PARTNER"];class Vw extends Wt{jobSpecificOtherTargetedBuffViewProps(){return sN.map(t=>t==="DANCE_PARTNER"?this.makeCommonTimerless(t,!1):this.makeCommonTimer(t,!1))}jobSpecificSelfTargetedBuffViewProps(){return[...Object.keys(UR).filter(t=>!sN.includes(t)).map(t=>t==="CLOSED_POSITION"||t==="RISING_RHYTHM"?this.makeCommonTimerless(t):this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){const a=this.state.resources,o=a.get("FEATHER_GAUGE").availableAmount(),s=a.get("STANDARD_DANCE").availableAmount(),c=a.get("TECHNICAL_DANCE").availableAmount(),d=[];if(this.state.hasTraitUnlocked("ESPRIT")){const h=a.get("ESPRIT_GAUGE").availableAmount();d.push({kind:"bar",name:g({en:"Esprit",zh:""}),color:t.dnc.esprit,progress:h/100,valueString:h.toFixed(0)})}return d.push({kind:"counter",name:g({en:"Feathers",zh:""}),color:t.dnc.feathers,currentStacks:o,maxStacks:4},{kind:"dance",name:g({en:"Standard",zh:""}),maxStacks:2,currentStacks:s,emboiteColor:t.dnc.emboite,entrechatColor:t.dnc.entrechat,jeteColor:t.dnc.jete,pirouetteColor:t.dnc.pirouette},{kind:"dance",name:g({en:"Technical",zh:""}),maxStacks:4,currentStacks:c,emboiteColor:t.dnc.emboite,entrechatColor:t.dnc.entrechat,jeteColor:t.dnc.jete,pirouetteColor:t.dnc.pirouette}),d}statusLayoutFn(t){return l.jsxs("div",{children:[l.jsxs("div",{style:{display:"inline-block",verticalAlign:"top",width:"50%",height:"100%"},children:[l.jsxs("span",{style:{display:"block",marginBottom:10},children:[g({en:"time: ",zh:"",ja:""}),`${Ze.displayTime(t.time,3)} (${t.time.toFixed(3)})`]}),t.resources?l.jsx(s0,{data:{level:t.level,resources:t.resources},style:{height:"17em"}}):void 0]}),l.jsxs("div",{style:{position:"relative",display:"inline-block",float:"right",width:"50%"},children:[t.resourceLocks?l.jsx(l0,{data:t.resourceLocks}):void 0,l.jsx(Qh,{data:t.enemyBuffs,style:{marginTop:50,marginBottom:"2em"}}),l.jsx(Qh,{data:t.selfBuffs,style:{position:"absolute",right:0,width:"200%"}})]})]})}}const st=(e,t,a)=>{Ve("DNC",e,t,a??{})};st("ESPRIT_GAUGE",100,{warnOnOvercap:!0});st("FEATHER_GAUGE",4,{warnOnOvercap:!0});st("STANDARD_DANCE",2);st("TECHNICAL_DANCE",4);st("SILKEN_SYMMETRY",1,{timeout:30});st("SILKEN_FLOW",1,{timeout:30});st("FLOURISHING_SYMMETRY",1,{timeout:30});st("FLOURISHING_FLOW",1,{timeout:30});st("THREEFOLD_FAN_DANCE",1,{timeout:30,warnOnOvercap:!0});st("FOURFOLD_FAN_DANCE",1,{timeout:30});st("FINISHING_MOVE_READY",1,{timeout:30});st("FLOURISHING_STARFALL",1,{timeout:20});st("STANDARD_STEP",1,{timeout:15});st("STANDARD_FINISH",1,{timeout:60});st("STANDARD_BONUS",2,{timeout:60});st("ESPRIT",1,{timeout:60});st("TECHNICAL_STEP",1,{timeout:15});st("TECHNICAL_FINISH",1,{timeout:20.5});st("TECHNICAL_BONUS",4,{timeout:20.5});st("LAST_DANCE_READY",1,{timeout:30});st("DANCE_OF_THE_DAWN_READY",1,{timeout:30});st("FLOURISHING_FINISH",1,{timeout:30});st("CLOSED_POSITION",1,{default:1});st("DEVILMENT",1,{timeout:20});st("SHIELD_SAMBA",1,{timeout:15});st("IMPROVISATION",1,{timeout:15});st("RISING_RHYTHM",4,{timeout:15});st("IMPROVISATION_REGEN",1,{timeout:15});st("IMPROVISED_FINISH",1,{timeout:30});st("DANCE_PARTNER",1,{default:1});st("ESPRIT_PARTNER",1,{timeout:60});st("STANDARD_FINISH_PARTNER",1,{timeout:60});st("ESPRIT_TECHNICAL",1,{timeout:20});st("CASCADE_COMBO",1,{timeout:30});st("WINDMILL_COMBO",1,{timeout:30});const Ww=["CASCADE","FOUNTAIN","WINDMILL","BLADESHOWER"],Xw=["EMBOITE","ENTRECHAT","JETE","PIROUETTE"];class qw extends Xt{constructor(t){super(t),this.hasTraitUnlocked("ESPRIT")||this.resources.set(new Jn("ESPRIT_GAUGE",0,0,!0));const a=this.hasTraitUnlocked("ENHANCED_EN_AVANT_II")?3:2;this.cooldowns.set(new He("cd_EN_AVANT",30,a,a));const o=this.hasTraitUnlocked("ENHANCED_SHIELD_SAMBA")?90:120;this.cooldowns.set(new He("cd_SHIELD_SAMBA",o,1,1)),this.registerRecurringEvents()}get statusPropsGenerator(){return new Vw(this)}jobSpecificAddDamageBuffCovers(t,a){this.hasResourceAvailable("TECHNICAL_FINISH")&&t.addBuff(k.TechnicalFinish),this.hasResourceAvailable("DEVILMENT")&&t.addBuff(k.Devilment)}cancelChanneledSkills(){this.tryConsumeResource("IMPROVISATION"),this.tryConsumeResource("RISING_RHYTHM",!0)}processComboStatus(t){if(!Ww.includes(t))return;const a=t==="CASCADE",o=t==="WINDMILL";this.setComboState("CASCADE_COMBO",a?1:0),this.setComboState("WINDMILL_COMBO",o?1:0)}getCurrentDanceStatus(){const t=this.hasResourceAvailable("STANDARD_STEP")?"STANDARD_DANCE":"TECHNICAL_DANCE";return this.resources.get(t).availableAmount()}processDanceStatus(t){if(!Xw.includes(t))return;const a=this.hasResourceAvailable("STANDARD_STEP")?"STANDARD_DANCE":"TECHNICAL_DANCE";let o=0;switch(t){case"ENTRECHAT":o=1;break;case"JETE":o=2;break;case"PIROUETTE":o=3;break}const s=this.resources.get(a);s.availableAmount()===o&&s.gain(1)}gainProc(t){this.gainStatus(t)}maybeGainProc(t,a=.5){super.maybeGainProc(t,a,!0)}gainProcIfCombo(t,a){this.triggersEffect(.5,!0)&&a&&this.gainProc(t)}gainResource(t,a){this.resources.get(t).gain(a)}maybeGainResource(t,a,o=.5){this.triggersEffect(o,!0)&&this.gainResource(t,a)}simulatePartyEspritGain(){if(this.hasResourceAvailable("ESPRIT_TECHNICAL")){for(let t=0;t<this.resources.get("PARTY_SIZE").availableAmount()-1;t++)this.maybeGainResource("ESPRIT_GAUGE",10,.2);return}this.hasResourceAvailable("ESPRIT_PARTNER")&&this.maybeGainResource("ESPRIT_GAUGE",10,.2)}applyStandardFinish(t){t!==0&&(this.gainProc("STANDARD_FINISH"),this.gainStatus("STANDARD_BONUS",t),this.hasResourceAvailable("DANCE_PARTNER")&&this.gainProc("STANDARD_FINISH_PARTNER"),this.hasTraitUnlocked("ESPRIT")&&(this.gainProc("ESPRIT"),this.hasResourceAvailable("DANCE_PARTNER")&&this.gainProc("ESPRIT_PARTNER")),this.hasTraitUnlocked("ENHANCED_STANDARD_FINISH")&&this.gainProc("LAST_DANCE_READY"))}}const on=e=>e.hasResourceAvailable("STANDARD_STEP")||e.hasResourceAvailable("TECHNICAL_STEP"),f0={newSkill:"EMBOITE",condition:e=>on(e)},E0={newSkill:"ENTRECHAT",condition:e=>on(e)},m0={newSkill:"JETE",condition:e=>on(e)},A0={newSkill:"PIROUETTE",condition:e=>on(e)},qt=(e,t,a)=>{const o=Me(s=>{a.potency&&s.simulatePartyEspritGain()},a.onConfirm,s=>s.processComboStatus(e));return nn("DNC",e,t,{...a,onConfirm:o,jobPotencyModifiers:s=>{const c=[];if(s.hasResourceAvailable("STANDARD_FINISH")){const d=s.resources.get("STANDARD_BONUS").availableAmount()===2?X.DoubleStandardFinish:X.SingleStandardFinish;c.push(d)}if(s.hasResourceAvailable("TECHNICAL_FINISH")){const d=s.resources.get("TECHNICAL_BONUS").availableAmount(),h=d===4?X.QuadrupleTechnicalFinish:d===3?X.TripleTechnicalFinish:X.SingleTechnicalFinish;c.push(h)}return s.hasResourceAvailable("DEVILMENT")&&c.push(X.Devilment),e==="STARFALL_DANCE"&&c.push(X.AutoCDH),c}})},vi=(e,t,a,o)=>at("DNC",e,t,a,{...o,onConfirm:o.onConfirm,jobPotencyModifiers:s=>{const c=[];if(s.hasResourceAvailable("STANDARD_FINISH")){const d=s.resources.get("STANDARD_BONUS").availableAmount()===2?X.DoubleStandardFinish:X.SingleStandardFinish;c.push(d)}if(s.hasResourceAvailable("TECHNICAL_FINISH")){const d=s.resources.get("TECHNICAL_BONUS").availableAmount(),h=d===4?X.QuadrupleTechnicalFinish:d===3?X.TripleTechnicalFinish:X.SingleTechnicalFinish;c.push(h)}return s.hasResourceAvailable("DEVILMENT")&&c.push(X.Devilment),c}}),R0=(e,t,a,o)=>je("DNC",e,t,a,o);qt("EMBOITE",15,{startOnHotbar:!1,recastTime:1,onConfirm:e=>e.processDanceStatus("EMBOITE"),highlightIf:e=>on(e)&&e.getCurrentDanceStatus()===0});qt("ENTRECHAT",15,{startOnHotbar:!1,recastTime:1,onConfirm:e=>e.processDanceStatus("ENTRECHAT"),highlightIf:e=>on(e)&&e.getCurrentDanceStatus()===1});qt("JETE",15,{startOnHotbar:!1,recastTime:1,onConfirm:e=>e.processDanceStatus("JETE"),highlightIf:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===2});qt("PIROUETTE",15,{startOnHotbar:!1,recastTime:1,onConfirm:e=>e.processDanceStatus("PIROUETTE"),highlightIf:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===3});qt("CASCADE",1,{replaceIf:[f0],potency:[["NEVER",200],["DYNAMIC_DANCER",220]],recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.8,onConfirm:e=>{e.maybeGainProc("SILKEN_SYMMETRY"),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",5)}});qt("FOUNTAIN",2,{replaceIf:[E0],potency:[["NEVER",100],["DYNAMIC_DANCER",120]],combo:{potency:[["NEVER",260],["DYNAMIC_DANCER",280]],resource:"CASCADE_COMBO",resourceValue:1},recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.98,onConfirm:e=>{e.gainProcIfCombo("SILKEN_FLOW",e.hasResourceExactly("CASCADE_COMBO",1)),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",5)},highlightIf:e=>e.resources.get("CASCADE_COMBO").availableAmount()===1});qt("REVERSE_CASCADE",20,{replaceIf:[m0],potency:[["NEVER",260],["DYNAMIC_DANCER",280]],recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("SILKEN_SYMMETRY")||e.hasResourceAvailable("FLOURISHING_SYMMETRY"),onConfirm:e=>{e.hasResourceAvailable("SILKEN_SYMMETRY")?e.tryConsumeResource("SILKEN_SYMMETRY"):e.tryConsumeResource("FLOURISHING_SYMMETRY"),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",10),e.maybeGainResource("FEATHER_GAUGE",1)},highlightIf:e=>e.hasResourceAvailable("SILKEN_SYMMETRY")||e.hasResourceAvailable("FLOURISHING_SYMMETRY")});qt("FOUNTAINFALL",40,{replaceIf:[A0],potency:[["NEVER",320],["DYNAMIC_DANCER",340]],recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:1.21,validateAttempt:e=>e.hasResourceAvailable("SILKEN_FLOW")||e.hasResourceAvailable("FLOURISHING_FLOW"),onConfirm:e=>{e.hasResourceAvailable("SILKEN_FLOW")?e.tryConsumeResource("SILKEN_FLOW"):e.tryConsumeResource("FLOURISHING_FLOW"),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",10),e.maybeGainResource("FEATHER_GAUGE",1)},highlightIf:e=>e.hasResourceAvailable("SILKEN_FLOW")||e.hasResourceAvailable("FLOURISHING_FLOW")});vi("FAN_DANCE",30,"cd_FAN_DANCE",{potency:[["NEVER",150],["DYNAMIC_DANCER",180]],cooldown:1,applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("FEATHER_GAUGE")&&!on(e),highlightIf:e=>e.hasResourceAvailable("FEATHER_GAUGE"),onConfirm:e=>{e.tryConsumeResource("FEATHER_GAUGE"),e.maybeGainProc("THREEFOLD_FAN_DANCE")}});qt("SABER_DANCE",76,{replaceIf:[{newSkill:"DANCE_OF_THE_DAWN",condition:e=>e.hasResourceAvailable("DANCE_OF_THE_DAWN_READY")&&e.hasResourceAvailable("ESPRIT_GAUGE",50)}],potency:[["NEVER",500],["DYNAMIC_DANCER",540]],recastTime:e=>e.config.adjustedSksGCD(),falloff:.6,applicationDelay:.44,validateAttempt:e=>e.hasResourceAvailable("ESPRIT_GAUGE",50)&&!on(e),highlightIf:e=>e.hasResourceAvailable("ESPRIT_GAUGE",50),onConfirm:e=>e.resources.get("ESPRIT_GAUGE").consume(50)});qt("DANCE_OF_THE_DAWN",100,{startOnHotbar:!1,potency:1e3,recastTime:e=>e.config.adjustedSksGCD(),falloff:.6,applicationDelay:.44,validateAttempt:e=>e.hasResourceAvailable("ESPRIT_GAUGE",50)&&!on(e),highlightIf:e=>e.hasResourceAvailable("ESPRIT_GAUGE",50),onConfirm:e=>{e.resources.get("ESPRIT_GAUGE").consume(50),e.tryConsumeResource("DANCE_OF_THE_DAWN_READY")}});qt("LAST_DANCE",92,{potency:540,recastTime:e=>e.config.adjustedSksGCD(),falloff:.6,applicationDelay:1.26,validateAttempt:e=>e.hasResourceAvailable("LAST_DANCE_READY")&&!on(e),highlightIf:e=>e.hasResourceAvailable("LAST_DANCE_READY"),onConfirm:e=>e.tryConsumeResource("LAST_DANCE_READY")});qt("STANDARD_STEP",15,{replaceIf:[{newSkill:"STANDARD_FINISH",condition:e=>e.hasResourceAvailable("STANDARD_STEP")&&e.getCurrentDanceStatus()===0},{newSkill:"SINGLE_STANDARD_FINISH",condition:e=>e.hasResourceAvailable("STANDARD_STEP")&&e.getCurrentDanceStatus()===1},{newSkill:"DOUBLE_STANDARD_FINISH",condition:e=>e.hasResourceAvailable("STANDARD_STEP")&&e.getCurrentDanceStatus()===2},{newSkill:"FINISHING_MOVE",condition:e=>e.hasResourceAvailable("FINISHING_MOVE_READY")}],validateAttempt:e=>!on(e),onConfirm:e=>e.gainProc("STANDARD_STEP"),recastTime:1.5,secondaryCooldown:{cdName:"cd_STANDARD_STEP",cooldown:30,maxCharges:1}});qt("FINISHING_MOVE",96,{startOnHotbar:!1,potency:850,recastTime:e=>e.config.adjustedSksGCD(),falloff:.6,applicationDelay:2.05,onConfirm:e=>{e.applyStandardFinish(2),e.tryConsumeResource("FINISHING_MOVE_READY")},secondaryCooldown:{cdName:"cd_STANDARD_STEP",cooldown:30,maxCharges:1},validateAttempt:e=>e.hasResourceAvailable("FINISHING_MOVE_READY")&&!on(e),highlightIf:e=>e.hasResourceAvailable("FINISHING_MOVE_READY")});const Zw=[{skill:"STANDARD_FINISH",potency:360},{skill:"SINGLE_STANDARD_FINISH",potency:540},{skill:"DOUBLE_STANDARD_FINISH",potency:[["NEVER",800],["DYNAMIC_DANCER",850]]}];Zw.forEach(e=>{qt(e.skill,15,{assetPath:"DNC/Standard Finish.png",startOnHotbar:!1,potency:e.potency,falloff:.6,applicationDelay:.54,onConfirm:t=>{const a=t.getCurrentDanceStatus();t.tryConsumeResource("STANDARD_STEP"),t.tryConsumeResource("STANDARD_DANCE",!0),a!==0&&t.applyStandardFinish(a)},recastTime:1.5,validateAttempt:t=>t.hasResourceAvailable("STANDARD_STEP"),highlightIf:t=>t.hasResourceAvailable("STANDARD_STEP")&&t.getCurrentDanceStatus()===2})});vi("FLOURISH",72,"cd_FLOURISH",{cooldown:60,requiresCombat:!0,validateAttempt:e=>!on(e),onConfirm:e=>{e.gainProc("FLOURISHING_SYMMETRY"),e.gainProc("FLOURISHING_FLOW"),e.gainProc("THREEFOLD_FAN_DANCE"),e.hasTraitUnlocked("ENHANCED_FLOURISH")&&e.gainProc("FOURFOLD_FAN_DANCE"),e.hasTraitUnlocked("ENHANCED_FLOURISH_II")&&e.gainProc("FINISHING_MOVE_READY")}});vi("FAN_DANCE_III",66,"cd_FAN_DANCE_III",{potency:[["NEVER",200],["DYNAMIC_DANCER",220]],cooldown:1,falloff:.6,applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("THREEFOLD_FAN_DANCE")&&!on(e),highlightIf:e=>e.hasResourceAvailable("THREEFOLD_FAN_DANCE"),onConfirm:e=>e.tryConsumeResource("THREEFOLD_FAN_DANCE")});vi("FAN_DANCE_IV",86,"cd_FAN_DANCE_IV",{potency:[["NEVER",300],["DYNAMIC_DANCER",460]],falloff:.6,cooldown:1,applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("FOURFOLD_FAN_DANCE")&&!on(e),highlightIf:e=>e.hasResourceAvailable("FOURFOLD_FAN_DANCE"),onConfirm:e=>e.tryConsumeResource("FOURFOLD_FAN_DANCE")});qt("TECHNICAL_STEP",70,{replaceIf:[{newSkill:"TECHNICAL_FINISH",condition:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===0},{newSkill:"SINGLE_TECHNICAL_FINISH",condition:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===1},{newSkill:"DOUBLE_TECHNICAL_FINISH",condition:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===2},{newSkill:"TRIPLE_TECHNICAL_FINISH",condition:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===3},{newSkill:"QUADRUPLE_TECHNICAL_FINISH",condition:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===4},{newSkill:"TILLANA",condition:e=>e.hasResourceAvailable("FLOURISHING_FINISH")}],validateAttempt:e=>!on(e),onConfirm:e=>e.gainProc("TECHNICAL_STEP"),recastTime:1.5,falloff:.75,secondaryCooldown:{cdName:"cd_TECHNICAL_STEP",cooldown:120,maxCharges:1}});qt("TILLANA",82,{startOnHotbar:!1,potency:600,recastTime:e=>e.config.adjustedSksGCD(),falloff:.6,applicationDelay:.84,onConfirm:e=>{e.gainResource("ESPRIT_GAUGE",50),e.tryConsumeResource("FLOURISHING_FINISH")},validateAttempt:e=>e.hasResourceAvailable("FLOURISHING_FINISH")&&!on(e),highlightIf:e=>e.hasResourceAvailable("FLOURISHING_FINISH")});qt("TECHNICAL_FINISH",70,{startOnHotbar:!1,potency:350,applicationDelay:.54,onConfirm:e=>{e.tryConsumeResource("TECHNICAL_STEP"),e.tryConsumeResource("TECHNICAL_DANCE",!0)},recastTime:1.5,validateAttempt:e=>e.hasResourceAvailable("TECHNICAL_STEP")});const Qw=[{skill:"TECHNICAL_FINISH",potency:350},{skill:"SINGLE_TECHNICAL_FINISH",potency:540},{skill:"DOUBLE_TECHNICAL_FINISH",potency:720},{skill:"TRIPLE_TECHNICAL_FINISH",potency:900},{skill:"QUADRUPLE_TECHNICAL_FINISH",potency:[["NEVER",1200],["DYNAMIC_DANCER",1300]]}];Qw.forEach(e=>{qt(e.skill,70,{assetPath:"DNC/Technical Finish.png",startOnHotbar:!1,potency:e.potency,applicationDelay:.54,falloff:.6,onConfirm:t=>{const a=t.getCurrentDanceStatus();t.tryConsumeResource("TECHNICAL_STEP"),t.tryConsumeResource("TECHNICAL_DANCE",!0),a!==0&&(t.gainProc("TECHNICAL_FINISH"),t.hasTraitUnlocked("ESPRIT")&&t.gainProc("ESPRIT_TECHNICAL"),t.gainStatus("TECHNICAL_BONUS",a),t.hasTraitUnlocked("ENHANCED_TECHNICAL_FINISH")&&t.gainProc("FLOURISHING_FINISH"),t.hasTraitUnlocked("ENHANCED_TECHNICAL_FINISH_II")&&t.gainProc("DANCE_OF_THE_DAWN_READY"))},recastTime:1.5,validateAttempt:t=>t.hasResourceAvailable("TECHNICAL_STEP"),highlightIf:t=>t.hasResourceAvailable("TECHNICAL_STEP")&&t.getCurrentDanceStatus()===4})});R0("DEVILMENT",62,"cd_DEVILMENT",{replaceIf:[{newSkill:"STARFALL_DANCE",condition:e=>e.hasResourceAvailable("FLOURISHING_STARFALL")}],rscType:"DEVILMENT",applicationDelay:0,cooldown:120,validateAttempt:e=>!on(e),onApplication:e=>{e.hasTraitUnlocked("ENHANCED_DEVILMENT")&&e.gainProc("FLOURISHING_STARFALL")}});qt("STARFALL_DANCE",90,{startOnHotbar:!1,potency:600,recastTime:e=>e.config.adjustedSksGCD(),falloff:.75,applicationDelay:.89,validateAttempt:e=>e.hasResourceAvailable("FLOURISHING_STARFALL")&&!on(e),highlightIf:e=>e.hasResourceAvailable("FLOURISHING_STARFALL"),onConfirm:e=>e.tryConsumeResource("FLOURISHING_STARFALL")});qt("WINDMILL",15,{replaceIf:[f0],potency:120,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.62,onConfirm:e=>{e.maybeGainProc("SILKEN_SYMMETRY"),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",5)}});qt("BLADESHOWER",25,{replaceIf:[E0],potency:100,recastTime:e=>e.config.adjustedSksGCD(),combo:{potency:160,resource:"WINDMILL_COMBO",resourceValue:1},falloff:0,applicationDelay:.62,onConfirm:e=>{e.gainProcIfCombo("SILKEN_FLOW",e.hasResourceExactly("WINDMILL_COMBO",1)),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",5)},highlightIf:e=>e.resources.get("WINDMILL_COMBO").availableAmount()===1});qt("RISING_WINDMILL",35,{replaceIf:[m0],potency:160,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("SILKEN_SYMMETRY")||e.hasResourceAvailable("FLOURISHING_SYMMETRY"),onConfirm:e=>{e.hasResourceAvailable("SILKEN_SYMMETRY")?e.tryConsumeResource("SILKEN_SYMMETRY"):e.tryConsumeResource("FLOURISHING_SYMMETRY"),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",10),e.maybeGainResource("FEATHER_GAUGE",1)},highlightIf:e=>e.hasResourceAvailable("SILKEN_SYMMETRY")||e.hasResourceAvailable("FLOURISHING_SYMMETRY")});qt("BLOODSHOWER",45,{replaceIf:[A0],potency:200,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("SILKEN_FLOW")||e.hasResourceAvailable("FLOURISHING_FLOW"),onConfirm:e=>{e.hasResourceAvailable("SILKEN_FLOW")?e.tryConsumeResource("SILKEN_FLOW"):e.tryConsumeResource("FLOURISHING_FLOW"),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",10),e.maybeGainResource("FEATHER_GAUGE",1)},highlightIf:e=>e.hasResourceAvailable("SILKEN_FLOW")||e.hasResourceAvailable("FLOURISHING_FLOW")});vi("FAN_DANCE_II",30,"cd_FAN_DANCE_II",{potency:100,cooldown:1,falloff:0,applicationDelay:.54,validateAttempt:e=>e.hasResourceAvailable("FEATHER_GAUGE")&&!on(e),highlightIf:e=>e.hasResourceAvailable("FEATHER_GAUGE"),onConfirm:e=>{e.tryConsumeResource("FEATHER_GAUGE"),e.maybeGainProc("THREEFOLD_FAN_DANCE")}});vi("CURING_WALTZ",52,"cd_CURING_WALTZ",{cooldown:60,applicationDelay:.58});vi("IMPROVISATION",80,"cd_IMPROVISATION",{replaceIf:[{newSkill:"IMPROVISED_FINISH",condition:e=>e.hasResourceAvailable("IMPROVISATION")}],cooldown:120,applicationDelay:.89,validateAttempt:e=>!on(e),onConfirm:e=>{e.gainProc("IMPROVISATION"),e.gainProc("IMPROVISATION_REGEN");const t=()=>{e.hasResourceAvailable("IMPROVISATION")&&(e.resources.get("RISING_RHYTHM").gain(1),e.gainProc("IMPROVISATION_REGEN"),e.resources.addResourceEvent({rscType:"RISING_RHYTHM",name:"rising rhythm tic",delay:3,fnOnRsc:a=>t()}))};e.resources.addResourceEvent({rscType:"RISING_RHYTHM",name:"rising rhythm tic",delay:3,fnOnRsc:a=>t()}),e.resources.addResourceEvent({rscType:"IMPROVISATION",name:"improvisation timeout",delay:Ft("DNC","IMPROVISATION").maxTimeout,fnOnRsc:a=>{a.consume(1),e.tryConsumeResource("RISING_RHYTHM",!0)}})}});vi("IMPROVISED_FINISH",80,"cd_IMPROVISED_FINISH",{startOnHotbar:!1,cooldown:120,applicationDelay:.71,validateAttempt:e=>!on(e),onConfirm:e=>e.gainProc("IMPROVISED_FINISH")});vi("EN_AVANT",50,"cd_EN_AVANT",{cooldown:30,maxCharges:3,animationLock:Vt});R0("SHIELD_SAMBA",56,"cd_SHIELD_SAMBA",{rscType:"SHIELD_SAMBA",maxCharges:1,cooldown:90,applicationDelay:0});vi("CLOSED_POSITION",60,"cd_CLOSED_POSITION",{replaceIf:[{newSkill:"ENDING",condition:e=>e.hasResourceAvailable("CLOSED_POSITION")}],cooldown:30,maxCharges:1,applicationDelay:0,onConfirm:e=>{e.resources.get("CLOSED_POSITION").gain(1),e.resources.get("DANCE_PARTNER").gain(1)},validateAttempt:e=>!e.hasResourceAvailable("CLOSED_POSITION"),secondaryCooldown:{cdName:"cd_ENDING",cooldown:1,maxCharges:1}});vi("ENDING",60,"cd_ENDING",{startOnHotbar:!1,cooldown:1,maxCharges:1,applicationDelay:0,onConfirm:e=>{e.tryConsumeResource("CLOSED_POSITION",!0),e.tryConsumeResource("DANCE_PARTNER",!0),e.tryConsumeResource("STANDARD_FINISH_PARTNER",!0),e.tryConsumeResource("ESPRIT_PARTNER",!0)},secondaryCooldown:{cdName:"cd_CLOSED_POSITION",cooldown:30,maxCharges:1}});const T0=["CHAOS_THRUST_DOT","CHAOTIC_SPRING_DOT"],Jw=Object.keys(PR).filter(e=>!T0.includes(e));Object.keys(PR).forEach(e=>jt(e,`DRG/${we[e].name}.png`));class $w extends Wt{jobSpecificOtherTargetedBuffViewProps(){return[...T0.map(t=>this.makeCommonTimer(t,!1))]}jobSpecificSelfTargetedBuffViewProps(){return Jw.map(t=>this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){const a=this.state.resources,o=a.get("DRG_CHAOS_COMBO_TRACKER"),s=a.get("DRG_HEAVENS_COMBO_TRACKER"),c=a.get("DRG_AOE_COMBO_TRACKER"),d=a.get("FIRSTMINDS_FOCUS").availableAmount(),h=a.get("LIFE_OF_THE_DRAGON"),f=h.available(1)?h.pendingChange?.timeTillEvent:void 0,m=o.available(1)?o.pendingChange?.timeTillEvent:s.available(1)?s.pendingChange?.timeTillEvent:c.available(1)?c.pendingChange?.timeTillEvent:void 0;return[{kind:"bar",name:g({en:"Combo Timer",zh:""}),color:t.drg.drgComboTimer,progress:m?m/30:0,valueString:m?.toFixed(3)??"N/A"},{kind:"bar",name:g({en:"Life of the Dragon"}),color:t.drg.lifeOfTheDragonBar,progress:f?f/20:0,valueString:f?f.toFixed(3):"N/A"},{kind:"counter",name:g({en:"Firstmind's Focus"}),color:t.drg.firstmindsFocusStacks,currentStacks:d,maxStacks:2}]}}const $n=(e,t,a)=>{Ve("DRG",e,t,a??{})};$n("POWER_SURGE",1,{timeout:30});$n("LIFE_SURGE",1,{timeout:5.52,warnOnTimeout:!0});$n("ENHANCED_PIERCING_TALON",1,{timeout:15.62});$n("LANCE_CHARGE",1,{timeout:20});$n("DIVE_READY",1,{timeout:15.46,warnOnTimeout:!0});$n("CHAOS_THRUST_DOT",1,{timeout:24});$n("BATTLE_LITANY",1,{timeout:20});$n("LIFE_OF_THE_DRAGON",1,{timeout:20});$n("NASTROND_READY",1,{timeout:20,warnOnTimeout:!0});$n("DRACONIAN_FIRE",1,{timeout:30});$n("CHAOTIC_SPRING_DOT",1,{timeout:24});$n("FIRSTMINDS_FOCUS",2,{warnOnOvercap:!0});$n("DRAGONS_FLIGHT",1,{timeout:30.79});$n("STARCROSS_READY",1,{timeout:20,warnOnTimeout:!0});$n("DRG_CHAOS_COMBO_TRACKER",4,{timeout:30});$n("DRG_HEAVENS_COMBO_TRACKER",4,{timeout:30});$n("DRG_AOE_COMBO_TRACKER",2,{timeout:30});const eG=["DOOM_SPIKE","SONIC_THRUST","COERTHAN_TORMENT","DRACONIAN_FURY"],rN=new Map([["DISEMBOWEL",1],["SPIRAL_BLOW",1],["CHAOS_THRUST",2],["CHAOTIC_SPRING",2],["WHEELING_THRUST",3]]),cN=new Map([["VORPAL_THRUST",1],["LANCE_BARRAGE",1],["FULL_THRUST",2],["HEAVENS_THRUST",2],["FANG_AND_CLAW",3]]);class tG extends Xt{constructor(t){super(t);const a=this.hasTraitUnlocked("ENHANCED_WINGED_GLIDE")?2:1,o=this.hasTraitUnlocked("ENHANCED_LIFE_SURGE")?2:1;[new He("cd_WINGED_GLIDE",60,a,a),new He("cd_LIFE_SURGE",40,o,o)].forEach(s=>this.cooldowns.set(s)),this.registerRecurringEvents([{groupedEffects:[{effectName:"CHAOS_THRUST_DOT",appliedBy:["CHAOS_THRUST"]}]},{groupedEffects:[{effectName:"CHAOTIC_SPRING_DOT",appliedBy:["CHAOTIC_SPRING"]}]}])}get statusPropsGenerator(){return new $w(this)}jobSpecificAddDamageBuffCovers(t,a){this.hasResourceAvailable("POWER_SURGE")&&t.addBuff(k.PowerSurge),this.hasResourceAvailable("LANCE_CHARGE")&&t.addBuff(k.LanceCharge),this.hasResourceAvailable("LIFE_OF_THE_DRAGON")&&t.addBuff(k.LifeOfTheDragon),this.hasResourceAvailable("BATTLE_LITANY")&&t.addBuff(k.BattleLitany),a.name==="PIERCING_TALON"&&this.hasResourceAvailable("ENHANCED_PIERCING_TALON")&&t.addBuff(k.EnhancedPiercingTalon),a.cdName==="cd_GCD"&&this.hasResourceAvailable("LIFE_SURGE")&&t.addBuff(k.LifeSurge)}pushUniversalModifiers(t){this.hasResourceAvailable("POWER_SURGE")&&t.push(X.PowerSurge),this.hasResourceAvailable("LANCE_CHARGE")&&t.push(X.LanceCharge),this.hasResourceAvailable("LIFE_OF_THE_DRAGON")&&t.push(X.LifeOfTheDragon),this.hasResourceAvailable("BATTLE_LITANY")&&t.push(X.BattleLitany)}fixDRGComboState(t){if(this.tryConsumeResource("DRACONIAN_FIRE",!0),eG.includes(t)){this.tryConsumeResource("DRG_CHAOS_COMBO_TRACKER",!0),this.tryConsumeResource("DRG_HEAVENS_COMBO_TRACKER",!0);let a=0;t==="DOOM_SPIKE"||t==="DRACONIAN_FURY"?a=1:t==="SONIC_THRUST"&&this.hasResourceExactly("DRG_AOE_COMBO_TRACKER",1)&&(a=2),this.setComboState("DRG_AOE_COMBO_TRACKER",a);return}if(this.tryConsumeResource("DRG_AOE_COMBO_TRACKER",!0),t==="TRUE_THRUST"||t==="RAIDEN_THRUST"){this.tryConsumeResource("DRG_CHAOS_COMBO_TRACKER",!0),this.tryConsumeResource("DRG_HEAVENS_COMBO_TRACKER",!0),this.setComboState("DRG_CHAOS_COMBO_TRACKER",1),this.setComboState("DRG_HEAVENS_COMBO_TRACKER",1);return}if(rN.has(t)){const a=rN.get(t);this.tryConsumeResource("DRG_HEAVENS_COMBO_TRACKER",!0),this.setComboState("DRG_CHAOS_COMBO_TRACKER",this.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",a)?a+1:0)}else if(cN.has(t)){const a=cN.get(t);this.tryConsumeResource("DRG_CHAOS_COMBO_TRACKER",!0),this.setComboState("DRG_HEAVENS_COMBO_TRACKER",this.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",a)?a+1:0)}else t==="DRAKESBANE"&&(this.tryConsumeResource("DRG_HEAVENS_COMBO_TRACKER",!0),this.tryConsumeResource("DRG_CHAOS_COMBO_TRACKER",!0))}checkCombo(t){return this.hasResourceAvailable(t)}gainScale(t){this.resources.get("FIRSTMINDS_FOCUS").gain(t)}refreshBuff(t,a){this.addEvent(new Ce("gain buff",a,()=>{this.resources.get(t).gain(1),this.enqueueResourceDrop(t)}))}}const Gn=(e,t,a)=>{const o=Me(a.onConfirm,s=>{e!=="PIERCING_TALON"&&s.fixDRGComboState(e),s.tryConsumeResource("LIFE_SURGE")});return nn("DRG",e,t,{...a,onConfirm:o,recastTime:s=>s.config.adjustedSksGCD(),jobPotencyModifiers:s=>{const c=a.jobPotencyModifiers?.(s)??[];return e==="PIERCING_TALON"&&s.hasResourceAvailable("ENHANCED_PIERCING_TALON")&&c.push(X.EnhancedPiercingTalon),s.pushUniversalModifiers(c),s.hasResourceAvailable("LIFE_SURGE")&&c.push(X.LifeSurge),c}})},Ai=(e,t,a,o)=>at("DRG",e,t,a,{...o,onConfirm:o.onConfirm,jobPotencyModifiers:s=>{const c=[];return s.pushUniversalModifiers(c),c}}),nG={newSkill:"DRAKESBANE",condition:e=>e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",4)},aG={newSkill:"DRAKESBANE",condition:e=>e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",4)},iG={newSkill:"RAIDEN_THRUST",condition:e=>e.resources.get("DRACONIAN_FIRE").available(1)},oG={newSkill:"TRUE_THRUST",condition:e=>!e.resources.get("DRACONIAN_FIRE").available(1)},lG={newSkill:"DRACONIAN_FURY",condition:e=>e.resources.get("DRACONIAN_FIRE").available(1)},sG={newSkill:"DOOM_SPIKE",condition:e=>!e.resources.get("DRACONIAN_FIRE").available(1)},rG={newSkill:"STARCROSS",condition:e=>e.hasResourceAvailable("STARCROSS_READY")&&e.hasResourceAvailable("LIFE_OF_THE_DRAGON")},cG={newSkill:"STARDIVER",condition:e=>!e.hasResourceAvailable("STARCROSS_READY")};Gn("PIERCING_TALON",15,{potency:[["NEVER",150],["LANCE_MASTERY",200]],applicationDelay:.85,onConfirm:e=>{e.tryConsumeResource("ENHANCED_PIERCING_TALON")},highlightIf:e=>e.hasResourceAvailable("ENHANCED_PIERCING_TALON")});Gn("TRUE_THRUST",1,{replaceIf:[iG],potency:[["NEVER",200],["LANCE_MASTERY",230]],applicationDelay:.76});Gn("RAIDEN_THRUST",76,{startOnHotbar:!1,replaceIf:[oG],potency:[["NEVER",280],["MELEE_MASTERY_DRG",320]],applicationDelay:.62,validateAttempt:e=>e.resources.get("DRACONIAN_FIRE").available(1),highlightIf:e=>e.resources.get("DRACONIAN_FIRE").available(1),onConfirm:e=>{e.hasTraitUnlocked("LANCE_MASTERY_III")&&e.gainScale(1)}});Gn("DISEMBOWEL",18,{autoUpgrade:{trait:"LANCE_MASTERY_IV",otherSkill:"SPIRAL_BLOW"},applicationDelay:1.65,potency:[["NEVER",100],["LANCE_MASTERY",140]],combo:{potency:[["NEVER",220],["LANCE_MASTERY",250]],resource:"DRG_CHAOS_COMBO_TRACKER",resourceValue:1},onConfirm:e=>{e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",1)&&(e.resources.get("POWER_SURGE").gain(1),e.enqueueResourceDrop("POWER_SURGE",31.63))},highlightIf:e=>e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",1)});Gn("SPIRAL_BLOW",96,{autoDowngrade:{trait:"LANCE_MASTERY_IV",otherSkill:"DISEMBOWEL"},applicationDelay:1.38,potency:140,combo:{potency:[["NEVER",300]],resource:"DRG_CHAOS_COMBO_TRACKER",resourceValue:1},onConfirm:e=>{e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",1)&&(e.resources.get("POWER_SURGE").gain(1),e.enqueueResourceDrop("POWER_SURGE",31.38))},highlightIf:e=>e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",1)});Gn("CHAOS_THRUST",50,{autoUpgrade:{trait:"LANCE_MASTERY_II",otherSkill:"CHAOTIC_SPRING"},applicationDelay:1.65,potency:100,combo:{potency:220,resource:"DRG_CHAOS_COMBO_TRACKER",resourceValue:2},positional:{potency:140,comboPotency:260,location:"rear"},onConfirm:(e,t)=>{if(e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",2)){const a=[];e.pushUniversalModifiers(a),e.addDoTPotencies({node:t,effectName:"CHAOS_THRUST_DOT",skillName:"CHAOS_THRUST",tickPotency:40,speedStat:"sks",modifiers:a}),e.addEvent(new Ce("apply chaos thrust dot",1.65,()=>{e.applyDoT("CHAOS_THRUST_DOT",t)}))}},highlightIf:e=>e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",2)});Gn("CHAOTIC_SPRING",86,{autoDowngrade:{trait:"LANCE_MASTERY_II",otherSkill:"CHAOS_THRUST"},applicationDelay:.45,potency:140,combo:{potency:300,resource:"DRG_CHAOS_COMBO_TRACKER",resourceValue:2},positional:{potency:180,comboPotency:340,location:"rear"},onConfirm:(e,t)=>{if(e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",2)){const a=[];e.pushUniversalModifiers(a),e.addDoTPotencies({node:t,effectName:"CHAOTIC_SPRING_DOT",skillName:"CHAOTIC_SPRING",tickPotency:45,speedStat:"sks",modifiers:a}),e.addEvent(new Ce("apply chaotic spring dot",.45,()=>{e.applyDoT("CHAOTIC_SPRING_DOT",t)}))}},highlightIf:e=>e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",2)});Gn("WHEELING_THRUST",58,{replaceIf:[nG],applicationDelay:.67,potency:[["NEVER",100],["MELEE_MASTERY_DRG",140]],combo:{potency:[["NEVER",260],["MELEE_MASTERY_DRG",300]],resource:"DRG_CHAOS_COMBO_TRACKER",resourceValue:3},positional:{potency:[["NEVER",140],["MELEE_MASTERY_DRG",180]],comboPotency:[["NEVER",300],["MELEE_MASTERY_DRG",340]],location:"rear"},highlightIf:e=>e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",3)});Gn("VORPAL_THRUST",4,{autoUpgrade:{trait:"LANCE_MASTERY_IV",otherSkill:"LANCE_BARRAGE"},applicationDelay:1.02,potency:[["NEVER",100],["LANCE_MASTERY",130]],combo:{potency:[["NEVER",250],["LANCE_MASTERY",280]],resource:"DRG_HEAVENS_COMBO_TRACKER",resourceValue:1},highlightIf:e=>e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",1)});Gn("LANCE_BARRAGE",96,{autoDowngrade:{trait:"LANCE_MASTERY_IV",otherSkill:"VORPAL_THRUST"},applicationDelay:.94,potency:130,combo:{potency:340,resource:"DRG_HEAVENS_COMBO_TRACKER",resourceValue:1},highlightIf:e=>e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",1)});Gn("FULL_THRUST",26,{autoUpgrade:{trait:"LANCE_MASTERY_II",otherSkill:"HEAVENS_THRUST"},applicationDelay:1.12,potency:100,combo:{potency:380,resource:"DRG_HEAVENS_COMBO_TRACKER",resourceValue:2},highlightIf:e=>e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",2)});Gn("HEAVENS_THRUST",86,{autoDowngrade:{trait:"LANCE_MASTERY_II",otherSkill:"FULL_THRUST"},applicationDelay:.71,potency:[["NEVER",100],["MELEE_MASTERY_DRG",160]],combo:{potency:[["NEVER",400],["MELEE_MASTERY_DRG",460]],resource:"DRG_HEAVENS_COMBO_TRACKER",resourceValue:2},highlightIf:e=>e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",2)});Gn("FANG_AND_CLAW",56,{replaceIf:[aG],applicationDelay:.62,potency:[["NEVER",100],["MELEE_MASTERY_DRG",140]],combo:{potency:[["NEVER",260],["MELEE_MASTERY_DRG",300]],resource:"DRG_HEAVENS_COMBO_TRACKER",resourceValue:3},positional:{potency:[["NEVER",140],["MELEE_MASTERY_DRG",180]],comboPotency:[["NEVER",300],["MELEE_MASTERY_DRG",340]],location:"flank"},highlightIf:e=>e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",3)});Gn("DRAKESBANE",64,{startOnHotbar:!1,applicationDelay:1,potency:[["NEVER",380],["LANCE_MASTERY_II",400],["MELEE_MASTERY_DRG",460]],validateAttempt:e=>e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",4)||e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",4),onConfirm:e=>{(e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",4)||e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",4))&&e.refreshBuff("DRACONIAN_FIRE",0)},highlightIf:e=>e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",4)||e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",4)});Gn("DOOM_SPIKE",40,{replaceIf:[lG],potency:110,falloff:0,applicationDelay:1.29});Gn("DRACONIAN_FURY",82,{replaceIf:[sG],startOnHotbar:!1,potency:130,falloff:0,applicationDelay:.76,validateAttempt:e=>e.resources.get("DRACONIAN_FIRE").available(1),highlightIf:e=>e.resources.get("DRACONIAN_FIRE").available(1),onConfirm:e=>{e.hasTraitUnlocked("LANCE_MASTERY_III")&&e.gainScale(1)}});Gn("SONIC_THRUST",62,{applicationDelay:.8,potency:100,combo:{potency:120,resource:"DRG_AOE_COMBO_TRACKER",resourceValue:1},falloff:0,highlightIf:e=>e.hasResourceExactly("DRG_AOE_COMBO_TRACKER",1),onConfirm:e=>{e.hasResourceExactly("DRG_AOE_COMBO_TRACKER",1)&&(e.resources.get("POWER_SURGE").gain(1),e.enqueueResourceDrop("POWER_SURGE",30.79))}});Gn("COERTHAN_TORMENT",72,{applicationDelay:.49,potency:100,combo:{potency:150,resource:"DRG_AOE_COMBO_TRACKER",resourceValue:2},falloff:0,highlightIf:e=>e.hasResourceExactly("DRG_AOE_COMBO_TRACKER",2),onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_COERTHAN_TORMENT")&&e.hasResourceExactly("DRG_AOE_COMBO_TRACKER",2)&&e.refreshBuff("DRACONIAN_FIRE",0)}});je("DRG","LIFE_SURGE",6,"cd_LIFE_SURGE",{rscType:"LIFE_SURGE",applicationDelay:0,cooldown:40,maxCharges:2});Ai("WYRMWIND_THRUST",90,"cd_WYRMWIND_THRUST",{applicationDelay:1.2,validateAttempt:e=>e.hasResourceExactly("FIRSTMINDS_FOCUS",2),highlightIf:e=>e.hasResourceExactly("FIRSTMINDS_FOCUS",2),potency:[["NEVER",420],["MELEE_MASTERY_DRG",440]],falloff:.5,cooldown:10,onConfirm:e=>{e.tryConsumeResource("FIRSTMINDS_FOCUS",!0)}});je("DRG","LANCE_CHARGE",30,"cd_LANCE_CHARGE",{rscType:"LANCE_CHARGE",applicationDelay:.62,cooldown:60});je("DRG","BATTLE_LITANY",52,"cd_BATTLE_LITANY",{rscType:"BATTLE_LITANY",applicationDelay:.62,cooldown:120});Ai("GEIRSKOGUL",60,"cd_GEIRSKOGUL",{applicationDelay:.67,potency:[["NEVER",200],["LANCE_MASTERY_III",280]],falloff:.5,cooldown:60,onConfirm:e=>{e.refreshBuff("LIFE_OF_THE_DRAGON",0),e.refreshBuff("NASTROND_READY",0),e.addEvent(new Ce("drop starcross when life drops",20,()=>{e.tryConsumeResource("STARCROSS_READY")}))}});Ai("NASTROND",70,"cd_NASTROND",{applicationDelay:.76,potency:[["NEVER",600],["LANCE_MASTERY_III",720]],falloff:.5,cooldown:2,validateAttempt:e=>e.resources.get("LIFE_OF_THE_DRAGON").available(1)&&e.resources.get("NASTROND_READY").available(1),highlightIf:e=>e.resources.get("LIFE_OF_THE_DRAGON").available(1)&&e.resources.get("NASTROND_READY").available(1),onConfirm:e=>{e.tryConsumeResource("NASTROND_READY")}});Ai("JUMP",30,"cd_JUMP",{autoUpgrade:{trait:"JUMP_MASTERY",otherSkill:"HIGH_JUMP"},applicationDelay:.49,animationLock:.8,potency:320,cooldown:30,onConfirm:e=>{e.refreshBuff("DIVE_READY",0)}});Ai("HIGH_JUMP",74,"cd_HIGH_JUMP",{autoDowngrade:{trait:"JUMP_MASTERY",otherSkill:"JUMP"},applicationDelay:.49,animationLock:.8,potency:400,cooldown:30,onConfirm:e=>{e.refreshBuff("DIVE_READY",0)}});Ai("MIRAGE_DIVE",68,"cd_MIRAGE_DIVE",{applicationDelay:.8,validateAttempt:e=>e.hasResourceAvailable("DIVE_READY"),highlightIf:e=>e.hasResourceAvailable("DIVE_READY"),potency:380,cooldown:1,onConfirm:e=>{e.tryConsumeResource("DIVE_READY")}});Ai("DRAGONFIRE_DIVE",50,"cd_DRAGONFIRE_DIVE",{applicationDelay:.8,animationLock:.8,potency:500,falloff:.5,cooldown:120,onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_DRAGONFIRE_DIVE")&&e.refreshBuff("DRAGONS_FLIGHT",0)}});Ai("RISE_OF_THE_DRAGON",92,"cd_RISE_OF_THE_DRAGON",{applicationDelay:1.16,potency:550,falloff:.5,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("DRAGONS_FLIGHT"),highlightIf:e=>e.hasResourceAvailable("DRAGONS_FLIGHT"),onConfirm:e=>{e.tryConsumeResource("DRAGONS_FLIGHT")}});Ai("STARDIVER",80,"cd_STARDIVER",{replaceIf:[rG],applicationDelay:1.29,animationLock:1.5,potency:[["NEVER",720],["MELEE_MASTERY_DRG",840]],falloff:.4,cooldown:30,validateAttempt:e=>e.hasResourceAvailable("LIFE_OF_THE_DRAGON"),onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_STARDIVER")&&e.refreshBuff("STARCROSS_READY",0)}});Ai("STARCROSS",100,"cd_STARCROSS",{startOnHotbar:!1,replaceIf:[cG],applicationDelay:.98,potency:1e3,falloff:.4,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("STARCROSS_READY")&&e.hasResourceAvailable("LIFE_OF_THE_DRAGON"),highlightIf:e=>e.hasResourceAvailable("STARCROSS_READY")&&e.hasResourceAvailable("LIFE_OF_THE_DRAGON"),onConfirm:e=>{e.tryConsumeResource("STARCROSS_READY")}});Ai("ELUSIVE_JUMP",35,"cd_ELUSIVE_JUMP",{potency:0,applicationDelay:0,animationLock:1,cooldown:30,onConfirm:e=>{e.refreshBuff("ENHANCED_PIERCING_TALON",0)}});Ai("WINGED_GLIDE",45,"cd_WINGED_GLIDE",{potency:0,applicationDelay:0,animationLock:Vt,cooldown:60,maxCharges:2});const S0=["SONIC_BREAK_DOT","BOW_SHOCK_DOT"],uG=Object.keys(GR).filter(e=>!S0.includes(e));Object.keys(GR).forEach(e=>jt(e,`GNB/${we[e].name}.png`));class dG extends Wt{jobSpecificOtherTargetedBuffViewProps(){return[...S0.map(t=>this.makeCommonTimer(t,!1))]}jobSpecificSelfTargetedBuffViewProps(){return uG.map(t=>t==="ROYAL_GUARD"?this.makeCommonTimerless(t):this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){const a=this.state.resources,o=a.get("GNB_COMBO_TRACKER"),s=a.get("GNB_AOE_COMBO_TRACKER"),c=a.get("POWDER_GAUGE").availableAmount(),d=a.get("ROYAL_GUARD").availableAmount(),h=o.available(1)?o.pendingChange?.timeTillEvent:s.available(1)?s.pendingChange?.timeTillEvent:void 0,f=a.get("BLOODFEST").available(1)?2:1;return[{kind:"bar",name:g({en:"Combo Timer",zh:""}),color:t.rdm.manaStack,progress:h?h/30:0,valueString:h?.toFixed(3)??"N/A"},{kind:"counter",name:g({en:"Royal Guard",zh:""}),color:t.rdm.manaStack,currentStacks:d,maxStacks:1},{kind:"counter",name:g({en:"Powder Gauge",zh:""}),color:t.rdm.manaStack,currentStacks:c,maxStacks:(this.state.hasTraitUnlocked("CARTRIDGE_CHARGE_II")?3:2)*f}]}}const Ot=(e,t,a)=>{Ve("GNB",e,t,a??{})};Ot("POWDER_GAUGE",3,{warnOnOvercap:!0});Ot("ROYAL_GUARD",1);Ot("NO_MERCY",1,{timeout:20});Ot("AURORA",1,{timeout:18});Ot("BOW_SHOCK_DOT",1,{timeout:15});Ot("CAMOUFLAGE",1,{timeout:20});Ot("HEART_OF_CORUNDUM",1,{timeout:8});Ot("CLARITY_OF_CORUNDUM",1,{timeout:15});Ot("CATHARSIS_OF_CORUNDUM",1,{timeout:20});Ot("NEBULA",1,{timeout:15});Ot("GREAT_NEBULA",1,{timeout:15});Ot("HEART_OF_LIGHT",1,{timeout:15});Ot("HEART_OF_STONE",1,{timeout:8});Ot("READY_TO_BLAST",1,{timeout:10,warnOnTimeout:!0});Ot("READY_TO_BREAK",1,{timeout:30,warnOnTimeout:!0});Ot("READY_TO_GOUGE",1,{timeout:10,warnOnTimeout:!0});Ot("READY_TO_RAZE",1,{timeout:10,warnOnTimeout:!0});Ot("READY_TO_REIGN",1,{timeout:30,warnOnTimeout:!0});Ot("READY_TO_RIP",1,{timeout:10,warnOnTimeout:!0});Ot("READY_TO_TEAR",1,{timeout:10,warnOnTimeout:!0});Ot("SONIC_BREAK_DOT",1,{timeout:15});Ot("SUPERBOLIDE",1,{timeout:10});Ot("BRUTAL_SHELL",1,{timeout:30});Ot("GNB_COMBO_TRACKER",2,{timeout:30});Ot("GNB_AOE_COMBO_TRACKER",1,{timeout:30});Ot("GNB_GNASHING_COMBO_TRACKER",2,{timeout:30});Ot("GNB_REIGN_COMBO_TRACKER",2,{timeout:30});Ot("BLOODFEST",1,{timeout:30});const uN=["KEEN_EDGE","BRUTAL_SHELL","SOLID_BARREL"],hG=["DEMON_SLICE","DEMON_SLAUGHTER"],dN=["GNASHING_FANG","SAVAGE_CLAW","WICKED_TALON"],hN=["REIGN_OF_BEASTS","NOBLE_BLOOD","LION_HEART"];class fG extends Xt{constructor(t){super(t);const a=this.hasTraitUnlocked("ENHANCED_AURORA")?2:1;[new He("cd_AURORA",60,a,a)].forEach(s=>this.cooldowns.set(s)),this.cooldowns.set(new He("cd_DOUBLE_DOWN",this.config.adjustedSksGCD(60),1,1));const o=this.hasTraitUnlocked("CARTRIDGE_CHARGE_II")?3:2;this.resources.set(new Jn("POWDER_GAUGE",o,0,!0)),this.registerRecurringEvents([{groupedEffects:[{effectName:"SONIC_BREAK_DOT",appliedBy:["SONIC_BREAK"]}]},{groupedEffects:[{effectName:"BOW_SHOCK_DOT",appliedBy:["BOW_SHOCK"]}]}])}get statusPropsGenerator(){return new dG(this)}jobSpecificAddDamageBuffCovers(t,a){this.hasResourceAvailable("NO_MERCY")&&t.addBuff(k.NoMercy)}fixGNBComboState(t){if(hG.includes(t)){this.tryConsumeResource("GNB_COMBO_TRACKER",!0),this.tryConsumeResource("GNB_REIGN_COMBO_TRACKER",!0),this.tryConsumeResource("GNB_GNASHING_COMBO_TRACKER",!0),this.tryConsumeResource("GNB_AOE_COMBO_TRACKER"),t==="DEMON_SLICE"&&this.setComboState("GNB_AOE_COMBO_TRACKER",1);return}let a="GNB_COMBO_TRACKER",o=-1;uN.includes(t)?(this.tryConsumeResource("GNB_AOE_COMBO_TRACKER",!0),this.tryConsumeResource("GNB_REIGN_COMBO_TRACKER",!0),this.tryConsumeResource("GNB_GNASHING_COMBO_TRACKER",!0),o=uN.indexOf(t)):dN.includes(t)?(this.tryConsumeResource("GNB_REIGN_COMBO_TRACKER",!0),a="GNB_GNASHING_COMBO_TRACKER",o=dN.indexOf(t)):hN.includes(t)&&(this.tryConsumeResource("GNB_GNASHING_COMBO_TRACKER",!0),a="GNB_REIGN_COMBO_TRACKER",o=hN.indexOf(t));let s=0;o===0?s=1:o===1&&this.hasResourceExactly(a,1)&&(s=2),this.setComboState(a,s)}gainCartridge(t){this.resources.get("POWDER_GAUGE").gain(t)}refreshBuff(t,a){this.addEvent(new Ce("gain buff",a,()=>{this.resources.get(t).gain(1),this.enqueueResourceDrop(t)}))}}const sa=(e,t,a)=>{const o=Me(a.onConfirm,s=>{["SONIC_BREAK","BURST_STRIKE","FATED_CIRCLE","DOUBLE_DOWN","LIGHTNING_SHOT"].includes(e)||s.fixGNBComboState(e),s.tryConsumeResource("READY_TO_BLAST"),s.tryConsumeResource("READY_TO_RAZE"),s.tryConsumeResource("READY_TO_RIP"),s.tryConsumeResource("READY_TO_TEAR"),s.tryConsumeResource("READY_TO_GOUGE")});return nn("GNB",e,t,{...a,onConfirm:o,recastTime:s=>s.config.adjustedSksGCD(),jobPotencyModifiers:s=>s.hasResourceAvailable("NO_MERCY")?[X.NoMercy]:[]})},ln=(e,t,a,o)=>at("GNB",e,t,a,{...o,jobPotencyModifiers:s=>s.hasResourceAvailable("NO_MERCY")?[X.NoMercy]:[]}),I0={newSkill:"GNASHING_FANG",condition:e=>e.resources.get("GNB_GNASHING_COMBO_TRACKER").availableAmount()===0},_0={newSkill:"SAVAGE_CLAW",condition:e=>e.resources.get("GNB_GNASHING_COMBO_TRACKER").availableAmount()===1},g0={newSkill:"WICKED_TALON",condition:e=>e.resources.get("GNB_GNASHING_COMBO_TRACKER").availableAmount()===2},p0={newSkill:"REIGN_OF_BEASTS",condition:e=>e.resources.get("GNB_REIGN_COMBO_TRACKER").availableAmount()===0},N0={newSkill:"NOBLE_BLOOD",condition:e=>e.resources.get("GNB_REIGN_COMBO_TRACKER").availableAmount()===1},C0={newSkill:"LION_HEART",condition:e=>e.resources.get("GNB_REIGN_COMBO_TRACKER").availableAmount()===2},EG={newSkill:"HYPERVELOCITY",condition:e=>e.hasResourceAvailable("READY_TO_BLAST")},mG={newSkill:"FATED_BRAND",condition:e=>e.hasResourceAvailable("READY_TO_RAZE")},AG={newSkill:"JUGULAR_RIP",condition:e=>e.hasResourceAvailable("READY_TO_RIP")},RG={newSkill:"ABDOMEN_TEAR",condition:e=>e.hasResourceAvailable("READY_TO_TEAR")},TG={newSkill:"EYE_GOUGE",condition:e=>e.hasResourceAvailable("READY_TO_GOUGE")},SG={newSkill:"ROYAL_GUARD",condition:e=>!e.hasResourceAvailable("ROYAL_GUARD")},IG={newSkill:"RELEASE_ROYAL_GUARD",condition:e=>e.hasResourceAvailable("ROYAL_GUARD")};sa("LIGHTNING_SHOT",15,{potency:150,applicationDelay:.72});sa("KEEN_EDGE",1,{potency:[["NEVER",150],["MELEE_MASTERY_TANK",200],["MELEE_MASTERY_II_TANK",300]],applicationDelay:.89});sa("BRUTAL_SHELL",4,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",160],["MELEE_MASTERY_II_TANK",240]],combo:{potency:[["NEVER",240],["MELEE_MASTERY_TANK",300],["MELEE_MASTERY_II_TANK",380]],resource:"GNB_COMBO_TRACKER",resourceValue:1},applicationDelay:1.07,onConfirm:e=>{e.hasResourceExactly("GNB_COMBO_TRACKER",1)&&e.refreshBuff("BRUTAL_SHELL",0)},highlightIf:e=>e.hasResourceExactly("GNB_COMBO_TRACKER",1)});sa("SOLID_BARREL",26,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",140],["MELEE_MASTERY_II_TANK",240]],combo:{potency:[["NEVER",320],["MELEE_MASTERY_TANK",360],["MELEE_MASTERY_II_TANK",460]],resource:"GNB_COMBO_TRACKER",resourceValue:2},applicationDelay:1.07,onConfirm:e=>{e.hasResourceExactly("GNB_COMBO_TRACKER",2)&&e.gainCartridge(1)},highlightIf:e=>e.hasResourceExactly("GNB_COMBO_TRACKER",2)});sa("DEMON_SLICE",10,{potency:100,falloff:0,applicationDelay:.62});sa("DEMON_SLAUGHTER",40,{potency:100,combo:{potency:160,resource:"GNB_AOE_COMBO_TRACKER",resourceValue:1},falloff:0,applicationDelay:.62,onConfirm:e=>{e.hasResourceExactly("GNB_AOE_COMBO_TRACKER",1)&&e.gainCartridge(1)},highlightIf:e=>e.hasResourceExactly("GNB_AOE_COMBO_TRACKER",1)});sa("BURST_STRIKE",30,{potency:[["NEVER",340],["MELEE_MASTERY_II_TANK",420]],applicationDelay:.71,validateAttempt:e=>e.hasResourceAvailable("POWDER_GAUGE"),onConfirm:e=>{e.tryConsumeResource("POWDER_GAUGE"),e.hasTraitUnlocked("ENHANCED_CONTINUATION")&&e.refreshBuff("READY_TO_BLAST",0)},highlightIf:e=>e.hasResourceAvailable("POWDER_GAUGE")});sa("FATED_CIRCLE",72,{potency:300,falloff:0,applicationDelay:.54,validateAttempt:e=>e.hasResourceAvailable("POWDER_GAUGE"),onConfirm:e=>{e.tryConsumeResource("POWDER_GAUGE"),e.hasTraitUnlocked("ENHANCED_CONTINUATION_II")&&e.refreshBuff("READY_TO_RAZE",0)},highlightIf:e=>e.hasResourceAvailable("POWDER_GAUGE")});ln("BLOODFEST",76,"cd_BLOODFEST",{applicationDelay:0,cooldown:60,maxCharges:1,onConfirm:e=>{const t=e.hasTraitUnlocked("CARTRIDGE_CHARGE_II")?3:2;e.gainStatus("BLOODFEST"),e.resources.set(new Jn("POWDER_GAUGE",t*2,e.resources.get("POWDER_GAUGE").availableAmount())),e.addEvent(new Ce("restore bloodfest max stacks",Ft("GNB","BLOODFEST").maxTimeout,()=>{e.resources.get("POWDER_GAUGE").availableAmount()>t&&p.reportWarning({kind:"overcap",rsc:"POWDER_GAUGE"}),e.resources.set(new Jn("POWDER_GAUGE",t,Math.min(e.resources.get("POWDER_GAUGE").availableAmount(),t)))})),e.gainCartridge(t),e.hasTraitUnlocked("ENHANCED_BLOODFEST")&&e.refreshBuff("READY_TO_REIGN",0)}});ln("NO_MERCY",2,"cd_NO_MERCY",{applicationDelay:0,cooldown:60,maxCharges:1,onConfirm:e=>{e.refreshBuff("NO_MERCY",.62),e.refreshBuff("READY_TO_BREAK",0)}});sa("SONIC_BREAK",54,{potency:340,applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("READY_TO_BREAK"),onConfirm:(e,t)=>{e.tryConsumeResource("READY_TO_BREAK");const a=[];e.hasResourceAvailable("NO_MERCY")&&a.push(X.NoMercy),e.addDoTPotencies({node:t,effectName:"SONIC_BREAK_DOT",skillName:"SONIC_BREAK",tickPotency:120,speedStat:"sks",modifiers:a})},onApplication:(e,t)=>e.applyDoT("SONIC_BREAK_DOT",t),highlightIf:e=>e.hasResourceAvailable("READY_TO_BREAK")});sa("GNASHING_FANG",60,{replaceIf:[_0,g0],potency:[["NEVER",330],["MELEE_MASTERY_II_TANK",440]],applicationDelay:.62,recastTime:e=>e.config.adjustedSksGCD(),validateAttempt:e=>e.hasResourceAvailable("POWDER_GAUGE"),onConfirm:e=>{e.refreshBuff("READY_TO_RIP",0),e.tryConsumeResource("POWDER_GAUGE")},highlightIf:e=>e.hasResourceAvailable("POWDER_GAUGE")&&!e.hasResourceAvailable("GNB_REIGN_COMBO_TRACKER"),secondaryCooldown:{cdName:"cd_GNASHING_FANG",cooldown:30,maxCharges:2}});sa("SAVAGE_CLAW",60,{startOnHotbar:!1,replaceIf:[I0,g0],potency:[["NEVER",410],["MELEE_MASTERY_II_TANK",500]],applicationDelay:.62,validateAttempt:e=>e.hasResourceExactly("GNB_GNASHING_COMBO_TRACKER",1),onConfirm:e=>{e.refreshBuff("READY_TO_TEAR",0)},highlightIf:e=>e.hasResourceExactly("GNB_GNASHING_COMBO_TRACKER",1)});sa("WICKED_TALON",60,{startOnHotbar:!1,replaceIf:[I0,_0],potency:[["NEVER",490],["MELEE_MASTERY_II_TANK",560]],applicationDelay:1.16,validateAttempt:e=>e.hasResourceExactly("GNB_GNASHING_COMBO_TRACKER",2),onConfirm:e=>{e.refreshBuff("READY_TO_GOUGE",0)},highlightIf:e=>e.hasResourceExactly("GNB_GNASHING_COMBO_TRACKER",2)});sa("DOUBLE_DOWN",90,{potency:1e3,falloff:.15,applicationDelay:.72,recastTime:e=>e.config.adjustedSksGCD(),validateAttempt:e=>e.hasResourceAvailable("POWDER_GAUGE",2),onConfirm:e=>{e.resources.get("POWDER_GAUGE").consume(2)},highlightIf:e=>e.hasResourceAvailable("POWDER_GAUGE",2),secondaryCooldown:{cdName:"cd_DOUBLE_DOWN",cooldown:60,maxCharges:1}});sa("REIGN_OF_BEASTS",100,{replaceIf:[N0,C0],potency:800,falloff:.6,applicationDelay:1.16,validateAttempt:e=>e.hasResourceAvailable("READY_TO_REIGN"),onConfirm:e=>{e.tryConsumeResource("READY_TO_REIGN")},highlightIf:e=>e.hasResourceAvailable("READY_TO_REIGN")});sa("NOBLE_BLOOD",100,{startOnHotbar:!1,replaceIf:[p0,C0],potency:900,falloff:.6,applicationDelay:1.65,validateAttempt:e=>e.hasResourceExactly("GNB_REIGN_COMBO_TRACKER",1),highlightIf:e=>e.hasResourceExactly("GNB_REIGN_COMBO_TRACKER",1)});sa("LION_HEART",100,{startOnHotbar:!1,replaceIf:[p0,N0],potency:1e3,falloff:.6,applicationDelay:1.79,validateAttempt:e=>e.hasResourceExactly("GNB_REIGN_COMBO_TRACKER",2),highlightIf:e=>e.hasResourceExactly("GNB_REIGN_COMBO_TRACKER",2)});ln("CONTINUATION",70,"cd_CONTINUATION",{replaceIf:[EG,mG,AG,RG,TG],applicationDelay:0,potency:0,cooldown:1,validateAttempt:e=>!1});ln("HYPERVELOCITY",86,"cd_HYPERVELOCITY",{startOnHotbar:!1,applicationDelay:.76,potency:[["NEVER",140],["MELEE_MASTERY_II_TANK",180]],cooldown:1,validateAttempt:e=>e.hasResourceAvailable("READY_TO_BLAST"),highlightIf:e=>e.hasResourceAvailable("READY_TO_BLAST"),onConfirm:e=>{e.tryConsumeResource("READY_TO_BLAST")}});ln("FATED_BRAND",96,"cd_FATED_BRAND",{startOnHotbar:!1,applicationDelay:1.16,potency:120,falloff:0,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("READY_TO_RAZE"),highlightIf:e=>e.hasResourceAvailable("READY_TO_RAZE"),onConfirm:e=>{e.tryConsumeResource("READY_TO_RAZE")}});ln("JUGULAR_RIP",70,"cd_JUGULAR_RIP",{startOnHotbar:!1,applicationDelay:.8,potency:[["NEVER",180],["MELEE_MASTERY_II_TANK",220]],cooldown:1,validateAttempt:e=>e.hasResourceAvailable("READY_TO_RIP"),highlightIf:e=>e.hasResourceAvailable("READY_TO_RIP"),onConfirm:e=>{e.tryConsumeResource("READY_TO_RIP")}});ln("ABDOMEN_TEAR",70,"cd_ABDOMEN_TEAR",{startOnHotbar:!1,applicationDelay:.76,potency:[["NEVER",220],["MELEE_MASTERY_II_TANK",260]],cooldown:1,validateAttempt:e=>e.hasResourceAvailable("READY_TO_TEAR"),highlightIf:e=>e.hasResourceAvailable("READY_TO_TEAR"),onConfirm:e=>{e.tryConsumeResource("READY_TO_TEAR")}});ln("EYE_GOUGE",70,"cd_EYE_GOUGE",{startOnHotbar:!1,applicationDelay:.98,potency:[["NEVER",260],["MELEE_MASTERY_II_TANK",300]],cooldown:1,validateAttempt:e=>e.hasResourceAvailable("READY_TO_GOUGE"),highlightIf:e=>e.hasResourceAvailable("READY_TO_GOUGE"),onConfirm:e=>{e.tryConsumeResource("READY_TO_GOUGE")}});ln("DANGER_ZONE",18,"cd_DANGER_ZONE",{autoUpgrade:{trait:"DANGER_ZONE_MASTERY",otherSkill:"BLASTING_ZONE"},applicationDelay:.62,potency:250,cooldown:30});ln("BLASTING_ZONE",80,"cd_BLASTING_ZONE",{startOnHotbar:!1,applicationDelay:.62,potency:800,cooldown:30});ln("BOW_SHOCK",62,"cd_BOW_SHOCK",{applicationDelay:.62,potency:150,falloff:0,cooldown:60,onConfirm:(e,t)=>{const a=[];e.hasResourceAvailable("NO_MERCY")&&a.push(X.NoMercy),e.addDoTPotencies({node:t,effectName:"BOW_SHOCK_DOT",skillName:"BOW_SHOCK",tickPotency:60,speedStat:"sks",modifiers:a})},onApplication:(e,t)=>e.applyDoT("BOW_SHOCK_DOT",t)});ln("TRAJECTORY",56,"cd_TRAJECTORY",{animationLock:Vt,cooldown:30,maxCharges:2,applicationDelay:.66,drawsAggro:!0});ln("HEART_OF_STONE",68,"cd_HEART_OF_STONE",{autoUpgrade:{trait:"HEART_OF_STONE_MASTERY",otherSkill:"HEART_OF_CORUNDUM"},applicationDelay:.62,cooldown:25,onApplication:e=>{e.refreshBuff("HEART_OF_STONE",0)}});ln("HEART_OF_CORUNDUM",82,"cd_HEART_OF_CORUNDUM",{startOnHotbar:!1,applicationDelay:.62,cooldown:25,onApplication:e=>{e.refreshBuff("CATHARSIS_OF_CORUNDUM",0),e.refreshBuff("HEART_OF_CORUNDUM",0),e.refreshBuff("CLARITY_OF_CORUNDUM",0)}});ln("SUPERBOLIDE",50,"cd_SUPERBOLIDE",{applicationDelay:0,cooldown:360,onConfirm:e=>{e.refreshBuff("SUPERBOLIDE",0)}});ln("CAMOUFLAGE",6,"cd_CAMOUFLAGE",{applicationDelay:.62,cooldown:90,onConfirm:e=>{e.refreshBuff("CAMOUFLAGE",0)}});ln("NEBULA",38,"cd_NEBULA",{autoUpgrade:{trait:"NEBULA_MASTERY",otherSkill:"GREAT_NEBULA"},applicationDelay:.56,cooldown:120,onConfirm:e=>{e.refreshBuff("NEBULA",0)}});ln("GREAT_NEBULA",38,"cd_GREAT_NEBULA",{startOnHotbar:!1,applicationDelay:.56,cooldown:120,onConfirm:e=>{e.refreshBuff("GREAT_NEBULA",0)}});ln("HEART_OF_LIGHT",64,"cd_HEART_OF_LIGHT",{applicationDelay:.62,cooldown:60,onConfirm:e=>{e.refreshBuff("HEART_OF_LIGHT",0)}});ln("AURORA",45,"cd_AURORA",{applicationDelay:.62,cooldown:60,onConfirm:e=>{e.refreshBuff("AURORA",0)},maxCharges:2});ln("ROYAL_GUARD",10,"cd_ROYAL_GUARD",{applicationDelay:0,cooldown:2,validateAttempt:e=>!e.hasResourceAvailable("ROYAL_GUARD"),onConfirm:e=>{e.resources.get("ROYAL_GUARD").gain(1)},replaceIf:[IG],secondaryCooldown:{cdName:"cd_RELEASE_ROYAL_GUARD",cooldown:1,maxCharges:1}});ln("RELEASE_ROYAL_GUARD",10,"cd_RELEASE_ROYAL_GUARD",{startOnHotbar:!1,replaceIf:[SG],applicationDelay:0,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("ROYAL_GUARD"),onConfirm:e=>{e.tryConsumeResource("ROYAL_GUARD")},secondaryCooldown:{cdName:"cd_ROYAL_GUARD",cooldown:2,maxCharges:1}});Object.keys(BR).forEach(e=>jt(e,`MCH/${we[e].name}.png`));class _G extends Wt{jobSpecificOtherTargetedBuffViewProps(){return[...["WILDFIRE","BIOBLASTER"].map(t=>this.makeCommonTimer(t,!1))]}jobSpecificSelfTargetedBuffViewProps(){return[...Object.keys(BR).filter(t=>!(t==="WILDFIRE"||t==="BIOBLASTER")).map(t=>this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){const a=this.state.resources,o=a.get("HEAT_GAUGE").availableAmount(),s=a.get("BATTERY_GAUGE").availableAmount(),c=a.get("QUEEN_PUNCHES"),d=a.get("QUEEN_FINISHERS"),h=c.availableAmount()+d.availableAmount(),f=c.maxValue+d.maxValue;return[{kind:"bar",name:g({en:"Heat",zh:""}),color:t.mch.heat,progress:o/100,valueString:o.toFixed(0)},{kind:"bar",name:g({en:"Battery",zh:""}),color:t.mch.battery,progress:s/100,valueString:s.toFixed(0)},{kind:"bar",name:g({en:"Queen Hits",zh:""}),color:t.mch.battery,progress:h/f,valueString:h.toFixed(0)}]}}const Bn=(e,t,a)=>{Ve("MCH",e,t,a??{})};Bn("HEAT_GAUGE",100,{warnOnOvercap:!0});Bn("BATTERY_GAUGE",100,{warnOnOvercap:!0});Bn("REASSEMBLED",1,{timeout:5,warnOnTimeout:!0});Bn("OVERHEATED",5,{timeout:10,warnOnTimeout:!0});Bn("WILDFIRE",1,{timeout:10});Bn("WILDFIRE_SELF",1,{timeout:10});Bn("FLAMETHROWER",1,{timeout:10});Bn("BIOBLASTER",1,{timeout:15});Bn("TACTICIAN",1,{timeout:15});Bn("HYPERCHARGED",1,{timeout:30,warnOnTimeout:!0});Bn("EXCAVATOR_READY",1,{timeout:30,warnOnTimeout:!0});Bn("FULL_METAL_MACHINIST",1,{timeout:30,warnOnTimeout:!0});Bn("HEAT_COMBO",2,{timeout:30});Bn("QUEEN",7);Bn("QUEEN_PUNCHES",5);Bn("QUEEN_FINISHERS",2);Bn("WILDFIRE_HITS",6);Bn("BATTERY_BONUS",50);const gG=["HEATED_CLEAN_SHOT","HEATED_SLUG_SHOT","HEATED_SPLIT_SHOT","SPREAD_SHOT","SCATTERGUN"],fN=["CHAIN_SAW","EXCAVATOR","FULL_METAL_FIELD","SCATTERGUN","BIOBLASTER","SPREAD_SHOT"];class pG extends Xt{constructor(t){super(t),this.cooldowns.set(new He("cd_AIR_ANCHOR",this.config.adjustedSksGCD(40),1,1)),this.cooldowns.set(new He("cd_CHAINSAW",this.config.adjustedSksGCD(60),1,1)),this.hasTraitUnlocked("QUEENS_GAMBIT")||(this.resources.set(new Jn("QUEEN_FINISHERS",1,0)),this.resources.set(new Jn("QUEEN",6,0))),this.hasTraitUnlocked("ENHANCED_REASSEMBLE")||this.cooldowns.set(new He("cd_REASSEMBLE",55,1,1)),this.hasTraitUnlocked("ENHANCED_MULTI_WEAPON")||this.cooldowns.set(new He("cd_DRILL",this.config.adjustedSksGCD(20),1,1)),this.hasTraitUnlocked("CHARGED_ACTION_MASTERY")||(this.cooldowns.set(new He("cd_DOUBLE_CHECK",30,2,2)),this.cooldowns.set(new He("cd_CHECKMATE",30,2,2))),this.hasTraitUnlocked("ENHANCED_TACTICIAN")||this.cooldowns.set(new He("cd_TACTICIAN",120,1,1)),this.registerRecurringEvents([{groupedEffects:[{effectName:"BIOBLASTER",appliedBy:["BIOBLASTER"]}]},{groupedEffects:[{effectName:"FLAMETHROWER",appliedBy:["FLAMETHROWER"],isGroundTargeted:!0,exclude:!0}]}],["ROOK_AUTOTURRET","AUTOMATON_QUEEN","WILDFIRE"])}get statusPropsGenerator(){return new _G(this)}jobSpecificRegisterRecurringEvents(){const t=()=>{this.handleDoTTick("FLAMETHROWER"),this.getDisplayTime()>=0&&p.reportDotTick(this.time,"FLAMETHROWER"),this.addEvent(new Ce("Flamethrower tick",1,()=>{t()}))};let a=this.config.timeTillFirstManaTick+this.dotTickOffset;for(;a>1;)a--;this.addEvent(new Ce("initial Flamethrower tick",a,t))}cancelChanneledSkills(){this.tryConsumeResource("FLAMETHROWER")}processComboStatus(t){if(!gG.includes(t))return;const a=this.resources.get("HEAT_COMBO").availableAmount();let o=0;a===0&&t==="HEATED_SPLIT_SHOT"?o=1:a===1&&t==="HEATED_SLUG_SHOT"&&(o=2),this.setComboState("HEAT_COMBO",o)}gainResource(t,a){this.resources.get(t).gain(a)}handleQueenPunch=()=>{if(!this.hasResourceAvailable("QUEEN_PUNCHES")){this.handleQueenFinisher();return}const t=this.resources.get("QUEEN").node;t!==void 0&&this.resolveQueenPotency(t),this.resources.get("QUEEN_PUNCHES").consume(1),this.hasResourceAvailable("QUEEN_PUNCHES")?this.addEvent(new Ce("queen punch",1.56,()=>this.handleQueenPunch())):this.addEvent(new Ce("queen finisher",1.56,()=>this.handleQueenFinisher()))};resolveQueenPotency(t){const a=this.resources.get("QUEEN_PUNCHES").availableAmount()+this.resources.get("QUEEN_FINISHERS").availableAmount(),o=this.resources.get("QUEEN").availableAmount()-a;if(o<0)return;const s=t.getDotPotencies("QUEEN")[o];this.hasResourceAvailable("TINCTURE")&&s.modifiers.push(X.Tincture),s.snapshotTime=this.getDisplayTime(),p.resolvePotency(s)}calculateQueenPotency(t,a){const o=this.resources.get("BATTERY_BONUS").availableAmount(),s=(a-t)*(o/50);return Math.floor((t+s)*.89)}handleQueenFinisher=()=>{if(!this.hasResourceAvailable("QUEEN_FINISHERS"))return;const t=this.resources.get("QUEEN").node;t!==void 0&&this.resolveQueenPotency(t),this.resources.get("QUEEN_FINISHERS").consume(1),this.hasResourceAvailable("QUEEN_FINISHERS")?this.addEvent(new Ce("queen finisher",2,()=>this.handleQueenFinisher())):(this.tryConsumeResource("BATTERY_BONUS",!0),this.addEvent(new Ce("expire queen",5,()=>{this.tryConsumeResource("QUEEN",!0)})))};expireWildfire(){if(!this.hasResourceAvailable("WILDFIRE_HITS"))return;this.tryConsumeResource("WILDFIRE_SELF"),this.tryConsumeResource("WILDFIRE");const t=this.hasTraitUnlocked("ENHANCED_WILD_FIRE")?240:100,a=Math.min(this.resources.get("WILDFIRE_HITS").availableAmount(),6)*t,o=this.resources.get("WILDFIRE").node;if(o===void 0)return;const s=o.getDotPotencies("WILDFIRE")[0];s.base=a,p.resolvePotency(s),this.tryConsumeResource("WILDFIRE_HITS",!0)}}const Ra=(e,t,a)=>{const o=Me(a.onConfirm,s=>s.processComboStatus(e),s=>{e!=="FULL_METAL_FIELD"&&s.tryConsumeResource("REASSEMBLED")},s=>{s.hasResourceAvailable("WILDFIRE_SELF")&&s.resources.get("WILDFIRE_HITS").gain(1)},s=>{fN.includes(e)||s.tryConsumeResource("OVERHEATED")});return nn("MCH",e,t,{...a,onConfirm:o,jobPotencyModifiers:s=>{const c=[];return(s.hasResourceAvailable("REASSEMBLED")||e==="FULL_METAL_FIELD")&&c.push(X.AutoCDH),s.hasResourceAvailable("OVERHEATED")&&!fN.includes(e)&&c.push(X.Overheated),c}})},$i=(e,t,a,o)=>at("MCH",e,t,a,o),DT=(e,t,a,o)=>{const s=Me(o.onConfirm);return je("MCH",e,t,a,{...o,onConfirm:s})};Ra("HEATED_SPLIT_SHOT",54,{potency:[["NEVER",180],["MARKSMANS_MASTERY",200],["MARKSMANS_MASTERY_II",220]],applicationDelay:.8,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.gainResource("HEAT_GAUGE",5)});Ra("HEATED_SLUG_SHOT",60,{potency:[["NEVER",100],["MARKSMANS_MASTERY",120],["MARKSMANS_MASTERY_II",140]],combo:{potency:[["NEVER",280],["MARKSMANS_MASTERY",300],["MARKSMANS_MASTERY_II",320]],resource:"HEAT_COMBO",resourceValue:1},applicationDelay:.8,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.gainResource("HEAT_GAUGE",5),highlightIf:e=>e.hasResourceExactly("HEAT_COMBO",1)});Ra("HEATED_CLEAN_SHOT",64,{potency:[["NEVER",100],["MARKSMANS_MASTERY",120],["MARKSMANS_MASTERY_II",160]],combo:{potency:[["NEVER",360],["MARKSMANS_MASTERY",380],["MARKSMANS_MASTERY_II",420]],resource:"HEAT_COMBO",resourceValue:2},applicationDelay:.8,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>{e.gainResource("HEAT_GAUGE",5),e.gainResource("BATTERY_GAUGE",10)},highlightIf:e=>e.hasResourceExactly("HEAT_COMBO",2)});DT("REASSEMBLE",10,"cd_REASSEMBLE",{rscType:"REASSEMBLED",applicationDelay:0,cooldown:55,maxCharges:2});const Lf=[["NEVER",620],["MARKSMANS_MASTERY_II",660]];Ra("DRILL",58,{potency:Lf,applicationDelay:1.15,recastTime:e=>e.config.adjustedSksGCD(),secondaryCooldown:{cdName:"cd_DRILL",cooldown:20,maxCharges:2}});Ra("HOT_SHOT",4,{autoUpgrade:{trait:"HOT_SHOT_MASTERY",otherSkill:"AIR_ANCHOR"},potency:240,applicationDelay:1.15,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.gainResource("BATTERY_GAUGE",20),secondaryCooldown:{cdName:"cd_AIR_ANCHOR",cooldown:40,maxCharges:1}});Ra("AIR_ANCHOR",76,{startOnHotbar:!1,potency:Lf,applicationDelay:1.15,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.gainResource("BATTERY_GAUGE",20),secondaryCooldown:{cdName:"cd_AIR_ANCHOR",cooldown:40,maxCharges:1}});Ra("CHAIN_SAW",90,{replaceIf:[{newSkill:"EXCAVATOR",condition:e=>e.hasResourceAvailable("EXCAVATOR_READY")}],potency:Lf,falloff:.25,applicationDelay:1.03,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>{e.gainResource("BATTERY_GAUGE",20),e.hasTraitUnlocked("ENHANCED_MULTI_WEAPON_II")&&e.gainStatus("EXCAVATOR_READY")},secondaryCooldown:{cdName:"cd_CHAINSAW",cooldown:60,maxCharges:1}});Ra("EXCAVATOR",90,{startOnHotbar:!1,potency:Lf,falloff:.25,applicationDelay:1.07,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>{e.gainResource("BATTERY_GAUGE",20),e.tryConsumeResource("EXCAVATOR_READY")},validateAttempt:e=>e.hasResourceAvailable("EXCAVATOR_READY"),highlightIf:e=>e.hasResourceAvailable("EXCAVATOR_READY")});$i("BARREL_STABILIZER",66,"cd_BARREL_STABILIZER",{replaceIf:[{newSkill:"FULL_METAL_FIELD",condition:e=>e.hasResourceAvailable("FULL_METAL_MACHINIST")}],applicationDelay:0,cooldown:120,maxCharges:1,requiresCombat:!0,onConfirm:e=>{e.gainStatus("HYPERCHARGED"),e.hasTraitUnlocked("ENHANCED_BARREL_STABILIZER")&&e.gainStatus("FULL_METAL_MACHINIST")}});Ra("FULL_METAL_FIELD",100,{startOnHotbar:!1,potency:900,falloff:.25,applicationDelay:1.02,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.tryConsumeResource("FULL_METAL_MACHINIST"),validateAttempt:e=>e.hasResourceAvailable("FULL_METAL_MACHINIST"),highlightIf:e=>e.hasResourceAvailable("FULL_METAL_MACHINIST")});DT("HYPERCHARGE",30,"cd_HYPERCHARGE",{rscType:"OVERHEATED",applicationDelay:0,cooldown:10,maxCharges:1,onConfirm:e=>{e.hasResourceAvailable("HYPERCHARGED")?e.tryConsumeResource("HYPERCHARGED"):e.resources.get("HEAT_GAUGE").consume(50)},validateAttempt:e=>e.hasResourceAvailable("HEAT_GAUGE",50)||e.hasResourceAvailable("HYPERCHARGED"),highlightIf:e=>e.hasResourceAvailable("HEAT_GAUGE",50)||e.hasResourceAvailable("HYPERCHARGED")});$i("WILDFIRE",45,"cd_WILDFIRE",{replaceIf:[{newSkill:"DETONATOR",condition:e=>e.hasResourceAvailable("WILDFIRE_SELF")}],applicationDelay:.67,cooldown:120,maxCharges:1,onConfirm:(e,t)=>{e.gainStatus("WILDFIRE_SELF");const a=e.resources.get("WILDFIRE"),o=new $t({config:e.config,sourceTime:e.getDisplayTime(),sourceSkill:"WILDFIRE",aspect:Ie.Physical,basePotency:0,snapshotTime:e.getDisplayTime(),description:"wildfire",targetCount:1});o.modifiers=[X.NoCDH],e.hasResourceAvailable("TINCTURE")&&o.modifiers.push(X.Tincture),t.addDoTPotency(o,"WILDFIRE"),a.gain(1),a.node=t,e.resources.addResourceEvent({rscType:"WILDFIRE",name:"wildfire expiration",delay:Ft("MCH","WILDFIRE").maxTimeout,fnOnRsc:s=>e.expireWildfire()})}});$i("DETONATOR",45,"cd_DETONATOR",{startOnHotbar:!1,applicationDelay:.62,cooldown:1,maxCharges:1,onConfirm:e=>e.expireWildfire(),validateAttempt:e=>e.hasResourceAvailable("WILDFIRE_SELF")});Ra("BLAZING_SHOT",68,{potency:[["NEVER",220],["MARKSMANS_MASTERY_II",240]],applicationDelay:.85,recastTime:1.5,onConfirm:e=>{e.cooldowns.get("cd_DOUBLE_CHECK").restore(15),e.cooldowns.get("cd_CHECKMATE").restore(15)},validateAttempt:e=>e.hasResourceAvailable("OVERHEATED"),highlightIf:e=>e.hasResourceAvailable("OVERHEATED")});$i("GAUSS_ROUND",15,"cd_DOUBLE_CHECK",{autoUpgrade:{trait:"DOUBLE_BARREL_MASTERY",otherSkill:"DOUBLE_CHECK"},potency:130,applicationDelay:.71,cooldown:30,maxCharges:3});$i("DOUBLE_CHECK",92,"cd_DOUBLE_CHECK",{startOnHotbar:!1,potency:180,falloff:.3,applicationDelay:.71,cooldown:30,maxCharges:3});$i("RICOCHET",50,"cd_CHECKMATE",{autoUpgrade:{trait:"DOUBLE_BARREL_MASTERY",otherSkill:"CHECKMATE"},potency:130,falloff:.3,applicationDelay:.71,cooldown:30,maxCharges:3});$i("CHECKMATE",92,"cd_CHECKMATE",{startOnHotbar:!1,potency:180,falloff:.3,applicationDelay:.71,cooldown:30,maxCharges:3});const NG=[{skillName:"ROOK_AUTOTURRET",skillLevel:40,autoUpgrade:{otherSkill:"AUTOMATON_QUEEN",trait:"PROMOTION"}},{skillName:"AUTOMATON_QUEEN",skillLevel:80,startOnHotbar:!1}];NG.forEach(e=>{$i(e.skillName,e.skillLevel,"cd_QUEEN",{startOnHotbar:e.startOnHotbar,autoUpgrade:e.autoUpgrade,applicationDelay:0,cooldown:6,maxCharges:1,validateAttempt:t=>t.hasResourceAvailable("BATTERY_GAUGE",50)&&!t.hasResourceAvailable("QUEEN"),onConfirm:(t,a)=>{const o=t.resources.get("BATTERY_GAUGE").availableAmount();t.resources.get("BATTERY_BONUS").gain(o-50),t.tryConsumeResource("BATTERY_GAUGE",!0);const s=t.resources.get("QUEEN_PUNCHES");s.gain(5);const c=t.hasTraitUnlocked("QUEENS_GAMBIT")?2:1;t.resources.get("QUEEN_FINISHERS").gain(c),t.resources.get("QUEEN").gain(s.availableAmount()+c);let d="VOLLEY_FIRE",h=0;t.hasTraitUnlocked("PROMOTION")?(d="ARM_PUNCH",h=t.calculateQueenPotency(120,240)):h=t.calculateQueenPotency(35,75);for(let f=0;f<s.availableAmount();f++)a.addDoTPotency(new $t({config:t.config,sourceTime:t.getDisplayTime(),sourceSkill:d,aspect:Ie.Physical,description:"",basePotency:h,snapshotTime:void 0,targetCount:a.targetCount}),"QUEEN");d=t.hasTraitUnlocked("PROMOTION")?"PILE_BUNKER":"ROOK_OVERLOAD",d==="PILE_BUNKER"?h=t.calculateQueenPotency(340,680):h=t.calculateQueenPotency(160,320),a.addDoTPotency(new $t({config:t.config,sourceTime:t.getDisplayTime(),sourceSkill:d,aspect:Ie.Physical,description:"",basePotency:h,snapshotTime:void 0,targetCount:a.targetCount}),"QUEEN"),t.hasTraitUnlocked("QUEENS_GAMBIT")&&a.addDoTPotency(new $t({config:t.config,sourceTime:t.getDisplayTime(),sourceSkill:"CROWNED_COLLIDER",aspect:Ie.Physical,description:"",basePotency:t.calculateQueenPotency(390,780),snapshotTime:void 0,targetCount:a.targetCount}),"QUEEN"),t.resources.get("QUEEN").node=a,t.addEvent(new Ce("initial queen punch",5.5,()=>t.handleQueenPunch()))}})});const CG=[{skillName:"ROOK_OVERDRIVE",skillLevel:40,autoUpgrade:{otherSkill:"QUEEN_OVERDRIVE",trait:"PROMOTION"}},{skillName:"QUEEN_OVERDRIVE",skillLevel:80,startOnHotbar:!1}];CG.forEach(e=>{$i(e.skillName,e.skillLevel,"cd_OVERDRIVE",{startOnHotbar:e.startOnHotbar,autoUpgrade:e.autoUpgrade,applicationDelay:0,cooldown:15,maxCharges:1,validateAttempt:t=>t.hasResourceAvailable("QUEEN_PUNCHES"),onConfirm:t=>{t.tryConsumeResource("QUEEN_PUNCHES",!0)}})});Ra("SPREAD_SHOT",18,{autoUpgrade:{trait:"SPREAD_SHOT_MASTERY",otherSkill:"SCATTERGUN"},potency:110,falloff:0,applicationDelay:.8,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.gainResource("HEAT_GAUGE",5)});Ra("SCATTERGUN",82,{startOnHotbar:!1,potency:130,falloff:0,applicationDelay:1.15,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.gainResource("HEAT_GAUGE",10)});Ra("BIOBLASTER",58,{potency:50,falloff:0,applicationDelay:.97,recastTime:e=>e.config.adjustedSksGCD(),secondaryCooldown:{cdName:"cd_DRILL",cooldown:20,maxCharges:2},onConfirm:(e,t)=>e.addDoTPotencies({node:t,effectName:"BIOBLASTER",skillName:"BIOBLASTER",tickPotency:50,speedStat:"sks"}),onApplication:(e,t)=>e.applyDoT("BIOBLASTER",t)});Ra("AUTO_CROSSBOW",52,{potency:[["NEVER",140],["MARKSMANS_MASTERY_II",180]],falloff:0,applicationDelay:.89,recastTime:1.5,validateAttempt:e=>e.hasResourceAvailable("OVERHEATED"),highlightIf:e=>e.hasResourceAvailable("OVERHEATED")});Ra("FLAMETHROWER",70,{applicationDelay:.89,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"FLAMETHROWER",skillName:"FLAMETHROWER",tickPotency:120,tickFrequency:1,speedStat:"sks"})},onApplication:(e,t)=>{e.applyDoT("FLAMETHROWER",t)},secondaryCooldown:{cdName:"cd_FLAMETHROWER",cooldown:60,maxCharges:1}});DT("TACTICIAN",56,"cd_TACTICIAN",{rscType:"TACTICIAN",maxCharges:1,cooldown:90,applicationDelay:.62});$i("DISMANTLE",62,"cd_DISMANTLE",{maxCharges:1,cooldown:120,applicationDelay:.62});Object.keys(zR).forEach(e=>jt(e,`PCT/${we[e].name}.png`));class bG extends Wt{jobSpecificSelfTargetedBuffViewProps(){return[...Object.keys(zR).map(t=>t==="MONOCHROME_TONES"||t==="SUBTRACTIVE_PALETTE"?this.makeCommonTimerless(t):t==="INSPIRATION"?this.makeToggleableTimerless(t):this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){const a=this.state.resources,o=a.get("PORTRAIT").availableAmount(),s=a.get("DEPICTIONS").availableAmount(),c=a.get("CREATURE_CANVAS").availableAmount(),d=a.get("WEAPON_CANVAS").availableAmount(),h=a.get("LANDSCAPE_CANVAS").availableAmount(),f=a.get("PALETTE_GAUGE").availableAmount(),m=a.get("PAINT").availableAmount(),R=a.get("MONOCHROME_TONES").available(1),T=[{kind:"text",name:g({en:"portrait",zh:""}),text:o===0?"/":g(o===1?{en:"moogle",zh:""}:{en:"madeen",zh:""})},{kind:"text",name:g({en:"depictions",zh:""}),text:s===0?"/":g(s===1?{en:"pom",zh:""}:s===2?{en:"wing",zh:""}:s===3?{en:"fang",zh:""}:{en:"maw",zh:""})},{kind:"counter",name:g({en:"creature",zh:""}),color:t.pct.creatureCanvas,currentStacks:c,maxStacks:1},{kind:"counter",name:g({en:"weapon",zh:""}),color:t.pct.weaponCanvas,currentStacks:d,maxStacks:1},{kind:"counter",name:g({en:"landscape",zh:""}),color:t.pct.landscapeCanvas,currentStacks:h,maxStacks:1},{kind:"bar",name:g({en:"palette gauge",zh:""}),color:t.pct.paletteGauge,progress:f/100,valueString:f.toFixed(0)}];return this.state.hasTraitUnlocked("ENHANCED_ARTISTRY")&&T.push({kind:"paint",name:g({en:"paint gauge",zh:""}),holyColor:t.pct.holyPaint,cometColor:t.pct.cometPaint,currentStacks:m,maxStacks:5,hasComet:this.state.hasTraitUnlocked("ENHANCED_PALETTE")&&R}),T}}const pn=(e,t,a)=>{Ve("PCT",e,t,a??{})};pn("PORTRAIT",2);pn("DEPICTIONS",3);pn("CREATURE_CANVAS",1,{default:1});pn("WEAPON_CANVAS",1,{default:1});pn("LANDSCAPE_CANVAS",1,{default:1});pn("PALETTE_GAUGE",100,{warnOnOvercap:!0});pn("PAINT",5);pn("AETHERHUES",2,{timeout:30.8});pn("MONOCHROME_TONES",1);pn("SUBTRACTIVE_PALETTE",3);pn("HAMMER_TIME",3,{timeout:30});pn("INSPIRATION",1,{timeout:30});pn("SUBTRACTIVE_SPECTRUM",1,{timeout:30,warnOnTimeout:!0});pn("HYPERPHANTASIA",5,{timeout:30,warnOnTimeout:!0});pn("RAINBOW_BRIGHT",1,{timeout:30,warnOnTimeout:!0});pn("STARSTRUCK",1,{timeout:20,warnOnTimeout:!0});pn("STARRY_MUSE",1,{timeout:20.5});pn("TEMPERA_COAT",1,{timeout:10});pn("TEMPERA_GRASSA",1,{timeout:10});pn("SMUDGE",1,{timeout:5});const OG=["FIRE_IN_RED","FIRE_II_IN_RED","AERO_IN_GREEN","AERO_II_IN_GREEN","WATER_IN_BLUE","WATER_II_IN_BLUE","HOLY_IN_WHITE","BLIZZARD_IN_CYAN","BLIZZARD_II_IN_CYAN","STONE_IN_YELLOW","STONE_II_IN_YELLOW","THUNDER_IN_MAGENTA","THUNDER_II_IN_MAGENTA","COMET_IN_BLACK","STAR_PRISM"],EN=["POM_MOTIF","WING_MOTIF","CLAW_MOTIF","MAW_MOTIF"],DG=["HAMMER_BRUSH","HAMMER_STAMP","POLISHING_HAMMER"];class yG extends Xt{constructor(t){super(t);const a=this.hasTraitUnlocked("ENHANCED_SWIFTCAST")&&40||60;[new He("cd_SWIFTCAST",a,1,1)].forEach(c=>this.cooldowns.set(c));const o=this.hasTraitUnlocked("ENHANCED_PICTOMANCY_IV")?3:2;this.cooldowns.set(new He("cd_LIVING_MUSE",40,o,o));const s=this.hasTraitUnlocked("ENHANCED_PICTOMANCY_II")?2:1;this.cooldowns.set(new He("cd_STEEL_MUSE",60,s,s)),this.registerRecurringEvents()}get statusPropsGenerator(){return new bG(this)}jobSpecificAddDamageBuffCovers(t,a){this.hasResourceAvailable("STARRY_MUSE")&&t.addBuff(k.StarryMuse)}jobSpecificAddSpeedBuffCovers(t,a){this.hasResourceAvailable("INSPIRATION")&&OG.includes(a.name)&&t.addBuff(k.Hyperphantasia)}captureSpellCastTime(t,a){return EN.includes(t)?a:t==="RAINBOW_DRIP"?this.hasResourceAvailable("RAINBOW_BRIGHT")?0:this.config.adjustedCastTime(a):this.config.adjustedCastTime(a,this.hasResourceAvailable("INSPIRATION")?25:void 0)}captureSpellRecastTime(t,a){if(EN.includes(t))return a;if(t==="RAINBOW_DRIP"){const o=this.config.adjustedGCD(a);return this.hasResourceAvailable("RAINBOW_BRIGHT")?o-3.5:o}return DG.includes(t)?this.config.adjustedGCD(a):this.config.adjustedGCD(a,this.hasResourceAvailable("INSPIRATION")?25:void 0)}getHammerStacks(){return this.resources.get("HAMMER_TIME").availableAmount()}doFiller(){this.cycleAetherhues(),this.tryConsumeHyperphantasia(),this.tryConsumeResource("SUBTRACTIVE_PALETTE")}cycleAetherhues(){const t=this.resources.get("AETHERHUES").availableAmount();this.tryConsumeResource("AETHERHUES",!0),t===2||(t===1?this.gainStatus("AETHERHUES",2):this.gainStatus("AETHERHUES",1))}tryConsumeHyperphantasia(){this.hasResourceAvailable("INSPIRATION")&&this.tryConsumeResource("HYPERPHANTASIA")&&!this.hasResourceAvailable("HYPERPHANTASIA")&&(this.tryConsumeResource("INSPIRATION"),this.hasTraitUnlocked("ENHANCED_PICTOMANCY_III")&&this.gainStatus("RAINBOW_BRIGHT"))}}const sn=(e,t,a)=>{const o=a.baseRecastTime??2.5,s=Me((c,d)=>{e==="RAINBOW_DRIP"&&c.hasResourceAvailable("RAINBOW_BRIGHT")||a.baseCastTime===0||c.tryConsumeResource("SWIFTCAST")},a.onConfirm);return Ka("PCT",e,t,{...a,castTime:c=>c.captureSpellCastTime(e,a.baseCastTime),recastTime:c=>c.captureSpellRecastTime(e,o),manaCost:a.baseManaCost??0,potency:a.basePotency,jobPotencyModifiers:c=>{const d=[];return c.hasResourceAvailable("STARRY_MUSE")&&d.push(X.Starry),a.jobPotencyModifiers&&d.push(...a.jobPotencyModifiers(c)),d},isInstantFn:c=>e==="RAINBOW_DRIP"&&c.hasResourceAvailable("RAINBOW_BRIGHT")||a.baseCastTime===0||c.hasResourceAvailable("SWIFTCAST"),onConfirm:s})},Mi=(e,t,a,o)=>at("PCT",e,t,a,{...o,jobPotencyModifiers:s=>s.hasResourceAvailable("STARRY_MUSE")?[X.Starry]:[]}),b0={newSkill:"FIRE_IN_RED",condition:e=>!e.hasResourceAvailable("AETHERHUES")},O0={newSkill:"AERO_IN_GREEN",condition:e=>e.hasResourceExactly("AETHERHUES",1)},D0={newSkill:"WATER_IN_BLUE",condition:e=>e.hasResourceExactly("AETHERHUES",2)},y0={newSkill:"BLIZZARD_IN_CYAN",condition:e=>!e.hasResourceAvailable("AETHERHUES")},v0={newSkill:"STONE_IN_YELLOW",condition:e=>e.hasResourceExactly("AETHERHUES",1)},M0={newSkill:"THUNDER_IN_MAGENTA",condition:e=>e.hasResourceExactly("AETHERHUES",2)},L0={newSkill:"FIRE_II_IN_RED",condition:e=>!e.hasResourceAvailable("AETHERHUES")},x0={newSkill:"AERO_II_IN_GREEN",condition:e=>e.hasResourceExactly("AETHERHUES",1)},H0={newSkill:"WATER_II_IN_BLUE",condition:e=>e.hasResourceExactly("AETHERHUES",2)},k0={newSkill:"BLIZZARD_II_IN_CYAN",condition:e=>!e.hasResourceAvailable("AETHERHUES")},U0={newSkill:"STONE_II_IN_YELLOW",condition:e=>e.hasResourceExactly("AETHERHUES",1)},P0={newSkill:"THUNDER_II_IN_MAGENTA",condition:e=>e.hasResourceExactly("AETHERHUES",2)},yT=[b0,O0,D0],vT=[y0,v0,M0],MT=[L0,x0,H0],LT=[k0,U0,P0],vG={newSkill:"CREATURE_MOTIF",condition:e=>e.hasResourceAvailable("CREATURE_CANVAS")},w0={newSkill:"POM_MOTIF",condition:e=>!e.hasResourceAvailable("CREATURE_CANVAS")&&!e.hasResourceAvailable("DEPICTIONS")},G0={newSkill:"WING_MOTIF",condition:e=>!e.hasResourceAvailable("CREATURE_CANVAS")&&e.hasResourceExactly("DEPICTIONS",1)},B0={newSkill:"CLAW_MOTIF",condition:e=>!e.hasResourceAvailable("CREATURE_CANVAS")&&e.hasResourceExactly("DEPICTIONS",2)},F0={newSkill:"MAW_MOTIF",condition:e=>!e.hasResourceAvailable("CREATURE_CANVAS")&&e.hasResourceExactly("DEPICTIONS",3)},MG={newSkill:"LIVING_MUSE",condition:e=>!e.hasResourceAvailable("CREATURE_CANVAS")},j0={newSkill:"POM_MUSE",condition:e=>e.hasResourceAvailable("CREATURE_CANVAS")&&!e.hasResourceAvailable("DEPICTIONS")},z0={newSkill:"WINGED_MUSE",condition:e=>e.hasResourceAvailable("CREATURE_CANVAS")&&e.hasResourceExactly("DEPICTIONS",1)},Y0={newSkill:"CLAWED_MUSE",condition:e=>e.hasResourceAvailable("CREATURE_CANVAS")&&e.hasResourceExactly("DEPICTIONS",2)},K0={newSkill:"FANGED_MUSE",condition:e=>e.hasResourceAvailable("CREATURE_CANVAS")&&e.hasResourceExactly("DEPICTIONS",3)},LG={newSkill:"MOG_OF_THE_AGES",condition:e=>e.resources.get("PORTRAIT").availableAmount()!==2},xG={newSkill:"RETRIBUTION_OF_THE_MADEEN",condition:e=>e.resources.get("PORTRAIT").availableAmount()===2},HG={newSkill:"WEAPON_MOTIF",condition:e=>e.hasResourceAvailable("WEAPON_CANVAS")},V0={newSkill:"HAMMER_MOTIF",condition:e=>!e.hasResourceAvailable("WEAPON_CANVAS")},kG={newSkill:"STEEL_MUSE",condition:e=>!e.hasResourceAvailable("WEAPON_CANVAS")},UG={newSkill:"STRIKING_MUSE",condition:e=>e.hasResourceAvailable("WEAPON_CANVAS")},PG={newSkill:"LANDSCAPE_MOTIF",condition:e=>e.hasResourceAvailable("LANDSCAPE_CANVAS")},W0={newSkill:"STARRY_SKY_MOTIF",condition:e=>!e.hasResourceAvailable("LANDSCAPE_CANVAS")},wG={newSkill:"SCENIC_MUSE",condition:e=>!e.hasResourceAvailable("LANDSCAPE_CANVAS")},X0={newSkill:"STARRY_MUSE",condition:e=>e.hasResourceAvailable("LANDSCAPE_CANVAS")};sn("FIRE_IN_RED",1,{replaceIf:yT,baseCastTime:1.5,baseManaCost:300,basePotency:[["NEVER",310],["PICTOMANCY_MASTERY_II",380],["PICTOMANCY_MASTERY_III",420],["PICTOMANCY_MASTERY_IV",490]],applicationDelay:.84,validateAttempt:e=>b0.condition(e)&&!e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller()});sn("AERO_IN_GREEN",5,{replaceIf:yT,startOnHotbar:!1,baseCastTime:1.5,baseManaCost:300,basePotency:[["NEVER",350],["PICTOMANCY_MASTERY_II",420],["PICTOMANCY_MASTERY_III",460],["PICTOMANCY_MASTERY_IV",530]],applicationDelay:.89,validateAttempt:e=>O0.condition(e)&&!e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller(),highlightIf:e=>!e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});sn("WATER_IN_BLUE",15,{replaceIf:yT,startOnHotbar:!1,baseCastTime:1.5,baseManaCost:300,basePotency:[["NEVER",390],["PICTOMANCY_MASTERY_II",460],["PICTOMANCY_MASTERY_III",500],["PICTOMANCY_MASTERY_IV",570]],applicationDelay:.98,validateAttempt:e=>D0.condition(e)&&!e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>{e.doFiller(),e.resources.get("PALETTE_GAUGE").gain(25),e.hasTraitUnlocked("ENHANCED_ARTISTRY")&&e.resources.get("PAINT").gain(1)},highlightIf:e=>!e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});sn("FIRE_II_IN_RED",25,{replaceIf:MT,baseCastTime:1.5,baseManaCost:300,basePotency:[["NEVER",120],["PICTOMANCY_MASTERY_II",150],["PICTOMANCY_MASTERY_IV",180]],falloff:0,applicationDelay:.84,validateAttempt:e=>L0.condition(e)&&!e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller()});sn("AERO_II_IN_GREEN",35,{replaceIf:MT,startOnHotbar:!1,baseCastTime:1.5,baseManaCost:300,basePotency:[["NEVER",140],["PICTOMANCY_MASTERY_II",170],["PICTOMANCY_MASTERY_IV",200]],falloff:0,applicationDelay:.89,validateAttempt:e=>x0.condition(e)&&!e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller(),highlightIf:e=>!e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});sn("WATER_II_IN_BLUE",45,{replaceIf:MT,startOnHotbar:!1,baseCastTime:1.5,baseManaCost:300,basePotency:[["NEVER",170],["PICTOMANCY_MASTERY_II",190],["PICTOMANCY_MASTERY_IV",220]],falloff:0,applicationDelay:.89,validateAttempt:e=>H0.condition(e)&&!e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>{e.doFiller(),e.resources.get("PALETTE_GAUGE").gain(25),e.hasTraitUnlocked("ENHANCED_ARTISTRY")&&e.resources.get("PAINT").gain(1)},highlightIf:e=>!e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});sn("BLIZZARD_IN_CYAN",60,{replaceIf:vT,baseCastTime:2.3,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",560],["PICTOMANCY_MASTERY_II",680],["PICTOMANCY_MASTERY_III",750],["PICTOMANCY_MASTERY_IV",860]],applicationDelay:.75,validateAttempt:e=>y0.condition(e)&&e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller(),highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});sn("STONE_IN_YELLOW",60,{replaceIf:vT,startOnHotbar:!1,baseCastTime:2.3,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",600],["PICTOMANCY_MASTERY_II",720],["PICTOMANCY_MASTERY_III",790],["PICTOMANCY_MASTERY_IV",900]],applicationDelay:.8,validateAttempt:e=>v0.condition(e)&&e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller(),highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});sn("THUNDER_IN_MAGENTA",60,{replaceIf:vT,startOnHotbar:!1,baseCastTime:2.3,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",640],["PICTOMANCY_MASTERY_II",760],["PICTOMANCY_MASTERY_III",830],["PICTOMANCY_MASTERY_IV",940]],applicationDelay:.8,validateAttempt:e=>M0.condition(e)&&e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>{e.doFiller(),e.hasTraitUnlocked("ENHANCED_ARTISTRY")&&e.resources.get("PAINT").gain(1)},highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});sn("BLIZZARD_II_IN_CYAN",60,{replaceIf:LT,baseCastTime:2.3,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",270],["PICTOMANCY_MASTERY_II",330],["PICTOMANCY_MASTERY_IV",360]],falloff:0,applicationDelay:.75,validateAttempt:e=>k0.condition(e)&&e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller(),highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});sn("STONE_II_IN_YELLOW",60,{replaceIf:LT,startOnHotbar:!1,baseCastTime:2.3,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",290],["PICTOMANCY_MASTERY_II",350],["PICTOMANCY_MASTERY_IV",380]],falloff:0,applicationDelay:.8,validateAttempt:e=>U0.condition(e)&&e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller(),highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});sn("THUNDER_II_IN_MAGENTA",60,{replaceIf:LT,startOnHotbar:!1,baseCastTime:2.3,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",310],["PICTOMANCY_MASTERY_II",370],["PICTOMANCY_MASTERY_IV",400]],falloff:0,applicationDelay:.8,validateAttempt:e=>P0.condition(e)&&e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>{e.doFiller(),e.hasTraitUnlocked("ENHANCED_ARTISTRY")&&e.resources.get("PAINT").gain(1)},highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});sn("HOLY_IN_WHITE",80,{baseCastTime:0,baseManaCost:300,basePotency:[["NEVER",460],["PICTOMANCY_MASTERY_III",500],["PICTOMANCY_MASTERY_IV",570]],falloff:.65,applicationDelay:1.34,validateAttempt:e=>!e.hasResourceAvailable("MONOCHROME_TONES")&&e.hasResourceAvailable("PAINT"),onConfirm:e=>{e.tryConsumeResource("PAINT"),e.tryConsumeHyperphantasia()},highlightIf:e=>!e.hasResourceAvailable("MONOCHROME_TONES")&&e.hasResourceAvailable("PAINT")});sn("COMET_IN_BLACK",90,{baseCastTime:0,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",830],["PICTOMANCY_MASTERY_IV",940]],falloff:.6,applicationDelay:1.87,validateAttempt:e=>e.hasResourceAvailable("MONOCHROME_TONES")&&e.hasResourceAvailable("PAINT"),onConfirm:e=>{e.tryConsumeResource("PAINT"),e.tryConsumeResource("MONOCHROME_TONES"),e.tryConsumeHyperphantasia()},highlightIf:e=>e.hasResourceAvailable("MONOCHROME_TONES")});sn("RAINBOW_DRIP",92,{baseCastTime:4,baseRecastTime:6,baseManaCost:400,basePotency:1e3,applicationDelay:1.24,falloff:.85,onConfirm:e=>{e.resources.get("PAINT").gain(1),e.tryConsumeResource("RAINBOW_BRIGHT")},highlightIf:e=>e.hasResourceAvailable("RAINBOW_BRIGHT")});sn("STAR_PRISM",100,{baseCastTime:0,baseManaCost:0,basePotency:1100,applicationDelay:1.25,falloff:.7,validateAttempt:e=>e.hasResourceAvailable("STARSTRUCK"),onConfirm:e=>{e.tryConsumeResource("STARSTRUCK"),e.tryConsumeHyperphantasia()},highlightIf:e=>e.hasResourceAvailable("STARSTRUCK")});Mi("SUBTRACTIVE_PALETTE",60,"cd_SUBTRACTIVE",{cooldown:1,validateAttempt:e=>!e.hasResourceAvailable("SUBTRACTIVE_PALETTE")&&(e.hasResourceAvailable("SUBTRACTIVE_SPECTRUM")||e.hasResourceAvailable("PALETTE_GAUGE",50)),onConfirm:e=>{e.tryConsumeResource("SUBTRACTIVE_SPECTRUM")||e.resources.get("PALETTE_GAUGE").consume(50),e.hasResourceAvailable("MONOCHROME_TONES")&&p.reportWarning({kind:"custom",en:"comet overwrite!",zh:""}),e.hasTraitUnlocked("ENHANCED_PALETTE")&&e.gainStatus("MONOCHROME_TONES"),e.gainStatus("SUBTRACTIVE_PALETTE",3)},highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_SPECTRUM")||e.resources.get("PALETTE_GAUGE").available(50)});const GG=[vG,w0,G0,B0,F0],BG=[["CREATURE_MOTIF",30,e=>!1],["POM_MOTIF",30,w0.condition],["WING_MOTIF",30,G0.condition],["CLAW_MOTIF",96,B0.condition],["MAW_MOTIF",96,F0.condition]];BG.forEach(([e,t,a],o)=>sn(e,t,{replaceIf:GG,startOnHotbar:o===0,baseCastTime:3,baseRecastTime:4,baseManaCost:0,applicationDelay:0,validateAttempt:a,onConfirm:s=>s.resources.get("CREATURE_CANVAS").gain(1)}));const FG=[MG,j0,z0,Y0,K0],jG=[["LIVING_MUSE",30,0,0,e=>!1],["POM_MUSE",30,[["NEVER",700],["PICTOMANCY_MASTERY_III",800]],.62,j0.condition],["WINGED_MUSE",30,[["NEVER",700],["PICTOMANCY_MASTERY_III",800]],.98,z0.condition],["CLAWED_MUSE",96,800,.98,Y0.condition],["FANGED_MUSE",96,800,1.16,K0.condition]];jG.forEach(([e,t,a,o,s],c)=>Mi(e,t,"cd_LIVING_MUSE",{replaceIf:FG,startOnHotbar:c===0,potency:a,falloff:.7,applicationDelay:o,cooldown:40,validateAttempt:s,onConfirm:d=>{const h=d.resources.get("DEPICTIONS"),f=d.resources.get("PORTRAIT");d.tryConsumeResource("CREATURE_CANVAS"),h.gain(1),e==="WINGED_MUSE"&&(f.overrideCurrentValue(1),d.hasTraitUnlocked("ENHANCED_PICTOMANCY_IV")||h.overrideCurrentValue(0)),e==="FANGED_MUSE"&&(f.overrideCurrentValue(2),h.overrideCurrentValue(0))},maxCharges:3,highlightIf:d=>d.hasResourceAvailable("CREATURE_CANVAS")}));Mi("MOG_OF_THE_AGES",30,"cd_PORTRAIT",{replaceIf:[xG],potency:[["NEVER",800],["PICTOMANCY_MASTERY_III",1e3]],falloff:.7,applicationDelay:1.15,validateAttempt:e=>e.hasResourceExactly("PORTRAIT",1),onConfirm:e=>e.tryConsumeResource("PORTRAIT"),cooldown:30,highlightIf:e=>e.hasResourceAvailable("PORTRAIT")});Mi("RETRIBUTION_OF_THE_MADEEN",30,"cd_PORTRAIT",{replaceIf:[LG],startOnHotbar:!1,potency:1100,falloff:.7,applicationDelay:1.3,validateAttempt:e=>e.hasResourceExactly("PORTRAIT",2),onConfirm:e=>e.tryConsumeResource("PORTRAIT",!0),cooldown:30,highlightIf:e=>e.hasResourceAvailable("PORTRAIT")});sn("WEAPON_MOTIF",50,{replaceIf:[V0],baseCastTime:3,baseRecastTime:4,baseManaCost:0,applicationDelay:0,validateAttempt:e=>!1});sn("HAMMER_MOTIF",50,{replaceIf:[HG],startOnHotbar:!1,baseCastTime:3,baseRecastTime:4,baseManaCost:0,applicationDelay:0,validateAttempt:e=>V0.condition(e)&&!e.hasResourceAvailable("HAMMER_TIME"),onConfirm:e=>e.resources.get("WEAPON_CANVAS").gain(1)});Mi("STEEL_MUSE",50,"cd_STEEL_MUSE",{replaceIf:[UG],cooldown:60,maxCharges:2,validateAttempt:e=>!1});Mi("STRIKING_MUSE",50,"cd_STEEL_MUSE",{replaceIf:[kG],startOnHotbar:!1,requiresCombat:!0,cooldown:60,maxCharges:2,validateAttempt:e=>e.hasResourceAvailable("WEAPON_CANVAS"),onConfirm:e=>{e.tryConsumeResource("WEAPON_CANVAS"),e.gainStatus("HAMMER_TIME",3)},highlightIf:e=>e.hasResourceAvailable("WEAPON_CANVAS")});const mN=[{newSkill:"HAMMER_STAMP",condition:e=>!e.hasTraitUnlocked("ENHANCED_PICTOMANCY_II")||e.getHammerStacks()===3},{newSkill:"HAMMER_BRUSH",condition:e=>e.hasTraitUnlocked("ENHANCED_PICTOMANCY_II")&&e.getHammerStacks()===2},{newSkill:"POLISHING_HAMMER",condition:e=>e.hasTraitUnlocked("ENHANCED_PICTOMANCY_II")&&e.getHammerStacks()===1}],zG=[["HAMMER_STAMP",50,[["NEVER",420],["PICTOMANCY_MASTERY_II",500],["PICTOMANCY_MASTERY_III",540],["PICTOMANCY_MASTERY_IV",560]],1.38],["HAMMER_BRUSH",86,[["NEVER",560],["PICTOMANCY_MASTERY_IV",580]],1.25],["POLISHING_HAMMER",86,[["NEVER",580],["PICTOMANCY_MASTERY_IV",600]],2.1]];zG.forEach(([e,t,a,o],s)=>sn(e,t,{replaceIf:mN,baseCastTime:0,startOnHotbar:s===0,basePotency:a,falloff:.7,applicationDelay:o,validateAttempt:c=>mN[s].condition(c)&&c.hasResourceAvailable("HAMMER_TIME"),onConfirm:c=>c.tryConsumeResource("HAMMER_TIME"),highlightIf:c=>c.hasResourceAvailable("HAMMER_TIME"),jobPotencyModifiers:c=>[X.AutoCDH]}));sn("LANDSCAPE_MOTIF",70,{replaceIf:[W0],baseCastTime:3,baseRecastTime:4,baseManaCost:0,applicationDelay:0,validateAttempt:e=>!1});sn("STARRY_SKY_MOTIF",70,{replaceIf:[PG],startOnHotbar:!1,baseCastTime:3,baseRecastTime:4,baseManaCost:0,applicationDelay:0,validateAttempt:e=>W0.condition(e)&&!e.hasResourceAvailable("STARRY_MUSE"),onConfirm:e=>e.resources.get("LANDSCAPE_CANVAS").gain(1)});Mi("SCENIC_MUSE",70,"cd_SCENIC_MUSE",{replaceIf:[X0],applicationDelay:0,cooldown:120,validateAttempt:e=>!1});Mi("STARRY_MUSE",70,"cd_SCENIC_MUSE",{replaceIf:[wG],startOnHotbar:!1,requiresCombat:!0,applicationDelay:0,cooldown:120,validateAttempt:e=>X0.condition(e),onConfirm:e=>{e.tryConsumeResource("LANDSCAPE_CANVAS"),e.hasTraitUnlocked("ENHANCED_PICTOMANCY")&&(e.gainStatus("HYPERPHANTASIA",5),e.gainStatus("INSPIRATION")),e.hasTraitUnlocked("ENHANCED_PICTOMANCY_V")&&e.gainStatus("STARSTRUCK"),e.gainStatus("STARRY_MUSE"),e.gainStatus("SUBTRACTIVE_SPECTRUM")},highlightIf:e=>e.hasResourceAvailable("LANDSCAPE_CANVAS")});je("PCT","TEMPERA_COAT",10,"cd_TEMPERA_COAT",{rscType:"TEMPERA_COAT",replaceIf:[{newSkill:"TEMPERA_COAT_POP",condition:e=>e.hasResourceAvailable("TEMPERA_COAT")}],applicationDelay:0,cooldown:120});Mi("TEMPERA_GRASSA",88,"cd_GRASSA",{replaceIf:[{newSkill:"TEMPERA_GRASSA_POP",condition:e=>e.hasResourceAvailable("TEMPERA_GRASSA")}],applicationDelay:0,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("TEMPERA_COAT"),onConfirm:e=>{e.tryConsumeResource("TEMPERA_COAT"),e.gainStatus("TEMPERA_GRASSA")},highlightIf:e=>e.hasResourceAvailable("TEMPERA_COAT")});Mi("TEMPERA_COAT_POP",10,"cd_TEMPERA_POP",{replaceIf:[{newSkill:"TEMPERA_GRASSA_POP",condition:e=>e.hasResourceAvailable("TEMPERA_GRASSA")}],startOnHotbar:!1,applicationDelay:0,animationLock:ma,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("TEMPERA_COAT"),onConfirm:e=>{e.tryConsumeResource("TEMPERA_COAT");const t=e.cooldowns.get("cd_TEMPERA_COAT").timeTillNextStackAvailable();console.assert(t>0,"attempted to pop Tempera Coat when no timer for Tempera Coat CD was active"),e.cooldowns.get("cd_TEMPERA_COAT").overrideTimeTillNextStack(Math.max(0,t-60))},highlightIf:e=>e.hasResourceAvailable("TEMPERA_COAT")});Mi("TEMPERA_GRASSA_POP",10,"cd_TEMPERA_POP",{replaceIf:[{newSkill:"TEMPERA_COAT_POP",condition:e=>e.hasResourceAvailable("TEMPERA_COAT")}],startOnHotbar:!1,applicationDelay:0,animationLock:ma,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("TEMPERA_GRASSA"),onConfirm:e=>{e.tryConsumeResource("TEMPERA_GRASSA");const t=e.cooldowns.get("cd_TEMPERA_COAT").timeTillNextStackAvailable();console.assert(t>0,"attempted to pop Tempera Grassa when no timer for Tempera Coat CD was active"),e.cooldowns.get("cd_TEMPERA_COAT").overrideTimeTillNextStack(Math.max(0,t-30))},highlightIf:e=>e.hasResourceAvailable("TEMPERA_GRASSA")});je("PCT","SMUDGE",20,"cd_SMUDGE",{rscType:"SMUDGE",applicationDelay:0,cooldown:20,animationLock:Vt});Object.keys(KR).forEach(e=>jt(e,`RDM/${we[e].name}.png`));class YG extends Wt{jobSpecificSelfTargetedBuffViewProps(){return[...Object.keys(KR).map(t=>this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){const a=this.state.resources,o=a.get("WHITE_MANA").availableAmount(),s=a.get("BLACK_MANA").availableAmount(),c=a.get("MANA_STACKS").availableAmount();return[{kind:"bar",name:g({en:"white mana",zh:""}),color:t.rdm.whiteMana,progress:o/100,valueString:o.toFixed(0)},{kind:"bar",name:g({en:"black mana",zh:""}),color:t.rdm.blackMana,progress:s/100,valueString:s.toFixed(0)},{kind:"counter",name:g({en:"mana stacks",zh:""}),color:t.rdm.manaStack,currentStacks:c,maxStacks:3}]}}const ea=(e,t,a)=>{Ve("RDM",e,t,a??{})};ea("WHITE_MANA",100);ea("BLACK_MANA",100);ea("MANA_STACKS",3);ea("ACCELERATION",1,{timeout:20});ea("DUALCAST",1,{timeout:15});ea("EMBOLDEN",1,{timeout:20});ea("GRAND_IMPACT_READY",1,{timeout:30,warnOnTimeout:!0});ea("MAGICK_BARRIER",1,{timeout:10});ea("MAGICKED_SWORDPLAY",3,{timeout:30,warnOnTimeout:!0});ea("MANAFICATION",1,{timeout:30});ea("PREFULGENCE_READY",1,{timeout:30,warnOnTimeout:!0});ea("THORNED_FLOURISH",1,{timeout:30,warnOnTimeout:!0});ea("VERFIRE_READY",1,{timeout:30});ea("VERSTONE_READY",1,{timeout:30});ea("RDM_MELEE_COUNTER",2,{timeout:30});ea("RDM_FINISHER_COUNTER",2,{timeout:30});ea("RDM_AOE_COUNTER",2,{timeout:30});const q0=["IMPACT","VERAERO","VERTHUNDER","VERAERO_III","VERTHUNDER_III"],Z0=["VERHOLY","VERFLARE","SCORCH","RESOLUTION"];class KG extends Xt{constructor(t){super(t);const a=this.hasTraitUnlocked("ENHANCED_SWIFTCAST")?40:60,o=this.hasTraitUnlocked("RED_MAGIC_MASTERY")?35:45;[new He("cd_SWIFTCAST",a,1,1),new He("cd_CONTRE_SIXTE",o,1,1)].forEach(c=>this.cooldowns.set(c));const s=this.hasTraitUnlocked("ENHANCED_ACCELERATION")?2:1;this.cooldowns.set(new He("cd_ACCELERATION",55,s,s)),this.registerRecurringEvents()}get statusPropsGenerator(){return new YG(this)}jobSpecificAddDamageBuffCovers(t,a){this.hasResourceAvailable("EMBOLDEN")&&a.aspect!==Ie.Physical&&t.addBuff(k.Embolden),a.name==="IMPACT"&&this.hasResourceAvailable("ACCELERATION")&&t.addBuff(k.Acceleration)}hasThreeManaStacks(){return this.hasResourceAvailable("MANA_STACKS",3)}getFinisherCounter(){return this.resources.get("RDM_FINISHER_COUNTER").availableAmount()}processDualcastAndInstants(t){Z0.includes(t)||t==="GRAND_IMPACT"&&this.tryConsumeResource("GRAND_IMPACT_READY")||q0.includes(t)&&this.tryConsumeResource("ACCELERATION")||this.tryConsumeResource("DUALCAST")||this.tryConsumeResource("SWIFTCAST")||this.gainStatus("DUALCAST")}gainColorMana(t){const a=this.resources.get("WHITE_MANA"),o=this.resources.get("BLACK_MANA");if(t.w){const s=o.availableAmount()-a.availableAmount()>30;a.gain(s?Math.floor(t.w/2):t.w)}if(t.b){const s=a.availableAmount()-o.availableAmount()>30;o.gain(s?Math.floor(t.b/2):t.b)}Math.abs(o.availableAmount()-a.availableAmount())>30&&p.reportWarning({kind:"custom",en:"mana difference became more than 30",zh:""})}colorManaExceeds(t){return this.hasResourceAvailable("MAGICKED_SWORDPLAY")||this.hasResourceAvailable("WHITE_MANA",t)&&this.hasResourceAvailable("BLACK_MANA",t)}consumeColorMana(t){this.hasResourceAvailable("MAGICKED_SWORDPLAY")?this.tryConsumeResource("MAGICKED_SWORDPLAY"):(this.resources.get("WHITE_MANA").consume(t),this.resources.get("BLACK_MANA").consume(t))}maybeGainVerproc(t,a=.5){this.maybeGainProc(t,a,!0)}processComboStatus(t){const a=this.resources.get("MANA_STACKS"),o=this.config.level>=80,s=this.config.level>=90,c=this.resources.get("RDM_MELEE_COUNTER").availableAmount(),d=this.resources.get("RDM_FINISHER_COUNTER").availableAmount(),h=this.resources.get("RDM_AOE_COUNTER").availableAmount(),f=c+d+h>0;let m;t==="ENCHANTED_RIPOSTE"||t==="RIPOSTE"?(f&&p.reportComboBreak(),m=[1,0,0],t==="ENCHANTED_RIPOSTE"&&a.gain(1)):t==="ENCHANTED_ZWERCHHAU"||t==="ZWERCHHAU"?(f&&c!==1&&p.reportComboBreak(),m=[c===1?2:0,0,0],t==="ENCHANTED_ZWERCHHAU"&&a.gain(1)):t==="ENCHANTED_REDOUBLEMENT"||t==="REDOUBLEMENT"?(f&&c!==2&&p.reportComboBreak(),m=[0,0,0],t==="ENCHANTED_REDOUBLEMENT"&&a.gain(1)):t==="VERHOLY"||t==="VERFLARE"?(m=[0,o?1:0,0],a.consume(3)):t==="SCORCH"?m=[0,s?2:0,0]:t==="RESOLUTION"?m=[0,0,0]:t==="ENCHANTED_MOULINET"?(c+d>0&&p.reportComboBreak(),m=[0,0,1],a.gain(1)):t==="ENCHANTED_MOULINET_II"?(m=[0,0,2],a.gain(1)):t==="ENCHANTED_MOULINET_III"?(m=[0,0,0],a.gain(1)):t==="ENCHANTED_REPRISE"?m=[c,d,h]:(f&&p.reportComboBreak(),m=[0,0,0],a.consume(a.availableAmount())),this.setComboState("RDM_MELEE_COUNTER",m[0]),this.setComboState("RDM_FINISHER_COUNTER",m[1]),this.setComboState("RDM_AOE_COUNTER",m[2])}}const Fn=(e,t,a)=>{const o=Me(a.onConfirm,s=>s.processDualcastAndInstants(e),s=>s.processComboStatus(e));return Ka("RDM",e,t,{...a,aspect:a.isPhysical?Ie.Physical:void 0,castTime:s=>s.config.adjustedCastTime(a.baseCastTime),recastTime:s=>s.config.adjustedGCD(),manaCost:a.baseManaCost??0,potency:a.basePotency,jobPotencyModifiers:s=>{const c=[];return s.hasResourceAvailable("EMBOLDEN")&&c.push(X.EmboldenMagic),a.jobPotencyModifiers&&c.push(...a.jobPotencyModifiers(s)),c},isInstantFn:s=>Z0.includes(e)||e==="GRAND_IMPACT"||q0.includes(e)&&s.hasResourceAvailable("ACCELERATION")||s.hasResourceAvailable("DUALCAST")||s.hasResourceAvailable("SWIFTCAST"),onConfirm:o})},Ri=(e,t,a)=>{const o=!e.toString().startsWith("ENCHANTED"),s=Me(c=>c.processComboStatus(e),a.onConfirm);return nn("RDM",e,t,{...a,aspect:o?Ie.Physical:void 0,onConfirm:s,jobPotencyModifiers:c=>{const d=[];return o||c.hasResourceAvailable("EMBOLDEN")&&d.push(X.EmboldenMagic),d}})},Is=(e,t,a,o)=>at("RDM",e,t,a,{aspect:o.isPhysical?Ie.Physical:void 0,jobPotencyModifiers:s=>!o.isPhysical&&s.hasResourceAvailable("EMBOLDEN")?[X.EmboldenMagic]:[],...o}),Q0={newSkill:"SCORCH",condition:e=>e.getFinisherCounter()===1},J0={newSkill:"RESOLUTION",condition:e=>e.getFinisherCounter()===2},Jh={newSkill:"GRAND_IMPACT",condition:e=>e.getFinisherCounter()<1&&e.hasResourceAvailable("GRAND_IMPACT_READY")},Ou=[{newSkill:"JOLT_II",condition:e=>e.getFinisherCounter()<1&&!e.hasResourceAvailable("GRAND_IMPACT_READY")},Q0,J0,Jh];Fn("JOLT_II",62,{replaceIf:Ou,autoUpgrade:{trait:"RED_MAGIC_MASTERY_III",otherSkill:"JOLT_III"},baseCastTime:2,baseManaCost:200,applicationDelay:.8,basePotency:280,validateAttempt:e=>e.getFinisherCounter()<1&&!e.hasResourceAvailable("GRAND_IMPACT_READY"),onConfirm:e=>e.gainColorMana({w:2,b:2})});Fn("JOLT_III",84,{replaceIf:Ou,autoDowngrade:{trait:"RED_MAGIC_MASTERY_III",otherSkill:"JOLT_II"},baseCastTime:2,baseManaCost:200,applicationDelay:.8,basePotency:360,validateAttempt:e=>e.getFinisherCounter()<1&&!e.hasResourceAvailable("GRAND_IMPACT_READY"),onConfirm:e=>e.gainColorMana({w:2,b:2})});const $0=[["NEVER",300],["RED_MAGIC_MASTERY_II",340],["RED_MAGIC_MASTERY_III",380]];Fn("VERSTONE",30,{baseCastTime:2,baseManaCost:200,applicationDelay:.8,basePotency:$0,validateAttempt:e=>e.hasResourceAvailable("VERSTONE_READY"),onConfirm:e=>{e.gainColorMana({w:5}),e.tryConsumeResource("VERSTONE_READY")},highlightIf:e=>e.hasResourceAvailable("VERSTONE_READY")});Fn("VERFIRE",26,{baseCastTime:2,baseManaCost:200,applicationDelay:.8,basePotency:$0,validateAttempt:e=>e.hasResourceAvailable("VERFIRE_READY"),onConfirm:e=>{e.gainColorMana({b:5}),e.tryConsumeResource("VERFIRE_READY")},highlightIf:e=>e.hasResourceAvailable("VERFIRE_READY")});const xT={newSkill:"VERHOLY",condition:e=>e.hasThreeManaStacks()},HT={newSkill:"VERFLARE",condition:e=>e.hasThreeManaStacks()};Fn("VERAERO",10,{replaceIf:[xT],autoUpgrade:{trait:"RED_MAGIC_MASTERY_II",otherSkill:"VERAERO_III"},baseCastTime:5,baseManaCost:400,applicationDelay:.76,basePotency:360,validateAttempt:e=>!e.hasThreeManaStacks(),onConfirm:e=>{e.gainColorMana({w:6}),e.hasResourceAvailable("ACCELERATION")?e.gainStatus("VERSTONE_READY"):e.maybeGainVerproc("VERSTONE_READY")}});Fn("VERTHUNDER",4,{replaceIf:[HT],autoUpgrade:{trait:"RED_MAGIC_MASTERY_II",otherSkill:"VERTHUNDER_III"},baseCastTime:5,baseManaCost:400,applicationDelay:.76,basePotency:360,validateAttempt:e=>!e.hasThreeManaStacks(),onConfirm:e=>{e.gainColorMana({b:6}),e.hasResourceAvailable("ACCELERATION")?e.gainStatus("VERFIRE_READY"):e.maybeGainVerproc("VERFIRE_READY")}});const eO=[["NEVER",380],["ENCHANTED_BLADE_MASTERY",440]];Fn("VERAERO_III",82,{replaceIf:[xT],autoDowngrade:{trait:"RED_MAGIC_MASTERY_II",otherSkill:"VERAERO"},baseCastTime:5,baseManaCost:400,applicationDelay:.76,basePotency:eO,validateAttempt:e=>!e.hasThreeManaStacks(),onConfirm:e=>{e.gainColorMana({w:6}),e.hasResourceAvailable("ACCELERATION")?e.gainStatus("VERSTONE_READY"):e.maybeGainVerproc("VERSTONE_READY")}});Fn("VERTHUNDER_III",82,{replaceIf:[HT],autoDowngrade:{trait:"RED_MAGIC_MASTERY_II",otherSkill:"VERTHUNDER"},baseCastTime:5,baseManaCost:400,applicationDelay:.76,basePotency:eO,validateAttempt:e=>!e.hasThreeManaStacks(),onConfirm:e=>{e.gainColorMana({b:6}),e.hasResourceAvailable("ACCELERATION")?e.gainStatus("VERFIRE_READY"):e.maybeGainVerproc("VERFIRE_READY")}});const tO=[["NEVER",100],["RED_MAGIC_MASTERY",120],["RED_MAGIC_MASTERY_III",140]];Fn("VERAERO_II",22,{replaceIf:[xT],baseCastTime:2,baseManaCost:400,applicationDelay:.8,basePotency:tO,falloff:0,validateAttempt:e=>!e.hasThreeManaStacks(),onConfirm:e=>e.gainColorMana({w:7})});Fn("VERTHUNDER_II",18,{replaceIf:[HT],baseCastTime:2,baseManaCost:400,falloff:0,applicationDelay:.8,basePotency:tO,validateAttempt:e=>!e.hasThreeManaStacks(),onConfirm:e=>e.gainColorMana({b:7})});Fn("IMPACT",66,{replaceIf:[Q0,J0,Jh],baseCastTime:5,baseManaCost:400,falloff:0,applicationDelay:.76,basePotency:[["NEVER",200],["RED_MAGIC_MASTERY_III",210]],jobPotencyModifiers:e=>e.hasResourceAvailable("ACCELERATION")?[X.AccelerationImpact]:[],validateAttempt:e=>e.getFinisherCounter()<1&&!e.hasResourceAvailable("GRAND_IMPACT_READY"),onConfirm:e=>e.gainColorMana({w:3,b:3})});Fn("GRAND_IMPACT",96,{replaceIf:Ou,startOnHotbar:!1,baseCastTime:0,baseManaCost:0,basePotency:600,falloff:.55,applicationDelay:1.55,validateAttempt:Jh.condition,highlightIf:Jh.condition,onConfirm:e=>e.gainColorMana({w:3,b:3})});Ri("RIPOSTE",1,{replaceIf:[{newSkill:"ENCHANTED_RIPOSTE",condition:e=>e.colorManaExceeds(20)}],applicationDelay:.62,potency:130,recastTime:2.5,validateAttempt:e=>!e.colorManaExceeds(20)});Ri("ZWERCHHAU",35,{replaceIf:[{newSkill:"ENCHANTED_ZWERCHHAU",condition:e=>e.colorManaExceeds(15)}],applicationDelay:.62,potency:100,combo:{potency:150,resource:"RDM_MELEE_COUNTER",resourceValue:1},recastTime:2.5,validateAttempt:e=>!e.colorManaExceeds(15),highlightIf:e=>e.resources.get("RDM_MELEE_COUNTER").availableAmount()===1});Ri("REDOUBLEMENT",50,{replaceIf:[{newSkill:"ENCHANTED_REDOUBLEMENT",condition:e=>e.colorManaExceeds(15)}],applicationDelay:.62,potency:100,combo:{potency:230,resource:"RDM_MELEE_COUNTER",resourceValue:2},recastTime:2.5,validateAttempt:e=>!e.colorManaExceeds(15),highlightIf:e=>e.resources.get("RDM_MELEE_COUNTER").availableAmount()===2});Ri("ENCHANTED_RIPOSTE",50,{startOnHotbar:!1,replaceIf:[{newSkill:"RIPOSTE",condition:e=>!e.colorManaExceeds(20)}],applicationDelay:.62,potency:[["NEVER",220],["RED_MAGIC_MASTERY_III",280],["ENCHANTED_BLADE_MASTERY",340]],recastTime:1.5,validateAttempt:e=>e.colorManaExceeds(20),onConfirm:e=>e.consumeColorMana(20)});Ri("ENCHANTED_ZWERCHHAU",50,{startOnHotbar:!1,replaceIf:[{newSkill:"ZWERCHHAU",condition:e=>!e.colorManaExceeds(15)}],applicationDelay:.62,potency:[["NEVER",100],["RED_MAGIC_MASTERY_III",150],["ENCHANTED_BLADE_MASTERY",190]],combo:{potency:[["NEVER",290],["RED_MAGIC_MASTERY_III",340],["ENCHANTED_BLADE_MASTERY",380]],resource:"RDM_MELEE_COUNTER",resourceValue:1},recastTime:1.5,validateAttempt:e=>e.colorManaExceeds(15),onConfirm:e=>e.consumeColorMana(15),highlightIf:e=>e.resources.get("RDM_MELEE_COUNTER").availableAmount()===1});Ri("ENCHANTED_REDOUBLEMENT",50,{startOnHotbar:!1,replaceIf:[{newSkill:"REDOUBLEMENT",condition:e=>!e.colorManaExceeds(15)}],applicationDelay:.62,potency:[["NEVER",100],["RED_MAGIC_MASTERY_III",130],["ENCHANTED_BLADE_MASTERY",190]],combo:{potency:[["NEVER",470],["RED_MAGIC_MASTERY_III",500],["ENCHANTED_BLADE_MASTERY",560]],resource:"RDM_MELEE_COUNTER",resourceValue:2},recastTime:2.2,validateAttempt:e=>e.colorManaExceeds(15),onConfirm:e=>e.consumeColorMana(15),highlightIf:e=>e.resources.get("RDM_MELEE_COUNTER").availableAmount()===2});const $h=e=>e.resources.get("WHITE_MANA").available(5)&&e.resources.get("BLACK_MANA").available(5);Ri("REPRISE",76,{replaceIf:[{newSkill:"ENCHANTED_REPRISE",condition:e=>$h(e)}],applicationDelay:.62,potency:100,recastTime:2.5,validateAttempt:e=>!$h(e)});Ri("ENCHANTED_REPRISE",76,{startOnHotbar:!1,replaceIf:[{newSkill:"REPRISE",condition:e=>!$h(e)}],applicationDelay:.62,potency:[["NEVER",290],["RED_MAGIC_MASTERY_III",340],["ENCHANTED_BLADE_MASTERY",420]],recastTime:2.5,validateAttempt:e=>$h(e),onConfirm:e=>{e.resources.get("WHITE_MANA").consume(5),e.resources.get("BLACK_MANA").consume(5)}});const Vi=[{newSkill:"MOULINET",condition:e=>e.resources.get("RDM_AOE_COUNTER").availableAmount()===0&&!e.colorManaExceeds(20)||!e.colorManaExceeds(15)},{newSkill:"ENCHANTED_MOULINET",condition:e=>e.colorManaExceeds(20)&&e.resources.get("RDM_AOE_COUNTER").availableAmount()===0},{newSkill:"ENCHANTED_MOULINET_II",condition:e=>e.colorManaExceeds(15)&&e.resources.get("RDM_AOE_COUNTER").availableAmount()===1},{newSkill:"ENCHANTED_MOULINET_III",condition:e=>e.colorManaExceeds(15)&&e.resources.get("RDM_AOE_COUNTER").availableAmount()===2}];Ri("MOULINET",52,{replaceIf:Vi,falloff:0,applicationDelay:.8,potency:60,recastTime:2.5,validateAttempt:Vi[0].condition});Ri("ENCHANTED_MOULINET",52,{startOnHotbar:!1,replaceIf:Vi,falloff:0,applicationDelay:.8,potency:130,recastTime:1.5,validateAttempt:Vi[1].condition,onConfirm:e=>e.consumeColorMana(20)});Ri("ENCHANTED_MOULINET_II",52,{startOnHotbar:!1,replaceIf:Vi,falloff:0,applicationDelay:.8,potency:140,recastTime:1.5,validateAttempt:Vi[2].condition,onConfirm:e=>e.consumeColorMana(15),highlightIf:Vi[2].condition});Ri("ENCHANTED_MOULINET_III",52,{startOnHotbar:!1,replaceIf:Vi,falloff:0,applicationDelay:.8,potency:150,recastTime:1.5,validateAttempt:Vi[3].condition,onConfirm:e=>e.consumeColorMana(15),highlightIf:Vi[3].condition});const nO=[["NEVER",600],["ENCHANTED_BLADE_MASTERY",650]];Fn("VERHOLY",70,{startOnHotbar:!1,baseCastTime:0,baseManaCost:400,falloff:.55,applicationDelay:1.43,basePotency:nO,validateAttempt:e=>e.hasThreeManaStacks(),highlightIf:e=>e.hasThreeManaStacks(),onConfirm:e=>{e.resources.get("WHITE_MANA").availableAmount()<e.resources.get("BLACK_MANA").availableAmount()?e.gainStatus("VERSTONE_READY"):e.maybeGainVerproc("VERSTONE_READY",.2),e.gainColorMana({w:11})}});Fn("VERFLARE",68,{startOnHotbar:!1,baseCastTime:0,baseManaCost:400,falloff:.55,applicationDelay:1.43,basePotency:nO,validateAttempt:e=>e.hasThreeManaStacks(),highlightIf:e=>e.hasThreeManaStacks(),onConfirm:e=>{e.resources.get("BLACK_MANA").availableAmount()<e.resources.get("WHITE_MANA").availableAmount()?e.gainStatus("VERFIRE_READY"):e.maybeGainVerproc("VERFIRE_READY",.2),e.gainColorMana({b:11})}});Fn("SCORCH",80,{startOnHotbar:!1,replaceIf:Ou,baseCastTime:0,baseManaCost:400,falloff:.55,applicationDelay:1.83,basePotency:[["NEVER",680],["ENCHANTED_BLADE_MASTERY",750]],validateAttempt:e=>e.getFinisherCounter()===1,onConfirm:e=>e.gainColorMana({w:4,b:4}),highlightIf:e=>e.getFinisherCounter()===1});Fn("RESOLUTION",90,{startOnHotbar:!1,replaceIf:Ou,baseCastTime:0,baseManaCost:400,falloff:.55,applicationDelay:1.56,basePotency:[["NEVER",750],["ENCHANTED_BLADE_MASTERY",850]],validateAttempt:e=>e.getFinisherCounter()===2,onConfirm:e=>e.gainColorMana({w:4,b:4}),highlightIf:e=>e.getFinisherCounter()===2});Fn("VERCURE",54,{baseCastTime:2,baseManaCost:500,applicationDelay:.8,basePotency:0});Fn("VERRAISE",64,{baseCastTime:10,baseManaCost:2400,applicationDelay:.81,basePotency:0});je("RDM","EMBOLDEN",58,"cd_EMBOLDEN",{replaceIf:[{newSkill:"VICE_OF_THORNS",condition:e=>e.hasResourceAvailable("THORNED_FLOURISH")}],rscType:"EMBOLDEN",applicationDelay:.62,cooldown:120,onApplication:e=>{e.hasTraitUnlocked("ENHANCED_EMBOLDEN")&&e.gainStatus("THORNED_FLOURISH")}});je("RDM","MANAFICATION",60,"cd_MANAFICATION",{replaceIf:[{newSkill:"PREFULGENCE",condition:e=>e.hasResourceAvailable("PREFULGENCE_READY")}],rscType:"MANAFICATION",requiresCombat:!0,applicationDelay:0,cooldown:110,onApplication:e=>{e.hasTraitUnlocked("ENHANCED_MANAFICATION")&&e.gainStatus("PREFULGENCE_READY"),e.gainStatus("MAGICKED_SWORDPLAY",3),(e.hasResourceAvailable("RDM_MELEE_COUNTER")||e.hasResourceAvailable("RDM_FINISHER_COUNTER")||e.hasResourceAvailable("RDM_AOE_COUNTER"))&&p.reportComboBreak(),e.setComboState("RDM_MELEE_COUNTER",0),e.setComboState("RDM_FINISHER_COUNTER",0),e.setComboState("RDM_AOE_COUNTER",0)}});Is("CORPS_A_CORPS",6,"cd_CORPS_A_CORPS",{isPhysical:!0,applicationDelay:.62,potency:130,cooldown:35,maxCharges:2,animationLock:Vt});const aO=[["NEVER",130],["ENHANCED_DISPLACEMENT",180]];Is("ENGAGEMENT",40,"cd_DISPLACEMENT",{isPhysical:!0,applicationDelay:.62,potency:aO,cooldown:35,maxCharges:2});Is("DISPLACEMENT",40,"cd_DISPLACEMENT",{isPhysical:!0,applicationDelay:.62,potency:aO,cooldown:35,maxCharges:2,animationLock:Vt});Is("FLECHE",45,"cd_FLECHE",{isPhysical:!0,applicationDelay:1.16,potency:[["NEVER",460],["ENCHANTED_BLADE_MASTERY",480]],cooldown:25});Is("CONTRE_SIXTE",56,"cd_CONTRE_SIXTE",{isPhysical:!0,falloff:0,applicationDelay:1.16,potency:[["NEVER",380],["ENCHANTED_BLADE_MASTERY",420]],cooldown:35});je("RDM","ACCELERATION",50,"cd_ACCELERATION",{rscType:"ACCELERATION",applicationDelay:0,cooldown:55,maxCharges:2,onApplication:e=>{e.hasTraitUnlocked("ENHANCED_ACCELERATION_II")&&(e.hasResourceAvailable("GRAND_IMPACT_READY")&&p.reportWarning({kind:"overwrite",rsc:"GRAND_IMPACT_READY"}),e.gainStatus("GRAND_IMPACT_READY"))}});je("RDM","MAGICK_BARRIER",86,"cd_MAGICK_BARRIER",{rscType:"MAGICK_BARRIER",applicationDelay:0,cooldown:120});Is("VICE_OF_THORNS",92,"cd_VICE_OF_THORNS",{startOnHotbar:!1,falloff:.55,applicationDelay:.8,potency:950,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("THORNED_FLOURISH"),onConfirm:e=>e.tryConsumeResource("THORNED_FLOURISH"),highlightIf:e=>e.hasResourceAvailable("THORNED_FLOURISH")});Is("PREFULGENCE",100,"cd_PREFULGENCE",{startOnHotbar:!1,falloff:.55,applicationDelay:1.42,potency:1200,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("PREFULGENCE_READY"),onConfirm:e=>e.tryConsumeResource("PREFULGENCE_READY"),highlightIf:e=>e.hasResourceAvailable("PREFULGENCE_READY")});Object.keys(VR).forEach(e=>jt(e,`RPR/${we[e].name}.png`));class VG extends Wt{jobSpecificOtherTargetedBuffViewProps(){return[this.makeCommonTimer("DEATHS_DESIGN",!1)]}jobSpecificSelfTargetedBuffViewProps(){return[...Object.keys(VR).filter(t=>t!=="DEATHS_DESIGN").map(t=>t==="SOULSOW"?this.makeCommonTimerless(t):this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){const a=this.state.resources,o=a.get("SOUL").availableAmount(),s=a.get("SHROUD").availableAmount(),c=a.get("LEMURE_SHROUD").availableAmount(),d=a.get("VOID_SHROUD").availableAmount(),h=a.get("RPR_COMBO"),f=a.get("RPR_AOE_COMBO"),m=h.available(1)?h.pendingChange?.timeTillEvent:f.available(1)?f.pendingChange?.timeTillEvent:void 0,R=[{kind:"text",name:g({en:"Combo Timer",zh:""}),text:m?.toFixed(3)??"N/A"},{kind:"bar",name:g({en:"Soul Gauge",zh:""}),color:o<50?t.rpr.soulGaugeLow:t.rpr.soulGaugeHigh,progress:o/100,valueString:Math.floor(o)+"/100"}];return this.state.hasTraitUnlocked("SHROUD_GAUGE")&&R.push({kind:"bar",name:g({en:"Shroud Gauge",zh:""}),color:s<50?t.rpr.shroudGaugeLow:t.rpr.shroudGaugeHigh,progress:s/100,valueString:Math.floor(s)+"/100"},{kind:"counter",name:g({en:"Lemure Shroud",zh:""}),color:t.rpr.lemureShroud,currentStacks:c,maxStacks:5}),this.state.hasTraitUnlocked("VOID_SOUL")&&R.push({kind:"counter",name:g({en:"Void Shroud",zh:""}),color:d<2?t.rpr.voidShroudLow:t.rpr.voidShroudHigh,currentStacks:d,maxStacks:5}),R}}function _t(e,t,a){Ve("RPR",e,t,a??{})}_t("SOUL",100);_t("SHROUD",100);_t("DEATHS_DESIGN",1,{});_t("SOUL_REAVER",2,{timeout:30});_t("ENHANCED_GIBBET",1,{timeout:60});_t("ENHANCED_GALLOWS",1,{timeout:60});_t("EXECUTIONER",2,{timeout:30});_t("ENSHROUDED",1,{timeout:30});_t("LEMURE_SHROUD",5,{timeout:30});_t("VOID_SHROUD",5);_t("OBLATIO",1,{timeout:30});_t("ENHANCED_VOID_REAPING",1,{timeout:30});_t("ENHANCED_CROSS_REAPING",1,{timeout:30});_t("IDEAL_HOST",1,{timeout:30});_t("PERFECTIO_OCCULTA",1,{timeout:30});_t("PERFECTIO_PARATA",1,{timeout:30});_t("ARCANE_CIRCLE",1,{timeout:20});_t("CIRCLE_OF_SACRIFICE",1,{timeout:5});_t("BLOODSOWN_CIRCLE",1,{timeout:6});_t("IMMORTAL_SACRIFICE",8,{timeout:30});_t("ARCANE_CREST",1,{timeout:5});_t("CREST_OF_TIME_BORROWED",1,{timeout:5});_t("CREST_OF_TIME_RETURNED",1,{timeout:15});_t("SOULSOW",1,{default:1});_t("THRESHOLD",1,{timeout:10});_t("ENHANCED_HARPE",1,{timeout:10});_t("HELLS_INGRESS_USED",1);_t("RPR_COMBO",2,{timeout:30});_t("RPR_AOE_COMBO",1,{timeout:30});class WG extends Xt{constructor(t){super(t);const a=this.hasTraitUnlocked("TEMPERED_SOUL")?2:1;this.cooldowns.set(new He("cd_SOUL_SLICE",30,a,a)),this.registerRecurringEvents()}get statusPropsGenerator(){return new VG(this)}jobSpecificAddDamageBuffCovers(t,a){this.hasResourceAvailable("ARCANE_CIRCLE")&&t.addBuff(k.ArcaneCircle),this.hasResourceAvailable("DEATHS_DESIGN")&&t.addBuff(k.DeathsDesign)}refreshDeathsDesign(){const t=this.resources.get("DEATHS_DESIGN"),a=Math.min(this.resources.timeTillReady("DEATHS_DESIGN")+30,60);if(t.available(1)){t.overrideTimer(this,a);return}t.gain(1),this.resources.addResourceEvent({rscType:"DEATHS_DESIGN",name:"drop Death's Design",delay:a,fnOnRsc:o=>{o.consume(1)}})}setTimedResource(t,a){this.tryConsumeResource(t),this.resources.get(t).gain(a),this.enqueueResourceDrop(t)}processCombo(t){const a=this.resources.get("RPR_COMBO").availableAmount(),o=this.resources.get("RPR_AOE_COMBO").availableAmount(),[s,c]=new Map([["SLICE",[1,0]],["WAXING_SLICE",[a===1?2:0,0]],["INFERNAL_SLICE",[0,0]],["SPINNING_SCYTHE",[0,1]],["NIGHTMARE_SCYTHE",[0,0]]]).get(t)??[a,o];s!==a&&this.setComboState("RPR_COMBO",s),c!==o&&this.setComboState("RPR_AOE_COMBO",c)}processSoulGauge(t){const a=this.resources.get("SOUL");if(["SLICE","WAXING_SLICE","INFERNAL_SLICE","SPINNING_SCYTHE","NIGHTMARE_SCYTHE","HARPE","HARVEST_MOON"].includes(t)){a.gain(10);return}if(["SOUL_SLICE","SOUL_SCYTHE"].includes(t)){a.gain(50);return}if(["BLOOD_STALK","UNVEILED_GALLOWS","UNVEILED_GIBBET","GRIM_SWATHE","GLUTTONY"].includes(t)){a.consume(50);return}}processShroudGauge(t){const a=this.resources.get("SHROUD");if(["GALLOWS","GIBBET","EXECUTIONERS_GALLOWS","EXECUTIONERS_GIBBET","GUILLOTINE","EXECUTIONERS_GUILLOTINE"].includes(t)){a.gain(10);return}t==="ENSHROUD"&&!this.resources.get("IDEAL_HOST").available(1)&&a.consume(50)}processReaversExecutioner(t){const a=this.resources.get("SOUL_REAVER"),o=this.resources.get("EXECUTIONER");if(["GIBBET","GALLOWS","GUILLOTINE"].includes(t)){a.consume(1);return}if(["EXECUTIONERS_GIBBET","EXECUTIONERS_GALLOWS","EXECUTIONERS_GUILLOTINE"].includes(t)){o.consume(1);return}if(this.skillsList.get(t).cdName==="cd_GCD"&&(a.consume(a.availableAmount()),o.consume(o.availableAmount())),["BLOOD_STALK","UNVEILED_GALLOWS","UNVEILED_GIBBET","GRIM_SWATHE"].includes(t)){a.consume(a.availableAmount()),o.consume(o.availableAmount()),this.setTimedResource("SOUL_REAVER",1);return}if(t==="GLUTTONY"){if(a.consume(a.availableAmount()),o.consume(o.availableAmount()),this.hasTraitUnlocked("ENHANCED_GLUTTONY")){this.setTimedResource("EXECUTIONER",2);return}this.setTimedResource("SOUL_REAVER",2);return}}processGibbetGallows(t){const a=this.resources.get("SOUL_REAVER"),o=this.resources.get("EXECUTIONER");["GIBBET","GALLOWS","EXECUTIONERS_GIBBET","EXECUTIONERS_GALLOWS"].includes(t)||(a.consume(a.availableAmount()),o.consume(o.availableAmount()));const s=new Map([["GIBBET","ENHANCED_GIBBET"],["EXECUTIONERS_GIBBET","ENHANCED_GIBBET"],["GALLOWS","ENHANCED_GALLOWS"],["EXECUTIONERS_GALLOWS","ENHANCED_GALLOWS"]]),c=new Map([["GIBBET","ENHANCED_GALLOWS"],["EXECUTIONERS_GIBBET","ENHANCED_GALLOWS"],["GALLOWS","ENHANCED_GIBBET"],["EXECUTIONERS_GALLOWS","ENHANCED_GIBBET"]]),d=this.resources.get(s.get(t)),h=this.resources.get(c.get(t));d.consume(d.availableAmount()),h.consume(h.availableAmount()),h.gain(1)}processCircleOfSacrifice(t){if(!this.hasResourceAvailable("CIRCLE_OF_SACRIFICE"))return;dl("RPR",t).potencyFn(this)>0&&(this.resources.get("IMMORTAL_SACRIFICE").availableAmount()===0?this.setTimedResource("IMMORTAL_SACRIFICE",1):this.resources.get("IMMORTAL_SACRIFICE").gain(1),this.tryConsumeResource("CIRCLE_OF_SACRIFICE",!0))}enterEnshroud(){this.hasResourceAvailable("IDEAL_HOST")&&this.resources.get("IDEAL_HOST").consume(1),this.hasTraitUnlocked("ENHANCED_ENSHROUD")&&this.setTimedResource("OBLATIO",1),this.setTimedResource("LEMURE_SHROUD",5),this.tryConsumeResource("PERFECTIO_PARATA",!0)}exitEnshroud(){this.tryConsumeResource("ENSHROUDED"),this.tryConsumeResource("OBLATIO"),this.tryConsumeResource("LEMURE_SHROUD"),this.tryConsumeResource("VOID_SHROUD"),this.tryConsumeResource("ENHANCED_CROSS_REAPING"),this.tryConsumeResource("ENHANCED_VOID_REAPING")}}const XG=new Set(["SHADOW_OF_DEATH","WHORL_OF_DEATH","HARVEST_MOON","HARPE","SOULSOW","VOID_REAPING","CROSS_REAPING","GRIM_REAPING","LEMURES_SLICE","LEMURES_SCYTHE","SACRIFICIUM","COMMUNIO","ARCANE_CIRCLE","HELLS_EGRESS","HELLS_INGRESS","REGRESS","ARCANE_CREST","FEINT","LEG_SWEEP","BLOODBATH","TRUE_NORTH","ARMS_LENGTH","SECOND_WIND","SPRINT","TINCTURE"]),xf=(e,t)=>a=>{const o=["GIBBET","GALLOWS","GUILLOTINE"].includes(t)?a.resources.get("SOUL_REAVER"):a.resources.get("EXECUTIONER");return a.resources.get(e).available(1)||o.available(1)&&!a.hasResourceAvailable("ENHANCED_GIBBET")&&!a.hasResourceAvailable("ENHANCED_GALLOWS")},kT=e=>e.hasResourceAvailable("SOUL_REAVER"),UT=e=>e.hasResourceAvailable("EXECUTIONER"),qi=e=>t=>t.resources.get("SOUL").availableAmount()>=e,PT=e=>XG.has(e),Hf=e=>Me(t=>t.processCombo(e),t=>t.processSoulGauge(e),t=>t.processShroudGauge(e),t=>t.processReaversExecutioner(e),t=>t.processCircleOfSacrifice(e)),wT=e=>{const t=[];return e.hasResourceAvailable("ARCANE_CIRCLE")&&t.push(X.ArcaneCircle),e.hasResourceAvailable("DEATHS_DESIGN")&&t.push(X.DeathsDesign),t},kf=(e,t,a)=>{const o=Me(Hf(e),a.onConfirm),s=Nu(c=>!c.resources.get("ENSHROUDED").available(1)||PT(e),a.validateAttempt??(()=>!0));return Ka("RPR",e,t,{...a,recastTime:c=>c.config.adjustedGCD(a.recastTime),onConfirm:o,validateAttempt:s,isInstantFn:c=>!(e==="COMMUNIO"||e==="HARPE"&&!c.hasResourceAvailable("ENHANCED_HARPE")||e==="SOULSOW"&&c.isInCombat()),jobPotencyModifiers:wT})},Nn=(e,t,a)=>{const o=Me(Hf(e),a.onConfirm),s=Nu(c=>!c.resources.get("ENSHROUDED").available(1)||PT(e),a.validateAttempt??(()=>!0));return nn("RPR",e,t,{...a,onConfirm:o,jobPotencyModifiers:c=>{const d=wT(c);if(["GIBBET","EXECUTIONERS_GIBBET"].includes(e)&&c.hasResourceAvailable("ENHANCED_GIBBET")&&d.push(X.EnhancedGibbetGallows),["GALLOWS","EXECUTIONERS_GALLOWS"].includes(e)&&c.hasResourceAvailable("ENHANCED_GALLOWS")&&d.push(X.EnhancedGibbetGallows),e==="VOID_REAPING"&&c.hasResourceAvailable("ENHANCED_VOID_REAPING")&&d.push(X.EnhancedReaping),e==="CROSS_REAPING"&&c.hasResourceAvailable("ENHANCED_CROSS_REAPING")&&d.push(X.EnhancedReaping),e==="PLENTIFUL_HARVEST"&&c.hasResourceAvailable("IMMORTAL_SACRIFICE"))for(let h=0;h<c.resources.get("IMMORTAL_SACRIFICE").availableAmount();h++)d.push(X.ImmortalSacrifice);return d},validateAttempt:s})},La=(e,t,a,o)=>{const s=Me(Hf(e),o.onConfirm),c=Nu(d=>!d.resources.get("ENSHROUDED").available(1)||PT(e),o.validateAttempt??(()=>!0));return at("RPR",e,t,a,{...o,onConfirm:s,validateAttempt:c,jobPotencyModifiers:wT})};Nn("SHADOW_OF_DEATH",10,{potency:300,aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:1.15,onConfirm:e=>e.refreshDeathsDesign()});Nn("SLICE",1,{potency:[["NEVER",260],["MELEE_MASTERY_II_RPR",320],["MELEE_MASTERY_III_RPR",420]],aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.49});Nn("WAXING_SLICE",5,{potency:[["NEVER",100],["MELEE_MASTERY_II_RPR",160],["MELEE_MASTERY_III_RPR",260]],combo:{potency:[["NEVER",340],["MELEE_MASTERY_II_RPR",400],["MELEE_MASTERY_III_RPR",500]],resource:"RPR_COMBO",resourceValue:1},aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.58,highlightIf:e=>e.hasResourceExactly("RPR_COMBO",1)});Nn("INFERNAL_SLICE",30,{potency:[["NEVER",100],["MELEE_MASTERY_II_RPR",180],["MELEE_MASTERY_III_RPR",280]],combo:{potency:[["NEVER",420],["MELEE_MASTERY_II_RPR",500],["MELEE_MASTERY_III_RPR",600]],resource:"RPR_COMBO",resourceValue:2},aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.54,highlightIf:e=>e.hasResourceExactly("RPR_COMBO",2)});Nn("SOUL_SLICE",60,{potency:[["NEVER",460],["MELEE_MASTERY_III_RPR",520]],aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.99,secondaryCooldown:{cdName:"cd_SOUL_SLICE",cooldown:30,maxCharges:2}});Nn("GIBBET",70,{replaceIf:[{newSkill:"VOID_REAPING",condition:e=>e.hasResourceAvailable("ENSHROUDED")},{newSkill:"EXECUTIONERS_GIBBET",condition:e=>e.hasResourceAvailable("EXECUTIONER")}],potency:[["NEVER",460],["MELEE_MASTERY_III_RPR",500]],positional:{potency:[["NEVER",520],["MELEE_MASTERY_III_RPR",560]],location:"flank"},aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.5,highlightIf:xf("ENHANCED_GIBBET","GIBBET"),validateAttempt:kT,onConfirm:e=>{e.tryConsumeResource("ENHANCED_GIBBET"),e.setTimedResource("ENHANCED_GALLOWS",1)}});Nn("GALLOWS",70,{replaceIf:[{newSkill:"CROSS_REAPING",condition:e=>e.hasResourceAvailable("ENSHROUDED")},{newSkill:"EXECUTIONERS_GALLOWS",condition:e=>e.resources.get("EXECUTIONER").available(1)}],potency:[["NEVER",460],["MELEE_MASTERY_III_RPR",500]],positional:{potency:[["NEVER",520],["MELEE_MASTERY_III_RPR",560]],location:"rear"},aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.53,highlightIf:xf("ENHANCED_GALLOWS","GALLOWS"),validateAttempt:kT,onConfirm:e=>{e.tryConsumeResource("ENHANCED_GALLOWS"),e.setTimedResource("ENHANCED_GIBBET",1)}});Nn("EXECUTIONERS_GIBBET",96,{startOnHotbar:!1,potency:700,positional:{potency:760,location:"flank"},aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.62,highlightIf:xf("ENHANCED_GIBBET","EXECUTIONERS_GIBBET"),validateAttempt:UT,onConfirm:e=>{e.tryConsumeResource("ENHANCED_GIBBET"),e.setTimedResource("ENHANCED_GALLOWS",1)}});Nn("EXECUTIONERS_GALLOWS",96,{startOnHotbar:!1,potency:700,positional:{potency:760,location:"flank"},aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.62,highlightIf:xf("ENHANCED_GALLOWS","EXECUTIONERS_GALLOWS"),validateAttempt:UT,onConfirm:e=>{e.tryConsumeResource("ENHANCED_GALLOWS"),e.setTimedResource("ENHANCED_GIBBET",1)}});Nn("PLENTIFUL_HARVEST",88,{potency:720,aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:.2,applicationDelay:1.16,highlightIf:e=>e.hasResourceAvailable("IMMORTAL_SACRIFICE",1),validateAttempt:e=>e.hasResourceAvailable("IMMORTAL_SACRIFICE",1)&&!e.hasResourceAvailable("BLOODSOWN_CIRCLE"),onConfirm:e=>{e.tryConsumeResource("IMMORTAL_SACRIFICE",!0),e.setTimedResource("IDEAL_HOST",1),e.hasTraitUnlocked("ENHANCED_PLENTIFUL_HARVEST")&&e.setTimedResource("PERFECTIO_OCCULTA",1)}});kf("COMMUNIO",90,{replaceIf:[{condition:e=>e.hasResourceAvailable("PERFECTIO_PARATA"),newSkill:"PERFECTIO"}],potency:1100,aspect:Ie.Other,castTime:1.3,recastTime:2.5,falloff:.2,applicationDelay:1.16,validateAttempt:e=>e.hasResourceAvailable("ENSHROUDED"),highlightIf:e=>e.hasResourceAvailable("ENSHROUDED")&&e.resources.get("LEMURE_SHROUD").availableAmount()===1,onConfirm:e=>{e.tryConsumeResource("PERFECTIO_OCCULTA")&&e.hasTraitUnlocked("ENHANCED_PLENTIFUL_HARVEST")&&e.setTimedResource("PERFECTIO_PARATA",1),e.exitEnshroud(),e.tryConsumeResource("ENHANCED_CROSS_REAPING"),e.tryConsumeResource("ENHANCED_VOID_REAPING")}});kf("HARPE",15,{potency:300,aspect:Ie.Other,castTime:1.3,recastTime:2.5,applicationDelay:.9,highlightIf:e=>e.hasResourceAvailable("ENHANCED_HARPE"),onConfirm:e=>e.tryConsumeResource("ENHANCED_HARPE")});kf("SOULSOW",82,{potency:0,replaceIf:[{condition:e=>e.hasResourceAvailable("SOULSOW"),newSkill:"HARVEST_MOON"}],startOnHotbar:!0,aspect:Ie.Other,castTime:5,recastTime:2.5,applicationDelay:0,onConfirm:e=>e.resources.get("SOULSOW").gain(1)});kf("HARVEST_MOON",82,{potency:[["NEVER",600],["MELEE_MASTERY_III_RPR",800]],startOnHotbar:!1,aspect:Ie.Other,castTime:0,recastTime:2.5,falloff:.4,applicationDelay:.9,validateAttempt:e=>e.hasResourceAvailable("SOULSOW"),highlightIf:e=>e.hasResourceAvailable("SOULSOW"),onConfirm:e=>e.resources.get("SOULSOW").consume(1)});La("GLUTTONY",76,"cd_GLUTTONY",{replaceIf:[{condition:e=>e.hasResourceAvailable("ENSHROUDED"),newSkill:"SACRIFICIUM"}],isPhysical:!1,potency:520,startOnHotbar:!0,falloff:.25,applicationDelay:1.06,cooldown:60,validateAttempt:qi(50),highlightIf:qi(50)});La("BLOOD_STALK",50,"cd_BLOOD_STALK",{replaceIf:[{newSkill:"LEMURES_SLICE",condition:e=>e.hasResourceAvailable("ENSHROUDED")},{newSkill:"UNVEILED_GIBBET",condition:e=>e.hasResourceAvailable("ENHANCED_GIBBET")},{newSkill:"UNVEILED_GALLOWS",condition:e=>e.hasResourceAvailable("ENHANCED_GALLOWS")}],isPhysical:!0,potency:340,startOnHotbar:!0,applicationDelay:.89,cooldown:1,validateAttempt:qi(50),highlightIf:qi(50)});La("GRIM_SWATHE",55,"cd_BLOOD_STALK",{replaceIf:[{condition:e=>e.hasResourceAvailable("ENSHROUDED"),newSkill:"LEMURES_SCYTHE"}],isPhysical:!0,potency:140,startOnHotbar:!0,falloff:0,applicationDelay:.58,cooldown:1,validateAttempt:qi(50),highlightIf:qi(50)});La("UNVEILED_GIBBET",70,"cd_BLOOD_STALK",{isPhysical:!0,potency:440,startOnHotbar:!1,applicationDelay:.54,cooldown:1,validateAttempt:qi(50),highlightIf:qi(50)});La("UNVEILED_GALLOWS",70,"cd_BLOOD_STALK",{isPhysical:!0,potency:440,startOnHotbar:!1,applicationDelay:.54,cooldown:1,validateAttempt:qi(50),highlightIf:qi(50)});La("LEMURES_SLICE",86,"cd_LEMURES_SLICE",{isPhysical:!0,potency:[["NEVER",240],["MELEE_MASTERY_III_RPR",280]],startOnHotbar:!1,applicationDelay:.7,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("VOID_SHROUD",2),highlightIf:e=>e.hasResourceAvailable("VOID_SHROUD",2),onConfirm:e=>{e.resources.get("VOID_SHROUD").consume(2)}});La("SACRIFICIUM",92,"cd_SACRIFICIUM",{isPhysical:!1,potency:600,startOnHotbar:!1,falloff:.2,applicationDelay:.76,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("OBLATIO"),highlightIf:e=>e.hasResourceAvailable("OBLATIO"),onConfirm:e=>e.tryConsumeResource("OBLATIO")});je("RPR","ARCANE_CIRCLE",72,"cd_ARCANE_CIRCLE",{rscType:"ARCANE_CIRCLE",applicationDelay:.6,startOnHotbar:!0,maxCharges:1,potency:0,onApplication:e=>{e.hasTraitUnlocked("ENHANCED_ARCANE_CIRCLE")&&(e.setTimedResource("CIRCLE_OF_SACRIFICE",1),e.setTimedResource("BLOODSOWN_CIRCLE",1))},cooldown:120});Nn("VOID_REAPING",80,{startOnHotbar:!1,potency:[["NEVER",460],["MELEE_MASTERY_III_RPR",540]],aspect:Ie.Physical,recastTime:1.5,applicationDelay:.53,highlightIf:e=>e.resources.get("LEMURE_SHROUD").availableAmount()>1&&!e.hasResourceAvailable("ENHANCED_CROSS_REAPING"),validateAttempt:e=>e.hasResourceAvailable("LEMURE_SHROUD"),onConfirm:e=>{e.tryConsumeResource("ENHANCED_VOID_REAPING"),e.setTimedResource("ENHANCED_CROSS_REAPING",1),e.resources.get("LEMURE_SHROUD").consume(1),e.resources.get("VOID_SHROUD").gain(1),e.resources.get("LEMURE_SHROUD").availableAmount()===0&&e.exitEnshroud()}});Nn("CROSS_REAPING",80,{startOnHotbar:!1,potency:[["NEVER",460],["MELEE_MASTERY_III_RPR",540]],aspect:Ie.Physical,recastTime:1.5,applicationDelay:.53,highlightIf:e=>e.resources.get("LEMURE_SHROUD").availableAmount()>1&&!e.hasResourceAvailable("ENHANCED_VOID_REAPING"),validateAttempt:e=>e.hasResourceAvailable("LEMURE_SHROUD"),onConfirm:e=>{e.tryConsumeResource("ENHANCED_CROSS_REAPING"),e.setTimedResource("ENHANCED_VOID_REAPING",1),e.resources.get("LEMURE_SHROUD").consume(1),e.resources.get("VOID_SHROUD").gain(1),e.resources.get("LEMURE_SHROUD").availableAmount()===0&&e.exitEnshroud()}});je("RPR","ENSHROUD",80,"cd_ENSHROUD",{rscType:"ENSHROUDED",highlightIf:e=>e.hasResourceAvailable("SHROUD",50)||e.hasResourceAvailable("IDEAL_HOST"),applicationDelay:0,startOnHotbar:!0,cooldown:5,validateAttempt:e=>e.hasResourceAvailable("SHROUD",50)||e.hasResourceAvailable("IDEAL_HOST"),onConfirm:Me(Hf("ENSHROUD"),e=>e.enterEnshroud())});Nn("PERFECTIO",100,{potency:1300,aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:.2,applicationDelay:1.29,startOnHotbar:!1,highlightIf:e=>e.hasResourceAvailable("PERFECTIO_PARATA"),validateAttempt:e=>e.hasResourceAvailable("PERFECTIO_PARATA"),onConfirm:e=>{e.resources.get("PERFECTIO_PARATA").consume(1)}});La("REGRESS",74,"cd_BLOOD_STALK",{cooldown:1,animationLock:Vt,startOnHotbar:!1,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("THRESHOLD"),onConfirm:e=>e.resources.get("THRESHOLD").consume(1)});La("HELLS_INGRESS",20,"cd_INGRESS_EGRESS",{replaceIf:[{condition:e=>e.hasResourceAvailable("THRESHOLD")&&e.hasResourceAvailable("HELLS_INGRESS_USED"),newSkill:"REGRESS"}],cooldown:20,animationLock:Vt,onConfirm:e=>{e.resources.get("HELLS_INGRESS_USED").gain(1),e.hasTraitUnlocked("HELLSGATE")&&e.setTimedResource("THRESHOLD",1),e.setTimedResource("ENHANCED_HARPE",1)}});La("HELLS_EGRESS",20,"cd_INGRESS_EGRESS",{replaceIf:[{condition:e=>e.hasResourceAvailable("THRESHOLD")&&!e.hasResourceAvailable("HELLS_INGRESS_USED"),newSkill:"REGRESS"}],cooldown:20,animationLock:Vt,onConfirm:e=>{e.tryConsumeResource("HELLS_INGRESS_USED"),e.hasTraitUnlocked("HELLSGATE")&&e.setTimedResource("THRESHOLD",1),e.setTimedResource("ENHANCED_HARPE",1)}});La("ARCANE_CREST",40,"cd_ARCANE_CREST",{replaceIf:[{condition:e=>e.hasResourceAvailable("CREST_OF_TIME_BORROWED"),newSkill:"ARCANE_CREST_POP"}],cooldown:30,onConfirm:e=>e.setTimedResource("CREST_OF_TIME_BORROWED",1)});La("ARCANE_CREST_POP",40,"cd_ARCANE_CREST_POP",{cooldown:1,animationLock:ma,startOnHotbar:!1,onConfirm:e=>{e.tryConsumeResource("CREST_OF_TIME_BORROWED"),e.setTimedResource("CREST_OF_TIME_RETURNED",1)},validateAttempt:e=>e.hasResourceAvailable("CREST_OF_TIME_BORROWED"),highlightIf:e=>e.hasResourceAvailable("CREST_OF_TIME_BORROWED")});Nn("WHORL_OF_DEATH",35,{potency:100,aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:1.15,onConfirm:e=>e.refreshDeathsDesign()});Nn("SPINNING_SCYTHE",25,{potency:140,aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.62});Nn("NIGHTMARE_SCYTHE",45,{potency:120,combo:{potency:180,resource:"RPR_AOE_COMBO",resourceValue:1},aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.8,highlightIf:e=>e.hasResourceExactly("RPR_AOE_COMBO",1)});Nn("SOUL_SCYTHE",65,{potency:180,aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.66,secondaryCooldown:{cdName:"cd_SOUL_SLICE",cooldown:30,maxCharges:2}});Nn("EXECUTIONERS_GUILLOTINE",96,{startOnHotbar:!1,potency:260,aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.53,highlightIf:e=>e.hasResourceAvailable("EXECUTIONER"),validateAttempt:UT});Nn("GRIM_REAPING",80,{startOnHotbar:!1,potency:200,recastTime:1.5,falloff:0,applicationDelay:.8,highlightIf:e=>e.resources.get("LEMURE_SHROUD").availableAmount()>1,validateAttempt:e=>e.hasResourceAvailable("LEMURE_SHROUD"),onConfirm:e=>{e.resources.get("LEMURE_SHROUD").consume(1),e.resources.get("VOID_SHROUD").gain(1),e.resources.get("LEMURE_SHROUD").availableAmount()===0&&e.exitEnshroud()},aspect:Ie.Physical});La("LEMURES_SCYTHE",86,"cd_LEMURES_SLICE",{isPhysical:!0,potency:100,falloff:0,applicationDelay:.66,cooldown:1,startOnHotbar:!1,validateAttempt:e=>e.hasResourceAvailable("VOID_SHROUD",2),highlightIf:e=>e.hasResourceAvailable("VOID_SHROUD",2),onConfirm:e=>{e.resources.get("VOID_SHROUD").consume(2)}});Nn("GUILLOTINE",70,{replaceIf:[{newSkill:"GRIM_REAPING",condition:e=>e.hasResourceAvailable("ENSHROUDED")},{newSkill:"EXECUTIONERS_GUILLOTINE",condition:e=>e.resources.get("EXECUTIONER").available(1)}],potency:200,aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.49,highlightIf:e=>e.hasResourceAvailable("SOUL_REAVER"),validateAttempt:kT});La("GAIN_SOUL_GAUGE",50,"cd_GAIN_SOUL_GAUGE",{applicationDelay:0,animationLock:ma,cooldown:.01,onConfirm:e=>e.resources.get("SOUL").gain(10)});Object.keys(WR).forEach(e=>jt(e,`SAM/${we[e].name}.png`));class qG extends Wt{jobSpecificOtherTargetedBuffViewProps(){return[this.makeCommonTimer("HIGANBANA_DOT",!1)]}jobSpecificSelfTargetedBuffViewProps(){return Object.keys(WR).filter(t=>t!=="HIGANBANA_DOT").map(t=>this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){const a=this.state.resources,o=a.get("KENKI").availableAmount(),s=a.get("MEDITATION").availableAmount();return[{kind:"sen",name:g({en:"sen",zh:""}),hasSetsu:this.state.hasResourceAvailable("SETSU"),hasGetsu:this.state.hasResourceAvailable("GETSU"),hasKa:this.state.hasResourceAvailable("KA_SEN"),setsuColor:t.sam.setsu,getsuColor:t.sam.getsu,kaColor:t.sam.kaSen},{kind:"bar",name:g({en:"kenki",zh:""}),color:t.sam.kenki,progress:o/100,valueString:o.toFixed(0)},{kind:"counter",name:g({en:"meditation",zh:""}),color:t.sam.meditation,currentStacks:s,maxStacks:3}]}}const Cn=(e,t,a)=>{Ve("SAM",e,t,a??{})};Cn("MEIKYO_SHISUI",3,{timeout:20,warnOnTimeout:!0});Cn("FUGETSU",1,{timeout:40});Cn("FUKA",1,{timeout:40});Cn("ZANSHIN_READY",1,{timeout:30});Cn("TENDO",1,{timeout:30,warnOnTimeout:!0});Cn("OGI_READY",1,{timeout:30});Cn("TSUBAME_GAESHI_READY",1,{timeout:30,warnOnTimeout:!0});Cn("THIRD_EYE",1,{timeout:4});Cn("TENGENTSU",1,{timeout:4});Cn("TENGENTSUS_FORESIGHT",1,{timeout:9});Cn("ENHANCED_ENPI",1,{timeout:15});Cn("MEDITATE",1,{timeout:15.2});Cn("KENKI",100,{warnOnOvercap:!0});Cn("SETSU",1,{warnOnOvercap:!0});Cn("GETSU",1,{warnOnOvercap:!0});Cn("KA_SEN",1,{warnOnOvercap:!0});Cn("MEDITATION",3,{warnOnOvercap:!0});Cn("HIGANBANA_DOT",1,{timeout:60});const iO=["SAM_TWO_READY","SAM_TWO_AOE_READY","GEKKO_READY","KASHA_READY","KAESHI_OGI_READY"];iO.forEach(e=>Cn(e,1,{timeout:30}));Cn("KAESHI_TRACKER",4,{timeout:30});class ZG extends Xt{constructor(t){super(t);const a=this.hasTraitUnlocked("ENHANCED_HISSATSU")?60:120,o=this.hasTraitUnlocked("ENHANCED_MEIKYO_SHISUI")?2:1;[new He("cd_MEIKYO_SHISUI",55,o,o),new He("cd_SENEI_GUREN",a,1,1)].forEach(s=>this.cooldowns.set(s)),super.registerRecurringEvents([{reportName:Ke("HIGANBANA_DOT"),groupedEffects:[{effectName:"HIGANBANA_DOT",appliedBy:["HIGANBANA"]}]}])}get statusPropsGenerator(){return new qG(this)}inherentSpeedModifier(){return this.hasTraitUnlocked("ENHANCED_FUGETSU_AND_FUKA")?13:10}jobSpecificAddDamageBuffCovers(t,a){this.hasResourceAvailable("ENHANCED_ENPI")&&a.name==="ENPI"&&t.addBuff(k.EnhancedEnpi),this.hasResourceAvailable("FUGETSU")&&t.addBuff(k.Fugetsu)}jobSpecificAddSpeedBuffCovers(t,a){this.hasResourceAvailable("FUKA")&&a.cdName==="cd_GCD"&&t.addBuff(k.Fuka)}hitCombo(t){return super.hitCombo(t)||this.hasResourceAvailable("MEIKYO_SHISUI")}cancelChanneledSkills(){const t=this.findNextQueuedEventByTag(ca.MeditateTick);t&&(t.canceled=!0),this.tryConsumeResource("MEDITATE")}getFugetsuModifier(){return this.hasTraitUnlocked("ENHANCED_FUGETSU_AND_FUKA")?X.FugetsuEnhanced:X.FugetsuBase}getFukaModifier(){return this.hasResourceAvailable("FUKA")?this.inherentSpeedModifier():0}checkCombo(t){return this.hasResourceAvailable(t)||this.hasResourceAvailable("MEIKYO_SHISUI")}refreshBuff(t,a){this.addEvent(new Ce(`gain ${t}`,a,()=>{this.gainStatus(t)}))}progressActiveCombo(t){iO.forEach(a=>{t.includes(a)||this.setComboState(a,0)}),t.forEach(a=>this.setComboState(a,1))}tryConsumeMeikyo(){this.tryConsumeResource("MEIKYO_SHISUI")}gainKenki(t){this.resources.get("KENKI").gain(t)}gainMeditation(){this.resources.get("MEDITATION").gain(1)}gainSen(t){this.resources.get(t).gain(1)}countSen(){return["GETSU","SETSU","KA_SEN"].reduce((t,a)=>this.hasResourceAvailable(a)?t+1:t,0)}consumeAllSen(){["GETSU","SETSU","KA_SEN"].forEach(t=>this.tryConsumeResource(t))}startMeditateTimer(){const t=a=>{const o=new Ce("meditate tick",3,()=>{a<5&&(this.isInCombat()&&(p.reportMeditateTick(this.time,"+kenki/meditation"),this.resources.get("KENKI").gain(10),this.resources.get("MEDITATION").gain(1)),this.addEvent(t(a+1)))});return o.addTag(ca.MeditateTick),o};this.addEvent(t(0))}}const Ut=(e,t,a)=>{const o=c=>{const d=c.hasResourceAvailable("FUGETSU")?[c.getFugetsuModifier()]:[];return a.jobPotencyModifiers&&d.push(...a.jobPotencyModifiers(c)),d};let s=a.baseCastTime||0;return s&&(s=c=>c.hasTraitUnlocked("ENHANCED_IAIJUTSU")?a.baseCastTime||0:c.config.adjustedSksCastTime(1.8,c.getFukaModifier())),nn("SAM",e,t,{...a,castTime:s,recastTime:c=>c.config.adjustedSksGCD(a.baseRecastTime??2.5,c.getFukaModifier()),potency:a.basePotency,jobPotencyModifiers:o,isInstantFn:c=>!(a.baseCastTime&&a.baseCastTime>0)})},Wa=(e,t,a,o)=>(o.potency&&!o.jobPotencyModifiers&&(o.jobPotencyModifiers=s=>s.hasResourceAvailable("FUGETSU")?[s.getFugetsuModifier()]:[]),at("SAM",e,t,a,o));Ut("ENPI",15,{applicationDelay:.71,basePotency:100,onConfirm:e=>{e.hasResourceAvailable("ENHANCED_ENPI")&&e.tryConsumeResource("ENHANCED_ENPI"),e.gainKenki(10)},jobPotencyModifiers:e=>e.hasResourceAvailable("ENHANCED_ENPI")?[e.hasTraitUnlocked("WAY_OF_THE_SAMURAI_III")?X.YatenpiEnhanced:X.YatenpiBase]:[],highlightIf:e=>e.hasResourceAvailable("ENHANCED_ENPI")});Ut("HAKAZE",1,{autoUpgrade:{trait:"HAKAZE_MASTERY",otherSkill:"GYOFU"},applicationDelay:.85,basePotency:200,onConfirm:e=>{e.tryConsumeMeikyo(),e.gainKenki(5),e.progressActiveCombo(["SAM_TWO_READY"])}});Ut("GYOFU",92,{autoDowngrade:{trait:"HAKAZE_MASTERY",otherSkill:"HAKAZE"},applicationDelay:.85,basePotency:240,onConfirm:e=>{e.tryConsumeMeikyo(),e.gainKenki(5),e.progressActiveCombo(["SAM_TWO_READY"])}});Ut("YUKIKAZE",50,{applicationDelay:.85,basePotency:[["NEVER",100],["WAY_OF_THE_SAMURAI_II",110],["WAY_OF_THE_SAMURAI_III",160]],combo:{potency:[["NEVER",280],["WAY_OF_THE_SAMURAI_II",290],["WAY_OF_THE_SAMURAI_III",340]],resource:"SAM_TWO_READY",resourceValue:1},onConfirm:e=>{e.checkCombo("SAM_TWO_READY")&&(e.gainKenki(15),e.gainSen("SETSU")),e.tryConsumeMeikyo(),e.progressActiveCombo([])},highlightIf:e=>e.checkCombo("SAM_TWO_READY")});Ut("JINPU",4,{applicationDelay:.62,basePotency:[["NEVER",120],["WAY_OF_THE_SAMURAI_III",140]],combo:{potency:[["NEVER",280],["WAY_OF_THE_SAMURAI_III",300]],resource:"SAM_TWO_READY",resourceValue:1},onConfirm:e=>{e.checkCombo("SAM_TWO_READY")?(e.gainKenki(5),e.refreshBuff("FUGETSU",.62),e.tryConsumeMeikyo(),e.progressActiveCombo(["GEKKO_READY"])):(e.tryConsumeMeikyo(),e.progressActiveCombo([]))},highlightIf:e=>e.checkCombo("SAM_TWO_READY")});Ut("GEKKO",30,{applicationDelay:.76,basePotency:[["NEVER",100],["WAY_OF_THE_SAMURAI_II",110],["WAY_OF_THE_SAMURAI_III",160]],combo:{potency:[["NEVER",310],["WAY_OF_THE_SAMURAI_II",320],["WAY_OF_THE_SAMURAI_III",370]],resource:"GEKKO_READY",resourceValue:1},positional:{potency:[["NEVER",150],["WAY_OF_THE_SAMURAI_II",160],["WAY_OF_THE_SAMURAI_III",210]],comboPotency:[["NEVER",360],["WAY_OF_THE_SAMURAI_II",370],["WAY_OF_THE_SAMURAI_III",420]],location:"rear"},onConfirm:e=>{e.checkCombo("GEKKO_READY")&&(e.gainKenki(10),e.gainSen("GETSU")),e.hasResourceAvailable("MEIKYO_SHISUI")&&e.refreshBuff("FUGETSU",.76),e.tryConsumeMeikyo(),e.progressActiveCombo([])},highlightIf:e=>e.checkCombo("GEKKO_READY")});Ut("SHIFU",18,{applicationDelay:.8,basePotency:[["NEVER",120],["WAY_OF_THE_SAMURAI_III",140]],combo:{potency:[["NEVER",280],["WAY_OF_THE_SAMURAI_III",300]],resource:"SAM_TWO_READY",resourceValue:1},onConfirm:e=>{e.checkCombo("SAM_TWO_READY")?(e.gainKenki(5),e.refreshBuff("FUKA",.8),e.tryConsumeMeikyo(),e.progressActiveCombo(["KASHA_READY"])):(e.tryConsumeMeikyo(),e.progressActiveCombo([]))},highlightIf:e=>e.checkCombo("SAM_TWO_READY")});Ut("KASHA",40,{applicationDelay:.62,basePotency:[["NEVER",100],["WAY_OF_THE_SAMURAI_II",110],["WAY_OF_THE_SAMURAI_III",160]],combo:{potency:[["NEVER",310],["WAY_OF_THE_SAMURAI_II",320],["WAY_OF_THE_SAMURAI_III",370]],resource:"KASHA_READY",resourceValue:1},positional:{potency:[["NEVER",150],["WAY_OF_THE_SAMURAI_II",160],["WAY_OF_THE_SAMURAI_III",210]],comboPotency:[["NEVER",360],["WAY_OF_THE_SAMURAI_II",370],["WAY_OF_THE_SAMURAI_III",420]],location:"flank"},onConfirm:e=>{e.checkCombo("KASHA_READY")&&(e.gainKenki(10),e.gainSen("KA_SEN")),e.hasResourceAvailable("MEIKYO_SHISUI")&&e.refreshBuff("FUKA",.62),e.tryConsumeMeikyo(),e.progressActiveCombo([])},highlightIf:e=>e.checkCombo("KASHA_READY")});Ut("FUGA",26,{autoUpgrade:{trait:"FUGA_MASTERY",otherSkill:"FUKO"},falloff:0,applicationDelay:.76,basePotency:90,onConfirm:e=>{e.gainKenki(5),e.progressActiveCombo(["SAM_TWO_AOE_READY"])}});Ut("FUKO",86,{autoDowngrade:{trait:"FUGA_MASTERY",otherSkill:"FUGA"},falloff:0,applicationDelay:.76,basePotency:100,onConfirm:e=>{e.gainKenki(10),e.progressActiveCombo(["SAM_TWO_AOE_READY"])}});Ut("MANGETSU",35,{falloff:0,applicationDelay:.62,basePotency:100,combo:{potency:120,resource:"SAM_TWO_AOE_READY",resourceValue:1},onConfirm:e=>{e.checkCombo("SAM_TWO_AOE_READY")&&(e.gainKenki(10),e.refreshBuff("FUGETSU",.62),e.gainSen("GETSU")),e.progressActiveCombo([])},highlightIf:e=>e.checkCombo("SAM_TWO_AOE_READY")});Ut("OKA",35,{falloff:0,applicationDelay:.62,basePotency:100,combo:{potency:120,resource:"SAM_TWO_AOE_READY",resourceValue:1},onConfirm:e=>{e.checkCombo("SAM_TWO_AOE_READY")&&(e.gainKenki(10),e.refreshBuff("FUKA",.62),e.gainSen("KA_SEN")),e.progressActiveCombo([])},highlightIf:e=>e.checkCombo("SAM_TWO_AOE_READY")});const oO={newSkill:"HIGANBANA",condition:e=>e.countSen()===1},lO={newSkill:"TENKA_GOKEN",condition:e=>!e.hasResourceAvailable("TENDO")&&e.countSen()===2},sO={newSkill:"TENDO_GOKEN",condition:e=>e.hasResourceAvailable("TENDO")&&e.countSen()===2},rO={newSkill:"MIDARE_SETSUGEKKA",condition:e=>!e.hasResourceAvailable("TENDO")&&e.countSen()===3},cO={newSkill:"TENDO_SETSUGEKKA",condition:e=>e.hasResourceAvailable("TENDO")&&e.countSen()===3},Qr=[oO,lO,sO,rO,cO];Ut("IAIJUTSU",30,{replaceIf:Qr,baseCastTime:1.3,basePotency:0,applicationDelay:0,validateAttempt:e=>!1});Ut("HIGANBANA",30,{startOnHotbar:!1,replaceIf:Qr,baseCastTime:1.3,basePotency:200,applicationDelay:.62,validateAttempt:oO.condition,onConfirm:(e,t)=>{const a=[];e.hasResourceAvailable("FUGETSU")&&a.push(e.getFugetsuModifier());const o=e.hasTraitUnlocked("WAY_OF_THE_SAMURAI_III")?50:45;e.addDoTPotencies({node:t,effectName:"HIGANBANA_DOT",skillName:"HIGANBANA",tickPotency:o,speedStat:"sks",modifiers:a}),e.consumeAllSen(),e.gainMeditation()},onApplication:(e,t)=>e.applyDoT("HIGANBANA_DOT",t)});const Uf=e=>t=>{t.consumeAllSen(),t.gainStatus("KAESHI_TRACKER",e),t.gainMeditation(),t.gainStatus("TSUBAME_GAESHI_READY"),t.tryConsumeResource("TENDO")};Ut("TENKA_GOKEN",30,{startOnHotbar:!1,replaceIf:Qr,baseCastTime:1.3,basePotency:300,falloff:0,applicationDelay:.62,validateAttempt:lO.condition,onConfirm:Uf(1)});Ut("TENDO_GOKEN",100,{startOnHotbar:!1,replaceIf:Qr,baseCastTime:1.3,basePotency:410,falloff:0,applicationDelay:.36,validateAttempt:sO.condition,onConfirm:Uf(2)});Ut("MIDARE_SETSUGEKKA",30,{startOnHotbar:!1,replaceIf:Qr,baseCastTime:1.3,basePotency:[["NEVER",620],["WAY_OF_THE_SAMURAI_III",640]],applicationDelay:.62,jobPotencyModifiers:e=>[X.AutoCrit],validateAttempt:rO.condition,onConfirm:Uf(3)});Ut("TENDO_SETSUGEKKA",100,{startOnHotbar:!1,replaceIf:Qr,baseCastTime:1.3,basePotency:1100,applicationDelay:1.03,jobPotencyModifiers:e=>[X.AutoCrit],validateAttempt:cO.condition,onConfirm:Uf(4)});const RR={newSkill:"KAESHI_GOKEN",condition:e=>e.hasResourceExactly("KAESHI_TRACKER",1)},TR={newSkill:"TENDO_KAESHI_GOKEN",condition:e=>e.hasResourceExactly("KAESHI_TRACKER",2)},SR={newSkill:"KAESHI_SETSUGEKKA",condition:e=>e.hasResourceExactly("KAESHI_TRACKER",3)},IR={newSkill:"TENDO_KAESHI_SETSUGEKKA",condition:e=>e.hasResourceExactly("KAESHI_TRACKER",4)},Du=[RR,TR,SR,IR];Ut("TSUBAME_GAESHI",74,{replaceIf:Du,basePotency:0,applicationDelay:0,validateAttempt:e=>!1});const Pf=e=>{e.tryConsumeResource("KAESHI_TRACKER",!0),e.tryConsumeResource("TSUBAME_GAESHI_READY"),e.tryConsumeResource("KAESHI_OGI_READY")};Ut("KAESHI_GOKEN",74,{startOnHotbar:!1,replaceIf:Du,basePotency:300,falloff:0,applicationDelay:.62,validateAttempt:RR.condition,onConfirm:Pf,highlightIf:RR.condition});Ut("TENDO_KAESHI_GOKEN",100,{startOnHotbar:!1,replaceIf:Du,basePotency:410,falloff:0,applicationDelay:.36,validateAttempt:TR.condition,onConfirm:Pf,highlightIf:TR.condition});Ut("KAESHI_SETSUGEKKA",74,{startOnHotbar:!1,replaceIf:Du,basePotency:[["NEVER",620],["WAY_OF_THE_SAMURAI_III",640]],applicationDelay:.62,jobPotencyModifiers:e=>[X.AutoCrit],validateAttempt:SR.condition,onConfirm:Pf,highlightIf:SR.condition});Ut("TENDO_KAESHI_SETSUGEKKA",74,{startOnHotbar:!1,replaceIf:Du,basePotency:1100,applicationDelay:1.03,jobPotencyModifiers:e=>[X.AutoCrit],validateAttempt:IR.condition,onConfirm:Pf,highlightIf:IR.condition});Ut("OGI_NAMIKIRI",90,{replaceIf:[{newSkill:"KAESHI_NAMIKIRI",condition:e=>e.hasResourceAvailable("KAESHI_OGI_READY")}],falloff:.4,applicationDelay:.49,basePotency:[["NEVER",860],["WAY_OF_THE_SAMURAI_III",1e3]],baseCastTime:1.3,jobPotencyModifiers:e=>[X.AutoCrit],validateAttempt:e=>e.hasResourceAvailable("OGI_READY"),onConfirm:e=>{e.tryConsumeResource("OGI_READY"),e.gainMeditation(),e.gainStatus("KAESHI_OGI_READY")},highlightIf:e=>e.hasResourceAvailable("OGI_READY")});Ut("KAESHI_NAMIKIRI",90,{startOnHotbar:!1,falloff:.4,applicationDelay:.49,basePotency:[["NEVER",860],["WAY_OF_THE_SAMURAI_III",1e3]],jobPotencyModifiers:e=>[X.AutoCrit],validateAttempt:e=>e.hasResourceAvailable("KAESHI_OGI_READY"),onConfirm:e=>e.tryConsumeResource("KAESHI_OGI_READY"),highlightIf:e=>e.hasResourceAvailable("KAESHI_OGI_READY")});Wa("MEIKYO_SHISUI",50,"cd_MEIKYO_SHISUI",{cooldown:55,maxCharges:2,onConfirm:e=>{e.gainStatus("MEIKYO_SHISUI",3),e.hasTraitUnlocked("ENHANCED_MEIKYO_SHISUI_II")&&e.gainStatus("TENDO")}});Wa("IKISHOTEN",68,"cd_IKISHOTEN",{replaceIf:[{newSkill:"ZANSHIN",condition:e=>e.hasResourceAvailable("ZANSHIN_READY")}],cooldown:120,requiresCombat:!0,onConfirm:e=>{e.gainKenki(50),e.hasTraitUnlocked("ENHANCED_IKISHOTEN")&&e.gainStatus("OGI_READY"),e.hasTraitUnlocked("ENHANCED_IKISHOTEN_II")&&e.gainStatus("ZANSHIN_READY")}});Wa("HISSATSU_SHINTEN",52,"cd_SHINTEN",{cooldown:1,applicationDelay:.62,potency:250,validateAttempt:e=>e.resources.get("KENKI").available(25),onConfirm:e=>e.resources.get("KENKI").consume(25),highlightIf:e=>e.resources.get("KENKI").available(25)});Wa("HISSATSU_KYUTEN",62,"cd_KYUTEN",{cooldown:1,applicationDelay:.62,potency:100,falloff:0,validateAttempt:e=>e.resources.get("KENKI").available(25),onConfirm:e=>e.resources.get("KENKI").consume(25),highlightIf:e=>e.resources.get("KENKI").available(25)});Wa("HISSATSU_GYOTEN",54,"cd_GYOTEN",{cooldown:5,applicationDelay:.49,animationLock:Vt,potency:100,validateAttempt:e=>e.resources.get("KENKI").available(10),onConfirm:e=>e.resources.get("KENKI").consume(10),highlightIf:e=>e.resources.get("KENKI").available(10)});Wa("HISSATSU_YATEN",56,"cd_YATEN",{cooldown:10,applicationDelay:.45,animationLock:Vt,potency:100,validateAttempt:e=>e.resources.get("KENKI").available(10),onConfirm:e=>{e.resources.get("KENKI").consume(10),e.gainStatus("ENHANCED_ENPI")},highlightIf:e=>e.resources.get("KENKI").available(10)});Wa("HISSATSU_SENEI",72,"cd_SENEI_GUREN",{cooldown:60,applicationDelay:.67,potency:800,validateAttempt:e=>e.resources.get("KENKI").available(25),onConfirm:e=>e.resources.get("KENKI").consume(25),highlightIf:e=>e.resources.get("KENKI").available(25)});Wa("HISSATSU_GUREN",70,"cd_SENEI_GUREN",{cooldown:60,applicationDelay:.62,potency:400,falloff:0,validateAttempt:e=>e.resources.get("KENKI").available(25),onConfirm:e=>e.resources.get("KENKI").consume(25),highlightIf:e=>e.resources.get("KENKI").available(25)});Wa("HAGAKURE",68,"cd_HAGAKURE",{cooldown:5,validateAttempt:e=>e.countSen()>0,onConfirm:e=>{e.gainKenki(e.countSen()*10),e.consumeAllSen()},highlightIf:e=>e.countSen()===3});Wa("SHOHA",80,"cd_SHOHA",{cooldown:15,potency:[["NEVER",560],["WAY_OF_THE_SAMURAI_III",640]],falloff:.4,applicationDelay:.58,validateAttempt:e=>e.resources.get("MEDITATION").available(3),onConfirm:e=>e.tryConsumeResource("MEDITATION",!0),highlightIf:e=>e.resources.get("MEDITATION").available(3)});je("SAM","THIRD_EYE",6,"cd_THIRD_EYE",{rscType:"THIRD_EYE",autoUpgrade:{trait:"THIRD_EYE_MASTERY",otherSkill:"TENGENTSU"},replaceIf:[{newSkill:"THIRD_EYE_POP",condition:e=>e.hasResourceAvailable("THIRD_EYE")}],cooldown:15,applicationDelay:0});je("SAM","TENGENTSU",82,"cd_THIRD_EYE",{rscType:"TENGENTSU",autoDowngrade:{trait:"THIRD_EYE_MASTERY",otherSkill:"THIRD_EYE"},replaceIf:[{newSkill:"TENGENTSU_POP",condition:e=>e.hasResourceAvailable("TENGENTSU")}],cooldown:15,applicationDelay:0});Wa("THIRD_EYE_POP",6,"cd_THIRD_EYE_POP",{startOnHotbar:!1,applicationDelay:0,animationLock:ma,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("THIRD_EYE"),onConfirm:e=>{e.tryConsumeResource("THIRD_EYE"),e.gainKenki(10)},highlightIf:e=>e.hasResourceAvailable("THIRD_EYE")});Wa("TENGENTSU_POP",82,"cd_THIRD_EYE_POP",{startOnHotbar:!1,applicationDelay:0,animationLock:ma,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("TENGENTSU"),onConfirm:e=>{e.tryConsumeResource("TENGENTSU"),e.gainStatus("TENGENTSUS_FORESIGHT"),e.gainKenki(10)},highlightIf:e=>e.hasResourceAvailable("TENGENTSU")});Wa("ZANSHIN",96,"cd_ZANSHIN",{startOnHotbar:!1,cooldown:1,falloff:.4,applicationDelay:1.03,potency:940,validateAttempt:e=>e.hasResourceAvailable("ZANSHIN_READY")&&e.resources.get("KENKI").available(50),onConfirm:e=>{e.resources.get("KENKI").consume(50),e.tryConsumeResource("ZANSHIN_READY")},highlightIf:e=>e.hasResourceAvailable("ZANSHIN_READY")});je("SAM","MEDITATE",60,"cd_MEDITATE",{rscType:"MEDITATE",cooldown:60,applicationDelay:.62,validateAttempt:e=>e.cooldowns.get("cd_GCD").stacksAvailable()>0,onConfirm:e=>{const t=e.config.adjustedSksGCD(2.5,e.getFukaModifier());e.cooldowns.get("cd_GCD").useStackWithRecast(e.config.getAfterTaxGCD(t))},onApplication:e=>e.startMeditateTimer()});Object.keys(ZR).forEach(e=>jt(e,`SMN/${we[e].name}.png`));class QG extends Wt{jobSpecificSelfTargetedBuffViewProps(){const t=["AETHERFLOW","IFRITS_FAVOR","TITANS_FAVOR","GARUDAS_FAVOR","CRIMSON_STRIKE_READY"];return[...Object.keys(ZR).map(a=>t.includes(a)?this.makeCommonTimerless(a):this.makeCommonTimer(a))]}jobSpecificResourceViewProps(t){const a=this.state.resources,o=Math.max(a.timeTillReady("FIRE_ATTUNEMENT"),a.timeTillReady("EARTH_ATTUNEMENT"),a.timeTillReady("WIND_ATTUNEMENT")),s=a.get("ACTIVE_DEMI").availableAmount(),c=a.timeTillReady("ACTIVE_DEMI");a.get("RUBY_ARCANUM").available(1),a.get("TOPAZ_ARCANUM").available(1),a.get("EMERALD_ARCANUM").available(1);const d=s===_R.BAHAMUT?t.smn.bahamut:s===_R.PHOENIX?t.smn.phoenix:t.smn.solar,h=a.get("FIRE_ATTUNEMENT").available(1)?t.smn.ruby:a.get("EARTH_ATTUNEMENT").available(1)?t.smn.topaz:t.smn.emerald,f=this.state.cooldowns.get("cd_SUMMON_LOCKOUT"),m=f.timeTillNextStackAvailable();return[{kind:"counter",name:g({en:"aetherflow",zh:""}),color:t.smn.aetherflow,currentStacks:a.get("AETHERFLOW").availableAmount(),maxStacks:2},{kind:"bar",name:g({en:"demi summon",zh:""}),color:d,progress:c===0?0:1-c/15,valueString:c.toFixed(3)},{kind:"attunement",aetherName:g({en:"aether",zh:""}),attunementName:g({en:"attunement",zh:""}),ruby:a.get("RUBY_ARCANUM").available(1),topaz:a.get("TOPAZ_ARCANUM").available(1),emerald:a.get("EMERALD_ARCANUM").available(1),attunementCount:Math.max(a.get("FIRE_ATTUNEMENT").availableAmount(),a.get("EARTH_ATTUNEMENT").availableAmount(),a.get("WIND_ATTUNEMENT").availableAmount()),timeRemaining:o,rubyColor:t.smn.ruby,topazColor:t.smn.topaz,emeraldColor:t.smn.emerald},{kind:"bar",name:g({en:"summon lock",zh:""}),color:h,progress:m>0?1-f.timeTillNextStackAvailable()/f.currentStackCd():0,valueString:m.toFixed(3)}]}}const Zt=(e,t,a)=>{Ve("SMN",e,t,a??{})};var _R=(e=>(e[e.NONE=0]="NONE",e[e.SOLAR=1]="SOLAR",e[e.BAHAMUT=2]="BAHAMUT",e[e.PHOENIX=3]="PHOENIX",e))(_R||{});const uO=15;Zt("AETHERFLOW",2,{warnOnOvercap:!0});Zt("RUBY_ARCANUM",1);Zt("TOPAZ_ARCANUM",1);Zt("EMERALD_ARCANUM",1);Zt("FIRE_ATTUNEMENT",2,{timeout:30});Zt("EARTH_ATTUNEMENT",4,{timeout:30});Zt("WIND_ATTUNEMENT",4,{timeout:30});Zt("CRIMSON_STRIKE_READY",1);Zt("EVERLASTING_FLIGHT",1,{timeout:21});Zt("FURTHER_RUIN",1,{timeout:60});Zt("GARUDAS_FAVOR",1);Zt("IFRITS_FAVOR",1);Zt("TITANS_FAVOR",1);Zt("RADIANT_AEGIS",1,{timeout:30});Zt("REFULGENT_LUX",1,{timeout:30});Zt("REKINDLE",1,{timeout:30});Zt("UNDYING_FLAME",1,{timeout:15});Zt("RUBYS_GLIMMER",1,{timeout:30,warnOnTimeout:!0});Zt("SEARING_LIGHT",1,{timeout:20});Zt("SLIPSTREAM",1,{timeout:15});Zt("ACTIVE_DEMI",3,{timeout:uO});Zt("NEXT_DEMI_CYCLE",3);Zt("DEMI_AUTO",4);const AN=3.163,JG=new Map([["SUMMON_IFRIT_II",2.1],["SUMMON_GARUDA_II",2.1],["SUMMON_TITAN_II",2.1],["SUMMON_IFRIT",2.46],["SUMMON_GARUDA",2.1],["SUMMON_TITAN",2.46]]),RN=new Map([["SUMMON_IFRIT_II",1.96],["SUMMON_GARUDA_II",1.29],["SUMMON_TITAN_II",1.96],["SUMMON_IFRIT",.936],["SUMMON_GARUDA",.8],["SUMMON_TITAN",.8],["ENKINDLE_BAHAMUT",.894],["ENKINDLE_PHOENIX",1.026],["ENKINDLE_SOLAR_BAHAMUT",.846]]),$G=new Map([["SUMMON_IFRIT_II",6.29],["SUMMON_GARUDA_II",6.29],["SUMMON_TITAN_II",6.29],["SUMMON_IFRIT",4.6],["SUMMON_GARUDA",4.3],["SUMMON_TITAN",4.6]]);class eB extends Xt{constructor(t){super(t);const a=this.hasTraitUnlocked("ENHANCED_SWIFTCAST")?40:60;this.cooldowns.set(new He("cd_SWIFTCAST",a,1,1));const o=this.hasTraitUnlocked("ENHANCED_RADIANT_AEGIS")?2:1;this.cooldowns.set(new He("cd_RADIANT_AEGIS",60,o,o)),this.cooldowns.set(new He("cd_DEMI_SUMMON",this.config.adjustedGCD(60),1,1)),this.cooldowns.set(new He("cd_SUMMON_LOCKOUT",5,1,1)),this.registerRecurringEvents([{groupedEffects:[{effectName:"SLIPSTREAM",appliedBy:["SLIPSTREAM"],isGroundTargeted:!0}]}],["SUMMON_BAHAMUT","SUMMON_PHOENIX","SUMMON_SOLAR_BAHAMUT"])}get statusPropsGenerator(){return new QG(this)}jobSpecificAddDamageBuffCovers(t,a){this.hasResourceAvailable("SEARING_LIGHT")&&t.addBuff(k.SearingLight)}get activeDemi(){return this.resources.get("ACTIVE_DEMI").availableAmount()}get nextDemi(){const t=this.resources.get("NEXT_DEMI_CYCLE").availableAmount();return this.hasTraitUnlocked("ENHANCED_SUMMON_BAHAMUT_II")?t===1?2:t===3?3:1:this.hasTraitUnlocked("ENHANCED_SUMMON_BAHAMUT")?t%2===0?2:3:2}get hasActivePet(){return this.activeDemi!==0||this.cooldowns.get("cd_SUMMON_LOCKOUT").stacksAvailable()===0}snapSearingAndTincture(t,a){const o=a.modifiers;this.hasResourceAvailable("SEARING_LIGHT")&&o.push(X.SearingLight),this.hasResourceAvailable("TINCTURE")&&(o.push(X.Tincture),t.addBuff(k.Tincture))}makePetPotency(t,a,o,s,c){const d=new $t({config:this.config,sourceTime:o,sourceSkill:a,aspect:Ie.Other,basePotency:s,snapshotTime:this.getDisplayTime(),description:"",targetCount:t,falloff:c}),h=[X.SmnPet];return d.modifiers=h,d}handleDemiAuto(){if(!this.hasResourceAvailable("DEMI_AUTO"))return;const t=4-this.resources.get("DEMI_AUTO").availableAmount();if(t<0)return;const a=this.resources.get("DEMI_AUTO").node;if(a!==void 0){const o=a.getDotPotencies("DEMI_AUTO")[t];this.snapSearingAndTincture(a,o),o.snapshotTime=this.getDisplayTime(),p.resolvePotency(o)}this.tryConsumeResource("DEMI_AUTO"),this.addEvent(new Ce("demi auto",AN,()=>this.handleDemiAuto()))}startPetAutos(t,a){const o=this.resources.get("DEMI_AUTO"),s=this.activeDemi===1?160:150;o.gain(4),o.node=t;for(let c=0;c<4;c++)t.addDoTPotency(this.makePetPotency(1,a,this.getDisplayTime(),s),"DEMI_AUTO");this.addEvent(new Ce("first demi auto",AN,()=>this.handleDemiAuto()))}queuePetDamageEvent(t,a,o,s,c,d){const h=this.getDisplayTime();this.addEvent(new Ce(o+" pet snapshot",c,()=>{const f=this.makePetPotency(t.targetCount,o,h,s,.6);t.addPotency(f),this.snapSearingAndTincture(t,f),this.jobSpecificAddDamageBuffCovers(t,dl("SMN",a)),this.addEvent(new Ce(o+" application",d,()=>p.resolvePotency(f)))}))}queueEnkindle(t,a){let o,s;a==="ENKINDLE_BAHAMUT"?(o="AKH_MORN",s=1300):a==="ENKINDLE_PHOENIX"?(o="REVELATION",s=1300):(o="EXODUS",s=1500);const c=this.resources.get("ACTIVE_DEMI").pendingChange;console.assert(c),c&&c.timeTillEvent<2.5&&p.reportWarning({kind:"custom",en:"enkindle used near end of demi window may ghost"}),this.queuePetDamageEvent(t,a,o,s,0,RN.get(a))}queuePrimalSummon(t,a){let o=600;this.hasTraitUnlocked("ARCANE_MASTERY")?o=800:this.hasTraitUnlocked("ENKINDLE_II")&&(o=750);let s;a.includes("IFRIT")?s="INFERNO":a.includes("TITAN")?s="EARTHEN_FURY":s="AERIAL_BLAST",this.queuePetDamageEvent(t,a,s,o,JG.get(a),RN.get(a));const c=$G.get(a);this.cooldowns.get("cd_SUMMON_LOCKOUT").useStackWithRecast(c)}}const et=(e,t,a)=>{const o=a.baseCastTime??0,s=a.baseRecastTime??2.5,c=o>0?Me(d=>d.tryConsumeResource("SWIFTCAST"),a.onConfirm):a.onConfirm;return Ka("SMN",e,t,{...a,castTime:d=>d.config.adjustedCastTime(o),recastTime:d=>s<=1.5?s:d.config.adjustedGCD(s),potency:a.basePotency,jobPotencyModifiers:d=>{const h=[];return a.isPetAttack&&h.push(X.SmnPet),d.hasResourceAvailable("SEARING_LIGHT")&&h.push(X.SearingLight),h},isInstantFn:d=>d.hasResourceAvailable("SWIFTCAST")||o===0,onConfirm:c})},eo=(e,t,a,o)=>at("SMN",e,t,a,{...o,jobPotencyModifiers:s=>s.hasResourceAvailable("SEARING_LIGHT")?[X.SearingLight]:[]}),ms=[{newSkill:"RUIN_III",condition:e=>e.activeDemi===0},{newSkill:"ASTRAL_IMPULSE",condition:e=>e.activeDemi===2},{newSkill:"FOUNTAIN_OF_FIRE",condition:e=>e.activeDemi===3},{newSkill:"UMBRAL_IMPULSE",condition:e=>e.activeDemi===1}];et("RUIN_III",54,{basePotency:[["NEVER",300],["RUIN_MASTERY_IV",310],["ARCANE_MASTERY",400]],baseCastTime:1.5,manaCost:300,replaceIf:ms,applicationDelay:.8});et("ASTRAL_IMPULSE",58,{basePotency:[["NEVER",440],["ARCANE_MASTERY",500]],manaCost:300,replaceIf:ms,applicationDelay:.67,validateAttempt:ms[1].condition,startOnHotbar:!1});et("FOUNTAIN_OF_FIRE",80,{basePotency:[["NEVER",540],["ARCANE_MASTERY",580]],manaCost:300,replaceIf:ms,applicationDelay:1.07,validateAttempt:ms[2].condition,startOnHotbar:!1});et("UMBRAL_IMPULSE",100,{basePotency:620,manaCost:300,replaceIf:ms,applicationDelay:.8,validateAttempt:ms[3].condition,startOnHotbar:!1});const Tl=[{newSkill:"OUTBURST",condition:e=>e.activeDemi===0},{newSkill:"ASTRAL_FLARE",condition:e=>e.activeDemi===2},{newSkill:"BRAND_OF_PURGATORY",condition:e=>e.activeDemi===3},{newSkill:"UMBRAL_FLARE",condition:e=>e.activeDemi===1}];et("OUTBURST",26,{autoUpgrade:{trait:"OUTBURST_MASTERY",otherSkill:"TRI_DISASTER"},basePotency:100,baseCastTime:1.5,manaCost:300,replaceIf:Tl,applicationDelay:.8,falloff:0});et("TRI_DISASTER",74,{autoDowngrade:{trait:"OUTBURST_MASTERY",otherSkill:"OUTBURST"},basePotency:120,baseCastTime:1.5,manaCost:300,replaceIf:Tl,applicationDelay:.8,falloff:0});et("ASTRAL_FLARE",58,{basePotency:180,manaCost:300,replaceIf:Tl,applicationDelay:.54,validateAttempt:Tl[1].condition,falloff:0,startOnHotbar:!1});et("BRAND_OF_PURGATORY",80,{basePotency:240,manaCost:300,replaceIf:Tl,applicationDelay:.8,validateAttempt:Tl[2].condition,falloff:0,startOnHotbar:!1});et("UMBRAL_FLARE",100,{basePotency:280,manaCost:300,replaceIf:Tl,applicationDelay:.53,validateAttempt:Tl[2].condition,falloff:0,startOnHotbar:!1});const tB=[{newSkill:"RUBY_RUIN_III",condition:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT")},{newSkill:"TOPAZ_RUIN_III",condition:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT")},{newSkill:"EMERALD_RUIN_III",condition:e=>e.hasResourceAvailable("WIND_ATTUNEMENT")}];et("GEMSHINE",6,{replaceIf:tB,applicationDelay:0,validateAttempt:e=>!1});et("RUBY_RUIN_III",54,{autoUpgrade:{trait:"RUIN_MASTERY_III",otherSkill:"RUBY_RITE"},basePotency:410,baseCastTime:2.8,baseRecastTime:3,applicationDelay:.62,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("FIRE_ATTUNEMENT"),startOnHotbar:!1});et("TOPAZ_RUIN_III",54,{autoUpgrade:{trait:"RUIN_MASTERY_III",otherSkill:"TOPAZ_RITE"},basePotency:300,applicationDelay:.62,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("EARTH_ATTUNEMENT"),startOnHotbar:!1});et("EMERALD_RUIN_III",54,{autoUpgrade:{trait:"RUIN_MASTERY_III",otherSkill:"EMERALD_RITE"},baseRecastTime:1.5,basePotency:180,applicationDelay:.62,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("WIND_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("WIND_ATTUNEMENT"),startOnHotbar:!1});et("RUBY_RITE",72,{autoDowngrade:{trait:"RUIN_MASTERY_III",otherSkill:"RUBY_RITE"},basePotency:[["NEVER",480],["RUIN_MASTERY_IV",510],["ARCANE_MASTERY",580]],baseCastTime:2.8,baseRecastTime:3,applicationDelay:.62,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("FIRE_ATTUNEMENT"),startOnHotbar:!1});et("TOPAZ_RITE",72,{autoDowngrade:{trait:"RUIN_MASTERY_III",otherSkill:"TOPAZ_RUIN_III"},basePotency:[["NEVER",320],["RUIN_MASTERY_IV",330],["ARCANE_MASTERY",340]],applicationDelay:.62,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT"),onConfirm:e=>{e.tryConsumeResource("EARTH_ATTUNEMENT"),e.gainStatus("TITANS_FAVOR")},startOnHotbar:!1});et("EMERALD_RITE",72,{autoDowngrade:{trait:"RUIN_MASTERY_III",otherSkill:"EMERALD_RUIN_III"},baseRecastTime:1.5,basePotency:[["NEVER",220],["RUIN_MASTERY_IV",230],["ARCANE_MASTERY",280]],applicationDelay:.62,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("WIND_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("WIND_ATTUNEMENT"),startOnHotbar:!1});const nB=[{newSkill:"RUBY_OUTBURST",condition:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT")},{newSkill:"TOPAZ_OUTBURST",condition:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT")},{newSkill:"EMERALD_OUTBURST",condition:e=>e.hasResourceAvailable("WIND_ATTUNEMENT")}];et("PRECIOUS_BRILLIANCE",26,{replaceIf:nB,applicationDelay:0,validateAttempt:e=>!1});et("RUBY_OUTBURST",26,{autoUpgrade:{trait:"OUTBURST_MASTERY",otherSkill:"RUBY_DISASTER"},basePotency:160,baseCastTime:2.8,baseRecastTime:3,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("FIRE_ATTUNEMENT"),falloff:0,startOnHotbar:!1});et("TOPAZ_OUTBURST",26,{autoUpgrade:{trait:"OUTBURST_MASTERY",otherSkill:"TOPAZ_DISASTER"},basePotency:110,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("EARTH_ATTUNEMENT"),falloff:0,startOnHotbar:!1});et("EMERALD_OUTBURST",26,{autoUpgrade:{trait:"OUTBURST_MASTERY",otherSkill:"EMERALD_DISASTER"},baseRecastTime:1.5,basePotency:70,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("WIND_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("WIND_ATTUNEMENT"),falloff:0,startOnHotbar:!1});et("RUBY_DISASTER",74,{autoDowngrade:{trait:"OUTBURST_MASTERY",otherSkill:"RUBY_OUTBURST"},autoUpgrade:{trait:"OUTBURST_MASTERY_II",otherSkill:"RUBY_CATASTROPHE"},basePotency:190,baseCastTime:2.8,baseRecastTime:3,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("FIRE_ATTUNEMENT"),falloff:0,startOnHotbar:!1});et("TOPAZ_DISASTER",74,{autoDowngrade:{trait:"OUTBURST_MASTERY",otherSkill:"TOPAZ_OUTBURST"},autoUpgrade:{trait:"OUTBURST_MASTERY_II",otherSkill:"TOPAZ_CATASTROPHE"},basePotency:130,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("EARTH_ATTUNEMENT"),falloff:0,startOnHotbar:!1});et("EMERALD_DISASTER",74,{autoDowngrade:{trait:"OUTBURST_MASTERY",otherSkill:"EMERALD_OUTBURST"},autoUpgrade:{trait:"OUTBURST_MASTERY_II",otherSkill:"EMERALD_CATASTROPHE"},baseRecastTime:1.5,basePotency:90,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("WIND_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("WIND_ATTUNEMENT"),falloff:0,startOnHotbar:!1});et("RUBY_CATASTROPHE",82,{autoDowngrade:{trait:"OUTBURST_MASTERY_II",otherSkill:"RUBY_DISASTER"},basePotency:210,baseCastTime:2.8,baseRecastTime:3,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("FIRE_ATTUNEMENT"),falloff:0,startOnHotbar:!1});et("TOPAZ_CATASTROPHE",82,{autoDowngrade:{trait:"OUTBURST_MASTERY_II",otherSkill:"TOPAZ_DISASTER"},basePotency:140,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT"),onConfirm:e=>{e.tryConsumeResource("EARTH_ATTUNEMENT"),e.gainStatus("TITANS_FAVOR")},falloff:0,startOnHotbar:!1});et("EMERALD_CATASTROPHE",82,{autoDowngrade:{trait:"OUTBURST_MASTERY_II",otherSkill:"EMERALD_DISASTER"},baseRecastTime:1.5,basePotency:100,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("WIND_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("WIND_ATTUNEMENT"),falloff:0,startOnHotbar:!1});const aB=[{newSkill:"SUMMON_BAHAMUT",condition:e=>e.nextDemi===2},{newSkill:"SUMMON_PHOENIX",condition:e=>e.nextDemi===3},{newSkill:"SUMMON_SOLAR_BAHAMUT",condition:e=>e.nextDemi===1}],iB={cdName:"cd_DEMI_SUMMON",cooldown:60,maxCharges:1};[{name:"SUMMON_BAHAMUT",autoName:"WYRMWAVE",level:70,activeValue:2},{name:"SUMMON_PHOENIX",autoName:"SCARLET_FLAME",level:80,activeValue:3},{name:"SUMMON_SOLAR_BAHAMUT",autoName:"LUXWAVE",level:100,activeValue:1}].forEach((e,t)=>et(e.name,e.level,{applicationDelay:.76,replaceIf:aB,secondaryCooldown:iB,validateAttempt:a=>!a.hasActivePet&&a.nextDemi===e.activeValue,drawsAggro:!0,onConfirm:(a,o)=>{a.gainStatus("ACTIVE_DEMI",e.activeValue),a.startPetAutos(o,e.autoName),["RUBY_ARCANUM","TOPAZ_ARCANUM","EMERALD_ARCANUM"].forEach(s=>a.gainStatus(s,1)),["FIRE_ATTUNEMENT","EARTH_ATTUNEMENT","WIND_ATTUNEMENT"].forEach(s=>a.tryConsumeResource(s,!0)),a.tryConsumeResource("IFRITS_FAVOR"),a.tryConsumeResource("CRIMSON_STRIKE_READY"),a.tryConsumeResource("GARUDAS_FAVOR"),a.tryConsumeResource("TITANS_FAVOR"),e.name==="SUMMON_SOLAR_BAHAMUT"&&a.gainStatus("REFULGENT_LUX"),a.addEvent(new Ce("update next demi",uO,()=>{a.resources.get("NEXT_DEMI_CYCLE").gainWrapping(1)}))},onApplication:a=>{a.isInCombat()||a.resources.get("IN_COMBAT").gain(1)},startOnHotbar:t===0}));const ef=e=>!e.hasActivePet&&e.hasResourceAvailable("RUBY_ARCANUM"),tf=e=>!e.hasActivePet&&e.hasResourceAvailable("TOPAZ_ARCANUM"),nf=e=>!e.hasActivePet&&e.hasResourceAvailable("EMERALD_ARCANUM"),dO=e=>(t,a)=>{t.tryConsumeResource("RUBY_ARCANUM"),t.gainStatus("FIRE_ATTUNEMENT",2),t.queuePrimalSummon(a,e),t.tryConsumeResource("EARTH_ATTUNEMENT",!0),t.tryConsumeResource("WIND_ATTUNEMENT",!0),t.tryConsumeResource("TITANS_FAVOR"),t.tryConsumeResource("GARUDAS_FAVOR")},hO=e=>(t,a)=>{t.tryConsumeResource("TOPAZ_ARCANUM"),t.gainStatus("EARTH_ATTUNEMENT",4),t.queuePrimalSummon(a,e),t.tryConsumeResource("FIRE_ATTUNEMENT",!0),t.tryConsumeResource("WIND_ATTUNEMENT",!0),t.tryConsumeResource("IFRITS_FAVOR"),t.tryConsumeResource("CRIMSON_STRIKE_READY"),t.tryConsumeResource("GARUDAS_FAVOR")},fO=e=>(t,a)=>{t.tryConsumeResource("EMERALD_ARCANUM"),t.gainStatus("WIND_ATTUNEMENT",4),t.queuePrimalSummon(a,e),t.tryConsumeResource("FIRE_ATTUNEMENT",!0),t.tryConsumeResource("EARTH_ATTUNEMENT",!0),t.tryConsumeResource("IFRITS_FAVOR"),t.tryConsumeResource("CRIMSON_STRIKE_READY"),t.tryConsumeResource("TITANS_FAVOR")},Jr=.5;et("SUMMON_IFRIT",30,{autoUpgrade:{trait:"ENKINDLE_II",otherSkill:"SUMMON_IFRIT_II"},applicationDelay:0,highlightIf:ef,validateAttempt:ef,onConfirm:dO("SUMMON_IFRIT"),falloff:Jr});et("SUMMON_TITAN",35,{autoUpgrade:{trait:"ENKINDLE_II",otherSkill:"SUMMON_TITAN_II"},applicationDelay:0,highlightIf:tf,validateAttempt:tf,onConfirm:hO("SUMMON_TITAN"),falloff:Jr});et("SUMMON_GARUDA",45,{autoUpgrade:{trait:"ENKINDLE_II",otherSkill:"SUMMON_GARUDA_II"},applicationDelay:0,highlightIf:nf,validateAttempt:nf,onConfirm:fO("SUMMON_GARUDA"),falloff:Jr});et("SUMMON_IFRIT_II",90,{autoDowngrade:{trait:"ENKINDLE_II",otherSkill:"SUMMON_IFRIT"},applicationDelay:0,highlightIf:ef,validateAttempt:ef,onConfirm:Me(e=>e.gainStatus("IFRITS_FAVOR"),dO("SUMMON_IFRIT_II")),falloff:Jr});et("SUMMON_TITAN_II",90,{autoDowngrade:{trait:"ENKINDLE_II",otherSkill:"SUMMON_TITAN"},applicationDelay:0,highlightIf:tf,validateAttempt:tf,onConfirm:hO("SUMMON_TITAN_II"),falloff:Jr});et("SUMMON_GARUDA_II",90,{autoDowngrade:{trait:"ENKINDLE_II",otherSkill:"SUMMON_GARUDA"},applicationDelay:0,highlightIf:nf,validateAttempt:nf,onConfirm:Me(e=>e.gainStatus("GARUDAS_FAVOR"),fO("SUMMON_GARUDA_II")),falloff:Jr});const fa=[{newSkill:"DEATHFLARE",condition:e=>e.activeDemi===2},{newSkill:"REKINDLE",condition:e=>e.activeDemi===3},{newSkill:"SUNFLARE",condition:e=>e.activeDemi===1},{newSkill:"CRIMSON_CYCLONE",condition:e=>e.hasResourceAvailable("IFRITS_FAVOR")},{newSkill:"CRIMSON_STRIKE",condition:e=>e.hasResourceAvailable("CRIMSON_STRIKE_READY")},{newSkill:"MOUNTAIN_BUSTER",condition:e=>e.hasResourceAvailable("TITANS_FAVOR")},{newSkill:"SLIPSTREAM",condition:e=>e.hasResourceAvailable("GARUDAS_FAVOR")}];eo("ASTRAL_FLOW",60,"cd_ASTRAL_FLOW",{applicationDelay:0,cooldown:20,replaceIf:fa,validateAttempt:e=>!1});eo("DEATHFLARE",60,"cd_ASTRAL_FLOW",{potency:500,applicationDelay:.8,cooldown:20,replaceIf:fa,highlightIf:e=>!0,validateAttempt:fa[0].condition,falloff:.5,startOnHotbar:!1});eo("REKINDLE",80,"cd_ASTRAL_FLOW",{applicationDelay:1.03,cooldown:20,replaceIf:fa,highlightIf:e=>!0,validateAttempt:fa[1].condition,onConfirm:e=>e.gainStatus("REKINDLE"),startOnHotbar:!1});eo("SUNFLARE",100,"cd_ASTRAL_FLOW",{potency:800,applicationDelay:.8,cooldown:20,replaceIf:fa,highlightIf:e=>!0,validateAttempt:fa[2].condition,falloff:.5,startOnHotbar:!1});et("CRIMSON_CYCLONE",86,{basePotency:[["NEVER",430],["ARCANE_MASTERY",520]],applicationDelay:.8,replaceIf:fa,highlightIf:e=>!0,validateAttempt:fa[3].condition,onConfirm:e=>{e.tryConsumeResource("IFRITS_FAVOR"),e.gainStatus("CRIMSON_STRIKE_READY")},falloff:.6,startOnHotbar:!1});et("CRIMSON_STRIKE",86,{basePotency:[["NEVER",430],["ARCANE_MASTERY",520]],applicationDelay:.76,replaceIf:fa,highlightIf:e=>!0,validateAttempt:fa[4].condition,onConfirm:e=>e.tryConsumeResource("CRIMSON_STRIKE_READY"),falloff:.6,startOnHotbar:!1});eo("MOUNTAIN_BUSTER",86,"cd_MOUNTAIN_BUSTER",{potency:[["NEVER",150],["ARCANE_MASTERY",160]],cooldown:1,applicationDelay:.76,replaceIf:fa,highlightIf:e=>!0,validateAttempt:fa[5].condition,onConfirm:e=>e.tryConsumeResource("TITANS_FAVOR"),falloff:.6,startOnHotbar:!1});et("SLIPSTREAM",86,{baseCastTime:3,baseRecastTime:3.5,basePotency:[["NEVER",430],["ARCANE_MASTERY",520]],applicationDelay:1.02,replaceIf:fa,highlightIf:e=>!0,validateAttempt:fa[6].condition,onConfirm:(e,t)=>{e.tryConsumeResource("GARUDAS_FAVOR"),e.addDoTPotencies({node:t,effectName:"SLIPSTREAM",skillName:"SLIPSTREAM",tickPotency:30,speedStat:"sps"})},onApplication:(e,t)=>e.applyDoT("SLIPSTREAM",t),falloff:.6,startOnHotbar:!1});const oB=[{newSkill:"ENKINDLE_BAHAMUT",condition:e=>[0,2].includes(e.activeDemi)},{newSkill:"ENKINDLE_PHOENIX",condition:e=>e.activeDemi===3},{newSkill:"ENKINDLE_SOLAR_BAHAMUT",condition:e=>e.activeDemi===1}];[{name:"ENKINDLE_BAHAMUT",level:70,activeValue:2,falloff:.5},{name:"ENKINDLE_PHOENIX",level:80,activeValue:3,falloff:.5},{name:"ENKINDLE_SOLAR_BAHAMUT",level:100,activeValue:1,falloff:.5}].forEach((e,t)=>eo(e.name,e.level,"cd_ENKINDLE",{applicationDelay:0,cooldown:20,replaceIf:oB,validateAttempt:a=>a.activeDemi===e.activeValue,onConfirm:(a,o)=>a.queueEnkindle(o,e.name),startOnHotbar:t===0,falloff:e.falloff}));et("RUIN_IV",62,{basePotency:[["NEVER",430],["ARCANE_MASTERY",520]],manaCost:400,applicationDelay:.8,falloff:.6,highlightIf:e=>e.hasResourceAvailable("FURTHER_RUIN"),validateAttempt:e=>e.hasResourceAvailable("FURTHER_RUIN"),onConfirm:e=>e.tryConsumeResource("FURTHER_RUIN")});[{name:"ENERGY_DRAIN",level:10,potency:200,applicationDelay:1.07},{name:"ENERGY_SIPHON",level:52,potency:100,applicationDelay:1.02,falloff:0}].forEach(e=>eo(e.name,e.level,"cd_ENERGY_DRAIN",{...e,cooldown:60,onConfirm:t=>{t.gainStatus("AETHERFLOW",2),t.gainStatus("FURTHER_RUIN")}}));[{name:"FESTER",level:10,potency:340,applicationDelay:.71,autoUpgrade:{trait:"ENHANCED_FESTER",otherSkill:"NECROTIZE"}},{name:"PAINFLARE",level:40,potency:150,applicationDelay:.44,falloff:0},{name:"NECROTIZE",level:92,potency:460,applicationDelay:.71,autoDowngrade:{trait:"ENHANCED_FESTER",otherSkill:"FESTER"}}].forEach(e=>eo(e.name,e.level,"cd_AETHERFLOW",{...e,cooldown:1,validateAttempt:t=>t.hasResourceAvailable("AETHERFLOW"),onConfirm:t=>t.tryConsumeResource("AETHERFLOW")}));je("SMN","SEARING_LIGHT",66,"cd_SEARING_LIGHT",{rscType:"SEARING_LIGHT",applicationDelay:0,cooldown:120,onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_SEARING_LIGHT")&&e.gainStatus("RUBYS_GLIMMER")},replaceIf:[{newSkill:"SEARING_FLASH",condition:e=>e.hasResourceAvailable("RUBYS_GLIMMER")}]});eo("SEARING_FLASH",96,"cd_SEARING_FLASH",{potency:600,applicationDelay:.8,cooldown:1,falloff:0,startOnHotbar:!1,highlightIf:e=>e.hasResourceAvailable("RUBYS_GLIMMER"),validateAttempt:e=>e.hasResourceAvailable("RUBYS_GLIMMER"),onConfirm:e=>e.tryConsumeResource("RUBYS_GLIMMER")});je("SMN","RADIANT_AEGIS",2,"cd_RADIANT_AEGIS",{rscType:"RADIANT_AEGIS",applicationDelay:.45,cooldown:60,maxCharges:2,validateAttempt:e=>!e.hasActivePet});eo("LUX_SOLARIS",100,"cd_LUX_SOLARIS",{applicationDelay:.62,cooldown:60,highlightIf:e=>e.hasResourceAvailable("REFULGENT_LUX"),validateAttempt:e=>e.hasResourceAvailable("REFULGENT_LUX"),onConfirm:e=>e.tryConsumeResource("REFULGENT_LUX")});et("RESURRECTION",12,{baseCastTime:8,manaCost:2400,applicationDelay:1.11,basePotency:0});Object.keys(ZN).forEach(e=>jt(e,`SGE/${we[e].name}.png`));const lB=["EUKRASIAN_DOSIS","EUKRASIAN_DOSIS_II","EUKRASIAN_DOSIS_III","EUKRASIAN_DYSKRASIA"],sB=["EUKRASIAN_DIAGNOSIS","KRASIS","TAUROCHOLE","HAIMA","HAIMATINON","KARDION"],rB=["EUKRASIA","SOTERIA","ZOE","PHILOSOPHIA","KARDIA"],cB=["EUKRASIAN_PROGNOSIS","PANHAIMA","PANHAIMATINON","KERACHOLE","KERAKEIA","EUDAIMONIA","HOLOS","HOLOSAKOS"];class uB extends Wt{jobSpecificOtherTargetedBuffViewProps(){return[...lB,...sB].map(t=>t==="KARDION"?this.makeCommonTimerless(t,!1):this.makeCommonTimer(t,!1))}jobSpecificSelfTargetedBuffViewProps(){return[...cB,...rB].map(t=>t==="KARDIA"||t==="EUKRASIA"?this.makeCommonTimerless(t):this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){const a=this.state.resources.get("ADDERSGALL"),o=Ft("SGE","ADDERSGALL").maxTimeout,s=a.availableAmount()<a.maxValue?this.state.resources.timeTillReady("ADDERSGALL"):o,c=this.state.resources.get("ADDERSTING");return[{kind:"counter",name:g({en:we.ADDERSGALL.name,zh:we.ADDERSGALL.label.zh}),color:t.sge.addersgall,currentStacks:a.availableAmount(),maxStacks:a.maxValue},{kind:"bar",name:g({en:we.ADDERSGALL.name+" timer",zh:we.ADDERSGALL.label.zh+""}),color:t.sge.addersgall,progress:1-s/o,valueString:s.toFixed(3)},{kind:"counter",name:g({en:we.ADDERSTING.name,zh:we.ADDERSTING.label.zh}),color:t.sge.addersting,currentStacks:c.availableAmount(),maxStacks:c.maxValue}]}}const Dt=(e,t,a)=>{Ve("SGE",e,t,a??{})};Dt("ADDERSGALL",3,{default:3,timeout:20});Dt("ADDERSTING",3,{default:3});Dt("EUKRASIA",1);Dt("KARDIA",1,{default:1});Dt("KARDION",1,{default:1});Dt("EUKRASIAN_DIAGNOSIS",1,{timeout:30});Dt("DIFFERENTIAL_DIAGNOSIS",1,{timeout:30});Dt("EUKRASIAN_PROGNOSIS",1,{timeout:30});Dt("HAIMA",1,{timeout:15});Dt("HAIMATINON",5,{timeout:15});Dt("PANHAIMA",1,{timeout:15});Dt("PANHAIMATINON",5,{timeout:15});Dt("PHYSIS_II",1,{timeout:15});Dt("AUTOPHYSIS",1,{timeout:15});Dt("PHILOSOPHIA",1,{timeout:20});Dt("EUDAIMONIA",1,{timeout:20});Dt("HOLOS",1,{timeout:20});Dt("HOLOSAKOS",1,{timeout:30});Dt("SOTERIA",4,{timeout:15});Dt("ZOE",1,{timeout:30});Dt("KRASIS",1,{timeout:10});Dt("KERACHOLE",1,{timeout:15});Dt("KERAKEIA",1,{timeout:15});Dt("TAUROCHOLE",1,{timeout:15});Dt("EUKRASIAN_DOSIS",1,{timeout:30});Dt("EUKRASIAN_DOSIS_II",1,{timeout:30});Dt("EUKRASIAN_DOSIS_III",1,{timeout:30});Dt("EUKRASIAN_DYSKRASIA",1,{timeout:30});class dB extends Xt{constructor(t){if(super(t),this.hasTraitUnlocked("ENHANCED_SWIFTCAST")||this.cooldowns.set(new He("cd_SWIFTCAST",60,1,1)),!this.hasTraitUnlocked("ENHANCED_PHYSIS_II")){const a=Wi(this.job).get("AUTOPHYSIS");a.maxTimeout=10,Wi(this.job).set("AUTOPHYSIS",a)}this.hasTraitUnlocked("ENHANCED_SOTERIA")||this.cooldowns.set(new He("cd_SOTERIA",90,1,1)),this.hasTraitUnlocked("ENHANCED_ZOE")||this.cooldowns.set(new He("cd_ZOE",120,1,1)),this.registerRecurringEvents([{reportName:g({en:"Eukrasian DoT"}),groupedEffects:[{effectName:"EUKRASIAN_DOSIS",appliedBy:["EUKRASIAN_DOSIS"]},{effectName:"EUKRASIAN_DOSIS_II",appliedBy:["EUKRASIAN_DOSIS_II"]},{effectName:"EUKRASIAN_DOSIS_III",appliedBy:["EUKRASIAN_DOSIS_III"]},{effectName:"EUKRASIAN_DYSKRASIA",appliedBy:["EUKRASIAN_DYSKRASIA"]}]},{isHealing:!0,groupedEffects:[{effectName:"PHYSIS_II",appliedBy:["PHYSIS_II"]}]},{isHealing:!0,groupedEffects:[{effectName:"KERAKEIA",appliedBy:["KERACHOLE"]}]}])}get statusPropsGenerator(){return new uB(this)}jobSpecificRegisterRecurringEvents(){const t=a=>{const o=Ft("SGE","ADDERSGALL");this.hasResourceAvailable("ADDERSGALL",o.maxValue)||this.resources.get("ADDERSGALL").gain(1),this.resources.addResourceEvent({rscType:"ADDERSGALL",name:"gain addersgall if not currently capped",delay:o.maxTimeout,fnOnRsc:t})};t(this.resources.get("ADDERSGALL"))}jobSpecificAddHealingBuffCovers(t,a){this.hasResourceAvailable("AUTOPHYSIS")&&t.addBuff(k.Autophysis),this.hasResourceAvailable("KRASIS")&&t.addBuff(k.Krasis),a.cdName==="cd_GCD"&&(this.hasResourceAvailable("ZOE")&&t.addBuff(k.Zoe),this.hasResourceAvailable("PHILOSOPHIA")&&t.addBuff(k.Philosophia))}consumeAddersgall(){const t=Ft("SGE","ADDERSGALL");this.hasResourceAvailable("ADDERSGALL",t.maxValue)&&this.resources.get("ADDERSGALL").overrideTimer(this,t.maxTimeout),this.tryConsumeResource("ADDERSGALL"),this.resources.get("MANA").gain(700)}addPepsisPotency(t,a){const o=new $t({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:"PEPSIS",aspect:Ie.Other,basePotency:t==="EUKRASIAN_DIAGNOSIS"?450:350,description:Ke(t),targetCount:t==="EUKRASIAN_DIAGNOSIS"?1:this.partySize,snapshotTime:this.getDisplayTime()});if(this.hasResourceAvailable("TINCTURE")&&o.modifiers.push(X.Tincture),this.hasResourceAvailable("AUTOPHYSIS")&&o.modifiers.push(X.Autophysis),this.hasResourceAvailable("KRASIS")){if(t==="EUKRASIAN_PROGNOSIS"){const s=new $t({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:"PEPSIS",aspect:Ie.Other,basePotency:o.base,description:Ke(t),targetCount:o.targetCount-1,snapshotTime:this.getDisplayTime()});a.addHoTPotency(s,"PEPSIS"),o.targetCount=1,o.description+=", "+Ke("KRASIS")}o.modifiers.push(X.Krasis)}a.addHoTPotency(o,"PEPSIS")}addHaimaExpirationPotency(t,a){if(!(t==="HAIMA"||t==="PANHAIMA"))return;const o=new $t({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t==="HAIMA"?"HAIMA":"PANHAIMA",aspect:Ie.Other,basePotency:t==="HAIMA"?150:100,description:"",targetCount:t==="HAIMA"?1:this.partySize,snapshotTime:this.getDisplayTime()});if(this.hasResourceAvailable("TINCTURE")&&o.modifiers.push(X.Tincture),this.hasResourceAvailable("AUTOPHYSIS")&&o.modifiers.push(X.Autophysis),this.hasResourceAvailable("KRASIS")){if(t==="PANHAIMA"){const s=new $t({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:"PANHAIMA",aspect:Ie.Other,basePotency:100,description:"",targetCount:this.partySize-1,snapshotTime:this.getDisplayTime()});a.addHoTPotency(s,t),o.targetCount=1}o.modifiers.push(X.Krasis)}a.addHoTPotency(o,t)}handleHaimaExpiration(t,a){if(!(t==="HAIMA"||t==="PANHAIMA"))return;const o=t==="HAIMA"?"HAIMATINON":"PANHAIMATINON",s=this.resources.get(o).availableAmount();s<=0||this.addEvent(new Ce(`${we[t].name} expiration heal`,.001,()=>{a.getHotPotencies(t).forEach(c=>{c.description=Ke(t)+" "+g({en:"expiration"})+" ("+s+" "+g({en:"stacks"})+")",t==="PANHAIMA"&&c.modifiers.includes(X.Krasis)&&(c.description+=", "+Ke("KRASIS")),c.base*=s,p.resolveHealingPotency(c)})}))}addHealingMagicPotencyModifiers(t){this.hasResourceAvailable("ZOE")&&t.push(X.Zoe),this.hasResourceAvailable("PHILOSOPHIA")&&t.push(X.Philosophia)}addHealingActionPotencyModifiers(t){this.hasResourceAvailable("AUTOPHYSIS")&&t.push(X.Autophysis),this.hasResourceAvailable("KRASIS")&&t.push(X.Krasis)}}const rn=(e,t,a)=>{const o=h=>h.config.adjustedCastTime(1.5),s=h=>h.config.adjustedGCD(2.5),c=h=>{if(!a.healingPotency)return[];const f=[];return h.addHealingMagicPotencyModifiers(f),h.addHealingActionPotencyModifiers(f),f},d=Me(h=>{a.castTime!==0&&h.tryConsumeResource("SWIFTCAST")},(h,f)=>{if(!(h.hasResourceAvailable("KARDIA")&&f.getInitialPotency()))return;const m=new $t({config:h.config,sourceTime:h.getDisplayTime(),sourceSkill:e,aspect:Ie.Other,basePotency:h.hasTraitUnlocked("ENHANCED_HEALING_MAGIC")?170:130,description:Ke("KARDIA"),targetCount:1,snapshotTime:h.getDisplayTime()});h.hasResourceAvailable("TINCTURE")&&m.modifiers.push(X.Tincture),h.hasResourceAvailable("SOTERIA")&&m.modifiers.push(X.Soteria),h.addHealingActionPotencyModifiers(m.modifiers),f.addHoTPotency(m,"KARDION")},(h,f)=>{if(!h.hasResourceAvailable("EUDAIMONIA"))return;const m=new $t({config:h.config,sourceTime:h.getDisplayTime(),sourceSkill:e,aspect:Ie.Other,basePotency:150,description:Ke("EUDAIMONIA"),targetCount:h.partySize,snapshotTime:h.getDisplayTime()});h.hasResourceAvailable("TINCTURE")&&m.modifiers.push(X.Tincture),h.addHealingActionPotencyModifiers(m.modifiers),f.addHoTPotency(m,"EUDAIMONIA")},h=>{a.healingPotency&&h.tryConsumeResource("ZOE")},a.onConfirm);return Ka("SGE",e,t,{...a,castTime:a.castTime??o,recastTime:a.recastTime??s,isInstantFn:h=>h.hasResourceAvailable("SWIFTCAST"),jobHealingPotencyModifiers:c,onConfirm:d,onApplication:Me((h,f)=>{const m=f.getHotPotencies("KARDION"),R=f.getHotPotencies("EUDAIMONIA");m.length>0&&(p.resolveHealingPotency(m[0]),h.tryConsumeResource("SOTERIA")),R.forEach(T=>{p.resolveHealingPotency(T)})},a.onApplication)})},yn=(e,t,a,o)=>at("SGE",e,t,a,{...o,jobHealingPotencyModifiers:c=>{if(!o.healingPotency)return[];const d=[];return c.addHealingActionPotencyModifiers(d),d}}),GT=(e,t,a,o)=>je("SGE",e,t,a,o);rn("EUKRASIA",30,{castTime:0,recastTime:1,applicationDelay:0,validateAttempt:e=>!e.hasResourceAvailable("EUKRASIA"),onConfirm:e=>e.gainStatus("EUKRASIA")});rn("DOSIS",1,{replaceIf:[{condition:e=>e.hasResourceAvailable("EUKRASIA"),newSkill:"EUKRASIAN_DOSIS"}],autoUpgrade:{trait:"OFFENSIVE_MAGIC_MASTERY",otherSkill:"DOSIS_II"},manaCost:300,potency:300,applicationDelay:.67});rn("DOSIS_II",72,{startOnHotbar:!1,replaceIf:[{condition:e=>e.hasResourceAvailable("EUKRASIA"),newSkill:"EUKRASIAN_DOSIS_II"}],autoUpgrade:{trait:"OFFENSIVE_MAGIC_MASTERY_II",otherSkill:"DOSIS_III"},manaCost:400,potency:320,applicationDelay:.67});const BT=[["NEVER",330],["MAGICK_MASTERY_HEALER",380]];rn("DOSIS_III",82,{startOnHotbar:!1,replaceIf:[{condition:e=>e.hasResourceAvailable("EUKRASIA"),newSkill:"EUKRASIAN_DOSIS_III"}],manaCost:400,potency:BT,applicationDelay:.67});rn("EUKRASIAN_DOSIS",30,{startOnHotbar:!1,manaCost:400,castTime:0,recastTime:1.5,applicationDelay:.76,drawsAggro:!0,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"EUKRASIAN_DOSIS",skillName:"EUKRASIAN_DOSIS",tickPotency:40,speedStat:"sps"}),e.tryConsumeResource("EUKRASIA")},onApplication:(e,t)=>{e.applyDoT("EUKRASIAN_DOSIS",t)}});rn("EUKRASIAN_DOSIS_II",72,{startOnHotbar:!1,manaCost:400,castTime:0,recastTime:1.5,applicationDelay:.76,drawsAggro:!0,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"EUKRASIAN_DOSIS_II",skillName:"EUKRASIAN_DOSIS_II",tickPotency:60,speedStat:"sps"}),e.tryConsumeResource("EUKRASIA")},onApplication:(e,t)=>{e.applyDoT("EUKRASIAN_DOSIS_II",t)}});rn("EUKRASIAN_DOSIS_III",82,{startOnHotbar:!1,manaCost:400,castTime:0,recastTime:1.5,applicationDelay:.76,drawsAggro:!0,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"EUKRASIAN_DOSIS_III",skillName:"EUKRASIAN_DOSIS_III",tickPotency:85,speedStat:"sps"}),e.tryConsumeResource("EUKRASIA")},onApplication:(e,t)=>{e.applyDoT("EUKRASIAN_DOSIS_III",t)}});rn("TOXIKON",66,{autoUpgrade:{trait:"OFFENSIVE_MAGIC_MASTERY_II",otherSkill:"TOXIKON_II"},potency:[["NEVER",240],["OFFENSIVE_MAGIC_MASTERY",300]],falloff:.5,applicationDelay:1.2,castTime:0,validateAttempt:e=>e.hasResourceAvailable("ADDERSTING"),onConfirm:e=>e.tryConsumeResource("ADDERSTING")});rn("TOXIKON_II",82,{startOnHotbar:!1,potency:BT,falloff:.5,applicationDelay:1.2,castTime:0,validateAttempt:e=>e.hasResourceAvailable("ADDERSTING"),onConfirm:e=>e.tryConsumeResource("ADDERSTING")});rn("PHLEGMA",26,{autoUpgrade:{trait:"OFFENSIVE_MAGIC_MASTERY",otherSkill:"PHLEGMA_II"},potency:400,falloff:.5,applicationDelay:.67,manaCost:400,castTime:0,secondaryCooldown:{cdName:"cd_PHLEGMA",maxCharges:2,cooldown:40}});rn("PHLEGMA_II",72,{startOnHotbar:!1,autoUpgrade:{trait:"OFFENSIVE_MAGIC_MASTERY_II",otherSkill:"PHLEGMA_III"},potency:490,falloff:.5,applicationDelay:.67,manaCost:400,castTime:0,secondaryCooldown:{cdName:"cd_PHLEGMA",maxCharges:2,cooldown:40}});rn("PHLEGMA_III",82,{startOnHotbar:!1,potency:600,falloff:.5,applicationDelay:.67,manaCost:400,castTime:0,secondaryCooldown:{cdName:"cd_PHLEGMA",maxCharges:2,cooldown:40}});yn("PSYCHE",92,"cd_PSYCHE",{potency:600,falloff:.5,applicationDelay:2.1,cooldown:60});rn("DYSKRASIA",46,{autoUpgrade:{trait:"OFFENSIVE_MAGIC_MASTERY_II",otherSkill:"DYSKRASIA_II"},potency:160,falloff:0,applicationDelay:.76,manaCost:400,castTime:0});rn("DYSKRASIA_II",82,{startOnHotbar:!1,replaceIf:[{condition:e=>e.hasResourceAvailable("EUKRASIA"),newSkill:"EUKRASIAN_DYSKRASIA"}],potency:170,falloff:0,applicationDelay:.76,manaCost:400,castTime:0});rn("EUKRASIAN_DYSKRASIA",82,{startOnHotbar:!1,falloff:0,applicationDelay:1.03,castTime:0,recastTime:1.5,drawsAggro:!0,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"EUKRASIAN_DYSKRASIA",skillName:"EUKRASIAN_DYSKRASIA",tickPotency:40,speedStat:"sps"}),e.tryConsumeResource("EUKRASIA")},onApplication:(e,t)=>{e.applyDoT("EUKRASIAN_DYSKRASIA",t)}});rn("DIAGNOSIS",2,{healingPotency:[["NEVER",400],["ENHANCED_HEALING_MAGIC",450]],applicationDelay:.58,replaceIf:[{condition:e=>e.hasResourceAvailable("EUKRASIA"),newSkill:"EUKRASIAN_DIAGNOSIS"}],manaCost:400});rn("EUKRASIAN_DIAGNOSIS",30,{startOnHotbar:!1,healingPotency:300,applicationDelay:.67,castTime:0,recastTime:1.5,manaCost:800,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:e=>e.tryConsumeResource("EUKRASIA"),onApplication:e=>e.gainStatus("EUKRASIAN_DIAGNOSIS")});yn("EUKRASIAN_DIAGNOSIS_POP",30,"cd_DIAGNOSIS_POP",{animationLock:ma,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("EUKRASIAN_DIAGNOSIS"),onConfirm:e=>{e.tryConsumeResource("EUKRASIAN_DIAGNOSIS"),e.resources.get("ADDERSTING").gain(1)},highlightIf:e=>e.hasResourceAvailable("EUKRASIAN_DIAGNOSIS")});rn("PROGNOSIS",10,{healingPotency:300,aoeHeal:!0,applicationDelay:.58,replaceIf:[{condition:e=>e.hasResourceAvailable("EUKRASIA")&&e.hasTraitUnlocked("EUKRASIAN_PROGNOSIS_MASTERY"),newSkill:"EUKRASIAN_PROGNOSIS_II"},{condition:e=>e.hasResourceAvailable("EUKRASIA")&&!e.hasTraitUnlocked("EUKRASIAN_PROGNOSIS_MASTERY"),newSkill:"EUKRASIAN_PROGNOSIS"}],manaCost:700,castTime:e=>e.config.adjustedCastTime(2)});rn("EUKRASIAN_PROGNOSIS",30,{startOnHotbar:!1,autoUpgrade:{trait:"EUKRASIAN_PROGNOSIS_MASTERY",otherSkill:"EUKRASIAN_PROGNOSIS_II"},healingPotency:100,aoeHeal:!0,applicationDelay:.94,castTime:0,recastTime:1.5,manaCost:800,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:e=>e.tryConsumeResource("EUKRASIA"),onApplication:e=>e.gainStatus("EUKRASIAN_PROGNOSIS")});rn("EUKRASIAN_PROGNOSIS_II",96,{startOnHotbar:!1,healingPotency:100,aoeHeal:!0,applicationDelay:.94,castTime:0,recastTime:1.5,manaCost:800,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:e=>e.tryConsumeResource("EUKRASIA"),onApplication:e=>e.gainStatus("EUKRASIAN_PROGNOSIS")});yn("EUKRASIAN_PROGNOSIS_POP",30,"cd_PROGNOSIS_POP",{autoUpgrade:{trait:"EUKRASIAN_PROGNOSIS_MASTERY",otherSkill:"EUKRASIAN_PROGNOSIS_II_POP"},animationLock:ma,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("EUKRASIAN_PROGNOSIS"),onConfirm:e=>{e.tryConsumeResource("EUKRASIAN_PROGNOSIS"),e.resources.get("ADDERSTING").gain(1)},highlightIf:e=>e.hasResourceAvailable("EUKRASIAN_PROGNOSIS")});yn("EUKRASIAN_PROGNOSIS_II_POP",30,"cd_PROGNOSIS_POP",{startOnHotbar:!1,animationLock:ma,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("EUKRASIAN_PROGNOSIS"),onConfirm:e=>{e.tryConsumeResource("EUKRASIAN_PROGNOSIS"),e.resources.get("ADDERSTING").gain(1)},highlightIf:e=>e.hasResourceAvailable("EUKRASIAN_PROGNOSIS")});rn("PNEUMA",90,{potency:BT,falloff:.4,healingPotency:600,aoeHeal:!0,applicationDelay:.58,manaCost:700,secondaryCooldown:{cdName:"cd_PNEUMA",maxCharges:1,cooldown:120}});GT("ZOE",56,"cd_ZOE",{rscType:"ZOE",applicationDelay:0,cooldown:90});yn("PEPSIS",58,"cd_PEPSIS",{cooldown:30,applicationDelay:1.16,onConfirm:(e,t)=>{e.hasResourceAvailable("EUKRASIAN_DIAGNOSIS")&&(e.addPepsisPotency("EUKRASIAN_DIAGNOSIS",t),e.tryConsumeResource("EUKRASIAN_DIAGNOSIS")),e.hasResourceAvailable("EUKRASIAN_PROGNOSIS")&&(e.addPepsisPotency("EUKRASIAN_PROGNOSIS",t),e.tryConsumeResource("EUKRASIAN_PROGNOSIS"))},onApplication:(e,t)=>{t.getHotPotencies("PEPSIS").forEach(a=>{p.resolveHealingPotency(a)})}});GT("SOTERIA",35,"cd_SOTERIA",{rscType:"SOTERIA",applicationDelay:.8,cooldown:60});GT("KRASIS",86,"cd_KRASIS",{rscType:"KRASIS",applicationDelay:.76,cooldown:60});yn("HAIMA",70,"cd_HAIMA",{replaceIf:[{condition:e=>e.hasResourceAvailable("HAIMA"),newSkill:"HAIMA_POP"}],applicationDelay:.76,cooldown:120,onConfirm:(e,t)=>e.addHaimaExpirationPotency("HAIMA",t),onApplication:(e,t)=>{const a=Ft("SGE","HAIMATINON").maxValue;e.gainStatus("HAIMA"),e.gainStatus("HAIMATINON",a),e.addEvent(new Ce("Haima Expiration heal Check",Ft("SGE","HAIMA").maxTimeout-.001,()=>e.handleHaimaExpiration("HAIMA",t)))}});yn("HAIMA_POP",70,"cd_HAIMA_POP",{startOnHotbar:!1,animationLock:ma,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("HAIMA"),highlightIf:e=>e.hasResourceAvailable("HAIMA"),onConfirm:e=>{e.hasResourceAvailable("HAIMATINON")?e.tryConsumeResource("HAIMATINON"):e.tryConsumeResource("HAIMA")}});yn("PHYSIS_II",60,"cd_PHYSIS",{aoeHeal:!0,applicationDelay:.85,cooldown:60,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"PHYSIS_II",effectName:"PHYSIS_II",speedStat:"sps",tickPotency:130})},onApplication:(e,t)=>{e.applyHoT("PHYSIS_II",t),e.gainStatus("AUTOPHYSIS")}});yn("PHILOSOPHIA",100,"cd_PHILOSOPHIA",{applicationDelay:1.83,cooldown:180,onApplication:e=>{e.gainStatus("PHILOSOPHIA"),e.gainStatus("EUDAIMONIA")}});yn("HOLOS",76,"cd_HOLOS",{applicationDelay:.62,cooldown:120,onApplication:e=>{e.gainStatus("HOLOS"),e.gainStatus("HOLOSAKOS")}});yn("PANHAIMA",80,"cd_PANHAIMA",{replaceIf:[{condition:e=>e.hasResourceAvailable("PANHAIMA"),newSkill:"PANHAIMA_POP"}],applicationDelay:.62,cooldown:120,onConfirm:(e,t)=>e.addHaimaExpirationPotency("PANHAIMA",t),onApplication:(e,t)=>{const a=Ft("SGE","PANHAIMATINON").maxValue;e.gainStatus("PANHAIMA"),e.gainStatus("PANHAIMATINON",a),e.addEvent(new Ce("Panhaima Expiration heal Check",Ft("SGE","PANHAIMA").maxTimeout-.001,()=>e.handleHaimaExpiration("PANHAIMA",t)))}});yn("PANHAIMA_POP",80,"cd_PANHAIMA_POP",{startOnHotbar:!1,animationLock:ma,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("PANHAIMA"),highlightIf:e=>e.hasResourceAvailable("PANHAIMA"),onConfirm:e=>{e.hasResourceAvailable("PANHAIMATINON")?e.tryConsumeResource("PANHAIMATINON"):e.tryConsumeResource("PANHAIMA")}});yn("RHIZOMATA",74,"cd_RHIZOMATA",{cooldown:90,onConfirm:e=>e.resources.get("ADDERSGALL").gain(1)});yn("DRUOCHOLE",45,"cd_DRUOCHOLE",{cooldown:1,healingPotency:600,applicationDelay:.78,validateAttempt:e=>e.hasResourceAvailable("ADDERSGALL"),onConfirm:e=>e.consumeAddersgall()});yn("IXOCHOLE",52,"cd_IXOCHOLE",{cooldown:30,healingPotency:400,aoeHeal:!0,applicationDelay:.756,validateAttempt:e=>e.hasResourceAvailable("ADDERSGALL"),onConfirm:e=>e.consumeAddersgall()});yn("TAUROCHOLE",62,"cd_TAUROCHOLE",{cooldown:45,applicationDelay:.67,onConfirm:e=>e.consumeAddersgall(),onApplication:e=>e.gainStatus("TAUROCHOLE")});yn("KERACHOLE",50,"cd_KERACHOLE",{cooldown:30,aoeHeal:!0,applicationDelay:.81,validateAttempt:e=>e.hasResourceAvailable("ADDERSGALL"),onConfirm:(e,t)=>{e.consumeAddersgall(),e.addHoTPotencies({node:t,skillName:"KERACHOLE",effectName:"KERAKEIA",speedStat:"sps",tickPotency:100})},onApplication:(e,t)=>{e.gainStatus("KERACHOLE"),e.hasTraitUnlocked("ENHANCED_KERACHOLE")&&e.applyHoT("KERAKEIA",t)}});rn("EGEIRO",12,{applicationDelay:.58,manaCost:2400,castTime:8});yn("KARDIA",4,"cd_KARDIA",{applicationDelay:.62,cooldown:5,onApplication:e=>{e.gainStatus("KARDIA"),e.gainStatus("KARDION")}});yn("ICARUS",40,"cd_ICARUS",{cooldown:45,animationLock:Vt});Object.keys(JR).forEach(e=>jt(e,`WAR/${we[e].name}.png`));class hB extends Wt{jobSpecificSelfTargetedBuffViewProps(){return Object.keys(JR).map(t=>this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){const a=this.state.resources,o=a.get("BEAST_GAUGE").availableAmount(),s=a.get("STORM_COMBO"),c=a.get("TEMPEST_COMBO"),d=s.available(1)?s.pendingChange?.timeTillEvent:c.available(1)?c.pendingChange?.timeTillEvent:void 0;return[{kind:"text",name:g({en:"Combo Timer",zh:""}),text:d?.toFixed(3)??"N/A"},{kind:"bar",name:g({en:"Beast Gauge",zh:""}),color:t.war.beastGauge,progress:o/100,valueString:o.toFixed(0)}]}}const Pt=(e,t,a)=>{Ve("WAR",e,t,a??{})};Pt("BEAST_GAUGE",100,{warnOnOvercap:!0});const FT=.74,EO=1.16;Pt("SURGING_TEMPEST",1,{timeout:60});Pt("NASCENT_CHAOS",1,{timeout:30});Pt("INNER_RELEASE",3,{timeout:15+FT});Pt("INNER_STRENGTH",1,{timeout:15+FT});Pt("BURGEONING_FURY",3,{timeout:30});Pt("WRATHFUL",1,{timeout:30});Pt("PRIMAL_REND_READY",1,{timeout:30+FT,warnOnTimeout:!0});Pt("PRIMAL_RUINATION_READY",1,{timeout:20+EO,warnOnTimeout:!0});Pt("THRILL_OF_BATTLE",1,{timeout:10});Pt("EQUILIBRIUM",1,{timeout:15});Pt("RAW_INTUITION",1,{timeout:6});Pt("BLOODWHETTING",1,{timeout:8});Pt("STEM_THE_FLOW",1,{timeout:4});Pt("STEM_THE_TIDE",1,{timeout:20});Pt("NASCENT_FLASH",1,{timeout:8});Pt("VENGEANCE",1,{timeout:15});Pt("DAMNATION",1,{timeout:15});Pt("PRIMEVAL_IMPULSE",1,{timeout:15});Pt("SHAKE_IT_OFF",1,{timeout:30});Pt("SHAKE_IT_OFF_OVER_TIME",1,{timeout:15});Pt("HOLMGANG",1,{timeout:10});Pt("DEFIANCE",1);Pt("STORM_COMBO",2,{timeout:30});Pt("TEMPEST_COMBO",1,{timeout:30});const fB=["HEAVY_SWING","MAIM","STORMS_EYE","STORMS_PATH"],mO=["OVERPOWER","MYTHRIL_TEMPEST"],EB=[...fB,...mO],TN=["FELL_CLEAVE","DECIMATE"],mB=["THRILL_OF_BATTLE","DAMNATION","BLOODWHETTING","VENGEANCE","RAW_INTUITION"];class AB extends Xt{constructor(t){super(t),this.hasTraitUnlocked("ENHANCED_ONSLAUGHT")&&this.cooldowns.set(new He("cd_ONSLAUGHT",30,3,3)),this.registerRecurringEvents()}get statusPropsGenerator(){return new hB(this)}processComboStatus(t){if(!EB.includes(t))return;const a=mO.includes(t),o=a?"TEMPEST_COMBO":"STORM_COMBO",s=a?"STORM_COMBO":"TEMPEST_COMBO";this.setComboState(s,0);const c=this.resources.get(o).availableAmount();let d=0;a?t==="OVERPOWER"&&(d=1):t==="HEAVY_SWING"?d=1:c===1&&t==="MAIM"&&(d=2),this.setComboState(o,d)}hasComboStatus(t,a){return this.hasResourceExactly(t,a)}gainBeastGauge(t){this.resources.get("BEAST_GAUGE").gain(t)}gainProc(t,a){const o=Ft("WAR",t).maxTimeout;this.hasResourceAvailable(t)?(t==="BURGEONING_FURY"&&this.resources.get(t).gain(1),this.resources.get(t).overrideTimer(this,o)):(this.resources.get(t).gain(a??1),o&&this.enqueueResourceDrop(t,o))}gainSurgingTempest(t){const a=this.resources.get("SURGING_TEMPEST"),o=Ft("WAR","SURGING_TEMPEST").maxTimeout,s=(a.pendingChange?.timeTillEvent??0)+t;a.overrideTimer(this,s>=o?o:s)}gainSurgingTempestGCD(t,a,o){this.hasResourceAvailable("SURGING_TEMPEST")?this.addEvent(new Ce("surging tempest refresh",a,()=>{this.hasResourceAvailable("SURGING_TEMPEST")?this.gainSurgingTempest(t):(this.resources.get("SURGING_TEMPEST").gain(1),this.enqueueResourceDrop("SURGING_TEMPEST",t))})):(this.resources.get("SURGING_TEMPEST").gain(1),this.enqueueResourceDrop("SURGING_TEMPEST",t+o))}}const Xa=(e,t,a)=>{const o=Me(a.onConfirm,c=>c.processComboStatus(e),c=>{TN.includes(e)&&c.tryConsumeResource("INNER_RELEASE")&&c.hasTraitUnlocked("ENHANCED_INNER_RELEASE")&&(c.gainProc("BURGEONING_FURY"),c.hasResourceAvailable("BURGEONING_FURY",3)&&(c.gainProc("WRATHFUL"),c.tryConsumeResource("BURGEONING_FURY",!0)))}),s=a.jobPotencyModifiers??(c=>[]);return nn("WAR",e,t,{...a,onConfirm:o,recastTime:c=>c.config.adjustedSksGCD(),jobPotencyModifiers:c=>{const d=s(c);return c.hasResourceAvailable("SURGING_TEMPEST")&&d.push(X.SurgingTempest),c.hasResourceAvailable("INNER_RELEASE")&&TN.includes(e)&&d.push(X.AutoCDH),d}})},$r=(e,t,a,o)=>at("WAR",e,t,a,{...o,jobPotencyModifiers:s=>{const c=[];return s.hasResourceAvailable("SURGING_TEMPEST")&&c.push(X.SurgingTempest),c}});Xa("TOMAHAWK",15,{potency:150,applicationDelay:.71});Xa("HEAVY_SWING",1,{potency:[["NEVER",150],["MELEE_MASTERY_TANK",200],["MELEE_MASTERY_II_TANK",240]],applicationDelay:.53});Xa("MAIM",4,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",150],["MELEE_MASTERY_II_TANK",190]],combo:{potency:[["NEVER",250],["MELEE_MASTERY_TANK",300],["MELEE_MASTERY_II_TANK",340]],resource:"STORM_COMBO",resourceValue:1},applicationDelay:.62,onConfirm:e=>{e.hasComboStatus("STORM_COMBO",1)&&e.gainBeastGauge(10)},highlightIf:e=>e.hasComboStatus("STORM_COMBO",1)});Xa("STORMS_PATH",26,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",160],["MELEE_MASTERY_II_TANK",220]],combo:{potency:[["NEVER",380],["MELEE_MASTERY_TANK",440],["MELEE_MASTERY_II_TANK",500]],resource:"STORM_COMBO",resourceValue:2},applicationDelay:1.52,onConfirm:e=>{e.hasComboStatus("STORM_COMBO",2)&&e.gainBeastGauge(20)},highlightIf:e=>e.hasComboStatus("STORM_COMBO",2)});Xa("STORMS_EYE",50,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",160],["MELEE_MASTERY_II_TANK",220]],combo:{potency:[["NEVER",380],["MELEE_MASTERY_TANK",440],["MELEE_MASTERY_II_TANK",500]],resource:"STORM_COMBO",resourceValue:2},applicationDelay:1.65,onConfirm:e=>{e.hasComboStatus("STORM_COMBO",2)&&(e.gainBeastGauge(10),e.gainSurgingTempestGCD(30,1.65,1.7))},highlightIf:e=>e.hasComboStatus("STORM_COMBO",2)});Xa("OVERPOWER",10,{potency:110,falloff:0,applicationDelay:.62});Xa("MYTHRIL_TEMPEST",40,{potency:100,combo:{potency:140,resource:"TEMPEST_COMBO",resourceValue:1},falloff:0,applicationDelay:.49,onConfirm:e=>{e.hasComboStatus("TEMPEST_COMBO",1)&&(e.gainBeastGauge(20),e.gainSurgingTempestGCD(30,.49,.45))},highlightIf:e=>e.hasComboStatus("TEMPEST_COMBO",1)});function wf(e){e.cooldowns.get("cd_INFURIATE").restore(5)}Xa("FELL_CLEAVE",54,{potency:[["NEVER",520],["MELEE_MASTERY_II_TANK",580]],applicationDelay:.62,validateAttempt:e=>e.resources.get("BEAST_GAUGE").available(50)||e.resources.get("INNER_RELEASE").available(1),onConfirm:e=>{e.hasResourceAvailable("INNER_RELEASE")||e.resources.get("BEAST_GAUGE").consume(50),wf(e)},replaceIf:[{newSkill:"INNER_CHAOS",condition:e=>e.hasResourceAvailable("NASCENT_CHAOS")}],highlightIf:e=>e.hasResourceAvailable("BEAST_GAUGE",50)||e.hasResourceAvailable("INNER_RELEASE")});Xa("DECIMATE",60,{potency:180,falloff:0,applicationDelay:1.83,validateAttempt:e=>e.hasResourceAvailable("BEAST_GAUGE",50)||e.hasResourceAvailable("INNER_RELEASE"),onConfirm:e=>{e.hasResourceAvailable("INNER_RELEASE")||e.resources.get("BEAST_GAUGE").consume(50),wf(e)},highlightIf:e=>e.hasResourceAvailable("BEAST_GAUGE",50)||e.hasResourceAvailable("INNER_RELEASE"),replaceIf:[{newSkill:"CHAOTIC_CYCLONE",condition:e=>e.hasResourceAvailable("NASCENT_CHAOS")}]});$r("INNER_RELEASE",70,"cd_INNER_RELEASE",{applicationDelay:0,cooldown:60,maxCharges:1,onConfirm:e=>{e.gainProc("INNER_RELEASE",3),e.gainProc("INNER_STRENGTH"),e.hasResourceAvailable("SURGING_TEMPEST")&&e.gainSurgingTempest(10),e.config.level>=Je.lvl90&&e.gainProc("PRIMAL_REND_READY")},replaceIf:[{newSkill:"PRIMAL_WRATH",condition:e=>e.hasResourceAvailable("WRATHFUL")}]});Xa("PRIMAL_REND",90,{potency:700,applicationDelay:EO,falloff:.5,animationLock:1.2,validateAttempt:e=>e.hasResourceAvailable("PRIMAL_REND_READY"),onConfirm:e=>{e.tryConsumeResource("PRIMAL_REND_READY"),e.hasTraitUnlocked("ENHANCED_PRIMAL_REND")&&e.gainProc("PRIMAL_RUINATION_READY")},highlightIf:e=>e.hasResourceAvailable("PRIMAL_REND_READY"),replaceIf:[{newSkill:"PRIMAL_RUINATION",condition:e=>e.hasResourceAvailable("PRIMAL_RUINATION_READY")}],jobPotencyModifiers:e=>[X.AutoCDH]});$r("PRIMAL_WRATH",96,"cd_PRIMAL_WRATH",{startOnHotbar:!1,potency:700,falloff:.5,applicationDelay:1.15,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("WRATHFUL"),onConfirm:e=>e.tryConsumeResource("WRATHFUL"),highlightIf:e=>!0});Xa("PRIMAL_RUINATION",100,{startOnHotbar:!1,potency:780,falloff:.5,applicationDelay:1.06,validateAttempt:e=>e.hasResourceAvailable("PRIMAL_RUINATION_READY"),onConfirm:e=>{e.tryConsumeResource("PRIMAL_RUINATION_READY")},highlightIf:e=>!0,jobPotencyModifiers:e=>[X.AutoCDH]});$r("INFURIATE",50,"cd_INFURIATE",{applicationDelay:0,requiresCombat:!0,cooldown:60,maxCharges:2,onApplication:e=>{e.gainBeastGauge(50),e.hasTraitUnlocked("NASCENT_CHAOS")&&e.gainProc("NASCENT_CHAOS")}});Xa("INNER_CHAOS",80,{startOnHotbar:!1,potency:660,applicationDelay:.94,validateAttempt:e=>e.hasResourceAvailable("BEAST_GAUGE",50)&&e.hasResourceAvailable("NASCENT_CHAOS"),onConfirm:e=>{e.tryConsumeResource("NASCENT_CHAOS"),e.resources.get("BEAST_GAUGE").consume(50),wf(e)},highlightIf:e=>e.hasResourceAvailable("BEAST_GAUGE",50),jobPotencyModifiers:e=>[X.AutoCDH]});Xa("CHAOTIC_CYCLONE",72,{startOnHotbar:!1,potency:200,falloff:0,applicationDelay:1.43,validateAttempt:e=>e.hasResourceAvailable("BEAST_GAUGE",50)&&e.hasResourceAvailable("NASCENT_CHAOS"),onConfirm:e=>{e.tryConsumeResource("NASCENT_CHAOS"),e.resources.get("BEAST_GAUGE").consume(50),wf(e)},highlightIf:e=>e.hasResourceAvailable("BEAST_GAUGE",50),jobPotencyModifiers:e=>[X.AutoCDH]});$r("ONSLAUGHT",62,"cd_ONSLAUGHT",{potency:150,applicationDelay:.63,cooldown:30,maxCharges:2,animationLock:Vt});$r("UPHEAVAL",64,"cd_UPHEAVAL",{potency:420,applicationDelay:.62,cooldown:30});$r("OROGENY",86,"cd_UPHEAVAL",{potency:150,falloff:0,applicationDelay:.62,cooldown:30});je("WAR","VENGEANCE",38,"cd_VENGEANCE",{rscType:"VENGEANCE",autoUpgrade:{trait:"VENGEANCE_MASTERY",otherSkill:"DAMNATION"},cooldown:120,applicationDelay:.62});je("WAR","DAMNATION",92,"cd_VENGEANCE",{rscType:"DAMNATION",autoDowngrade:{trait:"VENGEANCE_MASTERY",otherSkill:"VENGEANCE"},cooldown:120,applicationDelay:.62});je("WAR","RAW_INTUITION",56,"cd_RAW_INTUITION",{rscType:"RAW_INTUITION",autoUpgrade:{trait:"RAW_INTUITION_MASTERY",otherSkill:"BLOODWHETTING"},cooldown:25,applicationDelay:.45});je("WAR","BLOODWHETTING",82,"cd_RAW_INTUITION",{rscType:"BLOODWHETTING",autoDowngrade:{trait:"RAW_INTUITION_MASTERY",otherSkill:"RAW_INTUITION"},onApplication:e=>{e.gainProc("STEM_THE_FLOW"),e.gainProc("STEM_THE_TIDE")},cooldown:25,applicationDelay:.45});at("WAR","NASCENT_FLASH",76,"cd_RAW_INTUITION",{onApplication:e=>{let t=6;e.hasTraitUnlocked("ENHANCED_NASCENT_FLASH")&&(t=8),e.resources.get("NASCENT_FLASH").gain(1),e.enqueueResourceDrop("NASCENT_FLASH",t)},cooldown:25,applicationDelay:.45});je("WAR","HOLMGANG",45,"cd_HOLMGANG",{rscType:"HOLMGANG",cooldown:240,applicationDelay:.45});je("WAR","THRILL_OF_BATTLE",30,"cd_THRILL_OF_BATTLE",{rscType:"THRILL_OF_BATTLE",cooldown:90,applicationDelay:.62});at("WAR","EQUILIBRIUM",58,"cd_EQUILIBRIUM",{cooldown:60,applicationDelay:.62,onApplication:e=>{e.hasTraitUnlocked("ENHANCED_EQUILIBRIUM")&&e.gainProc("EQUILIBRIUM")}});je("WAR","SHAKE_IT_OFF",68,"cd_SHAKE_IT_OFF",{rscType:"SHAKE_IT_OFF",cooldown:90,onApplication:(e,t)=>{let a=0;mB.forEach(o=>{e.tryConsumeResource(o)&&(a+=1)}),console.debug(`Shake It Off dispelled ${a} buffs`),e.gainProc("SHAKE_IT_OFF_OVER_TIME")},applicationDelay:0});at("WAR","DEFIANCE",10,"cd_DEFIANCE",{cooldown:2,maxCharges:1,applicationDelay:0,validateAttempt:e=>!e.hasResourceAvailable("DEFIANCE"),onConfirm:e=>e.resources.get("DEFIANCE").gain(1),replaceIf:[{newSkill:"RELEASE_DEFIANCE",condition:e=>e.hasResourceAvailable("DEFIANCE")}],secondaryCooldown:{cdName:"cd_RELEASE_DEFIANCE",cooldown:1,maxCharges:1}});at("WAR","RELEASE_DEFIANCE",10,"cd_RELEASE_DEFIANCE",{startOnHotbar:!1,cooldown:1,maxCharges:1,secondaryCooldown:{cdName:"cd_DEFIANCE",cooldown:2,maxCharges:1},applicationDelay:0,validateAttempt:e=>e.hasResourceAvailable("DEFIANCE"),onConfirm:e=>e.tryConsumeResource("DEFIANCE")});const AO=["CIRCLE_OF_SCORN_DOT"],RB=Object.keys(YR).filter(e=>!AO.includes(e));Object.keys(YR).forEach(e=>jt(e,`PLD/${we[e].name}.png`));class TB extends Wt{jobSpecificOtherTargetedBuffViewProps(){return[...AO.map(t=>this.makeCommonTimer(t,!1))]}jobSpecificSelfTargetedBuffViewProps(){return RB.map(t=>this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){const a=this.state.resources,o=a.get("PLD_COMBO_TRACKER"),s=a.get("PLD_AOE_COMBO_TRACKER"),c=a.get("OATH_GAUGE").availableAmount(),d=a.get("IRON_WILL").availableAmount(),h=o.available(1)?o.pendingChange?.timeTillEvent:s.available(1)?s.pendingChange?.timeTillEvent:void 0,f=this.state.findAutoAttackTimerInQueue();let m="";return this.state.hasResourceAvailable("STORED_AUTO")?m="stored":m=f!==-1?f.toFixed(3):"N/A",[{kind:"bar",name:g({en:"Auto Tracker"}),color:t.pld.ironWillColor,progress:f!==-1?(3-f)/3:0,valueString:m},{kind:"bar",name:g({en:"Combo Timer",zh:""}),color:t.pld.pldComboTimer,progress:h?h/30:0,valueString:h?.toFixed(3)??"N/A"},{kind:"counter",name:g({en:"Iron Will",zh:""}),color:t.pld.ironWillColor,currentStacks:d,maxStacks:1},{kind:"bar",name:g({en:"Oath Gauge",zh:""}),color:t.pld.oathGaugeColor,progress:c/100,valueString:c.toFixed(0)}]}}const gt=(e,t,a)=>{Ve("PLD",e,t,a??{})};gt("FIGHT_OR_FLIGHT",1,{timeout:20});gt("IRON_WILL",1);gt("OATH_GAUGE",100);gt("SHELTRON",1,{timeout:6});gt("SENTINEL",1,{timeout:15});gt("CIRCLE_OF_SCORN_DOT",1,{timeout:15});gt("HALLOWED_GROUND",1,{timeout:10});gt("BULWARK",1,{timeout:10});gt("GORING_BLADE_READY",1,{timeout:30});gt("DIVINE_VEIL",1,{timeout:30});gt("ATONEMENT_READY",1,{timeout:30,warnOnTimeout:!0});gt("DIVINE_MIGHT",1,{timeout:30,warnOnTimeout:!0});gt("KNIGHTS_RESOLVE",1,{timeout:4});gt("KNIGHTS_BENEDICTION",1,{timeout:12});gt("REQUIESCAT",4,{timeout:30,warnOnTimeout:!0});gt("CONFITEOR_READY",1,{timeout:30,warnOnTimeout:!0});gt("PASSAGE_OF_ARMS",1,{timeout:18});gt("SUPPLICATION_READY",1,{timeout:30,warnOnTimeout:!0});gt("SEPULCHRE_READY",1,{timeout:30,warnOnTimeout:!0});gt("HOLY_SHELTRON",1,{timeout:8});gt("BLADE_OF_HONOR_READY",1,{timeout:30,warnOnTimeout:!0});gt("GUARDIAN",1,{timeout:15});gt("GUARDIANS_WILL",1,{timeout:15});gt("PLD_COMBO_TRACKER",2,{timeout:30});gt("PLD_CONFITEOR_COMBO_TRACKER",3,{timeout:30});gt("PLD_AOE_COMBO_TRACKER",1,{timeout:30});gt("INTERVENTION",1,{timeout:8});gt("ARMS_UP",1);gt("COVER",1,{timeout:12});const GA=new Map([["TOTAL_ECLIPSE",0],["PROMINENCE",1]]),BA=new Map([["FAST_BLADE",0],["RIOT_BLADE",1],["ROYAL_AUTHORITY",2]]),RO=new Map([["CONFITEOR",0],["BLADE_OF_FAITH",1],["BLADE_OF_TRUTH",2],["BLADE_OF_VALOR",3]]),Nh=["HOLY_SPIRIT","HOLY_CIRCLE"];class SB extends Xt{constructor(t){super(t),this.resources.get("OATH_GAUGE").gain(100),this.registerRecurringEvents([{groupedEffects:[{effectName:"CIRCLE_OF_SCORN_DOT",appliedBy:["CIRCLE_OF_SCORN"]}]}])}get statusPropsGenerator(){return new TB(this)}jobSpecificAddDamageBuffCovers(t,a){this.hasResourceAvailable("FIGHT_OR_FLIGHT")&&t.addBuff(k.FightOrFlight);const o=a.name;this.hasResourceAvailable("DIVINE_MIGHT")&&(o==="HOLY_SPIRIT"||o==="HOLY_CIRCLE")?t.addBuff(k.DivineMight):this.hasResourceAvailable("REQUIESCAT")&&(o==="HOLY_SPIRIT"||o==="HOLY_CIRCLE"||o==="CONFITEOR"||o==="BLADE_OF_FAITH"||o==="BLADE_OF_TRUTH"||o==="BLADE_OF_VALOR")&&t.addBuff(k.Requiescat)}cancelChanneledSkills(){this.tryConsumeResource("PASSAGE_OF_ARMS")}jobSpecificOnAutoAttack(){p.reportAutoTick(this.time,"auto"),this.resources.get("OATH_GAUGE").gain(5)}isSpellInstant(t){return t!=="CLEMENCY"?this.hasResourceAvailable("DIVINE_MIGHT")||this.hasResourceAvailable("REQUIESCAT"):this.hasResourceAvailable("REQUIESCAT")}captureSpellCastTime(t,a){return this.isSpellInstant(t)?0:this.config.adjustedCastTime(a)}tryConsumeRequiescat(t){(Nh.includes(t)||RO.has(t)||t==="CLEMENCY")&&this.tryConsumeResource("REQUIESCAT")}isHolySpiritCircleGoodForReq(){const t=this.resources.get("REQUIESCAT").availableAmount();return t===0||this.hasResourceAvailable("PLD_CONFITEOR_COMBO_TRACKER")||this.config.level>=90?!1:this.config.level>=80?!this.hasResourceAvailable("CONFITEOR_READY")||this.hasResourceAvailable("CONFITEOR_READY")&&t>1:!0}progressComboTracker(t,a,o){const s=this.resources.get(a).maxValue,c=o.get(t)??-1,d=this.resources.get(a).availableAmount();this.tryConsumeResource(a,!0),(c!==s&&c===d||c===0)&&(this.resources.get(a).gain(c+1),this.enqueueResourceDrop(a))}fixPLDPhysicalComboState(t){GA.has(t)?(this.tryConsumeResource("PLD_COMBO_TRACKER",!0),this.progressComboTracker(t,"PLD_AOE_COMBO_TRACKER",GA)):BA.has(t)&&(this.tryConsumeResource("PLD_AOE_COMBO_TRACKER",!0),this.progressComboTracker(t,"PLD_COMBO_TRACKER",BA)),(GA.has(t)||BA.has(t)||t==="SHIELD_BASH")&&this.tryConsumeResource("PLD_CONFITEOR_COMBO_TRACKER",!0)}getDelayedManaFromAction(t,a){this.addEvent(new Ce("get MP from "+a,this.skillsList.get(a).applicationDelay,()=>{this.resources.get("MANA").gain(t)}))}refreshBuff(t,a){this.addEvent(new Ce("gain buff",a,()=>{this.resources.get(t).gain(1),this.enqueueResourceDrop(t)}))}}const Li=(e,t,a)=>{const o=Me(a.onConfirm,s=>{e!=="SHIELD_LOB"&&e!=="SHIELD_BASH"&&e!=="GORING_BLADE"&&s.fixPLDPhysicalComboState(e)});return nn("PLD",e,t,{...a,onConfirm:o,recastTime:s=>s.config.adjustedSksGCD(),jobPotencyModifiers:s=>s.hasResourceAvailable("FIGHT_OR_FLIGHT")?[X.FightOrFlight]:[]})},_s=(e,t,a)=>{const o=Me((s,c)=>{s.hasResourceAvailable("DIVINE_MIGHT")&&Nh.includes(e)?s.tryConsumeResource("DIVINE_MIGHT"):s.tryConsumeRequiescat(e)},a.onConfirm);return Ka("PLD",e,t,{...a,castTime:s=>s.captureSpellCastTime(e,a.baseCastTime),recastTime:s=>s.config.adjustedGCD(),manaCost:a.baseManaCost??0,potency:a.basePotency,jobPotencyModifiers:s=>{const c=[];return Nh.includes(e)&&s.hasResourceAvailable("DIVINE_MIGHT")?a.dmPotency&&c.push(Wx(tn(s,a.dmPotency)-tn(s,a.basePotency))):(Nh.includes(e)||RO.has(e))&&s.hasResourceAvailable("REQUIESCAT")&&a.reqPotency&&c.push(Vx(tn(s,a.reqPotency)-tn(s,a.basePotency))),e!=="CLEMENCY"&&s.hasResourceAvailable("FIGHT_OR_FLIGHT")&&c.push(X.FightOrFlight),a.jobPotencyModifiers&&c.push(...a.jobPotencyModifiers(s)),c},isInstantFn:s=>s.isSpellInstant(e),onConfirm:o})},jn=(e,t,a,o)=>at("PLD",e,t,a,{...o,jobPotencyModifiers:s=>{const c=[];return s.hasResourceAvailable("FIGHT_OR_FLIGHT")&&c.push(X.FightOrFlight),c}}),TO=(e,t,a,o)=>je("PLD",e,t,a,{...o,rscType:o.rscType,cooldown:o.cooldown,applicationDelay:o.applicationDelay}),SO={newSkill:"ATONEMENT",condition:e=>e.hasResourceAvailable("ATONEMENT_READY")},IO={newSkill:"SUPPLICATION",condition:e=>e.hasResourceAvailable("SUPPLICATION_READY")},_O={newSkill:"SEPULCHRE",condition:e=>e.hasResourceAvailable("SEPULCHRE_READY")},jT={newSkill:"CONFITEOR",condition:e=>e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").availableAmount()===0},Tu={newSkill:"BLADE_OF_FAITH",condition:e=>e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").availableAmount()===1},Su={newSkill:"BLADE_OF_TRUTH",condition:e=>e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").availableAmount()===2},Iu={newSkill:"BLADE_OF_VALOR",condition:e=>e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").availableAmount()===3},gR={newSkill:"BLADE_OF_HONOR",condition:e=>e.hasResourceAvailable("BLADE_OF_HONOR_READY")},IB={newSkill:"IMPERATOR",condition:e=>!e.hasResourceAvailable("BLADE_OF_HONOR_READY")},_B={newSkill:"IRON_WILL",condition:e=>!e.hasResourceAvailable("IRON_WILL")},gB={newSkill:"RELEASE_IRON_WILL",condition:e=>e.hasResourceAvailable("IRON_WILL")};Li("SHIELD_LOB",15,{potency:100,applicationDelay:.89,startsAuto:!1});Li("FAST_BLADE",1,{potency:[["NEVER",150],["MELEE_MASTERY_TANK",200],["MELEE_MASTERY_II_TANK",220]],applicationDelay:.62});Li("RIOT_BLADE",4,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",140],["MELEE_MASTERY_II_TANK",170]],combo:{potency:[["NEVER",260],["MELEE_MASTERY_TANK",300],["MELEE_MASTERY_II_TANK",330]],resource:"PLD_COMBO_TRACKER",resourceValue:1},highlightIf:e=>e.resources.get("PLD_COMBO_TRACKER").availableAmount()===1,applicationDelay:.76,onConfirm:e=>{e.resources.get("PLD_COMBO_TRACKER").availableAmount()===1&&e.getDelayedManaFromAction(1e3,"RIOT_BLADE")}});Li("ROYAL_AUTHORITY",60,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",140],["MELEE_MASTERY_II_TANK",200]],combo:{potency:[["NEVER",360],["MELEE_MASTERY_TANK",400],["MELEE_MASTERY_II_TANK",460]],resource:"PLD_COMBO_TRACKER",resourceValue:2},highlightIf:e=>e.resources.get("PLD_COMBO_TRACKER").availableAmount()===2,applicationDelay:.62,onConfirm:e=>{e.resources.get("PLD_COMBO_TRACKER").availableAmount()===2&&(e.refreshBuff("DIVINE_MIGHT",0),e.hasTraitUnlocked("SWORD_OATH")&&(e.refreshBuff("ATONEMENT_READY",0),e.tryConsumeResource("SUPPLICATION_READY"),e.tryConsumeResource("SEPULCHRE_READY")))}});Li("ATONEMENT",76,{replaceIf:[IO,_O],potency:[["NEVER",360],["MELEE_MASTERY_TANK",400],["MELEE_MASTERY_II_TANK",460]],applicationDelay:1.26,validateAttempt:e=>e.hasResourceAvailable("ATONEMENT_READY"),highlightIf:e=>e.hasResourceAvailable("ATONEMENT_READY"),onConfirm:e=>{e.tryConsumeResource("ATONEMENT_READY"),e.refreshBuff("SUPPLICATION_READY",0),e.getDelayedManaFromAction(400,"ATONEMENT")}});Li("SUPPLICATION",76,{startOnHotbar:!1,replaceIf:[SO,_O],potency:[["NEVER",380],["MELEE_MASTERY_TANK",420],["MELEE_MASTERY_II_TANK",500]],applicationDelay:1.16,validateAttempt:e=>e.hasResourceAvailable("SUPPLICATION_READY"),highlightIf:e=>e.hasResourceAvailable("SUPPLICATION_READY"),onConfirm:e=>{e.tryConsumeResource("SUPPLICATION_READY"),e.refreshBuff("SEPULCHRE_READY",0),e.getDelayedManaFromAction(400,"SUPPLICATION")}});Li("SEPULCHRE",76,{startOnHotbar:!1,replaceIf:[SO,IO],potency:[["NEVER",400],["MELEE_MASTERY_TANK",440],["MELEE_MASTERY_II_TANK",540]],applicationDelay:1.29,validateAttempt:e=>e.hasResourceAvailable("SEPULCHRE_READY"),highlightIf:e=>e.hasResourceAvailable("SEPULCHRE_READY"),onConfirm:e=>{e.tryConsumeResource("SEPULCHRE_READY"),e.getDelayedManaFromAction(400,"SEPULCHRE")}});Li("TOTAL_ECLIPSE",6,{potency:120,applicationDelay:.76,falloff:0});Li("PROMINENCE",40,{potency:100,combo:{potency:220,resource:"PLD_AOE_COMBO_TRACKER",resourceValue:1},applicationDelay:.62,falloff:0,highlightIf:e=>e.resources.get("PLD_AOE_COMBO_TRACKER").availableAmount()===1,onConfirm:e=>{e.resources.get("PLD_AOE_COMBO_TRACKER").availableAmount()===1&&e.hasTraitUnlocked("ENHANCED_PROMINENCE")&&(e.refreshBuff("DIVINE_MIGHT",0),e.getDelayedManaFromAction(500,"PROMINENCE"))}});_s("HOLY_SPIRIT",64,{baseCastTime:1.5,applicationDelay:.76,baseManaCost:1e3,startsAuto:!1,basePotency:[["NEVER",300],["MELEE_MASTERY_TANK",350],["MELEE_MASTERY_II_TANK",400]],reqPotency:[["NEVER",600],["MELEE_MASTERY_TANK",650],["MELEE_MASTERY_II_TANK",700]],dmPotency:[["NEVER",400],["MELEE_MASTERY_TANK",450],["MELEE_MASTERY_II_TANK",500]],highlightIf:e=>e.hasResourceAvailable("DIVINE_MIGHT")||e.isHolySpiritCircleGoodForReq()});_s("HOLY_CIRCLE",72,{baseCastTime:1.5,applicationDelay:.62,baseManaCost:1e3,basePotency:100,reqPotency:350,dmPotency:250,falloff:0,highlightIf:e=>e.hasResourceAvailable("DIVINE_MIGHT")||e.isHolySpiritCircleGoodForReq()});Li("GORING_BLADE",54,{applicationDelay:.53,potency:700,validateAttempt:e=>e.hasResourceAvailable("GORING_BLADE_READY"),highlightIf:e=>e.hasResourceAvailable("GORING_BLADE_READY"),onConfirm:e=>{e.tryConsumeResource("GORING_BLADE_READY")}});_s("CONFITEOR",80,{replaceIf:[Tu,Su,Iu],baseCastTime:0,applicationDelay:.62,baseManaCost:1e3,startsAuto:!1,basePotency:[["NEVER",420],["MELEE_MASTERY_II_TANK",500]],reqPotency:[["NEVER",920],["MELEE_MASTERY_II_TANK",1e3]],falloff:.6,validateAttempt:e=>e.hasResourceAvailable("CONFITEOR_READY"),highlightIf:e=>e.hasResourceAvailable("CONFITEOR_READY"),onConfirm:e=>{e.tryConsumeResource("CONFITEOR_READY"),e.tryConsumeResource("PLD_CONFITEOR_COMBO_TRACKER",!0),e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").gain(1),e.enqueueResourceDrop("PLD_CONFITEOR_COMBO_TRACKER")}});_s("BLADE_OF_FAITH",90,{replaceIf:[jT,Su,Iu],startOnHotbar:!1,baseCastTime:0,baseManaCost:1e3,startsAuto:!1,applicationDelay:.62,basePotency:[["NEVER",220],["MELEE_MASTERY_II_TANK",260]],reqPotency:[["NEVER",720],["MELEE_MASTERY_II_TANK",760]],falloff:.6,validateAttempt:e=>Tu.condition(e),highlightIf:e=>Tu.condition(e),onConfirm:e=>{e.tryConsumeResource("PLD_CONFITEOR_COMBO_TRACKER",!0),e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").gain(2),e.enqueueResourceDrop("PLD_CONFITEOR_COMBO_TRACKER")}});_s("BLADE_OF_TRUTH",90,{replaceIf:[jT,Tu,Iu],startOnHotbar:!1,baseCastTime:0,baseManaCost:1e3,applicationDelay:.89,startsAuto:!1,basePotency:[["NEVER",320],["MELEE_MASTERY_II_TANK",380]],reqPotency:[["NEVER",820],["MELEE_MASTERY_II_TANK",880]],falloff:.6,validateAttempt:e=>Su.condition(e),highlightIf:e=>Su.condition(e),onConfirm:e=>{e.tryConsumeResource("PLD_CONFITEOR_COMBO_TRACKER",!0),e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").gain(3),e.enqueueResourceDrop("PLD_CONFITEOR_COMBO_TRACKER")}});_s("BLADE_OF_VALOR",90,{replaceIf:[jT,Tu,Su],startOnHotbar:!1,baseCastTime:0,baseManaCost:1e3,applicationDelay:.89,startsAuto:!1,basePotency:[["NEVER",420],["MELEE_MASTERY_II_TANK",500]],reqPotency:[["NEVER",920],["MELEE_MASTERY_II_TANK",1e3]],falloff:.6,validateAttempt:e=>Iu.condition(e),highlightIf:e=>Iu.condition(e),onConfirm:e=>{e.tryConsumeResource("PLD_CONFITEOR_COMBO_TRACKER",!0),e.refreshBuff("BLADE_OF_HONOR_READY",0)}});jn("FIGHT_OR_FLIGHT",2,"cd_FIGHT_OR_FLIGHT",{applicationDelay:.62,cooldown:60,onConfirm:e=>{e.refreshBuff("GORING_BLADE_READY",0),e.refreshBuff("FIGHT_OR_FLIGHT",.62)}});jn("REQUIESCAT",68,"cd_REQUIESCAT",{autoUpgrade:{trait:"REQUIESCAT_MASTERY",otherSkill:"IMPERATOR"},applicationDelay:.62,cooldown:60,potency:320,onConfirm:e=>{e.resources.get("REQUIESCAT").gain(4),e.enqueueResourceDrop("REQUIESCAT",30),e.hasTraitUnlocked("ENHANCED_REQUIESCAT")&&e.refreshBuff("CONFITEOR_READY",0)}});jn("IMPERATOR",96,"cd_IMPERATOR",{autoDowngrade:{trait:"REQUIESCAT_MASTERY",otherSkill:"REQUIESCAT"},replaceIf:[gR],applicationDelay:1.29,cooldown:60,potency:580,falloff:.6,onConfirm:e=>{e.resources.get("REQUIESCAT").gain(4),e.enqueueResourceDrop("REQUIESCAT",30,4),e.hasTraitUnlocked("ENHANCED_REQUIESCAT")&&e.refreshBuff("CONFITEOR_READY",0)}});jn("BLADE_OF_HONOR",100,"cd_BLADE_OF_HONOR",{startOnHotbar:!1,cooldown:1,replaceIf:[IB],validateAttempt:gR.condition,highlightIf:gR.condition,applicationDelay:1.16,potency:1e3,startsAuto:!1,falloff:.5,onConfirm:e=>{e.tryConsumeResource("BLADE_OF_HONOR_READY")}});jn("SPIRITS_WITHIN",30,"cd_SPIRITS_WITHIN",{autoUpgrade:{trait:"SPIRITS_WITHIN_MASTERY",otherSkill:"EXPIACION"},applicationDelay:.89,cooldown:30,potency:270,onConfirm:e=>{e.getDelayedManaFromAction(500,"SPIRITS_WITHIN")}});jn("EXPIACION",86,"cd_EXPIACION",{autoDowngrade:{trait:"SPIRITS_WITHIN_MASTERY",otherSkill:"SPIRITS_WITHIN"},applicationDelay:.36,cooldown:30,potency:450,falloff:.6,onConfirm:e=>{e.getDelayedManaFromAction(500,"EXPIACION")}});jn("CIRCLE_OF_SCORN",50,"cd_CIRCLE_OF_SCORN",{applicationDelay:1.02,cooldown:30,potency:140,falloff:0,onConfirm:(e,t)=>{const a=[];e.hasResourceAvailable("FIGHT_OR_FLIGHT")&&a.push(X.FightOrFlight),e.addDoTPotencies({node:t,effectName:"CIRCLE_OF_SCORN_DOT",skillName:"CIRCLE_OF_SCORN",tickPotency:30,speedStat:"sks",modifiers:a}),e.addEvent(new Ce("apply CoS dot",1.02,()=>{e.applyDoT("CIRCLE_OF_SCORN_DOT",t)}))}});jn("INTERVENE",66,"cd_INTERVENE",{applicationDelay:.62,cooldown:30,potency:150,maxCharges:2,animationLock:Vt});_s("CLEMENCY",58,{baseCastTime:1.5,applicationDelay:.62,baseManaCost:2e3,basePotency:0,highlightIf:e=>e.hasResourceAvailable("REQUIESCAT")});jn("SHELTRON",35,"cd_SHELTRON",{autoUpgrade:{trait:"SHELTRON_MASTERY",otherSkill:"HOLY_SHELTRON"},validateAttempt:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,highlightIf:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,applicationDelay:0,cooldown:5,onConfirm:e=>{e.resources.get("OATH_GAUGE").consume(50),e.refreshBuff("SHELTRON",0)}});jn("HOLY_SHELTRON",82,"cd_HOLY_SHELTRON",{autoDowngrade:{trait:"SHELTRON_MASTERY",otherSkill:"SHELTRON"},applicationDelay:0,cooldown:5,validateAttempt:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,highlightIf:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,onConfirm:e=>{e.refreshBuff("HOLY_SHELTRON",0),e.refreshBuff("KNIGHTS_RESOLVE",0),e.refreshBuff("KNIGHTS_BENEDICTION",0),e.resources.get("OATH_GAUGE").consume(50)}});jn("INTERVENTION",62,"cd_INTERVENTION",{applicationDelay:.8,cooldown:10,validateAttempt:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,highlightIf:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,onConfirm:e=>{e.resources.get("OATH_GAUGE").consume(50)}});TO("HALLOWED_GROUND",50,"cd_HALLOWED_GROUND",{rscType:"HALLOWED_GROUND",applicationDelay:0,cooldown:420});TO("BULWARK",52,"cd_BULWARK",{rscType:"BULWARK",applicationDelay:0,cooldown:90});jn("SENTINEL",38,"cd_SENTINEL",{autoUpgrade:{trait:"SENTINEL_MASTERY",otherSkill:"GUARDIAN"},applicationDelay:.53,cooldown:120,onConfirm:e=>{e.refreshBuff("SENTINEL",.53)}});jn("GUARDIAN",92,"cd_GUARDIAN",{autoDowngrade:{trait:"SENTINEL_MASTERY",otherSkill:"SENTINEL"},applicationDelay:.53,cooldown:120,onConfirm:e=>{e.refreshBuff("GUARDIAN",.53),e.refreshBuff("GUARDIANS_WILL",.53)}});jn("DIVINE_VEIL",56,"cd_DIVINE_VEIL",{applicationDelay:0,cooldown:90,onConfirm:e=>{e.refreshBuff("DIVINE_VEIL",0)}});jn("PASSAGE_OF_ARMS",70,"cd_PASSAGE_OF_ARMS",{applicationDelay:.62,cooldown:120,onConfirm:e=>{e.refreshBuff("PASSAGE_OF_ARMS",.62)}});jn("COVER",45,"cd_COVER",{applicationDelay:.62,cooldown:120,validateAttempt:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,highlightIf:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,onConfirm:e=>{e.resources.get("OATH_GAUGE").consume(50)}});jn("IRON_WILL",10,"cd_IRON_WILL",{applicationDelay:0,cooldown:2,validateAttempt:e=>!e.hasResourceAvailable("IRON_WILL"),onConfirm:e=>{e.resources.get("IRON_WILL").gain(1)},replaceIf:[gB],secondaryCooldown:{cdName:"cd_RELEASE_IRON_WILL",cooldown:1,maxCharges:1}});jn("RELEASE_IRON_WILL",10,"cd_RELEASE_IRON_WILL",{startOnHotbar:!1,replaceIf:[_B],applicationDelay:0,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("IRON_WILL"),onConfirm:e=>{e.tryConsumeResource("IRON_WILL")},secondaryCooldown:{cdName:"cd_IRON_WILL",cooldown:2,maxCharges:1}});Li("SHIELD_BASH",10,{potency:100,applicationDelay:.45});Object.keys(wR).forEach(e=>jt(e,`DRK/${we[e].name}.png`));const pB=Object.keys(wR);class NB extends Wt{jobSpecificOtherTargetedBuffViewProps(){return[]}jobSpecificSelfTargetedBuffViewProps(){return pB.map(t=>t==="GRIT"?this.makeCommonTimerless(t):this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){const a=this.state.resources,o=a.get("DRK_COMBO_TRACKER"),s=a.get("DRK_AOE_COMBO_TRACKER"),c=a.get("BLOOD_GAUGE").availableAmount(),d=a.get("GRIT").availableAmount(),h=a.get("DARKSIDE").pendingChange?.timeTillEvent??0,f=a.get("DARK_ARTS").availableAmount(),m=o.available(1)?o.pendingChange?.timeTillEvent:s.available(1)?s.pendingChange?.timeTillEvent:void 0;return[{kind:"bar",name:g({en:"Combo Timer",zh:""}),color:t.drk.drkComboTimer,progress:m?m/30:0,valueString:m?.toFixed(3)??"N/A"},{kind:"counter",name:Ke("GRIT"),color:t.drk.grit,currentStacks:d,maxStacks:1},{kind:"bar",name:Ke("DARKSIDE"),color:t.drk.darkside,progress:h?h/60:0,valueString:h.toFixed(3)},{kind:"counter",name:Ke("DARK_ARTS"),color:t.drk.darkarts,currentStacks:f,maxStacks:1},{kind:"bar",name:Ke("BLOOD_GAUGE"),color:t.drk.blood,progress:c/100,valueString:c.toFixed(0)}]}}const cn=(e,t,a)=>{Ve("DRK",e,t,a??{})};cn("DARKSIDE",1,{timeout:60});cn("BLOOD_GAUGE",100,{warnOnOvercap:!0});cn("SALTED_EARTH",1,{timeout:15});cn("GRIT",1);cn("SHADOW_WALL",1,{timeout:15});cn("DARK_MIND",1,{timeout:10});cn("LIVING_DEAD",1,{timeout:10});cn("WALKING_DEAD",1,{timeout:10});cn("UNDEAD_REBIRTH",1);cn("DARK_MISSIONARY",1,{timeout:15});cn("DELIRIUM",3,{timeout:15,warnOnTimeout:!0});cn("BLOOD_WEAPON",3,{timeout:15,warnOnTimeout:!0});cn("BLACKEST_NIGHT",1,{timeout:7,warnOnTimeout:!0});cn("SCORN",1,{timeout:30,warnOnTimeout:!0});cn("OBLATION",1,{timeout:10});cn("SHADOWED_VIGIL",1,{timeout:15});cn("VIGILANT",1,{timeout:20});cn("DARK_ARTS",1,{warnOnOvercap:!0});cn("DRK_COMBO_TRACKER",2,{timeout:30});cn("DRK_AOE_COMBO_TRACKER",1,{timeout:30});cn("DRK_DELIRIUM_COMBO_TRACKER",2,{timeout:30});const zT=6;cn("ESTEEM_TRACKER",zT);const CB=6.8,bB=2.18;class OB extends Xt{constructor(t){super(t),this.registerRecurringEvents([{groupedEffects:[{effectName:"SALTED_EARTH",appliedBy:["SALTED_EARTH"],isGroundTargeted:!0}]}],["LIVING_SHADOW"])}get statusPropsGenerator(){return new NB(this)}refreshDarkside(){if(this.hasResourceAvailable("DARKSIDE")){const t=this.resources.get("DARKSIDE"),a=Ft("DRK","DARKSIDE").maxTimeout,o=(t.pendingChange?.timeTillEvent??0)+30;t.overrideTimer(this,Math.min(a,o))}else this.resources.get("DARKSIDE").gain(1),this.enqueueResourceDrop("DARKSIDE",30)}gainBloodGauge(t){this.resources.get("BLOOD_GAUGE").gain(t)}bloodWeaponConfirm(t){this.hasResourceAvailable("BLOOD_WEAPON")&&(this.tryConsumeResource("BLOOD_WEAPON"),this.gainBloodGauge(10),this.addEvent(new Ce("gain blood weapon mana",t,()=>{this.resources.get("MANA").gain(600)})))}processComboStatus(t){if(["DISESTEEM","UNMEND","BLOODSPILLER","QUIETUS"].includes(t))return;let a=[this.resources.get("DRK_COMBO_TRACKER").availableAmount(),this.resources.get("DRK_AOE_COMBO_TRACKER").availableAmount(),this.resources.get("DRK_DELIRIUM_COMBO_TRACKER").availableAmount()];t==="HARD_SLASH"?a=[1,0,0]:t==="SYPHON_STRIKE"?a=[a[0]===1?2:0,0,0]:t==="SOULEATER"?a=[0,0,0]:t==="IMPALEMENT"?a[2]=0:t==="SCARLET_DELIRIUM"?a[2]=1:t==="COMEUPPANCE"?a[2]=2:t==="TORCLEAVER"?a[2]=0:t==="UNLEASH"?a=[0,1,0]:t==="STALWART_SOUL"?a=[0,0,0]:a=[0,0,0],this.setComboState("DRK_COMBO_TRACKER",a[0]),this.setComboState("DRK_AOE_COMBO_TRACKER",a[1]),this.setComboState("DRK_DELIRIUM_COMBO_TRACKER",a[2])}handleEsteemAttack(){if(!this.hasResourceAvailable("ESTEEM_TRACKER"))return;const t=this.resources.get("ESTEEM_TRACKER").node;t!==void 0&&this.resolveEsteemPotency(t),this.resources.get("ESTEEM_TRACKER").consume(1),this.hasResourceAvailable("ESTEEM_TRACKER")&&this.addEvent(new Ce("esteem hit",bB,()=>this.handleEsteemAttack()))}resolveEsteemPotency(t){const a=this.resources.get("ESTEEM_TRACKER").availableAmount();if(a===0)return;const o=t.getDotPotencies("ESTEEM_TRACKER")[zT-a];o.modifiers.push(X.DrkPet),this.hasResourceAvailable("TINCTURE")&&o.modifiers.push(X.Tincture),o.snapshotTime=this.getDisplayTime(),p.resolvePotency(o)}}const Cl=(e,t,a)=>nn("DRK",e,t,{...a,onConfirm:Me(a.onConfirm,o=>o.bloodWeaponConfirm(a.applicationDelay),o=>o.processComboStatus(e)),recastTime:o=>o.config.adjustedSksGCD(),jobPotencyModifiers:o=>o.hasResourceAvailable("DARKSIDE")?[X.Darkside]:[]}),YT=(e,t,a)=>Ka("DRK",e,t,{...a,onConfirm:Me(a.onConfirm,o=>o.processComboStatus(e)),recastTime:o=>o.config.adjustedGCD(),jobPotencyModifiers:o=>o.hasResourceAvailable("DARKSIDE")?[X.Darkside]:[]}),Ta=(e,t,a,o)=>at("DRK",e,t,a,{...o,jobPotencyModifiers:s=>s.hasResourceAvailable("DARKSIDE")?[X.Darkside]:[]}),gs=(e,t,a,o)=>je("DRK",e,t,a,o);YT("UNMEND",15,{applicationDelay:.98,potency:150,onConfirm:e=>{if(e.hasTraitUnlocked("ENHANCED_UNMEND")){const t=e.cooldowns.get("cd_SHADOWSTRIDE").timeTillNextStackAvailable();e.cooldowns.get("cd_SHADOWSTRIDE").overrideTimeTillNextStack(Math.max(0,t-5))}}});Cl("HARD_SLASH",1,{applicationDelay:.58,potency:[["NEVER",150],["MELEE_MASTERY_TANK",180],["MELEE_MASTERY_II_TANK",300]]});Cl("SYPHON_STRIKE",2,{applicationDelay:.62,highlightIf:e=>e.hasResourceExactly("DRK_COMBO_TRACKER",1),potency:[["NEVER",100],["MELEE_MASTERY_TANK",120],["MELEE_MASTERY_II_TANK",240]],combo:{potency:[["NEVER",240],["MELEE_MASTERY_TANK",260],["MELEE_MASTERY_II_TANK",380]],resource:"DRK_COMBO_TRACKER",resourceValue:1},onConfirm:e=>{e.hasResourceExactly("DRK_COMBO_TRACKER",1)&&e.addEvent(new Ce("gain syphon strike mana",.62,()=>{e.resources.get("MANA").gain(600)}))}});Cl("SOULEATER",26,{applicationDelay:.62,highlightIf:e=>e.hasResourceExactly("DRK_COMBO_TRACKER",2),potency:[["NEVER",100],["MELEE_MASTERY_TANK",140],["MELEE_MASTERY_II_TANK",260]],combo:{potency:[["NEVER",320],["MELEE_MASTERY_TANK",360],["MELEE_MASTERY_II_TANK",480]],resource:"DRK_COMBO_TRACKER",resourceValue:2},onConfirm:e=>{e.hasResourceAvailable("DRK_COMBO_TRACKER",2)&&e.gainBloodGauge(20)}});YT("UNLEASH",6,{applicationDelay:.71,potency:120,falloff:0});YT("STALWART_SOUL",40,{applicationDelay:.62,highlightIf:e=>e.hasResourceExactly("DRK_AOE_COMBO_TRACKER",1),potency:[["NEVER",100],["MELEE_MASTERY_II_TANK",120]],combo:{potency:[["NEVER",140],["MELEE_MASTERY_II_TANK",160]],resource:"DRK_AOE_COMBO_TRACKER",resourceValue:1},falloff:0,onConfirm:e=>{e.hasResourceExactly("DRK_AOE_COMBO_TRACKER",1)&&(e.gainBloodGauge(20),e.addEvent(new Ce("gain stalwart soul mana",.62,()=>{e.resources.get("MANA").gain(600)})))}});const Gf=e=>{e.tryConsumeResource("DARK_ARTS"),e.refreshDarkside()},Bf=e=>e.hasResourceAvailable("DARK_ARTS"),Ff=e=>e.hasResourceAvailable("DARK_ARTS")?0:3e3;Ta("EDGE_OF_DARKNESS",40,"cd_FLOOD_OF_DARKNESS",{applicationDelay:.62,autoUpgrade:{trait:"DAKRSIDE_MASTERY",otherSkill:"EDGE_OF_SHADOW"},cooldown:1,manaCost:Ff,highlightIf:Bf,potency:300,onConfirm:Gf});Ta("EDGE_OF_SHADOW",74,"cd_FLOOD_OF_DARKNESS",{applicationDelay:.62,autoDowngrade:{trait:"DAKRSIDE_MASTERY",otherSkill:"EDGE_OF_DARKNESS"},cooldown:1,manaCost:Ff,highlightIf:Bf,potency:460,onConfirm:Gf});Ta("FLOOD_OF_DARKNESS",30,"cd_FLOOD_OF_DARKNESS",{applicationDelay:.62,autoUpgrade:{trait:"DAKRSIDE_MASTERY",otherSkill:"FLOOD_OF_SHADOW"},cooldown:1,manaCost:Ff,highlightIf:Bf,potency:100,falloff:0,onConfirm:Gf});Ta("FLOOD_OF_SHADOW",74,"cd_FLOOD_OF_DARKNESS",{applicationDelay:.62,autoDowngrade:{trait:"DAKRSIDE_MASTERY",otherSkill:"FLOOD_OF_DARKNESS"},cooldown:1,manaCost:Ff,highlightIf:Bf,potency:160,falloff:0,onConfirm:Gf});const af=e=>e.hasResourceAvailable("BLOOD_GAUGE",50)||e.hasResourceAvailable("DELIRIUM"),Ch=[{newSkill:"BLOODSPILLER",condition:e=>!e.hasTraitUnlocked("ENHANCED_DELIRIUM")||!e.hasResourceAvailable("DELIRIUM")},{newSkill:"SCARLET_DELIRIUM",condition:e=>e.hasTraitUnlocked("ENHANCED_DELIRIUM")&&e.hasResourceAvailable("DELIRIUM")&&e.hasResourceExactly("DRK_DELIRIUM_COMBO_TRACKER",0)},{newSkill:"COMEUPPANCE",condition:e=>e.hasTraitUnlocked("ENHANCED_DELIRIUM")&&e.hasResourceAvailable("DELIRIUM")&&e.hasResourceExactly("DRK_DELIRIUM_COMBO_TRACKER",1)},{newSkill:"TORCLEAVER",condition:e=>e.hasTraitUnlocked("ENHANCED_DELIRIUM")&&e.hasResourceAvailable("DELIRIUM")&&e.hasResourceExactly("DRK_DELIRIUM_COMBO_TRACKER",2)}];Cl("BLOODSPILLER",62,{applicationDelay:.8,validateAttempt:af,highlightIf:af,replaceIf:Ch,potency:[["NEVER",500],["MELEE_MASTERY_II_TANK",600]],onConfirm:e=>e.tryConsumeResource("DELIRIUM")||e.resources.get("BLOOD_GAUGE").consume(50)});const bh=e=>e.hasTraitUnlocked("ENHANCED_DELIRIUM")&&e.hasResourceAvailable("DELIRIUM");Cl("QUIETUS",64,{applicationDelay:.76,validateAttempt:af,highlightIf:af,replaceIf:[{newSkill:"IMPALEMENT",condition:bh}],potency:[["NEVER",200],["MELEE_MASTERY_II_TANK",240]],falloff:0,onConfirm:e=>e.tryConsumeResource("DELIRIUM")||e.resources.get("BLOOD_GAUGE").consume(50)});[["SCARLET_DELIRIUM",.62,620],["COMEUPPANCE",.67,720],["TORCLEAVER",.62,820]].forEach((e,t)=>{const[a,o,s]=e;Cl(a,96,{startOnHotbar:!1,applicationDelay:o,validateAttempt:Ch[t+1].condition,highlightIf:Ch[t+1].condition,replaceIf:Ch,potency:s,onConfirm:c=>c.tryConsumeResource("DELIRIUM"),onApplication:c=>c.resources.get("MANA").gain(200)})});Cl("IMPALEMENT",96,{startOnHotbar:!1,applicationDelay:.98,validateAttempt:bh,highlightIf:bh,replaceIf:[{newSkill:"QUIETUS",condition:e=>!bh(e)}],potency:300,falloff:0,onConfirm:e=>e.tryConsumeResource("DELIRIUM"),onApplication:e=>e.resources.get("MANA").gain(500)});const pR=e=>e.hasResourceAvailable("SCORN");Cl("DISESTEEM",100,{startOnHotbar:!1,applicationDelay:1.65,validateAttempt:pR,highlightIf:pR,potency:1e3,falloff:.25,onConfirm:e=>e.tryConsumeResource("SCORN")});Ta("DELIRIUM",68,"cd_DELIRIUM",{applicationDelay:0,cooldown:60,onConfirm:e=>{e.gainStatus("DELIRIUM",3),e.gainStatus("BLOOD_WEAPON",3)}});Ta("CARVE_AND_SPIT",60,"cd_ABYSSAL_DRAIN",{applicationDelay:1.47,cooldown:60,potency:[["NEVER",510],["MELEE_MASTERY_II_TANK",540]],healingPotency:500,onApplication:e=>e.resources.get("MANA").gain(600)});Ta("ABYSSAL_DRAIN",56,"cd_ABYSSAL_DRAIN",{applicationDelay:.98,cooldown:60,potency:240,healingPotency:500,onApplication:e=>e.resources.get("MANA").gain(600)});const gO=e=>e.resources.get("SALTED_EARTH").availableAmountIncludingDisabled()>0;Ta("SALTED_EARTH",52,"cd_SALTED_EARTH",{applicationDelay:.76,cooldown:90,replaceIf:[{newSkill:"SALT_AND_DARKNESS",condition:gO}],onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"SALTED_EARTH",skillName:"SALTED_EARTH",tickPotency:50,speedStat:"sks"})},falloff:0,onApplication:(e,t)=>{e.applyDoT("SALTED_EARTH",t),e.gainStatus("SALTED_EARTH")}});Ta("SALT_AND_DARKNESS",86,"cd_SALT_AND_DARKNESS",{startOnHotbar:!1,highlightIf:e=>!0,validateAttempt:gO,applicationDelay:.76,cooldown:20,potency:500,falloff:.25});Ta("LIVING_SHADOW",80,"cd_LIVING_SHADOW",{applicationDelay:0,replaceIf:[{newSkill:"DISESTEEM",condition:e=>pR(e)}],cooldown:120,onConfirm:(e,t)=>{e.hasTraitUnlocked("ENHANCED_LIVING_SHADOW_III")&&e.gainStatus("SCORN"),e.resources.get("ESTEEM_TRACKER").gain(zT);const a=e.hasTraitUnlocked("ENHANCED_LIVING_SHADOW")?420:340;[["ABYSSAL_DRAIN_PET",a,0],["SHADOWSTRIDE_PET",0,void 0],e.hasTraitUnlocked("ENHANCED_LIVING_SHADOW_II")?["SHADOWBRINGER_PET",570,.25]:["FLOOD_OF_SHADOW_PET",a,0],["EDGE_OF_SHADOW_PET",a,void 0],["BLOODSPILLER_PET",a,void 0],e.hasTraitUnlocked("ENHANCED_LIVING_SHADOW_III")?["DISESTEEM_PET",620,.25]:["CARVE_AND_SPIT_PET",a,void 0]].forEach(s=>{const[c,d,h]=s;t.addDoTPotency(new $t({config:e.config,sourceTime:e.getDisplayTime(),sourceSkill:c,aspect:Ie.Other,description:"",basePotency:d,snapshotTime:void 0,targetCount:t.targetCount,falloff:h}),"ESTEEM_TRACKER")}),e.resources.get("ESTEEM_TRACKER").node=t,e.addEvent(new Ce("initial esteem hit",CB,()=>e.handleEsteemAttack()))}});Ta("SHADOWBRINGER",90,"cd_SHADOWBRINGER",{applicationDelay:.67,cooldown:60,potency:600,falloff:.25,maxCharges:2,validateAttempt:e=>e.hasResourceAvailable("DARKSIDE")});Ta("SHADOWSTRIDE",54,"cd_SHADOWSTRIDE",{applicationDelay:.66,animationLock:Vt,cooldown:30,maxCharges:2});gs("THE_BLACKEST_NIGHT",70,"cd_THE_BLACKEST_NIGHT",{rscType:"BLACKEST_NIGHT",manaCost:3e3,replaceIf:[{newSkill:"THE_BLACKEST_NIGHT_POP",condition:e=>e.hasResourceAvailable("BLACKEST_NIGHT")}],applicationDelay:.62,cooldown:15});Ta("THE_BLACKEST_NIGHT_POP",70,"cd_THE_BLACKEST_NIGHT_POP",{startOnHotbar:!1,highlightIf:e=>!0,applicationDelay:0,animationLock:ma,cooldown:1,onConfirm:e=>{e.gainStatus("DARK_ARTS"),e.tryConsumeResource("BLACKEST_NIGHT")}});gs("SHADOW_WALL",38,"cd_SHADOW_WALL",{rscType:"SHADOW_WALL",autoUpgrade:{otherSkill:"SHADOWED_VIGIL",trait:"SHADOW_WALL_MASTERY"},applicationDelay:.62,cooldown:120});gs("SHADOWED_VIGIL",92,"cd_SHADOW_WALL",{rscType:"SHADOWED_VIGIL",autoDowngrade:{otherSkill:"SHADOW_WALL",trait:"SHADOW_WALL_MASTERY"},applicationDelay:.62,cooldown:120,onApplication:e=>e.gainStatus("VIGILANT")});gs("DARK_MIND",45,"cd_DARK_MIND",{rscType:"DARK_MIND",applicationDelay:.62,cooldown:60});gs("LIVING_DEAD",50,"cd_LIVING_DEAD",{rscType:"LIVING_DEAD",applicationDelay:0,cooldown:300});gs("DARK_MISSIONARY",66,"cd_DARK_MISSIONARY",{rscType:"DARK_MISSIONARY",applicationDelay:.62,cooldown:90});gs("OBLATION",82,"cd_OBLATION",{rscType:"OBLATION",applicationDelay:0,maxCharges:2,cooldown:60});Ta("GRIT",10,"cd_GRIT",{applicationDelay:0,cooldown:2,validateAttempt:e=>!e.hasResourceAvailable("GRIT"),onConfirm:e=>e.resources.get("GRIT").gain(1),replaceIf:[{newSkill:"RELEASE_GRIT",condition:e=>e.hasResourceAvailable("GRIT")}],secondaryCooldown:{cdName:"cd_RELEASE_GRIT",cooldown:1,maxCharges:1}});Ta("RELEASE_GRIT",10,"cd_RELEASE_GRIT",{startOnHotbar:!1,replaceIf:[{newSkill:"GRIT",condition:e=>!e.hasResourceAvailable("GRIT")}],applicationDelay:0,cooldown:1,validateAttempt:e=>!e.hasResourceAvailable("GRIT"),onConfirm:e=>e.tryConsumeResource("GRIT"),secondaryCooldown:{cdName:"cd_GRIT",cooldown:2,maxCharges:1}});Object.keys(xR).forEach(e=>jt(e,`AST/${we[e].name}.png`));const pO=["COMBUST_II","COMBUST_III"],DB=Object.keys(xR).filter(e=>!pO.includes(e));class yB extends Wt{jobSpecificOtherTargetedBuffViewProps(){return[...pO.map(t=>this.makeCommonTimer(t))]}jobSpecificSelfTargetedBuffViewProps(){return[...DB.map(t=>this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){return[{kind:"arcana",name:Ke("ARCANA"),currentArcanaColor:this.state.drawnAstral()?t.ast.astralCard:t.ast.umbralCard,activeSlots:["ARCANA_1","ARCANA_2","ARCANA_3","MINOR_ARCANA"].map(a=>this.state.hasResourceAvailable(a))}]}}const it=(e,t,a)=>{Ve("AST",e,t,a??{})};it("ARCANA",1);it("MINOR_ARCANA",1,{default:1});it("LIGHTSPEED",1,{timeout:15});it("THE_BALANCE",1,{timeout:15});it("THE_ARROW",1,{timeout:15});it("THE_SPIRE",1,{timeout:30});it("THE_SPEAR",1,{timeout:15});it("THE_BOLE",1,{timeout:15});it("THE_EWER",1,{timeout:15});it("ASPECTED_BENEFIC",1,{timeout:15});it("ASPECTED_HELIOS",1,{timeout:15});it("SYNASTRY",1,{timeout:20});it("DIVINATION",1,{timeout:20});it("DIVINING",1,{timeout:30,warnOnTimeout:!0});it("COLLECTIVE_UNCONSCIOUS",1,{timeout:18});it("COLLECTIVE_UNCONSCIOUS_MIT",1,{timeout:10});it("WHEEL_OF_FORTUNE",1,{timeout:15});it("OPPOSITION",1,{timeout:15});it("EARTHLY_DOMINANCE",1,{timeout:10});it("GIANT_DOMINANCE",1,{timeout:10});it("COMBUST_II",1,{timeout:30});it("COMBUST_III",1,{timeout:30});it("INTERSECTION",1,{timeout:30});it("NEUTRAL_SECT",1,{timeout:20});it("NEUTRAL_SECT_SHIELD",1,{timeout:30});it("HOROSCOPE",1,{timeout:10});it("HOROSCOPE_HELIOS",1,{timeout:30});it("SUNTOUCHED",1,{timeout:30});it("EXALTATION",1,{timeout:8});it("MACROCOSMOS",1,{timeout:15});it("HELIOS_CONJUNCTION",1,{timeout:15});it("SUN_SIGN",1,{timeout:15});it("ARCANA_1",1,{default:1});it("ARCANA_2",1,{default:1});it("ARCANA_3",1,{default:1});it("NEXT_DRAW",1);class vB extends Xt{constructor(t){super(t);const a=this.hasTraitUnlocked("ENHANCED_ESSENTIAL_DIGNITY_II")?3:this.hasTraitUnlocked("ENHANCED_ESSENTIAL_DIGNITY")?2:1,o=this.hasTraitUnlocked("ENHANCED_CELESTIAL_INTERSECTION")?2:1;this.cooldowns.set(new He("cd_ESSENTIAL_DIGNITY",40,a,a)),this.cooldowns.set(new He("cd_CELESTIAL_INTERSECTION",30,o,o)),this.cooldowns.set(new He("cd_SWIFTCAST",this.hasTraitUnlocked("ENHANCED_SWIFTCAST")?40:60,1,1)),this.registerRecurringEvents([{reportName:g({en:"Combust DoT",zh:"DoT"}),groupedEffects:[{effectName:"COMBUST_II",appliedBy:["COMBUST_II"]},{effectName:"COMBUST_III",appliedBy:["COMBUST_III"]}]},{isHealing:!0,groupedEffects:[{effectName:"WHEEL_OF_FORTUNE",appliedBy:["COLLECTIVE_UNCONSCIOUS"]}]},{isHealing:!0,groupedEffects:[{effectName:"OPPOSITION",appliedBy:["CELESTIAL_OPPOSITION"]}]},{isHealing:!0,groupedEffects:[{effectName:"ASPECTED_BENEFIC",appliedBy:["ASPECTED_BENEFIC"]}]},{isHealing:!0,groupedEffects:[{effectName:"ASPECTED_HELIOS",appliedBy:["ASPECTED_HELIOS"]},{effectName:"HELIOS_CONJUNCTION",appliedBy:["HELIOS_CONJUNCTION"]}]}])}drawnAstral(){return!this.hasResourceAvailable("NEXT_DRAW")}cancelChanneledSkills(){this.tryConsumeResource("COLLECTIVE_UNCONSCIOUS")}jobSpecificAddHealingBuffCovers(t,a){a.cdName==="cd_GCD"&&this.hasResourceAvailable("NEUTRAL_SECT")&&t.addBuff(k.NeutralSect),a.cdName==="cd_GCD"&&!a.aoeHeal&&this.hasResourceAvailable("SYNASTRY")&&t.addBuff(k.Synastry),this.hasResourceAvailable("THE_ARROW")&&t.addBuff(k.TheArrow)}jobSpecificAddDamageBuffCovers(t,a){this.hasResourceAvailable("DIVINATION")&&t.addBuff(k.Divination)}get statusPropsGenerator(){return new yB(this)}}const Sa=(e,t,a)=>{const o=c=>{if(!a.healingPotency)return[];const d=[];return c.hasResourceAvailable("SYNASTRY")&&!a.aoeHeal&&d.push(X.Synastry),c.hasResourceAvailable("NEUTRAL_SECT")&&d.push(X.NeutralSect),c.hasResourceAvailable("THE_ARROW")&&d.push(X.TheArrow),d},s=a.baseCastTime??0;return Ka("AST",e,t,{...a,jobHealingPotencyModifiers:o,jobPotencyModifiers:c=>c.hasResourceAvailable("DIVINATION")?[X.Divination]:[],castTime:c=>Math.max(0,c.config.adjustedCastTime(c.hasResourceAvailable("LIGHTSPEED")?s-2.5:s)),recastTime:c=>c.config.adjustedGCD(2.5),isInstantFn:c=>!a.baseCastTime||c.hasResourceAvailable("SWIFTCAST"),onConfirm:Me(s?c=>c.tryConsumeResource("SWIFTCAST"):void 0,a.onConfirm)})},Ia=(e,t,a,o)=>at("AST",e,t,a,{...o,jobHealingPotencyModifiers:o.healingPotency?s=>{const c=[];return s.hasResourceAvailable("THE_ARROW")&&c.push(X.TheArrow),e==="STELLAR_DETONATION"&&c.push(X.AstPet),c}:void 0,jobPotencyModifiers:s=>{const c=[];return s.hasResourceAvailable("DIVINATION")&&c.push(X.Divination),e==="STELLAR_DETONATION"&&c.push(X.AstPet),c}}),ps=(e,t,a,o)=>je("AST",e,t,a,{...o,jobHealingPotencyModifiers:s=>o.healingPotency&&s.hasResourceAvailable("THE_ARROW")?[X.TheArrow]:[],jobPotencyModifiers:o.potency?s=>s.hasResourceAvailable("DIVINATION")?[X.Divination]:[]:void 0});Sa("MALEFIC_III",64,{autoUpgrade:{otherSkill:"MALEFIC_IV",trait:"MALEFIC_MASTERY_III"},baseCastTime:1.5,applicationDelay:1.07,potency:190,manaCost:400});Sa("MALEFIC_IV",72,{autoDowngrade:{otherSkill:"MALEFIC_III",trait:"MALEFIC_MASTERY_III"},autoUpgrade:{otherSkill:"FALL_MALEFIC",trait:"MALEFIC_MASTERY_IV"},baseCastTime:1.5,applicationDelay:1.07,potency:230,manaCost:400});Sa("FALL_MALEFIC",82,{autoDowngrade:{otherSkill:"MALEFIC_IV",trait:"MALEFIC_MASTERY_IV"},baseCastTime:1.5,applicationDelay:1.07,potency:[["NEVER",250],["MAGICK_MASTERY_HEALER",270]],manaCost:400});Sa("COMBUST_II",46,{autoUpgrade:{otherSkill:"COMBUST_III",trait:"COMBUST_MASTERY_II"},applicationDelay:.62,manaCost:400,drawsAggro:!0,onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"COMBUST_II",skillName:"COMBUST_II",tickPotency:60,speedStat:"sps"})},onApplication:(e,t)=>e.applyDoT("COMBUST_II",t)});Sa("COMBUST_III",72,{autoDowngrade:{otherSkill:"COMBUST_II",trait:"COMBUST_MASTERY_II"},applicationDelay:.62,manaCost:400,drawsAggro:!0,onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"COMBUST_III",skillName:"COMBUST_III",tickPotency:e.hasTraitUnlocked("MAGICK_MASTERY_HEALER")?70:65,speedStat:"sps"})},onApplication:(e,t)=>e.applyDoT("COMBUST_III",t)});Sa("GRAVITY",45,{autoUpgrade:{otherSkill:"GRAVITY_II",trait:"GRAVITY_MASTERY"},baseCastTime:1.5,applicationDelay:1.16,potency:120,falloff:0,manaCost:400});Sa("GRAVITY_II",82,{autoDowngrade:{otherSkill:"GRAVITY",trait:"GRAVITY_MASTERY"},baseCastTime:1.5,applicationDelay:1.16,potency:[["NEVER",130],["MAGICK_MASTERY_HEALER",140]],falloff:0,manaCost:400});Sa("MACROCOSMOS",90,{applicationDelay:.75,secondaryCooldown:{cdName:"cd_MACROCOSMOS",cooldown:180,maxCharges:1},potency:[["NEVER",250],["MAGICK_MASTERY_HEALER",270]],falloff:.4,manaCost:600,replaceIf:[{newSkill:"MICROCOSMOS",condition:e=>e.hasResourceAvailable("MACROCOSMOS")}],onConfirm:e=>e.gainStatus("MACROCOSMOS")});Ia("MICROCOSMOS",90,"cd_MICROCOSMOS",{startOnHotbar:!1,applicationDelay:.045,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("MACROCOSMOS"),onConfirm:e=>e.tryConsumeResource("MACROCOSMOS")});Sa("ASPECTED_BENEFIC",34,{applicationDelay:.98,healingPotency:[["NEVER",200],["ENHANCED_HEALING_MAGIC",250]],manaCost:400,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"ASPECTED_BENEFIC",effectName:"ASPECTED_BENEFIC",speedStat:"sps",tickPotency:e.hasTraitUnlocked("ENHANCED_HEALING_MAGIC")?250:200}),e.hasResourceAvailable("NEUTRAL_SECT")&&e.gainStatus("NEUTRAL_SECT_SHIELD")},onApplication:(e,t)=>{e.applyHoT("ASPECTED_BENEFIC",t),e.gainStatus("ASPECTED_BENEFIC")}});Sa("BENEFIC",2,{baseCastTime:1.5,applicationDelay:.98,healingPotency:[["NEVER",450],["ENHANCED_HEALING_MAGIC",500]],manaCost:400});Sa("BENEFIC_II",26,{baseCastTime:1.5,applicationDelay:1.07,healingPotency:[["NEVER",700],["ENHANCED_HEALING_MAGIC",800]],manaCost:700});Sa("ASPECTED_HELIOS",40,{autoUpgrade:{otherSkill:"HELIOS_CONJUNCTION",trait:"ASPECTED_HELIOS_MASTERY"},baseCastTime:1.5,applicationDelay:1.07,healingPotency:[["NEVER",200],["ENHANCED_HEALING_MAGIC",250]],aoeHeal:!0,manaCost:800,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"ASPECTED_HELIOS",effectName:"ASPECTED_HELIOS",speedStat:"sps",tickPotency:e.hasTraitUnlocked("ENHANCED_HEALING_MAGIC")?150:100}),e.tryConsumeResource("HOROSCOPE")&&e.gainStatus("HOROSCOPE_HELIOS"),e.hasResourceAvailable("NEUTRAL_SECT")&&e.gainStatus("NEUTRAL_SECT_SHIELD")},onApplication:(e,t)=>{e.applyHoT("ASPECTED_HELIOS",t),e.gainStatus("ASPECTED_HELIOS")}});Sa("HELIOS_CONJUNCTION",96,{autoDowngrade:{otherSkill:"ASPECTED_HELIOS",trait:"ASPECTED_HELIOS_MASTERY"},baseCastTime:1.5,applicationDelay:1.07,healingPotency:250,aoeHeal:!0,manaCost:800,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"HELIOS_CONJUNCTION",effectName:"HELIOS_CONJUNCTION",speedStat:"sps",tickPotency:175}),e.tryConsumeResource("HOROSCOPE")&&e.gainStatus("HOROSCOPE_HELIOS"),e.hasResourceAvailable("NEUTRAL_SECT")&&e.gainStatus("NEUTRAL_SECT_SHIELD")},onApplication:(e,t)=>{e.applyHoT("HELIOS_CONJUNCTION",t),e.gainStatus("HELIOS_CONJUNCTION")}});Sa("HELIOS",10,{baseCastTime:1.5,applicationDelay:1.07,healingPotency:[["NEVER",300],["ENHANCED_HEALING_MAGIC",400]],aoeHeal:!0,manaCost:700,onConfirm:e=>{e.tryConsumeResource("HOROSCOPE")&&e.gainStatus("HOROSCOPE_HELIOS")}});Sa("ASCEND",12,{baseCastTime:8,applicationDelay:1.07,manaCost:2400});const yu=e=>e.drawnAstral(),vu=e=>!e.drawnAstral(),NO=e=>{(e.hasResourceAvailable("ARCANA_1")||e.drawnAstral()&&e.hasResourceAvailable("MINOR_ARCANA"))&&p.reportWarning({kind:"custom",en:"damage card overwritten!",zh:""}),e.resources.get("NEXT_DRAW").gainWrapping(1),["MINOR_ARCANA","ARCANA_1","ARCANA_2","ARCANA_3"].forEach(t=>e.resources.get(t).gain(1))},CO=e=>e.resources.get("MANA").gain(2e3);Ia("ASTRAL_DRAW",30,"cd_ASTRAL_DRAW",{replaceIf:[{newSkill:"UMBRAL_DRAW",condition:yu}],applicationDelay:0,cooldown:55,validateAttempt:vu,onConfirm:NO,onApplication:CO});Ia("UMBRAL_DRAW",30,"cd_ASTRAL_DRAW",{startOnHotbar:!1,replaceIf:[{newSkill:"ASTRAL_DRAW",condition:vu}],applicationDelay:0,cooldown:55,validateAttempt:yu,onConfirm:NO,onApplication:CO});const KT=(e,t,a)=>{console.assert(a.length===3);const o=[{newSkill:a[0],condition:s=>!s.hasResourceAvailable(t)},{newSkill:a[1],condition:s=>yu(s)&&s.hasResourceAvailable(t)},{newSkill:a[2],condition:s=>vu(s)&&s.hasResourceAvailable(t)}];o.forEach(({newSkill:s,condition:c},d)=>{const h=o.slice();h.splice(d,1),Ia(s,30,e,{startOnHotbar:d===0,replaceIf:h,applicationDelay:.62,cooldown:1,validateAttempt:d===0?()=>!1:c,onConfirm:d!==0?f=>f.tryConsumeResource(t):void 0,onApplication:d!==0?f=>f.gainStatus(s):void 0})})};KT("cd_PLAY_I","ARCANA_1",["PLAY_I","THE_BALANCE","THE_SPEAR"]);KT("cd_PLAY_II","ARCANA_2",["PLAY_II","THE_ARROW","THE_BOLE"]);KT("cd_PLAY_III","ARCANA_3",["PLAY_III","THE_SPIRE","THE_EWER"]);Ia("MINOR_ARCANA",70,"cd_MINOR_ARCANA",{applicationDelay:0,replaceIf:[{newSkill:"LORD_OF_CROWNS",condition:e=>yu(e)&&e.hasResourceAvailable("MINOR_ARCANA")},{newSkill:"LADY_OF_CROWNS",condition:e=>vu(e)&&e.hasResourceAvailable("MINOR_ARCANA")}],cooldown:1,validateAttempt:()=>!1});Ia("LORD_OF_CROWNS",70,"cd_MINOR_ARCANA",{startOnHotbar:!1,replaceIf:[{newSkill:"MINOR_ARCANA",condition:e=>!e.hasResourceAvailable("MINOR_ARCANA")},{newSkill:"LADY_OF_CROWNS",condition:e=>vu(e)&&e.hasResourceAvailable("MINOR_ARCANA")}],applicationDelay:.62,cooldown:1,potency:400,falloff:0,onConfirm:e=>e.tryConsumeResource("MINOR_ARCANA")});Ia("LADY_OF_CROWNS",70,"cd_MINOR_ARCANA",{startOnHotbar:!1,replaceIf:[{newSkill:"MINOR_ARCANA",condition:e=>!e.hasResourceAvailable("MINOR_ARCANA")},{newSkill:"LORD_OF_CROWNS",condition:e=>yu(e)&&e.hasResourceAvailable("MINOR_ARCANA")}],applicationDelay:.62,cooldown:1,healingPotency:400,aoeHeal:!0,onConfirm:e=>e.tryConsumeResource("MINOR_ARCANA")});ps("LIGHTSPEED",6,"cd_LIGHTSPEED",{rscType:"LIGHTSPEED",applicationDelay:0,cooldown:60,maxCharges:2});const bO=437,OO=1015;Ia("EARTHLY_STAR",62,"cd_EARTHLY_STAR",{applicationDelay:0,cooldown:60,falloff:0,replaceIf:[{newSkill:"STELLAR_DETONATION",condition:e=>e.hasResourceAvailable("EARTHLY_DOMINANCE")||e.hasResourceAvailable("GIANT_DOMINANCE")}],onConfirm:(e,t)=>{e.gainStatus("EARTHLY_DOMINANCE"),e.resources.addResourceEvent({rscType:"EARTHLY_DOMINANCE",name:"expand earthly star",delay:10,fnOnRsc:()=>{e.gainStatus("GIANT_DOMINANCE"),e.resources.addResourceEvent({rscType:"GIANT_DOMINANCE",name:"auto-detonate earthly star",delay:10,fnOnRsc:()=>{const a=[],o=new $t({config:e.config,sourceTime:e.getDisplayTime(),sourceSkill:"STELLAR_DETONATION",aspect:Ie.Other,basePotency:bO,snapshotTime:e.getDisplayTime(),description:"",targetCount:t.targetCount,falloff:0});e.hasResourceAvailable("TINCTURE")&&a.push(X.Tincture),e.hasResourceAvailable("DIVINATION")&&a.push(X.Divination),a.push(X.AstPet),o.modifiers=a,t.addPotency(o);const s=new $t({config:e.config,sourceTime:e.getDisplayTime(),sourceSkill:"STELLAR_DETONATION",aspect:Ie.Other,basePotency:OO,snapshotTime:e.getDisplayTime(),description:"",targetCount:t.healTargetCount,falloff:0});e.hasResourceAvailable("THE_ARROW"),t.addHealingPotency(s),p.resolvePotency(o),p.resolveHealingPotency(s)}})}})}});Ia("STELLAR_DETONATION",62,"cd_STELLAR_DETONATION",{startOnHotbar:!1,applicationDelay:.53,cooldown:3,potency:e=>e.hasResourceAvailable("GIANT_DOMINANCE")?bO:290,falloff:0,healingPotency:e=>e.hasResourceAvailable("GIANT_DOMINANCE")?OO:762,aoeHeal:!0,validateAttempt:e=>e.hasResourceAvailable("EARTHLY_DOMINANCE")||e.hasResourceAvailable("GIANT_DOMINANCE"),onConfirm:e=>{e.tryConsumeResource("EARTHLY_DOMINANCE"),e.tryConsumeResource("GIANT_DOMINANCE")}});ps("DIVINATION",50,"cd_DIVINATION",{rscType:"DIVINATION",applicationDelay:.62,cooldown:120,replaceIf:[{newSkill:"ORACLE",condition:e=>e.hasResourceAvailable("DIVINING")}],onConfirm:e=>e.gainStatus("DIVINING")});Ia("ORACLE",92,"cd_ORACLE",{startOnHotbar:!1,applicationDelay:1.74,cooldown:1,potency:860,falloff:.5,highlightIf:e=>e.hasResourceAvailable("DIVINING"),validateAttempt:e=>e.hasResourceAvailable("DIVINING"),onConfirm:e=>e.tryConsumeResource("DIVINING")});Ia("ESSENTIAL_DIGNITY",15,"cd_ESSENTIAL_DIGNITY",{applicationDelay:.62,cooldown:40,maxCharges:3,healingPotency:400});ps("SYNASTRY",50,"cd_SYNASTRY",{rscType:"SYNASTRY",applicationDelay:.62,cooldown:120});ps("EXALTATION",86,"cd_EXALTATION",{rscType:"EXALTATION",applicationDelay:.71,cooldown:60});Ia("COLLECTIVE_UNCONSCIOUS",58,"cd_COLLECTIVE_UNCONSCIOUS",{applicationDelay:.42,cooldown:60,onConfirm:(e,t)=>{e.gainStatus("COLLECTIVE_UNCONSCIOUS"),e.gainStatus("COLLECTIVE_UNCONSCIOUS_MIT"),e.addHoTPotencies({node:t,skillName:"COLLECTIVE_UNCONSCIOUS",effectName:"WHEEL_OF_FORTUNE",speedStat:"sps",tickPotency:100})},onApplication:e=>e.gainStatus("WHEEL_OF_FORTUNE")});Ia("CELESTIAL_OPPOSITION",60,"cd_CELESTIAL_OPPOSITION",{applicationDelay:1.07,cooldown:60,healingPotency:200,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"CELESTIAL_OPPOSITION",effectName:"OPPOSITION",speedStat:"sps",tickPotency:100})},onApplication:e=>e.gainStatus("OPPOSITION")});Ia("CELESTIAL_INTERSECTION",74,"cd_CELESTIAL_INTERSECTION",{applicationDelay:0,cooldown:30,maxCharges:1,healingPotency:200,aoeHeal:!0});ps("HOROSCOPE",76,"cd_HOROSCOPE",{rscType:"HOROSCOPE",applicationDelay:0,cooldown:60,replaceIf:[{newSkill:"HOROSCOPE_RECAST",condition:e=>e.hasResourceAvailable("HOROSCOPE_HELIOS")||e.hasResourceAvailable("HOROSCOPE")}]});Ia("HOROSCOPE_RECAST",76,"cd_HOROSCOPE_RECAST",{startOnHotbar:!1,applicationDelay:.62,cooldown:1,healingPotency:e=>e.hasResourceAvailable("HOROSCOPE_HELIOS")?400:200,aoeHeal:!0,validateAttempt:e=>e.hasResourceAvailable("HOROSCOPE_HELIOS")||e.hasResourceAvailable("HOROSCOPE"),onConfirm:e=>e.tryConsumeResource("HOROSCOPE_HELIOS")||e.tryConsumeResource("HOROSCOPE")});ps("NEUTRAL_SECT",80,"cd_NEUTRAL_SECT",{rscType:"NEUTRAL_SECT",applicationDelay:.62,cooldown:120,replaceIf:[{newSkill:"SUN_SIGN",condition:e=>e.hasResourceAvailable("SUNTOUCHED")}],onConfirm:e=>e.gainStatus("SUNTOUCHED")});ps("SUN_SIGN",100,"cd_SUN_SIGN",{startOnHotbar:!1,rscType:"SUN_SIGN",applicationDelay:1.47,cooldown:1,highlightIf:e=>e.hasResourceAvailable("SUNTOUCHED"),validateAttempt:e=>e.hasResourceAvailable("SUNTOUCHED"),onConfirm:e=>e.tryConsumeResource("SUNTOUCHED")});Object.keys(qR).forEach(e=>jt(e,`SCH/${we[e].name}.png`));const DO=["BIO_II","BIOLYSIS","CHAIN_STRATAGEM","BANEFUL_IMPACTION"],MB=Object.keys(qR).filter(e=>!DO.includes(e));class LB extends Wt{jobSpecificOtherTargetedBuffViewProps(){return[...DO.map(t=>this.makeCommonTimer(t))]}jobSpecificSelfTargetedBuffViewProps(){return[...MB.map(t=>t==="FEY_UNION"?this.makeCommonTimerless(t):t==="SACRED_SOIL_ZONE"?this.makeToggleableTimer(t):this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){const a=this.state.resources.get("SERAPH_SUMMON_TIMER"),o=a.available(1)?a.pendingChange?.timeTillEvent:void 0,s=this.state.resources.get("FAERIE_GAUGE").availableAmount(),c=this.state.resources.get("AETHERFLOW").availableAmount();return[{kind:"text",name:Ke("SERAPH_SUMMON_TIMER"),text:o?.toFixed(3)??"N/A",color:o?t.sch.seraph:void 0},{kind:"bar",name:Ke("FAERIE_GAUGE"),color:t.sch.faerieGauge,progress:s/100,valueString:s.toFixed(0)},{kind:"counter",name:Ke("AETHERFLOW"),color:t.sch.aetherflow,currentStacks:c,maxStacks:3,valueString:c.toFixed(0)}]}}const Mt=(e,t,a)=>{Ve("SCH",e,t,a??{})};Mt("AETHERFLOW",3,{warnOnOvercap:!0});Mt("FAERIE_GAUGE",100);Mt("BIO_II",1,{timeout:30});Mt("CATALYZE",1,{timeout:30});Mt("GALVANIZE",1,{timeout:30});Mt("WHISPERING_DAWN",1,{timeout:21});Mt("ANGELS_WHISPER",1,{timeout:21});Mt("FEY_ILLUMINATION",1,{timeout:20});Mt("SERAPHIC_ILLUMINATION",1,{timeout:20});Mt("SACRED_SOIL_ZONE",1,{timeout:15});Mt("SACRED_SOIL_MIT",1,{timeout:4.96});Mt("EMERGENCY_TACTICS",1,{timeout:15});Mt("DISSIPATION",1,{timeout:30});Mt("EXCOGITATION",1,{timeout:45});Mt("CHAIN_STRATAGEM",1,{timeout:20});Mt("IMPACT_IMMINENT",1,{timeout:30,warnOnTimeout:!0});Mt("BIOLYSIS",1,{timeout:30});Mt("RECITATION",1,{timeout:15});Mt("FEY_UNION",1);Mt("SERAPHIC_VEIL",1,{timeout:30});Mt("PROTRACTION",1,{timeout:10});Mt("EXPEDIENCE",1,{timeout:10});Mt("DESPERATE_MEASURES",1,{timeout:20});Mt("BANEFUL_IMPACTION",1,{timeout:15});Mt("SERAPHISM",1,{timeout:20});Mt("SERAPHISM_REGEN",1,{timeout:5});Mt("SERAPH_SUMMON_TIMER",1,{timeout:22});const Mu=.09,Lu=new Map([["FEY_BLESSING",.667],["WHISPERING_DAWN",1.156],["CONSOLATION",.889],["ANGELS_WHISPER",1.029],["AETHERPACT",.668],["FEY_ILLUMINATION",1.205]]);class xB extends Xt{nextEstimatedPetApplication;constructor(t){super(t),this.nextEstimatedPetApplication=void 0;const a=this.hasTraitUnlocked("ENHANCED_DEPLOYMENT_TACTICS")?90:120,o=this.hasTraitUnlocked("ENHANCED_RECITATION")?60:90;this.cooldowns.set(new He("cd_DEPLOYMENT_TACTICS",a,1,1)),this.cooldowns.set(new He("cd_RECITATION",o,1,1)),this.cooldowns.set(new He("cd_SWIFTCAST",this.hasTraitUnlocked("ENHANCED_SWIFTCAST")?40:60,1,1)),this.registerRecurringEvents([{reportName:g({en:"Bio/Biolysis DoT",zh:"DoT"}),groupedEffects:[{effectName:"BIO_II",appliedBy:["BIO_II"]},{effectName:"BIOLYSIS",appliedBy:["BIOLYSIS"]}]},{groupedEffects:[{effectName:"BANEFUL_IMPACTION",appliedBy:["BANEFUL_IMPACTION"]}]},{isHealing:!0,groupedEffects:[{effectName:"WHISPERING_DAWN",appliedBy:["WHISPERING_DAWN"]},{effectName:"ANGELS_WHISPER",appliedBy:["WHISPERING_DAWN"]}]},{isHealing:!0,groupedEffects:[{effectName:"SACRED_SOIL_MIT",appliedBy:["SACRED_SOIL"],isGroundTargeted:!0}]},{isHealing:!0,groupedEffects:[{effectName:"SERAPHISM_REGEN",appliedBy:["SERAPHISM"]}]}])}jobSpecificAddHealingBuffCovers(t,a){a.cdName==="cd_GCD"&&((this.hasResourceAvailable("FEY_ILLUMINATION")||this.hasResourceAvailable("SERAPHIC_ILLUMINATION"))&&t.addBuff(k.FeyIllumination),this.hasResourceAvailable("DISSIPATION")&&t.addBuff(k.Dissipation)),this.hasResourceAvailable("PROTRACTION")&&t.addBuff(k.Protraction);const o=["ADLOQUIUM","SUCCOR","CONCITATION","EXCOGITATION","INDOMITABILITY"];this.hasResourceAvailable("RECITATION")&&o.includes(a.name)&&t.addBuff(k.Recitation)}jobSpecificAddDamageBuffCovers(t,a){this.hasResourceAvailable("CHAIN_STRATAGEM")&&t.addBuff(k.ChainStratagem)}jobSpecificRegisterRecurringEvents(){const t=()=>new Ce("sch special hot ticks",3,()=>{this.hasResourceAvailable("FEY_UNION")&&this.resources.get("FAERIE_GAUGE").available(10)&&this.resources.get("FAERIE_GAUGE").consume(10),this.resources.get("FAERIE_GAUGE").available(10)||this.tryConsumeResource("FEY_UNION"),this.hasResourceAvailable("SACRED_SOIL_ZONE")&&this.gainStatus("SACRED_SOIL_MIT"),this.hasResourceAvailable("SERAPHISM")&&this.gainStatus("SERAPHISM_REGEN"),this.addEvent(t())});this.addEvent(new Ce("begin sch special hot ticks",this.hotTickOffset,()=>this.addEvent(t())))}makePetPotency(t,a,o,s){const c=new $t({config:this.config,sourceTime:o,sourceSkill:a,aspect:Ie.Other,basePotency:s,snapshotTime:this.getDisplayTime(),description:"",targetCount:t,falloff:void 0}),d=[X.SchPet];return c.modifiers=d,c}queuePetAction(t,a,o,s,c,d){const h=this.getDisplayTime();this.nextEstimatedPetApplication=h+s+c;const f=this.resources.get("SERAPH_SUMMON_TIMER").pendingChange?.timeTillEvent;f!==void 0&&this.nextEstimatedPetApplication>f+h&&p.reportWarning({kind:"custom",en:`${fi(a)} is likely to ghost when seraph leaves!`}),this.addEvent(new Ce(o+" pet snapshot",s,()=>{const m=d(this);this.addEvent(new Ce(o+" application",c,()=>{m(this)}))}))}warnLastPetGhost(){this.nextEstimatedPetApplication!==void 0&&this.nextEstimatedPetApplication>this.getDisplayTime()&&p.reportWarning({kind:"custom",en:"previous pet command is likely to ghost!"})}hasRealFairy(){return!this.hasResourceAvailable("DISSIPATION")&&!this.hasResourceAvailable("SERAPH_SUMMON_TIMER")}maybeChainModifier(){return this.hasResourceAvailable("CHAIN_STRATAGEM")?[X.ChainStrat]:[]}maybeGainFaerieGauge(){this.hasResourceAvailable("DISSIPATION")||this.resources.get("FAERIE_GAUGE").gain(10)}addHealingMagicPotencyModifiers(t){(this.hasResourceAvailable("FEY_ILLUMINATION")||this.hasResourceAvailable("SERAPHIC_ILLUMINATION"))&&t.push(X.FeyIllum),this.hasResourceAvailable("DISSIPATION")&&t.push(X.Dissipation)}addHealingActionPotencyModifiers(t){this.hasResourceAvailable("PROTRACTION")&&t.push(X.Protraction)}get statusPropsGenerator(){return new LB(this)}}const _a=(e,t,a)=>Ka("SCH",e,t,{...a,castTime:s=>s.config.adjustedCastTime(a.baseCastTime??0),recastTime:s=>s.config.adjustedGCD(2.5),isInstantFn:s=>!a.baseCastTime||s.hasResourceAvailable("SWIFTCAST"),jobPotencyModifiers:s=>s.maybeChainModifier(),jobHealingPotencyModifiers:s=>{if(!a.healingPotency)return[];const c=[];return s.addHealingMagicPotencyModifiers(c),s.addHealingActionPotencyModifiers(c),s.hasResourceAvailable("RECITATION")&&e!=="ACCESSION"&&e!=="MANIFESTATION"&&c.push(X.AutoCrit),c},onConfirm:Me(a.baseCastTime?s=>s.tryConsumeResource("SWIFTCAST"):void 0,a.onConfirm)}),xa=(e,t,a,o)=>at("SCH",e,t,a,{...o,jobPotencyModifiers:c=>c.maybeChainModifier(),jobHealingPotencyModifiers:c=>{if(!o.healingPotency)return[];const d=[];return c.addHealingActionPotencyModifiers(d),c.hasResourceAvailable("RECITATION")&&(e==="INDOMITABILITY"||e==="EXCOGITATION")&&d.push(X.AutoCrit),d}}),bl=(e,t,a,o)=>je("SCH",e,t,a,o),yO=[{newSkill:"ADLOQUIUM",condition:e=>!e.hasResourceAvailable("SERAPHISM")},{newSkill:"MANIFESTATION",condition:e=>e.hasResourceAvailable("SERAPHISM")}],vO=[{newSkill:"CONCITATION",condition:e=>!e.hasResourceAvailable("SERAPHISM")},{newSkill:"ACCESSION",condition:e=>e.hasResourceAvailable("SERAPHISM")}];_a("BROIL_II",64,{autoUpgrade:{otherSkill:"BROIL_III",trait:"BROIL_MASTERY_III"},applicationDelay:.8,baseCastTime:1.5,manaCost:400,potency:240});_a("BROIL_III",72,{autoDowngrade:{otherSkill:"BROIL_II",trait:"BROIL_MASTERY_III"},autoUpgrade:{otherSkill:"BROIL_IV",trait:"BROIL_MASTERY_IV"},applicationDelay:.8,baseCastTime:1.5,manaCost:400,potency:255});_a("BROIL_IV",82,{autoDowngrade:{otherSkill:"BROIL_III",trait:"BROIL_MASTERY_IV"},applicationDelay:.8,baseCastTime:1.5,manaCost:400,potency:[["NEVER",295],["TACTICIANS_MASTERY",320]]});_a("BIO_II",26,{autoUpgrade:{otherSkill:"BIOLYSIS",trait:"CORRUPTION_MASTERY_II"},applicationDelay:1.15,baseCastTime:0,manaCost:300,drawsAggro:!0,onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"BIO_II",skillName:"BIO_II",tickPotency:40,speedStat:"sps",modifiers:e.maybeChainModifier()})},onApplication:(e,t)=>e.applyDoT("BIO_II",t)});_a("BIOLYSIS",72,{autoDowngrade:{otherSkill:"BIO_II",trait:"CORRUPTION_MASTERY_II"},applicationDelay:.67,baseCastTime:0,manaCost:300,drawsAggro:!0,onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"BIOLYSIS",skillName:"BIOLYSIS",tickPotency:e.hasTraitUnlocked("TACTICIANS_MASTERY")?85:70,speedStat:"sps",modifiers:e.maybeChainModifier()})},onApplication:(e,t)=>e.applyDoT("BIOLYSIS",t)});_a("RUIN_II",38,{applicationDelay:.94,potency:[["NEVER",200],["BROIL_MASTERY_IV",220]],baseCastTime:0,manaCost:400});_a("ART_OF_WAR",46,{autoUpgrade:{otherSkill:"ART_OF_WAR_II",trait:"ART_OF_WAR_MASTERY"},applicationDelay:.67,baseCastTime:0,manaCost:400,potency:165,falloff:0});_a("ART_OF_WAR_II",82,{autoDowngrade:{otherSkill:"ART_OF_WAR",trait:"ART_OF_WAR_MASTERY"},applicationDelay:.67,baseCastTime:0,manaCost:400,potency:180,falloff:0});bl("CHAIN_STRATAGEM",66,"cd_CHAIN_STRATAGEM",{replaceIf:[{newSkill:"BANEFUL_IMPACTION",condition:e=>e.hasResourceAvailable("IMPACT_IMMINENT")}],rscType:"CHAIN_STRATAGEM",applicationDelay:.8,cooldown:120,onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_CHAIN_STRATAGEM")&&e.gainStatus("IMPACT_IMMINENT")}});xa("BANEFUL_IMPACTION",92,"cd_BANEFUL_IMPACTION",{startOnHotbar:!1,applicationDelay:1.29,cooldown:1,falloff:0,highlightIf:e=>e.hasResourceAvailable("IMPACT_IMMINENT"),validateAttempt:e=>e.hasResourceAvailable("IMPACT_IMMINENT"),onConfirm:(e,t)=>{e.tryConsumeResource("IMPACT_IMMINENT"),e.addDoTPotencies({node:t,effectName:"BANEFUL_IMPACTION",skillName:"BANEFUL_IMPACTION",tickPotency:140,speedStat:"sps",modifiers:e.maybeChainModifier()})},onApplication:(e,t)=>e.applyDoT("BANEFUL_IMPACTION",t)});xa("ENERGY_DRAIN",45,"cd_ENERGY_DRAIN",{applicationDelay:1.07,cooldown:1,potency:100,validateAttempt:e=>e.hasResourceAvailable("AETHERFLOW"),onConfirm:e=>{e.maybeGainFaerieGauge(),e.tryConsumeResource("AETHERFLOW")}});const HB=900,MO=900;_a("ADLOQUIUM",30,{replaceIf:yO,applicationDelay:.98,baseCastTime:2,manaCost:e=>e.hasResourceAvailable("RECITATION")?0:HB,healingPotency:300,onConfirm:e=>{const t=e.tryConsumeResource("EMERGENCY_TACTICS");t||e.gainStatus("GALVANIZE"),(e.tryConsumeResource("RECITATION")||e.triggersEffect(e.config.critRate))&&!t&&e.gainStatus("CATALYZE")}});const LO=e=>{e.tryConsumeResource("EMERGENCY_TACTICS")||e.gainStatus("GALVANIZE")};_a("SUCCOR",35,{autoUpgrade:{otherSkill:"CONCITATION",trait:"SUCCOR_MASTERY"},applicationDelay:1.12,baseCastTime:2,manaCost:e=>e.hasResourceAvailable("RECITATION")?0:MO,healingPotency:200,onConfirm:LO});_a("CONCITATION",96,{autoDowngrade:{otherSkill:"CONCITATION",trait:"SUCCOR_MASTERY"},replaceIf:vO,applicationDelay:1.12,baseCastTime:2,manaCost:e=>e.hasResourceAvailable("RECITATION")?0:MO,healingPotency:200,onConfirm:LO});_a("PHYSICK",4,{applicationDelay:1.03,healingPotency:[["NEVER",400],["ENHANCED_HEALING_MAGIC",450]],baseCastTime:1.5,manaCost:300});_a("RESURRECTION",12,{applicationDelay:.98,baseCastTime:8,manaCost:2400});xa("AETHERFLOW",45,"cd_AETHERFLOW",{applicationDelay:0,cooldown:60,requiresCombat:!0,onConfirm:e=>{e.resources.get("MANA").gain(2e3),e.resources.get("AETHERFLOW").gain(3)}});bl("DISSIPATION",60,"cd_DISSIPATION",{rscType:"DISSIPATION",applicationDelay:0,cooldown:180,requiresCombat:!0,validateAttempt:e=>!e.hasResourceAvailable("SERAPH_SUMMON_TIMER"),onConfirm:e=>{e.warnLastPetGhost(),e.resources.get("AETHERFLOW").gain(3),e.tryConsumeResource("SERAPHISM")}});xa("LUSTRATE",45,"cd_LUSTRATE",{applicationDelay:.62,cooldown:1,healingPotency:600,validateAttempt:e=>e.hasResourceAvailable("AETHERFLOW"),onConfirm:e=>{e.maybeGainFaerieGauge(),e.tryConsumeResource("AETHERFLOW")}});bl("SACRED_SOIL",50,"cd_SACRED_SOIL",{rscType:"SACRED_SOIL_ZONE",applicationDelay:.62,cooldown:30,validateAttempt:e=>e.hasResourceAvailable("AETHERFLOW"),onConfirm:(e,t)=>{e.maybeGainFaerieGauge(),e.tryConsumeResource("AETHERFLOW"),e.hasTraitUnlocked("ENHANCED_SACRED_SOIL")&&e.addHoTPotencies({node:t,skillName:"SACRED_SOIL",effectName:"SACRED_SOIL_MIT",speedStat:"sps",tickPotency:100},34.96+.62)},onApplication:(e,t)=>{e.hasTraitUnlocked("ENHANCED_SACRED_SOIL")&&(e.applyHoT("SACRED_SOIL_MIT",t,34.96),e.gainStatus("SACRED_SOIL_MIT"))}});bl("EXCOGITATION",62,"cd_EXCOGITATION",{rscType:"EXCOGITATION",applicationDelay:.8,cooldown:45,healingPotency:800,validateAttempt:e=>e.hasResourceAvailable("RECITATION")||e.hasResourceAvailable("AETHERFLOW"),onConfirm:e=>{e.maybeGainFaerieGauge(),e.tryConsumeResource("RECITATION")||e.tryConsumeResource("AETHERFLOW")}});xa("INDOMITABILITY",52,"cd_INDOMITABILITY",{applicationDelay:.62,cooldown:30,healingPotency:400,validateAttempt:e=>e.hasResourceAvailable("RECITATION")||e.hasResourceAvailable("AETHERFLOW"),onConfirm:e=>{e.maybeGainFaerieGauge(),e.tryConsumeResource("RECITATION")||e.tryConsumeResource("AETHERFLOW")}});xa("WHISPERING_DAWN",20,"cd_WHISPERING_DAWN",{applicationDelay:0,cooldown:60,validateAttempt:e=>!e.hasResourceAvailable("DISSIPATION"),onConfirm:(e,t)=>{e.tryConsumeResource("FEY_UNION");const a=e.hasResourceAvailable("SERAPH_SUMMON_TIMER")?"ANGELS_WHISPER":"WHISPERING_DAWN",o=s=>(s.addHoTPotencies({node:t,skillName:"WHISPERING_DAWN",effectName:a,speedStat:"sps",tickPotency:80}),c=>{c.applyHoT(a,t),t.getHotPotencies("WHISPERING_DAWN").forEach(d=>{d.modifiers.includes(X.SchPet)||d.modifiers.push(X.SchPet)}),c.gainStatus(a)});e.queuePetAction(t,"WHISPERING_DAWN",a,Mu,Lu.get(a),o)}});xa("FEY_ILLUMINATION",40,"cd_FEY_ILLUMINATION",{applicationDelay:0,cooldown:120,validateAttempt:e=>!e.hasResourceAvailable("DISSIPATION"),onConfirm:(e,t)=>{e.tryConsumeResource("FEY_UNION");const a=e.hasResourceAvailable("SERAPH_SUMMON_TIMER")?"SERAPHIC_ILLUMINATION":"FEY_ILLUMINATION",o=s=>c=>c.gainStatus(a);e.queuePetAction(t,"FEY_ILLUMINATION","FEY_ILLUMINATION",Mu,Lu.get("FEY_ILLUMINATION"),o)}});xa("DEPLOYMENT_TACTICS",56,"cd_DEPLOYMENT_TACTICS",{applicationDelay:.89,cooldown:120});bl("EMERGENCY_TACTICS",58,"cd_EMERGENCY_TACTICS",{rscType:"EMERGENCY_TACTICS",applicationDelay:0,cooldown:15});xa("AETHERPACT",70,"cd_AETHERPACT",{replaceIf:[{newSkill:"DISSOLVE_UNION",condition:e=>e.hasResourceAvailable("FEY_UNION")}],applicationDelay:0,cooldown:3,validateAttempt:e=>e.resources.get("FAERIE_GAUGE").available(10)&&e.hasRealFairy(),onConfirm:(e,t)=>{e.gainStatus("FEY_UNION");const a=o=>s=>s.gainStatus("FEY_UNION");e.queuePetAction(t,"AETHERPACT","AETHERPACT",Mu,Lu.get("AETHERPACT"),a)}});xa("DISSOLVE_UNION",70,"cd_DISSOLVE_UNION",{startOnHotbar:!1,applicationDelay:0,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("FEY_UNION"),onConfirm:e=>e.tryConsumeResource("FEY_UNION")});bl("RECITATION",74,"cd_RECITATION",{rscType:"RECITATION",applicationDelay:0,cooldown:90});xa("FEY_BLESSING",76,"cd_FEY_BLESSING",{applicationDelay:0,cooldown:60,healingPotency:320,validateAttempt:e=>e.hasRealFairy(),onConfirm:(e,t)=>{e.tryConsumeResource("FEY_UNION");const a=o=>{const s=o.makePetPotency(t.healTargetCount,"FEY_BLESSING",o.getDisplayTime(),320);return o.addHealingActionPotencyModifiers(s.modifiers),c=>p.resolveHealingPotency(s)};e.queuePetAction(t,"FEY_BLESSING","FEY_BLESSING",Mu,Lu.get("FEY_BLESSING"),a)}});xa("SUMMON_SERAPH",80,"cd_SUMMON_SERAPH",{replaceIf:[{newSkill:"CONSOLATION",condition:e=>e.hasResourceAvailable("SERAPH_SUMMON_TIMER")}],applicationDelay:0,cooldown:120,validateAttempt:e=>e.hasRealFairy(),onConfirm:e=>{e.warnLastPetGhost(),e.gainStatus("SERAPH_SUMMON_TIMER"),e.tryConsumeResource("FEY_UNION")}});xa("CONSOLATION",80,"cd_CONSOLATION",{startOnHotbar:!1,applicationDelay:0,cooldown:1,secondaryCooldown:{cdName:"cd_CONSOLATION_INTERNAL",cooldown:30,maxCharges:2},healingPotency:250,validateAttempt:e=>e.hasResourceAvailable("SERAPH_SUMMON_TIMER"),onConfirm:(e,t)=>{const a=o=>{const s=o.makePetPotency(t.healTargetCount,"CONSOLATION",o.getDisplayTime(),250);return c=>{c.gainStatus("SERAPHIC_VEIL"),p.resolveHealingPotency(s)}};e.queuePetAction(t,"CONSOLATION","CONSOLATION",Mu,Lu.get("CONSOLATION"),a)}});bl("PROTRACTION",86,"cd_PROTRACTION",{rscType:"PROTRACTION",applicationDelay:.76,cooldown:60});xa("EXPEDIENT",90,"cd_EXPEDIENT",{applicationDelay:0,cooldown:120,onConfirm:e=>{e.gainStatus("EXPEDIENCE"),e.gainStatus("DESPERATE_MEASURES")}});bl("SERAPHISM",100,"cd_SERAPHISM",{requiresCombat:!0,rscType:"SERAPHISM",applicationDelay:0,cooldown:180,validateAttempt:e=>!e.hasResourceAvailable("DISSIPATION"),onConfirm:(e,t)=>{const a=e.cooldowns.get("cd_EMERGENCY_TACTICS");a.restore(15),e.cooldowns.set(new He("cd_EMERGENCY_TACTICS",1,1,1)),e.addEvent(new Ce("restore etact cd",e.getStatusDuration("SERAPHISM"),()=>e.cooldowns.set(a))),e.addHoTPotencies({node:t,skillName:"SERAPHISM",effectName:"SERAPHISM_REGEN",speedStat:"sps",tickPotency:100},24.96)},onApplication:(e,t)=>{e.applyHoT("SERAPHISM_REGEN",t,24.96),e.gainStatus("SERAPHISM_REGEN")}});_a("MANIFESTATION",100,{startOnHotbar:!1,replaceIf:yO,applicationDelay:1.16,healingPotency:360,baseCastTime:0,manaCost:900,validateAttempt:e=>e.hasResourceAvailable("SERAPHISM"),onConfirm:e=>{e.tryConsumeResource("EMERGENCY_TACTICS")||(e.gainStatus("GALVANIZE"),e.triggersEffect(e.config.critRate)&&e.gainStatus("CATALYZE"))}});_a("ACCESSION",100,{startOnHotbar:!1,replaceIf:vO,applicationDelay:.98,healingPotency:240,baseCastTime:0,manaCost:900,validateAttempt:e=>e.hasResourceAvailable("SERAPHISM"),onConfirm:e=>!e.tryConsumeResource("EMERGENCY_TACTICS")&&e.gainStatus("GALVANIZE")});Object.keys($R).forEach(e=>jt(e,`WHM/${we[e].name}.png`));const xO=["AERO_II","DIA"],kB=Object.keys($R).filter(e=>!xO.includes(e));class UB extends Wt{jobSpecificOtherTargetedBuffViewProps(){return[...xO.map(t=>this.makeCommonTimer(t))]}jobSpecificSelfTargetedBuffViewProps(){return[...kB.map(t=>this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){const a=this.state.resources,o=a.get("LILLIES"),s=a.get("LILY_TIMER").available(1)?a.timeTillReady("LILY_TIMER"):20,c=o.availableAmount(),d=a.get("BLOOD_LILY").availableAmount(),h=[{kind:"bar",name:Ke("LILY_TIMER"),color:t.whm.lily,progress:1-s/20,valueString:s.toFixed(3)},{kind:"counter",name:Ke("LILLIES"),color:t.whm.lily,currentStacks:c,maxStacks:3}];return this.state.hasTraitUnlocked("TRANSCENDENT_AFFLATUS")&&h.push({kind:"counter",name:Ke("BLOOD_LILY"),color:t.whm.blood,currentStacks:d,maxStacks:3}),h}}const Tn=(e,t,a)=>{Ve("WHM",e,t,a??{})};Tn("LILLIES",3,{default:3});Tn("LILY_TIMER",1);Tn("BLOOD_LILY",3,{default:3,warnOnOvercap:!0});Tn("FREECURE",1,{timeout:15});Tn("PRESENCE_OF_MIND",1,{timeout:15});Tn("SACRED_SIGHT",3,{timeout:30,warnOnTimeout:!0});Tn("REGEN",1,{timeout:18});Tn("AERO_II",1,{timeout:30});Tn("MEDICA_II",1,{timeout:15});Tn("ASYLUM",1,{timeout:24});Tn("THIN_AIR",1,{timeout:12});Tn("DIVINE_BENISON",1,{timeout:15});Tn("CONFESSION",1,{timeout:10});Tn("DIA",1,{timeout:30});Tn("TEMPERANCE",1,{timeout:20});Tn("DIVINE_GRACE",1,{timeout:30});Tn("AQUAVEIL",1,{timeout:8});Tn("LITURGY_OF_THE_BELL",5,{timeout:20});Tn("MEDICA_III",1,{timeout:15});Tn("DIVINE_CARESS",1,{timeout:10});Tn("DIVINE_AURA",1,{timeout:15});class PB extends Xt{constructor(t){super(t);const a=this.hasTraitUnlocked("ENHANCED_DIVINE_BENISON")?2:1,o=this.hasTraitUnlocked("ENHANCED_TETRAGRAMMATON")?2:1;this.cooldowns.set(new He("cd_DIVINE_BENISON",30,a,a)),this.cooldowns.set(new He("cd_TETRAGRAMMATON",60,o,o)),this.cooldowns.set(new He("cd_SWIFTCAST",this.hasTraitUnlocked("ENHANCED_SWIFTCAST")?40:60,1,1)),this.registerRecurringEvents([{reportName:g({en:"Dia/Aero DoT",zh:"/DoT"}),groupedEffects:[{effectName:"AERO_II",appliedBy:["AERO_II"]},{effectName:"DIA",appliedBy:["DIA"]}]},{isHealing:!0,groupedEffects:[{effectName:"DIVINE_AURA",appliedBy:["DIVINE_CARESS"]}]},{isHealing:!0,groupedEffects:[{effectName:"ASYLUM",appliedBy:["ASYLUM"]}]},{isHealing:!0,groupedEffects:[{effectName:"REGEN",appliedBy:["REGEN"]}]},{isHealing:!0,groupedEffects:[{effectName:"MEDICA_II",appliedBy:["MEDICA_II"]},{effectName:"MEDICA_III",appliedBy:["MEDICA_III"]}]}])}jobSpecificRegisterRecurringEvents(){(this.isInCombat()||this.hasResourceAvailable("LILY_TIMER"))&&!this.hasResourceAvailable("LILLIES",3)&&this.startLilyTimer()}jobSpecificAddHealingBuffCovers(t,a){this.hasTraitUnlocked("ENHANCED_ASYLUM")&&this.hasResourceAvailable("ASYLUM")&&t.addBuff(k.Asylum),this.hasResourceAvailable("TEMPERANCE")&&t.addBuff(k.Temperance),a.cdName==="cd_GCD"&&a.aoeHeal&&this.hasResourceAvailable("CONFESSION")&&t.addBuff(k.Confession)}recurringLilyGain(){this.resources.addResourceEvent({rscType:"LILY_TIMER",name:"gain lily",delay:20,fnOnRsc:()=>{this.resources.get("LILLIES").gain(1),this.hasResourceAvailable("LILLIES",3)?this.tryConsumeResource("LILY_TIMER"):this.recurringLilyGain()}})}startLilyTimer(){this.hasResourceAvailable("LILY_TIMER")||this.hasResourceAvailable("LILLIES",3)||(this.resources.get("LILY_TIMER").gain(1),this.recurringLilyGain())}addHealingActionPotencyModifiers(t){this.hasTraitUnlocked("ENHANCED_ASYLUM")&&this.hasResourceAvailable("ASYLUM")&&t.push(X.Asylum),this.hasResourceAvailable("TEMPERANCE")&&t.push(X.Temperance)}get statusPropsGenerator(){return new UB(this)}}const vn=(e,t,a)=>{const o=s=>{if(!a.healingPotency)return[];const c=[];return s.hasResourceAvailable("CONFESSION")&&a.aoeHeal&&c.push(X.Confession),s.addHealingActionPotencyModifiers(c),c};return Ka("WHM",e,t,{...a,castTime:s=>s.config.adjustedCastTime(a.baseCastTime??0,s.hasResourceAvailable("PRESENCE_OF_MIND")?20:0),recastTime:s=>s.config.adjustedGCD(2.5,s.hasResourceAvailable("PRESENCE_OF_MIND")?20:0),isInstantFn:s=>!a.baseCastTime||s.hasResourceAvailable("SWIFTCAST"),manaCost:a.manaCost?s=>s.hasResourceAvailable("THIN_AIR")?0:da(a.manaCost)(s):void 0,jobHealingPotencyModifiers:o,onConfirm:Me(s=>s.tryConsumeResource("THIN_AIR"),a.baseCastTime?s=>s.tryConsumeResource("SWIFTCAST"):void 0,a.onConfirm),onApplication:Me(a.potency||e=="AFFLATUS_SOLACE"||e=="AFFLATUS_RAPTURE"?s=>s.startLilyTimer():void 0,a.onApplication)})},Ns=(e,t,a,o)=>at("WHM",e,t,a,{...o,jobHealingPotencyModifiers:c=>{if(!o.healingPotency)return[];const d=[];return o.isPetHeal&&d.push(X.WhmPet),c.addHealingActionPotencyModifiers(d),d}}),Ol=(e,t,a,o)=>je("WHM",e,t,a,{...o,jobHealingPotencyModifiers:c=>{if(!o.healingPotency)return[];const d=[];return c.addHealingActionPotencyModifiers(d),d}});vn("STONE_IV",64,{autoUpgrade:{otherSkill:"GLARE",trait:"STONE_MASTERY_IV"},applicationDelay:.8,baseCastTime:1.5,potency:260,manaCost:400});vn("GLARE",72,{autoDowngrade:{otherSkill:"STONE_IV",trait:"STONE_MASTERY_IV"},autoUpgrade:{otherSkill:"GLARE_III",trait:"GLARE_MASTERY"},applicationDelay:1.29,baseCastTime:1.5,potency:290,manaCost:400});vn("GLARE_III",82,{autoDowngrade:{otherSkill:"GLARE",trait:"GLARE_MASTERY"},applicationDelay:1.29,baseCastTime:1.5,potency:[["NEVER",310],["WHITE_MAGIC_MASTERY",350]],manaCost:400});vn("AERO_II",46,{autoUpgrade:{otherSkill:"DIA",trait:"AERO_MASTERY_II"},applicationDelay:1.15,potency:50,manaCost:200,onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"AERO_II",skillName:"AERO_II",tickPotency:50,speedStat:"sps"})},onApplication:(e,t)=>e.applyDoT("AERO_II",t)});vn("DIA",72,{autoDowngrade:{otherSkill:"AERO_II",trait:"AERO_MASTERY_II"},applicationDelay:1.29,potency:[["NEVER",65],["WHITE_MAGIC_MASTERY",85]],manaCost:400,onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"DIA",skillName:"DIA",tickPotency:e.hasTraitUnlocked("WHITE_MAGIC_MASTERY")?85:65,speedStat:"sps"})},onApplication:(e,t)=>e.applyDoT("DIA",t)});vn("HOLY",45,{autoUpgrade:{otherSkill:"HOLY_III",trait:"HOLY_MASTERY"},applicationDelay:2.13,potency:140,baseCastTime:1.5,falloff:0,manaCost:400});vn("HOLY_III",82,{autoDowngrade:{otherSkill:"HOLY",trait:"HOLY_MASTERY"},applicationDelay:2.13,potency:150,baseCastTime:1.5,falloff:0,manaCost:400});vn("AFFLATUS_MISERY",74,{applicationDelay:.58,potency:[["NEVER",1240],["WHITE_MAGIC_MASTERY",1400]],falloff:.5,manaCost:0,highlightIf:e=>e.hasResourceExactly("BLOOD_LILY",3),validateAttempt:e=>e.hasResourceExactly("BLOOD_LILY",3),onConfirm:e=>e.tryConsumeResource("BLOOD_LILY",!0)});vn("AFFLATUS_SOLACE",52,{applicationDelay:.53,healingPotency:[["NEVER",700],["ENHANCED_HEALING_MAGIC",800]],manaCost:0,validateAttempt:e=>e.hasResourceAvailable("LILLIES"),onConfirm:e=>{e.tryConsumeResource("LILLIES"),e.resources.get("BLOOD_LILY").gain(1)}});vn("AFFLATUS_RAPTURE",76,{applicationDelay:.58,healingPotency:[["NEVER",300],["ENHANCED_HEALING_MAGIC",400]],manaCost:0,aoeHeal:!0,validateAttempt:e=>e.hasResourceAvailable("LILLIES"),onConfirm:e=>{e.tryConsumeResource("LILLIES"),e.resources.get("BLOOD_LILY").gain(1)}});vn("REGEN",35,{applicationDelay:1.02,healingPotency:[["NEVER",200],["ENHANCED_HEALING_MAGIC",250]],manaCost:400,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"REGEN",effectName:"REGEN",speedStat:"sps",tickPotency:e.hasTraitUnlocked("ENHANCED_HEALING_MAGIC")?250:200})},onApplication:(e,t)=>{e.applyHoT("REGEN",t),e.gainStatus("REGEN")}});vn("CURE",2,{applicationDelay:1.03,healingPotency:[["NEVER",450],["ENHANCED_HEALING_MAGIC",500]],baseCastTime:1.5,manaCost:400,onConfirm:e=>e.maybeGainProc("FREECURE",.15)});vn("CURE_II",30,{applicationDelay:.98,healingPotency:[["NEVER",700],["ENHANCED_HEALING_MAGIC",800]],baseCastTime:2,manaCost:e=>e.hasResourceAvailable("FREECURE")?0:1e3,highlightIf:e=>e.hasResourceAvailable("FREECURE"),onConfirm:e=>e.tryConsumeResource("FREECURE")});vn("CURE_III",40,{applicationDelay:.98,healingPotency:[["NEVER",550],["ENHANCED_HEALING_MAGIC",600]],baseCastTime:2,manaCost:1500,aoeHeal:!0});vn("MEDICA",10,{applicationDelay:1.02,healingPotency:[["NEVER",300],["ENHANCED_HEALING_MAGIC",400]],baseCastTime:2,manaCost:900,aoeHeal:!0});vn("MEDICA_II",50,{autoUpgrade:{otherSkill:"MEDICA_III",trait:"MEDICA_MASTERY"},applicationDelay:.84,healingPotency:[["NEVER",200],["ENHANCED_HEALING_MAGIC",250]],baseCastTime:2,manaCost:1e3,aoeHeal:!0,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"MEDICA_II",effectName:"MEDICA_II",speedStat:"sps",tickPotency:e.hasTraitUnlocked("ENHANCED_HEALING_MAGIC")?150:100})},onApplication:(e,t)=>{e.applyHoT("MEDICA_II",t),e.gainStatus("MEDICA_II")}});vn("MEDICA_III",96,{autoDowngrade:{otherSkill:"MEDICA_II",trait:"MEDICA_MASTERY"},applicationDelay:.84,healingPotency:250,baseCastTime:2,manaCost:1e3,aoeHeal:!0,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"MEDICA_III",effectName:"MEDICA_III",speedStat:"sps",tickPotency:175})},onApplication:(e,t)=>{e.applyHoT("MEDICA_III",t),e.gainStatus("MEDICA_III")}});vn("RAISE",12,{baseCastTime:8,manaCost:2400,applicationDelay:1.16});Ns("ASSIZE",56,"cd_ASSIZE",{applicationDelay:.67,cooldown:40,potency:400,falloff:0,healingPotency:400,onApplication:e=>e.resources.get("MANA").gain(500)});Ol("PRESENCE_OF_MIND",30,"cd_PRESENCE_OF_MIND",{rscType:"PRESENCE_OF_MIND",applicationDelay:.53,cooldown:120,replaceIf:[{newSkill:"GLARE_IV",condition:e=>e.hasResourceAvailable("SACRED_SIGHT")}],onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_PRESENCE_OF_MIND")&&e.gainStatus("SACRED_SIGHT",3)}});vn("GLARE_IV",92,{startOnHotbar:!1,applicationDelay:.85,potency:640,falloff:.4,manaCost:0,highlightIf:e=>e.hasResourceAvailable("SACRED_SIGHT"),validateAttempt:e=>e.hasResourceAvailable("SACRED_SIGHT"),onConfirm:e=>e.tryConsumeResource("SACRED_SIGHT")});Ol("THIN_AIR",58,"cd_THIN_AIR",{rscType:"THIN_AIR",applicationDelay:0,cooldown:60,maxCharges:2});Ns("AETHERIAL_SHIFT",40,"cd_AETHERIAL_SHIFT",{applicationDelay:0,cooldown:60,animationLock:Vt});Ol("DIVINE_BENISON",66,"cd_DIVINE_BENISON",{rscType:"DIVINE_BENISON",applicationDelay:.8,cooldown:30,maxCharges:2});Ol("AQUAVEIL",86,"cd_AQUAVEIL",{rscType:"AQUAVEIL",applicationDelay:.62,cooldown:60});Ns("TETRAGRAMMATON",60,"cd_TETRAGRAMMATON",{applicationDelay:.53,cooldown:60,maxCharges:2,healingPotency:700});Ns("BENEDICTION",50,"cd_BENEDICTION",{applicationDelay:.62,cooldown:180});Ns("ASYLUM",52,"cd_ASYLUM",{applicationDelay:.85,cooldown:90,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"ASYLUM",effectName:"ASYLUM",speedStat:"sps",tickPotency:100})},onApplication:e=>e.gainStatus("ASYLUM")});Ol("PLENARY_INDULGENCE",70,"cd_PLENARY_INDULGENCE",{rscType:"CONFESSION",applicationDelay:.8,cooldown:60});Ol("TEMPERANCE",80,"cd_TEMPERANCE",{rscType:"TEMPERANCE",applicationDelay:.62,cooldown:120,replaceIf:[{newSkill:"DIVINE_CARESS",condition:e=>e.hasResourceAvailable("DIVINE_GRACE")}],onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_TEMPERANCE")&&e.gainStatus("DIVINE_GRACE")}});Ol("LITURGY_OF_THE_BELL",90,"cd_LITURGY_OF_THE_BELL",{rscType:"LITURGY_OF_THE_BELL",applicationDelay:0,cooldown:180,replaceIf:[{newSkill:"LITURGY_POP",condition:e=>e.hasResourceAvailable("LITURGY_OF_THE_BELL")}]});Ns("LITURGY_TRIGGER",90,"cd_LITURGY_TRIGGER",{applicationDelay:0,cooldown:1,isPetHeal:!0,healingPotency:425,animationLock:ma,validateAttempt:e=>e.hasResourceAvailable("LITURGY_OF_THE_BELL"),highlightIf:e=>e.hasResourceAvailable("LITURGY_OF_THE_BELL"),onConfirm:e=>e.tryConsumeResource("LITURGY_OF_THE_BELL")});Ns("LITURGY_POP",90,"cd_LITURGY_POP",{startOnHotbar:!1,applicationDelay:0,cooldown:1,isPetHeal:!0,healingPotency:e=>212*e.resources.get("LITURGY_OF_THE_BELL").availableAmount(),validateAttempt:e=>e.hasResourceAvailable("LITURGY_OF_THE_BELL"),highlightIf:e=>e.hasResourceAvailable("LITURGY_OF_THE_BELL"),onConfirm:e=>e.tryConsumeResource("LITURGY_OF_THE_BELL",!0)});Ol("DIVINE_CARESS",100,"cd_DIVINE_CARESS",{startOnHotbar:!1,rscType:"DIVINE_CARESS",applicationDelay:0,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("DIVINE_GRACE"),highlightIf:e=>e.hasResourceAvailable("DIVINE_GRACE"),onConfirm:e=>e.tryConsumeResource("DIVINE_GRACE"),onApplication:e=>{e.resources.addResourceEvent({rscType:"DIVINE_CARESS",name:"trigger divine aura on divine caress expiry",delay:10,fnOnRsc:()=>e.gainStatus("DIVINE_AURA")})}});Object.keys(jR).forEach(e=>jt(e,`NIN/${we[e].name}.png`));const HO=["DOKUMORI","TRICK_ATTACK","KUNAIS_BANE"],wB=Object.keys(jR).filter(e=>!HO.includes(e));class GB extends Wt{jobSpecificOtherTargetedBuffViewProps(){return[...HO.map(t=>this.makeCommonTimer(t,!1))]}jobSpecificSelfTargetedBuffViewProps(){return wB.map(t=>t==="HIDDEN"?this.makeCommonTimerless(t):this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){const a=this.state.resources,o=a.get("NIN_COMBO_TRACKER"),s=a.get("NIN_AOE_COMBO_TRACKER"),c=a.get("KAZEMATOI").availableAmount(),d=a.get("NINKI").availableAmount(),h=o.available(1)?o.pendingChange?.timeTillEvent:s.available(1)?s.pendingChange?.timeTillEvent:void 0;return[{kind:"bar",name:g({en:"Combo Timer",zh:""}),color:t.nin.ninComboTimer,progress:h?h/30:0,valueString:h?.toFixed(3)??"N/A"},{kind:"counter",name:Ke("KAZEMATOI"),color:t.nin.kazematoi,currentStacks:c,maxStacks:5},{kind:"bar",name:Ke("NINKI"),color:t.nin.ninki,progress:d/100,valueString:d.toFixed(0)}]}}const un=(e,t,a)=>{Ve("NIN",e,t,a??{})};un("KAZEMATOI",5,{warnOnOvercap:!0});un("NINKI",100,{warnOnOvercap:!0});un("SHADE_SHIFT",1,{timeout:20});un("MUDRA",1,{timeout:6});un("HIDDEN",1);un("TRICK_ATTACK",1,{timeout:15.77});un("KASSATSU",1,{timeout:15,warnOnTimeout:!0});un("DOKUMORI",1,{timeout:21});un("TENRI_JINDO_READY",1,{timeout:30,warnOnTimeout:!0});un("TEN_CHI_JIN",1,{timeout:6});un("MEISUI",1,{timeout:30});un("SHADOW_WALKER",1,{timeout:20});un("BUNSHIN",5,{timeout:30,warnOnTimeout:!0});un("PHANTOM_KAMAITACHI_READY",1,{timeout:45,warnOnTimeout:!0});un("RAIJU_READY",3,{timeout:30,warnOnTimeout:!0});un("KUNAIS_BANE",1,{timeout:16.25});un("HIGI",1,{timeout:30});un("DOTON",1,{timeout:18});un("NIN_COMBO_TRACKER",2,{timeout:30});un("NIN_AOE_COMBO_TRACKER",1,{timeout:30});un("MUDRA_TRACKER",1e4);un("BUNNY",1);const BB=["SPINNING_EDGE","GUST_SLASH","AEOLIAN_EDGE","ARMOR_CRUSH","THROWING_DAGGER","DEATH_BLOSSOM","HAKKE_MUJINSATSU","FORKED_RAIJU","FLEETING_RAIJU"];class FB extends Xt{constructor(t){super(t);const a=this.hasTraitUnlocked("ENHANCED_SHUKUCHI_II")?2:1;this.cooldowns.set(new He("cd_SHUKUCHI",60,a,a)),this.registerRecurringEvents([{groupedEffects:[{effectName:"DOTON",appliedBy:["DOTON","DOTON_CHI"],isGroundTargeted:!0}]}])}jobSpecificAddDamageBuffCovers(t,a){this.hasResourceAvailable("DOKUMORI")&&t.addBuff(k.Dokumori),this.hasResourceAvailable("TRICK_ATTACK")&&t.addBuff(k.TrickAttack),this.hasResourceAvailable("KUNAIS_BANE")&&t.addBuff(k.KunaisBane),this.hasResourceAvailable("BUNSHIN")&&BB.includes(a.name)&&t.addBuff(k.Bunshin)}inherentSpeedModifier(){return 15}get statusPropsGenerator(){return new GB(this)}stackRaijuReady(){this.resources.get("RAIJU_READY").gain(1),this.enqueueResourceDrop("RAIJU_READY")}gainNinki(t){this.resources.get("NINKI").gain(t)}processComboStatus(t){if(["THROWING_DAGGER","FORKED_RAIJU","FLEETING_RAIJU","PHANTOM_KAMAITACHI"].includes(t))return;let a=[this.resources.get("NIN_COMBO_TRACKER").availableAmount(),this.resources.get("NIN_AOE_COMBO_TRACKER").availableAmount()];t==="SPINNING_EDGE"?a=[1,0]:t==="GUST_SLASH"&&a[0]===1?a=[2,0]:t==="DEATH_BLOSSOM"?a=[0,1]:a=[0,0],this.setComboState("NIN_COMBO_TRACKER",a[0]),this.setComboState("NIN_AOE_COMBO_TRACKER",a[1])}parseMudraTracker(){if(this.hasResourceAvailable("BUNNY"))return;const t=this.resources.get("MUDRA_TRACKER").availableAmount();if(t===0)return[];if(t<10)return console.assert(t<4,`mudra tracker value ${t} was invalid`),[t];if(t<100)return console.assert(t%10!==0,`mudra tracker value ${t} was invalid`),[Math.floor(t/10),t%10];if(t<1e3)return[Math.floor(t/100),Math.floor(t/10)%10,t%10]}isMudraTrackerIn(t){const a=this.parseMudraTracker();return a!==void 0&&t.some(o=>a.length===o.length&&a.every((s,c)=>o[c]===s))}clearMudraInfo(){this.tryConsumeResource("MUDRA"),this.tryConsumeResource("KASSATSU"),this.resources.get("MUDRA_TRACKER").overrideCurrentValue(0),this.resources.get("BUNNY").overrideCurrentValue(0)}pushMudra(t,a){const o=this.resources.get("MUDRA_TRACKER"),s=o.availableAmount();if(s===0&&!a&&(console.assert(this.resources.get("MUDRA_TRACKER").availableAmount()===0),console.assert(this.resources.get("BUNNY").availableAmount()===0),this.gainStatus("MUDRA"),this.resources.get("MUDRA").removeTimer(),this.resources.addResourceEvent({rscType:"MUDRA",name:"clear mudra tracker/bunny",delay:Ft("NIN","MUDRA").maxTimeout,fnOnRsc:()=>this.clearMudraInfo()})),s>1e3)return;const c=s*10+t;o.overrideCurrentValue(c),a&&c>100&&(this.tryConsumeResource("TEN_CHI_JIN"),this.clearMudraInfo())}}const SN=e=>!e.hasResourceAvailable("TEN_CHI_JIN"),VT=e=>{e.hasResourceAvailable("MUDRA")&&e.gainStatus("BUNNY")},WT=e=>e===void 0?SN:t=>SN(t)&&e(t),ec=(e,t)=>{e.hasResourceAvailable("DOKUMORI")&&t.push(X.Dokumori),e.hasResourceAvailable("TRICK_ATTACK")&&t.push(X.TrickAttack),e.hasResourceAvailable("KUNAIS_BANE")&&t.push(X.KunaisBane)},to=(e,t,a)=>nn("NIN",e,t,{...a,recastTime:o=>o.config.adjustedSksGCD(2.5,o.inherentSpeedModifier()),validateAttempt:WT(a.validateAttempt),onConfirm:Me(VT,(o,s)=>a.onConfirm?.(o,s),o=>{e!=="PHANTOM_KAMAITACHI"&&o.tryConsumeResource("BUNSHIN")&&o.gainNinki(5)},["THROWING_DAGGER","PHANTOM_KAMAITACHI","FORKED_RAIJU","FLEETING_RAIJU"].includes(e)?void 0:o=>o.tryConsumeResource("RAIJU_READY",!0)&&p.reportWarning({kind:"overwrite",rsc:"RAIJU_READY"}),o=>o.processComboStatus(e)),jobPotencyModifiers:o=>{const s=a.jobPotencyModifiers?.(o)??[];return o.hasResourceAvailable("BUNSHIN")&&e!=="PHANTOM_KAMAITACHI"&&(e==="DEATH_BLOSSOM"||e==="HAKKE_MUJINSATSU"?s.push(X.BunshinAOE):s.push(X.BunshinST)),ec(o,s),s}}),no=(e,t,a,o)=>at("NIN",e,t,a,{...o,validateAttempt:WT(o.validateAttempt),onConfirm:Me(VT,(s,c)=>o.onConfirm?.(s,c)),jobPotencyModifiers:s=>{const c=o.jobPotencyModifiers?.(s)??[];return ec(s,c),c}}),xu=(e,t,a,o)=>je("NIN",e,t,a,{...o,validateAttempt:WT(o.validateAttempt),onConfirm:Me(VT,(s,c)=>o.onConfirm?.(s,c))});to("THROWING_DAGGER",15,{applicationDelay:.62,potency:[["NEVER",120],["MELEE_MASTERY_II_NIN",200]],onConfirm:e=>e.gainNinki(5)});to("SPINNING_EDGE",1,{applicationDelay:.4,potency:[["NEVER",180],["MELEE_MASTERY_II_NIN",220],["MELEE_MASTERY_III_NIN",300]],onConfirm:e=>e.gainNinki(5)});to("GUST_SLASH",4,{applicationDelay:.4,potency:[["NEVER",100],["MELEE_MASTERY_NIN",120],["MELEE_MASTERY_II_NIN",160],["MELEE_MASTERY_III_NIN",240]],combo:{potency:[["NEVER",260],["MELEE_MASTERY_NIN",280],["MELEE_MASTERY_II_NIN",320],["MELEE_MASTERY_III_NIN",400]],resource:"NIN_COMBO_TRACKER",resourceValue:1},highlightIf:e=>e.hasResourceExactly("NIN_COMBO_TRACKER",1),onConfirm:e=>e.hasResourceExactly("NIN_COMBO_TRACKER",1)&&e.gainNinki(5)});const kO=e=>e.gainNinki(e.hasTraitUnlocked("SHUKIHO_III")?15:e.hasTraitUnlocked("SHUKIHO_II")?10:5);to("AEOLIAN_EDGE",26,{applicationDelay:.54,potency:[["NEVER",100],["MELEE_MASTERY_NIN",140],["MELEE_MASTERY_III_NIN",220]],combo:{potency:[["NEVER",340],["MELEE_MASTERY_III_NIN",400]],resource:"NIN_COMBO_TRACKER",resourceValue:2},positional:{potency:[["NEVER",160],["MELEE_MASTERY_NIN",200],["MELEE_MASTERY_III_NIN",280]],comboPotency:[["NEVER",400],["MELEE_MASTERY_III_NIN",460]],location:"rear"},highlightIf:e=>e.hasResourceExactly("NIN_COMBO_TRACKER",2),onConfirm:kO,jobPotencyModifiers:e=>e.tryConsumeResource("KAZEMATOI")?[X.Kazematoi]:[]});to("ARMOR_CRUSH",54,{applicationDelay:.62,potency:[["NEVER",100],["MELEE_MASTERY_NIN",140],["MELEE_MASTERY_III_NIN",240]],combo:{potency:[["NEVER",320],["MELEE_MASTERY_NIN",360],["MELEE_MASTERY_III_NIN",440]],resource:"NIN_COMBO_TRACKER",resourceValue:2},positional:{potency:[["NEVER",160],["MELEE_MASTERY_NIN",200],["MELEE_MASTERY_III_NIN",300]],comboPotency:[["NEVER",380],["MELEE_MASTERY_NIN",420],["MELEE_MASTERY_III_NIN",500]],location:"flank"},highlightIf:e=>e.hasResourceExactly("NIN_COMBO_TRACKER",2),onConfirm:Me(e=>{e.hasResourceExactly("NIN_COMBO_TRACKER",2)&&e.resources.get("KAZEMATOI").gain(2)},kO)});to("DEATH_BLOSSOM",38,{applicationDelay:.71,potency:100,falloff:0,onConfirm:e=>e.gainNinki(5)});to("HAKKE_MUJINSATSU",52,{applicationDelay:.62,potency:100,combo:{potency:120,resource:"NIN_AOE_COMBO_TRACKER",resourceValue:1},falloff:0,highlightIf:e=>e.hasResourceExactly("NIN_AOE_COMBO_TRACKER",1),onConfirm:e=>e.hasResourceExactly("NIN_AOE_COMBO_TRACKER",1)&&e.gainNinki(5),jobPotencyModifiers:e=>e.hasResourceExactly("NIN_AOE_COMBO_TRACKER",1)&&e.hasResourceAvailable("DOTON")?[X.HollowNozuchi]:[]});const Lr=e=>e.hasResourceAvailable("TEN_CHI_JIN")&&e.isMudraTrackerIn([[]]),UO=e=>e.hasResourceAvailable("TEN_CHI_JIN")&&e.isMudraTrackerIn([[2],[3]]),PO=e=>e.hasResourceAvailable("TEN_CHI_JIN")&&e.isMudraTrackerIn([[1],[3]]),wO=e=>e.hasResourceAvailable("TEN_CHI_JIN")&&e.isMudraTrackerIn([[1],[2]]),GO=e=>e.hasResourceAvailable("TEN_CHI_JIN")&&e.isMudraTrackerIn([[3,2],[2,3]]),BO=e=>e.hasResourceAvailable("TEN_CHI_JIN")&&e.isMudraTrackerIn([[1,3],[3,1]]),FO=e=>e.hasResourceAvailable("TEN_CHI_JIN")&&e.isMudraTrackerIn([[1,2],[2,1]]),jO=[{newSkill:"TEN",condition:e=>!e.hasResourceAvailable("TEN_CHI_JIN")},{newSkill:"FUMA_SHURIKEN_TEN",condition:Lr},{newSkill:"KATON_TEN",condition:UO},{newSkill:"HUTON_TEN",condition:GO}],XT=[{newSkill:"CHI",condition:e=>!e.hasResourceAvailable("TEN_CHI_JIN")},{newSkill:"FUMA_SHURIKEN_CHI",condition:Lr},{newSkill:"RAITON_CHI",condition:PO},{newSkill:"DOTON_CHI",condition:BO}],zO=[{newSkill:"JIN",condition:e=>!e.hasResourceAvailable("TEN_CHI_JIN")},{newSkill:"FUMA_SHURIKEN_JIN",condition:Lr},{newSkill:"HYOTON_JIN",condition:wO},{newSkill:"SUITON_JIN",condition:FO}],YO=[["FUMA_SHURIKEN",30,.89,[["NEVER",450],["MELEE_MASTERY_III_NIN",500]],void 0],["KATON",35,.94,350,0],["RAITON",35,.71,[["NEVER",650],["MELEE_MASTERY_III_NIN",740]],void 0],["HYOTON",45,1.16,350,void 0],["HUTON",45,.98,240,0],["SUITON",45,.98,[["NEVER",500],["MELEE_MASTERY_III_NIN",580]],void 0],["GOKA_MEKKYAKU",76,.76,850,0],["HYOSHO_RANRYU",76,.62,1300,void 0]],jB=new Map(YO.map(([e,t,a,o,s])=>[e,[t,a,o,s]])),zB=[["FUMA_SHURIKEN_TEN",Lr],["FUMA_SHURIKEN_CHI",Lr],["FUMA_SHURIKEN_JIN",Lr],["KATON_TEN",UO],["RAITON_CHI",PO],["HYOTON_JIN",wO],["HUTON_TEN",GO],["SUITON_JIN",FO]];zB.forEach(([e,t])=>{const[,a,o,s]=jB.get(e.substring(0,e.length-4)),c=e.substring(e.length-3);nn("NIN",e,70,{startOnHotbar:!1,applicationDelay:a,recastTime:e==="HUTON_TEN"||e==="SUITON_JIN"?1.5:1,potency:o,falloff:s,replaceIf:c==="TEN"?jO:c==="CHI"?XT:zO,validateAttempt:t,jobPotencyModifiers:h=>{const f=[];return ec(h,f),e==="KATON"&&h.hasResourceAvailable("DOTON")&&f.push(X.HollowNozuchi),f},onConfirm:Me(h=>h.pushMudra(c==="TEN"?1:c==="CHI"?2:3,!0),e==="RAITON_CHI"?h=>h.stackRaijuReady():e==="SUITON_JIN"||e==="HUTON_TEN"?h=>h.gainStatus("SHADOW_WALKER"):void 0)})});const KO=(e,t)=>{e.applyDoT("DOTON",t),e.gainStatus("DOTON")};nn("NIN","DOTON_CHI",70,{startOnHotbar:!1,recastTime:1.5,replaceIf:XT,falloff:0,validateAttempt:BO,jobPotencyModifiers:e=>{const t=[];return ec(e,t),t},onConfirm:Me((e,t)=>{e.addDoTPotencies({node:t,effectName:"DOTON",skillName:"DOTON",tickPotency:80,speedStat:"sks"})},e=>e.pushMudra(2,!0)),onApplication:KO});[["TEN",30,jO],["CHI",35,XT],["JIN",45,zO]].forEach(([e,t,a],o)=>{nn("NIN",e,t,{recastTime:.5,animationLock:.5,replaceIf:a,secondaryCooldown:{cdName:"cd_MUDRA",cooldown:20,maxCharges:2},jobPotencyModifiers:s=>{const c=[];return ec(s,c),c},validateAttempt:s=>!s.hasResourceAvailable("TEN_CHI_JIN"),onConfirm:s=>s.pushMudra(o+1,!1)})});const YB=e=>e.hasTraitUnlocked("ENHANCED_KASSATSU")&&e.hasResourceAvailable("KASSATSU")&&e.isMudraTrackerIn([[2,1],[3,1]]),KB=e=>e.hasTraitUnlocked("ENHANCED_KASSATSU")&&e.hasResourceAvailable("KASSATSU")&&e.isMudraTrackerIn([[1,3],[2,3]]),VB=e=>e.hasResourceAvailable("MUDRA")&&e.isMudraTrackerIn([[1],[2],[3]]),WB=e=>(!e.hasTraitUnlocked("ENHANCED_KASSATSU")||!e.hasResourceAvailable("KASSATSU"))&&e.hasResourceAvailable("MUDRA")&&e.isMudraTrackerIn([[2,1],[3,1]]),XB=e=>e.hasResourceAvailable("MUDRA")&&e.isMudraTrackerIn([[1,2],[3,2]]),qB=e=>(!e.hasTraitUnlocked("ENHANCED_KASSATSU")||!e.hasResourceAvailable("KASSATSU"))&&e.hasResourceAvailable("MUDRA")&&e.isMudraTrackerIn([[1,3],[2,3]]),ZB=e=>e.hasResourceAvailable("MUDRA")&&e.isMudraTrackerIn([[3,2,1],[2,3,1]]),QB=e=>e.hasResourceAvailable("MUDRA")&&e.isMudraTrackerIn([[1,3,2],[3,1,2]]),JB=e=>e.hasResourceAvailable("MUDRA")&&e.isMudraTrackerIn([[1,2,3],[2,1,3]]),$B=e=>e.hasResourceAvailable("MUDRA")&&(e.hasResourceAvailable("BUNNY")||!e.isMudraTrackerIn([[1],[2],[3],[2,1],[3,1],[1,2],[3,2],[1,3],[2,3],[3,2,1],[2,3,1],[1,3,2],[3,1,2],[1,2,3],[2,1,3]])),jf=[{newSkill:"GOKA_MEKKYAKU",condition:YB},{newSkill:"HYOSHO_RANRYU",condition:KB},{newSkill:"FUMA_SHURIKEN",condition:VB},{newSkill:"KATON",condition:WB},{newSkill:"RAITON",condition:XB},{newSkill:"HYOTON",condition:qB},{newSkill:"HUTON",condition:ZB},{newSkill:"DOTON",condition:QB},{newSkill:"SUITON",condition:JB},{newSkill:"RABBIT_MEDIUM",condition:e=>e.hasResourceAvailable("MUDRA")&&(e.hasResourceAvailable("BUNNY")||$B(e))},{newSkill:"NINJUTSU",condition:e=>!e.hasResourceAvailable("MUDRA")}],zf=e=>jf.filter(t=>t.newSkill!==e);nn("NIN","NINJUTSU",30,{recastTime:1.5,validateAttempt:e=>!1,replaceIf:zf("NINJUTSU")});nn("NIN","RABBIT_MEDIUM",30,{startOnHotbar:!1,recastTime:1.5,replaceIf:zf("RABBIT_MEDIUM"),validateAttempt:jf.find(e=>e.newSkill==="RABBIT_MEDIUM").condition,onConfirm:e=>e.clearMudraInfo()});YO.forEach(([e,t,a,o,s])=>{nn("NIN",e,t,{startOnHotbar:!1,applicationDelay:a,recastTime:c=>c.hasResourceAvailable("TEN_CHI_JIN")?1:1.5,potency:o,falloff:s,replaceIf:zf(e),validateAttempt:jf.find(c=>c.newSkill===e).condition,onConfirm:Me(["KATON","RAITON","HYOTON"].includes(e)?c=>{c.cooldowns.get("cd_SHUKUCHI").timeTillNextStackAvailable()!==0&&c.cooldowns.get("cd_SHUKUCHI").restore(60)}:void 0,e==="RAITON"?c=>c.stackRaijuReady():e==="SUITON"||e==="HUTON"?c=>c.gainStatus("SHADOW_WALKER"):void 0,c=>c.clearMudraInfo()),jobPotencyModifiers:c=>{const d=[];return c.hasResourceAvailable("KASSATSU")&&d.push(X.Kassatsu),c.hasResourceAvailable("DOTON")&&["KATON","GOKA_MEKKYAKU"].includes(e)&&d.push(X.HollowNozuchi),ec(c,d),d}})});nn("NIN","DOTON",45,{startOnHotbar:!1,recastTime:e=>e.hasResourceAvailable("TEN_CHI_JIN")?1:1.5,potency:0,falloff:0,replaceIf:zf("DOTON"),validateAttempt:jf.find(e=>e.newSkill==="DOTON").condition,onConfirm:Me((e,t)=>{e.addDoTPotencies({node:t,effectName:"DOTON",skillName:"DOTON",tickPotency:80,speedStat:"sks"})},e=>e.clearMudraInfo()),onApplication:KO});const of=e=>e.hasResourceAvailable("RAIJU_READY"),VO=[["NEVER",560],["MELEE_MASTERY_III_NIN",700]];to("FORKED_RAIJU",90,{applicationDelay:.62,potency:VO,animationLock:Vt,highlightIf:of,validateAttempt:of,onConfirm:e=>{e.gainNinki(5),e.tryConsumeResource("RAIJU_READY")}});to("FLEETING_RAIJU",90,{applicationDelay:.76,potency:VO,highlightIf:of,validateAttempt:of,onConfirm:e=>{e.gainNinki(5),e.tryConsumeResource("RAIJU_READY")}});no("DOKUMORI",66,"cd_DOKUMORI",{applicationDelay:1.07,potency:400,falloff:0,cooldown:120,onConfirm:e=>{e.gainStatus("DOKUMORI"),e.gainNinki(40),e.hasTraitUnlocked("ENHANCED_DOKUMORI")&&e.gainStatus("HIGI")}});const lf=e=>e.hasResourceAvailable("HIDDEN")||e.hasResourceAvailable("SHADOW_WALKER");no("TRICK_ATTACK",18,"cd_TRICK_ATTACK",{autoUpgrade:{trait:"TRICK_ATTACK_MASTERY",otherSkill:"KUNAIS_BANE"},applicationDelay:.8,potency:300,positional:{potency:400,location:"rear"},cooldown:60,highlightIf:lf,validateAttempt:lf,onConfirm:e=>{e.gainStatus("TRICK_ATTACK"),e.tryConsumeResource("SHADOW_WALKER")}});no("KUNAIS_BANE",92,"cd_TRICK_ATTACK",{autoDowngrade:{trait:"TRICK_ATTACK_MASTERY",otherSkill:"TRICK_ATTACK"},startOnHotbar:!1,applicationDelay:1.29,cooldown:60,potency:700,falloff:0,highlightIf:lf,validateAttempt:lf,onConfirm:e=>{e.gainStatus("KUNAIS_BANE"),e.tryConsumeResource("SHADOW_WALKER")}});no("DREAM_WITHIN_A_DREAM",56,"cd_DREAM_WITHIN_A_DREAM",{applicationDelay:.98,cooldown:60,potency:180*3});xu("KASSATSU",50,"cd_KASSATSU",{rscType:"KASSATSU",cooldown:60,applicationDelay:0,validateAttempt:e=>!e.hasResourceAvailable("TEN_CHI_JIN")});const Zi=e=>e.resources.get("NINKI").available(50),Hu=e=>e.resources.get("NINKI").consume(50);no("BHAVACAKRA",68,"cd_BHAVACAKRA",{applicationDelay:.62,cooldown:1,potency:[["NEVER",350],["MELEE_MASTERY_III_NIN",400]],highlightIf:Zi,validateAttempt:Zi,replaceIf:[{newSkill:"ZESHO_MEPPO",condition:e=>e.hasResourceAvailable("HIGI")}],onConfirm:Me(Hu,e=>e.tryConsumeResource("MEISUI")),jobPotencyModifiers:e=>e.hasResourceAvailable("MEISUI")?[X.Meisui]:[]});no("ZESHO_MEPPO",96,"cd_BHAVACAKRA",{startOnHotbar:!1,applicationDelay:1.03,cooldown:1,potency:700,highlightIf:e=>e.hasResourceAvailable("HIGI")&&Zi(e),validateAttempt:e=>e.hasResourceAvailable("HIGI")&&Zi(e),replaceIf:[{newSkill:"BHAVACAKRA",condition:e=>!e.hasResourceAvailable("HIGI")}],onConfirm:Me(Hu,e=>{e.tryConsumeResource("MEISUI"),e.tryConsumeResource("HIGI")}),jobPotencyModifiers:e=>e.hasResourceAvailable("MEISUI")?[X.Meisui]:[]});no("HELLFROG_MEDIUM",62,"cd_BHAVACAKRA",{applicationDelay:.8,cooldown:1,potency:250,falloff:0,highlightIf:Zi,validateAttempt:Zi,replaceIf:[{newSkill:"DEATHFROG_MEDIUM",condition:e=>e.hasResourceAvailable("HIGI")}],onConfirm:Hu});no("DEATHFROG_MEDIUM",96,"cd_BHAVACAKRA",{startOnHotbar:!1,applicationDelay:.8,cooldown:1,potency:400,falloff:0,highlightIf:e=>e.hasResourceAvailable("HIGI")&&Zi(e),validateAttempt:e=>e.hasResourceAvailable("HIGI")&&Zi(e),onConfirm:Me(Hu,e=>e.tryConsumeResource("HIGI"))});xu("MEISUI",72,"cd_MEISUI",{rscType:"MEISUI",cooldown:120,applicationDelay:0,highlightIf:e=>e.hasResourceAvailable("SHADOW_WALKER"),validateAttempt:e=>e.hasResourceAvailable("SHADOW_WALKER"),onConfirm:e=>{e.tryConsumeResource("SHADOW_WALKER"),e.gainNinki(50)}});xu("BUNSHIN",80,"cd_BUNSHIN",{rscType:"BUNSHIN",cooldown:90,applicationDelay:0,replaceIf:[{newSkill:"PHANTOM_KAMAITACHI",condition:e=>e.hasResourceAvailable("PHANTOM_KAMAITACHI_READY")}],highlightIf:Zi,validateAttempt:Zi,onConfirm:Me(Hu,e=>e.gainStatus("PHANTOM_KAMAITACHI_READY"))});to("PHANTOM_KAMAITACHI",80,{startOnHotbar:!1,potency:700,falloff:0,applicationDelay:1.57,highlightIf:e=>e.hasResourceAvailable("PHANTOM_KAMAITACHI_READY"),validateAttempt:e=>e.hasResourceAvailable("PHANTOM_KAMAITACHI_READY"),onConfirm:e=>{e.tryConsumeResource("PHANTOM_KAMAITACHI_READY"),e.gainNinki(10)},jobPotencyModifiers:e=>e.hasResourceAvailable("DOTON")?[X.HollowNozuchi,X.NinPet]:[X.NinPet]});xu("TEN_CHI_JIN",70,"cd_TEN_CHI_JIN",{rscType:"TEN_CHI_JIN",applicationDelay:0,cooldown:120,replaceIf:[{newSkill:"TENRI_JINDO",condition:e=>e.hasResourceAvailable("TENRI_JINDO_READY")}],validateAttempt:e=>!e.hasResourceAvailable("KASSATSU"),onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_TEN_CHI_JIN")&&e.gainStatus("TENRI_JINDO_READY"),e.clearMudraInfo()}});no("TENRI_JINDO",100,"cd_TENRI_JINDO",{startOnHotbar:!1,applicationDelay:1.69,cooldown:1,potency:1100,falloff:0,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("TENRI_JINDO_READY"),onConfirm:e=>e.tryConsumeResource("TENRI_JINDO_READY")});no("SHUKUCHI",40,"cd_SHUKUCHI",{applicationDelay:0,cooldown:60,maxCharges:2,animationLock:Vt});xu("SHADE_SHIFT",2,"cd_SHADE_SHIFT",{rscType:"SHADE_SHIFT",applicationDelay:.4,cooldown:120});Object.keys(FR).forEach(e=>jt(e,`MNK/${qN[e].name}.png`));function e2(e){switch(e){case 1:return"opo";case 2:return"raptor";case 3:return"coeurl"}return null}function t2(e){switch(e){case"opo":return g({en:"o",zh:""});case"raptor":return g({en:"r",zh:""});case"coeurl":return g({en:"c",zh:""})}return null}function IN(e){switch(e){case"lunar":return g({en:e,zh:""});case"solar":return g({en:e,zh:""})}return null}class n2 extends Wt{jobSpecificSelfTargetedBuffViewProps(){return Object.keys(FR).map(t=>this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){const a=this.state.resources,o=["BEAST_CHAKRA_1","BEAST_CHAKRA_2","BEAST_CHAKRA_3"].map(m=>a.get(m).availableAmount()).map(e2),s=a.get("LUNAR_NADI").available(1),c=a.get("SOLAR_NADI").available(1),d=o.map(t2).filter(m=>m!==null).join("+"),h=[IN(s?"lunar":null),IN(c?"solar":null)].filter(m=>m!==null).join("+");return[{kind:"counter",name:Ke("OPO_OPOS_FURY"),color:t.mnk.opo,currentStacks:a.get("OPO_OPOS_FURY").availableAmount(),maxStacks:1},{kind:"counter",name:Ke("RAPTORS_FURY"),color:t.mnk.raptor,currentStacks:a.get("RAPTORS_FURY").availableAmount(),maxStacks:1},{kind:"counter",name:Ke("COEURLS_FURY"),color:t.mnk.coeurl,currentStacks:a.get("COEURLS_FURY").availableAmount(),maxStacks:2},{kind:"chakra",name:Ke("CHAKRA"),regularColor:t.mnk.chakra,overflowColor:t.mnk.extraChakra,value:a.get("CHAKRA").availableAmount(),wrapCount:5},{kind:"text",name:Ke("BEAST_CHAKRA_TIMER"),text:o.every(m=>m!==null)?a.get("BEAST_CHAKRA_1").pendingChange?.timeTillEvent.toFixed(3):"n/a"},{kind:"beast",name:Ke("BEAST_CHAKRA"),label:d,chakras:o,opoColor:t.mnk.opo,raptorColor:t.mnk.raptor,coeurlColor:t.mnk.coeurl},{kind:"nadi",name:Ke("NADI"),label:h,lunar:s,solar:c,lunarColor:t.mnk.lunar,solarColor:t.mnk.solar}]}}const Lt=(e,t,a)=>{Ve("MNK",e,t,a??{})};Lt("CHAKRA",5,{default:5});Lt("BEAST_CHAKRA",1);Lt("NADI",1);Lt("OPO_OPOS_FURY",1,{warnOnOvercap:!0});Lt("RAPTORS_FURY",1,{warnOnOvercap:!0});Lt("COEURLS_FURY",2,{warnOnOvercap:!0});Lt("MANTRA",1,{timeout:15});Lt("OPO_OPO_FORM",1,{timeout:30});Lt("RAPTOR_FORM",1,{timeout:30});Lt("COEURL_FORM",1,{timeout:30});Lt("PERFECT_BALANCE",3,{timeout:20});Lt("FORMLESS_FIST",1,{timeout:30,default:1});Lt("RIDDLE_OF_EARTH",1,{timeout:10});Lt("EARTHS_RESOLVE",1,{timeout:15});Lt("EARTHS_RUMINATION",1,{timeout:30});Lt("RIDDLE_OF_FIRE",1,{timeout:20.72});Lt("FIRES_RUMINATION",1,{timeout:20,warnOnTimeout:!0});Lt("BROTHERHOOD",1,{timeout:20});Lt("MEDITATIVE_BROTHERHOOD",1,{timeout:20});Lt("RIDDLE_OF_WIND",1,{timeout:15.78});Lt("WINDS_RUMINATION",1,{timeout:15,warnOnTimeout:!0});Lt("SIX_SIDED_STAR",1,{timeout:5});const Sl=["BEAST_CHAKRA_1","BEAST_CHAKRA_2","BEAST_CHAKRA_3"];Lt("BEAST_CHAKRA_1",3);Lt("BEAST_CHAKRA_2",3);Lt("BEAST_CHAKRA_3",3);Lt("LUNAR_NADI",1);Lt("SOLAR_NADI",1);class a2 extends Xt{constructor(t){super(t);const a=this.hasTraitUnlocked("ENHANCED_THUNDERCLAP")?3:2;this.cooldowns.set(new He("cd_THUNDERCLAP",30,a,a)),this.registerRecurringEvents()}getForm(){if(this.hasResourceAvailable("OPO_OPO_FORM"))return"opo";if(this.hasResourceAvailable("RAPTOR_FORM"))return"raptor";if(this.hasResourceAvailable("COEURL_FORM"))return"coeurl"}setForm(t){["OPO_OPO_FORM","RAPTOR_FORM","COEURL_FORM","FORMLESS_FIST"].forEach(o=>this.tryConsumeResource(o));const a=t==="opo"?"OPO_OPO_FORM":t==="raptor"?"RAPTOR_FORM":t==="coeurl"?"COEURL_FORM":"FORMLESS_FIST";this.gainStatus(a)}canDoForm(t){return this.hasResourceAvailable("PERFECT_BALANCE")||this.hasResourceAvailable("FORMLESS_FIST")||this.getForm()===t}gainChakra(){this.resources.get("CHAKRA").gain(1)}maybeGainChakra(t){if(this.hasResourceAvailable("MEDITATIVE_BROTHERHOOD"))for(let s=0;s<this.resources.get("PARTY_SIZE").availableAmount()-1;s++)this.triggersEffect(.2,!0)&&this.gainChakra();if(this.hasTraitUnlocked("ENHANCED_BROTHERHOOD")&&this.hasResourceAvailable("MEDITATIVE_BROTHERHOOD")){this.gainChakra();return}const a=t?1:this.config.critRate,o=this.triggersEffect(a,!0);if(t||o){const s=this.hasTraitUnlocked("DEEP_MEDITATION_II")?1:.8,c=this.triggersEffect(s);(s===1||c)&&this.gainChakra()}}consumeFiveChakra(){const t=this.resources.get("CHAKRA");t.consume(Math.min(t.availableAmount(),5))}startPB(){["OPO_OPO_FORM","RAPTOR_FORM","COEURL_FORM","FORMLESS_FIST"].forEach(t=>this.tryConsumeResource(t)),this.gainStatus("PERFECT_BALANCE")}jobSpecificAddDamageBuffCovers(t,a){this.hasResourceAvailable("RIDDLE_OF_FIRE")&&t.addBuff(k.RiddleOfFire),this.hasResourceAvailable("BROTHERHOOD")&&t.addBuff(k.Brotherhood)}inherentSpeedModifier(){return this.hasTraitUnlocked("ENHANCED_GREASED_LIGHTNING_III")?20:15}get statusPropsGenerator(){return new n2(this)}}const zn=(e,t,a)=>{const o=a.form?s=>a.form.requiredForm===void 0||s.canDoForm(a.form.requiredForm):void 0;return nn("MNK",e,t,{...a,positional:void 0,highlightIf:s=>!o&&!a.ball&&!a.highlightIf?!1:(o?.(s)??!0)&&(a.ball?s.hasResourceAvailable(a.ball.rsc):!0)&&(a.highlightIf?.(s)??!0),validateAttempt:s=>(o?.(s)??!0)&&(a.validateAttempt?.(s)??!0),recastTime:s=>s.config.adjustedSksGCD(a.recastTime??2.5,s.inherentSpeedModifier()),onConfirm:Me(a.onConfirm,e!=="SIX_SIDED_STAR"&&a.potency?(s,c)=>{const d=c.getInitialPotency();d&&s.maybeGainChakra(d.modifiers.includes(X.AutoCrit))}:void 0,a.form?s=>{const c=a.form.nextForm;if(s.tryConsumeResource("PERFECT_BALANCE")){for(const h of Sl)if(!s.hasResourceAvailable(h)){let f=3;c==="raptor"?f=1:c==="coeurl"&&(f=2),s.resources.get(h).gain(f),h==="BEAST_CHAKRA_3"&&Sl.forEach(m=>s.enqueueResourceDrop(m,20));break}}else s.setForm(c)}:void 0,a.ball?s=>s.tryConsumeResource(a.ball.rsc):void 0),jobPotencyModifiers:s=>{const c=a.jobPotencyModifiers?.(s)??[],d=a.positional&&s.hitPositional(a.positional.location);return s.hasResourceAvailable("BROTHERHOOD")&&c.push(X.Brotherhood),s.hasResourceAvailable("RIDDLE_OF_FIRE")&&c.push(X.RiddleOfFire),a.ball&&s.hasResourceAvailable(a.ball.rsc)?(c.push({kind:"adder",source:U.MNK_BALL,additiveAmount:tn(s,a.ball.potency)-tn(s,a.potency)}),a.positional&&d&&c.push(Lh(tn(s,a.positional.ballPotency)-tn(s,a.ball.potency)))):a.positional&&d&&c.push(Lh(tn(s,a.positional.potency)-tn(s,a.potency))),c}})},Yf=(e,t,a,o)=>at("MNK",e,t,a,{jobPotencyModifiers:s=>{const c=o.jobPotencyModifiers?.(s)??[];return s.hasResourceAvailable("BROTHERHOOD")&&c.push(X.Brotherhood),s.hasResourceAvailable("RIDDLE_OF_FIRE")&&c.push(X.RiddleOfFire),c},...o}),tc=(e,t,a,o)=>je("MNK",e,t,a,o);[["BOOTSHINE",1,1.11,[["NEVER",180],["MELEE_MASTERY_MNK",220]]],["LEAPING_OPO",92,.62,260]].forEach(([e,t,a,o],s)=>{zn(e,t,{...s===0?{autoUpgrade:{otherSkill:"LEAPING_OPO",trait:"BEAST_CHAKRA_MASTERY"}}:{autoDowngrade:{otherSkill:"BOOTSHINE",trait:"BEAST_CHAKRA_MASTERY"}},form:{nextForm:"raptor"},ball:{potency:s===0?[["NEVER",380],["MELEE_MASTERY_MNK",420]]:460,rsc:"OPO_OPOS_FURY"},applicationDelay:a,potency:o,highlightIf:d=>d.canDoForm("opo"),jobPotencyModifiers:d=>d.hasResourceAvailable("OPO_OPOS_FURY")?[X.AutoCrit]:[]})});[["TRUE_STRIKE",4,.8,[["NEVER",260],["MELEE_MASTERY_MNK",300]]],["RISING_RAPTOR",92,.89,340]].forEach(([e,t,a,o],s)=>{zn(e,t,{...s===0?{autoUpgrade:{otherSkill:"RISING_RAPTOR",trait:"BEAST_CHAKRA_MASTERY"}}:{autoDowngrade:{otherSkill:"TRUE_STRIKE",trait:"BEAST_CHAKRA_MASTERY"}},form:{requiredForm:"raptor",nextForm:"coeurl"},ball:{potency:s===0?[["NEVER",460],["MELEE_MASTERY_MNK",500]]:540,rsc:"RAPTORS_FURY"},applicationDelay:a,potency:o})});[["SNAP_PUNCH",6,.76,[["NEVER",230],["MELEE_MASTERY_MNK",270]]],["POUNCING_COEURL",92,1.02,310]].forEach(([e,t,a,o],s)=>{zn(e,t,{...s===0?{autoUpgrade:{otherSkill:"POUNCING_COEURL",trait:"BEAST_CHAKRA_MASTERY"}}:{autoDowngrade:{otherSkill:"SNAP_PUNCH",trait:"BEAST_CHAKRA_MASTERY"}},form:{requiredForm:"coeurl",nextForm:"opo"},ball:{potency:s===0?[["NEVER",380],["MELEE_MASTERY_MNK",420]]:460,rsc:"COEURLS_FURY"},positional:{potency:s===0?[["NEVER",290],["MELEE_MASTERY_MNK",330]]:370,ballPotency:s===0?[["NEVER",440],["MELEE_MASTERY_MNK",480]]:520,location:"flank"},applicationDelay:a,potency:o})});zn("DRAGON_KICK",50,{applicationDelay:1.29,potency:[["NEVER",240],["MELEE_MASTERY_MNK",280],["MELEE_MASTERY_II_MNK",320]],form:{nextForm:"raptor"},highlightIf:e=>e.canDoForm("opo")&&!e.hasResourceAvailable("OPO_OPOS_FURY"),onConfirm:e=>e.resources.get("OPO_OPOS_FURY").gain(1)});zn("TWIN_SNAKES",18,{applicationDelay:.84,potency:[["NEVER",340],["MELEE_MASTERY_MNK",380],["MELEE_MASTERY_II_MNK",420]],form:{requiredForm:"raptor",nextForm:"coeurl"},highlightIf:e=>!e.hasResourceAvailable("RAPTORS_FURY"),onConfirm:e=>e.resources.get("RAPTORS_FURY").gain(1)});zn("DEMOLISH",30,{applicationDelay:1.6,potency:[["NEVER",280],["MELEE_MASTERY_MNK",320],["MELEE_MASTERY_II_MNK",360]],form:{requiredForm:"coeurl",nextForm:"opo"},positional:{potency:[["NEVER",340],["MELEE_MASTERY_MNK",380],["MELEE_MASTERY_II_MNK",420]],location:"rear"},highlightIf:e=>!e.hasResourceAvailable("COEURLS_FURY"),onConfirm:e=>e.resources.get("COEURLS_FURY").gain(2)});[["ARM_OF_THE_DESTROYER",26,.54,110],["SHADOW_OF_THE_DESTROYER",82,.4,120]].forEach(([e,t,a,o],s)=>{zn(e,t,{...s===0?{autoUpgrade:{otherSkill:"SHADOW_OF_THE_DESTROYER",trait:"ARM_OF_THE_DESTROYER_MASTERY"}}:{autoDowngrade:{otherSkill:"ARM_OF_THE_DESTROYER",trait:"ARM_OF_THE_DESTROYER_MASTERY"}},applicationDelay:a,potency:o,falloff:0,form:{nextForm:"raptor"},highlightIf:d=>d.canDoForm("opo"),jobPotencyModifiers:s===1?d=>d.hasResourceAvailable("OPO_OPO_FORM")?[X.AutoCrit]:[]:void 0})});zn("ROCKBREAKER",30,{applicationDelay:.94,potency:150,falloff:0,form:{requiredForm:"raptor",nextForm:"coeurl"}});zn("FOUR_POINT_FURY",45,{applicationDelay:.97,potency:140,falloff:0,form:{requiredForm:"coeurl",nextForm:"opo"}});const WO=e=>{const t=Sl.map(a=>e.resources.get(a).availableAmount());return e.hasResourceAvailable("LUNAR_NADI")&&e.hasResourceAvailable("SOLAR_NADI")&&t.every(a=>a>0)},qT=e=>{const t=Sl.map(s=>e.resources.get(s).availableAmount()),a=t[0];return a>0&&t[1]===a&&t[2]===a&&!(e.hasResourceAvailable("LUNAR_NADI")&&e.hasResourceAvailable("SOLAR_NADI"))},ZT=e=>{const t=Sl.map(o=>e.resources.get(o).availableAmount()),a=[!1,!1,!1];return t.forEach(o=>{console.assert(o<4,"beast chakra had invalid value"),o<4&&o>0&&(a[o-1]=!0)}),a.every(o=>o)&&t.every(o=>o>0)&&!(e.hasResourceAvailable("LUNAR_NADI")&&e.hasResourceAvailable("SOLAR_NADI"))},XO=e=>{const t=Sl.map(a=>e.resources.get(a).availableAmount());return!qT(e)&&!ZT(e)&&t.every(a=>a>0)&&!(e.hasResourceAvailable("LUNAR_NADI")&&e.hasResourceAvailable("SOLAR_NADI"))},i2=e=>!WO(e)&&!qT(e)&&!ZT(e)&&!XO(e),ku=[{newSkill:"MASTERFUL_BLITZ",condition:i2},{newSkill:"ELIXIR_FIELD",condition:qT},{newSkill:"FLINT_STRIKE",condition:ZT},{newSkill:"CELESTIAL_REVOLUTION",condition:XO},{newSkill:"TORNADO_KICK",condition:WO}],Kf=e=>{Sl.forEach(t=>e.tryConsumeResource(t,!0)),e.setForm("formless")},qO=e=>t=>t.resources.get(e==="lunar"?"LUNAR_NADI":"SOLAR_NADI").gain(1);zn("MASTERFUL_BLITZ",60,{applicationDelay:0,replaceIf:ku,validateAttempt:e=>!1});[["TORNADO_KICK",60,1.69,1200],["PHANTOM_RUSH",90,.4,1500]].forEach(([e,t,a,o],s)=>{zn(e,t,{...s===0?{autoUpgrade:{otherSkill:"PHANTOM_RUSH",trait:"TORNADO_KICK_MASTERY"}}:{autoDowngrade:{otherSkill:"TORNADO_KICK",trait:"TORNADO_KICK_MASTERY"}},startOnHotbar:!1,applicationDelay:a,replaceIf:ku,highlightIf:d=>!0,potency:o,falloff:.35,onConfirm:Me(Kf,d=>{d.tryConsumeResource("LUNAR_NADI"),d.tryConsumeResource("SOLAR_NADI")})})});[["ELIXIR_FIELD",60,1.07,800],["ELIXIR_BURST",92,1.42,900]].forEach(([e,t,a,o],s)=>{zn(e,t,{...s===0?{autoUpgrade:{otherSkill:"ELIXIR_BURST",trait:"BEAST_CHAKRA_MASTERY"}}:{autoDowngrade:{otherSkill:"ELIXIR_FIELD",trait:"BEAST_CHAKRA_MASTERY"}},startOnHotbar:!1,applicationDelay:a,replaceIf:ku,highlightIf:d=>!0,potency:o,falloff:.35,onConfirm:Me(Kf,qO("lunar"))})});zn("CELESTIAL_REVOLUTION",60,{startOnHotbar:!1,applicationDelay:.89,replaceIf:ku,highlightIf:e=>!0,potency:600,onConfirm:Me(Kf,e=>e.resources.get(e.hasResourceAvailable("LUNAR_NADI")?"SOLAR_NADI":"LUNAR_NADI").gain(1))});[["FLINT_STRIKE",60,.53,800],["RISING_PHOENIX",86,.76,900]].forEach(([e,t,a,o],s)=>{zn(e,t,{...s===0?{autoUpgrade:{otherSkill:"RISING_PHOENIX",trait:"FLINT_STRIKE_MASTERY"}}:{autoDowngrade:{otherSkill:"FLINT_STRIKE",trait:"FLINT_STRIKE_MASTERY"}},startOnHotbar:!1,applicationDelay:a,replaceIf:ku,highlightIf:d=>!0,potency:o,falloff:.35,onConfirm:Me(Kf,qO("solar"))})});zn("SIX_SIDED_STAR",80,{recastTime:5,applicationDelay:.62,potency:[["NEVER",710],["MELEE_MASTERY_II_MNK",780]],onConfirm:e=>{e.tryConsumeResource("CHAKRA",!0),e.gainStatus("SIX_SIDED_STAR")},jobPotencyModifiers:e=>{const t=e.resources.get("CHAKRA").availableAmount();return t>0?[{kind:"adder",additiveAmount:80*t,source:U.SSS_CHAKRA}]:[]}});zn("FORM_SHIFT",52,{applicationDelay:0,onConfirm:e=>e.setForm("formless")});function QT(e,t,a){return nn("MNK",e,t,{autoUpgrade:a.autoUpgrade,autoDowngrade:a.autoDowngrade,recastTime:1,applicationDelay:0,replaceIf:[{newSkill:a.spender,condition:o=>o.resources.get("CHAKRA").available(5)}],validateAttempt:o=>!o.resources.get("CHAKRA").available(5),onConfirm:o=>o.resources.get("CHAKRA").gain(o.isInCombat()?1:5)})}QT("FORBIDDEN_MEDITATION",54,{spender:"THE_FORBIDDEN_CHAKRA"});QT("INSPIRITED_MEDITATION",40,{autoUpgrade:{otherSkill:"ENLIGHTENED_MEDITATION",trait:"HOWLING_FIST_MASTERY"},spender:"HOWLING_FIST"});QT("ENLIGHTENED_MEDITATION",74,{autoDowngrade:{otherSkill:"ENLIGHTENED_MEDITATION",trait:"HOWLING_FIST_MASTERY"},spender:"ENLIGHTENMENT"});[["HOWLING_FIST",40,1.16,100,"cd_THE_FORBIDDEN_CHAKRA"],["ENLIGHTENMENT",74,.76,160,"cd_ENLIGHTENMENT"]].forEach(([e,t,a,o,s],c)=>{Yf(e,t,s,{...c===0?{autoUpgrade:{otherSkill:"ENLIGHTENMENT",trait:"HOWLING_FIST_MASTERY"}}:{autoDowngrade:{otherSkill:"HOWLING_FIST",trait:"HOWLING_FIST_MASTERY"}},startOnHotbar:!1,applicationDelay:a,cooldown:1,potency:o,falloff:0,requiresCombat:!0,highlightIf:h=>h.resources.get("CHAKRA").available(5),validateAttempt:h=>h.resources.get("CHAKRA").available(5),onConfirm:h=>h.consumeFiveChakra()})});Yf("THE_FORBIDDEN_CHAKRA",54,"cd_THE_FORBIDDEN_CHAKRA",{startOnHotbar:!1,replaceIf:[{newSkill:"FORBIDDEN_MEDITATION",condition:e=>!e.resources.get("CHAKRA").available(5)}],applicationDelay:1.48,cooldown:1,potency:[["NEVER",310],["MELEE_MASTERY_MNK",400]],requiresCombat:!0,highlightIf:e=>e.resources.get("CHAKRA").available(5),validateAttempt:e=>e.resources.get("CHAKRA").available(5),onConfirm:e=>e.consumeFiveChakra()});tc("PERFECT_BALANCE",50,"cd_PERFECT_BALANCE",{rscType:"PERFECT_BALANCE",applicationDelay:0,cooldown:40,maxCharges:2,requiresCombat:!0,validateAttempt:e=>!Sl.map(t=>e.hasResourceAvailable(t)).some(t=>t),onConfirm:e=>e.startPB()});tc("RIDDLE_OF_FIRE",68,"cd_RIDDLE_OF_FIRE",{rscType:"RIDDLE_OF_FIRE",applicationDelay:0,cooldown:60,replaceIf:[{newSkill:"FIRES_REPLY",condition:e=>e.hasResourceAvailable("FIRES_RUMINATION")}],onConfirm:e=>e.gainStatus("FIRES_RUMINATION")});tc("BROTHERHOOD",70,"cd_BROTHERHOOD",{rscType:"BROTHERHOOD",applicationDelay:.76,cooldown:120,onApplication:e=>{e.gainStatus("MEDITATIVE_BROTHERHOOD"),e.resources.set(new Jn("CHAKRA",10,e.resources.get("CHAKRA").availableAmount())),e.addEvent(new Ce("restore BH max stacks",Ft("MNK","BROTHERHOOD").maxTimeout,()=>e.resources.set(new Jn("CHAKRA",5,Math.min(e.resources.get("CHAKRA").availableAmount(),5)))))}});tc("RIDDLE_OF_WIND",72,"cd_RIDDLE_OF_WIND",{rscType:"RIDDLE_OF_WIND",applicationDelay:0,cooldown:90,replaceIf:[{newSkill:"WINDS_REPLY",condition:e=>e.hasResourceAvailable("WINDS_RUMINATION")}],onConfirm:e=>e.gainStatus("WINDS_RUMINATION")});Yf("THUNDERCLAP",35,"cd_THUNDERCLAP",{applicationDelay:0,cooldown:30,maxCharges:3,animationLock:Vt,drawsAggro:!0});tc("MANTRA",42,"cd_MANTRA",{rscType:"MANTRA",applicationDelay:1.5,cooldown:90});tc("RIDDLE_OF_EARTH",64,"cd_RIDDLE_OF_EARTH",{rscType:"RIDDLE_OF_EARTH",applicationDelay:0,cooldown:120,healingPotency:100,replaceIf:[{newSkill:"EARTHS_REPLY",condition:e=>e.hasResourceAvailable("EARTHS_RUMINATION")}],onConfirm:e=>e.gainStatus("EARTHS_RUMINATION")});Yf("EARTHS_REPLY",64,"cd_EARTHS_REPLY",{startOnHotbar:!1,applicationDelay:1.07,cooldown:1,healingPotency:300,highlightIf:e=>e.hasResourceAvailable("EARTHS_RUMINATION"),validateAttempt:e=>e.hasResourceAvailable("EARTHS_RUMINATION"),onConfirm:e=>e.tryConsumeResource("EARTHS_RUMINATION")});zn("WINDS_REPLY",96,{startOnHotbar:!1,applicationDelay:1.2,potency:1040,falloff:.35,highlightIf:e=>e.hasResourceAvailable("WINDS_RUMINATION"),validateAttempt:e=>e.hasResourceAvailable("WINDS_RUMINATION"),onConfirm:e=>e.tryConsumeResource("WINDS_RUMINATION")});zn("FIRES_REPLY",100,{startOnHotbar:!1,applicationDelay:1.42,potency:1400,falloff:.35,highlightIf:e=>e.hasResourceAvailable("FIRES_RUMINATION"),validateAttempt:e=>e.hasResourceAvailable("FIRES_RUMINATION"),onConfirm:e=>{e.tryConsumeResource("FIRES_RUMINATION"),e.setForm("formless")}});Object.keys(QR).forEach(e=>jt(e,`VPR/${we[e].name}.png`));const o2=Object.keys(QR);class l2 extends Wt{jobSpecificOtherTargetedBuffViewProps(){return[]}jobSpecificSelfTargetedBuffViewProps(){return o2.map(t=>this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){const a=this.state.resources,o=a.get("VPR_COMBO"),s=a.get("VPR_AOE_COMBO"),c=["HUNTERS_COIL_READY","SWIFTSKINS_COIL_READY","HUNTERS_DEN_READY","SWIFTSKINS_DEN_READY"],d=a.get("RATTLING_COIL").availableAmount(),h=a.get("SERPENT_OFFERINGS").availableAmount(),f=a.get("ANGUINE_TRIBUTE").availableAmount(),m=o.available(1)?o.pendingChange?.timeTillEvent:s.available(1)?s.pendingChange?.timeTillEvent:void 0,R=c.filter(I=>a.get(I).available(1)),T=R.length>0?Math.max(...R.map(I=>a.get(I).pendingChange.timeTillEvent)):void 0,S=[{kind:"bar",name:g({en:"Dual Wield Combo Timer",zh:""}),color:t.vpr.vprComboTimer,progress:m?m/30:0,valueString:m?.toFixed(3)??"N/A"},{kind:"bar",name:g({en:"Twinblade Combo Timer",zh:""}),color:t.vpr.vprComboTimer,progress:T?T/30:0,valueString:T?.toFixed(3)??"N/A"},{kind:"counter",name:Ke("RATTLING_COIL"),color:t.vpr.rattlingCoil,currentStacks:d,maxStacks:a.get("RATTLING_COIL").maxValue}];return this.state.hasTraitUnlocked("SERPENTS_LINEAGE")&&S.push({kind:"bar",name:Ke("SERPENT_OFFERINGS"),color:h>=50?t.vpr.anguineTribute:t.vpr.serpentOfferings,progress:h/100,valueString:h.toFixed(0)},{kind:"counter",name:Ke("ANGUINE_TRIBUTE"),color:t.vpr.anguineTribute,currentStacks:f,maxStacks:a.get("ANGUINE_TRIBUTE").maxValue}),S}}const ht=(e,t,a)=>{Ve("VPR",e,t,a??{})};ht("RATTLING_COIL",3,{warnOnOvercap:!0});ht("SERPENT_OFFERINGS",100,{warnOnOvercap:!0});ht("ANGUINE_TRIBUTE",5,{timeout:30});ht("HUNTERS_INSTINCT",1,{timeout:40});ht("SWIFTSCALED",1,{timeout:40});ht("HONED_STEEL",1,{timeout:60});ht("HONED_REAVERS",1,{timeout:60});ht("FLANKSTUNG_VENOM",1,{timeout:60});ht("HINDSTUNG_VENOM",1,{timeout:60});ht("FLANKSBANE_VENOM",1,{timeout:60});ht("HINDSBANE_VENOM",1,{timeout:60});ht("GRIMSKINS_VENOM",1,{timeout:60});ht("GRIMHUNTERS_VENOM",1,{timeout:60});ht("HUNTERS_VENOM",1,{timeout:30});ht("SWIFTSKINS_VENOM",1,{timeout:30});ht("POISED_FOR_TWINFANG",1,{timeout:60});ht("POISED_FOR_TWINBLOOD",1,{timeout:60});ht("FELLHUNTERS_VENOM",1,{timeout:30});ht("FELLSKINS_VENOM",1,{timeout:30});ht("READY_TO_REAWAKEN",1,{timeout:30,warnOnTimeout:!0});ht("REAWAKENED",1,{timeout:30,warnOnTimeout:!0});ht("DEATH_RATTLE_READY",1);ht("COIL_OGCD_READY",2);ht("DEN_OGCD_READY",2);ht("UNCOILED_OGCD_READY",2);ht("HUNTERS_COIL_READY",1,{timeout:30,warnOnTimeout:!0});ht("HUNTERS_DEN_READY",1,{timeout:30,warnOnTimeout:!0});ht("SWIFTSKINS_COIL_READY",1,{timeout:30,warnOnTimeout:!0});ht("SWIFTSKINS_DEN_READY",1,{timeout:30,warnOnTimeout:!0});ht("LAST_LASH_READY",1);ht("LEGACY_READY",4);ht("VPR_COMBO",4,{timeout:30});ht("VPR_AOE_COMBO",2,{timeout:30});ht("REAWAKEN_COMBO",4);const ZO=["DEATH_RATTLE_READY","LAST_LASH_READY","COIL_OGCD_READY","UNCOILED_OGCD_READY","HUNTERS_VENOM","SWIFTSKINS_VENOM","POISED_FOR_TWINFANG","POISED_FOR_TWINBLOOD","DEN_OGCD_READY","LEGACY_READY"],QO=["FLANKSBANE_VENOM","FLANKSTUNG_VENOM"],JO=["HINDSBANE_VENOM","HINDSTUNG_VENOM"],zr=[...QO,...JO];class s2 extends Xt{constructor(t){super(t);const a=this.hasTraitUnlocked("ENHANCED_SLITHER")?3:2;this.cooldowns.set(new He("cd_SLITHER",30,a,a));const o=this.hasTraitUnlocked("ENHANCED_VIPERS_RATTLE")?3:2,s=this.hasTraitUnlocked("ENHANCED_SERPENTS_LINEAGE")?5:4;this.resources.set(new Jn("RATTLING_COIL",o,0,!0)),this.resources.set(new Jn("ANGUINE_TRIBUTE",s,0)),this.registerRecurringEvents()}inherentSpeedModifier(){return 15}jobSpecificAddDamageBuffCovers(t,a){this.hasResourceAvailable("HUNTERS_INSTINCT")&&t.addBuff(k.HuntersInstinct)}jobSpecificAddSpeedBuffCovers(t,a){this.hasResourceAvailable("SWIFTSCALED")&&a.cdName==="cd_GCD"&&t.addBuff(k.Swiftscaled)}get statusPropsGenerator(){return new l2(this)}getSwiftscaledModifier(){return this.hasResourceAvailable("SWIFTSCALED")?this.inherentSpeedModifier():0}isNoReawakenComboAt(t){return!this.hasResourceAvailable("REAWAKENED")&&this.hasResourceExactly("VPR_COMBO",t)}isNoReawakenAoeComboAt(t){return!this.hasResourceAvailable("REAWAKENED")&&this.hasResourceExactly("VPR_AOE_COMBO",t)}setLegacy(t){this.hasTraitUnlocked("SERPENTS_LEGACY")&&this.resources.get("LEGACY_READY").overrideCurrentValue(t)}gainOfferings(t){this.hasTraitUnlocked("SERPENTS_LINEAGE")&&this.resources.get("SERPENT_OFFERINGS").gain(t)}processCombo(t){if(t==="WRITHING_SNAP"||t==="UNCOILED_FURY")return;const o=["REAWAKEN","FIRST_GENERATION","SECOND_GENERATION","THIRD_GENERATION","FOURTH_GENERATION"].indexOf(t);if(o!==-1){this.setComboState("REAWAKEN_COMBO",(o+1)%5);return}const s=this.resources.get("VPR_COMBO").availableAmount(),c=this.resources.get("VPR_AOE_COMBO").availableAmount(),[d,h]=new Map([["STEEL_FANGS",[1,0]],["REAVING_FANGS",[1,0]],["HUNTERS_STING",[2,0]],["SWIFTSKINS_STING",[3,0]],["FLANKSTING_STRIKE",[0,0]],["FLANKSBANE_FANG",[0,0]],["HINDSTING_STRIKE",[0,0]],["HINDSBANE_FANG",[0,0]],["STEEL_MAW",[0,1]],["REAVING_MAW",[0,1]],["HUNTERS_BITE",[0,2]],["SWIFTSKINS_BITE",[0,2]],["JAGGED_MAW",[0,0]],["BLOODIED_MAW",[0,0]]]).get(t)??[s,c];d!==s&&this.setComboState("VPR_COMBO",d),h!==c&&this.setComboState("VPR_AOE_COMBO",h),this.setComboState("REAWAKEN_COMBO",0)}cancelVicewinderCombo(t){t!=="SWIFTSKINS_COIL"&&this.tryConsumeResource("HUNTERS_COIL_READY"),t!=="HUNTERS_COIL"&&this.tryConsumeResource("SWIFTSKINS_COIL_READY"),t!=="SWIFTSKINS_DEN"&&this.tryConsumeResource("HUNTERS_DEN_READY"),t!=="HUNTERS_DEN"&&this.tryConsumeResource("SWIFTSKINS_DEN_READY")}consumeAnguine(){this.tryConsumeResource("ANGUINE_TRIBUTE"),this.hasResourceAvailable("ANGUINE_TRIBUTE")||this.cancelReawaken()}cancelReawaken(){this.tryConsumeResource("LEGACY_READY",!0),this.tryConsumeResource("ANGUINE_TRIBUTE",!0),this.tryConsumeResource("REAWAKENED"),this.setComboState("REAWAKEN_COMBO",0)}applyExtendedStatus(t,a){zr.includes(t)&&zr.forEach(c=>c!==t&&this.tryConsumeResource(c));const o=this.resources.get(t),s=Ft("VPR",t);this.hasResourceAvailable(t)?s.maxTimeout>0&&o.overrideTimer(this,s.maxTimeout+a):(o.gain(1),s.maxTimeout>0&&this.enqueueResourceDrop(t,s.maxTimeout+a))}}const dn=(e,t,a)=>{const o=a.replaceIf?.find(s=>s.newSkill===e)?.condition;return nn("VPR",e,t,{...a,recastTime:s=>s.config.adjustedSksGCD(a.baseRecastTime??2.5,s.getSwiftscaledModifier()),validateAttempt:Nu(a.validateAttempt,o),onConfirm:Me(s=>{e!=="UNCOILED_FURY"&&e!=="WRITHING_SNAP"&&s.cancelVicewinderCombo(e),ZO.forEach(c=>{s.tryConsumeResource(c,!0)&&p.reportWarning({kind:"overwrite",rsc:c})})},a.onConfirm,a.extendedStatus?s=>s.applyExtendedStatus(a.extendedStatus,a.applicationDelay):void 0,s=>s.processCombo(e)),jobPotencyModifiers:s=>{const c=a.jobPotencyModifiers?.(s)??[];return s.hasResourceAvailable("HUNTERS_INSTINCT")&&c.push(X.HuntersInstinct),c}})},Mo=(e,t,a,o)=>at("VPR",e,t,a,{...o,jobPotencyModifiers:s=>{const c=o.jobPotencyModifiers?.(s)??[];return s.hasResourceAvailable("HUNTERS_INSTINCT")&&c.push(X.HuntersInstinct),c}}),$O={newSkill:"FIRST_GENERATION",condition:e=>e.hasResourceAvailable("REAWAKENED")},eD={newSkill:"SECOND_GENERATION",condition:e=>e.hasResourceAvailable("REAWAKENED")},Yr=[$O];Yr.push(...["STEEL_FANGS","HUNTERS_STING","FLANKSTING_STRIKE","HINDSTING_STRIKE"].map((e,t)=>({newSkill:e,condition:a=>a.isNoReawakenComboAt(t)})));const Kr=[eD];Kr.push(...["REAVING_FANGS","SWIFTSKINS_STING","FLANKSBANE_FANG","HINDSBANE_FANG"].map((e,t)=>({newSkill:e,condition:a=>a.isNoReawakenComboAt(t)})));const Vf=[$O];Vf.push(...["STEEL_MAW","HUNTERS_BITE","JAGGED_MAW"].map((e,t)=>({newSkill:e,condition:a=>a.isNoReawakenAoeComboAt(t)})));const Wf=[eD];Wf.push(...["REAVING_MAW","SWIFTSKINS_BITE","BLOODIED_MAW"].map((e,t)=>({newSkill:e,condition:a=>a.isNoReawakenAoeComboAt(t)})));const tD=[{newSkill:"HUNTERS_COIL",condition:e=>!e.hasResourceAvailable("REAWAKENED")},{newSkill:"THIRD_GENERATION",condition:e=>e.hasResourceAvailable("REAWAKENED")}],nD=[{newSkill:"SWIFTSKINS_COIL",condition:e=>!e.hasResourceAvailable("REAWAKENED")},{newSkill:"FOURTH_GENERATION",condition:e=>e.hasResourceAvailable("REAWAKENED")}],Xf=[{newSkill:"SERPENTS_TAIL",condition:e=>!ZO.some(t=>e.hasResourceAvailable(t))},{newSkill:"DEATH_RATTLE",condition:e=>e.hasResourceAvailable("DEATH_RATTLE_READY")},{newSkill:"LAST_LASH",condition:e=>e.hasResourceAvailable("LAST_LASH_READY")},{newSkill:"FIRST_LEGACY",condition:e=>e.hasResourceExactly("LEGACY_READY",1)},{newSkill:"SECOND_LEGACY",condition:e=>e.hasResourceExactly("LEGACY_READY",2)},{newSkill:"THIRD_LEGACY",condition:e=>e.hasResourceExactly("LEGACY_READY",3)},{newSkill:"FOURTH_LEGACY",condition:e=>e.hasResourceExactly("LEGACY_READY",4)}],aD=[{newSkill:"TWINFANG",condition:e=>!["COIL_OGCD_READY","UNCOILED_OGCD_READY","DEN_OGCD_READY"].some(t=>e.hasResourceAvailable(t))},{newSkill:"TWINFANG_BITE",condition:e=>e.hasResourceAvailable("COIL_OGCD_READY")},{newSkill:"TWINFANG_THRESH",condition:e=>e.hasResourceAvailable("DEN_OGCD_READY")},{newSkill:"UNCOILED_TWINFANG",condition:e=>e.hasResourceAvailable("UNCOILED_OGCD_READY")}],iD=[{newSkill:"TWINBLOOD",condition:e=>!["COIL_OGCD_READY","UNCOILED_OGCD_READY","DEN_OGCD_READY"].some(t=>e.hasResourceAvailable(t))},{newSkill:"TWINBLOOD_BITE",condition:e=>e.hasResourceAvailable("COIL_OGCD_READY")},{newSkill:"TWINBLOOD_THRESH",condition:e=>e.hasResourceAvailable("DEN_OGCD_READY")},{newSkill:"UNCOILED_TWINBLOOD",condition:e=>e.hasResourceAvailable("UNCOILED_OGCD_READY")}],oD=[{newSkill:"REAWAKEN",condition:e=>!e.hasResourceAvailable("ANGUINE_TRIBUTE")},{newSkill:"OUROBOROS",condition:e=>e.hasResourceAvailable("ANGUINE_TRIBUTE")}];dn("WRITHING_SNAP",15,{applicationDelay:.488,potency:200});dn("STEEL_FANGS",1,{replaceIf:Yr,applicationDelay:1.158,potency:[["NEVER",180],["MELEE_MASTERY_VPR",200]],jobPotencyModifiers:e=>e.hasResourceAvailable("HONED_STEEL")?[X.HonedST]:[],highlightIf:e=>e.hasResourceAvailable("HONED_STEEL"),onConfirm:e=>e.tryConsumeResource("HONED_STEEL"),extendedStatus:"HONED_REAVERS"});dn("REAVING_FANGS",10,{replaceIf:Kr,applicationDelay:1.293,potency:[["NEVER",180],["MELEE_MASTERY_VPR",200]],jobPotencyModifiers:e=>e.hasResourceAvailable("HONED_REAVERS")?[X.HonedST]:[],highlightIf:e=>e.hasResourceAvailable("HONED_REAVERS"),onConfirm:e=>e.tryConsumeResource("HONED_REAVERS"),extendedStatus:"HONED_STEEL"});dn("HUNTERS_STING",5,{startOnHotbar:!1,replaceIf:Yr,applicationDelay:.89,potency:[["NEVER",240],["MELEE_MASTERY_VPR",300]],highlightIf:e=>!zr.some(t=>e.hasResourceAvailable(t))||QO.some(t=>e.hasResourceAvailable(t)),extendedStatus:"HUNTERS_INSTINCT"});dn("SWIFTSKINS_STING",20,{startOnHotbar:!1,replaceIf:Kr,applicationDelay:1.16,potency:[["NEVER",280],["MELEE_MASTERY_VPR",300]],highlightIf:e=>!zr.some(t=>e.hasResourceAvailable(t))||JO.some(t=>e.hasResourceAvailable(t)),extendedStatus:"SWIFTSCALED"});const r2=[["FLANKSTING_STRIKE",1.649,"flank","FLANKSTUNG_VENOM","HINDSTUNG_VENOM",Yr],["FLANKSBANE_FANG",1.604,"flank","FLANKSBANE_VENOM","HINDSBANE_VENOM",Kr],["HINDSTING_STRIKE",.98,"rear","HINDSTUNG_VENOM","FLANKSBANE_VENOM",Yr],["HINDSBANE_FANG",1.203,"rear","HINDSBANE_VENOM","FLANKSTUNG_VENOM",Kr]];r2.forEach(([e,t,a,o,s,c])=>{dn(e,30,{startOnHotbar:!1,replaceIf:c,applicationDelay:t,potency:[["NEVER",320],["MELEE_MASTERY_II_VPR",340]],positional:{potency:[["NEVER",380],["MELEE_MASTERY_II_VPR",400]],location:a},jobPotencyModifiers:d=>d.hasResourceAvailable(o)?[X.VenomST]:[],highlightIf:d=>!zr.some(h=>d.hasResourceAvailable(h))||d.hasResourceAvailable(o),onConfirm:d=>{d.gainStatus("DEATH_RATTLE_READY"),d.resources.get("SERPENT_OFFERINGS").gain(10),zr.filter(h=>h!==o).some(h=>d.hasResourceAvailable(h))&&p.reportWarning({kind:"custom",en:"incorrect combo ender!"})},extendedStatus:s})});dn("HUNTERS_COIL",65,{replaceIf:tD,applicationDelay:.982,potency:570,positional:{potency:620,location:"flank"},baseRecastTime:3,highlightIf:e=>e.hasResourceAvailable("HUNTERS_COIL_READY"),validateAttempt:e=>e.hasResourceAvailable("HUNTERS_COIL_READY"),onConfirm:e=>{e.gainOfferings(5),e.hasTraitUnlocked("VIPERS_BITE")&&(e.gainStatus("HUNTERS_VENOM"),e.gainStatus("COIL_OGCD_READY",2)),e.hasResourceAvailable("SWIFTSKINS_COIL_READY")&&e.gainStatus("SWIFTSKINS_COIL_READY")},extendedStatus:"HUNTERS_INSTINCT"});dn("SWIFTSKINS_COIL",65,{replaceIf:nD,applicationDelay:1.473,potency:570,positional:{potency:620,location:"rear"},baseRecastTime:3,highlightIf:e=>e.hasResourceAvailable("SWIFTSKINS_COIL_READY"),validateAttempt:e=>e.hasResourceAvailable("SWIFTSKINS_COIL_READY"),onConfirm:e=>{e.gainOfferings(5),e.hasTraitUnlocked("VIPERS_BITE")&&(e.gainStatus("SWIFTSKINS_VENOM"),e.gainStatus("COIL_OGCD_READY",2)),e.hasResourceAvailable("HUNTERS_COIL_READY")&&e.gainStatus("HUNTERS_COIL_READY")},extendedStatus:"SWIFTSCALED"});dn("REAWAKEN",90,{replaceIf:oD,applicationDelay:.625,potency:750,falloff:.8,baseRecastTime:2.2,highlightIf:e=>e.hasResourceAvailable("SERPENT_OFFERINGS",50)||e.hasResourceAvailable("READY_TO_REAWAKEN"),validateAttempt:e=>e.hasResourceAvailable("SERPENT_OFFERINGS",50)||e.hasResourceAvailable("READY_TO_REAWAKEN"),onConfirm:e=>{e.tryConsumeResource("READY_TO_REAWAKEN")||e.resources.get("SERPENT_OFFERINGS").consume(50),e.gainStatus("ANGUINE_TRIBUTE",e.resources.get("ANGUINE_TRIBUTE").maxValue),e.gainStatus("REAWAKENED"),e.resources.get("REAWAKENED").removeTimer(),e.resources.addResourceEvent({rscType:"REAWAKENED",name:"cancel reawaken",delay:Ft("VPR","REAWAKENED").maxTimeout,fnOnRsc:()=>e.cancelReawaken()})}});dn("OUROBOROS",96,{startOnHotbar:!1,replaceIf:oD,applicationDelay:2.313,potency:1150,falloff:.8,baseRecastTime:3,highlightIf:e=>e.hasResourceExactly("ANGUINE_TRIBUTE",1),onConfirm:e=>e.cancelReawaken()});dn("VICEWINDER",65,{applicationDelay:.581,potency:500,secondaryCooldown:{cdName:"cd_VICEWINDER",cooldown:40,maxCharges:2},baseRecastTime:3,validateAttempt:e=>!e.hasResourceAvailable("REAWAKENED")&&!e.hasResourceAvailable("HUNTERS_COIL_READY")&&!e.hasResourceAvailable("SWIFTSKINS_COIL_READY")&&!e.hasResourceAvailable("HUNTERS_DEN_READY")&&!e.hasResourceAvailable("SWIFTSKINS_DEN_READY"),onConfirm:e=>{e.hasTraitUnlocked("VIPERS_RATTLE")&&e.resources.get("RATTLING_COIL").gain(1),e.gainStatus("HUNTERS_COIL_READY"),e.gainStatus("SWIFTSKINS_COIL_READY")}});dn("UNCOILED_FURY",82,{applicationDelay:.804,potency:680,falloff:.75,baseRecastTime:3.5,highlightIf:e=>e.hasResourceAvailable("RATTLING_COIL"),validateAttempt:e=>e.hasResourceAvailable("RATTLING_COIL"),onConfirm:e=>{e.tryConsumeResource("RATTLING_COIL"),e.hasTraitUnlocked("UNCOILED_FANGS")&&(e.gainStatus("POISED_FOR_TWINFANG"),e.gainStatus("UNCOILED_OGCD_READY",2))}});dn("STEEL_MAW",25,{replaceIf:Vf,applicationDelay:1.091,potency:120,falloff:0,jobPotencyModifiers:e=>e.hasResourceAvailable("HONED_STEEL")?[X.HonedAoE]:[],highlightIf:e=>e.hasResourceAvailable("HONED_STEEL"),onConfirm:e=>e.tryConsumeResource("HONED_STEEL"),extendedStatus:"HONED_REAVERS"});dn("REAVING_MAW",35,{replaceIf:Wf,applicationDelay:.908,potency:120,falloff:0,jobPotencyModifiers:e=>e.hasResourceAvailable("HONED_REAVERS")?[X.HonedAoE]:[],highlightIf:e=>e.hasResourceAvailable("HONED_REAVERS"),onConfirm:e=>e.tryConsumeResource("HONED_REAVERS"),extendedStatus:"HONED_STEEL"});dn("HUNTERS_BITE",40,{startOnHotbar:!1,replaceIf:Vf,applicationDelay:1.134,potency:180,falloff:0,highlightIf:e=>!0,extendedStatus:"HUNTERS_INSTINCT"});dn("SWIFTSKINS_BITE",45,{startOnHotbar:!1,replaceIf:Wf,applicationDelay:1.445,potency:180,falloff:0,highlightIf:e=>!0,extendedStatus:"SWIFTSCALED"});dn("JAGGED_MAW",50,{startOnHotbar:!1,replaceIf:Vf,applicationDelay:1.127,potency:180,falloff:0,jobPotencyModifiers:e=>e.hasResourceAvailable("GRIMSKINS_VENOM")?[X.VenomAoE]:[],highlightIf:e=>e.hasResourceAvailable("GRIMSKINS_VENOM")||!e.hasResourceAvailable("GRIMHUNTERS_VENOM"),onConfirm:e=>{e.gainStatus("LAST_LASH_READY"),e.resources.get("SERPENT_OFFERINGS").gain(10)},extendedStatus:"GRIMHUNTERS_VENOM"});dn("BLOODIED_MAW",50,{startOnHotbar:!1,replaceIf:Wf,applicationDelay:.866,potency:180,falloff:0,jobPotencyModifiers:e=>e.hasResourceAvailable("GRIMHUNTERS_VENOM")?[X.VenomAoE]:[],highlightIf:e=>e.hasResourceAvailable("GRIMHUNTERS_VENOM")||!e.hasResourceAvailable("GRIMSKINS_VENOM"),onConfirm:e=>{e.gainStatus("LAST_LASH_READY"),e.resources.get("SERPENT_OFFERINGS").gain(10)},extendedStatus:"GRIMSKINS_VENOM"});dn("HUNTERS_DEN",70,{replaceIf:[{newSkill:"HUNTERS_DEN",condition:e=>!e.hasResourceAvailable("REAWAKENED")},{newSkill:"THIRD_GENERATION",condition:e=>e.hasResourceAvailable("REAWAKENED")}],applicationDelay:.569,potency:300,falloff:0,baseRecastTime:3,highlightIf:e=>e.hasResourceAvailable("HUNTERS_DEN_READY"),validateAttempt:e=>e.hasResourceAvailable("HUNTERS_DEN_READY"),onConfirm:e=>{e.gainOfferings(5),e.hasTraitUnlocked("VIPERS_THRESH")&&(e.gainStatus("FELLHUNTERS_VENOM"),e.gainStatus("DEN_OGCD_READY",2)),e.hasResourceAvailable("SWIFTSKINS_DEN_READY")&&e.gainStatus("SWIFTSKINS_DEN_READY")},extendedStatus:"HUNTERS_INSTINCT"});dn("SWIFTSKINS_DEN",70,{replaceIf:[{newSkill:"SWIFTSKINS_DEN",condition:e=>!e.hasResourceAvailable("REAWAKENED")},{newSkill:"FOURTH_GENERATION",condition:e=>e.hasResourceAvailable("REAWAKENED")}],applicationDelay:.999,potency:300,falloff:0,baseRecastTime:3,highlightIf:e=>e.hasResourceAvailable("SWIFTSKINS_DEN_READY"),validateAttempt:e=>e.hasResourceAvailable("SWIFTSKINS_DEN_READY"),onConfirm:e=>{e.gainOfferings(5),e.hasTraitUnlocked("VIPERS_THRESH")&&(e.gainStatus("FELLSKINS_VENOM"),e.gainStatus("DEN_OGCD_READY",2)),e.hasResourceAvailable("HUNTERS_DEN_READY")&&e.gainStatus("HUNTERS_DEN_READY")},extendedStatus:"SWIFTSCALED"});dn("VICEPIT",70,{applicationDelay:.827,potency:250,secondaryCooldown:{cdName:"cd_VICEWINDER",cooldown:40,maxCharges:2},falloff:0,baseRecastTime:3,validateAttempt:e=>!e.hasResourceAvailable("REAWAKENED")&&!e.hasResourceAvailable("HUNTERS_COIL_READY")&&!e.hasResourceAvailable("SWIFTSKINS_COIL_READY")&&!e.hasResourceAvailable("HUNTERS_DEN_READY")&&!e.hasResourceAvailable("SWIFTSKINS_DEN_READY"),onConfirm:e=>{e.hasTraitUnlocked("VIPERS_RATTLE")&&(p.timeline.duringUntargetable(e.getDisplayTime())||e.resources.get("RATTLING_COIL").gain(1)),e.gainStatus("HUNTERS_DEN_READY"),e.gainStatus("SWIFTSKINS_DEN_READY")}});Mo("SERPENTS_IRE",86,"cd_SERPENTS_IRE",{applicationDelay:0,cooldown:120,requiresCombat:!0,onConfirm:e=>{e.resources.get("RATTLING_COIL").gain(1),e.hasTraitUnlocked("SERPENTS_LINEAGE")&&e.gainStatus("READY_TO_REAWAKEN")}});Mo("SLITHER",40,"cd_SLITHER",{applicationDelay:0,cooldown:30,maxCharges:3,animationLock:Vt});Mo("SERPENTS_TAIL",55,"cd_SERPENTS_TAIL",{replaceIf:Xf,applicationDelay:0,cooldown:1,validateAttempt:e=>!1});Mo("DEATH_RATTLE",55,"cd_SERPENTS_TAIL",{startOnHotbar:!1,replaceIf:Xf,applicationDelay:1.697,cooldown:1,potency:280,highlightIf:e=>!0,onConfirm:e=>e.tryConsumeResource("DEATH_RATTLE_READY")});Mo("LAST_LASH",60,"cd_SERPENTS_TAIL",{startOnHotbar:!1,replaceIf:Xf,applicationDelay:1.226,cooldown:1,potency:120,falloff:0,highlightIf:e=>!0,onConfirm:e=>e.tryConsumeResource("LAST_LASH_READY")});Mo("TWINFANG",75,"cd_TWINFANG",{replaceIf:aD,applicationDelay:0,cooldown:1,validateAttempt:e=>!1});Mo("TWINBLOOD",75,"cd_TWINBLOOD",{replaceIf:iD,applicationDelay:0,cooldown:1,validateAttempt:e=>!1});const c2=[["TWINFANG_BITE",75,"fang",.629,120,void 0,"COIL_OGCD_READY","HUNTERS_VENOM",X.VenomOGCDST,"SWIFTSKINS_VENOM"],["TWINBLOOD_BITE",75,"blood",.714,120,void 0,"COIL_OGCD_READY","SWIFTSKINS_VENOM",X.VenomOGCDST,"HUNTERS_VENOM"],["TWINFANG_THRESH",80,"fang",.666,50,0,"DEN_OGCD_READY","FELLHUNTERS_VENOM",X.VenomOGCDAoE,"FELLSKINS_VENOM"],["TWINBLOOD_THRESH",80,"blood",.764,50,0,"DEN_OGCD_READY","FELLSKINS_VENOM",X.VenomOGCDAoE,"FELLHUNTERS_VENOM"],["UNCOILED_TWINFANG",92,"fang",1.04,120,.75,"UNCOILED_OGCD_READY","POISED_FOR_TWINFANG",X.Poised,"POISED_FOR_TWINBLOOD"],["UNCOILED_TWINBLOOD",92,"blood",.977,120,.75,"UNCOILED_OGCD_READY","POISED_FOR_TWINBLOOD",X.Poised,"POISED_FOR_TWINFANG"]];c2.forEach(([e,t,a,o,s,c,d,h,f,m])=>{Mo(e,t,a==="fang"?"cd_TWINFANG":"cd_TWINBLOOD",{startOnHotbar:!1,replaceIf:a==="fang"?aD:iD,applicationDelay:o,cooldown:1,potency:s,falloff:c,highlightIf:R=>R.hasResourceAvailable(h),jobPotencyModifiers:R=>R.hasResourceAvailable(h)?[f]:[],onConfirm:R=>{R.tryConsumeResource(d),R.hasResourceAvailable(h)||p.reportWarning({kind:"custom",en:`unbuffed twin${a} ability!`}),R.tryConsumeResource(h)&&R.hasResourceAvailable(d)?R.gainStatus(m):R.tryConsumeResource(m)}})});const u2=[["FIRST_GENERATION",1.702,Yr],["SECOND_GENERATION",1.473,Kr],["THIRD_GENERATION",1.473,tD],["FOURTH_GENERATION",1.473,nD]];u2.forEach(([e,t,a],o)=>{dn(e,90,{replaceIf:a,startOnHotbar:!1,applicationDelay:t,potency:420,falloff:.8,baseRecastTime:2,combo:{resource:"REAWAKEN_COMBO",resourceValue:o+1,potency:680},highlightIf:s=>s.hasResourceExactly("REAWAKEN_COMBO",o+1),onConfirm:s=>{s.setLegacy(o+1),s.consumeAnguine()}})});const d2=[["FIRST_LEGACY",1.289],["SECOND_LEGACY",1.065],["THIRD_LEGACY",1.19],["FOURTH_LEGACY",1.065]];d2.forEach(([e,t])=>{Mo(e,100,"cd_SERPENTS_TAIL",{startOnHotbar:!1,replaceIf:Xf,applicationDelay:t,cooldown:1,potency:320,falloff:.8,highlightIf:a=>!0,onConfirm:a=>a.tryConsumeResource("LEGACY_READY",!0)})});const lD=["SONG_OF_TORMENT","NIGHTBLOOM","FEATHER_RAIN","MORTAL_FLAME","BREATH_OF_MAGIC","WANING_NOCTURNE","DIAMONDBACK","BRUSH_WITH_DEATH"],h2=Object.keys(eT).filter(e=>!lD.includes(e));Object.keys(eT).forEach(e=>jt(e,`BLU/${we[e].name}.png`));class f2 extends Wt{jobSpecificOtherTargetedBuffViewProps(){return[...lD.map(t=>this.makeCommonTimer(t,!1))]}jobSpecificSelfTargetedBuffViewProps(){return h2.map(t=>this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){return[]}}const Mn=(e,t,a)=>{Ve("BLU",e,t,a??{})};Mn("NIGHTBLOOM",1,{timeout:60});Mn("SONG_OF_TORMENT",1,{timeout:30});Mn("FEATHER_RAIN",1,{timeout:6});Mn("WAXING_NOCTURNE",1,{timeout:15});Mn("WANING_NOCTURNE",1,{timeout:15});Mn("DIAMONDBACK",1,{timeout:10});Mn("BRISTLE",1,{timeout:30});Mn("WHISTLE",1,{timeout:30});Mn("TINGLE",1,{timeout:15});Mn("COLD_FOG",1,{timeout:5});Mn("TOUCH_OF_FROST",1,{timeout:15});Mn("PHANTOM_FLURRY",1,{timeout:5});Mn("APOKALYPSIS",1,{timeout:10});Mn("WINGED_REPROBATION",4);Mn("WINGED_REDEMPTION",1,{timeout:10});Mn("BREATH_OF_MAGIC",1,{timeout:60});Mn("MORTAL_FLAME",1,{timeout:900});Mn("SURPANAKHAS_FURY",4,{timeout:3});Mn("BRUSH_WITH_DEATH",1,{timeout:600});class E2 extends Xt{constructor(t){super(t),this.cooldowns.set(new He("cd_SWIFTCAST",60,1,1)),this.registerRecurringEvents([{groupedEffects:[{effectName:"NIGHTBLOOM",appliedBy:["NIGHTBLOOM"]},{effectName:"SONG_OF_TORMENT",appliedBy:["SONG_OF_TORMENT"]}]},{groupedEffects:[{effectName:"FEATHER_RAIN",appliedBy:["FEATHER_RAIN"]}]},{groupedEffects:[{effectName:"BREATH_OF_MAGIC",appliedBy:["BREATH_OF_MAGIC"]}]},{groupedEffects:[{effectName:"MORTAL_FLAME",appliedBy:["MORTAL_FLAME"]}]},{groupedEffects:[{effectName:"PHANTOM_FLURRY",appliedBy:["PHANTOM_FLURRY"],isGroundTargeted:!0,exclude:!0},{effectName:"APOKALYPSIS",appliedBy:["APOKALYPSIS"],isGroundTargeted:!0,exclude:!0}]}])}get statusPropsGenerator(){return new f2(this)}refreshBuff(t,a){this.addEvent(new Ce("gain buff",a,()=>{if(this.resources.get(t).gain(1),this.enqueueResourceDrop(t),t==="WANING_NOCTURNE"||t==="DIAMONDBACK"){const o=Ft("BLU",t).maxTimeout,s=this.resources.get("NOT_ANIMATION_LOCKED").pendingChange;s!==void 0?this.resources.get("NOT_ANIMATION_LOCKED").overrideTimer(this,Math.max(o,s.timeTillEvent)):this.resources.takeResourceLock("NOT_ANIMATION_LOCKED",o)}}))}jobSpecificRegisterRecurringEvents(){const t=()=>{this.handleDoTTick("PHANTOM_FLURRY"),this.getDisplayTime()>=0&&p.reportDotTick(this.time,"PHANTOM_FLURRY"),this.addEvent(new Ce("kick tick",1,()=>{t()}))},a=()=>{this.handleDoTTick("APOKALYPSIS"),this.getDisplayTime()>=0&&p.reportDotTick(this.time,"APOKALYPSIS"),this.addEvent(new Ce("Apokalypsis tick",1,()=>{a()}))};let o=this.config.timeTillFirstManaTick+this.dotTickOffset;for(;o>1;)o--;this.addEvent(new Ce("initial kick tick",o,t));let s=this.config.timeTillFirstManaTick+this.dotTickOffset;for(;s>1;)s--;this.addEvent(new Ce("initial Apokalypsis tick",s,a))}cancelChanneledSkills(){this.tryConsumeResource("PHANTOM_FLURRY"),this.tryConsumeResource("APOKALYPSIS")}}const JT=e=>e.hasResourceAvailable("WANING_NOCTURNE")||e.hasResourceAvailable("DIAMONDBACK"),m2=e=>e.hasResourceAvailable("PHANTOM_FLURRY"),A2={newSkill:"END_PHANTOM_FLURRY",condition:e=>m2(e)},zt=(e,t,a)=>{const o=a.basePotency??Number,s=a.aspect??Ie.Other,c=a.baseCastTime??0,d=a.jobPotencyModifiers??(h=>[]);return Ka("BLU",e,t,{...a,aspect:s,castTime:h=>h.config.adjustedCastTime(c),potency:a.basePotency,validateAttempt:h=>!JT(h)&&(a.validateAttempt?.(h)??!0),jobPotencyModifiers:h=>{const f=d(h);return h.hasResourceAvailable("WAXING_NOCTURNE")&&f.push(X.MoonFlute),o!==0&&h.hasResourceAvailable("BRISTLE")&&f.push(X.Bristle)&&h.tryConsumeResource("BRISTLE"),s===Ie.Physical&&h.hasResourceAvailable("WHISTLE")&&f.push(X.Whistle)&&h.tryConsumeResource("WHISTLE"),s===Ie.Physical&&e!=="TRIPLE_TRIDENT"&&h.hasResourceAvailable("TINGLE")&&f.push(X.TingleA)&&h.tryConsumeResource("TINGLE"),e==="TRIPLE_TRIDENT"&&h.hasResourceAvailable("TINGLE")&&f.push(X.TingleB)&&h.tryConsumeResource("TINGLE"),e==="CONVICTION_MARCATO"&&h.hasResourceAvailable("WINGED_REDEMPTION")&&f.push(X.WingedRedemption)&&h.tryConsumeResource("WINGED_REDEMPTION"),e==="WINGED_REPROBATION"&&h.resources.get("WINGED_REPROBATION").availableAmount()===3&&f.push(X.WingedReprobation),f},isInstantFn:h=>h.hasResourceAvailable("SWIFTCAST")||c===0,onConfirm:Me(h=>h.tryConsumeResource("SURPANAKHAS_FURY"),a.baseCastTime?h=>h.tryConsumeResource("SWIFTCAST"):void 0,a.onConfirm)})},ga=(e,t,a,o)=>at("BLU",e,t,a,{jobPotencyModifiers:s=>{const c=[];return s.hasResourceAvailable("WAXING_NOCTURNE")&&c.push(X.MoonFlute),c},validateAttempt:s=>!JT(s)&&(o.validateAttempt?.(s)??!0),...o,onConfirm:Me(s=>{e!=="SURPANAKHA"&&s.tryConsumeResource("SURPANAKHAS_FURY")},o.onConfirm)});zt("SONIC_BOOM",1,{basePotency:210,baseCastTime:1,manaCost:200,applicationDelay:.5});zt("SHARPENED_KNIFE",1,{aspect:Ie.Physical,basePotency:220,baseCastTime:1,manaCost:200,applicationDelay:.5});zt("GOBLIN_PUNCH",1,{aspect:Ie.Physical,basePotency:220,baseCastTime:0,manaCost:200,applicationDelay:.5});zt("REVENGE_BLAST",1,{aspect:Ie.Physical,basePotency:500,baseCastTime:2,manaCost:200,applicationDelay:.5});zt("WILD_RAGE",1,{aspect:Ie.Physical,basePotency:500,baseCastTime:5,manaCost:0,applicationDelay:.5});zt("CONVICTION_MARCATO",1,{basePotency:220,baseCastTime:2,manaCost:200,applicationDelay:.5});zt("WATER_CANNON",1,{basePotency:200,baseCastTime:2,manaCost:200,applicationDelay:.5});zt("HYDRO_PULL",1,{basePotency:220,baseCastTime:2,manaCost:200,applicationDelay:.5});zt("THE_ROSE_OF_DESTRUCTION",1,{basePotency:400,baseCastTime:2,manaCost:300,applicationDelay:.5,secondaryCooldown:{cdName:"cd_THE_ROSE_OF_DESTRUCTION",cooldown:30,maxCharges:1}});zt("MOON_FLUTE",1,{baseCastTime:2,manaCost:500,applicationDelay:.6,onConfirm:e=>{e.hasResourceAvailable("WAXING_NOCTURNE")||(e.refreshBuff("WAXING_NOCTURNE",.6),e.addEvent(new Ce("Waxing_Nocturne ended",15.6,()=>{e.hasResourceAvailable("WANING_NOCTURNE")||e.refreshBuff("WANING_NOCTURNE",0)})))}});zt("DIAMONDBACK",1,{baseCastTime:2,manaCost:3e3,applicationDelay:.6,onConfirm:e=>{e.hasResourceAvailable("WAXING_NOCTURNE")&&(e.tryConsumeResource("WAXING_NOCTURNE"),e.refreshBuff("WANING_NOCTURNE",0)),e.refreshBuff("DIAMONDBACK",.6)}});zt("MATRA_MAGIC",1,{basePotency:800,baseCastTime:2,manaCost:200,applicationDelay:.5,secondaryCooldown:{cdName:"cd_MATRA_MAGIC",cooldown:120,maxCharges:1}});zt("SONG_OF_TORMENT",1,{basePotency:50,baseCastTime:2,manaCost:400,applicationDelay:.5,onConfirm:(e,t)=>{const a=[];e.hasResourceAvailable("WAXING_NOCTURNE")&&a.push(X.MoonFlute),e.hasResourceAvailable("BRISTLE")&&a.push(X.Bristle),e.addDoTPotencies({node:t,effectName:"SONG_OF_TORMENT",skillName:"SONG_OF_TORMENT",tickPotency:50,speedStat:"sps",modifiers:a})},onApplication:(e,t)=>{e.applyDoT("SONG_OF_TORMENT",t)}});zt("BREATH_OF_MAGIC",1,{basePotency:0,baseCastTime:2,manaCost:300,applicationDelay:.5,onConfirm:(e,t)=>{const a=[];e.hasResourceAvailable("WAXING_NOCTURNE")&&a.push(X.MoonFlute),e.hasResourceAvailable("BRISTLE")&&a.push(X.Bristle),e.tryConsumeResource("BRISTLE"),e.addDoTPotencies({node:t,effectName:"BREATH_OF_MAGIC",skillName:"BREATH_OF_MAGIC",tickPotency:120,speedStat:"sps",modifiers:a})},onApplication:(e,t)=>{e.applyDoT("BREATH_OF_MAGIC",t)}});zt("MORTAL_FLAME",1,{basePotency:0,baseCastTime:2,manaCost:500,applicationDelay:.5,onConfirm:(e,t)=>{const a=[];e.hasResourceAvailable("WAXING_NOCTURNE")&&a.push(X.MoonFlute),e.hasResourceAvailable("BRISTLE")&&a.push(X.Bristle),e.tryConsumeResource("BRISTLE"),e.addDoTPotencies({node:t,effectName:"MORTAL_FLAME",skillName:"MORTAL_FLAME",tickPotency:40,speedStat:"sps",modifiers:a})},onApplication:(e,t)=>{e.applyDoT("MORTAL_FLAME",t)}});zt("WHISTLE",1,{baseCastTime:1,manaCost:200,applicationDelay:0,onConfirm:e=>{e.tryConsumeResource("BRISTLE"),e.refreshBuff("WHISTLE",0)}});zt("BRISTLE",1,{baseCastTime:1,manaCost:200,applicationDelay:0,onConfirm:e=>{e.tryConsumeResource("WHISTLE"),e.refreshBuff("BRISTLE",0)}});zt("FINAL_STING",1,{aspect:Ie.Physical,basePotency:2e3,baseCastTime:2,manaCost:0,applicationDelay:.5,validateAttempt:e=>!e.hasResourceAvailable("BRUSH_WITH_DEATH"),onConfirm:e=>{e.refreshBuff("BRUSH_WITH_DEATH",0)}});zt("TINGLE",1,{basePotency:100,baseCastTime:2,manaCost:200,applicationDelay:.5,onConfirm:e=>{e.refreshBuff("TINGLE",0)}});zt("TRIPLE_TRIDENT",1,{aspect:Ie.Physical,basePotency:450,baseCastTime:2,manaCost:300,applicationDelay:.5,secondaryCooldown:{cdName:"cd_TRIPLE_TRIDENT",cooldown:90,maxCharges:1}});const R2=e=>e.hasResourceAvailable("COLD_FOG"),T2=e=>e.hasResourceAvailable("TOUCH_OF_FROST"),S2=[{newSkill:"POP_COLD_FOG",condition:e=>R2(e)},{newSkill:"WHITE_DEATH",condition:e=>T2(e)}];zt("COLD_FOG",1,{replaceIf:S2,baseCastTime:2,cooldown:90,manaCost:300,applicationDelay:.5,secondaryCooldown:{cdName:"cd_COLD_FOG",cooldown:90,maxCharges:1},onConfirm:e=>{e.refreshBuff("COLD_FOG",0)}});zt("WHITE_DEATH",1,{startOnHotbar:!1,basePotency:400,baseCastTime:0,manaCost:0,applicationDelay:.5,validateAttempt:e=>!JT(e)&&e.hasResourceAvailable("TOUCH_OF_FROST")});ga("POP_COLD_FOG",1,"cd_COLD_FOG_POP",{startOnHotbar:!1,applicationDelay:0,animationLock:ma,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("COLD_FOG"),onConfirm:e=>{e.tryConsumeResource("COLD_FOG"),e.refreshBuff("TOUCH_OF_FROST",0)}});zt("END_PHANTOM_FLURRY",1,{startOnHotbar:!1,basePotency:600,baseCastTime:0,manaCost:0,applicationDelay:.5,validateAttempt:e=>e.hasResourceAvailable("PHANTOM_FLURRY")});zt("WINGED_REPROBATION",1,{aspect:Ie.Physical,basePotency:300,baseCastTime:1,manaCost:200,applicationDelay:.5,secondaryCooldown:{cdName:"cd_WINGED_REPROBATION",cooldown:90,maxCharges:1},onConfirm:e=>{e.resources.get("WINGED_REPROBATION").gain(1),e.resources.get("WINGED_REPROBATION").availableAmount()<=3&&e.cooldowns.get("cd_WINGED_REPROBATION").restore(90),e.resources.get("WINGED_REPROBATION").availableAmount()===4&&(e.tryConsumeResource("WINGED_REPROBATION",!0),e.refreshBuff("WINGED_REDEMPTION",0))}});ga("ERUPTION",1,"cd_ERUPTION",{cooldown:30,manaCost:300,potency:300,applicationDelay:.62});ga("FEATHER_RAIN",1,"cd_ERUPTION",{cooldown:30,manaCost:300,potency:220,applicationDelay:.62,onConfirm:(e,t)=>{const a=[];e.hasResourceAvailable("WAXING_NOCTURNE")&&a.push(X.MoonFlute),e.addDoTPotencies({node:t,effectName:"FEATHER_RAIN",skillName:"FEATHER_RAIN",tickPotency:40,speedStat:"sps",modifiers:a}),e.applyDoT("FEATHER_RAIN",t)}});ga("MOUNTAIN_BUSTER",1,"cd_SHOCK_STRIKE",{cooldown:60,manaCost:400,potency:400,applicationDelay:.62});ga("SHOCK_STRIKE",1,"cd_SHOCK_STRIKE",{cooldown:60,manaCost:400,potency:400,applicationDelay:.62});ga("GLASS_DANCE",1,"cd_GLASS_DANCE",{cooldown:90,manaCost:500,potency:350,applicationDelay:.62});ga("QUASAR",1,"cd_QUASAR",{cooldown:60,manaCost:300,potency:300,applicationDelay:.62});ga("J_KICK",1,"cd_QUASAR",{cooldown:60,manaCost:300,potency:300,applicationDelay:1,animationLock:1});ga("BOTH_ENDS",1,"cd_NIGHTBLOOM",{cooldown:120,manaCost:300,potency:600,applicationDelay:.62});ga("SEA_SHANTY",1,"cd_SEA_SHANTY",{cooldown:120,manaCost:300,potency:500,applicationDelay:.62});ga("BEING_MORTAL",1,"cd_BEING_MORTAL",{cooldown:120,manaCost:300,potency:800,applicationDelay:.62});ga("APOKALYPSIS",1,"cd_BEING_MORTAL",{cooldown:120,manaCost:300,potency:0,applicationDelay:1.38,animationLock:1.38,onConfirm:(e,t)=>{const a=[];e.hasResourceAvailable("WAXING_NOCTURNE")&&a.push(X.MoonFlute),e.addDoTPotencies({node:t,effectName:"APOKALYPSIS",skillName:"APOKALYPSIS",tickPotency:140,tickFrequency:1,speedStat:"unscaled",modifiers:a})},onApplication:(e,t)=>{e.applyDoT("APOKALYPSIS",t)}});ga("NIGHTBLOOM",1,"cd_NIGHTBLOOM",{cooldown:120,manaCost:300,potency:400,applicationDelay:.62,onConfirm:(e,t)=>{const a=[];e.hasResourceAvailable("WAXING_NOCTURNE")&&a.push(X.MoonFlute),e.addDoTPotencies({node:t,effectName:"NIGHTBLOOM",skillName:"NIGHTBLOOM",tickPotency:75,speedStat:"sps",modifiers:a})},onApplication:(e,t)=>{e.applyDoT("NIGHTBLOOM",t)}});ga("PHANTOM_FLURRY",1,"cd_PHANTOM_FLURRY",{replaceIf:[A2],cooldown:120,manaCost:300,potency:0,applicationDelay:.5,onConfirm:(e,t)=>{const a=[];e.hasResourceAvailable("WAXING_NOCTURNE")&&a.push(X.MoonFlute),e.addDoTPotencies({node:t,effectName:"PHANTOM_FLURRY",skillName:"PHANTOM_FLURRY",tickPotency:200,tickFrequency:1,speedStat:"unscaled",modifiers:a})},onApplication:(e,t)=>{e.applyDoT("PHANTOM_FLURRY",t)}});ga("SURPANAKHA",1,"cd_SURPANAKHA_LOCKOUT",{cooldown:1,manaCost:200,potency:e=>200*(1+.5*e.resources.get("SURPANAKHAS_FURY").availableAmount()),applicationDelay:.62,onApplication:e=>{e.resources.get("SURPANAKHAS_FURY").availableAmount()===3?e.tryConsumeResource("SURPANAKHAS_FURY",!0):e.refreshBuff("SURPANAKHAS_FURY",0)},secondaryCooldown:{cdName:"cd_SURPANAKHA",cooldown:30,maxCharges:4}});function br(e){switch(e.job){case"PLD":return new SB(e);case"WAR":return new AB(e);case"DRK":return new OB(e);case"GNB":return new fG(e);case"WHM":return new PB(e);case"SCH":return new xB(e);case"AST":return new vB(e);case"SGE":return new dB(e);case"MNK":return new a2(e);case"DRG":return new tG(e);case"NIN":return new FB(e);case"SAM":return new ZG(e);case"RPR":return new WG(e);case"VPR":return new s2(e);case"BRD":return new Yw(e);case"MCH":return new pG(e);case"DNC":return new qw(e);case"BLM":return new Bw(e);case"SMN":return new eB(e);case"RDM":return new KG(e);case"PCT":return new yG(e);case"BLU":return new E2(e)}return new Xt(e)}let sD=e=>{};function I2(e){return`
		.castTimeTable {
			border-collapse: collapse;
			width: 100%;
		}
		.castTimeTable th, .castTimeTable td {
			text-align: center;
			padding: 0.15em;
			border: 1px solid ${e};
			width: 33%
		}
	`}function _2(e){const t=Ft(e.job,e.override.type);let a;const o=Ke(e.override.type);if(t.isCoolDown)a=g({en:o+" full in "+e.override.timeTillFullOrDrop+"s",zh:`${o}${e.override.timeTillFullOrDrop}`});else{a=o;const c=g({en:" (",zh:""}),d=g({en:") ",zh:""});(we[e.override.type].mayBeToggled??!1)&&(a+=c+(e.override.effectOrTimerEnabled?g({en:"enabled",zh:""}):g({en:"disabled",zh:""}))+d),t.maxValue>1&&(a+=g({en:` (amount: ${e.override.stacks})`,zh:`${e.override.stacks}`})),t.maxTimeout>=0&&(e.override.type==="POLYGLOT"?e.override.timeTillFullOrDrop>0&&(a+=g({en:` next stack ready in ${e.override.timeTillFullOrDrop}s`,zh:`${e.override.timeTillFullOrDrop}`})):e.override.effectOrTimerEnabled&&(a+=g({en:` drops in ${e.override.timeTillFullOrDrop}s`,zh:`${e.override.timeTillFullOrDrop}`})))}a+=" ";let s;if(e.deleteFn){const c=e.deleteFn;s=l.jsx(fs,{content:"[x]",onClickFn:d=>{c(e.override.type)}})}return l.jsxs("div",{style:{marginTop:10,color:"mediumpurple"},children:[a,s]})}function g2(e){const t=_=>{const O=e.initialResourceOverrides.findIndex(D=>D.type===_);O!==-1&&(e.initialResourceOverrides.splice(O,1),e.setInitialResourceOverrides(e.initialResourceOverrides))},a=e.initialResourceOverrides.map((_,O)=>l.jsx(_2,{job:e.job,override:_,deleteFn:t},O)),o=new Set(e.initialResourceOverrides.map(_=>_.type)),s=Wi(e.job),d=s.entries().flatMap(([_,O])=>o.has(_)?[]:[{rsc:_,isCoolDown:O.isCoolDown?1:0}]).toArray().sort((_,O)=>_.isCoolDown-O.isCoolDown).map((_,O)=>l.jsx("option",{value:_.rsc,children:Ke(_.rsc)},O)),h=e.selectedOverrideResource,f=s.get(h);let m,R=!0;if(f!==void 0){let _,O,D="-1",H,x="0",L;f.isCoolDown?(_=!0,O=!1,R=!1,D=e.overrideTimer,H=e.setOverrideTimer):(f.maxTimeout>=0?(_=!0,D=e.overrideTimer,H=e.setOverrideTimer):_=!1,f.maxValue>1||f.maxValue===f.defaultValue?(O=!0,x=e.overrideStacks,L=e.setOverrideStacks):O=!1,R=we[h].mayBeToggled??!1);const w=f.isCoolDown?g({en:"Time till full: ",zh:"CD"}):g(h==="POLYGLOT"?{en:"Time till next stack: ",zh:""}:{en:"Time till drop: ",zh:" "}),G=g({en:"enabled",zh:""});m=l.jsxs("div",{style:{margin:"6px 0"},children:[l.jsx("div",{hidden:!_,children:l.jsx(Bt,{description:w,defaultValue:D,onChange:H})}),l.jsx("div",{hidden:!O,children:l.jsx(Bt,{description:g({en:"Amount: ",zh:""}),defaultValue:x,onChange:L})}),l.jsxs("div",{hidden:!R,children:[l.jsx("input",{style:{position:"relative",top:3,marginRight:5},type:"checkbox",checked:e.overrideEnabled,onChange:B=>e.setOverrideEnabled(B.target.checked)}),l.jsx("span",{children:G})]})]})}const T=b.useContext(Rn),S=Al(T,"bgMediumContrast"),I=_=>{_.preventDefault();const O=e.selectedOverrideResource,D=Wi(e.job).get(O);let H=parseFloat(e.overrideTimer);const x=parseInt(e.overrideStacks),L=e.overrideEnabled;if(O==="POLYGLOT"&&e.overrideTimer===""&&(H=0),isNaN(x)||isNaN(H)){window.alert("some inputs are not numbers!");return}let w;if(D.isCoolDown){const G=D.maxStacks*D.cdPerStack;if(H<0||H>G){window.alert("invalid input timeout (must be in range [0, "+G+"])");return}w={type:O,timeTillFullOrDrop:H,stacks:D.maxStacks>1?x:1,effectOrTimerEnabled:!0}}else{if((D.maxValue>1||D.maxValue===D.defaultValue)&&(x<0||x>D.maxValue)){window.alert("invalid input amount (must be in range [0, "+D.maxValue+"])");return}if(D.maxTimeout>=0&&(H<0||H>D.maxTimeout)){window.alert("invalid input timeout (must be in range [0, "+D.maxTimeout+"])");return}w={type:O,timeTillFullOrDrop:D.maxTimeout>=0?H:-1,stacks:D.maxValue>1||D.maxValue===D.defaultValue?x:1,effectOrTimerEnabled:R||L}}e.setInitialResourceOverrides([...e.initialResourceOverrides,w])},C=l.jsx("div",{children:l.jsxs("form",{onSubmit:_=>I(_),style:{marginTop:16,outline:"1px solid "+S,outlineOffset:6},children:[l.jsx("select",{value:e.selectedOverrideResource,onChange:_=>{_.target&&e.setSelectedOverrideResource(_.target.value)},children:d}),m,l.jsx("input",{type:"submit",value:g({en:"add override",zh:""})})]})});return l.jsx("div",{style:{marginTop:10},children:l.jsx(ml,{title:"overrideInitialResources",titleNode:l.jsxs("span",{children:[g({en:"Override initial resources",zh:""})," ",l.jsx(Fe,{topic:"overrideInitialResources",content:g({en:l.jsxs("div",{children:[l.jsx("div",{className:"paragraph",style:{color:"orangered"},children:l.jsx("b",{children:"Can create invalid game states. Go over Instructions/Troubleshoot first and use carefully at your own risk!"})}),l.jsx("div",{className:"paragraph",children:"Also, currently thunder dot buff created this way doesn't actually tick. It just shows the remaining buff timer."}),l.jsx("div",{className:"paragraph",children:"I would recommend saving settings (stats, lines presets, timeline markers etc.) to files first, in case invalid game states really mess up the tool and a complete reset is required."})]}),zh:l.jsxs("div",{children:[l.jsx("div",{className:"paragraph",style:{color:"orangered"},children:l.jsx("b",{children:"/"})}),l.jsx("div",{className:"paragraph",children:"dot"}),l.jsx("div",{className:"paragraph",children:""})]})})})]}),content:l.jsxs("div",{children:[l.jsx("button",{onClick:_=>{e.initialResourceOverrides.length>0&&e.setInitialResourceOverrides([]),_.preventDefault()},children:g({en:"clear all overrides",zh:""})}),a,C]})})})}function p2(e){const t=p.game.lucidTickOffset.toFixed(3),a=g({en:"the random time offset of lucid dreaming ticks relative to mp ticks",zh:"buff"}),o=p.game.dotTickOffset.toFixed(3),s=g({en:"the random time offset of DoT ticks relative to mp ticks",zh:"DoT"}),c=p.gameConfig.procMode,d=p.gameConfig.initialResourceOverrides.length,h=p.gameConfig.legacy_casterTax,f=g({en:`WARNING: this record was created in an earlier version of XIV in the Shell and uses the deprecated caster tax of ${h}s instead of calculating from your FPS input below. Hover for details: `,zh:`${h}`}),m=bt().warning,R=(I,C)=>{const _=aC[I];if(_.warningContent)return l.jsx("p",{style:{color:C},children:g(_.warningContent)})},T=g({en:l.jsxs("div",{children:[l.jsx("div",{className:"paragraph",children:"The caster tax config is now replaced by 0.1s + FPS tax and is more precise. You can read more about FPS tax in the Github repository wiki's implementation notes section."}),l.jsx("div",{className:"paragraph",style:{color:m},children:"You are strongly encouraged to create a new record (in another timeline slot or from 'apply and reset') and migrate your fight plan. Support for loading legacy files might drop in the future."})]}),zh:l.jsxs("div",{children:[l.jsx("div",{className:"paragraph",children:"0.1s /"}),l.jsx("div",{className:"paragraph",style:{color:m},children:""})]})}),S=l.jsxs("p",{style:{color:m},children:[f,l.jsx(Fe,{topic:"legacy-caster-tax",content:T})]});return l.jsxs("div",{style:{textDecoration:e.dirty?"line-through":"none",marginLeft:5,paddingLeft:10,borderLeft:"1px solid "+bt().bgHighContrast},children:[p.gameConfig.shellVersion<No.FpsTax?S:void 0,R(dt[e.job].implementationLevel,m),["CASTER","HEALER"].includes(dt[e.job].role)&&l.jsxs("div",{children:[g({en:"Lucid tick offset ",zh:"& "}),l.jsx(Fe,{topic:"lucidTickOffset",content:a}),": ",t]}),p.game.dotResources.length>0&&l.jsxs("div",{children:[g({en:"DoT tick offset ",zh:"& "}),l.jsx(Fe,{topic:"dotTickOffset",content:s}),": ",o]}),e.job==="MNK"&&l.jsxs("div",{children:[g({en:"SSS GCD",zh:"GCD"}),":"," ",p.gameConfig.adjustedSksGCD(5,p.game.inherentSpeedModifier()).toFixed(2)]}),l.jsxs("p",{children:[g({en:"Procs",zh:""}),": ",c]}),d>0&&l.jsx("p",{children:g({en:`${d} initial resource override(s)`,zh:`${d}`})})]})}function N2(){const t=(()=>{const T=Rt("playbackSettings");if(T)return JSON.parse(T)})(),[a,o]=b.useState(t?.tickMode??1),[s,c]=b.useState(t?.timeScale??oi.Manual),d=(T,S)=>{const I=JSON.stringify({tickMode:S,timeScale:T});Tt("playbackSettings",I)},h=T=>{if(!T||!T.target||isNaN(parseInt(T.target.value)))return;c(parseInt(T.target.value));const S=parseInt(T.target.value);isNaN(S)||(p.setTimeControlSettings({tickMode:S,timeScale:a}),d(a,S))},f=T=>{const S=parseFloat(T);o(S),isNaN(S)||(p.setTimeControlSettings({tickMode:s,timeScale:S}),d(S,a))};b.useEffect(()=>{p.setTimeControlSettings({tickMode:s,timeScale:a})});const m={position:"relative",top:3,marginRight:"0.75em"},R={display:"inline-block",marginRight:"0.5em"};return l.jsxs("div",{children:[l.jsxs("p",{children:[l.jsxs("label",{style:R,children:[l.jsx("input",{style:m,type:"radio",onChange:h,value:oi.RealTimeAutoPause,checked:s===oi.RealTimeAutoPause,name:"tick mode"}),g({en:"real-time auto pause",zh:"("})]}),l.jsx(Fe,{topic:"ctrl-realTimeAutoPause",content:l.jsxs("div",{className:"toolTip",children:[g({en:l.jsx("div",{className:"paragraph",children:"*Recommended*"}),zh:l.jsx("div",{className:"paragraph",children:"**"})}),g({en:l.jsxs("div",{className:"paragraph",children:["- click to use a skill. if the skill is on cooldown, or you're in an animation lock, then the simulation will automatically skip ahead to when the skill can be used again",l.jsx("br",{}),"- animation locks and cast bars will play out in sped-up real time until done"]}),zh:l.jsx("div",{className:"paragraph",children:"- ; CDCD"})})]})}),l.jsx("br",{}),l.jsxs("label",{style:R,children:[l.jsx("input",{style:m,type:"radio",onChange:h,value:oi.Manual,checked:s===oi.Manual,name:"tick mode"}),g({en:"manual",zh:""})]}),l.jsx(Fe,{topic:"ctrl-manual",content:l.jsx("div",{className:"toolTip",children:g({en:l.jsxs("div",{className:"paragraph",children:["- click to use a skill. if the skill is on cooldown, or you're in an animation lock, then the simulation will automatically skip ahead to when the skill can be used again",l.jsx("br",{}),"- animation locks and cast times are skipped immediately"]}),zh:l.jsx("div",{className:"paragraph",children:"- ; CDCD"})})})})]}),l.jsx(Bt,{defaultValue:`${a}`,description:l.jsxs("span",{children:[g({en:"time scale ",zh:" "}),l.jsx(Fe,{topic:"timeScale",content:l.jsx("div",{children:g({en:"rate at which game time advances automatically (aka when in real-time)",zh:""})})}),":"," "]}),onChange:f})]})}function C2(e){const t=b.useContext(Rn),a=e.imported?Al(t,"success"):Al(t,"text");return l.jsx(Bt,{style:{color:a},defaultValue:e.initial,description:e.description,onChange:o=>{e.dispatch({[e.name]:o}),e.removeImportedField(e.name)}})}function b2(e){const t=ia(b.useContext(Rn)),[a,o]=b.useState(""),{imported:s,setImported:c}=e,d=async m=>{m.preventDefault();const R=URL.parse(a),T=new Headers;try{if(R&&R.hostname==="etro.gg"){const S=R.pathname.split("/");if(S[1]!=="gearset"&&S.length!==3)throw new Error("Invalid etro gearset link (hover ? in URL input box for details)");T.append("Content-Type","application/json");const I=await fetch("https://etro.gg/api/gearsets/"+S[2],{method:"GET",headers:T});if(I.ok){const C=await I.json(),_=new Map(C.totalParams.map(w=>[w.name,w.value])),O=C.totalParams.length>0?C.totalParams[0].value:0;if(!(C.jobAbbrev in dt))throw new Error("Imported gearset was for a job ("+C.jobAbbrev+") that XIV in the Shell doesn't support");const D=ut.getSubstatBase(parseFloat(C.level)).toString(),H=_.get("SPS")??D,x=_.get("SKS")??D,L=["job","level","criticalHit","directHit","determination","main"];_.has("SPS")&&L.push("spellSpeed"),_.has("SKS")&&L.push("skillSpeed"),_.has("PIE")&&L.push("piety"),_.has("TEN")&&L.push("tenacity"),_.has("Weapon Damage")&&L.push("wd"),e.dispatch({job:C.jobAbbrev,level:C.level,spellSpeed:H,skillSpeed:x,wd:_.get("Weapon Damage"),criticalHit:_.get("CRT"),directHit:_.get("DH"),determination:_.get("DET"),piety:_.get("PIE"),tenacity:_.get("TEN"),main:O}),e.setImportedFields(L),c(!0)}else throw console.error(I),new Error("etro load failed (please check your link)")}else if(R&&R.hostname==="xivgear.app"){const S=R.searchParams.get("page");if(!S)throw new Error("xivgear link must be to a specific set (hover ? in URL input box for details)");const I=S.startsWith("sl|")?S.substr(3):S;T.append("Content-Type","application/json");const C=await fetch("https://api.xivgear.app/fulldata/"+I,{method:"GET",headers:T});if(C.ok){const _=await C.json();if(!(_.job in dt))throw new Error("Imported gearset was for a job ("+_.job+") that XIV in the Shell doesn't support");const O=_.sets[0].computedStats,D=Math.max(...["strength","dexterity","intelligence","mind"].map(L=>O[L]??0)).toString(),H=Math.max(O.wdPhys??0,O.wdMag??0).toString(),x={job:_.job,level:_.level,spellSpeed:O.spellspeed,skillSpeed:O.skillspeed,criticalHit:O.crit,directHit:O.dhit,determination:O.determination,piety:O.piety,tenacity:O.tenacity,wd:H,main:D};e.dispatch(x),e.setImportedFields(Object.keys(x)),c(!0)}else throw console.error("xivgear load failed: "+C),new Error("xivgear load failed (please check your link)")}else throw new Error("Invalid gearset link (must be from etro.gg or xivgear.app)")}catch(S){console.error(S),window.alert(S.message)}},h=l.jsx("a",{href:"https://etro.gg",target:"_blank",rel:"noreferrer",children:"etro"}),f=l.jsx("a",{href:"https://xivgear.app",target:"_blank",rel:"noreferrer",children:"xivgear"});return l.jsxs("form",{onSubmit:d,children:[g({en:l.jsxs("span",{children:["Load stats from ",h,"/",f,":"," "]}),zh:l.jsxs("span",{children:["",h,"",f,""]})}),l.jsx(Fe,{topic:"gearImport",content:l.jsxs(l.Fragment,{children:[l.jsx("p",{children:g({en:l.jsxs("span",{children:["Enter and ",l.jsx(Ma,{text:"Load"})," a link to a gearset from xivgear.app or etro.gg, edit the rest of config, then"," ",l.jsx(Ma,{text:"apply and reset"}),"."]}),zh:l.jsxs("span",{children:["xivgear.appetro.gg",l.jsx(Ma,{text:""}),"",l.jsx(Ma,{text:""}),""]})})}),l.jsx("p",{children:g({en:"etro: Copy/paste the link to the set (example: https://etro.gg/gearset/e13d5960-4794-4dc4-b273-24ecfed6745e)",zh:"etrohttps://etro.gg/gearset/e13d5960-4794-4dc4-b273-24ecfed6745e"})}),l.jsx("p",{children:g({en:'xivgear: At the top of the page, click "Export" -> "Selected Set" -> "Link to This Set" -> "Generate" (example: https://xivgear.app/?page=sl%7C143f3245-c35b-4391-8b2b-db5cc1a8de9a)',zh:'xivgear "Export" -> "Selected Set" -> "Link to This Set" -> "Generate"https://xivgear.app/?page=sl%7C143f3245-c35b-4391-8b2b-db5cc1a8de9a'})})]})}),l.jsxs("div",{style:{position:"relative",marginTop:5},children:[l.jsx(Bt,{style:{display:"inline-block"},width:25,description:"",onChange:m=>o(m)}),l.jsx("span",{children:" "}),l.jsx("input",{style:{display:"inline-block"},type:"submit",value:g({en:"Load",zh:""})}),l.jsx(VM,{style:{display:s?"inline":"none",color:t.success,position:"relative",top:4,marginLeft:8}})]})]})}function _N(e,t,a,o){const s=parseInt(a),c=parseInt(e),d=parseFloat(t);let h,f;if(isNaN(s)||isNaN(c)||isNaN(d)||c<ut.getSubstatBase(s))h="n/a",f="n/a";else{const m=ut.preTaxGcd(s,c,2.5,o);h=m.toFixed(2),f=ut.afterFpsTax(d,m).toFixed(3)}return{gcdStr:h,taxedGcdStr:f}}function O2(e){const t=new Map(e.map(d=>[d.type,d]));if(t.has("ASTRAL_FIRE")&&t.has("UMBRAL_ICE")){const d=t.get("ASTRAL_FIRE").stacks,h=t.get("UMBRAL_ICE").stacks;if(d>0&&h>0)return window.alert("shouldn't have both AF and UI stacks"),!1}let a=0,o=0,s=0;if(t.has("ASTRAL_FIRE")&&(a=t.get("ASTRAL_FIRE").stacks),t.has("UMBRAL_ICE")&&(o=t.get("UMBRAL_ICE").stacks),t.has("UMBRAL_HEART")&&(s=t.get("UMBRAL_HEART").stacks),s>0&&a===0&&o===0)return window.alert("since there's at least one UH stack, there should also be Enochian and AF or UI"),!1;let c=!1;return(a>0||o>0||s>0)&&(c=!0),t.has("POLYGLOT")&&t.get("POLYGLOT").timeTillFullOrDrop>0&&!c?(window.alert("since a timer for polyglot is set (time till next stack > 0), there must also be AF/UI"),!1):!0}function D2(){const e=ia(b.useContext(Rn)),[t,a]=b.useState(void 0),[o,s]=b.useState(No.AllaganGcdFormula),[c,d]=b.useState([]),[h,f]=b.useState("0"),[m,R]=b.useState("0"),[T,S]=b.useState(!0),I=me=>{G(!0),d(me),O(me)},[C,_]=b.useState("NEVER"),O=me=>{const De=new Set(me.map(ge=>ge.type)),_e=Wi(L.job).keys().find(ge=>!De.has(ge))??"NEVER";_(_e)},[D,H]=b.useState(!1);function x(me,De){const _e={...me,...De};if(!Object.is(_e,me)){if(_e.dirty=De.dirty??!0,De.job!==void 0&&De.job!==me.job){const ge=new li(mR(De.job,parseInt(De.level??me.level))),ve=br(ge).inherentSpeedModifier();if(a(ve),De.job===p.record.config?.job)Object.assign(_e,p.gameConfig.serialized()),d(p.gameConfig.initialResourceOverrides);else{d([]);const Ye=Wi(De.job).keys().toArray()?.[0]??"NEVER";_(Ye),Object.assign(_e,Ew(De.job))}}if(De.level!==void 0&&De.level!==me.level){const ge=new li(mR(me.job,parseInt(De.level))),ve=br(ge).inherentSpeedModifier();a(ve)}H(parseInt(_e.level)!==p.gameConfig.level||_e.job!==p.gameConfig.job)}return _e}const[L,w]=b.useReducer(x,{job:"BLM",level:`${Je.lvl100}`,spellSpeed:"0",skillSpeed:"0",criticalHit:"0",directHit:"0",determination:"0",piety:"0",animationLock:"0",fps:"0",gcdSkillCorrection:"0",timeTillFirstManaTick:"0",countdown:"0",randomSeed:"",procMode:ua.RNG,tenacity:"0",wd:"0",main:"0",dirty:!1}),G=me=>w({dirty:me}),B=me=>De=>w({[me]:De}),[z,Q]=b.useState(!1),ce=Object.fromEntries(Object.keys(L).map(me=>[me,!1])),[ue,te]=b.useState(ce),ee=me=>{te({...ue,...Object.fromEntries(me.map(De=>[De,!0]))})},Ee=me=>{te({...ue,[me]:!1})},he=()=>{te(ce),Q(!1)};b.useEffect(()=>{sD=me=>{s(me.shellVersion),I(me.initialResourceOverrides),w({...Object.fromEntries(Object.entries(me).flatMap(([De,_e])=>De!=="initialResourceOverrides"?[[De,_e.toString()]]:[]))}),G(!1),he(),O(me.initialResourceOverrides)}});const M=me=>ue[me]?e.success:e.text,K=l.jsxs("div",{style:{marginBottom:10},children:[l.jsx("span",{children:g({en:"job: ",zh:""})}),l.jsx("select",{style:{outline:"none",color:M("job")},value:L.job,onChange:me=>{Ee("job"),w({job:me.target.value})},children:cs.filter(me=>dt[me].implementationLevel!=="UNIMPLEMENTED").map(me=>{const De=g({en:me,zh:dt[me].zh}),_e=dt[me].implementationLevel;return _e!=="LIVE"?l.jsx("option",{value:me,children:De+` (${g(aC[_e].label??{en:""})})`},me):l.jsx("option",{value:me,children:De},me)})})]}),{gcdStr:$,taxedGcdStr:de}=_N(L.spellSpeed,L.fps,L.level,t),{gcdStr:y,taxedGcdStr:Y}=_N(L.skillSpeed,L.fps,L.level,t),W=o>=No.FpsTax?e.text:e.warning,j=L.job,Z=dt[j].role==="CASTER"||dt[j].role==="HEALER",ae={en:Z?"spell":"skill",zh:Z?"":""},P=me=>ut.preTaxGcd(parseFloat(L.level),parseFloat(Z?L.spellSpeed:L.skillSpeed),me,t),q=me=>ut.afterFpsTax(parseFloat(L.fps),P(me)),se=l.jsxs("div",{children:[l.jsx("style",{children:I2(e.bgHighContrast)}),l.jsx("div",{style:{marginBottom:10},children:g({en:`Preview numbers based on your current ${ae.en} speed and FPS input:`,zh:`${ae.zh}`})}),l.jsx("table",{className:"castTimeTable",children:l.jsxs("tbody",{children:[l.jsxs("tr",{children:[l.jsx("th",{children:g({en:"GCD time",zh:"GCD"})}),l.jsx("th",{children:g({en:"After FPS tax",zh:""})})]}),[2.5,3,3.5,4].map((me,De)=>l.jsxs("tr",{children:[l.jsxs("td",{children:[P(me).toFixed(2)," (",me.toFixed(2)," ",g({en:"base",zh:""}),")"]}),l.jsx("td",{children:q(me).toFixed(3)})]},"gcdPreview"+De.toString()))]})})]}),fe=(me,De)=>{if(me.preventDefault(),!De&&D){console.error("attempted to apply w/o reset, but job or level changed");return}if(O2(c)){let _e=L.randomSeed;if(_e.length===0){for(let Sn=0;Sn<4;Sn++)_e+=Math.floor(Math.random()*10).toString();w({randomSeed:_e})}const ge=["spellSpeed","skillSpeed","criticalHit","directHit","determination","animationLock","fps","gcdSkillCorrection","timeTillFirstManaTick","countdown","level","wd","main","piety","tenacity"];if(ge.map(Sn=>isNaN(parseFloat(L[Sn].toString()))).some(Sn=>Sn)){window.alert("Some config fields are not numbers!");return}if(!(L.job in dt)){window.alert("Invalid job: "+L.job);return}const ve=p.gameConfig.serialized(),Ye=p.record.serialized();p.setConfigAndRestart({job:L.job,randomSeed:_e.trim(),procMode:L.procMode,initialResourceOverrides:c,...Object.fromEntries(ge.map(Sn=>[Sn,parseFloat(L[Sn].toString())]))},De),p.undoStack.push(new cw(ve,p.gameConfig.serialized(),De?Ye:void 0)),G(!1),H(!1),he(),p.updateAllDisplay(),p.scrollToTime()}},Oe=["criticalHit","directHit","determination","piety","animationLock"].map(me=>l.jsx(C2,{name:me,description:nu(me),initial:L[me].toString(),dispatch:w,imported:ue[me],removeImportedField:De=>Ee(De)},me)),Ue=l.jsxs("div",{style:{marginBottom:16},children:[l.jsxs("div",{children:[l.jsx("span",{children:g({en:"level: ",zh:""})}),l.jsxs("select",{style:{outline:"none",color:M("level")},value:L.level,onChange:me=>w({level:me.target.value}),children:[(L.level==="100"||j!=="BLU")&&l.jsx("option",{value:Je.lvl100,children:"100"},Je.lvl100),(L.level==="90"||j!=="BLU")&&l.jsx("option",{value:Je.lvl90,children:"90"},Je.lvl90),l.jsx("option",{value:Je.lvl80,children:"80"},Je.lvl80),l.jsx("option",{value:Je.lvl70,children:"70"},Je.lvl70)]})]}),l.jsxs("div",{children:[l.jsx(Bt,{style:{display:"inline-block",color:M("spellSpeed")},defaultValue:L.spellSpeed,description:nu("spellSpeed"),onChange:B("spellSpeed")}),l.jsxs("span",{children:[" ","(GCD: ",$," ",l.jsx(Fe,{topic:"gcdPreview",content:l.jsxs(l.Fragment,{children:[l.jsx("p",{children:g({en:"Preview of displayed GCD based on your spell speed.",zh:"GCD."})}),l.jsx("p",{children:g({en:`Measured average GCD should be ${de} due to FPS tax.`,zh:`GCD${de}`})})]})}),")"]})]}),l.jsxs("div",{children:[l.jsx(Bt,{style:{display:"inline-block",color:M("skillSpeed")},defaultValue:L.skillSpeed,description:nu("skillSpeed"),onChange:B("skillSpeed")}),l.jsxs("span",{children:[" ","(GCD: ",y," ",l.jsx(Fe,{topic:"sksGcdPreview",content:l.jsxs(l.Fragment,{children:[l.jsx("p",{children:g({en:"Preview of displayed GCD based on your skill speed.",zh:"GCD."})}),l.jsx("p",{children:g({en:`Measured average GCD should be ${Y} due to FPS tax.`,zh:`GCD${Y}`})})]})}),")"]})]}),Oe,l.jsxs("div",{children:[l.jsx(Bt,{componentColor:W,style:{display:"inline-block"},defaultValue:L.fps,description:nu("fps"),onChange:B("fps")}),l.jsxs("span",{children:[" ","(",g({en:`${P(2.5).toFixed(2)}s w/ tax`,zh:`${P(2.5).toFixed(2)}s+`}),": ",q(2.5).toFixed(3)," ",l.jsx(Fe,{topic:"gcdTaxPreview",content:se}),")"]})]}),l.jsx(Bt,{componentColor:W,defaultValue:L.gcdSkillCorrection,description:l.jsxs("span",{children:[g({en:"GCD correction",zh:"GCD"})," ",l.jsx(Fe,{topic:"cast-time-correction",content:g({en:"Leaving this at 0 will probably give you the most accurate simulation. But if you want to manually correct your GCD skill durations (including casts) for whatever reason, you can put a small number (can be negative)",zh:"0GCD"})}),":"," "]}),onChange:B("gcdSkillCorrection")}),l.jsx(Bt,{defaultValue:L.timeTillFirstManaTick,description:g({en:"time till first MP tick: ",zh:""}),onChange:B("timeTillFirstManaTick")}),l.jsx(Bt,{defaultValue:L.countdown,description:l.jsxs("span",{children:[g({en:"countdown ",zh:" "}),l.jsx(Fe,{topic:"countdown",content:g({en:"can use a negative countdown to start from a specific time of fight",zh:""})}),":"," "]}),onChange:B("countdown")}),l.jsx(Bt,{defaultValue:L.randomSeed,description:l.jsxs("span",{children:[g({en:"random seed ",zh:" "}),l.jsx(Fe,{topic:"randomSeed",content:g({en:"can be anything, or leave empty to get 4 random digits.",zh:"4"})}),":"," "]}),onChange:B("randomSeed")}),l.jsxs("div",{children:[l.jsxs("span",{children:[g({en:"proc mode ",zh:"BUFF "}),l.jsx(Fe,{topic:"procMode",content:g({en:"Default RNG: 40% Firestarter",zh:"RNG40%AlwaysNever"})}),":"," "]}),l.jsxs("select",{style:{outline:"none"},value:L.procMode,onChange:me=>w({procMode:me.target.value}),children:[l.jsx("option",{value:ua.RNG,children:"RNG"},ua.RNG),l.jsx("option",{value:ua.Never,children:"Never"},ua.Never),l.jsx("option",{value:ua.Always,children:"Always"},ua.Always)]})]}),l.jsx(g2,{job:L.job,initialResourceOverrides:c,overrideTimer:h,overrideStacks:m,overrideEnabled:T,setInitialResourceOverrides:I,selectedOverrideResource:C,setSelectedOverrideResource:_,setOverrideTimer:f,setOverrideStacks:R,setOverrideEnabled:S})]});return l.jsxs("div",{style:{marginBottom:20},children:[l.jsx(b2,{imported:z,setImported:Q,setImportedFields:ee,dispatch:w}),l.jsx("br",{}),K,l.jsx(p2,{job:p.getActiveJob(),dirty:L.dirty}),Ue,l.jsx("p",{style:{paddingBottom:5},children:g({en:"You can also import/export fights from/to local files at the bottom of the page.",zh:""})}),l.jsx("div",{className:"invisibleScrollbar",style:{boxSizing:"border-box",width:"100%",position:"absolute",paddingRight:5,paddingLeft:5,bottom:0,left:0,overflowY:"scroll"},children:l.jsxs("div",{style:{width:"100%",boxSizing:"border-box",backgroundColor:e.background,borderTop:"1px solid "+e.bgMediumContrast,paddingTop:5,paddingBottom:5,display:"flex",flexDirection:"row",justifyContent:"space-between",gap:5},children:[l.jsxs("button",{onClick:me=>fe(me,!1),style:{width:"100%",fontWeight:!D&&L.dirty?"bold":"normal",textDecoration:D?"line-through":void 0},disabled:D,children:[g({en:"apply",zh:""}),D&&" ",D&&l.jsx(Fe,{topic:"applyWithoutReset",content:g({en:"Must reset timeline because job or level changed.",zh:""})}),!D&&L.dirty?"*":""]}),l.jsxs("button",{onClick:me=>fe(me,!0),style:{width:"100%",fontWeight:L.dirty?"bold":"normal"},children:[g({en:"apply and reset",zh:""}),L.dirty?"*":""]})]})})]})}function rD(e){let t=cs[0],a=0;return cs.forEach(o=>{const s=e.reduce((c,d)=>lH(o,d)?c+1:c,0);s>a&&(t=o,a=s)}),t}class y2{presetLines=[];constructor(){this.#t()}#e(){Tt("presetLines",JSON.stringify(this.serialized()))}#t(){const t=Rt("presetLines");if(t!==null){const a=JSON.parse(t);return this.deserializeAndAppend(a),!0}return!1}serialized(){return{fileType:ri.SkillSequencePresets,presets:this.presetLines.map(({actions:t,job:a})=>t.serialized())}}deserializeAndAppend(t){for(const a of t.presets){const o=Ur.deserialize(a.actions);o.name=a.name;const s=o.actions.flatMap(c=>c.info.type===ze.Skill?[c.info.skillName]:[]);this.addLine(o,a.job??rD(s))}}getLinesForJob(t){return this.presetLines.flatMap(({actions:a,job:o})=>o===t?[a]:[])}addLine(t,a){this.presetLines.push({actions:t,job:a}),fl(),this.#e()}deleteLine(t){for(let a=0;a<this.presetLines.length;a++)if(this.presetLines[a].actions===t){this.presetLines.splice(a,1),fl(),this.#e();return}console.assert(!1)}deleteAllLines(){this.presetLines=[],fl(),this.#e()}}const v2=new Set(["BLIZZARD","FIRE","BLIZZARD_II","FIRE_II","BLIZZARD_III","FIRE_III","FREEZE","FLARE","BLIZZARD_IV","FIRE_IV","DESPAIR","HIGH_FIRE_II","HIGH_BLIZZARD_II","FLARE_STAR"]),M2=new Set(["FOUL","XENOGLOSSY","PARADOX"]),il=new Set([]),Qn=e=>p.getUntargetableMask()&&p.timeline.duringUntargetable(e),Vr=(e,t)=>p.getUntargetableMask()?p.timeline.getTargetableDurationBetween(e,t):t-e;function $l(e){return e.info.type===ze.Skill&&p.game.dotSkills.includes(e.info.skillName)}function L2(e,t,a){console.assert($l(e),`${e.getNameForMessage()} is not registered as a dot skill`);const o=e.getInitialPotency(),s={castTime:e.tmp_startLockTime?e.tmp_startLockTime-p.gameConfig.countdown:0,applicationTime:e.applicationTime?e.applicationTime-p.gameConfig.countdown:0,displayedModifiers:[],gap:0,override:0,mainPotencyHit:!0,baseMainPotency:0,baseDotPotency:0,initialHitCalculationModifiers:[],tickCalculationModifiers:[],totalNumTicks:0,numHitTicks:0,potencyWithoutPot:0,potPotency:0,partyBuffPotency:0,targetCount:e.targetCount,mainHitFalloff:o?.falloff??0};s.gap=e.getOverTimeGap(t,"damage"),s.override=e.getOverTimeOverrideAmount(t,"damage"),s.baseMainPotency=o?.base??0,s.initialHitCalculationModifiers=o?.modifiers??[],s.mainPotencyHit=e.hitBoss(Qn),s.tickCalculationModifiers=s.initialHitCalculationModifiers.filter(f=>f.source!==U.COMBO&&f.source!==U.POSITIONAL),t==="WILDFIRE"&&s.displayedModifiers.push(U.NO_CDH);for(let f=0;f<s.initialHitCalculationModifiers.length;f++){const m=s.initialHitCalculationModifiers[f].source;[U.ENO,U.FUGETSU,U.NO_MERCY,U.POWER_SURGE,U.LANCE_CHARGE,U.LIFE_OF_THE_DRAGON,U.BATTLE_LITANY,U.FIGHT_OR_FLIGHT,U.MOON_FLUTE,U.WHISTLE,U.BRISTLE,U.TINGLEA,U.TINGLEB,U.DIVINATION,U.CHAIN_STRAT].includes(m)&&s.displayedModifiers.push(m)}e.getDotPotencies(t).forEach((f,m)=>{f.hasResolved()&&(s.totalNumTicks++,s.baseDotPotency=f.base,f.hasHitBoss(Qn)&&s.numHitTicks++)});const c=e.getPotency({tincturePotencyMultiplier:1,includePartyBuffs:!1,untargetable:Qn,includeSplash:!0}).applied,d=e.getPotency({tincturePotencyMultiplier:p.getTincturePotencyMultiplier(),includePartyBuffs:!1,untargetable:Qn,includeSplash:!0}).applied,h=e.getPotency({tincturePotencyMultiplier:p.getTincturePotencyMultiplier(),includePartyBuffs:!0,untargetable:Qn,includeSplash:!0}).applied;return s.potencyWithoutPot=c,s.potPotency=d-c,s.partyBuffPotency=h-d,s}function x2(e){const t={basePotency:0,displayedModifiers:[],calculationModifiers:[],falloff:1,targetCount:1};if(e.info.type===ze.Skill){const a=e.info.skillName,o=e.getInitialPotency();if(o)if(t.targetCount=e.targetCount,t.falloff=o.falloff??1,v2.has(a)){t.basePotency=o.base,t.calculationModifiers=o.modifiers;for(const s of o.modifiers){const c=s.source;if(c!==U.ENO&&c!==U.POT){t.displayedModifiers.push(c);break}}}else if(M2.has(a))for(const s of o.modifiers){const c=s.source;if(c===U.ENO){t.basePotency=o.base,t.displayedModifiers=[c],t.calculationModifiers=o.modifiers;break}}else if($l(e))t.basePotency=o.base,e.info.targetCount=o.targetCount;else{t.basePotency=o.base;for(const s of o.modifiers){const c=s.source;c!==U.POT&&(t.displayedModifiers.push(c),t.calculationModifiers.push(s))}}return t}else return console.assert(!1),t}function H2(e,t){if(e.length!==t.length)return!1;for(let a=0;a<e.length;a++)if(e[a]!==t[a])return!1;return!0}function k2(e,t){const a=x2(t),o={mainTableIndex:-1,expandedNode:a};for(let s=0;s<e.length;s++)if(t.info.type===ze.Skill&&t.info.skillName===e[s].skillName&&H2(a.displayedModifiers,e[s].displayedModifiers)&&t.targetCount===e[s].targetCount)return o.mainTableIndex=s,o;return o}function si(e){return!il.has(e)}function U2(){return il.size===0}function gN(e){e.include&&il.has(e.skillNameOrDoT)?(il.delete(e.skillNameOrDoT),e.skillNameOrDoT==="DoT"?p.game.dotSkills.forEach(t=>il.delete(t)):p.game.dotSkills.includes(e.skillNameOrDoT)&&il.delete("DoT")):(il.add(e.skillNameOrDoT),e.skillNameOrDoT!=="DoT"&&p.game.dotSkills.includes(e.skillNameOrDoT)&&il.add("DoT")),p.displayCurrentState(),p.updateStats()}function P2(e){const t={totalDuration:0,targetableDuration:0,potency:{applied:0,pending:0},gcdSkills:{applied:0,pending:0}},a=p.record.getFirstSelection(),o=p.record.getLastSelection();if(a&&o&&a.tmp_startLockTime!==void 0&&o.tmp_endLockTime!==void 0){t.totalDuration=o.tmp_endLockTime-a.tmp_startLockTime;const s=p.gameConfig.countdown;t.targetableDuration=Vr(a.tmp_startLockTime-s,o.tmp_endLockTime-s)}return p.record.iterateSelected(s=>{if(s.info.type===ze.Skill&&!(s.info.skillName in Co)){const c=si(s.info.skillName);p.game.skillsList.get(s.info.skillName).cdName==="cd_GCD"&&c&&(s.hitBoss(Qn)?t.gcdSkills.applied++:s.resolved()||t.gcdSkills.pending++);const h=s.getPotency({tincturePotencyMultiplier:p.getTincturePotencyMultiplier(),untargetable:Qn,includePartyBuffs:!0,excludeDoT:$l(s)&&!si("DoT"),includeSplash:!0});c&&(t.potency.applied+=h.applied,t.potency.pending+=h.snapshottedButPending)}}),t}function w2(e){let t=su.Normal;p.displayingUpToDateGameState||(t=su.Historical),p.record.getFirstSelection()&&(t=su.Selected);const a={applied:0,pending:0},o={applied:0,pending:0},s=[],c={totalPotencyWithoutPot:0,totalPotPotency:0,totalPartyBuffPotency:0},d=new Map,h=new Map,f=m=>{if(m.info.type===ze.Skill){const R=m.info.skillName,T=si(R),S=R in Co;p.game.skillsList.get(R).cdName==="cd_GCD"&&T&&(m.hitBoss(Qn)?o.applied++:m.resolved()||o.pending++);const C=m.getPotency({tincturePotencyMultiplier:p.getTincturePotencyMultiplier(),untargetable:Qn,includePartyBuffs:!0,includeSplash:!0,excludeDoT:$l(m)&&!si("DoT")});if(T&&!S&&(a.applied+=C.applied,a.pending+=C.snapshottedButPending),m.resolved()){const _=k2(s,m);_.mainTableIndex<0&&(s.push({skillName:R,displayedModifiers:_.expandedNode.displayedModifiers,basePotency:S?0:_.expandedNode.basePotency,calculationModifiers:_.expandedNode.calculationModifiers,usageCount:0,hitCount:0,totalPotencyWithoutPot:0,showPotency:m.anyPotencies(),potPotency:0,potCount:0,partyBuffPotency:0,falloff:_.expandedNode.falloff,targetCount:_.expandedNode.targetCount}),_.mainTableIndex=s.length-1);const O=m.hitBoss(Qn);if(s[_.mainTableIndex].usageCount+=1,O&&(s[_.mainTableIndex].hitCount+=1),S)return;const D=m.getPotency({tincturePotencyMultiplier:1,untargetable:Qn,includePartyBuffs:!1,excludeDoT:$l(m)&&!si("DoT"),includeSplash:!0}).applied,H=m.getPotency({tincturePotencyMultiplier:p.getTincturePotencyMultiplier(),untargetable:Qn,includePartyBuffs:!1,excludeDoT:$l(m)&&!si("DoT"),includeSplash:!0}).applied,x=m.getPotency({tincturePotencyMultiplier:p.getTincturePotencyMultiplier(),untargetable:Qn,includePartyBuffs:!0,excludeDoT:$l(m)&&!si("DoT"),includeSplash:!0}).applied;s[_.mainTableIndex].totalPotencyWithoutPot+=D,s[_.mainTableIndex].potPotency+=H-D,s[_.mainTableIndex].partyBuffPotency+=x-H,O&&m.hasBuff(k.Tincture)&&(s[_.mainTableIndex].potCount+=1);let L=h.get(R)??0;L+=x,h.set(R,L),T&&(c.totalPotencyWithoutPot+=D,c.totalPotPotency+=H-D,c.totalPartyBuffPotency+=x-H),m.getAllDotPotencies().forEach((w,G)=>{let B=d.get(G);const z=p.game.excludedDoTs.includes(G);B||(B={tableRows:[],summary:{cumulativeGap:0,cumulativeOverride:0,timeSinceLastDoTDropped:0,totalTicks:0,maxTicks:p.getMaxTicks(p.game.time,G,z),dotCoverageTimeFraction:p.getDotCoverageTimeFraction(p.game.getDisplayTime(),G),totalPotencyWithoutPot:0,totalPotPotency:0,totalPartyBuffPotency:0},lastDoT:void 0},d.set(G,B));const Q=L2(m,G,B.lastDoT);B.tableRows.push(Q),B.lastDoT=m,B.summary.cumulativeGap+=Q.gap,B.summary.cumulativeOverride+=Q.override,B.summary.totalTicks+=Q.numHitTicks,B.summary.totalPotencyWithoutPot+=Q.potencyWithoutPot,B.summary.totalPotPotency+=Q.potPotency,B.summary.totalPartyBuffPotency+=Q.partyBuffPotency})}}};return t===su.Selected?p.record.iterateSelected(f):p.record.iterateAll(f),d.forEach((m,R)=>{if(m.lastDoT){const T=m.lastDoT.applicationTime;console.assert(T!==void 0,`DoT node for ${R} was not resolved`);const S=T+p.game.getStatusDuration(R),I=Vr(S,p.game.getDisplayTime()),C=p.game.getDisplayTime()-S;C>0&&(m.summary.cumulativeGap+=I,m.summary.timeSinceLastDoTDropped=C)}else{const T=Vr(0,Math.max(0,p.game.getDisplayTime()));m.summary.cumulativeGap=T,m.summary.timeSinceLastDoTDropped=T}}),s.sort((m,R)=>{if(m.showPotency!==R.showPotency){const T=m.showPotency?1:0;return(R.showPotency?1:0)-T}else if(m.skillName!==R.skillName){const T=h.get(m.skillName)??0,S=h.get(R.skillName)??0;return T===S?m.skillName.localeCompare(R.skillName):S-T}else{if(m.targetCount!==R.targetCount)return R.targetCount-m.targetCount;if(m.displayedModifiers.length!==R.displayedModifiers.length)return R.displayedModifiers.length-m.displayedModifiers.length;for(let T=0;T<m.displayedModifiers.length;T++){const S=m.displayedModifiers[T]-R.displayedModifiers[T];if(S!==0)return S}return 0}}),{time:p.game.time,tinctureBuffPercentage:e.tinctureBuffPercentage,totalPotency:a,lastDamageApplicationTime:e.lastDamageApplicationTime,countdown:p.gameConfig.countdown,gcdSkills:o,mainTable:s,mainTableSummary:c,dotTables:d,mode:t}}var su=(e=>(e[e.Normal=0]="Normal",e[e.Historical=1]="Historical",e[e.Selected=2]="Selected",e))(su||{});let NR=e=>{},cD=e=>{};function pN(e){const t=tH(e.buff),a=Zx(e.buff);return l.jsx("span",{style:{borderRadius:2,border:"1px solid "+a,fontSize:11,marginRight:4,padding:"1px 4px",background:a+"1f"},children:l.jsx("b",{style:{color:a},children:t})})}function FA(e){let t=e.basePotency,a=e.basePotency.toFixed(2)+g({en:"(base)",zh:"()"});e.explainUntargetable&&(a+=g({en:"(untargetable)",zh:"()"}));let o="";if(e.calc.forEach(s=>{s.kind==="adder"&&s.additiveAmount>0&&(t+=s.additiveAmount,o+=" + "+s.additiveAmount+"("+ap(s.source)+")")}),o&&(a="[ "+a+o+" ]"),e.calc.forEach(s=>{s.kind==="multiplier"&&s.potencyFactor!==1&&(t*=s.potencyFactor,a+="  "+s.potencyFactor+"("+ap(s.source)+")")}),e.targetCount&&e.falloff!==void 0&&e.targetCount>1){const s=1+(1-e.falloff)*(e.targetCount-1);a=`[ ${a} ]  ${s}(${e.targetCount}${g({en:" targets",zh:""})})`,t*=s}return l.jsxs("span",{style:{textDecoration:e.includeInStats?"none":"line-through"},children:[t.toFixed(2)," ",l.jsx(Fe,{topic:e.helpTopic,content:a})]})}function G2(){const[e,t]=b.useState("8"),a=s=>{t(s);const c=parseFloat(s);isNaN(c)||(p.setTinctureBuffPercentage(c),Tt("tinctureBuffPercentage",s))};b.useEffect(()=>{const s=Rt("tinctureBuffPercentage");s!==null&&a(s)},[]);const o=l.jsxs("span",{children:[g({en:"exclude damage when untargetable",zh:"Boss0"})," ",l.jsx(Fe,{topic:"untargetableMask",content:l.jsxs("div",{children:[l.jsx("div",{className:"paragraph",children:g({en:"Having this checked will exclude damages from untargetable phases.",zh:"Boss"})}),l.jsx("div",{className:"paragraph",children:g({en:'You can mark up such phases using timeline markers of type "Untargetable".',zh:"  "})}),l.jsx("div",{className:"paragraph",children:g({en:"This is just a statistics helper though. For example it doesn't prevent you from using skills when the boss is untargetable.",zh:"  "})})]})})]});return l.jsxs("div",{children:[l.jsx(Bt,{defaultValue:e,description:g({en:" tincture potency buff ",zh:" "}),onChange:a,width:2,style:{display:"inline"}}),l.jsx("span",{children:"%"}),l.jsx(ou,{uniqueName:"untargetableMask",label:o,onChange:s=>{p.setUntargetableMask(s)}})]})}const NN="0.375em 0.75em";class B2 extends ha.Component{selected={totalDuration:0,targetableDuration:0,potency:{applied:0,pending:0},gcdSkills:{applied:0,pending:0}};data={time:0,tinctureBuffPercentage:0,countdown:0,totalPotency:{applied:0,pending:0},lastDamageApplicationTime:0,gcdSkills:{applied:0,pending:0},mainTable:[],mainTableSummary:{totalPotencyWithoutPot:0,totalPotPotency:0,totalPartyBuffPotency:0},dotTables:new Map,mode:0};static contextType=Rn;constructor(t){super(t),NR=a=>{this.data={...this.data,...a},this.forceUpdate()},cD=a=>{this.selected={...this.selected,...a},this.forceUpdate()}}componentWillUnmount(){NR=t=>{}}render(){const t=ia(this.context),a=U2(),o=g({en:": ",zh:""}),s=g({en:" (",zh:""}),c=g({en:") ",zh:""}),d=a?"":g({en:" (checked only)",zh:""}),h=this.data.lastDamageApplicationTime-this.data.countdown,f=Vr(0,h),m=this.data.lastDamageApplicationTime>-this.data.countdown,R=m?h.toFixed(3).toString():"N/A";let T=g({en:"Total potency",zh:""}),S=g({en:"Selected potency",zh:""});if(this.data.tinctureBuffPercentage>0){const M=s+g({en:"pot +",zh:" +"})+this.data.tinctureBuffPercentage+"%"+c;T+=M,S+=M}T+=d,S+=d,T+=o+this.data.totalPotency.applied.toFixed(2),S+=o+this.selected.potency.applied.toFixed(2),this.data.totalPotency.pending>0&&(T+=s+this.data.totalPotency.pending.toFixed(2)+g({en:" pending",zh:""})+c),this.selected.potency.pending>0&&(S+=s+this.selected.potency.pending.toFixed(2)+g({en:" pending",zh:""})+c);let I=g({en:"GCD skills",zh:"GCD"})+d+o+this.data.gcdSkills.applied,C=g({en:"Selected GCD skills",zh:"GCD"})+d+o+this.selected.gcdSkills.applied;this.data.gcdSkills.pending>0&&(I+=s+"+"+this.data.gcdSkills.pending+g({en:" not yet applied",zh:""})+c),this.selected.gcdSkills.pending>0&&(C+=s+"+"+this.selected.gcdSkills.pending+g({en:" not yet applied",zh:""})+c);const _=p.game.overTimeEffectGroups.filter(M=>M.reportName&&!M.isHealing).map(M=>{let K=M.reportName+g({en:" uptime",zh:""})+o,$=0,de=0,y=0;return M.groupedEffects.forEach(Y=>{const W=this.data.dotTables.get(Y.effectName);W&&($+=W.summary.dotCoverageTimeFraction,de+=W.summary.totalTicks,y=Math.max(y,W.summary.maxTicks))}),K+=($*100).toFixed(2)+"%",K+=s+g({en:"ticks",zh:""})+o+de+"/"+y+c,l.jsx("div",{children:K},`dot-uptime-${M.reportName}`)});let O;const D=this.selected.targetableDuration>0;this.selected.totalDuration>0&&(O=l.jsxs("div",{style:{flex:1,color:t.accent},children:[l.jsxs("div",{children:[g({en:"Selected duration",zh:""}),o,this.selected.totalDuration.toFixed(3)]}),l.jsx("div",{children:S}),l.jsxs("div",{children:[g({en:"Selected PPS",zh:"PPS"}),o,D?(this.selected.potency.applied/this.selected.targetableDuration).toFixed(2):"N/A"]}),l.jsx("div",{children:C})]}));const H=l.jsxs("div",{style:{display:"flex",marginBottom:10,flexDirection:"row"},children:[l.jsxs("div",{style:{flex:1},children:[l.jsxs("div",{style:{color:this.data.mode!==0?t.historical:t.text},children:[l.jsxs("div",{children:[g({en:"Last damage application time",zh:""}),o,R]}),l.jsx("div",{children:T}),l.jsxs("div",{children:["PPS"," ",l.jsx(Fe,{topic:"ppsNotes",content:l.jsxs("div",{className:"toolTip",children:[l.jsx("div",{className:"paragraph",children:g({en:"(total applied potency of checked skills) / (total targetable duration from 0s until last damage application time).",zh:" / (0s - )"})}),l.jsx("div",{className:"paragraph",children:g({en:"could be inaccurate if any damage happens before pull, or if some damage's not applied yet",zh:"0sPPS"})})]})}),o,m?(this.data.totalPotency.applied/f).toFixed(2):"N/A"]}),l.jsx("div",{children:I}),_]}),l.jsxs("div",{style:{marginTop:10},children:[l.jsx(G2,{}),l.jsx(El,{fileFormat:Oo.Csv,getContentFn:()=>({body:p.getDamageLogCsv()}),filename:"damage-log",displayName:g({en:"download detailed damage log as CSV file",zh:"CSV"})})]})]}),O]}),x=function(M){return{verticalAlign:"middle",boxSizing:"border-box",display:"inline-block",width:M+"%",padding:NN}},L=function(M){return p.game.dotSkills.includes(M)},w=function(M){return L(M)?!0:["AUTOMATON_QUEEN","WILDFIRE",...Object.keys(Co)].includes(M)},G=function(M){const K=M.row.skillName===M.lastRowSkill,$=[];$.push(M.row.displayedModifiers.map((se,fe)=>l.jsx(pN,{buff:se},fe)));const de=si(M.row.skillName),y=[];!K&&M.row.basePotency>0&&!(M.row.skillName in Co)&&y.push(l.jsx("input",{type:"checkbox",style:{position:"relative",top:2,marginRight:10},checked:de,onChange:()=>{gN({skillNameOrDoT:M.row.skillName,include:!de})}},"main")),!K&&L(M.row.skillName)&&y.push(l.jsx("input",{type:"checkbox",style:{position:"relative",top:2,marginRight:10},checked:si("DoT"),onChange:()=>{gN({skillNameOrDoT:"DoT",include:!si("DoT")})}},"dot"));let Y;K||(Y=l.jsxs("span",{children:[l.jsxs("span",{style:{textDecoration:de?"none":"line-through",color:de?t.text:t.bgHighContrast},children:[fi(M.row.skillName)," ",L(M.row.skillName)?l.jsx(Fe,{topic:"potencyStats-thunder",content:g({en:"See table below for details",zh:""})}):void 0]}),L(M.row.skillName)?l.jsxs("span",{style:{textDecoration:si("DoT")?"none":"line-through",color:si("DoT")?t.text:t.bgHighContrast},children:[l.jsx("br",{}),g({en:"(DoT)",zh:"DoT"})," "]}):void 0]}));let W;M.row.targetCount&&M.row.basePotency>0&&(W=l.jsx("span",{style:{textDecoration:de?"none":"line-through"},children:M.row.targetCount}));let j;M.row.basePotency>0&&!w(M.row.skillName)&&(j=l.jsx(FA,{includeInStats:de,basePotency:M.row.basePotency,helpTopic:"mainTable-potencyCalc-"+M.key,calc:M.row.calculationModifiers,falloff:M.row.falloff,targetCount:M.row.targetCount}));const Z=M.row.usageCount-M.row.hitCount,ae=l.jsxs("span",{style:{textDecoration:de?"none":"line-through"},children:[M.row.hitCount,Z>0?l.jsxs("span",{style:{color:t.timeline.untargetableDamageMark+"af"},children:[" ","+",Z," ",l.jsx(Fe,{topic:"mainTable-numUntargetableUsages-"+M.key,content:g({en:"usage(s) when untargetable",zh:"Boss"})})]}):void 0]});let P;M.row.showPotency&&!(M.row.skillName in Co)&&(P=l.jsxs("span",{style:{textDecoration:de?"none":"line-through"},children:[M.row.totalPotencyWithoutPot.toFixed(2),M.row.potPotency>0?l.jsxs("span",{style:{color:de?t.timeline.potCover:t.bgHighContrast},children:[" ","+",M.row.potPotency.toFixed(2),"(",g({en:"pot",zh:""}),")(",M.row.potCount,")"]}):void 0,M.row.partyBuffPotency>0?l.jsxs("span",{style:{color:de?t.accent:t.bgHighContrast},children:[" ","+",M.row.partyBuffPotency.toFixed(2),"(",g({en:"party",zh:""}),")"]}):void 0]}));const q={textAlign:"left",position:"relative",borderTop:K?"none":"1px solid "+t.bgMediumContrast};return de||(q.color=t.bgHighContrast),l.jsxs("div",{style:q,children:[l.jsx("div",{style:x(3),children:y}),l.jsx("div",{style:x(18),children:Y}),l.jsx("div",{style:x(8),children:W}),l.jsx("div",{style:x(19),children:$}),l.jsx("div",{style:x(14),children:j}),l.jsx("div",{style:x(8),children:ae}),l.jsx("div",{style:x(30),children:P})]},M.key)},B=[];for(let M=0;M<this.data.mainTable.length;M++)B.push(G({row:this.data.mainTable[M],key:M,lastRowSkill:M===0?void 0:this.data.mainTable[M-1].skillName}));const z=function(M){const K=[];K.push(M.row.displayedModifiers.map((q,se)=>l.jsx(pN,{buff:q},se)));const $=M.row.gap.toFixed(3),de=M.row.gap>0?l.jsx("span",{children:$}):l.jsx("span",{}),y=M.row.override.toFixed(3),Y=M.row.override>0?l.jsx("span",{children:y}):l.jsx("span",{}),W=l.jsx(FA,{basePotency:M.row.mainPotencyHit?M.row.baseMainPotency:0,includeInStats:!0,explainUntargetable:!M.row.mainPotencyHit,helpTopic:M.name+"Table-main-"+M.key,calc:M.row.initialHitCalculationModifiers,targetCount:M.row.targetCount,falloff:M.row.mainHitFalloff}),j=l.jsx(FA,{basePotency:M.row.baseDotPotency,includeInStats:!0,helpTopic:M.name+"Table-dot-"+M.key,calc:M.row.tickCalculationModifiers,targetCount:M.row.targetCount,falloff:0}),Z=M.row.totalNumTicks-M.row.numHitTicks,ae=l.jsxs("span",{children:[M.row.numHitTicks,Z>0?l.jsxs("span",{style:{color:t.timeline.untargetableDamageMark+"af"},children:[" ","+",Z," ",l.jsx(Fe,{topic:"thunderTable-numUntargetableTicks-"+M.key,content:g({en:"tick(s) when untargetable",zh:"BossDoT"})})]}):void 0]}),P=l.jsxs("span",{children:[M.row.potencyWithoutPot.toFixed(2),M.row.potPotency>0?l.jsxs("span",{style:{color:t.timeline.potCover},children:[" ","+",M.row.potPotency.toFixed(2),"(",g({en:"pot",zh:""}),")"]}):void 0,M.row.partyBuffPotency>0?l.jsxs("span",{style:{color:t.accent},children:[" ","+",M.row.partyBuffPotency.toFixed(2),"(",g({en:"party",zh:""}),")"]}):void 0]});return l.jsxs("div",{style:{textAlign:"left",position:"relative",borderTop:"1px solid "+t.bgMediumContrast},children:[l.jsx("div",{style:x(8),children:M.row.castTime.toFixed(3)}),l.jsx("div",{style:x(8),children:M.row.applicationTime.toFixed(3)}),l.jsx("div",{style:x(12),children:K}),l.jsx("div",{style:x(10),children:de}),l.jsx("div",{style:x(10),children:Y}),l.jsx("div",{style:x(10),children:W}),l.jsx("div",{style:x(10),children:j}),l.jsx("div",{style:x(8),children:ae}),l.jsx("div",{style:x(24),children:P})]},M.key)},Q=[];this.data.dotTables.forEach((M,K)=>{const $=[];for(let de=0;de<M.tableRows.length;de++)$.push(z({name:K,row:M.tableRows[de],key:de}));Q.push({dotName:K,tableRows:$})});const ce={display:"inline-block",padding:NN};let ue=g(a?{en:"Applied Skills",zh:""}:{en:"Applied Skills (Checked Only)",zh:""}),te="";if(this.data.mode===1){const M=(this.data.time-this.data.countdown).toFixed(3)+"s",K=s+g({en:"up till "+M,zh:""+M})+c;ue+=K,te=K}else if(this.data.mode===2){const M=s+g({en:"from selected skills",zh:""})+c;ue+=M,te+=M}let ee=t.text;this.data.mode===1?ee=t.historical:this.data.mode===2&&(ee=t.accent);const Ee=l.jsxs("div",{id:"damageTable",style:{position:"relative",margin:"0 auto",marginBottom:40,maxWidth:960},children:[l.jsx("div",{style:{...x(100),textAlign:"center",marginBottom:10},children:l.jsx("b",{style:{color:ee},children:ue})}),l.jsxs("div",{style:{outline:"1px solid "+t.bgMediumContrast},children:[l.jsxs("div",{children:[l.jsx("div",{style:{display:"inline-block",width:"21%"},children:l.jsx("span",{style:ce,children:l.jsx("b",{children:g({en:"skill",zh:""})})})}),l.jsx("div",{style:{display:"inline-block",width:"27%"},children:l.jsx("span",{style:ce,children:l.jsx("b",{children:g({en:"targets",zh:""})})})}),l.jsx("div",{style:{display:"inline-block",width:"14%"},children:l.jsx("span",{style:ce,children:l.jsx("b",{children:g({en:"potency",zh:""})})})}),l.jsx("div",{style:{display:"inline-block",width:"8%"},children:l.jsx("span",{style:ce,children:l.jsx("b",{children:g({en:"count",zh:""})})})}),l.jsx("div",{style:{display:"inline-block",width:"30%"},children:l.jsx("span",{style:ce,children:l.jsx("b",{children:g({en:"total",zh:""})})})})]}),B,l.jsxs("div",{style:{textAlign:"left",position:"relative",borderTop:"1px solid "+t.bgMediumContrast},children:[l.jsx("div",{style:x(70)}),l.jsx("div",{style:x(30),children:l.jsxs("span",{children:[this.data.mainTableSummary.totalPotencyWithoutPot.toFixed(2),this.data.mainTableSummary.totalPotPotency>0?l.jsxs("span",{style:{color:t.timeline.potCover},children:[" ","+",this.data.mainTableSummary.totalPotPotency.toFixed(2),g({en:" (pot +"+this.data.tinctureBuffPercentage+"%)",zh:"( +"+this.data.tinctureBuffPercentage+"%)"})]}):void 0,this.data.mainTableSummary.totalPartyBuffPotency>0?l.jsxs("span",{style:{color:t.accent},children:[" ","+",this.data.mainTableSummary.totalPartyBuffPotency.toFixed(2),"(",g({en:"party",zh:""}),")"]}):void 0]})})]})]})]}),he=Q.map(M=>{const K=M.tableRows,$=this.data.dotTables.get(M.dotName)?.summary;if($===void 0)return l.jsx(l.Fragment,{});const de=Ke(M.dotName)+te;return l.jsxs("div",{style:{position:"relative",margin:"0 auto",marginBottom:40,maxWidth:960},children:[l.jsx("div",{style:{...x(100),textAlign:"center",marginBottom:10},children:l.jsx("b",{style:{color:ee},children:de})}),l.jsxs("div",{style:{outline:"1px solid "+t.bgMediumContrast},children:[l.jsxs("div",{children:[l.jsx("div",{style:{display:"inline-block",width:"8%"},children:l.jsx("span",{style:ce,children:l.jsx("b",{children:g({en:"cast time",zh:""})})})}),l.jsx("div",{style:{display:"inline-block",width:"8%"},children:l.jsx("span",{style:ce,children:l.jsx("b",{children:g({en:"application time",zh:""})})})}),l.jsx("div",{style:{display:"inline-block",width:"12%"},children:l.jsx("span",{style:ce})}),l.jsx("div",{style:{display:"inline-block",width:"10%"},children:l.jsxs("span",{style:ce,children:[l.jsxs("b",{children:[g({en:"gap",zh:"DoT"})," "]}),l.jsx(Fe,{topic:"dot-gap-title",content:g({en:l.jsxs("div",{children:[l.jsx("div",{className:"paragraph",children:"DoT coverage time gap since pull or previous application"}),l.jsx("div",{className:"paragraph",children:"The last row also includes gap at the beginning and end of the fight"})]}),zh:l.jsx("div",{children:"DoTDoT"})})})]})}),l.jsx("div",{style:{display:"inline-block",width:"10%"},children:l.jsxs("span",{style:ce,children:[l.jsxs("b",{children:[g({en:"override",zh:"DoT"})," "]}),l.jsx(Fe,{topic:"dot-override-title",content:g({en:l.jsx("div",{children:"Overridden DoT time from previous application"}),zh:l.jsx("div",{children:"DoT"})})})]})}),l.jsx("div",{style:{display:"inline-block",width:"10%"},children:l.jsx("span",{style:ce,children:l.jsx("b",{children:g({en:"initial",zh:""})})})}),l.jsx("div",{style:{display:"inline-block",width:"10%"},children:l.jsx("span",{style:ce,children:l.jsx("b",{children:g({en:"DoT",zh:"DoT"})})})}),l.jsx("div",{style:{display:"inline-block",width:"8%"},children:l.jsx("span",{style:ce,children:l.jsx("b",{children:g({en:"ticks",zh:"DoT"})})})}),l.jsx("div",{style:{display:"inline-block",width:"24%"},children:l.jsx("span",{style:ce,children:l.jsx("b",{children:g({en:"total",zh:""})})})})]}),K,l.jsxs("div",{style:{textAlign:"left",position:"relative",borderTop:"1px solid "+t.bgMediumContrast},children:[l.jsx("div",{style:x(28)}),l.jsx("div",{style:x(10),children:$.cumulativeGap.toFixed(3)}),l.jsx("div",{style:x(10),children:$.cumulativeOverride.toFixed(3)}),l.jsx("div",{style:x(20)}),l.jsx("div",{style:x(8),children:p.game.fullTimeDoTs.includes(M.dotName)?l.jsxs(l.Fragment,{children:[$.totalTicks,"/",$.maxTicks]}):l.jsx(l.Fragment,{children:$.totalTicks})}),l.jsxs("div",{style:x(24),children:[$.totalPotencyWithoutPot.toFixed(2),$.totalPotPotency>0?l.jsxs("span",{style:{color:t.timeline.potCover},children:[" ","+",$.totalPotPotency.toFixed(2),g({en:"(pot +"+this.data.tinctureBuffPercentage+"%)",zh:"( +"+this.data.tinctureBuffPercentage+"%)"})]}):void 0,$.totalPartyBuffPotency>0?l.jsxs("span",{style:{color:t.accent},children:[" ","+",$.totalPartyBuffPotency.toFixed(2),"(",g({en:"party",zh:""}),")"]}):void 0]})]})]})]},`dot-table-${M.dotName}`)});return l.jsxs("div",{children:[H,l.jsxs("div",{children:[Ee,he]})]})}}const Uu=e=>{e.job==="RDM"&&e.tryConsumeResource("DUALCAST")&&p.reportWarning({kind:"custom",en:"dualcast dropped"})},xi=e=>e.job!=="NIN"||!e.hasResourceAvailable("TEN_CHI_JIN"),Hi=e=>{e.job==="NIN"&&e.hasResourceAvailable("MUDRA")&&e.gainStatus("BUNNY")};at(Ea,"INTERJECT",18,"cd_HEAD_GRAZE",{applicationDelay:0,cooldown:30,assetPath:"Role/Interject.png",startsAuto:!0});at(Il,"HEAD_GRAZE",24,"cd_HEAD_GRAZE",{applicationDelay:0,cooldown:30,assetPath:"Role/Head Graze.png"});Ea.forEach(e=>{Ve(e,"REPRISAL",1,{timeout:15})});je(Ea,"REPRISAL",22,"cd_REPRISAL",{rscType:"REPRISAL",applicationDelay:.62,cooldown:60,duration:e=>e.hasTraitUnlocked("ENHANCED_REPRISAL")&&15||10,assetPath:"Role/Reprisal.png",startsAuto:!0});oa.forEach(e=>{Ve(e,"FEINT",1,{timeout:15})});je(oa,"FEINT",22,"cd_FEINT",{rscType:"FEINT",applicationDelay:.537,cooldown:90,duration:e=>e.hasTraitUnlocked("ENHANCED_FEINT")&&15||10,assetPath:"Role/Feint.png",validateAttempt:xi,onConfirm:Hi});[..._l,...mi].forEach(e=>{Ve(e,"ADDLE",1,{timeout:15})});je([...mi,..._l],"ADDLE",8,"cd_ADDLE",{rscType:"ADDLE",applicationDelay:.621,cooldown:90,duration:e=>e.hasTraitUnlocked("ENHANCED_ADDLE")&&15||10,assetPath:"Role/Addle.png"});Ea.forEach(e=>{Ve(e,"RAMPART",1,{timeout:20})});je(Ea,"RAMPART",8,"cd_RAMPART",{rscType:"RAMPART",applicationDelay:.62,cooldown:90,assetPath:"Role/Rampart.png"});oa.forEach(e=>{Ve(e,"TRUE_NORTH",1,{timeout:10})});je(oa,"TRUE_NORTH",50,"cd_TRUE_NORTH",{rscType:"TRUE_NORTH",applicationDelay:0,cooldown:45,maxCharges:2,assetPath:"Role/True North.png",validateAttempt:xi,onConfirm:Hi});[...Ei,...mi,..._l].forEach(e=>{Ve(e,"SWIFTCAST",1,{timeout:10})});je([...Ei,...mi,..._l],"SWIFTCAST",18,"cd_SWIFTCAST",{rscType:"SWIFTCAST",applicationDelay:0,cooldown:40,assetPath:"Role/Swiftcast.png"});[...Ei,...mi,..._l].forEach(e=>{Ve(e,"LUCID_DREAMING",1,{timeout:21})});je([...Ei,...mi,..._l],"LUCID_DREAMING",14,"cd_LUCID_DREAMING",{rscType:"LUCID_DREAMING",applicationDelay:.623,cooldown:60,assetPath:"Role/Lucid Dreaming.png",onApplication:(e,t)=>{const a=e.resources.get("LUCID_DREAMING");a.node=t,a.tickCount=0;const o=e.findNextQueuedEventByTag(ca.LucidTick);o&&o.addTag(ca.ManaGain)}});[...Ea,...oa,...Il].forEach(e=>{Ve(e,"ARMS_LENGTH",1,{timeout:6.5})});je([...Ea,...oa,...Il],"ARMS_LENGTH",32,"cd_ARMS_LENGTH",{rscType:"ARMS_LENGTH",applicationDelay:.62,cooldown:120,assetPath:"Role/Arms Length.png",validateAttempt:xi,onConfirm:Hi});[...Ei,...mi,..._l].forEach(e=>{Ve(e,"SURECAST",1,{timeout:6.5})});je([...Ei,...mi,..._l],"SURECAST",44,"cd_SURECAST",{rscType:"SURECAST",applicationDelay:0,cooldown:120,assetPath:"Role/Surecast.png"});oa.forEach(e=>{Ve(e,"BLOODBATH",1,{timeout:20})});je(oa,"BLOODBATH",8,"cd_BLOODBATH",{rscType:"BLOODBATH",applicationDelay:.625,cooldown:90,assetPath:"Role/Bloodbath.png",validateAttempt:xi,onConfirm:Hi});at([...oa,...Il],"SECOND_WIND",12,"cd_SECOND_WIND",{healingPotency:600,applicationDelay:.625,cooldown:120,assetPath:"Role/Second Wind.png",validateAttempt:xi,onConfirm:Hi});at(Ea,"PROVOKE",15,"cd_PROVOKE",{applicationDelay:.62,cooldown:30,assetPath:"Role/Provoke.png",drawsAggro:!0,startsAuto:!0});at(Ea,"SHIRK",48,"cd_SHIRK",{applicationDelay:0,cooldown:120,assetPath:"Role/Shirk.png"});at(Ea,"LOW_BLOW",25,"cd_LOW_BLOW",{applicationDelay:.62,cooldown:25,assetPath:"Role/Low Blow.png",startsAuto:!0});Ka(Ei,"ESUNA",10,{manaCost:400,castTime:0,applicationDelay:1.14,assetPath:"Role/Esuna.png"});at(Ei,"RESCUE",48,"cd_RESCUE",{applicationDelay:0,cooldown:120,assetPath:"Role/Rescue.png"});at(oa,"LEG_SWEEP",10,"cd_LEG_SWEEP",{applicationDelay:.625,cooldown:40,assetPath:"Role/Leg Sweep.png",validateAttempt:xi,onConfirm:Hi});je(cs,"TINCTURE",1,"cd_TINCTURE",{rscType:"TINCTURE",applicationDelay:.64,cooldown:270,assetPath:"General/Tincture.png",validateAttempt:xi,onConfirm:Me(Uu,Hi)});je(cs,"SPRINT",1,"cd_SPRINT",{rscType:"SPRINT",applicationDelay:.133,cooldown:60,assetPath:"General/Sprint.png",validateAttempt:xi,onConfirm:Me(Uu,Hi)});Ea.forEach(e=>{Ve(e,"SHIELD_WALL",1,{timeout:10}),Ve(e,"STRONGHOLD",1,{timeout:12})});const $T=e=>Object.keys(JN).forEach(t=>{t!=="UNKNOWN"&&e.tryConsumeResource(t)});Aa(Ea,"SHIELD_WALL","cd_LIMIT_BREAK_1",{tier:"1",applicationDelay:.45,animationLock:1.93,onApplication:e=>{$T(e),e.gainStatus("SHIELD_WALL")}});Aa(Ea,"STRONGHOLD","cd_LIMIT_BREAK_2",{tier:"2",applicationDelay:.89,animationLock:3.86,onApplication:e=>{$T(e),e.gainStatus("STRONGHOLD")}});Ea.forEach(e=>{const t=dt[e].limitBreak??"UNKNOWN",a=dt[e].limitBreakBuff??"UNKNOWN";Ve(e,a,1,{timeout:8}),Aa(e,t,"cd_LIMIT_BREAK_3",{tier:"3",applicationDelay:1.34,animationLock:3.86,onApplication:o=>{$T(o),o.gainStatus(a)}})});Aa(Ei,"HEALING_WIND","cd_LIMIT_BREAK_1",{tier:"1",castTime:2,healingPotency:25,applicationDelay:.76,animationLock:2.1});Aa(Ei,"BREATH_OF_THE_EARTH","cd_LIMIT_BREAK_2",{tier:"2",castTime:2,healingPotency:50,applicationDelay:.8,animationLock:5.13});Ei.forEach(e=>{const t=dt[e].limitBreak??"UNKNOWN";Aa(e,t,"cd_LIMIT_BREAK_3",{tier:"3",castTime:2,healingPotency:100,applicationDelay:.8,animationLock:8.1})});Aa(oa,"BRAVER","cd_LIMIT_BREAK_1",{tier:"1",castTime:2,applicationDelay:2.23,animationLock:3.86,potency:1e3,validateAttempt:xi,onConfirm:Hi});Aa(oa,"BLADEDANCE","cd_LIMIT_BREAK_2",{tier:"2",castTime:3,applicationDelay:3.28,animationLock:3.86,potency:2200,validateAttempt:xi,onConfirm:Hi});oa.forEach(e=>{const t=dt[e].limitBreak??"UNKNOWN";Aa(e,t,"cd_LIMIT_BREAK_3",{tier:"3",castTime:4.5,applicationDelay:2.26,animationLock:3.7,potency:3500,validateAttempt:xi,onConfirm:Hi})});Aa(Il,"BIGSHOT","cd_LIMIT_BREAK_1",{tier:"1",castTime:2,applicationDelay:2.23,animationLock:3.1,potency:540});Aa(Il,"DESPERADO","cd_LIMIT_BREAK_2",{tier:"2",castTime:3,applicationDelay:2.49,animationLock:3.1,potency:1170});Il.forEach(e=>{const t=dt[e].limitBreak??"UNKNOWN";Aa(e,t,"cd_LIMIT_BREAK_3",{tier:"3",castTime:4.5,applicationDelay:3.16,animationLock:3.7,potency:1890})});Aa(mi,"SKYSHARD","cd_LIMIT_BREAK_1",{tier:"1",castTime:2,applicationDelay:1.64,animationLock:3.1,onConfirm:Uu,potency:600});Aa(mi,"STARSTORM","cd_LIMIT_BREAK_2",{tier:"2",castTime:3,applicationDelay:3.75,animationLock:5.1,onConfirm:Uu,potency:1300});mi.forEach(e=>{const t=dt[e].limitBreak??"UNKNOWN";Aa(e,t,"cd_LIMIT_BREAK_3",{tier:"3",castTime:4.5,applicationDelay:4.5,animationLock:8.1,onConfirm:e==="RDM"?Uu:void 0,potency:2100})});const CN="stdtick";class F2{timeScale;shouldLoop;tickMode;timeline;#e;gameConfig;record;imageExportConfig;timelineDrawOptions=VP;queuedPastes;clipboardMode;game;#t=0;#n=!0;#a;#i=[];#c=[];#s=[];#r=new Map;#u=new Map;#A=new Map;#R=new Map;savedHistoricalGame;savedHistoricalRecord;#T=!1;#o=!1;#I=!1;#d=!1;displayingUpToDateGameState=!0;#m=0;lastSkillTime=0;undoStack;constructor(){this.timeScale=1,this.shouldLoop=!1,this.queuedPastes=0,this.tickMode=oi.RealTimeAutoPause,this.timeline=new AP,this.timeline.reset(),this.#e=new y2,this.gameConfig=new li(mh),this.game=br(this.gameConfig),this.record=new go,this.record.config=this.gameConfig,this.imageExportConfig={wrapThresholdSeconds:JSON.parse(Rt("img: wrapThresholdSeconds")??"0"),includeTime:JSON.parse(Rt("img: includeTime")??"true")},this.clipboardMode=Rt("radio: clipboardMode")??"plain",this.#a=-this.gameConfig.countdown,this.savedHistoricalGame=this.game,this.savedHistoricalRecord=this.record,this.undoStack=new aw,this.#f()}get inputLocked(){return this.shouldLoop||this.queuedPastes>0}updateStats(){this.#S(),this.#g()}updateAllDisplay(t=this.game){sD(t.config.serialized()),this.updateStatusDisplay(t),this.updateSkillButtons(t),this.updateTimelineDisplay(),this.updateStats(),cf(this.getActiveJob())}#h(t){const a=t.initialResourceOverrides;for(let o=0;o<a.length;o++)a[o].applyTo(this.game)}#C(t){const a=this.#o;this.displayingUpToDateGameState=!1,this.#o=!0;const o=this.game,s=this.record,c=this.#a;t(),this.#o=a,this.savedHistoricalGame=this.game,this.savedHistoricalRecord=this.record,this.game=o,this.record=s,this.#a=c}checkRecordValidity(t,a,o=!1){console.assert(t.config!==void 0);const s={isValid:!0,invalidActions:[],skillUseTimes:[],straightenedIfValid:void 0};if(a===void 0)return console.log("no edit happened"),s;this.#f(!1);const c=t.config??this.gameConfig;this.game=br(c),this.record=new go,this.record.config=c,this.#a=-c.countdown,this.#h(this.record.config);const d=this.#E({line:t,replayMode:Dn.Edited,firstEditedNodeIndex:a,selectionStart:t.getFirstSelection(),selectionEnd:t.getLastSelection()});return this.record.selectionStartIndex=t.selectionStartIndex,this.record.selectionStartIndex=t.selectionStartIndex,s.isValid=d.invalidActions.length===0,s.invalidActions=d.invalidActions,s.skillUseTimes=d.skillUseTimes,d.success&&(s.straightenedIfValid=this.record),this.displayingUpToDateGameState=o,s}displayHistoricalState(t,a){const o=t+this.gameConfig.countdown,s=this.record.getFirstSelection()!==void 0;this.#C(()=>{const c=this.record;this.game=br(this.gameConfig),this.record=new go,this.record.config=this.gameConfig,this.#a=-this.gameConfig.countdown,this.#h(this.record.config),this.#E({line:c,replayMode:Dn.Exact,maxReplayTime:o,cutoffIndex:a}),this.timeline.updateElem({type:ot.s_HistoricalCursor,time:this.game.time,displayTime:this.game.getDisplayTime(),enabled:!0}),this.updateStatusDisplay(this.game),this.updateSkillButtons(this.game),fl(),this.#S(),this.timeline.drawElements()}),df(!0),s&&this.#S(!0),this.#g()}displayCurrentState(){this.displayingUpToDateGameState=!0,this.timeline.updateElem({type:ot.s_HistoricalCursor,enabled:!1,time:0,displayTime:0}),df(!1),this.updateAllDisplay(this.game)}restart(){this.#f(),this.#h(this.gameConfig)}#f(t=!0){this.game=br(this.gameConfig),this.#_({shouldLoop:!1}),this.timeline.reset(),t&&this.record.unselectAll(),this.#a=-this.gameConfig.countdown,this.#i=[],this.#s=[],this.#r=new Map,this.#A=new Map,this.#u=new Map,this.#R=new Map,this.#T=!1,this.displayingUpToDateGameState=!0}getPresetLines(){return this.#e.getLinesForJob(this.getActiveJob())}serializedPresets(){return this.#e.serialized()}addSelectionToPreset(t="(untitled)"){console.assert(this.record.getFirstSelection());const a=this.record.getSelected();a.name=t,this.#e.addLine(a,this.getActiveJob())}appendFilePresets(t){this.#e.deserializeAndAppend(t)}loadBattleRecordFromFile(t){t.config===void 0&&(window.alert("Error loading record: saved record had no config object"),console.error(t)),t.config.procMode===void 0&&(t.config.rngProcs!==void 0?t.config.procMode=t.config.rngProcs?ua.RNG:ua.Never:t.config.procMode=ua.RNG),t.config.fps===void 0&&(t.config.fps=mh.fps),t.config.gcdSkillCorrection===void 0&&(t.config.gcdSkillCorrection=mh.gcdSkillCorrection),t.config.level&&(t.config.level=parseInt(t.config.level)),t.config.skillSpeed===void 0&&(t.config.skillSpeed=ut.getSubstatBase(t.config.level)),t.config.shellVersion===void 0&&(t.config.shellVersion=No.Initial),t.config.job===void 0&&(t.config.job=rD(t.actions.flatMap(a=>a.skillName?[iT(a.skillName)]:[]))),oa.includes(t.config.job)||(t.config.initialResourceOverrides=t.config.initialResourceOverrides.filter(a=>![we.FLANK_POSITIONAL.name,we.REAR_POSITIONAL.name].includes(a.type))),lu(()=>{const a=new li(t.config);this.gameConfig=a,this.record=new go,this.record.config=a,this.#f(),this.#h(this.gameConfig);const o=Ur.deserialize(t.actions),s=this.#E({line:o,replayMode:Dn.Exact});if(!s.success){let c=`Error loading record- 
`;if(s.invalidActions.length>0){const d=s.invalidActions[0].node;if(d.info.type===ze.Skill){const h=d.info.skillName?fi(d.info.skillName):"(unknown)";c+=`Stopped here because the next action ${h} can't be added: `}else c+=`Stopped here because the next action ${d.info.type} can't be added: `}c+=s.invalidActions[0].reason,window.alert(c)}})}applyEditedRecord(){const t=this.record;this.record=new go,this.record.config=t.config,this.#f(),this.#h(this.gameConfig);const a=this.#E({line:t,replayMode:Dn.Exact,removeTrailingIdleTime:!0});console.assert(a.success),t.selectionStartIndex!==void 0&&(this.record.selectSingle(t.selectionStartIndex),this.record.selectUntil(t.selectionEndIndex)),this.autoSave()}deleteSelectedSkills(){const t=this.record.selectionStartIndex;if(t!==void 0){this.record.deleteSelected();const a=Zn();t<this.record.length?(this.record.selectSingle(t),this.displayHistoricalState(a.skillUseTimes[t],t)):this.displayCurrentState(),this.autoSave()}}#S(t=!1){if(!this.#d){let a=w2({tinctureBuffPercentage:this.#t,lastDamageApplicationTime:this.#a});t&&(a={mainTable:a.mainTable,mainTableSummary:a.mainTableSummary,dotTables:a.dotTables,mode:a.mode}),NR(a)}}#g(){if(!this.#d){const t=P2({tinctureBuffPercentage:this.#t,lastDamageApplicationTime:this.#a});cD(t)}}getTincturePotencyMultiplier(){return 1+this.#t*.01}setTinctureBuffPercentage(t){this.#t=t,this.displayCurrentState(),vo()}setUntargetableMask(t){this.#n=t,this.displayCurrentState(),vo()}getUntargetableMask(){return this.#n}getMaxTicks(t,a,o){let s=0;const c=[a];return o||c.push(CN),c.forEach(d=>{this.#r.get(d)?.forEach(h=>{!Qn(h-this.gameConfig.countdown)&&h<=t&&s++})}),s}getDotCoverageTimeFraction(t,a){return this.getOverTimeCoverageTimeFraction(t,a,this.#A)}getHotCoverageTimeFraction(t,a){return this.getOverTimeCoverageTimeFraction(t,a,this.#R)}getOverTimeCoverageTimeFraction(t,a,o){if(t<=An.epsilon)return 0;const s=o.get(a);if(!s)return 0;let c=0;s.forEach(h=>{if(h.tStartDisplay<=t){const f=Math.max(0,h.tStartDisplay);let m=h.tEndDisplay!==void 0&&h.tEndDisplay<=t?h.tEndDisplay:t;m=Math.max(0,m),c+=Vr(f,m)}});const d=Vr(0,t);return c/d}setTimelineOptions(t){this.timelineDrawOptions={...this.timelineDrawOptions,...t},this.updateTimelineDisplay()}getTimelineRenderingProps(){const t=this.record.getFirstSelection()!=null&&this.record.getLastSelection()!=null;let a=this.gameConfig.countdown;const o=this.timeline.getAllSlotsTimeInfo();return o!==null&&(a=Math.max(a,o.countdown)),{timelineWidth:this.timeline.getCanvasWidth(),timelineHeight:this.timeline.getCanvasHeight(),scale:this.timeline.scale,countdown:a,tincturePotencyMultiplier:this.getTincturePotencyMultiplier(),untargetableMask:this.#n,sharedElements:this.timeline.sharedElements,slots:this.timeline.slots,activeSlotIndex:this.timeline.activeSlotIndex,allMarkers:this.timeline.getAllMarkers(),untargetableMarkers:this.timeline.getUntargetableMarkers(),buffMarkers:this.timeline.getBuffMarkers(),showSelection:t,selectionStartDisplayTime:(this.record.getFirstSelection()?.tmp_startLockTime??0)-this.gameConfig.countdown,selectionEndDisplayTime:(this.record.getLastSelection()?.tmp_endLockTime??0)-this.gameConfig.countdown,drawOptions:this.timelineDrawOptions}}reportWarning(t){this.#o||this.timeline.addElement({type:ot.WarningMark,warningType:t,time:this.game.time,displayTime:this.game.getDisplayTime()})}reportComboBreak(){this.reportWarning({kind:"combobreak"})}resolvePotency(t){this.resolveAnyPotency(t,ot.DamageMark,this.#i),this.#S()}resolveHealingPotency(t){this.resolveAnyPotency(t,ot.HealingMark,this.#c)}resolveOverTimePotency(t,a){a==="damage"?this.resolveAnyPotency(t,ot.DamageMark,this.#i):this.resolveAnyPotency(t,ot.HealingMark,this.#c)}resolveAnyPotency(t,a,o){if(t===void 0)return;t.resolve(this.game.getDisplayTime()),this.#a=this.game.time,t.base===0&&(a=ot.AggroMark);let s=!1;if(t.modifiers.forEach(c=>{c.source===U.POT&&(s=!0)}),!this.#o){let c="{skill}@"+t.sourceTime.toFixed(3);t.description.length>0&&(c+=" "+t.description);const d={potency:t,sourceDesc:c,sourceSkill:t.sourceSkill},h=this.timeline.tryGetElement(this.game.time,a);h?(h.potencyInfos.push(d),s&&!h.buffs.includes("TINCTURE")&&h.buffs.push("TINCTURE")):this.timeline.addElement({type:a,potencyInfos:[d],buffs:s?["TINCTURE"]:[],time:this.game.time,displayTime:this.game.getDisplayTime()}),o.push({time:this.game.getDisplayTime(),source:t.sourceSkill+"@"+t.sourceTime,potency:t.getAmount({tincturePotencyMultiplier:1,includePartyBuffs:!0,includeSplash:!0}),buffs:s?["TINCTURE"]:[]})}}reportLucidTick(t,a){this.#o||this.timeline.addElement({type:ot.LucidMark,time:t,displayTime:this.game.getDisplayTime(),sourceDesc:a})}reportManaTick(t,a){this.#o||this.timeline.addElement({type:ot.MPTickMark,time:t,displayTime:this.game.getDisplayTime(),sourceDesc:a})}reportMeditateTick(t,a){this.#o||this.timeline.addElement({type:ot.MeditateTickMark,time:t,displayTime:this.game.getDisplayTime(),sourceDesc:a})}reportAutoTick(t,a){this.#o||this.timeline.addElement({type:ot.AutoTickMark,time:t,displayTime:this.game.getDisplayTime(),sourceDesc:a})}reportDotTick(t,a){this.reportOverTimeTick(t,this.#r,a)}reportHotTick(t,a){this.reportOverTimeTick(t,this.#u,a)}reportOverTimeTick(t,a,o){if(!this.#o){const s=o??CN;let c=a.get(s);c||(c=[],a.set(s,c)),c.push(t),this.updateStats()}}reportDotStart(t,a){this.reportOverTimeStart(t,a,"damage")}reportHotStart(t,a){this.reportOverTimeStart(t,a,"healing")}reportOverTimeStart(t,a,o){if(!this.#o){const s=o==="damage"?this.#A:this.#R;let c=s.get(a);c||(c=[],s.set(a,c));const d=c.length;console.assert(d===0||c[d-1].tEndDisplay!==void 0),c.push({tStartDisplay:t,tEndDisplay:void 0})}}reportDotDrop(t,a){this.reportOverTimeDrop(t,a,"damage")}reportHotDrop(t,a){this.reportOverTimeDrop(t,a,"healing")}reportOverTimeDrop(t,a,o){if(!this.#o){const c=(o==="damage"?this.#A:this.#R).get(a);if(console.assert(c,`Reported dropping ${a} when no coverage was detected`),!c)return;const d=c.length;console.assert(d>0&&c[d-1].tEndDisplay===void 0),c[d-1].tEndDisplay=t}}updateStatusDisplay(t){const a=t.resources.get("NOT_CASTER_TAXED"),o=t.resources.get("NOT_ANIMATION_LOCKED"),s=t.cooldowns.get("cd_GCD"),c={gcdReady:s.stacksAvailable()>0,gcd:s.currentStackCd(),timeTillGCDReady:t.cooldowns.timeTillAnyStackAvailable("cd_GCD"),castLocked:t.resources.timeTillReady("NOT_CASTER_TAXED")>0,castLockTotalDuration:a.pendingChange?a.pendingChange.delay:0,castLockCountdown:t.resources.timeTillReady("NOT_CASTER_TAXED"),animLocked:t.resources.timeTillReady("NOT_ANIMATION_LOCKED")>0,animLockTotalDuration:o.pendingChange?o.pendingChange.delay:0,animLockCountdown:t.resources.timeTillReady("NOT_ANIMATION_LOCKED"),canMove:t.resources.get("MOVEMENT").available(1)},d=t.statusPropsGenerator;r0(h=>({time:t.getDisplayTime(),resources:d.getAllResourceViewProps(h),resourceLocks:c,enemyBuffs:d.getAllOtherTargetedBuffViewProps(),selfBuffs:d.getAllSelfTargetedBuffViewProps(),level:t.config.level}),d.statusLayoutFn)}updateTimelineDisplay(){this.timeline.setTimeSegment(0,this.game.time),fl(),Ru(),this.#o||this.timeline.updateElem({type:ot.s_Cursor,time:this.game.time,displayTime:this.game.getDisplayTime()}),this.timeline.drawElements()}updateSkillButtons(t){_b(this.game.displayedSkills.getCurrentSkillNames(this.game).map(a=>t.getSkillAvailabilityStatus(a)))}#l(t){const a=this.game.time,o=t.deltaTime+this.game.getDisplayTime();if(t.deltaTime>0){this.#m=t.deltaTime;const s=this.game.tick(t.deltaTime,t.prematureStopCondition?t.prematureStopCondition:()=>!1);let c;return t.waitKind==="duration"?c=Or(s):t.waitKind==="target"?c=rl(o):t.waitKind==="mp"&&(c=RC()),c!==void 0&&(c.tmp_startLockTime=a,c.tmp_endLockTime=t.deltaTime+a,this.record.addActionNode(c)),c}}setTimeControlSettings(t){this.timeScale=t.timeScale,this.tickMode=t.tickMode,this.shouldLoop=!1}setConfigAndRestart(t,a=!0){const o=this.gameConfig.job!==t.job,s=this.gameConfig.countdown,c=s<t.countdown;o&&!a&&(console.error("attempted to apply config without reset even though job changed; forcing reset"),a=!0),lu(()=>{this.gameConfig=new li({...t,shellVersion:LR.version}),a?this.record=new go:c&&this.record.prependActionNode(rl(-s)),this.record.config=this.gameConfig,this.#f(),this.#h(this.gameConfig),o&&cf(t.job)}),this.autoSave()}getDisplayedGame(){return this.displayingUpToDateGameState?this.game:this.savedHistoricalGame}getActiveJob(){return this.game.job}getSkillInfo(t){return t.game.getSkillAvailabilityStatus(t.skillName)}#_(t){const a=t.shouldLoop;this.shouldLoop!==a&&(this.shouldLoop=a,this.shouldLoop&&this.#N(()=>this.shouldLoop))}#b(t){let a=this.game.timeTillAnySkillAvailable();t>=0&&(a=Math.min(t-this.game.time,a)),this.#l({deltaTime:a})}#p(t,a,o=this.tickMode,s=-1,c=!0,d=!1){let h=this.game.getSkillAvailabilityStatus(t);const f=this.game.time,m=h.timeTillAvailable,R=this.#l({deltaTime:m});d&&R&&this.undoStack.push(new ql(R,this.record.tailIndex)),t=AC(t,this.game),h=this.game.getSkillAvailabilityStatus(t);const T=ns(t,a);let S;if(h.status.ready())T.tmp_startLockTime=this.game.time,this.record.addActionNode(T),S=this.record.tailIndex,d&&T&&this.undoStack.push(new ql(T,this.record.tailIndex)),this.game.useSkill(t,T,S),T.tmp_invalid_reasons=[],o===oi.RealTimeAutoPause&&(this.shouldLoop=!0,this.#N(()=>this.game.timeTillAnySkillAvailable()>0,!0));else{if(!c){if(m>0){const C=Or(m);C.tmp_startLockTime=f,C.tmp_endLockTime=this.game.time,this.record.addActionNode(C)}return h}this.record.addActionNode(T),S=this.record.tailIndex,this.game.useInvalidSkill(t,T),T.tmp_invalid_reasons=h.status.unavailableReasons}const I=this.game.timeTillAnySkillAvailable();if(T.tmp_startLockTime=this.game.time,T.tmp_endLockTime=this.game.time+I,!this.#o){this.lastSkillTime=this.game.time;const C=this.game.getSkillAvailabilityStatus(t,!0);let O=this.game.skillsList.get(t).cdName==="cd_GCD";const D=h.castTime>0&&!h.instantCast,H=D?h.castTime-li.getSlidecastWindow(h.castTime):0;let x=C.cdRecastTime;t==="MEDITATE"&&(O=!0,x=this.game.getSkillAvailabilityStatus("YUKIKAZE").cdRecastTime),this.timeline.addElement({type:ot.Skill,displayTime:this.game.getDisplayTime(),skillName:t,isGCD:O,isSpellCast:D,time:this.game.time,relativeSnapshotTime:H,lockDuration:I,recastDuration:x,node:T,actionIndex:S}),this.#s.push({time:this.game.getDisplayTime(),action:gn[t].name,isGCD:O?1:0,castTime:h.instantCast?0:h.castTime,targetCount:T.targetCount,isDamaging:T.anyPotencies()})}return o!==oi.RealTimeAutoPause&&this.#b(s),this.#d||Ru(),h}#E(t){const a=this.#d;this.#d=!0,t.removeTrailingIdleTime===void 0&&(t.removeTrailingIdleTime=!1);const o=t.maxReplayTime??-1;let s=t.replayMode;t.replayMode===Dn.Edited&&(s=Dn.Exact);const c=t.line,d=[],h=[];if(c.length===0)return this.#d=a,{success:!0,firstAddedIndex:void 0,invalidActions:d,skillUseTimes:h};let f=this.record.length,m;const R=t.cutoffIndex??c.actions.length,T=c.actions.slice();for(let C=0;C<R;C++){const _=T[C];t.replayMode===Dn.Edited&&s===Dn.Exact&&C===t.firstEditedNodeIndex&&(s=Dn.Edited);let O=0;if(_.info.type===ze.Wait?O=_.info.waitDuration:_.info.type===ze.JumpToTimestamp?O=_.info.targetTime-this.game.getDisplayTime():_.info.type===ze.WaitForMP?O=this.game.timeTillNextMpGainEvent():_.info.type===ze.Skill&&(O=this.game.getSkillAvailabilityStatus(_.info.skillName).timeTillAvailable),C>0){const H=T[C-1].legacyWaitDuration;if(H!==void 0&&Math.abs(H-this.#m)>An.epsilon){const x=H-this.#m;if(x>0&&_.info.type!==ze.Wait){let L;if(_.info.type===ze.Skill){const w=this.game.getSkillAvailabilityStatus(_.info.skillName).timeTillAvailable;Math.abs(w-x)>An.epsilon&&(L="duration")}L&&(this.#l({deltaTime:x,waitKind:L}),f++)}else _.info.type===ze.Wait&&(O+=x)}}if(o>=0&&o-this.game.time<O&&s===Dn.Exact)return this.#l({deltaTime:o-this.game.time,waitKind:"duration"}),this.#d=!1,this.updateAllDisplay(),{success:!0,firstAddedIndex:m,invalidActions:d,skillUseTimes:h};if(h.push(this.game.getDisplayTime()),[ze.Wait,ze.JumpToTimestamp,ze.WaitForMP].includes(_.info.type))if(O>=0)this.#l({deltaTime:O,waitKind:_.info.type===ze.Wait?"duration":_.info.type===ze.JumpToTimestamp?"target":"mp"});else{const D=cu();if(_.info.type===ze.JumpToTimestamp){const H=rl(_.info.targetTime);H.tmp_startLockTime=this.game.time,H.tmp_endLockTime=H.tmp_startLockTime,this.record.addActionNode(H)}else console.error("non-jump wait somehow failed: "+_.info.type);D.addUnavailableReason(Et.PastTargetTime),d.push({node:_,index:C,reason:D})}else if(_.info.type===ze.Skill){let D=_.info.skillName;t.replayMode===Dn.SkillSequence&&(D=kr(this.game.job,D,this.gameConfig.level));const H=this.#p(D,_.info.targetCount,oi.Manual,o);h[h.length-1]=H.usedAt,H.status.ready()||d.push({node:_,index:C,reason:H.status.clone()}),this.#T&&(this.#T=!1,this.shouldLoop||(H.status.addUnavailableReason(Et.CastCanceled),d.push({node:_,index:C,reason:H.status})))}else if(_.info.type===ze.SetResourceEnabled&&(s===Dn.Exact||s===Dn.Edited)){const D=this.requestToggleBuff(_.info.buffName),H=s===Dn.Exact;if(D)this.#l({deltaTime:H?O:Math.min(O,this.game.timeTillAnySkillAvailable())});else{const x=cu();x.addUnavailableReason(Et.BuffNoLongerAvailable),d.push({node:_,index:C,reason:x})}}else if(_.info.type===ze.Unknown){const{skillName:D,targetCount:H}=_.info,x=uH(D,H);this.record.addActionNode(x);const L=cu();L.addUnavailableReason(Et.UnknownSkill),d.push({node:_,index:C,reason:L}),x.tmp_invalid_reasons=L.unavailableReasons;const w=this.gameConfig.animationLock;this.#o||(this.lastSkillTime=this.game.time,this.timeline.addElement({type:ot.Skill,displayTime:this.game.getDisplayTime(),skillName:D,isGCD:!1,isSpellCast:!1,time:this.game.time,relativeSnapshotTime:this.game.time,lockDuration:w,recastDuration:0,node:x,actionIndex:C}),this.#s.push({time:this.game.getDisplayTime(),action:D,isGCD:0,castTime:0,targetCount:x.targetCount,isDamaging:!1})),this.#l({deltaTime:w})}else console.error("did not process ActionNode "+JSON.stringify(_.info));if(t.replayMode===Dn.Edited){const D=this.record.tailIndex;_===t.selectionStart&&D>=0?this.record.selectSingle(D):_===t.selectionEnd&&D>=0&&this.record.selectUntil(D)}this.record.length!==f&&m===void 0&&(m=this.record.tailIndex)}if(t.cutoffIndex!==void 0){const C=T[t.cutoffIndex].info;if(C.type===ze.Skill){const _=this.game.getSkillAvailabilityStatus(C.skillName);this.#l({deltaTime:_.timeTillAvailable})}}const S=T[T.length-1],I=S.legacyWaitDuration;if(I!==void 0&&(S.info.type===ze.Skill||S.info.type===ze.SetResourceEnabled)&&Math.abs(I-this.#m)>An.epsilon){const C=I-this.#m;this.#l({deltaTime:C,waitKind:"duration"})}return this.#d=a,this.updateAllDisplay(),{success:!0,firstAddedIndex:m,invalidActions:d,skillUseTimes:h}}autoSave(){const t=this.record.serialized();this.timeline.saveCurrentSlot(t,this.gameConfig.countdown,this.game.time)}tryAutoLoad(){const t=Rt("gameRecord");t!==null&&(console.log("migrating existing record to slot 0"),Tt("gameRecord0",t),QA("gameRecord"));for(let s=0;s<pi;s++)this.timeline.loadSlot(s);this.timeline.slots.length>0||this.timeline.addSlot();const o=parseInt(Rt("activeSlotIndex")??"0");this.setActiveSlot(o>=pi?0:o),this.undoStack.clear()}setActiveSlot(t){this.#_({shouldLoop:!1}),lu(()=>{this.autoSave(),this.record.unselectAll(),this.timeline.loadSlot(t)||console.error(`failed to load timeline in cached active slot ${t}`)}),this.savedHistoricalGame=this.game,this.savedHistoricalRecord=this.record,this.displayCurrentState(),Tt("activeSlotIndex",t.toString())}cloneActiveSlot(){if(this.timeline.activeSlotIndex<0||this.timeline.activeSlotIndex>=this.timeline.slots.length){console.error("tried to clone slot with invalid activeSlotIndex "+this.timeline.activeSlotIndex);return}this.#_({shouldLoop:!1}),lu(()=>{const t=this.record.serialized();this.timeline.addSlot(),this.loadBattleRecordFromFile(t),this.autoSave(),this.timeline.loadSlot(this.timeline.slots.length-1)}),this.displayCurrentState()}getDamageLogCsv(){const t=this.#i.map(a=>{let o=!1;a.buffs.forEach(c=>{c==="TINCTURE"&&(o=!0)});let s=a.potency;return o&&(s*=this.getTincturePotencyMultiplier()),[a.time,a.source,s]});return[["time","damageSource","potency"]].concat(t)}getActionsLogCsv(){const t=this.#s.map(a=>[a.time,a.action,a.isGCD,a.castTime]);return[["time","action","isGCD","castTime"]].concat(t)}getAmaSimCsv(){const t=O=>O===gn.TINCTURE.name?"Grade 4 Gemdraught":O.endsWith("(Ten)")||O.endsWith("(Chi)")||O.endsWith("(Jin)")?O.substring(0,O.length-6):O.replace(" 2"," II").replace(" 3"," III").replace(" 4"," IV"),a=this.getActiveJob(),o=Ea.includes(a)||oa.includes(a),s=this.timeline.getBuffMarkers().map(O=>{const D=new qh(O.description);let H=D.info.name;D.info.name===k.Card_TheSpear?H="The Spear":D.info.name===k.Card_TheBalance?H="The Balance":[k.RadiantFinale1,k.RadiantFinale2,k.RadiantFinale3].includes(D.info.name)&&(H="Radiant Finale");const x=D.info.name===k.Dokumori||D.info.name===k.ChainStratagem,L=()=>x?"Debuff Only":D.info.name===k.RadiantFinale1?'"1 Coda, Buff Only"':D.info.name===k.RadiantFinale2?'"2 Coda, Buff Only"':D.info.name===k.RadiantFinale3?'"3 Coda, Buff Only"':[k.ArmysPaeon,k.MagesBallad,k.WanderersMinuet,k.StandardFinish,k.TechnicalFinish].includes(D.info.name)?"Buff Only":D.info.name===k.Card_TheSpear?o?"Small":"Big":D.info.name===k.Card_TheBalance?o?"Big":"Small":"";return[O.time,H,D.info.job,L(),x?"Boss0":""]});let c=this.gameConfig.getOverrideStacks("MAGES_CODA")??0,d=this.gameConfig.getOverrideStacks("WANDERERS_CODA")??0,h=this.gameConfig.getOverrideStacks("ARMYS_CODA")??0,f=this.gameConfig.getOverrideStacks("RADIANT_CODA")??0;const m=this.#s.filter(O=>!O.action.includes("Toggle buff")).map(O=>{let D="";if(O.isDamaging&&O.targetCount!==void 0){D='"';for(let L=0;L<O.targetCount;L++)L!==0&&(D+=", "),D+="Boss"+L.toString();D+='"'}let H="";const x=c+d+h;return O.action==="Mage's Ballad"?c=1:O.action==="The Wanderer's Minuet"?d=1:O.action==="Army's Paeon"?h=1:O.action==="Radiant Finale"?x>0&&(f=x,H=`${x} Coda`,c=0,d=0,h=0):O.action==="Radiant Encore"&&f>0&&(H=`${f} Encore`,f=0),[O.time,t(O.action),"",H,D]}),R=["use_strict_skill_naming = False"],T=!(o||Il.includes(a)),S={[Je.lvl70]:new Map([["WHM",162],["SCH",264],["AST",148],["SGE",177],["BLM",133],["SMN",264],["RDM",162],["PCT",148]]),[Je.lvl80]:new Map([["WHM",189],["SCH",308],["AST",172],["SGE",206],["BLM",155],["SMN",308],["RDM",189],["PCT",172]]),[Je.lvl90]:new Map([["WHM",216],["SCH",353],["AST",197],["SGE",236],["BLM",177],["SMN",353],["RDM",216],["PCT",197]]),[Je.lvl100]:new Map([["WHM",244],["SCH",398],["AST",222],["SGE",266],["BLM",200],["SMN",398],["RDM",244],["PCT",222]])};let I={job_class:a,det_stat:this.gameConfig.determination,crit_stat:this.gameConfig.criticalHit,dh_stat:this.gameConfig.directHit,tenacity:this.gameConfig.tenacity,speed_stat:T?this.gameConfig.spellSpeed:this.gameConfig.skillSpeed,version:qM,level:this.gameConfig.level,wd:this.gameConfig.wd,main_stat:this.gameConfig.main};S[this.gameConfig.level].has(a)&&(I={...I,healer_or_caster_strength:S[this.gameConfig.level].get(a)}),R.push("stats = "+JSON.stringify(I));const C=this.timeline.getUntargetableMarkers().map(O=>`(${O.time}, ${O.time+O.duration}),`);C.length>0&&R.push("downtime_windows = ("+C.join(" ")+")");const _=["time","skill_name","job_class","skill_conditional","targets"];return _.push("players_to_buff","overriding_skill_conditional_for_other_players"),s.forEach(O=>O.push("","")),m.forEach(O=>O.push("","")),{meta:R,body:[_].concat(s,m)}}tryAddLine(t,a=Dn.SkillSequence){const o=p.record.length,s=this.#E({line:t,replayMode:a});return s.success?(this.undoStack.push(new CT(t.actions,o,"preset")),this.autoSave(),Zn(),!0):(this.rewindUntilBefore(s.firstAddedIndex,!1),window.alert('Failed to add line "'+t.name+'" due to insufficient resources and/or stats mismatch.'),!1)}deleteLine(t){this.#e.deleteLine(t)}deleteAllLines(){this.#e.deleteAllLines()}reportInterruption(t){if(this.#I||this.tickMode===oi.RealTimeAutoPause&&this.shouldLoop){const a=t.failNode.getNameForMessage();window.alert("Cast interrupted! Resources for "+a+" are no longer available"),console.warn("failed: "+a);const o=this.game.time,s=this.shouldLoop;this.rewindUntilBefore(t.failIndex,!1),this.autoSave(),this.#l({deltaTime:o-this.game.time,waitKind:"duration"}),this.shouldLoop=s}else this.#T=!0,this.#o||this.timeline.invalidateLastElement()}rewindUntilBefore(t,a){const o=this.record;this.record=new go,this.record.config=this.gameConfig,this.#f(),this.#h(this.gameConfig),t!==void 0&&(o.spliceUpTo(t),this.#E({line:o,replayMode:Dn.Exact,removeTrailingIdleTime:a}))}removeTrailingIdleTime(){let t;for(let o=this.record.tailIndex;o>=0;o--)if(this.record.actions[o].info.type===ze.Skill){t=o;break}const a=t===void 0?this.record.actions.slice():this.record.actions.slice(t+1);a.length>0&&this.undoStack.push(new Cr((t??-1)+1,a,"delete")),t===void 0?this.rewindUntilBefore(0,!0):this.rewindUntilBefore(t+1,!0),Zn()}waitTillNextMpOrLucidTick(){const t=this.#l({deltaTime:this.game.timeTillNextMpGainEvent(),waitKind:"mp"});t!==void 0&&this.undoStack.push(new ql(t,this.record.tailIndex)),Zn(),this.updateAllDisplay()}insertRecordNodes(t,a){this.record.insertActionNodes(t,a),this.autoSave();const o=Zn();let s;t.length>1?(s=Math.min(a,this.record.tailIndex),this.record.selectSingle(s),this.record.selectUntil(s+t.length-1)):(s=Math.min(a+1,this.record.tailIndex),this.record.selectSingle(s)),this.displayHistoricalState(o.skillUseTimes[s],s)}insertRecordNode(t,a){this.insertRecordNodes([t],a)}requestUseSkill(t,a=!1){if(this.#I=!0,!this.inputLocked)if(this.displayingUpToDateGameState)this.#p(t.skillName,t.targetCount,this.tickMode,-1,!1,a).status.ready()&&(this.scrollToTime(this.game.time),this.autoSave(),this.tickMode!==oi.RealTimeAutoPause&&Zn());else{const o=this.record.selectionStartIndex;if(o!==void 0){const s=ns(t.skillName,t.targetCount);this.insertRecordNode(s,o),a&&this.undoStack.push(new ql(s,o))}}this.#I=!1}requestToggleBuff(t,a=!1){if(!this.game.requestToggleBuff(t))return!1;const s=$A(t);return s.tmp_startLockTime=this.game.time,s.tmp_endLockTime=s.tmp_startLockTime,this.record.addActionNode(s),a&&this.undoStack.push(new ql(s,this.record.tailIndex)),this.#s.push({time:this.game.getDisplayTime(),action:"Toggle buff: "+we[t].name,isGCD:0,castTime:0,isDamaging:!1}),!0}scrollToTime(t){const a=t===void 0?this.game.time:t;setTimeout(()=>{YD(Ze.positionFromTimeAndScale(a,this.timeline.scale))},0)}#N(t,a=!1){let o=0;const s=this,c=function(d){o===0&&(o=d);const h=(d-o)/1e3*s.timeScale,f=s.game.timeTillAnySkillAvailable();f>=h?s.#l({deltaTime:h,prematureStopCondition:()=>!t()}):(s.#l({deltaTime:f,prematureStopCondition:()=>!t()}),s.#l({deltaTime:h-f,prematureStopCondition:()=>!t()})),s.updateAllDisplay(),o=d,t()?requestAnimationFrame(c):(s.shouldLoop=!1,s.autoSave(),uf(!1),a&&Zn())};uf(!0),requestAnimationFrame(c)}step(t,a=!1){let o,s=this.record.length;this.displayingUpToDateGameState?(o=this.#l({deltaTime:t,waitKind:"duration"}),this.autoSave(),this.updateAllDisplay()):this.record.selectionStartIndex!==void 0&&(s=this.record.selectionStartIndex,o=Or(t),this.insertRecordNode(o,s)),a&&o&&this.undoStack.push(new ql(o,s))}stepUntil(t,a=!1){let o,s=this.record.length;this.displayingUpToDateGameState?(o=this.#l({deltaTime:t-this.game.getDisplayTime(),waitKind:"target"}),this.autoSave(),this.updateAllDisplay()):this.record.selectionStartIndex!==void 0&&(s=this.record.selectionStartIndex,o=rl(t),this.insertRecordNode(o,s)),a&&o&&this.undoStack.push(new ql(o,s))}handleKeyboardEvent(t){if(this.inputLocked)return;const a=t.ctrlKey||t.metaKey,o=p.record.selectionStartIndex,s=o!==void 0;let c=!1;this.displayingUpToDateGameState&&t.key==="u"&&(this.undoStack.doThenPush(new Cr(this.record.tailIndex,[this.record.actions[this.record.tailIndex]],"delete")),c=!0),t.key==="z"&&a?(this.undoStack.undo(),c=!0):t.key==="Z"&&a||t.key==="y"&&a?(this.undoStack.redo(),c=!0):t.key==="Paste"||t.key==="v"&&a?(a0(),c=!0):t.key==="Copy"||t.key==="c"&&a?s&&(ER(),c=!0):(t.key==="Cut"||t.key==="x"&&a)&&s&&(ER(),p.undoStack.push(new Cr(o,p.record.getSelected().actions,"delete")),p.deleteSelectedSkills(),c=!0),c&&t.preventDefault()}handleTimelineKeyboardEvent(t){if(!this.inputLocked){const a=t.ctrlKey||t.metaKey,o=p.record.selectionStartIndex,s=p.record.selectionEndIndex,c=o!==void 0;let d=!1,h=!1;t.key==="Backspace"||t.key==="Delete"?c&&(p.undoStack.push(new Cr(o,p.record.getSelected().actions,"delete")),p.deleteSelectedSkills()):t.key==="ArrowUp"?c?(t.shiftKey?p.timeline.resizeSelection(!0):p.timeline.onClickTimelineAction(o-1,!1),d=!0,t.preventDefault()):p.record.length>0&&(p.timeline.onClickTimelineAction(p.record.tailIndex,!1),d=!0,t.preventDefault()):t.key==="ArrowDown"?c?(t.shiftKey?p.timeline.resizeSelection(!1):p.timeline.onClickTimelineAction(s+1,!1),h=!0,t.preventDefault()):p.record.length>0&&(p.timeline.onClickTimelineAction(0,!1),h=!0,t.preventDefault()):t.key==="Home"?(p.timeline.onClickTimelineAction(0,t.shiftKey),d=!0):t.key==="End"?(p.timeline.onClickTimelineAction(p.record.tailIndex,t.shiftKey),h=!0):t.key==="Escape"?(p.record.unselectAll(),p.displayCurrentState()):t.key==="a"&&a&&(p.timeline.onClickTimelineAction(0,!1),p.timeline.onClickTimelineAction(p.record.tailIndex,!0),t.preventDefault()),d?(this.scrollToTime(this.record.selectionStart?.tmp_startLockTime),pT()):h&&(this.scrollToTime(this.record.selectionEnd?.tmp_startLockTime),Qb())}}setImageExportConfig(t){this.imageExportConfig=t}}const p=new F2;function oh(e){const t=Oi();return t==="en"?e==="fieldop"?"Field Operations":e==="dungeon"?"Dungeons":e==="ultimate"?"Ultimates":e[0].toUpperCase()+e.substring(1):t==="zh"?e==="savage"?"":e==="extreme"?"":e==="ultimate"?"":"":e}function Be(e,t,a,o,s){return{name:typeof e=="string"?{en:e,zh:e}:e,fightKind:t,supportedLanguages:typeof a=="string"?[a]:a,authors:typeof o=="string"?[o]:o,phased:s??!1}}const jA=new Map([["m9s",Be("M9S","savage","en","shanzhe")],["m9s_zh",Be("M9S","savage","zh",["shanzhe",""])],["m10s",Be("M10S","savage","en","shanzhe")],["m10s_zh",Be("M10S","savage","zh",["shanzhe",""])],["m11s",Be("M11S","savage","en","shanzhe")],["m11s_zh",Be("M11S","savage","zh",["shanzhe",""])],["m12s_p1",Be({en:"M12S P1",zh:"M12S"},"savage","en","shanzhe")],["m12s_p1_zh",Be({en:"M12S P1",zh:"M12S"},"savage","zh",["shanzhe",""])],["m12s_p2",Be({en:"M12S P2",zh:"M12S"},"savage","en","shanzhe")],["m12s_p2_zh",Be({en:"M12S P2",zh:"M12S"},"savage","zh",["shanzhe",""])],["m5s",Be("M5S","savage","en","shanzhe")],["m6s",Be("M6S","savage","en","shanzhe")],["m7s",Be("M7S","savage","en","shanzhe")],["m8s_full",Be("M8S","savage","en","shanzhe",!0)],["final_verse_q40",Be("The Final Verse Q40","dungeon","en","shanzhe")],["dsr_p2",Be("DSR P2","ultimate","en","Caro")],["dsr_p6",Be("DSR P6","ultimate","en","Tischel")],["dsr_p7",Be("DSR P7","ultimate","en","Tischel")],["TOP_2023_04_02",Be("TOP","ultimate","en","Santa")],["m2s",Be("M2S","savage","en","shanzhe")],["m3s",Be("M3S","savage","en","shanzhe")],["m4s",Be("M4S","savage","en","shanzhe")],["m1s_zh",Be("M1S","savage","zh","kiyozero")],["m2s_zh",Be("M2S","savage","zh","kiyozero")],["m3s_zh",Be("M3S","savage","zh","kiyozero")],["m4s_zh",Be("M4S","savage","zh","kiyozero")],["fru_en_full",Be({en:"FRU",zh:""},"ultimate","en",["Yara","shanzhe"],!0)],["fru_zh",Be({en:"FRU",zh:""},"ultimate","zh",["","czmm"])],["queen_eternal",Be({en:"Queen Eternal",zh:""},"extreme","zh","")],["p1s_aetherial_shackles_first",Be("P1S Aetherial Shackles first","savage","en")],["p1s_shackles_of_time_first",Be("P1S Shackles of Time first","savage","en")],["p2s",Be("P2S","savage","en")],["p5s_zh",Be("P5S","savage","zh","3")],["p6s_zh",Be("P6S","savage","zh","3")],["p7s_zh",Be("P7S","savage","zh","3")],["p8s_p1_snake_zh",Be({en:"P8S P1 snake first",zh:"P8S"},"savage","zh","3")],["p8s_p1_beast_zh",Be({en:"P8S P1 dog first",zh:"P8S"},"savage","zh","3")],["p8s_p2_zh",Be({en:"P8S P2",zh:"P8S"},"savage","zh","3")],["p9s",Be("P9S","savage","en","Lilian")],["p10s",Be("P10S","savage","en","Tischel")],["p11s",Be("P11S","savage","en","Lilian")],["p12s_p1",Be("P12S P1","savage","en","Yara")],["p12s_p2",Be("P12S P2","savage","en","Yara")],["p9s_zh",Be("P9S","savage","zh","3")],["p10s_zh",Be("P10S","savage","zh","3")],["p11s_zh",Be("P11S","savage","zh","3")],["p12s_p1_zh",Be("P12S","savage","zh","3")],["p12s_p2_zh",Be("P12S","savage","zh","3")]]),j2=["m9s","m10s","m11s","m12s_p1","m12s_p2","m9s_zh","m10s_zh","m11s_zh","m12s_p1_zh","m12s_p2_zh","final_verse_q40","fru_en_full","fru_zh"],z2=["dsr_p2","dsr_p6","dsr_p7","TOP_2023_04_02"],Y2=new Map([["7.0-7.3",["m2s","m3s","m4s","m1s_zh","m2s_zh","m3s_zh","m4s_zh","fru_en_full","fru_zh","queen_eternal","m5s","m6s","m7s","m8s_full","final_verse_q40"]],["6.X",["p1s_aetherial_shackles_first","p1s_shackles_of_time_first","p2s","dsr_p2","dsr_p6","dsr_p7","p5s_zh","p6s_zh","p7s_zh","p8s_p1_snake_zh","p8s_p1_beast_zh","p8s_p2_zh","p9s","p9s_zh","TOP_2023_04_02","p9s","p10s","p11s","p12s_p1","p12s_p2","p9s_zh","p10s_zh","p11s_zh","p12s_p1_zh","p12s_p2_zh"]]]);let uD=e=>{};const Oh="/presets/markers/",xr=20,Hr=0,ls=5;function K2(e){const t=bt();return l.jsx("hr",{style:{marginTop:e.marginTop,marginBottom:e.marginBottom,border:"none",borderTop:"1px solid "+t.bgHighContrast}})}const CR=function(e,t){Yb(e,a=>{try{const o=JSON.parse(a);t(o)}catch(o){console.log("Error fetching/parsing JSON "+e),console.error(o)}})},_u=b.createContext(""),ss=b.createContext({trackIndices:[],setTrackIndices:()=>{}});function dD(e,t,a){let o=zi(a?.globalOffset??"");o=isNaN(o)?0:o;const s=zi(a?.localOffset??"");p.timeline.loadCombinedTracksPreset(e,o+(isNaN(s)?0:s),a?.cutoff!==void 0?o+a.cutoff:void 0),t(p.timeline.getTrackIndices()),p.updateStats(),p.timeline.drawElements()}function hD(e){const t=b.useContext(_u),{setTrackIndices:a}=b.useContext(ss);return l.jsx("button",{onClick:o=>CR(e.url,s=>dD(s,a,{globalOffset:t,localOffset:e.offsetStr})),children:e.displayName})}function fD(e,t){return{en:(e.authors?.length??0)>0&&t?`${e.name.en} by ${e.authors?.join(" & ")}`:e.name.en,zh:(e.authors?.length??0)>0&&t?`${e.name.zh} ${e.authors?.join(" + ")} `:e.name.zh}}function V2(e){return l.jsx("div",{style:{marginBlock:1},children:l.jsx(hD,{displayName:g(fD(e.meta,e.showAuthors)),url:Oh+e.fileName+".txt"})})}function W2(e){const t=b.useContext(_u),{setTrackIndices:a}=b.useContext(ss),o=ia(b.useContext(Rn)),[s,c]=b.useState(new Map),[d,h]=b.useState(void 0);b.useEffect(()=>{CR(Oh+e.fileName+".txt",m=>{m.fileType!==ri.MarkerTrackSet?console.error(`while parsing ${e.fileName}, got invalid file type ${m.fileType}`):h(m.phasedTracks)})},[]);const f=l.jsx("div",{style:{display:"grid",gridTemplateColumns:"2fr 3fr",gap:ls},children:d?.map(({offset:m,label:R,fileName:T},S)=>{let I=s.get(T);return I?.length||(I=m.toString()),T===void 0&&console.error("missing fileName for phase",R,"of",e.fileName),l.jsxs(ha.Fragment,{children:[l.jsx("div",{style:{gridRow:S+1,gridColumn:1},children:l.jsx(Bt,{description:"@",defaultValue:s.get(T)?.toString()??"",onChange:C=>{const _=new Map(s);C===void 0?_.delete(T):_.set(T,C),c(_)},width:8,placeholder:m.toString()})}),l.jsx("div",{style:{gridRow:S+1,gridColumn:2},children:l.jsx(hD,{displayName:g(R),url:Oh+T,offsetStr:I})})]},S)})??g({en:"loading phases...",zh:""})});return l.jsx("div",{style:{display:"flex",flexDirection:"column",marginBlock:ls,marginLeft:5,paddingLeft:10,borderLeft:"1px solid "+o.bgHighContrast,minWidth:240},children:l.jsx(ml,{title:`trackPresets-phase-${e.fileName}`,titleNode:l.jsxs("div",{style:{display:"inline-flex",flexDirection:"row",gap:ls,alignItems:"baseline",marginBottom:4},children:[l.jsx("div",{children:g(fD(e.meta,e.showAuthors))}),l.jsx("span",{tabIndex:-1,children:" "}),l.jsx("div",{children:l.jsx("button",{onClick:m=>{m.stopPropagation();const R=new Map;d?.forEach((T,S)=>{let I;for(let C=S+1;C<d.length;C++){const _=s.get(d[C].fileName);if(_){const O=zi(_);(I===void 0||O<I)&&(I=O)}}I!==void 0&&R.set(T.fileName,I)}),d?.forEach(T=>CR(Oh+T.fileName,S=>{dD(S,a,{globalOffset:t,localOffset:s.get(T.fileName)??T.offset.toString(),cutoff:R.get(T.fileName)})}))},children:g({en:"Load all phases",zh:""})})})]}),noMargin:!0,autoIndent:!1,content:f})})}function zA(e){const t=new Map,a=c=>{const d=jA.get(c);if(!d){console.error("missing track metadata declaration for "+c);return}t.has(d.fightKind)||t.set(d.fightKind,new Map);const h=t.get(d.fightKind);d.supportedLanguages.forEach(f=>{h.has(f)||h.set(f,{unphased:[],phased:[],commonAuthors:d.authors});const m=h.get(f);(d.phased?m.phased:m.unphased).push(c),d.authors?.join("+")!==m.commonAuthors?.join("+")&&(m.commonAuthors=void 0)})};e.trackList.map(a);const o={marginBlock:1},s=l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:ls,paddingInlineStart:6,marginInlineStart:10},children:t.entries().map(([c,d],h)=>d.entries().flatMap(([f,m])=>[l.jsxs("div",{children:[l.jsxs("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",gap:ls,alignItems:"baseline"},children:[g({en:m.commonAuthors?l.jsxs("p",{style:o,children:[oh(c)," (",Qd(f),") by"," ",m.commonAuthors.join(" & "),":"]}):l.jsxs("p",{style:o,children:[oh(c)," (",Qd(f),"):"]}),zh:m.commonAuthors?l.jsxs("p",{style:o,children:[oh(c),"",Qd(f),""," ",m.commonAuthors.join(" + "),""]}):l.jsxs("p",{style:o,children:[oh(c),"",Qd(f),""]})}),m.unphased.map((R,T)=>l.jsx(V2,{meta:jA.get(R),fileName:R,showAuthors:!m.commonAuthors},T))]}),l.jsx("div",{children:m.phased.map((R,T)=>l.jsx(W2,{meta:jA.get(R),fileName:R,showAuthors:!m.commonAuthors},T))})]},`${h}-${f}`)]).toArray()).toArray()});return l.jsx(ml,{title:`trackPresets-${e.label.en}`,titleNode:g(e.label),titleBodyGap:ls,defaultShow:e.defaultShow,autoIndent:!1,content:s})}function X2(){const[e,t]=b.useState(Xn.Info),[a,o]=b.useState(ft.Blue),[s,c]=b.useState("0"),[d,h]=b.useState("1"),[f,m]=b.useState("0"),[R,T]=b.useState(""),[S,I]=b.useState(!1),[C,_]=b.useState(k.TechnicalFinish),O={display:"inline-block",marginRight:"1em",marginBottom:6},{setTrackIndices:D}=b.useContext(ss);b.useEffect(()=>{uD=z=>{t(z.markerType),c(z.time.toString()),h(z.duration.toString()),z.markerType===Xn.Info?(o(z.color),c(z.time.toString()),h(z.duration.toString()),m(z.track.toString()),T(z.description),I(z.showText)):z.markerType===Xn.Buff&&(m(z.track.toString()),_(z.description))};const B=Rt("radio: markerType");B!==null&&(t(B),B===Xn.Buff&&L(C))},[]);const H=(B,z)=>l.jsx("option",{value:B,children:z},B),x=l.jsxs("div",{children:[l.jsx(Bt,{defaultValue:R,description:g({en:"Description: ",zh:""}),width:40,onChange:T}),l.jsx(Bt,{defaultValue:f,description:g({en:"Track: ",zh:""}),width:4,style:O,onChange:m}),l.jsxs("div",{style:{display:"inline-block",marginTop:"4px"},children:[l.jsx("span",{children:g({en:"Color: ",zh:""})}),l.jsx("select",{style:{display:"inline-block",outline:"none"},value:a,onChange:B=>{B.target&&o(B.target.value)},children:[H(ft.Red,g({en:"red",zh:""})),H(ft.Orange,g({en:"orange",zh:""})),H(ft.Yellow,g({en:"yellow",zh:""})),H(ft.Green,g({en:"green",zh:""})),H(ft.Cyan,g({en:"cyan",zh:""})),H(ft.Blue,g({en:"blue",zh:""})),H(ft.Purple,g({en:"purple",zh:""})),H(ft.Pink,g({en:"pink",zh:""}))]}),l.jsx("div",{style:{background:a,marginLeft:"4px",display:"inline-block",verticalAlign:"middle",height:"1em",width:"4em"}})]}),l.jsxs("div",{style:{display:"inline-block",marginTop:"4px",marginLeft:"10px"},children:[l.jsx("input",{type:"checkbox",style:{position:"relative",top:3},checked:S,onChange:B=>{B.target&&I(B.target.checked)}}),l.jsx("span",{style:{marginLeft:4},children:g({en:"show text",zh:""})})]})]}),L=B=>{const z=new qh(B);h(z.info.duration.toString())},w=bT.map(B=>l.jsx("option",{value:B.name,children:tC(B.name)},B.name)),G=l.jsxs("div",{children:[l.jsx("span",{children:g({en:"Buff: ",zh:""})}),l.jsx("select",{value:C,onChange:B=>{if(B.target){const z=B.target.value;_(z),L(z)}},children:w}),l.jsx("div",{style:{marginTop:5},children:l.jsx(Bt,{defaultValue:f,description:g({en:"Track: ",zh:""}),width:4,style:O,onChange:m})})]});return l.jsxs("div",{children:[l.jsx("p",{children:l.jsx("b",{children:g({en:"Add buffs/markers",zh:"buff"})})}),l.jsxs("form",{children:[l.jsxs("fieldset",{style:{display:"flex",alignItems:"baseline",paddingTop:0,paddingLeft:0,paddingBottom:0,marginLeft:0,marginBottom:10,border:0},children:[l.jsx("legend",{style:{float:"left",marginRight:"0.5rem",position:"relative",top:"1px"},children:g({en:"Type: ",zh:""})}),l.jsx(Vb,{containerStyle:{display:"flex",flexDirection:"row",gap:"0.8rem"},uniqueName:"markerType",selected:e,onChange:B=>{t(B),B===Xn.Buff&&L(C)},options:[[Xn.Info,g({en:"Info",zh:""})],[Xn.Buff,g({en:"Buff",zh:""})],[Xn.Untargetable,g({en:"Untargetable",zh:""})]]})]}),l.jsx("span",{children:" "}),l.jsx(Bt,{defaultValue:s,description:g({en:"Time: ",zh:""}),width:8,style:O,onChange:c}),l.jsx(Bt,{defaultValue:d,description:g({en:"Duration: ",zh:""}),width:8,style:O,onChange:h}),e===Xn.Info?x:void 0,e===Xn.Buff?G:void 0,l.jsx("button",{type:"submit",style:{display:"block",marginTop:"0.5em"},onClick:B=>{const z={type:ot.Marker,markerType:e,time:zi(s),duration:parseFloat(d),color:a,track:parseInt(f),description:R,showText:S};let Q;if(e===Xn.Untargetable&&(z.color=ft.Grey,z.track=Ki,z.description="",z.showText=!0),e===Xn.Buff){const ce=new qh(C),ue=parseFloat(d);!isNaN(ue)&&ue>ce.info.duration&&(Q=g({en:`this buff can't last longer than ${ce.info.duration}s`,zh:`${ce.info.duration}`})),z.color=ce.info.color,z.description=ce.name,z.duration=ue,z.showText=!0}if((isNaN(z.duration)||isNaN(z.time)||isNaN(z.track))&&(Q=g({en:"some input(s) are invalid",zh:""})),z.track!==Ki&&(z.track<Hr||z.track>xr)&&(Q=g({en:`marker track number must be between ${Hr} and ${xr}`,zh:`${Hr}${xr}`})),Q){window.alert(Q),B.preventDefault();return}p.timeline.addMarker(z),p.updateStats(),D(p.timeline.getTrackIndices()),e===Xn.Untargetable&&Zn(),B.preventDefault()},children:g({en:"add marker",zh:""})})]})]})}function q2(){const{trackIndices:e,setTrackIndices:t}=b.useContext(ss),a=parseInt(b.useContext(_u)),o=isNaN(a)?0:a,s=ia(b.useContext(Rn)),[c,d]=b.useState("0"),h=l.jsx("input",{style:{color:s.text,backgroundColor:"transparent",outline:"none",border:"none",borderBottom:"1px solid "+s.text},size:2,type:"text",value:c,onChange:T=>d(T.target.value)}),f=g({en:l.jsxs("span",{children:["Load into individual track ",h,": "]}),zh:l.jsxs("span",{children:["",h,""]})}),m=l.jsxs(l.Fragment,{children:[l.jsx(Wh,{allowLoadFromUrl:!1,defaultLoadUrl:"",label:g({en:"Load multiple tracks combined: ",zh:""}),onLoadFn:T=>{p.timeline.loadCombinedTracksPreset(T,o),p.updateStats(),t(p.timeline.getTrackIndices()),p.timeline.drawElements()}}),l.jsx("div",{className:"paragraph",children:l.jsx(Wh,{allowLoadFromUrl:!1,label:f,onLoadFn:T=>{const S=parseInt(c);if(isNaN(S)||S!==Ki&&(S<Hr||S>xr)){window.alert(g({en:`marker track number must be between ${Hr} and ${xr}`,zh:`${Hr}${xr}`}));return}p.timeline.loadIndividualTrackPreset(T,S,o),p.updateStats(),t(p.timeline.getTrackIndices()),p.timeline.drawElements()}})})]}),R=l.jsxs(l.Fragment,{children:[l.jsx(El,{fileFormat:Oo.Json,getContentFn:()=>p.timeline.serializedCombinedMarkerTracks(),filename:"tracks_all",displayName:g({en:"all tracks combined",zh:""})},"combined"),e.map(T=>{let S=T.toString(),I=g({en:"track ",zh:""})+S;return T===Ki&&(S="untargetable",I=g({en:"track untargetable",zh:""})),l.jsx(El,{fileFormat:Oo.Json,getContentFn:()=>{const C=p.timeline.serializedSeparateMarkerTracks();for(let _=0;_<C.length;_++)if(C[_].track===T)return C[_];return console.assert(!1),[]},filename:"track_"+S,displayName:I},T)})]});return l.jsxs("div",{children:[l.jsxs("p",{children:[l.jsx("b",{children:g({en:"Load marker tracks from file",zh:""})})," ",l.jsx(Fe,{topic:"load tracks",content:g({en:"when loading additional markers, current markers will not be deleted",zh:""})})]}),m,l.jsx("p",{style:{marginTop:16},children:l.jsx("b",{children:g({en:"Save marker tracks to file",zh:""})})}),R]})}function Z2(){const[e,t]=b.useState([]);b.useEffect(()=>{t(p.timeline.getTrackIndices())},[]);const[a,o]=b.useState(""),s=zi(a),c=l.jsx(Bt,{defaultValue:a,description:l.jsxs(l.Fragment,{children:[l.jsx("span",{style:{color:isNaN(s)||s===0?"":ft.Purple},children:g({en:"Load tracks with time offset ",zh:" "})}),l.jsx(Fe,{topic:"trackLoadOffset",content:g({en:l.jsxs("div",{children:[l.jsx("p",{children:"When specified, all imported and preset tracks will start from the specified timestamp. Use this to combine markers for multi-phase fights with varying kill times."}),l.jsx("p",{children:"Loading preset tracks that already have phase timestamps will add this start value on top of the phase-specific timing."})]}),zh:l.jsxs("div",{children:[l.jsx("p",{children:"P"}),l.jsx("p",{children:"P"})]})})}),":"]}),width:4,onChange:o}),d=l.jsxs(l.Fragment,{children:[l.jsx("p",{children:l.jsx("b",{children:g({en:"Remove buffs/markers",zh:"buff"})})}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"max-content max-content",columnGap:2,rowGap:ls,alignItems:"center"},children:[l.jsx("div",{children:l.jsx("button",{onClick:()=>{p.timeline.deleteAllMarkers(),p.updateStats(),t([])},children:g({en:"clear all markers",zh:""})})}),l.jsx("div",{children:l.jsx("button",{onClick:()=>{const h=p.timeline.sortAndRemoveDuplicateMarkers();h>0?alert("removed "+h+" duplicate markers"):alert("no duplicate markers found"),p.timeline.updateTimelineMarkers()},children:g({en:"remove duplicates",zh:""})})}),l.jsx("div",{style:{gridColumn:"1 / 3"},children:g({en:"click a marker in the timeline to delete it",zh:""})})]})]});return l.jsx(gT,{contentHeight:nS,children:[{defaultSize:35,content:l.jsxs(l.Fragment,{children:[l.jsx("p",{children:l.jsx("b",{children:g({en:"Presets",zh:""})})}),l.jsx("div",{children:c}),l.jsx(_u.Provider,{value:a,children:l.jsxs(ss.Provider,{value:{trackIndices:e,setTrackIndices:t},children:[l.jsx(zA,{label:{en:"Current content",zh:""},trackList:j2,defaultShow:!0}),l.jsx(zA,{label:{en:"Legacy ultimates",zh:""},trackList:z2,defaultShow:!0}),l.jsx("p",{children:l.jsx("b",{children:g({en:"Archive",zh:""})})}),Array.from(Y2.entries().map(([h,f],m)=>l.jsx("div",{children:l.jsx(zA,{label:{en:h},trackList:f})},m)))]})})]})},{defaultSize:30,content:l.jsxs(l.Fragment,{children:[d,l.jsx(K2,{marginTop:15,marginBottom:15}),l.jsx(ss.Provider,{value:{trackIndices:e,setTrackIndices:t},children:l.jsx(X2,{})})]})},{defaultSize:35,content:l.jsx(l.Fragment,{children:l.jsx(_u.Provider,{value:a,children:l.jsx(ss.Provider,{value:{trackIndices:e,setTrackIndices:t},children:l.jsx(q2,{})})})})}]})}const ye=new Map;ye.set(k.LeyLines,"Buffs/BLM/Ley Lines.png");ye.set(k.Tincture,"Buffs/General/Tincture.png");ye.set(k.ArcaneCircle,"Buffs/RPR/Arcane Circle.png");ye.set(k.ArmysPaeon,"Buffs/BRD/Army's Paeon.png");ye.set(k.BattleLitany,"PartyBuffs/battle_litany.png");ye.set(k.BattleVoice,"Buffs/BRD/Battle Voice.png");ye.set(k.Brotherhood,"PartyBuffs/brotherhood.png");ye.set(k.Card_TheBalance,"PartyBuffs/the_balance.png");ye.set(k.Card_TheSpear,"PartyBuffs/the_spear.png");ye.set(k.ChainStratagem,"PartyBuffs/chain_stratagem.png");ye.set(k.Devilment,"Buffs/DNC/Devilment.png");ye.set(k.Divination,"PartyBuffs/divination.png");ye.set(k.Dokumori,"PartyBuffs/dokumori.png");ye.set(k.Embolden,"PartyBuffs/Embolden.png");ye.set(k.MagesBallad,"Buffs/BRD/Mage's Ballad.png");ye.set(k.RadiantFinale1,"Buffs/BRD/Radiant Finale.png");ye.set(k.RadiantFinale2,"Buffs/BRD/Radiant Finale.png");ye.set(k.RadiantFinale3,"Buffs/BRD/Radiant Finale.png");ye.set(k.SearingLight,"PartyBuffs/searing_light.png");ye.set(k.StandardFinish,"Buffs/DNC/Standard Finish.png");ye.set(k.StarryMuse,"Buffs/PCT/Starry Muse.png");ye.set(k.TechnicalFinish,"Buffs/DNC/Technical Finish.png");ye.set(k.WanderersMinuet,"Buffs/BRD/Wanderer's Minuet.png");ye.set(k.Acceleration,"Buffs/RDM/Acceleration.png");ye.set(k.Fuka,"Buffs/SAM/Fuka.png");ye.set(k.Fugetsu,"Buffs/SAM/Fugetsu.png");ye.set(k.EnhancedEnpi,"Buffs/SAM/Enhanced Enpi.png");ye.set(k.DeathsDesign,"Buffs/RPR/Death's Design.png");ye.set(k.ArcaneCircle,"Buffs/RPR/Arcane Circle.png");ye.set(k.RagingStrikes,"Buffs/BRD/Raging Strikes.png");ye.set(k.Barrage,"Buffs/BRD/Barrage.png");ye.set(k.NoMercy,"Buffs/GNB/No Mercy.png");ye.set(k.EnhancedPiercingTalon,"Buffs/DRG/Enhanced Piercing Talon.png");ye.set(k.PowerSurge,"Buffs/DRG/Power Surge.png");ye.set(k.LanceCharge,"Buffs/DRG/Lance Charge.png");ye.set(k.LifeOfTheDragon,"Buffs/DRG/Life of the Dragon.png");ye.set(k.LifeSurge,"Buffs/DRG/Life Surge.png");ye.set(k.DivineMight,"Buffs/PLD/Divine Might.png");ye.set(k.Requiescat,"Buffs/PLD/Requiescat Zero.png");ye.set(k.FightOrFlight,"Buffs/PLD/Fight or Flight.png");ye.set(k.Zoe,"Buffs/SGE/Zoe.png");ye.set(k.Autophysis,"Buffs/SGE/Autophysis.png");ye.set(k.Krasis,"Buffs/SGE/Krasis.png");ye.set(k.Philosophia,"Buffs/SGE/Philosophia.png");ye.set(k.Soteria,"Buffs/SGE/Soteria.png");ye.set(k.TrickAttack,"Buffs/NIN/Trick Attack.png");ye.set(k.KunaisBane,"Buffs/NIN/Kunai's Bane.png");ye.set(k.Bunshin,"Buffs/NIN/Bunshin.png");ye.set(k.RiddleOfFire,"Buffs/MNK/Riddle of Fire.png");ye.set(k.NeutralSect,"Buffs/AST/Neutral Sect.png");ye.set(k.Synastry,"Buffs/AST/Synastry.png");ye.set(k.TheArrow,"Buffs/AST/The Arrow.png");ye.set(k.Confession,"Buffs/WHM/Confession.png");ye.set(k.Asylum,"Buffs/WHM/Asylum.png");ye.set(k.Temperance,"Buffs/WHM/Temperance.png");ye.set(k.HuntersInstinct,"Buffs/VPR/Hunter's Instinct.png");ye.set(k.Swiftscaled,"Buffs/VPR/Swiftscaled.png");ye.set(k.FeyIllumination,"Buffs/SCH/Fey Illumination.png");ye.set(k.Dissipation,"Buffs/SCH/Dissipation.png");ye.set(k.Protraction,"Buffs/SCH/Protraction.png");ye.set(k.Recitation,"Buffs/SCH/Recitation.png");const rs=new Map;ye.forEach((e,t)=>{const a=new Image;a.src="assets/"+e,a.onload=function(){vo()},rs.set(t,a)});const sf=400,ya=28,ED=e=>{e.setDraggedSkillElem(void 0),p.record.unselectAll(),p.displayCurrentState(),e.setBgSelecting(!0)};function Q2(e){const{ctx:t,lines:a,images:o,viewInfo:s}=e;let{mouseX:c,mouseY:d}=e;const{colors:h,visibleWidth:f,renderingProps:m}=s;if(!a.length)return;const R=14,T=24,S=8,I=4;t.font="12px "+Xi;let C=-1;a.forEach(G=>{C=Math.max(C,t.measureText(G).width)});let[_,O]=[C+2*S,R*a.length+2*I];o&&o.length>0&&(_=Math.max(_,S+o.length*(T+S)),O+=T+I);const D=4,H=11;let x=!1;d>=O+D?d=d-O-D:d+O<=m.timelineHeight?d=d+H+D:x=!0,x?(d=d-O/2,c=c+H+D):c-_/2>=0&&c+_/2<f?c=c-_/2:c-_/2<0?c=0:c=f-_,t.strokeStyle=h.bgHighContrast,t.lineWidth=1,t.fillStyle=h.tipBackground,t.fillRect(c,d,_,O),t.strokeRect(c,d,_,O),t.fillStyle=h.emphasis,t.textBaseline="top",t.textAlign="left";for(let G=0;G<a.length;G++)t.fillText(a[G],c+S,d+G*R+2+I);const L=c+S,w=d+a.length*R+2+I;if(o)for(let G=0;G<o.length;G++)o[G]&&t.drawImage(o[G],L+G*T,w,T*.75,T)}function J2(e){const{ctx:t,viewInfo:a,markerTracksTopY:o,markerTracksBottomY:s,timelineOrigin:c,trackBins:d,testInteraction:h}=e,f=a.colors,{countdown:m,scale:R}=a.renderingProps;t.lineCap="round",t.lineWidth=4,t.font="11px "+Xi,t.textAlign="left",d.forEach((T,S)=>{let I=s-(S+1)*pe.trackHeight;S===Ki&&(I=o);for(let C=0;C<T.length;C++){const _=T[C];let O=_.description;_.markerType===Xn.Untargetable?O=g({en:"Untargetable",zh:""}):_.markerType===Xn.Buff&&(O=tC(_.description));const D=c+Ze.positionFromTimeAndScale(_.time+m,R),H=()=>{const x=p.timeline.deleteMarker(_);console.assert(x),p.updateStats(),uD(_)};if(_.duration>0){const x=Ze.positionFromTimeAndScale(_.duration,R);if(_.markerType===Xn.Buff){t.fillStyle=_.color+f.timeline.markerAlpha,t.fillRect(D,I,x,pe.trackHeight);const w=rs.get(_.description);w&&t.drawImage(w,D,I,pe.trackHeight*.75,pe.trackHeight),t.fillStyle=f.emphasis,t.fillText(O,D+pe.trackHeight*1.5,I+10)}else _.showText?(t.fillStyle=_.color+f.timeline.markerAlpha,t.fillRect(D,I,x,pe.trackHeight),t.fillStyle=f.emphasis,t.fillText(O,D+pe.trackHeight/2,I+10)):(t.strokeStyle=_.color,t.beginPath(),t.moveTo(D,I+pe.trackHeight/2),t.lineTo(D+x,I+pe.trackHeight/2),t.stroke());const L=_.time+" - "+parseFloat((_.time+_.duration).toFixed(3));h({x:D,y:I,w:Math.max(x,pe.trackHeight),h:pe.trackHeight},{hoverTip:[`[${L}] ${O}`],onMouseUp:H})}else t.fillStyle=_.color,t.beginPath(),t.ellipse(D,I+pe.trackHeight/2,4,4,0,0,2*Math.PI),t.fill(),_.showText&&(t.fillStyle=f.emphasis,t.beginPath(),t.fillText(O,D+pe.trackHeight/2,I+10)),h({x:D-pe.trackHeight/2,y:I,w:pe.trackHeight,h:pe.trackHeight},{hoverTip:[`[${_.time}] ${O}`],onMouseUp:H})}})}function $2(e){const{ctx:t,viewInfo:a,timelineOriginX:o,timelineOriginY:s,elems:c,testInteraction:d}=e,h=a.colors,f=a.renderingProps.scale;t.lineWidth=1,t.strokeStyle=h.timeline.mpTickMark,t.beginPath(),c.forEach(m=>{const R=o+Ze.positionFromTimeAndScale(m.displayTime,f);t.moveTo(R,s),t.lineTo(R,s+pe.renderSlotHeight()),d({x:R-2,y:s,w:4,h:pe.renderSlotHeight()},{hoverTip:[`[${m.displayTime.toFixed(3)}] ${m.sourceDesc}`]})}),t.stroke()}function eF(e){const{ctx:t,viewInfo:a,timelineOriginX:o,timelineOriginY:s,elems:c,testInteraction:d}=e,h=a.colors,f=a.renderingProps.scale;t.lineWidth=1,t.strokeStyle=h.sam.meditation,t.beginPath(),c.forEach(m=>{const R=o+Ze.positionFromTimeAndScale(m.displayTime,f);t.moveTo(R,s),t.lineTo(R,s+pe.renderSlotHeight()),d({x:R-2,y:s,w:4,h:pe.renderSlotHeight()},{hoverTip:[`[${m.displayTime.toFixed(3)}] ${m.sourceDesc}`]})}),t.stroke()}function tF(e){const{ctx:t,viewInfo:a,timelineOriginX:o,timelineOriginY:s,elems:c,testInteraction:d}=e,h=a.colors,f=a.renderingProps.scale;t.lineWidth=1,t.strokeStyle=h.pld.ironWillColor,t.beginPath(),c.forEach(m=>{const R=o+Ze.positionFromTimeAndScale(m.displayTime,f);t.moveTo(R,s),t.lineTo(R,s+pe.renderSlotHeight()),d({x:R-2,y:s,w:4,h:pe.renderSlotHeight()},{hoverTip:[`[${m.displayTime.toFixed(3)}] ${m.sourceDesc}`]})}),t.stroke()}function nF(e){const{ctx:t,viewInfo:a,timelineOriginX:o,timelineOriginY:s,elems:c,testInteraction:d}=e,h=a.colors,f=a.renderingProps.scale;t.font="bold 10px "+Xi,c.forEach(m=>{const R=o+Ze.positionFromTimeAndScale(m.displayTime,f),T=12,S=s+T;t.beginPath(),t.textAlign="center",t.moveTo(R,S-T),t.lineTo(R-T/2,S),t.lineTo(R+T/2,S),t.fillStyle=h.timeline.warningMark,t.fill(),t.fillStyle="white",t.fillText("!",R,S-1);let I="["+m.displayTime.toFixed(3)+"] ";switch(m.warningType.kind){case"combobreak":I+=g({en:"broken combo!",zh:""}).toString();break;case"overcap":I+=Ke(m.warningType.rsc).toString()+g({en:" overcap!",zh:""}).toString();break;case"overwrite":I+=Ke(m.warningType.rsc).toString()+g({en:" overwrite!",zh:""}).toString();break;case"timeout":I+=Ke(m.warningType.rsc).toString()+g({en:" expired!",zh:""});break;default:I+=g({en:m.warningType.en,zh:m.warningType.zh});break}d({x:R-T/2,y:S-T,w:T,h:T},{hoverTip:[I]})})}function YA(e){const{ctx:t,viewInfo:a,timelineOriginX:o,timelineOriginY:s,elems:c,testInteraction:d}=e,{colors:h,renderingProps:f}=a,m=f.scale;c.forEach(R=>{const T=R.type===ot.DamageMark&&Qn(R.displayTime),S=o+Ze.positionFromTimeAndScale(R.displayTime,m);let I="["+R.displayTime.toFixed(3)+"] ";const C=g({en:"Untargetable",zh:""});switch(R.type){case ot.AggroMark:t.fillStyle=h.timeline.aggroMark,I+=g({en:"aggro"});break;case ot.HealingMark:t.fillStyle=h.timeline.healingMark,I+=g({en:"healing potency",zh:""});break;default:t.fillStyle=T?h.timeline.untargetableDamageMark:h.timeline.damageMark,I+=g({en:"damage potency",zh:""})}t.beginPath(),R.type===ot.AggroMark||R.type===ot.DamageMark?(t.moveTo(S-3,s),t.lineTo(S+3,s),t.lineTo(S,s+6)):(t.moveTo(S-3,s+12),t.lineTo(S+3,s+12),t.lineTo(S,s+6)),t.fill();const _=R.buffs.filter(x=>x==="TINCTURE").length>0,O=[],D=[];R.potencyInfos.forEach(x=>{const L=x.sourceDesc.replace("{skill}",fi(x.sourceSkill));if(T)O.push(0 .toFixed(3)+" ("+L+")");else if(x.sourceSkill in Co){const w=g({en:"LB"});O.push(w+" ("+L+")")}else{const w=x.potency.getAmount({tincturePotencyMultiplier:f.tincturePotencyMultiplier,includePartyBuffs:!0,includeSplash:!1});if(x.potency.targetCount>1){const G=w*(1-(x.potency.falloff??1)),B=x.potency.targetCount-1,z=G.toFixed(2)+(B>1?` x ${B}`:""),Q=B>1?g({en:`${L}, ${B} additional targets`,zh:`${L}, ${B} `}):g({en:`${L}, 1 additional target`,zh:`${L}, 1 `});O.push(w.toFixed(2)+" ("+g({en:`${L}, primary target`,zh:`${L}, `})+")"),O.push(z+` (${Q})`)}else O.push(w.toFixed(2)+" ("+L+")");_&&!D.includes(rs.get(k.Tincture))&&D.push(rs.get(k.Tincture)),x.potency.getPartyBuffs().forEach(G=>{const B=rs.get(G);D.includes(B)||D.push()})}});const H=R.type===ot.HealingMark?{x:S-3,y:s+6,w:6,h:6}:{x:S-3,y:s,w:6,h:6};d(H,{hoverTip:T?[I,...O,C]:[I,...O],hoverImages:D})})}function aF(e){const{ctx:t,viewInfo:a,timelineOriginX:o,timelineOriginY:s,elems:c,testInteraction:d}=e,h=a.colors,f=a.renderingProps.scale;t.fillStyle=h.timeline.lucidTickMark,c.forEach(m=>{const R=o+Ze.positionFromTimeAndScale(m.displayTime,f);t.beginPath(),t.moveTo(R-3,s),t.lineTo(R+3,s),t.lineTo(R,s+6),t.fill();const T=`[${m.displayTime.toFixed(3)}] ${m.sourceDesc.replace("{skill}",fi("LUCID_DREAMING"))}`;d({x:R-3,y:s,w:6,h:6},{hoverTip:[T]})})}function iF(e){const{ctx:t,viewInfo:a,timelineOriginX:o,timelineOriginY:s,elems:c,interactive:d,testInteraction:h}=e,{colors:f,renderingProps:m}=a,R=m.scale,T=[],S=[],I=[],C=[],_=[],O=new Map([[k.Tincture,{color:f.timeline.potCover,showImage:!0}],[k.LeyLines,{color:f.timeline.llCover,showImage:!0}],[k.SearingLight,{color:f.smn.searing,showImage:!0}],[k.Hyperphantasia,{color:f.timeline.llCover,showImage:!1}],[k.StarryMuse,{color:f.timeline.buffCover,showImage:!0}],[k.Embolden,{color:f.rdm.emboldenBuff,showImage:!0}],[k.Acceleration,{color:f.rdm.accelBuff,showImage:!0}],[k.TechnicalFinish,{color:f.dnc.esprit,showImage:!0}],[k.Devilment,{color:f.dnc.feathers,showImage:!0}],[k.Fuka,{color:f.timeline.llCover,showImage:!0}],[k.Fugetsu,{color:f.sam.fugetsu,showImage:!0}],[k.NoMercy,{color:f.sam.fugetsu,showImage:!0}],[k.EnhancedPiercingTalon,{color:f.drg.enhancedPiercingTalon,showImage:!0}],[k.PowerSurge,{color:f.drg.powerSurge,showImage:!0}],[k.LifeSurge,{color:f.drg.lifeSurge,showImage:!0}],[k.LanceCharge,{color:f.drg.lanceCharge,showImage:!0}],[k.LifeOfTheDragon,{color:f.drg.lifeOfTheDragon,showImage:!0}],[k.BattleLitany,{color:f.drg.battleLitany,showImage:!0}],[k.DivineMight,{color:f.pld.divineMight,showImage:!0}],[k.Requiescat,{color:f.pld.requiescat,showImage:!0}],[k.FightOrFlight,{color:f.pld.fightOrFlight,showImage:!0}],[k.EnhancedEnpi,{color:f.rdm.accelBuff,showImage:!0}],[k.ArcaneCircle,{color:f.rpr.arcaneCircle,showImage:!0}],[k.DeathsDesign,{color:f.rpr.deathsDesign,showImage:!0}],[k.WanderersMinuet,{color:f.brd.wanderersCoda,showImage:!0}],[k.MagesBallad,{color:f.brd.magesCoda,showImage:!0}],[k.ArmysPaeon,{color:f.brd.armysCoda,showImage:!0}],[k.RagingStrikes,{color:f.brd.ragingStrikes,showImage:!0}],[k.Barrage,{color:f.brd.barrage,showImage:!0}],[k.BattleVoice,{color:f.brd.battleVoice,showImage:!0}],[k.RadiantFinale1,{color:f.brd.radiantFinale,showImage:!0}],[k.RadiantFinale2,{color:f.brd.radiantFinale,showImage:!0}],[k.RadiantFinale3,{color:f.brd.radiantFinale,showImage:!0}],[k.Zoe,{color:f.sge.zoe,showImage:!0}],[k.Autophysis,{color:f.sge.autophysis,showImage:!0}],[k.Krasis,{color:f.sge.krasis,showImage:!0}],[k.Soteria,{color:f.sge.soteria,showImage:!0}],[k.Philosophia,{color:f.sge.philosophia,showImage:!0}],[k.WaxingNocturne,{color:f.blu.moonflute,showImage:!0}],[k.Bristle,{color:f.blu.bristle,showImage:!0}],[k.Whistle,{color:f.blu.whistle,showImage:!0}],[k.TingleA,{color:f.blu.tinglea,showImage:!0}],[k.TingleB,{color:f.blu.tingleb,showImage:!0}],[k.Dokumori,{color:f.nin.dokumori,showImage:!0}],[k.TrickAttack,{color:f.nin.trick,showImage:!0}],[k.KunaisBane,{color:f.nin.trick,showImage:!0}],[k.Bunshin,{color:f.nin.bunshin,showImage:!0}],[k.RiddleOfFire,{color:f.mnk.riddleOfFire,showImage:!0}],[k.Brotherhood,{color:f.mnk.brotherhood,showImage:!0}],[k.Divination,{color:f.ast.div,showImage:!0}],[k.NeutralSect,{color:f.ast.neutral,showImage:!0}],[k.Synastry,{color:f.ast.synastry,showImage:!0}],[k.TheArrow,{color:f.ast.arrow,showImage:!0}],[k.Confession,{color:f.whm.confession,showImage:!0}],[k.Asylum,{color:f.whm.asylum,showImage:!0}],[k.Temperance,{color:f.whm.temperance,showImage:!0}],[k.HuntersInstinct,{color:f.vpr.huntersInstinct,showImage:!0}],[k.Swiftscaled,{color:f.vpr.swiftscaled,showImage:!0}],[k.ChainStratagem,{color:f.sch.chain,showImage:!0}],[k.FeyIllumination,{color:f.sch.feyIllumination,showImage:!0}],[k.Dissipation,{color:f.sch.dissipation,showImage:!0}],[k.Protraction,{color:f.sch.protraction,showImage:!0}],[k.Recitation,{color:f.sch.recitation,showImage:!0}]]),D=new Map;O.forEach((z,Q)=>D.set(Q,[]));const H=[],x=[],L=[],w=s+pe.skillButtonHeight/2;c.forEach(z=>{const Q=z,ce=o+Ze.positionFromTimeAndScale(Q.displayTime,R),ue=Q.isGCD?w+pe.skillButtonHeight/2:w,te=Q.node.targetCount;te>1&&T.push({count:te,x:ce+pe.skillButtonHeight/2,y:ue-5});const ee=2,Ee=Ze.positionFromTimeAndScale(Q.lockDuration,R);if(Q.isSpellCast?(I.push({x:ce+ee,y:ue,w:Ee-ee,h:pe.skillButtonHeight/2}),_.push(ce+Ze.positionFromTimeAndScale(Q.relativeSnapshotTime,R))):S.push({x:ce+ee,y:ue,w:Ee-ee,h:pe.skillButtonHeight}),Q.isGCD){const $=Ze.positionFromTimeAndScale(Q.recastDuration,R);C.push({x:ce+ee,y:ue+pe.skillButtonHeight/2,w:$-ee,h:pe.skillButtonHeight/2})}if(Q.skillName in Co){const $=Ze.positionFromTimeAndScale(Q.recastDuration,R);S.push({x:ce+ee,y:ue+pe.skillButtonHeight/2,w:$-ee,h:pe.skillButtonHeight/2})}Q.node.tmp_invalid_reasons.length>0&&x.push({x:ce,y:s+pe.slotPaddingTop,w:Ze.positionFromTimeAndScale(Q.isGCD?Math.max(Q.recastDuration,Q.lockDuration):Q.lockDuration,R),h:pe.renderSlotHeight()-pe.slotPaddingBottom-pe.slotPaddingTop});let he=0;D.forEach(($,de)=>{Q.node.hasBuff(de)&&(he+=M(he,$))}),Q.node.hasPartyBuff()&&M(he,H);function M($,de){return m.drawOptions.drawBuffIndicators&&de.push({x:ce,y:ue+ya+$*4,w:ya,h:4}),1}dR(Q.skillName)&&L.push({elem:z,x:ce,y:ue})}),t.font="13px "+Xi,t.fillStyle=f.text,t.textAlign="center",T.forEach(z=>{t.fillText("x"+z.count.toString(),z.x,z.y)});const G=z=>{t.rect(z.x,z.y,z.w,z.h),d&&h(z,{onMouseDown:ED})};t.fillStyle=f.timeline.castBar,t.beginPath(),I.forEach(G),t.fill(),t.lineWidth=1,t.strokeStyle="rgba(151, 85, 239, 0.4)",t.beginPath(),_.forEach(z=>{t.moveTo(z,w+ya/2),t.lineTo(z,w+ya)}),t.stroke(),t.fillStyle=f.timeline.gcdBar,t.beginPath(),C.forEach(G),t.fill(),t.fillStyle=f.timeline.lockBar,t.beginPath(),S.forEach(G),t.fill(),D.forEach((z,Q)=>{t.fillStyle=O.get(Q).color,t.beginPath(),z.forEach(G),t.fill()}),t.fillStyle=f.timeline.buffCover,t.beginPath(),H.forEach(G),t.fill(),t.beginPath(),L.forEach(z=>{t.drawImage(dR(z.elem.skillName),z.x,z.y,ya,ya);const Q=z.elem.node,ce=[],ue=[],te=fi(z.elem.skillName)+"@"+z.elem.displayTime.toFixed(3);if(ce.push(te),!((Q.maybeGetActionKey()??"NEVER")in Co)){if(Q.getInitialPotency()){const Ee=Q.getPotency({tincturePotencyMultiplier:m.tincturePotencyMultiplier,includePartyBuffs:!0,includeSplash:!0,untargetable:Qn}).applied;ce.push(g({en:"potency: ",zh:""})+Ee.toFixed(2))}if(Q.getInitialHealingPotency()){const Ee=Q.getHealingPotency({tincturePotencyMultiplier:m.tincturePotencyMultiplier,includeSplash:!0,includePartyBuffs:!0,untargetable:Qn}).applied;ce.push(g({en:"healing potency: "})+Ee.toFixed(2))}}let ee=0;Q.tmp_endLockTime!==void 0&&Q.tmp_startLockTime!==void 0&&(ee=Q.tmp_endLockTime-Q.tmp_startLockTime),ce.push(g({en:"duration: ",zh:""})+ee.toFixed(3)),Q.tmp_invalid_reasons.length>0&&(ce.push(""),ce.push(g({en:"skill is invalid:",zh:""}).toString()),Q.tmp_invalid_reasons.forEach(Ee=>ce.push("- "+ts(Ee)))),O.forEach((Ee,he)=>{Ee.showImage&&Q.hasBuff(he)&&ue.push(rs.get(he))}),Q.getPartyBuffs().forEach(Ee=>{const he=rs.get(Ee);he&&ue.push(he)}),d?h({x:z.x,y:z.y,w:ya,h:ya},{hoverTip:ce,onMouseUp:Ee=>{Ee.draggedSkillElem===void 0&&(Ee.bgSelecting||(p.timeline.onClickTimelineAction(z.elem.actionIndex,Ee.shiftKey),pT()))},onMouseDown:Ee=>{Ee.dragLock||Ee.setDraggedSkillElem(z.elem)},pointerMouse:!0,hoverImages:ue}):h({x:z.x,y:z.y,w:ya,h:ya},{hoverTip:ce,pointerMouse:!1,hoverImages:ue})});const B=t.globalAlpha;return t.fillStyle=f.timeline.invalidBg,t.globalAlpha=.2,t.beginPath(),x.forEach(z=>{t.rect(z.x,z.y,z.w,z.h)}),t.fill(),t.globalAlpha=B,new Map(d?L.map(z=>[z.elem.actionIndex,{x:z.x,y:z.y,w:ya,h:ya}]):[])}function bR(e){const{ctx:t,color:a,x:o,y1:s,y2:c,y3:d,tip:h,width:f,testInteraction:m}=e;t.fillStyle=a,t.beginPath(),t.moveTo(o-3,0),t.lineTo(o+3,0),t.lineTo(o,6),t.fill(),t.lineWidth=1,t.strokeStyle=a,t.setLineDash([]),t.beginPath(),t.moveTo(o,0),t.lineTo(o,s),t.stroke(),t.strokeStyle=a+"9f",t.setLineDash([2,3]),t.beginPath(),t.moveTo(o,s),t.lineTo(o,c),t.stroke();const R=t.lineWidth;f!==void 0&&(t.lineWidth=f),t.strokeStyle=a,t.setLineDash([]),t.beginPath(),t.moveTo(o,c),t.lineTo(o,d),t.stroke(),t.lineWidth=R,t.strokeStyle=a+"9f",t.setLineDash([2,3]),t.beginPath(),t.moveTo(o,d),t.lineTo(o,sf),t.stroke(),h!==void 0&&m?.({x:o-3,y:0,w:6,h:sf},{hoverTip:[h]}),t.setLineDash([])}function mD(e){const{ctx:t,viewInfo:a,originX:o,testInteraction:s}=e,c=e.ignoreVisibleX??!1,{colors:d,renderingProps:h,visibleWidth:f}=a,m=c?Ze.positionFromTimeAndScale(p.game.time+h.countdown,h.scale):f;t.fillStyle=d.timeline.ruler,t.fillRect(0,0,m,pe.rulerHeight),s({x:pe.leftBufferWidth,y:0,w:m-pe.leftBufferWidth,h:pe.rulerHeight},{hoverTip:C=>[(Ze.timeFromPositionAndScale(C.x-o,h.scale)-h.countdown).toFixed(3)],onMouseDown:C=>{const _=Ze.timeFromPositionAndScale(C.x-o,h.scale)-h.countdown;_<p.game.getDisplayTime()&&_>=-p.game.config.countdown?p.displayHistoricalState(_,void 0):p.displayCurrentState()}}),t.lineCap="butt",t.beginPath();const R=h.scale*100,T=h.countdown*R;t.lineWidth=1,t.strokeStyle=d.text,t.textBaseline="alphabetic",t.font="13px "+Xi,t.textAlign="center",t.fillStyle=d.text;const S=50,I=function(C,_,O){const D=C*R,H=o+D+T;H>=-S&&H<=m+S&&(t.moveTo(H,0),t.lineTo(H,_),O&&t.fillText(Ze.displayTime(D/R,0),H,23))};if(R>=6){for(let C=0;C*R<h.timelineWidth-T;C+=1)C%5!==0&&I(C,6,!1);for(let C=-1;C*R>=-T;C-=1)C%5!==0&&I(C,6,!1)}for(let C=0;C*R<h.timelineWidth-T;C+=5)I(C,10,!0);for(let C=-5;C*R>=-T;C-=5)I(C,10,!0);return t.stroke(),pe.rulerHeight}function AD(e){const{ctx:t,viewInfo:a,originX:o,originY:s,testInteraction:c}=e,d=e.ignoreVisibleX??!1,{colors:h,renderingProps:f,visibleWidth:m}=a,R=d?Ze.positionFromTimeAndScale(p.game.time+f.countdown,f.scale):m,T=new Map;f.allMarkers.forEach(_=>{let O=T.get(_.track);O===void 0&&(O=[]),O.push(_),T.set(_.track,O)}),t.beginPath();let S=0,I=!1;for(const _ of T.keys())S=Math.max(S,_+1),_===Ki&&(I=!0);I&&(S+=1);const C=s+S*pe.trackHeight;t.fillStyle=h.timeline.tracks;for(let _=0;_<S;_+=2){const O=C-(_+1)*pe.trackHeight;t.rect(0,O,R,pe.trackHeight)}return t.fill(),J2({ctx:t,viewInfo:a,markerTracksTopY:s,markerTracksBottomY:C,timelineOrigin:o,trackBins:T,testInteraction:c}),S*pe.trackHeight}function RD(e,t){e.fillStyle="rgba(147, 112, 219, 0.15)",e.fillRect(t.x,t.y,t.w,t.h),e.strokeStyle="rgba(147, 112, 219, 0.5)",e.lineWidth=1,e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(t.x,t.y+t.h),e.moveTo(t.x+t.w,t.y),e.lineTo(t.x+t.w,t.y+t.h),e.stroke()}function TD(e){const{ctx:t,viewInfo:a,originX:o,originY:s,isImageExportMode:c,testInteraction:d}=e,{colors:h,renderingProps:f}=a,m=o+Ze.positionFromTimeAndScale(f.countdown,f.scale);let R=new Map;for(let I=0;I<f.slots.length;I++){const C=I===f.activeSlotIndex,_=new Map;if(c&&!C)continue;f.slots[I].elements.forEach(x=>{const L=_.get(x.type)??[];L.push(x),_.set(x.type,L)});let O=s+I*pe.renderSlotHeight();c&&(O=s);const D={ctx:t,viewInfo:a,timelineOriginX:m,timelineOriginY:O,testInteraction:d};f.drawOptions.drawMPTickMarks&&$2({...D,elems:_.get(ot.MPTickMark)??[]}),f.drawOptions.drawHealingMarks&&YA({...D,elems:_.get(ot.HealingMark)??[]}),f.drawOptions.drawDamageMarks&&(YA({...D,elems:_.get(ot.DamageMark)??[]}),YA({...D,elems:_.get(ot.AggroMark)??[]})),f.drawOptions.drawMPTickMarks&&aF({...D,elems:_.get(ot.LucidMark)??[]}),eF({...D,elems:_.get(ot.MeditateTickMark)??[]}),tF({...D,elems:_.get(ot.AutoTickMark)??[]}),nF({...D,elems:_.get(ot.WarningMark)??[]});const H=iF({...D,elems:_.get(ot.Skill)??[],interactive:C});if(C&&(R=H),f.showSelection&&C&&!c){const x=m+Ze.positionFromTimeAndScale(f.selectionStartDisplayTime,f.scale),L=Ze.positionFromTimeAndScale(f.selectionEndDisplayTime-f.selectionStartDisplayTime,f.scale);RD(t,{x,y:O,w:L,h:pe.renderSlotHeight()})}}const T=Ze.positionFromTimeAndScale(f.countdown,f.scale);let S=pe.renderSlotHeight()*f.slots.length;if(f.slots.length<pi&&(S+=pe.addSlotButtonHeight),t.fillStyle=h.timeline.countdown,t.fillRect(o-pe.leftBufferWidth,s,T+pe.leftBufferWidth,S),c)return new Map;for(let I=0;I<f.slots.length;I++){const _={x:0,y:s+I*pe.renderSlotHeight()+1,w:14,h:pe.renderSlotHeight()-2};if(t.fillStyle=I===f.activeSlotIndex?h.accent:h.bgMediumContrast,t.fillRect(_.x,_.y,_.w,_.h),d(_,{hoverTip:I===f.activeSlotIndex?void 0:[g({en:"set active",zh:""})],onMouseUp:(O,D)=>{D&&p.undoStack.doThenPush(new ow(f.activeSlotIndex,I))},pointerMouse:!0}),f.slots.length>1&&I===f.activeSlotIndex){t.fillStyle=h.emphasis,t.font="bold 14px "+Xi,t.textAlign="center",t.fillText("",_.x+_.w/2,_.y+_.h-4);const O={x:_.x,y:_.y+_.h-_.w,w:_.w,h:_.w};d(O,{hoverTip:[g({en:"delete",zh:""})],onMouseUp:(D,H)=>{H&&p.undoStack.doThenPush(new lw(f.activeSlotIndex,p.record.serialized()))},pointerMouse:!0})}}return R}function oF(e){const{ctx:t,viewInfo:a,originX:o,timelineStartY:s,testInteraction:c}=e,{colors:d,renderingProps:h}=a,f=o+Ze.positionFromTimeAndScale(h.countdown,h.scale),m=pe.renderSlotHeight(),R=s+h.activeSlotIndex*m,T=new Map;h.sharedElements.forEach(I=>{const C=T.get(I.type)??[];C.push(I),T.set(I.type,C)});const S={y1:s,y2:R,y3:R+m};(T.get(ot.s_HistoricalCursor)??[]).forEach(I=>{const C=I;if(C.enabled){const _=f+Ze.positionFromTimeAndScale(I.displayTime,h.scale);bR({ctx:t,color:d.historical,x:_,...S,tip:g({en:"cursor: ",zh:""})+C.displayTime.toFixed(3),testInteraction:c})}}),(T.get(ot.s_Cursor)??[]).forEach(I=>{const C=I,_=f+Ze.positionFromTimeAndScale(C.displayTime,h.scale);bR({ctx:t,color:d.emphasis,x:_,...S,tip:g({en:"cursor: ",zh:""})+C.displayTime.toFixed(3),testInteraction:c})})}function lF(e){const{ctx:t,viewInfo:a,timelineStartY:o,mouseX:s,mouseY:c,selectStartX:d,selectStartY:h,interactionInfo:f,dragTargetTime:m}=e,{bgSelecting:R,draggedSkillElem:T}=f,{colors:S,visibleLeft:I,renderingProps:C}=a;if(R){const H={x:Math.min(d,s),y:Math.min(h,c),w:Math.abs(d-s),h:Math.abs(h-c)};RD(t,H)}const O=-I+pe.leftBufferWidth+Ze.positionFromTimeAndScale(C.countdown,C.scale);if(T){const H=t.globalAlpha;t.globalAlpha=.4,t.drawImage(dR(T.skillName),s,c,ya,ya),t.globalAlpha=H}const D=m;if(D!==null){const H=pe.renderSlotHeight(),x=o+C.activeSlotIndex*H,L=O+Ze.positionFromTimeAndScale(D,C.scale);bR({ctx:t,color:S.dropTarget,x:L,y1:o,y2:x,y3:x+H,width:4})}}function sF(e){const{ctx:t,viewInfo:{colors:a,renderingProps:o},originY:s,testInteraction:c}=e;if(o.slots.length<pi){const f={x:4,y:s+2,w:192,h:pe.addSlotButtonHeight-4};t.fillStyle=a.bgLowContrast,t.fillRect(f.x,f.y,f.w,f.h),t.strokeStyle=a.bgHighContrast,t.lineWidth=1,t.strokeRect(f.x,f.y,f.w,f.h),t.font="13px "+Xi,t.fillStyle=a.text,t.textAlign="center",t.fillText(g({en:"Add timeline slot",zh:""}),f.x+f.w/2,f.y+f.h-4),c(f,{onMouseUp:(R,T)=>{T&&p.undoStack.doThenPush(new sw(o.activeSlotIndex))},pointerMouse:!0});const m={x:2*4+192,y:s+2,w:192,h:pe.addSlotButtonHeight-4};return t.fillStyle=a.bgLowContrast,t.fillRect(m.x,m.y,m.w,m.h),t.strokeStyle=a.bgHighContrast,t.lineWidth=1,t.strokeRect(m.x,m.y,m.w,m.h),t.font="13px "+Xi,t.fillStyle=a.text,t.textAlign="center",t.fillText(g({en:"Clone timeline slot",zh:""}),m.x+m.w/2,m.y+m.h-4),c(m,{onMouseUp:(R,T)=>{T&&p.undoStack.doThenPush(new rw(o.activeSlotIndex))},pointerMouse:!0}),pe.addSlotButtonHeight}return 0}function SD(){let e=0,t=!1;for(const a of p.timeline.getAllMarkers()){const o=a.track;e=Math.max(e,o+1),o===Ki&&(t=!0)}return t&&(e+=1),e*pe.trackHeight}function ID(){return pe.rulerHeight+SD()}function rF(e){const{ctx:t,viewInfo:a,testInteraction:o}=e,{renderingProps:s,colors:c,visibleLeft:d,visibleWidth:h}=a,f=-d+pe.leftBufferWidth;let m=0;return t.fillStyle=c.background,t.fillRect(0,0,h+1,s.timelineHeight+1),o({x:0,y:0,w:h,h:sf},{onMouseDown:ED}),m+=mD({ctx:t,originX:f,viewInfo:a,testInteraction:o}),m+=SD(),TD({ctx:t,viewInfo:a,originX:f,originY:m,isImageExportMode:!1,testInteraction:o})}function cF(e){const{ctx:t,viewInfo:a,testInteraction:o}=e,s=-a.visibleLeft+pe.leftBufferWidth,c=AD({ctx:t,viewInfo:a,originX:s,originY:pe.rulerHeight,testInteraction:o});return sF({ctx:t,viewInfo:a,originY:ID()+pe.renderSlotHeight()*a.renderingProps.slots.length,testInteraction:o}),c}function bN(e){const{ctx:t,viewInfo:a,dragTargetTime:o,activeHoverTip:s,activeHoverImages:c,mouseX:d,mouseY:h,selectStartX:f,selectStartY:m,mouseInteractionInfo:R,testInteraction:T}=e,S=-a.visibleLeft+pe.leftBufferWidth,I=ID();oF({ctx:t,viewInfo:a,originX:S,timelineStartY:I,testInteraction:T}),R&&lF({ctx:t,viewInfo:a,timelineStartY:I,mouseX:d,mouseY:h,selectStartX:f,selectStartY:m,interactionInfo:R,dragTargetTime:o}),s!==void 0&&Q2({ctx:t,viewInfo:a,lines:s,images:c,mouseX:d,mouseY:h})}function ON(e,t){const a=e.x+e.w<t.x,o=e.x>t.x+t.w,s=e.y+e.h<t.y,c=e.y>t.y+t.h;return!(a||o||s||c)}function _D(e,t){const[a,o]=e;return a!==void 0&&o!==void 0&&a>t.x&&a<t.x+t.w&&o>t.y&&o<t.y+t.h}function KA(e,t,a){const o=gD(e,t,a);return o!==void 0?o[0]:void 0}function gD(e,t,a){for(const[o,s]of Array.from(a.entries()).reverse())if(_D([e,t],o))return[s,o]}function VA(){return{mouseDown:new Map,mouseUp:new Map,mouseHover:new Map,pointer:new Map}}function lh(e){["mouseDown","mouseHover","mouseUp","pointer"].forEach(t=>e[t].clear())}function uF(e){const t=b.useRef(null),a=b.useRef(null),o=b.useRef(null),s=window.devicePixelRatio,c=e.visibleWidth*s,d=e.timelineHeight*s,h=b.useContext(Rn),f=b.useContext(Zf),m=b.useContext(Pu),R=b.useRef([null,null]),T=b.useRef(0),S=b.useRef(0),I=b.useRef(void 0),C=b.useRef(void 0),_=b.useRef(0),O=b.useRef(0),D=b.useRef({}),[H,x]=b.useState(0),L=b.useRef(new Map),w=b.useRef({live:VA(),interactive:VA(),lowUpdate:VA()});function G(y){const Y=w.current;return new Map([...Y.live[y],...Y.interactive[y],...Y.lowUpdate[y]])}const B=b.useRef(void 0),z=y=>{B.current=y},Q=b.useRef(!1),ce=y=>{Q.current=y},ue=y=>(Y,W)=>{const{hoverTip:j,onMouseUp:Z,onMouseDown:ae,pointerMouse:P,hoverImages:q}=W,se=w.current[y];(j||q)&&se.mouseHover.set(Y,{tip:j,images:q}),Z&&se.mouseUp.set(Y,Z),ae&&se.mouseDown.set(Y,ae),P!==void 0&&se.pointer.set(Y,P)},te=y=>{const Y=-e.visibleLeft-pe.leftBufferWidth,W=e.visibleWidth-Y;y.clearRect(Y,0,W,sf+H)},ee=()=>{const y=D.current.tip,Y={x:T.current,y:S.current,shiftKey:!1,dragLock:m.value,draggedSkillElem:B.current,bgSelecting:Q.current,setDraggedSkillElem:z,setBgSelecting:ce};return{viewInfo:{renderingProps:p.getTimelineRenderingProps(),colors:ia(h),visibleLeft:e.visibleLeft,visibleWidth:e.visibleWidth},dragTargetTime:f.dragTargetTime,mouseX:T.current,mouseY:S.current,selectStartX:_.current,selectStartY:O.current,activeHoverTip:y!==void 0?Array.isArray(y)?y:y(Y):void 0,activeHoverImages:D.current.images,mouseInteractionInfo:Y}},Ee=()=>{const y=a.current?.getContext("2d",{alpha:!0});y&&(y.scale(s,s),te(y),lh(w.current.interactive),bN({ctx:y,...ee(),testInteraction:ue("interactive")}),y.scale(1/s,1/s))},he={onMouseMove:(y,Y)=>{if(T.current=y,S.current=Y,D.current=KA(y,Y,G("mouseHover"))??{},Q.current){const W={x:Math.min(_.current,y),y:Math.min(O.current,Y),w:Math.abs(_.current-y),h:Math.abs(O.current-Y)};let j=null,Z=null;for(const[ae,P]of L.current.entries())if(ON(P,W)){j=ae,Z=ae;break}if(Z!==null)for(const[ae,P]of Array.from(L.current.entries()).reverse()){if(Z>=ae)break;if(ON(P,W)){Z=ae;break}}(j!==R.current[0]||Z!==R.current[1])&&(R.current=[j,Z],j!==null&&Z!==null?(p.record.selectSingle(j),p.record.selectUntil(Z)):p.record.unselectAll(),p.displayCurrentState())}if(B.current){p.record.isInSelection(B.current.actionIndex)||p.timeline.onClickTimelineAction(B.current.actionIndex,!1);const W=-e.visibleLeft+pe.leftBufferWidth;let j=1/0,Z=-1,ae;const P=L.current,q=Array.from(P.entries());for(let _e=0;_e<q.length;_e++){const[ge,ve]=q[_e],Ye=Math.abs(T.current-ve.x);if(ae!==void 0&&Ye>ae)break;Ye<j&&(j=Ye,Z=ge),ae=Ye}let se=1/0;const fe=p.getTimelineRenderingProps(),Se=fe.sharedElements.filter(_e=>_e.type==ot.s_Cursor);let Oe;const Ue=Se[Se.length-1].displayTime+fe.countdown;Se.length>0&&(Oe=W+Ze.positionFromTimeAndScale(Ue,fe.scale),se=Math.abs(T.current-Oe));let me=null;const De=Array.from(P.keys());Oe!==void 0&&se<j&&P.size>0&&Z===De[De.length-1]&&(Z=De[De.length-1]+1,me=Ue-fe.countdown),Z!==-1&&f.dragTargetIndex!==Z&&(me===null&&(Z>0&&!B.current.isGCD?me=p.record.actions[Z-1].tmp_endLockTime??null:me=p.record.actions[Z].tmp_startLockTime??null,me!==null&&(me-=p.gameConfig.countdown)),f.setDragTarget(Z,me))}e.setPointerMouse(KA(y,Y,G("pointer"))??!1),Ee()},onMouseEnter:()=>{},onMouseLeave:()=>{I.current=void 0,C.current=void 0,Q.current=!1,(D.current.tip!==void 0||D.current.images!==void 0)&&(D.current={tip:void 0,images:void 0},Ee())},onMouseUp:(y,Y,W)=>{if(T.current=Y,S.current=W,B.current){const j=f.dragTargetIndex;f.setDragTarget(null,null),z(void 0);let Z=!0;if(j!==null){const ae=p.record.selectionStartIndex??0;let P=j-(ae??0);if(P>0&&(P-=p.record.getSelectionLength()),P!==0){p.undoStack.push(new Eh(ae,p.record.getSelectionLength(),P)),p.record.moveSelected(P),p.autoSave();const q=Zn();vo();const se=p.record.selectionStartIndex;se!==void 0?p.displayHistoricalState(q.skillUseTimes[se],se):p.displayCurrentState(),Z=!1}}Z&&Ee()}if(!p.inputLocked){const j=gD(Y,W,G("mouseUp"));if(j!==void 0){const[Z,ae]=j;Z({x:Y,y:W,shiftKey:y.shiftKey,dragLock:m.value,bgSelecting:Q.current,setDraggedSkillElem:z,setBgSelecting:ce},_D([I.current,C.current],ae))}}Q.current=!1},onMouseDown:(y,Y)=>{if(I.current=y,C.current=Y,T.current=y,S.current=Y,!p.inputLocked){const W=G("mouseDown");_.current=y,O.current=Y,KA(y,Y,W)?.({x:y,y:Y,shiftKey:!1,dragLock:m.value,bgSelecting:Q.current,setDraggedSkillElem:z,setBgSelecting:ce})}},onKeyDown:y=>{p.handleTimelineKeyboardEvent(y),p.inputLocked||y.key==="Escape"&&(f.setDragTarget(null,null),z(void 0))}};b.useEffect(()=>e.setCallbacks(he),[f.dragTargetTime,m.value]);const M=()=>{const[y,Y,W]=[t,a,o].map((j,Z)=>j.current?.getContext("2d",{alpha:Z!==0}));if(y&&Y&&W){[y,Y,W].forEach(Z=>Z.scale(s,s)),lh(w.current.live),lh(w.current.interactive),lh(w.current.lowUpdate),[Y,W].forEach(Z=>te(Z));const j={renderingProps:p.getTimelineRenderingProps(),colors:ia(h),visibleLeft:e.visibleLeft,visibleWidth:e.visibleWidth};L.current=rF({ctx:y,viewInfo:j,testInteraction:ue("live")}),bN({ctx:Y,...ee(),testInteraction:ue("interactive")}),x(cF({ctx:W,viewInfo:j,testInteraction:ue("lowUpdate")})),[y,Y,W].forEach(Z=>Z.scale(1/s,1/s))}};b.useEffect(Ee,[f.dragTargetTime]),b.useEffect(()=>{m.value||(Ee(),f.setDragTarget(null,null),z(void 0))},[m.value]),b.useEffect(M,[T,S,e.version,s]),b.useEffect(()=>{M(),e.setCallbacks(he)},[e.visibleLeft,e.visibleWidth]);const K={width:e.visibleWidth,height:e.timelineHeight,position:"absolute",pointerEvents:"none",cursor:e.pointerMouse?"pointer":"default",left:0,top:0},$=Math.ceil(c),de=Math.ceil(d);return l.jsxs("div",{style:{position:"relative"},children:[l.jsx("canvas",{ref:t,width:$,height:de,tabIndex:0,style:{...K,zIndex:0}}),l.jsx("canvas",{ref:o,width:$,height:de,tabIndex:-1,style:{...K,zIndex:1,backgroundColor:"transparent"}}),l.jsx("canvas",{ref:a,width:$,height:de,tabIndex:-1,style:{...K,zIndex:2,backgroundColor:"transparent"}})]})}const eS=b.createContext(void 0),tS=b.createContext(void 0);function dF(){const e=b.useContext(tS),t=b.useContext(eS);if(!(t===void 0&&e===void 0))return{...e,...t}}function Cs(){const e=b.useContext(tS),t=b.useContext(eS);if(t===void 0)throw new Error("Base UI: DialogRootContext is missing. Dialog parts must be placed within <Dialog.Root>.");return{...e,...t}}const hF={...bf,...AT},pD=b.forwardRef(function(t,a){const{render:o,className:s,forceRender:c=!1,...d}=t,{open:h,nested:f,mounted:m,transitionStatus:R,backdropRef:T}=Cs(),S=b.useMemo(()=>({open:h,transitionStatus:R}),[h,R]);return Ji("div",t,{state:S,ref:[T,a],customStyleHookMapping:hF,props:[{role:"presentation",hidden:!m,style:{userSelect:"none",WebkitUserSelect:"none"}},d],enabled:c||!f})}),fF=b.createContext(void 0);function EF(e=!1){const t=b.useContext(fF);if(t===void 0&&!e)throw new Error("Base UI: CompositeRootContext is missing. Composite parts must be placed within <Composite.Root>.");return t}function mF(e){const{focusableWhenDisabled:t,disabled:a,composite:o=!1,tabIndex:s=0,isNativeButton:c}=e,d=o&&t!==!1,h=o&&t===!1;return{props:b.useMemo(()=>{const m={onKeyDown(R){a&&t&&R.key!=="Tab"&&R.preventDefault()}};return o||(m.tabIndex=s,!c&&a&&(m.tabIndex=t?s:-1)),(c&&(t||d)||!c&&a)&&(m["aria-disabled"]=a),c&&(!t||h)&&(m.disabled=a),m},[o,a,t,d,h,c,s])}}function ND(e={}){const{disabled:t=!1,focusableWhenDisabled:a,tabIndex:o=0,native:s=!0}=e,c=b.useRef(null),d=EF(!0)!==void 0,h=lt(()=>{const R=c.current;return!!(R?.tagName==="A"&&R?.href)}),{props:f}=mF({focusableWhenDisabled:a,disabled:t,composite:d,tabIndex:o,isNativeButton:s});return kt(()=>{const R=c.current;R instanceof HTMLButtonElement&&d&&t&&f.disabled===void 0&&R.disabled&&(R.disabled=!1)},[t,f.disabled,d]),{getButtonProps:b.useCallback((R={})=>{const{onClick:T,onMouseDown:S,onKeyUp:I,onKeyDown:C,onPointerDown:_,...O}=R;return RT({type:s?"button":void 0,onClick(H){if(t){H.preventDefault();return}T?.(H)},onMouseDown(H){t||S?.(H)},onKeyDown(H){if(t||(uR(H),C?.(H)),H.baseUIHandlerPrevented)return;const x=H.target===H.currentTarget&&!s&&!h()&&!t,L=H.key==="Enter",w=H.key===" ";x&&((w||L)&&H.preventDefault(),L&&T?.(H))},onKeyUp(H){t||(uR(H),I?.(H)),!H.baseUIHandlerPrevented&&H.target===H.currentTarget&&!s&&!t&&H.key===" "&&T?.(H)},onPointerDown(H){if(t){H.preventDefault();return}_?.(H)}},s?void 0:{role:"button"},f,O)},[t,f,s,h]),buttonRef:c}}function AF(e){const{open:t,setOpen:a,disabled:o,nativeButton:s}=e,c=lt(m=>{t&&a(!1,m.nativeEvent,"close-press")}),{getButtonProps:d,buttonRef:h}=ND({disabled:o,native:s});return{getRootProps:m=>RT({onClick:c},m,d),ref:h}}const CD=b.forwardRef(function(t,a){const{render:o,className:s,disabled:c=!1,nativeButton:d=!0,...h}=t,{open:f,setOpen:m}=Cs(),{getRootProps:R,ref:T}=AF({disabled:c,open:f,setOpen:m,nativeButton:d}),S=b.useMemo(()=>({disabled:c}),[c]);return Ji("button",t,{state:S,ref:[a,T],props:[h,R]})});function bD(e){return gf(e,"base-ui")}const OD=b.forwardRef(function(t,a){const{render:o,className:s,id:c,...d}=t,{setDescriptionElementId:h}=Cs(),f=bD(c);return kt(()=>(h(f),()=>{h(void 0)}),[f,h]),Ji("p",t,{ref:a,props:[{id:f},d]})});function RF(e){return cb(19)?e:e?"true":void 0}const DD="ArrowUp",yD="ArrowDown",vD="ArrowLeft",MD="ArrowRight",LD="Home",xD="End",TF=new Set([vD,MD]),SF=new Set([DD,yD]),IF=new Set([...TF,...SF]);[...IF];const _F=new Set([DD,yD,vD,MD,LD,xD]);function gF(e){const{descriptionElementId:t,initialFocus:a,mounted:o,openMethod:s,ref:c,setPopupElement:d,titleElementId:h}=e,f=b.useRef(null),m=jr(c,f,d),R=b.useCallback(I=>I==="touch"?f:0,[]),T=b.useMemo(()=>a==null?R(s??""):typeof a=="function"?a(s??""):a,[R,a,s]);return{popupProps:{"aria-labelledby":h??void 0,"aria-describedby":t??void 0,role:"dialog",tabIndex:-1,ref:m,hidden:!o,onKeyDown(I){_F.has(I.key)&&I.stopPropagation()}},resolvedInitialFocus:T}}let pF=function(e){return e.nestedDialogs="--nested-dialogs",e}({}),NF=function(e){return e[e.open=Jl.open]="open",e[e.closed=Jl.closed]="closed",e[e.startingStyle=Jl.startingStyle]="startingStyle",e[e.endingStyle=Jl.endingStyle]="endingStyle",e.nested="data-nested",e.nestedDialogOpen="data-nested-dialog-open",e}({});const CF=b.forwardRef(function(t,a){const{cutout:o,...s}=t;let c;if(o){const d=o?.getBoundingClientRect();c=`polygon(
      0% 0%,
      100% 0%,
      100% 100%,
      0% 100%,
      0% 0%,
      ${d.left}px ${d.top}px,
      ${d.left}px ${d.bottom}px,
      ${d.right}px ${d.bottom}px,
      ${d.right}px ${d.top}px,
      ${d.left}px ${d.top}px
    )`}return l.jsx("div",{ref:a,role:"presentation","data-base-ui-inert":"",...s,style:{position:"fixed",inset:0,userSelect:"none",WebkitUserSelect:"none",clipPath:c}})}),HD=b.createContext(void 0);function bF(){const e=b.useContext(HD);if(e===void 0)throw new Error("Base UI: <Dialog.Portal> is missing.");return e}const OF={...bf,...AT,nestedDialogOpen(e){return e?{[NF.nestedDialogOpen]:""}:null}},kD=b.forwardRef(function(t,a){const{className:o,finalFocus:s,initialFocus:c,render:d,...h}=t,{descriptionElementId:f,dismissible:m,floatingRootContext:R,getPopupProps:T,modal:S,mounted:I,nested:C,nestedOpenDialogCount:_,open:O,openMethod:D,popupRef:H,setPopupElement:x,titleElementId:L,transitionStatus:w,onOpenChangeComplete:G,internalBackdropRef:B}=Cs();bF(),Cf({open:O,ref:H,onComplete(){O&&G?.(!0)}});const z=jr(a,H),{popupProps:Q,resolvedInitialFocus:ce}=gF({descriptionElementId:f,initialFocus:c,mounted:I,openMethod:D,ref:z,setPopupElement:x,titleElementId:L}),ue=_>0,te=b.useMemo(()=>({open:O,nested:C,transitionStatus:w,nestedDialogOpen:ue}),[O,C,w,ue]),ee=Ji("div",t,{state:te,props:[T(),Q,{style:{[pF.nestedDialogs]:_}},h],customStyleHookMapping:OF});return l.jsxs(b.Fragment,{children:[I&&S===!0&&l.jsx(CF,{ref:B,inert:RF(!O)}),l.jsx(Mk,{context:R,disabled:!I,closeOnFocusOut:m,initialFocus:ce,returnFocus:s,modal:S!==!1,children:ee})]})});function UD(e){const{children:t,keepMounted:a=!1,container:o}=e,{mounted:s}=Cs();return s||a?l.jsx(HD.Provider,{value:a,children:l.jsx(bk,{root:o,children:t})}):null}const DF=()=>{};let DN={},yN={},vN="";function yF(e){if(typeof document>"u")return!1;const t=Zr(e);return wn(t).innerWidth-t.documentElement.clientWidth>0}function vF(e){const a=Zr(e).documentElement,o=a.style.overflow;return a.style.overflow="hidden",()=>{a.style.overflow=o}}function MF(e){const t=Zr(e),a=t.documentElement,o=t.body,s=wn(a);let c=0,d=0;const h=ji.create();if(NC&&(s.visualViewport?.scale??1)!==1)return()=>{};function f(){const T=s.getComputedStyle(a),S=s.getComputedStyle(o);c=a.scrollTop,d=a.scrollLeft,DN={scrollbarGutter:a.style.scrollbarGutter,overflowY:a.style.overflowY,overflowX:a.style.overflowX},vN=a.style.scrollBehavior,yN={position:o.style.position,height:o.style.height,width:o.style.width,boxSizing:o.style.boxSizing,overflowY:o.style.overflowY,overflowX:o.style.overflowX,scrollBehavior:o.style.scrollBehavior};const I=typeof CSS<"u"&&CSS.supports?.("scrollbar-gutter","stable"),C=a.scrollHeight>a.clientHeight,_=a.scrollWidth>a.clientWidth,O=T.overflowY==="scroll"||S.overflowY==="scroll",D=T.overflowX==="scroll"||S.overflowX==="scroll",H=Math.max(0,s.innerWidth-a.clientWidth),x=Math.max(0,s.innerHeight-a.clientHeight),L=parseFloat(S.marginTop)+parseFloat(S.marginBottom),w=parseFloat(S.marginLeft)+parseFloat(S.marginRight);Object.assign(a.style,{scrollbarGutter:"stable",overflowY:!I&&(C||O)?"scroll":"hidden",overflowX:!I&&(_||D)?"scroll":"hidden"}),Object.assign(o.style,{position:"relative",height:L||x?`calc(100dvh - ${L+x}px)`:"100dvh",width:w||H?`calc(100vw - ${w+H}px)`:"100vw",boxSizing:"border-box",overflow:"hidden",scrollBehavior:"unset"}),o.scrollTop=c,o.scrollLeft=d,a.setAttribute("data-base-ui-scroll-locked",""),a.style.scrollBehavior="unset"}function m(){Object.assign(a.style,DN),Object.assign(o.style,yN),a.scrollTop=c,a.scrollLeft=d,a.removeAttribute("data-base-ui-scroll-locked"),a.style.scrollBehavior=vN}function R(){m(),h.request(f)}return f(),s.addEventListener("resize",R),()=>{h.cancel(),m(),s.removeEventListener("resize",R)}}class LF{lockCount=0;restore=null;timeoutLock=Rl.create();timeoutUnlock=Rl.create();acquire(t){return this.lockCount+=1,this.lockCount===1&&this.restore===null&&this.timeoutLock.start(0,()=>this.lock(t)),this.release}release=()=>{this.lockCount-=1,this.lockCount===0&&this.restore&&this.timeoutUnlock.start(0,this.unlock)};unlock=()=>{this.lockCount===0&&this.restore&&(this.restore?.(),this.restore=null)};lock(t){if(this.lockCount===0||this.restore!==null)return;const o=Zr(t).documentElement,s=wn(o).getComputedStyle(o).overflowY;if(s==="hidden"||s==="clip"){this.restore=DF;return}const c=bH||!yF(t);this.restore=c?vF(t):MF(t)}}const xF=new LF;function HF(e){const{enabled:t=!0,mounted:a,open:o,referenceElement:s=null}=e;kt(()=>{if(t&&NC&&a&&!o){const c=Zr(s),d=c.body.style.userSelect,h=c.body.style.webkitUserSelect;return c.body.style.userSelect="none",c.body.style.webkitUserSelect="none",()=>{c.body.style.userSelect=d,c.body.style.webkitUserSelect=h}}},[t,a,o,s]),kt(()=>{if(t)return xF.acquire(s)},[t,s])}function kF(e){const t=b.useRef(""),a=b.useCallback(s=>{s.defaultPrevented||(t.current=s.pointerType,e(s,s.pointerType))},[e]);return{onClick:b.useCallback(s=>{if(s.detail===0){e(s,"keyboard");return}"pointerType"in s&&e(s,s.pointerType),e(s,t.current),t.current=""},[e]),onPointerDown:a}}function UF(e){const[t,a]=b.useState(null),o=lt((h,f)=>{e||a(f)}),s=lt(()=>{a(null)}),{onClick:c,onPointerDown:d}=kF(o);return b.useMemo(()=>({openMethod:t,reset:s,triggerProps:{onClick:c,onPointerDown:d}}),[t,s,c,d])}function PF(e){const{defaultOpen:t,dismissible:a,modal:o,onNestedDialogClose:s,onNestedDialogOpen:c,onOpenChange:d,open:h,onOpenChangeComplete:f}=e,[m,R]=TC({controlled:h,default:t,name:"DialogRoot",state:"open"}),T=b.useRef(null),S=b.useRef(null),I=b.useRef(null),[C,_]=b.useState(void 0),[O,D]=b.useState(void 0),[H,x]=b.useState(null),[L,w]=b.useState(null),{mounted:G,setMounted:B,transitionStatus:z}=ob(m),{openMethod:Q,triggerProps:ce,reset:ue}=UF(m),te=lt((q,se,fe)=>{d?.(q,se,fe),R(q)}),ee=lt(()=>{B(!1),f?.(!1),ue()});Cf({enabled:!e.actionsRef,open:m,ref:T,onComplete(){m||ee()}}),b.useImperativeHandle(e.actionsRef,()=>({unmount:ee}),[ee]);const he=mT({elements:{reference:H,floating:L},open:m,onOpenChange:(q,se,fe)=>{te(q,se,lb(fe))}}),[M,K]=b.useState(0),$=M===0,de=bU(he),y=xk(he),Y=ab(he,{outsidePressEvent:"intentional",outsidePress(q){if(q.button!==0)return!1;const se=ja(q);if($&&a){const fe=se;return o?fe?I.current===fe||S.current===fe:!1:!0}return!1},escapeKey:$});HF({enabled:m&&o===!0,mounted:G,open:m,referenceElement:L});const{getReferenceProps:W,getFloatingProps:j}=ib([de,y,Y]);b.useEffect(()=>(c&&m&&c(M),s&&!m&&s(),()=>{s&&m&&s()}),[m,s,c,M]);const Z=b.useCallback(q=>{K(q+1)},[]),ae=b.useCallback(()=>{K(0)},[]),P=b.useMemo(()=>W(ce),[W,ce]);return b.useMemo(()=>({modal:o,setOpen:te,open:m,titleElementId:C,setTitleElementId:_,descriptionElementId:O,setDescriptionElementId:D,onNestedDialogOpen:Z,onNestedDialogClose:ae,nestedOpenDialogCount:M,openMethod:Q,mounted:G,transitionStatus:z,triggerProps:P,getPopupProps:j,setTriggerElement:x,setPopupElement:w,popupRef:T,backdropRef:S,internalBackdropRef:I,floatingRootContext:he}),[o,te,m,C,O,Z,ae,M,Q,G,z,P,j,he])}const PD=function(t){const{children:a,defaultOpen:o=!1,dismissible:s=!0,modal:c=!0,onOpenChange:d,open:h,actionsRef:f,onOpenChangeComplete:m}=t,R=dF(),T=PF({open:h,defaultOpen:o,onOpenChange:d,modal:c,dismissible:s,actionsRef:f,onOpenChangeComplete:m,onNestedDialogClose:R?.onNestedDialogClose,onNestedDialogOpen:R?.onNestedDialogOpen}),S=!!R,I=b.useMemo(()=>({...T,nested:S,onOpenChangeComplete:m}),[T,S,m]),C=b.useMemo(()=>({dismissible:s}),[s]);return l.jsx(eS.Provider,{value:I,children:l.jsx(tS.Provider,{value:C,children:a})})},wD=b.forwardRef(function(t,a){const{render:o,className:s,id:c,...d}=t,{setTitleElementId:h}=Cs(),f=bD(c);return kt(()=>(h(f),()=>{h(void 0)}),[f,h]),Ji("h2",t,{ref:a,props:[{id:f},d]})}),GD=b.forwardRef(function(t,a){const{render:o,className:s,disabled:c=!1,nativeButton:d=!0,...h}=t,{open:f,setTriggerElement:m,triggerProps:R}=Cs(),T=b.useMemo(()=>({disabled:c,open:f}),[c,f]),{getButtonProps:S,buttonRef:I}=ND({disabled:c,native:d});return Ji("button",t,{state:T,ref:[I,a,m],props:[R,{[WC]:""},h,S],customStyleHookMapping:rb})}),BD=window.location.hostname==="xivintheshell.com"?"a023d800-1740-426a-8134-915efc395aa3":window.location.hostname==="beta.xivintheshell.com"?"a0281008-3d39-4afc-81b4-a8ddbf7cbd44":window.location.host==="localhost:3000"?"a028101a-803b-4ad4-99b6-bacb8484e214":window.location.host==="localhost:4173"?"a0281237-7471-47d4-b33c-52a6cbaed4c1":"",wF="https://www.fflogs.com/oauth/authorize",GF="https://www.fflogs.com/oauth/token";function BF(){const e=new Uint8Array(64);return window.crypto.getRandomValues(e),Array.from(e,t=>t.toString(16).padStart(2,"0")).join("")}async function FF(e){const a=new TextEncoder().encode(e),o=await window.crypto.subtle.digest("SHA-256",a);return btoa(String.fromCharCode(...new Uint8Array(o))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}const rf="pkceCodeVerifier",gu="pkceStateBlob";async function MN(){const e=BF(),t=await FF(e),a=window.crypto.randomUUID();localStorage.getItem(rf)===null&&window.localStorage.setItem(rf,e),window.localStorage.getItem(gu)===null&&window.localStorage.setItem(gu,a);const o=new URLSearchParams({client_id:BD,code_challenge:t,code_challenge_method:"S256",state:a,redirect_uri:window.location.origin,response_type:"code"});window.location.href=`${wF}?${o.toString()}`}function Dh(){window.localStorage.removeItem(rf),window.localStorage.removeItem(gu)}var yh=(e=>(e[e.UNAUTHORIZED=0]="UNAUTHORIZED",e[e.NO_PKCE_VERIFIER=1]="NO_PKCE_VERIFIER",e[e.BAD_PKCE_STATE=2]="BAD_PKCE_STATE",e[e.SUCCESS=3]="SUCCESS",e[e.FAILURE=4]="FAILURE",e))(yh||{});async function LN(){const e=new URLSearchParams(window.location.search);window.history.replaceState({},"",window.location.pathname);const t=e.get("code"),a=window.localStorage.getItem(rf),o=window.localStorage.getItem(gu);if(!t)return 0;if(!a)return console.error("PKCE verifier could not be retrieved"),Dh(),1;e.get("state")!==o&&(console.error("PKCE response did not have expected state; force setting new value"),console.log("expected:",o),console.log("actual:",e.get("state")),window.localStorage.setItem(gu,e.get("state")));const s=new URLSearchParams({client_id:BD,code_verifier:a,redirect_uri:window.location.origin,grant_type:"authorization_code",code:t});try{const c=await fetch(GF,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:s.toString()});if(c.ok){const d=await c.json();return window.sessionStorage.setItem("fflogsAuthToken",d.access_token),console.log("saved auth tokens to sessionStorage"),3}else return console.log("PKCE response was not ok; clearing intermediate state"),console.error(c),Dh(),4}catch(c){return console.log("PKCE exchange failed; clearing intermediate state"),console.error(c),Dh(),4}}function jF(e){const t=URL.parse(e.replace("#","?"));if(t===null)return{apiBaseUrl:"",reportCode:"",error:{en:"invalid URL",zh:""}};if(t.hostname!=="www.fflogs.com"&&t.hostname!=="cn.fflogs.com")return{apiBaseUrl:"",reportCode:"",error:{en:"must be a link to www.fflogs.com or cn.fflogs.com",zh:"www.fflogs.comcn.fflogs.com"}};const a=t.pathname.split("/").filter(m=>m.length>0);if(a.length!==2)return console.error("parsed link parts:",a),{apiBaseUrl:"",reportCode:"",error:{en:"link must contain a single report",zh:""}};console.assert(a.length>0);const o=a[a.length-1],s=t.searchParams,c=parseInt(s.get("fight")??"NaN"),d=isNaN(c)?void 0:c,h=parseInt(s.get("source")??"NaN"),f=isNaN(h)?void 0:h;return{apiBaseUrl:`https://${t.hostname}/api/v2/user/`,reportCode:o,fightID:d,playerID:f}}const FD=new Map([["Paladin","PLD"],["Warrior","WAR"],["DarkKnight","DRK"],["Gunbreaker","GNB"],["WhiteMage","WHM"],["Scholar","SCH"],["Astrologian","AST"],["Sage","SGE"],["Monk","MNK"],["Dragoon","DRG"],["Ninja","NIN"],["Viper","VPR"],["Samurai","SAM"],["Reaper","RPR"],["Bard","BRD"],["Machinist","MCH"],["Dancer","DNC"],["BlackMage","BLM"],["Summoner","SMN"],["RedMage","RDM"],["Pictomancer","PCT"],["BlueMage","BLU"]]),xN=new Set([7,8,33218,34682]),nl={TEMPERA_COAT:1003686,TEMPERA_GRASSA:1003687,BLACKEST_NIGHT:1001178,TENGENTSU:1003853,THIRD_EYE:1001232,CREST_OF_TIME_BORROWED:1002596,COLD_FOG:1002493},zF=new Map([["TEMPERA_COAT_POP","TEMPERA_COAT"],["TEMPERA_GRASSA_POP","TEMPERA_GRASSA"],["THE_BLACKEST_NIGHT_POP","THE_BLACKEST_NIGHT"],["TENGENTSU_POP","TENGENTSU"],["THIRD_EYE_POP","THIRD_EYE"],["ARCANE_CREST_POP","ARCANE_CREST"],["POP_COLD_FOG","COLD_FOG"]]),YF=`
query ListReportFights($reportCode: String) {
	reportData {
		report(code: $reportCode) {
			fights {
				bossPercentage
				encounterID
				id
				name
				kill
				startTime
			}
			startTime
		}
	}
}`,KF=`
query ListReportFightIDs($reportCode: String) {
	reportData {
		report(code: $reportCode) {
			fights {
				id
			}
		}
	}
}`,VF=`
query ListFightPlayers($reportCode: String, $fightID: Int) {
	reportData {
		report(code: $reportCode) {
			fights(fightIDs: [$fightID]) {
				bossPercentage
				encounterID
				id
				name
				kill
				startTime
			}
			startTime
			playerDetails(fightIDs: [$fightID])
		}
	}
}`,WF=`
query GetPlayerEvents($reportCode: String, $fightID: Int, $playerID: Int) {
	reportData {
		report(code: $reportCode) {
			events(sourceID: $playerID, fightIDs: [$fightID]) {
				data
				nextPageTimestamp
			}
			fights(fightIDs: [$fightID]) {
				name
				combatTime
				startTime
				endTime
			}
			playerDetails(fightIDs: [$fightID])
		}
	}
}`;async function qf(e,t,a){const o={method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${window.sessionStorage.getItem("fflogsAuthToken")}`},body:JSON.stringify({query:t,variables:a})};return fetch(e,o).then(s=>s.json()).then(s=>{if(s.error!==void 0)throw new Error(s.error);if(s.errors!==void 0)throw new Error(s.errors);return s.data})}const HN=new Map;function jD(e,t){const a=t.bossPercentage===null?g({en:"(trash)",zh:""}).toString():t.bossPercentage.toFixed(1)+"%";return{label:{en:`${t.name} - ${t.kill?"kill":a}`,zh:`${t.name} - ${t.kill?"":a}`},id:t.id,unixStartTime:e+t.startTime}}async function XF(e,t){const a=HN.get(t);if(a!==void 0)return a;const o=await qf(e,YF,{reportCode:t}),s=o.reportData.report.startTime,c=o.reportData.report.fights.map(d=>jD(s,d));return HN.set(t,c),c}async function qF(e,t){const o=(await qf(e,KF,{reportCode:t})).reportData.report.fights.map(s=>s.id);return Math.max(...o)}function zD(e){return`${e.name??g({en:"(name unknown)",zh:""})} @ ${e.server??g({en:"(world unknown)",zh:""})}`}const sh=new Map;async function kN(e,t,a){const o=sh.get(t)?.get(a);if(o!==void 0)return o;const s=await qf(e,VF,{reportCode:t,fightID:a}),c=Object.values(s.reportData.report.playerDetails.data.playerDetails).flat().map(f=>({id:f.id,name:zD(f),job:FD.get(f.type)??"???"})),d=s.reportData.report.startTime,h=jD(d,s.reportData.report.fights[0]);return sh.has(t)?sh.get(t).set(a,[h,c]):sh.set(t,new Map([[a,[h,c]]])),[h,c]}const Sr=new Map;async function UN(e){const t=Sr.get(e.reportCode)?.get(e.fightID)?.get(e.playerID);if(t!==void 0)return console.log("query cache hit for",e),t;const a=await qf(e.apiBaseUrl,WF,e),o=Object.values(a.reportData.report.playerDetails.data.playerDetails).flat().filter(O=>O.id===e.playerID)[0],s=FD.get(o.type),c=zD(o);let d,h;const f=a.reportData.report.fights[0],m=[],R=[];let T;const S=new Map,I=new Map;for(let O of a.reportData.report.events.data)if(O.sourceID===e.playerID)if(O.type==="cast"&&!xN.has(O.abilityGameID))T!==void 0&&(T.abilityGameID===O.abilityGameID&&(O=T),T=void 0),m.push(O),R.push(O.timestamp);else if(O.type==="begincast"&&!xN.has(O.abilityGameID))T=O;else if(O.type==="combatantinfo")d=O.level,h={main:O[dt[s].mainStat],spellSpeed:O.spellSpeed,skillSpeed:O.skillSpeed,criticalHit:O.criticalHit,directHit:O.directHit,determination:O.determination,piety:O.piety,tenacity:O.tenacity};else if(O.type==="removebuff"){let D;const H=O.timestamp,x=O.abilityGameID;s==="PCT"&&O.targetID===e.playerID?x===nl.TEMPERA_COAT?D="TEMPERA_COAT_POP":x===nl.TEMPERA_GRASSA&&(D="TEMPERA_GRASSA_POP"):s==="DRK"?x===nl.BLACKEST_NIGHT&&(D="THE_BLACKEST_NIGHT_POP"):s==="SAM"&&O.targetID===e.playerID?x===nl.TENGENTSU?D="TENGENTSU_POP":x===nl.THIRD_EYE&&(D="THIRD_EYE_POP"):s==="RPR"&&O.targetID===e.playerID?x===nl.CREST_OF_TIME_BORROWED&&(D="ARCANE_CREST_POP"):s==="BLU"&&O.targetID===e.playerID&&x===nl.COLD_FOG&&(D="POP_COLD_FOG"),D!==void 0&&(S.has(D)?S.get(D).add(H):S.set(D,new Set([H])))}else O.type==="applybuff"&&O.targetID===e.playerID&&s==="PCT"&&O.abilityGameID===nl.TEMPERA_GRASSA&&(I.has("TEMPERA_GRASSA")||I.set("TEMPERA_GRASSA",new Set),I.get("TEMPERA_GRASSA").add(O.timestamp));I.get("TEMPERA_GRASSA")?.forEach(O=>S.get("TEMPERA_COAT_POP")?.delete(O));const C=m.map(O=>{const D=O.abilityGameID,H=Di.get(D)??(D>34e6?"TINCTURE":"NEVER");return H==="NEVER"&&console.error("unknown action id",D),{type:ze.Skill,skillName:H,targetCount:1,healTargetCount:void 0}}),_={playerName:c,job:s,level:d,statsInLog:h!==void 0&&Object.values(h).every(O=>O!==void 0),inferredConfig:h,buffRemovalActions:Array.from(S.entries().flatMap(([O,D])=>D.entries().map(([H])=>({popKey:O,applyKey:zF.get(O),timestamp:H})))).sort((O,D)=>O.timestamp-D.timestamp),actions:C,timestamps:R,combatStartTime:f.endTime-f.combatTime};return Sr.has(e.reportCode)?Sr.get(e.reportCode).has(e.fightID)?Sr.get(e.reportCode).get(e.fightID).set(e.playerID,_):Sr.get(e.reportCode).set(e.fightID,new Map([[e.playerID,_]])):Sr.set(e.reportCode,new Map([[e.fightID,new Map([[e.playerID,_]])]])),_}const rh={width:"100%",height:"1.6em",outline:"none"};function*ZF(e,t){const a=p.gameConfig.serialized(),o={...a,procMode:ua.Always,job:e.job,initialResourceOverrides:e.job===a.job?a.initialResourceOverrides:[]};for(const[D,H]of Object.entries(e.inferredConfig??{}))typeof H=="number"&&(o[D]=H);e.level!==void 0&&(o.level=e.level),p.setConfigAndRestart(o,t||o.job!==a.job||a.procMode!==o.procMode);const s=p.record.length,c=e.actions;if(console.assert(c.length===e.timestamps.length),c.length===0)return yield{processed:0,total:0,deltas:[],spilledDeltas:0},[];const d=c.map(D=>new Ya(D)),f=(e.timestamps[0]-e.combatStartTime)/1e3,m=p.game.getSkillAvailabilityStatus(c[0].skillName).castTime,R=m>0?f-m+li.getSlidecastWindow(m):f;d.unshift(rl(R)),console.log("initial jump time:",f),-R>p.gameConfig.countdown&&p.setConfigAndRestart({...o,countdown:-Math.floor(R)}),p.insertRecordNodes(d,s);const T={processed:1,total:c.length,deltas:[],spilledDeltas:0};let S=1;const I=p.gameConfig.countdown,C=e.buffRemovalActions[Symbol.iterator]();let _=C.next();for(let D=1;D<c.length;D++){const H=c[D],x=s+D+S,L=p.record.actions[x],w=(e.timestamps[D]-e.combatStartTime)/1e3,G=H.skillName;console.assert(L.info.type===ze.Skill&&L.tmp_startLockTime);const B=L.tmp_startLockTime-I,z=p.record.actions[x-1],Q=z.tmp_endLockTime-I;if(!_.done){const{popKey:te,applyKey:ee,timestamp:Ee}=_.value,he=(Ee-e.combatStartTime)/1e3;let M;if(Q>he?z.info.type===ze.Skill&&z.info.skillName===ee?M=x:M=x-1:w>he&&(M=x),M!==void 0){p.insertRecordNode(ns(te),M),_=C.next(),D--,S++;continue}}const ce=w-B,ue=.05;if(ce>3.5)p.insertRecordNode(rl(w),x),S++;else if(ce>ue){const te=w-Q;console.assert(te>0),p.insertRecordNode(Or(te),x),S++}else ce<-ue&&(T.deltas.length>=10?T.spilledDeltas++:T.deltas.push({skill:G,logTime:w,simTime:B}));T.processed++,yield T}const O=p.record.actions.slice(s);return console.log(`inserted ${S} non-skill nodes`),p.undoStack.push(new iw(O,s,a,o)),p.autoSave(),Zn().invalidActions}const Ir={textAlign:"left",paddingLeft:"0.3em"},QF=["spellSpeed","skillSpeed","criticalHit","directHit","determination","piety","fps"];function JF(e){const t=bt(),a=p.gameConfig[e.field];return l.jsx(Bt,{style:{display:"inline-block",color:t.text},defaultValue:e.inferredStateValue?.toString()??"",description:nu(e.field),onChange:o=>{o.length===0&&e.setValue(void 0);const s=parseInt(o);isNaN(s)||e.setValue(s)},placeholder:a.toString()})}function $F(){const[e,t]=b.useState(new URLSearchParams(window.location.search).has("code")),a={},o=b.useContext(Rn)==="Light",s=bt(),[c,d]=b.useState(!0),h=b.useRef(null),[f,m]=b.useState(""),[R,T]=b.useState(0),S=_e=>{R===8&&(C(null),d(!0),O([])),_e!==6&&_e!==7&&B(void 0),_e!==4&&_e!==5&&(x.current=[],w.current=[],L.current=void 0),[2,4,5].includes(_e)||(H.current=void 0),T(_e)},[I,C]=b.useState(null),[_,O]=b.useState([]),D=_e=>{(_e||R!==7)&&(!_e&&R===8&&S(2),t(_e))};b.useEffect(()=>{if(!new URLSearchParams(window.location.search).has("code")&&window.sessionStorage.getItem("fflogsAuthToken")!==null){S(2),console.log("already authorized to fflogs");return}S(1);async function _e(){let ge=0;try{const ve=await LN();if(ve===yh.SUCCESS)ge=2;else if(e&&ve===yh.UNAUTHORIZED){await MN();const Ye=await LN();console.log(Ye),Ye===yh.SUCCESS&&(ge=2)}}catch(ve){console.log("Error during automatic FFLogs authentication"),console.error(ve)}S(ge)}_e()},[]);const H=b.useRef(void 0),x=b.useRef([]),L=b.useRef(void 0),w=b.useRef([]),[G,B]=b.useState(void 0),z={color:s.emphasis,backgroundColor:s.accent},Q=l.jsx("button",{onClick:()=>S(2),children:g({en:"cancel",zh:""})}),ce=l.jsxs("div",{className:"importPage",children:[l.jsx("div",{children:l.jsx("button",{onClick:()=>{MN(),S(1)},children:g({en:"click here to authorize your fflogs account",zh:"fflogs"})})}),l.jsx("span",{children:g({en:"(will redirect to www.fflogs.com)",zh:"www.fflogs.com"})})]}),ue=l.jsx("div",{className:"importPage",children:l.jsx("p",{children:g({en:"verifying authorization...",zh:"..."})})}),te=l.jsxs(l.Fragment,{children:[l.jsx("div",{children:l.jsx("b",{children:g({en:"Limitations",zh:""})})}),l.jsxs("div",{children:[g({en:"Log import is currently subject to the following limitations:",zh:"logs"}),l.jsxs("ul",{children:[l.jsx("li",{children:g({en:"FFLogs only records combat stats for the creator of the log, so stats must be manually entered for other players.",zh:"FFLogs"})}),l.jsx("li",{children:g({en:"FFLogs cannot record actions that were performed before combat began. Pre-pull actions must be entered manually before import.",zh:"FFLogslogs"})}),l.jsx("li",{children:g({en:"Manual buff click-offs, and buff toggles from entering/leaving a zone (for example: leaving Ley Lines or Sacred Soil) are not currently processed by XIV in the Shell.",zh:"XIV in the Shellbuff/buff"})}),l.jsx("li",{children:g({en:"The offset of MP and Lucid Dreaming ticks are not currently synchronized in XIV in the Shell.",zh:"XIV in the Shelllogs"})}),l.jsx("li",{children:g({en:"XIV in the Shell currently does not track when multiple enemies are hit by an ability.",zh:"XIV in the Shell"})}),l.jsx("li",{children:g({en:"XIV in the Shell does not reflect job gauge updates that are affected by random factors, or by whether an enemy is hit or killed.",zh:"XIV in the Shell//"})})]}),g({en:"These may change in future updates.",zh:""})]})]}),ee=R!==2||!f,Ee=l.jsxs("div",{className:"importPage",children:[l.jsxs("form",{onSubmit:async _e=>{if(_e.preventDefault(),R===2)try{const ge=jF(f);if(ge.error)throw new Error(g(ge.error).toString());if(S(3),new URL(f).searchParams.get("fight")==="last"){console.log("querying last fight ID");const ve=await qF(ge.apiBaseUrl,ge.reportCode);ge.fightID=ve}if(H.current=ge,ge.fightID===void 0){const ve=await XF(ge.apiBaseUrl,ge.reportCode);x.current=ve,console.log("choosing from",ve.length,"fights"),S(4)}else if(ge.playerID===void 0){const ve=await kN(ge.apiBaseUrl,ge.reportCode,ge.fightID);x.current=[],[L.current,w.current]=ve,console.log("choosing from",w.current.length,"players"),S(5)}else{const ve=await UN({apiBaseUrl:ge.apiBaseUrl,reportCode:ge.reportCode,fightID:ge.fightID,playerID:ge.playerID});B(ve),console.log(`preparing to import ${ve.actions.length} skills`),S(6)}}catch(ge){console.error(ge),window.alert(ge),S(2)}},children:[l.jsx(Bt,{description:l.jsx("div",{children:g({en:"enter an FFLogs report link",zh:"FFLogs"})}),style:{width:"100%"},onChange:m,defaultValue:f,fullWidthInput:!0,autoFocus:!0}),l.jsxs("div",{className:"buttonHolder",style:{marginTop:10},children:[l.jsx("button",{style:ee?{}:z,type:"submit",disabled:ee,children:g({en:"import",zh:""})}),l.jsx("button",{type:"button",onClick:()=>S(0),children:g({en:"back to authorization",zh:""})})]})]}),l.jsx("hr",{}),te]}),he=l.jsx("div",{className:"importPage",children:l.jsx("p",{children:g({en:"retrieving log...",zh:"logs"})})}),M=b.useRef(!1),K=l.jsxs("div",{className:"importPage",children:[l.jsx("b",{children:g({en:"Choose a fight",zh:""})}),l.jsx("ul",{children:x.current.map((_e,ge)=>l.jsx("li",{onClick:()=>{if(M.current)return;const ve=H.current;if(ve===void 0){console.error("log info was undefined in fight choice state"),S(2);return}M.current=!0,kN(ve.apiBaseUrl,ve.reportCode,_e.id).then(Ye=>{[L.current,w.current]=Ye,ve.fightID=_e.id,console.log("choosing from",w.current.length,"players"),S(5)}).catch(Ye=>{console.error(Ye),window.alert(Ye),S(2)}).finally(()=>{M.current=!1})},children:l.jsxs("span",{className:"clickableLinkLike",children:[new Date(_e.unixStartTime).toLocaleString()," - ",g(_e.label)]})},ge))}),l.jsx("div",{children:Q})]}),$=l.jsxs("div",{className:"importPage",children:[L.current&&l.jsxs("span",{children:[new Date(L.current.unixStartTime).toLocaleString()," - ",g(L.current.label)]}),l.jsx("b",{children:g({en:"Choose a player",zh:""})}),l.jsx("ul",{children:w.current.map((_e,ge)=>l.jsx("li",{onClick:()=>{if(M.current)return;const ve=H.current;if(ve===void 0){console.error("log info was undefined in player choice state"),S(2);return}if(ve.fightID===void 0){console.error("fight ID was undefined in player choice state"),S(2);return}M.current=!0,UN({apiBaseUrl:ve.apiBaseUrl,reportCode:ve.reportCode,fightID:ve.fightID,playerID:_e.id}).then(Ye=>{B(Ye),console.log(`preparing to import ${Ye.actions.length} skills`),S(6)}).catch(Ye=>{console.error(Ye),window.alert(Ye),S(2)}).finally(()=>{M.current=!1})},children:l.jsxs("span",{className:"clickableLinkLike",children:[_e.job," - ",_e.name]})},ge))}),x.current.length===0?l.jsx("div",{children:Q}):l.jsx("div",{children:l.jsx("button",{onClick:()=>{S(4),w.current=[]},children:g({en:"back to fight selection",zh:""})})})]}),de=()=>p.gameConfig.job!==G?.job,y=l.jsx(Fe,{container:h,topic:"fflogsConfigReset",content:g({en:l.jsxs("div",{children:['FFLogs only records exact combat stats for the player that created the log. All other stats must be entered manually. Any configuration not specified in this dialog, including initial resource overrides, will use the values set in the main "Config" panel.',l.jsx("br",{}),'After a log import, the "proc mode" field is set to "Always". You can manually adjust this later.']})})}),Y=l.jsx(Fe,{container:h,topic:"fflogsConfigResetActive",content:g({en:l.jsxs("div",{children:[l.jsx("i",{children:"Actions in the current timeline will be cleared and replaced with those imported from the log."}),l.jsx("br",{}),"FFLogs does not record actions performed before combat begins. To add pre-pull actions, manually insert them after importing, or add them beforehand and uncheck this option."]}),zh:l.jsxs("div",{children:[l.jsx("i",{children:"logs"}),l.jsx("br",{}),"FFLogslogs"]})})}),W=l.jsx(Fe,{container:h,topic:"fflogsConfigResetActive",content:g({en:l.jsx("span",{children:l.jsx("i",{children:"Actions imported from the log will be added to the end of the existing timeline."})}),zh:l.jsx("span",{children:l.jsx("i",{children:"logs"})})})}),j=l.jsxs("div",{className:"importPage",children:[g({en:l.jsxs("p",{children:["Reading ",G?.actions.length??0," skills for"," ",l.jsx("b",{children:G?.playerName})]}),zh:l.jsxs("p",{children:["",l.jsx("b",{children:G?.playerName}),"",G?.actions.length??0,""]})}),l.jsxs("div",{children:[G?.statsInLog?g({en:"Using stats found in log. Please adjust as needed.",zh:"logs"}):g({en:"Exact stats not found in log; using values in current game config. Please enter manually or adjust with the Config pane after import. ",zh:"Logs"}),y]}),l.jsx("hr",{}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:5},children:[l.jsxs("div",{children:[l.jsx("span",{children:g({en:"job: ",zh:""})}),G?.job??p.game.job]}),G&&l.jsxs("div",{children:[l.jsx("span",{children:g({en:"level: ",zh:""})}),l.jsxs("select",{style:{outline:"none",color:s.text},value:G.level,onChange:_e=>B({...G,level:parseInt(_e.target.value)}),children:[l.jsx("option",{value:Je.lvl100,children:"100"},Je.lvl100),l.jsx("option",{value:Je.lvl90,children:"90"},Je.lvl90),l.jsx("option",{value:Je.lvl80,children:"80"},Je.lvl80),l.jsx("option",{value:Je.lvl70,children:"70"},Je.lvl70)]})]})]}),l.jsx("div",{style:{display:"flex",gap:5,flexDirection:"column"},children:QF.map(_e=>l.jsx("div",{children:l.jsx(JF,{field:_e,inferredStateValue:G?.inferredConfig?.[_e],setValue:ge=>{G?.inferredConfig!==void 0&&B({...G,inferredConfig:{...G.inferredConfig,[_e]:ge}})}})},_e))}),l.jsx("hr",{}),de()?l.jsx("div",{children:l.jsx("span",{children:g({en:"Imported actions will replace the current timeline.",zh:""})})}):l.jsxs("div",{children:[l.jsx("input",{className:"shellCheckbox",type:"checkbox",onChange:_e=>{d(_e.currentTarget.checked)},checked:c}),l.jsxs("span",{children:[g({en:"Reset timeline on import",zh:""})," "]}),c?Y:W]}),l.jsxs("div",{className:"buttonHolder",children:[l.jsx("button",{style:z,onClick:()=>{if(G){S(7);const _e=ZF(G,c||de());setTimeout(()=>{let ge=_e.next();for(;!ge.done;)C({...ge.value}),ge=_e.next();O(ge.value),S(8)},0)}else console.error("intermediate state was undefined when confirming import"),S(2),D(!1)},children:g({en:"go",zh:""})}),Q]})]}),Z={position:"relative",width:"100%",borderCollapse:"collapse",borderColor:s.bgMediumContrast,borderWidth:"1px",borderStyle:"solid"},ae={backgroundColor:s.timelineEditor.headerFooter,...os(s)},P=_e=>_e%2===1?s.timelineEditor.bgAlternateRow:"transparent",q=I?.deltas.length?l.jsxs(l.Fragment,{children:[l.jsx("hr",{}),l.jsx("div",{children:g({en:"Some simulated actions had timestamps in XIV in the Shell different from the recorded values in FFLogs. Minor differences are normal, but if you see a very large discrepancy, this means there's either a bug in XIV in the Shell, or the configured spell speed/skill speed/fps was incorrect.",zh:"XIV in the Shell/logsXIV in the Shellbug//"})}),l.jsxs("table",{style:Z,children:[l.jsx("thead",{children:l.jsxs("tr",{style:rh,children:[l.jsx("th",{style:{...ae,...Ir,width:"35%"},children:g({en:"skill",zh:""})}),l.jsx("th",{style:{...ae,...al},children:g({en:"log time",zh:""})}),l.jsx("th",{style:{...ae,...al},children:g({en:"shell time",zh:""})}),l.jsx("th",{style:{...ae,...al},children:g({en:"difference",zh:""})})]})}),l.jsx("tbody",{children:I.deltas.map((_e,ge)=>l.jsxs("tr",{style:{...rh,background:P(ge)},children:[l.jsx("td",{style:{...Ir,width:"35%"},children:fi(_e.skill)}),l.jsx("td",{style:al,children:Ze.displayTime(_e.logTime,3)}),l.jsx("td",{style:al,children:Ze.displayTime(_e.simTime,3)}),l.jsx("td",{style:al,children:Ze.displayTime(_e.logTime-_e.simTime,3)})]},ge))})]}),I.spilledDeltas?l.jsx("span",{children:g({en:`...and ${I.spilledDeltas} more`,zh:`${I.spilledDeltas}`})}):void 0]}):l.jsx(l.Fragment,{}),se=l.jsxs("div",{className:"importPage",children:[l.jsx("div",{children:g({en:"processing actions (this may take a moment)...",zh:""})}),I&&l.jsxs("div",{children:[l.jsxs("span",{children:[I.processed," / ",I.total]}),l.jsx("br",{}),q]})]}),fe=_.length>0?l.jsxs(l.Fragment,{children:[g({en:`The imported timeline produced ${_.length} invalid action${_.length===1?"":"s"}:`,zh:`${_.length}`}),l.jsxs("table",{style:Z,children:[l.jsx("thead",{children:l.jsxs("tr",{style:rh,children:[l.jsx("th",{style:{...ae,...Mr},children:"#"}),l.jsx("th",{style:{...ae,...Ir},children:g({en:"action",zh:""})}),l.jsx("th",{style:{...ae,...Ir},children:g({en:"reason",zh:""})})]})}),l.jsx("tbody",{children:_.slice(0,10).map((_e,ge)=>l.jsxs("tr",{style:{...rh,background:P(ge)},children:[l.jsx("td",{style:Mr,children:_e.index}),l.jsx("td",{style:Ir,children:_e.node.toLocalizedString()}),l.jsx("td",{style:Ir,children:_e.reason.unavailableReasons.map(ts).join(g({en:"; ",zh:""}).toString())})]},ge))})]}),_.length>10?l.jsx("span",{children:g({en:`...and ${_.length-10} more`,zh:`...${_.length-10}`})}):void 0]}):void 0,Se=l.jsxs("div",{className:"importPage",children:[l.jsxs("p",{children:[l.jsx("b",{children:g({en:"Import successful!",zh:""})}),g({en:" You may now close this dialog.",zh:""})]}),q,l.jsx("br",{}),fe,l.jsx("br",{}),l.jsx("div",{children:l.jsx("button",{onClick:()=>D(!1),children:g({en:"finish",zh:""})})})]}),Oe=R===0?ce:R===1?ue:R===2?Ee:R===3?he:R===4?K:R===5?$:R===6?j:R===7?se:R===8?Se:l.jsxs("div",{children:["Bad state: ",R,". Please contact us with a bug report."]}),Ue=l.jsxs("div",{ref:h,children:[l.jsx("style",{children:`
			button {
				min-width: 35%;
			}
			.buttonHolder {
				width: 100%;
				display: flex;
				flex-direction: column;
				gap: 0.8em;
				align-items: start;
			}
		`}),Oe]}),me=l.jsx("div",{className:"clickable",children:l.jsx("span",{style:a,children:l.jsx("span",{className:"clickableLinkLike",children:g({en:"Click to open dialog",zh:""})})})}),De=l.jsx(KN,{className:"dialogExit",style:{color:s.bgHighContrast}});return l.jsxs(PD,{open:e,onOpenChange:D,children:[l.jsx(GD,{render:me,nativeButton:!1}),l.jsxs(UD,{children:[l.jsx(pD,{className:"Backdrop",style:{opacity:o?.2:.7}}),l.jsxs(kD,{className:"Popup visibleScrollbar",id:"dialogPopup",style:{backgroundColor:s.background,border:"1px solid "+s.bgMediumContrast,color:s.text},children:[l.jsx(wD,{render:l.jsx("h3",{children:g({en:"Import from FFLogs",zh:"FFLogs"})})}),l.jsx(CD,{render:De,nativeButton:!1}),l.jsx(OD,{className:"Description",render:Ue})]})]})]})}function ej(e,t){const a=p.getTimelineRenderingProps();let o=a.selectionStartDisplayTime,s=a.selectionEndDisplayTime;o===s&&(o=-a.countdown,s=p.game.time-a.countdown+4);const c=p.imageExportConfig;let d,h;c.wrapThresholdSeconds===0?(d=1,h=s-o):(d=Math.ceil((s-o)/c.wrapThresholdSeconds),h=c.wrapThresholdSeconds);const f=document.createElement("canvas"),m=document.createElement("canvas"),R=pe.trackHeight/2,T=p.timeline,S=T.positionFromTime(a.countdown);f.width=T.positionFromTime(s)+S;let I=pe.renderSlotHeight();e&&(I+=pe.rulerHeight,I+=pe.trackHeight*T.getNumMarkerTracks()),f.height=I;const C=f.getContext("2d",{willReadFrequently:!0}),_=0;C.fillStyle=t.background,C.fillRect(0,0,f.width,f.height);let O=0;const D={renderingProps:p.getTimelineRenderingProps(),colors:t,visibleLeft:0,visibleWidth:100};e&&(O+=mD({ctx:C,viewInfo:D,originX:0,ignoreVisibleX:!0,testInteraction:()=>{}}),O+=AD({ctx:C,viewInfo:D,originX:_,originY:O,ignoreVisibleX:!0,testInteraction:()=>{}})),TD({ctx:C,viewInfo:D,isImageExportMode:!0,originX:_,originY:O,testInteraction:()=>{}});const H=T.positionFromTime(o)+S,x=T.positionFromTime(s)+S;m.height=(R+I)*(d-1)+I,m.width=d===1?x-H:T.positionFromTime(h);const L=m.getContext("2d");for(let w=0;w<d;w++){const G=T.positionFromTime(h);if(H>x)break;const B=Math.min(x-(H+w*G),G),z=C.getImageData(H+w*G,0,B+1,f.height+1);L.putImageData(z,0,w*(R+I)),w>0&&B<G&&(L.fillStyle=t.background,L.fillRect(B,w*(R+I),G-B,f.height+1))}return m}function tj(){const[e,t]=b.useState(p.imageExportConfig),a=(f,m)=>{const R=Object.assign({},e);R[f]=m,p.setImageExportConfig(R),t(R),Tt("img: "+f,JSON.stringify(m))},o={position:"relative",top:3,marginRight:"0.25em"},s=(f,m)=>l.jsxs("div",{style:{marginBottom:5},children:[l.jsx("input",{type:"checkbox",onClick:R=>a(f,R.currentTarget.checked),value:e[f]?"on":"off",style:o,defaultChecked:e[f]}),l.jsx("span",{children:g(m)})]}),c=f=>{Number.isNaN(parseFloat(f))||a("wrapThresholdSeconds",parseFloat(f))},d=l.jsxs(l.Fragment,{children:[l.jsx("div",{children:l.jsx(Bt,{defaultValue:e.wrapThresholdSeconds.toString(),description:l.jsxs("span",{children:[g({en:"seconds before wrapping ",zh:" "}),l.jsx(Fe,{topic:"png-wrap",content:g({en:"number of elapsed seconds, including the countdown, in each row in the image (set to 0 to never wrap)",zh:"0"})}),":"," "]}),onChange:c,style:{margin:"10px 0"}})}),s("includeTime",{en:"include time and markers",zh:""})]}),h=bt();return l.jsxs("div",{children:[l.jsx("p",{children:g({en:l.jsx("span",{children:"export the selected part of the timeline as a png according to the current display settings, or the whole timeline if nothing is selected"}),zh:"png"})}),d,l.jsx("p",{children:l.jsx(El,{filename:"fight",fileFormat:Oo.Png,getContentFn:()=>ej(e.includeTime,h),displayName:g({en:"export selection as png",zh:"png"})})})]})}function nj(){const e=b.useContext(Rn),t=h=>{h.fileType===ri.Record?p.undoStack.doThenPush(new uw(p.record.serialized(),h)):h.fileType===ri.MarkerTrackIndividual||h.fileType===ri.MarkerTracksCombined?window.alert("wrong file type '"+h.fileType+`'; use the "Timeline markers" section instead if you meant import markers.`):window.alert("wrong file type '"+h.fileType+"'.")},a=g({en:"Export fight to file",zh:""}),o=l.jsxs("div",{children:[l.jsx("p",{children:g({en:"for sharing and importing:",zh:""})}),l.jsx(El,{fileFormat:Oo.Json,getContentFn:()=>p.record.serialized(),filename:"fight",displayName:g({en:"txt format",zh:"txt"})}),l.jsx("p",{children:g({en:l.jsxs("span",{children:["for external tools such as excel and"," ",l.jsx("a",{href:"https://github.com/Tischel/BLMInTheShell",children:"Tischel's plugin"}),":"]}),zh:l.jsxs("span",{children:["excel",l.jsx("a",{href:"https://github.com/Tischel/BLMInTheShell",children:"Tischel"}),""]})})}),l.jsx(El,{fileFormat:Oo.Csv,getContentFn:()=>({body:p.getActionsLogCsv()}),filename:"fight",displayName:g({en:"csv format",zh:"csv"})}),l.jsx("p",{children:g({en:l.jsxs("span",{children:["for use with"," ",l.jsx("a",{href:"https://colab.research.google.com/github/zqsz-xiv/xivintheshell-ama-sim-notebook/blob/main/in_the_shell_with_ama_sim.ipynb",children:"Amarantine's combat simulator"}),":"]}),zh:l.jsxs("span",{children:["",l.jsx("a",{href:"https://github.com/Amarantine-xiv/Amas-FF14-Combat-Sim",children:"Amarantine"}),""]})})}),l.jsx(El,{fileFormat:Oo.Csv,getContentFn:()=>p.getAmaSimCsv(),filename:"fight",displayName:g({en:"csv format",zh:"csv"})})]}),s=g({en:"Import fight from file",zh:""}),c=l.jsxs(l.Fragment,{children:[l.jsx(Wh,{allowLoadFromUrl:!1,onLoadFn:t}),l.jsx("hr",{style:{marginTop:15,border:"none",borderTop:"1px solid "+Al(e,"bgHighContrast")}}),l.jsx("div",{style:{marginTop:15,marginBottom:10},children:l.jsx("b",{children:g({en:"Import fight from FFLogs",zh:"FFLogs"})})}),l.jsx($F,{})]}),d=l.jsx(l.Fragment,{children:g({en:"Image Export",zh:""})});return l.jsx(gT,{contentHeight:nS,children:[{defaultSize:25,title:s,content:c},{defaultSize:30,title:a,content:o},{defaultSize:45,title:d,content:l.jsx(tj,{})}]})}function aj(){const e=(d,h)=>l.jsxs("div",{style:{marginBottom:5},children:[l.jsx("b",{children:g(d)})," ",h]}),t=l.jsx(Fe,{topic:"settings-display",content:g({en:"Configure how elements are displayed in the visual timeline and image exports.",zh:""})}),a=l.jsx(Fe,{topic:"settings-copypaste",content:g({en:l.jsxs("div",{children:["Configure the format used when copying a sequence of skills from XIV in the Shell to paste in other applications.",l.jsx("br",{}),"Any of the provided formats can be pasted ",l.jsx("i",{children:"from"})," external applications to XIV in the Shell at any time, regardless of the value of this setting."]}),zh:l.jsxs("div",{children:["",l.jsx("br",{}),""]})})}),o=l.jsx(Fe,{topic:"settings-copypaste-plain",content:g({en:l.jsxs("div",{children:["A comma-separated list of skill names.",l.jsx("br",{}),l.jsx("br",{}),"Example:",l.jsx("br",{}),l.jsx("span",{children:"Fire 3, Fire 4, Despair"})]}),zh:l.jsxs("div",{children:["",l.jsx("br",{}),l.jsx("br",{}),"",l.jsx("br",{}),l.jsx("span",{children:"34"})]})})}),s=l.jsx(Fe,{topic:"settings-copypaste-plain",content:g({en:l.jsxs("div",{children:["A tab-separated list of usage timestamps, target counts, and skill names, for use with external spreadsheet applications.",l.jsx("br",{}),l.jsx("br",{}),"Example:",l.jsx("table",{children:l.jsxs("tbody",{children:[l.jsxs("tr",{children:[l.jsx("td",{children:"-3.500"}),l.jsx("td",{children:"1"}),l.jsx("td",{children:"Fire 3"})]}),l.jsxs("tr",{children:[l.jsx("td",{children:"0.042"}),l.jsx("td",{children:"1"}),l.jsx("td",{children:"Fire 4"})]}),l.jsxs("tr",{children:[l.jsx("td",{children:"2.500"}),l.jsx("td",{children:"1"}),l.jsx("td",{children:"Despair"})]})]})})]}),zh:l.jsxs("div",{children:["",l.jsx("br",{}),l.jsx("br",{}),"",l.jsx("table",{children:l.jsxs("tbody",{children:[l.jsxs("tr",{children:[l.jsx("td",{children:"-3.500"}),l.jsx("td",{children:"1"}),l.jsx("td",{children:"3"})]}),l.jsxs("tr",{children:[l.jsx("td",{children:"0.042"}),l.jsx("td",{children:"1"}),l.jsx("td",{children:"4"})]}),l.jsxs("tr",{children:[l.jsx("td",{children:"2.500"}),l.jsx("td",{children:"1"}),l.jsx("td",{children:""})]})]})})]})})}),c=l.jsx(Fe,{topic:"settings-copypaste-discord",content:g({en:l.jsxs("div",{children:["A sequence of Discord emotes (only verified for BLM and PCT). Requires access to a server with appropriately-named emotes to use.",l.jsx("br",{}),l.jsx("br",{}),"Example:",l.jsx("br",{}),l.jsx("span",{children:":F3: :F4: :Despair:"})]}),zh:l.jsxs("div",{children:["Discord)Discord",l.jsx("br",{}),l.jsx("br",{}),"",l.jsx("br",{}),l.jsx("span",{children:":F3: :F4: :Despair:"})]})})});return l.jsxs("div",{children:[e({en:"Display settings",zh:""},t),l.jsx(ou,{uniqueName:"showDamageMarks",label:g({en:"show damage marks",zh:""}),onChange:d=>{p.setTimelineOptions({drawDamageMarks:d})}}),l.jsx(ou,{uniqueName:"showHealingMarks",label:g({en:"show healing marks",zh:""}),onChange:d=>{p.setTimelineOptions({drawHealingMarks:d})}}),l.jsx(ou,{uniqueName:"showMPAndLucidTickMarks",label:g({en:"show MP and lucid ticks",zh:""}),onChange:d=>{p.setTimelineOptions({drawMPTickMarks:d})}}),l.jsx(ou,{uniqueName:"showBuffIndicators",label:g({en:"show buff indicators",zh:"buff"}),onChange:d=>{p.setTimelineOptions({drawBuffIndicators:d})}}),l.jsx("br",{}),e({en:"Clipboard copy mode",zh:""},a),l.jsx(Vb,{uniqueName:"clipboardMode",onChange:d=>p.clipboardMode=d,options:[["plain",l.jsxs("span",{children:[g({en:"plain text",zh:""})," ",o]})],["tsv",l.jsxs("span",{children:[g({en:"tab-separated lines",zh:""})," ",s]})],["discord",l.jsxs("span",{children:["discord",g({en:" emotes",zh:""})," ",c]})]]})]})}let vo=()=>{},YD=e=>{};const KD="dragLock",ij=Rt(KD),VD=ij==="true",Pu=b.createContext({value:VD,setter:e=>{}}),Zf=b.createContext({dragTargetIndex:null,dragTargetTime:null,setDragTarget:(e,t)=>{}});function oj(){const e=b.useRef(null),[t,a]=b.useState(11),[o,s]=b.useState(300),[c,d]=b.useState(23),[h,f]=b.useState(66),[m,R]=b.useState(0),[T,S]=b.useState(!1),[I,C]=b.useState({onMouseMove:()=>{},onMouseEnter:()=>{},onMouseLeave:()=>{},onMouseUp:()=>{},onMouseDown:()=>{},onKeyDown:()=>{}}),_=()=>{e.current&&(d(e.current.scrollLeft),f(e.current.clientWidth))};vo=()=>{a(p.timeline.getCanvasWidth()),s(p.timeline.getCanvasHeight()),R(m+1)},YD=L=>{if(e.current!=null){const w=e.current.clientWidth;e.current.scrollLeft=L-w*.6}_()},b.useEffect(()=>{a(p.timeline.getCanvasWidth()),s(p.timeline.getCanvasHeight()),_()},[]);const O=l.jsx(uF,{timelineHeight:o,visibleLeft:c,visibleWidth:h,version:m,pointerMouse:T,setCallbacks:C,setPointerMouse:S}),D=b.useContext(Rn),H=Al(D,"bgMediumContrast"),x=zb?l.jsx("div",{style:{height:8},tabIndex:-1}):void 0;return l.jsxs("div",{style:{position:"relative"},children:[O,l.jsxs("div",{tabIndex:0,className:"visibleScrollbar",style:{position:"relative",width:"100%",overflowX:"scroll",overflowY:"clip",outline:"1px solid "+H,cursor:T?"pointer":"default"},ref:e,onScroll:()=>{e.current&&(e.current.scrollLeft=Math.min(e.current.scrollWidth-e.current.clientWidth,e.current.scrollLeft),d(e.current.scrollLeft),f(e.current.clientWidth))},onMouseMove:L=>{if(e.current){const w=e.current.getBoundingClientRect(),G=L.clientX-w.left,B=L.clientY-w.top;I.onMouseMove(G,B)}},onMouseDown:L=>{if(e.current){const w=e.current.getBoundingClientRect(),G=L.clientX-w.left,B=L.clientY-w.top;I.onMouseDown(G,B)}},onMouseEnter:()=>I.onMouseEnter(),onMouseLeave:()=>I.onMouseLeave(),onMouseUp:L=>{if(e.current){const w=e.current.getBoundingClientRect(),G=L.clientX-w.left,B=L.clientY-w.top;I.onMouseUp(L,G,B)}},onKeyDown:L=>I.onKeyDown(L),children:[l.jsx("div",{style:{position:"relative",backgroundColor:"transparent",width:t,height:o,pointerEvents:"none"}}),x]})]})}const WD=320,nS=WD-40;function lj(){const{value:e,setter:t}=b.useContext(Pu),a=b.useContext(Rn),o=window.innerWidth>1024,s=window.innerWidth>800;return l.jsxs("div",{style:{position:"relative",margin:6},children:[l.jsx(Kb,{uniqueName:"timeline",maxWidth:1440,content:[{titleNode:g({en:"Timeline markers",zh:""}),contentNode:l.jsx(Z2,{})},{titleNode:l.jsxs("div",{style:{position:"relative"},children:[g({en:"Timeline editor ",zh:" "}),l.jsx(Fe,{topic:"timeline editor",content:l.jsx("div",{children:l.jsx("div",{className:"paragraph",children:g({en:'Table view for editing the current timeline. Changes made here are not saved until the "apply changes" button is pressed.',zh:""})})})})]}),contentNode:l.jsx(tw,{})},{titleNode:g({en:"Import/Export",zh:"/"}),contentNode:l.jsx("div",{children:l.jsx(nj,{})})},{titleNode:g({en:"Settings",zh:""}),contentNode:l.jsx(aj,{})}],collapsible:!0,scrollable:!1,height:WD,defaultSelectedIndex:void 0}),l.jsxs("div",{style:{position:"absolute",top:0,right:6,display:"flex",flexDirection:"row",gap:20},children:[o&&l.jsxs("div",{style:{height:Nr,lineHeight:`${Nr}px`,verticalAlign:"middle",cursor:"pointer",userSelect:"none"},onClick:c=>{c.preventDefault(),t(!e)},children:[g({en:"drag lock",zh:""})," ",l.jsx(Fe,{topic:"dragLock",content:g({en:l.jsx("div",{children:"When locked, disables click/drag to rearrange timeline skills."}),zh:l.jsx("div",{children:""})})})," ",l.jsx(Ql.Provider,{value:{color:e?Al(a,"accent"):void 0,style:{width:12,height:12,verticalAlign:"baseline"}},children:e?l.jsx(XM,{}):l.jsx(WM,{})})]}),s&&l.jsx(JP,{uniqueName:"timelineDisplayScale",description:g({en:"horizontal scale ",zh:" "}),defaultValue:"0.4",style:{height:Nr,lineHeight:`${Nr}px`,verticalAlign:"middle"},onChange:c=>{p.timeline.setHorizontalScale(parseFloat(c)),p.scrollToTime()}})]})]})}function sj(){const[e,t]=b.useState(VD),[[a,o],s]=b.useState([null,null]),c=(d,h)=>{if(e)d=null,h=null;else{const f=p.record.selectionStartIndex??0;let m=(d??0)-(f??0);m>0&&(m-=p.record.getSelectionLength()),(m===0||d!==null&&p.record.isInSelection(d))&&(d=null,h=null)}(d!==a||h!==o)&&s([d,h])};return l.jsx("div",{style:{bottom:0,left:0,right:0,paddingLeft:0,paddingRight:0,borderTop:"2px solid "+bt().bgHighContrast,flex:0},children:l.jsx(Pu.Provider,{value:{value:e,setter:d=>{Tt(KD,d.toString()),t(d)}},children:l.jsxs(Zf.Provider,{value:{dragTargetIndex:a,dragTargetTime:o,setDragTarget:c},children:[l.jsx(oj,{}),l.jsx(lj,{})]})})})}const va=JSON.parse(`[{"date":"1/25/26","changes":["[NIN] Fixed a bug where Mudras were sometimes not visible after FFLogs import."]},{"date":"1/24/26","changes":["[AST] Fixed a bug where Oracle's potency was missing."],"changes_zh":[""]},{"date":"1/23/26","changes":["[RPR] Fixed a bug where Soulsow could not be cast during Enshroud.","[MNK] Fixed a bug where Chakra spenders did not receive the effects of Brotherhood and Riddle of Fire."],"changes_zh":["","buff"]},{"date":"1/22/26","changes":["Added Chinese-language M9S, M10S, and M12S P2 tracks (translated by yuyuka)."],"changes_zh":[" M9SM10SM12S   "],"level":"major"},{"date":"1/20/26","changes":["Added Chinese-language M11S and M12S P1 tracks (translated by yuyuka)."],"changes_zh":[" M11S  M12S   "]},{"date":"1/19/26","changes":["Added a user manual. You can find it at xivintheshell.com/manual, in the intro section, or in the links at the top right of the page."],"changes_zh":[" xivintheshell.com/manual"],"level":"major"},{"date":"1/17/26","changes":["Fixed a bug where the piety stat could not be configured."]},{"date":"1/15/26","changes":["Added English-language M12S P1 tracks. All Arcadion Heavyweight fights now have tracks. Happy planning!"]},{"date":"1/14/26","changes":["Added English-language M11S tracks.","Added English-language M12S P2 tracks."]},{"date":"1/13/26","changes":["Added Vamp Stomp floor bat explosion timings to M9S tracks.","Added English-language M10S tracks."]},{"date":"1/12/26","changes":["Added English-language M9S tracks.","[RPR] Fixed a bug where Slice had incorrect potency."]},{"date":"1/11/26","changes":["[SCH] Fixed a bug where using Adloquium, Succor, or Concitation under the effect of Recitation consumed MP.","[BLU] Enabled FFLogs import.","Fixed a bug where importing an FFLogs report link with a fight ID would sometimes not pick the specified fight.","Removed marker presets for M5S-M8S from current content. These can still be found in the \\"archive\\" section of marker presets.","Limited the maximum marker track number to 20."]},{"date":"1/5/26","changes":["[NIN] Fixed a bug where using Doton under the effect of Ten Chi Jin did not apply AoE damage.","New developer blog post (English only): https://blog.xivintheshell.com/posts/the-night-before-heavyweight/"]},{"date":"1/2/26","changes":["[MCH] Adjusted the potency of Wildfire to reflect its inability to CDH.","[SCH][AST] Fixed a bug where DoT effects with no on-hit potency did not receive the player's own Chain Stratagem or Divination buffs.","[DRK] Fixed a bug where Living Shadow granted Scorn below level 100."]},{"date":"12/31/25","changes":["Fixed a visual bug where deleting a marker did not set the correct marker type in the marker creation menu.","[SCH] Fixed a bug where Sacred Soil incorrectly had a 30-second duration.","[SCH] Fixed a bug where Expedient did not grant buffs."]},{"date":"12/30/25","changes":["Changed font specification to improve display on computers with Chinese browser/OS.","Updated the site to automatically use Chinese if your browser is set to use it. Manually using the language selector overrides this.","[BLM] Fixed a bug where overriding the initial AF/UI state gave an extra Polyglot stack."],"changes_zh":["/","",".",""]},{"date":"12/29/25","changes":["[SAM] Added missing application delay values for Hissatsu: Shinten, Kyuten, Gyoten, Yaten, Senei, and Guren.","Updated export to Ama's combat sim to use Grade 4 Gemdraughts for potions.","Added support QQ group to Introductions section."],"changes_zh":["QQ","changelog"]},{"date":"12/26/25","changes":["[AST] Fixed a bug where Stellar Detonation could be repeatedly cast.","[AST] Fixed a bug where automatically-detonated Earthly Star did not receive a pet potency modifier."]},{"date":"12/22/25","changes":["[WAR] Fixed Inner Release being unusable before combat."]},{"date":"12/21/25","changes":["Fixed a bug where importing from FFLogs while resource overrides were active for a different job would crash the site.","[SMN] Fixed a bug where SMN logs could not be imported."]},{"date":"12/19/25","changes":["[RDM] Fixed log imports with Enchanted melee combo actions under the effect of Manafication.","Fixed a bug where importing from FFLogs would sometimes crash the site.","[BRD] Fixed a bug where auto-attacks appeared as an action in log import."]},{"date":"12/16/25","changes":["Updated for patch 7.4."],"changes_zh":["7.4"],"level":"major"},{"date":"12/14/25","changes":["Fixed a bug where the graphical timeline did not render properly when fight markers were loaded and all timeline slots were filled."]},{"date":"12/10/25","changes":["Adjusted the layout of marker presets and input."],"changes_zh":[""]},{"date":"12/7/25","changes":["Adjusted the appearance of scroll bars in Firefox."]},{"date":"11/15/25","changes":["Consumables like Pilgrim's Potions and Super-Ethers in FFLogs imports now display as unknown skills instead of Tinctures."]},{"date":"11/11/25","changes":["Fixed a bug where timeline skill tooltips would be acidentally cut off.","[SCH] Fixed a bug where Energy Drain and Physick were not recognized during log import."],"changes_zh":["","log"]},{"date":"11/7/25","changes":["Added the ability to import fights from FFLogs! You can find it in the Import/Export tab at the bottom of the page.","[WAR] Fixed a typo in the name of Storm's Path and Storm's Eye"],"changes_zh":["FFLogs/"],"level":"major"},{"date":"10/13/25","changes":["Added tracks for The Final Verse (Quantum) Q40."],"level":"minor"},{"date":"9/29/25","changes":["Updated the text of the timeline editor help tooltip.","New developer blog post (English only): https://blog.xivintheshell.com/posts/progressive-ux-improvements/"],"changes_zh":[""],"level":"minor"},{"date":"9/20/25","changes":["[!] Skills can now be inserted in the middle of a timeline.","[!] Pressing backspace/delete now deletes only the selected skills.","Using the up and down arrow keys changes the selected skills.","Most actions can now be undone/redone with ctrl/cmd+z and ctrl/cmd+y.","Actions can now be copy/pasted both within and outside the site (see \\"Settings\\" at the bottom of the page for details).","Adjusted the appearance of some website elements on Firefox."],"changes_zh":["[!]","[!]backspacedelete","    ","ctrl/cmd+zctrl/cmd+y/","",""],"level":"major"},{"date":"9/14/25","changes":["Fixed a bug where certain config stats couldn't be changed."]},{"date":"9/12/25","changes":["Added an \\"apply\\" button to the configuration section, which can be used to change configuration without resetting the timeline."],"changes_zh":[""]},{"date":"9/8/25","changes":["Fixed a crash when loading xivgear/etro links from a job different from the active one.","Fixed an issue where speed effects and certain sps/sks values were displayed incorrectly at level 70 (this was only a cosmetic issue in the configuration panel).","Changing jobs now uses the last saved stats you set for that job.","Creating a new timeline with a different job will now use one of The Balance's best-in-slot gear sets for the current patch."]},{"date":"9/2/25","changes":["Added different tincture images for each job.","Timelines with invalid skill names can now be loaded."]},{"date":"9/1/25","changes":["Added DSR P2 markers from Caro."]},{"date":"8/28/25","changes":["[BRD] Fixed typos in the names of Apex Arrow, The Wanderer's Minuet, and Rain of Death.","[BRD] Export to Ama's combat sim now tracks codas for Radiant Finale and Radiant Encore.","Updated export to Ama's combat sim to include hard-coded STR stats for healer/caster auto-attacks."]},{"date":"8/19/25","changes":["[WHM] Fixed a bug where Lillies would continue to generate even when at full stacks.","Fixed a bug where clicking on the timeline ruler would not immediately display historical state."],"level":"minor"},{"date":"8/17/25","changes":["Changed timeline slot buttons to trigger only if the mouse was both pressed and released on top of them."],"level":"minor"},{"date":"8/11/25","changes":["Made some internal adjustments to the implementation of click/drag selection and skill arrangements.","[WAR] Fixed a bug where Decimate consumed 2 stacks of Inner Release, and failed to grant Burgeoning Fury.","[WAR] Fixed Storm's Eye using an incorrect application delay.","[WAR] Extended the duration of the Inner Release, Primal Rend Ready, and Primal Ruination buffs to match in-game behavior.","[NIN] Fixed a bug where using Gust Slash without an active combo incorrectly advanced combo state.","[NIN] Fixed a bug where damage from Doton ticks was not computed.","[NIN] Fixed a bug where using Katon under Ten Chi Jin did not trigger Hollow Nozuchi."],"level":"minor"},{"date":"8/10/25","changes":["[NIN] Fixed a bug where Ninjutsu abilities were not buffed by Kunai's Bane and Dokumori."],"level":"minor"},{"date":"8/8/25","changes":["Added quick links to our GitHub, Bluesky, and (new) developer blog.","Added Bluesky, the dev blog, and the legacy game version site to the links in the \\"about\\" section."],"level":"minor"},{"date":"8/4/25","changes":["Updated for patch 7.3."],"changes_zh":["7.3"],"level":"major"},{"date":"8/3/25","changes":["The active timeline slot is now saved across page reloads.","Click and drag to rearrange skills, both in the visual timeline and timeline editor table.","Click and drag on the background of the visual timeline to select multiple skills.","Use the \\"drag lock\\" switch to the right of the display settings tabs to disable click+drag behavior."],"changes_zh":["","","",""],"level":"major"},{"date":"7/27/25","changes":["Updated FPS adjustment preview tooltip to use GCD time instead of cast times."]},{"date":"7/26/25","changes":["[WHM][AST][SCH] Fixed a bug where Swiftcast's cooldown was set to 40s below level 100."]},{"date":"7/25/25","changes":["[SCH] Initial SCH implementation. Thanks to Caro for help with numbers and some mechanics.","That's every job now in the shell! Stay tuned for more features and improvements to come."],"changes_zh":["Caro",""],"level":"major"},{"date":"7/22/25","changes":["[DNC] Fixed a bug where Fountain and Bladeshower could grant Silken Flow when used without combo."]},{"date":"7/20/25","changes":["[VPR] Added initial support for VPR. Thanks to Verra for help testing.","[BLU] Using an action while Waning Nocturne or Diamondback are active now uses the action as soon as the debuff expires."],"changes_zh":[" Verra","\\"\\"\\"\\""],"level":"major"},{"date":"7/15/25","changes":["Fixed \\"real-time auto pause\\" display.","[GNB] Fixed a bug where Fated Circle broke combos."],"changes_zh":["\\"(\\"",""],"level":"minor"},{"date":"7/14/25","changes":["[BLU] Fixed a bug where Apokalypsis and Phantom Flurry's potencies were incorrect.","[BLU] Fixed a bug where Surpanakha's 30-second cooldown was not applied."],"changes_zh":["\\"\\"\\"\\"","\\"\\"30CD"],"level":"minor"},{"date":"7/10/25","changes":["[MNK] Now begins encounters with Formless Fist active by default.","[DRG][NIN] Fixed a bug where using combo actions out of sequence granted combo potency bonus.","[AST] Fixed Macrocosmos/Microcosmos."],"changes_zh":["\\"\\"","",""],"level":"minor"},{"date":"7/8/25","changes":["[AST] Added initial support for AST.","[WHM] Addd initial support for WHM.","[SAM][NIN][MNK] GCD calculations in the configuration panel now account for jobs' natural speed buffs."],"changes_zh":[" "," ","GCD"],"level":"major"},{"date":"7/5/25","changes":["[MNK] Added initial support for MNK."],"changes_zh":[" "],"level":"major"},{"date":"6/25/25","changes":["Fixed a bug where timestamps would not appear for wait events in the timeline editor.","Fixed a bug where selecting a skill in the visual canvas did not cause the editor table to scroll to its location."],"level":"minor"},{"date":"6/24/25","changes":["[NIN] Added initial support for NIN."],"changes_zh":[" "],"level":"major"},{"date":"6/19/25","changes":["[DRK] Added initial support for DRK."],"changes_zh":[" "],"level":"major"},{"date":"6/18/25","changes":["Fixed a bug where the \\"wait until timestamp\\" events would change times unexpectedly."],"changes_zh":["\\"\\""],"level":"minor"},{"date":"6/17/25","changes":["Fixed timestamps not appearing in the timeline editor when a new skill is added.","Fixed skill selections ending on \\"wait\\" events not rendering correctly in the graphical timeline.","Fixed skill tooltips in the graphical timeline not displaying AoE potency."],"changes_zh":["","\\"\\"","aoe"],"level":"minor"},{"date":"6/16/25","changes":["[BLU] Added support for Blue Mage."],"changes_zh":[""],"level":"minor"},{"date":"6/6/25","changes":["[GNB][SGE] Chinese localization."],"changes_zh":[""],"level":"minor"},{"date":"6/3/25","changes":["Added the ability to save invalid timelines on the visual canvas. Changes in the timeline editor now reflect in the graphical timeline as well.","The \\"jump to timestamp\\" and \\"wait for MP tick\\" buttons will now always look for the specified timestamp/next MP tick, even when actions are shifted in the timeline editor.","Added a \\"Clone timeline slot\\" button.","See our \\"known bugs\\" page on GitHub for limitations: https://github.com/xivintheshell/xivintheshell/wiki/Known-Bugs"],"changes_zh":["","","","GitHubhttps://github.com/xivintheshell/xivintheshell/wiki/Known-Bugs"],"level":"major"},{"date":"5/29/25","changes":["[PLD] Chinese localization adjustments.","[SMN] Chinese localization; fix summon lock bar not showing progress."],"changes_zh":["",""],"level":"minor"},{"date":"5/28/25","changes":["[PLD] Chinese localization first draft."],"changes_zh":[""],"level":"minor"},{"date":"5/27/25","changes":["[BRD][MCH][SMN] Adjusted AoE potencies to reflect patch 7.25."],"changes_zh":["7.25"],"level":"minor"},{"date":"5/26/25","changes":["Fixed a bug where damage log CSV export didn't work (thanks ryxiv)."],"level":"minor"},{"date":"5/23/25","changes":["Adjusted the calculations for the effect of crit/DH party buffs on auto-crit/DH hits, like PCT's Hammer combo.","Fixed a bug with export to Ama's combat sim where Chain Stratagem and Dokumori would not apply to the boss."],"changes_zh":["","Fixed a bug with export to Ama's combat sim where Chain Stratagem and Dokumori would not apply to the boss."],"level":"minor"},{"date":"5/18/25","changes":["Updated the site to automatically use dark mode if your system is set to use it. Manually using the theme selector overrides this.","[GNB] Fixed a typo where \\"Lightning Shot\\" was incorrectly called \\"Lightning Shock.\\"","[GNB] Updated the application delay of Trajectory from 0.22 to 0.66 to match the current version of the game."],"level":"minor"},{"date":"5/17/25","changes":["We've made some big updates to the tools we use to build XIV in the Shell. The site should work the same as before, but if you notice anything broken or slow, please let us know posthaste.","We're planning on adding some large features in the near feature, so we've also made the changelog more prominent in anticipation. Please look forward to it."],"changes_zh":["XIV in the Shell",""],"level":"major"},{"date":"5/10/25","changes":["[PLD] Added initial support for PLD"],"changes_zh":[" "],"level":"major"},{"date":"5/9/25","changes":["[RPR] Fixed a bug where Regress wasn't usable in enshroud","[RPR] Fixed a bug where Grim Swathe was replaced with Lemure's Slice instead of Lemure's Scythe","[RPR] Fixed a bug where Perfectio was usable in enshroud","[RPR] Fixed a bug where Executioner's Gibbet/Gallows weren't replaced with Void/Cross Reaping while in enshroud","[SMN] Fixed a bug where Slipstream's initial hit falloff was displayed incorrectly in the DoT table (thanks omor1)","[SMN] Fixed the potency of Mountain Buster (was incorrectly listed as 170 instead of 160, thanks omor1)"]},{"date":"5/2/25","changes":["Changed Ama's combat sim export to disable auto-attacks for healer/caster jobs."]},{"date":"4/28/25","changes":["Refactored cooldown logic. Changes should not affect end users, but let us know if anything is off.","Added a few missing translations"]},{"date":"4/21/25","changes":["Updated compatibility with Ama's combat sim for newly-supported jobs."]},{"date":"4/17/25","changes":["[RPR] Added a button to gain +10 Soul Gauge to simulate a target dying with Death's Design active","[BRD] Fixed a bug where Iron Jaws checked the dot status at application time instead of confirmation time (thanks Yumiya)","[BRD] Fixed a bug where Empyreal Arrow applied repertoire at application time instead of confirmation time (also thanks Yumiya)"]},{"date":"4/13/25","changes":["Added English-language markers for M8S"]},{"date":"4/7/25","changes":["Added English-language markers for M7S"]},{"date":"4/6/25","changes":["Added English-language markers for M5S + M6S"]},{"date":"3/29/25","changes":["[BLM] Removed \\"outdated\\" status"]},{"date":"3/26/25","changes":["Added user survey link"]},{"date":"3/24/25","changes":["We have updated the site in accordance with the 7.2 patch notes. Goodbye to the Enochian timer o7","[BLM] will remain in \\"outdated\\" status until we have a change to play with the changes in-game.","Since most jobs received only potency changes, your old 7.1 plans should work, but as usual, please let us know if anything seems incorrect."]},{"date":"3/20/25","changes":["[DNC] Fixed an issue where the icons for Finishing Move Ready and Last Dance Ready were swapped, and an issue where Last Dance Ready was not consumed by Last Dance (thank you bluke)"]},{"date":"3/16/25","changes":["Fixed an issue where resource toggles were shown in the timeline editor with their internal keys rather than localized text.","Fixed mistakes in DoT effect override calculations.","In anticipation of patch 7.2, we're working on some changes to make it easier to migrate timelines after site or game changes. The following things have changed:","- Single-clicking an action will now try to use it as soon as the current animation lock/skill cooldown is over (this used to require double-clicking). If the action cannot be used, a wait is automatically added to the timeilne.","- In \\"manual\\" control mode, you no longer need to press space to advance past an action's animation lock (it will now advance automatically when a skill is used).","- Displayed wait durations are now always calculated from the end of the previous animation lock. Any existing timelines will automatically be adjusted--the shown wait times may be different, but the times where actions are used will remain the same.","- Skill sequence presets now include wait durations. This lets you load/save sequences that use late weaves or wait for MP ticks (assuming ticks still line up correctly).","As a consequence of these changes, you actually might now be able to load BLM timelines from 7.05/7.0 that previously were broken as a result of Despair becoming instant. Despair will still be instant and other buff usage will be unchanged, but the time between abilities should be correct.","These changes are very large, and while we've tested to make sure they won't break your existing timelines, there might still be some bugs that slipped through the cracks. As always, please reach out to us if you encounter any problems."]},{"date":"3/1/25","changes":["Make it so that you can only delete the currently active slot, to hopefully reduce the chance of accidentally deleting a slot when switching"]},{"date":"2/26/25","changes":["Updated the GCD formula because the old formula may be off by 0.01s when there is haste buff. Thank you Yuyuka for spotting the error. Note: old timelines (including timelines in browser localStorage) aren't affected; only newly created timelines use the new formula."]},{"date":"2/22/25","changes":["Added Queen Eternal markers by "]},{"date":"2/21/25","changes":["[BRD][GNB][SMN] Removed testing tag"]},{"date":"2/20/25","changes":["[SGE] Initial implementation for SGE","- Some rough edges still exist around Krasis' healing potency modification and Eukrasian shield handling.","- Basic functionality should be reasonably complete.","[RDM] Fixed a bug where Manafication could be used before combat"]},{"date":"2/16/25","changes":["[SAM] Fixed Hagakure only being usable at 3 sen"]},{"date":"2/15/25","changes":["[BLM] Fixed Manafont CD at lvl80 and below: should be 120s"]},{"date":"2/13/25","changes":["Updated English FRU tracks to more accurately reflect downtime between phases. We previously used the \\"death\\" event in a log as the end of a phase, but it turns out this is inaccurate as the last damage application to the boss occurs ~2 seconds before its recorded death.","- P1 to P2 untargetable duration increased by 2 seconds","- P2 to intermission untargetable duration decreased to align with the \\"crystals become targetable\\" mark","- Intermission to P3 downtime increased to match Gaia's attack killing the crystal","In order to not break existing timelines, the preset EN full fight track now treats P1 as dying 2 seconds before the end of the enrage cast. The start times of all phases are unaffected."]},{"date":"2/4/25","changes":["[SAM] Fixed AoE combo actions not ending the combo","[DRG] Added initial support for DRG"]},{"date":"2/2/25","changes":["[BRD][DNC] Fixed bonuses given from certain crit/DH buffs not applying in total potency calculations"]},{"date":"2/1/25","changes":["[WAR][SAM][RPR][MCH][DNC] Implemented localization for some recently added jobs"]},{"date":"1/27/25","changes":["[SMN] Added initial support for SMN"]},{"date":"1/26/25","changes":["[WAR][GNB] Fixed missing icon for tank LB3s"]},{"date":"1/18/25","changes":["[GNB] Added initial support for GNB"]},{"date":"1/17/25","changes":["Added \\"move end of selection to start of selection\\" button to the timeline editor"]},{"date":"1/12/25","changes":["[RPR] Fixed a bug where oGCDs would improperly consume Reaver/Executioner stacks"]},{"date":"1/8/25","changes":["[WAR] Fixed surging tempest text not showing up in potency modifier tooltip","[MCH] Fixed Overheated potency modifier not being applied"]},{"date":"1/5/25","changes":["Fixed a bug where multi-target spells lost their target counts when using the timeline editor"]},{"date":"1/4/25","changes":["Added support for multi-target abilities"]},{"date":"1/3/25","changes":["[WAR][SAM][RPR] Removed testing tag"]},{"date":"1/1/25","changes":["Added combined English FRU tracks"]},{"date":"12/28/24","changes":["[PCT] Fixed warning for Palette Gauge overcap"]},{"date":"12/24/24","changes":["[MCH] Added support for Flamethrower"]},{"date":"12/22/24","changes":["[BRD] Added initial support for BRD","Overhaul DoT tracking to provide better usage statistics","[BLM] Added High Thunder II"]},{"date":"12/20/24","changes":["Fixed stats tables not including party buff potencies for most skills","Removed flank/rear positional resources for non-melee jobs"]},{"date":"12/19/24","changes":["[WAR] Adjusted animation lock of Primal Rend","Fixed Down for the Count timing in FRU P4 (thanks xi12570)"]},{"date":"12/16/24","changes":["Limit breaks for all jobs!","[MCH][DNC] Removed testing tag","Updated \\"About this tool\\" section","More underlying implementation changes","[PCT] Made Hammer combo expire with Hammer Time buff (changed in 7.1)"]},{"date":"12/13/24","changes":["Fixed sometimes unable to use skills in manual mode with double click","[RPR] Added timer for Immortal Sacrifice","[RPR] Removed enhanced reapings whenever shroud is exited","[RPR] Separated cooldowns of Sacrificium and Lemure's Slice","[RPR] Fixed sks scaling","[WAR] Added initial WAR support"]},{"date":"12/12/24","changes":["Updated English FRU tracks and added P4 + P5"]},{"date":"12/8/24","changes":["Updated Chinese FRU tracks to latest (12/8 ver)","Make stats tables only include selected skills when there is selection"]},{"date":"12/7/24","changes":["Updated positional buff icons","Misc cleanups and optimizations (hey devs: rerun npm install)","[BLM] Fixed Retrace button not changing back to LL if LL is disabled when the buff drops"]},{"date":"12/5/24","changes":["Updated Chinese FRU tracks to latest (12/2 version)","Additional Chinese localization changes (preset lines; initial resource overrides section; many resource names)","New skill icon progress bar visuals "]},{"date":"12/4/24","changes":["Added English FRU P3 tracks by Yara","[RDM] Fixed Swiftcast being consumed before Dualcast when both are active"]},{"date":"12/2/24","changes":["Added English FRU P2 tracks by Yara","Fixed a bug where 'Load tracks starting at timestamp' did not accept some time formats","[RDM] Removed the 'testing' label"]},{"date":"12/1/24","changes":["Updated full FRU tracks in Chinese by  & czmm"]},{"date":"11/30/24","changes":["[MCH] Fixed Scattergun's heat generation (thanks Kairos)","[PCT] Fixed Monochrome Tones appearing when synced to level 80 and other internal trait logic (thanks misterperson)"]},{"date":"11/29/24","changes":["[MCH] Fixed bugs with MCH Overheat consumption on AoE abilities (thanks FloatingGhost)"]},{"date":"11/28/24","changes":["Added some Chinese tracks (M1S-M4S, FRU before P2.5)"]},{"date":"11/27/24","changes":["Added the ability to override stacks to 0 for 1-stack resources that start present by default","Added preliminary FRU P1 tracks by Yara"]},{"date":"11/26/24","changes":["Added the ability to load marker tracks starting from a particular timestamp"]},{"date":"11/25/24","changes":["[RPR] Added initial RPR support"]},{"date":"11/24/24","changes":["[MCH] Added initial MCH support"]},{"date":"11/21/24","changes":["[SAM] Fixed a bug where Fuka haste was doubly applied","[SAM] Added GCD under Fuka in playback control"]},{"date":"11/20/24","changes":["[DNC] Added initial DNC support","[SAM] Added initial SAM support (thank you Sterling Sylva for the initial work)","Added support for skill speed in addition to spell speed"]},{"date":"11/17/24","changes":["[RDM] Fix Manafication CD (thanks )","[all casters] Fix Surecast duration: previously 10s, now 6.5s (ty erii)"]},{"date":"11/16/24","changes":["Make DET use main stat formula and default to 440","Add hyperlinks for xivgear and etro"]},{"date":"11/15/24","changes":["(thank you Yuyuka for reporting a bunch of RDM bugs)","[RDM] Added some additional warnings on unintended buff drops, overwrites, and combo breaks","[RDM] Fixed the duration of the Acceleration buff","[RDM] Fixed the MP costs of Veraero II/Verthunder II","[RDM] Fixed Manafication failing to interrupt combos","[RDM] Fixed Manafication being usable out of combat","[RDM] Fixed Enchanted Reprise clearing mana stacks","[RDM] Made Prefulgence and Vice of Thorns into button replacements"]},{"date":"11/14/24","changes":["(thank you Wan Shott for reporting a bunch of RDM bugs)","[RDM] Fixed bugs where Verfire and Grand Impact didn't grant correct mana","[RDM] Fixed a bug where it was possible to use un-enchanted Moulinet under certain incorrect conditions","mark newly-implemented jobs as in testing and display a warning message when using those jobs"]},{"date":"11/13/24","changes":["Fixed a bug where party buff potencies were not displayed","[PCT] Fixed a bug where using two hammer combos within 30s of each other caused the combo to break","[RDM] Fixed a bug where level synced RDM still received Grand Impact Ready from Acceleration","[RDM] Fixed a bug where Acceleration did not always grant a Verstone/Verfire proc","[RDM] Fixed a bug where certain role buffs were not being displayed on the hotbar","[RDM] Fixed a bug where buffs were overlapping the hotbar","[RDM] Fixed a bug where Contre Sixte's cooldown was improperly affected by traits","Removed debug and implementation notes sections (see repository wiki for implementation notes)"]},{"date":"11/12/24","changes":["Initial XIV in the Shell! Supporting patch 7.1 BLM and PCT, plus preliminary RDM"]}]`);function WA(){return va[0].date}function PN(e){const t=bt();return l.jsxs("div",{className:"changelogGroup",children:[l.jsx("div",{children:e.date}),l.jsx("div",{children:g({en:l.jsx(l.Fragment,{children:e.changes.map((a,o)=>l.jsx("div",{className:"changelogLine",style:{color:a.substring(1,5)==="BETA"?t.warning:t.text},children:a},o))}),zh:e.changes_zh!==void 0?l.jsx(l.Fragment,{children:e.changes_zh.map((a,o)=>l.jsx("div",{className:"changelogLine",style:{color:a.substring(1,5)==="BETA"?t.warning:t.text},children:a},o))}):void 0})})]})}const rj=`
.changelogGroup {
	margin-top: 1em;
	margin-bottom: 1em;
}

.changelogLine {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
	margin-left: 0.5em;
}
`;function cj(){let e,t,a={};const o=b.useRef(5),[s,c]=b.useState(!1),[d,h]=b.useState(!1),f=b.useContext(Rn)==="Light",m=bt();b.useEffect(()=>{let I=Rt("changelogLastRead"),C=Rt("changelogLastReadChangeCount");!JM&&(I===null||C===null)&&(I="5/10/25",C="1");const _=I===null||C===null||I===va[0].date&&C===va[0].changes.length.toString();if(c(_),I!==null&&C!==null){if(!_){let O=0,D=!1;for(;O<va.length-1;O++){if(I===va[O].date){C!==va[O].changes.length.toString()&&O++;break}D=D||va[O].level==="major"}h(D),o.current=O}}else Tt("changelogLastRead",va[0].date),Tt("changelogLastReadChangeCount",va[0].changes.length.toString())},[]);const R=I=>{I||(o.current=5,s||(Tt("changelogLastRead",va[0].date),Tt("changelogLastReadChangeCount",va[0].changes.length.toString())),c(!0))};if(s)e=g({en:"Changelog",zh:"",ja:""}),t="";else{const I=bt();e=g({en:"Changelog (new updates"+(d?"!!":"")+")",zh:""+(d?"":"")+""}),t="!",d?a={color:I.warning,fontWeight:"bold"}:a={fontWeight:"bold"}}const T=l.jsx("div",{className:"clickable",children:l.jsxs("span",{style:a,children:[l.jsxs("span",{children:[t," "]}),l.jsx("span",{className:"clickableLinkLike",children:e})]})}),S=l.jsx(KN,{className:"dialogExit",style:{color:m.bgHighContrast}});return l.jsxs(l.Fragment,{children:[l.jsx("style",{children:rj}),l.jsxs(PD,{onOpenChange:R,children:[l.jsx(GD,{render:T,nativeButton:!1}),l.jsxs(UD,{children:[l.jsx(pD,{className:"Backdrop",style:{opacity:f?.2:.7}}),l.jsxs(kD,{className:"Popup visibleScrollbar",id:"changelogPopup",style:{backgroundColor:m.background,border:"1px solid "+m.bgMediumContrast,color:m.text},children:[l.jsx(wD,{render:l.jsx("h3",{children:e})}),l.jsx(CD,{render:S,nativeButton:!1}),l.jsx(OD,{className:"Description",render:l.jsx(uj,{hiddenStartIndex:o.current,newChanges:!s})})]})]})]})]})}function uj(e){const t=[],a=[];for(let m=0;m<e.hiddenStartIndex;m++)t.push(PN(va[m]));for(let m=e.hiddenStartIndex;m<va.length;m++)a.push(PN(va[m]));const o=g({en:e.newChanges?"New Changes":"Recent Changes",zh:e.newChanges?"":""}),s=l.jsxs("div",{style:{marginTop:10,marginBottom:10},children:[l.jsx("span",{style:{marginTop:10,marginBottom:10},children:l.jsx("b",{children:o})}),l.jsx("div",{style:{margin:10,paddingLeft:6},children:t.map((m,R)=>l.jsx("div",{children:m},R))})]}),[c,d]=b.useState(!1),h=g({en:"Older Changes",zh:""}),f=l.jsxs("div",{style:{marginTop:10,marginBottom:10},children:[l.jsx(fs,{content:l.jsxs("span",{children:[l.jsx("span",{children:c?"- ":"+ "}),l.jsx("b",{children:h})]}),onClickFn:()=>d(!c)}),l.jsx("div",{style:{position:"relative",display:c?"block":"none"},children:l.jsxs("div",{style:{margin:10,paddingLeft:6,marginBottom:20},children:[l.jsx("div",{children:a.map((m,R)=>l.jsx("div",{children:m},R))}),l.jsxs("div",{children:["For older changelog entries before the BLM/PCT in the Shell rejoining, see",l.jsx("b",{children:"About this site/Changelog"})," on the old sites:",l.jsx("a",{target:"_blank",rel:"noreferrer",href:"https://miyehn.me/ffxiv-blm-rotation/",children:"BLM in the Shell"}),",",l.jsx("a",{target:"_blank",rel:"noreferrer",href:"https://picto.zqsz.me/",children:"PCT in the Shell"})]})]})})]});return l.jsxs("div",{children:[s,f]})}const XA=ru?"https://beta.xivintheshell.com":"https://xivintheshell.com",ci="https://github.com/xivintheshell/xivintheshell",As="https://bsky.app/profile/xivintheshell.com",pu="https://blog.xivintheshell.com",Rs="https://discord.com/channels/277897135515762698/1307922201726685236",OR="913451994",qA="https://discord.gg/thebalanceffxiv",dj=()=>l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"paragraph",children:g({en:l.jsxs(l.Fragment,{children:[l.jsx("span",{children:"This tool was initially Black Mage in the Shell, "}),l.jsxs("span",{children:["ideated by ",l.jsx("b",{children:"Eshiya (Galahad)"})," and developed by ",l.jsx("b",{children:"miyehn"})," specifically for BLM during Endwalker since around February 2022."," "]}),l.jsx("span",{children:"After Dawntrail's release, it was expanded to support other jobs and is now maintained by a small team of developers:"})]}),zh:l.jsxs(l.Fragment,{children:[l.jsx("span",{children:"miyehn202226.x"}),l.jsx("span",{children:"7.0"})]})})}),g({en:l.jsxs("ul",{children:[l.jsxs("li",{children:["Tool design and core systems: ",l.jsx("b",{children:"shanzhe"}),", ",l.jsx("b",{children:"miyehn"}),", ",l.jsx("b",{children:"Turtle"}),","," ",l.jsx("b",{children:"Akairyu"})]}),l.jsxs("li",{children:["BLM: ",l.jsx("b",{children:"shanzhe"}),", ",l.jsx("b",{children:"Akairyu"}),", ",l.jsx("b",{children:"Turtle"}),", ",l.jsx("b",{children:"miyehn"})]}),l.jsxs("li",{children:["PCT, RDM, SMN, DRK, NIN, MNK, WHM, AST, SCH: ",l.jsx("b",{children:"shanzhe"})]}),l.jsxs("li",{children:["SAM: ",l.jsx("b",{children:"Sterling"}),", ",l.jsx("b",{children:"shanzhe"})]}),l.jsxs("li",{children:["DNC, MCH, BRD, SGE: ",l.jsx("b",{children:"Akairyu"})]}),l.jsxs("li",{children:["RPR: ",l.jsx("b",{children:"Honey B. Lovely's Favorite Bee"})]}),l.jsxs("li",{children:["WAR: ",l.jsx("b",{children:"misterperson"})]}),l.jsxs("li",{children:["GNB, DRG, PLD: ",l.jsx("b",{children:"Sterling"})]}),l.jsxs("li",{children:["BLU: ",l.jsx("b",{children:""})]}),l.jsxs("li",{children:["VPR: ",l.jsx("b",{children:"shanzhe"}),", ",l.jsx("b",{children:"misterperson"})]}),l.jsxs("li",{children:["Framework for adding new jobs: ",l.jsx("b",{children:"shanzhe"})]}),l.jsxs("li",{children:["Chinese localization: ",l.jsx("b",{children:"miyehn"}),", ",l.jsx("b",{children:"Eshiya"}),", ",l.jsx("b",{children:"Yuyuka"}),", ",l.jsx("b",{children:"shanzhe"}),","," ",l.jsx("b",{children:""}),", ",l.jsx("b",{children:""}),", ",l.jsx("b",{children:""}),", ",l.jsx("b",{children:""}),", ",l.jsx("b",{children:""}),", ",l.jsx("b",{children:""})]})]}),zh:l.jsxs("ul",{children:[l.jsxs("li",{children:["",l.jsx("b",{children:"shanzhe"}),"",l.jsx("b",{children:"miyehn"}),"",l.jsx("b",{children:"Turtle"}),"",l.jsx("b",{children:"Akairyu"})]}),l.jsxs("li",{children:["",l.jsx("b",{children:"shanzhe"}),"",l.jsx("b",{children:"Akairyu"}),"",l.jsx("b",{children:"Turtle"}),"",l.jsx("b",{children:"miyehn"})]}),l.jsxs("li",{children:["",l.jsx("b",{children:"shanzhe"})]}),l.jsxs("li",{children:["",l.jsx("b",{children:"Sterling"}),"",l.jsx("b",{children:"shanzhe"})]}),l.jsxs("li",{children:["",l.jsx("b",{children:"Akairyu"})]}),l.jsxs("li",{children:["",l.jsx("b",{children:"Honey B. Lovely's Favorite Bee"})]}),l.jsxs("li",{children:["",l.jsx("b",{children:"misterperson"})]}),l.jsxs("li",{children:["",l.jsx("b",{children:"Sterling"})]}),l.jsxs("li",{children:["",l.jsx("b",{children:""})]}),l.jsxs("li",{children:["",l.jsx("b",{children:"shanzhe"}),"",l.jsx("b",{children:"misterperson"})]}),l.jsxs("li",{children:["",l.jsx("b",{children:"shanzhe"})]}),l.jsxs("li",{children:["",l.jsx("b",{children:"miyehn"}),"",l.jsx("b",{children:""}),"",l.jsx("b",{children:""}),"",l.jsx("b",{children:"shanzhe"}),"",l.jsx("b",{children:""}),"",l.jsx("b",{children:""}),"",l.jsx("b",{children:""}),"",l.jsx("b",{children:""}),"",l.jsx("b",{children:""}),"",l.jsx("b",{children:""})]})]})}),l.jsx("div",{className:"paragraph",children:g({en:"And many thanks to Yara, Spider, Santa, players in , kiyozero, czmm, and other players and groups who contributed feature suggestions, timeline markers, bug reports, etc.",zh:"YaraSpiderSantakiyozeroczmmbug"})}),g({en:l.jsxs("div",{className:"paragraph",children:["If you have questions or would like to provide feedback, you can message in"," ",l.jsx("a",{target:"_blank",href:Rs,rel:"noreferrer",children:"this channel in The Balance"})," ",'(requires the "Misc. Support" role), or join QQ group ',OR,' where you can use Chinese. In case of sending a bug report, attaching the fight record (download "fight.txt" from the bottom or name it anything else) would be very helpful.']}),zh:l.jsxs("div",{className:"paragraph",children:[l.jsxs("span",{children:["bugQQ:"," ",OR," Discord The Balance ",l.jsx("a",{target:"_blank",href:Rs,rel:"noreferrer",children:""}),' "Misc. Support" role ']}),l.jsx("span",{children:"bugbugfight.txt"})]}),ja:l.jsx("div",{className:"paragraph",children:"[outdated (ja)] Discordmiyehnellyn.waterford@gmail.com fight.txt"})})]});function hj(e){const t={marginBottom:5},a=bt(),o=e.job,s=d=>l.jsx(Ma,{text:d}),c=s(navigator.platform.includes("Mac")?"cmd":"ctrl");return l.jsxs("div",{children:[l.jsx(cj,{}),l.jsx(ml,{defaultShow:!0,title:"instructions",titleNode:l.jsxs("span",{children:[g({en:"Instructions ",zh:" ",ja:" "}),l.jsx(Fe,{topic:"expandable",content:g({en:"click me to expand or collapse",zh:"/",ja:""})})]}),content:l.jsxs("div",{children:[l.jsx("div",{className:"paragraph",children:l.jsx("b",{children:g({en:"General Usage",zh:"",ja:""})})}),g({en:l.jsxs("ul",{children:[l.jsxs("li",{style:t,children:["Set your stats in ",l.jsx("b",{children:"Config"})," on the right, then"," ",s("apply and reset"),"."]}),l.jsx("li",{style:t,children:"Click on a skill to use it at the selected point in the timeline. The simulation will always jump to when the last animation lock ends and the skill's cooldown becomes available."}),l.jsxs("li",{style:t,children:["Press ",s("u")," to delete the last added action (effective when not running in real-time). Use ",c,"+",s("z"),"and ",c,"+",s("y")," to undo/redo."]}),l.jsx("li",{style:t,children:"Click on a buff applied to self to remove it. Clicking on certain ground-targeted buffs like BLM's Ley Lines, DRK's Salt and Darkness, and SCH's Sacred Soil temporarily disables their effects. Clicking again re-enables them."}),l.jsx("li",{style:t,children:'Click and drag in the visual timeline or use the "Timeline Editor" tab at the bottom of the page to re-arrange skills.'})]}),zh:l.jsxs("ul",{children:[l.jsxs("li",{style:t,children:["",l.jsx("b",{children:""}),""," ",s("")," "]}),l.jsx("li",{style:t,children:"CD"}),l.jsxs("li",{style:t,children:[" ",s("u")," "," ",c,"+",s("z"),"  ",c,"+",s("y")," "]}),l.jsx("li",{style:t,children:"buffbuff"}),l.jsx("li",{style:t,children:""})]}),ja:l.jsxs("ul",{children:[l.jsxs("li",{style:t,children:["",l.jsx("b",{children:""}),"",l.jsx(Ma,{text:""}),""]}),l.jsx("li",{style:t,children:""}),l.jsxs("li",{style:t,children:[l.jsx(Ma,{text:"u"}),""]}),l.jsx("li",{style:t,children:""})]})}),l.jsx("div",{className:"paragraph",children:l.jsx("b",{children:g({en:"Timeline",zh:"",ja:""})})}),g({en:l.jsxs("ul",{children:[l.jsxs("li",{style:t,children:["Holding ",s("shift")," lets you scroll horizontally."]}),l.jsxs("li",{style:t,children:["Click to select/unselect a single skill on the timeline."," ",s("shift"),"+click or click/drag to select a sequence of skills."]}),l.jsxs("li",{style:t,children:["Use ",s("backspace")," or ",s("delete")," to delete the selected skill(s)."]}),l.jsxs("li",{style:t,children:["Use ",c,"+",s("c")," and ",c,"+",s("v")," to copy/paste skills."]}),l.jsx("li",{style:t,children:"Click on the timeline's ruler-like header to view historical game states. Click on somewhere else on the timeline to return to the most recent game state."})]}),zh:l.jsxs("ul",{children:[l.jsxs("li",{style:t,children:[" ",s("shift")," "]}),l.jsxs("li",{style:t,children:[" shift  ",s("shift")," ",""]}),l.jsxs("li",{style:t,children:[" ",s("backspace"),"  ",s("delete")," "]}),l.jsxs("li",{style:t,children:[" ",c,"+",s("c"),"  ",c,"+",s("v")," ",""]}),l.jsx("li",{style:t,children:""})]}),ja:l.jsxs("ul",{children:[l.jsxs("li",{style:t,children:[l.jsx(Ma,{text:"shift"}),""]}),l.jsxs("li",{style:t,children:["",l.jsx(Ma,{text:"shift"}),""]}),l.jsxs("li",{style:t,children:[l.jsx(Ma,{text:"backspace"}),"",l.jsx(Ma,{text:"delete"}),""]}),l.jsxs("li",{style:t,children:["",l.jsx("b",{style:{color:"darkorange"},children:""})," "]})]})}),g({en:l.jsxs("div",{className:"paragraph",children:[l.jsx("span",{style:{color:a.fileDownload,cursor:"pointer"},children:l.jsx("u",{children:"[these]"})})," ","are file download links. Click to download, or right click to choose save location."]}),zh:l.jsxs("div",{className:"paragraph",children:[l.jsx("span",{style:{color:a.fileDownload,cursor:"pointer"},children:l.jsx("u",{children:"[]"})})," ",""]}),ja:l.jsxs("div",{className:"paragraph",children:[l.jsx("span",{style:{color:a.fileDownload,cursor:"pointer"},children:l.jsx("u",{children:"[]"})}),""]})}),g({en:l.jsxs("div",{className:"paragraph",children:["You can save/load fight records at the bottom, under the"," ",l.jsx("b",{children:"Import/Export"})," tab. Most edits are also automatically saved in your browser cache, so it's generally okay to refresh the page and not worry about losing progress."]}),zh:l.jsxs("div",{className:"paragraph",children:[" ",l.jsx("b",{children:"/"})," ","/"]})}),g({en:l.jsxs("div",{className:"paragraph",children:["Hover over ",l.jsx(Fe,{topic:"sampleTips",content:"sample tip"})," ","everywhere to see more tips."]}),zh:l.jsxs("div",{className:"paragraph",children:[" ",l.jsx(Fe,{topic:"sampleTips",content:""})," ",""]}),ja:l.jsxs("div",{className:"paragraph",children:[l.jsx(Fe,{topic:"sampleTips",content:""}),""]})}),g({en:l.jsxs("div",{className:"paragraph",children:["For more detailed instructions, please refer to our"," ",l.jsx("a",{href:"/manual",children:"user manual"}),"."]}),zh:l.jsxs("div",{className:"paragraph",children:["",l.jsx("a",{href:"/manual",children:""}),""]})}),l.jsx("div",{className:"paragraph",style:{marginTop:16},children:l.jsx(ml,{title:"Troubleshoot",titleNode:g({en:l.jsx("b",{children:"troubleshoot"}),zh:l.jsx("b",{children:""}),ja:l.jsx("b",{children:""})}),content:l.jsxs(l.Fragment,{children:[g({en:l.jsxs("div",{children:[l.jsx("div",{className:"paragraph",children:"I can't guarantee that my updates are always backward compatible. If your fight record files aren't loading properly but you don't understand why, contact me and I'll try my best to help."}),l.jsxs("div",{className:"paragraph",children:["If the browser cache is somehow messed up (likely due to invalid game states), this is how to reset it:",l.jsx("br",{}),"Enter this tool from"," ",l.jsx("b",{children:XA+"?{command}"})," replacing"," ",l.jsx("b",{children:"{command}"})," with one of the following:",l.jsxs("ul",{children:[l.jsxs("li",{style:t,children:[l.jsx("b",{children:"resetResourceOverrides"}),": delete all resource overrides and all actions on the current timeline."]}),l.jsxs("li",{style:t,children:[l.jsx("b",{children:"resetAll"}),": delete all browser-cached settings."]})]})]})]}),zh:l.jsxs("div",{children:[l.jsx("div",{className:"paragraph",children:""}),l.jsxs("div",{className:"paragraph",children:["",l.jsx("br",{}),"",l.jsx("b",{children:XA+"?{command}"}),"",l.jsx("b",{children:"{command}"}),"",l.jsxs("ul",{children:[l.jsxs("li",{style:t,children:[l.jsx("b",{children:"resetResourceOverrides"}),": "]}),l.jsxs("li",{style:t,children:[l.jsx("b",{children:"resetAll"}),": "]})]})]})]}),ja:l.jsxs("div",{children:[l.jsx("div",{className:"paragraph",children:""}),l.jsxs("div",{className:"paragraph",children:["",l.jsx("br",{}),l.jsx("b",{children:XA+"?{command}"})," ",l.jsx("b",{children:"{command}"})," ","",l.jsxs("ul",{children:[l.jsxs("li",{style:t,children:[l.jsx("b",{children:"resetResourceOverrides"}),": "]}),l.jsxs("li",{style:t,children:[l.jsx("b",{children:"resetAll"}),": "]})]})]})]})}),l.jsxs("div",{children:[g({en:"Or just: ",zh:""}),l.jsx("button",{className:"dangerButton",onClick:()=>{WN(),window.location.reload()},children:g({en:"[DANGER!] clear browser cache and reload",zh:"[] ",ja:"[] "})})]})]})})})]})}),l.jsx(ml,{defaultShow:!1,title:"About this tool",titleNode:g({en:"About this tool",zh:"",ja:""}),content:l.jsxs("div",{children:[l.jsx("div",{className:"paragraph",children:g({en:"This is a FFXIV simulator & rotation planner.",zh:"FF14/",ja:"FF14"})}),dj(),l.jsx("div",{className:"paragraph",children:g({en:"Some links:",zh:"",ja:""})}),g({en:l.jsxs("ul",{children:[l.jsx("li",{children:l.jsx("a",{href:ci,children:"Github repository"})}),l.jsxs("li",{children:[l.jsx("a",{href:As,children:"Bluesky account"})," and our"," ",l.jsx("a",{href:pu,children:"developer blog"})]}),l.jsxs("li",{children:[l.jsx("a",{href:"https://xivintheshell.github.io/legacy/",children:"XIV in the Shell (Legacy)"}),": a snapshot of this tool at the end of the previous major game patch (currently 7.25)."]}),l.jsxs("li",{children:[l.jsx("a",{href:"https://miyehn.me/ffxiv-blm-rotation-endwalker/",children:"Black Mage in the Shell (Endwalker)"}),": a snapshot of this tool at the end of Endwalker. It also contains some notable fight plans from Endwalker, as memoir."]}),l.jsxs("li",{children:[l.jsx("a",{href:"https://spide-r.github.io/ffxiv-blm-rotation/",children:"Black Mage in the Bozjan Shell"}),": a variation for Save the Queens areas, created by"," ",l.jsx("b",{children:"A'zhek Silvaire @ Zalera"})]}),l.jsx("li",{children:l.jsx("a",{href:"https://na.finalfantasyxiv.com/jobguide/battle/",children:"Official FFXIV job guides"})}),l.jsxs("li",{children:["The Balance's community"," ",l.jsx("a",{href:"https://www.thebalanceffxiv.com/",children:"job guides"})," and"," ",l.jsx("a",{href:qA,children:"Discord"})]})]}),zh:l.jsxs("ul",{children:[l.jsx("li",{children:l.jsx("a",{href:ci,children:"Github"})}),l.jsxs("li",{children:[l.jsx("a",{href:As,children:""}),"",l.jsx("a",{href:pu,children:""}),""]}),l.jsxs("li",{children:[l.jsx("a",{href:"https://xivintheshell.github.io/legacy/",children:""}),"FF147.25"]}),l.jsxs("li",{children:[l.jsx("a",{href:"https://miyehn.me/ffxiv-blm-rotation-endwalker/",children:"6.x"}),"6.x"]}),l.jsxs("li",{children:[l.jsx("a",{href:"https://spide-r.github.io/ffxiv-blm-rotation/",children:"Black Mage in the Bozjan Shell"}),": /"," ",l.jsx("b",{children:"A'zhek Silvaire @ Zalera"})]}),l.jsx("li",{children:l.jsx("a",{href:"https://na.finalfantasyxiv.com/jobguide/battle/",children:""})}),l.jsxs("li",{children:["The Balance",l.jsxs("a",{href:"https://www.thebalanceffxiv.com/",children:[" ",""]})," ",l.jsx("a",{href:qA,children:"Discord"})]})]}),ja:l.jsx("ul",{children:l.jsxs(l.Fragment,{children:[l.jsx("li",{children:l.jsx("a",{href:ci,children:"Github repository"})}),l.jsxs("li",{children:[l.jsx("a",{href:"https://spide-r.github.io/ffxiv-blm-rotation/",children:"Black Mage in the Bozjan Shell"}),": ",l.jsx("b",{children:"A'zhek Silvaire @ Zalera"})]}),l.jsx("li",{children:l.jsx("a",{href:"https://na.finalfantasyxiv.com/jobguide/blackmage/",children:"Official FFXIV black mage job guide"})}),l.jsxs("li",{children:[l.jsxs("a",{target:"_blank",href:qA,rel:"noreferrer",children:[o," resources channel on The Balance"]})," ","Discord"," "]})]})})})]})})]})}function fj(){const e=b.useContext(Rn),t=Al(e,"text");return l.jsxs("div",{style:{display:"inline-block",fontSize:16},children:[l.jsx("style",{children:`
		.linkOption {
			display: inline-block;
			cursor: pointer;
			vertical-align: top;
			margin-top: 1px;
		}
		.linkOption:hover {
			border-bottom: 1px solid;
		}
		`}),l.jsxs("div",{style:{display:"inline-block"},children:[l.jsx(Ql.Provider,{value:{color:t,className:"linkOption"},children:l.jsx("a",{href:As,title:g({en:"Bluesky",zh:""}),children:l.jsx(jM,{})})}),"|",l.jsx(Ql.Provider,{value:{color:t,className:"linkOption"},children:l.jsx("a",{href:ci,title:g({en:"GitHub",zh:"GitHub"}),children:l.jsx(zM,{})})}),"|",l.jsx(Ql.Provider,{value:{color:t,className:"linkOption"},children:l.jsx("a",{href:pu,title:g({en:"Blog",zh:""}),children:l.jsx(YM,{})})}),"|",l.jsx(Ql.Provider,{value:{color:t,className:"linkOption"},children:l.jsx("a",{href:"/manual",title:g({en:"User Manual",zh:""}),children:l.jsx(KM,{})})})]})]})}var Ej={};let cf=e=>{},uf=e=>{},df=e=>{};function mj(e){if(e==="resetAll")WN();else if(e==="resetResourceOverrides"){const t=Rt("gameRecord");for(let a=0;a<pi;a++){let o=Rt("gameRecord"+a.toString());if(a===0&&o===null&&t!==null&&(o=t),o!==null){const s=JSON.parse(o);console.log(s),s.config&&(s.config.initialResourceOverrides=[]),s.actions=[],Tt("gameRecord"+a.toString(),JSON.stringify(s))}}}else e==="code"?console.log("FFLogs authorization triggered."):e==="resetFFLogsAuth"?(console.log("Reset FFLogs PKCE authorization state and session token."),window.sessionStorage.removeItem("fflogsAuthToken"),Dh()):e!==void 0&&console.log("unrecognized command '"+e+"'")}function Aj(e){return l.jsx("div",{style:{flex:3,height:e.height,marginLeft:6,position:"relative",verticalAlign:"top"},children:l.jsx(Kb,{uniqueName:"mainConfig",content:[{titleNode:g({en:"Config",zh:""}),contentNode:l.jsx(D2,{})},{titleNode:g({en:"Control",zh:""}),contentNode:l.jsx(N2,{})}],collapsible:!1,scrollable:!0,height:e.height,defaultSelectedIndex:0})})}function wN(e){const t=e.color??bt().accent;return l.jsx("div",{style:{display:e.hidden===!0?"none":"block",color:t,border:"1px solid "+t,borderRadius:4,padding:"10px 10px 0 10px"},children:e.children})}const GN=ru?"[BETA] ":"";class Rj extends ha.Component{controlRegionRef;gameplayKeyCapture;setColorTheme;state;constructor(t){super(t),mj(t.command),this.state={job:p.getActiveJob(),hasFocus:!1,historical:!1,realTime:!1,controlRegionHeight:0,colorTheme:ff()},this.controlRegionRef=ha.createRef(),this.gameplayKeyCapture=a=>{p.handleKeyboardEvent(a)},cf=a=>{this.setState({job:a});const o=document.querySelector("link[rel~='icon']");o&&(ru?o.href="/favicons/beta.ico":a in dt?o.href="/favicons/"+a.toString().toLocaleLowerCase()+".ico":o.href=Ej.PUBLIC_URL+"/favicon.ico");const s=document.getElementById("pageTitle");s&&(s.text=`${GN}XIV in the Shell (${a})`)},uf=a=>{this.setState({realTime:a})},df=a=>{this.setState({historical:a})},this.setColorTheme=a=>{a!==this.state.colorTheme&&(p.updateAllDisplay(),this.setState({colorTheme:a}),Tt("colorTheme",a))}}componentDidMount(){p.tryAutoLoad(),p.updateAllDisplay(),this.controlRegionRef.current&&new ResizeObserver(()=>{const t=this.controlRegionRef.current?.clientHeight??0;this.setState({controlRegionHeight:t})}).observe(this.controlRegionRef.current)}componentWillUnmount(){cf=t=>{},uf=t=>{},df=t=>{}}render(){const t=ia(this.state.colorTheme),a={height:"100%",accentColor:t.accent,fontFamily:Xi,fontSize:13,color:t.text,backgroundColor:t.background,display:"flex",flexDirection:"column"};let o;this.state.historical?o="2px solid "+t.historical:this.state.hasFocus?this.state.realTime?o="2px solid "+t.realTime:o="2px solid "+t.accent:o="1px solid "+t.bgMediumContrast;const s={marginBottom:"5px"},c=l.jsx("div",{style:{flex:7,display:"inline-block",position:"relative"},children:l.jsxs("div",{onFocus:()=>{this.setState({hasFocus:!0})},onBlur:()=>{this.setState({hasFocus:!1})},style:{display:"inline-block",padding:8,outline:o},tabIndex:-1,ref:this.controlRegionRef,children:[l.jsx(Tw,{}),l.jsx(dP,{})]})}),d=window.innerWidth>1024;return l.jsxs("div",{style:{position:"fixed",top:0,bottom:0,left:0,right:0,outline:"none"},tabIndex:-1,onKeyDown:this.gameplayKeyCapture,children:[l.jsx("style",{children:`
				@supports selector(::-webkit-scrollbar) {
					.visibleScrollbar::-webkit-scrollbar {
						appearance: none;
						background-color: ${t.bgLowContrast};
						height: 8px;
						width: 5px;
					}
					.visibleScrollbar::-webkit-scrollbar-thumb {
						background-color: ${t.bgHighContrast};
					}
					.invisibleScrollbar::-webkit-scrollbar {
						appearance: none;
						background-color: clear;
						height: 8px;
						width: 5px;
					}
					.invisibleScrollbar::-webkit-scrollbar-thumb {
						background-color: ${t.bgHighContrast};
					}
				}
				@supports not selector(::-webkit-scrollbar) {
					.visibleScrollbar {
						scrollbar-color: ${t.bgHighContrast} ${t.bgLowContrast};
						scrollbar-width: auto;
					}
					.invisibleScrollbar {
						scrollbar-width: none;
					}
				}
				a {
					color: ${t.accent};
				}
				b, h1, h2, h3, h4 {
					color: ${t.emphasis};
				}
				p {
					margin-block-start: 10px;
					margin-block-end: 10px;
				}
				p:first-child {
					margin-block-start: 0px;
				}
				::selection {
					background: rgba(147, 112, 219, 0.4);
				}
				option, select {
					color: ${t.text};
					background-color: ${t.background};
				}
				button, input[type="submit"], ::-webkit-file-upload-button {
					color: ${t.text};
					background-color: ${t.bgLowContrast};
					border: 1px solid ${t.bgHighContrast};
				}
				input[type="radio"] {
					appearance: none;
					width: 1em;
					height: 1em;
					border: 1px solid ${t.bgHighContrast};
					border-radius: 50%;
					background-clip: content-box;
					padding: 2px;
				}
				input[type="radio"]:checked {
					background-color: ${t.accent};
				}
				input[type="checkbox"] {
					appearance: none;
					width: 1em;
					height: 1em;
					border: 1px solid ${t.bgHighContrast};
					border-radius: 1px;
					background-clip: content-box;
					padding: 2px;
				}
				input[type="checkbox"]:checked:after {
					content: '\\2714';
					color: ${t.accent};
					position: absolute;
					font-size: 22px;
					top: -6px;
					left: -2px;
				}
				input[type="range"] {
					appearance: none;
					background-color: transparent;
					border: 1px solid ${t.bgHighContrast};
					vertical-align: middle;
					height: 0.9em;
					border-radius: 0.45em;
					overflow: hidden;
					padding: 0.05em;
				}
				input[type="range"]::-webkit-slider-thumb {
					appearance: none;
					background-color: ${t.accent};
					width: 0.8em;
					height: 0.8em;
					border-radius: 0.4em;
				}
				.help-tooltip {
					color: ${t.text};
					background-color: ${t.tipBackground};
					opacity: 0.98;
					max-width: 300px;
					outline: 1px solid ${t.bgHighContrast};
					transition: none;
					font-size: 100%;
					z-index: 10;
				}
				button:disabled {
					background-color: ${t.background};
				}
			`}),l.jsx(Rn.Provider,{value:this.state.colorTheme,children:l.jsxs("div",{style:a,id:"globalHelpTooltipAnchor",children:[l.jsx("div",{style:{flex:1,overflowY:"scroll",overscrollBehaviorY:"contain"},children:l.jsxs("div",{style:{position:"relative",maxWidth:1060,margin:"0 auto",marginTop:40,display:"grid"},children:[l.jsxs("div",{style:{position:"absolute",display:"flex",flexWrap:"wrap",justifySelf:"right",justifyContent:"space-between",alignItems:"flex-start",gap:"1.4em"},children:[d&&l.jsx(fj,{}),l.jsx(nH,{}),l.jsx(Qx,{setColorTheme:this.setColorTheme})]}),l.jsxs("div",{children:[l.jsxs("h3",{style:{marginTop:0,marginBottom:6},children:[GN,"XIV in the Shell"]}),g({en:l.jsxs("div",{style:{marginBottom:16},children:["Last updated: ",WA()," (see ",l.jsx("b",{children:"Changelog"}),")"]}),zh:l.jsxs("div",{style:{marginBottom:16},children:["",WA(),"",l.jsx("b",{children:""}),""]}),ja:l.jsxs("div",{style:{marginBottom:16},children:["",Jx(WA()),"",l.jsx("b",{children:""}),"",l.jsx("a",{href:"https://coda.io/d/_d-N3WFoMZ8e/Black-Mage-in-the-Shell_suRLF",children:""}),""]})}),QM()?l.jsx("div",{style:{margin:"10px 0",padding:"10px",border:"1px solid "+t.warning,color:t.warning,borderRadius:4},children:g({en:l.jsxs("div",{children:["NOTE: Your browser cache contains data from BLM in the Shell before it's updated for Dawntrail. Visit the Endwalker archive at"," ",l.jsx("a",{style:{color:t.warning},href:"https://miyehn.me/ffxiv-blm-rotation-endwalker",children:"miyehn.me/ffxiv-blm-rotation-endwalker"})," ","to access and automatically re-save it. Once you do that, this notice will also go away."]}),zh:l.jsxs("div",{children:["7.06.0",l.jsx("a",{style:{color:t.warning},href:"https://miyehn.me/ffxiv-blm-rotation-endwalker",children:"miyehn.me/ffxiv-blm-rotation-endwalker"}),""]})})}):void 0,ru&&l.jsx(wN,{color:t.warning,children:g({en:l.jsxs("div",{style:{marginBottom:"10px"},children:[l.jsx("span",{children:l.jsx("b",{style:{color:t.warning},children:"You're currently using the BETA version of XIV in the Shell."})}),l.jsxs("ul",{children:[l.jsx("li",{style:s,children:"Things may break in unexpected ways at any time. Use at your own peril, and make sure to export in-progress files frequently."}),l.jsx("li",{style:s,children:"Application data is not shared with the main site. Anything you do here stays here. Files created on the BETA site may not work on the main site, but files made on the main site should be importable here (if they are not, please report this as a bug)."}),l.jsx("li",{style:s,children:"If the page becomes un-loadable, please contact us and tell us what your last actions on the site were, and we can help you debug what went wrong. You can also try resetting your browser's localStorage data for beta.xivintheshell.com."}),l.jsxs("li",{style:s,children:["To report an issue, you can contact us on Discord in The Balance (",l.jsx("a",{href:Rs,children:"#xiv_in_the_shell_support"}),"), or file an issue on"," ",l.jsx("a",{href:"https://github.com/xivintheshell/xivintheshell/issues",children:"our GitHub"}),"."]})]})]}),zh:l.jsxs("div",{style:{marginBottom:"10px"},children:[l.jsx("span",{children:l.jsx("b",{style:{color:t.warning},children:"XIV in the ShellBETA"})}),l.jsxs("ul",{children:[l.jsx("li",{style:s,children:""}),l.jsx("li",{style:s,children:"BETABETAbug"}),l.jsx("li",{style:s,children:"beta.xivintheshell.comlocalStorage"}),l.jsxs("li",{style:s,children:["miyehnQQ870340705",l.jsx("a",{href:"https://github.com/xivintheshell/xivintheshell/issues",children:"GitHub"}),"issue"]})]})]})})}),ru&&l.jsx("div",{style:{margin:"10px"}}),l.jsx(hj,{job:this.state.job}),l.jsx(ml,{defaultShow:!0,title:"7-2-user-survey",titleNode:l.jsx("span",{children:g({en:"7.2 User Survey",zh:"7.2"})}),content:l.jsx(wN,{children:g({en:l.jsx(l.Fragment,{children:l.jsxs("p",{children:["Help us improve XIV in the Shell! Please take our user survey:"," ",l.jsx("b",{children:l.jsx("a",{target:"_blank",rel:"noreferrer",href:"https://forms.gle/eKVygxxZVd894323A",children:"https://forms.gle/eKVygxxZVd894323A"})})]})}),zh:l.jsx(l.Fragment,{children:l.jsxs("p",{children:[""," ",l.jsx("b",{children:l.jsx("a",{target:"_blank",rel:"noreferrer",href:"https://www.wjx.cn/vm/mQ1gV2b.aspx",children:"https://www.wjx.cn/vm/mQ1gV2b.aspx"})})]})})})})})]}),l.jsxs("div",{style:{display:"flex",flexDirection:"row",position:"relative",marginBottom:"20px"},children:[c,l.jsx(Aj,{height:this.state.controlRegionHeight})]}),l.jsx(EP,{}),l.jsx("hr",{style:{margin:"30px 0px",border:"none",borderTop:"1px solid "+t.bgHighContrast}}),l.jsx(B2,{})]})}),l.jsx(sj,{})]})})]})}}const Tj=b.forwardRef(function(t,a){const{className:o,render:s,orientation:c="horizontal",...d}=t,h=b.useMemo(()=>({orientation:c}),[c]);return Ji("div",t,{state:h,ref:a,props:[{role:"separator","aria-orientation":c},d]})}),Sj="https://support.na.square-enix.com/rule.php?id=5382&la=1&tag=authc",Qf="https://www.thebalanceffxiv.com/",Jf="https://www.icy-veins.com/ffxiv/",XD="https://www.fflogs.com/",Ij="https://blog.xivintheshell.com/posts/what-is-xiv-in-the-shell/",qD="https://etro.gg/",aS="https://xivgear.app/",nc="https://github.com/Amarantine-xiv/Amas-FF14-Combat-Sim_source",ZD="https://xivanalysis.com/",QD="https://xivraider.com/",_j="https://na.finalfantasyxiv.com/jobguide/battle/",gj="https://ffxiv.consolegameswiki.com/wiki/FF14_Wiki",JD="http://xivapi.com",$D="https://arcanedisgea.github.io/xiv-id/",ey="https://www.akhmorning.com/allagan-studies/",ty="https://discord.com/channels/277897135515762698/1199477934075953242",ny="https://docs.google.com/document/d/1c1a16tUifUN09KoCgNx1EyOsk1HLYGm-b-q7lz6W8C4/edit",ay="https://docs.google.com/document/d/1c1a16tUifUN09KoCgNx1EyOsk1HLYGm-b-q7lz6W8C4/edit",iy="https://docs.google.com/document/d/13ggP7PoOs-ic6ve_Huo4A2-3Mx7ozeRPXzC7N_edgHU/edit#heading=h.d8b4r5is0qbm",oy="https://www.bilibili.com/read/cv29822181/?jump_opus=1",ly="https://docs.google.com/document/d/1zxUd7vFfs24cGteOeCnEsoCzfDxIvKNROIvDUqG-6no/edit",$f="https://github.com/Tischel/BLMInTheShell",sy="https://github.com/xivintheshell/xivintheshell/blob/main/scripts/csv2track.py",ry="https://github.com/xivintheshell/xivintheshell/wiki/Creating-timeline-tracks",cy="https://colab.research.google.com/drive/1XiVqn-W5teCaXGMtLoq3Zqx5zrk50Fh3?usp=sharing",uy="https://github.com/leifengsang/XivInTheShellMarkerGen",pj="https://en.wikipedia.org/wiki/Random_seed",Nj="https://www.bilibili.com/video/BV1SGvZBAEsm/",Cj="https://actff1.web.sdo.com/project/20190917jobguid/index.html#/index",bj="https://ff14.huijiwiki.com/wiki/%E9%A6%96%E9%A1%B5",Oj="https://bbs.nga.cn/read.php?tid=19736925",Dj="https://asvel.github.io/ffxiv-gearing/",yj=ff(),DR=()=>l.jsx(Tj,{orientation:"vertical",style:{width:"1px",backgroundColor:ia(yj).text}}),dy={marginLeft:"2em",marginTop:"-0.2em",marginBottom:"1em",display:"flex",gap:"0.5rem"};function vj(){return l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:dy,children:[l.jsx("div",{children:l.jsx("i",{children:"by Shanzhe Qi @ Seraph"})}),l.jsx(DR,{}),l.jsx("div",{children:"last updated 19 January 2026"})]}),l.jsxs("p",{className:"no-indent",children:["Welcome to ",l.jsx("i",{children:"XIV in the Shell"}),", a rotation planner tool for ",l.jsx("i",{children:"Final Fantasy XIV"}),"! This page walks you through how to make the most of our timeline creation and manipulation features to improve your gameplay. Use the navigation bar on the right to find help for a specific feature."]}),l.jsxs("p",{children:["This manual only covers how to use this tool for planning, not how to choose what abilities to use in your rotation. For resources for learning and optimizing your job, please refer to other sites like ",l.jsx("a",{href:Qf,children:"The Balance"})," and"," ",l.jsx("a",{href:Jf,children:"Icy Veins"}),". Further information about jobs and FFXIV's combat system can be found in the ",l.jsx("a",{href:"#additional-resources",children:"Additional Resources"})," ","section of this page."]}),l.jsxs("p",{children:["For feedback or questions about this page, please reach out to us on"," ",l.jsx("a",{href:ci,children:"GitHub"})," on Discord through our"," ",l.jsx("a",{href:Rs,children:"support channel in The Balance"}),", or on"," ",l.jsx("a",{href:As,children:"Bluesky"}),"."]}),l.jsxs("p",{children:["This manual page can always be found at ",l.jsx("a",{href:"/manual",children:"xivintheshell.com/manual"})," ","or ",l.jsx("a",{href:"/manual_en",children:"xivintheshell.com/manual_en"}),"."]}),l.jsxs("p",{children:["FINAL FANTASY is a registered trademark of Square Enix Holdings Co., Ltd. Game ability and status images are  SQUARE ENIX, and used for non-commercial purposes in compliance with the ",l.jsx("a",{href:Sj,children:"Final Fantasy XIV Materials Usage License"}),"."]})]})}function Mj(){return l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:dy,children:[l.jsx("i",{children:"Shanzhe Qi @ Seraph"})," ",l.jsx(DR,{})," ",l.jsx("i",{children:"ai"})," ",l.jsx(DR,{})," ","2026119"]}),l.jsxs("p",{children:[" XIV in the ShellXIV",l.jsx("a",{href:Nj,children:""}),""]}),l.jsxs("p",{children:[""," ",l.jsx("a",{href:Qf,children:"The Balance"}),"",l.jsx("a",{href:Jf,children:"Icy Veins"})," ","XIV"]}),l.jsxs("p",{children:["",l.jsx("a",{href:ci,children:"GitHub"})," XIV in the ShellQQ",OR,"",l.jsx("a",{href:Rs,children:"The Balance Discord"}),""," ",l.jsx("a",{href:As,children:"Bluesky"}),""]}),l.jsxs("p",{children:["",l.jsx("a",{href:"/manual",children:"xivintheshell.com/manual"}),"",l.jsx("a",{href:"/manual_zh",children:"xivintheshell.com/manual_zh"}),""]}),l.jsx("p",{children:"FINAL FANTASY  Square Enix Holdings Co., Ltd.  SQUARE ENIXXIV "})]})}const Ne=e=>l.jsx(Ma,{text:e});function Lj(){return l.jsxs(l.Fragment,{children:[l.jsx(Ti,{id:"overview",label:l.jsx(l.Fragment,{children:"Overview"})}),l.jsx(xe,{id:"what-is-xivintheshell",label:l.jsxs(l.Fragment,{children:["What is ",l.jsx("i",{children:"XIV in the Shell"}),"?"]})}),l.jsxs("p",{children:["I answered this question in more detail in our ",l.jsx("a",{href:Ij,children:"first blog post"}),", but Ive copied the important parts here."]}),l.jsx("p",{children:l.jsxs("b",{children:[l.jsx("i",{children:"XIV in the Shell"})," (",l.jsx("a",{href:"/",children:"https://xivintheshell.com"}),") is a web-based FFXIV rotation planner and job simulator."]})}),l.jsx("p",{children:"Thats it! Most high-end raids in FFXIV have very predictable timelines, and the mechanics of each fight force players to react differently to maintain a coherent rotation. Melees may need to disengage, casters may need to save resources for extended movement, and parties may adjust buff window timings in unconventional ways. Our tool lets you compare a DPS timeline against a fight's mechanic timeline and party buff windows, and makes precise planning accessible in a way that traditional spreadsheet-based tools do not."}),l.jsx("p",{children:"Making rotational adaptations on the fly is a valuable skill for raiders to have, but planning while outside instance is useful all the same. Even outside hardcore optimization environments, there are a myriad of reasons to create rotation plans for a fight:"}),l.jsxs("ul",{children:[l.jsx("li",{children:"Theorycrafting sequences for your job"}),l.jsx("li",{children:"Getting more comfortable in fights you haven't yet cleared"}),l.jsx("li",{children:"Getting more comfortable in fights you've already cleared"}),l.jsx("li",{children:"Improving your understanding of a job's fundamentals"}),l.jsx("li",{children:"Moving the colored number on your FFLogs profile up"})]}),l.jsx("p",{children:"Rotation planning can also just be plain fun for its own sake. The interaction between fight mechanics and job kits is a challenging puzzle to solve, and discovering creative solutions then executing them well in-game is a uniquely rewarding experience."}),l.jsx(xe,{id:"features",label:"Features"}),l.jsxs("p",{children:[l.jsx("i",{children:"XIV in the Shell"})," provides the following capabilities:"]}),l.jsxs("ul",{children:[l.jsx("li",{children:"Rotation visualization in both a graphical timeline and spreadsheet-like table"}),l.jsx("li",{children:"Full simulation of cooldowns, buffs, MP, and job gauge resources"}),l.jsx("li",{children:"Customizable starting resources for planning specific phases"}),l.jsxs("li",{children:["Combat stat configuration and import from ",l.jsx("a",{href:qD,children:"etro"}),"/",l.jsx("a",{href:aS,children:"XivGear"})]}),l.jsx("li",{children:"Rotation import from FFLogs"}),l.jsx("li",{children:"Preset fight timelines for most high-end difficulty encounters"}),l.jsx("li",{children:"Rotations and fight markers shareable as text files"}),l.jsx("li",{children:"Customizable buff timings and timeline markers"}),l.jsx("li",{children:"Customizable macros for sequences of multiple skills"}),l.jsx("li",{children:"Potency calculation with party buffs and potion usage"}),l.jsxs("li",{children:["Compatibility with ",l.jsx("a",{href:nc,children:"Amarantine's combat simulator"})," for more advanced DPS simulation"]}),l.jsx("li",{children:"Import/export from plain text, spreadsheets, and Discord emotes"})]}),l.jsx(xe,{id:"quickstart",label:"Quick Start"}),l.jsx("p",{children:"To get started with making a timeline:"}),l.jsxs("ol",{children:[l.jsx("li",{children:'Choose your job and combat stats from the "config" panel to the right of the skill hotbar, then click "apply and reset."'}),l.jsx("p",{children:'[optional] Load fight markers for a specific encounter from the "Timeline markers" tab at the bottom of the page.'}),l.jsx("li",{children:"Input skills by clicking on their icon in the skill hotbar. The simulation will automatically advance to the end of its animation lock or cast time. Clicking a skill will attempt to use it as soon as its cooldown and the current animation lock/GCD timer allows."}),l.jsxs("li",{children:["Rearrange skills by clicking/dragging in the graphical timeline, and hit"," ",Ne("Delete")," to remove selected skills."]}),l.jsx("p",{children:"For more details on how to use or configure specific features, please refer to the corresponding section in the navigation bar on the right."})]}),l.jsx(xe,{id:"shortcuts",label:"Keyboard Shortcuts"}),l.jsxs("p",{children:["The following keyboard shortcuts are available anywhere on the site, except when editing a text/number input field (replace ",Ne("ctrl")," with ",Ne("cmd")," for Mac users):"]}),l.jsxs("ul",{children:[l.jsxs("li",{children:[Ne("u")," Delete the last action in the active timeline."]}),l.jsxs("li",{children:[Ne("ctrl"),"+",Ne("z")," Undo last action."]}),l.jsxs("li",{children:[Ne("ctrl"),"+",Ne("y")," OR ",Ne("ctrl"),"+",Ne("shift"),"+",Ne("z")," Redo last action."]}),l.jsxs("li",{children:[Ne("ctrl"),"+",Ne("c")," Copy selected skills to clipboard. The format can be changed in the Settings tab at the bottom of the page."]}),l.jsxs("li",{children:[Ne("ctrl"),"+",Ne("x")," Cut selected skills to clipboard."]}),l.jsxs("li",{children:[Ne("ctrl"),"+",Ne("v")," Paste skills from the clipboard."]})]}),l.jsxs("ul",{children:[l.jsx("p",{children:'The following shortcuts are available when interacting with the graphical timeline and the "Timeline editor" table:'}),l.jsxs("li",{children:[Ne("Backspace")," OR ",Ne("Delete")," Delete the selected skills from the timeline. Subsequent actions are rearranged to be used as soon as possible."]}),l.jsxs("li",{children:[Ne("")," Select the previous action in the timeline. If no actions are currently selected, select the last action in the timeline."]}),l.jsxs("li",{children:[Ne("")," Select the next action in the timeline. If no actions are currently selected, select the first action in the timeline."]}),l.jsxs("li",{children:[Ne("Home")," Select the first action in the timeline."]}),l.jsxs("li",{children:[Ne("End")," Select the last action in the timeline."]}),l.jsxs("li",{children:[Ne("Shift"),"+",Ne("")," / ",Ne("Shift"),"+",Ne("")," / ",Ne("Shift"),"+",Ne("Home")," /"," ",Ne("Shift"),"+",Ne("End")," Extend the selection window to the previous/next/first/last action."]}),l.jsxs("li",{children:[Ne("Escape")," Deselect all actions."]}),l.jsxs("li",{children:[Ne("ctrl"),"+",Ne("a")," Select all actions."]})]}),l.jsx(xe,{id:"update-policy",label:"Update Policy"}),l.jsxs("p",{children:[l.jsx("i",{children:"XIV in the Shell"})," frequently receives updates to improve user experience and accuracy of its simulations. We make our best effort to ensure our updates do not break saved timelines whenever possible, but cannot always guarantee this, whether due to developer error or in-game changes. Please export your timelines often to reduce the risk of losing work."]}),l.jsxs("p",{children:["Potencies and job mechanics in ",l.jsx("i",{children:"XIV in the Shell"})," reflect those in the latest global server version of FFXIV. We try to make updates available within a few days of each patch release, but may be slower depending on the developers' availability."]}),l.jsx(xe,{id:"technical-details",label:"Quick Technical Details"}),l.jsxs("p",{children:[l.jsx("i",{children:"XIV in the Shell"})," is a client-only single page application. All data is stored within your web browser's localStorage module, so clearing your browsing data for"," ",l.jsx("a",{href:"/",children:"xivintheshell.com"})," will permanently delete all of your saved rotations and markers. This also means that if you lose any data, we (the developers) are unable to recover it for you, because it never leaves the confines of your browser unless you explicitly send us your exported files through some other platform. It is highly unlikely that we will ever maintain a server of any kind, so as to keep development/maintenance costs minimal and reduce the likelihood of site downtime."]}),l.jsxs("p",{children:["This site is made in Typescript with Vite + React, and hosted with GitHub Pages. You can find our source code on GitHub at ",l.jsx("a",{href:ci,children:ci}),". Contributions, bug reports, and feature requests are welcome!"]}),l.jsx(xe,{id:"troubleshooting",label:"Troubleshooting"}),l.jsx("p",{children:"In very rare cases, you may encounter a bug that completely breaks the website, causing it to render nothing but a white screen. If this happens, please raise a bug report with us on GitHub or Discord, and describe the most recent actions you took before the site crashed."}),l.jsx("p",{children:"If you're unable to communicate with us, you may attempt to fix the issue yourself by visiting one of the following links:"}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"xivintheshell.com?resetResourceOverrides"})," Deletes all resource overrides and clears all actions in your saved timelines."]}),l.jsxs("li",{children:[l.jsx("b",{children:"xivintheshell.com?resetAll"})," Deletes all your saved data in"," ",l.jsx("i",{children:"XIV in the Shell"}),"."]}),l.jsxs("li",{children:[l.jsx("b",{children:"xivintheshell.com?resetFFLogsAuth"})," Resets data related to FFLogs authorization."]})]}),l.jsx("p",{children:"If all these steps fail, please clear your browsing data for xivintheshell.com through your web browser's settings. Once again: remember to frequently download and save your timelines, should the worst come to pass!"})]})}function xj(){return l.jsxs(l.Fragment,{children:[l.jsx(Ti,{id:"overview",label:l.jsx(l.Fragment,{children:""})}),l.jsx(xe,{id:"what-is-xivintheshell",label:l.jsx(l.Fragment,{children:"XIV in the Shell "})}),l.jsxs("p",{children:["XIV in the Shell",l.jsx("a",{href:"/",children:"https://xivintheshell.com"}),"XIV"]}),l.jsx("p",{children:"XIV"}),l.jsx("p",{children:""}),l.jsxs("ul",{children:[l.jsx("li",{children:""}),l.jsx("li",{children:""}),l.jsx("li",{children:""}),l.jsx("li",{children:""}),l.jsx("li",{children:" FFLogs "})]}),l.jsx("p",{children:""}),l.jsx(xe,{id:"features",label:""}),l.jsx("p",{children:"XIV in the Shell "}),l.jsxs("ul",{children:[l.jsx("li",{children:""}),l.jsx("li",{children:"CDBuff"}),l.jsx("li",{children:""}),l.jsxs("li",{children:[" ",l.jsx("a",{href:qD,children:"etro"}),"/",l.jsx("a",{href:aS,children:"XivGear"})," ",""]}),l.jsx("li",{children:" FFLogs "}),l.jsx("li",{children:""}),l.jsx("li",{children:""}),l.jsx("li",{children:""}),l.jsx("li",{children:""}),l.jsx("li",{children:""}),l.jsxs("li",{children:["",l.jsx("a",{href:nc,children:"Amarantine"})," DPS "]}),l.jsx("li",{children:"Discord /"})]}),l.jsx(xe,{id:"quickstart",label:""}),l.jsx("p",{children:""}),l.jsxs("ol",{children:[l.jsx("li",{children:""}),l.jsx("p",{children:""}),l.jsx("li",{children:""}),l.jsxs("li",{children:[" ",Ne("Delete")," "]}),l.jsx("p",{children:""})]}),l.jsx(xe,{id:"shortcuts",label:""}),l.jsxs("p",{children:["T/Mac  ",Ne("ctrl")," "," ",Ne("cmd"),""]}),l.jsxs("ul",{children:[l.jsxs("li",{children:[Ne("u")," "]}),l.jsxs("li",{children:[Ne("ctrl"),"+",Ne("z")," "]}),l.jsxs("li",{children:[Ne("ctrl"),"+",Ne("y"),"  ",Ne("ctrl"),"+",Ne("shift"),"+",Ne("z")," "]}),l.jsxs("li",{children:[Ne("ctrl"),"+",Ne("c")," "]}),l.jsxs("li",{children:[Ne("ctrl"),"+",Ne("x")," "]}),l.jsxs("li",{children:[Ne("ctrl"),"+",Ne("v")," "]})]}),l.jsxs("ul",{children:[l.jsx("p",{children:""}),l.jsxs("li",{children:[Ne("Backspace"),"  ",Ne("Delete")," "]}),l.jsxs("li",{children:[Ne("")," "]}),l.jsxs("li",{children:[Ne("")," "]}),l.jsxs("li",{children:[Ne("Home")," "]}),l.jsxs("li",{children:[Ne("End")," "]}),l.jsxs("li",{children:[Ne("Shift"),"+",Ne("")," / ",Ne("Shift"),"+",Ne("")," / ",Ne("Shift"),"+",Ne("Home")," /"," ",Ne("Shift"),"+",Ne("End")," ///"]}),l.jsxs("li",{children:[Ne("Escape")," "]}),l.jsxs("li",{children:[Ne("ctrl"),"+",Ne("a")," "]})]}),l.jsx(xe,{id:"update-policy",label:""}),l.jsx("p",{children:"XIV in the Shell "}),l.jsx(xe,{id:"technical-details",label:""}),l.jsx("p",{children:"XIV in the Shell  xivintheshell.com /"}),l.jsxs("p",{children:[" TypeScript + Vite + React  GitHub Pages"," ",l.jsx("a",{href:ci,children:ci})," Bug "]}),l.jsx(xe,{id:"troubleshooting",label:""}),l.jsx("p",{children:" Bug GitHubQQ Discord "}),l.jsx("p",{children:""}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"xivintheshell.com?resetResourceOverrides"})," ",""]}),l.jsxs("li",{children:[l.jsx("b",{children:"xivintheshell.com?resetAll"}),"  XIV in the Shell "]}),l.jsxs("li",{children:[l.jsx("b",{children:"xivintheshell.com?resetFFLogsAuth"}),"  FFLogs "]})]}),l.jsx("p",{children:" xivintheshell.com"})]})}const qn=e=>l.jsx(Ma,{text:e});function Hj(){return l.jsxs(l.Fragment,{children:[l.jsx(Ti,{id:"timeline-creation",label:"Timeline Creation and Editing"}),l.jsx(xe,{id:"setup-config",label:"Setup and Configuration"}),l.jsx("p",{children:'The "Config" panel to the right of the skill input area lets you adjust combat statistics and other simulation settings.'}),l.jsx($e,{id:1,name:"config"}),l.jsxs("ol",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"Etro/XivGear import"})," Import a gearset from an etro or XivGear link."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Job selector"})," Set the job of the active timeline slot. Combat stats will use a default value for the job, or the most recently-used configuration for that job. Resource overrides are cleared when the job changes."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Information area"})," Summarizes the randomly generated offset of Lucid Dreaming ticks (healers/casters only), DoT ticks, initial resource overrides, and random procs."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Level selector and combat stats"})," Adjust the job level and combat stats. Critical hit, direct hit, and determination are used to estimate the effects of critical hit buffs like SCH's Chain Stratagem and DNC's Devilment, and potency for abilities that always crit or crit-direct hit."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Animation lock"})," Adjust the amount of time an ability's animation takes, preventing you from using other abilities. This should very roughly be 0.6 + 2  (your ping). Certain abilities, such as movement skills and DRG's jumps, have separate animation locks that cannot be configured."]}),l.jsxs("li",{children:[l.jsx("b",{children:"FPS"})," Adjust the estimated FPS of your game client. FFXIV only accepts ability inputs when a new frame is rendered, which can accumulate over time to create delays on GCD actions over the course of a fight. To ignore the effects of FPS, set this value to 9999."]}),l.jsxs("li",{children:[l.jsx("b",{children:"GCD correction"})," Adjust the duration of GCDs and cast times. This should generally be left at 0, but you can use this to shorten or lengthen these durations if you believe the FPS correction formula is inaccurate."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Time till first MP tick"}),' Adjust the amount of time until the first MP tick (also known as the "actor tick") occurs, relative to the start of the simulation. Mostly relevant only for BLM.']}),l.jsxs("li",{children:[l.jsx("b",{children:"Countdown"})," Adjust the amount of time available pre-pull. Setting this to a negative value begins the simulation after the fight has begun."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Random seed and proc mode"})," A ",l.jsx("a",{href:pj,children:"random seed"})," ",`used to determine the occurrence of random events, such as RDM's Verstone Ready and DNC's Feather gauge. The proc mode setting can be set to "RNG" to use this seed, "Never" to prevent all random events from occurring, or "Always" to make random events occur whenever possible.`]})]}),l.jsx($e,{id:2,name:"resource_overrides"}),l.jsxs("ol",{start:11,children:[l.jsxs("li",{children:[l.jsx("b",{children:"Override initial resources"})," Specify the initial values of job gauges, status effects, and cooldowns. This is useful for planning specific phases of long fights in isolation, or for encounters that allow you to prepare resources in advance."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Apply/apply and reset"}),' Pressing "apply" confirms any configuration changes, applying them to the current timeline. "Apply and reset" applies the configuration changes to the current timeline, and clears its previously-saved actions.']})]}),l.jsx($e,{id:3,name:"control"}),l.jsx("p",{children:'The "Control" panel contains simulation settings.'}),l.jsx("p",{children:'When "real-time auto pause" mode is enabled, using an action will simulate its animation lock and cast time in real time, pausing when the next action can be performed. Adjusting the "time scale" field advances through time more quickly.'}),l.jsx("p",{children:'When "manual" mode is enabled, animation locks and cast times are immediately skipped after using an action.'}),l.jsx(xe,{id:"adding-skills",label:"Adding Skills, Time Delays, and Waits"}),l.jsx($e,{id:4,name:"hotbar"}),l.jsxs("p",{children:["Click on a skill's icon in the hotbar ",l.jsx("b",{children:"(1)"})," to add it. It will be inserted at the location of the cursor in the timeline. If action(s) are currently selected, attempting to add a new skill will place it before the selection. Attempting to use a skill will automatically wait for the duration of the skill's cooldown, as well as the current animation lock and/or GCD before activating it."]}),l.jsxs("p",{children:['To configure the number of targets hit by an AoE ability, adjust the "# of targets hit" field ',l.jsx("b",{children:"(2)"}),". This will affect all subsequent AoE ability inputs, and is ignored for abilities that can only hit a single target."]}),l.jsxs("p",{children:['To wait a specified duration after the end of the current animation lock, use the "wait until _ second(s) since" input ',l.jsx("b",{children:"(3)"}),'. This is useful for simulating deliberate "late weaves" with a duration of 0.6s-1.0s, depending on your needs.']}),l.jsxs("p",{children:['To jump to a specific timestamp in a fight (such as the beginning of a mechanic or the end of a downtime phase), use the "Wait until _" input ',l.jsx("b",{children:"(4)"}),". This input will always end at the specified timestamp, even if surrounding skills are rearranged."]}),l.jsxs("p",{children:['To wait until the next MP tick or Lucid Dreaming tick, press the "Wait until MP tick / lucid tick" button ',l.jsx("b",{children:"(5)"}),". This will always wait until the next tick occurs, even if surrounding skills are rearranged."]}),l.jsxs("p",{children:['To delete all wait events at the end of the timeline, use the "Remove trailing idle time" button ',l.jsx("b",{children:"(6)"}),"."]}),l.jsxs("p",{children:["To remove a buff or debuff before its natural expiration time, click its icon in the status section ",l.jsx("b",{children:"(7)"}),". Ground-based abilities such as BLM's Ley Lines, SCH's Sacred Soil, and DRK's Salted Earth, can be temporarily disabled, then later re-enabled, by clicking on them here."]}),l.jsx(xe,{id:"positionals",label:"Positionals and Auto-Attacks"}),l.jsx($e,{id:5,name:"positional"}),l.jsxs("p",{children:['Melee jobs have a pair of "Rear Positional" ',l.jsx("b",{children:"(1)"}),' and "Flank Positional" ',l.jsx("b",{children:"(2)"})," ",'buffs. Abilities with bonuses for landing positional hits will receive bonuses when the appropriate buff is active. Click the appropriate buff icon to toggle it. The "True North" buff will grant all positional bonuses, overriding the effect of these buffs.']}),l.jsxs("p",{children:['Melee and tank jobs have an additional "auto-attacks engaged" buff ',l.jsx("b",{children:"(3)"}),". This is currently only used on PLD to compute Oath Gauge generation, and can be temporarily disabled to simulate disengagements. Using a melee-range weaponskill or ability will automatically re-enable auto-attacks."]}),l.jsx("p",{children:"Potency computation for auto-attacks is not currently supported, and will be added at a later date."}),l.jsx(xe,{id:"skill-sequence-presets",label:"Skill Sequence Presets"}),l.jsx($e,{id:"6",name:"presets"}),l.jsx("p",{children:'Below the skill input window is the "skill sequence presets" menu. Here, you can add sequences of multiple skills that can later be added in bulk to the timeline by clicking on the preset entry.'}),l.jsx("p",{children:"Skills that replace other buttons, such as GNB's Gnashing Fang combo + Continuation and PCT's Red/Green/Blue combo, will automatically transform into the appropriate action when loaded from a preset."}),l.jsx(xe,{id:"timeline-visualization",label:"Timeline Visualization"}),l.jsx("p",{children:"The graphical timeline displays visual information about skill usages and animation locks."}),l.jsx($e,{id:"7",name:"timelines"}),l.jsxs("ol",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"Time ruler"})," Displays timestamp information."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Skill icons"})," A skill icon image represents the usage of a skill (image width not to scale with animation lock time). Mousing over an icon will display a tooltip with its snapshot time, potency, animation lock/cast time, and active damage/haste effects.",l.jsxs("ol",{type:"a",children:[l.jsxs("li",{children:[l.jsx("b",{children:"Cast bars"})," A purple bar represents a cast time, during which other abilities cannot be used. The vertical line in the middle of the bar represents the cast's snapshot time (also known as the slidecast window)."]}),l.jsxs("li",{children:[l.jsx("b",{children:"GCD bars"})," A green bar represents a GCD recast lock."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Animation lock bars"})," (not visible in screenshot) A grey bar represents an animation lock. These are only visible at higher horizontal scale levels, or for abilities with exceptionally long animation locks."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Buff underlines"})," The colored bars beneath a skill icon summarize the haste and amplification buffs that the ability snapshots."]})]})]}),l.jsxs("li",{children:[l.jsx("b",{children:"Damage ticks"})," A red triangle represents the application timing of a damage event. Mousing over a damage tick shows its exact timestamp, potency, and snapshotted buffs."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Heal ticks"})," A green triangle represents the application timing of a heal event. Similar to damage events, mousing over a heal tick will show its timestamp and potency."]}),l.jsxs("li",{children:[l.jsx("b",{children:"MP ticks"}),' A vertical blue line in the background of the timeline represents the timing of a natural MP tick, also known as the "actor tick." These ticks occur every three seconds, and timing of the first tick can be adjusted in the configuration panel.',l.jsx("ol",{type:"a",children:l.jsxs("li",{children:[l.jsx("b",{children:"Lucid Dreaming ticks"})," A light blue triangle represents the timing of a Lucid Dreaming MP tick. These ticks occur every three seconds (independent of the standard actor tick), and the timing of the first tick is randomly generated for each timeline."]})})]}),l.jsxs("li",{children:[l.jsx("b",{children:"Auto-attacks"})," A vertical orange line represents the occurrence of an auto-attack. This is currently only used for PLD to determine Oath Gauge generation."]})]}),l.jsx("p",{children:'If you wish to hide some of these elements, you may do so by unchecking the relevant options in the "Settings" tab at the bottom of the page.'}),l.jsx(xe,{id:"editing-timelines",label:"Editing Timelines"}),l.jsx($e,{id:"8a",name:"editor"}),l.jsxs("p",{children:["Click on a skill icon in the graphical timeline ",l.jsx("b",{children:"(1)"}),' or a row in the "Timeline editor" tab ',l.jsx("b",{children:"(2)"})," to select it. Use ",qn("Shift")," + click, or click and drag on the background of the graphical timeline to select a sequence of skills. While skill(s) are selected, use ",qn("Backspace")," or ",qn("Delete")," to delete them."]}),l.jsxs("p",{children:["When the timeline extends beyond the bounds of the screen, use ",qn("Shift"),' + scroll wheel while your cursor is within the timeline area to scroll through it. You can also adjust the "horizontal scale" slider ',l.jsx("b",{children:"(3)"})," to increase or decrease the number of visible skills."]}),l.jsxs("p",{children:['While skill(s) in the timeline are selected, click and drag their icons in the graphical timeline to rearrange them. While dragging, a blue line will appear indicating the time at which the simulator will try to use the skill. Click the "drag lock" setting'," ",l.jsx("b",{children:"(4)"})," to toggle this behavior to prevent accidental edits. All editing actions can also be undone and redone with ",qn("ctrl"),"+",qn("z")," and ",qn("ctrl"),"+",qn("y"),", respectively. See ",l.jsx("a",{href:"#shortcuts",children:"keyboard shortcuts"})," for additional navigation shortcuts."]}),l.jsxs("p",{children:['Use the "Add timeline slot" button ',l.jsx("b",{children:"(5)"}),' to, you guessed it, add an additional timeline. Use the "Clone timeline slot" button ',l.jsx("b",{children:"(6)"})," to replicate the currently-selected timeline. Up to four timelines can be stored at once."]}),l.jsxs("p",{children:[`Click on the handle next to a timeline to set it as active. Clicking the small "x" at the bottom of the active timeline's handle `,l.jsx("b",{children:"(7)"})," will delete it."]}),l.jsx(xe,{id:"timeline-editor-table",label:"The Timeline Editor Table"}),l.jsx($e,{id:"8b",name:"editor"}),l.jsxs("p",{children:['The "Timeline editor" tab at the bottom of the page provides a compact view of the skills used in the active timeline. Any edits made in this table must be confirmed or discarded with the "apply changes to timeline and save" / "discard changes" buttons on the right ',l.jsx("b",{children:"(1)"}),". If edits would cause a timeline to be invalid (that is, its activation conditions are no longer met), then the offending skill will be highlighted in red, and the first invalid skill will be described in the box to the right of the table."]}),l.jsxs("p",{children:["Clicking a row in the editor table ",l.jsx("b",{children:"(2)"})," selects it. Shift + click allows selecting a range of rows. Dragging and dropping the selected actions will reorder them."]}),l.jsxs("p",{children:['The "move up" and "move down" buttons ',l.jsx("b",{children:"(3)"}),' move the selected actions up or down in the timeline. The "delete selected" button ',l.jsx("b",{children:"(4)"}),' deletes selected actions. The "move end of selection to start of selection" button ',l.jsx("b",{children:"(5)"})," moves the last selected skill ahead of the first selected skill."]}),l.jsxs("p",{children:['"Copy" and "paste" ',l.jsx("b",{children:"(6)"})," copy or paste selected actions to/from the clipboard."]}),l.jsxs("p",{children:['The "undo" and "redo" buttons ',l.jsx("b",{children:"(7)"})," undo or redo the last timeline manipulation action, including those done outside the timeline editor. Undo history is lost upon reloading the page."]})]})}function kj(){return l.jsxs(l.Fragment,{children:[l.jsx(Ti,{id:"timeline-creation",label:""}),l.jsx(xe,{id:"setup-config",label:""}),l.jsx("p",{children:""}),l.jsx($e,{id:1,name:"config"}),l.jsxs("ol",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"Etro / XivGear "}),"  etro  XivGear "]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," ",""]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," ","/DoT"]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," ","/"]}),l.jsxs("li",{children:[l.jsx("b",{children:""}),"   0.6 s + 2  "]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," ","FFXIVGCD 9999"]}),l.jsxs("li",{children:[l.jsx("b",{children:"GCD"}),"  GCD/0"]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," "]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," "]}),l.jsxs("li",{children:[l.jsx("b",{children:"BUFF"})," ","BUFFRNGNeverAlways"]})]}),l.jsx($e,{id:2,name:"resource_overrides"}),l.jsxs("ol",{start:11,children:[l.jsxs("li",{children:[l.jsx("b",{children:""})," ","BUFFCD"]}),l.jsxs("li",{children:[l.jsx("b",{children:"/"})," ",""]})]}),l.jsx($e,{id:3,name:"control"}),l.jsx("p",{children:""}),l.jsx("p",{children:"/"}),l.jsx("p",{children:""}),l.jsx(xe,{id:"adding-skills",label:""}),l.jsx($e,{id:"4",name:"hotbar"}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(1)"})," ",""]}),l.jsxs("p",{children:["AoE ",l.jsx("b",{children:"(2)"}),"  AoE "]}),l.jsxs("p",{children:["____ ",l.jsx("b",{children:"(3)"})," ","GCD0.6s~1.0s"]}),l.jsxs("p",{children:[":"," ",l.jsx("b",{children:"(4)"}),""]}),l.jsxs("p",{children:["/ ",l.jsx("b",{children:"(5)"})," ",""]}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(6)"})," "]}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(7)"}),"  Buff/Debuff Buff/Debuff"]}),l.jsx(xe,{id:"positionals",label:"A"}),l.jsx($e,{id:"5",name:"positional"}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(1)"}),"  ",l.jsx("b",{children:"(2)"})," ",""]}),l.jsxs("p",{children:["A ",l.jsx("b",{children:"(3)"})," ","AAA"]}),l.jsx(xe,{id:"skill-sequence-presets",label:""}),l.jsx($e,{id:"6",name:"presets"}),l.jsx("p",{children:""}),l.jsx("p",{children:"//"}),l.jsx(xe,{id:"timeline-visualization",label:""}),l.jsx("p",{children:"/"}),l.jsx($e,{id:"7",name:"timelines"}),l.jsxs("ol",{children:[l.jsxs("li",{children:[l.jsx("b",{children:""})," "]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," ","//Buff",l.jsxs("ol",{type:"a",children:[l.jsxs("li",{children:[l.jsx("b",{children:""})," ",""]}),l.jsxs("li",{children:[l.jsx("b",{children:"GCD "})," GCD"]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," "]}),l.jsxs("li",{children:[l.jsx("b",{children:"Buff "})," / Buff"]})]})]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," ","Buff"]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," ","Buff"]}),l.jsxs("li",{children:[l.jsx("b",{children:""}),"  3 ",l.jsx("ol",{type:"a",children:l.jsxs("li",{children:[l.jsx("b",{children:""})," ","3"]})})]}),l.jsxs("li",{children:[l.jsx("b",{children:"A"})," "]})]}),l.jsx("p",{children:"A"}),l.jsx(xe,{id:"editing-timelines",label:""}),l.jsx($e,{id:"8a",name:"editor"}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(1)"}),"  ",l.jsx("b",{children:"(2)"})," ","",qn("Shift"),"+"," ",qn("Backspace"),"  ",qn("Delete")," "]}),l.jsxs("p",{children:[" ",qn("Shift"),"+ ",l.jsx("b",{children:"(3)"})," "]}),l.jsxs("p",{children:[""," ",l.jsx("b",{children:"(4)"})," "]}),l.jsxs("p",{children:[" ",qn("ctrl"),"+",qn("z")," / ",qn("ctrl"),"+",qn("y")," ","",l.jsx("a",{href:"#shortcuts",children:""}),""]}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(5)"}),"  ",l.jsx("b",{children:"(6)"})," "," 4 "]}),l.jsxs("p",{children:['"" ',l.jsx("b",{children:"(7)"})," ",""]}),l.jsx(xe,{id:"timeline-editor-table",label:""}),l.jsx($e,{id:"8b",name:"editor"}),l.jsxs("p",{children:[""," ",l.jsx("b",{children:"(1)"})," ",""]}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(2)"})," ",qn("Shift"),"+"]}),l.jsxs("p",{children:['"/" ',l.jsx("b",{children:"(3)"}),"  ",l.jsx("b",{children:"(4)"})," "," ",l.jsx("b",{children:"(5)"})," ",""]}),l.jsxs("p",{children:['"/" ',l.jsx("b",{children:"(6)"})," "]}),l.jsxs("p",{children:['"/" ',l.jsx("b",{children:"(7)"})," ",""]})]})}function Uj(){const e=b.useRef(null);return l.jsxs(l.Fragment,{children:[l.jsx(Ti,{id:"timeline-analysis",label:"Timeline Analysis"}),l.jsx(xe,{id:"damage-table",label:"Potency, PPS, and the Damage Table"}),l.jsx($e,{id:"9",name:"potency"}),l.jsxs("ol",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"Summary statistics"})," The top section summarizes the total potency, potency per second (PPS), number of GCD skills applied, and damage over time (DoT) coverage for the current timeline. When a skill or sequence of skills is selected, these values are updated to reflect the selected range.",l.jsxs("ul",{children:[l.jsx("li",{children:'If an ability has been used but its damage application delay has not yet passed in the simulation, its potency will be described as "pending." To include it in the total potency and PPS calculations, add a "wait" event at the end of your timeline, or use an additional skill.'}),l.jsx("li",{children:"PPS is calculated as damage applied starting from time 0 until the end of the final recorded damage application event. This differs from convention for many jobs, which may calculate time from the start of the first GCD until the end of the cast/recast time of the final GCD."}),l.jsx("li",{children:"Potencies are calculated from the values given in ability tooltips, accounting for bonuses from active status buffs (such as DNC's Technical Step and DRG's Lance Charge + Battle Litany) and job gauge buffs (such as BLM's Enochian and DRG's Life of the Dragon). Because of differences in damage calculation multipliers and other combat stats, potencies in timelines of different jobs (or the same job with different GCD speeds) generally cannot be meaningfully compared with each other without the aid of external potency-to-damage conversion tools."})]})]}),l.jsxs("li",{children:[l.jsx("b",{children:"Tincture potency configuration"})," Potions/tinctures/gemdraughts increase the strength of damaging actions by temporarily boosting the character's main combat stat (STR/DEX/MND/INT). Because ",l.jsx("i",{children:"XIV in the Shell"})," simulates only potencies rather than calculating the full damage formula, we approximate tinctures as an 8% buff to skill potencies. If you need a different approximation value, you may configure it here."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Exclude damage when untargetable"}),' When checked, damage application events and DoT ticks that occur during an "Untargetable" marker are automatically excluded from calculations.']}),l.jsxs("li",{ref:e,children:[l.jsx("b",{children:"Potency table"})," Displays the number of times each ability was cast under different sets of self-applied buffs. Hovering the"," ",l.jsx(Fe,{topic:"manual-sample-help",content:"potency explanation",container:e})," ","tooltip next to a potency value displays the effect of each buff on a skill's potency. When a skill or sequence of skills is selected, these values are updated to reflect the selected range.",l.jsx("ul",{children:l.jsx("li",{children:'The effect of party buffs added through markers, as well as estimated potency boosts from tinctures, are not visible in this breakdown, and only appear in the purple value in the "total" column.'})})]})]}),l.jsx(xe,{id:"dot-breakdown",label:"DoT Breakdown"}),l.jsx($e,{id:"10",name:"thunder"}),l.jsx("p",{children:"Every used DoT ability has a separate table detailing the timing of its usage. The offset at which DoT effects tick is randomly generated for each timeline."}),l.jsxs("ol",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"Cast time and application time"})," The snapshot of the ability, and the time at which the DoT effect was applied."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Gap and override"})," The gap (duration where the DoT debuff was not applied) and override (duration remaining on the previous DoT debuff) for this application of the DoT. The total gap and override are displayed at the bottom of this column."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Initial and DoT"})," The on-hit and per-tick potencies of the DoT, including the effect of self-applied buffs."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Ticks"})," The number of ticks triggered from this DoT application. The total number of hit ticks and the total possible number of ticks, are displayed at the bottom of this column."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Total"})," The total potency from this DoT application, including both the initial hit and subsequent ticks. Similar to the general potency table, the effects of party buff markers and tinctures are displayed here."]})]}),l.jsx("p",{children:`Jobs that attack with summoned pets (DRK's Living Shadow, MCH's Automaton Queen, and SMN's Demi-summons) also have potencies displayed in a DoT table. The per-tick "DoT" column for pets is unreliable, but the total potency column and buff snapshots are correct. This will be updated to be clearer some time in the future.`})]})}function Pj(){const e=b.useRef(null);return l.jsxs(l.Fragment,{children:[l.jsx(Ti,{id:"timeline-analysis",label:""}),l.jsx(xe,{id:"damage-table",label:"PPS"}),l.jsx($e,{id:"9",name:"potency"}),l.jsxs("ol",{children:[l.jsxs("li",{children:[l.jsx("b",{children:""})," PPSGCD DoT ",l.jsxs("ul",{children:[l.jsx("li",{children:""}),l.jsx("li",{children:"PPS  0 GCD GCD"}),l.jsx("li",{children:'/""'})]})]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," /// XIV in the Shell  8% "]}),l.jsxs("li",{children:[l.jsx("b",{children:"Boss0"})," ","DoT"]}),l.jsxs("li",{ref:e,children:[l.jsx("b",{children:""})," Buff"," ",l.jsx(Fe,{topic:"manual-sample-help",content:"",container:e})," ","Buff",l.jsx("ul",{children:l.jsx("li",{children:""})})]})]}),l.jsx(xe,{id:"dot-breakdown",label:"DoT "}),l.jsx($e,{id:"10",name:"thunder"}),l.jsx("p",{children:"DoTDoT "}),l.jsxs("ol",{children:[l.jsxs("li",{children:[l.jsx("b",{children:""})," DoT"]}),l.jsxs("li",{children:[l.jsx("b",{children:"DoTDoT"})," ","DoTDoTDoTDoTDoTDoT"]}),l.jsxs("li",{children:[l.jsx("b",{children:"DoT"})," ","DoTBuff"]}),l.jsxs("li",{children:[l.jsx("b",{children:"DoT"})," ","DoT"]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," ","DoT"]})]}),l.jsx("p",{children:"DoTBuff"})]})}function wj(){return l.jsxs(l.Fragment,{children:[l.jsx(Ti,{id:"fight-markers",label:"Fight and Buff Markers"}),l.jsx(xe,{id:"loading-presets",label:"Loading Preset Fight Markers"}),l.jsx($e,{id:"11",name:"markers"}),l.jsxs("p",{children:[l.jsx("i",{children:"XIV in the Shell"})," provides preset timeline markers for on-content savage and ultimate fights, as well as a variety of other high-end content. These tracks are created by developers and community members, and illustrate precise timings for mechanics, downtimes, and incoming damage."]}),l.jsxs("p",{children:["Clicking the button with the name of a fight ",l.jsx("b",{children:"(1)"})," adds its markers to the graphical timeline. Clicking the name of tracks for certain fights with phases"," ",l.jsx("b",{children:"(2)"})," may also have separate tracks for each phase, explained in more detail in the next section."]}),l.jsx("p",{children:"Presets are split into three categories:"}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"Current content"})," The most recent tier of Savage-difficulty raid encounters, along with the current expansion's Ultimate encounters. This may also contain tracks for certain other high-end content, including Extreme trials, Criterion dungeons, and Quantum bosses."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Legacy ultimates"})," Full encounters or select phases of Ultimate encounters from previous expansions."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Archive"})," Older Savage tiers and other encounters from previous expansions."]})]}),l.jsxs("p",{children:['To load tracks beginning from a certain timestamp, adjust the value in the "Load tracks with time offset" field ',l.jsx("b",{children:"(3)"}),", which adds the specified difference in seconds to all markers (for example, a value of 4 would delay all markers by 4 seconds, and a value of -4 would move all markers forward by 4 seconds). This offset is applied on top of individual phase offsets."]}),l.jsxs("p",{children:['Use the "clear all markers" button ',l.jsx("b",{children:"(4)"}),' to clear all markers. Use "remove duplicates" ',l.jsx("b",{children:"(5)"})," to remove all extra copies of identical markers (same text, timestamp, track number, etc.), which may occur if a fight preset is loaded multiple times by mistake."]}),l.jsx(xe,{id:"loading-presets-phases",label:"Loading Preset Markers for Fights With Phases"}),l.jsx($e,{id:"12",name:"phase_load"}),l.jsxs("p",{children:["If a preset track supports separate phases, click its name ",l.jsx("b",{children:"(1)"})," to expand/collapse timing information for its phases."]}),l.jsxs("p",{children:['The "Load all phases" button ',l.jsx("b",{children:"(2)"})," loads markers for all phases. The default timestamp for the start of a phase is shown next to each field ",l.jsx("b",{children:"(3)"}),". These should be adjusted to account for different kill or push timings. Clicking the name of a particular phase ",l.jsx("b",{children:"(4)"})," loads that phase's markers to the timeline; to create a timeline beginning from the start of a particular phase, set its offset to 0 before loading."]}),l.jsx("p",{children:'The default phase transition timings in presets usually assume the previous phase lasted as long as possible. The beginning of a phase follows the definition provided by FFLogs, which is either the end of a "Down for the Count" debuff, or a boss becoming targetable. You can find these timings for a particular FFLogs report with the `type="targetabilityupdate"` filter, as shown below.'}),l.jsx("img",{src:"assets/ManualScreenshots/targetabilityupdate.png"}),l.jsx("p",{children:"Presets take time to create, and the languages in which they are available depend on the work of the community members that create them. If you're interested in submitting markers for a fight, please reach out to us!"}),l.jsx(xe,{id:"adding-custom-markers",label:"Adding Party Buffs and Custom Markers"}),l.jsx($e,{id:"13a",name:"pct_opener"}),l.jsxs("p",{children:[`In addition to the site's built-in presets, you can add your own markers in the "Add buffs/markers" section `,l.jsx("b",{children:"(1)"}),". Markers are split into three distinct categories:"]}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"Info"})," markers represent generic information about a timeline. This includes events like enemy cast bars, boss movements, and mechanic resolution timings."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Buff"})," markers represent raid buffs granted by party members. All buffs will automatically use their default in-game durations (which can be adjusted to account for edge cases like varying propagation timings or Dance Partner swaps), and their potency boosts are automatically applied to the damage table. You can see which abilities snapshot party buffs and self-applied buffs by a colored underline in the graphical timeline, or by hovering the skill image icon."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Untargetable"}),' markers represent periods of time where all enemies are immune to damage, and cannot be targeted. Damage application events that would "ghost" by a boss becoming untargetable and DoT ticks that occur during an untargetable period are not added to potency totals.']})]}),l.jsxs("p",{children:["Each marker has a track number ",l.jsx("b",{children:"(2)"})," that determines where it is visible in the timeline, where 0 is the bottom-most marker line, and increasing numbers stack on the lines above."]}),l.jsxs("p",{children:["Clicking on a marker in the timeline ",l.jsx("b",{children:"(3)"}),' will remove it, and restore its properties to the "Add buffs/markers" menu for further editing.']}),l.jsx(xe,{id:"exporting-markers",label:"Exporting Markers"}),l.jsx($e,{id:"13b",name:"pct_opener"}),l.jsxs("p",{children:['Marker tracks can be exported and shared with other users in the "Save marker tracks to file" menu ',l.jsx("b",{children:"(1)"}),'. Click the "all tracks combined" link ',l.jsx("b",{children:"(2)"}),' to download a single file containing all markers, which can then be imported through the "Load multiple tracks combined" option ',l.jsx("b",{children:"(3)"}),". Clicking a link corresponding to a single track ",l.jsx("b",{children:"(4)"}),' will export all markers with that track number, which can then be imported with the "Load into individual track" option ',l.jsx("b",{children:"(5)"}),"."]}),l.jsx(xe,{id:"creating-markers-from-logs",label:"Creating Marker Tracks From Logs"}),l.jsx("p",{children:"A single encounter can have a very large number of events that you may wish to encode within a marker track file. In these cases, you will most likely find it easier to produce markers in bulk from an FFLogs report."}),l.jsxs("p",{children:[l.jsx("i",{children:"XIV in the Shell"})," developers use a custom"," ",l.jsx("a",{href:sy,children:"Python script"})," to generate track files from CSV files exported from FFLogs. See ",l.jsx("a",{href:ry,children:"this page"})," for detailed usage instructions. If you're unwilling or unable to run the Python script on your own computer, you may also run it directly in your web browser through our"," ",l.jsx("a",{href:cy,children:"Colab notebook"}),"."]}),l.jsxs("p",{children:["To retrieve markers directly from a report using the FFLogs API, you may also use leifengsang's ",l.jsx("a",{href:uy,children:"XivInTheShellMarkerGen"})," Python script (instructions in Chinese). This script reads a user-provided configuration file with names of enemy cast and damage events, and produces a track file directly from a report ID."]})]})}function Gj(){return l.jsxs(l.Fragment,{children:[l.jsx(Ti,{id:"fight-markers",label:""}),l.jsx(xe,{id:"loading-presets",label:""}),l.jsx($e,{id:"11",name:"markers"}),l.jsx("p",{children:"XIV in the Shell "}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(1)"})," "," ",l.jsx("b",{children:"(2)"})," /"]}),l.jsx("p",{children:""}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("b",{children:""})," ",""]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," "]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," "]})]}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(3)"})," ",""]}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(4)"}),"  ",l.jsx("b",{children:"(5)"})," ",""]}),l.jsx(xe,{id:"loading-presets-phases",label:""}),l.jsx($e,{id:"12",name:"phase_load"}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(1)"})," /"]}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(2)"})," "," ",l.jsx("b",{children:"(3)"})," 0 ",l.jsx("b",{children:"(5)"})," ",""]}),l.jsx("p",{children:' FFLogs BOSSLogs FFLogs  Filter Expression type="targetabilityupdate" '}),l.jsx("img",{src:"assets/ManualScreenshots/targetabilityupdate.png"}),l.jsx("p",{children:""}),l.jsx(xe,{id:"adding-custom-markers",label:""}),l.jsx($e,{id:"13a",name:"pct_opener"}),l.jsxs("p",{children:["Buff ",l.jsx("b",{children:"(1)"})," ",""]}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("b",{children:""})," Boss "]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," ",""]}),l.jsxs("li",{children:[l.jsx("b",{children:""}),"  Boss  DoT "]})]}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(2)"})," 0 "]}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(3)"})," ","Buff"]}),l.jsx(xe,{id:"exporting-markers",label:""}),l.jsx($e,{id:"13b",name:"pct_opener"}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(1)"}),"  ",l.jsx("b",{children:"(2)"})," "," ",l.jsx("b",{children:"(3)"})," "]}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(4)"})," _"," ",l.jsx("b",{children:"(4)"})," "]}),l.jsx(xe,{id:"creating-markers-from-logs",label:"Logs"}),l.jsx("p",{children:" FFLogs "}),l.jsxs("p",{children:["XIV in the Shell ",l.jsx("a",{href:sy,children:"Python"})," FFLogs  CSV ",l.jsx("a",{href:ry,children:""}),""," ",l.jsx("a",{href:cy,children:"Colab notebook"})," "]}),l.jsxs("p",{children:[" ",l.jsx("a",{href:uy,children:"XivInTheShellMarkerGen"})," Python  FFLogs API  ID gui"]})]})}const ul=e=>l.jsx(Ma,{text:e});function Bj(){return l.jsxs(l.Fragment,{children:[l.jsx(Ti,{id:"import-export",label:"Import and Export"}),l.jsx(xe,{id:"exporting-text",label:"Exporting to a Text File"}),l.jsx($e,{id:"14",name:"importexport"}),l.jsxs("p",{children:['You can download the active timeline as a text file from the "Import/Export" menu, by clicking the "txt format" link ',l.jsx("b",{children:"(1)"}),'. This file can then be shared and imported through the "Load from file" menu ',l.jsx("b",{children:"(2)"}),". We recommend you export your plans frequently to avoid accidentally losing progress."]}),l.jsx(xe,{id:"importing-fflogs",label:"Importing From FFLogs"}),l.jsx("p",{children:'Fight plans can be imported directly from FFLogs reports from the "Import fight from FFLogs" menu. This will open a dialog to begin the first step of the log import process.'}),l.jsxs("ol",{children:[l.jsxs("li",{children:["Click the button to allow ",l.jsx("i",{children:"XIV in the Shell"})," to read FFLogs reports on your behalf."]}),l.jsxs("li",{children:["Paste a log report URL. The link may contain a full report, a specific fight number, and/or a specific player number.",l.jsxs("ol",{type:"a",children:[l.jsx("li",{children:"If the URL did not specify a single fight, click the desired pull from the list of fights."}),l.jsx("li",{children:"After choosing a specific fight and a player was not specified in the URL, click the desired player name from the list of players."})]})]}),l.jsx("li",{children:"Enter the combat stats of the selected player. Due to limitations with FFLogs, all stats for players other than the creator of the log must be entered manually or estimated, and will use the values of the most recently-created timeline for that job by default."}),l.jsxs("li",{children:['After pressing "go," ',l.jsx("i",{children:"XIV in the Shell"}),' will import the list of actions from the log to the active timeline slot, automatically inserting "wait" and "delay" events as appropriate. You will see a table summarizing the differences between simulated timestamps and those recorded in the log, as well as a list of actions that the simulation believes did not meet their activation requirements. After closing the dialog, you may edit the configuration and timeline actions as needed to make the timeline valid.']})]}),l.jsx(xe,{id:"text-copy-paste",label:"Text Copy/Paste"}),l.jsxs("p",{children:[l.jsx("i",{children:"XIV in the Shell"})," allows copy/pasting sequences of actions with ",ul("ctrl"),"+",ul("c")," and ",ul("ctrl"),"+",ul("v"),". Three different formats are supported:"]}),l.jsx("p",{children:l.jsx("i",{children:"Example sequence: Fire III, Fire IV, Despair"})}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"Plain text"})," A comma-separated list of actions names.",l.jsx("p",{className:"no-indent",children:l.jsx("i",{children:"Example:"})}),l.jsx("p",{children:"Fire 3, Fire 4, Despair"})]}),l.jsxs("li",{children:[l.jsx("b",{children:"Tab-separated lines"})," A tab-separated list of usage timestamps, target counts, and skill names, compatible with external spreadsheet applications.",l.jsx("p",{className:"no-indent",children:l.jsx("i",{children:"Example:"})}),l.jsx("table",{style:{marginLeft:"1.5rem"},children:l.jsxs("tbody",{children:[l.jsxs("tr",{children:[l.jsx("td",{children:"-3.500"}),l.jsx("td",{children:"1"}),l.jsx("td",{children:"Fire 3"})]}),l.jsxs("tr",{children:[l.jsx("td",{children:"0.042"}),l.jsx("td",{children:"1"}),l.jsx("td",{children:"Fire 4"})]}),l.jsxs("tr",{children:[l.jsx("td",{children:"2.500"}),l.jsx("td",{children:"1"}),l.jsx("td",{children:"despair"})]})]})})]}),l.jsxs("li",{children:[l.jsx("b",{children:"Discord emotes"})," A sequence of Discord emotes (only verified for BLM and PCT).",l.jsx("p",{className:"no-indent",children:l.jsx("i",{children:"Example:"})}),l.jsx("p",{children:":F3: :F4: :Despair:"})]})]}),l.jsxs("p",{children:["The format copied to the clipboard from ",l.jsx("i",{children:"XIV in the Shell"}),' is determined by the "Clipboard copy mode" found in the "Settings" tab at the bottom of the page. Pasting from any of these three formats is always valid, regardless of the value of this setting.']}),l.jsx(xe,{id:"exporting-images",label:"Exporting an Image"}),l.jsx($e,{id:"18b",name:"importexport"}),l.jsxs("p",{children:["Besides using your computer's built-in screenshot functionality, you may also use"," ",l.jsx("i",{children:"XIV in the Shell"}),`'s "Image Export" feature to download a timeline as a PNG image.`]}),l.jsxs("p",{children:['To export the selected portion of a timeline as an image, press the "export selection as png" link ',l.jsx("b",{children:"(1)"}),". If no actions are selected, the entirety of the active timeline is selected."]}),l.jsxs("p",{children:['To split the exported image across multiple lines, set the "seconds before wrapping" field ',l.jsx("b",{children:"(2)"})," to a non-zero value. Each row in the image will contain at most the specified number of seconds."]}),l.jsx("p",{children:'To omit the time ruler and fight markers from export, uncheck the "include time and markers" setting. Timeline elements in the export are also affected by the display settings configured in the "Settings" tab.'}),l.jsx(xe,{id:"exporting-damage-logs",label:"Exporting Damage Logs"}),l.jsx($e,{id:"17",name:"damageexport"}),l.jsxs("p",{children:['You can export a detailed log of all damage events by clicking the "downloaded detailed damage log as CSV file" button ',l.jsx("b",{children:"(1)"})," above the site's potency summary table. The output contains 3 columns:"]}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"time"})," The decimal timestamp, in seconds, at which the damage event occurred."]}),l.jsxs("li",{children:[l.jsx("b",{children:"damageSource"})," The name and usage time of the ability that caused this damage event."]}),l.jsxs("li",{children:[l.jsx("b",{children:"potency"})," The total potency (including buffs and modifiers) of this damage event."]})]}),l.jsx(xe,{id:"exporting-for-external-tools",label:"Exporting for External Tools"}),l.jsx($e,{id:"18b",name:"importexport"}),l.jsxs("p",{children:[`Use the "excel / Tischel's plugin csv format" download link `,l.jsx("b",{children:"(1)"})," to generate a file compatible with external tools, like spreadsheet software or Tischel's"," ",l.jsx("a",{href:$f,children:"BLM in the Shell Plugin"}),". The exported CSV will contain the following columns:"]}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"time"})," The decimal timestamp, in seconds, at which the action was used."]}),l.jsxs("li",{children:[l.jsx("b",{children:"action"})," The name of the action used."]}),l.jsxs("li",{children:[l.jsx("b",{children:"isGCD"})," 1 if the action is a GCD ability, 0 if not."]}),l.jsxs("li",{children:[l.jsx("b",{children:"castTime"})," The duration, in seconds, of this action's cast time. 0 If the action did not have a cast time."]})]}),l.jsx(xe,{id:"exporting-for-combat-sim",label:"Exporting to Amarantine's Combat Simulator"}),l.jsxs("p",{children:[l.jsx("a",{href:nc,children:"Amarantine's Combat Simulator"})," provides powerful DPS simulation and kill time estimation capabilities. ",l.jsx("i",{children:"XIV in the Shell"})," can be used to generate and edit timelines that are compatible with this simulator, and both tools are used by many speedkill teams as part of their planning process."]}),l.jsxs("p",{children:[`To download a CSV file compatible with Ama's Combat Sim, use the "Amarantine's combat simulator csv format" download link `,l.jsx("b",{children:"(2)"}),". The generated CSV file will also contain metadata headers describing the configured combat stats, external party buff timeline markers, and untargetable downtime windows."]}),l.jsxs("p",{children:["Note that if the configured combat stats were originally imported from XivGear or etro, stats in the gearset that cannot be directly configured within ",l.jsx("i",{children:"XIV in the Shell"})," ","(WD, STR/DEX/MND/INT, and TEN) will also be included in the export file for simulation purposes."]})]})}function Fj(){return l.jsxs(l.Fragment,{children:[l.jsx(Ti,{id:"import-export",label:""}),l.jsx(xe,{id:"exporting-text",label:""}),l.jsx($e,{id:"14",name:"importexport"}),l.jsxs("p",{children:['"/""txt " ',l.jsx("b",{children:"(1)"}),"txt ",l.jsx("b",{children:"(2)"})," ",""]}),l.jsx(xe,{id:"importing-fflogs",label:" FFLogs "}),l.jsx("p",{children:'" FFLogs "'}),l.jsxs("ol",{children:[l.jsx("li",{children:" XIV in the Shell  FFLogs "}),l.jsxs("li",{children:["FFLogs/",l.jsxs("ol",{type:"a",children:[l.jsx("li",{children:""}),l.jsx("li",{children:""})]})]}),l.jsx("li",{children:" FFLogs "}),l.jsx("li",{children:"XIV in the Shell "})]}),l.jsx(xe,{id:"text-copy-paste",label:"/"}),l.jsxs("p",{children:["XIV in the Shell  ",ul("ctrl"),"+",ul("c")," / ",ul("ctrl"),"+",ul("v")," ",""]}),l.jsx("p",{children:l.jsx("i",{children:""})}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("b",{children:""})," ","",l.jsx("p",{className:"no-indent",children:l.jsx("i",{children:""})}),l.jsx("p",{children:""})]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," ",l.jsx("p",{className:"no-indent",children:l.jsx("i",{children:""})}),l.jsx("table",{style:{marginLeft:"1.5rem"},children:l.jsxs("tbody",{children:[l.jsxs("tr",{children:[l.jsx("td",{children:"-3.500"}),l.jsx("td",{children:"1"}),l.jsx("td",{children:""})]}),l.jsxs("tr",{children:[l.jsx("td",{children:"0.042"}),l.jsx("td",{children:"1"}),l.jsx("td",{children:""})]}),l.jsxs("tr",{children:[l.jsx("td",{children:"2.500"}),l.jsx("td",{children:"1"}),l.jsx("td",{children:""})]})]})})]}),l.jsxs("li",{children:[l.jsx("b",{children:"Discord "})," Discord / ",l.jsx("p",{className:"no-indent",children:l.jsx("i",{children:""})}),l.jsx("p",{children:":F3: :F4: :Despair:"})]})]}),l.jsx("p",{children:""}),l.jsx(xe,{id:"exporting-images",label:""}),l.jsx($e,{id:"18b",name:"importexport"}),l.jsx("p",{children:" PNG"}),l.jsxs("p",{children:['" png" ',l.jsx("b",{children:"(1)"})," ",""]}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(2)"})," "]}),l.jsx("p",{children:""}),l.jsx(xe,{id:"exporting-damage-logs",label:""}),l.jsx($e,{id:"17",name:"damageexport"}),l.jsxs("p",{children:['"CSV" ',l.jsx("b",{children:"(1)"})," ",""]}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"time"})," "]}),l.jsxs("li",{children:[l.jsx("b",{children:"damageSource"})," "]}),l.jsxs("li",{children:[l.jsx("b",{children:"potency"})," Buff"]})]}),l.jsx(xe,{id:"exporting-for-external-tools",label:""}),l.jsx($e,{id:"18a",name:"importexport"}),l.jsxs("p",{children:['"excel / Tischel CSV " ',l.jsx("b",{children:"(1)"}),"  Tischel "," ",l.jsx("a",{href:$f,children:"BLM in the Shell Plugin"})," "]}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"time"})," "]}),l.jsxs("li",{children:[l.jsx("b",{children:"action"})," "]}),l.jsxs("li",{children:[l.jsx("b",{children:"isGCD"})," 1GCD 0 "]}),l.jsxs("li",{children:[l.jsx("b",{children:"castTime"})," 0"]})]}),l.jsx(xe,{id:"exporting-for-combat-sim",label:"Amarantine"}),l.jsxs("p",{children:[l.jsx("a",{href:nc,children:"Amarantine"})," DPS XIV in the Shell "]}),l.jsxs("p",{children:[' Amarantine CSV "Amarantine CSV " ',l.jsx("b",{children:"(2)"}),""]}),l.jsx("p",{children:" CSV "}),l.jsx("p",{children:" XivGear  etro  XIV in the Shell "})]})}function jj(){return l.jsxs(l.Fragment,{children:[l.jsx(Ti,{id:"additional-resources",label:"Additional Resources"}),l.jsxs("p",{children:[l.jsx("i",{children:"XIV in the Shell"}),": ",l.jsx("a",{href:ci,children:"GitHub"})," - ",l.jsx("a",{href:pu,children:"Blog"})," -"," ",l.jsx("a",{href:As,children:"Bluesky"})," -"," ",l.jsx("a",{href:Rs,children:"Discord channel in The Balance"})," -"," ",l.jsx("a",{href:$f,children:"Tischel's BLM in the Shell Dalamud Plugin"})]}),l.jsxs("p",{children:["Game assets and information:"," ",l.jsx("a",{href:_j,children:"Official FFXIV PvE job guide"})," -"," ",l.jsx("a",{href:gj,children:"FFXIV Community Wiki"})," - ",l.jsx("a",{href:JD,children:"XIVAPI"})," -"," ",l.jsx("a",{href:$D,children:"XIV-ID"})]}),l.jsxs("p",{children:["Job gameplay: ",l.jsx("a",{href:Qf,children:"The Balance"})," -"," ",l.jsx("a",{href:Jf,children:"Icy Veins"})," - ",l.jsx("a",{href:XD,children:"FFLogs"})]}),l.jsxs("p",{children:["Game formulas, mechanics, and other cursed knowledge:"," ",l.jsx("a",{href:ey,children:"Allagan Studies"})," -"," ",l.jsx("a",{href:ty,children:"#battle_system_discussion in The Balance"})," - Savage Speedkill Memorandum [",l.jsx("a",{href:ny,children:"JP"}),"][",l.jsx("a",{href:ay,children:"EN"}),"] -"," ",l.jsx("a",{href:iy,children:"Game's Haunted"})," - FPS tax research [",l.jsx("a",{href:oy,children:"CN"}),"][",l.jsx("a",{href:ly,children:"EN"}),"]"]}),l.jsxs("p",{children:["Other FFXIV community tools: ",l.jsx("a",{href:ZD,children:"xivanalysis"})," -"," ",l.jsx("a",{href:aS,children:"XivGear"})," - ",l.jsx("a",{href:QD,children:"XIV Raider"})," and"," ",l.jsx("a",{href:nc,children:"Ama's Combat Sim"})]})]})}function zj(){return l.jsxs(l.Fragment,{children:[l.jsx(Ti,{id:"additional-resources",label:""}),l.jsxs("p",{children:[l.jsx("i",{children:"XIV in the Shell"}),": ",l.jsx("a",{href:ci,children:"GitHub"})," - ",l.jsx("a",{href:pu,children:"Blog"})," -"," ",l.jsx("a",{href:As,children:"Bluesky"})," - ",l.jsx("a",{href:Rs,children:"Discord"})," -"," ",l.jsx("a",{href:$f,children:"TischelBLM in the Shell"})]}),l.jsxs("p",{children:[": ",l.jsx("a",{href:Cj,children:"XIV"})," -"," ",l.jsx("a",{href:bj,children:"XIVwiki"})," - ",l.jsx("a",{href:JD,children:"XIVAPI"})," -"," ",l.jsx("a",{href:$D,children:"XIV-ID"})]}),l.jsxs("p",{children:[": ",l.jsx("a",{href:Qf,children:"The Balance"})," -"," ",l.jsx("a",{href:Jf,children:"Icy Veins"})," - ",l.jsx("a",{href:XD,children:"FFLogs"})]}),l.jsxs("p",{children:[": ",l.jsx("a",{href:ey,children:"Allagan Studies"})," -"," ",l.jsx("a",{href:Oj,children:" "})," -"," ",l.jsx("a",{href:ty,children:"The Balance"})," -  [",l.jsx("a",{href:ny,children:""}),"][",l.jsx("a",{href:ay,children:""}),"] -"," ",l.jsx("a",{href:iy,children:"Game's Haunted"})," -  [",l.jsx("a",{href:oy,children:""}),"][",l.jsx("a",{href:ly,children:""}),"]"]}),l.jsxs("p",{children:[": ",l.jsx("a",{href:ZD,children:"xivanalysis"})," -"," ",l.jsx("a",{href:Dj,children:"14"})," - ",l.jsx("a",{href:QD,children:"XIV Raider"})," "," ",l.jsx("a",{href:nc,children:"Ama"})]})]})}const yR=ff(),eE=b.createContext({items:[],addItem:()=>{}});function Yj(e){const t=b.useContext(eE);return l.jsxs("nav",{style:{float:"right",zIndex:1,maxWidth:"18%"},children:[l.jsx("p",{className:"no-indent",style:{paddingLeft:"0.8rem"},children:e.language==="zh"?"":"Navigation"}),l.jsxs("ul",{style:{listStyleType:"none",paddingLeft:"0.8rem",marginTop:"0.3rem"},children:[l.jsx("li",{style:{paddingBlockEnd:"0.15rem"},children:l.jsx("a",{href:"#top",children:e.language==="zh"?"":"back to top"})}),t.items.map(({id:a,label:o,indentLevel:s})=>l.jsx("li",{style:{paddingLeft:s>0?`${s*1.5}em`:void 0,paddingBlock:"0.15rem"},children:l.jsx("a",{href:"#"+a,children:o})},a))]})]})}function Ti(e){const t=b.useContext(eE);return b.useEffect(()=>t.addItem({id:e.id,label:e.label,indentLevel:0}),[]),l.jsxs(l.Fragment,{children:[l.jsx("h2",{id:e.id,children:e.label}),e.content]})}function xe(e){const t=b.useContext(eE);return b.useEffect(()=>t.addItem({id:e.id,label:e.label,indentLevel:1}),[]),l.jsxs(l.Fragment,{children:[l.jsx("h3",{id:e.id,children:e.label}),e.content]})}const hy=b.createContext("en");function $e(e){const t=b.useContext(hy),a=`${e.id}_${yR==="Dark"?"D":"L"}_${t==="zh"?"Z":"E"}_${e.name}.jpg`;return l.jsx("img",{src:`assets/ManualScreenshots/${a}`,alt:e.alt})}function ZA(e){const t=ia(yR),a=l.jsx("style",{children:`
		@supports selector(::-webkit-scrollbar) {
			.visibleScrollbar::-webkit-scrollbar {
				appearance: none;
				background-color: ${t.bgLowContrast};
				height: 8px;
				width: 10px;
			}
			.visibleScrollbar::-webkit-scrollbar-thumb {
				background-color: ${t.bgHighContrast};
			}
		}
		@supports not selector(::-webkit-scrollbar) {
			.visibleScrollbar {
				scrollbar-color: ${t.bgHighContrast} ${t.bgLowContrast};
			}
		}
		a {
			color: ${t.accent};
		}
		b, h1, h2, h3, h4 {
			color: ${t.emphasis};
			margin-bottom: 0.2em;
		}
		p {
			margin-block-start: 0.2em;
			margin-block-end: 0.2em;
			text-indent: 2em;
		}
		.no-indent {
			text-indent: 0;
		}
		p:first-child {
			margin-block-start: 0px;
		}
		.help-tooltip {
			color: ${t.text};
			background-color: ${t.tipBackground};
			opacity: 0.98;
			max-width: 300px;
			outline: 1px solid ${t.bgHighContrast};
			transition: none;
			font-size: 100%;
			z-index: 10;
		}
		button:disabled {
			background-color: ${t.background};
		}
		img {
			width: 80%;
			max-width: fit-content;
			border: 2px dashed ${ia(yR).bgMediumContrast};
			align-self: center;
			margin: 5px;
		}
		ul {
			margin-block: 0;
		}
		ol {
			margin-block: 0;
		}
	`}),o=b.useRef(null);b.useEffect(()=>{o.current?.focus();const h=window.location.hash.slice(1);h&&o.current&&setTimeout(()=>{const m=document.getElementById(h);if(m&&o.current){const R=o.current.getBoundingClientRect(),T=m.getBoundingClientRect(),S=o.current.scrollTop,I=T.top-R.top+S;o.current.scrollTo({top:I-20,behavior:"smooth"})}},100)},[]);const[s,c]=b.useState([]),d=b.useCallback(({id:h,label:f,indentLevel:m})=>{c(R=>R.find(T=>T.id===h)?R:[...R,{id:h,label:f,indentLevel:m}])},[]);return l.jsxs("div",{ref:o,className:"visibleScrollbar",style:{position:"fixed",top:0,bottom:0,left:0,right:0,outline:"none",accentColor:t.accent,fontFamily:Xi,fontSize:14,color:t.text,backgroundColor:t.background,height:"100%",overflow:"auto"},tabIndex:-1,children:[a,l.jsxs(eE.Provider,{value:{items:s,addItem:d},children:[window.innerWidth>1024&&l.jsx("div",{id:"nav-container",style:{position:"sticky",top:"1rem",marginInline:"1rem"},children:l.jsx(Yj,{language:e.language})}),l.jsx(hy.Provider,{value:e.language??"en",children:l.jsx("div",{style:{marginLeft:"1em",marginRight:"1em",paddingRight:"1em",marginBottom:"1em",display:"flex",flexDirection:"column"},tabIndex:-1,children:e.language==="zh"?Vj():Kj()})})]})]})}function Kj(){return l.jsxs(l.Fragment,{children:[l.jsx("h1",{id:"top",children:"XIV in the Shell User Manual"}),l.jsx(vj,{}),l.jsx(Lj,{}),l.jsx(Hj,{}),l.jsx(Uj,{}),l.jsx(wj,{}),l.jsx(Bj,{}),l.jsx(jj,{})]})}function Vj(){return l.jsxs(l.Fragment,{children:[l.jsx("h1",{id:"top",children:"XIV in the Shell "}),l.jsx(Mj,{}),l.jsx(xj,{}),l.jsx(kj,{}),l.jsx(Pj,{}),l.jsx(Gj,{}),l.jsx(Fj,{}),l.jsx(zj,{})]})}const ch=HM.createRoot(document.getElementById("root")),Wj=new URLSearchParams(document.location.search),BN=Array.from(Wj.keys()),_r=window.location.pathname;_r==="/manual"||_r==="/manual/"?ch.render(l.jsx(ZA,{language:Rt("language")??void 0})):_r==="/manual_en"||_r==="/manual_en/"?ch.render(l.jsx(ZA,{language:"en"})):_r==="/manual_zh"||_r==="/manual_zh/"?ch.render(l.jsx(ZA,{language:"zh"})):ch.render(l.jsx(Rj,{command:BN.length>0?BN[0]:void 0}));
