function DM(e,t){for(var n=0;n<t.length;n++){const o=t[n];if(typeof o!="string"&&!Array.isArray(o)){for(const s in o)if(s!=="default"&&!(s in e)){const c=Object.getOwnPropertyDescriptor(o,s);c&&Object.defineProperty(e,s,c.get?c:{enumerable:!0,get:()=>o[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function n(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerPolicy&&(c.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?c.credentials="include":s.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(s){if(s.ep)return;s.ep=!0;const c=n(s);fetch(s.href,c)}})();function zN(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function yM(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function o(){var s=!1;try{s=this instanceof o}catch{}return s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(o){var s=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(n,o,s.get?s:{enumerable:!0,get:function(){return e[o]}})}),n}var EA={exports:{}},tu={};var W_;function vM(){if(W_)return tu;W_=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(o,s,c){var d=null;if(c!==void 0&&(d=""+c),s.key!==void 0&&(d=""+s.key),"key"in s){c={};for(var f in s)f!=="key"&&(c[f]=s[f])}else c=s;return s=c.ref,{$$typeof:e,type:o,key:d,ref:s!==void 0?s:null,props:c}}return tu.Fragment=t,tu.jsx=n,tu.jsxs=n,tu}var X_;function MM(){return X_||(X_=1,EA.exports=vM()),EA.exports}var l=MM(),mA={exports:{}},au={},AA={exports:{}},RA={};var q_;function LM(){return q_||(q_=1,function(e){function t(P,K){var ne=P.length;P.push(K);e:for(;0<ne;){var fe=ne-1>>>1,M=P[fe];if(0<s(M,K))P[fe]=K,P[ne]=M,ne=fe;else break e}}function n(P){return P.length===0?null:P[0]}function o(P){if(P.length===0)return null;var K=P[0],ne=P.pop();if(ne!==K){P[0]=ne;e:for(var fe=0,M=P.length,ee=M>>>1;fe<ee;){var ce=2*(fe+1)-1,W=P[ce],z=ce+1,Q=P[z];if(0>s(W,ne))z<M&&0>s(Q,W)?(P[fe]=Q,P[z]=ne,fe=z):(P[fe]=W,P[ce]=ne,fe=ce);else if(z<M&&0>s(Q,ne))P[fe]=Q,P[z]=ne,fe=z;else break e}}return K}function s(P,K){var ne=P.sortIndex-K.sortIndex;return ne!==0?ne:P.id-K.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;e.unstable_now=function(){return c.now()}}else{var d=Date,f=d.now();e.unstable_now=function(){return d.now()-f}}var h=[],m=[],R=1,T=null,S=3,g=!1,p=!1,_=!1,O=!1,D=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;function y(P){for(var K=n(m);K!==null;){if(K.callback===null)o(m);else if(K.startTime<=P)o(m),K.sortIndex=K.expirationTime,t(h,K);else break;K=n(m)}}function x(P){if(_=!1,y(P),!p)if(n(h)!==null)p=!0,G||(G=!0,j());else{var K=n(m);K!==null&&V(x,K.startTime-P)}}var G=!1,B=-1,Y=5,X=-1;function ie(){return O?!0:!(e.unstable_now()-X<Y)}function oe(){if(O=!1,G){var P=e.unstable_now();X=P;var K=!0;try{e:{p=!1,_&&(_=!1,L(B),B=-1),g=!0;var ne=S;try{t:{for(y(P),T=n(h);T!==null&&!(T.expirationTime>P&&ie());){var fe=T.callback;if(typeof fe=="function"){T.callback=null,S=T.priorityLevel;var M=fe(T.expirationTime<=P);if(P=e.unstable_now(),typeof M=="function"){T.callback=M,y(P),K=!0;break t}T===n(h)&&o(h),y(P)}else o(h);T=n(h)}if(T!==null)K=!0;else{var ee=n(m);ee!==null&&V(x,ee.startTime-P),K=!1}}break e}finally{T=null,S=ne,g=!1}K=void 0}}finally{K?j():G=!1}}}var j;if(typeof w=="function")j=function(){w(oe)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,Ee=$.port2;$.port1.onmessage=oe,j=function(){Ee.postMessage(null)}}else j=function(){D(oe,0)};function V(P,K){B=D(function(){P(e.unstable_now())},K)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(P){P.callback=null},e.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<P?Math.floor(1e3/P):5},e.unstable_getCurrentPriorityLevel=function(){return S},e.unstable_next=function(P){switch(S){case 1:case 2:case 3:var K=3;break;default:K=S}var ne=S;S=K;try{return P()}finally{S=ne}},e.unstable_requestPaint=function(){O=!0},e.unstable_runWithPriority=function(P,K){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var ne=S;S=P;try{return K()}finally{S=ne}},e.unstable_scheduleCallback=function(P,K,ne){var fe=e.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?fe+ne:fe):ne=fe,P){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=ne+M,P={id:R++,callback:K,priorityLevel:P,startTime:ne,expirationTime:M,sortIndex:-1},ne>fe?(P.sortIndex=ne,t(m,P),n(h)===null&&P===n(m)&&(_?(L(B),B=-1):_=!0,V(x,ne-fe))):(P.sortIndex=M,t(h,P),p||g||(p=!0,G||(G=!0,j()))),P},e.unstable_shouldYield=ie,e.unstable_wrapCallback=function(P){var K=S;return function(){var ne=S;S=K;try{return P.apply(this,arguments)}finally{S=ne}}}}(RA)),RA}var Z_;function xM(){return Z_||(Z_=1,AA.exports=LM()),AA.exports}var TA={exports:{}},We={};var Q_;function HM(){if(Q_)return We;Q_=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),T=Symbol.iterator;function S(M){return M===null||typeof M!="object"?null:(M=T&&M[T]||M["@@iterator"],typeof M=="function"?M:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,_={};function O(M,ee,ce){this.props=M,this.context=ee,this.refs=_,this.updater=ce||g}O.prototype.isReactComponent={},O.prototype.setState=function(M,ee){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,ee,"setState")},O.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function D(){}D.prototype=O.prototype;function L(M,ee,ce){this.props=M,this.context=ee,this.refs=_,this.updater=ce||g}var w=L.prototype=new D;w.constructor=L,p(w,O.prototype),w.isPureReactComponent=!0;var y=Array.isArray,x={H:null,A:null,T:null,S:null,V:null},G=Object.prototype.hasOwnProperty;function B(M,ee,ce,W,z,Q){return ce=Q.ref,{$$typeof:e,type:M,key:ee,ref:ce!==void 0?ce:null,props:Q}}function Y(M,ee){return B(M.type,ee,void 0,void 0,void 0,M.props)}function X(M){return typeof M=="object"&&M!==null&&M.$$typeof===e}function ie(M){var ee={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(ce){return ee[ce]})}var oe=/\/+/g;function j(M,ee){return typeof M=="object"&&M!==null&&M.key!=null?ie(""+M.key):ee.toString(36)}function $(){}function Ee(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then($,$):(M.status="pending",M.then(function(ee){M.status==="pending"&&(M.status="fulfilled",M.value=ee)},function(ee){M.status==="pending"&&(M.status="rejected",M.reason=ee)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function V(M,ee,ce,W,z){var Q=typeof M;(Q==="undefined"||Q==="boolean")&&(M=null);var H=!1;if(M===null)H=!0;else switch(Q){case"bigint":case"string":case"number":H=!0;break;case"object":switch(M.$$typeof){case e:case t:H=!0;break;case R:return H=M._init,V(H(M._payload),ee,ce,W,z)}}if(H)return z=z(M),H=W===""?"."+j(M,0):W,y(z)?(ce="",H!=null&&(ce=H.replace(oe,"$&/")+"/"),V(z,ee,ce,"",function(he){return he})):z!=null&&(X(z)&&(z=Y(z,ce+(z.key==null||M&&M.key===z.key?"":(""+z.key).replace(oe,"$&/")+"/")+H)),ee.push(z)),1;H=0;var Z=W===""?".":W+":";if(y(M))for(var ae=0;ae<M.length;ae++)W=M[ae],Q=Z+j(W,ae),H+=V(W,ee,ce,Q,z);else if(ae=S(M),typeof ae=="function")for(M=ae.call(M),ae=0;!(W=M.next()).done;)W=W.value,Q=Z+j(W,ae++),H+=V(W,ee,ce,Q,z);else if(Q==="object"){if(typeof M.then=="function")return V(Ee(M),ee,ce,W,z);throw ee=String(M),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return H}function P(M,ee,ce){if(M==null)return M;var W=[],z=0;return V(M,W,"","",function(Q){return ee.call(ce,Q,z++)}),W}function K(M){if(M._status===-1){var ee=M._result;ee=ee(),ee.then(function(ce){(M._status===0||M._status===-1)&&(M._status=1,M._result=ce)},function(ce){(M._status===0||M._status===-1)&&(M._status=2,M._result=ce)}),M._status===-1&&(M._status=0,M._result=ee)}if(M._status===1)return M._result.default;throw M._result}var ne=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)};function fe(){}return We.Children={map:P,forEach:function(M,ee,ce){P(M,function(){ee.apply(this,arguments)},ce)},count:function(M){var ee=0;return P(M,function(){ee++}),ee},toArray:function(M){return P(M,function(ee){return ee})||[]},only:function(M){if(!X(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},We.Component=O,We.Fragment=n,We.Profiler=s,We.PureComponent=L,We.StrictMode=o,We.Suspense=h,We.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=x,We.__COMPILER_RUNTIME={__proto__:null,c:function(M){return x.H.useMemoCache(M)}},We.cache=function(M){return function(){return M.apply(null,arguments)}},We.cloneElement=function(M,ee,ce){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var W=p({},M.props),z=M.key,Q=void 0;if(ee!=null)for(H in ee.ref!==void 0&&(Q=void 0),ee.key!==void 0&&(z=""+ee.key),ee)!G.call(ee,H)||H==="key"||H==="__self"||H==="__source"||H==="ref"&&ee.ref===void 0||(W[H]=ee[H]);var H=arguments.length-2;if(H===1)W.children=ce;else if(1<H){for(var Z=Array(H),ae=0;ae<H;ae++)Z[ae]=arguments[ae+2];W.children=Z}return B(M.type,z,void 0,void 0,Q,W)},We.createContext=function(M){return M={$$typeof:d,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:c,_context:M},M},We.createElement=function(M,ee,ce){var W,z={},Q=null;if(ee!=null)for(W in ee.key!==void 0&&(Q=""+ee.key),ee)G.call(ee,W)&&W!=="key"&&W!=="__self"&&W!=="__source"&&(z[W]=ee[W]);var H=arguments.length-2;if(H===1)z.children=ce;else if(1<H){for(var Z=Array(H),ae=0;ae<H;ae++)Z[ae]=arguments[ae+2];z.children=Z}if(M&&M.defaultProps)for(W in H=M.defaultProps,H)z[W]===void 0&&(z[W]=H[W]);return B(M,Q,void 0,void 0,null,z)},We.createRef=function(){return{current:null}},We.forwardRef=function(M){return{$$typeof:f,render:M}},We.isValidElement=X,We.lazy=function(M){return{$$typeof:R,_payload:{_status:-1,_result:M},_init:K}},We.memo=function(M,ee){return{$$typeof:m,type:M,compare:ee===void 0?null:ee}},We.startTransition=function(M){var ee=x.T,ce={};x.T=ce;try{var W=M(),z=x.S;z!==null&&z(ce,W),typeof W=="object"&&W!==null&&typeof W.then=="function"&&W.then(fe,ne)}catch(Q){ne(Q)}finally{x.T=ee}},We.unstable_useCacheRefresh=function(){return x.H.useCacheRefresh()},We.use=function(M){return x.H.use(M)},We.useActionState=function(M,ee,ce){return x.H.useActionState(M,ee,ce)},We.useCallback=function(M,ee){return x.H.useCallback(M,ee)},We.useContext=function(M){return x.H.useContext(M)},We.useDebugValue=function(){},We.useDeferredValue=function(M,ee){return x.H.useDeferredValue(M,ee)},We.useEffect=function(M,ee,ce){var W=x.H;if(typeof ce=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return W.useEffect(M,ee)},We.useId=function(){return x.H.useId()},We.useImperativeHandle=function(M,ee,ce){return x.H.useImperativeHandle(M,ee,ce)},We.useInsertionEffect=function(M,ee){return x.H.useInsertionEffect(M,ee)},We.useLayoutEffect=function(M,ee){return x.H.useLayoutEffect(M,ee)},We.useMemo=function(M,ee){return x.H.useMemo(M,ee)},We.useOptimistic=function(M,ee){return x.H.useOptimistic(M,ee)},We.useReducer=function(M,ee,ce){return x.H.useReducer(M,ee,ce)},We.useRef=function(M){return x.H.useRef(M)},We.useState=function(M){return x.H.useState(M)},We.useSyncExternalStore=function(M,ee,ce){return x.H.useSyncExternalStore(M,ee,ce)},We.useTransition=function(){return x.H.useTransition()},We.version="19.1.0",We}var $_;function LR(){return $_||($_=1,TA.exports=HM()),TA.exports}var SA={exports:{}},ln={};var J_;function kM(){if(J_)return ln;J_=1;var e=LR();function t(h){var m="https://react.dev/errors/"+h;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var R=2;R<arguments.length;R++)m+="&args[]="+encodeURIComponent(arguments[R])}return"Minified React error #"+h+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var o={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function c(h,m,R){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:T==null?null:""+T,children:h,containerInfo:m,implementation:R}}var d=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(h,m){if(h==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return ln.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,ln.createPortal=function(h,m){var R=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(t(299));return c(h,m,null,R)},ln.flushSync=function(h){var m=d.T,R=o.p;try{if(d.T=null,o.p=2,h)return h()}finally{d.T=m,o.p=R,o.d.f()}},ln.preconnect=function(h,m){typeof h=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,o.d.C(h,m))},ln.prefetchDNS=function(h){typeof h=="string"&&o.d.D(h)},ln.preinit=function(h,m){if(typeof h=="string"&&m&&typeof m.as=="string"){var R=m.as,T=f(R,m.crossOrigin),S=typeof m.integrity=="string"?m.integrity:void 0,g=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;R==="style"?o.d.S(h,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:T,integrity:S,fetchPriority:g}):R==="script"&&o.d.X(h,{crossOrigin:T,integrity:S,fetchPriority:g,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},ln.preinitModule=function(h,m){if(typeof h=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var R=f(m.as,m.crossOrigin);o.d.M(h,{crossOrigin:R,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&o.d.M(h)},ln.preload=function(h,m){if(typeof h=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var R=m.as,T=f(R,m.crossOrigin);o.d.L(h,R,{crossOrigin:T,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},ln.preloadModule=function(h,m){if(typeof h=="string")if(m){var R=f(m.as,m.crossOrigin);o.d.m(h,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:R,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else o.d.m(h)},ln.requestFormReset=function(h){o.d.r(h)},ln.unstable_batchedUpdates=function(h,m){return h(m)},ln.useFormState=function(h,m,R){return d.H.useFormState(h,m,R)},ln.useFormStatus=function(){return d.H.useHostTransitionStatus()},ln.version="19.1.0",ln}var ep;function YN(){if(ep)return SA.exports;ep=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),SA.exports=kM(),SA.exports}var tp;function UM(){if(tp)return au;tp=1;var e=xM(),t=LR(),n=YN();function o(a){var i="https://react.dev/errors/"+a;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)i+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+a+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function c(a){var i=a,r=a;if(a.alternate)for(;i.return;)i=i.return;else{a=i;do i=a,(i.flags&4098)!==0&&(r=i.return),a=i.return;while(a)}return i.tag===3?r:null}function d(a){if(a.tag===13){var i=a.memoizedState;if(i===null&&(a=a.alternate,a!==null&&(i=a.memoizedState)),i!==null)return i.dehydrated}return null}function f(a){if(c(a)!==a)throw Error(o(188))}function h(a){var i=a.alternate;if(!i){if(i=c(a),i===null)throw Error(o(188));return i!==a?null:a}for(var r=a,u=i;;){var E=r.return;if(E===null)break;var A=E.alternate;if(A===null){if(u=E.return,u!==null){r=u;continue}break}if(E.child===A.child){for(A=E.child;A;){if(A===r)return f(E),a;if(A===u)return f(E),i;A=A.sibling}throw Error(o(188))}if(r.return!==u.return)r=E,u=A;else{for(var b=!1,v=E.child;v;){if(v===r){b=!0,r=E,u=A;break}if(v===u){b=!0,u=E,r=A;break}v=v.sibling}if(!b){for(v=A.child;v;){if(v===r){b=!0,r=A,u=E;break}if(v===u){b=!0,u=A,r=E;break}v=v.sibling}if(!b)throw Error(o(189))}}if(r.alternate!==u)throw Error(o(190))}if(r.tag!==3)throw Error(o(188));return r.stateNode.current===r?a:i}function m(a){var i=a.tag;if(i===5||i===26||i===27||i===6)return a;for(a=a.child;a!==null;){if(i=m(a),i!==null)return i;a=a.sibling}return null}var R=Object.assign,T=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),L=Symbol.for("react.consumer"),w=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),Y=Symbol.for("react.lazy"),X=Symbol.for("react.activity"),ie=Symbol.for("react.memo_cache_sentinel"),oe=Symbol.iterator;function j(a){return a===null||typeof a!="object"?null:(a=oe&&a[oe]||a["@@iterator"],typeof a=="function"?a:null)}var $=Symbol.for("react.client.reference");function Ee(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===$?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case p:return"Fragment";case O:return"Profiler";case _:return"StrictMode";case x:return"Suspense";case G:return"SuspenseList";case X:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case g:return"Portal";case w:return(a.displayName||"Context")+".Provider";case L:return(a._context.displayName||"Context")+".Consumer";case y:var i=a.render;return a=a.displayName,a||(a=i.displayName||i.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case B:return i=a.displayName||null,i!==null?i:Ee(a.type)||"Memo";case Y:i=a._payload,a=a._init;try{return Ee(a(i))}catch{}}return null}var V=Array.isArray,P=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne={pending:!1,data:null,method:null,action:null},fe=[],M=-1;function ee(a){return{current:a}}function ce(a){0>M||(a.current=fe[M],fe[M]=null,M--)}function W(a,i){M++,fe[M]=a.current,a.current=i}var z=ee(null),Q=ee(null),H=ee(null),Z=ee(null);function ae(a,i){switch(W(H,i),W(Q,a),W(z,null),i.nodeType){case 9:case 11:a=(a=i.documentElement)&&(a=a.namespaceURI)?I_(a):0;break;default:if(a=i.tagName,i=i.namespaceURI)i=I_(i),a=__(i,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}ce(z),W(z,a)}function he(){ce(z),ce(Q),ce(H)}function Re(a){a.memoizedState!==null&&W(Z,a);var i=z.current,r=__(i,a.type);i!==r&&(W(Q,a),W(z,r))}function Ne(a){Q.current===a&&(ce(z),ce(Q)),Z.current===a&&(ce(Z),Zc._currentValue=ne)}var Me=Object.prototype.hasOwnProperty,me=e.unstable_scheduleCallback,Ce=e.unstable_cancelCallback,ge=e.unstable_shouldYield,_e=e.unstable_requestPaint,De=e.unstable_now,Be=e.unstable_getCurrentPriorityLevel,$t=e.unstable_ImmediatePriority,Cn=e.unstable_UserBlockingPriority,bn=e.unstable_NormalPriority,so=e.unstable_LowPriority,ro=e.unstable_IdlePriority,ys=e.log,vs=e.unstable_setDisableYieldValue,wo=null,rt=null;function Kt(a){if(typeof ys=="function"&&vs(a),rt&&typeof rt.setStrictMode=="function")try{rt.setStrictMode(wo,a)}catch{}}var Bt=Math.clz32?Math.clz32:oc,$n=Math.log,Ms=Math.LN2;function oc(a){return a>>>=0,a===0?32:31-($n(a)/Ms|0)|0}var Ml=256,Ls=4194304;function Pi(a){var i=a&42;if(i!==0)return i;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function xs(a,i,r){var u=a.pendingLanes;if(u===0)return 0;var E=0,A=a.suspendedLanes,b=a.pingedLanes;a=a.warmLanes;var v=u&134217727;return v!==0?(u=v&~A,u!==0?E=Pi(u):(b&=v,b!==0?E=Pi(b):r||(r=v&~a,r!==0&&(E=Pi(r))))):(v=u&~A,v!==0?E=Pi(v):b!==0?E=Pi(b):r||(r=u&~a,r!==0&&(E=Pi(r)))),E===0?0:i!==0&&i!==E&&(i&A)===0&&(A=E&-E,r=i&-i,A>=r||A===32&&(r&4194048)!==0)?i:E}function Ll(a,i){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&i)===0}function nE(a,i){switch(a){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Bu(){var a=Ml;return Ml<<=1,(Ml&4194048)===0&&(Ml=256),a}function Hs(){var a=Ls;return Ls<<=1,(Ls&62914560)===0&&(Ls=4194304),a}function ks(a){for(var i=[],r=0;31>r;r++)i.push(a);return i}function xl(a,i){a.pendingLanes|=i,i!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function iE(a,i,r,u,E,A){var b=a.pendingLanes;a.pendingLanes=r,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=r,a.entangledLanes&=r,a.errorRecoveryDisabledLanes&=r,a.shellSuspendCounter=0;var v=a.entanglements,F=a.expirationTimes,re=a.hiddenUpdates;for(r=b&~r;0<r;){var Ae=31-Bt(r),Se=1<<Ae;v[Ae]=0,F[Ae]=-1;var ue=re[Ae];if(ue!==null)for(re[Ae]=null,Ae=0;Ae<ue.length;Ae++){var de=ue[Ae];de!==null&&(de.lane&=-536870913)}r&=~Se}u!==0&&Fu(a,u,0),A!==0&&E===0&&a.tag!==0&&(a.suspendedLanes|=A&~(b&~i))}function Fu(a,i,r){a.pendingLanes|=i,a.suspendedLanes&=~i;var u=31-Bt(i);a.entangledLanes|=i,a.entanglements[u]=a.entanglements[u]|1073741824|r&4194090}function ju(a,i){var r=a.entangledLanes|=i;for(a=a.entanglements;r;){var u=31-Bt(r),E=1<<u;E&i|a[u]&i&&(a[u]|=i),r&=~E}}function lc(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function oE(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function rS(){var a=K.p;return a!==0?a:(a=window.event,a===void 0?32:F_(a.type))}function Ry(a,i){var r=K.p;try{return K.p=a,i()}finally{K.p=r}}var Po=Math.random().toString(36).slice(2),nn="__reactFiber$"+Po,On="__reactProps$"+Po,Us="__reactContainer$"+Po,lE="__reactEvents$"+Po,Ty="__reactListeners$"+Po,Sy="__reactHandles$"+Po,cS="__reactResources$"+Po,sc="__reactMarker$"+Po;function sE(a){delete a[nn],delete a[On],delete a[lE],delete a[Ty],delete a[Sy]}function ws(a){var i=a[nn];if(i)return i;for(var r=a.parentNode;r;){if(i=r[Us]||r[nn]){if(r=i.alternate,i.child!==null||r!==null&&r.child!==null)for(a=b_(a);a!==null;){if(r=a[nn])return r;a=b_(a)}return i}a=r,r=a.parentNode}return null}function Ps(a){if(a=a[nn]||a[Us]){var i=a.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return a}return null}function rc(a){var i=a.tag;if(i===5||i===26||i===27||i===6)return a.stateNode;throw Error(o(33))}function Gs(a){var i=a[cS];return i||(i=a[cS]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Ha(a){a[sc]=!0}var uS=new Set,dS={};function Hl(a,i){Bs(a,i),Bs(a+"Capture",i)}function Bs(a,i){for(dS[a]=i,a=0;a<i.length;a++)uS.add(i[a])}var gy=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),hS={},fS={};function Iy(a){return Me.call(fS,a)?!0:Me.call(hS,a)?!1:gy.test(a)?fS[a]=!0:(hS[a]=!0,!1)}function zu(a,i,r){if(Iy(i))if(r===null)a.removeAttribute(i);else{switch(typeof r){case"undefined":case"function":case"symbol":a.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){a.removeAttribute(i);return}}a.setAttribute(i,""+r)}}function Yu(a,i,r){if(r===null)a.removeAttribute(i);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(i);return}a.setAttribute(i,""+r)}}function co(a,i,r,u){if(u===null)a.removeAttribute(r);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(r);return}a.setAttributeNS(i,r,""+u)}}var rE,ES;function Fs(a){if(rE===void 0)try{throw Error()}catch(r){var i=r.stack.trim().match(/\n( *(at )?)/);rE=i&&i[1]||"",ES=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+rE+a+ES}var cE=!1;function uE(a,i){if(!a||cE)return"";cE=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var Se=function(){throw Error()};if(Object.defineProperty(Se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Se,[])}catch(de){var ue=de}Reflect.construct(a,[],Se)}else{try{Se.call()}catch(de){ue=de}a.call(Se.prototype)}}else{try{throw Error()}catch(de){ue=de}(Se=a())&&typeof Se.catch=="function"&&Se.catch(function(){})}}catch(de){if(de&&ue&&typeof de.stack=="string")return[de.stack,ue.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var A=u.DetermineComponentFrameRoot(),b=A[0],v=A[1];if(b&&v){var F=b.split(`
`),re=v.split(`
`);for(E=u=0;u<F.length&&!F[u].includes("DetermineComponentFrameRoot");)u++;for(;E<re.length&&!re[E].includes("DetermineComponentFrameRoot");)E++;if(u===F.length||E===re.length)for(u=F.length-1,E=re.length-1;1<=u&&0<=E&&F[u]!==re[E];)E--;for(;1<=u&&0<=E;u--,E--)if(F[u]!==re[E]){if(u!==1||E!==1)do if(u--,E--,0>E||F[u]!==re[E]){var Ae=`
`+F[u].replace(" at new "," at ");return a.displayName&&Ae.includes("<anonymous>")&&(Ae=Ae.replace("<anonymous>",a.displayName)),Ae}while(1<=u&&0<=E);break}}}finally{cE=!1,Error.prepareStackTrace=r}return(r=a?a.displayName||a.name:"")?Fs(r):""}function _y(a){switch(a.tag){case 26:case 27:case 5:return Fs(a.type);case 16:return Fs("Lazy");case 13:return Fs("Suspense");case 19:return Fs("SuspenseList");case 0:case 15:return uE(a.type,!1);case 11:return uE(a.type.render,!1);case 1:return uE(a.type,!0);case 31:return Fs("Activity");default:return""}}function mS(a){try{var i="";do i+=_y(a),a=a.return;while(a);return i}catch(r){return`
Error generating stack: `+r.message+`
`+r.stack}}function Jn(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function AS(a){var i=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function py(a){var i=AS(a)?"checked":"value",r=Object.getOwnPropertyDescriptor(a.constructor.prototype,i),u=""+a[i];if(!a.hasOwnProperty(i)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var E=r.get,A=r.set;return Object.defineProperty(a,i,{configurable:!0,get:function(){return E.call(this)},set:function(b){u=""+b,A.call(this,b)}}),Object.defineProperty(a,i,{enumerable:r.enumerable}),{getValue:function(){return u},setValue:function(b){u=""+b},stopTracking:function(){a._valueTracker=null,delete a[i]}}}}function Ku(a){a._valueTracker||(a._valueTracker=py(a))}function RS(a){if(!a)return!1;var i=a._valueTracker;if(!i)return!0;var r=i.getValue(),u="";return a&&(u=AS(a)?a.checked?"true":"false":a.value),a=u,a!==r?(i.setValue(a),!0):!1}function Vu(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var Ny=/[\n"\\]/g;function ei(a){return a.replace(Ny,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function dE(a,i,r,u,E,A,b,v){a.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?a.type=b:a.removeAttribute("type"),i!=null?b==="number"?(i===0&&a.value===""||a.value!=i)&&(a.value=""+Jn(i)):a.value!==""+Jn(i)&&(a.value=""+Jn(i)):b!=="submit"&&b!=="reset"||a.removeAttribute("value"),i!=null?hE(a,b,Jn(i)):r!=null?hE(a,b,Jn(r)):u!=null&&a.removeAttribute("value"),E==null&&A!=null&&(a.defaultChecked=!!A),E!=null&&(a.checked=E&&typeof E!="function"&&typeof E!="symbol"),v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?a.name=""+Jn(v):a.removeAttribute("name")}function TS(a,i,r,u,E,A,b,v){if(A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(a.type=A),i!=null||r!=null){if(!(A!=="submit"&&A!=="reset"||i!=null))return;r=r!=null?""+Jn(r):"",i=i!=null?""+Jn(i):r,v||i===a.value||(a.value=i),a.defaultValue=i}u=u??E,u=typeof u!="function"&&typeof u!="symbol"&&!!u,a.checked=v?a.checked:!!u,a.defaultChecked=!!u,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(a.name=b)}function hE(a,i,r){i==="number"&&Vu(a.ownerDocument)===a||a.defaultValue===""+r||(a.defaultValue=""+r)}function js(a,i,r,u){if(a=a.options,i){i={};for(var E=0;E<r.length;E++)i["$"+r[E]]=!0;for(r=0;r<a.length;r++)E=i.hasOwnProperty("$"+a[r].value),a[r].selected!==E&&(a[r].selected=E),E&&u&&(a[r].defaultSelected=!0)}else{for(r=""+Jn(r),i=null,E=0;E<a.length;E++){if(a[E].value===r){a[E].selected=!0,u&&(a[E].defaultSelected=!0);return}i!==null||a[E].disabled||(i=a[E])}i!==null&&(i.selected=!0)}}function SS(a,i,r){if(i!=null&&(i=""+Jn(i),i!==a.value&&(a.value=i),r==null)){a.defaultValue!==i&&(a.defaultValue=i);return}a.defaultValue=r!=null?""+Jn(r):""}function gS(a,i,r,u){if(i==null){if(u!=null){if(r!=null)throw Error(o(92));if(V(u)){if(1<u.length)throw Error(o(93));u=u[0]}r=u}r==null&&(r=""),i=r}r=Jn(i),a.defaultValue=r,u=a.textContent,u===r&&u!==""&&u!==null&&(a.value=u)}function zs(a,i){if(i){var r=a.firstChild;if(r&&r===a.lastChild&&r.nodeType===3){r.nodeValue=i;return}}a.textContent=i}var Cy=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function IS(a,i,r){var u=i.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?u?a.setProperty(i,""):i==="float"?a.cssFloat="":a[i]="":u?a.setProperty(i,r):typeof r!="number"||r===0||Cy.has(i)?i==="float"?a.cssFloat=r:a[i]=(""+r).trim():a[i]=r+"px"}function _S(a,i,r){if(i!=null&&typeof i!="object")throw Error(o(62));if(a=a.style,r!=null){for(var u in r)!r.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?a.setProperty(u,""):u==="float"?a.cssFloat="":a[u]="");for(var E in i)u=i[E],i.hasOwnProperty(E)&&r[E]!==u&&IS(a,E,u)}else for(var A in i)i.hasOwnProperty(A)&&IS(a,A,i[A])}function fE(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var by=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Oy=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Wu(a){return Oy.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var EE=null;function mE(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Ys=null,Ks=null;function pS(a){var i=Ps(a);if(i&&(a=i.stateNode)){var r=a[On]||null;e:switch(a=i.stateNode,i.type){case"input":if(dE(a,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),i=r.name,r.type==="radio"&&i!=null){for(r=a;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+ei(""+i)+'"][type="radio"]'),i=0;i<r.length;i++){var u=r[i];if(u!==a&&u.form===a.form){var E=u[On]||null;if(!E)throw Error(o(90));dE(u,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(i=0;i<r.length;i++)u=r[i],u.form===a.form&&RS(u)}break e;case"textarea":SS(a,r.value,r.defaultValue);break e;case"select":i=r.value,i!=null&&js(a,!!r.multiple,i,!1)}}}var AE=!1;function NS(a,i,r){if(AE)return a(i,r);AE=!0;try{var u=a(i);return u}finally{if(AE=!1,(Ys!==null||Ks!==null)&&(Ld(),Ys&&(i=Ys,a=Ks,Ks=Ys=null,pS(i),a)))for(i=0;i<a.length;i++)pS(a[i])}}function cc(a,i){var r=a.stateNode;if(r===null)return null;var u=r[On]||null;if(u===null)return null;r=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(a=a.type,u=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!u;break e;default:a=!1}if(a)return null;if(r&&typeof r!="function")throw Error(o(231,i,typeof r));return r}var uo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),RE=!1;if(uo)try{var uc={};Object.defineProperty(uc,"passive",{get:function(){RE=!0}}),window.addEventListener("test",uc,uc),window.removeEventListener("test",uc,uc)}catch{RE=!1}var Go=null,TE=null,Xu=null;function CS(){if(Xu)return Xu;var a,i=TE,r=i.length,u,E="value"in Go?Go.value:Go.textContent,A=E.length;for(a=0;a<r&&i[a]===E[a];a++);var b=r-a;for(u=1;u<=b&&i[r-u]===E[A-u];u++);return Xu=E.slice(a,1<u?1-u:void 0)}function qu(a){var i=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&i===13&&(a=13)):a=i,a===10&&(a=13),32<=a||a===13?a:0}function Zu(){return!0}function bS(){return!1}function Dn(a){function i(r,u,E,A,b){this._reactName=r,this._targetInst=E,this.type=u,this.nativeEvent=A,this.target=b,this.currentTarget=null;for(var v in a)a.hasOwnProperty(v)&&(r=a[v],this[v]=r?r(A):A[v]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?Zu:bS,this.isPropagationStopped=bS,this}return R(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Zu)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Zu)},persist:function(){},isPersistent:Zu}),i}var kl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qu=Dn(kl),dc=R({},kl,{view:0,detail:0}),Dy=Dn(dc),SE,gE,hc,$u=R({},dc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_E,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==hc&&(hc&&a.type==="mousemove"?(SE=a.screenX-hc.screenX,gE=a.screenY-hc.screenY):gE=SE=0,hc=a),SE)},movementY:function(a){return"movementY"in a?a.movementY:gE}}),OS=Dn($u),yy=R({},$u,{dataTransfer:0}),vy=Dn(yy),My=R({},dc,{relatedTarget:0}),IE=Dn(My),Ly=R({},kl,{animationName:0,elapsedTime:0,pseudoElement:0}),xy=Dn(Ly),Hy=R({},kl,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),ky=Dn(Hy),Uy=R({},kl,{data:0}),DS=Dn(Uy),wy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Py={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function By(a){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(a):(a=Gy[a])?!!i[a]:!1}function _E(){return By}var Fy=R({},dc,{key:function(a){if(a.key){var i=wy[a.key]||a.key;if(i!=="Unidentified")return i}return a.type==="keypress"?(a=qu(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Py[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_E,charCode:function(a){return a.type==="keypress"?qu(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?qu(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),jy=Dn(Fy),zy=R({},$u,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yS=Dn(zy),Yy=R({},dc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_E}),Ky=Dn(Yy),Vy=R({},kl,{propertyName:0,elapsedTime:0,pseudoElement:0}),Wy=Dn(Vy),Xy=R({},$u,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),qy=Dn(Xy),Zy=R({},kl,{newState:0,oldState:0}),Qy=Dn(Zy),$y=[9,13,27,32],pE=uo&&"CompositionEvent"in window,fc=null;uo&&"documentMode"in document&&(fc=document.documentMode);var Jy=uo&&"TextEvent"in window&&!fc,vS=uo&&(!pE||fc&&8<fc&&11>=fc),MS=" ",LS=!1;function xS(a,i){switch(a){case"keyup":return $y.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function HS(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Vs=!1;function ev(a,i){switch(a){case"compositionend":return HS(i);case"keypress":return i.which!==32?null:(LS=!0,MS);case"textInput":return a=i.data,a===MS&&LS?null:a;default:return null}}function tv(a,i){if(Vs)return a==="compositionend"||!pE&&xS(a,i)?(a=CS(),Xu=TE=Go=null,Vs=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return vS&&i.locale!=="ko"?null:i.data;default:return null}}var av={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kS(a){var i=a&&a.nodeName&&a.nodeName.toLowerCase();return i==="input"?!!av[a.type]:i==="textarea"}function US(a,i,r,u){Ys?Ks?Ks.push(u):Ks=[u]:Ys=u,i=Pd(i,"onChange"),0<i.length&&(r=new Qu("onChange","change",null,r,u),a.push({event:r,listeners:i}))}var Ec=null,mc=null;function nv(a){A_(a,0)}function Ju(a){var i=rc(a);if(RS(i))return a}function wS(a,i){if(a==="change")return i}var PS=!1;if(uo){var NE;if(uo){var CE="oninput"in document;if(!CE){var GS=document.createElement("div");GS.setAttribute("oninput","return;"),CE=typeof GS.oninput=="function"}NE=CE}else NE=!1;PS=NE&&(!document.documentMode||9<document.documentMode)}function BS(){Ec&&(Ec.detachEvent("onpropertychange",FS),mc=Ec=null)}function FS(a){if(a.propertyName==="value"&&Ju(mc)){var i=[];US(i,mc,a,mE(a)),NS(nv,i)}}function iv(a,i,r){a==="focusin"?(BS(),Ec=i,mc=r,Ec.attachEvent("onpropertychange",FS)):a==="focusout"&&BS()}function ov(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Ju(mc)}function lv(a,i){if(a==="click")return Ju(i)}function sv(a,i){if(a==="input"||a==="change")return Ju(i)}function rv(a,i){return a===i&&(a!==0||1/a===1/i)||a!==a&&i!==i}var Un=typeof Object.is=="function"?Object.is:rv;function Ac(a,i){if(Un(a,i))return!0;if(typeof a!="object"||a===null||typeof i!="object"||i===null)return!1;var r=Object.keys(a),u=Object.keys(i);if(r.length!==u.length)return!1;for(u=0;u<r.length;u++){var E=r[u];if(!Me.call(i,E)||!Un(a[E],i[E]))return!1}return!0}function jS(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function zS(a,i){var r=jS(a);a=0;for(var u;r;){if(r.nodeType===3){if(u=a+r.textContent.length,a<=i&&u>=i)return{node:r,offset:i-a};a=u}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=jS(r)}}function YS(a,i){return a&&i?a===i?!0:a&&a.nodeType===3?!1:i&&i.nodeType===3?YS(a,i.parentNode):"contains"in a?a.contains(i):a.compareDocumentPosition?!!(a.compareDocumentPosition(i)&16):!1:!1}function KS(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var i=Vu(a.document);i instanceof a.HTMLIFrameElement;){try{var r=typeof i.contentWindow.location.href=="string"}catch{r=!1}if(r)a=i.contentWindow;else break;i=Vu(a.document)}return i}function bE(a){var i=a&&a.nodeName&&a.nodeName.toLowerCase();return i&&(i==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||i==="textarea"||a.contentEditable==="true")}var cv=uo&&"documentMode"in document&&11>=document.documentMode,Ws=null,OE=null,Rc=null,DE=!1;function VS(a,i,r){var u=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;DE||Ws==null||Ws!==Vu(u)||(u=Ws,"selectionStart"in u&&bE(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Rc&&Ac(Rc,u)||(Rc=u,u=Pd(OE,"onSelect"),0<u.length&&(i=new Qu("onSelect","select",null,i,r),a.push({event:i,listeners:u}),i.target=Ws)))}function Ul(a,i){var r={};return r[a.toLowerCase()]=i.toLowerCase(),r["Webkit"+a]="webkit"+i,r["Moz"+a]="moz"+i,r}var Xs={animationend:Ul("Animation","AnimationEnd"),animationiteration:Ul("Animation","AnimationIteration"),animationstart:Ul("Animation","AnimationStart"),transitionrun:Ul("Transition","TransitionRun"),transitionstart:Ul("Transition","TransitionStart"),transitioncancel:Ul("Transition","TransitionCancel"),transitionend:Ul("Transition","TransitionEnd")},yE={},WS={};uo&&(WS=document.createElement("div").style,"AnimationEvent"in window||(delete Xs.animationend.animation,delete Xs.animationiteration.animation,delete Xs.animationstart.animation),"TransitionEvent"in window||delete Xs.transitionend.transition);function wl(a){if(yE[a])return yE[a];if(!Xs[a])return a;var i=Xs[a],r;for(r in i)if(i.hasOwnProperty(r)&&r in WS)return yE[a]=i[r];return a}var XS=wl("animationend"),qS=wl("animationiteration"),ZS=wl("animationstart"),uv=wl("transitionrun"),dv=wl("transitionstart"),hv=wl("transitioncancel"),QS=wl("transitionend"),$S=new Map,vE="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");vE.push("scrollEnd");function pi(a,i){$S.set(a,i),Hl(i,[a])}var JS=new WeakMap;function ti(a,i){if(typeof a=="object"&&a!==null){var r=JS.get(a);return r!==void 0?r:(i={value:a,source:i,stack:mS(i)},JS.set(a,i),i)}return{value:a,source:i,stack:mS(i)}}var ai=[],qs=0,ME=0;function ed(){for(var a=qs,i=ME=qs=0;i<a;){var r=ai[i];ai[i++]=null;var u=ai[i];ai[i++]=null;var E=ai[i];ai[i++]=null;var A=ai[i];if(ai[i++]=null,u!==null&&E!==null){var b=u.pending;b===null?E.next=E:(E.next=b.next,b.next=E),u.pending=E}A!==0&&eg(r,E,A)}}function td(a,i,r,u){ai[qs++]=a,ai[qs++]=i,ai[qs++]=r,ai[qs++]=u,ME|=u,a.lanes|=u,a=a.alternate,a!==null&&(a.lanes|=u)}function LE(a,i,r,u){return td(a,i,r,u),ad(a)}function Zs(a,i){return td(a,null,null,i),ad(a)}function eg(a,i,r){a.lanes|=r;var u=a.alternate;u!==null&&(u.lanes|=r);for(var E=!1,A=a.return;A!==null;)A.childLanes|=r,u=A.alternate,u!==null&&(u.childLanes|=r),A.tag===22&&(a=A.stateNode,a===null||a._visibility&1||(E=!0)),a=A,A=A.return;return a.tag===3?(A=a.stateNode,E&&i!==null&&(E=31-Bt(r),a=A.hiddenUpdates,u=a[E],u===null?a[E]=[i]:u.push(i),i.lane=r|536870912),A):null}function ad(a){if(50<jc)throw jc=0,Pm=null,Error(o(185));for(var i=a.return;i!==null;)a=i,i=a.return;return a.tag===3?a.stateNode:null}var Qs={};function fv(a,i,r,u){this.tag=a,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wn(a,i,r,u){return new fv(a,i,r,u)}function xE(a){return a=a.prototype,!(!a||!a.isReactComponent)}function ho(a,i){var r=a.alternate;return r===null?(r=wn(a.tag,i,a.key,a.mode),r.elementType=a.elementType,r.type=a.type,r.stateNode=a.stateNode,r.alternate=a,a.alternate=r):(r.pendingProps=i,r.type=a.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=a.flags&65011712,r.childLanes=a.childLanes,r.lanes=a.lanes,r.child=a.child,r.memoizedProps=a.memoizedProps,r.memoizedState=a.memoizedState,r.updateQueue=a.updateQueue,i=a.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},r.sibling=a.sibling,r.index=a.index,r.ref=a.ref,r.refCleanup=a.refCleanup,r}function tg(a,i){a.flags&=65011714;var r=a.alternate;return r===null?(a.childLanes=0,a.lanes=i,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=r.childLanes,a.lanes=r.lanes,a.child=r.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=r.memoizedProps,a.memoizedState=r.memoizedState,a.updateQueue=r.updateQueue,a.type=r.type,i=r.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),a}function nd(a,i,r,u,E,A){var b=0;if(u=a,typeof a=="function")xE(a)&&(b=1);else if(typeof a=="string")b=mM(a,r,z.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case X:return a=wn(31,r,i,E),a.elementType=X,a.lanes=A,a;case p:return Pl(r.children,E,A,i);case _:b=8,E|=24;break;case O:return a=wn(12,r,i,E|2),a.elementType=O,a.lanes=A,a;case x:return a=wn(13,r,i,E),a.elementType=x,a.lanes=A,a;case G:return a=wn(19,r,i,E),a.elementType=G,a.lanes=A,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case D:case w:b=10;break e;case L:b=9;break e;case y:b=11;break e;case B:b=14;break e;case Y:b=16,u=null;break e}b=29,r=Error(o(130,a===null?"null":typeof a,"")),u=null}return i=wn(b,r,i,E),i.elementType=a,i.type=u,i.lanes=A,i}function Pl(a,i,r,u){return a=wn(7,a,u,i),a.lanes=r,a}function HE(a,i,r){return a=wn(6,a,null,i),a.lanes=r,a}function kE(a,i,r){return i=wn(4,a.children!==null?a.children:[],a.key,i),i.lanes=r,i.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},i}var $s=[],Js=0,id=null,od=0,ni=[],ii=0,Gl=null,fo=1,Eo="";function Bl(a,i){$s[Js++]=od,$s[Js++]=id,id=a,od=i}function ag(a,i,r){ni[ii++]=fo,ni[ii++]=Eo,ni[ii++]=Gl,Gl=a;var u=fo;a=Eo;var E=32-Bt(u)-1;u&=~(1<<E),r+=1;var A=32-Bt(i)+E;if(30<A){var b=E-E%5;A=(u&(1<<b)-1).toString(32),u>>=b,E-=b,fo=1<<32-Bt(i)+E|r<<E|u,Eo=A+a}else fo=1<<A|r<<E|u,Eo=a}function UE(a){a.return!==null&&(Bl(a,1),ag(a,1,0))}function wE(a){for(;a===id;)id=$s[--Js],$s[Js]=null,od=$s[--Js],$s[Js]=null;for(;a===Gl;)Gl=ni[--ii],ni[ii]=null,Eo=ni[--ii],ni[ii]=null,fo=ni[--ii],ni[ii]=null}var un=null,Jt=null,Rt=!1,Fl=null,Gi=!1,PE=Error(o(519));function jl(a){var i=Error(o(418,""));throw gc(ti(i,a)),PE}function ng(a){var i=a.stateNode,r=a.type,u=a.memoizedProps;switch(i[nn]=a,i[On]=u,r){case"dialog":nt("cancel",i),nt("close",i);break;case"iframe":case"object":case"embed":nt("load",i);break;case"video":case"audio":for(r=0;r<Yc.length;r++)nt(Yc[r],i);break;case"source":nt("error",i);break;case"img":case"image":case"link":nt("error",i),nt("load",i);break;case"details":nt("toggle",i);break;case"input":nt("invalid",i),TS(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),Ku(i);break;case"select":nt("invalid",i);break;case"textarea":nt("invalid",i),gS(i,u.value,u.defaultValue,u.children),Ku(i)}r=u.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||i.textContent===""+r||u.suppressHydrationWarning===!0||g_(i.textContent,r)?(u.popover!=null&&(nt("beforetoggle",i),nt("toggle",i)),u.onScroll!=null&&nt("scroll",i),u.onScrollEnd!=null&&nt("scrollend",i),u.onClick!=null&&(i.onclick=Gd),i=!0):i=!1,i||jl(a)}function ig(a){for(un=a.return;un;)switch(un.tag){case 5:case 13:Gi=!1;return;case 27:case 3:Gi=!0;return;default:un=un.return}}function Tc(a){if(a!==un)return!1;if(!Rt)return ig(a),Rt=!0,!1;var i=a.tag,r;if((r=i!==3&&i!==27)&&((r=i===5)&&(r=a.type,r=!(r!=="form"&&r!=="button")||eA(a.type,a.memoizedProps)),r=!r),r&&Jt&&jl(a),ig(a),i===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(o(317));e:{for(a=a.nextSibling,i=0;a;){if(a.nodeType===8)if(r=a.data,r==="/$"){if(i===0){Jt=Ci(a.nextSibling);break e}i--}else r!=="$"&&r!=="$!"&&r!=="$?"||i++;a=a.nextSibling}Jt=null}}else i===27?(i=Jt,tl(a.type)?(a=iA,iA=null,Jt=a):Jt=i):Jt=un?Ci(a.stateNode.nextSibling):null;return!0}function Sc(){Jt=un=null,Rt=!1}function og(){var a=Fl;return a!==null&&(Mn===null?Mn=a:Mn.push.apply(Mn,a),Fl=null),a}function gc(a){Fl===null?Fl=[a]:Fl.push(a)}var GE=ee(null),zl=null,mo=null;function Bo(a,i,r){W(GE,i._currentValue),i._currentValue=r}function Ao(a){a._currentValue=GE.current,ce(GE)}function BE(a,i,r){for(;a!==null;){var u=a.alternate;if((a.childLanes&i)!==i?(a.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),a===r)break;a=a.return}}function FE(a,i,r,u){var E=a.child;for(E!==null&&(E.return=a);E!==null;){var A=E.dependencies;if(A!==null){var b=E.child;A=A.firstContext;e:for(;A!==null;){var v=A;A=E;for(var F=0;F<i.length;F++)if(v.context===i[F]){A.lanes|=r,v=A.alternate,v!==null&&(v.lanes|=r),BE(A.return,r,a),u||(b=null);break e}A=v.next}}else if(E.tag===18){if(b=E.return,b===null)throw Error(o(341));b.lanes|=r,A=b.alternate,A!==null&&(A.lanes|=r),BE(b,r,a),b=null}else b=E.child;if(b!==null)b.return=E;else for(b=E;b!==null;){if(b===a){b=null;break}if(E=b.sibling,E!==null){E.return=b.return,b=E;break}b=b.return}E=b}}function Ic(a,i,r,u){a=null;for(var E=i,A=!1;E!==null;){if(!A){if((E.flags&524288)!==0)A=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var b=E.alternate;if(b===null)throw Error(o(387));if(b=b.memoizedProps,b!==null){var v=E.type;Un(E.pendingProps.value,b.value)||(a!==null?a.push(v):a=[v])}}else if(E===Z.current){if(b=E.alternate,b===null)throw Error(o(387));b.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(a!==null?a.push(Zc):a=[Zc])}E=E.return}a!==null&&FE(i,a,r,u),i.flags|=262144}function ld(a){for(a=a.firstContext;a!==null;){if(!Un(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function Yl(a){zl=a,mo=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function on(a){return lg(zl,a)}function sd(a,i){return zl===null&&Yl(a),lg(a,i)}function lg(a,i){var r=i._currentValue;if(i={context:i,memoizedValue:r,next:null},mo===null){if(a===null)throw Error(o(308));mo=i,a.dependencies={lanes:0,firstContext:i},a.flags|=524288}else mo=mo.next=i;return r}var Ev=typeof AbortController<"u"?AbortController:function(){var a=[],i=this.signal={aborted:!1,addEventListener:function(r,u){a.push(u)}};this.abort=function(){i.aborted=!0,a.forEach(function(r){return r()})}},mv=e.unstable_scheduleCallback,Av=e.unstable_NormalPriority,Oa={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function jE(){return{controller:new Ev,data:new Map,refCount:0}}function _c(a){a.refCount--,a.refCount===0&&mv(Av,function(){a.controller.abort()})}var pc=null,zE=0,er=0,tr=null;function Rv(a,i){if(pc===null){var r=pc=[];zE=0,er=Km(),tr={status:"pending",value:void 0,then:function(u){r.push(u)}}}return zE++,i.then(sg,sg),i}function sg(){if(--zE===0&&pc!==null){tr!==null&&(tr.status="fulfilled");var a=pc;pc=null,er=0,tr=null;for(var i=0;i<a.length;i++)(0,a[i])()}}function Tv(a,i){var r=[],u={status:"pending",value:null,reason:null,then:function(E){r.push(E)}};return a.then(function(){u.status="fulfilled",u.value=i;for(var E=0;E<r.length;E++)(0,r[E])(i)},function(E){for(u.status="rejected",u.reason=E,E=0;E<r.length;E++)(0,r[E])(void 0)}),u}var rg=P.S;P.S=function(a,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&Rv(a,i),rg!==null&&rg(a,i)};var Kl=ee(null);function YE(){var a=Kl.current;return a!==null?a:Ht.pooledCache}function rd(a,i){i===null?W(Kl,Kl.current):W(Kl,i.pool)}function cg(){var a=YE();return a===null?null:{parent:Oa._currentValue,pool:a}}var Nc=Error(o(460)),ug=Error(o(474)),cd=Error(o(542)),KE={then:function(){}};function dg(a){return a=a.status,a==="fulfilled"||a==="rejected"}function ud(){}function hg(a,i,r){switch(r=a[r],r===void 0?a.push(i):r!==i&&(i.then(ud,ud),i=r),i.status){case"fulfilled":return i.value;case"rejected":throw a=i.reason,Eg(a),a;default:if(typeof i.status=="string")i.then(ud,ud);else{if(a=Ht,a!==null&&100<a.shellSuspendCounter)throw Error(o(482));a=i,a.status="pending",a.then(function(u){if(i.status==="pending"){var E=i;E.status="fulfilled",E.value=u}},function(u){if(i.status==="pending"){var E=i;E.status="rejected",E.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw a=i.reason,Eg(a),a}throw Cc=i,Nc}}var Cc=null;function fg(){if(Cc===null)throw Error(o(459));var a=Cc;return Cc=null,a}function Eg(a){if(a===Nc||a===cd)throw Error(o(483))}var Fo=!1;function VE(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function WE(a,i){a=a.updateQueue,i.updateQueue===a&&(i.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function jo(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function zo(a,i,r){var u=a.updateQueue;if(u===null)return null;if(u=u.shared,(It&2)!==0){var E=u.pending;return E===null?i.next=i:(i.next=E.next,E.next=i),u.pending=i,i=ad(a),eg(a,null,r),i}return td(a,u,i,r),ad(a)}function bc(a,i,r){if(i=i.updateQueue,i!==null&&(i=i.shared,(r&4194048)!==0)){var u=i.lanes;u&=a.pendingLanes,r|=u,i.lanes=r,ju(a,r)}}function XE(a,i){var r=a.updateQueue,u=a.alternate;if(u!==null&&(u=u.updateQueue,r===u)){var E=null,A=null;if(r=r.firstBaseUpdate,r!==null){do{var b={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};A===null?E=A=b:A=A.next=b,r=r.next}while(r!==null);A===null?E=A=i:A=A.next=i}else E=A=i;r={baseState:u.baseState,firstBaseUpdate:E,lastBaseUpdate:A,shared:u.shared,callbacks:u.callbacks},a.updateQueue=r;return}a=r.lastBaseUpdate,a===null?r.firstBaseUpdate=i:a.next=i,r.lastBaseUpdate=i}var qE=!1;function Oc(){if(qE){var a=tr;if(a!==null)throw a}}function Dc(a,i,r,u){qE=!1;var E=a.updateQueue;Fo=!1;var A=E.firstBaseUpdate,b=E.lastBaseUpdate,v=E.shared.pending;if(v!==null){E.shared.pending=null;var F=v,re=F.next;F.next=null,b===null?A=re:b.next=re,b=F;var Ae=a.alternate;Ae!==null&&(Ae=Ae.updateQueue,v=Ae.lastBaseUpdate,v!==b&&(v===null?Ae.firstBaseUpdate=re:v.next=re,Ae.lastBaseUpdate=F))}if(A!==null){var Se=E.baseState;b=0,Ae=re=F=null,v=A;do{var ue=v.lane&-536870913,de=ue!==v.lane;if(de?(ct&ue)===ue:(u&ue)===ue){ue!==0&&ue===er&&(qE=!0),Ae!==null&&(Ae=Ae.next={lane:0,tag:v.tag,payload:v.payload,callback:null,next:null});e:{var Fe=a,we=v;ue=i;var Ot=r;switch(we.tag){case 1:if(Fe=we.payload,typeof Fe=="function"){Se=Fe.call(Ot,Se,ue);break e}Se=Fe;break e;case 3:Fe.flags=Fe.flags&-65537|128;case 0:if(Fe=we.payload,ue=typeof Fe=="function"?Fe.call(Ot,Se,ue):Fe,ue==null)break e;Se=R({},Se,ue);break e;case 2:Fo=!0}}ue=v.callback,ue!==null&&(a.flags|=64,de&&(a.flags|=8192),de=E.callbacks,de===null?E.callbacks=[ue]:de.push(ue))}else de={lane:ue,tag:v.tag,payload:v.payload,callback:v.callback,next:null},Ae===null?(re=Ae=de,F=Se):Ae=Ae.next=de,b|=ue;if(v=v.next,v===null){if(v=E.shared.pending,v===null)break;de=v,v=de.next,de.next=null,E.lastBaseUpdate=de,E.shared.pending=null}}while(!0);Ae===null&&(F=Se),E.baseState=F,E.firstBaseUpdate=re,E.lastBaseUpdate=Ae,A===null&&(E.shared.lanes=0),Qo|=b,a.lanes=b,a.memoizedState=Se}}function mg(a,i){if(typeof a!="function")throw Error(o(191,a));a.call(i)}function Ag(a,i){var r=a.callbacks;if(r!==null)for(a.callbacks=null,a=0;a<r.length;a++)mg(r[a],i)}var ar=ee(null),dd=ee(0);function Rg(a,i){a=po,W(dd,a),W(ar,i),po=a|i.baseLanes}function ZE(){W(dd,po),W(ar,ar.current)}function QE(){po=dd.current,ce(ar),ce(dd)}var Yo=0,Ze=null,Ct=null,Sa=null,hd=!1,nr=!1,Vl=!1,fd=0,yc=0,ir=null,Sv=0;function fa(){throw Error(o(321))}function $E(a,i){if(i===null)return!1;for(var r=0;r<i.length&&r<a.length;r++)if(!Un(a[r],i[r]))return!1;return!0}function JE(a,i,r,u,E,A){return Yo=A,Ze=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,P.H=a===null||a.memoizedState===null?eI:tI,Vl=!1,A=r(u,E),Vl=!1,nr&&(A=Sg(i,r,u,E)),Tg(a),A}function Tg(a){P.H=Sd;var i=Ct!==null&&Ct.next!==null;if(Yo=0,Sa=Ct=Ze=null,hd=!1,yc=0,ir=null,i)throw Error(o(300));a===null||ka||(a=a.dependencies,a!==null&&ld(a)&&(ka=!0))}function Sg(a,i,r,u){Ze=a;var E=0;do{if(nr&&(ir=null),yc=0,nr=!1,25<=E)throw Error(o(301));if(E+=1,Sa=Ct=null,a.updateQueue!=null){var A=a.updateQueue;A.lastEffect=null,A.events=null,A.stores=null,A.memoCache!=null&&(A.memoCache.index=0)}P.H=bv,A=i(r,u)}while(nr);return A}function gv(){var a=P.H,i=a.useState()[0];return i=typeof i.then=="function"?vc(i):i,a=a.useState()[0],(Ct!==null?Ct.memoizedState:null)!==a&&(Ze.flags|=1024),i}function em(){var a=fd!==0;return fd=0,a}function tm(a,i,r){i.updateQueue=a.updateQueue,i.flags&=-2053,a.lanes&=~r}function am(a){if(hd){for(a=a.memoizedState;a!==null;){var i=a.queue;i!==null&&(i.pending=null),a=a.next}hd=!1}Yo=0,Sa=Ct=Ze=null,nr=!1,yc=fd=0,ir=null}function yn(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Sa===null?Ze.memoizedState=Sa=a:Sa=Sa.next=a,Sa}function ga(){if(Ct===null){var a=Ze.alternate;a=a!==null?a.memoizedState:null}else a=Ct.next;var i=Sa===null?Ze.memoizedState:Sa.next;if(i!==null)Sa=i,Ct=a;else{if(a===null)throw Ze.alternate===null?Error(o(467)):Error(o(310));Ct=a,a={memoizedState:Ct.memoizedState,baseState:Ct.baseState,baseQueue:Ct.baseQueue,queue:Ct.queue,next:null},Sa===null?Ze.memoizedState=Sa=a:Sa=Sa.next=a}return Sa}function nm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function vc(a){var i=yc;return yc+=1,ir===null&&(ir=[]),a=hg(ir,a,i),i=Ze,(Sa===null?i.memoizedState:Sa.next)===null&&(i=i.alternate,P.H=i===null||i.memoizedState===null?eI:tI),a}function Ed(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return vc(a);if(a.$$typeof===w)return on(a)}throw Error(o(438,String(a)))}function im(a){var i=null,r=Ze.updateQueue;if(r!==null&&(i=r.memoCache),i==null){var u=Ze.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(E){return E.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),r===null&&(r=nm(),Ze.updateQueue=r),r.memoCache=i,r=i.data[i.index],r===void 0)for(r=i.data[i.index]=Array(a),u=0;u<a;u++)r[u]=ie;return i.index++,r}function Ro(a,i){return typeof i=="function"?i(a):i}function md(a){var i=ga();return om(i,Ct,a)}function om(a,i,r){var u=a.queue;if(u===null)throw Error(o(311));u.lastRenderedReducer=r;var E=a.baseQueue,A=u.pending;if(A!==null){if(E!==null){var b=E.next;E.next=A.next,A.next=b}i.baseQueue=E=A,u.pending=null}if(A=a.baseState,E===null)a.memoizedState=A;else{i=E.next;var v=b=null,F=null,re=i,Ae=!1;do{var Se=re.lane&-536870913;if(Se!==re.lane?(ct&Se)===Se:(Yo&Se)===Se){var ue=re.revertLane;if(ue===0)F!==null&&(F=F.next={lane:0,revertLane:0,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null}),Se===er&&(Ae=!0);else if((Yo&ue)===ue){re=re.next,ue===er&&(Ae=!0);continue}else Se={lane:0,revertLane:re.revertLane,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null},F===null?(v=F=Se,b=A):F=F.next=Se,Ze.lanes|=ue,Qo|=ue;Se=re.action,Vl&&r(A,Se),A=re.hasEagerState?re.eagerState:r(A,Se)}else ue={lane:Se,revertLane:re.revertLane,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null},F===null?(v=F=ue,b=A):F=F.next=ue,Ze.lanes|=Se,Qo|=Se;re=re.next}while(re!==null&&re!==i);if(F===null?b=A:F.next=v,!Un(A,a.memoizedState)&&(ka=!0,Ae&&(r=tr,r!==null)))throw r;a.memoizedState=A,a.baseState=b,a.baseQueue=F,u.lastRenderedState=A}return E===null&&(u.lanes=0),[a.memoizedState,u.dispatch]}function lm(a){var i=ga(),r=i.queue;if(r===null)throw Error(o(311));r.lastRenderedReducer=a;var u=r.dispatch,E=r.pending,A=i.memoizedState;if(E!==null){r.pending=null;var b=E=E.next;do A=a(A,b.action),b=b.next;while(b!==E);Un(A,i.memoizedState)||(ka=!0),i.memoizedState=A,i.baseQueue===null&&(i.baseState=A),r.lastRenderedState=A}return[A,u]}function gg(a,i,r){var u=Ze,E=ga(),A=Rt;if(A){if(r===void 0)throw Error(o(407));r=r()}else r=i();var b=!Un((Ct||E).memoizedState,r);b&&(E.memoizedState=r,ka=!0),E=E.queue;var v=pg.bind(null,u,E,a);if(Mc(2048,8,v,[a]),E.getSnapshot!==i||b||Sa!==null&&Sa.memoizedState.tag&1){if(u.flags|=2048,or(9,Ad(),_g.bind(null,u,E,r,i),null),Ht===null)throw Error(o(349));A||(Yo&124)!==0||Ig(u,i,r)}return r}function Ig(a,i,r){a.flags|=16384,a={getSnapshot:i,value:r},i=Ze.updateQueue,i===null?(i=nm(),Ze.updateQueue=i,i.stores=[a]):(r=i.stores,r===null?i.stores=[a]:r.push(a))}function _g(a,i,r,u){i.value=r,i.getSnapshot=u,Ng(i)&&Cg(a)}function pg(a,i,r){return r(function(){Ng(i)&&Cg(a)})}function Ng(a){var i=a.getSnapshot;a=a.value;try{var r=i();return!Un(a,r)}catch{return!0}}function Cg(a){var i=Zs(a,2);i!==null&&jn(i,a,2)}function sm(a){var i=yn();if(typeof a=="function"){var r=a;if(a=r(),Vl){Kt(!0);try{r()}finally{Kt(!1)}}}return i.memoizedState=i.baseState=a,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ro,lastRenderedState:a},i}function bg(a,i,r,u){return a.baseState=r,om(a,Ct,typeof u=="function"?u:Ro)}function Iv(a,i,r,u,E){if(Td(a))throw Error(o(485));if(a=i.action,a!==null){var A={payload:E,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){A.listeners.push(b)}};P.T!==null?r(!0):A.isTransition=!1,u(A),r=i.pending,r===null?(A.next=i.pending=A,Og(i,A)):(A.next=r.next,i.pending=r.next=A)}}function Og(a,i){var r=i.action,u=i.payload,E=a.state;if(i.isTransition){var A=P.T,b={};P.T=b;try{var v=r(E,u),F=P.S;F!==null&&F(b,v),Dg(a,i,v)}catch(re){rm(a,i,re)}finally{P.T=A}}else try{A=r(E,u),Dg(a,i,A)}catch(re){rm(a,i,re)}}function Dg(a,i,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(u){yg(a,i,u)},function(u){return rm(a,i,u)}):yg(a,i,r)}function yg(a,i,r){i.status="fulfilled",i.value=r,vg(i),a.state=r,i=a.pending,i!==null&&(r=i.next,r===i?a.pending=null:(r=r.next,i.next=r,Og(a,r)))}function rm(a,i,r){var u=a.pending;if(a.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=r,vg(i),i=i.next;while(i!==u)}a.action=null}function vg(a){a=a.listeners;for(var i=0;i<a.length;i++)(0,a[i])()}function Mg(a,i){return i}function Lg(a,i){if(Rt){var r=Ht.formState;if(r!==null){e:{var u=Ze;if(Rt){if(Jt){t:{for(var E=Jt,A=Gi;E.nodeType!==8;){if(!A){E=null;break t}if(E=Ci(E.nextSibling),E===null){E=null;break t}}A=E.data,E=A==="F!"||A==="F"?E:null}if(E){Jt=Ci(E.nextSibling),u=E.data==="F!";break e}}jl(u)}u=!1}u&&(i=r[0])}}return r=yn(),r.memoizedState=r.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mg,lastRenderedState:i},r.queue=u,r=Qg.bind(null,Ze,u),u.dispatch=r,u=sm(!1),A=fm.bind(null,Ze,!1,u.queue),u=yn(),E={state:i,dispatch:null,action:a,pending:null},u.queue=E,r=Iv.bind(null,Ze,E,A,r),E.dispatch=r,u.memoizedState=a,[i,r,!1]}function xg(a){var i=ga();return Hg(i,Ct,a)}function Hg(a,i,r){if(i=om(a,i,Mg)[0],a=md(Ro)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=vc(i)}catch(b){throw b===Nc?cd:b}else u=i;i=ga();var E=i.queue,A=E.dispatch;return r!==i.memoizedState&&(Ze.flags|=2048,or(9,Ad(),_v.bind(null,E,r),null)),[u,A,a]}function _v(a,i){a.action=i}function kg(a){var i=ga(),r=Ct;if(r!==null)return Hg(i,r,a);ga(),i=i.memoizedState,r=ga();var u=r.queue.dispatch;return r.memoizedState=a,[i,u,!1]}function or(a,i,r,u){return a={tag:a,create:r,deps:u,inst:i,next:null},i=Ze.updateQueue,i===null&&(i=nm(),Ze.updateQueue=i),r=i.lastEffect,r===null?i.lastEffect=a.next=a:(u=r.next,r.next=a,a.next=u,i.lastEffect=a),a}function Ad(){return{destroy:void 0,resource:void 0}}function Ug(){return ga().memoizedState}function Rd(a,i,r,u){var E=yn();u=u===void 0?null:u,Ze.flags|=a,E.memoizedState=or(1|i,Ad(),r,u)}function Mc(a,i,r,u){var E=ga();u=u===void 0?null:u;var A=E.memoizedState.inst;Ct!==null&&u!==null&&$E(u,Ct.memoizedState.deps)?E.memoizedState=or(i,A,r,u):(Ze.flags|=a,E.memoizedState=or(1|i,A,r,u))}function wg(a,i){Rd(8390656,8,a,i)}function Pg(a,i){Mc(2048,8,a,i)}function Gg(a,i){return Mc(4,2,a,i)}function Bg(a,i){return Mc(4,4,a,i)}function Fg(a,i){if(typeof i=="function"){a=a();var r=i(a);return function(){typeof r=="function"?r():i(null)}}if(i!=null)return a=a(),i.current=a,function(){i.current=null}}function jg(a,i,r){r=r!=null?r.concat([a]):null,Mc(4,4,Fg.bind(null,i,a),r)}function cm(){}function zg(a,i){var r=ga();i=i===void 0?null:i;var u=r.memoizedState;return i!==null&&$E(i,u[1])?u[0]:(r.memoizedState=[a,i],a)}function Yg(a,i){var r=ga();i=i===void 0?null:i;var u=r.memoizedState;if(i!==null&&$E(i,u[1]))return u[0];if(u=a(),Vl){Kt(!0);try{a()}finally{Kt(!1)}}return r.memoizedState=[u,i],u}function um(a,i,r){return r===void 0||(Yo&1073741824)!==0?a.memoizedState=i:(a.memoizedState=r,a=WI(),Ze.lanes|=a,Qo|=a,r)}function Kg(a,i,r,u){return Un(r,i)?r:ar.current!==null?(a=um(a,r,u),Un(a,i)||(ka=!0),a):(Yo&42)===0?(ka=!0,a.memoizedState=r):(a=WI(),Ze.lanes|=a,Qo|=a,i)}function Vg(a,i,r,u,E){var A=K.p;K.p=A!==0&&8>A?A:8;var b=P.T,v={};P.T=v,fm(a,!1,i,r);try{var F=E(),re=P.S;if(re!==null&&re(v,F),F!==null&&typeof F=="object"&&typeof F.then=="function"){var Ae=Tv(F,u);Lc(a,i,Ae,Fn(a))}else Lc(a,i,u,Fn(a))}catch(Se){Lc(a,i,{then:function(){},status:"rejected",reason:Se},Fn())}finally{K.p=A,P.T=b}}function pv(){}function dm(a,i,r,u){if(a.tag!==5)throw Error(o(476));var E=Wg(a).queue;Vg(a,E,i,ne,r===null?pv:function(){return Xg(a),r(u)})}function Wg(a){var i=a.memoizedState;if(i!==null)return i;i={memoizedState:ne,baseState:ne,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ro,lastRenderedState:ne},next:null};var r={};return i.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ro,lastRenderedState:r},next:null},a.memoizedState=i,a=a.alternate,a!==null&&(a.memoizedState=i),i}function Xg(a){var i=Wg(a).next.queue;Lc(a,i,{},Fn())}function hm(){return on(Zc)}function qg(){return ga().memoizedState}function Zg(){return ga().memoizedState}function Nv(a){for(var i=a.return;i!==null;){switch(i.tag){case 24:case 3:var r=Fn();a=jo(r);var u=zo(i,a,r);u!==null&&(jn(u,i,r),bc(u,i,r)),i={cache:jE()},a.payload=i;return}i=i.return}}function Cv(a,i,r){var u=Fn();r={lane:u,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null},Td(a)?$g(i,r):(r=LE(a,i,r,u),r!==null&&(jn(r,a,u),Jg(r,i,u)))}function Qg(a,i,r){var u=Fn();Lc(a,i,r,u)}function Lc(a,i,r,u){var E={lane:u,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null};if(Td(a))$g(i,E);else{var A=a.alternate;if(a.lanes===0&&(A===null||A.lanes===0)&&(A=i.lastRenderedReducer,A!==null))try{var b=i.lastRenderedState,v=A(b,r);if(E.hasEagerState=!0,E.eagerState=v,Un(v,b))return td(a,i,E,0),Ht===null&&ed(),!1}catch{}finally{}if(r=LE(a,i,E,u),r!==null)return jn(r,a,u),Jg(r,i,u),!0}return!1}function fm(a,i,r,u){if(u={lane:2,revertLane:Km(),action:u,hasEagerState:!1,eagerState:null,next:null},Td(a)){if(i)throw Error(o(479))}else i=LE(a,r,u,2),i!==null&&jn(i,a,2)}function Td(a){var i=a.alternate;return a===Ze||i!==null&&i===Ze}function $g(a,i){nr=hd=!0;var r=a.pending;r===null?i.next=i:(i.next=r.next,r.next=i),a.pending=i}function Jg(a,i,r){if((r&4194048)!==0){var u=i.lanes;u&=a.pendingLanes,r|=u,i.lanes=r,ju(a,r)}}var Sd={readContext:on,use:Ed,useCallback:fa,useContext:fa,useEffect:fa,useImperativeHandle:fa,useLayoutEffect:fa,useInsertionEffect:fa,useMemo:fa,useReducer:fa,useRef:fa,useState:fa,useDebugValue:fa,useDeferredValue:fa,useTransition:fa,useSyncExternalStore:fa,useId:fa,useHostTransitionStatus:fa,useFormState:fa,useActionState:fa,useOptimistic:fa,useMemoCache:fa,useCacheRefresh:fa},eI={readContext:on,use:Ed,useCallback:function(a,i){return yn().memoizedState=[a,i===void 0?null:i],a},useContext:on,useEffect:wg,useImperativeHandle:function(a,i,r){r=r!=null?r.concat([a]):null,Rd(4194308,4,Fg.bind(null,i,a),r)},useLayoutEffect:function(a,i){return Rd(4194308,4,a,i)},useInsertionEffect:function(a,i){Rd(4,2,a,i)},useMemo:function(a,i){var r=yn();i=i===void 0?null:i;var u=a();if(Vl){Kt(!0);try{a()}finally{Kt(!1)}}return r.memoizedState=[u,i],u},useReducer:function(a,i,r){var u=yn();if(r!==void 0){var E=r(i);if(Vl){Kt(!0);try{r(i)}finally{Kt(!1)}}}else E=i;return u.memoizedState=u.baseState=E,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:E},u.queue=a,a=a.dispatch=Cv.bind(null,Ze,a),[u.memoizedState,a]},useRef:function(a){var i=yn();return a={current:a},i.memoizedState=a},useState:function(a){a=sm(a);var i=a.queue,r=Qg.bind(null,Ze,i);return i.dispatch=r,[a.memoizedState,r]},useDebugValue:cm,useDeferredValue:function(a,i){var r=yn();return um(r,a,i)},useTransition:function(){var a=sm(!1);return a=Vg.bind(null,Ze,a.queue,!0,!1),yn().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,i,r){var u=Ze,E=yn();if(Rt){if(r===void 0)throw Error(o(407));r=r()}else{if(r=i(),Ht===null)throw Error(o(349));(ct&124)!==0||Ig(u,i,r)}E.memoizedState=r;var A={value:r,getSnapshot:i};return E.queue=A,wg(pg.bind(null,u,A,a),[a]),u.flags|=2048,or(9,Ad(),_g.bind(null,u,A,r,i),null),r},useId:function(){var a=yn(),i=Ht.identifierPrefix;if(Rt){var r=Eo,u=fo;r=(u&~(1<<32-Bt(u)-1)).toString(32)+r,i=""+i+"R"+r,r=fd++,0<r&&(i+="H"+r.toString(32)),i+=""}else r=Sv++,i=""+i+"r"+r.toString(32)+"";return a.memoizedState=i},useHostTransitionStatus:hm,useFormState:Lg,useActionState:Lg,useOptimistic:function(a){var i=yn();i.memoizedState=i.baseState=a;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=r,i=fm.bind(null,Ze,!0,r),r.dispatch=i,[a,i]},useMemoCache:im,useCacheRefresh:function(){return yn().memoizedState=Nv.bind(null,Ze)}},tI={readContext:on,use:Ed,useCallback:zg,useContext:on,useEffect:Pg,useImperativeHandle:jg,useInsertionEffect:Gg,useLayoutEffect:Bg,useMemo:Yg,useReducer:md,useRef:Ug,useState:function(){return md(Ro)},useDebugValue:cm,useDeferredValue:function(a,i){var r=ga();return Kg(r,Ct.memoizedState,a,i)},useTransition:function(){var a=md(Ro)[0],i=ga().memoizedState;return[typeof a=="boolean"?a:vc(a),i]},useSyncExternalStore:gg,useId:qg,useHostTransitionStatus:hm,useFormState:xg,useActionState:xg,useOptimistic:function(a,i){var r=ga();return bg(r,Ct,a,i)},useMemoCache:im,useCacheRefresh:Zg},bv={readContext:on,use:Ed,useCallback:zg,useContext:on,useEffect:Pg,useImperativeHandle:jg,useInsertionEffect:Gg,useLayoutEffect:Bg,useMemo:Yg,useReducer:lm,useRef:Ug,useState:function(){return lm(Ro)},useDebugValue:cm,useDeferredValue:function(a,i){var r=ga();return Ct===null?um(r,a,i):Kg(r,Ct.memoizedState,a,i)},useTransition:function(){var a=lm(Ro)[0],i=ga().memoizedState;return[typeof a=="boolean"?a:vc(a),i]},useSyncExternalStore:gg,useId:qg,useHostTransitionStatus:hm,useFormState:kg,useActionState:kg,useOptimistic:function(a,i){var r=ga();return Ct!==null?bg(r,Ct,a,i):(r.baseState=a,[a,r.queue.dispatch])},useMemoCache:im,useCacheRefresh:Zg},lr=null,xc=0;function gd(a){var i=xc;return xc+=1,lr===null&&(lr=[]),hg(lr,a,i)}function Hc(a,i){i=i.props.ref,a.ref=i!==void 0?i:null}function Id(a,i){throw i.$$typeof===T?Error(o(525)):(a=Object.prototype.toString.call(i),Error(o(31,a==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":a)))}function aI(a){var i=a._init;return i(a._payload)}function nI(a){function i(te,q){if(a){var le=te.deletions;le===null?(te.deletions=[q],te.flags|=16):le.push(q)}}function r(te,q){if(!a)return null;for(;q!==null;)i(te,q),q=q.sibling;return null}function u(te){for(var q=new Map;te!==null;)te.key!==null?q.set(te.key,te):q.set(te.index,te),te=te.sibling;return q}function E(te,q){return te=ho(te,q),te.index=0,te.sibling=null,te}function A(te,q,le){return te.index=le,a?(le=te.alternate,le!==null?(le=le.index,le<q?(te.flags|=67108866,q):le):(te.flags|=67108866,q)):(te.flags|=1048576,q)}function b(te){return a&&te.alternate===null&&(te.flags|=67108866),te}function v(te,q,le,Te){return q===null||q.tag!==6?(q=HE(le,te.mode,Te),q.return=te,q):(q=E(q,le),q.return=te,q)}function F(te,q,le,Te){var ye=le.type;return ye===p?Ae(te,q,le.props.children,Te,le.key):q!==null&&(q.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===Y&&aI(ye)===q.type)?(q=E(q,le.props),Hc(q,le),q.return=te,q):(q=nd(le.type,le.key,le.props,null,te.mode,Te),Hc(q,le),q.return=te,q)}function re(te,q,le,Te){return q===null||q.tag!==4||q.stateNode.containerInfo!==le.containerInfo||q.stateNode.implementation!==le.implementation?(q=kE(le,te.mode,Te),q.return=te,q):(q=E(q,le.children||[]),q.return=te,q)}function Ae(te,q,le,Te,ye){return q===null||q.tag!==7?(q=Pl(le,te.mode,Te,ye),q.return=te,q):(q=E(q,le),q.return=te,q)}function Se(te,q,le){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=HE(""+q,te.mode,le),q.return=te,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case S:return le=nd(q.type,q.key,q.props,null,te.mode,le),Hc(le,q),le.return=te,le;case g:return q=kE(q,te.mode,le),q.return=te,q;case Y:var Te=q._init;return q=Te(q._payload),Se(te,q,le)}if(V(q)||j(q))return q=Pl(q,te.mode,le,null),q.return=te,q;if(typeof q.then=="function")return Se(te,gd(q),le);if(q.$$typeof===w)return Se(te,sd(te,q),le);Id(te,q)}return null}function ue(te,q,le,Te){var ye=q!==null?q.key:null;if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return ye!==null?null:v(te,q,""+le,Te);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case S:return le.key===ye?F(te,q,le,Te):null;case g:return le.key===ye?re(te,q,le,Te):null;case Y:return ye=le._init,le=ye(le._payload),ue(te,q,le,Te)}if(V(le)||j(le))return ye!==null?null:Ae(te,q,le,Te,null);if(typeof le.then=="function")return ue(te,q,gd(le),Te);if(le.$$typeof===w)return ue(te,q,sd(te,le),Te);Id(te,le)}return null}function de(te,q,le,Te,ye){if(typeof Te=="string"&&Te!==""||typeof Te=="number"||typeof Te=="bigint")return te=te.get(le)||null,v(q,te,""+Te,ye);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case S:return te=te.get(Te.key===null?le:Te.key)||null,F(q,te,Te,ye);case g:return te=te.get(Te.key===null?le:Te.key)||null,re(q,te,Te,ye);case Y:var Qe=Te._init;return Te=Qe(Te._payload),de(te,q,le,Te,ye)}if(V(Te)||j(Te))return te=te.get(le)||null,Ae(q,te,Te,ye,null);if(typeof Te.then=="function")return de(te,q,le,gd(Te),ye);if(Te.$$typeof===w)return de(te,q,le,sd(q,Te),ye);Id(q,Te)}return null}function Fe(te,q,le,Te){for(var ye=null,Qe=null,xe=q,Ge=q=0,wa=null;xe!==null&&Ge<le.length;Ge++){xe.index>Ge?(wa=xe,xe=null):wa=xe.sibling;var At=ue(te,xe,le[Ge],Te);if(At===null){xe===null&&(xe=wa);break}a&&xe&&At.alternate===null&&i(te,xe),q=A(At,q,Ge),Qe===null?ye=At:Qe.sibling=At,Qe=At,xe=wa}if(Ge===le.length)return r(te,xe),Rt&&Bl(te,Ge),ye;if(xe===null){for(;Ge<le.length;Ge++)xe=Se(te,le[Ge],Te),xe!==null&&(q=A(xe,q,Ge),Qe===null?ye=xe:Qe.sibling=xe,Qe=xe);return Rt&&Bl(te,Ge),ye}for(xe=u(xe);Ge<le.length;Ge++)wa=de(xe,te,Ge,le[Ge],Te),wa!==null&&(a&&wa.alternate!==null&&xe.delete(wa.key===null?Ge:wa.key),q=A(wa,q,Ge),Qe===null?ye=wa:Qe.sibling=wa,Qe=wa);return a&&xe.forEach(function(ll){return i(te,ll)}),Rt&&Bl(te,Ge),ye}function we(te,q,le,Te){if(le==null)throw Error(o(151));for(var ye=null,Qe=null,xe=q,Ge=q=0,wa=null,At=le.next();xe!==null&&!At.done;Ge++,At=le.next()){xe.index>Ge?(wa=xe,xe=null):wa=xe.sibling;var ll=ue(te,xe,At.value,Te);if(ll===null){xe===null&&(xe=wa);break}a&&xe&&ll.alternate===null&&i(te,xe),q=A(ll,q,Ge),Qe===null?ye=ll:Qe.sibling=ll,Qe=ll,xe=wa}if(At.done)return r(te,xe),Rt&&Bl(te,Ge),ye;if(xe===null){for(;!At.done;Ge++,At=le.next())At=Se(te,At.value,Te),At!==null&&(q=A(At,q,Ge),Qe===null?ye=At:Qe.sibling=At,Qe=At);return Rt&&Bl(te,Ge),ye}for(xe=u(xe);!At.done;Ge++,At=le.next())At=de(xe,te,Ge,At.value,Te),At!==null&&(a&&At.alternate!==null&&xe.delete(At.key===null?Ge:At.key),q=A(At,q,Ge),Qe===null?ye=At:Qe.sibling=At,Qe=At);return a&&xe.forEach(function(OM){return i(te,OM)}),Rt&&Bl(te,Ge),ye}function Ot(te,q,le,Te){if(typeof le=="object"&&le!==null&&le.type===p&&le.key===null&&(le=le.props.children),typeof le=="object"&&le!==null){switch(le.$$typeof){case S:e:{for(var ye=le.key;q!==null;){if(q.key===ye){if(ye=le.type,ye===p){if(q.tag===7){r(te,q.sibling),Te=E(q,le.props.children),Te.return=te,te=Te;break e}}else if(q.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===Y&&aI(ye)===q.type){r(te,q.sibling),Te=E(q,le.props),Hc(Te,le),Te.return=te,te=Te;break e}r(te,q);break}else i(te,q);q=q.sibling}le.type===p?(Te=Pl(le.props.children,te.mode,Te,le.key),Te.return=te,te=Te):(Te=nd(le.type,le.key,le.props,null,te.mode,Te),Hc(Te,le),Te.return=te,te=Te)}return b(te);case g:e:{for(ye=le.key;q!==null;){if(q.key===ye)if(q.tag===4&&q.stateNode.containerInfo===le.containerInfo&&q.stateNode.implementation===le.implementation){r(te,q.sibling),Te=E(q,le.children||[]),Te.return=te,te=Te;break e}else{r(te,q);break}else i(te,q);q=q.sibling}Te=kE(le,te.mode,Te),Te.return=te,te=Te}return b(te);case Y:return ye=le._init,le=ye(le._payload),Ot(te,q,le,Te)}if(V(le))return Fe(te,q,le,Te);if(j(le)){if(ye=j(le),typeof ye!="function")throw Error(o(150));return le=ye.call(le),we(te,q,le,Te)}if(typeof le.then=="function")return Ot(te,q,gd(le),Te);if(le.$$typeof===w)return Ot(te,q,sd(te,le),Te);Id(te,le)}return typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint"?(le=""+le,q!==null&&q.tag===6?(r(te,q.sibling),Te=E(q,le),Te.return=te,te=Te):(r(te,q),Te=HE(le,te.mode,Te),Te.return=te,te=Te),b(te)):r(te,q)}return function(te,q,le,Te){try{xc=0;var ye=Ot(te,q,le,Te);return lr=null,ye}catch(xe){if(xe===Nc||xe===cd)throw xe;var Qe=wn(29,xe,null,te.mode);return Qe.lanes=Te,Qe.return=te,Qe}finally{}}}var sr=nI(!0),iI=nI(!1),oi=ee(null),Bi=null;function Ko(a){var i=a.alternate;W(Da,Da.current&1),W(oi,a),Bi===null&&(i===null||ar.current!==null||i.memoizedState!==null)&&(Bi=a)}function oI(a){if(a.tag===22){if(W(Da,Da.current),W(oi,a),Bi===null){var i=a.alternate;i!==null&&i.memoizedState!==null&&(Bi=a)}}else Vo()}function Vo(){W(Da,Da.current),W(oi,oi.current)}function To(a){ce(oi),Bi===a&&(Bi=null),ce(Da)}var Da=ee(0);function _d(a){for(var i=a;i!==null;){if(i.tag===13){var r=i.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||nA(r)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break;for(;i.sibling===null;){if(i.return===null||i.return===a)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function Em(a,i,r,u){i=a.memoizedState,r=r(u,i),r=r==null?i:R({},i,r),a.memoizedState=r,a.lanes===0&&(a.updateQueue.baseState=r)}var mm={enqueueSetState:function(a,i,r){a=a._reactInternals;var u=Fn(),E=jo(u);E.payload=i,r!=null&&(E.callback=r),i=zo(a,E,u),i!==null&&(jn(i,a,u),bc(i,a,u))},enqueueReplaceState:function(a,i,r){a=a._reactInternals;var u=Fn(),E=jo(u);E.tag=1,E.payload=i,r!=null&&(E.callback=r),i=zo(a,E,u),i!==null&&(jn(i,a,u),bc(i,a,u))},enqueueForceUpdate:function(a,i){a=a._reactInternals;var r=Fn(),u=jo(r);u.tag=2,i!=null&&(u.callback=i),i=zo(a,u,r),i!==null&&(jn(i,a,r),bc(i,a,r))}};function lI(a,i,r,u,E,A,b){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(u,A,b):i.prototype&&i.prototype.isPureReactComponent?!Ac(r,u)||!Ac(E,A):!0}function sI(a,i,r,u){a=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(r,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(r,u),i.state!==a&&mm.enqueueReplaceState(i,i.state,null)}function Wl(a,i){var r=i;if("ref"in i){r={};for(var u in i)u!=="ref"&&(r[u]=i[u])}if(a=a.defaultProps){r===i&&(r=R({},r));for(var E in a)r[E]===void 0&&(r[E]=a[E])}return r}var pd=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function rI(a){pd(a)}function cI(a){console.error(a)}function uI(a){pd(a)}function Nd(a,i){try{var r=a.onUncaughtError;r(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function dI(a,i,r){try{var u=a.onCaughtError;u(r.value,{componentStack:r.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function Am(a,i,r){return r=jo(r),r.tag=3,r.payload={element:null},r.callback=function(){Nd(a,i)},r}function hI(a){return a=jo(a),a.tag=3,a}function fI(a,i,r,u){var E=r.type.getDerivedStateFromError;if(typeof E=="function"){var A=u.value;a.payload=function(){return E(A)},a.callback=function(){dI(i,r,u)}}var b=r.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(a.callback=function(){dI(i,r,u),typeof E!="function"&&($o===null?$o=new Set([this]):$o.add(this));var v=u.stack;this.componentDidCatch(u.value,{componentStack:v!==null?v:""})})}function Ov(a,i,r,u,E){if(r.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=r.alternate,i!==null&&Ic(i,r,E,!0),r=oi.current,r!==null){switch(r.tag){case 13:return Bi===null?Bm():r.alternate===null&&ea===0&&(ea=3),r.flags&=-257,r.flags|=65536,r.lanes=E,u===KE?r.flags|=16384:(i=r.updateQueue,i===null?r.updateQueue=new Set([u]):i.add(u),jm(a,u,E)),!1;case 22:return r.flags|=65536,u===KE?r.flags|=16384:(i=r.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},r.updateQueue=i):(r=i.retryQueue,r===null?i.retryQueue=new Set([u]):r.add(u)),jm(a,u,E)),!1}throw Error(o(435,r.tag))}return jm(a,u,E),Bm(),!1}if(Rt)return i=oi.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=E,u!==PE&&(a=Error(o(422),{cause:u}),gc(ti(a,r)))):(u!==PE&&(i=Error(o(423),{cause:u}),gc(ti(i,r))),a=a.current.alternate,a.flags|=65536,E&=-E,a.lanes|=E,u=ti(u,r),E=Am(a.stateNode,u,E),XE(a,E),ea!==4&&(ea=2)),!1;var A=Error(o(520),{cause:u});if(A=ti(A,r),Fc===null?Fc=[A]:Fc.push(A),ea!==4&&(ea=2),i===null)return!0;u=ti(u,r),r=i;do{switch(r.tag){case 3:return r.flags|=65536,a=E&-E,r.lanes|=a,a=Am(r.stateNode,u,a),XE(r,a),!1;case 1:if(i=r.type,A=r.stateNode,(r.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&($o===null||!$o.has(A))))return r.flags|=65536,E&=-E,r.lanes|=E,E=hI(E),fI(E,a,r,u),XE(r,E),!1}r=r.return}while(r!==null);return!1}var EI=Error(o(461)),ka=!1;function Va(a,i,r,u){i.child=a===null?iI(i,null,r,u):sr(i,a.child,r,u)}function mI(a,i,r,u,E){r=r.render;var A=i.ref;if("ref"in u){var b={};for(var v in u)v!=="ref"&&(b[v]=u[v])}else b=u;return Yl(i),u=JE(a,i,r,b,A,E),v=em(),a!==null&&!ka?(tm(a,i,E),So(a,i,E)):(Rt&&v&&UE(i),i.flags|=1,Va(a,i,u,E),i.child)}function AI(a,i,r,u,E){if(a===null){var A=r.type;return typeof A=="function"&&!xE(A)&&A.defaultProps===void 0&&r.compare===null?(i.tag=15,i.type=A,RI(a,i,A,u,E)):(a=nd(r.type,null,u,i,i.mode,E),a.ref=i.ref,a.return=i,i.child=a)}if(A=a.child,!Nm(a,E)){var b=A.memoizedProps;if(r=r.compare,r=r!==null?r:Ac,r(b,u)&&a.ref===i.ref)return So(a,i,E)}return i.flags|=1,a=ho(A,u),a.ref=i.ref,a.return=i,i.child=a}function RI(a,i,r,u,E){if(a!==null){var A=a.memoizedProps;if(Ac(A,u)&&a.ref===i.ref)if(ka=!1,i.pendingProps=u=A,Nm(a,E))(a.flags&131072)!==0&&(ka=!0);else return i.lanes=a.lanes,So(a,i,E)}return Rm(a,i,r,u,E)}function TI(a,i,r){var u=i.pendingProps,E=u.children,A=a!==null?a.memoizedState:null;if(u.mode==="hidden"){if((i.flags&128)!==0){if(u=A!==null?A.baseLanes|r:r,a!==null){for(E=i.child=a.child,A=0;E!==null;)A=A|E.lanes|E.childLanes,E=E.sibling;i.childLanes=A&~u}else i.childLanes=0,i.child=null;return SI(a,i,u,r)}if((r&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},a!==null&&rd(i,A!==null?A.cachePool:null),A!==null?Rg(i,A):ZE(),oI(i);else return i.lanes=i.childLanes=536870912,SI(a,i,A!==null?A.baseLanes|r:r,r)}else A!==null?(rd(i,A.cachePool),Rg(i,A),Vo(),i.memoizedState=null):(a!==null&&rd(i,null),ZE(),Vo());return Va(a,i,E,r),i.child}function SI(a,i,r,u){var E=YE();return E=E===null?null:{parent:Oa._currentValue,pool:E},i.memoizedState={baseLanes:r,cachePool:E},a!==null&&rd(i,null),ZE(),oI(i),a!==null&&Ic(a,i,u,!0),null}function Cd(a,i){var r=i.ref;if(r===null)a!==null&&a.ref!==null&&(i.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(o(284));(a===null||a.ref!==r)&&(i.flags|=4194816)}}function Rm(a,i,r,u,E){return Yl(i),r=JE(a,i,r,u,void 0,E),u=em(),a!==null&&!ka?(tm(a,i,E),So(a,i,E)):(Rt&&u&&UE(i),i.flags|=1,Va(a,i,r,E),i.child)}function gI(a,i,r,u,E,A){return Yl(i),i.updateQueue=null,r=Sg(i,u,r,E),Tg(a),u=em(),a!==null&&!ka?(tm(a,i,A),So(a,i,A)):(Rt&&u&&UE(i),i.flags|=1,Va(a,i,r,A),i.child)}function II(a,i,r,u,E){if(Yl(i),i.stateNode===null){var A=Qs,b=r.contextType;typeof b=="object"&&b!==null&&(A=on(b)),A=new r(u,A),i.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,A.updater=mm,i.stateNode=A,A._reactInternals=i,A=i.stateNode,A.props=u,A.state=i.memoizedState,A.refs={},VE(i),b=r.contextType,A.context=typeof b=="object"&&b!==null?on(b):Qs,A.state=i.memoizedState,b=r.getDerivedStateFromProps,typeof b=="function"&&(Em(i,r,b,u),A.state=i.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(b=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),b!==A.state&&mm.enqueueReplaceState(A,A.state,null),Dc(i,u,A,E),Oc(),A.state=i.memoizedState),typeof A.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(a===null){A=i.stateNode;var v=i.memoizedProps,F=Wl(r,v);A.props=F;var re=A.context,Ae=r.contextType;b=Qs,typeof Ae=="object"&&Ae!==null&&(b=on(Ae));var Se=r.getDerivedStateFromProps;Ae=typeof Se=="function"||typeof A.getSnapshotBeforeUpdate=="function",v=i.pendingProps!==v,Ae||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(v||re!==b)&&sI(i,A,u,b),Fo=!1;var ue=i.memoizedState;A.state=ue,Dc(i,u,A,E),Oc(),re=i.memoizedState,v||ue!==re||Fo?(typeof Se=="function"&&(Em(i,r,Se,u),re=i.memoizedState),(F=Fo||lI(i,r,F,u,ue,re,b))?(Ae||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(i.flags|=4194308)):(typeof A.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=re),A.props=u,A.state=re,A.context=b,u=F):(typeof A.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{A=i.stateNode,WE(a,i),b=i.memoizedProps,Ae=Wl(r,b),A.props=Ae,Se=i.pendingProps,ue=A.context,re=r.contextType,F=Qs,typeof re=="object"&&re!==null&&(F=on(re)),v=r.getDerivedStateFromProps,(re=typeof v=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(b!==Se||ue!==F)&&sI(i,A,u,F),Fo=!1,ue=i.memoizedState,A.state=ue,Dc(i,u,A,E),Oc();var de=i.memoizedState;b!==Se||ue!==de||Fo||a!==null&&a.dependencies!==null&&ld(a.dependencies)?(typeof v=="function"&&(Em(i,r,v,u),de=i.memoizedState),(Ae=Fo||lI(i,r,Ae,u,ue,de,F)||a!==null&&a.dependencies!==null&&ld(a.dependencies))?(re||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(u,de,F),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(u,de,F)),typeof A.componentDidUpdate=="function"&&(i.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof A.componentDidUpdate!="function"||b===a.memoizedProps&&ue===a.memoizedState||(i.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||b===a.memoizedProps&&ue===a.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=de),A.props=u,A.state=de,A.context=F,u=Ae):(typeof A.componentDidUpdate!="function"||b===a.memoizedProps&&ue===a.memoizedState||(i.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||b===a.memoizedProps&&ue===a.memoizedState||(i.flags|=1024),u=!1)}return A=u,Cd(a,i),u=(i.flags&128)!==0,A||u?(A=i.stateNode,r=u&&typeof r.getDerivedStateFromError!="function"?null:A.render(),i.flags|=1,a!==null&&u?(i.child=sr(i,a.child,null,E),i.child=sr(i,null,r,E)):Va(a,i,r,E),i.memoizedState=A.state,a=i.child):a=So(a,i,E),a}function _I(a,i,r,u){return Sc(),i.flags|=256,Va(a,i,r,u),i.child}var Tm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Sm(a){return{baseLanes:a,cachePool:cg()}}function gm(a,i,r){return a=a!==null?a.childLanes&~r:0,i&&(a|=li),a}function pI(a,i,r){var u=i.pendingProps,E=!1,A=(i.flags&128)!==0,b;if((b=A)||(b=a!==null&&a.memoizedState===null?!1:(Da.current&2)!==0),b&&(E=!0,i.flags&=-129),b=(i.flags&32)!==0,i.flags&=-33,a===null){if(Rt){if(E?Ko(i):Vo(),Rt){var v=Jt,F;if(F=v){e:{for(F=v,v=Gi;F.nodeType!==8;){if(!v){v=null;break e}if(F=Ci(F.nextSibling),F===null){v=null;break e}}v=F}v!==null?(i.memoizedState={dehydrated:v,treeContext:Gl!==null?{id:fo,overflow:Eo}:null,retryLane:536870912,hydrationErrors:null},F=wn(18,null,null,0),F.stateNode=v,F.return=i,i.child=F,un=i,Jt=null,F=!0):F=!1}F||jl(i)}if(v=i.memoizedState,v!==null&&(v=v.dehydrated,v!==null))return nA(v)?i.lanes=32:i.lanes=536870912,null;To(i)}return v=u.children,u=u.fallback,E?(Vo(),E=i.mode,v=bd({mode:"hidden",children:v},E),u=Pl(u,E,r,null),v.return=i,u.return=i,v.sibling=u,i.child=v,E=i.child,E.memoizedState=Sm(r),E.childLanes=gm(a,b,r),i.memoizedState=Tm,u):(Ko(i),Im(i,v))}if(F=a.memoizedState,F!==null&&(v=F.dehydrated,v!==null)){if(A)i.flags&256?(Ko(i),i.flags&=-257,i=_m(a,i,r)):i.memoizedState!==null?(Vo(),i.child=a.child,i.flags|=128,i=null):(Vo(),E=u.fallback,v=i.mode,u=bd({mode:"visible",children:u.children},v),E=Pl(E,v,r,null),E.flags|=2,u.return=i,E.return=i,u.sibling=E,i.child=u,sr(i,a.child,null,r),u=i.child,u.memoizedState=Sm(r),u.childLanes=gm(a,b,r),i.memoizedState=Tm,i=E);else if(Ko(i),nA(v)){if(b=v.nextSibling&&v.nextSibling.dataset,b)var re=b.dgst;b=re,u=Error(o(419)),u.stack="",u.digest=b,gc({value:u,source:null,stack:null}),i=_m(a,i,r)}else if(ka||Ic(a,i,r,!1),b=(r&a.childLanes)!==0,ka||b){if(b=Ht,b!==null&&(u=r&-r,u=(u&42)!==0?1:lc(u),u=(u&(b.suspendedLanes|r))!==0?0:u,u!==0&&u!==F.retryLane))throw F.retryLane=u,Zs(a,u),jn(b,a,u),EI;v.data==="$?"||Bm(),i=_m(a,i,r)}else v.data==="$?"?(i.flags|=192,i.child=a.child,i=null):(a=F.treeContext,Jt=Ci(v.nextSibling),un=i,Rt=!0,Fl=null,Gi=!1,a!==null&&(ni[ii++]=fo,ni[ii++]=Eo,ni[ii++]=Gl,fo=a.id,Eo=a.overflow,Gl=i),i=Im(i,u.children),i.flags|=4096);return i}return E?(Vo(),E=u.fallback,v=i.mode,F=a.child,re=F.sibling,u=ho(F,{mode:"hidden",children:u.children}),u.subtreeFlags=F.subtreeFlags&65011712,re!==null?E=ho(re,E):(E=Pl(E,v,r,null),E.flags|=2),E.return=i,u.return=i,u.sibling=E,i.child=u,u=E,E=i.child,v=a.child.memoizedState,v===null?v=Sm(r):(F=v.cachePool,F!==null?(re=Oa._currentValue,F=F.parent!==re?{parent:re,pool:re}:F):F=cg(),v={baseLanes:v.baseLanes|r,cachePool:F}),E.memoizedState=v,E.childLanes=gm(a,b,r),i.memoizedState=Tm,u):(Ko(i),r=a.child,a=r.sibling,r=ho(r,{mode:"visible",children:u.children}),r.return=i,r.sibling=null,a!==null&&(b=i.deletions,b===null?(i.deletions=[a],i.flags|=16):b.push(a)),i.child=r,i.memoizedState=null,r)}function Im(a,i){return i=bd({mode:"visible",children:i},a.mode),i.return=a,a.child=i}function bd(a,i){return a=wn(22,a,null,i),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function _m(a,i,r){return sr(i,a.child,null,r),a=Im(i,i.pendingProps.children),a.flags|=2,i.memoizedState=null,a}function NI(a,i,r){a.lanes|=i;var u=a.alternate;u!==null&&(u.lanes|=i),BE(a.return,i,r)}function pm(a,i,r,u,E){var A=a.memoizedState;A===null?a.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:r,tailMode:E}:(A.isBackwards=i,A.rendering=null,A.renderingStartTime=0,A.last=u,A.tail=r,A.tailMode=E)}function CI(a,i,r){var u=i.pendingProps,E=u.revealOrder,A=u.tail;if(Va(a,i,u.children,r),u=Da.current,(u&2)!==0)u=u&1|2,i.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=i.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&NI(a,r,i);else if(a.tag===19)NI(a,r,i);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break e;for(;a.sibling===null;){if(a.return===null||a.return===i)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}u&=1}switch(W(Da,u),E){case"forwards":for(r=i.child,E=null;r!==null;)a=r.alternate,a!==null&&_d(a)===null&&(E=r),r=r.sibling;r=E,r===null?(E=i.child,i.child=null):(E=r.sibling,r.sibling=null),pm(i,!1,E,r,A);break;case"backwards":for(r=null,E=i.child,i.child=null;E!==null;){if(a=E.alternate,a!==null&&_d(a)===null){i.child=E;break}a=E.sibling,E.sibling=r,r=E,E=a}pm(i,!0,r,null,A);break;case"together":pm(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function So(a,i,r){if(a!==null&&(i.dependencies=a.dependencies),Qo|=i.lanes,(r&i.childLanes)===0)if(a!==null){if(Ic(a,i,r,!1),(r&i.childLanes)===0)return null}else return null;if(a!==null&&i.child!==a.child)throw Error(o(153));if(i.child!==null){for(a=i.child,r=ho(a,a.pendingProps),i.child=r,r.return=i;a.sibling!==null;)a=a.sibling,r=r.sibling=ho(a,a.pendingProps),r.return=i;r.sibling=null}return i.child}function Nm(a,i){return(a.lanes&i)!==0?!0:(a=a.dependencies,!!(a!==null&&ld(a)))}function Dv(a,i,r){switch(i.tag){case 3:ae(i,i.stateNode.containerInfo),Bo(i,Oa,a.memoizedState.cache),Sc();break;case 27:case 5:Re(i);break;case 4:ae(i,i.stateNode.containerInfo);break;case 10:Bo(i,i.type,i.memoizedProps.value);break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(Ko(i),i.flags|=128,null):(r&i.child.childLanes)!==0?pI(a,i,r):(Ko(i),a=So(a,i,r),a!==null?a.sibling:null);Ko(i);break;case 19:var E=(a.flags&128)!==0;if(u=(r&i.childLanes)!==0,u||(Ic(a,i,r,!1),u=(r&i.childLanes)!==0),E){if(u)return CI(a,i,r);i.flags|=128}if(E=i.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),W(Da,Da.current),u)break;return null;case 22:case 23:return i.lanes=0,TI(a,i,r);case 24:Bo(i,Oa,a.memoizedState.cache)}return So(a,i,r)}function bI(a,i,r){if(a!==null)if(a.memoizedProps!==i.pendingProps)ka=!0;else{if(!Nm(a,r)&&(i.flags&128)===0)return ka=!1,Dv(a,i,r);ka=(a.flags&131072)!==0}else ka=!1,Rt&&(i.flags&1048576)!==0&&ag(i,od,i.index);switch(i.lanes=0,i.tag){case 16:e:{a=i.pendingProps;var u=i.elementType,E=u._init;if(u=E(u._payload),i.type=u,typeof u=="function")xE(u)?(a=Wl(u,a),i.tag=1,i=II(null,i,u,a,r)):(i.tag=0,i=Rm(null,i,u,a,r));else{if(u!=null){if(E=u.$$typeof,E===y){i.tag=11,i=mI(null,i,u,a,r);break e}else if(E===B){i.tag=14,i=AI(null,i,u,a,r);break e}}throw i=Ee(u)||u,Error(o(306,i,""))}}return i;case 0:return Rm(a,i,i.type,i.pendingProps,r);case 1:return u=i.type,E=Wl(u,i.pendingProps),II(a,i,u,E,r);case 3:e:{if(ae(i,i.stateNode.containerInfo),a===null)throw Error(o(387));u=i.pendingProps;var A=i.memoizedState;E=A.element,WE(a,i),Dc(i,u,null,r);var b=i.memoizedState;if(u=b.cache,Bo(i,Oa,u),u!==A.cache&&FE(i,[Oa],r,!0),Oc(),u=b.element,A.isDehydrated)if(A={element:u,isDehydrated:!1,cache:b.cache},i.updateQueue.baseState=A,i.memoizedState=A,i.flags&256){i=_I(a,i,u,r);break e}else if(u!==E){E=ti(Error(o(424)),i),gc(E),i=_I(a,i,u,r);break e}else{switch(a=i.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(Jt=Ci(a.firstChild),un=i,Rt=!0,Fl=null,Gi=!0,r=iI(i,null,u,r),i.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(Sc(),u===E){i=So(a,i,r);break e}Va(a,i,u,r)}i=i.child}return i;case 26:return Cd(a,i),a===null?(r=v_(i.type,null,i.pendingProps,null))?i.memoizedState=r:Rt||(r=i.type,a=i.pendingProps,u=Bd(H.current).createElement(r),u[nn]=i,u[On]=a,Xa(u,r,a),Ha(u),i.stateNode=u):i.memoizedState=v_(i.type,a.memoizedProps,i.pendingProps,a.memoizedState),null;case 27:return Re(i),a===null&&Rt&&(u=i.stateNode=O_(i.type,i.pendingProps,H.current),un=i,Gi=!0,E=Jt,tl(i.type)?(iA=E,Jt=Ci(u.firstChild)):Jt=E),Va(a,i,i.pendingProps.children,r),Cd(a,i),a===null&&(i.flags|=4194304),i.child;case 5:return a===null&&Rt&&((E=u=Jt)&&(u=aM(u,i.type,i.pendingProps,Gi),u!==null?(i.stateNode=u,un=i,Jt=Ci(u.firstChild),Gi=!1,E=!0):E=!1),E||jl(i)),Re(i),E=i.type,A=i.pendingProps,b=a!==null?a.memoizedProps:null,u=A.children,eA(E,A)?u=null:b!==null&&eA(E,b)&&(i.flags|=32),i.memoizedState!==null&&(E=JE(a,i,gv,null,null,r),Zc._currentValue=E),Cd(a,i),Va(a,i,u,r),i.child;case 6:return a===null&&Rt&&((a=r=Jt)&&(r=nM(r,i.pendingProps,Gi),r!==null?(i.stateNode=r,un=i,Jt=null,a=!0):a=!1),a||jl(i)),null;case 13:return pI(a,i,r);case 4:return ae(i,i.stateNode.containerInfo),u=i.pendingProps,a===null?i.child=sr(i,null,u,r):Va(a,i,u,r),i.child;case 11:return mI(a,i,i.type,i.pendingProps,r);case 7:return Va(a,i,i.pendingProps,r),i.child;case 8:return Va(a,i,i.pendingProps.children,r),i.child;case 12:return Va(a,i,i.pendingProps.children,r),i.child;case 10:return u=i.pendingProps,Bo(i,i.type,u.value),Va(a,i,u.children,r),i.child;case 9:return E=i.type._context,u=i.pendingProps.children,Yl(i),E=on(E),u=u(E),i.flags|=1,Va(a,i,u,r),i.child;case 14:return AI(a,i,i.type,i.pendingProps,r);case 15:return RI(a,i,i.type,i.pendingProps,r);case 19:return CI(a,i,r);case 31:return u=i.pendingProps,r=i.mode,u={mode:u.mode,children:u.children},a===null?(r=bd(u,r),r.ref=i.ref,i.child=r,r.return=i,i=r):(r=ho(a.child,u),r.ref=i.ref,i.child=r,r.return=i,i=r),i;case 22:return TI(a,i,r);case 24:return Yl(i),u=on(Oa),a===null?(E=YE(),E===null&&(E=Ht,A=jE(),E.pooledCache=A,A.refCount++,A!==null&&(E.pooledCacheLanes|=r),E=A),i.memoizedState={parent:u,cache:E},VE(i),Bo(i,Oa,E)):((a.lanes&r)!==0&&(WE(a,i),Dc(i,null,null,r),Oc()),E=a.memoizedState,A=i.memoizedState,E.parent!==u?(E={parent:u,cache:u},i.memoizedState=E,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=E),Bo(i,Oa,u)):(u=A.cache,Bo(i,Oa,u),u!==E.cache&&FE(i,[Oa],r,!0))),Va(a,i,i.pendingProps.children,r),i.child;case 29:throw i.pendingProps}throw Error(o(156,i.tag))}function go(a){a.flags|=4}function OI(a,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!k_(i)){if(i=oi.current,i!==null&&((ct&4194048)===ct?Bi!==null:(ct&62914560)!==ct&&(ct&536870912)===0||i!==Bi))throw Cc=KE,ug;a.flags|=8192}}function Od(a,i){i!==null&&(a.flags|=4),a.flags&16384&&(i=a.tag!==22?Hs():536870912,a.lanes|=i,dr|=i)}function kc(a,i){if(!Rt)switch(a.tailMode){case"hidden":i=a.tail;for(var r=null;i!==null;)i.alternate!==null&&(r=i),i=i.sibling;r===null?a.tail=null:r.sibling=null;break;case"collapsed":r=a.tail;for(var u=null;r!==null;)r.alternate!==null&&(u=r),r=r.sibling;u===null?i||a.tail===null?a.tail=null:a.tail.sibling=null:u.sibling=null}}function Vt(a){var i=a.alternate!==null&&a.alternate.child===a.child,r=0,u=0;if(i)for(var E=a.child;E!==null;)r|=E.lanes|E.childLanes,u|=E.subtreeFlags&65011712,u|=E.flags&65011712,E.return=a,E=E.sibling;else for(E=a.child;E!==null;)r|=E.lanes|E.childLanes,u|=E.subtreeFlags,u|=E.flags,E.return=a,E=E.sibling;return a.subtreeFlags|=u,a.childLanes=r,i}function yv(a,i,r){var u=i.pendingProps;switch(wE(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vt(i),null;case 1:return Vt(i),null;case 3:return r=i.stateNode,u=null,a!==null&&(u=a.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),Ao(Oa),he(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(a===null||a.child===null)&&(Tc(i)?go(i):a===null||a.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,og())),Vt(i),null;case 26:return r=i.memoizedState,a===null?(go(i),r!==null?(Vt(i),OI(i,r)):(Vt(i),i.flags&=-16777217)):r?r!==a.memoizedState?(go(i),Vt(i),OI(i,r)):(Vt(i),i.flags&=-16777217):(a.memoizedProps!==u&&go(i),Vt(i),i.flags&=-16777217),null;case 27:Ne(i),r=H.current;var E=i.type;if(a!==null&&i.stateNode!=null)a.memoizedProps!==u&&go(i);else{if(!u){if(i.stateNode===null)throw Error(o(166));return Vt(i),null}a=z.current,Tc(i)?ng(i):(a=O_(E,u,r),i.stateNode=a,go(i))}return Vt(i),null;case 5:if(Ne(i),r=i.type,a!==null&&i.stateNode!=null)a.memoizedProps!==u&&go(i);else{if(!u){if(i.stateNode===null)throw Error(o(166));return Vt(i),null}if(a=z.current,Tc(i))ng(i);else{switch(E=Bd(H.current),a){case 1:a=E.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:a=E.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":a=E.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":a=E.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":a=E.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof u.is=="string"?E.createElement("select",{is:u.is}):E.createElement("select"),u.multiple?a.multiple=!0:u.size&&(a.size=u.size);break;default:a=typeof u.is=="string"?E.createElement(r,{is:u.is}):E.createElement(r)}}a[nn]=i,a[On]=u;e:for(E=i.child;E!==null;){if(E.tag===5||E.tag===6)a.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===i)break e;for(;E.sibling===null;){if(E.return===null||E.return===i)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}i.stateNode=a;e:switch(Xa(a,r,u),r){case"button":case"input":case"select":case"textarea":a=!!u.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&go(i)}}return Vt(i),i.flags&=-16777217,null;case 6:if(a&&i.stateNode!=null)a.memoizedProps!==u&&go(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(o(166));if(a=H.current,Tc(i)){if(a=i.stateNode,r=i.memoizedProps,u=null,E=un,E!==null)switch(E.tag){case 27:case 5:u=E.memoizedProps}a[nn]=i,a=!!(a.nodeValue===r||u!==null&&u.suppressHydrationWarning===!0||g_(a.nodeValue,r)),a||jl(i)}else a=Bd(a).createTextNode(u),a[nn]=i,i.stateNode=a}return Vt(i),null;case 13:if(u=i.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(E=Tc(i),u!==null&&u.dehydrated!==null){if(a===null){if(!E)throw Error(o(318));if(E=i.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(o(317));E[nn]=i}else Sc(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Vt(i),E=!1}else E=og(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=E),E=!0;if(!E)return i.flags&256?(To(i),i):(To(i),null)}if(To(i),(i.flags&128)!==0)return i.lanes=r,i;if(r=u!==null,a=a!==null&&a.memoizedState!==null,r){u=i.child,E=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(E=u.alternate.memoizedState.cachePool.pool);var A=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(A=u.memoizedState.cachePool.pool),A!==E&&(u.flags|=2048)}return r!==a&&r&&(i.child.flags|=8192),Od(i,i.updateQueue),Vt(i),null;case 4:return he(),a===null&&qm(i.stateNode.containerInfo),Vt(i),null;case 10:return Ao(i.type),Vt(i),null;case 19:if(ce(Da),E=i.memoizedState,E===null)return Vt(i),null;if(u=(i.flags&128)!==0,A=E.rendering,A===null)if(u)kc(E,!1);else{if(ea!==0||a!==null&&(a.flags&128)!==0)for(a=i.child;a!==null;){if(A=_d(a),A!==null){for(i.flags|=128,kc(E,!1),a=A.updateQueue,i.updateQueue=a,Od(i,a),i.subtreeFlags=0,a=r,r=i.child;r!==null;)tg(r,a),r=r.sibling;return W(Da,Da.current&1|2),i.child}a=a.sibling}E.tail!==null&&De()>vd&&(i.flags|=128,u=!0,kc(E,!1),i.lanes=4194304)}else{if(!u)if(a=_d(A),a!==null){if(i.flags|=128,u=!0,a=a.updateQueue,i.updateQueue=a,Od(i,a),kc(E,!0),E.tail===null&&E.tailMode==="hidden"&&!A.alternate&&!Rt)return Vt(i),null}else 2*De()-E.renderingStartTime>vd&&r!==536870912&&(i.flags|=128,u=!0,kc(E,!1),i.lanes=4194304);E.isBackwards?(A.sibling=i.child,i.child=A):(a=E.last,a!==null?a.sibling=A:i.child=A,E.last=A)}return E.tail!==null?(i=E.tail,E.rendering=i,E.tail=i.sibling,E.renderingStartTime=De(),i.sibling=null,a=Da.current,W(Da,u?a&1|2:a&1),i):(Vt(i),null);case 22:case 23:return To(i),QE(),u=i.memoizedState!==null,a!==null?a.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(r&536870912)!==0&&(i.flags&128)===0&&(Vt(i),i.subtreeFlags&6&&(i.flags|=8192)):Vt(i),r=i.updateQueue,r!==null&&Od(i,r.retryQueue),r=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(r=a.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==r&&(i.flags|=2048),a!==null&&ce(Kl),null;case 24:return r=null,a!==null&&(r=a.memoizedState.cache),i.memoizedState.cache!==r&&(i.flags|=2048),Ao(Oa),Vt(i),null;case 25:return null;case 30:return null}throw Error(o(156,i.tag))}function vv(a,i){switch(wE(i),i.tag){case 1:return a=i.flags,a&65536?(i.flags=a&-65537|128,i):null;case 3:return Ao(Oa),he(),a=i.flags,(a&65536)!==0&&(a&128)===0?(i.flags=a&-65537|128,i):null;case 26:case 27:case 5:return Ne(i),null;case 13:if(To(i),a=i.memoizedState,a!==null&&a.dehydrated!==null){if(i.alternate===null)throw Error(o(340));Sc()}return a=i.flags,a&65536?(i.flags=a&-65537|128,i):null;case 19:return ce(Da),null;case 4:return he(),null;case 10:return Ao(i.type),null;case 22:case 23:return To(i),QE(),a!==null&&ce(Kl),a=i.flags,a&65536?(i.flags=a&-65537|128,i):null;case 24:return Ao(Oa),null;case 25:return null;default:return null}}function DI(a,i){switch(wE(i),i.tag){case 3:Ao(Oa),he();break;case 26:case 27:case 5:Ne(i);break;case 4:he();break;case 13:To(i);break;case 19:ce(Da);break;case 10:Ao(i.type);break;case 22:case 23:To(i),QE(),a!==null&&ce(Kl);break;case 24:Ao(Oa)}}function Uc(a,i){try{var r=i.updateQueue,u=r!==null?r.lastEffect:null;if(u!==null){var E=u.next;r=E;do{if((r.tag&a)===a){u=void 0;var A=r.create,b=r.inst;u=A(),b.destroy=u}r=r.next}while(r!==E)}}catch(v){vt(i,i.return,v)}}function Wo(a,i,r){try{var u=i.updateQueue,E=u!==null?u.lastEffect:null;if(E!==null){var A=E.next;u=A;do{if((u.tag&a)===a){var b=u.inst,v=b.destroy;if(v!==void 0){b.destroy=void 0,E=i;var F=r,re=v;try{re()}catch(Ae){vt(E,F,Ae)}}}u=u.next}while(u!==A)}}catch(Ae){vt(i,i.return,Ae)}}function yI(a){var i=a.updateQueue;if(i!==null){var r=a.stateNode;try{Ag(i,r)}catch(u){vt(a,a.return,u)}}}function vI(a,i,r){r.props=Wl(a.type,a.memoizedProps),r.state=a.memoizedState;try{r.componentWillUnmount()}catch(u){vt(a,i,u)}}function wc(a,i){try{var r=a.ref;if(r!==null){switch(a.tag){case 26:case 27:case 5:var u=a.stateNode;break;case 30:u=a.stateNode;break;default:u=a.stateNode}typeof r=="function"?a.refCleanup=r(u):r.current=u}}catch(E){vt(a,i,E)}}function Fi(a,i){var r=a.ref,u=a.refCleanup;if(r!==null)if(typeof u=="function")try{u()}catch(E){vt(a,i,E)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(E){vt(a,i,E)}else r.current=null}function MI(a){var i=a.type,r=a.memoizedProps,u=a.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":r.autoFocus&&u.focus();break e;case"img":r.src?u.src=r.src:r.srcSet&&(u.srcset=r.srcSet)}}catch(E){vt(a,a.return,E)}}function Cm(a,i,r){try{var u=a.stateNode;Qv(u,a.type,r,i),u[On]=i}catch(E){vt(a,a.return,E)}}function LI(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&tl(a.type)||a.tag===4}function bm(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||LI(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&tl(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Om(a,i,r){var u=a.tag;if(u===5||u===6)a=a.stateNode,i?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(a,i):(i=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,i.appendChild(a),r=r._reactRootContainer,r!=null||i.onclick!==null||(i.onclick=Gd));else if(u!==4&&(u===27&&tl(a.type)&&(r=a.stateNode,i=null),a=a.child,a!==null))for(Om(a,i,r),a=a.sibling;a!==null;)Om(a,i,r),a=a.sibling}function Dd(a,i,r){var u=a.tag;if(u===5||u===6)a=a.stateNode,i?r.insertBefore(a,i):r.appendChild(a);else if(u!==4&&(u===27&&tl(a.type)&&(r=a.stateNode),a=a.child,a!==null))for(Dd(a,i,r),a=a.sibling;a!==null;)Dd(a,i,r),a=a.sibling}function xI(a){var i=a.stateNode,r=a.memoizedProps;try{for(var u=a.type,E=i.attributes;E.length;)i.removeAttributeNode(E[0]);Xa(i,u,r),i[nn]=a,i[On]=r}catch(A){vt(a,a.return,A)}}var Io=!1,Ea=!1,Dm=!1,HI=typeof WeakSet=="function"?WeakSet:Set,Ua=null;function Mv(a,i){if(a=a.containerInfo,$m=Vd,a=KS(a),bE(a)){if("selectionStart"in a)var r={start:a.selectionStart,end:a.selectionEnd};else e:{r=(r=a.ownerDocument)&&r.defaultView||window;var u=r.getSelection&&r.getSelection();if(u&&u.rangeCount!==0){r=u.anchorNode;var E=u.anchorOffset,A=u.focusNode;u=u.focusOffset;try{r.nodeType,A.nodeType}catch{r=null;break e}var b=0,v=-1,F=-1,re=0,Ae=0,Se=a,ue=null;t:for(;;){for(var de;Se!==r||E!==0&&Se.nodeType!==3||(v=b+E),Se!==A||u!==0&&Se.nodeType!==3||(F=b+u),Se.nodeType===3&&(b+=Se.nodeValue.length),(de=Se.firstChild)!==null;)ue=Se,Se=de;for(;;){if(Se===a)break t;if(ue===r&&++re===E&&(v=b),ue===A&&++Ae===u&&(F=b),(de=Se.nextSibling)!==null)break;Se=ue,ue=Se.parentNode}Se=de}r=v===-1||F===-1?null:{start:v,end:F}}else r=null}r=r||{start:0,end:0}}else r=null;for(Jm={focusedElem:a,selectionRange:r},Vd=!1,Ua=i;Ua!==null;)if(i=Ua,a=i.child,(i.subtreeFlags&1024)!==0&&a!==null)a.return=i,Ua=a;else for(;Ua!==null;){switch(i=Ua,A=i.alternate,a=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&A!==null){a=void 0,r=i,E=A.memoizedProps,A=A.memoizedState,u=r.stateNode;try{var Fe=Wl(r.type,E,r.elementType===r.type);a=u.getSnapshotBeforeUpdate(Fe,A),u.__reactInternalSnapshotBeforeUpdate=a}catch(we){vt(r,r.return,we)}}break;case 3:if((a&1024)!==0){if(a=i.stateNode.containerInfo,r=a.nodeType,r===9)aA(a);else if(r===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":aA(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(o(163))}if(a=i.sibling,a!==null){a.return=i.return,Ua=a;break}Ua=i.return}}function kI(a,i,r){var u=r.flags;switch(r.tag){case 0:case 11:case 15:Xo(a,r),u&4&&Uc(5,r);break;case 1:if(Xo(a,r),u&4)if(a=r.stateNode,i===null)try{a.componentDidMount()}catch(b){vt(r,r.return,b)}else{var E=Wl(r.type,i.memoizedProps);i=i.memoizedState;try{a.componentDidUpdate(E,i,a.__reactInternalSnapshotBeforeUpdate)}catch(b){vt(r,r.return,b)}}u&64&&yI(r),u&512&&wc(r,r.return);break;case 3:if(Xo(a,r),u&64&&(a=r.updateQueue,a!==null)){if(i=null,r.child!==null)switch(r.child.tag){case 27:case 5:i=r.child.stateNode;break;case 1:i=r.child.stateNode}try{Ag(a,i)}catch(b){vt(r,r.return,b)}}break;case 27:i===null&&u&4&&xI(r);case 26:case 5:Xo(a,r),i===null&&u&4&&MI(r),u&512&&wc(r,r.return);break;case 12:Xo(a,r);break;case 13:Xo(a,r),u&4&&PI(a,r),u&64&&(a=r.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(r=Bv.bind(null,r),iM(a,r))));break;case 22:if(u=r.memoizedState!==null||Io,!u){i=i!==null&&i.memoizedState!==null||Ea,E=Io;var A=Ea;Io=u,(Ea=i)&&!A?qo(a,r,(r.subtreeFlags&8772)!==0):Xo(a,r),Io=E,Ea=A}break;case 30:break;default:Xo(a,r)}}function UI(a){var i=a.alternate;i!==null&&(a.alternate=null,UI(i)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(i=a.stateNode,i!==null&&sE(i)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var Ft=null,vn=!1;function _o(a,i,r){for(r=r.child;r!==null;)wI(a,i,r),r=r.sibling}function wI(a,i,r){if(rt&&typeof rt.onCommitFiberUnmount=="function")try{rt.onCommitFiberUnmount(wo,r)}catch{}switch(r.tag){case 26:Ea||Fi(r,i),_o(a,i,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:Ea||Fi(r,i);var u=Ft,E=vn;tl(r.type)&&(Ft=r.stateNode,vn=!1),_o(a,i,r),Vc(r.stateNode),Ft=u,vn=E;break;case 5:Ea||Fi(r,i);case 6:if(u=Ft,E=vn,Ft=null,_o(a,i,r),Ft=u,vn=E,Ft!==null)if(vn)try{(Ft.nodeType===9?Ft.body:Ft.nodeName==="HTML"?Ft.ownerDocument.body:Ft).removeChild(r.stateNode)}catch(A){vt(r,i,A)}else try{Ft.removeChild(r.stateNode)}catch(A){vt(r,i,A)}break;case 18:Ft!==null&&(vn?(a=Ft,C_(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.stateNode),eu(a)):C_(Ft,r.stateNode));break;case 4:u=Ft,E=vn,Ft=r.stateNode.containerInfo,vn=!0,_o(a,i,r),Ft=u,vn=E;break;case 0:case 11:case 14:case 15:Ea||Wo(2,r,i),Ea||Wo(4,r,i),_o(a,i,r);break;case 1:Ea||(Fi(r,i),u=r.stateNode,typeof u.componentWillUnmount=="function"&&vI(r,i,u)),_o(a,i,r);break;case 21:_o(a,i,r);break;case 22:Ea=(u=Ea)||r.memoizedState!==null,_o(a,i,r),Ea=u;break;default:_o(a,i,r)}}function PI(a,i){if(i.memoizedState===null&&(a=i.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{eu(a)}catch(r){vt(i,i.return,r)}}function Lv(a){switch(a.tag){case 13:case 19:var i=a.stateNode;return i===null&&(i=a.stateNode=new HI),i;case 22:return a=a.stateNode,i=a._retryCache,i===null&&(i=a._retryCache=new HI),i;default:throw Error(o(435,a.tag))}}function ym(a,i){var r=Lv(a);i.forEach(function(u){var E=Fv.bind(null,a,u);r.has(u)||(r.add(u),u.then(E,E))})}function Pn(a,i){var r=i.deletions;if(r!==null)for(var u=0;u<r.length;u++){var E=r[u],A=a,b=i,v=b;e:for(;v!==null;){switch(v.tag){case 27:if(tl(v.type)){Ft=v.stateNode,vn=!1;break e}break;case 5:Ft=v.stateNode,vn=!1;break e;case 3:case 4:Ft=v.stateNode.containerInfo,vn=!0;break e}v=v.return}if(Ft===null)throw Error(o(160));wI(A,b,E),Ft=null,vn=!1,A=E.alternate,A!==null&&(A.return=null),E.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)GI(i,a),i=i.sibling}var Ni=null;function GI(a,i){var r=a.alternate,u=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Pn(i,a),Gn(a),u&4&&(Wo(3,a,a.return),Uc(3,a),Wo(5,a,a.return));break;case 1:Pn(i,a),Gn(a),u&512&&(Ea||r===null||Fi(r,r.return)),u&64&&Io&&(a=a.updateQueue,a!==null&&(u=a.callbacks,u!==null&&(r=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=r===null?u:r.concat(u))));break;case 26:var E=Ni;if(Pn(i,a),Gn(a),u&512&&(Ea||r===null||Fi(r,r.return)),u&4){var A=r!==null?r.memoizedState:null;if(u=a.memoizedState,r===null)if(u===null)if(a.stateNode===null){e:{u=a.type,r=a.memoizedProps,E=E.ownerDocument||E;t:switch(u){case"title":A=E.getElementsByTagName("title")[0],(!A||A[sc]||A[nn]||A.namespaceURI==="http://www.w3.org/2000/svg"||A.hasAttribute("itemprop"))&&(A=E.createElement(u),E.head.insertBefore(A,E.querySelector("head > title"))),Xa(A,u,r),A[nn]=a,Ha(A),u=A;break e;case"link":var b=x_("link","href",E).get(u+(r.href||""));if(b){for(var v=0;v<b.length;v++)if(A=b[v],A.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&A.getAttribute("rel")===(r.rel==null?null:r.rel)&&A.getAttribute("title")===(r.title==null?null:r.title)&&A.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){b.splice(v,1);break t}}A=E.createElement(u),Xa(A,u,r),E.head.appendChild(A);break;case"meta":if(b=x_("meta","content",E).get(u+(r.content||""))){for(v=0;v<b.length;v++)if(A=b[v],A.getAttribute("content")===(r.content==null?null:""+r.content)&&A.getAttribute("name")===(r.name==null?null:r.name)&&A.getAttribute("property")===(r.property==null?null:r.property)&&A.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&A.getAttribute("charset")===(r.charSet==null?null:r.charSet)){b.splice(v,1);break t}}A=E.createElement(u),Xa(A,u,r),E.head.appendChild(A);break;default:throw Error(o(468,u))}A[nn]=a,Ha(A),u=A}a.stateNode=u}else H_(E,a.type,a.stateNode);else a.stateNode=L_(E,u,a.memoizedProps);else A!==u?(A===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):A.count--,u===null?H_(E,a.type,a.stateNode):L_(E,u,a.memoizedProps)):u===null&&a.stateNode!==null&&Cm(a,a.memoizedProps,r.memoizedProps)}break;case 27:Pn(i,a),Gn(a),u&512&&(Ea||r===null||Fi(r,r.return)),r!==null&&u&4&&Cm(a,a.memoizedProps,r.memoizedProps);break;case 5:if(Pn(i,a),Gn(a),u&512&&(Ea||r===null||Fi(r,r.return)),a.flags&32){E=a.stateNode;try{zs(E,"")}catch(de){vt(a,a.return,de)}}u&4&&a.stateNode!=null&&(E=a.memoizedProps,Cm(a,E,r!==null?r.memoizedProps:E)),u&1024&&(Dm=!0);break;case 6:if(Pn(i,a),Gn(a),u&4){if(a.stateNode===null)throw Error(o(162));u=a.memoizedProps,r=a.stateNode;try{r.nodeValue=u}catch(de){vt(a,a.return,de)}}break;case 3:if(zd=null,E=Ni,Ni=Fd(i.containerInfo),Pn(i,a),Ni=E,Gn(a),u&4&&r!==null&&r.memoizedState.isDehydrated)try{eu(i.containerInfo)}catch(de){vt(a,a.return,de)}Dm&&(Dm=!1,BI(a));break;case 4:u=Ni,Ni=Fd(a.stateNode.containerInfo),Pn(i,a),Gn(a),Ni=u;break;case 12:Pn(i,a),Gn(a);break;case 13:Pn(i,a),Gn(a),a.child.flags&8192&&a.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(km=De()),u&4&&(u=a.updateQueue,u!==null&&(a.updateQueue=null,ym(a,u)));break;case 22:E=a.memoizedState!==null;var F=r!==null&&r.memoizedState!==null,re=Io,Ae=Ea;if(Io=re||E,Ea=Ae||F,Pn(i,a),Ea=Ae,Io=re,Gn(a),u&8192)e:for(i=a.stateNode,i._visibility=E?i._visibility&-2:i._visibility|1,E&&(r===null||F||Io||Ea||Xl(a)),r=null,i=a;;){if(i.tag===5||i.tag===26){if(r===null){F=r=i;try{if(A=F.stateNode,E)b=A.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{v=F.stateNode;var Se=F.memoizedProps.style,ue=Se!=null&&Se.hasOwnProperty("display")?Se.display:null;v.style.display=ue==null||typeof ue=="boolean"?"":(""+ue).trim()}}catch(de){vt(F,F.return,de)}}}else if(i.tag===6){if(r===null){F=i;try{F.stateNode.nodeValue=E?"":F.memoizedProps}catch(de){vt(F,F.return,de)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===a)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;r===i&&(r=null),i=i.return}r===i&&(r=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=a.updateQueue,u!==null&&(r=u.retryQueue,r!==null&&(u.retryQueue=null,ym(a,r))));break;case 19:Pn(i,a),Gn(a),u&4&&(u=a.updateQueue,u!==null&&(a.updateQueue=null,ym(a,u)));break;case 30:break;case 21:break;default:Pn(i,a),Gn(a)}}function Gn(a){var i=a.flags;if(i&2){try{for(var r,u=a.return;u!==null;){if(LI(u)){r=u;break}u=u.return}if(r==null)throw Error(o(160));switch(r.tag){case 27:var E=r.stateNode,A=bm(a);Dd(a,A,E);break;case 5:var b=r.stateNode;r.flags&32&&(zs(b,""),r.flags&=-33);var v=bm(a);Dd(a,v,b);break;case 3:case 4:var F=r.stateNode.containerInfo,re=bm(a);Om(a,re,F);break;default:throw Error(o(161))}}catch(Ae){vt(a,a.return,Ae)}a.flags&=-3}i&4096&&(a.flags&=-4097)}function BI(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var i=a;BI(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),a=a.sibling}}function Xo(a,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)kI(a,i.alternate,i),i=i.sibling}function Xl(a){for(a=a.child;a!==null;){var i=a;switch(i.tag){case 0:case 11:case 14:case 15:Wo(4,i,i.return),Xl(i);break;case 1:Fi(i,i.return);var r=i.stateNode;typeof r.componentWillUnmount=="function"&&vI(i,i.return,r),Xl(i);break;case 27:Vc(i.stateNode);case 26:case 5:Fi(i,i.return),Xl(i);break;case 22:i.memoizedState===null&&Xl(i);break;case 30:Xl(i);break;default:Xl(i)}a=a.sibling}}function qo(a,i,r){for(r=r&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,E=a,A=i,b=A.flags;switch(A.tag){case 0:case 11:case 15:qo(E,A,r),Uc(4,A);break;case 1:if(qo(E,A,r),u=A,E=u.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(re){vt(u,u.return,re)}if(u=A,E=u.updateQueue,E!==null){var v=u.stateNode;try{var F=E.shared.hiddenCallbacks;if(F!==null)for(E.shared.hiddenCallbacks=null,E=0;E<F.length;E++)mg(F[E],v)}catch(re){vt(u,u.return,re)}}r&&b&64&&yI(A),wc(A,A.return);break;case 27:xI(A);case 26:case 5:qo(E,A,r),r&&u===null&&b&4&&MI(A),wc(A,A.return);break;case 12:qo(E,A,r);break;case 13:qo(E,A,r),r&&b&4&&PI(E,A);break;case 22:A.memoizedState===null&&qo(E,A,r),wc(A,A.return);break;case 30:break;default:qo(E,A,r)}i=i.sibling}}function vm(a,i){var r=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(r=a.memoizedState.cachePool.pool),a=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),a!==r&&(a!=null&&a.refCount++,r!=null&&_c(r))}function Mm(a,i){a=null,i.alternate!==null&&(a=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==a&&(i.refCount++,a!=null&&_c(a))}function ji(a,i,r,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)FI(a,i,r,u),i=i.sibling}function FI(a,i,r,u){var E=i.flags;switch(i.tag){case 0:case 11:case 15:ji(a,i,r,u),E&2048&&Uc(9,i);break;case 1:ji(a,i,r,u);break;case 3:ji(a,i,r,u),E&2048&&(a=null,i.alternate!==null&&(a=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==a&&(i.refCount++,a!=null&&_c(a)));break;case 12:if(E&2048){ji(a,i,r,u),a=i.stateNode;try{var A=i.memoizedProps,b=A.id,v=A.onPostCommit;typeof v=="function"&&v(b,i.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(F){vt(i,i.return,F)}}else ji(a,i,r,u);break;case 13:ji(a,i,r,u);break;case 23:break;case 22:A=i.stateNode,b=i.alternate,i.memoizedState!==null?A._visibility&2?ji(a,i,r,u):Pc(a,i):A._visibility&2?ji(a,i,r,u):(A._visibility|=2,rr(a,i,r,u,(i.subtreeFlags&10256)!==0)),E&2048&&vm(b,i);break;case 24:ji(a,i,r,u),E&2048&&Mm(i.alternate,i);break;default:ji(a,i,r,u)}}function rr(a,i,r,u,E){for(E=E&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var A=a,b=i,v=r,F=u,re=b.flags;switch(b.tag){case 0:case 11:case 15:rr(A,b,v,F,E),Uc(8,b);break;case 23:break;case 22:var Ae=b.stateNode;b.memoizedState!==null?Ae._visibility&2?rr(A,b,v,F,E):Pc(A,b):(Ae._visibility|=2,rr(A,b,v,F,E)),E&&re&2048&&vm(b.alternate,b);break;case 24:rr(A,b,v,F,E),E&&re&2048&&Mm(b.alternate,b);break;default:rr(A,b,v,F,E)}i=i.sibling}}function Pc(a,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var r=a,u=i,E=u.flags;switch(u.tag){case 22:Pc(r,u),E&2048&&vm(u.alternate,u);break;case 24:Pc(r,u),E&2048&&Mm(u.alternate,u);break;default:Pc(r,u)}i=i.sibling}}var Gc=8192;function cr(a){if(a.subtreeFlags&Gc)for(a=a.child;a!==null;)jI(a),a=a.sibling}function jI(a){switch(a.tag){case 26:cr(a),a.flags&Gc&&a.memoizedState!==null&&RM(Ni,a.memoizedState,a.memoizedProps);break;case 5:cr(a);break;case 3:case 4:var i=Ni;Ni=Fd(a.stateNode.containerInfo),cr(a),Ni=i;break;case 22:a.memoizedState===null&&(i=a.alternate,i!==null&&i.memoizedState!==null?(i=Gc,Gc=16777216,cr(a),Gc=i):cr(a));break;default:cr(a)}}function zI(a){var i=a.alternate;if(i!==null&&(a=i.child,a!==null)){i.child=null;do i=a.sibling,a.sibling=null,a=i;while(a!==null)}}function Bc(a){var i=a.deletions;if((a.flags&16)!==0){if(i!==null)for(var r=0;r<i.length;r++){var u=i[r];Ua=u,KI(u,a)}zI(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)YI(a),a=a.sibling}function YI(a){switch(a.tag){case 0:case 11:case 15:Bc(a),a.flags&2048&&Wo(9,a,a.return);break;case 3:Bc(a);break;case 12:Bc(a);break;case 22:var i=a.stateNode;a.memoizedState!==null&&i._visibility&2&&(a.return===null||a.return.tag!==13)?(i._visibility&=-3,yd(a)):Bc(a);break;default:Bc(a)}}function yd(a){var i=a.deletions;if((a.flags&16)!==0){if(i!==null)for(var r=0;r<i.length;r++){var u=i[r];Ua=u,KI(u,a)}zI(a)}for(a=a.child;a!==null;){switch(i=a,i.tag){case 0:case 11:case 15:Wo(8,i,i.return),yd(i);break;case 22:r=i.stateNode,r._visibility&2&&(r._visibility&=-3,yd(i));break;default:yd(i)}a=a.sibling}}function KI(a,i){for(;Ua!==null;){var r=Ua;switch(r.tag){case 0:case 11:case 15:Wo(8,r,i);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var u=r.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:_c(r.memoizedState.cache)}if(u=r.child,u!==null)u.return=r,Ua=u;else e:for(r=a;Ua!==null;){u=Ua;var E=u.sibling,A=u.return;if(UI(u),u===r){Ua=null;break e}if(E!==null){E.return=A,Ua=E;break e}Ua=A}}}var xv={getCacheForType:function(a){var i=on(Oa),r=i.data.get(a);return r===void 0&&(r=a(),i.data.set(a,r)),r}},Hv=typeof WeakMap=="function"?WeakMap:Map,It=0,Ht=null,at=null,ct=0,_t=0,Bn=null,Zo=!1,ur=!1,Lm=!1,po=0,ea=0,Qo=0,ql=0,xm=0,li=0,dr=0,Fc=null,Mn=null,Hm=!1,km=0,vd=1/0,Md=null,$o=null,Wa=0,Jo=null,hr=null,fr=0,Um=0,wm=null,VI=null,jc=0,Pm=null;function Fn(){if((It&2)!==0&&ct!==0)return ct&-ct;if(P.T!==null){var a=er;return a!==0?a:Km()}return rS()}function WI(){li===0&&(li=(ct&536870912)===0||Rt?Bu():536870912);var a=oi.current;return a!==null&&(a.flags|=32),li}function jn(a,i,r){(a===Ht&&(_t===2||_t===9)||a.cancelPendingCommit!==null)&&(Er(a,0),el(a,ct,li,!1)),xl(a,r),((It&2)===0||a!==Ht)&&(a===Ht&&((It&2)===0&&(ql|=r),ea===4&&el(a,ct,li,!1)),zi(a))}function XI(a,i,r){if((It&6)!==0)throw Error(o(327));var u=!r&&(i&124)===0&&(i&a.expiredLanes)===0||Ll(a,i),E=u?wv(a,i):Fm(a,i,!0),A=u;do{if(E===0){ur&&!u&&el(a,i,0,!1);break}else{if(r=a.current.alternate,A&&!kv(r)){E=Fm(a,i,!1),A=!1;continue}if(E===2){if(A=i,a.errorRecoveryDisabledLanes&A)var b=0;else b=a.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){i=b;e:{var v=a;E=Fc;var F=v.current.memoizedState.isDehydrated;if(F&&(Er(v,b).flags|=256),b=Fm(v,b,!1),b!==2){if(Lm&&!F){v.errorRecoveryDisabledLanes|=A,ql|=A,E=4;break e}A=Mn,Mn=E,A!==null&&(Mn===null?Mn=A:Mn.push.apply(Mn,A))}E=b}if(A=!1,E!==2)continue}}if(E===1){Er(a,0),el(a,i,0,!0);break}e:{switch(u=a,A=E,A){case 0:case 1:throw Error(o(345));case 4:if((i&4194048)!==i)break;case 6:el(u,i,li,!Zo);break e;case 2:Mn=null;break;case 3:case 5:break;default:throw Error(o(329))}if((i&62914560)===i&&(E=km+300-De(),10<E)){if(el(u,i,li,!Zo),xs(u,0,!0)!==0)break e;u.timeoutHandle=p_(qI.bind(null,u,r,Mn,Md,Hm,i,li,ql,dr,Zo,A,2,-0,0),E);break e}qI(u,r,Mn,Md,Hm,i,li,ql,dr,Zo,A,0,-0,0)}}break}while(!0);zi(a)}function qI(a,i,r,u,E,A,b,v,F,re,Ae,Se,ue,de){if(a.timeoutHandle=-1,Se=i.subtreeFlags,(Se&8192||(Se&16785408)===16785408)&&(qc={stylesheets:null,count:0,unsuspend:AM},jI(i),Se=TM(),Se!==null)){a.cancelPendingCommit=Se(a_.bind(null,a,i,A,r,u,E,b,v,F,Ae,1,ue,de)),el(a,A,b,!re);return}a_(a,i,A,r,u,E,b,v,F)}function kv(a){for(var i=a;;){var r=i.tag;if((r===0||r===11||r===15)&&i.flags&16384&&(r=i.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var u=0;u<r.length;u++){var E=r[u],A=E.getSnapshot;E=E.value;try{if(!Un(A(),E))return!1}catch{return!1}}if(r=i.child,i.subtreeFlags&16384&&r!==null)r.return=i,i=r;else{if(i===a)break;for(;i.sibling===null;){if(i.return===null||i.return===a)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function el(a,i,r,u){i&=~xm,i&=~ql,a.suspendedLanes|=i,a.pingedLanes&=~i,u&&(a.warmLanes|=i),u=a.expirationTimes;for(var E=i;0<E;){var A=31-Bt(E),b=1<<A;u[A]=-1,E&=~b}r!==0&&Fu(a,r,i)}function Ld(){return(It&6)===0?(zc(0),!1):!0}function Gm(){if(at!==null){if(_t===0)var a=at.return;else a=at,mo=zl=null,am(a),lr=null,xc=0,a=at;for(;a!==null;)DI(a.alternate,a),a=a.return;at=null}}function Er(a,i){var r=a.timeoutHandle;r!==-1&&(a.timeoutHandle=-1,Jv(r)),r=a.cancelPendingCommit,r!==null&&(a.cancelPendingCommit=null,r()),Gm(),Ht=a,at=r=ho(a.current,null),ct=i,_t=0,Bn=null,Zo=!1,ur=Ll(a,i),Lm=!1,dr=li=xm=ql=Qo=ea=0,Mn=Fc=null,Hm=!1,(i&8)!==0&&(i|=i&32);var u=a.entangledLanes;if(u!==0)for(a=a.entanglements,u&=i;0<u;){var E=31-Bt(u),A=1<<E;i|=a[E],u&=~A}return po=i,ed(),r}function ZI(a,i){Ze=null,P.H=Sd,i===Nc||i===cd?(i=fg(),_t=3):i===ug?(i=fg(),_t=4):_t=i===EI?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Bn=i,at===null&&(ea=1,Nd(a,ti(i,a.current)))}function QI(){var a=P.H;return P.H=Sd,a===null?Sd:a}function $I(){var a=P.A;return P.A=xv,a}function Bm(){ea=4,Zo||(ct&4194048)!==ct&&oi.current!==null||(ur=!0),(Qo&134217727)===0&&(ql&134217727)===0||Ht===null||el(Ht,ct,li,!1)}function Fm(a,i,r){var u=It;It|=2;var E=QI(),A=$I();(Ht!==a||ct!==i)&&(Md=null,Er(a,i)),i=!1;var b=ea;e:do try{if(_t!==0&&at!==null){var v=at,F=Bn;switch(_t){case 8:Gm(),b=6;break e;case 3:case 2:case 9:case 6:oi.current===null&&(i=!0);var re=_t;if(_t=0,Bn=null,mr(a,v,F,re),r&&ur){b=0;break e}break;default:re=_t,_t=0,Bn=null,mr(a,v,F,re)}}Uv(),b=ea;break}catch(Ae){ZI(a,Ae)}while(!0);return i&&a.shellSuspendCounter++,mo=zl=null,It=u,P.H=E,P.A=A,at===null&&(Ht=null,ct=0,ed()),b}function Uv(){for(;at!==null;)JI(at)}function wv(a,i){var r=It;It|=2;var u=QI(),E=$I();Ht!==a||ct!==i?(Md=null,vd=De()+500,Er(a,i)):ur=Ll(a,i);e:do try{if(_t!==0&&at!==null){i=at;var A=Bn;t:switch(_t){case 1:_t=0,Bn=null,mr(a,i,A,1);break;case 2:case 9:if(dg(A)){_t=0,Bn=null,e_(i);break}i=function(){_t!==2&&_t!==9||Ht!==a||(_t=7),zi(a)},A.then(i,i);break e;case 3:_t=7;break e;case 4:_t=5;break e;case 7:dg(A)?(_t=0,Bn=null,e_(i)):(_t=0,Bn=null,mr(a,i,A,7));break;case 5:var b=null;switch(at.tag){case 26:b=at.memoizedState;case 5:case 27:var v=at;if(!b||k_(b)){_t=0,Bn=null;var F=v.sibling;if(F!==null)at=F;else{var re=v.return;re!==null?(at=re,xd(re)):at=null}break t}}_t=0,Bn=null,mr(a,i,A,5);break;case 6:_t=0,Bn=null,mr(a,i,A,6);break;case 8:Gm(),ea=6;break e;default:throw Error(o(462))}}Pv();break}catch(Ae){ZI(a,Ae)}while(!0);return mo=zl=null,P.H=u,P.A=E,It=r,at!==null?0:(Ht=null,ct=0,ed(),ea)}function Pv(){for(;at!==null&&!ge();)JI(at)}function JI(a){var i=bI(a.alternate,a,po);a.memoizedProps=a.pendingProps,i===null?xd(a):at=i}function e_(a){var i=a,r=i.alternate;switch(i.tag){case 15:case 0:i=gI(r,i,i.pendingProps,i.type,void 0,ct);break;case 11:i=gI(r,i,i.pendingProps,i.type.render,i.ref,ct);break;case 5:am(i);default:DI(r,i),i=at=tg(i,po),i=bI(r,i,po)}a.memoizedProps=a.pendingProps,i===null?xd(a):at=i}function mr(a,i,r,u){mo=zl=null,am(i),lr=null,xc=0;var E=i.return;try{if(Ov(a,E,i,r,ct)){ea=1,Nd(a,ti(r,a.current)),at=null;return}}catch(A){if(E!==null)throw at=E,A;ea=1,Nd(a,ti(r,a.current)),at=null;return}i.flags&32768?(Rt||u===1?a=!0:ur||(ct&536870912)!==0?a=!1:(Zo=a=!0,(u===2||u===9||u===3||u===6)&&(u=oi.current,u!==null&&u.tag===13&&(u.flags|=16384))),t_(i,a)):xd(i)}function xd(a){var i=a;do{if((i.flags&32768)!==0){t_(i,Zo);return}a=i.return;var r=yv(i.alternate,i,po);if(r!==null){at=r;return}if(i=i.sibling,i!==null){at=i;return}at=i=a}while(i!==null);ea===0&&(ea=5)}function t_(a,i){do{var r=vv(a.alternate,a);if(r!==null){r.flags&=32767,at=r;return}if(r=a.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!i&&(a=a.sibling,a!==null)){at=a;return}at=a=r}while(a!==null);ea=6,at=null}function a_(a,i,r,u,E,A,b,v,F){a.cancelPendingCommit=null;do Hd();while(Wa!==0);if((It&6)!==0)throw Error(o(327));if(i!==null){if(i===a.current)throw Error(o(177));if(A=i.lanes|i.childLanes,A|=ME,iE(a,r,A,b,v,F),a===Ht&&(at=Ht=null,ct=0),hr=i,Jo=a,fr=r,Um=A,wm=E,VI=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,jv(bn,function(){return s_(),null})):(a.callbackNode=null,a.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=P.T,P.T=null,E=K.p,K.p=2,b=It,It|=4;try{Mv(a,i,r)}finally{It=b,K.p=E,P.T=u}}Wa=1,n_(),i_(),o_()}}function n_(){if(Wa===1){Wa=0;var a=Jo,i=hr,r=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||r){r=P.T,P.T=null;var u=K.p;K.p=2;var E=It;It|=4;try{GI(i,a);var A=Jm,b=KS(a.containerInfo),v=A.focusedElem,F=A.selectionRange;if(b!==v&&v&&v.ownerDocument&&YS(v.ownerDocument.documentElement,v)){if(F!==null&&bE(v)){var re=F.start,Ae=F.end;if(Ae===void 0&&(Ae=re),"selectionStart"in v)v.selectionStart=re,v.selectionEnd=Math.min(Ae,v.value.length);else{var Se=v.ownerDocument||document,ue=Se&&Se.defaultView||window;if(ue.getSelection){var de=ue.getSelection(),Fe=v.textContent.length,we=Math.min(F.start,Fe),Ot=F.end===void 0?we:Math.min(F.end,Fe);!de.extend&&we>Ot&&(b=Ot,Ot=we,we=b);var te=zS(v,we),q=zS(v,Ot);if(te&&q&&(de.rangeCount!==1||de.anchorNode!==te.node||de.anchorOffset!==te.offset||de.focusNode!==q.node||de.focusOffset!==q.offset)){var le=Se.createRange();le.setStart(te.node,te.offset),de.removeAllRanges(),we>Ot?(de.addRange(le),de.extend(q.node,q.offset)):(le.setEnd(q.node,q.offset),de.addRange(le))}}}}for(Se=[],de=v;de=de.parentNode;)de.nodeType===1&&Se.push({element:de,left:de.scrollLeft,top:de.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<Se.length;v++){var Te=Se[v];Te.element.scrollLeft=Te.left,Te.element.scrollTop=Te.top}}Vd=!!$m,Jm=$m=null}finally{It=E,K.p=u,P.T=r}}a.current=i,Wa=2}}function i_(){if(Wa===2){Wa=0;var a=Jo,i=hr,r=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||r){r=P.T,P.T=null;var u=K.p;K.p=2;var E=It;It|=4;try{kI(a,i.alternate,i)}finally{It=E,K.p=u,P.T=r}}Wa=3}}function o_(){if(Wa===4||Wa===3){Wa=0,_e();var a=Jo,i=hr,r=fr,u=VI;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Wa=5:(Wa=0,hr=Jo=null,l_(a,a.pendingLanes));var E=a.pendingLanes;if(E===0&&($o=null),oE(r),i=i.stateNode,rt&&typeof rt.onCommitFiberRoot=="function")try{rt.onCommitFiberRoot(wo,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=P.T,E=K.p,K.p=2,P.T=null;try{for(var A=a.onRecoverableError,b=0;b<u.length;b++){var v=u[b];A(v.value,{componentStack:v.stack})}}finally{P.T=i,K.p=E}}(fr&3)!==0&&Hd(),zi(a),E=a.pendingLanes,(r&4194090)!==0&&(E&42)!==0?a===Pm?jc++:(jc=0,Pm=a):jc=0,zc(0)}}function l_(a,i){(a.pooledCacheLanes&=i)===0&&(i=a.pooledCache,i!=null&&(a.pooledCache=null,_c(i)))}function Hd(a){return n_(),i_(),o_(),s_()}function s_(){if(Wa!==5)return!1;var a=Jo,i=Um;Um=0;var r=oE(fr),u=P.T,E=K.p;try{K.p=32>r?32:r,P.T=null,r=wm,wm=null;var A=Jo,b=fr;if(Wa=0,hr=Jo=null,fr=0,(It&6)!==0)throw Error(o(331));var v=It;if(It|=4,YI(A.current),FI(A,A.current,b,r),It=v,zc(0,!1),rt&&typeof rt.onPostCommitFiberRoot=="function")try{rt.onPostCommitFiberRoot(wo,A)}catch{}return!0}finally{K.p=E,P.T=u,l_(a,i)}}function r_(a,i,r){i=ti(r,i),i=Am(a.stateNode,i,2),a=zo(a,i,2),a!==null&&(xl(a,2),zi(a))}function vt(a,i,r){if(a.tag===3)r_(a,a,r);else for(;i!==null;){if(i.tag===3){r_(i,a,r);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&($o===null||!$o.has(u))){a=ti(r,a),r=hI(2),u=zo(i,r,2),u!==null&&(fI(r,u,i,a),xl(u,2),zi(u));break}}i=i.return}}function jm(a,i,r){var u=a.pingCache;if(u===null){u=a.pingCache=new Hv;var E=new Set;u.set(i,E)}else E=u.get(i),E===void 0&&(E=new Set,u.set(i,E));E.has(r)||(Lm=!0,E.add(r),a=Gv.bind(null,a,i,r),i.then(a,a))}function Gv(a,i,r){var u=a.pingCache;u!==null&&u.delete(i),a.pingedLanes|=a.suspendedLanes&r,a.warmLanes&=~r,Ht===a&&(ct&r)===r&&(ea===4||ea===3&&(ct&62914560)===ct&&300>De()-km?(It&2)===0&&Er(a,0):xm|=r,dr===ct&&(dr=0)),zi(a)}function c_(a,i){i===0&&(i=Hs()),a=Zs(a,i),a!==null&&(xl(a,i),zi(a))}function Bv(a){var i=a.memoizedState,r=0;i!==null&&(r=i.retryLane),c_(a,r)}function Fv(a,i){var r=0;switch(a.tag){case 13:var u=a.stateNode,E=a.memoizedState;E!==null&&(r=E.retryLane);break;case 19:u=a.stateNode;break;case 22:u=a.stateNode._retryCache;break;default:throw Error(o(314))}u!==null&&u.delete(i),c_(a,r)}function jv(a,i){return me(a,i)}var kd=null,Ar=null,zm=!1,Ud=!1,Ym=!1,Zl=0;function zi(a){a!==Ar&&a.next===null&&(Ar===null?kd=Ar=a:Ar=Ar.next=a),Ud=!0,zm||(zm=!0,Yv())}function zc(a,i){if(!Ym&&Ud){Ym=!0;do for(var r=!1,u=kd;u!==null;){if(a!==0){var E=u.pendingLanes;if(E===0)var A=0;else{var b=u.suspendedLanes,v=u.pingedLanes;A=(1<<31-Bt(42|a)+1)-1,A&=E&~(b&~v),A=A&201326741?A&201326741|1:A?A|2:0}A!==0&&(r=!0,f_(u,A))}else A=ct,A=xs(u,u===Ht?A:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(A&3)===0||Ll(u,A)||(r=!0,f_(u,A));u=u.next}while(r);Ym=!1}}function zv(){u_()}function u_(){Ud=zm=!1;var a=0;Zl!==0&&($v()&&(a=Zl),Zl=0);for(var i=De(),r=null,u=kd;u!==null;){var E=u.next,A=d_(u,i);A===0?(u.next=null,r===null?kd=E:r.next=E,E===null&&(Ar=r)):(r=u,(a!==0||(A&3)!==0)&&(Ud=!0)),u=E}zc(a)}function d_(a,i){for(var r=a.suspendedLanes,u=a.pingedLanes,E=a.expirationTimes,A=a.pendingLanes&-62914561;0<A;){var b=31-Bt(A),v=1<<b,F=E[b];F===-1?((v&r)===0||(v&u)!==0)&&(E[b]=nE(v,i)):F<=i&&(a.expiredLanes|=v),A&=~v}if(i=Ht,r=ct,r=xs(a,a===i?r:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),u=a.callbackNode,r===0||a===i&&(_t===2||_t===9)||a.cancelPendingCommit!==null)return u!==null&&u!==null&&Ce(u),a.callbackNode=null,a.callbackPriority=0;if((r&3)===0||Ll(a,r)){if(i=r&-r,i===a.callbackPriority)return i;switch(u!==null&&Ce(u),oE(r)){case 2:case 8:r=Cn;break;case 32:r=bn;break;case 268435456:r=ro;break;default:r=bn}return u=h_.bind(null,a),r=me(r,u),a.callbackPriority=i,a.callbackNode=r,i}return u!==null&&u!==null&&Ce(u),a.callbackPriority=2,a.callbackNode=null,2}function h_(a,i){if(Wa!==0&&Wa!==5)return a.callbackNode=null,a.callbackPriority=0,null;var r=a.callbackNode;if(Hd()&&a.callbackNode!==r)return null;var u=ct;return u=xs(a,a===Ht?u:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),u===0?null:(XI(a,u,i),d_(a,De()),a.callbackNode!=null&&a.callbackNode===r?h_.bind(null,a):null)}function f_(a,i){if(Hd())return null;XI(a,i,!0)}function Yv(){eM(function(){(It&6)!==0?me($t,zv):u_()})}function Km(){return Zl===0&&(Zl=Bu()),Zl}function E_(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:Wu(""+a)}function m_(a,i){var r=i.ownerDocument.createElement("input");return r.name=i.name,r.value=i.value,a.id&&r.setAttribute("form",a.id),i.parentNode.insertBefore(r,i),a=new FormData(a),r.parentNode.removeChild(r),a}function Kv(a,i,r,u,E){if(i==="submit"&&r&&r.stateNode===E){var A=E_((E[On]||null).action),b=u.submitter;b&&(i=(i=b[On]||null)?E_(i.formAction):b.getAttribute("formAction"),i!==null&&(A=i,b=null));var v=new Qu("action","action",null,u,E);a.push({event:v,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Zl!==0){var F=b?m_(E,b):new FormData(E);dm(r,{pending:!0,data:F,method:E.method,action:A},null,F)}}else typeof A=="function"&&(v.preventDefault(),F=b?m_(E,b):new FormData(E),dm(r,{pending:!0,data:F,method:E.method,action:A},A,F))},currentTarget:E}]})}}for(var Vm=0;Vm<vE.length;Vm++){var Wm=vE[Vm],Vv=Wm.toLowerCase(),Wv=Wm[0].toUpperCase()+Wm.slice(1);pi(Vv,"on"+Wv)}pi(XS,"onAnimationEnd"),pi(qS,"onAnimationIteration"),pi(ZS,"onAnimationStart"),pi("dblclick","onDoubleClick"),pi("focusin","onFocus"),pi("focusout","onBlur"),pi(uv,"onTransitionRun"),pi(dv,"onTransitionStart"),pi(hv,"onTransitionCancel"),pi(QS,"onTransitionEnd"),Bs("onMouseEnter",["mouseout","mouseover"]),Bs("onMouseLeave",["mouseout","mouseover"]),Bs("onPointerEnter",["pointerout","pointerover"]),Bs("onPointerLeave",["pointerout","pointerover"]),Hl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Hl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Hl("onBeforeInput",["compositionend","keypress","textInput","paste"]),Hl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Hl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Hl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xv=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Yc));function A_(a,i){i=(i&4)!==0;for(var r=0;r<a.length;r++){var u=a[r],E=u.event;u=u.listeners;e:{var A=void 0;if(i)for(var b=u.length-1;0<=b;b--){var v=u[b],F=v.instance,re=v.currentTarget;if(v=v.listener,F!==A&&E.isPropagationStopped())break e;A=v,E.currentTarget=re;try{A(E)}catch(Ae){pd(Ae)}E.currentTarget=null,A=F}else for(b=0;b<u.length;b++){if(v=u[b],F=v.instance,re=v.currentTarget,v=v.listener,F!==A&&E.isPropagationStopped())break e;A=v,E.currentTarget=re;try{A(E)}catch(Ae){pd(Ae)}E.currentTarget=null,A=F}}}}function nt(a,i){var r=i[lE];r===void 0&&(r=i[lE]=new Set);var u=a+"__bubble";r.has(u)||(R_(i,a,2,!1),r.add(u))}function Xm(a,i,r){var u=0;i&&(u|=4),R_(r,a,u,i)}var wd="_reactListening"+Math.random().toString(36).slice(2);function qm(a){if(!a[wd]){a[wd]=!0,uS.forEach(function(r){r!=="selectionchange"&&(Xv.has(r)||Xm(r,!1,a),Xm(r,!0,a))});var i=a.nodeType===9?a:a.ownerDocument;i===null||i[wd]||(i[wd]=!0,Xm("selectionchange",!1,i))}}function R_(a,i,r,u){switch(F_(i)){case 2:var E=IM;break;case 8:E=_M;break;default:E=cA}r=E.bind(null,i,r,a),E=void 0,!RE||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(E=!0),u?E!==void 0?a.addEventListener(i,r,{capture:!0,passive:E}):a.addEventListener(i,r,!0):E!==void 0?a.addEventListener(i,r,{passive:E}):a.addEventListener(i,r,!1)}function Zm(a,i,r,u,E){var A=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var b=u.tag;if(b===3||b===4){var v=u.stateNode.containerInfo;if(v===E)break;if(b===4)for(b=u.return;b!==null;){var F=b.tag;if((F===3||F===4)&&b.stateNode.containerInfo===E)return;b=b.return}for(;v!==null;){if(b=ws(v),b===null)return;if(F=b.tag,F===5||F===6||F===26||F===27){u=A=b;continue e}v=v.parentNode}}u=u.return}NS(function(){var re=A,Ae=mE(r),Se=[];e:{var ue=$S.get(a);if(ue!==void 0){var de=Qu,Fe=a;switch(a){case"keypress":if(qu(r)===0)break e;case"keydown":case"keyup":de=jy;break;case"focusin":Fe="focus",de=IE;break;case"focusout":Fe="blur",de=IE;break;case"beforeblur":case"afterblur":de=IE;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":de=OS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":de=vy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":de=Ky;break;case XS:case qS:case ZS:de=xy;break;case QS:de=Wy;break;case"scroll":case"scrollend":de=Dy;break;case"wheel":de=qy;break;case"copy":case"cut":case"paste":de=ky;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":de=yS;break;case"toggle":case"beforetoggle":de=Qy}var we=(i&4)!==0,Ot=!we&&(a==="scroll"||a==="scrollend"),te=we?ue!==null?ue+"Capture":null:ue;we=[];for(var q=re,le;q!==null;){var Te=q;if(le=Te.stateNode,Te=Te.tag,Te!==5&&Te!==26&&Te!==27||le===null||te===null||(Te=cc(q,te),Te!=null&&we.push(Kc(q,Te,le))),Ot)break;q=q.return}0<we.length&&(ue=new de(ue,Fe,null,r,Ae),Se.push({event:ue,listeners:we}))}}if((i&7)===0){e:{if(ue=a==="mouseover"||a==="pointerover",de=a==="mouseout"||a==="pointerout",ue&&r!==EE&&(Fe=r.relatedTarget||r.fromElement)&&(ws(Fe)||Fe[Us]))break e;if((de||ue)&&(ue=Ae.window===Ae?Ae:(ue=Ae.ownerDocument)?ue.defaultView||ue.parentWindow:window,de?(Fe=r.relatedTarget||r.toElement,de=re,Fe=Fe?ws(Fe):null,Fe!==null&&(Ot=c(Fe),we=Fe.tag,Fe!==Ot||we!==5&&we!==27&&we!==6)&&(Fe=null)):(de=null,Fe=re),de!==Fe)){if(we=OS,Te="onMouseLeave",te="onMouseEnter",q="mouse",(a==="pointerout"||a==="pointerover")&&(we=yS,Te="onPointerLeave",te="onPointerEnter",q="pointer"),Ot=de==null?ue:rc(de),le=Fe==null?ue:rc(Fe),ue=new we(Te,q+"leave",de,r,Ae),ue.target=Ot,ue.relatedTarget=le,Te=null,ws(Ae)===re&&(we=new we(te,q+"enter",Fe,r,Ae),we.target=le,we.relatedTarget=Ot,Te=we),Ot=Te,de&&Fe)t:{for(we=de,te=Fe,q=0,le=we;le;le=Rr(le))q++;for(le=0,Te=te;Te;Te=Rr(Te))le++;for(;0<q-le;)we=Rr(we),q--;for(;0<le-q;)te=Rr(te),le--;for(;q--;){if(we===te||te!==null&&we===te.alternate)break t;we=Rr(we),te=Rr(te)}we=null}else we=null;de!==null&&T_(Se,ue,de,we,!1),Fe!==null&&Ot!==null&&T_(Se,Ot,Fe,we,!0)}}e:{if(ue=re?rc(re):window,de=ue.nodeName&&ue.nodeName.toLowerCase(),de==="select"||de==="input"&&ue.type==="file")var ye=wS;else if(kS(ue))if(PS)ye=sv;else{ye=ov;var Qe=iv}else de=ue.nodeName,!de||de.toLowerCase()!=="input"||ue.type!=="checkbox"&&ue.type!=="radio"?re&&fE(re.elementType)&&(ye=wS):ye=lv;if(ye&&(ye=ye(a,re))){US(Se,ye,r,Ae);break e}Qe&&Qe(a,ue,re),a==="focusout"&&re&&ue.type==="number"&&re.memoizedProps.value!=null&&hE(ue,"number",ue.value)}switch(Qe=re?rc(re):window,a){case"focusin":(kS(Qe)||Qe.contentEditable==="true")&&(Ws=Qe,OE=re,Rc=null);break;case"focusout":Rc=OE=Ws=null;break;case"mousedown":DE=!0;break;case"contextmenu":case"mouseup":case"dragend":DE=!1,VS(Se,r,Ae);break;case"selectionchange":if(cv)break;case"keydown":case"keyup":VS(Se,r,Ae)}var xe;if(pE)e:{switch(a){case"compositionstart":var Ge="onCompositionStart";break e;case"compositionend":Ge="onCompositionEnd";break e;case"compositionupdate":Ge="onCompositionUpdate";break e}Ge=void 0}else Vs?xS(a,r)&&(Ge="onCompositionEnd"):a==="keydown"&&r.keyCode===229&&(Ge="onCompositionStart");Ge&&(vS&&r.locale!=="ko"&&(Vs||Ge!=="onCompositionStart"?Ge==="onCompositionEnd"&&Vs&&(xe=CS()):(Go=Ae,TE="value"in Go?Go.value:Go.textContent,Vs=!0)),Qe=Pd(re,Ge),0<Qe.length&&(Ge=new DS(Ge,a,null,r,Ae),Se.push({event:Ge,listeners:Qe}),xe?Ge.data=xe:(xe=HS(r),xe!==null&&(Ge.data=xe)))),(xe=Jy?ev(a,r):tv(a,r))&&(Ge=Pd(re,"onBeforeInput"),0<Ge.length&&(Qe=new DS("onBeforeInput","beforeinput",null,r,Ae),Se.push({event:Qe,listeners:Ge}),Qe.data=xe)),Kv(Se,a,re,r,Ae)}A_(Se,i)})}function Kc(a,i,r){return{instance:a,listener:i,currentTarget:r}}function Pd(a,i){for(var r=i+"Capture",u=[];a!==null;){var E=a,A=E.stateNode;if(E=E.tag,E!==5&&E!==26&&E!==27||A===null||(E=cc(a,r),E!=null&&u.unshift(Kc(a,E,A)),E=cc(a,i),E!=null&&u.push(Kc(a,E,A))),a.tag===3)return u;a=a.return}return[]}function Rr(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function T_(a,i,r,u,E){for(var A=i._reactName,b=[];r!==null&&r!==u;){var v=r,F=v.alternate,re=v.stateNode;if(v=v.tag,F!==null&&F===u)break;v!==5&&v!==26&&v!==27||re===null||(F=re,E?(re=cc(r,A),re!=null&&b.unshift(Kc(r,re,F))):E||(re=cc(r,A),re!=null&&b.push(Kc(r,re,F)))),r=r.return}b.length!==0&&a.push({event:i,listeners:b})}var qv=/\r\n?/g,Zv=/\u0000|\uFFFD/g;function S_(a){return(typeof a=="string"?a:""+a).replace(qv,`
`).replace(Zv,"")}function g_(a,i){return i=S_(i),S_(a)===i}function Gd(){}function bt(a,i,r,u,E,A){switch(r){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||zs(a,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&zs(a,""+u);break;case"className":Yu(a,"class",u);break;case"tabIndex":Yu(a,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Yu(a,r,u);break;case"style":_S(a,u,A);break;case"data":if(i!=="object"){Yu(a,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||r!=="href")){a.removeAttribute(r);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){a.removeAttribute(r);break}u=Wu(""+u),a.setAttribute(r,u);break;case"action":case"formAction":if(typeof u=="function"){a.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof A=="function"&&(r==="formAction"?(i!=="input"&&bt(a,i,"name",E.name,E,null),bt(a,i,"formEncType",E.formEncType,E,null),bt(a,i,"formMethod",E.formMethod,E,null),bt(a,i,"formTarget",E.formTarget,E,null)):(bt(a,i,"encType",E.encType,E,null),bt(a,i,"method",E.method,E,null),bt(a,i,"target",E.target,E,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){a.removeAttribute(r);break}u=Wu(""+u),a.setAttribute(r,u);break;case"onClick":u!=null&&(a.onclick=Gd);break;case"onScroll":u!=null&&nt("scroll",a);break;case"onScrollEnd":u!=null&&nt("scrollend",a);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(o(61));if(r=u.__html,r!=null){if(E.children!=null)throw Error(o(60));a.innerHTML=r}}break;case"multiple":a.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":a.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){a.removeAttribute("xlink:href");break}r=Wu(""+u),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?a.setAttribute(r,""+u):a.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?a.setAttribute(r,""):a.removeAttribute(r);break;case"capture":case"download":u===!0?a.setAttribute(r,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?a.setAttribute(r,u):a.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?a.setAttribute(r,u):a.removeAttribute(r);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?a.removeAttribute(r):a.setAttribute(r,u);break;case"popover":nt("beforetoggle",a),nt("toggle",a),zu(a,"popover",u);break;case"xlinkActuate":co(a,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":co(a,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":co(a,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":co(a,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":co(a,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":co(a,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":co(a,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":co(a,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":co(a,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":zu(a,"is",u);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=by.get(r)||r,zu(a,r,u))}}function Qm(a,i,r,u,E,A){switch(r){case"style":_S(a,u,A);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(o(61));if(r=u.__html,r!=null){if(E.children!=null)throw Error(o(60));a.innerHTML=r}}break;case"children":typeof u=="string"?zs(a,u):(typeof u=="number"||typeof u=="bigint")&&zs(a,""+u);break;case"onScroll":u!=null&&nt("scroll",a);break;case"onScrollEnd":u!=null&&nt("scrollend",a);break;case"onClick":u!=null&&(a.onclick=Gd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!dS.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(E=r.endsWith("Capture"),i=r.slice(2,E?r.length-7:void 0),A=a[On]||null,A=A!=null?A[r]:null,typeof A=="function"&&a.removeEventListener(i,A,E),typeof u=="function")){typeof A!="function"&&A!==null&&(r in a?a[r]=null:a.hasAttribute(r)&&a.removeAttribute(r)),a.addEventListener(i,u,E);break e}r in a?a[r]=u:u===!0?a.setAttribute(r,""):zu(a,r,u)}}}function Xa(a,i,r){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":nt("error",a),nt("load",a);var u=!1,E=!1,A;for(A in r)if(r.hasOwnProperty(A)){var b=r[A];if(b!=null)switch(A){case"src":u=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,i));default:bt(a,i,A,b,r,null)}}E&&bt(a,i,"srcSet",r.srcSet,r,null),u&&bt(a,i,"src",r.src,r,null);return;case"input":nt("invalid",a);var v=A=b=E=null,F=null,re=null;for(u in r)if(r.hasOwnProperty(u)){var Ae=r[u];if(Ae!=null)switch(u){case"name":E=Ae;break;case"type":b=Ae;break;case"checked":F=Ae;break;case"defaultChecked":re=Ae;break;case"value":A=Ae;break;case"defaultValue":v=Ae;break;case"children":case"dangerouslySetInnerHTML":if(Ae!=null)throw Error(o(137,i));break;default:bt(a,i,u,Ae,r,null)}}TS(a,A,v,F,re,b,E,!1),Ku(a);return;case"select":nt("invalid",a),u=b=A=null;for(E in r)if(r.hasOwnProperty(E)&&(v=r[E],v!=null))switch(E){case"value":A=v;break;case"defaultValue":b=v;break;case"multiple":u=v;default:bt(a,i,E,v,r,null)}i=A,r=b,a.multiple=!!u,i!=null?js(a,!!u,i,!1):r!=null&&js(a,!!u,r,!0);return;case"textarea":nt("invalid",a),A=E=u=null;for(b in r)if(r.hasOwnProperty(b)&&(v=r[b],v!=null))switch(b){case"value":u=v;break;case"defaultValue":E=v;break;case"children":A=v;break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(o(91));break;default:bt(a,i,b,v,r,null)}gS(a,u,E,A),Ku(a);return;case"option":for(F in r)if(r.hasOwnProperty(F)&&(u=r[F],u!=null))switch(F){case"selected":a.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:bt(a,i,F,u,r,null)}return;case"dialog":nt("beforetoggle",a),nt("toggle",a),nt("cancel",a),nt("close",a);break;case"iframe":case"object":nt("load",a);break;case"video":case"audio":for(u=0;u<Yc.length;u++)nt(Yc[u],a);break;case"image":nt("error",a),nt("load",a);break;case"details":nt("toggle",a);break;case"embed":case"source":case"link":nt("error",a),nt("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(re in r)if(r.hasOwnProperty(re)&&(u=r[re],u!=null))switch(re){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,i));default:bt(a,i,re,u,r,null)}return;default:if(fE(i)){for(Ae in r)r.hasOwnProperty(Ae)&&(u=r[Ae],u!==void 0&&Qm(a,i,Ae,u,r,void 0));return}}for(v in r)r.hasOwnProperty(v)&&(u=r[v],u!=null&&bt(a,i,v,u,r,null))}function Qv(a,i,r,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,A=null,b=null,v=null,F=null,re=null,Ae=null;for(de in r){var Se=r[de];if(r.hasOwnProperty(de)&&Se!=null)switch(de){case"checked":break;case"value":break;case"defaultValue":F=Se;default:u.hasOwnProperty(de)||bt(a,i,de,null,u,Se)}}for(var ue in u){var de=u[ue];if(Se=r[ue],u.hasOwnProperty(ue)&&(de!=null||Se!=null))switch(ue){case"type":A=de;break;case"name":E=de;break;case"checked":re=de;break;case"defaultChecked":Ae=de;break;case"value":b=de;break;case"defaultValue":v=de;break;case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(o(137,i));break;default:de!==Se&&bt(a,i,ue,de,u,Se)}}dE(a,b,v,F,re,Ae,A,E);return;case"select":de=b=v=ue=null;for(A in r)if(F=r[A],r.hasOwnProperty(A)&&F!=null)switch(A){case"value":break;case"multiple":de=F;default:u.hasOwnProperty(A)||bt(a,i,A,null,u,F)}for(E in u)if(A=u[E],F=r[E],u.hasOwnProperty(E)&&(A!=null||F!=null))switch(E){case"value":ue=A;break;case"defaultValue":v=A;break;case"multiple":b=A;default:A!==F&&bt(a,i,E,A,u,F)}i=v,r=b,u=de,ue!=null?js(a,!!r,ue,!1):!!u!=!!r&&(i!=null?js(a,!!r,i,!0):js(a,!!r,r?[]:"",!1));return;case"textarea":de=ue=null;for(v in r)if(E=r[v],r.hasOwnProperty(v)&&E!=null&&!u.hasOwnProperty(v))switch(v){case"value":break;case"children":break;default:bt(a,i,v,null,u,E)}for(b in u)if(E=u[b],A=r[b],u.hasOwnProperty(b)&&(E!=null||A!=null))switch(b){case"value":ue=E;break;case"defaultValue":de=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(o(91));break;default:E!==A&&bt(a,i,b,E,u,A)}SS(a,ue,de);return;case"option":for(var Fe in r)if(ue=r[Fe],r.hasOwnProperty(Fe)&&ue!=null&&!u.hasOwnProperty(Fe))switch(Fe){case"selected":a.selected=!1;break;default:bt(a,i,Fe,null,u,ue)}for(F in u)if(ue=u[F],de=r[F],u.hasOwnProperty(F)&&ue!==de&&(ue!=null||de!=null))switch(F){case"selected":a.selected=ue&&typeof ue!="function"&&typeof ue!="symbol";break;default:bt(a,i,F,ue,u,de)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var we in r)ue=r[we],r.hasOwnProperty(we)&&ue!=null&&!u.hasOwnProperty(we)&&bt(a,i,we,null,u,ue);for(re in u)if(ue=u[re],de=r[re],u.hasOwnProperty(re)&&ue!==de&&(ue!=null||de!=null))switch(re){case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(o(137,i));break;default:bt(a,i,re,ue,u,de)}return;default:if(fE(i)){for(var Ot in r)ue=r[Ot],r.hasOwnProperty(Ot)&&ue!==void 0&&!u.hasOwnProperty(Ot)&&Qm(a,i,Ot,void 0,u,ue);for(Ae in u)ue=u[Ae],de=r[Ae],!u.hasOwnProperty(Ae)||ue===de||ue===void 0&&de===void 0||Qm(a,i,Ae,ue,u,de);return}}for(var te in r)ue=r[te],r.hasOwnProperty(te)&&ue!=null&&!u.hasOwnProperty(te)&&bt(a,i,te,null,u,ue);for(Se in u)ue=u[Se],de=r[Se],!u.hasOwnProperty(Se)||ue===de||ue==null&&de==null||bt(a,i,Se,ue,u,de)}var $m=null,Jm=null;function Bd(a){return a.nodeType===9?a:a.ownerDocument}function I_(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function __(a,i){if(a===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&i==="foreignObject"?0:a}function eA(a,i){return a==="textarea"||a==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var tA=null;function $v(){var a=window.event;return a&&a.type==="popstate"?a===tA?!1:(tA=a,!0):(tA=null,!1)}var p_=typeof setTimeout=="function"?setTimeout:void 0,Jv=typeof clearTimeout=="function"?clearTimeout:void 0,N_=typeof Promise=="function"?Promise:void 0,eM=typeof queueMicrotask=="function"?queueMicrotask:typeof N_<"u"?function(a){return N_.resolve(null).then(a).catch(tM)}:p_;function tM(a){setTimeout(function(){throw a})}function tl(a){return a==="head"}function C_(a,i){var r=i,u=0,E=0;do{var A=r.nextSibling;if(a.removeChild(r),A&&A.nodeType===8)if(r=A.data,r==="/$"){if(0<u&&8>u){r=u;var b=a.ownerDocument;if(r&1&&Vc(b.documentElement),r&2&&Vc(b.body),r&4)for(r=b.head,Vc(r),b=r.firstChild;b;){var v=b.nextSibling,F=b.nodeName;b[sc]||F==="SCRIPT"||F==="STYLE"||F==="LINK"&&b.rel.toLowerCase()==="stylesheet"||r.removeChild(b),b=v}}if(E===0){a.removeChild(A),eu(i);return}E--}else r==="$"||r==="$?"||r==="$!"?E++:u=r.charCodeAt(0)-48;else u=0;r=A}while(r);eu(i)}function aA(a){var i=a.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var r=i;switch(i=i.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":aA(r),sE(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}a.removeChild(r)}}function aM(a,i,r,u){for(;a.nodeType===1;){var E=r;if(a.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(u){if(!a[sc])switch(i){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(A=a.getAttribute("rel"),A==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(A!==E.rel||a.getAttribute("href")!==(E.href==null||E.href===""?null:E.href)||a.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||a.getAttribute("title")!==(E.title==null?null:E.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(A=a.getAttribute("src"),(A!==(E.src==null?null:E.src)||a.getAttribute("type")!==(E.type==null?null:E.type)||a.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&A&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(i==="input"&&a.type==="hidden"){var A=E.name==null?null:""+E.name;if(E.type==="hidden"&&a.getAttribute("name")===A)return a}else return a;if(a=Ci(a.nextSibling),a===null)break}return null}function nM(a,i,r){if(i==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!r||(a=Ci(a.nextSibling),a===null))return null;return a}function nA(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function iM(a,i){var r=a.ownerDocument;if(a.data!=="$?"||r.readyState==="complete")i();else{var u=function(){i(),r.removeEventListener("DOMContentLoaded",u)};r.addEventListener("DOMContentLoaded",u),a._reactRetry=u}}function Ci(a){for(;a!=null;a=a.nextSibling){var i=a.nodeType;if(i===1||i===3)break;if(i===8){if(i=a.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return a}var iA=null;function b_(a){a=a.previousSibling;for(var i=0;a;){if(a.nodeType===8){var r=a.data;if(r==="$"||r==="$!"||r==="$?"){if(i===0)return a;i--}else r==="/$"&&i++}a=a.previousSibling}return null}function O_(a,i,r){switch(i=Bd(r),a){case"html":if(a=i.documentElement,!a)throw Error(o(452));return a;case"head":if(a=i.head,!a)throw Error(o(453));return a;case"body":if(a=i.body,!a)throw Error(o(454));return a;default:throw Error(o(451))}}function Vc(a){for(var i=a.attributes;i.length;)a.removeAttributeNode(i[0]);sE(a)}var si=new Map,D_=new Set;function Fd(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var No=K.d;K.d={f:oM,r:lM,D:sM,C:rM,L:cM,m:uM,X:hM,S:dM,M:fM};function oM(){var a=No.f(),i=Ld();return a||i}function lM(a){var i=Ps(a);i!==null&&i.tag===5&&i.type==="form"?Xg(i):No.r(a)}var Tr=typeof document>"u"?null:document;function y_(a,i,r){var u=Tr;if(u&&typeof i=="string"&&i){var E=ei(i);E='link[rel="'+a+'"][href="'+E+'"]',typeof r=="string"&&(E+='[crossorigin="'+r+'"]'),D_.has(E)||(D_.add(E),a={rel:a,crossOrigin:r,href:i},u.querySelector(E)===null&&(i=u.createElement("link"),Xa(i,"link",a),Ha(i),u.head.appendChild(i)))}}function sM(a){No.D(a),y_("dns-prefetch",a,null)}function rM(a,i){No.C(a,i),y_("preconnect",a,i)}function cM(a,i,r){No.L(a,i,r);var u=Tr;if(u&&a&&i){var E='link[rel="preload"][as="'+ei(i)+'"]';i==="image"&&r&&r.imageSrcSet?(E+='[imagesrcset="'+ei(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(E+='[imagesizes="'+ei(r.imageSizes)+'"]')):E+='[href="'+ei(a)+'"]';var A=E;switch(i){case"style":A=Sr(a);break;case"script":A=gr(a)}si.has(A)||(a=R({rel:"preload",href:i==="image"&&r&&r.imageSrcSet?void 0:a,as:i},r),si.set(A,a),u.querySelector(E)!==null||i==="style"&&u.querySelector(Wc(A))||i==="script"&&u.querySelector(Xc(A))||(i=u.createElement("link"),Xa(i,"link",a),Ha(i),u.head.appendChild(i)))}}function uM(a,i){No.m(a,i);var r=Tr;if(r&&a){var u=i&&typeof i.as=="string"?i.as:"script",E='link[rel="modulepreload"][as="'+ei(u)+'"][href="'+ei(a)+'"]',A=E;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":A=gr(a)}if(!si.has(A)&&(a=R({rel:"modulepreload",href:a},i),si.set(A,a),r.querySelector(E)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Xc(A)))return}u=r.createElement("link"),Xa(u,"link",a),Ha(u),r.head.appendChild(u)}}}function dM(a,i,r){No.S(a,i,r);var u=Tr;if(u&&a){var E=Gs(u).hoistableStyles,A=Sr(a);i=i||"default";var b=E.get(A);if(!b){var v={loading:0,preload:null};if(b=u.querySelector(Wc(A)))v.loading=5;else{a=R({rel:"stylesheet",href:a,"data-precedence":i},r),(r=si.get(A))&&oA(a,r);var F=b=u.createElement("link");Ha(F),Xa(F,"link",a),F._p=new Promise(function(re,Ae){F.onload=re,F.onerror=Ae}),F.addEventListener("load",function(){v.loading|=1}),F.addEventListener("error",function(){v.loading|=2}),v.loading|=4,jd(b,i,u)}b={type:"stylesheet",instance:b,count:1,state:v},E.set(A,b)}}}function hM(a,i){No.X(a,i);var r=Tr;if(r&&a){var u=Gs(r).hoistableScripts,E=gr(a),A=u.get(E);A||(A=r.querySelector(Xc(E)),A||(a=R({src:a,async:!0},i),(i=si.get(E))&&lA(a,i),A=r.createElement("script"),Ha(A),Xa(A,"link",a),r.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},u.set(E,A))}}function fM(a,i){No.M(a,i);var r=Tr;if(r&&a){var u=Gs(r).hoistableScripts,E=gr(a),A=u.get(E);A||(A=r.querySelector(Xc(E)),A||(a=R({src:a,async:!0,type:"module"},i),(i=si.get(E))&&lA(a,i),A=r.createElement("script"),Ha(A),Xa(A,"link",a),r.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},u.set(E,A))}}function v_(a,i,r,u){var E=(E=H.current)?Fd(E):null;if(!E)throw Error(o(446));switch(a){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(i=Sr(r.href),r=Gs(E).hoistableStyles,u=r.get(i),u||(u={type:"style",instance:null,count:0,state:null},r.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){a=Sr(r.href);var A=Gs(E).hoistableStyles,b=A.get(a);if(b||(E=E.ownerDocument||E,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},A.set(a,b),(A=E.querySelector(Wc(a)))&&!A._p&&(b.instance=A,b.state.loading=5),si.has(a)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},si.set(a,r),A||EM(E,a,r,b.state))),i&&u===null)throw Error(o(528,""));return b}if(i&&u!==null)throw Error(o(529,""));return null;case"script":return i=r.async,r=r.src,typeof r=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=gr(r),r=Gs(E).hoistableScripts,u=r.get(i),u||(u={type:"script",instance:null,count:0,state:null},r.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,a))}}function Sr(a){return'href="'+ei(a)+'"'}function Wc(a){return'link[rel="stylesheet"]['+a+"]"}function M_(a){return R({},a,{"data-precedence":a.precedence,precedence:null})}function EM(a,i,r,u){a.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=a.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),Xa(i,"link",r),Ha(i),a.head.appendChild(i))}function gr(a){return'[src="'+ei(a)+'"]'}function Xc(a){return"script[async]"+a}function L_(a,i,r){if(i.count++,i.instance===null)switch(i.type){case"style":var u=a.querySelector('style[data-href~="'+ei(r.href)+'"]');if(u)return i.instance=u,Ha(u),u;var E=R({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return u=(a.ownerDocument||a).createElement("style"),Ha(u),Xa(u,"style",E),jd(u,r.precedence,a),i.instance=u;case"stylesheet":E=Sr(r.href);var A=a.querySelector(Wc(E));if(A)return i.state.loading|=4,i.instance=A,Ha(A),A;u=M_(r),(E=si.get(E))&&oA(u,E),A=(a.ownerDocument||a).createElement("link"),Ha(A);var b=A;return b._p=new Promise(function(v,F){b.onload=v,b.onerror=F}),Xa(A,"link",u),i.state.loading|=4,jd(A,r.precedence,a),i.instance=A;case"script":return A=gr(r.src),(E=a.querySelector(Xc(A)))?(i.instance=E,Ha(E),E):(u=r,(E=si.get(A))&&(u=R({},r),lA(u,E)),a=a.ownerDocument||a,E=a.createElement("script"),Ha(E),Xa(E,"link",u),a.head.appendChild(E),i.instance=E);case"void":return null;default:throw Error(o(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,jd(u,r.precedence,a));return i.instance}function jd(a,i,r){for(var u=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=u.length?u[u.length-1]:null,A=E,b=0;b<u.length;b++){var v=u[b];if(v.dataset.precedence===i)A=v;else if(A!==E)break}A?A.parentNode.insertBefore(a,A.nextSibling):(i=r.nodeType===9?r.head:r,i.insertBefore(a,i.firstChild))}function oA(a,i){a.crossOrigin==null&&(a.crossOrigin=i.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=i.referrerPolicy),a.title==null&&(a.title=i.title)}function lA(a,i){a.crossOrigin==null&&(a.crossOrigin=i.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=i.referrerPolicy),a.integrity==null&&(a.integrity=i.integrity)}var zd=null;function x_(a,i,r){if(zd===null){var u=new Map,E=zd=new Map;E.set(r,u)}else E=zd,u=E.get(r),u||(u=new Map,E.set(r,u));if(u.has(a))return u;for(u.set(a,null),r=r.getElementsByTagName(a),E=0;E<r.length;E++){var A=r[E];if(!(A[sc]||A[nn]||a==="link"&&A.getAttribute("rel")==="stylesheet")&&A.namespaceURI!=="http://www.w3.org/2000/svg"){var b=A.getAttribute(i)||"";b=a+b;var v=u.get(b);v?v.push(A):u.set(b,[A])}}return u}function H_(a,i,r){a=a.ownerDocument||a,a.head.insertBefore(r,i==="title"?a.querySelector("head > title"):null)}function mM(a,i,r){if(r===1||i.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return a=i.disabled,typeof i.precedence=="string"&&a==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function k_(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var qc=null;function AM(){}function RM(a,i,r){if(qc===null)throw Error(o(475));var u=qc;if(i.type==="stylesheet"&&(typeof r.media!="string"||matchMedia(r.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var E=Sr(r.href),A=a.querySelector(Wc(E));if(A){a=A._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(u.count++,u=Yd.bind(u),a.then(u,u)),i.state.loading|=4,i.instance=A,Ha(A);return}A=a.ownerDocument||a,r=M_(r),(E=si.get(E))&&oA(r,E),A=A.createElement("link"),Ha(A);var b=A;b._p=new Promise(function(v,F){b.onload=v,b.onerror=F}),Xa(A,"link",r),i.instance=A}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(i,a),(a=i.state.preload)&&(i.state.loading&3)===0&&(u.count++,i=Yd.bind(u),a.addEventListener("load",i),a.addEventListener("error",i))}}function TM(){if(qc===null)throw Error(o(475));var a=qc;return a.stylesheets&&a.count===0&&sA(a,a.stylesheets),0<a.count?function(i){var r=setTimeout(function(){if(a.stylesheets&&sA(a,a.stylesheets),a.unsuspend){var u=a.unsuspend;a.unsuspend=null,u()}},6e4);return a.unsuspend=i,function(){a.unsuspend=null,clearTimeout(r)}}:null}function Yd(){if(this.count--,this.count===0){if(this.stylesheets)sA(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var Kd=null;function sA(a,i){a.stylesheets=null,a.unsuspend!==null&&(a.count++,Kd=new Map,i.forEach(SM,a),Kd=null,Yd.call(a))}function SM(a,i){if(!(i.state.loading&4)){var r=Kd.get(a);if(r)var u=r.get(null);else{r=new Map,Kd.set(a,r);for(var E=a.querySelectorAll("link[data-precedence],style[data-precedence]"),A=0;A<E.length;A++){var b=E[A];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(r.set(b.dataset.precedence,b),u=b)}u&&r.set(null,u)}E=i.instance,b=E.getAttribute("data-precedence"),A=r.get(b)||u,A===u&&r.set(null,E),r.set(b,E),this.count++,u=Yd.bind(this),E.addEventListener("load",u),E.addEventListener("error",u),A?A.parentNode.insertBefore(E,A.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(E,a.firstChild)),i.state.loading|=4}}var Zc={$$typeof:w,Provider:null,Consumer:null,_currentValue:ne,_currentValue2:ne,_threadCount:0};function gM(a,i,r,u,E,A,b,v){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ks(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ks(0),this.hiddenUpdates=ks(null),this.identifierPrefix=u,this.onUncaughtError=E,this.onCaughtError=A,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=v,this.incompleteTransitions=new Map}function U_(a,i,r,u,E,A,b,v,F,re,Ae,Se){return a=new gM(a,i,r,b,v,F,re,Se),i=1,A===!0&&(i|=24),A=wn(3,null,null,i),a.current=A,A.stateNode=a,i=jE(),i.refCount++,a.pooledCache=i,i.refCount++,A.memoizedState={element:u,isDehydrated:r,cache:i},VE(A),a}function w_(a){return a?(a=Qs,a):Qs}function P_(a,i,r,u,E,A){E=w_(E),u.context===null?u.context=E:u.pendingContext=E,u=jo(i),u.payload={element:r},A=A===void 0?null:A,A!==null&&(u.callback=A),r=zo(a,u,i),r!==null&&(jn(r,a,i),bc(r,a,i))}function G_(a,i){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var r=a.retryLane;a.retryLane=r!==0&&r<i?r:i}}function rA(a,i){G_(a,i),(a=a.alternate)&&G_(a,i)}function B_(a){if(a.tag===13){var i=Zs(a,67108864);i!==null&&jn(i,a,67108864),rA(a,67108864)}}var Vd=!0;function IM(a,i,r,u){var E=P.T;P.T=null;var A=K.p;try{K.p=2,cA(a,i,r,u)}finally{K.p=A,P.T=E}}function _M(a,i,r,u){var E=P.T;P.T=null;var A=K.p;try{K.p=8,cA(a,i,r,u)}finally{K.p=A,P.T=E}}function cA(a,i,r,u){if(Vd){var E=uA(u);if(E===null)Zm(a,i,u,Wd,r),j_(a,u);else if(NM(E,a,i,r,u))u.stopPropagation();else if(j_(a,u),i&4&&-1<pM.indexOf(a)){for(;E!==null;){var A=Ps(E);if(A!==null)switch(A.tag){case 3:if(A=A.stateNode,A.current.memoizedState.isDehydrated){var b=Pi(A.pendingLanes);if(b!==0){var v=A;for(v.pendingLanes|=2,v.entangledLanes|=2;b;){var F=1<<31-Bt(b);v.entanglements[1]|=F,b&=~F}zi(A),(It&6)===0&&(vd=De()+500,zc(0))}}break;case 13:v=Zs(A,2),v!==null&&jn(v,A,2),Ld(),rA(A,2)}if(A=uA(u),A===null&&Zm(a,i,u,Wd,r),A===E)break;E=A}E!==null&&u.stopPropagation()}else Zm(a,i,u,null,r)}}function uA(a){return a=mE(a),dA(a)}var Wd=null;function dA(a){if(Wd=null,a=ws(a),a!==null){var i=c(a);if(i===null)a=null;else{var r=i.tag;if(r===13){if(a=d(i),a!==null)return a;a=null}else if(r===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;a=null}else i!==a&&(a=null)}}return Wd=a,null}function F_(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Be()){case $t:return 2;case Cn:return 8;case bn:case so:return 32;case ro:return 268435456;default:return 32}default:return 32}}var hA=!1,al=null,nl=null,il=null,Qc=new Map,$c=new Map,ol=[],pM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function j_(a,i){switch(a){case"focusin":case"focusout":al=null;break;case"dragenter":case"dragleave":nl=null;break;case"mouseover":case"mouseout":il=null;break;case"pointerover":case"pointerout":Qc.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":$c.delete(i.pointerId)}}function Jc(a,i,r,u,E,A){return a===null||a.nativeEvent!==A?(a={blockedOn:i,domEventName:r,eventSystemFlags:u,nativeEvent:A,targetContainers:[E]},i!==null&&(i=Ps(i),i!==null&&B_(i)),a):(a.eventSystemFlags|=u,i=a.targetContainers,E!==null&&i.indexOf(E)===-1&&i.push(E),a)}function NM(a,i,r,u,E){switch(i){case"focusin":return al=Jc(al,a,i,r,u,E),!0;case"dragenter":return nl=Jc(nl,a,i,r,u,E),!0;case"mouseover":return il=Jc(il,a,i,r,u,E),!0;case"pointerover":var A=E.pointerId;return Qc.set(A,Jc(Qc.get(A)||null,a,i,r,u,E)),!0;case"gotpointercapture":return A=E.pointerId,$c.set(A,Jc($c.get(A)||null,a,i,r,u,E)),!0}return!1}function z_(a){var i=ws(a.target);if(i!==null){var r=c(i);if(r!==null){if(i=r.tag,i===13){if(i=d(r),i!==null){a.blockedOn=i,Ry(a.priority,function(){if(r.tag===13){var u=Fn();u=lc(u);var E=Zs(r,u);E!==null&&jn(E,r,u),rA(r,u)}});return}}else if(i===3&&r.stateNode.current.memoizedState.isDehydrated){a.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Xd(a){if(a.blockedOn!==null)return!1;for(var i=a.targetContainers;0<i.length;){var r=uA(a.nativeEvent);if(r===null){r=a.nativeEvent;var u=new r.constructor(r.type,r);EE=u,r.target.dispatchEvent(u),EE=null}else return i=Ps(r),i!==null&&B_(i),a.blockedOn=r,!1;i.shift()}return!0}function Y_(a,i,r){Xd(a)&&r.delete(i)}function CM(){hA=!1,al!==null&&Xd(al)&&(al=null),nl!==null&&Xd(nl)&&(nl=null),il!==null&&Xd(il)&&(il=null),Qc.forEach(Y_),$c.forEach(Y_)}function qd(a,i){a.blockedOn===i&&(a.blockedOn=null,hA||(hA=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,CM)))}var Zd=null;function K_(a){Zd!==a&&(Zd=a,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Zd===a&&(Zd=null);for(var i=0;i<a.length;i+=3){var r=a[i],u=a[i+1],E=a[i+2];if(typeof u!="function"){if(dA(u||r)===null)continue;break}var A=Ps(r);A!==null&&(a.splice(i,3),i-=3,dm(A,{pending:!0,data:E,method:r.method,action:u},u,E))}}))}function eu(a){function i(F){return qd(F,a)}al!==null&&qd(al,a),nl!==null&&qd(nl,a),il!==null&&qd(il,a),Qc.forEach(i),$c.forEach(i);for(var r=0;r<ol.length;r++){var u=ol[r];u.blockedOn===a&&(u.blockedOn=null)}for(;0<ol.length&&(r=ol[0],r.blockedOn===null);)z_(r),r.blockedOn===null&&ol.shift();if(r=(a.ownerDocument||a).$$reactFormReplay,r!=null)for(u=0;u<r.length;u+=3){var E=r[u],A=r[u+1],b=E[On]||null;if(typeof A=="function")b||K_(r);else if(b){var v=null;if(A&&A.hasAttribute("formAction")){if(E=A,b=A[On]||null)v=b.formAction;else if(dA(E)!==null)continue}else v=b.action;typeof v=="function"?r[u+1]=v:(r.splice(u,3),u-=3),K_(r)}}}function fA(a){this._internalRoot=a}Qd.prototype.render=fA.prototype.render=function(a){var i=this._internalRoot;if(i===null)throw Error(o(409));var r=i.current,u=Fn();P_(r,u,a,i,null,null)},Qd.prototype.unmount=fA.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var i=a.containerInfo;P_(a.current,2,null,a,null,null),Ld(),i[Us]=null}};function Qd(a){this._internalRoot=a}Qd.prototype.unstable_scheduleHydration=function(a){if(a){var i=rS();a={blockedOn:null,target:a,priority:i};for(var r=0;r<ol.length&&i!==0&&i<ol[r].priority;r++);ol.splice(r,0,a),r===0&&z_(a)}};var V_=t.version;if(V_!=="19.1.0")throw Error(o(527,V_,"19.1.0"));K.findDOMNode=function(a){var i=a._reactInternals;if(i===void 0)throw typeof a.render=="function"?Error(o(188)):(a=Object.keys(a).join(","),Error(o(268,a)));return a=h(i),a=a!==null?m(a):null,a=a===null?null:a.stateNode,a};var bM={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $d=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$d.isDisabled&&$d.supportsFiber)try{wo=$d.inject(bM),rt=$d}catch{}}return au.createRoot=function(a,i){if(!s(a))throw Error(o(299));var r=!1,u="",E=rI,A=cI,b=uI,v=null;return i!=null&&(i.unstable_strictMode===!0&&(r=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(E=i.onUncaughtError),i.onCaughtError!==void 0&&(A=i.onCaughtError),i.onRecoverableError!==void 0&&(b=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(v=i.unstable_transitionCallbacks)),i=U_(a,1,!1,null,null,r,u,E,A,b,v,null),a[Us]=i.current,qm(a),new fA(i)},au.hydrateRoot=function(a,i,r){if(!s(a))throw Error(o(299));var u=!1,E="",A=rI,b=cI,v=uI,F=null,re=null;return r!=null&&(r.unstable_strictMode===!0&&(u=!0),r.identifierPrefix!==void 0&&(E=r.identifierPrefix),r.onUncaughtError!==void 0&&(A=r.onUncaughtError),r.onCaughtError!==void 0&&(b=r.onCaughtError),r.onRecoverableError!==void 0&&(v=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(F=r.unstable_transitionCallbacks),r.formState!==void 0&&(re=r.formState)),i=U_(a,1,!0,i,r??null,u,E,A,b,v,F,re),i.context=w_(null),r=i.current,u=Fn(),u=lc(u),E=jo(u),E.callback=null,zo(r,E,u),r=u,i.current.lanes=r,xl(i,r),zi(i),a[Us]=i.current,qm(a),new Qd(i)},au.version="19.1.0",au}var ap;function wM(){if(ap)return mA.exports;ap=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),mA.exports=UM(),mA.exports}var PM=wM(),C=LR();const Hn=zN(C),xR=DM({__proto__:null,default:Hn},[C]);var KN={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},es=Hn.createContext&&Hn.createContext(KN),GM=["attr","size","title"];function BM(e,t){if(e==null)return{};var n=FM(e,t),o,s;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(s=0;s<c.length;s++)o=c[s],!(t.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}function FM(e,t){if(e==null)return{};var n={};for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){if(t.indexOf(o)>=0)continue;n[o]=e[o]}return n}function Lh(){return Lh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Lh.apply(this,arguments)}function np(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,o)}return n}function xh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?np(Object(n),!0).forEach(function(o){jM(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):np(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function jM(e,t,n){return t=zM(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zM(e){var t=YM(e,"string");return typeof t=="symbol"?t:t+""}function YM(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function VN(e){return e&&e.map((t,n)=>Hn.createElement(t.tag,xh({key:n},t.attr),VN(t.child)))}function Ai(e){return t=>Hn.createElement(KM,Lh({attr:xh({},e.attr)},t),VN(e.child))}function KM(e){var t=n=>{var{attr:o,size:s,title:c}=e,d=BM(e,GM),f=s||n.size||"1em",h;return n.className&&(h=n.className),e.className&&(h=(h?h+" ":"")+e.className),Hn.createElement("svg",Lh({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,o,d,{className:h,style:xh(xh({color:e.color||n.color},n.style),e.style),height:f,width:f,xmlns:"http://www.w3.org/2000/svg"}),c&&Hn.createElement("title",null,c),e.children)};return es!==void 0?Hn.createElement(es.Consumer,null,n=>t(n)):t(KN)}function VM(e){return Ai({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M407.8 294.7c-3.3-.4-6.7-.8-10-1.3c3.4 .4 6.7 .9 10 1.3zM288 227.1C261.9 176.4 190.9 81.9 124.9 35.3C61.6-9.4 37.5-1.7 21.6 5.5C3.3 13.8 0 41.9 0 58.4S9.1 194 15 213.9c19.5 65.7 89.1 87.9 153.2 80.7c3.3-.5 6.6-.9 10-1.4c-3.3 .5-6.6 1-10 1.4C74.3 308.6-9.1 342.8 100.3 464.5C220.6 589.1 265.1 437.8 288 361.1c22.9 76.7 49.2 222.5 185.6 103.4c102.4-103.4 28.1-156-65.8-169.9c-3.3-.4-6.7-.8-10-1.3c3.4 .4 6.7 .9 10 1.3c64.1 7.1 133.6-15.1 153.2-80.7C566.9 194 576 75 576 58.4s-3.3-44.7-21.6-52.9c-15.8-7.1-40-14.9-103.2 29.8C385.1 81.9 314.1 176.4 288 227.1z"},child:[]}]})(e)}function WM(e){return Ai({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"},child:[]}]})(e)}function XM(e){return Ai({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M192 32c0 17.7 14.3 32 32 32c123.7 0 224 100.3 224 224c0 17.7 14.3 32 32 32s32-14.3 32-32C512 128.9 383.1 0 224 0c-17.7 0-32 14.3-32 32zm0 96c0 17.7 14.3 32 32 32c70.7 0 128 57.3 128 128c0 17.7 14.3 32 32 32s32-14.3 32-32c0-106-86-192-192-192c-17.7 0-32 14.3-32 32zM96 144c0-26.5-21.5-48-48-48S0 117.5 0 144V368c0 79.5 64.5 144 144 144s144-64.5 144-144s-64.5-144-144-144H128v96h16c26.5 0 48 21.5 48 48s-21.5 48-48 48s-48-21.5-48-48V144z"},child:[]}]})(e)}function qM(e){return Ai({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M249.6 471.5c10.8 3.8 22.4-4.1 22.4-15.5V78.6c0-4.2-1.6-8.4-5-11C247.4 52 202.4 32 144 32C93.5 32 46.3 45.3 18.1 56.1C6.8 60.5 0 71.7 0 83.8V454.1c0 11.9 12.8 20.2 24.1 16.5C55.6 460.1 105.5 448 144 448c33.9 0 79 14 105.6 23.5zm76.8 0C353 462 398.1 448 432 448c38.5 0 88.4 12.1 119.9 22.6c11.3 3.8 24.1-4.6 24.1-16.5V83.8c0-12.1-6.8-23.3-18.1-27.6C529.7 45.3 482.5 32 432 32c-58.4 0-103.4 20-123 35.6c-3.3 2.6-5 6.8-5 11V456c0 11.4 11.7 19.3 22.4 15.5z"},child:[]}]})(e)}function ZM(e){return Ai({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"},child:[]}]})(e)}function QM(e){return Ai({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M352 144c0-44.2 35.8-80 80-80s80 35.8 80 80v48c0 17.7 14.3 32 32 32s32-14.3 32-32V144C576 64.5 511.5 0 432 0S288 64.5 288 144v48H64c-35.3 0-64 28.7-64 64V448c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V256c0-35.3-28.7-64-64-64H352V144z"},child:[]}]})(e)}function $M(e){return Ai({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M144 144v48H304V144c0-44.2-35.8-80-80-80s-80 35.8-80 80zM80 192V144C80 64.5 144.5 0 224 0s144 64.5 144 144v48h16c35.3 0 64 28.7 64 64V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V256c0-35.3 28.7-64 64-64H80z"},child:[]}]})(e)}function WN(e){return Ai({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"},child:[]}]})(e)}const JM="7.41",bi=16;var ya=(e=>(e.Exact="Exact",e.SkillSequence="SkillSequence",e.Edited="Edited",e))(ya||{}),di=(e=>(e.Record="Record",e.SkillSequencePresets="SkillSequencePresets",e.MarkerTrackIndividual="MarkerTrackIndividual",e.MarkerTracksCombined="MarkerTracksCombined",e.MarkerTrackSet="MarkerTrackSet",e))(di||{}),ri=(e=>(e[e.RealTime=0]="RealTime",e[e.RealTimeAutoPause=1]="RealTimeAutoPause",e[e.Manual=2]="Manual",e))(ri||{}),Do=(e=>(e[e.Initial=0]="Initial",e[e.FpsTax=1]="FpsTax",e[e.AllaganGcdFormula=2]="AllaganGcdFormula",e))(Do||{});const HR={version:2};let XN=!1;function eL(){return XN}const Ef="DT",uu=window.location.hostname.startsWith("beta"),tL=localStorage.length===0;function Tt(e){const t=localStorage.getItem(Ef+"."+e);return localStorage.getItem(e)!==null&&(XN=!0),t}function gt(e,t){localStorage.setItem(Ef+"."+e,t)}function $A(e){localStorage.removeItem(Ef+"."+e)}function qN(){Object.keys(localStorage).forEach(e=>{e.startsWith(Ef+".")&&localStorage.removeItem(e)})}function ZN(e,t){const n=e in gA?gA[e]:gA.NEVER;return t>=n.level}const se=()=>e=>e,aL=se()({BENEFIC:{id:3594,name:"Benefic",label:{zh:"",ja:""}},LIGHTSPEED:{id:3606,name:"Lightspeed",label:{zh:"",ja:""}},HELIOS:{id:3600,name:"Helios",label:{zh:"",ja:""}},ASCEND:{id:3603,name:"Ascend",label:{zh:"",ja:""}},ESSENTIAL_DIGNITY:{id:3614,name:"Essential Dignity",label:{zh:"",ja:""}},BENEFIC_II:{id:3610,name:"Benefic II",label:{zh:"",ja:""}},ASTRAL_DRAW:{id:37017,name:"Astral Draw",label:{zh:"",ja:""}},UMBRAL_DRAW:{id:37018,name:"Umbral Draw",label:{zh:"",ja:""}},PLAY_I:{id:37019,name:"Play I",label:{zh:"I",ja:"I"}},PLAY_II:{id:37020,name:"Play II",label:{zh:"II",ja:"II"}},PLAY_III:{id:37021,name:"Play III",label:{zh:"III",ja:"III"}},ASPECTED_BENEFIC:{id:3595,name:"Aspected Benefic",label:{zh:"",ja:""}},ASPECTED_HELIOS:{id:3601,name:"Aspected Helios",label:{zh:"",ja:""}},GRAVITY:{id:3615,name:"Gravity",label:{zh:"",ja:""}},COMBUST_II:{id:3608,name:"Combust II",label:{zh:"",ja:""}},SYNASTRY:{id:3612,name:"Synastry",label:{zh:"",ja:""}},DIVINATION:{id:16552,name:"Divination",label:{zh:"",ja:""}},COLLECTIVE_UNCONSCIOUS:{id:3613,name:"Collective Unconscious",label:{zh:"",ja:""}},CELESTIAL_OPPOSITION:{id:16553,name:"Celestial Opposition",label:{zh:"",ja:""}},EARTHLY_STAR:{id:7439,name:"Earthly Star",label:{zh:"",ja:""}},STELLAR_DETONATION:{id:8324,name:"Stellar Detonation",label:{zh:"",ja:""}},MALEFIC_III:{id:7442,name:"Malefic III",label:{zh:"",ja:""}},MINOR_ARCANA:{id:37022,name:"Minor Arcana",label:{zh:"",ja:""}},COMBUST_III:{id:16554,name:"Combust III",label:{zh:"",ja:""}},MALEFIC_IV:{id:16555,name:"Malefic IV",label:{zh:"",ja:""}},CELESTIAL_INTERSECTION:{id:16556,name:"Celestial Intersection",label:{zh:"",ja:""}},HOROSCOPE:{id:16557,name:"Horoscope",label:{zh:"",ja:""}},HOROSCOPE_RECAST:{id:16558,name:"Horoscope (Recast)",label:{zh:"",ja:""}},NEUTRAL_SECT:{id:16559,name:"Neutral Sect",label:{zh:"",ja:""}},FALL_MALEFIC:{id:25871,name:"Fall Malefic",label:{zh:"",ja:""}},GRAVITY_II:{id:25872,name:"Gravity II",label:{zh:"",ja:""}},EXALTATION:{id:25873,name:"Exaltation",label:{zh:"",ja:""}},MACROCOSMOS:{id:25874,name:"Macrocosmos",label:{zh:"",ja:""}},MICROCOSMOS:{id:25875,name:"Microcosmos",label:{zh:"",ja:""}},ORACLE:{id:37029,name:"Oracle",label:{zh:"",ja:""}},HELIOS_CONJUNCTION:{id:37030,name:"Helios Conjunction",label:{zh:"",ja:""}},SUN_SIGN:{id:37031,name:"Sun Sign",label:{zh:"",ja:""}},THE_BALANCE:{id:37023,name:"The Balance",label:{zh:"",ja:""}},THE_ARROW:{id:37024,name:"The Arrow",label:{zh:"",ja:""}},THE_SPIRE:{id:37025,name:"The Spire",label:{zh:"",ja:""}},THE_SPEAR:{id:37026,name:"The Spear",label:{zh:"",ja:""}},THE_BOLE:{id:37027,name:"The Bole",label:{zh:"",ja:""}},THE_EWER:{id:37028,name:"The Ewer",label:{zh:"",ja:""}},LORD_OF_CROWNS:{id:7444,name:"Lord of Crowns",label:{zh:"",ja:""}},LADY_OF_CROWNS:{id:7445,name:"Lady of Crowns",label:{zh:"",ja:""}}}),nL=se()({cd_LIGHTSPEED:{name:"cd_Lightspeed"},cd_ESSENTIAL_DIGNITY:{name:"cd_EssentialDignity"},cd_ASTRAL_DRAW:{name:"cd_AstralDraw"},cd_PLAY_I:{name:"cd_PlayI"},cd_PLAY_II:{name:"cd_PlayII"},cd_PLAY_III:{name:"cd_PlayIII"},cd_SYNASTRY:{name:"cd_Synastry"},cd_DIVINATION:{name:"cd_Divination"},cd_COLLECTIVE_UNCONSCIOUS:{name:"cd_CollectiveUnconscious"},cd_CELESTIAL_OPPOSITION:{name:"cd_CelestialOpposition"},cd_EARTHLY_STAR:{name:"cd_EarthlyStar"},cd_STELLAR_DETONATION:{name:"cd_StellarDetonation"},cd_MINOR_ARCANA:{name:"cd_MinorArcana"},cd_CELESTIAL_INTERSECTION:{name:"cd_CelestialIntersection"},cd_HOROSCOPE:{name:"cd_Horoscope"},cd_HOROSCOPE_RECAST:{name:"cd_HoroscopeRecast"},cd_NEUTRAL_SECT:{name:"cd_NeutralSect"},cd_EXALTATION:{name:"cd_Exaltation"},cd_MACROCOSMOS:{name:"cd_Macrocosmos"},cd_MICROCOSMOS:{name:"cd_Microcosmos"},cd_ORACLE:{name:"cd_Oracle"},cd_SUN_SIGN:{name:"cd_SunSign"}}),iL=se()({ARCANA:{name:"Arcana",label:{zh:""}},MINOR_ARCANA:{name:"Minor Arcana",label:{zh:""}}}),kR=se()({LIGHTSPEED:{name:"Lightspeed",label:{zh:""}},THE_BALANCE:{name:"The Balance",label:{zh:""}},THE_ARROW:{name:"The Arrow",label:{zh:""}},THE_SPIRE:{name:"The Spire",label:{zh:""}},THE_SPEAR:{name:"The Spear",label:{zh:""}},THE_BOLE:{name:"The Bole",label:{zh:""}},THE_EWER:{name:"The Ewer",label:{zh:""}},ASPECTED_BENEFIC:{name:"Aspected Benefic",label:{zh:""}},ASPECTED_HELIOS:{name:"Aspected Helios",label:{zh:""}},SYNASTRY:{name:"Synastry",label:{zh:""}},DIVINATION:{name:"Divination",label:{zh:""}},DIVINING:{name:"Divining",label:{zh:""}},COLLECTIVE_UNCONSCIOUS:{name:"Collective Unconscious",label:{zh:""}},COLLECTIVE_UNCONSCIOUS_MIT:{name:"Collective Unconscious (Mitigation)",label:{zh:""}},WHEEL_OF_FORTUNE:{name:"Wheel of Fortune",label:{zh:""}},OPPOSITION:{name:"Opposition",label:{zh:""}},EARTHLY_DOMINANCE:{name:"Earthly Dominance",mayNotBeCanceled:!0,label:{zh:""}},GIANT_DOMINANCE:{name:"Giant Dominance",mayNotBeCanceled:!0,label:{zh:""}},COMBUST_II:{name:"Combust II",label:{zh:""}},COMBUST_III:{name:"Combust III",label:{zh:""}},INTERSECTION:{name:"Intersection",label:{zh:""}},HOROSCOPE:{name:"Horoscope",label:{zh:""}},HOROSCOPE_HELIOS:{name:"Horoscope Helios",label:{zh:""}},NEUTRAL_SECT:{name:"Neutral Sect",label:{zh:""}},NEUTRAL_SECT_SHIELD:{name:"Neutral Sect (Shield)",label:{zh:""}},SUNTOUCHED:{name:"Suntouched",label:{zh:""}},EXALTATION:{name:"Exaltation",label:{zh:""}},MACROCOSMOS:{name:"Macrocosmos",label:{zh:""}},HELIOS_CONJUNCTION:{name:"Helios Conjunction",label:{zh:""}},SUN_SIGN:{name:"Sun Sign",label:{zh:""}}}),oL=se()({ARCANA_1:{name:"Arcana 1",label:{zh:"1"}},ARCANA_2:{name:"Arcana 2",label:{zh:"2"}},ARCANA_3:{name:"Arcana 3",label:{zh:"3"}},NEXT_DRAW:{name:"Next Draw",label:{zh:""}}}),lL=se()({COMBUST_MASTERY_II:{name:"Combust Mastery II",level:72},MALEFIC_MASTERY_III:{name:"Malefic Mastery III",level:82},ENHANCED_ESSENTIAL_DIGNITY:{name:"Enhanced Essential Dignity",level:78},MALEFIC_MASTERY_IV:{name:"Malefic Mastery IV",level:82},GRAVITY_MASTERY:{name:"Gravity Mastery",level:82},ENHANCED_CELESTIAL_INTERSECTION:{name:"Enhanced Celestial Intersection",level:88},ENHANCED_DIVINATION:{name:"Enhanced Divination",level:92},ASPECTED_HELIOS_MASTERY:{name:"Aspected Helios Mastery",level:96},ENHANCED_ESSENTIAL_DIGNITY_II:{name:"Enhanced Essential Dignity_II",level:98},ENHANCED_NEUTRAL_SECT:{name:"Enhanced Neutral Sect",level:100}}),sL={...iL,...kR,...oL},rL=se()({BLIZZARD:{id:142,name:"Blizzard",label:{zh:"1",ja:""},discordEmote:"B1"},FIRE:{id:141,name:"Fire",label:{zh:"1",ja:""},discordEmote:"F1"},BLIZZARD_II:{id:25793,name:"Blizzard 2",label:{zh:"2",ja:""},discordEmote:"F2"},FIRE_II:{id:147,name:"Fire 2",label:{zh:"2",ja:""},discordEmote:"F2"},TRANSPOSE:{id:149,name:"Transpose",label:{zh:"",ja:""},discordEmote:"Transpose"},THUNDER_III:{id:153,name:"Thunder 3",label:{zh:"3",ja:""},discordEmote:"T3"},THUNDER_IV:{id:7420,name:"Thunder 4",label:{zh:""},discordEmote:"T4"},MANAWARD:{id:157,name:"Manaward",label:{zh:"",ja:""},discordEmote:"Manaward"},MANAFONT:{id:158,name:"Manafont",label:{zh:"",ja:""},discordEmote:"Manafont"},LEY_LINES:{id:3573,name:"Ley Lines",label:{zh:"",ja:""},discordEmote:"LL"},FIRE_III:{id:152,name:"Fire 3",label:{zh:"3",ja:""},discordEmote:"F3"},BLIZZARD_III:{id:154,name:"Blizzard 3",label:{zh:"3",ja:""},discordEmote:"B3"},FREEZE:{id:159,name:"Freeze",label:{zh:"",ja:""},discordEmote:"Freeze"},FLARE:{id:162,name:"Flare",label:{zh:"",ja:""},discordEmote:"Flare"},BLIZZARD_IV:{id:3576,name:"Blizzard 4",label:{zh:"4",ja:""},discordEmote:"B4"},FIRE_IV:{id:3577,name:"Fire 4",label:{zh:"4",ja:""},discordEmote:"F4"},BETWEEN_THE_LINES:{id:7419,name:"Between the Lines",label:{zh:"",ja:""},discordEmote:"BtL"},AETHERIAL_MANIPULATION:{id:155,name:"Aetherial Manipulation",label:{zh:"",ja:""},discordEmote:"AM"},TRIPLECAST:{id:7421,name:"Triplecast",label:{zh:"",ja:""},discordEmote:"Triple"},FOUL:{id:7422,name:"Foul",label:{zh:"",ja:""},discordEmote:"Foul"},DESPAIR:{id:16505,name:"Despair",label:{zh:"",ja:""},discordEmote:"Despair"},UMBRAL_SOUL:{id:16506,name:"Umbral Soul",label:{zh:"",ja:""},discordEmote:"Soul"},XENOGLOSSY:{id:16507,name:"Xenoglossy",label:{zh:"",ja:""},discordEmote:"Xeno"},HIGH_FIRE_II:{id:25794,name:"High Fire 2",label:{zh:"2",ja:""},discordEmote:"HF2"},HIGH_BLIZZARD_II:{id:25795,name:"High Blizzard 2",label:{zh:"2",ja:""},discordEmote:"HB2"},AMPLIFIER:{id:25796,name:"Amplifier",label:{zh:"",ja:""},discordEmote:"Amplifier"},PARADOX:{id:25797,name:"Paradox",label:{zh:"",ja:""},discordEmote:"Para"},HIGH_THUNDER:{id:36986,name:"High Thunder",label:{zh:"",ja:""},discordEmote:"HThunder"},HIGH_THUNDER_II:{id:36987,name:"High Thunder 2",label:{zh:""},discordEmote:"HThunder2"},FLARE_STAR:{id:36989,name:"Flare Star",label:{zh:"",ja:""},discordEmote:"FS"},RETRACE:{id:36988,name:"Retrace",label:{zh:"",ja:""}}}),cL=se()({cd_TRANSPOSE:{name:"cd_Transpose"},cd_LEY_LINES:{name:"cd_LeyLines"},cd_MANAWARD:{name:"cd_Manaward"},cd_BETWEEN_THE_LINES:{name:"cd_BetweenTheLines"},cd_AETHERIAL_MANIPULATION:{name:"cd_AetherialManipulation"},cd_TRIPLECAST:{name:"cd_Triplecast"},cd_MANAFONT:{name:"cd_Manafont"},cd_AMPLIFIER:{name:"cd_Amplifier"},cd_RETRACE:{name:"cd_Retrace"}}),uL=se()({POLYGLOT:{name:"Polyglot",label:{zh:""}},ASTRAL_FIRE:{name:"Astral Fire",label:{zh:""}},UMBRAL_ICE:{name:"Umbral Ice",label:{zh:""}},UMBRAL_HEART:{name:"Umbral Heart",label:{zh:""}},ENOCHIAN:{name:"Enochian",label:{zh:""}},PARADOX:{name:"Paradox",label:{zh:""}},ASTRAL_SOUL:{name:"Astral Soul",label:{zh:""}}}),UR=se()({LEY_LINES:{name:"Ley Lines",label:{zh:""},mayBeToggled:!0},TRIPLECAST:{name:"Triplecast",label:{zh:""},maximumStacks:3},FIRESTARTER:{name:"Firestarter",label:{zh:""}},THUNDERHEAD:{name:"Thunderhead",label:{zh:""}},THUNDER_III:{name:"Thunder III",label:{zh:""}},THUNDER_IV:{name:"Thunder IV",label:{zh:""}},HIGH_THUNDER:{name:"High Thunder",label:{zh:""}},HIGH_THUNDER_II:{name:"High Thunder II",label:{zh:""}},MANAWARD:{name:"Manaward",label:{zh:""}}}),dL=se()({}),hL=se()({ENHANCED_ENOCHIAN_II:{name:"Enhanced Enochian II",level:78},ENHANCED_POLYGLOT:{name:"Enhanced Polyglot",level:80},ENHANCED_FOUL:{name:"Enhanced Foul",level:80},ASPECT_MASTERY_IV:{name:"Aspect Mastery IV",level:82},ENHANCED_MANAFONT:{name:"Enhanced Manafont",level:84},ENHANCED_ENOCHIAN_III:{name:"Enhanced Enochian III",level:86},ASPECT_MASTERY_V:{name:"Aspect Mastery V",level:90},THUNDER_MASTERY_III:{name:"Thunder Mastery III",level:92},ENHANCED_LEYLINES:{name:"Enhanced Ley Lines",level:96},ENHANCED_ENOCHIAN_IV:{name:"Enhanced Enochian IV",level:96},ENHANCED_POLYGLOT_II:{name:"Enhanced Polyglot II",level:98},ENHANCED_ASTRAL_FIRE:{name:"Enhanced Astral Fire",level:100}}),fL={...uL,...UR,...dL},EL=se()({HEAVY_SHOT:{id:97,name:"Heavy Shot",label:{zh:""}},QUICK_NOCK:{id:100,name:"Quick Nock",label:{zh:""}},BLOODLETTER:{id:110,name:"Bloodletter",label:{zh:""}},BARRAGE:{id:107,name:"Barrage",label:{zh:""}},RAGING_STRIKES:{id:101,name:"Raging Strikes",label:{zh:""}},REPELLING_SHOT:{id:112,name:"Repelling Shot",label:{zh:""}},WIDE_VOLLEY:{id:111,name:"Wide Volley",label:{zh:""}},MAGES_BALLAD:{id:114,name:"Mage's Ballad",label:{zh:""}},ARMYS_PAEON:{id:116,name:"Army's Paeon",label:{zh:""}},RAIN_OF_DEATH:{id:117,name:"Rain of Death",label:{zh:""}},BATTLE_VOICE:{id:118,name:"Battle Voice",label:{zh:""}},EMYPREAL_ARROW:{id:3558,name:"Empyreal Arrow",label:{zh:""}},WANDERERS_MINUET:{id:3559,name:"The Wanderer's Minuet",label:{zh:""}},IRON_JAWS:{id:3560,name:"Iron Jaws",label:{zh:""}},WARDENS_PAEAN:{id:3561,name:"Warden's Paean",label:{zh:""}},SIDEWINDER:{id:3562,name:"Sidewinder",label:{zh:""}},PITCH_PERFECT:{id:7404,name:"Pitch Perfect",label:{zh:""}},TROUBADOUR:{id:7405,name:"Troubadour",label:{zh:""}},CAUSTIC_BITE:{id:7406,name:"Caustic Bite",label:{zh:""}},STORMBITE:{id:7407,name:"Stormbite",label:{zh:""}},NATURES_MINNE:{id:7408,name:"Nature's Minne",label:{zh:""}},REFULGENT_ARROW:{id:7409,name:"Refulgent Arrow",label:{zh:""}},SHADOWBITE:{id:16494,name:"Shadowbite",label:{zh:""}},BURST_SHOT:{id:16495,name:"Burst Shot",label:{zh:""}},APEX_ARROW:{id:16496,name:"Apex Arrow",label:{zh:""}},LADONSBITE:{id:25783,name:"Ladonsbite",label:{zh:""}},BLAST_ARROW:{id:25784,name:"Blast Arrow",label:{zh:""}},RADIANT_FINALE:{id:25785,name:"Radiant Finale",label:{zh:""}},HEARTBREAK_SHOT:{id:36975,name:"Heartbreak Shot",label:{zh:""}},RESONANT_ARROW:{id:36976,name:"Resonant Arrow",label:{zh:""}},RADIANT_ENCORE:{id:36977,name:"Radiant Encore",label:{zh:""}}}),mL=se()({cd_RAGING_STRIKES:{name:"cd_RagingStrikes"},cd_BARRAGE:{name:"cd_Barrage"},cd_EMPYREAL_ARROW:{name:"cd_EmpyrealArrow"},cd_HEARTBREAK_SHOT:{name:"cd_HeartbreakShot"},cd_SIDEWINDER:{name:"cd_Sidewinder"},cd_WANDERERS_MINUET:{name:"cd_WanderersMinuet"},cd_MAGES_BALLAD:{name:"cd_MagesBallad"},cd_ARMYS_PAEON:{name:"cd_ArmysPaeon"},cd_WARDENS_PAEAN:{name:"cd_WardensPaean"},cd_NATURES_MINNE:{name:"cd_NaturesMinne"},cd_REPELLING_SHOT:{name:"cd_RepellingShot"},cd_BATTLE_VOICE:{name:"cd_BattleVoice"},cd_RADIANT_FINALE:{name:"cd_RadiantFinale"},cd_TROUBADOUR:{name:"cd_Troubadour"},cd_PITCH_PERFECT:{name:"cd_PitchPerfect"}}),AL=se()({SONG_TIMER:{name:"SongTimer",label:{zh:""}},SOUL_VOICE:{name:"Soul Voice",label:{zh:""}},PITCH_PERFECT:{name:"Pitch Perfect",label:{zh:""}},REPERTOIRE:{name:"Repertoire",label:{zh:""}},WANDERERS_CODA:{name:"Wanderer's Coda",label:{zh:""}},MAGES_CODA:{name:"Mage's Coda",label:{zh:""}},ARMYS_CODA:{name:"Army's Coda",label:{zh:""}}}),wR=se()({HAWKS_EYE:{name:"Hawk's Eye",label:{zh:""}},RAGING_STRIKES:{name:"Raging Strikes",label:{zh:""}},BARRAGE:{name:"Barrage",label:{zh:""}},ARMYS_MUSE:{name:"Army's Muse",label:{zh:""}},ARMYS_ETHOS:{name:"Army's Ethos",label:{zh:""}},BLAST_ARROW_READY:{name:"Blast Arrow Ready",label:{zh:""}},RESONANT_ARROW_READY:{name:"Resonant Arrow Ready",label:{zh:""}},RADIANT_ENCORE_READY:{name:"Radiant Encore Ready",label:{zh:""}},CAUSTIC_BITE:{name:"Caustic Bite",label:{zh:""}},STORMBITE:{name:"Stormbite",label:{zh:""}},MAGES_BALLAD:{name:"Mage's Ballad",label:{zh:""}},ARMYS_PAEON:{name:"Army's Paeon",label:{zh:""}},WANDERERS_MINUET:{name:"Wanderer's Minuet",label:{zh:""}},BATTLE_VOICE:{name:"Battle Voice",label:{zh:""}},WARDENS_PAEAN:{name:"Warden's Paean",label:{zh:""}},TROUBADOUR:{name:"Troubadour",label:{zh:""}},NATURES_MINNE:{name:"Nature's Minne",label:{zh:""}},RADIANT_FINALE:{name:"Radiant Finale",label:{zh:""}}}),RL=se()({RADIANT_CODA:{name:"Radiant Coda",label:{zh:""}},MUSE_REPERTOIRE:{name:"Muse Repertoire",label:{zh:""}},ETHOS_REPERTOIRE:{name:"Ethos Repertoire",label:{zh:""}}}),TL=se()({WIDE_VOLLEY_MASTERY:{name:"Wide Volley Mastery",level:72},BITE_MASTERY_II:{name:"Bite Mastery II",level:76},HEAVY_SHOT_MASTERY:{name:"Heavy Shot Mastery",level:76},ENHANCED_ARMYS_PAEON:{name:"Enhanced Army's Paeon",level:78},SOUL_VOICE:{name:"Soul Voice",level:80},QUICK_NOCK_MASTERY:{name:"Quick Nock Mastery",level:82},ENHANCED_BLOODLETTER:{name:"Enhanced Bloodletter",level:84},ENHANCED_APEX_ARROW:{name:"Enhanced Apex Arrow",level:86},ENHANCED_TROUBADOUR:{name:"Enhanced Troubadour",level:88},MINSTRELS_CODA:{name:"Minstrel's Coda",level:90},BLOODLETTER_MASTERY:{name:"Bloodletter Mastery",level:92},RANGED_MASTERY:{name:"Ranged Mastery",level:94},ENHANCED_BARRAGE:{name:"Enhanced Barrage",level:96},ENHANCED_RADIANT_FINALE:{name:"Enhanced Radiant Finale",level:100}}),SL={...AL,...wR,...RL},gL=se()({STANDARD_FINISH:{id:16003,name:"Standard Finish",label:{zh:""}},SINGLE_STANDARD_FINISH:{id:16191,name:"Single Standard Finish",label:{zh:""}},DOUBLE_STANDARD_FINISH:{id:16192,name:"Double Standard Finish",label:{zh:""}},FINISHING_MOVE:{id:36984,name:"Finishing Move",label:{zh:""}},LAST_DANCE:{id:36983,name:"Last Dance",label:{zh:""}},TECHNICAL_FINISH:{id:16004,name:"Technical Finish",label:{zh:""}},SINGLE_TECHNICAL_FINISH:{id:16193,name:"Single Technical Finish",label:{zh:""}},DOUBLE_TECHNICAL_FINISH:{id:16194,name:"Double Technical Finish",label:{zh:""}},TRIPLE_TECHNICAL_FINISH:{id:16195,name:"Triple Technical Finish",label:{zh:""}},QUADRUPLE_TECHNICAL_FINISH:{id:16196,name:"Quadruple Technical Finish",label:{zh:""}},TILLANA:{id:25790,name:"Tillana",label:{zh:""}},CASCADE:{id:15989,name:"Cascade",label:{zh:""}},FOUNTAIN:{id:15990,name:"Fountain",label:{zh:""}},REVERSE_CASCADE:{id:15991,name:"Reverse Cascade",label:{zh:""}},FOUNTAINFALL:{id:15992,name:"Fountainfall",label:{zh:""}},WINDMILL:{id:15993,name:"Windmill",label:{zh:""}},BLADESHOWER:{id:15994,name:"Bladeshower",label:{zh:""}},RISING_WINDMILL:{id:15995,name:"Rising Windmill",label:{zh:""}},BLOODSHOWER:{id:15996,name:"Bloodshower",label:{zh:""}},STANDARD_STEP:{id:15997,name:"Standard Step",label:{zh:""}},TECHNICAL_STEP:{id:15998,name:"Technical Step",label:{zh:""}},EMBOITE:{id:15999,name:"Emboite",label:{zh:""}},ENTRECHAT:{id:16e3,name:"Entrechat",label:{zh:""}},JETE:{id:16001,name:"Jete",label:{zh:""}},PIROUETTE:{id:16002,name:"Pirouette",label:{zh:""}},SABER_DANCE:{id:16005,name:"Saber Dance",label:{zh:""}},DANCE_OF_THE_DAWN:{id:36985,name:"Dance of the Dawn",label:{zh:""}},CLOSED_POSITION:{id:16006,name:"Closed Position",label:{zh:""}},FAN_DANCE:{id:16007,name:"Fan Dance",label:{zh:""}},FAN_DANCE_II:{id:16008,name:"Fan Dance II",label:{zh:""}},FAN_DANCE_III:{id:16009,name:"Fan Dance III",label:{zh:""}},FAN_DANCE_IV:{id:25791,name:"Fan Dance IV",label:{zh:""}},EN_AVANT:{id:16010,name:"En Avant",label:{zh:""}},DEVILMENT:{id:16011,name:"Devilment",label:{zh:""}},STARFALL_DANCE:{id:25792,name:"Starfall Dance",label:{zh:""}},SHIELD_SAMBA:{id:16012,name:"Shield Samba",label:{zh:""}},FLOURISH:{id:16013,name:"Flourish",label:{zh:""}},IMPROVISATION:{id:16014,name:"Improvisation",label:{zh:""}},IMPROVISED_FINISH:{id:25789,name:"Improvised Finish",label:{zh:""}},CURING_WALTZ:{id:16015,name:"Curing Waltz",label:{zh:""}},ENDING:{id:18073,name:"Ending",label:{zh:""}}}),IL=se()({cd_STANDARD_STEP:{name:"cd_StandardStep"},cd_TECHNICAL_STEP:{name:"cd_TechnicalStep"},cd_CLOSED_POSITION:{name:"cd_ClosedPosition"},cd_FAN_DANCE:{name:"cd_FanDance"},cd_FAN_DANCE_II:{name:"cd_FanDanceII",label:{zh:"CD"}},cd_FAN_DANCE_III:{name:"cd_FanDanceIII",label:{zh:"CD"}},cd_FAN_DANCE_IV:{name:"cd_FanDanceIV",label:{zh:"CD"}},cd_EN_AVANT:{name:"cd_EnAvant"},cd_DEVILMENT:{name:"cd_Devilment"},cd_SHIELD_SAMBA:{name:"cd_ShieldSamba"},cd_FLOURISH:{name:"cd_Flourish"},cd_IMPROVISATION:{name:"cd_Improvisation"},cd_IMPROVISED_FINISH:{name:"cd_ImprovisedFinish"},cd_CURING_WALTZ:{name:"cd_CuringWaltz"},cd_ENDING:{name:"cd_Ending"}}),_L=se()({ESPRIT_GAUGE:{name:"EspritGauge",label:{zh:""}},FEATHER_GAUGE:{name:"Feathers",label:{zh:""}},STANDARD_DANCE:{name:"Standard Dance",label:{zh:""}},TECHNICAL_DANCE:{name:"Technical Dance",label:{zh:""}}}),PR=se()({SILKEN_SYMMETRY:{name:"Silken Symmetry",label:{zh:""}},SILKEN_FLOW:{name:"Silken Flow",label:{zh:""}},FLOURISHING_SYMMETRY:{name:"Flourishing Symmetry",label:{zh:""}},FLOURISHING_FLOW:{name:"Flourishing Flow",label:{zh:""}},THREEFOLD_FAN_DANCE:{name:"Threefold Fan Dance",label:{zh:""}},FOURFOLD_FAN_DANCE:{name:"Fourfold Fan Dance",label:{zh:""}},FINISHING_MOVE_READY:{name:"Finishing Move Ready",label:{zh:""}},FLOURISHING_STARFALL:{name:"Flourishing Starfall",label:{zh:""}},STANDARD_STEP:{name:"Standard Step",label:{zh:""},mayNotBeCanceled:!0},TECHNICAL_STEP:{name:"Technical Step",label:{zh:""},mayNotBeCanceled:!0},LAST_DANCE_READY:{name:"Last Dance Ready",label:{zh:""}},DANCE_OF_THE_DAWN_READY:{name:"Dance of the Dawn Ready",label:{zh:""}},FLOURISHING_FINISH:{name:"Flourishing Finish",label:{zh:""}},SHIELD_SAMBA:{name:"Shield Samba",label:{zh:""}},IMPROVISATION:{name:"Improvisation",label:{zh:""},mayNotBeCanceled:!0},RISING_RHYTHM:{name:"Rising Rhythm",label:{zh:""},maximumStacks:4},IMPROVISATION_REGEN:{name:"Improvisation Regen",label:{zh:""}},IMPROVISED_FINISH:{name:"Improvised Finish",label:{zh:""}},DEVILMENT:{name:"Devilment",label:{zh:""}},TECHNICAL_FINISH:{name:"Technical Finish",label:{zh:""}},ESPRIT:{name:"Esprit",label:{zh:""},mayNotBeCanceled:!0},STANDARD_FINISH:{name:"Standard Finish",label:{zh:""}},CLOSED_POSITION:{name:"Closed Position",label:{zh:""},mayNotBeCanceled:!0},DANCE_PARTNER:{name:"Dance Partner",label:{zh:""}},STANDARD_FINISH_PARTNER:{name:"Standard Finish Partner",label:{zh:"buff"}},ESPRIT_PARTNER:{name:"Esprit Partner",label:{zh:"buff"}},ESPRIT_TECHNICAL:{name:"Esprit Technical",label:{zh:"buff"}}}),pL=se()({CASCADE_COMBO:{name:"CascadeCombo",label:{zh:""}},WINDMILL_COMBO:{name:"WindmillCombo",label:{zh:""}},STANDARD_BONUS:{name:"StandardBonus",label:{zh:""}},TECHNICAL_BONUS:{name:"TechnicalBonus",label:{zh:""}}}),NL=se()({ESPRIT:{name:"Esprit",level:76},ENHANCED_EN_AVANT_II:{name:"Enhanced En Avant II",level:78},ENHANCED_TECHNICAL_FINISH:{name:"Enhanced Technical Finish",level:82},ENHANCED_ESPRIT:{name:"Enhanced Esprit",level:84},ENHANCED_FLOURISH:{name:"Enhanced Flourish",level:86},ENHANCED_SHIELD_SAMBA:{name:"Enhanced Shield Samba",level:88},ENHANCED_DEVILMENT:{name:"Enhanced Devilment",level:90},ENHANCED_STANDARD_FINISH:{name:"Enhanced Standard Finish",level:92},DYNAMIC_DANCER:{name:"Dynamic Dancer",level:94},ENHANCED_FLOURISH_II:{name:"Enhanced Flourish II",level:96},ENHANCED_TECHNICAL_FINISH_II:{name:"Enhanced Technical Finish II",level:100}}),CL={..._L,...PR,...pL},bL=se()({PIERCING_TALON:{id:90,name:"Piercing Talon",label:{zh:"Piercing Talon"}},TRUE_THRUST:{id:75,name:"True Thrust",label:{zh:""}},RAIDEN_THRUST:{id:16479,name:"Raiden Thrust",label:{zh:""}},DISEMBOWEL:{id:87,name:"Disembowel",label:{zh:""}},SPIRAL_BLOW:{id:36955,name:"Spiral Blow",label:{zh:""}},CHAOS_THRUST:{id:88,name:"Chaos Thrust",label:{zh:""}},CHAOTIC_SPRING:{id:25772,name:"Chaotic Spring",label:{zh:""}},WHEELING_THRUST:{id:3556,name:"Wheeling Thrust",label:{zh:""}},VORPAL_THRUST:{id:78,name:"Vorpal Thrust",label:{zh:""}},LANCE_BARRAGE:{id:36954,name:"Lance Barrage",label:{zh:""}},FULL_THRUST:{id:84,name:"Full Thrust",label:{zh:""}},HEAVENS_THRUST:{id:25771,name:"Heavens' Thrust",label:{zh:""}},FANG_AND_CLAW:{id:3554,name:"Fang and Claw",label:{zh:""}},DRAKESBANE:{id:36952,name:"Drakesbane",label:{zh:""}},DOOM_SPIKE:{id:86,name:"Doom Spike",label:{zh:""}},DRACONIAN_FURY:{id:25770,name:"Draconian Fury",label:{zh:""}},SONIC_THRUST:{id:7397,name:"Sonic Thrust",label:{zh:""}},COERTHAN_TORMENT:{id:16477,name:"Coerthan Torment",label:{zh:""}},LIFE_SURGE:{id:83,name:"Life Surge",label:{zh:""}},LANCE_CHARGE:{id:85,name:"Lance Charge",label:{zh:""}},JUMP:{id:92,name:"Jump",label:{zh:""}},HIGH_JUMP:{id:16478,name:"High Jump",label:{zh:""}},MIRAGE_DIVE:{id:7399,name:"Mirage Dive",label:{zh:""}},DRAGONFIRE_DIVE:{id:96,name:"Dragonfire Dive",label:{zh:""}},RISE_OF_THE_DRAGON:{id:36953,name:"Rise of the Dragon",label:{zh:""}},BATTLE_LITANY:{id:3557,name:"Battle Litany",label:{zh:""}},WYRMWIND_THRUST:{id:25773,name:"Wyrmwind Thrust",label:{zh:""}},GEIRSKOGUL:{id:3555,name:"Geirskogul",label:{zh:""}},NASTROND:{id:7400,name:"Nastrond",label:{zh:""}},STARDIVER:{id:16480,name:"Stardiver",label:{zh:""}},STARCROSS:{id:36956,name:"Starcross",label:{zh:""}},ELUSIVE_JUMP:{id:94,name:"Elusive Jump",label:{zh:""}},WINGED_GLIDE:{id:36951,name:"Winged Glide",label:{zh:""}}}),OL=se()({cd_LIFE_SURGE:{name:"cd_LifeSurge"},cd_LANCE_CHARGE:{name:"cd_LanceCharge"},cd_JUMP:{name:"cd_Jump"},cd_HIGH_JUMP:{name:"cd_HighJump"},cd_ELUSIVE_JUMP:{name:"cd_ElusiveJump"},cd_WINGED_GLIDE:{name:"cd_WingedGlide"},cd_DRAGONFIRE_DIVE:{name:"cd_DragonfireDive"},cd_BATTLE_LITANY:{name:"cd_BattleLitany"},cd_GEIRSKOGUL:{name:"cd_Geirskogul"},cd_MIRAGE_DIVE:{name:"cd_MirageDive"},cd_NASTROND:{name:"cd_Nastrond"},cd_STARDIVER:{name:"cd_Stardiver"},cd_WYRMWIND_THRUST:{name:"cd_WyrmwindThrust"},cd_RISE_OF_THE_DRAGON:{name:"cd_RiseOfTheDragon"},cd_STARCROSS:{name:"cd_Starcross"}}),DL=se()({LIFE_OF_THE_DRAGON:{name:"Life of the Dragon",label:{zh:""}},FIRSTMINDS_FOCUS:{name:"Firstminds' Focus",label:{zh:""}}}),GR=se()({LIFE_SURGE:{name:"Life Surge",label:{zh:""}},ENHANCED_PIERCING_TALON:{name:"Enhanced Piercing Talon",label:{zh:""}},POWER_SURGE:{name:"Power Surge",label:{zh:""}},LANCE_CHARGE:{name:"Lance Charge",label:{zh:""}},DIVE_READY:{name:"Dive Ready",label:{zh:""}},CHAOS_THRUST_DOT:{name:"Chaos Thrust DoT",label:{zh:""}},CHAOTIC_SPRING_DOT:{name:"Chaotic Spring DoT",label:{zh:""}},DRAGONS_FLIGHT:{name:"Dragon's Flight",label:{zh:""}},BATTLE_LITANY:{name:"Battle Litany",label:{zh:""}},NASTROND_READY:{name:"Nastrond Ready",label:{zh:""}},DRACONIAN_FIRE:{name:"Draconian Fire",label:{zh:""}},STARCROSS_READY:{name:"Starcross Ready",label:{zh:""}}}),yL=se()({DRG_CHAOS_COMBO_TRACKER:{name:"DRG Chaos Combo",label:{zh:""}},DRG_HEAVENS_COMBO_TRACKER:{name:"DRG Heavens Combo",label:{zh:""}},DRG_AOE_COMBO_TRACKER:{name:"DRG AOE Combo",label:{zh:"AOE"}}}),vL=se()({JUMP_MASTERY:{name:"Jump Mastery",level:74},LANCE_MASTERY:{name:"Lance Mastery",level:76},ENHANCED_COERTHAN_TORMENT:{name:"Enhanced Coerthan Torment",level:82},ENHANCED_WINGED_GLIDE:{name:"Enhanced Winged Glide",level:84},LANCE_MASTERY_II:{name:"Lance Mastery II",level:86},ENHANCED_LIFE_SURGE:{name:"Enhanced Life Surge",level:88},LANCE_MASTERY_III:{name:"Lance Mastery III",level:90},ENHANCED_DRAGONFIRE_DIVE:{name:"Enhanced Dragonfire Dive",level:92},MELEE_MASTERY_DRG:{name:"Melee Mastery DRG",level:94},LANCE_MASTERY_IV:{name:"Lance Mastery IV",level:96},ENHANCED_STARDIVER:{name:"Enhanced Stardiver",level:100}}),ML={...DL,...GR,...yL},LL=se()({HARD_SLASH:{id:3617,name:"Hard Slash",label:{zh:""}},SYPHON_STRIKE:{id:3623,name:"Syphon Strike",label:{zh:""}},UNLEASH:{id:3621,name:"Unleash",label:{zh:""}},GRIT:{id:3629,name:"Grit",label:{zh:""}},RELEASE_GRIT:{id:32067,name:"Release Grit",label:{zh:""}},UNMEND:{id:3624,name:"Unmend",label:{zh:""}},SOULEATER:{id:3632,name:"Souleater",label:{zh:""}},FLOOD_OF_DARKNESS:{name:"Flood of Darkness",label:{zh:""}},BLOOD_WEAPON:{id:3625,name:"Blood Weapon",label:{zh:""}},SHADOW_WALL:{id:3636,name:"Shadow Wall",label:{zh:""}},STALWART_SOUL:{id:16468,name:"Stalwart Soul",label:{zh:""}},EDGE_OF_DARKNESS:{name:"Edge of Darkness",label:{zh:""}},DARK_MIND:{id:3634,name:"Dark Mind",label:{zh:""}},LIVING_DEAD:{id:3638,name:"Living Dead",label:{zh:""}},SALTED_EARTH:{id:3639,name:"Salted Earth",label:{zh:""}},SHADOWSTRIDE:{id:36926,name:"Shadowstride",label:{zh:""}},ABYSSAL_DRAIN:{id:3641,name:"Abyssal Drain",label:{zh:""}},CARVE_AND_SPIT:{id:3643,name:"Carve and Spit",label:{zh:""}},BLOODSPILLER:{id:7392,name:"Bloodspiller",label:{zh:""}},QUIETUS:{id:7391,name:"Quietus",label:{zh:""}},DARK_MISSIONARY:{id:16471,name:"Dark Missionary",label:{zh:""}},DELIRIUM:{id:7390,name:"Delirium",label:{zh:""}},THE_BLACKEST_NIGHT:{id:7393,name:"The Blackest Night",label:{zh:""}},THE_BLACKEST_NIGHT_POP:{name:"Pop The Blackest Night",label:{zh:""}},FLOOD_OF_SHADOW:{id:16469,name:"Flood of Shadow",label:{zh:""}},EDGE_OF_SHADOW:{id:16470,name:"Edge of Shadow",label:{zh:""}},LIVING_SHADOW:{id:16472,name:"Living Shadow",label:{zh:""}},OBLATION:{id:25754,name:"Oblation",label:{zh:""}},SALT_AND_DARKNESS:{id:25755,name:"Salt and Darkness",label:{zh:""}},SHADOWBRINGER:{id:25757,name:"Shadowbringer",label:{zh:""}},SHADOWED_VIGIL:{id:36927,name:"Shadowed Vigil",label:{zh:""}},SCARLET_DELIRIUM:{id:36928,name:"Scarlet Delirium",label:{zh:""}},COMEUPPANCE:{id:36929,name:"Comeuppance",label:{zh:""}},TORCLEAVER:{id:36930,name:"Torcleaver",label:{zh:""}},IMPALEMENT:{id:36931,name:"Impalement",label:{zh:""}},DISESTEEM:{id:36932,name:"Disesteem",label:{zh:""}},ABYSSAL_DRAIN_PET:{id:17904,name:"Abyssal Drain (Esteem)",label:{zh:""}},SHADOWSTRIDE_PET:{id:38512,name:"Shadowstride (Esteem)",label:{zh:""}},SHADOWBRINGER_PET:{id:25881,name:"Shadowbringer (Esteem)",label:{zh:""}},EDGE_OF_SHADOW_PET:{id:17908,name:"Edge of Shadow (Esteem)",label:{zh:""}},FLOOD_OF_SHADOW_PET:{name:"Flood of Shadow (Esteem)",label:{zh:""}},BLOODSPILLER_PET:{id:17909,name:"Bloodspiller (Esteem)",label:{zh:""}},CARVE_AND_SPIT_PET:{name:"Carve and Spit (Esteem)",label:{zh:""}},DISESTEEM_PET:{id:36933,name:"Disesteem (Esteem)",label:{zh:""}}}),xL=se()({cd_GRIT:{name:"cd_Grit"},cd_RELEASE_GRIT:{name:"cd_ReleaseGrit"},cd_FLOOD_OF_DARKNESS:{name:"cd_FloodOfDarkness"},cd_SHADOW_WALL:{name:"cd_ShadowWall"},cd_DARK_MIND:{name:"cd_DarkMind"},cd_LIVING_DEAD:{name:"cd_LivingDead"},cd_SALTED_EARTH:{name:"cd_SaltedEarth"},cd_SHADOWSTRIDE:{name:"cd_Shadowstride"},cd_ABYSSAL_DRAIN:{name:"cd_AbyssalDrain"},cd_DARK_MISSIONARY:{name:"cd_DarkMissionary"},cd_DELIRIUM:{name:"cd_Delirium"},cd_THE_BLACKEST_NIGHT:{name:"cd_TheBlackestNight"},cd_THE_BLACKEST_NIGHT_POP:{name:"cd_TheBlackestNightPop"},cd_LIVING_SHADOW:{name:"cd_LivingShadow"},cd_OBLATION:{name:"cd_Oblation"},cd_SALT_AND_DARKNESS:{name:"cd_SaltAndDarkness"},cd_SHADOWBRINGER:{name:"cd_Shadowbringer"},cd_POP_TBN:{name:"cd_PopTBN"}}),HL=se()({DARKSIDE:{name:"Darkside",label:{zh:""}},BLOOD_GAUGE:{name:"Blood Gauge",label:{zh:""}}}),BR=se()({SALTED_EARTH:{name:"Salted Earth",mayBeToggled:!0,label:{zh:""}},GRIT:{name:"Grit",label:{zh:""}},SHADOW_WALL:{name:"Shadow Wall",label:{zh:""}},DARK_MIND:{name:"Dark Mind",label:{zh:""}},LIVING_DEAD:{name:"Living Dead",label:{zh:""}},WALKING_DEAD:{name:"Walking Dead",label:{zh:""}},UNDEAD_REBIRTH:{name:"Undead Rebirth",label:{zh:""}},DARK_MISSIONARY:{name:"Dark Missionary",label:{zh:""}},DELIRIUM:{name:"Delirium",maximumStacks:3,label:{zh:""}},BLOOD_WEAPON:{name:"Blood Weapon",maximumStacks:3,label:{zh:""}},BLACKEST_NIGHT:{name:"Blackest Night",label:{zh:""}},SCORN:{name:"Scorn",label:{zh:""}},OBLATION:{name:"Oblation",label:{zh:""}},SHADOWED_VIGIL:{name:"Shadowed Vigil",label:{zh:""}},VIGILANT:{name:"Vigilant",label:{zh:""}}}),kL=se()({DRK_COMBO_TRACKER:{name:"DRK Combo",label:{zh:""}},DRK_AOE_COMBO_TRACKER:{name:"DRK AOE Combo",label:{zh:"AOE"}},DRK_DELIRIUM_COMBO_TRACKER:{name:"DRK Delirium Combo",label:{zh:""}},DARK_ARTS:{name:"Dark Arts",label:{zh:""}},ESTEEM_TRACKER:{name:"Esteem Attacks",label:{zh:""},isPetTracker:!0}}),UL=se()({DAKRSIDE_MASTERY:{name:"Darkside Mastery",level:74},ENHANCED_UNMEND:{name:"Enhanced Unmend",level:84},ENHANCED_LIVING_SHADOW:{name:"Enhanced Living Shadow",level:88},ENHANCED_LIVING_SHADOW_II:{name:"Enhanced Living Shadow II",level:90},SHADOW_WALL_MASTERY:{name:"Shadow Wall Mastery",level:92},ENHANCED_DELIRIUM:{name:"Enhanced Delirium",level:96},ENHANCED_LIVING_SHADOW_III:{name:"Enhanced Living Shadow III",level:100}}),wL={...HL,...BR,...kL},PL=se()({LIGHTNING_SHOT:{id:16143,name:"Lightning Shot",label:{zh:""}},KEEN_EDGE:{id:16137,name:"Keen Edge",label:{zh:""}},BRUTAL_SHELL:{id:16139,name:"Brutal Shell",label:{zh:""}},SOLID_BARREL:{id:16145,name:"Solid Barrel",label:{zh:""}},DEMON_SLICE:{id:16141,name:"Demon Slice",label:{zh:""}},DEMON_SLAUGHTER:{id:16149,name:"Demon Slaughter",label:{zh:""}},BURST_STRIKE:{id:16162,name:"Burst Strike",label:{zh:""}},FATED_CIRCLE:{id:16163,name:"Fated Circle",label:{zh:""}},BLOODFEST:{id:16164,name:"Bloodfest",label:{zh:""}},NO_MERCY:{id:16138,name:"No Mercy",label:{zh:""}},SONIC_BREAK:{id:16153,name:"Sonic Break",label:{zh:""}},GNASHING_FANG:{id:16146,name:"Gnashing Fang",label:{zh:""}},SAVAGE_CLAW:{id:16147,name:"Savage Claw",label:{zh:""}},WICKED_TALON:{id:16150,name:"Wicked Talon",label:{zh:""}},DOUBLE_DOWN:{id:25760,name:"Double Down",label:{zh:""}},REIGN_OF_BEASTS:{id:36937,name:"Reign of Beasts",label:{zh:""}},NOBLE_BLOOD:{id:36938,name:"Noble Blood",label:{zh:""}},LION_HEART:{id:36939,name:"Lion Heart",label:{zh:""}},CONTINUATION:{id:16155,name:"Continuation",label:{zh:""}},HYPERVELOCITY:{id:25759,name:"Hypervelocity",label:{zh:""}},FATED_BRAND:{id:36936,name:"Fated Brand",label:{zh:""}},JUGULAR_RIP:{id:16156,name:"Jugular Rip",label:{zh:""}},ABDOMEN_TEAR:{id:16157,name:"Abdomen Tear",label:{zh:""}},EYE_GOUGE:{id:16158,name:"Eye Gouge",label:{zh:""}},DANGER_ZONE:{id:16144,name:"Danger Zone",label:{zh:""}},BLASTING_ZONE:{id:16165,name:"Blasting Zone",label:{zh:""}},BOW_SHOCK:{id:16159,name:"Bow Shock",label:{zh:""}},TRAJECTORY:{id:36934,name:"Trajectory",label:{zh:""}},HEART_OF_STONE:{id:16161,name:"Heart of Stone",label:{zh:""}},HEART_OF_CORUNDUM:{id:25758,name:"Heart of Corundum",label:{zh:""}},SUPERBOLIDE:{id:16152,name:"Superbolide",label:{zh:""}},CAMOUFLAGE:{id:16140,name:"Camouflage",label:{zh:""}},NEBULA:{id:16148,name:"Nebula",label:{zh:""}},GREAT_NEBULA:{id:36935,name:"Great Nebula",label:{zh:""}},HEART_OF_LIGHT:{id:16160,name:"Heart of Light",label:{zh:""}},AURORA:{id:16151,name:"Aurora",label:{zh:""}},ROYAL_GUARD:{id:16142,name:"Royal Guard",label:{zh:""}},RELEASE_ROYAL_GUARD:{id:32068,name:"Release Royal Guard",label:{zh:""}}}),GL=se()({cd_NO_MERCY:{name:"cd_NoMercy"},cd_BLOODFEST:{name:"cd_Bloodfest"},cd_CAMOUFLAGE:{name:"cd_Camouflage"},cd_ROYAL_GUARD:{name:"cd_RoyalGuard"},cd_RELEASE_ROYAL_GUARD:{name:"cd_ReleaseRoyalGuard"},cd_DANGER_ZONE:{name:"cd_DangerZone"},cd_BLASTING_ZONE:{name:"cd_BlastingZone"},cd_NEBULA:{name:"cd_Nebula"},cd_GREAT_NEBULA:{name:"cd_GreatNebula"},cd_AURORA:{name:"cd_Aurora"},cd_SUPERBOLIDE:{name:"cd_Superbolide"},cd_TRAJECTORY:{name:"cd_Trajectory"},cd_GNASHING_FANG:{name:"cd_GnashingFang"},cd_BOW_SHOCK:{name:"cd_BowShock"},cd_HEART_OF_LIGHT:{name:"cd_HeartOfLight"},cd_HEART_OF_STONE:{name:"cd_HeartOfStone"},cd_HEART_OF_CORUNDUM:{name:"cd_HeartOfCorundum"},cd_DOUBLE_DOWN:{name:"cd_DoubleDown"},cd_CONTINUATION:{name:"cd_Continuation"},cd_HYPERVELOCITY:{name:"cd_Hypervelocity"},cd_FATED_BRAND:{name:"cd_FatedBrand"},cd_JUGULAR_RIP:{name:"cd_JugularRip"},cd_ABDOMEN_TEAR:{name:"cd_AbdomenTear"},cd_EYE_GOUGE:{name:"cd_EyeGouge"}}),BL=se()({POWDER_GAUGE:{name:"Powder Gauge",label:{zh:""}}}),FR=se()({NO_MERCY:{name:"No Mercy",label:{zh:""}},AURORA:{name:"Aurora",label:{zh:""}},BOW_SHOCK_DOT:{name:"Bow Shock DoT",label:{zh:""}},CAMOUFLAGE:{name:"Camouflage",label:{zh:""}},HEART_OF_CORUNDUM:{name:"Heart of Corundum",label:{zh:""}},CLARITY_OF_CORUNDUM:{name:"Clarity of Corundum",label:{zh:""}},CATHARSIS_OF_CORUNDUM:{name:"Catharsis of Corundum",label:{zh:""}},NEBULA:{name:"Nebula",label:{zh:""}},GREAT_NEBULA:{name:"Great Nebula",label:{zh:""}},HEART_OF_LIGHT:{name:"Heart of Light",label:{zh:""}},HEART_OF_STONE:{name:"Heart of Stone",label:{zh:""}},READY_TO_BLAST:{name:"Ready to Blast",label:{zh:""}},READY_TO_BREAK:{name:"Ready to Break",label:{zh:""}},READY_TO_GOUGE:{name:"Ready to Gouge",label:{zh:""}},READY_TO_RAZE:{name:"Ready to Raze",label:{zh:""}},READY_TO_REIGN:{name:"Ready to Reign",label:{zh:""}},READY_TO_RIP:{name:"Ready to Rip",label:{zh:""}},READY_TO_TEAR:{name:"Ready to Tear",label:{zh:""}},ROYAL_GUARD:{name:"Royal Guard",label:{zh:""}},SONIC_BREAK_DOT:{name:"Sonic Break DoT",label:{zh:""}},SUPERBOLIDE:{name:"Superbolide",label:{zh:""}},BRUTAL_SHELL:{name:"Brutal Shell",label:{zh:""}},BLOODFEST:{name:"Bloodfest",label:{zh:""}}}),FL=se()({GNB_COMBO_TRACKER:{name:"GNB Combo",label:{zh:""}},GNB_AOE_COMBO_TRACKER:{name:"GNB AOE Combo",label:{zh:"AOE"}},GNB_GNASHING_COMBO_TRACKER:{name:"GNB Gnashing Combo",label:{zh:""}},GNB_REIGN_COMBO_TRACKER:{name:"GNB Reign Combo",label:{zh:""}}}),jL=se()({DANGER_ZONE_MASTERY:{name:"Danger Zone Mastery",level:80},HEART_OF_STONE_MASTERY:{name:"Heart Of Stone Mastery",level:82},ENHANCED_AURORA:{name:"Enhanced Aurora",level:84},ENHANCED_CONTINUATION:{name:"Enhanced Continuation",level:86},CARTRIDGE_CHARGE_II:{name:"Cartridge Charge II",level:88},NEBULA_MASTERY:{name:"Nebula Mastery",level:92},ENHANCED_CONTINUATION_II:{name:"Enhanced Continuation II",level:96},ENHANCED_BLOODFEST:{name:"Enhanced Bloodfest",level:100}}),zL={...BL,...FR,...FL},YL=se()({HEATED_SPLIT_SHOT:{id:7411,name:"Heated Split Shot",label:{zh:""}},HEATED_SLUG_SHOT:{id:7412,name:"Heated Slug Shot",label:{zh:""}},HEATED_CLEAN_SHOT:{id:7413,name:"Heated Clean Shot",label:{zh:""}},DRILL:{id:16498,name:"Drill",label:{zh:""}},HOT_SHOT:{id:2872,name:"Hot Shot",label:{zh:""}},AIR_ANCHOR:{id:16500,name:"Air Anchor",label:{zh:""}},CHAIN_SAW:{id:25788,name:"Chain Saw",label:{zh:""}},EXCAVATOR:{id:36981,name:"Excavator",label:{zh:""}},GAUSS_ROUND:{id:2874,name:"Gauss Round",label:{zh:""}},DOUBLE_CHECK:{id:36979,name:"Double Check",label:{zh:""}},RICOCHET:{id:2890,name:"Ricochet",label:{zh:""}},CHECKMATE:{id:36980,name:"Checkmate",label:{zh:""}},BLAZING_SHOT:{id:36978,name:"Blazing Shot",label:{zh:""}},WILDFIRE:{id:2878,name:"Wildfire",label:{zh:""}},DETONATOR:{id:16766,name:"Detonator",label:{zh:""}},HYPERCHARGE:{id:17209,name:"Hypercharge",label:{zh:""}},ROOK_AUTOTURRET:{id:2864,name:"Rook Autoturret",label:{zh:""}},ROOK_OVERDRIVE:{id:7415,name:"Rook Overdrive",label:{zh:""}},AUTOMATON_QUEEN:{id:16501,name:"Automaton Queen",label:{zh:""}},QUEEN_OVERDRIVE:{id:16502,name:"Queen Overdrive",label:{zh:""}},BARREL_STABILIZER:{id:7414,name:"Barrel Stabilizer",label:{zh:""}},REASSEMBLE:{id:2876,name:"Reassemble",label:{zh:""}},FULL_METAL_FIELD:{id:36982,name:"Full Metal Field",label:{zh:""}},SPREAD_SHOT:{id:2870,name:"Spread Shot",label:{zh:""}},SCATTERGUN:{id:25786,name:"Scattergun",label:{zh:""}},AUTO_CROSSBOW:{id:16497,name:"Auto Crossbow",label:{zh:""}},BIOBLASTER:{id:16499,name:"Bioblaster",label:{zh:""}},FLAMETHROWER:{id:7418,name:"Flamethrower",label:{zh:""}},DISMANTLE:{id:2887,name:"Dismantle",label:{zh:""}},TACTICIAN:{id:16889,name:"Tactician",label:{zh:""}},VOLLEY_FIRE:{id:2891,name:"Volley Fire",label:{zh:""}},ARM_PUNCH:{id:16504,name:"Arm Punch",label:{zh:""}},ROOK_OVERLOAD:{id:7416,name:"Rook Overload",label:{zh:""}},PILE_BUNKER:{id:16503,name:"Pile Bunker",label:{zh:""}},CROWNED_COLLIDER:{id:25787,name:"Crowned Collider",label:{zh:""}}}),KL=se()({cd_REASSEMBLE:{name:"cd_Reassemble"},cd_DRILL:{name:"cd_Drill"},cd_CHECKMATE:{name:"cd_Checkmate"},cd_DOUBLE_CHECK:{name:"cd_DoubleCheck"},cd_AIR_ANCHOR:{name:"cd_AirAnchor"},cd_CHAINSAW:{name:"cd_Chainsaw",label:{zh:"CD"}},cd_BARREL_STABILIZER:{name:"cd_BarrelStabilizer"},cd_WILDFIRE:{name:"cd_Wildfire"},cd_QUEEN:{name:"cd_Queen",label:{zh:"CD"}},cd_OVERDRIVE:{name:"cd_Overdrive",label:{zh:"CD/"}},cd_DISMANTLE:{name:"cd_Dismantle"},cd_TACTICIAN:{name:"cd_Tactician"},cd_HYPERCHARGE:{name:"cd_Hypercharge"},cd_DETONATOR:{name:"cd_Detonator"},cd_FLAMETHROWER:{name:"cd_Flamethrower"}}),VL=se()({HEAT_GAUGE:{name:"Heat",label:{zh:""}},BATTERY_GAUGE:{name:"Battery",label:{zh:""}}}),jR=se()({REASSEMBLED:{name:"Reassembled",label:{zh:""}},OVERHEATED:{name:"Overheated",label:{zh:""},maximumStacks:5},WILDFIRE:{name:"Wildfire",label:{zh:""}},WILDFIRE_SELF:{name:"Wildfire Self",label:{zh:""}},FLAMETHROWER:{name:"Flamethrower",label:{zh:""}},BIOBLASTER:{name:"Bioblaster",label:{zh:"dot"}},TACTICIAN:{name:"Tactician",label:{zh:"buff"}},HYPERCHARGED:{name:"Hypercharged",label:{zh:""}},EXCAVATOR_READY:{name:"Excavator Ready",label:{zh:""}},FULL_METAL_MACHINIST:{name:"Full Metal Machinist",label:{zh:""}}}),WL=se()({HEAT_COMBO:{name:"Heat Combo",label:{zh:""}},QUEEN:{name:"Queen",label:{zh:""},isPetTracker:!0},QUEEN_PUNCHES:{name:"QueenPunches",label:{zh:""}},QUEEN_FINISHERS:{name:"QueenFinishers",label:{zh:""}},BATTERY_BONUS:{name:"BatteryBonus",label:{zh:""}},WILDFIRE_HITS:{name:"WildfireHits",label:{zh:""}}}),XL=se()({CHARGED_ACTION_MASTERY:{name:"Charged Action Mastery",level:74},HOT_SHOT_MASTERY:{name:"Hot Shot Mastery",level:76},ENHANCED_WILD_FIRE:{name:"Enhanced Wildfire",level:88},PROMOTION:{name:"Promotion",level:80},SPREAD_SHOT_MASTERY:{name:"Spread Shot Mastery",level:82},ENHANCED_REASSEMBLE:{name:"Enhanced Reassemble",level:84},MARKSMANS_MASTERY:{name:"Marksman's Mastery",level:84},QUEENS_GAMBIT:{name:"Queen's Gambit",level:86},ENHANCED_TACTICIAN:{name:"Enhanced Tactician",level:88},DOUBLE_BARREL_MASTERY:{name:"Double-Barrel Mastery",level:92},ENHANCED_MULTI_WEAPON:{name:"Enhanced Multiweapon",level:94},MARKSMANS_MASTERY_II:{name:"Marksman's Mastery II",level:94},ENHANCED_MULTI_WEAPON_II:{name:"Enhanced Multiweapon II",level:96},ENHANCED_BARREL_STABILIZER:{name:"Enhanced Barrel Stabilizer",level:100}}),qL={...VL,...jR,...WL},ZL=se()({BOOTSHINE:{id:53,name:"Bootshine",label:{zh:"",ja:""}},TRUE_STRIKE:{id:54,name:"True Strike",label:{zh:"",ja:""}},SNAP_PUNCH:{id:56,name:"Snap Punch",label:{zh:"",ja:""}},TWIN_SNAKES:{id:61,name:"Twin Snakes",label:{zh:"",ja:""}},ARM_OF_THE_DESTROYER:{id:62,name:"Arm of the Destroyer",label:{zh:"",ja:""}},DEMOLISH:{id:66,name:"Demolish",label:{zh:"",ja:""}},ROCKBREAKER:{id:70,name:"Rockbreaker",label:{zh:"",ja:""}},THUNDERCLAP:{id:25762,name:"Thunderclap",label:{zh:"",ja:""}},HOWLING_FIST:{id:25763,name:"Howling Fist",label:{zh:"",ja:""}},MANTRA:{id:65,name:"Mantra",label:{zh:"",ja:""}},FOUR_POINT_FURY:{id:16473,name:"Four-point Fury",label:{zh:"",ja:""}},DRAGON_KICK:{id:74,name:"Dragon Kick",label:{zh:"",ja:""}},PERFECT_BALANCE:{id:69,name:"Perfect Balance",label:{zh:"",ja:""}},FORM_SHIFT:{id:4262,name:"Form Shift",label:{zh:"",ja:""}},FORBIDDEN_MEDITATION:{id:36942,name:"Forbidden Meditation",label:{zh:"",ja:""}},THE_FORBIDDEN_CHAKRA:{id:3547,name:"The Forbidden Chakra",label:{zh:"",ja:""}},MASTERFUL_BLITZ:{id:25764,name:"Masterful Blitz",label:{zh:"",ja:""}},TORNADO_KICK:{id:3543,name:"Tornado Kick",label:{zh:"",ja:""}},ELIXIR_FIELD:{id:3545,name:"Elixir Field",label:{zh:"",ja:""}},CELESTIAL_REVOLUTION:{id:25765,name:"Celestial Revolution",label:{zh:"",ja:""}},FLINT_STRIKE:{id:25882,name:"Flint Strike",label:{zh:"",ja:""}},RIDDLE_OF_EARTH:{id:7394,name:"Riddle of Earth",label:{zh:"",ja:""}},EARTHS_REPLY:{id:36944,name:"Earth's Reply",label:{zh:"",ja:""}},RIDDLE_OF_FIRE:{id:7395,name:"Riddle of Fire",label:{zh:"",ja:""}},BROTHERHOOD:{id:7396,name:"Brotherhood",label:{zh:"",ja:""}},RIDDLE_OF_WIND:{id:25766,name:"Riddle of Wind",label:{zh:"",ja:""}},INSPIRITED_MEDITATION:{id:36941,name:"Inspirited Meditation",label:{zh:"",ja:""}},ENLIGHTENED_MEDITATION:{id:36943,name:"Enlightened Meditation",label:{zh:"",ja:""}},ENLIGHTENMENT:{id:16474,name:"Enlightenment",label:{zh:"",ja:""}},SIX_SIDED_STAR:{id:16476,name:"Six-sided Star",label:{zh:"",ja:""}},SHADOW_OF_THE_DESTROYER:{id:25767,name:"Shadow of the Destroyer",label:{zh:"",ja:""}},RISING_PHOENIX:{id:25768,name:"Rising Phoenix",label:{zh:"",ja:""}},PHANTOM_RUSH:{id:25769,name:"Phantom Rush",label:{zh:"",ja:""}},LEAPING_OPO:{id:36945,name:"Leaping Opo",label:{zh:"",ja:""}},RISING_RAPTOR:{id:36946,name:"Rising Raptor",label:{zh:"",ja:""}},POUNCING_COEURL:{id:36947,name:"Pouncing Coeurl",label:{zh:"",ja:""}},ELIXIR_BURST:{id:36948,name:"Elixir Burst",label:{zh:"",ja:""}},WINDS_REPLY:{id:36949,name:"Wind's Reply",label:{zh:"",ja:""}},FIRES_REPLY:{id:36950,name:"Fire's Reply",label:{zh:"",ja:""}}}),QL=se()({cd_THUNDERCLAP:{name:"cd_Thunderclap"},cd_MANTRA:{name:"cd_Mantra"},cd_PERFECT_BALANCE:{name:"cd_PerfectBalance"},cd_ENLIGHTENMENT:{name:"cd_Enlightenment"},cd_THE_FORBIDDEN_CHAKRA:{name:"cd_TheForbiddenChakra"},cd_RIDDLE_OF_EARTH:{name:"cd_RiddleOfEarth"},cd_EARTHS_REPLY:{name:"cd_EarthsReply"},cd_RIDDLE_OF_FIRE:{name:"cd_RiddleOfFire"},cd_BROTHERHOOD:{name:"cd_Brotherhood"},cd_RIDDLE_OF_WIND:{name:"cd_RiddleOfWind"}}),$L=se()({CHAKRA:{name:"Chakra",label:{zh:""}},BEAST_CHAKRA:{name:"Beast Chakra",label:{zh:""}},BEAST_CHAKRA_TIMER:{name:"Beast Timer",label:{zh:""}},NADI:{name:"Nadi",label:{zh:"/"}},LUNAR_NADI:{name:"Lunar Nadi",label:{zh:""}},SOLAR_NADI:{name:"Solar Nadi",label:{zh:""}},OPO_OPOS_FURY:{name:"Opo-opo's Fury",label:{zh:""}},RAPTORS_FURY:{name:"Raptor's Fury",label:{zh:""}},COEURLS_FURY:{name:"Coeurl's Fury",label:{zh:""}}}),zR=se()({MANTRA:{name:"Mantra",label:{zh:""}},OPO_OPO_FORM:{name:"Opo-opo Form",label:{zh:""}},RAPTOR_FORM:{name:"Raptor Form",label:{zh:""}},COEURL_FORM:{name:"Coeurl Form",label:{zh:""}},PERFECT_BALANCE:{name:"Perfect Balance",maximumStacks:3,label:{zh:""}},FORMLESS_FIST:{name:"Formless Fist",label:{zh:""}},RIDDLE_OF_EARTH:{name:"Riddle of Earth",label:{zh:""}},EARTHS_RESOLVE:{name:"Earth's Resolve",label:{zh:""}},EARTHS_RUMINATION:{name:"Earth's Rumination",label:{zh:""}},RIDDLE_OF_FIRE:{name:"Riddle of Fire",label:{zh:""}},FIRES_RUMINATION:{name:"Fire's Rumination",label:{zh:""}},BROTHERHOOD:{name:"Brotherhood",label:{zh:""}},MEDITATIVE_BROTHERHOOD:{name:"Meditative Brotherhood",label:{zh:""}},RIDDLE_OF_WIND:{name:"Riddle of Wind",label:{zh:""}},WINDS_RUMINATION:{name:"Wind's Rumination",label:{zh:""}},SIX_SIDED_STAR:{name:"Six-sided Star",label:{zh:""}}}),JL=se()({BEAST_CHAKRA_1:{name:"Beast Chakra 1",label:{zh:"1"}},BEAST_CHAKRA_2:{name:"Beast Chakra 2",label:{zh:"2"}},BEAST_CHAKRA_3:{name:"Beast Chakra 3",label:{zh:"3"}}}),e1=se()({DEEP_MEDITATION_II:{name:"Deep Meditation II",level:74},HOWLING_FIST_MASTERY:{name:"Howling Fist Mastery",level:74},ENHANCED_GREASED_LIGHTNING_III:{name:"Enhanced Greased Lightning III",level:76},ARM_OF_THE_DESTROYER_MASTERY:{name:"Arm of the Destroyer Mastery",level:82},ENHANCED_THUNDERCLAP:{name:"Enhanced Thunderclap",level:84},MELEE_MASTERY_MNK:{name:"Melee Mastery MNK",level:84},FLINT_STRIKE_MASTERY:{name:"Flint Strike Mastery",level:86},ENHANCED_BROTHERHOOD:{name:"Enhanced Brotherhood",level:88},TORNADO_KICK_MASTERY:{name:"Tornado Kick Mastery",level:90},BEAST_CHAKRA_MASTERY:{name:"Beast Chakra Mastery",level:92},MELEE_MASTERY_II_MNK:{name:"Melee Mastery II MNK",level:94},ENHANCED_RIDDLE_OF_WIND:{name:"Enhanced Riddle of Wind",level:96},ENHANCED_RIDDLE_OF_FIRE:{name:"Enhanced Riddle of Fire",level:100}}),QN={...$L,...zR,...JL},t1=se()({SPINNING_EDGE:{id:2240,name:"Spinning Edge",label:{zh:""}},SHADE_SHIFT:{id:2241,name:"Shade Shift",label:{zh:""}},GUST_SLASH:{id:2242,name:"Gust Slash",label:{zh:""}},HIDE:{id:2245,name:"Hide",label:{zh:""}},THROWING_DAGGER:{id:2247,name:"Throwing Dagger",label:{zh:""}},TRICK_ATTACK:{id:2258,name:"Trick Attack",label:{zh:""}},AEOLIAN_EDGE:{id:2255,name:"Aeolian Edge",label:{zh:""}},TEN:{id:2259,name:"Ten",label:{zh:""}},NINJUTSU:{id:2260,name:"Ninjutsu",label:{zh:""}},CHI:{id:2261,name:"Chi",label:{zh:""}},DEATH_BLOSSOM:{id:2254,name:"Death Blossom",label:{zh:""}},SHUKUCHI:{id:2262,name:"Shukuchi",label:{zh:""}},JIN:{id:2263,name:"Jin",label:{zh:""}},KASSATSU:{id:2264,name:"Kassatsu",label:{zh:""}},HAKKE_MUJINSATSU:{id:16488,name:"Hakke Mujinsatsu",label:{zh:""}},ARMOR_CRUSH:{id:3563,name:"Armor Crush",label:{zh:""}},DREAM_WITHIN_A_DREAM:{id:3566,name:"Dream Within a Dream",label:{zh:""}},HELLFROG_MEDIUM:{id:7401,name:"Hellfrog Medium",label:{zh:""}},DOKUMORI:{id:36957,name:"Dokumori",label:{zh:""}},BHAVACAKRA:{id:7402,name:"Bhavacakra",label:{zh:""}},TEN_CHI_JIN:{id:7403,name:"Ten Chi Jin",label:{zh:""}},MEISUI:{id:16489,name:"Meisui",label:{zh:""}},BUNSHIN:{id:16493,name:"Bunshin",label:{zh:""}},PHANTOM_KAMAITACHI:{id:25774,name:"Phantom Kamaitachi",label:{zh:""}},FORKED_RAIJU:{id:25777,name:"Forked Raiju",label:{zh:""}},FLEETING_RAIJU:{id:25778,name:"Fleeting Raiju",label:{zh:""}},KUNAIS_BANE:{id:36958,name:"Kunai's Bane",label:{zh:""}},DEATHFROG_MEDIUM:{id:36959,name:"Deathfrog Medium",label:{zh:""}},ZESHO_MEPPO:{id:36960,name:"Zesho Meppo",label:{zh:""}},TENRI_JINDO:{id:36961,name:"Tenri Jindo",label:{zh:""}},KATON:{id:2266,name:"Katon",label:{zh:""}},RAITON:{id:2267,name:"Raiton",label:{zh:""}},HYOTON:{id:2268,name:"Hyoton",label:{zh:""}},HUTON:{id:2269,name:"Huton",label:{zh:""}},DOTON:{id:2270,name:"Doton",label:{zh:""}},SUITON:{id:2271,name:"Suiton",label:{zh:""}},GOKA_MEKKYAKU:{id:16491,name:"Goka Mekkyaku",label:{zh:""}},HYOSHO_RANRYU:{id:16492,name:"Hyosho Ranryu",label:{zh:""}},RABBIT_MEDIUM:{id:2272,name:"Rabbit Medium",label:{zh:""}},FUMA_SHURIKEN:{id:2265,name:"Fuma Shuriken",label:{zh:""}},FUMA_SHURIKEN_TEN:{id:18873,name:"Fuma Shuriken (Ten)",label:{zh:""}},FUMA_SHURIKEN_CHI:{id:18874,name:"Fuma Shuriken (Chi)",label:{zh:""}},FUMA_SHURIKEN_JIN:{id:18875,name:"Fuma Shuriken (Jin)",label:{zh:""}},KATON_TEN:{id:18876,name:"Katon (Ten)",label:{zh:""}},RAITON_CHI:{id:18877,name:"Raiton (Chi)",label:{zh:""}},HYOTON_JIN:{id:18878,name:"Hyoton (Jin)",label:{zh:""}},HUTON_TEN:{id:18879,name:"Huton (Ten)",label:{zh:""}},DOTON_CHI:{id:18880,name:"Doton (Chi)",label:{zh:""}},SUITON_JIN:{id:18881,name:"Suiton (Jin)",label:{zh:""}}}),a1=se()({cd_MUDRA_HACK:{name:"cd_MudraHack"},cd_MUDRA:{name:"cd_Mudra"},cd_SHADE_SHIFT:{name:"cd_Shadeshift"},cd_HIDE:{name:"cd_Hide"},cd_TRICK_ATTACK:{name:"cd_TrickAttack"},cd_SHUKUCHI:{name:"cd_Shukuchi"},cd_KASSATSU:{name:"cd_Kassatsu"},cd_DREAM_WITHIN_A_DREAM:{name:"cd_DREAM_WITHIN_A_DREAM"},cd_DOKUMORI:{name:"cd_Dokumori"},cd_TEN_CHI_JIN:{name:"cd_TenChiJin"},cd_MEISUI:{name:"cd_Meisui"},cd_BUNSHIN:{name:"cd_Bunshin"},cd_BHAVACAKRA:{name:"cd_Bhavacakra"},cd_TENRI_JINDO:{name:"cd_TenriJindo"}}),n1=se()({KAZEMATOI:{name:"Kazematoi",label:{zh:""}},NINKI:{name:"Ninki",label:{zh:""}}}),YR=se()({MUDRA:{name:"Mudra",label:{zh:""}},SHADE_SHIFT:{name:"Shade Shift",label:{zh:""}},HIDDEN:{name:"Hidden",label:{zh:""}},TRICK_ATTACK:{name:"Trick Attack",label:{zh:""},specialDebuff:!0},KASSATSU:{name:"Kassatsu",label:{zh:""}},DOKUMORI:{name:"Dokumori",label:{zh:""},specialDebuff:!0},TENRI_JINDO_READY:{name:"Tenri Jindo Ready",label:{zh:""}},TEN_CHI_JIN:{name:"Ten Chi Jin",maximumStacks:3,label:{zh:""}},MEISUI:{name:"Meisui",label:{zh:""}},SHADOW_WALKER:{name:"Shadow Walker",label:{zh:""}},BUNSHIN:{name:"Bunshin",maximumStacks:5,label:{zh:""}},PHANTOM_KAMAITACHI_READY:{name:"Phantom Kamaitachi Ready",label:{zh:""}},RAIJU_READY:{name:"Raiju Ready",maximumStacks:3,label:{zh:""}},KUNAIS_BANE:{name:"Kunai's Bane",label:{zh:""},specialDebuff:!0},HIGI:{name:"Higi",label:{zh:""}},DOTON:{name:"Doton",mayBeToggled:!0,label:{zh:""}}}),i1=se()({NIN_COMBO_TRACKER:{name:"NIN Combo",label:{zh:""}},NIN_AOE_COMBO_TRACKER:{name:"NIN AOE Combo",label:{zh:"AOE"}},MUDRA_TRACKER:{name:"Mudra Tracker",label:{zh:""}},BUNNY:{name:"Bunny",label:{zh:""}}}),o1=se()({ENHANCED_SHUKUCHI_II:{name:"Enhanced Shukuchi II",level:74},MELEE_MASTERY_NIN:{name:"Melee Mastery NIN",level:74},ENHANCED_KASSATSU:{name:"Enhanced Kassatsu",level:76},SHUKIHO_II:{name:"Shukiho II",level:78},SHUKIHO_III:{name:"Shukiho III",level:84},MELEE_MASTERY_II_NIN:{name:"Melee Mastery II NIN",level:84},ENHANCED_MEISUI:{name:"Enhanced Meisui",level:88},ENHANCED_RAITON:{name:"Enhanced Raiton",level:90},TRICK_ATTACK_MASTERY:{name:"Trick Attack Mastery",level:92},MELEE_MASTERY_III_NIN:{name:"Melee Mastery III NIN",level:94},ENHANCED_DOKUMORI:{name:"Enhanced Dokumori",level:96},ENHANCED_TEN_CHI_JIN:{name:"Enhanced Ten Chi Jin",level:100}}),l1={...n1,...YR,...i1},s1=se()({FIRE_IN_RED:{id:34650,name:"Fire in Red",label:{zh:"",ja:""}},AERO_IN_GREEN:{id:34651,name:"Aero in Green",label:{zh:"",ja:""}},WATER_IN_BLUE:{id:34652,name:"Water in Blue",label:{zh:"",ja:""}},FIRE_II_IN_RED:{id:34656,name:"Fire II in Red",label:{zh:"",ja:""},discordEmote:"Fire2inRed"},AERO_II_IN_GREEN:{id:34657,name:"Aero II in Green",label:{zh:"",ja:""},discordEmote:"Aero2inGreen"},WATER_II_IN_BLUE:{id:34658,name:"Water II in Blue",label:{zh:"",ja:""},discordEmote:"Water2inBlue"},BLIZZARD_IN_CYAN:{id:34653,name:"Blizzard in Cyan",label:{zh:"",ja:""}},STONE_IN_YELLOW:{id:34654,name:"Stone in Yellow",label:{zh:"",ja:""}},THUNDER_IN_MAGENTA:{id:34655,name:"Thunder in Magenta",label:{zh:"",ja:""}},BLIZZARD_II_IN_CYAN:{id:34659,name:"Blizzard II in Cyan",label:{zh:"",ja:""},discordEmote:"Blizzard2inCyan"},STONE_II_IN_YELLOW:{id:34660,name:"Stone II in Yellow",label:{zh:"",ja:""},discordEmote:"Stone2inYellow"},THUNDER_II_IN_MAGENTA:{id:34661,name:"Thunder II in Magenta",label:{zh:"",ja:""},discordEmote:"Thunder2inMagenta"},HOLY_IN_WHITE:{id:34662,name:"Holy in White",label:{zh:"",ja:""}},COMET_IN_BLACK:{id:34663,name:"Comet in Black",label:{zh:"",ja:""}},RAINBOW_DRIP:{id:34688,name:"Rainbow Drip",label:{zh:"",ja:""}},STAR_PRISM:{id:34681,name:"Star Prism",label:{zh:"",ja:""}},TEMPERA_COAT:{id:34685,name:"Tempera Coat",label:{zh:"",ja:""}},TEMPERA_GRASSA:{id:34686,name:"Tempera Grassa",label:{zh:"",ja:""}},TEMPERA_COAT_POP:{name:"Pop Tempera Coat",label:{zh:"",ja:""}},TEMPERA_GRASSA_POP:{name:"Pop Tempera Grassa",label:{zh:"",ja:""}},SMUDGE:{id:34684,name:"Smudge",label:{zh:"",ja:""}},SUBTRACTIVE_PALETTE:{id:34683,name:"Subtractive Palette",label:{zh:"",ja:""}},CREATURE_MOTIF:{id:34689,name:"Creature Motif",label:{zh:"",ja:""}},POM_MOTIF:{id:34664,name:"Pom Motif",label:{zh:"",ja:""}},WING_MOTIF:{id:34665,name:"Wing Motif",label:{zh:"",ja:""}},CLAW_MOTIF:{id:34666,name:"Claw Motif",label:{zh:"",ja:""}},MAW_MOTIF:{id:34667,name:"Maw Motif",label:{zh:"",ja:""}},LIVING_MUSE:{id:35347,name:"Living Muse",label:{zh:"",ja:""}},POM_MUSE:{id:34670,name:"Pom Muse",label:{zh:"",ja:""}},WINGED_MUSE:{id:34671,name:"Winged Muse",label:{zh:"",ja:""}},CLAWED_MUSE:{id:34672,name:"Clawed Muse",label:{zh:"",ja:""}},FANGED_MUSE:{id:34673,name:"Fanged Muse",label:{zh:"",ja:""}},MOG_OF_THE_AGES:{id:34676,name:"Mog of the Ages",label:{zh:"",ja:""}},RETRIBUTION_OF_THE_MADEEN:{id:34677,name:"Retribution of the Madeen",label:{zh:"",ja:""}},WEAPON_MOTIF:{id:34690,name:"Weapon Motif",label:{zh:"",ja:""}},STEEL_MUSE:{id:35348,name:"Steel Muse",label:{zh:"",ja:""}},HAMMER_MOTIF:{id:34668,name:"Hammer Motif",label:{zh:"",ja:""}},STRIKING_MUSE:{id:34674,name:"Striking Muse",label:{zh:"",ja:""}},HAMMER_STAMP:{id:34678,name:"Hammer Stamp",label:{zh:"",ja:""}},HAMMER_BRUSH:{id:34679,name:"Hammer Brush",label:{zh:"",ja:""}},POLISHING_HAMMER:{id:34680,name:"Polishing Hammer",label:{zh:"",ja:""}},LANDSCAPE_MOTIF:{id:34691,name:"Landscape Motif",label:{zh:"",ja:""}},SCENIC_MUSE:{id:35349,name:"Scenic Muse",label:{zh:"",ja:""}},STARRY_SKY_MOTIF:{id:34669,name:"Starry Sky Motif",label:{zh:"",ja:""}},STARRY_MUSE:{id:34675,name:"Starry Muse",label:{zh:"",ja:""}}}),r1=se()({cd_TEMPERA_COAT:{name:"cd_TemperaCoat"},cd_SMUDGE:{name:"cd_Smudge"},cd_LIVING_MUSE:{name:"cd_LivingMuse"},cd_PORTRAIT:{name:"cd_Portrait",label:{zh:"CD/"}},cd_STEEL_MUSE:{name:"cd_SteelMuse"},cd_SCENIC_MUSE:{name:"cd_ScenicMuse"},cd_SUBTRACTIVE:{name:"cd_Subtractive",label:{zh:"CD"}},cd_GRASSA:{name:"cd_Grassa",label:{zh:"CD"}},cd_TEMPERA_POP:{name:"cd_TemperaPop",label:{zh:"CD"}}}),c1=se()({PORTRAIT:{name:"Portrait",label:{zh:"//"}},DEPICTIONS:{name:"Depictions",label:{zh:"///"}},CREATURE_CANVAS:{name:"Creature Canvas",label:{zh:""}},WEAPON_CANVAS:{name:"Weapon Canvas",label:{zh:""}},LANDSCAPE_CANVAS:{name:"Landscape Canvas",label:{zh:""}},PALETTE_GAUGE:{name:"Palette Gauge",label:{zh:""}},PAINT:{name:"Paint",label:{zh:""}}}),KR=se()({AETHERHUES:{name:"Aetherhues",label:{zh:""},mayNotBeCanceled:!0,maximumStacks:2},MONOCHROME_TONES:{name:"Monochrome Tones",label:{zh:""}},SUBTRACTIVE_PALETTE:{name:"Subtractive Palette",label:{zh:""},mayNotBeCanceled:!0,maximumStacks:3},HAMMER_TIME:{name:"Hammer Time",label:{zh:""},mayNotBeCanceled:!0,maximumStacks:3},INSPIRATION:{name:"Inspiration",label:{zh:""},mayBeToggled:!0},SUBTRACTIVE_SPECTRUM:{name:"Subtractive Spectrum",label:{zh:""}},HYPERPHANTASIA:{name:"Hyperphantasia",label:{zh:""},maximumStacks:5},RAINBOW_BRIGHT:{name:"Rainbow Bright",label:{zh:""}},STARSTRUCK:{name:"Starstruck",label:{zh:""}},STARRY_MUSE:{name:"Starry Muse",label:{zh:""}},TEMPERA_COAT:{name:"Tempera Coat",label:{zh:""}},TEMPERA_GRASSA:{name:"Tempera Grassa",label:{zh:""}},SMUDGE:{name:"Smudge",label:{zh:""}}}),u1=se()({HAMMER_COMBO:{name:"Hammer Combo Counter",label:{zh:""}}}),d1=se()({PICTOMANCY_MASTERY_II:{name:"Pictomancy Mastery II",level:74},ENHANCED_ARTISTRY:{name:"Enhanced Artistry",level:80},ENHANCED_PICTOMANCY:{name:"Enhanced Pictomancy",level:82},ENHANCED_SMUDGE:{name:"Enhanced Smudge",level:84},PICTOMANCY_MASTERY_III:{name:"Pictomancy Mastery III",level:84},ENHANCED_PICTOMANCY_II:{name:"Enhanced Pictomancy II",level:86},ENHANCED_TEMPERA:{name:"Enhanced Tempera",level:88},ENHANCED_PALETTE:{name:"Enhanced Palette",level:90},ENHANCED_PICTOMANCY_III:{name:"Enhanced Pictomancy III",level:92},PICTOMANCY_MASTERY_IV:{name:"Pictomancy Mastery IV",level:94},ENHANCED_PICTOMANCY_IV:{name:"Enhanced Pictomancy IV",level:96},ENHANCED_PICTOMANCY_V:{name:"Enhanced Pictomancy V",level:100}}),h1={...c1,...KR,...u1},f1=se()({FAST_BLADE:{id:9,name:"Fast Blade",label:{zh:""}},FIGHT_OR_FLIGHT:{id:20,name:"Fight or Flight",label:{zh:""}},RIOT_BLADE:{id:15,name:"Riot Blade",label:{zh:""}},TOTAL_ECLIPSE:{id:7381,name:"Total Eclipse",label:{zh:""}},SHIELD_BASH:{id:16,name:"Shield Bash",label:{zh:""}},IRON_WILL:{id:28,name:"Iron Will",label:{zh:""}},RELEASE_IRON_WILL:{id:32065,name:"Release Iron Will",label:{zh:""}},SHIELD_LOB:{id:24,name:"Shield Lob",label:{zh:""}},SPIRITS_WITHIN:{id:29,name:"Spirits Within",label:{zh:""}},SHELTRON:{id:3542,name:"Sheltron",label:{zh:""}},SENTINEL:{id:17,name:"Sentinel",label:{zh:""}},PROMINENCE:{id:16457,name:"Prominence",label:{zh:""}},COVER:{id:27,name:"Cover",label:{zh:""}},CIRCLE_OF_SCORN:{id:23,name:"Circle of Scorn",label:{zh:""}},HALLOWED_GROUND:{id:30,name:"Hallowed Ground",label:{zh:""}},BULWARK:{id:22,name:"Bulwark",label:{zh:""}},GORING_BLADE:{id:3538,name:"Goring Blade",label:{zh:""}},DIVINE_VEIL:{id:3540,name:"Divine Veil",label:{zh:""}},CLEMENCY:{id:3541,name:"Clemency",label:{zh:""}},ROYAL_AUTHORITY:{id:3539,name:"Royal Authority",label:{zh:""}},INTERVENTION:{id:7382,name:"Intervention",label:{zh:""}},HOLY_SPIRIT:{id:7384,name:"Holy Spirit",label:{zh:""}},INTERVENE:{id:16461,name:"Intervene",label:{zh:""}},REQUIESCAT:{id:7383,name:"Requiescat",label:{zh:""}},PASSAGE_OF_ARMS:{id:7385,name:"Passage of Arms",label:{zh:""}},HOLY_CIRCLE:{id:16458,name:"Holy Circle",label:{zh:""}},ATONEMENT:{id:16460,name:"Atonement",label:{zh:""}},SUPPLICATION:{id:36918,name:"Supplication",label:{zh:"2"}},SEPULCHRE:{id:36919,name:"Sepulchre",label:{zh:"3"}},CONFITEOR:{id:16459,name:"Confiteor",label:{zh:""}},HOLY_SHELTRON:{id:25746,name:"Holy Sheltron",label:{zh:""}},EXPIACION:{id:25747,name:"Expiacion",label:{zh:""}},BLADE_OF_FAITH:{id:25748,name:"Blade of Faith",label:{zh:"2"}},BLADE_OF_TRUTH:{id:25749,name:"Blade of Truth",label:{zh:"3"}},BLADE_OF_VALOR:{id:25750,name:"Blade of Valor",label:{zh:"4"}},GUARDIAN:{id:36920,name:"Guardian",label:{zh:""}},IMPERATOR:{id:36921,name:"Imperator",label:{zh:""}},BLADE_OF_HONOR:{id:36922,name:"Blade of Honor",label:{zh:""}}}),E1=se()({cd_FIGHT_OR_FLIGHT:{name:"cd_FightOrFlight"},cd_IRON_WILL:{name:"cd_IronWill"},cd_RELEASE_IRON_WILL:{name:"cd_ReleaseIronWill"},cd_SPIRITS_WITHIN:{name:"cd_SpiritsWithin"},cd_SHELTRON:{name:"cd_Sheltron"},cd_SENTINEL:{name:"cd_Sentinel"},cd_COVER:{name:"cd_Cover"},cd_CIRCLE_OF_SCORN:{name:"cd_CircleOfScorn"},cd_HALLOWED_GROUND:{name:"cd_HallowedGround"},cd_BULWARK:{name:"cd_Bulwark"},cd_DIVINE_VEIL:{name:"cd_DivineVeil"},cd_INTERVENTION:{name:"cd_Intervention"},cd_INTERVENE:{name:"cd_Intervene"},cd_REQUIESCAT:{name:"cd_Requiescat"},cd_PASSAGE_OF_ARMS:{name:"cd_PassageOfArms"},cd_HOLY_SHELTRON:{name:"cd_HolySheltron"},cd_EXPIACION:{name:"cd_Expiacion"},cd_GUARDIAN:{name:"cd_Guardian"},cd_IMPERATOR:{name:"cd_Imperator"},cd_BLADE_OF_HONOR:{name:"cd_BladeOfHonor"}}),m1=se()({OATH_GAUGE:{name:"Oath Gauge",label:{zh:""}}}),VR=se()({FIGHT_OR_FLIGHT:{name:"Fight or Flight",label:{zh:""}},IRON_WILL:{name:"Iron Will",label:{zh:""}},CIRCLE_OF_SCORN_DOT:{name:"Circle of Scorn DoT",label:{zh:"DOT"}},SHELTRON:{name:"Sheltron",label:{zh:""}},SENTINEL:{name:"Sentinel",label:{zh:""}},COVER:{name:"Cover",label:{zh:""}},HALLOWED_GROUND:{name:"Hallowed Ground",label:{zh:""}},BULWARK:{name:"Bulwark",label:{zh:""}},GORING_BLADE_READY:{name:"Goring Blade Ready",label:{zh:""}},DIVINE_VEIL:{name:"Divine Veil",label:{zh:""}},ATONEMENT_READY:{name:"Atonement Ready",label:{zh:""}},DIVINE_MIGHT:{name:"Divine Might",label:{zh:""}},INTERVENTION:{name:"Intervention",label:{zh:""}},KNIGHTS_RESOLVE:{name:"Knight's Resolve",label:{zh:""}},KNIGHTS_BENEDICTION:{name:"Knight's Benediction",label:{zh:""}},REQUIESCAT:{name:"Requiescat",maximumStacks:4,label:{zh:""}},CONFITEOR_READY:{name:"Confiteor Ready",label:{zh:""}},PASSAGE_OF_ARMS:{name:"Passage of Arms",label:{zh:""}},ARMS_UP:{name:"Arms Up",label:{zh:""}},SUPPLICATION_READY:{name:"Supplication Ready",label:{zh:""}},SEPULCHRE_READY:{name:"Sepulchre Ready",label:{zh:""}},HOLY_SHELTRON:{name:"Holy Sheltron",label:{zh:""}},BLADE_OF_HONOR_READY:{name:"Blade of Honor Ready",label:{zh:""}},GUARDIAN:{name:"Guardian",label:{zh:""}},GUARDIANS_WILL:{name:"Guardian's Will",label:{zh:""}}}),A1=se()({PLD_COMBO_TRACKER:{name:"PLD Combo Tracker",label:{zh:""}},PLD_CONFITEOR_COMBO_TRACKER:{name:"PLD Confiteor Combo Tracker",label:{zh:""}},PLD_AOE_COMBO_TRACKER:{name:"PLD AOE Combo Tracker",label:{zh:"AOE"}}}),R1=se()({ENHANCED_PROMINENCE:{name:"Enhanced Prominence",level:72},ENHANCED_SHELTRON:{name:"Enhanced Sheltron",level:74},SWORD_OATH:{name:"Sword Oath",level:76},ENHANCED_REQUIESCAT:{name:"Enhanced Requiescat",level:80},SHELTRON_MASTERY:{name:"Sheltron Mastery",level:82},ENHANCED_INTERVENTION:{name:"Enhanced Intervention",level:82},DIVINE_MAGIC_MASTERY_II:{name:"Divine Magic Mastery II",level:84},SPIRITS_WITHIN_MASTERY:{name:"Spirits Within Mastery",level:86},ENHANCED_DIVINE_VEIL:{name:"Enhanced Divine Veil",level:88},SENTINEL_MASTERY:{name:"Sentinel Mastery",level:92},REQUIESCAT_MASTERY:{name:"Requiescat Mastery",level:96},ENHANCED_BLADE_OF_VALOR:{name:"Enhanced Blade of Valor",level:100}}),T1={...m1,...VR,...A1},S1=se()({RIPOSTE:{id:7504,name:"Riposte",label:{zh:"",ja:""}},VERTHUNDER:{id:7505,name:"Verthunder",label:{zh:"",ja:""}},CORPS_A_CORPS:{id:7506,name:"Corps-a-corps",label:{zh:"",ja:""}},VERAERO:{id:7507,name:"Veraero",label:{zh:"",ja:""}},VERFIRE:{id:7510,name:"Verfire",label:{zh:"",ja:""}},VERSTONE:{id:7511,name:"Verstone",label:{zh:"",ja:""}},ZWERCHHAU:{id:7512,name:"Zwerchhau",label:{zh:"",ja:""}},DISPLACEMENT:{id:7515,name:"Displacement",label:{zh:"",ja:""}},FLECHE:{id:7517,name:"Fleche",label:{zh:"",ja:""}},REDOUBLEMENT:{id:7516,name:"Redoublement",label:{zh:"",ja:""}},ACCELERATION:{id:7518,name:"Acceleration",label:{zh:"",ja:""}},MOULINET:{id:7513,name:"Moulinet",label:{zh:"",ja:""}},VERCURE:{id:7514,name:"Vercure",label:{zh:"",ja:""}},CONTRE_SIXTE:{id:7519,name:"Contre Sixte",label:{zh:"",ja:""}},EMBOLDEN:{id:7520,name:"Embolden",label:{zh:"",ja:""}},MANAFICATION:{id:7521,name:"Manafication",label:{zh:"",ja:""}},JOLT_II:{id:7524,name:"Jolt II",label:{zh:"",ja:""}},VERRAISE:{id:7523,name:"Verraise",label:{zh:"",ja:""}},IMPACT:{id:16526,name:"Impact",label:{zh:"",ja:""}},VERFLARE:{id:7525,name:"Verflare",label:{zh:"",ja:""}},VERHOLY:{id:7526,name:"Verholy",label:{zh:"",ja:""}},ENCHANTED_RIPOSTE:{id:7527,name:"Enchanted Riposte",label:{zh:"",ja:""}},ENCHANTED_ZWERCHHAU:{id:7528,name:"Enchanted Zwerchhau",label:{zh:"",ja:""}},ENCHANTED_REDOUBLEMENT:{id:7529,name:"Enchanted Redoublement",label:{zh:"",ja:""}},ENCHANTED_MOULINET:{id:7530,name:"Enchanted Moulinet",label:{zh:"",ja:""}},VERTHUNDER_II:{id:16524,name:"Verthunder II",label:{zh:"",ja:""}},VERAERO_II:{id:16525,name:"Veraero II",label:{zh:"",ja:""}},ENGAGEMENT:{id:16527,name:"Engagement",label:{zh:"",ja:""}},ENCHANTED_REPRISE:{id:16528,name:"Enchanted Reprise",label:{zh:"",ja:""}},REPRISE:{id:16529,name:"Reprise",label:{zh:"",ja:""}},SCORCH:{id:16530,name:"Scorch",label:{zh:"",ja:""}},VERTHUNDER_III:{id:25855,name:"Verthunder III",label:{zh:"",ja:""}},VERAERO_III:{id:25856,name:"Veraero III",label:{zh:"",ja:""}},MAGICK_BARRIER:{id:25857,name:"Magick Barrier",label:{zh:"",ja:""}},RESOLUTION:{id:25858,name:"Resolution",label:{zh:"",ja:""}},ENCHANTED_MOULINET_II:{id:37002,name:"Enchanted Moulinet Deux",label:{zh:"",ja:""}},ENCHANTED_MOULINET_III:{id:37003,name:"Enchanted Moulinet Trois",label:{zh:"",ja:""}},JOLT_III:{id:37004,name:"Jolt III",label:{zh:"",ja:""}},VICE_OF_THORNS:{id:37005,name:"Vice of Thorns",label:{zh:"",ja:""}},GRAND_IMPACT:{id:37006,name:"Grand Impact",label:{zh:"",ja:""}},PREFULGENCE:{id:37007,name:"Prefulgence",label:{zh:"",ja:""}}}),g1=se()({cd_CORPS_A_CORPS:{name:"cd_CorpsACorps"},cd_DISPLACEMENT:{name:"cd_Displacement"},cd_FLECHE:{name:"cd_Fleche"},cd_ACCELERATION:{name:"cd_Acceleration"},cd_CONTRE_SIXTE:{name:"cd_ContreSixte"},cd_EMBOLDEN:{name:"cd_Embolden"},cd_MANAFICATION:{name:"cd_Manafication"},cd_MAGICK_BARRIER:{name:"cd_MagickBarrier"},cd_VICE_OF_THORNS:{name:"cd_ViceOfThorns"},cd_PREFULGENCE:{name:"cd_Prefulgence"}}),I1=se()({WHITE_MANA:{name:"White Mana",label:{zh:""}},BLACK_MANA:{name:"Black Mana",label:{zh:""}},MANA_STACKS:{name:"Mana Stacks",label:{zh:""}}}),WR=se()({ACCELERATION:{name:"Acceleration",label:{zh:""}},DUALCAST:{name:"Dualcast",label:{zh:""}},EMBOLDEN:{name:"Embolden",label:{zh:""}},GRAND_IMPACT_READY:{name:"Grand Impact Ready",label:{zh:""}},MAGICK_BARRIER:{name:"Magick Barrier",label:{zh:""}},MAGICKED_SWORDPLAY:{name:"Magicked Swordplay",label:{zh:""},maximumStacks:3},MANAFICATION:{name:"Manafication",label:{zh:""}},PREFULGENCE_READY:{name:"Prefulgence Ready",label:{zh:""}},THORNED_FLOURISH:{name:"Thorned Flourish",label:{zh:""}},VERFIRE_READY:{name:"Verfire Ready",label:{zh:""}},VERSTONE_READY:{name:"Verstone Ready",label:{zh:""}}}),_1=se()({RDM_MELEE_COUNTER:{name:"RDM Melee Combo",label:{zh:""}},RDM_FINISHER_COUNTER:{name:"RDM Finisher Combo",label:{zh:"/"}},RDM_AOE_COUNTER:{name:"RDM AoE Combo",label:{zh:"AOE"}}}),p1=se()({ENHANCED_DISPLACEMENT:{name:"Enhanced Displacement",level:72},RED_MAGIC_MASTERY:{name:"Red Magic Mastery",level:74},RED_MAGIC_MASTERY_II:{name:"Red Magic Mastery II",level:82},RED_MAGIC_MASTERY_III:{name:"Red Magic Mastery III",level:84},ENHANCED_ACCELERATION:{name:"Enhanced Acceleration",level:88},ENHANCED_EMBOLDEN:{name:"Enhanced Embolden",level:92},ENCHANTED_BLADE_MASTERY:{name:"Enchanted Blade Mastery",level:94},ENHANCED_ACCELERATION_II:{name:"Enhanced Acceleration II",level:96},ENHANCED_MANAFICATION:{name:"Enhanced Manafication",level:100}}),N1={...I1,...WR,..._1},C1=se()({SLICE:{id:24373,name:"Slice",label:{zh:""}},WAXING_SLICE:{id:24374,name:"Waxing Slice",label:{zh:""}},INFERNAL_SLICE:{id:24375,name:"Infernal Slice",label:{zh:""}},SHADOW_OF_DEATH:{id:24378,name:"Shadow of Death",label:{zh:""}},SOUL_SLICE:{id:24380,name:"Soul Slice",label:{zh:""}},GIBBET:{id:24382,name:"Gibbet",label:{zh:""}},GALLOWS:{id:24383,name:"Gallows",label:{zh:""}},EXECUTIONERS_GIBBET:{id:36970,name:"Executioner's Gibbet",label:{zh:""}},EXECUTIONERS_GALLOWS:{id:36971,name:"Executioner's Gallows",label:{zh:""}},VOID_REAPING:{id:24395,name:"Void Reaping",label:{zh:""}},CROSS_REAPING:{id:24396,name:"Cross Reaping",label:{zh:""}},PLENTIFUL_HARVEST:{id:24385,name:"Plentiful Harvest",label:{zh:""}},HARVEST_MOON:{id:24388,name:"Harvest Moon",label:{zh:""}},COMMUNIO:{id:24398,name:"Communio",label:{zh:""}},PERFECTIO:{id:36973,name:"Perfectio",label:{zh:""}},SOULSOW:{id:24387,name:"Soulsow",label:{zh:""}},HARPE:{id:24386,name:"Harpe",label:{zh:""}},BLOOD_STALK:{id:24389,name:"Blood Stalk",label:{zh:""}},UNVEILED_GIBBET:{id:24390,name:"Unveiled Gibbet",label:{zh:""}},UNVEILED_GALLOWS:{id:24391,name:"Unveiled Gallows",label:{zh:""}},LEMURES_SLICE:{id:24399,name:"Lemure's Slice",label:{zh:""}},SACRIFICIUM:{id:36969,name:"Sacrificium",label:{zh:""}},ARCANE_CIRCLE:{id:24405,name:"Arcane Circle",label:{zh:""}},GLUTTONY:{id:24393,name:"Gluttony",label:{zh:""}},ENSHROUD:{id:24394,name:"Enshroud",label:{zh:""}},SPINNING_SCYTHE:{id:24376,name:"Spinning Scythe",label:{zh:""}},NIGHTMARE_SCYTHE:{id:24377,name:"Nightmare Scythe",label:{zh:""}},WHORL_OF_DEATH:{id:24379,name:"Whorl of Death",label:{zh:""}},SOUL_SCYTHE:{id:24381,name:"Soul Scythe",label:{zh:""}},GUILLOTINE:{id:24384,name:"Guillotine",label:{zh:""}},EXECUTIONERS_GUILLOTINE:{id:36972,name:"Executioner's Guillotine",label:{zh:""}},GRIM_REAPING:{id:24397,name:"Grim Reaping",label:{zh:""}},GRIM_SWATHE:{id:24392,name:"Grim Swathe",label:{zh:""}},LEMURES_SCYTHE:{id:24400,name:"Lemure's Scythe",label:{zh:""}},ARCANE_CREST:{id:24404,name:"Arcane Crest",label:{zh:""}},ARCANE_CREST_POP:{name:"Pop Arcane Crest",label:{zh:""}},HELLS_INGRESS:{id:24401,name:"Hell's Ingress",label:{zh:""}},HELLS_EGRESS:{id:24402,name:"Hell's Egress",label:{zh:""}},REGRESS:{id:24403,name:"Regress",label:{zh:""}},GAIN_SOUL_GAUGE:{name:"+10 Soul Gauge",label:{zh:"+10"}}}),b1=se()({cd_ARCANE_CIRCLE:{name:"cd_ArcaneCircle"},cd_GLUTTONY:{name:"cd_Gluttony"},cd_SOUL_SLICE:{name:"cd_SoulSlice"},cd_ENSHROUD:{name:"cd_Enshroud"},cd_INGRESS_EGRESS:{name:"cd_IngressEgress",label:{zh:"CD/"}},cd_ARCANE_CREST:{name:"cd_ArcaneCrest"},cd_ARCANE_CREST_POP:{name:"cd_ArcaneCrestPop"},cd_BLOOD_STALK:{name:"cd_BloodStalk"},cd_LEMURES_SLICE:{name:"cd_LemuresSlice"},cd_SACRIFICIUM:{name:"cd_Sacrificium"},cd_GAIN_SOUL_GAUGE:{name:"cd_GainSoulGauge"}}),O1=se()({SOUL:{name:"Soul",label:{zh:""}},SHROUD:{name:"Shroud",label:{zh:""}},LEMURE_SHROUD:{name:"Lemure Shroud",label:{zh:""}},VOID_SHROUD:{name:"Void Shroud",label:{zh:""}}}),XR=se()({DEATHS_DESIGN:{name:"Death's Design",label:{zh:""},specialDebuff:!0},SOUL_REAVER:{name:"Soul Reaver",label:{zh:""},maximumStacks:2},ENHANCED_GIBBET:{name:"Enhanced Gibbet",label:{zh:""}},ENHANCED_GALLOWS:{name:"Enhanced Gallows",label:{zh:""}},EXECUTIONER:{name:"Executioner",label:{zh:""},maximumStacks:2},ENSHROUDED:{name:"Enshrouded",label:{zh:""}},ENHANCED_VOID_REAPING:{name:"Enhanced Void Reaping",label:{zh:""}},ENHANCED_CROSS_REAPING:{name:"Enhanced Cross Reaping",label:{zh:""}},OBLATIO:{name:"Oblatio",label:{zh:""}},IDEAL_HOST:{name:"Ideal Host",label:{zh:""}},PERFECTIO_OCCULTA:{name:"Perfectio Occulta",label:{zh:""}},PERFECTIO_PARATA:{name:"Perfectio Parata",label:{zh:""}},ARCANE_CIRCLE:{name:"Arcane Circle",label:{zh:""}},CIRCLE_OF_SACRIFICE:{name:"Circle of Sacrifice",label:{zh:""}},BLOODSOWN_CIRCLE:{name:"Bloodsown Circle",label:{zh:""}},IMMORTAL_SACRIFICE:{name:"Immortal Sacrifice",label:{zh:""},maximumStacks:8},CREST_OF_TIME_BORROWED:{name:"Crest of Time Borrowed",label:{zh:""}},CREST_OF_TIME_RETURNED:{name:"Crest of Time Returned",label:{zh:""}},SOULSOW:{name:"Soulsow",label:{zh:""}},THRESHOLD:{name:"Threshold",label:{zh:""}},ENHANCED_HARPE:{name:"Enhanced Harpe",label:{zh:""}}}),D1=se()({ARCANE_CREST:{name:"Arcane Crest",label:{zh:""}},HELLS_INGRESS_USED:{name:"Hell's Ingress Used",label:{zh:""}},RPR_COMBO:{name:"RPR Combo",label:{zh:""}},RPR_AOE_COMBO:{name:"RPR AoE Combo",label:{zh:"AOE"}}}),y1=se()({HELLSGATE:{name:"Hellsgate",level:74},TEMPERED_SOUL:{name:"Tempered Soul",level:78},SHROUD_GAUGE:{name:"Shroud Gauge",level:80},ENHANCED_ARCANE_CREST:{name:"Enhanced Arcane Crest",level:84},MELEE_MASTERY_II_RPR:{name:"Melee Mastery II",level:84},VOID_SOUL:{name:"Void Soul",level:86},ENHANCED_ARCANE_CIRCLE:{name:"Enhanced Arcane Circle",level:88},ENHANCED_ENSHROUD:{name:"Enhanced Enshroud",level:92},MELEE_MASTERY_III_RPR:{name:"Melee Mastery III",level:94},ENHANCED_GLUTTONY:{name:"Enhanced Gluttony",level:96},ENHANCED_PLENTIFUL_HARVEST:{name:"Enhanced Plentiful Harvest",level:100}}),v1={...O1,...XR,...D1},M1=se()({ENPI:{id:7486,name:"Enpi",label:{zh:""}},HAKAZE:{id:7477,name:"Hakaze",label:{zh:""}},GYOFU:{id:36963,name:"Gyofu",label:{zh:""}},YUKIKAZE:{id:7480,name:"Yukikaze",label:{zh:""}},JINPU:{id:7478,name:"Jinpu",label:{zh:""}},GEKKO:{id:7481,name:"Gekko",label:{zh:""}},SHIFU:{id:7479,name:"Shifu",label:{zh:""}},KASHA:{id:7482,name:"Kasha",label:{zh:""}},FUGA:{id:7483,name:"Fuga",label:{zh:""}},FUKO:{id:25780,name:"Fuko",label:{zh:""}},MANGETSU:{id:7484,name:"Mangetsu",label:{zh:""}},OKA:{id:7485,name:"Oka",label:{zh:""}},MEIKYO_SHISUI:{id:7499,name:"Meikyo Shisui",label:{zh:""}},IKISHOTEN:{id:16482,name:"Ikishoten",label:{zh:""}},HISSATSU_SHINTEN:{id:7490,name:"Hissatsu: Shinten",label:{zh:""}},HISSATSU_KYUTEN:{id:7491,name:"Hissatsu: Kyuten",label:{zh:""}},HISSATSU_GYOTEN:{id:7492,name:"Hissatsu: Gyoten",label:{zh:""}},HISSATSU_YATEN:{id:7493,name:"Hissatsu: Yaten",label:{zh:""}},HISSATSU_SENEI:{id:16481,name:"Hissatsu: Senei",label:{zh:""}},HISSATSU_GUREN:{id:7496,name:"Hissatsu: Guren",label:{zh:""}},HAGAKURE:{id:7495,name:"Hagakure",label:{zh:""}},IAIJUTSU:{id:7867,name:"Iaijutsu",label:{zh:""}},TSUBAME_GAESHI:{id:16483,name:"Tsubame-gaeshi",label:{zh:""}},SHOHA:{id:16487,name:"Shoha",label:{zh:""}},THIRD_EYE:{id:7498,name:"Third Eye",label:{zh:""}},TENGENTSU:{id:36962,name:"Tengentsu",label:{zh:""}},OGI_NAMIKIRI:{id:25781,name:"Ogi Namikiri",label:{zh:""}},KAESHI_NAMIKIRI:{id:25782,name:"Kaeshi: Namikiri",label:{zh:""}},ZANSHIN:{id:36964,name:"Zanshin",label:{zh:""}},MEDITATE:{id:7497,name:"Meditate",label:{zh:""}},HIGANBANA:{id:7489,name:"Higanbana",label:{zh:""}},TENKA_GOKEN:{id:7488,name:"Tenka Goken",label:{zh:""}},KAESHI_GOKEN:{id:16485,name:"Kaeshi: Goken",label:{zh:""}},TENDO_GOKEN:{id:36965,name:"Tendo Goken",label:{zh:""}},TENDO_KAESHI_GOKEN:{id:36967,name:"Tendo Kaeshi Goken",label:{zh:""}},MIDARE_SETSUGEKKA:{id:7487,name:"Midare Setsugekka",label:{zh:""}},KAESHI_SETSUGEKKA:{id:16486,name:"Kaeshi: Setsugekka",label:{zh:""}},TENDO_SETSUGEKKA:{id:36966,name:"Tendo Setsugekka",label:{zh:""}},TENDO_KAESHI_SETSUGEKKA:{id:36968,name:"Tendo Kaeshi Setsugekka",label:{zh:""}},THIRD_EYE_POP:{name:"Pop Third Eye",label:{zh:""}},TENGENTSU_POP:{name:"Pop Tengentsu",label:{zh:""}}}),L1=se()({cd_YATEN:{name:"cd_Yaten",label:{zh:"CD"}},cd_GYOTEN:{name:"cd_Gyoten",label:{zh:"CD"}},cd_SENEI_GUREN:{name:"cd_Senei",label:{zh:"CD: /"}},cd_SHINTEN:{name:"cd_Shinten",label:{zh:"CD"}},cd_KYUTEN:{name:"cd_Kyuten",label:{zh:"CD"}},cd_MEDITATE:{name:"cd_Meditate"},cd_IKISHOTEN:{name:"cd_Ikishoten"},cd_ZANSHIN:{name:"cd_Zanshin"},cd_HAGAKURE:{name:"cd_Hagakure"},cd_SHOHA:{name:"cd_Shoha"},cd_MEIKYO_SHISUI:{name:"cd_MeikyoShisui"},cd_THIRD_EYE:{name:"cd_ThirdEye"},cd_THIRD_EYE_POP:{name:"cd_ThirdEyePop"}}),x1=se()({KENKI:{name:"Kenki",label:{zh:""}},SETSU:{name:"Setsu",label:{zh:""}},GETSU:{name:"Getsu",label:{zh:""}},KA_SEN:{name:"Ka",label:{zh:""}},MEDITATION:{name:"Meditation",label:{zh:""}}}),qR=se()({MEIKYO_SHISUI:{name:"Meikyo Shisui",label:{zh:""},maximumStacks:3},FUGETSU:{name:"Fugetsu",label:{zh:""}},FUKA:{name:"Fuka",label:{zh:""}},ZANSHIN_READY:{name:"Zanshin Ready",label:{zh:""}},TENDO:{name:"Tendo",label:{zh:""}},OGI_READY:{name:"Ogi Namikiri Ready",label:{zh:""}},TSUBAME_GAESHI_READY:{name:"Tsubame-gaeshi Ready",label:{zh:""}},THIRD_EYE:{name:"Third Eye",label:{zh:""}},TENGENTSU:{name:"Tengentsu",label:{zh:""}},TENGENTSUS_FORESIGHT:{name:"Tengentsu's Foresight",label:{zh:""}},MEDITATE:{name:"Meditate",label:{zh:""}},ENHANCED_ENPI:{name:"Enhanced Enpi",label:{zh:""}},HIGANBANA_DOT:{name:"HiganbanaDoT",label:{zh:"dot"}}}),H1=se()({SAM_TWO_READY:{name:"SAMTwoReady",label:{zh:"2"}},SAM_TWO_AOE_READY:{name:"SAMTwoAoeReady",label:{zh:"AOE2"}},GEKKO_READY:{name:"GekkoReady",label:{zh:""}},KASHA_READY:{name:"KashaReady",label:{zh:""}},KAESHI_OGI_READY:{name:"KaeshiOgiReady",label:{zh:""}},KAESHI_TRACKER:{name:"KaeshiTracker",label:{zh:""}}}),k1=se()({ENHANCED_IAIJUTSU:{name:"Enhanced Iaijutsu",level:74},ENHANCED_MEIKYO_SHISUI:{name:"Enhanced Meikyo Shisui",level:76},ENHANCED_FUGETSU_AND_FUKA:{name:"Enhanced Fugetsu and Fuka",level:78},THIRD_EYE_MASTERY:{name:"Third Eye Mastery",level:82},WAY_OF_THE_SAMURAI_II:{name:"Way of the Samurai II",level:84},FUGA_MASTERY:{name:"Fuga Mastery",level:86},ENHANCED_IKISHOTEN:{name:"Enhanced Ikishoten",level:90},HAKAZE_MASTERY:{name:"Hakaze Mastery",level:92},ENHANCED_HISSATSU:{name:"Enhanced Hissatsu",level:94},WAY_OF_THE_SAMURAI_III:{name:"Way of the Samurai III",level:94},ENHANCED_IKISHOTEN_II:{name:"Enhanced Ikishoten II",level:96},ENHANCED_MEIKYO_SHISUI_II:{name:"Enhanced Meikyo Shisui II",level:100}}),U1={...x1,...qR,...H1},ZR=se()({PHYSICK:{id:190,name:"Physick",label:{zh:"",ja:""}},SUMMON_EOS:{id:17215,name:"Summon Eos",label:{zh:"",ja:""}},RESURRECTION:{id:173,name:"Resurrection",label:{zh:"",ja:""}},WHISPERING_DAWN:{id:16537,name:"Whispering Dawn",label:{zh:"",ja:""}},BIO_II:{id:17865,name:"Bio II",label:{zh:"",ja:""}},ADLOQUIUM:{id:185,name:"Adloquium",label:{zh:"",ja:""}},SUCCOR:{id:186,name:"Succor",label:{zh:"",ja:""}},RUIN_II:{id:17870,name:"Ruin II",label:{zh:"",ja:""}},FEY_ILLUMINATION:{id:16538,name:"Fey Illumination",label:{zh:"",ja:""}},AETHERFLOW:{id:166,name:"Aetherflow",label:{zh:"",ja:""}},ENERGY_DRAIN:{id:167,name:"Energy Drain",label:{zh:"",ja:""}},LUSTRATE:{id:189,name:"Lustrate",label:{zh:"",ja:""}},ART_OF_WAR:{id:16539,name:"Art of War",label:{zh:"",ja:""}},SACRED_SOIL:{id:188,name:"Sacred Soil",label:{zh:"",ja:""}},INDOMITABILITY:{id:3583,name:"Indomitability",label:{zh:"",ja:""}},DEPLOYMENT_TACTICS:{id:3585,name:"Deployment Tactics",label:{zh:"",ja:""}},EMERGENCY_TACTICS:{id:3586,name:"Emergency Tactics",label:{zh:"",ja:""}},DISSIPATION:{id:3587,name:"Dissipation",label:{zh:"",ja:""}},EXCOGITATION:{id:7434,name:"Excogitation",label:{zh:"",ja:""}},BROIL_II:{id:7435,name:"Broil II",label:{zh:"",ja:""}},CHAIN_STRATAGEM:{id:7436,name:"Chain Stratagem",label:{zh:"",ja:""}},AETHERPACT:{id:7437,name:"Aetherpact",label:{zh:"",ja:""}},DISSOLVE_UNION:{id:7869,name:"Dissolve Union",label:{zh:"",ja:""}},BIOLYSIS:{id:16540,name:"Biolysis",label:{zh:"",ja:""}},BROIL_III:{id:16541,name:"Broil III",label:{zh:"",ja:""}},RECITATION:{id:16542,name:"Recitation",label:{zh:"",ja:""}},FEY_BLESSING:{id:16543,name:"Fey Blessing",label:{zh:"",ja:""}},SUMMON_SERAPH:{id:16545,name:"Summon Seraph",label:{zh:"",ja:""}},CONSOLATION:{id:16546,name:"Consolation",label:{zh:"",ja:""}},BROIL_IV:{id:25865,name:"Broil IV",label:{zh:"",ja:""}},ART_OF_WAR_II:{id:25866,name:"Art of War II",label:{zh:"",ja:""}},PROTRACTION:{id:25867,name:"Protraction",label:{zh:"",ja:""}},EXPEDIENT:{id:25868,name:"Expedient",label:{zh:"",ja:""}},BANEFUL_IMPACTION:{id:37012,name:"Baneful Impaction",label:{zh:"",ja:""}},CONCITATION:{id:37013,name:"Concitation",label:{zh:"",ja:""}},SERAPHISM:{id:37014,name:"Seraphism",label:{zh:"",ja:""}},MANIFESTATION:{id:37015,name:"Manifestation",label:{zh:"",ja:""}},ACCESSION:{id:37016,name:"Accession",label:{zh:"",ja:""}},ANGELS_WHISPER:{name:"Angel's Whisper",label:{zh:""}}}),w1=se()({cd_WHISPERING_DAWN:{name:"cd_WhisperingDawn"},cd_FEY_ILLUMINATION:{name:"cd_FeyIllumination"},cd_AETHERFLOW:{name:"cd_Aetherflow"},cd_ENERGY_DRAIN:{name:"cd_EnergyDrain"},cd_LUSTRATE:{name:"cd_Lustrate"},cd_SACRED_SOIL:{name:"cd_SacredSoil"},cd_INDOMITABILITY:{name:"cd_Indomitability"},cd_DEPLOYMENT_TACTICS:{name:"cd_DeploymentTactics"},cd_EMERGENCY_TACTICS:{name:"cd_EmergencyTactics"},cd_DISSIPATION:{name:"cd_Dissipation"},cd_EXCOGITATION:{name:"cd_Excogitation"},cd_CHAIN_STRATAGEM:{name:"cd_ChainStratagem"},cd_AETHERPACT:{name:"cd_Aetherpact"},cd_DISSOLVE_UNION:{name:"cd_DissolveUnion"},cd_RECITATION:{name:"cd_Recitation"},cd_FEY_BLESSING:{name:"cd_FeyBlessing"},cd_SUMMON_SERAPH:{name:"cd_SummonSeraph"},cd_CONSOLATION:{name:"cd_Consolation"},cd_CONSOLATION_INTERNAL:{name:"cd_ConsolationInternal"},cd_PROTRACTION:{name:"cd_Protraction"},cd_EXPEDIENT:{name:"cd_Expedient"},cd_BANEFUL_IMPACTION:{name:"cd_BanefulImpaction"},cd_SERAPHISM:{name:"cd_Seraphism"}}),P1=se()({AETHERFLOW:{name:"Aetherflow",maximumCharges:3,label:{zh:""}},FAERIE_GAUGE:{name:"Faerie Gauge",maximumStacks:100,label:{zh:""}}}),QR=se()({BIO_II:{name:"Bio II",label:{zh:""}},CATALYZE:{name:"Catalyze",label:{zh:""}},GALVANIZE:{name:"Galvanize",label:{zh:""}},WHISPERING_DAWN:{name:"Whispering Dawn",label:{zh:""}},ANGELS_WHISPER:{name:"Angel's Whisper",label:{zh:""}},FEY_ILLUMINATION:{name:"Fey Illumination",label:{zh:""}},SERAPHIC_ILLUMINATION:{name:"Seraphic Illumination",label:{zh:""}},SACRED_SOIL_MIT:{name:"Sacred Soil (Mitigation)",label:{zh:"[]"},mayNotBeCanceled:!0},SACRED_SOIL_ZONE:{name:"Sacred Soil",label:{zh:""},mayBeToggled:!0},EMERGENCY_TACTICS:{name:"Emergency Tactics",label:{zh:""}},DISSIPATION:{name:"Dissipation",label:{zh:""},mayNotBeCanceled:!0},EXCOGITATION:{name:"Excogitation",label:{zh:""}},CHAIN_STRATAGEM:{name:"Chain Stratagem",label:{zh:""},specialDebuff:!0},IMPACT_IMMINENT:{name:"Impact Imminent",label:{zh:""}},BIOLYSIS:{name:"Biolysis",label:{zh:""}},RECITATION:{name:"Recitation",label:{zh:""}},FEY_UNION:{name:"Fey Union",label:{zh:""}},SERAPHIC_VEIL:{name:"Seraphic Veil",label:{zh:""}},PROTRACTION:{name:"Protraction",label:{zh:""}},EXPEDIENCE:{name:"Expedience",label:{zh:""}},DESPERATE_MEASURES:{name:"Desperate Measures",label:{zh:""}},BANEFUL_IMPACTION:{name:"Baneful Impaction",label:{zh:""}},SERAPHISM:{name:"Seraphism",label:{zh:""},mayNotBeCanceled:!0},SERAPHISM_REGEN:{name:"Seraphism (Regen)",label:{zh:"[]"}}}),G1=se()({SERAPH_SUMMON_TIMER:{name:"Seraph Summon Timer",label:{zh:""}}}),B1=se()({CORRUPTION_MASTERY_II:{name:"Corruption Mastery II",level:72},BROIL_MASTERY_III:{name:"Broil Mastery III",level:72},ENHANCED_SACRED_SOIL:{name:"Enhanced Sacred Soil",level:78},BROIL_MASTERY_IV:{name:"Broil Mastery IV",level:82},ART_OF_WAR_MASTERY:{name:"Art of War Mastery",level:82},ENHANCED_DEPLOYMENT_TACTICS:{name:"Enhanced Deployment Tactics",level:88},ENHANCED_CHAIN_STRATAGEM:{name:"Enhanced Chain Stratagem",level:92},TACTICIANS_MASTERY:{name:"Tactician's Mastery",level:94},SUCCOR_MASTERY:{name:"Succor Mastery",level:96},ENHANCED_RECITATION:{name:"Enhanced Recitation",level:98}}),F1={...P1,...QR,...G1},j1=se()({DIAGNOSIS:{id:24284,name:"Diagnosis",label:{zh:""}},EUKRASIAN_DIAGNOSIS:{id:24291,name:"Eukrasian Diagnosis",label:{zh:""}},EUKRASIAN_DIAGNOSIS_POP:{name:"Pop Eukrasian Diagnosis",label:{zh:""}},HAIMA:{id:24305,name:"Haima",label:{zh:""}},HAIMA_POP:{name:"Pop Haima",label:{zh:""}},EGEIRO:{id:24287,name:"Egeiro",label:{zh:""}},PROGNOSIS:{id:24286,name:"Prognosis",label:{zh:""}},EUKRASIAN_PROGNOSIS:{id:24292,name:"Eukrasian Prognosis",label:{zh:""}},EUKRASIAN_PROGNOSIS_II:{id:37034,name:"Eukrasian Prognosis II",label:{zh:" II"}},EUKRASIAN_PROGNOSIS_POP:{name:"Pop Eukrasian Prognosis",label:{zh:""}},EUKRASIAN_PROGNOSIS_II_POP:{name:"Pop Eukrasian Prognosis II",label:{zh:" II "}},PANHAIMA:{id:24311,name:"Panhaima",label:{zh:""}},PANHAIMA_POP:{name:"Pop Panhaima",label:{zh:""}},PHYSIS_II:{id:24302,name:"Physis II",label:{zh:" II"}},HOLOS:{id:24310,name:"Holos",label:{zh:""}},PEPSIS:{id:24301,name:"Pepsis",label:{zh:""}},KARDIA:{id:24285,name:"Kardia",label:{zh:""}},EUKRASIA:{id:24290,name:"Eukrasia",label:{zh:""}},SOTERIA:{id:24294,name:"Soteria",label:{zh:""}},ICARUS:{id:24295,name:"Icarus",label:{zh:""}},ZOE:{id:24300,name:"Zoe",label:{zh:""}},KRASIS:{id:24317,name:"Krasis",label:{zh:""}},PHILOSOPHIA:{id:37035,name:"Philosophia",label:{zh:""}},RHIZOMATA:{id:24309,name:"Rhizomata",label:{zh:""}},DRUOCHOLE:{id:24296,name:"Druochole",label:{zh:""}},IXOCHOLE:{id:24299,name:"Ixochole",label:{zh:""}},KERACHOLE:{id:24298,name:"Kerachole",label:{zh:""}},TAUROCHOLE:{id:24303,name:"Taurochole",label:{zh:""}},DOSIS:{id:24283,name:"Dosis",label:{zh:""}},DOSIS_II:{id:24306,name:"Dosis II",label:{zh:" II"}},DOSIS_III:{id:24312,name:"Dosis III",label:{zh:" III"}},EUKRASIAN_DOSIS:{id:24293,name:"Eukrasian Dosis",label:{zh:""}},EUKRASIAN_DOSIS_II:{id:24308,name:"Eukrasian Dosis II",label:{zh:" II"}},EUKRASIAN_DOSIS_III:{id:24314,name:"Eukrasian Dosis III",label:{zh:" III"}},TOXIKON:{id:24304,name:"Toxikon",label:{zh:""}},TOXIKON_II:{id:24316,name:"Toxikon II",label:{zh:" II"}},DYSKRASIA:{id:24297,name:"Dyskrasia",label:{zh:""}},DYSKRASIA_II:{id:24315,name:"Dyskrasia II",label:{zh:" II"}},EUKRASIAN_DYSKRASIA:{id:37032,name:"Eukrasian Dyskrasia",label:{zh:""}},PHLEGMA:{id:24289,name:"Phlegma",label:{zh:""}},PHLEGMA_II:{id:24307,name:"Phlegma II",label:{zh:" II"}},PHLEGMA_III:{id:24313,name:"Phlegma III",label:{zh:" III"}},PSYCHE:{id:37033,name:"Psyche",label:{zh:""}},PNEUMA:{id:24318,name:"Pneuma",label:{zh:""}}}),z1=se()({cd_HAIMA:{name:"cd_Haima"},cd_PANHAIMA:{name:"cd_PANHAIMA"},cd_PHYSIS:{name:"cd_PHYSIS",label:{zh:"CD"}},cd_HOLOS:{name:"cd_HOLOS"},cd_PEPSIS:{name:"cd_PEPSIS"},cd_KARDIA:{name:"cd_KARDIA"},cd_EUKRASIA:{name:"cd_EUKRASIA"},cd_SOTERIA:{name:"cd_SOTERIA"},cd_ICARUS:{name:"cd_ICARUS"},cd_ZOE:{name:"cd_ZOE"},cd_KRASIS:{name:"cd_KRASIS"},cd_PHILOSOPHIA:{name:"cd_PHILOSOPHIA"},cd_RHIZOMATA:{name:"cd_RHIZOMATA"},cd_DRUOCHOLE:{name:"cd_DRUOCHOLE"},cd_IXOCHOLE:{name:"cd_IXOCHOLE"},cd_KERACHOLE:{name:"cd_KERACHOLE"},cd_TAUROCHOLE:{name:"cd_TAUROCHOLE"},cd_PHLEGMA:{name:"cd_PHLEGMA"},cd_PSYCHE:{name:"cd_PSYCHE"},cd_PNEUMA:{name:"cd_PNEUMA"},cd_DIAGNOSIS_POP:{name:"cd_DIAGNOSIS_POP",label:{zh:"CD"}},cd_PROGNOSIS_POP:{name:"cd_PROGNOSIS_POP",label:{zh:"CD"}},cd_HAIMA_POP:{name:"cd_HAIMA_POP"},cd_PANHAIMA_POP:{name:"cd_PANHAIMA_POP"}}),Y1=se()({ADDERSGALL:{name:"Addersgall",label:{zh:""}},ADDERSTING:{name:"Addersting",label:{zh:""}}}),$N=se()({EUKRASIA:{id:2606,name:"Eukrasia",label:{zh:""}},EUKRASIAN_DIAGNOSIS:{id:2607,name:"Eukrasian Diagnosis",label:{zh:""}},DIFFERENTIAL_DIAGNOSIS:{id:2608,name:"Differential Diagnosis",label:{zh:""}},HAIMA:{id:2612,name:"Haima",label:{zh:""},mayNotBeCanceled:!0},HAIMATINON:{id:2642,name:"Haimatinon",label:{zh:""},maximumStacks:5,mayNotBeCanceled:!0},EUKRASIAN_PROGNOSIS:{id:2609,name:"Eukrasian Prognosis",label:{zh:""}},PANHAIMA:{id:2613,name:"Panhaima",label:{zh:""},mayNotBeCanceled:!0},PANHAIMATINON:{id:2643,name:"Panhaimatinon",label:{zh:""},maximumStacks:5,mayNotBeCanceled:!0},PHYSIS_II:{id:2620,name:"Physis II",label:{zh:" II"}},AUTOPHYSIS:{id:2621,name:"Autophysis",label:{zh:""}},KARDIA:{id:2604,name:"Kardia",label:{zh:""}},KARDION:{id:2605,name:"Kardion",label:{zh:""}},PHILOSOPHIA:{id:3898,name:"Philosophia",label:{zh:""}},EUDAIMONIA:{id:3899,name:"Eudaimonia",label:{zh:""}},SOTERIA:{id:2610,name:"Soteria",label:{zh:""},maximumStacks:4},ZOE:{id:2611,name:"Zoe",label:{zh:""}},KRASIS:{id:2622,name:"Krasis",label:{zh:""}},KERACHOLE:{id:2618,name:"Kerachole",label:{zh:""}},KERAKEIA:{id:2938,name:"Kerakeia",label:{zh:"[]"}},TAUROCHOLE:{id:2619,name:"Taurochole",label:{zh:""}},EUKRASIAN_DOSIS:{id:2614,name:"Eukrasian Dosis",label:{zh:""}},EUKRASIAN_DOSIS_II:{id:2615,name:"Eukrasian Dosis II",label:{zh:" II"}},EUKRASIAN_DOSIS_III:{id:2616,name:"Eukrasian Dosis III",label:{zh:" III"}},EUKRASIAN_DYSKRASIA:{id:3897,name:"Eukrasian Dyskrasia",label:{zh:""}},PNEUMA:{id:2623,name:"Pneuma",label:{zh:""}},HOLOS:{id:3003,name:"Holos",label:{zh:""}},HOLOSAKOS:{id:3365,name:"Holosakos",label:{zh:""}}}),K1=se()({PEPSIS:{name:"Pepsis",label:{zh:""}}}),V1=se()({OFFENSIVE_MAGIC_MASTERY:{name:"Offensive Magic Mastery",level:72},OFFENSIVE_MAGIC_MASTERY_II:{name:"Offensive Magic Mastery II",level:82},ENHANCED_KERACHOLE:{name:"Enhanced Kerachole",level:78},ENHANCED_ZOE:{name:"Enhanced Zoe",level:88},ENHANCED_SOTERIA:{name:"Enhanced Soteria",level:94},EUKRASIAN_PROGNOSIS_MASTERY:{name:"Eukrasian Prognosis Mastery",level:96},ENHANCED_PHYSIS_II:{name:"Enhanced Physis II",level:98}}),W1={...Y1,...$N,...K1},JN=se()({SUMMON_CARBUNCLE:{id:25798,name:"Summon Carbuncle",label:{zh:""}},RADIANT_AEGIS:{id:25799,name:"Radiant Aegis",label:{zh:""}},PHYSICK:{id:16230,name:"Physick",label:{zh:""}},GEMSHINE:{id:25883,name:"Gemshine",label:{zh:""}},FESTER:{id:181,name:"Fester",label:{zh:""}},ENERGY_DRAIN:{id:16508,name:"Energy Drain",label:{zh:""}},RESURRECTION:{id:173,name:"Resurrection",label:{zh:""}},OUTBURST:{id:16511,name:"Outburst",label:{zh:""}},PRECIOUS_BRILLIANCE:{id:25884,name:"Precious Brilliance",label:{zh:""}},RUBY_OUTBURST:{id:25814,name:"Ruby Outburst",label:{zh:""}},TOPAZ_OUTBURST:{id:25815,name:"Topaz Outburst",label:{zh:""}},EMERALD_OUTBURST:{id:25816,name:"Emerald Outburst",label:{zh:""}},SUMMON_IFRIT:{id:25805,name:"Summon Ifrit",label:{zh:""}},PAINFLARE:{id:3578,name:"Painflare",label:{zh:""}},SUMMON_TITAN:{id:25806,name:"Summon Titan",label:{zh:""}},SUMMON_GARUDA:{id:25807,name:"Summon Garuda",label:{zh:""}},ENERGY_SIPHON:{id:16510,name:"Energy Siphon",label:{zh:""}},RUBY_RUIN_III:{id:25817,name:"Ruby Ruin III",label:{zh:""}},TOPAZ_RUIN_III:{id:25818,name:"Topaz Ruin III",label:{zh:""}},EMERALD_RUIN_III:{id:25819,name:"Emerald Ruin III",label:{zh:""}},RUIN_III:{id:3579,name:"Ruin III",label:{zh:""}},ASTRAL_IMPULSE:{id:25820,name:"Astral Impulse",label:{zh:""}},ASTRAL_FLARE:{id:25821,name:"Astral Flare",label:{zh:""}},ASTRAL_FLOW:{id:25822,name:"Astral Flow",label:{zh:""}},DEATHFLARE:{id:3582,name:"Deathflare",label:{zh:""}},RUIN_IV:{id:7426,name:"Ruin IV",label:{zh:""}},SEARING_LIGHT:{id:25801,name:"Searing Light",label:{zh:""}},SUMMON_BAHAMUT:{id:7427,name:"Summon Bahamut",label:{zh:""}},ENKINDLE_BAHAMUT:{id:7429,name:"Enkindle Bahamut",label:{zh:""}},RUBY_RITE:{id:25823,name:"Ruby Rite",label:{zh:""}},TOPAZ_RITE:{id:25824,name:"Topaz Rite",label:{zh:""}},EMERALD_RITE:{id:25825,name:"Emerald Rite",label:{zh:""}},TRI_DISASTER:{id:25826,name:"Tri-disaster",label:{zh:""}},RUBY_DISASTER:{id:25827,name:"Ruby Disaster",label:{zh:""}},TOPAZ_DISASTER:{id:25828,name:"Topaz Disaster",label:{zh:""}},EMERALD_DISASTER:{id:25829,name:"Emerald Disaster",label:{zh:""}},SUMMON_PHOENIX:{id:25831,name:"Summon Phoenix",label:{zh:""}},FOUNTAIN_OF_FIRE:{id:16514,name:"Fountain of Fire",label:{zh:""}},BRAND_OF_PURGATORY:{id:16515,name:"Brand of Purgatory",label:{zh:""}},REKINDLE:{id:25830,name:"Rekindle",label:{zh:""}},ENKINDLE_PHOENIX:{id:16516,name:"Enkindle Phoenix",label:{zh:""}},RUBY_CATASTROPHE:{id:25832,name:"Ruby Catastrophe",label:{zh:""}},TOPAZ_CATASTROPHE:{id:25833,name:"Topaz Catastrophe",label:{zh:""}},EMERALD_CATASTROPHE:{id:25834,name:"Emerald Catastrophe",label:{zh:""}},CRIMSON_CYCLONE:{id:25835,name:"Crimson Cyclone",label:{zh:""}},CRIMSON_STRIKE:{id:25885,name:"Crimson Strike",label:{zh:""}},MOUNTAIN_BUSTER:{id:25836,name:"Mountain Buster",label:{zh:""}},SLIPSTREAM:{id:25837,name:"Slipstream",label:{zh:""}},SUMMON_IFRIT_II:{id:25838,name:"Summon Ifrit II",label:{zh:" II"}},SUMMON_TITAN_II:{id:25839,name:"Summon Titan II",label:{zh:" II"}},SUMMON_GARUDA_II:{id:25840,name:"Summon Garuda II",label:{zh:" II"}},NECROTIZE:{id:36990,name:"Necrotize",label:{zh:""}},SEARING_FLASH:{id:36991,name:"Searing Flash",label:{zh:""}},SUMMON_SOLAR_BAHAMUT:{id:36992,name:"Summon Solar Bahamut",label:{zh:""}},UMBRAL_IMPULSE:{id:36994,name:"Umbral Impulse",label:{zh:""}},UMBRAL_FLARE:{id:36995,name:"Umbral Flare",label:{zh:""}},SUNFLARE:{id:36996,name:"Sunflare",label:{zh:""}},ENKINDLE_SOLAR_BAHAMUT:{id:36998,name:"Enkindle Solar Bahamut",label:{zh:""}},LUX_SOLARIS:{id:36997,name:"Lux Solaris",label:{zh:""}},INFERNO:{id:25852,name:"Inferno",label:{zh:""}},EARTHEN_FURY:{id:25853,name:"Earthen Fury",label:{zh:""}},AERIAL_BLAST:{id:25854,name:"Aerial Blast",label:{zh:""}},WYRMWAVE:{id:7428,name:"Wyrmwave",label:{zh:""}},SCARLET_FLAME:{id:16519,name:"Scarlet Flame",label:{zh:""}},LUXWAVE:{id:36993,name:"Luxwave",label:{zh:""}},AKH_MORN:{id:7449,name:"Akh Morn",label:{zh:""}},REVELATION:{id:16518,name:"Revelation",label:{zh:""}},EXODUS:{id:36999,name:"Exodus",label:{zh:""}}}),X1=se()({cd_RADIANT_AEGIS:{name:"cd_RADIANT_AEGIS"},cd_ASTRAL_FLOW:{name:"cd_ASTRAL_FLOW"},cd_ENKINDLE:{name:"cd_ENKINDLE",label:{zh:"CD//"}},cd_DEMI_SUMMON:{name:"cd_DEMI_SUMMON",label:{zh:"CD"}},cd_ENERGY_DRAIN:{name:"cd_ENERGY_DRAIN"},cd_AETHERFLOW:{name:"cd_AETHERFLOW",label:{zh:"CD"}},cd_SEARING_LIGHT:{name:"cd_SEARING_LIGHT"},cd_SEARING_FLASH:{name:"cd_SEARING_FLASH"},cd_LUX_SOLARIS:{name:"cd_LUX_SOLARIS"},cd_MOUNTAIN_BUSTER:{name:"cd_MOUNTAIN_BUSTER"},cd_SUMMON_LOCKOUT:{name:"cd_SUMMON_LOCKOUT"}}),q1=se()({AETHERFLOW:{name:"Aetherflow",label:{zh:""}},RUBY_ARCANUM:{name:"Ruby Arcanum",label:{zh:""}},TOPAZ_ARCANUM:{name:"Topaz Arcanum",label:{zh:""}},EMERALD_ARCANUM:{name:"Emerald Arcanum",label:{zh:""}},FIRE_ATTUNEMENT:{name:"Fire Attunement",label:{zh:""}},EARTH_ATTUNEMENT:{name:"Earth Attunement",label:{zh:""}},WIND_ATTUNEMENT:{name:"Wind Attunement",label:{zh:""}},ACTIVE_DEMI:{name:"Active Demi",label:{zh:""}}}),$R=se()({AETHERFLOW:{name:"Aetherflow",maximumStacks:2,label:{zh:""}},CRIMSON_STRIKE_READY:{name:"Crimson Strike Ready",label:{zh:""}},EVERLASTING_FLIGHT:{name:"Everlasting Flight",label:{zh:""}},FURTHER_RUIN:{name:"Further Ruin",label:{zh:""}},GARUDAS_FAVOR:{name:"Garuda's Favor",label:{zh:""}},IFRITS_FAVOR:{name:"Ifrit's Favor",label:{zh:""}},RADIANT_AEGIS:{name:"Radiant Aegis",label:{zh:""}},REFULGENT_LUX:{name:"Refulgent Lux",label:{zh:""}},REKINDLE:{name:"Rekindle",label:{zh:""}},RUBYS_GLIMMER:{name:"Ruby's Glimmer",label:{zh:""}},SEARING_LIGHT:{name:"Searing Light",label:{zh:""}},SLIPSTREAM:{name:"Slipstream",mayBeToggled:!0,label:{zh:""}},TITANS_FAVOR:{name:"Titan's Favor",label:{zh:""}},UNDYING_FLAME:{name:"Undying Flame",label:{zh:""}}}),Z1=se()({NEXT_DEMI_CYCLE:{name:"Next Demi Cycle",label:{zh:""}},DEMI_AUTO:{name:"Demi Auto-attack",label:{zh:""},isPetTracker:!0}}),Q1=se()({RUIN_MASTERY_III:{name:"Ruin Mastery III",level:72},OUTBURST_MASTERY:{name:"Outburst Mastery",level:74},ENHANCED_SUMMON_BAHAMUT:{name:"Enhanced Summon Bahamut",level:80},OUTBURST_MASTERY_II:{name:"Outburst Mastery II",level:82},RUIN_MASTERY_IV:{name:"Ruin Mastery IV",level:84},ELEMENTAL_MASTERY:{name:"Elemental Mastery",level:86},ENHANCED_RADIANT_AEGIS:{name:"Enhanced Radiant Aegis",level:88},ENKINDLE_II:{name:"Enkindle II",level:90},ENHANCED_FESTER:{name:"Enhanced Fester",level:92},ARCANE_MASTERY:{name:"Arcane Mastery",level:94},ENHANCED_SEARING_LIGHT:{name:"Enhanced Searing Light",level:96},ENHANCED_SUMMON_BAHAMUT_II:{name:"Enhanced Summon Bahamut II",level:100}}),$1={...q1,...$R,...Z1},J1=se()({STEEL_FANGS:{id:34606,name:"Steel Fangs",label:{zh:"",ja:""}},HUNTERS_STING:{id:34608,name:"Hunter's Sting",label:{zh:"",ja:""}},REAVING_FANGS:{id:34607,name:"Reaving Fangs",label:{zh:"",ja:""}},WRITHING_SNAP:{id:34632,name:"Writhing Snap",label:{zh:"",ja:""}},SWIFTSKINS_STING:{id:34609,name:"Swiftskin's Sting",label:{zh:"",ja:""}},STEEL_MAW:{id:34614,name:"Steel Maw",label:{zh:"",ja:""}},FLANKSTING_STRIKE:{id:34610,name:"Flanksting Strike",label:{zh:"",ja:""}},FLANKSBANE_FANG:{id:34611,name:"Flanksbane Fang",label:{zh:"",ja:""}},HINDSTING_STRIKE:{id:34612,name:"Hindsting Strike",label:{zh:"",ja:""}},HINDSBANE_FANG:{id:34613,name:"Hindsbane Fang",label:{zh:"",ja:""}},REAVING_MAW:{id:34615,name:"Reaving Maw",label:{zh:"",ja:""}},SLITHER:{id:34646,name:"Slither",label:{zh:"",ja:""}},HUNTERS_BITE:{id:34616,name:"Hunter's Bite",label:{zh:"",ja:""}},SWIFTSKINS_BITE:{id:34617,name:"Swiftskin's Bite",label:{zh:"",ja:""}},JAGGED_MAW:{id:34618,name:"Jagged Maw",label:{zh:"",ja:""}},BLOODIED_MAW:{id:34619,name:"Bloodied Maw",label:{zh:"",ja:""}},SERPENTS_TAIL:{id:35920,name:"Serpent's Tail",label:{zh:"",ja:""}},DEATH_RATTLE:{id:34634,name:"Death Rattle",label:{zh:"",ja:""}},LAST_LASH:{id:34635,name:"Last Lash",label:{zh:"",ja:""}},VICEWINDER:{id:34620,name:"Vicewinder",label:{zh:"",ja:""}},HUNTERS_COIL:{id:34621,name:"Hunter's Coil",label:{zh:"",ja:""}},SWIFTSKINS_COIL:{id:34622,name:"Swiftskin's Coil",label:{zh:"",ja:""}},VICEPIT:{id:34623,name:"Vicepit",label:{zh:"",ja:""}},HUNTERS_DEN:{id:34624,name:"Hunter's Den",label:{zh:"",ja:""}},SWIFTSKINS_DEN:{id:34625,name:"Swiftskin's Den",label:{zh:"",ja:""}},TWINFANG:{id:35921,name:"Twinfang",label:{zh:"",ja:""}},TWINBLOOD:{id:35922,name:"Twinblood",label:{zh:"",ja:""}},TWINFANG_BITE:{id:34636,name:"Twinfang Bite",label:{zh:"",ja:""}},TWINBLOOD_BITE:{id:34637,name:"Twinblood Bite",label:{zh:"",ja:""}},TWINFANG_THRESH:{id:34638,name:"Twinfang Thresh",label:{zh:"",ja:""}},TWINBLOOD_THRESH:{id:34639,name:"Twinblood Thresh",label:{zh:"",ja:""}},UNCOILED_FURY:{id:34633,name:"Uncoiled Fury",label:{zh:"",ja:""}},SERPENTS_IRE:{id:34647,name:"Serpent's Ire",label:{zh:"",ja:""}},REAWAKEN:{id:34626,name:"Reawaken",label:{zh:"",ja:""}},FIRST_GENERATION:{id:34627,name:"First Generation",label:{zh:"",ja:""}},SECOND_GENERATION:{id:34628,name:"Second Generation",label:{zh:"",ja:""}},THIRD_GENERATION:{id:34629,name:"Third Generation",label:{zh:"",ja:""}},FOURTH_GENERATION:{id:34630,name:"Fourth Generation",label:{zh:"",ja:""}},UNCOILED_TWINFANG:{id:34644,name:"Uncoiled Twinfang",label:{zh:"",ja:""}},UNCOILED_TWINBLOOD:{id:34645,name:"Uncoiled Twinblood",label:{zh:"",ja:""}},OUROBOROS:{id:34631,name:"Ouroboros",label:{zh:"",ja:""}},FIRST_LEGACY:{id:34640,name:"First Legacy",label:{zh:"",ja:""}},SECOND_LEGACY:{id:34641,name:"Second Legacy",label:{zh:"",ja:""}},THIRD_LEGACY:{id:34642,name:"Third Legacy",label:{zh:"",ja:""}},FOURTH_LEGACY:{id:34643,name:"Fourth Legacy",label:{zh:"",ja:""}}}),ex=se()({cd_SERPENTS_IRE:{name:"cd_SerpentsIre"},cd_VICEWINDER:{name:"cd_Vicewinder"},cd_SLITHER:{name:"cd_Slither"},cd_SERPENTS_TAIL:{name:"cd_SerpentsTail"},cd_TWINFANG:{name:"cd_Twinfang"},cd_TWINBLOOD:{name:"cd_Twinblood"}}),tx=se()({RATTLING_COIL:{name:"Rattling Coil",label:{zh:""}},SERPENT_OFFERINGS:{name:"Serpent Offerings",label:{zh:""}},ANGUINE_TRIBUTE:{name:"Anguine Tribute",label:{zh:""}}}),JR=se()({HUNTERS_INSTINCT:{name:"Hunter's Instinct",label:{zh:""}},SWIFTSCALED:{name:"Swiftscaled",label:{zh:""}},HONED_STEEL:{name:"Honed Steel",label:{zh:""}},HONED_REAVERS:{name:"Honed Reavers",label:{zh:""}},FLANKSTUNG_VENOM:{name:"Flankstung Venom",label:{zh:""}},HINDSTUNG_VENOM:{name:"Hindstung Venom",label:{zh:""}},FLANKSBANE_VENOM:{name:"Flanksbane Venom",label:{zh:""}},HINDSBANE_VENOM:{name:"Hindsbane Venom",label:{zh:""}},GRIMSKINS_VENOM:{name:"Grimskin's Venom",label:{zh:""}},GRIMHUNTERS_VENOM:{name:"Grimhunter's Venom",label:{zh:""}},HUNTERS_VENOM:{name:"Hunter's Venom",label:{zh:""}},SWIFTSKINS_VENOM:{name:"Swiftskin's Venom",label:{zh:""}},POISED_FOR_TWINFANG:{name:"Poised for Twinfang",label:{zh:""}},POISED_FOR_TWINBLOOD:{name:"Poised for Twinblood",label:{zh:""}},FELLHUNTERS_VENOM:{name:"Fellhunter's Venom",label:{zh:""}},FELLSKINS_VENOM:{name:"Fellskin's Venom",label:{zh:""}},READY_TO_REAWAKEN:{name:"Ready to Reawaken",label:{zh:""}},REAWAKENED:{name:"Reawakened",label:{zh:""},mayNotBeCanceled:!0}}),ax=se()({VPR_COMBO:{name:"VPR Combo"},DEATH_RATTLE_READY:{name:"Death Rattle Ready"},VPR_AOE_COMBO:{name:"VPR AoE Combo"},LAST_LASH_READY:{name:"Last Lash Ready"},HUNTERS_COIL_READY:{name:"Hunter's Coil Ready"},SWIFTSKINS_COIL_READY:{name:"Swiftskin's Coil Ready"},COIL_OGCD_READY:{name:"Coil oGCD Ready"},HUNTERS_DEN_READY:{name:"Hunter's Den Ready"},SWIFTSKINS_DEN_READY:{name:"Swiftskin's Den Ready"},DEN_OGCD_READY:{name:"Den oGCD Ready"},UNCOILED_OGCD_READY:{name:"Uncoiled oGCD Ready"},REAWAKEN_COMBO:{name:"Reawaken Combo"},LEGACY_READY:{name:"Legacy Ready"}}),nx=se()({MELEE_MASTERY_VPR:{name:"Melee Mastery VPR",level:74},VIPERS_BITE:{name:"Viper's Bite",level:75},VIPERS_THRESH:{name:"Viper's Thresh",level:80},VIPERS_RATTLE:{name:"Viper's Rattle",level:82},ENHANCED_SLITHER:{name:"Enhanced Slither",level:84},MELEE_MASTERY_II_VPR:{name:"Melee Mastery II VPR",level:84},ENHANCED_VIPERS_RATTLE:{name:"Enhanced Viper's Rattle",level:88},SERPENTS_LINEAGE:{name:"Serpent's Lineage",level:90},UNCOILED_FANGS:{name:"Uncoiled Fangs",level:92},ENHANCED_SERPENTS_LINEAGE:{name:"Enhanced Serpent's Lineage",level:96},SERPENTS_LEGACY:{name:"Serpent's Legacy",level:100}}),ix={...tx,...JR,...ax},ox=se()({HEAVY_SWING:{id:31,name:"Heavy Swing",label:{zh:""}},MAIM:{id:37,name:"Maim",label:{zh:""}},STORMS_PATH:{id:42,name:"Storm's Path",label:{zh:""}},STORMS_EYE:{id:45,name:"Storm's Eye",label:{zh:""}},FELL_CLEAVE:{id:3549,name:"Fell Cleave",label:{zh:""}},UPHEAVAL:{id:7387,name:"Upheaval",label:{zh:""}},ONSLAUGHT:{id:7386,name:"Onslaught",label:{zh:""}},TOMAHAWK:{id:46,name:"Tomahawk",label:{zh:""}},OVERPOWER:{id:41,name:"Overpower",label:{zh:""}},MYTHRIL_TEMPEST:{id:16462,name:"Mythril Tempest",label:{zh:""}},DECIMATE:{id:3550,name:"Decimate",label:{zh:""}},OROGENY:{id:25752,name:"Orogeny",label:{zh:""}},INNER_RELEASE:{id:7389,name:"Inner Release",label:{zh:""}},PRIMAL_WRATH:{id:36924,name:"Primal Wrath",label:{zh:""}},PRIMAL_REND:{id:25753,name:"Primal Rend",label:{zh:""}},PRIMAL_RUINATION:{id:36925,name:"Primal Ruination",label:{zh:""}},INFURIATE:{id:52,name:"Infuriate",label:{zh:""}},INNER_CHAOS:{id:16465,name:"Inner Chaos",label:{zh:""}},CHAOTIC_CYCLONE:{id:16463,name:"Chaotic Cyclone",label:{zh:""}},THRILL_OF_BATTLE:{id:40,name:"Thrill of Battle",label:{zh:""}},EQUILIBRIUM:{id:3552,name:"Equilibrium",label:{zh:""}},SHAKE_IT_OFF:{id:7388,name:"Shake It Off",label:{zh:""}},RAW_INTUITION:{id:3551,name:"Raw Intuition",label:{zh:""}},NASCENT_FLASH:{id:16464,name:"Nascent Flash",label:{zh:""}},BLOODWHETTING:{id:25751,name:"Bloodwhetting",label:{zh:""}},VENGEANCE:{id:44,name:"Vengeance",label:{zh:""}},DAMNATION:{id:36923,name:"Damnation",label:{zh:""}},HOLMGANG:{id:43,name:"Holmgang",label:{zh:""}},RETALIATION:{name:"Retaliation",label:{zh:""}},DEFIANCE:{id:48,name:"Defiance",label:{zh:""}},RELEASE_DEFIANCE:{id:32066,name:"Release Defiance",label:{zh:""}}}),lx=se()({cd_INNER_RELEASE:{name:"cd_InnerRelease"},cd_PRIMAL_WRATH:{name:"cd_PrimalWrath"},cd_UPHEAVAL:{name:"cd_Upheaval"},cd_ONSLAUGHT:{name:"cd_Onslaught"},cd_INFURIATE:{name:"cd_Infuriate"},cd_VENGEANCE:{name:"cd_Vengeance"},cd_THRILL_OF_BATTLE:{name:"cd_ThrillOfBattle"},cd_RAW_INTUITION:{name:"cd_RawIntuition"},cd_EQUILIBRIUM:{name:"cd_Equilibrium"},cd_SHAKE_IT_OFF:{name:"cd_ShakeItOff"},cd_HOLMGANG:{name:"cd_Holmgang"},cd_RETALIATION:{name:"cd_Retaliation"},cd_DEFIANCE:{name:"cd_Defiance"},cd_RELEASE_DEFIANCE:{name:"cd_ReleaseDefiance"}}),sx=se()({BEAST_GAUGE:{name:"Beast Gauge",label:{zh:""}}}),eT=se()({SURGING_TEMPEST:{name:"Surging Tempest",label:{zh:"buff"}},INNER_RELEASE:{name:"Inner Release",label:{zh:"buff"},maximumStacks:3},INNER_STRENGTH:{name:"Inner Strength",label:{zh:"buff"}},BURGEONING_FURY:{name:"Burgeoning Fury",label:{zh:"buff"},maximumStacks:3},WRATHFUL:{name:"Wrathful",label:{zh:""}},PRIMAL_REND_READY:{name:"Primal Rend Ready",label:{zh:""}},PRIMAL_RUINATION_READY:{name:"Primal Ruination Ready",label:{zh:""}},NASCENT_CHAOS:{name:"Nascent Chaos",label:{zh:"buff"}},NASCENT_FLASH:{name:"Nascent Flash",label:{zh:"buff"}},THRILL_OF_BATTLE:{name:"Thrill of Battle",label:{zh:""}},EQUILIBRIUM:{name:"Equilibrium",label:{zh:"hot"}},SHAKE_IT_OFF:{name:"Shake It Off",label:{zh:""}},SHAKE_IT_OFF_OVER_TIME:{name:"Shake It Off Over Time",label:{zh:"hot"}},RAW_INTUITION:{name:"Raw Intuition",label:{zh:"buff"}},STEM_THE_TIDE:{name:"Stem the Tide",label:{zh:"buff"}},STEM_THE_FLOW:{name:"Stem the Flow",label:{zh:"buff"}},BLOODWHETTING:{name:"Bloodwhetting",label:{zh:"buff"}},VENGEANCE:{name:"Vengeance",label:{zh:"30"}},DAMNATION:{name:"Damnation",label:{zh:"40"}},PRIMEVAL_IMPULSE:{name:"Primeval Impulse",label:{zh:"hot"}},HOLMGANG:{name:"Holmgang",label:{zh:"buff"}},DEFIANCE:{name:"Defiance",label:{zh:"buff"},mayNotBeCanceled:!0}}),rx=se()({STORM_COMBO:{name:"Storm Combo",label:{zh:""}},TEMPEST_COMBO:{name:"Tempest Combo",label:{zh:"aoe"}}}),cx=se()({NASCENT_CHAOS:{name:"Nascent Chaos",level:72},MASTERING_THE_BEAST:{name:"Mastering the Beast",level:74},ENHANCED_SHAKE_IT_OFF:{name:"Enhanced Shake It Off",level:76},ENHANCED_THRILL_OF_BATTLE:{name:"Enhanced Thrill of Battle",level:78},RAW_INTUITION_MASTERY:{name:"Raw Intuition Mastery",level:82},ENHANCED_NASCENT_FLASH:{name:"Enhanced Nascent Flash",level:82},ENHANCED_EQUILIBRIUM:{name:"Enhanced Equilibrium",level:84},ENHANCED_ONSLAUGHT:{name:"Enhanced Onslaught",level:88},VENGEANCE_MASTERY:{name:"Vengeance Mastery",level:92},ENHANCED_INNER_RELEASE:{name:"Enhanced Inner Release",level:96},ENHANCED_PRIMAL_REND:{name:"Enhanced Primal Rend",level:100}}),ux={...sx,...eT,...rx},dx=se()({CURE:{id:120,name:"Cure",label:{zh:"",ja:""}},MEDICA:{id:124,name:"Medica",label:{zh:"",ja:""}},RAISE:{id:125,name:"Raise",label:{zh:"",ja:""}},CURE_II:{id:135,name:"Cure II",label:{zh:"",ja:""}},PRESENCE_OF_MIND:{id:136,name:"Presence of Mind",label:{zh:"",ja:""}},REGEN:{id:137,name:"Regen",label:{zh:"",ja:""}},CURE_III:{id:131,name:"Cure III",label:{zh:"",ja:""}},AETHERIAL_SHIFT:{id:37008,name:"Aetherial Shift",label:{zh:"",ja:""}},HOLY:{id:139,name:"Holy",label:{zh:"",ja:""}},AERO_II:{id:132,name:"Aero II",label:{zh:"",ja:""}},MEDICA_II:{id:133,name:"Medica II",label:{zh:"",ja:""}},BENEDICTION:{id:140,name:"Benediction",label:{zh:"",ja:""}},AFFLATUS_SOLACE:{id:16531,name:"Afflatus Solace",label:{zh:"",ja:""}},ASYLUM:{id:3569,name:"Asylum",label:{zh:"",ja:""}},ASSIZE:{id:3571,name:"Assize",label:{zh:"",ja:""}},THIN_AIR:{id:7430,name:"Thin Air",label:{zh:"",ja:""}},TETRAGRAMMATON:{id:3570,name:"Tetragrammaton",label:{zh:"",ja:""}},STONE_IV:{id:7431,name:"Stone IV",label:{zh:"",ja:""}},DIVINE_BENISON:{id:7432,name:"Divine Benison",label:{zh:"",ja:""}},PLENARY_INDULGENCE:{id:7433,name:"Plenary Indulgence",label:{zh:"",ja:""}},DIA:{id:16532,name:"Dia",label:{zh:"",ja:""}},GLARE:{id:16533,name:"Glare",label:{zh:"",ja:""}},AFFLATUS_MISERY:{id:16535,name:"Afflatus Misery",label:{zh:"",ja:""}},AFFLATUS_RAPTURE:{id:16534,name:"Afflatus Rapture",label:{zh:"",ja:""}},TEMPERANCE:{id:16536,name:"Temperance",label:{zh:"",ja:""}},GLARE_III:{id:25859,name:"Glare III",label:{zh:"",ja:""}},HOLY_III:{id:25860,name:"Holy III",label:{zh:"",ja:""}},AQUAVEIL:{id:25861,name:"Aquaveil",label:{zh:"",ja:""}},LITURGY_OF_THE_BELL:{id:25862,name:"Liturgy of the Bell",label:{zh:"",ja:""}},LITURGY_POP:{name:"Pop Liturgy of the Bell",label:{zh:""}},LITURGY_TRIGGER:{name:"Trigger Liturgy of the Bell",label:{zh:""}},GLARE_IV:{id:37009,name:"Glare IV",label:{zh:"",ja:""}},MEDICA_III:{id:37010,name:"Medica III",label:{zh:"",ja:""}},DIVINE_CARESS:{id:37011,name:"Divine Caress",label:{zh:"",ja:""}}}),hx=se()({cd_PRESENCE_OF_MIND:{name:"cd_PresenceOfMind"},cd_AETHERIAL_SHIFT:{name:"cd_AetherialShift"},cd_BENEDICTION:{name:"cd_Benediction"},cd_ASYLUM:{name:"cd_Asylum"},cd_ASSIZE:{name:"cd_Assize"},cd_THIN_AIR:{name:"cd_ThinAir"},cd_TETRAGRAMMATON:{name:"cd_Tetragrammaton"},cd_DIVINE_BENISON:{name:"cd_DivineBenison"},cd_PLENARY_INDULGENCE:{name:"cd_PlenaryIndulgence"},cd_TEMPERANCE:{name:"cd_Temperance"},cd_AQUAVEIL:{name:"cd_Aquaveil"},cd_LITURGY_OF_THE_BELL:{name:"cd_LiturgyOfTheBell"},cd_LITURGY_POP:{name:"cd_LiturgyPop"},cd_LITURGY_TRIGGER:{name:"cd_LiturgyTrigger"},cd_DIVINE_CARESS:{name:"cd_DivineCaress"}}),fx=se()({LILLIES:{name:"Lillies",maximumCharges:3,label:{zh:""}},LILY_TIMER:{name:"Lily Timer",label:{zh:""}},BLOOD_LILY:{name:"Blood Lily",maximumCharges:3,label:{zh:""}}}),tT=se()({FREECURE:{name:"Freecure",label:{zh:""}},PRESENCE_OF_MIND:{name:"Presence of Mind",label:{zh:""}},SACRED_SIGHT:{name:"Sacred Sight",maximumStacks:3,label:{zh:""}},REGEN:{name:"Regen",label:{zh:""}},AERO_II:{name:"Aero II",label:{zh:""}},MEDICA_II:{name:"Medica II",label:{zh:""}},ASYLUM:{name:"Asylum",mayBeToggled:!0,label:{zh:""}},THIN_AIR:{name:"Thin Air",label:{zh:""}},DIVINE_BENISON:{name:"Divine Benison",label:{zh:""}},CONFESSION:{name:"Confession",label:{zh:""}},DIA:{name:"Dia",label:{zh:""}},TEMPERANCE:{name:"Temperance",label:{zh:""}},DIVINE_GRACE:{name:"Divine Grace",label:{zh:""}},AQUAVEIL:{name:"Aquaveil",label:{zh:""}},LITURGY_OF_THE_BELL:{name:"Liturgy of the Bell",maximumStacks:5,mayNotBeCanceled:!0,label:{zh:""}},MEDICA_III:{name:"Medica III",label:{zh:""}},DIVINE_CARESS:{name:"Divine Caress",label:{zh:""}},DIVINE_AURA:{name:"Divine Aura",label:{zh:""}}}),Ex=se()({}),mx=se()({AERO_MASTERY_II:{name:"Aero Mastery II",level:72},STONE_MASTERY_IV:{name:"Stone Mastery IV",level:72},TRANSCENDENT_AFFLATUS:{name:"Transcendent Afflatus",level:74},ENHANCED_ASYLUM:{name:"Enhanced Asylum",level:78},GLARE_MASTERY:{name:"Glare Mastery",level:82},HOLY_MASTERY:{name:"Holy Mastery",level:82},ENHANCED_DIVINE_BENISON:{name:"Enhanced Divine Benison",level:88},ENHANCED_PRESENCE_OF_MIND:{name:"Enhanced Presence of Mind",level:92},WHITE_MAGIC_MASTERY:{name:"White Magic Mastery",level:94},MEDICA_MASTERY:{name:"Medica Mastery",level:96},ENHANCED_TETRAGRAMMATON:{name:"Enhanced Tetragrammaton",level:98},ENHANCED_TEMPERANCE:{name:"Enhanced Temperance",level:100}}),Ax={...fx,...tT,...Ex},Rx=se()({WATER_CANNON:{name:"Water Cannon",label:{zh:"(2200)"},id:11385},SONIC_BOOM:{name:"Sonic Boom",label:{zh:"(1210)"},id:18308},SHARPENED_KNIFE:{name:"Sharpened Knife",label:{zh:"(1220)"},id:11400},HYDRO_PULL:{name:"Hydro Pull",label:{zh:"(2220)"},id:23282},MOON_FLUTE:{name:"Moon Flute",label:{zh:""},id:11415},DIAMONDBACK:{name:"Diamondback",label:{zh:""},id:11424},SONG_OF_TORMENT:{name:"Song of Torment",label:{zh:""},id:11386},WHISTLE:{name:"Whistle",label:{zh:""},id:18309},BRISTLE:{name:"Bristle",label:{zh:""},id:11393},TINGLE:{name:"Tingle",label:{zh:""},id:23265},FINAL_STING:{name:"Final Sting",label:{zh:""},id:11407},COLD_FOG:{name:"Cold Fog",label:{zh:""},id:23267},WHITE_DEATH:{name:"White Death",label:{zh:""},id:23268},POP_COLD_FOG:{name:"Pop Cold Fog",label:{zh:""}},PHANTOM_FLURRY:{name:"Phantom Flurry",label:{zh:""},id:23288},END_PHANTOM_FLURRY:{name:"End Phantom Flurry",label:{zh:""},id:23289},MATRA_MAGIC:{name:"Matra Magic",label:{zh:""},id:23285},WINGED_REPROBATION:{name:"Winged Reprobation",label:{zh:""},id:34576},CONVICTION_MARCATO:{name:"Conviction Marcato",label:{zh:""},id:34574},REVENGE_BLAST:{name:"Revenge Blast",label:{zh:""},id:18316},WILD_RAGE:{name:"Wild Rage",label:{zh:""},id:34568},GOBLIN_PUNCH:{name:"Goblin Punch",label:{zh:""},id:34563},THE_ROSE_OF_DESTRUCTION:{name:"The Rose of Destruction",label:{zh:""},id:23275},ERUPTION:{name:"Eruption",label:{zh:""},id:11427},FEATHER_RAIN:{name:"Feather Rain",label:{zh:""},id:11426},MOUNTAIN_BUSTER:{name:"Mountain Buster",label:{zh:""},id:11428},SHOCK_STRIKE:{name:"Shock Strike",label:{zh:""},id:11429},GLASS_DANCE:{name:"Glass Dance",label:{zh:""},id:11430},QUASAR:{name:"Quasar",label:{zh:""},id:18324},J_KICK:{name:"J Kick",label:{zh:""},id:18325},TRIPLE_TRIDENT:{name:"Triple Trident",label:{zh:""},id:23264},BOTH_ENDS:{name:"Both Ends",label:{zh:""},id:23287},NIGHTBLOOM:{name:"Nightbloom",label:{zh:""},id:23290},SEA_SHANTY:{name:"Sea Shanty",label:{zh:""},id:34580},APOKALYPSIS:{name:"Apokalypsis",label:{zh:""},id:34581},BEING_MORTAL:{name:"Being Mortal",label:{zh:""},id:34582},BREATH_OF_MAGIC:{name:"Breath of Magic",label:{zh:""},id:34567},MORTAL_FLAME:{name:"Mortal Flame",label:{zh:""},id:34579},SURPANAKHA:{name:"Surpanakha",label:{zh:""},id:18323}}),Tx=se()({cd_ERUPTION:{name:"cd_Eruption",label:{zh:"CD: /"}},cd_SHOCK_STRIKE:{name:"cd_Shock_Strike",label:{zh:"CD: /"}},cd_GLASS_DANCE:{name:"cd_Glass_Dance",label:{zh:"CD: "}},cd_SURPANAKHA:{name:"cd_Surpanakha",label:{zh:"CD: "}},cd_QUASAR:{name:"cd_Quasar",label:{zh:"CD: /"}},cd_NIGHTBLOOM:{name:"cd_Nightbloom",label:{zh:"CD: /"}},cd_SEA_SHANTY:{name:"cd_Sea_Shanty",label:{zh:"CD: "}},cd_BEING_MORTAL:{name:"cd_Being_Mortal",label:{zh:"CD: /"}},cd_COLD_FOG:{name:"cd_Cold_Fog",label:{zh:"CD: "}},cd_TRIPLE_TRIDENT:{name:"cd_Triple_Trident",label:{zh:"CD: "}},cd_PHANTOM_FLURRY:{name:"cd_Phantom_Flurry",label:{zh:"CD: "}},cd_COLD_FOG_POP:{name:"cd_Cold_Fog_Pop",label:{zh:"CD: "}},cd_MATRA_MAGIC:{name:"cd_Matra_Magic",label:{zh:"CD: "}},cd_WINGED_REPROBATION:{name:"cd_Winged_Reprobation",label:{zh:"CD: "}},cd_THE_ROSE_OF_DESTRUCTION:{name:"cd_The_Rose_of_Destruction",label:{zh:"CD: "}},cd_SURPANAKHA_LOCKOUT:{name:"cd_SurpanakhaLockout",label:{zh:"CD: "}}}),Sx=se()({}),aT=se()({NIGHTBLOOM:{name:"Bleeding",label:{zh:""}},SONG_OF_TORMENT:{name:"Bleeding",label:{zh:""}},FEATHER_RAIN:{name:"Feather Rain",label:{zh:""}},WAXING_NOCTURNE:{name:"Waxing Nocturne",label:{zh:""}},WANING_NOCTURNE:{name:"Waning Nocturne",label:{zh:""}},WHISTLE:{name:"Whistle",label:{zh:""}},BRISTLE:{name:"Bristle",label:{zh:""}},TINGLE:{name:"Tingle",label:{zh:""}},COLD_FOG:{name:"Cold Fog",label:{zh:""}},TOUCH_OF_FROST:{name:"Touch of Frost",label:{zh:""}},PHANTOM_FLURRY:{name:"Phantom Flurry",label:{zh:""}},DIAMONDBACK:{name:"Diamondback",label:{zh:""}},APOKALYPSIS:{name:"Apokalypsis",label:{zh:""}},WINGED_REDEMPTION:{name:"Winged Redemption",label:{zh:""}},BREATH_OF_MAGIC:{name:"Breath of Magic",label:{zh:""}},MORTAL_FLAME:{name:"Mortal Flame",label:{zh:""}},WINGED_REPROBATION:{name:"Winged Reprobation",label:{zh:""},maximumStacks:4},SURPANAKHAS_FURY:{name:"Surpanakha's Fury",label:{zh:""},maximumStacks:4},BRUSH_WITH_DEATH:{name:"Brush with Death",label:{zh:""}}}),gx=se()({SURPANAKHA_LOCKOUT:{name:"Supranakha Lockout",label:{zh:""}}}),Ix=se()({}),_x={...Sx,...aT,...gx},px=se()({NEVER:{name:"NEVER"},TINCTURE:{name:"Tincture",label:{zh:"",ja:""}},SPRINT:{id:3,name:"Sprint",label:{zh:"",ja:""}}}),Nx=se()({NEVER:{name:"Never"},cd_GCD:{name:"cd_GCD",label:{zh:"GCD"}},cd_TINCTURE:{name:"cd_Tincture"},cd_SPRINT:{name:"cd_Sprint"}}),Cx=se()({MANA:{name:"Mana",label:{zh:"MP"}}}),bx=se()({TINCTURE:{name:"Tincture",label:{zh:""}},SPRINT:{name:"Sprint",label:{zh:""}}}),Ox=se()({MOVEMENT:{name:"Movement"},NOT_ANIMATION_LOCKED:{name:"NotAnimationLocked"},NOT_CASTER_TAXED:{name:"NotCasterTaxed"},IN_COMBAT:{name:"InCombat",label:{zh:""}},AUTOS_ENGAGED:{name:"Autos Engaged"},STORED_AUTO:{name:"Stored Auto"},PARTY_SIZE:{name:"PartySize",label:{zh:""}},NEVER:{name:"Never"}}),Dx=se()({NEVER:{name:"Never",level:1}}),yx={...Cx,...bx,...Ox},vx=se()({LAST_BASTION:{id:199,name:"Last Bastion",label:{zh:""}},LAND_WAKER:{id:4240,name:"Land Waker",label:{zh:""}},DARK_FORCE:{id:4241,name:"Dark Force",label:{zh:""}},GUNMETAL_SOUL:{id:17105,name:"Gunmetal Soul",label:{zh:""}}}),Mx=se()({PULSE_OF_LIFE:{id:208,name:"Pulse of Life"},ANGEL_FEATHERS:{id:4247,name:"Angel Feathers"},ASTRAL_STASIS:{id:4248,name:"Astral Stasis"},TECHNE_MAKRE:{id:24859,name:"Techne Makre"}}),Lx=se()({FINAL_HEAVEN:{id:202,name:"Final Heaven"},DRAGONSONG_DIVE:{id:4242,name:"Dragonsong Dive"},CHIMATSURI:{id:4243,name:"Chimatsuri"},DOOM_OF_THE_LIVING:{id:7861,name:"Doom of the Living"},THE_END:{id:24858,name:"The End"},WORLD_SWALLOWER:{id:34866,name:"World-swallower"}}),xx=se()({SAGITTARIUS_ARROW:{id:4244,name:"Sagittarius Arrow"},SATELLITE_BEAM:{id:4245,name:"Satellite Beam"},CRIMSON_LOTUS:{id:17106,name:"Crimson Lotus"}}),Hx=se()({METEOR:{id:205,name:"Meteor"},TERAFLARE:{id:3009,name:"Teraflare"},VERMILLION_SCOURGE:{id:7862,name:"Vermillion Scourge"},CHROMATIC_FANTASY:{id:34867,name:"Chromatic Fantasy"}}),kx=se()({LAST_BASTION:{name:"Last Bastion",label:{zh:"LB3 buff"}},LAND_WAKER:{name:"Land Waker",label:{zh:"LB3 buff"}},DARK_FORCE:{name:"Dark Force",label:{zh:"LB3 buff"}},GUNMETAL_SOUL:{name:"Gunmetal Soul",label:{zh:"LB3 buff"}}}),Ux=se()({cd_LIMIT_BREAK_1:{name:"cd_LIMIT_BREAK_1",label:{zh:"CDLB"}},cd_LIMIT_BREAK_2:{name:"cd_LIMIT_BREAK_2",label:{zh:"CDLB"}},cd_LIMIT_BREAK_3:{name:"cd_LIMIT_BREAK_3",label:{zh:"CDLB"}}}),wx=se()({UNKNOWN:{name:"Unknown"},SHIELD_WALL:{id:197,name:"Shield Wall"},STRONGHOLD:{id:198,name:"Stronghold"},HEALING_WIND:{id:206,name:"Healing Wind"},BREATH_OF_THE_EARTH:{id:207,name:"Breath of the Earth"},BRAVER:{id:200,name:"Braver"},BLADEDANCE:{id:201,name:"Bladedance"},BIGSHOT:{id:4238,name:"Big Shot"},DESPERADO:{id:4239,name:"Desperado"},SKYSHARD:{id:203,name:"Skyshard"},STARSTORM:{id:204,name:"Starstorm"}}),eC=se()({UNKNOWN:{name:"Unknown"},SHIELD_WALL:{name:"Shield Wall",label:{zh:"LB1 buff"}},STRONGHOLD:{name:"Stronghold",label:{zh:"LB2 buff"}}}),Px={...vx,...Mx,...Lx,...xx,...Hx},yo={...wx,...Px},tC={...eC,...kx},Gx=se()({ARMS_LENGTH:{id:7548,name:"Arm's Length",label:{zh:""}},SECOND_WIND:{id:7541,name:"Second Wind",label:{zh:""}},HEAD_GRAZE:{id:7551,name:"Head Graze",label:{zh:""}},ESUNA:{id:7568,name:"Esuna",label:{zh:""}},RESCUE:{id:7571,name:"Rescue",label:{zh:""}},ADDLE:{id:7560,name:"Addle",label:{zh:"",ja:""},discordEmote:"Addle"},SWIFTCAST:{id:7561,name:"Swiftcast",label:{zh:"",ja:""}},LUCID_DREAMING:{id:7562,name:"Lucid Dreaming",label:{zh:"",ja:""},discordEmote:"Lucid"},SURECAST:{id:7559,name:"Surecast",label:{zh:"",ja:""},discordEmote:"Surecast"},FEINT:{id:7549,name:"Feint",label:{zh:""}},BLOODBATH:{id:7542,name:"Bloodbath",label:{zh:""}},TRUE_NORTH:{id:7546,name:"True North",label:{zh:""}},LEG_SWEEP:{id:7863,name:"Leg Sweep",label:{zh:""}},RAMPART:{id:7531,name:"Rampart",label:{zh:""}},REPRISAL:{id:7535,name:"Reprisal",label:{zh:""}},LOW_BLOW:{id:7540,name:"Low Blow",label:{zh:""}},INTERJECT:{id:7538,name:"Interject",label:{zh:""}},PROVOKE:{id:7533,name:"Provoke",label:{zh:""}},SHIRK:{id:7537,name:"Shirk",label:{zh:""}},FOOT_GRAZE:{id:7553,name:"Foot Graze",label:{zh:""}},LEG_GRAZE:{id:7554,name:"Leg Graze",label:{zh:""}}}),Bx=se()({cd_ADDLE:{name:"cd_Addle"},cd_SWIFTCAST:{name:"cd_Swiftcast"},cd_LUCID_DREAMING:{name:"cd_LucidDreaming"},cd_SURECAST:{name:"cd_Surecast"},cd_SECOND_WIND:{name:"cd_SecondWind"},cd_ARMS_LENGTH:{name:"cd_ArmsLength"},cd_RESCUE:{name:"cd_Rescue"},cd_FEINT:{name:"cd_Feint"},cd_TRUE_NORTH:{name:"cd_TrueNorth"},cd_BLOODBATH:{name:"cd_Bloodbath"},cd_LEG_SWEEP:{name:"cd_LegSweep"},cd_RAMPART:{name:"cd_Rampart"},cd_REPRISAL:{name:"cd_Reprisal"},cd_LOW_BLOW:{name:"cd_LowBlow"},cd_INTERJECT:{name:"cd_Interject"},cd_PROVOKE:{name:"cd_Provoke"},cd_SHIRK:{name:"cd_Shirk"},cd_HEAD_GRAZE:{name:"cd_HeadGraze"},cd_LEG_GRAZE:{name:"cd_LegGraze"},cd_FOOT_GRAZE:{name:"cd_FootGraze"}}),Fx=se()({ADDLE:{name:"Addle",label:{zh:""}},SWIFTCAST:{name:"Swiftcast",label:{zh:""}},LUCID_DREAMING:{name:"Lucid Dreaming",label:{zh:""}},SURECAST:{name:"Surecast",label:{zh:""}},ARMS_LENGTH:{name:"Arms Length",label:{zh:""}},FEINT:{name:"Feint",label:{zh:""}},TRUE_NORTH:{name:"True North",label:{zh:""}},BLOODBATH:{name:"Bloodbath",label:{zh:""}},RAMPART:{name:"Rampart",label:{zh:"buff"}},REPRISAL:{name:"Reprisal",label:{zh:"buff"}}}),jx=se()({REAR_POSITIONAL:{name:"Rear Positional",label:{zh:""},mayBeToggled:!0},FLANK_POSITIONAL:{name:"Flank Positional",label:{zh:""},mayBeToggled:!0},AUTOS_ENGAGED:{name:"Autos Engaged",mayBeToggled:!0}}),zx=se()({ENHANCED_SWIFTCAST:{name:"Enhanced Swiftcast",level:94},ENHANCED_ADDLE:{name:"Enhanced Addle",level:98},ENHANCED_HEALING_MAGIC:{name:"Enhanced Healing Magic",level:85},MAGICK_MASTERY_HEALER:{name:"Magick Mastery",level:94},ENHANCED_SECOND_WIND:{name:"Enhanced Second Wind",level:94},ENHANCED_FEINT:{name:"Enhanced Feint",level:98},MELEE_MASTERY_TANK:{name:"Melee Mastery",level:84},ENHANCED_RAMPART:{name:"Enhanced Rampart",level:94},MELEE_MASTERY_II_TANK:{name:"Melee Mastery II",level:94},ENHANCED_REPRISAL:{name:"Enhanced Reprisal",level:98}}),aC={...Fx,...jx},Ia={...px,...Gx,...yo,...f1,...ox,...LL,...PL,...dx,...ZR,...aL,...j1,...ZL,...bL,...t1,...M1,...C1,...J1,...EL,...YL,...gL,...rL,...JN,...S1,...s1,...Rx},ns={...Nx,...Bx,...Ux,...E1,...lx,...xL,...GL,...hx,...w1,...nL,...z1,...QL,...OL,...a1,...L1,...b1,...ex,...mL,...KL,...IL,...cL,...X1,...g1,...r1,...Tx},Pe={...yx,...aC,...tC,...T1,...ux,...wL,...zL,...Ax,...F1,...sL,...W1,...QN,...ML,...l1,...U1,...v1,...ix,...SL,...qL,...CL,...fL,...$1,...N1,...h1,..._x},gA={...Dx,...zx,...R1,...cx,...UL,...jL,...mx,...B1,...lL,...V1,...e1,...vL,...o1,...k1,...y1,...nx,...TL,...XL,...NL,...hL,...Q1,...p1,...d1,...Ix},Ra={epsilon:1e-6};var $e=(e=>(e[e.lvl70=70]="lvl70",e[e.lvl80=80]="lvl80",e[e.lvl90=90]="lvl90",e[e.lvl100=100]="lvl100",e))($e||{});const Yx=.1;var Ie=(e=>(e.Fire="Fire",e.Ice="Ice",e.Lightning="Lightning",e.Wind="Wind",e.Earth="Earth",e.Physical="Physical",e.Other="Other",e))(Ie||{}),hn=(e=>(e.RNG="RNG",e.Never="Never",e.Always="Always",e))(hn||{}),mt=(e=>(e.Blocked="blocked by CD, animation lock or caster tax",e.SecondaryBlocked="blocked by secondary CD",e.NotEnoughMP="not enough MP",e.NotInCombat="not in combat (must wait for first damage application)",e.RequirementsNotMet="skill requirements not satisfied",e.SkillNotUnlocked="skill not unlocked at provided level",e.BuffNoLongerAvailable="buff no longer available",e.PastTargetTime="jump target time has already passed",e.CastCanceled="cast canceled (skill requirements no longer met at confirmation time)",e.UnknownSkill="unknown skill",e))(mt||{});function du(){return{unavailableReasons:[],ready:function(){return this.unavailableReasons.length===0},toString:function(){return this.ready()?"ready":this.unavailableReasons.join("; ")},addUnavailableReason:function(e){this.unavailableReasons.includes(e)||this.unavailableReasons.push(e)},clone:function(){const e=du();return this.unavailableReasons.forEach(t=>e.addUnavailableReason(t)),e}}}var k=(e=>(e.LeyLines="Ley Lines",e.Hyperphantasia="Hyperphantasia",e.Acceleration="Acceleration",e.Fuka="Fuka",e.Fugetsu="Fugetsu",e.EnhancedEnpi="Enhanced Enpi",e.NoMercy="No Mercy",e.PowerSurge="Power Surge",e.LanceCharge="Lance Charge",e.LifeOfTheDragon="Life Of The Dragon",e.EnhancedPiercingTalon="Enhanced Piercing Talon",e.LifeSurge="Life Surge",e.DivineMight="Divine Might",e.Requiescat="Requiescat",e.FightOrFlight="Fight Or Flight",e.Tincture="Tincture",e.ArcaneCircle="Arcane Circle",e.ArmysPaeon="Army's Paeon",e.BattleLitany="Battle Litany",e.BattleVoice="Battle Voice",e.Brotherhood="Brotherhood",e.Card_TheBalance="Card - The Balance",e.Card_TheSpear="Card - The Spear",e.ChainStratagem="Chain Stratagem",e.Devilment="Devilment",e.Divination="Divination",e.Dokumori="Dokumori",e.Embolden="Embolden",e.MagesBallad="Mage's Ballad",e.RadiantFinale1="Radiant Finale (1)",e.RadiantFinale2="Radiant Finale (2)",e.RadiantFinale3="Radiant Finale (3)",e.Barrage="Barrage",e.SearingLight="Searing Light",e.StandardFinish="Standard Finish",e.StarryMuse="Starry Muse",e.TechnicalFinish="Technical Finish",e.WanderersMinuet="The Wanderer's Minuet",e.RagingStrikes="Raging Strikes",e.DeathsDesign="Death's Design",e.Zoe="Zoe",e.Autophysis="Autophysis",e.Krasis="Krasis",e.Philosophia="Philosophia",e.Soteria="Soteria",e.WaxingNocturne="Waxing Nocturne",e.Whistle="Whistle",e.Bristle="Bristle",e.TingleA="TingleA",e.TingleB="TingleB",e.TrickAttack="Trick Attack",e.KunaisBane="Kunai's Bane",e.Bunshin="Bunshin",e.RiddleOfFire="Riddle of Fire",e.TheArrow="The Arrow",e.NeutralSect="Neutral Sect",e.Synastry="Synastry",e.Confession="Confession",e.Asylum="Asylum",e.Temperance="Temperance",e.HuntersInstinct="Hunter's Instinct",e.Swiftscaled="Swiftscaled",e.FeyIllumination="Fey Illumination",e.Dissipation="Dissipation",e.Protraction="Protraction",e.Recitation="Recitation",e))(k||{});function Kx(e){return Ai({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93 6h-2.95a15.65 15.65 0 0 0-1.38-3.56A8.03 8.03 0 0 1 18.92 8zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56A7.987 7.987 0 0 1 5.08 16zm2.95-8H5.08a7.987 7.987 0 0 1 4.33-3.56A15.65 15.65 0 0 0 8.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2zm.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95a8.03 8.03 0 0 1-4.33 3.56zM16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.38z"},child:[]}]})(e)}function Vx(e){return Ai({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 3a9 9 0 1 0 9 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 0 1-4.4 2.26 5.403 5.403 0 0 1-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"},child:[]}]})(e)}function Wx(e){return Ai({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58a.996.996 0 0 0-1.41 0 .996.996 0 0 0 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37a.996.996 0 0 0-1.41 0 .996.996 0 0 0 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0a.996.996 0 0 0 0-1.41l-1.06-1.06zm1.06-10.96a.996.996 0 0 0 0-1.41.996.996 0 0 0-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36a.996.996 0 0 0 0-1.41.996.996 0 0 0-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z"},child:[]}]})(e)}function IA(e,t){const n=Math.pow(10,t);return Math.floor(e*n)/n}class ut{static getMainstatBase(t){switch(t){case $e.lvl70:return 292;case $e.lvl80:return 340;case $e.lvl90:return 390;case $e.lvl100:return 440}}static getSubstatBase(t){switch(t){case $e.lvl70:return 364;case $e.lvl80:return 380;case $e.lvl90:return 400;case $e.lvl100:return 420}}static getStatDiv(t){switch(t){case $e.lvl70:return 900;case $e.lvl80:return 1300;case $e.lvl90:return 1900;case $e.lvl100:return 2780}}static calculateDamage(t,n,o,s,c,d,f){let h=c;const m=d>=1?d:d<0?0:ut.criticalHitRate(t,n)+d,R=f>=1?f:f<0?0:ut.#t(t,o)+f;if(m===0&&R===0)return h;const T=ut.#e(t,n),S=1.25,g=m>=1&&R>=1,p=m>1?IA(1+(T-1)*(d-1),3):1,_=R>1?IA(1+(S-1)*(f-1),3):1,O=m>1?1:m,D=R>1?1:R;g?h*=IA(ut.#n(t,s)+ut.#a(t,o),3):h*=ut.#n(t,s);const L=h*p*T,w=h*_*S,y=L*_*S,x=O*D,G=1-O-D+x;return h*G+L*(O-x)+w*(D-x)+y*x}static criticalHitRate(t,n){const o=this.getSubstatBase(t),s=this.getStatDiv(t);return(Math.floor(200*(n-o)/s)+50)*.001}static#e(t,n){const o=this.getSubstatBase(t),s=this.getStatDiv(t);return(Math.floor(200*(n-o)/s)+1400)*.001}static#t(t,n){const o=this.getSubstatBase(t),s=this.getStatDiv(t);return Math.floor(550*(n-o)/s)*.001}static#a(t,n){const o=this.getSubstatBase(t),s=this.getStatDiv(t);return Math.floor(140*(n-o)/s)*.001}static#n(t,n){const o=this.getMainstatBase(t),s=this.getStatDiv(t);return Math.floor(1e3+140*(n-o)/s)*.001}static overtimePotency(t,n,o){const s=this.getSubstatBase(t),c=this.getStatDiv(t),d=(1e3+Math.floor((n-s)*130/c))*.001;return o*d}static mpTick(t,n){const o=this.getMainstatBase(t),s=this.getStatDiv(t);return 200+Math.floor(150*(n-o)/s)}static preTaxGcd(t,n,o,s){const c=this.getSubstatBase(t),d=this.getStatDiv(t),f=Math.ceil((c-n)*130/d),h=Math.floor(o*(1e3+f));return Math.floor((100-(s??0))*h/1e3)/100}static preTaxGcdLegacy(t,n,o,s){const c=this.getSubstatBase(t),d=this.getStatDiv(t);return Math.floor(Math.floor(Math.floor((100-(s??0))*100/100)*Math.floor((2e3-Math.floor(130*(n-c)/d+1e3))*(1e3*o)/1e4)/100)*100/100)/100}static preTaxCastTime(t,n,o,s){const c=this.getSubstatBase(t),d=this.getStatDiv(t);return Math.floor(Math.floor(Math.floor((100-(s??0))*100/100)*Math.floor((2e3-Math.floor(130*(n-c)/d+1e3))*(1e3*o)/1e3)/100)*100/100)/1e3}static afterFpsTax(t,n){return Math.floor(n*t+1)/t}}var U=(e=>(e[e.AF3=0]="AF3",e[e.AF2=1]="AF2",e[e.AF1=2]="AF1",e[e.UI3=3]="UI3",e[e.UI2=4]="UI2",e[e.UI1=5]="UI1",e[e.ENO=6]="ENO",e[e.STARRY=7]="STARRY",e[e.EMBOLDEN_M=8]="EMBOLDEN_M",e[e.ACCELERATION=9]="ACCELERATION",e[e.POT=10]="POT",e[e.COMBO=11]="COMBO",e[e.AUTO_CDH=12]="AUTO_CDH",e[e.NO_CDH=13]="NO_CDH",e[e.PARTY=14]="PARTY",e[e.STANDARD_SINGLE=15]="STANDARD_SINGLE",e[e.STANDARD_DOUBLE=16]="STANDARD_DOUBLE",e[e.TECHNICAL_SINGLE=17]="TECHNICAL_SINGLE",e[e.TECHNICAL_DOUBLE=18]="TECHNICAL_DOUBLE",e[e.TECHNICAL_TRIPLE=19]="TECHNICAL_TRIPLE",e[e.TECHNICAL_QUADRUPLE=20]="TECHNICAL_QUADRUPLE",e[e.DEVILMENT=21]="DEVILMENT",e[e.FUGETSU=22]="FUGETSU",e[e.AUTO_CRIT=23]="AUTO_CRIT",e[e.YATEN=24]="YATEN",e[e.POSITIONAL=25]="POSITIONAL",e[e.ARCANE_CIRCLE=26]="ARCANE_CIRCLE",e[e.DEATHSDESIGN=27]="DEATHSDESIGN",e[e.ENHANCED_GIBBET_GALLOWS=28]="ENHANCED_GIBBET_GALLOWS",e[e.ENHANCED_REAPING=29]="ENHANCED_REAPING",e[e.IMMORTAL_SACRIFICE=30]="IMMORTAL_SACRIFICE",e[e.OVERHEATED=31]="OVERHEATED",e[e.SURGING_TEMPEST=32]="SURGING_TEMPEST",e[e.RAGING_STRIKES=33]="RAGING_STRIKES",e[e.WANDERERS_MINUET=34]="WANDERERS_MINUET",e[e.MAGES_BALLAD=35]="MAGES_BALLAD",e[e.ARMYS_PAEON=36]="ARMYS_PAEON",e[e.BATTLE_VOICE=37]="BATTLE_VOICE",e[e.RADIANT_FINALE_ONE_CODA=38]="RADIANT_FINALE_ONE_CODA",e[e.RADIANT_FINALE_TWO_CODA=39]="RADIANT_FINALE_TWO_CODA",e[e.RADIANT_FINALE_THREE_CODA=40]="RADIANT_FINALE_THREE_CODA",e[e.BARRAGE=41]="BARRAGE",e[e.NO_MERCY=42]="NO_MERCY",e[e.SEARING_LIGHT=43]="SEARING_LIGHT",e[e.POWER_SURGE=44]="POWER_SURGE",e[e.ENHANCED_PIERCING_TALON=45]="ENHANCED_PIERCING_TALON",e[e.LANCE_CHARGE=46]="LANCE_CHARGE",e[e.LIFE_OF_THE_DRAGON=47]="LIFE_OF_THE_DRAGON",e[e.LIFE_SURGE=48]="LIFE_SURGE",e[e.BATTLE_LITANY=49]="BATTLE_LITANY",e[e.FIGHT_OR_FLIGHT=50]="FIGHT_OR_FLIGHT",e[e.DIVINE_MIGHT=51]="DIVINE_MIGHT",e[e.REQUIESCAT=52]="REQUIESCAT",e[e.PET=53]="PET",e[e.ZOE=54]="ZOE",e[e.SOTERIA=55]="SOTERIA",e[e.KRASIS=56]="KRASIS",e[e.AUTOPHYSIS=57]="AUTOPHYSIS",e[e.PHILOSOPHIA=58]="PHILOSOPHIA",e[e.MOON_FLUTE=59]="MOON_FLUTE",e[e.BRISTLE=60]="BRISTLE",e[e.WHISTLE=61]="WHISTLE",e[e.TINGLEA=62]="TINGLEA",e[e.TINGLEB=63]="TINGLEB",e[e.SURPANAKHA=64]="SURPANAKHA",e[e.WINGED_REPROBATION=65]="WINGED_REPROBATION",e[e.WINGED_REDEMPTION=66]="WINGED_REDEMPTION",e[e.DARKSIDE=67]="DARKSIDE",e[e.BUNSHIN=68]="BUNSHIN",e[e.KASSATSU=69]="KASSATSU",e[e.HOLLOW_NOZUCHI=70]="HOLLOW_NOZUCHI",e[e.KAZEMATOI=71]="KAZEMATOI",e[e.MEISUI=72]="MEISUI",e[e.DOKUMORI=73]="DOKUMORI",e[e.TRICK_ATTACK=74]="TRICK_ATTACK",e[e.KUNAIS_BANE=75]="KUNAIS_BANE",e[e.BROTHERHOOD=76]="BROTHERHOOD",e[e.RIDDLE_OF_FIRE=77]="RIDDLE_OF_FIRE",e[e.SSS_CHAKRA=78]="SSS_CHAKRA",e[e.MNK_BALL=79]="MNK_BALL",e[e.DIVINATION=80]="DIVINATION",e[e.NEUTRAL_SECT=81]="NEUTRAL_SECT",e[e.THE_ARROW=82]="THE_ARROW",e[e.SYNASTRY=83]="SYNASTRY",e[e.CONFESSION=84]="CONFESSION",e[e.ASYLUM=85]="ASYLUM",e[e.TEMPERANCE=86]="TEMPERANCE",e[e.EXTRA_BELL_STACKS=87]="EXTRA_BELL_STACKS",e[e.HUNTERS_INSTINCT=88]="HUNTERS_INSTINCT",e[e.HONED=89]="HONED",e[e.VENOM=90]="VENOM",e[e.POISED=91]="POISED",e[e.CHAIN_STRAT=92]="CHAIN_STRAT",e[e.FEY_ILLUMINATION=93]="FEY_ILLUMINATION",e[e.DISSIPATION=94]="DISSIPATION",e[e.PROTRACTION=95]="PROTRACTION",e))(U||{});const ip=1.1,_A=.9,J={Tincture:{kind:"multiplier",source:10,potencyFactor:1},AutoCrit:{kind:"critDirect",source:23,critBonus:1,dhBonus:0},AutoCDH:{kind:"critDirect",source:12,critBonus:1,dhBonus:1},NoCDH:{kind:"critDirect",source:13,critBonus:0,dhBonus:0},Starry:{kind:"multiplier",source:7,potencyFactor:1.05},EmboldenMagic:{kind:"multiplier",source:8,potencyFactor:1.1},AccelerationImpact:{kind:"adder",source:9,additiveAmount:50},SingleStandardFinish:{kind:"multiplier",source:15,potencyFactor:1.02},DoubleStandardFinish:{kind:"multiplier",source:16,potencyFactor:1.05},SingleTechnicalFinish:{kind:"multiplier",source:17,potencyFactor:1.01},TripleTechnicalFinish:{kind:"multiplier",source:19,potencyFactor:1.03},QuadrupleTechnicalFinish:{kind:"multiplier",source:20,potencyFactor:1.05},Devilment:{kind:"critDirect",source:21,critBonus:.2,dhBonus:.2},FugetsuBase:{kind:"multiplier",source:22,potencyFactor:1.1},FugetsuEnhanced:{kind:"multiplier",source:22,potencyFactor:1.13},YatenpiBase:{kind:"adder",source:24,additiveAmount:160},YatenpiEnhanced:{kind:"adder",source:24,additiveAmount:170},ArcaneCircle:{kind:"multiplier",source:26,potencyFactor:1.03},DeathsDesign:{kind:"multiplier",source:27,potencyFactor:1.1},EnhancedGibbetGallows:{kind:"adder",source:28,additiveAmount:60},EnhancedReaping:{kind:"adder",source:29,additiveAmount:60},ImmortalSacrifice:{kind:"adder",source:30,additiveAmount:40},Overheated:{kind:"adder",source:31,additiveAmount:20},SurgingTempest:{kind:"multiplier",source:32,potencyFactor:1.1},RagingStrikes:{kind:"multiplier",source:33,potencyFactor:1.15},MagesBallad:{kind:"multiplier",source:35,potencyFactor:1.01},ArmysPaeon:{kind:"critDirect",source:36,critBonus:0,dhBonus:.03},WanderersMinuet:{kind:"critDirect",source:34,critBonus:.02,dhBonus:0},BattleVoice:{kind:"critDirect",source:37,critBonus:0,dhBonus:.2},RadiantFinaleOneCoda:{kind:"multiplier",source:38,potencyFactor:1.02},RadiantFinaleTwoCoda:{kind:"multiplier",source:39,potencyFactor:1.04},RadiantFinaleThreeCoda:{kind:"multiplier",source:40,potencyFactor:1.06},BarrageRefulgent:{kind:"multiplier",source:41,potencyFactor:3},BarrageWideVolley:{kind:"adder",source:41,additiveAmount:80},BarrageShadowbite:{kind:"adder",source:41,additiveAmount:100},NoMercy:{kind:"multiplier",source:42,potencyFactor:1.2},SearingLight:{kind:"multiplier",source:43,potencyFactor:1.05},SmnPet:{kind:"multiplier",source:53,potencyFactor:.8},PowerSurge:{kind:"multiplier",source:44,potencyFactor:1.1},LanceCharge:{kind:"multiplier",source:46,potencyFactor:1.1},LifeOfTheDragon:{kind:"multiplier",source:47,potencyFactor:1.15},BattleLitany:{kind:"critDirect",source:49,critBonus:.1,dhBonus:0},EnhancedPiercingTalon:{kind:"adder",source:45,additiveAmount:150},LifeSurge:{kind:"critDirect",source:48,critBonus:1,dhBonus:0},FightOrFlight:{kind:"multiplier",source:50,potencyFactor:1.25},Zoe:{kind:"multiplier",source:54,potencyFactor:1.5},Soteria:{kind:"multiplier",source:55,potencyFactor:1.7},Krasis:{kind:"multiplier",source:56,potencyFactor:1.2},Autophysis:{kind:"multiplier",source:57,potencyFactor:1.1},Philosophia:{kind:"multiplier",source:58,potencyFactor:1.2},MoonFlute:{kind:"multiplier",source:59,potencyFactor:1.5},Whistle:{kind:"multiplier",source:61,potencyFactor:1.8},Bristle:{kind:"multiplier",source:60,potencyFactor:1.5},TingleA:{kind:"adder",source:62,additiveAmount:100},TingleB:{kind:"adder",source:63,additiveAmount:300},WingedReprobation:{kind:"adder",source:65,additiveAmount:100},WingedRedemption:{kind:"adder",source:66,additiveAmount:220},Darkside:{kind:"multiplier",source:67,potencyFactor:ip},DrkPet:{kind:"multiplier",source:53,potencyFactor:1.05*ip},BunshinST:{kind:"adder",source:68,additiveAmount:160*_A},BunshinAOE:{kind:"adder",source:68,additiveAmount:80*_A},NinPet:{kind:"multiplier",source:53,potencyFactor:_A},Kassatsu:{kind:"multiplier",source:69,potencyFactor:1.3},HollowNozuchi:{kind:"adder",source:70,additiveAmount:70},Kazematoi:{kind:"adder",source:71,additiveAmount:100},Meisui:{kind:"adder",source:72,additiveAmount:150},Dokumori:{kind:"multiplier",source:73,potencyFactor:1.05},TrickAttack:{kind:"multiplier",source:74,potencyFactor:1.1},KunaisBane:{kind:"multiplier",source:75,potencyFactor:1.1},Brotherhood:{kind:"multiplier",source:76,potencyFactor:1.05},RiddleOfFire:{kind:"multiplier",source:77,potencyFactor:1.15},Divination:{kind:"multiplier",source:80,potencyFactor:1.06},NeutralSect:{kind:"multiplier",source:81,potencyFactor:1.2},TheArrow:{kind:"multiplier",source:82,potencyFactor:1.1},Synastry:{kind:"multiplier",source:83,potencyFactor:1.4},AstPet:{kind:"multiplier",source:53,potencyFactor:.98},Confession:{kind:"adder",source:84,additiveAmount:200},Asylum:{kind:"multiplier",source:85,potencyFactor:1.1},Temperance:{kind:"multiplier",source:86,potencyFactor:1.2},WhmPet:{kind:"multiplier",source:53,potencyFactor:.96},HuntersInstinct:{kind:"multiplier",source:88,potencyFactor:1.1},HonedST:{kind:"adder",source:89,additiveAmount:100},HonedAoE:{kind:"adder",source:89,additiveAmount:20},VenomST:{kind:"adder",source:90,additiveAmount:100},VenomAoE:{kind:"adder",source:90,additiveAmount:40},VenomOGCDST:{kind:"adder",source:90,additiveAmount:50},VenomOGCDAoE:{kind:"adder",source:90,additiveAmount:30},Poised:{kind:"adder",source:91,additiveAmount:50},ChainStrat:{kind:"critDirect",source:92,critBonus:.1,dhBonus:0},SchPet:{kind:"multiplier",source:53,potencyFactor:.9},FeyIllum:{kind:"multiplier",source:93,potencyFactor:1.1},Dissipation:{kind:"multiplier",source:94,potencyFactor:1.2},Protraction:{kind:"multiplier",source:95,potencyFactor:1.1}};function Xx(e){return{kind:"adder",source:11,additiveAmount:e}}function qx(e){return{kind:"adder",source:52,additiveAmount:e}}function Zx(e){return{kind:"adder",source:51,additiveAmount:e}}function Hh(e){return{kind:"adder",source:25,additiveAmount:e}}class ta{config;sourceTime;sourceSkill;aspect;description;base;#e;#t;falloff;snapshotTime;applicationTime;#a=[];#n;constructor(t){if(this.config=t.config,this.sourceTime=t.sourceTime,this.sourceSkill=t.sourceSkill,this.aspect=t.aspect,this.base=t.basePotency,this.snapshotTime=t.snapshotTime,this.description=t.description,t.targetList!==void 0&&t.healTargetCount!==void 0)throw new Error("targetList and healTargetCount cannot both be specified.");if(t.targetList===void 0&&t.healTargetCount===void 0)throw new Error("At least one of targetList or healTargetCount must be specified.");this.#e=t.targetList,this.#t=t.healTargetCount??this.#e?.length??0,this.falloff=t.falloff,this.#n=void 0}hasTarget(t){return this.targetList.includes(t)}get targetList(){return this.#e??[]}tryRemoveTarget(t){const n=this.#e?.indexOf(t)??-1;return n>-1?(this.#e.splice(n,1),this.#t=this.targetList.length,!0):!1}addTargetSpecificModifiers(t){this.#n===void 0&&(this.#n=new Map),t.forEach((n,o)=>{const s=this.#n.get(o);s?s.push(...n):this.#n.set(o,[...n])})}get targetCount(){return this.#t}get healTargetCount(){return console.assert(this.#e===void 0),this.#t}set healTargetCount(t){console.assert(this.#e===void 0),this.#t=t}addModifiers(...t){this.#a.push(...t)}getDisplayedModifiers(t){if(t!==void 0){const n=new Set;return this.#n?.forEach((o,s)=>{t.includes(s)&&o.forEach(c=>n.add(c))}),[...this.#a,...n]}return this.#a}getAmount(t){const n=this.targetCount-(this.#n?.size??0);let o=this.#i(t,this.targetList.length===0||!this.#n?.has(this.targetList[0]),n,this.#a);if(this.targetList.length===0)return o;const s=this.targetList[0];return this.#n?.forEach((c,d)=>{o+=this.#i(t,d===s,1,[...this.#a,...c])}),o}#i(t,n,o,s){let c=1,d=0,f=0,h=0,m=!1,R=!1,T=!1;s.forEach(p=>{p.source===10?c*=t.tincturePotencyMultiplier:p.source===12?m=!0:p.source===23?R=!0:p.source===13?T=!0:p.kind==="critDirect"?(f+=p.critBonus,h+=p.dhBonus):p.kind==="multiplier"?c*=p.potencyFactor:p.kind==="adder"&&(d+=p.additiveAmount)}),console.assert(!(T&&(m||R)),"skills that can't CDH cannot be auto-crit or auto-CDH"),T&&(m=!1,R=!1),console.assert(!(m&&R),"cannot be both auto-crit and auto-CDH"),t.includePartyBuffs&&this.snapshotTime&&I.game.getPartyBuffs(this.snapshotTime).forEach(p=>{p.kind==="multiplier"?c*=p.potencyFactor:p.kind==="critDirect"&&(f+=p.critBonus,h+=p.dhBonus)});const S=this.base+d;let g=S*this.#r(c,T?0:f,T?0:h);if(m?g*=this.#c(f,h):R?g*=this.#s(f,h):T&&(g=S*c/ut.calculateDamage(this.config.level,this.config.criticalHit,this.config.directHit,this.config.determination,c,0,0)),t.includeSplash){const p=n?1+(1-(this.falloff??1))*(o-1):(1-(this.falloff??1))*o;g*=p}return g}getPartyBuffs(t){return this.sourceSkill==="SALTED_EARTH"||this.sourceSkill==="SLIPSTREAM"||this.sourceSkill==="DOTON"?t?[...I.game.getPartyBuffs(t).keys()]:[]:this.snapshotTime?[...I.game.getPartyBuffs(this.snapshotTime).keys()]:[]}resolve(t){console.assert(this.snapshotTime!==void 0,`${this.sourceSkill} displayed at ${t} did not have snapshotTime`),console.assert(this.applicationTime===void 0,`${this.sourceSkill} displayed at ${t} was already resolved at ${this.applicationTime}`),this.applicationTime=t}hasResolved(){return this.applicationTime!==void 0}hasHitBoss(t){return this.applicationTime!==void 0&&!t(this.applicationTime)}hasSnapshotted(){return this.snapshotTime!==void 0}#c(t,n){const o=this.config.level,s=ut.calculateDamage(o,I.gameConfig.criticalHit,I.gameConfig.directHit,I.gameConfig.determination,1,t,n);return ut.calculateDamage(o,I.gameConfig.criticalHit,I.gameConfig.directHit,I.gameConfig.determination,1,1+t,1+n)/s}#s(t,n){const o=this.config.level,s=ut.calculateDamage(o,I.gameConfig.criticalHit,I.gameConfig.directHit,I.gameConfig.determination,1,t,n);return ut.calculateDamage(o,I.gameConfig.criticalHit,I.gameConfig.directHit,I.gameConfig.determination,1,1+t,n)/s}#r(t,n,o){const s=this.config.level,c=this.config.criticalHit,d=this.config.directHit,f=this.config.determination,h=ut.calculateDamage(s,c,d,f,1,0,0);return ut.calculateDamage(s,c,d,f,t,n,o)/h}}var ft=(e=>(e.Red="#f64141",e.Orange="#e89b5f",e.Yellow="#ffd535",e.Green="#50c53d",e.Cyan="#53e5e5",e.Blue="#217ff5",e.Purple="#9755ef",e.Pink="#ee79ee",e.Grey="#6f6f6f",e))(ft||{});const St=()=>En(C.useContext(pa)),En=e=>e==="Dark"?Qx:$x,Il=(e,t)=>En(e)[t],Qx={accent:"mediumpurple",jobAccents:{BLM:"#9370db",BLU:"#9370db",PCT:"#e176c2",RDM:"#ff0000",DNC:"#e2b0af",SAM:"#f59542",MCH:"#6ee1d6",WAR:"#b10b0b",RPR:"#965a90",BRD:"#91ba5e",GNB:"#f6b26b",SMN:"#2D9B78",SGE:"#80a0f0"},editingValid:"#ffdc00",editingInvalid:"#ff0000",dropTarget:"#5579f1",realTime:"mediumseagreen",historical:"#ff8c00",fileDownload:"#798c3f",text:"#b0b0b0",emphasis:"#dadada",success:"mediumseagreen",warning:"#ff6224",background:"#1f1f21",tipBackground:"#2a2a2a",bgLowContrast:"#333",bgMediumContrast:"#393939",bgHighContrast:"#626262",timelineEditor:{headerFooter:"#424242",bgAlternateRow:"#282828"},resources:{gcdBar:"#5cab43",lockBar:"#737373",mana:"#62a5d2",manaTick:"#3d5c73",cdhTag:"#d55124",comboTag:"#5c8bad",petTag:"#eb9b5f"},blm:{enochian:"#b69241",astralFire:"#d55124",astralSoul:"#cb8046",umbralIce:"#509bd5",umbralHeart:"#8fced5",paradox:"#d953ee",polyTimer:"#594472",polyStacks:"#b138ee"},blu:{moonflute:"#b69241",whistle:"#b69241",bristle:"#b69241",tinglea:"#217ff5",tingleb:"#217ff5",surpanakha:"#b69241",wingedreprobation:"#ffd535"},pct:{creatureCanvas:"#a948e3",weaponCanvas:"#a53535",landscapeCanvas:"#2e51dd",paletteGauge:"#b69241",holyPaint:"#9bc6dd",cometPaint:"#7e19aa",starryBuff:"#509bd5"},rdm:{whiteMana:"#dddddd",blackMana:"#2a4bf5",manaStack:"#cb8046",emboldenBuff:"#de0202",accelBuff:"#f0d1e8"},dnc:{esprit:"#e2b0af",feathers:"#8DA147",emboite:"#bf615c",entrechat:"#3a8db7",jete:"#539350",pirouette:"#b0984e"},sam:{kenki:"#d55124",setsu:"#c7ffff",getsu:"#7987fc",kaSen:"#f8a2a6",meditation:"#ff853d",fugetsu:"#0f52ba",iai:"#89cfef"},mch:{heat:"#D35A10",battery:"#2C9FCB"},rpr:{soulGaugeLow:"#660929",soulGaugeHigh:"#e5004e",shroudGaugeLow:"#03706c",shroudGaugeHigh:"#00fcf3",lemureShroud:"#53ffff",voidShroudLow:"#5c125c",voidShroudHigh:"#ff04ff",deathsDesign:"#ab0009",arcaneCircle:"#ff94fd"},war:{beastGauge:"#ffba00"},brd:{soulVoice:"#5DBD99",pitchPerfect:"#9ac5f1",repertoire:"#e8c35a",wanderersCoda:"#add549",magesCoda:"#ffbcf8",armysCoda:"#eb9b5f",ragingStrikes:"#c04414",barrage:"#e6c65b",battleVoice:"#71bed1",radiantFinale:"#edcce7"},gnb:{},smn:{aetherflow:"#ffd4ff",bahamut:"#2D9B78",phoenix:"#d55124",solar:"#9bc6dd",ruby:"#e5004e",topaz:"#b0984e",emerald:"#539350",searing:"#2D9B78"},drg:{lifeSurge:"#ff6633",lanceCharge:"#d6002d",lifeOfTheDragon:"#0968af",battleLitany:"#33b8e3",powerSurge:"#59ed78",enhancedPiercingTalon:"#f4caa6",firstmindsFocusStacks:"#9926c8",lifeOfTheDragonBar:"#d74936",drgComboTimer:"#3d61ae"},sge:{addersgall:"#80a0f0",addersting:"#9e2dca",zoe:"cyan",autophysis:"lightblue",krasis:"teal",soteria:"green",philosophia:"lightgreen"},pld:{divineMight:"#ff6633",requiescat:"#d6002d",fightOrFlight:"#0968af",pldComboTimer:"#59ed78",ironWillColor:"#d74936",oathGaugeColor:"#3d61ae"},drk:{darkside:"#c000d1",blood:"#8803fc",darkarts:"#ffdf0d",drkComboTimer:"#cb8046",grit:"#82cad9"},nin:{ninComboTimer:"#8532a8",kazematoi:"#ab1fd1",meisui:"#559ef2",ninki:"#8532a8",bunshin:"#ed8021",kassatsu:"#fa9bd4",nozuchi:"#d6a440",dokumori:"#9a0ec4",trick:"#ffd454"},mnk:{opo:"#feabf7",raptor:"#c495fb",coeurl:"#00d9a5",lunar:"#a984f5",solar:"#c6c5c3",riddleOfFire:"#d98d58",brotherhood:"#da4c32",chakra:"#fffea5",extraChakra:"#fe9b28"},whm:{lily:"#d3ffff",blood:"#e08889",pom:"#9788e0",asylum:"#b5e075",confession:"#8df2e8",temperance:"#77f7b7"},ast:{div:"#ffd535",astralCard:"#52d3f7",umbralCard:"#f7b3ff",lord:"#de1200",lady:"#f8facd",neutral:"#354869",synastry:"#578a7e",arrow:"#1690a8"},vpr:{vprComboTimer:"#dea65d",rattlingCoil:"#f64141",serpentOfferings:"#f64141",anguineTribute:"#24e2ff",huntersInstinct:"#9e5a02",swiftscaled:"#ffe20a"},sch:{chain:"#6f6f6f",faerieGauge:"#96ffbd",aetherflow:"#acfff7",seraph:"#44b6fd",feyIllumination:"#2cc7b0",dissipation:"#c4c4c4",protraction:"#77c990",recitation:"#ffce1c"},timeline:{ruler:"#2d2d2d",tracks:"#242424",castBar:"#42364d",lockBar:"#696969",gcdBar:"#354931",invalidBg:"#f25449",llCover:"#5ea647",potCover:"#c4543a",buffCover:"#9370db",damageMark:"#ff0000",healingMark:"#2cda30",aggroMark:"#ff8000",untargetableDamageMark:"#7f7f7f",mpTickMark:"#32525e",warningMark:"#9d7103",lucidTickMark:"#56b3d5",countdown:"rgba(15, 15, 15, 0.4)",markerAlpha:"4f"}},$x={accent:"mediumpurple",jobAccents:{BLM:"#9370db",BLU:"#9370db",PCT:"#f485d6",RDM:"#ff0000",DNC:"#e2b0af",SAM:"#f59542",MCH:"#6ee1d6",WAR:"#b10b0b",RPR:"#965a90",BRD:"#91ba5e",SMN:"#2D9B78",SGE:"#80a0f0"},editingValid:"#ffdc00",editingInvalid:"#ff0000",dropTarget:"#4665ff",realTime:"mediumseagreen",historical:"#ff8c00",fileDownload:"#798c3f",text:"#000000",emphasis:"#000000",success:"mediumseagreen",warning:"#ff4d07",background:"#ffffff",tipBackground:"#ffffff",bgLowContrast:"#efefef",bgMediumContrast:"lightgrey",bgHighContrast:"darkgrey",timelineEditor:{headerFooter:"#cacaca",bgAlternateRow:"#eeeeee"},resources:{gcdBar:"#8edc72",lockBar:"#cbcbcb",mana:"#8ACEEA",manaTick:"#C2EAFF",cdhTag:"#ff6633",comboTag:"#53a7c9",petTag:"#eb9b5f"},blm:{enochian:"#f5cf96",astralFire:"#ff6633",astralSoul:"#ffa641",umbralIce:"#66bbff",umbralHeart:"#95dae3",paradox:"#d953ee",polyTimer:"#d5bbf1",polyStacks:"#b138ee"},blu:{moonflute:"#b69241",whistle:"#b69241",bristle:"#b69241",tinglea:"#217ff5",tingleb:"#217ff5",surpanakha:"#b69241",wingedreprobation:"#ffd535"},pct:{creatureCanvas:"#b854e8",weaponCanvas:"#d54d48",landscapeCanvas:"#4568f6",paletteGauge:"#f5cf96",holyPaint:"#b7c9d5",cometPaint:"#9926c8",starryBuff:"#66bbff"},rdm:{whiteMana:"#fcd8d4",blackMana:"#467aeb",manaStack:"#9926c8",emboldenBuff:"#c91310",accelBuff:"#c973b4"},dnc:{esprit:"#e2b0af",feathers:"#8DA147",emboite:"#bf615c",entrechat:"#3a8db7",jete:"#539350",pirouette:"#b0984e"},sam:{kenki:"#d55124",setsu:"#addede",getsu:"#7987fc",kaSen:"#f8a2a6",meditation:"#ff853d",fugetsu:"#0f52ba",iai:"#89cfef"},mch:{heat:"#D35A10",battery:"#2C9FCB"},rpr:{soulGaugeLow:"#660929",soulGaugeHigh:"#e5004e",shroudGaugeLow:"#03706c",shroudGaugeHigh:"#00fcf3",lemureShroud:"#53ffff",voidShroudLow:"#5c125c",voidShroudHigh:"#ff04ff",deathsDesign:"#ab0009",arcaneCircle:"#ff94fd"},war:{beastGauge:"#e74a3c"},brd:{soulVoice:"#5DBD99",pitchPerfect:"#9ac5f1",repertoire:"#e8c35a",wanderersCoda:"#add549",magesCoda:"#ffbcf8",armysCoda:"#eb9b5f",ragingStrikes:"#c04414",barrage:"#e6c65b",battleVoice:"#71bed1",radiantFinale:"#edcce7"},gnb:{},smn:{aetherflow:"#ffd4ff",bahamut:"#2D9B78",phoenix:"#d55124",solar:"#9bc6dd",ruby:"#e5004e",topaz:"#b0984e",emerald:"#539350",searing:"#2D9B78"},drg:{lifeSurge:"#ff6633",lanceCharge:"#d6002d",lifeOfTheDragon:"#0968af",battleLitany:"#33b8e3",powerSurge:"#59ed78",enhancedPiercingTalon:"#f4caa6",firstmindsFocusStacks:"#9926c8",lifeOfTheDragonBar:"#d74936",drgComboTimer:"#3d61ae"},sge:{addersgall:"#80a0f0",addersting:"#9e2dca",zoe:"cyan",autophysis:"lightblue",krasis:"teal",soteria:"green",philosophia:"lightgreen"},pld:{divineMight:"#ff6633",requiescat:"#d6002d",fightOrFlight:"#0968af",pldComboTimer:"#59ed78",ironWillColor:"#d74936",oathGaugeColor:"#3d61ae"},drk:{darkside:"#c000d1",blood:"#8803fc",darkarts:"#ffdf0d",drkComboTimer:"#cb8046",grit:"#82cad9"},nin:{ninComboTimer:"#8532a8",kazematoi:"#ab1fd1",meisui:"#559ef2",ninki:"#8532a8",bunshin:"#ed8021",kassatsu:"#fa9bd4",nozuchi:"#d6a440",dokumori:"#7e03a3",trick:"#e6b525"},mnk:{opo:"#feabf7",raptor:"#c495fb",coeurl:"#00d9a5",lunar:"#a984f5",solar:"#c6c5c3",riddleOfFire:"#d98d58",brotherhood:"#da4c32",chakra:"#fee11c",extraChakra:"#fe9b28"},whm:{lily:"#a5d0e8",blood:"#ff5454",pom:"#9788e0",asylum:"#b5e075",confession:"#8df2e8",temperance:"#77f7b7"},ast:{div:"#ffd535",astralCard:"#52d3f7",umbralCard:"#f7b3ff",lord:"#de1200",lady:"#d3d672",neutral:"#354869",synastry:"#578a7e",arrow:"#1690a8"},vpr:{vprComboTimer:"#dea65d",rattlingCoil:"#f64141",serpentOfferings:"#f64141",anguineTribute:"#24e2ff",huntersInstinct:"#9e5a02",swiftscaled:"#ffe20a"},sch:{chain:"#6f6f6f",faerieGauge:"#96ffbd",aetherflow:"#79d9d0",seraph:"#3299d9",feyIllumination:"#2cc7b0",dissipation:"#c4c4c4",protraction:"#77c990",recitation:"#ffce1c"},timeline:{ruler:"#e9e9e9",tracks:"#f3f3f3",castBar:"#ecd6f3",lockBar:"#9d9d9d",gcdBar:"#ccefc6",invalidBg:"#c21104",llCover:"#87ec71",potCover:"#ff865c",buffCover:"#9370db",damageMark:"#ff0000",healingMark:"#2cda30",aggroMark:"#ff8000",untargetableDamageMark:"#7f7f7f",mpTickMark:"#b6dfea",warningMark:"#ffbb29",lucidTickMark:"#88cae0",countdown:"rgba(0, 0, 0, 0.1)",markerAlpha:"7f"}};function Jx(e){const t=St(),n=new Map([[U.AF3,t.blm.astralFire],[U.AF2,t.blm.astralFire],[U.AF1,t.blm.astralFire],[U.UI3,t.blm.umbralIce],[U.UI2,t.blm.umbralIce],[U.UI1,t.blm.umbralIce],[U.ENO,t.blm.enochian],[U.AUTO_CDH,t.resources.cdhTag],[U.STARRY,t.pct.starryBuff],[U.EMBOLDEN_M,t.rdm.emboldenBuff],[U.ACCELERATION,t.rdm.accelBuff],[U.STANDARD_SINGLE,t.dnc.jete],[U.STANDARD_DOUBLE,t.dnc.jete],[U.TECHNICAL_SINGLE,t.dnc.esprit],[U.TECHNICAL_DOUBLE,t.dnc.esprit],[U.TECHNICAL_TRIPLE,t.dnc.esprit],[U.TECHNICAL_QUADRUPLE,t.dnc.esprit],[U.DEVILMENT,t.dnc.feathers],[U.OVERHEATED,"#ee79ee"],[U.COMBO,t.resources.comboTag],[U.FUGETSU,t.sam.fugetsu],[U.AUTO_CRIT,t.resources.cdhTag],[U.YATEN,t.pct.cometPaint],[U.POSITIONAL,"#50c53d"],[U.ARCANE_CIRCLE,"#ee79ee"],[U.DEATHSDESIGN,"#f64141"],[U.ENHANCED_GIBBET_GALLOWS,"#217ff5"],[U.ENHANCED_REAPING,"#9755ef"],[U.IMMORTAL_SACRIFICE,"#ee79ee"],[U.SURGING_TEMPEST,"#9755ef"],[U.BARRAGE,t.brd.barrage],[U.RAGING_STRIKES,t.brd.ragingStrikes],[U.BATTLE_VOICE,t.brd.battleVoice],[U.RADIANT_FINALE_THREE_CODA,t.brd.radiantFinale],[U.RADIANT_FINALE_TWO_CODA,t.brd.radiantFinale],[U.RADIANT_FINALE_ONE_CODA,t.brd.radiantFinale],[U.WANDERERS_MINUET,t.brd.wanderersCoda],[U.MAGES_BALLAD,t.brd.magesCoda],[U.ARMYS_PAEON,t.brd.armysCoda],[U.NO_MERCY,t.rdm.blackMana],[U.SEARING_LIGHT,t.smn.searing],[U.LIFE_SURGE,t.drg.lifeSurge],[U.LANCE_CHARGE,t.drg.lanceCharge],[U.LIFE_OF_THE_DRAGON,t.drg.lifeOfTheDragon],[U.BATTLE_LITANY,t.drg.battleLitany],[U.POWER_SURGE,t.drg.powerSurge],[U.ENHANCED_PIERCING_TALON,t.drg.enhancedPiercingTalon],[U.DIVINE_MIGHT,t.pld.divineMight],[U.REQUIESCAT,t.pld.requiescat],[U.FIGHT_OR_FLIGHT,t.pld.fightOrFlight],[U.PET,t.resources.petTag],[U.MOON_FLUTE,t.blu.moonflute],[U.WHISTLE,t.blu.whistle],[U.BRISTLE,t.blu.bristle],[U.TINGLEA,t.blu.tinglea],[U.TINGLEB,t.blu.tingleb],[U.SURPANAKHA,t.blu.surpanakha],[U.WINGED_REDEMPTION,t.blu.wingedreprobation],[U.WINGED_REPROBATION,t.blu.wingedreprobation],[U.DARKSIDE,t.drk.darkside],[U.BUNSHIN,t.nin.bunshin],[U.KASSATSU,t.nin.kassatsu],[U.HOLLOW_NOZUCHI,t.nin.nozuchi],[U.KAZEMATOI,t.nin.kazematoi],[U.MEISUI,t.nin.meisui],[U.DOKUMORI,t.nin.dokumori],[U.TRICK_ATTACK,t.nin.trick],[U.KUNAIS_BANE,t.nin.trick],[U.BROTHERHOOD,t.mnk.brotherhood],[U.RIDDLE_OF_FIRE,t.mnk.riddleOfFire],[U.MNK_BALL,t.mnk.opo],[U.SSS_CHAKRA,t.mnk.chakra],[U.DIVINATION,t.ast.div],[U.HUNTERS_INSTINCT,t.vpr.huntersInstinct],[U.HONED,t.vpr.vprComboTimer],[U.VENOM,t.vpr.vprComboTimer],[U.POISED,t.vpr.vprComboTimer],[U.CHAIN_STRAT,t.sch.chain],[U.NO_CDH,t.timeline.untargetableDamageMark]]);return console.assert(n.has(e),`modifier ${e} doesn't have a color!`),n.get(e)??t.text}function op(e){const t=e.colorTheme==="Dark",n=t?l.jsx(Vx,{}):l.jsx(Wx,{}),o=St(),s=C.useContext(pa),c=N({en:t?"Dark Mode":"Light Mode",zh:t?"":""});return l.jsx("div",{title:c,style:{display:"inline-block",cursor:"pointer",borderBottom:e.colorTheme===s?"none":"1px solid "+o.text,borderTop:e.colorTheme===s?"1px solid "+o.text:"none"},onClick:()=>e.setColorTheme(e.colorTheme),children:n})}const mf=()=>{const e=Tt("colorTheme");return e==="Light"||e==="Dark"?e:window.matchMedia?.("(prefers-color-scheme: dark)").matches?"Dark":"Light"},pa=C.createContext(mf());function eH(e){return l.jsx("div",{style:{display:"inline-block"},children:l.jsxs("div",{style:{display:"inline-block",fontSize:16},children:[l.jsx(op,{colorTheme:"Light",setColorTheme:e.setColorTheme}),"|",l.jsx(op,{colorTheme:"Dark",setColorTheme:e.setColorTheme})]})})}class kh{static getJob(t){return dt[t]}static getAction(t){return Ia[t]}static findAction(t){return this.findByName(Ia,t)}static findActionKey(t){return this.findKeyByName(Ia,t)}static getResource(t){return Pe[t]}static findResource(t){return this.findByName(Pe,t)}static findResourceKey(t){return this.findKeyByName(Pe,t)}static getCooldown(t){return ns[t]}static findCooldown(t){return this.findByName(ns,t)}static findCooldownKey(t){return this.findKeyByName(ns,t)}static findByName(t,n){return Object.values(t).find(o=>o.name===n)}static findKeyByName(t,n){const o=Object.entries(t).find(([s,c])=>c.name===n);if(o)return o[0]}}function Jd(e){const t=Mi();return t==="zh"?e==="en"?"":e==="zh"?"":"":t==="ja"?e==="en"?"":e==="zh"?"":"":e.toString()}function N(e){const t=Mi();return t==="zh"&&e.zh?e.zh:t==="ja"&&e.ja?e.ja:e.en}function tH(e,t){{const[n,o,s]=e.split("/");return`20${s}${n}${o}`}}function iu(e){switch(e){case"spellSpeed":return N({en:"spell speed: ",zh:""}).toString();case"skillSpeed":return N({en:"skill speed: ",zh:""}).toString();case"fps":return N({en:"FPS: ",zh:""}).toString();case"criticalHit":return N({en:"crit: ",zh:""}).toString();case"directHit":return N({en:"direct hit: ",zh:""}).toString();case"determination":return N({en:"determination: ",zh:""}).toString();case"piety":return N({en:"piety: ",zh:""}).toString();case"animationLock":return N({en:"animation lock: ",zh:""}).toString()}return e}function Wn(e){if(e==="NEVER")return N({en:"unknown skill",zh:""}).toString();if(!(e in Ia))return e;const t=kh.getAction(e);return N({en:t.name,...t.label}).toString()}function is(e){if(e===void 0)return N({en:"reason unknown",zh:""}).toString();let t="";return e===mt.Blocked?t="CD":e===mt.SecondaryBlocked?t="CD":e===mt.NotEnoughMP?t="MP":e===mt.NotInCombat?t="":e===mt.RequirementsNotMet?t="":e===mt.SkillNotUnlocked?t="Lv":e===mt.BuffNoLongerAvailable?t="BUFF":e===mt.PastTargetTime?t="":e===mt.CastCanceled?t="":e===mt.UnknownSkill?t="":console.error("unlocalized reason: "+e),N({en:e,zh:t}).toString()}const aH=new Map([[k.LeyLines,""],[k.Hyperphantasia,""],[k.Tincture,""],[k.ArcaneCircle,""],[k.ArmysPaeon,""],[k.BattleLitany,""],[k.BattleVoice,""],[k.Brotherhood,""],[k.Card_TheBalance,""],[k.Card_TheSpear,""],[k.ChainStratagem,""],[k.Devilment,""],[k.Divination,""],[k.Dokumori,""],[k.Embolden,""],[k.MagesBallad,""],[k.RadiantFinale1,"1"],[k.RadiantFinale2,"2"],[k.RadiantFinale3,"3"],[k.SearingLight,""],[k.StandardFinish,""],[k.StarryMuse,""],[k.TechnicalFinish,""],[k.WanderersMinuet,""]]),nH=new Map([[k.LeyLines,""],[k.Tincture,""],[k.ArcaneCircle,""],[k.ArmysPaeon,""],[k.BattleLitany,""],[k.BattleVoice,""],[k.Brotherhood,""],[k.Card_TheBalance,""],[k.Card_TheSpear,""],[k.ChainStratagem,""],[k.Devilment,""],[k.Divination,""],[k.Dokumori,""],[k.Embolden,""],[k.MagesBallad,""],[k.RadiantFinale1,"1"],[k.RadiantFinale2,"2"],[k.RadiantFinale3,"3"],[k.SearingLight,""],[k.StandardFinish,""],[k.StarryMuse,""],[k.TechnicalFinish,""],[k.WanderersMinuet,""]]);function nC(e){const t=Mi();return t==="zh"?aH.get(e)??e:t==="ja"?nH.get(e)??e:e}function Ke(e){const t=Mi();if(e in ns){const o=kh.getCooldown(e),s=N({en:o.name,...o.label}).toString();if(t!=="en"&&s===o.name){const c=e.slice(3),d=Object.keys(Ia).find(f=>Ia[f].name===c||f===c);if(d!==void 0)return"CD"+Wn(d)}return s}const n=kh.getResource(e);return N({en:n.name,...n.label}).toString()}const lp=new Map([[U.AF3,{en:"AF3",zh:""}],[U.AF2,{en:"AF2",zh:""}],[U.AF1,{en:"AF1",zh:""}],[U.UI3,{en:"UI3",zh:""}],[U.UI2,{en:"UI2",zh:""}],[U.UI1,{en:"UI1",zh:""}],[U.ENO,{en:"enochian",zh:""}],[U.POT,{en:"pot",zh:""}],[U.PARTY,{en:"party",zh:""}],[U.AUTO_CDH,{en:"auto crit/direct hit",zh:""}],[U.STARRY,{en:"starry muse",zh:""}],[U.EMBOLDEN_M,{en:"embolden",zh:""}],[U.ACCELERATION,{en:"acceleration",zh:""}],[U.STANDARD_SINGLE,{en:"single standard finish",zh:""}],[U.STANDARD_DOUBLE,{en:"double standard finish",zh:""}],[U.TECHNICAL_SINGLE,{en:"single technical finish",zh:""}],[U.TECHNICAL_DOUBLE,{en:"double technical finish",zh:""}],[U.TECHNICAL_TRIPLE,{en:"triple technical finish",zh:""}],[U.TECHNICAL_QUADRUPLE,{en:"quadruple technical finish",zh:""}],[U.DEVILMENT,{en:"devilment",zh:""}],[U.OVERHEATED,{en:"overheated",zh:""}],[U.COMBO,{en:"combo",zh:""}],[U.FUGETSU,{en:"fugetsu",zh:""}],[U.AUTO_CRIT,{en:"auto crit",zh:""}],[U.YATEN,{en:"yaten",zh:""}],[U.POSITIONAL,{en:"positional",zh:""}],[U.ARCANE_CIRCLE,{en:"arcane circle",zh:""}],[U.DEATHSDESIGN,{en:"death's design",zh:""}],[U.ENHANCED_GIBBET_GALLOWS,{en:"enhanced gibbet/gallows",zh:"/"}],[U.ENHANCED_REAPING,{en:"enhanced reaping",zh:"/"}],[U.IMMORTAL_SACRIFICE,{en:"immortal sacrifice"}],[U.BARRAGE,{en:"barrage"}],[U.RAGING_STRIKES,{en:"raging strikes"}],[U.BATTLE_VOICE,{en:"battle voice"}],[U.RADIANT_FINALE_THREE_CODA,{en:"three coda radiant finale"}],[U.RADIANT_FINALE_TWO_CODA,{en:"two coda radiant finale"}],[U.RADIANT_FINALE_ONE_CODA,{en:"one coda radiant finale"}],[U.WANDERERS_MINUET,{en:"wanderer's minuet"}],[U.MAGES_BALLAD,{en:"mage's ballad"}],[U.ARMYS_PAEON,{en:"army's paeon"}],[U.NO_MERCY,{en:"no mercy",zh:""}],[U.SEARING_LIGHT,{en:"searing light",zh:""}],[U.SURGING_TEMPEST,{en:"surging tempest",zh:""}],[U.POWER_SURGE,{en:"power surge"}],[U.LANCE_CHARGE,{en:"lance charge"}],[U.ENHANCED_PIERCING_TALON,{en:"enhanced piercing talon"}],[U.LIFE_OF_THE_DRAGON,{en:"life of the dragon"}],[U.LIFE_SURGE,{en:"life surge"}],[U.PET,{en:"pet modifier",zh:""}],[U.DIVINE_MIGHT,{en:"divine might",zh:""}],[U.REQUIESCAT,{en:"requiescat",zh:""}],[U.FIGHT_OR_FLIGHT,{en:"fight or flight",zh:""}],[U.WHISTLE,{en:"WH",zh:""}],[U.BRISTLE,{en:"BR",zh:""}],[U.MOON_FLUTE,{en:"MF",zh:""}],[U.TINGLEA,{en:"TING",zh:""}],[U.TINGLEB,{en:"TING",zh:""}],[U.WINGED_REPROBATION,{en:"WREP",zh:""}],[U.WINGED_REDEMPTION,{en:"WRED",zh:""}],[U.DARKSIDE,{en:"darkside",zh:""}],[U.BUNSHIN,{en:"bunshin",zh:""}],[U.KASSATSU,{en:"kassatsu",zh:""}],[U.HOLLOW_NOZUCHI,{en:"hollow nozuchi",zh:""}],[U.KAZEMATOI,{en:"kazematoi",zh:""}],[U.MEISUI,{en:"meisui",zh:""}],[U.DOKUMORI,{en:"dokumori",zh:""}],[U.TRICK_ATTACK,{en:"trick attack",zh:""}],[U.KUNAIS_BANE,{en:"kunai's bane",zh:""}],[U.BROTHERHOOD,{en:"brotherhood",zh:""}],[U.RIDDLE_OF_FIRE,{en:"riddle of fire",zh:""}],[U.MNK_BALL,{en:"ball",zh:""}],[U.SSS_CHAKRA,{en:"chakra",zh:""}],[U.DIVINATION,{en:"divination",zh:""}],[U.HUNTERS_INSTINCT,{en:"hunter's instinct",zh:""}],[U.HONED,{en:"honed"}],[U.VENOM,{en:"venom"}],[U.POISED,{en:"poised"}],[U.CHAIN_STRAT,{en:"chain stratagem",zh:""}],[U.NO_CDH,{en:"no crit/direct hit",zh:""}]]);function sp(e){return console.assert(lp.has(e),`modifier ${e} doesn't have a name!`),N(lp.get(e)??{en:"unknown"})}const rp=new Map([[U.AF3,{en:"AF3",zh:""}],[U.AF2,{en:"AF2",zh:""}],[U.AF1,{en:"AF1",zh:""}],[U.UI3,{en:"UI3",zh:""}],[U.UI2,{en:"UI2",zh:""}],[U.UI1,{en:"UI1",zh:""}],[U.ENO,{en:"ENO",zh:""}],[U.POT,{en:"pot",zh:""}],[U.PARTY,{en:"party",zh:""}],[U.AUTO_CDH,{en:"CDH",zh:""}],[U.STARRY,{en:"STARRY",zh:""}],[U.EMBOLDEN_M,{en:"MB",zh:""}],[U.ACCELERATION,{en:"ACC",zh:""}],[U.STANDARD_SINGLE,{en:"SSF",zh:""}],[U.STANDARD_DOUBLE,{en:"DSF",zh:""}],[U.TECHNICAL_SINGLE,{en:"STF",zh:""}],[U.TECHNICAL_DOUBLE,{en:"DTF",zh:""}],[U.TECHNICAL_TRIPLE,{en:"TTF",zh:""}],[U.TECHNICAL_QUADRUPLE,{en:"QTF",zh:""}],[U.DEVILMENT,{en:"DEV",zh:""}],[U.OVERHEATED,{en:"OVERHEATED",zh:""}],[U.COMBO,{en:"CMB",zh:""}],[U.FUGETSU,{en:"FGS",zh:""}],[U.AUTO_CRIT,{en:"CRIT",zh:""}],[U.YATEN,{en:"ENH",zh:""}],[U.POSITIONAL,{en:"PS",zh:""}],[U.ARCANE_CIRCLE,{en:"AC",zh:""}],[U.DEATHSDESIGN,{en:"DD",zh:""}],[U.ENHANCED_GIBBET_GALLOWS,{en:"E. GIB/GAL",zh:"/"}],[U.ENHANCED_REAPING,{en:"E. REAPING",zh:"/"}],[U.IMMORTAL_SACRIFICE,{en:"IMMORTAL SAC",zh:""}],[U.BARRAGE,{en:"BRG"}],[U.RAGING_STRIKES,{en:"RS"}],[U.BATTLE_VOICE,{en:"BV"}],[U.RADIANT_FINALE_THREE_CODA,{en:"RF3"}],[U.RADIANT_FINALE_TWO_CODA,{en:"RF2"}],[U.RADIANT_FINALE_ONE_CODA,{en:"RF1"}],[U.WANDERERS_MINUET,{en:"WM"}],[U.MAGES_BALLAD,{en:"MB"}],[U.ARMYS_PAEON,{en:"AP"}],[U.NO_MERCY,{en:"NM",zh:""}],[U.SEARING_LIGHT,{en:"SL",zh:""}],[U.SURGING_TEMPEST,{en:"SURGING",zh:""}],[U.POWER_SURGE,{en:"PWS"}],[U.LANCE_CHARGE,{en:"LC"}],[U.LIFE_OF_THE_DRAGON,{en:"LIFE"}],[U.ENHANCED_PIERCING_TALON,{en:"ENH"}],[U.LIFE_SURGE,{en:"LS"}],[U.BATTLE_LITANY,{en:"BL"}],[U.DIVINE_MIGHT,{en:"DM",zh:""}],[U.REQUIESCAT,{en:"REQ",zh:""}],[U.FIGHT_OR_FLIGHT,{en:"FOF",zh:""}],[U.PET,{en:"PET",zh:""}],[U.WHISTLE,{en:"WH",zh:""}],[U.BRISTLE,{en:"BR",zh:""}],[U.MOON_FLUTE,{en:"MF",zh:""}],[U.TINGLEA,{en:"TING",zh:""}],[U.TINGLEB,{en:"TING",zh:""}],[U.WINGED_REPROBATION,{en:"WREP",zh:""}],[U.WINGED_REDEMPTION,{en:"WRED",zh:""}],[U.DARKSIDE,{en:"DS",zh:""}],[U.BUNSHIN,{en:"BUN",zh:""}],[U.KASSATSU,{en:"KASS",zh:""}],[U.HOLLOW_NOZUCHI,{en:"NOZ",zh:""}],[U.KAZEMATOI,{en:"KAZ",zh:""}],[U.MEISUI,{en:"MEI",zh:""}],[U.DOKUMORI,{en:"DOKU",zh:""}],[U.TRICK_ATTACK,{en:"TRICK",zh:""}],[U.KUNAIS_BANE,{en:"KB",zh:""}],[U.BROTHERHOOD,{en:"BH",zh:""}],[U.RIDDLE_OF_FIRE,{en:"ROF",zh:""}],[U.MNK_BALL,{en:"BALL",zh:""}],[U.SSS_CHAKRA,{en:"CHAKRA",zh:""}],[U.DIVINATION,{en:"DIV",zh:""}],[U.HUNTERS_INSTINCT,{en:"HI",zh:""}],[U.HONED,{en:"HONED"}],[U.VENOM,{en:"VENOM"}],[U.POISED,{en:"POISED"}],[U.CHAIN_STRAT,{en:"CHAIN",zh:""}],[U.NO_CDH,{en:"NO CDH",zh:""}]]);function iH(e){return console.assert(rp.has(e),`modifier ${e} doesn't have a tag name!`),N(rp.get(e)??{en:"unknown"})}const iC=navigator.language==="zh-CN"||navigator.language==="zh"?"zh":"en";let Mi=()=>Tt("language")||iC;function cp(e){let t="English";e.lang==="zh"&&(t=""),e.lang==="ja"&&(t="");const n=St();return l.jsx("div",{style:{display:"inline-block",cursor:"pointer",textDecoration:e.lang===Mi()?"none":"underline",borderTop:e.lang===Mi()?"1px solid "+n.text:"none"},onClick:()=>{e.setCurrentLanguage(e.lang)},children:t})}function oH(){const e=Tt("language"),t=e!==null&&["zh","ja","en"].includes(e)?e:iC,[n,o]=C.useState(t),s=c=>{o(c),gt("language",c)};return C.useEffect(()=>(Mi=()=>n,()=>{Mi=()=>n})),C.useEffect(()=>{I.updateAllDisplay()},[n]),l.jsxs("div",{style:{display:"inline-block"},children:[l.jsx("span",{style:{display:"inline-block",fontSize:17,position:"relative",marginRight:2},children:l.jsx(Kx,{})}),l.jsxs("div",{style:{display:"inline-block",fontSize:14,verticalAlign:"top"},children:[l.jsx(cp,{lang:"en",setCurrentLanguage:s}),"|",l.jsx(cp,{lang:"zh",setCurrentLanguage:s})]})]})}const oC=se()({UNIMPLEMENTED:{},OUTDATED:{label:{en:"Outdated",zh:""},warningContent:{en:"WARNING: This job recently had significant changes, and may not have been fully updated to reflect them. Exported plans may not load correctly following these changes, so be cautious about relying on them until the job has been fully updated.",zh:"bugtxt"}},TESTING:{label:{en:"Testing",zh:""},warningContent:{en:"WARNING: This job was recently added to XIV in the Shell and is still being tested. There may be bugs or changes in the near future, so make sure to frequently export and save timelines for this job to make sure you don't lose your work.",zh:"txt"}},LIVE:{}});se()({TANK:{label:N({en:"Tank"})},HEALER:{label:N({en:"Healer"})},MELEE:{label:N({en:"Melee"})},RANGED:{label:N({en:"Ranged"})},CASTER:{label:N({en:"Caster"})},LIMITED:{label:N({en:"Limited"})}});const lC=se()({PLD:{role:"TANK",implementationLevel:"TESTING",usesMp:!0,limitBreak:"LAST_BASTION",limitBreakBuff:"LAST_BASTION",mainStat:"strength",zh:""},WAR:{role:"TANK",implementationLevel:"LIVE",limitBreak:"LAND_WAKER",limitBreakBuff:"LAND_WAKER",mainStat:"strength",zh:""},DRK:{role:"TANK",implementationLevel:"LIVE",usesMp:!0,limitBreak:"DARK_FORCE",limitBreakBuff:"DARK_FORCE",mainStat:"strength",zh:""},GNB:{role:"TANK",implementationLevel:"LIVE",limitBreak:"GUNMETAL_SOUL",limitBreakBuff:"GUNMETAL_SOUL",mainStat:"strength",zh:""}}),nT=se()({WHM:{role:"HEALER",implementationLevel:"TESTING",usesMp:!0,limitBreak:"PULSE_OF_LIFE",mainStat:"mind",zh:""},SCH:{role:"HEALER",implementationLevel:"TESTING",usesMp:!0,limitBreak:"ANGEL_FEATHERS",mainStat:"mind",zh:""},AST:{role:"HEALER",implementationLevel:"TESTING",usesMp:!0,limitBreak:"ASTRAL_STASIS",mainStat:"mind",zh:""},SGE:{role:"HEALER",implementationLevel:"TESTING",usesMp:!0,limitBreak:"TECHNE_MAKRE",mainStat:"mind",zh:""}}),sC=se()({MNK:{role:"MELEE",implementationLevel:"LIVE",limitBreak:"FINAL_HEAVEN",mainStat:"strength",zh:""},DRG:{role:"MELEE",implementationLevel:"LIVE",limitBreak:"DRAGONSONG_DIVE",mainStat:"strength",zh:""},NIN:{role:"MELEE",implementationLevel:"LIVE",limitBreak:"CHIMATSURI",mainStat:"dexterity",zh:""},SAM:{role:"MELEE",implementationLevel:"LIVE",limitBreak:"DOOM_OF_THE_LIVING",mainStat:"strength",zh:""},RPR:{role:"MELEE",implementationLevel:"LIVE",limitBreak:"THE_END",mainStat:"strength",zh:""},VPR:{role:"MELEE",implementationLevel:"LIVE",limitBreak:"WORLD_SWALLOWER",mainStat:"dexterity",zh:""}}),rC=se()({BRD:{role:"RANGED",implementationLevel:"LIVE",limitBreak:"SAGITTARIUS_ARROW",mainStat:"dexterity",zh:""},MCH:{role:"RANGED",implementationLevel:"LIVE",limitBreak:"SATELLITE_BEAM",mainStat:"dexterity",zh:""},DNC:{role:"RANGED",implementationLevel:"LIVE",limitBreak:"CRIMSON_LOTUS",mainStat:"dexterity",zh:""}}),cC=se()({BLM:{role:"CASTER",implementationLevel:"LIVE",usesMp:!0,limitBreak:"METEOR",mainStat:"intelligence",zh:""},SMN:{role:"CASTER",implementationLevel:"LIVE",usesMp:!0,limitBreak:"TERAFLARE",mainStat:"intelligence",zh:""},RDM:{role:"CASTER",implementationLevel:"LIVE",usesMp:!0,limitBreak:"VERMILLION_SCOURGE",mainStat:"intelligence",zh:""},PCT:{role:"CASTER",implementationLevel:"LIVE",usesMp:!0,limitBreak:"CHROMATIC_FANTASY",mainStat:"intelligence",zh:""}}),uC=se()({BLU:{role:"LIMITED",implementationLevel:"TESTING",usesMp:!0,mainStat:"intelligence",zh:""}}),dt={...lC,...nT,...sC,...rC,...cC,...uC,...se()({NEVER:{role:"LIMITED",implementationLevel:"UNIMPLEMENTED",usesMp:!1,mainStat:"strength",zh:""}})},Lo=Object.keys(dt),An=Object.keys(lC),Ri=Object.keys(nT),sn=Object.keys(sC),eo=Object.keys(rC),Ti=Object.keys(cC),Cl=Object.keys(uC);var dn=(e=>(e[e.ManaGain=0]="ManaGain",e[e.MpTick=1]="MpTick",e[e.LucidTick=2]="LucidTick",e[e.MeditateTick=3]="MeditateTick",e[e.AutoTick=4]="AutoTick",e))(dn||{});class Oe{name;#e;timeTillEvent;delay;effectFn;canceled;constructor(t,n,o){this.name=t,this.#e=[],this.timeTillEvent=n,this.delay=n,this.effectFn=o,this.canceled=!1}hasTag(t){for(let n=0;n<this.#e.length;n++)if(t===this.#e[n])return!0;return!1}addTag(t){this.hasTag(t)||this.#e.push(t)}}class dC{maxValue;currentValue;constructor(t,n){this.maxValue=t,this.currentValue=n}availableAmount(){return this.currentValue}consume(t){this.currentValue<t-Ra.epsilon&&console.warn(`invalid resource consumption: ${this.type}, ${this.currentValue} - ${t}`),this.currentValue=Math.max(this.currentValue-t,0)}gain(t){this.currentValue=Math.min(this.currentValue+t,this.maxValue)}overrideCurrentValue(t){(t<0||t>this.maxValue)&&console.warn(`invalid resource value override: ${this.type}, ${t} should be in [0, ${this.maxValue}]`),this.currentValue=t}}class _a extends dC{type;enabled;warnOnOvercap;pendingChange;#e;constructor(t,n,o,s=!1){super(n,o),this.type=t,this.enabled=!0,this.warnOnOvercap=s}available(t){return this.availableAmount()+Ra.epsilon>=t}availableAmountIncludingDisabled(){return this.currentValue}availableAmount(){return this.enabled?super.availableAmount():0}gain(t){this.warnOnOvercap&&this.currentValue+t>this.maxValue&&I.reportWarning({kind:"overcap",rsc:this.type}),super.gain(t)}gainWrapping(t){this.currentValue=(this.currentValue+t)%(this.maxValue+1)}overrideTimer(t,n){this.pendingChange?(t.addEvent(new Oe("override "+this.pendingChange.name+" timer: "+n,0,()=>{this.pendingChange&&(this.pendingChange.timeTillEvent=n)})),this.pendingChange.timeTillEvent=n):console.error(`Failed to override non-pending resource timer for resource: ${this.type}`)}removeTimer(){this.pendingChange&&(this.pendingChange.canceled=!0,this.pendingChange=void 0)}getLastExpirationTime(){return this.#e}consume(t){super.consume(t),this.currentValue===0&&(this.#e=I.game.getDisplayTime())}}class Ue extends dC{type;#e;#t;#a;constructor(t,n,o,s){super(o,s),this.type=t,this.#e=n,this.#t=n,this.#a=0}currentStackCd(){return this.#t}maxStacks(){return this.maxValue}useStack(){this.stacksAvailable()===this.maxStacks()&&(this.#a=this.#t),super.consume(1)}useStackWithRecast(t){console.assert(this.maxStacks()===1,"class CoolDown assumes special recasts are only available for skills with at most 1 stack"),this.#t=t,this.useStack()}restore(t){for(;t>0&&super.availableAmount()<this.maxStacks();){const n=Math.min(this.#a,t);this.#a-=n,this.#a<Ra.epsilon&&(super.gain(1),this.#t=this.#e,this.stacksAvailable()<this.maxStacks()&&(this.#a+=this.#e)),t-=n}}timeTillNextStackAvailable(){return this.#a}overrideTimeTillNextStack(t){this.#a=t}stacksAvailable(){return super.availableAmount()}}class lH{game;#e;constructor(t){this.game=t,this.#e=new Map}forEach(t){this.#e.forEach(t)}get(t){const n=this.#e.get(t);return n||(console.assert(!1,`no cooldown for resource ${t}`),new Ue("NEVER",0,0,0))}set(t){this.#e.set(t.type,t)}tick(t){for(const n of this.#e.values())n.restore(t)}timeTillNextStackAvailable(t){return this.get(t).timeTillNextStackAvailable()}timeTillAnyStackAvailable(t){const n=this.get(t);return n.stacksAvailable()>0?0:n.timeTillNextStackAvailable()}}class sH{game;#e;constructor(t){this.game=t,this.#e=new Map}get(t){const n=this.#e.get(t);return n||(console.error(`could not find resource ${t}`),new _a("NEVER",0,0))}set(t){this.#e.set(t.type,t)}timeTillReady(t){const n=this.get(t);return n.pendingChange?n.pendingChange.timeTillEvent:0}addResourceEvent(t){const n=this.get(t.rscType),o=new Oe(t.name,t.delay,()=>{n.pendingChange=void 0,t.fnOnRsc(n)});n.pendingChange=o,t.tags&&t.tags.forEach(s=>{o.addTag(s)}),this.game.addEvent(o)}takeResourceLock(t,n){this.get(t).consume(1),this.addResourceEvent({rscType:t,name:"[resource ready] "+t,delay:n,fnOnRsc:o=>{o.gain(1)}})}}class rH{game;#e;constructor(t){this.game=t,this.#e=Array(bi).fill(0).map(()=>new Map)}initialize(t){const n=Ut(this.game.job,t);for(let o=0;o<bi;o++){const s=new _a(t,n.maxValue,n.defaultValue,n.warnOnOvercap);s.tickCount=0,this.#e[o].set(t,s)}}hasAny(t){return this.#e.some(n=>n.has(t))}hasAnyActive(t){return this.#e.some(n=>n.get(t)?.available(1))}get(t,n){if(n<1||n>bi){console.error("targetNumber "+n+" is out of range");const s=new _a("NEVER",0,0);return s.tickCount=0,s}const o=this.#e[n-1].get(t);if(o)return o;{console.error(`could not find debuff ${t}`);const s=new _a("NEVER",0,0);return s.tickCount=0,s}}set(t,n){if(n<1||n>bi){console.error("targetNumber "+n+" is out of range");return}this.#e[n-1].set(t.type,t)}timeTillExpiry(t,n){if(n<1||n>bi)return console.error("targetNumber "+n+" is out of range"),0;const o=this.get(t,n);return o.pendingChange?o.pendingChange.timeTillEvent:0}addDebuffEvent(t){const n=this.get(t.rscType,t.targetNumber),o=new Oe(t.name,t.delay,()=>{n.pendingChange=void 0,t.fnOnRsc(n)});n.pendingChange=o,t.tags&&t.tags.forEach(s=>{o.addTag(s)}),this.game.addEvent(o)}}const Uh=new Map,hC=new Map,fC=new Map,EC=new Map;function up(e){return hC.get(e.toLowerCase())??fC.get(e)??EC.get(e)}function Ut(e,t){const n=Uh.get(e);return n.has(t)||console.error(`no resource info found for ${t}`),n.get(t)}function Qi(e){return Uh.has(e)||console.error("could not find resources for job "+e),Uh.get(e)}function Ve(e,t,n,o){Qi(e).set(t,{isCoolDown:!1,defaultValue:o.default??0,maxValue:n,maxTimeout:o.timeout??-1,warnOnOvercap:o.warnOnOvercap??!1,warnOnTimeout:o.warnOnTimeout??!1});const s=Pe[t].label;hC.set(Pe[t].name.toLowerCase(),t),s?.zh!==void 0&&fC.set(s.zh,t),s?.ja!==void 0&&EC.set(s.ja,t)}Lo.forEach(e=>{Uh.set(e,new Map([["cd_GCD",{isCoolDown:!0,maxStacks:1,cdPerStack:2.5}]])),Ve(e,"IN_COMBAT",1,{default:0}),Ve(e,"MANA",1e4,{default:1e4}),Ve(e,"TINCTURE",1,{timeout:30}),Ve(e,"SPRINT",1,{timeout:10}),Ve(e,"PARTY_SIZE",8,{default:8}),Ve(e,"AUTOS_ENGAGED",1,{default:0}),Ve(e,"STORED_AUTO",1,{default:0})});sn.forEach(e=>{Ve(e,"REAR_POSITIONAL",1,{default:1}),Ve(e,"FLANK_POSITIONAL",1,{default:1})});function Eu(e,t,n,o=1){Qi(e).set(t,{isCoolDown:!0,cdPerStack:n,maxStacks:o})}class iT{type;timeTillFullOrDrop;stacks;effectOrTimerEnabled;constructor(t){this.type=t.type,this.timeTillFullOrDrop=t.timeTillFullOrDrop,this.stacks=t.stacks,this.effectOrTimerEnabled=t.effectOrTimerEnabled}equals(t){return this.type===t.type&&this.timeTillFullOrDrop===t.timeTillFullOrDrop&&this.stacks===t.stacks&&this.effectOrTimerEnabled===t.effectOrTimerEnabled}static fromGameState(t){const n=[];return t.cooldowns.forEach((o,s)=>{o.availableAmount(),n.push(new iT({type:s,timeTillFullOrDrop:o.maxValue-o.availableAmount(),stacks:0,effectOrTimerEnabled:!0}))}),n}applyTo(t){const n=Qi(t.job).get(this.type);if(!n){console.assert(!1,`can't apply override ${this.type} to job ${t.job}`);return}if(n.isCoolDown){const o=t.cooldowns.get(this.type),s=o.maxStacks()*o.currentStackCd()-this.timeTillFullOrDrop,c=Math.floor((s+Ra.epsilon)/o.currentStackCd()),d=this.timeTillFullOrDrop%o.currentStackCd();o.overrideCurrentValue(c),o.overrideTimeTillNextStack(d)}else{const o=t.resources.get(this.type),s=c=>{o.removeTimer(),t.resources.addResourceEvent({rscType:o.type,name:"drop "+o.type,delay:c,fnOnRsc:d=>{o.type==="ENOCHIAN"?t.loseEnochian():d.consume(d.availableAmount())}})};if(o.type==="LEY_LINES")o.consume(o.availableAmount()),o.gain(1),s(this.timeTillFullOrDrop),o.enabled=this.effectOrTimerEnabled;else if(o.type==="POLYGLOT"){const c=this.stacks;o.consume(o.availableAmount()),o.gain(c);const d=this.timeTillFullOrDrop;d>0&&o.overrideTimer(t,d)}else{const c=this.stacks;o.consume(o.availableAmount()),o.gain(c);const d=this.timeTillFullOrDrop;c>0&&n.maxTimeout>=0&&s(d)}}}serialized(){return{type:this.type,timeTillFullOrDrop:this.timeTillFullOrDrop,stacks:this.stacks,effectOrTimerEnabled:this.effectOrTimerEnabled}}}const Wt=.8,en=.01;function mu(e,t){}function Le(e,...t){return(n,o)=>{e!==void 0&&e(n,o);for(const s of t)s!==void 0&&s(n,o)}}function bu(e,...t){return n=>(e===void 0||e(n))&&t.every(o=>o===void 0||o(n))}const ds=new Map,oT=new Map;Lo.forEach(e=>{ds.set(e,new Map),oT.set(e,new Map)});const wh=new Map,Af="General/Missing.png",Li=new Map;Li.set(ZR.ENERGY_DRAIN.id,"ENERGY_DRAIN");Li.set(ZR.PHYSICK.id,"PHYSICK");Li.set(JN.MOUNTAIN_BUSTER.id,"MOUNTAIN_BUSTER");Li.set(45960,"ENCHANTED_RIPOSTE");Li.set(45961,"ENCHANTED_ZWERCHHAU");Li.set(45962,"ENCHANTED_REDOUBLEMENT");Li.set(18805,"TEN");Li.set(18806,"CHI");Li.set(18807,"JIN");const dp=new Set,JA=new Map,mC=new Map,AC=new Map,hp=new Map([["Lightning Shock","Lightning Shot"],["Wanderer's Minuet","The Wanderer's Minuet"],["Apex Arow","Apex Arrow"],["Storms Eye","Storm's Eye"],["Storms Path","Storm's Path"]]);function lT(e){return hp.has(e)&&(e=hp.get(e)),e=e.toLowerCase(),!JA.has(e)&&!dp.has(e)&&(console.error(`could not find skill with name: ${e}`),dp.add(e)),JA.get(e)}function cH(e){return e in Pe?e:kh.findResourceKey(e)}function Wi(e,t){return ds.get(e).get(t)}function RC(e){return wh.get(e)??Af}function uH(e,t){return ds.get(e).has(t)}function Rf(e,t,n){ds.get(e).set(t,n),oT.get(e).set(Ia[t].discordEmote??Ia[t].name.replaceAll(" ",""),t),JA.set(Ia[t].name.toLowerCase(),t);const o=Ia[t].label;o?.zh!==void 0&&mC.set(o.zh,t),o?.ja!==void 0&&AC.set(o.ja,t),wh.set(t,n.assetPath),Ia[t].id!==void 0&&Li.set(Ia[t].id,t)}function fn(e,t){return e===void 0?n=>t||0:typeof e=="number"?n=>e:e}function dH(e){return console.assert(e.length>0,`invalid trait potency array: ${e}`),t=>{let n;const o=t.config.level;for(const[s,c]of e)t.hasTraitUnlocked(s)&&(n=c);return console.assert(n!==void 0,`no applicable potency at level ${o} found in array ${e}`),n||0}}function na(e,t){return(Array.isArray(t)?dH(t):fn(t,0))(e)}function sT(e,t){const n=Ia[t].name;return`${e}/${n.replace(":","")}.png`}function Xn(e,t,n,o){Array.isArray(e)||(e=[e]);const s=Le((h,m)=>m.applicationTime=h.time,o.onApplication),c=Le(h=>h.maybeCancelChanneledSkills(t),o.onExecute),d=h=>{const m=[];return o.potency&&(o.combo||o.positional)&&m.push(...h.computeComboAndPositionalModifiers(na(h,o.potency),o.combo,o.positional)),o.jobPotencyModifiers&&m.push(...o.jobPotencyModifiers(h)),m},f={kind:"spell",name:t,assetPath:o.assetPath??(e.length===1?sT(e[0],t):Af),unlockLevel:n,autoUpgrade:o.autoUpgrade,autoDowngrade:o.autoDowngrade,cdName:"cd_GCD",secondaryCd:o.secondaryCooldown,aspect:o.aspect??Ie.Other,replaceIf:o.replaceIf??[],startOnHotbar:o.startOnHotbar??!0,highlightIf:o.highlightIf??(h=>!1),castTimeFn:fn(o.castTime,0),recastTimeFn:fn(o.recastTime,2.5),animationLockFn:h=>fn(o.animationLock,h.config.animationLock)(h),manaCostFn:fn(o.manaCost,0),potencyFn:h=>na(h,o.potency),jobPotencyModifiers:d,jobTargetPotencyModifiers:o.jobTargetPotencyModifiers??(h=>new Map),drawsAggro:o.drawsAggro??!1,savesTargets:o.savesTargets??!1,falloff:o.falloff,healingPotencyFn:h=>na(h,o.healingPotency),jobHealingPotencyModifiers:o.jobHealingPotencyModifiers??(h=>[]),aoeHeal:o.aoeHeal??!1,validateAttempt:o.validateAttempt??(h=>!0),isInstantFn:o.isInstantFn??(h=>!1),onExecute:c,onConfirm:o.onConfirm??mu,onApplication:s,applicationDelay:o.applicationDelay??0,startsAuto:o.startsAuto??!1};if(e.forEach(h=>Rf(h,f.name,f)),o.secondaryCooldown!==void 0){const{cdName:h,cooldown:m,maxCharges:R}=o.secondaryCooldown;e.forEach(T=>Eu(T,h,m,R))}return f}function ia(e,t,n,o){Array.isArray(e)||(e=[e]);const s=Le((h,m)=>m.applicationTime=h.time,o.onApplication),c=Le(h=>h.maybeCancelChanneledSkills(t),o.onExecute),d=h=>{const m=[];return o.potency&&(o.combo||o.positional)&&m.push(...h.computeComboAndPositionalModifiers(na(h,o.potency),o.combo,o.positional)),o.jobPotencyModifiers&&m.push(...o.jobPotencyModifiers(h)),m},f={kind:"weaponskill",name:t,assetPath:o.assetPath??(e.length===1?sT(e[0],t):Af),unlockLevel:n,autoUpgrade:o.autoUpgrade,autoDowngrade:o.autoDowngrade,cdName:"cd_GCD",secondaryCd:o.secondaryCooldown,aspect:o.aspect??Ie.Other,replaceIf:o.replaceIf??[],startOnHotbar:o.startOnHotbar??!0,highlightIf:o.highlightIf??(h=>!1),castTimeFn:fn(o.castTime,0),recastTimeFn:fn(o.recastTime,2.5),animationLockFn:h=>fn(o.animationLock,h.config.animationLock)(h),manaCostFn:fn(o.manaCost,0),potencyFn:h=>na(h,o.potency),jobPotencyModifiers:d,jobTargetPotencyModifiers:o.jobTargetPotencyModifiers??(h=>new Map),drawsAggro:o.drawsAggro??!1,savesTargets:o.savesTargets??!1,falloff:o.falloff,healingPotencyFn:h=>na(h,o.healingPotency),jobHealingPotencyModifiers:o.jobHealingPotencyModifiers??(h=>[]),aoeHeal:o.aoeHeal??!1,validateAttempt:o.validateAttempt??(h=>!0),isInstantFn:o.isInstantFn??(h=>!0),onExecute:c,onConfirm:o.onConfirm??mu,onApplication:s,applicationDelay:o.applicationDelay??0,startsAuto:o.startsAuto??!0};if(e.forEach(h=>Rf(h,f.name,f)),o.secondaryCooldown!==void 0){const{cdName:h,cooldown:m,maxCharges:R}=o.secondaryCooldown;e.forEach(T=>Eu(T,h,m,R))}return f}function et(e,t,n,o,s){Array.isArray(e)||(e=[e]);const c=Le((m,R)=>R.applicationTime=m.time,s.onApplication),d=Le(m=>m.maybeCancelChanneledSkills(t),s.onExecute),f=bu(m=>s.requiresCombat?m.isInCombat():!0,s.validateAttempt??(m=>!0)),h={kind:"ability",name:t,assetPath:s.assetPath??(e.length===1?sT(e[0],t):Af),requiresCombat:s.requiresCombat,unlockLevel:n,autoUpgrade:s.autoUpgrade,autoDowngrade:s.autoDowngrade,cdName:o,secondaryCd:s.secondaryCooldown,aspect:s.aspect??Ie.Other,replaceIf:s.replaceIf??[],startOnHotbar:s.startOnHotbar??!0,highlightIf:s.highlightIf??(m=>!1),animationLockFn:m=>fn(s.animationLock,m.config.animationLock)(m),manaCostFn:fn(s.manaCost,0),potencyFn:m=>na(m,s.potency),jobPotencyModifiers:s.jobPotencyModifiers??(m=>[]),jobTargetPotencyModifiers:s.jobTargetPotencyModifiers??(m=>new Map),drawsAggro:s.drawsAggro??!1,savesTargets:s.savesTargets??!1,falloff:s.falloff,healingPotencyFn:m=>na(m,s.healingPotency),jobHealingPotencyModifiers:s.jobHealingPotencyModifiers??(m=>[]),aoeHeal:s.aoeHeal??!1,applicationDelay:s.applicationDelay??0,validateAttempt:f,onExecute:d,onConfirm:s.onConfirm??mu,onApplication:c,startsAuto:s.startsAuto??!1};if(e.forEach(m=>Rf(m,h.name,h)),s.cooldown!==void 0&&e.forEach(m=>Eu(m,o,s.cooldown,s.maxCharges??1)),s.secondaryCooldown!==void 0){const{cdName:m,cooldown:R,maxCharges:T}=s.secondaryCooldown;e.forEach(S=>Eu(S,m,R,T))}return h}function Ye(e,t,n,o,s){const c=Le((d,f)=>{const h=d.resources.get(s.rscType),m=s.duration??Ut(d.job,s.rscType).maxTimeout,R=typeof m=="number"?T=>m:m;h.gain(h.maxValue),d.enqueueResourceDrop(s.rscType,R(d))},s?.onApplication);return et(e,t,n,o,{...s,onApplication:c})}function Rn(e,t,n,o){Array.isArray(e)||(e=[e]);const s="Limit Break "+o.tier,c=Le(f=>f.maybeCancelChanneledSkills(t),o.onExecute),d={kind:"limitbreak",name:t,animationLockFn:f=>o.animationLock,assetPath:`General/${s}.png`,unlockLevel:1,autoUpgrade:void 0,autoDowngrade:void 0,cdName:n,secondaryCd:void 0,aspect:Ie.Other,replaceIf:[],startOnHotbar:!0,castTimeFn:fn(o.castTime,0),highlightIf:f=>!1,manaCostFn:f=>0,potencyFn:fn(o.potency,0),jobPotencyModifiers:f=>[],jobTargetPotencyModifiers:f=>new Map,healingPotencyFn:fn(o.healingPotency,0),jobHealingPotencyModifiers:f=>[],aoeHeal:!1,drawsAggro:!1,savesTargets:!1,applicationDelay:o.applicationDelay??0,validateAttempt:o.validateAttempt??(f=>!0),onExecute:c,onConfirm:o.onConfirm??mu,onApplication:o.onApplication??mu,startsAuto:!1};return e.forEach(f=>Rf(f,d.name,d)),e.forEach(f=>Eu(f,n,(o.castTime??0)+o.animationLock,1)),d}class hH{job;constructor(t){this.job=t.job}get(t){const n=ds.get(this.job).get(t);return n||(console.error(`creating placeholder skill ${t} for ${this.job}`),et([this.job],t,1,"NEVER",{validateAttempt:o=>!1}))}}function Pr(e,t,n){let o=Wi(e,t);for(;o.autoUpgrade&&ZN(o.autoUpgrade.trait,n);)o=Wi(e,Pr(e,o.autoUpgrade.otherSkill,n));for(;o.autoDowngrade&&n<o.unlockLevel;)o=Wi(e,Pr(e,o.autoDowngrade.otherSkill,n));return o.name}function TC(e,t){const n=Wi(t.job,e);for(const o of n.replaceIf){if(o.newSkill===e)continue;const s=Wi(t.job,o.newSkill);if(!s)throw new Error("couldn't find skill info for "+o.newSkill);if(t.config.level>=s.unlockLevel&&o.condition(t))return Pr(t.job,o.newSkill,t.config.level)}return Pr(t.job,n.name,t.config.level)}class fH{#e;constructor(t,n){this.#e=[],console.assert(ds.has(t),`No skill map found for job: ${t}`);for(const s of ds.get(t).values())s.name!=="NEVER"&&s.cdName!=="NEVER"&&n>=s.unlockLevel&&s.autoDowngrade===void 0&&s.startOnHotbar&&this.#e.push(Pr(t,s.name,n));let o=wh.get("TINCTURE");switch(dt[t].role){case"TANK":case"MELEE":t==="NIN"||t==="VPR"?o="Role/Dexterity Tincture.png":o="Role/Strength Tincture.png";break;case"HEALER":o="Role/Mind Tincture.png";break;case"LIMITED":case"CASTER":o="Role/Intelligence Tincture.png";break;case"RANGED":o="Role/Dexterity Tincture.png";break}wh.set("TINCTURE",o)}getCurrentSkillNames(t){return this.#e.map(n=>TC(n,t))}}var ke=(e=>(e.Skill="Skill",e.Wait="Wait",e.JumpToTimestamp="JumpToTimestamp",e.WaitForMP="WaitForMP",e.SetResourceEnabled="SetResourceEnabled",e.Unknown="Unknown",e.Invalid="Invalid",e))(ke||{});function Al(e,t){return new Vn({type:"Skill",skillName:e,targetList:t??[1],healTargetCount:void 0})}function EH(e,t){return new Vn({type:"Unknown",skillName:e,targetList:t??[1],healTargetCount:void 0})}function vr(e){return new Vn({type:"Wait",waitDuration:e})}function fl(e){return new Vn({type:"JumpToTimestamp",targetTime:e})}function SC(){return new Vn({type:"WaitForMP"})}function eR(e,t){return new Vn({type:"SetResourceEnabled",buffName:e,targetNumber:t})}class Vn{#e;#t;#a;#n;#i;applicationTime;#c;#s;#r;#u;info;legacyWaitDuration;tmp_startLockTime;tmp_endLockTime;tmp_invalid_reasons;constructor(t,n){this.info=t,this.#e=new Set,this.#a=new Map,this.#i=new Map,this.#c=new Map,this.#s=new Map,this.#r=new Map,this.#u=new Map,this.legacyWaitDuration=n,this.tmp_invalid_reasons=[]}serialized(){return this.info.type==="Skill"?{type:"Skill",skillName:Ia[this.info.skillName].name,targetList:this.info.targetList,healTargetCount:this.info.healTargetCount}:this.info.type==="SetResourceEnabled"?{type:"SetResourceEnabled",buffName:this.info.buffName.toString(),targetNumber:this.info.targetNumber}:this.info.type==="Unknown"?{type:"Skill",skillName:this.info.skillName,targetList:this.info.targetList,healTargetCount:this.info.healTargetCount}:this.info}toLocalizedString(){if(this.info.type==="Skill")return Wn(this.info.skillName);if(this.info.type==="SetResourceEnabled")return N({en:"toggle ",zh:""}).toString()+Ke(this.info.buffName);if(this.info.type==="Wait"){const t=this.info.waitDuration.toFixed(3);return N({en:`wait ${t}`,zh:`${t}`}).toString()}else{if(this.info.type==="WaitForMP")return N({en:"wait MP",zh:""}).toString();if(this.info.type==="JumpToTimestamp"){const t=this.info.targetTime.toFixed(3);return N({en:`jump ${t}`,zh:`${t}`}).toString()}}return"(unknown)"}maybeGetActionKey(){return this.info.type==="Skill"?this.info.skillName:void 0}get targetList(){return this.info.type==="Skill"?this.info.targetList.slice():[]}set targetList(t){this.info.type==="Skill"&&(this.info.targetList=t)}get healTargetCount(){return this.info.type==="Skill"?this.info.healTargetCount??0:0}getNameForMessage(){return this.info.type==="Skill"?Ia[this.info.skillName].name:this.info.type.toString()}getClone(){return new Vn(this.info,this.legacyWaitDuration)}addBuff(t){this.#e.add(t)}hasBuff(t){return this.#e.has(t)}hasPartyBuff(){const t=this.#t?.snapshotTime;return t!==void 0&&I.game.getPartyBuffs(t).size>0}getPartyBuffs(){const t=this.#t?.snapshotTime;return t?[...I.game.getPartyBuffs(t).keys()]:[]}forceOneTarget(){this.info.type==="Skill"&&(this.info.targetList=[this.info.targetList.length>0?this.info.targetList[0]:1])}setHealTargetCount(t){this.info.type==="Skill"&&(this.info.healTargetCount=t)}resolveAll(t){this.#t&&this.#t.resolve(t),this.#a.forEach(n=>{n.forEach(o=>{o.resolve(t)})})}resolved(){return this.applicationTime!==void 0}hitBoss(t){return this.#t?.hasHitBoss(t)??!0}getPotency(t){const n={applied:0,snapshottedButPending:0};return this.#t&&this.recordPotency(t,this.#t,n),t.excludeDoT||this.#a.forEach(o=>{o.forEach(s=>{this.recordPotency(t,s,n)})}),n}getHealingPotency(t){const n={applied:0,snapshottedButPending:0};return this.#n&&this.recordPotency(t,this.#n,n),t.excludeHoT||this.#i.forEach(o=>{o.forEach(s=>{this.recordPotency(t,s,n)})}),n}recordPotency(t,n,o){t.targetNumber!==void 0&&!n.hasTarget(t.targetNumber)||(n.hasHitBoss(t.untargetable)?o.applied+=n.getAmount(t):!n.hasResolved()&&n.hasSnapshotted()&&(o.snapshottedButPending+=n.getAmount(t)))}removeUnresolvedOvertimePotencies(t,n){(t==="damage"?this.#a:this.#i).forEach(s=>{for(let c=0;c<s.length;c++){const d=s[c];if(!d.hasResolved()&&(n!==void 0&&d.tryRemoveTarget(n),n===void 0||d.targetList.length===0)){s.splice(c);break}}})}anyPotencies(){return this.#t!==void 0||this.#a.size>0}anyHealingPotencies(){return this.#n!==void 0||this.#i.size>0}getInitialPotency(){return this.#t}getInitialHealingPotency(){return this.#n}getAllDotPotencies(){return this.getAllOverTimePotencies("damage")}getAllHotPotencies(){return this.getAllOverTimePotencies("healing")}getAllOverTimePotencies(t){return t==="damage"?this.#a:this.#i}getDotPotencies(t){return this.getOverTimePotencies(t,"damage")}getHotPotencies(t){return this.getOverTimePotencies(t,"healing")}getOverTimePotencies(t,n){return n==="damage"?this.#a.get(t)??[]:this.#i.get(t)??[]}addPotency(t){console.assert(!this.#t,`ActionNode for ${this.getNameForMessage()} already had an initial potency`),this.#t=t}addHealingPotency(t){console.assert(!this.#n,`ActionNode for ${this.getNameForMessage()} already had an initial healing potency`),this.#n=t}addDoTPotency(t,n){this.addOverTimePotency(t,n,"damage")}addHoTPotency(t,n){this.addOverTimePotency(t,n,"healing")}addOverTimePotency(t,n,o){const s=o==="damage"?this.#a:this.#i,c=s.get(n)??[];c.length===0&&s.set(n,c),c.push(t)}setOverTimeGap(t,n,o,s){this.setOverTimeMappedAmount(t,n,o,o==="damage"?this.#s:this.#u,s)}getOverTimeGap(t,n,o){return this.getOverTimeMappedAmount(t,n,n==="damage"?this.#s:this.#u,o)}setOverTimeOverrideAmount(t,n,o,s){this.setOverTimeMappedAmount(t,n,o,o==="damage"?this.#c:this.#r,s)}getOverTimeOverrideAmount(t,n,o){return this.getOverTimeMappedAmount(t,n,n==="damage"?this.#c:this.#r,o)}setOverTimeMappedAmount(t,n,o,s,c){s.has(t)||s.set(t,new Map),c!==void 0?s.get(t).set(c,n):this.getOverTimePotencies(t,o)[0].targetList?.forEach(f=>s.get(t).set(f,n))}getOverTimeMappedAmount(t,n,o,s){if(o.has(t)||o.set(t,new Map),s!==void 0)return o.get(t).get(s)??0;{const c=this.getOverTimePotencies(t,n)[0].targetList[0]??1;return o.get(t).get(c)??0}}}class Gr{actions;name="(anonymous line)";constructor(){this.actions=[]}get length(){return this.actions.length}get head(){return this.length>0?this.actions[0]:void 0}get tail(){return this.length>0?this.actions[this.actions.length-1]:void 0}get tailIndex(){return this.length-1}prependActionNode(t){console.assert(t!==void 0),this.actions.unshift(t)}insertActionNodes(t,n){t.length>0&&this.actions.splice(n,0,...t)}addActionNode(t){console.assert(t!==void 0),this.actions.push(t)}iterateAll(t){this.actions.forEach(n=>t(n))}serialized(){return{name:this.name,actions:this.actions.map(t=>t.serialized())}}exportCsv(){return[]}static deserialize(t){const n=t.map(s=>{if(s.type==="Skill"){const c=lT(s.skillName),d="waitDuration"in s?s.waitDuration:void 0,f=s.targetCount!==void 0?Array(s.targetCount).fill(0).map((h,m)=>m+1):s.targetList??[1];return new Vn(c!==void 0?{type:"Skill",skillName:c,targetList:f,healTargetCount:s.healTargetCount}:{type:"Unknown",skillName:s.skillName,targetList:f,healTargetCount:s.healTargetCount},d)}else if(s.type==="SetResourceEnabled"){const c="waitDuration"in s?s.waitDuration:void 0;return new Vn({type:"SetResourceEnabled",buffName:cH(s.buffName),targetNumber:s.targetNumber??1},c)}else return s.type==="Wait"||s.type==="JumpToTimestamp"||s.type==="WaitForMP"?new Vn(s):(window.alert("unparseable action: "+JSON.stringify(s)),new Vn({type:"Invalid"}))}),o=new Gr;return o.actions=n,o}}class bo extends Gr{selectionStartIndex;selectionEndIndex;startIsPivot=!0;config;get selectionStart(){return this.selectionStartIndex!==void 0?this.actions[this.selectionStartIndex]:void 0}get selectionEnd(){return this.selectionEndIndex!==void 0?this.actions[this.selectionEndIndex]:void 0}getFirstSelection(){return this.selectionStart&&console.assert(this.selectionEnd!==void 0),this.selectionStart}getLastSelection(){return this.selectionEnd&&console.assert(this.selectionStart!==void 0),this.selectionEnd}isInSelection(t){return this.selectionStartIndex!==void 0&&this.selectionEndIndex!==void 0&&t>=this.selectionStartIndex&&t<=this.selectionEndIndex}iterateSelected(t){if(!(this.selectionStartIndex===void 0||this.selectionEndIndex===void 0))for(let n=this.selectionStartIndex;n<=this.selectionEndIndex;n++)t(this.actions[n])}getSelected(){const t=new Gr;return this.selectionStartIndex!==void 0&&this.selectionEndIndex!==void 0&&(t.actions=this.actions.slice(this.selectionStartIndex,this.selectionEndIndex+1)),t}getSelectionLength(){return this.selectionStartIndex===void 0||this.selectionEndIndex===void 0?0:this.selectionEndIndex-this.selectionStartIndex+1}selectSingle(t){this.unselectAll(),this.selectionStartIndex=t,this.selectionEndIndex=t,this.startIsPivot=!0}unselectAll(){this.selectionStartIndex=void 0,this.selectionEndIndex=void 0,this.startIsPivot=!0}#e(t,n){this.unselectAll(),this.selectionStartIndex=t,this.selectionEndIndex=n}selectUntil(t){if(this.selectionStartIndex!==void 0&&this.selectionStartIndex===this.selectionEndIndex)this.selectionStartIndex<=t?(this.#e(this.selectionStartIndex,t),this.startIsPivot=!0):(this.#e(t,this.selectionStartIndex),this.startIsPivot=!1);else if(this.selectionStartIndex!==void 0&&this.selectionStartIndex!==this.selectionEndIndex){const n=this.startIsPivot?this.selectionStartIndex:this.selectionEndIndex;this.selectionStartIndex=n,this.selectionEndIndex=n,this.selectUntil(t)}}onClickNode(t,n){n&&this.selectionStartIndex!==void 0?this.selectUntil(t):this.selectionStartIndex===t&&this.selectionEndIndex===t?this.unselectAll():this.selectSingle(t)}moveSelected(t){if(t===0||this.selectionStartIndex===void 0||this.selectionEndIndex===void 0)return;const n=this.selectionStartIndex,o=this.getSelectionLength(),s=this.actions.splice(n,o);let c=n+t;return c=Math.max(c,0),c=Math.min(c,this.length),this.actions.splice(c,0,...s),this.selectionStartIndex=c,this.selectionEndIndex=c+o-1,c}deleteSelected(){if(this.selectionStartIndex===void 0||this.selectionEndIndex===void 0)return;const t=this.selectionStartIndex;return this.actions.splice(t,this.getSelectionLength()),this.unselectAll(),t}replaceNode(t,n){n>=0&&n<this.actions.length?this.actions[n]=t:console.error("invalid index for replaceNode",n)}serialized(){console.assert(this.config);const t=super.serialized();return{name:t.name,fileType:di.Record,config:this.config?.serialized(),actions:t.actions}}spliceUpTo(t){const n=this.selectionStartIndex,o=this.selectionEndIndex;this.unselectAll(),t<this.length&&this.actions.splice(t,this.length-t),n!==void 0&&(this.selectSingle(n),this.selectUntil(o))}getCloneWithSharedConfig(){const t=new bo;return t.config=this.config,t.actions=this.actions.map(n=>n.getClone()),t.selectionStartIndex=this.selectionStartIndex,t.selectionEndIndex=this.selectionEndIndex,t}}function mH(e){return l.jsxs("div",{style:{marginBottom:5,cursor:"pointer"},onClick:()=>{e.state===0&&e.onChange(e.state,2),e.state===1&&(console.error("Target select radio must be in PRIMARY or NONE state, but was in TARGETED. Defaulting to PRIMARY."),e.onChange(e.state,2))},children:[l.jsx("input",{className:"shellCheckbox"+(e.state===2?" checkbox-star":""),style:{cursor:"pointer"},type:"radio",role:"radio","aria-checked":e.state===2,checked:!1,onChange:()=>{}}),l.jsx("span",{children:e.i===0?N({en:"Boss 1",zh:"Boss 1"}):e.i+1})]})}function AH(e){return l.jsxs("div",{style:{marginBottom:5,cursor:"pointer"},onClick:()=>{e.state===0&&e.onChange(e.state,2),e.state===2&&e.onChange(e.state,1),e.state===1&&e.onChange(e.state,0)},children:[l.jsx("input",{className:"shellCheckbox"+(e.state===2?" checkbox-star":""),style:{cursor:"pointer"},type:"checkbox",onChange:()=>{},checked:e.state===1}),l.jsx("span",{children:e.i===0?N({en:"Boss 1",zh:"Boss 1"}):e.i+1})]})}function gC(e){const t=e.primaryOnly?mH:AH,n=e.selected.map((o,s)=>l.jsx(t,{i:s,state:e.primary===s?2:o?1:0,onChange:(c,d)=>{let f=e.selected.slice(),h=e.primary;if(d===0){if(f[s]=!1,f.filter(m=>m).length===0)return}else d===1?f[s]=!0:d===2&&c!==2&&(e.primaryOnly&&(f=Array(f.length).fill(!1)),f[s]=!0,e.onPrimaryChange?.(s),h=s);if(c===2&&d!==2){for(let m=0;m<f.length;m++)if(m!==s&&f[m]){e.onPrimaryChange?.(m),h=m;break}}e.onSelectedChange?.(f),e.onAnySelectionChange?.(h,f)}},s));return l.jsx("div",{style:{display:"grid",grid:"auto-flow / repeat(8, 1fr)",...e.style},children:n})}var Zr=YN();function IC({controlled:e,default:t,name:n,state:o="value"}){const{current:s}=C.useRef(e!==void 0),[c,d]=C.useState(t),f=s?e:c,h=C.useCallback(m=>{s||d(m)},[]);return[f,h]}const fp={};function Qr(e,t){const n=C.useRef(fp);return n.current===fp&&(n.current=e(t)),n}const pA=xR[`useInsertionEffect${Math.random().toFixed(1)}`.slice(0,-3)],RH=pA&&pA!==C.useLayoutEffect?pA:e=>e();function lt(e){const t=Qr(TH).current;return t.next=e,RH(t.effect),t.trampoline}function TH(){const e={next:void 0,callback:SH,trampoline:(...t)=>e.callback?.(...t),effect:()=>{e.callback=e.next}};return e}function SH(){}const _C=C.createContext(void 0);function Tf(){const e=C.useContext(_C);if(e===void 0)throw new Error("Base UI: TooltipRootContext is missing. Tooltip parts must be placed within <Tooltip.Root>.");return e}const gH=[];function pC(e){C.useEffect(e,gH)}const nu=0;class _l{static create(){return new _l}currentId=nu;start(t,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=nu,n()},t)}isStarted(){return this.currentId!==nu}clear=()=>{this.currentId!==nu&&(clearTimeout(this.currentId),this.currentId=nu)};disposeEffect=()=>this.clear}function Br(){const e=Qr(_l.create).current;return pC(e.disposeEffect),e}const IH=()=>{},wt=typeof document<"u"?C.useLayoutEffect:IH;function Sf(){return typeof window<"u"}function bl(e){return rT(e)?(e.nodeName||"").toLowerCase():"#document"}function Ba(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function to(e){var t;return(t=(rT(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function rT(e){return Sf()?e instanceof Node||e instanceof Ba(e).Node:!1}function kt(e){return Sf()?e instanceof Element||e instanceof Ba(e).Element:!1}function Ga(e){return Sf()?e instanceof HTMLElement||e instanceof Ba(e).HTMLElement:!1}function tR(e){return!Sf()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Ba(e).ShadowRoot}const _H=new Set(["inline","contents"]);function Ou(e){const{overflow:t,overflowX:n,overflowY:o,display:s}=Ei(e);return/auto|scroll|overlay|hidden|clip/.test(t+o+n)&&!_H.has(s)}const pH=new Set(["table","td","th"]);function NH(e){return pH.has(bl(e))}const CH=[":popover-open",":modal"];function gf(e){return CH.some(t=>{try{return e.matches(t)}catch{return!1}})}const bH=["transform","translate","scale","rotate","perspective"],OH=["transform","translate","scale","rotate","perspective","filter"],DH=["paint","layout","strict","content"];function cT(e){const t=If(),n=kt(e)?Ei(e):e;return bH.some(o=>n[o]?n[o]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||OH.some(o=>(n.willChange||"").includes(o))||DH.some(o=>(n.contain||"").includes(o))}function yH(e){let t=xo(e);for(;Ga(t)&&!vo(t);){if(cT(t))return t;if(gf(t))return null;t=xo(t)}return null}function If(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const vH=new Set(["html","body","#document"]);function vo(e){return vH.has(bl(e))}function Ei(e){return Ba(e).getComputedStyle(e)}function _f(e){return kt(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function xo(e){if(bl(e)==="html")return e;const t=e.assignedSlot||e.parentNode||tR(e)&&e.host||to(e);return tR(t)?t.host:t}function NC(e){const t=xo(e);return vo(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ga(t)&&Ou(t)?t:NC(t)}function Rl(e,t,n){var o;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=NC(e),c=s===((o=e.ownerDocument)==null?void 0:o.body),d=Ba(s);if(c){const f=aR(d);return t.concat(d,d.visualViewport||[],Ou(s)?s:[],f&&n?Rl(f):[])}return t.concat(s,Rl(s,[],n))}function aR(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Di(e){const t=Qr(MH,e).current;return t.next=e,wt(t.effect),t}function MH(e){const t={current:e,next:e,effect:()=>{t.current=t.next}};return t}const $r=typeof navigator<"u",NA=HH(),CC=UH(),bC=kH(),OC=typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter:none"),LH=NA.platform==="MacIntel"&&NA.maxTouchPoints>1?!0:/iP(hone|ad|od)|iOS/.test(NA.platform),DC=$r&&/apple/i.test(navigator.vendor),nR=$r&&/android/i.test(CC)||/android/i.test(bC),xH=$r&&CC.toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints,yC=bC.includes("jsdom/");function HH(){if(!$r)return{platform:"",maxTouchPoints:-1};const e=navigator.userAgentData;return e?.platform?{platform:e.platform,maxTouchPoints:navigator.maxTouchPoints}:{platform:navigator.platform??"",maxTouchPoints:navigator.maxTouchPoints??-1}}function kH(){if(!$r)return"";const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(({brand:t,version:n})=>`${t}/${n}`).join(" "):navigator.userAgent}function UH(){if(!$r)return"";const e=navigator.userAgentData;return e?.platform?e.platform:navigator.platform??""}const iR="data-base-ui-focusable",vC="active",MC="selected",wH="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function ul(e){let t=e.activeElement;for(;t?.shadowRoot?.activeElement!=null;)t=t.shadowRoot.activeElement;return t}function Aa(e,t){if(!e||!t)return!1;const n=t.getRootNode?.();if(e.contains(t))return!0;if(n&&tR(n)){let o=t;for(;o;){if(e===o)return!0;o=o.parentNode||o.host}}return!1}function Yn(e){return"composedPath"in e?e.composedPath()[0]:e.target}function Co(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function PH(e){return e.matches("html,body")}function Pa(e){return e?.ownerDocument||document}function LC(e){return Ga(e)&&e.matches(wH)}function Ep(e){return e?e.getAttribute("role")==="combobox"&&LC(e):!1}function GH(e){if(!e||yC)return!0;try{return e.matches(":focus-visible")}catch{return!0}}function oR(e){return e?e.hasAttribute(iR)?e:e.querySelector(`[${iR}]`)||e:null}function os(e,t,n=!0){return e.filter(s=>s.parentId===t&&(!n||s.context?.open)).flatMap(s=>[s,...os(e,s.id,n)])}function mp(e,t){let n=[],o=e.find(s=>s.id===t)?.parentId;for(;o;){const s=e.find(c=>c.id===o);o=s?.parentId,s&&(n=n.concat(s))}return n}function BH(e){e.preventDefault(),e.stopPropagation()}function FH(e){return"nativeEvent"in e}function jH(e){return e.mozInputSource===0&&e.isTrusted?!0:nR&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function zH(e){return yC?!1:!nR&&e.width===0&&e.height===0||nR&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function Fr(e,t){const n=["mouse","pen"];return t||n.push("",void 0),n.includes(e)}const YH=["top","right","bottom","left"],jr=Math.min,Kn=Math.max,Ph=Math.round,eh=Math.floor,Xi=e=>({x:e,y:e}),KH={left:"right",right:"left",bottom:"top",top:"bottom"},VH={start:"end",end:"start"};function lR(e,t,n){return Kn(e,jr(t,n))}function Ho(e,t){return typeof e=="function"?e(t):e}function mi(e){return e.split("-")[0]}function Ol(e){return e.split("-")[1]}function uT(e){return e==="x"?"y":"x"}function dT(e){return e==="y"?"height":"width"}const WH=new Set(["top","bottom"]);function yi(e){return WH.has(mi(e))?"y":"x"}function hT(e){return uT(yi(e))}function XH(e,t,n){n===void 0&&(n=!1);const o=Ol(e),s=hT(e),c=dT(s);let d=s==="x"?o===(n?"end":"start")?"right":"left":o==="start"?"bottom":"top";return t.reference[c]>t.floating[c]&&(d=Gh(d)),[d,Gh(d)]}function qH(e){const t=Gh(e);return[sR(e),t,sR(t)]}function sR(e){return e.replace(/start|end/g,t=>VH[t])}const Ap=["left","right"],Rp=["right","left"],ZH=["top","bottom"],QH=["bottom","top"];function $H(e,t,n){switch(e){case"top":case"bottom":return n?t?Rp:Ap:t?Ap:Rp;case"left":case"right":return t?ZH:QH;default:return[]}}function JH(e,t,n,o){const s=Ol(e);let c=$H(mi(e),n==="start",o);return s&&(c=c.map(d=>d+"-"+s),t&&(c=c.concat(c.map(sR)))),c}function Gh(e){return e.replace(/left|right|bottom|top/g,t=>KH[t])}function ek(e){return{top:0,right:0,bottom:0,left:0,...e}}function xC(e){return typeof e!="number"?ek(e):{top:e,right:e,bottom:e,left:e}}function Bh(e){const{x:t,y:n,width:o,height:s}=e;return{width:o,height:s,top:n,left:t,right:t+o,bottom:n+s,x:t,y:n}}var tk=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Fh=tk.join(","),HC=typeof Element>"u",zr=HC?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,jh=!HC&&Element.prototype.getRootNode?function(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}:function(e){return e?.ownerDocument},zh=function e(t,n){var o;n===void 0&&(n=!0);var s=t==null||(o=t.getAttribute)===null||o===void 0?void 0:o.call(t,"inert"),c=s===""||s==="true",d=c||n&&t&&e(t.parentNode);return d},ak=function(t){var n,o=t==null||(n=t.getAttribute)===null||n===void 0?void 0:n.call(t,"contenteditable");return o===""||o==="true"},kC=function(t,n,o){if(zh(t))return[];var s=Array.prototype.slice.apply(t.querySelectorAll(Fh));return n&&zr.call(t,Fh)&&s.unshift(t),s=s.filter(o),s},UC=function e(t,n,o){for(var s=[],c=Array.from(t);c.length;){var d=c.shift();if(!zh(d,!1))if(d.tagName==="SLOT"){var f=d.assignedElements(),h=f.length?f:d.children,m=e(h,!0,o);o.flatten?s.push.apply(s,m):s.push({scopeParent:d,candidates:m})}else{var R=zr.call(d,Fh);R&&o.filter(d)&&(n||!t.includes(d))&&s.push(d);var T=d.shadowRoot||typeof o.getShadowRoot=="function"&&o.getShadowRoot(d),S=!zh(T,!1)&&(!o.shadowRootFilter||o.shadowRootFilter(d));if(T&&S){var g=e(T===!0?d.children:T.children,!0,o);o.flatten?s.push.apply(s,g):s.push({scopeParent:d,candidates:g})}else c.unshift.apply(c,d.children)}}return s},wC=function(t){return!isNaN(parseInt(t.getAttribute("tabindex"),10))},PC=function(t){if(!t)throw new Error("No node provided");return t.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||ak(t))&&!wC(t)?0:t.tabIndex},nk=function(t,n){var o=PC(t);return o<0&&n&&!wC(t)?0:o},ik=function(t,n){return t.tabIndex===n.tabIndex?t.documentOrder-n.documentOrder:t.tabIndex-n.tabIndex},GC=function(t){return t.tagName==="INPUT"},ok=function(t){return GC(t)&&t.type==="hidden"},lk=function(t){var n=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(o){return o.tagName==="SUMMARY"});return n},sk=function(t,n){for(var o=0;o<t.length;o++)if(t[o].checked&&t[o].form===n)return t[o]},rk=function(t){if(!t.name)return!0;var n=t.form||jh(t),o=function(f){return n.querySelectorAll('input[type="radio"][name="'+f+'"]')},s;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")s=o(window.CSS.escape(t.name));else try{s=o(t.name)}catch(d){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",d.message),!1}var c=sk(s,t.form);return!c||c===t},ck=function(t){return GC(t)&&t.type==="radio"},uk=function(t){return ck(t)&&!rk(t)},dk=function(t){var n,o=t&&jh(t),s=(n=o)===null||n===void 0?void 0:n.host,c=!1;if(o&&o!==t){var d,f,h;for(c=!!((d=s)!==null&&d!==void 0&&(f=d.ownerDocument)!==null&&f!==void 0&&f.contains(s)||t!=null&&(h=t.ownerDocument)!==null&&h!==void 0&&h.contains(t));!c&&s;){var m,R,T;o=jh(s),s=(m=o)===null||m===void 0?void 0:m.host,c=!!((R=s)!==null&&R!==void 0&&(T=R.ownerDocument)!==null&&T!==void 0&&T.contains(s))}}return c},Tp=function(t){var n=t.getBoundingClientRect(),o=n.width,s=n.height;return o===0&&s===0},hk=function(t,n){var o=n.displayCheck,s=n.getShadowRoot;if(getComputedStyle(t).visibility==="hidden")return!0;var c=zr.call(t,"details>summary:first-of-type"),d=c?t.parentElement:t;if(zr.call(d,"details:not([open]) *"))return!0;if(!o||o==="full"||o==="legacy-full"){if(typeof s=="function"){for(var f=t;t;){var h=t.parentElement,m=jh(t);if(h&&!h.shadowRoot&&s(h)===!0)return Tp(t);t.assignedSlot?t=t.assignedSlot:!h&&m!==t.ownerDocument?t=m.host:t=h}t=f}if(dk(t))return!t.getClientRects().length;if(o!=="legacy-full")return!0}else if(o==="non-zero-area")return Tp(t);return!1},fk=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var n=t.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var o=0;o<n.children.length;o++){var s=n.children.item(o);if(s.tagName==="LEGEND")return zr.call(n,"fieldset[disabled] *")?!0:!s.contains(t)}return!0}n=n.parentElement}return!1},rR=function(t,n){return!(n.disabled||zh(n)||ok(n)||hk(n,t)||lk(n)||fk(n))},cR=function(t,n){return!(uk(n)||PC(n)<0||!rR(t,n))},Ek=function(t){var n=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},mk=function e(t){var n=[],o=[];return t.forEach(function(s,c){var d=!!s.scopeParent,f=d?s.scopeParent:s,h=nk(f,d),m=d?e(s.candidates):f;h===0?d?n.push.apply(n,m):n.push(f):o.push({documentOrder:c,tabIndex:h,item:s,isScope:d,content:m})}),o.sort(ik).reduce(function(s,c){return c.isScope?s.push.apply(s,c.content):s.push(c.content),s},[]).concat(n)},pf=function(t,n){n=n||{};var o;return n.getShadowRoot?o=UC([t],n.includeContainer,{filter:cR.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:Ek}):o=kC(t,n.includeContainer,cR.bind(null,n)),mk(o)},Ak=function(t,n){n=n||{};var o;return n.getShadowRoot?o=UC([t],n.includeContainer,{filter:rR.bind(null,n),flatten:!0,getShadowRoot:n.getShadowRoot}):o=kC(t,n.includeContainer,rR.bind(null,n)),o},BC=function(t,n){if(n=n||{},!t)throw new Error("No node provided");return zr.call(t,Fh)===!1?!1:cR(n,t)};const Du=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function FC(e,t){const n=pf(e,Du()),o=n.length;if(o===0)return;const s=ul(Pa(e)),c=n.indexOf(s),d=c===-1?t===1?0:o-1:c+t;return n[d]}function jC(e){return FC(Pa(e).body,1)||e}function zC(e){return FC(Pa(e).body,-1)||e}function hu(e,t){const n=t||e.currentTarget,o=e.relatedTarget;return!o||!Aa(n,o)}function Rk(e){pf(e,Du()).forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")})}function Sp(e){e.querySelectorAll("[data-tabindex]").forEach(n=>{const o=n.dataset.tabindex;delete n.dataset.tabindex,o?n.setAttribute("tabindex",o):n.removeAttribute("tabindex")})}const Tk={...xR};let gp=0;function Sk(e,t="mui"){const[n,o]=C.useState(e),s=e||n;return C.useEffect(()=>{n==null&&(gp+=1,o(`${t}-${gp}`))},[n,t]),s}const Ip=Tk.useId;function Nf(e,t){if(Ip!==void 0){const n=Ip();return e??(t?`${t}-${n}`:n)}return Sk(e,t)}function gk(){const e=new Map;return{emit(t,n){e.get(t)?.forEach(o=>o(n))},on(t,n){e.has(t)||e.set(t,new Set),e.get(t).add(n)},off(t,n){e.get(t)?.delete(n)}}}const Ik=C.createContext(null),_k=C.createContext(null),fT=()=>C.useContext(Ik)?.id||null,Cf=()=>C.useContext(_k);function Yr(e){return`data-base-ui-${e}`}const _p=Yr("safe-polygon");function hh(e,t,n){if(n&&!Fr(n))return 0;if(typeof e=="number")return e;if(typeof e=="function"){const o=e();return typeof o=="number"?o:o?.[t]}return e?.[t]}function CA(e){return typeof e=="function"?e():e}function pk(e,t={}){const{open:n,onOpenChange:o,dataRef:s,events:c,elements:d}=e,{enabled:f=!0,delay:h=0,handleClose:m=null,mouseOnly:R=!1,restMs:T=0,move:S=!0}=t,g=Cf(),p=fT(),_=Di(m),O=Di(h),D=Di(n),L=Di(T),w=C.useRef(void 0),y=Br(),x=C.useRef(void 0),G=Br(),B=C.useRef(!0),Y=C.useRef(!1),X=C.useRef(()=>{}),ie=C.useRef(!1),oe=lt(()=>{const K=s.current.openEvent?.type;return K?.includes("mouse")&&K!=="mousedown"});C.useEffect(()=>{if(!f)return;function K({open:ne}){ne||(y.clear(),G.clear(),B.current=!0,ie.current=!1)}return c.on("openchange",K),()=>{c.off("openchange",K)}},[f,c,y,G]),C.useEffect(()=>{if(!f||!_.current||!n)return;function K(fe){oe()&&o(!1,fe,"hover")}const ne=Pa(d.floating).documentElement;return ne.addEventListener("mouseleave",K),()=>{ne.removeEventListener("mouseleave",K)}},[d.floating,n,o,f,_,oe]);const j=C.useCallback((K,ne=!0,fe="hover")=>{const M=hh(O.current,"close",w.current);M&&!x.current?y.start(M,()=>o(!1,K,fe)):ne&&(y.clear(),o(!1,K,fe))},[O,o,y]),$=lt(()=>{X.current(),x.current=void 0}),Ee=lt(()=>{if(Y.current){const K=Pa(d.floating).body;K.style.pointerEvents="",K.removeAttribute(_p),Y.current=!1}}),V=lt(()=>s.current.openEvent?["click","mousedown"].includes(s.current.openEvent.type):!1);C.useEffect(()=>{if(!f)return;function K(ce){if(y.clear(),B.current=!1,R&&!Fr(w.current)||CA(L.current)>0&&!hh(O.current,"open"))return;const W=hh(O.current,"open",w.current);W?y.start(W,()=>{D.current||o(!0,ce,"hover")}):n||o(!0,ce,"hover")}function ne(ce){if(V()){Ee();return}X.current();const W=Pa(d.floating);if(G.clear(),ie.current=!1,_.current&&s.current.floatingContext){n||y.clear(),x.current=_.current({...s.current.floatingContext,tree:g,x:ce.clientX,y:ce.clientY,onClose(){Ee(),$(),V()||j(ce,!0,"safe-polygon")}});const Q=x.current;W.addEventListener("mousemove",Q),X.current=()=>{W.removeEventListener("mousemove",Q)};return}(w.current==="touch"?!Aa(d.floating,ce.relatedTarget):!0)&&j(ce)}function fe(ce){V()||s.current.floatingContext&&_.current?.({...s.current.floatingContext,tree:g,x:ce.clientX,y:ce.clientY,onClose(){Ee(),$(),V()||j(ce)}})(ce)}function M(){y.clear()}function ee(ce){V()||j(ce,!1)}if(kt(d.domReference)){const ce=d.domReference,W=d.floating;return n&&ce.addEventListener("mouseleave",fe),S&&ce.addEventListener("mousemove",K,{once:!0}),ce.addEventListener("mouseenter",K),ce.addEventListener("mouseleave",ne),W&&(W.addEventListener("mouseleave",fe),W.addEventListener("mouseenter",M),W.addEventListener("mouseleave",ee)),()=>{n&&ce.removeEventListener("mouseleave",fe),S&&ce.removeEventListener("mousemove",K),ce.removeEventListener("mouseenter",K),ce.removeEventListener("mouseleave",ne),W&&(W.removeEventListener("mouseleave",fe),W.removeEventListener("mouseenter",M),W.removeEventListener("mouseleave",ee))}}},[d,f,e,R,S,j,$,Ee,o,n,D,g,O,_,s,V,L,y,G]),wt(()=>{if(f&&n&&_.current?.__options?.blockPointerEvents&&oe()){Y.current=!0;const K=d.floating;if(kt(d.domReference)&&K){const ne=Pa(d.floating).body;ne.setAttribute(_p,"");const fe=d.domReference,M=g?.nodesRef.current.find(ee=>ee.id===p)?.context?.elements.floating;return M&&(M.style.pointerEvents=""),ne.style.pointerEvents="none",fe.style.pointerEvents="auto",K.style.pointerEvents="auto",()=>{ne.style.pointerEvents="",fe.style.pointerEvents="",K.style.pointerEvents=""}}}},[f,n,p,d,g,_,oe]),wt(()=>{n||(w.current=void 0,ie.current=!1,$(),Ee())},[n,$,Ee]),C.useEffect(()=>()=>{$(),y.clear(),G.clear(),Ee()},[f,d.domReference,$,Ee,y,G]);const P=C.useMemo(()=>{function K(ne){w.current=ne.pointerType}return{onPointerDown:K,onPointerEnter:K,onMouseMove(ne){const{nativeEvent:fe}=ne;function M(){!B.current&&!D.current&&o(!0,fe,"hover")}R&&!Fr(w.current)||n||CA(L.current)===0||ie.current&&ne.movementX**2+ne.movementY**2<2||(G.clear(),w.current==="touch"?M():(ie.current=!0,G.start(CA(L.current),M)))}}},[R,o,n,D,L,G]);return C.useMemo(()=>f?{reference:P}:{},[f,P])}const Nk=C.createContext({hasProvider:!1,timeoutMs:0,delayRef:{current:0},initialDelayRef:{current:0},timeout:new _l,currentIdRef:{current:null},currentContextRef:{current:null}});function Ck(e,t={}){const{open:n,onOpenChange:o,floatingId:s}=e,{enabled:c=!0}=t,d=C.useContext(Nk),{currentIdRef:f,delayRef:h,timeoutMs:m,initialDelayRef:R,currentContextRef:T,hasProvider:S,timeout:g}=d,[p,_]=C.useState(!1);return wt(()=>{function O(){_(!1),T.current?.setIsInstantPhase(!1),f.current=null,T.current=null,h.current=R.current}if(c&&f.current&&!n&&f.current===s){if(_(!1),m)return g.start(m,O),()=>{g.clear()};O()}},[c,n,s,f,h,m,R,T,g]),wt(()=>{if(!c||!n)return;const O=T.current,D=f.current;T.current={onOpenChange:o,setIsInstantPhase:_},f.current=s,h.current={open:0,close:hh(R.current,"close")},D!==null&&D!==s?(g.clear(),_(!0),O?.setIsInstantPhase(!0),O?.onOpenChange(!1)):(_(!1),O?.setIsInstantPhase(!1))},[c,n,s,o,f,h,m,R,T,g]),wt(()=>()=>{T.current=null},[T]),C.useMemo(()=>({hasProvider:S,delayRef:h,isInstantPhase:p}),[S,h,p])}function Kr(e,t,n,o){const s=Qr(YC).current;return Ok(s,e,t,n,o)&&KC(s,[e,t,n,o]),s.callback}function bk(e){const t=Qr(YC).current;return Dk(t,e)&&KC(t,e),t.callback}function YC(){return{callback:null,cleanup:null,refs:[]}}function Ok(e,t,n,o,s){return e.refs[0]!==t||e.refs[1]!==n||e.refs[2]!==o||e.refs[3]!==s}function Dk(e,t){return e.refs.length!==t.length||e.refs.some((n,o)=>n!==t[o])}function KC(e,t){if(e.refs=t,t.every(n=>n==null)){e.callback=null;return}e.callback=n=>{if(e.cleanup&&(e.cleanup(),e.cleanup=null),n!=null){const o=Array(t.length).fill(null);for(let s=0;s<t.length;s+=1){const c=t[s];if(c!=null)switch(typeof c){case"function":{const d=c(n);typeof d=="function"&&(o[s]=d);break}case"object":{c.current=n;break}}}e.cleanup=()=>{for(let s=0;s<t.length;s+=1){const c=t[s];if(c!=null)switch(typeof c){case"function":{const d=o[s];typeof d=="function"?d():c(null);break}case"object":{c.current=null;break}}}}}}}const ET={clip:"rect(0 0 0 0)",overflow:"hidden",whiteSpace:"nowrap",position:"fixed",top:0,left:0,border:0,padding:0,width:1,height:1,margin:-1},Yh=C.forwardRef(function(t,n){const[o,s]=C.useState();wt(()=>{DC&&s("button")},[]);const c={ref:n,tabIndex:0,role:o,"aria-hidden":o?void 0:!0,style:ET};return l.jsx("span",{...t,...c,"data-base-ui-focus-guard":""})});let pp=0;function bA(e,t={}){const{preventScroll:n=!1,cancelPrevious:o=!0,sync:s=!1}=t;o&&cancelAnimationFrame(pp);const c=()=>e?.focus({preventScroll:n});s?c():pp=requestAnimationFrame(c)}const Mr={inert:new WeakMap,"aria-hidden":new WeakMap,none:new WeakMap};function Np(e){return e==="inert"?Mr.inert:e==="aria-hidden"?Mr["aria-hidden"]:Mr.none}let th=new WeakSet,ah={},OA=0;const VC=e=>e&&(e.host||VC(e.parentNode)),yk=(e,t)=>t.map(n=>{if(e.contains(n))return n;const o=VC(n);return e.contains(o)?o:null}).filter(n=>n!=null);function vk(e,t,n,o){const s="data-base-ui-inert",c=o?"inert":n?"aria-hidden":null,d=yk(t,e),f=new Set,h=new Set(d),m=[];ah[s]||(ah[s]=new WeakMap);const R=ah[s];d.forEach(T),S(t),f.clear();function T(g){!g||f.has(g)||(f.add(g),g.parentNode&&T(g.parentNode))}function S(g){!g||h.has(g)||[].forEach.call(g.children,p=>{if(bl(p)!=="script")if(f.has(p))S(p);else{const _=c?p.getAttribute(c):null,O=_!==null&&_!=="false",D=Np(c),L=(D.get(p)||0)+1,w=(R.get(p)||0)+1;D.set(p,L),R.set(p,w),m.push(p),L===1&&O&&th.add(p),w===1&&p.setAttribute(s,""),!O&&c&&p.setAttribute(c,c==="inert"?"":"true")}})}return OA+=1,()=>{m.forEach(g=>{const p=Np(c),O=(p.get(g)||0)-1,D=(R.get(g)||0)-1;p.set(g,O),R.set(g,D),O||(!th.has(g)&&c&&g.removeAttribute(c),th.delete(g)),D||g.removeAttribute(s)}),OA-=1,OA||(Mr.inert=new WeakMap,Mr["aria-hidden"]=new WeakMap,Mr.none=new WeakMap,th=new WeakSet,ah={})}}function Mk(e,t=!1,n=!1){const o=Pa(e[0]).body;return vk(e.concat(Array.from(o.querySelectorAll("[aria-live]"))),o,t,n)}const WC=C.createContext(null),XC=()=>C.useContext(WC),Cp=Yr("portal");function qC(e={}){const{id:t,root:n}=e,o=Nf(),s=XC(),[c,d]=C.useState(null),f=C.useRef(null);return wt(()=>()=>{c?.remove(),queueMicrotask(()=>{f.current=null})},[c]),wt(()=>{if(!o||f.current)return;const h=t?document.getElementById(t):null;if(!h)return;const m=document.createElement("div");m.id=o,m.setAttribute(Cp,""),h.appendChild(m),f.current=m,d(m)},[t,o]),wt(()=>{if(n===null||!o||f.current)return;let h=n||s?.portalNode;h&&!rT(h)&&(h=h.current),h=h||document.body;let m=null;t&&(m=document.createElement("div"),m.id=t,h.appendChild(m));const R=document.createElement("div");R.id=o,R.setAttribute(Cp,""),h=m||h,h.appendChild(R),f.current=R,d(R)},[t,n,o,s]),c}function Lk(e){const{children:t,id:n,root:o,preserveTabOrder:s=!0}=e,c=qC({id:n,root:o}),[d,f]=C.useState(null),h=C.useRef(null),m=C.useRef(null),R=C.useRef(null),T=C.useRef(null),S=d?.modal,g=d?.open,p=!!d&&!d.modal&&d.open&&s&&!!(o||c);return C.useEffect(()=>{if(!c||!s||S)return;function _(O){c&&hu(O)&&(O.type==="focusin"?Sp:Rk)(c)}return c.addEventListener("focusin",_,!0),c.addEventListener("focusout",_,!0),()=>{c.removeEventListener("focusin",_,!0),c.removeEventListener("focusout",_,!0)}},[c,s,S]),C.useEffect(()=>{c&&(g||Sp(c))},[g,c]),l.jsxs(WC.Provider,{value:C.useMemo(()=>({preserveTabOrder:s,beforeOutsideRef:h,afterOutsideRef:m,beforeInsideRef:R,afterInsideRef:T,portalNode:c,setFocusManagerState:f}),[s,c]),children:[p&&c&&l.jsx(Yh,{"data-type":"outside",ref:h,onFocus:_=>{if(hu(_,c))R.current?.focus();else{const O=d?d.domReference:null;zC(O)?.focus()}}}),p&&c&&l.jsx("span",{"aria-owns":c.id,style:ET}),c&&Zr.createPortal(t,c),p&&c&&l.jsx(Yh,{"data-type":"outside",ref:m,onFocus:_=>{if(hu(_,c))T.current?.focus();else{const O=d?d.domReference:null;jC(O)?.focus(),d?.closeOnFocusOut&&d?.onOpenChange(!1,_.nativeEvent,"focus-out")}}})]})}const xk={style:{transition:"none"}},dl={},ZC="data-base-ui-click-trigger",Hk={fallbackAxisSide:"end"},bp=20;let El=[];function mT(){El=El.filter(e=>e.isConnected)}function kk(e){mT(),e&&bl(e)!=="body"&&(El.push(e),El.length>bp&&(El=El.slice(-bp)))}function Op(){return mT(),El[El.length-1]}function Uk(e){const t=Du();return BC(e,t)?e:pf(e,t)[0]||e}function Dp(e,t){if(!t.current.includes("floating")&&!e.getAttribute("role")?.includes("dialog"))return;const n=Du(),s=Ak(e,n).filter(d=>{const f=d.getAttribute("data-tabindex")||"";return BC(d,n)||d.hasAttribute("data-tabindex")&&!f.startsWith("-")}),c=e.getAttribute("tabindex");t.current.includes("floating")||s.length===0?c!=="0"&&e.setAttribute("tabindex","0"):(c!=="-1"||e.hasAttribute("data-tabindex")&&e.getAttribute("data-tabindex")!=="-1")&&(e.setAttribute("tabindex","-1"),e.setAttribute("data-tabindex","-1"))}function wk(e){const{context:t,children:n,disabled:o=!1,order:s=["content"],initialFocus:c=0,returnFocus:d=!0,restoreFocus:f=!1,modal:h=!0,closeOnFocusOut:m=!0,getInsideElements:R=()=>[]}=e,{open:T,onOpenChange:S,events:g,dataRef:p,elements:{domReference:_,floating:O}}=t,D=lt(()=>p.current.floatingContext?.nodeId),L=lt(R),w=typeof c=="number"&&c<0,y=Ep(_)&&w,x=Di(s),G=Di(c),B=Di(d),Y=Cf(),X=XC(),ie=C.useRef(null),oe=C.useRef(null),j=C.useRef(!1),$=C.useRef(!1),Ee=C.useRef(-1),V=Br(),P=X!=null,K=oR(O),ne=lt((Q=K)=>Q?pf(Q,Du()):[]),fe=lt(Q=>{const H=ne(Q);return x.current.map(()=>H).filter(Boolean).flat()});C.useEffect(()=>{if(o||!h)return;function Q(Z){Z.key==="Tab"&&Aa(K,ul(Pa(K)))&&ne().length===0&&!y&&BH(Z)}const H=Pa(K);return H.addEventListener("keydown",Q),()=>{H.removeEventListener("keydown",Q)}},[o,_,K,h,x,y,ne,fe]),C.useEffect(()=>{if(o||!O)return;function Q(H){const Z=Yn(H),he=ne().indexOf(Z);he!==-1&&(Ee.current=he)}return O.addEventListener("focusin",Q),()=>{O.removeEventListener("focusin",Q)}},[o,O,ne]),C.useEffect(()=>{if(o||!m)return;function Q(){$.current=!0}function H(he){const Re=he.relatedTarget,Ne=he.currentTarget,Me=Yn(he);queueMicrotask(()=>{const me=D(),Ce=!(Aa(_,Re)||Aa(O,Re)||Aa(Re,O)||Aa(X?.portalNode,Re)||Re?.hasAttribute(Yr("focus-guard"))||Y&&(os(Y.nodesRef.current,me).find(ge=>Aa(ge.context?.elements.floating,Re)||Aa(ge.context?.elements.domReference,Re))||mp(Y.nodesRef.current,me).find(ge=>[ge.context?.elements.floating,oR(ge.context?.elements.floating)].includes(Re)||ge.context?.elements.domReference===Re)));if(Ne===_&&K&&Dp(K,x),f&&Ne!==_&&!Me?.isConnected&&ul(Pa(K))===Pa(K).body){Ga(K)&&K.focus();const ge=Ee.current,_e=ne(),De=_e[ge]||_e[_e.length-1]||K;Ga(De)&&De.focus()}if(p.current.insideReactTree){p.current.insideReactTree=!1;return}if($.current){$.current=!1;return}(y||!h)&&Re&&Ce&&Re!==Op()&&(j.current=!0,S(!1,he,"focus-out"))})}const Z=!!(!Y&&X);function ae(){p.current.insideReactTree=!0,V.start(0,()=>{p.current.insideReactTree=!1})}if(O&&Ga(_))return _.addEventListener("focusout",H),_.addEventListener("pointerdown",Q),O.addEventListener("focusout",H),Z&&O.addEventListener("focusout",ae,!0),()=>{_.removeEventListener("focusout",H),_.removeEventListener("pointerdown",Q),O.removeEventListener("focusout",H),Z&&O.removeEventListener("focusout",ae,!0)}},[o,_,O,K,h,Y,X,S,m,f,ne,y,D,x,p,V]);const M=C.useRef(null),ee=C.useRef(null),ce=Kr(M,X?.beforeInsideRef),W=Kr(ee,X?.afterInsideRef);C.useEffect(()=>{if(o||!O)return;const Q=Array.from(X?.portalNode?.querySelectorAll(`[${Yr("portal")}]`)||[]),Z=(Y?mp(Y.nodesRef.current,D()):[]).find(Re=>Ep(Re.context?.elements.domReference||null))?.context?.elements.domReference,ae=[O,Z,...Q,...L(),ie.current,oe.current,M.current,ee.current,X?.beforeOutsideRef.current,X?.afterOutsideRef.current,y?_:null].filter(Re=>Re!=null),he=Mk(ae,h||y);return()=>{he()}},[o,_,O,h,x,X,y,Y,D,L]),wt(()=>{if(o||!Ga(K))return;const Q=Pa(K),H=ul(Q);queueMicrotask(()=>{const Z=fe(K),ae=G.current,he=(typeof ae=="number"?Z[ae]:ae.current)||K,Re=Aa(K,H);!w&&!Re&&T&&bA(he,{preventScroll:he===K})})},[o,T,K,w,fe,G]),wt(()=>{if(o||!K)return;const Q=Pa(K),H=ul(Q);kk(H);function Z({reason:Re,event:Ne,nested:Me}){if(["hover","safe-polygon"].includes(Re)&&Ne.type==="mouseleave"&&(j.current=!0),Re==="outside-press")if(Me)j.current=!1;else if(jH(Ne)||zH(Ne))j.current=!1;else{let me=!1;document.createElement("div").focus({get preventScroll(){return me=!0,!1}}),me?j.current=!1:j.current=!0}}g.on("openchange",Z);const ae=Q.createElement("span");ae.setAttribute("tabindex","-1"),ae.setAttribute("aria-hidden","true"),Object.assign(ae.style,ET),P&&_&&_.insertAdjacentElement("afterend",ae);function he(){if(typeof B.current=="boolean"){const Re=_||Op();return Re&&Re.isConnected?Re:ae}return B.current.current||ae}return()=>{g.off("openchange",Z);const Re=ul(Q),Ne=Aa(O,Re)||Y&&os(Y.nodesRef.current,D(),!1).some(me=>Aa(me.context?.elements.floating,Re)),Me=he();queueMicrotask(()=>{const me=Uk(Me);B.current&&!j.current&&Ga(me)&&(!(me!==Re&&Re!==Q.body)||Ne)&&me.focus({preventScroll:!0}),ae.remove()})}},[o,O,K,B,p,g,Y,P,_,D]),C.useEffect(()=>{queueMicrotask(()=>{j.current=!1})},[o]),C.useEffect(()=>{if(o||!T)return;function Q(Z){Yn(Z)?.closest(`[${ZC}]`)&&($.current=!0)}const H=Pa(K);return H.addEventListener("pointerdown",Q,!0),()=>{H.removeEventListener("pointerdown",Q,!0)}},[o,T,K]),wt(()=>{if(!o&&X)return X.setFocusManagerState({modal:h,closeOnFocusOut:m,open:T,onOpenChange:S,domReference:_}),()=>{X.setFocusManagerState(null)}},[o,X,h,T,S,m,_]),wt(()=>{if(!(o||!K))return Dp(K,x),()=>{queueMicrotask(mT)}},[o,K,x]);const z=!o&&(h?!y:!0)&&(P||h);return l.jsxs(C.Fragment,{children:[z&&l.jsx(Yh,{"data-type":"inside",ref:ce,onFocus:Q=>{if(h){const H=fe();bA(H[H.length-1])}else X?.preserveTabOrder&&X.portalNode&&(j.current=!1,hu(Q,X.portalNode)?jC(_)?.focus():X.beforeOutsideRef.current?.focus())}}),n,z&&l.jsx(Yh,{"data-type":"inside",ref:W,onFocus:Q=>{h?bA(fe()[0]):X?.preserveTabOrder&&X.portalNode&&(m&&(j.current=!0),hu(Q,X.portalNode)?zC(_)?.focus():X.afterOutsideRef.current?.focus())}})]})}const nh=null;class Pk{callbacks=[];callbacksCount=0;nextId=1;startId=1;isScheduled=!1;tick=t=>{this.isScheduled=!1;const n=this.callbacks,o=this.callbacksCount;if(this.callbacks=[],this.callbacksCount=0,this.startId=this.nextId,o>0)for(let s=0;s<n.length;s+=1)n[s]?.(t)};request(t){const n=this.nextId;return this.nextId+=1,this.callbacks.push(t),this.callbacksCount+=1,(!this.isScheduled||!1)&&(requestAnimationFrame(this.tick),this.isScheduled=!0),n}cancel(t){const n=t-this.startId;n<0||n>=this.callbacks.length||(this.callbacks[n]=null,this.callbacksCount-=1)}}const ih=new Pk;class Ki{static create(){return new Ki}static request(t){return ih.request(t)}static cancel(t){return ih.cancel(t)}currentId=nh;request(t){this.cancel(),this.currentId=ih.request(()=>{this.currentId=nh,t()})}cancel=()=>{this.currentId!==nh&&(ih.cancel(this.currentId),this.currentId=nh)};disposeEffect=()=>this.cancel}function QC(){const e=Qr(Ki.create).current;return pC(e.disposeEffect),e}function Gk(e,t={}){const{open:n,onOpenChange:o,dataRef:s}=e,{enabled:c=!0,event:d="click",toggle:f=!0,ignoreMouse:h=!1,stickIfOpen:m=!0}=t,R=C.useRef(void 0),T=QC(),S=C.useMemo(()=>({onPointerDown(g){R.current=g.pointerType},onMouseDown(g){const p=R.current,_=g.nativeEvent;if(g.button!==0||d==="click"||Fr(p,!0)&&h)return;const O=s.current.openEvent,D=O?.type,L=!(n&&f&&(!(O&&m)||D==="click"||D==="mousedown"));T.request(()=>{o(L,_,"click")})},onClick(g){const p=R.current;if(d==="mousedown"&&p){R.current=void 0;return}if(Fr(p,!0)&&h)return;const _=s.current.openEvent,O=_?.type;o(!(n&&f&&(!(_&&m)||O==="click"||O==="mousedown"||O==="keydown"||O==="keyup")),g.nativeEvent,"click")},onKeyDown(){R.current=void 0}}),[s,d,h,o,n,m,f,T]);return C.useMemo(()=>c?{reference:S}:dl,[c,S])}function Bk(e,t){let n=null,o=null,s=!1;return{contextElement:e||void 0,getBoundingClientRect(){const c=e?.getBoundingClientRect()||{width:0,height:0,x:0,y:0},d=t.axis==="x"||t.axis==="both",f=t.axis==="y"||t.axis==="both",h=["mouseenter","mousemove"].includes(t.dataRef.current.openEvent?.type||"")&&t.pointerType!=="touch";let m=c.width,R=c.height,T=c.x,S=c.y;return n==null&&t.x&&d&&(n=c.x-t.x),o==null&&t.y&&f&&(o=c.y-t.y),T-=n||0,S-=o||0,m=0,R=0,!s||h?(m=t.axis==="y"?c.width:0,R=t.axis==="x"?c.height:0,T=d&&t.x!=null?t.x:T,S=f&&t.y!=null?t.y:S):s&&!h&&(R=t.axis==="x"?c.height:R,m=t.axis==="y"?c.width:m),s=!0,{width:m,height:R,x:T,y:S,top:S,right:T+m,bottom:S+R,left:T}}}}function yp(e){return e!=null&&e.clientX!=null}function Fk(e,t={}){const{open:n,dataRef:o,elements:{floating:s,domReference:c},refs:d}=e,{enabled:f=!0,axis:h="both",x:m=null,y:R=null}=t,T=C.useRef(!1),S=C.useRef(null),[g,p]=C.useState(),[_,O]=C.useState([]),D=lt((G,B)=>{T.current||o.current.openEvent&&!yp(o.current.openEvent)||d.setPositionReference(Bk(c,{x:G,y:B,axis:h,dataRef:o,pointerType:g}))}),L=lt(G=>{m!=null||R!=null||(n?S.current||O([]):D(G.clientX,G.clientY))}),w=Fr(g)?s:n,y=C.useCallback(()=>{if(!w||!f||m!=null||R!=null)return;const G=Ba(s);function B(Y){const X=Yn(Y);Aa(s,X)?(G.removeEventListener("mousemove",B),S.current=null):D(Y.clientX,Y.clientY)}if(!o.current.openEvent||yp(o.current.openEvent)){G.addEventListener("mousemove",B);const Y=()=>{G.removeEventListener("mousemove",B),S.current=null};return S.current=Y,Y}d.setPositionReference(c)},[w,f,m,R,s,o,d,c,D]);C.useEffect(()=>y(),[y,_]),C.useEffect(()=>{f&&!s&&(T.current=!1)},[f,s]),C.useEffect(()=>{!f&&n&&(T.current=!0)},[f,n]),wt(()=>{f&&(m!=null||R!=null)&&(T.current=!1,D(m,R))},[f,m,R,D]);const x=C.useMemo(()=>{function G(B){p(B.pointerType)}return{onPointerDown:G,onPointerEnter:G,onMouseMove:L,onMouseEnter:L}},[L]);return C.useMemo(()=>f?{reference:x}:{},[f,x])}function vp(e,t,n){let{reference:o,floating:s}=e;const c=yi(t),d=hT(t),f=dT(d),h=mi(t),m=c==="y",R=o.x+o.width/2-s.width/2,T=o.y+o.height/2-s.height/2,S=o[f]/2-s[f]/2;let g;switch(h){case"top":g={x:R,y:o.y-s.height};break;case"bottom":g={x:R,y:o.y+o.height};break;case"right":g={x:o.x+o.width,y:T};break;case"left":g={x:o.x-s.width,y:T};break;default:g={x:o.x,y:o.y}}switch(Ol(t)){case"start":g[d]-=S*(n&&m?-1:1);break;case"end":g[d]+=S*(n&&m?-1:1);break}return g}const jk=async(e,t,n)=>{const{placement:o="bottom",strategy:s="absolute",middleware:c=[],platform:d}=n,f=c.filter(Boolean),h=await(d.isRTL==null?void 0:d.isRTL(t));let m=await d.getElementRects({reference:e,floating:t,strategy:s}),{x:R,y:T}=vp(m,o,h),S=o,g={},p=0;for(let _=0;_<f.length;_++){const{name:O,fn:D}=f[_],{x:L,y:w,data:y,reset:x}=await D({x:R,y:T,initialPlacement:o,placement:S,strategy:s,middlewareData:g,rects:m,platform:d,elements:{reference:e,floating:t}});R=L??R,T=w??T,g={...g,[O]:{...g[O],...y}},x&&p<=50&&(p++,typeof x=="object"&&(x.placement&&(S=x.placement),x.rects&&(m=x.rects===!0?await d.getElementRects({reference:e,floating:t,strategy:s}):x.rects),{x:R,y:T}=vp(m,S,h)),_=-1)}return{x:R,y:T,placement:S,strategy:s,middlewareData:g}};async function Au(e,t){var n;t===void 0&&(t={});const{x:o,y:s,platform:c,rects:d,elements:f,strategy:h}=e,{boundary:m="clippingAncestors",rootBoundary:R="viewport",elementContext:T="floating",altBoundary:S=!1,padding:g=0}=Ho(t,e),p=xC(g),O=f[S?T==="floating"?"reference":"floating":T],D=Bh(await c.getClippingRect({element:(n=await(c.isElement==null?void 0:c.isElement(O)))==null||n?O:O.contextElement||await(c.getDocumentElement==null?void 0:c.getDocumentElement(f.floating)),boundary:m,rootBoundary:R,strategy:h})),L=T==="floating"?{x:o,y:s,width:d.floating.width,height:d.floating.height}:d.reference,w=await(c.getOffsetParent==null?void 0:c.getOffsetParent(f.floating)),y=await(c.isElement==null?void 0:c.isElement(w))?await(c.getScale==null?void 0:c.getScale(w))||{x:1,y:1}:{x:1,y:1},x=Bh(c.convertOffsetParentRelativeRectToViewportRelativeRect?await c.convertOffsetParentRelativeRectToViewportRelativeRect({elements:f,rect:L,offsetParent:w,strategy:h}):L);return{top:(D.top-x.top+p.top)/y.y,bottom:(x.bottom-D.bottom+p.bottom)/y.y,left:(D.left-x.left+p.left)/y.x,right:(x.right-D.right+p.right)/y.x}}const zk=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,o;const{placement:s,middlewareData:c,rects:d,initialPlacement:f,platform:h,elements:m}=t,{mainAxis:R=!0,crossAxis:T=!0,fallbackPlacements:S,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:_=!0,...O}=Ho(e,t);if((n=c.arrow)!=null&&n.alignmentOffset)return{};const D=mi(s),L=yi(f),w=mi(f)===f,y=await(h.isRTL==null?void 0:h.isRTL(m.floating)),x=S||(w||!_?[Gh(f)]:qH(f)),G=p!=="none";!S&&G&&x.push(...JH(f,_,p,y));const B=[f,...x],Y=await Au(t,O),X=[];let ie=((o=c.flip)==null?void 0:o.overflows)||[];if(R&&X.push(Y[D]),T){const Ee=XH(s,d,y);X.push(Y[Ee[0]],Y[Ee[1]])}if(ie=[...ie,{placement:s,overflows:X}],!X.every(Ee=>Ee<=0)){var oe,j;const Ee=(((oe=c.flip)==null?void 0:oe.index)||0)+1,V=B[Ee];if(V&&(!(T==="alignment"?L!==yi(V):!1)||ie.every(ne=>yi(ne.placement)===L?ne.overflows[0]>0:!0)))return{data:{index:Ee,overflows:ie},reset:{placement:V}};let P=(j=ie.filter(K=>K.overflows[0]<=0).sort((K,ne)=>K.overflows[1]-ne.overflows[1])[0])==null?void 0:j.placement;if(!P)switch(g){case"bestFit":{var $;const K=($=ie.filter(ne=>{if(G){const fe=yi(ne.placement);return fe===L||fe==="y"}return!0}).map(ne=>[ne.placement,ne.overflows.filter(fe=>fe>0).reduce((fe,M)=>fe+M,0)]).sort((ne,fe)=>ne[1]-fe[1])[0])==null?void 0:$[0];K&&(P=K);break}case"initialPlacement":P=f;break}if(s!==P)return{reset:{placement:P}}}return{}}}};function Mp(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Lp(e){return YH.some(t=>e[t]>=0)}const Yk=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:o="referenceHidden",...s}=Ho(e,t);switch(o){case"referenceHidden":{const c=await Au(t,{...s,elementContext:"reference"}),d=Mp(c,n.reference);return{data:{referenceHiddenOffsets:d,referenceHidden:Lp(d)}}}case"escaped":{const c=await Au(t,{...s,altBoundary:!0}),d=Mp(c,n.floating);return{data:{escapedOffsets:d,escaped:Lp(d)}}}default:return{}}}}},$C=new Set(["left","top"]);async function Kk(e,t){const{placement:n,platform:o,elements:s}=e,c=await(o.isRTL==null?void 0:o.isRTL(s.floating)),d=mi(n),f=Ol(n),h=yi(n)==="y",m=$C.has(d)?-1:1,R=c&&h?-1:1,T=Ho(t,e);let{mainAxis:S,crossAxis:g,alignmentAxis:p}=typeof T=="number"?{mainAxis:T,crossAxis:0,alignmentAxis:null}:{mainAxis:T.mainAxis||0,crossAxis:T.crossAxis||0,alignmentAxis:T.alignmentAxis};return f&&typeof p=="number"&&(g=f==="end"?p*-1:p),h?{x:g*R,y:S*m}:{x:S*m,y:g*R}}const Vk=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,o;const{x:s,y:c,placement:d,middlewareData:f}=t,h=await Kk(t,e);return d===((n=f.offset)==null?void 0:n.placement)&&(o=f.arrow)!=null&&o.alignmentOffset?{}:{x:s+h.x,y:c+h.y,data:{...h,placement:d}}}}},Wk=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:o,placement:s}=t,{mainAxis:c=!0,crossAxis:d=!1,limiter:f={fn:O=>{let{x:D,y:L}=O;return{x:D,y:L}}},...h}=Ho(e,t),m={x:n,y:o},R=await Au(t,h),T=yi(mi(s)),S=uT(T);let g=m[S],p=m[T];if(c){const O=S==="y"?"top":"left",D=S==="y"?"bottom":"right",L=g+R[O],w=g-R[D];g=lR(L,g,w)}if(d){const O=T==="y"?"top":"left",D=T==="y"?"bottom":"right",L=p+R[O],w=p-R[D];p=lR(L,p,w)}const _=f.fn({...t,[S]:g,[T]:p});return{..._,data:{x:_.x-n,y:_.y-o,enabled:{[S]:c,[T]:d}}}}}},Xk=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:o,placement:s,rects:c,middlewareData:d}=t,{offset:f=0,mainAxis:h=!0,crossAxis:m=!0}=Ho(e,t),R={x:n,y:o},T=yi(s),S=uT(T);let g=R[S],p=R[T];const _=Ho(f,t),O=typeof _=="number"?{mainAxis:_,crossAxis:0}:{mainAxis:0,crossAxis:0,..._};if(h){const w=S==="y"?"height":"width",y=c.reference[S]-c.floating[w]+O.mainAxis,x=c.reference[S]+c.reference[w]-O.mainAxis;g<y?g=y:g>x&&(g=x)}if(m){var D,L;const w=S==="y"?"width":"height",y=$C.has(mi(s)),x=c.reference[T]-c.floating[w]+(y&&((D=d.offset)==null?void 0:D[T])||0)+(y?0:O.crossAxis),G=c.reference[T]+c.reference[w]+(y?0:((L=d.offset)==null?void 0:L[T])||0)-(y?O.crossAxis:0);p<x?p=x:p>G&&(p=G)}return{[S]:g,[T]:p}}}},qk=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,o;const{placement:s,rects:c,platform:d,elements:f}=t,{apply:h=()=>{},...m}=Ho(e,t),R=await Au(t,m),T=mi(s),S=Ol(s),g=yi(s)==="y",{width:p,height:_}=c.floating;let O,D;T==="top"||T==="bottom"?(O=T,D=S===(await(d.isRTL==null?void 0:d.isRTL(f.floating))?"start":"end")?"left":"right"):(D=T,O=S==="end"?"top":"bottom");const L=_-R.top-R.bottom,w=p-R.left-R.right,y=jr(_-R[O],L),x=jr(p-R[D],w),G=!t.middlewareData.shift;let B=y,Y=x;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(Y=w),(o=t.middlewareData.shift)!=null&&o.enabled.y&&(B=L),G&&!S){const ie=Kn(R.left,0),oe=Kn(R.right,0),j=Kn(R.top,0),$=Kn(R.bottom,0);g?Y=p-2*(ie!==0||oe!==0?ie+oe:Kn(R.left,R.right)):B=_-2*(j!==0||$!==0?j+$:Kn(R.top,R.bottom))}await h({...t,availableWidth:Y,availableHeight:B});const X=await d.getDimensions(f.floating);return p!==X.width||_!==X.height?{reset:{rects:!0}}:{}}}};function JC(e){const t=Ei(e);let n=parseFloat(t.width)||0,o=parseFloat(t.height)||0;const s=Ga(e),c=s?e.offsetWidth:n,d=s?e.offsetHeight:o,f=Ph(n)!==c||Ph(o)!==d;return f&&(n=c,o=d),{width:n,height:o,$:f}}function AT(e){return kt(e)?e:e.contextElement}function Lr(e){const t=AT(e);if(!Ga(t))return Xi(1);const n=t.getBoundingClientRect(),{width:o,height:s,$:c}=JC(t);let d=(c?Ph(n.width):n.width)/o,f=(c?Ph(n.height):n.height)/s;return(!d||!Number.isFinite(d))&&(d=1),(!f||!Number.isFinite(f))&&(f=1),{x:d,y:f}}const Zk=Xi(0);function eb(e){const t=Ba(e);return!If()||!t.visualViewport?Zk:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Qk(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Ba(e)?!1:t}function hs(e,t,n,o){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),c=AT(e);let d=Xi(1);t&&(o?kt(o)&&(d=Lr(o)):d=Lr(e));const f=Qk(c,n,o)?eb(c):Xi(0);let h=(s.left+f.x)/d.x,m=(s.top+f.y)/d.y,R=s.width/d.x,T=s.height/d.y;if(c){const S=Ba(c),g=o&&kt(o)?Ba(o):o;let p=S,_=aR(p);for(;_&&o&&g!==p;){const O=Lr(_),D=_.getBoundingClientRect(),L=Ei(_),w=D.left+(_.clientLeft+parseFloat(L.paddingLeft))*O.x,y=D.top+(_.clientTop+parseFloat(L.paddingTop))*O.y;h*=O.x,m*=O.y,R*=O.x,T*=O.y,h+=w,m+=y,p=Ba(_),_=aR(p)}}return Bh({width:R,height:T,x:h,y:m})}function bf(e,t){const n=_f(e).scrollLeft;return t?t.left+n:hs(to(e)).left+n}function tb(e,t){const n=e.getBoundingClientRect(),o=n.left+t.scrollLeft-bf(e,n),s=n.top+t.scrollTop;return{x:o,y:s}}function $k(e){let{elements:t,rect:n,offsetParent:o,strategy:s}=e;const c=s==="fixed",d=to(o),f=t?gf(t.floating):!1;if(o===d||f&&c)return n;let h={scrollLeft:0,scrollTop:0},m=Xi(1);const R=Xi(0),T=Ga(o);if((T||!T&&!c)&&((bl(o)!=="body"||Ou(d))&&(h=_f(o)),Ga(o))){const g=hs(o);m=Lr(o),R.x=g.x+o.clientLeft,R.y=g.y+o.clientTop}const S=d&&!T&&!c?tb(d,h):Xi(0);return{width:n.width*m.x,height:n.height*m.y,x:n.x*m.x-h.scrollLeft*m.x+R.x+S.x,y:n.y*m.y-h.scrollTop*m.y+R.y+S.y}}function Jk(e){return Array.from(e.getClientRects())}function eU(e){const t=to(e),n=_f(e),o=e.ownerDocument.body,s=Kn(t.scrollWidth,t.clientWidth,o.scrollWidth,o.clientWidth),c=Kn(t.scrollHeight,t.clientHeight,o.scrollHeight,o.clientHeight);let d=-n.scrollLeft+bf(e);const f=-n.scrollTop;return Ei(o).direction==="rtl"&&(d+=Kn(t.clientWidth,o.clientWidth)-s),{width:s,height:c,x:d,y:f}}const xp=25;function tU(e,t){const n=Ba(e),o=to(e),s=n.visualViewport;let c=o.clientWidth,d=o.clientHeight,f=0,h=0;if(s){c=s.width,d=s.height;const R=If();(!R||R&&t==="fixed")&&(f=s.offsetLeft,h=s.offsetTop)}const m=bf(o);if(m<=0){const R=o.ownerDocument,T=R.body,S=getComputedStyle(T),g=R.compatMode==="CSS1Compat"&&parseFloat(S.marginLeft)+parseFloat(S.marginRight)||0,p=Math.abs(o.clientWidth-T.clientWidth-g);p<=xp&&(c-=p)}else m<=xp&&(c+=m);return{width:c,height:d,x:f,y:h}}const aU=new Set(["absolute","fixed"]);function nU(e,t){const n=hs(e,!0,t==="fixed"),o=n.top+e.clientTop,s=n.left+e.clientLeft,c=Ga(e)?Lr(e):Xi(1),d=e.clientWidth*c.x,f=e.clientHeight*c.y,h=s*c.x,m=o*c.y;return{width:d,height:f,x:h,y:m}}function Hp(e,t,n){let o;if(t==="viewport")o=tU(e,n);else if(t==="document")o=eU(to(e));else if(kt(t))o=nU(t,n);else{const s=eb(e);o={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return Bh(o)}function ab(e,t){const n=xo(e);return n===t||!kt(n)||vo(n)?!1:Ei(n).position==="fixed"||ab(n,t)}function iU(e,t){const n=t.get(e);if(n)return n;let o=Rl(e,[],!1).filter(f=>kt(f)&&bl(f)!=="body"),s=null;const c=Ei(e).position==="fixed";let d=c?xo(e):e;for(;kt(d)&&!vo(d);){const f=Ei(d),h=cT(d);!h&&f.position==="fixed"&&(s=null),(c?!h&&!s:!h&&f.position==="static"&&!!s&&aU.has(s.position)||Ou(d)&&!h&&ab(e,d))?o=o.filter(R=>R!==d):s=f,d=xo(d)}return t.set(e,o),o}function oU(e){let{element:t,boundary:n,rootBoundary:o,strategy:s}=e;const d=[...n==="clippingAncestors"?gf(t)?[]:iU(t,this._c):[].concat(n),o],f=d[0],h=d.reduce((m,R)=>{const T=Hp(t,R,s);return m.top=Kn(T.top,m.top),m.right=jr(T.right,m.right),m.bottom=jr(T.bottom,m.bottom),m.left=Kn(T.left,m.left),m},Hp(t,f,s));return{width:h.right-h.left,height:h.bottom-h.top,x:h.left,y:h.top}}function lU(e){const{width:t,height:n}=JC(e);return{width:t,height:n}}function sU(e,t,n){const o=Ga(t),s=to(t),c=n==="fixed",d=hs(e,!0,c,t);let f={scrollLeft:0,scrollTop:0};const h=Xi(0);function m(){h.x=bf(s)}if(o||!o&&!c)if((bl(t)!=="body"||Ou(s))&&(f=_f(t)),o){const g=hs(t,!0,c,t);h.x=g.x+t.clientLeft,h.y=g.y+t.clientTop}else s&&m();c&&!o&&s&&m();const R=s&&!o&&!c?tb(s,f):Xi(0),T=d.left+f.scrollLeft-h.x-R.x,S=d.top+f.scrollTop-h.y-R.y;return{x:T,y:S,width:d.width,height:d.height}}function DA(e){return Ei(e).position==="static"}function kp(e,t){if(!Ga(e)||Ei(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return to(e)===n&&(n=n.ownerDocument.body),n}function nb(e,t){const n=Ba(e);if(gf(e))return n;if(!Ga(e)){let s=xo(e);for(;s&&!vo(s);){if(kt(s)&&!DA(s))return s;s=xo(s)}return n}let o=kp(e,t);for(;o&&NH(o)&&DA(o);)o=kp(o,t);return o&&vo(o)&&DA(o)&&!cT(o)?n:o||yH(e)||n}const rU=async function(e){const t=this.getOffsetParent||nb,n=this.getDimensions,o=await n(e.floating);return{reference:sU(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:o.width,height:o.height}}};function cU(e){return Ei(e).direction==="rtl"}const uU={convertOffsetParentRelativeRectToViewportRelativeRect:$k,getDocumentElement:to,getClippingRect:oU,getOffsetParent:nb,getElementRects:rU,getClientRects:Jk,getDimensions:lU,getScale:Lr,isElement:kt,isRTL:cU};function ib(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function dU(e,t){let n=null,o;const s=to(e);function c(){var f;clearTimeout(o),(f=n)==null||f.disconnect(),n=null}function d(f,h){f===void 0&&(f=!1),h===void 0&&(h=1),c();const m=e.getBoundingClientRect(),{left:R,top:T,width:S,height:g}=m;if(f||t(),!S||!g)return;const p=eh(T),_=eh(s.clientWidth-(R+S)),O=eh(s.clientHeight-(T+g)),D=eh(R),w={rootMargin:-p+"px "+-_+"px "+-O+"px "+-D+"px",threshold:Kn(0,jr(1,h))||1};let y=!0;function x(G){const B=G[0].intersectionRatio;if(B!==h){if(!y)return d();B?d(!1,B):o=setTimeout(()=>{d(!1,1e-7)},1e3)}B===1&&!ib(m,e.getBoundingClientRect())&&d(),y=!1}try{n=new IntersectionObserver(x,{...w,root:s.ownerDocument})}catch{n=new IntersectionObserver(x,w)}n.observe(e)}return d(!0),c}function Up(e,t,n,o){o===void 0&&(o={});const{ancestorScroll:s=!0,ancestorResize:c=!0,elementResize:d=typeof ResizeObserver=="function",layoutShift:f=typeof IntersectionObserver=="function",animationFrame:h=!1}=o,m=AT(e),R=s||c?[...m?Rl(m):[],...Rl(t)]:[];R.forEach(D=>{s&&D.addEventListener("scroll",n,{passive:!0}),c&&D.addEventListener("resize",n)});const T=m&&f?dU(m,n):null;let S=-1,g=null;d&&(g=new ResizeObserver(D=>{let[L]=D;L&&L.target===m&&g&&(g.unobserve(t),cancelAnimationFrame(S),S=requestAnimationFrame(()=>{var w;(w=g)==null||w.observe(t)})),n()}),m&&!h&&g.observe(m),g.observe(t));let p,_=h?hs(e):null;h&&O();function O(){const D=hs(e);_&&!ib(_,D)&&n(),_=D,p=requestAnimationFrame(O)}return n(),()=>{var D;R.forEach(L=>{s&&L.removeEventListener("scroll",n),c&&L.removeEventListener("resize",n)}),T?.(),(D=g)==null||D.disconnect(),g=null,h&&cancelAnimationFrame(p)}}const hU=Vk,fU=Wk,EU=zk,mU=qk,AU=Yk,RU=Xk,TU=(e,t,n)=>{const o=new Map,s={platform:uU,...n},c={...s.platform,_c:o};return jk(e,t,{...s,platform:c})};var SU=typeof document<"u",gU=function(){},fh=SU?C.useLayoutEffect:gU;function Kh(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,o,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(o=n;o--!==0;)if(!Kh(e[o],t[o]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(o=n;o--!==0;)if(!{}.hasOwnProperty.call(t,s[o]))return!1;for(o=n;o--!==0;){const c=s[o];if(!(c==="_owner"&&e.$$typeof)&&!Kh(e[c],t[c]))return!1}return!0}return e!==e&&t!==t}function ob(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function wp(e,t){const n=ob(e);return Math.round(t*n)/n}function yA(e){const t=C.useRef(e);return fh(()=>{t.current=e}),t}function IU(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:o=[],platform:s,elements:{reference:c,floating:d}={},transform:f=!0,whileElementsMounted:h,open:m}=e,[R,T]=C.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[S,g]=C.useState(o);Kh(S,o)||g(o);const[p,_]=C.useState(null),[O,D]=C.useState(null),L=C.useCallback(ne=>{ne!==G.current&&(G.current=ne,_(ne))},[]),w=C.useCallback(ne=>{ne!==B.current&&(B.current=ne,D(ne))},[]),y=c||p,x=d||O,G=C.useRef(null),B=C.useRef(null),Y=C.useRef(R),X=h!=null,ie=yA(h),oe=yA(s),j=yA(m),$=C.useCallback(()=>{if(!G.current||!B.current)return;const ne={placement:t,strategy:n,middleware:S};oe.current&&(ne.platform=oe.current),TU(G.current,B.current,ne).then(fe=>{const M={...fe,isPositioned:j.current!==!1};Ee.current&&!Kh(Y.current,M)&&(Y.current=M,Zr.flushSync(()=>{T(M)}))})},[S,t,n,oe,j]);fh(()=>{m===!1&&Y.current.isPositioned&&(Y.current.isPositioned=!1,T(ne=>({...ne,isPositioned:!1})))},[m]);const Ee=C.useRef(!1);fh(()=>(Ee.current=!0,()=>{Ee.current=!1}),[]),fh(()=>{if(y&&(G.current=y),x&&(B.current=x),y&&x){if(ie.current)return ie.current(y,x,$);$()}},[y,x,$,ie,X]);const V=C.useMemo(()=>({reference:G,floating:B,setReference:L,setFloating:w}),[L,w]),P=C.useMemo(()=>({reference:y,floating:x}),[y,x]),K=C.useMemo(()=>{const ne={position:n,left:0,top:0};if(!P.floating)return ne;const fe=wp(P.floating,R.x),M=wp(P.floating,R.y);return f?{...ne,transform:"translate("+fe+"px, "+M+"px)",...ob(P.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:fe,top:M}},[n,f,P.floating,R.x,R.y]);return C.useMemo(()=>({...R,update:$,refs:V,elements:P,floatingStyles:K}),[R,$,V,P,K])}const _U=(e,t)=>({...hU(e),options:[e,t]}),pU=(e,t)=>({...fU(e),options:[e,t]}),NU=(e,t)=>({...RU(e),options:[e,t]}),CU=(e,t)=>({...EU(e),options:[e,t]}),bU=(e,t)=>({...mU(e),options:[e,t]}),OU=(e,t)=>({...AU(e),options:[e,t]}),DU={intentional:"onClick",sloppy:"onPointerDown"};function Pp(e){return{escapeKey:typeof e=="boolean"?e:e?.escapeKey??!1,outsidePress:typeof e=="boolean"?e:e?.outsidePress??!0}}function lb(e,t={}){const{open:n,onOpenChange:o,elements:s,dataRef:c}=e,{enabled:d=!0,escapeKey:f=!0,outsidePress:h=!0,outsidePressEvent:m="sloppy",referencePress:R=!1,referencePressEvent:T="sloppy",ancestorScroll:S=!1,bubbles:g,capture:p}=t,_=Cf(),O=lt(typeof h=="function"?h:()=>!1),D=typeof h=="function"?O:h,L=C.useRef(!1),{escapeKey:w,outsidePress:y}=Pp(g),{escapeKey:x,outsidePress:G}=Pp(p),B=C.useRef(null),Y=Br(),X=Br(),ie=C.useRef(!1),oe=C.useRef(""),j=lt(H=>{oe.current=H.pointerType}),$=lt(()=>{const H=oe.current,Z=H==="pen"||!H?"mouse":H;return typeof m=="string"?m:m[Z]}),Ee=lt(H=>{if(!n||!d||!f||H.key!=="Escape"||ie.current)return;const Z=c.current.floatingContext?.nodeId,ae=_?os(_.nodesRef.current,Z):[];if(!w&&(H.stopPropagation(),ae.length>0)){let he=!0;if(ae.forEach(Re=>{Re.context?.open&&!Re.context.dataRef.current.__escapeKeyBubbles&&(he=!1)}),!he)return}o(!1,FH(H)?H.nativeEvent:H,"escape-key")}),V=lt(H=>{const Z=$();return Z==="intentional"&&H.type!=="click"||Z==="sloppy"&&H.type==="click"}),P=lt(H=>{const Z=()=>{Ee(H),Yn(H)?.removeEventListener("keydown",Z)};Yn(H)?.addEventListener("keydown",Z)}),K=lt(H=>{if(V(H))return;const Z=c.current.insideReactTree;c.current.insideReactTree=!1;const ae=L.current;if(L.current=!1,$()==="intentional"&&ae||Z||typeof D=="function"&&!D(H))return;const he=Yn(H),Re=`[${Yr("inert")}]`,Ne=Pa(s.floating).querySelectorAll(Re);let Me=kt(he)?he:null;for(;Me&&!vo(Me);){const _e=xo(Me);if(vo(_e)||!kt(_e))break;Me=_e}if(Ne.length&&kt(he)&&!PH(he)&&!Aa(he,s.floating)&&Array.from(Ne).every(_e=>!Aa(Me,_e)))return;if(Ga(he)){const _e=vo(he),De=Ei(he),Be=/auto|scroll/,$t=_e||Be.test(De.overflowX),Cn=_e||Be.test(De.overflowY),bn=$t&&he.clientWidth>0&&he.scrollWidth>he.clientWidth,so=Cn&&he.clientHeight>0&&he.scrollHeight>he.clientHeight,ro=De.direction==="rtl",ys=so&&(ro?H.offsetX<=he.offsetWidth-he.clientWidth:H.offsetX>he.clientWidth),vs=bn&&H.offsetY>he.clientHeight;if(ys||vs)return}const me=c.current.floatingContext?.nodeId,Ce=_&&os(_.nodesRef.current,me).some(_e=>Co(H,_e.context?.elements.floating));if(Co(H,s.floating)||Co(H,s.domReference)||Ce)return;const ge=_?os(_.nodesRef.current,me):[];if(ge.length>0){let _e=!0;if(ge.forEach(De=>{De.context?.open&&!De.context.dataRef.current.__outsidePressBubbles&&(_e=!1)}),!_e)return}o(!1,H,"outside-press")}),ne=lt(H=>{if(!($()!=="sloppy"||!n||!d||Co(H,s.floating)||Co(H,s.domReference))){if(H.pointerType==="touch"){B.current={startTime:Date.now(),startX:H.clientX,startY:H.clientY,dismissOnPointerUp:!1,dismissOnMouseDown:!0},Y.start(1e3,()=>{B.current&&(B.current.dismissOnPointerUp=!1,B.current.dismissOnMouseDown=!1)});return}K(H)}}),fe=lt(H=>{if(V(H)||(Y.clear(),H.type==="mousedown"&&B.current&&!B.current.dismissOnMouseDown))return;const Z=()=>{H.type==="pointerdown"?ne(H):K(H),Yn(H)?.removeEventListener(H.type,Z)};Yn(H)?.addEventListener(H.type,Z)}),M=lt(H=>{if($()!=="sloppy"||H.pointerType!=="touch"||!B.current||Co(H,s.floating)||Co(H,s.domReference))return;const Z=Math.abs(H.clientX-B.current.startX),ae=Math.abs(H.clientY-B.current.startY),he=Math.sqrt(Z*Z+ae*ae);he>5&&(B.current.dismissOnPointerUp=!0),he>10&&(K(H),Y.clear(),B.current=null)}),ee=lt(H=>{$()!=="sloppy"||H.pointerType!=="touch"||!B.current||Co(H,s.floating)||Co(H,s.domReference)||(B.current.dismissOnPointerUp&&K(H),Y.clear(),B.current=null)});C.useEffect(()=>{if(!n||!d)return;c.current.__escapeKeyBubbles=w,c.current.__outsidePressBubbles=y;const H=new _l;function Z(Me){o(!1,Me,"ancestor-scroll")}function ae(){H.clear(),ie.current=!0}function he(){H.start(If()?5:0,()=>{ie.current=!1})}const Re=Pa(s.floating);Re.addEventListener("pointerdown",j,!0),f&&(Re.addEventListener("keydown",x?P:Ee,x),Re.addEventListener("compositionstart",ae),Re.addEventListener("compositionend",he)),D&&(Re.addEventListener("click",G?fe:K,G),Re.addEventListener("pointerdown",G?fe:K,G),Re.addEventListener("pointermove",M,G),Re.addEventListener("pointerup",ee,G),Re.addEventListener("mousedown",fe,G));let Ne=[];return S&&(kt(s.domReference)&&(Ne=Rl(s.domReference)),kt(s.floating)&&(Ne=Ne.concat(Rl(s.floating))),!kt(s.reference)&&s.reference&&s.reference.contextElement&&(Ne=Ne.concat(Rl(s.reference.contextElement)))),Ne=Ne.filter(Me=>Me!==Re.defaultView?.visualViewport),Ne.forEach(Me=>{Me.addEventListener("scroll",Z,{passive:!0})}),()=>{Re.removeEventListener("pointerdown",j,!0),f&&(Re.removeEventListener("keydown",x?P:Ee,x),Re.removeEventListener("compositionstart",ae),Re.removeEventListener("compositionend",he)),D&&(Re.removeEventListener("click",G?fe:K,G),Re.removeEventListener("pointerdown",G?fe:K,G),Re.removeEventListener("pointermove",M,G),Re.removeEventListener("pointerup",ee,G),Re.removeEventListener("mousedown",fe,G)),Ne.forEach(Me=>{Me.removeEventListener("scroll",Z)}),H.clear()}},[c,s,f,D,m,n,o,S,d,w,y,Ee,x,P,K,G,fe,ne,M,ee,j]),C.useEffect(()=>{c.current.insideReactTree=!1},[c,D]);const ce=C.useMemo(()=>({onKeyDown:Ee,...R&&{[DU[T]]:H=>{o(!1,H.nativeEvent,"reference-press")},...T!=="intentional"&&{onClick(H){o(!1,H.nativeEvent,"reference-press")}}}}),[Ee,o,R,T]),W=lt(H=>{const Z=Yn(H.nativeEvent);Aa(s.floating,Z)&&(L.current=!0)}),z=lt(()=>{c.current.insideReactTree=!0,X.start(0,()=>{c.current.insideReactTree=!1})}),Q=C.useMemo(()=>({onKeyDown:Ee,onMouseDown:W,onMouseUp:W,onPointerDownCapture:z,onMouseDownCapture:z,onClickCapture:z}),[Ee,W,z]);return C.useMemo(()=>d?{reference:ce,floating:Q}:{},[d,ce,Q])}function RT(e){const{open:t=!1,onOpenChange:n,elements:o}=e,s=Nf(),c=C.useRef({}),[d]=C.useState(()=>gk()),f=fT()!=null,[h,m]=C.useState(o.reference),R=lt((g,p,_)=>{c.current.openEvent=g?p:void 0,d.emit("openchange",{open:g,event:p,reason:_,nested:f}),n?.(g,p,_)}),T=C.useMemo(()=>({setPositionReference:m}),[]),S=C.useMemo(()=>({reference:h||o.reference||null,floating:o.floating||null,domReference:o.reference}),[h,o.reference,o.floating]);return C.useMemo(()=>({dataRef:c,open:t,onOpenChange:R,elements:S,events:d,floatingId:s,refs:T}),[t,R,S,d,s,T])}function yU(e={}){const{nodeId:t}=e,n=RT({...e,elements:{reference:null,floating:null,...e.elements}}),o=e.rootContext||n,s=o.elements,[c,d]=C.useState(null),[f,h]=C.useState(null),R=s?.domReference||c,T=C.useRef(null),S=Cf();wt(()=>{R&&(T.current=R)},[R]);const g=IU({...e,elements:{...s,...f&&{reference:f}}}),p=C.useCallback(w=>{const y=kt(w)?{getBoundingClientRect:()=>w.getBoundingClientRect(),getClientRects:()=>w.getClientRects(),contextElement:w}:w;h(y),g.refs.setReference(y)},[g.refs]),_=C.useCallback(w=>{(kt(w)||w===null)&&(T.current=w,d(w)),(kt(g.refs.reference.current)||g.refs.reference.current===null||w!==null&&!kt(w))&&g.refs.setReference(w)},[g.refs]),O=C.useMemo(()=>({...g.refs,setReference:_,setPositionReference:p,domReference:T}),[g.refs,_,p]),D=C.useMemo(()=>({...g.elements,domReference:R}),[g.elements,R]),L=C.useMemo(()=>({...g,...o,refs:O,elements:D,nodeId:t}),[g,O,D,t,o]);return wt(()=>{o.dataRef.current.floatingContext=L;const w=S?.nodesRef.current.find(y=>y.id===t);w&&(w.context=L)}),C.useMemo(()=>({...g,context:L,refs:O,elements:D}),[g,O,D,L])}const vA=xH&&DC;function vU(e,t={}){const{open:n,onOpenChange:o,events:s,dataRef:c,elements:d}=e,{enabled:f=!0,visibleOnly:h=!0}=t,m=C.useRef(!1),R=Br(),T=C.useRef(!0);C.useEffect(()=>{if(!f)return;const g=Ba(d.domReference);function p(){!n&&Ga(d.domReference)&&d.domReference===ul(Pa(d.domReference))&&(m.current=!0)}function _(){T.current=!0}function O(){T.current=!1}return g.addEventListener("blur",p),vA&&(g.addEventListener("keydown",_,!0),g.addEventListener("pointerdown",O,!0)),()=>{g.removeEventListener("blur",p),vA&&(g.removeEventListener("keydown",_,!0),g.removeEventListener("pointerdown",O,!0))}},[d.domReference,n,f]),C.useEffect(()=>{if(!f)return;function g({reason:p}){(p==="reference-press"||p==="escape-key")&&(m.current=!0)}return s.on("openchange",g),()=>{s.off("openchange",g)}},[s,f]);const S=C.useMemo(()=>({onMouseLeave(){m.current=!1},onFocus(g){if(m.current)return;const p=Yn(g.nativeEvent);if(h&&kt(p)){if(vA&&!g.relatedTarget){if(!T.current&&!LC(p))return}else if(!GH(p))return}o(!0,g.nativeEvent,"focus")},onBlur(g){m.current=!1;const p=g.relatedTarget,_=g.nativeEvent,O=kt(p)&&p.hasAttribute(Yr("focus-guard"))&&p.getAttribute("data-type")==="outside";R.start(0,()=>{const D=ul(d.domReference?d.domReference.ownerDocument:document);!p&&D===d.domReference||Aa(c.current.floatingContext?.refs.floating.current,D)||Aa(d.domReference,D)||O||o(!1,_,"focus")})}}),[c,d.domReference,o,h,R]);return C.useMemo(()=>f?{reference:S}:{},[f,S])}function sb(e=[]){const t=e.map(f=>f?.reference),n=e.map(f=>f?.floating),o=e.map(f=>f?.item),s=C.useCallback(f=>MA(f,e,"reference"),t),c=C.useCallback(f=>MA(f,e,"floating"),n),d=C.useCallback(f=>MA(f,e,"item"),o);return C.useMemo(()=>({getReferenceProps:s,getFloatingProps:c,getItemProps:d}),[s,c,d])}function MA(e,t,n){const o=new Map,s=n==="item",c={};n==="floating"&&(c.tabIndex=-1,c[iR]="");for(const d in e)s&&e&&(d===vC||d===MC)||(c[d]=e[d]);for(let d=0;d<t.length;d+=1){let f;const h=t[d]?.[n];typeof h=="function"?f=e?h(e):null:f=h,f&&Gp(c,f,s,o)}return Gp(c,e,s,o),c}function Gp(e,t,n,o){for(const s in t){const c=t[s];n&&(s===vC||s===MC)||(s.startsWith("on")?(o.has(s)||o.set(s,[]),typeof c=="function"&&(o.get(s)?.push(c),e[s]=(...d)=>o.get(s)?.map(f=>f(...d)).find(f=>f!==void 0))):e[s]=c)}}const MU=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function LU(e,t={}){const{open:n,elements:o,floatingId:s}=e,{enabled:c=!0,role:d="dialog"}=t,f=Nf(),h=o.domReference?.id||f,m=C.useMemo(()=>oR(o.floating)?.id||s,[o.floating,s]),R=MU.get(d)??d,S=fT()!=null,g=C.useMemo(()=>R==="tooltip"||d==="label"?{[`aria-${d==="label"?"labelledby":"describedby"}`]:n?m:void 0}:{"aria-expanded":n?"true":"false","aria-haspopup":R==="alertdialog"?"dialog":R,"aria-controls":n?m:void 0,...R==="listbox"&&{role:"combobox"},...R==="menu"&&{id:h},...R==="menu"&&S&&{role:"menuitem"},...d==="select"&&{"aria-autocomplete":"none"},...d==="combobox"&&{"aria-autocomplete":"list"}},[R,m,S,n,h,d]),p=C.useMemo(()=>{const O={id:m,...R&&{role:R}};return R==="tooltip"||d==="label"?O:{...O,...R==="menu"&&{"aria-labelledby":h}}},[R,m,h,d]),_=C.useCallback(({active:O,selected:D})=>{const L={role:"option",...O&&{id:`${m}-fui-option`}};switch(d){case"select":case"combobox":return{...L,"aria-selected":D}}return{}},[m,d]);return C.useMemo(()=>c?{reference:g,floating:p,item:_}:{},[c,g,p,_])}function Bp(e,t){const[n,o]=e;let s=!1;const c=t.length;for(let d=0,f=c-1;d<c;f=d++){const[h,m]=t[d]||[0,0],[R,T]=t[f]||[0,0];m>=o!=T>=o&&n<=(R-h)*(o-m)/(T-m)+h&&(s=!s)}return s}function xU(e,t){return e[0]>=t.x&&e[0]<=t.x+t.width&&e[1]>=t.y&&e[1]<=t.y+t.height}function HU(e={}){const{buffer:t=.5,blockPointerEvents:n=!1,requireIntent:o=!0}=e,s=new _l;let c=!1,d=null,f=null,h=typeof performance<"u"?performance.now():0;function m(T,S){const g=performance.now(),p=g-h;if(d===null||f===null||p===0)return d=T,f=S,h=g,null;const _=T-d,O=S-f,L=Math.sqrt(_*_+O*O)/p;return d=T,f=S,h=g,L}const R=({x:T,y:S,placement:g,elements:p,onClose:_,nodeId:O,tree:D})=>function(w){function y(){s.clear(),_()}if(s.clear(),!p.domReference||!p.floating||g==null||T==null||S==null)return;const{clientX:x,clientY:G}=w,B=[x,G],Y=Yn(w),X=w.type==="mouseleave",ie=Aa(p.floating,Y),oe=Aa(p.domReference,Y),j=p.domReference.getBoundingClientRect(),$=p.floating.getBoundingClientRect(),Ee=g.split("-")[0],V=T>$.right-$.width/2,P=S>$.bottom-$.height/2,K=xU(B,j),ne=$.width>j.width,fe=$.height>j.height,M=(ne?j:$).left,ee=(ne?j:$).right,ce=(fe?j:$).top,W=(fe?j:$).bottom;if(ie&&(c=!0,!X))return;if(oe&&(c=!1),oe&&!X){c=!0;return}if(X&&kt(w.relatedTarget)&&Aa(p.floating,w.relatedTarget)||D&&os(D.nodesRef.current,O).some(({context:H})=>H?.open))return;if(Ee==="top"&&S>=j.bottom-1||Ee==="bottom"&&S<=j.top+1||Ee==="left"&&T>=j.right-1||Ee==="right"&&T<=j.left+1)return y();let z=[];switch(Ee){case"top":z=[[M,j.top+1],[M,$.bottom-1],[ee,$.bottom-1],[ee,j.top+1]];break;case"bottom":z=[[M,$.top+1],[M,j.bottom-1],[ee,j.bottom-1],[ee,$.top+1]];break;case"left":z=[[$.right-1,W],[$.right-1,ce],[j.left+1,ce],[j.left+1,W]];break;case"right":z=[[j.right-1,W],[j.right-1,ce],[$.left+1,ce],[$.left+1,W]];break}function Q([H,Z]){switch(Ee){case"top":{const ae=[ne?H+t/2:V?H+t*4:H-t*4,Z+t+1],he=[ne?H-t/2:V?H+t*4:H-t*4,Z+t+1],Re=[[$.left,V||ne?$.bottom-t:$.top],[$.right,V?ne?$.bottom-t:$.top:$.bottom-t]];return[ae,he,...Re]}case"bottom":{const ae=[ne?H+t/2:V?H+t*4:H-t*4,Z-t],he=[ne?H-t/2:V?H+t*4:H-t*4,Z-t],Re=[[$.left,V||ne?$.top+t:$.bottom],[$.right,V?ne?$.top+t:$.bottom:$.top+t]];return[ae,he,...Re]}case"left":{const ae=[H+t+1,fe?Z+t/2:P?Z+t*4:Z-t*4],he=[H+t+1,fe?Z-t/2:P?Z+t*4:Z-t*4];return[...[[P||fe?$.right-t:$.left,$.top],[P?fe?$.right-t:$.left:$.right-t,$.bottom]],ae,he]}case"right":{const ae=[H-t,fe?Z+t/2:P?Z+t*4:Z-t*4],he=[H-t,fe?Z-t/2:P?Z+t*4:Z-t*4],Re=[[P||fe?$.left+t:$.right,$.top],[P?fe?$.left+t:$.right:$.left+t,$.bottom]];return[ae,he,...Re]}default:return[]}}if(!Bp([x,G],z)){if(c&&!K)return y();if(!X&&o){const H=m(w.clientX,w.clientY);if(H!==null&&H<.1)return y()}Bp([x,G],Q([T,S]))?!c&&o&&s.start(40,y):y()}};return R.__options={blockPointerEvents:n},R}function rb(e,t=!1,n=!1){const[o,s]=C.useState(e&&t?"idle":void 0),[c,d]=C.useState(e);return e&&!c&&(d(!0),s("starting")),!e&&c&&o!=="ending"&&!n&&s("ending"),!e&&!c&&o==="ending"&&s(void 0),wt(()=>{if(!e&&c&&o!=="ending"&&n){const f=Ki.request(()=>{s("ending")});return()=>{Ki.cancel(f)}}},[e,c,o,n]),wt(()=>{if(!e||t)return;const f=Ki.request(()=>{Zr.flushSync(()=>{s(void 0)})});return()=>{Ki.cancel(f)}},[t,e]),wt(()=>{if(!e||!t)return;e&&c&&o!=="idle"&&s("starting");const f=Ki.request(()=>{s("idle")});return()=>{Ki.cancel(f)}},[t,e,c,s,o]),C.useMemo(()=>({mounted:c,setMounted:d,transitionStatus:o}),[c,o])}const kU=600;function cb(e){if(e)return{"focus-out":"focus-out","escape-key":"escape-key","outside-press":"outside-press","list-navigation":"list-navigation",click:"trigger-press",hover:"trigger-hover",focus:"trigger-focus","reference-press":"trigger-press","safe-polygon":"trigger-hover","ancestor-scroll":void 0}[e]}function UU(e,t=!1){const n=QC();return lt((o,s=null)=>{if(n.cancel(),e==null)return;let c;if("current"in e){if(e.current==null)return;c=e.current}else c=e;typeof c.getAnimations!="function"||globalThis.BASE_UI_ANIMATIONS_DISABLED?o():n.request(()=>{function d(){c&&Promise.allSettled(c.getAnimations().map(f=>f.finished)).then(()=>{s!=null&&s.aborted||Zr.flushSync(o)})}t?n.request(d):d()})})}function Of(e){const{enabled:t=!0,open:n,ref:o,onComplete:s}=e,c=Di(n),d=lt(s),f=UU(o,n);C.useEffect(()=>{t&&f(()=>{n===c.current&&d()})},[t,n,d,f,c])}const wU=C.createContext(void 0);function PU(){return C.useContext(wU)}function ub(e){const{disabled:t=!1,defaultOpen:n=!1,onOpenChange:o,open:s,delay:c,closeDelay:d,hoverable:f=!0,trackCursorAxis:h="none",actionsRef:m,onOpenChangeComplete:R}=e,T=c??kU,S=d??0,[g,p]=C.useState(null),[_,O]=C.useState(null),[D,L]=C.useState(),w=C.useRef(null),[y,x]=IC({controlled:s,default:n,name:"Tooltip",state:"open"}),G=!t&&y;function B(Z,ae,he){const Re=he==="trigger-hover",Ne=Z&&he==="trigger-focus",Me=!Z&&(he==="trigger-press"||he==="escape-key");function me(){o?.(Z,ae,he),x(Z)}Re?Zr.flushSync(me):me(),Ne||Me?L(Ne?"focus":"dismiss"):he==="trigger-hover"&&L(void 0)}const Y=lt(B);y&&t&&B(!1,void 0,"disabled");const{mounted:X,setMounted:ie,transitionStatus:oe}=rb(G),j=lt(()=>{ie(!1),R?.(!1)});Of({enabled:!m,open:G,ref:w,onComplete(){G||j()}}),C.useImperativeHandle(m,()=>({unmount:j}),[j]);const $=RT({elements:{reference:g,floating:_},open:G,onOpenChange(Z,ae,he){Y(Z,ae,cb(he))}}),Ee=PU(),{delayRef:V,isInstantPhase:P,hasProvider:K}=Ck($),ne=P?"delay":D,fe=pk($,{enabled:!t,mouseOnly:!0,move:!1,handleClose:f&&h!=="both"?HU():null,restMs(){const Z=Ee?.delay,ae=typeof V.current=="object"?V.current.open:void 0;let he=T;return K&&(ae!==0?he=c??Z??T:he=0),he},delay(){const Z=typeof V.current=="object"?V.current.close:void 0;let ae=S;return d==null&&K&&(ae=Z),{close:ae}}}),M=vU($,{enabled:!t}),ee=lb($,{enabled:!t,referencePress:!0}),ce=Fk($,{enabled:!t&&h!=="none",axis:h==="none"?void 0:h}),{getReferenceProps:W,getFloatingProps:z}=sb([fe,M,ee,ce]),Q=C.useMemo(()=>({open:G,setOpen:Y,mounted:X,setMounted:ie,setTriggerElement:p,positionerElement:_,setPositionerElement:O,popupRef:w,triggerProps:W(),popupProps:z(),floatingRootContext:$,instantType:ne,transitionStatus:oe,onOpenChangeComplete:R}),[G,Y,X,ie,p,_,O,w,W,z,$,ne,oe,R]),H=C.useMemo(()=>({...Q,delay:T,closeDelay:S,trackCursorAxis:h,hoverable:f}),[Q,T,S,h,f]);return l.jsx(_C.Provider,{value:H,children:e.children})}let Vh=function(e){return e.startingStyle="data-starting-style",e.endingStyle="data-ending-style",e}({});const GU={[Vh.startingStyle]:""},BU={[Vh.endingStyle]:""},TT={transitionStatus(e){return e==="starting"?GU:e==="ending"?BU:null}};let ts=function(e){return e.open="data-open",e.closed="data-closed",e[e.startingStyle=Vh.startingStyle]="startingStyle",e[e.endingStyle=Vh.endingStyle]="endingStyle",e.anchorHidden="data-anchor-hidden",e}({}),FU=function(e){return e.popupOpen="data-popup-open",e.pressed="data-pressed",e}({});const jU={[FU.popupOpen]:""},zU={[ts.open]:""},YU={[ts.closed]:""},KU={[ts.anchorHidden]:""},db={open(e){return e?jU:null}},Df={open(e){return e?zU:YU},anchorHidden(e){return e?KU:null}},VU=parseInt(C.version,10);function hb(e){return VU>=e}function fb(e,t){if(e&&!t)return e;if(!e&&t)return t;if(e||t)return{...e,...t}}function WU(e,t){const n={};for(const o in e){const s=e[o];if(t?.hasOwnProperty(o)){const c=t[o](s);c!=null&&Object.assign(n,c);continue}s===!0?n[`data-${o.toLowerCase()}`]="":s&&(n[`data-${o.toLowerCase()}`]=s.toString())}return n}function XU(e,t){return typeof e=="function"?e(t):e}const fu={};function ST(e,t,n,o,s){let c={...uR(e,fu)};return t&&(c=Eh(c,t)),n&&(c=Eh(c,n)),o&&(c=Eh(c,o)),c}function qU(e){if(e.length===0)return fu;if(e.length===1)return uR(e[0],fu);let t={...uR(e[0],fu)};for(let n=1;n<e.length;n+=1)t=Eh(t,e[n]);return t}function Eh(e,t){return Eb(t)?t(e):ZU(e,t)}function ZU(e,t){if(!t)return e;for(const n in t){const o=t[n];switch(n){case"style":{e[n]=fb(e.style,o);break}case"className":{e[n]=mb(e.className,o);break}default:QU(n,o)?e[n]=$U(e[n],o):e[n]=o}}return e}function QU(e,t){const n=e.charCodeAt(0),o=e.charCodeAt(1),s=e.charCodeAt(2);return n===111&&o===110&&s>=65&&s<=90&&(typeof t=="function"||typeof t>"u")}function Eb(e){return typeof e=="function"}function uR(e,t){return Eb(e)?e(t):e??fu}function $U(e,t){return t?e?n=>{if(JU(n)){const s=n;dR(s);const c=t(s);return s.baseUIHandlerPrevented||e?.(s),c}const o=t(n);return e?.(n),o}:t:e}function dR(e){return e.preventBaseUIHandler=()=>{e.baseUIHandlerPrevented=!0},e}function mb(e,t){return t?e?t+" "+e:t:e}function JU(e){return e!=null&&typeof e=="object"&&"nativeEvent"in e}function ao(e,t,n={}){const o=t.render,s=ew(t,n);if(n.enabled===!1)return null;const c=n.state??dl;return tw(e,o,s,c)}function ew(e,t={}){const{className:n,render:o}=e,{state:s=dl,ref:c,props:d,disableStyleHooks:f,customStyleHookMapping:h,enabled:m=!0}=t,R=m?XU(n,s):void 0;let T;f!==!0&&(T=C.useMemo(()=>m?WU(s,h):dl,[s,h,m]));const S=m?fb(T,Array.isArray(d)?qU(d):d)??dl:dl;return typeof document<"u"&&(m?Array.isArray(c)?S.ref=bk([S.ref,Fp(o),...c]):S.ref=Kr(S.ref,Fp(o),c):Kr(null,null)),m?(R!==void 0&&(S.className=mb(S.className,R)),S):dl}function tw(e,t,n,o){if(t){if(typeof t=="function")return t(n,o);const s=ST(n,t.props);return s.ref=n.ref,C.cloneElement(t,s)}if(e&&typeof e=="string")return aw(e,n);throw new Error("Base UI: Render element or function are not defined.")}function aw(e,t){return e==="button"?l.jsx("button",{type:"button",...t}):e==="img"?l.jsx("img",{alt:"",...t}):C.createElement(e,t)}function Fp(e){return e&&typeof e!="function"?hb(19)?e.props.ref:e.ref:null}const nw=C.forwardRef(function(t,n){const{className:o,render:s,...c}=t,{open:d,setTriggerElement:f,triggerProps:h}=Tf(),m=C.useMemo(()=>({open:d}),[d]);return ao("button",t,{state:m,ref:[n,f],props:[h,c],customStyleHookMapping:db})}),Ab=C.createContext(void 0);function iw(){const e=C.useContext(Ab);if(e===void 0)throw new Error("Base UI: <Tooltip.Portal> is missing.");return e}function ow(e){const t=qC({root:e.root});return t&&Zr.createPortal(e.children,t)}function Rb(e){const{children:t,keepMounted:n=!1,container:o}=e,{mounted:s}=Tf();return s||n?l.jsx(Ab.Provider,{value:n,children:l.jsx(ow,{root:o,children:t})}):null}const Tb=C.createContext(void 0);function lw(){const e=C.useContext(Tb);if(e===void 0)throw new Error("Base UI: TooltipPositionerContext is missing. TooltipPositioner parts must be placed within <Tooltip.Positioner>.");return e}function Jr(e){return e?.ownerDocument||document}const sw=C.createContext(void 0);function rw(e=!0){const t=C.useContext(sw);if(t===void 0&&!e)throw new Error("Base UI: DirectionContext is missing.");return t?.direction??"ltr"}const cw=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:o,placement:s,rects:c,platform:d,elements:f,middlewareData:h}=t,{element:m,padding:R=0,offsetParent:T="real"}=Ho(e,t)||{};if(m==null)return{};const S=xC(R),g={x:n,y:o},p=hT(s),_=dT(p),O=await d.getDimensions(m),D=p==="y",L=D?"top":"left",w=D?"bottom":"right",y=D?"clientHeight":"clientWidth",x=c.reference[_]+c.reference[p]-g[p]-c.floating[_],G=g[p]-c.reference[p],B=T==="real"?await d.getOffsetParent?.(m):f.floating;let Y=f.floating[y]||c.floating[_];(!Y||!await d.isElement?.(B))&&(Y=f.floating[y]||c.floating[_]);const X=x/2-G/2,ie=Y/2-O[_]/2-1,oe=Math.min(S[L],ie),j=Math.min(S[w],ie),$=oe,Ee=Y-O[_]-j,V=Y/2-O[_]/2+X,P=lR($,V,Ee),K=!h.arrow&&Ol(s)!=null&&V!==P&&c.reference[_]/2-(V<$?oe:j)-O[_]/2<0,ne=K?V<$?V-$:V-Ee:0;return{[p]:g[p]+ne,data:{[p]:P,centerOffset:V-P-ne,...K&&{alignmentOffset:ne}},reset:K}}}),uw=(e,t)=>({...cw(e),options:[e,t]});function Sb(e,t,n){const o=e==="inline-start"||e==="inline-end";return{top:"top",right:o?n?"inline-start":"inline-end":"right",bottom:"bottom",left:o?n?"inline-end":"inline-start":"left"}[t]}function jp(e,t,n){const{rects:o,placement:s}=e;return{side:Sb(t,mi(s),n),align:Ol(s)||"center",anchor:{width:o.reference.width,height:o.reference.height},positioner:{width:o.floating.width,height:o.floating.height}}}function dw(e){const{anchor:t,positionMethod:n="absolute",side:o="bottom",sideOffset:s=0,align:c="center",alignOffset:d=0,collisionBoundary:f,collisionPadding:h=5,sticky:m=!1,arrowPadding:R=5,trackAnchor:T=!0,keepMounted:S=!1,floatingRootContext:g,mounted:p,collisionAvoidance:_,shiftCrossAxis:O=!1,nodeId:D,adaptiveOrigin:L}=e,w=_.side||"flip",y=_.align||"flip",x=_.fallbackAxisSide||"end",G=typeof t=="function"?t:void 0,B=lt(G),Y=G?B:t,X=Di(t),oe=rw()==="rtl",j={top:"top",right:"right",bottom:"bottom",left:"left","inline-end":oe?"left":"right","inline-start":oe?"right":"left"}[o],$=c==="center"?j:`${j}-${c}`,Ee={boundary:f==="clipping-ancestors"?"clippingAncestors":f,padding:h},V=C.useRef(null),P=Di(s),K=Di(d),M=[_U(rt=>{const Kt=jp(rt,o,oe),Bt=typeof P.current=="function"?P.current(Kt):P.current,$n=typeof K.current=="function"?K.current(Kt):K.current;return{mainAxis:Bt,crossAxis:$n,alignmentAxis:$n}},[typeof s!="function"?s:0,typeof d!="function"?d:0,oe,o])],ee=y==="none"&&w!=="shift",ce=!ee&&(m||O||w==="shift"),W=w==="none"?null:CU({...Ee,mainAxis:!O&&w==="flip",crossAxis:y==="flip"?"alignment":!1,fallbackAxisSideDirection:x}),z=ee?null:pU(rt=>{const Kt=Jr(rt.elements.floating).documentElement;return{...Ee,rootBoundary:O?{x:0,y:0,width:Kt.clientWidth,height:Kt.clientHeight}:void 0,mainAxis:y!=="none",crossAxis:ce,limiter:m||O?void 0:NU(()=>{if(!V.current)return{};const{height:Bt}=V.current.getBoundingClientRect();return{offset:Bt/2+(typeof h=="number"?h:0)}})}},[Ee,m,O,h,y]);w==="shift"||y==="shift"||c==="center"?M.push(z,W):M.push(W,z),M.push(bU({...Ee,apply({elements:{floating:rt},rects:{reference:Kt},availableWidth:Bt,availableHeight:$n}){Object.entries({"--available-width":`${Bt}px`,"--available-height":`${$n}px`,"--anchor-width":`${Kt.width}px`,"--anchor-height":`${Kt.height}px`}).forEach(([Ms,oc])=>{rt.style.setProperty(Ms,oc)})}}),uw(()=>({element:V.current||document.createElement("div"),padding:R,offsetParent:"floating"}),[R]),OU(),{name:"transformOrigin",fn(rt){const{elements:Kt,middlewareData:Bt,placement:$n,rects:Ms,y:oc}=rt,Ml=mi($n),Ls=yi(Ml),Pi=V.current,xs=Bt.arrow?.x||0,Ll=Bt.arrow?.y||0,nE=Pi?.clientWidth||0,Bu=Pi?.clientHeight||0,Hs=xs+nE/2,ks=Ll+Bu/2,xl=Math.abs(Bt.shift?.y||0),iE=Ms.reference.height/2,Fu=xl>(typeof s=="function"?s(jp(rt,o,oe)):s),ju={top:`${Hs}px calc(100% + ${s}px)`,bottom:`${Hs}px ${-s}px`,left:`calc(100% + ${s}px) ${ks}px`,right:`${-s}px ${ks}px`}[Ml],lc=`${Hs}px ${Ms.reference.y+iE-oc}px`;return Kt.floating.style.setProperty("--transform-origin",ce&&Ls==="y"&&Fu?lc:ju),{}}},L);let Q=g;!p&&g&&(Q={...g,elements:{reference:null,floating:null,domReference:null}});const H=C.useMemo(()=>({elementResize:T&&typeof ResizeObserver<"u",layoutShift:T&&typeof IntersectionObserver<"u"}),[T]),{refs:Z,elements:ae,x:he,y:Re,middlewareData:Ne,update:Me,placement:me,context:Ce,isPositioned:ge,floatingStyles:_e}=yU({rootContext:Q,placement:$,middleware:M,strategy:n,whileElementsMounted:S?void 0:(...rt)=>Up(...rt,H),nodeId:D}),{sideX:De,sideY:Be}=Ne.adaptiveOrigin||{},$t=C.useMemo(()=>L?{position:n,[De]:`${he}px`,[Be]:`${Re}px`}:_e,[L,De,Be,n,he,Re,_e]),Cn=C.useRef(null);wt(()=>{if(!p)return;const rt=X.current,Kt=typeof rt=="function"?rt():rt,$n=(zp(Kt)?Kt.current:Kt)||null||null;$n!==Cn.current&&(Z.setPositionReference($n),Cn.current=$n)},[p,Z,Y,X]),C.useEffect(()=>{if(!p)return;const rt=X.current;typeof rt!="function"&&zp(rt)&&rt.current!==Cn.current&&(Z.setPositionReference(rt.current),Cn.current=rt.current)},[p,Z,Y,X]),C.useEffect(()=>{if(S&&p&&ae.domReference&&ae.floating)return Up(ae.domReference,ae.floating,Me,H)},[S,p,ae,Me,H]);const bn=mi(me),so=Sb(o,bn,oe),ro=Ol(me)||"center",ys=!!Ne.hide?.referenceHidden,vs=C.useMemo(()=>({position:"absolute",top:Ne.arrow?.y,left:Ne.arrow?.x}),[Ne.arrow]),wo=Ne.arrow?.centerOffset!==0;return C.useMemo(()=>({positionerStyles:$t,arrowStyles:vs,arrowRef:V,arrowUncentered:wo,side:so,align:ro,anchorHidden:ys,refs:Z,context:Ce,isPositioned:ge,update:Me}),[$t,vs,V,wo,so,ro,ys,Z,Ce,ge,Me])}function zp(e){return e!=null&&"current"in e}const gb=C.forwardRef(function(t,n){const{render:o,className:s,anchor:c,positionMethod:d="absolute",side:f="top",align:h="center",sideOffset:m=0,alignOffset:R=0,collisionBoundary:T="clipping-ancestors",collisionPadding:S=5,arrowPadding:g=5,sticky:p=!1,trackAnchor:_=!0,collisionAvoidance:O=Hk,...D}=t,{open:L,setPositionerElement:w,mounted:y,floatingRootContext:x,trackCursorAxis:G,hoverable:B}=Tf(),Y=iw(),X=dw({anchor:c,positionMethod:d,floatingRootContext:x,mounted:y,side:f,sideOffset:m,align:h,alignOffset:R,collisionBoundary:T,collisionPadding:S,sticky:p,arrowPadding:g,trackAnchor:_,keepMounted:Y,collisionAvoidance:O}),ie=C.useMemo(()=>{const V={};return(!L||G==="both"||!B)&&(V.pointerEvents="none"),{role:"presentation",hidden:!y,style:{...X.positionerStyles,...V}}},[L,G,B,y,X.positionerStyles]),oe=C.useMemo(()=>({props:ie,...X}),[ie,X]),j=C.useMemo(()=>({open:L,side:oe.side,align:oe.align,anchorHidden:oe.anchorHidden}),[L,oe.side,oe.align,oe.anchorHidden]),$=C.useMemo(()=>({...j,arrowRef:oe.arrowRef,arrowStyles:oe.arrowStyles,arrowUncentered:oe.arrowUncentered}),[j,oe.arrowRef,oe.arrowStyles,oe.arrowUncentered]),Ee=ao("div",t,{state:j,props:[oe.props,D],ref:[n,w],customStyleHookMapping:Df});return l.jsx(Tb.Provider,{value:$,children:Ee})}),hw={...Df,...TT},Ib=C.forwardRef(function(t,n){const{className:o,render:s,...c}=t,{open:d,instantType:f,transitionStatus:h,popupProps:m,popupRef:R,onOpenChangeComplete:T}=Tf(),{side:S,align:g}=lw();Of({open:d,ref:R,onComplete(){d&&T?.(!0)}});const p=C.useMemo(()=>({open:d,side:S,align:g,instant:f,transitionStatus:h}),[d,S,g,f,h]);return ao("div",t,{state:p,ref:[n,R],props:[m,h==="starting"?xk:dl,c],customStyleHookMapping:hw})}),LA=new Map,_b="assets/Skills/General/Missing.png",hR=e=>{if(LA.has(e))return LA.get(e);const t=`assets/Skills/${RC(e)}`;if(t){const n=new Image;return n.src=t,n.onerror=o=>{n.src=_b,console.error("failed to load skill image: "+t),n.onerror=null},n.onload=()=>ko(),LA.set(e,n),n}};function pb(e){const t=`assets/Skills/${RC(e.skillName)}`,[n,o]=C.useState(!1);return l.jsx("img",{style:e.style,src:n?_b:t,onError:s=>o(!0),alt:e.skillName})}function fw(e={diameter:50,progress:.7,color:"rgba(0, 0, 0, 0.6)"}){const t=e.diameter/2,n=Math.PI*t,o=n*(1-e.progress),s=n-o,c=o+","+s,d=l.jsx("circle",{r:t/2,cx:20,cy:21,fill:"none",stroke:e.color,strokeWidth:t,strokeDasharray:c,strokeDashoffset:n/4+o}),f=t,h=l.jsx("circle",{r:t+f/2,cx:20,cy:21,fill:"none",stroke:e.color,strokeWidth:f});return l.jsxs("svg",{width:48,height:48,style:{position:"absolute",left:"50%",marginLeft:-20,pointerEvents:"none"},children:[d,h]})}function Ew(e={diameter:50,progress:.7,color:"rgba(0, 0, 0, 0.5)"}){const t=e.diameter/2,n=2*Math.PI*t,o=n*e.progress,s=n-o,c=o+","+s,d=l.jsx("circle",{r:t,cx:20,cy:21,fill:"none",stroke:e.color,strokeWidth:2,strokeDashoffset:n/4,strokeDasharray:c});return l.jsx("svg",{width:48,height:48,style:{position:"absolute",left:"50%",marginLeft:-20,pointerEvents:"none"},children:d})}function mw(e={diameter:50,progress:.7,color:"rgba(0, 0, 0, 0.5)"}){const t=e.diameter/2,n=Math.PI*t*2,o=n*e.progress,s=n-o,c=o+","+s,d=2*Math.PI*e.progress,f="#ffffffef",h=l.jsx("circle",{r:t,cx:20,cy:21,fill:"none",stroke:f,strokeWidth:1,strokeDasharray:c,strokeDashoffset:n/4}),m=l.jsx("line",{x1:20,y1:21,x2:20,y2:21-t,stroke:f,strokeWidth:1}),R=l.jsx("line",{x1:20,y1:21,x2:20+t*Math.cos(d-Math.PI/2),y2:21+t*Math.sin(d-Math.PI/2),stroke:f,strokeWidth:1});return l.jsxs("svg",{width:48,height:48,style:{position:"absolute",left:"50%",marginLeft:-20,pointerEvents:"none"},children:[h,m,R]})}function Aw(e){const[t,n]=C.useState(l.jsx("div",{})),o=C.useContext(pa),s=()=>{const G=I.getSkillInfo({game:I.getDisplayedGame(),skillName:e.skillName}),B=En(o),Y=[];if(G.status.ready()){let j="ready ("+G.stacksAvailable,$=" ("+G.stacksAvailable;G.timeTillNextStackReady>0&&(j+=") (next stack ready in "+G.timeTillNextStackReady.toFixed(3),$+=") ("+G.timeTillNextStackReady.toFixed(3)+""),j+=")",$+=")",Y.push(N({en:j,zh:$}))}else{if(G.status.unavailableReasons.includes(mt.RequirementsNotMet)&&Y.push(is(mt.RequirementsNotMet)),G.status.unavailableReasons.includes(mt.NotEnoughMP)&&Y.push(is(mt.NotEnoughMP)+N({en:" (needs "+G.capturedManaCost+")",zh:" "+G.capturedManaCost+""})),G.status.unavailableReasons.includes(mt.Blocked)){const j=Math.max(G.timeTillNextStackReady,G.timeTillSecondaryReady??0),$=N({en:"possibly ready in "+G.timeTillAvailable.toFixed(3),zh:""+G.timeTillAvailable.toFixed(3)+""}),Ee=N({en:" (next stack ready in "+j.toFixed(3)+")",zh:""+j.toFixed(3)+"CD"});Y.push(l.jsxs(l.Fragment,{children:[$,G.stacksAvailable<G.maxStacks?Ee:void 0]}))}G.status.unavailableReasons.includes(mt.NotInCombat)&&Y.push(is(mt.NotInCombat))}const X=G.instantCast?0:G.castTime;let ie="";G.status.ready()&&(ie+=N({en:"cast: ",zh:""})+X.toFixed(3),G.llCovered&&X>Ra.epsilon&&(ie+=" (LL)"),ie+=N({en:", cast+delay: ",zh:" +"})+G.timeTillDamageApplication.toFixed(3));const oe=l.jsxs("div",{style:{color:I.displayingUpToDateGameState?B.text:B.historical},children:[l.jsx("div",{className:"paragraph",children:l.jsx("b",{children:Wn(e.skillName)})}),l.jsx("div",{className:"paragraph",children:Y.map((j,$)=>l.jsxs("span",{children:[j,l.jsx("br",{})]},$))}),l.jsx("div",{className:"paragraph",children:ie})]});n(oe)},c={width:48,height:48,verticalAlign:"top",position:"relative",display:"inline-block"},d={width:40,height:40,position:"absolute",top:2,left:"50%",marginLeft:-20};let f="transparent";e.readyAsideFromCd||(f="rgba(0, 0, 0, 0.6)");const h=I.getSkillInfo({game:I.getDisplayedGame(),skillName:e.skillName}),m=h.stacksAvailable,R=h.maxStacks;let T;const S=48,g=S/3+4;let p,_;if(m>0){p="0 0 2px rgba(255, 50, 0, 1), 0 0 3px rgba(255, 100, 0, 1), 0 0 5px rgba(255, 100, 0, 1)";const G=m===R?5:3;for(let B=0;B<G;B++)p+=", 0 0 10px black";_="white"}else p="0 0 4px black, 0 0 8px black",_="rgb(223,60,60)";R>1?T=l.jsx("div",{tabIndex:-1,style:{fontFamily:"Goldman Regular",color:_,fontSize:`${g}px`,textShadow:p,width:g,textAlign:"center",bottom:2,right:1,zIndex:3,position:"absolute"},children:m}):T=l.jsx(l.Fragment,{});const O=l.jsx(fw,{diameter:38,progress:e.cdProgress,color:e.ready?"rgba(0, 0, 0, 0)":"rgba(0, 0, 0, 0.6)"}),D=l.jsx(mw,{diameter:38,progress:e.cdProgress,color:e.ready?"rgba(0, 0, 0, 0)":"rgba(255, 255, 255, 1.0)"}),L=e.secondaryCdProgress&&l.jsx(Ew,{diameter:32,progress:e.secondaryCdProgress,color:"rgba(250,186,47,255)"}),w=l.jsx("img",{hidden:!e.highlight,src:"/misc/proc.png",alt:"skill proc",style:{position:"absolute",width:44,height:44,top:0,left:2,zIndex:2}}),y=l.jsxs("div",{onMouseEnter:s,children:[l.jsxs("div",{style:c,children:[" ",l.jsx(pb,{style:d,skillName:e.skillName}),l.jsxs("div",{style:{position:"absolute",width:40,height:41,top:1,left:"50%",marginLeft:-20,borderRadius:3,overflow:"hidden",zIndex:1,background:f},children:[e.cdProgress>1-Ra.epsilon||!e.readyAsideFromCd||O,e.cdProgress>1-Ra.epsilon||D,!e.secondaryCdProgress||e.secondaryCdProgress>1-Ra.epsilon||L]}),l.jsx("div",{style:{position:"absolute",width:S,height:S,background:"url('/misc/skillIcon_overlay.png') no-repeat"}})]}),w,T]}),x=l.jsx("span",{title:Ia[e.skillName].name,className:"skillButton",children:l.jsx(Es,{onClickFn:()=>{I.requestUseSkill({skillName:e.skillName,targetList:e.targetList},!0)},content:y})});return l.jsxs(ub,{delay:0,hoverable:!1,children:[l.jsx(nw,{render:x}),l.jsx(Rb,{container:document.getElementById("skillsWindowAnchor"),children:l.jsx(gb,{sideOffset:3,side:"top",className:"tooltip-positioner",children:l.jsx(Ib,{className:"info-tooltip tooltip",children:t})})})]})}let Nb=e=>{};function Rw(){const[e,t]=C.useState([]),[n,o]=C.useState("1"),[s,c]=C.useState("Now"),[d,f]=C.useState("0:00"),h=Array(bi).fill(!1);h[0]=!0;const[m,R]=C.useState(h),[T,S]=C.useState(0),g=()=>{const j=m.flatMap(($,Ee)=>$&&Ee!==T?[Ee+1]:[]);return j.splice(0,0,T+1),j},p=St();C.useEffect(()=>{Nb=j=>t(j)},[]);const _=j=>{!j||!j.target||o(j.target.value)},O=j=>{j.preventDefault();const $=parseFloat(n);if(!isNaN($))if(s==="Now")I.step($,!0);else if(s==="LastSkill"){const Ee=I.game.time-I.lastSkillTime,V=$-Ee;V<=0?window.alert("Invalid input: trying to jump to "+$+"s since the last action, but "+Ee+"s has already elapsed."):I.step(V,!0)}else console.assert(!1)},D=j=>{!j||!j.target||f(j.target.value)},L=j=>{j.preventDefault();const $=Vi(d);isNaN($)||($>(I.displayingUpToDateGameState?I.game.getDisplayTime():I.savedHistoricalGame.getDisplayTime())?I.stepUntil($,!0):window.alert("Can only jump to a time in the future!"))},w=j=>c(j.target.value),y=()=>I.removeTrailingIdleTime(),x=()=>I.waitTillNextMpOrLucidTick(),G=j=>{let $=m.reduce((P,K)=>K?P+1:P,0);const Ee=parseInt(j.target.value),V=m.slice();if(Ee>0&&Ee<$){for(let P=V.length-1;P>=0&&(P!==T&&V[P]&&(V[P]=!1,$--),$!==Ee);P--);R(V)}else if(Ee>$){for(let P=0;P<V.length&&(V[P]||(V[P]=!0,$++),Ee!==$);P++);R(V)}},B=e.map((j,$)=>{const Ee=j.skillName,V=j?!j.status.unavailableReasons.some(P=>P!==mt.Blocked):!1;return l.jsx(Aw,{highlight:j?j.highlight:!1,skillName:Ee,ready:j?j.status.ready():!1,readyAsideFromCd:V,cdProgress:j?1-j.timeTillNextStackReady/j.cdRecastTime:1,secondaryCdProgress:j&&j.secondaryCdRecastTime&&j.timeTillSecondaryReady?1-j.timeTillSecondaryReady/j.secondaryCdRecastTime:1,targetList:g()},$)}),Y=l.jsx(ze,{topic:"waitUntilInputFormat",content:l.jsxs("div",{children:[l.jsx("div",{className:"paragraph",children:N({en:"Examples:",zh:""})}),l.jsxs("div",{className:"paragraph",children:["12 ",l.jsx("br",{}),"1.5 ",l.jsx("br",{}),"10:04.2 ",l.jsx("br",{}),"-0:03"]})]})}),X={display:"inline-block",flex:"auto"},ie={outline:"none",border:"none",borderBottom:"1px solid "+p.text,borderRadius:0,background:"transparent",color:p.text},oe=l.jsx(ze,{topic:"targetCount",content:N({en:l.jsxs(l.Fragment,{children:[l.jsx("span",{children:"The number of targets hit by the next ability. Damage fall-off is automatically computed. If the number of targets set is more than the number of enemies the ability can hit, then the additional targets are ignored."}),l.jsx("br",{}),l.jsx("br",{}),l.jsxs("span",{children:["An ",l.jsx("span",{style:{color:p.timeline.aggroMark},children:"orange"})," star indicates which enemy is the primary target, and a"," ",l.jsx("span",{style:{color:p.accent},children:"purple"}),' checkmark indicates which enemies are additionally hit by the attack. Modifying the "# of targets" field will automatically change these boxes, and vice versa.'," "]}),l.jsx("br",{}),l.jsx("br",{}),l.jsxs("span",{children:["Exactly one primary target must be selected at all times. Clicking an un-selected enemy turns it into the primary target. When multiple enemies are selected, clicking on the primary target will demote it to a secondary target, and clicking on a secondary target will de-target it."," "]}),l.jsx("br",{}),l.jsx("br",{}),l.jsx("span",{children:"Damage calculations with party buff markers for enemy debuffs like Dokumori and Chain Stratagem may be inaccurate when multiple targets are selected."})]}),zh:l.jsxs("div",{children:[l.jsx("span",{children:"2"}),l.jsx("br",{}),l.jsx("br",{}),l.jsxs("span",{children:[l.jsx("span",{style:{color:p.timeline.aggroMark},children:""}),"",l.jsx("span",{style:{color:p.accent},children:""}),""]}),l.jsx("br",{}),l.jsx("br",{}),l.jsx("span",{children:""}),l.jsx("br",{}),l.jsx("br",{}),l.jsx("span",{children:""})]})})});return l.jsx("div",{className:"skillsWindow",id:"skillsWindowAnchor",children:l.jsxs("div",{className:"skillIcons",children:[l.jsx("style",{children:`
				.info-tooltip {
					color: ${p.text};
					background-color: ${p.tipBackground};
					opacity: 0.98;
					max-width: 300px;
					outline: 1px solid ${p.bgHighContrast};
					transition: none;
					font-size: 100%;
					z-index: 10;
				}
			`}),B,l.jsxs("div",{style:{margin:"10px 0"},children:[N({en:"# of targets hit",zh:""})," ",oe,":"," ",l.jsx("input",{type:"number",min:1,max:bi,style:{width:30,...ie},value:m.filter(j=>j).length,onChange:G}),l.jsx(gC,{style:{width:"75%",marginBlock:"5px"},selected:m,primary:T,primaryOnly:!1,onSelectedChange:R,onPrimaryChange:S}),l.jsxs("div",{style:{display:"flex",flexDirection:"row",marginBottom:6},children:[N({en:l.jsxs("form",{onSubmit:O,style:X,children:["Wait until"," ",l.jsx("input",{type:"text",style:{width:40,...ie},value:n,onChange:_})," ","second(s) since"," ",l.jsxs("select",{style:{display:"inline-block",outline:"none"},value:s,onChange:w,children:[l.jsx("option",{value:"Now",children:"now"}),l.jsx("option",{value:"LastSkill",children:"last action"})]})," ",l.jsx("input",{type:"submit",value:"GO"})]}),zh:l.jsxs("form",{onSubmit:O,style:X,children:[""," ",l.jsxs("select",{style:{display:"inline-block",outline:"none"},value:s,onChange:w,children:[l.jsx("option",{value:"Now",children:""}),l.jsx("option",{value:"LastSkill",children:""})]})," ",""," ",l.jsx("input",{type:"text",style:{width:30,...ie},value:n,onChange:_})," "," ",l.jsx("input",{type:"submit",value:"GO"})]}),ja:l.jsxs("form",{onSubmit:O,style:X,children:[l.jsxs("select",{style:{display:"inline-block",outline:"none",marginRight:"4px"},value:s,onChange:w,children:[l.jsx("option",{value:"Now",children:""}),l.jsx("option",{value:"LastSkill",children:""})]}),"",l.jsx("input",{type:"text",style:{width:30,...ie},value:n,onChange:_}),"",l.jsx("input",{type:"submit",value:"GO"})]})}),N({en:l.jsxs("form",{onSubmit:L,style:X,children:["Wait until ",Y," ",l.jsx("input",{type:"text",style:{width:60,...ie},value:d,onChange:D}),l.jsx("input",{type:"submit",value:"GO"})]}),zh:l.jsxs("form",{onSubmit:L,style:X,children:[" ",Y," ",l.jsx("input",{type:"text",style:{width:60,...ie},value:d,onChange:D}),l.jsx("input",{type:"submit",value:"GO"})]}),ja:l.jsxs("form",{onSubmit:L,style:X,children:[" ",Y," ",l.jsx("input",{type:"text",style:{width:60,...ie},value:d,onChange:D}),l.jsx("input",{type:"submit",value:"GO"})]})})]}),l.jsx("button",{onClick:x,children:N({en:"Wait until MP tick / lucid tick",zh:"/"})}),l.jsx("span",{children:" "}),l.jsx("button",{onClick:y,children:N({en:"Remove trailing idle time",zh:""})})]})]})})}let Tl=()=>{};function Tw(e){const[t,n]=C.useState("(untitled)"),o=s=>n(s);return l.jsxs("form",{children:[l.jsx(jt,{style:{display:"inline-block",marginTop:"10px"},defaultValue:t,description:N({en:"name: ",zh:""}),width:30,onChange:o}),l.jsx("span",{children:" "}),l.jsx("button",{type:"submit",disabled:!e.enabled,onClick:s=>{I.addSelectionToPreset(t),s.preventDefault()},children:N({en:"add selection to preset",zh:""})})]})}function Sw(e){const t=e.line,n=[];let o=0;const s={margin:"0 1px",width:"18px",verticalAlign:"middle"};for(const d of t.actions)if(d.info.type===ke.Skill){const f=d.info.skillName;n.push(l.jsx(pb,{style:s,skillName:f},o)),o++}const c=l.jsxs("span",{children:[t.name," (",n,")"]});return l.jsxs("div",{style:{marginBottom:"8px"},children:[l.jsx(Es,{content:c,onClickFn:()=>{const d=I.record.selectionStartIndex;I.displayingUpToDateGameState?(I.tryAddLine(t,ya.SkillSequence),I.updateAllDisplay(),I.scrollToTime()):d!==void 0&&I.undoStack.doThenPush(new DT(t.actions,d,"preset"))}}),l.jsx("span",{children:" "}),l.jsx(Es,{content:"[x]",onClickFn:()=>{I.deleteLine(t)}})]})}function gw(){const e=C.useContext(pa),[,t]=C.useReducer(c=>c+1,0);C.useEffect(()=>(Tl=()=>t(),()=>{Tl=()=>{}}),[]);const n=I.record.getFirstSelection()!==void 0,o=Il(e,"bgMediumContrast"),s=l.jsxs("div",{children:[l.jsx("button",{style:{marginBottom:10},onClick:()=>{I.deleteAllLines()},children:N({en:"clear all presets",zh:""})}),l.jsx(qh,{allowLoadFromUrl:!1,defaultLoadUrl:"https://miyehn.me/ffxiv-blm-rotation/presets/lines/default.txt",onLoadFn:c=>{c.fileType===di.SkillSequencePresets?I.appendFilePresets(c):window.alert("incorrect file type '"+c.fileType+"'")}}),l.jsxs("div",{style:{outline:"1px solid "+o,margin:"10px 0",padding:"10px"},children:[I.getPresetLines().map((c,d)=>l.jsx(Sw,{line:c},d)),l.jsx(Tw,{enabled:n}),l.jsx("div",{style:{marginTop:16},children:l.jsx(Sl,{fileFormat:Mo.Json,getContentFn:()=>I.serializedPresets(),filename:"presets",displayName:N({en:"download presets to file",zh:""})})})]})]});return l.jsx(gl,{title:N({en:"Skill sequence presets",zh:""}),content:s,defaultShow:!1})}const Oi=4;var ot=(e=>(e.s_Cursor="s_Cursor",e.s_HistoricalCursor="s_HistoricalCursor",e.DamageMark="DamageMark",e.HealingMark="HealingMark",e.AggroMark="AggroMark",e.LucidMark="LucidMark",e.MPTickMark="MPTickMark",e.MeditateTickMark="MeditateTickMark",e.AutoTickMark="AutoTickMark",e.Skill="Skill",e.Marker="Marker",e.WarningMark="WarningMark",e.Buff="Buff",e))(ot||{});const qi=-1;var Za=(e=>(e.Info="Info",e.Untargetable="Untargetable",e.Buff="Buff",e))(Za||{});function Iw(e){return e.type==="s_Cursor"||e.type==="s_HistoricalCursor"}let _w=class{scale;startTime;elapsedTime;sharedElements;slots;activeSlotIndex;#e;#t;#a;constructor(){this.scale=.25,this.startTime=0,this.elapsedTime=0,this.sharedElements=[],this.slots=[],this.activeSlotIndex=-1,this.#e=[],this.#t=[],this.#a=[],this.#u()}setTimeSegment(t,n){this.startTime=t,this.elapsedTime=n}addElement(t){Iw(t)?this.sharedElements.push(t):(console.assert(this.slots.length>0),this.slots[this.activeSlotIndex].elements.push(t))}invalidateLastElement(){if(this.slots.length>0){const t=this.slots[this.activeSlotIndex].elements;for(let n=t.length-1;n>=0;n--){const o=t[n];if(o.type==="Skill"){o.node.tmp_invalid_reasons=[mt.CastCanceled];return}}}}tryGetElement(t,n){return this.slots[this.activeSlotIndex].elements.find(o=>o.time===t&&o.type===n)}getAllMarkers(){return this.#e}getUntargetableMarkers(){return this.#t}getBuffMarkers(){return this.#a}#n(t,n){const o=function(s,c){return Math.abs(s-c)<Ra.epsilon};return!(t.markerType!==n.markerType||!o(t.time,n.time)||!o(t.duration,n.duration)||t.color!==n.color||t.track!==n.track||t.showText!==n.showText||t.description!==n.description)}addMarker(t){this.#e.push(t),t.markerType==="Untargetable"?this.#t.push(t):t.markerType==="Buff"&&this.#a.push(t),this.drawElements(),this.#r()}deleteMarker(t){let n=!1;for(let o=0;o<this.#e.length;o++)t===this.#e[o]&&(this.#e.splice(o,1),this.drawElements(),this.#r(),n=!0);return this.#i(),this.#c(),n}#i(){this.#t=[],this.#e.forEach(t=>{t.markerType==="Untargetable"&&this.#t.push(t)}),va()}#c(){this.#a=[],this.#e.forEach(t=>{t.markerType==="Buff"&&(t.description==="Wanderer's Minuet"&&(t.description=k.WanderersMinuet),this.#a.push(t))})}sortAndRemoveDuplicateMarkers(){this.#e.sort((n,o)=>n.time-o.time);let t=0;for(let n=this.#e.length-1;n>0;n--)this.#n(this.#e[n],this.#e[n-1])&&(this.#e.splice(n,1),t++);return this.#i(),this.#c(),this.#r(),t}#s(t,n,o,s){let c=t.markers.map(d=>({time:d.time+o,duration:d.duration,color:d.color,description:d.description,track:d.markerType==="Untargetable"?qi:n,type:"Marker",markerType:d.markerType??"Info",showText:d.showText??!1}));s!==void 0&&(c=c.filter(d=>s===void 0||d.time<=s+Ra.epsilon)),this.#e=this.#e.concat(c),this.#i(),this.#c(),this.#r()}loadCombinedTracksPreset(t,n,o){if(t.fileType!==di.MarkerTracksCombined){window.alert("wrong file type '"+t.fileType+"'");return}t.tracks.forEach(s=>{this.loadIndividualTrackPreset(s,s.track,n,o)})}loadIndividualTrackPreset(t,n,o,s){if(t.fileType!==di.MarkerTrackIndividual){window.alert("wrong file type '"+t.fileType+"'");return}this.#s(t,n,o,s)}deleteAllMarkers(){const t=this.#t.length>0;this.#e=[],this.#t=[],this.#a=[],this.drawElements(),t&&va(),this.#r()}addSlotAtIndex(t){if(t<0||t>this.slots.length||this.slots.length+1>Oi){console.error("attempted to add slot at invalid index",t);return}for(let n=Oi-1;n>=t;n--){let o=Tt(`gameRecord${n}`);o!==null&&gt(`gameRecord${n+1}`,o),o=Tt(`gameTimeInfo${n}`),o!==null&&gt(`gameTimeInfo${n+1}`,o)}this.slots.splice(t,0,{job:"BLM",elements:[]}),this.activeSlotIndex=t,I.setConfigAndRestart(I.gameConfig)}addSlot(){this.addSlotAtIndex(this.slots.length)}removeSlot(t){console.assert(t<this.slots.length);for(let n=t;n<Oi;n++){let o=Tt("gameRecord"+(n+1).toString());o!==null&&gt("gameRecord"+n.toString(),o),o=Tt("gameTimeInfo"+(n+1).toString()),o!==null&&gt("gameTimeInfo"+n.toString(),o)}this.slots.splice(t,1);for(let n=this.slots.length;n<Oi;n++)$A("gameRecord"+n.toString()),$A("gameTimeInfo"+n.toString());this.activeSlotIndex>=t&&(this.activeSlotIndex=Math.max(0,this.activeSlotIndex-1)),this.loadSlot(this.activeSlotIndex),gt("activeSlotIndex",this.activeSlotIndex.toString())}saveCurrentSlot(t,n,o){gt("gameRecord"+this.activeSlotIndex.toString(),JSON.stringify(t)),gt("gameTimeInfo"+this.activeSlotIndex.toString(),JSON.stringify({countdown:n,elapsedTime:o})),I.gameConfig.savePartialConfig()}loadSlot(t){const n=Tt("gameRecord"+t.toString());if(n!==null){for(this.activeSlotIndex=t;this.slots.length<=t;)this.slots.push({job:"BLM",elements:[]});const o=JSON.parse(n);return I.loadBattleRecordFromFile(o),this.slots[t].job=I.game.job,!0}else return!1}reset(){this.startTime=0,this.elapsedTime=0,this.slots.length>0&&(this.slots[this.activeSlotIndex].elements=[]),this.sharedElements=[],this.addElement({type:"s_Cursor",time:0,displayTime:0}),this.addElement({type:"s_HistoricalCursor",time:0,displayTime:0,enabled:!1})}updateElem(t){console.assert(t&&t.type.substring(0,2)==="s_");for(let n=0;n<this.sharedElements.length;n++)if(this.sharedElements[n].type===t.type){this.sharedElements[n]=t;return}console.assert(!1)}setHorizontalScale(t){this.scale=t,this.drawElements()}getAllSlotsTimeInfo(){let t=0,n=0,o=!1;for(let s=0;s<Oi;s++){const c=Tt("gameTimeInfo"+s.toString());if(c!==null){const d=JSON.parse(c);t=Math.max(t,d.countdown),n=Math.max(n,d.elapsedTime),o=!0}}return o?{countdown:t,rightMostTime:n}:null}getCanvasWidth(){let t=Math.max(0,this.elapsedTime),n=I.gameConfig.countdown;const o=this.getAllSlotsTimeInfo();return o!==null&&(n=Math.max(n,o.countdown),t=Math.max(t,o.rightMostTime)),this.#e.forEach(c=>{const d=c.time+c.duration;t=Math.max(t,d+n)}),Math.ceil((t+Math.max(0,n)+4)/8)*8*100*this.scale}getCanvasHeight(){const t=this.getNumMarkerTracks();return pe.timelineCanvasHeight(t,this.slots.length)}positionFromTime(t){return t*this.scale*100}timeFromPosition(t){return t/(this.scale*100)}drawElements(){ko(),this.updateTimelineMarkers()}getTrackIndices(){return Array.from(new Set(this.#e.map(t=>t.track))).sort()}updateTimelineMarkers(){ko()}onClickTimelineAction(t,n){if(t<0||t>=I.record.length)return;I.record.onClickNode(t,n),Tl(),Su();const o=I.record.selectionStartIndex;o!==void 0?I.displayHistoricalState(-1/0,o):I.displayHistoricalState(-1/0,t)}resizeSelection(t){const n=I.record.selectionStartIndex,o=I.record.selectionEndIndex;if(n!==void 0&&o!==void 0){const s=(I.record.startIsPivot?o:n)+(t?-1:1);s>=0&&s<I.record.length&&this.onClickTimelineAction(s,!0)}}getNumMarkerTracks(){let t=-1,n=!1;for(let o=0;o<this.#e.length;o++)t=Math.max(t,this.#e[o].track),this.#e[o].track===qi&&(n=!0);return n?t+2:t+1}duringUntargetable(t){for(let n=0;n<this.#t.length;n++){const o=this.#t[n],s=o.time,c=o.time+o.duration;if(t>=s&&t<c)return!0}return!1}getTargetableDurationBetween(t,n){const o=function([d,f],[h,m]){const R=[];return d<h&&R.push([d,Math.min(f,h)]),m<f&&R.push([Math.max(m,d),f]),R};let s=[[t,n]];for(let d=0;d<this.#t.length;d++){const f=this.#t[d],h=f.time,m=f.time+f.duration;let R=[];s.forEach(T=>{R=R.concat(o(T,[h,m]))}),s=R}let c=0;return s.forEach(d=>{c+=d[1]-d[0]}),c}#r(){const t=this.serializedSeparateMarkerTracks();gt("timelineMarkers",JSON.stringify(t))}#u(){const t=Tt("timelineMarkers");t!==null&&JSON.parse(t).forEach(o=>{this.#s(o,o.track,0)})}serializedSeparateMarkerTracks(){const t=this.getNumMarkerTracks()-1,n=new Map;for(let s=qi;s<t+1;s++)n.set(s,[]);this.#e.forEach(s=>{const c=n.get(s.track);console.assert(c),c&&(c.push({time:s.time,markerType:s.markerType,duration:s.duration,description:s.description,color:s.color,showText:s.showText}),n.set(s.track,c))});const o=[];return n.forEach((s,c)=>{s.length>0&&o.push({fileType:di.MarkerTrackIndividual,track:c,markers:s})}),o}serializedCombinedMarkerTracks(){const t=this.serializedSeparateMarkerTracks();return{fileType:di.MarkerTracksCombined,tracks:t}}};function pw(e){return Ai({attr:{viewBox:"0 0 32 32"},child:[{tag:"path",attr:{d:"M 5 5 L 5 27 L 27 27 L 27 5 Z M 7 7 L 25 7 L 25 25 L 7 25 Z M 9 20 L 9 22 L 23 22 L 23 20 Z"},child:[]}]})(e)}const yf=C.createContext(null);yf.displayName="PanelGroupContext";const aa={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},gT=10,ls=C.useLayoutEffect,Yp=xR.useId,Nw=typeof Yp=="function"?Yp:()=>null;let Cw=0;function IT(e=null){const t=Nw(),n=C.useRef(e||t||null);return n.current===null&&(n.current=""+Cw++),e??n.current}function Cb({children:e,className:t="",collapsedSize:n,collapsible:o,defaultSize:s,forwardedRef:c,id:d,maxSize:f,minSize:h,onCollapse:m,onExpand:R,onResize:T,order:S,style:g,tagName:p="div",..._}){const O=C.useContext(yf);if(O===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:D,expandPanel:L,getPanelSize:w,getPanelStyle:y,groupId:x,isPanelCollapsed:G,reevaluatePanelConstraints:B,registerPanel:Y,resizePanel:X,unregisterPanel:ie}=O,oe=IT(d),j=C.useRef({callbacks:{onCollapse:m,onExpand:R,onResize:T},constraints:{collapsedSize:n,collapsible:o,defaultSize:s,maxSize:f,minSize:h},id:oe,idIsFromProps:d!==void 0,order:S});C.useRef({didLogMissingDefaultSizeWarning:!1}),ls(()=>{const{callbacks:Ee,constraints:V}=j.current,P={...V};j.current.id=oe,j.current.idIsFromProps=d!==void 0,j.current.order=S,Ee.onCollapse=m,Ee.onExpand=R,Ee.onResize=T,V.collapsedSize=n,V.collapsible=o,V.defaultSize=s,V.maxSize=f,V.minSize=h,(P.collapsedSize!==V.collapsedSize||P.collapsible!==V.collapsible||P.maxSize!==V.maxSize||P.minSize!==V.minSize)&&B(j.current,P)}),ls(()=>{const Ee=j.current;return Y(Ee),()=>{ie(Ee)}},[S,oe,Y,ie]),C.useImperativeHandle(c,()=>({collapse:()=>{D(j.current)},expand:Ee=>{L(j.current,Ee)},getId(){return oe},getSize(){return w(j.current)},isCollapsed(){return G(j.current)},isExpanded(){return!G(j.current)},resize:Ee=>{X(j.current,Ee)}}),[D,L,w,G,oe,X]);const $=y(j.current,s);return C.createElement(p,{..._,children:e,className:t,id:oe,style:{...$,...g},[aa.groupId]:x,[aa.panel]:"",[aa.panelCollapsible]:o||void 0,[aa.panelId]:oe,[aa.panelSize]:parseFloat(""+$.flexGrow).toFixed(1)})}const bb=C.forwardRef((e,t)=>C.createElement(Cb,{...e,forwardedRef:t}));Cb.displayName="Panel";bb.displayName="forwardRef(Panel)";let fR=null,mh=-1,hl=null;function bw(e,t){if(t){const n=(t&Mb)!==0,o=(t&Lb)!==0,s=(t&xb)!==0,c=(t&Hb)!==0;if(n)return s?"se-resize":c?"ne-resize":"e-resize";if(o)return s?"sw-resize":c?"nw-resize":"w-resize";if(s)return"s-resize";if(c)return"n-resize"}switch(e){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function Ow(){hl!==null&&(document.head.removeChild(hl),fR=null,hl=null,mh=-1)}function xA(e,t){var n,o;const s=bw(e,t);if(fR!==s){if(fR=s,hl===null&&(hl=document.createElement("style"),document.head.appendChild(hl)),mh>=0){var c;(c=hl.sheet)===null||c===void 0||c.removeRule(mh)}mh=(n=(o=hl.sheet)===null||o===void 0?void 0:o.insertRule(`*{cursor: ${s} !important;}`))!==null&&n!==void 0?n:-1}}function Ob(e){return e.type==="keydown"}function Db(e){return e.type.startsWith("pointer")}function yb(e){return e.type.startsWith("mouse")}function vf(e){if(Db(e)){if(e.isPrimary)return{x:e.clientX,y:e.clientY}}else if(yb(e))return{x:e.clientX,y:e.clientY};return{x:1/0,y:1/0}}function Dw(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function yw(e,t,n){return e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y}function vw(e,t){if(e===t)throw new Error("Cannot compare node with itself");const n={a:Wp(e),b:Wp(t)};let o;for(;n.a.at(-1)===n.b.at(-1);)e=n.a.pop(),t=n.b.pop(),o=e;qe(o,"Stacking order can only be calculated for elements with a common ancestor");const s={a:Vp(Kp(n.a)),b:Vp(Kp(n.b))};if(s.a===s.b){const c=o.childNodes,d={a:n.a.at(-1),b:n.b.at(-1)};let f=c.length;for(;f--;){const h=c[f];if(h===d.a)return 1;if(h===d.b)return-1}}return Math.sign(s.a-s.b)}const Mw=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function Lw(e){var t;const n=getComputedStyle((t=vb(e))!==null&&t!==void 0?t:e).display;return n==="flex"||n==="inline-flex"}function xw(e){const t=getComputedStyle(e);return!!(t.position==="fixed"||t.zIndex!=="auto"&&(t.position!=="static"||Lw(e))||+t.opacity<1||"transform"in t&&t.transform!=="none"||"webkitTransform"in t&&t.webkitTransform!=="none"||"mixBlendMode"in t&&t.mixBlendMode!=="normal"||"filter"in t&&t.filter!=="none"||"webkitFilter"in t&&t.webkitFilter!=="none"||"isolation"in t&&t.isolation==="isolate"||Mw.test(t.willChange)||t.webkitOverflowScrolling==="touch")}function Kp(e){let t=e.length;for(;t--;){const n=e[t];if(qe(n,"Missing node"),xw(n))return n}return null}function Vp(e){return e&&Number(getComputedStyle(e).zIndex)||0}function Wp(e){const t=[];for(;e;)t.push(e),e=vb(e);return t}function vb(e){const{parentNode:t}=e;return t&&t instanceof ShadowRoot?t.host:t}const Mb=1,Lb=2,xb=4,Hb=8,Hw=Dw()==="coarse";let vi=[],xr=!1,Jl=new Map,Mf=new Map;const Ru=new Set;function kw(e,t,n,o,s){var c;const{ownerDocument:d}=t,f={direction:n,element:t,hitAreaMargins:o,setResizeHandlerState:s},h=(c=Jl.get(d))!==null&&c!==void 0?c:0;return Jl.set(d,h+1),Ru.add(f),Wh(),function(){var R;Mf.delete(e),Ru.delete(f);const T=(R=Jl.get(d))!==null&&R!==void 0?R:1;if(Jl.set(d,T-1),Wh(),T===1&&Jl.delete(d),vi.includes(f)){const S=vi.indexOf(f);S>=0&&vi.splice(S,1),pT(),s("up",!0,null)}}}function Uw(e){const{target:t}=e,{x:n,y:o}=vf(e);xr=!0,_T({target:t,x:n,y:o}),Wh(),vi.length>0&&(Xh("down",e),e.preventDefault(),kb(t)||e.stopImmediatePropagation())}function HA(e){const{x:t,y:n}=vf(e);if(xr&&e.buttons===0&&(xr=!1,Xh("up",e)),!xr){const{target:o}=e;_T({target:o,x:t,y:n})}Xh("move",e),pT(),vi.length>0&&e.preventDefault()}function kA(e){const{target:t}=e,{x:n,y:o}=vf(e);Mf.clear(),xr=!1,vi.length>0&&(e.preventDefault(),kb(t)||e.stopImmediatePropagation()),Xh("up",e),_T({target:t,x:n,y:o}),pT(),Wh()}function kb(e){let t=e;for(;t;){if(t.hasAttribute(aa.resizeHandle))return!0;t=t.parentElement}return!1}function _T({target:e,x:t,y:n}){vi.splice(0);let o=null;(e instanceof HTMLElement||e instanceof SVGElement)&&(o=e),Ru.forEach(s=>{const{element:c,hitAreaMargins:d}=s,f=c.getBoundingClientRect(),{bottom:h,left:m,right:R,top:T}=f,S=Hw?d.coarse:d.fine;if(t>=m-S&&t<=R+S&&n>=T-S&&n<=h+S){if(o!==null&&document.contains(o)&&c!==o&&!c.contains(o)&&!o.contains(c)&&vw(o,c)>0){let p=o,_=!1;for(;p&&!p.contains(c);){if(yw(p.getBoundingClientRect(),f)){_=!0;break}p=p.parentElement}if(_)return}vi.push(s)}})}function UA(e,t){Mf.set(e,t)}function pT(){let e=!1,t=!1;vi.forEach(o=>{const{direction:s}=o;s==="horizontal"?e=!0:t=!0});let n=0;Mf.forEach(o=>{n|=o}),e&&t?xA("intersection",n):e?xA("horizontal",n):t?xA("vertical",n):Ow()}let wA=new AbortController;function Wh(){wA.abort(),wA=new AbortController;const e={capture:!0,signal:wA.signal};Ru.size&&(xr?(vi.length>0&&Jl.forEach((t,n)=>{const{body:o}=n;t>0&&(o.addEventListener("contextmenu",kA,e),o.addEventListener("pointerleave",HA,e),o.addEventListener("pointermove",HA,e))}),window.addEventListener("pointerup",kA,e),window.addEventListener("pointercancel",kA,e)):Jl.forEach((t,n)=>{const{body:o}=n;t>0&&(o.addEventListener("pointerdown",Uw,e),o.addEventListener("pointermove",HA,e))}))}function Xh(e,t){Ru.forEach(n=>{const{setResizeHandlerState:o}=n,s=vi.includes(n);o(e,s,t)})}function ww(){const[e,t]=C.useState(0);return C.useCallback(()=>t(n=>n+1),[])}function qe(e,t){if(!e)throw console.error(t),Error(t)}function fs(e,t,n=gT){return e.toFixed(n)===t.toFixed(n)?0:e>t?1:-1}function Oo(e,t,n=gT){return fs(e,t,n)===0}function zn(e,t,n){return fs(e,t,n)===0}function Pw(e,t,n){if(e.length!==t.length)return!1;for(let o=0;o<e.length;o++){const s=e[o],c=t[o];if(!zn(s,c,n))return!1}return!0}function br({panelConstraints:e,panelIndex:t,size:n}){const o=e[t];qe(o!=null,`Panel constraints not found for index ${t}`);let{collapsedSize:s=0,collapsible:c,maxSize:d=100,minSize:f=0}=o;if(fs(n,f)<0)if(c){const h=(s+f)/2;fs(n,h)<0?n=s:n=f}else n=f;return n=Math.min(d,n),n=parseFloat(n.toFixed(gT)),n}function ou({delta:e,initialLayout:t,panelConstraints:n,pivotIndices:o,prevLayout:s,trigger:c}){if(zn(e,0))return t;const d=[...t],[f,h]=o;qe(f!=null,"Invalid first pivot index"),qe(h!=null,"Invalid second pivot index");let m=0;if(c==="keyboard"){{const T=e<0?h:f,S=n[T];qe(S,`Panel constraints not found for index ${T}`);const{collapsedSize:g=0,collapsible:p,minSize:_=0}=S;if(p){const O=t[T];if(qe(O!=null,`Previous layout not found for panel index ${T}`),zn(O,g)){const D=_-O;fs(D,Math.abs(e))>0&&(e=e<0?0-D:D)}}}{const T=e<0?f:h,S=n[T];qe(S,`No panel constraints found for index ${T}`);const{collapsedSize:g=0,collapsible:p,minSize:_=0}=S;if(p){const O=t[T];if(qe(O!=null,`Previous layout not found for panel index ${T}`),zn(O,_)){const D=O-g;fs(D,Math.abs(e))>0&&(e=e<0?0-D:D)}}}}{const T=e<0?1:-1;let S=e<0?h:f,g=0;for(;;){const _=t[S];qe(_!=null,`Previous layout not found for panel index ${S}`);const D=br({panelConstraints:n,panelIndex:S,size:100})-_;if(g+=D,S+=T,S<0||S>=n.length)break}const p=Math.min(Math.abs(e),Math.abs(g));e=e<0?0-p:p}{let S=e<0?f:h;for(;S>=0&&S<n.length;){const g=Math.abs(e)-Math.abs(m),p=t[S];qe(p!=null,`Previous layout not found for panel index ${S}`);const _=p-g,O=br({panelConstraints:n,panelIndex:S,size:_});if(!zn(p,O)&&(m+=p-O,d[S]=O,m.toPrecision(3).localeCompare(Math.abs(e).toPrecision(3),void 0,{numeric:!0})>=0))break;e<0?S--:S++}}if(Pw(s,d))return s;{const T=e<0?h:f,S=t[T];qe(S!=null,`Previous layout not found for panel index ${T}`);const g=S+m,p=br({panelConstraints:n,panelIndex:T,size:g});if(d[T]=p,!zn(p,g)){let _=g-p,D=e<0?h:f;for(;D>=0&&D<n.length;){const L=d[D];qe(L!=null,`Previous layout not found for panel index ${D}`);const w=L+_,y=br({panelConstraints:n,panelIndex:D,size:w});if(zn(L,y)||(_-=y-L,d[D]=y),zn(_,0))break;e>0?D--:D++}}}const R=d.reduce((T,S)=>S+T,0);return zn(R,100)?d:s}function Gw({layout:e,panelsArray:t,pivotIndices:n}){let o=0,s=100,c=0,d=0;const f=n[0];qe(f!=null,"No pivot index found"),t.forEach((T,S)=>{const{constraints:g}=T,{maxSize:p=100,minSize:_=0}=g;S===f?(o=_,s=p):(c+=_,d+=p)});const h=Math.min(s,100-c),m=Math.max(o,100-d),R=e[f];return{valueMax:h,valueMin:m,valueNow:R}}function Tu(e,t=document){return Array.from(t.querySelectorAll(`[${aa.resizeHandleId}][data-panel-group-id="${e}"]`))}function Ub(e,t,n=document){const s=Tu(e,n).findIndex(c=>c.getAttribute(aa.resizeHandleId)===t);return s??null}function wb(e,t,n){const o=Ub(e,t,n);return o!=null?[o,o+1]:[-1,-1]}function Pb(e,t=document){var n;if(t instanceof HTMLElement&&(t==null||(n=t.dataset)===null||n===void 0?void 0:n.panelGroupId)==e)return t;const o=t.querySelector(`[data-panel-group][data-panel-group-id="${e}"]`);return o||null}function Lf(e,t=document){const n=t.querySelector(`[${aa.resizeHandleId}="${e}"]`);return n||null}function Bw(e,t,n,o=document){var s,c,d,f;const h=Lf(t,o),m=Tu(e,o),R=h?m.indexOf(h):-1,T=(s=(c=n[R])===null||c===void 0?void 0:c.id)!==null&&s!==void 0?s:null,S=(d=(f=n[R+1])===null||f===void 0?void 0:f.id)!==null&&d!==void 0?d:null;return[T,S]}function Fw({committedValuesRef:e,eagerValuesRef:t,groupId:n,layout:o,panelDataArray:s,panelGroupElement:c,setLayout:d}){C.useRef({didWarnAboutMissingResizeHandle:!1}),ls(()=>{if(!c)return;const f=Tu(n,c);for(let h=0;h<s.length-1;h++){const{valueMax:m,valueMin:R,valueNow:T}=Gw({layout:o,panelsArray:s,pivotIndices:[h,h+1]}),S=f[h];if(S!=null){const g=s[h];qe(g,`No panel data found for index "${h}"`),S.setAttribute("aria-controls",g.id),S.setAttribute("aria-valuemax",""+Math.round(m)),S.setAttribute("aria-valuemin",""+Math.round(R)),S.setAttribute("aria-valuenow",T!=null?""+Math.round(T):"")}}return()=>{f.forEach((h,m)=>{h.removeAttribute("aria-controls"),h.removeAttribute("aria-valuemax"),h.removeAttribute("aria-valuemin"),h.removeAttribute("aria-valuenow")})}},[n,o,s,c]),C.useEffect(()=>{if(!c)return;const f=t.current;qe(f,"Eager values not found");const{panelDataArray:h}=f,m=Pb(n,c);qe(m!=null,`No group found for id "${n}"`);const R=Tu(n,c);qe(R,`No resize handles found for group id "${n}"`);const T=R.map(S=>{const g=S.getAttribute(aa.resizeHandleId);qe(g,"Resize handle element has no handle id attribute");const[p,_]=Bw(n,g,h,c);if(p==null||_==null)return()=>{};const O=D=>{if(!D.defaultPrevented)switch(D.key){case"Enter":{D.preventDefault();const L=h.findIndex(w=>w.id===p);if(L>=0){const w=h[L];qe(w,`No panel data found for index ${L}`);const y=o[L],{collapsedSize:x=0,collapsible:G,minSize:B=0}=w.constraints;if(y!=null&&G){const Y=ou({delta:zn(y,x)?B-x:x-y,initialLayout:o,panelConstraints:h.map(X=>X.constraints),pivotIndices:wb(n,g,c),prevLayout:o,trigger:"keyboard"});o!==Y&&d(Y)}}break}}};return S.addEventListener("keydown",O),()=>{S.removeEventListener("keydown",O)}});return()=>{T.forEach(S=>S())}},[c,e,t,n,o,s,d])}function Xp(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Gb(e,t){const n=e==="horizontal",{x:o,y:s}=vf(t);return n?o:s}function jw(e,t,n,o,s){const c=n==="horizontal",d=Lf(t,s);qe(d,`No resize handle element found for id "${t}"`);const f=d.getAttribute(aa.groupId);qe(f,"Resize handle element has no group id attribute");let{initialCursorPosition:h}=o;const m=Gb(n,e),R=Pb(f,s);qe(R,`No group element found for id "${f}"`);const T=R.getBoundingClientRect(),S=c?T.width:T.height;return(m-h)/S*100}function zw(e,t,n,o,s,c){if(Ob(e)){const d=n==="horizontal";let f=0;e.shiftKey?f=100:s!=null?f=s:f=10;let h=0;switch(e.key){case"ArrowDown":h=d?0:f;break;case"ArrowLeft":h=d?-f:0;break;case"ArrowRight":h=d?f:0;break;case"ArrowUp":h=d?0:-f;break;case"End":h=100;break;case"Home":h=-100;break}return h}else return o==null?0:jw(e,t,n,o,c)}function Yw({panelDataArray:e}){const t=Array(e.length),n=e.map(c=>c.constraints);let o=0,s=100;for(let c=0;c<e.length;c++){const d=n[c];qe(d,`Panel constraints not found for index ${c}`);const{defaultSize:f}=d;f!=null&&(o++,t[c]=f,s-=f)}for(let c=0;c<e.length;c++){const d=n[c];qe(d,`Panel constraints not found for index ${c}`);const{defaultSize:f}=d;if(f!=null)continue;const h=e.length-o,m=s/h;o++,t[c]=m,s-=m}return t}function Ir(e,t,n){t.forEach((o,s)=>{const c=e[s];qe(c,`Panel data not found for index ${s}`);const{callbacks:d,constraints:f,id:h}=c,{collapsedSize:m=0,collapsible:R}=f,T=n[h];if(T==null||o!==T){n[h]=o;const{onCollapse:S,onExpand:g,onResize:p}=d;p&&p(o,T),R&&(S||g)&&(g&&(T==null||Oo(T,m))&&!Oo(o,m)&&g(),S&&(T==null||!Oo(T,m))&&Oo(o,m)&&S())}})}function oh(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function Kw({defaultSize:e,dragState:t,layout:n,panelData:o,panelIndex:s,precision:c=3}){const d=n[s];let f;return d==null?f=e!=null?e.toPrecision(c):"1":o.length===1?f="1":f=d.toPrecision(c),{flexBasis:0,flexGrow:f,flexShrink:1,overflow:"hidden",pointerEvents:t!==null?"none":void 0}}function Vw(e,t=10){let n=null;return(...s)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{e(...s)},t)}}function qp(e){try{if(typeof localStorage<"u")e.getItem=t=>localStorage.getItem(t),e.setItem=(t,n)=>{localStorage.setItem(t,n)};else throw new Error("localStorage not supported in this environment")}catch(t){console.error(t),e.getItem=()=>null,e.setItem=()=>{}}}function Bb(e){return`react-resizable-panels:${e}`}function Fb(e){return e.map(t=>{const{constraints:n,id:o,idIsFromProps:s,order:c}=t;return s?o:c?`${c}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((t,n)=>t.localeCompare(n)).join(",")}function jb(e,t){try{const n=Bb(e),o=t.getItem(n);if(o){const s=JSON.parse(o);if(typeof s=="object"&&s!=null)return s}}catch{}return null}function Ww(e,t,n){var o,s;const c=(o=jb(e,n))!==null&&o!==void 0?o:{},d=Fb(t);return(s=c[d])!==null&&s!==void 0?s:null}function Xw(e,t,n,o,s){var c;const d=Bb(e),f=Fb(t),h=(c=jb(e,s))!==null&&c!==void 0?c:{};h[f]={expandToSizes:Object.fromEntries(n.entries()),layout:o};try{s.setItem(d,JSON.stringify(h))}catch(m){console.error(m)}}function Zp({layout:e,panelConstraints:t}){const n=[...e],o=n.reduce((c,d)=>c+d,0);if(n.length!==t.length)throw Error(`Invalid ${t.length} panel layout: ${n.map(c=>`${c}%`).join(", ")}`);if(!zn(o,100)&&n.length>0)for(let c=0;c<t.length;c++){const d=n[c];qe(d!=null,`No layout data found for index ${c}`);const f=100/o*d;n[c]=f}let s=0;for(let c=0;c<t.length;c++){const d=n[c];qe(d!=null,`No layout data found for index ${c}`);const f=br({panelConstraints:t,panelIndex:c,size:d});d!=f&&(s+=d-f,n[c]=f)}if(!zn(s,0))for(let c=0;c<t.length;c++){const d=n[c];qe(d!=null,`No layout data found for index ${c}`);const f=d+s,h=br({panelConstraints:t,panelIndex:c,size:f});if(d!==h&&(s-=h-d,n[c]=h,zn(s,0)))break}return n}const qw=100,lu={getItem:e=>(qp(lu),lu.getItem(e)),setItem:(e,t)=>{qp(lu),lu.setItem(e,t)}},Qp={};function zb({autoSaveId:e=null,children:t,className:n="",direction:o,forwardedRef:s,id:c=null,onLayout:d=null,keyboardResizeBy:f=null,storage:h=lu,style:m,tagName:R="div",...T}){const S=IT(c),g=C.useRef(null),[p,_]=C.useState(null),[O,D]=C.useState([]),L=ww(),w=C.useRef({}),y=C.useRef(new Map),x=C.useRef(0),G=C.useRef({autoSaveId:e,direction:o,dragState:p,id:S,keyboardResizeBy:f,onLayout:d,storage:h}),B=C.useRef({layout:O,panelDataArray:[],panelDataArrayChanged:!1});C.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),C.useImperativeHandle(s,()=>({getId:()=>G.current.id,getLayout:()=>{const{layout:W}=B.current;return W},setLayout:W=>{const{onLayout:z}=G.current,{layout:Q,panelDataArray:H}=B.current,Z=Zp({layout:W,panelConstraints:H.map(ae=>ae.constraints)});Xp(Q,Z)||(D(Z),B.current.layout=Z,z&&z(Z),Ir(H,Z,w.current))}}),[]),ls(()=>{G.current.autoSaveId=e,G.current.direction=o,G.current.dragState=p,G.current.id=S,G.current.onLayout=d,G.current.storage=h}),Fw({committedValuesRef:G,eagerValuesRef:B,groupId:S,layout:O,panelDataArray:B.current.panelDataArray,setLayout:D,panelGroupElement:g.current}),C.useEffect(()=>{const{panelDataArray:W}=B.current;if(e){if(O.length===0||O.length!==W.length)return;let z=Qp[e];z==null&&(z=Vw(Xw,qw),Qp[e]=z);const Q=[...W],H=new Map(y.current);z(e,Q,H,O,h)}},[e,O,h]),C.useEffect(()=>{});const Y=C.useCallback(W=>{const{onLayout:z}=G.current,{layout:Q,panelDataArray:H}=B.current;if(W.constraints.collapsible){const Z=H.map(Ne=>Ne.constraints),{collapsedSize:ae=0,panelSize:he,pivotIndices:Re}=Ql(H,W,Q);if(qe(he!=null,`Panel size not found for panel "${W.id}"`),!Oo(he,ae)){y.current.set(W.id,he);const Me=Cr(H,W)===H.length-1?he-ae:ae-he,me=ou({delta:Me,initialLayout:Q,panelConstraints:Z,pivotIndices:Re,prevLayout:Q,trigger:"imperative-api"});oh(Q,me)||(D(me),B.current.layout=me,z&&z(me),Ir(H,me,w.current))}}},[]),X=C.useCallback((W,z)=>{const{onLayout:Q}=G.current,{layout:H,panelDataArray:Z}=B.current;if(W.constraints.collapsible){const ae=Z.map(Ce=>Ce.constraints),{collapsedSize:he=0,panelSize:Re=0,minSize:Ne=0,pivotIndices:Me}=Ql(Z,W,H),me=z??Ne;if(Oo(Re,he)){const Ce=y.current.get(W.id),ge=Ce!=null&&Ce>=me?Ce:me,De=Cr(Z,W)===Z.length-1?Re-ge:ge-Re,Be=ou({delta:De,initialLayout:H,panelConstraints:ae,pivotIndices:Me,prevLayout:H,trigger:"imperative-api"});oh(H,Be)||(D(Be),B.current.layout=Be,Q&&Q(Be),Ir(Z,Be,w.current))}}},[]),ie=C.useCallback(W=>{const{layout:z,panelDataArray:Q}=B.current,{panelSize:H}=Ql(Q,W,z);return qe(H!=null,`Panel size not found for panel "${W.id}"`),H},[]),oe=C.useCallback((W,z)=>{const{panelDataArray:Q}=B.current,H=Cr(Q,W);return Kw({defaultSize:z,dragState:p,layout:O,panelData:Q,panelIndex:H})},[p,O]),j=C.useCallback(W=>{const{layout:z,panelDataArray:Q}=B.current,{collapsedSize:H=0,collapsible:Z,panelSize:ae}=Ql(Q,W,z);return qe(ae!=null,`Panel size not found for panel "${W.id}"`),Z===!0&&Oo(ae,H)},[]),$=C.useCallback(W=>{const{layout:z,panelDataArray:Q}=B.current,{collapsedSize:H=0,collapsible:Z,panelSize:ae}=Ql(Q,W,z);return qe(ae!=null,`Panel size not found for panel "${W.id}"`),!Z||fs(ae,H)>0},[]),Ee=C.useCallback(W=>{const{panelDataArray:z}=B.current;z.push(W),z.sort((Q,H)=>{const Z=Q.order,ae=H.order;return Z==null&&ae==null?0:Z==null?-1:ae==null?1:Z-ae}),B.current.panelDataArrayChanged=!0,L()},[L]);ls(()=>{if(B.current.panelDataArrayChanged){B.current.panelDataArrayChanged=!1;const{autoSaveId:W,onLayout:z,storage:Q}=G.current,{layout:H,panelDataArray:Z}=B.current;let ae=null;if(W){const Re=Ww(W,Z,Q);Re&&(y.current=new Map(Object.entries(Re.expandToSizes)),ae=Re.layout)}ae==null&&(ae=Yw({panelDataArray:Z}));const he=Zp({layout:ae,panelConstraints:Z.map(Re=>Re.constraints)});Xp(H,he)||(D(he),B.current.layout=he,z&&z(he),Ir(Z,he,w.current))}}),ls(()=>{const W=B.current;return()=>{W.layout=[]}},[]);const V=C.useCallback(W=>{let z=!1;const Q=g.current;return Q&&window.getComputedStyle(Q,null).getPropertyValue("direction")==="rtl"&&(z=!0),function(Z){Z.preventDefault();const ae=g.current;if(!ae)return()=>null;const{direction:he,dragState:Re,id:Ne,keyboardResizeBy:Me,onLayout:me}=G.current,{layout:Ce,panelDataArray:ge}=B.current,{initialLayout:_e}=Re??{},De=wb(Ne,W,ae);let Be=zw(Z,W,he,Re,Me,ae);const $t=he==="horizontal";$t&&z&&(Be=-Be);const Cn=ge.map(ro=>ro.constraints),bn=ou({delta:Be,initialLayout:_e??Ce,panelConstraints:Cn,pivotIndices:De,prevLayout:Ce,trigger:Ob(Z)?"keyboard":"mouse-or-touch"}),so=!oh(Ce,bn);(Db(Z)||yb(Z))&&x.current!=Be&&(x.current=Be,!so&&Be!==0?$t?UA(W,Be<0?Mb:Lb):UA(W,Be<0?xb:Hb):UA(W,0)),so&&(D(bn),B.current.layout=bn,me&&me(bn),Ir(ge,bn,w.current))}},[]),P=C.useCallback((W,z)=>{const{onLayout:Q}=G.current,{layout:H,panelDataArray:Z}=B.current,ae=Z.map(Ce=>Ce.constraints),{panelSize:he,pivotIndices:Re}=Ql(Z,W,H);qe(he!=null,`Panel size not found for panel "${W.id}"`);const Me=Cr(Z,W)===Z.length-1?he-z:z-he,me=ou({delta:Me,initialLayout:H,panelConstraints:ae,pivotIndices:Re,prevLayout:H,trigger:"imperative-api"});oh(H,me)||(D(me),B.current.layout=me,Q&&Q(me),Ir(Z,me,w.current))},[]),K=C.useCallback((W,z)=>{const{layout:Q,panelDataArray:H}=B.current,{collapsedSize:Z=0,collapsible:ae}=z,{collapsedSize:he=0,collapsible:Re,maxSize:Ne=100,minSize:Me=0}=W.constraints,{panelSize:me}=Ql(H,W,Q);me!=null&&(ae&&Re&&Oo(me,Z)?Oo(Z,he)||P(W,he):me<Me?P(W,Me):me>Ne&&P(W,Ne))},[P]),ne=C.useCallback((W,z)=>{const{direction:Q}=G.current,{layout:H}=B.current;if(!g.current)return;const Z=Lf(W,g.current);qe(Z,`Drag handle element not found for id "${W}"`);const ae=Gb(Q,z);_({dragHandleId:W,dragHandleRect:Z.getBoundingClientRect(),initialCursorPosition:ae,initialLayout:H})},[]),fe=C.useCallback(()=>{_(null)},[]),M=C.useCallback(W=>{const{panelDataArray:z}=B.current,Q=Cr(z,W);Q>=0&&(z.splice(Q,1),delete w.current[W.id],B.current.panelDataArrayChanged=!0,L())},[L]),ee=C.useMemo(()=>({collapsePanel:Y,direction:o,dragState:p,expandPanel:X,getPanelSize:ie,getPanelStyle:oe,groupId:S,isPanelCollapsed:j,isPanelExpanded:$,reevaluatePanelConstraints:K,registerPanel:Ee,registerResizeHandle:V,resizePanel:P,startDragging:ne,stopDragging:fe,unregisterPanel:M,panelGroupElement:g.current}),[Y,p,o,X,ie,oe,S,j,$,K,Ee,V,P,ne,fe,M]),ce={display:"flex",flexDirection:o==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return C.createElement(yf.Provider,{value:ee},C.createElement(R,{...T,children:t,className:n,id:c,ref:g,style:{...ce,...m},[aa.group]:"",[aa.groupDirection]:o,[aa.groupId]:S}))}const Yb=C.forwardRef((e,t)=>C.createElement(zb,{...e,forwardedRef:t}));zb.displayName="PanelGroup";Yb.displayName="forwardRef(PanelGroup)";function Cr(e,t){return e.findIndex(n=>n===t||n.id===t.id)}function Ql(e,t,n){const o=Cr(e,t),c=o===e.length-1?[o-1,o]:[o,o+1],d=n[o];return{...t.constraints,panelSize:d,pivotIndices:c}}function Zw({disabled:e,handleId:t,resizeHandler:n,panelGroupElement:o}){C.useEffect(()=>{if(e||n==null||o==null)return;const s=Lf(t,o);if(s==null)return;const c=d=>{if(!d.defaultPrevented)switch(d.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{d.preventDefault(),n(d);break}case"F6":{d.preventDefault();const f=s.getAttribute(aa.groupId);qe(f,`No group element found for id "${f}"`);const h=Tu(f,o),m=Ub(f,t,o);qe(m!==null,`No resize element found for id "${t}"`);const R=d.shiftKey?m>0?m-1:h.length-1:m+1<h.length?m+1:0;h[R].focus();break}}};return s.addEventListener("keydown",c),()=>{s.removeEventListener("keydown",c)}},[o,e,t,n])}function Kb({children:e=null,className:t="",disabled:n=!1,hitAreaMargins:o,id:s,onBlur:c,onClick:d,onDragging:f,onFocus:h,onPointerDown:m,onPointerUp:R,style:T={},tabIndex:S=0,tagName:g="div",...p}){var _,O;const D=C.useRef(null),L=C.useRef({onClick:d,onDragging:f,onPointerDown:m,onPointerUp:R});C.useEffect(()=>{L.current.onClick=d,L.current.onDragging=f,L.current.onPointerDown=m,L.current.onPointerUp=R});const w=C.useContext(yf);if(w===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:y,groupId:x,registerResizeHandle:G,startDragging:B,stopDragging:Y,panelGroupElement:X}=w,ie=IT(s),[oe,j]=C.useState("inactive"),[$,Ee]=C.useState(!1),[V,P]=C.useState(null),K=C.useRef({state:oe});ls(()=>{K.current.state=oe}),C.useEffect(()=>{if(n)P(null);else{const ee=G(ie);P(()=>ee)}},[n,ie,G]);const ne=(_=o?.coarse)!==null&&_!==void 0?_:15,fe=(O=o?.fine)!==null&&O!==void 0?O:5;C.useEffect(()=>{if(n||V==null)return;const ee=D.current;qe(ee,"Element ref not attached");let ce=!1;return kw(ie,ee,y,{coarse:ne,fine:fe},(z,Q,H)=>{if(!Q){j("inactive");return}switch(z){case"down":{j("drag"),ce=!1,qe(H,'Expected event to be defined for "down" action'),B(ie,H);const{onDragging:Z,onPointerDown:ae}=L.current;Z?.(!0),ae?.();break}case"move":{const{state:Z}=K.current;ce=!0,Z!=="drag"&&j("hover"),qe(H,'Expected event to be defined for "move" action'),V(H);break}case"up":{j("hover"),Y();const{onClick:Z,onDragging:ae,onPointerUp:he}=L.current;ae?.(!1),he?.(),ce||Z?.();break}}})},[ne,y,n,fe,G,ie,V,B,Y]),Zw({disabled:n,handleId:ie,resizeHandler:V,panelGroupElement:X});const M={touchAction:"none",userSelect:"none"};return C.createElement(g,{...p,children:e,className:t,id:s,onBlur:()=>{Ee(!1),c?.()},onFocus:()=>{Ee(!0),h?.()},ref:D,role:"separator",style:{...M,...T},tabIndex:S,[aa.groupDirection]:y,[aa.groupId]:x,[aa.resizeHandle]:"",[aa.resizeHandleActive]:oe==="drag"?"pointer":$?"keyboard":void 0,[aa.resizeHandleEnabled]:!n,[aa.resizeHandleId]:ie,[aa.resizeHandleState]:oe})}Kb.displayName="PanelResizeHandle";const Vb=navigator.userAgent.indexOf("Firefox")>=0,hi="XIVShell Defaults, , sans-serif",Qw=3,pe={rulerHeight:30,trackHeight:14,slotPaddingTop:4,damageMarkerHeight:8,skillButtonHeight:28,buffCoverHeight:4,slotPaddingBottom:4,renderSlotHeight:()=>pe.slotPaddingTop+pe.damageMarkerHeight+pe.skillButtonHeight*1.5+pe.buffCoverHeight*Qw+pe.slotPaddingBottom,timelineCanvasHeight:(e,t)=>{let n=pe.rulerHeight;return n+=pe.trackHeight*e,n+=pe.renderSlotHeight()*t,t<Oi&&(n+=pe.addSlotButtonHeight),n},leftBufferWidth:20,addSlotButtonHeight:20},$w={drawMarkers:!0,drawDamageMarks:!0,drawHealingMarks:!0,drawMPTickMarks:!0,drawBuffIndicators:!0};function Jw(e){const t=new Blob([JSON.stringify(e)],{type:"text/plain;charset=utf-8"});return window.URL.createObjectURL(t)}function eP(e){let t="";e.meta?.forEach(o=>{t+="#"+o.toString()+`
`}),e.body.forEach(o=>{for(let s=0;s<o.length;s++)t+=o[s].toString(),s<o.length-1&&(t+=",");t+=`
`});const n=new Blob([t],{type:"text/csv;charset=utf-8"});return window.URL.createObjectURL(n)}var Mo=(e=>(e.Json="JSON",e.Csv="CSV",e.Png="PNG",e))(Mo||{});function Sl(e){const[t,n]=C.useState({jsonContent:{},csvContent:{body:[]},pngContent:void 0}),o=()=>{const c=e.getContentFn();e.fileFormat==="JSON"?n({jsonContent:c}):e.fileFormat==="CSV"?n({csvContent:c}):e.fileFormat==="PNG"?n({pngContent:c}):console.assert(!1)};let s="";return e.fileFormat==="JSON"?s=Jw(t.jsonContent):e.fileFormat==="CSV"?s=eP(t.csvContent):e.fileFormat==="PNG"?s=t.pngContent?.toDataURL()??"":console.assert(!1),l.jsx("a",{style:{color:St().fileDownload,marginRight:6},href:s,download:e.filename,onClick:()=>o(),onContextMenu:()=>o(),children:`[${e.displayName===void 0?"download":e.displayName}]`})}function tP(e,t=n=>{console.log(n)}){const n=new FileReader;n.onload=function(o){const s=o.target?.result?.toString()??"";let c;try{c=JSON.parse(s)}catch(d){window.alert(N({en:"Parse error! Are you sure this is the correct file? This tool only reads text files in JSON format.",zh:"- JSON"})),console.error(d)}t(c)},n.readAsText(e,"UTF-8")}const Xe={positionFromTimeAndScale:function(e,t){return e*t*100},timeFromPositionAndScale:function(e,t){return e/(t*100)},displayTime:function(e,t){const n=Math.abs(e),o=Math.floor(n/60),s=n-60*o;return(e<0?"-":"")+o.toString()+":"+(s+Ra.epsilon<10?"0":"")+s.toFixed(t).toString()}},aP=function(e){console.log("[asyncFetch] some error occurred")},$p=new Map;function Wb(e,t,n=aP){const o=$p.get(e);if(o){t(o);return}const s=new XMLHttpRequest;s.addEventListener("error",n),s.addEventListener("load",c=>{t(s.responseText),$p.set(e,s.responseText)}),s.open("GET",e),s.send()}function Vi(e){const t=e.trim();let n=1;e[0]==="-"&&(n=-1,e=e.substring(1));const o=t.indexOf(":");if(o<0)return parseFloat(t);const s=parseInt(t.substring(0,o)),c=parseFloat(t.substring(o+1));return n*(s*60+c)}function Es(e){return l.jsx("div",{className:"clickable",onClick:e.onClickFn,style:e.style,children:e.content})}function nP(e){const n={position:"relative",display:"inline-block",verticalAlign:"top",border:"1px solid "+St().bgHighContrast,borderRadius:4,height:8,top:e.offsetY,width:e.width},o={background:`${e.backgroundColor}`,height:"100%",borderRadius:"inherit",width:`${e.progress*100}%`};return l.jsx("div",{style:n,children:l.jsx("div",{style:o})})}const Or=26;function Xb(e){const t=Or-2,[n,o]=Hn.useState(void 0);C.useEffect(()=>{let h=e.defaultSelectedIndex;const m=Tt("tabs: "+e.uniqueName);m!==null&&(m==="none"?h=void 0:h=parseInt(m)),o(h)},[e.defaultSelectedIndex,e.uniqueName]);const s=St(),c=function(h){const R="1px solid "+(h===n?s.bgHighContrast:s.bgMediumContrast),T="1px solid "+s.background;let S=R;(h===n||n===void 0)&&(S=T);const g=h===n?R:T;let p=T,_=T;return h===n?(p=R,_=R):h>0&&(n===void 0||n+1!==h)&&(p=R),{margin:0,display:"inline-block",boxSizing:"border-box",padding:"0 12px",borderBottom:S,borderTop:g,borderLeft:p,borderRight:_,lineHeight:`${t}px`,color:h===n?s.emphasis:s.text,cursor:e.collapsible||h!==n?"pointer":"default"}},d=[],f=[];for(let h=0;h<e.content.length;h++){const m=e.content[h],R=h===n;d.push(l.jsx("span",{style:c(h),onClick:()=>{let S=n;R?e.collapsible&&(S=void 0):S=h,o(S),gt("tabs: "+e.uniqueName,S===void 0?"none":`${S}`)},children:m.titleNode},h));const T={display:R?"block":"none"};e.maxWidth!==void 0&&(T.maxWidth=e.maxWidth),f.push(l.jsx("div",{style:T,children:m.contentNode},h))}return e.collapsible&&n!==void 0&&d.push(l.jsx("span",{onClick:()=>{o(void 0),gt("tabs: "+e.uniqueName,"none")},children:l.jsx(pw,{style:{marginLeft:16,fontSize:14,cursor:"pointer",position:"relative",top:3}})},d.length)),l.jsxs("div",{style:{position:"relative",...e.style},children:[l.jsx("div",{children:d}),l.jsx("div",{className:e.scrollable?"visibleScrollbar":void 0,style:{display:n===void 0?"none":"block",height:e.height-Or,boxSizing:"border-box",padding:`10px ${Vb?15:5}px`,overflowY:e.scrollable?"scroll":"hidden"},children:f})]})}function NT(e){const t=St(),n=[];for(let o=0;o<e.children.length;o++){const s=e.children[o],c=o<e.children.length-1?e.children[o+1]:void 0;if(n.push(l.jsxs(bb,{className:s.showScrollbar?"visibleScrollbar":"invisibleScrollbar",defaultSize:s.defaultSize,minSize:s.minSize??20,style:{border:s.fullBorder===!0?`1px solid ${t.bgMediumContrast}`:void 0,boxSizing:"border-box",height:e.contentHeight,overflowY:"scroll"},children:[s.title?l.jsx("div",{style:{marginBottom:10},children:l.jsx("b",{children:s.title})}):void 0,s.content]},`column-${o}`)),o<e.children.length-1){const f=s.fullBorder===!0||c!==void 0&&c.fullBorder===!0?{margin:"0 5px"}:{borderLeft:"1px solid "+t.bgMediumContrast,margin:"0 15px 0 10px"};n.push(l.jsx(Kb,{style:f},`divider-${o}`))}}return l.jsx(Yb,{direction:"horizontal",children:n})}function jt(e){const t=d=>{e.onChange&&e.onChange(d.target.value)},n=St(),o=e.fullWidthInput?void 0:e.width??5,s={color:e.style?.color??e.componentColor??n.text,backgroundColor:"transparent",outline:"none",border:"none",borderBottom:"1px solid "+(e.componentColor??n.text),width:e.fullWidthInput?"100%":void 0},c=e.style??{};return l.jsxs("div",{style:{...c,color:e.componentColor},children:[l.jsx("span",{children:e.description}),l.jsx("input",{style:s,size:o,type:"text",value:e.defaultValue,onChange:t,onKeyDown:d=>d.stopPropagation(),autoFocus:e.autoFocus,placeholder:e.placeholder})]})}function iP(e){const t=e.description??"default description",[n,o]=C.useState(e.defaultValue??""),s=c=>{o(c.target.value),e.onChange&&e.onChange(c.target.value),gt("slider: "+e.uniqueName,c.target.value)};return C.useEffect(()=>{let c=n;const d=Tt("slider: "+e.uniqueName);d!==null&&(c=d,o(d)),e.onChange&&e.onChange(c)},[]),l.jsxs("div",{style:{display:"inline-block",...e.style},children:[l.jsx("span",{children:t??""}),l.jsx("input",{size:10,type:"range",value:n,min:.05,max:1,step:.025,onChange:s,style:{position:"relative",outline:"none"}})]})}function qb(e){const t=Tt(`radio: ${e.uniqueName}`)??e.selected??e.options[0][0],[n,o]=C.useState(t);C.useEffect(()=>{e.selected!==void 0&&(o(e.selected),gt(`radio: ${e.uniqueName}`,e.selected),e.onChange(e.selected))},[e.selected]);const s={position:"relative",top:3,marginRight:"0.25em"},c=e.options.map(([d,f])=>l.jsxs("div",{style:s,children:[l.jsx("input",{type:"radio",id:d,name:e.uniqueName,value:d,checked:n===d,onChange:()=>{o(d),gt(`radio: ${e.uniqueName}`,d),e.onChange(d)}}),l.jsxs("label",{htmlFor:d,style:{verticalAlign:"top"},children:[" ",f]})]},d));return l.jsx("div",{style:e.containerStyle,children:c})}function su(e){const[t,n]=C.useState(!1);return C.useEffect(()=>{let o=e.defaultChecked??!0;const s=Tt("checked: "+e.uniqueName);s!==null&&(o=parseInt(s)>0),n(o),e.onChange(o)},[]),l.jsxs("div",{style:{marginBottom:5},children:[l.jsx("input",{className:"shellCheckbox",type:"checkbox",onChange:o=>{const s=o.currentTarget.checked;n(s),gt("checked: "+e.uniqueName,s?"1":"0"),e.onChange(s)},checked:t}),l.jsx("span",{children:e.label})]})}function gl(e){const[t,n]=C.useState(e.defaultShow??!1),o=e.autoIndent??!0,s=()=>{const d=!t;n(d),e.onExpand&&d&&e.onExpand(),e.onCollapse&&!d&&e.onCollapse(),gt("exp: "+e.title,(d?1:0).toString())};C.useEffect(()=>{const d=Tt("exp: "+e.title);d!==null&&n(parseInt(d)===1)},[]);const c=o?{margin:10,paddingLeft:6,marginBottom:20}:{};return l.jsxs("div",{style:e.noMargin?{}:{marginTop:10,marginBottom:10},children:[l.jsx(Es,{content:l.jsxs("span",{children:[l.jsx("span",{children:t?"- ":"+ "}),e.titleNode??e.title]}),onClickFn:s}),l.jsx("div",{style:{position:"relative",display:t?"block":"none",marginTop:e.titleBodyGap},children:l.jsx("div",{style:c,children:e.content})})]})}function qh(e){const t=C.useRef(null);let n=e.defaultLoadUrl??"";const o=h=>{h.target&&(n=h.target.value)},s=()=>{const h=t.current;if(h&&h.files&&h.files.length>0){const m=h.files[0];tP(m,R=>e.onLoadFn(R)),h.value=""}},c=()=>{const h=function(m){console.log("some error occurred")};Wb(n,m=>{try{const R=JSON.parse(m);e.onLoadFn(R)}catch{h()}},m=>{h()})},d=St(),f={color:d.text,background:"transparent",outline:"none",border:"none",borderBottom:"1px solid "+d.text,width:"30em"};return l.jsxs("div",{children:[l.jsxs("div",{children:[l.jsx("span",{children:e.label??N({en:"Load from file: ",zh:""})}),l.jsx("input",{style:{width:"110px",color:"transparent"},type:"file",ref:t,onChange:s})]}),e.allowLoadFromUrl?l.jsxs("form",{children:[l.jsx("span",{children:N({en:"Load from URL: ",zh:"URL"})}),l.jsx("input",{defaultValue:n,style:f,onChange:o}),l.jsx("span",{children:" "}),l.jsx("button",{type:"submit",onClick:h=>{c(),h.preventDefault()},children:N({en:"load",zh:""})})]}):void 0]})}function $a(e){const t=St();return l.jsx("span",{style:{fontSize:11,border:"1px solid "+t.bgHighContrast,borderRadius:2,padding:"1px 4px",background:t.bgLowContrast},children:e.text})}const oP=100;function ze(e){const n={display:"inline-block",position:"relative",width:12,height:12,lineHeight:1,cursor:"help",background:St().bgHighContrast,borderRadius:6,textAlign:"center",verticalAlign:"middle"},o=C.useRef(0),[s,c]=C.useState(!1);return l.jsxs(ub,{delay:0,open:s,children:[l.jsx("span",{id:`help-${e.topic}`,className:"help-icon global-help-tooltip",style:n,"data-tooltip-offset":4,onMouseEnter:()=>{const d=Date.now();d-o.current>oP&&c(!0),o.current=d},onMouseLeave:()=>c(!1),children:l.jsx("span",{style:{position:"relative",top:-1,color:"white"},children:"?"})}),l.jsx(Rb,{container:e.container??document.getElementById("globalHelpTooltipAnchor"),children:l.jsx(gb,{className:"tooltip-positioner",anchor:document.getElementById(`help-${e.topic}`),children:l.jsx(Ib,{className:"help-tooltip tooltip",children:e.content})})})]})}const Zh="3f";let Su=()=>{},va=()=>({isValid:!1,invalidActions:[],skillUseTimes:[],straightenedIfValid:void 0}),ru=e=>{e()};const Zb=C.createContext(e=>({drop:t=>{},setSelected:t=>{}})),ss=e=>({borderColor:e.bgMediumContrast,borderWidth:"1px",borderStyle:"solid"}),Hr={width:"1.5%",textAlign:"right",paddingRight:"0.3em",paddingLeft:"0.3em"},rl={width:"12%",textAlign:"right",paddingRight:"0.3em",paddingLeft:"0.3em"},Qb={width:"86.5%",textAlign:"left",paddingLeft:"0.3em"},$b={width:"100%",height:"1.6em",scrollMarginTop:"2.1em",scrollMarginBottom:"0.5em",userSelect:"none",outline:"none"},Jb=e=>({borderTopWidth:"4px",borderTopStyle:"solid",borderColor:e.dropTarget});function ER(e){return(e??0)+1}function lP(e){const t=St();let n=e.index%2===1?t.timelineEditor.bgAlternateRow:"transparent";e.isSelected&&(n="rgba(151,111,246,0.25)"),e.recordIsDirty&&e.isSelected&&(n=t.editingValid+Zh);let o=N({en:"(other)",zh:""});if(e.node.info.type===ke.Skill){const T=e.node.targetList,S=T.length;let g="";S>1?g=N({en:` (${S} targets)`,zh:`${S}`}).toString():S===1&&T[0]!==1&&(g=N({en:` (Boss ${T[0]})`,zh:` Boss ${T[0]}`}).toString()),o=e.node.info.skillName?Wn(e.node.info.skillName)+g:N({en:"(unknown skill)",zh:""})}else if(e.node.info.type===ke.Wait)o=N({en:"(wait for "+e.node.info.waitDuration.toFixed(3)+"s)",zh:""+e.node.info.waitDuration.toFixed(3)+""});else if(e.node.info.type===ke.JumpToTimestamp)o=N({en:"(jump to time "+Xe.displayTime(e.node.info.targetTime,3)+")",zh:" "+Xe.displayTime(e.node.info.targetTime,3)+""});else if(e.node.info.type===ke.WaitForMP)o=N({en:"(wait until MP/lucid tick)",zh:"/"});else if(e.node.info.type===ke.SetResourceEnabled){const T=Ke(e.node.info.buffName);o=N({en:"(toggle resource: "+T+")",zh:"BUFF"+T+""})}else e.node.info.type===ke.Unknown&&(o=e.node.info.skillName);const s=l.jsxs("td",{style:{...Qb,...ss(t)},children:[e.isInvalid?l.jsx("span",{style:{marginRight:6,padding:"0 4px",backgroundColor:t.editingInvalid+Zh},children:""}):void 0,l.jsx("span",{children:o})]}),c=e.includeDetails?l.jsx("td",{style:{...Hr,...ss(t)},children:ER(e.index)}):void 0,d=e.includeDetails?l.jsx("td",{style:{...rl,...ss(t)},children:Xe.displayTime(e.usedAt,3)}):void 0,f=C.useContext($f),h=f.dragTargetIndex===e.index,m=C.useContext(Gu),R=C.useContext(Zb)(e.index);return l.jsxs("tr",{style:{...$b,background:n,...h?Jb(t):{}},ref:e.refObj??null,draggable:!m.value,onDragStart:T=>{R.setSelected(!0),e.isSelected||I.timeline.onClickTimelineAction(e.index,!1)},onDragLeave:T=>{f.setDragTarget(null,null)},onDrop:T=>{R.drop(T),f.setDragTarget(null,null)},onDragOver:T=>{T.preventDefault();let S=e.usedAt;const g=e.index>0?I.record.actions[e.index-1]:void 0;g?.tmp_endLockTime!==void 0&&e.node.info.type===ke.Skill&&Wi(I.game.job,e.node.info.skillName).cdName==="cd_GCD"&&(S=g.tmp_endLockTime-I.gameConfig.countdown),f.setDragTarget(e.index,S)},onClick:T=>{R.setSelected(!0),e.recordIsDirty?I.timeline.onClickTimelineAction(e.index,T.shiftKey):(I.timeline.onClickTimelineAction(e.index,T.shiftKey),e.node.tmp_startLockTime!==void 0&&I.scrollToTime(e.node.tmp_startLockTime))},tabIndex:-1,onKeyDown:e.onKeyDown,children:[c,d,s]})}let CT=()=>{},bT=()=>{};function sP(){const e=St(),t=C.useRef(null),n=C.useRef(null),[o,s]=C.useState(!1),[c,d]=C.useState(void 0),[f,h]=C.useState(void 0),[,m]=C.useReducer(z=>z+1,0),R=C.useRef(!1),T=I.record.getFirstSelection()?.targetList,S=T&&T.length>0?T[0]-1:void 0,g=Array(bi).fill(!1);T?.forEach(z=>{g[z-1]=!0});const p=C.useRef(void 0);C.useEffect(()=>(Su=()=>{m()},va=()=>{const z=I.checkRecordValidity(I.record,0,!0);return d(z),z},ru=z=>{o&&p.current&&(I.record=p.current,I.checkRecordValidity(I.record,0,!0)),z(),s(!1),p.current=I.record,d(I.checkRecordValidity(I.record,0,!0))},CT=()=>{setTimeout(()=>{t.current?.scrollIntoView({behavior:"smooth",block:"nearest"})},0)},bT=()=>{setTimeout(()=>{(I.record.getSelectionLength()===1?t:n).current?.scrollIntoView({behavior:"smooth",block:"nearest"})},0)},d(I.checkRecordValidity(I.record,0,!0)),()=>{Su=()=>{}}),[]);const _=c&&c.isValid,O=z=>{z&&p.current&&(I.record=p.current),s(!1),d(I.checkRecordValidity(I.record,0,!0)),h(void 0)},D=5,L=()=>l.jsx("button",{style:{display:"block",marginTop:10,marginLeft:D},onClick:z=>{R.current=!0,o||console.error("attempted to discard edits while timeline editor was not dirty"),O(!0)},children:N({en:"discard changes",zh:""})}),w=()=>(o||(p.current=I.record,I.record=I.record.getCloneWithSharedConfig(),s(!0)),I.record),y=(z,Q)=>{const H=z?.node,Z=z?.index,ae=z?.reason,he=Mi()==="en",Re=(ge,_e)=>he?ge:_e;let Ne=Re("(unknown node)","");if(H)if(H.info.type===ke.Wait)Ne=Re("(Wait)","");else if(H.info.type===ke.JumpToTimestamp)Ne=Re("(Jump to time)","");else if(H.info.type===ke.WaitForMP)Ne=Re("(Wait for MP/lucid tick)","/");else if(H.info.type===ke.SetResourceEnabled){const ge=Ke(H.info.buffName);Ne=Re("(Toggle resource "+ge+")","BUFF "+ge+"")}else H.info.type===ke.Skill?Ne=H.info.skillName?Wn(H.info.skillName):Re("(unknown skill)",""):H.info.type===ke.Unknown&&(Ne=H.info.skillName);let Me;const me=Z!==void 0?c?.skillUseTimes[Z]:void 0,Ce=ae?.unavailableReasons.map(is).join(Re("; ",""))??is(void 0);if(Q?Me=Re(`This sequence contains invalid actions! Check action #${ER(Z)}: ${Ne}`,`${ER(Z)} ${Ne}`):Me=Re(`This action is invalid! ${Ne}`,` ${Ne}`),me!==void 0){const ge=Xe.displayTime(me,3);Me+=` @ ${ge}`+Re(".","")}return{en:l.jsxs(l.Fragment,{children:[Me,l.jsx("br",{}),l.jsx("br",{}),"Reason: ",Ce]}),zh:l.jsxs(l.Fragment,{children:[Me,l.jsx("br",{}),l.jsx("br",{}),"",Ce]})}},x={padding:"0.3em"},G=()=>{const z=I.record,Q=z.getSelectionLength();if(Q===0)return l.jsx("div",{style:x,children:N({en:"No actions selected.",zh:""})});if(Q===1){const H=z.selectionStartIndex,ae=z.getFirstSelection().info;let he=l.jsx(l.Fragment,{});const Re=Xe.displayTime(c?.skillUseTimes[H]??0,3);if(ae.type===ke.Skill){const Ne=ae.skillName,Me=Wi(I.game.job,Ne),me=Me?.potencyFn(I.game)>0||Me?.savesTargets||I.game.dotSkills.includes(Ne);he=l.jsxs(l.Fragment,{children:[l.jsx("b",{children:Wn(Ne)})," @ ",Re,l.jsx("br",{}),me&&l.jsx(gC,{style:{marginBlock:"5px"},primaryOnly:Me.falloff===void 0&&!Me.savesTargets,selected:g,primary:S,onAnySelectionChange:(Ce,ge)=>X(_e=>{const De=ge.flatMap(($t,Cn)=>$t&&Cn!==Ce?[Cn+1]:[]);De.splice(0,0,Ce+1);const Be=new uP(Al(Ne,De),H);return I.undoStack.push(Be),Be.redo(),H})})]})}else if(ae.type===ke.Wait){const Ne=ae.waitDuration.toFixed(3);he=l.jsx(l.Fragment,{children:N({en:`wait for ${Ne}s @ ${Re}`,zh:`${Ne} @ ${Re}`})})}else if(ae.type===ke.JumpToTimestamp){const Ne=Xe.displayTime(ae.targetTime,3);he=l.jsx(l.Fragment,{children:N({en:`jump from time ${Re} to ${Ne}`,zh:` ${Re}  ${Ne}`})})}else if(ae.type===ke.WaitForMP)he=l.jsx(l.Fragment,{children:N({en:`wait for MP/lucid tick @ ${Re}`,zh:`/ @ ${Re}`})});else if(ae.type===ke.SetResourceEnabled){const Ne=Ke(ae.buffName);he=l.jsx(l.Fragment,{children:N({en:"toggle resource: ",zh:"BUFF"}).toString()+Ne+(ae.targetNumber!==void 0?N({en:`(Boss ${ae.targetNumber})`,zh:`Boss ${ae.targetNumber}`}):"")+" @ "+Re})}else ae.type===ke.Unknown&&(he=l.jsx(l.Fragment,{children:"nodeInfo.skillName"}));return l.jsx("div",{style:x,children:he})}else return l.jsx("div",{style:x,children:N({en:`${Q} actions selected.`,zh:`${Q}`})})},B=()=>{if(o)return l.jsxs("div",{children:[l.jsx("div",{style:{...x,backgroundColor:(_?e.editingValid:e.editingInvalid)+Zh},children:N(_?{en:"This edited sequence is valid.",zh:""}:y(c?.invalidActions[0],!0))}),l.jsx("button",{style:{display:"block",marginTop:10,marginLeft:D},onClick:z=>{R.current=!0,o?I.applyEditedRecord():console.error("attempted to apply edits while timeline editor was not dirty"),O(!1),I.displayCurrentState()},children:N({en:"apply changes to timeline and save",zh:""})}),L()]});if(_)return l.jsx("div",{style:x,children:N({en:"Timeline is up to date.",zh:""})});{const z=new Map;c?.invalidActions.forEach(he=>z.set(he.index,he));const Q=c?.invalidActions[0];let H=Q,Z=!0;const ae=I.record;if(Q!==void 0&&ae.selectionStartIndex!==void 0){const he=c?.invalidActions.find(Ne=>ae.isInSelection(Ne.index)),Re=ae.getSelectionLength();Re===1&&he!==void 0?(H=z.get(ae.selectionStartIndex),Z=!1):Re>1&&he!==void 0&&(H=he)}return l.jsx("div",{children:l.jsx("div",{style:{...x,backgroundColor:e.editingInvalid+Zh},children:N(y(H,Z))})})}},Y={display:"block",width:"100%",padding:3},X=z=>{if(I.record.getFirstSelection()){R.current=!0;const Q=w();let H=f;const Z=z(Q);Z!==void 0&&(H===void 0?H=Z:H=Math.min(Z,H));const ae=I.checkRecordValidity(Q,H);Z!==void 0&&ae.straightenedIfValid?(I.record=ae.straightenedIfValid,h(void 0)):h(H),d(ae),ko()}},ie=I.undoStack.peekUndoMessage(),oe=I.undoStack.peekRedoMessage(),j=l.jsxs("div",{style:{marginBottom:6,flex:1,display:"flex",flexDirection:"column",gap:10},children:[l.jsx("button",{style:Y,onClick:z=>X(Q=>(I.undoStack.push(new Ah(Q.selectionStartIndex,Q.getSelectionLength(),-1)),Q.moveSelected(-1))),children:N({en:"move up",zh:""})}),l.jsx("button",{style:Y,onClick:z=>X(Q=>(I.undoStack.push(new Ah(Q.selectionStartIndex,Q.getSelectionLength(),1)),Q.moveSelected(1))),children:N({en:"move down",zh:""})}),l.jsx("button",{style:Y,onClick:z=>X(Q=>(I.undoStack.push(new Dr(Q.selectionStartIndex,Q.getSelected().actions,"delete")),Q.deleteSelected())),children:N({en:"delete selected",zh:""})}),l.jsx("button",{style:Y,onClick:z=>{const Q=I.record.getSelectionLength();Q>1&&X(H=>{const Z=H.selectionStartIndex,ae=H.selectionEndIndex;return I.undoStack.push(new Ah(ae,1,-(Q-1))),H.selectSingle(ae),H.moveSelected(-(Q-1)),H.selectSingle(Z),H.selectUntil(ae),H.selectionStartIndex})},children:N({en:l.jsxs(l.Fragment,{children:["move end of selection",l.jsx("br",{}),"to start of selection"]}),zh:l.jsxs(l.Fragment,{children:["",l.jsx("br",{}),""]})})}),l.jsx("hr",{style:{backgroundColor:e.bgLowContrast,height:2,marginTop:-2,marginBottom:-2,border:0,width:"100%"}}),l.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:6},children:[l.jsx("button",{style:Y,onClick:mR,disabled:I.record.getSelectionLength()===0,children:N({en:"copy ",zh:""})}),l.jsx("button",{style:Y,onClick:o0,children:N({en:"paste ",zh:""})})]}),l.jsxs("button",{style:Y,onClick:()=>I.undoStack.undo(),disabled:ie===void 0,children:[N({en:"undo ",zh:""}),N(ie??{en:""})]}),l.jsxs("button",{style:Y,onClick:()=>I.undoStack.redo(),disabled:oe===void 0,children:[N({en:"redo ",zh:""}),N(oe??{en:""})]})]}),$=z=>{const Q=I.record.selectionStartIndex;Q!==void 0&&(z.key==="Backspace"||z.key==="Delete"?X(Z=>(I.undoStack.push(new Dr(Q,Z.getSelected().actions,"delete")),Z.deleteSelected())):(I.handleTimelineKeyboardEvent(z),z.key==="Escape"&&fe.setDragTarget(null,null)))},Ee=!0,V=[],P=new Set(c?.invalidActions.map(z=>z.index));I.record.actions.forEach((z,Q)=>{const H=!o&&Q===I.record.selectionStartIndex,Z=!o&&Q===I.record.selectionEndIndex;V.push(l.jsx(lP,{index:Q,node:z,isSelected:I.record.isInSelection(Q),recordIsDirty:o,isInvalid:P.has(Q),usedAt:c?.skillUseTimes[Q]??0,includeDetails:Ee,onKeyDown:$,refObj:H?t:Z?n:void 0},Q))});const K=z=>({drop:Q=>{const H=I.record.selectionStartIndex??0;let Z=z-(H??0);Z>0&&(Z-=I.record.getSelectionLength()),Z!==0&&X(ae=>ae.moveSelected(Z))},setSelected:Q=>{R.current=Q}}),ne=C.useContext(Gu),fe=C.useContext($f),M=V.length,ee=K(M),ce=fe.dragTargetIndex===M;M>0&&V.push(l.jsxs("tr",{tabIndex:-1,style:{height:"0.8em",background:e.timelineEditor.headerFooter,userSelect:"none",...ce?Jb(e):{}},draggable:!ne.value,onDragStart:z=>z.preventDefault(),onDragLeave:z=>{fe.setDragTarget(null,null)},onDrop:z=>{ee.drop(z),fe.setDragTarget(null,null)},onDragOver:z=>{z.preventDefault(),fe.setDragTarget(M,I.game.getDisplayTime())},children:[l.jsx("td",{style:{border:"none"}}),l.jsx("td",{style:{border:"none"}}),l.jsx("td",{style:{border:"none"}})]},M));const W={backgroundColor:e.timelineEditor.headerFooter};return l.jsx("div",{onClick:z=>{!z.shiftKey&&!R.current&&(I.record.unselectAll(),I.displayCurrentState()),R.current=!1},children:l.jsx(NT,{contentHeight:lS,children:[{content:j,defaultSize:20},{content:l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:Hr.paddingLeft},children:[l.jsxs("table",{style:{position:"relative",width:"100%",borderCollapse:"collapse",borderColor:e.bgMediumContrast,borderWidth:"1px",borderStyle:"solid"},children:[l.jsx("thead",{children:l.jsxs("tr",{style:$b,children:[l.jsx("th",{className:"stickyTh",style:{...W,...Hr,...ss(e)},children:"#"}),l.jsx("th",{className:"stickyTh",style:{...W,...rl,...ss(e)},children:N({en:"Time",zh:""})}),l.jsx("th",{className:"stickyTh",style:{...W,...Qb,...ss(e)},children:N({en:"Actions",zh:""})})]})}),l.jsx("tbody",{children:l.jsx(Zb.Provider,{value:K,children:V})})]}),M===0&&l.jsx("span",{style:{paddingLeft:Hr.paddingLeft,fontStyle:"italic"},children:N({en:"No actions to display yet.",zh:""})})]}),defaultSize:40,fullBorder:!0,showScrollbar:!0},{content:l.jsxs("div",{style:{display:"flex 4 6",flexDirection:"column",height:"100%",width:"100%"},children:[l.jsx("div",{style:{height:"30%"},children:G()}),l.jsx("hr",{style:{marginLeft:"5px",border:"none",borderTop:"1px solid "+e.bgHighContrast}}),l.jsx("div",{style:{height:"60%"},children:B()})]}),defaultSize:40,fullBorder:!0}]})})}const rP=30;class cP{actions;cursor;constructor(){this.cursor=0,this.actions=[]}clear(){this.cursor=0,this.actions=[]}get length(){return this.actions.length}push(t){this.actions.splice(this.cursor,this.actions.length-this.cursor,t),this.actions.length>rP&&this.actions.shift(),this.cursor=this.actions.length}doThenPush(t){t.redo(),this.push(t)}emitLog(...t){}undo(){this.cursor>0?(this.actions[--this.cursor].undo(),this.emitLog("UNDO",this.actions[this.cursor])):this.emitLog("nothing to undo")}redo(){this.cursor<this.actions.length?(this.emitLog("REDO",this.actions[this.cursor]),this.actions[this.cursor++].redo()):this.emitLog("nothing to redo")}peekUndoMessage(){return this.cursor>0?this.actions[this.cursor-1].message:void 0}peekRedoMessage(){return this.cursor<this.actions.length?this.actions[this.cursor].message:void 0}}class Si{message;constructor(t){this.message=t}}function OT(e){return e>0?"actions":"action"}class $l extends Si{node;index;constructor(t,n){super({en:"add action",zh:""}),this.node=t,this.index=n}undo(){I.record.selectSingle(this.index),I.deleteSelectedSkills()}redo(){I.insertRecordNode(this.node,this.index)}}class uP extends Si{oldNode;newNode;index;constructor(t,n){super({en:"edit action",zh:""}),I.record.selectSingle(n),this.oldNode=I.record.getFirstSelection(),console.assert(this.oldNode!==void 0),this.newNode=t,this.index=n}undo(){I.record.replaceNode(this.oldNode,this.index),I.autoSave(),va()}redo(){I.record.replaceNode(this.newNode,this.index),I.autoSave(),va()}}class Ah extends Si{startIndex;selectCount;offset;constructor(t,n,o){super({en:`move ${n} ${OT(n)}`,zh:`${n}`}),this.startIndex=t,this.selectCount=n,this.offset=o}undo(){I.record.selectSingle(this.startIndex+this.offset),I.record.selectUntil(this.startIndex+this.selectCount+this.offset-1),I.record.moveSelected(-this.offset),I.autoSave(),va()}redo(){I.record.selectSingle(this.startIndex),I.record.selectUntil(this.startIndex+this.selectCount-1),I.record.moveSelected(this.offset),I.autoSave(),va()}}class Dr extends Si{startIndex;nodes;source;constructor(t,n,o){super({en:`${o} ${n.length} ${OT(n.length)}`,zh:`${o==="delete"?"":""}${n.length}`}),this.startIndex=t,this.nodes=n,this.source=o}undo(){I.insertRecordNodes(this.nodes,this.startIndex)}redo(){I.record.selectSingle(this.startIndex),I.record.selectUntil(this.startIndex+this.nodes.length-1),I.deleteSelectedSkills(),va()}}class DT extends Si{nodes;index;source;constructor(t,n,o){super({en:o==="preset"?"add preset sequence":`paste ${t.length} ${OT(t.length)}`,zh:o==="preset"?"":`${t.length}`}),this.nodes=t,this.index=n,this.source=o}undo(){I.record.selectSingle(this.index),I.record.selectUntil(this.index+this.nodes.length-1),I.deleteSelectedSkills()}redo(){I.insertRecordNodes(this.nodes,this.index)}}class dP extends Si{nodes;index;oldConfig;newConfig;constructor(t,n,o,s){super({en:"import from fflogs",zh:"fflogs"}),this.nodes=t,this.index=n,this.oldConfig=o,this.newConfig=s}undo(){I.record.selectSingle(this.index),I.record.selectUntil(this.index+this.nodes.length-1),I.deleteSelectedSkills(),I.setConfigAndRestart(this.oldConfig,!1),I.updateAllDisplay(),I.scrollToTime()}redo(){I.insertRecordNodes(this.nodes,this.index),I.setConfigAndRestart(this.newConfig,!1),I.updateAllDisplay(),I.scrollToTime()}}class hP extends Si{oldIndex;newIndex;constructor(t,n){super({en:"change active slot",zh:""}),this.oldIndex=t,this.newIndex=n}undo(){I.setActiveSlot(this.oldIndex),I.displayCurrentState()}redo(){I.setActiveSlot(this.newIndex),I.displayCurrentState()}}class fP extends Si{deleteIndex;deletedRecord;constructor(t,n){super({en:"delete slot",zh:""}),this.deleteIndex=t,this.deletedRecord=n}undo(){I.timeline.addSlotAtIndex(this.deleteIndex),I.loadBattleRecordFromFile(this.deletedRecord),I.autoSave(),I.displayCurrentState()}redo(){I.timeline.removeSlot(this.deleteIndex),I.displayCurrentState()}}class EP extends Si{oldIndex;constructor(t){super({en:"add slot",zh:""}),this.oldIndex=t}undo(){I.timeline.removeSlot(I.timeline.slots.length-1),I.setActiveSlot(this.oldIndex),I.displayCurrentState()}redo(){I.setActiveSlot(this.oldIndex),I.timeline.addSlot(),I.displayCurrentState()}}class mP extends Si{sourceIndex;constructor(t){super({en:"clone slot",zh:""}),this.sourceIndex=t}undo(){I.timeline.removeSlot(I.timeline.slots.length-1),I.setActiveSlot(this.sourceIndex),I.displayCurrentState()}redo(){I.setActiveSlot(this.sourceIndex),I.cloneActiveSlot(),I.displayCurrentState()}}class AP extends Si{oldConfig;newConfig;oldRecord;constructor(t,n,o){super({en:"change config",zh:""}),this.oldConfig=t,this.newConfig=n,o===void 0&&(t.job!==n.job||t.level!==n.level)&&console.error("config apply w/o reset but job or level changed"),this.oldRecord=o}undo(){this.oldRecord!==void 0?(I.loadBattleRecordFromFile(this.oldRecord),I.autoSave()):I.setConfigAndRestart(this.oldConfig,!1),I.updateAllDisplay(),I.scrollToTime()}redo(){I.setConfigAndRestart(this.newConfig,this.oldRecord!==void 0),I.updateAllDisplay(),I.scrollToTime()}}class RP extends Si{oldRecord;importedRecord;constructor(t,n){super({en:"import from file",zh:""}),this.oldRecord=t,this.importedRecord=n}undo(){I.loadBattleRecordFromFile(this.oldRecord),I.autoSave(),I.displayCurrentState()}redo(){I.loadBattleRecordFromFile(this.importedRecord),I.autoSave(),I.displayCurrentState()}}let e0,t0=[];const a0="",n0=", ",PA=":";function TP(e){const t=I.record.getSelected().actions,n=I.record.selectionStartIndex;if(n===void 0)return"";let o="";if(e==="plain"){const s=[];t.forEach(d=>s.push(d.toLocalizedString()));const c=Mi()==="zh"?a0:n0;o=s.join(c)}else if(e==="tsv"){const s=[],c=I.checkRecordValidity(I.record,0);t.forEach((d,f)=>s.push([c.skillUseTimes[f+n].toFixed(3),d.targetList.length,d.toLocalizedString()].join("	"))),o=s.join(`
`)}else if(e==="discord"){const s=[];t.forEach(c=>{if(c.info.type===ke.Skill){const d=c.info.skillName;d==="TINCTURE"?s.push(":IntPot:"):d==="SWIFTCAST"?s.push(I.gameConfig.job==="BLM"?":Swift:":":Swiftcast:"):s.push(`:${Ia[d].discordEmote??Ia[d].name.replaceAll(" ","")}:`)}else s.push(c.toLocalizedString())}),o=s.join(" ")}else console.error("invalid clipboard mode",e);return e0=o,t0=t,o}function SP(e){return e==="."||e>="0"&&e<="9"}function i0(e,t){const n=e.toLowerCase(),o=t?.toLowerCase();if(n==="wait mp"||e===""||n==="wait"&&o===" mp"||e===""&&t?.substring(3,5)==="")return SC();const s=e.split(" ");if(!(t!==void 0&&SP(t[0]))){if(s.length===2&&s[0]==="wait"){const c=Vi(s[1]);return isNaN(c)?void 0:vr(c)}if(e.startsWith("")){const c=Vi(e.substring(3));return isNaN(c)?void 0:vr(c)}if(s.length===2&&s[0]==="jump"){const c=Vi(s[1]);return isNaN(c)?void 0:fl(c)}if(e.startsWith("")){const c=Vi(e.substring(2));return isNaN(c)?void 0:fl(c)}if(s.length>=2&&s[0]==="toggle"){const c=up(s.slice(1).join(" "));return c!==void 0?eR(c):void 0}if(e.startsWith("")){const c=up(e.substring(2));return c!==void 0?eR(c):void 0}}}function Jp(e,t=1){const n=i0(e,void 0);if(n!==void 0)return n;const o=lT(e)??mC.get(e)??AC.get(e);return o!==void 0?Al(o,Array(t).fill(0).map((s,c)=>c+1)):void 0}function gP(e){if(e===e0)return t0;const t=e.split(`
`),n=[];for(const o of t){const s=o.trimStart();if(o.includes("	")){const c=o.split("	");if(c.length>0){const d=c[c.length-1].trim();let f=1;if(c.length>1){const m=parseInt(c[c.length-2]);isNaN(m)||(f=m)}const h=Jp(d,f);h!==void 0&&n.push(h)}}else if(s.length>2&&s[0]===PA){let c=!0,d="";for(let f=1;f<s.length;f++){const h=s[f];if(c&&(h===PA||h===" ")){const R=d.indexOf("~");if(R>0&&(d=d.substring(0,R)),d.toLowerCase().endsWith("_ogcd")&&(d=d.substring(0,d.length-5)),d.length!==0)if(d==="IntPot")n.push(Al("TINCTURE"));else if(d==="Swift"||d==="Swiftcast")n.push(Al("SWIFTCAST"));else{const T=oT.get(I.gameConfig.job).get(d);T!==void 0?n.push(Al(T)):console.error("unrecognized discord emote",d)}d="",c=!1;continue}if(h===PA&&d.length===0){c=!0,d="";continue}(d.length>0||h!==" ")&&(d+=h);const m=s.substring(f+1,f+4);if(!c){const R=i0(d,m);R!==void 0&&(n.push(R),d="")}}}else{let c=s.split(n0);c.length<2&&(c=s.split(a0)),c.forEach(d=>{if(d.length>0){const f=Jp(d.trim());f!==void 0&&n.push(f)}})}}return n}function mR(){navigator.clipboard.writeText(TP(I.clipboardMode))}function o0(){I.queuedPastes++,navigator.clipboard.readText().then(e=>{if(e.startsWith("https://")||e.startsWith("www.")||e.startsWith("cn."))return;const t=gP(e);if(t===void 0||t.length===0){console.error("failed to paste parsed clipboard contents:"),console.error(e);return}I.undoStack.doThenPush(new DT(t,I.record.selectionStartIndex??I.record.length,"paste"))}).finally(()=>{I.queuedPastes--,console.assert(I.queuedPastes>=0)})}class ma{name;duration;color;damageFactor;critBonus;dhBonus;job;constructor(t,n,o,s,c,d,f){this.name=t,this.duration=o,this.color=n,this.damageFactor=s,this.critBonus=c,this.dhBonus=d,this.job=f}}const yT=[new ma(k.ArcaneCircle,ft.Pink,20,1.03,0,0,"RPR"),new ma(k.ArmysPaeon,ft.Yellow,45,1,0,.03,"BRD"),new ma(k.BattleLitany,ft.Blue,20,1,.1,0,"DRG"),new ma(k.BattleVoice,ft.Orange,20,1,0,.2,"BRD"),new ma(k.Brotherhood,ft.Orange,20,1.05,0,0,"MNK"),new ma(k.Card_TheBalance,ft.Red,15,1.03,0,0,"AST"),new ma(k.Card_TheSpear,ft.Blue,15,1.06,0,0,"AST"),new ma(k.ChainStratagem,ft.Grey,20,1,.1,0,"SCH"),new ma(k.Devilment,ft.Green,20,1,.2,.2,"DNC"),new ma(k.Divination,ft.Yellow,20,1.06,0,0,"AST"),new ma(k.Dokumori,ft.Purple,21,1.05,0,0,"NIN"),new ma(k.Embolden,ft.Grey,20,1.05,0,0,"RDM"),new ma(k.MagesBallad,ft.Purple,45,1.01,0,0,"BRD"),new ma(k.RadiantFinale1,ft.Purple,20,1.02,0,0,"BRD"),new ma(k.RadiantFinale2,ft.Purple,20,1.04,0,0,"BRD"),new ma(k.RadiantFinale3,ft.Purple,20,1.06,0,0,"BRD"),new ma(k.SearingLight,ft.Blue,20,1.05,0,0,"SMN"),new ma(k.StandardFinish,ft.Yellow,60,1.05,0,0,"DNC"),new ma(k.StarryMuse,ft.Purple,20.5,1.05,0,0,"PCT"),new ma(k.TechnicalFinish,ft.Blue,20,1.05,0,0,"DNC"),new ma(k.WanderersMinuet,ft.Green,45,1,.02,0,"BRD")],l0=new Map;yT.forEach(e=>{l0.set(e.name,e)});let Qh=class{name;info;constructor(t){this.name=t;let n=l0.get(t);n||(n=yT[0],console.error("Buff info not found!")),this.info=n}};const s0=152,lh=5882,qa=5925,GA={main:qa,spellSpeed:420,skillSpeed:420,criticalHit:3387,directHit:1935,determination:2407,piety:440,tenacity:420},$h={DRK:{main:lh,spellSpeed:420,skillSpeed:420,criticalHit:3404,directHit:1068,determination:2883,piety:440,tenacity:794},GNB:{main:lh,spellSpeed:420,skillSpeed:420,criticalHit:3404,directHit:1068,determination:2883,piety:440,tenacity:794},PLD:{main:lh,spellSpeed:420,skillSpeed:420,criticalHit:3242,directHit:1230,determination:2883,piety:440,tenacity:794},WAR:{main:lh,spellSpeed:420,skillSpeed:420,criticalHit:3404,directHit:1068,determination:2883,piety:440,tenacity:794},AST:{main:qa,spellSpeed:704,skillSpeed:420,criticalHit:3427,directHit:1230,determination:2510,piety:718,tenacity:420},SCH:{main:qa,spellSpeed:1221,skillSpeed:420,criticalHit:3484,directHit:852,determination:2314,piety:718,tenacity:420},SGE:{main:qa,spellSpeed:704,skillSpeed:420,criticalHit:3427,directHit:1230,determination:2510,piety:718,tenacity:420},WHM:{main:qa,spellSpeed:704,skillSpeed:420,criticalHit:3427,directHit:1230,determination:2510,piety:718,tenacity:420},DRG:{main:qa,spellSpeed:420,skillSpeed:420,criticalHit:3425,directHit:1996,determination:2308,piety:440,tenacity:420},MNK:{main:qa,spellSpeed:420,skillSpeed:968,criticalHit:3487,directHit:1685,determination:2009,piety:440,tenacity:420},NIN:{main:qa,spellSpeed:420,skillSpeed:420,criticalHit:3378,directHit:1981,determination:2370,piety:440,tenacity:420},RPR:{main:qa,spellSpeed:420,skillSpeed:474,criticalHit:3425,directHit:1942,determination:2308,piety:440,tenacity:420},SAM:{main:qa,spellSpeed:420,skillSpeed:690,criticalHit:3425,directHit:2045,determination:1989,piety:440,tenacity:420},VPR:{main:qa,spellSpeed:420,skillSpeed:420,criticalHit:3378,directHit:1981,determination:2370,piety:440,tenacity:420},DNC:GA,BRD:GA,MCH:GA,BLM:{main:qa,spellSpeed:978,skillSpeed:420,criticalHit:3456,directHit:1764,determination:1951,piety:440,tenacity:420},RDM:{main:qa,spellSpeed:528,skillSpeed:420,criticalHit:3399,directHit:1872,determination:2350,piety:440,tenacity:420},SMN:{main:qa,spellSpeed:528,skillSpeed:420,criticalHit:3399,directHit:1872,determination:2350,piety:440,tenacity:420},PCT:{main:qa,spellSpeed:420,skillSpeed:420,criticalHit:3399,directHit:1764,determination:2566,piety:440,tenacity:420},BLU:{main:1701,spellSpeed:1573,skillSpeed:380,criticalHit:1343,directHit:785,determination:676,piety:340,tenacity:380},NEVER:{main:qa,spellSpeed:420,skillSpeed:420,criticalHit:420,directHit:420,determination:440,piety:440,tenacity:420}};function AR(e,t=$e.lvl100){return{job:e,shellVersion:HR.version,level:t??(e==="BLU"?$e.lvl80:$e.lvl100),...$h[e],wd:s0,countdown:5,randomSeed:"sup",fps:60,gcdSkillCorrection:0,animationLock:.7,timeTillFirstManaTick:1.2,procMode:hn.Never,initialResourceOverrides:[]}}function IP(e){const t=Tt(`defaultPartialConfig: ${e}`);if(t===null)return $h[e];const n=JSON.parse(t);return Object.entries($h[e]).forEach(([o,s])=>{n[o]===void 0&&(n[o]=s)}),n}const Rh=AR("BLM");class ci{job;shellVersion=HR.version;level;wd;main;spellSpeed;skillSpeed;criticalHit;directHit;determination;piety;tenacity;countdown;randomSeed;fps;gcdSkillCorrection;animationLock;timeTillFirstManaTick;procMode;initialResourceOverrides;legacy_casterTax;constructor(t){this.job=t.job,this.shellVersion=t.shellVersion;const n=Rh;this.level=t.level??n.level,this.spellSpeed=t.spellSpeed,this.skillSpeed=t.skillSpeed??n.skillSpeed,this.criticalHit=t.criticalHit??n.criticalHit,this.directHit=t.directHit??n.directHit,this.determination=t.determination??n.determination,this.piety=t.piety??n.piety,this.countdown=t.countdown,this.randomSeed=t.randomSeed,this.fps=t.fps,this.gcdSkillCorrection=t.gcdSkillCorrection,this.animationLock=t.animationLock,this.timeTillFirstManaTick=t.timeTillFirstManaTick,this.procMode=t.procMode,this.initialResourceOverrides=t.initialResourceOverrides.map(o=>{if(o.effectOrTimerEnabled===void 0&&(o.enabled===void 0?o.effectOrTimerEnabled=!0:o.effectOrTimerEnabled=o.enabled),!(o.type in Pe||o.type in ns))if(o.type.toString()==="AstralFire")o.type="ASTRAL_FIRE";else if(o.type.toString()==="UmbralIce")o.type="UMBRAL_ICE";else if(o.type.toString()==="UmbralHeart")o.type="UMBRAL_HEART";else{let s=Object.keys(Pe).find(c=>Pe[c].name===o.type);s||(s=Object.keys(ns).find(c=>ns[c].name===o.type)),s&&(o.type=s)}return new iT(o)}),this.legacy_casterTax=t?.casterTax??0,this.tenacity=t?.tenacity??420,this.main=t?.main??qa,this.wd=t?.wd??s0}adjustedOvertimePotency(t,n){return ut.overtimePotency(this.level,n==="sks"?this.skillSpeed:n==="sps"?this.spellSpeed:ut.getSubstatBase(this.level),t)}adjustedGCD(t=2.5,n){return this.shellVersion>=Do.AllaganGcdFormula?ut.preTaxGcd(this.level,this.spellSpeed,t,n):ut.preTaxGcdLegacy(this.level,this.spellSpeed,t,n)}adjustedSksGCD(t=2.5,n){return this.shellVersion>=Do.AllaganGcdFormula?ut.preTaxGcd(this.level,this.skillSpeed,t,n):ut.preTaxGcdLegacy(this.level,this.skillSpeed,t,n)}adjustedCastTime(t,n){return ut.preTaxCastTime(this.level,this.spellSpeed,t,n)}adjustedSksCastTime(t,n){return ut.preTaxCastTime(this.level,this.skillSpeed,t,n)}getAfterTaxGCD(t){return this.shellVersion<Do.FpsTax?t:ut.afterFpsTax(this.fps,t)+this.gcdSkillCorrection}getAfterTaxCastTime(t){return this.shellVersion<Do.FpsTax?this.legacy_casterTax+t:ut.afterFpsTax(this.fps,t)+ut.afterFpsTax(this.fps,Yx)+this.gcdSkillCorrection}static getSlidecastWindow(t){return .5}get critRate(){return ut.criticalHitRate(this.level,this.criticalHit)}getOverrideStacks(t){return this.initialResourceOverrides.find(n=>n.type===t)?.stacks}savePartialConfig(){const t={};Object.keys($h[this.job]).forEach(n=>{t[n]=this[n]}),gt(`defaultPartialConfig: ${this.job}`,JSON.stringify(t))}serialized(){return{job:this.job,shellVersion:this.shellVersion,level:this.level,wd:this.wd,main:this.main,spellSpeed:this.spellSpeed,skillSpeed:this.skillSpeed,criticalHit:this.criticalHit,directHit:this.directHit,determination:this.determination,piety:this.piety,tenacity:this.tenacity,countdown:this.countdown,randomSeed:this.randomSeed,casterTax:this.legacy_casterTax,fps:this.fps,gcdSkillCorrection:this.gcdSkillCorrection,animationLock:this.animationLock,timeTillFirstManaTick:this.timeTillFirstManaTick,procMode:this.procMode,initialResourceOverrides:this.initialResourceOverrides.map(t=>t.serialized())}}}function _P(e){const t=St();return l.jsx("div",{style:{top:1+(e.offset?.y??0),left:e.offset?.x??0,marginRight:8,position:"relative",width:16,height:16,borderRadius:8,display:"inline-block",border:"1px solid "+t.bgHighContrast,verticalAlign:"top"},children:e.color&&l.jsx("div",{style:{backgroundColor:`${e.color}`,position:"absolute",top:2,bottom:2,left:2,right:2,borderRadius:"inherit"}})})}function pP(e){const t=St(),n=e.heightPx??30,o=e.widthPx??24;let s;return e.imgUrl?s=l.jsx("img",{src:e.imgUrl,alt:"resource img",style:{display:"block",margin:"2px auto",maxWidth:n-4,maxHeight:o-4}}):e.color&&(s=l.jsx("div",{style:{backgroundColor:e.color,position:"absolute",top:3,bottom:3,left:3,right:3}})),l.jsx("div",{style:{display:"inline-block",position:"relative",top:e.offset?.y??0,left:e.offset?.x??0,width:n,height:o,border:"1px solid "+t.bgHighContrast,marginRight:4},children:s})}function Th(e={name:"placeholder",color:"#6cf",value:"0.34/1.00",progress:.34,width:100,hidden:!1}){return l.jsxs("div",{hidden:e.hidden,style:{marginBottom:4,lineHeight:"1.5em"},children:[l.jsx("div",{style:{display:"inline-block",height:"100%",width:108},children:e.name}),l.jsxs("div",{style:{width:200,display:"inline-block"},children:[l.jsx(nP,{backgroundColor:e.color,progress:e.progress,width:e.width,offsetY:4}),l.jsx("div",{style:{marginLeft:6,height:"100%",display:"inline-block"},children:e.value})]})]})}function Yi(e){const t=e.containerType==="box"||e.items.some(o=>o.imgUrl!==void 0),n=e.items.map((o,s)=>e.containerType==="circle"&&o.imgUrl===void 0?l.jsx(_P,{color:o.color,offset:t?{x:0,y:3}:void 0},s):l.jsx(pP,{color:o.color,imgUrl:o.imgUrl,offset:t?{x:-2,y:0}:void 0,heightPx:o.boxHeightPx,widthPx:o.boxWidthPx},s));return t?l.jsxs("div",{style:{marginBottom:4},children:[l.jsx("div",{style:{display:"inline-block",position:"relative",verticalAlign:"top",top:6,width:108},children:e.name}),l.jsx("div",{style:{display:"inline-block"},children:n}),e.label?l.jsx("div",{style:{marginLeft:6,display:"inline-block",position:"relative",verticalAlign:"top",top:6},children:e.label}):void 0]}):l.jsxs("div",{style:{marginBottom:4,lineHeight:"1.5em"},children:[l.jsx("div",{style:{display:"inline-block",height:"100%",width:108},children:e.name}),l.jsxs("div",{style:{width:200,display:"inline-block"},children:[l.jsx("div",{style:{display:"inline-block"},children:n}),e.label?l.jsx("div",{style:{marginLeft:6,height:"100%",display:"inline-block"},children:e.label}):void 0]})]})}function eN(e){return l.jsxs("div",{className:e.className,style:{marginBottom:4,lineHeight:"1.5em"},children:[l.jsx("div",{style:{display:"inline-block",height:"100%",width:108},children:e.name}),l.jsx("div",{style:{width:200,display:"inline-block"},children:l.jsx("div",{style:{display:"inline-block",marginLeft:6,color:e.color},children:e.text})})]})}const ms=new Map;function zt(e,t){ms.set(e,`Buffs/${t}`);const n=Pe[e].maximumStacks??1;for(let o=2;o<=n;o++)ms.set(e+o,`Buffs/${t.replace(Pe[e].name,Pe[e].name+o)}`)}Object.keys(aC).forEach(e=>{const t=Pe[e].name;ms.set(e,`Buffs/Role/${t}.png`)});Object.keys(tC).forEach(e=>ms.set(e,"Buffs/Role/Tank Limit Break.png"));ms.set("SPRINT","Buffs/General/Sprint.png");ms.set("TINCTURE","Buffs/General/Tincture.png");function NP(e){let t=e.rscType;e.stacks>1&&(t+=e.stacks);let n;e.rscType==="AUTOS_ENGAGED"||e.rscType==="REAR_POSITIONAL"||e.rscType==="FLANK_POSITIONAL"?n={height:40}:n={height:40};const o=Pe[e.rscType].mayNotBeCanceled,s={display:"inline-block",verticalAlign:"top",filter:e.enabled?"none":"grayScale(100%)"},c=l.jsx("img",{style:n,src:"assets/"+ms.get(t),alt:e.rscType});return l.jsxs("div",{title:Ke(e.rscType),className:e.className+" buff "+e.rscType,children:[o?l.jsx("div",{style:s,children:c}):l.jsx(Es,{content:c,style:s,onClickFn:()=>{(e.onSelf||e.targetNumber!==void 0)&&(I.requestToggleBuff(e.rscType,!0,e.targetNumber),I.updateStatusDisplay(I.game),I.updateSkillButtons(I.game),I.autoSave(),va())}}),l.jsx("span",{className:"buff-label",style:{visibility:e.timeRemaining===void 0?"hidden":void 0},children:(e.timeRemaining??"0.000")+(e.targetNumber!==void 0?` ( ${e.targetNumber})`:"")})]})}function Jh(e){const t=e.data,n=[];for(let s=0;s<t.length;s++)n.push(l.jsx(NP,{...t[s]},s));let o={height:54,textAlign:"right",lineHeight:"1em"};return e.style&&(o={...o,...e.style}),l.jsx("div",{style:o,children:n})}function r0(e){const t=St(),n=e.data,o=l.jsx(Th,{name:"GCD",color:t.resources.gcdBar,progress:n.gcdReady?0:1-n.timeTillGCDReady/n.gcd,value:n.timeTillGCDReady.toFixed(3),width:100,hidden:n.gcdReady}),s=l.jsx(Th,{name:"casting/taxed",color:n.canMove?t.resources.gcdBar:t.resources.lockBar,progress:n.castLocked?1-n.castLockCountdown/n.castLockTotalDuration:0,value:n.castLockCountdown.toFixed(3),width:100,hidden:!n.castLocked}),c=l.jsx(Th,{name:"using skill",color:t.resources.lockBar,progress:n.animLocked?1-n.animLockCountdown/n.animLockTotalDuration:0,value:n.animLockCountdown.toFixed(3),width:100,hidden:!n.animLocked});return l.jsxs("div",{style:{position:"absolute"},children:[o,s,c]})}function c0(e){const t=e.data.resources.map((o,s)=>{switch(o.kind){case"bar":return l.jsx(Th,{name:o.name,color:o.color,progress:o.progress,value:o.valueString,width:o.widthPx??100,hidden:o.hidden??!1},"resourceDisplay"+s);case"counter":{const c=[];for(let d=0;d<o.maxStacks;d++)c.push({color:d<o.currentStacks?o.color:void 0});return l.jsx(Yi,{containerType:"circle",name:o.name,label:o.valueString??`${o.currentStacks}/${o.maxStacks}`,items:c},"resourceDisplay"+s)}case"paint":{const c=[];for(let f=0;f<o.maxStacks;f++){const h=o.hasComet&&f===o.currentStacks-1?o.cometColor:o.holyColor;c.push({color:f<o.currentStacks?h:void 0,imgUrl:void 0})}const d=`${o.currentStacks}/${o.maxStacks}`;return l.jsx(Yi,{containerType:"circle",name:o.name,label:d,items:c},"resourceDisplay"+s)}case"dance":{const c=o.currentStacks,d=[o.emboiteColor,o.entrechatColor,o.jeteColor,o.pirouetteColor],f=[];for(let m=0;m<o.maxStacks;m++)f.push({color:m<c?d[m]:void 0});const h=`${c}/${o.maxStacks}`;return l.jsx(Yi,{containerType:"circle",name:o.name,label:h,items:f},"resourceDisplay"+s)}case"sen":{const c=[{present:o.hasSetsu,color:o.setsuColor,name:"setsu"},{present:o.hasGetsu,color:o.getsuColor,name:"getsu"},{present:o.hasKa,color:o.kaColor,name:"ka"}],d=l.jsx(ze,{topic:"senExplanation",content:N({en:"from left to right: setsu (yukikaze), getsu (gekko/mangetsu), ka (kasha/oka)",zh:"//"})});return l.jsx(Yi,{name:l.jsxs(l.Fragment,{children:[o.name," ",d]}),label:c.filter(f=>f.present).map(f=>f.name).join("+"),containerType:"circle",items:c.map(f=>({color:f.present?f.color:void 0}))},"resourceDisplay"+s)}case"coda":{const c=[{present:o.hasWanderers,color:o.wanderersColor},{present:o.hasMages,color:o.magesColor},{present:o.hasArmys,color:o.armysColor}],d=l.jsx(ze,{topic:"codaExplanation",content:N({en:"from left to right: wanderer's coda, mage's coda, army's coda"})});return l.jsx(Yi,{name:l.jsxs(l.Fragment,{children:[o.name," ",d]}),containerType:"circle",items:c.map(f=>({color:f.present?f.color:void 0}))},"resourceDisplay"+s)}case"attunement":{const c=[{gem:o.ruby,color:o.rubyColor},{gem:o.topaz,color:o.topazColor},{gem:o.emerald,color:o.emeraldColor}];return l.jsxs("div",{children:[l.jsx(Yi,{name:o.aetherName,containerType:"circle",items:c.map(d=>({color:d.gem?d.color:void 0}))}),l.jsx(eN,{name:o.attunementName,text:o.attunementCount.toString()+(o.attunementCount>0?` | ${o.timeRemaining.toFixed(3)}`:"")})]},"resourceDisplay"+s)}case"nadi":return l.jsx("div",{children:l.jsx(Yi,{name:o.name,label:o.label,containerType:"circle",items:[{color:o.lunar?o.lunarColor:void 0},{color:o.solar?o.solarColor:void 0}]})},"resourceDisplay"+s);case"beast":{const c=new Array(3).map(d=>({color:void 0}));return o.chakras.map((d,f)=>{c[f]={color:d==="opo"?o.opoColor:d==="raptor"?o.raptorColor:d==="coeurl"?o.coeurlColor:void 0}}),l.jsx("div",{children:l.jsx(Yi,{name:o.name,label:o.label,containerType:"circle",items:c})},"resourceDisplay"+s)}case"chakra":{const c=o.value>o.wrapCount,d=c?o.value%o.wrapCount:o.value,f=new Array(o.wrapCount);for(let h=0;h<o.wrapCount;h++)f[h]={color:c?h+1>d?o.regularColor:o.overflowColor:h+1>d?void 0:o.regularColor};return l.jsx("div",{children:l.jsx(Yi,{name:o.name,label:o.label,containerType:"circle",items:f})},"resourceDisplay"+s)}case"arcana":{const c=o.activeSlots.map((d,f)=>{const h=f===o.activeSlots.length-1?18:20,m=f===o.activeSlots.length-1?16:20;return{color:d?o.currentArcanaColor:void 0,boxHeightPx:h,boxWidthPx:m}});return l.jsx("div",{children:l.jsx(Yi,{name:o.name,containerType:"box",items:c})},"resourceDisplay"+s)}default:return l.jsx(eN,{name:o.name,text:o.text,color:o.color},"resourceDisplay"+s)}});let n={textAlign:"left",minHeight:"13.5em"};return e.style&&(n={...n,...e.style}),l.jsx("div",{style:n,children:t})}let u0=(e,t)=>{};class CP extends Hn.Component{state;static contextType=pa;constructor(t){super(t),this.state={time:0,resources:[],enemyBuffs:[],selfBuffs:[],level:100,layoutFn:n=>l.jsx("div",{})},u0=(n,o)=>{const s=n(En(this.context));this.setState({layoutFn:o,...s})}}componentDidMount(){I.updateStatusDisplay(I.game)}render(){return l.jsxs("div",{style:{position:"relative",textAlign:"left",margin:"8px 0"},children:[l.jsx("div",{style:{position:"absolute",top:-8,right:0,zIndex:1},children:l.jsx(ze,{topic:"mainControlRegion",content:l.jsx("div",{className:"toolTip",children:N({en:l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"paragraph",children:[l.jsx("span",{style:{color:"lightgray"},children:"grey"})," border: not focused"]}),l.jsxs("div",{className:"paragraph",children:[l.jsx("b",{style:{color:"mediumpurple"},children:"purple"})," border: up-to-date, receiving input"]}),l.jsxs("div",{className:"paragraph",children:[l.jsx("b",{style:{color:"mediumseagreen"},children:"green"})," border: real-time"]}),l.jsxs("div",{className:"paragraph",children:[l.jsx("b",{style:{color:"darkorange"},children:"orange"})," border: viewing historical state, receiving input"]})]}),zh:l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"paragraph",children:[l.jsx("span",{style:{color:"lightgray"},children:""}),""]}),l.jsxs("div",{className:"paragraph",children:[l.jsx("b",{style:{color:"mediumpurple"},children:""}),""]}),l.jsxs("div",{className:"paragraph",children:[l.jsx("b",{style:{color:"mediumseagreen"},children:""}),""]}),l.jsxs("div",{className:"paragraph",children:[l.jsx("b",{style:{color:"darkorange"},children:""}),""]})]}),ja:l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"paragraph",children:[l.jsx("span",{style:{color:"lightgray"},children:""})," : "]}),l.jsxs("div",{className:"paragraph",children:[l.jsx("b",{style:{color:"mediumpurple"},children:""})," : "]}),l.jsxs("div",{className:"paragraph",children:[l.jsx("b",{style:{color:"mediumseagreen"},children:""})," : "]}),l.jsxs("div",{className:"paragraph",children:[l.jsx("b",{style:{color:"darkorange"},children:""})," : "]})]})})})})}),this.state.layoutFn(this.state)]})}}class Xt{state;constructor(t){this.state=t}makeCommonTimer(t,n=!0){const o=this.state.resources.timeTillReady(t),s=this.state.resources.get(t);return{rscType:t,onSelf:n,enabled:s.enabled,stacks:s.availableAmount(),timeRemaining:o.toFixed(3),className:s.availableAmountIncludingDisabled()>0?"":"hidden"}}makeTargetedTimers(t){return Array(bi).fill(0).map((n,o)=>{const s=o+1,c=this.state.debuffs.timeTillExpiry(t,s),d=this.state.debuffs.get(t,s);return{rscType:t,onSelf:!1,targetNumber:s,enabled:d.enabled,stacks:d.availableAmount(),timeRemaining:c.toFixed(3),className:d.availableAmountIncludingDisabled()>0?"":"hidden"}})}makeToggleableTimer(t,n=!0){const o=this.state.resources.timeTillReady(t),s=this.state.resources.get(t);return{rscType:t,onSelf:n,enabled:s.enabled,stacks:s.availableAmount(),timeRemaining:o.toFixed(3),className:s.availableAmountIncludingDisabled()>0?"":"hidden"}}makeCommonTimerless(t,n=!0){return{rscType:t,onSelf:n,enabled:!0,stacks:this.state.resources.get(t).availableAmount(),className:this.state.hasResourceAvailable(t)?"":"hidden"}}makeToggleableTimerless(t,n=!0){const o=this.state.resources.get(t);return{rscType:t,onSelf:n,enabled:o.enabled,stacks:o.availableAmount(),className:o.availableAmountIncludingDisabled()>0?"":"hidden"}}jobSpecificOtherTargetedBuffViewProps(){return[]}getAllOtherTargetedBuffViewProps(){const t=this.state.job,n=[];return dt[t].role==="TANK"&&n.push(this.makeCommonTimer("REPRISAL",!1)),dt[t].role==="MELEE"&&n.push(this.makeCommonTimer("FEINT",!1)),dt[t].role==="CASTER"&&n.push(this.makeCommonTimer("ADDLE",!1)),[...this.jobSpecificOtherTargetedBuffViewProps(),...n]}jobSpecificSelfTargetedBuffViewProps(){return[]}getAllSelfTargetedBuffViewProps(){const t=this.state.job,n=this.state.resources,o=[];if(dt[t].role==="TANK"){o.push(...["RAMPART","SHIELD_WALL","STRONGHOLD"].map(c=>this.makeCommonTimer(c)));const s=dt[t].limitBreakBuff??"UNKNOWN";s&&o.push(this.makeCommonTimer(s))}return dt[t].role==="MELEE"&&o.push(...["TRUE_NORTH","BLOODBATH"].map(s=>this.makeCommonTimer(s))),["TANK","MELEE","RANGED"].includes(dt[t].role)&&o.push(this.makeCommonTimer("ARMS_LENGTH")),["HEALER","CASTER"].includes(dt[t].role)&&o.push(...["SWIFTCAST","LUCID_DREAMING","SURECAST"].map(s=>this.makeCommonTimer(s))),o.push(this.makeCommonTimer("TINCTURE"),this.makeCommonTimer("SPRINT")),dt[t].role==="MELEE"&&o.push(...["REAR_POSITIONAL","FLANK_POSITIONAL"].map(s=>({rscType:s,onSelf:!0,enabled:n.get(s).enabled,stacks:1,className:""}))),(dt[t].role==="TANK"||dt[t].role==="MELEE")&&o.push(...["AUTOS_ENGAGED"].map(s=>({rscType:s,onSelf:!0,enabled:n.get(s).available(1),stacks:1,className:""}))),[...this.jobSpecificSelfTargetedBuffViewProps(),...o]}jobSpecificResourceViewProps(t){return[]}getAllResourceViewProps(t){if(!dt[this.state.job].usesMp)return this.jobSpecificResourceViewProps(t);const n=this.state.resources,o=n.timeTillReady("MANA"),s=n.get("MANA").availableAmount();return[{kind:"bar",name:"MP",color:t.resources.mana,progress:s/1e4,valueString:Math.floor(s)+"/10000"},{kind:"bar",name:N({en:"MP tick",zh:"",ja:"MP"}),color:t.resources.manaTick,progress:1-o/3,valueString:(3-o).toFixed(3)+"/3"},...this.jobSpecificResourceViewProps(t)]}statusLayoutFn(t){return l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:{display:"inline-block",verticalAlign:"top",width:"50%",height:"100%"},children:[l.jsxs("span",{style:{display:"block",marginBottom:10},children:[N({en:"time: ",zh:"",ja:""}),`${Xe.displayTime(t.time,3)} (${t.time.toFixed(3)})`]}),t.resources?l.jsx(c0,{data:{level:t.level,resources:t.resources}}):void 0]}),l.jsxs("div",{style:{position:"relative",display:"inline-block",float:"right",width:"50%"},children:[t.resourceLocks?l.jsx(r0,{data:t.resourceLocks}):void 0,l.jsx(Jh,{data:t.enemyBuffs,style:{marginBottom:"3em"}}),l.jsx(Jh,{data:t.selfBuffs})]})]})}}var Sh={exports:{}},bP=Sh.exports,tN;function OP(){return tN||(tN=1,function(e){(function(t,n,o){function s(h){var m=this,R=f();m.next=function(){var T=2091639*m.s0+m.c*23283064365386963e-26;return m.s0=m.s1,m.s1=m.s2,m.s2=T-(m.c=T|0)},m.c=1,m.s0=R(" "),m.s1=R(" "),m.s2=R(" "),m.s0-=R(h),m.s0<0&&(m.s0+=1),m.s1-=R(h),m.s1<0&&(m.s1+=1),m.s2-=R(h),m.s2<0&&(m.s2+=1),R=null}function c(h,m){return m.c=h.c,m.s0=h.s0,m.s1=h.s1,m.s2=h.s2,m}function d(h,m){var R=new s(h),T=m&&m.state,S=R.next;return S.int32=function(){return R.next()*4294967296|0},S.double=function(){return S()+(S()*2097152|0)*11102230246251565e-32},S.quick=S,T&&(typeof T=="object"&&c(T,R),S.state=function(){return c(R,{})}),S}function f(){var h=4022871197,m=function(R){R=String(R);for(var T=0;T<R.length;T++){h+=R.charCodeAt(T);var S=.02519603282416938*h;h=S>>>0,S-=h,S*=h,h=S>>>0,S-=h,h+=S*4294967296}return(h>>>0)*23283064365386963e-26};return m}n&&n.exports?n.exports=d:this.alea=d})(bP,e)}(Sh)),Sh.exports}var gh={exports:{}},DP=gh.exports,aN;function yP(){return aN||(aN=1,function(e){(function(t,n,o){function s(f){var h=this,m="";h.x=0,h.y=0,h.z=0,h.w=0,h.next=function(){var T=h.x^h.x<<11;return h.x=h.y,h.y=h.z,h.z=h.w,h.w^=h.w>>>19^T^T>>>8},f===(f|0)?h.x=f:m+=f;for(var R=0;R<m.length+64;R++)h.x^=m.charCodeAt(R)|0,h.next()}function c(f,h){return h.x=f.x,h.y=f.y,h.z=f.z,h.w=f.w,h}function d(f,h){var m=new s(f),R=h&&h.state,T=function(){return(m.next()>>>0)/4294967296};return T.double=function(){do var S=m.next()>>>11,g=(m.next()>>>0)/4294967296,p=(S+g)/(1<<21);while(p===0);return p},T.int32=m.next,T.quick=T,R&&(typeof R=="object"&&c(R,m),T.state=function(){return c(m,{})}),T}n&&n.exports?n.exports=d:this.xor128=d})(DP,e)}(gh)),gh.exports}var Ih={exports:{}},vP=Ih.exports,nN;function MP(){return nN||(nN=1,function(e){(function(t,n,o){function s(f){var h=this,m="";h.next=function(){var T=h.x^h.x>>>2;return h.x=h.y,h.y=h.z,h.z=h.w,h.w=h.v,(h.d=h.d+362437|0)+(h.v=h.v^h.v<<4^(T^T<<1))|0},h.x=0,h.y=0,h.z=0,h.w=0,h.v=0,f===(f|0)?h.x=f:m+=f;for(var R=0;R<m.length+64;R++)h.x^=m.charCodeAt(R)|0,R==m.length&&(h.d=h.x<<10^h.x>>>4),h.next()}function c(f,h){return h.x=f.x,h.y=f.y,h.z=f.z,h.w=f.w,h.v=f.v,h.d=f.d,h}function d(f,h){var m=new s(f),R=h&&h.state,T=function(){return(m.next()>>>0)/4294967296};return T.double=function(){do var S=m.next()>>>11,g=(m.next()>>>0)/4294967296,p=(S+g)/(1<<21);while(p===0);return p},T.int32=m.next,T.quick=T,R&&(typeof R=="object"&&c(R,m),T.state=function(){return c(m,{})}),T}n&&n.exports?n.exports=d:this.xorwow=d})(vP,e)}(Ih)),Ih.exports}var _h={exports:{}},LP=_h.exports,iN;function xP(){return iN||(iN=1,function(e){(function(t,n,o){function s(f){var h=this;h.next=function(){var R=h.x,T=h.i,S,g;return S=R[T],S^=S>>>7,g=S^S<<24,S=R[T+1&7],g^=S^S>>>10,S=R[T+3&7],g^=S^S>>>3,S=R[T+4&7],g^=S^S<<7,S=R[T+7&7],S=S^S<<13,g^=S^S<<9,R[T]=g,h.i=T+1&7,g};function m(R,T){var S,g=[];if(T===(T|0))g[0]=T;else for(T=""+T,S=0;S<T.length;++S)g[S&7]=g[S&7]<<15^T.charCodeAt(S)+g[S+1&7]<<13;for(;g.length<8;)g.push(0);for(S=0;S<8&&g[S]===0;++S);for(S==8?g[7]=-1:g[S],R.x=g,R.i=0,S=256;S>0;--S)R.next()}m(h,f)}function c(f,h){return h.x=f.x.slice(),h.i=f.i,h}function d(f,h){f==null&&(f=+new Date);var m=new s(f),R=h&&h.state,T=function(){return(m.next()>>>0)/4294967296};return T.double=function(){do var S=m.next()>>>11,g=(m.next()>>>0)/4294967296,p=(S+g)/(1<<21);while(p===0);return p},T.int32=m.next,T.quick=T,R&&(R.x&&c(R,m),T.state=function(){return c(m,{})}),T}n&&n.exports?n.exports=d:this.xorshift7=d})(LP,e)}(_h)),_h.exports}var ph={exports:{}},HP=ph.exports,oN;function kP(){return oN||(oN=1,function(e){(function(t,n,o){function s(f){var h=this;h.next=function(){var R=h.w,T=h.X,S=h.i,g,p;return h.w=R=R+1640531527|0,p=T[S+34&127],g=T[S=S+1&127],p^=p<<13,g^=g<<17,p^=p>>>15,g^=g>>>12,p=T[S]=p^g,h.i=S,p+(R^R>>>16)|0};function m(R,T){var S,g,p,_,O,D=[],L=128;for(T===(T|0)?(g=T,T=null):(T=T+"\0",g=0,L=Math.max(L,T.length)),p=0,_=-32;_<L;++_)T&&(g^=T.charCodeAt((_+32)%T.length)),_===0&&(O=g),g^=g<<10,g^=g>>>15,g^=g<<4,g^=g>>>13,_>=0&&(O=O+1640531527|0,S=D[_&127]^=g+O,p=S==0?p+1:0);for(p>=128&&(D[(T&&T.length||0)&127]=-1),p=127,_=4*128;_>0;--_)g=D[p+34&127],S=D[p=p+1&127],g^=g<<13,S^=S<<17,g^=g>>>15,S^=S>>>12,D[p]=g^S;R.w=O,R.X=D,R.i=p}m(h,f)}function c(f,h){return h.i=f.i,h.w=f.w,h.X=f.X.slice(),h}function d(f,h){f==null&&(f=+new Date);var m=new s(f),R=h&&h.state,T=function(){return(m.next()>>>0)/4294967296};return T.double=function(){do var S=m.next()>>>11,g=(m.next()>>>0)/4294967296,p=(S+g)/(1<<21);while(p===0);return p},T.int32=m.next,T.quick=T,R&&(R.X&&c(R,m),T.state=function(){return c(m,{})}),T}n&&n.exports?n.exports=d:this.xor4096=d})(HP,e)}(ph)),ph.exports}var Nh={exports:{}},UP=Nh.exports,lN;function wP(){return lN||(lN=1,function(e){(function(t,n,o){function s(f){var h=this,m="";h.next=function(){var T=h.b,S=h.c,g=h.d,p=h.a;return T=T<<25^T>>>7^S,S=S-g|0,g=g<<24^g>>>8^p,p=p-T|0,h.b=T=T<<20^T>>>12^S,h.c=S=S-g|0,h.d=g<<16^S>>>16^p,h.a=p-T|0},h.a=0,h.b=0,h.c=-1640531527,h.d=1367130551,f===Math.floor(f)?(h.a=f/4294967296|0,h.b=f|0):m+=f;for(var R=0;R<m.length+20;R++)h.b^=m.charCodeAt(R)|0,h.next()}function c(f,h){return h.a=f.a,h.b=f.b,h.c=f.c,h.d=f.d,h}function d(f,h){var m=new s(f),R=h&&h.state,T=function(){return(m.next()>>>0)/4294967296};return T.double=function(){do var S=m.next()>>>11,g=(m.next()>>>0)/4294967296,p=(S+g)/(1<<21);while(p===0);return p},T.int32=m.next,T.quick=T,R&&(typeof R=="object"&&c(R,m),T.state=function(){return c(m,{})}),T}n&&n.exports?n.exports=d:this.tychei=d})(UP,e)}(Nh)),Nh.exports}var Ch={exports:{}};const PP={},GP=Object.freeze(Object.defineProperty({__proto__:null,default:PP},Symbol.toStringTag,{value:"Module"})),BP=yM(GP);var FP=Ch.exports,sN;function jP(){return sN||(sN=1,function(e){(function(t,n,o){var s=256,c=6,d=52,f="random",h=o.pow(s,c),m=o.pow(2,d),R=m*2,T=s-1,S;function g(y,x,G){var B=[];x=x==!0?{entropy:!0}:x||{};var Y=D(O(x.entropy?[y,w(n)]:y??L(),3),B),X=new p(B),ie=function(){for(var oe=X.g(c),j=h,$=0;oe<m;)oe=(oe+$)*s,j*=s,$=X.g(1);for(;oe>=R;)oe/=2,j/=2,$>>>=1;return(oe+$)/j};return ie.int32=function(){return X.g(4)|0},ie.quick=function(){return X.g(4)/4294967296},ie.double=ie,D(w(X.S),n),(x.pass||G||function(oe,j,$,Ee){return Ee&&(Ee.S&&_(Ee,X),oe.state=function(){return _(X,{})}),$?(o[f]=oe,j):oe})(ie,Y,"global"in x?x.global:this==o,x.state)}function p(y){var x,G=y.length,B=this,Y=0,X=B.i=B.j=0,ie=B.S=[];for(G||(y=[G++]);Y<s;)ie[Y]=Y++;for(Y=0;Y<s;Y++)ie[Y]=ie[X=T&X+y[Y%G]+(x=ie[Y])],ie[X]=x;(B.g=function(oe){for(var j,$=0,Ee=B.i,V=B.j,P=B.S;oe--;)j=P[Ee=T&Ee+1],$=$*s+P[T&(P[Ee]=P[V=T&V+j])+(P[V]=j)];return B.i=Ee,B.j=V,$})(s)}function _(y,x){return x.i=y.i,x.j=y.j,x.S=y.S.slice(),x}function O(y,x){var G=[],B=typeof y,Y;if(x&&B=="object")for(Y in y)try{G.push(O(y[Y],x-1))}catch{}return G.length?G:B=="string"?y:y+"\0"}function D(y,x){for(var G=y+"",B,Y=0;Y<G.length;)x[T&Y]=T&(B^=x[T&Y]*19)+G.charCodeAt(Y++);return w(x)}function L(){try{var y;return S&&(y=S.randomBytes)?y=y(s):(y=new Uint8Array(s),(t.crypto||t.msCrypto).getRandomValues(y)),w(y)}catch{var x=t.navigator,G=x&&x.plugins;return[+new Date,t,G,t.screen,w(n)]}}function w(y){return String.fromCharCode.apply(0,y)}if(D(o.random(),n),e.exports){e.exports=g;try{S=BP}catch{}}else o["seed"+f]=g})(typeof self<"u"?self:FP,[],Math)}(Ch)),Ch.exports}var BA,rN;function zP(){if(rN)return BA;rN=1;var e=OP(),t=yP(),n=MP(),o=xP(),s=kP(),c=wP(),d=jP();return d.alea=e,d.xor128=t,d.xorwow=n,d.xorshift7=o,d.xor4096=s,d.tychei=c,BA=d,BA}var YP=zP();const cN=zN(YP);class qt{config;rng;nonProcRng;lucidTickOffset;dotTickOffset;hotTickOffset;time;resources;debuffs;cooldowns;eventsQueue;skillsList;displayedSkills;autoAttackDelay;overTimeEffectGroups=[];dotResources=[];hotResources=[];excludedDoTs=[];excludedHoTs=[];fullTimeDoTs=[];#e=[];#t=[];dotSkills=[];petSkills=[];hotSkills=[];#a=new Map;#n=new Map;autoStartTimes;autoStopTimes;constructor(t){this.config=t,this.rng=cN(t.randomSeed),this.nonProcRng=cN(t.randomSeed+"_nonProcs"),this.lucidTickOffset=this.nonProcRng()*3,this.dotTickOffset=this.nonProcRng()*3,this.hotTickOffset=this.nonProcRng()*3,this.time=0,this.resources=new sH(this),this.debuffs=new rH(this),this.cooldowns=new lH(this),Qi(this.job).forEach((o,s)=>{o.isCoolDown?this.cooldowns.set(new Ue(s,o.cdPerStack,o.maxStacks,o.maxStacks)):Pe[s].specialDebuff?this.debuffs.initialize(s):this.resources.set(new _a(s,o.maxValue,o.defaultValue,o.warnOnOvercap))});let n=2.5;switch(dt[this.job].role){case"TANK":case"MELEE":case"RANGED":n=t.adjustedSksGCD();break;case"HEALER":case"CASTER":n=t.adjustedGCD();break}this.cooldowns.set(new Ue("cd_GCD",t.getAfterTaxGCD(n),1,1)),this.resources.set(new _a("MOVEMENT",1,1)),this.resources.set(new _a("NOT_ANIMATION_LOCKED",1,1)),this.resources.set(new _a("NOT_CASTER_TAXED",1,1)),this.resources.set(new _a("IN_COMBAT",1,0)),this.cooldowns.set(new Ue("NEVER",0,0,0)),this.eventsQueue=[],this.skillsList=new hH(this),this.displayedSkills=new fH(this.job,t.level),this.autoAttackDelay=2.5,this.autoStartTimes=[],this.autoStopTimes=[]}get statusPropsGenerator(){return new Xt(this)}get job(){return this.config.job}get partySize(){return this.resources.get("PARTY_SIZE").availableAmount()}registerRecurringEvents(t=[],n=[]){const o=this;{const f=()=>{const h=this.resources.get("MANA"),m=this.captureManaRegenAmount();h.gain(m);const R=h.availableAmount();I.reportManaTick(o.time,"+"+m+" (MP="+R+")"),this.resources.addResourceEvent({rscType:"MANA",name:"mana tick",delay:3,fnOnRsc:T=>{f()},tags:[dn.MpTick,dn.ManaGain]})};this.resources.addResourceEvent({rscType:"MANA",name:"initial mana tick",delay:this.config.timeTillFirstManaTick,fnOnRsc:f,tags:[dn.MpTick,dn.ManaGain]})}const s=()=>{const f=this.resources.get("LUCID_DREAMING");if(f.available(1)&&(f.tickCount++,!(this.job==="BLM"&&this.hasResourceAvailable("ASTRAL_FIRE")))){const m=this.resources.get("MANA");m.gain(550);let R="+550";if(console.assert(f.node!==void 0),f.node){let T="??";f.node.tmp_startLockTime&&(T=(f.node.tmp_startLockTime-this.config.countdown).toFixed(3)),R+=" {skill}@"+T,R+=" ("+f.tickCount+"/7)"}R+=" (MP="+m.availableAmount()+")",I.reportLucidTick(this.time,R)}const h=new Oe("lucid tick",3,()=>{s()});h.addTag(dn.LucidTick),f.available(1)&&f.pendingChange&&f.pendingChange.timeTillEvent>=3&&h.addTag(dn.ManaGain),this.addEvent(h)};if([...Ri,...Ti].includes(this.job)){let f=this.config.timeTillFirstManaTick+this.lucidTickOffset;for(;f>3;)f-=3;const h=new Oe("initial lucid tick",f,s);h.addTag(dn.LucidTick),this.addEvent(h)}const c=()=>{this.dotResources.filter(f=>!this.excludedDoTs.includes(f)).forEach(f=>this.handleDoTTick(f)),this.getDisplayTime()>=0&&I.reportDotTick(this.time),this.addEvent(new Oe("DoT tick",3,()=>{c()}))},d=()=>{this.hotResources.filter(f=>!this.excludedHoTs.includes(f)).forEach(f=>this.handleHoTTick(f)),this.getDisplayTime()>=0&&I.reportHotTick(this.time),this.addEvent(new Oe("HoT tick",3,()=>{d()}))};if(t.forEach(f=>{f.groupedEffects.forEach(h=>{let m=this.dotResources,R=this.#e,T=this.#a,S=this.excludedDoTs;f.isHealing&&(m=this.hotResources,R=this.#t,T=this.#n,S=this.excludedHoTs),m.includes(h.effectName)?console.assert(!1,`${h.effectName} was registered as an over time effect multiple times for ${this.job}`):(!h.isGroundTargeted&&!f.isHealing&&this.debuffs.initialize(h.effectName),m.push(h.effectName),h.appliedBy.forEach(g=>{!f.isHealing&&!this.dotSkills.includes(g)&&this.dotSkills.push(g),f.isHealing&&!this.hotSkills.includes(g)&&this.hotSkills.push(g)}),T.set(h.effectName,f.groupedEffects.filter(g=>g!==h).map(g=>g.effectName)),h.isGroundTargeted&&!R.includes(h.effectName)&&R.push(h.effectName),h.exclude&&!S.includes(h.effectName)&&S.push(h.effectName),!f.isHealing&&f.reportName&&!this.fullTimeDoTs.includes(h.effectName)&&this.fullTimeDoTs.push(h.effectName))})}),n.forEach(f=>{this.dotSkills.push(f),f!=="WILDFIRE"&&this.petSkills.push(f)}),this.overTimeEffectGroups=t,this.dotResources.filter(f=>!this.excludedDoTs.includes(f)).length>0){let f=this.config.timeTillFirstManaTick+this.dotTickOffset;for(;f>3;)f-=3;this.addEvent(new Oe("initial DoT tick",f,c))}if(this.hotResources.filter(f=>!this.excludedHoTs.includes(f)).length>0){let f=this.config.timeTillFirstManaTick+this.hotTickOffset;for(;f>3;)f-=3;this.addEvent(new Oe("initial HoT tick",f,d))}this.jobSpecificRegisterRecurringEvents()}onResolveOverTimeTick(t,n){n==="damage"?this.jobSpecificOnResolveDotTick(t):this.jobSpecificOnResolveHotTick(t)}inherentSpeedModifier(){}jobSpecificRegisterRecurringEvents(){}jobSpecificOnResolveDotTick(t){}jobSpecificOnResolveHotTick(t){}jobSpecificAddDamageBuffCovers(t,n){}jobSpecificAddSpeedBuffCovers(t,n){}jobSpecificAddHealingBuffCovers(t,n){}maybeCancelChanneledSkills(t){const n=this.skillsList.get(t);n&&(n.animationLockFn(this)<=en||this.cancelChanneledSkills())}cancelChanneledSkills(){}jobSpecificOnAutoAttack(){}onAutoAttack(){this.jobSpecificOnAutoAttack()}getStatusDuration(t){return Ut(this.job,t).maxTimeout}gainDebuff(t,n){n.forEach(o=>{const s=this.debuffs.get(t,o),c=Ut(this.job,t);s.availableAmountIncludingDisabled()>0?s.overrideTimer(this,c.maxTimeout):(s.gain(1),this.debuffs.addDebuffEvent({rscType:t,targetNumber:o,name:`drop ${t} on target ${o}`,delay:c.maxTimeout,fnOnRsc:d=>d.consume(1)}))})}gainStatus(t,n=1){const o=this.resources.get(t),s=Ut(this.job,t);this.hasResourceAvailable(t)?(s.warnOnOvercap&&n>=o.availableAmount()&&I.reportWarning({kind:"overcap",rsc:t}),s.maxTimeout>0&&o.overrideTimer(this,s.maxTimeout),o.availableAmount()!==n&&o.overrideCurrentValue(n)):(o.gain(n),s.maxTimeout>0&&this.enqueueResourceDrop(t))}maybeGainProc(t,n=.5,o=!1){this.triggersEffect(n,o)&&this.gainStatus(t)}triggersEffect(t,n=!1){if(this.config.procMode===hn.Never)return!1;const o=n?this.rng():void 0;return this.config.procMode===hn.Always?!0:(o??this.rng())<t}handleDoTTick(t){this.handleOverTimeTick(t,"damage")}handleHoTTick(t){this.handleOverTimeTick(t,"healing")}handleOverTimeTick(t,n){if(this.debuffs.hasAny(t)){for(let o=1;o<=bi;o++){const s=this.debuffs.get(t,o);s.availableAmountIncludingDisabled()>0&&s.node&&!s.enabled&&s.node.getOverTimePotencies(t,n)[s.tickCount].tryRemoveTarget(o)}for(let o=1;o<=bi;o++){const s=this.debuffs.get(t,o);if(s.availableAmountIncludingDisabled()>0){if(s.node&&s.enabled){const c=s.node.getOverTimePotencies(t,n)[s.tickCount];c?.hasResolved()||I.resolveOverTimePotency(c,n),this.onResolveOverTimeTick(t,n)}s.tickCount++}else s.node&&(s.node.removeUnresolvedOvertimePotencies(n,o),s.node=void 0)}}else{const o=this.resources.get(t);if(o.availableAmountIncludingDisabled()>0){if(o.node&&o.enabled){const s=o.node.getOverTimePotencies(t,n)[o.tickCount];I.resolveOverTimePotency(s,n),this.onResolveOverTimeTick(t,n)}o.tickCount++}else o.node&&(o.node.removeUnresolvedOvertimePotencies(n),o.node=void 0)}}tick(t,n=()=>!1){let o=0;for(;o<t&&this.eventsQueue.length>0&&!n();){this.eventsQueue.sort((f,h)=>f.timeTillEvent-h.timeTillEvent);const s=Math.min(t-o,this.eventsQueue[0].timeTillEvent);o=Math.min(o+s,t),this.time+=s,this.cooldowns.tick(s);const c=[];for(let f=0;f<this.eventsQueue.length;f++)c.push(this.eventsQueue[f]);c.forEach(f=>{f.timeTillEvent-=s});let d=0;c.forEach(f=>{f.timeTillEvent<=Ra.epsilon&&(f.canceled||f.effectFn(),d++)}),this.eventsQueue.splice(0,d)}return o}addEvent(t){this.eventsQueue.push(t)}getDisplayTime(){return this.time-this.config.countdown}captureManaRegenAmount(){return this.isInCombat()?this.job in nT?ut.mpTick(this.config.level,this.config.piety):200:600}requestToggleBuff(t,n){if(this.debuffs.hasAny(t)){const s=this.debuffs.get(t,n??1);return s.available(1)?s.enabled=!1:s.enabled=!0,!0}if(t==="AUTOS_ENGAGED")return this.toggleAutosEngaged(),!0;const o=this.resources.get(t);if(Pe[t].mayBeToggled)return o.available(1)?(o.enabled=!1,!0):(o.enabled=!0,!0);if(Pe[t].mayNotBeCanceled)return!1;if(t==="MEDITATE"){const s=this.findNextQueuedEventByTag(dn.MeditateTick);s&&(s.canceled=!0)}return t==="KARDIA"&&this.tryConsumeResource("KARDION"),(t==="TEN_CHI_JIN"||t==="MUDRA")&&(this.tryConsumeResource("MUDRA"),this.tryConsumeResource("KASSATSU"),this.resources.get("MUDRA_TRACKER").overrideCurrentValue(0),this.resources.get("BUNNY").overrideCurrentValue(0)),o.consume(o.availableAmount()),o.removeTimer(),!0}addRecurringAutoAttackEvent(t,n){const o=(s,c)=>{const d=new Oe("aa tick",s,()=>{this.resources.get("AUTOS_ENGAGED").available(1)&&this.isInCombat()&&this.onAutoAttack(),this.addEvent(o(c,c))});return d.addTag(dn.AutoTick),d};this.addEvent(o(t,n))}findAutoAttackTimerInQueue(){let t=-1;return this.eventsQueue.forEach(n=>{n.name==="aa tick"&&(t=n.timeTillEvent)}),t}startAutoAttackTimer(t,n,o){if(this.findAutoAttackTimerInQueue()!==-1)this.removeAutoAttackTimer();else if(this.resources.get("STORED_AUTO").available(1)){const f=new Oe("stored auto",o||0,()=>{this.onAutoAttack()});this.addEvent(f)}this.tryConsumeResource("STORED_AUTO"),this.resources.get("AUTOS_ENGAGED").availableAmount()===0&&(this.resources.get("AUTOS_ENGAGED").gain(1),this.autoStartTimes.push(this.getDisplayTime()));const c=n||3;let d=0;t===-1?d=c:d=t??c,this.addRecurringAutoAttackEvent(d,c)}removeAutoAttackTimer(){let t=0;this.eventsQueue.forEach(n=>{n.name==="aa tick"&&this.eventsQueue.splice(t,1),t++})}toggleAutosEngaged(){const t=this.findAutoAttackTimerInQueue();if(this.resources.get("AUTOS_ENGAGED").availableAmount()===0)this.startAutoAttackTimer(t===-1?3:t);else if(this.resources.get("AUTOS_ENGAGED").consume(1),this.autoStopTimes.push(this.getDisplayTime()),t!==-1){this.removeAutoAttackTimer();const n=new Oe("aa tick",t,()=>{this.resources.get("STORED_AUTO").available(0)&&this.resources.get("STORED_AUTO").gain(1)});this.addEvent(n)}}refreshAutoBasedOnSkill(t,n,o){const s=n!==0,c=this.resources.get("AUTOS_ENGAGED").available(1),d=this.autoAttackDelay,f=this.findAutoAttackTimerInQueue(),h=t.startsAuto;if(o){if(this.isInCombat()){if(s&&c){const m=n+(f===-1?d:f);this.startAutoAttackTimer(m,d,n)}else if(!s&&!c)h&&this.startAutoAttackTimer(f,d);else if(s&&!c){if(h){const m=n+(f===-1?d:f);this.startAutoAttackTimer(m,d,n)}else if(f>0){this.removeAutoAttackTimer();const m=new Oe("aa tick",f+n,()=>{this.resources.get("STORED_AUTO").available(0)&&this.resources.get("STORED_AUTO").gain(1)});this.addEvent(m)}}}else if(h){const m=n+(f===-1?d:f);this.startAutoAttackTimer(m,d,n)}}else if(this.isInCombat()){if(s&&c){const m=this.findAutoAttackTimerInQueue(),R=n+(m===-1?d:m);this.startAutoAttackTimer(R)}else if(s&&!c&&f>0){this.removeAutoAttackTimer();const m=new Oe("aa tick",f+n,()=>{this.resources.get("STORED_AUTO").available(0)&&this.resources.get("STORED_AUTO").gain(1)});this.addEvent(m)}}}useSpellOrWeaponskill(t,n,o){const s=this.cooldowns.get(t.cdName),d=!(this.job==="NIN"&&(this.hasResourceAvailable("MUDRA")||this.hasResourceAvailable("KASSATSU"))&&["TEN","CHI","JIN"].includes(t.name))&&t.secondaryCd?this.cooldowns.get(t.secondaryCd.cdName):void 0,f=t.castTimeFn(this),h=t.recastTimeFn(this);this.jobSpecificAddSpeedBuffCovers(n,t);const m=t.potencyFn(this);let R=n.getInitialPotency();const T=this.dotSkills.includes(t.name);!R&&(m>0||t.drawsAggro&&!this.isInCombat()||T)?(this.refreshAutoBasedOnSkill(t,f,!0),R=new ta({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t.name,aspect:t.aspect,basePotency:m,snapshotTime:void 0,description:"",targetList:n.targetList,falloff:t.falloff}),n.addPotency(R)):this.refreshAutoBasedOnSkill(t,f,!1);const S=t.healingPotencyFn(this);let g=n.getInitialHealingPotency();!g&&S>0&&(g=new ta({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t.name,aspect:t.aspect,basePotency:S,snapshotTime:void 0,description:"",healTargetCount:n.healTargetCount,falloff:0}),n.addHealingPotency(g));const p=()=>{const O=t.manaCostFn(this);O>this.resources.get("MANA").availableAmount()?I.reportInterruption({failNode:n,failIndex:o}):O>0&&this.resources.get("MANA").consume(O);const D=m>0||T;R&&(R.snapshotTime=this.getDisplayTime(),D&&(this.hasResourceAvailable("TINCTURE")&&R.addModifiers(J.Tincture),R.addModifiers(...t.jobPotencyModifiers(this)),R.addTargetSpecificModifiers(t.jobTargetPotencyModifiers(this,n)))),D&&(this.hasResourceAvailable("TINCTURE")&&!n.hasBuff(k.Tincture)&&n.addBuff(k.Tincture),this.jobSpecificAddDamageBuffCovers(n,t));const L=S>0;if(g&&(g.snapshotTime=this.getDisplayTime(),this.hasResourceAvailable("TINCTURE")&&g.addModifiers(J.Tincture),g.addModifiers(...t.jobHealingPotencyModifiers(this))),L&&(this.hasResourceAvailable("TINCTURE")&&!n.hasBuff(k.Tincture)&&n.addBuff(k.Tincture),this.jobSpecificAddHealingBuffCovers(n,t)),t.onConfirm(this,n),this.addEvent(new Oe(t.name+" applied",t.applicationDelay,()=>{R&&(I.resolvePotency(R),this.hasResourceAvailable("IN_COMBAT")||this.resources.get("IN_COMBAT").gain(1)),g&&I.resolveHealingPotency(g),t.onApplication(this,n)})),R&&!this.hasResourceAvailable("IN_COMBAT")){const w=this.resources.timeTillReady("IN_COMBAT");(w===0||w>t.applicationDelay)&&this.resources.addResourceEvent({rscType:"IN_COMBAT",name:"begin combat if necessary",delay:t.applicationDelay,fnOnRsc:y=>{y.gain(1)}})}};if(f===0||t.isInstantFn(this))this.resources.takeResourceLock("NOT_ANIMATION_LOCKED",t.animationLockFn(this)),p();else{this.resources.takeResourceLock("MOVEMENT",f-ci.getSlidecastWindow(f)),this.resources.takeResourceLock("NOT_CASTER_TAXED",this.config.getAfterTaxCastTime(f));const O=f-ci.getSlidecastWindow(f);this.addEvent(new Oe(t.name+" captured",O,()=>{t.validateAttempt(this)?p():I.reportInterruption({failNode:n,failIndex:o})}))}s.useStackWithRecast(this.config.getAfterTaxGCD(h)),d?.useStack()}useAbility(t,n){console.assert(n);const o=this.cooldowns.get(t.cdName),s=t.secondaryCd?this.cooldowns.get(t.secondaryCd.cdName):void 0,c=t.potencyFn(this);let d;const f=this.dotSkills.includes(t.name);(c>0||t.drawsAggro||f)&&(d=new ta({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t.name,aspect:t.aspect,basePotency:c,snapshotTime:this.getDisplayTime(),description:"",targetList:n.targetList,falloff:t.falloff})),d&&(c>0||f)&&(this.hasResourceAvailable("TINCTURE")&&d.addModifiers(J.Tincture),d.addModifiers(...t.jobPotencyModifiers(this)),d.addTargetSpecificModifiers(t.jobTargetPotencyModifiers(this,n)),n.addPotency(d));const h=this.resources.get("AUTOS_ENGAGED").available(1),m=this.autoAttackDelay,R=this.findAutoAttackTimerInQueue(),T=t.startsAuto||t.startsAuto!==!1&&d&&c>0;if(T)if(this.isInCombat())h||T&&this.startAutoAttackTimer(R,m);else{const _=R===-1?m:R;this.startAutoAttackTimer(_,m,void 0)}const S=t.healingPotencyFn(this);let g;S>0&&(g=new ta({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t.name,aspect:t.aspect,basePotency:S,snapshotTime:this.getDisplayTime(),description:"",healTargetCount:n.healTargetCount,falloff:0}),this.hasResourceAvailable("TINCTURE")&&g.addModifiers(J.Tincture),g.addModifiers(...t.jobHealingPotencyModifiers(this)),n.addHealingPotency(g)),(c>0||f)&&!n.hasBuff(k.Tincture)&&(this.hasResourceAvailable("TINCTURE")&&n.addBuff(k.Tincture),this.jobSpecificAddDamageBuffCovers(n,t)),S>0&&(this.hasResourceAvailable("TINCTURE")&&!n.hasBuff(k.Tincture)&&n.addBuff(k.Tincture),this.jobSpecificAddHealingBuffCovers(n,t));const p=t.manaCostFn(this);if(p>0&&this.resources.get("MANA").consume(p),t.onConfirm(this,n),d&&!this.hasResourceAvailable("IN_COMBAT")){const _=this.resources.timeTillReady("IN_COMBAT");(_===0||_>t.applicationDelay)&&this.resources.addResourceEvent({rscType:"IN_COMBAT",name:"begin combat if necessary",delay:t.applicationDelay,fnOnRsc:O=>{O.gain(1)}})}t.applicationDelay>0?this.addEvent(new Oe(t.name+" applied",t.applicationDelay,()=>{d&&I.resolvePotency(d),g&&I.resolveHealingPotency(g),t.onApplication(this,n)})):(d&&I.resolvePotency(d),g&&I.resolveHealingPotency(g),t.onApplication(this,n)),o.useStack(),s?.useStack(),this.resources.takeResourceLock("NOT_ANIMATION_LOCKED",t.animationLockFn(this))}useLimitBreak(t,n,o){const s=this.cooldowns.get(t.cdName),c=t.castTimeFn(this),d=c>0?ci.getSlidecastWindow(c):0,f=t.potencyFn(this);let h;f>0&&(h=new ta({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t.name,aspect:t.aspect,basePotency:f,snapshotTime:void 0,description:"",targetList:n.targetList,falloff:t.falloff}),n.addPotency(h));const m=t.healingPotencyFn(this);let R;m>0&&(R=new ta({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t.name,aspect:t.aspect,basePotency:m,snapshotTime:void 0,description:"",healTargetCount:n.healTargetCount,falloff:0}),n.addHealingPotency(R));const T=()=>{t.onConfirm(this,n),h&&(h.snapshotTime=this.getDisplayTime()),R&&(R.snapshotTime=this.getDisplayTime()),this.addEvent(new Oe(t.name+" applied",t.applicationDelay,()=>{h&&I.resolvePotency(h),R&&I.resolveHealingPotency(R),t.onApplication(this,n)})),this.resources.takeResourceLock("NOT_ANIMATION_LOCKED",d+t.animationLockFn(this))};if(c===0)T();else{this.resources.takeResourceLock("MOVEMENT",c-d),this.resources.takeResourceLock("NOT_CASTER_TAXED",this.config.getAfterTaxCastTime(c));const g=c-d;this.addEvent(new Oe(t.name+" captured",g,()=>{t.validateAttempt(this)?T():I.reportInterruption({failNode:n,failIndex:o})}))}s.useStack()}#i(t){const n=this.skillsList.get(t),s=this.job==="NIN"&&(this.hasResourceAvailable("MUDRA")||this.hasResourceAvailable("KASSATSU"))&&["TEN","CHI","JIN"].includes(n.name)?void 0:n.secondaryCd?.cdName;let c=this.cooldowns.timeTillAnyStackAvailable(n.cdName);return s&&(c=Math.max(c,this.cooldowns.timeTillAnyStackAvailable(s))),Math.max(this.timeTillAnySkillAvailable(),c)}timeTillAnySkillAvailable(){const t=this.resources.timeTillReady("NOT_ANIMATION_LOCKED"),n=this.resources.timeTillReady("NOT_CASTER_TAXED");return Math.max(t,n)}findNextQueuedEventByTag(t){for(let n=0;n<this.eventsQueue.length;n++){const o=this.eventsQueue[n];if(o.hasTag(t))return o}}hasResourceAvailable(t,n){return this.resources.get(t).available(n??1)}hasResourceExactly(t,n){return this.resources.get(t).availableAmount()===n}hasDebuffActive(t,n){return this.debuffs.get(t,n).available(1)}hitPositional(t){return this.hasResourceAvailable("TRUE_NORTH")||t==="flank"&&this.hasResourceAvailable("FLANK_POSITIONAL")||t==="rear"&&this.hasResourceAvailable("REAR_POSITIONAL")}hitCombo(t){return this.hasResourceExactly(t.resource,t.resourceValue)}computeComboAndPositionalModifiers(t,n,o){const s=[];return n&&this.hitCombo(n)?(s.push(Xx(na(this,n.potency)-t)),o&&this.hitPositional(o.location)&&s.push(Hh(na(this,o.comboPotency)-na(this,n.potency)))):o&&this.hitPositional(o.location)&&s.push(Hh(na(this,o.potency)-t)),s}enqueueResourceDrop(t,n,o){if(n===void 0){const c=Ut(this.job,t);console.assert(c?.maxTimeout,`could not find timeout declaration for resource ${t}`),n=c.maxTimeout}const s=(o===void 0?"drop all ":`drop ${o} `)+t;this.resources.get(t).removeTimer(),this.resources.addResourceEvent({rscType:t,name:s,delay:n,fnOnRsc:c=>{c.consume(o??c.availableAmountIncludingDisabled()),Ut(this.job,c.type).warnOnTimeout&&I.reportWarning({kind:"timeout",rsc:c.type})}})}getOverriddenDots(t){return this.#a.get(t)??[]}getOverriddenHots(t){return this.#n.get(t)??[]}applyDoT(t,n){this.applyOverTimeEffect(t,n,"damage")}applyHoT(t,n,o){this.applyOverTimeEffect(t,n,"healing",o)}applyOverTimeEffect(t,n,o,s){if(this.debuffs.hasAny(t)){if(o!=="damage"){console.error(`over time debuff ${t} must have kind="damage", instead got ${o}`);return}const m=s??this.getStatusDuration(t);n.targetList.forEach(R=>{const T=this.debuffs.get(t,R);let S;if(this.getOverriddenDots(t).forEach(p=>{if(!this.hasDebuffActive(p,R)){const _=this.debuffs.get(p,R).getLastExpirationTime();if(_){const O=this.getDisplayTime()-_;S=S===void 0?O:Math.min(S,O)}return}n.setOverTimeOverrideAmount(t,n.getOverTimeOverrideAmount(t,o,R)+this.debuffs.timeTillExpiry(p,R),o,R),I.reportOverTimeDrop(this.getDisplayTime(),p,o,[R]),S=0,this.tryRemoveDebuff(p,R)}),T.availableAmountIncludingDisabled()>0){if(T.node===void 0){console.error(`DoT debuff for ${t}, target ${R} has no node`);return}T.enabled=!0,T.node.removeUnresolvedOvertimePotencies(o),n.setOverTimeOverrideAmount(t,n.getOverTimeOverrideAmount(t,o,R)+this.debuffs.timeTillExpiry(t,R),o,R),T.overrideTimer(this,m)}else{const p=this.getDisplayTime()-(T.getLastExpirationTime()??0);S=S===void 0?p:Math.min(S,p),T.gain(1);const _=o==="damage"?" DoT":" HoT";I.reportOverTimeStart(this.getDisplayTime(),t,o,[R]),this.debuffs.addDebuffEvent({rscType:t,name:"drop "+t+_+" on "+R,targetNumber:R,delay:m,fnOnRsc:O=>{O.consume(1),I.reportOverTimeDrop(this.getDisplayTime(),t,o,[R])}})}n.setOverTimeGap(t,S??0,o,R),T.node=n,T.tickCount=0});return}const c=this.resources.get(t),d=s??this.getStatusDuration(t);let f;if((o==="damage"?this.getOverriddenDots(t):this.getOverriddenHots(t)).forEach(m=>{if(m!==t){if(!this.hasResourceAvailable(m)){const R=this.resources.get(m).getLastExpirationTime();if(R){const T=this.getDisplayTime()-R;f=f===void 0?T:Math.min(f,T)}return}n.setOverTimeOverrideAmount(t,n.getOverTimeOverrideAmount(t,o)+this.resources.timeTillReady(m),o),I.reportOverTimeDrop(this.getDisplayTime(),m,o,n.targetList),f=0,this.tryConsumeResource(m)}}),c.available(1))console.assert(c.node),c.node.removeUnresolvedOvertimePotencies(o),n.setOverTimeOverrideAmount(t,n.getOverTimeOverrideAmount(t,o)+this.resources.timeTillReady(t),o),c.overrideTimer(this,d);else{const m=this.getDisplayTime()-(c.getLastExpirationTime()??0);f=f===void 0?m:Math.min(f,m),c.gain(1);const R=o==="damage"?" DoT":" HoT";I.reportOverTimeStart(this.getDisplayTime(),t,o,n.targetList),this.resources.addResourceEvent({rscType:t,name:"drop "+t+R,delay:d,fnOnRsc:T=>{T.consume(1),I.reportOverTimeDrop(this.getDisplayTime(),t,o,n.targetList)}})}n.setOverTimeGap(t,f??0,o),c.node=n,c.tickCount=0,this.#e.includes(t)&&(this.handleDoTTick(t),I.reportDotTick(this.time,t)),this.#t.includes(t)&&(this.handleHoTTick(t),I.reportHotTick(this.time,t))}addDoTPotencies(t){this.addOverTimePotencies(t,"damage")}addHoTPotencies(t,n){this.addOverTimePotencies(t,"healing",n)}addOverTimePotencies(t,n,o){const s=t.modifiers??[];this.hasResourceAvailable("TINCTURE")&&!s.includes(J.Tincture)&&(s.push(J.Tincture),t.node.addBuff(k.Tincture));const c=o??this.getStatusDuration(t.effectName),d=this.#e.includes(t.effectName)||this.#t.includes(t.effectName),f=Math.ceil(c/(t.tickFrequency??3))+(d?1:0),h=n==="damage"?"DoT":"HoT";for(let m=0;m<f;m++){const R=new ta({config:I.record.config??I.gameConfig,sourceTime:this.getDisplayTime(),sourceSkill:t.skillName,aspect:t.aspect??Ie.Other,basePotency:this.config.adjustedOvertimePotency(t.tickPotency,t.speedStat),snapshotTime:this.getDisplayTime(),description:Ke(t.effectName)+` ${h} `+(m+1)+`/${f}`,targetList:n==="damage"?t.node.targetList:void 0,healTargetCount:n==="healing"?t.node.healTargetCount:void 0,falloff:0});R.addModifiers(...s),t.targetModifiers&&R.addTargetSpecificModifiers(t.targetModifiers),t.node.addOverTimePotency(R,t.effectName,n)}}refreshDoT(t,n=!1){this.refreshOverTimeEffect(t,"damage",n)}refreshHoT(t,n=!1){this.refreshOverTimeEffect(t,"healing",n)}refreshOverTimeEffect(t,n,o){!o&&!this.hasResourceAvailable(t.effectName)||(this.addOverTimePotencies(t,n),this.applyOverTimeEffect(t.effectName,t.node,n))}timeTillNextMpGainEvent(){const t=this.findNextQueuedEventByTag(dn.ManaGain);return t?t.timeTillEvent:0}timeTillNextDamageEvent(){return this.resources.timeTillReady("IN_COMBAT")}getSkillAvailabilityStatus(t,n=!1){const o=this.skillsList.get(t);let s=this.#i(o.name);const c=o.manaCostFn(this),d=this.job==="BLM"&&this.resources.get("LEY_LINES").available(1),f=o.kind==="weaponskill"||o.kind==="spell"||o.kind==="limitbreak"?o.castTimeFn(this):0,h=f===0||o.kind==="ability"||o.kind!=="limitbreak"&&o.kind!=="unknown"&&o.isInstantFn(this),m=this.resources.get("MANA").availableAmount(),R=s>Ra.epsilon,T=c<=m,S=o.validateAttempt(this),g=this.config.level>=o.unlockLevel,p=this.job==="NIN"&&(this.hasResourceAvailable("MUDRA")||this.hasResourceAvailable("KASSATSU"))&&["TEN","CHI","JIN"].includes(o.name),_=du();if(R&&_.addUnavailableReason(mt.Blocked),!p&&o.secondaryCd&&this.cooldowns.get(o.secondaryCd.cdName).stacksAvailable()===0&&_.addUnavailableReason(mt.SecondaryBlocked),g||_.addUnavailableReason(mt.SkillNotUnlocked),S||_.addUnavailableReason(mt.RequirementsNotMet),T||_.addUnavailableReason(mt.NotEnoughMP),o.name==="MEDITATE"&&(s>Ra.epsilon||this.cooldowns.get("cd_GCD").timeTillNextStackAvailable()>Ra.epsilon)){const j=_.unavailableReasons.indexOf(mt.RequirementsNotMet);j>=0&&_.unavailableReasons.splice(j,1),_.addUnavailableReason(mt.Blocked)}o.requiresCombat&&_.unavailableReasons.includes(mt.RequirementsNotMet)&&(_.addUnavailableReason(mt.NotInCombat),s=this.timeTillNextDamageEvent());let O=this.cooldowns.get(o.cdName);const D=!p&&o.secondaryCd?this.cooldowns.get(o.secondaryCd.cdName):void 0;let L=O.timeTillNextStackAvailable()%O.currentStackCd();const w=!p&&o.secondaryCd?this.cooldowns.timeTillNextStackAvailable(o.secondaryCd.cdName):void 0;let y=O.currentStackCd();if(t==="MEDITATE"&&L<Ra.epsilon){const j=this.cooldowns.get("cd_GCD"),$=j.currentStackCd();j.timeTillNextStackAvailable()>L&&(O=j,y=$,L=j.timeTillNextStackAvailable(),s=L)}if(p){const j=this.cooldowns.get("cd_GCD"),$=j.currentStackCd();O=j,y=$,L=j.timeTillNextStackAvailable(),s=L}const x=O.stacksAvailable(),G=O.maxStacks(),B=D?.currentStackCd()??0;let Y=0;_.ready()&&(o.kind==="spell"?Y=(h?0:f-ci.getSlidecastWindow(f))+o.applicationDelay:o.kind==="limitbreak"?Y=f+o.applicationDelay:Y=o.applicationDelay);const X=D?.stacksAvailable()??0,ie=D?.maxStacks()??0,oe=o.highlightIf(this);return{skillName:o.name,status:_,stacksAvailable:ie>0?X:x,maxStacks:Math.max(G,ie),castTime:f,instantCast:h,cdRecastTime:y,secondaryCdRecastTime:B,timeTillNextStackReady:L,timeTillSecondaryReady:w,timeTillAvailable:s,timeTillDamageApplication:Y,capturedManaCost:c,highlight:oe,llCovered:d,usedAt:this.getDisplayTime()}}useSkill(t,n,o){const s=this.skillsList.get(t);s.onExecute(this,n),s.falloff===void 0&&!s.savesTargets&&n.forceOneTarget(),s.aoeHeal&&n.setHealTargetCount(this.resources.get("PARTY_SIZE").availableAmount()),s.kind==="spell"||s.kind==="weaponskill"?this.useSpellOrWeaponskill(s,n,o):s.kind==="ability"?this.useAbility(s,n):s.kind==="limitbreak"&&this.useLimitBreak(s,n,o)}useInvalidSkill(t,n){const o=this.skillsList.get(t);if(o.falloff===void 0&&n.forceOneTarget(),o.aoeHeal&&n.setHealTargetCount(this.resources.get("PARTY_SIZE").availableAmount()),o.kind==="spell"||o.kind==="weaponskill"){const s=o.castTimeFn(this),c=o.recastTimeFn(this);s===0||o.isInstantFn(this)?this.resources.takeResourceLock("NOT_ANIMATION_LOCKED",o.animationLockFn(this)):this.resources.takeResourceLock("NOT_CASTER_TAXED",this.config.getAfterTaxCastTime(s)),this.cooldowns.get("cd_GCD").useStackWithRecast(this.config.getAfterTaxGCD(c))}else if(o.kind==="ability")this.resources.takeResourceLock("NOT_ANIMATION_LOCKED",o.animationLockFn(this));else if(o.kind==="limitbreak"){const s=o.castTimeFn(this),c=ci.getSlidecastWindow(s);this.resources.takeResourceLock("NOT_ANIMATION_LOCKED",c+o.animationLockFn(this))}}getPartyBuffs(t){const n=new Map;return I.timeline.getBuffMarkers().filter(s=>s.time<=t&&s.time+s.duration>=t).forEach(s=>{const c=new Qh(s.description);n.has(c.name)||(c.info.damageFactor===1?n.set(c.name,{kind:"critDirect",source:U.PARTY,buffType:c.name,critBonus:c.info.critBonus,dhBonus:c.info.dhBonus}):n.set(c.name,{kind:"multiplier",source:U.PARTY,buffType:c.name,potencyFactor:c.info.damageFactor}))}),n}tryConsumeResource(t,n=!1){const o=this.resources.get(t),s=n?o.availableAmount():1;return s>0&&o.available(s)?(o.consume(s),o.available(s)||o.removeTimer(),!0):!1}tryRemoveDebuff(t,n){const o=this.debuffs.get(t,n),s=o.availableAmount();return s>0?(o.consume(s),o.removeTimer(),!0):!1}setComboState(t,n){n===0?this.tryConsumeResource(t,!0):(this.resources.get(t).overrideCurrentValue(n),this.enqueueResourceDrop(t,30))}hasTraitUnlocked(t){return ZN(t,this.config.level)}isInCombat(){return this.hasResourceAvailable("IN_COMBAT")}}const d0=["THUNDER_III","THUNDER_IV","HIGH_THUNDER","HIGH_THUNDER_II"],KP=Object.keys(UR).filter(e=>!d0.includes(e));Object.keys(UR).forEach(e=>zt(e,`BLM/${Pe[e].name}.png`));class VP extends Xt{jobSpecificOtherTargetedBuffViewProps(){return[...d0.flatMap(t=>this.makeTargetedTimers(t))]}jobSpecificSelfTargetedBuffViewProps(){return KP.map(t=>t==="LEY_LINES"?this.makeToggleableTimer(t):t==="THUNDERHEAD"||t==="FIRESTARTER"?this.makeCommonTimerless(t):this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){const n=this.state.resources.get("ENOCHIAN"),o=this.state.resources,s=this.state.getFireStacks(),c=this.state.getIceStacks(),d=o.get("UMBRAL_HEART").availableAmount(),f=o.get("PARADOX").availableAmount(),h=o.get("ASTRAL_SOUL").availableAmount(),m=n.available(1)?o.timeTillReady("POLYGLOT"):30,R=o.get("POLYGLOT").availableAmount(),T=this.state.hasTraitUnlocked("ENHANCED_POLYGLOT_II")&&3||this.state.hasTraitUnlocked("ENHANCED_POLYGLOT")&&2||1,S=[{kind:"counter",name:N({en:"AF/UI",zh:"",ja:"AF/UB"}),color:s>0?t.blm.astralFire:t.blm.umbralIce,currentStacks:s>0?s:c,maxStacks:3},{kind:"counter",name:N({en:"hearts",zh:"",ja:""}),color:t.blm.umbralHeart,currentStacks:d,maxStacks:3},{kind:"counter",name:N({en:"paradox",zh:"",ja:""}),color:t.blm.paradox,currentStacks:f,maxStacks:1}];return this.state.hasTraitUnlocked("ENHANCED_ASTRAL_FIRE")&&S.push({kind:"counter",name:N({en:"astral soul",zh:"",ja:""}),color:t.blm.astralSoul,currentStacks:h,maxStacks:6}),S.push({kind:"bar",name:N({en:"poly timer",zh:"",ja:""}),color:t.blm.polyTimer,progress:1-m/30,valueString:m.toFixed(3)},{kind:"counter",name:N({en:"poly stacks",zh:"",ja:""}),color:t.blm.polyStacks,currentStacks:R,maxStacks:T}),S}}const rn=(e,t,n)=>{Ve("BLM",e,t,n??{})};rn("POLYGLOT",3,{timeout:30,warnOnOvercap:!0});rn("ASTRAL_FIRE",3);rn("UMBRAL_ICE",3);rn("UMBRAL_HEART",3);rn("ASTRAL_SOUL",6);rn("LEY_LINES",1,{timeout:20});rn("ENOCHIAN",1);rn("PARADOX",1);rn("FIRESTARTER",1);rn("THUNDERHEAD",1);rn("THUNDER_III",1,{timeout:27});rn("THUNDER_IV",1,{timeout:21});rn("HIGH_THUNDER",1,{timeout:30});rn("HIGH_THUNDER_II",1,{timeout:24});rn("MANAWARD",1,{timeout:20});rn("TRIPLECAST",3,{timeout:15.7});class WP extends qt{thunderTickOffset;constructor(t){super(t),t.initialResourceOverrides.some(d=>(d.type==="ASTRAL_FIRE"||d.type==="UMBRAL_ICE")&&d.stacks>0)&&this.gainStatus("ENOCHIAN"),this.thunderTickOffset=this.nonProcRng()*3;const o=this.hasTraitUnlocked("ENHANCED_POLYGLOT_II")&&3||this.hasTraitUnlocked("ENHANCED_POLYGLOT")&&2||1;this.resources.set(new _a("POLYGLOT",o,0,!0));const s=this.hasTraitUnlocked("ENHANCED_MANAFONT")&&100||120,c=this.hasTraitUnlocked("ENHANCED_SWIFTCAST")&&40||60;[new Ue("cd_MANAFONT",s,1,1),new Ue("cd_SWIFTCAST",c,1,1)].forEach(d=>this.cooldowns.set(d)),this.registerRecurringEvents([{reportName:N({en:"Thunder DoT",zh:"DoT"}),groupedEffects:[{effectName:"HIGH_THUNDER",appliedBy:["HIGH_THUNDER"]},{effectName:"HIGH_THUNDER_II",appliedBy:["HIGH_THUNDER_II"]},{effectName:"THUNDER_III",appliedBy:["THUNDER_III"]},{effectName:"THUNDER_IV",appliedBy:["THUNDER_IV"]}]}])}get statusPropsGenerator(){return new VP(this)}jobSpecificRegisterRecurringEvents(){const t=n=>{this.hasEnochian()&&n.gain(1),this.resources.addResourceEvent({rscType:"POLYGLOT",name:"gain polyglot if currently has enochian",delay:30,fnOnRsc:t})};this.resources.addResourceEvent({rscType:"POLYGLOT",name:"gain polyglot if currently has enochian",delay:30,fnOnRsc:t})}jobSpecificAddSpeedBuffCovers(t,n){this.hasResourceAvailable("LEY_LINES")&&n.cdName==="cd_GCD"&&t.addBuff(k.LeyLines)}captureManaRegenAmount(){return this.getFireStacks()>0?0:200}getFireStacks(){return this.resources.get("ASTRAL_FIRE").availableAmount()}getIceStacks(){return this.resources.get("UMBRAL_ICE").availableAmount()}getUmbralHearts(){return this.resources.get("UMBRAL_HEART").availableAmount()}getMP(){return this.resources.get("MANA").availableAmount()}switchToAForUI(t,n){console.assert(n>0);const o=this.resources.get("ASTRAL_FIRE"),s=this.resources.get("UMBRAL_ICE"),c=this.resources.get("UMBRAL_HEART"),d=this.resources.get("PARADOX"),f=this.resources.get("ASTRAL_SOUL");t==="ASTRAL_FIRE"?(o.availableAmount()===0&&this.gainStatus("THUNDERHEAD"),o.gain(n),this.hasTraitUnlocked("ASPECT_MASTERY_V")&&s.available(3)&&c.available(3)&&d.gain(1),s.consume(s.availableAmount())):t==="UMBRAL_ICE"&&(s.availableAmount()===0&&this.gainStatus("THUNDERHEAD"),s.gain(n),this.hasTraitUnlocked("ASPECT_MASTERY_V")&&o.available(3)&&d.gain(1),o.consume(o.availableAmount()),f.consume(f.availableAmount()))}gainUmbralMana(t=0){let n=0;switch(this.resources.get("UMBRAL_ICE").availableAmount()){case 1:n=2500;break;case 2:n=5e3;break;case 3:n=1e4;break;default:n=0;break}this.addEvent(new Oe("gain umbral mana",t,()=>{this.resources.get("MANA").gain(n)}))}captureManaCost(t,n,o){const s=this.getIceStacks(),c=this.getFireStacks(),d=this.getUmbralHearts();if(t==="PARADOX"&&this.getIceStacks()>0||t==="FIRE_III"&&this.hasResourceAvailable("FIRESTARTER"))return 0;let f=1;return n===Ie.Fire&&s>0||n===Ie.Ice&&(s>0||c>0)?f=0:n===Ie.Fire&&c>0&&d===0&&(f=2),o*f}captureSpellCastTimeAFUI(t,n){const o=this.config.adjustedCastTime(t,this.hasResourceAvailable("LEY_LINES")?15:void 0);let s=1;return(n===Ie.Fire&&this.getIceStacks()===3||n===Ie.Ice&&this.getFireStacks()===3)&&(s=.5),o*s}hasEnochian(){return this.hasResourceAvailable("ENOCHIAN")}startOrRefreshEnochian(){const t=this.resources.get("ENOCHIAN");t.available(1)||(this.resources.get("POLYGLOT").overrideTimer(this,30),t.gain(1))}loseEnochian(){["ENOCHIAN","ASTRAL_FIRE","UMBRAL_ICE","UMBRAL_HEART","PARADOX","ASTRAL_SOUL"].forEach(n=>this.tryConsumeResource(n,!0))}}const h0=e=>e.resources.get("LEY_LINES").availableAmountIncludingDisabled()>0,vT=e=>e.hasResourceAvailable("PARADOX"),f0=e=>e.hasTraitUnlocked("ENHANCED_ENOCHIAN_IV")&&1.27||e.hasTraitUnlocked("ENHANCED_ENOCHIAN_III")&&1.22||e.hasTraitUnlocked("ENHANCED_ENOCHIAN_II")&&1.15||1.1,oa=(e,t,n)=>{const o=n.aspect??Ie.Other,s=Le((c,d)=>{n.baseCastTime===0||e==="DESPAIR"&&c.hasTraitUnlocked("ENHANCED_ASTRAL_FIRE")||e==="FOUL"&&c.hasTraitUnlocked("ENHANCED_FOUL")||e==="FIRE_III"&&c.hasResourceAvailable("FIRESTARTER")||c.tryConsumeResource("SWIFTCAST")||c.tryConsumeResource("TRIPLECAST")},(c,d)=>{c.getFireStacks()>0&&o===Ie.Fire&&!["DESPAIR","FLARE_STAR","FLARE"].includes(e)&&!(e==="FIRE_III"&&c.hasResourceAvailable("FIRESTARTER"))&&c.tryConsumeResource("UMBRAL_HEART"),o===Ie.Ice&&c.gainUmbralMana(n.applicationDelay)},n.onConfirm);return Xn("BLM",e,t,{...n,aspect:o,castTime:c=>c.captureSpellCastTimeAFUI(n.baseCastTime,o),recastTime:c=>c.config.adjustedGCD(2.5,c.hasResourceAvailable("LEY_LINES")?15:0),manaCost:c=>c.captureManaCost(e,o,n.baseManaCost),potency:c=>n.basePotency,isInstantFn:c=>e==="DESPAIR"&&c.hasTraitUnlocked("ENHANCED_ASTRAL_FIRE")||e==="FOUL"&&c.hasTraitUnlocked("ENHANCED_FOUL")||e==="FIRE_III"&&c.hasResourceAvailable("FIRESTARTER")||c.hasResourceAvailable("SWIFTCAST")||c.hasResourceAvailable("TRIPLECAST"),onConfirm:s,jobPotencyModifiers:c=>{const d=[];if(c.hasResourceAvailable("ENOCHIAN")){const m=f0(c);d.push({kind:"multiplier",source:U.ENO,potencyFactor:m})}const f=c.getIceStacks(),h=c.getFireStacks();return f===1?o===Ie.Fire?d.push({kind:"multiplier",source:U.UI1,potencyFactor:.9}):o===Ie.Ice&&d.push({kind:"multiplier",source:U.UI1,potencyFactor:1}):f===2?o===Ie.Fire?d.push({kind:"multiplier",source:U.UI2,potencyFactor:.8}):o===Ie.Ice&&d.push({kind:"multiplier",source:U.UI2,potencyFactor:1}):f===3&&(o===Ie.Fire?d.push({kind:"multiplier",source:U.UI3,potencyFactor:.7}):o===Ie.Ice&&d.push({kind:"multiplier",source:U.UI3,potencyFactor:1})),h===1?o===Ie.Ice?d.push({kind:"multiplier",source:U.AF1,potencyFactor:.9}):o===Ie.Fire&&d.push({kind:"multiplier",source:U.AF1,potencyFactor:1.4}):h===2?o===Ie.Ice?d.push({kind:"multiplier",source:U.AF2,potencyFactor:.8}):o===Ie.Fire&&d.push({kind:"multiplier",source:U.AF2,potencyFactor:1.6}):h===3&&(o===Ie.Ice?d.push({kind:"multiplier",source:U.AF3,potencyFactor:.7}):o===Ie.Fire&&d.push({kind:"multiplier",source:U.AF3,potencyFactor:1.8})),d}})},Ss=(e,t,n,o)=>et("BLM",e,t,n,o);oa("BLIZZARD",1,{aspect:Ie.Ice,baseCastTime:2,baseManaCost:400,basePotency:180,applicationDelay:.846,onConfirm:(e,t)=>{e.getFireStacks()===0?(e.switchToAForUI("UMBRAL_ICE",1),e.startOrRefreshEnochian()):(e.resources.get("ENOCHIAN").removeTimer(),e.loseEnochian())},replaceIf:[{newSkill:"PARADOX",condition:vT}]});oa("FIRE",2,{aspect:Ie.Fire,baseCastTime:2,baseManaCost:800,basePotency:180,applicationDelay:1.871,onConfirm:(e,t)=>{e.triggersEffect(.4,!0)&&e.gainStatus("FIRESTARTER"),e.getIceStacks()===0?(e.switchToAForUI("ASTRAL_FIRE",1),e.startOrRefreshEnochian()):(e.resources.get("ENOCHIAN").removeTimer(),e.loseEnochian())},replaceIf:[{newSkill:"PARADOX",condition:vT}]});Ss("TRANSPOSE",4,"cd_TRANSPOSE",{applicationDelay:0,cooldown:5,validateAttempt:e=>e.getFireStacks()>0||e.getIceStacks()>0,onApplication:(e,t)=>{(e.getFireStacks()!==0||e.getIceStacks()!==0)&&(e.switchToAForUI(e.getFireStacks()>0?"UMBRAL_ICE":"ASTRAL_FIRE",1),e.startOrRefreshEnochian())}});const xf=(e,t)=>(n,o)=>{let s=0;switch(e){case"HIGH_THUNDER":s=60;break;case"THUNDER_III":s=50;break;case"THUNDER_IV":s=35;break;case"HIGH_THUNDER_II":s=40;break}const c=[];if(n.hasResourceAvailable("ENOCHIAN")){const d=f0(n);c.push({kind:"multiplier",source:U.ENO,potencyFactor:d})}console.assert(s>0,`${e} was applied as a Thunder DoT`),n.addDoTPotencies({node:o,effectName:t,skillName:e,tickPotency:s,speedStat:"sps",aspect:Ie.Lightning,modifiers:c}),n.tryConsumeResource("THUNDERHEAD")};oa("THUNDER_III",45,{aspect:Ie.Lightning,baseCastTime:0,baseManaCost:0,basePotency:120,applicationDelay:1.03,validateAttempt:e=>e.hasResourceAvailable("THUNDERHEAD"),onConfirm:xf("THUNDER_III","THUNDER_III"),onApplication:(e,t)=>e.applyDoT("THUNDER_III",t),autoUpgrade:{trait:"THUNDER_MASTERY_III",otherSkill:"HIGH_THUNDER"},highlightIf:e=>e.hasResourceAvailable("THUNDERHEAD")});Ye("BLM","MANAWARD",30,"cd_MANAWARD",{rscType:"MANAWARD",applicationDelay:1.114,cooldown:120});Ss("MANAFONT",30,"cd_MANAFONT",{applicationDelay:.2,cooldown:100,validateAttempt:e=>e.getFireStacks()>0,onConfirm:(e,t)=>{e=e,e.resources.get("ASTRAL_FIRE").gain(3),e.resources.get("UMBRAL_HEART").gain(3),e.hasTraitUnlocked("ASPECT_MASTERY_V")&&e.resources.get("PARADOX").gain(1),e.gainStatus("THUNDERHEAD"),e.startOrRefreshEnochian()},onApplication:(e,t)=>{e.resources.get("MANA").gain(1e4)}});oa("FIRE_III",35,{aspect:Ie.Fire,baseCastTime:3.5,baseManaCost:2e3,basePotency:290,applicationDelay:1.292,onConfirm:(e,t)=>{e.tryConsumeResource("FIRESTARTER"),e.switchToAForUI("ASTRAL_FIRE",3),e.startOrRefreshEnochian()},highlightIf:e=>e.hasResourceAvailable("FIRESTARTER")});oa("BLIZZARD_III",35,{aspect:Ie.Ice,baseCastTime:3.5,baseManaCost:800,basePotency:290,applicationDelay:.89,onConfirm:(e,t)=>{e.switchToAForUI("UMBRAL_ICE",3),e.startOrRefreshEnochian()}});oa("FREEZE",40,{aspect:Ie.Ice,baseCastTime:2,baseManaCost:1e3,basePotency:120,applicationDelay:.664,falloff:0,validateAttempt:e=>e.getIceStacks()>0,onConfirm:(e,t)=>e.resources.get("UMBRAL_HEART").gain(3)});oa("FLARE",50,{aspect:Ie.Fire,baseCastTime:2,baseManaCost:0,basePotency:240,applicationDelay:1.157,falloff:.3,validateAttempt:e=>e.getFireStacks()>0&&e.getMP()>=800,onConfirm:(e,t)=>{const n=e.resources.get("UMBRAL_HEART"),o=e.resources.get("MANA"),s=n.available(1)?o.availableAmount()*.66:o.availableAmount();e.resources.get("MANA").consume(s),n.consume(n.availableAmount()),e.resources.get("ASTRAL_FIRE").gain(3),e.hasTraitUnlocked("ENHANCED_ASTRAL_FIRE")&&e.resources.get("ASTRAL_SOUL").gain(3),e.startOrRefreshEnochian()}});Ye("BLM","LEY_LINES",52,"cd_LEY_LINES",{rscType:"LEY_LINES",applicationDelay:.49,cooldown:120,maxCharges:2,validateAttempt:e=>!(e.resources.get("LEY_LINES").availableAmountIncludingDisabled()>0),onApplication:(e,t)=>{e.resources.get("LEY_LINES").enabled=!0},replaceIf:[{newSkill:"RETRACE",condition:h0}]});oa("BLIZZARD_IV",58,{aspect:Ie.Ice,baseCastTime:2,baseManaCost:800,basePotency:300,applicationDelay:1.156,validateAttempt:e=>e.getIceStacks()>0,onConfirm:(e,t)=>e.resources.get("UMBRAL_HEART").gain(3)});oa("FIRE_IV",60,{aspect:Ie.Fire,baseCastTime:2,baseManaCost:800,basePotency:300,applicationDelay:1.159,validateAttempt:e=>e.getFireStacks()>0,onConfirm:(e,t)=>{e.hasTraitUnlocked("ENHANCED_ASTRAL_FIRE")&&e.resources.get("ASTRAL_SOUL").gain(1)}});Ss("BETWEEN_THE_LINES",62,"cd_BETWEEN_THE_LINES",{applicationDelay:0,cooldown:3,animationLock:Wt,validateAttempt:e=>e.resources.get("LEY_LINES").availableAmountIncludingDisabled()>0,onConfirm:(e,t)=>{e.resources.get("LEY_LINES").enabled=!0}});Ss("AETHERIAL_MANIPULATION",50,"cd_AETHERIAL_MANIPULATION",{applicationDelay:0,cooldown:10,animationLock:Wt});Ss("TRIPLECAST",66,"cd_TRIPLECAST",{applicationDelay:0,cooldown:60,maxCharges:2,onApplication:(e,t)=>e.gainStatus("TRIPLECAST",3)});oa("FOUL",70,{baseCastTime:2,baseManaCost:0,basePotency:600,falloff:.25,applicationDelay:1.158,validateAttempt:e=>e.hasResourceAvailable("POLYGLOT"),onConfirm:(e,t)=>e.resources.get("POLYGLOT").consume(1),highlightIf:e=>e.hasResourceAvailable("POLYGLOT")});oa("DESPAIR",72,{aspect:Ie.Fire,baseCastTime:2,baseManaCost:0,basePotency:350,applicationDelay:.556,validateAttempt:e=>e.getFireStacks()>0&&e.getMP()>=800,onConfirm:(e,t)=>{const n=e.resources.get("MANA"),o=n.availableAmount();console.assert(o>=800,`tried to confirm despair at ${o} MP`),n.consume(o),e.resources.get("ASTRAL_FIRE").gain(3),e.startOrRefreshEnochian()}});oa("UMBRAL_SOUL",35,{aspect:Ie.Ice,baseCastTime:0,baseManaCost:0,basePotency:0,applicationDelay:.633,validateAttempt:e=>e.getIceStacks()>0,onConfirm:(e,t)=>{e.resources.get("UMBRAL_ICE").gain(1),e.resources.get("UMBRAL_HEART").gain(1)}});oa("XENOGLOSSY",80,{baseCastTime:0,baseManaCost:0,basePotency:890,applicationDelay:.63,validateAttempt:e=>e.hasResourceAvailable("POLYGLOT"),onConfirm:(e,t)=>e.resources.get("POLYGLOT").consume(1),highlightIf:e=>e.hasResourceAvailable("POLYGLOT")});oa("FIRE_II",18,{aspect:Ie.Fire,baseCastTime:3,baseManaCost:1500,basePotency:80,falloff:0,applicationDelay:1.154,autoUpgrade:{trait:"ASPECT_MASTERY_IV",otherSkill:"HIGH_FIRE_II"},onConfirm:(e,t)=>{e.switchToAForUI("ASTRAL_FIRE",3),e.startOrRefreshEnochian()}});oa("BLIZZARD_II",12,{aspect:Ie.Ice,baseCastTime:3,baseManaCost:800,basePotency:80,falloff:0,applicationDelay:1.158,autoUpgrade:{trait:"ASPECT_MASTERY_IV",otherSkill:"HIGH_BLIZZARD_II"},onConfirm:(e,t)=>{e.switchToAForUI("UMBRAL_ICE",3),e.startOrRefreshEnochian()}});oa("HIGH_FIRE_II",82,{aspect:Ie.Fire,baseCastTime:3,baseManaCost:1500,basePotency:100,falloff:0,applicationDelay:1.154,autoDowngrade:{trait:"ASPECT_MASTERY_IV",otherSkill:"FIRE_II"},onConfirm:(e,t)=>{e.switchToAForUI("ASTRAL_FIRE",3),e.startOrRefreshEnochian()}});oa("HIGH_BLIZZARD_II",82,{aspect:Ie.Ice,baseCastTime:3,baseManaCost:800,basePotency:100,falloff:0,applicationDelay:1.158,autoDowngrade:{trait:"ASPECT_MASTERY_IV",otherSkill:"BLIZZARD_II"},onConfirm:(e,t)=>{e.switchToAForUI("UMBRAL_ICE",3),e.startOrRefreshEnochian()}});Ss("AMPLIFIER",86,"cd_AMPLIFIER",{applicationDelay:0,cooldown:120,validateAttempt:e=>e.getFireStacks()>0||e.getIceStacks()>0,onApplication:(e,t)=>{e.resources.get("POLYGLOT").gain(1)}});oa("PARADOX",90,{baseCastTime:0,baseManaCost:1600,basePotency:540,applicationDelay:.624,validateAttempt:vT,onConfirm:(e,t)=>{e.resources.get("PARADOX").consume(1),e.getFireStacks()>0?e.gainStatus("FIRESTARTER"):e.getIceStacks()===0&&console.error("cannot cast Paradox outside of AF/UI")},replaceIf:[{newSkill:"BLIZZARD",condition:e=>!e.hasResourceAvailable("PARADOX")&&e.getIceStacks()>0},{newSkill:"FIRE",condition:e=>!e.hasResourceAvailable("PARADOX")&&e.getFireStacks()>0}],startOnHotbar:!1,highlightIf:e=>!0});oa("HIGH_THUNDER",92,{aspect:Ie.Lightning,baseCastTime:0,baseManaCost:0,basePotency:150,applicationDelay:.757,validateAttempt:e=>e.hasResourceAvailable("THUNDERHEAD"),onConfirm:xf("HIGH_THUNDER","HIGH_THUNDER"),onApplication:(e,t)=>e.applyDoT("HIGH_THUNDER",t),autoDowngrade:{trait:"THUNDER_MASTERY_III",otherSkill:"THUNDER_III"},highlightIf:e=>e.hasResourceAvailable("THUNDERHEAD")});oa("FLARE_STAR",100,{aspect:Ie.Fire,baseCastTime:2,baseManaCost:0,basePotency:500,falloff:.65,applicationDelay:.622,validateAttempt:e=>e.hasResourceAvailable("ASTRAL_SOUL",6),onConfirm:(e,t)=>e.tryConsumeResource("ASTRAL_SOUL",!0),highlightIf:e=>e.hasResourceAvailable("ASTRAL_SOUL",6)});oa("THUNDER_IV",64,{aspect:Ie.Lightning,baseCastTime:0,baseManaCost:0,basePotency:80,falloff:0,applicationDelay:1.16,validateAttempt:e=>e.hasResourceAvailable("THUNDERHEAD"),onConfirm:xf("THUNDER_IV","THUNDER_IV"),onApplication:(e,t)=>e.applyDoT("THUNDER_IV",t),autoUpgrade:{trait:"THUNDER_MASTERY_III",otherSkill:"HIGH_THUNDER_II"},highlightIf:e=>e.hasResourceAvailable("THUNDERHEAD")});oa("HIGH_THUNDER_II",92,{aspect:Ie.Lightning,baseCastTime:0,baseManaCost:0,basePotency:100,falloff:0,applicationDelay:.8,validateAttempt:e=>e.hasResourceAvailable("THUNDERHEAD"),onConfirm:xf("HIGH_THUNDER_II","HIGH_THUNDER_II"),onApplication:(e,t)=>e.applyDoT("HIGH_THUNDER_II",t),autoDowngrade:{trait:"THUNDER_MASTERY_III",otherSkill:"THUNDER_IV"},highlightIf:e=>e.hasResourceAvailable("THUNDERHEAD")});Ss("RETRACE",96,"cd_RETRACE",{applicationDelay:0,cooldown:40,validateAttempt:h0,onConfirm:(e,t)=>{const n=e.resources.get("LEY_LINES");n.enabled=!0,console.assert(n.pendingChange!==void 0,"LL should def have a timer when Retrace is used"),n.pendingChange.timeTillEvent=Math.floor(n.pendingChange.timeTillEvent)+.5},startOnHotbar:!1});const E0=["CAUSTIC_BITE","STORMBITE"],XP=Object.keys(wR).filter(e=>!E0.includes(e));Object.keys(wR).forEach(e=>zt(e,`BRD/${Pe[e].name}.png`));class qP extends Xt{jobSpecificOtherTargetedBuffViewProps(){return[...E0.flatMap(t=>this.makeTargetedTimers(t))]}jobSpecificSelfTargetedBuffViewProps(){return[...XP.map(t=>this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){const n=this.state.resources,o=n.get("PITCH_PERFECT"),s=n.get("REPERTOIRE"),c=[{kind:"counter",name:N({en:"Pitch Perfect"}),color:t.brd.pitchPerfect,currentStacks:o.availableAmount(),maxStacks:o.maxValue},{kind:"counter",name:N({en:"Paeon Repertoire"}),color:t.brd.repertoire,currentStacks:s.availableAmount(),maxStacks:s.maxValue}];if(this.state.hasTraitUnlocked("SOUL_VOICE")){const d=n.get("SOUL_VOICE");c.push({kind:"bar",name:N({en:"Soul Voice"}),color:t.brd.soulVoice,progress:d.availableAmount()/d.maxValue,valueString:d.availableAmount().toFixed(0)})}return this.state.hasTraitUnlocked("MINSTRELS_CODA")&&c.push({kind:"coda",name:N({en:"Coda"}),hasWanderers:this.state.hasResourceAvailable("WANDERERS_CODA"),hasMages:this.state.hasResourceAvailable("MAGES_CODA"),hasArmys:this.state.hasResourceAvailable("ARMYS_CODA"),wanderersColor:t.brd.wanderersCoda,magesColor:t.brd.magesCoda,armysColor:t.brd.armysCoda}),c}}const Mt=(e,t,n)=>{Ve("BRD",e,t,n??{})};Mt("SOUL_VOICE",100,{warnOnOvercap:!0});Mt("PITCH_PERFECT",3);Mt("REPERTOIRE",4);Mt("WANDERERS_CODA",1,{warnOnOvercap:!0});Mt("MAGES_CODA",1,{warnOnOvercap:!0});Mt("ARMYS_CODA",1,{warnOnOvercap:!0});Mt("ETHOS_REPERTOIRE",4);Mt("MUSE_REPERTOIRE",4);Mt("HAWKS_EYE",1,{timeout:30});Mt("RAGING_STRIKES",1,{timeout:20});Mt("BARRAGE",1,{timeout:10});Mt("ARMYS_MUSE",4,{timeout:10});Mt("ARMYS_ETHOS",4,{timeout:30});Mt("BLAST_ARROW_READY",1,{timeout:10});Mt("RESONANT_ARROW_READY",1,{timeout:30});Mt("RADIANT_ENCORE_READY",1,{timeout:30});Mt("MAGES_BALLAD",1,{timeout:45});Mt("ARMYS_PAEON",1,{timeout:45});Mt("WANDERERS_MINUET",1,{timeout:45});Mt("BATTLE_VOICE",1,{timeout:20});Mt("WARDENS_PAEAN",1,{timeout:30});Mt("TROUBADOUR",1,{timeout:15});Mt("NATURES_MINNE",1,{timeout:15});Mt("RADIANT_FINALE",1,{timeout:20});Mt("RADIANT_CODA",3);Mt("CAUSTIC_BITE",1,{timeout:45});Mt("STORMBITE",1,{timeout:45});const uN=["WANDERERS_MINUET","MAGES_BALLAD","ARMYS_PAEON"],ZP=["REFULGENT_ARROW","SHADOWBITE","WIDE_VOLLEY"];class QP extends qt{constructor(t){super(t),this.hasTraitUnlocked("ENHANCED_BLOODLETTER")||this.cooldowns.set(new Ue("cd_HEARTBREAK_SHOT",15,2,2)),this.hasTraitUnlocked("ENHANCED_TROUBADOUR")||this.cooldowns.set(new Ue("cd_TROUBADOUR",120,1,1)),this.registerRecurringEvents([{reportName:Ke("STORMBITE"),groupedEffects:[{effectName:"STORMBITE",appliedBy:["STORMBITE","IRON_JAWS"]}]},{reportName:Ke("CAUSTIC_BITE"),groupedEffects:[{effectName:"CAUSTIC_BITE",appliedBy:["CAUSTIC_BITE","IRON_JAWS"]}]}])}get statusPropsGenerator(){return new qP(this)}jobSpecificAddDamageBuffCovers(t,n){switch(this.hasResourceAvailable("RAGING_STRIKES")&&t.addBuff(k.RagingStrikes),this.hasResourceAvailable("BATTLE_VOICE")&&t.addBuff(k.BattleVoice),this.resources.get("RADIANT_FINALE").availableAmount()){case 1:t.addBuff(k.RadiantFinale1);break;case 2:t.addBuff(k.RadiantFinale2);break;case 3:t.addBuff(k.RadiantFinale3);break}this.hasResourceAvailable("BARRAGE")&&ZP.includes(n.name)&&t.addBuff(k.Barrage),this.hasResourceAvailable("WANDERERS_MINUET")?t.addBuff(k.WanderersMinuet):this.hasResourceAvailable("MAGES_BALLAD")?t.addBuff(k.MagesBallad):this.hasResourceAvailable("ARMYS_PAEON")&&t.addBuff(k.ArmysPaeon)}songTick(t){this.resourceIsSong(t)&&this.hasResourceAvailable(t)&&(this.triggersEffect(.8)&&this.gainRepertoireEffect(t),this.resources.timeTillReady(t)>3+Ra.epsilon&&this.addEvent(new Oe(`${t} tick`,3,()=>{this.songTick(t)})))}gainRepertoireEffect(t){if(t||(this.hasResourceAvailable("WANDERERS_MINUET")?t="WANDERERS_MINUET":this.hasResourceAvailable("MAGES_BALLAD")?t="MAGES_BALLAD":this.hasResourceAvailable("ARMYS_PAEON")&&(t="ARMYS_PAEON")),!!t&&this.resourceIsSong(t)){switch(t){case"WANDERERS_MINUET":this.resources.get("PITCH_PERFECT").gain(1);break;case"MAGES_BALLAD":this.cooldowns.get("cd_HEARTBREAK_SHOT").restore(7.5);break;case"ARMYS_PAEON":this.resources.get("REPERTOIRE").gain(1);break}this.hasTraitUnlocked("SOUL_VOICE")&&this.resources.get("SOUL_VOICE").gain(5)}}resourceIsSong(t){return uN.includes(t)}beginSong(t){if(this.resourceIsSong(t)){if(uN.forEach(n=>this.tryExpireSong(n)),t!=="ARMYS_PAEON"&&this.hasResourceAvailable("ARMYS_ETHOS")){const n=this.resources.get("ETHOS_REPERTOIRE").availableAmount();this.resources.get("MUSE_REPERTOIRE").gain(n),this.tryConsumeResource("ARMYS_ETHOS"),this.tryConsumeResource("ETHOS_REPERTOIRE",!0),this.gainStatus("ARMYS_MUSE")}if(this.hasTraitUnlocked("MINSTRELS_CODA")){const n=t==="WANDERERS_MINUET"?"WANDERERS_CODA":t==="MAGES_BALLAD"?"MAGES_CODA":"ARMYS_CODA";this.resources.get(n).gain(1)}this.resources.get(t).gain(1),this.resources.addResourceEvent({rscType:t,name:"drop "+t,delay:this.getStatusDuration(t),fnOnRsc:n=>this.tryExpireSong(t)}),this.addEvent(new Oe(`${t} tick`,3,()=>{this.songTick(t)}))}}tryExpireSong(t){if(this.resourceIsSong(t)&&this.hasResourceAvailable(t)){switch(t){case"WANDERERS_MINUET":this.tryConsumeResource("PITCH_PERFECT",!0);break;case"ARMYS_PAEON":if(this.hasTraitUnlocked("ENHANCED_ARMYS_PAEON")){const n=this.resources.get("REPERTOIRE").availableAmount();n>0&&(this.resources.get("ETHOS_REPERTOIRE").gain(n),this.gainStatus("ARMYS_ETHOS")),this.tryConsumeResource("MUSE_REPERTOIRE",!0)}this.tryConsumeResource("REPERTOIRE",!0);break}this.tryConsumeResource(t)}}getCodaCount(){const t=this.resources.get("WANDERERS_CODA").availableAmount(),n=this.resources.get("MAGES_CODA").availableAmount(),o=this.resources.get("ARMYS_CODA").availableAmount();return t+n+o}getJobPotencyModifiers(t){const n=[];if([{rscType:"WANDERERS_MINUET",mod:J.WanderersMinuet},{rscType:"MAGES_BALLAD",mod:J.MagesBallad},{rscType:"ARMYS_PAEON",mod:J.ArmysPaeon},{rscType:"RAGING_STRIKES",mod:J.RagingStrikes},{rscType:"BATTLE_VOICE",mod:J.BattleVoice}].forEach(s=>{this.hasResourceAvailable(s.rscType)&&n.push(s.mod)}),this.hasResourceAvailable("RADIANT_FINALE")){const s=this.resources.get("RADIANT_CODA").availableAmount();s===3?n.push(J.RadiantFinaleThreeCoda):s===2?n.push(J.RadiantFinaleTwoCoda):s===1&&n.push(J.RadiantFinaleOneCoda)}if(this.hasResourceAvailable("BARRAGE"))switch(t){case"REFULGENT_ARROW":n.push(J.BarrageRefulgent);break;case"SHADOWBITE":n.push(J.BarrageShadowbite);break;case"WIDE_VOLLEY":n.push(J.BarrageWideVolley);break}return n}getSpeedModifier(t){if(t==="ARMYS_PAEON")return this.resources.get("REPERTOIRE").availableAmount()*4;if(t==="ARMYS_MUSE"){const n=this.resources.get("MUSE_REPERTOIRE").availableAmount();return n===4?12:n===3?4:n}return 0}}const qn=(e,t,n)=>ia("BRD",e,t,{...n,recastTime:o=>{let s;o.hasResourceAvailable("ARMYS_PAEON")?s="ARMYS_PAEON":o.hasResourceAvailable("ARMYS_MUSE")&&(s="ARMYS_MUSE");const c=o.getSpeedModifier(s);return o.config.adjustedSksGCD(2.5,c)},jobPotencyModifiers:o=>o.getJobPotencyModifiers(e)}),Dl=(e,t,n,o)=>et("BRD",e,t,n,{...o,jobPotencyModifiers:s=>s.getJobPotencyModifiers(e)}),gs=(e,t,n,o)=>Ye("BRD",e,t,n,o);qn("HEAVY_SHOT",1,{potency:160,applicationDelay:1.47,onApplication:e=>e.maybeGainProc("HAWKS_EYE",.2),autoUpgrade:{trait:"HEAVY_SHOT_MASTERY",otherSkill:"BURST_SHOT"}});qn("BURST_SHOT",1,{startOnHotbar:!1,potency:[["NEVER",200],["RANGED_MASTERY",220]],applicationDelay:1.47,onApplication:e=>e.maybeGainProc("HAWKS_EYE",.35)});qn("REFULGENT_ARROW",70,{potency:[["NEVER",260],["RANGED_MASTERY",280]],applicationDelay:1.47,onConfirm:e=>{e.hasResourceAvailable("BARRAGE")?e.tryConsumeResource("BARRAGE"):e.tryConsumeResource("HAWKS_EYE")},validateAttempt:e=>e.hasResourceAvailable("HAWKS_EYE")||e.hasResourceAvailable("BARRAGE"),highlightIf:e=>e.hasResourceAvailable("HAWKS_EYE")||e.hasResourceAvailable("BARRAGE")});const RR=[{skillName:"CAUSTIC_BITE",dotName:"CAUSTIC_BITE",initialPotency:150,tickPotency:20},{skillName:"STORMBITE",dotName:"STORMBITE",initialPotency:100,tickPotency:25}];RR.forEach(e=>{qn(e.skillName,1,{potency:e.initialPotency,applicationDelay:1.29,onConfirm:(t,n)=>t.addDoTPotencies({node:n,effectName:e.dotName,skillName:e.skillName,tickPotency:e.tickPotency,speedStat:"sks",modifiers:t.getJobPotencyModifiers(e.skillName)}),onApplication:(t,n)=>{t.applyDoT(e.dotName,n),t.hasTraitUnlocked("BITE_MASTERY_II")&&t.maybeGainProc("HAWKS_EYE",.35)}})});qn("IRON_JAWS",56,{potency:100,applicationDelay:.67,onConfirm:(e,t)=>{console.assert(t.targetList.length===1,"Iron Jaws must have exactly 1 target");const n=RR.map(o=>e.hasDebuffActive(o.dotName,t.targetList[0]));e.addEvent(new Oe("iron jaws dot refresh",.67,()=>{RR.forEach((o,s)=>{e.refreshDoT({node:t,effectName:o.dotName,tickPotency:o.tickPotency,skillName:"IRON_JAWS",speedStat:"sks",modifiers:e.getJobPotencyModifiers("IRON_JAWS")},n[s])}),e.hasTraitUnlocked("BITE_MASTERY_II")&&e.maybeGainProc("HAWKS_EYE",.35)}))}});qn("APEX_ARROW",80,{potency:e=>{const t=e.resources.get("SOUL_VOICE"),n=20,o=e.hasTraitUnlocked("RANGED_MASTERY")?140:100,s=e.hasTraitUnlocked("RANGED_MASTERY")?700:500,c=1*(t.availableAmount()-n)/(t.maxValue-n);return(s-o)*c+o},falloff:0,applicationDelay:1.07,onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_APEX_ARROW")&&e.resources.get("SOUL_VOICE").availableAmount()>=80&&e.gainStatus("BLAST_ARROW_READY"),e.tryConsumeResource("SOUL_VOICE",!0)},validateAttempt:e=>e.hasResourceAvailable("SOUL_VOICE",20),highlightIf:e=>e.hasResourceAvailable("SOUL_VOICE",80),replaceIf:[{newSkill:"BLAST_ARROW",condition:e=>e.hasResourceAvailable("BLAST_ARROW_READY")}]});qn("BLAST_ARROW",86,{startOnHotbar:!1,potency:[["NEVER",600],["RANGED_MASTERY",700]],falloff:.5,applicationDelay:1.65,validateAttempt:e=>e.hasResourceAvailable("BLAST_ARROW_READY"),highlightIf:e=>e.hasResourceAvailable("BLAST_ARROW_READY"),onConfirm:e=>e.tryConsumeResource("BLAST_ARROW_READY")});Dl("EMYPREAL_ARROW",54,"cd_EMPYREAL_ARROW",{potency:[["NEVER",240],["RANGED_MASTERY",260]],cooldown:15,applicationDelay:1.03,onConfirm:e=>e.gainRepertoireEffect()});Dl("BLOODLETTER",12,"cd_HEARTBREAK_SHOT",{potency:130,cooldown:15,maxCharges:3,applicationDelay:1.65,autoUpgrade:{otherSkill:"HEARTBREAK_SHOT",trait:"BLOODLETTER_MASTERY"}});Dl("HEARTBREAK_SHOT",92,"cd_HEARTBREAK_SHOT",{startOnHotbar:!1,potency:180,cooldown:15,maxCharges:3,applicationDelay:1.65});Dl("SIDEWINDER",60,"cd_SIDEWINDER",{potency:[["NEVER",320],["RANGED_MASTERY",400]],cooldown:60,applicationDelay:.53});const $P=[{skillName:"WANDERERS_MINUET",song:"WANDERERS_MINUET",skillLevel:52,cdName:"cd_WANDERERS_MINUET",replaceIf:[{newSkill:"PITCH_PERFECT",condition:e=>e.hasResourceAvailable("WANDERERS_MINUET")}]},{skillName:"MAGES_BALLAD",song:"MAGES_BALLAD",skillLevel:30,cdName:"cd_MAGES_BALLAD"},{skillName:"ARMYS_PAEON",song:"ARMYS_PAEON",skillLevel:40,cdName:"cd_ARMYS_PAEON"}];$P.forEach(e=>{Dl(e.skillName,e.skillLevel,e.cdName,{applicationDelay:0,requiresCombat:!0,cooldown:120,replaceIf:e.replaceIf,onConfirm:t=>t.beginSong(e.song)})});Dl("PITCH_PERFECT",52,"cd_PITCH_PERFECT",{startOnHotbar:!1,applicationDelay:.8,cooldown:1,potency:e=>{const t=e.resources.get("PITCH_PERFECT").availableAmount();return t===3?360:t===2?220:100},falloff:.5,onConfirm:e=>e.tryConsumeResource("PITCH_PERFECT",!0),validateAttempt:e=>e.hasResourceAvailable("WANDERERS_MINUET")&&e.hasResourceAvailable("PITCH_PERFECT"),highlightIf:e=>e.hasResourceAvailable("WANDERERS_MINUET")&&e.hasResourceAvailable("PITCH_PERFECT")});gs("BARRAGE",38,"cd_BARRAGE",{rscType:"BARRAGE",applicationDelay:0,cooldown:120,onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_BARRAGE")&&e.gainStatus("RESONANT_ARROW_READY")},replaceIf:[{newSkill:"RESONANT_ARROW",condition:e=>e.hasResourceAvailable("RESONANT_ARROW_READY")}]});qn("RESONANT_ARROW",96,{startOnHotbar:!1,potency:640,falloff:.5,applicationDelay:1.16,onConfirm:e=>e.tryConsumeResource("RESONANT_ARROW_READY"),validateAttempt:e=>e.hasResourceAvailable("RESONANT_ARROW_READY"),highlightIf:e=>e.hasResourceAvailable("RESONANT_ARROW_READY")});gs("RADIANT_FINALE",90,"cd_RADIANT_FINALE",{rscType:"RADIANT_FINALE",applicationDelay:.62,cooldown:110,onConfirm:e=>{const t=e.getCodaCount();e.resources.get("RADIANT_CODA").overrideCurrentValue(t),e.tryConsumeResource("WANDERERS_CODA"),e.tryConsumeResource("MAGES_CODA"),e.tryConsumeResource("ARMYS_CODA"),e.hasTraitUnlocked("ENHANCED_RADIANT_FINALE")&&e.gainStatus("RADIANT_ENCORE_READY")},validateAttempt:e=>e.getCodaCount()>0,replaceIf:[{newSkill:"RADIANT_ENCORE",condition:e=>e.hasResourceAvailable("RADIANT_ENCORE_READY")}]});qn("RADIANT_ENCORE",100,{startOnHotbar:!1,potency:e=>{const t=e.resources.get("RADIANT_CODA").availableAmount();return t===3?1100:t===2?800:700},falloff:.5,applicationDelay:1.96,onConfirm:e=>e.tryConsumeResource("RADIANT_ENCORE_READY"),validateAttempt:e=>e.hasResourceAvailable("RADIANT_ENCORE_READY"),highlightIf:e=>e.hasResourceAvailable("RADIANT_ENCORE_READY")});gs("RAGING_STRIKES",4,"cd_RAGING_STRIKES",{rscType:"RAGING_STRIKES",applicationDelay:.53,cooldown:120});gs("BATTLE_VOICE",50,"cd_BATTLE_VOICE",{rscType:"BATTLE_VOICE",applicationDelay:.62,cooldown:120});qn("QUICK_NOCK",18,{potency:110,applicationDelay:1.11,onApplication:e=>e.maybeGainProc("HAWKS_EYE",.2),falloff:0,autoUpgrade:{trait:"QUICK_NOCK_MASTERY",otherSkill:"LADONSBITE"}});qn("LADONSBITE",82,{startOnHotbar:!1,potency:140,falloff:0,applicationDelay:1.11,onApplication:e=>e.maybeGainProc("HAWKS_EYE",.35)});qn("WIDE_VOLLEY",18,{potency:140,falloff:0,applicationDelay:1.43,onConfirm:e=>{e.hasResourceAvailable("BARRAGE")?e.tryConsumeResource("BARRAGE"):e.tryConsumeResource("HAWKS_EYE")},validateAttempt:e=>e.hasResourceAvailable("HAWKS_EYE")||e.hasResourceAvailable("BARRAGE"),highlightIf:e=>e.hasResourceAvailable("HAWKS_EYE")||e.hasResourceAvailable("BARRAGE"),autoUpgrade:{trait:"WIDE_VOLLEY_MASTERY",otherSkill:"SHADOWBITE"}});qn("SHADOWBITE",72,{startOnHotbar:!1,potency:200,falloff:0,applicationDelay:1.43,onConfirm:e=>{e.hasResourceAvailable("BARRAGE")?e.tryConsumeResource("BARRAGE"):e.tryConsumeResource("HAWKS_EYE")},validateAttempt:e=>e.hasResourceAvailable("HAWKS_EYE")||e.hasResourceAvailable("BARRAGE"),highlightIf:e=>e.hasResourceAvailable("HAWKS_EYE")||e.hasResourceAvailable("BARRAGE")});Dl("RAIN_OF_DEATH",45,"cd_HEARTBREAK_SHOT",{potency:100,cooldown:15,maxCharges:3,falloff:0,applicationDelay:1.65});gs("WARDENS_PAEAN",35,"cd_WARDENS_PAEAN",{rscType:"WARDENS_PAEAN",cooldown:45,applicationDelay:.62});gs("NATURES_MINNE",35,"cd_NATURES_MINNE",{rscType:"NATURES_MINNE",cooldown:120,applicationDelay:.62});Dl("REPELLING_SHOT",15,"cd_REPELLING_SHOT",{cooldown:30,animationLock:Wt});gs("TROUBADOUR",56,"cd_TROUBADOUR",{rscType:"TROUBADOUR",maxCharges:1,cooldown:90,applicationDelay:0});Object.keys(PR).filter(e=>!(e==="ESPRIT_PARTNER"||e==="STANDARD_FINISH_PARTNER")).forEach(e=>zt(e,`DNC/${Pe[e].name}.png`));zt("ESPRIT_PARTNER","DNC/Esprit.png");zt("STANDARD_FINISH_PARTNER","DNC/Standard Finish.png");const dN=["ESPRIT_TECHNICAL","ESPRIT_PARTNER","STANDARD_FINISH_PARTNER","DANCE_PARTNER"];class JP extends Xt{jobSpecificOtherTargetedBuffViewProps(){return dN.map(t=>t==="DANCE_PARTNER"?this.makeCommonTimerless(t,!1):this.makeCommonTimer(t,!1))}jobSpecificSelfTargetedBuffViewProps(){return[...Object.keys(PR).filter(t=>!dN.includes(t)).map(t=>t==="CLOSED_POSITION"||t==="RISING_RHYTHM"?this.makeCommonTimerless(t):this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){const n=this.state.resources,o=n.get("FEATHER_GAUGE").availableAmount(),s=n.get("STANDARD_DANCE").availableAmount(),c=n.get("TECHNICAL_DANCE").availableAmount(),d=[];if(this.state.hasTraitUnlocked("ESPRIT")){const f=n.get("ESPRIT_GAUGE").availableAmount();d.push({kind:"bar",name:N({en:"Esprit",zh:""}),color:t.dnc.esprit,progress:f/100,valueString:f.toFixed(0)})}return d.push({kind:"counter",name:N({en:"Feathers",zh:""}),color:t.dnc.feathers,currentStacks:o,maxStacks:4},{kind:"dance",name:N({en:"Standard",zh:""}),maxStacks:2,currentStacks:s,emboiteColor:t.dnc.emboite,entrechatColor:t.dnc.entrechat,jeteColor:t.dnc.jete,pirouetteColor:t.dnc.pirouette},{kind:"dance",name:N({en:"Technical",zh:""}),maxStacks:4,currentStacks:c,emboiteColor:t.dnc.emboite,entrechatColor:t.dnc.entrechat,jeteColor:t.dnc.jete,pirouetteColor:t.dnc.pirouette}),d}statusLayoutFn(t){return l.jsxs("div",{children:[l.jsxs("div",{style:{display:"inline-block",verticalAlign:"top",width:"50%",height:"100%"},children:[l.jsxs("span",{style:{display:"block",marginBottom:10},children:[N({en:"time: ",zh:"",ja:""}),`${Xe.displayTime(t.time,3)} (${t.time.toFixed(3)})`]}),t.resources?l.jsx(c0,{data:{level:t.level,resources:t.resources},style:{height:"17em"}}):void 0]}),l.jsxs("div",{style:{position:"relative",display:"inline-block",float:"right",width:"50%"},children:[t.resourceLocks?l.jsx(r0,{data:t.resourceLocks}):void 0,l.jsx(Jh,{data:t.enemyBuffs,style:{marginTop:50,marginBottom:"2em"}}),l.jsx(Jh,{data:t.selfBuffs,style:{position:"absolute",right:0,width:"200%"}})]})]})}}const st=(e,t,n)=>{Ve("DNC",e,t,n??{})};st("ESPRIT_GAUGE",100,{warnOnOvercap:!0});st("FEATHER_GAUGE",4,{warnOnOvercap:!0});st("STANDARD_DANCE",2);st("TECHNICAL_DANCE",4);st("SILKEN_SYMMETRY",1,{timeout:30});st("SILKEN_FLOW",1,{timeout:30});st("FLOURISHING_SYMMETRY",1,{timeout:30});st("FLOURISHING_FLOW",1,{timeout:30});st("THREEFOLD_FAN_DANCE",1,{timeout:30,warnOnOvercap:!0});st("FOURFOLD_FAN_DANCE",1,{timeout:30});st("FINISHING_MOVE_READY",1,{timeout:30});st("FLOURISHING_STARFALL",1,{timeout:20});st("STANDARD_STEP",1,{timeout:15});st("STANDARD_FINISH",1,{timeout:60});st("STANDARD_BONUS",2,{timeout:60});st("ESPRIT",1,{timeout:60});st("TECHNICAL_STEP",1,{timeout:15});st("TECHNICAL_FINISH",1,{timeout:20.5});st("TECHNICAL_BONUS",4,{timeout:20.5});st("LAST_DANCE_READY",1,{timeout:30});st("DANCE_OF_THE_DAWN_READY",1,{timeout:30});st("FLOURISHING_FINISH",1,{timeout:30});st("CLOSED_POSITION",1,{default:1});st("DEVILMENT",1,{timeout:20});st("SHIELD_SAMBA",1,{timeout:15});st("IMPROVISATION",1,{timeout:15});st("RISING_RHYTHM",4,{timeout:15});st("IMPROVISATION_REGEN",1,{timeout:15});st("IMPROVISED_FINISH",1,{timeout:30});st("DANCE_PARTNER",1,{default:1});st("ESPRIT_PARTNER",1,{timeout:60});st("STANDARD_FINISH_PARTNER",1,{timeout:60});st("ESPRIT_TECHNICAL",1,{timeout:20});st("CASCADE_COMBO",1,{timeout:30});st("WINDMILL_COMBO",1,{timeout:30});const eG=["CASCADE","FOUNTAIN","WINDMILL","BLADESHOWER"],tG=["EMBOITE","ENTRECHAT","JETE","PIROUETTE"];class aG extends qt{constructor(t){super(t),this.hasTraitUnlocked("ESPRIT")||this.resources.set(new _a("ESPRIT_GAUGE",0,0,!0));const n=this.hasTraitUnlocked("ENHANCED_EN_AVANT_II")?3:2;this.cooldowns.set(new Ue("cd_EN_AVANT",30,n,n));const o=this.hasTraitUnlocked("ENHANCED_SHIELD_SAMBA")?90:120;this.cooldowns.set(new Ue("cd_SHIELD_SAMBA",o,1,1)),this.registerRecurringEvents()}get statusPropsGenerator(){return new JP(this)}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("TECHNICAL_FINISH")&&t.addBuff(k.TechnicalFinish),this.hasResourceAvailable("DEVILMENT")&&t.addBuff(k.Devilment)}cancelChanneledSkills(){this.tryConsumeResource("IMPROVISATION"),this.tryConsumeResource("RISING_RHYTHM",!0)}processComboStatus(t){if(!eG.includes(t))return;const n=t==="CASCADE",o=t==="WINDMILL";this.setComboState("CASCADE_COMBO",n?1:0),this.setComboState("WINDMILL_COMBO",o?1:0)}getCurrentDanceStatus(){const t=this.hasResourceAvailable("STANDARD_STEP")?"STANDARD_DANCE":"TECHNICAL_DANCE";return this.resources.get(t).availableAmount()}processDanceStatus(t){if(!tG.includes(t))return;const n=this.hasResourceAvailable("STANDARD_STEP")?"STANDARD_DANCE":"TECHNICAL_DANCE";let o=0;switch(t){case"ENTRECHAT":o=1;break;case"JETE":o=2;break;case"PIROUETTE":o=3;break}const s=this.resources.get(n);s.availableAmount()===o&&s.gain(1)}gainProc(t){this.gainStatus(t)}maybeGainProc(t,n=.5){super.maybeGainProc(t,n,!0)}gainProcIfCombo(t,n){this.triggersEffect(.5,!0)&&n&&this.gainProc(t)}gainResource(t,n){this.resources.get(t).gain(n)}maybeGainResource(t,n,o=.5){this.triggersEffect(o,!0)&&this.gainResource(t,n)}simulatePartyEspritGain(){if(this.hasResourceAvailable("ESPRIT_TECHNICAL")){for(let t=0;t<this.resources.get("PARTY_SIZE").availableAmount()-1;t++)this.maybeGainResource("ESPRIT_GAUGE",10,.2);return}this.hasResourceAvailable("ESPRIT_PARTNER")&&this.maybeGainResource("ESPRIT_GAUGE",10,.2)}applyStandardFinish(t){t!==0&&(this.gainProc("STANDARD_FINISH"),this.gainStatus("STANDARD_BONUS",t),this.hasResourceAvailable("DANCE_PARTNER")&&this.gainProc("STANDARD_FINISH_PARTNER"),this.hasTraitUnlocked("ESPRIT")&&(this.gainProc("ESPRIT"),this.hasResourceAvailable("DANCE_PARTNER")&&this.gainProc("ESPRIT_PARTNER")),this.hasTraitUnlocked("ENHANCED_STANDARD_FINISH")&&this.gainProc("LAST_DANCE_READY"))}}const la=e=>e.hasResourceAvailable("STANDARD_STEP")||e.hasResourceAvailable("TECHNICAL_STEP"),m0={newSkill:"EMBOITE",condition:e=>la(e)},A0={newSkill:"ENTRECHAT",condition:e=>la(e)},R0={newSkill:"JETE",condition:e=>la(e)},T0={newSkill:"PIROUETTE",condition:e=>la(e)},Zt=(e,t,n)=>{const o=Le(s=>{n.potency&&s.simulatePartyEspritGain()},n.onConfirm,s=>s.processComboStatus(e));return ia("DNC",e,t,{...n,onConfirm:o,jobPotencyModifiers:s=>{const c=[];if(s.hasResourceAvailable("STANDARD_FINISH")){const d=s.resources.get("STANDARD_BONUS").availableAmount()===2?J.DoubleStandardFinish:J.SingleStandardFinish;c.push(d)}if(s.hasResourceAvailable("TECHNICAL_FINISH")){const d=s.resources.get("TECHNICAL_BONUS").availableAmount(),f=d===4?J.QuadrupleTechnicalFinish:d===3?J.TripleTechnicalFinish:J.SingleTechnicalFinish;c.push(f)}return s.hasResourceAvailable("DEVILMENT")&&c.push(J.Devilment),e==="STARFALL_DANCE"&&c.push(J.AutoCDH),c}})},xi=(e,t,n,o)=>et("DNC",e,t,n,{...o,onConfirm:o.onConfirm,jobPotencyModifiers:s=>{const c=[];if(s.hasResourceAvailable("STANDARD_FINISH")){const d=s.resources.get("STANDARD_BONUS").availableAmount()===2?J.DoubleStandardFinish:J.SingleStandardFinish;c.push(d)}if(s.hasResourceAvailable("TECHNICAL_FINISH")){const d=s.resources.get("TECHNICAL_BONUS").availableAmount(),f=d===4?J.QuadrupleTechnicalFinish:d===3?J.TripleTechnicalFinish:J.SingleTechnicalFinish;c.push(f)}return s.hasResourceAvailable("DEVILMENT")&&c.push(J.Devilment),c}}),S0=(e,t,n,o)=>Ye("DNC",e,t,n,o);Zt("EMBOITE",15,{startOnHotbar:!1,recastTime:1,onConfirm:e=>e.processDanceStatus("EMBOITE"),highlightIf:e=>la(e)&&e.getCurrentDanceStatus()===0});Zt("ENTRECHAT",15,{startOnHotbar:!1,recastTime:1,onConfirm:e=>e.processDanceStatus("ENTRECHAT"),highlightIf:e=>la(e)&&e.getCurrentDanceStatus()===1});Zt("JETE",15,{startOnHotbar:!1,recastTime:1,onConfirm:e=>e.processDanceStatus("JETE"),highlightIf:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===2});Zt("PIROUETTE",15,{startOnHotbar:!1,recastTime:1,onConfirm:e=>e.processDanceStatus("PIROUETTE"),highlightIf:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===3});Zt("CASCADE",1,{replaceIf:[m0],potency:[["NEVER",200],["DYNAMIC_DANCER",220]],recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.8,onConfirm:e=>{e.maybeGainProc("SILKEN_SYMMETRY"),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",5)}});Zt("FOUNTAIN",2,{replaceIf:[A0],potency:[["NEVER",100],["DYNAMIC_DANCER",120]],combo:{potency:[["NEVER",260],["DYNAMIC_DANCER",280]],resource:"CASCADE_COMBO",resourceValue:1},recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.98,onConfirm:e=>{e.gainProcIfCombo("SILKEN_FLOW",e.hasResourceExactly("CASCADE_COMBO",1)),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",5)},highlightIf:e=>e.resources.get("CASCADE_COMBO").availableAmount()===1});Zt("REVERSE_CASCADE",20,{replaceIf:[R0],potency:[["NEVER",260],["DYNAMIC_DANCER",280]],recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("SILKEN_SYMMETRY")||e.hasResourceAvailable("FLOURISHING_SYMMETRY"),onConfirm:e=>{e.hasResourceAvailable("SILKEN_SYMMETRY")?e.tryConsumeResource("SILKEN_SYMMETRY"):e.tryConsumeResource("FLOURISHING_SYMMETRY"),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",10),e.maybeGainResource("FEATHER_GAUGE",1)},highlightIf:e=>e.hasResourceAvailable("SILKEN_SYMMETRY")||e.hasResourceAvailable("FLOURISHING_SYMMETRY")});Zt("FOUNTAINFALL",40,{replaceIf:[T0],potency:[["NEVER",320],["DYNAMIC_DANCER",340]],recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:1.21,validateAttempt:e=>e.hasResourceAvailable("SILKEN_FLOW")||e.hasResourceAvailable("FLOURISHING_FLOW"),onConfirm:e=>{e.hasResourceAvailable("SILKEN_FLOW")?e.tryConsumeResource("SILKEN_FLOW"):e.tryConsumeResource("FLOURISHING_FLOW"),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",10),e.maybeGainResource("FEATHER_GAUGE",1)},highlightIf:e=>e.hasResourceAvailable("SILKEN_FLOW")||e.hasResourceAvailable("FLOURISHING_FLOW")});xi("FAN_DANCE",30,"cd_FAN_DANCE",{potency:[["NEVER",150],["DYNAMIC_DANCER",180]],cooldown:1,applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("FEATHER_GAUGE")&&!la(e),highlightIf:e=>e.hasResourceAvailable("FEATHER_GAUGE"),onConfirm:e=>{e.tryConsumeResource("FEATHER_GAUGE"),e.maybeGainProc("THREEFOLD_FAN_DANCE")}});Zt("SABER_DANCE",76,{replaceIf:[{newSkill:"DANCE_OF_THE_DAWN",condition:e=>e.hasResourceAvailable("DANCE_OF_THE_DAWN_READY")&&e.hasResourceAvailable("ESPRIT_GAUGE",50)}],potency:[["NEVER",500],["DYNAMIC_DANCER",540]],recastTime:e=>e.config.adjustedSksGCD(),falloff:.6,applicationDelay:.44,validateAttempt:e=>e.hasResourceAvailable("ESPRIT_GAUGE",50)&&!la(e),highlightIf:e=>e.hasResourceAvailable("ESPRIT_GAUGE",50),onConfirm:e=>e.resources.get("ESPRIT_GAUGE").consume(50)});Zt("DANCE_OF_THE_DAWN",100,{startOnHotbar:!1,potency:1e3,recastTime:e=>e.config.adjustedSksGCD(),falloff:.6,applicationDelay:.44,validateAttempt:e=>e.hasResourceAvailable("ESPRIT_GAUGE",50)&&!la(e),highlightIf:e=>e.hasResourceAvailable("ESPRIT_GAUGE",50),onConfirm:e=>{e.resources.get("ESPRIT_GAUGE").consume(50),e.tryConsumeResource("DANCE_OF_THE_DAWN_READY")}});Zt("LAST_DANCE",92,{potency:540,recastTime:e=>e.config.adjustedSksGCD(),falloff:.6,applicationDelay:1.26,validateAttempt:e=>e.hasResourceAvailable("LAST_DANCE_READY")&&!la(e),highlightIf:e=>e.hasResourceAvailable("LAST_DANCE_READY"),onConfirm:e=>e.tryConsumeResource("LAST_DANCE_READY")});Zt("STANDARD_STEP",15,{replaceIf:[{newSkill:"STANDARD_FINISH",condition:e=>e.hasResourceAvailable("STANDARD_STEP")&&e.getCurrentDanceStatus()===0},{newSkill:"SINGLE_STANDARD_FINISH",condition:e=>e.hasResourceAvailable("STANDARD_STEP")&&e.getCurrentDanceStatus()===1},{newSkill:"DOUBLE_STANDARD_FINISH",condition:e=>e.hasResourceAvailable("STANDARD_STEP")&&e.getCurrentDanceStatus()===2},{newSkill:"FINISHING_MOVE",condition:e=>e.hasResourceAvailable("FINISHING_MOVE_READY")}],validateAttempt:e=>!la(e),onConfirm:e=>e.gainProc("STANDARD_STEP"),recastTime:1.5,secondaryCooldown:{cdName:"cd_STANDARD_STEP",cooldown:30,maxCharges:1}});Zt("FINISHING_MOVE",96,{startOnHotbar:!1,potency:850,recastTime:e=>e.config.adjustedSksGCD(),falloff:.6,applicationDelay:2.05,onConfirm:e=>{e.applyStandardFinish(2),e.tryConsumeResource("FINISHING_MOVE_READY")},secondaryCooldown:{cdName:"cd_STANDARD_STEP",cooldown:30,maxCharges:1},validateAttempt:e=>e.hasResourceAvailable("FINISHING_MOVE_READY")&&!la(e),highlightIf:e=>e.hasResourceAvailable("FINISHING_MOVE_READY")});const nG=[{skill:"STANDARD_FINISH",potency:360},{skill:"SINGLE_STANDARD_FINISH",potency:540},{skill:"DOUBLE_STANDARD_FINISH",potency:[["NEVER",800],["DYNAMIC_DANCER",850]]}];nG.forEach(e=>{Zt(e.skill,15,{assetPath:"DNC/Standard Finish.png",startOnHotbar:!1,potency:e.potency,falloff:.6,applicationDelay:.54,onConfirm:t=>{const n=t.getCurrentDanceStatus();t.tryConsumeResource("STANDARD_STEP"),t.tryConsumeResource("STANDARD_DANCE",!0),n!==0&&t.applyStandardFinish(n)},recastTime:1.5,validateAttempt:t=>t.hasResourceAvailable("STANDARD_STEP"),highlightIf:t=>t.hasResourceAvailable("STANDARD_STEP")&&t.getCurrentDanceStatus()===2})});xi("FLOURISH",72,"cd_FLOURISH",{cooldown:60,requiresCombat:!0,validateAttempt:e=>!la(e),onConfirm:e=>{e.gainProc("FLOURISHING_SYMMETRY"),e.gainProc("FLOURISHING_FLOW"),e.gainProc("THREEFOLD_FAN_DANCE"),e.hasTraitUnlocked("ENHANCED_FLOURISH")&&e.gainProc("FOURFOLD_FAN_DANCE"),e.hasTraitUnlocked("ENHANCED_FLOURISH_II")&&e.gainProc("FINISHING_MOVE_READY")}});xi("FAN_DANCE_III",66,"cd_FAN_DANCE_III",{potency:[["NEVER",200],["DYNAMIC_DANCER",220]],cooldown:1,falloff:.6,applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("THREEFOLD_FAN_DANCE")&&!la(e),highlightIf:e=>e.hasResourceAvailable("THREEFOLD_FAN_DANCE"),onConfirm:e=>e.tryConsumeResource("THREEFOLD_FAN_DANCE")});xi("FAN_DANCE_IV",86,"cd_FAN_DANCE_IV",{potency:[["NEVER",300],["DYNAMIC_DANCER",460]],falloff:.6,cooldown:1,applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("FOURFOLD_FAN_DANCE")&&!la(e),highlightIf:e=>e.hasResourceAvailable("FOURFOLD_FAN_DANCE"),onConfirm:e=>e.tryConsumeResource("FOURFOLD_FAN_DANCE")});Zt("TECHNICAL_STEP",70,{replaceIf:[{newSkill:"TECHNICAL_FINISH",condition:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===0},{newSkill:"SINGLE_TECHNICAL_FINISH",condition:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===1},{newSkill:"DOUBLE_TECHNICAL_FINISH",condition:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===2},{newSkill:"TRIPLE_TECHNICAL_FINISH",condition:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===3},{newSkill:"QUADRUPLE_TECHNICAL_FINISH",condition:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===4},{newSkill:"TILLANA",condition:e=>e.hasResourceAvailable("FLOURISHING_FINISH")}],validateAttempt:e=>!la(e),onConfirm:e=>e.gainProc("TECHNICAL_STEP"),recastTime:1.5,falloff:.75,secondaryCooldown:{cdName:"cd_TECHNICAL_STEP",cooldown:120,maxCharges:1}});Zt("TILLANA",82,{startOnHotbar:!1,potency:600,recastTime:e=>e.config.adjustedSksGCD(),falloff:.6,applicationDelay:.84,onConfirm:e=>{e.gainResource("ESPRIT_GAUGE",50),e.tryConsumeResource("FLOURISHING_FINISH")},validateAttempt:e=>e.hasResourceAvailable("FLOURISHING_FINISH")&&!la(e),highlightIf:e=>e.hasResourceAvailable("FLOURISHING_FINISH")});Zt("TECHNICAL_FINISH",70,{startOnHotbar:!1,potency:350,applicationDelay:.54,onConfirm:e=>{e.tryConsumeResource("TECHNICAL_STEP"),e.tryConsumeResource("TECHNICAL_DANCE",!0)},recastTime:1.5,validateAttempt:e=>e.hasResourceAvailable("TECHNICAL_STEP")});const iG=[{skill:"TECHNICAL_FINISH",potency:350},{skill:"SINGLE_TECHNICAL_FINISH",potency:540},{skill:"DOUBLE_TECHNICAL_FINISH",potency:720},{skill:"TRIPLE_TECHNICAL_FINISH",potency:900},{skill:"QUADRUPLE_TECHNICAL_FINISH",potency:[["NEVER",1200],["DYNAMIC_DANCER",1300]]}];iG.forEach(e=>{Zt(e.skill,70,{assetPath:"DNC/Technical Finish.png",startOnHotbar:!1,potency:e.potency,applicationDelay:.54,falloff:.6,onConfirm:t=>{const n=t.getCurrentDanceStatus();t.tryConsumeResource("TECHNICAL_STEP"),t.tryConsumeResource("TECHNICAL_DANCE",!0),n!==0&&(t.gainProc("TECHNICAL_FINISH"),t.hasTraitUnlocked("ESPRIT")&&t.gainProc("ESPRIT_TECHNICAL"),t.gainStatus("TECHNICAL_BONUS",n),t.hasTraitUnlocked("ENHANCED_TECHNICAL_FINISH")&&t.gainProc("FLOURISHING_FINISH"),t.hasTraitUnlocked("ENHANCED_TECHNICAL_FINISH_II")&&t.gainProc("DANCE_OF_THE_DAWN_READY"))},recastTime:1.5,validateAttempt:t=>t.hasResourceAvailable("TECHNICAL_STEP"),highlightIf:t=>t.hasResourceAvailable("TECHNICAL_STEP")&&t.getCurrentDanceStatus()===4})});S0("DEVILMENT",62,"cd_DEVILMENT",{replaceIf:[{newSkill:"STARFALL_DANCE",condition:e=>e.hasResourceAvailable("FLOURISHING_STARFALL")}],rscType:"DEVILMENT",applicationDelay:0,cooldown:120,validateAttempt:e=>!la(e),onApplication:e=>{e.hasTraitUnlocked("ENHANCED_DEVILMENT")&&e.gainProc("FLOURISHING_STARFALL")}});Zt("STARFALL_DANCE",90,{startOnHotbar:!1,potency:600,recastTime:e=>e.config.adjustedSksGCD(),falloff:.75,applicationDelay:.89,validateAttempt:e=>e.hasResourceAvailable("FLOURISHING_STARFALL")&&!la(e),highlightIf:e=>e.hasResourceAvailable("FLOURISHING_STARFALL"),onConfirm:e=>e.tryConsumeResource("FLOURISHING_STARFALL")});Zt("WINDMILL",15,{replaceIf:[m0],potency:120,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.62,onConfirm:e=>{e.maybeGainProc("SILKEN_SYMMETRY"),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",5)}});Zt("BLADESHOWER",25,{replaceIf:[A0],potency:100,recastTime:e=>e.config.adjustedSksGCD(),combo:{potency:160,resource:"WINDMILL_COMBO",resourceValue:1},falloff:0,applicationDelay:.62,onConfirm:e=>{e.gainProcIfCombo("SILKEN_FLOW",e.hasResourceExactly("WINDMILL_COMBO",1)),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",5)},highlightIf:e=>e.resources.get("WINDMILL_COMBO").availableAmount()===1});Zt("RISING_WINDMILL",35,{replaceIf:[R0],potency:160,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("SILKEN_SYMMETRY")||e.hasResourceAvailable("FLOURISHING_SYMMETRY"),onConfirm:e=>{e.hasResourceAvailable("SILKEN_SYMMETRY")?e.tryConsumeResource("SILKEN_SYMMETRY"):e.tryConsumeResource("FLOURISHING_SYMMETRY"),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",10),e.maybeGainResource("FEATHER_GAUGE",1)},highlightIf:e=>e.hasResourceAvailable("SILKEN_SYMMETRY")||e.hasResourceAvailable("FLOURISHING_SYMMETRY")});Zt("BLOODSHOWER",45,{replaceIf:[T0],potency:200,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("SILKEN_FLOW")||e.hasResourceAvailable("FLOURISHING_FLOW"),onConfirm:e=>{e.hasResourceAvailable("SILKEN_FLOW")?e.tryConsumeResource("SILKEN_FLOW"):e.tryConsumeResource("FLOURISHING_FLOW"),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",10),e.maybeGainResource("FEATHER_GAUGE",1)},highlightIf:e=>e.hasResourceAvailable("SILKEN_FLOW")||e.hasResourceAvailable("FLOURISHING_FLOW")});xi("FAN_DANCE_II",30,"cd_FAN_DANCE_II",{potency:100,cooldown:1,falloff:0,applicationDelay:.54,validateAttempt:e=>e.hasResourceAvailable("FEATHER_GAUGE")&&!la(e),highlightIf:e=>e.hasResourceAvailable("FEATHER_GAUGE"),onConfirm:e=>{e.tryConsumeResource("FEATHER_GAUGE"),e.maybeGainProc("THREEFOLD_FAN_DANCE")}});xi("CURING_WALTZ",52,"cd_CURING_WALTZ",{cooldown:60,applicationDelay:.58});xi("IMPROVISATION",80,"cd_IMPROVISATION",{replaceIf:[{newSkill:"IMPROVISED_FINISH",condition:e=>e.hasResourceAvailable("IMPROVISATION")}],cooldown:120,applicationDelay:.89,validateAttempt:e=>!la(e),onConfirm:e=>{e.gainProc("IMPROVISATION"),e.gainProc("IMPROVISATION_REGEN");const t=()=>{e.hasResourceAvailable("IMPROVISATION")&&(e.resources.get("RISING_RHYTHM").gain(1),e.gainProc("IMPROVISATION_REGEN"),e.resources.addResourceEvent({rscType:"RISING_RHYTHM",name:"rising rhythm tic",delay:3,fnOnRsc:n=>t()}))};e.resources.addResourceEvent({rscType:"RISING_RHYTHM",name:"rising rhythm tic",delay:3,fnOnRsc:n=>t()}),e.resources.addResourceEvent({rscType:"IMPROVISATION",name:"improvisation timeout",delay:Ut("DNC","IMPROVISATION").maxTimeout,fnOnRsc:n=>{n.consume(1),e.tryConsumeResource("RISING_RHYTHM",!0)}})}});xi("IMPROVISED_FINISH",80,"cd_IMPROVISED_FINISH",{startOnHotbar:!1,cooldown:120,applicationDelay:.71,validateAttempt:e=>!la(e),onConfirm:e=>e.gainProc("IMPROVISED_FINISH")});xi("EN_AVANT",50,"cd_EN_AVANT",{cooldown:30,maxCharges:3,animationLock:Wt});S0("SHIELD_SAMBA",56,"cd_SHIELD_SAMBA",{rscType:"SHIELD_SAMBA",maxCharges:1,cooldown:90,applicationDelay:0});xi("CLOSED_POSITION",60,"cd_CLOSED_POSITION",{replaceIf:[{newSkill:"ENDING",condition:e=>e.hasResourceAvailable("CLOSED_POSITION")}],cooldown:30,maxCharges:1,applicationDelay:0,onConfirm:e=>{e.resources.get("CLOSED_POSITION").gain(1),e.resources.get("DANCE_PARTNER").gain(1)},validateAttempt:e=>!e.hasResourceAvailable("CLOSED_POSITION"),secondaryCooldown:{cdName:"cd_ENDING",cooldown:1,maxCharges:1}});xi("ENDING",60,"cd_ENDING",{startOnHotbar:!1,cooldown:1,maxCharges:1,applicationDelay:0,onConfirm:e=>{e.tryConsumeResource("CLOSED_POSITION",!0),e.tryConsumeResource("DANCE_PARTNER",!0),e.tryConsumeResource("STANDARD_FINISH_PARTNER",!0),e.tryConsumeResource("ESPRIT_PARTNER",!0)},secondaryCooldown:{cdName:"cd_CLOSED_POSITION",cooldown:30,maxCharges:1}});const g0=["CHAOS_THRUST_DOT","CHAOTIC_SPRING_DOT"],oG=Object.keys(GR).filter(e=>!g0.includes(e));Object.keys(GR).forEach(e=>zt(e,`DRG/${Pe[e].name}.png`));class lG extends Xt{jobSpecificOtherTargetedBuffViewProps(){return[...g0.flatMap(t=>this.makeTargetedTimers(t))]}jobSpecificSelfTargetedBuffViewProps(){return oG.map(t=>this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){const n=this.state.resources,o=n.get("DRG_CHAOS_COMBO_TRACKER"),s=n.get("DRG_HEAVENS_COMBO_TRACKER"),c=n.get("DRG_AOE_COMBO_TRACKER"),d=n.get("FIRSTMINDS_FOCUS").availableAmount(),f=n.get("LIFE_OF_THE_DRAGON"),h=f.available(1)?f.pendingChange?.timeTillEvent:void 0,m=o.available(1)?o.pendingChange?.timeTillEvent:s.available(1)?s.pendingChange?.timeTillEvent:c.available(1)?c.pendingChange?.timeTillEvent:void 0;return[{kind:"bar",name:N({en:"Combo Timer",zh:""}),color:t.drg.drgComboTimer,progress:m?m/30:0,valueString:m?.toFixed(3)??"N/A"},{kind:"bar",name:N({en:"Life of the Dragon"}),color:t.drg.lifeOfTheDragonBar,progress:h?h/20:0,valueString:h?h.toFixed(3):"N/A"},{kind:"counter",name:N({en:"Firstmind's Focus"}),color:t.drg.firstmindsFocusStacks,currentStacks:d,maxStacks:2}]}}const tn=(e,t,n)=>{Ve("DRG",e,t,n??{})};tn("POWER_SURGE",1,{timeout:30});tn("LIFE_SURGE",1,{timeout:5.52,warnOnTimeout:!0});tn("ENHANCED_PIERCING_TALON",1,{timeout:15.62});tn("LANCE_CHARGE",1,{timeout:20});tn("DIVE_READY",1,{timeout:15.46,warnOnTimeout:!0});tn("CHAOS_THRUST_DOT",1,{timeout:24});tn("BATTLE_LITANY",1,{timeout:20});tn("LIFE_OF_THE_DRAGON",1,{timeout:20});tn("NASTROND_READY",1,{timeout:20,warnOnTimeout:!0});tn("DRACONIAN_FIRE",1,{timeout:30});tn("CHAOTIC_SPRING_DOT",1,{timeout:24});tn("FIRSTMINDS_FOCUS",2,{warnOnOvercap:!0});tn("DRAGONS_FLIGHT",1,{timeout:30.79});tn("STARCROSS_READY",1,{timeout:20,warnOnTimeout:!0});tn("DRG_CHAOS_COMBO_TRACKER",4,{timeout:30});tn("DRG_HEAVENS_COMBO_TRACKER",4,{timeout:30});tn("DRG_AOE_COMBO_TRACKER",2,{timeout:30});const sG=["DOOM_SPIKE","SONIC_THRUST","COERTHAN_TORMENT","DRACONIAN_FURY"],hN=new Map([["DISEMBOWEL",1],["SPIRAL_BLOW",1],["CHAOS_THRUST",2],["CHAOTIC_SPRING",2],["WHEELING_THRUST",3]]),fN=new Map([["VORPAL_THRUST",1],["LANCE_BARRAGE",1],["FULL_THRUST",2],["HEAVENS_THRUST",2],["FANG_AND_CLAW",3]]);class rG extends qt{constructor(t){super(t);const n=this.hasTraitUnlocked("ENHANCED_WINGED_GLIDE")?2:1,o=this.hasTraitUnlocked("ENHANCED_LIFE_SURGE")?2:1;[new Ue("cd_WINGED_GLIDE",60,n,n),new Ue("cd_LIFE_SURGE",40,o,o)].forEach(s=>this.cooldowns.set(s)),this.registerRecurringEvents([{groupedEffects:[{effectName:"CHAOS_THRUST_DOT",appliedBy:["CHAOS_THRUST"]}]},{groupedEffects:[{effectName:"CHAOTIC_SPRING_DOT",appliedBy:["CHAOTIC_SPRING"]}]}])}get statusPropsGenerator(){return new lG(this)}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("POWER_SURGE")&&t.addBuff(k.PowerSurge),this.hasResourceAvailable("LANCE_CHARGE")&&t.addBuff(k.LanceCharge),this.hasResourceAvailable("LIFE_OF_THE_DRAGON")&&t.addBuff(k.LifeOfTheDragon),this.hasResourceAvailable("BATTLE_LITANY")&&t.addBuff(k.BattleLitany),n.name==="PIERCING_TALON"&&this.hasResourceAvailable("ENHANCED_PIERCING_TALON")&&t.addBuff(k.EnhancedPiercingTalon),n.cdName==="cd_GCD"&&this.hasResourceAvailable("LIFE_SURGE")&&t.addBuff(k.LifeSurge)}pushUniversalModifiers(t){this.hasResourceAvailable("POWER_SURGE")&&t.push(J.PowerSurge),this.hasResourceAvailable("LANCE_CHARGE")&&t.push(J.LanceCharge),this.hasResourceAvailable("LIFE_OF_THE_DRAGON")&&t.push(J.LifeOfTheDragon),this.hasResourceAvailable("BATTLE_LITANY")&&t.push(J.BattleLitany)}fixDRGComboState(t){if(this.tryConsumeResource("DRACONIAN_FIRE",!0),sG.includes(t)){this.tryConsumeResource("DRG_CHAOS_COMBO_TRACKER",!0),this.tryConsumeResource("DRG_HEAVENS_COMBO_TRACKER",!0);let n=0;t==="DOOM_SPIKE"||t==="DRACONIAN_FURY"?n=1:t==="SONIC_THRUST"&&this.hasResourceExactly("DRG_AOE_COMBO_TRACKER",1)&&(n=2),this.setComboState("DRG_AOE_COMBO_TRACKER",n);return}if(this.tryConsumeResource("DRG_AOE_COMBO_TRACKER",!0),t==="TRUE_THRUST"||t==="RAIDEN_THRUST"){this.tryConsumeResource("DRG_CHAOS_COMBO_TRACKER",!0),this.tryConsumeResource("DRG_HEAVENS_COMBO_TRACKER",!0),this.setComboState("DRG_CHAOS_COMBO_TRACKER",1),this.setComboState("DRG_HEAVENS_COMBO_TRACKER",1);return}if(hN.has(t)){const n=hN.get(t);this.tryConsumeResource("DRG_HEAVENS_COMBO_TRACKER",!0),this.setComboState("DRG_CHAOS_COMBO_TRACKER",this.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",n)?n+1:0)}else if(fN.has(t)){const n=fN.get(t);this.tryConsumeResource("DRG_CHAOS_COMBO_TRACKER",!0),this.setComboState("DRG_HEAVENS_COMBO_TRACKER",this.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",n)?n+1:0)}else t==="DRAKESBANE"&&(this.tryConsumeResource("DRG_HEAVENS_COMBO_TRACKER",!0),this.tryConsumeResource("DRG_CHAOS_COMBO_TRACKER",!0))}checkCombo(t){return this.hasResourceAvailable(t)}gainScale(t){this.resources.get("FIRSTMINDS_FOCUS").gain(t)}refreshBuff(t,n){this.addEvent(new Oe("gain buff",n,()=>{this.resources.get(t).gain(1),this.enqueueResourceDrop(t)}))}}const Fa=(e,t,n)=>{const o=Le(n.onConfirm,s=>{e!=="PIERCING_TALON"&&s.fixDRGComboState(e),s.tryConsumeResource("LIFE_SURGE")});return ia("DRG",e,t,{...n,onConfirm:o,recastTime:s=>s.config.adjustedSksGCD(),jobPotencyModifiers:s=>{const c=n.jobPotencyModifiers?.(s)??[];return e==="PIERCING_TALON"&&s.hasResourceAvailable("ENHANCED_PIERCING_TALON")&&c.push(J.EnhancedPiercingTalon),s.pushUniversalModifiers(c),s.hasResourceAvailable("LIFE_SURGE")&&c.push(J.LifeSurge),c}})},gi=(e,t,n,o)=>et("DRG",e,t,n,{...o,onConfirm:o.onConfirm,jobPotencyModifiers:s=>{const c=[];return s.pushUniversalModifiers(c),c}}),cG={newSkill:"DRAKESBANE",condition:e=>e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",4)},uG={newSkill:"DRAKESBANE",condition:e=>e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",4)},dG={newSkill:"RAIDEN_THRUST",condition:e=>e.resources.get("DRACONIAN_FIRE").available(1)},hG={newSkill:"TRUE_THRUST",condition:e=>!e.resources.get("DRACONIAN_FIRE").available(1)},fG={newSkill:"DRACONIAN_FURY",condition:e=>e.resources.get("DRACONIAN_FIRE").available(1)},EG={newSkill:"DOOM_SPIKE",condition:e=>!e.resources.get("DRACONIAN_FIRE").available(1)},mG={newSkill:"STARCROSS",condition:e=>e.hasResourceAvailable("STARCROSS_READY")&&e.hasResourceAvailable("LIFE_OF_THE_DRAGON")},AG={newSkill:"STARDIVER",condition:e=>!e.hasResourceAvailable("STARCROSS_READY")};Fa("PIERCING_TALON",15,{potency:[["NEVER",150],["LANCE_MASTERY",200]],applicationDelay:.85,onConfirm:e=>{e.tryConsumeResource("ENHANCED_PIERCING_TALON")},highlightIf:e=>e.hasResourceAvailable("ENHANCED_PIERCING_TALON"),startsAuto:!1});Fa("TRUE_THRUST",1,{replaceIf:[dG],potency:[["NEVER",200],["LANCE_MASTERY",230]],applicationDelay:.76});Fa("RAIDEN_THRUST",76,{startOnHotbar:!1,replaceIf:[hG],potency:[["NEVER",280],["MELEE_MASTERY_DRG",320]],applicationDelay:.62,validateAttempt:e=>e.resources.get("DRACONIAN_FIRE").available(1),highlightIf:e=>e.resources.get("DRACONIAN_FIRE").available(1),onConfirm:e=>{e.hasTraitUnlocked("LANCE_MASTERY_III")&&e.gainScale(1)}});Fa("DISEMBOWEL",18,{autoUpgrade:{trait:"LANCE_MASTERY_IV",otherSkill:"SPIRAL_BLOW"},applicationDelay:1.65,potency:[["NEVER",100],["LANCE_MASTERY",140]],combo:{potency:[["NEVER",220],["LANCE_MASTERY",250]],resource:"DRG_CHAOS_COMBO_TRACKER",resourceValue:1},onConfirm:e=>{e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",1)&&(e.resources.get("POWER_SURGE").gain(1),e.enqueueResourceDrop("POWER_SURGE",31.63))},highlightIf:e=>e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",1)});Fa("SPIRAL_BLOW",96,{autoDowngrade:{trait:"LANCE_MASTERY_IV",otherSkill:"DISEMBOWEL"},applicationDelay:1.38,potency:140,combo:{potency:[["NEVER",300]],resource:"DRG_CHAOS_COMBO_TRACKER",resourceValue:1},onConfirm:e=>{e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",1)&&(e.resources.get("POWER_SURGE").gain(1),e.enqueueResourceDrop("POWER_SURGE",31.38))},highlightIf:e=>e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",1)});Fa("CHAOS_THRUST",50,{autoUpgrade:{trait:"LANCE_MASTERY_II",otherSkill:"CHAOTIC_SPRING"},applicationDelay:1.65,potency:100,combo:{potency:220,resource:"DRG_CHAOS_COMBO_TRACKER",resourceValue:2},positional:{potency:140,comboPotency:260,location:"rear"},onConfirm:(e,t)=>{if(e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",2)){const n=[];e.pushUniversalModifiers(n),e.addDoTPotencies({node:t,effectName:"CHAOS_THRUST_DOT",skillName:"CHAOS_THRUST",tickPotency:40,speedStat:"sks",modifiers:n}),e.addEvent(new Oe("apply chaos thrust dot",1.65,()=>{e.applyDoT("CHAOS_THRUST_DOT",t)}))}},highlightIf:e=>e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",2)});Fa("CHAOTIC_SPRING",86,{autoDowngrade:{trait:"LANCE_MASTERY_II",otherSkill:"CHAOS_THRUST"},applicationDelay:.45,potency:140,combo:{potency:300,resource:"DRG_CHAOS_COMBO_TRACKER",resourceValue:2},positional:{potency:180,comboPotency:340,location:"rear"},onConfirm:(e,t)=>{if(e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",2)){const n=[];e.pushUniversalModifiers(n),e.addDoTPotencies({node:t,effectName:"CHAOTIC_SPRING_DOT",skillName:"CHAOTIC_SPRING",tickPotency:45,speedStat:"sks",modifiers:n}),e.addEvent(new Oe("apply chaotic spring dot",.45,()=>{e.applyDoT("CHAOTIC_SPRING_DOT",t)}))}},highlightIf:e=>e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",2)});Fa("WHEELING_THRUST",58,{replaceIf:[cG],applicationDelay:.67,potency:[["NEVER",100],["MELEE_MASTERY_DRG",140]],combo:{potency:[["NEVER",260],["MELEE_MASTERY_DRG",300]],resource:"DRG_CHAOS_COMBO_TRACKER",resourceValue:3},positional:{potency:[["NEVER",140],["MELEE_MASTERY_DRG",180]],comboPotency:[["NEVER",300],["MELEE_MASTERY_DRG",340]],location:"rear"},highlightIf:e=>e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",3)});Fa("VORPAL_THRUST",4,{autoUpgrade:{trait:"LANCE_MASTERY_IV",otherSkill:"LANCE_BARRAGE"},applicationDelay:1.02,potency:[["NEVER",100],["LANCE_MASTERY",130]],combo:{potency:[["NEVER",250],["LANCE_MASTERY",280]],resource:"DRG_HEAVENS_COMBO_TRACKER",resourceValue:1},highlightIf:e=>e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",1)});Fa("LANCE_BARRAGE",96,{autoDowngrade:{trait:"LANCE_MASTERY_IV",otherSkill:"VORPAL_THRUST"},applicationDelay:.94,potency:130,combo:{potency:340,resource:"DRG_HEAVENS_COMBO_TRACKER",resourceValue:1},highlightIf:e=>e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",1)});Fa("FULL_THRUST",26,{autoUpgrade:{trait:"LANCE_MASTERY_II",otherSkill:"HEAVENS_THRUST"},applicationDelay:1.12,potency:100,combo:{potency:380,resource:"DRG_HEAVENS_COMBO_TRACKER",resourceValue:2},highlightIf:e=>e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",2)});Fa("HEAVENS_THRUST",86,{autoDowngrade:{trait:"LANCE_MASTERY_II",otherSkill:"FULL_THRUST"},applicationDelay:.71,potency:[["NEVER",100],["MELEE_MASTERY_DRG",160]],combo:{potency:[["NEVER",400],["MELEE_MASTERY_DRG",460]],resource:"DRG_HEAVENS_COMBO_TRACKER",resourceValue:2},highlightIf:e=>e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",2)});Fa("FANG_AND_CLAW",56,{replaceIf:[uG],applicationDelay:.62,potency:[["NEVER",100],["MELEE_MASTERY_DRG",140]],combo:{potency:[["NEVER",260],["MELEE_MASTERY_DRG",300]],resource:"DRG_HEAVENS_COMBO_TRACKER",resourceValue:3},positional:{potency:[["NEVER",140],["MELEE_MASTERY_DRG",180]],comboPotency:[["NEVER",300],["MELEE_MASTERY_DRG",340]],location:"flank"},highlightIf:e=>e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",3)});Fa("DRAKESBANE",64,{startOnHotbar:!1,applicationDelay:1,potency:[["NEVER",380],["LANCE_MASTERY_II",400],["MELEE_MASTERY_DRG",460]],validateAttempt:e=>e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",4)||e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",4),onConfirm:e=>{(e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",4)||e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",4))&&e.refreshBuff("DRACONIAN_FIRE",0)},highlightIf:e=>e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",4)||e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",4)});Fa("DOOM_SPIKE",40,{replaceIf:[fG],potency:110,falloff:0,applicationDelay:1.29});Fa("DRACONIAN_FURY",82,{replaceIf:[EG],startOnHotbar:!1,potency:130,falloff:0,applicationDelay:.76,validateAttempt:e=>e.resources.get("DRACONIAN_FIRE").available(1),highlightIf:e=>e.resources.get("DRACONIAN_FIRE").available(1),onConfirm:e=>{e.hasTraitUnlocked("LANCE_MASTERY_III")&&e.gainScale(1)}});Fa("SONIC_THRUST",62,{applicationDelay:.8,potency:100,combo:{potency:120,resource:"DRG_AOE_COMBO_TRACKER",resourceValue:1},falloff:0,highlightIf:e=>e.hasResourceExactly("DRG_AOE_COMBO_TRACKER",1),onConfirm:e=>{e.hasResourceExactly("DRG_AOE_COMBO_TRACKER",1)&&(e.resources.get("POWER_SURGE").gain(1),e.enqueueResourceDrop("POWER_SURGE",30.79))}});Fa("COERTHAN_TORMENT",72,{applicationDelay:.49,potency:100,combo:{potency:150,resource:"DRG_AOE_COMBO_TRACKER",resourceValue:2},falloff:0,highlightIf:e=>e.hasResourceExactly("DRG_AOE_COMBO_TRACKER",2),onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_COERTHAN_TORMENT")&&e.hasResourceExactly("DRG_AOE_COMBO_TRACKER",2)&&e.refreshBuff("DRACONIAN_FIRE",0)}});Ye("DRG","LIFE_SURGE",6,"cd_LIFE_SURGE",{rscType:"LIFE_SURGE",applicationDelay:0,cooldown:40,maxCharges:2});gi("WYRMWIND_THRUST",90,"cd_WYRMWIND_THRUST",{applicationDelay:1.2,validateAttempt:e=>e.hasResourceExactly("FIRSTMINDS_FOCUS",2),highlightIf:e=>e.hasResourceExactly("FIRSTMINDS_FOCUS",2),potency:[["NEVER",420],["MELEE_MASTERY_DRG",440]],falloff:.5,cooldown:10,onConfirm:e=>{e.tryConsumeResource("FIRSTMINDS_FOCUS",!0)}});Ye("DRG","LANCE_CHARGE",30,"cd_LANCE_CHARGE",{rscType:"LANCE_CHARGE",applicationDelay:.62,cooldown:60});Ye("DRG","BATTLE_LITANY",52,"cd_BATTLE_LITANY",{rscType:"BATTLE_LITANY",applicationDelay:.62,cooldown:120});gi("GEIRSKOGUL",60,"cd_GEIRSKOGUL",{applicationDelay:.67,potency:[["NEVER",200],["LANCE_MASTERY_III",280]],falloff:.5,cooldown:60,onConfirm:e=>{e.refreshBuff("LIFE_OF_THE_DRAGON",0),e.refreshBuff("NASTROND_READY",0),e.addEvent(new Oe("drop starcross when life drops",20,()=>{e.tryConsumeResource("STARCROSS_READY")}))}});gi("NASTROND",70,"cd_NASTROND",{applicationDelay:.76,potency:[["NEVER",600],["LANCE_MASTERY_III",720]],falloff:.5,cooldown:2,validateAttempt:e=>e.resources.get("LIFE_OF_THE_DRAGON").available(1)&&e.resources.get("NASTROND_READY").available(1),highlightIf:e=>e.resources.get("LIFE_OF_THE_DRAGON").available(1)&&e.resources.get("NASTROND_READY").available(1),onConfirm:e=>{e.tryConsumeResource("NASTROND_READY")}});gi("JUMP",30,"cd_JUMP",{autoUpgrade:{trait:"JUMP_MASTERY",otherSkill:"HIGH_JUMP"},applicationDelay:.49,animationLock:.8,potency:320,cooldown:30,onConfirm:e=>{e.refreshBuff("DIVE_READY",0)}});gi("HIGH_JUMP",74,"cd_HIGH_JUMP",{autoDowngrade:{trait:"JUMP_MASTERY",otherSkill:"JUMP"},applicationDelay:.49,animationLock:.8,potency:400,cooldown:30,onConfirm:e=>{e.refreshBuff("DIVE_READY",0)}});gi("MIRAGE_DIVE",68,"cd_MIRAGE_DIVE",{applicationDelay:.8,validateAttempt:e=>e.hasResourceAvailable("DIVE_READY"),highlightIf:e=>e.hasResourceAvailable("DIVE_READY"),potency:380,cooldown:1,onConfirm:e=>{e.tryConsumeResource("DIVE_READY")}});gi("DRAGONFIRE_DIVE",50,"cd_DRAGONFIRE_DIVE",{applicationDelay:.8,animationLock:.8,potency:500,falloff:.5,cooldown:120,onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_DRAGONFIRE_DIVE")&&e.refreshBuff("DRAGONS_FLIGHT",0)}});gi("RISE_OF_THE_DRAGON",92,"cd_RISE_OF_THE_DRAGON",{applicationDelay:1.16,potency:550,falloff:.5,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("DRAGONS_FLIGHT"),highlightIf:e=>e.hasResourceAvailable("DRAGONS_FLIGHT"),onConfirm:e=>{e.tryConsumeResource("DRAGONS_FLIGHT")}});gi("STARDIVER",80,"cd_STARDIVER",{replaceIf:[mG],applicationDelay:1.29,animationLock:1.5,potency:[["NEVER",720],["MELEE_MASTERY_DRG",840]],falloff:.4,cooldown:30,validateAttempt:e=>e.hasResourceAvailable("LIFE_OF_THE_DRAGON"),onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_STARDIVER")&&e.refreshBuff("STARCROSS_READY",0)}});gi("STARCROSS",100,"cd_STARCROSS",{startOnHotbar:!1,replaceIf:[AG],applicationDelay:.98,potency:1e3,falloff:.4,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("STARCROSS_READY")&&e.hasResourceAvailable("LIFE_OF_THE_DRAGON"),highlightIf:e=>e.hasResourceAvailable("STARCROSS_READY")&&e.hasResourceAvailable("LIFE_OF_THE_DRAGON"),onConfirm:e=>{e.tryConsumeResource("STARCROSS_READY")}});gi("ELUSIVE_JUMP",35,"cd_ELUSIVE_JUMP",{potency:0,applicationDelay:0,animationLock:1,cooldown:30,onConfirm:e=>{e.refreshBuff("ENHANCED_PIERCING_TALON",0)}});gi("WINGED_GLIDE",45,"cd_WINGED_GLIDE",{potency:0,applicationDelay:0,animationLock:Wt,cooldown:60,maxCharges:2});const I0=["SONIC_BREAK_DOT","BOW_SHOCK_DOT"],RG=Object.keys(FR).filter(e=>!I0.includes(e));Object.keys(FR).forEach(e=>zt(e,`GNB/${Pe[e].name}.png`));class TG extends Xt{jobSpecificOtherTargetedBuffViewProps(){return[...I0.flatMap(t=>this.makeTargetedTimers(t))]}jobSpecificSelfTargetedBuffViewProps(){return RG.map(t=>t==="ROYAL_GUARD"?this.makeCommonTimerless(t):this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){const n=this.state.resources,o=n.get("GNB_COMBO_TRACKER"),s=n.get("GNB_AOE_COMBO_TRACKER"),c=n.get("POWDER_GAUGE").availableAmount(),d=n.get("ROYAL_GUARD").availableAmount(),f=o.available(1)?o.pendingChange?.timeTillEvent:s.available(1)?s.pendingChange?.timeTillEvent:void 0,h=n.get("BLOODFEST").available(1)?2:1;return[{kind:"bar",name:N({en:"Combo Timer",zh:""}),color:t.rdm.manaStack,progress:f?f/30:0,valueString:f?.toFixed(3)??"N/A"},{kind:"counter",name:N({en:"Royal Guard",zh:""}),color:t.rdm.manaStack,currentStacks:d,maxStacks:1},{kind:"counter",name:N({en:"Powder Gauge",zh:""}),color:t.rdm.manaStack,currentStacks:c,maxStacks:(this.state.hasTraitUnlocked("CARTRIDGE_CHARGE_II")?3:2)*h}]}}const Dt=(e,t,n)=>{Ve("GNB",e,t,n??{})};Dt("POWDER_GAUGE",3,{warnOnOvercap:!0});Dt("ROYAL_GUARD",1);Dt("NO_MERCY",1,{timeout:20});Dt("AURORA",1,{timeout:18});Dt("BOW_SHOCK_DOT",1,{timeout:15});Dt("CAMOUFLAGE",1,{timeout:20});Dt("HEART_OF_CORUNDUM",1,{timeout:8});Dt("CLARITY_OF_CORUNDUM",1,{timeout:15});Dt("CATHARSIS_OF_CORUNDUM",1,{timeout:20});Dt("NEBULA",1,{timeout:15});Dt("GREAT_NEBULA",1,{timeout:15});Dt("HEART_OF_LIGHT",1,{timeout:15});Dt("HEART_OF_STONE",1,{timeout:8});Dt("READY_TO_BLAST",1,{timeout:10,warnOnTimeout:!0});Dt("READY_TO_BREAK",1,{timeout:30,warnOnTimeout:!0});Dt("READY_TO_GOUGE",1,{timeout:10,warnOnTimeout:!0});Dt("READY_TO_RAZE",1,{timeout:10,warnOnTimeout:!0});Dt("READY_TO_REIGN",1,{timeout:30,warnOnTimeout:!0});Dt("READY_TO_RIP",1,{timeout:10,warnOnTimeout:!0});Dt("READY_TO_TEAR",1,{timeout:10,warnOnTimeout:!0});Dt("SONIC_BREAK_DOT",1,{timeout:15});Dt("SUPERBOLIDE",1,{timeout:10});Dt("BRUTAL_SHELL",1,{timeout:30});Dt("GNB_COMBO_TRACKER",2,{timeout:30});Dt("GNB_AOE_COMBO_TRACKER",1,{timeout:30});Dt("GNB_GNASHING_COMBO_TRACKER",2,{timeout:30});Dt("GNB_REIGN_COMBO_TRACKER",2,{timeout:30});Dt("BLOODFEST",1,{timeout:30});const EN=["KEEN_EDGE","BRUTAL_SHELL","SOLID_BARREL"],SG=["DEMON_SLICE","DEMON_SLAUGHTER"],mN=["GNASHING_FANG","SAVAGE_CLAW","WICKED_TALON"],AN=["REIGN_OF_BEASTS","NOBLE_BLOOD","LION_HEART"];class gG extends qt{constructor(t){super(t);const n=this.hasTraitUnlocked("ENHANCED_AURORA")?2:1;[new Ue("cd_AURORA",60,n,n)].forEach(s=>this.cooldowns.set(s)),this.cooldowns.set(new Ue("cd_DOUBLE_DOWN",this.config.adjustedSksGCD(60),1,1));const o=this.hasTraitUnlocked("CARTRIDGE_CHARGE_II")?3:2;this.resources.set(new _a("POWDER_GAUGE",o,0,!0)),this.registerRecurringEvents([{groupedEffects:[{effectName:"SONIC_BREAK_DOT",appliedBy:["SONIC_BREAK"]}]},{groupedEffects:[{effectName:"BOW_SHOCK_DOT",appliedBy:["BOW_SHOCK"]}]}])}get statusPropsGenerator(){return new TG(this)}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("NO_MERCY")&&t.addBuff(k.NoMercy)}fixGNBComboState(t){if(SG.includes(t)){this.tryConsumeResource("GNB_COMBO_TRACKER",!0),this.tryConsumeResource("GNB_REIGN_COMBO_TRACKER",!0),this.tryConsumeResource("GNB_GNASHING_COMBO_TRACKER",!0),this.tryConsumeResource("GNB_AOE_COMBO_TRACKER"),t==="DEMON_SLICE"&&this.setComboState("GNB_AOE_COMBO_TRACKER",1);return}let n="GNB_COMBO_TRACKER",o=-1;EN.includes(t)?(this.tryConsumeResource("GNB_AOE_COMBO_TRACKER",!0),this.tryConsumeResource("GNB_REIGN_COMBO_TRACKER",!0),this.tryConsumeResource("GNB_GNASHING_COMBO_TRACKER",!0),o=EN.indexOf(t)):mN.includes(t)?(this.tryConsumeResource("GNB_REIGN_COMBO_TRACKER",!0),n="GNB_GNASHING_COMBO_TRACKER",o=mN.indexOf(t)):AN.includes(t)&&(this.tryConsumeResource("GNB_GNASHING_COMBO_TRACKER",!0),n="GNB_REIGN_COMBO_TRACKER",o=AN.indexOf(t));let s=0;o===0?s=1:o===1&&this.hasResourceExactly(n,1)&&(s=2),this.setComboState(n,s)}gainCartridge(t){this.resources.get("POWDER_GAUGE").gain(t)}refreshBuff(t,n){this.addEvent(new Oe("gain buff",n,()=>{this.resources.get(t).gain(1),this.enqueueResourceDrop(t)}))}}const cn=(e,t,n)=>{const o=Le(n.onConfirm,s=>{["SONIC_BREAK","BURST_STRIKE","FATED_CIRCLE","DOUBLE_DOWN","LIGHTNING_SHOT"].includes(e)||s.fixGNBComboState(e),s.tryConsumeResource("READY_TO_BLAST"),s.tryConsumeResource("READY_TO_RAZE"),s.tryConsumeResource("READY_TO_RIP"),s.tryConsumeResource("READY_TO_TEAR"),s.tryConsumeResource("READY_TO_GOUGE")});return ia("GNB",e,t,{...n,onConfirm:o,recastTime:s=>s.config.adjustedSksGCD(),jobPotencyModifiers:s=>s.hasResourceAvailable("NO_MERCY")?[J.NoMercy]:[]})},sa=(e,t,n,o)=>et("GNB",e,t,n,{...o,jobPotencyModifiers:s=>s.hasResourceAvailable("NO_MERCY")?[J.NoMercy]:[]}),_0={newSkill:"GNASHING_FANG",condition:e=>e.resources.get("GNB_GNASHING_COMBO_TRACKER").availableAmount()===0},p0={newSkill:"SAVAGE_CLAW",condition:e=>e.resources.get("GNB_GNASHING_COMBO_TRACKER").availableAmount()===1},N0={newSkill:"WICKED_TALON",condition:e=>e.resources.get("GNB_GNASHING_COMBO_TRACKER").availableAmount()===2},C0={newSkill:"REIGN_OF_BEASTS",condition:e=>e.resources.get("GNB_REIGN_COMBO_TRACKER").availableAmount()===0},b0={newSkill:"NOBLE_BLOOD",condition:e=>e.resources.get("GNB_REIGN_COMBO_TRACKER").availableAmount()===1},O0={newSkill:"LION_HEART",condition:e=>e.resources.get("GNB_REIGN_COMBO_TRACKER").availableAmount()===2},IG={newSkill:"HYPERVELOCITY",condition:e=>e.hasResourceAvailable("READY_TO_BLAST")},_G={newSkill:"FATED_BRAND",condition:e=>e.hasResourceAvailable("READY_TO_RAZE")},pG={newSkill:"JUGULAR_RIP",condition:e=>e.hasResourceAvailable("READY_TO_RIP")},NG={newSkill:"ABDOMEN_TEAR",condition:e=>e.hasResourceAvailable("READY_TO_TEAR")},CG={newSkill:"EYE_GOUGE",condition:e=>e.hasResourceAvailable("READY_TO_GOUGE")},bG={newSkill:"ROYAL_GUARD",condition:e=>!e.hasResourceAvailable("ROYAL_GUARD")},OG={newSkill:"RELEASE_ROYAL_GUARD",condition:e=>e.hasResourceAvailable("ROYAL_GUARD")};cn("LIGHTNING_SHOT",15,{potency:150,applicationDelay:.72,startsAuto:!1});cn("KEEN_EDGE",1,{potency:[["NEVER",150],["MELEE_MASTERY_TANK",200],["MELEE_MASTERY_II_TANK",300]],applicationDelay:.89});cn("BRUTAL_SHELL",4,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",160],["MELEE_MASTERY_II_TANK",240]],combo:{potency:[["NEVER",240],["MELEE_MASTERY_TANK",300],["MELEE_MASTERY_II_TANK",380]],resource:"GNB_COMBO_TRACKER",resourceValue:1},applicationDelay:1.07,onConfirm:e=>{e.hasResourceExactly("GNB_COMBO_TRACKER",1)&&e.refreshBuff("BRUTAL_SHELL",0)},highlightIf:e=>e.hasResourceExactly("GNB_COMBO_TRACKER",1)});cn("SOLID_BARREL",26,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",140],["MELEE_MASTERY_II_TANK",240]],combo:{potency:[["NEVER",320],["MELEE_MASTERY_TANK",360],["MELEE_MASTERY_II_TANK",460]],resource:"GNB_COMBO_TRACKER",resourceValue:2},applicationDelay:1.07,onConfirm:e=>{e.hasResourceExactly("GNB_COMBO_TRACKER",2)&&e.gainCartridge(1)},highlightIf:e=>e.hasResourceExactly("GNB_COMBO_TRACKER",2)});cn("DEMON_SLICE",10,{potency:100,falloff:0,applicationDelay:.62});cn("DEMON_SLAUGHTER",40,{potency:100,combo:{potency:160,resource:"GNB_AOE_COMBO_TRACKER",resourceValue:1},falloff:0,applicationDelay:.62,onConfirm:e=>{e.hasResourceExactly("GNB_AOE_COMBO_TRACKER",1)&&e.gainCartridge(1)},highlightIf:e=>e.hasResourceExactly("GNB_AOE_COMBO_TRACKER",1)});cn("BURST_STRIKE",30,{potency:[["NEVER",340],["MELEE_MASTERY_II_TANK",420]],applicationDelay:.71,validateAttempt:e=>e.hasResourceAvailable("POWDER_GAUGE"),onConfirm:e=>{e.tryConsumeResource("POWDER_GAUGE"),e.hasTraitUnlocked("ENHANCED_CONTINUATION")&&e.refreshBuff("READY_TO_BLAST",0)},highlightIf:e=>e.hasResourceAvailable("POWDER_GAUGE")});cn("FATED_CIRCLE",72,{potency:300,falloff:0,applicationDelay:.54,validateAttempt:e=>e.hasResourceAvailable("POWDER_GAUGE"),onConfirm:e=>{e.tryConsumeResource("POWDER_GAUGE"),e.hasTraitUnlocked("ENHANCED_CONTINUATION_II")&&e.refreshBuff("READY_TO_RAZE",0)},highlightIf:e=>e.hasResourceAvailable("POWDER_GAUGE")});sa("BLOODFEST",76,"cd_BLOODFEST",{applicationDelay:0,cooldown:60,maxCharges:1,onConfirm:e=>{const t=e.hasTraitUnlocked("CARTRIDGE_CHARGE_II")?3:2;e.gainStatus("BLOODFEST"),e.resources.set(new _a("POWDER_GAUGE",t*2,e.resources.get("POWDER_GAUGE").availableAmount(),!0)),e.addEvent(new Oe("restore bloodfest max stacks",Ut("GNB","BLOODFEST").maxTimeout,()=>{e.resources.get("POWDER_GAUGE").availableAmount()>t&&I.reportWarning({kind:"overcap",rsc:"POWDER_GAUGE"}),e.resources.set(new _a("POWDER_GAUGE",t,Math.min(e.resources.get("POWDER_GAUGE").availableAmount(),t),!0))})),e.gainCartridge(t),e.hasTraitUnlocked("ENHANCED_BLOODFEST")&&e.refreshBuff("READY_TO_REIGN",0)}});sa("NO_MERCY",2,"cd_NO_MERCY",{applicationDelay:0,cooldown:60,maxCharges:1,onConfirm:e=>{e.refreshBuff("NO_MERCY",.62),e.refreshBuff("READY_TO_BREAK",0)}});cn("SONIC_BREAK",54,{potency:340,applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("READY_TO_BREAK"),onConfirm:(e,t)=>{e.tryConsumeResource("READY_TO_BREAK");const n=[];e.hasResourceAvailable("NO_MERCY")&&n.push(J.NoMercy),e.addDoTPotencies({node:t,effectName:"SONIC_BREAK_DOT",skillName:"SONIC_BREAK",tickPotency:120,speedStat:"sks",modifiers:n})},onApplication:(e,t)=>e.applyDoT("SONIC_BREAK_DOT",t),highlightIf:e=>e.hasResourceAvailable("READY_TO_BREAK")});cn("GNASHING_FANG",60,{replaceIf:[p0,N0],potency:[["NEVER",330],["MELEE_MASTERY_II_TANK",440]],applicationDelay:.62,recastTime:e=>e.config.adjustedSksGCD(),validateAttempt:e=>e.hasResourceAvailable("POWDER_GAUGE"),onConfirm:e=>{e.refreshBuff("READY_TO_RIP",0),e.tryConsumeResource("POWDER_GAUGE")},highlightIf:e=>e.hasResourceAvailable("POWDER_GAUGE")&&!e.hasResourceAvailable("GNB_REIGN_COMBO_TRACKER"),secondaryCooldown:{cdName:"cd_GNASHING_FANG",cooldown:30,maxCharges:2}});cn("SAVAGE_CLAW",60,{startOnHotbar:!1,replaceIf:[_0,N0],potency:[["NEVER",410],["MELEE_MASTERY_II_TANK",500]],applicationDelay:.62,validateAttempt:e=>e.hasResourceExactly("GNB_GNASHING_COMBO_TRACKER",1),onConfirm:e=>{e.refreshBuff("READY_TO_TEAR",0)},highlightIf:e=>e.hasResourceExactly("GNB_GNASHING_COMBO_TRACKER",1)});cn("WICKED_TALON",60,{startOnHotbar:!1,replaceIf:[_0,p0],potency:[["NEVER",490],["MELEE_MASTERY_II_TANK",560]],applicationDelay:1.16,validateAttempt:e=>e.hasResourceExactly("GNB_GNASHING_COMBO_TRACKER",2),onConfirm:e=>{e.refreshBuff("READY_TO_GOUGE",0)},highlightIf:e=>e.hasResourceExactly("GNB_GNASHING_COMBO_TRACKER",2)});cn("DOUBLE_DOWN",90,{potency:1e3,falloff:.15,applicationDelay:.72,recastTime:e=>e.config.adjustedSksGCD(),validateAttempt:e=>e.hasResourceAvailable("POWDER_GAUGE",2),onConfirm:e=>{e.resources.get("POWDER_GAUGE").consume(2)},highlightIf:e=>e.hasResourceAvailable("POWDER_GAUGE",2),secondaryCooldown:{cdName:"cd_DOUBLE_DOWN",cooldown:60,maxCharges:1}});cn("REIGN_OF_BEASTS",100,{replaceIf:[b0,O0],potency:800,falloff:.6,applicationDelay:1.16,validateAttempt:e=>e.hasResourceAvailable("READY_TO_REIGN"),onConfirm:e=>{e.tryConsumeResource("READY_TO_REIGN")},highlightIf:e=>e.hasResourceAvailable("READY_TO_REIGN")});cn("NOBLE_BLOOD",100,{startOnHotbar:!1,replaceIf:[C0,O0],potency:900,falloff:.6,applicationDelay:1.65,validateAttempt:e=>e.hasResourceExactly("GNB_REIGN_COMBO_TRACKER",1),highlightIf:e=>e.hasResourceExactly("GNB_REIGN_COMBO_TRACKER",1)});cn("LION_HEART",100,{startOnHotbar:!1,replaceIf:[C0,b0],potency:1e3,falloff:.6,applicationDelay:1.79,validateAttempt:e=>e.hasResourceExactly("GNB_REIGN_COMBO_TRACKER",2),highlightIf:e=>e.hasResourceExactly("GNB_REIGN_COMBO_TRACKER",2)});sa("CONTINUATION",70,"cd_CONTINUATION",{replaceIf:[IG,_G,pG,NG,CG],applicationDelay:0,potency:0,cooldown:1,validateAttempt:e=>!1});sa("HYPERVELOCITY",86,"cd_HYPERVELOCITY",{startOnHotbar:!1,applicationDelay:.76,potency:[["NEVER",140],["MELEE_MASTERY_II_TANK",180]],cooldown:1,validateAttempt:e=>e.hasResourceAvailable("READY_TO_BLAST"),highlightIf:e=>e.hasResourceAvailable("READY_TO_BLAST"),onConfirm:e=>{e.tryConsumeResource("READY_TO_BLAST")}});sa("FATED_BRAND",96,"cd_FATED_BRAND",{startOnHotbar:!1,applicationDelay:1.16,potency:120,falloff:0,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("READY_TO_RAZE"),highlightIf:e=>e.hasResourceAvailable("READY_TO_RAZE"),onConfirm:e=>{e.tryConsumeResource("READY_TO_RAZE")}});sa("JUGULAR_RIP",70,"cd_JUGULAR_RIP",{startOnHotbar:!1,applicationDelay:.8,potency:[["NEVER",180],["MELEE_MASTERY_II_TANK",220]],cooldown:1,validateAttempt:e=>e.hasResourceAvailable("READY_TO_RIP"),highlightIf:e=>e.hasResourceAvailable("READY_TO_RIP"),onConfirm:e=>{e.tryConsumeResource("READY_TO_RIP")}});sa("ABDOMEN_TEAR",70,"cd_ABDOMEN_TEAR",{startOnHotbar:!1,applicationDelay:.76,potency:[["NEVER",220],["MELEE_MASTERY_II_TANK",260]],cooldown:1,validateAttempt:e=>e.hasResourceAvailable("READY_TO_TEAR"),highlightIf:e=>e.hasResourceAvailable("READY_TO_TEAR"),onConfirm:e=>{e.tryConsumeResource("READY_TO_TEAR")}});sa("EYE_GOUGE",70,"cd_EYE_GOUGE",{startOnHotbar:!1,applicationDelay:.98,potency:[["NEVER",260],["MELEE_MASTERY_II_TANK",300]],cooldown:1,validateAttempt:e=>e.hasResourceAvailable("READY_TO_GOUGE"),highlightIf:e=>e.hasResourceAvailable("READY_TO_GOUGE"),onConfirm:e=>{e.tryConsumeResource("READY_TO_GOUGE")}});sa("DANGER_ZONE",18,"cd_DANGER_ZONE",{autoUpgrade:{trait:"DANGER_ZONE_MASTERY",otherSkill:"BLASTING_ZONE"},applicationDelay:.62,potency:250,cooldown:30});sa("BLASTING_ZONE",80,"cd_BLASTING_ZONE",{startOnHotbar:!1,applicationDelay:.62,potency:800,cooldown:30});sa("BOW_SHOCK",62,"cd_BOW_SHOCK",{applicationDelay:.62,potency:150,falloff:0,cooldown:60,onConfirm:(e,t)=>{const n=[];e.hasResourceAvailable("NO_MERCY")&&n.push(J.NoMercy),e.addDoTPotencies({node:t,effectName:"BOW_SHOCK_DOT",skillName:"BOW_SHOCK",tickPotency:60,speedStat:"sks",modifiers:n})},onApplication:(e,t)=>e.applyDoT("BOW_SHOCK_DOT",t)});sa("TRAJECTORY",56,"cd_TRAJECTORY",{animationLock:Wt,cooldown:30,maxCharges:2,applicationDelay:.66,drawsAggro:!0});sa("HEART_OF_STONE",68,"cd_HEART_OF_STONE",{autoUpgrade:{trait:"HEART_OF_STONE_MASTERY",otherSkill:"HEART_OF_CORUNDUM"},applicationDelay:.62,cooldown:25,onApplication:e=>{e.refreshBuff("HEART_OF_STONE",0)}});sa("HEART_OF_CORUNDUM",82,"cd_HEART_OF_CORUNDUM",{startOnHotbar:!1,applicationDelay:.62,cooldown:25,onApplication:e=>{e.refreshBuff("CATHARSIS_OF_CORUNDUM",0),e.refreshBuff("HEART_OF_CORUNDUM",0),e.refreshBuff("CLARITY_OF_CORUNDUM",0)}});sa("SUPERBOLIDE",50,"cd_SUPERBOLIDE",{applicationDelay:0,cooldown:360,onConfirm:e=>{e.refreshBuff("SUPERBOLIDE",0)}});sa("CAMOUFLAGE",6,"cd_CAMOUFLAGE",{applicationDelay:.62,cooldown:90,onConfirm:e=>{e.refreshBuff("CAMOUFLAGE",0)}});sa("NEBULA",38,"cd_NEBULA",{autoUpgrade:{trait:"NEBULA_MASTERY",otherSkill:"GREAT_NEBULA"},applicationDelay:.56,cooldown:120,onConfirm:e=>{e.refreshBuff("NEBULA",0)}});sa("GREAT_NEBULA",38,"cd_GREAT_NEBULA",{startOnHotbar:!1,applicationDelay:.56,cooldown:120,onConfirm:e=>{e.refreshBuff("GREAT_NEBULA",0)}});sa("HEART_OF_LIGHT",64,"cd_HEART_OF_LIGHT",{applicationDelay:.62,cooldown:60,onConfirm:e=>{e.refreshBuff("HEART_OF_LIGHT",0)}});sa("AURORA",45,"cd_AURORA",{applicationDelay:.62,cooldown:60,onConfirm:e=>{e.refreshBuff("AURORA",0)},maxCharges:2});sa("ROYAL_GUARD",10,"cd_ROYAL_GUARD",{applicationDelay:0,cooldown:2,validateAttempt:e=>!e.hasResourceAvailable("ROYAL_GUARD"),onConfirm:e=>{e.resources.get("ROYAL_GUARD").gain(1)},replaceIf:[OG],secondaryCooldown:{cdName:"cd_RELEASE_ROYAL_GUARD",cooldown:1,maxCharges:1}});sa("RELEASE_ROYAL_GUARD",10,"cd_RELEASE_ROYAL_GUARD",{startOnHotbar:!1,replaceIf:[bG],applicationDelay:0,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("ROYAL_GUARD"),onConfirm:e=>{e.tryConsumeResource("ROYAL_GUARD")},secondaryCooldown:{cdName:"cd_ROYAL_GUARD",cooldown:2,maxCharges:1}});Object.keys(jR).forEach(e=>zt(e,`MCH/${Pe[e].name}.png`));class DG extends Xt{jobSpecificOtherTargetedBuffViewProps(){return[this.makeCommonTimer("WILDFIRE",!1),...this.makeTargetedTimers("BIOBLASTER")]}jobSpecificSelfTargetedBuffViewProps(){return[...Object.keys(jR).filter(t=>!(t==="WILDFIRE"||t==="BIOBLASTER")).map(t=>this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){const n=this.state.resources,o=n.get("HEAT_GAUGE").availableAmount(),s=n.get("BATTERY_GAUGE").availableAmount(),c=n.get("QUEEN_PUNCHES"),d=n.get("QUEEN_FINISHERS"),f=c.availableAmount()+d.availableAmount(),h=c.maxValue+d.maxValue;return[{kind:"bar",name:N({en:"Heat",zh:""}),color:t.mch.heat,progress:o/100,valueString:o.toFixed(0)},{kind:"bar",name:N({en:"Battery",zh:""}),color:t.mch.battery,progress:s/100,valueString:s.toFixed(0)},{kind:"bar",name:N({en:"Queen Hits",zh:""}),color:t.mch.battery,progress:f/h,valueString:f.toFixed(0)}]}}const ja=(e,t,n)=>{Ve("MCH",e,t,n??{})};ja("HEAT_GAUGE",100,{warnOnOvercap:!0});ja("BATTERY_GAUGE",100,{warnOnOvercap:!0});ja("REASSEMBLED",1,{timeout:5,warnOnTimeout:!0});ja("OVERHEATED",5,{timeout:10,warnOnTimeout:!0});ja("WILDFIRE",1,{timeout:10});ja("WILDFIRE_SELF",1,{timeout:10});ja("FLAMETHROWER",1,{timeout:10});ja("BIOBLASTER",1,{timeout:15});ja("TACTICIAN",1,{timeout:15});ja("HYPERCHARGED",1,{timeout:30,warnOnTimeout:!0});ja("EXCAVATOR_READY",1,{timeout:30,warnOnTimeout:!0});ja("FULL_METAL_MACHINIST",1,{timeout:30,warnOnTimeout:!0});ja("HEAT_COMBO",2,{timeout:30});ja("QUEEN",7);ja("QUEEN_PUNCHES",5);ja("QUEEN_FINISHERS",2);ja("WILDFIRE_HITS",6);ja("BATTERY_BONUS",50);const yG=["HEATED_CLEAN_SHOT","HEATED_SLUG_SHOT","HEATED_SPLIT_SHOT","SPREAD_SHOT","SCATTERGUN"],RN=["CHAIN_SAW","EXCAVATOR","FULL_METAL_FIELD","SCATTERGUN","BIOBLASTER","SPREAD_SHOT"];class vG extends qt{constructor(t){super(t),this.cooldowns.set(new Ue("cd_AIR_ANCHOR",this.config.adjustedSksGCD(40),1,1)),this.cooldowns.set(new Ue("cd_CHAINSAW",this.config.adjustedSksGCD(60),1,1)),this.hasTraitUnlocked("QUEENS_GAMBIT")||(this.resources.set(new _a("QUEEN_FINISHERS",1,0)),this.resources.set(new _a("QUEEN",6,0))),this.hasTraitUnlocked("ENHANCED_REASSEMBLE")||this.cooldowns.set(new Ue("cd_REASSEMBLE",55,1,1)),this.hasTraitUnlocked("ENHANCED_MULTI_WEAPON")||this.cooldowns.set(new Ue("cd_DRILL",this.config.adjustedSksGCD(20),1,1)),this.hasTraitUnlocked("CHARGED_ACTION_MASTERY")||(this.cooldowns.set(new Ue("cd_DOUBLE_CHECK",30,2,2)),this.cooldowns.set(new Ue("cd_CHECKMATE",30,2,2))),this.hasTraitUnlocked("ENHANCED_TACTICIAN")||this.cooldowns.set(new Ue("cd_TACTICIAN",120,1,1)),this.registerRecurringEvents([{groupedEffects:[{effectName:"BIOBLASTER",appliedBy:["BIOBLASTER"]}]},{groupedEffects:[{effectName:"FLAMETHROWER",appliedBy:["FLAMETHROWER"],isGroundTargeted:!0,exclude:!0}]}],["ROOK_AUTOTURRET","AUTOMATON_QUEEN","WILDFIRE"])}get statusPropsGenerator(){return new DG(this)}jobSpecificRegisterRecurringEvents(){const t=()=>{this.handleDoTTick("FLAMETHROWER"),this.getDisplayTime()>=0&&I.reportDotTick(this.time,"FLAMETHROWER"),this.addEvent(new Oe("Flamethrower tick",1,()=>{t()}))};let n=this.config.timeTillFirstManaTick+this.dotTickOffset;for(;n>1;)n--;this.addEvent(new Oe("initial Flamethrower tick",n,t))}cancelChanneledSkills(){this.tryConsumeResource("FLAMETHROWER")}processComboStatus(t){if(!yG.includes(t))return;const n=this.resources.get("HEAT_COMBO").availableAmount();let o=0;n===0&&t==="HEATED_SPLIT_SHOT"?o=1:n===1&&t==="HEATED_SLUG_SHOT"&&(o=2),this.setComboState("HEAT_COMBO",o)}gainResource(t,n){this.resources.get(t).gain(n)}handleQueenPunch=()=>{if(!this.hasResourceAvailable("QUEEN_PUNCHES")){this.handleQueenFinisher();return}const t=this.resources.get("QUEEN").node;t!==void 0&&this.resolveQueenPotency(t),this.resources.get("QUEEN_PUNCHES").consume(1),this.hasResourceAvailable("QUEEN_PUNCHES")?this.addEvent(new Oe("queen punch",1.56,()=>this.handleQueenPunch())):this.addEvent(new Oe("queen finisher",1.56,()=>this.handleQueenFinisher()))};resolveQueenPotency(t){const n=this.resources.get("QUEEN_PUNCHES").availableAmount()+this.resources.get("QUEEN_FINISHERS").availableAmount(),o=this.resources.get("QUEEN").availableAmount()-n;if(o<0)return;const s=t.getDotPotencies("QUEEN")[o];this.hasResourceAvailable("TINCTURE")&&s.addModifiers(J.Tincture),s.snapshotTime=this.getDisplayTime(),I.resolvePotency(s)}calculateQueenPotency(t,n){const o=this.resources.get("BATTERY_BONUS").availableAmount(),s=(n-t)*(o/50);return Math.floor((t+s)*.89)}handleQueenFinisher=()=>{if(!this.hasResourceAvailable("QUEEN_FINISHERS"))return;const t=this.resources.get("QUEEN").node;t!==void 0&&this.resolveQueenPotency(t),this.resources.get("QUEEN_FINISHERS").consume(1),this.hasResourceAvailable("QUEEN_FINISHERS")?this.addEvent(new Oe("queen finisher",2,()=>this.handleQueenFinisher())):(this.tryConsumeResource("BATTERY_BONUS",!0),this.addEvent(new Oe("expire queen",5,()=>{this.tryConsumeResource("QUEEN",!0)})))};expireWildfire(){if(!this.hasResourceAvailable("WILDFIRE_HITS"))return;this.tryConsumeResource("WILDFIRE_SELF"),this.tryConsumeResource("WILDFIRE");const t=this.hasTraitUnlocked("ENHANCED_WILD_FIRE")?240:100,n=Math.min(this.resources.get("WILDFIRE_HITS").availableAmount(),6)*t,o=this.resources.get("WILDFIRE").node;if(o===void 0)return;const s=o.getDotPotencies("WILDFIRE")[0];s.base=n,I.resolvePotency(s),this.tryConsumeResource("WILDFIRE_HITS",!0)}}const Tn=(e,t,n)=>{const o=Le(n.onConfirm,s=>s.processComboStatus(e),s=>{e!=="FULL_METAL_FIELD"&&s.tryConsumeResource("REASSEMBLED")},s=>{s.hasResourceAvailable("WILDFIRE_SELF")&&s.resources.get("WILDFIRE_HITS").gain(1)},s=>{RN.includes(e)||s.tryConsumeResource("OVERHEATED")});return ia("MCH",e,t,{...n,onConfirm:o,jobPotencyModifiers:s=>{const c=[];return(s.hasResourceAvailable("REASSEMBLED")||e==="FULL_METAL_FIELD")&&c.push(J.AutoCDH),s.hasResourceAvailable("OVERHEATED")&&!RN.includes(e)&&c.push(J.Overheated),c}})},no=(e,t,n,o)=>et("MCH",e,t,n,o),MT=(e,t,n,o)=>{const s=Le(o.onConfirm);return Ye("MCH",e,t,n,{...o,onConfirm:s})};Tn("HEATED_SPLIT_SHOT",54,{potency:[["NEVER",180],["MARKSMANS_MASTERY",200],["MARKSMANS_MASTERY_II",220]],applicationDelay:.8,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.gainResource("HEAT_GAUGE",5)});Tn("HEATED_SLUG_SHOT",60,{potency:[["NEVER",100],["MARKSMANS_MASTERY",120],["MARKSMANS_MASTERY_II",140]],combo:{potency:[["NEVER",280],["MARKSMANS_MASTERY",300],["MARKSMANS_MASTERY_II",320]],resource:"HEAT_COMBO",resourceValue:1},applicationDelay:.8,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.gainResource("HEAT_GAUGE",5),highlightIf:e=>e.hasResourceExactly("HEAT_COMBO",1)});Tn("HEATED_CLEAN_SHOT",64,{potency:[["NEVER",100],["MARKSMANS_MASTERY",120],["MARKSMANS_MASTERY_II",160]],combo:{potency:[["NEVER",360],["MARKSMANS_MASTERY",380],["MARKSMANS_MASTERY_II",420]],resource:"HEAT_COMBO",resourceValue:2},applicationDelay:.8,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>{e.gainResource("HEAT_GAUGE",5),e.gainResource("BATTERY_GAUGE",10)},highlightIf:e=>e.hasResourceExactly("HEAT_COMBO",2)});MT("REASSEMBLE",10,"cd_REASSEMBLE",{rscType:"REASSEMBLED",applicationDelay:0,cooldown:55,maxCharges:2});const Hf=[["NEVER",620],["MARKSMANS_MASTERY_II",660]];Tn("DRILL",58,{potency:Hf,applicationDelay:1.15,recastTime:e=>e.config.adjustedSksGCD(),secondaryCooldown:{cdName:"cd_DRILL",cooldown:20,maxCharges:2}});Tn("HOT_SHOT",4,{autoUpgrade:{trait:"HOT_SHOT_MASTERY",otherSkill:"AIR_ANCHOR"},potency:240,applicationDelay:1.15,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.gainResource("BATTERY_GAUGE",20),secondaryCooldown:{cdName:"cd_AIR_ANCHOR",cooldown:40,maxCharges:1}});Tn("AIR_ANCHOR",76,{startOnHotbar:!1,potency:Hf,applicationDelay:1.15,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.gainResource("BATTERY_GAUGE",20),secondaryCooldown:{cdName:"cd_AIR_ANCHOR",cooldown:40,maxCharges:1}});Tn("CHAIN_SAW",90,{replaceIf:[{newSkill:"EXCAVATOR",condition:e=>e.hasResourceAvailable("EXCAVATOR_READY")}],potency:Hf,falloff:.25,applicationDelay:1.03,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>{e.gainResource("BATTERY_GAUGE",20),e.hasTraitUnlocked("ENHANCED_MULTI_WEAPON_II")&&e.gainStatus("EXCAVATOR_READY")},secondaryCooldown:{cdName:"cd_CHAINSAW",cooldown:60,maxCharges:1}});Tn("EXCAVATOR",90,{startOnHotbar:!1,potency:Hf,falloff:.25,applicationDelay:1.07,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>{e.gainResource("BATTERY_GAUGE",20),e.tryConsumeResource("EXCAVATOR_READY")},validateAttempt:e=>e.hasResourceAvailable("EXCAVATOR_READY"),highlightIf:e=>e.hasResourceAvailable("EXCAVATOR_READY")});no("BARREL_STABILIZER",66,"cd_BARREL_STABILIZER",{replaceIf:[{newSkill:"FULL_METAL_FIELD",condition:e=>e.hasResourceAvailable("FULL_METAL_MACHINIST")}],applicationDelay:0,cooldown:120,maxCharges:1,requiresCombat:!0,onConfirm:e=>{e.gainStatus("HYPERCHARGED"),e.hasTraitUnlocked("ENHANCED_BARREL_STABILIZER")&&e.gainStatus("FULL_METAL_MACHINIST")}});Tn("FULL_METAL_FIELD",100,{startOnHotbar:!1,potency:900,falloff:.25,applicationDelay:1.02,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.tryConsumeResource("FULL_METAL_MACHINIST"),validateAttempt:e=>e.hasResourceAvailable("FULL_METAL_MACHINIST"),highlightIf:e=>e.hasResourceAvailable("FULL_METAL_MACHINIST")});MT("HYPERCHARGE",30,"cd_HYPERCHARGE",{rscType:"OVERHEATED",applicationDelay:0,cooldown:10,maxCharges:1,onConfirm:e=>{e.hasResourceAvailable("HYPERCHARGED")?e.tryConsumeResource("HYPERCHARGED"):e.resources.get("HEAT_GAUGE").consume(50)},validateAttempt:e=>e.hasResourceAvailable("HEAT_GAUGE",50)||e.hasResourceAvailable("HYPERCHARGED"),highlightIf:e=>e.hasResourceAvailable("HEAT_GAUGE",50)||e.hasResourceAvailable("HYPERCHARGED")});no("WILDFIRE",45,"cd_WILDFIRE",{replaceIf:[{newSkill:"DETONATOR",condition:e=>e.hasResourceAvailable("WILDFIRE_SELF")}],applicationDelay:.67,cooldown:120,maxCharges:1,onConfirm:(e,t)=>{e.gainStatus("WILDFIRE_SELF");const n=e.resources.get("WILDFIRE"),o=new ta({config:e.config,sourceTime:e.getDisplayTime(),sourceSkill:"WILDFIRE",aspect:Ie.Physical,basePotency:0,snapshotTime:e.getDisplayTime(),description:"wildfire",targetList:t.targetList});o.addModifiers(J.NoCDH),e.hasResourceAvailable("TINCTURE")&&o.addModifiers(J.Tincture),t.addDoTPotency(o,"WILDFIRE"),n.gain(1),n.node=t,e.resources.addResourceEvent({rscType:"WILDFIRE",name:"wildfire expiration",delay:Ut("MCH","WILDFIRE").maxTimeout,fnOnRsc:s=>e.expireWildfire()})}});no("DETONATOR",45,"cd_DETONATOR",{startOnHotbar:!1,applicationDelay:.62,cooldown:1,maxCharges:1,onConfirm:e=>e.expireWildfire(),validateAttempt:e=>e.hasResourceAvailable("WILDFIRE_SELF")});Tn("BLAZING_SHOT",68,{potency:[["NEVER",220],["MARKSMANS_MASTERY_II",240]],applicationDelay:.85,recastTime:1.5,onConfirm:e=>{e.cooldowns.get("cd_DOUBLE_CHECK").restore(15),e.cooldowns.get("cd_CHECKMATE").restore(15)},validateAttempt:e=>e.hasResourceAvailable("OVERHEATED"),highlightIf:e=>e.hasResourceAvailable("OVERHEATED")});no("GAUSS_ROUND",15,"cd_DOUBLE_CHECK",{autoUpgrade:{trait:"DOUBLE_BARREL_MASTERY",otherSkill:"DOUBLE_CHECK"},potency:130,applicationDelay:.71,cooldown:30,maxCharges:3});no("DOUBLE_CHECK",92,"cd_DOUBLE_CHECK",{startOnHotbar:!1,potency:180,falloff:.3,applicationDelay:.71,cooldown:30,maxCharges:3});no("RICOCHET",50,"cd_CHECKMATE",{autoUpgrade:{trait:"DOUBLE_BARREL_MASTERY",otherSkill:"CHECKMATE"},potency:130,falloff:.3,applicationDelay:.71,cooldown:30,maxCharges:3});no("CHECKMATE",92,"cd_CHECKMATE",{startOnHotbar:!1,potency:180,falloff:.3,applicationDelay:.71,cooldown:30,maxCharges:3});const MG=[{skillName:"ROOK_AUTOTURRET",skillLevel:40,autoUpgrade:{otherSkill:"AUTOMATON_QUEEN",trait:"PROMOTION"}},{skillName:"AUTOMATON_QUEEN",skillLevel:80,startOnHotbar:!1}];MG.forEach(e=>{no(e.skillName,e.skillLevel,"cd_QUEEN",{startOnHotbar:e.startOnHotbar,autoUpgrade:e.autoUpgrade,applicationDelay:0,cooldown:6,maxCharges:1,validateAttempt:t=>t.hasResourceAvailable("BATTERY_GAUGE",50)&&!t.hasResourceAvailable("QUEEN"),onConfirm:(t,n)=>{const o=t.resources.get("BATTERY_GAUGE").availableAmount();t.resources.get("BATTERY_BONUS").gain(o-50),t.tryConsumeResource("BATTERY_GAUGE",!0);const s=t.resources.get("QUEEN_PUNCHES");s.gain(5);const c=t.hasTraitUnlocked("QUEENS_GAMBIT")?2:1;t.resources.get("QUEEN_FINISHERS").gain(c),t.resources.get("QUEEN").gain(s.availableAmount()+c);let d="VOLLEY_FIRE",f=0;t.hasTraitUnlocked("PROMOTION")?(d="ARM_PUNCH",f=t.calculateQueenPotency(120,240)):f=t.calculateQueenPotency(35,75);for(let h=0;h<s.availableAmount();h++)n.addDoTPotency(new ta({config:t.config,sourceTime:t.getDisplayTime(),sourceSkill:d,aspect:Ie.Physical,description:"",basePotency:f,snapshotTime:void 0,targetList:n.targetList}),"QUEEN");d=t.hasTraitUnlocked("PROMOTION")?"PILE_BUNKER":"ROOK_OVERLOAD",d==="PILE_BUNKER"?f=t.calculateQueenPotency(340,680):f=t.calculateQueenPotency(160,320),n.addDoTPotency(new ta({config:t.config,sourceTime:t.getDisplayTime(),sourceSkill:d,aspect:Ie.Physical,description:"",basePotency:f,snapshotTime:void 0,targetList:n.targetList}),"QUEEN"),t.hasTraitUnlocked("QUEENS_GAMBIT")&&n.addDoTPotency(new ta({config:t.config,sourceTime:t.getDisplayTime(),sourceSkill:"CROWNED_COLLIDER",aspect:Ie.Physical,description:"",basePotency:t.calculateQueenPotency(390,780),snapshotTime:void 0,targetList:n.targetList}),"QUEEN"),t.resources.get("QUEEN").node=n,t.addEvent(new Oe("initial queen punch",5.5,()=>t.handleQueenPunch()))}})});const LG=[{skillName:"ROOK_OVERDRIVE",skillLevel:40,autoUpgrade:{otherSkill:"QUEEN_OVERDRIVE",trait:"PROMOTION"}},{skillName:"QUEEN_OVERDRIVE",skillLevel:80,startOnHotbar:!1}];LG.forEach(e=>{no(e.skillName,e.skillLevel,"cd_OVERDRIVE",{startOnHotbar:e.startOnHotbar,autoUpgrade:e.autoUpgrade,applicationDelay:0,cooldown:15,maxCharges:1,validateAttempt:t=>t.hasResourceAvailable("QUEEN_PUNCHES"),onConfirm:t=>{t.tryConsumeResource("QUEEN_PUNCHES",!0)}})});Tn("SPREAD_SHOT",18,{autoUpgrade:{trait:"SPREAD_SHOT_MASTERY",otherSkill:"SCATTERGUN"},potency:110,falloff:0,applicationDelay:.8,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.gainResource("HEAT_GAUGE",5)});Tn("SCATTERGUN",82,{startOnHotbar:!1,potency:130,falloff:0,applicationDelay:1.15,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.gainResource("HEAT_GAUGE",10)});Tn("BIOBLASTER",58,{potency:50,falloff:0,applicationDelay:.97,recastTime:e=>e.config.adjustedSksGCD(),secondaryCooldown:{cdName:"cd_DRILL",cooldown:20,maxCharges:2},onConfirm:(e,t)=>e.addDoTPotencies({node:t,effectName:"BIOBLASTER",skillName:"BIOBLASTER",tickPotency:50,speedStat:"sks"}),onApplication:(e,t)=>e.applyDoT("BIOBLASTER",t)});Tn("AUTO_CROSSBOW",52,{potency:[["NEVER",140],["MARKSMANS_MASTERY_II",180]],falloff:0,applicationDelay:.89,recastTime:1.5,validateAttempt:e=>e.hasResourceAvailable("OVERHEATED"),highlightIf:e=>e.hasResourceAvailable("OVERHEATED")});Tn("FLAMETHROWER",70,{applicationDelay:.89,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"FLAMETHROWER",skillName:"FLAMETHROWER",tickPotency:120,tickFrequency:1,speedStat:"sks"})},onApplication:(e,t)=>{e.applyDoT("FLAMETHROWER",t)},secondaryCooldown:{cdName:"cd_FLAMETHROWER",cooldown:60,maxCharges:1}});MT("TACTICIAN",56,"cd_TACTICIAN",{rscType:"TACTICIAN",maxCharges:1,cooldown:90,applicationDelay:.62});no("DISMANTLE",62,"cd_DISMANTLE",{maxCharges:1,cooldown:120,applicationDelay:.62});Object.keys(KR).forEach(e=>zt(e,`PCT/${Pe[e].name}.png`));class xG extends Xt{jobSpecificSelfTargetedBuffViewProps(){return[...Object.keys(KR).map(t=>t==="MONOCHROME_TONES"||t==="SUBTRACTIVE_PALETTE"?this.makeCommonTimerless(t):t==="INSPIRATION"?this.makeToggleableTimerless(t):this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){const n=this.state.resources,o=n.get("PORTRAIT").availableAmount(),s=n.get("DEPICTIONS").availableAmount(),c=n.get("CREATURE_CANVAS").availableAmount(),d=n.get("WEAPON_CANVAS").availableAmount(),f=n.get("LANDSCAPE_CANVAS").availableAmount(),h=n.get("PALETTE_GAUGE").availableAmount(),m=n.get("PAINT").availableAmount(),R=n.get("MONOCHROME_TONES").available(1),T=[{kind:"text",name:N({en:"portrait",zh:""}),text:o===0?"/":N(o===1?{en:"moogle",zh:""}:{en:"madeen",zh:""})},{kind:"text",name:N({en:"depictions",zh:""}),text:s===0?"/":N(s===1?{en:"pom",zh:""}:s===2?{en:"wing",zh:""}:s===3?{en:"fang",zh:""}:{en:"maw",zh:""})},{kind:"counter",name:N({en:"creature",zh:""}),color:t.pct.creatureCanvas,currentStacks:c,maxStacks:1},{kind:"counter",name:N({en:"weapon",zh:""}),color:t.pct.weaponCanvas,currentStacks:d,maxStacks:1},{kind:"counter",name:N({en:"landscape",zh:""}),color:t.pct.landscapeCanvas,currentStacks:f,maxStacks:1},{kind:"bar",name:N({en:"palette gauge",zh:""}),color:t.pct.paletteGauge,progress:h/100,valueString:h.toFixed(0)}];return this.state.hasTraitUnlocked("ENHANCED_ARTISTRY")&&T.push({kind:"paint",name:N({en:"paint gauge",zh:""}),holyColor:t.pct.holyPaint,cometColor:t.pct.cometPaint,currentStacks:m,maxStacks:5,hasComet:this.state.hasTraitUnlocked("ENHANCED_PALETTE")&&R}),T}}const Na=(e,t,n)=>{Ve("PCT",e,t,n??{})};Na("PORTRAIT",2);Na("DEPICTIONS",3);Na("CREATURE_CANVAS",1,{default:1});Na("WEAPON_CANVAS",1,{default:1});Na("LANDSCAPE_CANVAS",1,{default:1});Na("PALETTE_GAUGE",100,{warnOnOvercap:!0});Na("PAINT",5);Na("AETHERHUES",2,{timeout:30.8});Na("MONOCHROME_TONES",1);Na("SUBTRACTIVE_PALETTE",3);Na("HAMMER_TIME",3,{timeout:30});Na("INSPIRATION",1,{timeout:30});Na("SUBTRACTIVE_SPECTRUM",1,{timeout:30,warnOnTimeout:!0});Na("HYPERPHANTASIA",5,{timeout:30,warnOnTimeout:!0});Na("RAINBOW_BRIGHT",1,{timeout:30,warnOnTimeout:!0});Na("STARSTRUCK",1,{timeout:20,warnOnTimeout:!0});Na("STARRY_MUSE",1,{timeout:20.5});Na("TEMPERA_COAT",1,{timeout:10});Na("TEMPERA_GRASSA",1,{timeout:10});Na("SMUDGE",1,{timeout:5});const HG=["FIRE_IN_RED","FIRE_II_IN_RED","AERO_IN_GREEN","AERO_II_IN_GREEN","WATER_IN_BLUE","WATER_II_IN_BLUE","HOLY_IN_WHITE","BLIZZARD_IN_CYAN","BLIZZARD_II_IN_CYAN","STONE_IN_YELLOW","STONE_II_IN_YELLOW","THUNDER_IN_MAGENTA","THUNDER_II_IN_MAGENTA","COMET_IN_BLACK","STAR_PRISM"],TN=["POM_MOTIF","WING_MOTIF","CLAW_MOTIF","MAW_MOTIF"],kG=["HAMMER_BRUSH","HAMMER_STAMP","POLISHING_HAMMER"];class UG extends qt{constructor(t){super(t);const n=this.hasTraitUnlocked("ENHANCED_SWIFTCAST")&&40||60;[new Ue("cd_SWIFTCAST",n,1,1)].forEach(c=>this.cooldowns.set(c));const o=this.hasTraitUnlocked("ENHANCED_PICTOMANCY_IV")?3:2;this.cooldowns.set(new Ue("cd_LIVING_MUSE",40,o,o));const s=this.hasTraitUnlocked("ENHANCED_PICTOMANCY_II")?2:1;this.cooldowns.set(new Ue("cd_STEEL_MUSE",60,s,s)),this.registerRecurringEvents()}get statusPropsGenerator(){return new xG(this)}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("STARRY_MUSE")&&t.addBuff(k.StarryMuse)}jobSpecificAddSpeedBuffCovers(t,n){this.hasResourceAvailable("INSPIRATION")&&HG.includes(n.name)&&t.addBuff(k.Hyperphantasia)}captureSpellCastTime(t,n){return TN.includes(t)?n:t==="RAINBOW_DRIP"?this.hasResourceAvailable("RAINBOW_BRIGHT")?0:this.config.adjustedCastTime(n):this.config.adjustedCastTime(n,this.hasResourceAvailable("INSPIRATION")?25:void 0)}captureSpellRecastTime(t,n){if(TN.includes(t))return n;if(t==="RAINBOW_DRIP"){const o=this.config.adjustedGCD(n);return this.hasResourceAvailable("RAINBOW_BRIGHT")?o-3.5:o}return kG.includes(t)?this.config.adjustedGCD(n):this.config.adjustedGCD(n,this.hasResourceAvailable("INSPIRATION")?25:void 0)}getHammerStacks(){return this.resources.get("HAMMER_TIME").availableAmount()}doFiller(){this.cycleAetherhues(),this.tryConsumeHyperphantasia(),this.tryConsumeResource("SUBTRACTIVE_PALETTE")}cycleAetherhues(){const t=this.resources.get("AETHERHUES").availableAmount();this.tryConsumeResource("AETHERHUES",!0),t===2||(t===1?this.gainStatus("AETHERHUES",2):this.gainStatus("AETHERHUES",1))}tryConsumeHyperphantasia(){this.hasResourceAvailable("INSPIRATION")&&this.tryConsumeResource("HYPERPHANTASIA")&&!this.hasResourceAvailable("HYPERPHANTASIA")&&(this.tryConsumeResource("INSPIRATION"),this.hasTraitUnlocked("ENHANCED_PICTOMANCY_III")&&this.gainStatus("RAINBOW_BRIGHT"))}}const ra=(e,t,n)=>{const o=n.baseRecastTime??2.5,s=Le((c,d)=>{e==="RAINBOW_DRIP"&&c.hasResourceAvailable("RAINBOW_BRIGHT")||n.baseCastTime===0||c.tryConsumeResource("SWIFTCAST")},n.onConfirm);return Xn("PCT",e,t,{...n,castTime:c=>c.captureSpellCastTime(e,n.baseCastTime),recastTime:c=>c.captureSpellRecastTime(e,o),manaCost:n.baseManaCost??0,potency:n.basePotency,jobPotencyModifiers:c=>{const d=[];return c.hasResourceAvailable("STARRY_MUSE")&&d.push(J.Starry),n.jobPotencyModifiers&&d.push(...n.jobPotencyModifiers(c)),d},isInstantFn:c=>e==="RAINBOW_DRIP"&&c.hasResourceAvailable("RAINBOW_BRIGHT")||n.baseCastTime===0||c.hasResourceAvailable("SWIFTCAST"),onConfirm:s})},Hi=(e,t,n,o)=>et("PCT",e,t,n,{...o,jobPotencyModifiers:s=>s.hasResourceAvailable("STARRY_MUSE")?[J.Starry]:[]}),D0={newSkill:"FIRE_IN_RED",condition:e=>!e.hasResourceAvailable("AETHERHUES")},y0={newSkill:"AERO_IN_GREEN",condition:e=>e.hasResourceExactly("AETHERHUES",1)},v0={newSkill:"WATER_IN_BLUE",condition:e=>e.hasResourceExactly("AETHERHUES",2)},M0={newSkill:"BLIZZARD_IN_CYAN",condition:e=>!e.hasResourceAvailable("AETHERHUES")},L0={newSkill:"STONE_IN_YELLOW",condition:e=>e.hasResourceExactly("AETHERHUES",1)},x0={newSkill:"THUNDER_IN_MAGENTA",condition:e=>e.hasResourceExactly("AETHERHUES",2)},H0={newSkill:"FIRE_II_IN_RED",condition:e=>!e.hasResourceAvailable("AETHERHUES")},k0={newSkill:"AERO_II_IN_GREEN",condition:e=>e.hasResourceExactly("AETHERHUES",1)},U0={newSkill:"WATER_II_IN_BLUE",condition:e=>e.hasResourceExactly("AETHERHUES",2)},w0={newSkill:"BLIZZARD_II_IN_CYAN",condition:e=>!e.hasResourceAvailable("AETHERHUES")},P0={newSkill:"STONE_II_IN_YELLOW",condition:e=>e.hasResourceExactly("AETHERHUES",1)},G0={newSkill:"THUNDER_II_IN_MAGENTA",condition:e=>e.hasResourceExactly("AETHERHUES",2)},LT=[D0,y0,v0],xT=[M0,L0,x0],HT=[H0,k0,U0],kT=[w0,P0,G0],wG={newSkill:"CREATURE_MOTIF",condition:e=>e.hasResourceAvailable("CREATURE_CANVAS")},B0={newSkill:"POM_MOTIF",condition:e=>!e.hasResourceAvailable("CREATURE_CANVAS")&&!e.hasResourceAvailable("DEPICTIONS")},F0={newSkill:"WING_MOTIF",condition:e=>!e.hasResourceAvailable("CREATURE_CANVAS")&&e.hasResourceExactly("DEPICTIONS",1)},j0={newSkill:"CLAW_MOTIF",condition:e=>!e.hasResourceAvailable("CREATURE_CANVAS")&&e.hasResourceExactly("DEPICTIONS",2)},z0={newSkill:"MAW_MOTIF",condition:e=>!e.hasResourceAvailable("CREATURE_CANVAS")&&e.hasResourceExactly("DEPICTIONS",3)},PG={newSkill:"LIVING_MUSE",condition:e=>!e.hasResourceAvailable("CREATURE_CANVAS")},Y0={newSkill:"POM_MUSE",condition:e=>e.hasResourceAvailable("CREATURE_CANVAS")&&!e.hasResourceAvailable("DEPICTIONS")},K0={newSkill:"WINGED_MUSE",condition:e=>e.hasResourceAvailable("CREATURE_CANVAS")&&e.hasResourceExactly("DEPICTIONS",1)},V0={newSkill:"CLAWED_MUSE",condition:e=>e.hasResourceAvailable("CREATURE_CANVAS")&&e.hasResourceExactly("DEPICTIONS",2)},W0={newSkill:"FANGED_MUSE",condition:e=>e.hasResourceAvailable("CREATURE_CANVAS")&&e.hasResourceExactly("DEPICTIONS",3)},GG={newSkill:"MOG_OF_THE_AGES",condition:e=>e.resources.get("PORTRAIT").availableAmount()!==2},BG={newSkill:"RETRIBUTION_OF_THE_MADEEN",condition:e=>e.resources.get("PORTRAIT").availableAmount()===2},FG={newSkill:"WEAPON_MOTIF",condition:e=>e.hasResourceAvailable("WEAPON_CANVAS")},X0={newSkill:"HAMMER_MOTIF",condition:e=>!e.hasResourceAvailable("WEAPON_CANVAS")},jG={newSkill:"STEEL_MUSE",condition:e=>!e.hasResourceAvailable("WEAPON_CANVAS")},zG={newSkill:"STRIKING_MUSE",condition:e=>e.hasResourceAvailable("WEAPON_CANVAS")},YG={newSkill:"LANDSCAPE_MOTIF",condition:e=>e.hasResourceAvailable("LANDSCAPE_CANVAS")},q0={newSkill:"STARRY_SKY_MOTIF",condition:e=>!e.hasResourceAvailable("LANDSCAPE_CANVAS")},KG={newSkill:"SCENIC_MUSE",condition:e=>!e.hasResourceAvailable("LANDSCAPE_CANVAS")},Z0={newSkill:"STARRY_MUSE",condition:e=>e.hasResourceAvailable("LANDSCAPE_CANVAS")};ra("FIRE_IN_RED",1,{replaceIf:LT,baseCastTime:1.5,baseManaCost:300,basePotency:[["NEVER",310],["PICTOMANCY_MASTERY_II",380],["PICTOMANCY_MASTERY_III",420],["PICTOMANCY_MASTERY_IV",490]],applicationDelay:.84,validateAttempt:e=>D0.condition(e)&&!e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller()});ra("AERO_IN_GREEN",5,{replaceIf:LT,startOnHotbar:!1,baseCastTime:1.5,baseManaCost:300,basePotency:[["NEVER",350],["PICTOMANCY_MASTERY_II",420],["PICTOMANCY_MASTERY_III",460],["PICTOMANCY_MASTERY_IV",530]],applicationDelay:.89,validateAttempt:e=>y0.condition(e)&&!e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller(),highlightIf:e=>!e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});ra("WATER_IN_BLUE",15,{replaceIf:LT,startOnHotbar:!1,baseCastTime:1.5,baseManaCost:300,basePotency:[["NEVER",390],["PICTOMANCY_MASTERY_II",460],["PICTOMANCY_MASTERY_III",500],["PICTOMANCY_MASTERY_IV",570]],applicationDelay:.98,validateAttempt:e=>v0.condition(e)&&!e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>{e.doFiller(),e.resources.get("PALETTE_GAUGE").gain(25),e.hasTraitUnlocked("ENHANCED_ARTISTRY")&&e.resources.get("PAINT").gain(1)},highlightIf:e=>!e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});ra("FIRE_II_IN_RED",25,{replaceIf:HT,baseCastTime:1.5,baseManaCost:300,basePotency:[["NEVER",120],["PICTOMANCY_MASTERY_II",150],["PICTOMANCY_MASTERY_IV",180]],falloff:0,applicationDelay:.84,validateAttempt:e=>H0.condition(e)&&!e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller()});ra("AERO_II_IN_GREEN",35,{replaceIf:HT,startOnHotbar:!1,baseCastTime:1.5,baseManaCost:300,basePotency:[["NEVER",140],["PICTOMANCY_MASTERY_II",170],["PICTOMANCY_MASTERY_IV",200]],falloff:0,applicationDelay:.89,validateAttempt:e=>k0.condition(e)&&!e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller(),highlightIf:e=>!e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});ra("WATER_II_IN_BLUE",45,{replaceIf:HT,startOnHotbar:!1,baseCastTime:1.5,baseManaCost:300,basePotency:[["NEVER",170],["PICTOMANCY_MASTERY_II",190],["PICTOMANCY_MASTERY_IV",220]],falloff:0,applicationDelay:.89,validateAttempt:e=>U0.condition(e)&&!e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>{e.doFiller(),e.resources.get("PALETTE_GAUGE").gain(25),e.hasTraitUnlocked("ENHANCED_ARTISTRY")&&e.resources.get("PAINT").gain(1)},highlightIf:e=>!e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});ra("BLIZZARD_IN_CYAN",60,{replaceIf:xT,baseCastTime:2.3,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",560],["PICTOMANCY_MASTERY_II",680],["PICTOMANCY_MASTERY_III",750],["PICTOMANCY_MASTERY_IV",860]],applicationDelay:.75,validateAttempt:e=>M0.condition(e)&&e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller(),highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});ra("STONE_IN_YELLOW",60,{replaceIf:xT,startOnHotbar:!1,baseCastTime:2.3,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",600],["PICTOMANCY_MASTERY_II",720],["PICTOMANCY_MASTERY_III",790],["PICTOMANCY_MASTERY_IV",900]],applicationDelay:.8,validateAttempt:e=>L0.condition(e)&&e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller(),highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});ra("THUNDER_IN_MAGENTA",60,{replaceIf:xT,startOnHotbar:!1,baseCastTime:2.3,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",640],["PICTOMANCY_MASTERY_II",760],["PICTOMANCY_MASTERY_III",830],["PICTOMANCY_MASTERY_IV",940]],applicationDelay:.8,validateAttempt:e=>x0.condition(e)&&e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>{e.doFiller(),e.hasTraitUnlocked("ENHANCED_ARTISTRY")&&e.resources.get("PAINT").gain(1)},highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});ra("BLIZZARD_II_IN_CYAN",60,{replaceIf:kT,baseCastTime:2.3,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",270],["PICTOMANCY_MASTERY_II",330],["PICTOMANCY_MASTERY_IV",360]],falloff:0,applicationDelay:.75,validateAttempt:e=>w0.condition(e)&&e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller(),highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});ra("STONE_II_IN_YELLOW",60,{replaceIf:kT,startOnHotbar:!1,baseCastTime:2.3,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",290],["PICTOMANCY_MASTERY_II",350],["PICTOMANCY_MASTERY_IV",380]],falloff:0,applicationDelay:.8,validateAttempt:e=>P0.condition(e)&&e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller(),highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});ra("THUNDER_II_IN_MAGENTA",60,{replaceIf:kT,startOnHotbar:!1,baseCastTime:2.3,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",310],["PICTOMANCY_MASTERY_II",370],["PICTOMANCY_MASTERY_IV",400]],falloff:0,applicationDelay:.8,validateAttempt:e=>G0.condition(e)&&e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>{e.doFiller(),e.hasTraitUnlocked("ENHANCED_ARTISTRY")&&e.resources.get("PAINT").gain(1)},highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});ra("HOLY_IN_WHITE",80,{baseCastTime:0,baseManaCost:300,basePotency:[["NEVER",460],["PICTOMANCY_MASTERY_III",500],["PICTOMANCY_MASTERY_IV",570]],falloff:.65,applicationDelay:1.34,validateAttempt:e=>!e.hasResourceAvailable("MONOCHROME_TONES")&&e.hasResourceAvailable("PAINT"),onConfirm:e=>{e.tryConsumeResource("PAINT"),e.tryConsumeHyperphantasia()},highlightIf:e=>!e.hasResourceAvailable("MONOCHROME_TONES")&&e.hasResourceAvailable("PAINT")});ra("COMET_IN_BLACK",90,{baseCastTime:0,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",830],["PICTOMANCY_MASTERY_IV",940]],falloff:.6,applicationDelay:1.87,validateAttempt:e=>e.hasResourceAvailable("MONOCHROME_TONES")&&e.hasResourceAvailable("PAINT"),onConfirm:e=>{e.tryConsumeResource("PAINT"),e.tryConsumeResource("MONOCHROME_TONES"),e.tryConsumeHyperphantasia()},highlightIf:e=>e.hasResourceAvailable("MONOCHROME_TONES")});ra("RAINBOW_DRIP",92,{baseCastTime:4,baseRecastTime:6,baseManaCost:400,basePotency:1e3,applicationDelay:1.24,falloff:.85,onConfirm:e=>{e.resources.get("PAINT").gain(1),e.tryConsumeResource("RAINBOW_BRIGHT")},highlightIf:e=>e.hasResourceAvailable("RAINBOW_BRIGHT")});ra("STAR_PRISM",100,{baseCastTime:0,baseManaCost:0,basePotency:1100,applicationDelay:1.25,falloff:.7,validateAttempt:e=>e.hasResourceAvailable("STARSTRUCK"),onConfirm:e=>{e.tryConsumeResource("STARSTRUCK"),e.tryConsumeHyperphantasia()},highlightIf:e=>e.hasResourceAvailable("STARSTRUCK")});Hi("SUBTRACTIVE_PALETTE",60,"cd_SUBTRACTIVE",{cooldown:1,validateAttempt:e=>!e.hasResourceAvailable("SUBTRACTIVE_PALETTE")&&(e.hasResourceAvailable("SUBTRACTIVE_SPECTRUM")||e.hasResourceAvailable("PALETTE_GAUGE",50)),onConfirm:e=>{e.tryConsumeResource("SUBTRACTIVE_SPECTRUM")||e.resources.get("PALETTE_GAUGE").consume(50),e.hasResourceAvailable("MONOCHROME_TONES")&&I.reportWarning({kind:"custom",en:"comet overwrite!",zh:""}),e.hasTraitUnlocked("ENHANCED_PALETTE")&&e.gainStatus("MONOCHROME_TONES"),e.gainStatus("SUBTRACTIVE_PALETTE",3)},highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_SPECTRUM")||e.resources.get("PALETTE_GAUGE").available(50)});const VG=[wG,B0,F0,j0,z0],WG=[["CREATURE_MOTIF",30,e=>!1],["POM_MOTIF",30,B0.condition],["WING_MOTIF",30,F0.condition],["CLAW_MOTIF",96,j0.condition],["MAW_MOTIF",96,z0.condition]];WG.forEach(([e,t,n],o)=>ra(e,t,{replaceIf:VG,startOnHotbar:o===0,baseCastTime:3,baseRecastTime:4,baseManaCost:0,applicationDelay:0,validateAttempt:n,onConfirm:s=>s.resources.get("CREATURE_CANVAS").gain(1)}));const XG=[PG,Y0,K0,V0,W0],qG=[["LIVING_MUSE",30,0,0,e=>!1],["POM_MUSE",30,[["NEVER",700],["PICTOMANCY_MASTERY_III",800]],.62,Y0.condition],["WINGED_MUSE",30,[["NEVER",700],["PICTOMANCY_MASTERY_III",800]],.98,K0.condition],["CLAWED_MUSE",96,800,.98,V0.condition],["FANGED_MUSE",96,800,1.16,W0.condition]];qG.forEach(([e,t,n,o,s],c)=>Hi(e,t,"cd_LIVING_MUSE",{replaceIf:XG,startOnHotbar:c===0,potency:n,falloff:.7,applicationDelay:o,cooldown:40,validateAttempt:s,onConfirm:d=>{const f=d.resources.get("DEPICTIONS"),h=d.resources.get("PORTRAIT");d.tryConsumeResource("CREATURE_CANVAS"),f.gain(1),e==="WINGED_MUSE"&&(h.overrideCurrentValue(1),d.hasTraitUnlocked("ENHANCED_PICTOMANCY_IV")||f.overrideCurrentValue(0)),e==="FANGED_MUSE"&&(h.overrideCurrentValue(2),f.overrideCurrentValue(0))},maxCharges:3,highlightIf:d=>d.hasResourceAvailable("CREATURE_CANVAS")}));Hi("MOG_OF_THE_AGES",30,"cd_PORTRAIT",{replaceIf:[BG],potency:[["NEVER",800],["PICTOMANCY_MASTERY_III",1e3]],falloff:.7,applicationDelay:1.15,validateAttempt:e=>e.hasResourceExactly("PORTRAIT",1),onConfirm:e=>e.tryConsumeResource("PORTRAIT"),cooldown:30,highlightIf:e=>e.hasResourceAvailable("PORTRAIT")});Hi("RETRIBUTION_OF_THE_MADEEN",30,"cd_PORTRAIT",{replaceIf:[GG],startOnHotbar:!1,potency:1100,falloff:.7,applicationDelay:1.3,validateAttempt:e=>e.hasResourceExactly("PORTRAIT",2),onConfirm:e=>e.tryConsumeResource("PORTRAIT",!0),cooldown:30,highlightIf:e=>e.hasResourceAvailable("PORTRAIT")});ra("WEAPON_MOTIF",50,{replaceIf:[X0],baseCastTime:3,baseRecastTime:4,baseManaCost:0,applicationDelay:0,validateAttempt:e=>!1});ra("HAMMER_MOTIF",50,{replaceIf:[FG],startOnHotbar:!1,baseCastTime:3,baseRecastTime:4,baseManaCost:0,applicationDelay:0,validateAttempt:e=>X0.condition(e)&&!e.hasResourceAvailable("HAMMER_TIME"),onConfirm:e=>e.resources.get("WEAPON_CANVAS").gain(1)});Hi("STEEL_MUSE",50,"cd_STEEL_MUSE",{replaceIf:[zG],cooldown:60,maxCharges:2,validateAttempt:e=>!1});Hi("STRIKING_MUSE",50,"cd_STEEL_MUSE",{replaceIf:[jG],startOnHotbar:!1,requiresCombat:!0,cooldown:60,maxCharges:2,validateAttempt:e=>e.hasResourceAvailable("WEAPON_CANVAS"),onConfirm:e=>{e.tryConsumeResource("WEAPON_CANVAS"),e.gainStatus("HAMMER_TIME",3)},highlightIf:e=>e.hasResourceAvailable("WEAPON_CANVAS")});const SN=[{newSkill:"HAMMER_STAMP",condition:e=>!e.hasTraitUnlocked("ENHANCED_PICTOMANCY_II")||e.getHammerStacks()===3},{newSkill:"HAMMER_BRUSH",condition:e=>e.hasTraitUnlocked("ENHANCED_PICTOMANCY_II")&&e.getHammerStacks()===2},{newSkill:"POLISHING_HAMMER",condition:e=>e.hasTraitUnlocked("ENHANCED_PICTOMANCY_II")&&e.getHammerStacks()===1}],ZG=[["HAMMER_STAMP",50,[["NEVER",420],["PICTOMANCY_MASTERY_II",500],["PICTOMANCY_MASTERY_III",540],["PICTOMANCY_MASTERY_IV",560]],1.38],["HAMMER_BRUSH",86,[["NEVER",560],["PICTOMANCY_MASTERY_IV",580]],1.25],["POLISHING_HAMMER",86,[["NEVER",580],["PICTOMANCY_MASTERY_IV",600]],2.1]];ZG.forEach(([e,t,n,o],s)=>ra(e,t,{replaceIf:SN,baseCastTime:0,startOnHotbar:s===0,basePotency:n,falloff:.7,applicationDelay:o,validateAttempt:c=>SN[s].condition(c)&&c.hasResourceAvailable("HAMMER_TIME"),onConfirm:c=>c.tryConsumeResource("HAMMER_TIME"),highlightIf:c=>c.hasResourceAvailable("HAMMER_TIME"),jobPotencyModifiers:c=>[J.AutoCDH]}));ra("LANDSCAPE_MOTIF",70,{replaceIf:[q0],baseCastTime:3,baseRecastTime:4,baseManaCost:0,applicationDelay:0,validateAttempt:e=>!1});ra("STARRY_SKY_MOTIF",70,{replaceIf:[YG],startOnHotbar:!1,baseCastTime:3,baseRecastTime:4,baseManaCost:0,applicationDelay:0,validateAttempt:e=>q0.condition(e)&&!e.hasResourceAvailable("STARRY_MUSE"),onConfirm:e=>e.resources.get("LANDSCAPE_CANVAS").gain(1)});Hi("SCENIC_MUSE",70,"cd_SCENIC_MUSE",{replaceIf:[Z0],applicationDelay:0,cooldown:120,validateAttempt:e=>!1});Hi("STARRY_MUSE",70,"cd_SCENIC_MUSE",{replaceIf:[KG],startOnHotbar:!1,requiresCombat:!0,applicationDelay:0,cooldown:120,validateAttempt:e=>Z0.condition(e),onConfirm:e=>{e.tryConsumeResource("LANDSCAPE_CANVAS"),e.hasTraitUnlocked("ENHANCED_PICTOMANCY")&&(e.gainStatus("HYPERPHANTASIA",5),e.gainStatus("INSPIRATION")),e.hasTraitUnlocked("ENHANCED_PICTOMANCY_V")&&e.gainStatus("STARSTRUCK"),e.gainStatus("STARRY_MUSE"),e.gainStatus("SUBTRACTIVE_SPECTRUM")},highlightIf:e=>e.hasResourceAvailable("LANDSCAPE_CANVAS")});Ye("PCT","TEMPERA_COAT",10,"cd_TEMPERA_COAT",{rscType:"TEMPERA_COAT",replaceIf:[{newSkill:"TEMPERA_COAT_POP",condition:e=>e.hasResourceAvailable("TEMPERA_COAT")}],applicationDelay:0,cooldown:120});Hi("TEMPERA_GRASSA",88,"cd_GRASSA",{replaceIf:[{newSkill:"TEMPERA_GRASSA_POP",condition:e=>e.hasResourceAvailable("TEMPERA_GRASSA")}],applicationDelay:0,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("TEMPERA_COAT"),onConfirm:e=>{e.tryConsumeResource("TEMPERA_COAT"),e.gainStatus("TEMPERA_GRASSA")},highlightIf:e=>e.hasResourceAvailable("TEMPERA_COAT")});Hi("TEMPERA_COAT_POP",10,"cd_TEMPERA_POP",{replaceIf:[{newSkill:"TEMPERA_GRASSA_POP",condition:e=>e.hasResourceAvailable("TEMPERA_GRASSA")}],startOnHotbar:!1,applicationDelay:0,animationLock:en,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("TEMPERA_COAT"),onConfirm:e=>{e.tryConsumeResource("TEMPERA_COAT");const t=e.cooldowns.get("cd_TEMPERA_COAT").timeTillNextStackAvailable();console.assert(t>0,"attempted to pop Tempera Coat when no timer for Tempera Coat CD was active"),e.cooldowns.get("cd_TEMPERA_COAT").overrideTimeTillNextStack(Math.max(0,t-60))},highlightIf:e=>e.hasResourceAvailable("TEMPERA_COAT")});Hi("TEMPERA_GRASSA_POP",10,"cd_TEMPERA_POP",{replaceIf:[{newSkill:"TEMPERA_COAT_POP",condition:e=>e.hasResourceAvailable("TEMPERA_COAT")}],startOnHotbar:!1,applicationDelay:0,animationLock:en,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("TEMPERA_GRASSA"),onConfirm:e=>{e.tryConsumeResource("TEMPERA_GRASSA");const t=e.cooldowns.get("cd_TEMPERA_COAT").timeTillNextStackAvailable();console.assert(t>0,"attempted to pop Tempera Grassa when no timer for Tempera Coat CD was active"),e.cooldowns.get("cd_TEMPERA_COAT").overrideTimeTillNextStack(Math.max(0,t-30))},highlightIf:e=>e.hasResourceAvailable("TEMPERA_GRASSA")});Ye("PCT","SMUDGE",20,"cd_SMUDGE",{rscType:"SMUDGE",applicationDelay:0,cooldown:20,animationLock:Wt});Object.keys(WR).forEach(e=>zt(e,`RDM/${Pe[e].name}.png`));class QG extends Xt{jobSpecificSelfTargetedBuffViewProps(){return[...Object.keys(WR).map(t=>this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){const n=this.state.resources,o=n.get("WHITE_MANA").availableAmount(),s=n.get("BLACK_MANA").availableAmount(),c=n.get("MANA_STACKS").availableAmount();return[{kind:"bar",name:N({en:"white mana",zh:""}),color:t.rdm.whiteMana,progress:o/100,valueString:o.toFixed(0)},{kind:"bar",name:N({en:"black mana",zh:""}),color:t.rdm.blackMana,progress:s/100,valueString:s.toFixed(0)},{kind:"counter",name:N({en:"mana stacks",zh:""}),color:t.rdm.manaStack,currentStacks:c,maxStacks:3}]}}const an=(e,t,n)=>{Ve("RDM",e,t,n??{})};an("WHITE_MANA",100);an("BLACK_MANA",100);an("MANA_STACKS",3);an("ACCELERATION",1,{timeout:20});an("DUALCAST",1,{timeout:15});an("EMBOLDEN",1,{timeout:20});an("GRAND_IMPACT_READY",1,{timeout:30,warnOnTimeout:!0});an("MAGICK_BARRIER",1,{timeout:10});an("MAGICKED_SWORDPLAY",3,{timeout:30,warnOnTimeout:!0});an("MANAFICATION",1,{timeout:30});an("PREFULGENCE_READY",1,{timeout:30,warnOnTimeout:!0});an("THORNED_FLOURISH",1,{timeout:30,warnOnTimeout:!0});an("VERFIRE_READY",1,{timeout:30});an("VERSTONE_READY",1,{timeout:30});an("RDM_MELEE_COUNTER",2,{timeout:30});an("RDM_FINISHER_COUNTER",2,{timeout:30});an("RDM_AOE_COUNTER",2,{timeout:30});const Q0=["IMPACT","VERAERO","VERTHUNDER","VERAERO_III","VERTHUNDER_III"],$0=["VERHOLY","VERFLARE","SCORCH","RESOLUTION"];class $G extends qt{constructor(t){super(t);const n=this.hasTraitUnlocked("ENHANCED_SWIFTCAST")?40:60,o=this.hasTraitUnlocked("RED_MAGIC_MASTERY")?35:45;[new Ue("cd_SWIFTCAST",n,1,1),new Ue("cd_CONTRE_SIXTE",o,1,1)].forEach(c=>this.cooldowns.set(c));const s=this.hasTraitUnlocked("ENHANCED_ACCELERATION")?2:1;this.cooldowns.set(new Ue("cd_ACCELERATION",55,s,s)),this.registerRecurringEvents()}get statusPropsGenerator(){return new QG(this)}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("EMBOLDEN")&&n.aspect!==Ie.Physical&&t.addBuff(k.Embolden),n.name==="IMPACT"&&this.hasResourceAvailable("ACCELERATION")&&t.addBuff(k.Acceleration)}hasThreeManaStacks(){return this.hasResourceAvailable("MANA_STACKS",3)}getFinisherCounter(){return this.resources.get("RDM_FINISHER_COUNTER").availableAmount()}processDualcastAndInstants(t){$0.includes(t)||t==="GRAND_IMPACT"&&this.tryConsumeResource("GRAND_IMPACT_READY")||Q0.includes(t)&&this.tryConsumeResource("ACCELERATION")||this.tryConsumeResource("DUALCAST")||this.tryConsumeResource("SWIFTCAST")||this.gainStatus("DUALCAST")}gainColorMana(t){const n=this.resources.get("WHITE_MANA"),o=this.resources.get("BLACK_MANA");if(t.w){const s=o.availableAmount()-n.availableAmount()>30;n.gain(s?Math.floor(t.w/2):t.w)}if(t.b){const s=n.availableAmount()-o.availableAmount()>30;o.gain(s?Math.floor(t.b/2):t.b)}Math.abs(o.availableAmount()-n.availableAmount())>30&&I.reportWarning({kind:"custom",en:"mana difference became more than 30",zh:""})}colorManaExceeds(t){return this.hasResourceAvailable("MAGICKED_SWORDPLAY")||this.hasResourceAvailable("WHITE_MANA",t)&&this.hasResourceAvailable("BLACK_MANA",t)}consumeColorMana(t){this.hasResourceAvailable("MAGICKED_SWORDPLAY")?this.tryConsumeResource("MAGICKED_SWORDPLAY"):(this.resources.get("WHITE_MANA").consume(t),this.resources.get("BLACK_MANA").consume(t))}maybeGainVerproc(t,n=.5){this.maybeGainProc(t,n,!0)}processComboStatus(t){const n=this.resources.get("MANA_STACKS"),o=this.config.level>=80,s=this.config.level>=90,c=this.resources.get("RDM_MELEE_COUNTER").availableAmount(),d=this.resources.get("RDM_FINISHER_COUNTER").availableAmount(),f=this.resources.get("RDM_AOE_COUNTER").availableAmount(),h=c+d+f>0;let m;t==="ENCHANTED_RIPOSTE"||t==="RIPOSTE"?(h&&I.reportComboBreak(),m=[1,0,0],t==="ENCHANTED_RIPOSTE"&&n.gain(1)):t==="ENCHANTED_ZWERCHHAU"||t==="ZWERCHHAU"?(h&&c!==1&&I.reportComboBreak(),m=[c===1?2:0,0,0],t==="ENCHANTED_ZWERCHHAU"&&n.gain(1)):t==="ENCHANTED_REDOUBLEMENT"||t==="REDOUBLEMENT"?(h&&c!==2&&I.reportComboBreak(),m=[0,0,0],t==="ENCHANTED_REDOUBLEMENT"&&n.gain(1)):t==="VERHOLY"||t==="VERFLARE"?(m=[0,o?1:0,0],n.consume(3)):t==="SCORCH"?m=[0,s?2:0,0]:t==="RESOLUTION"?m=[0,0,0]:t==="ENCHANTED_MOULINET"?(c+d>0&&I.reportComboBreak(),m=[0,0,1],n.gain(1)):t==="ENCHANTED_MOULINET_II"?(m=[0,0,2],n.gain(1)):t==="ENCHANTED_MOULINET_III"?(m=[0,0,0],n.gain(1)):t==="ENCHANTED_REPRISE"?m=[c,d,f]:(h&&I.reportComboBreak(),m=[0,0,0],n.consume(n.availableAmount())),this.setComboState("RDM_MELEE_COUNTER",m[0]),this.setComboState("RDM_FINISHER_COUNTER",m[1]),this.setComboState("RDM_AOE_COUNTER",m[2])}}const za=(e,t,n)=>{const o=Le(n.onConfirm,s=>s.processDualcastAndInstants(e),s=>s.processComboStatus(e));return Xn("RDM",e,t,{...n,aspect:n.isPhysical?Ie.Physical:void 0,castTime:s=>s.config.adjustedCastTime(n.baseCastTime),recastTime:s=>s.config.adjustedGCD(),manaCost:n.baseManaCost??0,potency:n.basePotency,jobPotencyModifiers:s=>{const c=[];return s.hasResourceAvailable("EMBOLDEN")&&c.push(J.EmboldenMagic),n.jobPotencyModifiers&&c.push(...n.jobPotencyModifiers(s)),c},isInstantFn:s=>$0.includes(e)||e==="GRAND_IMPACT"||Q0.includes(e)&&s.hasResourceAvailable("ACCELERATION")||s.hasResourceAvailable("DUALCAST")||s.hasResourceAvailable("SWIFTCAST"),onConfirm:o})},Ii=(e,t,n)=>{const o=!e.toString().startsWith("ENCHANTED"),s=Le(c=>c.processComboStatus(e),n.onConfirm);return ia("RDM",e,t,{...n,aspect:o?Ie.Physical:void 0,onConfirm:s,jobPotencyModifiers:c=>{const d=[];return o||c.hasResourceAvailable("EMBOLDEN")&&d.push(J.EmboldenMagic),d}})},Is=(e,t,n,o)=>et("RDM",e,t,n,{aspect:o.isPhysical?Ie.Physical:void 0,jobPotencyModifiers:s=>!o.isPhysical&&s.hasResourceAvailable("EMBOLDEN")?[J.EmboldenMagic]:[],...o}),J0={newSkill:"SCORCH",condition:e=>e.getFinisherCounter()===1},eO={newSkill:"RESOLUTION",condition:e=>e.getFinisherCounter()===2},ef={newSkill:"GRAND_IMPACT",condition:e=>e.getFinisherCounter()<1&&e.hasResourceAvailable("GRAND_IMPACT_READY")},yu=[{newSkill:"JOLT_II",condition:e=>e.getFinisherCounter()<1&&!e.hasResourceAvailable("GRAND_IMPACT_READY")},J0,eO,ef];za("JOLT_II",62,{replaceIf:yu,autoUpgrade:{trait:"RED_MAGIC_MASTERY_III",otherSkill:"JOLT_III"},baseCastTime:2,baseManaCost:200,applicationDelay:.8,basePotency:280,validateAttempt:e=>e.getFinisherCounter()<1&&!e.hasResourceAvailable("GRAND_IMPACT_READY"),onConfirm:e=>e.gainColorMana({w:2,b:2})});za("JOLT_III",84,{replaceIf:yu,autoDowngrade:{trait:"RED_MAGIC_MASTERY_III",otherSkill:"JOLT_II"},baseCastTime:2,baseManaCost:200,applicationDelay:.8,basePotency:360,validateAttempt:e=>e.getFinisherCounter()<1&&!e.hasResourceAvailable("GRAND_IMPACT_READY"),onConfirm:e=>e.gainColorMana({w:2,b:2})});const tO=[["NEVER",300],["RED_MAGIC_MASTERY_II",340],["RED_MAGIC_MASTERY_III",380]];za("VERSTONE",30,{baseCastTime:2,baseManaCost:200,applicationDelay:.8,basePotency:tO,validateAttempt:e=>e.hasResourceAvailable("VERSTONE_READY"),onConfirm:e=>{e.gainColorMana({w:5}),e.tryConsumeResource("VERSTONE_READY")},highlightIf:e=>e.hasResourceAvailable("VERSTONE_READY")});za("VERFIRE",26,{baseCastTime:2,baseManaCost:200,applicationDelay:.8,basePotency:tO,validateAttempt:e=>e.hasResourceAvailable("VERFIRE_READY"),onConfirm:e=>{e.gainColorMana({b:5}),e.tryConsumeResource("VERFIRE_READY")},highlightIf:e=>e.hasResourceAvailable("VERFIRE_READY")});const UT={newSkill:"VERHOLY",condition:e=>e.hasThreeManaStacks()},wT={newSkill:"VERFLARE",condition:e=>e.hasThreeManaStacks()};za("VERAERO",10,{replaceIf:[UT],autoUpgrade:{trait:"RED_MAGIC_MASTERY_II",otherSkill:"VERAERO_III"},baseCastTime:5,baseManaCost:400,applicationDelay:.76,basePotency:360,validateAttempt:e=>!e.hasThreeManaStacks(),onConfirm:e=>{e.gainColorMana({w:6}),e.hasResourceAvailable("ACCELERATION")?e.gainStatus("VERSTONE_READY"):e.maybeGainVerproc("VERSTONE_READY")}});za("VERTHUNDER",4,{replaceIf:[wT],autoUpgrade:{trait:"RED_MAGIC_MASTERY_II",otherSkill:"VERTHUNDER_III"},baseCastTime:5,baseManaCost:400,applicationDelay:.76,basePotency:360,validateAttempt:e=>!e.hasThreeManaStacks(),onConfirm:e=>{e.gainColorMana({b:6}),e.hasResourceAvailable("ACCELERATION")?e.gainStatus("VERFIRE_READY"):e.maybeGainVerproc("VERFIRE_READY")}});const aO=[["NEVER",380],["ENCHANTED_BLADE_MASTERY",440]];za("VERAERO_III",82,{replaceIf:[UT],autoDowngrade:{trait:"RED_MAGIC_MASTERY_II",otherSkill:"VERAERO"},baseCastTime:5,baseManaCost:400,applicationDelay:.76,basePotency:aO,validateAttempt:e=>!e.hasThreeManaStacks(),onConfirm:e=>{e.gainColorMana({w:6}),e.hasResourceAvailable("ACCELERATION")?e.gainStatus("VERSTONE_READY"):e.maybeGainVerproc("VERSTONE_READY")}});za("VERTHUNDER_III",82,{replaceIf:[wT],autoDowngrade:{trait:"RED_MAGIC_MASTERY_II",otherSkill:"VERTHUNDER"},baseCastTime:5,baseManaCost:400,applicationDelay:.76,basePotency:aO,validateAttempt:e=>!e.hasThreeManaStacks(),onConfirm:e=>{e.gainColorMana({b:6}),e.hasResourceAvailable("ACCELERATION")?e.gainStatus("VERFIRE_READY"):e.maybeGainVerproc("VERFIRE_READY")}});const nO=[["NEVER",100],["RED_MAGIC_MASTERY",120],["RED_MAGIC_MASTERY_III",140]];za("VERAERO_II",22,{replaceIf:[UT],baseCastTime:2,baseManaCost:400,applicationDelay:.8,basePotency:nO,falloff:0,validateAttempt:e=>!e.hasThreeManaStacks(),onConfirm:e=>e.gainColorMana({w:7})});za("VERTHUNDER_II",18,{replaceIf:[wT],baseCastTime:2,baseManaCost:400,falloff:0,applicationDelay:.8,basePotency:nO,validateAttempt:e=>!e.hasThreeManaStacks(),onConfirm:e=>e.gainColorMana({b:7})});za("IMPACT",66,{replaceIf:[J0,eO,ef],baseCastTime:5,baseManaCost:400,falloff:0,applicationDelay:.76,basePotency:[["NEVER",200],["RED_MAGIC_MASTERY_III",210]],jobPotencyModifiers:e=>e.hasResourceAvailable("ACCELERATION")?[J.AccelerationImpact]:[],validateAttempt:e=>e.getFinisherCounter()<1&&!e.hasResourceAvailable("GRAND_IMPACT_READY"),onConfirm:e=>e.gainColorMana({w:3,b:3})});za("GRAND_IMPACT",96,{replaceIf:yu,startOnHotbar:!1,baseCastTime:0,baseManaCost:0,basePotency:600,falloff:.55,applicationDelay:1.55,validateAttempt:ef.condition,highlightIf:ef.condition,onConfirm:e=>e.gainColorMana({w:3,b:3})});Ii("RIPOSTE",1,{replaceIf:[{newSkill:"ENCHANTED_RIPOSTE",condition:e=>e.colorManaExceeds(20)}],applicationDelay:.62,potency:130,recastTime:2.5,validateAttempt:e=>!e.colorManaExceeds(20)});Ii("ZWERCHHAU",35,{replaceIf:[{newSkill:"ENCHANTED_ZWERCHHAU",condition:e=>e.colorManaExceeds(15)}],applicationDelay:.62,potency:100,combo:{potency:150,resource:"RDM_MELEE_COUNTER",resourceValue:1},recastTime:2.5,validateAttempt:e=>!e.colorManaExceeds(15),highlightIf:e=>e.resources.get("RDM_MELEE_COUNTER").availableAmount()===1});Ii("REDOUBLEMENT",50,{replaceIf:[{newSkill:"ENCHANTED_REDOUBLEMENT",condition:e=>e.colorManaExceeds(15)}],applicationDelay:.62,potency:100,combo:{potency:230,resource:"RDM_MELEE_COUNTER",resourceValue:2},recastTime:2.5,validateAttempt:e=>!e.colorManaExceeds(15),highlightIf:e=>e.resources.get("RDM_MELEE_COUNTER").availableAmount()===2});Ii("ENCHANTED_RIPOSTE",50,{startOnHotbar:!1,replaceIf:[{newSkill:"RIPOSTE",condition:e=>!e.colorManaExceeds(20)}],applicationDelay:.62,potency:[["NEVER",220],["RED_MAGIC_MASTERY_III",280],["ENCHANTED_BLADE_MASTERY",340]],recastTime:1.5,validateAttempt:e=>e.colorManaExceeds(20),onConfirm:e=>e.consumeColorMana(20)});Ii("ENCHANTED_ZWERCHHAU",50,{startOnHotbar:!1,replaceIf:[{newSkill:"ZWERCHHAU",condition:e=>!e.colorManaExceeds(15)}],applicationDelay:.62,potency:[["NEVER",100],["RED_MAGIC_MASTERY_III",150],["ENCHANTED_BLADE_MASTERY",190]],combo:{potency:[["NEVER",290],["RED_MAGIC_MASTERY_III",340],["ENCHANTED_BLADE_MASTERY",380]],resource:"RDM_MELEE_COUNTER",resourceValue:1},recastTime:1.5,validateAttempt:e=>e.colorManaExceeds(15),onConfirm:e=>e.consumeColorMana(15),highlightIf:e=>e.resources.get("RDM_MELEE_COUNTER").availableAmount()===1});Ii("ENCHANTED_REDOUBLEMENT",50,{startOnHotbar:!1,replaceIf:[{newSkill:"REDOUBLEMENT",condition:e=>!e.colorManaExceeds(15)}],applicationDelay:.62,potency:[["NEVER",100],["RED_MAGIC_MASTERY_III",130],["ENCHANTED_BLADE_MASTERY",190]],combo:{potency:[["NEVER",470],["RED_MAGIC_MASTERY_III",500],["ENCHANTED_BLADE_MASTERY",560]],resource:"RDM_MELEE_COUNTER",resourceValue:2},recastTime:2.2,validateAttempt:e=>e.colorManaExceeds(15),onConfirm:e=>e.consumeColorMana(15),highlightIf:e=>e.resources.get("RDM_MELEE_COUNTER").availableAmount()===2});const tf=e=>e.resources.get("WHITE_MANA").available(5)&&e.resources.get("BLACK_MANA").available(5);Ii("REPRISE",76,{replaceIf:[{newSkill:"ENCHANTED_REPRISE",condition:e=>tf(e)}],applicationDelay:.62,potency:100,recastTime:2.5,validateAttempt:e=>!tf(e)});Ii("ENCHANTED_REPRISE",76,{startOnHotbar:!1,replaceIf:[{newSkill:"REPRISE",condition:e=>!tf(e)}],applicationDelay:.62,potency:[["NEVER",290],["RED_MAGIC_MASTERY_III",340],["ENCHANTED_BLADE_MASTERY",420]],recastTime:2.5,validateAttempt:e=>tf(e),onConfirm:e=>{e.resources.get("WHITE_MANA").consume(5),e.resources.get("BLACK_MANA").consume(5)}});const Zi=[{newSkill:"MOULINET",condition:e=>e.resources.get("RDM_AOE_COUNTER").availableAmount()===0&&!e.colorManaExceeds(20)||!e.colorManaExceeds(15)},{newSkill:"ENCHANTED_MOULINET",condition:e=>e.colorManaExceeds(20)&&e.resources.get("RDM_AOE_COUNTER").availableAmount()===0},{newSkill:"ENCHANTED_MOULINET_II",condition:e=>e.colorManaExceeds(15)&&e.resources.get("RDM_AOE_COUNTER").availableAmount()===1},{newSkill:"ENCHANTED_MOULINET_III",condition:e=>e.colorManaExceeds(15)&&e.resources.get("RDM_AOE_COUNTER").availableAmount()===2}];Ii("MOULINET",52,{replaceIf:Zi,falloff:0,applicationDelay:.8,potency:60,recastTime:2.5,validateAttempt:Zi[0].condition});Ii("ENCHANTED_MOULINET",52,{startOnHotbar:!1,replaceIf:Zi,falloff:0,applicationDelay:.8,potency:130,recastTime:1.5,validateAttempt:Zi[1].condition,onConfirm:e=>e.consumeColorMana(20)});Ii("ENCHANTED_MOULINET_II",52,{startOnHotbar:!1,replaceIf:Zi,falloff:0,applicationDelay:.8,potency:140,recastTime:1.5,validateAttempt:Zi[2].condition,onConfirm:e=>e.consumeColorMana(15),highlightIf:Zi[2].condition});Ii("ENCHANTED_MOULINET_III",52,{startOnHotbar:!1,replaceIf:Zi,falloff:0,applicationDelay:.8,potency:150,recastTime:1.5,validateAttempt:Zi[3].condition,onConfirm:e=>e.consumeColorMana(15),highlightIf:Zi[3].condition});const iO=[["NEVER",600],["ENCHANTED_BLADE_MASTERY",650]];za("VERHOLY",70,{startOnHotbar:!1,baseCastTime:0,baseManaCost:400,falloff:.55,applicationDelay:1.43,basePotency:iO,validateAttempt:e=>e.hasThreeManaStacks(),highlightIf:e=>e.hasThreeManaStacks(),onConfirm:e=>{e.resources.get("WHITE_MANA").availableAmount()<e.resources.get("BLACK_MANA").availableAmount()?e.gainStatus("VERSTONE_READY"):e.maybeGainVerproc("VERSTONE_READY",.2),e.gainColorMana({w:11})}});za("VERFLARE",68,{startOnHotbar:!1,baseCastTime:0,baseManaCost:400,falloff:.55,applicationDelay:1.43,basePotency:iO,validateAttempt:e=>e.hasThreeManaStacks(),highlightIf:e=>e.hasThreeManaStacks(),onConfirm:e=>{e.resources.get("BLACK_MANA").availableAmount()<e.resources.get("WHITE_MANA").availableAmount()?e.gainStatus("VERFIRE_READY"):e.maybeGainVerproc("VERFIRE_READY",.2),e.gainColorMana({b:11})}});za("SCORCH",80,{startOnHotbar:!1,replaceIf:yu,baseCastTime:0,baseManaCost:400,falloff:.55,applicationDelay:1.83,basePotency:[["NEVER",680],["ENCHANTED_BLADE_MASTERY",750]],validateAttempt:e=>e.getFinisherCounter()===1,onConfirm:e=>e.gainColorMana({w:4,b:4}),highlightIf:e=>e.getFinisherCounter()===1});za("RESOLUTION",90,{startOnHotbar:!1,replaceIf:yu,baseCastTime:0,baseManaCost:400,falloff:.55,applicationDelay:1.56,basePotency:[["NEVER",750],["ENCHANTED_BLADE_MASTERY",850]],validateAttempt:e=>e.getFinisherCounter()===2,onConfirm:e=>e.gainColorMana({w:4,b:4}),highlightIf:e=>e.getFinisherCounter()===2});za("VERCURE",54,{baseCastTime:2,baseManaCost:500,applicationDelay:.8,basePotency:0});za("VERRAISE",64,{baseCastTime:10,baseManaCost:2400,applicationDelay:.81,basePotency:0});Ye("RDM","EMBOLDEN",58,"cd_EMBOLDEN",{replaceIf:[{newSkill:"VICE_OF_THORNS",condition:e=>e.hasResourceAvailable("THORNED_FLOURISH")}],rscType:"EMBOLDEN",applicationDelay:.62,cooldown:120,onApplication:e=>{e.hasTraitUnlocked("ENHANCED_EMBOLDEN")&&e.gainStatus("THORNED_FLOURISH")}});Ye("RDM","MANAFICATION",60,"cd_MANAFICATION",{replaceIf:[{newSkill:"PREFULGENCE",condition:e=>e.hasResourceAvailable("PREFULGENCE_READY")}],rscType:"MANAFICATION",requiresCombat:!0,applicationDelay:0,cooldown:110,onApplication:e=>{e.hasTraitUnlocked("ENHANCED_MANAFICATION")&&e.gainStatus("PREFULGENCE_READY"),e.gainStatus("MAGICKED_SWORDPLAY",3),(e.hasResourceAvailable("RDM_MELEE_COUNTER")||e.hasResourceAvailable("RDM_FINISHER_COUNTER")||e.hasResourceAvailable("RDM_AOE_COUNTER"))&&I.reportComboBreak(),e.setComboState("RDM_MELEE_COUNTER",0),e.setComboState("RDM_FINISHER_COUNTER",0),e.setComboState("RDM_AOE_COUNTER",0)}});Is("CORPS_A_CORPS",6,"cd_CORPS_A_CORPS",{isPhysical:!0,applicationDelay:.62,potency:130,cooldown:35,maxCharges:2,animationLock:Wt});const oO=[["NEVER",130],["ENHANCED_DISPLACEMENT",180]];Is("ENGAGEMENT",40,"cd_DISPLACEMENT",{isPhysical:!0,applicationDelay:.62,potency:oO,cooldown:35,maxCharges:2});Is("DISPLACEMENT",40,"cd_DISPLACEMENT",{isPhysical:!0,applicationDelay:.62,potency:oO,cooldown:35,maxCharges:2,animationLock:Wt});Is("FLECHE",45,"cd_FLECHE",{isPhysical:!0,applicationDelay:1.16,potency:[["NEVER",460],["ENCHANTED_BLADE_MASTERY",480]],cooldown:25});Is("CONTRE_SIXTE",56,"cd_CONTRE_SIXTE",{isPhysical:!0,falloff:0,applicationDelay:1.16,potency:[["NEVER",380],["ENCHANTED_BLADE_MASTERY",420]],cooldown:35});Ye("RDM","ACCELERATION",50,"cd_ACCELERATION",{rscType:"ACCELERATION",applicationDelay:0,cooldown:55,maxCharges:2,onApplication:e=>{e.hasTraitUnlocked("ENHANCED_ACCELERATION_II")&&(e.hasResourceAvailable("GRAND_IMPACT_READY")&&I.reportWarning({kind:"overwrite",rsc:"GRAND_IMPACT_READY"}),e.gainStatus("GRAND_IMPACT_READY"))}});Ye("RDM","MAGICK_BARRIER",86,"cd_MAGICK_BARRIER",{rscType:"MAGICK_BARRIER",applicationDelay:0,cooldown:120});Is("VICE_OF_THORNS",92,"cd_VICE_OF_THORNS",{startOnHotbar:!1,falloff:.55,applicationDelay:.8,potency:950,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("THORNED_FLOURISH"),onConfirm:e=>e.tryConsumeResource("THORNED_FLOURISH"),highlightIf:e=>e.hasResourceAvailable("THORNED_FLOURISH")});Is("PREFULGENCE",100,"cd_PREFULGENCE",{startOnHotbar:!1,falloff:.55,applicationDelay:1.42,potency:1200,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("PREFULGENCE_READY"),onConfirm:e=>e.tryConsumeResource("PREFULGENCE_READY"),highlightIf:e=>e.hasResourceAvailable("PREFULGENCE_READY")});Object.keys(XR).forEach(e=>zt(e,`RPR/${Pe[e].name}.png`));class JG extends Xt{jobSpecificOtherTargetedBuffViewProps(){return this.makeTargetedTimers("DEATHS_DESIGN")}jobSpecificSelfTargetedBuffViewProps(){return[...Object.keys(XR).filter(t=>t!=="DEATHS_DESIGN").map(t=>t==="SOULSOW"?this.makeCommonTimerless(t):this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){const n=this.state.resources,o=n.get("SOUL").availableAmount(),s=n.get("SHROUD").availableAmount(),c=n.get("LEMURE_SHROUD").availableAmount(),d=n.get("VOID_SHROUD").availableAmount(),f=n.get("RPR_COMBO"),h=n.get("RPR_AOE_COMBO"),m=f.available(1)?f.pendingChange?.timeTillEvent:h.available(1)?h.pendingChange?.timeTillEvent:void 0,R=[{kind:"text",name:N({en:"Combo Timer",zh:""}),text:m?.toFixed(3)??"N/A"},{kind:"bar",name:N({en:"Soul Gauge",zh:""}),color:o<50?t.rpr.soulGaugeLow:t.rpr.soulGaugeHigh,progress:o/100,valueString:Math.floor(o)+"/100"}];return this.state.hasTraitUnlocked("SHROUD_GAUGE")&&R.push({kind:"bar",name:N({en:"Shroud Gauge",zh:""}),color:s<50?t.rpr.shroudGaugeLow:t.rpr.shroudGaugeHigh,progress:s/100,valueString:Math.floor(s)+"/100"},{kind:"counter",name:N({en:"Lemure Shroud",zh:""}),color:t.rpr.lemureShroud,currentStacks:c,maxStacks:5}),this.state.hasTraitUnlocked("VOID_SOUL")&&R.push({kind:"counter",name:N({en:"Void Shroud",zh:""}),color:d<2?t.rpr.voidShroudLow:t.rpr.voidShroudHigh,currentStacks:d,maxStacks:5}),R}}function pt(e,t,n){Ve("RPR",e,t,n??{})}pt("SOUL",100);pt("SHROUD",100);pt("DEATHS_DESIGN",1,{});pt("SOUL_REAVER",2,{timeout:30});pt("ENHANCED_GIBBET",1,{timeout:60});pt("ENHANCED_GALLOWS",1,{timeout:60});pt("EXECUTIONER",2,{timeout:30});pt("ENSHROUDED",1,{timeout:30});pt("LEMURE_SHROUD",5,{timeout:30});pt("VOID_SHROUD",5);pt("OBLATIO",1,{timeout:30});pt("ENHANCED_VOID_REAPING",1,{timeout:30});pt("ENHANCED_CROSS_REAPING",1,{timeout:30});pt("IDEAL_HOST",1,{timeout:30});pt("PERFECTIO_OCCULTA",1,{timeout:30});pt("PERFECTIO_PARATA",1,{timeout:30});pt("ARCANE_CIRCLE",1,{timeout:20});pt("CIRCLE_OF_SACRIFICE",1,{timeout:5});pt("BLOODSOWN_CIRCLE",1,{timeout:6});pt("IMMORTAL_SACRIFICE",8,{timeout:30});pt("ARCANE_CREST",1,{timeout:5});pt("CREST_OF_TIME_BORROWED",1,{timeout:5});pt("CREST_OF_TIME_RETURNED",1,{timeout:15});pt("SOULSOW",1,{default:1});pt("THRESHOLD",1,{timeout:10});pt("ENHANCED_HARPE",1,{timeout:10});pt("HELLS_INGRESS_USED",1);pt("RPR_COMBO",2,{timeout:30});pt("RPR_AOE_COMBO",1,{timeout:30});class eB extends qt{constructor(t){super(t);const n=this.hasTraitUnlocked("TEMPERED_SOUL")?2:1;this.cooldowns.set(new Ue("cd_SOUL_SLICE",30,n,n)),this.registerRecurringEvents()}get statusPropsGenerator(){return new JG(this)}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("ARCANE_CIRCLE")&&t.addBuff(k.ArcaneCircle),t.targetList.some(o=>this.hasDebuffActive("DEATHS_DESIGN",o))&&t.addBuff(k.DeathsDesign)}refreshDeathsDesign(t){const n=this.debuffs.get("DEATHS_DESIGN",t),o=Math.min(this.debuffs.timeTillExpiry("DEATHS_DESIGN",t)+30,60);if(n.available(1)){n.overrideTimer(this,o);return}n.gain(1),this.debuffs.addDebuffEvent({rscType:"DEATHS_DESIGN",name:"drop Death's Design on target "+t,targetNumber:t,delay:o,fnOnRsc:s=>{s.consume(1)}})}setTimedResource(t,n){this.tryConsumeResource(t),this.resources.get(t).gain(n),this.enqueueResourceDrop(t)}processCombo(t){const n=this.resources.get("RPR_COMBO").availableAmount(),o=this.resources.get("RPR_AOE_COMBO").availableAmount(),[s,c]=new Map([["SLICE",[1,0]],["WAXING_SLICE",[n===1?2:0,0]],["INFERNAL_SLICE",[0,0]],["SPINNING_SCYTHE",[0,1]],["NIGHTMARE_SCYTHE",[0,0]]]).get(t)??[n,o];s!==n&&this.setComboState("RPR_COMBO",s),c!==o&&this.setComboState("RPR_AOE_COMBO",c)}processSoulGauge(t){const n=this.resources.get("SOUL");if(["SLICE","WAXING_SLICE","INFERNAL_SLICE","SPINNING_SCYTHE","NIGHTMARE_SCYTHE","HARPE","HARVEST_MOON"].includes(t)){n.gain(10);return}if(["SOUL_SLICE","SOUL_SCYTHE"].includes(t)){n.gain(50);return}if(["BLOOD_STALK","UNVEILED_GALLOWS","UNVEILED_GIBBET","GRIM_SWATHE","GLUTTONY"].includes(t)){n.consume(50);return}}processShroudGauge(t){const n=this.resources.get("SHROUD");if(["GALLOWS","GIBBET","EXECUTIONERS_GALLOWS","EXECUTIONERS_GIBBET","GUILLOTINE","EXECUTIONERS_GUILLOTINE"].includes(t)){n.gain(10);return}t==="ENSHROUD"&&!this.resources.get("IDEAL_HOST").available(1)&&n.consume(50)}processReaversExecutioner(t){const n=this.resources.get("SOUL_REAVER"),o=this.resources.get("EXECUTIONER");if(["GIBBET","GALLOWS","GUILLOTINE"].includes(t)){n.consume(1);return}if(["EXECUTIONERS_GIBBET","EXECUTIONERS_GALLOWS","EXECUTIONERS_GUILLOTINE"].includes(t)){o.consume(1);return}if(this.skillsList.get(t).cdName==="cd_GCD"&&(n.consume(n.availableAmount()),o.consume(o.availableAmount())),["BLOOD_STALK","UNVEILED_GALLOWS","UNVEILED_GIBBET","GRIM_SWATHE"].includes(t)){n.consume(n.availableAmount()),o.consume(o.availableAmount()),this.setTimedResource("SOUL_REAVER",1);return}if(t==="GLUTTONY"){if(n.consume(n.availableAmount()),o.consume(o.availableAmount()),this.hasTraitUnlocked("ENHANCED_GLUTTONY")){this.setTimedResource("EXECUTIONER",2);return}this.setTimedResource("SOUL_REAVER",2);return}}processGibbetGallows(t){const n=this.resources.get("SOUL_REAVER"),o=this.resources.get("EXECUTIONER");["GIBBET","GALLOWS","EXECUTIONERS_GIBBET","EXECUTIONERS_GALLOWS"].includes(t)||(n.consume(n.availableAmount()),o.consume(o.availableAmount()));const s=new Map([["GIBBET","ENHANCED_GIBBET"],["EXECUTIONERS_GIBBET","ENHANCED_GIBBET"],["GALLOWS","ENHANCED_GALLOWS"],["EXECUTIONERS_GALLOWS","ENHANCED_GALLOWS"]]),c=new Map([["GIBBET","ENHANCED_GALLOWS"],["EXECUTIONERS_GIBBET","ENHANCED_GALLOWS"],["GALLOWS","ENHANCED_GIBBET"],["EXECUTIONERS_GALLOWS","ENHANCED_GIBBET"]]),d=this.resources.get(s.get(t)),f=this.resources.get(c.get(t));d.consume(d.availableAmount()),f.consume(f.availableAmount()),f.gain(1)}processCircleOfSacrifice(t){if(!this.hasResourceAvailable("CIRCLE_OF_SACRIFICE"))return;Wi("RPR",t).potencyFn(this)>0&&(this.resources.get("IMMORTAL_SACRIFICE").availableAmount()===0?this.setTimedResource("IMMORTAL_SACRIFICE",1):this.resources.get("IMMORTAL_SACRIFICE").gain(1),this.tryConsumeResource("CIRCLE_OF_SACRIFICE",!0))}enterEnshroud(){this.hasResourceAvailable("IDEAL_HOST")&&this.resources.get("IDEAL_HOST").consume(1),this.hasTraitUnlocked("ENHANCED_ENSHROUD")&&this.setTimedResource("OBLATIO",1),this.setTimedResource("LEMURE_SHROUD",5),this.tryConsumeResource("PERFECTIO_PARATA",!0)}exitEnshroud(){this.tryConsumeResource("ENSHROUDED"),this.tryConsumeResource("OBLATIO"),this.tryConsumeResource("LEMURE_SHROUD"),this.tryConsumeResource("VOID_SHROUD"),this.tryConsumeResource("ENHANCED_CROSS_REAPING"),this.tryConsumeResource("ENHANCED_VOID_REAPING")}}const tB=new Set(["SHADOW_OF_DEATH","WHORL_OF_DEATH","HARVEST_MOON","HARPE","SOULSOW","VOID_REAPING","CROSS_REAPING","GRIM_REAPING","LEMURES_SLICE","LEMURES_SCYTHE","SACRIFICIUM","COMMUNIO","ARCANE_CIRCLE","HELLS_EGRESS","HELLS_INGRESS","REGRESS","ARCANE_CREST","FEINT","LEG_SWEEP","BLOODBATH","TRUE_NORTH","ARMS_LENGTH","SECOND_WIND","SPRINT","TINCTURE"]),kf=(e,t)=>n=>{const o=["GIBBET","GALLOWS","GUILLOTINE"].includes(t)?n.resources.get("SOUL_REAVER"):n.resources.get("EXECUTIONER");return n.resources.get(e).available(1)||o.available(1)&&!n.hasResourceAvailable("ENHANCED_GIBBET")&&!n.hasResourceAvailable("ENHANCED_GALLOWS")},PT=e=>e.hasResourceAvailable("SOUL_REAVER"),GT=e=>e.hasResourceAvailable("EXECUTIONER"),$i=e=>t=>t.resources.get("SOUL").availableAmount()>=e,BT=e=>tB.has(e),Uf=e=>Le(t=>t.processCombo(e),t=>t.processSoulGauge(e),t=>t.processShroudGauge(e),t=>t.processReaversExecutioner(e),t=>t.processCircleOfSacrifice(e)),FT=e=>{const t=[];return e.hasResourceAvailable("ARCANE_CIRCLE")&&t.push(J.ArcaneCircle),t},jT=(e,t)=>{const n=new Map;return t.targetList.forEach(o=>{e.debuffs.get("DEATHS_DESIGN",o).available(1)&&n.set(o,[J.DeathsDesign])}),n},wf=(e,t,n)=>{const o=Le(Uf(e),n.onConfirm),s=bu(c=>!c.resources.get("ENSHROUDED").available(1)||BT(e),n.validateAttempt??(()=>!0));return Xn("RPR",e,t,{...n,recastTime:c=>c.config.adjustedGCD(n.recastTime),onConfirm:o,validateAttempt:s,isInstantFn:c=>!(e==="COMMUNIO"||e==="HARPE"&&!c.hasResourceAvailable("ENHANCED_HARPE")||e==="SOULSOW"&&c.isInCombat()),jobPotencyModifiers:FT,jobTargetPotencyModifiers:jT})},Ca=(e,t,n)=>{const o=Le(Uf(e),n.onConfirm),s=bu(c=>!c.resources.get("ENSHROUDED").available(1)||BT(e),n.validateAttempt??(()=>!0));return ia("RPR",e,t,{...n,onConfirm:o,jobPotencyModifiers:c=>{const d=FT(c);if(["GIBBET","EXECUTIONERS_GIBBET"].includes(e)&&c.hasResourceAvailable("ENHANCED_GIBBET")&&d.push(J.EnhancedGibbetGallows),["GALLOWS","EXECUTIONERS_GALLOWS"].includes(e)&&c.hasResourceAvailable("ENHANCED_GALLOWS")&&d.push(J.EnhancedGibbetGallows),e==="VOID_REAPING"&&c.hasResourceAvailable("ENHANCED_VOID_REAPING")&&d.push(J.EnhancedReaping),e==="CROSS_REAPING"&&c.hasResourceAvailable("ENHANCED_CROSS_REAPING")&&d.push(J.EnhancedReaping),e==="PLENTIFUL_HARVEST"&&c.hasResourceAvailable("IMMORTAL_SACRIFICE"))for(let f=0;f<c.resources.get("IMMORTAL_SACRIFICE").availableAmount();f++)d.push(J.ImmortalSacrifice);return d},jobTargetPotencyModifiers:jT,validateAttempt:s})},kn=(e,t,n,o)=>{const s=Le(Uf(e),o.onConfirm),c=bu(d=>!d.resources.get("ENSHROUDED").available(1)||BT(e),o.validateAttempt??(()=>!0));return et("RPR",e,t,n,{...o,onConfirm:s,validateAttempt:c,jobPotencyModifiers:FT,jobTargetPotencyModifiers:jT})};Ca("SHADOW_OF_DEATH",10,{potency:300,aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:1.15,onConfirm:(e,t)=>e.refreshDeathsDesign(t.targetList[0])});Ca("SLICE",1,{potency:[["NEVER",260],["MELEE_MASTERY_II_RPR",320],["MELEE_MASTERY_III_RPR",420]],aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.49});Ca("WAXING_SLICE",5,{potency:[["NEVER",100],["MELEE_MASTERY_II_RPR",160],["MELEE_MASTERY_III_RPR",260]],combo:{potency:[["NEVER",340],["MELEE_MASTERY_II_RPR",400],["MELEE_MASTERY_III_RPR",500]],resource:"RPR_COMBO",resourceValue:1},aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.58,highlightIf:e=>e.hasResourceExactly("RPR_COMBO",1)});Ca("INFERNAL_SLICE",30,{potency:[["NEVER",100],["MELEE_MASTERY_II_RPR",180],["MELEE_MASTERY_III_RPR",280]],combo:{potency:[["NEVER",420],["MELEE_MASTERY_II_RPR",500],["MELEE_MASTERY_III_RPR",600]],resource:"RPR_COMBO",resourceValue:2},aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.54,highlightIf:e=>e.hasResourceExactly("RPR_COMBO",2)});Ca("SOUL_SLICE",60,{potency:[["NEVER",460],["MELEE_MASTERY_III_RPR",520]],aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.99,secondaryCooldown:{cdName:"cd_SOUL_SLICE",cooldown:30,maxCharges:2}});Ca("GIBBET",70,{replaceIf:[{newSkill:"VOID_REAPING",condition:e=>e.hasResourceAvailable("ENSHROUDED")},{newSkill:"EXECUTIONERS_GIBBET",condition:e=>e.hasResourceAvailable("EXECUTIONER")}],potency:[["NEVER",460],["MELEE_MASTERY_III_RPR",500]],positional:{potency:[["NEVER",520],["MELEE_MASTERY_III_RPR",560]],location:"flank"},aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.5,highlightIf:kf("ENHANCED_GIBBET","GIBBET"),validateAttempt:PT,onConfirm:e=>{e.tryConsumeResource("ENHANCED_GIBBET"),e.setTimedResource("ENHANCED_GALLOWS",1)}});Ca("GALLOWS",70,{replaceIf:[{newSkill:"CROSS_REAPING",condition:e=>e.hasResourceAvailable("ENSHROUDED")},{newSkill:"EXECUTIONERS_GALLOWS",condition:e=>e.resources.get("EXECUTIONER").available(1)}],potency:[["NEVER",460],["MELEE_MASTERY_III_RPR",500]],positional:{potency:[["NEVER",520],["MELEE_MASTERY_III_RPR",560]],location:"rear"},aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.53,highlightIf:kf("ENHANCED_GALLOWS","GALLOWS"),validateAttempt:PT,onConfirm:e=>{e.tryConsumeResource("ENHANCED_GALLOWS"),e.setTimedResource("ENHANCED_GIBBET",1)}});Ca("EXECUTIONERS_GIBBET",96,{startOnHotbar:!1,potency:700,positional:{potency:760,location:"flank"},aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.62,highlightIf:kf("ENHANCED_GIBBET","EXECUTIONERS_GIBBET"),validateAttempt:GT,onConfirm:e=>{e.tryConsumeResource("ENHANCED_GIBBET"),e.setTimedResource("ENHANCED_GALLOWS",1)}});Ca("EXECUTIONERS_GALLOWS",96,{startOnHotbar:!1,potency:700,positional:{potency:760,location:"flank"},aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.62,highlightIf:kf("ENHANCED_GALLOWS","EXECUTIONERS_GALLOWS"),validateAttempt:GT,onConfirm:e=>{e.tryConsumeResource("ENHANCED_GALLOWS"),e.setTimedResource("ENHANCED_GIBBET",1)}});Ca("PLENTIFUL_HARVEST",88,{potency:720,aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:.2,applicationDelay:1.16,highlightIf:e=>e.hasResourceAvailable("IMMORTAL_SACRIFICE",1),validateAttempt:e=>e.hasResourceAvailable("IMMORTAL_SACRIFICE",1)&&!e.hasResourceAvailable("BLOODSOWN_CIRCLE"),onConfirm:e=>{e.tryConsumeResource("IMMORTAL_SACRIFICE",!0),e.setTimedResource("IDEAL_HOST",1),e.hasTraitUnlocked("ENHANCED_PLENTIFUL_HARVEST")&&e.setTimedResource("PERFECTIO_OCCULTA",1)}});wf("COMMUNIO",90,{replaceIf:[{condition:e=>e.hasResourceAvailable("PERFECTIO_PARATA"),newSkill:"PERFECTIO"}],potency:1100,aspect:Ie.Other,castTime:1.3,recastTime:2.5,falloff:.2,applicationDelay:1.16,validateAttempt:e=>e.hasResourceAvailable("ENSHROUDED"),highlightIf:e=>e.hasResourceAvailable("ENSHROUDED")&&e.resources.get("LEMURE_SHROUD").availableAmount()===1,onConfirm:e=>{e.tryConsumeResource("PERFECTIO_OCCULTA")&&e.hasTraitUnlocked("ENHANCED_PLENTIFUL_HARVEST")&&e.setTimedResource("PERFECTIO_PARATA",1),e.exitEnshroud(),e.tryConsumeResource("ENHANCED_CROSS_REAPING"),e.tryConsumeResource("ENHANCED_VOID_REAPING")}});wf("HARPE",15,{potency:300,aspect:Ie.Other,castTime:1.3,recastTime:2.5,applicationDelay:.9,highlightIf:e=>e.hasResourceAvailable("ENHANCED_HARPE"),onConfirm:e=>e.tryConsumeResource("ENHANCED_HARPE"),startsAuto:!1});wf("SOULSOW",82,{potency:0,replaceIf:[{condition:e=>e.hasResourceAvailable("SOULSOW"),newSkill:"HARVEST_MOON"}],startOnHotbar:!0,aspect:Ie.Other,castTime:5,recastTime:2.5,applicationDelay:0,onConfirm:e=>e.resources.get("SOULSOW").gain(1)});wf("HARVEST_MOON",82,{potency:[["NEVER",600],["MELEE_MASTERY_III_RPR",800]],startOnHotbar:!1,aspect:Ie.Other,castTime:0,recastTime:2.5,falloff:.4,applicationDelay:.9,validateAttempt:e=>e.hasResourceAvailable("SOULSOW"),highlightIf:e=>e.hasResourceAvailable("SOULSOW"),onConfirm:e=>e.resources.get("SOULSOW").consume(1),startsAuto:!1});kn("GLUTTONY",76,"cd_GLUTTONY",{replaceIf:[{condition:e=>e.hasResourceAvailable("ENSHROUDED"),newSkill:"SACRIFICIUM"}],isPhysical:!1,potency:520,startOnHotbar:!0,falloff:.25,applicationDelay:1.06,cooldown:60,validateAttempt:$i(50),highlightIf:$i(50)});kn("BLOOD_STALK",50,"cd_BLOOD_STALK",{replaceIf:[{newSkill:"LEMURES_SLICE",condition:e=>e.hasResourceAvailable("ENSHROUDED")},{newSkill:"UNVEILED_GIBBET",condition:e=>e.hasResourceAvailable("ENHANCED_GIBBET")},{newSkill:"UNVEILED_GALLOWS",condition:e=>e.hasResourceAvailable("ENHANCED_GALLOWS")}],isPhysical:!0,potency:340,startOnHotbar:!0,applicationDelay:.89,cooldown:1,validateAttempt:$i(50),highlightIf:$i(50)});kn("GRIM_SWATHE",55,"cd_BLOOD_STALK",{replaceIf:[{condition:e=>e.hasResourceAvailable("ENSHROUDED"),newSkill:"LEMURES_SCYTHE"}],isPhysical:!0,potency:140,startOnHotbar:!0,falloff:0,applicationDelay:.58,cooldown:1,validateAttempt:$i(50),highlightIf:$i(50)});kn("UNVEILED_GIBBET",70,"cd_BLOOD_STALK",{isPhysical:!0,potency:440,startOnHotbar:!1,applicationDelay:.54,cooldown:1,validateAttempt:$i(50),highlightIf:$i(50)});kn("UNVEILED_GALLOWS",70,"cd_BLOOD_STALK",{isPhysical:!0,potency:440,startOnHotbar:!1,applicationDelay:.54,cooldown:1,validateAttempt:$i(50),highlightIf:$i(50)});kn("LEMURES_SLICE",86,"cd_LEMURES_SLICE",{isPhysical:!0,potency:[["NEVER",240],["MELEE_MASTERY_III_RPR",280]],startOnHotbar:!1,applicationDelay:.7,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("VOID_SHROUD",2),highlightIf:e=>e.hasResourceAvailable("VOID_SHROUD",2),onConfirm:e=>{e.resources.get("VOID_SHROUD").consume(2)}});kn("SACRIFICIUM",92,"cd_SACRIFICIUM",{isPhysical:!1,potency:600,startOnHotbar:!1,falloff:.2,applicationDelay:.76,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("OBLATIO"),highlightIf:e=>e.hasResourceAvailable("OBLATIO"),onConfirm:e=>e.tryConsumeResource("OBLATIO")});Ye("RPR","ARCANE_CIRCLE",72,"cd_ARCANE_CIRCLE",{rscType:"ARCANE_CIRCLE",applicationDelay:.6,startOnHotbar:!0,maxCharges:1,potency:0,onApplication:e=>{e.hasTraitUnlocked("ENHANCED_ARCANE_CIRCLE")&&(e.setTimedResource("CIRCLE_OF_SACRIFICE",1),e.setTimedResource("BLOODSOWN_CIRCLE",1))},cooldown:120});Ca("VOID_REAPING",80,{startOnHotbar:!1,potency:[["NEVER",460],["MELEE_MASTERY_III_RPR",540]],aspect:Ie.Physical,recastTime:1.5,applicationDelay:.53,highlightIf:e=>e.resources.get("LEMURE_SHROUD").availableAmount()>1&&!e.hasResourceAvailable("ENHANCED_CROSS_REAPING"),validateAttempt:e=>e.hasResourceAvailable("LEMURE_SHROUD"),onConfirm:e=>{e.tryConsumeResource("ENHANCED_VOID_REAPING"),e.setTimedResource("ENHANCED_CROSS_REAPING",1),e.resources.get("LEMURE_SHROUD").consume(1),e.resources.get("VOID_SHROUD").gain(1),e.resources.get("LEMURE_SHROUD").availableAmount()===0&&e.exitEnshroud()}});Ca("CROSS_REAPING",80,{startOnHotbar:!1,potency:[["NEVER",460],["MELEE_MASTERY_III_RPR",540]],aspect:Ie.Physical,recastTime:1.5,applicationDelay:.53,highlightIf:e=>e.resources.get("LEMURE_SHROUD").availableAmount()>1&&!e.hasResourceAvailable("ENHANCED_VOID_REAPING"),validateAttempt:e=>e.hasResourceAvailable("LEMURE_SHROUD"),onConfirm:e=>{e.tryConsumeResource("ENHANCED_CROSS_REAPING"),e.setTimedResource("ENHANCED_VOID_REAPING",1),e.resources.get("LEMURE_SHROUD").consume(1),e.resources.get("VOID_SHROUD").gain(1),e.resources.get("LEMURE_SHROUD").availableAmount()===0&&e.exitEnshroud()}});Ye("RPR","ENSHROUD",80,"cd_ENSHROUD",{rscType:"ENSHROUDED",highlightIf:e=>e.hasResourceAvailable("SHROUD",50)||e.hasResourceAvailable("IDEAL_HOST"),applicationDelay:0,startOnHotbar:!0,cooldown:5,validateAttempt:e=>e.hasResourceAvailable("SHROUD",50)||e.hasResourceAvailable("IDEAL_HOST"),onConfirm:Le(Uf("ENSHROUD"),e=>e.enterEnshroud())});Ca("PERFECTIO",100,{potency:1300,aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:.2,applicationDelay:1.29,startOnHotbar:!1,highlightIf:e=>e.hasResourceAvailable("PERFECTIO_PARATA"),validateAttempt:e=>e.hasResourceAvailable("PERFECTIO_PARATA"),onConfirm:e=>{e.resources.get("PERFECTIO_PARATA").consume(1)}});kn("REGRESS",74,"cd_BLOOD_STALK",{cooldown:1,animationLock:Wt,startOnHotbar:!1,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("THRESHOLD"),onConfirm:e=>e.resources.get("THRESHOLD").consume(1)});kn("HELLS_INGRESS",20,"cd_INGRESS_EGRESS",{replaceIf:[{condition:e=>e.hasResourceAvailable("THRESHOLD")&&e.hasResourceAvailable("HELLS_INGRESS_USED"),newSkill:"REGRESS"}],cooldown:20,animationLock:Wt,onConfirm:e=>{e.resources.get("HELLS_INGRESS_USED").gain(1),e.hasTraitUnlocked("HELLSGATE")&&e.setTimedResource("THRESHOLD",1),e.setTimedResource("ENHANCED_HARPE",1)}});kn("HELLS_EGRESS",20,"cd_INGRESS_EGRESS",{replaceIf:[{condition:e=>e.hasResourceAvailable("THRESHOLD")&&!e.hasResourceAvailable("HELLS_INGRESS_USED"),newSkill:"REGRESS"}],cooldown:20,animationLock:Wt,onConfirm:e=>{e.tryConsumeResource("HELLS_INGRESS_USED"),e.hasTraitUnlocked("HELLSGATE")&&e.setTimedResource("THRESHOLD",1),e.setTimedResource("ENHANCED_HARPE",1)}});kn("ARCANE_CREST",40,"cd_ARCANE_CREST",{replaceIf:[{condition:e=>e.hasResourceAvailable("CREST_OF_TIME_BORROWED"),newSkill:"ARCANE_CREST_POP"}],cooldown:30,onConfirm:e=>e.setTimedResource("CREST_OF_TIME_BORROWED",1)});kn("ARCANE_CREST_POP",40,"cd_ARCANE_CREST_POP",{cooldown:1,animationLock:en,startOnHotbar:!1,onConfirm:e=>{e.tryConsumeResource("CREST_OF_TIME_BORROWED"),e.setTimedResource("CREST_OF_TIME_RETURNED",1)},validateAttempt:e=>e.hasResourceAvailable("CREST_OF_TIME_BORROWED"),highlightIf:e=>e.hasResourceAvailable("CREST_OF_TIME_BORROWED")});Ca("WHORL_OF_DEATH",35,{potency:100,aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:1.15,onConfirm:(e,t)=>t.targetList.forEach(n=>e.refreshDeathsDesign(n))});Ca("SPINNING_SCYTHE",25,{potency:140,aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.62});Ca("NIGHTMARE_SCYTHE",45,{potency:120,combo:{potency:180,resource:"RPR_AOE_COMBO",resourceValue:1},aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.8,highlightIf:e=>e.hasResourceExactly("RPR_AOE_COMBO",1)});Ca("SOUL_SCYTHE",65,{potency:180,aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.66,secondaryCooldown:{cdName:"cd_SOUL_SLICE",cooldown:30,maxCharges:2}});Ca("EXECUTIONERS_GUILLOTINE",96,{startOnHotbar:!1,potency:260,aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.53,highlightIf:e=>e.hasResourceAvailable("EXECUTIONER"),validateAttempt:GT});Ca("GRIM_REAPING",80,{startOnHotbar:!1,potency:200,recastTime:1.5,falloff:0,applicationDelay:.8,highlightIf:e=>e.resources.get("LEMURE_SHROUD").availableAmount()>1,validateAttempt:e=>e.hasResourceAvailable("LEMURE_SHROUD"),onConfirm:e=>{e.resources.get("LEMURE_SHROUD").consume(1),e.resources.get("VOID_SHROUD").gain(1),e.resources.get("LEMURE_SHROUD").availableAmount()===0&&e.exitEnshroud()},aspect:Ie.Physical});kn("LEMURES_SCYTHE",86,"cd_LEMURES_SLICE",{isPhysical:!0,potency:100,falloff:0,applicationDelay:.66,cooldown:1,startOnHotbar:!1,validateAttempt:e=>e.hasResourceAvailable("VOID_SHROUD",2),highlightIf:e=>e.hasResourceAvailable("VOID_SHROUD",2),onConfirm:e=>{e.resources.get("VOID_SHROUD").consume(2)}});Ca("GUILLOTINE",70,{replaceIf:[{newSkill:"GRIM_REAPING",condition:e=>e.hasResourceAvailable("ENSHROUDED")},{newSkill:"EXECUTIONERS_GUILLOTINE",condition:e=>e.resources.get("EXECUTIONER").available(1)}],potency:200,aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.49,highlightIf:e=>e.hasResourceAvailable("SOUL_REAVER"),validateAttempt:PT});kn("GAIN_SOUL_GAUGE",50,"cd_GAIN_SOUL_GAUGE",{applicationDelay:0,animationLock:en,cooldown:.01,onConfirm:e=>e.resources.get("SOUL").gain(10)});Object.keys(qR).forEach(e=>zt(e,`SAM/${Pe[e].name}.png`));class aB extends Xt{jobSpecificOtherTargetedBuffViewProps(){return this.makeTargetedTimers("HIGANBANA_DOT")}jobSpecificSelfTargetedBuffViewProps(){return Object.keys(qR).filter(t=>t!=="HIGANBANA_DOT").map(t=>this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){const n=this.state.resources,o=n.get("KENKI").availableAmount(),s=n.get("MEDITATION").availableAmount();return[{kind:"sen",name:N({en:"sen",zh:""}),hasSetsu:this.state.hasResourceAvailable("SETSU"),hasGetsu:this.state.hasResourceAvailable("GETSU"),hasKa:this.state.hasResourceAvailable("KA_SEN"),setsuColor:t.sam.setsu,getsuColor:t.sam.getsu,kaColor:t.sam.kaSen},{kind:"bar",name:N({en:"kenki",zh:""}),color:t.sam.kenki,progress:o/100,valueString:o.toFixed(0)},{kind:"counter",name:N({en:"meditation",zh:""}),color:t.sam.meditation,currentStacks:s,maxStacks:3}]}}const ba=(e,t,n)=>{Ve("SAM",e,t,n??{})};ba("MEIKYO_SHISUI",3,{timeout:20,warnOnTimeout:!0});ba("FUGETSU",1,{timeout:40});ba("FUKA",1,{timeout:40});ba("ZANSHIN_READY",1,{timeout:30});ba("TENDO",1,{timeout:30,warnOnTimeout:!0});ba("OGI_READY",1,{timeout:30});ba("TSUBAME_GAESHI_READY",1,{timeout:30,warnOnTimeout:!0});ba("THIRD_EYE",1,{timeout:4});ba("TENGENTSU",1,{timeout:4});ba("TENGENTSUS_FORESIGHT",1,{timeout:9});ba("ENHANCED_ENPI",1,{timeout:15});ba("MEDITATE",1,{timeout:15.2});ba("KENKI",100,{warnOnOvercap:!0});ba("SETSU",1,{warnOnOvercap:!0});ba("GETSU",1,{warnOnOvercap:!0});ba("KA_SEN",1,{warnOnOvercap:!0});ba("MEDITATION",3,{warnOnOvercap:!0});ba("HIGANBANA_DOT",1,{timeout:60});const lO=["SAM_TWO_READY","SAM_TWO_AOE_READY","GEKKO_READY","KASHA_READY","KAESHI_OGI_READY"];lO.forEach(e=>ba(e,1,{timeout:30}));ba("KAESHI_TRACKER",4,{timeout:30});class nB extends qt{constructor(t){super(t);const n=this.hasTraitUnlocked("ENHANCED_HISSATSU")?60:120,o=this.hasTraitUnlocked("ENHANCED_MEIKYO_SHISUI")?2:1;[new Ue("cd_MEIKYO_SHISUI",55,o,o),new Ue("cd_SENEI_GUREN",n,1,1)].forEach(s=>this.cooldowns.set(s)),super.registerRecurringEvents([{reportName:Ke("HIGANBANA_DOT"),groupedEffects:[{effectName:"HIGANBANA_DOT",appliedBy:["HIGANBANA"]}]}])}get statusPropsGenerator(){return new aB(this)}inherentSpeedModifier(){return this.hasTraitUnlocked("ENHANCED_FUGETSU_AND_FUKA")?13:10}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("ENHANCED_ENPI")&&n.name==="ENPI"&&t.addBuff(k.EnhancedEnpi),this.hasResourceAvailable("FUGETSU")&&t.addBuff(k.Fugetsu)}jobSpecificAddSpeedBuffCovers(t,n){this.hasResourceAvailable("FUKA")&&n.cdName==="cd_GCD"&&t.addBuff(k.Fuka)}hitCombo(t){return super.hitCombo(t)||this.hasResourceAvailable("MEIKYO_SHISUI")}cancelChanneledSkills(){const t=this.findNextQueuedEventByTag(dn.MeditateTick);t&&(t.canceled=!0),this.tryConsumeResource("MEDITATE")}getFugetsuModifier(){return this.hasTraitUnlocked("ENHANCED_FUGETSU_AND_FUKA")?J.FugetsuEnhanced:J.FugetsuBase}getFukaModifier(){return this.hasResourceAvailable("FUKA")?this.inherentSpeedModifier():0}checkCombo(t){return this.hasResourceAvailable(t)||this.hasResourceAvailable("MEIKYO_SHISUI")}refreshBuff(t,n){this.addEvent(new Oe(`gain ${t}`,n,()=>{this.gainStatus(t)}))}progressActiveCombo(t){lO.forEach(n=>{t.includes(n)||this.setComboState(n,0)}),t.forEach(n=>this.setComboState(n,1))}tryConsumeMeikyo(){this.tryConsumeResource("MEIKYO_SHISUI")}gainKenki(t){this.resources.get("KENKI").gain(t)}gainMeditation(){this.resources.get("MEDITATION").gain(1)}gainSen(t){this.resources.get(t).gain(1)}countSen(){return["GETSU","SETSU","KA_SEN"].reduce((t,n)=>this.hasResourceAvailable(n)?t+1:t,0)}consumeAllSen(){["GETSU","SETSU","KA_SEN"].forEach(t=>this.tryConsumeResource(t))}startMeditateTimer(){const t=n=>{const o=new Oe("meditate tick",3,()=>{n<5&&(this.isInCombat()&&(I.reportMeditateTick(this.time,"+kenki/meditation"),this.resources.get("KENKI").gain(10),this.resources.get("MEDITATION").gain(1)),this.addEvent(t(n+1)))});return o.addTag(dn.MeditateTick),o};this.addEvent(t(0))}}const Pt=(e,t,n)=>{const o=c=>{const d=c.hasResourceAvailable("FUGETSU")?[c.getFugetsuModifier()]:[];return n.jobPotencyModifiers&&d.push(...n.jobPotencyModifiers(c)),d};let s=n.baseCastTime||0;return s&&(s=c=>c.hasTraitUnlocked("ENHANCED_IAIJUTSU")?n.baseCastTime||0:c.config.adjustedSksCastTime(1.8,c.getFukaModifier())),ia("SAM",e,t,{...n,castTime:s,recastTime:c=>c.config.adjustedSksGCD(n.baseRecastTime??2.5,c.getFukaModifier()),potency:n.basePotency,jobPotencyModifiers:o,isInstantFn:c=>!(n.baseCastTime&&n.baseCastTime>0)})},Zn=(e,t,n,o)=>(o.potency&&!o.jobPotencyModifiers&&(o.jobPotencyModifiers=s=>s.hasResourceAvailable("FUGETSU")?[s.getFugetsuModifier()]:[]),et("SAM",e,t,n,o));Pt("ENPI",15,{applicationDelay:.71,basePotency:100,onConfirm:e=>{e.hasResourceAvailable("ENHANCED_ENPI")&&e.tryConsumeResource("ENHANCED_ENPI"),e.gainKenki(10)},jobPotencyModifiers:e=>e.hasResourceAvailable("ENHANCED_ENPI")?[e.hasTraitUnlocked("WAY_OF_THE_SAMURAI_III")?J.YatenpiEnhanced:J.YatenpiBase]:[],highlightIf:e=>e.hasResourceAvailable("ENHANCED_ENPI"),startsAuto:!1});Pt("HAKAZE",1,{autoUpgrade:{trait:"HAKAZE_MASTERY",otherSkill:"GYOFU"},applicationDelay:.85,basePotency:200,onConfirm:e=>{e.tryConsumeMeikyo(),e.gainKenki(5),e.progressActiveCombo(["SAM_TWO_READY"])}});Pt("GYOFU",92,{autoDowngrade:{trait:"HAKAZE_MASTERY",otherSkill:"HAKAZE"},applicationDelay:.85,basePotency:240,onConfirm:e=>{e.tryConsumeMeikyo(),e.gainKenki(5),e.progressActiveCombo(["SAM_TWO_READY"])}});Pt("YUKIKAZE",50,{applicationDelay:.85,basePotency:[["NEVER",100],["WAY_OF_THE_SAMURAI_II",110],["WAY_OF_THE_SAMURAI_III",160]],combo:{potency:[["NEVER",280],["WAY_OF_THE_SAMURAI_II",290],["WAY_OF_THE_SAMURAI_III",340]],resource:"SAM_TWO_READY",resourceValue:1},onConfirm:e=>{e.checkCombo("SAM_TWO_READY")&&(e.gainKenki(15),e.gainSen("SETSU")),e.tryConsumeMeikyo(),e.progressActiveCombo([])},highlightIf:e=>e.checkCombo("SAM_TWO_READY")});Pt("JINPU",4,{applicationDelay:.62,basePotency:[["NEVER",120],["WAY_OF_THE_SAMURAI_III",140]],combo:{potency:[["NEVER",280],["WAY_OF_THE_SAMURAI_III",300]],resource:"SAM_TWO_READY",resourceValue:1},onConfirm:e=>{e.checkCombo("SAM_TWO_READY")?(e.gainKenki(5),e.refreshBuff("FUGETSU",.62),e.tryConsumeMeikyo(),e.progressActiveCombo(["GEKKO_READY"])):(e.tryConsumeMeikyo(),e.progressActiveCombo([]))},highlightIf:e=>e.checkCombo("SAM_TWO_READY")});Pt("GEKKO",30,{applicationDelay:.76,basePotency:[["NEVER",100],["WAY_OF_THE_SAMURAI_II",110],["WAY_OF_THE_SAMURAI_III",160]],combo:{potency:[["NEVER",310],["WAY_OF_THE_SAMURAI_II",320],["WAY_OF_THE_SAMURAI_III",370]],resource:"GEKKO_READY",resourceValue:1},positional:{potency:[["NEVER",150],["WAY_OF_THE_SAMURAI_II",160],["WAY_OF_THE_SAMURAI_III",210]],comboPotency:[["NEVER",360],["WAY_OF_THE_SAMURAI_II",370],["WAY_OF_THE_SAMURAI_III",420]],location:"rear"},onConfirm:e=>{e.checkCombo("GEKKO_READY")&&(e.gainKenki(10),e.gainSen("GETSU")),e.hasResourceAvailable("MEIKYO_SHISUI")&&e.refreshBuff("FUGETSU",.76),e.tryConsumeMeikyo(),e.progressActiveCombo([])},highlightIf:e=>e.checkCombo("GEKKO_READY")});Pt("SHIFU",18,{applicationDelay:.8,basePotency:[["NEVER",120],["WAY_OF_THE_SAMURAI_III",140]],combo:{potency:[["NEVER",280],["WAY_OF_THE_SAMURAI_III",300]],resource:"SAM_TWO_READY",resourceValue:1},onConfirm:e=>{e.checkCombo("SAM_TWO_READY")?(e.gainKenki(5),e.refreshBuff("FUKA",.8),e.tryConsumeMeikyo(),e.progressActiveCombo(["KASHA_READY"])):(e.tryConsumeMeikyo(),e.progressActiveCombo([]))},highlightIf:e=>e.checkCombo("SAM_TWO_READY")});Pt("KASHA",40,{applicationDelay:.62,basePotency:[["NEVER",100],["WAY_OF_THE_SAMURAI_II",110],["WAY_OF_THE_SAMURAI_III",160]],combo:{potency:[["NEVER",310],["WAY_OF_THE_SAMURAI_II",320],["WAY_OF_THE_SAMURAI_III",370]],resource:"KASHA_READY",resourceValue:1},positional:{potency:[["NEVER",150],["WAY_OF_THE_SAMURAI_II",160],["WAY_OF_THE_SAMURAI_III",210]],comboPotency:[["NEVER",360],["WAY_OF_THE_SAMURAI_II",370],["WAY_OF_THE_SAMURAI_III",420]],location:"flank"},onConfirm:e=>{e.checkCombo("KASHA_READY")&&(e.gainKenki(10),e.gainSen("KA_SEN")),e.hasResourceAvailable("MEIKYO_SHISUI")&&e.refreshBuff("FUKA",.62),e.tryConsumeMeikyo(),e.progressActiveCombo([])},highlightIf:e=>e.checkCombo("KASHA_READY")});Pt("FUGA",26,{autoUpgrade:{trait:"FUGA_MASTERY",otherSkill:"FUKO"},falloff:0,applicationDelay:.76,basePotency:90,onConfirm:e=>{e.gainKenki(5),e.progressActiveCombo(["SAM_TWO_AOE_READY"])}});Pt("FUKO",86,{autoDowngrade:{trait:"FUGA_MASTERY",otherSkill:"FUGA"},falloff:0,applicationDelay:.76,basePotency:100,onConfirm:e=>{e.gainKenki(10),e.progressActiveCombo(["SAM_TWO_AOE_READY"])}});Pt("MANGETSU",35,{falloff:0,applicationDelay:.62,basePotency:100,combo:{potency:120,resource:"SAM_TWO_AOE_READY",resourceValue:1},onConfirm:e=>{e.checkCombo("SAM_TWO_AOE_READY")&&(e.gainKenki(10),e.refreshBuff("FUGETSU",.62),e.gainSen("GETSU")),e.progressActiveCombo([])},highlightIf:e=>e.checkCombo("SAM_TWO_AOE_READY")});Pt("OKA",35,{falloff:0,applicationDelay:.62,basePotency:100,combo:{potency:120,resource:"SAM_TWO_AOE_READY",resourceValue:1},onConfirm:e=>{e.checkCombo("SAM_TWO_AOE_READY")&&(e.gainKenki(10),e.refreshBuff("FUKA",.62),e.gainSen("KA_SEN")),e.progressActiveCombo([])},highlightIf:e=>e.checkCombo("SAM_TWO_AOE_READY")});const sO={newSkill:"HIGANBANA",condition:e=>e.countSen()===1},rO={newSkill:"TENKA_GOKEN",condition:e=>!e.hasResourceAvailable("TENDO")&&e.countSen()===2},cO={newSkill:"TENDO_GOKEN",condition:e=>e.hasResourceAvailable("TENDO")&&e.countSen()===2},uO={newSkill:"MIDARE_SETSUGEKKA",condition:e=>!e.hasResourceAvailable("TENDO")&&e.countSen()===3},dO={newSkill:"TENDO_SETSUGEKKA",condition:e=>e.hasResourceAvailable("TENDO")&&e.countSen()===3},ec=[sO,rO,cO,uO,dO];Pt("IAIJUTSU",30,{replaceIf:ec,baseCastTime:1.3,basePotency:0,applicationDelay:0,validateAttempt:e=>!1});Pt("HIGANBANA",30,{startOnHotbar:!1,replaceIf:ec,baseCastTime:1.3,basePotency:200,applicationDelay:.62,validateAttempt:sO.condition,onConfirm:(e,t)=>{const n=[];e.hasResourceAvailable("FUGETSU")&&n.push(e.getFugetsuModifier());const o=e.hasTraitUnlocked("WAY_OF_THE_SAMURAI_III")?50:45;e.addDoTPotencies({node:t,effectName:"HIGANBANA_DOT",skillName:"HIGANBANA",tickPotency:o,speedStat:"sks",modifiers:n}),e.consumeAllSen(),e.gainMeditation()},onApplication:(e,t)=>e.applyDoT("HIGANBANA_DOT",t)});const Pf=e=>t=>{t.consumeAllSen(),t.gainStatus("KAESHI_TRACKER",e),t.gainMeditation(),t.gainStatus("TSUBAME_GAESHI_READY"),t.tryConsumeResource("TENDO")};Pt("TENKA_GOKEN",30,{startOnHotbar:!1,replaceIf:ec,baseCastTime:1.3,basePotency:300,falloff:0,applicationDelay:.62,validateAttempt:rO.condition,onConfirm:Pf(1)});Pt("TENDO_GOKEN",100,{startOnHotbar:!1,replaceIf:ec,baseCastTime:1.3,basePotency:410,falloff:0,applicationDelay:.36,validateAttempt:cO.condition,onConfirm:Pf(2)});Pt("MIDARE_SETSUGEKKA",30,{startOnHotbar:!1,replaceIf:ec,baseCastTime:1.3,basePotency:[["NEVER",620],["WAY_OF_THE_SAMURAI_III",640]],applicationDelay:.62,jobPotencyModifiers:e=>[J.AutoCrit],validateAttempt:uO.condition,onConfirm:Pf(3)});Pt("TENDO_SETSUGEKKA",100,{startOnHotbar:!1,replaceIf:ec,baseCastTime:1.3,basePotency:1100,applicationDelay:1.03,jobPotencyModifiers:e=>[J.AutoCrit],validateAttempt:dO.condition,onConfirm:Pf(4)});const TR={newSkill:"KAESHI_GOKEN",condition:e=>e.hasResourceExactly("KAESHI_TRACKER",1)},SR={newSkill:"TENDO_KAESHI_GOKEN",condition:e=>e.hasResourceExactly("KAESHI_TRACKER",2)},gR={newSkill:"KAESHI_SETSUGEKKA",condition:e=>e.hasResourceExactly("KAESHI_TRACKER",3)},IR={newSkill:"TENDO_KAESHI_SETSUGEKKA",condition:e=>e.hasResourceExactly("KAESHI_TRACKER",4)},vu=[TR,SR,gR,IR];Pt("TSUBAME_GAESHI",74,{replaceIf:vu,basePotency:0,applicationDelay:0,validateAttempt:e=>!1});const Gf=e=>{e.tryConsumeResource("KAESHI_TRACKER",!0),e.tryConsumeResource("TSUBAME_GAESHI_READY"),e.tryConsumeResource("KAESHI_OGI_READY")};Pt("KAESHI_GOKEN",74,{startOnHotbar:!1,replaceIf:vu,basePotency:300,falloff:0,applicationDelay:.62,validateAttempt:TR.condition,onConfirm:Gf,highlightIf:TR.condition});Pt("TENDO_KAESHI_GOKEN",100,{startOnHotbar:!1,replaceIf:vu,basePotency:410,falloff:0,applicationDelay:.36,validateAttempt:SR.condition,onConfirm:Gf,highlightIf:SR.condition});Pt("KAESHI_SETSUGEKKA",74,{startOnHotbar:!1,replaceIf:vu,basePotency:[["NEVER",620],["WAY_OF_THE_SAMURAI_III",640]],applicationDelay:.62,jobPotencyModifiers:e=>[J.AutoCrit],validateAttempt:gR.condition,onConfirm:Gf,highlightIf:gR.condition});Pt("TENDO_KAESHI_SETSUGEKKA",74,{startOnHotbar:!1,replaceIf:vu,basePotency:1100,applicationDelay:1.03,jobPotencyModifiers:e=>[J.AutoCrit],validateAttempt:IR.condition,onConfirm:Gf,highlightIf:IR.condition});Pt("OGI_NAMIKIRI",90,{replaceIf:[{newSkill:"KAESHI_NAMIKIRI",condition:e=>e.hasResourceAvailable("KAESHI_OGI_READY")}],falloff:.4,applicationDelay:.49,basePotency:[["NEVER",860],["WAY_OF_THE_SAMURAI_III",1e3]],baseCastTime:1.3,jobPotencyModifiers:e=>[J.AutoCrit],validateAttempt:e=>e.hasResourceAvailable("OGI_READY"),onConfirm:e=>{e.tryConsumeResource("OGI_READY"),e.gainMeditation(),e.gainStatus("KAESHI_OGI_READY")},highlightIf:e=>e.hasResourceAvailable("OGI_READY")});Pt("KAESHI_NAMIKIRI",90,{startOnHotbar:!1,falloff:.4,applicationDelay:.49,basePotency:[["NEVER",860],["WAY_OF_THE_SAMURAI_III",1e3]],jobPotencyModifiers:e=>[J.AutoCrit],validateAttempt:e=>e.hasResourceAvailable("KAESHI_OGI_READY"),onConfirm:e=>e.tryConsumeResource("KAESHI_OGI_READY"),highlightIf:e=>e.hasResourceAvailable("KAESHI_OGI_READY")});Zn("MEIKYO_SHISUI",50,"cd_MEIKYO_SHISUI",{cooldown:55,maxCharges:2,onConfirm:e=>{e.gainStatus("MEIKYO_SHISUI",3),e.hasTraitUnlocked("ENHANCED_MEIKYO_SHISUI_II")&&e.gainStatus("TENDO")}});Zn("IKISHOTEN",68,"cd_IKISHOTEN",{replaceIf:[{newSkill:"ZANSHIN",condition:e=>e.hasResourceAvailable("ZANSHIN_READY")}],cooldown:120,requiresCombat:!0,onConfirm:e=>{e.gainKenki(50),e.hasTraitUnlocked("ENHANCED_IKISHOTEN")&&e.gainStatus("OGI_READY"),e.hasTraitUnlocked("ENHANCED_IKISHOTEN_II")&&e.gainStatus("ZANSHIN_READY")}});Zn("HISSATSU_SHINTEN",52,"cd_SHINTEN",{cooldown:1,applicationDelay:.62,potency:250,validateAttempt:e=>e.resources.get("KENKI").available(25),onConfirm:e=>e.resources.get("KENKI").consume(25),highlightIf:e=>e.resources.get("KENKI").available(25)});Zn("HISSATSU_KYUTEN",62,"cd_KYUTEN",{cooldown:1,applicationDelay:.62,potency:100,falloff:0,validateAttempt:e=>e.resources.get("KENKI").available(25),onConfirm:e=>e.resources.get("KENKI").consume(25),highlightIf:e=>e.resources.get("KENKI").available(25)});Zn("HISSATSU_GYOTEN",54,"cd_GYOTEN",{cooldown:5,applicationDelay:.49,animationLock:Wt,potency:100,validateAttempt:e=>e.resources.get("KENKI").available(10),onConfirm:e=>e.resources.get("KENKI").consume(10),highlightIf:e=>e.resources.get("KENKI").available(10)});Zn("HISSATSU_YATEN",56,"cd_YATEN",{cooldown:10,applicationDelay:.45,animationLock:Wt,potency:100,validateAttempt:e=>e.resources.get("KENKI").available(10),onConfirm:e=>{e.resources.get("KENKI").consume(10),e.gainStatus("ENHANCED_ENPI")},highlightIf:e=>e.resources.get("KENKI").available(10)});Zn("HISSATSU_SENEI",72,"cd_SENEI_GUREN",{cooldown:60,applicationDelay:.67,potency:800,validateAttempt:e=>e.resources.get("KENKI").available(25),onConfirm:e=>e.resources.get("KENKI").consume(25),highlightIf:e=>e.resources.get("KENKI").available(25)});Zn("HISSATSU_GUREN",70,"cd_SENEI_GUREN",{cooldown:60,applicationDelay:.62,potency:400,falloff:0,validateAttempt:e=>e.resources.get("KENKI").available(25),onConfirm:e=>e.resources.get("KENKI").consume(25),highlightIf:e=>e.resources.get("KENKI").available(25)});Zn("HAGAKURE",68,"cd_HAGAKURE",{cooldown:5,validateAttempt:e=>e.countSen()>0,onConfirm:e=>{e.gainKenki(e.countSen()*10),e.consumeAllSen()},highlightIf:e=>e.countSen()===3});Zn("SHOHA",80,"cd_SHOHA",{cooldown:15,potency:[["NEVER",560],["WAY_OF_THE_SAMURAI_III",640]],falloff:.4,applicationDelay:.58,validateAttempt:e=>e.resources.get("MEDITATION").available(3),onConfirm:e=>e.tryConsumeResource("MEDITATION",!0),highlightIf:e=>e.resources.get("MEDITATION").available(3)});Ye("SAM","THIRD_EYE",6,"cd_THIRD_EYE",{rscType:"THIRD_EYE",autoUpgrade:{trait:"THIRD_EYE_MASTERY",otherSkill:"TENGENTSU"},replaceIf:[{newSkill:"THIRD_EYE_POP",condition:e=>e.hasResourceAvailable("THIRD_EYE")}],cooldown:15,applicationDelay:0});Ye("SAM","TENGENTSU",82,"cd_THIRD_EYE",{rscType:"TENGENTSU",autoDowngrade:{trait:"THIRD_EYE_MASTERY",otherSkill:"THIRD_EYE"},replaceIf:[{newSkill:"TENGENTSU_POP",condition:e=>e.hasResourceAvailable("TENGENTSU")}],cooldown:15,applicationDelay:0});Zn("THIRD_EYE_POP",6,"cd_THIRD_EYE_POP",{startOnHotbar:!1,applicationDelay:0,animationLock:en,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("THIRD_EYE"),onConfirm:e=>{e.tryConsumeResource("THIRD_EYE"),e.gainKenki(10)},highlightIf:e=>e.hasResourceAvailable("THIRD_EYE")});Zn("TENGENTSU_POP",82,"cd_THIRD_EYE_POP",{startOnHotbar:!1,applicationDelay:0,animationLock:en,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("TENGENTSU"),onConfirm:e=>{e.tryConsumeResource("TENGENTSU"),e.gainStatus("TENGENTSUS_FORESIGHT"),e.gainKenki(10)},highlightIf:e=>e.hasResourceAvailable("TENGENTSU")});Zn("ZANSHIN",96,"cd_ZANSHIN",{startOnHotbar:!1,cooldown:1,falloff:.4,applicationDelay:1.03,potency:940,validateAttempt:e=>e.hasResourceAvailable("ZANSHIN_READY")&&e.resources.get("KENKI").available(50),onConfirm:e=>{e.resources.get("KENKI").consume(50),e.tryConsumeResource("ZANSHIN_READY")},highlightIf:e=>e.hasResourceAvailable("ZANSHIN_READY")});Ye("SAM","MEDITATE",60,"cd_MEDITATE",{rscType:"MEDITATE",cooldown:60,applicationDelay:.62,validateAttempt:e=>e.cooldowns.get("cd_GCD").stacksAvailable()>0,onConfirm:e=>{const t=e.config.adjustedSksGCD(2.5,e.getFukaModifier());e.cooldowns.get("cd_GCD").useStackWithRecast(e.config.getAfterTaxGCD(t))},onApplication:e=>e.startMeditateTimer()});Object.keys($R).forEach(e=>zt(e,`SMN/${Pe[e].name}.png`));class iB extends Xt{jobSpecificSelfTargetedBuffViewProps(){const t=["AETHERFLOW","IFRITS_FAVOR","TITANS_FAVOR","GARUDAS_FAVOR","CRIMSON_STRIKE_READY"];return[...Object.keys($R).map(n=>t.includes(n)?this.makeCommonTimerless(n):this.makeCommonTimer(n))]}jobSpecificResourceViewProps(t){const n=this.state.resources,o=Math.max(n.timeTillReady("FIRE_ATTUNEMENT"),n.timeTillReady("EARTH_ATTUNEMENT"),n.timeTillReady("WIND_ATTUNEMENT")),s=n.get("ACTIVE_DEMI").availableAmount(),c=n.timeTillReady("ACTIVE_DEMI");n.get("RUBY_ARCANUM").available(1),n.get("TOPAZ_ARCANUM").available(1),n.get("EMERALD_ARCANUM").available(1);const d=s===_R.BAHAMUT?t.smn.bahamut:s===_R.PHOENIX?t.smn.phoenix:t.smn.solar,f=n.get("FIRE_ATTUNEMENT").available(1)?t.smn.ruby:n.get("EARTH_ATTUNEMENT").available(1)?t.smn.topaz:t.smn.emerald,h=this.state.cooldowns.get("cd_SUMMON_LOCKOUT"),m=h.timeTillNextStackAvailable();return[{kind:"counter",name:N({en:"aetherflow",zh:""}),color:t.smn.aetherflow,currentStacks:n.get("AETHERFLOW").availableAmount(),maxStacks:2},{kind:"bar",name:N({en:"demi summon",zh:""}),color:d,progress:c===0?0:1-c/15,valueString:c.toFixed(3)},{kind:"attunement",aetherName:N({en:"aether",zh:""}),attunementName:N({en:"attunement",zh:""}),ruby:n.get("RUBY_ARCANUM").available(1),topaz:n.get("TOPAZ_ARCANUM").available(1),emerald:n.get("EMERALD_ARCANUM").available(1),attunementCount:Math.max(n.get("FIRE_ATTUNEMENT").availableAmount(),n.get("EARTH_ATTUNEMENT").availableAmount(),n.get("WIND_ATTUNEMENT").availableAmount()),timeRemaining:o,rubyColor:t.smn.ruby,topazColor:t.smn.topaz,emeraldColor:t.smn.emerald},{kind:"bar",name:N({en:"summon lock",zh:""}),color:f,progress:m>0?1-h.timeTillNextStackAvailable()/h.currentStackCd():0,valueString:m.toFixed(3)}]}}const Qt=(e,t,n)=>{Ve("SMN",e,t,n??{})};var _R=(e=>(e[e.NONE=0]="NONE",e[e.SOLAR=1]="SOLAR",e[e.BAHAMUT=2]="BAHAMUT",e[e.PHOENIX=3]="PHOENIX",e))(_R||{});const hO=15;Qt("AETHERFLOW",2,{warnOnOvercap:!0});Qt("RUBY_ARCANUM",1);Qt("TOPAZ_ARCANUM",1);Qt("EMERALD_ARCANUM",1);Qt("FIRE_ATTUNEMENT",2,{timeout:30});Qt("EARTH_ATTUNEMENT",4,{timeout:30});Qt("WIND_ATTUNEMENT",4,{timeout:30});Qt("CRIMSON_STRIKE_READY",1);Qt("EVERLASTING_FLIGHT",1,{timeout:21});Qt("FURTHER_RUIN",1,{timeout:60});Qt("GARUDAS_FAVOR",1);Qt("IFRITS_FAVOR",1);Qt("TITANS_FAVOR",1);Qt("RADIANT_AEGIS",1,{timeout:30});Qt("REFULGENT_LUX",1,{timeout:30});Qt("REKINDLE",1,{timeout:30});Qt("UNDYING_FLAME",1,{timeout:15});Qt("RUBYS_GLIMMER",1,{timeout:30,warnOnTimeout:!0});Qt("SEARING_LIGHT",1,{timeout:20});Qt("SLIPSTREAM",1,{timeout:15});Qt("ACTIVE_DEMI",3,{timeout:hO});Qt("NEXT_DEMI_CYCLE",3);Qt("DEMI_AUTO",4);const gN=3.163,oB=new Map([["SUMMON_IFRIT_II",2.1],["SUMMON_GARUDA_II",2.1],["SUMMON_TITAN_II",2.1],["SUMMON_IFRIT",2.46],["SUMMON_GARUDA",2.1],["SUMMON_TITAN",2.46]]),IN=new Map([["SUMMON_IFRIT_II",1.96],["SUMMON_GARUDA_II",1.29],["SUMMON_TITAN_II",1.96],["SUMMON_IFRIT",.936],["SUMMON_GARUDA",.8],["SUMMON_TITAN",.8],["ENKINDLE_BAHAMUT",.894],["ENKINDLE_PHOENIX",1.026],["ENKINDLE_SOLAR_BAHAMUT",.846]]),lB=new Map([["SUMMON_IFRIT_II",6.29],["SUMMON_GARUDA_II",6.29],["SUMMON_TITAN_II",6.29],["SUMMON_IFRIT",4.6],["SUMMON_GARUDA",4.3],["SUMMON_TITAN",4.6]]);class sB extends qt{constructor(t){super(t);const n=this.hasTraitUnlocked("ENHANCED_SWIFTCAST")?40:60;this.cooldowns.set(new Ue("cd_SWIFTCAST",n,1,1));const o=this.hasTraitUnlocked("ENHANCED_RADIANT_AEGIS")?2:1;this.cooldowns.set(new Ue("cd_RADIANT_AEGIS",60,o,o)),this.cooldowns.set(new Ue("cd_DEMI_SUMMON",this.config.adjustedGCD(60),1,1)),this.cooldowns.set(new Ue("cd_SUMMON_LOCKOUT",5,1,1)),this.registerRecurringEvents([{groupedEffects:[{effectName:"SLIPSTREAM",appliedBy:["SLIPSTREAM"],isGroundTargeted:!0}]}],["SUMMON_BAHAMUT","SUMMON_PHOENIX","SUMMON_SOLAR_BAHAMUT"])}get statusPropsGenerator(){return new iB(this)}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("SEARING_LIGHT")&&t.addBuff(k.SearingLight)}get activeDemi(){return this.resources.get("ACTIVE_DEMI").availableAmount()}get nextDemi(){const t=this.resources.get("NEXT_DEMI_CYCLE").availableAmount();return this.hasTraitUnlocked("ENHANCED_SUMMON_BAHAMUT_II")?t===1?2:t===3?3:1:this.hasTraitUnlocked("ENHANCED_SUMMON_BAHAMUT")?t%2===0?2:3:2}get hasActivePet(){return this.activeDemi!==0||this.cooldowns.get("cd_SUMMON_LOCKOUT").stacksAvailable()===0}snapSearingAndTincture(t,n){this.hasResourceAvailable("SEARING_LIGHT")&&n.addModifiers(J.SearingLight),this.hasResourceAvailable("TINCTURE")&&(n.addModifiers(J.Tincture),t.addBuff(k.Tincture))}makePetPotency(t,n,o,s,c){const d=new ta({config:this.config,sourceTime:o,sourceSkill:n,aspect:Ie.Other,basePotency:s,snapshotTime:this.getDisplayTime(),description:"",targetList:t,falloff:c});return d.addModifiers(J.SmnPet),d}handleDemiAuto(){if(!this.hasResourceAvailable("DEMI_AUTO"))return;const t=4-this.resources.get("DEMI_AUTO").availableAmount();if(t<0)return;const n=this.resources.get("DEMI_AUTO").node;if(n!==void 0){const o=n.getDotPotencies("DEMI_AUTO")[t];this.snapSearingAndTincture(n,o),o.snapshotTime=this.getDisplayTime(),I.resolvePotency(o)}this.tryConsumeResource("DEMI_AUTO"),this.addEvent(new Oe("demi auto",gN,()=>this.handleDemiAuto()))}startPetAutos(t,n){const o=this.resources.get("DEMI_AUTO"),s=this.activeDemi===1?160:150;o.gain(4),o.node=t;for(let c=0;c<4;c++)t.addDoTPotency(this.makePetPotency(t.targetList,n,this.getDisplayTime(),s),"DEMI_AUTO");this.addEvent(new Oe("first demi auto",gN,()=>this.handleDemiAuto()))}queuePetDamageEvent(t,n,o,s,c,d){const f=this.getDisplayTime();this.addEvent(new Oe(o+" pet snapshot",c,()=>{const h=this.makePetPotency(t.targetList,o,f,s,.6);t.addPotency(h),this.snapSearingAndTincture(t,h),this.jobSpecificAddDamageBuffCovers(t,Wi("SMN",n)),this.addEvent(new Oe(o+" application",d,()=>I.resolvePotency(h)))}))}queueEnkindle(t,n){let o,s;n==="ENKINDLE_BAHAMUT"?(o="AKH_MORN",s=1300):n==="ENKINDLE_PHOENIX"?(o="REVELATION",s=1300):(o="EXODUS",s=1500);const c=this.resources.get("ACTIVE_DEMI").pendingChange;console.assert(c),c&&c.timeTillEvent<2.5&&I.reportWarning({kind:"custom",en:"enkindle used near end of demi window may ghost"}),this.queuePetDamageEvent(t,n,o,s,0,IN.get(n))}queuePrimalSummon(t,n){let o=600;this.hasTraitUnlocked("ARCANE_MASTERY")?o=800:this.hasTraitUnlocked("ENKINDLE_II")&&(o=750);let s;n.includes("IFRIT")?s="INFERNO":n.includes("TITAN")?s="EARTHEN_FURY":s="AERIAL_BLAST",this.queuePetDamageEvent(t,n,s,o,oB.get(n),IN.get(n));const c=lB.get(n);this.cooldowns.get("cd_SUMMON_LOCKOUT").useStackWithRecast(c)}}const tt=(e,t,n)=>{const o=n.baseCastTime??0,s=n.baseRecastTime??2.5,c=o>0?Le(d=>d.tryConsumeResource("SWIFTCAST"),n.onConfirm):n.onConfirm;return Xn("SMN",e,t,{...n,castTime:d=>d.config.adjustedCastTime(o),recastTime:d=>s<=1.5?s:d.config.adjustedGCD(s),potency:n.basePotency,jobPotencyModifiers:d=>{const f=[];return n.isPetAttack&&f.push(J.SmnPet),d.hasResourceAvailable("SEARING_LIGHT")&&f.push(J.SearingLight),f},isInstantFn:d=>d.hasResourceAvailable("SWIFTCAST")||o===0,onConfirm:c})},io=(e,t,n,o)=>et("SMN",e,t,n,{...o,jobPotencyModifiers:s=>s.hasResourceAvailable("SEARING_LIGHT")?[J.SearingLight]:[]}),As=[{newSkill:"RUIN_III",condition:e=>e.activeDemi===0},{newSkill:"ASTRAL_IMPULSE",condition:e=>e.activeDemi===2},{newSkill:"FOUNTAIN_OF_FIRE",condition:e=>e.activeDemi===3},{newSkill:"UMBRAL_IMPULSE",condition:e=>e.activeDemi===1}];tt("RUIN_III",54,{basePotency:[["NEVER",300],["RUIN_MASTERY_IV",310],["ARCANE_MASTERY",400]],baseCastTime:1.5,manaCost:300,replaceIf:As,applicationDelay:.8});tt("ASTRAL_IMPULSE",58,{basePotency:[["NEVER",440],["ARCANE_MASTERY",500]],manaCost:300,replaceIf:As,applicationDelay:.67,validateAttempt:As[1].condition,startOnHotbar:!1});tt("FOUNTAIN_OF_FIRE",80,{basePotency:[["NEVER",540],["ARCANE_MASTERY",580]],manaCost:300,replaceIf:As,applicationDelay:1.07,validateAttempt:As[2].condition,startOnHotbar:!1});tt("UMBRAL_IMPULSE",100,{basePotency:640,manaCost:300,replaceIf:As,applicationDelay:.8,validateAttempt:As[3].condition,startOnHotbar:!1});const pl=[{newSkill:"OUTBURST",condition:e=>e.activeDemi===0},{newSkill:"ASTRAL_FLARE",condition:e=>e.activeDemi===2},{newSkill:"BRAND_OF_PURGATORY",condition:e=>e.activeDemi===3},{newSkill:"UMBRAL_FLARE",condition:e=>e.activeDemi===1}];tt("OUTBURST",26,{autoUpgrade:{trait:"OUTBURST_MASTERY",otherSkill:"TRI_DISASTER"},basePotency:100,baseCastTime:1.5,manaCost:300,replaceIf:pl,applicationDelay:.8,falloff:0});tt("TRI_DISASTER",74,{autoDowngrade:{trait:"OUTBURST_MASTERY",otherSkill:"OUTBURST"},basePotency:120,baseCastTime:1.5,manaCost:300,replaceIf:pl,applicationDelay:.8,falloff:0});tt("ASTRAL_FLARE",58,{basePotency:180,manaCost:300,replaceIf:pl,applicationDelay:.54,validateAttempt:pl[1].condition,falloff:0,startOnHotbar:!1});tt("BRAND_OF_PURGATORY",80,{basePotency:240,manaCost:300,replaceIf:pl,applicationDelay:.8,validateAttempt:pl[2].condition,falloff:0,startOnHotbar:!1});tt("UMBRAL_FLARE",100,{basePotency:300,manaCost:300,replaceIf:pl,applicationDelay:.53,validateAttempt:pl[2].condition,falloff:0,startOnHotbar:!1});const rB=[{newSkill:"RUBY_RUIN_III",condition:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT")},{newSkill:"TOPAZ_RUIN_III",condition:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT")},{newSkill:"EMERALD_RUIN_III",condition:e=>e.hasResourceAvailable("WIND_ATTUNEMENT")}];tt("GEMSHINE",6,{replaceIf:rB,applicationDelay:0,validateAttempt:e=>!1});tt("RUBY_RUIN_III",54,{autoUpgrade:{trait:"RUIN_MASTERY_III",otherSkill:"RUBY_RITE"},basePotency:410,baseCastTime:2.8,baseRecastTime:3,applicationDelay:.62,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("FIRE_ATTUNEMENT"),startOnHotbar:!1});tt("TOPAZ_RUIN_III",54,{autoUpgrade:{trait:"RUIN_MASTERY_III",otherSkill:"TOPAZ_RITE"},basePotency:300,applicationDelay:.62,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("EARTH_ATTUNEMENT"),startOnHotbar:!1});tt("EMERALD_RUIN_III",54,{autoUpgrade:{trait:"RUIN_MASTERY_III",otherSkill:"EMERALD_RITE"},baseRecastTime:1.5,basePotency:180,applicationDelay:.62,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("WIND_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("WIND_ATTUNEMENT"),startOnHotbar:!1});tt("RUBY_RITE",72,{autoDowngrade:{trait:"RUIN_MASTERY_III",otherSkill:"RUBY_RITE"},basePotency:[["NEVER",480],["RUIN_MASTERY_IV",510],["ARCANE_MASTERY",580]],baseCastTime:2.8,baseRecastTime:3,applicationDelay:.62,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("FIRE_ATTUNEMENT"),startOnHotbar:!1});tt("TOPAZ_RITE",72,{autoDowngrade:{trait:"RUIN_MASTERY_III",otherSkill:"TOPAZ_RUIN_III"},basePotency:[["NEVER",320],["RUIN_MASTERY_IV",330],["ARCANE_MASTERY",340]],applicationDelay:.62,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT"),onConfirm:e=>{e.tryConsumeResource("EARTH_ATTUNEMENT"),e.gainStatus("TITANS_FAVOR")},startOnHotbar:!1});tt("EMERALD_RITE",72,{autoDowngrade:{trait:"RUIN_MASTERY_III",otherSkill:"EMERALD_RUIN_III"},baseRecastTime:1.5,basePotency:[["NEVER",220],["RUIN_MASTERY_IV",230],["ARCANE_MASTERY",280]],applicationDelay:.62,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("WIND_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("WIND_ATTUNEMENT"),startOnHotbar:!1});const cB=[{newSkill:"RUBY_OUTBURST",condition:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT")},{newSkill:"TOPAZ_OUTBURST",condition:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT")},{newSkill:"EMERALD_OUTBURST",condition:e=>e.hasResourceAvailable("WIND_ATTUNEMENT")}];tt("PRECIOUS_BRILLIANCE",26,{replaceIf:cB,applicationDelay:0,validateAttempt:e=>!1});tt("RUBY_OUTBURST",26,{autoUpgrade:{trait:"OUTBURST_MASTERY",otherSkill:"RUBY_DISASTER"},basePotency:160,baseCastTime:2.8,baseRecastTime:3,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("FIRE_ATTUNEMENT"),falloff:0,startOnHotbar:!1});tt("TOPAZ_OUTBURST",26,{autoUpgrade:{trait:"OUTBURST_MASTERY",otherSkill:"TOPAZ_DISASTER"},basePotency:110,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("EARTH_ATTUNEMENT"),falloff:0,startOnHotbar:!1});tt("EMERALD_OUTBURST",26,{autoUpgrade:{trait:"OUTBURST_MASTERY",otherSkill:"EMERALD_DISASTER"},baseRecastTime:1.5,basePotency:70,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("WIND_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("WIND_ATTUNEMENT"),falloff:0,startOnHotbar:!1});tt("RUBY_DISASTER",74,{autoDowngrade:{trait:"OUTBURST_MASTERY",otherSkill:"RUBY_OUTBURST"},autoUpgrade:{trait:"OUTBURST_MASTERY_II",otherSkill:"RUBY_CATASTROPHE"},basePotency:190,baseCastTime:2.8,baseRecastTime:3,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("FIRE_ATTUNEMENT"),falloff:0,startOnHotbar:!1});tt("TOPAZ_DISASTER",74,{autoDowngrade:{trait:"OUTBURST_MASTERY",otherSkill:"TOPAZ_OUTBURST"},autoUpgrade:{trait:"OUTBURST_MASTERY_II",otherSkill:"TOPAZ_CATASTROPHE"},basePotency:130,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("EARTH_ATTUNEMENT"),falloff:0,startOnHotbar:!1});tt("EMERALD_DISASTER",74,{autoDowngrade:{trait:"OUTBURST_MASTERY",otherSkill:"EMERALD_OUTBURST"},autoUpgrade:{trait:"OUTBURST_MASTERY_II",otherSkill:"EMERALD_CATASTROPHE"},baseRecastTime:1.5,basePotency:90,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("WIND_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("WIND_ATTUNEMENT"),falloff:0,startOnHotbar:!1});tt("RUBY_CATASTROPHE",82,{autoDowngrade:{trait:"OUTBURST_MASTERY_II",otherSkill:"RUBY_DISASTER"},basePotency:210,baseCastTime:2.8,baseRecastTime:3,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("FIRE_ATTUNEMENT"),falloff:0,startOnHotbar:!1});tt("TOPAZ_CATASTROPHE",82,{autoDowngrade:{trait:"OUTBURST_MASTERY_II",otherSkill:"TOPAZ_DISASTER"},basePotency:140,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT"),onConfirm:e=>{e.tryConsumeResource("EARTH_ATTUNEMENT"),e.gainStatus("TITANS_FAVOR")},falloff:0,startOnHotbar:!1});tt("EMERALD_CATASTROPHE",82,{autoDowngrade:{trait:"OUTBURST_MASTERY_II",otherSkill:"EMERALD_DISASTER"},baseRecastTime:1.5,basePotency:100,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("WIND_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("WIND_ATTUNEMENT"),falloff:0,startOnHotbar:!1});const uB=[{newSkill:"SUMMON_BAHAMUT",condition:e=>e.nextDemi===2},{newSkill:"SUMMON_PHOENIX",condition:e=>e.nextDemi===3},{newSkill:"SUMMON_SOLAR_BAHAMUT",condition:e=>e.nextDemi===1}],dB={cdName:"cd_DEMI_SUMMON",cooldown:60,maxCharges:1};[{name:"SUMMON_BAHAMUT",autoName:"WYRMWAVE",level:70,activeValue:2},{name:"SUMMON_PHOENIX",autoName:"SCARLET_FLAME",level:80,activeValue:3},{name:"SUMMON_SOLAR_BAHAMUT",autoName:"LUXWAVE",level:100,activeValue:1}].forEach((e,t)=>tt(e.name,e.level,{applicationDelay:.76,replaceIf:uB,secondaryCooldown:dB,validateAttempt:n=>!n.hasActivePet&&n.nextDemi===e.activeValue,drawsAggro:!0,onConfirm:(n,o)=>{n.gainStatus("ACTIVE_DEMI",e.activeValue),n.startPetAutos(o,e.autoName),["RUBY_ARCANUM","TOPAZ_ARCANUM","EMERALD_ARCANUM"].forEach(s=>n.gainStatus(s,1)),["FIRE_ATTUNEMENT","EARTH_ATTUNEMENT","WIND_ATTUNEMENT"].forEach(s=>n.tryConsumeResource(s,!0)),n.tryConsumeResource("IFRITS_FAVOR"),n.tryConsumeResource("CRIMSON_STRIKE_READY"),n.tryConsumeResource("GARUDAS_FAVOR"),n.tryConsumeResource("TITANS_FAVOR"),e.name==="SUMMON_SOLAR_BAHAMUT"&&n.gainStatus("REFULGENT_LUX"),n.addEvent(new Oe("update next demi",hO,()=>{n.resources.get("NEXT_DEMI_CYCLE").gainWrapping(1)}))},onApplication:n=>{n.isInCombat()||n.resources.get("IN_COMBAT").gain(1)},startOnHotbar:t===0}));const af=e=>!e.hasActivePet&&e.hasResourceAvailable("RUBY_ARCANUM"),nf=e=>!e.hasActivePet&&e.hasResourceAvailable("TOPAZ_ARCANUM"),of=e=>!e.hasActivePet&&e.hasResourceAvailable("EMERALD_ARCANUM"),fO=e=>(t,n)=>{t.tryConsumeResource("RUBY_ARCANUM"),t.gainStatus("FIRE_ATTUNEMENT",2),t.queuePrimalSummon(n,e),t.tryConsumeResource("EARTH_ATTUNEMENT",!0),t.tryConsumeResource("WIND_ATTUNEMENT",!0),t.tryConsumeResource("TITANS_FAVOR"),t.tryConsumeResource("GARUDAS_FAVOR")},EO=e=>(t,n)=>{t.tryConsumeResource("TOPAZ_ARCANUM"),t.gainStatus("EARTH_ATTUNEMENT",4),t.queuePrimalSummon(n,e),t.tryConsumeResource("FIRE_ATTUNEMENT",!0),t.tryConsumeResource("WIND_ATTUNEMENT",!0),t.tryConsumeResource("IFRITS_FAVOR"),t.tryConsumeResource("CRIMSON_STRIKE_READY"),t.tryConsumeResource("GARUDAS_FAVOR")},mO=e=>(t,n)=>{t.tryConsumeResource("EMERALD_ARCANUM"),t.gainStatus("WIND_ATTUNEMENT",4),t.queuePrimalSummon(n,e),t.tryConsumeResource("FIRE_ATTUNEMENT",!0),t.tryConsumeResource("EARTH_ATTUNEMENT",!0),t.tryConsumeResource("IFRITS_FAVOR"),t.tryConsumeResource("CRIMSON_STRIKE_READY"),t.tryConsumeResource("TITANS_FAVOR")},tc=.5;tt("SUMMON_IFRIT",30,{autoUpgrade:{trait:"ENKINDLE_II",otherSkill:"SUMMON_IFRIT_II"},applicationDelay:0,highlightIf:af,validateAttempt:af,onConfirm:fO("SUMMON_IFRIT"),falloff:tc,savesTargets:!0});tt("SUMMON_TITAN",35,{autoUpgrade:{trait:"ENKINDLE_II",otherSkill:"SUMMON_TITAN_II"},applicationDelay:0,highlightIf:nf,validateAttempt:nf,onConfirm:EO("SUMMON_TITAN"),falloff:tc,savesTargets:!0});tt("SUMMON_GARUDA",45,{autoUpgrade:{trait:"ENKINDLE_II",otherSkill:"SUMMON_GARUDA_II"},applicationDelay:0,highlightIf:of,validateAttempt:of,onConfirm:mO("SUMMON_GARUDA"),falloff:tc,savesTargets:!0});tt("SUMMON_IFRIT_II",90,{autoDowngrade:{trait:"ENKINDLE_II",otherSkill:"SUMMON_IFRIT"},applicationDelay:0,highlightIf:af,validateAttempt:af,onConfirm:Le(e=>e.gainStatus("IFRITS_FAVOR"),fO("SUMMON_IFRIT_II")),falloff:tc,savesTargets:!0});tt("SUMMON_TITAN_II",90,{autoDowngrade:{trait:"ENKINDLE_II",otherSkill:"SUMMON_TITAN"},applicationDelay:0,highlightIf:nf,validateAttempt:nf,onConfirm:EO("SUMMON_TITAN_II"),falloff:tc,savesTargets:!0});tt("SUMMON_GARUDA_II",90,{autoDowngrade:{trait:"ENKINDLE_II",otherSkill:"SUMMON_GARUDA"},applicationDelay:0,highlightIf:of,validateAttempt:of,onConfirm:Le(e=>e.gainStatus("GARUDAS_FAVOR"),mO("SUMMON_GARUDA_II")),falloff:tc,savesTargets:!0});const mn=[{newSkill:"DEATHFLARE",condition:e=>e.activeDemi===2},{newSkill:"REKINDLE",condition:e=>e.activeDemi===3},{newSkill:"SUNFLARE",condition:e=>e.activeDemi===1},{newSkill:"CRIMSON_CYCLONE",condition:e=>e.hasResourceAvailable("IFRITS_FAVOR")},{newSkill:"CRIMSON_STRIKE",condition:e=>e.hasResourceAvailable("CRIMSON_STRIKE_READY")},{newSkill:"MOUNTAIN_BUSTER",condition:e=>e.hasResourceAvailable("TITANS_FAVOR")},{newSkill:"SLIPSTREAM",condition:e=>e.hasResourceAvailable("GARUDAS_FAVOR")}];io("ASTRAL_FLOW",60,"cd_ASTRAL_FLOW",{applicationDelay:0,cooldown:20,replaceIf:mn,validateAttempt:e=>!1});io("DEATHFLARE",60,"cd_ASTRAL_FLOW",{potency:500,applicationDelay:.8,cooldown:20,replaceIf:mn,highlightIf:e=>!0,validateAttempt:mn[0].condition,falloff:.5,startOnHotbar:!1});io("REKINDLE",80,"cd_ASTRAL_FLOW",{applicationDelay:1.03,cooldown:20,replaceIf:mn,highlightIf:e=>!0,validateAttempt:mn[1].condition,onConfirm:e=>e.gainStatus("REKINDLE"),startOnHotbar:!1});io("SUNFLARE",100,"cd_ASTRAL_FLOW",{potency:1e3,applicationDelay:.8,cooldown:20,replaceIf:mn,highlightIf:e=>!0,validateAttempt:mn[2].condition,falloff:.5,startOnHotbar:!1});tt("CRIMSON_CYCLONE",86,{basePotency:[["NEVER",430],["ARCANE_MASTERY",520]],applicationDelay:.8,replaceIf:mn,highlightIf:e=>!0,validateAttempt:mn[3].condition,onConfirm:e=>{e.tryConsumeResource("IFRITS_FAVOR"),e.gainStatus("CRIMSON_STRIKE_READY")},falloff:.6,startOnHotbar:!1});tt("CRIMSON_STRIKE",86,{basePotency:[["NEVER",430],["ARCANE_MASTERY",520]],applicationDelay:.76,replaceIf:mn,highlightIf:e=>!0,validateAttempt:mn[4].condition,onConfirm:e=>e.tryConsumeResource("CRIMSON_STRIKE_READY"),falloff:.6,startOnHotbar:!1});io("MOUNTAIN_BUSTER",86,"cd_MOUNTAIN_BUSTER",{potency:[["NEVER",150],["ARCANE_MASTERY",160]],cooldown:1,applicationDelay:.76,replaceIf:mn,highlightIf:e=>!0,validateAttempt:mn[5].condition,onConfirm:e=>e.tryConsumeResource("TITANS_FAVOR"),falloff:.6,startOnHotbar:!1});tt("SLIPSTREAM",86,{baseCastTime:3,baseRecastTime:3.5,basePotency:[["NEVER",430],["ARCANE_MASTERY",520]],applicationDelay:1.02,replaceIf:mn,highlightIf:e=>!0,validateAttempt:mn[6].condition,onConfirm:(e,t)=>{e.tryConsumeResource("GARUDAS_FAVOR"),e.addDoTPotencies({node:t,effectName:"SLIPSTREAM",skillName:"SLIPSTREAM",tickPotency:30,speedStat:"sps"})},onApplication:(e,t)=>e.applyDoT("SLIPSTREAM",t),falloff:.6,startOnHotbar:!1});const hB=[{newSkill:"ENKINDLE_BAHAMUT",condition:e=>[0,2].includes(e.activeDemi)},{newSkill:"ENKINDLE_PHOENIX",condition:e=>e.activeDemi===3},{newSkill:"ENKINDLE_SOLAR_BAHAMUT",condition:e=>e.activeDemi===1}];[{name:"ENKINDLE_BAHAMUT",level:70,activeValue:2,falloff:.5},{name:"ENKINDLE_PHOENIX",level:80,activeValue:3,falloff:.5},{name:"ENKINDLE_SOLAR_BAHAMUT",level:100,activeValue:1,falloff:.5}].forEach((e,t)=>io(e.name,e.level,"cd_ENKINDLE",{applicationDelay:0,cooldown:20,replaceIf:hB,validateAttempt:n=>n.activeDemi===e.activeValue,onConfirm:(n,o)=>n.queueEnkindle(o,e.name),startOnHotbar:t===0,savesTargets:!0,falloff:e.falloff}));tt("RUIN_IV",62,{basePotency:[["NEVER",430],["ARCANE_MASTERY",520]],manaCost:400,applicationDelay:.8,falloff:.6,highlightIf:e=>e.hasResourceAvailable("FURTHER_RUIN"),validateAttempt:e=>e.hasResourceAvailable("FURTHER_RUIN"),onConfirm:e=>e.tryConsumeResource("FURTHER_RUIN")});[{name:"ENERGY_DRAIN",level:10,potency:200,applicationDelay:1.07},{name:"ENERGY_SIPHON",level:52,potency:100,applicationDelay:1.02,falloff:0}].forEach(e=>io(e.name,e.level,"cd_ENERGY_DRAIN",{...e,cooldown:60,onConfirm:t=>{t.gainStatus("AETHERFLOW",2),t.gainStatus("FURTHER_RUIN")}}));[{name:"FESTER",level:10,potency:340,applicationDelay:.71,autoUpgrade:{trait:"ENHANCED_FESTER",otherSkill:"NECROTIZE"}},{name:"PAINFLARE",level:40,potency:150,applicationDelay:.44,falloff:0},{name:"NECROTIZE",level:92,potency:460,applicationDelay:.71,autoDowngrade:{trait:"ENHANCED_FESTER",otherSkill:"FESTER"}}].forEach(e=>io(e.name,e.level,"cd_AETHERFLOW",{...e,cooldown:1,validateAttempt:t=>t.hasResourceAvailable("AETHERFLOW"),onConfirm:t=>t.tryConsumeResource("AETHERFLOW")}));Ye("SMN","SEARING_LIGHT",66,"cd_SEARING_LIGHT",{rscType:"SEARING_LIGHT",applicationDelay:0,cooldown:120,onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_SEARING_LIGHT")&&e.gainStatus("RUBYS_GLIMMER")},replaceIf:[{newSkill:"SEARING_FLASH",condition:e=>e.hasResourceAvailable("RUBYS_GLIMMER")}]});io("SEARING_FLASH",96,"cd_SEARING_FLASH",{potency:700,applicationDelay:.8,cooldown:1,falloff:0,startOnHotbar:!1,highlightIf:e=>e.hasResourceAvailable("RUBYS_GLIMMER"),validateAttempt:e=>e.hasResourceAvailable("RUBYS_GLIMMER"),onConfirm:e=>e.tryConsumeResource("RUBYS_GLIMMER")});Ye("SMN","RADIANT_AEGIS",2,"cd_RADIANT_AEGIS",{rscType:"RADIANT_AEGIS",applicationDelay:.45,cooldown:60,maxCharges:2,validateAttempt:e=>!e.hasActivePet});io("LUX_SOLARIS",100,"cd_LUX_SOLARIS",{applicationDelay:.62,cooldown:60,highlightIf:e=>e.hasResourceAvailable("REFULGENT_LUX"),validateAttempt:e=>e.hasResourceAvailable("REFULGENT_LUX"),onConfirm:e=>e.tryConsumeResource("REFULGENT_LUX")});tt("RESURRECTION",12,{baseCastTime:8,manaCost:2400,applicationDelay:1.11,basePotency:0});Object.keys($N).forEach(e=>zt(e,`SGE/${Pe[e].name}.png`));const fB=["EUKRASIAN_DOSIS","EUKRASIAN_DOSIS_II","EUKRASIAN_DOSIS_III","EUKRASIAN_DYSKRASIA"],EB=["EUKRASIAN_DIAGNOSIS","KRASIS","TAUROCHOLE","HAIMA","HAIMATINON","KARDION"],mB=["EUKRASIA","SOTERIA","ZOE","PHILOSOPHIA","KARDIA"],AB=["EUKRASIAN_PROGNOSIS","PANHAIMA","PANHAIMATINON","KERACHOLE","KERAKEIA","EUDAIMONIA","HOLOS","HOLOSAKOS"];class RB extends Xt{jobSpecificOtherTargetedBuffViewProps(){return[...fB,...EB].flatMap(t=>t==="KARDION"?[this.makeCommonTimerless(t,!1)]:this.makeTargetedTimers(t))}jobSpecificSelfTargetedBuffViewProps(){return[...AB,...mB].map(t=>t==="KARDIA"||t==="EUKRASIA"?this.makeCommonTimerless(t):this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){const n=this.state.resources.get("ADDERSGALL"),o=Ut("SGE","ADDERSGALL").maxTimeout,s=n.availableAmount()<n.maxValue?this.state.resources.timeTillReady("ADDERSGALL"):o,c=this.state.resources.get("ADDERSTING");return[{kind:"counter",name:N({en:Pe.ADDERSGALL.name,zh:Pe.ADDERSGALL.label.zh}),color:t.sge.addersgall,currentStacks:n.availableAmount(),maxStacks:n.maxValue},{kind:"bar",name:N({en:Pe.ADDERSGALL.name+" timer",zh:Pe.ADDERSGALL.label.zh+""}),color:t.sge.addersgall,progress:1-s/o,valueString:s.toFixed(3)},{kind:"counter",name:N({en:Pe.ADDERSTING.name,zh:Pe.ADDERSTING.label.zh}),color:t.sge.addersting,currentStacks:c.availableAmount(),maxStacks:c.maxValue}]}}const yt=(e,t,n)=>{Ve("SGE",e,t,n??{})};yt("ADDERSGALL",3,{default:3,timeout:20});yt("ADDERSTING",3,{default:3});yt("EUKRASIA",1);yt("KARDIA",1,{default:1});yt("KARDION",1,{default:1});yt("EUKRASIAN_DIAGNOSIS",1,{timeout:30});yt("DIFFERENTIAL_DIAGNOSIS",1,{timeout:30});yt("EUKRASIAN_PROGNOSIS",1,{timeout:30});yt("HAIMA",1,{timeout:15});yt("HAIMATINON",5,{timeout:15});yt("PANHAIMA",1,{timeout:15});yt("PANHAIMATINON",5,{timeout:15});yt("PHYSIS_II",1,{timeout:15});yt("AUTOPHYSIS",1,{timeout:15});yt("PHILOSOPHIA",1,{timeout:20});yt("EUDAIMONIA",1,{timeout:20});yt("HOLOS",1,{timeout:20});yt("HOLOSAKOS",1,{timeout:30});yt("SOTERIA",4,{timeout:15});yt("ZOE",1,{timeout:30});yt("KRASIS",1,{timeout:10});yt("KERACHOLE",1,{timeout:15});yt("KERAKEIA",1,{timeout:15});yt("TAUROCHOLE",1,{timeout:15});yt("EUKRASIAN_DOSIS",1,{timeout:30});yt("EUKRASIAN_DOSIS_II",1,{timeout:30});yt("EUKRASIAN_DOSIS_III",1,{timeout:30});yt("EUKRASIAN_DYSKRASIA",1,{timeout:30});class TB extends qt{constructor(t){if(super(t),this.hasTraitUnlocked("ENHANCED_SWIFTCAST")||this.cooldowns.set(new Ue("cd_SWIFTCAST",60,1,1)),!this.hasTraitUnlocked("ENHANCED_PHYSIS_II")){const n=Qi(this.job).get("AUTOPHYSIS");n.maxTimeout=10,Qi(this.job).set("AUTOPHYSIS",n)}this.hasTraitUnlocked("ENHANCED_SOTERIA")||this.cooldowns.set(new Ue("cd_SOTERIA",90,1,1)),this.hasTraitUnlocked("ENHANCED_ZOE")||this.cooldowns.set(new Ue("cd_ZOE",120,1,1)),this.registerRecurringEvents([{reportName:N({en:"Eukrasian DoT"}),groupedEffects:[{effectName:"EUKRASIAN_DOSIS",appliedBy:["EUKRASIAN_DOSIS"]},{effectName:"EUKRASIAN_DOSIS_II",appliedBy:["EUKRASIAN_DOSIS_II"]},{effectName:"EUKRASIAN_DOSIS_III",appliedBy:["EUKRASIAN_DOSIS_III"]},{effectName:"EUKRASIAN_DYSKRASIA",appliedBy:["EUKRASIAN_DYSKRASIA"]}]},{isHealing:!0,groupedEffects:[{effectName:"PHYSIS_II",appliedBy:["PHYSIS_II"]}]},{isHealing:!0,groupedEffects:[{effectName:"KERAKEIA",appliedBy:["KERACHOLE"]}]}])}get statusPropsGenerator(){return new RB(this)}jobSpecificRegisterRecurringEvents(){const t=n=>{const o=Ut("SGE","ADDERSGALL");this.hasResourceAvailable("ADDERSGALL",o.maxValue)||this.resources.get("ADDERSGALL").gain(1),this.resources.addResourceEvent({rscType:"ADDERSGALL",name:"gain addersgall if not currently capped",delay:o.maxTimeout,fnOnRsc:t})};t(this.resources.get("ADDERSGALL"))}jobSpecificAddHealingBuffCovers(t,n){this.hasResourceAvailable("AUTOPHYSIS")&&t.addBuff(k.Autophysis),this.hasResourceAvailable("KRASIS")&&t.addBuff(k.Krasis),n.cdName==="cd_GCD"&&(this.hasResourceAvailable("ZOE")&&t.addBuff(k.Zoe),this.hasResourceAvailable("PHILOSOPHIA")&&t.addBuff(k.Philosophia))}consumeAddersgall(){const t=Ut("SGE","ADDERSGALL");this.hasResourceAvailable("ADDERSGALL",t.maxValue)&&this.resources.get("ADDERSGALL").overrideTimer(this,t.maxTimeout),this.tryConsumeResource("ADDERSGALL"),this.resources.get("MANA").gain(700)}addPepsisPotency(t,n){const o=new ta({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:"PEPSIS",aspect:Ie.Other,basePotency:t==="EUKRASIAN_DIAGNOSIS"?450:350,description:Ke(t),healTargetCount:t==="EUKRASIAN_DIAGNOSIS"?1:this.partySize,snapshotTime:this.getDisplayTime()});if(this.hasResourceAvailable("TINCTURE")&&o.addModifiers(J.Tincture),this.hasResourceAvailable("AUTOPHYSIS")&&o.addModifiers(J.Autophysis),this.hasResourceAvailable("KRASIS")){if(t==="EUKRASIAN_PROGNOSIS"){const s=new ta({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:"PEPSIS",aspect:Ie.Other,basePotency:o.base,description:Ke(t),healTargetCount:o.targetCount-1,snapshotTime:this.getDisplayTime()});n.addHoTPotency(s,"PEPSIS"),o.healTargetCount=1,o.description+=", "+Ke("KRASIS")}o.addModifiers(J.Krasis)}n.addHoTPotency(o,"PEPSIS")}addHaimaExpirationPotency(t,n){if(!(t==="HAIMA"||t==="PANHAIMA"))return;const o=new ta({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t==="HAIMA"?"HAIMA":"PANHAIMA",aspect:Ie.Other,basePotency:t==="HAIMA"?150:100,description:"",healTargetCount:t==="HAIMA"?1:this.partySize,snapshotTime:this.getDisplayTime()});if(this.hasResourceAvailable("TINCTURE")&&o.addModifiers(J.Tincture),this.hasResourceAvailable("AUTOPHYSIS")&&o.addModifiers(J.Autophysis),this.hasResourceAvailable("KRASIS")){if(t==="PANHAIMA"){const s=new ta({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:"PANHAIMA",aspect:Ie.Other,basePotency:100,description:"",healTargetCount:this.partySize-1,snapshotTime:this.getDisplayTime()});n.addHoTPotency(s,t),o.healTargetCount=1}o.addModifiers(J.Krasis)}n.addHoTPotency(o,t)}handleHaimaExpiration(t,n){if(!(t==="HAIMA"||t==="PANHAIMA"))return;const o=t==="HAIMA"?"HAIMATINON":"PANHAIMATINON",s=this.resources.get(o).availableAmount();s<=0||this.addEvent(new Oe(`${Pe[t].name} expiration heal`,.001,()=>{n.getHotPotencies(t).forEach(c=>{c.description=Ke(t)+" "+N({en:"expiration"})+" ("+s+" "+N({en:"stacks"})+")",t==="PANHAIMA"&&c.getDisplayedModifiers().includes(J.Krasis)&&(c.description+=", "+Ke("KRASIS")),c.base*=s,I.resolveHealingPotency(c)})}))}addHealingMagicPotencyModifiers(t){this.hasResourceAvailable("ZOE")&&t.push(J.Zoe),this.hasResourceAvailable("PHILOSOPHIA")&&t.push(J.Philosophia)}addHealingActionPotencyModifiers(t){this.hasResourceAvailable("AUTOPHYSIS")&&t.push(J.Autophysis),this.hasResourceAvailable("KRASIS")&&t.push(J.Krasis)}}const ca=(e,t,n)=>{const o=f=>f.config.adjustedCastTime(1.5),s=f=>f.config.adjustedGCD(2.5),c=f=>{if(!n.healingPotency)return[];const h=[];return f.addHealingMagicPotencyModifiers(h),f.addHealingActionPotencyModifiers(h),h},d=Le(f=>{n.castTime!==0&&f.tryConsumeResource("SWIFTCAST")},(f,h)=>{if(!(f.hasResourceAvailable("KARDIA")&&h.getInitialPotency()))return;const m=new ta({config:f.config,sourceTime:f.getDisplayTime(),sourceSkill:e,aspect:Ie.Other,basePotency:f.hasTraitUnlocked("ENHANCED_HEALING_MAGIC")?170:130,description:Ke("KARDIA"),healTargetCount:1,snapshotTime:f.getDisplayTime()});f.hasResourceAvailable("TINCTURE")&&m.addModifiers(J.Tincture),f.hasResourceAvailable("SOTERIA")&&m.addModifiers(J.Soteria),f.addHealingActionPotencyModifiers(m.getDisplayedModifiers()),h.addHoTPotency(m,"KARDION")},(f,h)=>{if(!f.hasResourceAvailable("EUDAIMONIA"))return;const m=new ta({config:f.config,sourceTime:f.getDisplayTime(),sourceSkill:e,aspect:Ie.Other,basePotency:150,description:Ke("EUDAIMONIA"),healTargetCount:f.partySize,snapshotTime:f.getDisplayTime()});f.hasResourceAvailable("TINCTURE")&&m.addModifiers(J.Tincture),f.addHealingActionPotencyModifiers(m.getDisplayedModifiers()),h.addHoTPotency(m,"EUDAIMONIA")},f=>{n.healingPotency&&f.tryConsumeResource("ZOE")},n.onConfirm);return Xn("SGE",e,t,{...n,castTime:n.castTime??o,recastTime:n.recastTime??s,isInstantFn:f=>f.hasResourceAvailable("SWIFTCAST"),jobHealingPotencyModifiers:c,onConfirm:d,onApplication:Le((f,h)=>{const m=h.getHotPotencies("KARDION"),R=h.getHotPotencies("EUDAIMONIA");m.length>0&&(I.resolveHealingPotency(m[0]),f.tryConsumeResource("SOTERIA")),R.forEach(T=>{I.resolveHealingPotency(T)})},n.onApplication)})},Ma=(e,t,n,o)=>et("SGE",e,t,n,{...o,jobHealingPotencyModifiers:c=>{if(!o.healingPotency)return[];const d=[];return c.addHealingActionPotencyModifiers(d),d}}),zT=(e,t,n,o)=>Ye("SGE",e,t,n,o);ca("EUKRASIA",30,{castTime:0,recastTime:1,applicationDelay:0,validateAttempt:e=>!e.hasResourceAvailable("EUKRASIA"),onConfirm:e=>e.gainStatus("EUKRASIA")});ca("DOSIS",1,{replaceIf:[{condition:e=>e.hasResourceAvailable("EUKRASIA"),newSkill:"EUKRASIAN_DOSIS"}],autoUpgrade:{trait:"OFFENSIVE_MAGIC_MASTERY",otherSkill:"DOSIS_II"},manaCost:300,potency:300,applicationDelay:.67});ca("DOSIS_II",72,{startOnHotbar:!1,replaceIf:[{condition:e=>e.hasResourceAvailable("EUKRASIA"),newSkill:"EUKRASIAN_DOSIS_II"}],autoUpgrade:{trait:"OFFENSIVE_MAGIC_MASTERY_II",otherSkill:"DOSIS_III"},manaCost:400,potency:320,applicationDelay:.67});const YT=[["NEVER",330],["MAGICK_MASTERY_HEALER",380]];ca("DOSIS_III",82,{startOnHotbar:!1,replaceIf:[{condition:e=>e.hasResourceAvailable("EUKRASIA"),newSkill:"EUKRASIAN_DOSIS_III"}],manaCost:400,potency:YT,applicationDelay:.67});ca("EUKRASIAN_DOSIS",30,{startOnHotbar:!1,manaCost:400,castTime:0,recastTime:1.5,applicationDelay:.76,drawsAggro:!0,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"EUKRASIAN_DOSIS",skillName:"EUKRASIAN_DOSIS",tickPotency:40,speedStat:"sps"}),e.tryConsumeResource("EUKRASIA")},onApplication:(e,t)=>{e.applyDoT("EUKRASIAN_DOSIS",t)}});ca("EUKRASIAN_DOSIS_II",72,{startOnHotbar:!1,manaCost:400,castTime:0,recastTime:1.5,applicationDelay:.76,drawsAggro:!0,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"EUKRASIAN_DOSIS_II",skillName:"EUKRASIAN_DOSIS_II",tickPotency:60,speedStat:"sps"}),e.tryConsumeResource("EUKRASIA")},onApplication:(e,t)=>{e.applyDoT("EUKRASIAN_DOSIS_II",t)}});ca("EUKRASIAN_DOSIS_III",82,{startOnHotbar:!1,manaCost:400,castTime:0,recastTime:1.5,applicationDelay:.76,drawsAggro:!0,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"EUKRASIAN_DOSIS_III",skillName:"EUKRASIAN_DOSIS_III",tickPotency:85,speedStat:"sps"}),e.tryConsumeResource("EUKRASIA")},onApplication:(e,t)=>{e.applyDoT("EUKRASIAN_DOSIS_III",t)}});ca("TOXIKON",66,{autoUpgrade:{trait:"OFFENSIVE_MAGIC_MASTERY_II",otherSkill:"TOXIKON_II"},potency:[["NEVER",240],["OFFENSIVE_MAGIC_MASTERY",300]],falloff:.5,applicationDelay:1.2,castTime:0,validateAttempt:e=>e.hasResourceAvailable("ADDERSTING"),onConfirm:e=>e.tryConsumeResource("ADDERSTING")});ca("TOXIKON_II",82,{startOnHotbar:!1,potency:YT,falloff:.5,applicationDelay:1.2,castTime:0,validateAttempt:e=>e.hasResourceAvailable("ADDERSTING"),onConfirm:e=>e.tryConsumeResource("ADDERSTING")});ca("PHLEGMA",26,{autoUpgrade:{trait:"OFFENSIVE_MAGIC_MASTERY",otherSkill:"PHLEGMA_II"},potency:400,falloff:.5,applicationDelay:.67,manaCost:400,castTime:0,secondaryCooldown:{cdName:"cd_PHLEGMA",maxCharges:2,cooldown:40}});ca("PHLEGMA_II",72,{startOnHotbar:!1,autoUpgrade:{trait:"OFFENSIVE_MAGIC_MASTERY_II",otherSkill:"PHLEGMA_III"},potency:490,falloff:.5,applicationDelay:.67,manaCost:400,castTime:0,secondaryCooldown:{cdName:"cd_PHLEGMA",maxCharges:2,cooldown:40}});ca("PHLEGMA_III",82,{startOnHotbar:!1,potency:600,falloff:.5,applicationDelay:.67,manaCost:400,castTime:0,secondaryCooldown:{cdName:"cd_PHLEGMA",maxCharges:2,cooldown:40}});Ma("PSYCHE",92,"cd_PSYCHE",{potency:600,falloff:.5,applicationDelay:2.1,cooldown:60});ca("DYSKRASIA",46,{autoUpgrade:{trait:"OFFENSIVE_MAGIC_MASTERY_II",otherSkill:"DYSKRASIA_II"},potency:160,falloff:0,applicationDelay:.76,manaCost:400,castTime:0});ca("DYSKRASIA_II",82,{startOnHotbar:!1,replaceIf:[{condition:e=>e.hasResourceAvailable("EUKRASIA"),newSkill:"EUKRASIAN_DYSKRASIA"}],potency:170,falloff:0,applicationDelay:.76,manaCost:400,castTime:0});ca("EUKRASIAN_DYSKRASIA",82,{startOnHotbar:!1,falloff:0,applicationDelay:1.03,castTime:0,recastTime:1.5,drawsAggro:!0,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"EUKRASIAN_DYSKRASIA",skillName:"EUKRASIAN_DYSKRASIA",tickPotency:40,speedStat:"sps"}),e.tryConsumeResource("EUKRASIA")},onApplication:(e,t)=>{e.applyDoT("EUKRASIAN_DYSKRASIA",t)}});ca("DIAGNOSIS",2,{healingPotency:[["NEVER",400],["ENHANCED_HEALING_MAGIC",450]],applicationDelay:.58,replaceIf:[{condition:e=>e.hasResourceAvailable("EUKRASIA"),newSkill:"EUKRASIAN_DIAGNOSIS"}],manaCost:400});ca("EUKRASIAN_DIAGNOSIS",30,{startOnHotbar:!1,healingPotency:300,applicationDelay:.67,castTime:0,recastTime:1.5,manaCost:800,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:e=>e.tryConsumeResource("EUKRASIA"),onApplication:e=>e.gainStatus("EUKRASIAN_DIAGNOSIS")});Ma("EUKRASIAN_DIAGNOSIS_POP",30,"cd_DIAGNOSIS_POP",{animationLock:en,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("EUKRASIAN_DIAGNOSIS"),onConfirm:e=>{e.tryConsumeResource("EUKRASIAN_DIAGNOSIS"),e.resources.get("ADDERSTING").gain(1)},highlightIf:e=>e.hasResourceAvailable("EUKRASIAN_DIAGNOSIS")});ca("PROGNOSIS",10,{healingPotency:300,aoeHeal:!0,applicationDelay:.58,replaceIf:[{condition:e=>e.hasResourceAvailable("EUKRASIA")&&e.hasTraitUnlocked("EUKRASIAN_PROGNOSIS_MASTERY"),newSkill:"EUKRASIAN_PROGNOSIS_II"},{condition:e=>e.hasResourceAvailable("EUKRASIA")&&!e.hasTraitUnlocked("EUKRASIAN_PROGNOSIS_MASTERY"),newSkill:"EUKRASIAN_PROGNOSIS"}],manaCost:700,castTime:e=>e.config.adjustedCastTime(2)});ca("EUKRASIAN_PROGNOSIS",30,{startOnHotbar:!1,autoUpgrade:{trait:"EUKRASIAN_PROGNOSIS_MASTERY",otherSkill:"EUKRASIAN_PROGNOSIS_II"},healingPotency:100,aoeHeal:!0,applicationDelay:.94,castTime:0,recastTime:1.5,manaCost:800,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:e=>e.tryConsumeResource("EUKRASIA"),onApplication:e=>e.gainStatus("EUKRASIAN_PROGNOSIS")});ca("EUKRASIAN_PROGNOSIS_II",96,{startOnHotbar:!1,healingPotency:100,aoeHeal:!0,applicationDelay:.94,castTime:0,recastTime:1.5,manaCost:800,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:e=>e.tryConsumeResource("EUKRASIA"),onApplication:e=>e.gainStatus("EUKRASIAN_PROGNOSIS")});Ma("EUKRASIAN_PROGNOSIS_POP",30,"cd_PROGNOSIS_POP",{autoUpgrade:{trait:"EUKRASIAN_PROGNOSIS_MASTERY",otherSkill:"EUKRASIAN_PROGNOSIS_II_POP"},animationLock:en,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("EUKRASIAN_PROGNOSIS"),onConfirm:e=>{e.tryConsumeResource("EUKRASIAN_PROGNOSIS"),e.resources.get("ADDERSTING").gain(1)},highlightIf:e=>e.hasResourceAvailable("EUKRASIAN_PROGNOSIS")});Ma("EUKRASIAN_PROGNOSIS_II_POP",30,"cd_PROGNOSIS_POP",{startOnHotbar:!1,animationLock:en,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("EUKRASIAN_PROGNOSIS"),onConfirm:e=>{e.tryConsumeResource("EUKRASIAN_PROGNOSIS"),e.resources.get("ADDERSTING").gain(1)},highlightIf:e=>e.hasResourceAvailable("EUKRASIAN_PROGNOSIS")});ca("PNEUMA",90,{potency:YT,falloff:.4,healingPotency:600,aoeHeal:!0,applicationDelay:.58,manaCost:700,secondaryCooldown:{cdName:"cd_PNEUMA",maxCharges:1,cooldown:120}});zT("ZOE",56,"cd_ZOE",{rscType:"ZOE",applicationDelay:0,cooldown:90});Ma("PEPSIS",58,"cd_PEPSIS",{cooldown:30,applicationDelay:1.16,onConfirm:(e,t)=>{e.hasResourceAvailable("EUKRASIAN_DIAGNOSIS")&&(e.addPepsisPotency("EUKRASIAN_DIAGNOSIS",t),e.tryConsumeResource("EUKRASIAN_DIAGNOSIS")),e.hasResourceAvailable("EUKRASIAN_PROGNOSIS")&&(e.addPepsisPotency("EUKRASIAN_PROGNOSIS",t),e.tryConsumeResource("EUKRASIAN_PROGNOSIS"))},onApplication:(e,t)=>{t.getHotPotencies("PEPSIS").forEach(n=>{I.resolveHealingPotency(n)})}});zT("SOTERIA",35,"cd_SOTERIA",{rscType:"SOTERIA",applicationDelay:.8,cooldown:60});zT("KRASIS",86,"cd_KRASIS",{rscType:"KRASIS",applicationDelay:.76,cooldown:60});Ma("HAIMA",70,"cd_HAIMA",{replaceIf:[{condition:e=>e.hasResourceAvailable("HAIMA"),newSkill:"HAIMA_POP"}],applicationDelay:.76,cooldown:120,onConfirm:(e,t)=>e.addHaimaExpirationPotency("HAIMA",t),onApplication:(e,t)=>{const n=Ut("SGE","HAIMATINON").maxValue;e.gainStatus("HAIMA"),e.gainStatus("HAIMATINON",n),e.addEvent(new Oe("Haima Expiration heal Check",Ut("SGE","HAIMA").maxTimeout-.001,()=>e.handleHaimaExpiration("HAIMA",t)))}});Ma("HAIMA_POP",70,"cd_HAIMA_POP",{startOnHotbar:!1,animationLock:en,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("HAIMA"),highlightIf:e=>e.hasResourceAvailable("HAIMA"),onConfirm:e=>{e.hasResourceAvailable("HAIMATINON")?e.tryConsumeResource("HAIMATINON"):e.tryConsumeResource("HAIMA")}});Ma("PHYSIS_II",60,"cd_PHYSIS",{aoeHeal:!0,applicationDelay:.85,cooldown:60,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"PHYSIS_II",effectName:"PHYSIS_II",speedStat:"sps",tickPotency:130})},onApplication:(e,t)=>{e.applyHoT("PHYSIS_II",t),e.gainStatus("AUTOPHYSIS")}});Ma("PHILOSOPHIA",100,"cd_PHILOSOPHIA",{applicationDelay:1.83,cooldown:180,onApplication:e=>{e.gainStatus("PHILOSOPHIA"),e.gainStatus("EUDAIMONIA")}});Ma("HOLOS",76,"cd_HOLOS",{applicationDelay:.62,cooldown:120,onApplication:e=>{e.gainStatus("HOLOS"),e.gainStatus("HOLOSAKOS")}});Ma("PANHAIMA",80,"cd_PANHAIMA",{replaceIf:[{condition:e=>e.hasResourceAvailable("PANHAIMA"),newSkill:"PANHAIMA_POP"}],applicationDelay:.62,cooldown:120,onConfirm:(e,t)=>e.addHaimaExpirationPotency("PANHAIMA",t),onApplication:(e,t)=>{const n=Ut("SGE","PANHAIMATINON").maxValue;e.gainStatus("PANHAIMA"),e.gainStatus("PANHAIMATINON",n),e.addEvent(new Oe("Panhaima Expiration heal Check",Ut("SGE","PANHAIMA").maxTimeout-.001,()=>e.handleHaimaExpiration("PANHAIMA",t)))}});Ma("PANHAIMA_POP",80,"cd_PANHAIMA_POP",{startOnHotbar:!1,animationLock:en,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("PANHAIMA"),highlightIf:e=>e.hasResourceAvailable("PANHAIMA"),onConfirm:e=>{e.hasResourceAvailable("PANHAIMATINON")?e.tryConsumeResource("PANHAIMATINON"):e.tryConsumeResource("PANHAIMA")}});Ma("RHIZOMATA",74,"cd_RHIZOMATA",{cooldown:90,onConfirm:e=>e.resources.get("ADDERSGALL").gain(1)});Ma("DRUOCHOLE",45,"cd_DRUOCHOLE",{cooldown:1,healingPotency:600,applicationDelay:.78,validateAttempt:e=>e.hasResourceAvailable("ADDERSGALL"),onConfirm:e=>e.consumeAddersgall()});Ma("IXOCHOLE",52,"cd_IXOCHOLE",{cooldown:30,healingPotency:400,aoeHeal:!0,applicationDelay:.756,validateAttempt:e=>e.hasResourceAvailable("ADDERSGALL"),onConfirm:e=>e.consumeAddersgall()});Ma("TAUROCHOLE",62,"cd_TAUROCHOLE",{cooldown:45,applicationDelay:.67,onConfirm:e=>e.consumeAddersgall(),onApplication:e=>e.gainStatus("TAUROCHOLE")});Ma("KERACHOLE",50,"cd_KERACHOLE",{cooldown:30,aoeHeal:!0,applicationDelay:.81,validateAttempt:e=>e.hasResourceAvailable("ADDERSGALL"),onConfirm:(e,t)=>{e.consumeAddersgall(),e.addHoTPotencies({node:t,skillName:"KERACHOLE",effectName:"KERAKEIA",speedStat:"sps",tickPotency:100})},onApplication:(e,t)=>{e.gainStatus("KERACHOLE"),e.hasTraitUnlocked("ENHANCED_KERACHOLE")&&e.applyHoT("KERAKEIA",t)}});ca("EGEIRO",12,{applicationDelay:.58,manaCost:2400,castTime:8});Ma("KARDIA",4,"cd_KARDIA",{applicationDelay:.62,cooldown:5,onApplication:e=>{e.gainStatus("KARDIA"),e.gainStatus("KARDION")}});Ma("ICARUS",40,"cd_ICARUS",{cooldown:45,animationLock:Wt});Object.keys(eT).forEach(e=>zt(e,`WAR/${Pe[e].name}.png`));class SB extends Xt{jobSpecificSelfTargetedBuffViewProps(){return Object.keys(eT).map(t=>this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){const n=this.state.resources,o=n.get("BEAST_GAUGE").availableAmount(),s=n.get("STORM_COMBO"),c=n.get("TEMPEST_COMBO"),d=s.available(1)?s.pendingChange?.timeTillEvent:c.available(1)?c.pendingChange?.timeTillEvent:void 0;return[{kind:"text",name:N({en:"Combo Timer",zh:""}),text:d?.toFixed(3)??"N/A"},{kind:"bar",name:N({en:"Beast Gauge",zh:""}),color:t.war.beastGauge,progress:o/100,valueString:o.toFixed(0)}]}}const Gt=(e,t,n)=>{Ve("WAR",e,t,n??{})};Gt("BEAST_GAUGE",100,{warnOnOvercap:!0});const KT=.74,AO=1.16;Gt("SURGING_TEMPEST",1,{timeout:60});Gt("NASCENT_CHAOS",1,{timeout:30});Gt("INNER_RELEASE",3,{timeout:15+KT});Gt("INNER_STRENGTH",1,{timeout:15+KT});Gt("BURGEONING_FURY",3,{timeout:30});Gt("WRATHFUL",1,{timeout:30});Gt("PRIMAL_REND_READY",1,{timeout:30+KT,warnOnTimeout:!0});Gt("PRIMAL_RUINATION_READY",1,{timeout:20+AO,warnOnTimeout:!0});Gt("THRILL_OF_BATTLE",1,{timeout:10});Gt("EQUILIBRIUM",1,{timeout:15});Gt("RAW_INTUITION",1,{timeout:6});Gt("BLOODWHETTING",1,{timeout:8});Gt("STEM_THE_FLOW",1,{timeout:4});Gt("STEM_THE_TIDE",1,{timeout:20});Gt("NASCENT_FLASH",1,{timeout:8});Gt("VENGEANCE",1,{timeout:15});Gt("DAMNATION",1,{timeout:15});Gt("PRIMEVAL_IMPULSE",1,{timeout:15});Gt("SHAKE_IT_OFF",1,{timeout:30});Gt("SHAKE_IT_OFF_OVER_TIME",1,{timeout:15});Gt("HOLMGANG",1,{timeout:10});Gt("DEFIANCE",1);Gt("STORM_COMBO",2,{timeout:30});Gt("TEMPEST_COMBO",1,{timeout:30});const gB=["HEAVY_SWING","MAIM","STORMS_EYE","STORMS_PATH"],RO=["OVERPOWER","MYTHRIL_TEMPEST"],IB=[...gB,...RO],_N=["FELL_CLEAVE","DECIMATE"],_B=["THRILL_OF_BATTLE","DAMNATION","BLOODWHETTING","VENGEANCE","RAW_INTUITION"];class pB extends qt{constructor(t){super(t),this.hasTraitUnlocked("ENHANCED_ONSLAUGHT")&&this.cooldowns.set(new Ue("cd_ONSLAUGHT",30,3,3)),this.registerRecurringEvents()}get statusPropsGenerator(){return new SB(this)}processComboStatus(t){if(!IB.includes(t))return;const n=RO.includes(t),o=n?"TEMPEST_COMBO":"STORM_COMBO",s=n?"STORM_COMBO":"TEMPEST_COMBO";this.setComboState(s,0);const c=this.resources.get(o).availableAmount();let d=0;n?t==="OVERPOWER"&&(d=1):t==="HEAVY_SWING"?d=1:c===1&&t==="MAIM"&&(d=2),this.setComboState(o,d)}hasComboStatus(t,n){return this.hasResourceExactly(t,n)}gainBeastGauge(t){this.resources.get("BEAST_GAUGE").gain(t)}gainProc(t,n){const o=Ut("WAR",t).maxTimeout;this.hasResourceAvailable(t)?(t==="BURGEONING_FURY"&&this.resources.get(t).gain(1),this.resources.get(t).overrideTimer(this,o)):(this.resources.get(t).gain(n??1),o&&this.enqueueResourceDrop(t,o))}gainSurgingTempest(t){const n=this.resources.get("SURGING_TEMPEST"),o=Ut("WAR","SURGING_TEMPEST").maxTimeout,s=(n.pendingChange?.timeTillEvent??0)+t;n.overrideTimer(this,s>=o?o:s)}gainSurgingTempestGCD(t,n,o){this.hasResourceAvailable("SURGING_TEMPEST")?this.addEvent(new Oe("surging tempest refresh",n,()=>{this.hasResourceAvailable("SURGING_TEMPEST")?this.gainSurgingTempest(t):(this.resources.get("SURGING_TEMPEST").gain(1),this.enqueueResourceDrop("SURGING_TEMPEST",t))})):(this.resources.get("SURGING_TEMPEST").gain(1),this.enqueueResourceDrop("SURGING_TEMPEST",t+o))}}const Qn=(e,t,n)=>{const o=Le(n.onConfirm,c=>c.processComboStatus(e),c=>{_N.includes(e)&&c.tryConsumeResource("INNER_RELEASE")&&c.hasTraitUnlocked("ENHANCED_INNER_RELEASE")&&(c.gainProc("BURGEONING_FURY"),c.hasResourceAvailable("BURGEONING_FURY",3)&&(c.gainProc("WRATHFUL"),c.tryConsumeResource("BURGEONING_FURY",!0)))}),s=n.jobPotencyModifiers??(c=>[]);return ia("WAR",e,t,{...n,onConfirm:o,recastTime:c=>c.config.adjustedSksGCD(),jobPotencyModifiers:c=>{const d=s(c);return c.hasResourceAvailable("SURGING_TEMPEST")&&d.push(J.SurgingTempest),c.hasResourceAvailable("INNER_RELEASE")&&_N.includes(e)&&d.push(J.AutoCDH),d}})},_s=(e,t,n,o)=>et("WAR",e,t,n,{...o,jobPotencyModifiers:s=>{const c=[];return s.hasResourceAvailable("SURGING_TEMPEST")&&c.push(J.SurgingTempest),c}});Qn("TOMAHAWK",15,{potency:150,applicationDelay:.71,startsAuto:!1});Qn("HEAVY_SWING",1,{potency:[["NEVER",150],["MELEE_MASTERY_TANK",200],["MELEE_MASTERY_II_TANK",240]],applicationDelay:.53});Qn("MAIM",4,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",150],["MELEE_MASTERY_II_TANK",190]],combo:{potency:[["NEVER",250],["MELEE_MASTERY_TANK",300],["MELEE_MASTERY_II_TANK",340]],resource:"STORM_COMBO",resourceValue:1},applicationDelay:.62,onConfirm:e=>{e.hasComboStatus("STORM_COMBO",1)&&e.gainBeastGauge(10)},highlightIf:e=>e.hasComboStatus("STORM_COMBO",1)});Qn("STORMS_PATH",26,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",160],["MELEE_MASTERY_II_TANK",220]],combo:{potency:[["NEVER",380],["MELEE_MASTERY_TANK",440],["MELEE_MASTERY_II_TANK",500]],resource:"STORM_COMBO",resourceValue:2},applicationDelay:1.52,onConfirm:e=>{e.hasComboStatus("STORM_COMBO",2)&&e.gainBeastGauge(20)},highlightIf:e=>e.hasComboStatus("STORM_COMBO",2)});Qn("STORMS_EYE",50,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",160],["MELEE_MASTERY_II_TANK",220]],combo:{potency:[["NEVER",380],["MELEE_MASTERY_TANK",440],["MELEE_MASTERY_II_TANK",500]],resource:"STORM_COMBO",resourceValue:2},applicationDelay:1.65,onConfirm:e=>{e.hasComboStatus("STORM_COMBO",2)&&(e.gainBeastGauge(10),e.gainSurgingTempestGCD(30,1.65,1.7))},highlightIf:e=>e.hasComboStatus("STORM_COMBO",2)});Qn("OVERPOWER",10,{potency:110,falloff:0,applicationDelay:.62});Qn("MYTHRIL_TEMPEST",40,{potency:100,combo:{potency:140,resource:"TEMPEST_COMBO",resourceValue:1},falloff:0,applicationDelay:.49,onConfirm:e=>{e.hasComboStatus("TEMPEST_COMBO",1)&&(e.gainBeastGauge(20),e.gainSurgingTempestGCD(30,.49,.45))},highlightIf:e=>e.hasComboStatus("TEMPEST_COMBO",1)});function Bf(e){e.cooldowns.get("cd_INFURIATE").restore(5)}Qn("FELL_CLEAVE",54,{potency:[["NEVER",520],["MELEE_MASTERY_II_TANK",580]],applicationDelay:.62,validateAttempt:e=>e.resources.get("BEAST_GAUGE").available(50)||e.resources.get("INNER_RELEASE").available(1),onConfirm:e=>{e.hasResourceAvailable("INNER_RELEASE")||e.resources.get("BEAST_GAUGE").consume(50),Bf(e)},replaceIf:[{newSkill:"INNER_CHAOS",condition:e=>e.hasResourceAvailable("NASCENT_CHAOS")}],highlightIf:e=>e.hasResourceAvailable("BEAST_GAUGE",50)||e.hasResourceAvailable("INNER_RELEASE")});Qn("DECIMATE",60,{potency:180,falloff:0,applicationDelay:1.83,validateAttempt:e=>e.hasResourceAvailable("BEAST_GAUGE",50)||e.hasResourceAvailable("INNER_RELEASE"),onConfirm:e=>{e.hasResourceAvailable("INNER_RELEASE")||e.resources.get("BEAST_GAUGE").consume(50),Bf(e)},highlightIf:e=>e.hasResourceAvailable("BEAST_GAUGE",50)||e.hasResourceAvailable("INNER_RELEASE"),replaceIf:[{newSkill:"CHAOTIC_CYCLONE",condition:e=>e.hasResourceAvailable("NASCENT_CHAOS")}]});_s("INNER_RELEASE",70,"cd_INNER_RELEASE",{applicationDelay:0,cooldown:60,maxCharges:1,onConfirm:e=>{e.gainProc("INNER_RELEASE",3),e.gainProc("INNER_STRENGTH"),e.hasResourceAvailable("SURGING_TEMPEST")&&e.gainSurgingTempest(10),e.config.level>=$e.lvl90&&e.gainProc("PRIMAL_REND_READY")},replaceIf:[{newSkill:"PRIMAL_WRATH",condition:e=>e.hasResourceAvailable("WRATHFUL")}]});Qn("PRIMAL_REND",90,{potency:700,applicationDelay:AO,falloff:.5,animationLock:1.2,validateAttempt:e=>e.hasResourceAvailable("PRIMAL_REND_READY"),onConfirm:e=>{e.tryConsumeResource("PRIMAL_REND_READY"),e.hasTraitUnlocked("ENHANCED_PRIMAL_REND")&&e.gainProc("PRIMAL_RUINATION_READY")},highlightIf:e=>e.hasResourceAvailable("PRIMAL_REND_READY"),replaceIf:[{newSkill:"PRIMAL_RUINATION",condition:e=>e.hasResourceAvailable("PRIMAL_RUINATION_READY")}],jobPotencyModifiers:e=>[J.AutoCDH]});_s("PRIMAL_WRATH",96,"cd_PRIMAL_WRATH",{startOnHotbar:!1,potency:700,falloff:.5,applicationDelay:1.15,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("WRATHFUL"),onConfirm:e=>e.tryConsumeResource("WRATHFUL"),highlightIf:e=>!0});Qn("PRIMAL_RUINATION",100,{startOnHotbar:!1,potency:780,falloff:.5,applicationDelay:1.06,validateAttempt:e=>e.hasResourceAvailable("PRIMAL_RUINATION_READY"),onConfirm:e=>{e.tryConsumeResource("PRIMAL_RUINATION_READY")},highlightIf:e=>!0,jobPotencyModifiers:e=>[J.AutoCDH]});_s("INFURIATE",50,"cd_INFURIATE",{applicationDelay:0,requiresCombat:!0,cooldown:60,maxCharges:2,onApplication:e=>{e.gainBeastGauge(50),e.hasTraitUnlocked("NASCENT_CHAOS")&&e.gainProc("NASCENT_CHAOS")}});Qn("INNER_CHAOS",80,{startOnHotbar:!1,potency:660,applicationDelay:.94,validateAttempt:e=>e.hasResourceAvailable("BEAST_GAUGE",50)&&e.hasResourceAvailable("NASCENT_CHAOS"),onConfirm:e=>{e.tryConsumeResource("NASCENT_CHAOS"),e.resources.get("BEAST_GAUGE").consume(50),Bf(e)},highlightIf:e=>e.hasResourceAvailable("BEAST_GAUGE",50),jobPotencyModifiers:e=>[J.AutoCDH]});Qn("CHAOTIC_CYCLONE",72,{startOnHotbar:!1,potency:200,falloff:0,applicationDelay:1.43,validateAttempt:e=>e.hasResourceAvailable("BEAST_GAUGE",50)&&e.hasResourceAvailable("NASCENT_CHAOS"),onConfirm:e=>{e.tryConsumeResource("NASCENT_CHAOS"),e.resources.get("BEAST_GAUGE").consume(50),Bf(e)},highlightIf:e=>e.hasResourceAvailable("BEAST_GAUGE",50),jobPotencyModifiers:e=>[J.AutoCDH]});_s("ONSLAUGHT",62,"cd_ONSLAUGHT",{potency:150,applicationDelay:.63,cooldown:30,maxCharges:2,animationLock:Wt});_s("UPHEAVAL",64,"cd_UPHEAVAL",{potency:420,applicationDelay:.62,cooldown:30});_s("OROGENY",86,"cd_UPHEAVAL",{potency:150,falloff:0,applicationDelay:.62,cooldown:30});Ye("WAR","VENGEANCE",38,"cd_VENGEANCE",{rscType:"VENGEANCE",autoUpgrade:{trait:"VENGEANCE_MASTERY",otherSkill:"DAMNATION"},cooldown:120,applicationDelay:.62});Ye("WAR","DAMNATION",92,"cd_VENGEANCE",{rscType:"DAMNATION",autoDowngrade:{trait:"VENGEANCE_MASTERY",otherSkill:"VENGEANCE"},cooldown:120,applicationDelay:.62});_s("RETALIATION",38,"cd_RETALIATION",{highlightIf:e=>e.hasResourceAvailable("VENGEANCE")||e.hasResourceAvailable("DAMNATION"),validateAttempt:e=>e.hasResourceAvailable("VENGEANCE")||e.hasResourceAvailable("DAMNATION"),potency:55,applicationDelay:.534,animationLock:en,cooldown:en,startsAuto:!1});Ye("WAR","RAW_INTUITION",56,"cd_RAW_INTUITION",{rscType:"RAW_INTUITION",autoUpgrade:{trait:"RAW_INTUITION_MASTERY",otherSkill:"BLOODWHETTING"},cooldown:25,applicationDelay:.45});Ye("WAR","BLOODWHETTING",82,"cd_RAW_INTUITION",{rscType:"BLOODWHETTING",autoDowngrade:{trait:"RAW_INTUITION_MASTERY",otherSkill:"RAW_INTUITION"},onApplication:e=>{e.gainProc("STEM_THE_FLOW"),e.gainProc("STEM_THE_TIDE")},cooldown:25,applicationDelay:.45});et("WAR","NASCENT_FLASH",76,"cd_RAW_INTUITION",{onApplication:e=>{let t=6;e.hasTraitUnlocked("ENHANCED_NASCENT_FLASH")&&(t=8),e.resources.get("NASCENT_FLASH").gain(1),e.enqueueResourceDrop("NASCENT_FLASH",t)},cooldown:25,applicationDelay:.45});Ye("WAR","HOLMGANG",45,"cd_HOLMGANG",{rscType:"HOLMGANG",cooldown:240,applicationDelay:.45});Ye("WAR","THRILL_OF_BATTLE",30,"cd_THRILL_OF_BATTLE",{rscType:"THRILL_OF_BATTLE",cooldown:90,applicationDelay:.62});et("WAR","EQUILIBRIUM",58,"cd_EQUILIBRIUM",{cooldown:60,applicationDelay:.62,onApplication:e=>{e.hasTraitUnlocked("ENHANCED_EQUILIBRIUM")&&e.gainProc("EQUILIBRIUM")}});Ye("WAR","SHAKE_IT_OFF",68,"cd_SHAKE_IT_OFF",{rscType:"SHAKE_IT_OFF",cooldown:90,onApplication:(e,t)=>{let n=0;_B.forEach(o=>{e.tryConsumeResource(o)&&(n+=1)}),console.debug(`Shake It Off dispelled ${n} buffs`),e.gainProc("SHAKE_IT_OFF_OVER_TIME")},applicationDelay:0});et("WAR","DEFIANCE",10,"cd_DEFIANCE",{cooldown:2,maxCharges:1,applicationDelay:0,validateAttempt:e=>!e.hasResourceAvailable("DEFIANCE"),onConfirm:e=>e.resources.get("DEFIANCE").gain(1),replaceIf:[{newSkill:"RELEASE_DEFIANCE",condition:e=>e.hasResourceAvailable("DEFIANCE")}],secondaryCooldown:{cdName:"cd_RELEASE_DEFIANCE",cooldown:1,maxCharges:1}});et("WAR","RELEASE_DEFIANCE",10,"cd_RELEASE_DEFIANCE",{startOnHotbar:!1,cooldown:1,maxCharges:1,secondaryCooldown:{cdName:"cd_DEFIANCE",cooldown:2,maxCharges:1},applicationDelay:0,validateAttempt:e=>e.hasResourceAvailable("DEFIANCE"),onConfirm:e=>e.tryConsumeResource("DEFIANCE")});const TO=["CIRCLE_OF_SCORN_DOT"],NB=Object.keys(VR).filter(e=>!TO.includes(e));Object.keys(VR).forEach(e=>zt(e,`PLD/${Pe[e].name}.png`));class CB extends Xt{jobSpecificOtherTargetedBuffViewProps(){return[...TO.flatMap(t=>this.makeTargetedTimers(t))]}jobSpecificSelfTargetedBuffViewProps(){return NB.map(t=>this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){const n=this.state.resources,o=n.get("PLD_COMBO_TRACKER"),s=n.get("PLD_AOE_COMBO_TRACKER"),c=n.get("OATH_GAUGE").availableAmount(),d=n.get("IRON_WILL").availableAmount(),f=o.available(1)?o.pendingChange?.timeTillEvent:s.available(1)?s.pendingChange?.timeTillEvent:void 0,h=this.state.findAutoAttackTimerInQueue();let m="";return this.state.hasResourceAvailable("STORED_AUTO")?m="stored":m=h!==-1?h.toFixed(3):"N/A",[{kind:"bar",name:N({en:"Auto Tracker"}),color:t.pld.ironWillColor,progress:h!==-1?(3-h)/3:0,valueString:m},{kind:"bar",name:N({en:"Combo Timer",zh:""}),color:t.pld.pldComboTimer,progress:f?f/30:0,valueString:f?.toFixed(3)??"N/A"},{kind:"counter",name:N({en:"Iron Will",zh:""}),color:t.pld.ironWillColor,currentStacks:d,maxStacks:1},{kind:"bar",name:N({en:"Oath Gauge",zh:""}),color:t.pld.oathGaugeColor,progress:c/100,valueString:c.toFixed(0)}]}}const Nt=(e,t,n)=>{Ve("PLD",e,t,n??{})};Nt("FIGHT_OR_FLIGHT",1,{timeout:20});Nt("IRON_WILL",1);Nt("OATH_GAUGE",100);Nt("SHELTRON",1,{timeout:6});Nt("SENTINEL",1,{timeout:15});Nt("CIRCLE_OF_SCORN_DOT",1,{timeout:15});Nt("HALLOWED_GROUND",1,{timeout:10});Nt("BULWARK",1,{timeout:10});Nt("GORING_BLADE_READY",1,{timeout:30});Nt("DIVINE_VEIL",1,{timeout:30});Nt("ATONEMENT_READY",1,{timeout:30,warnOnTimeout:!0});Nt("DIVINE_MIGHT",1,{timeout:30,warnOnTimeout:!0});Nt("KNIGHTS_RESOLVE",1,{timeout:4});Nt("KNIGHTS_BENEDICTION",1,{timeout:12});Nt("REQUIESCAT",4,{timeout:30,warnOnTimeout:!0});Nt("CONFITEOR_READY",1,{timeout:30,warnOnTimeout:!0});Nt("PASSAGE_OF_ARMS",1,{timeout:18});Nt("SUPPLICATION_READY",1,{timeout:30,warnOnTimeout:!0});Nt("SEPULCHRE_READY",1,{timeout:30,warnOnTimeout:!0});Nt("HOLY_SHELTRON",1,{timeout:8});Nt("BLADE_OF_HONOR_READY",1,{timeout:30,warnOnTimeout:!0});Nt("GUARDIAN",1,{timeout:15});Nt("GUARDIANS_WILL",1,{timeout:15});Nt("PLD_COMBO_TRACKER",2,{timeout:30});Nt("PLD_CONFITEOR_COMBO_TRACKER",3,{timeout:30});Nt("PLD_AOE_COMBO_TRACKER",1,{timeout:30});Nt("INTERVENTION",1,{timeout:8});Nt("ARMS_UP",1);Nt("COVER",1,{timeout:12});const FA=new Map([["TOTAL_ECLIPSE",0],["PROMINENCE",1]]),jA=new Map([["FAST_BLADE",0],["RIOT_BLADE",1],["ROYAL_AUTHORITY",2]]),SO=new Map([["CONFITEOR",0],["BLADE_OF_FAITH",1],["BLADE_OF_TRUTH",2],["BLADE_OF_VALOR",3]]),bh=["HOLY_SPIRIT","HOLY_CIRCLE"];class bB extends qt{constructor(t){super(t),this.resources.get("OATH_GAUGE").gain(100),this.registerRecurringEvents([{groupedEffects:[{effectName:"CIRCLE_OF_SCORN_DOT",appliedBy:["CIRCLE_OF_SCORN"]}]}])}get statusPropsGenerator(){return new CB(this)}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("FIGHT_OR_FLIGHT")&&t.addBuff(k.FightOrFlight);const o=n.name;this.hasResourceAvailable("DIVINE_MIGHT")&&(o==="HOLY_SPIRIT"||o==="HOLY_CIRCLE")?t.addBuff(k.DivineMight):this.hasResourceAvailable("REQUIESCAT")&&(o==="HOLY_SPIRIT"||o==="HOLY_CIRCLE"||o==="CONFITEOR"||o==="BLADE_OF_FAITH"||o==="BLADE_OF_TRUTH"||o==="BLADE_OF_VALOR")&&t.addBuff(k.Requiescat)}cancelChanneledSkills(){this.tryConsumeResource("PASSAGE_OF_ARMS")}jobSpecificOnAutoAttack(){I.reportAutoTick(this.time,"auto"),this.resources.get("OATH_GAUGE").gain(5)}isSpellInstant(t){return t!=="CLEMENCY"?this.hasResourceAvailable("DIVINE_MIGHT")||this.hasResourceAvailable("REQUIESCAT"):this.hasResourceAvailable("REQUIESCAT")}captureSpellCastTime(t,n){return this.isSpellInstant(t)?0:this.config.adjustedCastTime(n)}tryConsumeRequiescat(t){(bh.includes(t)||SO.has(t)||t==="CLEMENCY")&&this.tryConsumeResource("REQUIESCAT")}isHolySpiritCircleGoodForReq(){const t=this.resources.get("REQUIESCAT").availableAmount();return t===0||this.hasResourceAvailable("PLD_CONFITEOR_COMBO_TRACKER")||this.config.level>=90?!1:this.config.level>=80?!this.hasResourceAvailable("CONFITEOR_READY")||this.hasResourceAvailable("CONFITEOR_READY")&&t>1:!0}progressComboTracker(t,n,o){const s=this.resources.get(n).maxValue,c=o.get(t)??-1,d=this.resources.get(n).availableAmount();this.tryConsumeResource(n,!0),(c!==s&&c===d||c===0)&&(this.resources.get(n).gain(c+1),this.enqueueResourceDrop(n))}fixPLDPhysicalComboState(t){FA.has(t)?(this.tryConsumeResource("PLD_COMBO_TRACKER",!0),this.progressComboTracker(t,"PLD_AOE_COMBO_TRACKER",FA)):jA.has(t)&&(this.tryConsumeResource("PLD_AOE_COMBO_TRACKER",!0),this.progressComboTracker(t,"PLD_COMBO_TRACKER",jA)),(FA.has(t)||jA.has(t)||t==="SHIELD_BASH")&&this.tryConsumeResource("PLD_CONFITEOR_COMBO_TRACKER",!0)}getDelayedManaFromAction(t,n){this.addEvent(new Oe("get MP from "+n,this.skillsList.get(n).applicationDelay,()=>{this.resources.get("MANA").gain(t)}))}refreshBuff(t,n){this.addEvent(new Oe("gain buff",n,()=>{this.resources.get(t).gain(1),this.enqueueResourceDrop(t)}))}}const ki=(e,t,n)=>{const o=Le(n.onConfirm,s=>{e!=="SHIELD_LOB"&&e!=="SHIELD_BASH"&&e!=="GORING_BLADE"&&s.fixPLDPhysicalComboState(e)});return ia("PLD",e,t,{...n,onConfirm:o,recastTime:s=>s.config.adjustedSksGCD(),jobPotencyModifiers:s=>s.hasResourceAvailable("FIGHT_OR_FLIGHT")?[J.FightOrFlight]:[]})},ps=(e,t,n)=>{const o=Le((s,c)=>{s.hasResourceAvailable("DIVINE_MIGHT")&&bh.includes(e)?s.tryConsumeResource("DIVINE_MIGHT"):s.tryConsumeRequiescat(e)},n.onConfirm);return Xn("PLD",e,t,{...n,castTime:s=>s.captureSpellCastTime(e,n.baseCastTime),recastTime:s=>s.config.adjustedGCD(),manaCost:n.baseManaCost??0,potency:n.basePotency,jobPotencyModifiers:s=>{const c=[];return bh.includes(e)&&s.hasResourceAvailable("DIVINE_MIGHT")?n.dmPotency&&c.push(Zx(na(s,n.dmPotency)-na(s,n.basePotency))):(bh.includes(e)||SO.has(e))&&s.hasResourceAvailable("REQUIESCAT")&&n.reqPotency&&c.push(qx(na(s,n.reqPotency)-na(s,n.basePotency))),e!=="CLEMENCY"&&s.hasResourceAvailable("FIGHT_OR_FLIGHT")&&c.push(J.FightOrFlight),n.jobPotencyModifiers&&c.push(...n.jobPotencyModifiers(s)),c},isInstantFn:s=>s.isSpellInstant(e),onConfirm:o})},Ya=(e,t,n,o)=>et("PLD",e,t,n,{...o,jobPotencyModifiers:s=>{const c=[];return s.hasResourceAvailable("FIGHT_OR_FLIGHT")&&c.push(J.FightOrFlight),c}}),gO=(e,t,n,o)=>Ye("PLD",e,t,n,{...o,rscType:o.rscType,cooldown:o.cooldown,applicationDelay:o.applicationDelay}),IO={newSkill:"ATONEMENT",condition:e=>e.hasResourceAvailable("ATONEMENT_READY")},_O={newSkill:"SUPPLICATION",condition:e=>e.hasResourceAvailable("SUPPLICATION_READY")},pO={newSkill:"SEPULCHRE",condition:e=>e.hasResourceAvailable("SEPULCHRE_READY")},VT={newSkill:"CONFITEOR",condition:e=>e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").availableAmount()===0},gu={newSkill:"BLADE_OF_FAITH",condition:e=>e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").availableAmount()===1},Iu={newSkill:"BLADE_OF_TRUTH",condition:e=>e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").availableAmount()===2},_u={newSkill:"BLADE_OF_VALOR",condition:e=>e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").availableAmount()===3},pR={newSkill:"BLADE_OF_HONOR",condition:e=>e.hasResourceAvailable("BLADE_OF_HONOR_READY")},OB={newSkill:"IMPERATOR",condition:e=>!e.hasResourceAvailable("BLADE_OF_HONOR_READY")},DB={newSkill:"IRON_WILL",condition:e=>!e.hasResourceAvailable("IRON_WILL")},yB={newSkill:"RELEASE_IRON_WILL",condition:e=>e.hasResourceAvailable("IRON_WILL")};ki("SHIELD_LOB",15,{potency:100,applicationDelay:.89,startsAuto:!1});ki("FAST_BLADE",1,{potency:[["NEVER",150],["MELEE_MASTERY_TANK",200],["MELEE_MASTERY_II_TANK",220]],applicationDelay:.62});ki("RIOT_BLADE",4,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",140],["MELEE_MASTERY_II_TANK",170]],combo:{potency:[["NEVER",260],["MELEE_MASTERY_TANK",300],["MELEE_MASTERY_II_TANK",330]],resource:"PLD_COMBO_TRACKER",resourceValue:1},highlightIf:e=>e.resources.get("PLD_COMBO_TRACKER").availableAmount()===1,applicationDelay:.76,onConfirm:e=>{e.resources.get("PLD_COMBO_TRACKER").availableAmount()===1&&e.getDelayedManaFromAction(1e3,"RIOT_BLADE")}});ki("ROYAL_AUTHORITY",60,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",140],["MELEE_MASTERY_II_TANK",200]],combo:{potency:[["NEVER",360],["MELEE_MASTERY_TANK",400],["MELEE_MASTERY_II_TANK",460]],resource:"PLD_COMBO_TRACKER",resourceValue:2},highlightIf:e=>e.resources.get("PLD_COMBO_TRACKER").availableAmount()===2,applicationDelay:.62,onConfirm:e=>{e.resources.get("PLD_COMBO_TRACKER").availableAmount()===2&&(e.refreshBuff("DIVINE_MIGHT",0),e.hasTraitUnlocked("SWORD_OATH")&&(e.refreshBuff("ATONEMENT_READY",0),e.tryConsumeResource("SUPPLICATION_READY"),e.tryConsumeResource("SEPULCHRE_READY")))}});ki("ATONEMENT",76,{replaceIf:[_O,pO],potency:[["NEVER",360],["MELEE_MASTERY_TANK",400],["MELEE_MASTERY_II_TANK",460]],applicationDelay:1.26,validateAttempt:e=>e.hasResourceAvailable("ATONEMENT_READY"),highlightIf:e=>e.hasResourceAvailable("ATONEMENT_READY"),onConfirm:e=>{e.tryConsumeResource("ATONEMENT_READY"),e.refreshBuff("SUPPLICATION_READY",0),e.getDelayedManaFromAction(400,"ATONEMENT")}});ki("SUPPLICATION",76,{startOnHotbar:!1,replaceIf:[IO,pO],potency:[["NEVER",380],["MELEE_MASTERY_TANK",420],["MELEE_MASTERY_II_TANK",500]],applicationDelay:1.16,validateAttempt:e=>e.hasResourceAvailable("SUPPLICATION_READY"),highlightIf:e=>e.hasResourceAvailable("SUPPLICATION_READY"),onConfirm:e=>{e.tryConsumeResource("SUPPLICATION_READY"),e.refreshBuff("SEPULCHRE_READY",0),e.getDelayedManaFromAction(400,"SUPPLICATION")}});ki("SEPULCHRE",76,{startOnHotbar:!1,replaceIf:[IO,_O],potency:[["NEVER",400],["MELEE_MASTERY_TANK",440],["MELEE_MASTERY_II_TANK",540]],applicationDelay:1.29,validateAttempt:e=>e.hasResourceAvailable("SEPULCHRE_READY"),highlightIf:e=>e.hasResourceAvailable("SEPULCHRE_READY"),onConfirm:e=>{e.tryConsumeResource("SEPULCHRE_READY"),e.getDelayedManaFromAction(400,"SEPULCHRE")}});ki("TOTAL_ECLIPSE",6,{potency:120,applicationDelay:.76,falloff:0});ki("PROMINENCE",40,{potency:100,combo:{potency:220,resource:"PLD_AOE_COMBO_TRACKER",resourceValue:1},applicationDelay:.62,falloff:0,highlightIf:e=>e.resources.get("PLD_AOE_COMBO_TRACKER").availableAmount()===1,onConfirm:e=>{e.resources.get("PLD_AOE_COMBO_TRACKER").availableAmount()===1&&e.hasTraitUnlocked("ENHANCED_PROMINENCE")&&(e.refreshBuff("DIVINE_MIGHT",0),e.getDelayedManaFromAction(500,"PROMINENCE"))}});ps("HOLY_SPIRIT",64,{baseCastTime:1.5,applicationDelay:.76,baseManaCost:1e3,startsAuto:!1,basePotency:[["NEVER",300],["MELEE_MASTERY_TANK",350],["MELEE_MASTERY_II_TANK",400]],reqPotency:[["NEVER",600],["MELEE_MASTERY_TANK",650],["MELEE_MASTERY_II_TANK",700]],dmPotency:[["NEVER",400],["MELEE_MASTERY_TANK",450],["MELEE_MASTERY_II_TANK",500]],highlightIf:e=>e.hasResourceAvailable("DIVINE_MIGHT")||e.isHolySpiritCircleGoodForReq()});ps("HOLY_CIRCLE",72,{baseCastTime:1.5,applicationDelay:.62,baseManaCost:1e3,basePotency:100,reqPotency:350,dmPotency:250,falloff:0,highlightIf:e=>e.hasResourceAvailable("DIVINE_MIGHT")||e.isHolySpiritCircleGoodForReq()});ki("GORING_BLADE",54,{applicationDelay:.53,potency:700,validateAttempt:e=>e.hasResourceAvailable("GORING_BLADE_READY"),highlightIf:e=>e.hasResourceAvailable("GORING_BLADE_READY"),onConfirm:e=>{e.tryConsumeResource("GORING_BLADE_READY")}});ps("CONFITEOR",80,{replaceIf:[gu,Iu,_u],baseCastTime:0,applicationDelay:.62,baseManaCost:1e3,startsAuto:!1,basePotency:[["NEVER",420],["MELEE_MASTERY_II_TANK",500]],reqPotency:[["NEVER",920],["MELEE_MASTERY_II_TANK",1e3]],falloff:.6,validateAttempt:e=>e.hasResourceAvailable("CONFITEOR_READY"),highlightIf:e=>e.hasResourceAvailable("CONFITEOR_READY"),onConfirm:e=>{e.tryConsumeResource("CONFITEOR_READY"),e.tryConsumeResource("PLD_CONFITEOR_COMBO_TRACKER",!0),e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").gain(1),e.enqueueResourceDrop("PLD_CONFITEOR_COMBO_TRACKER")}});ps("BLADE_OF_FAITH",90,{replaceIf:[VT,Iu,_u],startOnHotbar:!1,baseCastTime:0,baseManaCost:1e3,startsAuto:!1,applicationDelay:.62,basePotency:[["NEVER",220],["MELEE_MASTERY_II_TANK",260]],reqPotency:[["NEVER",720],["MELEE_MASTERY_II_TANK",760]],falloff:.6,validateAttempt:e=>gu.condition(e),highlightIf:e=>gu.condition(e),onConfirm:e=>{e.tryConsumeResource("PLD_CONFITEOR_COMBO_TRACKER",!0),e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").gain(2),e.enqueueResourceDrop("PLD_CONFITEOR_COMBO_TRACKER")}});ps("BLADE_OF_TRUTH",90,{replaceIf:[VT,gu,_u],startOnHotbar:!1,baseCastTime:0,baseManaCost:1e3,applicationDelay:.89,startsAuto:!1,basePotency:[["NEVER",320],["MELEE_MASTERY_II_TANK",380]],reqPotency:[["NEVER",820],["MELEE_MASTERY_II_TANK",880]],falloff:.6,validateAttempt:e=>Iu.condition(e),highlightIf:e=>Iu.condition(e),onConfirm:e=>{e.tryConsumeResource("PLD_CONFITEOR_COMBO_TRACKER",!0),e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").gain(3),e.enqueueResourceDrop("PLD_CONFITEOR_COMBO_TRACKER")}});ps("BLADE_OF_VALOR",90,{replaceIf:[VT,gu,Iu],startOnHotbar:!1,baseCastTime:0,baseManaCost:1e3,applicationDelay:.89,startsAuto:!1,basePotency:[["NEVER",420],["MELEE_MASTERY_II_TANK",500]],reqPotency:[["NEVER",920],["MELEE_MASTERY_II_TANK",1e3]],falloff:.6,validateAttempt:e=>_u.condition(e),highlightIf:e=>_u.condition(e),onConfirm:e=>{e.tryConsumeResource("PLD_CONFITEOR_COMBO_TRACKER",!0),e.refreshBuff("BLADE_OF_HONOR_READY",0)}});Ya("FIGHT_OR_FLIGHT",2,"cd_FIGHT_OR_FLIGHT",{applicationDelay:.62,cooldown:60,onConfirm:e=>{e.refreshBuff("GORING_BLADE_READY",0),e.refreshBuff("FIGHT_OR_FLIGHT",.62)}});Ya("REQUIESCAT",68,"cd_REQUIESCAT",{autoUpgrade:{trait:"REQUIESCAT_MASTERY",otherSkill:"IMPERATOR"},applicationDelay:.62,cooldown:60,potency:320,onConfirm:e=>{e.resources.get("REQUIESCAT").gain(4),e.enqueueResourceDrop("REQUIESCAT",30),e.hasTraitUnlocked("ENHANCED_REQUIESCAT")&&e.refreshBuff("CONFITEOR_READY",0)}});Ya("IMPERATOR",96,"cd_IMPERATOR",{autoDowngrade:{trait:"REQUIESCAT_MASTERY",otherSkill:"REQUIESCAT"},replaceIf:[pR],applicationDelay:1.29,cooldown:60,potency:580,falloff:.6,onConfirm:e=>{e.resources.get("REQUIESCAT").gain(4),e.enqueueResourceDrop("REQUIESCAT",30,4),e.hasTraitUnlocked("ENHANCED_REQUIESCAT")&&e.refreshBuff("CONFITEOR_READY",0)}});Ya("BLADE_OF_HONOR",100,"cd_BLADE_OF_HONOR",{startOnHotbar:!1,cooldown:1,replaceIf:[OB],validateAttempt:pR.condition,highlightIf:pR.condition,applicationDelay:1.16,potency:1e3,startsAuto:!1,falloff:.5,onConfirm:e=>{e.tryConsumeResource("BLADE_OF_HONOR_READY")}});Ya("SPIRITS_WITHIN",30,"cd_SPIRITS_WITHIN",{autoUpgrade:{trait:"SPIRITS_WITHIN_MASTERY",otherSkill:"EXPIACION"},applicationDelay:.89,cooldown:30,potency:270,onConfirm:e=>{e.getDelayedManaFromAction(500,"SPIRITS_WITHIN")}});Ya("EXPIACION",86,"cd_EXPIACION",{autoDowngrade:{trait:"SPIRITS_WITHIN_MASTERY",otherSkill:"SPIRITS_WITHIN"},applicationDelay:.36,cooldown:30,potency:450,falloff:.6,onConfirm:e=>{e.getDelayedManaFromAction(500,"EXPIACION")}});Ya("CIRCLE_OF_SCORN",50,"cd_CIRCLE_OF_SCORN",{applicationDelay:1.02,cooldown:30,potency:140,falloff:0,onConfirm:(e,t)=>{const n=[];e.hasResourceAvailable("FIGHT_OR_FLIGHT")&&n.push(J.FightOrFlight),e.addDoTPotencies({node:t,effectName:"CIRCLE_OF_SCORN_DOT",skillName:"CIRCLE_OF_SCORN",tickPotency:30,speedStat:"sks",modifiers:n}),e.addEvent(new Oe("apply CoS dot",1.02,()=>{e.applyDoT("CIRCLE_OF_SCORN_DOT",t)}))}});Ya("INTERVENE",66,"cd_INTERVENE",{applicationDelay:.62,cooldown:30,potency:150,maxCharges:2,animationLock:Wt});ps("CLEMENCY",58,{baseCastTime:1.5,applicationDelay:.62,baseManaCost:2e3,basePotency:0,highlightIf:e=>e.hasResourceAvailable("REQUIESCAT")});Ya("SHELTRON",35,"cd_SHELTRON",{autoUpgrade:{trait:"SHELTRON_MASTERY",otherSkill:"HOLY_SHELTRON"},validateAttempt:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,highlightIf:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,applicationDelay:0,cooldown:5,onConfirm:e=>{e.resources.get("OATH_GAUGE").consume(50),e.refreshBuff("SHELTRON",0)}});Ya("HOLY_SHELTRON",82,"cd_HOLY_SHELTRON",{autoDowngrade:{trait:"SHELTRON_MASTERY",otherSkill:"SHELTRON"},applicationDelay:0,cooldown:5,validateAttempt:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,highlightIf:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,onConfirm:e=>{e.refreshBuff("HOLY_SHELTRON",0),e.refreshBuff("KNIGHTS_RESOLVE",0),e.refreshBuff("KNIGHTS_BENEDICTION",0),e.resources.get("OATH_GAUGE").consume(50)}});Ya("INTERVENTION",62,"cd_INTERVENTION",{applicationDelay:.8,cooldown:10,validateAttempt:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,highlightIf:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,onConfirm:e=>{e.resources.get("OATH_GAUGE").consume(50)}});gO("HALLOWED_GROUND",50,"cd_HALLOWED_GROUND",{rscType:"HALLOWED_GROUND",applicationDelay:0,cooldown:420});gO("BULWARK",52,"cd_BULWARK",{rscType:"BULWARK",applicationDelay:0,cooldown:90});Ya("SENTINEL",38,"cd_SENTINEL",{autoUpgrade:{trait:"SENTINEL_MASTERY",otherSkill:"GUARDIAN"},applicationDelay:.53,cooldown:120,onConfirm:e=>{e.refreshBuff("SENTINEL",.53)}});Ya("GUARDIAN",92,"cd_GUARDIAN",{autoDowngrade:{trait:"SENTINEL_MASTERY",otherSkill:"SENTINEL"},applicationDelay:.53,cooldown:120,onConfirm:e=>{e.refreshBuff("GUARDIAN",.53),e.refreshBuff("GUARDIANS_WILL",.53)}});Ya("DIVINE_VEIL",56,"cd_DIVINE_VEIL",{applicationDelay:0,cooldown:90,onConfirm:e=>{e.refreshBuff("DIVINE_VEIL",0)}});Ya("PASSAGE_OF_ARMS",70,"cd_PASSAGE_OF_ARMS",{applicationDelay:.62,cooldown:120,onConfirm:e=>{e.refreshBuff("PASSAGE_OF_ARMS",.62)}});Ya("COVER",45,"cd_COVER",{applicationDelay:.62,cooldown:120,validateAttempt:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,highlightIf:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,onConfirm:e=>{e.resources.get("OATH_GAUGE").consume(50)}});Ya("IRON_WILL",10,"cd_IRON_WILL",{applicationDelay:0,cooldown:2,validateAttempt:e=>!e.hasResourceAvailable("IRON_WILL"),onConfirm:e=>{e.resources.get("IRON_WILL").gain(1)},replaceIf:[yB],secondaryCooldown:{cdName:"cd_RELEASE_IRON_WILL",cooldown:1,maxCharges:1}});Ya("RELEASE_IRON_WILL",10,"cd_RELEASE_IRON_WILL",{startOnHotbar:!1,replaceIf:[DB],applicationDelay:0,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("IRON_WILL"),onConfirm:e=>{e.tryConsumeResource("IRON_WILL")},secondaryCooldown:{cdName:"cd_IRON_WILL",cooldown:2,maxCharges:1}});ki("SHIELD_BASH",10,{potency:100,applicationDelay:.45});Object.keys(BR).forEach(e=>zt(e,`DRK/${Pe[e].name}.png`));const vB=Object.keys(BR);class MB extends Xt{jobSpecificOtherTargetedBuffViewProps(){return[]}jobSpecificSelfTargetedBuffViewProps(){return vB.map(t=>t==="GRIT"?this.makeCommonTimerless(t):this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){const n=this.state.resources,o=n.get("DRK_COMBO_TRACKER"),s=n.get("DRK_AOE_COMBO_TRACKER"),c=n.get("BLOOD_GAUGE").availableAmount(),d=n.get("GRIT").availableAmount(),f=n.get("DARKSIDE").pendingChange?.timeTillEvent??0,h=n.get("DARK_ARTS").availableAmount(),m=o.available(1)?o.pendingChange?.timeTillEvent:s.available(1)?s.pendingChange?.timeTillEvent:void 0;return[{kind:"bar",name:N({en:"Combo Timer",zh:""}),color:t.drk.drkComboTimer,progress:m?m/30:0,valueString:m?.toFixed(3)??"N/A"},{kind:"counter",name:Ke("GRIT"),color:t.drk.grit,currentStacks:d,maxStacks:1},{kind:"bar",name:Ke("DARKSIDE"),color:t.drk.darkside,progress:f?f/60:0,valueString:f.toFixed(3)},{kind:"counter",name:Ke("DARK_ARTS"),color:t.drk.darkarts,currentStacks:h,maxStacks:1},{kind:"bar",name:Ke("BLOOD_GAUGE"),color:t.drk.blood,progress:c/100,valueString:c.toFixed(0)}]}}const ua=(e,t,n)=>{Ve("DRK",e,t,n??{})};ua("DARKSIDE",1,{timeout:60});ua("BLOOD_GAUGE",100,{warnOnOvercap:!0});ua("SALTED_EARTH",1,{timeout:15});ua("GRIT",1);ua("SHADOW_WALL",1,{timeout:15});ua("DARK_MIND",1,{timeout:10});ua("LIVING_DEAD",1,{timeout:10});ua("WALKING_DEAD",1,{timeout:10});ua("UNDEAD_REBIRTH",1);ua("DARK_MISSIONARY",1,{timeout:15});ua("DELIRIUM",3,{timeout:15,warnOnTimeout:!0});ua("BLOOD_WEAPON",3,{timeout:15,warnOnTimeout:!0});ua("BLACKEST_NIGHT",1,{timeout:7,warnOnTimeout:!0});ua("SCORN",1,{timeout:30,warnOnTimeout:!0});ua("OBLATION",1,{timeout:10});ua("SHADOWED_VIGIL",1,{timeout:15});ua("VIGILANT",1,{timeout:20});ua("DARK_ARTS",1,{warnOnOvercap:!0});ua("DRK_COMBO_TRACKER",2,{timeout:30});ua("DRK_AOE_COMBO_TRACKER",1,{timeout:30});ua("DRK_DELIRIUM_COMBO_TRACKER",2,{timeout:30});const WT=6;ua("ESTEEM_TRACKER",WT);const LB=6.8,xB=2.18;class HB extends qt{constructor(t){super(t),this.registerRecurringEvents([{groupedEffects:[{effectName:"SALTED_EARTH",appliedBy:["SALTED_EARTH"],isGroundTargeted:!0}]}],["LIVING_SHADOW"])}get statusPropsGenerator(){return new MB(this)}refreshDarkside(){if(this.hasResourceAvailable("DARKSIDE")){const t=this.resources.get("DARKSIDE"),n=Ut("DRK","DARKSIDE").maxTimeout,o=(t.pendingChange?.timeTillEvent??0)+30;t.overrideTimer(this,Math.min(n,o))}else this.resources.get("DARKSIDE").gain(1),this.enqueueResourceDrop("DARKSIDE",30)}gainBloodGauge(t){this.resources.get("BLOOD_GAUGE").gain(t)}bloodWeaponConfirm(t){this.hasResourceAvailable("BLOOD_WEAPON")&&(this.tryConsumeResource("BLOOD_WEAPON"),this.gainBloodGauge(10),this.addEvent(new Oe("gain blood weapon mana",t,()=>{this.resources.get("MANA").gain(600)})))}processComboStatus(t){if(["DISESTEEM","UNMEND","BLOODSPILLER","QUIETUS"].includes(t))return;let n=[this.resources.get("DRK_COMBO_TRACKER").availableAmount(),this.resources.get("DRK_AOE_COMBO_TRACKER").availableAmount(),this.resources.get("DRK_DELIRIUM_COMBO_TRACKER").availableAmount()];t==="HARD_SLASH"?n=[1,0,0]:t==="SYPHON_STRIKE"?n=[n[0]===1?2:0,0,0]:t==="SOULEATER"?n=[0,0,0]:t==="IMPALEMENT"?n[2]=0:t==="SCARLET_DELIRIUM"?n[2]=1:t==="COMEUPPANCE"?n[2]=2:t==="TORCLEAVER"?n[2]=0:t==="UNLEASH"?n=[0,1,0]:t==="STALWART_SOUL"?n=[0,0,0]:n=[0,0,0],this.setComboState("DRK_COMBO_TRACKER",n[0]),this.setComboState("DRK_AOE_COMBO_TRACKER",n[1]),this.setComboState("DRK_DELIRIUM_COMBO_TRACKER",n[2])}handleEsteemAttack(){if(!this.hasResourceAvailable("ESTEEM_TRACKER"))return;const t=this.resources.get("ESTEEM_TRACKER").node;t!==void 0&&this.resolveEsteemPotency(t),this.resources.get("ESTEEM_TRACKER").consume(1),this.hasResourceAvailable("ESTEEM_TRACKER")&&this.addEvent(new Oe("esteem hit",xB,()=>this.handleEsteemAttack()))}resolveEsteemPotency(t){const n=this.resources.get("ESTEEM_TRACKER").availableAmount();if(n===0)return;const o=t.getDotPotencies("ESTEEM_TRACKER")[WT-n];o.addModifiers(J.DrkPet),this.hasResourceAvailable("TINCTURE")&&o.addModifiers(J.Tincture),o.snapshotTime=this.getDisplayTime(),I.resolvePotency(o)}}const yl=(e,t,n)=>ia("DRK",e,t,{...n,onConfirm:Le(n.onConfirm,o=>o.bloodWeaponConfirm(n.applicationDelay),o=>o.processComboStatus(e)),recastTime:o=>o.config.adjustedSksGCD(),jobPotencyModifiers:o=>o.hasResourceAvailable("DARKSIDE")?[J.Darkside]:[]}),XT=(e,t,n)=>Xn("DRK",e,t,{...n,onConfirm:Le(n.onConfirm,o=>o.processComboStatus(e)),recastTime:o=>o.config.adjustedGCD(),jobPotencyModifiers:o=>o.hasResourceAvailable("DARKSIDE")?[J.Darkside]:[]}),Sn=(e,t,n,o)=>et("DRK",e,t,n,{...o,jobPotencyModifiers:s=>s.hasResourceAvailable("DARKSIDE")?[J.Darkside]:[]}),Ns=(e,t,n,o)=>Ye("DRK",e,t,n,o);XT("UNMEND",15,{applicationDelay:.98,potency:150,startsAuto:!1,onConfirm:e=>{if(e.hasTraitUnlocked("ENHANCED_UNMEND")){const t=e.cooldowns.get("cd_SHADOWSTRIDE").timeTillNextStackAvailable();e.cooldowns.get("cd_SHADOWSTRIDE").overrideTimeTillNextStack(Math.max(0,t-5))}}});yl("HARD_SLASH",1,{applicationDelay:.58,potency:[["NEVER",150],["MELEE_MASTERY_TANK",180],["MELEE_MASTERY_II_TANK",300]]});yl("SYPHON_STRIKE",2,{applicationDelay:.62,highlightIf:e=>e.hasResourceExactly("DRK_COMBO_TRACKER",1),potency:[["NEVER",100],["MELEE_MASTERY_TANK",120],["MELEE_MASTERY_II_TANK",240]],combo:{potency:[["NEVER",240],["MELEE_MASTERY_TANK",260],["MELEE_MASTERY_II_TANK",380]],resource:"DRK_COMBO_TRACKER",resourceValue:1},onConfirm:e=>{e.hasResourceExactly("DRK_COMBO_TRACKER",1)&&e.addEvent(new Oe("gain syphon strike mana",.62,()=>{e.resources.get("MANA").gain(600)}))}});yl("SOULEATER",26,{applicationDelay:.62,highlightIf:e=>e.hasResourceExactly("DRK_COMBO_TRACKER",2),potency:[["NEVER",100],["MELEE_MASTERY_TANK",140],["MELEE_MASTERY_II_TANK",260]],combo:{potency:[["NEVER",320],["MELEE_MASTERY_TANK",360],["MELEE_MASTERY_II_TANK",480]],resource:"DRK_COMBO_TRACKER",resourceValue:2},onConfirm:e=>{e.hasResourceAvailable("DRK_COMBO_TRACKER",2)&&e.gainBloodGauge(20)}});XT("UNLEASH",6,{applicationDelay:.71,potency:120,falloff:0});XT("STALWART_SOUL",40,{applicationDelay:.62,highlightIf:e=>e.hasResourceExactly("DRK_AOE_COMBO_TRACKER",1),potency:[["NEVER",100],["MELEE_MASTERY_II_TANK",120]],combo:{potency:[["NEVER",140],["MELEE_MASTERY_II_TANK",160]],resource:"DRK_AOE_COMBO_TRACKER",resourceValue:1},falloff:0,onConfirm:e=>{e.hasResourceExactly("DRK_AOE_COMBO_TRACKER",1)&&(e.gainBloodGauge(20),e.addEvent(new Oe("gain stalwart soul mana",.62,()=>{e.resources.get("MANA").gain(600)})))}});const Ff=e=>{e.tryConsumeResource("DARK_ARTS"),e.refreshDarkside()},jf=e=>e.hasResourceAvailable("DARK_ARTS"),zf=e=>e.hasResourceAvailable("DARK_ARTS")?0:3e3;Sn("EDGE_OF_DARKNESS",40,"cd_FLOOD_OF_DARKNESS",{applicationDelay:.62,autoUpgrade:{trait:"DAKRSIDE_MASTERY",otherSkill:"EDGE_OF_SHADOW"},cooldown:1,manaCost:zf,highlightIf:jf,potency:300,onConfirm:Ff});Sn("EDGE_OF_SHADOW",74,"cd_FLOOD_OF_DARKNESS",{applicationDelay:.62,autoDowngrade:{trait:"DAKRSIDE_MASTERY",otherSkill:"EDGE_OF_DARKNESS"},cooldown:1,manaCost:zf,highlightIf:jf,potency:460,onConfirm:Ff});Sn("FLOOD_OF_DARKNESS",30,"cd_FLOOD_OF_DARKNESS",{applicationDelay:.62,autoUpgrade:{trait:"DAKRSIDE_MASTERY",otherSkill:"FLOOD_OF_SHADOW"},cooldown:1,manaCost:zf,highlightIf:jf,potency:100,falloff:0,onConfirm:Ff});Sn("FLOOD_OF_SHADOW",74,"cd_FLOOD_OF_DARKNESS",{applicationDelay:.62,autoDowngrade:{trait:"DAKRSIDE_MASTERY",otherSkill:"FLOOD_OF_DARKNESS"},cooldown:1,manaCost:zf,highlightIf:jf,potency:160,falloff:0,onConfirm:Ff});const lf=e=>e.hasResourceAvailable("BLOOD_GAUGE",50)||e.hasResourceAvailable("DELIRIUM"),Oh=[{newSkill:"BLOODSPILLER",condition:e=>!e.hasTraitUnlocked("ENHANCED_DELIRIUM")||!e.hasResourceAvailable("DELIRIUM")},{newSkill:"SCARLET_DELIRIUM",condition:e=>e.hasTraitUnlocked("ENHANCED_DELIRIUM")&&e.hasResourceAvailable("DELIRIUM")&&e.hasResourceExactly("DRK_DELIRIUM_COMBO_TRACKER",0)},{newSkill:"COMEUPPANCE",condition:e=>e.hasTraitUnlocked("ENHANCED_DELIRIUM")&&e.hasResourceAvailable("DELIRIUM")&&e.hasResourceExactly("DRK_DELIRIUM_COMBO_TRACKER",1)},{newSkill:"TORCLEAVER",condition:e=>e.hasTraitUnlocked("ENHANCED_DELIRIUM")&&e.hasResourceAvailable("DELIRIUM")&&e.hasResourceExactly("DRK_DELIRIUM_COMBO_TRACKER",2)}];yl("BLOODSPILLER",62,{applicationDelay:.8,validateAttempt:lf,highlightIf:lf,replaceIf:Oh,potency:[["NEVER",500],["MELEE_MASTERY_II_TANK",600]],onConfirm:e=>e.tryConsumeResource("DELIRIUM")||e.resources.get("BLOOD_GAUGE").consume(50)});const Dh=e=>e.hasTraitUnlocked("ENHANCED_DELIRIUM")&&e.hasResourceAvailable("DELIRIUM");yl("QUIETUS",64,{applicationDelay:.76,validateAttempt:lf,highlightIf:lf,replaceIf:[{newSkill:"IMPALEMENT",condition:Dh}],potency:[["NEVER",200],["MELEE_MASTERY_II_TANK",240]],falloff:0,onConfirm:e=>e.tryConsumeResource("DELIRIUM")||e.resources.get("BLOOD_GAUGE").consume(50)});[["SCARLET_DELIRIUM",.62,620],["COMEUPPANCE",.67,720],["TORCLEAVER",.62,820]].forEach((e,t)=>{const[n,o,s]=e;yl(n,96,{startOnHotbar:!1,applicationDelay:o,validateAttempt:Oh[t+1].condition,highlightIf:Oh[t+1].condition,replaceIf:Oh,potency:s,onConfirm:c=>c.tryConsumeResource("DELIRIUM"),onApplication:c=>c.resources.get("MANA").gain(200)})});yl("IMPALEMENT",96,{startOnHotbar:!1,applicationDelay:.98,validateAttempt:Dh,highlightIf:Dh,replaceIf:[{newSkill:"QUIETUS",condition:e=>!Dh(e)}],potency:300,falloff:0,onConfirm:e=>e.tryConsumeResource("DELIRIUM"),onApplication:e=>e.resources.get("MANA").gain(500)});const NR=e=>e.hasResourceAvailable("SCORN");yl("DISESTEEM",100,{startOnHotbar:!1,applicationDelay:1.65,validateAttempt:NR,highlightIf:NR,potency:1e3,falloff:.25,onConfirm:e=>e.tryConsumeResource("SCORN")});Sn("DELIRIUM",68,"cd_DELIRIUM",{applicationDelay:0,cooldown:60,onConfirm:e=>{e.gainStatus("DELIRIUM",3),e.gainStatus("BLOOD_WEAPON",3)}});Sn("CARVE_AND_SPIT",60,"cd_ABYSSAL_DRAIN",{applicationDelay:1.47,cooldown:60,potency:[["NEVER",510],["MELEE_MASTERY_II_TANK",540]],healingPotency:500,onApplication:e=>e.resources.get("MANA").gain(600)});Sn("ABYSSAL_DRAIN",56,"cd_ABYSSAL_DRAIN",{applicationDelay:.98,cooldown:60,potency:240,healingPotency:500,onApplication:e=>e.resources.get("MANA").gain(600)});const NO=e=>e.resources.get("SALTED_EARTH").availableAmountIncludingDisabled()>0;Sn("SALTED_EARTH",52,"cd_SALTED_EARTH",{applicationDelay:.76,cooldown:90,replaceIf:[{newSkill:"SALT_AND_DARKNESS",condition:NO}],onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"SALTED_EARTH",skillName:"SALTED_EARTH",tickPotency:50,speedStat:"sks"})},falloff:0,onApplication:(e,t)=>{e.applyDoT("SALTED_EARTH",t),e.gainStatus("SALTED_EARTH")}});Sn("SALT_AND_DARKNESS",86,"cd_SALT_AND_DARKNESS",{startOnHotbar:!1,highlightIf:e=>!0,validateAttempt:NO,applicationDelay:.76,cooldown:20,potency:500,falloff:.25});Sn("LIVING_SHADOW",80,"cd_LIVING_SHADOW",{applicationDelay:0,replaceIf:[{newSkill:"DISESTEEM",condition:e=>NR(e)}],cooldown:120,onConfirm:(e,t)=>{e.hasTraitUnlocked("ENHANCED_LIVING_SHADOW_III")&&e.gainStatus("SCORN"),e.resources.get("ESTEEM_TRACKER").gain(WT);const n=e.hasTraitUnlocked("ENHANCED_LIVING_SHADOW")?420:340;[["ABYSSAL_DRAIN_PET",n,0],["SHADOWSTRIDE_PET",0,void 0],e.hasTraitUnlocked("ENHANCED_LIVING_SHADOW_II")?["SHADOWBRINGER_PET",570,.25]:["FLOOD_OF_SHADOW_PET",n,0],["EDGE_OF_SHADOW_PET",n,void 0],["BLOODSPILLER_PET",n,void 0],e.hasTraitUnlocked("ENHANCED_LIVING_SHADOW_III")?["DISESTEEM_PET",620,.25]:["CARVE_AND_SPIT_PET",n,void 0]].forEach(s=>{const[c,d,f]=s;t.addDoTPotency(new ta({config:e.config,sourceTime:e.getDisplayTime(),sourceSkill:c,aspect:Ie.Other,description:"",basePotency:d,snapshotTime:void 0,targetList:t.targetList,falloff:f}),"ESTEEM_TRACKER")}),e.resources.get("ESTEEM_TRACKER").node=t,e.addEvent(new Oe("initial esteem hit",LB,()=>e.handleEsteemAttack()))}});Sn("SHADOWBRINGER",90,"cd_SHADOWBRINGER",{applicationDelay:.67,cooldown:60,potency:600,falloff:.25,maxCharges:2,validateAttempt:e=>e.hasResourceAvailable("DARKSIDE")});Sn("SHADOWSTRIDE",54,"cd_SHADOWSTRIDE",{applicationDelay:.66,animationLock:Wt,cooldown:30,maxCharges:2});Ns("THE_BLACKEST_NIGHT",70,"cd_THE_BLACKEST_NIGHT",{rscType:"BLACKEST_NIGHT",manaCost:3e3,replaceIf:[{newSkill:"THE_BLACKEST_NIGHT_POP",condition:e=>e.hasResourceAvailable("BLACKEST_NIGHT")}],applicationDelay:.62,cooldown:15});Sn("THE_BLACKEST_NIGHT_POP",70,"cd_THE_BLACKEST_NIGHT_POP",{startOnHotbar:!1,highlightIf:e=>!0,applicationDelay:0,animationLock:en,cooldown:1,onConfirm:e=>{e.gainStatus("DARK_ARTS"),e.tryConsumeResource("BLACKEST_NIGHT")}});Ns("SHADOW_WALL",38,"cd_SHADOW_WALL",{rscType:"SHADOW_WALL",autoUpgrade:{otherSkill:"SHADOWED_VIGIL",trait:"SHADOW_WALL_MASTERY"},applicationDelay:.62,cooldown:120});Ns("SHADOWED_VIGIL",92,"cd_SHADOW_WALL",{rscType:"SHADOWED_VIGIL",autoDowngrade:{otherSkill:"SHADOW_WALL",trait:"SHADOW_WALL_MASTERY"},applicationDelay:.62,cooldown:120,onApplication:e=>e.gainStatus("VIGILANT")});Ns("DARK_MIND",45,"cd_DARK_MIND",{rscType:"DARK_MIND",applicationDelay:.62,cooldown:60});Ns("LIVING_DEAD",50,"cd_LIVING_DEAD",{rscType:"LIVING_DEAD",applicationDelay:0,cooldown:300});Ns("DARK_MISSIONARY",66,"cd_DARK_MISSIONARY",{rscType:"DARK_MISSIONARY",applicationDelay:.62,cooldown:90});Ns("OBLATION",82,"cd_OBLATION",{rscType:"OBLATION",applicationDelay:0,maxCharges:2,cooldown:60});Sn("GRIT",10,"cd_GRIT",{applicationDelay:0,cooldown:2,validateAttempt:e=>!e.hasResourceAvailable("GRIT"),onConfirm:e=>e.resources.get("GRIT").gain(1),replaceIf:[{newSkill:"RELEASE_GRIT",condition:e=>e.hasResourceAvailable("GRIT")}],secondaryCooldown:{cdName:"cd_RELEASE_GRIT",cooldown:1,maxCharges:1}});Sn("RELEASE_GRIT",10,"cd_RELEASE_GRIT",{startOnHotbar:!1,replaceIf:[{newSkill:"GRIT",condition:e=>!e.hasResourceAvailable("GRIT")}],applicationDelay:0,cooldown:1,validateAttempt:e=>!e.hasResourceAvailable("GRIT"),onConfirm:e=>e.tryConsumeResource("GRIT"),secondaryCooldown:{cdName:"cd_GRIT",cooldown:2,maxCharges:1}});Object.keys(kR).forEach(e=>zt(e,`AST/${Pe[e].name}.png`));const CO=["COMBUST_II","COMBUST_III"],kB=Object.keys(kR).filter(e=>!CO.includes(e));class UB extends Xt{jobSpecificOtherTargetedBuffViewProps(){return[...CO.flatMap(t=>this.makeTargetedTimers(t))]}jobSpecificSelfTargetedBuffViewProps(){return[...kB.map(t=>this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){return[{kind:"arcana",name:Ke("ARCANA"),currentArcanaColor:this.state.drawnAstral()?t.ast.astralCard:t.ast.umbralCard,activeSlots:["ARCANA_1","ARCANA_2","ARCANA_3","MINOR_ARCANA"].map(n=>this.state.hasResourceAvailable(n))}]}}const it=(e,t,n)=>{Ve("AST",e,t,n??{})};it("ARCANA",1);it("MINOR_ARCANA",1,{default:1});it("LIGHTSPEED",1,{timeout:15});it("THE_BALANCE",1,{timeout:15});it("THE_ARROW",1,{timeout:15});it("THE_SPIRE",1,{timeout:30});it("THE_SPEAR",1,{timeout:15});it("THE_BOLE",1,{timeout:15});it("THE_EWER",1,{timeout:15});it("ASPECTED_BENEFIC",1,{timeout:15});it("ASPECTED_HELIOS",1,{timeout:15});it("SYNASTRY",1,{timeout:20});it("DIVINATION",1,{timeout:20});it("DIVINING",1,{timeout:30,warnOnTimeout:!0});it("COLLECTIVE_UNCONSCIOUS",1,{timeout:18});it("COLLECTIVE_UNCONSCIOUS_MIT",1,{timeout:10});it("WHEEL_OF_FORTUNE",1,{timeout:15});it("OPPOSITION",1,{timeout:15});it("EARTHLY_DOMINANCE",1,{timeout:10});it("GIANT_DOMINANCE",1,{timeout:10});it("COMBUST_II",1,{timeout:30});it("COMBUST_III",1,{timeout:30});it("INTERSECTION",1,{timeout:30});it("NEUTRAL_SECT",1,{timeout:20});it("NEUTRAL_SECT_SHIELD",1,{timeout:30});it("HOROSCOPE",1,{timeout:10});it("HOROSCOPE_HELIOS",1,{timeout:30});it("SUNTOUCHED",1,{timeout:30});it("EXALTATION",1,{timeout:8});it("MACROCOSMOS",1,{timeout:15});it("HELIOS_CONJUNCTION",1,{timeout:15});it("SUN_SIGN",1,{timeout:15});it("ARCANA_1",1,{default:1});it("ARCANA_2",1,{default:1});it("ARCANA_3",1,{default:1});it("NEXT_DRAW",1);class wB extends qt{constructor(t){super(t);const n=this.hasTraitUnlocked("ENHANCED_ESSENTIAL_DIGNITY_II")?3:this.hasTraitUnlocked("ENHANCED_ESSENTIAL_DIGNITY")?2:1,o=this.hasTraitUnlocked("ENHANCED_CELESTIAL_INTERSECTION")?2:1;this.cooldowns.set(new Ue("cd_ESSENTIAL_DIGNITY",40,n,n)),this.cooldowns.set(new Ue("cd_CELESTIAL_INTERSECTION",30,o,o)),this.cooldowns.set(new Ue("cd_SWIFTCAST",this.hasTraitUnlocked("ENHANCED_SWIFTCAST")?40:60,1,1)),this.registerRecurringEvents([{reportName:N({en:"Combust DoT",zh:"DoT"}),groupedEffects:[{effectName:"COMBUST_II",appliedBy:["COMBUST_II"]},{effectName:"COMBUST_III",appliedBy:["COMBUST_III"]}]},{isHealing:!0,groupedEffects:[{effectName:"WHEEL_OF_FORTUNE",appliedBy:["COLLECTIVE_UNCONSCIOUS"]}]},{isHealing:!0,groupedEffects:[{effectName:"OPPOSITION",appliedBy:["CELESTIAL_OPPOSITION"]}]},{isHealing:!0,groupedEffects:[{effectName:"ASPECTED_BENEFIC",appliedBy:["ASPECTED_BENEFIC"]}]},{isHealing:!0,groupedEffects:[{effectName:"ASPECTED_HELIOS",appliedBy:["ASPECTED_HELIOS"]},{effectName:"HELIOS_CONJUNCTION",appliedBy:["HELIOS_CONJUNCTION"]}]}])}drawnAstral(){return!this.hasResourceAvailable("NEXT_DRAW")}cancelChanneledSkills(){this.tryConsumeResource("COLLECTIVE_UNCONSCIOUS")}jobSpecificAddHealingBuffCovers(t,n){n.cdName==="cd_GCD"&&this.hasResourceAvailable("NEUTRAL_SECT")&&t.addBuff(k.NeutralSect),n.cdName==="cd_GCD"&&!n.aoeHeal&&this.hasResourceAvailable("SYNASTRY")&&t.addBuff(k.Synastry),this.hasResourceAvailable("THE_ARROW")&&t.addBuff(k.TheArrow)}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("DIVINATION")&&t.addBuff(k.Divination)}get statusPropsGenerator(){return new UB(this)}}const gn=(e,t,n)=>{const o=c=>{if(!n.healingPotency)return[];const d=[];return c.hasResourceAvailable("SYNASTRY")&&!n.aoeHeal&&d.push(J.Synastry),c.hasResourceAvailable("NEUTRAL_SECT")&&d.push(J.NeutralSect),c.hasResourceAvailable("THE_ARROW")&&d.push(J.TheArrow),d},s=n.baseCastTime??0;return Xn("AST",e,t,{...n,jobHealingPotencyModifiers:o,jobPotencyModifiers:c=>c.hasResourceAvailable("DIVINATION")?[J.Divination]:[],castTime:c=>Math.max(0,c.config.adjustedCastTime(c.hasResourceAvailable("LIGHTSPEED")?s-2.5:s)),recastTime:c=>c.config.adjustedGCD(2.5),isInstantFn:c=>!n.baseCastTime||c.hasResourceAvailable("SWIFTCAST"),onConfirm:Le(s?c=>c.tryConsumeResource("SWIFTCAST"):void 0,n.onConfirm)})},In=(e,t,n,o)=>et("AST",e,t,n,{...o,jobHealingPotencyModifiers:o.healingPotency?s=>{const c=[];return s.hasResourceAvailable("THE_ARROW")&&c.push(J.TheArrow),e==="STELLAR_DETONATION"&&c.push(J.AstPet),c}:void 0,jobPotencyModifiers:s=>{const c=[];return s.hasResourceAvailable("DIVINATION")&&c.push(J.Divination),e==="STELLAR_DETONATION"&&c.push(J.AstPet),c}}),Cs=(e,t,n,o)=>Ye("AST",e,t,n,{...o,jobHealingPotencyModifiers:s=>o.healingPotency&&s.hasResourceAvailable("THE_ARROW")?[J.TheArrow]:[],jobPotencyModifiers:o.potency?s=>s.hasResourceAvailable("DIVINATION")?[J.Divination]:[]:void 0});gn("MALEFIC_III",64,{autoUpgrade:{otherSkill:"MALEFIC_IV",trait:"MALEFIC_MASTERY_III"},baseCastTime:1.5,applicationDelay:1.07,potency:190,manaCost:400});gn("MALEFIC_IV",72,{autoDowngrade:{otherSkill:"MALEFIC_III",trait:"MALEFIC_MASTERY_III"},autoUpgrade:{otherSkill:"FALL_MALEFIC",trait:"MALEFIC_MASTERY_IV"},baseCastTime:1.5,applicationDelay:1.07,potency:230,manaCost:400});gn("FALL_MALEFIC",82,{autoDowngrade:{otherSkill:"MALEFIC_IV",trait:"MALEFIC_MASTERY_IV"},baseCastTime:1.5,applicationDelay:1.07,potency:[["NEVER",250],["MAGICK_MASTERY_HEALER",270]],manaCost:400});gn("COMBUST_II",46,{autoUpgrade:{otherSkill:"COMBUST_III",trait:"COMBUST_MASTERY_II"},applicationDelay:.62,manaCost:400,drawsAggro:!0,onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"COMBUST_II",skillName:"COMBUST_II",tickPotency:60,speedStat:"sps"})},onApplication:(e,t)=>e.applyDoT("COMBUST_II",t)});gn("COMBUST_III",72,{autoDowngrade:{otherSkill:"COMBUST_II",trait:"COMBUST_MASTERY_II"},applicationDelay:.62,manaCost:400,drawsAggro:!0,onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"COMBUST_III",skillName:"COMBUST_III",tickPotency:e.hasTraitUnlocked("MAGICK_MASTERY_HEALER")?70:65,speedStat:"sps"})},onApplication:(e,t)=>e.applyDoT("COMBUST_III",t)});gn("GRAVITY",45,{autoUpgrade:{otherSkill:"GRAVITY_II",trait:"GRAVITY_MASTERY"},baseCastTime:1.5,applicationDelay:1.16,potency:120,falloff:0,manaCost:400});gn("GRAVITY_II",82,{autoDowngrade:{otherSkill:"GRAVITY",trait:"GRAVITY_MASTERY"},baseCastTime:1.5,applicationDelay:1.16,potency:[["NEVER",130],["MAGICK_MASTERY_HEALER",140]],falloff:0,manaCost:400});gn("MACROCOSMOS",90,{applicationDelay:.75,secondaryCooldown:{cdName:"cd_MACROCOSMOS",cooldown:180,maxCharges:1},potency:[["NEVER",250],["MAGICK_MASTERY_HEALER",270]],falloff:.4,manaCost:600,replaceIf:[{newSkill:"MICROCOSMOS",condition:e=>e.hasResourceAvailable("MACROCOSMOS")}],onConfirm:e=>e.gainStatus("MACROCOSMOS")});In("MICROCOSMOS",90,"cd_MICROCOSMOS",{startOnHotbar:!1,applicationDelay:.045,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("MACROCOSMOS"),onConfirm:e=>e.tryConsumeResource("MACROCOSMOS")});gn("ASPECTED_BENEFIC",34,{applicationDelay:.98,healingPotency:[["NEVER",200],["ENHANCED_HEALING_MAGIC",250]],manaCost:400,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"ASPECTED_BENEFIC",effectName:"ASPECTED_BENEFIC",speedStat:"sps",tickPotency:e.hasTraitUnlocked("ENHANCED_HEALING_MAGIC")?250:200}),e.hasResourceAvailable("NEUTRAL_SECT")&&e.gainStatus("NEUTRAL_SECT_SHIELD")},onApplication:(e,t)=>{e.applyHoT("ASPECTED_BENEFIC",t),e.gainStatus("ASPECTED_BENEFIC")}});gn("BENEFIC",2,{baseCastTime:1.5,applicationDelay:.98,healingPotency:[["NEVER",450],["ENHANCED_HEALING_MAGIC",500]],manaCost:400});gn("BENEFIC_II",26,{baseCastTime:1.5,applicationDelay:1.07,healingPotency:[["NEVER",700],["ENHANCED_HEALING_MAGIC",800]],manaCost:700});gn("ASPECTED_HELIOS",40,{autoUpgrade:{otherSkill:"HELIOS_CONJUNCTION",trait:"ASPECTED_HELIOS_MASTERY"},baseCastTime:1.5,applicationDelay:1.07,healingPotency:[["NEVER",200],["ENHANCED_HEALING_MAGIC",250]],aoeHeal:!0,manaCost:800,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"ASPECTED_HELIOS",effectName:"ASPECTED_HELIOS",speedStat:"sps",tickPotency:e.hasTraitUnlocked("ENHANCED_HEALING_MAGIC")?150:100}),e.tryConsumeResource("HOROSCOPE")&&e.gainStatus("HOROSCOPE_HELIOS"),e.hasResourceAvailable("NEUTRAL_SECT")&&e.gainStatus("NEUTRAL_SECT_SHIELD")},onApplication:(e,t)=>{e.applyHoT("ASPECTED_HELIOS",t),e.gainStatus("ASPECTED_HELIOS")}});gn("HELIOS_CONJUNCTION",96,{autoDowngrade:{otherSkill:"ASPECTED_HELIOS",trait:"ASPECTED_HELIOS_MASTERY"},baseCastTime:1.5,applicationDelay:1.07,healingPotency:250,aoeHeal:!0,manaCost:800,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"HELIOS_CONJUNCTION",effectName:"HELIOS_CONJUNCTION",speedStat:"sps",tickPotency:175}),e.tryConsumeResource("HOROSCOPE")&&e.gainStatus("HOROSCOPE_HELIOS"),e.hasResourceAvailable("NEUTRAL_SECT")&&e.gainStatus("NEUTRAL_SECT_SHIELD")},onApplication:(e,t)=>{e.applyHoT("HELIOS_CONJUNCTION",t),e.gainStatus("HELIOS_CONJUNCTION")}});gn("HELIOS",10,{baseCastTime:1.5,applicationDelay:1.07,healingPotency:[["NEVER",300],["ENHANCED_HEALING_MAGIC",400]],aoeHeal:!0,manaCost:700,onConfirm:e=>{e.tryConsumeResource("HOROSCOPE")&&e.gainStatus("HOROSCOPE_HELIOS")}});gn("ASCEND",12,{baseCastTime:8,applicationDelay:1.07,manaCost:2400});const Mu=e=>e.drawnAstral(),Lu=e=>!e.drawnAstral(),bO=e=>{(e.hasResourceAvailable("ARCANA_1")||e.drawnAstral()&&e.hasResourceAvailable("MINOR_ARCANA"))&&I.reportWarning({kind:"custom",en:"damage card overwritten!",zh:""}),e.resources.get("NEXT_DRAW").gainWrapping(1),["MINOR_ARCANA","ARCANA_1","ARCANA_2","ARCANA_3"].forEach(t=>e.resources.get(t).gain(1))},OO=e=>e.resources.get("MANA").gain(2e3);In("ASTRAL_DRAW",30,"cd_ASTRAL_DRAW",{replaceIf:[{newSkill:"UMBRAL_DRAW",condition:Mu}],applicationDelay:0,cooldown:55,validateAttempt:Lu,onConfirm:bO,onApplication:OO});In("UMBRAL_DRAW",30,"cd_ASTRAL_DRAW",{startOnHotbar:!1,replaceIf:[{newSkill:"ASTRAL_DRAW",condition:Lu}],applicationDelay:0,cooldown:55,validateAttempt:Mu,onConfirm:bO,onApplication:OO});const qT=(e,t,n)=>{console.assert(n.length===3);const o=[{newSkill:n[0],condition:s=>!s.hasResourceAvailable(t)},{newSkill:n[1],condition:s=>Mu(s)&&s.hasResourceAvailable(t)},{newSkill:n[2],condition:s=>Lu(s)&&s.hasResourceAvailable(t)}];o.forEach(({newSkill:s,condition:c},d)=>{const f=o.slice();f.splice(d,1),In(s,30,e,{startOnHotbar:d===0,replaceIf:f,applicationDelay:.62,cooldown:1,validateAttempt:d===0?()=>!1:c,onConfirm:d!==0?h=>h.tryConsumeResource(t):void 0,onApplication:d!==0?h=>h.gainStatus(s):void 0})})};qT("cd_PLAY_I","ARCANA_1",["PLAY_I","THE_BALANCE","THE_SPEAR"]);qT("cd_PLAY_II","ARCANA_2",["PLAY_II","THE_ARROW","THE_BOLE"]);qT("cd_PLAY_III","ARCANA_3",["PLAY_III","THE_SPIRE","THE_EWER"]);In("MINOR_ARCANA",70,"cd_MINOR_ARCANA",{applicationDelay:0,replaceIf:[{newSkill:"LORD_OF_CROWNS",condition:e=>Mu(e)&&e.hasResourceAvailable("MINOR_ARCANA")},{newSkill:"LADY_OF_CROWNS",condition:e=>Lu(e)&&e.hasResourceAvailable("MINOR_ARCANA")}],cooldown:1,validateAttempt:()=>!1});In("LORD_OF_CROWNS",70,"cd_MINOR_ARCANA",{startOnHotbar:!1,replaceIf:[{newSkill:"MINOR_ARCANA",condition:e=>!e.hasResourceAvailable("MINOR_ARCANA")},{newSkill:"LADY_OF_CROWNS",condition:e=>Lu(e)&&e.hasResourceAvailable("MINOR_ARCANA")}],applicationDelay:.62,cooldown:1,potency:400,falloff:0,onConfirm:e=>e.tryConsumeResource("MINOR_ARCANA")});In("LADY_OF_CROWNS",70,"cd_MINOR_ARCANA",{startOnHotbar:!1,replaceIf:[{newSkill:"MINOR_ARCANA",condition:e=>!e.hasResourceAvailable("MINOR_ARCANA")},{newSkill:"LORD_OF_CROWNS",condition:e=>Mu(e)&&e.hasResourceAvailable("MINOR_ARCANA")}],applicationDelay:.62,cooldown:1,healingPotency:400,aoeHeal:!0,onConfirm:e=>e.tryConsumeResource("MINOR_ARCANA")});Cs("LIGHTSPEED",6,"cd_LIGHTSPEED",{rscType:"LIGHTSPEED",applicationDelay:0,cooldown:60,maxCharges:2});const DO=437,yO=1015;In("EARTHLY_STAR",62,"cd_EARTHLY_STAR",{applicationDelay:0,cooldown:60,falloff:0,savesTargets:!0,replaceIf:[{newSkill:"STELLAR_DETONATION",condition:e=>e.hasResourceAvailable("EARTHLY_DOMINANCE")||e.hasResourceAvailable("GIANT_DOMINANCE")}],onConfirm:(e,t)=>{e.gainStatus("EARTHLY_DOMINANCE"),e.resources.addResourceEvent({rscType:"EARTHLY_DOMINANCE",name:"expand earthly star",delay:10,fnOnRsc:()=>{e.gainStatus("GIANT_DOMINANCE"),e.resources.addResourceEvent({rscType:"GIANT_DOMINANCE",name:"auto-detonate earthly star",delay:10,fnOnRsc:()=>{const n=new ta({config:e.config,sourceTime:e.getDisplayTime(),sourceSkill:"STELLAR_DETONATION",aspect:Ie.Other,basePotency:DO,snapshotTime:e.getDisplayTime(),description:"",targetList:t.targetList,falloff:0});e.hasResourceAvailable("TINCTURE")&&n.addModifiers(J.Tincture),e.hasResourceAvailable("DIVINATION")&&n.addModifiers(J.Divination),n.addModifiers(J.AstPet),t.addPotency(n);const o=new ta({config:e.config,sourceTime:e.getDisplayTime(),sourceSkill:"STELLAR_DETONATION",aspect:Ie.Other,basePotency:yO,snapshotTime:e.getDisplayTime(),description:"",healTargetCount:t.healTargetCount,falloff:0});e.hasResourceAvailable("THE_ARROW"),t.addHealingPotency(o),I.resolvePotency(n),I.resolveHealingPotency(o)}})}})}});In("STELLAR_DETONATION",62,"cd_STELLAR_DETONATION",{startOnHotbar:!1,applicationDelay:.53,cooldown:3,potency:e=>e.hasResourceAvailable("GIANT_DOMINANCE")?DO:290,falloff:0,healingPotency:e=>e.hasResourceAvailable("GIANT_DOMINANCE")?yO:762,aoeHeal:!0,validateAttempt:e=>e.hasResourceAvailable("EARTHLY_DOMINANCE")||e.hasResourceAvailable("GIANT_DOMINANCE"),onConfirm:e=>{e.tryConsumeResource("EARTHLY_DOMINANCE"),e.tryConsumeResource("GIANT_DOMINANCE")}});Cs("DIVINATION",50,"cd_DIVINATION",{rscType:"DIVINATION",applicationDelay:.62,cooldown:120,replaceIf:[{newSkill:"ORACLE",condition:e=>e.hasResourceAvailable("DIVINING")}],onConfirm:e=>e.gainStatus("DIVINING")});In("ORACLE",92,"cd_ORACLE",{startOnHotbar:!1,applicationDelay:1.74,cooldown:1,potency:860,falloff:.5,highlightIf:e=>e.hasResourceAvailable("DIVINING"),validateAttempt:e=>e.hasResourceAvailable("DIVINING"),onConfirm:e=>e.tryConsumeResource("DIVINING")});In("ESSENTIAL_DIGNITY",15,"cd_ESSENTIAL_DIGNITY",{applicationDelay:.62,cooldown:40,maxCharges:3,healingPotency:400});Cs("SYNASTRY",50,"cd_SYNASTRY",{rscType:"SYNASTRY",applicationDelay:.62,cooldown:120});Cs("EXALTATION",86,"cd_EXALTATION",{rscType:"EXALTATION",applicationDelay:.71,cooldown:60});In("COLLECTIVE_UNCONSCIOUS",58,"cd_COLLECTIVE_UNCONSCIOUS",{applicationDelay:.42,cooldown:60,onConfirm:(e,t)=>{e.gainStatus("COLLECTIVE_UNCONSCIOUS"),e.gainStatus("COLLECTIVE_UNCONSCIOUS_MIT"),e.addHoTPotencies({node:t,skillName:"COLLECTIVE_UNCONSCIOUS",effectName:"WHEEL_OF_FORTUNE",speedStat:"sps",tickPotency:100})},onApplication:e=>e.gainStatus("WHEEL_OF_FORTUNE")});In("CELESTIAL_OPPOSITION",60,"cd_CELESTIAL_OPPOSITION",{applicationDelay:1.07,cooldown:60,healingPotency:200,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"CELESTIAL_OPPOSITION",effectName:"OPPOSITION",speedStat:"sps",tickPotency:100})},onApplication:e=>e.gainStatus("OPPOSITION")});In("CELESTIAL_INTERSECTION",74,"cd_CELESTIAL_INTERSECTION",{applicationDelay:0,cooldown:30,maxCharges:1,healingPotency:200,aoeHeal:!0});Cs("HOROSCOPE",76,"cd_HOROSCOPE",{rscType:"HOROSCOPE",applicationDelay:0,cooldown:60,replaceIf:[{newSkill:"HOROSCOPE_RECAST",condition:e=>e.hasResourceAvailable("HOROSCOPE_HELIOS")||e.hasResourceAvailable("HOROSCOPE")}]});In("HOROSCOPE_RECAST",76,"cd_HOROSCOPE_RECAST",{startOnHotbar:!1,applicationDelay:.62,cooldown:1,healingPotency:e=>e.hasResourceAvailable("HOROSCOPE_HELIOS")?400:200,aoeHeal:!0,validateAttempt:e=>e.hasResourceAvailable("HOROSCOPE_HELIOS")||e.hasResourceAvailable("HOROSCOPE"),onConfirm:e=>e.tryConsumeResource("HOROSCOPE_HELIOS")||e.tryConsumeResource("HOROSCOPE")});Cs("NEUTRAL_SECT",80,"cd_NEUTRAL_SECT",{rscType:"NEUTRAL_SECT",applicationDelay:.62,cooldown:120,replaceIf:[{newSkill:"SUN_SIGN",condition:e=>e.hasResourceAvailable("SUNTOUCHED")}],onConfirm:e=>e.gainStatus("SUNTOUCHED")});Cs("SUN_SIGN",100,"cd_SUN_SIGN",{startOnHotbar:!1,rscType:"SUN_SIGN",applicationDelay:1.47,cooldown:1,highlightIf:e=>e.hasResourceAvailable("SUNTOUCHED"),validateAttempt:e=>e.hasResourceAvailable("SUNTOUCHED"),onConfirm:e=>e.tryConsumeResource("SUNTOUCHED")});Object.keys(QR).forEach(e=>zt(e,`SCH/${Pe[e].name}.png`));const vO=["BIO_II","BIOLYSIS","CHAIN_STRATAGEM","BANEFUL_IMPACTION"],PB=Object.keys(QR).filter(e=>!vO.includes(e));class GB extends Xt{jobSpecificOtherTargetedBuffViewProps(){return[...vO.flatMap(t=>this.makeTargetedTimers(t))]}jobSpecificSelfTargetedBuffViewProps(){return[...PB.map(t=>t==="FEY_UNION"?this.makeCommonTimerless(t):t==="SACRED_SOIL_ZONE"?this.makeToggleableTimer(t):this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){const n=this.state.resources.get("SERAPH_SUMMON_TIMER"),o=n.available(1)?n.pendingChange?.timeTillEvent:void 0,s=this.state.resources.get("FAERIE_GAUGE").availableAmount(),c=this.state.resources.get("AETHERFLOW").availableAmount();return[{kind:"text",name:Ke("SERAPH_SUMMON_TIMER"),text:o?.toFixed(3)??"N/A",color:o?t.sch.seraph:void 0},{kind:"bar",name:Ke("FAERIE_GAUGE"),color:t.sch.faerieGauge,progress:s/100,valueString:s.toFixed(0)},{kind:"counter",name:Ke("AETHERFLOW"),color:t.sch.aetherflow,currentStacks:c,maxStacks:3,valueString:c.toFixed(0)}]}}const Lt=(e,t,n)=>{Ve("SCH",e,t,n??{})};Lt("AETHERFLOW",3,{warnOnOvercap:!0});Lt("FAERIE_GAUGE",100);Lt("BIO_II",1,{timeout:30});Lt("CATALYZE",1,{timeout:30});Lt("GALVANIZE",1,{timeout:30});Lt("WHISPERING_DAWN",1,{timeout:21});Lt("ANGELS_WHISPER",1,{timeout:21});Lt("FEY_ILLUMINATION",1,{timeout:20});Lt("SERAPHIC_ILLUMINATION",1,{timeout:20});Lt("SACRED_SOIL_ZONE",1,{timeout:15});Lt("SACRED_SOIL_MIT",1,{timeout:4.96});Lt("EMERGENCY_TACTICS",1,{timeout:15});Lt("DISSIPATION",1,{timeout:30});Lt("EXCOGITATION",1,{timeout:45});Lt("CHAIN_STRATAGEM",1,{timeout:20});Lt("IMPACT_IMMINENT",1,{timeout:30,warnOnTimeout:!0});Lt("BIOLYSIS",1,{timeout:30});Lt("RECITATION",1,{timeout:15});Lt("FEY_UNION",1);Lt("SERAPHIC_VEIL",1,{timeout:30});Lt("PROTRACTION",1,{timeout:10});Lt("EXPEDIENCE",1,{timeout:10});Lt("DESPERATE_MEASURES",1,{timeout:20});Lt("BANEFUL_IMPACTION",1,{timeout:15});Lt("SERAPHISM",1,{timeout:20});Lt("SERAPHISM_REGEN",1,{timeout:5});Lt("SERAPH_SUMMON_TIMER",1,{timeout:22});const xu=.09,Hu=new Map([["FEY_BLESSING",.667],["WHISPERING_DAWN",1.156],["CONSOLATION",.889],["ANGELS_WHISPER",1.029],["AETHERPACT",.668],["FEY_ILLUMINATION",1.205]]);class BB extends qt{nextEstimatedPetApplication;constructor(t){super(t),this.nextEstimatedPetApplication=void 0;const n=this.hasTraitUnlocked("ENHANCED_DEPLOYMENT_TACTICS")?90:120,o=this.hasTraitUnlocked("ENHANCED_RECITATION")?60:90;this.cooldowns.set(new Ue("cd_DEPLOYMENT_TACTICS",n,1,1)),this.cooldowns.set(new Ue("cd_RECITATION",o,1,1)),this.cooldowns.set(new Ue("cd_SWIFTCAST",this.hasTraitUnlocked("ENHANCED_SWIFTCAST")?40:60,1,1)),this.registerRecurringEvents([{reportName:N({en:"Bio/Biolysis DoT",zh:"DoT"}),groupedEffects:[{effectName:"BIO_II",appliedBy:["BIO_II"]},{effectName:"BIOLYSIS",appliedBy:["BIOLYSIS"]}]},{groupedEffects:[{effectName:"BANEFUL_IMPACTION",appliedBy:["BANEFUL_IMPACTION"]}]},{isHealing:!0,groupedEffects:[{effectName:"WHISPERING_DAWN",appliedBy:["WHISPERING_DAWN"]},{effectName:"ANGELS_WHISPER",appliedBy:["WHISPERING_DAWN"]}]},{isHealing:!0,groupedEffects:[{effectName:"SACRED_SOIL_MIT",appliedBy:["SACRED_SOIL"],isGroundTargeted:!0}]},{isHealing:!0,groupedEffects:[{effectName:"SERAPHISM_REGEN",appliedBy:["SERAPHISM"]}]}])}jobSpecificAddHealingBuffCovers(t,n){n.cdName==="cd_GCD"&&((this.hasResourceAvailable("FEY_ILLUMINATION")||this.hasResourceAvailable("SERAPHIC_ILLUMINATION"))&&t.addBuff(k.FeyIllumination),this.hasResourceAvailable("DISSIPATION")&&t.addBuff(k.Dissipation)),this.hasResourceAvailable("PROTRACTION")&&t.addBuff(k.Protraction);const o=["ADLOQUIUM","SUCCOR","CONCITATION","EXCOGITATION","INDOMITABILITY"];this.hasResourceAvailable("RECITATION")&&o.includes(n.name)&&t.addBuff(k.Recitation)}jobSpecificAddDamageBuffCovers(t,n){t.targetList.some(o=>this.hasDebuffActive("CHAIN_STRATAGEM",o))&&t.addBuff(k.ChainStratagem)}jobSpecificRegisterRecurringEvents(){const t=()=>new Oe("sch special hot ticks",3,()=>{this.hasResourceAvailable("FEY_UNION")&&this.resources.get("FAERIE_GAUGE").available(10)&&this.resources.get("FAERIE_GAUGE").consume(10),this.resources.get("FAERIE_GAUGE").available(10)||this.tryConsumeResource("FEY_UNION"),this.hasResourceAvailable("SACRED_SOIL_ZONE")&&this.gainStatus("SACRED_SOIL_MIT"),this.hasResourceAvailable("SERAPHISM")&&this.gainStatus("SERAPHISM_REGEN"),this.addEvent(t())});this.addEvent(new Oe("begin sch special hot ticks",this.hotTickOffset,()=>this.addEvent(t())))}makePetPotency(t,n,o,s){const c=new ta({config:this.config,sourceTime:o,sourceSkill:n,aspect:Ie.Other,basePotency:s,snapshotTime:this.getDisplayTime(),description:"",healTargetCount:t,falloff:void 0});return c.addModifiers(J.SchPet),c}queuePetAction(t,n,o,s,c,d){const f=this.getDisplayTime();this.nextEstimatedPetApplication=f+s+c;const h=this.resources.get("SERAPH_SUMMON_TIMER").pendingChange?.timeTillEvent;h!==void 0&&this.nextEstimatedPetApplication>h+f&&I.reportWarning({kind:"custom",en:`${Wn(n)} is likely to ghost when seraph leaves!`}),this.addEvent(new Oe(o+" pet snapshot",s,()=>{const m=d(this);this.addEvent(new Oe(o+" application",c,()=>{m(this)}))}))}warnLastPetGhost(){this.nextEstimatedPetApplication!==void 0&&this.nextEstimatedPetApplication>this.getDisplayTime()&&I.reportWarning({kind:"custom",en:"previous pet command is likely to ghost!"})}hasRealFairy(){return!this.hasResourceAvailable("DISSIPATION")&&!this.hasResourceAvailable("SERAPH_SUMMON_TIMER")}maybeChainModifier(t){const n=new Map;return t.targetList.forEach(o=>{this.hasDebuffActive("CHAIN_STRATAGEM",o)&&n.set(o,[J.ChainStrat])}),n}maybeGainFaerieGauge(){this.hasResourceAvailable("DISSIPATION")||this.resources.get("FAERIE_GAUGE").gain(10)}addHealingMagicPotencyModifiers(t){(this.hasResourceAvailable("FEY_ILLUMINATION")||this.hasResourceAvailable("SERAPHIC_ILLUMINATION"))&&t.push(J.FeyIllum),this.hasResourceAvailable("DISSIPATION")&&t.push(J.Dissipation)}addHealingActionPotencyModifiers(t){this.hasResourceAvailable("PROTRACTION")&&t.push(J.Protraction)}get statusPropsGenerator(){return new GB(this)}}const _n=(e,t,n)=>Xn("SCH",e,t,{...n,castTime:s=>s.config.adjustedCastTime(n.baseCastTime??0),recastTime:s=>s.config.adjustedGCD(2.5),isInstantFn:s=>!n.baseCastTime||s.hasResourceAvailable("SWIFTCAST"),jobTargetPotencyModifiers:(s,c)=>s.maybeChainModifier(c),jobHealingPotencyModifiers:s=>{if(!n.healingPotency)return[];const c=[];return s.addHealingMagicPotencyModifiers(c),s.addHealingActionPotencyModifiers(c),s.hasResourceAvailable("RECITATION")&&e!=="ACCESSION"&&e!=="MANIFESTATION"&&c.push(J.AutoCrit),c},onConfirm:Le(n.baseCastTime?s=>s.tryConsumeResource("SWIFTCAST"):void 0,n.onConfirm)}),pn=(e,t,n,o)=>et("SCH",e,t,n,{...o,jobTargetPotencyModifiers:(c,d)=>c.maybeChainModifier(d),jobHealingPotencyModifiers:c=>{if(!o.healingPotency)return[];const d=[];return c.addHealingActionPotencyModifiers(d),c.hasResourceAvailable("RECITATION")&&(e==="INDOMITABILITY"||e==="EXCOGITATION")&&d.push(J.AutoCrit),d}}),bs=(e,t,n,o)=>Ye("SCH",e,t,n,o),MO=[{newSkill:"ADLOQUIUM",condition:e=>!e.hasResourceAvailable("SERAPHISM")},{newSkill:"MANIFESTATION",condition:e=>e.hasResourceAvailable("SERAPHISM")}],LO=[{newSkill:"CONCITATION",condition:e=>!e.hasResourceAvailable("SERAPHISM")},{newSkill:"ACCESSION",condition:e=>e.hasResourceAvailable("SERAPHISM")}];_n("BROIL_II",64,{autoUpgrade:{otherSkill:"BROIL_III",trait:"BROIL_MASTERY_III"},applicationDelay:.8,baseCastTime:1.5,manaCost:400,potency:240});_n("BROIL_III",72,{autoDowngrade:{otherSkill:"BROIL_II",trait:"BROIL_MASTERY_III"},autoUpgrade:{otherSkill:"BROIL_IV",trait:"BROIL_MASTERY_IV"},applicationDelay:.8,baseCastTime:1.5,manaCost:400,potency:255});_n("BROIL_IV",82,{autoDowngrade:{otherSkill:"BROIL_III",trait:"BROIL_MASTERY_IV"},applicationDelay:.8,baseCastTime:1.5,manaCost:400,potency:[["NEVER",295],["TACTICIANS_MASTERY",320]]});_n("BIO_II",26,{autoUpgrade:{otherSkill:"BIOLYSIS",trait:"CORRUPTION_MASTERY_II"},applicationDelay:1.15,baseCastTime:0,manaCost:300,drawsAggro:!0,onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"BIO_II",skillName:"BIO_II",tickPotency:40,speedStat:"sps",targetModifiers:e.maybeChainModifier(t)})},onApplication:(e,t)=>e.applyDoT("BIO_II",t)});_n("BIOLYSIS",72,{autoDowngrade:{otherSkill:"BIO_II",trait:"CORRUPTION_MASTERY_II"},applicationDelay:.67,baseCastTime:0,manaCost:300,drawsAggro:!0,onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"BIOLYSIS",skillName:"BIOLYSIS",tickPotency:e.hasTraitUnlocked("TACTICIANS_MASTERY")?85:70,speedStat:"sps",targetModifiers:e.maybeChainModifier(t)})},onApplication:(e,t)=>e.applyDoT("BIOLYSIS",t)});_n("RUIN_II",38,{applicationDelay:.94,potency:[["NEVER",200],["BROIL_MASTERY_IV",220]],baseCastTime:0,manaCost:400});_n("ART_OF_WAR",46,{autoUpgrade:{otherSkill:"ART_OF_WAR_II",trait:"ART_OF_WAR_MASTERY"},applicationDelay:.67,baseCastTime:0,manaCost:400,potency:165,falloff:0});_n("ART_OF_WAR_II",82,{autoDowngrade:{otherSkill:"ART_OF_WAR",trait:"ART_OF_WAR_MASTERY"},applicationDelay:.67,baseCastTime:0,manaCost:400,potency:180,falloff:0});pn("CHAIN_STRATAGEM",66,"cd_CHAIN_STRATAGEM",{replaceIf:[{newSkill:"BANEFUL_IMPACTION",condition:e=>e.hasResourceAvailable("IMPACT_IMMINENT")}],applicationDelay:.8,cooldown:120,onConfirm:(e,t)=>{e.hasTraitUnlocked("ENHANCED_CHAIN_STRATAGEM")&&e.gainStatus("IMPACT_IMMINENT")},onApplication:(e,t)=>e.gainDebuff("CHAIN_STRATAGEM",[t.targetList[0]])});pn("BANEFUL_IMPACTION",92,"cd_BANEFUL_IMPACTION",{startOnHotbar:!1,applicationDelay:1.29,cooldown:1,falloff:0,highlightIf:e=>e.hasResourceAvailable("IMPACT_IMMINENT"),validateAttempt:e=>e.hasResourceAvailable("IMPACT_IMMINENT"),onConfirm:(e,t)=>{e.tryConsumeResource("IMPACT_IMMINENT"),e.addDoTPotencies({node:t,effectName:"BANEFUL_IMPACTION",skillName:"BANEFUL_IMPACTION",tickPotency:140,speedStat:"sps",targetModifiers:e.maybeChainModifier(t)})},onApplication:(e,t)=>e.applyDoT("BANEFUL_IMPACTION",t)});pn("ENERGY_DRAIN",45,"cd_ENERGY_DRAIN",{applicationDelay:1.07,cooldown:1,potency:100,validateAttempt:e=>e.hasResourceAvailable("AETHERFLOW"),onConfirm:e=>{e.maybeGainFaerieGauge(),e.tryConsumeResource("AETHERFLOW")}});const FB=900,xO=900;_n("ADLOQUIUM",30,{replaceIf:MO,applicationDelay:.98,baseCastTime:2,manaCost:e=>e.hasResourceAvailable("RECITATION")?0:FB,healingPotency:300,onConfirm:e=>{const t=e.tryConsumeResource("EMERGENCY_TACTICS");t||e.gainStatus("GALVANIZE"),(e.tryConsumeResource("RECITATION")||e.triggersEffect(e.config.critRate))&&!t&&e.gainStatus("CATALYZE")}});const HO=e=>{e.tryConsumeResource("EMERGENCY_TACTICS")||e.gainStatus("GALVANIZE")};_n("SUCCOR",35,{autoUpgrade:{otherSkill:"CONCITATION",trait:"SUCCOR_MASTERY"},applicationDelay:1.12,baseCastTime:2,manaCost:e=>e.hasResourceAvailable("RECITATION")?0:xO,healingPotency:200,onConfirm:HO});_n("CONCITATION",96,{autoDowngrade:{otherSkill:"CONCITATION",trait:"SUCCOR_MASTERY"},replaceIf:LO,applicationDelay:1.12,baseCastTime:2,manaCost:e=>e.hasResourceAvailable("RECITATION")?0:xO,healingPotency:200,onConfirm:HO});_n("PHYSICK",4,{applicationDelay:1.03,healingPotency:[["NEVER",400],["ENHANCED_HEALING_MAGIC",450]],baseCastTime:1.5,manaCost:300});_n("RESURRECTION",12,{applicationDelay:.98,baseCastTime:8,manaCost:2400});pn("AETHERFLOW",45,"cd_AETHERFLOW",{applicationDelay:0,cooldown:60,requiresCombat:!0,onConfirm:e=>{e.resources.get("MANA").gain(2e3),e.resources.get("AETHERFLOW").gain(3)}});bs("DISSIPATION",60,"cd_DISSIPATION",{rscType:"DISSIPATION",applicationDelay:0,cooldown:180,requiresCombat:!0,validateAttempt:e=>!e.hasResourceAvailable("SERAPH_SUMMON_TIMER"),onConfirm:e=>{e.warnLastPetGhost(),e.resources.get("AETHERFLOW").gain(3),e.tryConsumeResource("SERAPHISM")}});pn("LUSTRATE",45,"cd_LUSTRATE",{applicationDelay:.62,cooldown:1,healingPotency:600,validateAttempt:e=>e.hasResourceAvailable("AETHERFLOW"),onConfirm:e=>{e.maybeGainFaerieGauge(),e.tryConsumeResource("AETHERFLOW")}});bs("SACRED_SOIL",50,"cd_SACRED_SOIL",{rscType:"SACRED_SOIL_ZONE",applicationDelay:.62,cooldown:30,validateAttempt:e=>e.hasResourceAvailable("AETHERFLOW"),onConfirm:(e,t)=>{e.maybeGainFaerieGauge(),e.tryConsumeResource("AETHERFLOW"),e.hasTraitUnlocked("ENHANCED_SACRED_SOIL")&&e.addHoTPotencies({node:t,skillName:"SACRED_SOIL",effectName:"SACRED_SOIL_MIT",speedStat:"sps",tickPotency:100},34.96+.62)},onApplication:(e,t)=>{e.hasTraitUnlocked("ENHANCED_SACRED_SOIL")&&(e.applyHoT("SACRED_SOIL_MIT",t,34.96),e.gainStatus("SACRED_SOIL_MIT"))}});bs("EXCOGITATION",62,"cd_EXCOGITATION",{rscType:"EXCOGITATION",applicationDelay:.8,cooldown:45,healingPotency:800,validateAttempt:e=>e.hasResourceAvailable("RECITATION")||e.hasResourceAvailable("AETHERFLOW"),onConfirm:e=>{e.maybeGainFaerieGauge(),e.tryConsumeResource("RECITATION")||e.tryConsumeResource("AETHERFLOW")}});pn("INDOMITABILITY",52,"cd_INDOMITABILITY",{applicationDelay:.62,cooldown:30,healingPotency:400,validateAttempt:e=>e.hasResourceAvailable("RECITATION")||e.hasResourceAvailable("AETHERFLOW"),onConfirm:e=>{e.maybeGainFaerieGauge(),e.tryConsumeResource("RECITATION")||e.tryConsumeResource("AETHERFLOW")}});pn("WHISPERING_DAWN",20,"cd_WHISPERING_DAWN",{applicationDelay:0,cooldown:60,validateAttempt:e=>!e.hasResourceAvailable("DISSIPATION"),onConfirm:(e,t)=>{e.tryConsumeResource("FEY_UNION");const n=e.hasResourceAvailable("SERAPH_SUMMON_TIMER")?"ANGELS_WHISPER":"WHISPERING_DAWN",o=s=>(s.addHoTPotencies({node:t,skillName:"WHISPERING_DAWN",effectName:n,speedStat:"sps",tickPotency:80}),c=>{c.applyHoT(n,t),t.getHotPotencies("WHISPERING_DAWN").forEach(d=>{d.getDisplayedModifiers().includes(J.SchPet)||d.addModifiers(J.SchPet)}),c.gainStatus(n)});e.queuePetAction(t,"WHISPERING_DAWN",n,xu,Hu.get(n),o)}});pn("FEY_ILLUMINATION",40,"cd_FEY_ILLUMINATION",{applicationDelay:0,cooldown:120,validateAttempt:e=>!e.hasResourceAvailable("DISSIPATION"),onConfirm:(e,t)=>{e.tryConsumeResource("FEY_UNION");const n=e.hasResourceAvailable("SERAPH_SUMMON_TIMER")?"SERAPHIC_ILLUMINATION":"FEY_ILLUMINATION",o=s=>c=>c.gainStatus(n);e.queuePetAction(t,"FEY_ILLUMINATION","FEY_ILLUMINATION",xu,Hu.get("FEY_ILLUMINATION"),o)}});pn("DEPLOYMENT_TACTICS",56,"cd_DEPLOYMENT_TACTICS",{applicationDelay:.89,cooldown:120});bs("EMERGENCY_TACTICS",58,"cd_EMERGENCY_TACTICS",{rscType:"EMERGENCY_TACTICS",applicationDelay:0,cooldown:15});pn("AETHERPACT",70,"cd_AETHERPACT",{replaceIf:[{newSkill:"DISSOLVE_UNION",condition:e=>e.hasResourceAvailable("FEY_UNION")}],applicationDelay:0,cooldown:3,validateAttempt:e=>e.resources.get("FAERIE_GAUGE").available(10)&&e.hasRealFairy(),onConfirm:(e,t)=>{e.gainStatus("FEY_UNION");const n=o=>s=>s.gainStatus("FEY_UNION");e.queuePetAction(t,"AETHERPACT","AETHERPACT",xu,Hu.get("AETHERPACT"),n)}});pn("DISSOLVE_UNION",70,"cd_DISSOLVE_UNION",{startOnHotbar:!1,applicationDelay:0,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("FEY_UNION"),onConfirm:e=>e.tryConsumeResource("FEY_UNION")});bs("RECITATION",74,"cd_RECITATION",{rscType:"RECITATION",applicationDelay:0,cooldown:90});pn("FEY_BLESSING",76,"cd_FEY_BLESSING",{applicationDelay:0,cooldown:60,healingPotency:320,validateAttempt:e=>e.hasRealFairy(),onConfirm:(e,t)=>{e.tryConsumeResource("FEY_UNION");const n=o=>{const s=o.makePetPotency(t.healTargetCount,"FEY_BLESSING",o.getDisplayTime(),320);return o.addHealingActionPotencyModifiers(s.getDisplayedModifiers()),c=>I.resolveHealingPotency(s)};e.queuePetAction(t,"FEY_BLESSING","FEY_BLESSING",xu,Hu.get("FEY_BLESSING"),n)}});pn("SUMMON_SERAPH",80,"cd_SUMMON_SERAPH",{replaceIf:[{newSkill:"CONSOLATION",condition:e=>e.hasResourceAvailable("SERAPH_SUMMON_TIMER")}],applicationDelay:0,cooldown:120,validateAttempt:e=>e.hasRealFairy(),onConfirm:e=>{e.warnLastPetGhost(),e.gainStatus("SERAPH_SUMMON_TIMER"),e.tryConsumeResource("FEY_UNION")}});pn("CONSOLATION",80,"cd_CONSOLATION",{startOnHotbar:!1,applicationDelay:0,cooldown:1,secondaryCooldown:{cdName:"cd_CONSOLATION_INTERNAL",cooldown:30,maxCharges:2},healingPotency:250,validateAttempt:e=>e.hasResourceAvailable("SERAPH_SUMMON_TIMER"),onConfirm:(e,t)=>{const n=o=>{const s=o.makePetPotency(t.healTargetCount,"CONSOLATION",o.getDisplayTime(),250);return c=>{c.gainStatus("SERAPHIC_VEIL"),I.resolveHealingPotency(s)}};e.queuePetAction(t,"CONSOLATION","CONSOLATION",xu,Hu.get("CONSOLATION"),n)}});bs("PROTRACTION",86,"cd_PROTRACTION",{rscType:"PROTRACTION",applicationDelay:.76,cooldown:60});pn("EXPEDIENT",90,"cd_EXPEDIENT",{applicationDelay:0,cooldown:120,onConfirm:e=>{e.gainStatus("EXPEDIENCE"),e.gainStatus("DESPERATE_MEASURES")}});bs("SERAPHISM",100,"cd_SERAPHISM",{requiresCombat:!0,rscType:"SERAPHISM",applicationDelay:0,cooldown:180,validateAttempt:e=>!e.hasResourceAvailable("DISSIPATION"),onConfirm:(e,t)=>{const n=e.cooldowns.get("cd_EMERGENCY_TACTICS");n.restore(15),e.cooldowns.set(new Ue("cd_EMERGENCY_TACTICS",1,1,1)),e.addEvent(new Oe("restore etact cd",e.getStatusDuration("SERAPHISM"),()=>e.cooldowns.set(n))),e.addHoTPotencies({node:t,skillName:"SERAPHISM",effectName:"SERAPHISM_REGEN",speedStat:"sps",tickPotency:100},24.96)},onApplication:(e,t)=>{e.applyHoT("SERAPHISM_REGEN",t,24.96),e.gainStatus("SERAPHISM_REGEN")}});_n("MANIFESTATION",100,{startOnHotbar:!1,replaceIf:MO,applicationDelay:1.16,healingPotency:360,baseCastTime:0,manaCost:900,validateAttempt:e=>e.hasResourceAvailable("SERAPHISM"),onConfirm:e=>{e.tryConsumeResource("EMERGENCY_TACTICS")||(e.gainStatus("GALVANIZE"),e.triggersEffect(e.config.critRate)&&e.gainStatus("CATALYZE"))}});_n("ACCESSION",100,{startOnHotbar:!1,replaceIf:LO,applicationDelay:.98,healingPotency:240,baseCastTime:0,manaCost:900,validateAttempt:e=>e.hasResourceAvailable("SERAPHISM"),onConfirm:e=>!e.tryConsumeResource("EMERGENCY_TACTICS")&&e.gainStatus("GALVANIZE")});Object.keys(tT).forEach(e=>zt(e,`WHM/${Pe[e].name}.png`));const kO=["AERO_II","DIA"],jB=Object.keys(tT).filter(e=>!kO.includes(e));class zB extends Xt{jobSpecificOtherTargetedBuffViewProps(){return[...kO.flatMap(t=>this.makeTargetedTimers(t))]}jobSpecificSelfTargetedBuffViewProps(){return[...jB.map(t=>this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){const n=this.state.resources,o=n.get("LILLIES"),s=n.get("LILY_TIMER").available(1)?n.timeTillReady("LILY_TIMER"):20,c=o.availableAmount(),d=n.get("BLOOD_LILY").availableAmount(),f=[{kind:"bar",name:Ke("LILY_TIMER"),color:t.whm.lily,progress:1-s/20,valueString:s.toFixed(3)},{kind:"counter",name:Ke("LILLIES"),color:t.whm.lily,currentStacks:c,maxStacks:3}];return this.state.hasTraitUnlocked("TRANSCENDENT_AFFLATUS")&&f.push({kind:"counter",name:Ke("BLOOD_LILY"),color:t.whm.blood,currentStacks:d,maxStacks:3}),f}}const Ta=(e,t,n)=>{Ve("WHM",e,t,n??{})};Ta("LILLIES",3,{default:3});Ta("LILY_TIMER",1);Ta("BLOOD_LILY",3,{default:3,warnOnOvercap:!0});Ta("FREECURE",1,{timeout:15});Ta("PRESENCE_OF_MIND",1,{timeout:15});Ta("SACRED_SIGHT",3,{timeout:30,warnOnTimeout:!0});Ta("REGEN",1,{timeout:18});Ta("AERO_II",1,{timeout:30});Ta("MEDICA_II",1,{timeout:15});Ta("ASYLUM",1,{timeout:24});Ta("THIN_AIR",1,{timeout:12});Ta("DIVINE_BENISON",1,{timeout:15});Ta("CONFESSION",1,{timeout:10});Ta("DIA",1,{timeout:30});Ta("TEMPERANCE",1,{timeout:20});Ta("DIVINE_GRACE",1,{timeout:30});Ta("AQUAVEIL",1,{timeout:8});Ta("LITURGY_OF_THE_BELL",5,{timeout:20});Ta("MEDICA_III",1,{timeout:15});Ta("DIVINE_CARESS",1,{timeout:10});Ta("DIVINE_AURA",1,{timeout:15});class YB extends qt{constructor(t){super(t);const n=this.hasTraitUnlocked("ENHANCED_DIVINE_BENISON")?2:1,o=this.hasTraitUnlocked("ENHANCED_TETRAGRAMMATON")?2:1;this.cooldowns.set(new Ue("cd_DIVINE_BENISON",30,n,n)),this.cooldowns.set(new Ue("cd_TETRAGRAMMATON",60,o,o)),this.cooldowns.set(new Ue("cd_SWIFTCAST",this.hasTraitUnlocked("ENHANCED_SWIFTCAST")?40:60,1,1)),this.registerRecurringEvents([{reportName:N({en:"Dia/Aero DoT",zh:"/DoT"}),groupedEffects:[{effectName:"AERO_II",appliedBy:["AERO_II"]},{effectName:"DIA",appliedBy:["DIA"]}]},{isHealing:!0,groupedEffects:[{effectName:"DIVINE_AURA",appliedBy:["DIVINE_CARESS"]}]},{isHealing:!0,groupedEffects:[{effectName:"ASYLUM",appliedBy:["ASYLUM"]}]},{isHealing:!0,groupedEffects:[{effectName:"REGEN",appliedBy:["REGEN"]}]},{isHealing:!0,groupedEffects:[{effectName:"MEDICA_II",appliedBy:["MEDICA_II"]},{effectName:"MEDICA_III",appliedBy:["MEDICA_III"]}]}])}jobSpecificRegisterRecurringEvents(){(this.isInCombat()||this.hasResourceAvailable("LILY_TIMER"))&&!this.hasResourceAvailable("LILLIES",3)&&this.startLilyTimer()}jobSpecificAddHealingBuffCovers(t,n){this.hasTraitUnlocked("ENHANCED_ASYLUM")&&this.hasResourceAvailable("ASYLUM")&&t.addBuff(k.Asylum),this.hasResourceAvailable("TEMPERANCE")&&t.addBuff(k.Temperance),n.cdName==="cd_GCD"&&n.aoeHeal&&this.hasResourceAvailable("CONFESSION")&&t.addBuff(k.Confession)}recurringLilyGain(){this.resources.addResourceEvent({rscType:"LILY_TIMER",name:"gain lily",delay:20,fnOnRsc:()=>{this.resources.get("LILLIES").gain(1),this.hasResourceAvailable("LILLIES",3)?this.tryConsumeResource("LILY_TIMER"):this.recurringLilyGain()}})}startLilyTimer(){this.hasResourceAvailable("LILY_TIMER")||this.hasResourceAvailable("LILLIES",3)||(this.resources.get("LILY_TIMER").gain(1),this.recurringLilyGain())}addHealingActionPotencyModifiers(t){this.hasTraitUnlocked("ENHANCED_ASYLUM")&&this.hasResourceAvailable("ASYLUM")&&t.push(J.Asylum),this.hasResourceAvailable("TEMPERANCE")&&t.push(J.Temperance)}get statusPropsGenerator(){return new zB(this)}}const La=(e,t,n)=>{const o=s=>{if(!n.healingPotency)return[];const c=[];return s.hasResourceAvailable("CONFESSION")&&n.aoeHeal&&c.push(J.Confession),s.addHealingActionPotencyModifiers(c),c};return Xn("WHM",e,t,{...n,castTime:s=>s.config.adjustedCastTime(n.baseCastTime??0,s.hasResourceAvailable("PRESENCE_OF_MIND")?20:0),recastTime:s=>s.config.adjustedGCD(2.5,s.hasResourceAvailable("PRESENCE_OF_MIND")?20:0),isInstantFn:s=>!n.baseCastTime||s.hasResourceAvailable("SWIFTCAST"),manaCost:n.manaCost?s=>s.hasResourceAvailable("THIN_AIR")?0:fn(n.manaCost)(s):void 0,jobHealingPotencyModifiers:o,onConfirm:Le(s=>s.tryConsumeResource("THIN_AIR"),n.baseCastTime?s=>s.tryConsumeResource("SWIFTCAST"):void 0,n.onConfirm),onApplication:Le(n.potency||e=="AFFLATUS_SOLACE"||e=="AFFLATUS_RAPTURE"?s=>s.startLilyTimer():void 0,n.onApplication)})},Os=(e,t,n,o)=>et("WHM",e,t,n,{...o,jobHealingPotencyModifiers:c=>{if(!o.healingPotency)return[];const d=[];return o.isPetHeal&&d.push(J.WhmPet),c.addHealingActionPotencyModifiers(d),d}}),vl=(e,t,n,o)=>Ye("WHM",e,t,n,{...o,jobHealingPotencyModifiers:c=>{if(!o.healingPotency)return[];const d=[];return c.addHealingActionPotencyModifiers(d),d}});La("STONE_IV",64,{autoUpgrade:{otherSkill:"GLARE",trait:"STONE_MASTERY_IV"},applicationDelay:.8,baseCastTime:1.5,potency:260,manaCost:400});La("GLARE",72,{autoDowngrade:{otherSkill:"STONE_IV",trait:"STONE_MASTERY_IV"},autoUpgrade:{otherSkill:"GLARE_III",trait:"GLARE_MASTERY"},applicationDelay:1.29,baseCastTime:1.5,potency:290,manaCost:400});La("GLARE_III",82,{autoDowngrade:{otherSkill:"GLARE",trait:"GLARE_MASTERY"},applicationDelay:1.29,baseCastTime:1.5,potency:[["NEVER",310],["WHITE_MAGIC_MASTERY",350]],manaCost:400});La("AERO_II",46,{autoUpgrade:{otherSkill:"DIA",trait:"AERO_MASTERY_II"},applicationDelay:1.15,potency:50,manaCost:200,onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"AERO_II",skillName:"AERO_II",tickPotency:50,speedStat:"sps"})},onApplication:(e,t)=>e.applyDoT("AERO_II",t)});La("DIA",72,{autoDowngrade:{otherSkill:"AERO_II",trait:"AERO_MASTERY_II"},applicationDelay:1.29,potency:[["NEVER",65],["WHITE_MAGIC_MASTERY",85]],manaCost:400,onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"DIA",skillName:"DIA",tickPotency:e.hasTraitUnlocked("WHITE_MAGIC_MASTERY")?85:65,speedStat:"sps"})},onApplication:(e,t)=>e.applyDoT("DIA",t)});La("HOLY",45,{autoUpgrade:{otherSkill:"HOLY_III",trait:"HOLY_MASTERY"},applicationDelay:2.13,potency:140,baseCastTime:1.5,falloff:0,manaCost:400});La("HOLY_III",82,{autoDowngrade:{otherSkill:"HOLY",trait:"HOLY_MASTERY"},applicationDelay:2.13,potency:150,baseCastTime:1.5,falloff:0,manaCost:400});La("AFFLATUS_MISERY",74,{applicationDelay:.58,potency:[["NEVER",1240],["WHITE_MAGIC_MASTERY",1400]],falloff:.5,manaCost:0,highlightIf:e=>e.hasResourceExactly("BLOOD_LILY",3),validateAttempt:e=>e.hasResourceExactly("BLOOD_LILY",3),onConfirm:e=>e.tryConsumeResource("BLOOD_LILY",!0)});La("AFFLATUS_SOLACE",52,{applicationDelay:.53,healingPotency:[["NEVER",700],["ENHANCED_HEALING_MAGIC",800]],manaCost:0,validateAttempt:e=>e.hasResourceAvailable("LILLIES"),onConfirm:e=>{e.tryConsumeResource("LILLIES"),e.resources.get("BLOOD_LILY").gain(1)}});La("AFFLATUS_RAPTURE",76,{applicationDelay:.58,healingPotency:[["NEVER",300],["ENHANCED_HEALING_MAGIC",400]],manaCost:0,aoeHeal:!0,validateAttempt:e=>e.hasResourceAvailable("LILLIES"),onConfirm:e=>{e.tryConsumeResource("LILLIES"),e.resources.get("BLOOD_LILY").gain(1)}});La("REGEN",35,{applicationDelay:1.02,healingPotency:[["NEVER",200],["ENHANCED_HEALING_MAGIC",250]],manaCost:400,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"REGEN",effectName:"REGEN",speedStat:"sps",tickPotency:e.hasTraitUnlocked("ENHANCED_HEALING_MAGIC")?250:200})},onApplication:(e,t)=>{e.applyHoT("REGEN",t),e.gainStatus("REGEN")}});La("CURE",2,{applicationDelay:1.03,healingPotency:[["NEVER",450],["ENHANCED_HEALING_MAGIC",500]],baseCastTime:1.5,manaCost:400,onConfirm:e=>e.maybeGainProc("FREECURE",.15)});La("CURE_II",30,{applicationDelay:.98,healingPotency:[["NEVER",700],["ENHANCED_HEALING_MAGIC",800]],baseCastTime:2,manaCost:e=>e.hasResourceAvailable("FREECURE")?0:1e3,highlightIf:e=>e.hasResourceAvailable("FREECURE"),onConfirm:e=>e.tryConsumeResource("FREECURE")});La("CURE_III",40,{applicationDelay:.98,healingPotency:[["NEVER",550],["ENHANCED_HEALING_MAGIC",600]],baseCastTime:2,manaCost:1500,aoeHeal:!0});La("MEDICA",10,{applicationDelay:1.02,healingPotency:[["NEVER",300],["ENHANCED_HEALING_MAGIC",400]],baseCastTime:2,manaCost:900,aoeHeal:!0});La("MEDICA_II",50,{autoUpgrade:{otherSkill:"MEDICA_III",trait:"MEDICA_MASTERY"},applicationDelay:.84,healingPotency:[["NEVER",200],["ENHANCED_HEALING_MAGIC",250]],baseCastTime:2,manaCost:1e3,aoeHeal:!0,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"MEDICA_II",effectName:"MEDICA_II",speedStat:"sps",tickPotency:e.hasTraitUnlocked("ENHANCED_HEALING_MAGIC")?150:100})},onApplication:(e,t)=>{e.applyHoT("MEDICA_II",t),e.gainStatus("MEDICA_II")}});La("MEDICA_III",96,{autoDowngrade:{otherSkill:"MEDICA_II",trait:"MEDICA_MASTERY"},applicationDelay:.84,healingPotency:250,baseCastTime:2,manaCost:1e3,aoeHeal:!0,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"MEDICA_III",effectName:"MEDICA_III",speedStat:"sps",tickPotency:175})},onApplication:(e,t)=>{e.applyHoT("MEDICA_III",t),e.gainStatus("MEDICA_III")}});La("RAISE",12,{baseCastTime:8,manaCost:2400,applicationDelay:1.16});Os("ASSIZE",56,"cd_ASSIZE",{applicationDelay:.67,cooldown:40,potency:400,falloff:0,healingPotency:400,onApplication:e=>e.resources.get("MANA").gain(500)});vl("PRESENCE_OF_MIND",30,"cd_PRESENCE_OF_MIND",{rscType:"PRESENCE_OF_MIND",applicationDelay:.53,cooldown:120,replaceIf:[{newSkill:"GLARE_IV",condition:e=>e.hasResourceAvailable("SACRED_SIGHT")}],onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_PRESENCE_OF_MIND")&&e.gainStatus("SACRED_SIGHT",3)}});La("GLARE_IV",92,{startOnHotbar:!1,applicationDelay:.85,potency:640,falloff:.4,manaCost:0,highlightIf:e=>e.hasResourceAvailable("SACRED_SIGHT"),validateAttempt:e=>e.hasResourceAvailable("SACRED_SIGHT"),onConfirm:e=>e.tryConsumeResource("SACRED_SIGHT")});vl("THIN_AIR",58,"cd_THIN_AIR",{rscType:"THIN_AIR",applicationDelay:0,cooldown:60,maxCharges:2});Os("AETHERIAL_SHIFT",40,"cd_AETHERIAL_SHIFT",{applicationDelay:0,cooldown:60,animationLock:Wt});vl("DIVINE_BENISON",66,"cd_DIVINE_BENISON",{rscType:"DIVINE_BENISON",applicationDelay:.8,cooldown:30,maxCharges:2});vl("AQUAVEIL",86,"cd_AQUAVEIL",{rscType:"AQUAVEIL",applicationDelay:.62,cooldown:60});Os("TETRAGRAMMATON",60,"cd_TETRAGRAMMATON",{applicationDelay:.53,cooldown:60,maxCharges:2,healingPotency:700});Os("BENEDICTION",50,"cd_BENEDICTION",{applicationDelay:.62,cooldown:180});Os("ASYLUM",52,"cd_ASYLUM",{applicationDelay:.85,cooldown:90,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"ASYLUM",effectName:"ASYLUM",speedStat:"sps",tickPotency:100})},onApplication:e=>e.gainStatus("ASYLUM")});vl("PLENARY_INDULGENCE",70,"cd_PLENARY_INDULGENCE",{rscType:"CONFESSION",applicationDelay:.8,cooldown:60});vl("TEMPERANCE",80,"cd_TEMPERANCE",{rscType:"TEMPERANCE",applicationDelay:.62,cooldown:120,replaceIf:[{newSkill:"DIVINE_CARESS",condition:e=>e.hasResourceAvailable("DIVINE_GRACE")}],onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_TEMPERANCE")&&e.gainStatus("DIVINE_GRACE")}});vl("LITURGY_OF_THE_BELL",90,"cd_LITURGY_OF_THE_BELL",{rscType:"LITURGY_OF_THE_BELL",applicationDelay:0,cooldown:180,replaceIf:[{newSkill:"LITURGY_POP",condition:e=>e.hasResourceAvailable("LITURGY_OF_THE_BELL")}]});Os("LITURGY_TRIGGER",90,"cd_LITURGY_TRIGGER",{applicationDelay:0,cooldown:1,isPetHeal:!0,healingPotency:425,animationLock:en,validateAttempt:e=>e.hasResourceAvailable("LITURGY_OF_THE_BELL"),highlightIf:e=>e.hasResourceAvailable("LITURGY_OF_THE_BELL"),onConfirm:e=>e.tryConsumeResource("LITURGY_OF_THE_BELL")});Os("LITURGY_POP",90,"cd_LITURGY_POP",{startOnHotbar:!1,applicationDelay:0,cooldown:1,isPetHeal:!0,healingPotency:e=>212*e.resources.get("LITURGY_OF_THE_BELL").availableAmount(),validateAttempt:e=>e.hasResourceAvailable("LITURGY_OF_THE_BELL"),highlightIf:e=>e.hasResourceAvailable("LITURGY_OF_THE_BELL"),onConfirm:e=>e.tryConsumeResource("LITURGY_OF_THE_BELL",!0)});vl("DIVINE_CARESS",100,"cd_DIVINE_CARESS",{startOnHotbar:!1,rscType:"DIVINE_CARESS",applicationDelay:0,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("DIVINE_GRACE"),highlightIf:e=>e.hasResourceAvailable("DIVINE_GRACE"),onConfirm:e=>e.tryConsumeResource("DIVINE_GRACE"),onApplication:e=>{e.resources.addResourceEvent({rscType:"DIVINE_CARESS",name:"trigger divine aura on divine caress expiry",delay:10,fnOnRsc:()=>e.gainStatus("DIVINE_AURA")})}});Object.keys(YR).forEach(e=>zt(e,`NIN/${Pe[e].name}.png`));const UO=["DOKUMORI","TRICK_ATTACK","KUNAIS_BANE"],KB=Object.keys(YR).filter(e=>!UO.includes(e));class VB extends Xt{jobSpecificOtherTargetedBuffViewProps(){return[...UO.flatMap(t=>this.makeTargetedTimers(t))]}jobSpecificSelfTargetedBuffViewProps(){return KB.map(t=>t==="HIDDEN"?this.makeCommonTimerless(t):this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){const n=this.state.resources,o=n.get("NIN_COMBO_TRACKER"),s=n.get("NIN_AOE_COMBO_TRACKER"),c=n.get("KAZEMATOI").availableAmount(),d=n.get("NINKI").availableAmount(),f=o.available(1)?o.pendingChange?.timeTillEvent:s.available(1)?s.pendingChange?.timeTillEvent:void 0;return[{kind:"bar",name:N({en:"Combo Timer",zh:""}),color:t.nin.ninComboTimer,progress:f?f/30:0,valueString:f?.toFixed(3)??"N/A"},{kind:"counter",name:Ke("KAZEMATOI"),color:t.nin.kazematoi,currentStacks:c,maxStacks:5},{kind:"bar",name:Ke("NINKI"),color:t.nin.ninki,progress:d/100,valueString:d.toFixed(0)}]}}const da=(e,t,n)=>{Ve("NIN",e,t,n??{})};da("KAZEMATOI",5,{warnOnOvercap:!0});da("NINKI",100,{warnOnOvercap:!0});da("SHADE_SHIFT",1,{timeout:20});da("MUDRA",1,{timeout:6});da("HIDDEN",1);da("TRICK_ATTACK",1,{timeout:15.77});da("KASSATSU",1,{timeout:15,warnOnTimeout:!0});da("DOKUMORI",1,{timeout:21});da("TENRI_JINDO_READY",1,{timeout:30,warnOnTimeout:!0});da("TEN_CHI_JIN",1,{timeout:6});da("MEISUI",1,{timeout:30});da("SHADOW_WALKER",1,{timeout:20});da("BUNSHIN",5,{timeout:30,warnOnTimeout:!0});da("PHANTOM_KAMAITACHI_READY",1,{timeout:45,warnOnTimeout:!0});da("RAIJU_READY",3,{timeout:30,warnOnTimeout:!0});da("KUNAIS_BANE",1,{timeout:16.25});da("HIGI",1,{timeout:30});da("DOTON",1,{timeout:18});da("NIN_COMBO_TRACKER",2,{timeout:30});da("NIN_AOE_COMBO_TRACKER",1,{timeout:30});da("MUDRA_TRACKER",1e4);da("BUNNY",1);const WB=["SPINNING_EDGE","GUST_SLASH","AEOLIAN_EDGE","ARMOR_CRUSH","THROWING_DAGGER","DEATH_BLOSSOM","HAKKE_MUJINSATSU","FORKED_RAIJU","FLEETING_RAIJU"];class XB extends qt{constructor(t){super(t);const n=this.hasTraitUnlocked("ENHANCED_SHUKUCHI_II")?2:1;this.cooldowns.set(new Ue("cd_SHUKUCHI",60,n,n)),this.registerRecurringEvents([{groupedEffects:[{effectName:"DOTON",appliedBy:["DOTON","DOTON_CHI"],isGroundTargeted:!0}]}])}jobSpecificAddDamageBuffCovers(t,n){t.targetList.forEach(o=>{this.hasDebuffActive("DOKUMORI",o)&&t.addBuff(k.Dokumori),this.hasDebuffActive("TRICK_ATTACK",o)&&t.addBuff(k.TrickAttack),this.hasDebuffActive("KUNAIS_BANE",o)&&t.addBuff(k.KunaisBane)}),this.hasResourceAvailable("BUNSHIN")&&WB.includes(n.name)&&t.addBuff(k.Bunshin)}inherentSpeedModifier(){return 15}get statusPropsGenerator(){return new VB(this)}stackRaijuReady(){this.resources.get("RAIJU_READY").gain(1),this.enqueueResourceDrop("RAIJU_READY")}gainNinki(t){this.resources.get("NINKI").gain(t)}processComboStatus(t){if(["THROWING_DAGGER","FORKED_RAIJU","FLEETING_RAIJU","PHANTOM_KAMAITACHI"].includes(t))return;let n=[this.resources.get("NIN_COMBO_TRACKER").availableAmount(),this.resources.get("NIN_AOE_COMBO_TRACKER").availableAmount()];t==="SPINNING_EDGE"?n=[1,0]:t==="GUST_SLASH"&&n[0]===1?n=[2,0]:t==="DEATH_BLOSSOM"?n=[0,1]:n=[0,0],this.setComboState("NIN_COMBO_TRACKER",n[0]),this.setComboState("NIN_AOE_COMBO_TRACKER",n[1])}parseMudraTracker(){if(this.hasResourceAvailable("BUNNY"))return;const t=this.resources.get("MUDRA_TRACKER").availableAmount();if(t===0)return[];if(t<10)return console.assert(t<4,`mudra tracker value ${t} was invalid`),[t];if(t<100)return console.assert(t%10!==0,`mudra tracker value ${t} was invalid`),[Math.floor(t/10),t%10];if(t<1e3)return[Math.floor(t/100),Math.floor(t/10)%10,t%10]}isMudraTrackerIn(t){const n=this.parseMudraTracker();return n!==void 0&&t.some(o=>n.length===o.length&&n.every((s,c)=>o[c]===s))}clearMudraInfo(){this.tryConsumeResource("MUDRA"),this.tryConsumeResource("KASSATSU"),this.resources.get("MUDRA_TRACKER").overrideCurrentValue(0),this.resources.get("BUNNY").overrideCurrentValue(0)}pushMudra(t,n){const o=this.resources.get("MUDRA_TRACKER"),s=o.availableAmount();if(s===0&&!n&&(console.assert(this.resources.get("MUDRA_TRACKER").availableAmount()===0),console.assert(this.resources.get("BUNNY").availableAmount()===0),this.gainStatus("MUDRA"),this.resources.get("MUDRA").removeTimer(),this.resources.addResourceEvent({rscType:"MUDRA",name:"clear mudra tracker/bunny",delay:Ut("NIN","MUDRA").maxTimeout,fnOnRsc:()=>this.clearMudraInfo()})),s>1e3)return;const c=s*10+t;o.overrideCurrentValue(c),n&&c>100&&(this.tryConsumeResource("TEN_CHI_JIN"),this.clearMudraInfo())}}const pN=e=>!e.hasResourceAvailable("TEN_CHI_JIN"),ZT=e=>{e.hasResourceAvailable("MUDRA")&&e.gainStatus("BUNNY")},QT=e=>e===void 0?pN:t=>pN(t)&&e(t),ac=(e,t)=>{const n=new Map;return t.targetList.forEach(o=>{const s=[];e.hasDebuffActive("DOKUMORI",o)&&s.push(J.Dokumori),e.hasDebuffActive("TRICK_ATTACK",o)&&s.push(J.TrickAttack),e.hasDebuffActive("KUNAIS_BANE",o)&&s.push(J.KunaisBane),s.length>0&&n.set(o,s)}),n},oo=(e,t,n)=>ia("NIN",e,t,{...n,recastTime:o=>o.config.adjustedSksGCD(2.5,o.inherentSpeedModifier()),validateAttempt:QT(n.validateAttempt),onConfirm:Le(ZT,(o,s)=>n.onConfirm?.(o,s),o=>{e!=="PHANTOM_KAMAITACHI"&&o.tryConsumeResource("BUNSHIN")&&o.gainNinki(5)},["THROWING_DAGGER","PHANTOM_KAMAITACHI","FORKED_RAIJU","FLEETING_RAIJU"].includes(e)?void 0:o=>o.tryConsumeResource("RAIJU_READY",!0)&&I.reportWarning({kind:"overwrite",rsc:"RAIJU_READY"}),o=>o.processComboStatus(e)),jobPotencyModifiers:o=>{const s=n.jobPotencyModifiers?.(o)??[];return o.hasResourceAvailable("BUNSHIN")&&e!=="PHANTOM_KAMAITACHI"&&(e==="DEATH_BLOSSOM"||e==="HAKKE_MUJINSATSU"?s.push(J.BunshinAOE):s.push(J.BunshinST)),s},jobTargetPotencyModifiers:ac}),lo=(e,t,n,o)=>et("NIN",e,t,n,{...o,validateAttempt:QT(o.validateAttempt),onConfirm:Le(ZT,(s,c)=>o.onConfirm?.(s,c)),jobTargetPotencyModifiers:ac}),ku=(e,t,n,o)=>Ye("NIN",e,t,n,{...o,validateAttempt:QT(o.validateAttempt),onConfirm:Le(ZT,(s,c)=>o.onConfirm?.(s,c))});oo("THROWING_DAGGER",15,{applicationDelay:.62,potency:[["NEVER",120],["MELEE_MASTERY_II_NIN",200]],onConfirm:e=>e.gainNinki(5),startsAuto:!1});oo("SPINNING_EDGE",1,{applicationDelay:.4,potency:[["NEVER",180],["MELEE_MASTERY_II_NIN",220],["MELEE_MASTERY_III_NIN",300]],onConfirm:e=>e.gainNinki(5)});oo("GUST_SLASH",4,{applicationDelay:.4,potency:[["NEVER",100],["MELEE_MASTERY_NIN",120],["MELEE_MASTERY_II_NIN",160],["MELEE_MASTERY_III_NIN",240]],combo:{potency:[["NEVER",260],["MELEE_MASTERY_NIN",280],["MELEE_MASTERY_II_NIN",320],["MELEE_MASTERY_III_NIN",400]],resource:"NIN_COMBO_TRACKER",resourceValue:1},highlightIf:e=>e.hasResourceExactly("NIN_COMBO_TRACKER",1),onConfirm:e=>e.hasResourceExactly("NIN_COMBO_TRACKER",1)&&e.gainNinki(5)});const wO=e=>e.gainNinki(e.hasTraitUnlocked("SHUKIHO_III")?15:e.hasTraitUnlocked("SHUKIHO_II")?10:5);oo("AEOLIAN_EDGE",26,{applicationDelay:.54,potency:[["NEVER",100],["MELEE_MASTERY_NIN",140],["MELEE_MASTERY_III_NIN",220]],combo:{potency:[["NEVER",340],["MELEE_MASTERY_III_NIN",400]],resource:"NIN_COMBO_TRACKER",resourceValue:2},positional:{potency:[["NEVER",160],["MELEE_MASTERY_NIN",200],["MELEE_MASTERY_III_NIN",280]],comboPotency:[["NEVER",400],["MELEE_MASTERY_III_NIN",460]],location:"rear"},highlightIf:e=>e.hasResourceExactly("NIN_COMBO_TRACKER",2),onConfirm:wO,jobPotencyModifiers:e=>e.tryConsumeResource("KAZEMATOI")?[J.Kazematoi]:[]});oo("ARMOR_CRUSH",54,{applicationDelay:.62,potency:[["NEVER",100],["MELEE_MASTERY_NIN",140],["MELEE_MASTERY_III_NIN",240]],combo:{potency:[["NEVER",320],["MELEE_MASTERY_NIN",360],["MELEE_MASTERY_III_NIN",440]],resource:"NIN_COMBO_TRACKER",resourceValue:2},positional:{potency:[["NEVER",160],["MELEE_MASTERY_NIN",200],["MELEE_MASTERY_III_NIN",300]],comboPotency:[["NEVER",380],["MELEE_MASTERY_NIN",420],["MELEE_MASTERY_III_NIN",500]],location:"flank"},highlightIf:e=>e.hasResourceExactly("NIN_COMBO_TRACKER",2),onConfirm:Le(e=>{e.hasResourceExactly("NIN_COMBO_TRACKER",2)&&e.resources.get("KAZEMATOI").gain(2)},wO)});oo("DEATH_BLOSSOM",38,{applicationDelay:.71,potency:100,falloff:0,onConfirm:e=>e.gainNinki(5)});oo("HAKKE_MUJINSATSU",52,{applicationDelay:.62,potency:100,combo:{potency:120,resource:"NIN_AOE_COMBO_TRACKER",resourceValue:1},falloff:0,highlightIf:e=>e.hasResourceExactly("NIN_AOE_COMBO_TRACKER",1),onConfirm:e=>e.hasResourceExactly("NIN_AOE_COMBO_TRACKER",1)&&e.gainNinki(5),jobPotencyModifiers:e=>e.hasResourceExactly("NIN_AOE_COMBO_TRACKER",1)&&e.hasResourceAvailable("DOTON")?[J.HollowNozuchi]:[]});const kr=e=>e.hasResourceAvailable("TEN_CHI_JIN")&&e.isMudraTrackerIn([[]]),PO=e=>e.hasResourceAvailable("TEN_CHI_JIN")&&e.isMudraTrackerIn([[2],[3]]),GO=e=>e.hasResourceAvailable("TEN_CHI_JIN")&&e.isMudraTrackerIn([[1],[3]]),BO=e=>e.hasResourceAvailable("TEN_CHI_JIN")&&e.isMudraTrackerIn([[1],[2]]),FO=e=>e.hasResourceAvailable("TEN_CHI_JIN")&&e.isMudraTrackerIn([[3,2],[2,3]]),jO=e=>e.hasResourceAvailable("TEN_CHI_JIN")&&e.isMudraTrackerIn([[1,3],[3,1]]),zO=e=>e.hasResourceAvailable("TEN_CHI_JIN")&&e.isMudraTrackerIn([[1,2],[2,1]]),YO=[{newSkill:"TEN",condition:e=>!e.hasResourceAvailable("TEN_CHI_JIN")},{newSkill:"FUMA_SHURIKEN_TEN",condition:kr},{newSkill:"KATON_TEN",condition:PO},{newSkill:"HUTON_TEN",condition:FO}],$T=[{newSkill:"CHI",condition:e=>!e.hasResourceAvailable("TEN_CHI_JIN")},{newSkill:"FUMA_SHURIKEN_CHI",condition:kr},{newSkill:"RAITON_CHI",condition:GO},{newSkill:"DOTON_CHI",condition:jO}],KO=[{newSkill:"JIN",condition:e=>!e.hasResourceAvailable("TEN_CHI_JIN")},{newSkill:"FUMA_SHURIKEN_JIN",condition:kr},{newSkill:"HYOTON_JIN",condition:BO},{newSkill:"SUITON_JIN",condition:zO}],VO=[["FUMA_SHURIKEN",30,.89,[["NEVER",450],["MELEE_MASTERY_III_NIN",500]],void 0],["KATON",35,.94,350,0],["RAITON",35,.71,[["NEVER",650],["MELEE_MASTERY_III_NIN",740]],void 0],["HYOTON",45,1.16,350,void 0],["HUTON",45,.98,240,0],["SUITON",45,.98,[["NEVER",500],["MELEE_MASTERY_III_NIN",580]],void 0],["GOKA_MEKKYAKU",76,.76,850,0],["HYOSHO_RANRYU",76,.62,1300,void 0]],qB=new Map(VO.map(([e,t,n,o,s])=>[e,[t,n,o,s]])),ZB=[["FUMA_SHURIKEN_TEN",kr],["FUMA_SHURIKEN_CHI",kr],["FUMA_SHURIKEN_JIN",kr],["KATON_TEN",PO],["RAITON_CHI",GO],["HYOTON_JIN",BO],["HUTON_TEN",FO],["SUITON_JIN",zO]];ZB.forEach(([e,t])=>{const[,n,o,s]=qB.get(e.substring(0,e.length-4)),c=e.substring(e.length-3);ia("NIN",e,70,{startOnHotbar:!1,applicationDelay:n,recastTime:e==="HUTON_TEN"||e==="SUITON_JIN"?1.5:1,potency:o,falloff:s,replaceIf:c==="TEN"?YO:c==="CHI"?$T:KO,validateAttempt:t,jobPotencyModifiers:f=>{const h=[];return e==="KATON"&&f.hasResourceAvailable("DOTON")&&h.push(J.HollowNozuchi),h},jobTargetPotencyModifiers:ac,onConfirm:Le(f=>f.pushMudra(c==="TEN"?1:c==="CHI"?2:3,!0),e==="RAITON_CHI"?f=>f.stackRaijuReady():e==="SUITON_JIN"||e==="HUTON_TEN"?f=>f.gainStatus("SHADOW_WALKER"):void 0),startsAuto:!1})});const WO=(e,t)=>{e.applyDoT("DOTON",t),e.gainStatus("DOTON")};ia("NIN","DOTON_CHI",70,{startOnHotbar:!1,recastTime:1.5,replaceIf:$T,falloff:0,validateAttempt:jO,jobTargetPotencyModifiers:ac,onConfirm:Le((e,t)=>{e.addDoTPotencies({node:t,effectName:"DOTON",skillName:"DOTON",tickPotency:80,speedStat:"sks"})},e=>e.pushMudra(2,!0)),onApplication:WO});[["TEN",30,YO],["CHI",35,$T],["JIN",45,KO]].forEach(([e,t,n],o)=>{ia("NIN",e,t,{recastTime:.5,animationLock:.5,replaceIf:n,secondaryCooldown:{cdName:"cd_MUDRA",cooldown:20,maxCharges:2},jobTargetPotencyModifiers:ac,validateAttempt:s=>!s.hasResourceAvailable("TEN_CHI_JIN"),onConfirm:s=>s.pushMudra(o+1,!1)})});const QB=e=>e.hasTraitUnlocked("ENHANCED_KASSATSU")&&e.hasResourceAvailable("KASSATSU")&&e.isMudraTrackerIn([[2,1],[3,1]]),$B=e=>e.hasTraitUnlocked("ENHANCED_KASSATSU")&&e.hasResourceAvailable("KASSATSU")&&e.isMudraTrackerIn([[1,3],[2,3]]),JB=e=>e.hasResourceAvailable("MUDRA")&&e.isMudraTrackerIn([[1],[2],[3]]),e2=e=>(!e.hasTraitUnlocked("ENHANCED_KASSATSU")||!e.hasResourceAvailable("KASSATSU"))&&e.hasResourceAvailable("MUDRA")&&e.isMudraTrackerIn([[2,1],[3,1]]),t2=e=>e.hasResourceAvailable("MUDRA")&&e.isMudraTrackerIn([[1,2],[3,2]]),a2=e=>(!e.hasTraitUnlocked("ENHANCED_KASSATSU")||!e.hasResourceAvailable("KASSATSU"))&&e.hasResourceAvailable("MUDRA")&&e.isMudraTrackerIn([[1,3],[2,3]]),n2=e=>e.hasResourceAvailable("MUDRA")&&e.isMudraTrackerIn([[3,2,1],[2,3,1]]),i2=e=>e.hasResourceAvailable("MUDRA")&&e.isMudraTrackerIn([[1,3,2],[3,1,2]]),o2=e=>e.hasResourceAvailable("MUDRA")&&e.isMudraTrackerIn([[1,2,3],[2,1,3]]),l2=e=>e.hasResourceAvailable("MUDRA")&&(e.hasResourceAvailable("BUNNY")||!e.isMudraTrackerIn([[1],[2],[3],[2,1],[3,1],[1,2],[3,2],[1,3],[2,3],[3,2,1],[2,3,1],[1,3,2],[3,1,2],[1,2,3],[2,1,3]])),Yf=[{newSkill:"GOKA_MEKKYAKU",condition:QB},{newSkill:"HYOSHO_RANRYU",condition:$B},{newSkill:"FUMA_SHURIKEN",condition:JB},{newSkill:"KATON",condition:e2},{newSkill:"RAITON",condition:t2},{newSkill:"HYOTON",condition:a2},{newSkill:"HUTON",condition:n2},{newSkill:"DOTON",condition:i2},{newSkill:"SUITON",condition:o2},{newSkill:"RABBIT_MEDIUM",condition:e=>e.hasResourceAvailable("MUDRA")&&(e.hasResourceAvailable("BUNNY")||l2(e))},{newSkill:"NINJUTSU",condition:e=>!e.hasResourceAvailable("MUDRA")}],Kf=e=>Yf.filter(t=>t.newSkill!==e);ia("NIN","NINJUTSU",30,{recastTime:1.5,validateAttempt:e=>!1,replaceIf:Kf("NINJUTSU")});ia("NIN","RABBIT_MEDIUM",30,{startOnHotbar:!1,recastTime:1.5,replaceIf:Kf("RABBIT_MEDIUM"),validateAttempt:Yf.find(e=>e.newSkill==="RABBIT_MEDIUM").condition,onConfirm:e=>e.clearMudraInfo()});VO.forEach(([e,t,n,o,s])=>{ia("NIN",e,t,{startOnHotbar:!1,applicationDelay:n,recastTime:c=>c.hasResourceAvailable("TEN_CHI_JIN")?1:1.5,potency:o,falloff:s,replaceIf:Kf(e),validateAttempt:Yf.find(c=>c.newSkill===e).condition,onConfirm:Le(["KATON","RAITON","HYOTON"].includes(e)?c=>{c.cooldowns.get("cd_SHUKUCHI").timeTillNextStackAvailable()!==0&&c.cooldowns.get("cd_SHUKUCHI").restore(60)}:void 0,e==="RAITON"?c=>c.stackRaijuReady():e==="SUITON"||e==="HUTON"?c=>c.gainStatus("SHADOW_WALKER"):void 0,c=>c.clearMudraInfo()),jobPotencyModifiers:c=>{const d=[];return c.hasResourceAvailable("KASSATSU")&&d.push(J.Kassatsu),c.hasResourceAvailable("DOTON")&&["KATON","GOKA_MEKKYAKU"].includes(e)&&d.push(J.HollowNozuchi),d},jobTargetPotencyModifiers:ac,startsAuto:!1})});ia("NIN","DOTON",45,{startOnHotbar:!1,recastTime:e=>e.hasResourceAvailable("TEN_CHI_JIN")?1:1.5,potency:0,falloff:0,replaceIf:Kf("DOTON"),validateAttempt:Yf.find(e=>e.newSkill==="DOTON").condition,onConfirm:Le((e,t)=>{e.addDoTPotencies({node:t,effectName:"DOTON",skillName:"DOTON",tickPotency:80,speedStat:"sks"})},e=>e.clearMudraInfo()),onApplication:WO});const sf=e=>e.hasResourceAvailable("RAIJU_READY"),XO=[["NEVER",560],["MELEE_MASTERY_III_NIN",700]];oo("FORKED_RAIJU",90,{applicationDelay:.62,potency:XO,animationLock:Wt,highlightIf:sf,validateAttempt:sf,onConfirm:e=>{e.gainNinki(5),e.tryConsumeResource("RAIJU_READY")}});oo("FLEETING_RAIJU",90,{applicationDelay:.76,potency:XO,highlightIf:sf,validateAttempt:sf,onConfirm:e=>{e.gainNinki(5),e.tryConsumeResource("RAIJU_READY")}});lo("DOKUMORI",66,"cd_DOKUMORI",{applicationDelay:1.07,potency:400,falloff:0,cooldown:120,onConfirm:(e,t)=>{e.gainDebuff("DOKUMORI",t.targetList),e.gainNinki(40),e.hasTraitUnlocked("ENHANCED_DOKUMORI")&&e.gainStatus("HIGI")}});const rf=e=>e.hasResourceAvailable("HIDDEN")||e.hasResourceAvailable("SHADOW_WALKER");lo("TRICK_ATTACK",18,"cd_TRICK_ATTACK",{autoUpgrade:{trait:"TRICK_ATTACK_MASTERY",otherSkill:"KUNAIS_BANE"},applicationDelay:.8,potency:300,positional:{potency:400,location:"rear"},cooldown:60,highlightIf:rf,validateAttempt:rf,onConfirm:(e,t)=>{e.gainDebuff("TRICK_ATTACK",[t.targetList[0]]),e.tryConsumeResource("SHADOW_WALKER")}});lo("KUNAIS_BANE",92,"cd_TRICK_ATTACK",{autoDowngrade:{trait:"TRICK_ATTACK_MASTERY",otherSkill:"TRICK_ATTACK"},startOnHotbar:!1,applicationDelay:1.29,cooldown:60,potency:700,falloff:0,highlightIf:rf,validateAttempt:rf,onConfirm:(e,t)=>{e.gainDebuff("KUNAIS_BANE",t.targetList),e.tryConsumeResource("SHADOW_WALKER")}});lo("DREAM_WITHIN_A_DREAM",56,"cd_DREAM_WITHIN_A_DREAM",{applicationDelay:.98,cooldown:60,potency:180*3});ku("KASSATSU",50,"cd_KASSATSU",{rscType:"KASSATSU",cooldown:60,applicationDelay:0,validateAttempt:e=>!e.hasResourceAvailable("TEN_CHI_JIN")});const Ji=e=>e.resources.get("NINKI").available(50),Uu=e=>e.resources.get("NINKI").consume(50);lo("BHAVACAKRA",68,"cd_BHAVACAKRA",{applicationDelay:.62,cooldown:1,potency:[["NEVER",350],["MELEE_MASTERY_III_NIN",400]],highlightIf:Ji,validateAttempt:Ji,replaceIf:[{newSkill:"ZESHO_MEPPO",condition:e=>e.hasResourceAvailable("HIGI")}],onConfirm:Le(Uu,e=>e.tryConsumeResource("MEISUI")),jobPotencyModifiers:e=>e.hasResourceAvailable("MEISUI")?[J.Meisui]:[]});lo("ZESHO_MEPPO",96,"cd_BHAVACAKRA",{startOnHotbar:!1,applicationDelay:1.03,cooldown:1,potency:700,highlightIf:e=>e.hasResourceAvailable("HIGI")&&Ji(e),validateAttempt:e=>e.hasResourceAvailable("HIGI")&&Ji(e),replaceIf:[{newSkill:"BHAVACAKRA",condition:e=>!e.hasResourceAvailable("HIGI")}],onConfirm:Le(Uu,e=>{e.tryConsumeResource("MEISUI"),e.tryConsumeResource("HIGI")}),jobPotencyModifiers:e=>e.hasResourceAvailable("MEISUI")?[J.Meisui]:[]});lo("HELLFROG_MEDIUM",62,"cd_BHAVACAKRA",{applicationDelay:.8,cooldown:1,potency:250,falloff:0,highlightIf:Ji,validateAttempt:Ji,replaceIf:[{newSkill:"DEATHFROG_MEDIUM",condition:e=>e.hasResourceAvailable("HIGI")}],onConfirm:Uu});lo("DEATHFROG_MEDIUM",96,"cd_BHAVACAKRA",{startOnHotbar:!1,applicationDelay:.8,cooldown:1,potency:400,falloff:0,highlightIf:e=>e.hasResourceAvailable("HIGI")&&Ji(e),validateAttempt:e=>e.hasResourceAvailable("HIGI")&&Ji(e),onConfirm:Le(Uu,e=>e.tryConsumeResource("HIGI"))});ku("MEISUI",72,"cd_MEISUI",{rscType:"MEISUI",cooldown:120,applicationDelay:0,highlightIf:e=>e.hasResourceAvailable("SHADOW_WALKER"),validateAttempt:e=>e.hasResourceAvailable("SHADOW_WALKER"),onConfirm:e=>{e.tryConsumeResource("SHADOW_WALKER"),e.gainNinki(50)}});ku("BUNSHIN",80,"cd_BUNSHIN",{rscType:"BUNSHIN",cooldown:90,applicationDelay:0,replaceIf:[{newSkill:"PHANTOM_KAMAITACHI",condition:e=>e.hasResourceAvailable("PHANTOM_KAMAITACHI_READY")}],highlightIf:Ji,validateAttempt:Ji,onConfirm:Le(Uu,e=>e.gainStatus("PHANTOM_KAMAITACHI_READY"))});oo("PHANTOM_KAMAITACHI",80,{startOnHotbar:!1,potency:700,falloff:0,applicationDelay:1.57,highlightIf:e=>e.hasResourceAvailable("PHANTOM_KAMAITACHI_READY"),validateAttempt:e=>e.hasResourceAvailable("PHANTOM_KAMAITACHI_READY"),onConfirm:e=>{e.tryConsumeResource("PHANTOM_KAMAITACHI_READY"),e.gainNinki(10)},jobPotencyModifiers:e=>e.hasResourceAvailable("DOTON")?[J.HollowNozuchi,J.NinPet]:[J.NinPet]});ku("TEN_CHI_JIN",70,"cd_TEN_CHI_JIN",{rscType:"TEN_CHI_JIN",applicationDelay:0,cooldown:120,replaceIf:[{newSkill:"TENRI_JINDO",condition:e=>e.hasResourceAvailable("TENRI_JINDO_READY")}],validateAttempt:e=>!e.hasResourceAvailable("KASSATSU"),onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_TEN_CHI_JIN")&&e.gainStatus("TENRI_JINDO_READY"),e.clearMudraInfo()}});lo("TENRI_JINDO",100,"cd_TENRI_JINDO",{startOnHotbar:!1,applicationDelay:1.69,cooldown:1,potency:1100,falloff:0,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("TENRI_JINDO_READY"),onConfirm:e=>e.tryConsumeResource("TENRI_JINDO_READY")});lo("SHUKUCHI",40,"cd_SHUKUCHI",{applicationDelay:0,cooldown:60,maxCharges:2,animationLock:Wt});ku("SHADE_SHIFT",2,"cd_SHADE_SHIFT",{rscType:"SHADE_SHIFT",applicationDelay:.4,cooldown:120});Object.keys(zR).forEach(e=>zt(e,`MNK/${QN[e].name}.png`));function s2(e){switch(e){case 1:return"opo";case 2:return"raptor";case 3:return"coeurl"}return null}function r2(e){switch(e){case"opo":return N({en:"o",zh:""});case"raptor":return N({en:"r",zh:""});case"coeurl":return N({en:"c",zh:""})}return null}function NN(e){switch(e){case"lunar":return N({en:e,zh:""});case"solar":return N({en:e,zh:""})}return null}class c2 extends Xt{jobSpecificSelfTargetedBuffViewProps(){return Object.keys(zR).map(t=>this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){const n=this.state.resources,o=["BEAST_CHAKRA_1","BEAST_CHAKRA_2","BEAST_CHAKRA_3"].map(m=>n.get(m).availableAmount()).map(s2),s=n.get("LUNAR_NADI").available(1),c=n.get("SOLAR_NADI").available(1),d=o.map(r2).filter(m=>m!==null).join("+"),f=[NN(s?"lunar":null),NN(c?"solar":null)].filter(m=>m!==null).join("+");return[{kind:"counter",name:Ke("OPO_OPOS_FURY"),color:t.mnk.opo,currentStacks:n.get("OPO_OPOS_FURY").availableAmount(),maxStacks:1},{kind:"counter",name:Ke("RAPTORS_FURY"),color:t.mnk.raptor,currentStacks:n.get("RAPTORS_FURY").availableAmount(),maxStacks:1},{kind:"counter",name:Ke("COEURLS_FURY"),color:t.mnk.coeurl,currentStacks:n.get("COEURLS_FURY").availableAmount(),maxStacks:2},{kind:"chakra",name:Ke("CHAKRA"),regularColor:t.mnk.chakra,overflowColor:t.mnk.extraChakra,value:n.get("CHAKRA").availableAmount(),wrapCount:5},{kind:"text",name:Ke("BEAST_CHAKRA_TIMER"),text:o.every(m=>m!==null)?n.get("BEAST_CHAKRA_1").pendingChange?.timeTillEvent.toFixed(3):"n/a"},{kind:"beast",name:Ke("BEAST_CHAKRA"),label:d,chakras:o,opoColor:t.mnk.opo,raptorColor:t.mnk.raptor,coeurlColor:t.mnk.coeurl},{kind:"nadi",name:Ke("NADI"),label:f,lunar:s,solar:c,lunarColor:t.mnk.lunar,solarColor:t.mnk.solar}]}}const xt=(e,t,n)=>{Ve("MNK",e,t,n??{})};xt("CHAKRA",5,{default:5});xt("BEAST_CHAKRA",1);xt("NADI",1);xt("OPO_OPOS_FURY",1,{warnOnOvercap:!0});xt("RAPTORS_FURY",1,{warnOnOvercap:!0});xt("COEURLS_FURY",2,{warnOnOvercap:!0});xt("MANTRA",1,{timeout:15});xt("OPO_OPO_FORM",1,{timeout:30});xt("RAPTOR_FORM",1,{timeout:30});xt("COEURL_FORM",1,{timeout:30});xt("PERFECT_BALANCE",3,{timeout:20});xt("FORMLESS_FIST",1,{timeout:30,default:1});xt("RIDDLE_OF_EARTH",1,{timeout:10});xt("EARTHS_RESOLVE",1,{timeout:15});xt("EARTHS_RUMINATION",1,{timeout:30});xt("RIDDLE_OF_FIRE",1,{timeout:20.72});xt("FIRES_RUMINATION",1,{timeout:20,warnOnTimeout:!0});xt("BROTHERHOOD",1,{timeout:20});xt("MEDITATIVE_BROTHERHOOD",1,{timeout:20});xt("RIDDLE_OF_WIND",1,{timeout:15.78});xt("WINDS_RUMINATION",1,{timeout:15,warnOnTimeout:!0});xt("SIX_SIDED_STAR",1,{timeout:5});const Nl=["BEAST_CHAKRA_1","BEAST_CHAKRA_2","BEAST_CHAKRA_3"];xt("BEAST_CHAKRA_1",3);xt("BEAST_CHAKRA_2",3);xt("BEAST_CHAKRA_3",3);xt("LUNAR_NADI",1);xt("SOLAR_NADI",1);class u2 extends qt{constructor(t){super(t);const n=this.hasTraitUnlocked("ENHANCED_THUNDERCLAP")?3:2;this.cooldowns.set(new Ue("cd_THUNDERCLAP",30,n,n)),this.registerRecurringEvents()}getForm(){if(this.hasResourceAvailable("OPO_OPO_FORM"))return"opo";if(this.hasResourceAvailable("RAPTOR_FORM"))return"raptor";if(this.hasResourceAvailable("COEURL_FORM"))return"coeurl"}setForm(t){["OPO_OPO_FORM","RAPTOR_FORM","COEURL_FORM","FORMLESS_FIST"].forEach(o=>this.tryConsumeResource(o));const n=t==="opo"?"OPO_OPO_FORM":t==="raptor"?"RAPTOR_FORM":t==="coeurl"?"COEURL_FORM":"FORMLESS_FIST";this.gainStatus(n)}canDoForm(t){return this.hasResourceAvailable("PERFECT_BALANCE")||this.hasResourceAvailable("FORMLESS_FIST")||this.getForm()===t}gainChakra(){this.resources.get("CHAKRA").gain(1)}maybeGainChakra(t){if(this.hasResourceAvailable("MEDITATIVE_BROTHERHOOD"))for(let s=0;s<this.resources.get("PARTY_SIZE").availableAmount()-1;s++)this.triggersEffect(.2,!0)&&this.gainChakra();if(this.hasTraitUnlocked("ENHANCED_BROTHERHOOD")&&this.hasResourceAvailable("MEDITATIVE_BROTHERHOOD")){this.gainChakra();return}const n=t?1:this.config.critRate,o=this.triggersEffect(n,!0);if(t||o){const s=this.hasTraitUnlocked("DEEP_MEDITATION_II")?1:.8,c=this.triggersEffect(s);(s===1||c)&&this.gainChakra()}}consumeFiveChakra(){const t=this.resources.get("CHAKRA");t.consume(Math.min(t.availableAmount(),5))}startPB(){["OPO_OPO_FORM","RAPTOR_FORM","COEURL_FORM","FORMLESS_FIST"].forEach(t=>this.tryConsumeResource(t)),this.gainStatus("PERFECT_BALANCE")}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("RIDDLE_OF_FIRE")&&t.addBuff(k.RiddleOfFire),this.hasResourceAvailable("BROTHERHOOD")&&t.addBuff(k.Brotherhood)}inherentSpeedModifier(){return this.hasTraitUnlocked("ENHANCED_GREASED_LIGHTNING_III")?20:15}get statusPropsGenerator(){return new c2(this)}}const Ka=(e,t,n)=>{const o=n.form?s=>n.form.requiredForm===void 0||s.canDoForm(n.form.requiredForm):void 0;return ia("MNK",e,t,{...n,positional:void 0,highlightIf:s=>!o&&!n.ball&&!n.highlightIf?!1:(o?.(s)??!0)&&(n.ball?s.hasResourceAvailable(n.ball.rsc):!0)&&(n.highlightIf?.(s)??!0),validateAttempt:s=>(o?.(s)??!0)&&(n.validateAttempt?.(s)??!0),recastTime:s=>s.config.adjustedSksGCD(n.recastTime??2.5,s.inherentSpeedModifier()),onConfirm:Le(n.onConfirm,e!=="SIX_SIDED_STAR"&&n.potency?(s,c)=>{const d=c.getInitialPotency();d&&s.maybeGainChakra(d.getDisplayedModifiers().includes(J.AutoCrit))}:void 0,n.form?s=>{const c=n.form.nextForm;if(s.tryConsumeResource("PERFECT_BALANCE")){for(const f of Nl)if(!s.hasResourceAvailable(f)){let h=3;c==="raptor"?h=1:c==="coeurl"&&(h=2),s.resources.get(f).gain(h),f==="BEAST_CHAKRA_3"&&Nl.forEach(m=>s.enqueueResourceDrop(m,20));break}}else s.setForm(c)}:void 0,n.ball?s=>s.tryConsumeResource(n.ball.rsc):void 0),jobPotencyModifiers:s=>{const c=n.jobPotencyModifiers?.(s)??[],d=n.positional&&s.hitPositional(n.positional.location);return s.hasResourceAvailable("BROTHERHOOD")&&c.push(J.Brotherhood),s.hasResourceAvailable("RIDDLE_OF_FIRE")&&c.push(J.RiddleOfFire),n.ball&&s.hasResourceAvailable(n.ball.rsc)?(c.push({kind:"adder",source:U.MNK_BALL,additiveAmount:na(s,n.ball.potency)-na(s,n.potency)}),n.positional&&d&&c.push(Hh(na(s,n.positional.ballPotency)-na(s,n.ball.potency)))):n.positional&&d&&c.push(Hh(na(s,n.positional.potency)-na(s,n.potency))),c}})},Vf=(e,t,n,o)=>et("MNK",e,t,n,{jobPotencyModifiers:s=>{const c=o.jobPotencyModifiers?.(s)??[];return s.hasResourceAvailable("BROTHERHOOD")&&c.push(J.Brotherhood),s.hasResourceAvailable("RIDDLE_OF_FIRE")&&c.push(J.RiddleOfFire),c},...o}),nc=(e,t,n,o)=>Ye("MNK",e,t,n,o);[["BOOTSHINE",1,1.11,[["NEVER",180],["MELEE_MASTERY_MNK",220]]],["LEAPING_OPO",92,.62,260]].forEach(([e,t,n,o],s)=>{Ka(e,t,{...s===0?{autoUpgrade:{otherSkill:"LEAPING_OPO",trait:"BEAST_CHAKRA_MASTERY"}}:{autoDowngrade:{otherSkill:"BOOTSHINE",trait:"BEAST_CHAKRA_MASTERY"}},form:{nextForm:"raptor"},ball:{potency:s===0?[["NEVER",380],["MELEE_MASTERY_MNK",420]]:460,rsc:"OPO_OPOS_FURY"},applicationDelay:n,potency:o,highlightIf:d=>d.canDoForm("opo"),jobPotencyModifiers:d=>d.hasResourceAvailable("OPO_OPOS_FURY")?[J.AutoCrit]:[]})});[["TRUE_STRIKE",4,.8,[["NEVER",260],["MELEE_MASTERY_MNK",300]]],["RISING_RAPTOR",92,.89,340]].forEach(([e,t,n,o],s)=>{Ka(e,t,{...s===0?{autoUpgrade:{otherSkill:"RISING_RAPTOR",trait:"BEAST_CHAKRA_MASTERY"}}:{autoDowngrade:{otherSkill:"TRUE_STRIKE",trait:"BEAST_CHAKRA_MASTERY"}},form:{requiredForm:"raptor",nextForm:"coeurl"},ball:{potency:s===0?[["NEVER",460],["MELEE_MASTERY_MNK",500]]:540,rsc:"RAPTORS_FURY"},applicationDelay:n,potency:o})});[["SNAP_PUNCH",6,.76,[["NEVER",230],["MELEE_MASTERY_MNK",270]]],["POUNCING_COEURL",92,1.02,310]].forEach(([e,t,n,o],s)=>{Ka(e,t,{...s===0?{autoUpgrade:{otherSkill:"POUNCING_COEURL",trait:"BEAST_CHAKRA_MASTERY"}}:{autoDowngrade:{otherSkill:"SNAP_PUNCH",trait:"BEAST_CHAKRA_MASTERY"}},form:{requiredForm:"coeurl",nextForm:"opo"},ball:{potency:s===0?[["NEVER",380],["MELEE_MASTERY_MNK",420]]:460,rsc:"COEURLS_FURY"},positional:{potency:s===0?[["NEVER",290],["MELEE_MASTERY_MNK",330]]:370,ballPotency:s===0?[["NEVER",440],["MELEE_MASTERY_MNK",480]]:520,location:"flank"},applicationDelay:n,potency:o})});Ka("DRAGON_KICK",50,{applicationDelay:1.29,potency:[["NEVER",240],["MELEE_MASTERY_MNK",280],["MELEE_MASTERY_II_MNK",320]],form:{nextForm:"raptor"},highlightIf:e=>e.canDoForm("opo")&&!e.hasResourceAvailable("OPO_OPOS_FURY"),onConfirm:e=>e.resources.get("OPO_OPOS_FURY").gain(1)});Ka("TWIN_SNAKES",18,{applicationDelay:.84,potency:[["NEVER",340],["MELEE_MASTERY_MNK",380],["MELEE_MASTERY_II_MNK",420]],form:{requiredForm:"raptor",nextForm:"coeurl"},highlightIf:e=>!e.hasResourceAvailable("RAPTORS_FURY"),onConfirm:e=>e.resources.get("RAPTORS_FURY").gain(1)});Ka("DEMOLISH",30,{applicationDelay:1.6,potency:[["NEVER",280],["MELEE_MASTERY_MNK",320],["MELEE_MASTERY_II_MNK",360]],form:{requiredForm:"coeurl",nextForm:"opo"},positional:{potency:[["NEVER",340],["MELEE_MASTERY_MNK",380],["MELEE_MASTERY_II_MNK",420]],location:"rear"},highlightIf:e=>!e.hasResourceAvailable("COEURLS_FURY"),onConfirm:e=>e.resources.get("COEURLS_FURY").gain(2)});[["ARM_OF_THE_DESTROYER",26,.54,110],["SHADOW_OF_THE_DESTROYER",82,.4,120]].forEach(([e,t,n,o],s)=>{Ka(e,t,{...s===0?{autoUpgrade:{otherSkill:"SHADOW_OF_THE_DESTROYER",trait:"ARM_OF_THE_DESTROYER_MASTERY"}}:{autoDowngrade:{otherSkill:"ARM_OF_THE_DESTROYER",trait:"ARM_OF_THE_DESTROYER_MASTERY"}},applicationDelay:n,potency:o,falloff:0,form:{nextForm:"raptor"},highlightIf:d=>d.canDoForm("opo"),jobPotencyModifiers:s===1?d=>d.hasResourceAvailable("OPO_OPO_FORM")?[J.AutoCrit]:[]:void 0})});Ka("ROCKBREAKER",30,{applicationDelay:.94,potency:150,falloff:0,form:{requiredForm:"raptor",nextForm:"coeurl"}});Ka("FOUR_POINT_FURY",45,{applicationDelay:.97,potency:140,falloff:0,form:{requiredForm:"coeurl",nextForm:"opo"}});const qO=e=>{const t=Nl.map(n=>e.resources.get(n).availableAmount());return e.hasResourceAvailable("LUNAR_NADI")&&e.hasResourceAvailable("SOLAR_NADI")&&t.every(n=>n>0)},JT=e=>{const t=Nl.map(s=>e.resources.get(s).availableAmount()),n=t[0];return n>0&&t[1]===n&&t[2]===n&&!(e.hasResourceAvailable("LUNAR_NADI")&&e.hasResourceAvailable("SOLAR_NADI"))},eS=e=>{const t=Nl.map(o=>e.resources.get(o).availableAmount()),n=[!1,!1,!1];return t.forEach(o=>{console.assert(o<4,"beast chakra had invalid value"),o<4&&o>0&&(n[o-1]=!0)}),n.every(o=>o)&&t.every(o=>o>0)&&!(e.hasResourceAvailable("LUNAR_NADI")&&e.hasResourceAvailable("SOLAR_NADI"))},ZO=e=>{const t=Nl.map(n=>e.resources.get(n).availableAmount());return!JT(e)&&!eS(e)&&t.every(n=>n>0)&&!(e.hasResourceAvailable("LUNAR_NADI")&&e.hasResourceAvailable("SOLAR_NADI"))},d2=e=>!qO(e)&&!JT(e)&&!eS(e)&&!ZO(e),wu=[{newSkill:"MASTERFUL_BLITZ",condition:d2},{newSkill:"ELIXIR_FIELD",condition:JT},{newSkill:"FLINT_STRIKE",condition:eS},{newSkill:"CELESTIAL_REVOLUTION",condition:ZO},{newSkill:"TORNADO_KICK",condition:qO}],Wf=e=>{Nl.forEach(t=>e.tryConsumeResource(t,!0)),e.setForm("formless")},QO=e=>t=>t.resources.get(e==="lunar"?"LUNAR_NADI":"SOLAR_NADI").gain(1);Ka("MASTERFUL_BLITZ",60,{applicationDelay:0,replaceIf:wu,validateAttempt:e=>!1});[["TORNADO_KICK",60,1.69,1200],["PHANTOM_RUSH",90,.4,1500]].forEach(([e,t,n,o],s)=>{Ka(e,t,{...s===0?{autoUpgrade:{otherSkill:"PHANTOM_RUSH",trait:"TORNADO_KICK_MASTERY"}}:{autoDowngrade:{otherSkill:"TORNADO_KICK",trait:"TORNADO_KICK_MASTERY"}},startOnHotbar:!1,applicationDelay:n,replaceIf:wu,highlightIf:d=>!0,potency:o,falloff:.35,onConfirm:Le(Wf,d=>{d.tryConsumeResource("LUNAR_NADI"),d.tryConsumeResource("SOLAR_NADI")})})});[["ELIXIR_FIELD",60,1.07,800],["ELIXIR_BURST",92,1.42,900]].forEach(([e,t,n,o],s)=>{Ka(e,t,{...s===0?{autoUpgrade:{otherSkill:"ELIXIR_BURST",trait:"BEAST_CHAKRA_MASTERY"}}:{autoDowngrade:{otherSkill:"ELIXIR_FIELD",trait:"BEAST_CHAKRA_MASTERY"}},startOnHotbar:!1,applicationDelay:n,replaceIf:wu,highlightIf:d=>!0,potency:o,falloff:.35,onConfirm:Le(Wf,QO("lunar"))})});Ka("CELESTIAL_REVOLUTION",60,{startOnHotbar:!1,applicationDelay:.89,replaceIf:wu,highlightIf:e=>!0,potency:600,onConfirm:Le(Wf,e=>e.resources.get(e.hasResourceAvailable("LUNAR_NADI")?"SOLAR_NADI":"LUNAR_NADI").gain(1))});[["FLINT_STRIKE",60,.53,800],["RISING_PHOENIX",86,.76,900]].forEach(([e,t,n,o],s)=>{Ka(e,t,{...s===0?{autoUpgrade:{otherSkill:"RISING_PHOENIX",trait:"FLINT_STRIKE_MASTERY"}}:{autoDowngrade:{otherSkill:"FLINT_STRIKE",trait:"FLINT_STRIKE_MASTERY"}},startOnHotbar:!1,applicationDelay:n,replaceIf:wu,highlightIf:d=>!0,potency:o,falloff:.35,onConfirm:Le(Wf,QO("solar"))})});Ka("SIX_SIDED_STAR",80,{recastTime:5,applicationDelay:.62,potency:[["NEVER",710],["MELEE_MASTERY_II_MNK",780]],onConfirm:e=>{e.tryConsumeResource("CHAKRA",!0),e.gainStatus("SIX_SIDED_STAR")},jobPotencyModifiers:e=>{const t=e.resources.get("CHAKRA").availableAmount();return t>0?[{kind:"adder",additiveAmount:80*t,source:U.SSS_CHAKRA}]:[]}});Ka("FORM_SHIFT",52,{applicationDelay:0,onConfirm:e=>e.setForm("formless")});function tS(e,t,n){return ia("MNK",e,t,{autoUpgrade:n.autoUpgrade,autoDowngrade:n.autoDowngrade,recastTime:1,applicationDelay:0,replaceIf:[{newSkill:n.spender,condition:o=>o.resources.get("CHAKRA").available(5)}],validateAttempt:o=>!o.resources.get("CHAKRA").available(5),onConfirm:o=>o.resources.get("CHAKRA").gain(o.isInCombat()?1:5)})}tS("FORBIDDEN_MEDITATION",54,{spender:"THE_FORBIDDEN_CHAKRA"});tS("INSPIRITED_MEDITATION",40,{autoUpgrade:{otherSkill:"ENLIGHTENED_MEDITATION",trait:"HOWLING_FIST_MASTERY"},spender:"HOWLING_FIST"});tS("ENLIGHTENED_MEDITATION",74,{autoDowngrade:{otherSkill:"ENLIGHTENED_MEDITATION",trait:"HOWLING_FIST_MASTERY"},spender:"ENLIGHTENMENT"});[["HOWLING_FIST",40,1.16,100,"cd_THE_FORBIDDEN_CHAKRA"],["ENLIGHTENMENT",74,.76,160,"cd_ENLIGHTENMENT"]].forEach(([e,t,n,o,s],c)=>{Vf(e,t,s,{...c===0?{autoUpgrade:{otherSkill:"ENLIGHTENMENT",trait:"HOWLING_FIST_MASTERY"}}:{autoDowngrade:{otherSkill:"HOWLING_FIST",trait:"HOWLING_FIST_MASTERY"}},startOnHotbar:!1,applicationDelay:n,cooldown:1,potency:o,falloff:0,requiresCombat:!0,highlightIf:f=>f.resources.get("CHAKRA").available(5),validateAttempt:f=>f.resources.get("CHAKRA").available(5),onConfirm:f=>f.consumeFiveChakra()})});Vf("THE_FORBIDDEN_CHAKRA",54,"cd_THE_FORBIDDEN_CHAKRA",{startOnHotbar:!1,replaceIf:[{newSkill:"FORBIDDEN_MEDITATION",condition:e=>!e.resources.get("CHAKRA").available(5)}],applicationDelay:1.48,cooldown:1,potency:[["NEVER",310],["MELEE_MASTERY_MNK",400]],requiresCombat:!0,highlightIf:e=>e.resources.get("CHAKRA").available(5),validateAttempt:e=>e.resources.get("CHAKRA").available(5),onConfirm:e=>e.consumeFiveChakra()});nc("PERFECT_BALANCE",50,"cd_PERFECT_BALANCE",{rscType:"PERFECT_BALANCE",applicationDelay:0,cooldown:40,maxCharges:2,requiresCombat:!0,validateAttempt:e=>!Nl.map(t=>e.hasResourceAvailable(t)).some(t=>t),onConfirm:e=>e.startPB()});nc("RIDDLE_OF_FIRE",68,"cd_RIDDLE_OF_FIRE",{rscType:"RIDDLE_OF_FIRE",applicationDelay:0,cooldown:60,replaceIf:[{newSkill:"FIRES_REPLY",condition:e=>e.hasResourceAvailable("FIRES_RUMINATION")}],onConfirm:e=>e.gainStatus("FIRES_RUMINATION")});nc("BROTHERHOOD",70,"cd_BROTHERHOOD",{rscType:"BROTHERHOOD",applicationDelay:.76,cooldown:120,onApplication:e=>{e.gainStatus("MEDITATIVE_BROTHERHOOD"),e.resources.set(new _a("CHAKRA",10,e.resources.get("CHAKRA").availableAmount())),e.addEvent(new Oe("restore BH max stacks",Ut("MNK","BROTHERHOOD").maxTimeout,()=>e.resources.set(new _a("CHAKRA",5,Math.min(e.resources.get("CHAKRA").availableAmount(),5)))))}});nc("RIDDLE_OF_WIND",72,"cd_RIDDLE_OF_WIND",{rscType:"RIDDLE_OF_WIND",applicationDelay:0,cooldown:90,replaceIf:[{newSkill:"WINDS_REPLY",condition:e=>e.hasResourceAvailable("WINDS_RUMINATION")}],onConfirm:e=>e.gainStatus("WINDS_RUMINATION")});Vf("THUNDERCLAP",35,"cd_THUNDERCLAP",{applicationDelay:0,cooldown:30,maxCharges:3,animationLock:Wt,drawsAggro:!0});nc("MANTRA",42,"cd_MANTRA",{rscType:"MANTRA",applicationDelay:1.5,cooldown:90});nc("RIDDLE_OF_EARTH",64,"cd_RIDDLE_OF_EARTH",{rscType:"RIDDLE_OF_EARTH",applicationDelay:0,cooldown:120,healingPotency:100,replaceIf:[{newSkill:"EARTHS_REPLY",condition:e=>e.hasResourceAvailable("EARTHS_RUMINATION")}],onConfirm:e=>e.gainStatus("EARTHS_RUMINATION")});Vf("EARTHS_REPLY",64,"cd_EARTHS_REPLY",{startOnHotbar:!1,applicationDelay:1.07,cooldown:1,healingPotency:300,highlightIf:e=>e.hasResourceAvailable("EARTHS_RUMINATION"),validateAttempt:e=>e.hasResourceAvailable("EARTHS_RUMINATION"),onConfirm:e=>e.tryConsumeResource("EARTHS_RUMINATION")});Ka("WINDS_REPLY",96,{startOnHotbar:!1,applicationDelay:1.2,potency:1040,falloff:.35,highlightIf:e=>e.hasResourceAvailable("WINDS_RUMINATION"),validateAttempt:e=>e.hasResourceAvailable("WINDS_RUMINATION"),onConfirm:e=>e.tryConsumeResource("WINDS_RUMINATION")});Ka("FIRES_REPLY",100,{startOnHotbar:!1,applicationDelay:1.42,potency:1400,falloff:.35,highlightIf:e=>e.hasResourceAvailable("FIRES_RUMINATION"),validateAttempt:e=>e.hasResourceAvailable("FIRES_RUMINATION"),onConfirm:e=>{e.tryConsumeResource("FIRES_RUMINATION"),e.setForm("formless")}});Object.keys(JR).forEach(e=>zt(e,`VPR/${Pe[e].name}.png`));const h2=Object.keys(JR);class f2 extends Xt{jobSpecificOtherTargetedBuffViewProps(){return[]}jobSpecificSelfTargetedBuffViewProps(){return h2.map(t=>this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){const n=this.state.resources,o=n.get("VPR_COMBO"),s=n.get("VPR_AOE_COMBO"),c=["HUNTERS_COIL_READY","SWIFTSKINS_COIL_READY","HUNTERS_DEN_READY","SWIFTSKINS_DEN_READY"],d=n.get("RATTLING_COIL").availableAmount(),f=n.get("SERPENT_OFFERINGS").availableAmount(),h=n.get("ANGUINE_TRIBUTE").availableAmount(),m=o.available(1)?o.pendingChange?.timeTillEvent:s.available(1)?s.pendingChange?.timeTillEvent:void 0,R=c.filter(g=>n.get(g).available(1)),T=R.length>0?Math.max(...R.map(g=>n.get(g).pendingChange.timeTillEvent)):void 0,S=[{kind:"bar",name:N({en:"Dual Wield Combo Timer",zh:""}),color:t.vpr.vprComboTimer,progress:m?m/30:0,valueString:m?.toFixed(3)??"N/A"},{kind:"bar",name:N({en:"Twinblade Combo Timer",zh:""}),color:t.vpr.vprComboTimer,progress:T?T/30:0,valueString:T?.toFixed(3)??"N/A"},{kind:"counter",name:Ke("RATTLING_COIL"),color:t.vpr.rattlingCoil,currentStacks:d,maxStacks:n.get("RATTLING_COIL").maxValue}];return this.state.hasTraitUnlocked("SERPENTS_LINEAGE")&&S.push({kind:"bar",name:Ke("SERPENT_OFFERINGS"),color:f>=50?t.vpr.anguineTribute:t.vpr.serpentOfferings,progress:f/100,valueString:f.toFixed(0)},{kind:"counter",name:Ke("ANGUINE_TRIBUTE"),color:t.vpr.anguineTribute,currentStacks:h,maxStacks:n.get("ANGUINE_TRIBUTE").maxValue}),S}}const ht=(e,t,n)=>{Ve("VPR",e,t,n??{})};ht("RATTLING_COIL",3,{warnOnOvercap:!0});ht("SERPENT_OFFERINGS",100,{warnOnOvercap:!0});ht("ANGUINE_TRIBUTE",5,{timeout:30});ht("HUNTERS_INSTINCT",1,{timeout:40});ht("SWIFTSCALED",1,{timeout:40});ht("HONED_STEEL",1,{timeout:60});ht("HONED_REAVERS",1,{timeout:60});ht("FLANKSTUNG_VENOM",1,{timeout:60});ht("HINDSTUNG_VENOM",1,{timeout:60});ht("FLANKSBANE_VENOM",1,{timeout:60});ht("HINDSBANE_VENOM",1,{timeout:60});ht("GRIMSKINS_VENOM",1,{timeout:60});ht("GRIMHUNTERS_VENOM",1,{timeout:60});ht("HUNTERS_VENOM",1,{timeout:30});ht("SWIFTSKINS_VENOM",1,{timeout:30});ht("POISED_FOR_TWINFANG",1,{timeout:60});ht("POISED_FOR_TWINBLOOD",1,{timeout:60});ht("FELLHUNTERS_VENOM",1,{timeout:30});ht("FELLSKINS_VENOM",1,{timeout:30});ht("READY_TO_REAWAKEN",1,{timeout:30,warnOnTimeout:!0});ht("REAWAKENED",1,{timeout:30,warnOnTimeout:!0});ht("DEATH_RATTLE_READY",1);ht("COIL_OGCD_READY",2);ht("DEN_OGCD_READY",2);ht("UNCOILED_OGCD_READY",2);ht("HUNTERS_COIL_READY",1,{timeout:30,warnOnTimeout:!0});ht("HUNTERS_DEN_READY",1,{timeout:30,warnOnTimeout:!0});ht("SWIFTSKINS_COIL_READY",1,{timeout:30,warnOnTimeout:!0});ht("SWIFTSKINS_DEN_READY",1,{timeout:30,warnOnTimeout:!0});ht("LAST_LASH_READY",1);ht("LEGACY_READY",4);ht("VPR_COMBO",4,{timeout:30});ht("VPR_AOE_COMBO",2,{timeout:30});ht("REAWAKEN_COMBO",4);const $O=["DEATH_RATTLE_READY","LAST_LASH_READY","COIL_OGCD_READY","UNCOILED_OGCD_READY","HUNTERS_VENOM","SWIFTSKINS_VENOM","POISED_FOR_TWINFANG","POISED_FOR_TWINBLOOD","DEN_OGCD_READY","LEGACY_READY"],JO=["FLANKSBANE_VENOM","FLANKSTUNG_VENOM"],eD=["HINDSBANE_VENOM","HINDSTUNG_VENOM"],Vr=[...JO,...eD];class E2 extends qt{constructor(t){super(t);const n=this.hasTraitUnlocked("ENHANCED_SLITHER")?3:2;this.cooldowns.set(new Ue("cd_SLITHER",30,n,n));const o=this.hasTraitUnlocked("ENHANCED_VIPERS_RATTLE")?3:2,s=this.hasTraitUnlocked("ENHANCED_SERPENTS_LINEAGE")?5:4;this.resources.set(new _a("RATTLING_COIL",o,0,!0)),this.resources.set(new _a("ANGUINE_TRIBUTE",s,0)),this.registerRecurringEvents()}inherentSpeedModifier(){return 15}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("HUNTERS_INSTINCT")&&t.addBuff(k.HuntersInstinct)}jobSpecificAddSpeedBuffCovers(t,n){this.hasResourceAvailable("SWIFTSCALED")&&n.cdName==="cd_GCD"&&t.addBuff(k.Swiftscaled)}get statusPropsGenerator(){return new f2(this)}getSwiftscaledModifier(){return this.hasResourceAvailable("SWIFTSCALED")?this.inherentSpeedModifier():0}isNoReawakenComboAt(t){return!this.hasResourceAvailable("REAWAKENED")&&this.hasResourceExactly("VPR_COMBO",t)}isNoReawakenAoeComboAt(t){return!this.hasResourceAvailable("REAWAKENED")&&this.hasResourceExactly("VPR_AOE_COMBO",t)}setLegacy(t){this.hasTraitUnlocked("SERPENTS_LEGACY")&&this.resources.get("LEGACY_READY").overrideCurrentValue(t)}gainOfferings(t){this.hasTraitUnlocked("SERPENTS_LINEAGE")&&this.resources.get("SERPENT_OFFERINGS").gain(t)}processCombo(t){if(t==="WRITHING_SNAP"||t==="UNCOILED_FURY")return;const o=["REAWAKEN","FIRST_GENERATION","SECOND_GENERATION","THIRD_GENERATION","FOURTH_GENERATION"].indexOf(t);if(o!==-1){this.setComboState("REAWAKEN_COMBO",(o+1)%5);return}const s=this.resources.get("VPR_COMBO").availableAmount(),c=this.resources.get("VPR_AOE_COMBO").availableAmount(),[d,f]=new Map([["STEEL_FANGS",[1,0]],["REAVING_FANGS",[1,0]],["HUNTERS_STING",[2,0]],["SWIFTSKINS_STING",[3,0]],["FLANKSTING_STRIKE",[0,0]],["FLANKSBANE_FANG",[0,0]],["HINDSTING_STRIKE",[0,0]],["HINDSBANE_FANG",[0,0]],["STEEL_MAW",[0,1]],["REAVING_MAW",[0,1]],["HUNTERS_BITE",[0,2]],["SWIFTSKINS_BITE",[0,2]],["JAGGED_MAW",[0,0]],["BLOODIED_MAW",[0,0]]]).get(t)??[s,c];d!==s&&this.setComboState("VPR_COMBO",d),f!==c&&this.setComboState("VPR_AOE_COMBO",f),this.setComboState("REAWAKEN_COMBO",0)}cancelVicewinderCombo(t){t!=="SWIFTSKINS_COIL"&&this.tryConsumeResource("HUNTERS_COIL_READY"),t!=="HUNTERS_COIL"&&this.tryConsumeResource("SWIFTSKINS_COIL_READY"),t!=="SWIFTSKINS_DEN"&&this.tryConsumeResource("HUNTERS_DEN_READY"),t!=="HUNTERS_DEN"&&this.tryConsumeResource("SWIFTSKINS_DEN_READY")}consumeAnguine(){this.tryConsumeResource("ANGUINE_TRIBUTE"),this.hasResourceAvailable("ANGUINE_TRIBUTE")||this.cancelReawaken()}cancelReawaken(){this.tryConsumeResource("LEGACY_READY",!0),this.tryConsumeResource("ANGUINE_TRIBUTE",!0),this.tryConsumeResource("REAWAKENED"),this.setComboState("REAWAKEN_COMBO",0)}applyExtendedStatus(t,n){Vr.includes(t)&&Vr.forEach(c=>c!==t&&this.tryConsumeResource(c));const o=this.resources.get(t),s=Ut("VPR",t);this.hasResourceAvailable(t)?s.maxTimeout>0&&o.overrideTimer(this,s.maxTimeout+n):(o.gain(1),s.maxTimeout>0&&this.enqueueResourceDrop(t,s.maxTimeout+n))}}const ha=(e,t,n)=>{const o=n.replaceIf?.find(s=>s.newSkill===e)?.condition;return ia("VPR",e,t,{...n,recastTime:s=>s.config.adjustedSksGCD(n.baseRecastTime??2.5,s.getSwiftscaledModifier()),validateAttempt:bu(n.validateAttempt,o),onConfirm:Le(s=>{e!=="UNCOILED_FURY"&&e!=="WRITHING_SNAP"&&s.cancelVicewinderCombo(e),$O.forEach(c=>{s.tryConsumeResource(c,!0)&&I.reportWarning({kind:"overwrite",rsc:c})})},n.onConfirm,n.extendedStatus?s=>s.applyExtendedStatus(n.extendedStatus,n.applicationDelay):void 0,s=>s.processCombo(e)),jobPotencyModifiers:s=>{const c=n.jobPotencyModifiers?.(s)??[];return s.hasResourceAvailable("HUNTERS_INSTINCT")&&c.push(J.HuntersInstinct),c}})},Uo=(e,t,n,o)=>et("VPR",e,t,n,{...o,jobPotencyModifiers:s=>{const c=o.jobPotencyModifiers?.(s)??[];return s.hasResourceAvailable("HUNTERS_INSTINCT")&&c.push(J.HuntersInstinct),c}}),tD={newSkill:"FIRST_GENERATION",condition:e=>e.hasResourceAvailable("REAWAKENED")},aD={newSkill:"SECOND_GENERATION",condition:e=>e.hasResourceAvailable("REAWAKENED")},Wr=[tD];Wr.push(...["STEEL_FANGS","HUNTERS_STING","FLANKSTING_STRIKE","HINDSTING_STRIKE"].map((e,t)=>({newSkill:e,condition:n=>n.isNoReawakenComboAt(t)})));const Xr=[aD];Xr.push(...["REAVING_FANGS","SWIFTSKINS_STING","FLANKSBANE_FANG","HINDSBANE_FANG"].map((e,t)=>({newSkill:e,condition:n=>n.isNoReawakenComboAt(t)})));const Xf=[tD];Xf.push(...["STEEL_MAW","HUNTERS_BITE","JAGGED_MAW"].map((e,t)=>({newSkill:e,condition:n=>n.isNoReawakenAoeComboAt(t)})));const qf=[aD];qf.push(...["REAVING_MAW","SWIFTSKINS_BITE","BLOODIED_MAW"].map((e,t)=>({newSkill:e,condition:n=>n.isNoReawakenAoeComboAt(t)})));const nD=[{newSkill:"HUNTERS_COIL",condition:e=>!e.hasResourceAvailable("REAWAKENED")},{newSkill:"THIRD_GENERATION",condition:e=>e.hasResourceAvailable("REAWAKENED")}],iD=[{newSkill:"SWIFTSKINS_COIL",condition:e=>!e.hasResourceAvailable("REAWAKENED")},{newSkill:"FOURTH_GENERATION",condition:e=>e.hasResourceAvailable("REAWAKENED")}],Zf=[{newSkill:"SERPENTS_TAIL",condition:e=>!$O.some(t=>e.hasResourceAvailable(t))},{newSkill:"DEATH_RATTLE",condition:e=>e.hasResourceAvailable("DEATH_RATTLE_READY")},{newSkill:"LAST_LASH",condition:e=>e.hasResourceAvailable("LAST_LASH_READY")},{newSkill:"FIRST_LEGACY",condition:e=>e.hasResourceExactly("LEGACY_READY",1)},{newSkill:"SECOND_LEGACY",condition:e=>e.hasResourceExactly("LEGACY_READY",2)},{newSkill:"THIRD_LEGACY",condition:e=>e.hasResourceExactly("LEGACY_READY",3)},{newSkill:"FOURTH_LEGACY",condition:e=>e.hasResourceExactly("LEGACY_READY",4)}],oD=[{newSkill:"TWINFANG",condition:e=>!["COIL_OGCD_READY","UNCOILED_OGCD_READY","DEN_OGCD_READY"].some(t=>e.hasResourceAvailable(t))},{newSkill:"TWINFANG_BITE",condition:e=>e.hasResourceAvailable("COIL_OGCD_READY")},{newSkill:"TWINFANG_THRESH",condition:e=>e.hasResourceAvailable("DEN_OGCD_READY")},{newSkill:"UNCOILED_TWINFANG",condition:e=>e.hasResourceAvailable("UNCOILED_OGCD_READY")}],lD=[{newSkill:"TWINBLOOD",condition:e=>!["COIL_OGCD_READY","UNCOILED_OGCD_READY","DEN_OGCD_READY"].some(t=>e.hasResourceAvailable(t))},{newSkill:"TWINBLOOD_BITE",condition:e=>e.hasResourceAvailable("COIL_OGCD_READY")},{newSkill:"TWINBLOOD_THRESH",condition:e=>e.hasResourceAvailable("DEN_OGCD_READY")},{newSkill:"UNCOILED_TWINBLOOD",condition:e=>e.hasResourceAvailable("UNCOILED_OGCD_READY")}],sD=[{newSkill:"REAWAKEN",condition:e=>!e.hasResourceAvailable("ANGUINE_TRIBUTE")},{newSkill:"OUROBOROS",condition:e=>e.hasResourceAvailable("ANGUINE_TRIBUTE")}];ha("WRITHING_SNAP",15,{applicationDelay:.488,potency:200,startsAuto:!1});ha("STEEL_FANGS",1,{replaceIf:Wr,applicationDelay:1.158,potency:[["NEVER",180],["MELEE_MASTERY_VPR",200]],jobPotencyModifiers:e=>e.hasResourceAvailable("HONED_STEEL")?[J.HonedST]:[],highlightIf:e=>e.hasResourceAvailable("HONED_STEEL"),onConfirm:e=>e.tryConsumeResource("HONED_STEEL"),extendedStatus:"HONED_REAVERS"});ha("REAVING_FANGS",10,{replaceIf:Xr,applicationDelay:1.293,potency:[["NEVER",180],["MELEE_MASTERY_VPR",200]],jobPotencyModifiers:e=>e.hasResourceAvailable("HONED_REAVERS")?[J.HonedST]:[],highlightIf:e=>e.hasResourceAvailable("HONED_REAVERS"),onConfirm:e=>e.tryConsumeResource("HONED_REAVERS"),extendedStatus:"HONED_STEEL"});ha("HUNTERS_STING",5,{startOnHotbar:!1,replaceIf:Wr,applicationDelay:.89,potency:[["NEVER",240],["MELEE_MASTERY_VPR",300]],highlightIf:e=>!Vr.some(t=>e.hasResourceAvailable(t))||JO.some(t=>e.hasResourceAvailable(t)),extendedStatus:"HUNTERS_INSTINCT"});ha("SWIFTSKINS_STING",20,{startOnHotbar:!1,replaceIf:Xr,applicationDelay:1.16,potency:[["NEVER",280],["MELEE_MASTERY_VPR",300]],highlightIf:e=>!Vr.some(t=>e.hasResourceAvailable(t))||eD.some(t=>e.hasResourceAvailable(t)),extendedStatus:"SWIFTSCALED"});const m2=[["FLANKSTING_STRIKE",1.649,"flank","FLANKSTUNG_VENOM","HINDSTUNG_VENOM",Wr],["FLANKSBANE_FANG",1.604,"flank","FLANKSBANE_VENOM","HINDSBANE_VENOM",Xr],["HINDSTING_STRIKE",.98,"rear","HINDSTUNG_VENOM","FLANKSBANE_VENOM",Wr],["HINDSBANE_FANG",1.203,"rear","HINDSBANE_VENOM","FLANKSTUNG_VENOM",Xr]];m2.forEach(([e,t,n,o,s,c])=>{ha(e,30,{startOnHotbar:!1,replaceIf:c,applicationDelay:t,potency:[["NEVER",320],["MELEE_MASTERY_II_VPR",340]],positional:{potency:[["NEVER",380],["MELEE_MASTERY_II_VPR",400]],location:n},jobPotencyModifiers:d=>d.hasResourceAvailable(o)?[J.VenomST]:[],highlightIf:d=>!Vr.some(f=>d.hasResourceAvailable(f))||d.hasResourceAvailable(o),onConfirm:d=>{d.gainStatus("DEATH_RATTLE_READY"),d.resources.get("SERPENT_OFFERINGS").gain(10),Vr.filter(f=>f!==o).some(f=>d.hasResourceAvailable(f))&&I.reportWarning({kind:"custom",en:"incorrect combo ender!"})},extendedStatus:s})});ha("HUNTERS_COIL",65,{replaceIf:nD,applicationDelay:.982,potency:570,positional:{potency:620,location:"flank"},baseRecastTime:3,highlightIf:e=>e.hasResourceAvailable("HUNTERS_COIL_READY"),validateAttempt:e=>e.hasResourceAvailable("HUNTERS_COIL_READY"),onConfirm:e=>{e.gainOfferings(5),e.hasTraitUnlocked("VIPERS_BITE")&&(e.gainStatus("HUNTERS_VENOM"),e.gainStatus("COIL_OGCD_READY",2)),e.hasResourceAvailable("SWIFTSKINS_COIL_READY")&&e.gainStatus("SWIFTSKINS_COIL_READY")},extendedStatus:"HUNTERS_INSTINCT"});ha("SWIFTSKINS_COIL",65,{replaceIf:iD,applicationDelay:1.473,potency:570,positional:{potency:620,location:"rear"},baseRecastTime:3,highlightIf:e=>e.hasResourceAvailable("SWIFTSKINS_COIL_READY"),validateAttempt:e=>e.hasResourceAvailable("SWIFTSKINS_COIL_READY"),onConfirm:e=>{e.gainOfferings(5),e.hasTraitUnlocked("VIPERS_BITE")&&(e.gainStatus("SWIFTSKINS_VENOM"),e.gainStatus("COIL_OGCD_READY",2)),e.hasResourceAvailable("HUNTERS_COIL_READY")&&e.gainStatus("HUNTERS_COIL_READY")},extendedStatus:"SWIFTSCALED"});ha("REAWAKEN",90,{replaceIf:sD,applicationDelay:.625,potency:750,falloff:.8,baseRecastTime:2.2,highlightIf:e=>e.hasResourceAvailable("SERPENT_OFFERINGS",50)||e.hasResourceAvailable("READY_TO_REAWAKEN"),validateAttempt:e=>e.hasResourceAvailable("SERPENT_OFFERINGS",50)||e.hasResourceAvailable("READY_TO_REAWAKEN"),onConfirm:e=>{e.tryConsumeResource("READY_TO_REAWAKEN")||e.resources.get("SERPENT_OFFERINGS").consume(50),e.gainStatus("ANGUINE_TRIBUTE",e.resources.get("ANGUINE_TRIBUTE").maxValue),e.gainStatus("REAWAKENED"),e.resources.get("REAWAKENED").removeTimer(),e.resources.addResourceEvent({rscType:"REAWAKENED",name:"cancel reawaken",delay:Ut("VPR","REAWAKENED").maxTimeout,fnOnRsc:()=>e.cancelReawaken()})}});ha("OUROBOROS",96,{startOnHotbar:!1,replaceIf:sD,applicationDelay:2.313,potency:1150,falloff:.8,baseRecastTime:3,highlightIf:e=>e.hasResourceExactly("ANGUINE_TRIBUTE",1),onConfirm:e=>e.cancelReawaken()});ha("VICEWINDER",65,{applicationDelay:.581,potency:500,secondaryCooldown:{cdName:"cd_VICEWINDER",cooldown:40,maxCharges:2},baseRecastTime:3,validateAttempt:e=>!e.hasResourceAvailable("REAWAKENED")&&!e.hasResourceAvailable("HUNTERS_COIL_READY")&&!e.hasResourceAvailable("SWIFTSKINS_COIL_READY")&&!e.hasResourceAvailable("HUNTERS_DEN_READY")&&!e.hasResourceAvailable("SWIFTSKINS_DEN_READY"),onConfirm:e=>{e.hasTraitUnlocked("VIPERS_RATTLE")&&e.resources.get("RATTLING_COIL").gain(1),e.gainStatus("HUNTERS_COIL_READY"),e.gainStatus("SWIFTSKINS_COIL_READY")}});ha("UNCOILED_FURY",82,{applicationDelay:.804,potency:680,falloff:.75,baseRecastTime:3.5,highlightIf:e=>e.hasResourceAvailable("RATTLING_COIL"),validateAttempt:e=>e.hasResourceAvailable("RATTLING_COIL"),onConfirm:e=>{e.tryConsumeResource("RATTLING_COIL"),e.hasTraitUnlocked("UNCOILED_FANGS")&&(e.gainStatus("POISED_FOR_TWINFANG"),e.gainStatus("UNCOILED_OGCD_READY",2))},startsAuto:!1});ha("STEEL_MAW",25,{replaceIf:Xf,applicationDelay:1.091,potency:120,falloff:0,jobPotencyModifiers:e=>e.hasResourceAvailable("HONED_STEEL")?[J.HonedAoE]:[],highlightIf:e=>e.hasResourceAvailable("HONED_STEEL"),onConfirm:e=>e.tryConsumeResource("HONED_STEEL"),extendedStatus:"HONED_REAVERS"});ha("REAVING_MAW",35,{replaceIf:qf,applicationDelay:.908,potency:120,falloff:0,jobPotencyModifiers:e=>e.hasResourceAvailable("HONED_REAVERS")?[J.HonedAoE]:[],highlightIf:e=>e.hasResourceAvailable("HONED_REAVERS"),onConfirm:e=>e.tryConsumeResource("HONED_REAVERS"),extendedStatus:"HONED_STEEL"});ha("HUNTERS_BITE",40,{startOnHotbar:!1,replaceIf:Xf,applicationDelay:1.134,potency:180,falloff:0,highlightIf:e=>!0,extendedStatus:"HUNTERS_INSTINCT"});ha("SWIFTSKINS_BITE",45,{startOnHotbar:!1,replaceIf:qf,applicationDelay:1.445,potency:180,falloff:0,highlightIf:e=>!0,extendedStatus:"SWIFTSCALED"});ha("JAGGED_MAW",50,{startOnHotbar:!1,replaceIf:Xf,applicationDelay:1.127,potency:180,falloff:0,jobPotencyModifiers:e=>e.hasResourceAvailable("GRIMSKINS_VENOM")?[J.VenomAoE]:[],highlightIf:e=>e.hasResourceAvailable("GRIMSKINS_VENOM")||!e.hasResourceAvailable("GRIMHUNTERS_VENOM"),onConfirm:e=>{e.gainStatus("LAST_LASH_READY"),e.resources.get("SERPENT_OFFERINGS").gain(10)},extendedStatus:"GRIMHUNTERS_VENOM"});ha("BLOODIED_MAW",50,{startOnHotbar:!1,replaceIf:qf,applicationDelay:.866,potency:180,falloff:0,jobPotencyModifiers:e=>e.hasResourceAvailable("GRIMHUNTERS_VENOM")?[J.VenomAoE]:[],highlightIf:e=>e.hasResourceAvailable("GRIMHUNTERS_VENOM")||!e.hasResourceAvailable("GRIMSKINS_VENOM"),onConfirm:e=>{e.gainStatus("LAST_LASH_READY"),e.resources.get("SERPENT_OFFERINGS").gain(10)},extendedStatus:"GRIMSKINS_VENOM"});ha("HUNTERS_DEN",70,{replaceIf:[{newSkill:"HUNTERS_DEN",condition:e=>!e.hasResourceAvailable("REAWAKENED")},{newSkill:"THIRD_GENERATION",condition:e=>e.hasResourceAvailable("REAWAKENED")}],applicationDelay:.569,potency:300,falloff:0,baseRecastTime:3,highlightIf:e=>e.hasResourceAvailable("HUNTERS_DEN_READY"),validateAttempt:e=>e.hasResourceAvailable("HUNTERS_DEN_READY"),onConfirm:e=>{e.gainOfferings(5),e.hasTraitUnlocked("VIPERS_THRESH")&&(e.gainStatus("FELLHUNTERS_VENOM"),e.gainStatus("DEN_OGCD_READY",2)),e.hasResourceAvailable("SWIFTSKINS_DEN_READY")&&e.gainStatus("SWIFTSKINS_DEN_READY")},extendedStatus:"HUNTERS_INSTINCT"});ha("SWIFTSKINS_DEN",70,{replaceIf:[{newSkill:"SWIFTSKINS_DEN",condition:e=>!e.hasResourceAvailable("REAWAKENED")},{newSkill:"FOURTH_GENERATION",condition:e=>e.hasResourceAvailable("REAWAKENED")}],applicationDelay:.999,potency:300,falloff:0,baseRecastTime:3,highlightIf:e=>e.hasResourceAvailable("SWIFTSKINS_DEN_READY"),validateAttempt:e=>e.hasResourceAvailable("SWIFTSKINS_DEN_READY"),onConfirm:e=>{e.gainOfferings(5),e.hasTraitUnlocked("VIPERS_THRESH")&&(e.gainStatus("FELLSKINS_VENOM"),e.gainStatus("DEN_OGCD_READY",2)),e.hasResourceAvailable("HUNTERS_DEN_READY")&&e.gainStatus("HUNTERS_DEN_READY")},extendedStatus:"SWIFTSCALED"});ha("VICEPIT",70,{applicationDelay:.827,potency:250,secondaryCooldown:{cdName:"cd_VICEWINDER",cooldown:40,maxCharges:2},falloff:0,baseRecastTime:3,validateAttempt:e=>!e.hasResourceAvailable("REAWAKENED")&&!e.hasResourceAvailable("HUNTERS_COIL_READY")&&!e.hasResourceAvailable("SWIFTSKINS_COIL_READY")&&!e.hasResourceAvailable("HUNTERS_DEN_READY")&&!e.hasResourceAvailable("SWIFTSKINS_DEN_READY"),onConfirm:e=>{e.hasTraitUnlocked("VIPERS_RATTLE")&&(I.timeline.duringUntargetable(e.getDisplayTime())||e.resources.get("RATTLING_COIL").gain(1)),e.gainStatus("HUNTERS_DEN_READY"),e.gainStatus("SWIFTSKINS_DEN_READY")}});Uo("SERPENTS_IRE",86,"cd_SERPENTS_IRE",{applicationDelay:0,cooldown:120,requiresCombat:!0,onConfirm:e=>{e.resources.get("RATTLING_COIL").gain(1),e.hasTraitUnlocked("SERPENTS_LINEAGE")&&e.gainStatus("READY_TO_REAWAKEN")}});Uo("SLITHER",40,"cd_SLITHER",{applicationDelay:0,cooldown:30,maxCharges:3,animationLock:Wt});Uo("SERPENTS_TAIL",55,"cd_SERPENTS_TAIL",{replaceIf:Zf,applicationDelay:0,cooldown:1,validateAttempt:e=>!1});Uo("DEATH_RATTLE",55,"cd_SERPENTS_TAIL",{startOnHotbar:!1,replaceIf:Zf,applicationDelay:1.697,cooldown:1,potency:280,highlightIf:e=>!0,onConfirm:e=>e.tryConsumeResource("DEATH_RATTLE_READY")});Uo("LAST_LASH",60,"cd_SERPENTS_TAIL",{startOnHotbar:!1,replaceIf:Zf,applicationDelay:1.226,cooldown:1,potency:120,falloff:0,highlightIf:e=>!0,onConfirm:e=>e.tryConsumeResource("LAST_LASH_READY")});Uo("TWINFANG",75,"cd_TWINFANG",{replaceIf:oD,applicationDelay:0,cooldown:1,validateAttempt:e=>!1});Uo("TWINBLOOD",75,"cd_TWINBLOOD",{replaceIf:lD,applicationDelay:0,cooldown:1,validateAttempt:e=>!1});const A2=[["TWINFANG_BITE",75,"fang",.629,120,void 0,"COIL_OGCD_READY","HUNTERS_VENOM",J.VenomOGCDST,"SWIFTSKINS_VENOM"],["TWINBLOOD_BITE",75,"blood",.714,120,void 0,"COIL_OGCD_READY","SWIFTSKINS_VENOM",J.VenomOGCDST,"HUNTERS_VENOM"],["TWINFANG_THRESH",80,"fang",.666,50,0,"DEN_OGCD_READY","FELLHUNTERS_VENOM",J.VenomOGCDAoE,"FELLSKINS_VENOM"],["TWINBLOOD_THRESH",80,"blood",.764,50,0,"DEN_OGCD_READY","FELLSKINS_VENOM",J.VenomOGCDAoE,"FELLHUNTERS_VENOM"],["UNCOILED_TWINFANG",92,"fang",1.04,120,.75,"UNCOILED_OGCD_READY","POISED_FOR_TWINFANG",J.Poised,"POISED_FOR_TWINBLOOD"],["UNCOILED_TWINBLOOD",92,"blood",.977,120,.75,"UNCOILED_OGCD_READY","POISED_FOR_TWINBLOOD",J.Poised,"POISED_FOR_TWINFANG"]];A2.forEach(([e,t,n,o,s,c,d,f,h,m])=>{Uo(e,t,n==="fang"?"cd_TWINFANG":"cd_TWINBLOOD",{startOnHotbar:!1,replaceIf:n==="fang"?oD:lD,applicationDelay:o,cooldown:1,potency:s,falloff:c,highlightIf:R=>R.hasResourceAvailable(f),jobPotencyModifiers:R=>R.hasResourceAvailable(f)?[h]:[],onConfirm:R=>{R.tryConsumeResource(d),R.hasResourceAvailable(f)||I.reportWarning({kind:"custom",en:`unbuffed twin${n} ability!`}),R.tryConsumeResource(f)&&R.hasResourceAvailable(d)?R.gainStatus(m):R.tryConsumeResource(m)},startsAuto:!1})});const R2=[["FIRST_GENERATION",1.702,Wr],["SECOND_GENERATION",1.473,Xr],["THIRD_GENERATION",1.473,nD],["FOURTH_GENERATION",1.473,iD]];R2.forEach(([e,t,n],o)=>{ha(e,90,{replaceIf:n,startOnHotbar:!1,applicationDelay:t,potency:420,falloff:.8,baseRecastTime:2,combo:{resource:"REAWAKEN_COMBO",resourceValue:o+1,potency:680},highlightIf:s=>s.hasResourceExactly("REAWAKEN_COMBO",o+1),onConfirm:s=>{s.setLegacy(o+1),s.consumeAnguine()}})});const T2=[["FIRST_LEGACY",1.289],["SECOND_LEGACY",1.065],["THIRD_LEGACY",1.19],["FOURTH_LEGACY",1.065]];T2.forEach(([e,t])=>{Uo(e,100,"cd_SERPENTS_TAIL",{startOnHotbar:!1,replaceIf:Zf,applicationDelay:t,cooldown:1,potency:320,falloff:.8,highlightIf:n=>!0,onConfirm:n=>n.tryConsumeResource("LEGACY_READY",!0)})});const rD=["SONG_OF_TORMENT","NIGHTBLOOM","FEATHER_RAIN","MORTAL_FLAME","BREATH_OF_MAGIC","WANING_NOCTURNE","DIAMONDBACK","BRUSH_WITH_DEATH"],S2=Object.keys(aT).filter(e=>!rD.includes(e));Object.keys(aT).forEach(e=>zt(e,`BLU/${Pe[e].name}.png`));class g2 extends Xt{jobSpecificOtherTargetedBuffViewProps(){return[...rD.map(t=>this.makeCommonTimer(t,!1))]}jobSpecificSelfTargetedBuffViewProps(){return S2.map(t=>this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){return[]}}const xa=(e,t,n)=>{Ve("BLU",e,t,n??{})};xa("NIGHTBLOOM",1,{timeout:60});xa("SONG_OF_TORMENT",1,{timeout:30});xa("FEATHER_RAIN",1,{timeout:6});xa("WAXING_NOCTURNE",1,{timeout:15});xa("WANING_NOCTURNE",1,{timeout:15});xa("DIAMONDBACK",1,{timeout:10});xa("BRISTLE",1,{timeout:30});xa("WHISTLE",1,{timeout:30});xa("TINGLE",1,{timeout:15});xa("COLD_FOG",1,{timeout:5});xa("TOUCH_OF_FROST",1,{timeout:15});xa("PHANTOM_FLURRY",1,{timeout:5});xa("APOKALYPSIS",1,{timeout:10});xa("WINGED_REPROBATION",4);xa("WINGED_REDEMPTION",1,{timeout:10});xa("BREATH_OF_MAGIC",1,{timeout:60});xa("MORTAL_FLAME",1,{timeout:900});xa("SURPANAKHAS_FURY",4,{timeout:3});xa("BRUSH_WITH_DEATH",1,{timeout:600});class I2 extends qt{constructor(t){super(t),this.cooldowns.set(new Ue("cd_SWIFTCAST",60,1,1)),this.registerRecurringEvents([{groupedEffects:[{effectName:"NIGHTBLOOM",appliedBy:["NIGHTBLOOM"]},{effectName:"SONG_OF_TORMENT",appliedBy:["SONG_OF_TORMENT"]}]},{groupedEffects:[{effectName:"FEATHER_RAIN",appliedBy:["FEATHER_RAIN"]}]},{groupedEffects:[{effectName:"BREATH_OF_MAGIC",appliedBy:["BREATH_OF_MAGIC"]}]},{groupedEffects:[{effectName:"MORTAL_FLAME",appliedBy:["MORTAL_FLAME"]}]},{groupedEffects:[{effectName:"PHANTOM_FLURRY",appliedBy:["PHANTOM_FLURRY"],isGroundTargeted:!0,exclude:!0},{effectName:"APOKALYPSIS",appliedBy:["APOKALYPSIS"],isGroundTargeted:!0,exclude:!0}]}])}get statusPropsGenerator(){return new g2(this)}refreshBuff(t,n){this.addEvent(new Oe("gain buff",n,()=>{if(this.resources.get(t).gain(1),this.enqueueResourceDrop(t),t==="WANING_NOCTURNE"||t==="DIAMONDBACK"){const o=Ut("BLU",t).maxTimeout,s=this.resources.get("NOT_ANIMATION_LOCKED").pendingChange;s!==void 0?this.resources.get("NOT_ANIMATION_LOCKED").overrideTimer(this,Math.max(o,s.timeTillEvent)):this.resources.takeResourceLock("NOT_ANIMATION_LOCKED",o)}}))}jobSpecificRegisterRecurringEvents(){const t=()=>{this.handleDoTTick("PHANTOM_FLURRY"),this.getDisplayTime()>=0&&I.reportDotTick(this.time,"PHANTOM_FLURRY"),this.addEvent(new Oe("kick tick",1,()=>{t()}))},n=()=>{this.handleDoTTick("APOKALYPSIS"),this.getDisplayTime()>=0&&I.reportDotTick(this.time,"APOKALYPSIS"),this.addEvent(new Oe("Apokalypsis tick",1,()=>{n()}))};let o=this.config.timeTillFirstManaTick+this.dotTickOffset;for(;o>1;)o--;this.addEvent(new Oe("initial kick tick",o,t));let s=this.config.timeTillFirstManaTick+this.dotTickOffset;for(;s>1;)s--;this.addEvent(new Oe("initial Apokalypsis tick",s,n))}cancelChanneledSkills(){this.tryConsumeResource("PHANTOM_FLURRY"),this.tryConsumeResource("APOKALYPSIS")}}const aS=e=>e.hasResourceAvailable("WANING_NOCTURNE")||e.hasResourceAvailable("DIAMONDBACK"),_2=e=>e.hasResourceAvailable("PHANTOM_FLURRY"),p2={newSkill:"END_PHANTOM_FLURRY",condition:e=>_2(e)},Yt=(e,t,n)=>{const o=n.basePotency??Number,s=n.aspect??Ie.Other,c=n.baseCastTime??0,d=n.jobPotencyModifiers??(f=>[]);return Xn("BLU",e,t,{...n,aspect:s,castTime:f=>f.config.adjustedCastTime(c),potency:n.basePotency,validateAttempt:f=>!aS(f)&&(n.validateAttempt?.(f)??!0),jobPotencyModifiers:f=>{const h=d(f);return f.hasResourceAvailable("WAXING_NOCTURNE")&&h.push(J.MoonFlute),o!==0&&f.hasResourceAvailable("BRISTLE")&&h.push(J.Bristle)&&f.tryConsumeResource("BRISTLE"),s===Ie.Physical&&f.hasResourceAvailable("WHISTLE")&&h.push(J.Whistle)&&f.tryConsumeResource("WHISTLE"),s===Ie.Physical&&e!=="TRIPLE_TRIDENT"&&f.hasResourceAvailable("TINGLE")&&h.push(J.TingleA)&&f.tryConsumeResource("TINGLE"),e==="TRIPLE_TRIDENT"&&f.hasResourceAvailable("TINGLE")&&h.push(J.TingleB)&&f.tryConsumeResource("TINGLE"),e==="CONVICTION_MARCATO"&&f.hasResourceAvailable("WINGED_REDEMPTION")&&h.push(J.WingedRedemption)&&f.tryConsumeResource("WINGED_REDEMPTION"),e==="WINGED_REPROBATION"&&f.resources.get("WINGED_REPROBATION").availableAmount()===3&&h.push(J.WingedReprobation),h},isInstantFn:f=>f.hasResourceAvailable("SWIFTCAST")||c===0,onConfirm:Le(f=>f.tryConsumeResource("SURPANAKHAS_FURY"),n.baseCastTime?f=>f.tryConsumeResource("SWIFTCAST"):void 0,n.onConfirm)})},Nn=(e,t,n,o)=>et("BLU",e,t,n,{jobPotencyModifiers:s=>{const c=[];return s.hasResourceAvailable("WAXING_NOCTURNE")&&c.push(J.MoonFlute),c},validateAttempt:s=>!aS(s)&&(o.validateAttempt?.(s)??!0),...o,onConfirm:Le(s=>{e!=="SURPANAKHA"&&s.tryConsumeResource("SURPANAKHAS_FURY")},o.onConfirm)});Yt("SONIC_BOOM",1,{basePotency:210,baseCastTime:1,manaCost:200,applicationDelay:.5});Yt("SHARPENED_KNIFE",1,{aspect:Ie.Physical,basePotency:220,baseCastTime:1,manaCost:200,applicationDelay:.5});Yt("GOBLIN_PUNCH",1,{aspect:Ie.Physical,basePotency:220,baseCastTime:0,manaCost:200,applicationDelay:.5});Yt("REVENGE_BLAST",1,{aspect:Ie.Physical,basePotency:500,baseCastTime:2,manaCost:200,applicationDelay:.5});Yt("WILD_RAGE",1,{aspect:Ie.Physical,basePotency:500,baseCastTime:5,manaCost:0,applicationDelay:.5});Yt("CONVICTION_MARCATO",1,{basePotency:220,baseCastTime:2,manaCost:200,applicationDelay:.5});Yt("WATER_CANNON",1,{basePotency:200,baseCastTime:2,manaCost:200,applicationDelay:.5});Yt("HYDRO_PULL",1,{basePotency:220,baseCastTime:2,manaCost:200,applicationDelay:.5});Yt("THE_ROSE_OF_DESTRUCTION",1,{basePotency:400,baseCastTime:2,manaCost:300,applicationDelay:.5,secondaryCooldown:{cdName:"cd_THE_ROSE_OF_DESTRUCTION",cooldown:30,maxCharges:1}});Yt("MOON_FLUTE",1,{baseCastTime:2,manaCost:500,applicationDelay:.6,onConfirm:e=>{e.hasResourceAvailable("WAXING_NOCTURNE")||(e.refreshBuff("WAXING_NOCTURNE",.6),e.addEvent(new Oe("Waxing_Nocturne ended",15.6,()=>{e.hasResourceAvailable("WANING_NOCTURNE")||e.refreshBuff("WANING_NOCTURNE",0)})))}});Yt("DIAMONDBACK",1,{baseCastTime:2,manaCost:3e3,applicationDelay:.6,onConfirm:e=>{e.hasResourceAvailable("WAXING_NOCTURNE")&&(e.tryConsumeResource("WAXING_NOCTURNE"),e.refreshBuff("WANING_NOCTURNE",0)),e.refreshBuff("DIAMONDBACK",.6)}});Yt("MATRA_MAGIC",1,{basePotency:800,baseCastTime:2,manaCost:200,applicationDelay:.5,secondaryCooldown:{cdName:"cd_MATRA_MAGIC",cooldown:120,maxCharges:1}});Yt("SONG_OF_TORMENT",1,{basePotency:50,baseCastTime:2,manaCost:400,applicationDelay:.5,onConfirm:(e,t)=>{const n=[];e.hasResourceAvailable("WAXING_NOCTURNE")&&n.push(J.MoonFlute),e.hasResourceAvailable("BRISTLE")&&n.push(J.Bristle),e.addDoTPotencies({node:t,effectName:"SONG_OF_TORMENT",skillName:"SONG_OF_TORMENT",tickPotency:50,speedStat:"sps",modifiers:n})},onApplication:(e,t)=>{e.applyDoT("SONG_OF_TORMENT",t)}});Yt("BREATH_OF_MAGIC",1,{basePotency:0,baseCastTime:2,manaCost:300,applicationDelay:.5,onConfirm:(e,t)=>{const n=[];e.hasResourceAvailable("WAXING_NOCTURNE")&&n.push(J.MoonFlute),e.hasResourceAvailable("BRISTLE")&&n.push(J.Bristle),e.tryConsumeResource("BRISTLE"),e.addDoTPotencies({node:t,effectName:"BREATH_OF_MAGIC",skillName:"BREATH_OF_MAGIC",tickPotency:120,speedStat:"sps",modifiers:n})},onApplication:(e,t)=>{e.applyDoT("BREATH_OF_MAGIC",t)}});Yt("MORTAL_FLAME",1,{basePotency:0,baseCastTime:2,manaCost:500,applicationDelay:.5,onConfirm:(e,t)=>{const n=[];e.hasResourceAvailable("WAXING_NOCTURNE")&&n.push(J.MoonFlute),e.hasResourceAvailable("BRISTLE")&&n.push(J.Bristle),e.tryConsumeResource("BRISTLE"),e.addDoTPotencies({node:t,effectName:"MORTAL_FLAME",skillName:"MORTAL_FLAME",tickPotency:40,speedStat:"sps",modifiers:n})},onApplication:(e,t)=>{e.applyDoT("MORTAL_FLAME",t)}});Yt("WHISTLE",1,{baseCastTime:1,manaCost:200,applicationDelay:0,onConfirm:e=>{e.tryConsumeResource("BRISTLE"),e.refreshBuff("WHISTLE",0)}});Yt("BRISTLE",1,{baseCastTime:1,manaCost:200,applicationDelay:0,onConfirm:e=>{e.tryConsumeResource("WHISTLE"),e.refreshBuff("BRISTLE",0)}});Yt("FINAL_STING",1,{aspect:Ie.Physical,basePotency:2e3,baseCastTime:2,manaCost:0,applicationDelay:.5,validateAttempt:e=>!e.hasResourceAvailable("BRUSH_WITH_DEATH"),onConfirm:e=>{e.refreshBuff("BRUSH_WITH_DEATH",0)}});Yt("TINGLE",1,{basePotency:100,baseCastTime:2,manaCost:200,applicationDelay:.5,onConfirm:e=>{e.refreshBuff("TINGLE",0)}});Yt("TRIPLE_TRIDENT",1,{aspect:Ie.Physical,basePotency:450,baseCastTime:2,manaCost:300,applicationDelay:.5,secondaryCooldown:{cdName:"cd_TRIPLE_TRIDENT",cooldown:90,maxCharges:1}});const N2=e=>e.hasResourceAvailable("COLD_FOG"),C2=e=>e.hasResourceAvailable("TOUCH_OF_FROST"),b2=[{newSkill:"POP_COLD_FOG",condition:e=>N2(e)},{newSkill:"WHITE_DEATH",condition:e=>C2(e)}];Yt("COLD_FOG",1,{replaceIf:b2,baseCastTime:2,cooldown:90,manaCost:300,applicationDelay:.5,secondaryCooldown:{cdName:"cd_COLD_FOG",cooldown:90,maxCharges:1},onConfirm:e=>{e.refreshBuff("COLD_FOG",0)}});Yt("WHITE_DEATH",1,{startOnHotbar:!1,basePotency:400,baseCastTime:0,manaCost:0,applicationDelay:.5,validateAttempt:e=>!aS(e)&&e.hasResourceAvailable("TOUCH_OF_FROST")});Nn("POP_COLD_FOG",1,"cd_COLD_FOG_POP",{startOnHotbar:!1,applicationDelay:0,animationLock:en,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("COLD_FOG"),onConfirm:e=>{e.tryConsumeResource("COLD_FOG"),e.refreshBuff("TOUCH_OF_FROST",0)}});Yt("END_PHANTOM_FLURRY",1,{startOnHotbar:!1,basePotency:600,baseCastTime:0,manaCost:0,applicationDelay:.5,validateAttempt:e=>e.hasResourceAvailable("PHANTOM_FLURRY")});Yt("WINGED_REPROBATION",1,{aspect:Ie.Physical,basePotency:300,baseCastTime:1,manaCost:200,applicationDelay:.5,secondaryCooldown:{cdName:"cd_WINGED_REPROBATION",cooldown:90,maxCharges:1},onConfirm:e=>{e.resources.get("WINGED_REPROBATION").gain(1),e.resources.get("WINGED_REPROBATION").availableAmount()<=3&&e.cooldowns.get("cd_WINGED_REPROBATION").restore(90),e.resources.get("WINGED_REPROBATION").availableAmount()===4&&(e.tryConsumeResource("WINGED_REPROBATION",!0),e.refreshBuff("WINGED_REDEMPTION",0))}});Nn("ERUPTION",1,"cd_ERUPTION",{cooldown:30,manaCost:300,potency:300,applicationDelay:.62});Nn("FEATHER_RAIN",1,"cd_ERUPTION",{cooldown:30,manaCost:300,potency:220,applicationDelay:.62,onConfirm:(e,t)=>{const n=[];e.hasResourceAvailable("WAXING_NOCTURNE")&&n.push(J.MoonFlute),e.addDoTPotencies({node:t,effectName:"FEATHER_RAIN",skillName:"FEATHER_RAIN",tickPotency:40,speedStat:"sps",modifiers:n}),e.applyDoT("FEATHER_RAIN",t)}});Nn("MOUNTAIN_BUSTER",1,"cd_SHOCK_STRIKE",{cooldown:60,manaCost:400,potency:400,applicationDelay:.62});Nn("SHOCK_STRIKE",1,"cd_SHOCK_STRIKE",{cooldown:60,manaCost:400,potency:400,applicationDelay:.62});Nn("GLASS_DANCE",1,"cd_GLASS_DANCE",{cooldown:90,manaCost:500,potency:350,applicationDelay:.62});Nn("QUASAR",1,"cd_QUASAR",{cooldown:60,manaCost:300,potency:300,applicationDelay:.62});Nn("J_KICK",1,"cd_QUASAR",{cooldown:60,manaCost:300,potency:300,applicationDelay:1,animationLock:1});Nn("BOTH_ENDS",1,"cd_NIGHTBLOOM",{cooldown:120,manaCost:300,potency:600,applicationDelay:.62});Nn("SEA_SHANTY",1,"cd_SEA_SHANTY",{cooldown:120,manaCost:300,potency:500,applicationDelay:.62});Nn("BEING_MORTAL",1,"cd_BEING_MORTAL",{cooldown:120,manaCost:300,potency:800,applicationDelay:.62});Nn("APOKALYPSIS",1,"cd_BEING_MORTAL",{cooldown:120,manaCost:300,potency:0,applicationDelay:1.38,animationLock:1.38,onConfirm:(e,t)=>{const n=[];e.hasResourceAvailable("WAXING_NOCTURNE")&&n.push(J.MoonFlute),e.addDoTPotencies({node:t,effectName:"APOKALYPSIS",skillName:"APOKALYPSIS",tickPotency:140,tickFrequency:1,speedStat:"unscaled",modifiers:n})},onApplication:(e,t)=>{e.applyDoT("APOKALYPSIS",t)}});Nn("NIGHTBLOOM",1,"cd_NIGHTBLOOM",{cooldown:120,manaCost:300,potency:400,applicationDelay:.62,onConfirm:(e,t)=>{const n=[];e.hasResourceAvailable("WAXING_NOCTURNE")&&n.push(J.MoonFlute),e.addDoTPotencies({node:t,effectName:"NIGHTBLOOM",skillName:"NIGHTBLOOM",tickPotency:75,speedStat:"sps",modifiers:n})},onApplication:(e,t)=>{e.applyDoT("NIGHTBLOOM",t)}});Nn("PHANTOM_FLURRY",1,"cd_PHANTOM_FLURRY",{replaceIf:[p2],cooldown:120,manaCost:300,potency:0,applicationDelay:.5,onConfirm:(e,t)=>{const n=[];e.hasResourceAvailable("WAXING_NOCTURNE")&&n.push(J.MoonFlute),e.addDoTPotencies({node:t,effectName:"PHANTOM_FLURRY",skillName:"PHANTOM_FLURRY",tickPotency:200,tickFrequency:1,speedStat:"unscaled",modifiers:n})},onApplication:(e,t)=>{e.applyDoT("PHANTOM_FLURRY",t)}});Nn("SURPANAKHA",1,"cd_SURPANAKHA_LOCKOUT",{cooldown:1,manaCost:200,potency:e=>200*(1+.5*e.resources.get("SURPANAKHAS_FURY").availableAmount()),applicationDelay:.62,onApplication:e=>{e.resources.get("SURPANAKHAS_FURY").availableAmount()===3?e.tryConsumeResource("SURPANAKHAS_FURY",!0):e.refreshBuff("SURPANAKHAS_FURY",0)},secondaryCooldown:{cdName:"cd_SURPANAKHA",cooldown:30,maxCharges:4}});function yr(e){switch(e.job){case"PLD":return new bB(e);case"WAR":return new pB(e);case"DRK":return new HB(e);case"GNB":return new gG(e);case"WHM":return new YB(e);case"SCH":return new BB(e);case"AST":return new wB(e);case"SGE":return new TB(e);case"MNK":return new u2(e);case"DRG":return new rG(e);case"NIN":return new XB(e);case"SAM":return new nB(e);case"RPR":return new eB(e);case"VPR":return new E2(e);case"BRD":return new QP(e);case"MCH":return new vG(e);case"DNC":return new aG(e);case"BLM":return new WP(e);case"SMN":return new sB(e);case"RDM":return new $G(e);case"PCT":return new UG(e);case"BLU":return new I2(e)}return new qt(e)}let cD=e=>{};function O2(e){return`
		.castTimeTable {
			border-collapse: collapse;
			width: 100%;
		}
		.castTimeTable th, .castTimeTable td {
			text-align: center;
			padding: 0.15em;
			border: 1px solid ${e};
			width: 33%
		}
	`}function D2(e){const t=Ut(e.job,e.override.type);let n;const o=Ke(e.override.type);if(t.isCoolDown)n=N({en:o+" full in "+e.override.timeTillFullOrDrop+"s",zh:`${o}${e.override.timeTillFullOrDrop}`});else{n=o;const c=N({en:" (",zh:""}),d=N({en:") ",zh:""});(Pe[e.override.type].mayBeToggled??!1)&&(n+=c+(e.override.effectOrTimerEnabled?N({en:"enabled",zh:""}):N({en:"disabled",zh:""}))+d),t.maxValue>1&&(n+=N({en:` (amount: ${e.override.stacks})`,zh:`${e.override.stacks}`})),t.maxTimeout>=0&&(e.override.type==="POLYGLOT"?e.override.timeTillFullOrDrop>0&&(n+=N({en:` next stack ready in ${e.override.timeTillFullOrDrop}s`,zh:`${e.override.timeTillFullOrDrop}`})):e.override.effectOrTimerEnabled&&(n+=N({en:` drops in ${e.override.timeTillFullOrDrop}s`,zh:`${e.override.timeTillFullOrDrop}`})))}n+=" ";let s;if(e.deleteFn){const c=e.deleteFn;s=l.jsx(Es,{content:"[x]",onClickFn:d=>{c(e.override.type)}})}return l.jsxs("div",{style:{marginTop:10,color:"mediumpurple"},children:[n,s]})}function y2(e){const t=_=>{const O=e.initialResourceOverrides.findIndex(D=>D.type===_);O!==-1&&(e.initialResourceOverrides.splice(O,1),e.setInitialResourceOverrides(e.initialResourceOverrides))},n=e.initialResourceOverrides.map((_,O)=>l.jsx(D2,{job:e.job,override:_,deleteFn:t},O)),o=new Set(e.initialResourceOverrides.map(_=>_.type)),s=Qi(e.job),d=s.entries().flatMap(([_,O])=>o.has(_)?[]:[{rsc:_,isCoolDown:O.isCoolDown?1:0}]).toArray().sort((_,O)=>_.isCoolDown-O.isCoolDown).map((_,O)=>l.jsx("option",{value:_.rsc,children:Ke(_.rsc)},O)),f=e.selectedOverrideResource,h=s.get(f);let m,R=!0;if(h!==void 0){let _,O,D="-1",L,w="0",y;h.isCoolDown?(_=!0,O=!1,R=!1,D=e.overrideTimer,L=e.setOverrideTimer):(h.maxTimeout>=0?(_=!0,D=e.overrideTimer,L=e.setOverrideTimer):_=!1,h.maxValue>1||h.maxValue===h.defaultValue?(O=!0,w=e.overrideStacks,y=e.setOverrideStacks):O=!1,R=Pe[f].mayBeToggled??!1);const x=h.isCoolDown?N({en:"Time till full: ",zh:"CD"}):N(f==="POLYGLOT"?{en:"Time till next stack: ",zh:""}:{en:"Time till drop: ",zh:" "}),G=N({en:"enabled",zh:""});m=l.jsxs("div",{style:{margin:"6px 0"},children:[l.jsx("div",{hidden:!_,children:l.jsx(jt,{description:x,defaultValue:D,onChange:L})}),l.jsx("div",{hidden:!O,children:l.jsx(jt,{description:N({en:"Amount: ",zh:""}),defaultValue:w,onChange:y})}),l.jsxs("div",{hidden:!R,children:[l.jsx("input",{style:{position:"relative",top:3,marginRight:5},type:"checkbox",checked:e.overrideEnabled,onChange:B=>e.setOverrideEnabled(B.target.checked)}),l.jsx("span",{children:G})]})]})}const T=C.useContext(pa),S=Il(T,"bgMediumContrast"),g=_=>{_.preventDefault();const O=e.selectedOverrideResource,D=Qi(e.job).get(O);let L=parseFloat(e.overrideTimer);const w=parseInt(e.overrideStacks),y=e.overrideEnabled;if(O==="POLYGLOT"&&e.overrideTimer===""&&(L=0),isNaN(w)||isNaN(L)){window.alert("some inputs are not numbers!");return}let x;if(D.isCoolDown){const G=D.maxStacks*D.cdPerStack;if(L<0||L>G){window.alert("invalid input timeout (must be in range [0, "+G+"])");return}x={type:O,timeTillFullOrDrop:L,stacks:D.maxStacks>1?w:1,effectOrTimerEnabled:!0}}else{if((D.maxValue>1||D.maxValue===D.defaultValue)&&(w<0||w>D.maxValue)){window.alert("invalid input amount (must be in range [0, "+D.maxValue+"])");return}if(D.maxTimeout>=0&&(L<0||L>D.maxTimeout)){window.alert("invalid input timeout (must be in range [0, "+D.maxTimeout+"])");return}x={type:O,timeTillFullOrDrop:D.maxTimeout>=0?L:-1,stacks:D.maxValue>1||D.maxValue===D.defaultValue?w:1,effectOrTimerEnabled:R||y}}e.setInitialResourceOverrides([...e.initialResourceOverrides,x])},p=l.jsx("div",{children:l.jsxs("form",{onSubmit:_=>g(_),style:{marginTop:16,outline:"1px solid "+S,outlineOffset:6},children:[l.jsx("select",{value:e.selectedOverrideResource,onChange:_=>{_.target&&e.setSelectedOverrideResource(_.target.value)},children:d}),m,l.jsx("input",{type:"submit",value:N({en:"add override",zh:""})})]})});return l.jsx("div",{style:{marginTop:10},children:l.jsx(gl,{title:"overrideInitialResources",titleNode:l.jsxs("span",{children:[N({en:"Override initial resources",zh:""})," ",l.jsx(ze,{topic:"overrideInitialResources",content:N({en:l.jsxs("div",{children:[l.jsx("div",{className:"paragraph",style:{color:"orangered"},children:l.jsx("b",{children:"Can create invalid game states. Go over Instructions/Troubleshoot first and use carefully at your own risk!"})}),l.jsx("div",{className:"paragraph",children:"Also, currently thunder dot buff created this way doesn't actually tick. It just shows the remaining buff timer."}),l.jsx("div",{className:"paragraph",children:"I would recommend saving settings (stats, lines presets, timeline markers etc.) to files first, in case invalid game states really mess up the tool and a complete reset is required."})]}),zh:l.jsxs("div",{children:[l.jsx("div",{className:"paragraph",style:{color:"orangered"},children:l.jsx("b",{children:"/"})}),l.jsx("div",{className:"paragraph",children:"dot"}),l.jsx("div",{className:"paragraph",children:""})]})})})]}),content:l.jsxs("div",{children:[l.jsx("button",{onClick:_=>{e.initialResourceOverrides.length>0&&e.setInitialResourceOverrides([]),_.preventDefault()},children:N({en:"clear all overrides",zh:""})}),n,p]})})})}function v2(e){const t=I.game.lucidTickOffset.toFixed(3),n=N({en:"the random time offset of lucid dreaming ticks relative to mp ticks",zh:"buff"}),o=I.game.dotTickOffset.toFixed(3),s=N({en:"the random time offset of DoT ticks relative to mp ticks",zh:"DoT"}),c=I.gameConfig.procMode,d=I.gameConfig.initialResourceOverrides.length,f=I.gameConfig.legacy_casterTax,h=N({en:`WARNING: this record was created in an earlier version of XIV in the Shell and uses the deprecated caster tax of ${f}s instead of calculating from your FPS input below. Hover for details: `,zh:`${f}`}),m=St().warning,R=(g,p)=>{const _=oC[g];if(_.warningContent)return l.jsx("p",{style:{color:p},children:N(_.warningContent)})},T=N({en:l.jsxs("div",{children:[l.jsx("div",{className:"paragraph",children:"The caster tax config is now replaced by 0.1s + FPS tax and is more precise. You can read more about FPS tax in the Github repository wiki's implementation notes section."}),l.jsx("div",{className:"paragraph",style:{color:m},children:"You are strongly encouraged to create a new record (in another timeline slot or from 'apply and reset') and migrate your fight plan. Support for loading legacy files might drop in the future."})]}),zh:l.jsxs("div",{children:[l.jsx("div",{className:"paragraph",children:"0.1s /"}),l.jsx("div",{className:"paragraph",style:{color:m},children:""})]})}),S=l.jsxs("p",{style:{color:m},children:[h,l.jsx(ze,{topic:"legacy-caster-tax",content:T})]});return l.jsxs("div",{style:{textDecoration:e.dirty?"line-through":"none",marginLeft:5,paddingLeft:10,borderLeft:"1px solid "+St().bgHighContrast},children:[I.gameConfig.shellVersion<Do.FpsTax?S:void 0,R(dt[e.job].implementationLevel,m),["CASTER","HEALER"].includes(dt[e.job].role)&&l.jsxs("div",{children:[N({en:"Lucid tick offset ",zh:"& "}),l.jsx(ze,{topic:"lucidTickOffset",content:n}),": ",t]}),I.game.dotResources.length>0&&l.jsxs("div",{children:[N({en:"DoT tick offset ",zh:"& "}),l.jsx(ze,{topic:"dotTickOffset",content:s}),": ",o]}),e.job==="MNK"&&l.jsxs("div",{children:[N({en:"SSS GCD",zh:"GCD"}),":"," ",I.gameConfig.adjustedSksGCD(5,I.game.inherentSpeedModifier()).toFixed(2)]}),l.jsxs("p",{children:[N({en:"Procs",zh:""}),": ",c]}),d>0&&l.jsx("p",{children:N({en:`${d} initial resource override(s)`,zh:`${d}`})})]})}function M2(){const t=(()=>{const T=Tt("playbackSettings");if(T)return JSON.parse(T)})(),[n,o]=C.useState(t?.tickMode??1),[s,c]=C.useState(t?.timeScale??ri.Manual),d=(T,S)=>{const g=JSON.stringify({tickMode:S,timeScale:T});gt("playbackSettings",g)},f=T=>{if(!T||!T.target||isNaN(parseInt(T.target.value)))return;c(parseInt(T.target.value));const S=parseInt(T.target.value);isNaN(S)||(I.setTimeControlSettings({tickMode:S,timeScale:n}),d(n,S))},h=T=>{const S=parseFloat(T);o(S),isNaN(S)||(I.setTimeControlSettings({tickMode:s,timeScale:S}),d(S,n))};C.useEffect(()=>{I.setTimeControlSettings({tickMode:s,timeScale:n})});const m={position:"relative",top:3,marginRight:"0.75em"},R={display:"inline-block",marginRight:"0.5em"};return l.jsxs("div",{children:[l.jsxs("p",{children:[l.jsxs("label",{style:R,children:[l.jsx("input",{style:m,type:"radio",onChange:f,value:ri.RealTimeAutoPause,checked:s===ri.RealTimeAutoPause,name:"tick mode"}),N({en:"real-time auto pause",zh:"("})]}),l.jsx(ze,{topic:"ctrl-realTimeAutoPause",content:l.jsxs("div",{className:"toolTip",children:[N({en:l.jsx("div",{className:"paragraph",children:"*Recommended*"}),zh:l.jsx("div",{className:"paragraph",children:"**"})}),N({en:l.jsxs("div",{className:"paragraph",children:["- click to use a skill. if the skill is on cooldown, or you're in an animation lock, then the simulation will automatically skip ahead to when the skill can be used again",l.jsx("br",{}),"- animation locks and cast bars will play out in sped-up real time until done"]}),zh:l.jsx("div",{className:"paragraph",children:"- ; CDCD"})})]})}),l.jsx("br",{}),l.jsxs("label",{style:R,children:[l.jsx("input",{style:m,type:"radio",onChange:f,value:ri.Manual,checked:s===ri.Manual,name:"tick mode"}),N({en:"manual",zh:""})]}),l.jsx(ze,{topic:"ctrl-manual",content:l.jsx("div",{className:"toolTip",children:N({en:l.jsxs("div",{className:"paragraph",children:["- click to use a skill. if the skill is on cooldown, or you're in an animation lock, then the simulation will automatically skip ahead to when the skill can be used again",l.jsx("br",{}),"- animation locks and cast times are skipped immediately"]}),zh:l.jsx("div",{className:"paragraph",children:"- ; CDCD"})})})})]}),l.jsx(jt,{defaultValue:`${n}`,description:l.jsxs("span",{children:[N({en:"time scale ",zh:" "}),l.jsx(ze,{topic:"timeScale",content:l.jsx("div",{children:N({en:"rate at which game time advances automatically (aka when in real-time)",zh:""})})}),":"," "]}),onChange:h})]})}function L2(e){const t=C.useContext(pa),n=e.imported?Il(t,"success"):Il(t,"text");return l.jsx(jt,{style:{color:n},defaultValue:e.initial,description:e.description,onChange:o=>{e.dispatch({[e.name]:o}),e.removeImportedField(e.name)}})}function x2(e){const t=En(C.useContext(pa)),[n,o]=C.useState(""),{imported:s,setImported:c}=e,d=async R=>{R.preventDefault();const T=URL.parse(n),S=new Headers;try{if(T&&T.hostname==="etro.gg"){const g=T.pathname.split("/");if(g[1]!=="gearset"&&g.length!==3)throw new Error("Invalid etro gearset link (hover ? in URL input box for details)");S.append("Content-Type","application/json");const p=await fetch("https://etro.gg/api/gearsets/"+g[2],{method:"GET",headers:S});if(p.ok){const _=await p.json(),O=new Map(_.totalParams.map(G=>[G.name,G.value])),D=_.totalParams.length>0?_.totalParams[0].value:0;if(!(_.jobAbbrev in dt))throw new Error("Imported gearset was for a job ("+_.jobAbbrev+") that XIV in the Shell doesn't support");const L=ut.getSubstatBase(parseFloat(_.level)).toString(),w=O.get("SPS")??L,y=O.get("SKS")??L,x=["job","level","criticalHit","directHit","determination","main"];O.has("SPS")&&x.push("spellSpeed"),O.has("SKS")&&x.push("skillSpeed"),O.has("PIE")&&x.push("piety"),O.has("TEN")&&x.push("tenacity"),O.has("Weapon Damage")&&x.push("wd"),e.dispatch({job:_.jobAbbrev,level:_.level,spellSpeed:w,skillSpeed:y,wd:O.get("Weapon Damage"),criticalHit:O.get("CRT"),directHit:O.get("DH"),determination:O.get("DET"),piety:O.get("PIE"),tenacity:O.get("TEN"),main:D}),e.setImportedFields(x),c(!0)}else throw console.error(p),new Error("etro load failed (please check your link)")}else if(T&&T.hostname==="xivgear.app"){const g=T.searchParams.get("page");if(!g)throw new Error("xivgear link must be to a specific set (hover ? in URL input box for details)");const p=g.startsWith("sl|")?g.substr(3):g;S.append("Content-Type","application/json");const _=await fetch("https://api.xivgear.app/fulldata/"+p,{method:"GET",headers:S});if(_.ok){const O=await _.json();if(!(O.job in dt))throw new Error("Imported gearset was for a job ("+O.job+") that XIV in the Shell doesn't support");const D=O.sets[0].computedStats,L=Math.max(...["strength","dexterity","intelligence","mind"].map(x=>D[x]??0)).toString(),w=Math.max(D.wdPhys??0,D.wdMag??0).toString(),y={job:O.job,level:O.level,spellSpeed:D.spellspeed,skillSpeed:D.skillspeed,criticalHit:D.crit,directHit:D.dhit,determination:D.determination,piety:D.piety,tenacity:D.tenacity,wd:w,main:L};e.dispatch(y),e.setImportedFields(Object.keys(y)),c(!0)}else throw console.error("xivgear load failed: "+_),new Error("xivgear load failed (please check your link)")}else{const g=n.split(/\s+/);if(g.length>1){const p={STR:"",DEX:"",INT:"",MND:"",VIT:"",CRT:"",DHT:"",DET:"",SKS:"",SPS:"",TEN:"",PIE:"",CMS:"",CRL:"",CP:"",GTH:"",PCP:"",GP:"",PDMG:"",MDMG:"",DLY:""},_=new Map;for(let L=0;L<g.length-1;L+=2)_.set(g[L],g[L+1]);const O=g[1],D={spellSpeed:_.get(p.SPS),skillSpeed:_.get(p.SKS),criticalHit:_.get(p.CRT),directHit:_.get(p.DHT),determination:_.get(p.DET),piety:_.get(p.PIE),tenacity:_.get(p.TEN),wd:_.get(p.PDMG)??_.get(p.MDMG),main:O};Object.keys(D).forEach(L=>{D[L]===void 0&&delete D[L]}),e.dispatch(D),e.setImportedFields(Object.keys(D)),c(!0)}else throw new Error("Invalid input (must be a link from etro.gg or xivgear.app, or an exported string copied from ffxiv-gearing)")}}catch(g){console.error(g),window.alert(g.message)}},f=l.jsx("a",{href:"https://etro.gg",target:"_blank",rel:"noreferrer",children:"etro"}),h=l.jsx("a",{href:"https://xivgear.app",target:"_blank",rel:"noreferrer",children:"xivgear"}),m=l.jsx("a",{href:"https://asvel.github.io/ffxiv-gearing/",target:"_blank",rel:"noreferrer",children:"ffxiv-gearing"});return l.jsxs("form",{onSubmit:d,children:[N({en:l.jsxs("span",{children:["Load stats from ",f,"/",h,"/",m,":"," "]}),zh:l.jsxs("span",{children:["",f,"",h,"",m,""]})}),l.jsx(ze,{topic:"gearImport",content:l.jsxs(l.Fragment,{children:[l.jsx("p",{children:N({en:l.jsxs("span",{children:["Enter and ",l.jsx($a,{text:"Load"})," a link to a gearset from xivgear.app or etro.gg or attribute from ffxiv-gearing, edit the rest of config, then ",l.jsx($a,{text:"apply and reset"}),"."]}),zh:l.jsxs("span",{children:["xivgear.appetro.ggffxiv-gearing",l.jsx($a,{text:""}),"",l.jsx($a,{text:""}),""]})})}),l.jsx("p",{children:N({en:"etro: Copy/paste the link to the set (example: https://etro.gg/gearset/e13d5960-4794-4dc4-b273-24ecfed6745e)",zh:"etrohttps://etro.gg/gearset/e13d5960-4794-4dc4-b273-24ecfed6745e"})}),l.jsx("p",{children:N({en:'xivgear: At the top of the page, click "Export" -> "Selected Set" -> "Link to This Set" -> "Generate" (example: https://xivgear.app/?page=sl%7C143f3245-c35b-4391-8b2b-db5cc1a8de9a)',zh:'xivgear "Export" -> "Selected Set" -> "Link to This Set" -> "Generate"https://xivgear.app/?page=sl%7C143f3245-c35b-4391-8b2b-db5cc1a8de9a'})}),l.jsx("p",{children:N({en:l.jsxs(l.Fragment,{children:["ffxiv-gearing: Click the three dots to the right of the race selector option at the bottom of the page, then click the",l.jsx($a,{text:"Copy Gear Total Attribute Value"}),"option. Note that ffxiv-gearing does not export the gearset's job, so you will need to configure it manually. (example:  6450  3595  3174  1176  420  568  7513  158  2.80)"]}),zh:l.jsxs(l.Fragment,{children:["ffxiv-gearing",l.jsx($a,{text:""}),"",l.jsx($a,{text:""}),"ffxiv-gearing 6450  3595  3174  1176  420  568  7513  158  2.80"]})})})]})}),l.jsxs("div",{style:{position:"relative",marginTop:5},children:[l.jsx(jt,{style:{display:"inline-block"},width:25,description:"",onChange:R=>o(R)}),l.jsx("span",{children:" "}),l.jsx("input",{style:{display:"inline-block"},type:"submit",value:N({en:"Load",zh:""})}),l.jsx(ZM,{style:{display:s?"inline":"none",color:t.success,position:"relative",top:4,marginLeft:8}})]})]})}function CN(e,t,n,o){const s=parseInt(n),c=parseInt(e),d=parseFloat(t);let f,h;if(isNaN(s)||isNaN(c)||isNaN(d)||c<ut.getSubstatBase(s))f="n/a",h="n/a";else{const m=ut.preTaxGcd(s,c,2.5,o);f=m.toFixed(2),h=ut.afterFpsTax(d,m).toFixed(3)}return{gcdStr:f,taxedGcdStr:h}}function H2(e){const t=new Map(e.map(d=>[d.type,d]));if(t.has("ASTRAL_FIRE")&&t.has("UMBRAL_ICE")){const d=t.get("ASTRAL_FIRE").stacks,f=t.get("UMBRAL_ICE").stacks;if(d>0&&f>0)return window.alert("shouldn't have both AF and UI stacks"),!1}let n=0,o=0,s=0;if(t.has("ASTRAL_FIRE")&&(n=t.get("ASTRAL_FIRE").stacks),t.has("UMBRAL_ICE")&&(o=t.get("UMBRAL_ICE").stacks),t.has("UMBRAL_HEART")&&(s=t.get("UMBRAL_HEART").stacks),s>0&&n===0&&o===0)return window.alert("since there's at least one UH stack, there should also be Enochian and AF or UI"),!1;let c=!1;return(n>0||o>0||s>0)&&(c=!0),t.has("POLYGLOT")&&t.get("POLYGLOT").timeTillFullOrDrop>0&&!c?(window.alert("since a timer for polyglot is set (time till next stack > 0), there must also be AF/UI"),!1):!0}function k2(){const e=En(C.useContext(pa)),[t,n]=C.useState(void 0),[o,s]=C.useState(Do.AllaganGcdFormula),[c,d]=C.useState([]),[f,h]=C.useState("0"),[m,R]=C.useState("0"),[T,S]=C.useState(!0),g=me=>{G(!0),d(me),O(me)},[p,_]=C.useState("NEVER"),O=me=>{const Ce=new Set(me.map(_e=>_e.type)),ge=Qi(y.job).keys().find(_e=>!Ce.has(_e))??"NEVER";_(ge)},[D,L]=C.useState(!1);function w(me,Ce){const ge={...me,...Ce};if(!Object.is(ge,me)){if(ge.dirty=Ce.dirty??!0,Ce.job!==void 0&&Ce.job!==me.job){const _e=new ci(AR(Ce.job,parseInt(Ce.level??me.level))),De=yr(_e).inherentSpeedModifier();if(n(De),Ce.job===I.record.config?.job)Object.assign(ge,I.gameConfig.serialized()),d(I.gameConfig.initialResourceOverrides);else{d([]);const Be=Qi(Ce.job).keys().toArray()?.[0]??"NEVER";_(Be),Object.assign(ge,IP(Ce.job))}}if(Ce.level!==void 0&&Ce.level!==me.level){const _e=new ci(AR(me.job,parseInt(Ce.level))),De=yr(_e).inherentSpeedModifier();n(De)}L(parseInt(ge.level)!==I.gameConfig.level||ge.job!==I.gameConfig.job)}return ge}const[y,x]=C.useReducer(w,{job:"BLM",level:`${$e.lvl100}`,spellSpeed:"0",skillSpeed:"0",criticalHit:"0",directHit:"0",determination:"0",piety:"0",animationLock:"0",fps:"0",gcdSkillCorrection:"0",timeTillFirstManaTick:"0",countdown:"0",randomSeed:"",procMode:hn.RNG,tenacity:"0",wd:"0",main:"0",dirty:!1}),G=me=>x({dirty:me}),B=me=>Ce=>x({[me]:Ce}),[Y,X]=C.useState(!1),ie=Object.fromEntries(Object.keys(y).map(me=>[me,!1])),[oe,j]=C.useState(ie),$=me=>{j({...oe,...Object.fromEntries(me.map(Ce=>[Ce,!0]))})},Ee=me=>{j({...oe,[me]:!1})},V=()=>{j(ie),X(!1)};C.useEffect(()=>{cD=me=>{s(me.shellVersion),g(me.initialResourceOverrides),x({...Object.fromEntries(Object.entries(me).flatMap(([Ce,ge])=>Ce!=="initialResourceOverrides"?[[Ce,ge.toString()]]:[]))}),G(!1),V(),O(me.initialResourceOverrides)}});const P=me=>oe[me]?e.success:e.text,K=l.jsxs("div",{style:{marginBottom:10},children:[l.jsx("span",{children:N({en:"job: ",zh:""})}),l.jsx("select",{style:{outline:"none",color:P("job")},value:y.job,onChange:me=>{Ee("job"),x({job:me.target.value})},children:Lo.filter(me=>dt[me].implementationLevel!=="UNIMPLEMENTED").map(me=>{const Ce=N({en:me,zh:dt[me].zh}),ge=dt[me].implementationLevel;return ge!=="LIVE"?l.jsx("option",{value:me,children:Ce+` (${N(oC[ge].label??{en:""})})`},me):l.jsx("option",{value:me,children:Ce},me)})})]}),{gcdStr:ne,taxedGcdStr:fe}=CN(y.spellSpeed,y.fps,y.level,t),{gcdStr:M,taxedGcdStr:ee}=CN(y.skillSpeed,y.fps,y.level,t),ce=o>=Do.FpsTax?e.text:e.warning,W=y.job,z=dt[W].role==="CASTER"||dt[W].role==="HEALER",Q={en:z?"spell":"skill",zh:z?"":""},H=me=>ut.preTaxGcd(parseFloat(y.level),parseFloat(z?y.spellSpeed:y.skillSpeed),me,t),Z=me=>ut.afterFpsTax(parseFloat(y.fps),H(me)),ae=l.jsxs("div",{children:[l.jsx("style",{children:O2(e.bgHighContrast)}),l.jsx("div",{style:{marginBottom:10},children:N({en:`Preview numbers based on your current ${Q.en} speed and FPS input:`,zh:`${Q.zh}`})}),l.jsx("table",{className:"castTimeTable",children:l.jsxs("tbody",{children:[l.jsxs("tr",{children:[l.jsx("th",{children:N({en:"GCD time",zh:"GCD"})}),l.jsx("th",{children:N({en:"After FPS tax",zh:""})})]}),[2.5,3,3.5,4].map((me,Ce)=>l.jsxs("tr",{children:[l.jsxs("td",{children:[H(me).toFixed(2)," (",me.toFixed(2)," ",N({en:"base",zh:""}),")"]}),l.jsx("td",{children:Z(me).toFixed(3)})]},"gcdPreview"+Ce.toString()))]})})]}),he=(me,Ce)=>{if(me.preventDefault(),!Ce&&D){console.error("attempted to apply w/o reset, but job or level changed");return}if(H2(c)){let ge=y.randomSeed;if(ge.length===0){for(let $t=0;$t<4;$t++)ge+=Math.floor(Math.random()*10).toString();x({randomSeed:ge})}const _e=["spellSpeed","skillSpeed","criticalHit","directHit","determination","animationLock","fps","gcdSkillCorrection","timeTillFirstManaTick","countdown","level","wd","main","piety","tenacity"];if(_e.map($t=>isNaN(parseFloat(y[$t].toString()))).some($t=>$t)){window.alert("Some config fields are not numbers!");return}if(!(y.job in dt)){window.alert("Invalid job: "+y.job);return}const De=I.gameConfig.serialized(),Be=I.record.serialized();I.setConfigAndRestart({job:y.job,randomSeed:ge.trim(),procMode:y.procMode,initialResourceOverrides:c,...Object.fromEntries(_e.map($t=>[$t,parseFloat(y[$t].toString())]))},Ce),I.undoStack.push(new AP(De,I.gameConfig.serialized(),Ce?Be:void 0)),G(!1),L(!1),V(),I.updateAllDisplay(),I.scrollToTime()}},Ne=["criticalHit","directHit","determination","piety","animationLock"].map(me=>l.jsx(L2,{name:me,description:iu(me),initial:y[me].toString(),dispatch:x,imported:oe[me],removeImportedField:Ce=>Ee(Ce)},me)),Me=l.jsxs("div",{style:{marginBottom:16},children:[l.jsxs("div",{children:[l.jsx("span",{children:N({en:"level: ",zh:""})}),l.jsxs("select",{style:{outline:"none",color:P("level")},value:y.level,onChange:me=>x({level:me.target.value}),children:[(y.level==="100"||W!=="BLU")&&l.jsx("option",{value:$e.lvl100,children:"100"},$e.lvl100),(y.level==="90"||W!=="BLU")&&l.jsx("option",{value:$e.lvl90,children:"90"},$e.lvl90),l.jsx("option",{value:$e.lvl80,children:"80"},$e.lvl80),l.jsx("option",{value:$e.lvl70,children:"70"},$e.lvl70)]})]}),l.jsxs("div",{children:[l.jsx(jt,{style:{display:"inline-block",color:P("spellSpeed")},defaultValue:y.spellSpeed,description:iu("spellSpeed"),onChange:B("spellSpeed")}),l.jsxs("span",{children:[" ","(GCD: ",ne," ",l.jsx(ze,{topic:"gcdPreview",content:l.jsxs(l.Fragment,{children:[l.jsx("p",{children:N({en:"Preview of displayed GCD based on your spell speed.",zh:"GCD."})}),l.jsx("p",{children:N({en:`Measured average GCD should be ${fe} due to FPS tax.`,zh:`GCD${fe}`})})]})}),")"]})]}),l.jsxs("div",{children:[l.jsx(jt,{style:{display:"inline-block",color:P("skillSpeed")},defaultValue:y.skillSpeed,description:iu("skillSpeed"),onChange:B("skillSpeed")}),l.jsxs("span",{children:[" ","(GCD: ",M," ",l.jsx(ze,{topic:"sksGcdPreview",content:l.jsxs(l.Fragment,{children:[l.jsx("p",{children:N({en:"Preview of displayed GCD based on your skill speed.",zh:"GCD."})}),l.jsx("p",{children:N({en:`Measured average GCD should be ${ee} due to FPS tax.`,zh:`GCD${ee}`})})]})}),")"]})]}),Ne,l.jsxs("div",{children:[l.jsx(jt,{componentColor:ce,style:{display:"inline-block"},defaultValue:y.fps,description:iu("fps"),onChange:B("fps")}),l.jsxs("span",{children:[" ","(",N({en:`${H(2.5).toFixed(2)}s w/ tax`,zh:`${H(2.5).toFixed(2)}s+`}),": ",Z(2.5).toFixed(3)," ",l.jsx(ze,{topic:"gcdTaxPreview",content:ae}),")"]})]}),l.jsx(jt,{componentColor:ce,defaultValue:y.gcdSkillCorrection,description:l.jsxs("span",{children:[N({en:"GCD correction",zh:"GCD"})," ",l.jsx(ze,{topic:"cast-time-correction",content:N({en:"Leaving this at 0 will probably give you the most accurate simulation. But if you want to manually correct your GCD skill durations (including casts) for whatever reason, you can put a small number (can be negative)",zh:"0GCD"})}),":"," "]}),onChange:B("gcdSkillCorrection")}),l.jsx(jt,{defaultValue:y.timeTillFirstManaTick,description:N({en:"time till first MP tick: ",zh:""}),onChange:B("timeTillFirstManaTick")}),l.jsx(jt,{defaultValue:y.countdown,description:l.jsxs("span",{children:[N({en:"countdown ",zh:" "}),l.jsx(ze,{topic:"countdown",content:N({en:"can use a negative countdown to start from a specific time of fight",zh:""})}),":"," "]}),onChange:B("countdown")}),l.jsx(jt,{defaultValue:y.randomSeed,description:l.jsxs("span",{children:[N({en:"random seed ",zh:" "}),l.jsx(ze,{topic:"randomSeed",content:N({en:"can be anything, or leave empty to get 4 random digits.",zh:"4"})}),":"," "]}),onChange:B("randomSeed")}),l.jsxs("div",{children:[l.jsxs("span",{children:[N({en:"proc mode ",zh:"BUFF "}),l.jsx(ze,{topic:"procMode",content:N({en:"Default RNG: 40% Firestarter",zh:"RNG40%AlwaysNever"})}),":"," "]}),l.jsxs("select",{style:{outline:"none"},value:y.procMode,onChange:me=>x({procMode:me.target.value}),children:[l.jsx("option",{value:hn.RNG,children:"RNG"},hn.RNG),l.jsx("option",{value:hn.Never,children:"Never"},hn.Never),l.jsx("option",{value:hn.Always,children:"Always"},hn.Always)]})]}),l.jsx(y2,{job:y.job,initialResourceOverrides:c,overrideTimer:f,overrideStacks:m,overrideEnabled:T,setInitialResourceOverrides:g,selectedOverrideResource:p,setSelectedOverrideResource:_,setOverrideTimer:h,setOverrideStacks:R,setOverrideEnabled:S})]});return l.jsxs("div",{style:{marginBottom:20},children:[l.jsx(x2,{imported:Y,setImported:X,setImportedFields:$,dispatch:x}),l.jsx("br",{}),K,l.jsx(v2,{job:I.getActiveJob(),dirty:y.dirty}),Me,l.jsx("p",{style:{paddingBottom:5},children:N({en:"You can also import/export fights from/to local files at the bottom of the page.",zh:""})}),l.jsx("div",{className:"invisibleScrollbar",style:{boxSizing:"border-box",width:"100%",position:"absolute",paddingRight:5,paddingLeft:5,bottom:0,left:0,overflowY:"scroll"},children:l.jsxs("div",{style:{width:"100%",boxSizing:"border-box",backgroundColor:e.background,borderTop:"1px solid "+e.bgMediumContrast,paddingTop:5,paddingBottom:5,display:"flex",flexDirection:"row",justifyContent:"space-between",gap:5},children:[l.jsxs("button",{onClick:me=>he(me,!1),style:{width:"100%",fontWeight:!D&&y.dirty?"bold":"normal",textDecoration:D?"line-through":void 0},disabled:D,children:[N({en:"apply",zh:""}),D&&" ",D&&l.jsx(ze,{topic:"applyWithoutReset",content:N({en:"Must reset timeline because job or level changed.",zh:""})}),!D&&y.dirty?"*":""]}),l.jsxs("button",{onClick:me=>he(me,!0),style:{width:"100%",fontWeight:y.dirty?"bold":"normal"},children:[N({en:"apply and reset",zh:""}),y.dirty?"*":""]})]})})]})}function uD(e){let t=Lo[0],n=0;return Lo.forEach(o=>{const s=e.reduce((c,d)=>uH(o,d)?c+1:c,0);s>n&&(t=o,n=s)}),t}class U2{presetLines=[];constructor(){this.#t()}#e(){gt("presetLines",JSON.stringify(this.serialized()))}#t(){const t=Tt("presetLines");if(t!==null){const n=JSON.parse(t);return this.deserializeAndAppend(n),!0}return!1}serialized(){return{fileType:di.SkillSequencePresets,presets:this.presetLines.map(({actions:t,job:n})=>t.serialized())}}deserializeAndAppend(t){for(const n of t.presets){const o=Gr.deserialize(n.actions);o.name=n.name;const s=o.actions.flatMap(c=>c.info.type===ke.Skill?[c.info.skillName]:[]);this.addLine(o,n.job??uD(s))}}getLinesForJob(t){return this.presetLines.flatMap(({actions:n,job:o})=>o===t?[n]:[])}addLine(t,n){this.presetLines.push({actions:t,job:n}),Tl(),this.#e()}deleteLine(t){for(let n=0;n<this.presetLines.length;n++)if(this.presetLines[n].actions===t){this.presetLines.splice(n,1),Tl(),this.#e();return}console.assert(!1)}deleteAllLines(){this.presetLines=[],Tl(),this.#e()}}const w2=new Set(["BLIZZARD","FIRE","BLIZZARD_II","FIRE_II","BLIZZARD_III","FIRE_III","FREEZE","FLARE","BLIZZARD_IV","FIRE_IV","DESPAIR","HIGH_FIRE_II","HIGH_BLIZZARD_II","FLARE_STAR"]),P2=new Set(["FOUL","XENOGLOSSY","PARADOX"]),cl=new Set([]),Ja=e=>I.getUntargetableMask()&&I.timeline.duringUntargetable(e),qr=(e,t)=>I.getUntargetableMask()?I.timeline.getTargetableDurationBetween(e,t):t-e;function as(e){return e.info.type===ke.Skill&&I.game.dotSkills.includes(e.info.skillName)}function G2(e,t,n){console.assert(as(e),`${e.getNameForMessage()} is not registered as a dot skill`);const o=e.getInitialPotency(),s={castTime:e.tmp_startLockTime?e.tmp_startLockTime-I.gameConfig.countdown:0,applicationTime:e.applicationTime?e.applicationTime-I.gameConfig.countdown:0,displayedModifiers:[],gap:0,override:0,mainPotencyHit:!0,baseMainPotency:0,baseDotPotency:0,initialHitCalculationModifiers:[],tickCalculationModifiers:[],totalNumTicks:0,numHitTicks:0,potencyWithoutPot:0,potPotency:0,partyBuffPotency:0,mainHitFalloff:o?.falloff??0};s.gap=e.getOverTimeGap(t,"damage",n),s.override=e.getOverTimeOverrideAmount(t,"damage",n),s.baseMainPotency=o?.base??0,s.initialHitCalculationModifiers=o?.getDisplayedModifiers([n])??[],s.mainPotencyHit=e.hitBoss(Ja),s.tickCalculationModifiers=s.initialHitCalculationModifiers.filter(h=>h.source!==U.COMBO&&h.source!==U.POSITIONAL),t==="WILDFIRE"&&s.displayedModifiers.push(U.NO_CDH);for(let h=0;h<s.initialHitCalculationModifiers.length;h++){const m=s.initialHitCalculationModifiers[h].source;[U.ENO,U.FUGETSU,U.NO_MERCY,U.POWER_SURGE,U.LANCE_CHARGE,U.LIFE_OF_THE_DRAGON,U.BATTLE_LITANY,U.FIGHT_OR_FLIGHT,U.MOON_FLUTE,U.WHISTLE,U.BRISTLE,U.TINGLEA,U.TINGLEB,U.DIVINATION,U.CHAIN_STRAT].includes(m)&&s.displayedModifiers.push(m)}e.getDotPotencies(t).forEach(h=>{h.hasResolved()&&h.hasTarget(n)&&(s.totalNumTicks++,s.baseDotPotency=h.base,h.hasHitBoss(Ja)&&s.numHitTicks++)});const c=e.getPotency({tincturePotencyMultiplier:1,includePartyBuffs:!1,untargetable:Ja,includeSplash:!1,targetNumber:n}).applied,d=e.getPotency({tincturePotencyMultiplier:I.getTincturePotencyMultiplier(),includePartyBuffs:!1,untargetable:Ja,includeSplash:!1,targetNumber:n}).applied,f=e.getPotency({tincturePotencyMultiplier:I.getTincturePotencyMultiplier(),includePartyBuffs:!0,untargetable:Ja,includeSplash:!1,targetNumber:n}).applied;return s.potencyWithoutPot=c,s.potPotency=d-c,s.partyBuffPotency=f-d,s}function B2(e){const t={basePotency:0,displayedModifiers:[],calculationModifiers:[],falloff:1,targetList:[1]};if(e.info.type===ke.Skill){const n=e.info.skillName,o=e.getInitialPotency(),s=o?.getDisplayedModifiers(e.targetList);if(o)if(t.targetList=e.targetList,t.falloff=o.falloff??1,w2.has(n)){t.basePotency=o.base,t.calculationModifiers=s;for(const c of t.calculationModifiers){const d=c.source;if(d!==U.ENO&&d!==U.POT){t.displayedModifiers.push(d);break}}}else if(P2.has(n))for(const c of o.getDisplayedModifiers(e.targetList)){const d=c.source;if(d===U.ENO){t.basePotency=o.base,t.displayedModifiers=[d],t.calculationModifiers=s;break}}else if(as(e))t.basePotency=o.base,e.info.targetList=o.targetList;else{t.basePotency=o.base;for(const c of s){const d=c.source;d!==U.POT&&(t.displayedModifiers.push(d),t.calculationModifiers.push(c))}}return t}else return console.assert(!1),t}function F2(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function j2(e,t){const n=B2(t),o={mainTableIndex:-1,expandedNode:n};for(let s=0;s<e.length;s++)if(t.info.type===ke.Skill&&t.info.skillName===e[s].skillName&&F2(n.displayedModifiers,e[s].displayedModifiers)&&t.targetList.length===e[s].targetCount)return o.mainTableIndex=s,o;return o}function ui(e){return!cl.has(e)}function z2(){return cl.size===0}function bN(e){e.include&&cl.has(e.skillNameOrDoT)?(cl.delete(e.skillNameOrDoT),e.skillNameOrDoT==="DoT"?I.game.dotSkills.forEach(t=>cl.delete(t)):I.game.dotSkills.includes(e.skillNameOrDoT)&&cl.delete("DoT")):(cl.add(e.skillNameOrDoT),e.skillNameOrDoT!=="DoT"&&I.game.dotSkills.includes(e.skillNameOrDoT)&&cl.add("DoT")),I.displayCurrentState(),I.updateStats()}function Y2(e){const t={totalDuration:0,targetableDuration:0,potency:{applied:0,pending:0},gcdSkills:{applied:0,pending:0}},n=I.record.getFirstSelection(),o=I.record.getLastSelection();if(n&&o&&n.tmp_startLockTime!==void 0&&o.tmp_endLockTime!==void 0){t.totalDuration=o.tmp_endLockTime-n.tmp_startLockTime;const s=I.gameConfig.countdown;t.targetableDuration=qr(n.tmp_startLockTime-s,o.tmp_endLockTime-s)}return I.record.iterateSelected(s=>{if(s.info.type===ke.Skill&&!(s.info.skillName in yo)){const c=ui(s.info.skillName);I.game.skillsList.get(s.info.skillName).cdName==="cd_GCD"&&c&&(s.hitBoss(Ja)?t.gcdSkills.applied++:s.resolved()||t.gcdSkills.pending++);const f=s.getPotency({tincturePotencyMultiplier:I.getTincturePotencyMultiplier(),untargetable:Ja,includePartyBuffs:!0,excludeDoT:as(s)&&!ui("DoT"),includeSplash:!0});c&&(t.potency.applied+=f.applied,t.potency.pending+=f.snapshottedButPending)}}),t}function K2(e){let t=cu.Normal;I.displayingUpToDateGameState||(t=cu.Historical),I.record.getFirstSelection()&&(t=cu.Selected);const n={applied:0,pending:0},o={applied:0,pending:0},s=[],c={totalPotencyWithoutPot:0,totalPotPotency:0,totalPartyBuffPotency:0},d=new Map,f=new Map,h=m=>{if(m.info.type===ke.Skill){const R=m.info.skillName,T=ui(R),S=R in yo;I.game.skillsList.get(R).cdName==="cd_GCD"&&T&&(m.hitBoss(Ja)?o.applied++:m.resolved()||o.pending++);const p=m.getPotency({tincturePotencyMultiplier:I.getTincturePotencyMultiplier(),untargetable:Ja,includePartyBuffs:!0,includeSplash:!0,excludeDoT:as(m)&&!ui("DoT")});if(T&&!S&&(n.applied+=p.applied,n.pending+=p.snapshottedButPending),m.resolved()){const _=j2(s,m);_.mainTableIndex<0&&(s.push({skillName:R,displayedModifiers:_.expandedNode.displayedModifiers,basePotency:S?0:_.expandedNode.basePotency,calculationModifiers:_.expandedNode.calculationModifiers,usageCount:0,hitCount:0,totalPotencyWithoutPot:0,showPotency:m.anyPotencies(),potPotency:0,potCount:0,partyBuffPotency:0,falloff:_.expandedNode.falloff,targetCount:_.expandedNode.targetList.length}),_.mainTableIndex=s.length-1);const O=m.hitBoss(Ja);if(s[_.mainTableIndex].usageCount+=1,O&&(s[_.mainTableIndex].hitCount+=1),S)return;const D=m.getPotency({tincturePotencyMultiplier:1,untargetable:Ja,includePartyBuffs:!1,excludeDoT:as(m)&&!ui("DoT"),includeSplash:!0}).applied,L=m.getPotency({tincturePotencyMultiplier:I.getTincturePotencyMultiplier(),untargetable:Ja,includePartyBuffs:!1,excludeDoT:as(m)&&!ui("DoT"),includeSplash:!0}).applied,w=m.getPotency({tincturePotencyMultiplier:I.getTincturePotencyMultiplier(),untargetable:Ja,includePartyBuffs:!0,excludeDoT:as(m)&&!ui("DoT"),includeSplash:!0}).applied;s[_.mainTableIndex].totalPotencyWithoutPot+=D,s[_.mainTableIndex].potPotency+=L-D,s[_.mainTableIndex].partyBuffPotency+=w-L,O&&m.hasBuff(k.Tincture)&&(s[_.mainTableIndex].potCount+=1);let y=f.get(R)??0;y+=w,f.set(R,y),T&&(c.totalPotencyWithoutPot+=D,c.totalPotPotency+=L-D,c.totalPartyBuffPotency+=w-L),m.getAllDotPotencies().forEach((x,G)=>{let B=d.get(G);B||(B=new Map,d.set(G,B));const Y=I.game.excludedDoTs.includes(G);[...new Set(x.flatMap(ie=>ie.targetList))].sort().forEach(ie=>{let oe=B.get(ie);oe===void 0&&(oe={tableRows:[],summary:{cumulativeGap:0,cumulativeOverride:0,timeSinceLastDoTDropped:0,totalTicks:0,maxTicks:I.getMaxTicks(I.game.time,G,Y),dotCoverageTimeFraction:I.getDotCoverageTimeFraction(I.game.getDisplayTime(),G,ie),totalPotencyWithoutPot:0,totalPotPotency:0,totalPartyBuffPotency:0},lastDoT:void 0},B.set(ie,oe));const j=G2(m,G,ie);oe.tableRows.push(j),oe.lastDoT=m,oe.summary.cumulativeGap+=j.gap,oe.summary.cumulativeOverride+=j.override,oe.summary.totalTicks+=j.numHitTicks,oe.summary.totalPotencyWithoutPot+=j.potencyWithoutPot,oe.summary.totalPotPotency+=j.potPotency,oe.summary.totalPartyBuffPotency+=j.partyBuffPotency})})}}};return t===cu.Selected?I.record.iterateSelected(h):I.record.iterateAll(h),d.forEach((m,R)=>{m.forEach((T,S)=>{if(T.lastDoT){const g=T.lastDoT.applicationTime;console.assert(g!==void 0,`DoT node for ${R} was not resolved`);const p=g+I.game.getStatusDuration(R),_=qr(p,I.game.getDisplayTime()),O=I.game.getDisplayTime()-p;O>0&&(T.summary.cumulativeGap+=_,T.summary.timeSinceLastDoTDropped=O)}else{const g=qr(0,Math.max(0,I.game.getDisplayTime()));T.summary.cumulativeGap=g,T.summary.timeSinceLastDoTDropped=g}})}),s.sort((m,R)=>{if(m.showPotency!==R.showPotency){const T=m.showPotency?1:0;return(R.showPotency?1:0)-T}else if(m.skillName!==R.skillName){const T=f.get(m.skillName)??0,S=f.get(R.skillName)??0;return T===S?m.skillName.localeCompare(R.skillName):S-T}else{if(m.targetCount!==R.targetCount)return m.targetCount-R.targetCount;if(m.displayedModifiers.length!==R.displayedModifiers.length)return R.displayedModifiers.length-m.displayedModifiers.length;for(let T=0;T<m.displayedModifiers.length;T++){const S=m.displayedModifiers[T]-R.displayedModifiers[T];if(S!==0)return S}return 0}}),{time:I.game.time,tinctureBuffPercentage:e.tinctureBuffPercentage,totalPotency:n,lastDamageApplicationTime:e.lastDamageApplicationTime,countdown:I.gameConfig.countdown,gcdSkills:o,mainTable:s,mainTableSummary:c,dotTables:d,mode:t}}var cu=(e=>(e[e.Normal=0]="Normal",e[e.Historical=1]="Historical",e[e.Selected=2]="Selected",e))(cu||{});let CR=e=>{},dD=e=>{};function hD(e){const t=iH(e.buff),n=Jx(e.buff);return l.jsx("span",{style:{borderRadius:2,border:"1px solid "+n,fontSize:11,marginRight:4,padding:"1px 4px",background:n+"1f"},children:l.jsx("b",{style:{color:n},children:t})})}function bR(e){let t=e.basePotency,n=e.basePotency.toFixed(2)+N({en:"(base)",zh:"()"});e.explainUntargetable&&(n+=N({en:"(untargetable)",zh:"()"}));let o="";if(e.calc.forEach(s=>{s.kind==="adder"&&s.additiveAmount>0&&(t+=s.additiveAmount,o+=" + "+s.additiveAmount+"("+sp(s.source)+")")}),o&&(n="[ "+n+o+" ]"),e.calc.forEach(s=>{s.kind==="multiplier"&&s.potencyFactor!==1&&(t*=s.potencyFactor,n+="  "+s.potencyFactor+"("+sp(s.source)+")")}),e.targetCount&&e.falloff!==void 0&&e.targetCount>1){const s=1+(1-e.falloff)*(e.targetCount-1);n=`[ ${n} ]  ${s}(${e.targetCount}${N({en:" targets",zh:""})})`,t*=s}return l.jsxs("span",{style:{textDecoration:e.includeInStats?"none":"line-through"},children:[t.toFixed(2)," ",l.jsx(ze,{topic:e.helpTopic,content:n})]})}function V2(){const[e,t]=C.useState("8"),n=s=>{t(s);const c=parseFloat(s);isNaN(c)||(I.setTinctureBuffPercentage(c),gt("tinctureBuffPercentage",s))};C.useEffect(()=>{const s=Tt("tinctureBuffPercentage");s!==null&&n(s)},[]);const o=l.jsxs("span",{children:[N({en:"exclude damage when untargetable",zh:"Boss0"})," ",l.jsx(ze,{topic:"untargetableMask",content:l.jsxs("div",{children:[l.jsx("div",{className:"paragraph",children:N({en:"Having this checked will exclude damages from untargetable phases.",zh:"Boss"})}),l.jsx("div",{className:"paragraph",children:N({en:'You can mark up such phases using timeline markers of type "Untargetable".',zh:"  "})}),l.jsx("div",{className:"paragraph",children:N({en:"This is just a statistics helper though. For example it doesn't prevent you from using skills when the boss is untargetable.",zh:"  "})})]})})]});return l.jsxs("div",{children:[l.jsx(jt,{defaultValue:e,description:N({en:" tincture potency buff ",zh:" "}),onChange:n,width:2,style:{display:"inline"}}),l.jsx("span",{children:"%"}),l.jsx(su,{uniqueName:"untargetableMask",label:o,onChange:s=>{I.setUntargetableMask(s)}})]})}const fD="0.375em 0.75em",Et=function(e){return{verticalAlign:"middle",boxSizing:"border-box",display:"inline-block",width:e+"%",padding:fD}};function W2(e){const t=St(),n=e.row.displayedModifiers.map((S,g)=>l.jsx(hD,{buff:S},g)),o=e.row.gap.toFixed(3),s=e.row.gap>0?l.jsx("span",{children:o}):l.jsx("span",{}),c=e.row.override.toFixed(3),d=e.row.override>0?l.jsx("span",{children:c}):l.jsx("span",{}),f=l.jsx(bR,{basePotency:e.row.mainPotencyHit?e.row.baseMainPotency:0,includeInStats:!0,explainUntargetable:!e.row.mainPotencyHit,helpTopic:e.name+"Table-main-"+e.targetNumber,calc:e.row.initialHitCalculationModifiers,targetCount:1,falloff:e.row.mainHitFalloff}),h=l.jsx(bR,{basePotency:e.row.baseDotPotency,includeInStats:!0,helpTopic:e.name+"Table-dot-"+e.targetNumber,calc:e.row.tickCalculationModifiers,targetCount:1,falloff:0}),m=e.row.totalNumTicks-e.row.numHitTicks,R=l.jsxs("span",{children:[e.row.numHitTicks,m>0?l.jsxs("span",{style:{color:t.timeline.untargetableDamageMark+"af"},children:[" ","+",m," ",l.jsx(ze,{topic:e.name+"Table-numUntargetableTicks-"+e.targetNumber,content:N({en:"tick(s) when untargetable",zh:"BossDoT"})})]}):void 0]}),T=l.jsxs("span",{children:[e.row.potencyWithoutPot.toFixed(2),e.row.potPotency>0?l.jsxs("span",{style:{color:t.timeline.potCover},children:[" ","+",e.row.potPotency.toFixed(2),"(",N({en:"pot",zh:""}),")"]}):void 0,e.row.partyBuffPotency>0?l.jsxs("span",{style:{color:t.accent},children:[" ","+",e.row.partyBuffPotency.toFixed(2),"(",N({en:"party",zh:""}),")"]}):void 0]});return l.jsx("div",{style:{textAlign:"left",position:"relative",borderTop:"1px solid "+t.bgMediumContrast},children:e.isPetTracker?l.jsxs(l.Fragment,{children:[l.jsx("div",{style:Et(3)}),l.jsx("div",{style:Et(12),children:e.row.castTime.toFixed(3)}),l.jsx("div",{style:Et(27),children:n}),l.jsx("div",{style:Et(20),children:h}),l.jsx("div",{style:Et(8),children:R}),l.jsx("div",{style:Et(30),children:T})]}):l.jsxs(l.Fragment,{children:[l.jsx("div",{style:Et(8),children:e.row.castTime.toFixed(3)}),l.jsx("div",{style:Et(8),children:e.row.applicationTime.toFixed(3)}),l.jsx("div",{style:Et(12),children:n}),l.jsx("div",{style:Et(10),children:s}),l.jsx("div",{style:Et(10),children:d}),l.jsx("div",{style:Et(10),children:f}),l.jsx("div",{style:Et(10),children:h}),l.jsx("div",{style:Et(8),children:R}),l.jsx("div",{style:Et(24),children:T})]})})}function X2(e){const t=e.summary,n=e.headerCellStyle,o=`${Ke(e.dotName)}  Boss ${e.targetNumber} ${e.dotHeaderSuffix}`,s=St(),c=Pe[e.dotName].isPetTracker,d=e.tableRows.map((f,h)=>l.jsx(W2,{name:e.dotName,targetNumber:e.targetNumber,row:f,isPetTracker:c},h));return l.jsxs("div",{style:{position:"relative",margin:"0 auto",marginBottom:40,maxWidth:960},children:[l.jsx("div",{style:{...Et(100),textAlign:"center",marginBottom:10},children:l.jsx("b",{style:{color:s.text},children:o})}),l.jsxs("div",{style:{outline:"1px solid "+s.bgMediumContrast},children:[l.jsxs("div",{children:[c&&l.jsx("div",{style:{display:"inline-block",width:"3%"}}),l.jsx("div",{style:{display:"inline-block",width:c?"12%":"8%"},children:l.jsx("span",{style:n,children:l.jsx("b",{children:N({en:"cast time",zh:""})})})}),!c&&l.jsx("div",{style:{display:"inline-block",width:"8%"},children:l.jsx("span",{style:n,children:l.jsx("b",{children:N({en:"application time",zh:""})})})}),l.jsx("div",{style:{display:"inline-block",width:c?"27%":"12%"},children:l.jsx("span",{style:n})}),!c&&l.jsx("div",{style:{display:"inline-block",width:"10%"},children:l.jsxs("span",{style:n,children:[l.jsxs("b",{children:[N({en:"gap",zh:"DoT"})," "]}),l.jsx(ze,{topic:`dot-gap-title-${e.dotName}-${e.targetNumber}`,content:N({en:l.jsxs("div",{children:[l.jsx("div",{className:"paragraph",children:"DoT coverage time gap since pull or previous application"}),l.jsx("div",{className:"paragraph",children:"The last row also includes gap at the beginning and end of the fight"})]}),zh:l.jsx("div",{children:"DoTDoT"})})})]})}),!c&&l.jsx("div",{style:{display:"inline-block",width:"10%"},children:l.jsxs("span",{style:n,children:[l.jsxs("b",{children:[N({en:"override",zh:"DoT"})," "]}),l.jsx(ze,{topic:`dot-override-title-${e.dotName}-${e.targetNumber}`,content:N({en:l.jsx("div",{children:"Overridden DoT time from previous application"}),zh:l.jsx("div",{children:"DoT"})})})]})}),!c&&l.jsx("div",{style:{display:"inline-block",width:"10%"},children:l.jsx("span",{style:n,children:l.jsx("b",{children:N({en:"initial",zh:""})})})}),l.jsx("div",{style:{display:"inline-block",width:c?"20%":"10%"},children:l.jsx("span",{style:n,children:l.jsx("b",{children:N(c?{en:"last hit potency",zh:""}:{en:"DoT",zh:"DoT"})})})}),l.jsx("div",{style:{display:"inline-block",width:"8%"},children:l.jsx("span",{style:n,children:l.jsx("b",{children:N(c?{en:"hits",zh:""}:{en:"ticks",zh:"DoT"})})})}),l.jsx("div",{style:{display:"inline-block",width:c?"30%":"24%"},children:l.jsx("span",{style:n,children:l.jsx("b",{children:N({en:"total",zh:""})})})})]}),d,l.jsxs("div",{style:{textAlign:"left",position:"relative",borderTop:"1px solid "+s.bgMediumContrast},children:[c?l.jsx("div",{style:Et(70)}):l.jsxs(l.Fragment,{children:[l.jsx("div",{style:Et(28)}),l.jsx("div",{style:Et(10),children:t.cumulativeGap.toFixed(3)}),l.jsx("div",{style:Et(10),children:t.cumulativeOverride.toFixed(3)}),l.jsx("div",{style:Et(20)}),l.jsx("div",{style:Et(8),children:I.game.fullTimeDoTs.includes(e.dotName)?l.jsxs(l.Fragment,{children:[t.totalTicks,"/",t.maxTicks]}):l.jsx(l.Fragment,{children:t.totalTicks})})]}),l.jsxs("div",{style:Et(24),children:[t.totalPotencyWithoutPot.toFixed(2),t.totalPotPotency>0?l.jsxs("span",{style:{color:s.timeline.potCover},children:[" ","+",t.totalPotPotency.toFixed(2),N({en:"(pot +"+e.tinctureBuffPercentage+"%)",zh:"( +"+e.tinctureBuffPercentage+"%)"})]}):void 0,t.totalPartyBuffPotency>0?l.jsxs("span",{style:{color:s.accent},children:[" ","+",t.totalPartyBuffPotency.toFixed(2),"(",N({en:"party",zh:""}),")"]}):void 0]})]})]})]})}class q2 extends Hn.Component{selected={totalDuration:0,targetableDuration:0,potency:{applied:0,pending:0},gcdSkills:{applied:0,pending:0}};data={time:0,tinctureBuffPercentage:0,countdown:0,totalPotency:{applied:0,pending:0},lastDamageApplicationTime:0,gcdSkills:{applied:0,pending:0},mainTable:[],mainTableSummary:{totalPotencyWithoutPot:0,totalPotPotency:0,totalPartyBuffPotency:0},dotTables:new Map,mode:0};static contextType=pa;constructor(t){super(t),CR=n=>{this.data={...this.data,...n},this.forceUpdate()},dD=n=>{this.selected={...this.selected,...n},this.forceUpdate()}}componentWillUnmount(){CR=t=>{}}render(){const t=En(this.context),n=z2(),o=N({en:": ",zh:""}),s=N({en:" (",zh:""}),c=N({en:") ",zh:""}),d=n?"":N({en:" (checked only)",zh:""}),f=this.data.lastDamageApplicationTime-this.data.countdown,h=qr(0,f),m=this.data.lastDamageApplicationTime>-this.data.countdown,R=m?f.toFixed(3).toString():"N/A";let T=N({en:"Total potency",zh:""}),S=N({en:"Selected potency",zh:""});if(this.data.tinctureBuffPercentage>0){const V=s+N({en:"pot +",zh:" +"})+this.data.tinctureBuffPercentage+"%"+c;T+=V,S+=V}T+=d,S+=d,T+=o+this.data.totalPotency.applied.toFixed(2),S+=o+this.selected.potency.applied.toFixed(2),this.data.totalPotency.pending>0&&(T+=s+this.data.totalPotency.pending.toFixed(2)+N({en:" pending",zh:""})+c),this.selected.potency.pending>0&&(S+=s+this.selected.potency.pending.toFixed(2)+N({en:" pending",zh:""})+c);let g=N({en:"GCD skills",zh:"GCD"})+d+o+this.data.gcdSkills.applied,p=N({en:"Selected GCD skills",zh:"GCD"})+d+o+this.selected.gcdSkills.applied;this.data.gcdSkills.pending>0&&(g+=s+"+"+this.data.gcdSkills.pending+N({en:" not yet applied",zh:""})+c),this.selected.gcdSkills.pending>0&&(p+=s+"+"+this.selected.gcdSkills.pending+N({en:" not yet applied",zh:""})+c);const _=I.game.overTimeEffectGroups.filter(V=>V.reportName&&!V.isHealing).map(V=>{const P=new Map;V.groupedEffects.forEach(ne=>{const fe=this.data.dotTables.get(ne.effectName);fe&&fe.forEach((M,ee)=>{P.has(ee)||P.set(ee,{uptime:0,totalTicks:0,maxTicks:0});const ce=P.get(ee);ce.uptime+=M.summary.dotCoverageTimeFraction,ce.totalTicks+=M.summary.totalTicks,ce.maxTicks=Math.max(ce.maxTicks,M.summary.maxTicks)})});const K=[];return P.forEach((ne,fe)=>{let M=V.reportName+N({en:` uptime (Boss ${fe})`,zh:`Boss ${fe}`})+o;const{uptime:ee,totalTicks:ce,maxTicks:W}=ne;M+=(ee*100).toFixed(2)+"%",M+=s+N({en:"ticks",zh:"DoT"})+o+ce+"/"+W+c,K.push(l.jsx("div",{children:M},`dot-uptime-${V.reportName}-${fe}`))}),K});let O;const D=this.selected.targetableDuration>0;this.selected.totalDuration>0&&(O=l.jsxs("div",{style:{flex:1,color:t.accent},children:[l.jsxs("div",{children:[N({en:"Selected duration",zh:""}),o,this.selected.totalDuration.toFixed(3)]}),l.jsx("div",{children:S}),l.jsxs("div",{children:[N({en:"Selected PPS",zh:"PPS"}),o,D?(this.selected.potency.applied/this.selected.targetableDuration).toFixed(2):"N/A"]}),l.jsx("div",{children:p})]}));const L=l.jsxs("div",{style:{display:"flex",marginBottom:10,flexDirection:"row"},children:[l.jsxs("div",{style:{flex:1},children:[l.jsxs("div",{style:{color:this.data.mode!==0?t.historical:t.text},children:[l.jsxs("div",{children:[N({en:"Last damage application time",zh:""}),o,R]}),l.jsx("div",{children:T}),l.jsxs("div",{children:["PPS"," ",l.jsx(ze,{topic:"ppsNotes",content:l.jsxs("div",{className:"toolTip",children:[l.jsx("div",{className:"paragraph",children:N({en:"(total applied potency of checked skills) / (total targetable duration from 0s until last damage application time).",zh:" / (0s - )"})}),l.jsx("div",{className:"paragraph",children:N({en:"could be inaccurate if any damage happens before pull, or if some damage's not applied yet",zh:"0sPPS"})})]})}),o,m?(this.data.totalPotency.applied/h).toFixed(2):"N/A"]}),l.jsx("div",{children:g}),_]}),l.jsxs("div",{style:{marginTop:10},children:[l.jsx(V2,{}),l.jsx(Sl,{fileFormat:Mo.Csv,getContentFn:()=>({body:I.getDamageLogCsv()}),filename:"damage-log",displayName:N({en:"download detailed damage log as CSV file",zh:"CSV"})})]})]}),O]}),w=V=>I.game.dotSkills.includes(V),y=V=>I.game.petSkills.includes(V),x=function(V){return w(V)?!0:["AUTOMATON_QUEEN","WILDFIRE",...Object.keys(yo)].includes(V)},G=function(V){const P=V.row.skillName===V.lastRowSkill,K=[];K.push(V.row.displayedModifiers.map((Z,ae)=>l.jsx(hD,{buff:Z},ae)));const ne=ui(V.row.skillName),fe=[];!P&&V.row.basePotency>0&&!(V.row.skillName in yo)&&fe.push(l.jsx("input",{type:"checkbox",style:{position:"relative",top:2,marginRight:10},checked:ne,onChange:()=>{bN({skillNameOrDoT:V.row.skillName,include:!ne})}},"main")),!P&&w(V.row.skillName)&&fe.push(l.jsx("input",{type:"checkbox",style:{position:"relative",top:2,marginRight:10},checked:ui("DoT"),onChange:()=>{bN({skillNameOrDoT:"DoT",include:!ui("DoT")})}},"dot"));let M;P||(M=l.jsxs("span",{children:[l.jsxs("span",{style:{textDecoration:ne?"none":"line-through",color:ne?t.text:t.bgHighContrast},children:[Wn(V.row.skillName)," "]}),w(V.row.skillName)&&l.jsxs(l.Fragment,{children:[l.jsxs("span",{style:{textDecoration:ui("DoT")?"none":"line-through",color:ui("DoT")?t.text:t.bgHighContrast},children:[y(V.row.skillName)?N({en:"(pet)",zh:""}):N({en:"(DoT)",zh:"DoT"})," "]}),l.jsx(ze,{topic:`potencyStats-${V.row.skillName}`,content:N({en:"See table below for details",zh:""})})]})]}));let ee;V.row.targetCount&&V.row.basePotency>0&&(ee=l.jsx("span",{style:{textDecoration:ne?"none":"line-through"},children:V.row.targetCount}));let ce;V.row.basePotency>0&&!x(V.row.skillName)&&(ce=l.jsx(bR,{includeInStats:ne,basePotency:V.row.basePotency,helpTopic:"mainTable-potencyCalc-"+V.key,calc:V.row.calculationModifiers,falloff:V.row.falloff,targetCount:V.row.targetCount}));const W=V.row.usageCount-V.row.hitCount,z=l.jsxs("span",{style:{textDecoration:ne?"none":"line-through"},children:[V.row.hitCount,W>0?l.jsxs("span",{style:{color:t.timeline.untargetableDamageMark+"af"},children:[" ","+",W," ",l.jsx(ze,{topic:"mainTable-numUntargetableUsages-"+V.key,content:N({en:"usage(s) when untargetable",zh:"Boss"})})]}):void 0]});let Q;V.row.showPotency&&!(V.row.skillName in yo)&&(Q=l.jsxs("span",{style:{textDecoration:ne?"none":"line-through"},children:[V.row.totalPotencyWithoutPot.toFixed(2),V.row.potPotency>0?l.jsxs("span",{style:{color:ne?t.timeline.potCover:t.bgHighContrast},children:[" ","+",V.row.potPotency.toFixed(2),"(",N({en:"pot",zh:""}),")(",V.row.potCount,")"]}):void 0,V.row.partyBuffPotency>0?l.jsxs("span",{style:{color:ne?t.accent:t.bgHighContrast},children:[" ","+",V.row.partyBuffPotency.toFixed(2),"(",N({en:"party",zh:""}),")"]}):void 0]}));const H={textAlign:"left",position:"relative",borderTop:P?"none":"1px solid "+t.bgMediumContrast};return ne||(H.color=t.bgHighContrast),l.jsxs("div",{style:H,children:[l.jsx("div",{style:Et(3),children:fe}),l.jsx("div",{style:Et(18),children:M}),l.jsx("div",{style:Et(8),children:ee}),l.jsx("div",{style:Et(19),children:K}),l.jsx("div",{style:Et(14),children:ce}),l.jsx("div",{style:Et(8),children:z}),l.jsx("div",{style:Et(30),children:Q})]},V.key)},B=[];for(let V=0;V<this.data.mainTable.length;V++)B.push(G({row:this.data.mainTable[V],key:V,lastRowSkill:V===0?void 0:this.data.mainTable[V-1].skillName}));const Y={display:"inline-block",padding:fD};let X=N(n?{en:"Applied Skills",zh:""}:{en:"Applied Skills (Checked Only)",zh:""}),ie="";if(this.data.mode===1){const V=(this.data.time-this.data.countdown).toFixed(3)+"s",P=s+N({en:"up till "+V,zh:""+V})+c;X+=P,ie=P}else if(this.data.mode===2){const V=s+N({en:"from selected skills",zh:""})+c;X+=V,ie+=V}let oe=t.text;this.data.mode===1?oe=t.historical:this.data.mode===2&&(oe=t.accent);const j=l.jsxs("div",{id:"damageTable",style:{position:"relative",margin:"0 auto",marginBottom:40,maxWidth:960},children:[l.jsx("div",{style:{...Et(100),textAlign:"center",marginBottom:10},children:l.jsx("b",{style:{color:oe},children:X})}),l.jsxs("div",{style:{outline:"1px solid "+t.bgMediumContrast},children:[l.jsxs("div",{children:[l.jsx("div",{style:{display:"inline-block",width:"21%"},children:l.jsx("span",{style:Y,children:l.jsx("b",{children:N({en:"skill",zh:""})})})}),l.jsx("div",{style:{display:"inline-block",width:"27%"},children:l.jsx("span",{style:Y,children:l.jsx("b",{children:N({en:"targets",zh:""})})})}),l.jsx("div",{style:{display:"inline-block",width:"14%"},children:l.jsx("span",{style:Y,children:l.jsx("b",{children:N({en:"potency",zh:""})})})}),l.jsx("div",{style:{display:"inline-block",width:"8%"},children:l.jsx("span",{style:Y,children:l.jsx("b",{children:N({en:"count",zh:""})})})}),l.jsx("div",{style:{display:"inline-block",width:"30%"},children:l.jsx("span",{style:Y,children:l.jsx("b",{children:N({en:"total",zh:""})})})})]}),B,l.jsxs("div",{style:{textAlign:"left",position:"relative",borderTop:"1px solid "+t.bgMediumContrast},children:[l.jsx("div",{style:Et(70)}),l.jsx("div",{style:Et(30),children:l.jsxs("span",{children:[this.data.mainTableSummary.totalPotencyWithoutPot.toFixed(2),this.data.mainTableSummary.totalPotPotency>0?l.jsxs("span",{style:{color:t.timeline.potCover},children:[" ","+",this.data.mainTableSummary.totalPotPotency.toFixed(2),N({en:" (pot +"+this.data.tinctureBuffPercentage+"%)",zh:"( +"+this.data.tinctureBuffPercentage+"%)"})]}):void 0,this.data.mainTableSummary.totalPartyBuffPotency>0?l.jsxs("span",{style:{color:t.accent},children:[" ","+",this.data.mainTableSummary.totalPartyBuffPotency.toFixed(2),"(",N({en:"party",zh:""}),")"]}):void 0]})})]})]})]}),$=[];let Ee=0;return this.data.dotTables.forEach((V,P)=>{V.forEach((K,ne)=>{const fe=this.data.dotTables.get(P)?.get(ne)?.summary;fe!==void 0&&$.push({targetNumber:ne,dotName:P,node:l.jsx(X2,{summary:fe,tableRows:K.tableRows,dotHeaderSuffix:ie,dotName:P,headerCellStyle:Y,targetNumber:ne,tinctureBuffPercentage:this.data.tinctureBuffPercentage},Ee++)})})}),$.sort((V,P)=>{const K=V.targetNumber-P.targetNumber;return K===0?V.dotName.localeCompare(P.dotName):K}),l.jsxs("div",{children:[L,l.jsxs("div",{children:[j,$.map(V=>V.node)]})]})}}const Pu=e=>{e.job==="RDM"&&e.tryConsumeResource("DUALCAST")&&I.reportWarning({kind:"custom",en:"dualcast dropped"})},Ui=e=>e.job!=="NIN"||!e.hasResourceAvailable("TEN_CHI_JIN"),wi=e=>{e.job==="NIN"&&e.hasResourceAvailable("MUDRA")&&e.gainStatus("BUNNY")};et(An,"INTERJECT",18,"cd_HEAD_GRAZE",{applicationDelay:0,cooldown:30,assetPath:"Role/Interject.png",startsAuto:!0});et(eo,"HEAD_GRAZE",24,"cd_HEAD_GRAZE",{applicationDelay:0,cooldown:30,assetPath:"Role/Head Graze.png"});An.forEach(e=>{Ve(e,"REPRISAL",1,{timeout:15})});Ye(An,"REPRISAL",22,"cd_REPRISAL",{rscType:"REPRISAL",applicationDelay:.62,cooldown:60,duration:e=>e.hasTraitUnlocked("ENHANCED_REPRISAL")&&15||10,assetPath:"Role/Reprisal.png",startsAuto:!0});sn.forEach(e=>{Ve(e,"FEINT",1,{timeout:15})});Ye(sn,"FEINT",22,"cd_FEINT",{rscType:"FEINT",applicationDelay:.537,cooldown:90,duration:e=>e.hasTraitUnlocked("ENHANCED_FEINT")&&15||10,assetPath:"Role/Feint.png",validateAttempt:Ui,onConfirm:wi});[...Cl,...Ti].forEach(e=>{Ve(e,"ADDLE",1,{timeout:15})});Ye([...Ti,...Cl],"ADDLE",8,"cd_ADDLE",{rscType:"ADDLE",applicationDelay:.621,cooldown:90,duration:e=>e.hasTraitUnlocked("ENHANCED_ADDLE")&&15||10,assetPath:"Role/Addle.png"});An.forEach(e=>{Ve(e,"RAMPART",1,{timeout:20})});Ye(An,"RAMPART",8,"cd_RAMPART",{rscType:"RAMPART",applicationDelay:.62,cooldown:90,assetPath:"Role/Rampart.png"});sn.forEach(e=>{Ve(e,"TRUE_NORTH",1,{timeout:10})});Ye(sn,"TRUE_NORTH",50,"cd_TRUE_NORTH",{rscType:"TRUE_NORTH",applicationDelay:0,cooldown:45,maxCharges:2,assetPath:"Role/True North.png",validateAttempt:Ui,onConfirm:wi});[...Ri,...Ti,...Cl].forEach(e=>{Ve(e,"SWIFTCAST",1,{timeout:10})});Ye([...Ri,...Ti,...Cl],"SWIFTCAST",18,"cd_SWIFTCAST",{rscType:"SWIFTCAST",applicationDelay:0,cooldown:40,assetPath:"Role/Swiftcast.png"});[...Ri,...Ti,...Cl].forEach(e=>{Ve(e,"LUCID_DREAMING",1,{timeout:21})});Ye([...Ri,...Ti,...Cl],"LUCID_DREAMING",14,"cd_LUCID_DREAMING",{rscType:"LUCID_DREAMING",applicationDelay:.623,cooldown:60,assetPath:"Role/Lucid Dreaming.png",onApplication:(e,t)=>{const n=e.resources.get("LUCID_DREAMING");n.node=t,n.tickCount=0;const o=e.findNextQueuedEventByTag(dn.LucidTick);o&&o.addTag(dn.ManaGain)}});[...An,...sn,...eo].forEach(e=>{Ve(e,"ARMS_LENGTH",1,{timeout:6.5})});Ye([...An,...sn,...eo],"ARMS_LENGTH",32,"cd_ARMS_LENGTH",{rscType:"ARMS_LENGTH",applicationDelay:.62,cooldown:120,assetPath:"Role/Arms Length.png",validateAttempt:Ui,onConfirm:wi});[...Ri,...Ti,...Cl].forEach(e=>{Ve(e,"SURECAST",1,{timeout:6.5})});Ye([...Ri,...Ti,...Cl],"SURECAST",44,"cd_SURECAST",{rscType:"SURECAST",applicationDelay:0,cooldown:120,assetPath:"Role/Surecast.png"});sn.forEach(e=>{Ve(e,"BLOODBATH",1,{timeout:20})});Ye(sn,"BLOODBATH",8,"cd_BLOODBATH",{rscType:"BLOODBATH",applicationDelay:.625,cooldown:90,assetPath:"Role/Bloodbath.png",validateAttempt:Ui,onConfirm:wi});et([...sn,...eo],"SECOND_WIND",12,"cd_SECOND_WIND",{healingPotency:600,applicationDelay:.625,cooldown:120,assetPath:"Role/Second Wind.png",validateAttempt:Ui,onConfirm:wi});et(An,"PROVOKE",15,"cd_PROVOKE",{applicationDelay:.62,cooldown:30,assetPath:"Role/Provoke.png",drawsAggro:!0,startsAuto:!0});et(An,"SHIRK",48,"cd_SHIRK",{applicationDelay:0,cooldown:120,assetPath:"Role/Shirk.png"});et(An,"LOW_BLOW",25,"cd_LOW_BLOW",{applicationDelay:.62,cooldown:25,assetPath:"Role/Low Blow.png",startsAuto:!0});Xn(Ri,"ESUNA",10,{manaCost:400,castTime:0,applicationDelay:1.14,assetPath:"Role/Esuna.png"});et(Ri,"RESCUE",48,"cd_RESCUE",{applicationDelay:0,cooldown:120,assetPath:"Role/Rescue.png"});et(sn,"LEG_SWEEP",10,"cd_LEG_SWEEP",{applicationDelay:.625,cooldown:40,assetPath:"Role/Leg Sweep.png",validateAttempt:Ui,onConfirm:wi});et(eo,"LEG_GRAZE",6,"cd_LEG_GRAZE",{applicationDelay:0,cooldown:30,assetPath:"Role/Leg Graze.png"});et(eo,"FOOT_GRAZE",10,"cd_FOOT_GRAZE",{applicationDelay:0,cooldown:30,assetPath:"Role/Foot Graze.png"});Ye(Lo,"TINCTURE",1,"cd_TINCTURE",{rscType:"TINCTURE",applicationDelay:.64,cooldown:270,assetPath:"General/Tincture.png",validateAttempt:Ui,onConfirm:Le(Pu,wi)});Ye(Lo,"SPRINT",1,"cd_SPRINT",{rscType:"SPRINT",applicationDelay:.133,cooldown:60,assetPath:"General/Sprint.png",validateAttempt:Ui,onConfirm:Le(Pu,wi)});An.forEach(e=>{Ve(e,"SHIELD_WALL",1,{timeout:10}),Ve(e,"STRONGHOLD",1,{timeout:12})});const nS=e=>Object.keys(eC).forEach(t=>{t!=="UNKNOWN"&&e.tryConsumeResource(t)});Rn(An,"SHIELD_WALL","cd_LIMIT_BREAK_1",{tier:"1",applicationDelay:.45,animationLock:1.93,onApplication:e=>{nS(e),e.gainStatus("SHIELD_WALL")}});Rn(An,"STRONGHOLD","cd_LIMIT_BREAK_2",{tier:"2",applicationDelay:.89,animationLock:3.86,onApplication:e=>{nS(e),e.gainStatus("STRONGHOLD")}});An.forEach(e=>{const t=dt[e].limitBreak??"UNKNOWN",n=dt[e].limitBreakBuff??"UNKNOWN";Ve(e,n,1,{timeout:8}),Rn(e,t,"cd_LIMIT_BREAK_3",{tier:"3",applicationDelay:1.34,animationLock:3.86,onApplication:o=>{nS(o),o.gainStatus(n)}})});Rn(Ri,"HEALING_WIND","cd_LIMIT_BREAK_1",{tier:"1",castTime:2,healingPotency:25,applicationDelay:.76,animationLock:2.1});Rn(Ri,"BREATH_OF_THE_EARTH","cd_LIMIT_BREAK_2",{tier:"2",castTime:2,healingPotency:50,applicationDelay:.8,animationLock:5.13});Ri.forEach(e=>{const t=dt[e].limitBreak??"UNKNOWN";Rn(e,t,"cd_LIMIT_BREAK_3",{tier:"3",castTime:2,healingPotency:100,applicationDelay:.8,animationLock:8.1})});Rn(sn,"BRAVER","cd_LIMIT_BREAK_1",{tier:"1",castTime:2,applicationDelay:2.23,animationLock:3.86,potency:1e3,validateAttempt:Ui,onConfirm:wi});Rn(sn,"BLADEDANCE","cd_LIMIT_BREAK_2",{tier:"2",castTime:3,applicationDelay:3.28,animationLock:3.86,potency:2200,validateAttempt:Ui,onConfirm:wi});sn.forEach(e=>{const t=dt[e].limitBreak??"UNKNOWN";Rn(e,t,"cd_LIMIT_BREAK_3",{tier:"3",castTime:4.5,applicationDelay:2.26,animationLock:3.7,potency:3500,validateAttempt:Ui,onConfirm:wi})});Rn(eo,"BIGSHOT","cd_LIMIT_BREAK_1",{tier:"1",castTime:2,applicationDelay:2.23,animationLock:3.1,potency:540});Rn(eo,"DESPERADO","cd_LIMIT_BREAK_2",{tier:"2",castTime:3,applicationDelay:2.49,animationLock:3.1,potency:1170});eo.forEach(e=>{const t=dt[e].limitBreak??"UNKNOWN";Rn(e,t,"cd_LIMIT_BREAK_3",{tier:"3",castTime:4.5,applicationDelay:3.16,animationLock:3.7,potency:1890})});Rn(Ti,"SKYSHARD","cd_LIMIT_BREAK_1",{tier:"1",castTime:2,applicationDelay:1.64,animationLock:3.1,onConfirm:Pu,potency:600});Rn(Ti,"STARSTORM","cd_LIMIT_BREAK_2",{tier:"2",castTime:3,applicationDelay:3.75,animationLock:5.1,onConfirm:Pu,potency:1300});Ti.forEach(e=>{const t=dt[e].limitBreak??"UNKNOWN";Rn(e,t,"cd_LIMIT_BREAK_3",{tier:"3",castTime:4.5,applicationDelay:4.5,animationLock:8.1,onConfirm:e==="RDM"?Pu:void 0,potency:2100})});const ON="stdtick";class Z2{timeScale;shouldLoop;tickMode;timeline;#e;gameConfig;record;imageExportConfig;timelineDrawOptions=$w;queuedPastes;clipboardMode;game;#t=0;#a=!0;#n;#i=[];#c=[];#s=[];#r=new Map;#u=new Map;#A=new Map;#R=new Map;savedHistoricalGame;savedHistoricalRecord;#T=!1;#o=!1;#g=!1;#d=!1;displayingUpToDateGameState=!0;#m=0;lastSkillTime=0;undoStack;constructor(){this.timeScale=1,this.shouldLoop=!1,this.queuedPastes=0,this.tickMode=ri.RealTimeAutoPause,this.timeline=new _w,this.timeline.reset(),this.#e=new U2,this.gameConfig=new ci(Rh),this.game=yr(this.gameConfig),this.record=new bo,this.record.config=this.gameConfig,this.imageExportConfig={wrapThresholdSeconds:JSON.parse(Tt("img: wrapThresholdSeconds")??"0"),includeTime:JSON.parse(Tt("img: includeTime")??"true")},this.clipboardMode=Tt("radio: clipboardMode")??"plain",this.#n=-this.gameConfig.countdown,this.savedHistoricalGame=this.game,this.savedHistoricalRecord=this.record,this.undoStack=new cP,this.#f()}get inputLocked(){return this.shouldLoop||this.queuedPastes>0}updateStats(){this.#S(),this.#_()}updateAllDisplay(t=this.game){cD(t.config.serialized()),this.updateStatusDisplay(t),this.updateSkillButtons(t),this.updateTimelineDisplay(),this.updateStats(),df(this.getActiveJob())}#h(t){const n=t.initialResourceOverrides;for(let o=0;o<n.length;o++)n[o].applyTo(this.game)}#C(t){const n=this.#o;this.displayingUpToDateGameState=!1,this.#o=!0;const o=this.game,s=this.record,c=this.#n;t(),this.#o=n,this.savedHistoricalGame=this.game,this.savedHistoricalRecord=this.record,this.game=o,this.record=s,this.#n=c}checkRecordValidity(t,n,o=!1){console.assert(t.config!==void 0);const s={isValid:!0,invalidActions:[],skillUseTimes:[],straightenedIfValid:void 0};if(n===void 0)return console.log("no edit happened"),s;this.#f(!1);const c=t.config??this.gameConfig;this.game=yr(c),this.record=new bo,this.record.config=c,this.#n=-c.countdown,this.#h(this.record.config);const d=this.#E({line:t,replayMode:ya.Edited,firstEditedNodeIndex:n,selectionStart:t.getFirstSelection(),selectionEnd:t.getLastSelection()});return this.record.selectionStartIndex=t.selectionStartIndex,this.record.selectionStartIndex=t.selectionStartIndex,s.isValid=d.invalidActions.length===0,s.invalidActions=d.invalidActions,s.skillUseTimes=d.skillUseTimes,d.success&&(s.straightenedIfValid=this.record),this.displayingUpToDateGameState=o,s}displayHistoricalState(t,n){const o=t+this.gameConfig.countdown,s=this.record.getFirstSelection()!==void 0;this.#C(()=>{const c=this.record;this.game=yr(this.gameConfig),this.record=new bo,this.record.config=this.gameConfig,this.#n=-this.gameConfig.countdown,this.#h(this.record.config),this.#E({line:c,replayMode:ya.Exact,maxReplayTime:o,cutoffIndex:n}),this.timeline.updateElem({type:ot.s_HistoricalCursor,time:this.game.time,displayTime:this.game.getDisplayTime(),enabled:!0}),this.updateStatusDisplay(this.game),this.updateSkillButtons(this.game),Tl(),this.#S(),this.timeline.drawElements()}),ff(!0),s&&this.#S(!0),this.#_()}displayCurrentState(){this.displayingUpToDateGameState=!0,this.timeline.updateElem({type:ot.s_HistoricalCursor,enabled:!1,time:0,displayTime:0}),ff(!1),this.updateAllDisplay(this.game)}restart(){this.#f(),this.#h(this.gameConfig)}#f(t=!0){this.game=yr(this.gameConfig),this.#I({shouldLoop:!1}),this.timeline.reset(),t&&this.record.unselectAll(),this.#n=-this.gameConfig.countdown,this.#i=[],this.#s=[],this.#r=new Map,this.#A=new Map,this.#u=new Map,this.#R=new Map,this.#T=!1,this.displayingUpToDateGameState=!0}getPresetLines(){return this.#e.getLinesForJob(this.getActiveJob())}serializedPresets(){return this.#e.serialized()}addSelectionToPreset(t="(untitled)"){console.assert(this.record.getFirstSelection());const n=this.record.getSelected();n.name=t,this.#e.addLine(n,this.getActiveJob())}appendFilePresets(t){this.#e.deserializeAndAppend(t)}loadBattleRecordFromFile(t){t.config===void 0&&(window.alert("Error loading record: saved record had no config object"),console.error(t)),t.config.procMode===void 0&&(t.config.rngProcs!==void 0?t.config.procMode=t.config.rngProcs?hn.RNG:hn.Never:t.config.procMode=hn.RNG),t.config.fps===void 0&&(t.config.fps=Rh.fps),t.config.gcdSkillCorrection===void 0&&(t.config.gcdSkillCorrection=Rh.gcdSkillCorrection),t.config.level&&(t.config.level=parseInt(t.config.level)),t.config.skillSpeed===void 0&&(t.config.skillSpeed=ut.getSubstatBase(t.config.level)),t.config.shellVersion===void 0&&(t.config.shellVersion=Do.Initial),t.config.job===void 0&&(t.config.job=uD(t.actions.flatMap(n=>n.skillName?[lT(n.skillName)]:[]))),sn.includes(t.config.job)||(t.config.initialResourceOverrides=t.config.initialResourceOverrides.filter(n=>![Pe.FLANK_POSITIONAL.name,Pe.REAR_POSITIONAL.name].includes(n.type))),ru(()=>{const n=new ci(t.config);this.gameConfig=n,this.record=new bo,this.record.config=n,this.#f(),this.#h(this.gameConfig);const o=Gr.deserialize(t.actions),s=this.#E({line:o,replayMode:ya.Exact});if(!s.success){let c=`Error loading record- 
`;if(s.invalidActions.length>0){const d=s.invalidActions[0].node;if(d.info.type===ke.Skill){const f=d.info.skillName?Wn(d.info.skillName):"(unknown)";c+=`Stopped here because the next action ${f} can't be added: `}else c+=`Stopped here because the next action ${d.info.type} can't be added: `}c+=s.invalidActions[0].reason,window.alert(c)}})}applyEditedRecord(){const t=this.record;this.record=new bo,this.record.config=t.config,this.#f(),this.#h(this.gameConfig);const n=this.#E({line:t,replayMode:ya.Exact,removeTrailingIdleTime:!0});console.assert(n.success),t.selectionStartIndex!==void 0&&(this.record.selectSingle(t.selectionStartIndex),this.record.selectUntil(t.selectionEndIndex)),this.autoSave()}deleteSelectedSkills(){const t=this.record.selectionStartIndex;if(t!==void 0){this.record.deleteSelected();const n=va();t<this.record.length?(this.record.selectSingle(t),this.displayHistoricalState(n.skillUseTimes[t],t)):this.displayCurrentState(),this.autoSave()}}#S(t=!1){if(!this.#d){let n=K2({tinctureBuffPercentage:this.#t,lastDamageApplicationTime:this.#n});t&&(n={mainTable:n.mainTable,mainTableSummary:n.mainTableSummary,dotTables:n.dotTables,mode:n.mode}),CR(n)}}#_(){if(!this.#d){const t=Y2({tinctureBuffPercentage:this.#t,lastDamageApplicationTime:this.#n});dD(t)}}getTincturePotencyMultiplier(){return 1+this.#t*.01}setTinctureBuffPercentage(t){this.#t=t,this.displayCurrentState(),ko()}setUntargetableMask(t){this.#a=t,this.displayCurrentState(),ko()}getUntargetableMask(){return this.#a}getMaxTicks(t,n,o){let s=0;const c=[n];return o||c.push(ON),c.forEach(d=>{this.#r.get(d)?.forEach(f=>{!Ja(f-this.gameConfig.countdown)&&f<=t&&s++})}),s}getDotCoverageTimeFraction(t,n,o){return this.getOverTimeCoverageTimeFraction(t,n,this.#A,o)}getHotCoverageTimeFraction(t,n,o){return this.getOverTimeCoverageTimeFraction(t,n,this.#R,o)}getOverTimeCoverageTimeFraction(t,n,o,s){if(t<=Ra.epsilon)return 0;const c=o.get(n);if(!c)return 0;c.has(s)||c.set(s,[]);let d=0;c.get(s).forEach(h=>{if(h.tStartDisplay<=t){const m=Math.max(0,h.tStartDisplay);let R=h.tEndDisplay!==void 0&&h.tEndDisplay<=t?h.tEndDisplay:t;R=Math.max(0,R),d+=qr(m,R)}});const f=qr(0,t);return d/f}setTimelineOptions(t){this.timelineDrawOptions={...this.timelineDrawOptions,...t},this.updateTimelineDisplay()}getTimelineRenderingProps(){const t=this.record.getFirstSelection()!=null&&this.record.getLastSelection()!=null;let n=this.gameConfig.countdown;const o=this.timeline.getAllSlotsTimeInfo();return o!==null&&(n=Math.max(n,o.countdown)),{timelineWidth:this.timeline.getCanvasWidth(),timelineHeight:this.timeline.getCanvasHeight(),scale:this.timeline.scale,countdown:n,tincturePotencyMultiplier:this.getTincturePotencyMultiplier(),untargetableMask:this.#a,sharedElements:this.timeline.sharedElements,slots:this.timeline.slots,activeSlotIndex:this.timeline.activeSlotIndex,allMarkers:this.timeline.getAllMarkers(),untargetableMarkers:this.timeline.getUntargetableMarkers(),buffMarkers:this.timeline.getBuffMarkers(),showSelection:t,selectionStartDisplayTime:(this.record.getFirstSelection()?.tmp_startLockTime??0)-this.gameConfig.countdown,selectionEndDisplayTime:(this.record.getLastSelection()?.tmp_endLockTime??0)-this.gameConfig.countdown,drawOptions:this.timelineDrawOptions}}reportWarning(t){this.#o||this.timeline.addElement({type:ot.WarningMark,warningType:t,time:this.game.time,displayTime:this.game.getDisplayTime()})}reportComboBreak(){this.reportWarning({kind:"combobreak"})}resolvePotency(t){this.resolveAnyPotency(t,ot.DamageMark,this.#i),this.#S()}resolveHealingPotency(t){this.resolveAnyPotency(t,ot.HealingMark,this.#c)}resolveOverTimePotency(t,n){n==="damage"?this.resolveAnyPotency(t,ot.DamageMark,this.#i,!1):this.resolveAnyPotency(t,ot.HealingMark,this.#c)}resolveAnyPotency(t,n,o,s=!0){if(t===void 0)return;t.resolve(this.game.getDisplayTime()),this.#n=this.game.time,t.base===0&&(n=ot.AggroMark);const c=t.getDisplayedModifiers().some(d=>d.source===U.POT);if(!this.#o){let d="{skill}@"+t.sourceTime.toFixed(3);t.description.length>0&&(d+=" "+t.description);const f={potency:t,sourceDesc:d,sourceSkill:t.sourceSkill},h=this.timeline.tryGetElement(this.game.time,n);h?(h.potencyInfos.push(f),c&&!h.buffs.includes("TINCTURE")&&h.buffs.push("TINCTURE")):this.timeline.addElement({type:n,potencyInfos:[f],buffs:c?["TINCTURE"]:[],time:this.game.time,displayTime:this.game.getDisplayTime()}),o.push({time:this.game.getDisplayTime(),source:t.sourceSkill+"@"+t.sourceTime,potency:t.getAmount({tincturePotencyMultiplier:1,includePartyBuffs:!0,includeSplash:s}),buffs:c?["TINCTURE"]:[]})}}reportLucidTick(t,n){this.#o||this.timeline.addElement({type:ot.LucidMark,time:t,displayTime:this.game.getDisplayTime(),sourceDesc:n})}reportManaTick(t,n){this.#o||this.timeline.addElement({type:ot.MPTickMark,time:t,displayTime:this.game.getDisplayTime(),sourceDesc:n})}reportMeditateTick(t,n){this.#o||this.timeline.addElement({type:ot.MeditateTickMark,time:t,displayTime:this.game.getDisplayTime(),sourceDesc:n})}reportAutoTick(t,n){this.#o||this.timeline.addElement({type:ot.AutoTickMark,time:t,displayTime:this.game.getDisplayTime(),sourceDesc:n})}reportDotTick(t,n){this.reportOverTimeTick(t,this.#r,n)}reportHotTick(t,n){this.reportOverTimeTick(t,this.#u,n)}reportOverTimeTick(t,n,o){if(!this.#o){const s=o??ON;let c=n.get(s);c||(c=[],n.set(s,c)),c.push(t),this.updateStats()}}reportDotStart(t,n,o){this.reportOverTimeStart(t,n,"damage",o)}reportHotStart(t,n){this.reportOverTimeStart(t,n,"healing",[1])}reportOverTimeStart(t,n,o,s){if(!this.#o){const c=o==="damage"?this.#A:this.#R;let d=c.get(n);d||(d=new Map,c.set(n,d)),s.forEach(f=>{let h=d.get(f);h||(h=[],d.set(f,h));const m=h.length;console.assert(m===0||h[m-1].tEndDisplay!==void 0),h.push({tStartDisplay:t,tEndDisplay:void 0})})}}reportDotDrop(t,n,o){this.reportOverTimeDrop(t,n,"damage",o)}reportHotDrop(t,n){this.reportOverTimeDrop(t,n,"healing",[1])}reportOverTimeDrop(t,n,o,s){if(!this.#o){const c=o==="damage"?this.#A:this.#R;s.forEach(d=>{const f=c.get(n)?.get(d);if(console.assert(f,`Reported dropping ${n} on target ${d} when no coverage was detected`),!f)return;const h=f.length;console.assert(h>0&&f[h-1].tEndDisplay===void 0),f[h-1].tEndDisplay=t})}}updateStatusDisplay(t){const n=t.resources.get("NOT_CASTER_TAXED"),o=t.resources.get("NOT_ANIMATION_LOCKED"),s=t.cooldowns.get("cd_GCD"),c={gcdReady:s.stacksAvailable()>0,gcd:s.currentStackCd(),timeTillGCDReady:t.cooldowns.timeTillAnyStackAvailable("cd_GCD"),castLocked:t.resources.timeTillReady("NOT_CASTER_TAXED")>0,castLockTotalDuration:n.pendingChange?n.pendingChange.delay:0,castLockCountdown:t.resources.timeTillReady("NOT_CASTER_TAXED"),animLocked:t.resources.timeTillReady("NOT_ANIMATION_LOCKED")>0,animLockTotalDuration:o.pendingChange?o.pendingChange.delay:0,animLockCountdown:t.resources.timeTillReady("NOT_ANIMATION_LOCKED"),canMove:t.resources.get("MOVEMENT").available(1)},d=t.statusPropsGenerator;u0(f=>({time:t.getDisplayTime(),resources:d.getAllResourceViewProps(f),resourceLocks:c,enemyBuffs:d.getAllOtherTargetedBuffViewProps(),selfBuffs:d.getAllSelfTargetedBuffViewProps(),level:t.config.level}),d.statusLayoutFn)}updateTimelineDisplay(){this.timeline.setTimeSegment(0,this.game.time),Tl(),Su(),this.#o||this.timeline.updateElem({type:ot.s_Cursor,time:this.game.time,displayTime:this.game.getDisplayTime()}),this.timeline.drawElements()}updateSkillButtons(t){Nb(this.game.displayedSkills.getCurrentSkillNames(this.game).map(n=>t.getSkillAvailabilityStatus(n)))}#l(t){const n=this.game.time,o=t.deltaTime+this.game.getDisplayTime();if(t.deltaTime>0){this.#m=t.deltaTime;const s=this.game.tick(t.deltaTime,t.prematureStopCondition?t.prematureStopCondition:()=>!1);let c;return t.waitKind==="duration"?c=vr(s):t.waitKind==="target"?c=fl(o):t.waitKind==="mp"&&(c=SC()),c!==void 0&&(c.tmp_startLockTime=n,c.tmp_endLockTime=t.deltaTime+n,this.record.addActionNode(c)),c}}setTimeControlSettings(t){this.timeScale=t.timeScale,this.tickMode=t.tickMode,this.shouldLoop=!1}setConfigAndRestart(t,n=!0){const o=this.gameConfig.job!==t.job,s=this.gameConfig.countdown,c=s<t.countdown;o&&!n&&(console.error("attempted to apply config without reset even though job changed; forcing reset"),n=!0),ru(()=>{this.gameConfig=new ci({...t,shellVersion:HR.version}),n?this.record=new bo:c&&this.record.prependActionNode(fl(-s)),this.record.config=this.gameConfig,this.#f(),this.#h(this.gameConfig),o&&df(t.job)}),this.autoSave()}getDisplayedGame(){return this.displayingUpToDateGameState?this.game:this.savedHistoricalGame}getActiveJob(){return this.game.job}getSkillInfo(t){return t.game.getSkillAvailabilityStatus(t.skillName)}#I(t){const n=t.shouldLoop;this.shouldLoop!==n&&(this.shouldLoop=n,this.shouldLoop&&this.#N(()=>this.shouldLoop))}#b(t){let n=this.game.timeTillAnySkillAvailable();t>=0&&(n=Math.min(t-this.game.time,n)),this.#l({deltaTime:n})}#p(t,n,o=this.tickMode,s=-1,c=!0,d=!1){let f=this.game.getSkillAvailabilityStatus(t);const h=this.game.time,m=f.timeTillAvailable,R=this.#l({deltaTime:m});d&&R&&this.undoStack.push(new $l(R,this.record.tailIndex)),t=TC(t,this.game),f=this.game.getSkillAvailabilityStatus(t),n=this.filterTargetList(n,t);const T=Al(t,n);let S;if(f.status.ready())T.tmp_startLockTime=this.game.time,this.record.addActionNode(T),S=this.record.tailIndex,d&&T&&this.undoStack.push(new $l(T,this.record.tailIndex)),this.game.useSkill(t,T,S),T.tmp_invalid_reasons=[],o===ri.RealTimeAutoPause&&(this.shouldLoop=!0,this.#N(()=>this.game.timeTillAnySkillAvailable()>0,!0));else{if(!c){if(m>0){const p=vr(m);p.tmp_startLockTime=h,p.tmp_endLockTime=this.game.time,this.record.addActionNode(p)}return f}this.record.addActionNode(T),S=this.record.tailIndex,this.game.useInvalidSkill(t,T),T.tmp_invalid_reasons=f.status.unavailableReasons}const g=this.game.timeTillAnySkillAvailable();if(T.tmp_startLockTime=this.game.time,T.tmp_endLockTime=this.game.time+g,!this.#o){this.lastSkillTime=this.game.time;const p=this.game.getSkillAvailabilityStatus(t,!0);let O=this.game.skillsList.get(t).cdName==="cd_GCD";const D=f.castTime>0&&!f.instantCast,L=D?f.castTime-ci.getSlidecastWindow(f.castTime):0;let w=p.cdRecastTime;t==="MEDITATE"&&(O=!0,w=this.game.getSkillAvailabilityStatus("YUKIKAZE").cdRecastTime),this.timeline.addElement({type:ot.Skill,displayTime:this.game.getDisplayTime(),skillName:t,isGCD:O,isSpellCast:D,time:this.game.time,relativeSnapshotTime:L,lockDuration:g,recastDuration:w,node:T,actionIndex:S}),this.#s.push({time:this.game.getDisplayTime(),action:Ia[t].name,isGCD:O?1:0,castTime:f.instantCast?0:f.castTime,targetList:T.targetList,isDamaging:T.anyPotencies()})}return o!==ri.RealTimeAutoPause&&this.#b(s),this.#d||Su(),f}#E(t){const n=this.#d;this.#d=!0,t.removeTrailingIdleTime===void 0&&(t.removeTrailingIdleTime=!1);const o=t.maxReplayTime??-1;let s=t.replayMode;t.replayMode===ya.Edited&&(s=ya.Exact);const c=t.line,d=[],f=[];if(c.length===0)return this.#d=n,{success:!0,firstAddedIndex:void 0,invalidActions:d,skillUseTimes:f};let h=this.record.length,m;const R=t.cutoffIndex??c.actions.length,T=c.actions.slice();for(let p=0;p<R;p++){const _=T[p];t.replayMode===ya.Edited&&s===ya.Exact&&p===t.firstEditedNodeIndex&&(s=ya.Edited);let O=0;if(_.info.type===ke.Wait?O=_.info.waitDuration:_.info.type===ke.JumpToTimestamp?O=_.info.targetTime-this.game.getDisplayTime():_.info.type===ke.WaitForMP?O=this.game.timeTillNextMpGainEvent():_.info.type===ke.Skill&&(O=this.game.getSkillAvailabilityStatus(_.info.skillName).timeTillAvailable),p>0){const L=T[p-1].legacyWaitDuration;if(L!==void 0&&Math.abs(L-this.#m)>Ra.epsilon){const w=L-this.#m;if(w>0&&_.info.type!==ke.Wait){let y;if(_.info.type===ke.Skill){const x=this.game.getSkillAvailabilityStatus(_.info.skillName).timeTillAvailable;Math.abs(x-w)>Ra.epsilon&&(y="duration")}y&&(this.#l({deltaTime:w,waitKind:y}),h++)}else _.info.type===ke.Wait&&(O+=w)}}if(o>=0&&o-this.game.time<O&&s===ya.Exact)return this.#l({deltaTime:o-this.game.time,waitKind:"duration"}),this.#d=!1,this.updateAllDisplay(),{success:!0,firstAddedIndex:m,invalidActions:d,skillUseTimes:f};if(f.push(this.game.getDisplayTime()),[ke.Wait,ke.JumpToTimestamp,ke.WaitForMP].includes(_.info.type))if(O>=0)this.#l({deltaTime:O,waitKind:_.info.type===ke.Wait?"duration":_.info.type===ke.JumpToTimestamp?"target":"mp"});else{const D=du();if(_.info.type===ke.JumpToTimestamp){const L=fl(_.info.targetTime);L.tmp_startLockTime=this.game.time,L.tmp_endLockTime=L.tmp_startLockTime,this.record.addActionNode(L)}else console.error("non-jump wait somehow failed: "+_.info.type);D.addUnavailableReason(mt.PastTargetTime),d.push({node:_,index:p,reason:D})}else if(_.info.type===ke.Skill){let D=_.info.skillName;t.replayMode===ya.SkillSequence&&(D=Pr(this.game.job,D,this.gameConfig.level));const L=this.#p(D,_.info.targetList,ri.Manual,o);f[f.length-1]=L.usedAt,L.status.ready()||d.push({node:_,index:p,reason:L.status.clone()}),this.#T&&(this.#T=!1,this.shouldLoop||(L.status.addUnavailableReason(mt.CastCanceled),d.push({node:_,index:p,reason:L.status})))}else if(_.info.type===ke.SetResourceEnabled&&(s===ya.Exact||s===ya.Edited)){const D=this.requestToggleBuff(_.info.buffName,!1,_.info.targetNumber),L=s===ya.Exact;if(D)this.#l({deltaTime:L?O:Math.min(O,this.game.timeTillAnySkillAvailable())});else{const w=du();w.addUnavailableReason(mt.BuffNoLongerAvailable),d.push({node:_,index:p,reason:w})}}else if(_.info.type===ke.Unknown){const{skillName:D,targetList:L}=_.info,w=EH(D,L);this.record.addActionNode(w);const y=du();y.addUnavailableReason(mt.UnknownSkill),d.push({node:_,index:p,reason:y}),w.tmp_invalid_reasons=y.unavailableReasons;const x=this.gameConfig.animationLock;this.#o||(this.lastSkillTime=this.game.time,this.timeline.addElement({type:ot.Skill,displayTime:this.game.getDisplayTime(),skillName:D,isGCD:!1,isSpellCast:!1,time:this.game.time,relativeSnapshotTime:this.game.time,lockDuration:x,recastDuration:0,node:w,actionIndex:p}),this.#s.push({time:this.game.getDisplayTime(),action:D,isGCD:0,castTime:0,targetList:w.targetList,isDamaging:!1})),this.#l({deltaTime:x})}else console.error("did not process ActionNode "+JSON.stringify(_.info));if(t.replayMode===ya.Edited){const D=this.record.tailIndex;_===t.selectionStart&&D>=0?this.record.selectSingle(D):_===t.selectionEnd&&D>=0&&this.record.selectUntil(D)}this.record.length!==h&&m===void 0&&(m=this.record.tailIndex)}if(t.cutoffIndex!==void 0){const p=T[t.cutoffIndex].info;if(p.type===ke.Skill){const _=this.game.getSkillAvailabilityStatus(p.skillName);this.#l({deltaTime:_.timeTillAvailable})}}const S=T[T.length-1],g=S.legacyWaitDuration;if(g!==void 0&&(S.info.type===ke.Skill||S.info.type===ke.SetResourceEnabled)&&Math.abs(g-this.#m)>Ra.epsilon){const p=g-this.#m;this.#l({deltaTime:p,waitKind:"duration"})}return this.#d=n,this.updateAllDisplay(),{success:!0,firstAddedIndex:m,invalidActions:d,skillUseTimes:f}}autoSave(){const t=this.record.serialized();this.timeline.saveCurrentSlot(t,this.gameConfig.countdown,this.game.time)}tryAutoLoad(){const t=Tt("gameRecord");t!==null&&(console.log("migrating existing record to slot 0"),gt("gameRecord0",t),$A("gameRecord"));for(let s=0;s<Oi;s++)this.timeline.loadSlot(s);this.timeline.slots.length>0||this.timeline.addSlot();const o=parseInt(Tt("activeSlotIndex")??"0");this.setActiveSlot(o>=Oi?0:o),this.undoStack.clear()}setActiveSlot(t){this.#I({shouldLoop:!1}),ru(()=>{this.autoSave(),this.record.unselectAll(),this.timeline.loadSlot(t)||console.error(`failed to load timeline in cached active slot ${t}`)}),this.savedHistoricalGame=this.game,this.savedHistoricalRecord=this.record,this.displayCurrentState(),gt("activeSlotIndex",t.toString())}cloneActiveSlot(){if(this.timeline.activeSlotIndex<0||this.timeline.activeSlotIndex>=this.timeline.slots.length){console.error("tried to clone slot with invalid activeSlotIndex "+this.timeline.activeSlotIndex);return}this.#I({shouldLoop:!1}),ru(()=>{const t=this.record.serialized();this.timeline.addSlot(),this.loadBattleRecordFromFile(t),this.autoSave(),this.timeline.loadSlot(this.timeline.slots.length-1)}),this.displayCurrentState()}getDamageLogCsv(){const t=this.#i.map(n=>{let o=!1;n.buffs.forEach(c=>{c==="TINCTURE"&&(o=!0)});let s=n.potency;return o&&(s*=this.getTincturePotencyMultiplier()),[n.time,n.source,s]});return[["time","damageSource","potency"]].concat(t)}getActionsLogCsv(){const t=this.#s.map(n=>[n.time,n.action,n.isGCD,n.castTime]);return[["time","action","isGCD","castTime"]].concat(t)}getAmaSimCsv(){const t=D=>D===Ia.TINCTURE.name?"Grade 4 Gemdraught":D.endsWith("(Ten)")||D.endsWith("(Chi)")||D.endsWith("(Jin)")?D.substring(0,D.length-6):D.replace(" 2"," II").replace(" 3"," III").replace(" 4"," IV"),n=this.getActiveJob(),o=An.includes(n)||sn.includes(n),s=this.timeline.getBuffMarkers().map(D=>{const L=new Qh(D.description);let w=L.info.name;L.info.name===k.Card_TheSpear?w="The Spear":L.info.name===k.Card_TheBalance?w="The Balance":[k.RadiantFinale1,k.RadiantFinale2,k.RadiantFinale3].includes(L.info.name)&&(w="Radiant Finale");const y=L.info.name===k.Dokumori||L.info.name===k.ChainStratagem,x=()=>y?"Debuff Only":L.info.name===k.RadiantFinale1?'"1 Coda, Buff Only"':L.info.name===k.RadiantFinale2?'"2 Coda, Buff Only"':L.info.name===k.RadiantFinale3?'"3 Coda, Buff Only"':[k.ArmysPaeon,k.MagesBallad,k.WanderersMinuet,k.StandardFinish,k.TechnicalFinish].includes(L.info.name)?"Buff Only":L.info.name===k.Card_TheSpear?o?"Small":"Big":L.info.name===k.Card_TheBalance?o?"Big":"Small":"";return[D.time,w,L.info.job,x(),y?"Boss1":""]});let c=this.gameConfig.getOverrideStacks("MAGES_CODA")??0,d=this.gameConfig.getOverrideStacks("WANDERERS_CODA")??0,f=this.gameConfig.getOverrideStacks("ARMYS_CODA")??0,h=this.gameConfig.getOverrideStacks("RADIANT_CODA")??0;const m=this.#s.filter(D=>!D.action.includes("Toggle buff")).map(D=>{let L="";D.isDamaging&&D.targetList!==void 0&&(L='"',L+=D.targetList.map(x=>`Boss${x}`).join(", "),L+='"');let w="";const y=c+d+f;return D.action==="Mage's Ballad"?c=1:D.action==="The Wanderer's Minuet"?d=1:D.action==="Army's Paeon"?f=1:D.action==="Radiant Finale"?y>0&&(h=y,w=`${y} Coda`,c=0,d=0,f=0):D.action==="Radiant Encore"&&h>0&&(w=`${h} Encore`,h=0),[D.time,t(D.action),"",w,L]}),R=["use_strict_skill_naming = False"],T=!(o||eo.includes(n)),S={[$e.lvl70]:new Map([["WHM",162],["SCH",264],["AST",148],["SGE",177],["BLM",133],["SMN",264],["RDM",162],["PCT",148]]),[$e.lvl80]:new Map([["WHM",189],["SCH",308],["AST",172],["SGE",206],["BLM",155],["SMN",308],["RDM",189],["PCT",172]]),[$e.lvl90]:new Map([["WHM",216],["SCH",353],["AST",197],["SGE",236],["BLM",177],["SMN",353],["RDM",216],["PCT",197]]),[$e.lvl100]:new Map([["WHM",244],["SCH",398],["AST",222],["SGE",266],["BLM",200],["SMN",398],["RDM",244],["PCT",222]])};let g={job_class:n,det_stat:this.gameConfig.determination,crit_stat:this.gameConfig.criticalHit,dh_stat:this.gameConfig.directHit,tenacity:this.gameConfig.tenacity,speed_stat:T?this.gameConfig.spellSpeed:this.gameConfig.skillSpeed,version:JM,level:this.gameConfig.level,wd:this.gameConfig.wd,main_stat:this.gameConfig.main};S[this.gameConfig.level].has(n)&&(g={...g,healer_or_caster_strength:S[this.gameConfig.level].get(n)}),R.push("stats = "+JSON.stringify(g));const p=this.timeline.getUntargetableMarkers().map(D=>`(${D.time}, ${D.time+D.duration}),`);p.length>0&&(p.push(""),R.push("downtime_windows = ("+p.join(", ")+")"));const _=[];if(this.game.autoStartTimes.length>0&&this.game.autoStopTimes.length>0){let D=0,L=0;for(;D<this.game.autoStartTimes.length&&this.game.autoStopTimes[0]>this.game.autoStartTimes[D];)D++;for(;D<this.game.autoStartTimes.length&&L<this.game.autoStopTimes.length;){const w=this.game.autoStopTimes[L],y=this.game.autoStartTimes[D];_.push(`(${w}, ${y-w})`),D++,L++}L<this.game.autoStopTimes.length&&_.push(`(${this.game.autoStopTimes[L]}, ${this.game.getDisplayTime()})`)}_.length>0&&(_.push(""),R.push("auto_downtime_windows = ("+_.join(", ")+")"));const O=["time","skill_name","job_class","skill_conditional","targets"];return O.push("players_to_buff","overriding_skill_conditional_for_other_players"),s.forEach(D=>D.push("","")),m.forEach(D=>D.push("","")),{meta:R,body:[O].concat(s,m)}}tryAddLine(t,n=ya.SkillSequence){const o=I.record.length,s=this.#E({line:t,replayMode:n});return s.success?(this.undoStack.push(new DT(t.actions,o,"preset")),this.autoSave(),va(),!0):(this.rewindUntilBefore(s.firstAddedIndex,!1),window.alert('Failed to add line "'+t.name+'" due to insufficient resources and/or stats mismatch.'),!1)}deleteLine(t){this.#e.deleteLine(t)}deleteAllLines(){this.#e.deleteAllLines()}reportInterruption(t){if(this.#g||this.tickMode===ri.RealTimeAutoPause&&this.shouldLoop){const n=t.failNode.getNameForMessage();window.alert("Cast interrupted! Resources for "+n+" are no longer available"),console.warn("failed: "+n);const o=this.game.time,s=this.shouldLoop;this.rewindUntilBefore(t.failIndex,!1),this.autoSave(),this.#l({deltaTime:o-this.game.time,waitKind:"duration"}),this.shouldLoop=s}else this.#T=!0,this.#o||this.timeline.invalidateLastElement()}rewindUntilBefore(t,n){const o=this.record;this.record=new bo,this.record.config=this.gameConfig,this.#f(),this.#h(this.gameConfig),t!==void 0&&(o.spliceUpTo(t),this.#E({line:o,replayMode:ya.Exact,removeTrailingIdleTime:n}))}removeTrailingIdleTime(){let t;for(let o=this.record.tailIndex;o>=0;o--)if(this.record.actions[o].info.type===ke.Skill){t=o;break}const n=t===void 0?this.record.actions.slice():this.record.actions.slice(t+1);n.length>0&&this.undoStack.push(new Dr((t??-1)+1,n,"delete")),t===void 0?this.rewindUntilBefore(0,!0):this.rewindUntilBefore(t+1,!0),va()}waitTillNextMpOrLucidTick(){const t=this.#l({deltaTime:this.game.timeTillNextMpGainEvent(),waitKind:"mp"});t!==void 0&&this.undoStack.push(new $l(t,this.record.tailIndex)),va(),this.updateAllDisplay()}insertRecordNodes(t,n){this.record.insertActionNodes(t,n),this.autoSave();const o=va();let s;t.length>1?(s=Math.min(n,this.record.tailIndex),this.record.selectSingle(s),this.record.selectUntil(s+t.length-1)):(s=Math.min(n+1,this.record.tailIndex),this.record.selectSingle(s)),this.displayHistoricalState(o.skillUseTimes[s],s)}insertRecordNode(t,n){this.insertRecordNodes([t],n)}filterTargetList(t,n){const o=Wi(I.game.job,n);return o?.potencyFn(I.game)===0&&!o?.savesTargets&&!I.game.dotSkills.includes(n)?[]:t}requestUseSkill(t,n=!1){if(this.#g=!0,!this.inputLocked)if(this.displayingUpToDateGameState)this.#p(t.skillName,t.targetList,this.tickMode,-1,!1,n).status.ready()&&(this.scrollToTime(this.game.time),this.autoSave(),this.tickMode!==ri.RealTimeAutoPause&&va());else{const o=this.record.selectionStartIndex;if(o!==void 0){const s=this.filterTargetList(t.targetList,t.skillName),c=Al(t.skillName,s);this.insertRecordNode(c,o),n&&this.undoStack.push(new $l(c,o))}}this.#g=!1}requestToggleBuff(t,n=!1,o){if(!this.game.requestToggleBuff(t,o))return!1;const c=eR(t,o);return c.tmp_startLockTime=this.game.time,c.tmp_endLockTime=c.tmp_startLockTime,this.record.addActionNode(c),n&&this.undoStack.push(new $l(c,this.record.tailIndex)),this.#s.push({time:this.game.getDisplayTime(),action:"Toggle buff: "+Pe[t].name,isGCD:0,castTime:0,isDamaging:!1}),!0}scrollToTime(t){const n=t===void 0?this.game.time:t;setTimeout(()=>{XD(Xe.positionFromTimeAndScale(n,this.timeline.scale))},0)}#N(t,n=!1){let o=0;const s=this,c=function(d){o===0&&(o=d);const f=(d-o)/1e3*s.timeScale,h=s.game.timeTillAnySkillAvailable();h>=f?s.#l({deltaTime:f,prematureStopCondition:()=>!t()}):(s.#l({deltaTime:h,prematureStopCondition:()=>!t()}),s.#l({deltaTime:f-h,prematureStopCondition:()=>!t()})),s.updateAllDisplay(),o=d,t()?requestAnimationFrame(c):(s.shouldLoop=!1,s.autoSave(),hf(!1),n&&va())};hf(!0),requestAnimationFrame(c)}step(t,n=!1){let o,s=this.record.length;this.displayingUpToDateGameState?(o=this.#l({deltaTime:t,waitKind:"duration"}),this.autoSave(),this.updateAllDisplay()):this.record.selectionStartIndex!==void 0&&(s=this.record.selectionStartIndex,o=vr(t),this.insertRecordNode(o,s)),n&&o&&this.undoStack.push(new $l(o,s))}stepUntil(t,n=!1){let o,s=this.record.length;this.displayingUpToDateGameState?(o=this.#l({deltaTime:t-this.game.getDisplayTime(),waitKind:"target"}),this.autoSave(),this.updateAllDisplay()):this.record.selectionStartIndex!==void 0&&(s=this.record.selectionStartIndex,o=fl(t),this.insertRecordNode(o,s)),n&&o&&this.undoStack.push(new $l(o,s))}handleKeyboardEvent(t){if(this.inputLocked)return;const n=t.ctrlKey||t.metaKey,o=I.record.selectionStartIndex,s=o!==void 0;let c=!1;this.displayingUpToDateGameState&&t.key==="u"&&(this.undoStack.doThenPush(new Dr(this.record.tailIndex,[this.record.actions[this.record.tailIndex]],"delete")),c=!0),t.key==="z"&&n?(this.undoStack.undo(),c=!0):t.key==="Z"&&n||t.key==="y"&&n?(this.undoStack.redo(),c=!0):t.key==="Paste"||t.key==="v"&&n?(o0(),c=!0):t.key==="Copy"||t.key==="c"&&n?s&&(mR(),c=!0):(t.key==="Cut"||t.key==="x"&&n)&&s&&(mR(),I.undoStack.push(new Dr(o,I.record.getSelected().actions,"delete")),I.deleteSelectedSkills(),c=!0),c&&t.preventDefault()}handleTimelineKeyboardEvent(t){if(!this.inputLocked){const n=t.ctrlKey||t.metaKey,o=I.record.selectionStartIndex,s=I.record.selectionEndIndex,c=o!==void 0;let d=!1,f=!1;t.key==="Backspace"||t.key==="Delete"?c&&(I.undoStack.push(new Dr(o,I.record.getSelected().actions,"delete")),I.deleteSelectedSkills()):t.key==="ArrowUp"?c?(t.shiftKey?I.timeline.resizeSelection(!0):I.timeline.onClickTimelineAction(o-1,!1),d=!0,t.preventDefault()):I.record.length>0&&(I.timeline.onClickTimelineAction(I.record.tailIndex,!1),d=!0,t.preventDefault()):t.key==="ArrowDown"?c?(t.shiftKey?I.timeline.resizeSelection(!1):I.timeline.onClickTimelineAction(s+1,!1),f=!0,t.preventDefault()):I.record.length>0&&(I.timeline.onClickTimelineAction(0,!1),f=!0,t.preventDefault()):t.key==="Home"?(I.timeline.onClickTimelineAction(0,t.shiftKey),d=!0):t.key==="End"?(I.timeline.onClickTimelineAction(I.record.tailIndex,t.shiftKey),f=!0):t.key==="Escape"?(I.record.unselectAll(),I.displayCurrentState()):t.key==="a"&&n&&(I.timeline.onClickTimelineAction(0,!1),I.timeline.onClickTimelineAction(I.record.tailIndex,!0),t.preventDefault()),d?(this.scrollToTime(this.record.selectionStart?.tmp_startLockTime),CT()):f&&(this.scrollToTime(this.record.selectionEnd?.tmp_startLockTime),bT())}}setImageExportConfig(t){this.imageExportConfig=t}}const I=new Z2;function sh(e){const t=Mi();return t==="en"?e==="fieldop"?"Field Operations":e==="dungeon"?"Dungeons":e==="ultimate"?"Ultimates":e[0].toUpperCase()+e.substring(1):t==="zh"?e==="savage"?"":e==="extreme"?"":e==="ultimate"?"":"":e}function je(e,t,n,o,s){return{name:typeof e=="string"?{en:e,zh:e}:e,fightKind:t,supportedLanguages:typeof n=="string"?[n]:n,authors:typeof o=="string"?[o]:o,phased:s??!1}}const zA=new Map([["m9s",je("M9S","savage","en","shanzhe")],["m9s_zh",je("M9S","savage","zh",["shanzhe",""])],["m10s",je("M10S","savage","en","shanzhe")],["m10s_zh",je("M10S","savage","zh",["shanzhe",""])],["m11s",je("M11S","savage","en","shanzhe")],["m11s_zh",je("M11S","savage","zh",["shanzhe",""])],["m12s_p1",je({en:"M12S P1",zh:"M12S"},"savage","en","shanzhe")],["m12s_p1_zh",je({en:"M12S P1",zh:"M12S"},"savage","zh",["shanzhe",""])],["m12s_p2",je({en:"M12S P2",zh:"M12S"},"savage","en","shanzhe")],["m12s_p2_zh",je({en:"M12S P2",zh:"M12S"},"savage","zh",["shanzhe",""])],["m5s",je("M5S","savage","en","shanzhe")],["m6s",je("M6S","savage","en","shanzhe")],["m7s",je("M7S","savage","en","shanzhe")],["m8s_full",je("M8S","savage","en","shanzhe",!0)],["final_verse_q40",je("The Final Verse Q40","dungeon","en","shanzhe")],["dsr_p2",je("DSR P2","ultimate","en","Caro")],["dsr_p6",je("DSR P6","ultimate","en","Tischel")],["dsr_p7",je("DSR P7","ultimate","en","Tischel")],["TOP_2023_04_02",je("TOP","ultimate","en","Santa")],["m2s",je("M2S","savage","en","shanzhe")],["m3s",je("M3S","savage","en","shanzhe")],["m4s",je("M4S","savage","en","shanzhe")],["m1s_zh",je("M1S","savage","zh","kiyozero")],["m2s_zh",je("M2S","savage","zh","kiyozero")],["m3s_zh",je("M3S","savage","zh","kiyozero")],["m4s_zh",je("M4S","savage","zh","kiyozero")],["fru_en_full",je({en:"FRU",zh:""},"ultimate","en",["Yara","shanzhe"],!0)],["fru_zh",je({en:"FRU",zh:""},"ultimate","zh",["","czmm"])],["queen_eternal",je({en:"Queen Eternal",zh:""},"extreme","zh","")],["p1s_aetherial_shackles_first",je("P1S Aetherial Shackles first","savage","en")],["p1s_shackles_of_time_first",je("P1S Shackles of Time first","savage","en")],["p2s",je("P2S","savage","en")],["p5s_zh",je("P5S","savage","zh","3")],["p6s_zh",je("P6S","savage","zh","3")],["p7s_zh",je("P7S","savage","zh","3")],["p8s_p1_snake_zh",je({en:"P8S P1 snake first",zh:"P8S"},"savage","zh","3")],["p8s_p1_beast_zh",je({en:"P8S P1 dog first",zh:"P8S"},"savage","zh","3")],["p8s_p2_zh",je({en:"P8S P2",zh:"P8S"},"savage","zh","3")],["p9s",je("P9S","savage","en","Lilian")],["p10s",je("P10S","savage","en","Tischel")],["p11s",je("P11S","savage","en","Lilian")],["p12s_p1",je("P12S P1","savage","en","Yara")],["p12s_p2",je("P12S P2","savage","en","Yara")],["p9s_zh",je("P9S","savage","zh","3")],["p10s_zh",je("P10S","savage","zh","3")],["p11s_zh",je("P11S","savage","zh","3")],["p12s_p1_zh",je("P12S","savage","zh","3")],["p12s_p2_zh",je("P12S","savage","zh","3")]]),Q2=["m9s","m10s","m11s","m12s_p1","m12s_p2","m9s_zh","m10s_zh","m11s_zh","m12s_p1_zh","m12s_p2_zh","final_verse_q40","fru_en_full","fru_zh"],$2=["dsr_p2","dsr_p6","dsr_p7","TOP_2023_04_02"],J2=new Map([["7.0-7.3",["m2s","m3s","m4s","m1s_zh","m2s_zh","m3s_zh","m4s_zh","fru_en_full","fru_zh","queen_eternal","m5s","m6s","m7s","m8s_full","final_verse_q40"]],["6.X",["p1s_aetherial_shackles_first","p1s_shackles_of_time_first","p2s","dsr_p2","dsr_p6","dsr_p7","p5s_zh","p6s_zh","p7s_zh","p8s_p1_snake_zh","p8s_p1_beast_zh","p8s_p2_zh","p9s","p9s_zh","TOP_2023_04_02","p9s","p10s","p11s","p12s_p1","p12s_p2","p9s_zh","p10s_zh","p11s_zh","p12s_p1_zh","p12s_p2_zh"]]]);let ED=e=>{};const yh="/presets/markers/",Ur=20,wr=0,rs=5;function eF(e){const t=St();return l.jsx("hr",{style:{marginTop:e.marginTop,marginBottom:e.marginBottom,border:"none",borderTop:"1px solid "+t.bgHighContrast}})}const OR=function(e,t){Wb(e,n=>{try{const o=JSON.parse(n);t(o)}catch(o){console.log("Error fetching/parsing JSON "+e),console.error(o)}})},pu=C.createContext(""),cs=C.createContext({trackIndices:[],setTrackIndices:()=>{}});function mD(e,t,n){let o=Vi(n?.globalOffset??"");o=isNaN(o)?0:o;const s=Vi(n?.localOffset??"");I.timeline.loadCombinedTracksPreset(e,o+(isNaN(s)?0:s),n?.cutoff!==void 0?o+n.cutoff:void 0),t(I.timeline.getTrackIndices()),I.updateStats(),I.timeline.drawElements()}function AD(e){const t=C.useContext(pu),{setTrackIndices:n}=C.useContext(cs);return l.jsx("button",{onClick:o=>OR(e.url,s=>mD(s,n,{globalOffset:t,localOffset:e.offsetStr})),children:e.displayName})}function RD(e,t){return{en:(e.authors?.length??0)>0&&t?`${e.name.en} by ${e.authors?.join(" & ")}`:e.name.en,zh:(e.authors?.length??0)>0&&t?`${e.name.zh} ${e.authors?.join(" + ")} `:e.name.zh}}function tF(e){return l.jsx("div",{style:{marginBlock:1},children:l.jsx(AD,{displayName:N(RD(e.meta,e.showAuthors)),url:yh+e.fileName+".txt"})})}function aF(e){const t=C.useContext(pu),{setTrackIndices:n}=C.useContext(cs),o=En(C.useContext(pa)),[s,c]=C.useState(new Map),[d,f]=C.useState(void 0);C.useEffect(()=>{OR(yh+e.fileName+".txt",m=>{m.fileType!==di.MarkerTrackSet?console.error(`while parsing ${e.fileName}, got invalid file type ${m.fileType}`):f(m.phasedTracks)})},[]);const h=l.jsx("div",{style:{display:"grid",gridTemplateColumns:"2fr 3fr",gap:rs},children:d?.map(({offset:m,label:R,fileName:T},S)=>{let g=s.get(T);return g?.length||(g=m.toString()),T===void 0&&console.error("missing fileName for phase",R,"of",e.fileName),l.jsxs(Hn.Fragment,{children:[l.jsx("div",{style:{gridRow:S+1,gridColumn:1},children:l.jsx(jt,{description:"@",defaultValue:s.get(T)?.toString()??"",onChange:p=>{const _=new Map(s);p===void 0?_.delete(T):_.set(T,p),c(_)},width:8,placeholder:m.toString()})}),l.jsx("div",{style:{gridRow:S+1,gridColumn:2},children:l.jsx(AD,{displayName:N(R),url:yh+T,offsetStr:g})})]},S)})??N({en:"loading phases...",zh:""})});return l.jsx("div",{style:{display:"flex",flexDirection:"column",marginBlock:rs,marginLeft:5,paddingLeft:10,borderLeft:"1px solid "+o.bgHighContrast,minWidth:240},children:l.jsx(gl,{title:`trackPresets-phase-${e.fileName}`,titleNode:l.jsxs("div",{style:{display:"inline-flex",flexDirection:"row",gap:rs,alignItems:"baseline",marginBottom:4},children:[l.jsx("div",{children:N(RD(e.meta,e.showAuthors))}),l.jsx("span",{tabIndex:-1,children:" "}),l.jsx("div",{children:l.jsx("button",{onClick:m=>{m.stopPropagation();const R=new Map;d?.forEach((T,S)=>{let g;for(let p=S+1;p<d.length;p++){const _=s.get(d[p].fileName);if(_){const O=Vi(_);(g===void 0||O<g)&&(g=O)}}g!==void 0&&R.set(T.fileName,g)}),d?.forEach(T=>OR(yh+T.fileName,S=>{mD(S,n,{globalOffset:t,localOffset:s.get(T.fileName)??T.offset.toString(),cutoff:R.get(T.fileName)})}))},children:N({en:"Load all phases",zh:""})})})]}),noMargin:!0,autoIndent:!1,content:h})})}function YA(e){const t=new Map,n=c=>{const d=zA.get(c);if(!d){console.error("missing track metadata declaration for "+c);return}t.has(d.fightKind)||t.set(d.fightKind,new Map);const f=t.get(d.fightKind);d.supportedLanguages.forEach(h=>{f.has(h)||f.set(h,{unphased:[],phased:[],commonAuthors:d.authors});const m=f.get(h);(d.phased?m.phased:m.unphased).push(c),d.authors?.join("+")!==m.commonAuthors?.join("+")&&(m.commonAuthors=void 0)})};e.trackList.map(n);const o={marginBlock:1},s=l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:rs,paddingInlineStart:6,marginInlineStart:10},children:t.entries().map(([c,d],f)=>d.entries().flatMap(([h,m])=>[l.jsxs("div",{children:[l.jsxs("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",gap:rs,alignItems:"baseline"},children:[N({en:m.commonAuthors?l.jsxs("p",{style:o,children:[sh(c)," (",Jd(h),") by"," ",m.commonAuthors.join(" & "),":"]}):l.jsxs("p",{style:o,children:[sh(c)," (",Jd(h),"):"]}),zh:m.commonAuthors?l.jsxs("p",{style:o,children:[sh(c),"",Jd(h),""," ",m.commonAuthors.join(" + "),""]}):l.jsxs("p",{style:o,children:[sh(c),"",Jd(h),""]})}),m.unphased.map((R,T)=>l.jsx(tF,{meta:zA.get(R),fileName:R,showAuthors:!m.commonAuthors},T))]}),l.jsx("div",{children:m.phased.map((R,T)=>l.jsx(aF,{meta:zA.get(R),fileName:R,showAuthors:!m.commonAuthors},T))})]},`${f}-${h}`)]).toArray()).toArray()});return l.jsx(gl,{title:`trackPresets-${e.label.en}`,titleNode:N(e.label),titleBodyGap:rs,defaultShow:e.defaultShow,autoIndent:!1,content:s})}function nF(){const[e,t]=C.useState(Za.Info),[n,o]=C.useState(ft.Blue),[s,c]=C.useState("0"),[d,f]=C.useState("1"),[h,m]=C.useState("0"),[R,T]=C.useState(""),[S,g]=C.useState(!1),[p,_]=C.useState(k.TechnicalFinish),O={display:"inline-block",marginRight:"1em",marginBottom:6},{setTrackIndices:D}=C.useContext(cs);C.useEffect(()=>{ED=Y=>{t(Y.markerType),c(Y.time.toString()),f(Y.duration.toString()),Y.markerType===Za.Info?(o(Y.color),c(Y.time.toString()),f(Y.duration.toString()),m(Y.track.toString()),T(Y.description),g(Y.showText)):Y.markerType===Za.Buff&&(m(Y.track.toString()),_(Y.description))};const B=Tt("radio: markerType");B!==null&&(t(B),B===Za.Buff&&y(p))},[]);const L=(B,Y)=>l.jsx("option",{value:B,children:Y},B),w=l.jsxs("div",{children:[l.jsx(jt,{defaultValue:R,description:N({en:"Description: ",zh:""}),width:40,onChange:T}),l.jsx(jt,{defaultValue:h,description:N({en:"Track: ",zh:""}),width:4,style:O,onChange:m}),l.jsxs("div",{style:{display:"inline-block",marginTop:"4px"},children:[l.jsx("span",{children:N({en:"Color: ",zh:""})}),l.jsx("select",{style:{display:"inline-block",outline:"none"},value:n,onChange:B=>{B.target&&o(B.target.value)},children:[L(ft.Red,N({en:"red",zh:""})),L(ft.Orange,N({en:"orange",zh:""})),L(ft.Yellow,N({en:"yellow",zh:""})),L(ft.Green,N({en:"green",zh:""})),L(ft.Cyan,N({en:"cyan",zh:""})),L(ft.Blue,N({en:"blue",zh:""})),L(ft.Purple,N({en:"purple",zh:""})),L(ft.Pink,N({en:"pink",zh:""}))]}),l.jsx("div",{style:{background:n,marginLeft:"4px",display:"inline-block",verticalAlign:"middle",height:"1em",width:"4em"}})]}),l.jsxs("div",{style:{display:"inline-block",marginTop:"4px",marginLeft:"10px"},children:[l.jsx("input",{type:"checkbox",style:{position:"relative",top:3},checked:S,onChange:B=>{B.target&&g(B.target.checked)}}),l.jsx("span",{style:{marginLeft:4},children:N({en:"show text",zh:""})})]})]}),y=B=>{const Y=new Qh(B);f(Y.info.duration.toString())},x=yT.map(B=>l.jsx("option",{value:B.name,children:nC(B.name)},B.name)),G=l.jsxs("div",{children:[l.jsx("span",{children:N({en:"Buff: ",zh:""})}),l.jsx("select",{value:p,onChange:B=>{if(B.target){const Y=B.target.value;_(Y),y(Y)}},children:x}),l.jsx("div",{style:{marginTop:5},children:l.jsx(jt,{defaultValue:h,description:N({en:"Track: ",zh:""}),width:4,style:O,onChange:m})})]});return l.jsxs("div",{children:[l.jsx("p",{children:l.jsx("b",{children:N({en:"Add buffs/markers",zh:"buff"})})}),l.jsxs("form",{children:[l.jsxs("fieldset",{style:{display:"flex",alignItems:"baseline",paddingTop:0,paddingLeft:0,paddingBottom:0,marginLeft:0,marginBottom:10,border:0},children:[l.jsx("legend",{style:{float:"left",marginRight:"0.5rem",position:"relative",top:"1px"},children:N({en:"Type: ",zh:""})}),l.jsx(qb,{containerStyle:{display:"flex",flexDirection:"row",gap:"0.8rem"},uniqueName:"markerType",selected:e,onChange:B=>{t(B),B===Za.Buff&&y(p)},options:[[Za.Info,N({en:"Info",zh:""})],[Za.Buff,N({en:"Buff",zh:""})],[Za.Untargetable,N({en:"Untargetable",zh:""})]]})]}),l.jsx("span",{children:" "}),l.jsx(jt,{defaultValue:s,description:N({en:"Time: ",zh:""}),width:8,style:O,onChange:c}),l.jsx(jt,{defaultValue:d,description:N({en:"Duration: ",zh:""}),width:8,style:O,onChange:f}),e===Za.Info?w:void 0,e===Za.Buff?G:void 0,l.jsx("button",{type:"submit",style:{display:"block",marginTop:"0.5em"},onClick:B=>{const Y={type:ot.Marker,markerType:e,time:Vi(s),duration:parseFloat(d),color:n,track:parseInt(h),description:R,showText:S};let X;if(e===Za.Untargetable&&(Y.color=ft.Grey,Y.track=qi,Y.description="",Y.showText=!0),e===Za.Buff){const ie=new Qh(p),oe=parseFloat(d);!isNaN(oe)&&oe>ie.info.duration&&(X=N({en:`this buff can't last longer than ${ie.info.duration}s`,zh:`${ie.info.duration}`})),Y.color=ie.info.color,Y.description=ie.name,Y.duration=oe,Y.showText=!0}if((isNaN(Y.duration)||isNaN(Y.time)||isNaN(Y.track))&&(X=N({en:"some input(s) are invalid",zh:""})),Y.track!==qi&&(Y.track<wr||Y.track>Ur)&&(X=N({en:`marker track number must be between ${wr} and ${Ur}`,zh:`${wr}${Ur}`})),X){window.alert(X),B.preventDefault();return}I.timeline.addMarker(Y),I.updateStats(),D(I.timeline.getTrackIndices()),e===Za.Untargetable&&va(),B.preventDefault()},children:N({en:"add marker",zh:""})})]})]})}function iF(){const{trackIndices:e,setTrackIndices:t}=C.useContext(cs),n=parseInt(C.useContext(pu)),o=isNaN(n)?0:n,s=En(C.useContext(pa)),[c,d]=C.useState("0"),f=l.jsx("input",{style:{color:s.text,backgroundColor:"transparent",outline:"none",border:"none",borderBottom:"1px solid "+s.text},size:2,type:"text",value:c,onChange:T=>d(T.target.value)}),h=N({en:l.jsxs("span",{children:["Load into individual track ",f,": "]}),zh:l.jsxs("span",{children:["",f,""]})}),m=l.jsxs(l.Fragment,{children:[l.jsx(qh,{allowLoadFromUrl:!1,defaultLoadUrl:"",label:N({en:"Load multiple tracks combined: ",zh:""}),onLoadFn:T=>{I.timeline.loadCombinedTracksPreset(T,o),I.updateStats(),t(I.timeline.getTrackIndices()),I.timeline.drawElements()}}),l.jsx("div",{className:"paragraph",children:l.jsx(qh,{allowLoadFromUrl:!1,label:h,onLoadFn:T=>{const S=parseInt(c);if(isNaN(S)||S!==qi&&(S<wr||S>Ur)){window.alert(N({en:`marker track number must be between ${wr} and ${Ur}`,zh:`${wr}${Ur}`}));return}I.timeline.loadIndividualTrackPreset(T,S,o),I.updateStats(),t(I.timeline.getTrackIndices()),I.timeline.drawElements()}})})]}),R=l.jsxs(l.Fragment,{children:[l.jsx(Sl,{fileFormat:Mo.Json,getContentFn:()=>I.timeline.serializedCombinedMarkerTracks(),filename:"tracks_all",displayName:N({en:"all tracks combined",zh:""})},"combined"),e.map(T=>{let S=T.toString(),g=N({en:"track ",zh:""})+S;return T===qi&&(S="untargetable",g=N({en:"track untargetable",zh:""})),l.jsx(Sl,{fileFormat:Mo.Json,getContentFn:()=>{const p=I.timeline.serializedSeparateMarkerTracks();for(let _=0;_<p.length;_++)if(p[_].track===T)return p[_];return console.assert(!1),[]},filename:"track_"+S,displayName:g},T)})]});return l.jsxs("div",{children:[l.jsxs("p",{children:[l.jsx("b",{children:N({en:"Load marker tracks from file",zh:""})})," ",l.jsx(ze,{topic:"load tracks",content:N({en:"when loading additional markers, current markers will not be deleted",zh:""})})]}),m,l.jsx("p",{style:{marginTop:16},children:l.jsx("b",{children:N({en:"Save marker tracks to file",zh:""})})}),R]})}function oF(){const[e,t]=C.useState([]);C.useEffect(()=>{t(I.timeline.getTrackIndices())},[]);const[n,o]=C.useState(""),s=Vi(n),c=l.jsx(jt,{defaultValue:n,description:l.jsxs(l.Fragment,{children:[l.jsx("span",{style:{color:isNaN(s)||s===0?"":ft.Purple},children:N({en:"Load tracks with time offset ",zh:" "})}),l.jsx(ze,{topic:"trackLoadOffset",content:N({en:l.jsxs("div",{children:[l.jsx("p",{children:"When specified, all imported and preset tracks will start from the specified timestamp. Use this to combine markers for multi-phase fights with varying kill times."}),l.jsx("p",{children:"Loading preset tracks that already have phase timestamps will add this start value on top of the phase-specific timing."})]}),zh:l.jsxs("div",{children:[l.jsx("p",{children:"P"}),l.jsx("p",{children:"P"})]})})}),":"]}),width:4,onChange:o}),d=l.jsxs(l.Fragment,{children:[l.jsx("p",{children:l.jsx("b",{children:N({en:"Remove buffs/markers",zh:"buff"})})}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"max-content max-content",columnGap:2,rowGap:rs,alignItems:"center"},children:[l.jsx("div",{children:l.jsx("button",{onClick:()=>{I.timeline.deleteAllMarkers(),I.updateStats(),t([])},children:N({en:"clear all markers",zh:""})})}),l.jsx("div",{children:l.jsx("button",{onClick:()=>{const f=I.timeline.sortAndRemoveDuplicateMarkers();f>0?alert("removed "+f+" duplicate markers"):alert("no duplicate markers found"),I.timeline.updateTimelineMarkers()},children:N({en:"remove duplicates",zh:""})})}),l.jsx("div",{style:{gridColumn:"1 / 3"},children:N({en:"click a marker in the timeline to delete it",zh:""})})]})]});return l.jsx(NT,{contentHeight:lS,children:[{defaultSize:35,content:l.jsxs(l.Fragment,{children:[l.jsx("p",{children:l.jsx("b",{children:N({en:"Presets",zh:""})})}),l.jsx("div",{children:c}),l.jsx(pu.Provider,{value:n,children:l.jsxs(cs.Provider,{value:{trackIndices:e,setTrackIndices:t},children:[l.jsx(YA,{label:{en:"Current content",zh:""},trackList:Q2,defaultShow:!0}),l.jsx(YA,{label:{en:"Legacy ultimates",zh:""},trackList:$2,defaultShow:!0}),l.jsx("p",{children:l.jsx("b",{children:N({en:"Archive",zh:""})})}),Array.from(J2.entries().map(([f,h],m)=>l.jsx("div",{children:l.jsx(YA,{label:{en:f},trackList:h})},m)))]})})]})},{defaultSize:30,content:l.jsxs(l.Fragment,{children:[d,l.jsx(eF,{marginTop:15,marginBottom:15}),l.jsx(cs.Provider,{value:{trackIndices:e,setTrackIndices:t},children:l.jsx(nF,{})})]})},{defaultSize:35,content:l.jsx(l.Fragment,{children:l.jsx(pu.Provider,{value:n,children:l.jsx(cs.Provider,{value:{trackIndices:e,setTrackIndices:t},children:l.jsx(iF,{})})})})}]})}const ve=new Map;ve.set(k.LeyLines,"Buffs/BLM/Ley Lines.png");ve.set(k.Tincture,"Buffs/General/Tincture.png");ve.set(k.ArcaneCircle,"Buffs/RPR/Arcane Circle.png");ve.set(k.ArmysPaeon,"Buffs/BRD/Army's Paeon.png");ve.set(k.BattleLitany,"PartyBuffs/battle_litany.png");ve.set(k.BattleVoice,"Buffs/BRD/Battle Voice.png");ve.set(k.Brotherhood,"PartyBuffs/brotherhood.png");ve.set(k.Card_TheBalance,"PartyBuffs/the_balance.png");ve.set(k.Card_TheSpear,"PartyBuffs/the_spear.png");ve.set(k.ChainStratagem,"PartyBuffs/chain_stratagem.png");ve.set(k.Devilment,"Buffs/DNC/Devilment.png");ve.set(k.Divination,"PartyBuffs/divination.png");ve.set(k.Dokumori,"PartyBuffs/dokumori.png");ve.set(k.Embolden,"PartyBuffs/Embolden.png");ve.set(k.MagesBallad,"Buffs/BRD/Mage's Ballad.png");ve.set(k.RadiantFinale1,"Buffs/BRD/Radiant Finale.png");ve.set(k.RadiantFinale2,"Buffs/BRD/Radiant Finale.png");ve.set(k.RadiantFinale3,"Buffs/BRD/Radiant Finale.png");ve.set(k.SearingLight,"PartyBuffs/searing_light.png");ve.set(k.StandardFinish,"Buffs/DNC/Standard Finish.png");ve.set(k.StarryMuse,"Buffs/PCT/Starry Muse.png");ve.set(k.TechnicalFinish,"Buffs/DNC/Technical Finish.png");ve.set(k.WanderersMinuet,"Buffs/BRD/Wanderer's Minuet.png");ve.set(k.Acceleration,"Buffs/RDM/Acceleration.png");ve.set(k.Fuka,"Buffs/SAM/Fuka.png");ve.set(k.Fugetsu,"Buffs/SAM/Fugetsu.png");ve.set(k.EnhancedEnpi,"Buffs/SAM/Enhanced Enpi.png");ve.set(k.DeathsDesign,"Buffs/RPR/Death's Design.png");ve.set(k.ArcaneCircle,"Buffs/RPR/Arcane Circle.png");ve.set(k.RagingStrikes,"Buffs/BRD/Raging Strikes.png");ve.set(k.Barrage,"Buffs/BRD/Barrage.png");ve.set(k.NoMercy,"Buffs/GNB/No Mercy.png");ve.set(k.EnhancedPiercingTalon,"Buffs/DRG/Enhanced Piercing Talon.png");ve.set(k.PowerSurge,"Buffs/DRG/Power Surge.png");ve.set(k.LanceCharge,"Buffs/DRG/Lance Charge.png");ve.set(k.LifeOfTheDragon,"Buffs/DRG/Life of the Dragon.png");ve.set(k.LifeSurge,"Buffs/DRG/Life Surge.png");ve.set(k.DivineMight,"Buffs/PLD/Divine Might.png");ve.set(k.Requiescat,"Buffs/PLD/Requiescat Zero.png");ve.set(k.FightOrFlight,"Buffs/PLD/Fight or Flight.png");ve.set(k.Zoe,"Buffs/SGE/Zoe.png");ve.set(k.Autophysis,"Buffs/SGE/Autophysis.png");ve.set(k.Krasis,"Buffs/SGE/Krasis.png");ve.set(k.Philosophia,"Buffs/SGE/Philosophia.png");ve.set(k.Soteria,"Buffs/SGE/Soteria.png");ve.set(k.TrickAttack,"Buffs/NIN/Trick Attack.png");ve.set(k.KunaisBane,"Buffs/NIN/Kunai's Bane.png");ve.set(k.Bunshin,"Buffs/NIN/Bunshin.png");ve.set(k.RiddleOfFire,"Buffs/MNK/Riddle of Fire.png");ve.set(k.NeutralSect,"Buffs/AST/Neutral Sect.png");ve.set(k.Synastry,"Buffs/AST/Synastry.png");ve.set(k.TheArrow,"Buffs/AST/The Arrow.png");ve.set(k.Confession,"Buffs/WHM/Confession.png");ve.set(k.Asylum,"Buffs/WHM/Asylum.png");ve.set(k.Temperance,"Buffs/WHM/Temperance.png");ve.set(k.HuntersInstinct,"Buffs/VPR/Hunter's Instinct.png");ve.set(k.Swiftscaled,"Buffs/VPR/Swiftscaled.png");ve.set(k.FeyIllumination,"Buffs/SCH/Fey Illumination.png");ve.set(k.Dissipation,"Buffs/SCH/Dissipation.png");ve.set(k.Protraction,"Buffs/SCH/Protraction.png");ve.set(k.Recitation,"Buffs/SCH/Recitation.png");const us=new Map;ve.forEach((e,t)=>{const n=new Image;n.src="assets/"+e,n.onload=function(){ko()},us.set(t,n)});const cf=400,Ln=28,TD=e=>{e.setDraggedSkillElem(void 0),I.record.unselectAll(),I.displayCurrentState(),e.setBgSelecting(!0)};function lF(e){const{ctx:t,lines:n,images:o,viewInfo:s}=e;let{mouseX:c,mouseY:d}=e;const{colors:f,visibleWidth:h,renderingProps:m}=s;if(!n.length)return;const R=14,T=24,S=8,g=4;t.font="12px "+hi;let p=-1;n.forEach(G=>{p=Math.max(p,t.measureText(G).width)});let[_,O]=[p+2*S,R*n.length+2*g];o&&o.length>0&&(_=Math.max(_,S+o.length*(T+S)),O+=T+g);const D=4,L=11;let w=!1;d>=O+D?d=d-O-D:d+O<=m.timelineHeight?d=d+L+D:w=!0,w?(d=d-O/2,c=c+L+D):c-_/2>=0&&c+_/2<h?c=c-_/2:c-_/2<0?c=0:c=h-_,t.strokeStyle=f.bgHighContrast,t.lineWidth=1,t.fillStyle=f.tipBackground,t.fillRect(c,d,_,O),t.strokeRect(c,d,_,O),t.fillStyle=f.emphasis,t.textBaseline="top",t.textAlign="left";for(let G=0;G<n.length;G++)t.fillText(n[G],c+S,d+G*R+2+g);const y=c+S,x=d+n.length*R+2+g;if(o)for(let G=0;G<o.length;G++)o[G]&&t.drawImage(o[G],y+G*T,x,T*.75,T)}function sF(e){const{ctx:t,viewInfo:n,markerTracksTopY:o,markerTracksBottomY:s,timelineOrigin:c,trackBins:d,testInteraction:f}=e,h=n.colors,{countdown:m,scale:R}=n.renderingProps;t.lineCap="round",t.lineWidth=4,t.font="11px "+hi,t.textAlign="left",d.forEach((T,S)=>{let g=s-(S+1)*pe.trackHeight;S===qi&&(g=o);for(let p=0;p<T.length;p++){const _=T[p];let O=_.description;_.markerType===Za.Untargetable?O=N({en:"Untargetable",zh:""}):_.markerType===Za.Buff&&(O=nC(_.description));const D=c+Xe.positionFromTimeAndScale(_.time+m,R),L=()=>{const w=I.timeline.deleteMarker(_);console.assert(w),I.updateStats(),ED(_)};if(_.duration>0){const w=Xe.positionFromTimeAndScale(_.duration,R);if(_.markerType===Za.Buff){t.fillStyle=_.color+h.timeline.markerAlpha,t.fillRect(D,g,w,pe.trackHeight);const x=us.get(_.description);x&&t.drawImage(x,D,g,pe.trackHeight*.75,pe.trackHeight),t.fillStyle=h.emphasis,t.fillText(O,D+pe.trackHeight*1.5,g+10)}else _.showText?(t.fillStyle=_.color+h.timeline.markerAlpha,t.fillRect(D,g,w,pe.trackHeight),t.fillStyle=h.emphasis,t.fillText(O,D+pe.trackHeight/2,g+10)):(t.strokeStyle=_.color,t.beginPath(),t.moveTo(D,g+pe.trackHeight/2),t.lineTo(D+w,g+pe.trackHeight/2),t.stroke());const y=_.time+" - "+parseFloat((_.time+_.duration).toFixed(3));f({x:D,y:g,w:Math.max(w,pe.trackHeight),h:pe.trackHeight},{hoverTip:[`[${y}] ${O}`],onMouseUp:L})}else t.fillStyle=_.color,t.beginPath(),t.ellipse(D,g+pe.trackHeight/2,4,4,0,0,2*Math.PI),t.fill(),_.showText&&(t.fillStyle=h.emphasis,t.beginPath(),t.fillText(O,D+pe.trackHeight/2,g+10)),f({x:D-pe.trackHeight/2,y:g,w:pe.trackHeight,h:pe.trackHeight},{hoverTip:[`[${_.time}] ${O}`],onMouseUp:L})}})}function rF(e){const{ctx:t,viewInfo:n,timelineOriginX:o,timelineOriginY:s,elems:c,testInteraction:d}=e,f=n.colors,h=n.renderingProps.scale;t.lineWidth=1,t.strokeStyle=f.timeline.mpTickMark,t.beginPath(),c.forEach(m=>{const R=o+Xe.positionFromTimeAndScale(m.displayTime,h);t.moveTo(R,s),t.lineTo(R,s+pe.renderSlotHeight()),d({x:R-2,y:s,w:4,h:pe.renderSlotHeight()},{hoverTip:[`[${m.displayTime.toFixed(3)}] ${m.sourceDesc}`]})}),t.stroke()}function cF(e){const{ctx:t,viewInfo:n,timelineOriginX:o,timelineOriginY:s,elems:c,testInteraction:d}=e,f=n.colors,h=n.renderingProps.scale;t.lineWidth=1,t.strokeStyle=f.sam.meditation,t.beginPath(),c.forEach(m=>{const R=o+Xe.positionFromTimeAndScale(m.displayTime,h);t.moveTo(R,s),t.lineTo(R,s+pe.renderSlotHeight()),d({x:R-2,y:s,w:4,h:pe.renderSlotHeight()},{hoverTip:[`[${m.displayTime.toFixed(3)}] ${m.sourceDesc}`]})}),t.stroke()}function uF(e){const{ctx:t,viewInfo:n,timelineOriginX:o,timelineOriginY:s,elems:c,testInteraction:d}=e,f=n.colors,h=n.renderingProps.scale;t.lineWidth=1,t.strokeStyle=f.pld.ironWillColor,t.beginPath(),c.forEach(m=>{const R=o+Xe.positionFromTimeAndScale(m.displayTime,h);t.moveTo(R,s),t.lineTo(R,s+pe.renderSlotHeight()),d({x:R-2,y:s,w:4,h:pe.renderSlotHeight()},{hoverTip:[`[${m.displayTime.toFixed(3)}] ${m.sourceDesc}`]})}),t.stroke()}function dF(e){const{ctx:t,viewInfo:n,timelineOriginX:o,timelineOriginY:s,elems:c,testInteraction:d}=e,f=n.colors,h=n.renderingProps.scale;t.font="bold 10px "+hi,c.forEach(m=>{const R=o+Xe.positionFromTimeAndScale(m.displayTime,h),T=12,S=s+T;t.beginPath(),t.textAlign="center",t.moveTo(R,S-T),t.lineTo(R-T/2,S),t.lineTo(R+T/2,S),t.fillStyle=f.timeline.warningMark,t.fill(),t.fillStyle="white",t.fillText("!",R,S-1);let g="["+m.displayTime.toFixed(3)+"] ";switch(m.warningType.kind){case"combobreak":g+=N({en:"broken combo!",zh:""}).toString();break;case"overcap":g+=Ke(m.warningType.rsc).toString()+N({en:" overcap!",zh:""}).toString();break;case"overwrite":g+=Ke(m.warningType.rsc).toString()+N({en:" overwrite!",zh:""}).toString();break;case"timeout":g+=Ke(m.warningType.rsc).toString()+N({en:" expired!",zh:""});break;default:g+=N({en:m.warningType.en,zh:m.warningType.zh});break}d({x:R-T/2,y:S-T,w:T,h:T},{hoverTip:[g]})})}function KA(e){const{ctx:t,viewInfo:n,timelineOriginX:o,timelineOriginY:s,elems:c,testInteraction:d}=e,{colors:f,renderingProps:h}=n,m=h.scale;c.forEach(R=>{const T=R.type===ot.DamageMark&&Ja(R.displayTime),S=o+Xe.positionFromTimeAndScale(R.displayTime,m);let g="["+R.displayTime.toFixed(3)+"] ";const p=N({en:"Untargetable",zh:""});switch(R.type){case ot.AggroMark:t.fillStyle=f.timeline.aggroMark,g+=N({en:"aggro"});break;case ot.HealingMark:t.fillStyle=f.timeline.healingMark,g+=N({en:"healing potency",zh:""});break;default:t.fillStyle=T?f.timeline.untargetableDamageMark:f.timeline.damageMark,g+=N({en:"damage potency",zh:""})}t.beginPath(),R.type===ot.AggroMark||R.type===ot.DamageMark?(t.moveTo(S-3,s),t.lineTo(S+3,s),t.lineTo(S,s+6)):(t.moveTo(S-3,s+12),t.lineTo(S+3,s+12),t.lineTo(S,s+6)),t.fill();const _=R.buffs.filter(w=>w==="TINCTURE").length>0,O=[],D=[];R.potencyInfos.forEach(w=>{const y=w.sourceDesc.replace("{skill}",Wn(w.sourceSkill));if(T)O.push(0 .toFixed(3)+" ("+y+")");else if(w.sourceSkill in yo){const x=N({en:"LB"});O.push(x+" ("+y+")")}else{const x=w.potency.getAmount({tincturePotencyMultiplier:h.tincturePotencyMultiplier,includePartyBuffs:!0,includeSplash:!1});if(w.potency.targetCount>1){const G=x*(1-(w.potency.falloff??1)),B=w.potency.targetCount-1,Y=G.toFixed(2)+(B>1?` x ${B}`:""),X=B>1?N({en:`${y}, ${B} additional targets`,zh:`${y}, ${B} `}):N({en:`${y}, 1 additional target`,zh:`${y}, 1 `});O.push(x.toFixed(2)+" ("+N({en:`${y}, primary target`,zh:`${y}, `})+")"),O.push(Y+` (${X})`)}else O.push(x.toFixed(2)+" ("+y+")");_&&!D.includes(us.get(k.Tincture))&&D.push(us.get(k.Tincture)),w.potency.getPartyBuffs(R.displayTime).forEach(G=>{const B=us.get(G);D.includes(B)||D.push(B)})}});const L=R.type===ot.HealingMark?{x:S-3,y:s+6,w:6,h:6}:{x:S-3,y:s,w:6,h:6};d(L,{hoverTip:T?[g,...O,p]:[g,...O],hoverImages:D})})}function hF(e){const{ctx:t,viewInfo:n,timelineOriginX:o,timelineOriginY:s,elems:c,testInteraction:d}=e,f=n.colors,h=n.renderingProps.scale;t.fillStyle=f.timeline.lucidTickMark,c.forEach(m=>{const R=o+Xe.positionFromTimeAndScale(m.displayTime,h);t.beginPath(),t.moveTo(R-3,s),t.lineTo(R+3,s),t.lineTo(R,s+6),t.fill();const T=`[${m.displayTime.toFixed(3)}] ${m.sourceDesc.replace("{skill}",Wn("LUCID_DREAMING"))}`;d({x:R-3,y:s,w:6,h:6},{hoverTip:[T]})})}function fF(e){const{ctx:t,viewInfo:n,timelineOriginX:o,timelineOriginY:s,elems:c,interactive:d,testInteraction:f}=e,{colors:h,renderingProps:m}=n,R=m.scale,T=[],S=[],g=[],p=[],_=[],O=[],D=new Map([[k.Tincture,{color:h.timeline.potCover,showImage:!0}],[k.LeyLines,{color:h.timeline.llCover,showImage:!0}],[k.SearingLight,{color:h.smn.searing,showImage:!0}],[k.Hyperphantasia,{color:h.timeline.llCover,showImage:!1}],[k.StarryMuse,{color:h.timeline.buffCover,showImage:!0}],[k.Embolden,{color:h.rdm.emboldenBuff,showImage:!0}],[k.Acceleration,{color:h.rdm.accelBuff,showImage:!0}],[k.TechnicalFinish,{color:h.dnc.esprit,showImage:!0}],[k.Devilment,{color:h.dnc.feathers,showImage:!0}],[k.Fuka,{color:h.timeline.llCover,showImage:!0}],[k.Fugetsu,{color:h.sam.fugetsu,showImage:!0}],[k.NoMercy,{color:h.sam.fugetsu,showImage:!0}],[k.EnhancedPiercingTalon,{color:h.drg.enhancedPiercingTalon,showImage:!0}],[k.PowerSurge,{color:h.drg.powerSurge,showImage:!0}],[k.LifeSurge,{color:h.drg.lifeSurge,showImage:!0}],[k.LanceCharge,{color:h.drg.lanceCharge,showImage:!0}],[k.LifeOfTheDragon,{color:h.drg.lifeOfTheDragon,showImage:!0}],[k.BattleLitany,{color:h.drg.battleLitany,showImage:!0}],[k.DivineMight,{color:h.pld.divineMight,showImage:!0}],[k.Requiescat,{color:h.pld.requiescat,showImage:!0}],[k.FightOrFlight,{color:h.pld.fightOrFlight,showImage:!0}],[k.EnhancedEnpi,{color:h.rdm.accelBuff,showImage:!0}],[k.ArcaneCircle,{color:h.rpr.arcaneCircle,showImage:!0}],[k.DeathsDesign,{color:h.rpr.deathsDesign,showImage:!0}],[k.WanderersMinuet,{color:h.brd.wanderersCoda,showImage:!0}],[k.MagesBallad,{color:h.brd.magesCoda,showImage:!0}],[k.ArmysPaeon,{color:h.brd.armysCoda,showImage:!0}],[k.RagingStrikes,{color:h.brd.ragingStrikes,showImage:!0}],[k.Barrage,{color:h.brd.barrage,showImage:!0}],[k.BattleVoice,{color:h.brd.battleVoice,showImage:!0}],[k.RadiantFinale1,{color:h.brd.radiantFinale,showImage:!0}],[k.RadiantFinale2,{color:h.brd.radiantFinale,showImage:!0}],[k.RadiantFinale3,{color:h.brd.radiantFinale,showImage:!0}],[k.Zoe,{color:h.sge.zoe,showImage:!0}],[k.Autophysis,{color:h.sge.autophysis,showImage:!0}],[k.Krasis,{color:h.sge.krasis,showImage:!0}],[k.Soteria,{color:h.sge.soteria,showImage:!0}],[k.Philosophia,{color:h.sge.philosophia,showImage:!0}],[k.WaxingNocturne,{color:h.blu.moonflute,showImage:!0}],[k.Bristle,{color:h.blu.bristle,showImage:!0}],[k.Whistle,{color:h.blu.whistle,showImage:!0}],[k.TingleA,{color:h.blu.tinglea,showImage:!0}],[k.TingleB,{color:h.blu.tingleb,showImage:!0}],[k.Dokumori,{color:h.nin.dokumori,showImage:!0}],[k.TrickAttack,{color:h.nin.trick,showImage:!0}],[k.KunaisBane,{color:h.nin.trick,showImage:!0}],[k.Bunshin,{color:h.nin.bunshin,showImage:!0}],[k.RiddleOfFire,{color:h.mnk.riddleOfFire,showImage:!0}],[k.Brotherhood,{color:h.mnk.brotherhood,showImage:!0}],[k.Divination,{color:h.ast.div,showImage:!0}],[k.NeutralSect,{color:h.ast.neutral,showImage:!0}],[k.Synastry,{color:h.ast.synastry,showImage:!0}],[k.TheArrow,{color:h.ast.arrow,showImage:!0}],[k.Confession,{color:h.whm.confession,showImage:!0}],[k.Asylum,{color:h.whm.asylum,showImage:!0}],[k.Temperance,{color:h.whm.temperance,showImage:!0}],[k.HuntersInstinct,{color:h.vpr.huntersInstinct,showImage:!0}],[k.Swiftscaled,{color:h.vpr.swiftscaled,showImage:!0}],[k.ChainStratagem,{color:h.sch.chain,showImage:!0}],[k.FeyIllumination,{color:h.sch.feyIllumination,showImage:!0}],[k.Dissipation,{color:h.sch.dissipation,showImage:!0}],[k.Protraction,{color:h.sch.protraction,showImage:!0}],[k.Recitation,{color:h.sch.recitation,showImage:!0}]]),L=new Map;D.forEach((X,ie)=>L.set(ie,[]));const w=[],y=[],x=[],G=s+pe.skillButtonHeight/2;c.forEach(X=>{const ie=X,oe=o+Xe.positionFromTimeAndScale(ie.displayTime,R),j=ie.isGCD?G+pe.skillButtonHeight/2:G,$=ie.node.targetList;$.length>1?T.push({count:$.length,x:oe+pe.skillButtonHeight/2,y:j-5}):$.length===1&&$[0]!==1&&S.push({target:$[0],x:oe+pe.skillButtonHeight/2,y:j-3});const Ee=2,V=Xe.positionFromTimeAndScale(ie.lockDuration,R);if(ie.isSpellCast?(p.push({x:oe+Ee,y:j,w:V-Ee,h:pe.skillButtonHeight/2}),O.push(oe+Xe.positionFromTimeAndScale(ie.relativeSnapshotTime,R))):g.push({x:oe+Ee,y:j,w:V-Ee,h:pe.skillButtonHeight}),ie.isGCD){const fe=Xe.positionFromTimeAndScale(ie.recastDuration,R);_.push({x:oe+Ee,y:j+pe.skillButtonHeight/2,w:fe-Ee,h:pe.skillButtonHeight/2})}if(ie.skillName in yo){const fe=Xe.positionFromTimeAndScale(ie.recastDuration,R);g.push({x:oe+Ee,y:j+pe.skillButtonHeight/2,w:fe-Ee,h:pe.skillButtonHeight/2})}ie.node.tmp_invalid_reasons.length>0&&y.push({x:oe,y:s+pe.slotPaddingTop,w:Xe.positionFromTimeAndScale(ie.isGCD?Math.max(ie.recastDuration,ie.lockDuration):ie.lockDuration,R),h:pe.renderSlotHeight()-pe.slotPaddingBottom-pe.slotPaddingTop});let P=0;L.forEach((fe,M)=>{ie.node.hasBuff(M)&&(P+=K(P,fe))}),ie.node.hasPartyBuff()&&K(P,w);function K(fe,M){return m.drawOptions.drawBuffIndicators&&M.push({x:oe,y:j+Ln+fe*4,w:Ln,h:4}),1}hR(ie.skillName)&&x.push({elem:X,x:oe,y:j})}),t.font="13px "+hi,t.fillStyle=h.text,t.textAlign="center",T.forEach(X=>{t.fillText(""+X.count.toString(),X.x,X.y)}),t.font="26px "+hi,S.forEach(X=>{t.fillText(String.fromCharCode(9312+X.target-1),X.x,X.y)}),t.font="13px "+hi;const B=X=>{t.rect(X.x,X.y,X.w,X.h),d&&f(X,{onMouseDown:TD})};t.fillStyle=h.timeline.castBar,t.beginPath(),p.forEach(B),t.fill(),t.lineWidth=1,t.strokeStyle="rgba(151, 85, 239, 0.4)",t.beginPath(),O.forEach(X=>{t.moveTo(X,G+Ln/2),t.lineTo(X,G+Ln)}),t.stroke(),t.fillStyle=h.timeline.gcdBar,t.beginPath(),_.forEach(B),t.fill(),t.fillStyle=h.timeline.lockBar,t.beginPath(),g.forEach(B),t.fill(),L.forEach((X,ie)=>{t.fillStyle=D.get(ie).color,t.beginPath(),X.forEach(B),t.fill()}),t.fillStyle=h.timeline.buffCover,t.beginPath(),w.forEach(B),t.fill(),t.beginPath(),x.forEach(X=>{t.drawImage(hR(X.elem.skillName),X.x,X.y,Ln,Ln);const ie=X.elem.node,oe=[],j=[],$=Wn(X.elem.skillName)+"@"+X.elem.displayTime.toFixed(3);oe.push($);const Ee=ie.targetList;if(Ee.length>0&&(Ee.length===1?oe.push(N({en:"target: ",zh:""}).toString()+Ee[0]):oe.push(N({en:"targets: ",zh:""}).toString()+ie.targetList.join(" "))),!((ie.maybeGetActionKey()??"NEVER")in yo)){const P=ie.getPotency({tincturePotencyMultiplier:m.tincturePotencyMultiplier,includePartyBuffs:!0,includeSplash:!0,untargetable:Ja}).applied;P&&oe.push(N({en:"potency: ",zh:""})+P.toFixed(2));const K=ie.getHealingPotency({tincturePotencyMultiplier:m.tincturePotencyMultiplier,includeSplash:!0,includePartyBuffs:!0,untargetable:Ja}).applied;K&&oe.push(N({en:"healing potency: "})+K.toFixed(2))}let V=0;ie.tmp_endLockTime!==void 0&&ie.tmp_startLockTime!==void 0&&(V=ie.tmp_endLockTime-ie.tmp_startLockTime),oe.push(N({en:"duration: ",zh:""})+V.toFixed(3)),ie.tmp_invalid_reasons.length>0&&(oe.push(""),oe.push(N({en:"skill is invalid:",zh:""}).toString()),ie.tmp_invalid_reasons.forEach(P=>oe.push("- "+is(P)))),D.forEach((P,K)=>{P.showImage&&ie.hasBuff(K)&&j.push(us.get(K))}),ie.getPartyBuffs().forEach(P=>{const K=us.get(P);K&&j.push(K)}),d?f({x:X.x,y:X.y,w:Ln,h:Ln},{hoverTip:oe,onMouseUp:P=>{if(P.draggedSkillElem===void 0&&!P.bgSelecting){const K=I.record.selectionStartIndex,ne=I.record.selectionEndIndex;I.timeline.onClickTimelineAction(X.elem.actionIndex,P.shiftKey);const fe=I.record.selectionStartIndex,M=I.record.selectionEndIndex;fe===K&&M!==ne||fe===ne&&(M??0)>(ne??0)?bT():CT()}},onMouseDown:P=>{P.dragLock||P.setDraggedSkillElem(X.elem)},pointerMouse:!0,hoverImages:j}):f({x:X.x,y:X.y,w:Ln,h:Ln},{hoverTip:oe,pointerMouse:!1,hoverImages:j})});const Y=t.globalAlpha;return t.fillStyle=h.timeline.invalidBg,t.globalAlpha=.2,t.beginPath(),y.forEach(X=>{t.rect(X.x,X.y,X.w,X.h)}),t.fill(),t.globalAlpha=Y,new Map(d?x.map(X=>[X.elem.actionIndex,{x:X.x,y:X.y,w:Ln,h:Ln}]):[])}function DR(e){const{ctx:t,color:n,x:o,y1:s,y2:c,y3:d,tip:f,width:h,testInteraction:m}=e;t.fillStyle=n,t.beginPath(),t.moveTo(o-3,0),t.lineTo(o+3,0),t.lineTo(o,6),t.fill(),t.lineWidth=1,t.strokeStyle=n,t.setLineDash([]),t.beginPath(),t.moveTo(o,0),t.lineTo(o,s),t.stroke(),t.strokeStyle=n+"9f",t.setLineDash([2,3]),t.beginPath(),t.moveTo(o,s),t.lineTo(o,c),t.stroke();const R=t.lineWidth;h!==void 0&&(t.lineWidth=h),t.strokeStyle=n,t.setLineDash([]),t.beginPath(),t.moveTo(o,c),t.lineTo(o,d),t.stroke(),t.lineWidth=R,t.strokeStyle=n+"9f",t.setLineDash([2,3]),t.beginPath(),t.moveTo(o,d),t.lineTo(o,cf),t.stroke(),f!==void 0&&m?.({x:o-3,y:0,w:6,h:cf},{hoverTip:[f]}),t.setLineDash([])}function SD(e){const{ctx:t,viewInfo:n,originX:o,testInteraction:s}=e,c=e.ignoreVisibleX??!1,{colors:d,renderingProps:f,visibleWidth:h}=n,m=c?Xe.positionFromTimeAndScale(I.game.time+f.countdown,f.scale):h;t.fillStyle=d.timeline.ruler,t.fillRect(0,0,m,pe.rulerHeight),s({x:pe.leftBufferWidth,y:0,w:m-pe.leftBufferWidth,h:pe.rulerHeight},{hoverTip:p=>[(Xe.timeFromPositionAndScale(p.x-o,f.scale)-f.countdown).toFixed(3)],onMouseDown:p=>{const _=Xe.timeFromPositionAndScale(p.x-o,f.scale)-f.countdown;_<I.game.getDisplayTime()&&_>=-I.game.config.countdown?I.displayHistoricalState(_,void 0):I.displayCurrentState()}}),t.lineCap="butt",t.beginPath();const R=f.scale*100,T=f.countdown*R;t.lineWidth=1,t.strokeStyle=d.text,t.textBaseline="alphabetic",t.font="13px "+hi,t.textAlign="center",t.fillStyle=d.text;const S=50,g=function(p,_,O){const D=p*R,L=o+D+T;L>=-S&&L<=m+S&&(t.moveTo(L,0),t.lineTo(L,_),O&&t.fillText(Xe.displayTime(D/R,0),L,23))};if(R>=6){for(let p=0;p*R<f.timelineWidth-T;p+=1)p%5!==0&&g(p,6,!1);for(let p=-1;p*R>=-T;p-=1)p%5!==0&&g(p,6,!1)}for(let p=0;p*R<f.timelineWidth-T;p+=5)g(p,10,!0);for(let p=-5;p*R>=-T;p-=5)g(p,10,!0);return t.stroke(),pe.rulerHeight}function gD(e){const{ctx:t,viewInfo:n,originX:o,originY:s,testInteraction:c}=e,d=e.ignoreVisibleX??!1,{colors:f,renderingProps:h,visibleWidth:m}=n,R=d?Xe.positionFromTimeAndScale(I.game.time+h.countdown,h.scale):m,T=new Map;h.allMarkers.forEach(_=>{let O=T.get(_.track);O===void 0&&(O=[]),O.push(_),T.set(_.track,O)}),t.beginPath();let S=0,g=!1;for(const _ of T.keys())S=Math.max(S,_+1),_===qi&&(g=!0);g&&(S+=1);const p=s+S*pe.trackHeight;t.fillStyle=f.timeline.tracks;for(let _=0;_<S;_+=2){const O=p-(_+1)*pe.trackHeight;t.rect(0,O,R,pe.trackHeight)}return t.fill(),sF({ctx:t,viewInfo:n,markerTracksTopY:s,markerTracksBottomY:p,timelineOrigin:o,trackBins:T,testInteraction:c}),S*pe.trackHeight}function ID(e,t){e.fillStyle="rgba(147, 112, 219, 0.15)",e.fillRect(t.x,t.y,t.w,t.h),e.strokeStyle="rgba(147, 112, 219, 0.5)",e.lineWidth=1,e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(t.x,t.y+t.h),e.moveTo(t.x+t.w,t.y),e.lineTo(t.x+t.w,t.y+t.h),e.stroke()}function _D(e){const{ctx:t,viewInfo:n,originX:o,originY:s,isImageExportMode:c,testInteraction:d}=e,{colors:f,renderingProps:h}=n,m=o+Xe.positionFromTimeAndScale(h.countdown,h.scale);let R=new Map;for(let g=0;g<h.slots.length;g++){const p=g===h.activeSlotIndex,_=new Map;if(c&&!p)continue;h.slots[g].elements.forEach(w=>{const y=_.get(w.type)??[];y.push(w),_.set(w.type,y)});let O=s+g*pe.renderSlotHeight();c&&(O=s);const D={ctx:t,viewInfo:n,timelineOriginX:m,timelineOriginY:O,testInteraction:d};h.drawOptions.drawMPTickMarks&&rF({...D,elems:_.get(ot.MPTickMark)??[]}),h.drawOptions.drawHealingMarks&&KA({...D,elems:_.get(ot.HealingMark)??[]}),h.drawOptions.drawDamageMarks&&(KA({...D,elems:_.get(ot.DamageMark)??[]}),KA({...D,elems:_.get(ot.AggroMark)??[]})),h.drawOptions.drawMPTickMarks&&hF({...D,elems:_.get(ot.LucidMark)??[]}),cF({...D,elems:_.get(ot.MeditateTickMark)??[]}),uF({...D,elems:_.get(ot.AutoTickMark)??[]}),dF({...D,elems:_.get(ot.WarningMark)??[]});const L=fF({...D,elems:_.get(ot.Skill)??[],interactive:p});if(p&&(R=L),h.showSelection&&p&&!c){const w=m+Xe.positionFromTimeAndScale(h.selectionStartDisplayTime,h.scale),y=Xe.positionFromTimeAndScale(h.selectionEndDisplayTime-h.selectionStartDisplayTime,h.scale);ID(t,{x:w,y:O,w:y,h:pe.renderSlotHeight()})}}const T=Xe.positionFromTimeAndScale(h.countdown,h.scale);let S=pe.renderSlotHeight()*h.slots.length;if(h.slots.length<Oi&&(S+=pe.addSlotButtonHeight),t.fillStyle=f.timeline.countdown,t.fillRect(o-pe.leftBufferWidth,s,T+pe.leftBufferWidth,S),c)return new Map;for(let g=0;g<h.slots.length;g++){const _={x:0,y:s+g*pe.renderSlotHeight()+1,w:14,h:pe.renderSlotHeight()-2};if(t.fillStyle=g===h.activeSlotIndex?f.accent:f.bgMediumContrast,t.fillRect(_.x,_.y,_.w,_.h),d(_,{hoverTip:g===h.activeSlotIndex?void 0:[N({en:"set active",zh:""})],onMouseUp:(O,D)=>{D&&I.undoStack.doThenPush(new hP(h.activeSlotIndex,g))},pointerMouse:!0}),h.slots.length>1&&g===h.activeSlotIndex){t.fillStyle=f.emphasis,t.font="bold 14px "+hi,t.textAlign="center",t.fillText("",_.x+_.w/2,_.y+_.h-4);const O={x:_.x,y:_.y+_.h-_.w,w:_.w,h:_.w};d(O,{hoverTip:[N({en:"delete",zh:""})],onMouseUp:(D,L)=>{L&&I.undoStack.doThenPush(new fP(h.activeSlotIndex,I.record.serialized()))},pointerMouse:!0})}}return R}function EF(e){const{ctx:t,viewInfo:n,originX:o,timelineStartY:s,testInteraction:c}=e,{colors:d,renderingProps:f}=n,h=o+Xe.positionFromTimeAndScale(f.countdown,f.scale),m=pe.renderSlotHeight(),R=s+f.activeSlotIndex*m,T=new Map;f.sharedElements.forEach(g=>{const p=T.get(g.type)??[];p.push(g),T.set(g.type,p)});const S={y1:s,y2:R,y3:R+m};(T.get(ot.s_HistoricalCursor)??[]).forEach(g=>{const p=g;if(p.enabled){const _=h+Xe.positionFromTimeAndScale(g.displayTime,f.scale);DR({ctx:t,color:d.historical,x:_,...S,tip:N({en:"cursor: ",zh:""})+p.displayTime.toFixed(3),testInteraction:c})}}),(T.get(ot.s_Cursor)??[]).forEach(g=>{const p=g,_=h+Xe.positionFromTimeAndScale(p.displayTime,f.scale);DR({ctx:t,color:d.emphasis,x:_,...S,tip:N({en:"cursor: ",zh:""})+p.displayTime.toFixed(3),testInteraction:c})})}function mF(e){const{ctx:t,viewInfo:n,timelineStartY:o,mouseX:s,mouseY:c,selectStartX:d,selectStartY:f,interactionInfo:h,dragTargetTime:m}=e,{bgSelecting:R,draggedSkillElem:T}=h,{colors:S,visibleLeft:g,renderingProps:p}=n;if(R){const L={x:Math.min(d,s),y:Math.min(f,c),w:Math.abs(d-s),h:Math.abs(f-c)};ID(t,L)}const O=-g+pe.leftBufferWidth+Xe.positionFromTimeAndScale(p.countdown,p.scale);if(T){const L=t.globalAlpha;t.globalAlpha=.4,t.drawImage(hR(T.skillName),s,c,Ln,Ln),t.globalAlpha=L}const D=m;if(D!==null){const L=pe.renderSlotHeight(),w=o+p.activeSlotIndex*L,y=O+Xe.positionFromTimeAndScale(D,p.scale);DR({ctx:t,color:S.dropTarget,x:y,y1:o,y2:w,y3:w+L,width:4})}}function AF(e){const{ctx:t,viewInfo:{colors:n,renderingProps:o},originY:s,testInteraction:c}=e;if(o.slots.length<Oi){const h={x:4,y:s+2,w:192,h:pe.addSlotButtonHeight-4};t.fillStyle=n.bgLowContrast,t.fillRect(h.x,h.y,h.w,h.h),t.strokeStyle=n.bgHighContrast,t.lineWidth=1,t.strokeRect(h.x,h.y,h.w,h.h),t.font="13px "+hi,t.fillStyle=n.text,t.textAlign="center",t.fillText(N({en:"Add timeline slot",zh:""}),h.x+h.w/2,h.y+h.h-4),c(h,{onMouseUp:(R,T)=>{T&&I.undoStack.doThenPush(new EP(o.activeSlotIndex))},pointerMouse:!0});const m={x:2*4+192,y:s+2,w:192,h:pe.addSlotButtonHeight-4};return t.fillStyle=n.bgLowContrast,t.fillRect(m.x,m.y,m.w,m.h),t.strokeStyle=n.bgHighContrast,t.lineWidth=1,t.strokeRect(m.x,m.y,m.w,m.h),t.font="13px "+hi,t.fillStyle=n.text,t.textAlign="center",t.fillText(N({en:"Clone timeline slot",zh:""}),m.x+m.w/2,m.y+m.h-4),c(m,{onMouseUp:(R,T)=>{T&&I.undoStack.doThenPush(new mP(o.activeSlotIndex))},pointerMouse:!0}),pe.addSlotButtonHeight}return 0}function pD(){let e=0,t=!1;for(const n of I.timeline.getAllMarkers()){const o=n.track;e=Math.max(e,o+1),o===qi&&(t=!0)}return t&&(e+=1),e*pe.trackHeight}function ND(){return pe.rulerHeight+pD()}function RF(e){const{ctx:t,viewInfo:n,testInteraction:o}=e,{renderingProps:s,colors:c,visibleLeft:d,visibleWidth:f}=n,h=-d+pe.leftBufferWidth;let m=0;return t.fillStyle=c.background,t.fillRect(0,0,f+1,s.timelineHeight+1),o({x:0,y:0,w:f,h:cf},{onMouseDown:TD}),m+=SD({ctx:t,originX:h,viewInfo:n,testInteraction:o}),m+=pD(),_D({ctx:t,viewInfo:n,originX:h,originY:m,isImageExportMode:!1,testInteraction:o})}function TF(e){const{ctx:t,viewInfo:n,testInteraction:o}=e,s=-n.visibleLeft+pe.leftBufferWidth,c=gD({ctx:t,viewInfo:n,originX:s,originY:pe.rulerHeight,testInteraction:o});return AF({ctx:t,viewInfo:n,originY:ND()+pe.renderSlotHeight()*n.renderingProps.slots.length,testInteraction:o}),c}function DN(e){const{ctx:t,viewInfo:n,dragTargetTime:o,activeHoverTip:s,activeHoverImages:c,mouseX:d,mouseY:f,selectStartX:h,selectStartY:m,mouseInteractionInfo:R,testInteraction:T}=e,S=-n.visibleLeft+pe.leftBufferWidth,g=ND();EF({ctx:t,viewInfo:n,originX:S,timelineStartY:g,testInteraction:T}),R&&mF({ctx:t,viewInfo:n,timelineStartY:g,mouseX:d,mouseY:f,selectStartX:h,selectStartY:m,interactionInfo:R,dragTargetTime:o}),s!==void 0&&lF({ctx:t,viewInfo:n,lines:s,images:c,mouseX:d,mouseY:f})}function yN(e,t){const n=e.x+e.w<t.x,o=e.x>t.x+t.w,s=e.y+e.h<t.y,c=e.y>t.y+t.h;return!(n||o||s||c)}function CD(e,t){const[n,o]=e;return n!==void 0&&o!==void 0&&n>t.x&&n<t.x+t.w&&o>t.y&&o<t.y+t.h}function VA(e,t,n){const o=bD(e,t,n);return o!==void 0?o[0]:void 0}function bD(e,t,n){for(const[o,s]of Array.from(n.entries()).reverse())if(CD([e,t],o))return[s,o]}function WA(){return{mouseDown:new Map,mouseUp:new Map,mouseHover:new Map,pointer:new Map}}function rh(e){["mouseDown","mouseHover","mouseUp","pointer"].forEach(t=>e[t].clear())}function SF(e){const t=C.useRef(null),n=C.useRef(null),o=C.useRef(null),s=window.devicePixelRatio,c=e.visibleWidth*s,d=e.timelineHeight*s,f=C.useContext(pa),h=C.useContext($f),m=C.useContext(Gu),R=C.useRef([null,null]),T=C.useRef(0),S=C.useRef(0),g=C.useRef(void 0),p=C.useRef(void 0),_=C.useRef(0),O=C.useRef(0),D=C.useRef({}),[L,w]=C.useState(0),y=C.useRef(new Map),x=C.useRef({live:WA(),interactive:WA(),lowUpdate:WA()});function G(M){const ee=x.current;return new Map([...ee.live[M],...ee.interactive[M],...ee.lowUpdate[M]])}const B=C.useRef(void 0),Y=M=>{B.current=M},X=C.useRef(!1),ie=M=>{X.current=M},oe=M=>(ee,ce)=>{const{hoverTip:W,onMouseUp:z,onMouseDown:Q,pointerMouse:H,hoverImages:Z}=ce,ae=x.current[M];(W||Z)&&ae.mouseHover.set(ee,{tip:W,images:Z}),z&&ae.mouseUp.set(ee,z),Q&&ae.mouseDown.set(ee,Q),H!==void 0&&ae.pointer.set(ee,H)},j=M=>{const ee=-e.visibleLeft-pe.leftBufferWidth,ce=e.visibleWidth-ee;M.clearRect(ee,0,ce,cf+L)},$=()=>{const M=D.current.tip,ee={x:T.current,y:S.current,shiftKey:!1,dragLock:m.value,draggedSkillElem:B.current,bgSelecting:X.current,setDraggedSkillElem:Y,setBgSelecting:ie};return{viewInfo:{renderingProps:I.getTimelineRenderingProps(),colors:En(f),visibleLeft:e.visibleLeft,visibleWidth:e.visibleWidth},dragTargetTime:h.dragTargetTime,mouseX:T.current,mouseY:S.current,selectStartX:_.current,selectStartY:O.current,activeHoverTip:M!==void 0?Array.isArray(M)?M:M(ee):void 0,activeHoverImages:D.current.images,mouseInteractionInfo:ee}},Ee=()=>{const M=n.current?.getContext("2d",{alpha:!0});M&&(M.scale(s,s),j(M),rh(x.current.interactive),DN({ctx:M,...$(),testInteraction:oe("interactive")}),M.scale(1/s,1/s))},V={onMouseMove:(M,ee)=>{if(T.current=M,S.current=ee,D.current=VA(M,ee,G("mouseHover"))??{},X.current){const ce={x:Math.min(_.current,M),y:Math.min(O.current,ee),w:Math.abs(_.current-M),h:Math.abs(O.current-ee)};let W=null,z=null;for(const[Q,H]of y.current.entries())if(yN(H,ce)){W=Q,z=Q;break}if(z!==null)for(const[Q,H]of Array.from(y.current.entries()).reverse()){if(z>=Q)break;if(yN(H,ce)){z=Q;break}}(W!==R.current[0]||z!==R.current[1])&&(R.current=[W,z],W!==null&&z!==null?(I.record.selectSingle(W),I.record.selectUntil(z)):I.record.unselectAll(),I.displayCurrentState())}if(B.current){I.record.isInSelection(B.current.actionIndex)||I.timeline.onClickTimelineAction(B.current.actionIndex,!1);const ce=-e.visibleLeft+pe.leftBufferWidth;let W=1/0,z=-1,Q;const H=y.current,Z=Array.from(H.entries());for(let ge=0;ge<Z.length;ge++){const[_e,De]=Z[ge],Be=Math.abs(T.current-De.x);if(Q!==void 0&&Be>Q)break;Be<W&&(W=Be,z=_e),Q=Be}let ae=1/0;const he=I.getTimelineRenderingProps(),Re=he.sharedElements.filter(ge=>ge.type==ot.s_Cursor);let Ne;const Me=Re[Re.length-1].displayTime+he.countdown;Re.length>0&&(Ne=ce+Xe.positionFromTimeAndScale(Me,he.scale),ae=Math.abs(T.current-Ne));let me=null;const Ce=Array.from(H.keys());Ne!==void 0&&ae<W&&H.size>0&&z===Ce[Ce.length-1]&&(z=Ce[Ce.length-1]+1,me=Me-he.countdown),z!==-1&&h.dragTargetIndex!==z&&(me===null&&(z>0&&!B.current.isGCD?me=I.record.actions[z-1].tmp_endLockTime??null:me=I.record.actions[z].tmp_startLockTime??null,me!==null&&(me-=I.gameConfig.countdown)),h.setDragTarget(z,me))}e.setPointerMouse(VA(M,ee,G("pointer"))??!1),Ee()},onMouseEnter:()=>{},onMouseLeave:()=>{g.current=void 0,p.current=void 0,X.current=!1,(D.current.tip!==void 0||D.current.images!==void 0)&&(D.current={tip:void 0,images:void 0},Ee())},onMouseUp:(M,ee,ce)=>{if(T.current=ee,S.current=ce,B.current){const W=h.dragTargetIndex;h.setDragTarget(null,null),Y(void 0);let z=!0;if(W!==null){const Q=I.record.selectionStartIndex??0;let H=W-(Q??0);if(H>0&&(H-=I.record.getSelectionLength()),H!==0){I.undoStack.push(new Ah(Q,I.record.getSelectionLength(),H)),I.record.moveSelected(H),I.autoSave();const Z=va();ko();const ae=I.record.selectionStartIndex;ae!==void 0?I.displayHistoricalState(Z.skillUseTimes[ae],ae):I.displayCurrentState(),z=!1}}z&&Ee()}if(!I.inputLocked){const W=bD(ee,ce,G("mouseUp"));if(W!==void 0){const[z,Q]=W;z({x:ee,y:ce,shiftKey:M.shiftKey,dragLock:m.value,bgSelecting:X.current,setDraggedSkillElem:Y,setBgSelecting:ie},CD([g.current,p.current],Q))}}X.current=!1},onMouseDown:(M,ee)=>{if(g.current=M,p.current=ee,T.current=M,S.current=ee,!I.inputLocked){const ce=G("mouseDown");_.current=M,O.current=ee,VA(M,ee,ce)?.({x:M,y:ee,shiftKey:!1,dragLock:m.value,bgSelecting:X.current,setDraggedSkillElem:Y,setBgSelecting:ie})}},onKeyDown:M=>{I.handleTimelineKeyboardEvent(M),I.inputLocked||M.key==="Escape"&&(h.setDragTarget(null,null),Y(void 0))}};C.useEffect(()=>e.setCallbacks(V),[h.dragTargetTime,m.value]);const P=()=>{const[M,ee,ce]=[t,n,o].map((W,z)=>W.current?.getContext("2d",{alpha:z!==0}));if(M&&ee&&ce){[M,ee,ce].forEach(z=>z.scale(s,s)),rh(x.current.live),rh(x.current.interactive),rh(x.current.lowUpdate),[ee,ce].forEach(z=>j(z));const W={renderingProps:I.getTimelineRenderingProps(),colors:En(f),visibleLeft:e.visibleLeft,visibleWidth:e.visibleWidth};y.current=RF({ctx:M,viewInfo:W,testInteraction:oe("live")}),DN({ctx:ee,...$(),testInteraction:oe("interactive")}),w(TF({ctx:ce,viewInfo:W,testInteraction:oe("lowUpdate")})),[M,ee,ce].forEach(z=>z.scale(1/s,1/s))}};C.useEffect(Ee,[h.dragTargetTime]),C.useEffect(()=>{m.value||(Ee(),h.setDragTarget(null,null),Y(void 0))},[m.value]),C.useEffect(P,[T,S,e.version,s]),C.useEffect(()=>{P(),e.setCallbacks(V)},[e.visibleLeft,e.visibleWidth]);const K={width:e.visibleWidth,height:e.timelineHeight,position:"absolute",pointerEvents:"none",cursor:e.pointerMouse?"pointer":"default",left:0,top:0},ne=Math.ceil(c),fe=Math.ceil(d);return l.jsxs("div",{style:{position:"relative"},children:[l.jsx("canvas",{ref:t,width:ne,height:fe,tabIndex:0,style:{...K,zIndex:0}}),l.jsx("canvas",{ref:o,width:ne,height:fe,tabIndex:-1,style:{...K,zIndex:1,backgroundColor:"transparent"}}),l.jsx("canvas",{ref:n,width:ne,height:fe,tabIndex:-1,style:{...K,zIndex:2,backgroundColor:"transparent"}})]})}const iS=C.createContext(void 0),oS=C.createContext(void 0);function gF(){const e=C.useContext(oS),t=C.useContext(iS);if(!(t===void 0&&e===void 0))return{...e,...t}}function Ds(){const e=C.useContext(oS),t=C.useContext(iS);if(t===void 0)throw new Error("Base UI: DialogRootContext is missing. Dialog parts must be placed within <Dialog.Root>.");return{...e,...t}}const IF={...Df,...TT},OD=C.forwardRef(function(t,n){const{render:o,className:s,forceRender:c=!1,...d}=t,{open:f,nested:h,mounted:m,transitionStatus:R,backdropRef:T}=Ds(),S=C.useMemo(()=>({open:f,transitionStatus:R}),[f,R]);return ao("div",t,{state:S,ref:[T,n],customStyleHookMapping:IF,props:[{role:"presentation",hidden:!m,style:{userSelect:"none",WebkitUserSelect:"none"}},d],enabled:c||!h})}),_F=C.createContext(void 0);function pF(e=!1){const t=C.useContext(_F);if(t===void 0&&!e)throw new Error("Base UI: CompositeRootContext is missing. Composite parts must be placed within <Composite.Root>.");return t}function NF(e){const{focusableWhenDisabled:t,disabled:n,composite:o=!1,tabIndex:s=0,isNativeButton:c}=e,d=o&&t!==!1,f=o&&t===!1;return{props:C.useMemo(()=>{const m={onKeyDown(R){n&&t&&R.key!=="Tab"&&R.preventDefault()}};return o||(m.tabIndex=s,!c&&n&&(m.tabIndex=t?s:-1)),(c&&(t||d)||!c&&n)&&(m["aria-disabled"]=n),c&&(!t||f)&&(m.disabled=n),m},[o,n,t,d,f,c,s])}}function DD(e={}){const{disabled:t=!1,focusableWhenDisabled:n,tabIndex:o=0,native:s=!0}=e,c=C.useRef(null),d=pF(!0)!==void 0,f=lt(()=>{const R=c.current;return!!(R?.tagName==="A"&&R?.href)}),{props:h}=NF({focusableWhenDisabled:n,disabled:t,composite:d,tabIndex:o,isNativeButton:s});return wt(()=>{const R=c.current;R instanceof HTMLButtonElement&&d&&t&&h.disabled===void 0&&R.disabled&&(R.disabled=!1)},[t,h.disabled,d]),{getButtonProps:C.useCallback((R={})=>{const{onClick:T,onMouseDown:S,onKeyUp:g,onKeyDown:p,onPointerDown:_,...O}=R;return ST({type:s?"button":void 0,onClick(L){if(t){L.preventDefault();return}T?.(L)},onMouseDown(L){t||S?.(L)},onKeyDown(L){if(t||(dR(L),p?.(L)),L.baseUIHandlerPrevented)return;const w=L.target===L.currentTarget&&!s&&!f()&&!t,y=L.key==="Enter",x=L.key===" ";w&&((x||y)&&L.preventDefault(),y&&T?.(L))},onKeyUp(L){t||(dR(L),g?.(L)),!L.baseUIHandlerPrevented&&L.target===L.currentTarget&&!s&&!t&&L.key===" "&&T?.(L)},onPointerDown(L){if(t){L.preventDefault();return}_?.(L)}},s?void 0:{role:"button"},h,O)},[t,h,s,f]),buttonRef:c}}function CF(e){const{open:t,setOpen:n,disabled:o,nativeButton:s}=e,c=lt(m=>{t&&n(!1,m.nativeEvent,"close-press")}),{getButtonProps:d,buttonRef:f}=DD({disabled:o,native:s});return{getRootProps:m=>ST({onClick:c},m,d),ref:f}}const yD=C.forwardRef(function(t,n){const{render:o,className:s,disabled:c=!1,nativeButton:d=!0,...f}=t,{open:h,setOpen:m}=Ds(),{getRootProps:R,ref:T}=CF({disabled:c,open:h,setOpen:m,nativeButton:d}),S=C.useMemo(()=>({disabled:c}),[c]);return ao("button",t,{state:S,ref:[n,T],props:[f,R]})});function vD(e){return Nf(e,"base-ui")}const MD=C.forwardRef(function(t,n){const{render:o,className:s,id:c,...d}=t,{setDescriptionElementId:f}=Ds(),h=vD(c);return wt(()=>(f(h),()=>{f(void 0)}),[h,f]),ao("p",t,{ref:n,props:[{id:h},d]})});function bF(e){return hb(19)?e:e?"true":void 0}const LD="ArrowUp",xD="ArrowDown",HD="ArrowLeft",kD="ArrowRight",UD="Home",wD="End",OF=new Set([HD,kD]),DF=new Set([LD,xD]),yF=new Set([...OF,...DF]);[...yF];const vF=new Set([LD,xD,HD,kD,UD,wD]);function MF(e){const{descriptionElementId:t,initialFocus:n,mounted:o,openMethod:s,ref:c,setPopupElement:d,titleElementId:f}=e,h=C.useRef(null),m=Kr(c,h,d),R=C.useCallback(g=>g==="touch"?h:0,[]),T=C.useMemo(()=>n==null?R(s??""):typeof n=="function"?n(s??""):n,[R,n,s]);return{popupProps:{"aria-labelledby":f??void 0,"aria-describedby":t??void 0,role:"dialog",tabIndex:-1,ref:m,hidden:!o,onKeyDown(g){vF.has(g.key)&&g.stopPropagation()}},resolvedInitialFocus:T}}let LF=function(e){return e.nestedDialogs="--nested-dialogs",e}({}),xF=function(e){return e[e.open=ts.open]="open",e[e.closed=ts.closed]="closed",e[e.startingStyle=ts.startingStyle]="startingStyle",e[e.endingStyle=ts.endingStyle]="endingStyle",e.nested="data-nested",e.nestedDialogOpen="data-nested-dialog-open",e}({});const HF=C.forwardRef(function(t,n){const{cutout:o,...s}=t;let c;if(o){const d=o?.getBoundingClientRect();c=`polygon(
      0% 0%,
      100% 0%,
      100% 100%,
      0% 100%,
      0% 0%,
      ${d.left}px ${d.top}px,
      ${d.left}px ${d.bottom}px,
      ${d.right}px ${d.bottom}px,
      ${d.right}px ${d.top}px,
      ${d.left}px ${d.top}px
    )`}return l.jsx("div",{ref:n,role:"presentation","data-base-ui-inert":"",...s,style:{position:"fixed",inset:0,userSelect:"none",WebkitUserSelect:"none",clipPath:c}})}),PD=C.createContext(void 0);function kF(){const e=C.useContext(PD);if(e===void 0)throw new Error("Base UI: <Dialog.Portal> is missing.");return e}const UF={...Df,...TT,nestedDialogOpen(e){return e?{[xF.nestedDialogOpen]:""}:null}},GD=C.forwardRef(function(t,n){const{className:o,finalFocus:s,initialFocus:c,render:d,...f}=t,{descriptionElementId:h,dismissible:m,floatingRootContext:R,getPopupProps:T,modal:S,mounted:g,nested:p,nestedOpenDialogCount:_,open:O,openMethod:D,popupRef:L,setPopupElement:w,titleElementId:y,transitionStatus:x,onOpenChangeComplete:G,internalBackdropRef:B}=Ds();kF(),Of({open:O,ref:L,onComplete(){O&&G?.(!0)}});const Y=Kr(n,L),{popupProps:X,resolvedInitialFocus:ie}=MF({descriptionElementId:h,initialFocus:c,mounted:g,openMethod:D,ref:Y,setPopupElement:w,titleElementId:y}),oe=_>0,j=C.useMemo(()=>({open:O,nested:p,transitionStatus:x,nestedDialogOpen:oe}),[O,p,x,oe]),$=ao("div",t,{state:j,props:[T(),X,{style:{[LF.nestedDialogs]:_}},f],customStyleHookMapping:UF});return l.jsxs(C.Fragment,{children:[g&&S===!0&&l.jsx(HF,{ref:B,inert:bF(!O)}),l.jsx(wk,{context:R,disabled:!g,closeOnFocusOut:m,initialFocus:ie,returnFocus:s,modal:S!==!1,children:$})]})});function BD(e){const{children:t,keepMounted:n=!1,container:o}=e,{mounted:s}=Ds();return s||n?l.jsx(PD.Provider,{value:n,children:l.jsx(Lk,{root:o,children:t})}):null}const wF=()=>{};let vN={},MN={},LN="";function PF(e){if(typeof document>"u")return!1;const t=Jr(e);return Ba(t).innerWidth-t.documentElement.clientWidth>0}function GF(e){const n=Jr(e).documentElement,o=n.style.overflow;return n.style.overflow="hidden",()=>{n.style.overflow=o}}function BF(e){const t=Jr(e),n=t.documentElement,o=t.body,s=Ba(n);let c=0,d=0;const f=Ki.create();if(OC&&(s.visualViewport?.scale??1)!==1)return()=>{};function h(){const T=s.getComputedStyle(n),S=s.getComputedStyle(o);c=n.scrollTop,d=n.scrollLeft,vN={scrollbarGutter:n.style.scrollbarGutter,overflowY:n.style.overflowY,overflowX:n.style.overflowX},LN=n.style.scrollBehavior,MN={position:o.style.position,height:o.style.height,width:o.style.width,boxSizing:o.style.boxSizing,overflowY:o.style.overflowY,overflowX:o.style.overflowX,scrollBehavior:o.style.scrollBehavior};const g=typeof CSS<"u"&&CSS.supports?.("scrollbar-gutter","stable"),p=n.scrollHeight>n.clientHeight,_=n.scrollWidth>n.clientWidth,O=T.overflowY==="scroll"||S.overflowY==="scroll",D=T.overflowX==="scroll"||S.overflowX==="scroll",L=Math.max(0,s.innerWidth-n.clientWidth),w=Math.max(0,s.innerHeight-n.clientHeight),y=parseFloat(S.marginTop)+parseFloat(S.marginBottom),x=parseFloat(S.marginLeft)+parseFloat(S.marginRight);Object.assign(n.style,{scrollbarGutter:"stable",overflowY:!g&&(p||O)?"scroll":"hidden",overflowX:!g&&(_||D)?"scroll":"hidden"}),Object.assign(o.style,{position:"relative",height:y||w?`calc(100dvh - ${y+w}px)`:"100dvh",width:x||L?`calc(100vw - ${x+L}px)`:"100vw",boxSizing:"border-box",overflow:"hidden",scrollBehavior:"unset"}),o.scrollTop=c,o.scrollLeft=d,n.setAttribute("data-base-ui-scroll-locked",""),n.style.scrollBehavior="unset"}function m(){Object.assign(n.style,vN),Object.assign(o.style,MN),n.scrollTop=c,n.scrollLeft=d,n.removeAttribute("data-base-ui-scroll-locked"),n.style.scrollBehavior=LN}function R(){m(),f.request(h)}return h(),s.addEventListener("resize",R),()=>{f.cancel(),m(),s.removeEventListener("resize",R)}}class FF{lockCount=0;restore=null;timeoutLock=_l.create();timeoutUnlock=_l.create();acquire(t){return this.lockCount+=1,this.lockCount===1&&this.restore===null&&this.timeoutLock.start(0,()=>this.lock(t)),this.release}release=()=>{this.lockCount-=1,this.lockCount===0&&this.restore&&this.timeoutUnlock.start(0,this.unlock)};unlock=()=>{this.lockCount===0&&this.restore&&(this.restore?.(),this.restore=null)};lock(t){if(this.lockCount===0||this.restore!==null)return;const o=Jr(t).documentElement,s=Ba(o).getComputedStyle(o).overflowY;if(s==="hidden"||s==="clip"){this.restore=wF;return}const c=LH||!PF(t);this.restore=c?GF(t):BF(t)}}const jF=new FF;function zF(e){const{enabled:t=!0,mounted:n,open:o,referenceElement:s=null}=e;wt(()=>{if(t&&OC&&n&&!o){const c=Jr(s),d=c.body.style.userSelect,f=c.body.style.webkitUserSelect;return c.body.style.userSelect="none",c.body.style.webkitUserSelect="none",()=>{c.body.style.userSelect=d,c.body.style.webkitUserSelect=f}}},[t,n,o,s]),wt(()=>{if(t)return jF.acquire(s)},[t,s])}function YF(e){const t=C.useRef(""),n=C.useCallback(s=>{s.defaultPrevented||(t.current=s.pointerType,e(s,s.pointerType))},[e]);return{onClick:C.useCallback(s=>{if(s.detail===0){e(s,"keyboard");return}"pointerType"in s&&e(s,s.pointerType),e(s,t.current),t.current=""},[e]),onPointerDown:n}}function KF(e){const[t,n]=C.useState(null),o=lt((f,h)=>{e||n(h)}),s=lt(()=>{n(null)}),{onClick:c,onPointerDown:d}=YF(o);return C.useMemo(()=>({openMethod:t,reset:s,triggerProps:{onClick:c,onPointerDown:d}}),[t,s,c,d])}function VF(e){const{defaultOpen:t,dismissible:n,modal:o,onNestedDialogClose:s,onNestedDialogOpen:c,onOpenChange:d,open:f,onOpenChangeComplete:h}=e,[m,R]=IC({controlled:f,default:t,name:"DialogRoot",state:"open"}),T=C.useRef(null),S=C.useRef(null),g=C.useRef(null),[p,_]=C.useState(void 0),[O,D]=C.useState(void 0),[L,w]=C.useState(null),[y,x]=C.useState(null),{mounted:G,setMounted:B,transitionStatus:Y}=rb(m),{openMethod:X,triggerProps:ie,reset:oe}=KF(m),j=lt((Z,ae,he)=>{d?.(Z,ae,he),R(Z)}),$=lt(()=>{B(!1),h?.(!1),oe()});Of({enabled:!e.actionsRef,open:m,ref:T,onComplete(){m||$()}}),C.useImperativeHandle(e.actionsRef,()=>({unmount:$}),[$]);const V=RT({elements:{reference:L,floating:y},open:m,onOpenChange:(Z,ae,he)=>{j(Z,ae,cb(he))}}),[P,K]=C.useState(0),ne=P===0,fe=LU(V),M=Gk(V),ee=lb(V,{outsidePressEvent:"intentional",outsidePress(Z){if(Z.button!==0)return!1;const ae=Yn(Z);if(ne&&n){const he=ae;return o?he?g.current===he||S.current===he:!1:!0}return!1},escapeKey:ne});zF({enabled:m&&o===!0,mounted:G,open:m,referenceElement:y});const{getReferenceProps:ce,getFloatingProps:W}=sb([fe,M,ee]);C.useEffect(()=>(c&&m&&c(P),s&&!m&&s(),()=>{s&&m&&s()}),[m,s,c,P]);const z=C.useCallback(Z=>{K(Z+1)},[]),Q=C.useCallback(()=>{K(0)},[]),H=C.useMemo(()=>ce(ie),[ce,ie]);return C.useMemo(()=>({modal:o,setOpen:j,open:m,titleElementId:p,setTitleElementId:_,descriptionElementId:O,setDescriptionElementId:D,onNestedDialogOpen:z,onNestedDialogClose:Q,nestedOpenDialogCount:P,openMethod:X,mounted:G,transitionStatus:Y,triggerProps:H,getPopupProps:W,setTriggerElement:w,setPopupElement:x,popupRef:T,backdropRef:S,internalBackdropRef:g,floatingRootContext:V}),[o,j,m,p,O,z,Q,P,X,G,Y,H,W,V])}const FD=function(t){const{children:n,defaultOpen:o=!1,dismissible:s=!0,modal:c=!0,onOpenChange:d,open:f,actionsRef:h,onOpenChangeComplete:m}=t,R=gF(),T=VF({open:f,defaultOpen:o,onOpenChange:d,modal:c,dismissible:s,actionsRef:h,onOpenChangeComplete:m,onNestedDialogClose:R?.onNestedDialogClose,onNestedDialogOpen:R?.onNestedDialogOpen}),S=!!R,g=C.useMemo(()=>({...T,nested:S,onOpenChangeComplete:m}),[T,S,m]),p=C.useMemo(()=>({dismissible:s}),[s]);return l.jsx(iS.Provider,{value:g,children:l.jsx(oS.Provider,{value:p,children:n})})},jD=C.forwardRef(function(t,n){const{render:o,className:s,id:c,...d}=t,{setTitleElementId:f}=Ds(),h=vD(c);return wt(()=>(f(h),()=>{f(void 0)}),[h,f]),ao("h2",t,{ref:n,props:[{id:h},d]})}),zD=C.forwardRef(function(t,n){const{render:o,className:s,disabled:c=!1,nativeButton:d=!0,...f}=t,{open:h,setTriggerElement:m,triggerProps:R}=Ds(),T=C.useMemo(()=>({disabled:c,open:h}),[c,h]),{getButtonProps:S,buttonRef:g}=DD({disabled:c,native:d});return ao("button",t,{state:T,ref:[g,n,m],props:[R,{[ZC]:""},f,S],customStyleHookMapping:db})}),YD=window.location.hostname==="xivintheshell.com"?"a023d800-1740-426a-8134-915efc395aa3":window.location.hostname==="beta.xivintheshell.com"?"a0281008-3d39-4afc-81b4-a8ddbf7cbd44":window.location.host==="localhost:3000"?"a028101a-803b-4ad4-99b6-bacb8484e214":window.location.host==="localhost:4173"?"a0281237-7471-47d4-b33c-52a6cbaed4c1":"",WF="https://www.fflogs.com/oauth/authorize",XF="https://www.fflogs.com/oauth/token";function qF(){const e=new Uint8Array(64);return window.crypto.getRandomValues(e),Array.from(e,t=>t.toString(16).padStart(2,"0")).join("")}async function ZF(e){const n=new TextEncoder().encode(e),o=await window.crypto.subtle.digest("SHA-256",n);return btoa(String.fromCharCode(...new Uint8Array(o))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}const uf="pkceCodeVerifier",Nu="pkceStateBlob";async function xN(){const e=qF(),t=await ZF(e),n=window.crypto.randomUUID();localStorage.getItem(uf)===null&&window.localStorage.setItem(uf,e),window.localStorage.getItem(Nu)===null&&window.localStorage.setItem(Nu,n);const o=new URLSearchParams({client_id:YD,code_challenge:t,code_challenge_method:"S256",state:n,redirect_uri:window.location.origin,response_type:"code"});window.location.href=`${WF}?${o.toString()}`}function vh(){window.localStorage.removeItem(uf),window.localStorage.removeItem(Nu)}var Mh=(e=>(e[e.UNAUTHORIZED=0]="UNAUTHORIZED",e[e.NO_PKCE_VERIFIER=1]="NO_PKCE_VERIFIER",e[e.BAD_PKCE_STATE=2]="BAD_PKCE_STATE",e[e.SUCCESS=3]="SUCCESS",e[e.FAILURE=4]="FAILURE",e))(Mh||{});async function HN(){const e=new URLSearchParams(window.location.search);window.history.replaceState({},"",window.location.pathname);const t=e.get("code"),n=window.localStorage.getItem(uf),o=window.localStorage.getItem(Nu);if(!t)return 0;if(!n)return console.error("PKCE verifier could not be retrieved"),vh(),1;e.get("state")!==o&&(console.error("PKCE response did not have expected state; force setting new value"),console.log("expected:",o),console.log("actual:",e.get("state")),window.localStorage.setItem(Nu,e.get("state")));const s=new URLSearchParams({client_id:YD,code_verifier:n,redirect_uri:window.location.origin,grant_type:"authorization_code",code:t});try{const c=await fetch(XF,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:s.toString()});if(c.ok){const d=await c.json();return window.sessionStorage.setItem("fflogsAuthToken",d.access_token),console.log("saved auth tokens to sessionStorage"),3}else return console.log("PKCE response was not ok; clearing intermediate state"),console.error(c),vh(),4}catch(c){return console.log("PKCE exchange failed; clearing intermediate state"),console.error(c),vh(),4}}function QF(e){const t=URL.parse(e.replace("#","?"));if(t===null)return{apiBaseUrl:"",reportCode:"",error:{en:"invalid URL",zh:""}};if(t.hostname!=="www.fflogs.com"&&t.hostname!=="cn.fflogs.com")return{apiBaseUrl:"",reportCode:"",error:{en:"must be a link to www.fflogs.com or cn.fflogs.com",zh:"www.fflogs.comcn.fflogs.com"}};const n=t.pathname.split("/").filter(m=>m.length>0);if(n.length!==2)return console.error("parsed link parts:",n),{apiBaseUrl:"",reportCode:"",error:{en:"link must contain a single report",zh:""}};console.assert(n.length>0);const o=n[n.length-1],s=t.searchParams,c=parseInt(s.get("fight")??"NaN"),d=isNaN(c)?void 0:c,f=parseInt(s.get("source")??"NaN"),h=isNaN(f)?void 0:f;return{apiBaseUrl:`https://${t.hostname}/api/v2/user/`,reportCode:o,fightID:d,playerID:h}}const KD=new Map([["Paladin","PLD"],["Warrior","WAR"],["DarkKnight","DRK"],["Gunbreaker","GNB"],["WhiteMage","WHM"],["Scholar","SCH"],["Astrologian","AST"],["Sage","SGE"],["Monk","MNK"],["Dragoon","DRG"],["Ninja","NIN"],["Viper","VPR"],["Samurai","SAM"],["Reaper","RPR"],["Bard","BRD"],["Machinist","MCH"],["Dancer","DNC"],["BlackMage","BLM"],["Summoner","SMN"],["RedMage","RDM"],["Pictomancer","PCT"],["BlueMage","BLU"]]),kN=new Set([7,8,33218,34682]),sl={TEMPERA_COAT:1003686,TEMPERA_GRASSA:1003687,BLACKEST_NIGHT:1001178,TENGENTSU:1003853,THIRD_EYE:1001232,CREST_OF_TIME_BORROWED:1002596,COLD_FOG:1002493},$F=new Map([["TEMPERA_COAT_POP","TEMPERA_COAT"],["TEMPERA_GRASSA_POP","TEMPERA_GRASSA"],["THE_BLACKEST_NIGHT_POP","THE_BLACKEST_NIGHT"],["TENGENTSU_POP","TENGENTSU"],["THIRD_EYE_POP","THIRD_EYE"],["ARCANE_CREST_POP","ARCANE_CREST"],["POP_COLD_FOG","COLD_FOG"]]),JF=`
query ListReportFights($reportCode: String) {
	reportData {
		report(code: $reportCode) {
			fights {
				bossPercentage
				encounterID
				id
				name
				kill
				startTime
			}
			startTime
		}
	}
}`,ej=`
query ListReportFightIDs($reportCode: String) {
	reportData {
		report(code: $reportCode) {
			fights {
				id
			}
		}
	}
}`,tj=`
query ListFightPlayers($reportCode: String, $fightID: Int) {
	reportData {
		report(code: $reportCode) {
			fights(fightIDs: [$fightID]) {
				bossPercentage
				encounterID
				id
				name
				kill
				startTime
			}
			startTime
			playerDetails(fightIDs: [$fightID])
		}
	}
}`,aj=`
query GetPlayerEvents($reportCode: String, $fightID: Int, $playerID: Int) {
	reportData {
		report(code: $reportCode) {
			events(sourceID: $playerID, fightIDs: [$fightID]) {
				data
				nextPageTimestamp
			}
			fights(fightIDs: [$fightID]) {
				name
				combatTime
				startTime
				endTime
			}
			playerDetails(fightIDs: [$fightID])
		}
	}
}`;async function Qf(e,t,n){const o={method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${window.sessionStorage.getItem("fflogsAuthToken")}`},body:JSON.stringify({query:t,variables:n})};return fetch(e,o).then(s=>s.json()).then(s=>{if(s.error!==void 0)throw new Error(s.error);if(s.errors!==void 0)throw new Error(s.errors);return s.data})}const UN=new Map;function VD(e,t){const n=t.bossPercentage===null?N({en:"(trash)",zh:""}).toString():t.bossPercentage.toFixed(1)+"%";return{label:{en:`${t.name} - ${t.kill?"kill":n}`,zh:`${t.name} - ${t.kill?"":n}`},id:t.id,unixStartTime:e+t.startTime}}async function nj(e,t){const n=UN.get(t);if(n!==void 0)return n;const o=await Qf(e,JF,{reportCode:t}),s=o.reportData.report.startTime,c=o.reportData.report.fights.map(d=>VD(s,d));return UN.set(t,c),c}async function ij(e,t){const o=(await Qf(e,ej,{reportCode:t})).reportData.report.fights.map(s=>s.id);return Math.max(...o)}function WD(e){return`${e.name??N({en:"(name unknown)",zh:""})} @ ${e.server??N({en:"(world unknown)",zh:""})}`}const ch=new Map;async function wN(e,t,n){const o=ch.get(t)?.get(n);if(o!==void 0)return o;const s=await Qf(e,tj,{reportCode:t,fightID:n}),c=Object.values(s.reportData.report.playerDetails.data.playerDetails).flat().map(h=>({id:h.id,name:WD(h),job:KD.get(h.type)??"???"})),d=s.reportData.report.startTime,f=VD(d,s.reportData.report.fights[0]);return ch.has(t)?ch.get(t).set(n,[f,c]):ch.set(t,new Map([[n,[f,c]]])),c.sort((h,m)=>{const R=Lo.indexOf(h.job)-Lo.indexOf(m.job);return R===0?h.name.localeCompare(m.name):R}),[f,c]}const _r=new Map;async function PN(e){const t=_r.get(e.reportCode)?.get(e.fightID)?.get(e.playerID);if(t!==void 0)return console.log("query cache hit for",e),t;const n=await Qf(e.apiBaseUrl,aj,e),o=Object.values(n.reportData.report.playerDetails.data.playerDetails).flat().filter(y=>y.id===e.playerID)[0],s=KD.get(o.type),c=WD(o);let d,f;const h=n.reportData.report.fights[0],m=[],R=[],T=[],S=new Set,g=new Map;let p;const _=new Map,O=new Map,D=new Map;for(let y of n.reportData.report.events.data)if(y.sourceID===e.playerID)if(y.type==="cast"&&!kN.has(y.abilityGameID))p!==void 0&&(p.abilityGameID===y.abilityGameID&&(_.set(p.timestamp,y.timestamp),y=p),p=void 0),m.push(y),R.push(y.timestamp);else if(y.type==="begincast"&&!kN.has(y.abilityGameID))p=y;else if(y.type==="calculateddamage"){let x=g.get(y.timestamp);x===void 0&&(x=[],g.set(y.timestamp,x)),x.push(y),S.has(y.targetID)||(T.push(y.targetID),S.add(y.targetID))}else if(y.type==="combatantinfo")d=y.level,f={main:y[dt[s].mainStat],spellSpeed:y.spellSpeed,skillSpeed:y.skillSpeed,criticalHit:y.criticalHit,directHit:y.directHit,determination:y.determination,piety:y.piety,tenacity:y.tenacity};else if(y.type==="removebuff"){let x;const G=y.timestamp,B=y.abilityGameID;s==="PCT"&&y.targetID===e.playerID?B===sl.TEMPERA_COAT?x="TEMPERA_COAT_POP":B===sl.TEMPERA_GRASSA&&(x="TEMPERA_GRASSA_POP"):s==="DRK"?B===sl.BLACKEST_NIGHT&&(x="THE_BLACKEST_NIGHT_POP"):s==="SAM"&&y.targetID===e.playerID?B===sl.TENGENTSU?x="TENGENTSU_POP":B===sl.THIRD_EYE&&(x="THIRD_EYE_POP"):s==="RPR"&&y.targetID===e.playerID?B===sl.CREST_OF_TIME_BORROWED&&(x="ARCANE_CREST_POP"):s==="BLU"&&y.targetID===e.playerID&&B===sl.COLD_FOG&&(x="POP_COLD_FOG"),x!==void 0&&(O.has(x)?O.get(x).add(G):O.set(x,new Set([G])))}else y.type==="applybuff"&&y.targetID===e.playerID&&s==="PCT"&&y.abilityGameID===sl.TEMPERA_GRASSA&&(D.has("TEMPERA_GRASSA")||D.set("TEMPERA_GRASSA",new Set),D.get("TEMPERA_GRASSA").add(y.timestamp));D.get("TEMPERA_GRASSA")?.forEach(y=>O.get("TEMPERA_COAT_POP")?.delete(y));const L=m.map(y=>{const x=y.abilityGameID,G=Li.get(x)??(x>34e6?"TINCTURE":"NEVER");G==="NEVER"&&console.error("unknown action id",x);let B=g.get(y.timestamp)?.filter(X=>X.abilityGameID===x)??[];if(B.length===0){const X=_.get(y.timestamp);X!==void 0&&(B=g.get(X)?.filter(ie=>ie.abilityGameID===x)??[])}let Y=[1];if(B.length>0){let X=B[0].targetID,ie=B[0].unmitigatedAmount;const oe=new Set([X]);for(let j=1;j<B.length;j++){const $=B[j];$.unmitigatedAmount>ie&&(X=$.targetID,ie=$.unmitigatedAmount),oe.add($.targetID)}oe.delete(X),Y=Array.from(oe),Y.splice(0,0,X),Y=Y.map(j=>T.indexOf(j)+1)}return{type:ke.Skill,skillName:G,targetList:Y,healTargetCount:void 0}}),w={playerName:c,job:s,level:d,statsInLog:f!==void 0&&Object.values(f).every(y=>y!==void 0),inferredConfig:f,buffRemovalActions:Array.from(O.entries().flatMap(([y,x])=>x.entries().map(([G])=>({popKey:y,applyKey:$F.get(y),timestamp:G})))).sort((y,x)=>y.timestamp-x.timestamp),actions:L,timestamps:R,combatStartTime:h.endTime-h.combatTime};return _r.has(e.reportCode)?_r.get(e.reportCode).has(e.fightID)?_r.get(e.reportCode).get(e.fightID).set(e.playerID,w):_r.get(e.reportCode).set(e.fightID,new Map([[e.playerID,w]])):_r.set(e.reportCode,new Map([[e.fightID,new Map([[e.playerID,w]])]])),w}const uh={width:"100%",height:"1.6em",outline:"none"};function*oj(e,t){const n=I.gameConfig.serialized(),o={...n,procMode:hn.Always,job:e.job,initialResourceOverrides:e.job===n.job?n.initialResourceOverrides:[]};for(const[D,L]of Object.entries(e.inferredConfig??{}))typeof L=="number"&&(o[D]=L);e.level!==void 0&&(o.level=e.level),I.setConfigAndRestart(o,t||o.job!==n.job||n.procMode!==o.procMode);const s=I.record.length,c=e.actions;if(console.assert(c.length===e.timestamps.length),c.length===0)return yield{processed:0,total:0,deltas:[],spilledDeltas:0},[];const d=c.map(D=>new Vn(D)),h=(e.timestamps[0]-e.combatStartTime)/1e3,m=I.game.getSkillAvailabilityStatus(c[0].skillName).castTime,R=m>0?h-m+ci.getSlidecastWindow(m):h;d.unshift(fl(R)),console.log("initial jump time:",h),-R>I.gameConfig.countdown&&I.setConfigAndRestart({...o,countdown:-Math.floor(R)}),I.insertRecordNodes(d,s);const T={processed:1,total:c.length,deltas:[],spilledDeltas:0};let S=1;const g=I.gameConfig.countdown,p=e.buffRemovalActions[Symbol.iterator]();let _=p.next();for(let D=1;D<c.length;D++){const L=c[D],w=s+D+S,y=I.record.actions[w],x=(e.timestamps[D]-e.combatStartTime)/1e3,G=L.skillName;console.assert(y.info.type===ke.Skill&&y.tmp_startLockTime);const B=y.tmp_startLockTime-g,Y=I.record.actions[w-1],X=Y.tmp_endLockTime-g;if(!_.done){const{popKey:j,applyKey:$,timestamp:Ee}=_.value,V=(Ee-e.combatStartTime)/1e3;let P;if(X>V?Y.info.type===ke.Skill&&Y.info.skillName===$?P=w:P=w-1:x>V&&(P=w),P!==void 0){I.insertRecordNode(Al(j),P),_=p.next(),D--,S++;continue}}const ie=x-B,oe=.05;if(ie>3.5)I.insertRecordNode(fl(x),w),S++;else if(ie>oe){const j=x-X;console.assert(j>0),I.insertRecordNode(vr(j),w),S++}else ie<-oe&&(T.deltas.length>=10?T.spilledDeltas++:T.deltas.push({skill:G,logTime:x,simTime:B}));T.processed++,yield T}const O=I.record.actions.slice(s);return console.log(`inserted ${S} non-skill nodes`),I.undoStack.push(new dP(O,s,n,o)),I.autoSave(),I.record.unselectAll(),va().invalidActions}const pr={textAlign:"left",paddingLeft:"0.3em"},lj=["spellSpeed","skillSpeed","criticalHit","directHit","determination","piety","fps"];function sj(e){const t=St(),n=I.gameConfig[e.field];return l.jsx(jt,{style:{display:"inline-block",color:t.text},defaultValue:e.inferredStateValue?.toString()??"",description:iu(e.field),onChange:o=>{o.length===0&&e.setValue(void 0);const s=parseInt(o);isNaN(s)||e.setValue(s)},placeholder:n.toString()})}function rj(){const[e,t]=C.useState(new URLSearchParams(window.location.search).has("code")),n={},o=C.useContext(pa)==="Light",s=St(),[c,d]=C.useState(!0),f=C.useRef(null),[h,m]=C.useState(""),[R,T]=C.useState(0),S=ge=>{R===8&&(p(null),d(!0),O([])),ge!==6&&ge!==7&&B(void 0),ge!==4&&ge!==5&&(w.current=[],x.current=[],y.current=void 0),[2,4,5].includes(ge)||(L.current=void 0),T(ge)},[g,p]=C.useState(null),[_,O]=C.useState([]),D=ge=>{(ge||R!==7)&&(!ge&&R===8&&S(2),t(ge))};C.useEffect(()=>{if(!new URLSearchParams(window.location.search).has("code")&&window.sessionStorage.getItem("fflogsAuthToken")!==null){S(2),console.log("already authorized to fflogs");return}S(1);async function ge(){let _e=0;try{const De=await HN();if(De===Mh.SUCCESS)_e=2;else if(e&&De===Mh.UNAUTHORIZED){await xN();const Be=await HN();console.log(Be),Be===Mh.SUCCESS&&(_e=2)}}catch(De){console.log("Error during automatic FFLogs authentication"),console.error(De)}S(_e)}ge()},[]);const L=C.useRef(void 0),w=C.useRef([]),y=C.useRef(void 0),x=C.useRef([]),[G,B]=C.useState(void 0),Y={color:s.emphasis,backgroundColor:s.accent},X=l.jsx("button",{onClick:()=>S(2),children:N({en:"cancel",zh:""})}),ie=l.jsxs("div",{className:"importPage",children:[l.jsx("div",{children:l.jsx("button",{onClick:()=>{xN(),S(1)},children:N({en:"click here to authorize your fflogs account",zh:"fflogs"})})}),l.jsx("span",{children:N({en:"(will redirect to www.fflogs.com)",zh:"www.fflogs.com"})})]}),oe=l.jsx("div",{className:"importPage",children:l.jsx("p",{children:N({en:"verifying authorization...",zh:"..."})})}),j=l.jsxs(l.Fragment,{children:[l.jsx("div",{children:l.jsx("b",{children:N({en:"Limitations",zh:""})})}),l.jsxs("div",{children:[N({en:"Log import is currently subject to the following limitations:",zh:"logs"}),l.jsxs("ul",{children:[l.jsx("li",{children:N({en:"FFLogs only records combat stats for the creator of the log, so stats must be manually entered for other players.",zh:"FFLogs"})}),l.jsx("li",{children:N({en:"FFLogs cannot record actions that were performed before combat began. Pre-pull actions must be entered manually before import.",zh:"FFLogslogs"})}),l.jsx("li",{children:N({en:"Manual buff click-offs, and buff toggles from entering/leaving a zone (for example: leaving Ley Lines or Sacred Soil) are not currently processed by XIV in the Shell.",zh:"XIV in the Shellbuff/buff"})}),l.jsx("li",{children:N({en:"The offset of MP and Lucid Dreaming ticks are not currently synchronized in XIV in the Shell.",zh:"XIV in the Shelllogs"})}),l.jsx("li",{children:N({en:"XIV in the Shell does not reflect job gauge updates that are affected by random factors, or by whether an enemy is hit or killed.",zh:"XIV in the Shell//"})})]}),N({en:"These may change in future updates.",zh:""})]})]}),$=R!==2||!h,Ee=l.jsxs("div",{className:"importPage",children:[l.jsxs("form",{onSubmit:async ge=>{if(ge.preventDefault(),R===2)try{const _e=QF(h);if(_e.error)throw new Error(N(_e.error).toString());if(S(3),new URL(h).searchParams.get("fight")==="last"){console.log("querying last fight ID");const De=await ij(_e.apiBaseUrl,_e.reportCode);_e.fightID=De}if(L.current=_e,_e.fightID===void 0){const De=await nj(_e.apiBaseUrl,_e.reportCode);w.current=De,console.log("choosing from",De.length,"fights"),S(4)}else if(_e.playerID===void 0){const De=await wN(_e.apiBaseUrl,_e.reportCode,_e.fightID);w.current=[],[y.current,x.current]=De,console.log("choosing from",x.current.length,"players"),S(5)}else{const De=await PN({apiBaseUrl:_e.apiBaseUrl,reportCode:_e.reportCode,fightID:_e.fightID,playerID:_e.playerID});B(De),console.log(`preparing to import ${De.actions.length} skills`),S(6)}}catch(_e){console.error(_e),window.alert(_e),S(2)}},children:[l.jsx(jt,{description:l.jsx("div",{children:N({en:"enter an FFLogs report link",zh:"FFLogs"})}),style:{width:"100%"},onChange:m,defaultValue:h,fullWidthInput:!0,autoFocus:!0}),l.jsxs("div",{className:"buttonHolder",style:{marginTop:10},children:[l.jsx("button",{style:$?{}:Y,type:"submit",disabled:$,children:N({en:"import",zh:""})}),l.jsx("button",{type:"button",onClick:()=>S(0),children:N({en:"back to authorization",zh:""})})]})]}),l.jsx("hr",{}),j]}),V=l.jsx("div",{className:"importPage",children:l.jsx("p",{children:N({en:"retrieving log...",zh:"logs"})})}),P=C.useRef(!1),K=l.jsxs("div",{className:"importPage",children:[l.jsx("b",{children:N({en:"Choose a fight",zh:""})}),l.jsx("ul",{children:w.current.map((ge,_e)=>l.jsx("li",{onClick:()=>{if(P.current)return;const De=L.current;if(De===void 0){console.error("log info was undefined in fight choice state"),S(2);return}P.current=!0,wN(De.apiBaseUrl,De.reportCode,ge.id).then(Be=>{[y.current,x.current]=Be,De.fightID=ge.id,console.log("choosing from",x.current.length,"players"),S(5)}).catch(Be=>{console.error(Be),window.alert(Be),S(2)}).finally(()=>{P.current=!1})},children:l.jsxs("span",{className:"clickableLinkLike",children:[new Date(ge.unixStartTime).toLocaleString()," - ",N(ge.label)]})},_e))}),l.jsx("div",{children:X})]}),ne=l.jsxs("div",{className:"importPage",children:[y.current&&l.jsxs("span",{children:[new Date(y.current.unixStartTime).toLocaleString()," - ",N(y.current.label)]}),l.jsx("b",{children:N({en:"Choose a player",zh:""})}),l.jsx("ul",{children:x.current.map((ge,_e)=>l.jsx("li",{onClick:()=>{if(P.current)return;const De=L.current;if(De===void 0){console.error("log info was undefined in player choice state"),S(2);return}if(De.fightID===void 0){console.error("fight ID was undefined in player choice state"),S(2);return}P.current=!0,PN({apiBaseUrl:De.apiBaseUrl,reportCode:De.reportCode,fightID:De.fightID,playerID:ge.id}).then(Be=>{B(Be),console.log(`preparing to import ${Be.actions.length} skills`),S(6)}).catch(Be=>{console.error(Be),window.alert(Be),S(2)}).finally(()=>{P.current=!1})},children:l.jsxs("span",{className:"clickableLinkLike",children:[ge.job," - ",ge.name]})},_e))}),w.current.length===0?l.jsx("div",{children:X}):l.jsx("div",{children:l.jsx("button",{onClick:()=>{S(4),x.current=[]},children:N({en:"back to fight selection",zh:""})})})]}),fe=()=>I.gameConfig.job!==G?.job,M=l.jsx(ze,{container:f,topic:"fflogsConfigReset",content:N({en:l.jsxs("div",{children:['FFLogs only records exact combat stats for the player that created the log. All other stats must be entered manually. Any configuration not specified in this dialog, including initial resource overrides, will use the values set in the main "Config" panel.',l.jsx("br",{}),'After a log import, the "proc mode" field is set to "Always". You can manually adjust this later.']})})}),ee=l.jsx(ze,{container:f,topic:"fflogsConfigResetActive",content:N({en:l.jsxs("div",{children:[l.jsx("i",{children:"Actions in the current timeline will be cleared and replaced with those imported from the log."}),l.jsx("br",{}),"FFLogs does not record actions performed before combat begins. To add pre-pull actions, manually insert them after importing, or add them beforehand and uncheck this option."]}),zh:l.jsxs("div",{children:[l.jsx("i",{children:"logs"}),l.jsx("br",{}),"FFLogslogs"]})})}),ce=l.jsx(ze,{container:f,topic:"fflogsConfigResetActive",content:N({en:l.jsx("span",{children:l.jsx("i",{children:"Actions imported from the log will be added to the end of the existing timeline."})}),zh:l.jsx("span",{children:l.jsx("i",{children:"logs"})})})}),W=l.jsxs("div",{className:"importPage",children:[N({en:l.jsxs("p",{children:["Reading ",G?.actions.length??0," skills for"," ",l.jsx("b",{children:G?.playerName})]}),zh:l.jsxs("p",{children:["",l.jsx("b",{children:G?.playerName}),"",G?.actions.length??0,""]})}),l.jsxs("div",{children:[G?.statsInLog?N({en:"Using stats found in log. Please adjust as needed.",zh:"logs"}):N({en:"Exact stats not found in log; using values in current game config. Please enter manually or adjust with the Config pane after import. ",zh:"Logs"}),M]}),l.jsx("hr",{}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:5},children:[l.jsxs("div",{children:[l.jsx("span",{children:N({en:"job: ",zh:""})}),G?.job??I.game.job]}),G&&l.jsxs("div",{children:[l.jsx("span",{children:N({en:"level: ",zh:""})}),l.jsxs("select",{style:{outline:"none",color:s.text},value:G.level,onChange:ge=>B({...G,level:parseInt(ge.target.value)}),children:[l.jsx("option",{value:$e.lvl100,children:"100"},$e.lvl100),l.jsx("option",{value:$e.lvl90,children:"90"},$e.lvl90),l.jsx("option",{value:$e.lvl80,children:"80"},$e.lvl80),l.jsx("option",{value:$e.lvl70,children:"70"},$e.lvl70)]})]})]}),l.jsx("div",{style:{display:"flex",gap:5,flexDirection:"column"},children:lj.map(ge=>l.jsx("div",{children:l.jsx(sj,{field:ge,inferredStateValue:G?.inferredConfig?.[ge],setValue:_e=>{G?.inferredConfig!==void 0&&B({...G,inferredConfig:{...G.inferredConfig,[ge]:_e}})}})},ge))}),l.jsx("hr",{}),fe()?l.jsx("div",{children:l.jsx("span",{children:N({en:"Imported actions will replace the current timeline.",zh:""})})}):l.jsxs("div",{children:[l.jsx("input",{className:"shellCheckbox",type:"checkbox",onChange:ge=>{d(ge.currentTarget.checked)},checked:c}),l.jsxs("span",{children:[N({en:"Reset timeline on import",zh:""})," "]}),c?ee:ce]}),l.jsxs("div",{className:"buttonHolder",children:[l.jsx("button",{style:Y,onClick:()=>{if(G){S(7);const ge=oj(G,c||fe());setTimeout(()=>{let _e=ge.next();for(;!_e.done;)p({..._e.value}),_e=ge.next();O(_e.value),S(8)},0)}else console.error("intermediate state was undefined when confirming import"),S(2),D(!1)},children:N({en:"go",zh:""})}),X]})]}),z={position:"relative",width:"100%",borderCollapse:"collapse",borderColor:s.bgMediumContrast,borderWidth:"1px",borderStyle:"solid"},Q={backgroundColor:s.timelineEditor.headerFooter,...ss(s)},H=ge=>ge%2===1?s.timelineEditor.bgAlternateRow:"transparent",Z=g?.deltas.length?l.jsxs(l.Fragment,{children:[l.jsx("hr",{}),l.jsx("div",{children:N({en:"Some simulated actions had timestamps in XIV in the Shell different from the recorded values in FFLogs. Minor differences are normal, but if you see a very large discrepancy, this means there's either a bug in XIV in the Shell, or the configured spell speed/skill speed/fps was incorrect.",zh:"XIV in the Shell/logsXIV in the Shellbug//"})}),l.jsxs("table",{style:z,children:[l.jsx("thead",{children:l.jsxs("tr",{style:uh,children:[l.jsx("th",{style:{...Q,...pr,width:"35%"},children:N({en:"skill",zh:""})}),l.jsx("th",{style:{...Q,...rl},children:N({en:"log time",zh:""})}),l.jsx("th",{style:{...Q,...rl},children:N({en:"shell time",zh:""})}),l.jsx("th",{style:{...Q,...rl},children:N({en:"difference",zh:""})})]})}),l.jsx("tbody",{children:g.deltas.map((ge,_e)=>l.jsxs("tr",{style:{...uh,background:H(_e)},children:[l.jsx("td",{style:{...pr,width:"35%"},children:Wn(ge.skill)}),l.jsx("td",{style:rl,children:Xe.displayTime(ge.logTime,3)}),l.jsx("td",{style:rl,children:Xe.displayTime(ge.simTime,3)}),l.jsx("td",{style:rl,children:Xe.displayTime(ge.logTime-ge.simTime,3)})]},_e))})]}),g.spilledDeltas?l.jsx("span",{children:N({en:`...and ${g.spilledDeltas} more`,zh:`${g.spilledDeltas}`})}):void 0]}):l.jsx(l.Fragment,{}),ae=l.jsxs("div",{className:"importPage",children:[l.jsx("div",{children:N({en:"processing actions (this may take a moment)...",zh:""})}),g&&l.jsxs("div",{children:[l.jsxs("span",{children:[g.processed," / ",g.total]}),l.jsx("br",{}),Z]})]}),he=_.length>0?l.jsxs(l.Fragment,{children:[N({en:`The imported timeline produced ${_.length} invalid action${_.length===1?"":"s"}:`,zh:`${_.length}`}),l.jsxs("table",{style:z,children:[l.jsx("thead",{children:l.jsxs("tr",{style:uh,children:[l.jsx("th",{style:{...Q,...Hr},children:"#"}),l.jsx("th",{style:{...Q,...pr},children:N({en:"action",zh:""})}),l.jsx("th",{style:{...Q,...pr},children:N({en:"reason",zh:""})})]})}),l.jsx("tbody",{children:_.slice(0,10).map((ge,_e)=>l.jsxs("tr",{style:{...uh,background:H(_e)},children:[l.jsx("td",{style:Hr,children:ge.index}),l.jsx("td",{style:pr,children:ge.node.toLocalizedString()}),l.jsx("td",{style:pr,children:ge.reason.unavailableReasons.map(is).join(N({en:"; ",zh:""}).toString())})]},_e))})]}),_.length>10?l.jsx("span",{children:N({en:`...and ${_.length-10} more`,zh:`...${_.length-10}`})}):void 0]}):void 0,Re=l.jsxs("div",{className:"importPage",children:[l.jsxs("p",{children:[l.jsx("b",{children:N({en:"Import successful!",zh:""})}),N({en:" You may now close this dialog.",zh:""})]}),Z,l.jsx("br",{}),he,l.jsx("br",{}),l.jsx("div",{children:l.jsx("button",{onClick:()=>D(!1),children:N({en:"finish",zh:""})})})]}),Ne=R===0?ie:R===1?oe:R===2?Ee:R===3?V:R===4?K:R===5?ne:R===6?W:R===7?ae:R===8?Re:l.jsxs("div",{children:["Bad state: ",R,". Please contact us with a bug report."]}),Me=l.jsxs("div",{ref:f,children:[l.jsx("style",{children:`
			button {
				min-width: 35%;
			}
			.buttonHolder {
				width: 100%;
				display: flex;
				flex-direction: column;
				gap: 0.8em;
				align-items: start;
			}
		`}),Ne]}),me=l.jsx("div",{className:"clickable",children:l.jsx("span",{style:n,children:l.jsx("span",{className:"clickableLinkLike",children:N({en:"Click to open dialog",zh:""})})})}),Ce=l.jsx(WN,{className:"dialogExit",style:{color:s.bgHighContrast}});return l.jsxs(FD,{open:e,onOpenChange:D,children:[l.jsx(zD,{render:me,nativeButton:!1}),l.jsxs(BD,{children:[l.jsx(OD,{className:"Backdrop",style:{opacity:o?.2:.7}}),l.jsxs(GD,{className:"Popup visibleScrollbar",id:"dialogPopup",style:{backgroundColor:s.background,border:"1px solid "+s.bgMediumContrast,color:s.text},children:[l.jsx(jD,{render:l.jsx("h3",{children:N({en:"Import from FFLogs",zh:"FFLogs"})})}),l.jsx(yD,{render:Ce,nativeButton:!1}),l.jsx(MD,{className:"Description",render:Me})]})]})]})}function cj(e,t){const n=I.getTimelineRenderingProps();let o=n.selectionStartDisplayTime,s=n.selectionEndDisplayTime;o===s&&(o=-n.countdown,s=I.game.time-n.countdown+4);const c=I.imageExportConfig;let d,f;c.wrapThresholdSeconds===0?(d=1,f=s-o):(d=Math.ceil((s-o)/c.wrapThresholdSeconds),f=c.wrapThresholdSeconds);const h=document.createElement("canvas"),m=document.createElement("canvas"),R=pe.trackHeight/2,T=I.timeline,S=T.positionFromTime(n.countdown);h.width=T.positionFromTime(s)+S;let g=pe.renderSlotHeight();e&&(g+=pe.rulerHeight,g+=pe.trackHeight*T.getNumMarkerTracks()),h.height=g;const p=h.getContext("2d",{willReadFrequently:!0}),_=0;p.fillStyle=t.background,p.fillRect(0,0,h.width,h.height);let O=0;const D={renderingProps:I.getTimelineRenderingProps(),colors:t,visibleLeft:0,visibleWidth:100};e&&(O+=SD({ctx:p,viewInfo:D,originX:0,ignoreVisibleX:!0,testInteraction:()=>{}}),O+=gD({ctx:p,viewInfo:D,originX:_,originY:O,ignoreVisibleX:!0,testInteraction:()=>{}})),_D({ctx:p,viewInfo:D,isImageExportMode:!0,originX:_,originY:O,testInteraction:()=>{}});const L=T.positionFromTime(o)+S,w=T.positionFromTime(s)+S;m.height=(R+g)*(d-1)+g,m.width=d===1?w-L:T.positionFromTime(f);const y=m.getContext("2d");for(let x=0;x<d;x++){const G=T.positionFromTime(f);if(L>w)break;const B=Math.min(w-(L+x*G),G),Y=p.getImageData(L+x*G,0,B+1,h.height+1);y.putImageData(Y,0,x*(R+g)),x>0&&B<G&&(y.fillStyle=t.background,y.fillRect(B,x*(R+g),G-B,h.height+1))}return m}function uj(){const[e,t]=C.useState(I.imageExportConfig),n=(h,m)=>{const R=Object.assign({},e);R[h]=m,I.setImageExportConfig(R),t(R),gt("img: "+h,JSON.stringify(m))},o={position:"relative",top:3,marginRight:"0.25em"},s=(h,m)=>l.jsxs("div",{style:{marginBottom:5},children:[l.jsx("input",{type:"checkbox",onClick:R=>n(h,R.currentTarget.checked),value:e[h]?"on":"off",style:o,defaultChecked:e[h]}),l.jsx("span",{children:N(m)})]}),c=h=>{Number.isNaN(parseFloat(h))||n("wrapThresholdSeconds",parseFloat(h))},d=l.jsxs(l.Fragment,{children:[l.jsx("div",{children:l.jsx(jt,{defaultValue:e.wrapThresholdSeconds.toString(),description:l.jsxs("span",{children:[N({en:"seconds before wrapping ",zh:" "}),l.jsx(ze,{topic:"png-wrap",content:N({en:"number of elapsed seconds, including the countdown, in each row in the image (set to 0 to never wrap)",zh:"0"})}),":"," "]}),onChange:c,style:{margin:"10px 0"}})}),s("includeTime",{en:"include time and markers",zh:""})]}),f=St();return l.jsxs("div",{children:[l.jsx("p",{children:N({en:l.jsx("span",{children:"export the selected part of the timeline as a png according to the current display settings, or the whole timeline if nothing is selected"}),zh:"png"})}),d,l.jsx("p",{children:l.jsx(Sl,{filename:"fight",fileFormat:Mo.Png,getContentFn:()=>cj(e.includeTime,f),displayName:N({en:"export selection as png",zh:"png"})})})]})}function dj(){const e=C.useContext(pa),t=f=>{f.fileType===di.Record?I.undoStack.doThenPush(new RP(I.record.serialized(),f)):f.fileType===di.MarkerTrackIndividual||f.fileType===di.MarkerTracksCombined?window.alert("wrong file type '"+f.fileType+`'; use the "Timeline markers" section instead if you meant import markers.`):window.alert("wrong file type '"+f.fileType+"'.")},n=N({en:"Export fight to file",zh:""}),o=l.jsxs("div",{children:[l.jsx("p",{children:N({en:"for sharing and importing:",zh:""})}),l.jsx(Sl,{fileFormat:Mo.Json,getContentFn:()=>I.record.serialized(),filename:"fight",displayName:N({en:"txt format",zh:"txt"})}),l.jsx("p",{children:N({en:l.jsxs("span",{children:["for external tools such as excel and"," ",l.jsx("a",{href:"https://github.com/Tischel/BLMInTheShell",children:"Tischel's plugin"}),":"]}),zh:l.jsxs("span",{children:["excel",l.jsx("a",{href:"https://github.com/Tischel/BLMInTheShell",children:"Tischel"}),""]})})}),l.jsx(Sl,{fileFormat:Mo.Csv,getContentFn:()=>({body:I.getActionsLogCsv()}),filename:"fight",displayName:N({en:"csv format",zh:"csv"})}),l.jsx("p",{children:N({en:l.jsxs("span",{children:["for use with"," ",l.jsx("a",{href:"https://colab.research.google.com/github/zqsz-xiv/xivintheshell-ama-sim-notebook/blob/main/in_the_shell_with_ama_sim.ipynb",children:"Amarantine's combat simulator"}),":"]}),zh:l.jsxs("span",{children:["",l.jsx("a",{href:"https://github.com/Amarantine-xiv/Amas-FF14-Combat-Sim",children:"Amarantine"}),""]})})}),l.jsx(Sl,{fileFormat:Mo.Csv,getContentFn:()=>I.getAmaSimCsv(),filename:"fight",displayName:N({en:"csv format",zh:"csv"})})]}),s=N({en:"Import fight from file",zh:""}),c=l.jsxs(l.Fragment,{children:[l.jsx(qh,{allowLoadFromUrl:!1,onLoadFn:t}),l.jsx("hr",{style:{marginTop:15,border:"none",borderTop:"1px solid "+Il(e,"bgHighContrast")}}),l.jsx("div",{style:{marginTop:15,marginBottom:10},children:l.jsx("b",{children:N({en:"Import fight from FFLogs",zh:"FFLogs"})})}),l.jsx(rj,{})]}),d=l.jsx(l.Fragment,{children:N({en:"Image Export",zh:""})});return l.jsx(NT,{contentHeight:lS,children:[{defaultSize:25,title:s,content:c},{defaultSize:30,title:n,content:o},{defaultSize:45,title:d,content:l.jsx(uj,{})}]})}function hj(){const e=(d,f)=>l.jsxs("div",{style:{marginBottom:5},children:[l.jsx("b",{children:N(d)})," ",f]}),t=l.jsx(ze,{topic:"settings-display",content:N({en:"Configure how elements are displayed in the visual timeline and image exports.",zh:""})}),n=l.jsx(ze,{topic:"settings-copypaste",content:N({en:l.jsxs("div",{children:["Configure the format used when copying a sequence of skills from XIV in the Shell to paste in other applications.",l.jsx("br",{}),"Any of the provided formats can be pasted ",l.jsx("i",{children:"from"})," external applications to XIV in the Shell at any time, regardless of the value of this setting."]}),zh:l.jsxs("div",{children:["",l.jsx("br",{}),""]})})}),o=l.jsx(ze,{topic:"settings-copypaste-plain",content:N({en:l.jsxs("div",{children:["A comma-separated list of skill names.",l.jsx("br",{}),l.jsx("br",{}),"Example:",l.jsx("br",{}),l.jsx("span",{children:"Fire 3, Fire 4, Despair"})]}),zh:l.jsxs("div",{children:["",l.jsx("br",{}),l.jsx("br",{}),"",l.jsx("br",{}),l.jsx("span",{children:"34"})]})})}),s=l.jsx(ze,{topic:"settings-copypaste-plain",content:N({en:l.jsxs("div",{children:["A tab-separated list of usage timestamps, target counts, and skill names, for use with external spreadsheet applications.",l.jsx("br",{}),l.jsx("br",{}),"Example:",l.jsx("table",{children:l.jsxs("tbody",{children:[l.jsxs("tr",{children:[l.jsx("td",{children:"-3.500"}),l.jsx("td",{children:"1"}),l.jsx("td",{children:"Fire 3"})]}),l.jsxs("tr",{children:[l.jsx("td",{children:"0.042"}),l.jsx("td",{children:"1"}),l.jsx("td",{children:"Fire 4"})]}),l.jsxs("tr",{children:[l.jsx("td",{children:"2.500"}),l.jsx("td",{children:"1"}),l.jsx("td",{children:"Despair"})]})]})})]}),zh:l.jsxs("div",{children:["",l.jsx("br",{}),l.jsx("br",{}),"",l.jsx("table",{children:l.jsxs("tbody",{children:[l.jsxs("tr",{children:[l.jsx("td",{children:"-3.500"}),l.jsx("td",{children:"1"}),l.jsx("td",{children:"3"})]}),l.jsxs("tr",{children:[l.jsx("td",{children:"0.042"}),l.jsx("td",{children:"1"}),l.jsx("td",{children:"4"})]}),l.jsxs("tr",{children:[l.jsx("td",{children:"2.500"}),l.jsx("td",{children:"1"}),l.jsx("td",{children:""})]})]})})]})})}),c=l.jsx(ze,{topic:"settings-copypaste-discord",content:N({en:l.jsxs("div",{children:["A sequence of Discord emotes (only verified for BLM and PCT). Requires access to a server with appropriately-named emotes to use.",l.jsx("br",{}),l.jsx("br",{}),"Example:",l.jsx("br",{}),l.jsx("span",{children:":F3: :F4: :Despair:"})]}),zh:l.jsxs("div",{children:["Discord)Discord",l.jsx("br",{}),l.jsx("br",{}),"",l.jsx("br",{}),l.jsx("span",{children:":F3: :F4: :Despair:"})]})})});return l.jsxs("div",{children:[e({en:"Display settings",zh:""},t),l.jsx(su,{uniqueName:"showDamageMarks",label:N({en:"show damage marks",zh:""}),onChange:d=>{I.setTimelineOptions({drawDamageMarks:d})}}),l.jsx(su,{uniqueName:"showHealingMarks",label:N({en:"show healing marks",zh:""}),onChange:d=>{I.setTimelineOptions({drawHealingMarks:d})}}),l.jsx(su,{uniqueName:"showMPAndLucidTickMarks",label:N({en:"show MP and lucid ticks",zh:""}),onChange:d=>{I.setTimelineOptions({drawMPTickMarks:d})}}),l.jsx(su,{uniqueName:"showBuffIndicators",label:N({en:"show buff indicators",zh:"buff"}),onChange:d=>{I.setTimelineOptions({drawBuffIndicators:d})}}),l.jsx("br",{}),e({en:"Clipboard copy mode",zh:""},n),l.jsx(qb,{uniqueName:"clipboardMode",onChange:d=>I.clipboardMode=d,options:[["plain",l.jsxs("span",{children:[N({en:"plain text",zh:""})," ",o]})],["tsv",l.jsxs("span",{children:[N({en:"tab-separated lines",zh:""})," ",s]})],["discord",l.jsxs("span",{children:["discord",N({en:" emotes",zh:""})," ",c]})]]})]})}let ko=()=>{},XD=e=>{};const qD="dragLock",fj=Tt(qD),ZD=fj==="true",Gu=C.createContext({value:ZD,setter:e=>{}}),$f=C.createContext({dragTargetIndex:null,dragTargetTime:null,setDragTarget:(e,t)=>{}});function Ej(){const e=C.useRef(null),[t,n]=C.useState(11),[o,s]=C.useState(300),[c,d]=C.useState(23),[f,h]=C.useState(66),[m,R]=C.useState(0),[T,S]=C.useState(!1),[g,p]=C.useState({onMouseMove:()=>{},onMouseEnter:()=>{},onMouseLeave:()=>{},onMouseUp:()=>{},onMouseDown:()=>{},onKeyDown:()=>{}}),_=()=>{e.current&&(d(e.current.scrollLeft),h(e.current.clientWidth))};ko=()=>{n(I.timeline.getCanvasWidth()),s(I.timeline.getCanvasHeight()),R(m+1)},XD=y=>{if(e.current!=null){const x=e.current.clientWidth;e.current.scrollLeft=y-x*.6}_()},C.useEffect(()=>{n(I.timeline.getCanvasWidth()),s(I.timeline.getCanvasHeight()),_()},[]);const O=l.jsx(SF,{timelineHeight:o,visibleLeft:c,visibleWidth:f,version:m,pointerMouse:T,setCallbacks:p,setPointerMouse:S}),D=C.useContext(pa),L=Il(D,"bgMediumContrast"),w=Vb?l.jsx("div",{style:{height:8},tabIndex:-1}):void 0;return l.jsxs("div",{style:{position:"relative"},children:[O,l.jsxs("div",{tabIndex:0,className:"visibleScrollbar",style:{position:"relative",width:"100%",overflowX:"scroll",overflowY:"clip",outline:"1px solid "+L,cursor:T?"pointer":"default"},ref:e,onScroll:()=>{e.current&&(e.current.scrollLeft=Math.min(e.current.scrollWidth-e.current.clientWidth,e.current.scrollLeft),d(e.current.scrollLeft),h(e.current.clientWidth))},onMouseMove:y=>{if(e.current){const x=e.current.getBoundingClientRect(),G=y.clientX-x.left,B=y.clientY-x.top;g.onMouseMove(G,B)}},onMouseDown:y=>{if(e.current){const x=e.current.getBoundingClientRect(),G=y.clientX-x.left,B=y.clientY-x.top;g.onMouseDown(G,B)}},onMouseEnter:()=>g.onMouseEnter(),onMouseLeave:()=>g.onMouseLeave(),onMouseUp:y=>{if(e.current){const x=e.current.getBoundingClientRect(),G=y.clientX-x.left,B=y.clientY-x.top;g.onMouseUp(y,G,B)}},onKeyDown:y=>g.onKeyDown(y),children:[l.jsx("div",{style:{position:"relative",backgroundColor:"transparent",width:t,height:o,pointerEvents:"none"}}),w]})]})}const QD=320,lS=QD-40;function mj(){const{value:e,setter:t}=C.useContext(Gu),n=C.useContext(pa),o=window.innerWidth>1024,s=window.innerWidth>800;return l.jsxs("div",{style:{position:"relative",margin:6},children:[l.jsx(Xb,{uniqueName:"timeline",maxWidth:1440,content:[{titleNode:N({en:"Timeline markers",zh:""}),contentNode:l.jsx(oF,{})},{titleNode:l.jsxs("div",{style:{position:"relative"},children:[N({en:"Timeline editor ",zh:" "}),l.jsx(ze,{topic:"timeline editor",content:l.jsx("div",{children:l.jsx("div",{className:"paragraph",children:N({en:'Table view for editing the current timeline. Changes made here are not saved until the "apply changes" button is pressed.',zh:""})})})})]}),contentNode:l.jsx(sP,{})},{titleNode:N({en:"Import/Export",zh:"/"}),contentNode:l.jsx("div",{children:l.jsx(dj,{})})},{titleNode:N({en:"Settings",zh:""}),contentNode:l.jsx(hj,{})}],collapsible:!0,scrollable:!1,height:QD,defaultSelectedIndex:void 0}),l.jsxs("div",{style:{position:"absolute",top:0,right:6,display:"flex",flexDirection:"row",gap:20},children:[o&&l.jsxs("div",{style:{height:Or,lineHeight:`${Or}px`,verticalAlign:"middle",cursor:"pointer",userSelect:"none"},onClick:c=>{c.preventDefault(),t(!e)},children:[N({en:"drag lock",zh:""})," ",l.jsx(ze,{topic:"dragLock",content:N({en:l.jsx("div",{children:"When locked, disables click/drag to rearrange timeline skills."}),zh:l.jsx("div",{children:""})})})," ",l.jsx(es.Provider,{value:{color:e?Il(n,"accent"):void 0,style:{width:12,height:12,verticalAlign:"baseline"}},children:e?l.jsx($M,{}):l.jsx(QM,{})})]}),s&&l.jsx(iP,{uniqueName:"timelineDisplayScale",description:N({en:"horizontal scale ",zh:" "}),defaultValue:"0.4",style:{height:Or,lineHeight:`${Or}px`,verticalAlign:"middle"},onChange:c=>{I.timeline.setHorizontalScale(parseFloat(c)),I.scrollToTime()}})]})]})}function Aj(){const[e,t]=C.useState(ZD),[[n,o],s]=C.useState([null,null]),c=(d,f)=>{if(e)d=null,f=null;else{const h=I.record.selectionStartIndex??0;let m=(d??0)-(h??0);m>0&&(m-=I.record.getSelectionLength()),(m===0||d!==null&&I.record.isInSelection(d))&&(d=null,f=null)}(d!==n||f!==o)&&s([d,f])};return l.jsx("div",{style:{bottom:0,left:0,right:0,paddingLeft:0,paddingRight:0,borderTop:"2px solid "+St().bgHighContrast,flex:0},children:l.jsx(Gu.Provider,{value:{value:e,setter:d=>{gt(qD,d.toString()),t(d)}},children:l.jsxs($f.Provider,{value:{dragTargetIndex:n,dragTargetTime:o,setDragTarget:c},children:[l.jsx(Ej,{}),l.jsx(mj,{})]})})})}const xn=JSON.parse(`[{"date":"2/22/26","changes":["Fixed a bug where clicking an element in the visual timeline would sometimes not scroll the Timeline Editor table far enough."]},{"date":"2/15/26","changes":["[WAR] Added a \\"Retaliation\\" skill to simulate taking damage while Damnation or Vengeance is active.","Abilities usable at range no longer automatically re-enable auto-attacks on melee and tank jobs (this does not currently affect damage calculations).","Added auto-attack downtime windows to Ama's combat sim export.","[MCH] Fixed a bug where the Wildfire debuff would not appear.","[MCH][SMN][DRK] Removed unnecessary columns in display of damage breakdown from pets.","While importing from FFLogs, players will now be listed according to the order of their jobs."]},{"date":"2/13/26","changes":["[BRD][MCH][DNC] Added Leg Graze and Foot Graze for compatibility with FFLogs import.","Fixed a bug where importing certain logs for jobs with DoT effects would crash the page."]},{"date":"2/8/26","changes":["Added the ability to import gearsets from ffxiv-gearing.","[BRD][DRG] Added Chinese translations."],"changes_zh":["ffxiv-gearing"," "]},{"date":"2/7/26","changes":["Added the ability to choose specific targets for damaging skills. Please see the \\"# of targets hit\\" help item for details.","Abilities imported from FFLogs now correctly track the number of targets hit."],"changes_zh":[""," FFLogs "],"level":"major"},{"date":"2/3/26","changes":["[DRG] Fixed a bug where Mirage Dive was not recognized by FFLogs imports."],"changes_zh":[" FFLogs "]},{"date":"1/28/26","changes":["[GNB] Fixed a bug where overcapping on cartridges after using Bloodfest did not raise a warning."]},{"date":"1/26/26","changes":["Updated for patch 7.41."],"changes_zh":["7.41"]},{"date":"1/25/26","changes":["[NIN] Fixed a bug where Mudras were sometimes not visible after FFLogs import."]},{"date":"1/24/26","changes":["[AST] Fixed a bug where Oracle's potency was missing."],"changes_zh":[""]},{"date":"1/23/26","changes":["[RPR] Fixed a bug where Soulsow could not be cast during Enshroud.","[MNK] Fixed a bug where Chakra spenders did not receive the effects of Brotherhood and Riddle of Fire."],"changes_zh":["","buff"]},{"date":"1/22/26","changes":["Added Chinese-language M9S, M10S, and M12S P2 tracks (translated by yuyuka)."],"changes_zh":[" M9SM10SM12S   "],"level":"major"},{"date":"1/20/26","changes":["Added Chinese-language M11S and M12S P1 tracks (translated by yuyuka)."],"changes_zh":[" M11S  M12S   "]},{"date":"1/19/26","changes":["Added a user manual. You can find it at xivintheshell.com/manual, in the intro section, or in the links at the top right of the page."],"changes_zh":[" xivintheshell.com/manual"],"level":"major"},{"date":"1/17/26","changes":["Fixed a bug where the piety stat could not be configured."]},{"date":"1/15/26","changes":["Added English-language M12S P1 tracks. All Arcadion Heavyweight fights now have tracks. Happy planning!"]},{"date":"1/14/26","changes":["Added English-language M11S tracks.","Added English-language M12S P2 tracks."]},{"date":"1/13/26","changes":["Added Vamp Stomp floor bat explosion timings to M9S tracks.","Added English-language M10S tracks."]},{"date":"1/12/26","changes":["Added English-language M9S tracks.","[RPR] Fixed a bug where Slice had incorrect potency."]},{"date":"1/11/26","changes":["[SCH] Fixed a bug where using Adloquium, Succor, or Concitation under the effect of Recitation consumed MP.","[BLU] Enabled FFLogs import.","Fixed a bug where importing an FFLogs report link with a fight ID would sometimes not pick the specified fight.","Removed marker presets for M5S-M8S from current content. These can still be found in the \\"archive\\" section of marker presets.","Limited the maximum marker track number to 20."]},{"date":"1/5/26","changes":["[NIN] Fixed a bug where using Doton under the effect of Ten Chi Jin did not apply AoE damage.","New developer blog post (English only): https://blog.xivintheshell.com/posts/the-night-before-heavyweight/"]},{"date":"1/2/26","changes":["[MCH] Adjusted the potency of Wildfire to reflect its inability to CDH.","[SCH][AST] Fixed a bug where DoT effects with no on-hit potency did not receive the player's own Chain Stratagem or Divination buffs.","[DRK] Fixed a bug where Living Shadow granted Scorn below level 100."]},{"date":"12/31/25","changes":["Fixed a visual bug where deleting a marker did not set the correct marker type in the marker creation menu.","[SCH] Fixed a bug where Sacred Soil incorrectly had a 30-second duration.","[SCH] Fixed a bug where Expedient did not grant buffs."]},{"date":"12/30/25","changes":["Changed font specification to improve display on computers with Chinese browser/OS.","Updated the site to automatically use Chinese if your browser is set to use it. Manually using the language selector overrides this.","[BLM] Fixed a bug where overriding the initial AF/UI state gave an extra Polyglot stack."],"changes_zh":["/","",".",""]},{"date":"12/29/25","changes":["[SAM] Added missing application delay values for Hissatsu: Shinten, Kyuten, Gyoten, Yaten, Senei, and Guren.","Updated export to Ama's combat sim to use Grade 4 Gemdraughts for potions.","Added support QQ group to Introductions section."],"changes_zh":["QQ","changelog"]},{"date":"12/26/25","changes":["[AST] Fixed a bug where Stellar Detonation could be repeatedly cast.","[AST] Fixed a bug where automatically-detonated Earthly Star did not receive a pet potency modifier."]},{"date":"12/22/25","changes":["[WAR] Fixed Inner Release being unusable before combat."]},{"date":"12/21/25","changes":["Fixed a bug where importing from FFLogs while resource overrides were active for a different job would crash the site.","[SMN] Fixed a bug where SMN logs could not be imported."]},{"date":"12/19/25","changes":["[RDM] Fixed log imports with Enchanted melee combo actions under the effect of Manafication.","Fixed a bug where importing from FFLogs would sometimes crash the site.","[BRD] Fixed a bug where auto-attacks appeared as an action in log import."]},{"date":"12/16/25","changes":["Updated for patch 7.4."],"changes_zh":["7.4"],"level":"major"},{"date":"12/14/25","changes":["Fixed a bug where the graphical timeline did not render properly when fight markers were loaded and all timeline slots were filled."]},{"date":"12/10/25","changes":["Adjusted the layout of marker presets and input."],"changes_zh":[""]},{"date":"12/7/25","changes":["Adjusted the appearance of scroll bars in Firefox."]},{"date":"11/15/25","changes":["Consumables like Pilgrim's Potions and Super-Ethers in FFLogs imports now display as unknown skills instead of Tinctures."]},{"date":"11/11/25","changes":["Fixed a bug where timeline skill tooltips would be acidentally cut off.","[SCH] Fixed a bug where Energy Drain and Physick were not recognized during log import."],"changes_zh":["","log"]},{"date":"11/7/25","changes":["Added the ability to import fights from FFLogs! You can find it in the Import/Export tab at the bottom of the page.","[WAR] Fixed a typo in the name of Storm's Path and Storm's Eye"],"changes_zh":["FFLogs/"],"level":"major"},{"date":"10/13/25","changes":["Added tracks for The Final Verse (Quantum) Q40."],"level":"minor"},{"date":"9/29/25","changes":["Updated the text of the timeline editor help tooltip.","New developer blog post (English only): https://blog.xivintheshell.com/posts/progressive-ux-improvements/"],"changes_zh":[""],"level":"minor"},{"date":"9/20/25","changes":["[!] Skills can now be inserted in the middle of a timeline.","[!] Pressing backspace/delete now deletes only the selected skills.","Using the up and down arrow keys changes the selected skills.","Most actions can now be undone/redone with ctrl/cmd+z and ctrl/cmd+y.","Actions can now be copy/pasted both within and outside the site (see \\"Settings\\" at the bottom of the page for details).","Adjusted the appearance of some website elements on Firefox."],"changes_zh":["[!]","[!]backspacedelete","    ","ctrl/cmd+zctrl/cmd+y/","",""],"level":"major"},{"date":"9/14/25","changes":["Fixed a bug where certain config stats couldn't be changed."]},{"date":"9/12/25","changes":["Added an \\"apply\\" button to the configuration section, which can be used to change configuration without resetting the timeline."],"changes_zh":[""]},{"date":"9/8/25","changes":["Fixed a crash when loading xivgear/etro links from a job different from the active one.","Fixed an issue where speed effects and certain sps/sks values were displayed incorrectly at level 70 (this was only a cosmetic issue in the configuration panel).","Changing jobs now uses the last saved stats you set for that job.","Creating a new timeline with a different job will now use one of The Balance's best-in-slot gear sets for the current patch."]},{"date":"9/2/25","changes":["Added different tincture images for each job.","Timelines with invalid skill names can now be loaded."]},{"date":"9/1/25","changes":["Added DSR P2 markers from Caro."]},{"date":"8/28/25","changes":["[BRD] Fixed typos in the names of Apex Arrow, The Wanderer's Minuet, and Rain of Death.","[BRD] Export to Ama's combat sim now tracks codas for Radiant Finale and Radiant Encore.","Updated export to Ama's combat sim to include hard-coded STR stats for healer/caster auto-attacks."]},{"date":"8/19/25","changes":["[WHM] Fixed a bug where Lillies would continue to generate even when at full stacks.","Fixed a bug where clicking on the timeline ruler would not immediately display historical state."],"level":"minor"},{"date":"8/17/25","changes":["Changed timeline slot buttons to trigger only if the mouse was both pressed and released on top of them."],"level":"minor"},{"date":"8/11/25","changes":["Made some internal adjustments to the implementation of click/drag selection and skill arrangements.","[WAR] Fixed a bug where Decimate consumed 2 stacks of Inner Release, and failed to grant Burgeoning Fury.","[WAR] Fixed Storm's Eye using an incorrect application delay.","[WAR] Extended the duration of the Inner Release, Primal Rend Ready, and Primal Ruination buffs to match in-game behavior.","[NIN] Fixed a bug where using Gust Slash without an active combo incorrectly advanced combo state.","[NIN] Fixed a bug where damage from Doton ticks was not computed.","[NIN] Fixed a bug where using Katon under Ten Chi Jin did not trigger Hollow Nozuchi."],"level":"minor"},{"date":"8/10/25","changes":["[NIN] Fixed a bug where Ninjutsu abilities were not buffed by Kunai's Bane and Dokumori."],"level":"minor"},{"date":"8/8/25","changes":["Added quick links to our GitHub, Bluesky, and (new) developer blog.","Added Bluesky, the dev blog, and the legacy game version site to the links in the \\"about\\" section."],"level":"minor"},{"date":"8/4/25","changes":["Updated for patch 7.3."],"changes_zh":["7.3"],"level":"major"},{"date":"8/3/25","changes":["The active timeline slot is now saved across page reloads.","Click and drag to rearrange skills, both in the visual timeline and timeline editor table.","Click and drag on the background of the visual timeline to select multiple skills.","Use the \\"drag lock\\" switch to the right of the display settings tabs to disable click+drag behavior."],"changes_zh":["","","",""],"level":"major"},{"date":"7/27/25","changes":["Updated FPS adjustment preview tooltip to use GCD time instead of cast times."]},{"date":"7/26/25","changes":["[WHM][AST][SCH] Fixed a bug where Swiftcast's cooldown was set to 40s below level 100."]},{"date":"7/25/25","changes":["[SCH] Initial SCH implementation. Thanks to Caro for help with numbers and some mechanics.","That's every job now in the shell! Stay tuned for more features and improvements to come."],"changes_zh":["Caro",""],"level":"major"},{"date":"7/22/25","changes":["[DNC] Fixed a bug where Fountain and Bladeshower could grant Silken Flow when used without combo."]},{"date":"7/20/25","changes":["[VPR] Added initial support for VPR. Thanks to Verra for help testing.","[BLU] Using an action while Waning Nocturne or Diamondback are active now uses the action as soon as the debuff expires."],"changes_zh":[" Verra","\\"\\"\\"\\""],"level":"major"},{"date":"7/15/25","changes":["Fixed \\"real-time auto pause\\" display.","[GNB] Fixed a bug where Fated Circle broke combos."],"changes_zh":["\\"(\\"",""],"level":"minor"},{"date":"7/14/25","changes":["[BLU] Fixed a bug where Apokalypsis and Phantom Flurry's potencies were incorrect.","[BLU] Fixed a bug where Surpanakha's 30-second cooldown was not applied."],"changes_zh":["\\"\\"\\"\\"","\\"\\"30CD"],"level":"minor"},{"date":"7/10/25","changes":["[MNK] Now begins encounters with Formless Fist active by default.","[DRG][NIN] Fixed a bug where using combo actions out of sequence granted combo potency bonus.","[AST] Fixed Macrocosmos/Microcosmos."],"changes_zh":["\\"\\"","",""],"level":"minor"},{"date":"7/8/25","changes":["[AST] Added initial support for AST.","[WHM] Addd initial support for WHM.","[SAM][NIN][MNK] GCD calculations in the configuration panel now account for jobs' natural speed buffs."],"changes_zh":[" "," ","GCD"],"level":"major"},{"date":"7/5/25","changes":["[MNK] Added initial support for MNK."],"changes_zh":[" "],"level":"major"},{"date":"6/25/25","changes":["Fixed a bug where timestamps would not appear for wait events in the timeline editor.","Fixed a bug where selecting a skill in the visual canvas did not cause the editor table to scroll to its location."],"level":"minor"},{"date":"6/24/25","changes":["[NIN] Added initial support for NIN."],"changes_zh":[" "],"level":"major"},{"date":"6/19/25","changes":["[DRK] Added initial support for DRK."],"changes_zh":[" "],"level":"major"},{"date":"6/18/25","changes":["Fixed a bug where the \\"wait until timestamp\\" events would change times unexpectedly."],"changes_zh":["\\"\\""],"level":"minor"},{"date":"6/17/25","changes":["Fixed timestamps not appearing in the timeline editor when a new skill is added.","Fixed skill selections ending on \\"wait\\" events not rendering correctly in the graphical timeline.","Fixed skill tooltips in the graphical timeline not displaying AoE potency."],"changes_zh":["","\\"\\"","aoe"],"level":"minor"},{"date":"6/16/25","changes":["[BLU] Added support for Blue Mage."],"changes_zh":[""],"level":"minor"},{"date":"6/6/25","changes":["[GNB][SGE] Chinese localization."],"changes_zh":[""],"level":"minor"},{"date":"6/3/25","changes":["Added the ability to save invalid timelines on the visual canvas. Changes in the timeline editor now reflect in the graphical timeline as well.","The \\"jump to timestamp\\" and \\"wait for MP tick\\" buttons will now always look for the specified timestamp/next MP tick, even when actions are shifted in the timeline editor.","Added a \\"Clone timeline slot\\" button.","See our \\"known bugs\\" page on GitHub for limitations: https://github.com/xivintheshell/xivintheshell/wiki/Known-Bugs"],"changes_zh":["","","","GitHubhttps://github.com/xivintheshell/xivintheshell/wiki/Known-Bugs"],"level":"major"},{"date":"5/29/25","changes":["[PLD] Chinese localization adjustments.","[SMN] Chinese localization; fix summon lock bar not showing progress."],"changes_zh":["",""],"level":"minor"},{"date":"5/28/25","changes":["[PLD] Chinese localization first draft."],"changes_zh":[""],"level":"minor"},{"date":"5/27/25","changes":["[BRD][MCH][SMN] Adjusted AoE potencies to reflect patch 7.25."],"changes_zh":["7.25"],"level":"minor"},{"date":"5/26/25","changes":["Fixed a bug where damage log CSV export didn't work (thanks ryxiv)."],"level":"minor"},{"date":"5/23/25","changes":["Adjusted the calculations for the effect of crit/DH party buffs on auto-crit/DH hits, like PCT's Hammer combo.","Fixed a bug with export to Ama's combat sim where Chain Stratagem and Dokumori would not apply to the boss."],"changes_zh":["","Fixed a bug with export to Ama's combat sim where Chain Stratagem and Dokumori would not apply to the boss."],"level":"minor"},{"date":"5/18/25","changes":["Updated the site to automatically use dark mode if your system is set to use it. Manually using the theme selector overrides this.","[GNB] Fixed a typo where \\"Lightning Shot\\" was incorrectly called \\"Lightning Shock.\\"","[GNB] Updated the application delay of Trajectory from 0.22 to 0.66 to match the current version of the game."],"level":"minor"},{"date":"5/17/25","changes":["We've made some big updates to the tools we use to build XIV in the Shell. The site should work the same as before, but if you notice anything broken or slow, please let us know posthaste.","We're planning on adding some large features in the near feature, so we've also made the changelog more prominent in anticipation. Please look forward to it."],"changes_zh":["XIV in the Shell",""],"level":"major"},{"date":"5/10/25","changes":["[PLD] Added initial support for PLD"],"changes_zh":[" "],"level":"major"},{"date":"5/9/25","changes":["[RPR] Fixed a bug where Regress wasn't usable in enshroud","[RPR] Fixed a bug where Grim Swathe was replaced with Lemure's Slice instead of Lemure's Scythe","[RPR] Fixed a bug where Perfectio was usable in enshroud","[RPR] Fixed a bug where Executioner's Gibbet/Gallows weren't replaced with Void/Cross Reaping while in enshroud","[SMN] Fixed a bug where Slipstream's initial hit falloff was displayed incorrectly in the DoT table (thanks omor1)","[SMN] Fixed the potency of Mountain Buster (was incorrectly listed as 170 instead of 160, thanks omor1)"]},{"date":"5/2/25","changes":["Changed Ama's combat sim export to disable auto-attacks for healer/caster jobs."]},{"date":"4/28/25","changes":["Refactored cooldown logic. Changes should not affect end users, but let us know if anything is off.","Added a few missing translations"]},{"date":"4/21/25","changes":["Updated compatibility with Ama's combat sim for newly-supported jobs."]},{"date":"4/17/25","changes":["[RPR] Added a button to gain +10 Soul Gauge to simulate a target dying with Death's Design active","[BRD] Fixed a bug where Iron Jaws checked the dot status at application time instead of confirmation time (thanks Yumiya)","[BRD] Fixed a bug where Empyreal Arrow applied repertoire at application time instead of confirmation time (also thanks Yumiya)"]},{"date":"4/13/25","changes":["Added English-language markers for M8S"]},{"date":"4/7/25","changes":["Added English-language markers for M7S"]},{"date":"4/6/25","changes":["Added English-language markers for M5S + M6S"]},{"date":"3/29/25","changes":["[BLM] Removed \\"outdated\\" status"]},{"date":"3/26/25","changes":["Added user survey link"]},{"date":"3/24/25","changes":["We have updated the site in accordance with the 7.2 patch notes. Goodbye to the Enochian timer o7","[BLM] will remain in \\"outdated\\" status until we have a change to play with the changes in-game.","Since most jobs received only potency changes, your old 7.1 plans should work, but as usual, please let us know if anything seems incorrect."]},{"date":"3/20/25","changes":["[DNC] Fixed an issue where the icons for Finishing Move Ready and Last Dance Ready were swapped, and an issue where Last Dance Ready was not consumed by Last Dance (thank you bluke)"]},{"date":"3/16/25","changes":["Fixed an issue where resource toggles were shown in the timeline editor with their internal keys rather than localized text.","Fixed mistakes in DoT effect override calculations.","In anticipation of patch 7.2, we're working on some changes to make it easier to migrate timelines after site or game changes. The following things have changed:","- Single-clicking an action will now try to use it as soon as the current animation lock/skill cooldown is over (this used to require double-clicking). If the action cannot be used, a wait is automatically added to the timeilne.","- In \\"manual\\" control mode, you no longer need to press space to advance past an action's animation lock (it will now advance automatically when a skill is used).","- Displayed wait durations are now always calculated from the end of the previous animation lock. Any existing timelines will automatically be adjusted--the shown wait times may be different, but the times where actions are used will remain the same.","- Skill sequence presets now include wait durations. This lets you load/save sequences that use late weaves or wait for MP ticks (assuming ticks still line up correctly).","As a consequence of these changes, you actually might now be able to load BLM timelines from 7.05/7.0 that previously were broken as a result of Despair becoming instant. Despair will still be instant and other buff usage will be unchanged, but the time between abilities should be correct.","These changes are very large, and while we've tested to make sure they won't break your existing timelines, there might still be some bugs that slipped through the cracks. As always, please reach out to us if you encounter any problems."]},{"date":"3/1/25","changes":["Make it so that you can only delete the currently active slot, to hopefully reduce the chance of accidentally deleting a slot when switching"]},{"date":"2/26/25","changes":["Updated the GCD formula because the old formula may be off by 0.01s when there is haste buff. Thank you Yuyuka for spotting the error. Note: old timelines (including timelines in browser localStorage) aren't affected; only newly created timelines use the new formula."]},{"date":"2/22/25","changes":["Added Queen Eternal markers by "]},{"date":"2/21/25","changes":["[BRD][GNB][SMN] Removed testing tag"]},{"date":"2/20/25","changes":["[SGE] Initial implementation for SGE","- Some rough edges still exist around Krasis' healing potency modification and Eukrasian shield handling.","- Basic functionality should be reasonably complete.","[RDM] Fixed a bug where Manafication could be used before combat"]},{"date":"2/16/25","changes":["[SAM] Fixed Hagakure only being usable at 3 sen"]},{"date":"2/15/25","changes":["[BLM] Fixed Manafont CD at lvl80 and below: should be 120s"]},{"date":"2/13/25","changes":["Updated English FRU tracks to more accurately reflect downtime between phases. We previously used the \\"death\\" event in a log as the end of a phase, but it turns out this is inaccurate as the last damage application to the boss occurs ~2 seconds before its recorded death.","- P1 to P2 untargetable duration increased by 2 seconds","- P2 to intermission untargetable duration decreased to align with the \\"crystals become targetable\\" mark","- Intermission to P3 downtime increased to match Gaia's attack killing the crystal","In order to not break existing timelines, the preset EN full fight track now treats P1 as dying 2 seconds before the end of the enrage cast. The start times of all phases are unaffected."]},{"date":"2/4/25","changes":["[SAM] Fixed AoE combo actions not ending the combo","[DRG] Added initial support for DRG"]},{"date":"2/2/25","changes":["[BRD][DNC] Fixed bonuses given from certain crit/DH buffs not applying in total potency calculations"]},{"date":"2/1/25","changes":["[WAR][SAM][RPR][MCH][DNC] Implemented localization for some recently added jobs"]},{"date":"1/27/25","changes":["[SMN] Added initial support for SMN"]},{"date":"1/26/25","changes":["[WAR][GNB] Fixed missing icon for tank LB3s"]},{"date":"1/18/25","changes":["[GNB] Added initial support for GNB"]},{"date":"1/17/25","changes":["Added \\"move end of selection to start of selection\\" button to the timeline editor"]},{"date":"1/12/25","changes":["[RPR] Fixed a bug where oGCDs would improperly consume Reaver/Executioner stacks"]},{"date":"1/8/25","changes":["[WAR] Fixed surging tempest text not showing up in potency modifier tooltip","[MCH] Fixed Overheated potency modifier not being applied"]},{"date":"1/5/25","changes":["Fixed a bug where multi-target spells lost their target counts when using the timeline editor"]},{"date":"1/4/25","changes":["Added support for multi-target abilities"]},{"date":"1/3/25","changes":["[WAR][SAM][RPR] Removed testing tag"]},{"date":"1/1/25","changes":["Added combined English FRU tracks"]},{"date":"12/28/24","changes":["[PCT] Fixed warning for Palette Gauge overcap"]},{"date":"12/24/24","changes":["[MCH] Added support for Flamethrower"]},{"date":"12/22/24","changes":["[BRD] Added initial support for BRD","Overhaul DoT tracking to provide better usage statistics","[BLM] Added High Thunder II"]},{"date":"12/20/24","changes":["Fixed stats tables not including party buff potencies for most skills","Removed flank/rear positional resources for non-melee jobs"]},{"date":"12/19/24","changes":["[WAR] Adjusted animation lock of Primal Rend","Fixed Down for the Count timing in FRU P4 (thanks xi12570)"]},{"date":"12/16/24","changes":["Limit breaks for all jobs!","[MCH][DNC] Removed testing tag","Updated \\"About this tool\\" section","More underlying implementation changes","[PCT] Made Hammer combo expire with Hammer Time buff (changed in 7.1)"]},{"date":"12/13/24","changes":["Fixed sometimes unable to use skills in manual mode with double click","[RPR] Added timer for Immortal Sacrifice","[RPR] Removed enhanced reapings whenever shroud is exited","[RPR] Separated cooldowns of Sacrificium and Lemure's Slice","[RPR] Fixed sks scaling","[WAR] Added initial WAR support"]},{"date":"12/12/24","changes":["Updated English FRU tracks and added P4 + P5"]},{"date":"12/8/24","changes":["Updated Chinese FRU tracks to latest (12/8 ver)","Make stats tables only include selected skills when there is selection"]},{"date":"12/7/24","changes":["Updated positional buff icons","Misc cleanups and optimizations (hey devs: rerun npm install)","[BLM] Fixed Retrace button not changing back to LL if LL is disabled when the buff drops"]},{"date":"12/5/24","changes":["Updated Chinese FRU tracks to latest (12/2 version)","Additional Chinese localization changes (preset lines; initial resource overrides section; many resource names)","New skill icon progress bar visuals "]},{"date":"12/4/24","changes":["Added English FRU P3 tracks by Yara","[RDM] Fixed Swiftcast being consumed before Dualcast when both are active"]},{"date":"12/2/24","changes":["Added English FRU P2 tracks by Yara","Fixed a bug where 'Load tracks starting at timestamp' did not accept some time formats","[RDM] Removed the 'testing' label"]},{"date":"12/1/24","changes":["Updated full FRU tracks in Chinese by  & czmm"]},{"date":"11/30/24","changes":["[MCH] Fixed Scattergun's heat generation (thanks Kairos)","[PCT] Fixed Monochrome Tones appearing when synced to level 80 and other internal trait logic (thanks misterperson)"]},{"date":"11/29/24","changes":["[MCH] Fixed bugs with MCH Overheat consumption on AoE abilities (thanks FloatingGhost)"]},{"date":"11/28/24","changes":["Added some Chinese tracks (M1S-M4S, FRU before P2.5)"]},{"date":"11/27/24","changes":["Added the ability to override stacks to 0 for 1-stack resources that start present by default","Added preliminary FRU P1 tracks by Yara"]},{"date":"11/26/24","changes":["Added the ability to load marker tracks starting from a particular timestamp"]},{"date":"11/25/24","changes":["[RPR] Added initial RPR support"]},{"date":"11/24/24","changes":["[MCH] Added initial MCH support"]},{"date":"11/21/24","changes":["[SAM] Fixed a bug where Fuka haste was doubly applied","[SAM] Added GCD under Fuka in playback control"]},{"date":"11/20/24","changes":["[DNC] Added initial DNC support","[SAM] Added initial SAM support (thank you Sterling Sylva for the initial work)","Added support for skill speed in addition to spell speed"]},{"date":"11/17/24","changes":["[RDM] Fix Manafication CD (thanks )","[all casters] Fix Surecast duration: previously 10s, now 6.5s (ty erii)"]},{"date":"11/16/24","changes":["Make DET use main stat formula and default to 440","Add hyperlinks for xivgear and etro"]},{"date":"11/15/24","changes":["(thank you Yuyuka for reporting a bunch of RDM bugs)","[RDM] Added some additional warnings on unintended buff drops, overwrites, and combo breaks","[RDM] Fixed the duration of the Acceleration buff","[RDM] Fixed the MP costs of Veraero II/Verthunder II","[RDM] Fixed Manafication failing to interrupt combos","[RDM] Fixed Manafication being usable out of combat","[RDM] Fixed Enchanted Reprise clearing mana stacks","[RDM] Made Prefulgence and Vice of Thorns into button replacements"]},{"date":"11/14/24","changes":["(thank you Wan Shott for reporting a bunch of RDM bugs)","[RDM] Fixed bugs where Verfire and Grand Impact didn't grant correct mana","[RDM] Fixed a bug where it was possible to use un-enchanted Moulinet under certain incorrect conditions","mark newly-implemented jobs as in testing and display a warning message when using those jobs"]},{"date":"11/13/24","changes":["Fixed a bug where party buff potencies were not displayed","[PCT] Fixed a bug where using two hammer combos within 30s of each other caused the combo to break","[RDM] Fixed a bug where level synced RDM still received Grand Impact Ready from Acceleration","[RDM] Fixed a bug where Acceleration did not always grant a Verstone/Verfire proc","[RDM] Fixed a bug where certain role buffs were not being displayed on the hotbar","[RDM] Fixed a bug where buffs were overlapping the hotbar","[RDM] Fixed a bug where Contre Sixte's cooldown was improperly affected by traits","Removed debug and implementation notes sections (see repository wiki for implementation notes)"]},{"date":"11/12/24","changes":["Initial XIV in the Shell! Supporting patch 7.1 BLM and PCT, plus preliminary RDM"]}]`);function XA(){return xn[0].date}function GN(e){const t=St();return l.jsxs("div",{className:"changelogGroup",children:[l.jsx("div",{children:e.date}),l.jsx("div",{children:N({en:l.jsx(l.Fragment,{children:e.changes.map((n,o)=>l.jsx("div",{className:"changelogLine",style:{color:n.substring(1,5)==="BETA"?t.warning:t.text},children:n},o))}),zh:e.changes_zh!==void 0?l.jsx(l.Fragment,{children:e.changes_zh.map((n,o)=>l.jsx("div",{className:"changelogLine",style:{color:n.substring(1,5)==="BETA"?t.warning:t.text},children:n},o))}):void 0})})]})}const Rj=`
.changelogGroup {
	margin-top: 1em;
	margin-bottom: 1em;
}

.changelogLine {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
	margin-left: 0.5em;
}
`;function Tj(){let e,t,n={};const o=C.useRef(5),[s,c]=C.useState(!1),[d,f]=C.useState(!1),h=C.useContext(pa)==="Light",m=St();C.useEffect(()=>{let g=Tt("changelogLastRead"),p=Tt("changelogLastReadChangeCount");!tL&&(g===null||p===null)&&(g="5/10/25",p="1");const _=g===null||p===null||g===xn[0].date&&p===xn[0].changes.length.toString();if(c(_),g!==null&&p!==null){if(!_){let O=0,D=!1;for(;O<xn.length-1;O++){if(g===xn[O].date){p!==xn[O].changes.length.toString()&&O++;break}D=D||xn[O].level==="major"}f(D),o.current=O}}else gt("changelogLastRead",xn[0].date),gt("changelogLastReadChangeCount",xn[0].changes.length.toString())},[]);const R=g=>{g||(o.current=5,s||(gt("changelogLastRead",xn[0].date),gt("changelogLastReadChangeCount",xn[0].changes.length.toString())),c(!0))};if(s)e=N({en:"Changelog",zh:"",ja:""}),t="";else{const g=St();e=N({en:"Changelog (new updates"+(d?"!!":"")+")",zh:""+(d?"":"")+""}),t="!",d?n={color:g.warning,fontWeight:"bold"}:n={fontWeight:"bold"}}const T=l.jsx("div",{className:"clickable",children:l.jsxs("span",{style:n,children:[l.jsxs("span",{children:[t," "]}),l.jsx("span",{className:"clickableLinkLike",children:e})]})}),S=l.jsx(WN,{className:"dialogExit",style:{color:m.bgHighContrast}});return l.jsxs(l.Fragment,{children:[l.jsx("style",{children:Rj}),l.jsxs(FD,{onOpenChange:R,children:[l.jsx(zD,{render:T,nativeButton:!1}),l.jsxs(BD,{children:[l.jsx(OD,{className:"Backdrop",style:{opacity:h?.2:.7}}),l.jsxs(GD,{className:"Popup visibleScrollbar",id:"changelogPopup",style:{backgroundColor:m.background,border:"1px solid "+m.bgMediumContrast,color:m.text},children:[l.jsx(jD,{render:l.jsx("h3",{children:e})}),l.jsx(yD,{render:S,nativeButton:!1}),l.jsx(MD,{className:"Description",render:l.jsx(Sj,{hiddenStartIndex:o.current,newChanges:!s})})]})]})]})]})}function Sj(e){const t=[],n=[];for(let m=0;m<e.hiddenStartIndex;m++)t.push(GN(xn[m]));for(let m=e.hiddenStartIndex;m<xn.length;m++)n.push(GN(xn[m]));const o=N({en:e.newChanges?"New Changes":"Recent Changes",zh:e.newChanges?"":""}),s=l.jsxs("div",{style:{marginTop:10,marginBottom:10},children:[l.jsx("span",{style:{marginTop:10,marginBottom:10},children:l.jsx("b",{children:o})}),l.jsx("div",{style:{margin:10,paddingLeft:6},children:t.map((m,R)=>l.jsx("div",{children:m},R))})]}),[c,d]=C.useState(!1),f=N({en:"Older Changes",zh:""}),h=l.jsxs("div",{style:{marginTop:10,marginBottom:10},children:[l.jsx(Es,{content:l.jsxs("span",{children:[l.jsx("span",{children:c?"- ":"+ "}),l.jsx("b",{children:f})]}),onClickFn:()=>d(!c)}),l.jsx("div",{style:{position:"relative",display:c?"block":"none"},children:l.jsxs("div",{style:{margin:10,paddingLeft:6,marginBottom:20},children:[l.jsx("div",{children:n.map((m,R)=>l.jsx("div",{children:m},R))}),l.jsxs("div",{children:["For older changelog entries before the BLM/PCT in the Shell rejoining, see",l.jsx("b",{children:"About this site/Changelog"})," on the old sites:",l.jsx("a",{target:"_blank",rel:"noreferrer",href:"https://miyehn.me/ffxiv-blm-rotation/",children:"BLM in the Shell"}),",",l.jsx("a",{target:"_blank",rel:"noreferrer",href:"https://picto.zqsz.me/",children:"PCT in the Shell"})]})]})})]});return l.jsxs("div",{children:[s,h]})}const qA=uu?"https://beta.xivintheshell.com":"https://xivintheshell.com",fi="https://github.com/xivintheshell/xivintheshell",Rs="https://bsky.app/profile/xivintheshell.com",Cu="https://blog.xivintheshell.com",Ts="https://discord.com/channels/277897135515762698/1307922201726685236",yR="913451994",ZA="https://discord.gg/thebalanceffxiv",gj=()=>l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"paragraph",children:N({en:l.jsxs(l.Fragment,{children:[l.jsx("span",{children:"This tool was initially Black Mage in the Shell, "}),l.jsxs("span",{children:["ideated by ",l.jsx("b",{children:"Eshiya (Galahad)"})," and developed by ",l.jsx("b",{children:"miyehn"})," specifically for BLM during Endwalker since around February 2022."," "]}),l.jsx("span",{children:"After Dawntrail's release, it was expanded to support other jobs and is now maintained by a small team of developers:"})]}),zh:l.jsxs(l.Fragment,{children:[l.jsx("span",{children:"miyehn202226.x"}),l.jsx("span",{children:"7.0"})]})})}),N({en:l.jsxs("ul",{children:[l.jsxs("li",{children:["Tool design and core systems: ",l.jsx("b",{children:"shanzhe"}),", ",l.jsx("b",{children:"miyehn"}),", ",l.jsx("b",{children:"Turtle"}),","," ",l.jsx("b",{children:"Akairyu"})]}),l.jsxs("li",{children:["BLM: ",l.jsx("b",{children:"shanzhe"}),", ",l.jsx("b",{children:"Akairyu"}),", ",l.jsx("b",{children:"Turtle"}),", ",l.jsx("b",{children:"miyehn"})]}),l.jsxs("li",{children:["PCT, RDM, SMN, DRK, NIN, MNK, WHM, AST, SCH: ",l.jsx("b",{children:"shanzhe"})]}),l.jsxs("li",{children:["SAM: ",l.jsx("b",{children:"Sterling"}),", ",l.jsx("b",{children:"shanzhe"})]}),l.jsxs("li",{children:["DNC, MCH, BRD, SGE: ",l.jsx("b",{children:"Akairyu"})]}),l.jsxs("li",{children:["RPR: ",l.jsx("b",{children:"Honey B. Lovely's Favorite Bee"})]}),l.jsxs("li",{children:["WAR: ",l.jsx("b",{children:"misterperson"})]}),l.jsxs("li",{children:["GNB, DRG, PLD: ",l.jsx("b",{children:"Sterling"})]}),l.jsxs("li",{children:["BLU: ",l.jsx("b",{children:""})]}),l.jsxs("li",{children:["VPR: ",l.jsx("b",{children:"shanzhe"}),", ",l.jsx("b",{children:"misterperson"})]}),l.jsxs("li",{children:["Framework for adding new jobs: ",l.jsx("b",{children:"shanzhe"})]}),l.jsxs("li",{children:["Chinese localization: ",l.jsx("b",{children:"miyehn"}),", ",l.jsx("b",{children:"Eshiya"}),", ",l.jsx("b",{children:"Yuyuka"}),", ",l.jsx("b",{children:"shanzhe"}),","," ",l.jsx("b",{children:""}),", ",l.jsx("b",{children:""}),", ",l.jsx("b",{children:""}),", ",l.jsx("b",{children:""}),", ",l.jsx("b",{children:""}),", ",l.jsx("b",{children:""})]})]}),zh:l.jsxs("ul",{children:[l.jsxs("li",{children:["",l.jsx("b",{children:"shanzhe"}),"",l.jsx("b",{children:"miyehn"}),"",l.jsx("b",{children:"Turtle"}),"",l.jsx("b",{children:"Akairyu"})]}),l.jsxs("li",{children:["",l.jsx("b",{children:"shanzhe"}),"",l.jsx("b",{children:"Akairyu"}),"",l.jsx("b",{children:"Turtle"}),"",l.jsx("b",{children:"miyehn"})]}),l.jsxs("li",{children:["",l.jsx("b",{children:"shanzhe"})]}),l.jsxs("li",{children:["",l.jsx("b",{children:"Sterling"}),"",l.jsx("b",{children:"shanzhe"})]}),l.jsxs("li",{children:["",l.jsx("b",{children:"Akairyu"})]}),l.jsxs("li",{children:["",l.jsx("b",{children:"Honey B. Lovely's Favorite Bee"})]}),l.jsxs("li",{children:["",l.jsx("b",{children:"misterperson"})]}),l.jsxs("li",{children:["",l.jsx("b",{children:"Sterling"})]}),l.jsxs("li",{children:["",l.jsx("b",{children:""})]}),l.jsxs("li",{children:["",l.jsx("b",{children:"shanzhe"}),"",l.jsx("b",{children:"misterperson"})]}),l.jsxs("li",{children:["",l.jsx("b",{children:"shanzhe"})]}),l.jsxs("li",{children:["",l.jsx("b",{children:"miyehn"}),"",l.jsx("b",{children:""}),"",l.jsx("b",{children:""}),"",l.jsx("b",{children:"shanzhe"}),"",l.jsx("b",{children:""}),"",l.jsx("b",{children:""}),"",l.jsx("b",{children:""}),"",l.jsx("b",{children:""}),"",l.jsx("b",{children:""}),"",l.jsx("b",{children:""})]})]})}),l.jsx("div",{className:"paragraph",children:N({en:"And many thanks to Yara, Spider, Santa, players in , kiyozero, czmm, and other players and groups who contributed feature suggestions, timeline markers, bug reports, etc.",zh:"YaraSpiderSantakiyozeroczmmbug"})}),N({en:l.jsxs("div",{className:"paragraph",children:["If you have questions or would like to provide feedback, you can message in"," ",l.jsx("a",{target:"_blank",href:Ts,rel:"noreferrer",children:"this channel in The Balance"})," ",'(requires the "Misc. Support" role), or join QQ group ',yR,' where you can use Chinese. In case of sending a bug report, attaching the fight record (download "fight.txt" from the bottom or name it anything else) would be very helpful.']}),zh:l.jsxs("div",{className:"paragraph",children:[l.jsxs("span",{children:["bugQQ:"," ",yR," Discord The Balance ",l.jsx("a",{target:"_blank",href:Ts,rel:"noreferrer",children:""}),' "Misc. Support" role ']}),l.jsx("span",{children:"bugbugfight.txt"})]}),ja:l.jsx("div",{className:"paragraph",children:"[outdated (ja)] Discordmiyehnellyn.waterford@gmail.com fight.txt"})})]});function Ij(e){const t={marginBottom:5},n=St(),o=e.job,s=d=>l.jsx($a,{text:d}),c=s(navigator.platform.includes("Mac")?"cmd":"ctrl");return l.jsxs("div",{children:[l.jsx(Tj,{}),l.jsx(gl,{defaultShow:!0,title:"instructions",titleNode:l.jsxs("span",{children:[N({en:"Instructions ",zh:" ",ja:" "}),l.jsx(ze,{topic:"expandable",content:N({en:"click me to expand or collapse",zh:"/",ja:""})})]}),content:l.jsxs("div",{children:[l.jsx("div",{className:"paragraph",children:l.jsx("b",{children:N({en:"General Usage",zh:"",ja:""})})}),N({en:l.jsxs("ul",{children:[l.jsxs("li",{style:t,children:["Set your stats in ",l.jsx("b",{children:"Config"})," on the right, then"," ",s("apply and reset"),"."]}),l.jsx("li",{style:t,children:"Click on a skill to use it at the selected point in the timeline. The simulation will always jump to when the last animation lock ends and the skill's cooldown becomes available."}),l.jsxs("li",{style:t,children:["Press ",s("u")," to delete the last added action (effective when not running in real-time). Use ",c,"+",s("z"),"and ",c,"+",s("y")," to undo/redo."]}),l.jsx("li",{style:t,children:"Click on a buff applied to self to remove it. Clicking on certain ground-targeted buffs like BLM's Ley Lines, DRK's Salt and Darkness, and SCH's Sacred Soil temporarily disables their effects. Clicking again re-enables them."}),l.jsx("li",{style:t,children:'Click and drag in the visual timeline or use the "Timeline Editor" tab at the bottom of the page to re-arrange skills.'})]}),zh:l.jsxs("ul",{children:[l.jsxs("li",{style:t,children:["",l.jsx("b",{children:""}),""," ",s("")," "]}),l.jsx("li",{style:t,children:"CD"}),l.jsxs("li",{style:t,children:[" ",s("u")," "," ",c,"+",s("z"),"  ",c,"+",s("y")," "]}),l.jsx("li",{style:t,children:"buffbuff"}),l.jsx("li",{style:t,children:""})]}),ja:l.jsxs("ul",{children:[l.jsxs("li",{style:t,children:["",l.jsx("b",{children:""}),"",l.jsx($a,{text:""}),""]}),l.jsx("li",{style:t,children:""}),l.jsxs("li",{style:t,children:[l.jsx($a,{text:"u"}),""]}),l.jsx("li",{style:t,children:""})]})}),l.jsx("div",{className:"paragraph",children:l.jsx("b",{children:N({en:"Timeline",zh:"",ja:""})})}),N({en:l.jsxs("ul",{children:[l.jsxs("li",{style:t,children:["Holding ",s("shift")," lets you scroll horizontally."]}),l.jsxs("li",{style:t,children:["Click to select/unselect a single skill on the timeline."," ",s("shift"),"+click or click/drag to select a sequence of skills."]}),l.jsxs("li",{style:t,children:["Use ",s("backspace")," or ",s("delete")," to delete the selected skill(s)."]}),l.jsxs("li",{style:t,children:["Use ",c,"+",s("c")," and ",c,"+",s("v")," to copy/paste skills."]}),l.jsx("li",{style:t,children:"Click on the timeline's ruler-like header to view historical game states. Click on somewhere else on the timeline to return to the most recent game state."})]}),zh:l.jsxs("ul",{children:[l.jsxs("li",{style:t,children:[" ",s("shift")," "]}),l.jsxs("li",{style:t,children:[" shift  ",s("shift")," ",""]}),l.jsxs("li",{style:t,children:[" ",s("backspace"),"  ",s("delete")," "]}),l.jsxs("li",{style:t,children:[" ",c,"+",s("c"),"  ",c,"+",s("v")," ",""]}),l.jsx("li",{style:t,children:""})]}),ja:l.jsxs("ul",{children:[l.jsxs("li",{style:t,children:[l.jsx($a,{text:"shift"}),""]}),l.jsxs("li",{style:t,children:["",l.jsx($a,{text:"shift"}),""]}),l.jsxs("li",{style:t,children:[l.jsx($a,{text:"backspace"}),"",l.jsx($a,{text:"delete"}),""]}),l.jsxs("li",{style:t,children:["",l.jsx("b",{style:{color:"darkorange"},children:""})," "]})]})}),N({en:l.jsxs("div",{className:"paragraph",children:[l.jsx("span",{style:{color:n.fileDownload,cursor:"pointer"},children:l.jsx("u",{children:"[these]"})})," ","are file download links. Click to download, or right click to choose save location."]}),zh:l.jsxs("div",{className:"paragraph",children:[l.jsx("span",{style:{color:n.fileDownload,cursor:"pointer"},children:l.jsx("u",{children:"[]"})})," ",""]}),ja:l.jsxs("div",{className:"paragraph",children:[l.jsx("span",{style:{color:n.fileDownload,cursor:"pointer"},children:l.jsx("u",{children:"[]"})}),""]})}),N({en:l.jsxs("div",{className:"paragraph",children:["You can save/load fight records at the bottom, under the"," ",l.jsx("b",{children:"Import/Export"})," tab. Most edits are also automatically saved in your browser cache, so it's generally okay to refresh the page and not worry about losing progress."]}),zh:l.jsxs("div",{className:"paragraph",children:[" ",l.jsx("b",{children:"/"})," ","/"]})}),N({en:l.jsxs("div",{className:"paragraph",children:["Hover over ",l.jsx(ze,{topic:"sampleTips",content:"sample tip"})," ","everywhere to see more tips."]}),zh:l.jsxs("div",{className:"paragraph",children:[" ",l.jsx(ze,{topic:"sampleTips",content:""})," ",""]}),ja:l.jsxs("div",{className:"paragraph",children:[l.jsx(ze,{topic:"sampleTips",content:""}),""]})}),N({en:l.jsxs("div",{className:"paragraph",children:["For more detailed instructions, please refer to our"," ",l.jsx("a",{href:"/manual",children:"user manual"}),"."]}),zh:l.jsxs("div",{className:"paragraph",children:["",l.jsx("a",{href:"/manual",children:""}),""]})}),l.jsx("div",{className:"paragraph",style:{marginTop:16},children:l.jsx(gl,{title:"Troubleshoot",titleNode:N({en:l.jsx("b",{children:"troubleshoot"}),zh:l.jsx("b",{children:""}),ja:l.jsx("b",{children:""})}),content:l.jsxs(l.Fragment,{children:[N({en:l.jsxs("div",{children:[l.jsx("div",{className:"paragraph",children:"I can't guarantee that my updates are always backward compatible. If your fight record files aren't loading properly but you don't understand why, contact me and I'll try my best to help."}),l.jsxs("div",{className:"paragraph",children:["If the browser cache is somehow messed up (likely due to invalid game states), this is how to reset it:",l.jsx("br",{}),"Enter this tool from"," ",l.jsx("b",{children:qA+"?{command}"})," replacing"," ",l.jsx("b",{children:"{command}"})," with one of the following:",l.jsxs("ul",{children:[l.jsxs("li",{style:t,children:[l.jsx("b",{children:"resetResourceOverrides"}),": delete all resource overrides and all actions on the current timeline."]}),l.jsxs("li",{style:t,children:[l.jsx("b",{children:"resetAll"}),": delete all browser-cached settings."]})]})]})]}),zh:l.jsxs("div",{children:[l.jsx("div",{className:"paragraph",children:""}),l.jsxs("div",{className:"paragraph",children:["",l.jsx("br",{}),"",l.jsx("b",{children:qA+"?{command}"}),"",l.jsx("b",{children:"{command}"}),"",l.jsxs("ul",{children:[l.jsxs("li",{style:t,children:[l.jsx("b",{children:"resetResourceOverrides"}),": "]}),l.jsxs("li",{style:t,children:[l.jsx("b",{children:"resetAll"}),": "]})]})]})]}),ja:l.jsxs("div",{children:[l.jsx("div",{className:"paragraph",children:""}),l.jsxs("div",{className:"paragraph",children:["",l.jsx("br",{}),l.jsx("b",{children:qA+"?{command}"})," ",l.jsx("b",{children:"{command}"})," ","",l.jsxs("ul",{children:[l.jsxs("li",{style:t,children:[l.jsx("b",{children:"resetResourceOverrides"}),": "]}),l.jsxs("li",{style:t,children:[l.jsx("b",{children:"resetAll"}),": "]})]})]})]})}),l.jsxs("div",{children:[N({en:"Or just: ",zh:""}),l.jsx("button",{className:"dangerButton",onClick:()=>{qN(),window.location.reload()},children:N({en:"[DANGER!] clear browser cache and reload",zh:"[] ",ja:"[] "})})]})]})})})]})}),l.jsx(gl,{defaultShow:!1,title:"About this tool",titleNode:N({en:"About this tool",zh:"",ja:""}),content:l.jsxs("div",{children:[l.jsx("div",{className:"paragraph",children:N({en:"This is a FFXIV simulator & rotation planner.",zh:"FF14/",ja:"FF14"})}),gj(),l.jsx("div",{className:"paragraph",children:N({en:"Some links:",zh:"",ja:""})}),N({en:l.jsxs("ul",{children:[l.jsx("li",{children:l.jsx("a",{href:fi,children:"Github repository"})}),l.jsxs("li",{children:[l.jsx("a",{href:Rs,children:"Bluesky account"})," and our"," ",l.jsx("a",{href:Cu,children:"developer blog"})]}),l.jsxs("li",{children:[l.jsx("a",{href:"https://xivintheshell.github.io/legacy/",children:"XIV in the Shell (Legacy)"}),": a snapshot of this tool at the end of the previous major game patch (currently 7.25)."]}),l.jsxs("li",{children:[l.jsx("a",{href:"https://miyehn.me/ffxiv-blm-rotation-endwalker/",children:"Black Mage in the Shell (Endwalker)"}),": a snapshot of this tool at the end of Endwalker. It also contains some notable fight plans from Endwalker, as memoir."]}),l.jsxs("li",{children:[l.jsx("a",{href:"https://spide-r.github.io/ffxiv-blm-rotation/",children:"Black Mage in the Bozjan Shell"}),": a variation for Save the Queens areas, created by"," ",l.jsx("b",{children:"A'zhek Silvaire @ Zalera"})]}),l.jsx("li",{children:l.jsx("a",{href:"https://na.finalfantasyxiv.com/jobguide/battle/",children:"Official FFXIV job guides"})}),l.jsxs("li",{children:["The Balance's community"," ",l.jsx("a",{href:"https://www.thebalanceffxiv.com/",children:"job guides"})," and"," ",l.jsx("a",{href:ZA,children:"Discord"})]})]}),zh:l.jsxs("ul",{children:[l.jsx("li",{children:l.jsx("a",{href:fi,children:"Github"})}),l.jsxs("li",{children:[l.jsx("a",{href:Rs,children:""}),"",l.jsx("a",{href:Cu,children:""}),""]}),l.jsxs("li",{children:[l.jsx("a",{href:"https://xivintheshell.github.io/legacy/",children:""}),"FF147.25"]}),l.jsxs("li",{children:[l.jsx("a",{href:"https://miyehn.me/ffxiv-blm-rotation-endwalker/",children:"6.x"}),"6.x"]}),l.jsxs("li",{children:[l.jsx("a",{href:"https://spide-r.github.io/ffxiv-blm-rotation/",children:"Black Mage in the Bozjan Shell"}),": /"," ",l.jsx("b",{children:"A'zhek Silvaire @ Zalera"})]}),l.jsx("li",{children:l.jsx("a",{href:"https://na.finalfantasyxiv.com/jobguide/battle/",children:""})}),l.jsxs("li",{children:["The Balance",l.jsxs("a",{href:"https://www.thebalanceffxiv.com/",children:[" ",""]})," ",l.jsx("a",{href:ZA,children:"Discord"})]})]}),ja:l.jsx("ul",{children:l.jsxs(l.Fragment,{children:[l.jsx("li",{children:l.jsx("a",{href:fi,children:"Github repository"})}),l.jsxs("li",{children:[l.jsx("a",{href:"https://spide-r.github.io/ffxiv-blm-rotation/",children:"Black Mage in the Bozjan Shell"}),": ",l.jsx("b",{children:"A'zhek Silvaire @ Zalera"})]}),l.jsx("li",{children:l.jsx("a",{href:"https://na.finalfantasyxiv.com/jobguide/blackmage/",children:"Official FFXIV black mage job guide"})}),l.jsxs("li",{children:[l.jsxs("a",{target:"_blank",href:ZA,rel:"noreferrer",children:[o," resources channel on The Balance"]})," ","Discord"," "]})]})})})]})})]})}function _j(){const e=C.useContext(pa),t=Il(e,"text");return l.jsxs("div",{style:{display:"inline-block",fontSize:16},children:[l.jsx("style",{children:`
		.linkOption {
			display: inline-block;
			cursor: pointer;
			vertical-align: top;
			margin-top: 1px;
		}
		.linkOption:hover {
			border-bottom: 1px solid;
		}
		`}),l.jsxs("div",{style:{display:"inline-block"},children:[l.jsx(es.Provider,{value:{color:t,className:"linkOption"},children:l.jsx("a",{href:Rs,title:N({en:"Bluesky",zh:""}),children:l.jsx(VM,{})})}),"|",l.jsx(es.Provider,{value:{color:t,className:"linkOption"},children:l.jsx("a",{href:fi,title:N({en:"GitHub",zh:"GitHub"}),children:l.jsx(WM,{})})}),"|",l.jsx(es.Provider,{value:{color:t,className:"linkOption"},children:l.jsx("a",{href:Cu,title:N({en:"Blog",zh:""}),children:l.jsx(XM,{})})}),"|",l.jsx(es.Provider,{value:{color:t,className:"linkOption"},children:l.jsx("a",{href:"/manual",title:N({en:"User Manual",zh:""}),children:l.jsx(qM,{})})})]})]})}var pj={};let df=e=>{},hf=e=>{},ff=e=>{};function Nj(e){if(e==="resetAll")qN();else if(e==="resetResourceOverrides"){const t=Tt("gameRecord");for(let n=0;n<Oi;n++){let o=Tt("gameRecord"+n.toString());if(n===0&&o===null&&t!==null&&(o=t),o!==null){const s=JSON.parse(o);console.log(s),s.config&&(s.config.initialResourceOverrides=[]),s.actions=[],gt("gameRecord"+n.toString(),JSON.stringify(s))}}}else e==="code"?console.log("FFLogs authorization triggered."):e==="resetFFLogsAuth"?(console.log("Reset FFLogs PKCE authorization state and session token."),window.sessionStorage.removeItem("fflogsAuthToken"),vh()):e!==void 0&&console.log("unrecognized command '"+e+"'")}function Cj(e){return l.jsx("div",{style:{flex:3,height:e.height,marginLeft:6,position:"relative",verticalAlign:"top"},children:l.jsx(Xb,{uniqueName:"mainConfig",content:[{titleNode:N({en:"Config",zh:""}),contentNode:l.jsx(k2,{})},{titleNode:N({en:"Control",zh:""}),contentNode:l.jsx(M2,{})}],collapsible:!1,scrollable:!0,height:e.height,defaultSelectedIndex:0})})}function BN(e){const t=e.color??St().accent;return l.jsx("div",{style:{display:e.hidden===!0?"none":"block",color:t,border:"1px solid "+t,borderRadius:4,padding:"10px 10px 0 10px"},children:e.children})}const FN=uu?"[BETA] ":"";class bj extends Hn.Component{controlRegionRef;gameplayKeyCapture;setColorTheme;state;constructor(t){super(t),Nj(t.command),this.state={job:I.getActiveJob(),hasFocus:!1,historical:!1,realTime:!1,controlRegionHeight:0,colorTheme:mf()},this.controlRegionRef=Hn.createRef(),this.gameplayKeyCapture=n=>{I.handleKeyboardEvent(n)},df=n=>{this.setState({job:n});const o=document.querySelector("link[rel~='icon']");o&&(uu?o.href="/favicons/beta.ico":n in dt?o.href="/favicons/"+n.toString().toLocaleLowerCase()+".ico":o.href=pj.PUBLIC_URL+"/favicon.ico");const s=document.getElementById("pageTitle");s&&(s.text=`${FN}XIV in the Shell (${n})`)},hf=n=>{this.setState({realTime:n})},ff=n=>{this.setState({historical:n})},this.setColorTheme=n=>{n!==this.state.colorTheme&&(I.updateAllDisplay(),this.setState({colorTheme:n}),gt("colorTheme",n))}}componentDidMount(){I.tryAutoLoad(),I.updateAllDisplay(),this.controlRegionRef.current&&new ResizeObserver(()=>{const t=this.controlRegionRef.current?.clientHeight??0;this.setState({controlRegionHeight:t})}).observe(this.controlRegionRef.current)}componentWillUnmount(){df=t=>{},hf=t=>{},ff=t=>{}}render(){const t=En(this.state.colorTheme),n={height:"100%",accentColor:t.accent,fontFamily:hi,fontSize:13,color:t.text,backgroundColor:t.background,display:"flex",flexDirection:"column"};let o;this.state.historical?o="2px solid "+t.historical:this.state.hasFocus?this.state.realTime?o="2px solid "+t.realTime:o="2px solid "+t.accent:o="1px solid "+t.bgMediumContrast;const s={marginBottom:"5px"},c=l.jsx("div",{style:{flex:7,display:"inline-block",position:"relative"},children:l.jsxs("div",{onFocus:()=>{this.setState({hasFocus:!0})},onBlur:()=>{this.setState({hasFocus:!1})},style:{display:"inline-block",padding:8,outline:o},tabIndex:-1,ref:this.controlRegionRef,children:[l.jsx(CP,{}),l.jsx(Rw,{})]})}),d=window.innerWidth>1024;return l.jsxs("div",{style:{position:"fixed",top:0,bottom:0,left:0,right:0,outline:"none"},tabIndex:-1,onKeyDown:this.gameplayKeyCapture,children:[l.jsx("style",{children:`
				@supports selector(::-webkit-scrollbar) {
					.visibleScrollbar::-webkit-scrollbar {
						appearance: none;
						background-color: ${t.bgLowContrast};
						height: 8px;
						width: 5px;
					}
					.visibleScrollbar::-webkit-scrollbar-thumb {
						background-color: ${t.bgHighContrast};
					}
					.invisibleScrollbar::-webkit-scrollbar {
						appearance: none;
						background-color: clear;
						height: 8px;
						width: 5px;
					}
					.invisibleScrollbar::-webkit-scrollbar-thumb {
						background-color: ${t.bgHighContrast};
					}
				}
				@supports not selector(::-webkit-scrollbar) {
					.visibleScrollbar {
						scrollbar-color: ${t.bgHighContrast} ${t.bgLowContrast};
						scrollbar-width: auto;
					}
					.invisibleScrollbar {
						scrollbar-width: none;
					}
				}
				a {
					color: ${t.accent};
				}
				b, h1, h2, h3, h4 {
					color: ${t.emphasis};
				}
				p {
					margin-block-start: 10px;
					margin-block-end: 10px;
				}
				p:first-child {
					margin-block-start: 0px;
				}
				::selection {
					background: rgba(147, 112, 219, 0.4);
				}
				option, select {
					color: ${t.text};
					background-color: ${t.background};
				}
				button, input[type="submit"], ::-webkit-file-upload-button {
					color: ${t.text};
					background-color: ${t.bgLowContrast};
					border: 1px solid ${t.bgHighContrast};
				}
				input[type="radio"] {
					appearance: none;
					width: 1em;
					height: 1em;
					border: 1px solid ${t.bgHighContrast};
					border-radius: 50%;
					background-clip: content-box;
					padding: 2px;
				}
				input[type="radio"]:checked {
					background-color: ${t.accent};
				}
				input[type="checkbox"] {
					appearance: none;
					width: 1em;
					height: 1em;
					border: 1px solid ${t.bgHighContrast};
					border-radius: 1px;
					background-clip: content-box;
					padding: 2px;
				}
				input[type="checkbox"]:checked:after {
					content: '\\2714';
					color: ${t.accent};
					position: absolute;
					font-size: 22px;
					top: -6px;
					left: -2px;
				}
				.checkbox-star:before {
					content: "\\2605";
					color: ${t.timeline.aggroMark};
					position: absolute;
					font-size: 22px;
					top: -7px;
					left: -3px;
					visibility: visible;
				}
				input[type="range"] {
					appearance: none;
					background-color: transparent;
					border: 1px solid ${t.bgHighContrast};
					vertical-align: middle;
					height: 0.9em;
					border-radius: 0.45em;
					overflow: hidden;
					padding: 0.05em;
				}
				input[type="range"]::-webkit-slider-thumb {
					appearance: none;
					background-color: ${t.accent};
					width: 0.8em;
					height: 0.8em;
					border-radius: 0.4em;
				}
				.help-tooltip {
					color: ${t.text};
					background-color: ${t.tipBackground};
					opacity: 0.98;
					max-width: 300px;
					outline: 1px solid ${t.bgHighContrast};
					transition: none;
					font-size: 100%;
					z-index: 10;
				}
				button:disabled {
					background-color: ${t.background};
				}
			`}),l.jsx(pa.Provider,{value:this.state.colorTheme,children:l.jsxs("div",{style:n,id:"globalHelpTooltipAnchor",children:[l.jsx("div",{style:{flex:1,overflowY:"scroll",overscrollBehaviorY:"contain"},children:l.jsxs("div",{style:{position:"relative",maxWidth:1060,margin:"0 auto",marginTop:40,display:"grid"},children:[l.jsxs("div",{style:{position:"absolute",display:"flex",flexWrap:"wrap",justifySelf:"right",justifyContent:"space-between",alignItems:"flex-start",gap:"1.4em"},children:[d&&l.jsx(_j,{}),l.jsx(oH,{}),l.jsx(eH,{setColorTheme:this.setColorTheme})]}),l.jsxs("div",{children:[l.jsxs("h3",{style:{marginTop:0,marginBottom:6},children:[FN,"XIV in the Shell"]}),N({en:l.jsxs("div",{style:{marginBottom:16},children:["Last updated: ",XA()," (see ",l.jsx("b",{children:"Changelog"}),")"]}),zh:l.jsxs("div",{style:{marginBottom:16},children:["",XA(),"",l.jsx("b",{children:""}),""]}),ja:l.jsxs("div",{style:{marginBottom:16},children:["",tH(XA()),"",l.jsx("b",{children:""}),"",l.jsx("a",{href:"https://coda.io/d/_d-N3WFoMZ8e/Black-Mage-in-the-Shell_suRLF",children:""}),""]})}),eL()?l.jsx("div",{style:{margin:"10px 0",padding:"10px",border:"1px solid "+t.warning,color:t.warning,borderRadius:4},children:N({en:l.jsxs("div",{children:["NOTE: Your browser cache contains data from BLM in the Shell before it's updated for Dawntrail. Visit the Endwalker archive at"," ",l.jsx("a",{style:{color:t.warning},href:"https://miyehn.me/ffxiv-blm-rotation-endwalker",children:"miyehn.me/ffxiv-blm-rotation-endwalker"})," ","to access and automatically re-save it. Once you do that, this notice will also go away."]}),zh:l.jsxs("div",{children:["7.06.0",l.jsx("a",{style:{color:t.warning},href:"https://miyehn.me/ffxiv-blm-rotation-endwalker",children:"miyehn.me/ffxiv-blm-rotation-endwalker"}),""]})})}):void 0,uu&&l.jsx(BN,{color:t.warning,children:N({en:l.jsxs("div",{style:{marginBottom:"10px"},children:[l.jsx("span",{children:l.jsx("b",{style:{color:t.warning},children:"You're currently using the BETA version of XIV in the Shell."})}),l.jsxs("ul",{children:[l.jsx("li",{style:s,children:"Things may break in unexpected ways at any time. Use at your own peril, and make sure to export in-progress files frequently."}),l.jsx("li",{style:s,children:"Application data is not shared with the main site. Anything you do here stays here. Files created on the BETA site may not work on the main site, but files made on the main site should be importable here (if they are not, please report this as a bug)."}),l.jsx("li",{style:s,children:"If the page becomes un-loadable, please contact us and tell us what your last actions on the site were, and we can help you debug what went wrong. You can also try resetting your browser's localStorage data for beta.xivintheshell.com."}),l.jsxs("li",{style:s,children:["To report an issue, you can contact us on Discord in The Balance (",l.jsx("a",{href:Ts,children:"#xiv_in_the_shell_support"}),"), or file an issue on"," ",l.jsx("a",{href:"https://github.com/xivintheshell/xivintheshell/issues",children:"our GitHub"}),"."]})]})]}),zh:l.jsxs("div",{style:{marginBottom:"10px"},children:[l.jsx("span",{children:l.jsx("b",{style:{color:t.warning},children:"XIV in the ShellBETA"})}),l.jsxs("ul",{children:[l.jsx("li",{style:s,children:""}),l.jsx("li",{style:s,children:"BETABETAbug"}),l.jsx("li",{style:s,children:"beta.xivintheshell.comlocalStorage"}),l.jsxs("li",{style:s,children:["miyehnQQ870340705",l.jsx("a",{href:"https://github.com/xivintheshell/xivintheshell/issues",children:"GitHub"}),"issue"]})]})]})})}),uu&&l.jsx("div",{style:{margin:"10px"}}),l.jsx(Ij,{job:this.state.job}),l.jsx(gl,{defaultShow:!0,title:"7-2-user-survey",titleNode:l.jsx("span",{children:N({en:"7.2 User Survey",zh:"7.2"})}),content:l.jsx(BN,{children:N({en:l.jsx(l.Fragment,{children:l.jsxs("p",{children:["Help us improve XIV in the Shell! Please take our user survey:"," ",l.jsx("b",{children:l.jsx("a",{target:"_blank",rel:"noreferrer",href:"https://forms.gle/eKVygxxZVd894323A",children:"https://forms.gle/eKVygxxZVd894323A"})})]})}),zh:l.jsx(l.Fragment,{children:l.jsxs("p",{children:[""," ",l.jsx("b",{children:l.jsx("a",{target:"_blank",rel:"noreferrer",href:"https://www.wjx.cn/vm/mQ1gV2b.aspx",children:"https://www.wjx.cn/vm/mQ1gV2b.aspx"})})]})})})})})]}),l.jsxs("div",{style:{display:"flex",flexDirection:"row",position:"relative",marginBottom:"20px"},children:[c,l.jsx(Cj,{height:this.state.controlRegionHeight})]}),l.jsx(gw,{}),l.jsx("hr",{style:{margin:"30px 0px",border:"none",borderTop:"1px solid "+t.bgHighContrast}}),l.jsx(q2,{})]})}),l.jsx(Aj,{})]})})]})}}const Oj=C.forwardRef(function(t,n){const{className:o,render:s,orientation:c="horizontal",...d}=t,f=C.useMemo(()=>({orientation:c}),[c]);return ao("div",t,{state:f,ref:n,props:[{role:"separator","aria-orientation":c},d]})}),Dj="https://support.na.square-enix.com/rule.php?id=5382&la=1&tag=authc",Jf="https://www.thebalanceffxiv.com/",eE="https://www.icy-veins.com/ffxiv/",$D="https://www.fflogs.com/",yj="https://blog.xivintheshell.com/posts/what-is-xiv-in-the-shell/",JD="https://etro.gg/",sS="https://xivgear.app/",ic="https://github.com/Amarantine-xiv/Amas-FF14-Combat-Sim_source",ey="https://xivanalysis.com/",ty="https://xivraider.com/",vj="https://na.finalfantasyxiv.com/jobguide/battle/",Mj="https://ffxiv.consolegameswiki.com/wiki/FF14_Wiki",ay="http://xivapi.com",ny="https://arcanedisgea.github.io/xiv-id/",iy="https://www.akhmorning.com/allagan-studies/",oy="https://discord.com/channels/277897135515762698/1199477934075953242",ly="https://docs.google.com/document/d/1c1a16tUifUN09KoCgNx1EyOsk1HLYGm-b-q7lz6W8C4/edit",sy="https://docs.google.com/document/d/1c1a16tUifUN09KoCgNx1EyOsk1HLYGm-b-q7lz6W8C4/edit",ry="https://docs.google.com/document/d/13ggP7PoOs-ic6ve_Huo4A2-3Mx7ozeRPXzC7N_edgHU/edit#heading=h.d8b4r5is0qbm",cy="https://www.bilibili.com/read/cv29822181/?jump_opus=1",uy="https://docs.google.com/document/d/1zxUd7vFfs24cGteOeCnEsoCzfDxIvKNROIvDUqG-6no/edit",tE="https://github.com/Tischel/BLMInTheShell",dy="https://github.com/xivintheshell/xivintheshell/blob/main/scripts/csv2track.py",hy="https://github.com/xivintheshell/xivintheshell/wiki/Creating-timeline-tracks",fy="https://colab.research.google.com/drive/1XiVqn-W5teCaXGMtLoq3Zqx5zrk50Fh3?usp=sharing",Ey="https://github.com/leifengsang/XivInTheShellMarkerGen",Lj="https://en.wikipedia.org/wiki/Random_seed",xj="https://www.bilibili.com/video/BV1SGvZBAEsm/",Hj="https://actff1.web.sdo.com/project/20190917jobguid/index.html#/index",kj="https://ff14.huijiwiki.com/wiki/%E9%A6%96%E9%A1%B5",Uj="https://bbs.nga.cn/read.php?tid=19736925",wj="https://asvel.github.io/ffxiv-gearing/",Pj=mf(),vR=()=>l.jsx(Oj,{orientation:"vertical",style:{width:"1px",backgroundColor:En(Pj).text}}),my={marginLeft:"2em",marginTop:"-0.2em",marginBottom:"1em",display:"flex",gap:"0.5rem"};function Gj(){return l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:my,children:[l.jsx("div",{children:l.jsx("i",{children:"by Shanzhe Qi @ Seraph"})}),l.jsx(vR,{}),l.jsx("div",{children:"last updated 9 February 2026"})]}),l.jsxs("p",{className:"no-indent",children:["Welcome to ",l.jsx("i",{children:"XIV in the Shell"}),", a rotation planner tool for ",l.jsx("i",{children:"Final Fantasy XIV"}),"! This page walks you through how to make the most of our timeline creation and manipulation features to improve your gameplay. Use the navigation bar on the right to find help for a specific feature."]}),l.jsxs("p",{children:["This manual only covers how to use this tool for planning, not how to choose what abilities to use in your rotation. For resources for learning and optimizing your job, please refer to other sites like ",l.jsx("a",{href:Jf,children:"The Balance"})," and"," ",l.jsx("a",{href:eE,children:"Icy Veins"}),". Further information about jobs and FFXIV's combat system can be found in the ",l.jsx("a",{href:"#additional-resources",children:"Additional Resources"})," ","section of this page."]}),l.jsxs("p",{children:["For feedback or questions about this page, please reach out to us on"," ",l.jsx("a",{href:fi,children:"GitHub"})," on Discord through our"," ",l.jsx("a",{href:Ts,children:"support channel in The Balance"}),", or on"," ",l.jsx("a",{href:Rs,children:"Bluesky"}),"."]}),l.jsxs("p",{children:["This manual page can always be found at ",l.jsx("a",{href:"/manual",children:"xivintheshell.com/manual"})," ","or ",l.jsx("a",{href:"/manual_en",children:"xivintheshell.com/manual_en"}),"."]}),l.jsxs("p",{children:["FINAL FANTASY is a registered trademark of Square Enix Holdings Co., Ltd. Game ability and status images are  SQUARE ENIX, and used for non-commercial purposes in compliance with the ",l.jsx("a",{href:Dj,children:"Final Fantasy XIV Materials Usage License"}),"."]})]})}function Bj(){return l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:my,children:[l.jsx("i",{children:"Shanzhe Qi @ Seraph"})," ",l.jsx(vR,{})," ",l.jsx("i",{children:"ai"})," ",l.jsx(vR,{})," ","202629"]}),l.jsxs("p",{children:[" XIV in the ShellXIV",l.jsx("a",{href:xj,children:""}),""]}),l.jsxs("p",{children:[""," ",l.jsx("a",{href:Jf,children:"The Balance"}),"",l.jsx("a",{href:eE,children:"Icy Veins"})," ","XIV"]}),l.jsxs("p",{children:["",l.jsx("a",{href:fi,children:"GitHub"})," XIV in the ShellQQ",yR,"",l.jsx("a",{href:Ts,children:"The Balance Discord"}),""," ",l.jsx("a",{href:Rs,children:"Bluesky"}),""]}),l.jsxs("p",{children:["",l.jsx("a",{href:"/manual",children:"xivintheshell.com/manual"}),"",l.jsx("a",{href:"/manual_zh",children:"xivintheshell.com/manual_zh"}),""]}),l.jsx("p",{children:"FINAL FANTASY  Square Enix Holdings Co., Ltd.  SQUARE ENIXXIV "})]})}const be=e=>l.jsx($a,{text:e});function Fj(){return l.jsxs(l.Fragment,{children:[l.jsx(_i,{id:"overview",label:l.jsx(l.Fragment,{children:"Overview"})}),l.jsx(He,{id:"what-is-xivintheshell",label:l.jsxs(l.Fragment,{children:["What is ",l.jsx("i",{children:"XIV in the Shell"}),"?"]})}),l.jsxs("p",{children:["I answered this question in more detail in our ",l.jsx("a",{href:yj,children:"first blog post"}),", but Ive copied the important parts here."]}),l.jsx("p",{children:l.jsxs("b",{children:[l.jsx("i",{children:"XIV in the Shell"})," (",l.jsx("a",{href:"/",children:"https://xivintheshell.com"}),") is a web-based FFXIV rotation planner and job simulator."]})}),l.jsx("p",{children:"Thats it! Most high-end raids in FFXIV have very predictable timelines, and the mechanics of each fight force players to react differently to maintain a coherent rotation. Melees may need to disengage, casters may need to save resources for extended movement, and parties may adjust buff window timings in unconventional ways. Our tool lets you compare a DPS timeline against a fight's mechanic timeline and party buff windows, and makes precise planning accessible in a way that traditional spreadsheet-based tools do not."}),l.jsx("p",{children:"Making rotational adaptations on the fly is a valuable skill for raiders to have, but planning while outside instance is useful all the same. Even outside hardcore optimization environments, there are a myriad of reasons to create rotation plans for a fight:"}),l.jsxs("ul",{children:[l.jsx("li",{children:"Theorycrafting sequences for your job"}),l.jsx("li",{children:"Getting more comfortable in fights you haven't yet cleared"}),l.jsx("li",{children:"Getting more comfortable in fights you've already cleared"}),l.jsx("li",{children:"Improving your understanding of a job's fundamentals"}),l.jsx("li",{children:"Moving the colored number on your FFLogs profile up"})]}),l.jsx("p",{children:"Rotation planning can also just be plain fun for its own sake. The interaction between fight mechanics and job kits is a challenging puzzle to solve, and discovering creative solutions then executing them well in-game is a uniquely rewarding experience."}),l.jsx(He,{id:"features",label:"Features"}),l.jsxs("p",{children:[l.jsx("i",{children:"XIV in the Shell"})," provides the following capabilities:"]}),l.jsxs("ul",{children:[l.jsx("li",{children:"Rotation visualization in both a graphical timeline and spreadsheet-like table"}),l.jsx("li",{children:"Full simulation of cooldowns, buffs, MP, and job gauge resources"}),l.jsx("li",{children:"Customizable starting resources for planning specific phases"}),l.jsxs("li",{children:["Combat stat configuration and import from ",l.jsx("a",{href:JD,children:"etro"}),"/",l.jsx("a",{href:sS,children:"XivGear"})]}),l.jsx("li",{children:"Rotation import from FFLogs"}),l.jsx("li",{children:"Preset fight timelines for most high-end difficulty encounters"}),l.jsx("li",{children:"Rotations and fight markers shareable as text files"}),l.jsx("li",{children:"Customizable buff timings and timeline markers"}),l.jsx("li",{children:"Customizable macros for sequences of multiple skills"}),l.jsx("li",{children:"Potency calculation with party buffs and potion usage"}),l.jsxs("li",{children:["Compatibility with ",l.jsx("a",{href:ic,children:"Amarantine's combat simulator"})," for more advanced DPS simulation"]}),l.jsx("li",{children:"Import/export from plain text, spreadsheets, and Discord emotes"})]}),l.jsx(He,{id:"quickstart",label:"Quick Start"}),l.jsx("p",{children:"To get started with making a timeline:"}),l.jsxs("ol",{children:[l.jsx("li",{children:'Choose your job and combat stats from the "config" panel to the right of the skill hotbar, then click "apply and reset."'}),l.jsx("p",{children:'[optional] Load fight markers for a specific encounter from the "Timeline markers" tab at the bottom of the page.'}),l.jsx("li",{children:"Input skills by clicking on their icon in the skill hotbar. The simulation will automatically advance to the end of its animation lock or cast time. Clicking a skill will attempt to use it as soon as its cooldown and the current animation lock/GCD timer allows."}),l.jsxs("li",{children:["Rearrange skills by clicking/dragging in the graphical timeline, and hit"," ",be("Delete")," to remove selected skills."]}),l.jsx("p",{children:"For more details on how to use or configure specific features, please refer to the corresponding section in the navigation bar on the right."})]}),l.jsx(He,{id:"shortcuts",label:"Keyboard Shortcuts"}),l.jsxs("p",{children:["The following keyboard shortcuts are available anywhere on the site, except when editing a text/number input field (replace ",be("ctrl")," with ",be("cmd")," for Mac users):"]}),l.jsxs("ul",{children:[l.jsxs("li",{children:[be("u")," Delete the last action in the active timeline."]}),l.jsxs("li",{children:[be("ctrl"),"+",be("z")," Undo last action."]}),l.jsxs("li",{children:[be("ctrl"),"+",be("y")," OR ",be("ctrl"),"+",be("shift"),"+",be("z")," Redo last action."]}),l.jsxs("li",{children:[be("ctrl"),"+",be("c")," Copy selected skills to clipboard. The format can be changed in the Settings tab at the bottom of the page."]}),l.jsxs("li",{children:[be("ctrl"),"+",be("x")," Cut selected skills to clipboard."]}),l.jsxs("li",{children:[be("ctrl"),"+",be("v")," Paste skills from the clipboard."]})]}),l.jsxs("ul",{children:[l.jsx("p",{children:'The following shortcuts are available when interacting with the graphical timeline and the "Timeline editor" table:'}),l.jsxs("li",{children:[be("Backspace")," OR ",be("Delete")," Delete the selected skills from the timeline. Subsequent actions are rearranged to be used as soon as possible."]}),l.jsxs("li",{children:[be("")," Select the previous action in the timeline. If no actions are currently selected, select the last action in the timeline."]}),l.jsxs("li",{children:[be("")," Select the next action in the timeline. If no actions are currently selected, select the first action in the timeline."]}),l.jsxs("li",{children:[be("Home")," Select the first action in the timeline."]}),l.jsxs("li",{children:[be("End")," Select the last action in the timeline."]}),l.jsxs("li",{children:[be("Shift"),"+",be("")," / ",be("Shift"),"+",be("")," / ",be("Shift"),"+",be("Home")," /"," ",be("Shift"),"+",be("End")," Extend the selection window to the previous/next/first/last action."]}),l.jsxs("li",{children:[be("Escape")," Deselect all actions."]}),l.jsxs("li",{children:[be("ctrl"),"+",be("a")," Select all actions."]})]}),l.jsx(He,{id:"update-policy",label:"Update Policy"}),l.jsxs("p",{children:[l.jsx("i",{children:"XIV in the Shell"})," frequently receives updates to improve user experience and accuracy of its simulations. We make our best effort to ensure our updates do not break saved timelines whenever possible, but cannot always guarantee this, whether due to developer error or in-game changes. Please export your timelines often to reduce the risk of losing work."]}),l.jsxs("p",{children:["Potencies and job mechanics in ",l.jsx("i",{children:"XIV in the Shell"})," reflect those in the latest global server version of FFXIV. We try to make updates available within a few days of each patch release, but may be slower depending on the developers' availability."]}),l.jsx(He,{id:"technical-details",label:"Quick Technical Details"}),l.jsxs("p",{children:[l.jsx("i",{children:"XIV in the Shell"})," is a client-only single page application. All data is stored within your web browser's localStorage module, so clearing your browsing data for"," ",l.jsx("a",{href:"/",children:"xivintheshell.com"})," will permanently delete all of your saved rotations and markers. This also means that if you lose any data, we (the developers) are unable to recover it for you, because it never leaves the confines of your browser unless you explicitly send us your exported files through some other platform. It is highly unlikely that we will ever maintain a server of any kind, so as to keep development/maintenance costs minimal and reduce the likelihood of site downtime."]}),l.jsxs("p",{children:["This site is made in Typescript with Vite + React, and hosted with GitHub Pages. You can find our source code on GitHub at ",l.jsx("a",{href:fi,children:fi}),". Contributions, bug reports, and feature requests are welcome!"]}),l.jsx(He,{id:"troubleshooting",label:"Troubleshooting"}),l.jsx("p",{children:"In very rare cases, you may encounter a bug that completely breaks the website, causing it to render nothing but a white screen. If this happens, please raise a bug report with us on GitHub or Discord, and describe the most recent actions you took before the site crashed."}),l.jsx("p",{children:"If you're unable to communicate with us, you may attempt to fix the issue yourself by visiting one of the following links:"}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"xivintheshell.com?resetResourceOverrides"})," Deletes all resource overrides and clears all actions in your saved timelines."]}),l.jsxs("li",{children:[l.jsx("b",{children:"xivintheshell.com?resetAll"})," Deletes all your saved data in"," ",l.jsx("i",{children:"XIV in the Shell"}),"."]}),l.jsxs("li",{children:[l.jsx("b",{children:"xivintheshell.com?resetFFLogsAuth"})," Resets data related to FFLogs authorization."]})]}),l.jsx("p",{children:"If all these steps fail, please clear your browsing data for xivintheshell.com through your web browser's settings. Once again: remember to frequently download and save your timelines, should the worst come to pass!"})]})}function jj(){return l.jsxs(l.Fragment,{children:[l.jsx(_i,{id:"overview",label:l.jsx(l.Fragment,{children:""})}),l.jsx(He,{id:"what-is-xivintheshell",label:l.jsx(l.Fragment,{children:"XIV in the Shell "})}),l.jsxs("p",{children:["XIV in the Shell",l.jsx("a",{href:"/",children:"https://xivintheshell.com"}),"XIV"]}),l.jsx("p",{children:"XIV"}),l.jsx("p",{children:""}),l.jsxs("ul",{children:[l.jsx("li",{children:""}),l.jsx("li",{children:""}),l.jsx("li",{children:""}),l.jsx("li",{children:""}),l.jsx("li",{children:" FFLogs "})]}),l.jsx("p",{children:""}),l.jsx(He,{id:"features",label:""}),l.jsx("p",{children:"XIV in the Shell "}),l.jsxs("ul",{children:[l.jsx("li",{children:""}),l.jsx("li",{children:"CDBuff"}),l.jsx("li",{children:""}),l.jsxs("li",{children:[" ",l.jsx("a",{href:JD,children:"etro"}),"/",l.jsx("a",{href:sS,children:"XivGear"})," ",""]}),l.jsx("li",{children:" FFLogs "}),l.jsx("li",{children:""}),l.jsx("li",{children:""}),l.jsx("li",{children:""}),l.jsx("li",{children:""}),l.jsx("li",{children:""}),l.jsxs("li",{children:["",l.jsx("a",{href:ic,children:"Amarantine"})," DPS "]}),l.jsx("li",{children:"Discord /"})]}),l.jsx(He,{id:"quickstart",label:""}),l.jsx("p",{children:""}),l.jsxs("ol",{children:[l.jsx("li",{children:""}),l.jsx("p",{children:""}),l.jsx("li",{children:""}),l.jsxs("li",{children:[" ",be("Delete")," "]}),l.jsx("p",{children:""})]}),l.jsx(He,{id:"shortcuts",label:""}),l.jsxs("p",{children:["T/Mac  ",be("ctrl")," "," ",be("cmd"),""]}),l.jsxs("ul",{children:[l.jsxs("li",{children:[be("u")," "]}),l.jsxs("li",{children:[be("ctrl"),"+",be("z")," "]}),l.jsxs("li",{children:[be("ctrl"),"+",be("y"),"  ",be("ctrl"),"+",be("shift"),"+",be("z")," "]}),l.jsxs("li",{children:[be("ctrl"),"+",be("c")," "]}),l.jsxs("li",{children:[be("ctrl"),"+",be("x")," "]}),l.jsxs("li",{children:[be("ctrl"),"+",be("v")," "]})]}),l.jsxs("ul",{children:[l.jsx("p",{children:""}),l.jsxs("li",{children:[be("Backspace"),"  ",be("Delete")," "]}),l.jsxs("li",{children:[be("")," "]}),l.jsxs("li",{children:[be("")," "]}),l.jsxs("li",{children:[be("Home")," "]}),l.jsxs("li",{children:[be("End")," "]}),l.jsxs("li",{children:[be("Shift"),"+",be("")," / ",be("Shift"),"+",be("")," / ",be("Shift"),"+",be("Home")," /"," ",be("Shift"),"+",be("End")," ///"]}),l.jsxs("li",{children:[be("Escape")," "]}),l.jsxs("li",{children:[be("ctrl"),"+",be("a")," "]})]}),l.jsx(He,{id:"update-policy",label:""}),l.jsx("p",{children:"XIV in the Shell "}),l.jsx(He,{id:"technical-details",label:""}),l.jsx("p",{children:"XIV in the Shell  xivintheshell.com /"}),l.jsxs("p",{children:[" TypeScript + Vite + React  GitHub Pages"," ",l.jsx("a",{href:fi,children:fi})," Bug "]}),l.jsx(He,{id:"troubleshooting",label:""}),l.jsx("p",{children:" Bug GitHubQQ Discord "}),l.jsx("p",{children:""}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"xivintheshell.com?resetResourceOverrides"})," ",""]}),l.jsxs("li",{children:[l.jsx("b",{children:"xivintheshell.com?resetAll"}),"  XIV in the Shell "]}),l.jsxs("li",{children:[l.jsx("b",{children:"xivintheshell.com?resetFFLogsAuth"}),"  FFLogs "]})]}),l.jsx("p",{children:" xivintheshell.com"})]})}const Qa=e=>l.jsx($a,{text:e});function zj(){return l.jsxs(l.Fragment,{children:[l.jsx(_i,{id:"timeline-creation",label:"Timeline Creation and Editing"}),l.jsx(He,{id:"setup-config",label:"Setup and Configuration"}),l.jsx("p",{children:'The "Config" panel to the right of the skill input area lets you adjust combat statistics and other simulation settings.'}),l.jsx(Je,{id:1,name:"config"}),l.jsxs("ol",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"Etro/XivGear import"})," Import a gearset from an etro or XivGear link."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Job selector"})," Set the job of the active timeline slot. Combat stats will use a default value for the job, or the most recently-used configuration for that job. Resource overrides are cleared when the job changes."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Information area"})," Summarizes the randomly generated offset of Lucid Dreaming ticks (healers/casters only), DoT ticks, initial resource overrides, and random procs."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Level selector and combat stats"})," Adjust the job level and combat stats. Critical hit, direct hit, and determination are used to estimate the effects of critical hit buffs like SCH's Chain Stratagem and DNC's Devilment, and potency for abilities that always crit or crit-direct hit."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Animation lock"})," Adjust the amount of time an ability's animation takes, preventing you from using other abilities. This should very roughly be 0.6 + 2  (your ping). Certain abilities, such as movement skills and DRG's jumps, have separate animation locks that cannot be configured."]}),l.jsxs("li",{children:[l.jsx("b",{children:"FPS"})," Adjust the estimated FPS of your game client. FFXIV only accepts ability inputs when a new frame is rendered, which can accumulate over time to create delays on GCD actions over the course of a fight. To ignore the effects of FPS, set this value to 9999."]}),l.jsxs("li",{children:[l.jsx("b",{children:"GCD correction"})," Adjust the duration of GCDs and cast times. This should generally be left at 0, but you can use this to shorten or lengthen these durations if you believe the FPS correction formula is inaccurate."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Time till first MP tick"}),' Adjust the amount of time until the first MP tick (also known as the "actor tick") occurs, relative to the start of the simulation. Mostly relevant only for BLM.']}),l.jsxs("li",{children:[l.jsx("b",{children:"Countdown"})," Adjust the amount of time available pre-pull. Setting this to a negative value begins the simulation after the fight has begun."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Random seed and proc mode"})," A ",l.jsx("a",{href:Lj,children:"random seed"})," ",`used to determine the occurrence of random events, such as RDM's Verstone Ready and DNC's Feather gauge. The proc mode setting can be set to "RNG" to use this seed, "Never" to prevent all random events from occurring, or "Always" to make random events occur whenever possible.`]})]}),l.jsx(Je,{id:2,name:"resource_overrides"}),l.jsxs("ol",{start:11,children:[l.jsxs("li",{children:[l.jsx("b",{children:"Override initial resources"})," Specify the initial values of job gauges, status effects, and cooldowns. This is useful for planning specific phases of long fights in isolation, or for encounters that allow you to prepare resources in advance."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Apply/apply and reset"}),' Pressing "apply" confirms any configuration changes, applying them to the current timeline. "Apply and reset" applies the configuration changes to the current timeline, and clears its previously-saved actions.']})]}),l.jsx(Je,{id:3,name:"control"}),l.jsx("p",{children:'The "Control" panel contains simulation settings.'}),l.jsx("p",{children:'When "real-time auto pause" mode is enabled, using an action will simulate its animation lock and cast time in real time, pausing when the next action can be performed. Adjusting the "time scale" field advances through time more quickly.'}),l.jsx("p",{children:'When "manual" mode is enabled, animation locks and cast times are immediately skipped after using an action.'}),l.jsx(He,{id:"adding-skills",label:"Adding Skills, Time Delays, and Waits"}),l.jsx(Je,{id:4,name:"hotbar"}),l.jsxs("p",{children:["Click on a skill's icon in the hotbar ",l.jsx("b",{children:"(1)"})," to add it. It will be inserted at the location of the cursor in the timeline. If action(s) are currently selected, attempting to add a new skill will place it before the selection. Attempting to use a skill will automatically wait for the duration of the skill's cooldown, as well as the current animation lock and/or GCD before activating it."]}),l.jsxs("p",{children:['To configure the number of targets hit by an AoE ability, adjust the "# of targets hit" field ',l.jsx("b",{children:"(2)"}),'. This will affect all subsequent AoE ability inputs, and is ignored for abilities that can only hit a single target. To configure the number of targets hit by an AoE ability, adjust the "# of targets hit" field ',l.jsx("b",{children:"(2)"}),', or manually select which targets to hit through the selector checkboxes below. This will affect all subsequent AoE ability inputs, and is ignored for abilities that can only hit a single target. An orange star  indicates which enemy is the primary target of the ability, and will receive the most damage: if an ability is used that can only hit a single target, then this is the enemy that will be hit. A purple checkmark  indicates a secondary target that will be additionally hit by splash damage. Modifying the checkboxes will automatically modify the "targets hit" field, and vice versa.']}),l.jsx("p",{children:"When multiple targets are selected, clicking on the current primary target will demote it to a secondary target, and clicking on a secondary target will de-target it. Clicking on an unselected enemy will turn that enemy into the new primary target. Exactly one enemy must be selected as the primary target at all times."}),l.jsxs("p",{children:['To wait a specified duration after the end of the current animation lock, use the "wait until _ second(s) since" input ',l.jsx("b",{children:"(3)"}),'. This is useful for simulating deliberate "late weaves" with a duration of 0.6s-1.0s, depending on your needs.']}),l.jsxs("p",{children:['To jump to a specific timestamp in a fight (such as the beginning of a mechanic or the end of a downtime phase), use the "Wait until _" input ',l.jsx("b",{children:"(4)"}),". This input will always end at the specified timestamp, even if surrounding skills are rearranged."]}),l.jsxs("p",{children:['To wait until the next MP tick or Lucid Dreaming tick, press the "Wait until MP tick / lucid tick" button ',l.jsx("b",{children:"(5)"}),". This will always wait until the next tick occurs, even if surrounding skills are rearranged."]}),l.jsxs("p",{children:['To delete all wait events at the end of the timeline, use the "Remove trailing idle time" button ',l.jsx("b",{children:"(6)"}),"."]}),l.jsxs("p",{children:["To remove a buff or debuff before its natural expiration time, click its icon in the status section ",l.jsx("b",{children:"(7)"}),". Ground-based abilities such as BLM's Ley Lines, SCH's Sacred Soil, and DRK's Salted Earth, can be temporarily disabled, then later re-enabled, by clicking on them here."]}),l.jsx(He,{id:"positionals",label:"Positionals and Auto-Attacks"}),l.jsx(Je,{id:5,name:"positional"}),l.jsxs("p",{children:['Melee jobs have a pair of "Rear Positional" ',l.jsx("b",{children:"(1)"}),' and "Flank Positional" ',l.jsx("b",{children:"(2)"})," ",'buffs. Abilities with bonuses for landing positional hits will receive bonuses when the appropriate buff is active. Click the appropriate buff icon to toggle it. The "True North" buff will grant all positional bonuses, overriding the effect of these buffs.']}),l.jsxs("p",{children:['Melee and tank jobs have an additional "auto-attacks engaged" buff ',l.jsx("b",{children:"(3)"}),". This is currently only used on PLD to compute Oath Gauge generation, and can be temporarily disabled to simulate disengagements. Using a melee-range weaponskill or ability will automatically re-enable auto-attacks."]}),l.jsx("p",{children:"Potency computation for auto-attacks is not currently supported, and will be added at a later date."}),l.jsx(He,{id:"skill-sequence-presets",label:"Skill Sequence Presets"}),l.jsx(Je,{id:"6",name:"presets"}),l.jsx("p",{children:'Below the skill input window is the "skill sequence presets" menu. Here, you can add sequences of multiple skills that can later be added in bulk to the timeline by clicking on the preset entry.'}),l.jsx("p",{children:"Skills that replace other buttons, such as GNB's Gnashing Fang combo + Continuation and PCT's Red/Green/Blue combo, will automatically transform into the appropriate action when loaded from a preset."}),l.jsx(He,{id:"timeline-visualization",label:"Timeline Visualization"}),l.jsx("p",{children:"The graphical timeline displays visual information about skill usages and animation locks."}),l.jsx(Je,{id:"7",name:"timelines"}),l.jsxs("ol",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"Time ruler"})," Displays timestamp information."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Skill icons"})," A skill icon image represents the usage of a skill (image width not to scale with animation lock time). Mousing over an icon will display a tooltip with its snapshot time, potency, animation lock/cast time, and active damage/haste effects.",l.jsxs("ol",{type:"a",children:[l.jsxs("li",{children:[l.jsx("b",{children:"Cast bars"})," A purple bar represents a cast time, during which other abilities cannot be used. The vertical line in the middle of the bar represents the cast's snapshot time (also known as the slidecast window)."]}),l.jsxs("li",{children:[l.jsx("b",{children:"GCD bars"})," A green bar represents a GCD recast lock."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Animation lock bars"})," (not visible in screenshot) A grey bar represents an animation lock. These are only visible at higher horizontal scale levels, or for abilities with exceptionally long animation locks."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Buff underlines"})," The colored bars beneath a skill icon summarize the haste and amplification buffs that the ability snapshots."]})]})]}),l.jsxs("li",{children:[l.jsx("b",{children:"Damage ticks"})," A red triangle represents the application timing of a damage event. Mousing over a damage tick shows its exact timestamp, potency, and snapshotted buffs."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Heal ticks"})," A green triangle represents the application timing of a heal event. Similar to damage events, mousing over a heal tick will show its timestamp and potency."]}),l.jsxs("li",{children:[l.jsx("b",{children:"MP ticks"}),' A vertical blue line in the background of the timeline represents the timing of a natural MP tick, also known as the "actor tick." These ticks occur every three seconds, and timing of the first tick can be adjusted in the configuration panel.',l.jsx("ol",{type:"a",children:l.jsxs("li",{children:[l.jsx("b",{children:"Lucid Dreaming ticks"})," A light blue triangle represents the timing of a Lucid Dreaming MP tick. These ticks occur every three seconds (independent of the standard actor tick), and the timing of the first tick is randomly generated for each timeline."]})})]}),l.jsxs("li",{children:[l.jsx("b",{children:"Auto-attacks"})," A vertical orange line represents the occurrence of an auto-attack. This is currently only used for PLD to determine Oath Gauge generation."]})]}),l.jsx("p",{children:'If you wish to hide some of these elements, you may do so by unchecking the relevant options in the "Settings" tab at the bottom of the page.'}),l.jsx(He,{id:"editing-timelines",label:"Editing Timelines"}),l.jsx(Je,{id:"8a",name:"editor"}),l.jsxs("p",{children:["Click on a skill icon in the graphical timeline ",l.jsx("b",{children:"(1)"}),' or a row in the "Timeline editor" tab ',l.jsx("b",{children:"(2)"})," to select it. Use ",Qa("Shift")," + click, or click and drag on the background of the graphical timeline to select a sequence of skills. While skill(s) are selected, use ",Qa("Backspace")," or ",Qa("Delete")," to delete them."]}),l.jsxs("p",{children:["When the timeline extends beyond the bounds of the screen, use ",Qa("Shift"),' + scroll wheel while your cursor is within the timeline area to scroll through it. You can also adjust the "horizontal scale" slider ',l.jsx("b",{children:"(3)"})," to increase or decrease the number of visible skills."]}),l.jsxs("p",{children:['While skill(s) in the timeline are selected, click and drag their icons in the graphical timeline to rearrange them. While dragging, a blue line will appear indicating the time at which the simulator will try to use the skill. Click the "drag lock" setting'," ",l.jsx("b",{children:"(4)"})," to toggle this behavior to prevent accidental edits. All editing actions can also be undone and redone with ",Qa("ctrl"),"+",Qa("z")," and ",Qa("ctrl"),"+",Qa("y"),", respectively. See ",l.jsx("a",{href:"#shortcuts",children:"keyboard shortcuts"})," for additional navigation shortcuts."]}),l.jsxs("p",{children:['Use the "Add timeline slot" button ',l.jsx("b",{children:"(5)"}),' to, you guessed it, add an additional timeline. Use the "Clone timeline slot" button ',l.jsx("b",{children:"(6)"})," to replicate the currently-selected timeline. Up to four timelines can be stored at once."]}),l.jsxs("p",{children:[`Click on the handle next to a timeline to set it as active. Clicking the small "x" at the bottom of the active timeline's handle `,l.jsx("b",{children:"(7)"})," will delete it."]}),l.jsx(He,{id:"timeline-editor-table",label:"The Timeline Editor Table"}),l.jsx(Je,{id:"8b",name:"editor"}),l.jsxs("p",{children:['The "Timeline editor" tab at the bottom of the page provides a compact view of the skills used in the active timeline. Any edits made in this table must be confirmed or discarded with the "apply changes to timeline and save" / "discard changes" buttons on the right ',l.jsx("b",{children:"(1)"}),". If edits would cause a timeline to be invalid (that is, its activation conditions are no longer met), then the offending skill will be highlighted in red, and the first invalid skill will be described in the box to the right of the table."]}),l.jsxs("p",{children:["The enemy selector checkboxes ",l.jsx("b",{children:"(2)"})," modify which enemies are targeted by the selected ability. This behaves the same as the enemy selector in the skill input area (described in ",l.jsx("a",{href:"#adding-skills",children:'"Adding Skills"'}),"), except single-target abilities will automatically target only a single enemy."]}),l.jsxs("p",{children:["Clicking a row in the editor table ",l.jsx("b",{children:"(3)"})," selects it. Shift + click allows selecting a range of rows. Dragging and dropping the selected actions will reorder them."]}),l.jsxs("p",{children:['The "move up" and "move down" buttons ',l.jsx("b",{children:"(4)"}),' move the selected actions up or down in the timeline. The "delete selected" button ',l.jsx("b",{children:"(5)"}),' deletes selected actions. The "move end of selection to start of selection" button ',l.jsx("b",{children:"(6)"})," moves the last selected skill ahead of the first selected skill."]}),l.jsxs("p",{children:['"Copy" and "paste" ',l.jsx("b",{children:"(7)"})," copy or paste selected actions to/from the clipboard."]}),l.jsxs("p",{children:['The "undo" and "redo" buttons ',l.jsx("b",{children:"(8)"})," undo or redo the last timeline manipulation action, including those done outside the timeline editor. Undo history is lost upon reloading the page."]})]})}function Yj(){return l.jsxs(l.Fragment,{children:[l.jsx(_i,{id:"timeline-creation",label:""}),l.jsx(He,{id:"setup-config",label:""}),l.jsx("p",{children:""}),l.jsx(Je,{id:1,name:"config"}),l.jsxs("ol",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"Etro / XivGear "}),"  etro  XivGear "]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," ",""]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," ","/DoT"]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," ","/"]}),l.jsxs("li",{children:[l.jsx("b",{children:""}),"   0.6 s + 2  "]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," ","FFXIVGCD 9999"]}),l.jsxs("li",{children:[l.jsx("b",{children:"GCD"}),"  GCD/0"]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," "]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," "]}),l.jsxs("li",{children:[l.jsx("b",{children:"BUFF"})," ","BUFFRNGNeverAlways"]})]}),l.jsx(Je,{id:2,name:"resource_overrides"}),l.jsxs("ol",{start:11,children:[l.jsxs("li",{children:[l.jsx("b",{children:""})," ","BUFFCD"]}),l.jsxs("li",{children:[l.jsx("b",{children:"/"})," ",""]})]}),l.jsx(Je,{id:3,name:"control"}),l.jsx("p",{children:""}),l.jsx("p",{children:"/"}),l.jsx("p",{children:""}),l.jsx(He,{id:"adding-skills",label:""}),l.jsx(Je,{id:"4",name:"hotbar"}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(1)"})," ",""]}),l.jsxs("p",{children:["AoE ",l.jsx("b",{children:"(2)"})," "," AoE "]}),l.jsx("p",{children:" AoE "}),l.jsxs("p",{children:["____ ",l.jsx("b",{children:"(3)"})," ","GCD0.6s~1.0s"]}),l.jsxs("p",{children:[":"," ",l.jsx("b",{children:"(4)"}),""]}),l.jsxs("p",{children:["/ ",l.jsx("b",{children:"(5)"})," ",""]}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(6)"})," "]}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(7)"}),"  Buff/Debuff Buff/Debuff"]}),l.jsx(He,{id:"positionals",label:"A"}),l.jsx(Je,{id:"5",name:"positional"}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(1)"}),"  ",l.jsx("b",{children:"(2)"})," ",""]}),l.jsxs("p",{children:["A ",l.jsx("b",{children:"(3)"})," ","AAA"]}),l.jsx(He,{id:"skill-sequence-presets",label:""}),l.jsx(Je,{id:"6",name:"presets"}),l.jsx("p",{children:""}),l.jsx("p",{children:"//"}),l.jsx(He,{id:"timeline-visualization",label:""}),l.jsx("p",{children:"/"}),l.jsx(Je,{id:"7",name:"timelines"}),l.jsxs("ol",{children:[l.jsxs("li",{children:[l.jsx("b",{children:""})," "]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," ","//Buff",l.jsxs("ol",{type:"a",children:[l.jsxs("li",{children:[l.jsx("b",{children:""})," ",""]}),l.jsxs("li",{children:[l.jsx("b",{children:"GCD "})," GCD"]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," "]}),l.jsxs("li",{children:[l.jsx("b",{children:"Buff "})," / Buff"]})]})]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," ","Buff"]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," ","Buff"]}),l.jsxs("li",{children:[l.jsx("b",{children:""}),"  3 ",l.jsx("ol",{type:"a",children:l.jsxs("li",{children:[l.jsx("b",{children:""})," ","3"]})})]}),l.jsxs("li",{children:[l.jsx("b",{children:"A"})," "]})]}),l.jsx("p",{children:"A"}),l.jsx(He,{id:"editing-timelines",label:""}),l.jsx(Je,{id:"8a",name:"editor"}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(1)"}),"  ",l.jsx("b",{children:"(2)"})," ","",Qa("Shift"),"+"," ",Qa("Backspace"),"  ",Qa("Delete")," "]}),l.jsxs("p",{children:[" ",Qa("Shift"),"+ ",l.jsx("b",{children:"(3)"})," "]}),l.jsxs("p",{children:[""," ",l.jsx("b",{children:"(4)"})," "]}),l.jsxs("p",{children:[" ",Qa("ctrl"),"+",Qa("z")," / ",Qa("ctrl"),"+",Qa("y")," ","",l.jsx("a",{href:"#shortcuts",children:""}),""]}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(5)"}),"  ",l.jsx("b",{children:"(6)"})," "," 4 "]}),l.jsxs("p",{children:['"" ',l.jsx("b",{children:"(7)"})," ",""]}),l.jsx(He,{id:"timeline-editor-table",label:""}),l.jsx(Je,{id:"8b",name:"editor"}),l.jsxs("p",{children:[""," ",l.jsx("b",{children:"(1)"})," ",""]}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(2)"})," ","",l.jsx("a",{href:"#adding-skills",children:'""'}),""]}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(3)"})," ",Qa("Shift"),"+"]}),l.jsxs("p",{children:['"/" ',l.jsx("b",{children:"(4)"}),"  ",l.jsx("b",{children:"(5)"})," "," ",l.jsx("b",{children:"(6)"})," ",""]}),l.jsxs("p",{children:['"/" ',l.jsx("b",{children:"(7)"})," "]}),l.jsxs("p",{children:['"/" ',l.jsx("b",{children:"(8)"})," ",""]})]})}function Kj(){const e=C.useRef(null);return l.jsxs(l.Fragment,{children:[l.jsx(_i,{id:"timeline-analysis",label:"Timeline Analysis"}),l.jsx(He,{id:"damage-table",label:"Potency, PPS, and the Damage Table"}),l.jsx(Je,{id:"9",name:"potency"}),l.jsxs("ol",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"Summary statistics"})," The top section summarizes the total potency, potency per second (PPS), number of GCD skills applied, and damage over time (DoT) coverage for the current timeline. When a skill or sequence of skills is selected, these values are updated to reflect the selected range.",l.jsxs("ul",{children:[l.jsx("li",{children:'If an ability has been used but its damage application delay has not yet passed in the simulation, its potency will be described as "pending." To include it in the total potency and PPS calculations, add a "wait" event at the end of your timeline, or use an additional skill.'}),l.jsx("li",{children:"PPS is calculated as damage applied starting from time 0 until the end of the final recorded damage application event. This differs from convention for many jobs, which may calculate time from the start of the first GCD until the end of the cast/recast time of the final GCD."}),l.jsx("li",{children:"Potencies are calculated from the values given in ability tooltips, accounting for bonuses from active status buffs (such as DNC's Technical Step and DRG's Lance Charge + Battle Litany) and job gauge buffs (such as BLM's Enochian and DRG's Life of the Dragon). Because of differences in damage calculation multipliers and other combat stats, potencies in timelines of different jobs (or the same job with different GCD speeds) generally cannot be meaningfully compared with each other without the aid of external potency-to-damage conversion tools."})]})]}),l.jsxs("li",{children:[l.jsx("b",{children:"Tincture potency configuration"})," Potions/tinctures/gemdraughts increase the strength of damaging actions by temporarily boosting the character's main combat stat (STR/DEX/MND/INT). Because ",l.jsx("i",{children:"XIV in the Shell"})," simulates only potencies rather than calculating the full damage formula, we approximate tinctures as an 8% buff to skill potencies. If you need a different approximation value, you may configure it here."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Exclude damage when untargetable"}),' When checked, damage application events and DoT ticks that occur during an "Untargetable" marker are automatically excluded from calculations.']}),l.jsxs("li",{ref:e,children:[l.jsx("b",{children:"Potency table"})," Displays the number of times each ability was cast under different sets of self-applied buffs. Hovering the"," ",l.jsx(ze,{topic:"manual-sample-help",content:"potency explanation",container:e})," ","tooltip next to a potency value displays the effect of each buff on a skill's potency. When a skill or sequence of skills is selected, these values are updated to reflect the selected range.",l.jsx("ul",{children:l.jsx("li",{children:'The effect of party buffs added through markers, as well as estimated potency boosts from tinctures, are not visible in this breakdown, and only appear in the purple value in the "total" column.'})})]})]}),l.jsx(He,{id:"dot-breakdown",label:"DoT Breakdown"}),l.jsx(Je,{id:"10",name:"thunder"}),l.jsx("p",{children:"Every used DoT ability has a separate table detailing the timing of its usage. The offset at which DoT effects tick is randomly generated for each timeline."}),l.jsxs("ol",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"Cast time and application time"})," The snapshot of the ability, and the time at which the DoT effect was applied."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Gap and override"})," The gap (duration where the DoT debuff was not applied) and override (duration remaining on the previous DoT debuff) for this application of the DoT. The total gap and override are displayed at the bottom of this column."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Initial and DoT"})," The on-hit and per-tick potencies of the DoT, including the effect of self-applied buffs."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Ticks"})," The number of ticks triggered from this DoT application. The total number of hit ticks and the total possible number of ticks, are displayed at the bottom of this column."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Total"})," The total potency from this DoT application, including both the initial hit and subsequent ticks. Similar to the general potency table, the effects of party buff markers and tinctures are displayed here."]})]}),l.jsx("p",{children:`Jobs that attack with summoned pets (DRK's Living Shadow, MCH's Automaton Queen, and SMN's Demi-summons) also have potencies displayed in a DoT table. The per-tick "DoT" column for pets is unreliable, but the total potency column and buff snapshots are correct. This will be updated to be clearer some time in the future.`})]})}function Vj(){const e=C.useRef(null);return l.jsxs(l.Fragment,{children:[l.jsx(_i,{id:"timeline-analysis",label:""}),l.jsx(He,{id:"damage-table",label:"PPS"}),l.jsx(Je,{id:"9",name:"potency"}),l.jsxs("ol",{children:[l.jsxs("li",{children:[l.jsx("b",{children:""})," PPSGCD DoT ",l.jsxs("ul",{children:[l.jsx("li",{children:""}),l.jsx("li",{children:"PPS  0 GCD GCD"}),l.jsx("li",{children:'/""'})]})]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," /// XIV in the Shell  8% "]}),l.jsxs("li",{children:[l.jsx("b",{children:"Boss0"})," ","DoT"]}),l.jsxs("li",{ref:e,children:[l.jsx("b",{children:""})," Buff"," ",l.jsx(ze,{topic:"manual-sample-help",content:"",container:e})," ","Buff",l.jsx("ul",{children:l.jsx("li",{children:""})})]})]}),l.jsx(He,{id:"dot-breakdown",label:"DoT "}),l.jsx(Je,{id:"10",name:"thunder"}),l.jsx("p",{children:"DoTDoT "}),l.jsxs("ol",{children:[l.jsxs("li",{children:[l.jsx("b",{children:""})," DoT"]}),l.jsxs("li",{children:[l.jsx("b",{children:"DoTDoT"})," ","DoTDoTDoTDoTDoTDoT"]}),l.jsxs("li",{children:[l.jsx("b",{children:"DoT"})," ","DoTBuff"]}),l.jsxs("li",{children:[l.jsx("b",{children:"DoT"})," ","DoT"]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," ","DoT"]})]}),l.jsx("p",{children:"DoTBuff"})]})}function Wj(){return l.jsxs(l.Fragment,{children:[l.jsx(_i,{id:"fight-markers",label:"Fight and Buff Markers"}),l.jsx(He,{id:"loading-presets",label:"Loading Preset Fight Markers"}),l.jsx(Je,{id:"11",name:"markers"}),l.jsxs("p",{children:[l.jsx("i",{children:"XIV in the Shell"})," provides preset timeline markers for on-content savage and ultimate fights, as well as a variety of other high-end content. These tracks are created by developers and community members, and illustrate precise timings for mechanics, downtimes, and incoming damage."]}),l.jsxs("p",{children:["Clicking the button with the name of a fight ",l.jsx("b",{children:"(1)"})," adds its markers to the graphical timeline. Clicking the name of tracks for certain fights with phases"," ",l.jsx("b",{children:"(2)"})," may also have separate tracks for each phase, explained in more detail in the next section."]}),l.jsx("p",{children:"Presets are split into three categories:"}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"Current content"})," The most recent tier of Savage-difficulty raid encounters, along with the current expansion's Ultimate encounters. This may also contain tracks for certain other high-end content, including Extreme trials, Criterion dungeons, and Quantum bosses."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Legacy ultimates"})," Full encounters or select phases of Ultimate encounters from previous expansions."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Archive"})," Older Savage tiers and other encounters from previous expansions."]})]}),l.jsxs("p",{children:['To load tracks beginning from a certain timestamp, adjust the value in the "Load tracks with time offset" field ',l.jsx("b",{children:"(3)"}),", which adds the specified difference in seconds to all markers (for example, a value of 4 would delay all markers by 4 seconds, and a value of -4 would move all markers forward by 4 seconds). This offset is applied on top of individual phase offsets."]}),l.jsxs("p",{children:['Use the "clear all markers" button ',l.jsx("b",{children:"(4)"}),' to clear all markers. Use "remove duplicates" ',l.jsx("b",{children:"(5)"})," to remove all extra copies of identical markers (same text, timestamp, track number, etc.), which may occur if a fight preset is loaded multiple times by mistake."]}),l.jsx(He,{id:"loading-presets-phases",label:"Loading Preset Markers for Fights With Phases"}),l.jsx(Je,{id:"12",name:"phase_load"}),l.jsxs("p",{children:["If a preset track supports separate phases, click its name ",l.jsx("b",{children:"(1)"})," to expand/collapse timing information for its phases."]}),l.jsxs("p",{children:['The "Load all phases" button ',l.jsx("b",{children:"(2)"})," loads markers for all phases. The default timestamp for the start of a phase is shown next to each field ",l.jsx("b",{children:"(3)"}),". These should be adjusted to account for different kill or push timings. Clicking the name of a particular phase ",l.jsx("b",{children:"(4)"})," loads that phase's markers to the timeline; to create a timeline beginning from the start of a particular phase, set its offset to 0 before loading."]}),l.jsx("p",{children:'The default phase transition timings in presets usually assume the previous phase lasted as long as possible. The beginning of a phase follows the definition provided by FFLogs, which is either the end of a "Down for the Count" debuff, or a boss becoming targetable. You can find these timings for a particular FFLogs report with the `type="targetabilityupdate"` filter, as shown below.'}),l.jsx("img",{src:"assets/ManualScreenshots/targetabilityupdate.png"}),l.jsx("p",{children:"Presets take time to create, and the languages in which they are available depend on the work of the community members that create them. If you're interested in submitting markers for a fight, please reach out to us!"}),l.jsx(He,{id:"adding-custom-markers",label:"Adding Party Buffs and Custom Markers"}),l.jsx(Je,{id:"13a",name:"pct_opener"}),l.jsxs("p",{children:[`In addition to the site's built-in presets, you can add your own markers in the "Add buffs/markers" section `,l.jsx("b",{children:"(1)"}),". Markers are split into three distinct categories:"]}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"Info"})," markers represent generic information about a timeline. This includes events like enemy cast bars, boss movements, and mechanic resolution timings."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Buff"})," markers represent raid buffs granted by party members. All buffs will automatically use their default in-game durations (which can be adjusted to account for edge cases like varying propagation timings or Dance Partner swaps), and their potency boosts are automatically applied to the damage table. You can see which abilities snapshot party buffs and self-applied buffs by a colored underline in the graphical timeline, or by hovering the skill image icon."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Untargetable"}),' markers represent periods of time where all enemies are immune to damage, and cannot be targeted. Damage application events that would "ghost" by a boss becoming untargetable and DoT ticks that occur during an untargetable period are not added to potency totals.']})]}),l.jsxs("p",{children:["Each marker has a track number ",l.jsx("b",{children:"(2)"})," that determines where it is visible in the timeline, where 0 is the bottom-most marker line, and increasing numbers stack on the lines above."]}),l.jsxs("p",{children:["Clicking on a marker in the timeline ",l.jsx("b",{children:"(3)"}),' will remove it, and restore its properties to the "Add buffs/markers" menu for further editing.']}),l.jsx(He,{id:"exporting-markers",label:"Exporting Markers"}),l.jsx(Je,{id:"13b",name:"pct_opener"}),l.jsxs("p",{children:['Marker tracks can be exported and shared with other users in the "Save marker tracks to file" menu ',l.jsx("b",{children:"(1)"}),'. Click the "all tracks combined" link ',l.jsx("b",{children:"(2)"}),' to download a single file containing all markers, which can then be imported through the "Load multiple tracks combined" option ',l.jsx("b",{children:"(3)"}),". Clicking a link corresponding to a single track ",l.jsx("b",{children:"(4)"}),' will export all markers with that track number, which can then be imported with the "Load into individual track" option ',l.jsx("b",{children:"(5)"}),"."]}),l.jsx(He,{id:"creating-markers-from-logs",label:"Creating Marker Tracks From Logs"}),l.jsx("p",{children:"A single encounter can have a very large number of events that you may wish to encode within a marker track file. In these cases, you will most likely find it easier to produce markers in bulk from an FFLogs report."}),l.jsxs("p",{children:[l.jsx("i",{children:"XIV in the Shell"})," developers use a custom"," ",l.jsx("a",{href:dy,children:"Python script"})," to generate track files from CSV files exported from FFLogs. See ",l.jsx("a",{href:hy,children:"this page"})," for detailed usage instructions. If you're unwilling or unable to run the Python script on your own computer, you may also run it directly in your web browser through our"," ",l.jsx("a",{href:fy,children:"Colab notebook"}),"."]}),l.jsxs("p",{children:["To retrieve markers directly from a report using the FFLogs API, you may also use leifengsang's ",l.jsx("a",{href:Ey,children:"XivInTheShellMarkerGen"})," Python script (instructions in Chinese). This script reads a user-provided configuration file with names of enemy cast and damage events, and produces a track file directly from a report ID."]})]})}function Xj(){return l.jsxs(l.Fragment,{children:[l.jsx(_i,{id:"fight-markers",label:""}),l.jsx(He,{id:"loading-presets",label:""}),l.jsx(Je,{id:"11",name:"markers"}),l.jsx("p",{children:"XIV in the Shell "}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(1)"})," "," ",l.jsx("b",{children:"(2)"})," /"]}),l.jsx("p",{children:""}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("b",{children:""})," ",""]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," "]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," "]})]}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(3)"})," ",""]}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(4)"}),"  ",l.jsx("b",{children:"(5)"})," ",""]}),l.jsx(He,{id:"loading-presets-phases",label:""}),l.jsx(Je,{id:"12",name:"phase_load"}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(1)"})," /"]}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(2)"})," "," ",l.jsx("b",{children:"(3)"})," 0 ",l.jsx("b",{children:"(5)"})," ",""]}),l.jsx("p",{children:' FFLogs BOSSLogs FFLogs  Filter Expression type="targetabilityupdate" '}),l.jsx("img",{src:"assets/ManualScreenshots/targetabilityupdate.png"}),l.jsx("p",{children:""}),l.jsx(He,{id:"adding-custom-markers",label:""}),l.jsx(Je,{id:"13a",name:"pct_opener"}),l.jsxs("p",{children:["Buff ",l.jsx("b",{children:"(1)"})," ",""]}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("b",{children:""})," Boss "]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," ",""]}),l.jsxs("li",{children:[l.jsx("b",{children:""}),"  Boss  DoT "]})]}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(2)"})," 0 "]}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(3)"})," ","Buff"]}),l.jsx(He,{id:"exporting-markers",label:""}),l.jsx(Je,{id:"13b",name:"pct_opener"}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(1)"}),"  ",l.jsx("b",{children:"(2)"})," "," ",l.jsx("b",{children:"(3)"})," "]}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(4)"})," _"," ",l.jsx("b",{children:"(4)"})," "]}),l.jsx(He,{id:"creating-markers-from-logs",label:"Logs"}),l.jsx("p",{children:" FFLogs "}),l.jsxs("p",{children:["XIV in the Shell ",l.jsx("a",{href:dy,children:"Python"})," FFLogs  CSV ",l.jsx("a",{href:hy,children:""}),""," ",l.jsx("a",{href:fy,children:"Colab notebook"})," "]}),l.jsxs("p",{children:[" ",l.jsx("a",{href:Ey,children:"XivInTheShellMarkerGen"})," Python  FFLogs API  ID gui"]})]})}const ml=e=>l.jsx($a,{text:e});function qj(){return l.jsxs(l.Fragment,{children:[l.jsx(_i,{id:"import-export",label:"Import and Export"}),l.jsx(He,{id:"exporting-text",label:"Exporting to a Text File"}),l.jsx(Je,{id:"14",name:"importexport"}),l.jsxs("p",{children:['You can download the active timeline as a text file from the "Import/Export" menu, by clicking the "txt format" link ',l.jsx("b",{children:"(1)"}),'. This file can then be shared and imported through the "Load from file" menu ',l.jsx("b",{children:"(2)"}),". We recommend you export your plans frequently to avoid accidentally losing progress."]}),l.jsx(He,{id:"importing-fflogs",label:"Importing From FFLogs"}),l.jsx("p",{children:'Fight plans can be imported directly from FFLogs reports from the "Import fight from FFLogs" menu. This will open a dialog to begin the first step of the log import process.'}),l.jsxs("ol",{children:[l.jsxs("li",{children:["Click the button to allow ",l.jsx("i",{children:"XIV in the Shell"})," to read FFLogs reports on your behalf."]}),l.jsxs("li",{children:["Paste a log report URL. The link may contain a full report, a specific fight number, and/or a specific player number.",l.jsxs("ol",{type:"a",children:[l.jsx("li",{children:"If the URL did not specify a single fight, click the desired pull from the list of fights."}),l.jsx("li",{children:"After choosing a specific fight and a player was not specified in the URL, click the desired player name from the list of players."})]})]}),l.jsx("li",{children:"Enter the combat stats of the selected player. Due to limitations with FFLogs, all stats for players other than the creator of the log must be entered manually or estimated, and will use the values of the most recently-created timeline for that job by default."}),l.jsxs("li",{children:['After pressing "go," ',l.jsx("i",{children:"XIV in the Shell"}),' will import the list of actions from the log to the active timeline slot, automatically inserting "wait" and "delay" events as appropriate. You will see a table summarizing the differences between simulated timestamps and those recorded in the log, as well as a list of actions that the simulation believes did not meet their activation requirements. After closing the dialog, you may edit the configuration and timeline actions as needed to make the timeline valid.']})]}),l.jsx(He,{id:"text-copy-paste",label:"Text Copy/Paste"}),l.jsxs("p",{children:[l.jsx("i",{children:"XIV in the Shell"})," allows copy/pasting sequences of actions with ",ml("ctrl"),"+",ml("c")," and ",ml("ctrl"),"+",ml("v"),". Three different formats are supported:"]}),l.jsx("p",{children:l.jsx("i",{children:"Example sequence: Fire III, Fire IV, Despair"})}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"Plain text"})," A comma-separated list of actions names.",l.jsx("p",{className:"no-indent",children:l.jsx("i",{children:"Example:"})}),l.jsx("p",{children:"Fire 3, Fire 4, Despair"})]}),l.jsxs("li",{children:[l.jsx("b",{children:"Tab-separated lines"})," A tab-separated list of usage timestamps, target counts, and skill names, compatible with external spreadsheet applications.",l.jsx("p",{className:"no-indent",children:l.jsx("i",{children:"Example:"})}),l.jsx("table",{style:{marginLeft:"1.5rem"},children:l.jsxs("tbody",{children:[l.jsxs("tr",{children:[l.jsx("td",{children:"-3.500"}),l.jsx("td",{children:"1"}),l.jsx("td",{children:"Fire 3"})]}),l.jsxs("tr",{children:[l.jsx("td",{children:"0.042"}),l.jsx("td",{children:"1"}),l.jsx("td",{children:"Fire 4"})]}),l.jsxs("tr",{children:[l.jsx("td",{children:"2.500"}),l.jsx("td",{children:"1"}),l.jsx("td",{children:"despair"})]})]})})]}),l.jsxs("li",{children:[l.jsx("b",{children:"Discord emotes"})," A sequence of Discord emotes (only verified for BLM and PCT).",l.jsx("p",{className:"no-indent",children:l.jsx("i",{children:"Example:"})}),l.jsx("p",{children:":F3: :F4: :Despair:"})]})]}),l.jsxs("p",{children:["The format copied to the clipboard from ",l.jsx("i",{children:"XIV in the Shell"}),' is determined by the "Clipboard copy mode" found in the "Settings" tab at the bottom of the page. Pasting from any of these three formats is always valid, regardless of the value of this setting.']}),l.jsx(He,{id:"exporting-images",label:"Exporting an Image"}),l.jsx(Je,{id:"18b",name:"importexport"}),l.jsxs("p",{children:["Besides using your computer's built-in screenshot functionality, you may also use"," ",l.jsx("i",{children:"XIV in the Shell"}),`'s "Image Export" feature to download a timeline as a PNG image.`]}),l.jsxs("p",{children:['To export the selected portion of a timeline as an image, press the "export selection as png" link ',l.jsx("b",{children:"(1)"}),". If no actions are selected, the entirety of the active timeline is selected."]}),l.jsxs("p",{children:['To split the exported image across multiple lines, set the "seconds before wrapping" field ',l.jsx("b",{children:"(2)"})," to a non-zero value. Each row in the image will contain at most the specified number of seconds."]}),l.jsx("p",{children:'To omit the time ruler and fight markers from export, uncheck the "include time and markers" setting. Timeline elements in the export are also affected by the display settings configured in the "Settings" tab.'}),l.jsx(He,{id:"exporting-damage-logs",label:"Exporting Damage Logs"}),l.jsx(Je,{id:"17",name:"damageexport"}),l.jsxs("p",{children:['You can export a detailed log of all damage events by clicking the "downloaded detailed damage log as CSV file" button ',l.jsx("b",{children:"(1)"})," above the site's potency summary table. The output contains 3 columns:"]}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"time"})," The decimal timestamp, in seconds, at which the damage event occurred."]}),l.jsxs("li",{children:[l.jsx("b",{children:"damageSource"})," The name and usage time of the ability that caused this damage event."]}),l.jsxs("li",{children:[l.jsx("b",{children:"potency"})," The total potency (including buffs and modifiers) of this damage event."]})]}),l.jsx(He,{id:"exporting-for-external-tools",label:"Exporting for External Tools"}),l.jsx(Je,{id:"18b",name:"importexport"}),l.jsxs("p",{children:[`Use the "excel / Tischel's plugin csv format" download link `,l.jsx("b",{children:"(1)"})," to generate a file compatible with external tools, like spreadsheet software or Tischel's"," ",l.jsx("a",{href:tE,children:"BLM in the Shell Plugin"}),". The exported CSV will contain the following columns:"]}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"time"})," The decimal timestamp, in seconds, at which the action was used."]}),l.jsxs("li",{children:[l.jsx("b",{children:"action"})," The name of the action used."]}),l.jsxs("li",{children:[l.jsx("b",{children:"isGCD"})," 1 if the action is a GCD ability, 0 if not."]}),l.jsxs("li",{children:[l.jsx("b",{children:"castTime"})," The duration, in seconds, of this action's cast time. 0 If the action did not have a cast time."]})]}),l.jsx(He,{id:"exporting-for-combat-sim",label:"Exporting to Amarantine's Combat Simulator"}),l.jsxs("p",{children:[l.jsx("a",{href:ic,children:"Amarantine's Combat Simulator"})," provides powerful DPS simulation and kill time estimation capabilities. ",l.jsx("i",{children:"XIV in the Shell"})," can be used to generate and edit timelines that are compatible with this simulator, and both tools are used by many speedkill teams as part of their planning process."]}),l.jsxs("p",{children:[`To download a CSV file compatible with Ama's Combat Sim, use the "Amarantine's combat simulator csv format" download link `,l.jsx("b",{children:"(2)"}),". The generated CSV file will also contain metadata headers describing the configured combat stats, external party buff timeline markers, and untargetable downtime windows."]}),l.jsxs("p",{children:["Note that if the configured combat stats were originally imported from XivGear or etro, stats in the gearset that cannot be directly configured within ",l.jsx("i",{children:"XIV in the Shell"})," ","(WD, STR/DEX/MND/INT, and TEN) will also be included in the export file for simulation purposes."]})]})}function Zj(){return l.jsxs(l.Fragment,{children:[l.jsx(_i,{id:"import-export",label:""}),l.jsx(He,{id:"exporting-text",label:""}),l.jsx(Je,{id:"14",name:"importexport"}),l.jsxs("p",{children:['"/""txt " ',l.jsx("b",{children:"(1)"}),"txt ",l.jsx("b",{children:"(2)"})," ",""]}),l.jsx(He,{id:"importing-fflogs",label:" FFLogs "}),l.jsx("p",{children:'" FFLogs "'}),l.jsxs("ol",{children:[l.jsx("li",{children:" XIV in the Shell  FFLogs "}),l.jsxs("li",{children:["FFLogs/",l.jsxs("ol",{type:"a",children:[l.jsx("li",{children:""}),l.jsx("li",{children:""})]})]}),l.jsx("li",{children:" FFLogs "}),l.jsx("li",{children:"XIV in the Shell "})]}),l.jsx(He,{id:"text-copy-paste",label:"/"}),l.jsxs("p",{children:["XIV in the Shell  ",ml("ctrl"),"+",ml("c")," / ",ml("ctrl"),"+",ml("v")," ",""]}),l.jsx("p",{children:l.jsx("i",{children:""})}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("b",{children:""})," ","",l.jsx("p",{className:"no-indent",children:l.jsx("i",{children:""})}),l.jsx("p",{children:""})]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," ",l.jsx("p",{className:"no-indent",children:l.jsx("i",{children:""})}),l.jsx("table",{style:{marginLeft:"1.5rem"},children:l.jsxs("tbody",{children:[l.jsxs("tr",{children:[l.jsx("td",{children:"-3.500"}),l.jsx("td",{children:"1"}),l.jsx("td",{children:""})]}),l.jsxs("tr",{children:[l.jsx("td",{children:"0.042"}),l.jsx("td",{children:"1"}),l.jsx("td",{children:""})]}),l.jsxs("tr",{children:[l.jsx("td",{children:"2.500"}),l.jsx("td",{children:"1"}),l.jsx("td",{children:""})]})]})})]}),l.jsxs("li",{children:[l.jsx("b",{children:"Discord "})," Discord / ",l.jsx("p",{className:"no-indent",children:l.jsx("i",{children:""})}),l.jsx("p",{children:":F3: :F4: :Despair:"})]})]}),l.jsx("p",{children:""}),l.jsx(He,{id:"exporting-images",label:""}),l.jsx(Je,{id:"18b",name:"importexport"}),l.jsx("p",{children:" PNG"}),l.jsxs("p",{children:['" png" ',l.jsx("b",{children:"(1)"})," ",""]}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(2)"})," "]}),l.jsx("p",{children:""}),l.jsx(He,{id:"exporting-damage-logs",label:""}),l.jsx(Je,{id:"17",name:"damageexport"}),l.jsxs("p",{children:['"CSV" ',l.jsx("b",{children:"(1)"})," ",""]}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"time"})," "]}),l.jsxs("li",{children:[l.jsx("b",{children:"damageSource"})," "]}),l.jsxs("li",{children:[l.jsx("b",{children:"potency"})," Buff"]})]}),l.jsx(He,{id:"exporting-for-external-tools",label:""}),l.jsx(Je,{id:"18a",name:"importexport"}),l.jsxs("p",{children:['"excel / Tischel CSV " ',l.jsx("b",{children:"(1)"}),"  Tischel "," ",l.jsx("a",{href:tE,children:"BLM in the Shell Plugin"})," "]}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"time"})," "]}),l.jsxs("li",{children:[l.jsx("b",{children:"action"})," "]}),l.jsxs("li",{children:[l.jsx("b",{children:"isGCD"})," 1GCD 0 "]}),l.jsxs("li",{children:[l.jsx("b",{children:"castTime"})," 0"]})]}),l.jsx(He,{id:"exporting-for-combat-sim",label:"Amarantine"}),l.jsxs("p",{children:[l.jsx("a",{href:ic,children:"Amarantine"})," DPS XIV in the Shell "]}),l.jsxs("p",{children:[' Amarantine CSV "Amarantine CSV " ',l.jsx("b",{children:"(2)"}),""]}),l.jsx("p",{children:" CSV "}),l.jsx("p",{children:" XivGear  etro  XIV in the Shell "})]})}function Qj(){return l.jsxs(l.Fragment,{children:[l.jsx(_i,{id:"additional-resources",label:"Additional Resources"}),l.jsxs("p",{className:"no-indent",children:[l.jsx("i",{children:"XIV in the Shell"}),": ",l.jsx("a",{href:fi,children:"GitHub"})," - ",l.jsx("a",{href:Cu,children:"Blog"})," -"," ",l.jsx("a",{href:Rs,children:"Bluesky"})," -"," ",l.jsx("a",{href:Ts,children:"Discord channel in The Balance"})," -"," ",l.jsx("a",{href:tE,children:"Tischel's BLM in the Shell Dalamud Plugin"})]}),l.jsxs("p",{className:"no-indent",children:["Game assets and information:"," ",l.jsx("a",{href:vj,children:"Official FFXIV PvE job guide"})," -"," ",l.jsx("a",{href:Mj,children:"FFXIV Community Wiki"})," - ",l.jsx("a",{href:ay,children:"XIVAPI"})," -"," ",l.jsx("a",{href:ny,children:"XIV-ID"})]}),l.jsxs("p",{className:"no-indent",children:["Job gameplay: ",l.jsx("a",{href:Jf,children:"The Balance"})," -"," ",l.jsx("a",{href:eE,children:"Icy Veins"})," - ",l.jsx("a",{href:$D,children:"FFLogs"})]}),l.jsxs("p",{className:"no-indent",children:["Game formulas, mechanics, and other cursed knowledge:"," ",l.jsx("a",{href:iy,children:"Allagan Studies"})," -"," ",l.jsx("a",{href:oy,children:"#battle_system_discussion in The Balance"})," - Savage Speedkill Memorandum [",l.jsx("a",{href:ly,children:"JP"}),"][",l.jsx("a",{href:sy,children:"EN"}),"] -"," ",l.jsx("a",{href:ry,children:"Game's Haunted"})," - FPS tax research [",l.jsx("a",{href:cy,children:"CN"}),"][",l.jsx("a",{href:uy,children:"EN"}),"]"]}),l.jsxs("p",{className:"no-indent",children:["Other FFXIV community tools: ",l.jsx("a",{href:ey,children:"xivanalysis"})," -"," ",l.jsx("a",{href:sS,children:"XivGear"})," - ",l.jsx("a",{href:ty,children:"XIV Raider"})," and"," ",l.jsx("a",{href:ic,children:"Ama's Combat Sim"})]})]})}function $j(){return l.jsxs(l.Fragment,{children:[l.jsx(_i,{id:"additional-resources",label:""}),l.jsxs("p",{className:"no-indent",children:[l.jsx("i",{children:"XIV in the Shell"}),": ",l.jsx("a",{href:fi,children:"GitHub"})," - ",l.jsx("a",{href:Cu,children:"Blog"})," -"," ",l.jsx("a",{href:Rs,children:"Bluesky"})," - ",l.jsx("a",{href:Ts,children:"Discord"})," -"," ",l.jsx("a",{href:tE,children:"TischelBLM in the Shell"})]}),l.jsxs("p",{className:"no-indent",children:[": ",l.jsx("a",{href:Hj,children:"XIV"})," -"," ",l.jsx("a",{href:kj,children:"XIVwiki"})," - ",l.jsx("a",{href:ay,children:"XIVAPI"})," -"," ",l.jsx("a",{href:ny,children:"XIV-ID"})]}),l.jsxs("p",{className:"no-indent",children:[": ",l.jsx("a",{href:Jf,children:"The Balance"})," -"," ",l.jsx("a",{href:eE,children:"Icy Veins"})," - ",l.jsx("a",{href:$D,children:"FFLogs"})]}),l.jsxs("p",{className:"no-indent",children:[": ",l.jsx("a",{href:iy,children:"Allagan Studies"})," -"," ",l.jsx("a",{href:Uj,children:" "})," -"," ",l.jsx("a",{href:oy,children:"The Balance"})," -  [",l.jsx("a",{href:ly,children:""}),"][",l.jsx("a",{href:sy,children:""}),"] -"," ",l.jsx("a",{href:ry,children:"Game's Haunted"})," -  [",l.jsx("a",{href:cy,children:""}),"][",l.jsx("a",{href:uy,children:""}),"]"]}),l.jsxs("p",{className:"no-indent",children:[": ",l.jsx("a",{href:ey,children:"xivanalysis"})," -"," ",l.jsx("a",{href:wj,children:"14"})," - ",l.jsx("a",{href:ty,children:"XIV Raider"})," "," ",l.jsx("a",{href:ic,children:"Ama"})]})]})}const MR=mf(),aE=C.createContext({items:[],addItem:()=>{}});function Jj(e){const t=C.useContext(aE);return l.jsxs("nav",{style:{float:"right",zIndex:1,maxWidth:"18%"},children:[l.jsx("p",{className:"no-indent",style:{paddingLeft:"0.8rem"},children:e.language==="zh"?"":"Navigation"}),l.jsxs("ul",{style:{listStyleType:"none",paddingLeft:"0.8rem",marginTop:"0.3rem"},children:[l.jsx("li",{style:{paddingBlockEnd:"0.15rem"},children:l.jsx("a",{href:"#top",children:e.language==="zh"?"":"back to top"})}),t.items.map(({id:n,label:o,indentLevel:s})=>l.jsx("li",{style:{paddingLeft:s>0?`${s*1.5}em`:void 0,paddingBlock:"0.15rem"},children:l.jsx("a",{href:"#"+n,children:o})},n))]})]})}function _i(e){const t=C.useContext(aE);return C.useEffect(()=>t.addItem({id:e.id,label:e.label,indentLevel:0}),[]),l.jsxs(l.Fragment,{children:[l.jsx("h2",{id:e.id,children:e.label}),e.content]})}function He(e){const t=C.useContext(aE);return C.useEffect(()=>t.addItem({id:e.id,label:e.label,indentLevel:1}),[]),l.jsxs(l.Fragment,{children:[l.jsx("h3",{id:e.id,children:e.label}),e.content]})}const Ay=C.createContext("en");function Je(e){const t=C.useContext(Ay),n=`${e.id}_${MR==="Dark"?"D":"L"}_${t==="zh"?"Z":"E"}_${e.name}.jpg`;return l.jsx("img",{src:`assets/ManualScreenshots/${n}`,alt:e.alt})}function QA(e){const t=En(MR),n=l.jsx("style",{children:`
		@supports selector(::-webkit-scrollbar) {
			.visibleScrollbar::-webkit-scrollbar {
				appearance: none;
				background-color: ${t.bgLowContrast};
				height: 8px;
				width: 10px;
			}
			.visibleScrollbar::-webkit-scrollbar-thumb {
				background-color: ${t.bgHighContrast};
			}
		}
		@supports not selector(::-webkit-scrollbar) {
			.visibleScrollbar {
				scrollbar-color: ${t.bgHighContrast} ${t.bgLowContrast};
			}
		}
		a {
			color: ${t.accent};
		}
		b, h1, h2, h3, h4 {
			color: ${t.emphasis};
			margin-bottom: 0.2em;
		}
		p {
			margin-block-start: 0.2em;
			margin-block-end: 0.2em;
			text-indent: 2em;
		}
		.no-indent {
			text-indent: 0;
		}
		p:first-child {
			margin-block-start: 0px;
		}
		.help-tooltip {
			color: ${t.text};
			background-color: ${t.tipBackground};
			opacity: 0.98;
			max-width: 300px;
			outline: 1px solid ${t.bgHighContrast};
			transition: none;
			font-size: 100%;
			z-index: 10;
		}
		button:disabled {
			background-color: ${t.background};
		}
		img {
			width: 80%;
			max-width: fit-content;
			border: 2px dashed ${En(MR).bgMediumContrast};
			align-self: center;
			margin: 5px;
		}
		ul {
			margin-block: 0;
		}
		ol {
			margin-block: 0;
		}
	`}),o=C.useRef(null);C.useEffect(()=>{o.current?.focus();const f=window.location.hash.slice(1);f&&o.current&&setTimeout(()=>{const m=document.getElementById(f);if(m&&o.current){const R=o.current.getBoundingClientRect(),T=m.getBoundingClientRect(),S=o.current.scrollTop,g=T.top-R.top+S;o.current.scrollTo({top:g-20,behavior:"smooth"})}},100)},[]);const[s,c]=C.useState([]),d=C.useCallback(({id:f,label:h,indentLevel:m})=>{c(R=>R.find(T=>T.id===f)?R:[...R,{id:f,label:h,indentLevel:m}])},[]);return l.jsxs("div",{ref:o,className:"visibleScrollbar",style:{position:"fixed",top:0,bottom:0,left:0,right:0,outline:"none",accentColor:t.accent,fontFamily:hi,fontSize:14,color:t.text,backgroundColor:t.background,height:"100%",overflow:"auto"},tabIndex:-1,children:[n,l.jsxs(aE.Provider,{value:{items:s,addItem:d},children:[window.innerWidth>1024&&l.jsx("div",{id:"nav-container",style:{position:"sticky",top:"1rem",marginInline:"1rem"},children:l.jsx(Jj,{language:e.language})}),l.jsx(Ay.Provider,{value:e.language??"en",children:l.jsx("div",{style:{marginLeft:"1em",marginRight:"1em",paddingRight:"1em",marginBottom:"1em",display:"flex",flexDirection:"column"},tabIndex:-1,children:e.language==="zh"?tz():ez()})})]})]})}function ez(){return l.jsxs(l.Fragment,{children:[l.jsx("h1",{id:"top",children:"XIV in the Shell User Manual"}),l.jsx(Gj,{}),l.jsx(Fj,{}),l.jsx(zj,{}),l.jsx(Kj,{}),l.jsx(Wj,{}),l.jsx(qj,{}),l.jsx(Qj,{})]})}function tz(){return l.jsxs(l.Fragment,{children:[l.jsx("h1",{id:"top",children:"XIV in the Shell "}),l.jsx(Bj,{}),l.jsx(jj,{}),l.jsx(Yj,{}),l.jsx(Vj,{}),l.jsx(Xj,{}),l.jsx(Zj,{}),l.jsx($j,{})]})}const dh=PM.createRoot(document.getElementById("root")),az=new URLSearchParams(document.location.search),jN=Array.from(az.keys()),Nr=window.location.pathname;Nr==="/manual"||Nr==="/manual/"?dh.render(l.jsx(QA,{language:Tt("language")??void 0})):Nr==="/manual_en"||Nr==="/manual_en/"?dh.render(l.jsx(QA,{language:"en"})):Nr==="/manual_zh"||Nr==="/manual_zh/"?dh.render(l.jsx(QA,{language:"zh"})):dh.render(l.jsx(bj,{command:jN.length>0?jN[0]:void 0}));
