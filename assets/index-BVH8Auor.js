var Hy=Object.defineProperty;var Fp=e=>{throw TypeError(e)};var xy=(e,t,a)=>t in e?Hy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;var F=(e,t,a)=>xy(e,typeof t!="symbol"?t+"":t,a),mA=(e,t,a)=>t.has(e)||Fp("Cannot "+a);var ee=(e,t,a)=>(mA(e,t,"read from private field"),a?a.call(e):t.get(e)),ke=(e,t,a)=>t.has(e)?Fp("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,a),ve=(e,t,a,l)=>(mA(e,t,"write to private field"),l?l.call(e,a):t.set(e,a),a),ge=(e,t,a)=>(mA(e,t,"access private method"),a);function Uy(e,t){for(var a=0;a<t.length;a++){const l=t[a];if(typeof l!="string"&&!Array.isArray(l)){for(const s in l)if(s!=="default"&&!(s in e)){const c=Object.getOwnPropertyDescriptor(l,s);c&&Object.defineProperty(e,s,c.get?c:{enumerable:!0,get:()=>l[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&l(d)}).observe(document,{childList:!0,subtree:!0});function a(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerPolicy&&(c.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?c.credentials="include":s.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function l(s){if(s.ep)return;s.ep=!0;const c=a(s);fetch(s.href,c)}})();function Gm(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function ky(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var a=function l(){return this instanceof l?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};a.prototype=t.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(e).forEach(function(l){var s=Object.getOwnPropertyDescriptor(e,l);Object.defineProperty(a,l,s.get?s:{enumerable:!0,get:function(){return e[l]}})}),a}var RA={exports:{}},Uc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jp;function Py(){if(jp)return Uc;jp=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function a(l,s,c){var d=null;if(c!==void 0&&(d=""+c),s.key!==void 0&&(d=""+s.key),"key"in s){c={};for(var h in s)h!=="key"&&(c[h]=s[h])}else c=s;return s=c.ref,{$$typeof:e,type:l,key:d,ref:s!==void 0?s:null,props:c}}return Uc.Fragment=t,Uc.jsx=a,Uc.jsxs=a,Uc}var zp;function Gy(){return zp||(zp=1,RA.exports=Py()),RA.exports}var u=Gy(),TA={exports:{}},kc={},SA={exports:{}},gA={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yp;function wy(){return Yp||(Yp=1,function(e){function t(w,M){var W=w.length;w.push(M);e:for(;0<W;){var ie=W-1>>>1,y=w[ie];if(0<s(y,M))w[ie]=M,w[W]=y,W=ie;else break e}}function a(w){return w.length===0?null:w[0]}function l(w){if(w.length===0)return null;var M=w[0],W=w.pop();if(W!==M){w[0]=W;e:for(var ie=0,y=w.length,X=y>>>1;ie<X;){var Z=2*(ie+1)-1,Y=w[Z],le=Z+1,de=w[le];if(0>s(Y,W))le<y&&0>s(de,Y)?(w[ie]=de,w[le]=W,ie=le):(w[ie]=Y,w[Z]=W,ie=Z);else if(le<y&&0>s(de,W))w[ie]=de,w[le]=W,ie=le;else break e}}return M}function s(w,M){var W=w.sortIndex-M.sortIndex;return W!==0?W:w.id-M.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;e.unstable_now=function(){return c.now()}}else{var d=Date,h=d.now();e.unstable_now=function(){return d.now()-h}}var E=[],A=[],R=1,T=null,S=3,p=!1,I=!1,b=!1,O=!1,v=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;function U(w){for(var M=a(A);M!==null;){if(M.callback===null)l(A);else if(M.startTime<=w)l(A),M.sortIndex=M.expirationTime,t(E,M);else break;M=a(A)}}function V(w){if(b=!1,U(w),!I)if(a(E)!==null)I=!0,G||(G=!0,Te());else{var M=a(A);M!==null&&ae(V,M.startTime-w)}}var G=!1,H=-1,ue=5,Ae=-1;function Ee(){return O?!0:!(e.unstable_now()-Ae<ue)}function oe(){if(O=!1,G){var w=e.unstable_now();Ae=w;var M=!0;try{e:{I=!1,b&&(b=!1,L(H),H=-1),p=!0;var W=S;try{t:{for(U(w),T=a(E);T!==null&&!(T.expirationTime>w&&Ee());){var ie=T.callback;if(typeof ie=="function"){T.callback=null,S=T.priorityLevel;var y=ie(T.expirationTime<=w);if(w=e.unstable_now(),typeof y=="function"){T.callback=y,U(w),M=!0;break t}T===a(E)&&l(E),U(w)}else l(E);T=a(E)}if(T!==null)M=!0;else{var X=a(A);X!==null&&ae(V,X.startTime-w),M=!1}}break e}finally{T=null,S=W,p=!1}M=void 0}}finally{M?Te():G=!1}}}var Te;if(typeof P=="function")Te=function(){P(oe)};else if(typeof MessageChannel<"u"){var Se=new MessageChannel,ne=Se.port2;Se.port1.onmessage=oe,Te=function(){ne.postMessage(null)}}else Te=function(){v(oe,0)};function ae(w,M){H=v(function(){w(e.unstable_now())},M)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(w){w.callback=null},e.unstable_forceFrameRate=function(w){0>w||125<w?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ue=0<w?Math.floor(1e3/w):5},e.unstable_getCurrentPriorityLevel=function(){return S},e.unstable_next=function(w){switch(S){case 1:case 2:case 3:var M=3;break;default:M=S}var W=S;S=M;try{return w()}finally{S=W}},e.unstable_requestPaint=function(){O=!0},e.unstable_runWithPriority=function(w,M){switch(w){case 1:case 2:case 3:case 4:case 5:break;default:w=3}var W=S;S=w;try{return M()}finally{S=W}},e.unstable_scheduleCallback=function(w,M,W){var ie=e.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?ie+W:ie):W=ie,w){case 1:var y=-1;break;case 2:y=250;break;case 5:y=1073741823;break;case 4:y=1e4;break;default:y=5e3}return y=W+y,w={id:R++,callback:M,priorityLevel:w,startTime:W,expirationTime:y,sortIndex:-1},W>ie?(w.sortIndex=W,t(A,w),a(E)===null&&w===a(A)&&(b?(L(H),H=-1):b=!0,ae(V,W-ie))):(w.sortIndex=y,t(E,w),I||p||(I=!0,G||(G=!0,Te()))),w},e.unstable_shouldYield=Ee,e.unstable_wrapCallback=function(w){var M=S;return function(){var W=S;S=M;try{return w.apply(this,arguments)}finally{S=W}}}}(gA)),gA}var Vp;function By(){return Vp||(Vp=1,SA.exports=wy()),SA.exports}var pA={exports:{}},Ye={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kp;function Fy(){if(Kp)return Ye;Kp=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),A=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),T=Symbol.iterator;function S(y){return y===null||typeof y!="object"?null:(y=T&&y[T]||y["@@iterator"],typeof y=="function"?y:null)}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I=Object.assign,b={};function O(y,X,Z){this.props=y,this.context=X,this.refs=b,this.updater=Z||p}O.prototype.isReactComponent={},O.prototype.setState=function(y,X){if(typeof y!="object"&&typeof y!="function"&&y!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,y,X,"setState")},O.prototype.forceUpdate=function(y){this.updater.enqueueForceUpdate(this,y,"forceUpdate")};function v(){}v.prototype=O.prototype;function L(y,X,Z){this.props=y,this.context=X,this.refs=b,this.updater=Z||p}var P=L.prototype=new v;P.constructor=L,I(P,O.prototype),P.isPureReactComponent=!0;var U=Array.isArray,V={H:null,A:null,T:null,S:null,V:null},G=Object.prototype.hasOwnProperty;function H(y,X,Z,Y,le,de){return Z=de.ref,{$$typeof:e,type:y,key:X,ref:Z!==void 0?Z:null,props:de}}function ue(y,X){return H(y.type,X,void 0,void 0,void 0,y.props)}function Ae(y){return typeof y=="object"&&y!==null&&y.$$typeof===e}function Ee(y){var X={"=":"=0",":":"=2"};return"$"+y.replace(/[=:]/g,function(Z){return X[Z]})}var oe=/\/+/g;function Te(y,X){return typeof y=="object"&&y!==null&&y.key!=null?Ee(""+y.key):X.toString(36)}function Se(){}function ne(y){switch(y.status){case"fulfilled":return y.value;case"rejected":throw y.reason;default:switch(typeof y.status=="string"?y.then(Se,Se):(y.status="pending",y.then(function(X){y.status==="pending"&&(y.status="fulfilled",y.value=X)},function(X){y.status==="pending"&&(y.status="rejected",y.reason=X)})),y.status){case"fulfilled":return y.value;case"rejected":throw y.reason}}throw y}function ae(y,X,Z,Y,le){var de=typeof y;(de==="undefined"||de==="boolean")&&(y=null);var re=!1;if(y===null)re=!0;else switch(de){case"bigint":case"string":case"number":re=!0;break;case"object":switch(y.$$typeof){case e:case t:re=!0;break;case R:return re=y._init,ae(re(y._payload),X,Z,Y,le)}}if(re)return le=le(y),re=Y===""?"."+Te(y,0):Y,U(le)?(Z="",re!=null&&(Z=re.replace(oe,"$&/")+"/"),ae(le,X,Z,"",function(Oe){return Oe})):le!=null&&(Ae(le)&&(le=ue(le,Z+(le.key==null||y&&y.key===le.key?"":(""+le.key).replace(oe,"$&/")+"/")+re)),X.push(le)),1;re=0;var Re=Y===""?".":Y+":";if(U(y))for(var he=0;he<y.length;he++)Y=y[he],de=Re+Te(Y,he),re+=ae(Y,X,Z,de,le);else if(he=S(y),typeof he=="function")for(y=he.call(y),he=0;!(Y=y.next()).done;)Y=Y.value,de=Re+Te(Y,he++),re+=ae(Y,X,Z,de,le);else if(de==="object"){if(typeof y.then=="function")return ae(ne(y),X,Z,Y,le);throw X=String(y),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(y).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return re}function w(y,X,Z){if(y==null)return y;var Y=[],le=0;return ae(y,Y,"","",function(de){return X.call(Z,de,le++)}),Y}function M(y){if(y._status===-1){var X=y._result;X=X(),X.then(function(Z){(y._status===0||y._status===-1)&&(y._status=1,y._result=Z)},function(Z){(y._status===0||y._status===-1)&&(y._status=2,y._result=Z)}),y._status===-1&&(y._status=0,y._result=X)}if(y._status===1)return y._result.default;throw y._result}var W=typeof reportError=="function"?reportError:function(y){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof y=="object"&&y!==null&&typeof y.message=="string"?String(y.message):String(y),error:y});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",y);return}console.error(y)};function ie(){}return Ye.Children={map:w,forEach:function(y,X,Z){w(y,function(){X.apply(this,arguments)},Z)},count:function(y){var X=0;return w(y,function(){X++}),X},toArray:function(y){return w(y,function(X){return X})||[]},only:function(y){if(!Ae(y))throw Error("React.Children.only expected to receive a single React element child.");return y}},Ye.Component=O,Ye.Fragment=a,Ye.Profiler=s,Ye.PureComponent=L,Ye.StrictMode=l,Ye.Suspense=E,Ye.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=V,Ye.__COMPILER_RUNTIME={__proto__:null,c:function(y){return V.H.useMemoCache(y)}},Ye.cache=function(y){return function(){return y.apply(null,arguments)}},Ye.cloneElement=function(y,X,Z){if(y==null)throw Error("The argument must be a React element, but you passed "+y+".");var Y=I({},y.props),le=y.key,de=void 0;if(X!=null)for(re in X.ref!==void 0&&(de=void 0),X.key!==void 0&&(le=""+X.key),X)!G.call(X,re)||re==="key"||re==="__self"||re==="__source"||re==="ref"&&X.ref===void 0||(Y[re]=X[re]);var re=arguments.length-2;if(re===1)Y.children=Z;else if(1<re){for(var Re=Array(re),he=0;he<re;he++)Re[he]=arguments[he+2];Y.children=Re}return H(y.type,le,void 0,void 0,de,Y)},Ye.createContext=function(y){return y={$$typeof:d,_currentValue:y,_currentValue2:y,_threadCount:0,Provider:null,Consumer:null},y.Provider=y,y.Consumer={$$typeof:c,_context:y},y},Ye.createElement=function(y,X,Z){var Y,le={},de=null;if(X!=null)for(Y in X.key!==void 0&&(de=""+X.key),X)G.call(X,Y)&&Y!=="key"&&Y!=="__self"&&Y!=="__source"&&(le[Y]=X[Y]);var re=arguments.length-2;if(re===1)le.children=Z;else if(1<re){for(var Re=Array(re),he=0;he<re;he++)Re[he]=arguments[he+2];le.children=Re}if(y&&y.defaultProps)for(Y in re=y.defaultProps,re)le[Y]===void 0&&(le[Y]=re[Y]);return H(y,de,void 0,void 0,null,le)},Ye.createRef=function(){return{current:null}},Ye.forwardRef=function(y){return{$$typeof:h,render:y}},Ye.isValidElement=Ae,Ye.lazy=function(y){return{$$typeof:R,_payload:{_status:-1,_result:y},_init:M}},Ye.memo=function(y,X){return{$$typeof:A,type:y,compare:X===void 0?null:X}},Ye.startTransition=function(y){var X=V.T,Z={};V.T=Z;try{var Y=y(),le=V.S;le!==null&&le(Z,Y),typeof Y=="object"&&Y!==null&&typeof Y.then=="function"&&Y.then(ie,W)}catch(de){W(de)}finally{V.T=X}},Ye.unstable_useCacheRefresh=function(){return V.H.useCacheRefresh()},Ye.use=function(y){return V.H.use(y)},Ye.useActionState=function(y,X,Z){return V.H.useActionState(y,X,Z)},Ye.useCallback=function(y,X){return V.H.useCallback(y,X)},Ye.useContext=function(y){return V.H.useContext(y)},Ye.useDebugValue=function(){},Ye.useDeferredValue=function(y,X){return V.H.useDeferredValue(y,X)},Ye.useEffect=function(y,X,Z){var Y=V.H;if(typeof Z=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Y.useEffect(y,X)},Ye.useId=function(){return V.H.useId()},Ye.useImperativeHandle=function(y,X,Z){return V.H.useImperativeHandle(y,X,Z)},Ye.useInsertionEffect=function(y,X){return V.H.useInsertionEffect(y,X)},Ye.useLayoutEffect=function(y,X){return V.H.useLayoutEffect(y,X)},Ye.useMemo=function(y,X){return V.H.useMemo(y,X)},Ye.useOptimistic=function(y,X){return V.H.useOptimistic(y,X)},Ye.useReducer=function(y,X,Z){return V.H.useReducer(y,X,Z)},Ye.useRef=function(y){return V.H.useRef(y)},Ye.useState=function(y){return V.H.useState(y)},Ye.useSyncExternalStore=function(y,X,Z){return V.H.useSyncExternalStore(y,X,Z)},Ye.useTransition=function(){return V.H.useTransition()},Ye.version="19.1.0",Ye}var Wp;function wm(){return Wp||(Wp=1,pA.exports=Fy()),pA.exports}var _A={exports:{}},Wn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qp;function jy(){if(qp)return Wn;qp=1;var e=wm();function t(E){var A="https://react.dev/errors/"+E;if(1<arguments.length){A+="?args[]="+encodeURIComponent(arguments[1]);for(var R=2;R<arguments.length;R++)A+="&args[]="+encodeURIComponent(arguments[R])}return"Minified React error #"+E+"; visit "+A+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var l={d:{f:a,r:function(){throw Error(t(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},s=Symbol.for("react.portal");function c(E,A,R){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:T==null?null:""+T,children:E,containerInfo:A,implementation:R}}var d=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(E,A){if(E==="font")return"";if(typeof A=="string")return A==="use-credentials"?A:""}return Wn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=l,Wn.createPortal=function(E,A){var R=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!A||A.nodeType!==1&&A.nodeType!==9&&A.nodeType!==11)throw Error(t(299));return c(E,A,null,R)},Wn.flushSync=function(E){var A=d.T,R=l.p;try{if(d.T=null,l.p=2,E)return E()}finally{d.T=A,l.p=R,l.d.f()}},Wn.preconnect=function(E,A){typeof E=="string"&&(A?(A=A.crossOrigin,A=typeof A=="string"?A==="use-credentials"?A:"":void 0):A=null,l.d.C(E,A))},Wn.prefetchDNS=function(E){typeof E=="string"&&l.d.D(E)},Wn.preinit=function(E,A){if(typeof E=="string"&&A&&typeof A.as=="string"){var R=A.as,T=h(R,A.crossOrigin),S=typeof A.integrity=="string"?A.integrity:void 0,p=typeof A.fetchPriority=="string"?A.fetchPriority:void 0;R==="style"?l.d.S(E,typeof A.precedence=="string"?A.precedence:void 0,{crossOrigin:T,integrity:S,fetchPriority:p}):R==="script"&&l.d.X(E,{crossOrigin:T,integrity:S,fetchPriority:p,nonce:typeof A.nonce=="string"?A.nonce:void 0})}},Wn.preinitModule=function(E,A){if(typeof E=="string")if(typeof A=="object"&&A!==null){if(A.as==null||A.as==="script"){var R=h(A.as,A.crossOrigin);l.d.M(E,{crossOrigin:R,integrity:typeof A.integrity=="string"?A.integrity:void 0,nonce:typeof A.nonce=="string"?A.nonce:void 0})}}else A==null&&l.d.M(E)},Wn.preload=function(E,A){if(typeof E=="string"&&typeof A=="object"&&A!==null&&typeof A.as=="string"){var R=A.as,T=h(R,A.crossOrigin);l.d.L(E,R,{crossOrigin:T,integrity:typeof A.integrity=="string"?A.integrity:void 0,nonce:typeof A.nonce=="string"?A.nonce:void 0,type:typeof A.type=="string"?A.type:void 0,fetchPriority:typeof A.fetchPriority=="string"?A.fetchPriority:void 0,referrerPolicy:typeof A.referrerPolicy=="string"?A.referrerPolicy:void 0,imageSrcSet:typeof A.imageSrcSet=="string"?A.imageSrcSet:void 0,imageSizes:typeof A.imageSizes=="string"?A.imageSizes:void 0,media:typeof A.media=="string"?A.media:void 0})}},Wn.preloadModule=function(E,A){if(typeof E=="string")if(A){var R=h(A.as,A.crossOrigin);l.d.m(E,{as:typeof A.as=="string"&&A.as!=="script"?A.as:void 0,crossOrigin:R,integrity:typeof A.integrity=="string"?A.integrity:void 0})}else l.d.m(E)},Wn.requestFormReset=function(E){l.d.r(E)},Wn.unstable_batchedUpdates=function(E,A){return E(A)},Wn.useFormState=function(E,A,R){return d.H.useFormState(E,A,R)},Wn.useFormStatus=function(){return d.H.useHostTransitionStatus()},Wn.version="19.1.0",Wn}var Xp;function wI(){if(Xp)return _A.exports;Xp=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),_A.exports=jy(),_A.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zp;function zy(){if(Zp)return kc;Zp=1;var e=By(),t=wm(),a=wI();function l(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function c(n){var i=n,o=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(o=i.return),n=i.return;while(n)}return i.tag===3?o:null}function d(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function h(n){if(c(n)!==n)throw Error(l(188))}function E(n){var i=n.alternate;if(!i){if(i=c(n),i===null)throw Error(l(188));return i!==n?null:n}for(var o=n,r=i;;){var f=o.return;if(f===null)break;var m=f.alternate;if(m===null){if(r=f.return,r!==null){o=r;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===o)return h(f),n;if(m===r)return h(f),i;m=m.sibling}throw Error(l(188))}if(o.return!==r.return)o=f,r=m;else{for(var g=!1,C=f.child;C;){if(C===o){g=!0,o=f,r=m;break}if(C===r){g=!0,r=f,o=m;break}C=C.sibling}if(!g){for(C=m.child;C;){if(C===o){g=!0,o=m,r=f;break}if(C===r){g=!0,r=m,o=f;break}C=C.sibling}if(!g)throw Error(l(189))}}if(o.alternate!==r)throw Error(l(190))}if(o.tag!==3)throw Error(l(188));return o.stateNode.current===o?n:i}function A(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=A(n),i!==null)return i;n=n.sibling}return null}var R=Object.assign,T=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),p=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),v=Symbol.for("react.provider"),L=Symbol.for("react.consumer"),P=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),ue=Symbol.for("react.lazy"),Ae=Symbol.for("react.activity"),Ee=Symbol.for("react.memo_cache_sentinel"),oe=Symbol.iterator;function Te(n){return n===null||typeof n!="object"?null:(n=oe&&n[oe]||n["@@iterator"],typeof n=="function"?n:null)}var Se=Symbol.for("react.client.reference");function ne(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===Se?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case I:return"Fragment";case O:return"Profiler";case b:return"StrictMode";case V:return"Suspense";case G:return"SuspenseList";case Ae:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case p:return"Portal";case P:return(n.displayName||"Context")+".Provider";case L:return(n._context.displayName||"Context")+".Consumer";case U:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case H:return i=n.displayName||null,i!==null?i:ne(n.type)||"Memo";case ue:i=n._payload,n=n._init;try{return ne(n(i))}catch{}}return null}var ae=Array.isArray,w=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W={pending:!1,data:null,method:null,action:null},ie=[],y=-1;function X(n){return{current:n}}function Z(n){0>y||(n.current=ie[y],ie[y]=null,y--)}function Y(n,i){y++,ie[y]=n.current,n.current=i}var le=X(null),de=X(null),re=X(null),Re=X(null);function he(n,i){switch(Y(re,i),Y(de,n),Y(le,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?Ap(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=Ap(i),n=mp(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}Z(le),Y(le,n)}function Oe(){Z(le),Z(de),Z(re)}function Be(n){n.memoizedState!==null&&Y(Re,n);var i=le.current,o=mp(i,n.type);i!==o&&(Y(de,n),Y(le,o))}function Ne(n){de.current===n&&(Z(le),Z(de)),Re.current===n&&(Z(Re),Dc._currentValue=W)}var Ie=Object.prototype.hasOwnProperty,_e=e.unstable_scheduleCallback,He=e.unstable_cancelCallback,et=e.unstable_shouldYield,bt=e.unstable_requestPaint,nt=e.unstable_now,it=e.unstable_getCurrentPriorityLevel,Et=e.unstable_ImmediatePriority,At=e.unstable_UserBlockingPriority,Wt=e.unstable_NormalPriority,co=e.unstable_LowPriority,us=e.unstable_IdlePriority,Tu=e.log,Su=e.unstable_setDisableYieldValue,Gr=null,Sa=null;function El(n){if(typeof Tu=="function"&&Su(n),Sa&&typeof Sa.setStrictMode=="function")try{Sa.setStrictMode(Gr,n)}catch{}}var ga=Math.clz32?Math.clz32:SO,RO=Math.log,TO=Math.LN2;function SO(n){return n>>>=0,n===0?32:31-(RO(n)/TO|0)|0}var gu=256,pu=4194304;function uo(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function _u(n,i,o){var r=n.pendingLanes;if(r===0)return 0;var f=0,m=n.suspendedLanes,g=n.pingedLanes;n=n.warmLanes;var C=r&134217727;return C!==0?(r=C&~m,r!==0?f=uo(r):(g&=C,g!==0?f=uo(g):o||(o=C&~n,o!==0&&(f=uo(o))))):(C=r&~m,C!==0?f=uo(C):g!==0?f=uo(g):o||(o=r&~n,o!==0&&(f=uo(o)))),f===0?0:i!==0&&i!==f&&(i&m)===0&&(m=f&-f,o=i&-i,m>=o||m===32&&(o&4194048)!==0)?i:f}function wr(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function gO(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $R(){var n=gu;return gu<<=1,(gu&4194048)===0&&(gu=256),n}function JR(){var n=pu;return pu<<=1,(pu&62914560)===0&&(pu=4194304),n}function lh(n){for(var i=[],o=0;31>o;o++)i.push(n);return i}function Br(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function pO(n,i,o,r,f,m){var g=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var C=n.entanglements,x=n.expirationTimes,Q=n.hiddenUpdates;for(o=g&~o;0<o;){var se=31-ga(o),fe=1<<se;C[se]=0,x[se]=-1;var J=Q[se];if(J!==null)for(Q[se]=null,se=0;se<J.length;se++){var te=J[se];te!==null&&(te.lane&=-536870913)}o&=~fe}r!==0&&eT(n,r,0),m!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=m&~(g&~i))}function eT(n,i,o){n.pendingLanes|=i,n.suspendedLanes&=~i;var r=31-ga(i);n.entangledLanes|=i,n.entanglements[r]=n.entanglements[r]|1073741824|o&4194090}function tT(n,i){var o=n.entangledLanes|=i;for(n=n.entanglements;o;){var r=31-ga(o),f=1<<r;f&i|n[r]&i&&(n[r]|=i),o&=~f}}function oh(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function sh(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function nT(){var n=M.p;return n!==0?n:(n=window.event,n===void 0?32:Up(n.type))}function _O(n,i){var o=M.p;try{return M.p=n,i()}finally{M.p=o}}var Al=Math.random().toString(36).slice(2),Vn="__reactFiber$"+Al,fa="__reactProps$"+Al,ds="__reactContainer$"+Al,rh="__reactEvents$"+Al,IO="__reactListeners$"+Al,CO="__reactHandles$"+Al,aT="__reactResources$"+Al,Fr="__reactMarker$"+Al;function ch(n){delete n[Vn],delete n[fa],delete n[rh],delete n[IO],delete n[CO]}function fs(n){var i=n[Vn];if(i)return i;for(var o=n.parentNode;o;){if(i=o[ds]||o[Vn]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(n=gp(n);n!==null;){if(o=n[Vn])return o;n=gp(n)}return i}n=o,o=n.parentNode}return null}function hs(n){if(n=n[Vn]||n[ds]){var i=n.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return n}return null}function jr(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(l(33))}function Es(n){var i=n[aT];return i||(i=n[aT]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function In(n){n[Fr]=!0}var iT=new Set,lT={};function fo(n,i){As(n,i),As(n+"Capture",i)}function As(n,i){for(lT[n]=i,n=0;n<i.length;n++)iT.add(i[n])}var NO=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),oT={},sT={};function OO(n){return Ie.call(sT,n)?!0:Ie.call(oT,n)?!1:NO.test(n)?sT[n]=!0:(oT[n]=!0,!1)}function Iu(n,i,o){if(OO(i))if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var r=i.toLowerCase().slice(0,5);if(r!=="data-"&&r!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+o)}}function Cu(n,i,o){if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+o)}}function Ui(n,i,o,r){if(r===null)n.removeAttribute(o);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(i,o,""+r)}}var uh,rT;function ms(n){if(uh===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);uh=i&&i[1]||"",rT=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+uh+n+rT}var dh=!1;function fh(n,i){if(!n||dh)return"";dh=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(i){var fe=function(){throw Error()};if(Object.defineProperty(fe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(fe,[])}catch(te){var J=te}Reflect.construct(n,[],fe)}else{try{fe.call()}catch(te){J=te}n.call(fe.prototype)}}else{try{throw Error()}catch(te){J=te}(fe=n())&&typeof fe.catch=="function"&&fe.catch(function(){})}}catch(te){if(te&&J&&typeof te.stack=="string")return[te.stack,J.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=r.DetermineComponentFrameRoot(),g=m[0],C=m[1];if(g&&C){var x=g.split(`
`),Q=C.split(`
`);for(f=r=0;r<x.length&&!x[r].includes("DetermineComponentFrameRoot");)r++;for(;f<Q.length&&!Q[f].includes("DetermineComponentFrameRoot");)f++;if(r===x.length||f===Q.length)for(r=x.length-1,f=Q.length-1;1<=r&&0<=f&&x[r]!==Q[f];)f--;for(;1<=r&&0<=f;r--,f--)if(x[r]!==Q[f]){if(r!==1||f!==1)do if(r--,f--,0>f||x[r]!==Q[f]){var se=`
`+x[r].replace(" at new "," at ");return n.displayName&&se.includes("<anonymous>")&&(se=se.replace("<anonymous>",n.displayName)),se}while(1<=r&&0<=f);break}}}finally{dh=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?ms(o):""}function bO(n){switch(n.tag){case 26:case 27:case 5:return ms(n.type);case 16:return ms("Lazy");case 13:return ms("Suspense");case 19:return ms("SuspenseList");case 0:case 15:return fh(n.type,!1);case 11:return fh(n.type.render,!1);case 1:return fh(n.type,!0);case 31:return ms("Activity");default:return""}}function cT(n){try{var i="";do i+=bO(n),n=n.return;while(n);return i}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function za(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function uT(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function yO(n){var i=uT(n)?"checked":"value",o=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),r=""+n[i];if(!n.hasOwnProperty(i)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,m=o.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return f.call(this)},set:function(g){r=""+g,m.call(this,g)}}),Object.defineProperty(n,i,{enumerable:o.enumerable}),{getValue:function(){return r},setValue:function(g){r=""+g},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Nu(n){n._valueTracker||(n._valueTracker=yO(n))}function dT(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var o=i.getValue(),r="";return n&&(r=uT(n)?n.checked?"true":"false":n.value),n=r,n!==o?(i.setValue(n),!0):!1}function Ou(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var vO=/[\n"\\]/g;function Ya(n){return n.replace(vO,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function hh(n,i,o,r,f,m,g,C){n.name="",g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"?n.type=g:n.removeAttribute("type"),i!=null?g==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+za(i)):n.value!==""+za(i)&&(n.value=""+za(i)):g!=="submit"&&g!=="reset"||n.removeAttribute("value"),i!=null?Eh(n,g,za(i)):o!=null?Eh(n,g,za(o)):r!=null&&n.removeAttribute("value"),f==null&&m!=null&&(n.defaultChecked=!!m),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?n.name=""+za(C):n.removeAttribute("name")}function fT(n,i,o,r,f,m,g,C){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(n.type=m),i!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||i!=null))return;o=o!=null?""+za(o):"",i=i!=null?""+za(i):o,C||i===n.value||(n.value=i),n.defaultValue=i}r=r??f,r=typeof r!="function"&&typeof r!="symbol"&&!!r,n.checked=C?n.checked:!!r,n.defaultChecked=!!r,g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(n.name=g)}function Eh(n,i,o){i==="number"&&Ou(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function Rs(n,i,o,r){if(n=n.options,i){i={};for(var f=0;f<o.length;f++)i["$"+o[f]]=!0;for(o=0;o<n.length;o++)f=i.hasOwnProperty("$"+n[o].value),n[o].selected!==f&&(n[o].selected=f),f&&r&&(n[o].defaultSelected=!0)}else{for(o=""+za(o),i=null,f=0;f<n.length;f++){if(n[f].value===o){n[f].selected=!0,r&&(n[f].defaultSelected=!0);return}i!==null||n[f].disabled||(i=n[f])}i!==null&&(i.selected=!0)}}function hT(n,i,o){if(i!=null&&(i=""+za(i),i!==n.value&&(n.value=i),o==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=o!=null?""+za(o):""}function ET(n,i,o,r){if(i==null){if(r!=null){if(o!=null)throw Error(l(92));if(ae(r)){if(1<r.length)throw Error(l(93));r=r[0]}o=r}o==null&&(o=""),i=o}o=za(i),n.defaultValue=o,r=n.textContent,r===o&&r!==""&&r!==null&&(n.value=r)}function Ts(n,i){if(i){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=i;return}}n.textContent=i}var DO=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function AT(n,i,o){var r=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?r?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":r?n.setProperty(i,o):typeof o!="number"||o===0||DO.has(i)?i==="float"?n.cssFloat=o:n[i]=(""+o).trim():n[i]=o+"px"}function mT(n,i,o){if(i!=null&&typeof i!="object")throw Error(l(62));if(n=n.style,o!=null){for(var r in o)!o.hasOwnProperty(r)||i!=null&&i.hasOwnProperty(r)||(r.indexOf("--")===0?n.setProperty(r,""):r==="float"?n.cssFloat="":n[r]="");for(var f in i)r=i[f],i.hasOwnProperty(f)&&o[f]!==r&&AT(n,f,r)}else for(var m in i)i.hasOwnProperty(m)&&AT(n,m,i[m])}function Ah(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var MO=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),LO=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function bu(n){return LO.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var mh=null;function Rh(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ss=null,gs=null;function RT(n){var i=hs(n);if(i&&(n=i.stateNode)){var o=n[fa]||null;e:switch(n=i.stateNode,i.type){case"input":if(hh(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Ya(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var r=o[i];if(r!==n&&r.form===n.form){var f=r[fa]||null;if(!f)throw Error(l(90));hh(r,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<o.length;i++)r=o[i],r.form===n.form&&dT(r)}break e;case"textarea":hT(n,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&Rs(n,!!o.multiple,i,!1)}}}var Th=!1;function TT(n,i,o){if(Th)return n(i,o);Th=!0;try{var r=n(i);return r}finally{if(Th=!1,(Ss!==null||gs!==null)&&(fd(),Ss&&(i=Ss,n=gs,gs=Ss=null,RT(i),n)))for(i=0;i<n.length;i++)RT(n[i])}}function zr(n,i){var o=n.stateNode;if(o===null)return null;var r=o[fa]||null;if(r===null)return null;o=r[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(l(231,i,typeof o));return o}var ki=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Sh=!1;if(ki)try{var Yr={};Object.defineProperty(Yr,"passive",{get:function(){Sh=!0}}),window.addEventListener("test",Yr,Yr),window.removeEventListener("test",Yr,Yr)}catch{Sh=!1}var ml=null,gh=null,yu=null;function ST(){if(yu)return yu;var n,i=gh,o=i.length,r,f="value"in ml?ml.value:ml.textContent,m=f.length;for(n=0;n<o&&i[n]===f[n];n++);var g=o-n;for(r=1;r<=g&&i[o-r]===f[m-r];r++);return yu=f.slice(n,1<r?1-r:void 0)}function vu(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Du(){return!0}function gT(){return!1}function ha(n){function i(o,r,f,m,g){this._reactName=o,this._targetInst=f,this.type=r,this.nativeEvent=m,this.target=g,this.currentTarget=null;for(var C in n)n.hasOwnProperty(C)&&(o=n[C],this[C]=o?o(m):m[C]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Du:gT,this.isPropagationStopped=gT,this}return R(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Du)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Du)},persist:function(){},isPersistent:Du}),i}var ho={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mu=ha(ho),Vr=R({},ho,{view:0,detail:0}),HO=ha(Vr),ph,_h,Kr,Lu=R({},Vr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ch,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Kr&&(Kr&&n.type==="mousemove"?(ph=n.screenX-Kr.screenX,_h=n.screenY-Kr.screenY):_h=ph=0,Kr=n),ph)},movementY:function(n){return"movementY"in n?n.movementY:_h}}),pT=ha(Lu),xO=R({},Lu,{dataTransfer:0}),UO=ha(xO),kO=R({},Vr,{relatedTarget:0}),Ih=ha(kO),PO=R({},ho,{animationName:0,elapsedTime:0,pseudoElement:0}),GO=ha(PO),wO=R({},ho,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),BO=ha(wO),FO=R({},ho,{data:0}),_T=ha(FO),jO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},YO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function VO(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=YO[n])?!!i[n]:!1}function Ch(){return VO}var KO=R({},Vr,{key:function(n){if(n.key){var i=jO[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=vu(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?zO[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ch,charCode:function(n){return n.type==="keypress"?vu(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?vu(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),WO=ha(KO),qO=R({},Lu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),IT=ha(qO),XO=R({},Vr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ch}),ZO=ha(XO),QO=R({},ho,{propertyName:0,elapsedTime:0,pseudoElement:0}),$O=ha(QO),JO=R({},Lu,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),eb=ha(JO),tb=R({},ho,{newState:0,oldState:0}),nb=ha(tb),ab=[9,13,27,32],Nh=ki&&"CompositionEvent"in window,Wr=null;ki&&"documentMode"in document&&(Wr=document.documentMode);var ib=ki&&"TextEvent"in window&&!Wr,CT=ki&&(!Nh||Wr&&8<Wr&&11>=Wr),NT=" ",OT=!1;function bT(n,i){switch(n){case"keyup":return ab.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yT(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ps=!1;function lb(n,i){switch(n){case"compositionend":return yT(i);case"keypress":return i.which!==32?null:(OT=!0,NT);case"textInput":return n=i.data,n===NT&&OT?null:n;default:return null}}function ob(n,i){if(ps)return n==="compositionend"||!Nh&&bT(n,i)?(n=ST(),yu=gh=ml=null,ps=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return CT&&i.locale!=="ko"?null:i.data;default:return null}}var sb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vT(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!sb[n.type]:i==="textarea"}function DT(n,i,o,r){Ss?gs?gs.push(r):gs=[r]:Ss=r,i=Td(i,"onChange"),0<i.length&&(o=new Mu("onChange","change",null,o,r),n.push({event:o,listeners:i}))}var qr=null,Xr=null;function rb(n){up(n,0)}function Hu(n){var i=jr(n);if(dT(i))return n}function MT(n,i){if(n==="change")return i}var LT=!1;if(ki){var Oh;if(ki){var bh="oninput"in document;if(!bh){var HT=document.createElement("div");HT.setAttribute("oninput","return;"),bh=typeof HT.oninput=="function"}Oh=bh}else Oh=!1;LT=Oh&&(!document.documentMode||9<document.documentMode)}function xT(){qr&&(qr.detachEvent("onpropertychange",UT),Xr=qr=null)}function UT(n){if(n.propertyName==="value"&&Hu(Xr)){var i=[];DT(i,Xr,n,Rh(n)),TT(rb,i)}}function cb(n,i,o){n==="focusin"?(xT(),qr=i,Xr=o,qr.attachEvent("onpropertychange",UT)):n==="focusout"&&xT()}function ub(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Hu(Xr)}function db(n,i){if(n==="click")return Hu(i)}function fb(n,i){if(n==="input"||n==="change")return Hu(i)}function hb(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var pa=typeof Object.is=="function"?Object.is:hb;function Zr(n,i){if(pa(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var o=Object.keys(n),r=Object.keys(i);if(o.length!==r.length)return!1;for(r=0;r<o.length;r++){var f=o[r];if(!Ie.call(i,f)||!pa(n[f],i[f]))return!1}return!0}function kT(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function PT(n,i){var o=kT(n);n=0;for(var r;o;){if(o.nodeType===3){if(r=n+o.textContent.length,n<=i&&r>=i)return{node:o,offset:i-n};n=r}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=kT(o)}}function GT(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?GT(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function wT(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=Ou(n.document);i instanceof n.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)n=i.contentWindow;else break;i=Ou(n.document)}return i}function yh(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var Eb=ki&&"documentMode"in document&&11>=document.documentMode,_s=null,vh=null,Qr=null,Dh=!1;function BT(n,i,o){var r=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Dh||_s==null||_s!==Ou(r)||(r=_s,"selectionStart"in r&&yh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Qr&&Zr(Qr,r)||(Qr=r,r=Td(vh,"onSelect"),0<r.length&&(i=new Mu("onSelect","select",null,i,o),n.push({event:i,listeners:r}),i.target=_s)))}function Eo(n,i){var o={};return o[n.toLowerCase()]=i.toLowerCase(),o["Webkit"+n]="webkit"+i,o["Moz"+n]="moz"+i,o}var Is={animationend:Eo("Animation","AnimationEnd"),animationiteration:Eo("Animation","AnimationIteration"),animationstart:Eo("Animation","AnimationStart"),transitionrun:Eo("Transition","TransitionRun"),transitionstart:Eo("Transition","TransitionStart"),transitioncancel:Eo("Transition","TransitionCancel"),transitionend:Eo("Transition","TransitionEnd")},Mh={},FT={};ki&&(FT=document.createElement("div").style,"AnimationEvent"in window||(delete Is.animationend.animation,delete Is.animationiteration.animation,delete Is.animationstart.animation),"TransitionEvent"in window||delete Is.transitionend.transition);function Ao(n){if(Mh[n])return Mh[n];if(!Is[n])return n;var i=Is[n],o;for(o in i)if(i.hasOwnProperty(o)&&o in FT)return Mh[n]=i[o];return n}var jT=Ao("animationend"),zT=Ao("animationiteration"),YT=Ao("animationstart"),Ab=Ao("transitionrun"),mb=Ao("transitionstart"),Rb=Ao("transitioncancel"),VT=Ao("transitionend"),KT=new Map,Lh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Lh.push("scrollEnd");function ri(n,i){KT.set(n,i),fo(i,[n])}var WT=new WeakMap;function Va(n,i){if(typeof n=="object"&&n!==null){var o=WT.get(n);return o!==void 0?o:(i={value:n,source:i,stack:cT(i)},WT.set(n,i),i)}return{value:n,source:i,stack:cT(i)}}var Ka=[],Cs=0,Hh=0;function xu(){for(var n=Cs,i=Hh=Cs=0;i<n;){var o=Ka[i];Ka[i++]=null;var r=Ka[i];Ka[i++]=null;var f=Ka[i];Ka[i++]=null;var m=Ka[i];if(Ka[i++]=null,r!==null&&f!==null){var g=r.pending;g===null?f.next=f:(f.next=g.next,g.next=f),r.pending=f}m!==0&&qT(o,f,m)}}function Uu(n,i,o,r){Ka[Cs++]=n,Ka[Cs++]=i,Ka[Cs++]=o,Ka[Cs++]=r,Hh|=r,n.lanes|=r,n=n.alternate,n!==null&&(n.lanes|=r)}function xh(n,i,o,r){return Uu(n,i,o,r),ku(n)}function Ns(n,i){return Uu(n,null,null,i),ku(n)}function qT(n,i,o){n.lanes|=o;var r=n.alternate;r!==null&&(r.lanes|=o);for(var f=!1,m=n.return;m!==null;)m.childLanes|=o,r=m.alternate,r!==null&&(r.childLanes|=o),m.tag===22&&(n=m.stateNode,n===null||n._visibility&1||(f=!0)),n=m,m=m.return;return n.tag===3?(m=n.stateNode,f&&i!==null&&(f=31-ga(o),n=m.hiddenUpdates,r=n[f],r===null?n[f]=[i]:r.push(i),i.lane=o|536870912),m):null}function ku(n){if(50<_c)throw _c=0,BE=null,Error(l(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var Os={};function Tb(n,i,o,r){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _a(n,i,o,r){return new Tb(n,i,o,r)}function Uh(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Pi(n,i){var o=n.alternate;return o===null?(o=_a(n.tag,i,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=i,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,i=n.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function XT(n,i){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,i=o.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function Pu(n,i,o,r,f,m){var g=0;if(r=n,typeof n=="function")Uh(n)&&(g=1);else if(typeof n=="string")g=gy(n,o,le.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case Ae:return n=_a(31,o,i,f),n.elementType=Ae,n.lanes=m,n;case I:return mo(o.children,f,m,i);case b:g=8,f|=24;break;case O:return n=_a(12,o,i,f|2),n.elementType=O,n.lanes=m,n;case V:return n=_a(13,o,i,f),n.elementType=V,n.lanes=m,n;case G:return n=_a(19,o,i,f),n.elementType=G,n.lanes=m,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case v:case P:g=10;break e;case L:g=9;break e;case U:g=11;break e;case H:g=14;break e;case ue:g=16,r=null;break e}g=29,o=Error(l(130,n===null?"null":typeof n,"")),r=null}return i=_a(g,o,i,f),i.elementType=n,i.type=r,i.lanes=m,i}function mo(n,i,o,r){return n=_a(7,n,r,i),n.lanes=o,n}function kh(n,i,o){return n=_a(6,n,null,i),n.lanes=o,n}function Ph(n,i,o){return i=_a(4,n.children!==null?n.children:[],n.key,i),i.lanes=o,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var bs=[],ys=0,Gu=null,wu=0,Wa=[],qa=0,Ro=null,Gi=1,wi="";function To(n,i){bs[ys++]=wu,bs[ys++]=Gu,Gu=n,wu=i}function ZT(n,i,o){Wa[qa++]=Gi,Wa[qa++]=wi,Wa[qa++]=Ro,Ro=n;var r=Gi;n=wi;var f=32-ga(r)-1;r&=~(1<<f),o+=1;var m=32-ga(i)+f;if(30<m){var g=f-f%5;m=(r&(1<<g)-1).toString(32),r>>=g,f-=g,Gi=1<<32-ga(i)+f|o<<f|r,wi=m+n}else Gi=1<<m|o<<f|r,wi=n}function Gh(n){n.return!==null&&(To(n,1),ZT(n,1,0))}function wh(n){for(;n===Gu;)Gu=bs[--ys],bs[ys]=null,wu=bs[--ys],bs[ys]=null;for(;n===Ro;)Ro=Wa[--qa],Wa[qa]=null,wi=Wa[--qa],Wa[qa]=null,Gi=Wa[--qa],Wa[qa]=null}var ta=null,qt=null,dt=!1,So=null,gi=!1,Bh=Error(l(519));function go(n){var i=Error(l(418,""));throw ec(Va(i,n)),Bh}function QT(n){var i=n.stateNode,o=n.type,r=n.memoizedProps;switch(i[Vn]=n,i[fa]=r,o){case"dialog":$e("cancel",i),$e("close",i);break;case"iframe":case"object":case"embed":$e("load",i);break;case"video":case"audio":for(o=0;o<Cc.length;o++)$e(Cc[o],i);break;case"source":$e("error",i);break;case"img":case"image":case"link":$e("error",i),$e("load",i);break;case"details":$e("toggle",i);break;case"input":$e("invalid",i),fT(i,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),Nu(i);break;case"select":$e("invalid",i);break;case"textarea":$e("invalid",i),ET(i,r.value,r.defaultValue,r.children),Nu(i)}o=r.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||r.suppressHydrationWarning===!0||Ep(i.textContent,o)?(r.popover!=null&&($e("beforetoggle",i),$e("toggle",i)),r.onScroll!=null&&$e("scroll",i),r.onScrollEnd!=null&&$e("scrollend",i),r.onClick!=null&&(i.onclick=Sd),i=!0):i=!1,i||go(n)}function $T(n){for(ta=n.return;ta;)switch(ta.tag){case 5:case 13:gi=!1;return;case 27:case 3:gi=!0;return;default:ta=ta.return}}function $r(n){if(n!==ta)return!1;if(!dt)return $T(n),dt=!0,!1;var i=n.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||nA(n.type,n.memoizedProps)),o=!o),o&&qt&&go(n),$T(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(l(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8)if(o=n.data,o==="/$"){if(i===0){qt=ui(n.nextSibling);break e}i--}else o!=="$"&&o!=="$!"&&o!=="$?"||i++;n=n.nextSibling}qt=null}}else i===27?(i=qt,Ll(n.type)?(n=oA,oA=null,qt=n):qt=i):qt=ta?ui(n.stateNode.nextSibling):null;return!0}function Jr(){qt=ta=null,dt=!1}function JT(){var n=So;return n!==null&&(ma===null?ma=n:ma.push.apply(ma,n),So=null),n}function ec(n){So===null?So=[n]:So.push(n)}var Fh=X(null),po=null,Bi=null;function Rl(n,i,o){Y(Fh,i._currentValue),i._currentValue=o}function Fi(n){n._currentValue=Fh.current,Z(Fh)}function jh(n,i,o){for(;n!==null;){var r=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,r!==null&&(r.childLanes|=i)):r!==null&&(r.childLanes&i)!==i&&(r.childLanes|=i),n===o)break;n=n.return}}function zh(n,i,o,r){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var m=f.dependencies;if(m!==null){var g=f.child;m=m.firstContext;e:for(;m!==null;){var C=m;m=f;for(var x=0;x<i.length;x++)if(C.context===i[x]){m.lanes|=o,C=m.alternate,C!==null&&(C.lanes|=o),jh(m.return,o,n),r||(g=null);break e}m=C.next}}else if(f.tag===18){if(g=f.return,g===null)throw Error(l(341));g.lanes|=o,m=g.alternate,m!==null&&(m.lanes|=o),jh(g,o,n),g=null}else g=f.child;if(g!==null)g.return=f;else for(g=f;g!==null;){if(g===n){g=null;break}if(f=g.sibling,f!==null){f.return=g.return,g=f;break}g=g.return}f=g}}function tc(n,i,o,r){n=null;for(var f=i,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var g=f.alternate;if(g===null)throw Error(l(387));if(g=g.memoizedProps,g!==null){var C=f.type;pa(f.pendingProps.value,g.value)||(n!==null?n.push(C):n=[C])}}else if(f===Re.current){if(g=f.alternate,g===null)throw Error(l(387));g.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(Dc):n=[Dc])}f=f.return}n!==null&&zh(i,n,o,r),i.flags|=262144}function Bu(n){for(n=n.firstContext;n!==null;){if(!pa(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function _o(n){po=n,Bi=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Kn(n){return eS(po,n)}function Fu(n,i){return po===null&&_o(n),eS(n,i)}function eS(n,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},Bi===null){if(n===null)throw Error(l(308));Bi=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else Bi=Bi.next=i;return o}var Sb=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(o,r){n.push(r)}};this.abort=function(){i.aborted=!0,n.forEach(function(o){return o()})}},gb=e.unstable_scheduleCallback,pb=e.unstable_NormalPriority,Tn={$$typeof:P,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Yh(){return{controller:new Sb,data:new Map,refCount:0}}function nc(n){n.refCount--,n.refCount===0&&gb(pb,function(){n.controller.abort()})}var ac=null,Vh=0,vs=0,Ds=null;function _b(n,i){if(ac===null){var o=ac=[];Vh=0,vs=WE(),Ds={status:"pending",value:void 0,then:function(r){o.push(r)}}}return Vh++,i.then(tS,tS),i}function tS(){if(--Vh===0&&ac!==null){Ds!==null&&(Ds.status="fulfilled");var n=ac;ac=null,vs=0,Ds=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function Ib(n,i){var o=[],r={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return n.then(function(){r.status="fulfilled",r.value=i;for(var f=0;f<o.length;f++)(0,o[f])(i)},function(f){for(r.status="rejected",r.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),r}var nS=w.S;w.S=function(n,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&_b(n,i),nS!==null&&nS(n,i)};var Io=X(null);function Kh(){var n=Io.current;return n!==null?n:Ht.pooledCache}function ju(n,i){i===null?Y(Io,Io.current):Y(Io,i.pool)}function aS(){var n=Kh();return n===null?null:{parent:Tn._currentValue,pool:n}}var ic=Error(l(460)),iS=Error(l(474)),zu=Error(l(542)),Wh={then:function(){}};function lS(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Yu(){}function oS(n,i,o){switch(o=n[o],o===void 0?n.push(i):o!==i&&(i.then(Yu,Yu),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,rS(n),n;default:if(typeof i.status=="string")i.then(Yu,Yu);else{if(n=Ht,n!==null&&100<n.shellSuspendCounter)throw Error(l(482));n=i,n.status="pending",n.then(function(r){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=r}},function(r){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=r}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,rS(n),n}throw lc=i,ic}}var lc=null;function sS(){if(lc===null)throw Error(l(459));var n=lc;return lc=null,n}function rS(n){if(n===ic||n===zu)throw Error(l(483))}var Tl=!1;function qh(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Xh(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Sl(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function gl(n,i,o){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,(mt&2)!==0){var f=r.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),r.pending=i,i=ku(n),qT(n,null,o),i}return Uu(n,r,i,o),ku(n)}function oc(n,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var r=i.lanes;r&=n.pendingLanes,o|=r,i.lanes=o,tT(n,o)}}function Zh(n,i){var o=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,o===r)){var f=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var g={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?f=m=g:m=m.next=g,o=o.next}while(o!==null);m===null?f=m=i:m=m.next=i}else f=m=i;o={baseState:r.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:r.shared,callbacks:r.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=i:n.next=i,o.lastBaseUpdate=i}var Qh=!1;function sc(){if(Qh){var n=Ds;if(n!==null)throw n}}function rc(n,i,o,r){Qh=!1;var f=n.updateQueue;Tl=!1;var m=f.firstBaseUpdate,g=f.lastBaseUpdate,C=f.shared.pending;if(C!==null){f.shared.pending=null;var x=C,Q=x.next;x.next=null,g===null?m=Q:g.next=Q,g=x;var se=n.alternate;se!==null&&(se=se.updateQueue,C=se.lastBaseUpdate,C!==g&&(C===null?se.firstBaseUpdate=Q:C.next=Q,se.lastBaseUpdate=x))}if(m!==null){var fe=f.baseState;g=0,se=Q=x=null,C=m;do{var J=C.lane&-536870913,te=J!==C.lane;if(te?(lt&J)===J:(r&J)===J){J!==0&&J===vs&&(Qh=!0),se!==null&&(se=se.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var Pe=n,xe=C;J=i;var _t=o;switch(xe.tag){case 1:if(Pe=xe.payload,typeof Pe=="function"){fe=Pe.call(_t,fe,J);break e}fe=Pe;break e;case 3:Pe.flags=Pe.flags&-65537|128;case 0:if(Pe=xe.payload,J=typeof Pe=="function"?Pe.call(_t,fe,J):Pe,J==null)break e;fe=R({},fe,J);break e;case 2:Tl=!0}}J=C.callback,J!==null&&(n.flags|=64,te&&(n.flags|=8192),te=f.callbacks,te===null?f.callbacks=[J]:te.push(J))}else te={lane:J,tag:C.tag,payload:C.payload,callback:C.callback,next:null},se===null?(Q=se=te,x=fe):se=se.next=te,g|=J;if(C=C.next,C===null){if(C=f.shared.pending,C===null)break;te=C,C=te.next,te.next=null,f.lastBaseUpdate=te,f.shared.pending=null}}while(!0);se===null&&(x=fe),f.baseState=x,f.firstBaseUpdate=Q,f.lastBaseUpdate=se,m===null&&(f.shared.lanes=0),yl|=g,n.lanes=g,n.memoizedState=fe}}function cS(n,i){if(typeof n!="function")throw Error(l(191,n));n.call(i)}function uS(n,i){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)cS(o[n],i)}var Ms=X(null),Vu=X(0);function dS(n,i){n=qi,Y(Vu,n),Y(Ms,i),qi=n|i.baseLanes}function $h(){Y(Vu,qi),Y(Ms,Ms.current)}function Jh(){qi=Vu.current,Z(Ms),Z(Vu)}var pl=0,We=null,gt=null,fn=null,Ku=!1,Ls=!1,Co=!1,Wu=0,cc=0,Hs=null,Cb=0;function on(){throw Error(l(321))}function eE(n,i){if(i===null)return!1;for(var o=0;o<i.length&&o<n.length;o++)if(!pa(n[o],i[o]))return!1;return!0}function tE(n,i,o,r,f,m){return pl=m,We=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,w.H=n===null||n.memoizedState===null?qS:XS,Co=!1,m=o(r,f),Co=!1,Ls&&(m=hS(i,o,r,f)),fS(n),m}function fS(n){w.H=Ju;var i=gt!==null&&gt.next!==null;if(pl=0,fn=gt=We=null,Ku=!1,cc=0,Hs=null,i)throw Error(l(300));n===null||Cn||(n=n.dependencies,n!==null&&Bu(n)&&(Cn=!0))}function hS(n,i,o,r){We=n;var f=0;do{if(Ls&&(Hs=null),cc=0,Ls=!1,25<=f)throw Error(l(301));if(f+=1,fn=gt=null,n.updateQueue!=null){var m=n.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}w.H=Mb,m=i(o,r)}while(Ls);return m}function Nb(){var n=w.H,i=n.useState()[0];return i=typeof i.then=="function"?uc(i):i,n=n.useState()[0],(gt!==null?gt.memoizedState:null)!==n&&(We.flags|=1024),i}function nE(){var n=Wu!==0;return Wu=0,n}function aE(n,i,o){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~o}function iE(n){if(Ku){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Ku=!1}pl=0,fn=gt=We=null,Ls=!1,cc=Wu=0,Hs=null}function Ea(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fn===null?We.memoizedState=fn=n:fn=fn.next=n,fn}function hn(){if(gt===null){var n=We.alternate;n=n!==null?n.memoizedState:null}else n=gt.next;var i=fn===null?We.memoizedState:fn.next;if(i!==null)fn=i,gt=n;else{if(n===null)throw We.alternate===null?Error(l(467)):Error(l(310));gt=n,n={memoizedState:gt.memoizedState,baseState:gt.baseState,baseQueue:gt.baseQueue,queue:gt.queue,next:null},fn===null?We.memoizedState=fn=n:fn=fn.next=n}return fn}function lE(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function uc(n){var i=cc;return cc+=1,Hs===null&&(Hs=[]),n=oS(Hs,n,i),i=We,(fn===null?i.memoizedState:fn.next)===null&&(i=i.alternate,w.H=i===null||i.memoizedState===null?qS:XS),n}function qu(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return uc(n);if(n.$$typeof===P)return Kn(n)}throw Error(l(438,String(n)))}function oE(n){var i=null,o=We.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var r=We.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(i={data:r.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=lE(),We.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(n),r=0;r<n;r++)o[r]=Ee;return i.index++,o}function ji(n,i){return typeof i=="function"?i(n):i}function Xu(n){var i=hn();return sE(i,gt,n)}function sE(n,i,o){var r=n.queue;if(r===null)throw Error(l(311));r.lastRenderedReducer=o;var f=n.baseQueue,m=r.pending;if(m!==null){if(f!==null){var g=f.next;f.next=m.next,m.next=g}i.baseQueue=f=m,r.pending=null}if(m=n.baseState,f===null)n.memoizedState=m;else{i=f.next;var C=g=null,x=null,Q=i,se=!1;do{var fe=Q.lane&-536870913;if(fe!==Q.lane?(lt&fe)===fe:(pl&fe)===fe){var J=Q.revertLane;if(J===0)x!==null&&(x=x.next={lane:0,revertLane:0,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),fe===vs&&(se=!0);else if((pl&J)===J){Q=Q.next,J===vs&&(se=!0);continue}else fe={lane:0,revertLane:Q.revertLane,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},x===null?(C=x=fe,g=m):x=x.next=fe,We.lanes|=J,yl|=J;fe=Q.action,Co&&o(m,fe),m=Q.hasEagerState?Q.eagerState:o(m,fe)}else J={lane:fe,revertLane:Q.revertLane,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},x===null?(C=x=J,g=m):x=x.next=J,We.lanes|=fe,yl|=fe;Q=Q.next}while(Q!==null&&Q!==i);if(x===null?g=m:x.next=C,!pa(m,n.memoizedState)&&(Cn=!0,se&&(o=Ds,o!==null)))throw o;n.memoizedState=m,n.baseState=g,n.baseQueue=x,r.lastRenderedState=m}return f===null&&(r.lanes=0),[n.memoizedState,r.dispatch]}function rE(n){var i=hn(),o=i.queue;if(o===null)throw Error(l(311));o.lastRenderedReducer=n;var r=o.dispatch,f=o.pending,m=i.memoizedState;if(f!==null){o.pending=null;var g=f=f.next;do m=n(m,g.action),g=g.next;while(g!==f);pa(m,i.memoizedState)||(Cn=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),o.lastRenderedState=m}return[m,r]}function ES(n,i,o){var r=We,f=hn(),m=dt;if(m){if(o===void 0)throw Error(l(407));o=o()}else o=i();var g=!pa((gt||f).memoizedState,o);g&&(f.memoizedState=o,Cn=!0),f=f.queue;var C=RS.bind(null,r,f,n);if(dc(2048,8,C,[n]),f.getSnapshot!==i||g||fn!==null&&fn.memoizedState.tag&1){if(r.flags|=2048,xs(9,Zu(),mS.bind(null,r,f,o,i),null),Ht===null)throw Error(l(349));m||(pl&124)!==0||AS(r,i,o)}return o}function AS(n,i,o){n.flags|=16384,n={getSnapshot:i,value:o},i=We.updateQueue,i===null?(i=lE(),We.updateQueue=i,i.stores=[n]):(o=i.stores,o===null?i.stores=[n]:o.push(n))}function mS(n,i,o,r){i.value=o,i.getSnapshot=r,TS(i)&&SS(n)}function RS(n,i,o){return o(function(){TS(i)&&SS(n)})}function TS(n){var i=n.getSnapshot;n=n.value;try{var o=i();return!pa(n,o)}catch{return!0}}function SS(n){var i=Ns(n,2);i!==null&&ba(i,n,2)}function cE(n){var i=Ea();if(typeof n=="function"){var o=n;if(n=o(),Co){El(!0);try{o()}finally{El(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ji,lastRenderedState:n},i}function gS(n,i,o,r){return n.baseState=o,sE(n,gt,typeof r=="function"?r:ji)}function Ob(n,i,o,r,f){if($u(n))throw Error(l(485));if(n=i.action,n!==null){var m={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(g){m.listeners.push(g)}};w.T!==null?o(!0):m.isTransition=!1,r(m),o=i.pending,o===null?(m.next=i.pending=m,pS(i,m)):(m.next=o.next,i.pending=o.next=m)}}function pS(n,i){var o=i.action,r=i.payload,f=n.state;if(i.isTransition){var m=w.T,g={};w.T=g;try{var C=o(f,r),x=w.S;x!==null&&x(g,C),_S(n,i,C)}catch(Q){uE(n,i,Q)}finally{w.T=m}}else try{m=o(f,r),_S(n,i,m)}catch(Q){uE(n,i,Q)}}function _S(n,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(r){IS(n,i,r)},function(r){return uE(n,i,r)}):IS(n,i,o)}function IS(n,i,o){i.status="fulfilled",i.value=o,CS(i),n.state=o,i=n.pending,i!==null&&(o=i.next,o===i?n.pending=null:(o=o.next,i.next=o,pS(n,o)))}function uE(n,i,o){var r=n.pending;if(n.pending=null,r!==null){r=r.next;do i.status="rejected",i.reason=o,CS(i),i=i.next;while(i!==r)}n.action=null}function CS(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function NS(n,i){return i}function OS(n,i){if(dt){var o=Ht.formState;if(o!==null){e:{var r=We;if(dt){if(qt){t:{for(var f=qt,m=gi;f.nodeType!==8;){if(!m){f=null;break t}if(f=ui(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){qt=ui(f.nextSibling),r=f.data==="F!";break e}}go(r)}r=!1}r&&(i=o[0])}}return o=Ea(),o.memoizedState=o.baseState=i,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:NS,lastRenderedState:i},o.queue=r,o=VS.bind(null,We,r),r.dispatch=o,r=cE(!1),m=AE.bind(null,We,!1,r.queue),r=Ea(),f={state:i,dispatch:null,action:n,pending:null},r.queue=f,o=Ob.bind(null,We,f,m,o),f.dispatch=o,r.memoizedState=n,[i,o,!1]}function bS(n){var i=hn();return yS(i,gt,n)}function yS(n,i,o){if(i=sE(n,i,NS)[0],n=Xu(ji)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var r=uc(i)}catch(g){throw g===ic?zu:g}else r=i;i=hn();var f=i.queue,m=f.dispatch;return o!==i.memoizedState&&(We.flags|=2048,xs(9,Zu(),bb.bind(null,f,o),null)),[r,m,n]}function bb(n,i){n.action=i}function vS(n){var i=hn(),o=gt;if(o!==null)return yS(i,o,n);hn(),i=i.memoizedState,o=hn();var r=o.queue.dispatch;return o.memoizedState=n,[i,r,!1]}function xs(n,i,o,r){return n={tag:n,create:o,deps:r,inst:i,next:null},i=We.updateQueue,i===null&&(i=lE(),We.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=n.next=n:(r=o.next,o.next=n,n.next=r,i.lastEffect=n),n}function Zu(){return{destroy:void 0,resource:void 0}}function DS(){return hn().memoizedState}function Qu(n,i,o,r){var f=Ea();r=r===void 0?null:r,We.flags|=n,f.memoizedState=xs(1|i,Zu(),o,r)}function dc(n,i,o,r){var f=hn();r=r===void 0?null:r;var m=f.memoizedState.inst;gt!==null&&r!==null&&eE(r,gt.memoizedState.deps)?f.memoizedState=xs(i,m,o,r):(We.flags|=n,f.memoizedState=xs(1|i,m,o,r))}function MS(n,i){Qu(8390656,8,n,i)}function LS(n,i){dc(2048,8,n,i)}function HS(n,i){return dc(4,2,n,i)}function xS(n,i){return dc(4,4,n,i)}function US(n,i){if(typeof i=="function"){n=n();var o=i(n);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function kS(n,i,o){o=o!=null?o.concat([n]):null,dc(4,4,US.bind(null,i,n),o)}function dE(){}function PS(n,i){var o=hn();i=i===void 0?null:i;var r=o.memoizedState;return i!==null&&eE(i,r[1])?r[0]:(o.memoizedState=[n,i],n)}function GS(n,i){var o=hn();i=i===void 0?null:i;var r=o.memoizedState;if(i!==null&&eE(i,r[1]))return r[0];if(r=n(),Co){El(!0);try{n()}finally{El(!1)}}return o.memoizedState=[r,i],r}function fE(n,i,o){return o===void 0||(pl&1073741824)!==0?n.memoizedState=i:(n.memoizedState=o,n=Fg(),We.lanes|=n,yl|=n,o)}function wS(n,i,o,r){return pa(o,i)?o:Ms.current!==null?(n=fE(n,o,r),pa(n,i)||(Cn=!0),n):(pl&42)===0?(Cn=!0,n.memoizedState=o):(n=Fg(),We.lanes|=n,yl|=n,i)}function BS(n,i,o,r,f){var m=M.p;M.p=m!==0&&8>m?m:8;var g=w.T,C={};w.T=C,AE(n,!1,i,o);try{var x=f(),Q=w.S;if(Q!==null&&Q(C,x),x!==null&&typeof x=="object"&&typeof x.then=="function"){var se=Ib(x,r);fc(n,i,se,Oa(n))}else fc(n,i,r,Oa(n))}catch(fe){fc(n,i,{then:function(){},status:"rejected",reason:fe},Oa())}finally{M.p=m,w.T=g}}function yb(){}function hE(n,i,o,r){if(n.tag!==5)throw Error(l(476));var f=FS(n).queue;BS(n,f,i,W,o===null?yb:function(){return jS(n),o(r)})}function FS(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:W,baseState:W,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ji,lastRenderedState:W},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ji,lastRenderedState:o},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function jS(n){var i=FS(n).next.queue;fc(n,i,{},Oa())}function EE(){return Kn(Dc)}function zS(){return hn().memoizedState}function YS(){return hn().memoizedState}function vb(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var o=Oa();n=Sl(o);var r=gl(i,n,o);r!==null&&(ba(r,i,o),oc(r,i,o)),i={cache:Yh()},n.payload=i;return}i=i.return}}function Db(n,i,o){var r=Oa();o={lane:r,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},$u(n)?KS(i,o):(o=xh(n,i,o,r),o!==null&&(ba(o,n,r),WS(o,i,r)))}function VS(n,i,o){var r=Oa();fc(n,i,o,r)}function fc(n,i,o,r){var f={lane:r,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if($u(n))KS(i,f);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var g=i.lastRenderedState,C=m(g,o);if(f.hasEagerState=!0,f.eagerState=C,pa(C,g))return Uu(n,i,f,0),Ht===null&&xu(),!1}catch{}finally{}if(o=xh(n,i,f,r),o!==null)return ba(o,n,r),WS(o,i,r),!0}return!1}function AE(n,i,o,r){if(r={lane:2,revertLane:WE(),action:r,hasEagerState:!1,eagerState:null,next:null},$u(n)){if(i)throw Error(l(479))}else i=xh(n,o,r,2),i!==null&&ba(i,n,2)}function $u(n){var i=n.alternate;return n===We||i!==null&&i===We}function KS(n,i){Ls=Ku=!0;var o=n.pending;o===null?i.next=i:(i.next=o.next,o.next=i),n.pending=i}function WS(n,i,o){if((o&4194048)!==0){var r=i.lanes;r&=n.pendingLanes,o|=r,i.lanes=o,tT(n,o)}}var Ju={readContext:Kn,use:qu,useCallback:on,useContext:on,useEffect:on,useImperativeHandle:on,useLayoutEffect:on,useInsertionEffect:on,useMemo:on,useReducer:on,useRef:on,useState:on,useDebugValue:on,useDeferredValue:on,useTransition:on,useSyncExternalStore:on,useId:on,useHostTransitionStatus:on,useFormState:on,useActionState:on,useOptimistic:on,useMemoCache:on,useCacheRefresh:on},qS={readContext:Kn,use:qu,useCallback:function(n,i){return Ea().memoizedState=[n,i===void 0?null:i],n},useContext:Kn,useEffect:MS,useImperativeHandle:function(n,i,o){o=o!=null?o.concat([n]):null,Qu(4194308,4,US.bind(null,i,n),o)},useLayoutEffect:function(n,i){return Qu(4194308,4,n,i)},useInsertionEffect:function(n,i){Qu(4,2,n,i)},useMemo:function(n,i){var o=Ea();i=i===void 0?null:i;var r=n();if(Co){El(!0);try{n()}finally{El(!1)}}return o.memoizedState=[r,i],r},useReducer:function(n,i,o){var r=Ea();if(o!==void 0){var f=o(i);if(Co){El(!0);try{o(i)}finally{El(!1)}}}else f=i;return r.memoizedState=r.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},r.queue=n,n=n.dispatch=Db.bind(null,We,n),[r.memoizedState,n]},useRef:function(n){var i=Ea();return n={current:n},i.memoizedState=n},useState:function(n){n=cE(n);var i=n.queue,o=VS.bind(null,We,i);return i.dispatch=o,[n.memoizedState,o]},useDebugValue:dE,useDeferredValue:function(n,i){var o=Ea();return fE(o,n,i)},useTransition:function(){var n=cE(!1);return n=BS.bind(null,We,n.queue,!0,!1),Ea().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,o){var r=We,f=Ea();if(dt){if(o===void 0)throw Error(l(407));o=o()}else{if(o=i(),Ht===null)throw Error(l(349));(lt&124)!==0||AS(r,i,o)}f.memoizedState=o;var m={value:o,getSnapshot:i};return f.queue=m,MS(RS.bind(null,r,m,n),[n]),r.flags|=2048,xs(9,Zu(),mS.bind(null,r,m,o,i),null),o},useId:function(){var n=Ea(),i=Ht.identifierPrefix;if(dt){var o=wi,r=Gi;o=(r&~(1<<32-ga(r)-1)).toString(32)+o,i="«"+i+"R"+o,o=Wu++,0<o&&(i+="H"+o.toString(32)),i+="»"}else o=Cb++,i="«"+i+"r"+o.toString(32)+"»";return n.memoizedState=i},useHostTransitionStatus:EE,useFormState:OS,useActionState:OS,useOptimistic:function(n){var i=Ea();i.memoizedState=i.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=AE.bind(null,We,!0,o),o.dispatch=i,[n,i]},useMemoCache:oE,useCacheRefresh:function(){return Ea().memoizedState=vb.bind(null,We)}},XS={readContext:Kn,use:qu,useCallback:PS,useContext:Kn,useEffect:LS,useImperativeHandle:kS,useInsertionEffect:HS,useLayoutEffect:xS,useMemo:GS,useReducer:Xu,useRef:DS,useState:function(){return Xu(ji)},useDebugValue:dE,useDeferredValue:function(n,i){var o=hn();return wS(o,gt.memoizedState,n,i)},useTransition:function(){var n=Xu(ji)[0],i=hn().memoizedState;return[typeof n=="boolean"?n:uc(n),i]},useSyncExternalStore:ES,useId:zS,useHostTransitionStatus:EE,useFormState:bS,useActionState:bS,useOptimistic:function(n,i){var o=hn();return gS(o,gt,n,i)},useMemoCache:oE,useCacheRefresh:YS},Mb={readContext:Kn,use:qu,useCallback:PS,useContext:Kn,useEffect:LS,useImperativeHandle:kS,useInsertionEffect:HS,useLayoutEffect:xS,useMemo:GS,useReducer:rE,useRef:DS,useState:function(){return rE(ji)},useDebugValue:dE,useDeferredValue:function(n,i){var o=hn();return gt===null?fE(o,n,i):wS(o,gt.memoizedState,n,i)},useTransition:function(){var n=rE(ji)[0],i=hn().memoizedState;return[typeof n=="boolean"?n:uc(n),i]},useSyncExternalStore:ES,useId:zS,useHostTransitionStatus:EE,useFormState:vS,useActionState:vS,useOptimistic:function(n,i){var o=hn();return gt!==null?gS(o,gt,n,i):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:oE,useCacheRefresh:YS},Us=null,hc=0;function ed(n){var i=hc;return hc+=1,Us===null&&(Us=[]),oS(Us,n,i)}function Ec(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function td(n,i){throw i.$$typeof===T?Error(l(525)):(n=Object.prototype.toString.call(i),Error(l(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function ZS(n){var i=n._init;return i(n._payload)}function QS(n){function i(K,B){if(n){var q=K.deletions;q===null?(K.deletions=[B],K.flags|=16):q.push(B)}}function o(K,B){if(!n)return null;for(;B!==null;)i(K,B),B=B.sibling;return null}function r(K){for(var B=new Map;K!==null;)K.key!==null?B.set(K.key,K):B.set(K.index,K),K=K.sibling;return B}function f(K,B){return K=Pi(K,B),K.index=0,K.sibling=null,K}function m(K,B,q){return K.index=q,n?(q=K.alternate,q!==null?(q=q.index,q<B?(K.flags|=67108866,B):q):(K.flags|=67108866,B)):(K.flags|=1048576,B)}function g(K){return n&&K.alternate===null&&(K.flags|=67108866),K}function C(K,B,q,ce){return B===null||B.tag!==6?(B=kh(q,K.mode,ce),B.return=K,B):(B=f(B,q),B.return=K,B)}function x(K,B,q,ce){var Me=q.type;return Me===I?se(K,B,q.props.children,ce,q.key):B!==null&&(B.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===ue&&ZS(Me)===B.type)?(B=f(B,q.props),Ec(B,q),B.return=K,B):(B=Pu(q.type,q.key,q.props,null,K.mode,ce),Ec(B,q),B.return=K,B)}function Q(K,B,q,ce){return B===null||B.tag!==4||B.stateNode.containerInfo!==q.containerInfo||B.stateNode.implementation!==q.implementation?(B=Ph(q,K.mode,ce),B.return=K,B):(B=f(B,q.children||[]),B.return=K,B)}function se(K,B,q,ce,Me){return B===null||B.tag!==7?(B=mo(q,K.mode,ce,Me),B.return=K,B):(B=f(B,q),B.return=K,B)}function fe(K,B,q){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=kh(""+B,K.mode,q),B.return=K,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case S:return q=Pu(B.type,B.key,B.props,null,K.mode,q),Ec(q,B),q.return=K,q;case p:return B=Ph(B,K.mode,q),B.return=K,B;case ue:var ce=B._init;return B=ce(B._payload),fe(K,B,q)}if(ae(B)||Te(B))return B=mo(B,K.mode,q,null),B.return=K,B;if(typeof B.then=="function")return fe(K,ed(B),q);if(B.$$typeof===P)return fe(K,Fu(K,B),q);td(K,B)}return null}function J(K,B,q,ce){var Me=B!==null?B.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return Me!==null?null:C(K,B,""+q,ce);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case S:return q.key===Me?x(K,B,q,ce):null;case p:return q.key===Me?Q(K,B,q,ce):null;case ue:return Me=q._init,q=Me(q._payload),J(K,B,q,ce)}if(ae(q)||Te(q))return Me!==null?null:se(K,B,q,ce,null);if(typeof q.then=="function")return J(K,B,ed(q),ce);if(q.$$typeof===P)return J(K,B,Fu(K,q),ce);td(K,q)}return null}function te(K,B,q,ce,Me){if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return K=K.get(q)||null,C(B,K,""+ce,Me);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case S:return K=K.get(ce.key===null?q:ce.key)||null,x(B,K,ce,Me);case p:return K=K.get(ce.key===null?q:ce.key)||null,Q(B,K,ce,Me);case ue:var qe=ce._init;return ce=qe(ce._payload),te(K,B,q,ce,Me)}if(ae(ce)||Te(ce))return K=K.get(q)||null,se(B,K,ce,Me,null);if(typeof ce.then=="function")return te(K,B,q,ed(ce),Me);if(ce.$$typeof===P)return te(K,B,q,Fu(B,ce),Me);td(B,ce)}return null}function Pe(K,B,q,ce){for(var Me=null,qe=null,Le=B,Ue=B=0,On=null;Le!==null&&Ue<q.length;Ue++){Le.index>Ue?(On=Le,Le=null):On=Le.sibling;var ct=J(K,Le,q[Ue],ce);if(ct===null){Le===null&&(Le=On);break}n&&Le&&ct.alternate===null&&i(K,Le),B=m(ct,B,Ue),qe===null?Me=ct:qe.sibling=ct,qe=ct,Le=On}if(Ue===q.length)return o(K,Le),dt&&To(K,Ue),Me;if(Le===null){for(;Ue<q.length;Ue++)Le=fe(K,q[Ue],ce),Le!==null&&(B=m(Le,B,Ue),qe===null?Me=Le:qe.sibling=Le,qe=Le);return dt&&To(K,Ue),Me}for(Le=r(Le);Ue<q.length;Ue++)On=te(Le,K,Ue,q[Ue],ce),On!==null&&(n&&On.alternate!==null&&Le.delete(On.key===null?Ue:On.key),B=m(On,B,Ue),qe===null?Me=On:qe.sibling=On,qe=On);return n&&Le.forEach(function(Pl){return i(K,Pl)}),dt&&To(K,Ue),Me}function xe(K,B,q,ce){if(q==null)throw Error(l(151));for(var Me=null,qe=null,Le=B,Ue=B=0,On=null,ct=q.next();Le!==null&&!ct.done;Ue++,ct=q.next()){Le.index>Ue?(On=Le,Le=null):On=Le.sibling;var Pl=J(K,Le,ct.value,ce);if(Pl===null){Le===null&&(Le=On);break}n&&Le&&Pl.alternate===null&&i(K,Le),B=m(Pl,B,Ue),qe===null?Me=Pl:qe.sibling=Pl,qe=Pl,Le=On}if(ct.done)return o(K,Le),dt&&To(K,Ue),Me;if(Le===null){for(;!ct.done;Ue++,ct=q.next())ct=fe(K,ct.value,ce),ct!==null&&(B=m(ct,B,Ue),qe===null?Me=ct:qe.sibling=ct,qe=ct);return dt&&To(K,Ue),Me}for(Le=r(Le);!ct.done;Ue++,ct=q.next())ct=te(Le,K,Ue,ct.value,ce),ct!==null&&(n&&ct.alternate!==null&&Le.delete(ct.key===null?Ue:ct.key),B=m(ct,B,Ue),qe===null?Me=ct:qe.sibling=ct,qe=ct);return n&&Le.forEach(function(Ly){return i(K,Ly)}),dt&&To(K,Ue),Me}function _t(K,B,q,ce){if(typeof q=="object"&&q!==null&&q.type===I&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case S:e:{for(var Me=q.key;B!==null;){if(B.key===Me){if(Me=q.type,Me===I){if(B.tag===7){o(K,B.sibling),ce=f(B,q.props.children),ce.return=K,K=ce;break e}}else if(B.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===ue&&ZS(Me)===B.type){o(K,B.sibling),ce=f(B,q.props),Ec(ce,q),ce.return=K,K=ce;break e}o(K,B);break}else i(K,B);B=B.sibling}q.type===I?(ce=mo(q.props.children,K.mode,ce,q.key),ce.return=K,K=ce):(ce=Pu(q.type,q.key,q.props,null,K.mode,ce),Ec(ce,q),ce.return=K,K=ce)}return g(K);case p:e:{for(Me=q.key;B!==null;){if(B.key===Me)if(B.tag===4&&B.stateNode.containerInfo===q.containerInfo&&B.stateNode.implementation===q.implementation){o(K,B.sibling),ce=f(B,q.children||[]),ce.return=K,K=ce;break e}else{o(K,B);break}else i(K,B);B=B.sibling}ce=Ph(q,K.mode,ce),ce.return=K,K=ce}return g(K);case ue:return Me=q._init,q=Me(q._payload),_t(K,B,q,ce)}if(ae(q))return Pe(K,B,q,ce);if(Te(q)){if(Me=Te(q),typeof Me!="function")throw Error(l(150));return q=Me.call(q),xe(K,B,q,ce)}if(typeof q.then=="function")return _t(K,B,ed(q),ce);if(q.$$typeof===P)return _t(K,B,Fu(K,q),ce);td(K,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,B!==null&&B.tag===6?(o(K,B.sibling),ce=f(B,q),ce.return=K,K=ce):(o(K,B),ce=kh(q,K.mode,ce),ce.return=K,K=ce),g(K)):o(K,B)}return function(K,B,q,ce){try{hc=0;var Me=_t(K,B,q,ce);return Us=null,Me}catch(Le){if(Le===ic||Le===zu)throw Le;var qe=_a(29,Le,null,K.mode);return qe.lanes=ce,qe.return=K,qe}finally{}}}var ks=QS(!0),$S=QS(!1),Xa=X(null),pi=null;function _l(n){var i=n.alternate;Y(Sn,Sn.current&1),Y(Xa,n),pi===null&&(i===null||Ms.current!==null||i.memoizedState!==null)&&(pi=n)}function JS(n){if(n.tag===22){if(Y(Sn,Sn.current),Y(Xa,n),pi===null){var i=n.alternate;i!==null&&i.memoizedState!==null&&(pi=n)}}else Il()}function Il(){Y(Sn,Sn.current),Y(Xa,Xa.current)}function zi(n){Z(Xa),pi===n&&(pi=null),Z(Sn)}var Sn=X(0);function nd(n){for(var i=n;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||lA(o)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function mE(n,i,o,r){i=n.memoizedState,o=o(r,i),o=o==null?i:R({},i,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var RE={enqueueSetState:function(n,i,o){n=n._reactInternals;var r=Oa(),f=Sl(r);f.payload=i,o!=null&&(f.callback=o),i=gl(n,f,r),i!==null&&(ba(i,n,r),oc(i,n,r))},enqueueReplaceState:function(n,i,o){n=n._reactInternals;var r=Oa(),f=Sl(r);f.tag=1,f.payload=i,o!=null&&(f.callback=o),i=gl(n,f,r),i!==null&&(ba(i,n,r),oc(i,n,r))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var o=Oa(),r=Sl(o);r.tag=2,i!=null&&(r.callback=i),i=gl(n,r,o),i!==null&&(ba(i,n,o),oc(i,n,o))}};function eg(n,i,o,r,f,m,g){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,m,g):i.prototype&&i.prototype.isPureReactComponent?!Zr(o,r)||!Zr(f,m):!0}function tg(n,i,o,r){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,r),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,r),i.state!==n&&RE.enqueueReplaceState(i,i.state,null)}function No(n,i){var o=i;if("ref"in i){o={};for(var r in i)r!=="ref"&&(o[r]=i[r])}if(n=n.defaultProps){o===i&&(o=R({},o));for(var f in n)o[f]===void 0&&(o[f]=n[f])}return o}var ad=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function ng(n){ad(n)}function ag(n){console.error(n)}function ig(n){ad(n)}function id(n,i){try{var o=n.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(r){setTimeout(function(){throw r})}}function lg(n,i,o){try{var r=n.onCaughtError;r(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function TE(n,i,o){return o=Sl(o),o.tag=3,o.payload={element:null},o.callback=function(){id(n,i)},o}function og(n){return n=Sl(n),n.tag=3,n}function sg(n,i,o,r){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var m=r.value;n.payload=function(){return f(m)},n.callback=function(){lg(i,o,r)}}var g=o.stateNode;g!==null&&typeof g.componentDidCatch=="function"&&(n.callback=function(){lg(i,o,r),typeof f!="function"&&(vl===null?vl=new Set([this]):vl.add(this));var C=r.stack;this.componentDidCatch(r.value,{componentStack:C!==null?C:""})})}function Lb(n,i,o,r,f){if(o.flags|=32768,r!==null&&typeof r=="object"&&typeof r.then=="function"){if(i=o.alternate,i!==null&&tc(i,o,f,!0),o=Xa.current,o!==null){switch(o.tag){case 13:return pi===null?jE():o.alternate===null&&Xt===0&&(Xt=3),o.flags&=-257,o.flags|=65536,o.lanes=f,r===Wh?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([r]):i.add(r),YE(n,r,f)),!1;case 22:return o.flags|=65536,r===Wh?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([r])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([r]):o.add(r)),YE(n,r,f)),!1}throw Error(l(435,o.tag))}return YE(n,r,f),jE(),!1}if(dt)return i=Xa.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,r!==Bh&&(n=Error(l(422),{cause:r}),ec(Va(n,o)))):(r!==Bh&&(i=Error(l(423),{cause:r}),ec(Va(i,o))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,r=Va(r,o),f=TE(n.stateNode,r,f),Zh(n,f),Xt!==4&&(Xt=2)),!1;var m=Error(l(520),{cause:r});if(m=Va(m,o),pc===null?pc=[m]:pc.push(m),Xt!==4&&(Xt=2),i===null)return!0;r=Va(r,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,n=f&-f,o.lanes|=n,n=TE(o.stateNode,r,n),Zh(o,n),!1;case 1:if(i=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(vl===null||!vl.has(m))))return o.flags|=65536,f&=-f,o.lanes|=f,f=og(f),sg(f,n,o,r),Zh(o,f),!1}o=o.return}while(o!==null);return!1}var rg=Error(l(461)),Cn=!1;function xn(n,i,o,r){i.child=n===null?$S(i,null,o,r):ks(i,n.child,o,r)}function cg(n,i,o,r,f){o=o.render;var m=i.ref;if("ref"in r){var g={};for(var C in r)C!=="ref"&&(g[C]=r[C])}else g=r;return _o(i),r=tE(n,i,o,g,m,f),C=nE(),n!==null&&!Cn?(aE(n,i,f),Yi(n,i,f)):(dt&&C&&Gh(i),i.flags|=1,xn(n,i,r,f),i.child)}function ug(n,i,o,r,f){if(n===null){var m=o.type;return typeof m=="function"&&!Uh(m)&&m.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=m,dg(n,i,m,r,f)):(n=Pu(o.type,null,r,i,i.mode,f),n.ref=i.ref,n.return=i,i.child=n)}if(m=n.child,!OE(n,f)){var g=m.memoizedProps;if(o=o.compare,o=o!==null?o:Zr,o(g,r)&&n.ref===i.ref)return Yi(n,i,f)}return i.flags|=1,n=Pi(m,r),n.ref=i.ref,n.return=i,i.child=n}function dg(n,i,o,r,f){if(n!==null){var m=n.memoizedProps;if(Zr(m,r)&&n.ref===i.ref)if(Cn=!1,i.pendingProps=r=m,OE(n,f))(n.flags&131072)!==0&&(Cn=!0);else return i.lanes=n.lanes,Yi(n,i,f)}return SE(n,i,o,r,f)}function fg(n,i,o){var r=i.pendingProps,f=r.children,m=n!==null?n.memoizedState:null;if(r.mode==="hidden"){if((i.flags&128)!==0){if(r=m!==null?m.baseLanes|o:o,n!==null){for(f=i.child=n.child,m=0;f!==null;)m=m|f.lanes|f.childLanes,f=f.sibling;i.childLanes=m&~r}else i.childLanes=0,i.child=null;return hg(n,i,r,o)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&ju(i,m!==null?m.cachePool:null),m!==null?dS(i,m):$h(),JS(i);else return i.lanes=i.childLanes=536870912,hg(n,i,m!==null?m.baseLanes|o:o,o)}else m!==null?(ju(i,m.cachePool),dS(i,m),Il(),i.memoizedState=null):(n!==null&&ju(i,null),$h(),Il());return xn(n,i,f,o),i.child}function hg(n,i,o,r){var f=Kh();return f=f===null?null:{parent:Tn._currentValue,pool:f},i.memoizedState={baseLanes:o,cachePool:f},n!==null&&ju(i,null),$h(),JS(i),n!==null&&tc(n,i,r,!0),null}function ld(n,i){var o=i.ref;if(o===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(l(284));(n===null||n.ref!==o)&&(i.flags|=4194816)}}function SE(n,i,o,r,f){return _o(i),o=tE(n,i,o,r,void 0,f),r=nE(),n!==null&&!Cn?(aE(n,i,f),Yi(n,i,f)):(dt&&r&&Gh(i),i.flags|=1,xn(n,i,o,f),i.child)}function Eg(n,i,o,r,f,m){return _o(i),i.updateQueue=null,o=hS(i,r,o,f),fS(n),r=nE(),n!==null&&!Cn?(aE(n,i,m),Yi(n,i,m)):(dt&&r&&Gh(i),i.flags|=1,xn(n,i,o,m),i.child)}function Ag(n,i,o,r,f){if(_o(i),i.stateNode===null){var m=Os,g=o.contextType;typeof g=="object"&&g!==null&&(m=Kn(g)),m=new o(r,m),i.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=RE,i.stateNode=m,m._reactInternals=i,m=i.stateNode,m.props=r,m.state=i.memoizedState,m.refs={},qh(i),g=o.contextType,m.context=typeof g=="object"&&g!==null?Kn(g):Os,m.state=i.memoizedState,g=o.getDerivedStateFromProps,typeof g=="function"&&(mE(i,o,g,r),m.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(g=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),g!==m.state&&RE.enqueueReplaceState(m,m.state,null),rc(i,r,m,f),sc(),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308),r=!0}else if(n===null){m=i.stateNode;var C=i.memoizedProps,x=No(o,C);m.props=x;var Q=m.context,se=o.contextType;g=Os,typeof se=="object"&&se!==null&&(g=Kn(se));var fe=o.getDerivedStateFromProps;se=typeof fe=="function"||typeof m.getSnapshotBeforeUpdate=="function",C=i.pendingProps!==C,se||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(C||Q!==g)&&tg(i,m,r,g),Tl=!1;var J=i.memoizedState;m.state=J,rc(i,r,m,f),sc(),Q=i.memoizedState,C||J!==Q||Tl?(typeof fe=="function"&&(mE(i,o,fe,r),Q=i.memoizedState),(x=Tl||eg(i,o,x,r,J,Q,g))?(se||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(i.flags|=4194308)):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=r,i.memoizedState=Q),m.props=r,m.state=Q,m.context=g,r=x):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),r=!1)}else{m=i.stateNode,Xh(n,i),g=i.memoizedProps,se=No(o,g),m.props=se,fe=i.pendingProps,J=m.context,Q=o.contextType,x=Os,typeof Q=="object"&&Q!==null&&(x=Kn(Q)),C=o.getDerivedStateFromProps,(Q=typeof C=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(g!==fe||J!==x)&&tg(i,m,r,x),Tl=!1,J=i.memoizedState,m.state=J,rc(i,r,m,f),sc();var te=i.memoizedState;g!==fe||J!==te||Tl||n!==null&&n.dependencies!==null&&Bu(n.dependencies)?(typeof C=="function"&&(mE(i,o,C,r),te=i.memoizedState),(se=Tl||eg(i,o,se,r,J,te,x)||n!==null&&n.dependencies!==null&&Bu(n.dependencies))?(Q||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(r,te,x),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(r,te,x)),typeof m.componentDidUpdate=="function"&&(i.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof m.componentDidUpdate!="function"||g===n.memoizedProps&&J===n.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||g===n.memoizedProps&&J===n.memoizedState||(i.flags|=1024),i.memoizedProps=r,i.memoizedState=te),m.props=r,m.state=te,m.context=x,r=se):(typeof m.componentDidUpdate!="function"||g===n.memoizedProps&&J===n.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||g===n.memoizedProps&&J===n.memoizedState||(i.flags|=1024),r=!1)}return m=r,ld(n,i),r=(i.flags&128)!==0,m||r?(m=i.stateNode,o=r&&typeof o.getDerivedStateFromError!="function"?null:m.render(),i.flags|=1,n!==null&&r?(i.child=ks(i,n.child,null,f),i.child=ks(i,null,o,f)):xn(n,i,o,f),i.memoizedState=m.state,n=i.child):n=Yi(n,i,f),n}function mg(n,i,o,r){return Jr(),i.flags|=256,xn(n,i,o,r),i.child}var gE={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function pE(n){return{baseLanes:n,cachePool:aS()}}function _E(n,i,o){return n=n!==null?n.childLanes&~o:0,i&&(n|=Za),n}function Rg(n,i,o){var r=i.pendingProps,f=!1,m=(i.flags&128)!==0,g;if((g=m)||(g=n!==null&&n.memoizedState===null?!1:(Sn.current&2)!==0),g&&(f=!0,i.flags&=-129),g=(i.flags&32)!==0,i.flags&=-33,n===null){if(dt){if(f?_l(i):Il(),dt){var C=qt,x;if(x=C){e:{for(x=C,C=gi;x.nodeType!==8;){if(!C){C=null;break e}if(x=ui(x.nextSibling),x===null){C=null;break e}}C=x}C!==null?(i.memoizedState={dehydrated:C,treeContext:Ro!==null?{id:Gi,overflow:wi}:null,retryLane:536870912,hydrationErrors:null},x=_a(18,null,null,0),x.stateNode=C,x.return=i,i.child=x,ta=i,qt=null,x=!0):x=!1}x||go(i)}if(C=i.memoizedState,C!==null&&(C=C.dehydrated,C!==null))return lA(C)?i.lanes=32:i.lanes=536870912,null;zi(i)}return C=r.children,r=r.fallback,f?(Il(),f=i.mode,C=od({mode:"hidden",children:C},f),r=mo(r,f,o,null),C.return=i,r.return=i,C.sibling=r,i.child=C,f=i.child,f.memoizedState=pE(o),f.childLanes=_E(n,g,o),i.memoizedState=gE,r):(_l(i),IE(i,C))}if(x=n.memoizedState,x!==null&&(C=x.dehydrated,C!==null)){if(m)i.flags&256?(_l(i),i.flags&=-257,i=CE(n,i,o)):i.memoizedState!==null?(Il(),i.child=n.child,i.flags|=128,i=null):(Il(),f=r.fallback,C=i.mode,r=od({mode:"visible",children:r.children},C),f=mo(f,C,o,null),f.flags|=2,r.return=i,f.return=i,r.sibling=f,i.child=r,ks(i,n.child,null,o),r=i.child,r.memoizedState=pE(o),r.childLanes=_E(n,g,o),i.memoizedState=gE,i=f);else if(_l(i),lA(C)){if(g=C.nextSibling&&C.nextSibling.dataset,g)var Q=g.dgst;g=Q,r=Error(l(419)),r.stack="",r.digest=g,ec({value:r,source:null,stack:null}),i=CE(n,i,o)}else if(Cn||tc(n,i,o,!1),g=(o&n.childLanes)!==0,Cn||g){if(g=Ht,g!==null&&(r=o&-o,r=(r&42)!==0?1:oh(r),r=(r&(g.suspendedLanes|o))!==0?0:r,r!==0&&r!==x.retryLane))throw x.retryLane=r,Ns(n,r),ba(g,n,r),rg;C.data==="$?"||jE(),i=CE(n,i,o)}else C.data==="$?"?(i.flags|=192,i.child=n.child,i=null):(n=x.treeContext,qt=ui(C.nextSibling),ta=i,dt=!0,So=null,gi=!1,n!==null&&(Wa[qa++]=Gi,Wa[qa++]=wi,Wa[qa++]=Ro,Gi=n.id,wi=n.overflow,Ro=i),i=IE(i,r.children),i.flags|=4096);return i}return f?(Il(),f=r.fallback,C=i.mode,x=n.child,Q=x.sibling,r=Pi(x,{mode:"hidden",children:r.children}),r.subtreeFlags=x.subtreeFlags&65011712,Q!==null?f=Pi(Q,f):(f=mo(f,C,o,null),f.flags|=2),f.return=i,r.return=i,r.sibling=f,i.child=r,r=f,f=i.child,C=n.child.memoizedState,C===null?C=pE(o):(x=C.cachePool,x!==null?(Q=Tn._currentValue,x=x.parent!==Q?{parent:Q,pool:Q}:x):x=aS(),C={baseLanes:C.baseLanes|o,cachePool:x}),f.memoizedState=C,f.childLanes=_E(n,g,o),i.memoizedState=gE,r):(_l(i),o=n.child,n=o.sibling,o=Pi(o,{mode:"visible",children:r.children}),o.return=i,o.sibling=null,n!==null&&(g=i.deletions,g===null?(i.deletions=[n],i.flags|=16):g.push(n)),i.child=o,i.memoizedState=null,o)}function IE(n,i){return i=od({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function od(n,i){return n=_a(22,n,null,i),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function CE(n,i,o){return ks(i,n.child,null,o),n=IE(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function Tg(n,i,o){n.lanes|=i;var r=n.alternate;r!==null&&(r.lanes|=i),jh(n.return,i,o)}function NE(n,i,o,r,f){var m=n.memoizedState;m===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:r,tail:o,tailMode:f}:(m.isBackwards=i,m.rendering=null,m.renderingStartTime=0,m.last=r,m.tail=o,m.tailMode=f)}function Sg(n,i,o){var r=i.pendingProps,f=r.revealOrder,m=r.tail;if(xn(n,i,r.children,o),r=Sn.current,(r&2)!==0)r=r&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Tg(n,o,i);else if(n.tag===19)Tg(n,o,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}switch(Y(Sn,r),f){case"forwards":for(o=i.child,f=null;o!==null;)n=o.alternate,n!==null&&nd(n)===null&&(f=o),o=o.sibling;o=f,o===null?(f=i.child,i.child=null):(f=o.sibling,o.sibling=null),NE(i,!1,f,o,m);break;case"backwards":for(o=null,f=i.child,i.child=null;f!==null;){if(n=f.alternate,n!==null&&nd(n)===null){i.child=f;break}n=f.sibling,f.sibling=o,o=f,f=n}NE(i,!0,o,null,m);break;case"together":NE(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Yi(n,i,o){if(n!==null&&(i.dependencies=n.dependencies),yl|=i.lanes,(o&i.childLanes)===0)if(n!==null){if(tc(n,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(l(153));if(i.child!==null){for(n=i.child,o=Pi(n,n.pendingProps),i.child=o,o.return=i;n.sibling!==null;)n=n.sibling,o=o.sibling=Pi(n,n.pendingProps),o.return=i;o.sibling=null}return i.child}function OE(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&Bu(n)))}function Hb(n,i,o){switch(i.tag){case 3:he(i,i.stateNode.containerInfo),Rl(i,Tn,n.memoizedState.cache),Jr();break;case 27:case 5:Be(i);break;case 4:he(i,i.stateNode.containerInfo);break;case 10:Rl(i,i.type,i.memoizedProps.value);break;case 13:var r=i.memoizedState;if(r!==null)return r.dehydrated!==null?(_l(i),i.flags|=128,null):(o&i.child.childLanes)!==0?Rg(n,i,o):(_l(i),n=Yi(n,i,o),n!==null?n.sibling:null);_l(i);break;case 19:var f=(n.flags&128)!==0;if(r=(o&i.childLanes)!==0,r||(tc(n,i,o,!1),r=(o&i.childLanes)!==0),f){if(r)return Sg(n,i,o);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Y(Sn,Sn.current),r)break;return null;case 22:case 23:return i.lanes=0,fg(n,i,o);case 24:Rl(i,Tn,n.memoizedState.cache)}return Yi(n,i,o)}function gg(n,i,o){if(n!==null)if(n.memoizedProps!==i.pendingProps)Cn=!0;else{if(!OE(n,o)&&(i.flags&128)===0)return Cn=!1,Hb(n,i,o);Cn=(n.flags&131072)!==0}else Cn=!1,dt&&(i.flags&1048576)!==0&&ZT(i,wu,i.index);switch(i.lanes=0,i.tag){case 16:e:{n=i.pendingProps;var r=i.elementType,f=r._init;if(r=f(r._payload),i.type=r,typeof r=="function")Uh(r)?(n=No(r,n),i.tag=1,i=Ag(null,i,r,n,o)):(i.tag=0,i=SE(null,i,r,n,o));else{if(r!=null){if(f=r.$$typeof,f===U){i.tag=11,i=cg(null,i,r,n,o);break e}else if(f===H){i.tag=14,i=ug(null,i,r,n,o);break e}}throw i=ne(r)||r,Error(l(306,i,""))}}return i;case 0:return SE(n,i,i.type,i.pendingProps,o);case 1:return r=i.type,f=No(r,i.pendingProps),Ag(n,i,r,f,o);case 3:e:{if(he(i,i.stateNode.containerInfo),n===null)throw Error(l(387));r=i.pendingProps;var m=i.memoizedState;f=m.element,Xh(n,i),rc(i,r,null,o);var g=i.memoizedState;if(r=g.cache,Rl(i,Tn,r),r!==m.cache&&zh(i,[Tn],o,!0),sc(),r=g.element,m.isDehydrated)if(m={element:r,isDehydrated:!1,cache:g.cache},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){i=mg(n,i,r,o);break e}else if(r!==f){f=Va(Error(l(424)),i),ec(f),i=mg(n,i,r,o);break e}else{switch(n=i.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(qt=ui(n.firstChild),ta=i,dt=!0,So=null,gi=!0,o=$S(i,null,r,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Jr(),r===f){i=Yi(n,i,o);break e}xn(n,i,r,o)}i=i.child}return i;case 26:return ld(n,i),n===null?(o=Cp(i.type,null,i.pendingProps,null))?i.memoizedState=o:dt||(o=i.type,n=i.pendingProps,r=gd(re.current).createElement(o),r[Vn]=i,r[fa]=n,kn(r,o,n),In(r),i.stateNode=r):i.memoizedState=Cp(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return Be(i),n===null&&dt&&(r=i.stateNode=pp(i.type,i.pendingProps,re.current),ta=i,gi=!0,f=qt,Ll(i.type)?(oA=f,qt=ui(r.firstChild)):qt=f),xn(n,i,i.pendingProps.children,o),ld(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&dt&&((f=r=qt)&&(r=sy(r,i.type,i.pendingProps,gi),r!==null?(i.stateNode=r,ta=i,qt=ui(r.firstChild),gi=!1,f=!0):f=!1),f||go(i)),Be(i),f=i.type,m=i.pendingProps,g=n!==null?n.memoizedProps:null,r=m.children,nA(f,m)?r=null:g!==null&&nA(f,g)&&(i.flags|=32),i.memoizedState!==null&&(f=tE(n,i,Nb,null,null,o),Dc._currentValue=f),ld(n,i),xn(n,i,r,o),i.child;case 6:return n===null&&dt&&((n=o=qt)&&(o=ry(o,i.pendingProps,gi),o!==null?(i.stateNode=o,ta=i,qt=null,n=!0):n=!1),n||go(i)),null;case 13:return Rg(n,i,o);case 4:return he(i,i.stateNode.containerInfo),r=i.pendingProps,n===null?i.child=ks(i,null,r,o):xn(n,i,r,o),i.child;case 11:return cg(n,i,i.type,i.pendingProps,o);case 7:return xn(n,i,i.pendingProps,o),i.child;case 8:return xn(n,i,i.pendingProps.children,o),i.child;case 12:return xn(n,i,i.pendingProps.children,o),i.child;case 10:return r=i.pendingProps,Rl(i,i.type,r.value),xn(n,i,r.children,o),i.child;case 9:return f=i.type._context,r=i.pendingProps.children,_o(i),f=Kn(f),r=r(f),i.flags|=1,xn(n,i,r,o),i.child;case 14:return ug(n,i,i.type,i.pendingProps,o);case 15:return dg(n,i,i.type,i.pendingProps,o);case 19:return Sg(n,i,o);case 31:return r=i.pendingProps,o=i.mode,r={mode:r.mode,children:r.children},n===null?(o=od(r,o),o.ref=i.ref,i.child=o,o.return=i,i=o):(o=Pi(n.child,r),o.ref=i.ref,i.child=o,o.return=i,i=o),i;case 22:return fg(n,i,o);case 24:return _o(i),r=Kn(Tn),n===null?(f=Kh(),f===null&&(f=Ht,m=Yh(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=o),f=m),i.memoizedState={parent:r,cache:f},qh(i),Rl(i,Tn,f)):((n.lanes&o)!==0&&(Xh(n,i),rc(i,null,null,o),sc()),f=n.memoizedState,m=i.memoizedState,f.parent!==r?(f={parent:r,cache:r},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Rl(i,Tn,r)):(r=m.cache,Rl(i,Tn,r),r!==f.cache&&zh(i,[Tn],o,!0))),xn(n,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(l(156,i.tag))}function Vi(n){n.flags|=4}function pg(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!vp(i)){if(i=Xa.current,i!==null&&((lt&4194048)===lt?pi!==null:(lt&62914560)!==lt&&(lt&536870912)===0||i!==pi))throw lc=Wh,iS;n.flags|=8192}}function sd(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?JR():536870912,n.lanes|=i,Bs|=i)}function Ac(n,i){if(!dt)switch(n.tailMode){case"hidden":i=n.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var r=null;o!==null;)o.alternate!==null&&(r=o),o=o.sibling;r===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function Ft(n){var i=n.alternate!==null&&n.alternate.child===n.child,o=0,r=0;if(i)for(var f=n.child;f!==null;)o|=f.lanes|f.childLanes,r|=f.subtreeFlags&65011712,r|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)o|=f.lanes|f.childLanes,r|=f.subtreeFlags,r|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=r,n.childLanes=o,i}function xb(n,i,o){var r=i.pendingProps;switch(wh(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ft(i),null;case 1:return Ft(i),null;case 3:return o=i.stateNode,r=null,n!==null&&(r=n.memoizedState.cache),i.memoizedState.cache!==r&&(i.flags|=2048),Fi(Tn),Oe(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&($r(i)?Vi(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,JT())),Ft(i),null;case 26:return o=i.memoizedState,n===null?(Vi(i),o!==null?(Ft(i),pg(i,o)):(Ft(i),i.flags&=-16777217)):o?o!==n.memoizedState?(Vi(i),Ft(i),pg(i,o)):(Ft(i),i.flags&=-16777217):(n.memoizedProps!==r&&Vi(i),Ft(i),i.flags&=-16777217),null;case 27:Ne(i),o=re.current;var f=i.type;if(n!==null&&i.stateNode!=null)n.memoizedProps!==r&&Vi(i);else{if(!r){if(i.stateNode===null)throw Error(l(166));return Ft(i),null}n=le.current,$r(i)?QT(i):(n=pp(f,r,o),i.stateNode=n,Vi(i))}return Ft(i),null;case 5:if(Ne(i),o=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==r&&Vi(i);else{if(!r){if(i.stateNode===null)throw Error(l(166));return Ft(i),null}if(n=le.current,$r(i))QT(i);else{switch(f=gd(re.current),n){case 1:n=f.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:n=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":n=f.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":n=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":n=f.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof r.is=="string"?f.createElement("select",{is:r.is}):f.createElement("select"),r.multiple?n.multiple=!0:r.size&&(n.size=r.size);break;default:n=typeof r.is=="string"?f.createElement(o,{is:r.is}):f.createElement(o)}}n[Vn]=i,n[fa]=r;e:for(f=i.child;f!==null;){if(f.tag===5||f.tag===6)n.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===i)break e;for(;f.sibling===null;){if(f.return===null||f.return===i)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}i.stateNode=n;e:switch(kn(n,o,r),o){case"button":case"input":case"select":case"textarea":n=!!r.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&Vi(i)}}return Ft(i),i.flags&=-16777217,null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==r&&Vi(i);else{if(typeof r!="string"&&i.stateNode===null)throw Error(l(166));if(n=re.current,$r(i)){if(n=i.stateNode,o=i.memoizedProps,r=null,f=ta,f!==null)switch(f.tag){case 27:case 5:r=f.memoizedProps}n[Vn]=i,n=!!(n.nodeValue===o||r!==null&&r.suppressHydrationWarning===!0||Ep(n.nodeValue,o)),n||go(i)}else n=gd(n).createTextNode(r),n[Vn]=i,i.stateNode=n}return Ft(i),null;case 13:if(r=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=$r(i),r!==null&&r.dehydrated!==null){if(n===null){if(!f)throw Error(l(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(l(317));f[Vn]=i}else Jr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Ft(i),f=!1}else f=JT(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(zi(i),i):(zi(i),null)}if(zi(i),(i.flags&128)!==0)return i.lanes=o,i;if(o=r!==null,n=n!==null&&n.memoizedState!==null,o){r=i.child,f=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(f=r.alternate.memoizedState.cachePool.pool);var m=null;r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(m=r.memoizedState.cachePool.pool),m!==f&&(r.flags|=2048)}return o!==n&&o&&(i.child.flags|=8192),sd(i,i.updateQueue),Ft(i),null;case 4:return Oe(),n===null&&QE(i.stateNode.containerInfo),Ft(i),null;case 10:return Fi(i.type),Ft(i),null;case 19:if(Z(Sn),f=i.memoizedState,f===null)return Ft(i),null;if(r=(i.flags&128)!==0,m=f.rendering,m===null)if(r)Ac(f,!1);else{if(Xt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(m=nd(n),m!==null){for(i.flags|=128,Ac(f,!1),n=m.updateQueue,i.updateQueue=n,sd(i,n),i.subtreeFlags=0,n=o,o=i.child;o!==null;)XT(o,n),o=o.sibling;return Y(Sn,Sn.current&1|2),i.child}n=n.sibling}f.tail!==null&&nt()>ud&&(i.flags|=128,r=!0,Ac(f,!1),i.lanes=4194304)}else{if(!r)if(n=nd(m),n!==null){if(i.flags|=128,r=!0,n=n.updateQueue,i.updateQueue=n,sd(i,n),Ac(f,!0),f.tail===null&&f.tailMode==="hidden"&&!m.alternate&&!dt)return Ft(i),null}else 2*nt()-f.renderingStartTime>ud&&o!==536870912&&(i.flags|=128,r=!0,Ac(f,!1),i.lanes=4194304);f.isBackwards?(m.sibling=i.child,i.child=m):(n=f.last,n!==null?n.sibling=m:i.child=m,f.last=m)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=nt(),i.sibling=null,n=Sn.current,Y(Sn,r?n&1|2:n&1),i):(Ft(i),null);case 22:case 23:return zi(i),Jh(),r=i.memoizedState!==null,n!==null?n.memoizedState!==null!==r&&(i.flags|=8192):r&&(i.flags|=8192),r?(o&536870912)!==0&&(i.flags&128)===0&&(Ft(i),i.subtreeFlags&6&&(i.flags|=8192)):Ft(i),o=i.updateQueue,o!==null&&sd(i,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),r=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==o&&(i.flags|=2048),n!==null&&Z(Io),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),Fi(Tn),Ft(i),null;case 25:return null;case 30:return null}throw Error(l(156,i.tag))}function Ub(n,i){switch(wh(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return Fi(Tn),Oe(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return Ne(i),null;case 13:if(zi(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(l(340));Jr()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return Z(Sn),null;case 4:return Oe(),null;case 10:return Fi(i.type),null;case 22:case 23:return zi(i),Jh(),n!==null&&Z(Io),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return Fi(Tn),null;case 25:return null;default:return null}}function _g(n,i){switch(wh(i),i.tag){case 3:Fi(Tn),Oe();break;case 26:case 27:case 5:Ne(i);break;case 4:Oe();break;case 13:zi(i);break;case 19:Z(Sn);break;case 10:Fi(i.type);break;case 22:case 23:zi(i),Jh(),n!==null&&Z(Io);break;case 24:Fi(Tn)}}function mc(n,i){try{var o=i.updateQueue,r=o!==null?o.lastEffect:null;if(r!==null){var f=r.next;o=f;do{if((o.tag&n)===n){r=void 0;var m=o.create,g=o.inst;r=m(),g.destroy=r}o=o.next}while(o!==f)}}catch(C){yt(i,i.return,C)}}function Cl(n,i,o){try{var r=i.updateQueue,f=r!==null?r.lastEffect:null;if(f!==null){var m=f.next;r=m;do{if((r.tag&n)===n){var g=r.inst,C=g.destroy;if(C!==void 0){g.destroy=void 0,f=i;var x=o,Q=C;try{Q()}catch(se){yt(f,x,se)}}}r=r.next}while(r!==m)}}catch(se){yt(i,i.return,se)}}function Ig(n){var i=n.updateQueue;if(i!==null){var o=n.stateNode;try{uS(i,o)}catch(r){yt(n,n.return,r)}}}function Cg(n,i,o){o.props=No(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(r){yt(n,i,r)}}function Rc(n,i){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var r=n.stateNode;break;case 30:r=n.stateNode;break;default:r=n.stateNode}typeof o=="function"?n.refCleanup=o(r):o.current=r}}catch(f){yt(n,i,f)}}function _i(n,i){var o=n.ref,r=n.refCleanup;if(o!==null)if(typeof r=="function")try{r()}catch(f){yt(n,i,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){yt(n,i,f)}else o.current=null}function Ng(n){var i=n.type,o=n.memoizedProps,r=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&r.focus();break e;case"img":o.src?r.src=o.src:o.srcSet&&(r.srcset=o.srcSet)}}catch(f){yt(n,n.return,f)}}function bE(n,i,o){try{var r=n.stateNode;ny(r,n.type,o,i),r[fa]=i}catch(f){yt(n,n.return,f)}}function Og(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Ll(n.type)||n.tag===4}function yE(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Og(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Ll(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function vE(n,i,o){var r=n.tag;if(r===5||r===6)n=n.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(n),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=Sd));else if(r!==4&&(r===27&&Ll(n.type)&&(o=n.stateNode,i=null),n=n.child,n!==null))for(vE(n,i,o),n=n.sibling;n!==null;)vE(n,i,o),n=n.sibling}function rd(n,i,o){var r=n.tag;if(r===5||r===6)n=n.stateNode,i?o.insertBefore(n,i):o.appendChild(n);else if(r!==4&&(r===27&&Ll(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(rd(n,i,o),n=n.sibling;n!==null;)rd(n,i,o),n=n.sibling}function bg(n){var i=n.stateNode,o=n.memoizedProps;try{for(var r=n.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);kn(i,r,o),i[Vn]=n,i[fa]=o}catch(m){yt(n,n.return,m)}}var Ki=!1,sn=!1,DE=!1,yg=typeof WeakSet=="function"?WeakSet:Set,Nn=null;function kb(n,i){if(n=n.containerInfo,eA=Od,n=wT(n),yh(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var r=o.getSelection&&o.getSelection();if(r&&r.rangeCount!==0){o=r.anchorNode;var f=r.anchorOffset,m=r.focusNode;r=r.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var g=0,C=-1,x=-1,Q=0,se=0,fe=n,J=null;t:for(;;){for(var te;fe!==o||f!==0&&fe.nodeType!==3||(C=g+f),fe!==m||r!==0&&fe.nodeType!==3||(x=g+r),fe.nodeType===3&&(g+=fe.nodeValue.length),(te=fe.firstChild)!==null;)J=fe,fe=te;for(;;){if(fe===n)break t;if(J===o&&++Q===f&&(C=g),J===m&&++se===r&&(x=g),(te=fe.nextSibling)!==null)break;fe=J,J=fe.parentNode}fe=te}o=C===-1||x===-1?null:{start:C,end:x}}else o=null}o=o||{start:0,end:0}}else o=null;for(tA={focusedElem:n,selectionRange:o},Od=!1,Nn=i;Nn!==null;)if(i=Nn,n=i.child,(i.subtreeFlags&1024)!==0&&n!==null)n.return=i,Nn=n;else for(;Nn!==null;){switch(i=Nn,m=i.alternate,n=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&m!==null){n=void 0,o=i,f=m.memoizedProps,m=m.memoizedState,r=o.stateNode;try{var Pe=No(o.type,f,o.elementType===o.type);n=r.getSnapshotBeforeUpdate(Pe,m),r.__reactInternalSnapshotBeforeUpdate=n}catch(xe){yt(o,o.return,xe)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,o=n.nodeType,o===9)iA(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":iA(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(l(163))}if(n=i.sibling,n!==null){n.return=i.return,Nn=n;break}Nn=i.return}}function vg(n,i,o){var r=o.flags;switch(o.tag){case 0:case 11:case 15:Nl(n,o),r&4&&mc(5,o);break;case 1:if(Nl(n,o),r&4)if(n=o.stateNode,i===null)try{n.componentDidMount()}catch(g){yt(o,o.return,g)}else{var f=No(o.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(f,i,n.__reactInternalSnapshotBeforeUpdate)}catch(g){yt(o,o.return,g)}}r&64&&Ig(o),r&512&&Rc(o,o.return);break;case 3:if(Nl(n,o),r&64&&(n=o.updateQueue,n!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{uS(n,i)}catch(g){yt(o,o.return,g)}}break;case 27:i===null&&r&4&&bg(o);case 26:case 5:Nl(n,o),i===null&&r&4&&Ng(o),r&512&&Rc(o,o.return);break;case 12:Nl(n,o);break;case 13:Nl(n,o),r&4&&Lg(n,o),r&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=Vb.bind(null,o),cy(n,o))));break;case 22:if(r=o.memoizedState!==null||Ki,!r){i=i!==null&&i.memoizedState!==null||sn,f=Ki;var m=sn;Ki=r,(sn=i)&&!m?Ol(n,o,(o.subtreeFlags&8772)!==0):Nl(n,o),Ki=f,sn=m}break;case 30:break;default:Nl(n,o)}}function Dg(n){var i=n.alternate;i!==null&&(n.alternate=null,Dg(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&ch(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Bt=null,Aa=!1;function Wi(n,i,o){for(o=o.child;o!==null;)Mg(n,i,o),o=o.sibling}function Mg(n,i,o){if(Sa&&typeof Sa.onCommitFiberUnmount=="function")try{Sa.onCommitFiberUnmount(Gr,o)}catch{}switch(o.tag){case 26:sn||_i(o,i),Wi(n,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:sn||_i(o,i);var r=Bt,f=Aa;Ll(o.type)&&(Bt=o.stateNode,Aa=!1),Wi(n,i,o),Oc(o.stateNode),Bt=r,Aa=f;break;case 5:sn||_i(o,i);case 6:if(r=Bt,f=Aa,Bt=null,Wi(n,i,o),Bt=r,Aa=f,Bt!==null)if(Aa)try{(Bt.nodeType===9?Bt.body:Bt.nodeName==="HTML"?Bt.ownerDocument.body:Bt).removeChild(o.stateNode)}catch(m){yt(o,i,m)}else try{Bt.removeChild(o.stateNode)}catch(m){yt(o,i,m)}break;case 18:Bt!==null&&(Aa?(n=Bt,Sp(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),xc(n)):Sp(Bt,o.stateNode));break;case 4:r=Bt,f=Aa,Bt=o.stateNode.containerInfo,Aa=!0,Wi(n,i,o),Bt=r,Aa=f;break;case 0:case 11:case 14:case 15:sn||Cl(2,o,i),sn||Cl(4,o,i),Wi(n,i,o);break;case 1:sn||(_i(o,i),r=o.stateNode,typeof r.componentWillUnmount=="function"&&Cg(o,i,r)),Wi(n,i,o);break;case 21:Wi(n,i,o);break;case 22:sn=(r=sn)||o.memoizedState!==null,Wi(n,i,o),sn=r;break;default:Wi(n,i,o)}}function Lg(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{xc(n)}catch(o){yt(i,i.return,o)}}function Pb(n){switch(n.tag){case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new yg),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new yg),i;default:throw Error(l(435,n.tag))}}function ME(n,i){var o=Pb(n);i.forEach(function(r){var f=Kb.bind(null,n,r);o.has(r)||(o.add(r),r.then(f,f))})}function Ia(n,i){var o=i.deletions;if(o!==null)for(var r=0;r<o.length;r++){var f=o[r],m=n,g=i,C=g;e:for(;C!==null;){switch(C.tag){case 27:if(Ll(C.type)){Bt=C.stateNode,Aa=!1;break e}break;case 5:Bt=C.stateNode,Aa=!1;break e;case 3:case 4:Bt=C.stateNode.containerInfo,Aa=!0;break e}C=C.return}if(Bt===null)throw Error(l(160));Mg(m,g,f),Bt=null,Aa=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)Hg(i,n),i=i.sibling}var ci=null;function Hg(n,i){var o=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Ia(i,n),Ca(n),r&4&&(Cl(3,n,n.return),mc(3,n),Cl(5,n,n.return));break;case 1:Ia(i,n),Ca(n),r&512&&(sn||o===null||_i(o,o.return)),r&64&&Ki&&(n=n.updateQueue,n!==null&&(r=n.callbacks,r!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?r:o.concat(r))));break;case 26:var f=ci;if(Ia(i,n),Ca(n),r&512&&(sn||o===null||_i(o,o.return)),r&4){var m=o!==null?o.memoizedState:null;if(r=n.memoizedState,o===null)if(r===null)if(n.stateNode===null){e:{r=n.type,o=n.memoizedProps,f=f.ownerDocument||f;t:switch(r){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Fr]||m[Vn]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(r),f.head.insertBefore(m,f.querySelector("head > title"))),kn(m,r,o),m[Vn]=n,In(m),r=m;break e;case"link":var g=bp("link","href",f).get(r+(o.href||""));if(g){for(var C=0;C<g.length;C++)if(m=g[C],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){g.splice(C,1);break t}}m=f.createElement(r),kn(m,r,o),f.head.appendChild(m);break;case"meta":if(g=bp("meta","content",f).get(r+(o.content||""))){for(C=0;C<g.length;C++)if(m=g[C],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){g.splice(C,1);break t}}m=f.createElement(r),kn(m,r,o),f.head.appendChild(m);break;default:throw Error(l(468,r))}m[Vn]=n,In(m),r=m}n.stateNode=r}else yp(f,n.type,n.stateNode);else n.stateNode=Op(f,r,n.memoizedProps);else m!==r?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,r===null?yp(f,n.type,n.stateNode):Op(f,r,n.memoizedProps)):r===null&&n.stateNode!==null&&bE(n,n.memoizedProps,o.memoizedProps)}break;case 27:Ia(i,n),Ca(n),r&512&&(sn||o===null||_i(o,o.return)),o!==null&&r&4&&bE(n,n.memoizedProps,o.memoizedProps);break;case 5:if(Ia(i,n),Ca(n),r&512&&(sn||o===null||_i(o,o.return)),n.flags&32){f=n.stateNode;try{Ts(f,"")}catch(te){yt(n,n.return,te)}}r&4&&n.stateNode!=null&&(f=n.memoizedProps,bE(n,f,o!==null?o.memoizedProps:f)),r&1024&&(DE=!0);break;case 6:if(Ia(i,n),Ca(n),r&4){if(n.stateNode===null)throw Error(l(162));r=n.memoizedProps,o=n.stateNode;try{o.nodeValue=r}catch(te){yt(n,n.return,te)}}break;case 3:if(Id=null,f=ci,ci=pd(i.containerInfo),Ia(i,n),ci=f,Ca(n),r&4&&o!==null&&o.memoizedState.isDehydrated)try{xc(i.containerInfo)}catch(te){yt(n,n.return,te)}DE&&(DE=!1,xg(n));break;case 4:r=ci,ci=pd(n.stateNode.containerInfo),Ia(i,n),Ca(n),ci=r;break;case 12:Ia(i,n),Ca(n);break;case 13:Ia(i,n),Ca(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(PE=nt()),r&4&&(r=n.updateQueue,r!==null&&(n.updateQueue=null,ME(n,r)));break;case 22:f=n.memoizedState!==null;var x=o!==null&&o.memoizedState!==null,Q=Ki,se=sn;if(Ki=Q||f,sn=se||x,Ia(i,n),sn=se,Ki=Q,Ca(n),r&8192)e:for(i=n.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(o===null||x||Ki||sn||Oo(n)),o=null,i=n;;){if(i.tag===5||i.tag===26){if(o===null){x=o=i;try{if(m=x.stateNode,f)g=m.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none";else{C=x.stateNode;var fe=x.memoizedProps.style,J=fe!=null&&fe.hasOwnProperty("display")?fe.display:null;C.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(te){yt(x,x.return,te)}}}else if(i.tag===6){if(o===null){x=i;try{x.stateNode.nodeValue=f?"":x.memoizedProps}catch(te){yt(x,x.return,te)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}r&4&&(r=n.updateQueue,r!==null&&(o=r.retryQueue,o!==null&&(r.retryQueue=null,ME(n,o))));break;case 19:Ia(i,n),Ca(n),r&4&&(r=n.updateQueue,r!==null&&(n.updateQueue=null,ME(n,r)));break;case 30:break;case 21:break;default:Ia(i,n),Ca(n)}}function Ca(n){var i=n.flags;if(i&2){try{for(var o,r=n.return;r!==null;){if(Og(r)){o=r;break}r=r.return}if(o==null)throw Error(l(160));switch(o.tag){case 27:var f=o.stateNode,m=yE(n);rd(n,m,f);break;case 5:var g=o.stateNode;o.flags&32&&(Ts(g,""),o.flags&=-33);var C=yE(n);rd(n,C,g);break;case 3:case 4:var x=o.stateNode.containerInfo,Q=yE(n);vE(n,Q,x);break;default:throw Error(l(161))}}catch(se){yt(n,n.return,se)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function xg(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;xg(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function Nl(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)vg(n,i.alternate,i),i=i.sibling}function Oo(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:Cl(4,i,i.return),Oo(i);break;case 1:_i(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&Cg(i,i.return,o),Oo(i);break;case 27:Oc(i.stateNode);case 26:case 5:_i(i,i.return),Oo(i);break;case 22:i.memoizedState===null&&Oo(i);break;case 30:Oo(i);break;default:Oo(i)}n=n.sibling}}function Ol(n,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var r=i.alternate,f=n,m=i,g=m.flags;switch(m.tag){case 0:case 11:case 15:Ol(f,m,o),mc(4,m);break;case 1:if(Ol(f,m,o),r=m,f=r.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(Q){yt(r,r.return,Q)}if(r=m,f=r.updateQueue,f!==null){var C=r.stateNode;try{var x=f.shared.hiddenCallbacks;if(x!==null)for(f.shared.hiddenCallbacks=null,f=0;f<x.length;f++)cS(x[f],C)}catch(Q){yt(r,r.return,Q)}}o&&g&64&&Ig(m),Rc(m,m.return);break;case 27:bg(m);case 26:case 5:Ol(f,m,o),o&&r===null&&g&4&&Ng(m),Rc(m,m.return);break;case 12:Ol(f,m,o);break;case 13:Ol(f,m,o),o&&g&4&&Lg(f,m);break;case 22:m.memoizedState===null&&Ol(f,m,o),Rc(m,m.return);break;case 30:break;default:Ol(f,m,o)}i=i.sibling}}function LE(n,i){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&nc(o))}function HE(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&nc(n))}function Ii(n,i,o,r){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Ug(n,i,o,r),i=i.sibling}function Ug(n,i,o,r){var f=i.flags;switch(i.tag){case 0:case 11:case 15:Ii(n,i,o,r),f&2048&&mc(9,i);break;case 1:Ii(n,i,o,r);break;case 3:Ii(n,i,o,r),f&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&nc(n)));break;case 12:if(f&2048){Ii(n,i,o,r),n=i.stateNode;try{var m=i.memoizedProps,g=m.id,C=m.onPostCommit;typeof C=="function"&&C(g,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(x){yt(i,i.return,x)}}else Ii(n,i,o,r);break;case 13:Ii(n,i,o,r);break;case 23:break;case 22:m=i.stateNode,g=i.alternate,i.memoizedState!==null?m._visibility&2?Ii(n,i,o,r):Tc(n,i):m._visibility&2?Ii(n,i,o,r):(m._visibility|=2,Ps(n,i,o,r,(i.subtreeFlags&10256)!==0)),f&2048&&LE(g,i);break;case 24:Ii(n,i,o,r),f&2048&&HE(i.alternate,i);break;default:Ii(n,i,o,r)}}function Ps(n,i,o,r,f){for(f=f&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var m=n,g=i,C=o,x=r,Q=g.flags;switch(g.tag){case 0:case 11:case 15:Ps(m,g,C,x,f),mc(8,g);break;case 23:break;case 22:var se=g.stateNode;g.memoizedState!==null?se._visibility&2?Ps(m,g,C,x,f):Tc(m,g):(se._visibility|=2,Ps(m,g,C,x,f)),f&&Q&2048&&LE(g.alternate,g);break;case 24:Ps(m,g,C,x,f),f&&Q&2048&&HE(g.alternate,g);break;default:Ps(m,g,C,x,f)}i=i.sibling}}function Tc(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=n,r=i,f=r.flags;switch(r.tag){case 22:Tc(o,r),f&2048&&LE(r.alternate,r);break;case 24:Tc(o,r),f&2048&&HE(r.alternate,r);break;default:Tc(o,r)}i=i.sibling}}var Sc=8192;function Gs(n){if(n.subtreeFlags&Sc)for(n=n.child;n!==null;)kg(n),n=n.sibling}function kg(n){switch(n.tag){case 26:Gs(n),n.flags&Sc&&n.memoizedState!==null&&_y(ci,n.memoizedState,n.memoizedProps);break;case 5:Gs(n);break;case 3:case 4:var i=ci;ci=pd(n.stateNode.containerInfo),Gs(n),ci=i;break;case 22:n.memoizedState===null&&(i=n.alternate,i!==null&&i.memoizedState!==null?(i=Sc,Sc=16777216,Gs(n),Sc=i):Gs(n));break;default:Gs(n)}}function Pg(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function gc(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var r=i[o];Nn=r,wg(r,n)}Pg(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Gg(n),n=n.sibling}function Gg(n){switch(n.tag){case 0:case 11:case 15:gc(n),n.flags&2048&&Cl(9,n,n.return);break;case 3:gc(n);break;case 12:gc(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,cd(n)):gc(n);break;default:gc(n)}}function cd(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var r=i[o];Nn=r,wg(r,n)}Pg(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:Cl(8,i,i.return),cd(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,cd(i));break;default:cd(i)}n=n.sibling}}function wg(n,i){for(;Nn!==null;){var o=Nn;switch(o.tag){case 0:case 11:case 15:Cl(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var r=o.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:nc(o.memoizedState.cache)}if(r=o.child,r!==null)r.return=o,Nn=r;else e:for(o=n;Nn!==null;){r=Nn;var f=r.sibling,m=r.return;if(Dg(r),r===o){Nn=null;break e}if(f!==null){f.return=m,Nn=f;break e}Nn=m}}}var Gb={getCacheForType:function(n){var i=Kn(Tn),o=i.data.get(n);return o===void 0&&(o=n(),i.data.set(n,o)),o}},wb=typeof WeakMap=="function"?WeakMap:Map,mt=0,Ht=null,Qe=null,lt=0,Rt=0,Na=null,bl=!1,ws=!1,xE=!1,qi=0,Xt=0,yl=0,bo=0,UE=0,Za=0,Bs=0,pc=null,ma=null,kE=!1,PE=0,ud=1/0,dd=null,vl=null,Un=0,Dl=null,Fs=null,js=0,GE=0,wE=null,Bg=null,_c=0,BE=null;function Oa(){if((mt&2)!==0&&lt!==0)return lt&-lt;if(w.T!==null){var n=vs;return n!==0?n:WE()}return nT()}function Fg(){Za===0&&(Za=(lt&536870912)===0||dt?$R():536870912);var n=Xa.current;return n!==null&&(n.flags|=32),Za}function ba(n,i,o){(n===Ht&&(Rt===2||Rt===9)||n.cancelPendingCommit!==null)&&(zs(n,0),Ml(n,lt,Za,!1)),Br(n,o),((mt&2)===0||n!==Ht)&&(n===Ht&&((mt&2)===0&&(bo|=o),Xt===4&&Ml(n,lt,Za,!1)),Ci(n))}function jg(n,i,o){if((mt&6)!==0)throw Error(l(327));var r=!o&&(i&124)===0&&(i&n.expiredLanes)===0||wr(n,i),f=r?jb(n,i):zE(n,i,!0),m=r;do{if(f===0){ws&&!r&&Ml(n,i,0,!1);break}else{if(o=n.current.alternate,m&&!Bb(o)){f=zE(n,i,!1),m=!1;continue}if(f===2){if(m=i,n.errorRecoveryDisabledLanes&m)var g=0;else g=n.pendingLanes&-536870913,g=g!==0?g:g&536870912?536870912:0;if(g!==0){i=g;e:{var C=n;f=pc;var x=C.current.memoizedState.isDehydrated;if(x&&(zs(C,g).flags|=256),g=zE(C,g,!1),g!==2){if(xE&&!x){C.errorRecoveryDisabledLanes|=m,bo|=m,f=4;break e}m=ma,ma=f,m!==null&&(ma===null?ma=m:ma.push.apply(ma,m))}f=g}if(m=!1,f!==2)continue}}if(f===1){zs(n,0),Ml(n,i,0,!0);break}e:{switch(r=n,m=f,m){case 0:case 1:throw Error(l(345));case 4:if((i&4194048)!==i)break;case 6:Ml(r,i,Za,!bl);break e;case 2:ma=null;break;case 3:case 5:break;default:throw Error(l(329))}if((i&62914560)===i&&(f=PE+300-nt(),10<f)){if(Ml(r,i,Za,!bl),_u(r,0,!0)!==0)break e;r.timeoutHandle=Rp(zg.bind(null,r,o,ma,dd,kE,i,Za,bo,Bs,bl,m,2,-0,0),f);break e}zg(r,o,ma,dd,kE,i,Za,bo,Bs,bl,m,0,-0,0)}}break}while(!0);Ci(n)}function zg(n,i,o,r,f,m,g,C,x,Q,se,fe,J,te){if(n.timeoutHandle=-1,fe=i.subtreeFlags,(fe&8192||(fe&16785408)===16785408)&&(vc={stylesheets:null,count:0,unsuspend:py},kg(i),fe=Iy(),fe!==null)){n.cancelPendingCommit=fe(Zg.bind(null,n,i,m,o,r,f,g,C,x,se,1,J,te)),Ml(n,m,g,!Q);return}Zg(n,i,m,o,r,f,g,C,x)}function Bb(n){for(var i=n;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var r=0;r<o.length;r++){var f=o[r],m=f.getSnapshot;f=f.value;try{if(!pa(m(),f))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ml(n,i,o,r){i&=~UE,i&=~bo,n.suspendedLanes|=i,n.pingedLanes&=~i,r&&(n.warmLanes|=i),r=n.expirationTimes;for(var f=i;0<f;){var m=31-ga(f),g=1<<m;r[m]=-1,f&=~g}o!==0&&eT(n,o,i)}function fd(){return(mt&6)===0?(Ic(0),!1):!0}function FE(){if(Qe!==null){if(Rt===0)var n=Qe.return;else n=Qe,Bi=po=null,iE(n),Us=null,hc=0,n=Qe;for(;n!==null;)_g(n.alternate,n),n=n.return;Qe=null}}function zs(n,i){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,iy(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),FE(),Ht=n,Qe=o=Pi(n.current,null),lt=i,Rt=0,Na=null,bl=!1,ws=wr(n,i),xE=!1,Bs=Za=UE=bo=yl=Xt=0,ma=pc=null,kE=!1,(i&8)!==0&&(i|=i&32);var r=n.entangledLanes;if(r!==0)for(n=n.entanglements,r&=i;0<r;){var f=31-ga(r),m=1<<f;i|=n[f],r&=~m}return qi=i,xu(),o}function Yg(n,i){We=null,w.H=Ju,i===ic||i===zu?(i=sS(),Rt=3):i===iS?(i=sS(),Rt=4):Rt=i===rg?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Na=i,Qe===null&&(Xt=1,id(n,Va(i,n.current)))}function Vg(){var n=w.H;return w.H=Ju,n===null?Ju:n}function Kg(){var n=w.A;return w.A=Gb,n}function jE(){Xt=4,bl||(lt&4194048)!==lt&&Xa.current!==null||(ws=!0),(yl&134217727)===0&&(bo&134217727)===0||Ht===null||Ml(Ht,lt,Za,!1)}function zE(n,i,o){var r=mt;mt|=2;var f=Vg(),m=Kg();(Ht!==n||lt!==i)&&(dd=null,zs(n,i)),i=!1;var g=Xt;e:do try{if(Rt!==0&&Qe!==null){var C=Qe,x=Na;switch(Rt){case 8:FE(),g=6;break e;case 3:case 2:case 9:case 6:Xa.current===null&&(i=!0);var Q=Rt;if(Rt=0,Na=null,Ys(n,C,x,Q),o&&ws){g=0;break e}break;default:Q=Rt,Rt=0,Na=null,Ys(n,C,x,Q)}}Fb(),g=Xt;break}catch(se){Yg(n,se)}while(!0);return i&&n.shellSuspendCounter++,Bi=po=null,mt=r,w.H=f,w.A=m,Qe===null&&(Ht=null,lt=0,xu()),g}function Fb(){for(;Qe!==null;)Wg(Qe)}function jb(n,i){var o=mt;mt|=2;var r=Vg(),f=Kg();Ht!==n||lt!==i?(dd=null,ud=nt()+500,zs(n,i)):ws=wr(n,i);e:do try{if(Rt!==0&&Qe!==null){i=Qe;var m=Na;t:switch(Rt){case 1:Rt=0,Na=null,Ys(n,i,m,1);break;case 2:case 9:if(lS(m)){Rt=0,Na=null,qg(i);break}i=function(){Rt!==2&&Rt!==9||Ht!==n||(Rt=7),Ci(n)},m.then(i,i);break e;case 3:Rt=7;break e;case 4:Rt=5;break e;case 7:lS(m)?(Rt=0,Na=null,qg(i)):(Rt=0,Na=null,Ys(n,i,m,7));break;case 5:var g=null;switch(Qe.tag){case 26:g=Qe.memoizedState;case 5:case 27:var C=Qe;if(!g||vp(g)){Rt=0,Na=null;var x=C.sibling;if(x!==null)Qe=x;else{var Q=C.return;Q!==null?(Qe=Q,hd(Q)):Qe=null}break t}}Rt=0,Na=null,Ys(n,i,m,5);break;case 6:Rt=0,Na=null,Ys(n,i,m,6);break;case 8:FE(),Xt=6;break e;default:throw Error(l(462))}}zb();break}catch(se){Yg(n,se)}while(!0);return Bi=po=null,w.H=r,w.A=f,mt=o,Qe!==null?0:(Ht=null,lt=0,xu(),Xt)}function zb(){for(;Qe!==null&&!et();)Wg(Qe)}function Wg(n){var i=gg(n.alternate,n,qi);n.memoizedProps=n.pendingProps,i===null?hd(n):Qe=i}function qg(n){var i=n,o=i.alternate;switch(i.tag){case 15:case 0:i=Eg(o,i,i.pendingProps,i.type,void 0,lt);break;case 11:i=Eg(o,i,i.pendingProps,i.type.render,i.ref,lt);break;case 5:iE(i);default:_g(o,i),i=Qe=XT(i,qi),i=gg(o,i,qi)}n.memoizedProps=n.pendingProps,i===null?hd(n):Qe=i}function Ys(n,i,o,r){Bi=po=null,iE(i),Us=null,hc=0;var f=i.return;try{if(Lb(n,f,i,o,lt)){Xt=1,id(n,Va(o,n.current)),Qe=null;return}}catch(m){if(f!==null)throw Qe=f,m;Xt=1,id(n,Va(o,n.current)),Qe=null;return}i.flags&32768?(dt||r===1?n=!0:ws||(lt&536870912)!==0?n=!1:(bl=n=!0,(r===2||r===9||r===3||r===6)&&(r=Xa.current,r!==null&&r.tag===13&&(r.flags|=16384))),Xg(i,n)):hd(i)}function hd(n){var i=n;do{if((i.flags&32768)!==0){Xg(i,bl);return}n=i.return;var o=xb(i.alternate,i,qi);if(o!==null){Qe=o;return}if(i=i.sibling,i!==null){Qe=i;return}Qe=i=n}while(i!==null);Xt===0&&(Xt=5)}function Xg(n,i){do{var o=Ub(n.alternate,n);if(o!==null){o.flags&=32767,Qe=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(n=n.sibling,n!==null)){Qe=n;return}Qe=n=o}while(n!==null);Xt=6,Qe=null}function Zg(n,i,o,r,f,m,g,C,x){n.cancelPendingCommit=null;do Ed();while(Un!==0);if((mt&6)!==0)throw Error(l(327));if(i!==null){if(i===n.current)throw Error(l(177));if(m=i.lanes|i.childLanes,m|=Hh,pO(n,o,m,g,C,x),n===Ht&&(Qe=Ht=null,lt=0),Fs=i,Dl=n,js=o,GE=m,wE=f,Bg=r,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,Wb(Wt,function(){return tp(),null})):(n.callbackNode=null,n.callbackPriority=0),r=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||r){r=w.T,w.T=null,f=M.p,M.p=2,g=mt,mt|=4;try{kb(n,i,o)}finally{mt=g,M.p=f,w.T=r}}Un=1,Qg(),$g(),Jg()}}function Qg(){if(Un===1){Un=0;var n=Dl,i=Fs,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=w.T,w.T=null;var r=M.p;M.p=2;var f=mt;mt|=4;try{Hg(i,n);var m=tA,g=wT(n.containerInfo),C=m.focusedElem,x=m.selectionRange;if(g!==C&&C&&C.ownerDocument&&GT(C.ownerDocument.documentElement,C)){if(x!==null&&yh(C)){var Q=x.start,se=x.end;if(se===void 0&&(se=Q),"selectionStart"in C)C.selectionStart=Q,C.selectionEnd=Math.min(se,C.value.length);else{var fe=C.ownerDocument||document,J=fe&&fe.defaultView||window;if(J.getSelection){var te=J.getSelection(),Pe=C.textContent.length,xe=Math.min(x.start,Pe),_t=x.end===void 0?xe:Math.min(x.end,Pe);!te.extend&&xe>_t&&(g=_t,_t=xe,xe=g);var K=PT(C,xe),B=PT(C,_t);if(K&&B&&(te.rangeCount!==1||te.anchorNode!==K.node||te.anchorOffset!==K.offset||te.focusNode!==B.node||te.focusOffset!==B.offset)){var q=fe.createRange();q.setStart(K.node,K.offset),te.removeAllRanges(),xe>_t?(te.addRange(q),te.extend(B.node,B.offset)):(q.setEnd(B.node,B.offset),te.addRange(q))}}}}for(fe=[],te=C;te=te.parentNode;)te.nodeType===1&&fe.push({element:te,left:te.scrollLeft,top:te.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<fe.length;C++){var ce=fe[C];ce.element.scrollLeft=ce.left,ce.element.scrollTop=ce.top}}Od=!!eA,tA=eA=null}finally{mt=f,M.p=r,w.T=o}}n.current=i,Un=2}}function $g(){if(Un===2){Un=0;var n=Dl,i=Fs,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=w.T,w.T=null;var r=M.p;M.p=2;var f=mt;mt|=4;try{vg(n,i.alternate,i)}finally{mt=f,M.p=r,w.T=o}}Un=3}}function Jg(){if(Un===4||Un===3){Un=0,bt();var n=Dl,i=Fs,o=js,r=Bg;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Un=5:(Un=0,Fs=Dl=null,ep(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(vl=null),sh(o),i=i.stateNode,Sa&&typeof Sa.onCommitFiberRoot=="function")try{Sa.onCommitFiberRoot(Gr,i,void 0,(i.current.flags&128)===128)}catch{}if(r!==null){i=w.T,f=M.p,M.p=2,w.T=null;try{for(var m=n.onRecoverableError,g=0;g<r.length;g++){var C=r[g];m(C.value,{componentStack:C.stack})}}finally{w.T=i,M.p=f}}(js&3)!==0&&Ed(),Ci(n),f=n.pendingLanes,(o&4194090)!==0&&(f&42)!==0?n===BE?_c++:(_c=0,BE=n):_c=0,Ic(0)}}function ep(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,nc(i)))}function Ed(n){return Qg(),$g(),Jg(),tp()}function tp(){if(Un!==5)return!1;var n=Dl,i=GE;GE=0;var o=sh(js),r=w.T,f=M.p;try{M.p=32>o?32:o,w.T=null,o=wE,wE=null;var m=Dl,g=js;if(Un=0,Fs=Dl=null,js=0,(mt&6)!==0)throw Error(l(331));var C=mt;if(mt|=4,Gg(m.current),Ug(m,m.current,g,o),mt=C,Ic(0,!1),Sa&&typeof Sa.onPostCommitFiberRoot=="function")try{Sa.onPostCommitFiberRoot(Gr,m)}catch{}return!0}finally{M.p=f,w.T=r,ep(n,i)}}function np(n,i,o){i=Va(o,i),i=TE(n.stateNode,i,2),n=gl(n,i,2),n!==null&&(Br(n,2),Ci(n))}function yt(n,i,o){if(n.tag===3)np(n,n,o);else for(;i!==null;){if(i.tag===3){np(i,n,o);break}else if(i.tag===1){var r=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(vl===null||!vl.has(r))){n=Va(o,n),o=og(2),r=gl(i,o,2),r!==null&&(sg(o,r,i,n),Br(r,2),Ci(r));break}}i=i.return}}function YE(n,i,o){var r=n.pingCache;if(r===null){r=n.pingCache=new wb;var f=new Set;r.set(i,f)}else f=r.get(i),f===void 0&&(f=new Set,r.set(i,f));f.has(o)||(xE=!0,f.add(o),n=Yb.bind(null,n,i,o),i.then(n,n))}function Yb(n,i,o){var r=n.pingCache;r!==null&&r.delete(i),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,Ht===n&&(lt&o)===o&&(Xt===4||Xt===3&&(lt&62914560)===lt&&300>nt()-PE?(mt&2)===0&&zs(n,0):UE|=o,Bs===lt&&(Bs=0)),Ci(n)}function ap(n,i){i===0&&(i=JR()),n=Ns(n,i),n!==null&&(Br(n,i),Ci(n))}function Vb(n){var i=n.memoizedState,o=0;i!==null&&(o=i.retryLane),ap(n,o)}function Kb(n,i){var o=0;switch(n.tag){case 13:var r=n.stateNode,f=n.memoizedState;f!==null&&(o=f.retryLane);break;case 19:r=n.stateNode;break;case 22:r=n.stateNode._retryCache;break;default:throw Error(l(314))}r!==null&&r.delete(i),ap(n,o)}function Wb(n,i){return _e(n,i)}var Ad=null,Vs=null,VE=!1,md=!1,KE=!1,yo=0;function Ci(n){n!==Vs&&n.next===null&&(Vs===null?Ad=Vs=n:Vs=Vs.next=n),md=!0,VE||(VE=!0,Xb())}function Ic(n,i){if(!KE&&md){KE=!0;do for(var o=!1,r=Ad;r!==null;){if(n!==0){var f=r.pendingLanes;if(f===0)var m=0;else{var g=r.suspendedLanes,C=r.pingedLanes;m=(1<<31-ga(42|n)+1)-1,m&=f&~(g&~C),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,sp(r,m))}else m=lt,m=_u(r,r===Ht?m:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),(m&3)===0||wr(r,m)||(o=!0,sp(r,m));r=r.next}while(o);KE=!1}}function qb(){ip()}function ip(){md=VE=!1;var n=0;yo!==0&&(ay()&&(n=yo),yo=0);for(var i=nt(),o=null,r=Ad;r!==null;){var f=r.next,m=lp(r,i);m===0?(r.next=null,o===null?Ad=f:o.next=f,f===null&&(Vs=o)):(o=r,(n!==0||(m&3)!==0)&&(md=!0)),r=f}Ic(n)}function lp(n,i){for(var o=n.suspendedLanes,r=n.pingedLanes,f=n.expirationTimes,m=n.pendingLanes&-62914561;0<m;){var g=31-ga(m),C=1<<g,x=f[g];x===-1?((C&o)===0||(C&r)!==0)&&(f[g]=gO(C,i)):x<=i&&(n.expiredLanes|=C),m&=~C}if(i=Ht,o=lt,o=_u(n,n===i?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),r=n.callbackNode,o===0||n===i&&(Rt===2||Rt===9)||n.cancelPendingCommit!==null)return r!==null&&r!==null&&He(r),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||wr(n,o)){if(i=o&-o,i===n.callbackPriority)return i;switch(r!==null&&He(r),sh(o)){case 2:case 8:o=At;break;case 32:o=Wt;break;case 268435456:o=us;break;default:o=Wt}return r=op.bind(null,n),o=_e(o,r),n.callbackPriority=i,n.callbackNode=o,i}return r!==null&&r!==null&&He(r),n.callbackPriority=2,n.callbackNode=null,2}function op(n,i){if(Un!==0&&Un!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(Ed()&&n.callbackNode!==o)return null;var r=lt;return r=_u(n,n===Ht?r:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),r===0?null:(jg(n,r,i),lp(n,nt()),n.callbackNode!=null&&n.callbackNode===o?op.bind(null,n):null)}function sp(n,i){if(Ed())return null;jg(n,i,!0)}function Xb(){ly(function(){(mt&6)!==0?_e(Et,qb):ip()})}function WE(){return yo===0&&(yo=$R()),yo}function rp(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:bu(""+n)}function cp(n,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,n.id&&o.setAttribute("form",n.id),i.parentNode.insertBefore(o,i),n=new FormData(n),o.parentNode.removeChild(o),n}function Zb(n,i,o,r,f){if(i==="submit"&&o&&o.stateNode===f){var m=rp((f[fa]||null).action),g=r.submitter;g&&(i=(i=g[fa]||null)?rp(i.formAction):g.getAttribute("formAction"),i!==null&&(m=i,g=null));var C=new Mu("action","action",null,r,f);n.push({event:C,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(yo!==0){var x=g?cp(f,g):new FormData(f);hE(o,{pending:!0,data:x,method:f.method,action:m},null,x)}}else typeof m=="function"&&(C.preventDefault(),x=g?cp(f,g):new FormData(f),hE(o,{pending:!0,data:x,method:f.method,action:m},m,x))},currentTarget:f}]})}}for(var qE=0;qE<Lh.length;qE++){var XE=Lh[qE],Qb=XE.toLowerCase(),$b=XE[0].toUpperCase()+XE.slice(1);ri(Qb,"on"+$b)}ri(jT,"onAnimationEnd"),ri(zT,"onAnimationIteration"),ri(YT,"onAnimationStart"),ri("dblclick","onDoubleClick"),ri("focusin","onFocus"),ri("focusout","onBlur"),ri(Ab,"onTransitionRun"),ri(mb,"onTransitionStart"),ri(Rb,"onTransitionCancel"),ri(VT,"onTransitionEnd"),As("onMouseEnter",["mouseout","mouseover"]),As("onMouseLeave",["mouseout","mouseover"]),As("onPointerEnter",["pointerout","pointerover"]),As("onPointerLeave",["pointerout","pointerover"]),fo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),fo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),fo("onBeforeInput",["compositionend","keypress","textInput","paste"]),fo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),fo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),fo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Jb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Cc));function up(n,i){i=(i&4)!==0;for(var o=0;o<n.length;o++){var r=n[o],f=r.event;r=r.listeners;e:{var m=void 0;if(i)for(var g=r.length-1;0<=g;g--){var C=r[g],x=C.instance,Q=C.currentTarget;if(C=C.listener,x!==m&&f.isPropagationStopped())break e;m=C,f.currentTarget=Q;try{m(f)}catch(se){ad(se)}f.currentTarget=null,m=x}else for(g=0;g<r.length;g++){if(C=r[g],x=C.instance,Q=C.currentTarget,C=C.listener,x!==m&&f.isPropagationStopped())break e;m=C,f.currentTarget=Q;try{m(f)}catch(se){ad(se)}f.currentTarget=null,m=x}}}}function $e(n,i){var o=i[rh];o===void 0&&(o=i[rh]=new Set);var r=n+"__bubble";o.has(r)||(dp(i,n,2,!1),o.add(r))}function ZE(n,i,o){var r=0;i&&(r|=4),dp(o,n,r,i)}var Rd="_reactListening"+Math.random().toString(36).slice(2);function QE(n){if(!n[Rd]){n[Rd]=!0,iT.forEach(function(o){o!=="selectionchange"&&(Jb.has(o)||ZE(o,!1,n),ZE(o,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Rd]||(i[Rd]=!0,ZE("selectionchange",!1,i))}}function dp(n,i,o,r){switch(Up(i)){case 2:var f=Oy;break;case 8:f=by;break;default:f=dA}o=f.bind(null,i,o,n),f=void 0,!Sh||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),r?f!==void 0?n.addEventListener(i,o,{capture:!0,passive:f}):n.addEventListener(i,o,!0):f!==void 0?n.addEventListener(i,o,{passive:f}):n.addEventListener(i,o,!1)}function $E(n,i,o,r,f){var m=r;if((i&1)===0&&(i&2)===0&&r!==null)e:for(;;){if(r===null)return;var g=r.tag;if(g===3||g===4){var C=r.stateNode.containerInfo;if(C===f)break;if(g===4)for(g=r.return;g!==null;){var x=g.tag;if((x===3||x===4)&&g.stateNode.containerInfo===f)return;g=g.return}for(;C!==null;){if(g=fs(C),g===null)return;if(x=g.tag,x===5||x===6||x===26||x===27){r=m=g;continue e}C=C.parentNode}}r=r.return}TT(function(){var Q=m,se=Rh(o),fe=[];e:{var J=KT.get(n);if(J!==void 0){var te=Mu,Pe=n;switch(n){case"keypress":if(vu(o)===0)break e;case"keydown":case"keyup":te=WO;break;case"focusin":Pe="focus",te=Ih;break;case"focusout":Pe="blur",te=Ih;break;case"beforeblur":case"afterblur":te=Ih;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":te=pT;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":te=UO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":te=ZO;break;case jT:case zT:case YT:te=GO;break;case VT:te=$O;break;case"scroll":case"scrollend":te=HO;break;case"wheel":te=eb;break;case"copy":case"cut":case"paste":te=BO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":te=IT;break;case"toggle":case"beforetoggle":te=nb}var xe=(i&4)!==0,_t=!xe&&(n==="scroll"||n==="scrollend"),K=xe?J!==null?J+"Capture":null:J;xe=[];for(var B=Q,q;B!==null;){var ce=B;if(q=ce.stateNode,ce=ce.tag,ce!==5&&ce!==26&&ce!==27||q===null||K===null||(ce=zr(B,K),ce!=null&&xe.push(Nc(B,ce,q))),_t)break;B=B.return}0<xe.length&&(J=new te(J,Pe,null,o,se),fe.push({event:J,listeners:xe}))}}if((i&7)===0){e:{if(J=n==="mouseover"||n==="pointerover",te=n==="mouseout"||n==="pointerout",J&&o!==mh&&(Pe=o.relatedTarget||o.fromElement)&&(fs(Pe)||Pe[ds]))break e;if((te||J)&&(J=se.window===se?se:(J=se.ownerDocument)?J.defaultView||J.parentWindow:window,te?(Pe=o.relatedTarget||o.toElement,te=Q,Pe=Pe?fs(Pe):null,Pe!==null&&(_t=c(Pe),xe=Pe.tag,Pe!==_t||xe!==5&&xe!==27&&xe!==6)&&(Pe=null)):(te=null,Pe=Q),te!==Pe)){if(xe=pT,ce="onMouseLeave",K="onMouseEnter",B="mouse",(n==="pointerout"||n==="pointerover")&&(xe=IT,ce="onPointerLeave",K="onPointerEnter",B="pointer"),_t=te==null?J:jr(te),q=Pe==null?J:jr(Pe),J=new xe(ce,B+"leave",te,o,se),J.target=_t,J.relatedTarget=q,ce=null,fs(se)===Q&&(xe=new xe(K,B+"enter",Pe,o,se),xe.target=q,xe.relatedTarget=_t,ce=xe),_t=ce,te&&Pe)t:{for(xe=te,K=Pe,B=0,q=xe;q;q=Ks(q))B++;for(q=0,ce=K;ce;ce=Ks(ce))q++;for(;0<B-q;)xe=Ks(xe),B--;for(;0<q-B;)K=Ks(K),q--;for(;B--;){if(xe===K||K!==null&&xe===K.alternate)break t;xe=Ks(xe),K=Ks(K)}xe=null}else xe=null;te!==null&&fp(fe,J,te,xe,!1),Pe!==null&&_t!==null&&fp(fe,_t,Pe,xe,!0)}}e:{if(J=Q?jr(Q):window,te=J.nodeName&&J.nodeName.toLowerCase(),te==="select"||te==="input"&&J.type==="file")var Me=MT;else if(vT(J))if(LT)Me=fb;else{Me=ub;var qe=cb}else te=J.nodeName,!te||te.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?Q&&Ah(Q.elementType)&&(Me=MT):Me=db;if(Me&&(Me=Me(n,Q))){DT(fe,Me,o,se);break e}qe&&qe(n,J,Q),n==="focusout"&&Q&&J.type==="number"&&Q.memoizedProps.value!=null&&Eh(J,"number",J.value)}switch(qe=Q?jr(Q):window,n){case"focusin":(vT(qe)||qe.contentEditable==="true")&&(_s=qe,vh=Q,Qr=null);break;case"focusout":Qr=vh=_s=null;break;case"mousedown":Dh=!0;break;case"contextmenu":case"mouseup":case"dragend":Dh=!1,BT(fe,o,se);break;case"selectionchange":if(Eb)break;case"keydown":case"keyup":BT(fe,o,se)}var Le;if(Nh)e:{switch(n){case"compositionstart":var Ue="onCompositionStart";break e;case"compositionend":Ue="onCompositionEnd";break e;case"compositionupdate":Ue="onCompositionUpdate";break e}Ue=void 0}else ps?bT(n,o)&&(Ue="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Ue="onCompositionStart");Ue&&(CT&&o.locale!=="ko"&&(ps||Ue!=="onCompositionStart"?Ue==="onCompositionEnd"&&ps&&(Le=ST()):(ml=se,gh="value"in ml?ml.value:ml.textContent,ps=!0)),qe=Td(Q,Ue),0<qe.length&&(Ue=new _T(Ue,n,null,o,se),fe.push({event:Ue,listeners:qe}),Le?Ue.data=Le:(Le=yT(o),Le!==null&&(Ue.data=Le)))),(Le=ib?lb(n,o):ob(n,o))&&(Ue=Td(Q,"onBeforeInput"),0<Ue.length&&(qe=new _T("onBeforeInput","beforeinput",null,o,se),fe.push({event:qe,listeners:Ue}),qe.data=Le)),Zb(fe,n,Q,o,se)}up(fe,i)})}function Nc(n,i,o){return{instance:n,listener:i,currentTarget:o}}function Td(n,i){for(var o=i+"Capture",r=[];n!==null;){var f=n,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=zr(n,o),f!=null&&r.unshift(Nc(n,f,m)),f=zr(n,i),f!=null&&r.push(Nc(n,f,m))),n.tag===3)return r;n=n.return}return[]}function Ks(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function fp(n,i,o,r,f){for(var m=i._reactName,g=[];o!==null&&o!==r;){var C=o,x=C.alternate,Q=C.stateNode;if(C=C.tag,x!==null&&x===r)break;C!==5&&C!==26&&C!==27||Q===null||(x=Q,f?(Q=zr(o,m),Q!=null&&g.unshift(Nc(o,Q,x))):f||(Q=zr(o,m),Q!=null&&g.push(Nc(o,Q,x)))),o=o.return}g.length!==0&&n.push({event:i,listeners:g})}var ey=/\r\n?/g,ty=/\u0000|\uFFFD/g;function hp(n){return(typeof n=="string"?n:""+n).replace(ey,`
`).replace(ty,"")}function Ep(n,i){return i=hp(i),hp(n)===i}function Sd(){}function pt(n,i,o,r,f,m){switch(o){case"children":typeof r=="string"?i==="body"||i==="textarea"&&r===""||Ts(n,r):(typeof r=="number"||typeof r=="bigint")&&i!=="body"&&Ts(n,""+r);break;case"className":Cu(n,"class",r);break;case"tabIndex":Cu(n,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":Cu(n,o,r);break;case"style":mT(n,r,m);break;case"data":if(i!=="object"){Cu(n,"data",r);break}case"src":case"href":if(r===""&&(i!=="a"||o!=="href")){n.removeAttribute(o);break}if(r==null||typeof r=="function"||typeof r=="symbol"||typeof r=="boolean"){n.removeAttribute(o);break}r=bu(""+r),n.setAttribute(o,r);break;case"action":case"formAction":if(typeof r=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(i!=="input"&&pt(n,i,"name",f.name,f,null),pt(n,i,"formEncType",f.formEncType,f,null),pt(n,i,"formMethod",f.formMethod,f,null),pt(n,i,"formTarget",f.formTarget,f,null)):(pt(n,i,"encType",f.encType,f,null),pt(n,i,"method",f.method,f,null),pt(n,i,"target",f.target,f,null)));if(r==null||typeof r=="symbol"||typeof r=="boolean"){n.removeAttribute(o);break}r=bu(""+r),n.setAttribute(o,r);break;case"onClick":r!=null&&(n.onclick=Sd);break;case"onScroll":r!=null&&$e("scroll",n);break;case"onScrollEnd":r!=null&&$e("scrollend",n);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(l(61));if(o=r.__html,o!=null){if(f.children!=null)throw Error(l(60));n.innerHTML=o}}break;case"multiple":n.multiple=r&&typeof r!="function"&&typeof r!="symbol";break;case"muted":n.muted=r&&typeof r!="function"&&typeof r!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(r==null||typeof r=="function"||typeof r=="boolean"||typeof r=="symbol"){n.removeAttribute("xlink:href");break}o=bu(""+r),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":r!=null&&typeof r!="function"&&typeof r!="symbol"?n.setAttribute(o,""+r):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&typeof r!="function"&&typeof r!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":r===!0?n.setAttribute(o,""):r!==!1&&r!=null&&typeof r!="function"&&typeof r!="symbol"?n.setAttribute(o,r):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":r!=null&&typeof r!="function"&&typeof r!="symbol"&&!isNaN(r)&&1<=r?n.setAttribute(o,r):n.removeAttribute(o);break;case"rowSpan":case"start":r==null||typeof r=="function"||typeof r=="symbol"||isNaN(r)?n.removeAttribute(o):n.setAttribute(o,r);break;case"popover":$e("beforetoggle",n),$e("toggle",n),Iu(n,"popover",r);break;case"xlinkActuate":Ui(n,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":Ui(n,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":Ui(n,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":Ui(n,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":Ui(n,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":Ui(n,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":Ui(n,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":Ui(n,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":Ui(n,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":Iu(n,"is",r);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=MO.get(o)||o,Iu(n,o,r))}}function JE(n,i,o,r,f,m){switch(o){case"style":mT(n,r,m);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(l(61));if(o=r.__html,o!=null){if(f.children!=null)throw Error(l(60));n.innerHTML=o}}break;case"children":typeof r=="string"?Ts(n,r):(typeof r=="number"||typeof r=="bigint")&&Ts(n,""+r);break;case"onScroll":r!=null&&$e("scroll",n);break;case"onScrollEnd":r!=null&&$e("scrollend",n);break;case"onClick":r!=null&&(n.onclick=Sd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!lT.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),i=o.slice(2,f?o.length-7:void 0),m=n[fa]||null,m=m!=null?m[o]:null,typeof m=="function"&&n.removeEventListener(i,m,f),typeof r=="function")){typeof m!="function"&&m!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(i,r,f);break e}o in n?n[o]=r:r===!0?n.setAttribute(o,""):Iu(n,o,r)}}}function kn(n,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":$e("error",n),$e("load",n);var r=!1,f=!1,m;for(m in o)if(o.hasOwnProperty(m)){var g=o[m];if(g!=null)switch(m){case"src":r=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(l(137,i));default:pt(n,i,m,g,o,null)}}f&&pt(n,i,"srcSet",o.srcSet,o,null),r&&pt(n,i,"src",o.src,o,null);return;case"input":$e("invalid",n);var C=m=g=f=null,x=null,Q=null;for(r in o)if(o.hasOwnProperty(r)){var se=o[r];if(se!=null)switch(r){case"name":f=se;break;case"type":g=se;break;case"checked":x=se;break;case"defaultChecked":Q=se;break;case"value":m=se;break;case"defaultValue":C=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(l(137,i));break;default:pt(n,i,r,se,o,null)}}fT(n,m,C,x,Q,g,f,!1),Nu(n);return;case"select":$e("invalid",n),r=g=m=null;for(f in o)if(o.hasOwnProperty(f)&&(C=o[f],C!=null))switch(f){case"value":m=C;break;case"defaultValue":g=C;break;case"multiple":r=C;default:pt(n,i,f,C,o,null)}i=m,o=g,n.multiple=!!r,i!=null?Rs(n,!!r,i,!1):o!=null&&Rs(n,!!r,o,!0);return;case"textarea":$e("invalid",n),m=f=r=null;for(g in o)if(o.hasOwnProperty(g)&&(C=o[g],C!=null))switch(g){case"value":r=C;break;case"defaultValue":f=C;break;case"children":m=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(l(91));break;default:pt(n,i,g,C,o,null)}ET(n,r,f,m),Nu(n);return;case"option":for(x in o)if(o.hasOwnProperty(x)&&(r=o[x],r!=null))switch(x){case"selected":n.selected=r&&typeof r!="function"&&typeof r!="symbol";break;default:pt(n,i,x,r,o,null)}return;case"dialog":$e("beforetoggle",n),$e("toggle",n),$e("cancel",n),$e("close",n);break;case"iframe":case"object":$e("load",n);break;case"video":case"audio":for(r=0;r<Cc.length;r++)$e(Cc[r],n);break;case"image":$e("error",n),$e("load",n);break;case"details":$e("toggle",n);break;case"embed":case"source":case"link":$e("error",n),$e("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in o)if(o.hasOwnProperty(Q)&&(r=o[Q],r!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(l(137,i));default:pt(n,i,Q,r,o,null)}return;default:if(Ah(i)){for(se in o)o.hasOwnProperty(se)&&(r=o[se],r!==void 0&&JE(n,i,se,r,o,void 0));return}}for(C in o)o.hasOwnProperty(C)&&(r=o[C],r!=null&&pt(n,i,C,r,o,null))}function ny(n,i,o,r){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,g=null,C=null,x=null,Q=null,se=null;for(te in o){var fe=o[te];if(o.hasOwnProperty(te)&&fe!=null)switch(te){case"checked":break;case"value":break;case"defaultValue":x=fe;default:r.hasOwnProperty(te)||pt(n,i,te,null,r,fe)}}for(var J in r){var te=r[J];if(fe=o[J],r.hasOwnProperty(J)&&(te!=null||fe!=null))switch(J){case"type":m=te;break;case"name":f=te;break;case"checked":Q=te;break;case"defaultChecked":se=te;break;case"value":g=te;break;case"defaultValue":C=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(l(137,i));break;default:te!==fe&&pt(n,i,J,te,r,fe)}}hh(n,g,C,x,Q,se,m,f);return;case"select":te=g=C=J=null;for(m in o)if(x=o[m],o.hasOwnProperty(m)&&x!=null)switch(m){case"value":break;case"multiple":te=x;default:r.hasOwnProperty(m)||pt(n,i,m,null,r,x)}for(f in r)if(m=r[f],x=o[f],r.hasOwnProperty(f)&&(m!=null||x!=null))switch(f){case"value":J=m;break;case"defaultValue":C=m;break;case"multiple":g=m;default:m!==x&&pt(n,i,f,m,r,x)}i=C,o=g,r=te,J!=null?Rs(n,!!o,J,!1):!!r!=!!o&&(i!=null?Rs(n,!!o,i,!0):Rs(n,!!o,o?[]:"",!1));return;case"textarea":te=J=null;for(C in o)if(f=o[C],o.hasOwnProperty(C)&&f!=null&&!r.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:pt(n,i,C,null,r,f)}for(g in r)if(f=r[g],m=o[g],r.hasOwnProperty(g)&&(f!=null||m!=null))switch(g){case"value":J=f;break;case"defaultValue":te=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(l(91));break;default:f!==m&&pt(n,i,g,f,r,m)}hT(n,J,te);return;case"option":for(var Pe in o)if(J=o[Pe],o.hasOwnProperty(Pe)&&J!=null&&!r.hasOwnProperty(Pe))switch(Pe){case"selected":n.selected=!1;break;default:pt(n,i,Pe,null,r,J)}for(x in r)if(J=r[x],te=o[x],r.hasOwnProperty(x)&&J!==te&&(J!=null||te!=null))switch(x){case"selected":n.selected=J&&typeof J!="function"&&typeof J!="symbol";break;default:pt(n,i,x,J,r,te)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var xe in o)J=o[xe],o.hasOwnProperty(xe)&&J!=null&&!r.hasOwnProperty(xe)&&pt(n,i,xe,null,r,J);for(Q in r)if(J=r[Q],te=o[Q],r.hasOwnProperty(Q)&&J!==te&&(J!=null||te!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(l(137,i));break;default:pt(n,i,Q,J,r,te)}return;default:if(Ah(i)){for(var _t in o)J=o[_t],o.hasOwnProperty(_t)&&J!==void 0&&!r.hasOwnProperty(_t)&&JE(n,i,_t,void 0,r,J);for(se in r)J=r[se],te=o[se],!r.hasOwnProperty(se)||J===te||J===void 0&&te===void 0||JE(n,i,se,J,r,te);return}}for(var K in o)J=o[K],o.hasOwnProperty(K)&&J!=null&&!r.hasOwnProperty(K)&&pt(n,i,K,null,r,J);for(fe in r)J=r[fe],te=o[fe],!r.hasOwnProperty(fe)||J===te||J==null&&te==null||pt(n,i,fe,J,r,te)}var eA=null,tA=null;function gd(n){return n.nodeType===9?n:n.ownerDocument}function Ap(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function mp(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function nA(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var aA=null;function ay(){var n=window.event;return n&&n.type==="popstate"?n===aA?!1:(aA=n,!0):(aA=null,!1)}var Rp=typeof setTimeout=="function"?setTimeout:void 0,iy=typeof clearTimeout=="function"?clearTimeout:void 0,Tp=typeof Promise=="function"?Promise:void 0,ly=typeof queueMicrotask=="function"?queueMicrotask:typeof Tp<"u"?function(n){return Tp.resolve(null).then(n).catch(oy)}:Rp;function oy(n){setTimeout(function(){throw n})}function Ll(n){return n==="head"}function Sp(n,i){var o=i,r=0,f=0;do{var m=o.nextSibling;if(n.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"){if(0<r&&8>r){o=r;var g=n.ownerDocument;if(o&1&&Oc(g.documentElement),o&2&&Oc(g.body),o&4)for(o=g.head,Oc(o),g=o.firstChild;g;){var C=g.nextSibling,x=g.nodeName;g[Fr]||x==="SCRIPT"||x==="STYLE"||x==="LINK"&&g.rel.toLowerCase()==="stylesheet"||o.removeChild(g),g=C}}if(f===0){n.removeChild(m),xc(i);return}f--}else o==="$"||o==="$?"||o==="$!"?f++:r=o.charCodeAt(0)-48;else r=0;o=m}while(o);xc(i)}function iA(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":iA(o),ch(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function sy(n,i,o,r){for(;n.nodeType===1;){var f=o;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!r&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(r){if(!n[Fr])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(m=n.getAttribute("rel"),m==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(m!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(m=n.getAttribute("src"),(m!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===m)return n}else return n;if(n=ui(n.nextSibling),n===null)break}return null}function ry(n,i,o){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=ui(n.nextSibling),n===null))return null;return n}function lA(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function cy(n,i){var o=n.ownerDocument;if(n.data!=="$?"||o.readyState==="complete")i();else{var r=function(){i(),o.removeEventListener("DOMContentLoaded",r)};o.addEventListener("DOMContentLoaded",r),n._reactRetry=r}}function ui(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return n}var oA=null;function gp(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"){if(i===0)return n;i--}else o==="/$"&&i++}n=n.previousSibling}return null}function pp(n,i,o){switch(i=gd(o),n){case"html":if(n=i.documentElement,!n)throw Error(l(452));return n;case"head":if(n=i.head,!n)throw Error(l(453));return n;case"body":if(n=i.body,!n)throw Error(l(454));return n;default:throw Error(l(451))}}function Oc(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);ch(n)}var Qa=new Map,_p=new Set;function pd(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Xi=M.d;M.d={f:uy,r:dy,D:fy,C:hy,L:Ey,m:Ay,X:Ry,S:my,M:Ty};function uy(){var n=Xi.f(),i=fd();return n||i}function dy(n){var i=hs(n);i!==null&&i.tag===5&&i.type==="form"?jS(i):Xi.r(n)}var Ws=typeof document>"u"?null:document;function Ip(n,i,o){var r=Ws;if(r&&typeof i=="string"&&i){var f=Ya(i);f='link[rel="'+n+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),_p.has(f)||(_p.add(f),n={rel:n,crossOrigin:o,href:i},r.querySelector(f)===null&&(i=r.createElement("link"),kn(i,"link",n),In(i),r.head.appendChild(i)))}}function fy(n){Xi.D(n),Ip("dns-prefetch",n,null)}function hy(n,i){Xi.C(n,i),Ip("preconnect",n,i)}function Ey(n,i,o){Xi.L(n,i,o);var r=Ws;if(r&&n&&i){var f='link[rel="preload"][as="'+Ya(i)+'"]';i==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+Ya(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+Ya(o.imageSizes)+'"]')):f+='[href="'+Ya(n)+'"]';var m=f;switch(i){case"style":m=qs(n);break;case"script":m=Xs(n)}Qa.has(m)||(n=R({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:n,as:i},o),Qa.set(m,n),r.querySelector(f)!==null||i==="style"&&r.querySelector(bc(m))||i==="script"&&r.querySelector(yc(m))||(i=r.createElement("link"),kn(i,"link",n),In(i),r.head.appendChild(i)))}}function Ay(n,i){Xi.m(n,i);var o=Ws;if(o&&n){var r=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+Ya(r)+'"][href="'+Ya(n)+'"]',m=f;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Xs(n)}if(!Qa.has(m)&&(n=R({rel:"modulepreload",href:n},i),Qa.set(m,n),o.querySelector(f)===null)){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(yc(m)))return}r=o.createElement("link"),kn(r,"link",n),In(r),o.head.appendChild(r)}}}function my(n,i,o){Xi.S(n,i,o);var r=Ws;if(r&&n){var f=Es(r).hoistableStyles,m=qs(n);i=i||"default";var g=f.get(m);if(!g){var C={loading:0,preload:null};if(g=r.querySelector(bc(m)))C.loading=5;else{n=R({rel:"stylesheet",href:n,"data-precedence":i},o),(o=Qa.get(m))&&sA(n,o);var x=g=r.createElement("link");In(x),kn(x,"link",n),x._p=new Promise(function(Q,se){x.onload=Q,x.onerror=se}),x.addEventListener("load",function(){C.loading|=1}),x.addEventListener("error",function(){C.loading|=2}),C.loading|=4,_d(g,i,r)}g={type:"stylesheet",instance:g,count:1,state:C},f.set(m,g)}}}function Ry(n,i){Xi.X(n,i);var o=Ws;if(o&&n){var r=Es(o).hoistableScripts,f=Xs(n),m=r.get(f);m||(m=o.querySelector(yc(f)),m||(n=R({src:n,async:!0},i),(i=Qa.get(f))&&rA(n,i),m=o.createElement("script"),In(m),kn(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},r.set(f,m))}}function Ty(n,i){Xi.M(n,i);var o=Ws;if(o&&n){var r=Es(o).hoistableScripts,f=Xs(n),m=r.get(f);m||(m=o.querySelector(yc(f)),m||(n=R({src:n,async:!0,type:"module"},i),(i=Qa.get(f))&&rA(n,i),m=o.createElement("script"),In(m),kn(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},r.set(f,m))}}function Cp(n,i,o,r){var f=(f=re.current)?pd(f):null;if(!f)throw Error(l(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=qs(o.href),o=Es(f).hoistableStyles,r=o.get(i),r||(r={type:"style",instance:null,count:0,state:null},o.set(i,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=qs(o.href);var m=Es(f).hoistableStyles,g=m.get(n);if(g||(f=f.ownerDocument||f,g={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(n,g),(m=f.querySelector(bc(n)))&&!m._p&&(g.instance=m,g.state.loading=5),Qa.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Qa.set(n,o),m||Sy(f,n,o,g.state))),i&&r===null)throw Error(l(528,""));return g}if(i&&r!==null)throw Error(l(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Xs(o),o=Es(f).hoistableScripts,r=o.get(i),r||(r={type:"script",instance:null,count:0,state:null},o.set(i,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(l(444,n))}}function qs(n){return'href="'+Ya(n)+'"'}function bc(n){return'link[rel="stylesheet"]['+n+"]"}function Np(n){return R({},n,{"data-precedence":n.precedence,precedence:null})}function Sy(n,i,o,r){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?r.loading=1:(i=n.createElement("link"),r.preload=i,i.addEventListener("load",function(){return r.loading|=1}),i.addEventListener("error",function(){return r.loading|=2}),kn(i,"link",o),In(i),n.head.appendChild(i))}function Xs(n){return'[src="'+Ya(n)+'"]'}function yc(n){return"script[async]"+n}function Op(n,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var r=n.querySelector('style[data-href~="'+Ya(o.href)+'"]');if(r)return i.instance=r,In(r),r;var f=R({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return r=(n.ownerDocument||n).createElement("style"),In(r),kn(r,"style",f),_d(r,o.precedence,n),i.instance=r;case"stylesheet":f=qs(o.href);var m=n.querySelector(bc(f));if(m)return i.state.loading|=4,i.instance=m,In(m),m;r=Np(o),(f=Qa.get(f))&&sA(r,f),m=(n.ownerDocument||n).createElement("link"),In(m);var g=m;return g._p=new Promise(function(C,x){g.onload=C,g.onerror=x}),kn(m,"link",r),i.state.loading|=4,_d(m,o.precedence,n),i.instance=m;case"script":return m=Xs(o.src),(f=n.querySelector(yc(m)))?(i.instance=f,In(f),f):(r=o,(f=Qa.get(m))&&(r=R({},o),rA(r,f)),n=n.ownerDocument||n,f=n.createElement("script"),In(f),kn(f,"link",r),n.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(l(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(r=i.instance,i.state.loading|=4,_d(r,o.precedence,n));return i.instance}function _d(n,i,o){for(var r=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=r.length?r[r.length-1]:null,m=f,g=0;g<r.length;g++){var C=r[g];if(C.dataset.precedence===i)m=C;else if(m!==f)break}m?m.parentNode.insertBefore(n,m.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(n,i.firstChild))}function sA(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function rA(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var Id=null;function bp(n,i,o){if(Id===null){var r=new Map,f=Id=new Map;f.set(o,r)}else f=Id,r=f.get(o),r||(r=new Map,f.set(o,r));if(r.has(n))return r;for(r.set(n,null),o=o.getElementsByTagName(n),f=0;f<o.length;f++){var m=o[f];if(!(m[Fr]||m[Vn]||n==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var g=m.getAttribute(i)||"";g=n+g;var C=r.get(g);C?C.push(m):r.set(g,[m])}}return r}function yp(n,i,o){n=n.ownerDocument||n,n.head.insertBefore(o,i==="title"?n.querySelector("head > title"):null)}function gy(n,i,o){if(o===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return n=i.disabled,typeof i.precedence=="string"&&n==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function vp(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var vc=null;function py(){}function _y(n,i,o){if(vc===null)throw Error(l(475));var r=vc;if(i.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var f=qs(o.href),m=n.querySelector(bc(f));if(m){n=m._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(r.count++,r=Cd.bind(r),n.then(r,r)),i.state.loading|=4,i.instance=m,In(m);return}m=n.ownerDocument||n,o=Np(o),(f=Qa.get(f))&&sA(o,f),m=m.createElement("link"),In(m);var g=m;g._p=new Promise(function(C,x){g.onload=C,g.onerror=x}),kn(m,"link",o),i.instance=m}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(i,n),(n=i.state.preload)&&(i.state.loading&3)===0&&(r.count++,i=Cd.bind(r),n.addEventListener("load",i),n.addEventListener("error",i))}}function Iy(){if(vc===null)throw Error(l(475));var n=vc;return n.stylesheets&&n.count===0&&cA(n,n.stylesheets),0<n.count?function(i){var o=setTimeout(function(){if(n.stylesheets&&cA(n,n.stylesheets),n.unsuspend){var r=n.unsuspend;n.unsuspend=null,r()}},6e4);return n.unsuspend=i,function(){n.unsuspend=null,clearTimeout(o)}}:null}function Cd(){if(this.count--,this.count===0){if(this.stylesheets)cA(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Nd=null;function cA(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Nd=new Map,i.forEach(Cy,n),Nd=null,Cd.call(n))}function Cy(n,i){if(!(i.state.loading&4)){var o=Nd.get(n);if(o)var r=o.get(null);else{o=new Map,Nd.set(n,o);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var g=f[m];(g.nodeName==="LINK"||g.getAttribute("media")!=="not all")&&(o.set(g.dataset.precedence,g),r=g)}r&&o.set(null,r)}f=i.instance,g=f.getAttribute("data-precedence"),m=o.get(g)||r,m===r&&o.set(null,f),o.set(g,f),this.count++,r=Cd.bind(this),f.addEventListener("load",r),f.addEventListener("error",r),m?m.parentNode.insertBefore(f,m.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),i.state.loading|=4}}var Dc={$$typeof:P,Provider:null,Consumer:null,_currentValue:W,_currentValue2:W,_threadCount:0};function Ny(n,i,o,r,f,m,g,C){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=lh(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=lh(0),this.hiddenUpdates=lh(null),this.identifierPrefix=r,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=g,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=C,this.incompleteTransitions=new Map}function Dp(n,i,o,r,f,m,g,C,x,Q,se,fe){return n=new Ny(n,i,o,g,C,x,Q,fe),i=1,m===!0&&(i|=24),m=_a(3,null,null,i),n.current=m,m.stateNode=n,i=Yh(),i.refCount++,n.pooledCache=i,i.refCount++,m.memoizedState={element:r,isDehydrated:o,cache:i},qh(m),n}function Mp(n){return n?(n=Os,n):Os}function Lp(n,i,o,r,f,m){f=Mp(f),r.context===null?r.context=f:r.pendingContext=f,r=Sl(i),r.payload={element:o},m=m===void 0?null:m,m!==null&&(r.callback=m),o=gl(n,r,i),o!==null&&(ba(o,n,i),oc(o,n,i))}function Hp(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<i?o:i}}function uA(n,i){Hp(n,i),(n=n.alternate)&&Hp(n,i)}function xp(n){if(n.tag===13){var i=Ns(n,67108864);i!==null&&ba(i,n,67108864),uA(n,67108864)}}var Od=!0;function Oy(n,i,o,r){var f=w.T;w.T=null;var m=M.p;try{M.p=2,dA(n,i,o,r)}finally{M.p=m,w.T=f}}function by(n,i,o,r){var f=w.T;w.T=null;var m=M.p;try{M.p=8,dA(n,i,o,r)}finally{M.p=m,w.T=f}}function dA(n,i,o,r){if(Od){var f=fA(r);if(f===null)$E(n,i,r,bd,o),kp(n,r);else if(vy(f,n,i,o,r))r.stopPropagation();else if(kp(n,r),i&4&&-1<yy.indexOf(n)){for(;f!==null;){var m=hs(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var g=uo(m.pendingLanes);if(g!==0){var C=m;for(C.pendingLanes|=2,C.entangledLanes|=2;g;){var x=1<<31-ga(g);C.entanglements[1]|=x,g&=~x}Ci(m),(mt&6)===0&&(ud=nt()+500,Ic(0))}}break;case 13:C=Ns(m,2),C!==null&&ba(C,m,2),fd(),uA(m,2)}if(m=fA(r),m===null&&$E(n,i,r,bd,o),m===f)break;f=m}f!==null&&r.stopPropagation()}else $E(n,i,r,null,o)}}function fA(n){return n=Rh(n),hA(n)}var bd=null;function hA(n){if(bd=null,n=fs(n),n!==null){var i=c(n);if(i===null)n=null;else{var o=i.tag;if(o===13){if(n=d(i),n!==null)return n;n=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return bd=n,null}function Up(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(it()){case Et:return 2;case At:return 8;case Wt:case co:return 32;case us:return 268435456;default:return 32}default:return 32}}var EA=!1,Hl=null,xl=null,Ul=null,Mc=new Map,Lc=new Map,kl=[],yy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function kp(n,i){switch(n){case"focusin":case"focusout":Hl=null;break;case"dragenter":case"dragleave":xl=null;break;case"mouseover":case"mouseout":Ul=null;break;case"pointerover":case"pointerout":Mc.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lc.delete(i.pointerId)}}function Hc(n,i,o,r,f,m){return n===null||n.nativeEvent!==m?(n={blockedOn:i,domEventName:o,eventSystemFlags:r,nativeEvent:m,targetContainers:[f]},i!==null&&(i=hs(i),i!==null&&xp(i)),n):(n.eventSystemFlags|=r,i=n.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),n)}function vy(n,i,o,r,f){switch(i){case"focusin":return Hl=Hc(Hl,n,i,o,r,f),!0;case"dragenter":return xl=Hc(xl,n,i,o,r,f),!0;case"mouseover":return Ul=Hc(Ul,n,i,o,r,f),!0;case"pointerover":var m=f.pointerId;return Mc.set(m,Hc(Mc.get(m)||null,n,i,o,r,f)),!0;case"gotpointercapture":return m=f.pointerId,Lc.set(m,Hc(Lc.get(m)||null,n,i,o,r,f)),!0}return!1}function Pp(n){var i=fs(n.target);if(i!==null){var o=c(i);if(o!==null){if(i=o.tag,i===13){if(i=d(o),i!==null){n.blockedOn=i,_O(n.priority,function(){if(o.tag===13){var r=Oa();r=oh(r);var f=Ns(o,r);f!==null&&ba(f,o,r),uA(o,r)}});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function yd(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var o=fA(n.nativeEvent);if(o===null){o=n.nativeEvent;var r=new o.constructor(o.type,o);mh=r,o.target.dispatchEvent(r),mh=null}else return i=hs(o),i!==null&&xp(i),n.blockedOn=o,!1;i.shift()}return!0}function Gp(n,i,o){yd(n)&&o.delete(i)}function Dy(){EA=!1,Hl!==null&&yd(Hl)&&(Hl=null),xl!==null&&yd(xl)&&(xl=null),Ul!==null&&yd(Ul)&&(Ul=null),Mc.forEach(Gp),Lc.forEach(Gp)}function vd(n,i){n.blockedOn===i&&(n.blockedOn=null,EA||(EA=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Dy)))}var Dd=null;function wp(n){Dd!==n&&(Dd=n,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Dd===n&&(Dd=null);for(var i=0;i<n.length;i+=3){var o=n[i],r=n[i+1],f=n[i+2];if(typeof r!="function"){if(hA(r||o)===null)continue;break}var m=hs(o);m!==null&&(n.splice(i,3),i-=3,hE(m,{pending:!0,data:f,method:o.method,action:r},r,f))}}))}function xc(n){function i(x){return vd(x,n)}Hl!==null&&vd(Hl,n),xl!==null&&vd(xl,n),Ul!==null&&vd(Ul,n),Mc.forEach(i),Lc.forEach(i);for(var o=0;o<kl.length;o++){var r=kl[o];r.blockedOn===n&&(r.blockedOn=null)}for(;0<kl.length&&(o=kl[0],o.blockedOn===null);)Pp(o),o.blockedOn===null&&kl.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(r=0;r<o.length;r+=3){var f=o[r],m=o[r+1],g=f[fa]||null;if(typeof m=="function")g||wp(o);else if(g){var C=null;if(m&&m.hasAttribute("formAction")){if(f=m,g=m[fa]||null)C=g.formAction;else if(hA(f)!==null)continue}else C=g.action;typeof C=="function"?o[r+1]=C:(o.splice(r,3),r-=3),wp(o)}}}function AA(n){this._internalRoot=n}Md.prototype.render=AA.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(l(409));var o=i.current,r=Oa();Lp(o,r,n,i,null,null)},Md.prototype.unmount=AA.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;Lp(n.current,2,null,n,null,null),fd(),i[ds]=null}};function Md(n){this._internalRoot=n}Md.prototype.unstable_scheduleHydration=function(n){if(n){var i=nT();n={blockedOn:null,target:n,priority:i};for(var o=0;o<kl.length&&i!==0&&i<kl[o].priority;o++);kl.splice(o,0,n),o===0&&Pp(n)}};var Bp=t.version;if(Bp!=="19.1.0")throw Error(l(527,Bp,"19.1.0"));M.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(l(188)):(n=Object.keys(n).join(","),Error(l(268,n)));return n=E(i),n=n!==null?A(n):null,n=n===null?null:n.stateNode,n};var My={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:w,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ld=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ld.isDisabled&&Ld.supportsFiber)try{Gr=Ld.inject(My),Sa=Ld}catch{}}return kc.createRoot=function(n,i){if(!s(n))throw Error(l(299));var o=!1,r="",f=ng,m=ag,g=ig,C=null;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(r=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(m=i.onCaughtError),i.onRecoverableError!==void 0&&(g=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(C=i.unstable_transitionCallbacks)),i=Dp(n,1,!1,null,null,o,r,f,m,g,C,null),n[ds]=i.current,QE(n),new AA(i)},kc.hydrateRoot=function(n,i,o){if(!s(n))throw Error(l(299));var r=!1,f="",m=ng,g=ag,C=ig,x=null,Q=null;return o!=null&&(o.unstable_strictMode===!0&&(r=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(g=o.onCaughtError),o.onRecoverableError!==void 0&&(C=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(x=o.unstable_transitionCallbacks),o.formState!==void 0&&(Q=o.formState)),i=Dp(n,1,!0,i,o??null,r,f,m,g,C,x,Q),i.context=Mp(null),o=i.current,r=Oa(),r=oh(r),f=Sl(r),f.callback=null,gl(o,f,r),o=r,i.current.lanes=o,Br(i,o),Ci(i),n[ds]=i.current,QE(n),new Md(i)},kc.version="19.1.0",kc}var Qp;function Yy(){if(Qp)return TA.exports;Qp=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),TA.exports=zy(),TA.exports}var Vy=Yy(),N=wm();const ft=Gm(N),Df=Uy({__proto__:null,default:ft},[N]),Ky="7.2",Wy=16;var gn=(e=>(e.Exact="Exact",e.SkillSequence="SkillSequence",e.Edited="Edited",e))(gn||{}),Ai=(e=>(e.Record="Record",e.SkillSequencePresets="SkillSequencePresets",e.MarkerTrackIndividual="MarkerTrackIndividual",e.MarkerTracksCombined="MarkerTracksCombined",e))(Ai||{}),Ja=(e=>(e[e.RealTime=0]="RealTime",e[e.RealTimeAutoPause=1]="RealTimeAutoPause",e[e.Manual=2]="Manual",e))(Ja||{}),Kl=(e=>(e[e.Initial=0]="Initial",e[e.FpsTax=1]="FpsTax",e[e.AllaganGcdFormula=2]="AllaganGcdFormula",e))(Kl||{});const Mf={version:2};let BI=!1;function qy(){return BI}const Lf="DT",Xy=localStorage.length===0;function dn(e){let t=localStorage.getItem(Lf+"."+e);return localStorage.getItem(e)!==null&&(BI=!0),t}function Qt(e,t){localStorage.setItem(Lf+"."+e,t)}function nm(e){localStorage.removeItem(Lf+"."+e)}function FI(){Object.keys(localStorage).forEach(e=>{e.startsWith(Lf+".")&&localStorage.removeItem(e)})}const pn={epsilon:1e-6};var kt=(e=>(e[e.lvl70=70]="lvl70",e[e.lvl80=80]="lvl80",e[e.lvl90=90]="lvl90",e[e.lvl100=100]="lvl100",e))(kt||{});const jI=.1;var pe=(e=>(e.Fire="Fire",e.Ice="Ice",e.Lightning="Lightning",e.Physical="Physical",e.Other="Other",e))(pe||{}),jt=(e=>(e.RNG="RNG",e.Never="Never",e.Always="Always",e))(jt||{}),qn=(e=>(e.Blocked="blocked by CD, animation lock or caster tax",e.SecondaryBlocked="blocked by secondary CD",e.NotEnoughMP="not enough MP",e.NotInCombat="must be in combat (after first damage application)",e.RequirementsNotMet="requirements not met",e.SkillNotUnlocked="skill not unlocked at provided level",e.BuffNoLongerAvailable="buff no longer available",e))(qn||{});function Bm(){return{unavailableReasons:[],ready:function(){return this.unavailableReasons.length===0},toString:function(){return this.ready()?"ready":this.unavailableReasons.join("; ")},addUnavailableReason:function(e){this.unavailableReasons.includes(e)||this.unavailableReasons.push(e)},clone:function(){const e=Bm();return this.unavailableReasons.forEach(t=>e.addUnavailableReason(t)),e}}}var k=(e=>(e.LeyLines="Ley Lines",e.Hyperphantasia="Hyperphantasia",e.Manafication="Manafication",e.Acceleration="Acceleration",e.Fuka="Fuka",e.Fugetsu="Fugetsu",e.EnhancedEnpi="Enhanced Enpi",e.NoMercy="No Mercy",e.PowerSurge="Power Surge",e.LanceCharge="Lance Charge",e.LifeOfTheDragon="Life Of The Dragon",e.EnhancedPiercingTalon="Enhanced Piercing Talon",e.LifeSurge="Life Surge",e.DivineMight="Divine Might",e.Requiescat="Requiescat",e.FightOrFlight="Fight Or Flight",e.Tincture="Tincture",e.ArcaneCircle="Arcane Circle",e.ArmysPaeon="Army's Paeon",e.BattleLitany="Battle Litany",e.BattleVoice="Battle Voice",e.Brotherhood="Brotherhood",e.Card_TheBalance="Card - The Balance",e.Card_TheSpear="Card - The Spear",e.ChainStratagem="Chain Stratagem",e.Devilment="Devilment",e.Divination="Divination",e.Dokumori="Dokumori",e.Embolden="Embolden",e.MagesBallad="Mage's Ballad",e.RadiantFinale1="Radiant Finale (1)",e.RadiantFinale2="Radiant Finale (2)",e.RadiantFinale3="Radiant Finale (3)",e.Barrage="Barrage",e.SearingLight="Searing Light",e.StandardFinish="Standard Finish",e.StarryMuse="Starry Muse",e.TechnicalFinish="Technical Finish",e.WanderersMinuet="The Wanderer's Minuet",e.RagingStrikes="Raging Strikes",e.DeathsDesign="Death's Design",e.Zoe="Zoe",e.Autophysis="Autophysis",e.Krasis="Krasis",e.Philosophia="Philosophia",e.Soteria="Soteria",e))(k||{}),Fe=(e=>(e.PolyglotOvercap="polyglot overcap",e.CometOverwrite="comet overwrite",e.PaletteOvercap="palette gauge overcap",e.DualcastEaten="dualcast dropped",e.ImbalancedMana="mana difference became more than 30",e.ComboBreak="broken combo",e.GIOverwrite="Grand Impact Ready overwrite",e.GIDrop="Grand Impact expired",e.ViceOfThornsDrop="Vice of Thorns expired",e.PrefulgenceDrop="Prefulgence expired",e.ManaficDrop="Manafication stacks expired",e.MagickedSwordplayDrop="Magicked Swordplay stacks expired",e.EspritOvercap="esprit gauge overcap",e.FeatherOvercap="feather gauge overcap",e.FanThreeOverwrite="overwrote fan dance 3",e.HeatOvercap="heat gauge overcap",e.BatteryOvercap="battery gauge overcap",e.KenkiOvercap="kenki overcap",e.MeditationOvercap="meditation stack overcap",e.SenOvercap="sen overcap",e.BeastGaugeOvercap="Beast Gauge overcap",e.InnerReleaseDrop="Inner Release expired",e.NascentChaosDrop="Nascent Chaos expired",e.SoulVoiceOvercap="soul voice overcap",e.CodaOvercap="coda overcap",e.CartridgeOvercap="cartridge overcap",e.ScaleOvercap="firstminds' focus overcap",e.LateEnkindle="enkindle used near end of demi window may ghost",e.RubysGlimmerDrop="Ruby's Glimmer expired",e.AetherflowOvercap="aetherflow overcap",e))(Fe||{}),zI={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},$p=ft.createContext&&ft.createContext(zI),Zy=["attr","size","title"];function Qy(e,t){if(e==null)return{};var a=$y(e,t),l,s;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(s=0;s<c.length;s++)l=c[s],!(t.indexOf(l)>=0)&&Object.prototype.propertyIsEnumerable.call(e,l)&&(a[l]=e[l])}return a}function $y(e,t){if(e==null)return{};var a={};for(var l in e)if(Object.prototype.hasOwnProperty.call(e,l)){if(t.indexOf(l)>=0)continue;a[l]=e[l]}return a}function ef(){return ef=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},ef.apply(this,arguments)}function Jp(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,l)}return a}function tf(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Jp(Object(a),!0).forEach(function(l){Jy(e,l,a[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Jp(Object(a)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(a,l))})}return e}function Jy(e,t,a){return t=ev(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ev(e){var t=tv(e,"string");return typeof t=="symbol"?t:t+""}function tv(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var l=a.call(e,t);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function YI(e){return e&&e.map((t,a)=>ft.createElement(t.tag,tf({key:a},t.attr),YI(t.child)))}function vr(e){return t=>ft.createElement(nv,ef({attr:tf({},e.attr)},t),YI(e.child))}function nv(e){var t=a=>{var{attr:l,size:s,title:c}=e,d=Qy(e,Zy),h=s||a.size||"1em",E;return a.className&&(E=a.className),e.className&&(E=(E?E+" ":"")+e.className),ft.createElement("svg",ef({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},a.attr,l,d,{className:E,style:tf(tf({color:e.color||a.color},a.style),e.style),height:h,width:h,xmlns:"http://www.w3.org/2000/svg"}),c&&ft.createElement("title",null,c),e.children)};return $p!==void 0?ft.createElement($p.Consumer,null,a=>t(a)):t(zI)}function av(e){return vr({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93 6h-2.95a15.65 15.65 0 0 0-1.38-3.56A8.03 8.03 0 0 1 18.92 8zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56A7.987 7.987 0 0 1 5.08 16zm2.95-8H5.08a7.987 7.987 0 0 1 4.33-3.56A15.65 15.65 0 0 0 8.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2zm.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95a8.03 8.03 0 0 1-4.33 3.56zM16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.38z"},child:[]}]})(e)}function iv(e){return vr({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 3a9 9 0 1 0 9 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 0 1-4.4 2.26 5.403 5.403 0 0 1-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"},child:[]}]})(e)}function lv(e){return vr({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58a.996.996 0 0 0-1.41 0 .996.996 0 0 0 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37a.996.996 0 0 0-1.41 0 .996.996 0 0 0 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0a.996.996 0 0 0 0-1.41l-1.06-1.06zm1.06-10.96a.996.996 0 0 0 0-1.41.996.996 0 0 0-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36a.996.996 0 0 0 0-1.41.996.996 0 0 0-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z"},child:[]}]})(e)}var Ua,VI,KI,WI,qI,am;const Qi=class Qi{static getMainstatBase(t){switch(t){case kt.lvl70:return 292;case kt.lvl80:return 340;case kt.lvl90:return 390;case kt.lvl100:return 440}}static getSubstatBase(t){switch(t){case kt.lvl70:return 364;case kt.lvl80:return 380;case kt.lvl90:return 400;case kt.lvl100:return 420}}static getStatDiv(t){switch(t){case kt.lvl70:return 900;case kt.lvl80:return 1300;case kt.lvl90:return 1900;case kt.lvl100:return 2780}}static calculateDamage(t,a,l,s,c,d,h){var G,H,ue,Ae,Ee,oe;let E=c;const A=d>=1?d:d<0?0:ge(G=Qi,Ua,VI).call(G,t,a)+d,R=h>=1?h:h<0?0:ge(H=Qi,Ua,WI).call(H,t,l)+h;if(A===0&&R===0)return E;const T=ge(ue=Qi,Ua,KI).call(ue,t,a),S=A>=1&&R>=1,p=A>1?1+(A-1)*T:1,I=R>1?1+(R-1)*1.25:1,b=A>1?1:A,O=R>1?1:R;S?E*=1+ge(Ae=Qi,Ua,am).call(Ae,t,s)+ge(Ee=Qi,Ua,qI).call(Ee,t,l):E*=1+ge(oe=Qi,Ua,am).call(oe,t,s);const v=E*p*T,L=E*1.25*I,P=v*1.25*I,U=b*O,V=1-b-O+U;return E*V+v*(b-U)+L*(O-U)+P*U}static overtimePotency(t,a,l){const s=this.getSubstatBase(t),c=this.getStatDiv(t),d=(1e3+Math.floor((a-s)*130/c))*.001;return l*d}static mpTick(t,a){const l=this.getMainstatBase(t),s=this.getStatDiv(t);return 200+Math.floor(150*(a-l)/s)}static preTaxGcd(t,a,l,s){const c=this.getSubstatBase(t),d=this.getStatDiv(t);let h=Math.ceil((c-a)*130/d),E=Math.floor(l*(1e3+h));return Math.floor((100-(s??0))*E/1e3)/100}static preTaxGcdLegacy(t,a,l,s){const c=this.getSubstatBase(t),d=this.getStatDiv(t);return Math.floor(Math.floor(Math.floor((100-(s??0))*100/100)*Math.floor((2e3-Math.floor(130*(a-c)/d+1e3))*(1e3*l)/1e4)/100)*100/100)/100}static preTaxCastTime(t,a,l,s){const c=this.getSubstatBase(t),d=this.getStatDiv(t);return Math.floor(Math.floor(Math.floor((100-(s??0))*100/100)*Math.floor((2e3-Math.floor(130*(a-c)/d+1e3))*(1e3*l)/1e3)/100)*100/100)/1e3}static afterFpsTax(t,a){return Math.floor(a*t+1)/t}};Ua=new WeakSet,VI=function(t,a){const l=this.getSubstatBase(t),s=this.getStatDiv(t);return(Math.floor(200*(a-l)/s)+50)*.001},KI=function(t,a){const l=this.getSubstatBase(t),s=this.getStatDiv(t);return(Math.floor(200*(a-l)/s)+1400)*.001},WI=function(t,a){const l=this.getSubstatBase(t),s=this.getStatDiv(t);return Math.floor(550*(a-l)/s)*.001},qI=function(t,a){const l=this.getSubstatBase(t),s=this.getStatDiv(t);return Math.floor(140*(a-l)/s)*.001},am=function(t,a){const l=this.getMainstatBase(t),s=this.getStatDiv(t);return Math.floor(140*(a-l)/s)*.001},ke(Qi,Ua);let ht=Qi;var z=(e=>(e[e.AF3=0]="AF3",e[e.AF2=1]="AF2",e[e.AF1=2]="AF1",e[e.UI3=3]="UI3",e[e.UI2=4]="UI2",e[e.UI1=5]="UI1",e[e.ENO=6]="ENO",e[e.STARRY=7]="STARRY",e[e.EMBOLDEN_M=8]="EMBOLDEN_M",e[e.MANAFIC=9]="MANAFIC",e[e.ACCELERATION=10]="ACCELERATION",e[e.POT=11]="POT",e[e.COMBO=12]="COMBO",e[e.AUTO_CDH=13]="AUTO_CDH",e[e.NO_CDH=14]="NO_CDH",e[e.PARTY=15]="PARTY",e[e.STANDARD_SINGLE=16]="STANDARD_SINGLE",e[e.STANDARD_DOUBLE=17]="STANDARD_DOUBLE",e[e.TECHNICAL_SINGLE=18]="TECHNICAL_SINGLE",e[e.TECHNICAL_DOUBLE=19]="TECHNICAL_DOUBLE",e[e.TECHNICAL_TRIPLE=20]="TECHNICAL_TRIPLE",e[e.TECHNICAL_QUADRUPLE=21]="TECHNICAL_QUADRUPLE",e[e.DEVILMENT=22]="DEVILMENT",e[e.FUGETSU=23]="FUGETSU",e[e.AUTO_CRIT=24]="AUTO_CRIT",e[e.YATEN=25]="YATEN",e[e.POSITIONAL=26]="POSITIONAL",e[e.ARCANE_CIRCLE=27]="ARCANE_CIRCLE",e[e.DEATHSDESIGN=28]="DEATHSDESIGN",e[e.ENHANCED_GIBBET_GALLOWS=29]="ENHANCED_GIBBET_GALLOWS",e[e.ENHANCED_REAPING=30]="ENHANCED_REAPING",e[e.IMMORTAL_SACRIFICE=31]="IMMORTAL_SACRIFICE",e[e.OVERHEATED=32]="OVERHEATED",e[e.SURGING_TEMPEST=33]="SURGING_TEMPEST",e[e.RAGING_STRIKES=34]="RAGING_STRIKES",e[e.WANDERERS_MINUET=35]="WANDERERS_MINUET",e[e.MAGES_BALLAD=36]="MAGES_BALLAD",e[e.ARMYS_PAEON=37]="ARMYS_PAEON",e[e.BATTLE_VOICE=38]="BATTLE_VOICE",e[e.RADIANT_FINALE_ONE_CODA=39]="RADIANT_FINALE_ONE_CODA",e[e.RADIANT_FINALE_TWO_CODA=40]="RADIANT_FINALE_TWO_CODA",e[e.RADIANT_FINALE_THREE_CODA=41]="RADIANT_FINALE_THREE_CODA",e[e.BARRAGE=42]="BARRAGE",e[e.NO_MERCY=43]="NO_MERCY",e[e.SEARING_LIGHT=44]="SEARING_LIGHT",e[e.POWER_SURGE=45]="POWER_SURGE",e[e.ENHANCED_PIERCING_TALON=46]="ENHANCED_PIERCING_TALON",e[e.LANCE_CHARGE=47]="LANCE_CHARGE",e[e.LIFE_OF_THE_DRAGON=48]="LIFE_OF_THE_DRAGON",e[e.LIFE_SURGE=49]="LIFE_SURGE",e[e.BATTLE_LITANY=50]="BATTLE_LITANY",e[e.FIGHT_OR_FLIGHT=51]="FIGHT_OR_FLIGHT",e[e.DIVINE_MIGHT=52]="DIVINE_MIGHT",e[e.REQUIESCAT=53]="REQUIESCAT",e[e.PET=54]="PET",e[e.ZOE=55]="ZOE",e[e.SOTERIA=56]="SOTERIA",e[e.KRASIS=57]="KRASIS",e[e.AUTOPHYSIS=58]="AUTOPHYSIS",e[e.PHILOSOPHIA=59]="PHILOSOPHIA",e))(z||{});const me={Tincture:{kind:"multiplier",source:11,potencyFactor:1},AutoCrit:{kind:"critDirect",source:24,critBonus:1,dhBonus:0},AutoCDH:{kind:"critDirect",source:13,critBonus:1,dhBonus:1},NoCDH:{kind:"critDirect",source:14,critBonus:0,dhBonus:0},Starry:{kind:"multiplier",source:7,potencyFactor:1.05},EmboldenMagic:{kind:"multiplier",source:8,potencyFactor:1.05},AccelerationImpact:{kind:"adder",source:10,additiveAmount:50},Manafication:{kind:"multiplier",source:9,potencyFactor:1.05},SingleStandardFinish:{kind:"multiplier",source:16,potencyFactor:1.02},DoubleStandardFinish:{kind:"multiplier",source:17,potencyFactor:1.05},SingleTechnicalFinish:{kind:"multiplier",source:18,potencyFactor:1.01},TripleTechnicalFinish:{kind:"multiplier",source:20,potencyFactor:1.03},QuadrupleTechnicalFinish:{kind:"multiplier",source:21,potencyFactor:1.05},Devilment:{kind:"critDirect",source:22,critBonus:.2,dhBonus:.2},FugetsuBase:{kind:"multiplier",source:23,potencyFactor:1.1},FugetsuEnhanced:{kind:"multiplier",source:23,potencyFactor:1.13},YatenpiBase:{kind:"adder",source:25,additiveAmount:160},YatenpiEnhanced:{kind:"adder",source:25,additiveAmount:170},ArcaneCircle:{kind:"multiplier",source:27,potencyFactor:1.03},DeathsDesign:{kind:"multiplier",source:28,potencyFactor:1.1},EnhancedGibbetGallows:{kind:"adder",source:29,additiveAmount:60},EnhancedReaping:{kind:"adder",source:30,additiveAmount:60},ImmortalSacrifice:{kind:"adder",source:31,additiveAmount:40},Overheated:{kind:"adder",source:32,additiveAmount:20},SurgingTempest:{kind:"multiplier",source:33,potencyFactor:1.1},RagingStrikes:{kind:"multiplier",source:34,potencyFactor:1.15},MagesBallad:{kind:"multiplier",source:36,potencyFactor:1.01},ArmysPaeon:{kind:"critDirect",source:37,critBonus:0,dhBonus:.03},WanderersMinuet:{kind:"critDirect",source:35,critBonus:.02,dhBonus:0},BattleVoice:{kind:"critDirect",source:38,critBonus:0,dhBonus:.2},RadiantFinaleOneCoda:{kind:"multiplier",source:39,potencyFactor:1.02},RadiantFinaleTwoCoda:{kind:"multiplier",source:40,potencyFactor:1.04},RadiantFinaleThreeCoda:{kind:"multiplier",source:41,potencyFactor:1.06},BarrageRefulgent:{kind:"multiplier",source:42,potencyFactor:3},BarrageWideVolley:{kind:"adder",source:42,additiveAmount:80},BarrageShadowbite:{kind:"adder",source:42,additiveAmount:100},NoMercy:{kind:"multiplier",source:43,potencyFactor:1.2},SearingLight:{kind:"multiplier",source:44,potencyFactor:1.05},SmnPet:{kind:"multiplier",source:54,potencyFactor:.8},PowerSurge:{kind:"multiplier",source:45,potencyFactor:1.1},LanceCharge:{kind:"multiplier",source:47,potencyFactor:1.1},LifeOfTheDragon:{kind:"multiplier",source:48,potencyFactor:1.15},BattleLitany:{kind:"critDirect",source:50,critBonus:.1,dhBonus:0},EnhancedPiercingTalon:{kind:"adder",source:46,additiveAmount:150},LifeSurge:{kind:"critDirect",source:49,critBonus:1,dhBonus:0},FightOrFlight:{kind:"multiplier",source:51,potencyFactor:1.25},Zoe:{kind:"multiplier",source:55,potencyFactor:1.5},Soteria:{kind:"multiplier",source:56,potencyFactor:1.7},Krasis:{kind:"multiplier",source:57,potencyFactor:1.2},Autophysis:{kind:"multiplier",source:58,potencyFactor:1.1},Philosophia:{kind:"multiplier",source:59,potencyFactor:1.2}};function dl(e){return{kind:"adder",source:12,additiveAmount:e}}function ov(e){return{kind:"adder",source:53,additiveAmount:e}}function sv(e){return{kind:"adder",source:52,additiveAmount:e}}function Xc(e){return{kind:"adder",source:26,additiveAmount:e}}var ao,XI,ZI,QI;class bn{constructor(t){ke(this,ao);F(this,"config");F(this,"sourceTime");F(this,"sourceSkill");F(this,"aspect");F(this,"description");F(this,"base");F(this,"targetCount");F(this,"falloff");F(this,"snapshotTime");F(this,"applicationTime");F(this,"modifiers",[]);this.config=t.config,this.sourceTime=t.sourceTime,this.sourceSkill=t.sourceSkill,this.aspect=t.aspect,this.base=t.basePotency,this.snapshotTime=t.snapshotTime,this.description=t.description,this.targetCount=t.targetCount,this.falloff=t.falloff}getAmount(t){let a=1,l=0,s=0,c=0,d=!1,h=!1,E=!1;this.modifiers.forEach(T=>{T.source===11?a*=t.tincturePotencyMultiplier:T.source===13?d=!0:T.source===24?h=!0:T.source===14?E=!0:T.kind==="critDirect"?(s+=T.critBonus,c+=T.dhBonus):T.kind==="multiplier"?a*=T.potencyFactor:T.kind==="adder"&&(l+=T.additiveAmount)}),console.assert(!(E&&(d||h)),"skills that can't CDH cannot be auto-crit or auto-CDH"),E&&(d=!1,h=!1),console.assert(!(d&&h),"cannot be both auto-crit and auto-CDH"),t.includePartyBuffs&&this.snapshotTime&&D.game.getPartyBuffs(this.snapshotTime).forEach(T=>{T.kind==="multiplier"?a*=T.potencyFactor:T.kind==="critDirect"&&(s+=T.critBonus,c+=T.dhBonus)});let R=(this.base+l)*ge(this,ao,QI).call(this,a,E?0:s,E?0:c);if(d?R*=ge(this,ao,XI).call(this,s,c):h&&(R*=ge(this,ao,ZI).call(this,s,c)),t.includeSplash){const T=1+(1-(this.falloff??1))*(this.targetCount-1);R*=T}return R}getPartyBuffs(){return this.snapshotTime?[...D.game.getPartyBuffs(this.snapshotTime).keys()]:[]}resolve(t){console.assert(this.snapshotTime!==void 0,`${this.sourceSkill} displayed at ${t} did not have snapshotTime`),console.assert(this.applicationTime===void 0,`${this.sourceSkill} displayed at ${t} was already resolved at ${this.applicationTime}`),this.applicationTime=t}hasResolved(){return this.applicationTime!==void 0}hasHitBoss(t){return this.applicationTime!==void 0&&!t(this.applicationTime)}hasSnapshotted(){return this.snapshotTime!==void 0}}ao=new WeakSet,XI=function(t,a){const l=this.config.level,s=ht.calculateDamage(l,D.gameConfig.criticalHit,D.gameConfig.directHit,D.gameConfig.determination,1,t,a);return ht.calculateDamage(l,D.gameConfig.criticalHit,D.gameConfig.directHit,D.gameConfig.determination,1,1+t,1+a)/s},ZI=function(t,a){const l=this.config.level,s=ht.calculateDamage(l,D.gameConfig.criticalHit,D.gameConfig.directHit,D.gameConfig.determination,1,t,a);return ht.calculateDamage(l,D.gameConfig.criticalHit,D.gameConfig.directHit,D.gameConfig.determination,1,1+t,a)/s},QI=function(t,a,l){const s=this.config.level,c=this.config.criticalHit,d=this.config.directHit,h=this.config.determination,E=ht.calculateDamage(s,c,d,h,1,0,0);return ht.calculateDamage(s,c,d,h,t,a,l)/E};var st=(e=>(e.Red="#f64141",e.Orange="#e89b5f",e.Yellow="#ffd535",e.Green="#50c53d",e.Cyan="#53e5e5",e.Blue="#217ff5",e.Purple="#9755ef",e.Pink="#ee79ee",e.Grey="#6f6f6f",e))(st||{});let Yt=()=>fl(N.useContext(Pa));const fl=e=>e==="Dark"?rv:cv,Hf=(e,t)=>fl(e)[t],rv={accent:"mediumpurple",jobAccents:{BLM:"#9370db",PCT:"#e176c2",RDM:"#ff0000",DNC:"#e2b0af",SAM:"#f59542",MCH:"#6ee1d6",WAR:"#b10b0b",RPR:"#965a90",BRD:"#91ba5e",GNB:"#f6b26b",SMN:"#2D9B78",SGE:"#80a0f0"},realTime:"mediumseagreen",historical:"#ff8c00",fileDownload:"#798c3f",text:"#b0b0b0",emphasis:"#dadada",success:"mediumseagreen",warning:"#ff6224",background:"#1f1f21",tipBackground:"#2a2a2a",bgLowContrast:"#333",bgMediumContrast:"#393939",bgHighContrast:"#626262",resources:{gcdBar:"#5cab43",lockBar:"#737373",mana:"#62a5d2",manaTick:"#3d5c73",cdhTag:"#d55124",comboTag:"#5c8bad",petTag:"#eb9b5f"},blm:{enochian:"#b69241",astralFire:"#d55124",astralSoul:"#cb8046",umbralIce:"#509bd5",umbralHeart:"#8fced5",paradox:"#d953ee",polyTimer:"#594472",polyStacks:"#b138ee"},pct:{creatureCanvas:"#a948e3",weaponCanvas:"#a53535",landscapeCanvas:"#2e51dd",paletteGauge:"#b69241",holyPaint:"#9bc6dd",cometPaint:"#7e19aa",starryBuff:"#509bd5"},rdm:{whiteMana:"#dddddd",blackMana:"#2a4bf5",manaStack:"#cb8046",emboldenBuff:"#de0202",manaficBuff:"#c169c2",accelBuff:"#f0d1e8"},dnc:{esprit:"#e2b0af",feathers:"#8DA147",emboite:"#bf615c",entrechat:"#3a8db7",jete:"#539350",pirouette:"#b0984e"},sam:{kenki:"#d55124",setsu:"#c7ffff",getsu:"#7987fc",kaSen:"#f8a2a6",meditation:"#ff853d",fugetsu:"#0f52ba",iai:"#89cfef"},mch:{heat:"#D35A10",battery:"#2C9FCB"},rpr:{soulGaugeLow:"#660929",soulGaugeHigh:"#e5004e",shroudGaugeLow:"#03706c",shroudGaugeHigh:"#00fcf3",lemureShroud:"#53ffff",voidShroudLow:"#5c125c",voidShroudHigh:"#ff04ff",deathsDesign:"#ab0009",arcaneCircle:"#ff94fd"},war:{beastGauge:"#ffba00"},brd:{soulVoice:"#5DBD99",pitchPerfect:"#9ac5f1",repertoire:"#e8c35a",wanderersCoda:"#add549",magesCoda:"#ffbcf8",armysCoda:"#eb9b5f",ragingStrikes:"#c04414",barrage:"#e6c65b",battleVoice:"#71bed1",radiantFinale:"#edcce7"},gnb:{},smn:{aetherflow:"#ffd4ff",bahamut:"#2D9B78",phoenix:"#d55124",solar:"#9bc6dd",ruby:"#e5004e",topaz:"#b0984e",emerald:"#539350",searing:"#2D9B78"},drg:{lifeSurge:"#ff6633",lanceCharge:"#d6002d",lifeOfTheDragon:"#0968af",battleLitany:"#33b8e3",powerSurge:"#59ed78",enhancedPiercingTalon:"#f4caa6",firstmindsFocusStacks:"#9926c8",lifeOfTheDragonBar:"#d74936",drgComboTimer:"#3d61ae"},sge:{addersgall:"#80a0f0",addersting:"#9e2dca",zoe:"cyan",autophysis:"lightblue",krasis:"teal",soteria:"green",philosophia:"lightgreen"},pld:{divineMight:"#ff6633",requiescat:"#d6002d",fightOrFlight:"#0968af",pldComboTimer:"#59ed78",ironWillColor:"#d74936",oathGaugeColor:"#3d61ae"},timeline:{ruler:"#2d2d2d",tracks:"#242424",castBar:"#42364d",lockBar:"#696969",gcdBar:"#354931",llCover:"#5ea647",potCover:"#c4543a",buffCover:"#9370db",damageMark:"#ff0000",healingMark:"#2cda30",aggroMark:"#ff8000",untargetableDamageMark:"#7f7f7f",mpTickMark:"#32525e",warningMark:"#9d7103",lucidTickMark:"#56b3d5",countdown:"rgba(15, 15, 15, 0.4)",markerAlpha:"4f"}},cv={accent:"mediumpurple",jobAccents:{BLM:"#9370db",PCT:"#f485d6",RDM:"#ff0000",DNC:"#e2b0af",SAM:"#f59542",MCH:"#6ee1d6",WAR:"#b10b0b",RPR:"#965a90",BRD:"#91ba5e",SMN:"#2D9B78",SGE:"#80a0f0"},realTime:"mediumseagreen",historical:"#ff8c00",fileDownload:"#798c3f",text:"#000000",emphasis:"#000000",success:"mediumseagreen",warning:"#ff4d07",background:"#ffffff",tipBackground:"#ffffff",bgLowContrast:"#efefef",bgMediumContrast:"lightgrey",bgHighContrast:"darkgrey",resources:{gcdBar:"#8edc72",lockBar:"#cbcbcb",mana:"#8ACEEA",manaTick:"#C2EAFF",cdhTag:"#ff6633",comboTag:"#53a7c9",petTag:"#eb9b5f"},blm:{enochian:"#f5cf96",astralFire:"#ff6633",astralSoul:"#ffa641",umbralIce:"#66bbff",umbralHeart:"#95dae3",paradox:"#d953ee",polyTimer:"#d5bbf1",polyStacks:"#b138ee"},pct:{creatureCanvas:"#b854e8",weaponCanvas:"#d54d48",landscapeCanvas:"#4568f6",paletteGauge:"#f5cf96",holyPaint:"#b7c9d5",cometPaint:"#9926c8",starryBuff:"#66bbff"},rdm:{whiteMana:"#fcd8d4",blackMana:"#467aeb",manaStack:"#9926c8",emboldenBuff:"#c91310",manaficBuff:"#530954",accelBuff:"#c973b4"},dnc:{esprit:"#e2b0af",feathers:"#8DA147",emboite:"#bf615c",entrechat:"#3a8db7",jete:"#539350",pirouette:"#b0984e"},sam:{kenki:"#d55124",setsu:"#addede",getsu:"#7987fc",kaSen:"#f8a2a6",meditation:"#ff853d",fugetsu:"#0f52ba",iai:"#89cfef"},mch:{heat:"#D35A10",battery:"#2C9FCB"},rpr:{soulGaugeLow:"#660929",soulGaugeHigh:"#e5004e",shroudGaugeLow:"#03706c",shroudGaugeHigh:"#00fcf3",lemureShroud:"#53ffff",voidShroudLow:"#5c125c",voidShroudHigh:"#ff04ff",deathsDesign:"#ab0009",arcaneCircle:"#ff94fd"},war:{beastGauge:"#e74a3c"},brd:{soulVoice:"#5DBD99",pitchPerfect:"#9ac5f1",repertoire:"#e8c35a",wanderersCoda:"#add549",magesCoda:"#ffbcf8",armysCoda:"#eb9b5f",ragingStrikes:"#c04414",barrage:"#e6c65b",battleVoice:"#71bed1",radiantFinale:"#edcce7"},gnb:{},smn:{aetherflow:"#ffd4ff",bahamut:"#2D9B78",phoenix:"#d55124",solar:"#9bc6dd",ruby:"#e5004e",topaz:"#b0984e",emerald:"#539350",searing:"#2D9B78"},drg:{lifeSurge:"#ff6633",lanceCharge:"#d6002d",lifeOfTheDragon:"#0968af",battleLitany:"#33b8e3",powerSurge:"#59ed78",enhancedPiercingTalon:"#f4caa6",firstmindsFocusStacks:"#9926c8",lifeOfTheDragonBar:"#d74936",drgComboTimer:"#3d61ae"},sge:{addersgall:"#80a0f0",addersting:"#9e2dca",zoe:"cyan",autophysis:"lightblue",krasis:"teal",soteria:"green",philosophia:"lightgreen"},pld:{divineMight:"#ff6633",requiescat:"#d6002d",fightOrFlight:"#0968af",pldComboTimer:"#59ed78",ironWillColor:"#d74936",oathGaugeColor:"#3d61ae"},timeline:{ruler:"#e9e9e9",tracks:"#f3f3f3",castBar:"#ecd6f3",lockBar:"#9d9d9d",gcdBar:"#ccefc6",llCover:"#87ec71",potCover:"#ff865c",buffCover:"#9370db",damageMark:"#ff0000",healingMark:"#2cda30",aggroMark:"#ff8000",untargetableDamageMark:"#7f7f7f",mpTickMark:"#b6dfea",warningMark:"#ffbb29",lucidTickMark:"#88cae0",countdown:"rgba(0, 0, 0, 0.1)",markerAlpha:"7f"}};function uv(e){let t=Yt(),a=new Map([[z.AF3,t.blm.astralFire],[z.AF2,t.blm.astralFire],[z.AF1,t.blm.astralFire],[z.UI3,t.blm.umbralIce],[z.UI2,t.blm.umbralIce],[z.UI1,t.blm.umbralIce],[z.ENO,t.blm.enochian],[z.AUTO_CDH,t.resources.cdhTag],[z.STARRY,t.pct.starryBuff],[z.EMBOLDEN_M,t.rdm.emboldenBuff],[z.MANAFIC,t.rdm.manaficBuff],[z.ACCELERATION,t.rdm.accelBuff],[z.STANDARD_SINGLE,t.dnc.jete],[z.STANDARD_DOUBLE,t.dnc.jete],[z.TECHNICAL_SINGLE,t.dnc.esprit],[z.TECHNICAL_DOUBLE,t.dnc.esprit],[z.TECHNICAL_TRIPLE,t.dnc.esprit],[z.TECHNICAL_QUADRUPLE,t.dnc.esprit],[z.DEVILMENT,t.dnc.feathers],[z.OVERHEATED,"#ee79ee"],[z.COMBO,t.resources.comboTag],[z.FUGETSU,t.sam.fugetsu],[z.AUTO_CRIT,t.resources.cdhTag],[z.YATEN,t.pct.cometPaint],[z.POSITIONAL,"#50c53d"],[z.ARCANE_CIRCLE,"#ee79ee"],[z.DEATHSDESIGN,"#f64141"],[z.ENHANCED_GIBBET_GALLOWS,"#217ff5"],[z.ENHANCED_REAPING,"#9755ef"],[z.IMMORTAL_SACRIFICE,"#ee79ee"],[z.SURGING_TEMPEST,"#9755ef"],[z.BARRAGE,t.brd.barrage],[z.RAGING_STRIKES,t.brd.ragingStrikes],[z.BATTLE_VOICE,t.brd.battleVoice],[z.RADIANT_FINALE_THREE_CODA,t.brd.radiantFinale],[z.RADIANT_FINALE_TWO_CODA,t.brd.radiantFinale],[z.RADIANT_FINALE_ONE_CODA,t.brd.radiantFinale],[z.WANDERERS_MINUET,t.brd.wanderersCoda],[z.MAGES_BALLAD,t.brd.magesCoda],[z.ARMYS_PAEON,t.brd.armysCoda],[z.NO_MERCY,t.rdm.blackMana],[z.SEARING_LIGHT,t.smn.searing],[z.LIFE_SURGE,t.drg.lifeSurge],[z.LANCE_CHARGE,t.drg.lanceCharge],[z.LIFE_OF_THE_DRAGON,t.drg.lifeOfTheDragon],[z.BATTLE_LITANY,t.drg.battleLitany],[z.POWER_SURGE,t.drg.powerSurge],[z.ENHANCED_PIERCING_TALON,t.drg.enhancedPiercingTalon],[z.DIVINE_MIGHT,t.pld.divineMight],[z.REQUIESCAT,t.pld.requiescat],[z.FIGHT_OR_FLIGHT,t.pld.fightOrFlight],[z.PET,t.resources.petTag]]);return console.assert(a.has(e),`modifier ${e} doesn't have a color!`),a.get(e)??t.text}function e_(e){let t=u.jsx(lv,{});const a=Yt(),l=N.useContext(Pa);return e.colorTheme==="Dark"&&(t=u.jsx(iv,{})),u.jsx("div",{style:{display:"inline-block",cursor:"pointer",verticalAlign:"middle",borderBottom:e.colorTheme===l?"none":"1px solid "+a.text,borderTop:e.colorTheme===l?"1px solid "+a.text:"none"},onClick:()=>e.setColorTheme(e.colorTheme),children:t})}const $I=()=>{var t;const e=dn("colorTheme");return e==="Light"||e==="Dark"?e:(t=window.matchMedia)!=null&&t.call(window,"(prefers-color-scheme: dark)").matches?"Dark":"Light"},Pa=N.createContext($I());function dv(e){return u.jsx("div",{style:{display:"inline-block",position:"absolute",right:10},children:u.jsxs("div",{style:{display:"inline-block",fontSize:16,position:"relative"},children:[u.jsx(e_,{colorTheme:"Light",setColorTheme:e.setColorTheme}),"|",u.jsx(e_,{colorTheme:"Dark",setColorTheme:e.setColorTheme})]})})}function JI(e,t){let a=e in IA?IA[e]:IA.NEVER;return t>=a.level}const $=()=>e=>e,fv=$()({}),hv=$()({}),Ev=$()({}),Av=$()({}),mv=$()({}),Rv=$()({}),Tv={...Ev,...Av,...mv},Sv=$()({BLIZZARD:{id:142,name:"Blizzard",label:{zh:"冰1",ja:"ブリザド"}},FIRE:{id:141,name:"Fire",label:{zh:"火1",ja:"ファイア"}},BLIZZARD_II:{id:25793,name:"Blizzard 2",label:{zh:"冰2",ja:"ブリザラ"}},FIRE_II:{id:147,name:"Fire 2",label:{zh:"火2",ja:"ファイラ"}},TRANSPOSE:{id:149,name:"Transpose",label:{zh:"星灵移位",ja:"トランス"}},THUNDER_III:{id:153,name:"Thunder 3",label:{zh:"雷3",ja:"サンダガ"}},THUNDER_IV:{id:7420,name:"Thunder 4",label:{zh:"霹雷"}},MANAWARD:{id:157,name:"Manaward",label:{zh:"魔罩",ja:"マバリア"}},MANAFONT:{id:158,name:"Manafont",label:{zh:"魔泉",ja:"マナフォント"}},LEY_LINES:{id:3573,name:"Ley Lines",label:{zh:"黑魔纹",ja:"黒魔紋"}},FIRE_III:{id:152,name:"Fire 3",label:{zh:"火3",ja:"ファイガ"}},BLIZZARD_III:{id:154,name:"Blizzard 3",label:{zh:"冰3",ja:"ブリザガ"}},FREEZE:{id:159,name:"Freeze",label:{zh:"玄冰",ja:"フリーズ"}},FLARE:{id:162,name:"Flare",label:{zh:"核爆",ja:"フレア"}},BLIZZARD_IV:{id:3576,name:"Blizzard 4",label:{zh:"冰4",ja:"ブリザジャ"}},FIRE_IV:{id:3577,name:"Fire 4",label:{zh:"火4",ja:"ファイジャ"}},BETWEEN_THE_LINES:{id:7419,name:"Between the Lines",label:{zh:"魔纹步",ja:"ラインズステップ"}},AETHERIAL_MANIPULATION:{id:155,name:"Aetherial Manipulation",label:{zh:"以太步",ja:"エーテリアルテップ"}},TRIPLECAST:{id:7421,name:"Triplecast",label:{zh:"三连咏唱",ja:"三連魔"}},FOUL:{id:7422,name:"Foul",label:{zh:"秽浊",ja:"ファウル"}},DESPAIR:{id:16505,name:"Despair",label:{zh:"绝望",ja:"デスペア"}},UMBRAL_SOUL:{id:16506,name:"Umbral Soul",label:{zh:"灵极魂",ja:"アンブラルソウル"}},XENOGLOSSY:{id:16507,name:"Xenoglossy",label:{zh:"异言",ja:"ゼノグロシー"}},HIGH_FIRE_II:{id:25794,name:"High Fire 2",label:{zh:"高火2",ja:"ハイファイラ"}},HIGH_BLIZZARD_II:{id:25795,name:"High Blizzard 2",label:{zh:"高冰冻2",ja:"ハイブリザラ"}},AMPLIFIER:{id:25796,name:"Amplifier",label:{zh:"详述",ja:"アンプリファイア"}},PARADOX:{id:25797,name:"Paradox",label:{zh:"悖论",ja:"パラドックス"}},HIGH_THUNDER:{id:36986,name:"High Thunder",label:{zh:"高闪雷",ja:"ハイサンダー"}},HIGH_THUNDER_II:{id:36987,name:"High Thunder 2",label:{zh:"高震雷"}},FLARE_STAR:{id:36989,name:"Flare Star",label:{zh:"耀星",ja:"フレアスター"}},RETRACE:{id:36988,name:"Retrace",label:{zh:"魔纹重置",ja:"魔紋再設置"}}}),gv=$()({cd_TRANSPOSE:{name:"cd_Transpose"},cd_LEY_LINES:{name:"cd_LeyLines"},cd_MANAWARD:{name:"cd_Manaward"},cd_BETWEEN_THE_LINES:{name:"cd_BetweenTheLines"},cd_AETHERIAL_MANIPULATION:{name:"cd_AetherialManipulation"},cd_TRIPLECAST:{name:"cd_Triplecast"},cd_MANAFONT:{name:"cd_Manafont"},cd_AMPLIFIER:{name:"cd_Amplifier"},cd_RETRACE:{name:"cd_Retrace"}}),pv=$()({POLYGLOT:{name:"Polyglot",label:{zh:"通晓"}},ASTRAL_FIRE:{name:"Astral Fire",label:{zh:"星极火"}},UMBRAL_ICE:{name:"Umbral Ice",label:{zh:"灵极冰"}},UMBRAL_HEART:{name:"Umbral Heart",label:{zh:"冰针"}},ENOCHIAN:{name:"Enochian",label:{zh:"天语"}},PARADOX:{name:"Paradox",label:{zh:"悖论"}},ASTRAL_SOUL:{name:"Astral Soul",label:{zh:"星极魂"}}}),Fm=$()({LEY_LINES:{name:"Ley Lines",label:{zh:"黑魔纹"},mayBeToggled:!0},TRIPLECAST:{name:"Triplecast",label:{zh:"三重咏唱"},maximumStacks:3},FIRESTARTER:{name:"Firestarter",label:{zh:"火苗"}},THUNDERHEAD:{name:"Thunderhead",label:{zh:"雷砧"}},THUNDER_III:{name:"Thunder III",label:{zh:"暴雷"}},THUNDER_IV:{name:"Thunder IV",label:{zh:"霹雷"}},HIGH_THUNDER:{name:"High Thunder",label:{zh:"高闪雷"}},HIGH_THUNDER_II:{name:"High Thunder II",label:{zh:"高震雷"}},MANAWARD:{name:"Manaward",label:{zh:"魔纹罩"}}}),_v=$()({}),Iv=$()({ENHANCED_ENOCHIAN_II:{name:"Enhanced Enochian II",level:78},ENHANCED_POLYGLOT:{name:"Enhanced Polyglot",level:80},ENHANCED_FOUL:{name:"Enhanced Foul",level:80},ASPECT_MASTERY_IV:{name:"Aspect Mastery IV",level:82},ENHANCED_MANAFONT:{name:"Enhanced Manafont",level:84},ENHANCED_ENOCHIAN_III:{name:"Enhanced Enochian III",level:86},ASPECT_MASTERY_V:{name:"Aspect Mastery V",level:90},THUNDER_MASTERY_III:{name:"Thunder Mastery III",level:92},ENHANCED_LEYLINES:{name:"Enhanced Ley Lines",level:96},ENHANCED_ENOCHIAN_IV:{name:"Enhanced Enochian IV",level:96},ENHANCED_POLYGLOT_II:{name:"Enhanced Polyglot II",level:98},ENHANCED_ASTRAL_FIRE:{name:"Enhanced Astral Fire",level:100}}),Cv={...pv,...Fm,..._v},Nv=$()({HEAVY_SHOT:{id:97,name:"Heavy Shot"},QUICK_NOCK:{id:100,name:"Quick Nock"},BLOODLETTER:{id:110,name:"Bloodletter"},BARRAGE:{id:107,name:"Barrage"},RAGING_STRIKES:{id:101,name:"Raging Strikes"},REPELLING_SHOT:{id:112,name:"Repelling Shot"},WIDE_VOLLEY:{id:111,name:"Wide Volley"},MAGES_BALLAD:{id:114,name:"Mage's Ballad"},ARMYS_PAEON:{id:116,name:"Army's Paeon"},RAIN_OF_DEATH:{id:117,name:"Rain Of Death"},BATTLE_VOICE:{id:118,name:"Battle Voice"},EMYPREAL_ARROW:{id:3558,name:"Empyreal Arrow"},WANDERERS_MINUET:{id:3559,name:"Wanderer's Minuet"},IRON_JAWS:{id:3560,name:"Iron Jaws"},WARDENS_PAEAN:{id:3561,name:"Warden's Paean"},SIDEWINDER:{id:3562,name:"Sidewinder"},PITCH_PERFECT:{id:7404,name:"Pitch Perfect"},TROUBADOUR:{id:7405,name:"Troubadour"},CAUSTIC_BITE:{id:7406,name:"Caustic Bite"},STORMBITE:{id:7407,name:"Stormbite"},NATURES_MINNE:{id:7408,name:"Nature's Minne"},REFULGENT_ARROW:{id:7409,name:"Refulgent Arrow"},SHADOWBITE:{id:16494,name:"Shadowbite"},BURST_SHOT:{id:16495,name:"Burst Shot"},APEX_ARROW:{id:16496,name:"Apex Arow"},LADONSBITE:{id:25783,name:"Ladonsbite"},BLAST_ARROW:{id:25784,name:"Blast Arrow"},RADIANT_FINALE:{id:25785,name:"Radiant Finale"},HEARTBREAK_SHOT:{id:36975,name:"Heartbreak Shot"},RESONANT_ARROW:{id:36976,name:"Resonant Arrow"},RADIANT_ENCORE:{id:36977,name:"Radiant Encore"}}),Ov=$()({cd_RAGING_STRIKES:{name:"cd_RagingStrikes"},cd_BARRAGE:{name:"cd_Barrage"},cd_EMPYREAL_ARROW:{name:"cd_EmpyrealArrow"},cd_HEARTBREAK_SHOT:{name:"cd_HeartbreakShot"},cd_SIDEWINDER:{name:"cd_Sidewinder"},cd_WANDERERS_MINUET:{name:"cd_WanderersMinuet"},cd_MAGES_BALLAD:{name:"cd_MagesBallad"},cd_ARMYS_PAEON:{name:"cd_ArmysPaeon"},cd_WARDENS_PAEAN:{name:"cd_WardensPaean"},cd_NATURES_MINNE:{name:"cd_NaturesMinne"},cd_REPELLING_SHOT:{name:"cd_RepellingShot"},cd_BATTLE_VOICE:{name:"cd_BattleVoice"},cd_RADIANT_FINALE:{name:"cd_RadiantFinale"},cd_TROUBADOUR:{name:"cd_Troubadour"},cd_PITCH_PERFECT:{name:"cd_PitchPerfect"}}),bv=$()({SONG_TIMER:{name:"SongTimer"},SOUL_VOICE:{name:"Soul Voice"},PITCH_PERFECT:{name:"Pitch Perfect"},REPERTOIRE:{name:"Repertoire"},WANDERERS_CODA:{name:"Wanderer's Coda"},MAGES_CODA:{name:"Mage's Coda"},ARMYS_CODA:{name:"Army's Coda"}}),jm=$()({HAWKS_EYE:{name:"Hawk's Eye"},RAGING_STRIKES:{name:"Raging Strikes"},BARRAGE:{name:"Barrage"},ARMYS_MUSE:{name:"Army's Muse"},ARMYS_ETHOS:{name:"Army's Ethos"},BLAST_ARROW_READY:{name:"Blast Arrow Ready"},RESONANT_ARROW_READY:{name:"Resonant Arrow Ready"},RADIANT_ENCORE_READY:{name:"Radiant Encore Ready"},CAUSTIC_BITE:{name:"Caustic Bite"},STORMBITE:{name:"Stormbite"},MAGES_BALLAD:{name:"Mage's Ballad"},ARMYS_PAEON:{name:"Army's Paeon"},WANDERERS_MINUET:{name:"Wanderer's Minuet"},BATTLE_VOICE:{name:"Battle Voice"},WARDENS_PAEAN:{name:"Warden's Paean"},TROUBADOUR:{name:"Troubadour"},NATURES_MINNE:{name:"Nature's Minne"},RADIANT_FINALE:{name:"Radiant Finale"}}),yv=$()({RADIANT_CODA:{name:"Radiant Coda"},MUSE_REPERTOIRE:{name:"Muse Repertoire"},ETHOS_REPERTOIRE:{name:"Ethos Repertoire"}}),vv=$()({WIDE_VOLLEY_MASTERY:{name:"Wide Volley Mastery",level:72},BITE_MASTERY_II:{name:"Bite Mastery II",level:76},HEAVY_SHOT_MASTERY:{name:"Heavy Shot Mastery",level:76},ENHANCED_ARMYS_PAEON:{name:"Enhanced Army's Paeon",level:78},SOUL_VOICE:{name:"Soul Voice",level:80},QUICK_NOCK_MASTERY:{name:"Quick Nock Mastery",level:82},ENHANCED_BLOODLETTER:{name:"Enhanced Bloodletter",level:84},ENHANCED_APEX_ARROW:{name:"Enhanced Apex Arrow",level:86},ENHANCED_TROUBADOUR:{name:"Enhanced Troubadour",level:88},MINSTRELS_CODA:{name:"Minstrel's Coda",level:90},BLOODLETTER_MASTERY:{name:"Bloodletter Mastery",level:92},RANGED_MASTERY:{name:"Ranged Mastery",level:94},ENHANCED_BARRAGE:{name:"Enhanced Barrage",level:96},ENHANCED_RADIANT_FINALE:{name:"Enhanced Radiant Finale",level:100}}),Dv={...bv,...jm,...yv},Mv=$()({STANDARD_FINISH:{id:16003,name:"Standard Finish",label:{zh:"标准舞步结束"}},SINGLE_STANDARD_FINISH:{id:16191,name:"Single Standard Finish",label:{zh:"单色标准舞步结束"}},DOUBLE_STANDARD_FINISH:{id:16192,name:"Double Standard Finish",label:{zh:"双色标准舞步结束"}},FINISHING_MOVE:{id:36984,name:"Finishing Move",label:{zh:"结束动作"}},LAST_DANCE:{id:36983,name:"Last Dance",label:{zh:"落幕舞"}},TECHNICAL_FINISH:{id:16004,name:"Technical Finish",label:{zh:"技巧舞步结束"}},SINGLE_TECHNICAL_FINISH:{id:16193,name:"Single Technical Finish",label:{zh:"单色技巧舞步结束"}},DOUBLE_TECHNICAL_FINISH:{id:16194,name:"Double Technical Finish",label:{zh:"双色技巧舞步结束"}},TRIPLE_TECHNICAL_FINISH:{id:16195,name:"Triple Technical Finish",label:{zh:"三色技巧舞步结束"}},QUADRUPLE_TECHNICAL_FINISH:{id:16196,name:"Quadruple Technical Finish",label:{zh:"四色技巧舞步结束"}},TILLANA:{id:25790,name:"Tillana",label:{zh:"提拉纳"}},CASCADE:{id:15989,name:"Cascade",label:{zh:"瀑泻"}},FOUNTAIN:{id:15990,name:"Fountain",label:{zh:"喷泉"}},REVERSE_CASCADE:{id:15991,name:"Reverse Cascade",label:{zh:"逆瀑泻"}},FOUNTAINFALL:{id:15992,name:"Fountainfall",label:{zh:"坠喷泉"}},WINDMILL:{id:15993,name:"Windmill",label:{zh:"风车"}},BLADESHOWER:{id:15994,name:"Bladeshower",label:{zh:"落刃雨"}},RISING_WINDMILL:{id:15995,name:"Rising Windmill",label:{zh:"升风车"}},BLOODSHOWER:{id:15996,name:"Bloodshower",label:{zh:"落血雨"}},STANDARD_STEP:{id:15997,name:"Standard Step",label:{zh:"标准舞步"}},TECHNICAL_STEP:{id:15998,name:"Technical Step",label:{zh:"技巧舞步"}},EMBOITE:{id:15999,name:"Emboite",label:{zh:"蔷薇曲舞步"}},ENTRECHAT:{id:16e3,name:"Entrechat",label:{zh:"小鸟交叠跳"}},JETE:{id:16001,name:"Jete",label:{zh:"绿叶小踢腿"}},PIROUETTE:{id:16002,name:"Pirouette",label:{zh:"金冠趾尖转"}},SABER_DANCE:{id:16005,name:"Saber Dance",label:{zh:"剑舞"}},DANCE_OF_THE_DAWN:{id:36985,name:"Dance of the Dawn",label:{zh:"拂晓舞"}},CLOSED_POSITION:{id:16006,name:"Closed Position",label:{zh:"闭式舞姿"}},FAN_DANCE:{id:16007,name:"Fan Dance",label:{zh:"扇舞·序"}},FAN_DANCE_II:{id:16008,name:"Fan Dance II",label:{zh:"扇舞·破"}},FAN_DANCE_III:{id:16009,name:"Fan Dance III",label:{zh:"扇舞·急"}},FAN_DANCE_IV:{id:25791,name:"Fan Dance IV",label:{zh:"扇舞·终"}},EN_AVANT:{id:16010,name:"En Avant",label:{zh:"前冲步"}},DEVILMENT:{id:16011,name:"Devilment",label:{zh:"进攻之探戈"}},STARFALL_DANCE:{id:25792,name:"Starfall Dance",label:{zh:"流星舞"}},SHIELD_SAMBA:{id:16012,name:"Shield Samba",label:{zh:"防守之桑巴"}},FLOURISH:{id:16013,name:"Flourish",label:{zh:"百花争艳"}},IMPROVISATION:{id:16014,name:"Improvisation",label:{zh:"即兴表演"}},IMPROVISED_FINISH:{id:25789,name:"Improvised Finish",label:{zh:"即兴表演结束"}},CURING_WALTZ:{id:16015,name:"Curing Waltz",label:{zh:"治疗之华尔兹"}},ENDING:{id:18073,name:"Ending",label:{zh:"解除闭式舞姿"}}}),Lv=$()({cd_STANDARD_STEP:{name:"cd_StandardStep"},cd_TECHNICAL_STEP:{name:"cd_TechnicalStep"},cd_CLOSED_POSITION:{name:"cd_ClosedPosition"},cd_FAN_DANCE:{name:"cd_FanDance"},cd_FAN_DANCE_II:{name:"cd_FanDanceII",label:{zh:"CD：扇舞·破"}},cd_FAN_DANCE_III:{name:"cd_FanDanceIII",label:{zh:"CD：扇舞·急"}},cd_FAN_DANCE_IV:{name:"cd_FanDanceIV",label:{zh:"CD：扇舞·终"}},cd_EN_AVANT:{name:"cd_EnAvant"},cd_DEVILMENT:{name:"cd_Devilment"},cd_SHIELD_SAMBA:{name:"cd_ShieldSamba"},cd_FLOURISH:{name:"cd_Flourish"},cd_IMPROVISATION:{name:"cd_Improvisation"},cd_IMPROVISED_FINISH:{name:"cd_ImprovisedFinish"},cd_CURING_WALTZ:{name:"cd_CuringWaltz"},cd_ENDING:{name:"cd_Ending"}}),Hv=$()({ESPRIT_GAUGE:{name:"EspritGauge",label:{zh:"伶俐量值"}},FEATHER_GAUGE:{name:"Feathers",label:{zh:"幻扇"}},STANDARD_DANCE:{name:"Standard Dance",label:{zh:"标准舞步"}},TECHNICAL_DANCE:{name:"Technical Dance",label:{zh:"技巧舞步"}}}),zm=$()({SILKEN_SYMMETRY:{name:"Silken Symmetry",label:{zh:"对称投掷"}},SILKEN_FLOW:{name:"Silken Flow",label:{zh:"非对称投掷"}},FLOURISHING_SYMMETRY:{name:"Flourishing Symmetry",label:{zh:"对称投掷·百花争艳"}},FLOURISHING_FLOW:{name:"Flourishing Flow",label:{zh:"非对称投掷·百花争艳"}},THREEFOLD_FAN_DANCE:{name:"Threefold Fan Dance",label:{zh:"扇舞·急预备"}},FOURFOLD_FAN_DANCE:{name:"Fourfold Fan Dance",label:{zh:"扇舞·终预备"}},FINISHING_MOVE_READY:{name:"Finishing Move Ready",label:{zh:"结束动作预备"}},FLOURISHING_STARFALL:{name:"Flourishing Starfall",label:{zh:"流星舞预备"}},STANDARD_STEP:{name:"Standard Step",label:{zh:"标准舞步"},mayNotBeCanceled:!0},TECHNICAL_STEP:{name:"Technical Step",label:{zh:"技巧舞步"},mayNotBeCanceled:!0},LAST_DANCE_READY:{name:"Last Dance Ready",label:{zh:"落幕舞预备"}},DANCE_OF_THE_DAWN_READY:{name:"Dance of the Dawn Ready",label:{zh:"拂晓舞预备"}},FLOURISHING_FINISH:{name:"Flourishing Finish",label:{zh:"提拉纳预备"}},SHIELD_SAMBA:{name:"Shield Samba",label:{zh:"防守之桑巴"}},IMPROVISATION:{name:"Improvisation",label:{zh:"即兴表演"},mayNotBeCanceled:!0},RISING_RHYTHM:{name:"Rising Rhythm",label:{zh:"舞动的热情"},maximumStacks:4},IMPROVISATION_REGEN:{name:"Improvisation Regen",label:{zh:"享受即兴表演"}},IMPROVISED_FINISH:{name:"Improvised Finish",label:{zh:"即兴表演结束"}},DEVILMENT:{name:"Devilment",label:{zh:"进攻之探戈"}},TECHNICAL_FINISH:{name:"Technical Finish",label:{zh:"技巧舞步结束"}},ESPRIT:{name:"Esprit",label:{zh:"伶俐"},mayNotBeCanceled:!0},STANDARD_FINISH:{name:"Standard Finish",label:{zh:"标准舞步结束"}},CLOSED_POSITION:{name:"Closed Position",label:{zh:"闭式舞姿"},mayNotBeCanceled:!0},DANCE_PARTNER:{name:"Dance Partner",label:{zh:"舞伴"}},STANDARD_FINISH_PARTNER:{name:"Standard Finish Partner",label:{zh:"舞伴小舞buff"}},ESPRIT_PARTNER:{name:"Esprit Partner",label:{zh:"舞伴伶俐buff"}},ESPRIT_TECHNICAL:{name:"Esprit Technical",label:{zh:"大舞伶俐buff"}}}),xv=$()({CASCADE_COMBO:{name:"CascadeCombo",label:{zh:"瀑泻连击"}},WINDMILL_COMBO:{name:"WindmillCombo",label:{zh:"风车连击"}},STANDARD_BONUS:{name:"StandardBonus",label:{zh:"小舞连击"}},TECHNICAL_BONUS:{name:"TechnicalBonus",label:{zh:"大舞连击"}}}),Uv=$()({ESPRIT:{name:"Esprit",level:76},ENHANCED_EN_AVANT_II:{name:"Enhanced En Avant II",level:78},ENHANCED_TECHNICAL_FINISH:{name:"Enhanced Technical Finish",level:82},ENHANCED_ESPRIT:{name:"Enhanced Esprit",level:84},ENHANCED_FLOURISH:{name:"Enhanced Flourish",level:86},ENHANCED_SHIELD_SAMBA:{name:"Enhanced Shield Samba",level:88},ENHANCED_DEVILMENT:{name:"Enhanced Devilment",level:90},ENHANCED_STANDARD_FINISH:{name:"Enhanced Standard Finish",level:92},DYNAMIC_DANCER:{name:"Dynamic Dancer",level:94},ENHANCED_FLOURISH_II:{name:"Enhanced Flourish II",level:96},ENHANCED_TECHNICAL_FINISH_II:{name:"Enhanced Technical Finish II",level:100}}),kv={...Hv,...zm,...xv},Pv=$()({PIERCING_TALON:{id:90,name:"Piercing Talon"},TRUE_THRUST:{id:75,name:"True Thrust"},RAIDEN_THRUST:{id:16479,name:"Raiden Thrust"},DISEMBOWEL:{id:87,name:"Disembowel"},SPIRAL_BLOW:{id:36955,name:"Spiral Blow"},CHAOS_THRUST:{id:88,name:"Chaos Thrust"},CHAOTIC_SPRING:{id:25772,name:"Chaotic Spring"},WHEELING_THRUST:{id:3556,name:"Wheeling Thrust"},VORPAL_THRUST:{id:78,name:"Vorpal Thrust"},LANCE_BARRAGE:{id:36954,name:"Lance Barrage"},FULL_THRUST:{id:84,name:"Full Thrust"},HEAVENS_THRUST:{id:25771,name:"Heavens' Thrust"},FANG_AND_CLAW:{id:3554,name:"Fang and Claw"},DRAKESBANE:{id:36952,name:"Drakesbane"},DOOM_SPIKE:{id:86,name:"Doom Spike"},DRACONIAN_FURY:{id:25770,name:"Draconian Fury"},SONIC_THRUST:{id:7397,name:"Sonic Thrust"},COERTHAN_TORMENT:{id:16477,name:"Coerthan Torment"},LIFE_SURGE:{id:83,name:"Life Surge"},LANCE_CHARGE:{id:85,name:"Lance Charge"},JUMP:{id:92,name:"Jump"},HIGH_JUMP:{id:16478,name:"High Jump"},MIRAGE_DIVE:{id:7339,name:"Mirage Dive"},DRAGONFIRE_DIVE:{id:96,name:"Dragonfire Dive"},RISE_OF_THE_DRAGON:{id:36953,name:"Rise of the Dragon"},BATTLE_LITANY:{id:3557,name:"Battle Litany"},WYRMWIND_THRUST:{id:25773,name:"Wyrmwind Thrust"},GEIRSKOGUL:{id:3555,name:"Geirskogul"},NASTROND:{id:7400,name:"Nastrond"},STARDIVER:{id:16480,name:"Stardiver"},STARCROSS:{id:36956,name:"Starcross"},ELUSIVE_JUMP:{id:94,name:"Elusive Jump"},WINGED_GLIDE:{id:36951,name:"Winged Glide"}}),Gv=$()({cd_LIFE_SURGE:{name:"cd_LifeSurge"},cd_LANCE_CHARGE:{name:"cd_LanceCharge"},cd_JUMP:{name:"cd_Jump"},cd_HIGH_JUMP:{name:"cd_HighJump"},cd_ELUSIVE_JUMP:{name:"cd_ElusiveJump"},cd_WINGED_GLIDE:{name:"cd_WingedGlide"},cd_DRAGONFIRE_DIVE:{name:"cd_DragonfireDive"},cd_BATTLE_LITANY:{name:"cd_BattleLitany"},cd_GEIRSKOGUL:{name:"cd_Geirskogul"},cd_MIRAGE_DIVE:{name:"cd_MirageDive"},cd_NASTROND:{name:"cd_Nastrond"},cd_STARDIVER:{name:"cd_Stardiver"},cd_WYRMWIND_THRUST:{name:"cd_WyrmwindThrust"},cd_RISE_OF_THE_DRAGON:{name:"cd_RiseOfTheDragon"},cd_STARCROSS:{name:"cd_Starcross"}}),wv=$()({LIFE_OF_THE_DRAGON:{name:"Life of the Dragon"},FIRSTMINDS_FOCUS:{name:"Firstminds' Focus"}}),Ym=$()({LIFE_SURGE:{name:"Life Surge"},ENHANCED_PIERCING_TALON:{name:"Enhanced Piercing Talon"},POWER_SURGE:{name:"Power Surge"},LANCE_CHARGE:{name:"Lance Charge"},DIVE_READY:{name:"Dive Ready"},CHAOS_THRUST_DOT:{name:"Chaos Thrust DoT"},CHAOTIC_SPRING_DOT:{name:"Chaotic Spring DoT"},DRAGONS_FLIGHT:{name:"Dragon's Flight"},BATTLE_LITANY:{name:"Battle Litany"},NASTROND_READY:{name:"Nastrond Ready"},DRACONIAN_FIRE:{name:"Draconian Fire"},STARCROSS_READY:{name:"Starcross Ready"}}),Bv=$()({DRG_CHAOS_COMBO_TRACKER:{name:"DRG Chaos Combo"},DRG_HEAVENS_COMBO_TRACKER:{name:"DRG Heavens Combo"},DRG_AOE_COMBO_TRACKER:{name:"DRG AOE Combo"}}),Fv=$()({JUMP_MASTERY:{name:"Jump Mastery",level:74},LANCE_MASTERY:{name:"Lance Mastery",level:76},ENHANCED_COERTHAN_TORMENT:{name:"Enhanced Coerthan Torment",level:82},ENHANCED_WINGED_GLIDE:{name:"Enhanced Winged Glide",level:84},LANCE_MASTERY_II:{name:"Lance Mastery II",level:86},ENHANCED_LIFE_SURGE:{name:"Enhanced Life Surge",level:88},LANCE_MASTERY_III:{name:"Lance Mastery III",level:90},ENHANCED_DRAGONFIRE_DIVE:{name:"Enhanced Dragonfire Dive",level:92},MELEE_MASTERY_DRG:{name:"Melee Mastery DRG",level:94},LANCE_MASTERY_IV:{name:"Lance Mastery IV",level:96},ENHANCED_STARDIVER:{name:"Enhanced Stardiver",level:100}}),jv={...wv,...Ym,...Bv},zv=$()({}),Yv=$()({}),Vv=$()({}),Kv=$()({}),Wv=$()({}),qv=$()({}),Xv={...Vv,...Kv,...Wv},Zv=$()({LIGHTNING_SHOT:{name:"Lightning Shot"},KEEN_EDGE:{name:"Keen Edge"},BRUTAL_SHELL:{name:"Brutal Shell"},SOLID_BARREL:{name:"Solid Barrel"},DEMON_SLICE:{name:"Demon Slice"},DEMON_SLAUGHTER:{name:"Demon Slaughter"},BURST_STRIKE:{name:"Burst Strike"},FATED_CIRCLE:{name:"Fated Circle"},BLOODFEST:{name:"Bloodfest"},NO_MERCY:{name:"No Mercy"},SONIC_BREAK:{name:"Sonic Break"},GNASHING_FANG:{name:"Gnashing Fang"},SAVAGE_CLAW:{name:"Savage Claw"},WICKED_TALON:{name:"Wicked Talon"},DOUBLE_DOWN:{name:"Double Down"},REIGN_OF_BEASTS:{name:"Reign of Beasts"},NOBLE_BLOOD:{name:"Noble Blood"},LION_HEART:{name:"Lion Heart"},CONTINUATION:{name:"Continuation"},HYPERVELOCITY:{name:"Hypervelocity"},FATED_BRAND:{name:"Fated Brand"},JUGULAR_RIP:{name:"Jugular Rip"},ABDOMEN_TEAR:{name:"Abdomen Tear"},EYE_GOUGE:{name:"Eye Gouge"},DANGER_ZONE:{name:"Danger Zone"},BLASTING_ZONE:{name:"Blasting Zone"},BOW_SHOCK:{name:"Bow Shock"},TRAJECTORY:{name:"Trajectory"},HEART_OF_STONE:{name:"Heart of Stone"},HEART_OF_CORUNDUM:{name:"Heart of Corundum"},SUPERBOLIDE:{name:"Superbolide"},CAMOUFLAGE:{name:"Camouflage"},NEBULA:{name:"Nebula"},GREAT_NEBULA:{name:"Great Nebula"},HEART_OF_LIGHT:{name:"Heart of Light"},AURORA:{name:"Aurora"},ROYAL_GUARD:{name:"Royal Guard"},RELEASE_ROYAL_GUARD:{name:"Release Royal Guard"}}),Qv=$()({cd_NO_MERCY:{name:"cd_NoMercy"},cd_BLOODFEST:{name:"cd_Bloodfest"},cd_CAMOUFLAGE:{name:"cd_Camouflage"},cd_ROYAL_GUARD:{name:"cd_RoyalGuard"},cd_RELEASE_ROYAL_GUARD:{name:"cd_ReleaseRoyalGuard"},cd_DANGER_ZONE:{name:"cd_DangerZone"},cd_BLASTING_ZONE:{name:"cd_BlastingZone"},cd_NEBULA:{name:"cd_Nebula"},cd_GREAT_NEBULA:{name:"cd_GreatNebula"},cd_AURORA:{name:"cd_Aurora"},cd_SUPERBOLIDE:{name:"cd_Superbolide"},cd_TRAJECTORY:{name:"cd_Trajectory"},cd_GNASHING_FANG:{name:"cd_GnashingFang"},cd_BOW_SHOCK:{name:"cd_BowShock"},cd_HEART_OF_LIGHT:{name:"cd_HeartOfLight"},cd_HEART_OF_STONE:{name:"cd_HeartOfStone"},cd_HEART_OF_CORUNDUM:{name:"cd_HeartOfCorundum"},cd_DOUBLE_DOWN:{name:"cd_DoubleDown"},cd_CONTINUATION:{name:"cd_Continuation"},cd_HYPERVELOCITY:{name:"cd_Hypervelocity"},cd_FATED_BRAND:{name:"cd_FatedBrand"},cd_JUGULAR_RIP:{name:"cd_JugularRip"},cd_ABDOMEN_TEAR:{name:"cd_AbdomenTear"},cd_EYE_GOUGE:{name:"cd_EyeGouge"}}),$v=$()({POWDER_GAUGE:{name:"Powder Gauge"}}),Vm=$()({NO_MERCY:{name:"No Mercy"},AURORA:{name:"Aurora"},BOW_SHOCK_DOT:{name:"Bow Shock DoT"},CAMOUFLAGE:{name:"Camouflage"},HEART_OF_CORUNDUM:{name:"Heart of Corundum"},CLARITY_OF_CORUNDUM:{name:"Clarity of Corundum"},CATHARSIS_OF_CORUNDUM:{name:"Catharsis of Corundum"},NEBULA:{name:"Nebula"},GREAT_NEBULA:{name:"Great Nebula"},HEART_OF_LIGHT:{name:"Heart of Light"},HEART_OF_STONE:{name:"Heart of Stone"},READY_TO_BLAST:{name:"Ready to Blast"},READY_TO_BREAK:{name:"Ready to Break"},READY_TO_GOUGE:{name:"Ready to Gouge"},READY_TO_RAZE:{name:"Ready to Raze"},READY_TO_REIGN:{name:"Ready to Reign"},READY_TO_RIP:{name:"Ready to Rip"},READY_TO_TEAR:{name:"Ready to Tear"},ROYAL_GUARD:{name:"Royal Guard"},SONIC_BREAK_DOT:{name:"Sonic Break DoT"},SUPERBOLIDE:{name:"Superbolide"},BRUTAL_SHELL:{name:"Brutal Shell"}}),Jv=$()({GNB_COMBO_TRACKER:{name:"GNB Combo"},GNB_AOE_COMBO_TRACKER:{name:"GNB AOE Combo"},GNB_GNASHING_COMBO_TRACKER:{name:"GNB Gnashing Combo"},GNB_REIGN_COMBO_TRACKER:{name:"GNB Reign Combo"}}),eD=$()({DANGER_ZONE_MASTERY:{name:"Danger Zone Mastery",level:80},HEART_OF_STONE_MASTERY:{name:"Heart Of Stone Mastery",level:82},ENHANCED_AURORA:{name:"Enhanced Aurora",level:84},ENHANCED_CONTINUATION:{name:"Enhanced Continuation",level:86},CARTRIDGE_CHARGE_II:{name:"Cartridge Charge II",level:88},NEBULA_MASTERY:{name:"Nebula Mastery",level:92},ENHANCED_CONTINUATION_II:{name:"Enhanced Continuation II",level:96},ENHANCED_BLOODFEST:{name:"Enhanced Bloodfest",level:100}}),tD={...$v,...Vm,...Jv},nD=$()({HEATED_SPLIT_SHOT:{id:7411,name:"Heated Split Shot",label:{zh:"热分裂弹"}},HEATED_SLUG_SHOT:{id:7412,name:"Heated Slug Shot",label:{zh:"热独头弹"}},HEATED_CLEAN_SHOT:{id:7413,name:"Heated Clean Shot",label:{zh:"热狙击弹"}},DRILL:{id:16498,name:"Drill",label:{zh:"钻头"}},HOT_SHOT:{id:2872,name:"Hot Shot",label:{zh:"热弹"}},AIR_ANCHOR:{id:16500,name:"Air Anchor",label:{zh:"空气锚"}},CHAIN_SAW:{id:25788,name:"Chain Saw",label:{zh:"回转飞锯"}},EXCAVATOR:{id:36981,name:"Excavator",label:{zh:"掘地飞轮"}},GAUSS_ROUND:{id:2874,name:"Gauss Round",label:{zh:"虹吸弹"}},DOUBLE_CHECK:{id:36979,name:"Double Check",label:{zh:"双将"}},RICOCHET:{id:2890,name:"Ricochet",label:{zh:"弹射"}},CHECKMATE:{id:36980,name:"Checkmate",label:{zh:"将死"}},BLAZING_SHOT:{id:36978,name:"Blazing Shot",label:{zh:"烈焰弹"}},WILDFIRE:{id:2878,name:"Wildfire",label:{zh:"野火"}},DETONATOR:{id:16766,name:"Detonator",label:{zh:"引爆装置"}},HYPERCHARGE:{id:17209,name:"Hypercharge",label:{zh:"超荷"}},ROOK_AUTOTURRET:{id:2864,name:"Rook Autoturret",label:{zh:"车式浮空炮塔"}},ROOK_OVERDRIVE:{id:7415,name:"Rook Overdrive",label:{zh:"超档车式炮塔"}},AUTOMATON_QUEEN:{id:16501,name:"Automaton Queen",label:{zh:"后式自走人偶"}},QUEEN_OVERDRIVE:{id:16502,name:"Queen Overdrive",label:{zh:"超档后式人偶"}},BARREL_STABILIZER:{id:7414,name:"Barrel Stabilizer",label:{zh:"枪管加热"}},REASSEMBLE:{id:2876,name:"Reassemble",label:{zh:"整备"}},FULL_METAL_FIELD:{id:36982,name:"Full Metal Field",label:{zh:"全金属爆发"}},SPREAD_SHOT:{id:2870,name:"Spread Shot",label:{zh:"散射"}},SCATTERGUN:{id:25786,name:"Scattergun",label:{zh:"霰弹枪"}},AUTO_CROSSBOW:{id:16497,name:"Auto Crossbow",label:{zh:"自动弩"}},BIOBLASTER:{id:16499,name:"Bioblaster",label:{zh:"毒菌冲击"}},FLAMETHROWER:{id:7418,name:"Flamethrower",label:{zh:"火焰喷射器"}},DISMANTLE:{id:2887,name:"Dismantle",label:{zh:"武装解除"}},TACTICIAN:{id:16889,name:"Tactician",label:{zh:"策动"}},VOLLEY_FIRE:{id:2891,name:"Volley Fire",label:{zh:"齐射"}},ARM_PUNCH:{id:16504,name:"Arm Punch",label:{zh:"铁臂拳"}},ROOK_OVERLOAD:{id:7416,name:"Rook Overload",label:{zh:"超负荷车式炮塔"}},PILE_BUNKER:{id:16503,name:"Pile Bunker",label:{zh:"打桩枪"}},CROWNED_COLLIDER:{id:25787,name:"Crowned Collider",label:{zh:"王室对撞机"}}}),aD=$()({cd_REASSEMBLE:{name:"cd_Reassemble"},cd_DRILL:{name:"cd_Drill"},cd_CHECKMATE:{name:"cd_Checkmate"},cd_DOUBLE_CHECK:{name:"cd_DoubleCheck"},cd_AIR_ANCHOR:{name:"cd_AirAnchor"},cd_CHAINSAW:{name:"cd_Chainsaw",label:{zh:"CD：回转飞锯"}},cd_BARREL_STABILIZER:{name:"cd_BarrelStabilizer"},cd_WILDFIRE:{name:"cd_Wildfire"},cd_QUEEN:{name:"cd_Queen",label:{zh:"CD：后式自走人偶"}},cd_OVERDRIVE:{name:"cd_Overdrive",label:{zh:"CD：超档车式炮塔/超档后式人偶"}},cd_DISMANTLE:{name:"cd_Dismantle"},cd_TACTICIAN:{name:"cd_Tactician"},cd_HYPERCHARGE:{name:"cd_Hypercharge"},cd_DETONATOR:{name:"cd_Detonator"},cd_FLAMETHROWER:{name:"cd_Flamethrower"}}),iD=$()({HEAT_GAUGE:{name:"Heat",label:{zh:"枪管热度"}},BATTERY_GAUGE:{name:"Battery",label:{zh:"电能"}}}),Km=$()({REASSEMBLED:{name:"Reassembled",label:{zh:"整备预备"}},OVERHEATED:{name:"Overheated",label:{zh:"过热状态"},maximumStacks:5},WILDFIRE:{name:"Wildfire",label:{zh:"野火（敌）"}},WILDFIRE_SELF:{name:"Wildfire Self",label:{zh:"野火（我）"}},FLAMETHROWER:{name:"Flamethrower",label:{zh:"火焰喷射器持续中"}},BIOBLASTER:{name:"Bioblaster",label:{zh:"毒菌冲击dot"}},TACTICIAN:{name:"Tactician",label:{zh:"策动buff"}},HYPERCHARGED:{name:"Hypercharged",label:{zh:"超荷预备"}},EXCAVATOR_READY:{name:"Excavator Ready",label:{zh:"掘地飞轮预备"}},FULL_METAL_MACHINIST:{name:"Full Metal Machinist",label:{zh:"全金属爆发预备"}}}),lD=$()({HEAT_COMBO:{name:"Heat Combo",label:{zh:"热连击"}},QUEEN:{name:"Queen",label:{zh:"人偶预备"}},QUEEN_PUNCHES:{name:"QueenPunches",label:{zh:"人偶铁壁拳"}},QUEEN_FINISHERS:{name:"QueenFinishers",label:{zh:"人偶离场"}},BATTERY_BONUS:{name:"BatteryBonus",label:{zh:"额外电量"}},WILDFIRE_HITS:{name:"WildfireHits",label:{zh:"野火命中"}}}),oD=$()({CHARGED_ACTION_MASTERY:{name:"Charged Action Mastery",level:74},HOT_SHOT_MASTERY:{name:"Hot Shot Mastery",level:76},ENHANCED_WILD_FIRE:{name:"Enhanced Wildfire",level:88},PROMOTION:{name:"Promotion",level:80},SPREAD_SHOT_MASTERY:{name:"Spread Shot Mastery",level:82},ENHANCED_REASSEMBLE:{name:"Enhanced Reassemble",level:84},MARKSMANS_MASTERY:{name:"Marksman's Mastery",level:84},QUEENS_GAMBIT:{name:"Queen's Gambit",level:86},ENHANCED_TACTICIAN:{name:"Enhanced Tactician",level:88},DOUBLE_BARREL_MASTERY:{name:"Double-Barrel Mastery",level:92},ENHANCED_MULTI_WEAPON:{name:"Enhanced Multiweapon",level:94},MARKSMANS_MASTERY_II:{name:"Marksman's Mastery II",level:94},ENHANCED_MULTI_WEAPON_II:{name:"Enhanced Multiweapon II",level:96},ENHANCED_BARREL_STABILIZER:{name:"Enhanced Barrel Stabilizer",level:100}}),sD={...iD,...Km,...lD},rD=$()({}),cD=$()({}),uD=$()({}),dD=$()({}),fD=$()({}),hD=$()({}),ED={...uD,...dD,...fD},AD=$()({}),mD=$()({}),RD=$()({}),TD=$()({}),SD=$()({}),gD=$()({}),pD={...RD,...TD,...SD},_D=$()({FIRE_IN_RED:{name:"Fire in Red",label:{zh:"火炎之红",ja:"レッドファイア"}},AERO_IN_GREEN:{name:"Aero in Green",label:{zh:"疾风之绿",ja:"グリーンエアロ"}},WATER_IN_BLUE:{name:"Water in Blue",label:{zh:"流水之蓝",ja:"ブルーウォータ"}},FIRE_II_IN_RED:{name:"Fire II in Red",label:{zh:"烈炎之红",ja:"レッドファイラ"}},AERO_II_IN_GREEN:{name:"Aero II in Green",label:{zh:"烈风之绿",ja:"グリーンエアロラ"}},WATER_II_IN_BLUE:{name:"Water II in Blue",label:{zh:"激水之蓝",ja:"ブルーウォタラ"}},BLIZZARD_IN_CYAN:{name:"Blizzard in Cyan",label:{zh:"冰结之蓝青",ja:"シアンブリザド"}},STONE_IN_YELLOW:{name:"Stone in Yellow",label:{zh:"飞石之纯黄",ja:"イエローストーン"}},THUNDER_IN_MAGENTA:{name:"Thunder in Magenta",label:{zh:"闪雷之品红",ja:"マゼンタサンダー"}},BLIZZARD_II_IN_CYAN:{name:"Blizzard II in Cyan",label:{zh:"冰冻之蓝青",ja:"イエローストンラ"}},STONE_II_IN_YELLOW:{name:"Stone II in Yellow",label:{zh:"坚石之纯黄",ja:"マゼンタサンダラ"}},THUNDER_II_IN_MAGENTA:{name:"Thunder II in Magenta",label:{zh:"震雷之品红",ja:""}},HOLY_IN_WHITE:{name:"Holy in White",label:{zh:"神圣之白",ja:"ホワイトホーリー"}},COMET_IN_BLACK:{name:"Comet in Black",label:{zh:"彗星之黑",ja:"ブラックコメット"}},RAINBOW_DRIP:{name:"Rainbow Drip",label:{zh:"彩虹点滴",ja:"レインボードリップ"}},STAR_PRISM:{name:"Star Prism",label:{zh:"天星棱光",ja:"スタープリズム"}},TEMPERA_COAT:{name:"Tempera Coat",label:{zh:"坦培拉涂层",ja:"テンペラコート"}},TEMPERA_GRASSA:{name:"Tempera Grassa",label:{zh:"油性坦培拉涂层",ja:"テンペラグラッサ"}},TEMPERA_COAT_POP:{name:"Pop Tempera Coat",label:{zh:"坦培拉涂层破盾",ja:"テンペラコート【ブレイク】"}},TEMPERA_GRASSA_POP:{name:"Pop Tempera Grassa",label:{zh:"油性坦培拉涂层破盾",ja:"テンペラグラッサ【ブレイク】"}},SMUDGE:{name:"Smudge",label:{zh:"速涂",ja:"スマッジ"}},SUBTRACTIVE_PALETTE:{name:"Subtractive Palette",label:{zh:"减色混合",ja:"サブトラクティブパレット"}},CREATURE_MOTIF:{name:"Creature Motif",label:{zh:"动物彩绘",ja:"ピクトアニマル"}},POM_MOTIF:{name:"Pom Motif",label:{zh:"绒球彩绘",ja:"ピクトアニマル"}},WING_MOTIF:{name:"Wing Motif",label:{zh:"翅膀彩绘",ja:"ピクトスケープ"}},CLAW_MOTIF:{name:"Claw Motif",label:{zh:"兽爪彩绘",ja:"ピクトクロー"}},MAW_MOTIF:{name:"Maw Motif",label:{zh:"尖牙彩绘",ja:"ピクトファング"}},LIVING_MUSE:{name:"Living Muse",label:{zh:"动物构想",ja:"イマジンアニマル"}},POM_MUSE:{name:"Pom Muse",label:{zh:"绒球构想",ja:"ピクトポンポン"}},WINGED_MUSE:{name:"Winged Muse",label:{zh:"翅膀构想",ja:"ピクトウィング"}},CLAWED_MUSE:{name:"Clawed Muse",label:{zh:"兽爪构想",ja:"イマジンクロー"}},FANGED_MUSE:{name:"Fanged Muse",label:{zh:"尖牙构想",ja:"イマジンファング"}},MOG_OF_THE_AGES:{name:"Mog of the Ages",label:{zh:"莫古力激流",ja:"モーグリストリーム"}},RETRIBUTION_OF_THE_MADEEN:{name:"Retribution of the Madeen",label:{zh:"马蒂恩惩罚",ja:"マディーンレトリビューション"}},WEAPON_MOTIF:{name:"Weapon Motif",label:{zh:"武器彩绘",ja:"ピクトウェポン"}},STEEL_MUSE:{name:"Steel Muse",label:{zh:"武器构想",ja:"イマジンウェポン"}},HAMMER_MOTIF:{name:"Hammer Motif",label:{zh:"重锤彩绘",ja:"ピクトハンマー"}},STRIKING_MUSE:{name:"Striking Muse",label:{zh:"重锤构想",ja:"イマジンハンマー"}},HAMMER_STAMP:{name:"Hammer Stamp",label:{zh:"重锤敲章",ja:"ハンマースタンプ"}},HAMMER_BRUSH:{name:"Hammer Brush",label:{zh:"重锤掠刷",ja:"ハンマーブラッシュ"}},POLISHING_HAMMER:{name:"Polishing Hammer",label:{zh:"重锤抛光",ja:"ハンマーポリッシュ"}},LANDSCAPE_MOTIF:{name:"Landscape Motif",label:{zh:"风景彩绘",ja:"ピクトスケープ"}},SCENIC_MUSE:{name:"Scenic Muse",label:{zh:"风景构想",ja:"イマジンスケープ"}},STARRY_SKY_MOTIF:{name:"Starry Sky Motif",label:{zh:"星空彩绘",ja:"ピクトスカイ"}},STARRY_MUSE:{name:"Starry Muse",label:{zh:"星空构想",ja:"イマジンスカイ"}}}),ID=$()({cd_TEMPERA_COAT:{name:"cd_TemperaCoat"},cd_SMUDGE:{name:"cd_Smudge"},cd_LIVING_MUSE:{name:"cd_LivingMuse"},cd_PORTRAIT:{name:"cd_Portrait",label:{zh:"CD：莫古力激流/马蒂恩惩罚"}},cd_STEEL_MUSE:{name:"cd_SteelMuse"},cd_SCENIC_MUSE:{name:"cd_ScenicMuse"},cd_SUBTRACTIVE:{name:"cd_Subtractive",label:{zh:"CD：减色混合"}},cd_GRASSA:{name:"cd_Grassa",label:{zh:"CD：油性坦培拉涂层"}},cd_TEMPERA_POP:{name:"cd_TemperaPop",label:{zh:"CD：坦培拉涂层破盾"}}}),CD=$()({PORTRAIT:{name:"Portrait",label:{zh:"肖像标识（无/莫古力/马蒂恩）"}},DEPICTIONS:{name:"Depictions",label:{zh:"动物标识（绒球/翅膀/兽爪/尖牙）"}},CREATURE_CANVAS:{name:"Creature Canvas",label:{zh:"动物画"}},WEAPON_CANVAS:{name:"Weapon Canvas",label:{zh:"武器画"}},LANDSCAPE_CANVAS:{name:"Landscape Canvas",label:{zh:"风景画"}},PALETTE_GAUGE:{name:"Palette Gauge",label:{zh:"调色量谱"}},PAINT:{name:"Paint",label:{zh:"颜料量谱"}}}),Wm=$()({AETHERHUES:{name:"Aetherhues",label:{zh:"以太色调"},mayNotBeCanceled:!0,maximumStacks:2},MONOCHROME_TONES:{name:"Monochrome Tones",label:{zh:"色调反转"}},SUBTRACTIVE_PALETTE:{name:"Subtractive Palette",label:{zh:"减色混合"},mayNotBeCanceled:!0,maximumStacks:3},HAMMER_TIME:{name:"Hammer Time",label:{zh:"重锤连击"},mayNotBeCanceled:!0,maximumStacks:3},INSPIRATION:{name:"Inspiration",label:{zh:"绘画装置"},mayBeToggled:!0},SUBTRACTIVE_SPECTRUM:{name:"Subtractive Spectrum",label:{zh:"减色混合预备"}},HYPERPHANTASIA:{name:"Hyperphantasia",label:{zh:"绘灵幻景"},maximumStacks:5},RAINBOW_BRIGHT:{name:"Rainbow Bright",label:{zh:"彩虹点滴效果提高"}},STARSTRUCK:{name:"Starstruck",label:{zh:"天星棱光预备"}},STARRY_MUSE:{name:"Starry Muse",label:{zh:"星空构想"}},TEMPERA_COAT:{name:"Tempera Coat",label:{zh:"坦培拉涂层"}},TEMPERA_GRASSA:{name:"Tempera Grassa",label:{zh:"油性坦培拉涂层"}},SMUDGE:{name:"Smudge",label:{zh:"速涂"}}}),ND=$()({HAMMER_COMBO:{name:"Hammer Combo Counter",label:{zh:"重锤连击数"}}}),OD=$()({PICTOMANCY_MASTERY_II:{name:"Pictomancy Mastery II",level:74},ENHANCED_ARTISTRY:{name:"Enhanced Artistry",level:80},ENHANCED_PICTOMANCY:{name:"Enhanced Pictomancy",level:82},ENHANCED_SMUDGE:{name:"Enhanced Smudge",level:84},PICTOMANCY_MASTERY_III:{name:"Pictomancy Mastery III",level:84},ENHANCED_PICTOMANCY_II:{name:"Enhanced Pictomancy II",level:86},ENHANCED_TEMPERA:{name:"Enhanced Tempera",level:88},ENHANCED_PALETTE:{name:"Enhanced Palette",level:90},ENHANCED_PICTOMANCY_III:{name:"Enhanced Pictomancy III",level:92},PICTOMANCY_MASTERY_IV:{name:"Pictomancy Mastery IV",level:94},ENHANCED_PICTOMANCY_IV:{name:"Enhanced Pictomancy IV",level:96},ENHANCED_PICTOMANCY_V:{name:"Enhanced Pictomancy V",level:100}}),bD={...CD,...Wm,...ND},yD=$()({FAST_BLADE:{name:"Fast Blade"},FIGHT_OR_FLIGHT:{name:"Fight or Flight"},RIOT_BLADE:{name:"Riot Blade"},TOTAL_ECLIPSE:{name:"Total Eclipse"},SHIELD_BASH:{name:"Shield Bash"},IRON_WILL:{name:"Iron Will"},RELEASE_IRON_WILL:{name:"Release Iron Will"},SHIELD_LOB:{name:"Shield Lob"},SPIRITS_WITHIN:{name:"Spirits Within"},SHELTRON:{name:"Sheltron"},SENTINEL:{name:"Sentinel"},PROMINENCE:{name:"Prominence"},COVER:{name:"Cover"},CIRCLE_OF_SCORN:{name:"Circle of Scorn"},HALLOWED_GROUND:{name:"Hallowed Ground"},BULWARK:{name:"Bulwark"},GORING_BLADE:{name:"Goring Blade"},DIVINE_VEIL:{name:"Divine Veil"},CLEMENCY:{name:"Clemency"},ROYAL_AUTHORITY:{name:"Royal Authority"},INTERVENTION:{name:"Intervention"},HOLY_SPIRIT:{name:"Holy Spirit"},INTERVENE:{name:"Intervene"},REQUIESCAT:{name:"Requiescat"},PASSAGE_OF_ARMS:{name:"Passage of Arms"},HOLY_CIRCLE:{name:"Holy Circle"},ATONEMENT:{name:"Atonement"},SUPPLICATION:{name:"Supplication"},SEPULCHRE:{name:"Sepulchre"},CONFITEOR:{name:"Confiteor"},HOLY_SHELTRON:{name:"Holy Sheltron"},EXPIACION:{name:"Expiacion"},BLADE_OF_FAITH:{name:"Blade of Faith"},BLADE_OF_TRUTH:{name:"Blade of Truth"},BLADE_OF_VALOR:{name:"Blade of Valor"},GUARDIAN:{name:"Guardian"},IMPERATOR:{name:"Imperator"},BLADE_OF_HONOR:{name:"Blade of Honor"}}),vD=$()({cd_FIGHT_OR_FLIGHT:{name:"cd_FightOrFlight"},cd_IRON_WILL:{name:"cd_IronWill"},cd_RELEASE_IRON_WILL:{name:"cd_ReleaseIronWill"},cd_SPIRITS_WITHIN:{name:"cd_SpiritsWithin"},cd_SHELTRON:{name:"cd_Sheltron"},cd_SENTINEL:{name:"cd_Sentinel"},cd_COVER:{name:"cd_Cover"},cd_CIRCLE_OF_SCORN:{name:"cd_CircleOfScorn"},cd_HALLOWED_GROUND:{name:"cd_HallowedGround"},cd_BULWARK:{name:"cd_Bulwark"},cd_DIVINE_VEIL:{name:"cd_DivineVeil"},cd_INTERVENTION:{name:"cd_Intervention"},cd_INTERVENE:{name:"cd_Intervene"},cd_REQUIESCAT:{name:"cd_Requiescat"},cd_PASSAGE_OF_ARMS:{name:"cd_PassageOfArms"},cd_HOLY_SHELTRON:{name:"cd_HolySheltron"},cd_EXPIACION:{name:"cd_Expiacion"},cd_GUARDIAN:{name:"cd_Guardian"},cd_IMPERATOR:{name:"cd_Imperator"},cd_BLADE_OF_HONOR:{name:"cd_BladeOfHonor"}}),DD=$()({OATH_GAUGE:{name:"Oath Gauge"}}),qm=$()({FIGHT_OR_FLIGHT:{name:"Fight or Flight"},IRON_WILL:{name:"Iron Will"},CIRCLE_OF_SCORN_DOT:{name:"Circle of Scorn DoT"},SHELTRON:{name:"Sheltron"},SENTINEL:{name:"Sentinel"},COVER:{name:"Cover"},HALLOWED_GROUND:{name:"Hallowed Ground"},BULWARK:{name:"Bulwark"},GORING_BLADE_READY:{name:"Goring Blade Ready"},DIVINE_VEIL:{name:"Divine Veil"},ATONEMENT_READY:{name:"Atonement Ready"},DIVINE_MIGHT:{name:"Divine Might"},INTERVENTION:{name:"Intervention"},KNIGHTS_RESOLVE:{name:"Knight's Resolve"},KNIGHTS_BENEDICTION:{name:"Knight's Benediction"},REQUIESCAT:{name:"Requiescat",maximumStacks:4},CONFITEOR_READY:{name:"Confiteor Ready"},PASSAGE_OF_ARMS:{name:"Passage of Arms"},ARMS_UP:{name:"Arms Up"},SUPPLICATION_READY:{name:"Supplication Ready"},SEPULCHRE_READY:{name:"Sepulchre Ready"},HOLY_SHELTRON:{name:"Holy Sheltron"},BLADE_OF_HONOR_READY:{name:"Blade of Honor Ready"},GUARDIAN:{name:"Guardian"},GUARDIANS_WILL:{name:"Guardian's Will"}}),MD=$()({PLD_COMBO_TRACKER:{name:"PLD Combo Tracker"},PLD_CONFITEOR_COMBO_TRACKER:{name:"PLD Confiteor Combo Tracker"},PLD_AOE_COMBO_TRACKER:{name:"PLD AOE Combo Tracker"}}),LD=$()({ENHANCED_PROMINENCE:{name:"Enhanced Prominence",level:72},ENHANCED_SHELTRON:{name:"Enhanced Sheltron",level:74},SWORD_OATH:{name:"Sword Oath",level:76},ENHANCED_REQUIESCAT:{name:"Enhanced Requiescat",level:80},SHELTRON_MASTERY:{name:"Sheltron Mastery",level:82},ENHANCED_INTERVENTION:{name:"Enhanced Intervention",level:82},DIVINE_MAGIC_MASTERY_II:{name:"Divine Magic Mastery II",level:84},SPIRITS_WITHIN_MASTERY:{name:"Spirits Within Mastery",level:86},ENHANCED_DIVINE_VEIL:{name:"Enhanced Divine Veil",level:88},SENTINEL_MASTERY:{name:"Sentinel Mastery",level:92},REQUIESCAT_MASTERY:{name:"Requiescat Mastery",level:96},ENHANCED_BLADE_OF_VALOR:{name:"Enhanced Blade of Valor",level:100}}),HD={...DD,...qm,...MD},xD=$()({RIPOSTE:{name:"Riposte",label:{zh:"回刺",ja:""}},VERTHUNDER:{name:"Verthunder",label:{zh:"赤闪雷",ja:""}},CORPS_A_CORPS:{name:"Corps-a-corps",label:{zh:"短兵相接",ja:""}},VERAERO:{name:"Veraero",label:{zh:"赤疾风",ja:""}},VERFIRE:{name:"Verfire",label:{zh:"赤火炎",ja:""}},VERSTONE:{name:"Verstone",label:{zh:"赤飞石",ja:""}},ZWERCHHAU:{name:"Zwerchhau",label:{zh:"交击斩",ja:""}},DISPLACEMENT:{name:"Displacement",label:{zh:"移转",ja:""}},FLECHE:{name:"Fleche",label:{zh:"飞刺",ja:""}},REDOUBLEMENT:{name:"Redoublement",label:{zh:"连攻",ja:""}},ACCELERATION:{name:"Acceleration",label:{zh:"促进",ja:""}},MOULINET:{name:"Moulinet",label:{zh:"划圆斩",ja:""}},VERCURE:{name:"Vercure",label:{zh:"赤治疗",ja:""}},CONTRE_SIXTE:{name:"Contre Sixte",label:{zh:"六分反击",ja:""}},EMBOLDEN:{name:"Embolden",label:{zh:"鼓励",ja:""}},MANAFICATION:{name:"Manafication",label:{zh:"魔元化",ja:""}},JOLT_II:{name:"Jolt II",label:{zh:"震荡",ja:""}},VERRAISE:{name:"Verraise",label:{zh:"赤复活",ja:""}},IMPACT:{name:"Impact",label:{zh:"冲击",ja:""}},VERFLARE:{name:"Verflare",label:{zh:"赤核爆",ja:""}},VERHOLY:{name:"Verholy",label:{zh:"赤神圣",ja:""}},ENCHANTED_RIPOSTE:{name:"Enchanted Riposte",label:{zh:"魔回刺",ja:""}},ENCHANTED_ZWERCHHAU:{name:"Enchanted Zwerchhau",label:{zh:"魔交击斩",ja:""}},ENCHANTED_REDOUBLEMENT:{name:"Enchanted Redoublement",label:{zh:"魔连攻",ja:""}},ENCHANTED_MOULINET:{name:"Enchanted Moulinet",label:{zh:"魔划圆斩",ja:""}},VERTHUNDER_II:{name:"Verthunder II",label:{zh:"赤震雷",ja:""}},VERAERO_II:{name:"Veraero II",label:{zh:"赤烈风",ja:""}},ENGAGEMENT:{name:"Engagement",label:{zh:"交剑",ja:""}},ENCHANTED_REPRISE:{name:"Enchanted Reprise",label:{zh:"魔续斩",ja:""}},REPRISE:{name:"Reprise",label:{zh:"续斩",ja:""}},SCORCH:{name:"Scorch",label:{zh:"焦热",ja:""}},VERTHUNDER_III:{name:"Verthunder III",label:{zh:"赤暴雷",ja:""}},VERAERO_III:{name:"Veraero III",label:{zh:"赤疾风",ja:""}},MAGICK_BARRIER:{name:"Magick Barrier",label:{zh:"抗死",ja:""}},RESOLUTION:{name:"Resolution",label:{zh:"决断",ja:""}},ENCHANTED_MOULINET_II:{name:"Enchanted Moulinet Deux",label:{zh:"魔划圆斩·二段",ja:""}},ENCHANTED_MOULINET_III:{name:"Enchanted Moulinet Trois",label:{zh:"魔划圆斩·三段",ja:""}},JOLT_III:{name:"Jolt III",label:{zh:"激荡",ja:""}},VICE_OF_THORNS:{name:"Vice of Thorns",label:{zh:"荆棘回环",ja:""}},GRAND_IMPACT:{name:"Grand Impact",label:{zh:"显贵冲击",ja:""}},PREFULGENCE:{name:"Prefulgence",label:{zh:"光芒四射",ja:""}}}),UD=$()({cd_CORPS_A_CORPS:{name:"cd_CorpsACorps"},cd_DISPLACEMENT:{name:"cd_Displacement"},cd_FLECHE:{name:"cd_Fleche"},cd_ACCELERATION:{name:"cd_Acceleration"},cd_CONTRE_SIXTE:{name:"cd_ContreSixte"},cd_EMBOLDEN:{name:"cd_Embolden"},cd_MANAFICATION:{name:"cd_Manafication"},cd_MAGICK_BARRIER:{name:"cd_MagickBarrier"},cd_VICE_OF_THORNS:{name:"cd_ViceOfThorns"},cd_PREFULGENCE:{name:"cd_Prefulgence"}}),kD=$()({WHITE_MANA:{name:"White Mana",label:{zh:"白魔元"}},BLACK_MANA:{name:"Black Mana",label:{zh:"黑魔元"}},MANA_STACKS:{name:"Mana Stacks",label:{zh:"魔元集"}}}),Xm=$()({ACCELERATION:{name:"Acceleration",label:{zh:"促进"}},DUALCAST:{name:"Dualcast",label:{zh:"连续咏唱"}},EMBOLDEN:{name:"Embolden",label:{zh:"鼓励"}},GRAND_IMPACT_READY:{name:"Grand Impact Ready",label:{zh:"显贵冲击预备"}},MAGICK_BARRIER:{name:"Magick Barrier",label:{zh:"抗死"}},MAGICKED_SWORDPLAY:{name:"Magicked Swordplay",label:{zh:"魔法剑术"},maximumStacks:3},MANAFICATION:{name:"Manafication",label:{zh:"魔元化"},maximumStacks:6},PREFULGENCE_READY:{name:"Prefulgence Ready",label:{zh:"光芒四射预备"}},THORNED_FLOURISH:{name:"Thorned Flourish",label:{zh:"荆棘环绕预备"}},VERFIRE_READY:{name:"Verfire Ready",label:{zh:"赤火炎预备"}},VERSTONE_READY:{name:"Verstone Ready",label:{zh:"赤飞石预备"}}}),PD=$()({RDM_MELEE_COUNTER:{name:"RDM Melee Combo",label:{zh:"赤魔近战连"}},RDM_FINISHER_COUNTER:{name:"RDM Finisher Combo",label:{zh:"赤核爆/赤神圣连击"}},RDM_AOE_COUNTER:{name:"RDM AoE Combo",label:{zh:"赤魔AOE连"}}}),GD=$()({ENHANCED_DISPLACEMENT:{name:"Enhanced Displacement",level:72},RED_MAGIC_MASTERY:{name:"Red Magic Mastery",level:74},ENHANCED_MANAFICATION:{name:"Enhanced Manafication",level:78},RED_MAGIC_MASTERY_II:{name:"Red Magic Mastery II",level:82},RED_MAGIC_MASTERY_III:{name:"Red Magic Mastery III",level:84},ENHANCED_ACCELERATION:{name:"Enhanced Acceleration",level:88},ENHANCED_MANAFICATION_II:{name:"Enhanced Manafication II",level:90},ENHANCED_EMBOLDEN:{name:"Enhanced Embolden",level:92},ENCHANTED_BLADE_MASTERY:{name:"Enchanted Blade Mastery",level:94},ENHANCED_ACCELERATION_II:{name:"Enhanced Acceleration II",level:96},ENHANCED_MANAFICATION_III:{name:"Enhanced Manafication III",level:100}}),wD={...kD,...Xm,...PD},BD=$()({SLICE:{name:"Slice",label:{zh:"切割"}},WAXING_SLICE:{name:"Waxing Slice",label:{zh:"增盈切割"}},INFERNAL_SLICE:{name:"Infernal Slice",label:{zh:"地狱切割"}},SHADOW_OF_DEATH:{name:"Shadow of Death",label:{zh:"死亡之影"}},SOUL_SLICE:{name:"Soul Slice",label:{zh:"灵魂切割"}},GIBBET:{name:"Gibbet",label:{zh:"绞决"}},GALLOWS:{name:"Gallows",label:{zh:"缢杀"}},EXECUTIONERS_GIBBET:{name:"Executioner's Gibbet",label:{zh:"绞决处刑"}},EXECUTIONERS_GALLOWS:{name:"Executioner's Gallows",label:{zh:"缢杀处刑"}},VOID_REAPING:{name:"Void Reaping",label:{zh:"虚无收割"}},CROSS_REAPING:{name:"Cross Reaping",label:{zh:"交错收割"}},PLENTIFUL_HARVEST:{name:"Plentiful Harvest",label:{zh:"阴冷收割"}},HARVEST_MOON:{name:"Harvest Moon",label:{zh:"收获月"}},COMMUNIO:{name:"Communio",label:{zh:"团契"}},PERFECTIO:{name:"Perfectio",label:{zh:"完人"}},SOULSOW:{name:"Soulsow",label:{zh:"播魂种"}},HARPE:{name:"Harpe",label:{zh:"勾刃"}},BLOOD_STALK:{name:"Blood Stalk",label:{zh:"隐匿挥割"}},UNVEILED_GIBBET:{name:"Unveiled Gibbet",label:{zh:"绞决爪"}},UNVEILED_GALLOWS:{name:"Unveiled Gallows",label:{zh:"缢杀爪"}},LEMURES_SLICE:{name:"Lemure's Slice",label:{zh:"夜游魂切割"}},SACRIFICIUM:{name:"Sacrificium",label:{zh:"祭牲"}},ARCANE_CIRCLE:{name:"Arcane Circle",label:{zh:"神秘环"}},GLUTTONY:{name:"Gluttony",label:{zh:"暴食"}},ENSHROUD:{name:"Enshroud",label:{zh:"夜游魂衣"}},SPINNING_SCYTHE:{name:"Spinning Scythe",label:{zh:"旋转钐割"}},NIGHTMARE_SCYTHE:{name:"Nightmare Scythe",label:{zh:"噩梦钐割"}},WHORL_OF_DEATH:{name:"Whorl of Death",label:{zh:"死亡之涡"}},SOUL_SCYTHE:{name:"Soul Scythe",label:{zh:"灵魂钐割"}},GUILLOTINE:{name:"Guillotine",label:{zh:"断首"}},EXECUTIONERS_GUILLOTINE:{name:"Executioner's Guillotine",label:{zh:"断首处刑"}},GRIM_REAPING:{name:"Grim Reaping",label:{zh:"阴冷收割"}},GRIM_SWATHE:{name:"Grim Swathe",label:{zh:"束缚挥割"}},LEMURES_SCYTHE:{name:"Lemure's Scythe",label:{zh:"夜游魂钐割"}},ARCANE_CREST:{name:"Arcane Crest",label:{zh:"神秘纹"}},ARCANE_CREST_POP:{name:"Pop Arcane Crest",label:{zh:"神秘纹破裂"}},HELLS_INGRESS:{name:"Hell's Ingress",label:{zh:"地狱入境"}},HELLS_EGRESS:{name:"Hell's Egress",label:{zh:"地狱出境"}},REGRESS:{name:"Regress",label:{zh:"回退"}},GAIN_SOUL_GAUGE:{name:"+10 Soul Gauge",label:{zh:"灵魂量谱+10"}}}),FD=$()({cd_ARCANE_CIRCLE:{name:"cd_ArcaneCircle"},cd_GLUTTONY:{name:"cd_Gluttony"},cd_SOUL_SLICE:{name:"cd_SoulSlice"},cd_ENSHROUD:{name:"cd_Enshroud"},cd_INGRESS_EGRESS:{name:"cd_IngressEgress",label:{zh:"CD：地狱入境/地狱出境"}},cd_ARCANE_CREST:{name:"cd_ArcaneCrest"},cd_ARCANE_CREST_POP:{name:"cd_ArcaneCrestPop"},cd_BLOOD_STALK:{name:"cd_BloodStalk"},cd_LEMURES_SLICE:{name:"cd_LemuresSlice"},cd_SACRIFICIUM:{name:"cd_Sacrificium"},cd_GAIN_SOUL_GAUGE:{name:"cd_GainSoulGauge"}}),jD=$()({SOUL:{name:"Soul",label:{zh:"灵魂"}},SHROUD:{name:"Shroud",label:{zh:"魂衣"}},LEMURE_SHROUD:{name:"Lemure Shroud",label:{zh:"夜游魂"}},VOID_SHROUD:{name:"Void Shroud",label:{zh:"虚无魂"}}}),Zm=$()({DEATHS_DESIGN:{name:"Death's Design",label:{zh:"死亡烙印"}},SOUL_REAVER:{name:"Soul Reaver",label:{zh:"妖异之镰"},maximumStacks:2},ENHANCED_GIBBET:{name:"Enhanced Gibbet",label:{zh:"绞决效果提高"}},ENHANCED_GALLOWS:{name:"Enhanced Gallows",label:{zh:"缢杀效果提高"}},EXECUTIONER:{name:"Executioner",label:{zh:"处刑人"},maximumStacks:2},ENSHROUDED:{name:"Enshrouded",label:{zh:"夜游魂衣"}},ENHANCED_VOID_REAPING:{name:"Enhanced Void Reaping",label:{zh:"虚无收割效果提高"}},ENHANCED_CROSS_REAPING:{name:"Enhanced Cross Reaping",label:{zh:"交错收割效果提高"}},OBLATIO:{name:"Oblatio",label:{zh:"祭牲预备"}},IDEAL_HOST:{name:"Ideal Host",label:{zh:"夜游魂衣预备"}},PERFECTIO_OCCULTA:{name:"Perfectio Occulta",label:{zh:"补完"}},PERFECTIO_PARATA:{name:"Perfectio Parata",label:{zh:"完人预备"}},ARCANE_CIRCLE:{name:"Arcane Circle",label:{zh:"神秘环"}},CIRCLE_OF_SACRIFICE:{name:"Circle of Sacrifice",label:{zh:"祭祀环"}},BLOODSOWN_CIRCLE:{name:"Bloodsown Circle",label:{zh:"死亡祭祀"}},IMMORTAL_SACRIFICE:{name:"Immortal Sacrifice",label:{zh:"死亡祭品"},maximumStacks:8},CREST_OF_TIME_BORROWED:{name:"Crest of Time Borrowed",label:{zh:"守护纹"}},CREST_OF_TIME_RETURNED:{name:"Crest of Time Returned",label:{zh:"活性纹"}},SOULSOW:{name:"Soulsow",label:{zh:"播魂种"}},THRESHOLD:{name:"Threshold",label:{zh:"回退预备"}},ENHANCED_HARPE:{name:"Enhanced Harpe",label:{zh:"勾刃效果提高"}}}),zD=$()({ARCANE_CREST:{name:"Arcane Crest",label:{zh:"神秘纹"}},HELLS_INGRESS_USED:{name:"Hell's Ingress Used",label:{zh:"地狱入境已使用"}},RPR_COMBO:{name:"RPR Combo",label:{zh:"单体连击"}},RPR_AOE_COMBO:{name:"RPR AoE Combo",label:{zh:"AOE连击"}}}),YD=$()({HELLSGATE:{name:"Hellsgate",level:74},TEMPERED_SOUL:{name:"Tempered Soul",level:78},SHROUD_GAUGE:{name:"Shroud Gauge",level:80},ENHANCED_ARCANE_CREST:{name:"Enhanced Arcane Crest",level:84},MELEE_MASTERY_II_RPR:{name:"Melee Mastery II",level:84},VOID_SOUL:{name:"Void Soul",level:86},ENHANCED_ARCANE_CIRCLE:{name:"Enhanced Arcane Circle",level:88},ENHANCED_ENSHROUD:{name:"Enhanced Enshroud",level:92},MELEE_MASTERY_III_RPR:{name:"Melee Mastery III",level:94},ENHANCED_GLUTTONY:{name:"Enhanced Gluttony",level:96},ENHANCED_PLENTIFUL_HARVEST:{name:"Enhanced Plentiful Harvest",level:100}}),VD={...jD,...Zm,...zD},KD=$()({ENPI:{name:"Enpi",label:{zh:"燕飞"}},HAKAZE:{name:"Hakaze",label:{zh:"刃风"}},GYOFU:{name:"Gyofu",label:{zh:"晓风"}},YUKIKAZE:{name:"Yukikaze",label:{zh:"雪风"}},JINPU:{name:"Jinpu",label:{zh:"阵风"}},GEKKO:{name:"Gekko",label:{zh:"月光"}},SHIFU:{name:"Shifu",label:{zh:"士风"}},KASHA:{name:"Kasha",label:{zh:"花车"}},FUGA:{name:"Fuga",label:{zh:"风雅"}},FUKO:{name:"Fuko",label:{zh:"风光"}},MANGETSU:{name:"Mangetsu",label:{zh:"满月"}},OKA:{name:"Oka",label:{zh:"樱花"}},MEIKYO_SHISUI:{name:"Meikyo Shisui",label:{zh:"明镜止水"}},IKISHOTEN:{name:"Ikishoten",label:{zh:"意气冲天"}},HISSATSU_SHINTEN:{name:"Hissatsu: Shinten",label:{zh:"必杀剑·震天"}},HISSATSU_KYUTEN:{name:"Hissatsu: Kyuten",label:{zh:"必杀剑·九天"}},HISSATSU_GYOTEN:{name:"Hissatsu: Gyoten",label:{zh:"必杀剑·晓天"}},HISSATSU_YATEN:{name:"Hissatsu: Yaten",label:{zh:"必杀剑·夜天"}},HISSATSU_SENEI:{name:"Hissatsu: Senei",label:{zh:"必杀剑·闪影"}},HISSATSU_GUREN:{name:"Hissatsu: Guren",label:{zh:"必杀剑·红莲"}},HAGAKURE:{name:"Hagakure",label:{zh:"叶隐"}},IAIJUTSU:{name:"Iaijutsu",label:{zh:"居合术"}},TSUBAME_GAESHI:{name:"Tsubame-gaeshi",label:{zh:"燕回返"}},SHOHA:{name:"Shoha",label:{zh:"照破"}},THIRD_EYE:{name:"Third Eye",label:{zh:"心眼"}},TENGENTSU:{name:"Tengentsu",label:{zh:"天眼通"}},OGI_NAMIKIRI:{name:"Ogi Namikiri",label:{zh:"奥义斩浪"}},KAESHI_NAMIKIRI:{name:"Kaeshi: Namikiri",label:{zh:"回返斩浪"}},ZANSHIN:{name:"Zanshin",label:{zh:"残心"}},MEDITATE:{name:"Meditate",label:{zh:"默想"}},HIGANBANA:{name:"Higanbana",label:{zh:"彼岸花"}},TENKA_GOKEN:{name:"Tenka Goken",label:{zh:"天下五剑"}},KAESHI_GOKEN:{name:"Kaeshi: Goken",label:{zh:"回返五剑"}},TENDO_GOKEN:{name:"Tendo Goken",label:{zh:"天道五剑"}},TENDO_KAESHI_GOKEN:{name:"Tendo Kaeshi Goken",label:{zh:"天道回返五剑"}},MIDARE_SETSUGEKKA:{name:"Midare Setsugekka",label:{zh:"纷乱雪月花"}},KAESHI_SETSUGEKKA:{name:"Kaeshi: Setsugekka",label:{zh:"回返雪月花"}},TENDO_SETSUGEKKA:{name:"Tendo Setsugekka",label:{zh:"天道雪月花"}},TENDO_KAESHI_SETSUGEKKA:{name:"Tendo Kaeshi Setsugekka",label:{zh:"天道回返雪月花"}},THIRD_EYE_POP:{name:"Pop Third Eye",label:{zh:"心眼触发"}},TENGENTSU_POP:{name:"Pop Tengentsu",label:{zh:"天眼通触发"}}}),WD=$()({cd_YATEN:{name:"cd_Yaten",label:{zh:"CD：夜天"}},cd_GYOTEN:{name:"cd_Gyoten",label:{zh:"CD：晓天"}},cd_SENEI_GUREN:{name:"cd_Senei",label:{zh:"CD: 闪影/红莲"}},cd_SHINTEN:{name:"cd_Shinten",label:{zh:"CD：震天"}},cd_KYUTEN:{name:"cd_Kyuten",label:{zh:"CD：九天"}},cd_MEDITATE:{name:"cd_Meditate"},cd_IKISHOTEN:{name:"cd_Ikishoten"},cd_ZANSHIN:{name:"cd_Zanshin"},cd_HAGAKURE:{name:"cd_Hagakure"},cd_SHOHA:{name:"cd_Shoha"},cd_MEIKYO_SHISUI:{name:"cd_MeikyoShisui"},cd_THIRD_EYE:{name:"cd_ThirdEye"},cd_THIRD_EYE_POP:{name:"cd_ThirdEyePop"}}),qD=$()({KENKI:{name:"Kenki",label:{zh:"剑气"}},SETSU:{name:"Setsu",label:{zh:"雪闪"}},GETSU:{name:"Getsu",label:{zh:"月闪"}},KA_SEN:{name:"Ka",label:{zh:"花闪"}},MEDITATION:{name:"Meditation",label:{zh:"默想"}}}),Qm=$()({MEIKYO_SHISUI:{name:"Meikyo Shisui",label:{zh:"明镜止水"},maximumStacks:3},FUGETSU:{name:"Fugetsu",label:{zh:"风月"}},FUKA:{name:"Fuka",label:{zh:"风花"}},ZANSHIN_READY:{name:"Zanshin Ready",label:{zh:"残心预备"}},TENDO:{name:"Tendo",label:{zh:"天道"}},OGI_READY:{name:"Ogi Namikiri Ready",label:{zh:"奥义斩浪预备"}},TSUBAME_GAESHI_READY:{name:"Tsubame-gaeshi Ready",label:{zh:"燕回返预备"}},THIRD_EYE:{name:"Third Eye",label:{zh:"心眼"}},TENGENTSU:{name:"Tengentsu",label:{zh:"天眼通"}},TENGENTSUS_FORESIGHT:{name:"Tengentsu's Foresight",label:{zh:"通天眼"}},MEDITATE:{name:"Meditate",label:{zh:"默想"}},ENHANCED_ENPI:{name:"Enhanced Enpi",label:{zh:"燕飞效果提高"}},HIGANBANA_DOT:{name:"HiganbanaDoT",label:{zh:"彼岸花dot"}}}),XD=$()({SAM_TWO_READY:{name:"SAMTwoReady",label:{zh:"连击2预备"}},SAM_TWO_AOE_READY:{name:"SAMTwoAoeReady",label:{zh:"AOE2预备"}},GEKKO_READY:{name:"GekkoReady",label:{zh:"月光预备"}},KASHA_READY:{name:"KashaReady",label:{zh:"花车预备"}},KAESHI_OGI_READY:{name:"KaeshiOgiReady",label:{zh:"回返斩浪预备"}},KAESHI_TRACKER:{name:"KaeshiTracker",label:{zh:"回返状态"}}}),ZD=$()({ENHANCED_IAIJUTSU:{name:"Enhanced Iaijutsu",level:74},ENHANCED_MEIKYO_SHISUI:{name:"Enhanced Meikyo Shisui",level:76},ENHANCED_FUGETSU_AND_FUKA:{name:"Enhanced Fugetsu and Fuka",level:78},THIRD_EYE_MASTERY:{name:"Third Eye Mastery",level:82},WAY_OF_THE_SAMURAI_II:{name:"Way of the Samurai II",level:84},FUGA_MASTERY:{name:"Fuga Mastery",level:86},ENHANCED_IKISHOTEN:{name:"Enhanced Ikishoten",level:90},HAKAZE_MASTERY:{name:"Hakaze Mastery",level:92},ENHANCED_HISSATSU:{name:"Enhanced Hissatsu",level:94},WAY_OF_THE_SAMURAI_III:{name:"Way of the Samurai III",level:94},ENHANCED_IKISHOTEN_II:{name:"Enhanced Ikishoten II",level:96},ENHANCED_MEIKYO_SHISUI_II:{name:"Enhanced Meikyo Shisui II",level:100}}),QD={...qD,...Qm,...XD},$D=$()({}),JD=$()({}),eM=$()({}),tM=$()({}),nM=$()({}),aM=$()({}),iM={...eM,...tM,...nM},lM=$()({DIAGNOSIS:{id:24284,name:"Diagnosis"},EUKRASIAN_DIAGNOSIS:{id:24291,name:"Eukrasian Diagnosis"},EUKRASIAN_DIAGNOSIS_POP:{name:"Pop Eukrasian Diagnosis"},HAIMA:{id:24305,name:"Haima"},HAIMA_POP:{name:"Pop Haima"},EGEIRO:{id:24287,name:"Egeiro"},PROGNOSIS:{id:24286,name:"Prognosis"},EUKRASIAN_PROGNOSIS:{id:24292,name:"Eukrasian Prognosis"},EUKRASIAN_PROGNOSIS_II:{id:37034,name:"Eukrasian Prognosis II"},EUKRASIAN_PROGNOSIS_POP:{name:"Pop Eukrasian Prognosis"},EUKRASIAN_PROGNOSIS_II_POP:{name:"Pop Eukrasian Prognosis II"},PANHAIMA:{id:24311,name:"Panhaima"},PANHAIMA_POP:{name:"Pop Panhaima"},PHYSIS_II:{id:24302,name:"Physis II"},HOLOS:{id:24310,name:"Holos"},PEPSIS:{id:24301,name:"Pepsis"},KARDIA:{id:24285,name:"Kardia"},EUKRASIA:{id:24290,name:"Eukrasia"},SOTERIA:{id:24294,name:"Soteria"},ICARUS:{id:24295,name:"Icarus"},ZOE:{id:24300,name:"Zoe"},KRASIS:{id:24317,name:"Krasis"},PHILOSOPHIA:{id:37035,name:"Philosophia"},RHIZOMATA:{id:24309,name:"Rhizomata"},DRUOCHOLE:{id:24296,name:"Druochole"},IXOCHOLE:{id:24299,name:"Ixochole"},KERACHOLE:{id:24298,name:"Kerachole"},TAUROCHOLE:{id:24303,name:"Taurochole"},DOSIS:{id:24283,name:"Dosis"},DOSIS_II:{id:24306,name:"Dosis II"},DOSIS_III:{id:24312,name:"Dosis III"},EUKRASIAN_DOSIS:{id:24293,name:"Eukrasian Dosis"},EUKRASIAN_DOSIS_II:{id:24308,name:"Eukrasian Dosis II"},EUKRASIAN_DOSIS_III:{id:24314,name:"Eukrasian Dosis III"},TOXIKON:{id:24304,name:"Toxikon"},TOXIKON_II:{id:24316,name:"Toxikon II"},DYSKRASIA:{id:24297,name:"Dyskrasia"},DYSKRASIA_II:{id:24315,name:"Dyskrasia II"},EUKRASIAN_DYSKRASIA:{id:37032,name:"Eukrasian Dyskrasia"},PHLEGMA:{id:24289,name:"Phlegma"},PHLEGMA_II:{id:24307,name:"Phlegma II"},PHLEGMA_III:{id:24313,name:"Phlegma III"},PSYCHE:{id:37033,name:"Psyche"},PNEUMA:{id:24318,name:"Pneuma"}}),oM=$()({cd_HAIMA:{name:"cd_Haima"},cd_PANHAIMA:{name:"cd_PANHAIMA"},cd_PHYSIS:{name:"cd_PHYSIS"},cd_HOLOS:{name:"cd_HOLOS"},cd_PEPSIS:{name:"cd_PEPSIS"},cd_KARDIA:{name:"cd_KARDIA"},cd_EUKRASIA:{name:"cd_EUKRASIA"},cd_SOTERIA:{name:"cd_SOTERIA"},cd_ICARUS:{name:"cd_ICARUS"},cd_ZOE:{name:"cd_ZOE"},cd_KRASIS:{name:"cd_KRASIS"},cd_PHILOSOPHIA:{name:"cd_PHILOSOPHIA"},cd_RHIZOMATA:{name:"cd_RHIZOMATA"},cd_DRUOCHOLE:{name:"cd_DRUOCHOLE"},cd_IXOCHOLE:{name:"cd_IXOCHOLE"},cd_KERACHOLE:{name:"cd_KERACHOLE"},cd_TAUROCHOLE:{name:"cd_TAUROCHOLE"},cd_PHLEGMA:{name:"cd_PHLEGMA"},cd_PSYCHE:{name:"cd_PSYCHE"},cd_PNEUMA:{name:"cd_PNEUMA"},cd_DIAGNOSIS_POP:{name:"cd_DIAGNOSIS_POP"},cd_PROGNOSIS_POP:{name:"cd_PROGNOSIS_POP"},cd_HAIMA_POP:{name:"cd_HAIMA_POP"},cd_PANHAIMA_POP:{name:"cd_PANHAIMA_POP"}}),sM=$()({ADDERSGALL:{name:"Addersgall"},ADDERSTING:{name:"Addersting"}}),eC=$()({EUKRASIA:{id:2606,name:"Eukrasia"},EUKRASIAN_DIAGNOSIS:{id:2607,name:"Eukrasian Diagnosis"},DIFFERENTIAL_DIAGNOSIS:{id:2608,name:"Differential Diagnosis"},HAIMA:{id:2612,name:"Haima",mayNotBeCanceled:!0},HAIMATINON:{id:2642,name:"Haimatinon",maximumStacks:5,mayNotBeCanceled:!0},EUKRASIAN_PROGNOSIS:{id:2609,name:"Eukrasian Prognosis"},PANHAIMA:{id:2613,name:"Panhaima",mayNotBeCanceled:!0},PANHAIMATINON:{id:2643,name:"Panhaimatinon",maximumStacks:5,mayNotBeCanceled:!0},PHYSIS_II:{id:2620,name:"Physis II"},AUTOPHYSIS:{id:2621,name:"Autophysis"},KARDIA:{id:2604,name:"Kardia"},KARDION:{id:2605,name:"Kardion"},PHILOSOPHIA:{id:3898,name:"Philosophia"},EUDAIMONIA:{id:3899,name:"Eudaimonia"},SOTERIA:{id:2610,name:"Soteria",maximumStacks:4},ZOE:{id:2611,name:"Zoe"},KRASIS:{id:2622,name:"Krasis"},KERACHOLE:{id:2618,name:"Kerachole"},KERAKEIA:{id:2938,name:"Kerakeia"},TAUROCHOLE:{id:2619,name:"Taurochole"},EUKRASIAN_DOSIS:{id:2614,name:"Eukrasian Dosis"},EUKRASIAN_DOSIS_II:{id:2615,name:"Eukrasian Dosis II"},EUKRASIAN_DOSIS_III:{id:2616,name:"Eukrasian Dosis III"},EUKRASIAN_DYSKRASIA:{id:3897,name:"Eukrasian Dyskrasia"},PNEUMA:{id:2623,name:"Pneuma"},HOLOS:{id:3003,name:"Holos"},HOLOSAKOS:{id:3365,name:"Holosakos"}}),rM=$()({PEPSIS:{name:"Pepsis"}}),cM=$()({OFFENSIVE_MAGIC_MASTERY:{name:"Offensive Magic Mastery",level:72},OFFENSIVE_MAGIC_MASTERY_II:{name:"Offensive Magic Mastery II",level:82},ENHANCED_KERACHOLE:{name:"Enhanced Kerachole",level:78},ENHANCED_HEALING_MAGIC:{name:"Enhanced Healing Magic",level:85},ENHANCED_ZOE:{name:"Enhanced Zoe",level:88},ENHANCED_SOTERIA:{name:"Enhanced Soteria",level:94},EUKRASIAN_PROGNOSIS_MASTERY:{name:"Eukrasian Prognosis Mastery",level:96},ENHANCED_PHYSIS_II:{name:"Enhanced Physis II",level:98}}),uM={...sM,...eC,...rM},dM=$()({SUMMON_CARBUNCLE:{name:"Summon Carbuncle"},RADIANT_AEGIS:{name:"Radiant Aegis"},PHYSICK:{name:"Physick"},GEMSHINE:{name:"Gemshine"},FESTER:{name:"Fester"},ENERGY_DRAIN:{name:"Energy Drain"},RESURRECTION:{name:"Resurrection"},OUTBURST:{name:"Outburst"},PRECIOUS_BRILLIANCE:{name:"Precious Brilliance"},RUBY_OUTBURST:{name:"Ruby Outburst"},TOPAZ_OUTBURST:{name:"Topaz Outburst"},EMERALD_OUTBURST:{name:"Emerald Outburst"},SUMMON_IFRIT:{name:"Summon Ifrit"},PAINFLARE:{name:"Painflare"},SUMMON_TITAN:{name:"Summon Titan"},SUMMON_GARUDA:{name:"Summon Garuda"},ENERGY_SIPHON:{name:"Energy Siphon"},RUBY_RUIN_III:{name:"Ruby Ruin III"},TOPAZ_RUIN_III:{name:"Topaz Ruin III"},EMERALD_RUIN_III:{name:"Emerald Ruin III"},RUIN_III:{name:"Ruin III"},ASTRAL_IMPULSE:{name:"Astral Impulse"},ASTRAL_FLARE:{name:"Astral Flare"},ASTRAL_FLOW:{name:"Astral Flow"},DEATHFLARE:{name:"Deathflare"},RUIN_IV:{name:"Ruin IV"},SEARING_LIGHT:{name:"Searing Light"},SUMMON_BAHAMUT:{name:"Summon Bahamut"},ENKINDLE_BAHAMUT:{name:"Enkindle Bahamut"},RUBY_RITE:{name:"Ruby Rite"},TOPAZ_RITE:{name:"Topaz Rite"},EMERALD_RITE:{name:"Emerald Rite"},TRI_DISASTER:{name:"Tri-disaster"},RUBY_DISASTER:{name:"Ruby Disaster"},TOPAZ_DISASTER:{name:"Topaz Disaster"},EMERALD_DISASTER:{name:"Emerald Disaster"},SUMMON_PHOENIX:{name:"Summon Phoenix"},FOUNTAIN_OF_FIRE:{name:"Fountain of Fire"},BRAND_OF_PURGATORY:{name:"Brand of Purgatory"},REKINDLE:{name:"Rekindle"},ENKINDLE_PHOENIX:{name:"Enkindle Phoenix"},RUBY_CATASTROPHE:{name:"Ruby Catastrophe"},TOPAZ_CATASTROPHE:{name:"Topaz Catastrophe"},EMERALD_CATASTROPHE:{name:"Emerald Catastrophe"},CRIMSON_CYCLONE:{name:"Crimson Cyclone"},CRIMSON_STRIKE:{name:"Crimson Strike"},MOUNTAIN_BUSTER:{name:"Mountain Buster"},SLIPSTREAM:{name:"Slipstream"},SUMMON_IFRIT_II:{name:"Summon Ifrit II"},SUMMON_TITAN_II:{name:"Summon Titan II"},SUMMON_GARUDA_II:{name:"Summon Garuda II"},NECROTIZE:{name:"Necrotize"},SEARING_FLASH:{name:"Searing Flash"},SUMMON_SOLAR_BAHAMUT:{name:"Summon Solar Bahamut"},UMBRAL_IMPULSE:{name:"Umbral Impulse"},UMBRAL_FLARE:{name:"Umbral Flare"},SUNFLARE:{name:"Sunflare"},ENKINDLE_SOLAR_BAHAMUT:{name:"Enkindle Solar Bahamut"},LUX_SOLARIS:{name:"Lux Solaris"},INFERNO:{name:"Inferno"},EARTHEN_FURY:{name:"Earthen Fury"},AERIAL_BLAST:{name:"Aerial Blast"},WYRMWAVE:{name:"Wyrmwave"},SCARLET_FLAME:{name:"Scarlet Flame"},LUXWAVE:{name:"Luxwave"},AKH_MORN:{name:"Akh Morn"},REVELATION:{name:"Revelation"},EXODUS:{name:"Exodus"}}),fM=$()({cd_RADIANT_AEGIS:{name:"cd_RADIANT_AEGIS"},cd_ASTRAL_FLOW:{name:"cd_ASTRAL_FLOW"},cd_ENKINDLE:{name:"cd_ENKINDLE"},cd_DEMI_SUMMON:{name:"cd_DEMI_SUMMON"},cd_ENERGY_DRAIN:{name:"cd_ENERGY_DRAIN"},cd_AETHERFLOW:{name:"cd_AETHERFLOW"},cd_SEARING_LIGHT:{name:"cd_SEARING_LIGHT"},cd_SEARING_FLASH:{name:"cd_SEARING_FLASH"},cd_LUX_SOLARIS:{name:"cd_LUX_SOLARIS"},cd_MOUNTAIN_BUSTER:{name:"cd_MOUNTAIN_BUSTER"},cd_SUMMON_LOCKOUT:{name:"cd_SUMMON_LOCKOUT"}}),hM=$()({AETHERFLOW:{name:"Aetherflow"},RUBY_ARCANUM:{name:"Ruby Arcanum"},TOPAZ_ARCANUM:{name:"Topaz Arcanum"},EMERALD_ARCANUM:{name:"Emerald Arcanum"},FIRE_ATTUNEMENT:{name:"Fire Attunement"},EARTH_ATTUNEMENT:{name:"Earth Attunement"},WIND_ATTUNEMENT:{name:"Wind Attunement"},ACTIVE_DEMI:{name:"Active Demi"}}),$m=$()({AETHERFLOW:{name:"Aetherflow",maximumStacks:2},CRIMSON_STRIKE_READY:{name:"Crimson Strike Ready"},EVERLASTING_FLIGHT:{name:"Everlasting Flight"},FURTHER_RUIN:{name:"Further Ruin"},GARUDAS_FAVOR:{name:"Garuda's Favor"},IFRITS_FAVOR:{name:"Ifrit's Favor"},RADIANT_AEGIS:{name:"Radiant Aegis"},REFULGENT_LUX:{name:"Refulgent Lux"},REKINDLE:{name:"Rekindle"},RUBYS_GLIMMER:{name:"Ruby's Glimmer"},SEARING_LIGHT:{name:"Searing Light"},SLIPSTREAM:{name:"Slipstream",mayBeToggled:!0},TITANS_FAVOR:{name:"Titan's Favor"},UNDYING_FLAME:{name:"Undying Flame"}}),EM=$()({NEXT_DEMI_CYCLE:{name:"Next Demi Cycle"},DEMI_AUTO:{name:"Demi Auto-attack"}}),AM=$()({RUIN_MASTERY_III:{name:"Ruin Mastery III",level:72},OUTBURST_MASTERY:{name:"Outburst Mastery",level:74},ENHANCED_SUMMON_BAHAMUT:{name:"Enhanced Summon Bahamut",level:80},OUTBURST_MASTERY_II:{name:"Outburst Mastery II",level:82},RUIN_MASTERY_IV:{name:"Ruin Mastery IV",level:84},ELEMENTAL_MASTERY:{name:"Elemental Mastery",level:86},ENHANCED_RADIANT_AEGIS:{name:"Enhanced Radiant Aegis",level:88},ENKINDLE_II:{name:"Enkindle II",level:90},ENHANCED_FESTER:{name:"Enhanced Fester",level:92},ARCANE_MASTERY:{name:"Arcane Mastery",level:94},ENHANCED_SEARING_LIGHT:{name:"Enhanced Searing Light",level:96},ENHANCED_SUMMON_BAHAMUT_II:{name:"Enhanced Summon Bahamut II",level:100}}),mM={...hM,...$m,...EM},RM=$()({}),TM=$()({}),SM=$()({}),gM=$()({}),pM=$()({}),_M=$()({}),IM={...SM,...gM,...pM},CM=$()({HEAVY_SWING:{name:"Heavy Swing",label:{zh:"重劈"}},MAIM:{name:"Maim",label:{zh:"凶残裂"}},STORMS_PATH:{name:"Storms Path",label:{zh:"暴风斩"}},STORMS_EYE:{name:"Storms Eye",label:{zh:"暴风碎"}},FELL_CLEAVE:{name:"Fell Cleave",label:{zh:"裂石飞环"}},UPHEAVAL:{name:"Upheaval",label:{zh:"动乱"}},ONSLAUGHT:{name:"Onslaught",label:{zh:"猛攻"}},TOMAHAWK:{name:"Tomahawk",label:{zh:"飞斧"}},OVERPOWER:{name:"Overpower",label:{zh:"超压斧"}},MYTHRIL_TEMPEST:{name:"Mythril Tempest",label:{zh:"秘银暴风"}},DECIMATE:{name:"Decimate",label:{zh:"地毁人亡"}},OROGENY:{name:"Orogeny",label:{zh:"群山隆起"}},INNER_RELEASE:{name:"Inner Release",label:{zh:"原初的解放"}},PRIMAL_WRATH:{name:"Primal Wrath",label:{zh:"原初的怒震"}},PRIMAL_REND:{name:"Primal Rend",label:{zh:"蛮荒崩裂"}},PRIMAL_RUINATION:{name:"Primal Ruination",label:{zh:"尽毁"}},INFURIATE:{name:"Infuriate",label:{zh:"战嚎"}},INNER_CHAOS:{name:"Inner Chaos",label:{zh:"狂魂"}},CHAOTIC_CYCLONE:{name:"Chaotic Cyclone",label:{zh:"混沌旋风"}},THRILL_OF_BATTLE:{name:"Thrill of Battle",label:{zh:"战栗"}},EQUILIBRIUM:{name:"Equilibrium",label:{zh:"泰然自若"}},SHAKE_IT_OFF:{name:"Shake It Off",label:{zh:"摆脱"}},RAW_INTUITION:{name:"Raw Intuition",label:{zh:"原初的直觉"}},NASCENT_FLASH:{name:"Nascent Flash",label:{zh:"原初的勇猛"}},BLOODWHETTING:{name:"Bloodwhetting",label:{zh:"原初的血气"}},VENGEANCE:{name:"Vengeance",label:{zh:"复仇"}},DAMNATION:{name:"Damnation",label:{zh:"戮罪"}},HOLMGANG:{name:"Holmgang",label:{zh:"死斗"}},DEFIANCE:{name:"Defiance",label:{zh:"守护"}},RELEASE_DEFIANCE:{name:"Release Defiance",label:{zh:"取消守护"}}}),NM=$()({cd_INNER_RELEASE:{name:"cd_InnerRelease"},cd_PRIMAL_WRATH:{name:"cd_PrimalWrath"},cd_UPHEAVAL:{name:"cd_Upheaval"},cd_ONSLAUGHT:{name:"cd_Onslaught"},cd_INFURIATE:{name:"cd_Infuriate"},cd_VENGEANCE:{name:"cd_Vengeance"},cd_THRILL_OF_BATTLE:{name:"cd_ThrillOfBattle"},cd_RAW_INTUITION:{name:"cd_RawIntuition"},cd_EQUILIBRIUM:{name:"cd_Equilibrium"},cd_SHAKE_IT_OFF:{name:"cd_ShakeItOff"},cd_HOLMGANG:{name:"cd_Holmgang"},cd_DEFIANCE:{name:"cd_Defiance"},cd_RELEASE_DEFIANCE:{name:"cd_ReleaseDefiance"}}),OM=$()({BEAST_GAUGE:{name:"Beast Gauge",label:{zh:"兽魂量谱"}}}),Jm=$()({SURGING_TEMPEST:{name:"Surging Tempest",label:{zh:"战场风暴buff"}},INNER_RELEASE:{name:"Inner Release",label:{zh:"原初的解放buff"},maximumStacks:3},INNER_STRENGTH:{name:"Inner Strength",label:{zh:"原初的觉悟buff"}},BURGEONING_FURY:{name:"Burgeoning Fury",label:{zh:"原初的搏动buff"},maximumStacks:3},WRATHFUL:{name:"Wrathful",label:{zh:"原初的怒震预备"}},PRIMAL_REND_READY:{name:"Primal Rend Ready",label:{zh:"蛮荒崩裂预备"}},PRIMAL_RUINATION_READY:{name:"Primal Ruination Ready",label:{zh:"尽毁预备"}},NASCENT_CHAOS:{name:"Nascent Chaos",label:{zh:"原初的混沌buff"}},NASCENT_FLASH:{name:"Nascent Flash",label:{zh:"原初的勇猛buff（给队友）"}},THRILL_OF_BATTLE:{name:"Thrill of Battle",label:{zh:"战栗"}},EQUILIBRIUM:{name:"Equilibrium",label:{zh:"泰然自若的hot"}},SHAKE_IT_OFF:{name:"Shake It Off",label:{zh:"摆脱的盾"}},SHAKE_IT_OFF_OVER_TIME:{name:"Shake It Off Over Time",label:{zh:"摆脱的hot"}},RAW_INTUITION:{name:"Raw Intuition",label:{zh:"原初的直觉buff"}},STEM_THE_TIDE:{name:"Stem the Tide",label:{zh:"原初的血烟（挡伤害buff）"}},STEM_THE_FLOW:{name:"Stem the Flow",label:{zh:"原初的勇猛buff（给队友）"}},BLOODWHETTING:{name:"Bloodwhetting",label:{zh:"原初的血气（吸血buff）"}},VENGEANCE:{name:"Vengeance",label:{zh:"复仇减伤30"}},DAMNATION:{name:"Damnation",label:{zh:"戮罪减伤40"}},PRIMEVAL_IMPULSE:{name:"Primeval Impulse",label:{zh:"讨罪hot"}},HOLMGANG:{name:"Holmgang",label:{zh:"死斗buff"}},DEFIANCE:{name:"Defiance",label:{zh:"盾姿buff"},mayNotBeCanceled:!0}}),bM=$()({STORM_COMBO:{name:"Storm Combo",label:{zh:"单体连击"}},TEMPEST_COMBO:{name:"Tempest Combo",label:{zh:"aoe连击"}}}),yM=$()({NASCENT_CHAOS:{name:"Nascent Chaos",level:72},MASTERING_THE_BEAST:{name:"Mastering the Beast",level:74},ENHANCED_SHAKE_IT_OFF:{name:"Enhanced Shake It Off",level:76},ENHANCED_THRILL_OF_BATTLE:{name:"Enhanced Thrill of Battle",level:78},RAW_INTUITION_MASTERY:{name:"Raw Intuition Mastery",level:82},ENHANCED_NASCENT_FLASH:{name:"Enhanced Nascent Flash",level:82},ENHANCED_EQUILIBRIUM:{name:"Enhanced Equilibrium",level:84},ENHANCED_ONSLAUGHT:{name:"Enhanced Onslaught",level:88},VENGEANCE_MASTERY:{name:"Vengeance Mastery",level:92},ENHANCED_INNER_RELEASE:{name:"Enhanced Inner Release",level:96},ENHANCED_PRIMAL_REND:{name:"Enhanced Primal Rend",level:100}}),vM={...OM,...Jm,...bM},DM=$()({}),MM=$()({}),LM=$()({}),HM=$()({}),xM=$()({}),UM=$()({}),kM={...LM,...HM,...xM},PM=$()({NEVER:{name:"Never"},TINCTURE:{name:"Tincture",label:{zh:"爆发药",ja:"薬"}},SPRINT:{name:"Sprint",label:{zh:"疾跑",ja:"スプリント"}}}),GM=$()({NEVER:{name:"Never"},cd_GCD:{name:"cd_GCD",label:{zh:"GCD"}},cd_TINCTURE:{name:"cd_Tincture"},cd_SPRINT:{name:"cd_Sprint"}}),wM=$()({MANA:{name:"Mana",label:{zh:"MP"}}}),BM=$()({TINCTURE:{name:"Tincture",label:{zh:"爆发药"}},SPRINT:{name:"Sprint",label:{zh:"疾跑"}}}),FM=$()({MOVEMENT:{name:"Movement"},NOT_ANIMATION_LOCKED:{name:"NotAnimationLocked"},NOT_CASTER_TAXED:{name:"NotCasterTaxed"},IN_COMBAT:{name:"InCombat",label:{zh:"战斗中"}},AUTOS_ENGAGED:{name:"Autos Engaged"},STORED_AUTO:{name:"Stored Auto"},PARTY_SIZE:{name:"PartySize",label:{zh:"小队人数"}},NEVER:{name:"Never"}}),jM=$()({NEVER:{name:"Never",level:1}}),zM={...wM,...BM,...FM},YM=$()({LAST_BASTION:{name:"Last Bastion"},LAND_WAKER:{name:"Land Waker",label:{zh:"原初大地"}},DARK_FORCE:{name:"Dark Force"},GUNMETAL_SOUL:{name:"Gunmetal Soul"}}),VM=$()({PULSE_OF_LIFE:{name:"Pulse of Life"},ANGEL_FEATHERS:{name:"Angel Feathers"},ASTRAL_STASIS:{name:"Astral Stasis"},TECHNE_MAKRE:{name:"Techne Makre"}}),KM=$()({FINAL_HEAVEN:{name:"Final Heaven"},DRAGONSONG_DIVE:{name:"Dragonsong Dive"},CHIMATSURI:{name:"Chimatsuri"},DOOM_OF_THE_LIVING:{name:"Doom of the Living"},THE_END:{name:"The End"},WORLD_SWALLOWER:{name:"World-swallower"}}),WM=$()({SAGITTARIUS_ARROW:{name:"Sagittarius Arrow"},SATELLITE_BEAM:{name:"Satellite Beam"},CRIMSON_LOTUS:{name:"Crimson Lotus"}}),qM=$()({METEOR:{name:"Meteor"},TERAFLARE:{name:"Teraflare"},VERMILLION_SCOURGE:{name:"Vermillion Scourge"},CHROMATIC_FANTASY:{name:"Chromatic Fantasy"}}),XM=$()({LAST_BASTION:{name:"Last Bastion"},LAND_WAKER:{name:"Land Waker",label:{zh:"原初大地（战士LB3 buff）"}},DARK_FORCE:{name:"Dark Force"},GUNMETAL_SOUL:{name:"Gunmetal Soul"}}),ZM=$()({cd_LIMIT_BREAK_1:{name:"cd_LIMIT_BREAK_1",label:{zh:"CD：一段LB"}},cd_LIMIT_BREAK_2:{name:"cd_LIMIT_BREAK_2",label:{zh:"CD：二段LB"}},cd_LIMIT_BREAK_3:{name:"cd_LIMIT_BREAK_3",label:{zh:"CD：三段LB"}}}),QM=$()({UNKNOWN:{name:"Unknown"},SHIELD_WALL:{name:"Shield Wall"},STRONGHOLD:{name:"Stronghold"},HEALING_WIND:{name:"Healing Wind"},BREATH_OF_THE_EARTH:{name:"Breath of the Earth"},BRAVER:{name:"Braver"},BLADEDANCE:{name:"Bladedance"},BIGSHOT:{name:"Big Shot"},DESPERADO:{name:"Desperado"},SKYSHARD:{name:"Skyshard"},STARSTORM:{name:"Starstorm"}}),tC=$()({UNKNOWN:{name:"Unknown"},SHIELD_WALL:{name:"Shield Wall",label:{zh:"铜墙铁盾（防护LB1 buff）"}},STRONGHOLD:{name:"Stronghold",label:{zh:"坚守要塞（防护LB2 buff）"}}}),$M={...YM,...VM,...KM,...WM,...qM},il={...QM,...$M},nC={...tC,...XM},JM=$()({ARMS_LENGTH:{name:"Arm's Length",label:{zh:"亲疏自行"}},SECOND_WIND:{name:"Second Wind",label:{zh:"内丹"}},HEAD_GRAZE:{name:"Head Graze",label:{zh:"伤头"}},ESUNA:{name:"Esuna",label:{zh:"康复"}},RESCUE:{name:"Rescue",label:{zh:"营救"}},ADDLE:{name:"Addle",label:{zh:"病毒",ja:"アドル"}},SWIFTCAST:{name:"Swiftcast",label:{zh:"即刻咏唱",ja:"迅速魔"}},LUCID_DREAMING:{name:"Lucid Dreaming",label:{zh:"醒梦",ja:"ルーシッドドリーム"}},SURECAST:{name:"Surecast",label:{zh:"沉稳咏唱",ja:"堅実魔"}},FEINT:{name:"Feint",label:{zh:"牵制"}},BLOODBATH:{name:"Bloodbath",label:{zh:"浴血"}},TRUE_NORTH:{name:"True North",label:{zh:"真北"}},LEG_SWEEP:{name:"Leg Sweep",label:{zh:"扫腿"}},RAMPART:{name:"Rampart",label:{zh:"铁壁"}},REPRISAL:{name:"Reprisal",label:{zh:"雪仇"}},LOW_BLOW:{name:"Low Blow",label:{zh:"下踢"}},INTERJECT:{name:"Interject",label:{zh:"插言"}},PROVOKE:{name:"Provoke",label:{zh:"挑衅"}},SHIRK:{name:"Shirk",label:{zh:"退避"}}}),e1=$()({cd_ADDLE:{name:"cd_Addle"},cd_SWIFTCAST:{name:"cd_Swiftcast"},cd_LUCID_DREAMING:{name:"cd_LucidDreaming"},cd_SURECAST:{name:"cd_Surecast"},cd_SECOND_WIND:{name:"cd_SecondWind"},cd_ARMS_LENGTH:{name:"cd_ArmsLength"},cd_RESCUE:{name:"cd_Rescue"},cd_FEINT:{name:"cd_Feint"},cd_TRUE_NORTH:{name:"cd_TrueNorth"},cd_BLOODBATH:{name:"cd_Bloodbath"},cd_LEG_SWEEP:{name:"cd_LegSweep"},cd_RAMPART:{name:"cd_Rampart"},cd_REPRISAL:{name:"cd_Reprisal"},cd_LOW_BLOW:{name:"cd_LowBlow"},cd_INTERJECT:{name:"cd_Interject"},cd_PROVOKE:{name:"cd_Provoke"},cd_SHIRK:{name:"cd_Shirk"},cd_HEAD_GRAZE:{name:"cd_HeadGraze"}}),t1=$()({ADDLE:{name:"Addle",label:{zh:"昏乱"}},SWIFTCAST:{name:"Swiftcast",label:{zh:"即刻咏唱"}},LUCID_DREAMING:{name:"Lucid Dreaming",label:{zh:"醒梦"}},SURECAST:{name:"Surecast",label:{zh:"沉稳咏唱"}},ARMS_LENGTH:{name:"Arms Length",label:{zh:"亲疏自行"}},FEINT:{name:"Feint",label:{zh:"牵制"}},TRUE_NORTH:{name:"True North",label:{zh:"真北"}},BLOODBATH:{name:"Bloodbath",label:{zh:"浴血"}},RAMPART:{name:"Rampart",label:{zh:"铁壁buff"}},REPRISAL:{name:"Reprisal",label:{zh:"雪仇buff"}}}),n1=$()({REAR_POSITIONAL:{name:"Rear Positional",label:{zh:"身位加成（后）"},mayBeToggled:!0},FLANK_POSITIONAL:{name:"Flank Positional",label:{zh:"身位加成（侧）"},mayBeToggled:!0},AUTOS_ENGAGED:{name:"Autos Engaged",mayBeToggled:!0}}),a1=$()({ENHANCED_SWIFTCAST:{name:"Enhanced Swiftcast",level:94},ENHANCED_ADDLE:{name:"Enhanced Addle",level:98},MAGICK_MASTERY_HEALER:{name:"Magick_Mastery",level:94},ENHANCED_SECOND_WIND:{name:"Enhanced Second Wind",level:94},ENHANCED_FEINT:{name:"Enhanced Feint",level:98},MELEE_MASTERY_TANK:{name:"Melee Mastery",level:84},ENHANCED_RAMPART:{name:"Enhanced Rampart",level:94},MELEE_MASTERY_II_TANK:{name:"Melee Mastery II",level:94},ENHANCED_REPRISAL:{name:"Enhanced Reprisal",level:98}}),aC={...t1,...n1},xa={...PM,...JM,...il,...yD,...CM,...zv,...Zv,...DM,...$D,...fv,...lM,...rD,...Pv,...AD,...KD,...BD,...RM,...Nv,...nD,...Mv,...Sv,...dM,...xD,..._D},zo={...GM,...e1,...ZM,...vD,...NM,...Yv,...Qv,...MM,...JD,...hv,...oM,...cD,...Gv,...mD,...WD,...FD,...TM,...Ov,...aD,...Lv,...gv,...fM,...UD,...ID},ot={...zM,...aC,...nC,...HD,...vM,...Xv,...tD,...kM,...iM,...Tv,...uM,...ED,...jv,...pD,...QD,...VD,...IM,...Dv,...sD,...kv,...Cv,...mM,...wD,...bD},IA={...jM,...a1,...LD,...yM,...qv,...eD,...UM,...aM,...Rv,...cM,...hD,...Fv,...gD,...ZD,...YD,..._M,...vv,...oD,...Uv,...Iv,...AM,...GD,...OD};class nf{static getJob(t){return It[t]}static getAction(t){return xa[t]}static findAction(t){return this.findByName(xa,t)}static findActionKey(t){return this.findKeyByName(xa,t)}static getResource(t){return ot[t]}static findResource(t){return this.findByName(ot,t)}static findResourceKey(t){return this.findKeyByName(ot,t)}static getCooldown(t){return zo[t]}static findCooldown(t){return this.findByName(zo,t)}static findCooldownKey(t){return this.findKeyByName(zo,t)}static findByName(t,a){return Object.values(t).find(l=>l.name===a)}static findKeyByName(t,a){const l=Object.entries(t).find(([s,c])=>c.name===a);if(l)return l[0]}}function _(e){let t=Qo();return t==="zh"&&e.zh?e.zh:t==="ja"&&e.ja?e.ja:e.en}function i1(e,t){{let[a,l,s]=e.split("/");return`20${s}年${a}月${l}日`}}function io(e){const t=nf.getAction(e);return _({en:t.name,...t.label}).toString()}const l1=new Map([[k.LeyLines,"黑魔纹"],[k.Hyperphantasia,"绘灵幻景"],[k.Tincture,"爆发药"],[k.ArcaneCircle,"神秘纹"],[k.ArmysPaeon,"军神的赞美歌歌"],[k.BattleLitany,"战斗连祷"],[k.BattleVoice,"战斗之声"],[k.Brotherhood,"义结金兰"],[k.Card_TheBalance,"太阳神之衡"],[k.Card_TheSpear,"战斗神之枪"],[k.ChainStratagem,"连环计"],[k.Devilment,"进攻之探戈"],[k.Divination,"占卜"],[k.Dokumori,"介毒之术"],[k.Embolden,"鼓励"],[k.MagesBallad,"贤者的叙事谣"],[k.RadiantFinale1,"光明神的最终乐章1"],[k.RadiantFinale2,"光明神的最终乐章2"],[k.RadiantFinale3,"光明神的最终乐章3"],[k.SearingLight,"灼热之光"],[k.StandardFinish,"标准舞步结束"],[k.StarryMuse,"星空构想"],[k.TechnicalFinish,"技巧舞步结束"],[k.WanderersMinuet,"放浪神的小步舞曲"]]),o1=new Map([[k.LeyLines,"黒魔紋"],[k.Tincture,"薬"],[k.ArcaneCircle,"アルケインサークル"],[k.ArmysPaeon,"軍神のパイオン"],[k.BattleLitany,"バトルリタニー"],[k.BattleVoice,"バトルボイス"],[k.Brotherhood,"桃園結義"],[k.Card_TheBalance,"アーゼマの均衡"],[k.Card_TheSpear,"ハルオーネの槍"],[k.ChainStratagem,"連環計"],[k.Devilment,"攻めのタンゴ"],[k.Divination,"ディヴィネーション"],[k.Dokumori,"毒盛の術"],[k.Embolden,"エンボルデン"],[k.MagesBallad,"賢人のバラード"],[k.RadiantFinale1,"光神のフィナーレ1"],[k.RadiantFinale2,"光神のフィナーレ2"],[k.RadiantFinale3,"光神のフィナーレ3"],[k.SearingLight,"シアリングライト"],[k.StandardFinish,"スタンダードフィニッシュ"],[k.StarryMuse,"イマジンスカイ"],[k.TechnicalFinish,"テクニカルフィニッシュ"],[k.WanderersMinuet,"旅神のメヌエット"]]);function iC(e){let t=Qo();return t==="zh"?l1.get(e)??e:t==="ja"?o1.get(e)??e:e}function Zn(e){const t=Qo();if(e in zo){const l=nf.getCooldown(e),s=_({en:l.name,...l.label}).toString();if(t!=="en"&&s===l.name){const c=e.slice(3),d=Object.keys(xa).find(h=>xa[h].name===c||h===c);if(d!==void 0)return"CD："+io(d)}return s}const a=nf.getResource(e);return _({en:a.name,...a.label}).toString()}const t_=new Map([[z.AF3,{en:"AF3",zh:"三层火"}],[z.AF2,{en:"AF2",zh:"二层火"}],[z.AF1,{en:"AF1",zh:"一层火"}],[z.UI3,{en:"UI3",zh:"三层冰"}],[z.UI2,{en:"UI2",zh:"二层冰"}],[z.UI1,{en:"UI1",zh:"一层冰"}],[z.ENO,{en:"enochian",zh:"天语"}],[z.POT,{en:"pot",zh:"爆发药"}],[z.PARTY,{en:"party",zh:"团辅"}],[z.AUTO_CDH,{en:"auto crit/direct hit",zh:"必直暴"}],[z.STARRY,{en:"starry muse",zh:"星空构想"}],[z.EMBOLDEN_M,{en:"embolden",zh:"鼓励"}],[z.MANAFIC,{en:"manafication",zh:"魔元化"}],[z.ACCELERATION,{en:"acceleration",zh:"促进"}],[z.STANDARD_SINGLE,{en:"single standard finish",zh:"单色小舞"}],[z.STANDARD_DOUBLE,{en:"double standard finish",zh:"双色小舞"}],[z.TECHNICAL_SINGLE,{en:"single technical finish",zh:"单色大舞"}],[z.TECHNICAL_DOUBLE,{en:"double technical finish",zh:"双色大舞"}],[z.TECHNICAL_TRIPLE,{en:"triple technical finish",zh:"三色大舞"}],[z.TECHNICAL_QUADRUPLE,{en:"quadruple technical finish",zh:"四色大舞"}],[z.DEVILMENT,{en:"devilment",zh:"探戈"}],[z.OVERHEATED,{en:"overheated",zh:"过热"}],[z.COMBO,{en:"combo",zh:"连击"}],[z.FUGETSU,{en:"fugetsu",zh:"风月"}],[z.AUTO_CRIT,{en:"auto crit",zh:"必暴"}],[z.YATEN,{en:"yaten",zh:"强化夜天"}],[z.POSITIONAL,{en:"positional",zh:"身位"}],[z.ARCANE_CIRCLE,{en:"arcane circle",zh:"神秘环"}],[z.DEATHSDESIGN,{en:"death's design",zh:"死亡烙印"}],[z.ENHANCED_GIBBET_GALLOWS,{en:"enhanced gibbet/gallows",zh:"绞决/缢杀效果提高"}],[z.ENHANCED_REAPING,{en:"enhanced reaping",zh:"虚无/交错收割效果提高"}],[z.IMMORTAL_SACRIFICE,{en:"immortal sacrifice"}],[z.SURGING_TEMPEST,{en:"surging tempest"}],[z.BARRAGE,{en:"barrage"}],[z.RAGING_STRIKES,{en:"raging strikes"}],[z.BATTLE_VOICE,{en:"battle voice"}],[z.RADIANT_FINALE_THREE_CODA,{en:"three coda radiant finale"}],[z.RADIANT_FINALE_TWO_CODA,{en:"two coda radiant finale"}],[z.RADIANT_FINALE_ONE_CODA,{en:"one coda radiant finale"}],[z.WANDERERS_MINUET,{en:"wanderer's minuet"}],[z.MAGES_BALLAD,{en:"mage's ballad"}],[z.ARMYS_PAEON,{en:"army's paeon"}],[z.NO_MERCY,{en:"no mercy"}],[z.SEARING_LIGHT,{en:"searing light"}],[z.SURGING_TEMPEST,{en:"surging tempest",zh:"战场风暴"}],[z.POWER_SURGE,{en:"power surge"}],[z.LANCE_CHARGE,{en:"lance charge"}],[z.ENHANCED_PIERCING_TALON,{en:"enhanced piercing talon"}],[z.LIFE_OF_THE_DRAGON,{en:"life of the dragon"}],[z.LIFE_SURGE,{en:"life surge"}],[z.PET,{en:"pet modifier"}],[z.DIVINE_MIGHT,{en:"divine might"}],[z.REQUIESCAT,{en:"requiescat"}],[z.FIGHT_OR_FLIGHT,{en:"fight or flight"}]]);function n_(e){return console.assert(t_.has(e),`modifier ${e} doesn't have a name!`),_(t_.get(e)??{en:"unknown"})}const a_=new Map([[z.AF3,{en:"AF3",zh:"三层火"}],[z.AF2,{en:"AF2",zh:"二层火"}],[z.AF1,{en:"AF1",zh:"一层火"}],[z.UI3,{en:"UI3",zh:"三层冰"}],[z.UI2,{en:"UI2",zh:"二层冰"}],[z.UI1,{en:"UI1",zh:"一层冰"}],[z.ENO,{en:"ENO",zh:"天语"}],[z.POT,{en:"pot",zh:"爆发药"}],[z.PARTY,{en:"party",zh:"团辅"}],[z.AUTO_CDH,{en:"CDH",zh:"必直暴"}],[z.STARRY,{en:"STARRY",zh:"星空"}],[z.EMBOLDEN_M,{en:"MB",zh:"鼓励"}],[z.MANAFIC,{en:"MF",zh:"魔元化"}],[z.ACCELERATION,{en:"ACC",zh:"促进"}],[z.STANDARD_SINGLE,{en:"SSF",zh:"单色小舞"}],[z.STANDARD_DOUBLE,{en:"DSF",zh:"双色小舞"}],[z.TECHNICAL_SINGLE,{en:"STF",zh:"单色大舞"}],[z.TECHNICAL_DOUBLE,{en:"DTF",zh:"双色大舞"}],[z.TECHNICAL_TRIPLE,{en:"TTF",zh:"三色大舞"}],[z.TECHNICAL_QUADRUPLE,{en:"QTF",zh:"四色大舞"}],[z.DEVILMENT,{en:"DEV",zh:"探戈"}],[z.OVERHEATED,{en:"OVERHEATED",zh:"过热"}],[z.COMBO,{en:"CMB",zh:"连击"}],[z.FUGETSU,{en:"FGS",zh:"风月"}],[z.AUTO_CRIT,{en:"CRIT",zh:"必暴"}],[z.YATEN,{en:"ENH",zh:"强化夜天"}],[z.POSITIONAL,{en:"PS",zh:"身位"}],[z.ARCANE_CIRCLE,{en:"AC",zh:"神秘环"}],[z.DEATHSDESIGN,{en:"DD",zh:"死亡烙印"}],[z.ENHANCED_GIBBET_GALLOWS,{en:"E. GIB/GAL",zh:"绞决/缢杀↑"}],[z.ENHANCED_REAPING,{en:"E. REAPING",zh:"虚无/交错收割↑"}],[z.IMMORTAL_SACRIFICE,{en:"IMMORTAL SAC",zh:"死亡祭品"}],[z.SURGING_TEMPEST,{en:"SURGING"}],[z.BARRAGE,{en:"BRG"}],[z.RAGING_STRIKES,{en:"RS"}],[z.BATTLE_VOICE,{en:"BV"}],[z.RADIANT_FINALE_THREE_CODA,{en:"RF3"}],[z.RADIANT_FINALE_TWO_CODA,{en:"RF2"}],[z.RADIANT_FINALE_ONE_CODA,{en:"RF1"}],[z.WANDERERS_MINUET,{en:"WM"}],[z.MAGES_BALLAD,{en:"MB"}],[z.ARMYS_PAEON,{en:"AP"}],[z.NO_MERCY,{en:"NM"}],[z.SEARING_LIGHT,{en:"SL"}],[z.SURGING_TEMPEST,{en:"SURGING",zh:"战场风暴"}],[z.POWER_SURGE,{en:"PWS"}],[z.LANCE_CHARGE,{en:"LC"}],[z.LIFE_OF_THE_DRAGON,{en:"LIFE"}],[z.ENHANCED_PIERCING_TALON,{en:"ENH"}],[z.LIFE_SURGE,{en:"LS"}],[z.BATTLE_LITANY,{en:"BL"}],[z.DIVINE_MIGHT,{en:"DM"}],[z.REQUIESCAT,{en:"REQ"}],[z.FIGHT_OR_FLIGHT,{en:"FOF"}],[z.PET,{en:"PET"}]]);function s1(e){return console.assert(a_.has(e),`modifier ${e} doesn't have a tag name!`),_(a_.get(e)??{en:"unknown"})}let Qo=()=>"en",im=e=>{};function i_(e){let t="English";e.lang==="zh"&&(t="中文"),e.lang==="ja"&&(t="日本語");let a=Yt();return u.jsx("div",{style:{display:"inline-block",cursor:"pointer",verticalAlign:"middle",textDecoration:e.lang===Qo()?"none":"underline",borderTop:e.lang===Qo()?"1px solid "+a.text:"none"},onClick:()=>{im(e.lang)},children:t})}class r1 extends ft.Component{constructor(a){super(a);F(this,"state");let l="en",s=dn("language");(s==="zh"||s==="ja")&&(l=s),this.state={lang:l}}componentDidMount(){Qo=()=>this.state.lang,im=a=>{this.setState({lang:a}),Qt("language",a)}}componentDidUpdate(a,l,s){l.lang!==this.state.lang&&D.updateAllDisplay()}componentWillUnmount(){Qo=()=>"en",im=a=>{}}render(){return u.jsxs("div",{style:{display:"inline-block",position:"absolute",right:68},children:[u.jsx("span",{style:{display:"inline-block",fontSize:17,position:"relative",marginRight:2},children:u.jsx(av,{})}),u.jsxs("div",{style:{display:"inline-block",fontSize:14,position:"relative",top:-4},children:[u.jsx(i_,{lang:"en"}),"|",u.jsx(i_,{lang:"zh"})]})]})}}const lC=$()({UNIMPLEMENTED:{},OUTDATED:{label:{en:"Outdated",zh:"待更新"},warningContent:{en:"WARNING: This job recently had significant changes, and may not have been fully updated to reflect them. Exported plans may not load correctly following these changes, so be cautious about relying on them until the job has been fully updated.",zh:"警告：此职业最近经历的技改还未被完整实现到排轴器中。当前排轴器的此职业可能有bug，或在近期经历更新，所以暂时不要太依赖txt，记得勤在别处保存排轴进度。"}},TESTING:{label:{en:"Testing",zh:"测试中"},warningContent:{en:"WARNING: This job was recently added to XIV in the Shell and is still being tested. There may be bugs or changes in the near future, so make sure to frequently export and save timelines for this job to make sure you don't lose your work.",zh:"警告：此职业刚被实现没多久，可能还不是很稳定，目前暂时不要太依赖txt文件，记得勤在别处保存进度。"}},LIVE:{}});$()({TANK:{label:_({en:"Tank"})},HEALER:{label:_({en:"Healer"})},MELEE:{label:_({en:"Melee"})},RANGED:{label:_({en:"Ranged"})},CASTER:{label:_({en:"Caster"})}});const oC=$()({PLD:{role:"TANK",implementationLevel:"TESTING",usesMp:!0,limitBreak:"LAST_BASTION",limitBreakBuff:"LAST_BASTION"},WAR:{role:"TANK",implementationLevel:"LIVE",limitBreak:"LAND_WAKER",limitBreakBuff:"LAND_WAKER"},DRK:{role:"TANK",implementationLevel:"UNIMPLEMENTED",usesMp:!0,limitBreak:"DARK_FORCE",limitBreakBuff:"DARK_FORCE"},GNB:{role:"TANK",implementationLevel:"LIVE",limitBreak:"GUNMETAL_SOUL",limitBreakBuff:"GUNMETAL_SOUL"}}),eR=$()({WHM:{role:"HEALER",implementationLevel:"UNIMPLEMENTED",usesMp:!0,limitBreak:"PULSE_OF_LIFE"},SCH:{role:"HEALER",implementationLevel:"UNIMPLEMENTED",usesMp:!0,limitBreak:"ANGEL_FEATHERS"},AST:{role:"HEALER",implementationLevel:"UNIMPLEMENTED",usesMp:!0,limitBreak:"ASTRAL_STASIS"},SGE:{role:"HEALER",implementationLevel:"TESTING",usesMp:!0,limitBreak:"TECHNE_MAKRE"}}),sC=$()({MNK:{role:"MELEE",implementationLevel:"UNIMPLEMENTED",limitBreak:"FINAL_HEAVEN"},DRG:{role:"MELEE",implementationLevel:"LIVE",limitBreak:"DRAGONSONG_DIVE"},NIN:{role:"MELEE",implementationLevel:"UNIMPLEMENTED",limitBreak:"CHIMATSURI"},SAM:{role:"MELEE",implementationLevel:"LIVE",limitBreak:"DOOM_OF_THE_LIVING"},RPR:{role:"MELEE",implementationLevel:"LIVE",limitBreak:"THE_END"},VPR:{role:"MELEE",implementationLevel:"UNIMPLEMENTED",limitBreak:"WORLD_SWALLOWER"}}),rC=$()({BRD:{role:"RANGED",implementationLevel:"LIVE",limitBreak:"SAGITTARIUS_ARROW"},MCH:{role:"RANGED",implementationLevel:"LIVE",limitBreak:"SATELLITE_BEAM"},DNC:{role:"RANGED",implementationLevel:"LIVE",limitBreak:"CRIMSON_LOTUS"}}),cC=$()({BLM:{role:"CASTER",implementationLevel:"LIVE",usesMp:!0,limitBreak:"METEOR"},SMN:{role:"CASTER",implementationLevel:"LIVE",usesMp:!0,limitBreak:"TERAFLARE"},RDM:{role:"CASTER",implementationLevel:"LIVE",usesMp:!0,limitBreak:"VERMILLION_SCOURGE"},PCT:{role:"CASTER",implementationLevel:"LIVE",usesMp:!0,limitBreak:"CHROMATIC_FANTASY"}}),It={...oC,...eR,...sC,...rC,...cC},$l=Object.keys(It),ra=Object.keys(oC),Ga=Object.keys(eR),Qn=Object.keys(sC),lo=Object.keys(rC),wa=Object.keys(cC);var ia=(e=>(e[e.ManaGain=0]="ManaGain",e[e.MpTick=1]="MpTick",e[e.LucidTick=2]="LucidTick",e[e.MeditateTick=3]="MeditateTick",e[e.AutoTick=4]="AutoTick",e))(ia||{}),Po;class Ge{constructor(t,a,l){F(this,"name");ke(this,Po);F(this,"timeTillEvent");F(this,"delay");F(this,"effectFn");F(this,"canceled");this.name=t,ve(this,Po,[]),this.timeTillEvent=a,this.delay=a,this.effectFn=l,this.canceled=!1}hasTag(t){for(let a=0;a<ee(this,Po).length;a++)if(t===ee(this,Po)[a])return!0;return!1}addTag(t){this.hasTag(t)||ee(this,Po).push(t)}}Po=new WeakMap;class uC{constructor(t,a){F(this,"maxValue");F(this,"currentValue");this.maxValue=t,this.currentValue=a}availableAmount(){return this.currentValue}consume(t){this.currentValue<t-pn.epsilon&&console.warn(`invalid resource consumption: ${this.type}, ${this.currentValue} - ${t}`),this.currentValue=Math.max(this.currentValue-t,0)}gain(t){this.currentValue=Math.min(this.currentValue+t,this.maxValue)}overrideCurrentValue(t){(t<0||t>this.maxValue)&&console.warn(`invalid resource value override: ${this.type}, ${t} should be in [0, ${this.maxValue}]`),this.currentValue=t}}var ou;class ei extends uC{constructor(a,l,s){super(l,s);F(this,"type");F(this,"enabled");F(this,"pendingChange");ke(this,ou);this.type=a,this.enabled=!0}available(a){return this.availableAmount()+pn.epsilon>=a}availableAmountIncludingDisabled(){return this.currentValue}availableAmount(){return this.enabled?super.availableAmount():0}gainWrapping(a){this.currentValue=(this.currentValue+a)%(this.maxValue+1)}overrideTimer(a,l){this.pendingChange?(a.addEvent(new Ge("override "+this.pendingChange.name+" timer: "+l,0,()=>{this.pendingChange&&(this.pendingChange.timeTillEvent=l)})),this.pendingChange.timeTillEvent=l):console.error(`Failed to override non-pending resource timer for resource: ${this.type}`)}removeTimer(){this.pendingChange&&(this.pendingChange.canceled=!0,this.pendingChange=void 0)}getLastExpirationTime(){return ee(this,ou)}consume(a){super.consume(a),this.currentValue===0&&ve(this,ou,D.game.getDisplayTime())}}ou=new WeakMap;var cr,jl,di;class Ke extends uC{constructor(a,l,s,c){super(s,c);F(this,"type");ke(this,cr);ke(this,jl);ke(this,di);this.type=a,ve(this,cr,l),ve(this,jl,l),ve(this,di,0)}currentStackCd(){return ee(this,jl)}maxStacks(){return this.maxValue}useStack(){this.stacksAvailable()===this.maxStacks()&&ve(this,di,ee(this,jl)),super.consume(1)}useStackWithRecast(a){console.assert(this.maxStacks()===1,"class CoolDown assumes special recasts are only available for skills with at most 1 stack"),ve(this,jl,a),this.useStack()}restore(a){for(;a>0&&super.availableAmount()<this.maxStacks();){let l=Math.min(ee(this,di),a);ve(this,di,ee(this,di)-l),ee(this,di)<pn.epsilon&&(super.gain(1),ve(this,jl,ee(this,cr)),this.stacksAvailable()<this.maxStacks()&&ve(this,di,ee(this,di)+ee(this,cr))),a-=l}}timeTillNextStackAvailable(){return ee(this,di)}overrideTimeTillNextStack(a){ve(this,di,a)}stacksAvailable(){return super.availableAmount()}}cr=new WeakMap,jl=new WeakMap,di=new WeakMap;var zl;class c1{constructor(t){F(this,"game");ke(this,zl);this.game=t,ve(this,zl,new Map)}forEach(t){ee(this,zl).forEach(t)}get(t){let a=ee(this,zl).get(t);return a||(console.assert(!1,`no cooldown for resource ${t}`),new Ke("NEVER",0,0,0))}set(t){ee(this,zl).set(t.type,t)}tick(t){for(const a of ee(this,zl).values())a.restore(t)}timeTillNextStackAvailable(t){return this.get(t).timeTillNextStackAvailable()}timeTillAnyStackAvailable(t){let a=this.get(t);return a.stacksAvailable()>0?0:a.timeTillNextStackAvailable()}}zl=new WeakMap;var ur;class u1{constructor(t){F(this,"game");ke(this,ur);this.game=t,ve(this,ur,new Map)}get(t){let a=ee(this,ur).get(t);return a||(console.error(`could not find resource ${t}`),new ei("NEVER",0,0))}set(t){ee(this,ur).set(t.type,t)}timeTillReady(t){let a=this.get(t);return a.pendingChange?a.pendingChange.timeTillEvent:0}addResourceEvent(t){let a=this.get(t.rscType),l=new Ge(t.name,t.delay,()=>{a.pendingChange=void 0,t.fnOnRsc(a)});a.pendingChange=l,t.tags&&t.tags.forEach(s=>{l.addTag(s)}),this.game.addEvent(l)}takeResourceLock(t,a){this.get(t).consume(1),this.addResourceEvent({rscType:t,name:"[resource ready] "+t,delay:a,fnOnRsc:l=>{l.gain(1)}})}}ur=new WeakMap;const tR=new Map;function Pt(e,t){const a=tR.get(e);return a.has(t)||console.error(`no resource info found for ${t}`),a.get(t)}function ll(e){return tR.get(e)}function tt(e,t,a,l){ll(e).set(t,{isCoolDown:!1,defaultValue:l.default??0,maxValue:a,maxTimeout:l.timeout??-1,warningOnTimeout:l.warningOnTimeout})}$l.forEach(e=>{tR.set(e,new Map([["cd_GCD",{isCoolDown:!0,maxStacks:1,cdPerStack:2.5}]])),tt(e,"IN_COMBAT",1,{default:0}),tt(e,"MANA",1e4,{default:1e4}),tt(e,"TINCTURE",1,{timeout:30}),tt(e,"SPRINT",1,{timeout:10}),tt(e,"PARTY_SIZE",8,{default:8}),tt(e,"AUTOS_ENGAGED",1,{default:0}),tt(e,"STORED_AUTO",1,{default:0})});Qn.forEach(e=>{tt(e,"REAR_POSITIONAL",1,{default:1}),tt(e,"FLANK_POSITIONAL",1,{default:1})});function Zc(e,t,a,l=1){ll(e).set(t,{isCoolDown:!0,cdPerStack:a,maxStacks:l})}class nR{constructor(t){F(this,"type");F(this,"timeTillFullOrDrop");F(this,"stacks");F(this,"effectOrTimerEnabled");this.type=t.type,this.timeTillFullOrDrop=t.timeTillFullOrDrop,this.stacks=t.stacks,this.effectOrTimerEnabled=t.effectOrTimerEnabled}equals(t){return this.type===t.type&&this.timeTillFullOrDrop===t.timeTillFullOrDrop&&this.stacks===t.stacks&&this.effectOrTimerEnabled===t.effectOrTimerEnabled}static fromGameState(t){let a=[];return t.cooldowns.forEach((l,s)=>{l.availableAmount(),a.push(new nR({type:s,timeTillFullOrDrop:l.maxValue-l.availableAmount(),stacks:0,effectOrTimerEnabled:!0}))}),a}applyTo(t){let a=ll(t.job).get(this.type);if(!a){console.assert(!1,`can't apply override ${this.type} to job ${t.job}`);return}if(a.isCoolDown){let l=t.cooldowns.get(this.type),s=l.maxStacks()*l.currentStackCd()-this.timeTillFullOrDrop,c=Math.floor((s+pn.epsilon)/l.currentStackCd()),d=this.timeTillFullOrDrop%l.currentStackCd();l.overrideCurrentValue(c),l.overrideTimeTillNextStack(d)}else{let l=t.resources.get(this.type),s=c=>{l.removeTimer(),t.resources.addResourceEvent({rscType:l.type,name:"drop "+l.type,delay:c,fnOnRsc:d=>{l.type==="ENOCHIAN"?t.loseEnochian():d.consume(d.availableAmount())}})};if(l.type==="LEY_LINES")l.consume(l.availableAmount()),l.gain(1),s(this.timeTillFullOrDrop),l.enabled=this.effectOrTimerEnabled;else if(l.type==="POLYGLOT"){let c=this.stacks;l.consume(l.availableAmount()),l.gain(c);let d=this.timeTillFullOrDrop;d>0&&l.overrideTimer(t,d)}else{let c=this.stacks;l.consume(l.availableAmount()),l.gain(c);let d=this.timeTillFullOrDrop;c>0&&a.maxTimeout>=0&&s(d)}}}serialized(){return{type:this.type,timeTillFullOrDrop:this.timeTillFullOrDrop,stacks:this.stacks,effectOrTimerEnabled:this.effectOrTimerEnabled}}}const jn=.8,li=.01;function je(e,t){}function ut(e,...t){return(a,l)=>{e(a,l);for(const s of t)s(a,l)}}function xf(e,...t){return a=>e(a)&&t.every(l=>l(a))}const $o=new Map,dC=new Map,fC=new Map;function hC(e){return e==="Lightning Shock"&&(e="Lightning Shot"),fC.get(e.toLowerCase())}function d1(e){return e in ot?e:nf.findResourceKey(e)}function Yo(e,t){return $o.get(e).get(t)}function EC(e){return dC.get(e)}function f1(e,t){return $o.get(e).has(t)}function Uf(e,t,a){$o.get(e).set(t,a),fC.set(xa[t].name.toLowerCase(),t),dC.set(t,a.assetPath)}$l.forEach(e=>$o.set(e,new Map));function Ha(e,t){return e===void 0?a=>t||0:typeof e=="number"?a=>e:e}function h1(e){return console.assert(e.length>0,`invalid trait potency array: ${e}`),t=>{let a;const l=t.config.level;for(const[s,c]of e)t.hasTraitUnlocked(s)&&(a=c);return console.assert(a!==void 0,`no applicable potency at level ${l} found in array ${e}`),a||0}}function Xe(e,t){return(Array.isArray(t)?h1(t):Ha(t,0))(e)}function aR(e,t){const a=xa[t].name;return`${e}/${a.replace(":","")}.png`}function oo(e,t,a,l){Array.isArray(e)||(e=[e]);const s=ut((h,E)=>E.applicationTime=h.time,l.onApplication??je),c=ut(h=>h.maybeCancelChanneledSkills(t),l.onExecute??je),d={kind:"spell",name:t,assetPath:l.assetPath??(e.length===1?aR(e[0],t):"General/Missing.png"),unlockLevel:a,autoUpgrade:l.autoUpgrade,autoDowngrade:l.autoDowngrade,cdName:"cd_GCD",secondaryCd:l.secondaryCooldown,aspect:l.aspect??pe.Other,replaceIf:l.replaceIf??[],startOnHotbar:l.startOnHotbar??!0,highlightIf:l.highlightIf??(h=>!1),castTimeFn:Ha(l.castTime,0),recastTimeFn:Ha(l.recastTime,2.5),animationLockFn:h=>Ha(l.animationLock,h.config.animationLock)(h),manaCostFn:Ha(l.manaCost,0),potencyFn:h=>Xe(h,l.potency),jobPotencyModifiers:l.jobPotencyModifiers??(h=>[]),drawsAggro:l.drawsAggro??!1,falloff:l.falloff,healingPotencyFn:h=>Xe(h,l.healingPotency),jobHealingPotencyModifiers:l.jobHealingPotencyModifiers??(h=>[]),aoeHeal:l.aoeHeal??!1,validateAttempt:l.validateAttempt??(h=>!0),isInstantFn:l.isInstantFn??(h=>!1),onExecute:c,onConfirm:l.onConfirm??je,onApplication:s,applicationDelay:l.applicationDelay??0,startsAuto:l.startsAuto??!1};if(e.forEach(h=>Uf(h,d.name,d)),l.secondaryCooldown!==void 0){const{cdName:h,cooldown:E,maxCharges:A}=l.secondaryCooldown;e.forEach(R=>Zc(R,h,E,A))}return d}function Mi(e,t,a,l){Array.isArray(e)||(e=[e]);const s=ut((h,E)=>E.applicationTime=h.time,l.onApplication??je),c=ut(h=>h.maybeCancelChanneledSkills(t),l.onExecute??je),d={kind:"weaponskill",name:t,assetPath:l.assetPath??(e.length===1?aR(e[0],t):"General/Missing.png"),unlockLevel:a,autoUpgrade:l.autoUpgrade,autoDowngrade:l.autoDowngrade,cdName:"cd_GCD",secondaryCd:l.secondaryCooldown,aspect:l.aspect??pe.Other,replaceIf:l.replaceIf??[],startOnHotbar:l.startOnHotbar??!0,highlightIf:l.highlightIf??(h=>!1),castTimeFn:Ha(l.castTime,0),recastTimeFn:Ha(l.recastTime,2.5),animationLockFn:h=>Ha(l.animationLock,h.config.animationLock)(h),manaCostFn:Ha(l.manaCost,0),potencyFn:h=>Xe(h,l.potency),jobPotencyModifiers:l.jobPotencyModifiers??(h=>[]),drawsAggro:l.drawsAggro??!1,falloff:l.falloff,healingPotencyFn:h=>Xe(h,l.healingPotency),jobHealingPotencyModifiers:l.jobHealingPotencyModifiers??(h=>[]),aoeHeal:l.aoeHeal??!1,validateAttempt:l.validateAttempt??(h=>!0),isInstantFn:l.isInstantFn??(h=>!0),onExecute:c,onConfirm:l.onConfirm??je,onApplication:s,applicationDelay:l.applicationDelay??0,startsAuto:l.startsAuto??!0};if(e.forEach(h=>Uf(h,d.name,d)),l.secondaryCooldown!==void 0){const{cdName:h,cooldown:E,maxCharges:A}=l.secondaryCooldown;e.forEach(R=>Zc(R,h,E,A))}return d}function Nt(e,t,a,l,s){Array.isArray(e)||(e=[e]);const c=ut((A,R)=>R.applicationTime=A.time,s.onApplication??je),d=ut(A=>A.maybeCancelChanneledSkills(t),s.onExecute??je),h=xf(A=>s.requiresCombat?A.isInCombat():!0,s.validateAttempt??(A=>!0)),E={kind:"ability",name:t,assetPath:s.assetPath??(e.length===1?aR(e[0],t):"General/Missing.png"),requiresCombat:s.requiresCombat,unlockLevel:a,autoUpgrade:s.autoUpgrade,autoDowngrade:s.autoDowngrade,cdName:l,secondaryCd:s.secondaryCooldown,aspect:s.aspect??pe.Other,replaceIf:s.replaceIf??[],startOnHotbar:s.startOnHotbar??!0,highlightIf:s.highlightIf??(A=>!1),animationLockFn:A=>Ha(s.animationLock,A.config.animationLock)(A),manaCostFn:A=>0,potencyFn:A=>Xe(A,s.potency),jobPotencyModifiers:s.jobPotencyModifiers??(A=>[]),drawsAggro:s.drawsAggro??!1,falloff:s.falloff,healingPotencyFn:A=>Xe(A,s.healingPotency),jobHealingPotencyModifiers:s.jobHealingPotencyModifiers??(A=>[]),aoeHeal:s.aoeHeal??!1,applicationDelay:s.applicationDelay??0,validateAttempt:h,onExecute:d,onConfirm:s.onConfirm??je,onApplication:c,startsAuto:s.startsAuto??!1};if(e.forEach(A=>Uf(A,E.name,E)),s.cooldown!==void 0&&e.forEach(A=>Zc(A,l,s.cooldown,s.maxCharges??1)),s.secondaryCooldown!==void 0){const{cdName:A,cooldown:R,maxCharges:T}=s.secondaryCooldown;e.forEach(S=>Zc(S,A,R,T))}return E}function ze(e,t,a,l,s){const c=ut((d,h)=>{const E=d.resources.get(s.rscType),A=s.duration??Pt(d.job,s.rscType).maxTimeout,R=typeof A=="number"?T=>A:A;E.gain(E.maxValue),d.enqueueResourceDrop(s.rscType,R(d))},(s==null?void 0:s.onApplication)??je);return Nt(e,t,a,l,{...s,onApplication:c})}function ca(e,t,a,l){Array.isArray(e)||(e=[e]);const s="Limit Break "+l.tier,c=ut(h=>h.maybeCancelChanneledSkills(t),l.onExecute??je),d={kind:"limitbreak",name:t,animationLockFn:h=>l.animationLock,assetPath:`General/${s}.png`,unlockLevel:1,autoUpgrade:void 0,autoDowngrade:void 0,cdName:a,secondaryCd:void 0,aspect:pe.Other,replaceIf:[],startOnHotbar:!0,castTimeFn:Ha(l.castTime,0),highlightIf:h=>!1,manaCostFn:h=>0,potencyFn:Ha(l.potency,0),jobPotencyModifiers:h=>[],healingPotencyFn:Ha(l.healingPotency,0),jobHealingPotencyModifiers:h=>[],aoeHeal:!1,drawsAggro:!1,applicationDelay:l.applicationDelay??0,validateAttempt:h=>!0,onExecute:c,onConfirm:l.onConfirm??je,onApplication:l.onApplication??je,startsAuto:!1};return e.forEach(h=>Uf(h,d.name,d)),e.forEach(h=>Zc(h,a,(l.castTime??0)+l.animationLock,1)),d}const E1=Nt($l,"NEVER",1,"NEVER",{validateAttempt:e=>!1});class A1{constructor(t){F(this,"job");this.job=t.job}get(t){let a=$o.get(this.job).get(t);return a||(console.error(`could not find skill with key: ${t}`),E1)}}function pr(e,t,a){let l=Yo(e,t);for(;l.autoUpgrade&&JI(l.autoUpgrade.trait,a);)l=Yo(e,pr(e,l.autoUpgrade.otherSkill,a));for(;l.autoDowngrade&&a<l.unlockLevel;)l=Yo(e,pr(e,l.autoDowngrade.otherSkill,a));return l.name}function AC(e,t){const a=Yo(t.job,e);for(const l of a.replaceIf){l.newSkill===e&&console.error(`Skill ${e} tried to replace itself with the same skill`);const s=Yo(t.job,l.newSkill);if(!s)throw new Error("couldn't find skill info for "+l.newSkill);if(t.config.level>=s.unlockLevel&&l.condition(t))return pr(t.job,l.newSkill,t.config.level)}return pr(t.job,a.name,t.config.level)}var dr;class m1{constructor(t,a){ke(this,dr);ve(this,dr,[]),console.assert($o.has(t),`No skill map found for job: ${t}`);for(const l of $o.get(t).values())l.name!=="NEVER"&&a>=l.unlockLevel&&l.autoDowngrade===void 0&&l.startOnHotbar&&ee(this,dr).push(pr(t,l.name,a))}getCurrentSkillNames(t){return ee(this,dr).map(a=>AC(a,t))}}dr=new WeakMap;class rn{constructor(t,a,l,s,c,d,h){F(this,"name");F(this,"duration");F(this,"color");F(this,"damageFactor");F(this,"critBonus");F(this,"dhBonus");F(this,"job");this.name=t,this.duration=l,this.color=a,this.damageFactor=s,this.critBonus=c,this.dhBonus=d,this.job=h}}const iR=[new rn(k.ArcaneCircle,st.Pink,20,1.03,0,0,"RPR"),new rn(k.ArmysPaeon,st.Yellow,45,1,0,.03,"BRD"),new rn(k.BattleLitany,st.Blue,20,1,.1,0,"DRG"),new rn(k.BattleVoice,st.Orange,20,1,0,.2,"BRD"),new rn(k.Brotherhood,st.Orange,20,1.05,0,0,"MNK"),new rn(k.Card_TheBalance,st.Red,15,1.03,0,0,"AST"),new rn(k.Card_TheSpear,st.Blue,15,1.06,0,0,"AST"),new rn(k.ChainStratagem,st.Grey,20,1,.1,0,"SCH"),new rn(k.Devilment,st.Green,20,1,.2,.2,"DNC"),new rn(k.Divination,st.Yellow,20,1.06,0,0,"AST"),new rn(k.Dokumori,st.Purple,20,1.05,0,0,"NIN"),new rn(k.Embolden,st.Grey,20,1.05,0,0,"RDM"),new rn(k.MagesBallad,st.Purple,45,1.01,0,0,"BRD"),new rn(k.RadiantFinale1,st.Purple,20,1.02,0,0,"BRD"),new rn(k.RadiantFinale2,st.Purple,20,1.04,0,0,"BRD"),new rn(k.RadiantFinale3,st.Purple,20,1.06,0,0,"BRD"),new rn(k.SearingLight,st.Blue,20,1.05,0,0,"SMN"),new rn(k.StandardFinish,st.Yellow,60,1.05,0,0,"DNC"),new rn(k.StarryMuse,st.Purple,20.5,1.05,0,0,"PCT"),new rn(k.TechnicalFinish,st.Blue,20,1.05,0,0,"DNC"),new rn(k.WanderersMinuet,st.Green,45,1,.02,0,"BRD")],mC=new Map;iR.forEach(e=>{mC.set(e.name,e)});let af=class{constructor(t){F(this,"name");F(this,"info");this.name=t;let a=mC.get(t);a||(a=iR[0],console.error("Buff info not found!")),this.info=a}};const R1={job:"BLM",shellVersion:Mf.version,level:kt.lvl100,spellSpeed:1532,skillSpeed:420,criticalHit:420,directHit:420,determination:440,piety:440,countdown:5,randomSeed:"sup",fps:60,gcdSkillCorrection:0,animationLock:.7,timeTillFirstManaTick:1.2,procMode:jt.Never,initialResourceOverrides:[]};kt.lvl100,jt.Never;const $i=R1;class Wl{constructor(t){F(this,"job");F(this,"shellVersion",Mf.version);F(this,"level");F(this,"spellSpeed");F(this,"skillSpeed");F(this,"criticalHit");F(this,"directHit");F(this,"determination");F(this,"piety");F(this,"countdown");F(this,"randomSeed");F(this,"fps");F(this,"gcdSkillCorrection");F(this,"animationLock");F(this,"timeTillFirstManaTick");F(this,"procMode");F(this,"initialResourceOverrides");F(this,"legacy_casterTax");this.job=t.job,this.shellVersion=t.shellVersion,this.level=t.level??$i.level,this.spellSpeed=t.spellSpeed,this.skillSpeed=t.skillSpeed??$i.skillSpeed,this.criticalHit=t.criticalHit??$i.criticalHit,this.directHit=t.directHit??$i.directHit,this.determination=t.determination??$i.determination,this.piety=t.piety??$i.piety,this.countdown=t.countdown,this.randomSeed=t.randomSeed,this.fps=t.fps,this.gcdSkillCorrection=t.gcdSkillCorrection,this.animationLock=t.animationLock,this.timeTillFirstManaTick=t.timeTillFirstManaTick,this.procMode=t.procMode,this.initialResourceOverrides=t.initialResourceOverrides.map(a=>{if(a.effectOrTimerEnabled===void 0&&(a.enabled===void 0?a.effectOrTimerEnabled=!0:a.effectOrTimerEnabled=a.enabled),!(a.type in ot||a.type in zo))if(a.type.toString()==="AstralFire")a.type="ASTRAL_FIRE";else if(a.type.toString()==="UmbralIce")a.type="UMBRAL_ICE";else if(a.type.toString()==="UmbralHeart")a.type="UMBRAL_HEART";else{let l=Object.keys(ot).find(s=>ot[s].name===a.type);l||(l=Object.keys(zo).find(s=>zo[s].name===a.type)),l&&(a.type=l)}return new nR(a)}),this.legacy_casterTax=(t==null?void 0:t.casterTax)??0}adjustedOvertimePotency(t,a){return ht.overtimePotency(this.level,a==="sks"?this.skillSpeed:this.spellSpeed,t)}adjustedGCD(t=2.5,a){return this.shellVersion>=Kl.AllaganGcdFormula?ht.preTaxGcd(this.level,this.spellSpeed,t,a):ht.preTaxGcdLegacy(this.level,this.spellSpeed,t,a)}adjustedSksGCD(t=2.5,a){return this.shellVersion>=Kl.AllaganGcdFormula?ht.preTaxGcd(this.level,this.skillSpeed,t,a):ht.preTaxGcdLegacy(this.level,this.skillSpeed,t,a)}adjustedCastTime(t,a){return ht.preTaxCastTime(this.level,this.spellSpeed,t,a)}adjustedSksCastTime(t,a){return ht.preTaxCastTime(this.level,this.skillSpeed,t,a)}getAfterTaxGCD(t){return this.shellVersion<Kl.FpsTax?t:ht.afterFpsTax(this.fps,t)+this.gcdSkillCorrection}getAfterTaxCastTime(t){return this.shellVersion<Kl.FpsTax?this.legacy_casterTax+t:ht.afterFpsTax(this.fps,t)+ht.afterFpsTax(this.fps,jI)+this.gcdSkillCorrection}static getSlidecastWindow(t){return .5}serialized(){return{job:this.job,shellVersion:this.shellVersion,level:this.level,spellSpeed:this.spellSpeed,skillSpeed:this.skillSpeed,criticalHit:this.criticalHit,directHit:this.directHit,determination:this.determination,piety:this.piety,countdown:this.countdown,randomSeed:this.randomSeed,casterTax:this.legacy_casterTax,fps:this.fps,gcdSkillCorrection:this.gcdSkillCorrection,animationLock:this.animationLock,timeTillFirstManaTick:this.timeTillFirstManaTick,procMode:this.procMode,initialResourceOverrides:this.initialResourceOverrides.map(t=>t.serialized())}}}var CA={exports:{}},NA,l_;function T1(){if(l_)return NA;l_=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return NA=e,NA}var OA,o_;function S1(){if(o_)return OA;o_=1;var e=T1();function t(){}function a(){}return a.resetWarningCache=t,OA=function(){function l(d,h,E,A,R,T){if(T!==e){var S=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw S.name="Invariant Violation",S}}l.isRequired=l;function s(){return l}var c={array:l,bigint:l,bool:l,func:l,number:l,object:l,string:l,symbol:l,any:l,arrayOf:s,element:l,elementType:l,instanceOf:s,node:l,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:a,resetWarningCache:t};return c.PropTypes=c,c},OA}var s_;function g1(){return s_||(s_=1,CA.exports=S1()()),CA.exports}var p1=g1();const bA=Gm(p1),RC=N.createContext(void 0);function fu(){const e=N.useContext(RC);if(e===void 0)throw new Error("Base UI: TooltipRootContext is missing. Tooltip parts must be placed within <Tooltip.Root>.");return e}var hu=wI();function kf(){return typeof window<"u"}function so(e){return TC(e)?(e.nodeName||"").toLowerCase():"#document"}function oa(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Li(e){var t;return(t=(TC(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function TC(e){return kf()?e instanceof Node||e instanceof oa(e).Node:!1}function Dt(e){return kf()?e instanceof Element||e instanceof oa(e).Element:!1}function En(e){return kf()?e instanceof HTMLElement||e instanceof oa(e).HTMLElement:!1}function lf(e){return!kf()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof oa(e).ShadowRoot}function Eu(e){const{overflow:t,overflowX:a,overflowY:l,display:s}=ai(e);return/auto|scroll|overlay|hidden|clip/.test(t+l+a)&&!["inline","contents"].includes(s)}function _1(e){return["table","td","th"].includes(so(e))}function Pf(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function lR(e){const t=Gf(),a=Dt(e)?ai(e):e;return["transform","translate","scale","rotate","perspective"].some(l=>a[l]?a[l]!=="none":!1)||(a.containerType?a.containerType!=="normal":!1)||!t&&(a.backdropFilter?a.backdropFilter!=="none":!1)||!t&&(a.filter?a.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(l=>(a.willChange||"").includes(l))||["paint","layout","strict","content"].some(l=>(a.contain||"").includes(l))}function I1(e){let t=rl(e);for(;En(t)&&!ol(t);){if(lR(t))return t;if(Pf(t))return null;t=rl(t)}return null}function Gf(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function ol(e){return["html","body","#document"].includes(so(e))}function ai(e){return oa(e).getComputedStyle(e)}function wf(e){return Dt(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function rl(e){if(so(e)==="html")return e;const t=e.assignedSlot||e.parentNode||lf(e)&&e.host||Li(e);return lf(t)?t.host:t}function SC(e){const t=rl(e);return ol(t)?e.ownerDocument?e.ownerDocument.body:e.body:En(t)&&Eu(t)?t:SC(t)}function ql(e,t,a){var l;t===void 0&&(t=[]),a===void 0&&(a=!0);const s=SC(e),c=s===((l=e.ownerDocument)==null?void 0:l.body),d=oa(s);if(c){const h=lm(d);return t.concat(d,d.visualViewport||[],Eu(s)?s:[],h&&a?ql(h):[])}return t.concat(s,ql(s,[],a))}function lm(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}const C1=["top","right","bottom","left"],Jl=Math.min,La=Math.max,of=Math.round,Hd=Math.floor,yi=e=>({x:e,y:e}),N1={left:"right",right:"left",bottom:"top",top:"bottom"},O1={start:"end",end:"start"};function om(e,t,a){return La(e,Jl(t,a))}function cl(e,t){return typeof e=="function"?e(t):e}function ni(e){return e.split("-")[0]}function eo(e){return e.split("-")[1]}function oR(e){return e==="x"?"y":"x"}function sR(e){return e==="y"?"height":"width"}function to(e){return["top","bottom"].includes(ni(e))?"y":"x"}function rR(e){return oR(to(e))}function b1(e,t,a){a===void 0&&(a=!1);const l=eo(e),s=rR(e),c=sR(s);let d=s==="x"?l===(a?"end":"start")?"right":"left":l==="start"?"bottom":"top";return t.reference[c]>t.floating[c]&&(d=sf(d)),[d,sf(d)]}function y1(e){const t=sf(e);return[sm(e),t,sm(t)]}function sm(e){return e.replace(/start|end/g,t=>O1[t])}function v1(e,t,a){const l=["left","right"],s=["right","left"],c=["top","bottom"],d=["bottom","top"];switch(e){case"top":case"bottom":return a?t?s:l:t?l:s;case"left":case"right":return t?c:d;default:return[]}}function D1(e,t,a,l){const s=eo(e);let c=v1(ni(e),a==="start",l);return s&&(c=c.map(d=>d+"-"+s),t&&(c=c.concat(c.map(sm)))),c}function sf(e){return e.replace(/left|right|bottom|top/g,t=>N1[t])}function M1(e){return{top:0,right:0,bottom:0,left:0,...e}}function gC(e){return typeof e!="number"?M1(e):{top:e,right:e,bottom:e,left:e}}function rf(e){const{x:t,y:a,width:l,height:s}=e;return{width:l,height:s,top:a,left:t,right:t+l,bottom:a+s,x:t,y:a}}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var L1=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],cf=L1.join(","),pC=typeof Element>"u",_r=pC?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,uf=!pC&&Element.prototype.getRootNode?function(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}:function(e){return e==null?void 0:e.ownerDocument},df=function e(t,a){var l;a===void 0&&(a=!0);var s=t==null||(l=t.getAttribute)===null||l===void 0?void 0:l.call(t,"inert"),c=s===""||s==="true",d=c||a&&t&&e(t.parentNode);return d},H1=function(t){var a,l=t==null||(a=t.getAttribute)===null||a===void 0?void 0:a.call(t,"contenteditable");return l===""||l==="true"},_C=function(t,a,l){if(df(t))return[];var s=Array.prototype.slice.apply(t.querySelectorAll(cf));return a&&_r.call(t,cf)&&s.unshift(t),s=s.filter(l),s},IC=function e(t,a,l){for(var s=[],c=Array.from(t);c.length;){var d=c.shift();if(!df(d,!1))if(d.tagName==="SLOT"){var h=d.assignedElements(),E=h.length?h:d.children,A=e(E,!0,l);l.flatten?s.push.apply(s,A):s.push({scopeParent:d,candidates:A})}else{var R=_r.call(d,cf);R&&l.filter(d)&&(a||!t.includes(d))&&s.push(d);var T=d.shadowRoot||typeof l.getShadowRoot=="function"&&l.getShadowRoot(d),S=!df(T,!1)&&(!l.shadowRootFilter||l.shadowRootFilter(d));if(T&&S){var p=e(T===!0?d.children:T.children,!0,l);l.flatten?s.push.apply(s,p):s.push({scopeParent:d,candidates:p})}else c.unshift.apply(c,d.children)}}return s},CC=function(t){return!isNaN(parseInt(t.getAttribute("tabindex"),10))},NC=function(t){if(!t)throw new Error("No node provided");return t.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||H1(t))&&!CC(t)?0:t.tabIndex},x1=function(t,a){var l=NC(t);return l<0&&a&&!CC(t)?0:l},U1=function(t,a){return t.tabIndex===a.tabIndex?t.documentOrder-a.documentOrder:t.tabIndex-a.tabIndex},OC=function(t){return t.tagName==="INPUT"},k1=function(t){return OC(t)&&t.type==="hidden"},P1=function(t){var a=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(l){return l.tagName==="SUMMARY"});return a},G1=function(t,a){for(var l=0;l<t.length;l++)if(t[l].checked&&t[l].form===a)return t[l]},w1=function(t){if(!t.name)return!0;var a=t.form||uf(t),l=function(h){return a.querySelectorAll('input[type="radio"][name="'+h+'"]')},s;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")s=l(window.CSS.escape(t.name));else try{s=l(t.name)}catch(d){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",d.message),!1}var c=G1(s,t.form);return!c||c===t},B1=function(t){return OC(t)&&t.type==="radio"},F1=function(t){return B1(t)&&!w1(t)},j1=function(t){var a,l=t&&uf(t),s=(a=l)===null||a===void 0?void 0:a.host,c=!1;if(l&&l!==t){var d,h,E;for(c=!!((d=s)!==null&&d!==void 0&&(h=d.ownerDocument)!==null&&h!==void 0&&h.contains(s)||t!=null&&(E=t.ownerDocument)!==null&&E!==void 0&&E.contains(t));!c&&s;){var A,R,T;l=uf(s),s=(A=l)===null||A===void 0?void 0:A.host,c=!!((R=s)!==null&&R!==void 0&&(T=R.ownerDocument)!==null&&T!==void 0&&T.contains(s))}}return c},r_=function(t){var a=t.getBoundingClientRect(),l=a.width,s=a.height;return l===0&&s===0},z1=function(t,a){var l=a.displayCheck,s=a.getShadowRoot;if(getComputedStyle(t).visibility==="hidden")return!0;var c=_r.call(t,"details>summary:first-of-type"),d=c?t.parentElement:t;if(_r.call(d,"details:not([open]) *"))return!0;if(!l||l==="full"||l==="legacy-full"){if(typeof s=="function"){for(var h=t;t;){var E=t.parentElement,A=uf(t);if(E&&!E.shadowRoot&&s(E)===!0)return r_(t);t.assignedSlot?t=t.assignedSlot:!E&&A!==t.ownerDocument?t=A.host:t=E}t=h}if(j1(t))return!t.getClientRects().length;if(l!=="legacy-full")return!0}else if(l==="non-zero-area")return r_(t);return!1},Y1=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var a=t.parentElement;a;){if(a.tagName==="FIELDSET"&&a.disabled){for(var l=0;l<a.children.length;l++){var s=a.children.item(l);if(s.tagName==="LEGEND")return _r.call(a,"fieldset[disabled] *")?!0:!s.contains(t)}return!0}a=a.parentElement}return!1},rm=function(t,a){return!(a.disabled||df(a)||k1(a)||z1(a,t)||P1(a)||Y1(a))},cm=function(t,a){return!(F1(a)||NC(a)<0||!rm(t,a))},V1=function(t){var a=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(a)||a>=0)},K1=function e(t){var a=[],l=[];return t.forEach(function(s,c){var d=!!s.scopeParent,h=d?s.scopeParent:s,E=x1(h,d),A=d?e(s.candidates):h;E===0?d?a.push.apply(a,A):a.push(h):l.push({documentOrder:c,tabIndex:E,item:s,isScope:d,content:A})}),l.sort(U1).reduce(function(s,c){return c.isScope?s.push.apply(s,c.content):s.push(c.content),s},[]).concat(a)},Bf=function(t,a){a=a||{};var l;return a.getShadowRoot?l=IC([t],a.includeContainer,{filter:cm.bind(null,a),flatten:!1,getShadowRoot:a.getShadowRoot,shadowRootFilter:V1}):l=_C(t,a.includeContainer,cm.bind(null,a)),K1(l)},W1=function(t,a){a=a||{};var l;return a.getShadowRoot?l=IC([t],a.includeContainer,{filter:rm.bind(null,a),flatten:!0,getShadowRoot:a.getShadowRoot}):l=_C(t,a.includeContainer,rm.bind(null,a)),l},bC=function(t,a){if(a=a||{},!t)throw new Error("No node provided");return _r.call(t,cf)===!1?!1:cm(a,t)};function yC(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function cR(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:a,version:l}=t;return a+"/"+l}).join(" "):navigator.userAgent}function vC(){return/apple/i.test(navigator.vendor)}function um(){const e=/android/i;return e.test(yC())||e.test(cR())}function q1(){return yC().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function DC(){return cR().includes("jsdom/")}const c_="data-floating-ui-focusable",X1="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function Bl(e){let t=e.activeElement;for(;((a=t)==null||(a=a.shadowRoot)==null?void 0:a.activeElement)!=null;){var a;t=t.shadowRoot.activeElement}return t}function Bn(e,t){if(!e||!t)return!1;const a=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(a&&lf(a)){let l=t;for(;l;){if(e===l)return!0;l=l.parentNode||l.host}}return!1}function Ei(e){return"composedPath"in e?e.composedPath()[0]:e.target}function yA(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const a=e;return a.target!=null&&t.contains(a.target)}function Z1(e){return e.matches("html,body")}function Xn(e){return(e==null?void 0:e.ownerDocument)||document}function Ff(e){return En(e)&&e.matches(X1)}function u_(e){return e?e.getAttribute("role")==="combobox"&&Ff(e):!1}function Q1(e){if(!e||DC())return!0;try{return e.matches(":focus-visible")}catch{return!0}}function dm(e){return e?e.hasAttribute(c_)?e:e.querySelector("["+c_+"]")||e:null}function Vc(e,t,a){a===void 0&&(a=!0);let l=e.filter(c=>{var d;return c.parentId===t&&((d=c.context)==null?void 0:d.open)}),s=l;for(;s.length;)s=a?e.filter(c=>{var d;return(d=s)==null?void 0:d.some(h=>{var E;return c.parentId===h.id&&((E=c.context)==null?void 0:E.open)})}):e,l=l.concat(s);return l}function d_(e,t){var a;let l=[],s=(a=e.find(c=>c.id===t))==null?void 0:a.parentId;for(;s;){const c=e.find(d=>d.id===s);s=c==null?void 0:c.parentId,c&&(l=l.concat(c))}return l}function vA(e){e.preventDefault(),e.stopPropagation()}function $1(e){return"nativeEvent"in e}function J1(e){return e.mozInputSource===0&&e.isTrusted?!0:um()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function eL(e){return DC()?!1:!um()&&e.width===0&&e.height===0||um()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function Ir(e,t){const a=["mouse","pen"];return t||a.push("",void 0),a.includes(e)}var vn=typeof document<"u"?N.useLayoutEffect:N.useEffect;const tL={...Df};function xo(e){const t=N.useRef(e);return vn(()=>{t.current=e}),t}const nL=tL.useInsertionEffect,aL=nL||(e=>e());function la(e){const t=N.useRef(()=>{});return aL(()=>{t.current=e}),N.useCallback(function(){for(var a=arguments.length,l=new Array(a),s=0;s<a;s++)l[s]=arguments[s];return t.current==null?void 0:t.current(...l)},[])}const Au=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function MC(e,t){const a=Bf(e,Au()),l=a.length;if(l===0)return;const s=Bl(Xn(e)),c=a.indexOf(s),d=c===-1?t===1?0:l-1:c+t;return a[d]}function LC(e){return MC(Xn(e).body,1)||e}function HC(e){return MC(Xn(e).body,-1)||e}function Kc(e,t){const a=t||e.currentTarget,l=e.relatedTarget;return!l||!Bn(a,l)}function iL(e){Bf(e,Au()).forEach(a=>{a.dataset.tabindex=a.getAttribute("tabindex")||"",a.setAttribute("tabindex","-1")})}function f_(e){e.querySelectorAll("[data-tabindex]").forEach(a=>{const l=a.dataset.tabindex;delete a.dataset.tabindex,l?a.setAttribute("tabindex",l):a.removeAttribute("tabindex")})}function h_(e,t,a){let{reference:l,floating:s}=e;const c=to(t),d=rR(t),h=sR(d),E=ni(t),A=c==="y",R=l.x+l.width/2-s.width/2,T=l.y+l.height/2-s.height/2,S=l[h]/2-s[h]/2;let p;switch(E){case"top":p={x:R,y:l.y-s.height};break;case"bottom":p={x:R,y:l.y+l.height};break;case"right":p={x:l.x+l.width,y:T};break;case"left":p={x:l.x-s.width,y:T};break;default:p={x:l.x,y:l.y}}switch(eo(t)){case"start":p[d]-=S*(a&&A?-1:1);break;case"end":p[d]+=S*(a&&A?-1:1);break}return p}const lL=async(e,t,a)=>{const{placement:l="bottom",strategy:s="absolute",middleware:c=[],platform:d}=a,h=c.filter(Boolean),E=await(d.isRTL==null?void 0:d.isRTL(t));let A=await d.getElementRects({reference:e,floating:t,strategy:s}),{x:R,y:T}=h_(A,l,E),S=l,p={},I=0;for(let b=0;b<h.length;b++){const{name:O,fn:v}=h[b],{x:L,y:P,data:U,reset:V}=await v({x:R,y:T,initialPlacement:l,placement:S,strategy:s,middlewareData:p,rects:A,platform:d,elements:{reference:e,floating:t}});R=L??R,T=P??T,p={...p,[O]:{...p[O],...U}},V&&I<=50&&(I++,typeof V=="object"&&(V.placement&&(S=V.placement),V.rects&&(A=V.rects===!0?await d.getElementRects({reference:e,floating:t,strategy:s}):V.rects),{x:R,y:T}=h_(A,S,E)),b=-1)}return{x:R,y:T,placement:S,strategy:s,middlewareData:p}};async function Qc(e,t){var a;t===void 0&&(t={});const{x:l,y:s,platform:c,rects:d,elements:h,strategy:E}=e,{boundary:A="clippingAncestors",rootBoundary:R="viewport",elementContext:T="floating",altBoundary:S=!1,padding:p=0}=cl(t,e),I=gC(p),O=h[S?T==="floating"?"reference":"floating":T],v=rf(await c.getClippingRect({element:(a=await(c.isElement==null?void 0:c.isElement(O)))==null||a?O:O.contextElement||await(c.getDocumentElement==null?void 0:c.getDocumentElement(h.floating)),boundary:A,rootBoundary:R,strategy:E})),L=T==="floating"?{x:l,y:s,width:d.floating.width,height:d.floating.height}:d.reference,P=await(c.getOffsetParent==null?void 0:c.getOffsetParent(h.floating)),U=await(c.isElement==null?void 0:c.isElement(P))?await(c.getScale==null?void 0:c.getScale(P))||{x:1,y:1}:{x:1,y:1},V=rf(c.convertOffsetParentRelativeRectToViewportRelativeRect?await c.convertOffsetParentRelativeRectToViewportRelativeRect({elements:h,rect:L,offsetParent:P,strategy:E}):L);return{top:(v.top-V.top+I.top)/U.y,bottom:(V.bottom-v.bottom+I.bottom)/U.y,left:(v.left-V.left+I.left)/U.x,right:(V.right-v.right+I.right)/U.x}}const oL=e=>({name:"arrow",options:e,async fn(t){const{x:a,y:l,placement:s,rects:c,platform:d,elements:h,middlewareData:E}=t,{element:A,padding:R=0}=cl(e,t)||{};if(A==null)return{};const T=gC(R),S={x:a,y:l},p=rR(s),I=sR(p),b=await d.getDimensions(A),O=p==="y",v=O?"top":"left",L=O?"bottom":"right",P=O?"clientHeight":"clientWidth",U=c.reference[I]+c.reference[p]-S[p]-c.floating[I],V=S[p]-c.reference[p],G=await(d.getOffsetParent==null?void 0:d.getOffsetParent(A));let H=G?G[P]:0;(!H||!await(d.isElement==null?void 0:d.isElement(G)))&&(H=h.floating[P]||c.floating[I]);const ue=U/2-V/2,Ae=H/2-b[I]/2-1,Ee=Jl(T[v],Ae),oe=Jl(T[L],Ae),Te=Ee,Se=H-b[I]-oe,ne=H/2-b[I]/2+ue,ae=om(Te,ne,Se),w=!E.arrow&&eo(s)!=null&&ne!==ae&&c.reference[I]/2-(ne<Te?Ee:oe)-b[I]/2<0,M=w?ne<Te?ne-Te:ne-Se:0;return{[p]:S[p]+M,data:{[p]:ae,centerOffset:ne-ae-M,...w&&{alignmentOffset:M}},reset:w}}}),sL=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var a,l;const{placement:s,middlewareData:c,rects:d,initialPlacement:h,platform:E,elements:A}=t,{mainAxis:R=!0,crossAxis:T=!0,fallbackPlacements:S,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:I="none",flipAlignment:b=!0,...O}=cl(e,t);if((a=c.arrow)!=null&&a.alignmentOffset)return{};const v=ni(s),L=to(h),P=ni(h)===h,U=await(E.isRTL==null?void 0:E.isRTL(A.floating)),V=S||(P||!b?[sf(h)]:y1(h)),G=I!=="none";!S&&G&&V.push(...D1(h,b,I,U));const H=[h,...V],ue=await Qc(t,O),Ae=[];let Ee=((l=c.flip)==null?void 0:l.overflows)||[];if(R&&Ae.push(ue[v]),T){const ne=b1(s,d,U);Ae.push(ue[ne[0]],ue[ne[1]])}if(Ee=[...Ee,{placement:s,overflows:Ae}],!Ae.every(ne=>ne<=0)){var oe,Te;const ne=(((oe=c.flip)==null?void 0:oe.index)||0)+1,ae=H[ne];if(ae)return{data:{index:ne,overflows:Ee},reset:{placement:ae}};let w=(Te=Ee.filter(M=>M.overflows[0]<=0).sort((M,W)=>M.overflows[1]-W.overflows[1])[0])==null?void 0:Te.placement;if(!w)switch(p){case"bestFit":{var Se;const M=(Se=Ee.filter(W=>{if(G){const ie=to(W.placement);return ie===L||ie==="y"}return!0}).map(W=>[W.placement,W.overflows.filter(ie=>ie>0).reduce((ie,y)=>ie+y,0)]).sort((W,ie)=>W[1]-ie[1])[0])==null?void 0:Se[0];M&&(w=M);break}case"initialPlacement":w=h;break}if(s!==w)return{reset:{placement:w}}}return{}}}};function E_(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function A_(e){return C1.some(t=>e[t]>=0)}const rL=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:a}=t,{strategy:l="referenceHidden",...s}=cl(e,t);switch(l){case"referenceHidden":{const c=await Qc(t,{...s,elementContext:"reference"}),d=E_(c,a.reference);return{data:{referenceHiddenOffsets:d,referenceHidden:A_(d)}}}case"escaped":{const c=await Qc(t,{...s,altBoundary:!0}),d=E_(c,a.floating);return{data:{escapedOffsets:d,escaped:A_(d)}}}default:return{}}}}};async function cL(e,t){const{placement:a,platform:l,elements:s}=e,c=await(l.isRTL==null?void 0:l.isRTL(s.floating)),d=ni(a),h=eo(a),E=to(a)==="y",A=["left","top"].includes(d)?-1:1,R=c&&E?-1:1,T=cl(t,e);let{mainAxis:S,crossAxis:p,alignmentAxis:I}=typeof T=="number"?{mainAxis:T,crossAxis:0,alignmentAxis:null}:{mainAxis:T.mainAxis||0,crossAxis:T.crossAxis||0,alignmentAxis:T.alignmentAxis};return h&&typeof I=="number"&&(p=h==="end"?I*-1:I),E?{x:p*R,y:S*A}:{x:S*A,y:p*R}}const uL=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var a,l;const{x:s,y:c,placement:d,middlewareData:h}=t,E=await cL(t,e);return d===((a=h.offset)==null?void 0:a.placement)&&(l=h.arrow)!=null&&l.alignmentOffset?{}:{x:s+E.x,y:c+E.y,data:{...E,placement:d}}}}},dL=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:a,y:l,placement:s}=t,{mainAxis:c=!0,crossAxis:d=!1,limiter:h={fn:O=>{let{x:v,y:L}=O;return{x:v,y:L}}},...E}=cl(e,t),A={x:a,y:l},R=await Qc(t,E),T=to(ni(s)),S=oR(T);let p=A[S],I=A[T];if(c){const O=S==="y"?"top":"left",v=S==="y"?"bottom":"right",L=p+R[O],P=p-R[v];p=om(L,p,P)}if(d){const O=T==="y"?"top":"left",v=T==="y"?"bottom":"right",L=I+R[O],P=I-R[v];I=om(L,I,P)}const b=h.fn({...t,[S]:p,[T]:I});return{...b,data:{x:b.x-a,y:b.y-l,enabled:{[S]:c,[T]:d}}}}}},fL=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:a,y:l,placement:s,rects:c,middlewareData:d}=t,{offset:h=0,mainAxis:E=!0,crossAxis:A=!0}=cl(e,t),R={x:a,y:l},T=to(s),S=oR(T);let p=R[S],I=R[T];const b=cl(h,t),O=typeof b=="number"?{mainAxis:b,crossAxis:0}:{mainAxis:0,crossAxis:0,...b};if(E){const P=S==="y"?"height":"width",U=c.reference[S]-c.floating[P]+O.mainAxis,V=c.reference[S]+c.reference[P]-O.mainAxis;p<U?p=U:p>V&&(p=V)}if(A){var v,L;const P=S==="y"?"width":"height",U=["top","left"].includes(ni(s)),V=c.reference[T]-c.floating[P]+(U&&((v=d.offset)==null?void 0:v[T])||0)+(U?0:O.crossAxis),G=c.reference[T]+c.reference[P]+(U?0:((L=d.offset)==null?void 0:L[T])||0)-(U?O.crossAxis:0);I<V?I=V:I>G&&(I=G)}return{[S]:p,[T]:I}}}},hL=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var a,l;const{placement:s,rects:c,platform:d,elements:h}=t,{apply:E=()=>{},...A}=cl(e,t),R=await Qc(t,A),T=ni(s),S=eo(s),p=to(s)==="y",{width:I,height:b}=c.floating;let O,v;T==="top"||T==="bottom"?(O=T,v=S===(await(d.isRTL==null?void 0:d.isRTL(h.floating))?"start":"end")?"left":"right"):(v=T,O=S==="end"?"top":"bottom");const L=b-R.top-R.bottom,P=I-R.left-R.right,U=Jl(b-R[O],L),V=Jl(I-R[v],P),G=!t.middlewareData.shift;let H=U,ue=V;if((a=t.middlewareData.shift)!=null&&a.enabled.x&&(ue=P),(l=t.middlewareData.shift)!=null&&l.enabled.y&&(H=L),G&&!S){const Ee=La(R.left,0),oe=La(R.right,0),Te=La(R.top,0),Se=La(R.bottom,0);p?ue=I-2*(Ee!==0||oe!==0?Ee+oe:La(R.left,R.right)):H=b-2*(Te!==0||Se!==0?Te+Se:La(R.top,R.bottom))}await E({...t,availableWidth:ue,availableHeight:H});const Ae=await d.getDimensions(h.floating);return I!==Ae.width||b!==Ae.height?{reset:{rects:!0}}:{}}}};function xC(e){const t=ai(e);let a=parseFloat(t.width)||0,l=parseFloat(t.height)||0;const s=En(e),c=s?e.offsetWidth:a,d=s?e.offsetHeight:l,h=of(a)!==c||of(l)!==d;return h&&(a=c,l=d),{width:a,height:l,$:h}}function uR(e){return Dt(e)?e:e.contextElement}function or(e){const t=uR(e);if(!En(t))return yi(1);const a=t.getBoundingClientRect(),{width:l,height:s,$:c}=xC(t);let d=(c?of(a.width):a.width)/l,h=(c?of(a.height):a.height)/s;return(!d||!Number.isFinite(d))&&(d=1),(!h||!Number.isFinite(h))&&(h=1),{x:d,y:h}}const EL=yi(0);function UC(e){const t=oa(e);return!Gf()||!t.visualViewport?EL:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function AL(e,t,a){return t===void 0&&(t=!1),!a||t&&a!==oa(e)?!1:t}function Jo(e,t,a,l){t===void 0&&(t=!1),a===void 0&&(a=!1);const s=e.getBoundingClientRect(),c=uR(e);let d=yi(1);t&&(l?Dt(l)&&(d=or(l)):d=or(e));const h=AL(c,a,l)?UC(c):yi(0);let E=(s.left+h.x)/d.x,A=(s.top+h.y)/d.y,R=s.width/d.x,T=s.height/d.y;if(c){const S=oa(c),p=l&&Dt(l)?oa(l):l;let I=S,b=lm(I);for(;b&&l&&p!==I;){const O=or(b),v=b.getBoundingClientRect(),L=ai(b),P=v.left+(b.clientLeft+parseFloat(L.paddingLeft))*O.x,U=v.top+(b.clientTop+parseFloat(L.paddingTop))*O.y;E*=O.x,A*=O.y,R*=O.x,T*=O.y,E+=P,A+=U,I=oa(b),b=lm(I)}}return rf({width:R,height:T,x:E,y:A})}function dR(e,t){const a=wf(e).scrollLeft;return t?t.left+a:Jo(Li(e)).left+a}function kC(e,t,a){a===void 0&&(a=!1);const l=e.getBoundingClientRect(),s=l.left+t.scrollLeft-(a?0:dR(e,l)),c=l.top+t.scrollTop;return{x:s,y:c}}function mL(e){let{elements:t,rect:a,offsetParent:l,strategy:s}=e;const c=s==="fixed",d=Li(l),h=t?Pf(t.floating):!1;if(l===d||h&&c)return a;let E={scrollLeft:0,scrollTop:0},A=yi(1);const R=yi(0),T=En(l);if((T||!T&&!c)&&((so(l)!=="body"||Eu(d))&&(E=wf(l)),En(l))){const p=Jo(l);A=or(l),R.x=p.x+l.clientLeft,R.y=p.y+l.clientTop}const S=d&&!T&&!c?kC(d,E,!0):yi(0);return{width:a.width*A.x,height:a.height*A.y,x:a.x*A.x-E.scrollLeft*A.x+R.x+S.x,y:a.y*A.y-E.scrollTop*A.y+R.y+S.y}}function RL(e){return Array.from(e.getClientRects())}function TL(e){const t=Li(e),a=wf(e),l=e.ownerDocument.body,s=La(t.scrollWidth,t.clientWidth,l.scrollWidth,l.clientWidth),c=La(t.scrollHeight,t.clientHeight,l.scrollHeight,l.clientHeight);let d=-a.scrollLeft+dR(e);const h=-a.scrollTop;return ai(l).direction==="rtl"&&(d+=La(t.clientWidth,l.clientWidth)-s),{width:s,height:c,x:d,y:h}}function SL(e,t){const a=oa(e),l=Li(e),s=a.visualViewport;let c=l.clientWidth,d=l.clientHeight,h=0,E=0;if(s){c=s.width,d=s.height;const A=Gf();(!A||A&&t==="fixed")&&(h=s.offsetLeft,E=s.offsetTop)}return{width:c,height:d,x:h,y:E}}function gL(e,t){const a=Jo(e,!0,t==="fixed"),l=a.top+e.clientTop,s=a.left+e.clientLeft,c=En(e)?or(e):yi(1),d=e.clientWidth*c.x,h=e.clientHeight*c.y,E=s*c.x,A=l*c.y;return{width:d,height:h,x:E,y:A}}function m_(e,t,a){let l;if(t==="viewport")l=SL(e,a);else if(t==="document")l=TL(Li(e));else if(Dt(t))l=gL(t,a);else{const s=UC(e);l={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return rf(l)}function PC(e,t){const a=rl(e);return a===t||!Dt(a)||ol(a)?!1:ai(a).position==="fixed"||PC(a,t)}function pL(e,t){const a=t.get(e);if(a)return a;let l=ql(e,[],!1).filter(h=>Dt(h)&&so(h)!=="body"),s=null;const c=ai(e).position==="fixed";let d=c?rl(e):e;for(;Dt(d)&&!ol(d);){const h=ai(d),E=lR(d);!E&&h.position==="fixed"&&(s=null),(c?!E&&!s:!E&&h.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||Eu(d)&&!E&&PC(e,d))?l=l.filter(R=>R!==d):s=h,d=rl(d)}return t.set(e,l),l}function _L(e){let{element:t,boundary:a,rootBoundary:l,strategy:s}=e;const d=[...a==="clippingAncestors"?Pf(t)?[]:pL(t,this._c):[].concat(a),l],h=d[0],E=d.reduce((A,R)=>{const T=m_(t,R,s);return A.top=La(T.top,A.top),A.right=Jl(T.right,A.right),A.bottom=Jl(T.bottom,A.bottom),A.left=La(T.left,A.left),A},m_(t,h,s));return{width:E.right-E.left,height:E.bottom-E.top,x:E.left,y:E.top}}function IL(e){const{width:t,height:a}=xC(e);return{width:t,height:a}}function CL(e,t,a){const l=En(t),s=Li(t),c=a==="fixed",d=Jo(e,!0,c,t);let h={scrollLeft:0,scrollTop:0};const E=yi(0);if(l||!l&&!c)if((so(t)!=="body"||Eu(s))&&(h=wf(t)),l){const S=Jo(t,!0,c,t);E.x=S.x+t.clientLeft,E.y=S.y+t.clientTop}else s&&(E.x=dR(s));const A=s&&!l&&!c?kC(s,h):yi(0),R=d.left+h.scrollLeft-E.x-A.x,T=d.top+h.scrollTop-E.y-A.y;return{x:R,y:T,width:d.width,height:d.height}}function DA(e){return ai(e).position==="static"}function R_(e,t){if(!En(e)||ai(e).position==="fixed")return null;if(t)return t(e);let a=e.offsetParent;return Li(e)===a&&(a=a.ownerDocument.body),a}function GC(e,t){const a=oa(e);if(Pf(e))return a;if(!En(e)){let s=rl(e);for(;s&&!ol(s);){if(Dt(s)&&!DA(s))return s;s=rl(s)}return a}let l=R_(e,t);for(;l&&_1(l)&&DA(l);)l=R_(l,t);return l&&ol(l)&&DA(l)&&!lR(l)?a:l||I1(e)||a}const NL=async function(e){const t=this.getOffsetParent||GC,a=this.getDimensions,l=await a(e.floating);return{reference:CL(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:l.width,height:l.height}}};function OL(e){return ai(e).direction==="rtl"}const bL={convertOffsetParentRelativeRectToViewportRelativeRect:mL,getDocumentElement:Li,getClippingRect:_L,getOffsetParent:GC,getElementRects:NL,getClientRects:RL,getDimensions:IL,getScale:or,isElement:Dt,isRTL:OL};function wC(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function yL(e,t){let a=null,l;const s=Li(e);function c(){var h;clearTimeout(l),(h=a)==null||h.disconnect(),a=null}function d(h,E){h===void 0&&(h=!1),E===void 0&&(E=1),c();const A=e.getBoundingClientRect(),{left:R,top:T,width:S,height:p}=A;if(h||t(),!S||!p)return;const I=Hd(T),b=Hd(s.clientWidth-(R+S)),O=Hd(s.clientHeight-(T+p)),v=Hd(R),P={rootMargin:-I+"px "+-b+"px "+-O+"px "+-v+"px",threshold:La(0,Jl(1,E))||1};let U=!0;function V(G){const H=G[0].intersectionRatio;if(H!==E){if(!U)return d();H?d(!1,H):l=setTimeout(()=>{d(!1,1e-7)},1e3)}H===1&&!wC(A,e.getBoundingClientRect())&&d(),U=!1}try{a=new IntersectionObserver(V,{...P,root:s.ownerDocument})}catch{a=new IntersectionObserver(V,P)}a.observe(e)}return d(!0),c}function T_(e,t,a,l){l===void 0&&(l={});const{ancestorScroll:s=!0,ancestorResize:c=!0,elementResize:d=typeof ResizeObserver=="function",layoutShift:h=typeof IntersectionObserver=="function",animationFrame:E=!1}=l,A=uR(e),R=s||c?[...A?ql(A):[],...ql(t)]:[];R.forEach(v=>{s&&v.addEventListener("scroll",a,{passive:!0}),c&&v.addEventListener("resize",a)});const T=A&&h?yL(A,a):null;let S=-1,p=null;d&&(p=new ResizeObserver(v=>{let[L]=v;L&&L.target===A&&p&&(p.unobserve(t),cancelAnimationFrame(S),S=requestAnimationFrame(()=>{var P;(P=p)==null||P.observe(t)})),a()}),A&&!E&&p.observe(A),p.observe(t));let I,b=E?Jo(e):null;E&&O();function O(){const v=Jo(e);b&&!wC(b,v)&&a(),b=v,I=requestAnimationFrame(O)}return a(),()=>{var v;R.forEach(L=>{s&&L.removeEventListener("scroll",a),c&&L.removeEventListener("resize",a)}),T==null||T(),(v=p)==null||v.disconnect(),p=null,E&&cancelAnimationFrame(I)}}const vL=uL,DL=dL,ML=sL,LL=hL,HL=rL,S_=oL,xL=fL,UL=(e,t,a)=>{const l=new Map,s={platform:bL,...a},c={...s.platform,_c:l};return lL(e,t,{...s,platform:c})};var wd=typeof document<"u"?N.useLayoutEffect:N.useEffect;function ff(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let a,l,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(a=e.length,a!==t.length)return!1;for(l=a;l--!==0;)if(!ff(e[l],t[l]))return!1;return!0}if(s=Object.keys(e),a=s.length,a!==Object.keys(t).length)return!1;for(l=a;l--!==0;)if(!{}.hasOwnProperty.call(t,s[l]))return!1;for(l=a;l--!==0;){const c=s[l];if(!(c==="_owner"&&e.$$typeof)&&!ff(e[c],t[c]))return!1}return!0}return e!==e&&t!==t}function BC(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function g_(e,t){const a=BC(e);return Math.round(t*a)/a}function MA(e){const t=N.useRef(e);return wd(()=>{t.current=e}),t}function kL(e){e===void 0&&(e={});const{placement:t="bottom",strategy:a="absolute",middleware:l=[],platform:s,elements:{reference:c,floating:d}={},transform:h=!0,whileElementsMounted:E,open:A}=e,[R,T]=N.useState({x:0,y:0,strategy:a,placement:t,middlewareData:{},isPositioned:!1}),[S,p]=N.useState(l);ff(S,l)||p(l);const[I,b]=N.useState(null),[O,v]=N.useState(null),L=N.useCallback(W=>{W!==G.current&&(G.current=W,b(W))},[]),P=N.useCallback(W=>{W!==H.current&&(H.current=W,v(W))},[]),U=c||I,V=d||O,G=N.useRef(null),H=N.useRef(null),ue=N.useRef(R),Ae=E!=null,Ee=MA(E),oe=MA(s),Te=MA(A),Se=N.useCallback(()=>{if(!G.current||!H.current)return;const W={placement:t,strategy:a,middleware:S};oe.current&&(W.platform=oe.current),UL(G.current,H.current,W).then(ie=>{const y={...ie,isPositioned:Te.current!==!1};ne.current&&!ff(ue.current,y)&&(ue.current=y,hu.flushSync(()=>{T(y)}))})},[S,t,a,oe,Te]);wd(()=>{A===!1&&ue.current.isPositioned&&(ue.current.isPositioned=!1,T(W=>({...W,isPositioned:!1})))},[A]);const ne=N.useRef(!1);wd(()=>(ne.current=!0,()=>{ne.current=!1}),[]),wd(()=>{if(U&&(G.current=U),V&&(H.current=V),U&&V){if(Ee.current)return Ee.current(U,V,Se);Se()}},[U,V,Se,Ee,Ae]);const ae=N.useMemo(()=>({reference:G,floating:H,setReference:L,setFloating:P}),[L,P]),w=N.useMemo(()=>({reference:U,floating:V}),[U,V]),M=N.useMemo(()=>{const W={position:a,left:0,top:0};if(!w.floating)return W;const ie=g_(w.floating,R.x),y=g_(w.floating,R.y);return h?{...W,transform:"translate("+ie+"px, "+y+"px)",...BC(w.floating)>=1.5&&{willChange:"transform"}}:{position:a,left:ie,top:y}},[a,h,w.floating,R.x,R.y]);return N.useMemo(()=>({...R,update:Se,refs:ae,elements:w,floatingStyles:M}),[R,Se,ae,w,M])}const PL=e=>{function t(a){return{}.hasOwnProperty.call(a,"current")}return{name:"arrow",options:e,fn(a){const{element:l,padding:s}=typeof e=="function"?e(a):e;return l&&t(l)?l.current!=null?S_({element:l.current,padding:s}).fn(a):{}:l?S_({element:l,padding:s}).fn(a):{}}}},GL=(e,t)=>({...vL(e),options:[e,t]}),wL=(e,t)=>({...DL(e),options:[e,t]}),BL=(e,t)=>({...xL(e),options:[e,t]}),FL=(e,t)=>({...ML(e),options:[e,t]}),jL=(e,t)=>({...LL(e),options:[e,t]}),zL=(e,t)=>({...HL(e),options:[e,t]}),YL=(e,t)=>({...PL(e),options:[e,t]}),VL="data-floating-ui-focusable",p_="active",__="selected",KL={...Df};let I_=!1,WL=0;const C_=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+WL++;function qL(){const[e,t]=N.useState(()=>I_?C_():void 0);return vn(()=>{e==null&&t(C_())},[]),N.useEffect(()=>{I_=!0},[]),e}const XL=KL.useId,fR=XL||qL;function ZL(){const e=new Map;return{emit(t,a){var l;(l=e.get(t))==null||l.forEach(s=>s(a))},on(t,a){e.has(t)||e.set(t,new Set),e.get(t).add(a)},off(t,a){var l;(l=e.get(t))==null||l.delete(a)}}}const QL=N.createContext(null),$L=N.createContext(null),hR=()=>{var e;return((e=N.useContext(QL))==null?void 0:e.id)||null},jf=()=>N.useContext($L);function es(e){return"data-floating-ui-"+e}function ya(e){e.current!==-1&&(clearTimeout(e.current),e.current=-1)}const N_=es("safe-polygon");function Bd(e,t,a){if(a&&!Ir(a))return 0;if(typeof e=="number")return e;if(typeof e=="function"){const l=e();return typeof l=="number"?l:l==null?void 0:l[t]}return e==null?void 0:e[t]}function LA(e){return typeof e=="function"?e():e}function JL(e,t){t===void 0&&(t={});const{open:a,onOpenChange:l,dataRef:s,events:c,elements:d}=e,{enabled:h=!0,delay:E=0,handleClose:A=null,mouseOnly:R=!1,restMs:T=0,move:S=!0}=t,p=jf(),I=hR(),b=xo(A),O=xo(E),v=xo(a),L=xo(T),P=N.useRef(),U=N.useRef(-1),V=N.useRef(),G=N.useRef(-1),H=N.useRef(!0),ue=N.useRef(!1),Ae=N.useRef(()=>{}),Ee=N.useRef(!1),oe=N.useCallback(()=>{var M;const W=(M=s.current.openEvent)==null?void 0:M.type;return(W==null?void 0:W.includes("mouse"))&&W!=="mousedown"},[s]);N.useEffect(()=>{if(!h)return;function M(W){let{open:ie}=W;ie||(ya(U),ya(G),H.current=!0,Ee.current=!1)}return c.on("openchange",M),()=>{c.off("openchange",M)}},[h,c]),N.useEffect(()=>{if(!h||!b.current||!a)return;function M(ie){oe()&&l(!1,ie,"hover")}const W=Xn(d.floating).documentElement;return W.addEventListener("mouseleave",M),()=>{W.removeEventListener("mouseleave",M)}},[d.floating,a,l,h,b,oe]);const Te=N.useCallback(function(M,W,ie){W===void 0&&(W=!0),ie===void 0&&(ie="hover");const y=Bd(O.current,"close",P.current);y&&!V.current?(ya(U),U.current=window.setTimeout(()=>l(!1,M,ie),y)):W&&(ya(U),l(!1,M,ie))},[O,l]),Se=la(()=>{Ae.current(),V.current=void 0}),ne=la(()=>{if(ue.current){const M=Xn(d.floating).body;M.style.pointerEvents="",M.removeAttribute(N_),ue.current=!1}}),ae=la(()=>s.current.openEvent?["click","mousedown"].includes(s.current.openEvent.type):!1);N.useEffect(()=>{if(!h)return;function M(Z){if(ya(U),H.current=!1,R&&!Ir(P.current)||LA(L.current)>0&&!Bd(O.current,"open"))return;const Y=Bd(O.current,"open",P.current);Y?U.current=window.setTimeout(()=>{v.current||l(!0,Z,"hover")},Y):a||l(!0,Z,"hover")}function W(Z){if(ae()){ne();return}Ae.current();const Y=Xn(d.floating);if(ya(G),Ee.current=!1,b.current&&s.current.floatingContext){a||ya(U),V.current=b.current({...s.current.floatingContext,tree:p,x:Z.clientX,y:Z.clientY,onClose(){ne(),Se(),ae()||Te(Z,!0,"safe-polygon")}});const de=V.current;Y.addEventListener("mousemove",de),Ae.current=()=>{Y.removeEventListener("mousemove",de)};return}(P.current==="touch"?!Bn(d.floating,Z.relatedTarget):!0)&&Te(Z)}function ie(Z){ae()||s.current.floatingContext&&(b.current==null||b.current({...s.current.floatingContext,tree:p,x:Z.clientX,y:Z.clientY,onClose(){ne(),Se(),ae()||Te(Z)}})(Z))}function y(){ya(U)}function X(Z){ae()||Te(Z,!1)}if(Dt(d.domReference)){const Z=d.domReference,Y=d.floating;return a&&Z.addEventListener("mouseleave",ie),S&&Z.addEventListener("mousemove",M,{once:!0}),Z.addEventListener("mouseenter",M),Z.addEventListener("mouseleave",W),Y&&(Y.addEventListener("mouseleave",ie),Y.addEventListener("mouseenter",y),Y.addEventListener("mouseleave",X)),()=>{a&&Z.removeEventListener("mouseleave",ie),S&&Z.removeEventListener("mousemove",M),Z.removeEventListener("mouseenter",M),Z.removeEventListener("mouseleave",W),Y&&(Y.removeEventListener("mouseleave",ie),Y.removeEventListener("mouseenter",y),Y.removeEventListener("mouseleave",X))}}},[d,h,e,R,S,Te,Se,ne,l,a,v,p,O,b,s,ae,L]),vn(()=>{var M;if(h&&a&&(M=b.current)!=null&&M.__options.blockPointerEvents&&oe()){ue.current=!0;const ie=d.floating;if(Dt(d.domReference)&&ie){var W;const y=Xn(d.floating).body;y.setAttribute(N_,"");const X=d.domReference,Z=p==null||(W=p.nodesRef.current.find(Y=>Y.id===I))==null||(W=W.context)==null?void 0:W.elements.floating;return Z&&(Z.style.pointerEvents=""),y.style.pointerEvents="none",X.style.pointerEvents="auto",ie.style.pointerEvents="auto",()=>{y.style.pointerEvents="",X.style.pointerEvents="",ie.style.pointerEvents=""}}}},[h,a,I,d,p,b,oe]),vn(()=>{a||(P.current=void 0,Ee.current=!1,Se(),ne())},[a,Se,ne]),N.useEffect(()=>()=>{Se(),ya(U),ya(G),ne()},[h,d.domReference,Se,ne]);const w=N.useMemo(()=>{function M(W){P.current=W.pointerType}return{onPointerDown:M,onPointerEnter:M,onMouseMove(W){const{nativeEvent:ie}=W;function y(){!H.current&&!v.current&&l(!0,ie,"hover")}R&&!Ir(P.current)||a||LA(L.current)===0||Ee.current&&W.movementX**2+W.movementY**2<2||(ya(G),P.current==="touch"?y():(Ee.current=!0,G.current=window.setTimeout(y,LA(L.current))))}}},[R,l,a,v,L]);return N.useMemo(()=>h?{reference:w}:{},[h,w])}const eH=N.createContext({hasProvider:!1,timeoutMs:0,delayRef:{current:0},initialDelayRef:{current:0},timeoutIdRef:{current:-1},currentIdRef:{current:null},currentContextRef:{current:null}});function tH(e,t){t===void 0&&(t={});const{open:a,onOpenChange:l,floatingId:s}=e,{enabled:c=!0}=t,d=N.useContext(eH),{currentIdRef:h,delayRef:E,timeoutMs:A,initialDelayRef:R,currentContextRef:T,hasProvider:S,timeoutIdRef:p}=d,[I,b]=N.useState(!1);return vn(()=>{function O(){var v;b(!1),(v=T.current)==null||v.setIsInstantPhase(!1),h.current=null,T.current=null,E.current=R.current}if(c&&h.current&&!a&&h.current===s){if(b(!1),A)return p.current=window.setTimeout(O,A),()=>{clearTimeout(p.current)};O()}},[c,a,s,h,E,A,R,T,p]),vn(()=>{if(!c||!a)return;const O=T.current,v=h.current;T.current={onOpenChange:l,setIsInstantPhase:b},h.current=s,E.current={open:0,close:Bd(R.current,"close")},v!==null&&v!==s?(ya(p),b(!0),O==null||O.setIsInstantPhase(!0),O==null||O.onOpenChange(!1)):(b(!1),O==null||O.setIsInstantPhase(!1))},[c,a,s,l,h,E,A,R,T,p]),vn(()=>()=>{T.current=null},[T]),N.useMemo(()=>({hasProvider:S,delayRef:E,isInstantPhase:I}),[S,E,I])}let O_=0;function Zs(e,t){t===void 0&&(t={});const{preventScroll:a=!1,cancelPrevious:l=!0,sync:s=!1}=t;l&&cancelAnimationFrame(O_);const c=()=>e==null?void 0:e.focus({preventScroll:a});s?c():O_=requestAnimationFrame(c)}function HA(e,t){if(!e||!t)return!1;const a=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(a&&lf(a)){let l=t;for(;l;){if(e===l)return!0;l=l.parentNode||l.host}}return!1}function nH(e){return"composedPath"in e?e.composedPath()[0]:e.target}function aH(e){return(e==null?void 0:e.ownerDocument)||document}let Qs=new WeakMap,xd=new WeakSet,Ud={},xA=0;const iH=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,FC=e=>e&&(e.host||FC(e.parentNode)),lH=(e,t)=>t.map(a=>{if(e.contains(a))return a;const l=FC(a);return e.contains(l)?l:null}).filter(a=>a!=null);function oH(e,t,a,l){const s="data-floating-ui-inert",c=l?"inert":a?"aria-hidden":null,d=lH(t,e),h=new Set,E=new Set(d),A=[];Ud[s]||(Ud[s]=new WeakMap);const R=Ud[s];d.forEach(T),S(t),h.clear();function T(p){!p||h.has(p)||(h.add(p),p.parentNode&&T(p.parentNode))}function S(p){!p||E.has(p)||[].forEach.call(p.children,I=>{if(so(I)!=="script")if(h.has(I))S(I);else{const b=c?I.getAttribute(c):null,O=b!==null&&b!=="false",v=Qs.get(I)||0,L=c?v+1:v,P=(R.get(I)||0)+1;Qs.set(I,L),R.set(I,P),A.push(I),L===1&&O&&xd.add(I),P===1&&I.setAttribute(s,""),!O&&c&&I.setAttribute(c,c==="inert"?"":"true")}})}return xA++,()=>{A.forEach(p=>{const I=Qs.get(p)||0,b=c?I-1:I,O=(R.get(p)||0)-1;Qs.set(p,b),R.set(p,O),b||(!xd.has(p)&&c&&p.removeAttribute(c),xd.delete(p)),O||p.removeAttribute(s)}),xA--,xA||(Qs=new WeakMap,Qs=new WeakMap,xd=new WeakSet,Ud={})}}function b_(e,t,a){t===void 0&&(t=!1),a===void 0&&(a=!1);const l=aH(e[0]).body;return oH(e.concat(Array.from(l.querySelectorAll("[aria-live]"))),l,t,a)}const zf={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0},hf=N.forwardRef(function(t,a){const[l,s]=N.useState();vn(()=>{vC()&&s("button")},[]);const c={ref:a,tabIndex:0,role:l,"aria-hidden":l?void 0:!0,[es("focus-guard")]:"",style:zf};return u.jsx("span",{...t,...c})}),jC=N.createContext(null),y_=es("portal");function zC(e){e===void 0&&(e={});const{id:t,root:a}=e,l=fR(),s=YC(),[c,d]=N.useState(null),h=N.useRef(null);return vn(()=>()=>{c==null||c.remove(),queueMicrotask(()=>{h.current=null})},[c]),vn(()=>{if(!l||h.current)return;const E=t?document.getElementById(t):null;if(!E)return;const A=document.createElement("div");A.id=l,A.setAttribute(y_,""),E.appendChild(A),h.current=A,d(A)},[t,l]),vn(()=>{if(a===null||!l||h.current)return;let E=a||(s==null?void 0:s.portalNode);E&&!Dt(E)&&(E=E.current),E=E||document.body;let A=null;t&&(A=document.createElement("div"),A.id=t,E.appendChild(A));const R=document.createElement("div");R.id=l,R.setAttribute(y_,""),E=A||E,E.appendChild(R),h.current=R,d(R)},[t,a,l,s]),c}function sH(e){const{children:t,id:a,root:l,preserveTabOrder:s=!0}=e,c=zC({id:a,root:l}),[d,h]=N.useState(null),E=N.useRef(null),A=N.useRef(null),R=N.useRef(null),T=N.useRef(null),S=d==null?void 0:d.modal,p=d==null?void 0:d.open,I=!!d&&!d.modal&&d.open&&s&&!!(l||c);return N.useEffect(()=>{if(!c||!s||S)return;function b(O){c&&Kc(O)&&(O.type==="focusin"?f_:iL)(c)}return c.addEventListener("focusin",b,!0),c.addEventListener("focusout",b,!0),()=>{c.removeEventListener("focusin",b,!0),c.removeEventListener("focusout",b,!0)}},[c,s,S]),N.useEffect(()=>{c&&(p||f_(c))},[p,c]),u.jsxs(jC.Provider,{value:N.useMemo(()=>({preserveTabOrder:s,beforeOutsideRef:E,afterOutsideRef:A,beforeInsideRef:R,afterInsideRef:T,portalNode:c,setFocusManagerState:h}),[s,c]),children:[I&&c&&u.jsx(hf,{"data-type":"outside",ref:E,onFocus:b=>{if(Kc(b,c)){var O;(O=R.current)==null||O.focus()}else{const v=d?d.domReference:null,L=HC(v);L==null||L.focus()}}}),I&&c&&u.jsx("span",{"aria-owns":c.id,style:zf}),c&&hu.createPortal(t,c),I&&c&&u.jsx(hf,{"data-type":"outside",ref:A,onFocus:b=>{if(Kc(b,c)){var O;(O=T.current)==null||O.focus()}else{const v=d?d.domReference:null,L=LC(v);L==null||L.focus(),d!=null&&d.closeOnFocusOut&&(d==null||d.onOpenChange(!1,b.nativeEvent,"focus-out"))}}})]})}const YC=()=>N.useContext(jC);function v_(e){return N.useMemo(()=>t=>{e.forEach(a=>{a&&(a.current=t)})},e)}const rH=20;let Do=[];function cH(e){Do=Do.filter(t=>t.isConnected),e&&so(e)!=="body"&&(Do.push(e),Do.length>rH&&(Do=Do.slice(-20)))}function D_(){return Do.slice().reverse().find(e=>e.isConnected)}function uH(e){const t=Au();return bC(e,t)?e:Bf(e,t)[0]||e}function M_(e,t){var a;if(!t.current.includes("floating")&&!((a=e.getAttribute("role"))!=null&&a.includes("dialog")))return;const l=Au(),c=W1(e,l).filter(h=>{const E=h.getAttribute("data-tabindex")||"";return bC(h,l)||h.hasAttribute("data-tabindex")&&!E.startsWith("-")}),d=e.getAttribute("tabindex");t.current.includes("floating")||c.length===0?d!=="0"&&e.setAttribute("tabindex","0"):(d!=="-1"||e.hasAttribute("data-tabindex")&&e.getAttribute("data-tabindex")!=="-1")&&(e.setAttribute("tabindex","-1"),e.setAttribute("data-tabindex","-1"))}const dH=N.forwardRef(function(t,a){return u.jsx("button",{...t,type:"button",ref:a,tabIndex:-1,style:zf})});function fH(e){const{context:t,children:a,disabled:l=!1,order:s=["content"],guards:c=!0,initialFocus:d=0,returnFocus:h=!0,restoreFocus:E=!1,modal:A=!0,visuallyHiddenDismiss:R=!1,closeOnFocusOut:T=!0,outsideElementsInert:S=!1,getInsideElements:p=()=>[]}=e,{open:I,onOpenChange:b,events:O,dataRef:v,elements:{domReference:L,floating:P}}=t,U=la(()=>{var Ne;return(Ne=v.current.floatingContext)==null?void 0:Ne.nodeId}),V=la(p),G=typeof d=="number"&&d<0,H=u_(L)&&G,ue=iH(),Ae=ue?c:!0,Ee=!Ae||ue&&S,oe=xo(s),Te=xo(d),Se=xo(h),ne=jf(),ae=YC(),w=N.useRef(null),M=N.useRef(null),W=N.useRef(!1),ie=N.useRef(!1),y=N.useRef(-1),X=ae!=null,Z=dm(P),Y=la(function(Ne){return Ne===void 0&&(Ne=Z),Ne?Bf(Ne,Au()):[]}),le=la(Ne=>{const Ie=Y(Ne);return oe.current.map(_e=>L&&_e==="reference"?L:Z&&_e==="floating"?Z:Ie).filter(Boolean).flat()});N.useEffect(()=>{if(l||!A)return;function Ne(_e){if(_e.key==="Tab"){Bn(Z,Bl(Xn(Z)))&&Y().length===0&&!H&&vA(_e);const He=le(),et=Ei(_e);oe.current[0]==="reference"&&et===L&&(vA(_e),_e.shiftKey?Zs(He[He.length-1]):Zs(He[1])),oe.current[1]==="floating"&&et===Z&&_e.shiftKey&&(vA(_e),Zs(He[0]))}}const Ie=Xn(Z);return Ie.addEventListener("keydown",Ne),()=>{Ie.removeEventListener("keydown",Ne)}},[l,L,Z,A,oe,H,Y,le]),N.useEffect(()=>{if(l||!P)return;function Ne(Ie){const _e=Ei(Ie),et=Y().indexOf(_e);et!==-1&&(y.current=et)}return P.addEventListener("focusin",Ne),()=>{P.removeEventListener("focusin",Ne)}},[l,P,Y]),N.useEffect(()=>{if(l||!T)return;function Ne(){ie.current=!0,setTimeout(()=>{ie.current=!1})}function Ie(_e){const He=_e.relatedTarget,et=_e.currentTarget;queueMicrotask(()=>{const bt=U(),nt=!(Bn(L,He)||Bn(P,He)||Bn(He,P)||Bn(ae==null?void 0:ae.portalNode,He)||He!=null&&He.hasAttribute(es("focus-guard"))||ne&&(Vc(ne.nodesRef.current,bt).find(it=>{var Et,At;return Bn((Et=it.context)==null?void 0:Et.elements.floating,He)||Bn((At=it.context)==null?void 0:At.elements.domReference,He)})||d_(ne.nodesRef.current,bt).find(it=>{var Et,At,Wt;return[(Et=it.context)==null?void 0:Et.elements.floating,dm((At=it.context)==null?void 0:At.elements.floating)].includes(He)||((Wt=it.context)==null?void 0:Wt.elements.domReference)===He})));if(et===L&&Z&&M_(Z,oe),E&&nt&&Bl(Xn(Z))===Xn(Z).body){En(Z)&&Z.focus();const it=y.current,Et=Y(),At=Et[it]||Et[Et.length-1]||Z;En(At)&&At.focus()}(H||!A)&&He&&nt&&!ie.current&&He!==D_()&&(W.current=!0,b(!1,_e,"focus-out"))})}if(P&&En(L))return L.addEventListener("focusout",Ie),L.addEventListener("pointerdown",Ne),P.addEventListener("focusout",Ie),()=>{L.removeEventListener("focusout",Ie),L.removeEventListener("pointerdown",Ne),P.removeEventListener("focusout",Ie)}},[l,L,P,Z,A,ne,ae,b,T,E,Y,H,U,oe]);const de=N.useRef(null),re=N.useRef(null),Re=v_([de,ae==null?void 0:ae.beforeInsideRef]),he=v_([re,ae==null?void 0:ae.afterInsideRef]);N.useEffect(()=>{var Ne,Ie;if(l||!P)return;const _e=Array.from((ae==null||(Ne=ae.portalNode)==null?void 0:Ne.querySelectorAll("["+es("portal")+"]"))||[]),He=ne?d_(ne.nodesRef.current,U()):[],et=ne&&!A?He.map(Et=>{var At;return(At=Et.context)==null?void 0:At.elements.floating}):[],bt=(Ie=He.find(Et=>{var At;return u_(((At=Et.context)==null?void 0:At.elements.domReference)||null)}))==null||(Ie=Ie.context)==null?void 0:Ie.elements.domReference,nt=[P,bt,..._e,...et,...V(),w.current,M.current,de.current,re.current,ae==null?void 0:ae.beforeOutsideRef.current,ae==null?void 0:ae.afterOutsideRef.current,oe.current.includes("reference")||H?L:null].filter(Et=>Et!=null),it=A||H?b_(nt,!Ee,Ee):b_(nt);return()=>{it()}},[l,L,P,A,oe,ae,H,Ae,Ee,ne,U,V]),vn(()=>{if(l||!En(Z))return;const Ne=Xn(Z),Ie=Bl(Ne);queueMicrotask(()=>{const _e=le(Z),He=Te.current,et=(typeof He=="number"?_e[He]:He.current)||Z,bt=Bn(Z,Ie);!G&&!bt&&I&&Zs(et,{preventScroll:et===Z})})},[l,I,Z,G,le,Te]),vn(()=>{if(l||!Z)return;let Ne=!1;const Ie=Xn(Z),_e=Bl(Ie);cH(_e);function He(nt){let{reason:it,event:Et,nested:At}=nt;if(["hover","safe-polygon"].includes(it)&&Et.type==="mouseleave"&&(W.current=!0),it==="outside-press")if(At)W.current=!1,Ne=!0;else if(J1(Et)||eL(Et))W.current=!1;else{let Wt=!1;document.createElement("div").focus({get preventScroll(){return Wt=!0,!1}}),Wt?(W.current=!1,Ne=!0):W.current=!0}}O.on("openchange",He);const et=Ie.createElement("span");et.setAttribute("tabindex","-1"),et.setAttribute("aria-hidden","true"),Object.assign(et.style,zf),X&&L&&L.insertAdjacentElement("afterend",et);function bt(){if(typeof Se.current=="boolean"){const nt=L||D_();return nt&&nt.isConnected?nt:et}return Se.current.current||et}return()=>{O.off("openchange",He);const nt=Bl(Ie),it=Bn(P,nt)||ne&&Vc(ne.nodesRef.current,U()).some(At=>{var Wt;return Bn((Wt=At.context)==null?void 0:Wt.elements.floating,nt)}),Et=bt();queueMicrotask(()=>{const At=uH(Et);Se.current&&!W.current&&En(At)&&(!(At!==nt&&nt!==Ie.body)||it)&&At.focus({preventScroll:Ne}),et.remove()})}},[l,P,Z,Se,v,O,ne,X,L,U]),N.useEffect(()=>{queueMicrotask(()=>{W.current=!1})},[l]),vn(()=>{if(!l&&ae)return ae.setFocusManagerState({modal:A,closeOnFocusOut:T,open:I,onOpenChange:b,domReference:L}),()=>{ae.setFocusManagerState(null)}},[l,ae,A,I,b,T,L]),vn(()=>{l||Z&&M_(Z,oe)},[l,Z,oe]);function Oe(Ne){return l||!R||!A?null:u.jsx(dH,{ref:Ne==="start"?w:M,onClick:Ie=>b(!1,Ie.nativeEvent),children:typeof R=="string"?R:"Dismiss"})}const Be=!l&&Ae&&(A?!H:!0)&&(X||A);return u.jsxs(u.Fragment,{children:[Be&&u.jsx(hf,{"data-type":"inside",ref:Re,onFocus:Ne=>{if(A){const _e=le();Zs(s[0]==="reference"?_e[0]:_e[_e.length-1])}else if(ae!=null&&ae.preserveTabOrder&&ae.portalNode)if(W.current=!1,Kc(Ne,ae.portalNode)){const _e=LC(L);_e==null||_e.focus()}else{var Ie;(Ie=ae.beforeOutsideRef.current)==null||Ie.focus()}}}),!H&&Oe("start"),a,Oe("end"),Be&&u.jsx(hf,{"data-type":"inside",ref:he,onFocus:Ne=>{if(A)Zs(le()[0]);else if(ae!=null&&ae.preserveTabOrder&&ae.portalNode)if(T&&(W.current=!0),Kc(Ne,ae.portalNode)){const _e=HC(L);_e==null||_e.focus()}else{var Ie;(Ie=ae.afterOutsideRef.current)==null||Ie.focus()}}})]})}function L_(e){return En(e.target)&&e.target.tagName==="BUTTON"}function hH(e){return En(e.target)&&e.target.tagName==="A"}function H_(e){return Ff(e)}function EH(e,t){t===void 0&&(t={});const{open:a,onOpenChange:l,dataRef:s,elements:{domReference:c}}=e,{enabled:d=!0,event:h="click",toggle:E=!0,ignoreMouse:A=!1,keyboardHandlers:R=!0,stickIfOpen:T=!0}=t,S=N.useRef(),p=N.useRef(!1),I=N.useMemo(()=>({onPointerDown(b){S.current=b.pointerType},onMouseDown(b){const O=S.current;b.button===0&&h!=="click"&&(Ir(O,!0)&&A||(a&&E&&(!(s.current.openEvent&&T)||s.current.openEvent.type==="mousedown")?l(!1,b.nativeEvent,"click"):(b.preventDefault(),l(!0,b.nativeEvent,"click"))))},onClick(b){const O=S.current;if(h==="mousedown"&&S.current){S.current=void 0;return}Ir(O,!0)&&A||(a&&E&&(!(s.current.openEvent&&T)||s.current.openEvent.type==="click")?l(!1,b.nativeEvent,"click"):l(!0,b.nativeEvent,"click"))},onKeyDown(b){S.current=void 0,!(b.defaultPrevented||!R||L_(b))&&(b.key===" "&&!H_(c)&&(b.preventDefault(),p.current=!0),!hH(b)&&b.key==="Enter"&&l(!(a&&E),b.nativeEvent,"click"))},onKeyUp(b){b.defaultPrevented||!R||L_(b)||H_(c)||b.key===" "&&p.current&&(p.current=!1,l(!(a&&E),b.nativeEvent,"click"))}}),[s,c,h,A,R,l,a,T,E]);return N.useMemo(()=>d?{reference:I}:{},[d,I])}function AH(e,t){let a=null,l=null,s=!1;return{contextElement:e||void 0,getBoundingClientRect(){var c;const d=(e==null?void 0:e.getBoundingClientRect())||{width:0,height:0,x:0,y:0},h=t.axis==="x"||t.axis==="both",E=t.axis==="y"||t.axis==="both",A=["mouseenter","mousemove"].includes(((c=t.dataRef.current.openEvent)==null?void 0:c.type)||"")&&t.pointerType!=="touch";let R=d.width,T=d.height,S=d.x,p=d.y;return a==null&&t.x&&h&&(a=d.x-t.x),l==null&&t.y&&E&&(l=d.y-t.y),S-=a||0,p-=l||0,R=0,T=0,!s||A?(R=t.axis==="y"?d.width:0,T=t.axis==="x"?d.height:0,S=h&&t.x!=null?t.x:S,p=E&&t.y!=null?t.y:p):s&&!A&&(T=t.axis==="x"?d.height:T,R=t.axis==="y"?d.width:R),s=!0,{width:R,height:T,x:S,y:p,top:p,right:S+R,bottom:p+T,left:S}}}}function x_(e){return e!=null&&e.clientX!=null}function mH(e,t){t===void 0&&(t={});const{open:a,dataRef:l,elements:{floating:s,domReference:c},refs:d}=e,{enabled:h=!0,axis:E="both",x:A=null,y:R=null}=t,T=N.useRef(!1),S=N.useRef(null),[p,I]=N.useState(),[b,O]=N.useState([]),v=la((G,H)=>{T.current||l.current.openEvent&&!x_(l.current.openEvent)||d.setPositionReference(AH(c,{x:G,y:H,axis:E,dataRef:l,pointerType:p}))}),L=la(G=>{A!=null||R!=null||(a?S.current||O([]):v(G.clientX,G.clientY))}),P=Ir(p)?s:a,U=N.useCallback(()=>{if(!P||!h||A!=null||R!=null)return;const G=oa(s);function H(ue){const Ae=Ei(ue);Bn(s,Ae)?(G.removeEventListener("mousemove",H),S.current=null):v(ue.clientX,ue.clientY)}if(!l.current.openEvent||x_(l.current.openEvent)){G.addEventListener("mousemove",H);const ue=()=>{G.removeEventListener("mousemove",H),S.current=null};return S.current=ue,ue}d.setPositionReference(c)},[P,h,A,R,s,l,d,c,v]);N.useEffect(()=>U(),[U,b]),N.useEffect(()=>{h&&!s&&(T.current=!1)},[h,s]),N.useEffect(()=>{!h&&a&&(T.current=!0)},[h,a]),vn(()=>{h&&(A!=null||R!=null)&&(T.current=!1,v(A,R))},[h,A,R,v]);const V=N.useMemo(()=>{function G(H){let{pointerType:ue}=H;I(ue)}return{onPointerDown:G,onPointerEnter:G,onMouseMove:L,onMouseEnter:L}},[L]);return N.useMemo(()=>h?{reference:V}:{},[h,V])}const RH={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},TH={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},U_=e=>{var t,a;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(a=e==null?void 0:e.outsidePress)!=null?a:!0}};function VC(e,t){t===void 0&&(t={});const{open:a,onOpenChange:l,elements:s,dataRef:c}=e,{enabled:d=!0,escapeKey:h=!0,outsidePress:E=!0,outsidePressEvent:A="pointerdown",referencePress:R=!1,referencePressEvent:T="pointerdown",ancestorScroll:S=!1,bubbles:p,capture:I}=t,b=jf(),O=la(typeof E=="function"?E:()=>!1),v=typeof E=="function"?O:E,L=N.useRef(!1),P=N.useRef(!1),{escapeKey:U,outsidePress:V}=U_(p),{escapeKey:G,outsidePress:H}=U_(I),ue=N.useRef(!1),Ae=la(ae=>{var w;if(!a||!d||!h||ae.key!=="Escape"||ue.current)return;const M=(w=c.current.floatingContext)==null?void 0:w.nodeId,W=b?Vc(b.nodesRef.current,M):[];if(!U&&(ae.stopPropagation(),W.length>0)){let ie=!0;if(W.forEach(y=>{var X;if((X=y.context)!=null&&X.open&&!y.context.dataRef.current.__escapeKeyBubbles){ie=!1;return}}),!ie)return}l(!1,$1(ae)?ae.nativeEvent:ae,"escape-key")}),Ee=la(ae=>{var w;const M=()=>{var W;Ae(ae),(W=Ei(ae))==null||W.removeEventListener("keydown",M)};(w=Ei(ae))==null||w.addEventListener("keydown",M)}),oe=la(ae=>{var w;const M=L.current;L.current=!1;const W=P.current;if(P.current=!1,A==="click"&&W||M||typeof v=="function"&&!v(ae))return;const ie=Ei(ae),y="["+es("inert")+"]",X=Xn(s.floating).querySelectorAll(y);let Z=Dt(ie)?ie:null;for(;Z&&!ol(Z);){const re=rl(Z);if(ol(re)||!Dt(re))break;Z=re}if(X.length&&Dt(ie)&&!Z1(ie)&&!Bn(ie,s.floating)&&Array.from(X).every(re=>!Bn(Z,re)))return;if(En(ie)&&ne){const re=ol(ie),Re=ai(ie),he=/auto|scroll/,Oe=re||he.test(Re.overflowX),Be=re||he.test(Re.overflowY),Ne=Oe&&ie.clientWidth>0&&ie.scrollWidth>ie.clientWidth,Ie=Be&&ie.clientHeight>0&&ie.scrollHeight>ie.clientHeight,_e=Re.direction==="rtl",He=Ie&&(_e?ae.offsetX<=ie.offsetWidth-ie.clientWidth:ae.offsetX>ie.clientWidth),et=Ne&&ae.offsetY>ie.clientHeight;if(He||et)return}const Y=(w=c.current.floatingContext)==null?void 0:w.nodeId,le=b&&Vc(b.nodesRef.current,Y).some(re=>{var Re;return yA(ae,(Re=re.context)==null?void 0:Re.elements.floating)});if(yA(ae,s.floating)||yA(ae,s.domReference)||le)return;const de=b?Vc(b.nodesRef.current,Y):[];if(de.length>0){let re=!0;if(de.forEach(Re=>{var he;if((he=Re.context)!=null&&he.open&&!Re.context.dataRef.current.__outsidePressBubbles){re=!1;return}}),!re)return}l(!1,ae,"outside-press")}),Te=la(ae=>{var w;const M=()=>{var W;oe(ae),(W=Ei(ae))==null||W.removeEventListener(A,M)};(w=Ei(ae))==null||w.addEventListener(A,M)});N.useEffect(()=>{if(!a||!d)return;c.current.__escapeKeyBubbles=U,c.current.__outsidePressBubbles=V;let ae=-1;function w(X){l(!1,X,"ancestor-scroll")}function M(){window.clearTimeout(ae),ue.current=!0}function W(){ae=window.setTimeout(()=>{ue.current=!1},Gf()?5:0)}const ie=Xn(s.floating);h&&(ie.addEventListener("keydown",G?Ee:Ae,G),ie.addEventListener("compositionstart",M),ie.addEventListener("compositionend",W)),v&&ie.addEventListener(A,H?Te:oe,H);let y=[];return S&&(Dt(s.domReference)&&(y=ql(s.domReference)),Dt(s.floating)&&(y=y.concat(ql(s.floating))),!Dt(s.reference)&&s.reference&&s.reference.contextElement&&(y=y.concat(ql(s.reference.contextElement)))),y=y.filter(X=>{var Z;return X!==((Z=ie.defaultView)==null?void 0:Z.visualViewport)}),y.forEach(X=>{X.addEventListener("scroll",w,{passive:!0})}),()=>{h&&(ie.removeEventListener("keydown",G?Ee:Ae,G),ie.removeEventListener("compositionstart",M),ie.removeEventListener("compositionend",W)),v&&ie.removeEventListener(A,H?Te:oe,H),y.forEach(X=>{X.removeEventListener("scroll",w)}),window.clearTimeout(ae)}},[c,s,h,v,A,a,l,S,d,U,V,Ae,G,Ee,oe,H,Te]),N.useEffect(()=>{L.current=!1},[v,A]);const Se=N.useMemo(()=>({onKeyDown:Ae,...R&&{[RH[T]]:ae=>{l(!1,ae.nativeEvent,"reference-press")},...T!=="click"&&{onClick(ae){l(!1,ae.nativeEvent,"reference-press")}}}}),[Ae,l,R,T]),ne=N.useMemo(()=>({onKeyDown:Ae,onMouseDown(){P.current=!0},onMouseUp(){P.current=!0},[TH[A]]:()=>{L.current=!0}}),[Ae,A]);return N.useMemo(()=>d?{reference:Se,floating:ne}:{},[d,Se,ne])}function ER(e){const{open:t=!1,onOpenChange:a,elements:l}=e,s=fR(),c=N.useRef({}),[d]=N.useState(()=>ZL()),h=hR()!=null,[E,A]=N.useState(l.reference),R=la((p,I,b)=>{c.current.openEvent=p?I:void 0,d.emit("openchange",{open:p,event:I,reason:b,nested:h}),a==null||a(p,I,b)}),T=N.useMemo(()=>({setPositionReference:A}),[]),S=N.useMemo(()=>({reference:E||l.reference||null,floating:l.floating||null,domReference:l.reference}),[E,l.reference,l.floating]);return N.useMemo(()=>({dataRef:c,open:t,onOpenChange:R,elements:S,events:d,floatingId:s,refs:T}),[t,R,S,d,s,T])}function SH(e){e===void 0&&(e={});const{nodeId:t}=e,a=ER({...e,elements:{reference:null,floating:null,...e.elements}}),l=e.rootContext||a,s=l.elements,[c,d]=N.useState(null),[h,E]=N.useState(null),R=(s==null?void 0:s.domReference)||c,T=N.useRef(null),S=jf();vn(()=>{R&&(T.current=R)},[R]);const p=kL({...e,elements:{...s,...h&&{reference:h}}}),I=N.useCallback(P=>{const U=Dt(P)?{getBoundingClientRect:()=>P.getBoundingClientRect(),getClientRects:()=>P.getClientRects(),contextElement:P}:P;E(U),p.refs.setReference(U)},[p.refs]),b=N.useCallback(P=>{(Dt(P)||P===null)&&(T.current=P,d(P)),(Dt(p.refs.reference.current)||p.refs.reference.current===null||P!==null&&!Dt(P))&&p.refs.setReference(P)},[p.refs]),O=N.useMemo(()=>({...p.refs,setReference:b,setPositionReference:I,domReference:T}),[p.refs,b,I]),v=N.useMemo(()=>({...p.elements,domReference:R}),[p.elements,R]),L=N.useMemo(()=>({...p,...l,refs:O,elements:v,nodeId:t}),[p,O,v,t,l]);return vn(()=>{l.dataRef.current.floatingContext=L;const P=S==null?void 0:S.nodesRef.current.find(U=>U.id===t);P&&(P.context=L)}),N.useMemo(()=>({...p,context:L,refs:O,elements:v}),[p,O,v,L])}function UA(){return q1()&&vC()}function gH(e,t){t===void 0&&(t={});const{open:a,onOpenChange:l,events:s,dataRef:c,elements:d}=e,{enabled:h=!0,visibleOnly:E=!0}=t,A=N.useRef(!1),R=N.useRef(-1),T=N.useRef(!0);N.useEffect(()=>{if(!h)return;const p=oa(d.domReference);function I(){!a&&En(d.domReference)&&d.domReference===Bl(Xn(d.domReference))&&(A.current=!0)}function b(){T.current=!0}function O(){T.current=!1}return p.addEventListener("blur",I),UA()&&(p.addEventListener("keydown",b,!0),p.addEventListener("pointerdown",O,!0)),()=>{p.removeEventListener("blur",I),UA()&&(p.removeEventListener("keydown",b,!0),p.removeEventListener("pointerdown",O,!0))}},[d.domReference,a,h]),N.useEffect(()=>{if(!h)return;function p(I){let{reason:b}=I;(b==="reference-press"||b==="escape-key")&&(A.current=!0)}return s.on("openchange",p),()=>{s.off("openchange",p)}},[s,h]),N.useEffect(()=>()=>{ya(R)},[]);const S=N.useMemo(()=>({onMouseLeave(){A.current=!1},onFocus(p){if(A.current)return;const I=Ei(p.nativeEvent);if(E&&Dt(I)){if(UA()&&!p.relatedTarget){if(!T.current&&!Ff(I))return}else if(!Q1(I))return}l(!0,p.nativeEvent,"focus")},onBlur(p){A.current=!1;const I=p.relatedTarget,b=p.nativeEvent,O=Dt(I)&&I.hasAttribute(es("focus-guard"))&&I.getAttribute("data-type")==="outside";R.current=window.setTimeout(()=>{var v;const L=Bl(d.domReference?d.domReference.ownerDocument:document);!I&&L===d.domReference||Bn((v=c.current.floatingContext)==null?void 0:v.refs.floating.current,L)||Bn(d.domReference,L)||O||l(!1,b,"focus")})}}),[c,d.domReference,l,E]);return N.useMemo(()=>h?{reference:S}:{},[h,S])}function kA(e,t,a){const l=new Map,s=a==="item";let c=e;if(s&&e){const{[p_]:d,[__]:h,...E}=e;c=E}return{...a==="floating"&&{tabIndex:-1,[VL]:""},...c,...t.map(d=>{const h=d?d[a]:null;return typeof h=="function"?e?h(e):null:h}).concat(e).reduce((d,h)=>(h&&Object.entries(h).forEach(E=>{let[A,R]=E;if(!(s&&[p_,__].includes(A)))if(A.indexOf("on")===0){if(l.has(A)||l.set(A,[]),typeof R=="function"){var T;(T=l.get(A))==null||T.push(R),d[A]=function(){for(var S,p=arguments.length,I=new Array(p),b=0;b<p;b++)I[b]=arguments[b];return(S=l.get(A))==null?void 0:S.map(O=>O(...I)).find(O=>O!==void 0)}}}else d[A]=R}),d),{})}}function KC(e){e===void 0&&(e=[]);const t=e.map(h=>h==null?void 0:h.reference),a=e.map(h=>h==null?void 0:h.floating),l=e.map(h=>h==null?void 0:h.item),s=N.useCallback(h=>kA(h,e,"reference"),t),c=N.useCallback(h=>kA(h,e,"floating"),a),d=N.useCallback(h=>kA(h,e,"item"),l);return N.useMemo(()=>({getReferenceProps:s,getFloatingProps:c,getItemProps:d}),[s,c,d])}const pH=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function _H(e,t){var a,l;t===void 0&&(t={});const{open:s,elements:c,floatingId:d}=e,{enabled:h=!0,role:E="dialog"}=t,A=fR(),R=((a=c.domReference)==null?void 0:a.id)||A,T=N.useMemo(()=>{var L;return((L=dm(c.floating))==null?void 0:L.id)||d},[c.floating,d]),S=(l=pH.get(E))!=null?l:E,I=hR()!=null,b=N.useMemo(()=>S==="tooltip"||E==="label"?{["aria-"+(E==="label"?"labelledby":"describedby")]:s?T:void 0}:{"aria-expanded":s?"true":"false","aria-haspopup":S==="alertdialog"?"dialog":S,"aria-controls":s?T:void 0,...S==="listbox"&&{role:"combobox"},...S==="menu"&&{id:R},...S==="menu"&&I&&{role:"menuitem"},...E==="select"&&{"aria-autocomplete":"none"},...E==="combobox"&&{"aria-autocomplete":"list"}},[S,T,I,s,R,E]),O=N.useMemo(()=>{const L={id:T,...S&&{role:S}};return S==="tooltip"||E==="label"?L:{...L,...S==="menu"&&{"aria-labelledby":R}}},[S,T,R,E]),v=N.useCallback(L=>{let{active:P,selected:U}=L;const V={role:"option",...P&&{id:T+"-fui-option"}};switch(E){case"select":return{...V,"aria-selected":P&&U};case"combobox":return{...V,"aria-selected":U}}return{}},[T,E]);return N.useMemo(()=>h?{reference:b,floating:O,item:v}:{},[h,b,O,v])}function IH(e,t,a){a===void 0&&(a=!0);let l=e.filter(c=>{var d;return c.parentId===t&&((d=c.context)==null?void 0:d.open)}),s=l;for(;s.length;)s=a?e.filter(c=>{var d;return(d=s)==null?void 0:d.some(h=>{var E;return c.parentId===h.id&&((E=c.context)==null?void 0:E.open)})}):e,l=l.concat(s);return l}function k_(e,t){const[a,l]=e;let s=!1;const c=t.length;for(let d=0,h=c-1;d<c;h=d++){const[E,A]=t[d]||[0,0],[R,T]=t[h]||[0,0];A>=l!=T>=l&&a<=(R-E)*(l-A)/(T-A)+E&&(s=!s)}return s}function CH(e,t){return e[0]>=t.x&&e[0]<=t.x+t.width&&e[1]>=t.y&&e[1]<=t.y+t.height}function NH(e){e===void 0&&(e={});const{buffer:t=.5,blockPointerEvents:a=!1,requireIntent:l=!0}=e;let s,c=!1,d=null,h=null,E=performance.now();function A(T,S){const p=performance.now(),I=p-E;if(d===null||h===null||I===0)return d=T,h=S,E=p,null;const b=T-d,O=S-h,L=Math.sqrt(b*b+O*O)/I;return d=T,h=S,E=p,L}const R=T=>{let{x:S,y:p,placement:I,elements:b,onClose:O,nodeId:v,tree:L}=T;return function(U){function V(){clearTimeout(s),O()}if(clearTimeout(s),!b.domReference||!b.floating||I==null||S==null||p==null)return;const{clientX:G,clientY:H}=U,ue=[G,H],Ae=nH(U),Ee=U.type==="mouseleave",oe=HA(b.floating,Ae),Te=HA(b.domReference,Ae),Se=b.domReference.getBoundingClientRect(),ne=b.floating.getBoundingClientRect(),ae=I.split("-")[0],w=S>ne.right-ne.width/2,M=p>ne.bottom-ne.height/2,W=CH(ue,Se),ie=ne.width>Se.width,y=ne.height>Se.height,X=(ie?Se:ne).left,Z=(ie?Se:ne).right,Y=(y?Se:ne).top,le=(y?Se:ne).bottom;if(oe&&(c=!0,!Ee))return;if(Te&&(c=!1),Te&&!Ee){c=!0;return}if(Ee&&Dt(U.relatedTarget)&&HA(b.floating,U.relatedTarget)||L&&IH(L.nodesRef.current,v).some(Re=>{let{context:he}=Re;return he==null?void 0:he.open}))return;if(ae==="top"&&p>=Se.bottom-1||ae==="bottom"&&p<=Se.top+1||ae==="left"&&S>=Se.right-1||ae==="right"&&S<=Se.left+1)return V();let de=[];switch(ae){case"top":de=[[X,Se.top+1],[X,ne.bottom-1],[Z,ne.bottom-1],[Z,Se.top+1]];break;case"bottom":de=[[X,ne.top+1],[X,Se.bottom-1],[Z,Se.bottom-1],[Z,ne.top+1]];break;case"left":de=[[ne.right-1,le],[ne.right-1,Y],[Se.left+1,Y],[Se.left+1,le]];break;case"right":de=[[Se.right-1,le],[Se.right-1,Y],[ne.left+1,Y],[ne.left+1,le]];break}function re(Re){let[he,Oe]=Re;switch(ae){case"top":{const Be=[ie?he+t/2:w?he+t*4:he-t*4,Oe+t+1],Ne=[ie?he-t/2:w?he+t*4:he-t*4,Oe+t+1],Ie=[[ne.left,w||ie?ne.bottom-t:ne.top],[ne.right,w?ie?ne.bottom-t:ne.top:ne.bottom-t]];return[Be,Ne,...Ie]}case"bottom":{const Be=[ie?he+t/2:w?he+t*4:he-t*4,Oe-t],Ne=[ie?he-t/2:w?he+t*4:he-t*4,Oe-t],Ie=[[ne.left,w||ie?ne.top+t:ne.bottom],[ne.right,w?ie?ne.top+t:ne.bottom:ne.top+t]];return[Be,Ne,...Ie]}case"left":{const Be=[he+t+1,y?Oe+t/2:M?Oe+t*4:Oe-t*4],Ne=[he+t+1,y?Oe-t/2:M?Oe+t*4:Oe-t*4];return[...[[M||y?ne.right-t:ne.left,ne.top],[M?y?ne.right-t:ne.left:ne.right-t,ne.bottom]],Be,Ne]}case"right":{const Be=[he-t,y?Oe+t/2:M?Oe+t*4:Oe-t*4],Ne=[he-t,y?Oe-t/2:M?Oe+t*4:Oe-t*4],Ie=[[M||y?ne.left+t:ne.right,ne.top],[M?y?ne.left+t:ne.right:ne.left+t,ne.bottom]];return[Be,Ne,...Ie]}}}if(!k_([G,H],de)){if(c&&!W)return V();if(!Ee&&l){const Re=A(U.clientX,U.clientY);if(Re!==null&&Re<.1)return V()}k_([G,H],re([S,p]))?!c&&l&&(s=window.setTimeout(V,40)):V()}}};return R.__options={blockPointerEvents:a},R}function WC({controlled:e,default:t,name:a,state:l="value"}){const{current:s}=N.useRef(e!==void 0),[c,d]=N.useState(t),h=s?e:c,E=N.useCallback(A=>{s||d(A)},[]);return[h,E]}const vi=typeof window<"u"?N.useLayoutEffect:N.useEffect;function qC(e){const[t,a]=N.useState(e?"idle":void 0),[l,s]=N.useState(e);return e&&!l&&(s(!0),a("starting")),!e&&l&&t!=="ending"&&a("ending"),!e&&!l&&t==="ending"&&a(void 0),vi(()=>{if(!e)return;e&&l&&t!=="idle"&&a("starting");const c=requestAnimationFrame(()=>{a("idle")});return()=>{cancelAnimationFrame(c)}},[e,l,a,t]),N.useMemo(()=>({mounted:l,setMounted:s,transitionStatus:t}),[l,t])}function ii(e){const t=N.useRef(e);return vi(()=>{t.current=e}),N.useCallback((...a)=>{var l;return(l=t.current)==null?void 0:l.call(t,...a)},[])}const XC=600;function ZC(e){if(e)return{click:"click",hover:"hover",focus:"focus","focus-out":"focus-out","escape-key":"escape-key","outside-press":"outside-press","reference-press":"trigger-press","safe-polygon":"hover","ancestor-scroll":void 0,"list-navigation":void 0}[e]}function OH(e,t=!1){const a=N.useRef(-1),l=N.useRef(-1),s=ii(()=>{cancelAnimationFrame(a.current),clearTimeout(l.current)});return N.useEffect(()=>s,[s]),ii((c,d=null)=>{s();const h=e.current;h&&(typeof h.getAnimations!="function"||globalThis.BASE_UI_ANIMATIONS_DISABLED?c():a.current=requestAnimationFrame(()=>{function E(){h&&Promise.allSettled(h.getAnimations().map(A=>A.finished)).then(()=>{d!=null&&d.aborted||hu.flushSync(c)})}t?l.current=window.setTimeout(E):E()}))})}function fm(e){const t=N.useRef(e);return vi(()=>{t.current=e}),t}function Yf(e){const{enabled:t=!0,open:a,ref:l,onComplete:s}=e,c=fm(a),d=ii(s),h=OH(l,a);N.useEffect(()=>{t&&h(()=>{a===c.current&&d()})},[t,a,d,h,c])}const bH=N.createContext(void 0);function yH(){return N.useContext(bH)}function vH(e){const{open:t,onOpenChange:a,defaultOpen:l=!1,hoverable:s=!0,trackCursorAxis:c="none",delay:d,closeDelay:h,onOpenChangeComplete:E,disabled:A}=e,R=d??XC,T=h??0,[S,p]=N.useState(null),[I,b]=N.useState(null),[O,v]=N.useState(),L=N.useRef(null),[P,U]=WC({controlled:t,default:l,name:"Tooltip",state:"open"}),V=ii(a),G=N.useCallback((Y,le,de)=>{V(Y,le,de),U(Y)},[V,U]);P&&A&&G(!1,void 0,void 0);const{mounted:H,setMounted:ue,transitionStatus:Ae}=qC(P),Ee=ii(()=>{ue(!1),E==null||E(!1)});Yf({enabled:!e.actionsRef,open:P,ref:L,onComplete(){P||Ee()}}),N.useImperativeHandle(e.actionsRef,()=>({unmount:Ee}),[Ee]);const oe=ER({elements:{reference:S,floating:I},open:P,onOpenChange(Y,le,de){const re=de==="hover"||de==="safe-polygon",Re=Y&&de==="focus",he=!Y&&(de==="reference-press"||de==="escape-key");function Oe(){G(Y,le,ZC(de))}re?hu.flushSync(Oe):Oe(),Re||he?v(Re?"focus":"dismiss"):de==="hover"&&v(void 0)}}),Te=yH(),{delayRef:Se,isInstantPhase:ne,hasProvider:ae}=tH(oe),w=ne?"delay":O,M=JL(oe,{enabled:!A,mouseOnly:!0,move:!1,handleClose:s&&c!=="both"?NH():null,restMs(){const Y=Te==null?void 0:Te.delay,le=typeof Se.current=="object"?Se.current.open:void 0;let de=R;return ae&&(le!==0?de=d??Y??R:de=0),de},delay(){const Y=typeof Se.current=="object"?Se.current.close:void 0;let le=T;return h==null&&ae&&(le=Y),{close:le}}}),W=gH(oe,{enabled:!A}),ie=VC(oe,{enabled:!A,referencePress:!0}),y=mH(oe,{enabled:!A&&c!=="none",axis:c==="none"?void 0:c}),{getReferenceProps:X,getFloatingProps:Z}=KC([M,W,ie,y]);return N.useMemo(()=>({open:P,setOpen:G,mounted:H,setMounted:ue,setTriggerElement:p,positionerElement:I,setPositionerElement:b,popupRef:L,getTriggerProps:X,getPopupProps:Z,floatingRootContext:oe,instantType:w,transitionStatus:Ae,onOpenChangeComplete:E}),[H,P,ue,I,G,X,Z,oe,w,Ae,E])}const QC=function(t){const{disabled:a=!1,defaultOpen:l=!1,onOpenChange:s,open:c,delay:d,closeDelay:h,hoverable:E=!0,trackCursorAxis:A="none",actionsRef:R,onOpenChangeComplete:T}=t,S=d??XC,p=h??0,I=vH({...t,defaultOpen:l,onOpenChange:s,open:c,hoverable:E,trackCursorAxis:A,delay:d,closeDelay:h,actionsRef:R,onOpenChangeComplete:T,disabled:a}),b=N.useMemo(()=>({...I,delay:S,closeDelay:p,trackCursorAxis:A}),[I,S,p,A]);return u.jsx(RC.Provider,{value:b,children:t.children})};let Ef=function(e){return e.startingStyle="data-starting-style",e.endingStyle="data-ending-style",e}({});const DH={[Ef.startingStyle]:""},MH={[Ef.endingStyle]:""},AR={transitionStatus(e){return e==="starting"?DH:e==="ending"?MH:null}};let Uo=function(e){return e.open="data-open",e.closed="data-closed",e[e.startingStyle=Ef.startingStyle]="startingStyle",e[e.endingStyle=Ef.endingStyle]="endingStyle",e.anchorHidden="data-anchor-hidden",e}({}),LH=function(e){return e.popupOpen="data-popup-open",e.pressed="data-pressed",e}({});const HH={[LH.popupOpen]:""},xH={[Uo.open]:""},UH={[Uo.closed]:""},kH={[Uo.anchorHidden]:""},$C={open(e){return e?HH:null}},Vf={open(e){return e?xH:UH},anchorHidden(e){return e?kH:null}};function PH(e,t){let a={};return Object.entries(e).forEach(([l,s])=>{if(t!=null&&t.hasOwnProperty(l)){const c=t[l](s);c!=null&&(a={...a,...c});return}s===!0?a[`data-${l.toLowerCase()}`]="":s&&(a[`data-${l.toLowerCase()}`]=s.toString())}),a}function GH(e,t){return typeof e=="function"?e(t):e}function hl(...e){if(e.length===0)return{};if(e.length===1)return P_(e[0],{});let t=P_(e[0],{});for(let a=1;a<e.length;a+=1){const l=e[a];l&&(JC(l)?t=l(t):t=wH(t,l))}return t??{}}function P_(e,t){return JC(e)?e(t):e??{}}function wH(e,t){return t?e?Object.entries(t).reduce((a,[l,s])=>(BH(l,s)?a[l]=FH(e[l],s):l==="style"?a[l]=jH(e.style,s):l==="className"?a[l]=zH(e.className,s):a[l]=s,a),{...e}):t:e||{}}function BH(e,t){const a=e.charCodeAt(2);return e[0]==="o"&&e[1]==="n"&&a>=65&&a<=90&&typeof t=="function"}function JC(e){return typeof e=="function"}function FH(e,t){return a=>{if(YH(a)){const s=a;hm(s);const c=t(s);return s.baseUIHandlerPrevented||e==null||e(s),c}const l=t(a);return e==null||e(a),l}}function hm(e){return e.preventBaseUIHandler=()=>{e.baseUIHandlerPrevented=!0},e}function jH(e,t){if(t||e)return{...e,...t}}function zH(e,t){return t?e?t+" "+e:t:e}function YH(e){return e!=null&&typeof e=="object"&&"nativeEvent"in e}function VH(e,t,a){return typeof e=="function"?e(t,a):N.cloneElement(e,{...hl(t,e.props),ref:t.ref})}function Dr(...e){const t=N.useRef(void 0),a=N.useCallback(l=>{const s=e.map(c=>{if(c==null)return null;if(typeof c=="function"){const d=c,h=d(l);return typeof h=="function"?h:()=>{d(null)}}return c.current=l,()=>{c.current=null}});return()=>{s.forEach(c=>c==null?void 0:c())}},e);return N.useMemo(()=>e.every(l=>l==null)?null:l=>{t.current&&(t.current(),t.current=void 0),l!=null&&(t.current=a(l))},e)}const KH=parseInt(N.version,10);function eN(e){return KH>=e}function WH(e,...t){let a;return typeof e!="function"?a=eN(19)?e.props.ref:e.ref:a=null,Dr(a,...t)}function qH(e){return function(a){return e==="button"?u.jsx("button",{type:"button",...a}):e==="img"?u.jsx("img",{alt:"",...a}):u.jsx(e,{...a})}}const G_={};function Kf(e,t,a={}){const{className:l,render:s}=t,{propGetter:c=v=>v,state:d=G_,ref:h,props:E,customStyleHookMapping:A,styleHooks:R=!0}=a,T=s||(typeof e=="string"?qH(e):e),S=GH(l,d),p=N.useMemo(()=>R?PH(d,A):G_,[d,A,R]),I=c({...p,...Array.isArray(E)?hl(...E):E});let b=[];h!==void 0&&(b=Array.isArray(h)?h:[h]);const O={...I,ref:WH(T,I.ref,...b)};return S!==void 0&&(O.className=S),()=>VH(T,O,d)}const XH=N.forwardRef(function(t,a){const{className:l,render:s,...c}=t,{open:d,setTriggerElement:h,getTriggerProps:E}=fu(),A=N.useMemo(()=>({open:d}),[d]);return Kf("button",t,{state:A,ref:[a,h],props:[E,c],customStyleHookMapping:$C})()});bA.oneOfType([bA.func,bA.object]);const tN=N.createContext(void 0);function ZH(){const e=N.useContext(tN);if(e===void 0)throw new Error("Base UI: <Tooltip.Portal> is missing.");return e}function QH(e){const t=zC({root:e.root});return t&&hu.createPortal(e.children,t)}function nN(e){const{children:t,keepMounted:a=!1,container:l}=e,{mounted:s}=fu();return s||a?u.jsx(tN.Provider,{value:a,children:u.jsx(QH,{root:l,children:t})}):null}const aN=N.createContext(void 0);function $H(){const e=N.useContext(aN);if(e===void 0)throw new Error("Base UI: TooltipPositionerContext is missing. TooltipPositioner parts must be placed within <Tooltip.Positioner>.");return e}const JH=N.createContext(void 0);function ex(e=!0){const t=N.useContext(JH);if(t===void 0&&!e)throw new Error("Base UI: DirectionContext is missing.");return(t==null?void 0:t.direction)??"ltr"}function w_(e,t,a){const l=e==="inline-start"||e==="inline-end";return{top:"top",right:l?a?"inline-start":"inline-end":"right",bottom:"bottom",left:l?a?"inline-end":"inline-start":"left"}[t]}function tx(e){var Be,Ne;const{anchor:t,positionMethod:a="absolute",side:l="bottom",sideOffset:s=0,align:c="center",alignOffset:d=0,collisionBoundary:h,collisionPadding:E=5,sticky:A=!1,arrowPadding:R=5,keepMounted:T=!1,floatingRootContext:S,mounted:p,trackAnchor:I=!0,nodeId:b}=e,v=ex()==="rtl",L={top:"top",right:"right",bottom:"bottom",left:"left","inline-end":v?"left":"right","inline-start":v?"right":"left"}[l],P=c==="center"?L:`${L}-${c}`,U={boundary:h==="clipping-ancestors"?"clippingAncestors":h,padding:E},V=N.useRef(null),G=fm(s),H=fm(d),Ee=[GL(({rects:Ie,placement:_e})=>{const He={side:w_(l,ni(_e),v),align:eo(_e)||"center",anchor:{width:Ie.reference.width,height:Ie.reference.height},positioner:{width:Ie.floating.width,height:Ie.floating.height}},et=typeof G.current=="function"?G.current(He):G.current,bt=typeof H.current=="function"?H.current(He):H.current;return{mainAxis:et,crossAxis:bt,alignmentAxis:bt}},[typeof s!="function"?s:0,typeof d!="function"?d:0,v,l])],oe=FL(U),Te=wL({...U,crossAxis:A,limiter:A?void 0:BL(()=>{if(!V.current)return{};const{height:Ie}=V.current.getBoundingClientRect();return{offset:Ie/2+(typeof E=="number"?E:0)}})});c!=="center"?Ee.push(oe,Te):Ee.push(Te,oe),Ee.push(jL({...U,apply({elements:{floating:Ie},rects:{reference:_e},availableWidth:He,availableHeight:et}){Object.entries({"--available-width":`${He}px`,"--available-height":`${et}px`,"--anchor-width":`${_e.width}px`,"--anchor-height":`${_e.height}px`}).forEach(([bt,nt])=>{Ie.style.setProperty(bt,nt)})}}),YL(()=>({element:V.current||document.createElement("div"),padding:R}),[R]),zL(),{name:"transformOrigin",fn({elements:Ie,middlewareData:_e,placement:He}){var Tu,Su;const et=ni(He),bt=V.current,nt=((Tu=_e.arrow)==null?void 0:Tu.x)??0,it=((Su=_e.arrow)==null?void 0:Su.y)??0,Et=(bt==null?void 0:bt.clientWidth)??0,At=(bt==null?void 0:bt.clientHeight)??0,Wt=nt+Et/2,co=it+At/2,us={top:`${Wt}px calc(100% + ${s}px)`,bottom:`${Wt}px ${-s}px`,left:`calc(100% + ${s}px) ${co}px`,right:`${-s}px ${co}px`}[et];return Ie.floating.style.setProperty("--transform-origin",us),{}}});let Se=S;!p&&S&&(Se={...S,elements:{reference:null,floating:null,domReference:null}});const ne=N.useMemo(()=>({elementResize:I&&typeof ResizeObserver<"u",layoutShift:I&&typeof IntersectionObserver<"u"}),[I]),{refs:ae,elements:w,floatingStyles:M,middlewareData:W,update:ie,placement:y,context:X,isPositioned:Z}=SH({rootContext:Se,placement:P,middleware:Ee,strategy:a,whileElementsMounted:T?void 0:(...Ie)=>T_(...Ie,ne),nodeId:b}),Y=N.useRef(null);vi(()=>{if(!p)return;const Ie=typeof t=="function"?t():t;if(Ie){const _e=B_(Ie)?Ie.current:Ie;ae.setPositionReference(_e),Y.current=_e}},[p,ae,t]),N.useEffect(()=>{p&&typeof t!="function"&&B_(t)&&t.current!==Y.current&&(ae.setPositionReference(t.current),Y.current=t.current)},[p,ae,t]),N.useEffect(()=>{if(T&&p&&w.domReference&&w.floating)return T_(w.domReference,w.floating,ie,ne)},[T,p,w,ie,ne]);const le=ni(y),de=w_(l,le,v),re=eo(y)||"center",Re=!!((Be=W.hide)!=null&&Be.referenceHidden),he=N.useMemo(()=>{var Ie,_e;return{position:"absolute",top:(Ie=W.arrow)==null?void 0:Ie.y,left:(_e=W.arrow)==null?void 0:_e.x}},[W.arrow]),Oe=((Ne=W.arrow)==null?void 0:Ne.centerOffset)!==0;return N.useMemo(()=>({positionerStyles:M,arrowStyles:he,arrowRef:V,arrowUncentered:Oe,side:de,align:re,anchorHidden:Re,refs:ae,context:X,isPositioned:Z}),[M,he,V,Oe,de,re,Re,ae,X,Z])}function B_(e){return e!=null&&"current"in e}function nx(e){const{open:t,trackCursorAxis:a,mounted:l}=fu(),s=tx(e),c=N.useMemo(()=>{const d={};return(!t||a==="both")&&(d.pointerEvents="none"),{role:"presentation",hidden:!l,style:{...s.positionerStyles,...d}}},[t,a,l,s.positionerStyles]);return N.useMemo(()=>({props:c,...s}),[c,s])}const iN=N.forwardRef(function(t,a){const{render:l,className:s,anchor:c,positionMethod:d="absolute",side:h="top",align:E="center",sideOffset:A=0,alignOffset:R=0,collisionBoundary:T="clipping-ancestors",collisionPadding:S=5,arrowPadding:p=5,sticky:I=!1,trackAnchor:b=!0,...O}=t,{open:v,setPositionerElement:L,mounted:P,floatingRootContext:U}=fu(),V=ZH(),G=nx({anchor:c,positionMethod:d,floatingRootContext:U,trackAnchor:b,mounted:P,side:h,sideOffset:A,align:E,alignOffset:R,collisionBoundary:T,collisionPadding:S,sticky:I,arrowPadding:p,keepMounted:V}),H=N.useMemo(()=>({open:v,side:G.side,align:G.align,anchorHidden:G.anchorHidden}),[v,G.side,G.align,G.anchorHidden]),ue=N.useMemo(()=>({...H,arrowRef:G.arrowRef,arrowStyles:G.arrowStyles,arrowUncentered:G.arrowUncentered}),[H,G.arrowRef,G.arrowStyles,G.arrowUncentered]),Ae=Kf("div",t,{state:H,props:[G.props,O],ref:[a,L],customStyleHookMapping:Vf});return u.jsx(aN.Provider,{value:ue,children:Ae()})}),ax={...Vf,...AR},lN=N.forwardRef(function(t,a){const{className:l,render:s,...c}=t,{open:d,instantType:h,transitionStatus:E,getPopupProps:A,popupRef:R,onOpenChangeComplete:T}=fu(),{side:S,align:p}=$H();Yf({open:d,ref:R,onComplete(){d&&(T==null||T(!0))}});const I=N.useMemo(()=>({open:d,side:S,align:p,instant:h,transitionStatus:E}),[d,S,p,h,E]);return Kf("div",t,{state:I,ref:[a,R],props:[A,{style:E==="starting"?{transition:"none"}:{}},c],customStyleHookMapping:ax})()});let Em=e=>{},Am=e=>{};const Pn="/presets/markers/";let ix=function(e,t){wN(e,a=>{try{let l=JSON.parse(a);t(l)}catch{console.log("parse error")}})};function Gn(e){let t={marginRight:4};const a=Wc(e.offsetStr);return u.jsx("button",{style:t,onClick:()=>{ix(e.url,l=>{D.timeline.loadCombinedTracksPreset(l,isNaN(a)?0:a),D.updateStats(),D.timeline.drawElements()})},children:e.displayName})}class oN extends ft.Component{constructor(a){super(a);F(this,"state");F(this,"onColorChange");F(this,"onShowTextChange");F(this,"onEnterBuffEdit");F(this,"setOffset");F(this,"setTime");F(this,"setDuration");F(this,"setTrack");F(this,"setDescription");F(this,"setBuff");F(this,"setLoadTrackDest");Em=l=>{l.markerType===aa.Info?this.setState({nextMarkerType:l.markerType,nextMarkerColor:l.color,nextMarkerTime:l.time.toString(),nextMarkerDuration:l.duration.toString(),nextMarkerTrack:l.track.toString(),nextMarkerDescription:l.description,nextMarkerShowText:l.showText}):l.markerType===aa.Untargetable?this.setState({nextMarkerType:l.markerType,nextMarkerTime:l.time.toString(),nextMarkerDuration:l.duration.toString()}):this.setState({nextMarkerType:l.markerType,nextMarkerTrack:l.track.toString(),nextMarkerTime:l.time.toString(),nextMarkerDuration:l.duration.toString(),nextMarkerBuff:l.description})},this.onColorChange=l=>{l.target&&this.setState({nextMarkerColor:l.target.value})},this.onShowTextChange=l=>{l.target&&this.setState({nextMarkerShowText:l.target.checked})},this.onEnterBuffEdit=l=>{const s=new af(l);this.setState({nextMarkerDuration:s.info.duration})},this.state={nextMarkerType:aa.Info,nextMarkerColor:st.Blue,nextMarkerTime:"0",nextMarkerDuration:"1",nextMarkerTrack:"0",nextMarkerDescription:"",nextMarkerShowText:!1,nextMarkerBuff:k.TechnicalFinish,loadTrackDest:"0",offsetStr:"",trackBins:new Map},this.setTime=l=>{this.setState({nextMarkerTime:l})},this.setDuration=l=>{this.setState({nextMarkerDuration:l})},this.setTrack=l=>{this.setState({nextMarkerTrack:l})},this.setDescription=l=>{this.setState({nextMarkerDescription:l})},this.setBuff=l=>{this.setState({nextMarkerBuff:l})},this.setLoadTrackDest=l=>{this.setState({loadTrackDest:l})},this.setOffset=l=>this.setState({offsetStr:l}),Am=l=>{this.setState({trackBins:l})}}componentWillUnmount(){Am=a=>{},Em=a=>{}}render(){let a={display:"inline-block",marginRight:"1em",marginBottom:6},l=function(G,H){return u.jsx("option",{value:G,children:H},G)};const s="When specified, all imported and preset tracks will start from the specified timestamp. Use this to combine markers for multi-phase fights with varying kill times.",c="不为空时，下方所有导入的时间轴文件和预设都将从这个时间点开始。可以用此功能自行组合不同P的时间轴文件。",d=Wc(this.state.offsetStr),h=u.jsx(Ut,{defaultValue:this.state.offsetStr,description:u.jsxs(u.Fragment,{children:[u.jsx("span",{style:{color:isNaN(d)||d===0?"":st.Purple},children:_({en:"Load tracks starting at timestamp ",zh:"载入文件到此时间点 "})}),u.jsx(Je,{topic:"trackLoadOffset",content:_({en:s,zh:c})}),":"]}),width:4,style:{...a,marginTop:16},onChange:this.setOffset});let E=[];this.state.trackBins.forEach((G,H)=>{E.push(H)}),E.sort();let A=[];A.push(u.jsx(Zl,{fileFormat:sl.Json,getContentFn:()=>D.timeline.serializedCombinedMarkerTracks(),filename:"tracks_all",displayName:_({en:"all tracks combined",zh:"所有轨道"})},"combined")),E.forEach(G=>{let H=G>=0?G.toString():"untargetable",ue=_({en:"track ",zh:"轨"})+G.toString();G===Ko&&(ue=_({en:"track untargetable",zh:"不可选中标记轨"})),A.push(u.jsx(Zl,{fileFormat:sl.Json,getContentFn:()=>{let Ae=D.timeline.serializedSeparateMarkerTracks();for(let Ee=0;Ee<Ae.length;Ee++)if(Ae[Ee].track===G)return Ae[Ee];return console.assert(!1),[]},filename:"track_"+H,displayName:ue},G))});let R={marginRight:4},T=u.jsxs("div",{children:[u.jsx(Ut,{defaultValue:this.state.nextMarkerDescription,description:_({en:"Description: ",zh:"描述："}),width:40,onChange:this.setDescription}),u.jsx(Ut,{defaultValue:this.state.nextMarkerTrack,description:_({en:"Track: ",zh:"轨道序号："}),width:4,style:a,onChange:this.setTrack}),u.jsxs("div",{style:{display:"inline-block",marginTop:"4px"},children:[u.jsx("span",{children:_({en:"Color: ",zh:"颜色："})}),u.jsx("select",{style:{display:"inline-block",outline:"none"},value:this.state.nextMarkerColor,onChange:this.onColorChange,children:[l(st.Red,_({en:"red",zh:"红"})),l(st.Orange,_({en:"orange",zh:"橙"})),l(st.Yellow,_({en:"yellow",zh:"黄"})),l(st.Green,_({en:"green",zh:"绿"})),l(st.Cyan,_({en:"cyan",zh:"青"})),l(st.Blue,_({en:"blue",zh:"蓝"})),l(st.Purple,_({en:"purple",zh:"紫"})),l(st.Pink,_({en:"pink",zh:"粉"}))]}),u.jsx("div",{style:{background:this.state.nextMarkerColor,marginLeft:"4px",display:"inline-block",verticalAlign:"middle",height:"1em",width:"4em"}})]}),u.jsxs("div",{style:{display:"inline-block",marginTop:"4px",marginLeft:"10px"},children:[u.jsx("input",{type:"checkbox",style:{position:"relative",top:3},checked:this.state.nextMarkerShowText,onChange:this.onShowTextChange}),u.jsx("span",{style:{marginLeft:4},children:_({en:"show text",zh:"显示文字描述"})})]})]}),S=[];iR.forEach(G=>{const H=D.getActiveJob();!(H==="PCT"&&G.name===k.StarryMuse)&&!(H==="RDM"&&G.name===k.Embolden)&&!(H==="DNC"&&(G.name===k.TechnicalFinish||G.name===k.Devilment))&&S.push(u.jsx("option",{value:G.name,children:iC(G.name)},G.name))});let p=u.jsxs("div",{children:[u.jsx("span",{children:_({en:"Buff: ",zh:"团辅："})}),u.jsx("select",{value:this.state.nextMarkerBuff,onChange:G=>{if(G.target){const H=G.target.value;this.setBuff(H),this.onEnterBuffEdit(H)}},children:S}),u.jsx("div",{style:{marginTop:5},children:u.jsx(Ut,{defaultValue:this.state.nextMarkerTrack,description:_({en:"Track: ",zh:"轨道序号："}),width:4,style:a,onChange:this.setTrack})})]}),I=u.jsxs(u.Fragment,{children:[u.jsx("button",{style:R,onClick:()=>{D.timeline.deleteAllMarkers(),D.updateStats()},children:_({en:"clear all markers",zh:"清空当前"})}),u.jsx("button",{style:R,onClick:()=>{let G=D.timeline.sortAndRemoveDuplicateMarkers();G>0?alert("removed "+G+" duplicate markers"):alert("no duplicate markers found"),D.timeline.updateTimelineMarkers()},children:_({en:"remove duplicates",zh:"删除重复标记"})}),u.jsx("span",{children:_({en:", click to delete single markers",zh:"，可点击删除单个标记"})})]}),b=Hf(this.context,"text"),O=u.jsx("input",{style:{color:b,backgroundColor:"transparent",outline:"none",border:"none",borderBottom:"1px solid "+b},size:2,type:"text",value:this.state.loadTrackDest,onChange:G=>{this.setState({loadTrackDest:G.target.value})}}),v=_({en:u.jsxs("span",{children:["Load into individual track ",O,": "]}),zh:u.jsxs("span",{children:["载入第",O,"轨："]})});const L=Wc(this.state.offsetStr);let P=u.jsxs(u.Fragment,{children:[u.jsx(Tf,{allowLoadFromUrl:!1,defaultLoadUrl:"",label:_({en:"Load multiple tracks combined: ",zh:"载入多轨文件："}),onLoadFn:G=>{D.timeline.loadCombinedTracksPreset(G,isNaN(L)?0:L),D.updateStats(),D.timeline.drawElements()}}),u.jsx("div",{className:"paragraph",children:u.jsx(Tf,{allowLoadFromUrl:!1,label:v,onLoadFn:G=>{let H=parseInt(this.state.loadTrackDest);if(isNaN(H)){window.alert("invalid track destination");return}D.timeline.loadIndividualTrackPreset(G,H,isNaN(L)?0:L),D.updateStats(),D.timeline.drawElements()}})})]}),U=u.jsxs("form",{children:[u.jsx("span",{children:_({en:"Type: ",zh:"类型："})}),u.jsxs("select",{value:this.state.nextMarkerType,onChange:G=>{if(G.target){const H=G.target.value;this.setState({nextMarkerType:H}),H===aa.Buff&&this.onEnterBuffEdit(this.state.nextMarkerBuff)}},children:[u.jsx("option",{value:aa.Info,children:_({en:"Info",zh:"备注信息"})}),u.jsx("option",{value:aa.Untargetable,children:_({en:"Untargetable",zh:"不可选中"})}),u.jsx("option",{value:aa.Buff,children:_({en:"Buff",zh:"团辅"})})]}),u.jsx("span",{children:" "}),u.jsx(Ut,{defaultValue:this.state.nextMarkerTime,description:_({en:"Time: ",zh:"时间："}),width:8,style:a,onChange:this.setTime}),u.jsx(Ut,{defaultValue:this.state.nextMarkerDuration,description:_({en:"Duration: ",zh:"持续时长："}),width:8,style:a,onChange:this.setDuration}),this.state.nextMarkerType===aa.Info?T:void 0,this.state.nextMarkerType===aa.Buff?p:void 0,u.jsx("button",{type:"submit",style:{display:"block",marginTop:"0.5em"},onClick:G=>{let H={type:rt.Marker,markerType:this.state.nextMarkerType,time:Wc(this.state.nextMarkerTime),duration:parseFloat(this.state.nextMarkerDuration),color:this.state.nextMarkerColor,track:parseInt(this.state.nextMarkerTrack),description:this.state.nextMarkerDescription,showText:this.state.nextMarkerShowText},ue;if(this.state.nextMarkerType===aa.Untargetable&&(H.color=st.Grey,H.track=Ko,H.description="",H.showText=!0),this.state.nextMarkerType===aa.Buff){const Ae=new af(this.state.nextMarkerBuff),Ee=parseFloat(this.state.nextMarkerDuration);!isNaN(Ee)&&Ee>Ae.info.duration&&(ue=_({en:`this buff can't last longer than ${Ae.info.duration}s`,zh:`此团辅持续时间不能超过${Ae.info.duration}秒`})),H.color=Ae.info.color,H.description=Ae.name,H.duration=Ee,H.showText=!0}if((isNaN(H.duration)||isNaN(H.time)||isNaN(H.track))&&(ue=_({en:"some input(s) are invalid",zh:"部分输入格式不对"})),ue){window.alert(ue),G.preventDefault();return}D.timeline.addMarker(H),D.updateStats(),G.preventDefault()},children:_({en:"add marker",zh:"添加标记"})})]}),V=u.jsxs("div",{style:{},children:[u.jsxs("p",{children:[u.jsx("span",{children:_({en:"Current tier (en) by shanzhe: ",zh:"当前版本（英文，来自shanzhe）："})}),u.jsx(Gn,{displayName:"M5S",url:Pn+"m5s.txt",offsetStr:this.state.offsetStr}),u.jsx(Gn,{displayName:"M6S",url:Pn+"m6s.txt",offsetStr:this.state.offsetStr}),u.jsx(Gn,{displayName:"M7S",url:Pn+"m7s.txt",offsetStr:this.state.offsetStr}),u.jsx(Gn,{displayName:"M8S full",url:Pn+"m8s_full.txt",offsetStr:this.state.offsetStr}),u.jsx(Gn,{displayName:"M8S P1 to adds",url:Pn+"m8s_p1_through_adds.txt",offsetStr:this.state.offsetStr}),u.jsx(Gn,{displayName:"M8S P1 post-adds",url:Pn+"m8s_p1_post_adds.txt",offsetStr:this.state.offsetStr}),u.jsx(Gn,{displayName:"M8S P2",url:Pn+"m8s_p2.txt",offsetStr:this.state.offsetStr})]}),u.jsxs("p",{children:[u.jsx("span",{children:_({en:"EX trial: ",zh:"极神："})}),u.jsx(Gn,{displayName:_({en:"Queen Eternal (en + zh) by 小盐",zh:"永恒女王（英+中，来自小盐）"}),url:Pn+"queen_eternal.txt",offsetStr:this.state.offsetStr})]}),u.jsxs("p",{children:[u.jsx("span",{children:_({en:"FRU (en) by Yara & shanzhe: ",zh:"绝伊甸（英文，来自Yara+shanzhe）："})}),u.jsx(Gn,{displayName:_({en:"P1",zh:"P1"}),url:Pn+"fru_p1.txt",offsetStr:this.state.offsetStr}),u.jsx(Gn,{displayName:_({en:"P2 + intermission",zh:"P2"}),url:Pn+"fru_p2.txt",offsetStr:this.state.offsetStr}),u.jsx(Gn,{displayName:_({en:"P3 + P4",zh:"P3 + P4"}),url:Pn+"fru_p3_p4.txt",offsetStr:this.state.offsetStr}),u.jsx(Gn,{displayName:_({en:"P5",zh:"P5"}),url:Pn+"fru_p5.txt",offsetStr:this.state.offsetStr}),u.jsx(Gn,{displayName:_({en:"full fight",zh:"完整"}),url:Pn+"fru_en_full.txt",offsetStr:this.state.offsetStr})]}),u.jsxs("p",{children:[u.jsx("span",{children:_({en:"FRU (zh) by 小盐 & czmm: ",zh:"绝伊甸（中文，来自小盐+czmm）："})}),u.jsx(Gn,{displayName:_({en:"full (12/8/24 ver)",zh:"完整（12/8/24版）"}),url:Pn+"fru_zh.txt",offsetStr:this.state.offsetStr})]}),u.jsxs("p",{children:[u.jsx("span",{children:_({en:"Legacy ultimates: ",zh:"过去绝本（英文）："})}),u.jsx(Gn,{displayName:"DSR P6 by Tischel",url:Pn+"dsr_p6.txt",offsetStr:this.state.offsetStr}),u.jsx(Gn,{displayName:"DSR P7 by Santa",url:Pn+"dsr_p7.txt",offsetStr:this.state.offsetStr}),u.jsx(Gn,{displayName:"TOP by Santa",url:Pn+"TOP_2023_04_02.track",offsetStr:this.state.offsetStr})]})]});return u.jsx(u.Fragment,{children:u.jsx(gR,{contentHeight:KR,children:[{defaultSize:50,content:u.jsxs(u.Fragment,{children:[I,u.jsx("br",{}),h,u.jsx("p",{children:u.jsx("b",{children:_({en:"Presets",zh:"预设文件"})})}),V,u.jsxs("p",{style:{marginTop:16},children:[u.jsx("b",{children:_({en:"Load from file",zh:"从文件导入"})})," ",u.jsx(Je,{topic:"load tracks",content:_({en:"when loading additional markers, current markers will not be deleted",zh:"载入新的标记时，时间轴上的已有标记不会被删除"})})]}),P,u.jsx("p",{style:{marginTop:16},children:u.jsx("b",{children:_({en:"Save marker tracks to file",zh:"保存标记到文件"})})}),A]})},{defaultSize:50,content:u.jsxs(u.Fragment,{children:[u.jsx("p",{children:u.jsx("b",{children:_({en:"Create marker",zh:"添加标记"})})}),U]})}]})})}}F(oN,"contextType",Pa);const PA=new Map,sN="assets/Skills/General/Missing.png",F_=e=>{if(PA.has(e))return PA.get(e);const t=`assets/Skills/${EC(e)}`;if(t){let a=new Image;return a.src=t,a.onerror=l=>{a.src=sN,console.error("failed to load skill image: "+t),a.onerror=null},a.onload=()=>ul(),PA.set(e,a),a}};function rN(e){const t=`assets/Skills/${EC(e.skillName)}`,[a,l]=N.useState(!1);return u.jsx("img",{style:e.style,src:a?sN:t,onError:s=>l(!0),alt:e.skillName})}function lx(e={diameter:50,progress:.7,color:"rgba(0, 0, 0, 0.6)"}){const t=e.diameter/2,a=Math.PI*t,l=a*(1-e.progress),s=a-l,c=l+","+s,d=u.jsx("circle",{r:t/2,cx:20,cy:21,fill:"none",stroke:e.color,strokeWidth:t,strokeDasharray:c,strokeDashoffset:a/4+l}),h=t;let E=u.jsx("circle",{r:t+h/2,cx:20,cy:21,fill:"none",stroke:e.color,strokeWidth:h});return u.jsxs("svg",{width:48,height:48,style:{position:"absolute",left:"50%",marginLeft:-20,pointerEvents:"none"},children:[d,E]})}function ox(e={diameter:50,progress:.7,color:"rgba(0, 0, 0, 0.5)"}){const t=e.diameter/2,a=2*Math.PI*t,l=a*e.progress,s=a-l,c=l+","+s,d=u.jsx("circle",{r:t,cx:20,cy:21,fill:"none",stroke:e.color,strokeWidth:2,strokeDashoffset:a/4,strokeDasharray:c});return u.jsx("svg",{width:48,height:48,style:{position:"absolute",left:"50%",marginLeft:-20,pointerEvents:"none"},children:d})}function sx(e={diameter:50,progress:.7,color:"rgba(0, 0, 0, 0.5)"}){const t=e.diameter/2,a=Math.PI*t*2,l=a*e.progress,s=a-l,c=l+","+s,d=2*Math.PI*e.progress,h="#ffffffef",E=u.jsx("circle",{r:t,cx:20,cy:21,fill:"none",stroke:h,strokeWidth:1,strokeDasharray:c,strokeDashoffset:a/4}),A=u.jsx("line",{x1:20,y1:21,x2:20,y2:21-t,stroke:h,strokeWidth:1}),R=u.jsx("line",{x1:20,y1:21,x2:20+t*Math.cos(d-Math.PI/2),y2:21+t*Math.sin(d-Math.PI/2),stroke:h,strokeWidth:1});return u.jsxs("svg",{width:48,height:48,style:{position:"absolute",left:"50%",marginLeft:-20,pointerEvents:"none"},children:[E,A,R]})}class cN extends ft.Component{constructor(a){super(a);F(this,"props");F(this,"state");F(this,"handleMouseEnter");this.props=a,this.state={skillDescription:u.jsx("div",{})},this.handleMouseEnter=()=>{let l=D.getSkillInfo({game:D.getDisplayedGame(),skillName:this.props.skillName}),s=fl(this.context),c=[];if(l.status.ready()){let A="ready ("+l.stacksAvailable,R="可释放 ("+l.stacksAvailable;l.timeTillNextStackReady>0&&(A+=") (next stack ready in "+l.timeTillNextStackReady.toFixed(3),R+=") (下一层"+l.timeTillNextStackReady.toFixed(3)+"秒后转好"),A+=")",R+=")",c.push(_({en:A,zh:R}))}else{if(l.status.unavailableReasons.includes(qn.RequirementsNotMet)&&c.push(_({en:" skill requirement(s) not satisfied",zh:" 未满足释放条件"})),l.status.unavailableReasons.includes(qn.NotEnoughMP)&&c.push(_({en:" not enough MP (needs "+l.capturedManaCost+")",zh:" MP不足（需"+l.capturedManaCost+"）"})),l.status.unavailableReasons.includes(qn.Blocked)){const A=Math.max(l.timeTillNextStackReady,l.timeTillSecondaryReady??0),R=_({en:"possibly ready in "+l.timeTillAvailable.toFixed(3),zh:"预计"+l.timeTillAvailable.toFixed(3)+"秒后可释放"}),T=_({en:" (next stack ready in "+A.toFixed(3)+")",zh:"（"+A.toFixed(3)+"秒后转好下一层CD）"});c.push(u.jsxs(u.Fragment,{children:[R,l.stacksAvailable<l.maxStacks?T:void 0]}))}l.status.unavailableReasons.includes(qn.NotInCombat)&&c.push(_({en:"not in combat (wait for first damage application)",zh:"不在战斗中（需先等第一次伤害结算）"}))}let d=l.instantCast?0:l.castTime,h="";l.status.ready()&&(h+=_({en:"cast: ",zh:"读条："})+d.toFixed(3),l.llCovered&&d>pn.epsilon&&(h+=" (LL)"),h+=_({en:", cast+delay: ",zh:" 读条+生效延迟："})+l.timeTillDamageApplication.toFixed(3));let E=u.jsxs("div",{style:{color:D.displayingUpToDateGameState?s.text:s.historical},children:[u.jsx("div",{className:"paragraph",children:u.jsx("b",{children:io(this.props.skillName)})}),u.jsx("div",{className:"paragraph",children:c.map((A,R)=>u.jsxs("span",{children:[A,u.jsx("br",{})]},R))}),u.jsx("div",{className:"paragraph",children:h})]});this.setState({skillDescription:E})}}render(){let a={width:48,height:48,verticalAlign:"top",position:"relative",display:"inline-block"},l={width:40,height:40,position:"absolute",top:2,left:"50%",marginLeft:-20},s="transparent";this.props.readyAsideFromCd||(s="rgba(0, 0, 0, 0.6)");const c=D.getSkillInfo({game:D.getDisplayedGame(),skillName:this.props.skillName}),d=c.stacksAvailable,h=c.maxStacks;let E;const A=48,R=A/3+4;let T,S;if(d>0){T="0 0 2px rgba(255, 50, 0, 1), 0 0 3px rgba(255, 100, 0, 1), 0 0 5px rgba(255, 100, 0, 1)";const P=d===h?5:3;for(let U=0;U<P;U++)T+=", 0 0 10px black";S="white"}else T="0 0 4px black, 0 0 8px black",S="rgb(223,60,60)";h>1?E=u.jsx("div",{tabIndex:-1,style:{fontFamily:"Goldman Regular",color:S,fontSize:`${R}px`,textShadow:T,width:R,textAlign:"center",bottom:2,right:1,zIndex:3,position:"absolute"},children:d}):E=u.jsx(u.Fragment,{});const p=u.jsx(lx,{diameter:38,progress:this.props.cdProgress,color:this.props.ready?"rgba(0, 0, 0, 0)":"rgba(0, 0, 0, 0.6)"}),I=u.jsx(sx,{diameter:38,progress:this.props.cdProgress,color:this.props.ready?"rgba(0, 0, 0, 0)":"rgba(255, 255, 255, 1.0)"}),b=this.props.secondaryCdProgress&&u.jsx(ox,{diameter:32,progress:this.props.secondaryCdProgress,color:"rgba(250,186,47,255)"}),O=u.jsx("img",{hidden:!this.props.highlight,src:"/misc/proc.png",alt:"skill proc",style:{position:"absolute",width:44,height:44,top:0,left:2,zIndex:2}});let v=u.jsxs("div",{onMouseEnter:this.handleMouseEnter,children:[u.jsxs("div",{style:a,children:[" ",u.jsx(rN,{style:l,skillName:this.props.skillName}),u.jsxs("div",{style:{position:"absolute",width:40,height:41,top:1,left:"50%",marginLeft:-20,borderRadius:3,overflow:"hidden",zIndex:1,background:s},children:[this.props.cdProgress>1-pn.epsilon||!this.props.readyAsideFromCd||p,this.props.cdProgress>1-pn.epsilon||I,!this.props.secondaryCdProgress||this.props.secondaryCdProgress>1-pn.epsilon||b]}),u.jsx("div",{style:{position:"absolute",width:A,height:A,background:"url('/misc/skillIcon_overlay.png') no-repeat"}})]}),O,E]});const L=u.jsx("span",{title:xa[this.props.skillName].name,className:"skillButton",children:u.jsx(ns,{onClickFn:D.displayingUpToDateGameState?()=>{D.requestUseSkill({skillName:this.props.skillName,targetCount:this.props.targetCount}),D.updateAllDisplay()}:void 0,content:v,style:D.displayingUpToDateGameState?{}:{cursor:"not-allowed"}})});return u.jsxs(QC,{delay:0,hoverable:!1,children:[u.jsx(XH,{render:L}),u.jsx(nN,{container:document.getElementById("skillsWindowAnchor"),children:u.jsx(iN,{sideOffset:3,side:"top",className:"tooltip-positioner",children:u.jsx(lN,{className:"info-tooltip tooltip",children:this.state.skillDescription})})})]})}}F(cN,"contextType",Pa);let uN=e=>{};class dN extends ft.Component{constructor(a){super(a);F(this,"state");F(this,"onWaitTimeChange");F(this,"onWaitTimeSubmit");F(this,"onWaitUntilChange");F(this,"onWaitUntilSubmit");F(this,"onWaitSinceChange");F(this,"onTargetCountChange");F(this,"onRemoveTrailingIdleTime");F(this,"onWaitTillNextMpOrLucidTick");uN=l=>{this.setState({statusList:l})},this.onWaitTimeChange=l=>{!l||!l.target||this.setState({waitTime:l.target.value})},this.onWaitTimeSubmit=l=>{let s=parseFloat(this.state.waitTime);if(!isNaN(s)){if(this.state.waitSince==="Now")D.step(s);else if(this.state.waitSince==="LastSkill"){let c=D.game.time-D.lastSkillTime,d=s-c;d<=0?window.alert("Invalid input: trying to jump to "+s+"s since the last action, but "+c+"s has already elapsed."):D.step(d)}else console.assert(!1);D.autoSave()}l.preventDefault()},this.onWaitUntilChange=l=>{!l||!l.target||this.setState({waitUntil:l.target.value})},this.onWaitUntilSubmit=l=>{let s=Wc(this.state.waitUntil);if(!isNaN(s)){let c=D.game.getDisplayTime();if(s>c){let d=s-c;D.step(d),D.autoSave()}else window.alert("Can only jump to a time in the future!")}l.preventDefault()},this.onWaitSinceChange=l=>{this.setState({waitSince:l.target.value})},this.onTargetCountChange=l=>{this.setState({targetCount:parseInt(l.target.value)})},this.onRemoveTrailingIdleTime=()=>{D.removeTrailingIdleTime()},this.onWaitTillNextMpOrLucidTick=()=>{D.waitTillNextMpOrLucidTick()},this.state={statusList:[],waitTime:"1",waitSince:"Now",waitUntil:"0:00",targetCount:1}}render(){let a=[];for(let E=0;E<this.state.statusList.length;E++){let A=this.state.statusList[E].skillName,R=this.state.statusList[E];const T=R?!R.status.unavailableReasons.some(p=>p!==qn.Blocked):!1;let S=u.jsx(cN,{highlight:R?R.highlight:!1,skillName:A,ready:R?R.status.ready():!1,readyAsideFromCd:T,cdProgress:R?1-R.timeTillNextStackReady/R.cdRecastTime:1,secondaryCdProgress:R&&R.secondaryCdRecastTime&&R.timeTillSecondaryReady?1-R.timeTillSecondaryReady/R.secondaryCdRecastTime:1,targetCount:this.state.targetCount},E);a.push(S)}let l=u.jsx(Je,{topic:"waitUntilInputFormat",content:u.jsxs("div",{children:[u.jsx("div",{className:"paragraph",children:_({en:"Examples:",zh:"时间格式举例："})}),u.jsxs("div",{className:"paragraph",children:["12 ",u.jsx("br",{}),"1.5 ",u.jsx("br",{}),"10:04.2 ",u.jsx("br",{}),"-0:03"]})]})}),s={display:"inline-block",flex:"auto"},c=fl(this.context),d={outline:"none",border:"none",borderBottom:"1px solid "+c.text,borderRadius:0,background:"transparent",color:c.text};const h=u.jsx(Je,{topic:"targetCount",content:_({en:u.jsxs(u.Fragment,{children:[u.jsx("span",{children:"The number of targets hit by the next ability. Damage fall-off is automatically computed. If the number of targets set is more than the number of enemies the ability can hit, then the additional targets are ignored."}),u.jsx("br",{}),u.jsx("br",{}),u.jsx("span",{children:"Buff calculations for enemy debuffs like Dokumori and Chain Stratagem may be inaccurate when multiple targets are selected."})]}),zh:u.jsxs("div",{children:[u.jsx("span",{children:"下一个技能击中的目标数。会自动计算对主目标之外敌人的伤害衰减。如果在此设置的敌人数量超过技能的生效敌人数上限（例：给对单技能设置2或更多目标数），多余的目标会被忽略。"}),u.jsx("br",{}),u.jsx("br",{}),u.jsx("span",{children:"注：介毒之术、连环计等作用于目标的团辅可能会使多目标技能威力计算出现误差。"})]})})});return u.jsx("div",{className:"skillsWindow",id:"skillsWindowAnchor",children:u.jsxs("div",{className:"skillIcons",children:[u.jsx("style",{children:`
					.info-tooltip {
						color: ${c.text};
						background-color: ${c.tipBackground};
						opacity: 0.98;
						max-width: 300px;
						outline: 1px solid ${c.bgHighContrast};
						transition: none;
						font-size: 100%;
						z-index: 10;
					}
				`}),a,u.jsxs("div",{style:{margin:"10px 0"},children:[_({en:"# of targets hit",zh:"击中目标数"})," ",h,":"," ",u.jsx("input",{type:"number",min:1,max:Wy,style:{width:30,...d},value:this.state.targetCount,onChange:this.onTargetCountChange}),u.jsxs("div",{style:{display:"flex",flexDirection:"row",marginBottom:6},children:[_({en:u.jsxs("form",{onSubmit:this.onWaitTimeSubmit,style:s,children:["Wait until"," ",u.jsx("input",{type:"text",style:{width:40,...d},value:this.state.waitTime,onChange:this.onWaitTimeChange})," ","second(s) since"," ",u.jsxs("select",{style:{display:"inline-block",outline:"none"},value:this.state.waitSince,onChange:this.onWaitSinceChange,children:[u.jsx("option",{value:"Now",children:"now"}),u.jsx("option",{value:"LastSkill",children:"last action"})]})," ",u.jsx("input",{type:"submit",disabled:!D.displayingUpToDateGameState,value:"GO"})]}),zh:u.jsxs("form",{onSubmit:this.onWaitTimeSubmit,style:s,children:["快进至"," ",u.jsxs("select",{style:{display:"inline-block",outline:"none"},value:this.state.waitSince,onChange:this.onWaitSinceChange,children:[u.jsx("option",{value:"Now",children:"当前"}),u.jsx("option",{value:"LastSkill",children:"上次操作"})]})," ","后的"," ",u.jsx("input",{type:"text",style:{width:30,...d},value:this.state.waitTime,onChange:this.onWaitTimeChange})," ","秒"," ",u.jsx("input",{type:"submit",disabled:!D.displayingUpToDateGameState,value:"GO"})]}),ja:u.jsxs("form",{onSubmit:this.onWaitTimeSubmit,style:s,children:[u.jsxs("select",{style:{display:"inline-block",outline:"none",marginRight:"4px"},value:this.state.waitSince,onChange:this.onWaitSinceChange,children:[u.jsx("option",{value:"Now",children:"現在のカーソルの位置"}),u.jsx("option",{value:"LastSkill",children:"最後のアクション"})]}),"から",u.jsx("input",{type:"text",style:{width:30,...d},value:this.state.waitTime,onChange:this.onWaitTimeChange}),"秒進む",u.jsx("input",{type:"submit",disabled:!D.displayingUpToDateGameState,value:"GO"})]})}),_({en:u.jsxs("form",{onSubmit:this.onWaitUntilSubmit,style:s,children:["Wait until ",l," ",u.jsx("input",{type:"text",style:{width:60,...d},value:this.state.waitUntil,onChange:this.onWaitUntilChange}),u.jsx("input",{type:"submit",disabled:!D.displayingUpToDateGameState,value:"GO"})]}),zh:u.jsxs("form",{onSubmit:this.onWaitUntilSubmit,style:s,children:["快进至指定时间 ",l," ",u.jsx("input",{type:"text",style:{width:60,...d},value:this.state.waitUntil,onChange:this.onWaitUntilChange}),u.jsx("input",{type:"submit",disabled:!D.displayingUpToDateGameState,value:"GO"})]}),ja:u.jsxs("form",{onSubmit:this.onWaitUntilSubmit,style:s,children:["指定した時間まで進む ",l," ",u.jsx("input",{type:"text",style:{width:60,...d},value:this.state.waitUntil,onChange:this.onWaitUntilChange}),u.jsx("input",{type:"submit",disabled:!D.displayingUpToDateGameState,value:"GO"})]})})]}),u.jsx("button",{onClick:this.onWaitTillNextMpOrLucidTick,children:_({en:"Wait until Manafont / MP tick / lucid tick",zh:"快进至魔泉生效/跳蓝/跳醒梦"})}),u.jsx("span",{children:" "}),u.jsx("button",{onClick:this.onRemoveTrailingIdleTime,children:_({en:"Remove trailing idle time",zh:"去除时间轴末尾的发呆时间"})})]})]})})}}F(dN,"contextType",Pa);var vt=(e=>(e.Skill="Skill",e.Wait="Wait",e.JumpToTimestamp="JumpToTimestamp",e.WaitForMP="WaitForMP",e.SetResourceEnabled="SetResourceEnabled",e.Invalid="Invalid",e))(vt||{});function rx(e,t){return new nl({type:"Skill",skillName:e,targetCount:t??1,healTargetCount:void 0})}function j_(e){return new nl({type:"Wait",waitDuration:e})}function cx(e){return new nl({type:"SetResourceEnabled",buffName:e})}var fr,Ra,fi,Ji,Ni,hr,Er,Ar,mr;const ZR=class ZR{constructor(t,a){ke(this,fr);ke(this,Ra);ke(this,fi);ke(this,Ji);ke(this,Ni);F(this,"applicationTime");ke(this,hr);ke(this,Er);ke(this,Ar);ke(this,mr);F(this,"info");F(this,"legacyWaitDuration");F(this,"tmp_startLockTime");F(this,"tmp_endLockTime");this.info=t,ve(this,fr,new Set),ve(this,fi,new Map),ve(this,Ni,new Map),ve(this,hr,new Map),ve(this,Er,new Map),ve(this,Ar,new Map),ve(this,mr,new Map),this.legacyWaitDuration=a}serialized(){return this.info.type==="Skill"?{type:"Skill",skillName:xa[this.info.skillName].name,targetCount:this.info.targetCount,healTargetCount:this.info.healTargetCount}:this.info.type==="SetResourceEnabled"?{type:"SetResourceEnabled",buffName:this.info.buffName.toString()}:this.info}maybeGetActionKey(){return this.info.type==="Skill"?this.info.skillName:void 0}get targetCount(){return this.info.type==="Skill"?this.info.targetCount:0}get healTargetCount(){return this.info.type==="Skill"?this.info.healTargetCount??0:0}getNameForMessage(){return this.info.type==="Skill"?xa[this.info.skillName].name:this.info.type.toString()}getClone(){return new ZR(this.info,this.legacyWaitDuration)}addBuff(t){ee(this,fr).add(t)}hasBuff(t){return ee(this,fr).has(t)}hasPartyBuff(){var a;const t=(a=ee(this,Ra))==null?void 0:a.snapshotTime;return t!==void 0&&D.game.getPartyBuffs(t).size>0}getPartyBuffs(){var a;const t=(a=ee(this,Ra))==null?void 0:a.snapshotTime;return t?[...D.game.getPartyBuffs(t).keys()]:[]}setTargetCount(t){this.info.type==="Skill"&&(this.info.targetCount=t)}setHealTargetCount(t){this.info.type==="Skill"&&(this.info.healTargetCount=t)}resolveAll(t){ee(this,Ra)&&ee(this,Ra).resolve(t),ee(this,fi).forEach(a=>{a.forEach(l=>{l.resolve(t)})})}resolved(){return this.applicationTime!==void 0}hitBoss(t){var a;return((a=ee(this,Ra))==null?void 0:a.hasHitBoss(t))??!0}getPotency(t){let a={applied:0,snapshottedButPending:0};return ee(this,Ra)&&this.recordPotency(t,ee(this,Ra),a),t.excludeDoT||ee(this,fi).forEach(l=>{l.forEach(s=>{this.recordPotency(t,s,a)})}),a}getHealingPotency(t){let a={applied:0,snapshottedButPending:0};return ee(this,Ji)&&this.recordPotency(t,ee(this,Ji),a),t.excludeHoT||ee(this,Ni).forEach(l=>{l.forEach(s=>{this.recordPotency(t,s,a)})}),a}recordPotency(t,a,l){a.hasHitBoss(t.untargetable)?l.applied+=a.getAmount(t):!a.hasResolved()&&a.hasSnapshotted()&&(l.snapshottedButPending+=a.getAmount(t))}removeUnresolvedOvertimePotencies(t){(t==="damage"?ee(this,fi):ee(this,Ni)).forEach(l=>{const s=l.findIndex(c=>!c.hasResolved());s<0||l.splice(s)})}anyPotencies(){return ee(this,Ra)!==void 0||ee(this,fi).size>0}anyHealingPotencies(){return ee(this,Ji)!==void 0||ee(this,Ni).size>0}getInitialPotency(){return ee(this,Ra)}getInitialHealingPotency(){return ee(this,Ji)}getAllDotPotencies(){return this.getAllOverTimePotencies("damage")}getAllHotPotencies(){return this.getAllOverTimePotencies("healing")}getAllOverTimePotencies(t){return t==="damage"?ee(this,fi):ee(this,Ni)}getDotPotencies(t){return this.getOverTimePotencies(t,"damage")}getHotPotencies(t){return this.getOverTimePotencies(t,"healing")}getOverTimePotencies(t,a){return a==="damage"?ee(this,fi).get(t)??[]:ee(this,Ni).get(t)??[]}addPotency(t){console.assert(!ee(this,Ra),`ActionNode for ${this.getNameForMessage()} already had an initial potency`),ve(this,Ra,t)}addHealingPotency(t){console.assert(!ee(this,Ji),`ActionNode for ${this.getNameForMessage()} already had an initial healing potency`),ve(this,Ji,t)}addDoTPotency(t,a){this.addOverTimePotency(t,a,"damage")}addHoTPotency(t,a){this.addOverTimePotency(t,a,"healing")}addOverTimePotency(t,a,l){const s=l==="damage"?ee(this,fi):ee(this,Ni),c=s.get(a)??[];c.length===0&&s.set(a,c),c.push(t)}setOverTimeGap(t,a,l){this.setOverTimeMappedAmount(t,a,l==="damage"?ee(this,Er):ee(this,mr))}getOverTimeGap(t,a){return this.getOverTimeMappedAmount(t,a==="damage"?ee(this,Er):ee(this,mr))}setOverTimeOverrideAmount(t,a,l){this.setOverTimeMappedAmount(t,a,l==="damage"?ee(this,hr):ee(this,Ar))}getOverTimeOverrideAmount(t,a){return this.getOverTimeMappedAmount(t,a==="damage"?ee(this,hr):ee(this,Ar))}setOverTimeMappedAmount(t,a,l){l.set(t,a)}getOverTimeMappedAmount(t,a){return a.get(t)??0}};fr=new WeakMap,Ra=new WeakMap,fi=new WeakMap,Ji=new WeakMap,Ni=new WeakMap,hr=new WeakMap,Er=new WeakMap,Ar=new WeakMap,mr=new WeakMap;let nl=ZR;class Cr{constructor(){F(this,"actions");F(this,"name","(anonymous line)");this.actions=[]}get length(){return this.actions.length}get head(){return this.length>0?this.actions[0]:void 0}get tail(){return this.length>0?this.actions[this.actions.length-1]:void 0}get tailIndex(){return this.length-1}addActionNode(t){console.assert(t),this.actions.push(t)}iterateAll(t){this.actions.forEach(a=>t(a))}serialized(){return{name:this.name,actions:this.actions.map(t=>t.serialized())}}exportCsv(){return[]}static deserialize(t){const a=t.map(s=>{if(s.type==="Skill"){const c=hC(s.skillName),d="waitDuration"in s?s.waitDuration:void 0;return new nl({type:"Skill",skillName:c,targetCount:s.targetCount,healTargetCount:s.healTargetCount},d)}else if(s.type==="SetResourceEnabled"){const c="waitDuration"in s?s.waitDuration:void 0;return new nl({type:"SetResourceEnabled",buffName:d1(s.buffName)},c)}else return["Wait"].includes(s.type)?new nl(s):(window.alert("unparseable action: "+s.toString()),new nl({type:"Invalid"}))}),l=new Cr;return l.actions=a,l}}var su,mm;const QR=class QR extends Cr{constructor(){super(...arguments);ke(this,su);F(this,"selectionStartIndex");F(this,"selectionEndIndex");F(this,"startIsPivot",!0);F(this,"config")}get selectionStart(){return this.selectionStartIndex!==void 0?this.actions[this.selectionStartIndex]:void 0}get selectionEnd(){return this.selectionEndIndex!==void 0?this.actions[this.selectionEndIndex]:void 0}getFirstSelection(){return this.selectionStart&&console.assert(this.selectionEnd!==void 0),this.selectionStart}getLastSelection(){return this.selectionEnd&&console.assert(this.selectionStart!==void 0),this.selectionEnd}isInSelection(a){return this.selectionStartIndex!==void 0&&this.selectionEndIndex!==void 0&&a>=this.selectionStartIndex&&a<=this.selectionEndIndex}iterateSelected(a){if(!(this.selectionStartIndex===void 0||this.selectionEndIndex===void 0))for(let l=this.selectionStartIndex;l<=this.selectionEndIndex;l++)a(this.actions[l])}getSelected(){const a=new Cr;return this.selectionStartIndex!==void 0&&this.selectionEndIndex!==void 0&&(a.actions=this.actions.slice(this.selectionStartIndex,this.selectionEndIndex+1)),a}getSelectionLength(){return this.selectionStartIndex===void 0||this.selectionEndIndex===void 0?0:this.selectionEndIndex-this.selectionStartIndex+1}selectSingle(a){this.unselectAll(),this.selectionStartIndex=a,this.selectionEndIndex=a,this.startIsPivot=!0}unselectAll(){this.selectionStartIndex=void 0,this.selectionEndIndex=void 0,this.startIsPivot=!0}selectUntil(a){if(this.selectionStartIndex!==void 0&&this.selectionStartIndex===this.selectionEndIndex)this.selectionStartIndex<=a?(ge(this,su,mm).call(this,this.selectionStartIndex,a),this.startIsPivot=!0):(ge(this,su,mm).call(this,a,this.selectionStartIndex),this.startIsPivot=!1);else if(this.selectionStartIndex!==void 0&&this.selectionStartIndex!==this.selectionEndIndex){const l=this.startIsPivot?this.selectionStartIndex:this.selectionEndIndex;this.selectionStartIndex=l,this.selectionEndIndex=l,this.selectUntil(a)}}onClickNode(a,l){l?this.selectUntil(a):this.selectionStartIndex===a&&this.selectionEndIndex===a?this.unselectAll():this.selectSingle(a)}moveSelected(a){if(a===0||this.selectionStartIndex===void 0||this.selectionEndIndex===void 0)return;const l=this.selectionStartIndex,s=this.getSelectionLength(),c=this.actions.splice(l,s);let d=l+a;return d=Math.max(d,0),d=Math.min(d,this.length),this.actions.splice(d,0,...c),this.selectionStartIndex=d,this.selectionEndIndex=d+s-1,d}deleteSelected(){if(this.selectionStartIndex===void 0||this.selectionEndIndex===void 0)return;const a=this.selectionStartIndex;return this.actions.splice(a,this.getSelectionLength()),this.unselectAll(),a}serialized(){var l;console.assert(this.config);let a=super.serialized();return{name:a.name,fileType:Ai.Record,config:(l=this.config)==null?void 0:l.serialized(),actions:a.actions}}spliceUpTo(a){const l=this.selectionStartIndex,s=this.selectionEndIndex;this.unselectAll(),a<this.length&&this.actions.splice(a,this.length-a),l!==void 0&&(this.selectSingle(l),this.selectUntil(s))}getCloneWithSharedConfig(){let a=new QR;return a.config=this.config,a.actions=this.actions.map(l=>l.getClone()),a.selectionStartIndex=this.selectionStartIndex,a.selectionEndIndex=this.selectionEndIndex,a}};su=new WeakSet,mm=function(a,l){this.unselectAll(),this.selectionStartIndex=a,this.selectionEndIndex=l};let Zi=QR,Xl=()=>{};class ux extends ft.Component{constructor(a){super(a);F(this,"props");F(this,"state");F(this,"onChange");this.props=a,this.onChange=l=>{this.setState({filename:l})},this.state={filename:"(untitled)"}}render(){return u.jsxs("form",{children:[u.jsx(Ut,{style:{display:"inline-block",marginTop:"10px"},defaultValue:this.state.filename,description:_({en:"name: ",zh:"文件名："}),width:30,onChange:this.onChange}),u.jsx("span",{children:" "}),u.jsx("button",{type:"submit",disabled:!this.props.enabled,onClick:a=>{D.addSelectionToPreset(this.state.filename),a.preventDefault()},children:_({en:"add selection to preset",zh:"使用此文件中的预设"})})]})}}function dx(e){let t=e.line,a=[],l=0,s={margin:"0 1px",width:"18px",verticalAlign:"middle"};for(const h of t.actions)if(h.info.type===vt.Skill){const E=h.info.skillName;a.push(u.jsx(rN,{style:s,skillName:E},l)),l++}let c=u.jsxs("span",{children:[t.name," (",a,")"]}),d=D.displayingUpToDateGameState?{}:{cursor:"not-allowed"};return u.jsxs("div",{style:{marginBottom:"8px"},children:[u.jsx(ns,{content:c,style:d,onClickFn:D.displayingUpToDateGameState?()=>{D.tryAddLine(t,gn.SkillSequence),D.updateAllDisplay(),D.scrollToTime()}:void 0}),u.jsx("span",{children:" "}),u.jsx(ns,{content:"[x]",onClickFn:()=>{D.deleteLine(t)}})]})}class fN extends ft.Component{constructor(t){super(t),Xl=this.unboundUpdatePresetsView.bind(this)}componentWillUnmount(){Xl=()=>{}}unboundUpdatePresetsView(){this.forceUpdate()}render(){let t=D&&D.record&&D.record.getFirstSelection()!==void 0;const a=Hf(this.context,"bgMediumContrast");let l=u.jsxs("div",{children:[u.jsx("button",{style:{marginBottom:10},onClick:()=>{D.deleteAllLines()},children:_({en:"clear all presets",zh:"重置所有预设"})}),u.jsx(Tf,{allowLoadFromUrl:!1,defaultLoadUrl:"https://miyehn.me/ffxiv-blm-rotation/presets/lines/default.txt",onLoadFn:s=>{s.fileType===Ai.SkillSequencePresets?D.appendFilePresets(s):window.alert("incorrect file type '"+s.fileType+"'")}}),u.jsxs("div",{style:{outline:"1px solid "+a,margin:"10px 0",padding:"10px"},children:[D.getPresetLines().map((s,c)=>u.jsx(dx,{line:s},c)),u.jsx(ux,{enabled:t}),u.jsx("div",{style:{marginTop:16},children:u.jsx(Zl,{fileFormat:sl.Json,getContentFn:()=>D.serializedPresets(),filename:"presets",displayName:_({en:"download presets to file",zh:"将当前预设下载为文件"})})})]})]});return u.jsx(qo,{title:_({en:"Skill sequence presets",zh:"技能序列预设"}),content:l,defaultShow:!1})}}F(fN,"contextType",Pa);let Vo=()=>{},hN=!1;function Gc(e){hN=e}function fx(e){let t=e.belongingRecord!==D.record,a=e.isSelected?"rgba(151,111,246,0.25)":"transparent";t&&e.isSelected&&(a="rgba(255, 220, 0, 0.25)");let l={flex:1,position:"relative",userSelect:"none",padding:"0.075em 6px",background:a},s=_({en:"(other)",zh:"（其它）"});if(e.node.info.type===vt.Skill){const c=e.node.info.targetCount>1?_({en:` (${e.node.info.targetCount} targets)`,zh:`（${e.node.info.targetCount}个目标）`}):"";s=e.node.info.skillName?io(e.node.info.skillName)+c:_({en:"(unknown skill)",zh:"未知技能"})}else if(e.node.info.type===vt.Wait)s=_({en:"(wait for "+e.node.info.waitDuration.toFixed(2)+"s)",zh:"（等"+e.node.info.waitDuration.toFixed(2)+"秒）"});else if(e.node.info.type===vt.SetResourceEnabled){const c=Zn(e.node.info.buffName);s=_({en:"(toggle resource: "+c+")",zh:"（开关或去除BUFF："+c+"）"})}return u.jsxs("div",{style:l,ref:e.refObj??null,onClick:c=>{Gc(!0),t?(e.belongingRecord.onClickNode(e.index,c.shiftKey),Vo()):(D.timeline.onClickTimelineAction(e.index,c.shiftKey),e.node.tmp_startLockTime&&D.scrollToTime(e.node.tmp_startLockTime))},children:[e.isFirstInvalid?u.jsx("span",{style:{marginRight:6,padding:"0 4px",backgroundColor:"rgba(255, 0, 0, 0.25)"},children:"→"}):void 0,u.jsx("span",{children:s})]})}let EN=()=>{};class hx extends ft.Component{constructor(a){super(a);F(this,"state");F(this,"firstSelected");this.state={editedRecord:void 0,recordValidStatus:void 0,firstEditedNodeIndex:void 0},this.firstSelected=ft.createRef()}componentDidMount(){Vo=()=>{this.forceUpdate()},EN=()=>{setTimeout(()=>{this.firstSelected.current&&this.firstSelected.current.scrollIntoView({behavior:"smooth",block:"nearest"})},0)}}componentWillUnmount(){Vo=()=>{}}isDirty(){return this.state.editedRecord!==void 0}isValid(){return this.state.recordValidStatus&&this.state.recordValidStatus.isValid}markClean(){this.setState({editedRecord:void 0,recordValidStatus:void 0,firstEditedNodeIndex:void 0})}discardEditsBtn(){return u.jsx("button",{style:{display:"block",marginTop:10},onClick:a=>{Gc(!0),this.state.editedRecord||console.assert(!1),this.markClean()},children:"discard changes"})}getRecordCopy(){if(this.state.editedRecord)return this.state.editedRecord;{let a=D.record.getCloneWithSharedConfig();return this.setState({editedRecord:a}),a}}render(){let a=this.isDirty()?this.state.editedRecord:D.record,l=()=>{var E,A,R;if(this.isDirty()){if(this.isValid())return u.jsxs("div",{children:[u.jsx("div",{style:{backgroundColor:"rgba(255, 220, 0, 0.25)"},children:_({en:"This edited sequence is valid.",zh:"此编辑可被应用。"})}),u.jsx("button",{style:{display:"block",marginTop:10},onClick:T=>{Gc(!0),this.state.editedRecord?D.applyEditedRecord(this.state.editedRecord):console.assert(!1),this.markClean(),D.displayCurrentState()},children:"apply changes to timeline and save"}),this.discardEditsBtn()]});{let T=(E=this.state.recordValidStatus)==null?void 0:E.firstInvalidAction,S="(unknown node)";T&&(T.info.type===vt.Wait?S="(Wait)":T.info.type===vt.SetResourceEnabled?S="(Toggle resource "+T.info.buffName+")":T.info.type===vt.Skill&&(S=T.info.skillName?xa[T.info.skillName].name:"(unknown skill)"));let p="This sequence contains invalid actions! Check: "+S;if((A=this.state.recordValidStatus)!=null&&A.invalidTime){const I=Ct.displayTime(this.state.recordValidStatus.invalidTime,3);p+=` @ ${I}`}return p+=` (${((R=this.state.recordValidStatus)==null?void 0:R.invalidReason)??"(unknown)"})`,u.jsxs("div",{children:[u.jsx("div",{style:{backgroundColor:"rgba(255, 0, 0, 0.25)"},children:p}),this.discardEditsBtn()]})}}else return u.jsx("div",{children:_({en:"timeline is up to date.",zh:"时间轴已与编辑器同步。"})})},s={display:"block",width:"100%",marginBottom:10,padding:3};const c=E=>{if(a.getFirstSelection()){Gc(!0);let A=this.getRecordCopy(),R=this.state.firstEditedNodeIndex,T=E(A);T!==void 0&&(R===void 0?R=T:R=Math.min(T,R));let S=D.checkRecordValidity(A,R);T!==void 0&&S.straightenedIfValid?this.setState({editedRecord:S.straightenedIfValid,firstEditedNodeIndex:void 0}):this.setState({firstEditedNodeIndex:R}),this.setState({recordValidStatus:S})}};let d=u.jsxs("div",{style:{marginBottom:6,flex:1},children:[u.jsx("button",{style:s,onClick:E=>c(A=>A.moveSelected(-1)),children:_({en:"move up",zh:"上移"})}),u.jsx("button",{style:s,onClick:E=>c(A=>A.moveSelected(1)),children:_({en:"move down",zh:"下移"})}),u.jsx("button",{style:s,onClick:E=>c(A=>A.deleteSelected()),children:_({en:"delete selected",zh:"删除所选"})}),u.jsx("button",{style:s,onClick:E=>c(A=>{const R=A.getSelectionLength();if(R>1){const T=A.selectionStartIndex,S=A.selectionEndIndex;return A.selectSingle(S),A.moveSelected(-(R-1)),A.selectSingle(T),A.selectUntil(S),A.selectionStartIndex}}),children:_({en:u.jsxs(u.Fragment,{children:["move end of selection",u.jsx("br",{}),"to start of selection"]}),zh:u.jsxs(u.Fragment,{children:["将选中的最后一个技能节点",u.jsx("br",{}),"移到选区最前"]})})})]}),h=[];return a.actions.forEach((E,A)=>{var T;const R=!this.isDirty()&&A===a.selectionStartIndex;h.push(u.jsx(fx,{index:A,node:E,isSelected:a.isInSelection(A),belongingRecord:a,isFirstInvalid:((T=this.state.recordValidStatus)==null?void 0:T.firstInvalidAction)===E,refObj:R?this.firstSelected:void 0},A))}),u.jsx("div",{onClick:E=>{var A;!E.shiftKey&&!hN&&(this.isDirty()?(Vo(),(A=this.state.editedRecord)==null||A.unselectAll()):(D.record.unselectAll(),D.displayCurrentState())),Gc(!1)},children:u.jsx(gR,{contentHeight:KR,children:[{content:d,defaultSize:20},{content:u.jsx(u.Fragment,{children:h}),defaultSize:40,fullBorder:!0},{content:l(),defaultSize:40,fullBorder:!0}]})})}}const al=4;var rt=(e=>(e.s_Cursor="s_Cursor",e.s_ViewOnlyCursor="s_ViewOnlyCursor",e.DamageMark="DamageMark",e.HealingMark="HealingMark",e.AggroMark="AggroMark",e.LucidMark="LucidMark",e.MPTickMark="MPTickMark",e.MeditateTickMark="MeditateTickMark",e.AutoTickMark="AutoTickMark",e.Skill="Skill",e.Marker="Marker",e.WarningMark="WarningMark",e.Buff="Buff",e))(rt||{});const Ko=-1;var aa=(e=>(e.Info="Info",e.Untargetable="Untargetable",e.Buff="Buff",e))(aa||{});function Ex(e){return e.type==="s_Cursor"||e.type==="s_ViewOnlyCursor"}var xt,va,el,zt,AN,Fd,jd,Rm,tr,mN,GI;let Ax=(GI=class{constructor(){ke(this,zt);F(this,"scale");F(this,"startTime");F(this,"elapsedTime");F(this,"sharedElements");F(this,"slots");F(this,"activeSlotIndex");ke(this,xt);ke(this,va);ke(this,el);this.scale=.25,this.startTime=0,this.elapsedTime=0,this.sharedElements=[],this.slots=[],this.activeSlotIndex=-1,ve(this,xt,[]),ve(this,va,[]),ve(this,el,[]),ge(this,zt,mN).call(this)}setTimeSegment(t,a){this.startTime=t,this.elapsedTime=a}addElement(t){Ex(t)?this.sharedElements.push(t):(console.assert(this.slots.length>0),this.slots[this.activeSlotIndex].elements.push(t))}tryGetElement(t,a){return this.slots[this.activeSlotIndex].elements.find(l=>l.time===t&&l.type===a)}getAllMarkers(){return ee(this,xt)}getUntargetableMarkers(){return ee(this,va)}getBuffMarkers(){return ee(this,el)}addMarker(t){ee(this,xt).push(t),t.markerType==="Untargetable"?ee(this,va).push(t):t.markerType==="Buff"&&ee(this,el).push(t),this.drawElements(),ge(this,zt,tr).call(this)}deleteMarker(t){let a=!1;for(let l=0;l<ee(this,xt).length;l++)t===ee(this,xt)[l]&&(ee(this,xt).splice(l,1),this.drawElements(),ge(this,zt,tr).call(this),a=!0);return ge(this,zt,Fd).call(this),ge(this,zt,jd).call(this),a}sortAndRemoveDuplicateMarkers(){ee(this,xt).sort((a,l)=>a.time-l.time);let t=0;for(let a=ee(this,xt).length-1;a>0;a--)ge(this,zt,AN).call(this,ee(this,xt)[a],ee(this,xt)[a-1])&&(ee(this,xt).splice(a,1),t++);return ge(this,zt,Fd).call(this),ge(this,zt,jd).call(this),ge(this,zt,tr).call(this),t}loadCombinedTracksPreset(t,a){if(t.fileType!==Ai.MarkerTracksCombined){window.alert("wrong file type '"+t.fileType+"'");return}t.tracks.forEach(l=>{this.loadIndividualTrackPreset(l,l.track,a)})}loadIndividualTrackPreset(t,a,l){if(t.fileType!==Ai.MarkerTrackIndividual){window.alert("wrong file type '"+t.fileType+"'");return}ge(this,zt,Rm).call(this,t,a,l)}deleteAllMarkers(){ve(this,xt,[]),ve(this,va,[]),ve(this,el,[]),this.drawElements(),ge(this,zt,tr).call(this)}addSlot(){this.slots.push({job:"BLM",elements:[]}),console.assert(this.slots.length<=al),this.activeSlotIndex=this.slots.length-1,D.setConfigAndRestart(D.gameConfig)}removeSlot(t){console.assert(t<this.slots.length);for(let a=t;a<al;a++){let l=dn("gameRecord"+(a+1).toString());l!==null&&Qt("gameRecord"+a.toString(),l),l=dn("gameTimeInfo"+(a+1).toString()),l!==null&&Qt("gameTimeInfo"+a.toString(),l)}this.slots.splice(t,1);for(let a=this.slots.length;a<al;a++)nm("gameRecord"+a.toString()),nm("gameTimeInfo"+a.toString());this.activeSlotIndex>=t&&(this.activeSlotIndex=Math.max(0,this.activeSlotIndex-1)),this.loadSlot(this.activeSlotIndex)}saveCurrentSlot(t,a,l){Qt("gameRecord"+this.activeSlotIndex.toString(),JSON.stringify(t)),Qt("gameTimeInfo"+this.activeSlotIndex.toString(),JSON.stringify({countdown:a,elapsedTime:l}))}loadSlot(t){let a=dn("gameRecord"+t.toString());if(a!==null){for(this.activeSlotIndex=t;this.slots.length<=t;)this.slots.push({job:"BLM",elements:[]});let l=JSON.parse(a);return D.loadBattleRecordFromFile(l),this.slots[t].job=D.game.job,!0}else return!1}reset(){this.startTime=0,this.elapsedTime=0,this.slots.length>0&&(this.slots[this.activeSlotIndex].elements=[]),this.sharedElements=[],this.addElement({type:"s_Cursor",time:0,displayTime:0}),this.addElement({type:"s_ViewOnlyCursor",time:0,displayTime:0,enabled:!1})}updateElem(t){console.assert(t&&t.type.substring(0,2)==="s_");for(let a=0;a<this.sharedElements.length;a++)if(this.sharedElements[a].type===t.type){this.sharedElements[a]=t;return}console.assert(!1)}setHorizontalScale(t){this.scale=t,this.drawElements()}getAllSlotsTimeInfo(){let t=0,a=0,l=!1;for(let s=0;s<al;s++){let c=dn("gameTimeInfo"+s.toString());if(c!==null){let d=JSON.parse(c);t=Math.max(t,d.countdown),a=Math.max(a,d.elapsedTime),l=!0}}return l?{countdown:t,rightMostTime:a}:null}getCanvasWidth(){let t=Math.max(0,this.elapsedTime),a=D.gameConfig.countdown,l=this.getAllSlotsTimeInfo();return l!==null&&(a=Math.max(a,l.countdown),t=Math.max(t,l.rightMostTime)),ee(this,xt).forEach(c=>{let d=c.time+c.duration;t=Math.max(t,d+a)}),Math.ceil((t+Math.max(0,a)+4)/8)*8*100*this.scale}getCanvasHeight(){let t=this.getNumMarkerTracks();return ye.timelineCanvasHeight(t,this.slots.length)}positionFromTime(t){return t*this.scale*100}timeFromPosition(t){return t/(this.scale*100)}drawElements(){ul(),this.updateTimelineMarkers()}updateTimelineMarkers(){ul();let t=new Map;ee(this,xt).forEach(a=>{let l=t.get(a.track);l===void 0&&(l=[]),l.push(a),t.set(a.track,l)}),Am(t)}onClickTimelineAction(t,a){D.record.onClickNode(t,a),Xl(),Vo();let l=D.record.selectionStartIndex;l!==void 0?D.displayHistoricalState(-1/0,l):D.displayHistoricalState(-1/0,t)}getNumMarkerTracks(){let t=-1,a=!1;for(let l=0;l<ee(this,xt).length;l++)t=Math.max(t,ee(this,xt)[l].track),ee(this,xt)[l].track===Ko&&(a=!0);return a?t+2:t+1}duringUntargetable(t){for(let a=0;a<ee(this,va).length;a++){let l=ee(this,va)[a],s=l.time,c=l.time+l.duration;if(t>=s&&t<c)return!0}return!1}getTargetableDurationBetween(t,a){let l=function([d,h],[E,A]){let R=[];return d<E&&R.push([d,Math.min(h,E)]),A<h&&R.push([Math.max(A,d),h]),R},s=[[t,a]];for(let d=0;d<ee(this,va).length;d++){let h=ee(this,va)[d],E=h.time,A=h.time+h.duration,R=[];s.forEach(T=>{R=R.concat(l(T,[E,A]))}),s=R}let c=0;return s.forEach(d=>{c+=d[1]-d[0]}),c}serializedSeparateMarkerTracks(){let t=this.getNumMarkerTracks()-1,a=new Map;for(let s=Ko;s<t+1;s++)a.set(s,[]);ee(this,xt).forEach(s=>{let c=a.get(s.track);console.assert(c),c&&(c.push({time:s.time,markerType:s.markerType,duration:s.duration,description:s.description,color:s.color,showText:s.showText}),a.set(s.track,c))});let l=[];return a.forEach((s,c)=>{s.length>0&&l.push({fileType:Ai.MarkerTrackIndividual,track:c,markers:s})}),l}serializedCombinedMarkerTracks(){let t=this.serializedSeparateMarkerTracks();return{fileType:Ai.MarkerTracksCombined,tracks:t}}},xt=new WeakMap,va=new WeakMap,el=new WeakMap,zt=new WeakSet,AN=function(t,a){let l=function(s,c){return Math.abs(s-c)<pn.epsilon};return!(t.markerType!==a.markerType||!l(t.time,a.time)||!l(t.duration,a.duration)||t.color!==a.color||t.track!==a.track||t.showText!==a.showText||t.description!==a.description)},Fd=function(){ve(this,va,[]),ee(this,xt).forEach(t=>{t.markerType==="Untargetable"&&ee(this,va).push(t)})},jd=function(){ve(this,el,[]),ee(this,xt).forEach(t=>{t.markerType==="Buff"&&(t.description==="Wanderer's Minuet"&&(t.description=k.WanderersMinuet),ee(this,el).push(t))})},Rm=function(t,a,l){let s=t.markers.map(c=>({time:c.time+l,duration:c.duration,color:c.color,description:c.description,track:c.markerType==="Untargetable"?Ko:a,type:"Marker",markerType:c.markerType??"Info",showText:c.showText??!1}));ve(this,xt,ee(this,xt).concat(s)),ge(this,zt,Fd).call(this),ge(this,zt,jd).call(this),ge(this,zt,tr).call(this)},tr=function(){let t=this.serializedSeparateMarkerTracks();Qt("timelineMarkers",JSON.stringify(t))},mN=function(){let t=dn("timelineMarkers");t!==null&&JSON.parse(t).forEach(l=>{ge(this,zt,Rm).call(this,l,l.track,0)})},GI);function mx(e){return vr({attr:{viewBox:"0 0 32 32"},child:[{tag:"path",attr:{d:"M 5 5 L 5 27 L 27 27 L 27 5 Z M 7 7 L 25 7 L 25 25 L 7 25 Z M 9 20 L 9 22 L 23 22 L 23 20 Z"},child:[]}]})(e)}const Wf=N.createContext(null);Wf.displayName="PanelGroupContext";const Zt={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},mR=10,Wo=N.useLayoutEffect,z_=Df.useId,Rx=typeof z_=="function"?z_:()=>null;let Tx=0;function RR(e=null){const t=Rx(),a=N.useRef(e||t||null);return a.current===null&&(a.current=""+Tx++),e??a.current}function RN({children:e,className:t="",collapsedSize:a,collapsible:l,defaultSize:s,forwardedRef:c,id:d,maxSize:h,minSize:E,onCollapse:A,onExpand:R,onResize:T,order:S,style:p,tagName:I="div",...b}){const O=N.useContext(Wf);if(O===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:v,expandPanel:L,getPanelSize:P,getPanelStyle:U,groupId:V,isPanelCollapsed:G,reevaluatePanelConstraints:H,registerPanel:ue,resizePanel:Ae,unregisterPanel:Ee}=O,oe=RR(d),Te=N.useRef({callbacks:{onCollapse:A,onExpand:R,onResize:T},constraints:{collapsedSize:a,collapsible:l,defaultSize:s,maxSize:h,minSize:E},id:oe,idIsFromProps:d!==void 0,order:S});N.useRef({didLogMissingDefaultSizeWarning:!1}),Wo(()=>{const{callbacks:ne,constraints:ae}=Te.current,w={...ae};Te.current.id=oe,Te.current.idIsFromProps=d!==void 0,Te.current.order=S,ne.onCollapse=A,ne.onExpand=R,ne.onResize=T,ae.collapsedSize=a,ae.collapsible=l,ae.defaultSize=s,ae.maxSize=h,ae.minSize=E,(w.collapsedSize!==ae.collapsedSize||w.collapsible!==ae.collapsible||w.maxSize!==ae.maxSize||w.minSize!==ae.minSize)&&H(Te.current,w)}),Wo(()=>{const ne=Te.current;return ue(ne),()=>{Ee(ne)}},[S,oe,ue,Ee]),N.useImperativeHandle(c,()=>({collapse:()=>{v(Te.current)},expand:ne=>{L(Te.current,ne)},getId(){return oe},getSize(){return P(Te.current)},isCollapsed(){return G(Te.current)},isExpanded(){return!G(Te.current)},resize:ne=>{Ae(Te.current,ne)}}),[v,L,P,G,oe,Ae]);const Se=U(Te.current,s);return N.createElement(I,{...b,children:e,className:t,id:oe,style:{...Se,...p},[Zt.groupId]:V,[Zt.panel]:"",[Zt.panelCollapsible]:l||void 0,[Zt.panelId]:oe,[Zt.panelSize]:parseFloat(""+Se.flexGrow).toFixed(1)})}const TN=N.forwardRef((e,t)=>N.createElement(RN,{...e,forwardedRef:t}));RN.displayName="Panel";TN.displayName="forwardRef(Panel)";let Tm=null,zd=-1,Fl=null;function Sx(e,t){if(t){const a=(t&IN)!==0,l=(t&CN)!==0,s=(t&NN)!==0,c=(t&ON)!==0;if(a)return s?"se-resize":c?"ne-resize":"e-resize";if(l)return s?"sw-resize":c?"nw-resize":"w-resize";if(s)return"s-resize";if(c)return"n-resize"}switch(e){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function gx(){Fl!==null&&(document.head.removeChild(Fl),Tm=null,Fl=null,zd=-1)}function GA(e,t){var a,l;const s=Sx(e,t);if(Tm!==s){if(Tm=s,Fl===null&&(Fl=document.createElement("style"),document.head.appendChild(Fl)),zd>=0){var c;(c=Fl.sheet)===null||c===void 0||c.removeRule(zd)}zd=(a=(l=Fl.sheet)===null||l===void 0?void 0:l.insertRule(`*{cursor: ${s} !important;}`))!==null&&a!==void 0?a:-1}}function SN(e){return e.type==="keydown"}function gN(e){return e.type.startsWith("pointer")}function pN(e){return e.type.startsWith("mouse")}function qf(e){if(gN(e)){if(e.isPrimary)return{x:e.clientX,y:e.clientY}}else if(pN(e))return{x:e.clientX,y:e.clientY};return{x:1/0,y:1/0}}function px(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function _x(e,t,a){return e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y}function Ix(e,t){if(e===t)throw new Error("Cannot compare node with itself");const a={a:K_(e),b:K_(t)};let l;for(;a.a.at(-1)===a.b.at(-1);)e=a.a.pop(),t=a.b.pop(),l=e;Ve(l,"Stacking order can only be calculated for elements with a common ancestor");const s={a:V_(Y_(a.a)),b:V_(Y_(a.b))};if(s.a===s.b){const c=l.childNodes,d={a:a.a.at(-1),b:a.b.at(-1)};let h=c.length;for(;h--;){const E=c[h];if(E===d.a)return 1;if(E===d.b)return-1}}return Math.sign(s.a-s.b)}const Cx=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function Nx(e){var t;const a=getComputedStyle((t=_N(e))!==null&&t!==void 0?t:e).display;return a==="flex"||a==="inline-flex"}function Ox(e){const t=getComputedStyle(e);return!!(t.position==="fixed"||t.zIndex!=="auto"&&(t.position!=="static"||Nx(e))||+t.opacity<1||"transform"in t&&t.transform!=="none"||"webkitTransform"in t&&t.webkitTransform!=="none"||"mixBlendMode"in t&&t.mixBlendMode!=="normal"||"filter"in t&&t.filter!=="none"||"webkitFilter"in t&&t.webkitFilter!=="none"||"isolation"in t&&t.isolation==="isolate"||Cx.test(t.willChange)||t.webkitOverflowScrolling==="touch")}function Y_(e){let t=e.length;for(;t--;){const a=e[t];if(Ve(a,"Missing node"),Ox(a))return a}return null}function V_(e){return e&&Number(getComputedStyle(e).zIndex)||0}function K_(e){const t=[];for(;e;)t.push(e),e=_N(e);return t}function _N(e){const{parentNode:t}=e;return t&&t instanceof ShadowRoot?t.host:t}const IN=1,CN=2,NN=4,ON=8,bx=px()==="coarse";let mi=[],sr=!1,Ho=new Map,Xf=new Map;const $c=new Set;function yx(e,t,a,l,s){var c;const{ownerDocument:d}=t,h={direction:a,element:t,hitAreaMargins:l,setResizeHandlerState:s},E=(c=Ho.get(d))!==null&&c!==void 0?c:0;return Ho.set(d,E+1),$c.add(h),Af(),function(){var R;Xf.delete(e),$c.delete(h);const T=(R=Ho.get(d))!==null&&R!==void 0?R:1;if(Ho.set(d,T-1),Af(),T===1&&Ho.delete(d),mi.includes(h)){const S=mi.indexOf(h);S>=0&&mi.splice(S,1),SR(),s("up",!0,null)}}}function vx(e){const{target:t}=e,{x:a,y:l}=qf(e);sr=!0,TR({target:t,x:a,y:l}),Af(),mi.length>0&&(mf("down",e),e.preventDefault(),bN(t)||e.stopImmediatePropagation())}function wA(e){const{x:t,y:a}=qf(e);if(sr&&e.buttons===0&&(sr=!1,mf("up",e)),!sr){const{target:l}=e;TR({target:l,x:t,y:a})}mf("move",e),SR(),mi.length>0&&e.preventDefault()}function BA(e){const{target:t}=e,{x:a,y:l}=qf(e);Xf.clear(),sr=!1,mi.length>0&&(e.preventDefault(),bN(t)||e.stopImmediatePropagation()),mf("up",e),TR({target:t,x:a,y:l}),SR(),Af()}function bN(e){let t=e;for(;t;){if(t.hasAttribute(Zt.resizeHandle))return!0;t=t.parentElement}return!1}function TR({target:e,x:t,y:a}){mi.splice(0);let l=null;(e instanceof HTMLElement||e instanceof SVGElement)&&(l=e),$c.forEach(s=>{const{element:c,hitAreaMargins:d}=s,h=c.getBoundingClientRect(),{bottom:E,left:A,right:R,top:T}=h,S=bx?d.coarse:d.fine;if(t>=A-S&&t<=R+S&&a>=T-S&&a<=E+S){if(l!==null&&document.contains(l)&&c!==l&&!c.contains(l)&&!l.contains(c)&&Ix(l,c)>0){let I=l,b=!1;for(;I&&!I.contains(c);){if(_x(I.getBoundingClientRect(),h)){b=!0;break}I=I.parentElement}if(b)return}mi.push(s)}})}function FA(e,t){Xf.set(e,t)}function SR(){let e=!1,t=!1;mi.forEach(l=>{const{direction:s}=l;s==="horizontal"?e=!0:t=!0});let a=0;Xf.forEach(l=>{a|=l}),e&&t?GA("intersection",a):e?GA("horizontal",a):t?GA("vertical",a):gx()}let jA=new AbortController;function Af(){jA.abort(),jA=new AbortController;const e={capture:!0,signal:jA.signal};$c.size&&(sr?(mi.length>0&&Ho.forEach((t,a)=>{const{body:l}=a;t>0&&(l.addEventListener("contextmenu",BA,e),l.addEventListener("pointerleave",wA,e),l.addEventListener("pointermove",wA,e))}),window.addEventListener("pointerup",BA,e),window.addEventListener("pointercancel",BA,e)):Ho.forEach((t,a)=>{const{body:l}=a;t>0&&(l.addEventListener("pointerdown",vx,e),l.addEventListener("pointermove",wA,e))}))}function mf(e,t){$c.forEach(a=>{const{setResizeHandlerState:l}=a,s=mi.includes(a);l(e,s,t)})}function Dx(){const[e,t]=N.useState(0);return N.useCallback(()=>t(a=>a+1),[])}function Ve(e,t){if(!e)throw console.error(t),Error(t)}function ts(e,t,a=mR){return e.toFixed(a)===t.toFixed(a)?0:e>t?1:-1}function tl(e,t,a=mR){return ts(e,t,a)===0}function Ma(e,t,a){return ts(e,t,a)===0}function Mx(e,t,a){if(e.length!==t.length)return!1;for(let l=0;l<e.length;l++){const s=e[l],c=t[l];if(!Ma(s,c,a))return!1}return!0}function ir({panelConstraints:e,panelIndex:t,size:a}){const l=e[t];Ve(l!=null,`Panel constraints not found for index ${t}`);let{collapsedSize:s=0,collapsible:c,maxSize:d=100,minSize:h=0}=l;if(ts(a,h)<0)if(c){const E=(s+h)/2;ts(a,E)<0?a=s:a=h}else a=h;return a=Math.min(d,a),a=parseFloat(a.toFixed(mR)),a}function wc({delta:e,initialLayout:t,panelConstraints:a,pivotIndices:l,prevLayout:s,trigger:c}){if(Ma(e,0))return t;const d=[...t],[h,E]=l;Ve(h!=null,"Invalid first pivot index"),Ve(E!=null,"Invalid second pivot index");let A=0;if(c==="keyboard"){{const T=e<0?E:h,S=a[T];Ve(S,`Panel constraints not found for index ${T}`);const{collapsedSize:p=0,collapsible:I,minSize:b=0}=S;if(I){const O=t[T];if(Ve(O!=null,`Previous layout not found for panel index ${T}`),Ma(O,p)){const v=b-O;ts(v,Math.abs(e))>0&&(e=e<0?0-v:v)}}}{const T=e<0?h:E,S=a[T];Ve(S,`No panel constraints found for index ${T}`);const{collapsedSize:p=0,collapsible:I,minSize:b=0}=S;if(I){const O=t[T];if(Ve(O!=null,`Previous layout not found for panel index ${T}`),Ma(O,b)){const v=O-p;ts(v,Math.abs(e))>0&&(e=e<0?0-v:v)}}}}{const T=e<0?1:-1;let S=e<0?E:h,p=0;for(;;){const b=t[S];Ve(b!=null,`Previous layout not found for panel index ${S}`);const v=ir({panelConstraints:a,panelIndex:S,size:100})-b;if(p+=v,S+=T,S<0||S>=a.length)break}const I=Math.min(Math.abs(e),Math.abs(p));e=e<0?0-I:I}{let S=e<0?h:E;for(;S>=0&&S<a.length;){const p=Math.abs(e)-Math.abs(A),I=t[S];Ve(I!=null,`Previous layout not found for panel index ${S}`);const b=I-p,O=ir({panelConstraints:a,panelIndex:S,size:b});if(!Ma(I,O)&&(A+=I-O,d[S]=O,A.toPrecision(3).localeCompare(Math.abs(e).toPrecision(3),void 0,{numeric:!0})>=0))break;e<0?S--:S++}}if(Mx(s,d))return s;{const T=e<0?E:h,S=t[T];Ve(S!=null,`Previous layout not found for panel index ${T}`);const p=S+A,I=ir({panelConstraints:a,panelIndex:T,size:p});if(d[T]=I,!Ma(I,p)){let b=p-I,v=e<0?E:h;for(;v>=0&&v<a.length;){const L=d[v];Ve(L!=null,`Previous layout not found for panel index ${v}`);const P=L+b,U=ir({panelConstraints:a,panelIndex:v,size:P});if(Ma(L,U)||(b-=U-L,d[v]=U),Ma(b,0))break;e>0?v--:v++}}}const R=d.reduce((T,S)=>S+T,0);return Ma(R,100)?d:s}function Lx({layout:e,panelsArray:t,pivotIndices:a}){let l=0,s=100,c=0,d=0;const h=a[0];Ve(h!=null,"No pivot index found"),t.forEach((T,S)=>{const{constraints:p}=T,{maxSize:I=100,minSize:b=0}=p;S===h?(l=b,s=I):(c+=b,d+=I)});const E=Math.min(s,100-c),A=Math.max(l,100-d),R=e[h];return{valueMax:E,valueMin:A,valueNow:R}}function Jc(e,t=document){return Array.from(t.querySelectorAll(`[${Zt.resizeHandleId}][data-panel-group-id="${e}"]`))}function yN(e,t,a=document){const s=Jc(e,a).findIndex(c=>c.getAttribute(Zt.resizeHandleId)===t);return s??null}function vN(e,t,a){const l=yN(e,t,a);return l!=null?[l,l+1]:[-1,-1]}function DN(e,t=document){var a;if(t instanceof HTMLElement&&(t==null||(a=t.dataset)===null||a===void 0?void 0:a.panelGroupId)==e)return t;const l=t.querySelector(`[data-panel-group][data-panel-group-id="${e}"]`);return l||null}function Zf(e,t=document){const a=t.querySelector(`[${Zt.resizeHandleId}="${e}"]`);return a||null}function Hx(e,t,a,l=document){var s,c,d,h;const E=Zf(t,l),A=Jc(e,l),R=E?A.indexOf(E):-1,T=(s=(c=a[R])===null||c===void 0?void 0:c.id)!==null&&s!==void 0?s:null,S=(d=(h=a[R+1])===null||h===void 0?void 0:h.id)!==null&&d!==void 0?d:null;return[T,S]}function xx({committedValuesRef:e,eagerValuesRef:t,groupId:a,layout:l,panelDataArray:s,panelGroupElement:c,setLayout:d}){N.useRef({didWarnAboutMissingResizeHandle:!1}),Wo(()=>{if(!c)return;const h=Jc(a,c);for(let E=0;E<s.length-1;E++){const{valueMax:A,valueMin:R,valueNow:T}=Lx({layout:l,panelsArray:s,pivotIndices:[E,E+1]}),S=h[E];if(S!=null){const p=s[E];Ve(p,`No panel data found for index "${E}"`),S.setAttribute("aria-controls",p.id),S.setAttribute("aria-valuemax",""+Math.round(A)),S.setAttribute("aria-valuemin",""+Math.round(R)),S.setAttribute("aria-valuenow",T!=null?""+Math.round(T):"")}}return()=>{h.forEach((E,A)=>{E.removeAttribute("aria-controls"),E.removeAttribute("aria-valuemax"),E.removeAttribute("aria-valuemin"),E.removeAttribute("aria-valuenow")})}},[a,l,s,c]),N.useEffect(()=>{if(!c)return;const h=t.current;Ve(h,"Eager values not found");const{panelDataArray:E}=h,A=DN(a,c);Ve(A!=null,`No group found for id "${a}"`);const R=Jc(a,c);Ve(R,`No resize handles found for group id "${a}"`);const T=R.map(S=>{const p=S.getAttribute(Zt.resizeHandleId);Ve(p,"Resize handle element has no handle id attribute");const[I,b]=Hx(a,p,E,c);if(I==null||b==null)return()=>{};const O=v=>{if(!v.defaultPrevented)switch(v.key){case"Enter":{v.preventDefault();const L=E.findIndex(P=>P.id===I);if(L>=0){const P=E[L];Ve(P,`No panel data found for index ${L}`);const U=l[L],{collapsedSize:V=0,collapsible:G,minSize:H=0}=P.constraints;if(U!=null&&G){const ue=wc({delta:Ma(U,V)?H-V:V-U,initialLayout:l,panelConstraints:E.map(Ae=>Ae.constraints),pivotIndices:vN(a,p,c),prevLayout:l,trigger:"keyboard"});l!==ue&&d(ue)}}break}}};return S.addEventListener("keydown",O),()=>{S.removeEventListener("keydown",O)}});return()=>{T.forEach(S=>S())}},[c,e,t,a,l,s,d])}function W_(e,t){if(e.length!==t.length)return!1;for(let a=0;a<e.length;a++)if(e[a]!==t[a])return!1;return!0}function MN(e,t){const a=e==="horizontal",{x:l,y:s}=qf(t);return a?l:s}function Ux(e,t,a,l,s){const c=a==="horizontal",d=Zf(t,s);Ve(d,`No resize handle element found for id "${t}"`);const h=d.getAttribute(Zt.groupId);Ve(h,"Resize handle element has no group id attribute");let{initialCursorPosition:E}=l;const A=MN(a,e),R=DN(h,s);Ve(R,`No group element found for id "${h}"`);const T=R.getBoundingClientRect(),S=c?T.width:T.height;return(A-E)/S*100}function kx(e,t,a,l,s,c){if(SN(e)){const d=a==="horizontal";let h=0;e.shiftKey?h=100:s!=null?h=s:h=10;let E=0;switch(e.key){case"ArrowDown":E=d?0:h;break;case"ArrowLeft":E=d?-h:0;break;case"ArrowRight":E=d?h:0;break;case"ArrowUp":E=d?0:-h;break;case"End":E=100;break;case"Home":E=-100;break}return E}else return l==null?0:Ux(e,t,a,l,c)}function Px({panelDataArray:e}){const t=Array(e.length),a=e.map(c=>c.constraints);let l=0,s=100;for(let c=0;c<e.length;c++){const d=a[c];Ve(d,`Panel constraints not found for index ${c}`);const{defaultSize:h}=d;h!=null&&(l++,t[c]=h,s-=h)}for(let c=0;c<e.length;c++){const d=a[c];Ve(d,`Panel constraints not found for index ${c}`);const{defaultSize:h}=d;if(h!=null)continue;const E=e.length-l,A=s/E;l++,t[c]=A,s-=A}return t}function $s(e,t,a){t.forEach((l,s)=>{const c=e[s];Ve(c,`Panel data not found for index ${s}`);const{callbacks:d,constraints:h,id:E}=c,{collapsedSize:A=0,collapsible:R}=h,T=a[E];if(T==null||l!==T){a[E]=l;const{onCollapse:S,onExpand:p,onResize:I}=d;I&&I(l,T),R&&(S||p)&&(p&&(T==null||tl(T,A))&&!tl(l,A)&&p(),S&&(T==null||!tl(T,A))&&tl(l,A)&&S())}})}function kd(e,t){if(e.length!==t.length)return!1;for(let a=0;a<e.length;a++)if(e[a]!=t[a])return!1;return!0}function Gx({defaultSize:e,dragState:t,layout:a,panelData:l,panelIndex:s,precision:c=3}){const d=a[s];let h;return d==null?h=e!=null?e.toPrecision(c):"1":l.length===1?h="1":h=d.toPrecision(c),{flexBasis:0,flexGrow:h,flexShrink:1,overflow:"hidden",pointerEvents:t!==null?"none":void 0}}function wx(e,t=10){let a=null;return(...s)=>{a!==null&&clearTimeout(a),a=setTimeout(()=>{e(...s)},t)}}function q_(e){try{if(typeof localStorage<"u")e.getItem=t=>localStorage.getItem(t),e.setItem=(t,a)=>{localStorage.setItem(t,a)};else throw new Error("localStorage not supported in this environment")}catch(t){console.error(t),e.getItem=()=>null,e.setItem=()=>{}}}function LN(e){return`react-resizable-panels:${e}`}function HN(e){return e.map(t=>{const{constraints:a,id:l,idIsFromProps:s,order:c}=t;return s?l:c?`${c}:${JSON.stringify(a)}`:JSON.stringify(a)}).sort((t,a)=>t.localeCompare(a)).join(",")}function xN(e,t){try{const a=LN(e),l=t.getItem(a);if(l){const s=JSON.parse(l);if(typeof s=="object"&&s!=null)return s}}catch{}return null}function Bx(e,t,a){var l,s;const c=(l=xN(e,a))!==null&&l!==void 0?l:{},d=HN(t);return(s=c[d])!==null&&s!==void 0?s:null}function Fx(e,t,a,l,s){var c;const d=LN(e),h=HN(t),E=(c=xN(e,s))!==null&&c!==void 0?c:{};E[h]={expandToSizes:Object.fromEntries(a.entries()),layout:l};try{s.setItem(d,JSON.stringify(E))}catch(A){console.error(A)}}function X_({layout:e,panelConstraints:t}){const a=[...e],l=a.reduce((c,d)=>c+d,0);if(a.length!==t.length)throw Error(`Invalid ${t.length} panel layout: ${a.map(c=>`${c}%`).join(", ")}`);if(!Ma(l,100)&&a.length>0)for(let c=0;c<t.length;c++){const d=a[c];Ve(d!=null,`No layout data found for index ${c}`);const h=100/l*d;a[c]=h}let s=0;for(let c=0;c<t.length;c++){const d=a[c];Ve(d!=null,`No layout data found for index ${c}`);const h=ir({panelConstraints:t,panelIndex:c,size:d});d!=h&&(s+=d-h,a[c]=h)}if(!Ma(s,0))for(let c=0;c<t.length;c++){const d=a[c];Ve(d!=null,`No layout data found for index ${c}`);const h=d+s,E=ir({panelConstraints:t,panelIndex:c,size:h});if(d!==E&&(s-=E-d,a[c]=E,Ma(s,0)))break}return a}const jx=100,Bc={getItem:e=>(q_(Bc),Bc.getItem(e)),setItem:(e,t)=>{q_(Bc),Bc.setItem(e,t)}},Z_={};function UN({autoSaveId:e=null,children:t,className:a="",direction:l,forwardedRef:s,id:c=null,onLayout:d=null,keyboardResizeBy:h=null,storage:E=Bc,style:A,tagName:R="div",...T}){const S=RR(c),p=N.useRef(null),[I,b]=N.useState(null),[O,v]=N.useState([]),L=Dx(),P=N.useRef({}),U=N.useRef(new Map),V=N.useRef(0),G=N.useRef({autoSaveId:e,direction:l,dragState:I,id:S,keyboardResizeBy:h,onLayout:d,storage:E}),H=N.useRef({layout:O,panelDataArray:[],panelDataArrayChanged:!1});N.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),N.useImperativeHandle(s,()=>({getId:()=>G.current.id,getLayout:()=>{const{layout:Y}=H.current;return Y},setLayout:Y=>{const{onLayout:le}=G.current,{layout:de,panelDataArray:re}=H.current,Re=X_({layout:Y,panelConstraints:re.map(he=>he.constraints)});W_(de,Re)||(v(Re),H.current.layout=Re,le&&le(Re),$s(re,Re,P.current))}}),[]),Wo(()=>{G.current.autoSaveId=e,G.current.direction=l,G.current.dragState=I,G.current.id=S,G.current.onLayout=d,G.current.storage=E}),xx({committedValuesRef:G,eagerValuesRef:H,groupId:S,layout:O,panelDataArray:H.current.panelDataArray,setLayout:v,panelGroupElement:p.current}),N.useEffect(()=>{const{panelDataArray:Y}=H.current;if(e){if(O.length===0||O.length!==Y.length)return;let le=Z_[e];le==null&&(le=wx(Fx,jx),Z_[e]=le);const de=[...Y],re=new Map(U.current);le(e,de,re,O,E)}},[e,O,E]),N.useEffect(()=>{});const ue=N.useCallback(Y=>{const{onLayout:le}=G.current,{layout:de,panelDataArray:re}=H.current;if(Y.constraints.collapsible){const Re=re.map(Ne=>Ne.constraints),{collapsedSize:he=0,panelSize:Oe,pivotIndices:Be}=vo(re,Y,de);if(Ve(Oe!=null,`Panel size not found for panel "${Y.id}"`),!tl(Oe,he)){U.current.set(Y.id,Oe);const Ie=nr(re,Y)===re.length-1?Oe-he:he-Oe,_e=wc({delta:Ie,initialLayout:de,panelConstraints:Re,pivotIndices:Be,prevLayout:de,trigger:"imperative-api"});kd(de,_e)||(v(_e),H.current.layout=_e,le&&le(_e),$s(re,_e,P.current))}}},[]),Ae=N.useCallback((Y,le)=>{const{onLayout:de}=G.current,{layout:re,panelDataArray:Re}=H.current;if(Y.constraints.collapsible){const he=Re.map(He=>He.constraints),{collapsedSize:Oe=0,panelSize:Be=0,minSize:Ne=0,pivotIndices:Ie}=vo(Re,Y,re),_e=le??Ne;if(tl(Be,Oe)){const He=U.current.get(Y.id),et=He!=null&&He>=_e?He:_e,nt=nr(Re,Y)===Re.length-1?Be-et:et-Be,it=wc({delta:nt,initialLayout:re,panelConstraints:he,pivotIndices:Ie,prevLayout:re,trigger:"imperative-api"});kd(re,it)||(v(it),H.current.layout=it,de&&de(it),$s(Re,it,P.current))}}},[]),Ee=N.useCallback(Y=>{const{layout:le,panelDataArray:de}=H.current,{panelSize:re}=vo(de,Y,le);return Ve(re!=null,`Panel size not found for panel "${Y.id}"`),re},[]),oe=N.useCallback((Y,le)=>{const{panelDataArray:de}=H.current,re=nr(de,Y);return Gx({defaultSize:le,dragState:I,layout:O,panelData:de,panelIndex:re})},[I,O]),Te=N.useCallback(Y=>{const{layout:le,panelDataArray:de}=H.current,{collapsedSize:re=0,collapsible:Re,panelSize:he}=vo(de,Y,le);return Ve(he!=null,`Panel size not found for panel "${Y.id}"`),Re===!0&&tl(he,re)},[]),Se=N.useCallback(Y=>{const{layout:le,panelDataArray:de}=H.current,{collapsedSize:re=0,collapsible:Re,panelSize:he}=vo(de,Y,le);return Ve(he!=null,`Panel size not found for panel "${Y.id}"`),!Re||ts(he,re)>0},[]),ne=N.useCallback(Y=>{const{panelDataArray:le}=H.current;le.push(Y),le.sort((de,re)=>{const Re=de.order,he=re.order;return Re==null&&he==null?0:Re==null?-1:he==null?1:Re-he}),H.current.panelDataArrayChanged=!0,L()},[L]);Wo(()=>{if(H.current.panelDataArrayChanged){H.current.panelDataArrayChanged=!1;const{autoSaveId:Y,onLayout:le,storage:de}=G.current,{layout:re,panelDataArray:Re}=H.current;let he=null;if(Y){const Be=Bx(Y,Re,de);Be&&(U.current=new Map(Object.entries(Be.expandToSizes)),he=Be.layout)}he==null&&(he=Px({panelDataArray:Re}));const Oe=X_({layout:he,panelConstraints:Re.map(Be=>Be.constraints)});W_(re,Oe)||(v(Oe),H.current.layout=Oe,le&&le(Oe),$s(Re,Oe,P.current))}}),Wo(()=>{const Y=H.current;return()=>{Y.layout=[]}},[]);const ae=N.useCallback(Y=>{let le=!1;const de=p.current;return de&&window.getComputedStyle(de,null).getPropertyValue("direction")==="rtl"&&(le=!0),function(Re){Re.preventDefault();const he=p.current;if(!he)return()=>null;const{direction:Oe,dragState:Be,id:Ne,keyboardResizeBy:Ie,onLayout:_e}=G.current,{layout:He,panelDataArray:et}=H.current,{initialLayout:bt}=Be??{},nt=vN(Ne,Y,he);let it=kx(Re,Y,Oe,Be,Ie,he);const Et=Oe==="horizontal";Et&&le&&(it=-it);const At=et.map(us=>us.constraints),Wt=wc({delta:it,initialLayout:bt??He,panelConstraints:At,pivotIndices:nt,prevLayout:He,trigger:SN(Re)?"keyboard":"mouse-or-touch"}),co=!kd(He,Wt);(gN(Re)||pN(Re))&&V.current!=it&&(V.current=it,!co&&it!==0?Et?FA(Y,it<0?IN:CN):FA(Y,it<0?NN:ON):FA(Y,0)),co&&(v(Wt),H.current.layout=Wt,_e&&_e(Wt),$s(et,Wt,P.current))}},[]),w=N.useCallback((Y,le)=>{const{onLayout:de}=G.current,{layout:re,panelDataArray:Re}=H.current,he=Re.map(He=>He.constraints),{panelSize:Oe,pivotIndices:Be}=vo(Re,Y,re);Ve(Oe!=null,`Panel size not found for panel "${Y.id}"`);const Ie=nr(Re,Y)===Re.length-1?Oe-le:le-Oe,_e=wc({delta:Ie,initialLayout:re,panelConstraints:he,pivotIndices:Be,prevLayout:re,trigger:"imperative-api"});kd(re,_e)||(v(_e),H.current.layout=_e,de&&de(_e),$s(Re,_e,P.current))},[]),M=N.useCallback((Y,le)=>{const{layout:de,panelDataArray:re}=H.current,{collapsedSize:Re=0,collapsible:he}=le,{collapsedSize:Oe=0,collapsible:Be,maxSize:Ne=100,minSize:Ie=0}=Y.constraints,{panelSize:_e}=vo(re,Y,de);_e!=null&&(he&&Be&&tl(_e,Re)?tl(Re,Oe)||w(Y,Oe):_e<Ie?w(Y,Ie):_e>Ne&&w(Y,Ne))},[w]),W=N.useCallback((Y,le)=>{const{direction:de}=G.current,{layout:re}=H.current;if(!p.current)return;const Re=Zf(Y,p.current);Ve(Re,`Drag handle element not found for id "${Y}"`);const he=MN(de,le);b({dragHandleId:Y,dragHandleRect:Re.getBoundingClientRect(),initialCursorPosition:he,initialLayout:re})},[]),ie=N.useCallback(()=>{b(null)},[]),y=N.useCallback(Y=>{const{panelDataArray:le}=H.current,de=nr(le,Y);de>=0&&(le.splice(de,1),delete P.current[Y.id],H.current.panelDataArrayChanged=!0,L())},[L]),X=N.useMemo(()=>({collapsePanel:ue,direction:l,dragState:I,expandPanel:Ae,getPanelSize:Ee,getPanelStyle:oe,groupId:S,isPanelCollapsed:Te,isPanelExpanded:Se,reevaluatePanelConstraints:M,registerPanel:ne,registerResizeHandle:ae,resizePanel:w,startDragging:W,stopDragging:ie,unregisterPanel:y,panelGroupElement:p.current}),[ue,I,l,Ae,Ee,oe,S,Te,Se,M,ne,ae,w,W,ie,y]),Z={display:"flex",flexDirection:l==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return N.createElement(Wf.Provider,{value:X},N.createElement(R,{...T,children:t,className:a,id:c,ref:p,style:{...Z,...A},[Zt.group]:"",[Zt.groupDirection]:l,[Zt.groupId]:S}))}const kN=N.forwardRef((e,t)=>N.createElement(UN,{...e,forwardedRef:t}));UN.displayName="PanelGroup";kN.displayName="forwardRef(PanelGroup)";function nr(e,t){return e.findIndex(a=>a===t||a.id===t.id)}function vo(e,t,a){const l=nr(e,t),c=l===e.length-1?[l-1,l]:[l,l+1],d=a[l];return{...t.constraints,panelSize:d,pivotIndices:c}}function zx({disabled:e,handleId:t,resizeHandler:a,panelGroupElement:l}){N.useEffect(()=>{if(e||a==null||l==null)return;const s=Zf(t,l);if(s==null)return;const c=d=>{if(!d.defaultPrevented)switch(d.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{d.preventDefault(),a(d);break}case"F6":{d.preventDefault();const h=s.getAttribute(Zt.groupId);Ve(h,`No group element found for id "${h}"`);const E=Jc(h,l),A=yN(h,t,l);Ve(A!==null,`No resize element found for id "${t}"`);const R=d.shiftKey?A>0?A-1:E.length-1:A+1<E.length?A+1:0;E[R].focus();break}}};return s.addEventListener("keydown",c),()=>{s.removeEventListener("keydown",c)}},[l,e,t,a])}function PN({children:e=null,className:t="",disabled:a=!1,hitAreaMargins:l,id:s,onBlur:c,onClick:d,onDragging:h,onFocus:E,onPointerDown:A,onPointerUp:R,style:T={},tabIndex:S=0,tagName:p="div",...I}){var b,O;const v=N.useRef(null),L=N.useRef({onClick:d,onDragging:h,onPointerDown:A,onPointerUp:R});N.useEffect(()=>{L.current.onClick=d,L.current.onDragging=h,L.current.onPointerDown=A,L.current.onPointerUp=R});const P=N.useContext(Wf);if(P===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:U,groupId:V,registerResizeHandle:G,startDragging:H,stopDragging:ue,panelGroupElement:Ae}=P,Ee=RR(s),[oe,Te]=N.useState("inactive"),[Se,ne]=N.useState(!1),[ae,w]=N.useState(null),M=N.useRef({state:oe});Wo(()=>{M.current.state=oe}),N.useEffect(()=>{if(a)w(null);else{const X=G(Ee);w(()=>X)}},[a,Ee,G]);const W=(b=l==null?void 0:l.coarse)!==null&&b!==void 0?b:15,ie=(O=l==null?void 0:l.fine)!==null&&O!==void 0?O:5;N.useEffect(()=>{if(a||ae==null)return;const X=v.current;Ve(X,"Element ref not attached");let Z=!1;return yx(Ee,X,U,{coarse:W,fine:ie},(le,de,re)=>{if(!de){Te("inactive");return}switch(le){case"down":{Te("drag"),Z=!1,Ve(re,'Expected event to be defined for "down" action'),H(Ee,re);const{onDragging:Re,onPointerDown:he}=L.current;Re==null||Re(!0),he==null||he();break}case"move":{const{state:Re}=M.current;Z=!0,Re!=="drag"&&Te("hover"),Ve(re,'Expected event to be defined for "move" action'),ae(re);break}case"up":{Te("hover"),ue();const{onClick:Re,onDragging:he,onPointerUp:Oe}=L.current;he==null||he(!1),Oe==null||Oe(),Z||Re==null||Re();break}}})},[W,U,a,ie,G,Ee,ae,H,ue]),zx({disabled:a,handleId:Ee,resizeHandler:ae,panelGroupElement:Ae});const y={touchAction:"none",userSelect:"none"};return N.createElement(p,{...I,children:e,className:t,id:s,onBlur:()=>{ne(!1),c==null||c()},onFocus:()=>{ne(!0),E==null||E()},ref:v,role:"separator",style:{...y,...T},tabIndex:S,[Zt.groupDirection]:U,[Zt.groupId]:V,[Zt.resizeHandle]:"",[Zt.resizeHandleActive]:oe==="drag"?"pointer":Se?"keyboard":void 0,[Zt.resizeHandleEnabled]:!a,[Zt.resizeHandleId]:Ee,[Zt.resizeHandleState]:oe})}PN.displayName="PanelResizeHandle";const Yx=3,ye={rulerHeight:30,trackHeight:14,slotPaddingTop:4,damageMarkerHeight:8,skillButtonHeight:28,buffCoverHeight:4,slotPaddingBottom:4,renderSlotHeight:()=>ye.slotPaddingTop+ye.damageMarkerHeight+ye.skillButtonHeight*1.5+ye.buffCoverHeight*Yx+ye.slotPaddingBottom,timelineCanvasHeight:(e,t)=>{let a=ye.rulerHeight;return a+=ye.trackHeight*e,a+=ye.renderSlotHeight()*t,t<al&&(a+=ye.addSlotButtonHeight),a},leftBufferWidth:20,addSlotButtonHeight:20},GN={drawMarkers:!0,drawDamageMarks:!0,drawHealingMarks:!0,drawMPTickMarks:!0,drawBuffIndicators:!0};function Vx(e){let t=new Blob([JSON.stringify(e)],{type:"text/plain;charset=utf-8"});return window.URL.createObjectURL(t)}function Kx(e){var l;let t="";(l=e.meta)==null||l.forEach(s=>{t+="#"+s.toString()+`
`}),e.body.forEach(s=>{for(let c=0;c<s.length;c++)t+=s[c].toString(),c<s.length-1&&(t+=",");t+=`
`});let a=new Blob([t],{type:"text/csv;charset=utf-8"});return window.URL.createObjectURL(a)}var sl=(e=>(e.Json="JSON",e.Csv="CSV",e.Png="PNG",e))(sl||{});function Zl(e){var c;const[t,a]=N.useState({jsonContent:{},csvContent:{body:[]},pngContent:void 0}),l=()=>{let d=e.getContentFn();e.fileFormat==="JSON"?a({jsonContent:d}):e.fileFormat==="CSV"?a({csvContent:d}):e.fileFormat==="PNG"?a({pngContent:d}):console.assert(!1)};let s="";return e.fileFormat==="JSON"?s=Vx(t.jsonContent):e.fileFormat==="CSV"?s=Kx(t.csvContent):e.fileFormat==="PNG"?s=((c=t.pngContent)==null?void 0:c.toDataURL())??"":console.assert(!1),u.jsx("a",{style:{color:Yt().fileDownload,marginRight:6},href:s,download:e.filename,onClick:()=>l(),onContextMenu:()=>l(),children:`[${e.displayName===void 0?"download":e.displayName}]`})}function Wx(e,t=a=>{console.log(a)}){let a=new FileReader;a.onload=function(l){var d,h;let s=((h=(d=l.target)==null?void 0:d.result)==null?void 0:h.toString())??"",c;try{c=JSON.parse(s)}catch{window.alert(_({en:"Parse error! Are you sure this is the correct file? This tool only reads text files in JSON format.",zh:"解析出错- 你确定文件没选错吗？本工具只读取JSON格式的文本文件"}))}t(c)},a.readAsText(e,"UTF-8")}const Ct={positionFromTimeAndScale:function(e,t){return e*t*100},timeFromPositionAndScale:function(e,t){return e/(t*100)},displayTime:function(e,t){let a=Math.abs(e),l=Math.floor(a/60),s=a-60*l;return(e<0?"-":"")+l.toString()+":"+(s<10?"0":"")+s.toFixed(t).toString()}};let qx=function(e){console.log("[asyncFetch] some error occurred")},Q_=new Map;function wN(e,t,a=qx){let l=Q_.get(e);if(l){t(l);return}const s=new XMLHttpRequest;s.addEventListener("error",a),s.addEventListener("load",c=>{t(s.responseText),Q_.set(e,s.responseText)}),s.open("GET",e),s.send()}function Wc(e){let t=e.trim(),a=1;e[0]==="-"&&(a=-1,e=e.substring(1));let l=t.indexOf(":");if(l<0)return parseFloat(t);let s=parseInt(t.substring(0,l)),c=parseFloat(t.substring(l+1));return a*(s*60+c)}function ns(e){return u.jsx("div",{className:"clickable",onClick:e.onClickFn,style:e.style,children:e.content})}function Xx(e){const a={position:"relative",display:"inline-block",verticalAlign:"top",border:"1px solid "+Yt().bgHighContrast,borderRadius:4,height:8,top:e.offsetY,width:e.width},l={background:`${e.backgroundColor}`,height:"100%",borderRadius:"inherit",width:`${e.progress*100}%`};return u.jsx("div",{style:a,children:u.jsx("div",{style:l})})}const Rf=26;function BN(e){const t=Rf-2,[a,l]=ft.useState(void 0);N.useEffect(()=>{let A=e.defaultSelectedIndex,R=dn("tabs: "+e.uniqueName);R!==null&&(R==="none"?A=void 0:A=parseInt(R)),l(A)},[e.defaultSelectedIndex,e.uniqueName]);const s=Yt(),c=function(A){const T="1px solid "+(A===a?s.bgHighContrast:s.bgMediumContrast),S="1px solid "+s.background;let p=T;(A===a||a===void 0)&&(p=S);let I=A===a?T:S,b=S,O=S;return A===a?(b=T,O=T):A>0&&(a===void 0||a+1!==A)&&(b=T),{margin:0,display:"inline-block",boxSizing:"border-box",padding:"0 12px",borderBottom:p,borderTop:I,borderLeft:b,borderRight:O,lineHeight:`${t}px`,color:A===a?s.emphasis:s.text,cursor:e.collapsible||A!==a?"pointer":"default"}},d=[];let h=[];for(let A=0;A<e.content.length;A++){const R=e.content[A],T=A===a;d.push(u.jsx("span",{style:c(A),onClick:()=>{let p=a;T?e.collapsible&&(p=void 0):p=A,l(p),Qt("tabs: "+e.uniqueName,p===void 0?"none":`${p}`)},children:R.titleNode},A));const S={display:T?"block":"none"};e.maxWidth!==void 0&&(S.maxWidth=e.maxWidth),h.push(u.jsx("div",{style:S,children:R.contentNode},A))}e.collapsible&&a!==void 0&&d.push(u.jsx("span",{onClick:()=>{l(void 0),Qt("tabs: "+e.uniqueName,"none")},children:u.jsx(mx,{style:{marginLeft:16,fontSize:14,cursor:"pointer",position:"relative",top:3}})},d.length));const E=navigator.userAgent.indexOf("Firefox")>=0;return u.jsxs("div",{style:{position:"relative",...e.style},children:[u.jsx("div",{children:d}),u.jsx("div",{className:e.scrollable?"visibleScrollbar":void 0,style:{display:a===void 0?"none":"block",height:e.height-Rf,boxSizing:"border-box",padding:`10px ${E?15:5}px`,overflowY:e.scrollable?"scroll":"hidden"},children:h})]})}function gR(e){let t=Yt(),a=[];for(let l=0;l<e.children.length;l++){const s=e.children[l],c=l<e.children.length-1?e.children[l+1]:void 0;if(a.push(u.jsxs(TN,{className:"invisibleScrollbar",defaultSize:s.defaultSize,minSize:s.minSize??20,style:{border:s.fullBorder===!0?`1px solid ${t.bgMediumContrast}`:void 0,boxSizing:"border-box",height:e.contentHeight,overflowY:"scroll"},children:[s.title?u.jsx("div",{style:{marginBottom:10},children:u.jsx("b",{children:s.title})}):void 0,s.content]},`column-${l}`)),l<e.children.length-1){const h=s.fullBorder===!0||c!==void 0&&c.fullBorder===!0?{margin:"0 5px"}:{borderLeft:"1px solid "+t.bgMediumContrast,margin:"0 15px 0 10px"};a.push(u.jsx(PN,{style:h},`divider-${l}`))}}return u.jsx(kN,{direction:"horizontal",children:a})}function Ut(e){var d;const t=h=>{e.onChange&&e.onChange(h.target.value)},a=Yt(),l=e.width??5;let s={color:((d=e.style)==null?void 0:d.color)??e.componentColor??a.text,backgroundColor:"transparent",outline:"none",border:"none",borderBottom:"1px solid "+(e.componentColor??a.text)},c=e.style??{};return u.jsxs("div",{style:{...c,color:e.componentColor},children:[u.jsx("span",{children:e.description}),u.jsx("input",{style:s,size:l,type:"text",value:e.defaultValue,onChange:t})]})}class Zx extends ft.Component{constructor(a){super(a);F(this,"props",{uniqueName:"anonSlider",defaultValue:"default slider value",description:"default description"});F(this,"state");F(this,"onChange");this.props=a,this.state={value:a.defaultValue??""},this.onChange=l=>{this.setState({value:l.target.value}),this.props.onChange&&this.props.onChange(l.target.value),Qt("slider: "+this.props.uniqueName,l.target.value)}}componentDidMount(){let a=this.state.value,l=dn("slider: "+this.props.uniqueName);l!==null&&(a=l,this.setState({value:a})),this.props.onChange&&this.props.onChange(a)}render(){return u.jsxs("div",{style:{display:"inline-block",...this.props.style},children:[u.jsx("span",{children:this.props.description??""}),u.jsx("input",{size:10,type:"range",value:this.state.value,min:.05,max:1,step:.025,onChange:this.onChange,style:{position:"relative",outline:"none"}})]})}}function Fc(e){const[t,a]=N.useState(!1);N.useEffect(()=>{let s=e.defaultChecked??!0,c=dn("checked: "+e.uniqueName);c!==null&&(s=parseInt(c)>0),a(s),e.onChange(s)},[]);const l={position:"relative",top:3,marginRight:"0.25em"};return u.jsxs("div",{style:{marginBottom:5},children:[u.jsx("input",{type:"checkbox",onChange:s=>{let c=s.currentTarget.checked;a(c),Qt("checked: "+e.uniqueName,c?"1":"0"),e.onChange(c)},checked:t,style:l}),u.jsx("span",{children:e.label})]})}class uw extends ft.Component{constructor(a){super(a);F(this,"myRef");this.myRef=ft.createRef()}scroll(){this.myRef.current&&this.myRef.current.scrollIntoView({behavior:"smooth"})}render(){return this.scroll(),u.jsx("div",{ref:this.myRef})}}class qo extends ft.Component{constructor(a){super(a);F(this,"props",{title:"(expand me)"});F(this,"state",{show:!1});F(this,"autoIndent",!0);F(this,"onClick");this.props=a,a.autoIndent===!1&&(this.autoIndent=!1),this.onClick=()=>{let c=!this.state.show;this.setState({show:c}),this.props.onExpand&&c&&this.props.onExpand(),this.props.onCollapse&&!c&&this.props.onCollapse(),Qt("exp: "+a.title,(c?1:0).toString())};let l=dn("exp: "+a.title),s=a.defaultShow??!1;l!==null&&(s=parseInt(l)===1),this.state={show:s}}render(){let a=this.autoIndent?{margin:10,paddingLeft:6,marginBottom:20}:{};return u.jsxs("div",{style:this.props.noMargin?{}:{marginTop:10,marginBottom:10},children:[u.jsx(ns,{content:u.jsxs("span",{children:[u.jsx("span",{children:this.state.show?"- ":"+ "}),this.props.titleNode?this.props.titleNode:this.props.title]}),onClickFn:this.onClick}),u.jsx("div",{style:{position:"relative",display:this.state.show?"block":"none"},children:u.jsx("div",{style:a,children:this.props.content})})]})}}function Tf(e){const t=ft.createRef();let a=e.defaultLoadUrl??"";const l=E=>{E.target&&(a=E.target.value)},s=()=>{let E=t.current;if(E&&E.files&&E.files.length>0){let A=E.files[0];Wx(A,R=>e.onLoadFn(R)),E.value=""}},c=()=>{let E=function(A){console.log("some error occurred")};wN(a,A=>{try{let R=JSON.parse(A);e.onLoadFn(R)}catch{E()}},A=>{E()})};let d=Yt(),h={color:d.text,background:"transparent",outline:"none",border:"none",borderBottom:"1px solid "+d.text,width:"30em"};return u.jsxs("div",{children:[u.jsxs("div",{children:[u.jsx("span",{children:e.label??_({en:"Load from file: ",zh:"从文件导入："})}),u.jsx("input",{style:{width:"110px",color:"transparent"},type:"file",ref:t,onChange:s})]}),e.allowLoadFromUrl?u.jsxs("form",{children:[u.jsx("span",{children:_({en:"Load from URL: ",zh:"从URL导入："})}),u.jsx("input",{defaultValue:a,style:h,onChange:l}),u.jsx("span",{children:" "}),u.jsx("button",{type:"submit",onClick:E=>{c(),E.preventDefault()},children:_({en:"load",zh:"加载"})})]}):void 0]})}function cn(e){let t=Yt();return u.jsx("span",{style:{fontSize:11,border:"1px solid "+t.bgHighContrast,borderRadius:2,padding:"1px 4px",background:t.bgLowContrast},children:e.text})}const Qx=100;function Je(e){let a={display:"inline-block",position:"relative",width:12,height:12,lineHeight:1,cursor:"help",background:Yt().bgHighContrast,borderRadius:6,textAlign:"center",verticalAlign:"middle"};const l=N.useRef(0),[s,c]=N.useState(!1);return u.jsxs(QC,{delay:0,open:s,children:[u.jsx("span",{id:`help-${e.topic}`,className:"help-icon global-help-tooltip",style:a,"data-tooltip-offset":4,onMouseEnter:()=>{const d=Date.now();d-l.current>Qx&&c(!0),l.current=d},onMouseLeave:()=>c(!1),children:u.jsx("span",{style:{position:"relative",top:-1,color:"white"},children:"?"})}),u.jsx(nN,{container:document.getElementById("globalHelpTooltipAnchor"),children:u.jsx(iN,{className:"tooltip-positioner",anchor:document.getElementById(`help-${e.topic}`),children:u.jsx(lN,{className:"help-tooltip tooltip",children:e.content})})})]})}function $x(e){var a,l;let t=Yt();return u.jsx("div",{style:{top:1+(((a=e.offset)==null?void 0:a.y)??0),left:((l=e.offset)==null?void 0:l.x)??0,marginRight:8,position:"relative",width:16,height:16,borderRadius:8,display:"inline-block",border:"1px solid "+t.bgHighContrast,verticalAlign:"top"},children:e.color&&u.jsx("div",{style:{backgroundColor:`${e.color}`,position:"absolute",top:2,bottom:2,left:2,right:2,borderRadius:"inherit"}})})}function Jx(e){var c,d;let t=Yt();const a=30,l=24;let s;return e.imgUrl?s=u.jsx("img",{src:e.imgUrl,alt:"resource img",style:{display:"block",margin:"2px auto",maxWidth:a-4,maxHeight:l-4}}):e.color&&(s=u.jsx("div",{style:{backgroundColor:e.color,position:"absolute",top:3,bottom:3,left:3,right:3}})),u.jsx("div",{style:{display:"inline-block",position:"relative",top:((c=e.offset)==null?void 0:c.y)??0,left:((d=e.offset)==null?void 0:d.x)??0,width:a,height:l,border:"1px solid "+t.bgHighContrast,marginRight:4},children:s})}function Yd(e={name:"placeholder",color:"#6cf",value:"0.34/1.00",progress:.34,width:100,hidden:!1}){return u.jsxs("div",{hidden:e.hidden,style:{marginBottom:4,lineHeight:"1.5em"},children:[u.jsx("div",{style:{display:"inline-block",height:"100%",width:108},children:e.name}),u.jsxs("div",{style:{width:200,display:"inline-block"},children:[u.jsx(Xx,{backgroundColor:e.color,progress:e.progress,width:e.width,offsetY:4}),u.jsx("div",{style:{marginLeft:6,height:"100%",display:"inline-block"},children:e.value})]})]})}function Js(e){const t=e.containerType==="box"||e.items.some(l=>l.imgUrl!==void 0),a=e.items.map((l,s)=>e.containerType==="circle"&&l.imgUrl===void 0?u.jsx($x,{color:l.color,offset:t?{x:0,y:3}:void 0},s):u.jsx(Jx,{color:l.color,imgUrl:l.imgUrl,offset:t?{x:-2,y:0}:void 0},s));return t?u.jsxs("div",{style:{marginBottom:4},children:[u.jsx("div",{style:{display:"inline-block",position:"relative",verticalAlign:"top",top:6,width:108},children:e.name}),u.jsx("div",{style:{display:"inline-block"},children:a}),e.label?u.jsx("div",{style:{marginLeft:6,display:"inline-block",position:"relative",verticalAlign:"top",top:6},children:e.label}):void 0]}):u.jsxs("div",{style:{marginBottom:4,lineHeight:"1.5em"},children:[u.jsx("div",{style:{display:"inline-block",height:"100%",width:108},children:e.name}),u.jsxs("div",{style:{width:200,display:"inline-block"},children:[u.jsx("div",{style:{display:"inline-block"},children:a}),e.label?u.jsx("div",{style:{marginLeft:6,height:"100%",display:"inline-block"},children:e.label}):void 0]})]})}function $_(e){return u.jsxs("div",{className:e.className,style:{marginBottom:4,lineHeight:"1.5em"},children:[u.jsx("div",{style:{display:"inline-block",height:"100%",width:108},children:e.name}),u.jsx("div",{style:{width:200,display:"inline-block"},children:u.jsx("div",{style:{display:"inline-block",marginLeft:6},children:e.text})})]})}const as=new Map;function $n(e,t){as.set(e,`Buffs/${t}`);const a=ot[e].maximumStacks??1;for(let l=2;l<=a;l++)as.set(e+l,`Buffs/${t.replace(ot[e].name,ot[e].name+l)}`)}Object.keys(aC).forEach(e=>{const t=ot[e].name;as.set(e,`Buffs/Role/${t}.png`)});Object.keys(nC).forEach(e=>as.set(e,"Buffs/Role/Tank Limit Break.png"));as.set("SPRINT","Buffs/General/Sprint.png");as.set("TINCTURE","Buffs/General/Tincture.png");function eU(e){let t=e.rscType;e.stacks>1&&(t+=e.stacks);let a;return e.rscType==="AUTOS_ENGAGED"||e.rscType==="REAR_POSITIONAL"||e.rscType==="FLANK_POSITIONAL"?a={height:40}:a={height:40},u.jsxs("div",{title:Zn(e.rscType),className:e.className+" buff "+e.rscType,children:[u.jsx(ns,{content:u.jsx("img",{style:a,src:"assets/"+as.get(t),alt:e.rscType}),style:{display:"inline-block",verticalAlign:"top",filter:e.enabled?"none":"grayScale(100%)"},onClickFn:()=>{e.onSelf&&(D.requestToggleBuff(e.rscType),D.updateStatusDisplay(D.game),D.updateSkillButtons(D.game),D.autoSave())}}),u.jsx("span",{className:"buff-label",style:{visibility:e.timeRemaining===void 0?"hidden":void 0},children:e.timeRemaining??"0.000"})]})}function Sf(e){const t=e.data;let a=[];for(let s=0;s<t.length;s++)a.push(u.jsx(eU,{...t[s]},s));let l={height:54,textAlign:"right",lineHeight:"1em"};return e.style&&(l={...l,...e.style}),u.jsx("div",{style:l,children:a})}function FN(e){let t=Yt(),a=e.data,l=u.jsx(Yd,{name:"GCD",color:t.resources.gcdBar,progress:a.gcdReady?0:1-a.timeTillGCDReady/a.gcd,value:a.timeTillGCDReady.toFixed(3),width:100,hidden:a.gcdReady}),s=u.jsx(Yd,{name:"casting/taxed",color:a.canMove?t.resources.gcdBar:t.resources.lockBar,progress:a.castLocked?1-a.castLockCountdown/a.castLockTotalDuration:0,value:a.castLockCountdown.toFixed(3),width:100,hidden:!a.castLocked}),c=u.jsx(Yd,{name:"using skill",color:t.resources.lockBar,progress:a.animLocked?1-a.animLockCountdown/a.animLockTotalDuration:0,value:a.animLockCountdown.toFixed(3),width:100,hidden:!a.animLocked});return u.jsxs("div",{style:{position:"absolute"},children:[l,s,c]})}function jN(e){const t=e.data.resources.map((l,s)=>{switch(l.kind){case"bar":return u.jsx(Yd,{name:l.name,color:l.color,progress:l.progress,value:l.valueString,width:l.widthPx??100,hidden:l.hidden??!1},"resourceDisplay"+s);case"counter":{let c=[];for(let d=0;d<l.maxStacks;d++)c.push({color:d<l.currentStacks?l.color:void 0});return u.jsx(Js,{containerType:"circle",name:l.name,label:`${l.currentStacks}/${l.maxStacks}`,items:c},"resourceDisplay"+s)}case"paint":{let c=[];for(let h=0;h<l.maxStacks;h++){const E=l.hasComet&&h===l.currentStacks-1?l.cometColor:l.holyColor;c.push({color:h<l.currentStacks?E:void 0,imgUrl:void 0})}let d=`${l.currentStacks}/${l.maxStacks}`;return u.jsx(Js,{containerType:"circle",name:l.name,label:d,items:c},"resourceDisplay"+s)}case"dance":{const c=l.currentStacks;let d=[l.emboiteColor,l.entrechatColor,l.jeteColor,l.pirouetteColor],h=[];for(let A=0;A<l.maxStacks;A++)h.push({color:A<c?d[A]:void 0});let E=`${c}/${l.maxStacks}`;return u.jsx(Js,{containerType:"circle",name:l.name,label:E,items:h},"resourceDisplay"+s)}case"sen":{const c=[{present:l.hasSetsu,color:l.setsuColor,name:"setsu"},{present:l.hasGetsu,color:l.getsuColor,name:"getsu"},{present:l.hasKa,color:l.kaColor,name:"ka"}],d=u.jsx(Je,{topic:"senExplanation",content:_({en:"from left to right: setsu (yukikaze), getsu (gekko/mangetsu), ka (kasha/oka)",zh:"从左到右：雪闪（雪风），月闪（月光/满月），花闪（花车/樱花）"})});return u.jsx(Js,{name:u.jsxs(u.Fragment,{children:[l.name," ",d]}),label:c.filter(h=>h.present).map(h=>h.name).join("+"),containerType:"circle",items:c.map(h=>({color:h.present?h.color:void 0}))},"resourceDisplay"+s)}case"coda":{const c=[{present:l.hasWanderers,color:l.wanderersColor},{present:l.hasMages,color:l.magesColor},{present:l.hasArmys,color:l.armysColor}],d=u.jsx(Je,{topic:"codaExplanation",content:_({en:"from left to right: wanderer's coda, mage's coda, army's coda"})});return u.jsx(Js,{name:u.jsxs(u.Fragment,{children:[l.name," ",d]}),containerType:"circle",items:c.map(h=>({color:h.present?h.color:void 0}))},"resourceDisplay"+s)}case"attunement":{const c=[{gem:l.ruby,color:l.rubyColor},{gem:l.topaz,color:l.topazColor},{gem:l.emerald,color:l.emeraldColor}];return u.jsxs("div",{children:[u.jsx(Js,{name:l.aetherName,containerType:"circle",items:c.map(d=>({color:d.gem?d.color:void 0}))}),u.jsx($_,{name:l.attunementName,text:l.attunementCount.toString()+(l.attunementCount>0?` | ${l.timeRemaining.toFixed(3)}`:"")})]},"resourceDisplay"+s)}default:return u.jsx($_,{name:l.name,text:l.text},"resourceDisplay"+s)}});let a={textAlign:"left",minHeight:"13.5em"};return e.style&&(a={...a,...e.style}),u.jsx("div",{style:a,children:t})}let zN=(e,t)=>{};class YN extends ft.Component{constructor(a){super(a);F(this,"state");this.state={time:0,resources:[],enemyBuffs:[],selfBuffs:[],level:100,layoutFn:l=>u.jsx("div",{})},zN=(l,s)=>{const c=l(fl(this.context));this.setState({layoutFn:s,...c})}}componentDidMount(){D.updateStatusDisplay(D.game)}render(){return u.jsxs("div",{style:{position:"relative",textAlign:"left",margin:"8px 0"},children:[u.jsx("div",{style:{position:"absolute",top:-8,right:0,zIndex:1},children:u.jsx(Je,{topic:"mainControlRegion",content:u.jsx("div",{className:"toolTip",children:_({en:u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"paragraph",children:[u.jsx("span",{style:{color:"lightgray"},children:"grey"})," border: not focused"]}),u.jsxs("div",{className:"paragraph",children:[u.jsx("b",{style:{color:"mediumpurple"},children:"purple"})," border: receiving input"]}),u.jsxs("div",{className:"paragraph",children:[u.jsx("b",{style:{color:"mediumseagreen"},children:"green"})," border: real-time"]}),u.jsxs("div",{className:"paragraph",children:[u.jsx("b",{style:{color:"darkorange"},children:"orange"})," border: viewing historical state, not receiving input"]})]}),ja:u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"paragraph",children:[u.jsx("span",{style:{color:"lightgray"},children:"グレー"})," : 未選択"]}),u.jsxs("div",{className:"paragraph",children:[u.jsx("b",{style:{color:"mediumpurple"},children:"紫"})," : 入力可"]}),u.jsxs("div",{className:"paragraph",children:[u.jsx("b",{style:{color:"mediumseagreen"},children:"緑"})," : リアルタイム"]}),u.jsxs("div",{className:"paragraph",children:[u.jsx("b",{style:{color:"darkorange"},children:"オレンジ"})," : 任意の時点の状態を確認中。入力不可"]})]})})})})}),this.state.layoutFn(this.state)]})}}F(YN,"contextType",Pa);class $t{constructor(t){F(this,"state");this.state=t}makeCommonTimer(t,a=!0){const l=this.state.resources.timeTillReady(t),s=this.state.resources.get(t);return{rscType:t,onSelf:a,enabled:s.enabled,stacks:s.availableAmount(),timeRemaining:l.toFixed(3),className:s.availableAmountIncludingDisabled()>0?"":"hidden"}}makeToggleableTimer(t,a=!0){const l=this.state.resources.timeTillReady(t),s=this.state.resources.get(t);return{rscType:t,onSelf:a,enabled:s.enabled,stacks:s.availableAmount(),timeRemaining:l.toFixed(3),className:s.availableAmountIncludingDisabled()>0?"":"hidden"}}makeCommonTimerless(t,a=!0){return{rscType:t,onSelf:a,enabled:!0,stacks:this.state.resources.get(t).availableAmount(),className:this.state.hasResourceAvailable(t)?"":"hidden"}}jobSpecificOtherTargetedBuffViewProps(){return[]}getAllOtherTargetedBuffViewProps(){const t=this.state.job,a=[];return It[t].role==="TANK"&&a.push(this.makeCommonTimer("REPRISAL",!1)),It[t].role==="MELEE"&&a.push(this.makeCommonTimer("FEINT",!1)),It[t].role==="CASTER"&&a.push(this.makeCommonTimer("ADDLE",!1)),[...this.jobSpecificOtherTargetedBuffViewProps(),...a]}jobSpecificSelfTargetedBuffViewProps(){return[]}getAllSelfTargetedBuffViewProps(){const t=this.state.job,a=this.state.resources,l=[];if(It[t].role==="TANK"){l.push(...["RAMPART","SHIELD_WALL","STRONGHOLD"].map(c=>this.makeCommonTimer(c)));const s=It[t].limitBreakBuff??"UNKNOWN";s&&l.push(this.makeCommonTimer(s))}return It[t].role==="MELEE"&&l.push(...["TRUE_NORTH","BLOODBATH"].map(s=>this.makeCommonTimer(s))),["TANK","MELEE","RANGED"].includes(It[t].role)&&l.push(this.makeCommonTimer("ARMS_LENGTH")),["HEALER","CASTER"].includes(It[t].role)&&l.push(...["SWIFTCAST","LUCID_DREAMING","SURECAST"].map(s=>this.makeCommonTimer(s))),l.push(this.makeCommonTimer("TINCTURE"),this.makeCommonTimer("SPRINT")),It[t].role==="MELEE"&&l.push(...["REAR_POSITIONAL","FLANK_POSITIONAL"].map(s=>({rscType:s,onSelf:!0,enabled:a.get(s).enabled,stacks:1,className:""}))),(It[t].role==="TANK"||It[t].role==="MELEE")&&l.push(...["AUTOS_ENGAGED"].map(s=>({rscType:s,onSelf:!0,enabled:a.get(s).available(1),stacks:1,className:""}))),[...this.jobSpecificSelfTargetedBuffViewProps(),...l]}jobSpecificResourceViewProps(t){return[]}getAllResourceViewProps(t){if(!It[this.state.job].usesMp)return this.jobSpecificResourceViewProps(t);const a=this.state.resources,l=a.timeTillReady("MANA"),s=a.get("MANA").availableAmount();return[{kind:"bar",name:"MP",color:t.resources.mana,progress:s/1e4,valueString:Math.floor(s)+"/10000"},{kind:"bar",name:_({en:"MP tick",zh:"跳蓝时间",ja:"MPティック"}),color:t.resources.manaTick,progress:1-l/3,valueString:(3-l).toFixed(3)+"/3"},...this.jobSpecificResourceViewProps(t)]}statusLayoutFn(t){return u.jsxs(u.Fragment,{children:[u.jsxs("div",{style:{display:"inline-block",verticalAlign:"top",width:"50%",height:"100%"},children:[u.jsxs("span",{style:{display:"block",marginBottom:10},children:[_({en:"time: ",zh:"战斗时间：",ja:"経過時間："}),`${Ct.displayTime(t.time,3)} (${t.time.toFixed(3)})`]}),t.resources?u.jsx(jN,{data:{level:t.level,resources:t.resources}}):void 0]}),u.jsxs("div",{style:{position:"relative",display:"inline-block",float:"right",width:"50%"},children:[t.resourceLocks?u.jsx(FN,{data:t.resourceLocks}):void 0,u.jsx(Sf,{data:t.enemyBuffs,style:{marginBottom:"3em"}}),u.jsx(Sf,{data:t.selfBuffs})]})]})}}function tU(e){return vr({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"},child:[]}]})(e)}function nU(e){return vr({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"},child:[]}]})(e)}let Sm=e=>{};function VN(e){return`
		table {
			border-collapse: collapse;
			width: 100%;
		}
		th, td {
			text-align: center;
			padding: 0.15em;
			border: 1px solid ${e};
			width: 33%
		}
	`}function er(e,t,a,l){let s=parseFloat(a),c=parseFloat(l);if(isNaN(s)||isNaN(c))return"n/a";let d=ht.preTaxCastTime(e,s,t);return(ht.afterFpsTax(c,d)-d+ht.afterFpsTax(c,jI)).toFixed(3)}function aU(e){let t=Pt(e.job,e.override.type),a;const l=Zn(e.override.type);if(t.isCoolDown)a=_({en:l+" full in "+e.override.timeTillFullOrDrop+"s",zh:`${l}将在${e.override.timeTillFullOrDrop}秒后转好`});else{a=l;const c=_({en:" (",zh:"（"}),d=_({en:") ",zh:"）"});e.override.type==="LEY_LINES"&&(a+=c+(e.override.effectOrTimerEnabled?_({en:"enabled",zh:"生效中"}):_({en:"disabled",zh:"未生效"}))+d),t.maxValue>1&&(a+=_({en:` (amount: ${e.override.stacks})`,zh:`（数量：${e.override.stacks}）`})),t.maxTimeout>=0&&(e.override.type==="POLYGLOT"?e.override.timeTillFullOrDrop>0&&(a+=_({en:` next stack ready in ${e.override.timeTillFullOrDrop}s`,zh:`距下一层${e.override.timeTillFullOrDrop}秒`})):e.override.effectOrTimerEnabled&&(a+=_({en:` drops in ${e.override.timeTillFullOrDrop}s`,zh:`将在${e.override.timeTillFullOrDrop}秒后消失`})))}a+=" ";let s;if(e.deleteFn){const c=e.deleteFn;s=u.jsx(ns,{content:"[x]",onClickFn:d=>{c(e.override.type)}})}return u.jsxs("div",{style:{marginTop:10,color:"mediumpurple"},children:[a,s]})}let gm=()=>{};function iU(e){const[,t]=N.useReducer(L=>L+1,0);N.useEffect(()=>(gm=t,()=>{gm=()=>{}}),[]);let a=_({en:"Unlike GCDs that have 2 digits of precision, cast times have 3. See About this tool/Implementation notes.",zh:"不同于GCD那样精确到小数点后2位，咏唱时间会精确到小数点后3位。详见 关于/实现细节"}),l=L=>D.gameConfig.adjustedCastTime(L).toFixed(3),s=L=>{let P=D.gameConfig.adjustedCastTime(L);return D.gameConfig.getAfterTaxCastTime(P).toFixed(3)},c=u.jsxs("div",{children:[u.jsx("style",{children:VN(Yt().bgHighContrast)}),u.jsx("table",{children:u.jsxs("tbody",{children:[u.jsxs("tr",{children:[u.jsx("th",{children:_({en:"Base",zh:"基准"})}),u.jsx("th",{children:_({en:"Pre-tax",zh:"税前"})}),u.jsx("th",{children:_({en:"After-tax",zh:"税后"})})]}),u.jsxs("tr",{children:[u.jsx("td",{children:"2.5"}),u.jsx("td",{children:l(2.5)}),u.jsx("td",{children:s(2.5)})]}),u.jsxs("tr",{children:[u.jsx("td",{children:"2.8"}),u.jsx("td",{children:l(2.8)}),u.jsx("td",{children:s(2.8)})]}),u.jsxs("tr",{children:[u.jsx("td",{children:"3.0"}),u.jsx("td",{children:l(3)}),u.jsx("td",{children:s(3)})]}),u.jsxs("tr",{children:[u.jsx("td",{children:"3.5"}),u.jsx("td",{children:l(3.5)}),u.jsx("td",{children:s(3.5)})]}),u.jsxs("tr",{children:[u.jsx("td",{children:"4.0"}),u.jsx("td",{children:l(4)}),u.jsx("td",{children:s(4)})]})]})})]}),d=D.game.lucidTickOffset.toFixed(3),h=_({en:"the random time offset of lucid dreaming ticks relative to mp ticks",zh:"醒梦buff期间，每次跳蓝后多久跳醒梦（由随机种子决定）"});const E=D.game.dotTickOffset.toFixed(3);let A=_({en:"the random time offset of DoT ticks relative to mp ticks",zh:"雷DoT期间，每次跳蓝后多久跳雷（由随机种子决定）"}),R=D.gameConfig.procMode,T=D.gameConfig.initialResourceOverrides.length;const S=D.gameConfig.legacy_casterTax;let p=_({en:`WARNING: this record was created in an earlier version of XIV in the Shell and uses the deprecated caster tax of ${S}s instead of calculating from your FPS input below. Hover for details: `,zh:`警告：此时间轴文件创建于一个更早版本的排轴器，因此计算读条时间时使用的是当时手动输入的读条税${S}秒（现已过时），而非由下方的“帧率”和“读条时间修正”计算得来。更多信息：`}),I=Yt().warning,b=(L,P)=>{const U=lC[L];if(U.warningContent)return u.jsx("p",{style:{color:P},children:_(U.warningContent)})},O=_({en:u.jsxs("div",{children:[u.jsx("div",{className:"paragraph",children:"The caster tax config is now replaced by 0.1s + FPS tax and is more precise. You can read more about FPS tax in the Github repository wiki's implementation notes section."}),u.jsx("div",{className:"paragraph",style:{color:I},children:"You are strongly encouraged to create a new record (in another timeline slot or from 'apply and reset') and migrate your fight plan. Support for loading legacy files might drop in the future."})]}),zh:u.jsxs("div",{children:[u.jsx("div",{className:"paragraph",children:"现在的“读条税”由固定的0.1s加自动计算的帧率税构成，模拟结果也更精确。有关帧率税的更多信息详见 关于/实现细节。"}),u.jsx("div",{className:"paragraph",style:{color:I},children:"排轴器今后的更新可能会导致无法加载过时的文件，所以强烈建议将此时间轴迁移到一个新建的存档中（添加时间轴，或者应用并重置时间轴）。"})]})}),v=u.jsxs("p",{style:{color:I},children:[p,u.jsx(Je,{topic:"legacy-caster-tax",content:O})]});return u.jsxs("div",{style:{textDecoration:e.dirty?"line-through":"none",marginLeft:5,paddingLeft:10,borderLeft:"1px solid "+Yt().bgHighContrast},children:[D.gameConfig.shellVersion<Kl.FpsTax?v:void 0,b(It[e.job].implementationLevel,I),[...wa,...Ga].includes(e.job)&&u.jsxs("div",{children:[_({en:"Lucid tick offset ",zh:"醒梦&跳蓝时间差 "}),u.jsx(Je,{topic:"lucidTickOffset",content:h}),": ",d]}),D.game.dotResources.length>0&&u.jsxs("div",{children:[_({en:"DoT tick offset ",zh:"跳雷&跳蓝时间差 "}),u.jsx(Je,{topic:"dotTickOffset",content:A}),": ",E]}),e.job==="SAM"&&u.jsx(u.Fragment,{children:u.jsxs("div",{children:[_({en:"Fuka GCD",zh:"风花GCD"}),":"," ",D.gameConfig.adjustedSksGCD(2.5,D.game.getFukaModifier()).toFixed(2)]})}),e.job==="BLM"?u.jsx(qo,{title:"castTimesTable",titleNode:u.jsxs("span",{style:{textDecoration:e.dirty?"line-through":"none"},children:[_({en:"Cast times table",zh:"咏唱时间表"})," ",u.jsx(Je,{topic:"castTimesTable",content:a})]}),defaultShow:!1,content:c}):void 0,u.jsxs("p",{children:[_({en:"Procs",zh:"随机数模式"}),": ",R]}),T>0&&u.jsx("p",{children:_({en:`${T} initial resource override(s)`,zh:`${T}项初始资源覆盖`})})]})}class lU extends ft.Component{constructor(a){super(a);F(this,"state");F(this,"setTickMode");F(this,"setTimeScale");F(this,"loadSettings");F(this,"saveSettings");this.saveSettings=s=>{let c=JSON.stringify({tickMode:s.tickMode,timeScale:s.timeScale});Qt("playbackSettings",c)},this.loadSettings=()=>{let s=dn("playbackSettings");if(s)return JSON.parse(s)},this.setTickMode=s=>{if(!s||!s.target||isNaN(parseInt(s.target.value)))return;this.setState({tickMode:parseInt(s.target.value)});let c=parseInt(s.target.value);isNaN(c)||(D.setTimeControlSettings({tickMode:c,timeScale:this.state.timeScale}),this.saveSettings({tickMode:c,timeScale:this.state.timeScale}))},this.setTimeScale=s=>{this.setState({timeScale:s});let c=parseFloat(s);isNaN(c)||(D.setTimeControlSettings({tickMode:this.state.tickMode,timeScale:c}),this.saveSettings({tickMode:this.state.tickMode,timeScale:c}))};let l=this.loadSettings();l?this.state={tickMode:l.tickMode,timeScale:l.timeScale}:this.state={tickMode:1,timeScale:2}}componentDidMount(){D.setTimeControlSettings({tickMode:this.state.tickMode,timeScale:this.state.timeScale})}render(){let a={position:"relative",top:3,marginRight:"0.75em"},l={display:"inline-block",marginRight:"0.5em"};return u.jsxs("div",{children:[u.jsxs("p",{children:[u.jsxs("label",{style:l,children:[u.jsx("input",{style:a,type:"radio",onChange:this.setTickMode,value:Ja.RealTimeAutoPause,checked:this.state.tickMode===Ja.RealTimeAutoPause,name:"tick mode"}),_({en:"real-time auto pause",zh:"实时(带自动暂停）"})]}),u.jsx(Je,{topic:"ctrl-realTimeAutoPause",content:u.jsxs("div",{className:"toolTip",children:[_({en:u.jsx("div",{className:"paragraph",children:"*Recommended*"}),zh:u.jsx("div",{className:"paragraph",children:"*推荐设置*"})}),_({en:u.jsxs("div",{className:"paragraph",children:["- click to use a skill. if the skill is on cooldown, or you're in an animation lock, then the simulation will automatically skip ahead to when the skill can be used again",u.jsx("br",{}),"- animation locks and cast bars will play out in sped-up real time until done"]}),zh:u.jsx("div",{className:"paragraph",children:"- 点击图标使用技能; 战斗时间会按下方设置的倍速自动前进直到可释放下一个技能。如果点击的技能CD没有转好，模拟会自动地快进到它CD转好并重试。"})})]})}),u.jsx("br",{}),u.jsxs("label",{style:l,children:[u.jsx("input",{style:a,type:"radio",onChange:this.setTickMode,value:Ja.Manual,checked:this.state.tickMode===Ja.Manual,name:"tick mode"}),_({en:"manual",zh:"手动"})]}),u.jsx(Je,{topic:"ctrl-manual",content:u.jsx("div",{className:"toolTip",children:_({en:u.jsxs("div",{className:"paragraph",children:["- click to use a skill. if the skill is on cooldown, or you're in an animation lock, then the simulation will automatically skip ahead to when the skill can be used again",u.jsx("br",{}),"- animation locks and cast times are skipped immediately"]}),zh:u.jsx("div",{className:"paragraph",children:"- 点击图标使用技能; 战斗时间会自动快进至可释放下一个技能。如果点击的技能CD没有转好，模拟会自动地快进到它CD转好并重试。"})})})})]}),u.jsx(Ut,{defaultValue:`${this.state.timeScale}`,description:u.jsxs("span",{children:[_({en:"time scale ",zh:"倍速 "}),u.jsx(Je,{topic:"timeScale",content:u.jsx("div",{children:_({en:"rate at which game time advances automatically (aka when in real-time)",zh:"战斗时间自动前进的速度"})})}),":"," "]}),onChange:this.setTimeScale})]})}}var ka,pm,WN,qN,XN,ZN;class KN extends ft.Component{constructor(a){super(a);ke(this,ka);F(this,"state");F(this,"updateTaxPreview");F(this,"updateSksTaxPreview");F(this,"handleSubmit");F(this,"setJob");F(this,"importGear");F(this,"setGearImportLink");F(this,"setSpellSpeed");F(this,"setSkillSpeed");F(this,"setLevel");F(this,"setCriticalHit");F(this,"setDirectHit");F(this,"setDetermination");F(this,"setPiety");F(this,"setAnimationLock");F(this,"setFps");F(this,"setGcdSkillCorrection");F(this,"setTimeTillFirstManaTick");F(this,"setCountdown");F(this,"setRandomSeed");F(this,"setProcMode");F(this,"setOverrideTimer");F(this,"setOverrideStacks");F(this,"setOverrideEnabled");F(this,"deleteResourceOverride");F(this,"removeImportedField");this.state={job:"BLM",shellVersion:Mf.version,gearImportLink:"",imported:!1,importedFields:[],level:`${kt.lvl100}`,spellSpeed:"0",skillSpeed:"0",criticalHit:"0",directHit:"0",determination:"0",piety:"0",animationLock:"0",fps:"0",gcdSkillCorrection:"0",timeTillFirstManaTick:"0",countdown:"0",randomSeed:"",procMode:jt.RNG,initialResourceOverrides:[],selectedOverrideResource:"MANA",overrideTimer:"0",overrideStacks:"0",overrideEnabled:!0,dirty:!1,b1TaxPreview:"n/a",gcdPreview:"n/a",taxedGcdPreview:"n/a",sksGcdPreview:"n/a",taxedSksGcdPreview:"n/a"},this.updateTaxPreview=(l,s,c)=>{let d=er(parseFloat(c),2.5,l,s);const{gcdStr:h,taxedGcdStr:E}=this.getTaxPreview(l,s,c);this.setState({b1TaxPreview:d,gcdPreview:h,taxedGcdPreview:E})},this.updateSksTaxPreview=(l,s,c)=>{const{gcdStr:d,taxedGcdStr:h}=this.getTaxPreview(l,s,c);this.setState({sksGcdPreview:d,taxedSksGcdPreview:h})},this.handleSubmit=l=>{if(ge(this,ka,WN).call(this)){let s=this.state.randomSeed;if(s.length===0){for(let d=0;d<4;d++)s+=Math.floor(Math.random()*10).toString();this.setState({randomSeed:s})}let c={...this.state,randomSeed:s};this.setConfigAndRestart(c),this.setState({dirty:!1,imported:!1,importedFields:[]}),D.scrollToTime()}l.preventDefault()},this.setJob=l=>{l.target.value!==this.state.job&&this.setState({initialResourceOverrides:[],dirty:!0}),this.setState({job:l.target.value,dirty:!0}),this.removeImportedField("job"),this.updateTaxPreview(this.state.spellSpeed,this.state.fps,this.state.level),this.updateSksTaxPreview(this.state.skillSpeed,this.state.fps,this.state.level)},this.setGearImportLink=l=>{this.setState({gearImportLink:l.target.value})},this.importGear=async l=>{l.preventDefault();const s=URL.parse(this.state.gearImportLink),c=new Headers;try{if(s&&s.hostname==="etro.gg"){const d=s.pathname.split("/");if(d[1]!=="gearset"&&d.length!==3)throw new Error("Invalid etro gearset link (hover ? in URL input box for details)");c.append("Content-Type","application/json");const h=await fetch("https://etro.gg/api/gearsets/"+d[2],{method:"GET",headers:c});if(h.ok){const E=await h.json(),A=new Map(E.totalParams.map(I=>[I.name,I.value]));if(!(E.jobAbbrev in It))throw new Error("Imported gearset was for a job ("+E.jobAbbrev+") that XIV in the Shell doesn't support");const R=ht.getSubstatBase(parseFloat(E.level)).toString(),T=A.get("SPS")??R,S=A.get("SKS")??R,p=["job","level","criticalHit","directHit","determination"];A.has("SPS")&&p.push("spellSpeed"),A.has("SKS")&&p.push("skillSpeed"),A.has("PIE")&&p.push("piety"),this.setState({job:E.jobAbbrev,level:E.level,spellSpeed:T,skillSpeed:S,criticalHit:A.get("CRT"),directHit:A.get("DH"),determination:A.get("DET"),piety:A.get("PIE"),imported:!0,importedFields:p,dirty:!0}),this.updateTaxPreview(T,this.state.fps,E.level),this.updateSksTaxPreview(S,this.state.fps,E.level)}else throw console.error(h),new Error("etro load failed (please check your link)")}else if(s&&s.hostname==="xivgear.app"){const d=s.searchParams.get("page");if(!d)throw new Error("xivgear link must be to a specific set (hover ? in URL input box for details)");const h=d.startsWith("sl|")?d.substr(3):d;c.append("Content-Type","application/json");const E=await fetch("https://api.xivgear.app/fulldata/"+h,{method:"GET",headers:c});if(E.ok){const A=await E.json();if(!(A.job in It))throw new Error("Imported gearset was for a job ("+A.job+") that XIV in the Shell doesn't support");const R=A.sets[0].computedStats;this.setState({job:A.job,level:A.level,spellSpeed:R.spellspeed,skillSpeed:R.skillspeed,criticalHit:R.crit,directHit:R.dhit,determination:R.determination,piety:R.piety,imported:!0,importedFields:["job","level","spellSpeed","skillSpeed","criticalHit","directHit","determination","piety"],dirty:!0}),this.updateTaxPreview(R.spellspeed.toString(),this.state.fps,A.level)}else throw console.error("xivgear load failed: "+E),new Error("xivgear load failed (please check your link)")}else throw new Error("Invalid gearset link (must be from etro.gg or xivgear.app)")}catch(d){console.error(d),window.alert(d.message)}},this.setSpellSpeed=l=>{this.setState({spellSpeed:l,dirty:!0}),this.removeImportedField("spellSpeed"),this.updateTaxPreview(l,this.state.fps,this.state.level)},this.setSkillSpeed=l=>{this.setState({skillSpeed:l,dirty:!0}),this.removeImportedField("skillSpeed"),this.updateSksTaxPreview(l,this.state.fps,this.state.level)},this.setLevel=l=>{this.setState({level:l.target.value,dirty:!0}),this.removeImportedField("level"),this.updateTaxPreview(this.state.spellSpeed,this.state.fps,l.target.value),this.updateSksTaxPreview(this.state.skillSpeed,this.state.fps,this.state.level)},this.setCriticalHit=l=>{this.setState({criticalHit:l,dirty:!0}),this.removeImportedField("criticalHit")},this.setDirectHit=l=>{this.setState({directHit:l,dirty:!0}),this.removeImportedField("directHit")},this.setDetermination=l=>{this.setState({determination:l,dirty:!0}),this.removeImportedField("determination")},this.setPiety=l=>{this.setState({piety:l,dirty:!0}),this.removeImportedField("piety")},this.setAnimationLock=l=>{this.setState({animationLock:l,dirty:!0})},this.setFps=l=>{this.setState({fps:l,dirty:!0}),this.updateTaxPreview(this.state.spellSpeed,l,this.state.level)},this.setGcdSkillCorrection=l=>{this.setState({gcdSkillCorrection:l,dirty:!0})},this.setTimeTillFirstManaTick=l=>{this.setState({timeTillFirstManaTick:l,dirty:!0})},this.setCountdown=l=>{this.setState({countdown:l,dirty:!0})},this.setRandomSeed=l=>{this.setState({randomSeed:l,dirty:!0})},this.setProcMode=l=>{this.setState({procMode:l.target.value,dirty:!0})},this.setOverrideTimer=l=>{this.setState({overrideTimer:l})},this.setOverrideStacks=l=>{this.setState({overrideStacks:l})},this.setOverrideEnabled=l=>{this.setState({overrideEnabled:l.target.checked})},this.deleteResourceOverride=l=>{let s=this.state.initialResourceOverrides;for(let c=0;c<s.length;c++)if(s[c].type===l){s.splice(c,1);break}this.setState({initialResourceOverrides:s,dirty:!0})},this.removeImportedField=l=>{const s=this.state.importedFields.indexOf(l);if(s>=0){const c=this.state.importedFields;c.splice(s,1),this.setState({importedFields:c})}}}getTaxPreview(a,l,s){let c=parseFloat(s),d=parseFloat(a),h=parseFloat(l),E,A;if(isNaN(c)||isNaN(d)||isNaN(h)||d<400)E="n/a",A="n/a";else{let R=ht.preTaxGcd(c,d,2.5);E=R.toFixed(2),A=ht.afterFpsTax(h,R).toFixed(3)}return{gcdStr:E,taxedGcdStr:A}}componentDidMount(){Sm=a=>{this.setState(a);let l=ht.preTaxGcd(a.level,a.spellSpeed,2.5),s=ht.preTaxGcd(a.level,a.skillSpeed,2.5);this.setState({dirty:!1,imported:!1,importedFields:[],b1TaxPreview:er(a.level,2.5,`${a.spellSpeed}`,`${a.fps}`),gcdPreview:l.toFixed(2),taxedGcdPreview:ht.afterFpsTax(a.fps,l).toFixed(3),sksGcdPreview:s.toFixed(2),sksTaxedGcdPreview:ht.afterFpsTax(a.fps,s).toFixed(3),selectedOverrideResource:ge(this,ka,pm).call(this,a.initialResourceOverrides)}),gm()}}setConfigAndRestart(a){if(isNaN(parseFloat(a.spellSpeed))||isNaN(parseFloat(a.skillSpeed))||isNaN(parseFloat(a.criticalHit))||isNaN(parseFloat(a.directHit))||isNaN(parseFloat(a.determination))||isNaN(parseFloat(a.animationLock))||isNaN(parseFloat(a.fps))||isNaN(parseFloat(a.gcdSkillCorrection))||isNaN(parseFloat(a.timeTillFirstManaTick))||isNaN(parseFloat(a.countdown))||isNaN(parseFloat(a.level))){window.alert("Some config fields are not numbers!");return}if(a.initialResourceOverrides===void 0&&(a.initialResourceOverrides=[]),!(a.job in It)){window.alert("Invalid job: "+a.job);return}D.setConfigAndRestart({job:a.job,level:parseFloat(a.level),spellSpeed:parseFloat(a.spellSpeed),skillSpeed:parseFloat(a.skillSpeed),criticalHit:parseFloat(a.criticalHit),directHit:parseFloat(a.directHit),determination:parseFloat(a.determination),piety:parseFloat(a.piety),animationLock:parseFloat(a.animationLock),fps:parseFloat(a.fps),gcdSkillCorrection:parseFloat(a.gcdSkillCorrection),timeTillFirstManaTick:parseFloat(a.timeTillFirstManaTick),countdown:parseFloat(a.countdown),randomSeed:a.randomSeed.trim(),procMode:a.procMode,initialResourceOverrides:a.initialResourceOverrides}),D.updateAllDisplay()}componentWillUnmount(){Sm=a=>{}}render(){let a=fl(this.context),l=this.state.shellVersion>=Kl.FpsTax?a.text:a.warning,s=parseFloat(this.state.level),c=u.jsxs("div",{children:[u.jsx("style",{children:VN(a.bgHighContrast)}),u.jsx("div",{style:{marginBottom:10},children:_({en:"Preview numbers based on your current spell speed and FPS input:",zh:"根据当前输入的咏速和帧率，你将得到如下读条+帧率税："})}),u.jsx("table",{children:u.jsxs("tbody",{children:[u.jsxs("tr",{children:[u.jsx("th",{children:_({en:"Base cast time",zh:"基础读条时间"})}),u.jsx("th",{children:_({en:"Caster + FPS tax",zh:"读条税+帧率税"})})]}),u.jsxs("tr",{children:[u.jsx("td",{children:"2.5"}),u.jsx("td",{children:this.state.b1TaxPreview})]}),u.jsxs("tr",{children:[u.jsx("td",{children:"2.8"}),u.jsx("td",{children:er(s,2.8,this.state.spellSpeed,this.state.fps)})]}),u.jsxs("tr",{children:[u.jsx("td",{children:"3.0"}),u.jsx("td",{children:er(s,3,this.state.spellSpeed,this.state.fps)})]}),u.jsxs("tr",{children:[u.jsx("td",{children:"3.5"}),u.jsx("td",{children:er(s,3.5,this.state.spellSpeed,this.state.fps)})]}),u.jsxs("tr",{children:[u.jsx("td",{children:"4.0"}),u.jsx("td",{children:er(s,4,this.state.spellSpeed,this.state.fps)})]})]})})]});const d=u.jsx("a",{href:"https://etro.gg",target:"_blank",rel:"noreferrer",children:"etro"}),h=u.jsx("a",{href:"https://xivgear.app",target:"_blank",rel:"noreferrer",children:"xivgear"}),E=u.jsxs("form",{onSubmit:this.importGear,children:[_({en:u.jsxs("span",{children:["Load stats from ",d,"/",h,":"," "]}),zh:u.jsxs("span",{children:["从",d,"或",h,"导入套装："]})}),u.jsx(Je,{topic:"gearImport",content:u.jsxs(u.Fragment,{children:[u.jsx("p",{children:_({en:u.jsxs("span",{children:["Enter and ",u.jsx(cn,{text:"Load"})," a link to a gearset from xivgear.app or etro.gg, edit the rest of config, then"," ",u.jsx(cn,{text:"apply and reset"}),"."]}),zh:u.jsxs("span",{children:["输入xivgear.app或etro.gg的套装链接并",u.jsx(cn,{text:"加载"}),"，调整其余角色属性，然后",u.jsx(cn,{text:"应用并重置时间轴"}),"。"]})})}),u.jsx("p",{children:_({en:"etro: Copy/paste the link to the set (example: https://etro.gg/gearset/e13d5960-4794-4dc4-b273-24ecfed6745e)",zh:"etro：复制粘贴套装链接（例：https://etro.gg/gearset/e13d5960-4794-4dc4-b273-24ecfed6745e）"})}),u.jsx("p",{children:_({en:'xivgear: At the top of the page, click "Export" -> "Selected Set" -> "Link to This Set" -> "Generate" (example: https://xivgear.app/?page=sl%7C143f3245-c35b-4391-8b2b-db5cc1a8de9a)',zh:'xivgear：从页面顶端点击 "Export" -> "Selected Set" -> "Link to This Set" -> "Generate"（例：https://xivgear.app/?page=sl%7C143f3245-c35b-4391-8b2b-db5cc1a8de9a）'})})]})}),u.jsxs("div",{style:{position:"relative",marginTop:5},children:[u.jsx(Ut,{style:{display:"inline-block"},width:25,description:"",onChange:S=>{this.setState({gearImportLink:S})}}),u.jsx("span",{children:" "}),u.jsx("input",{style:{display:"inline-block"},type:"submit",value:_({en:"Load",zh:"加载"})}),u.jsx(tU,{style:{display:this.state.imported?"inline":"none",color:a.success,position:"relative",top:4,marginLeft:8}})]})]});let A=S=>this.state.importedFields.indexOf(S)>-1?a.success:a.text,R=u.jsxs("div",{style:{marginBottom:10},children:[u.jsx("span",{children:_({en:"job: ",zh:"职业："})}),u.jsx("select",{style:{outline:"none",color:A("job")},value:this.state.job,onChange:this.setJob,children:$l.filter(S=>It[S].implementationLevel!=="UNIMPLEMENTED").map(S=>{const p=It[S].implementationLevel;return p!=="LIVE"?u.jsx("option",{value:S,children:S+` (${_(lC[p].label??{en:""})})`},S):u.jsx("option",{value:S,children:S},S)})})]}),T=u.jsxs("div",{style:{marginBottom:16},children:[u.jsxs("div",{children:[u.jsx("span",{children:_({en:"level: ",zh:"等级："})}),u.jsxs("select",{style:{outline:"none",color:A("level")},value:this.state.level,onChange:this.setLevel,children:[u.jsx("option",{value:kt.lvl100,children:"100"},kt.lvl100),u.jsx("option",{value:kt.lvl90,children:"90"},kt.lvl90),u.jsx("option",{value:kt.lvl80,children:"80"},kt.lvl80),u.jsx("option",{value:kt.lvl70,children:"70"},kt.lvl70)]})]}),u.jsxs("div",{children:[u.jsx(Ut,{style:{display:"inline-block",color:A("spellSpeed")},defaultValue:this.state.spellSpeed,description:_({en:"spell speed: ",zh:"咏速："}),onChange:this.setSpellSpeed}),u.jsxs("span",{children:[" ","(GCD: ",this.state.gcdPreview," ",u.jsx(Je,{topic:"gcdPreview",content:u.jsxs(u.Fragment,{children:[u.jsx("p",{children:_({en:"Preview of displayed GCD based on your spell speed.",zh:"当前咏速对应的游戏内显示的GCD."})}),u.jsx("p",{children:_({en:`Measured average GCD should be ${this.state.taxedGcdPreview} due to FPS tax`,zh:`由于帧率税的影响，测量得到的平均GCD为${this.state.taxedGcdPreview}`})})]})}),")"]})]}),u.jsxs("div",{children:[u.jsx(Ut,{style:{display:"inline-block",color:A("skillSpeed")},defaultValue:this.state.skillSpeed,description:_({en:"skill speed: ",zh:"技速："}),onChange:this.setSkillSpeed}),u.jsxs("span",{children:[" ","(GCD: ",this.state.sksGcdPreview," ",u.jsx(Je,{topic:"sksGcdPreview",content:u.jsxs(u.Fragment,{children:[u.jsx("p",{children:_({en:"Preview of displayed GCD based on your skill speed.",zh:"当前技速对应的游戏内显示的GCD."})}),u.jsx("p",{children:_({en:`Measured average GCD should be ${this.state.taxedSksGcdPreview} due to FPS tax`,zh:`由于帧率税的影响，测量得到的平均GCD为${this.state.taxedSksGcdPreview}`})})]})}),")"]})]}),u.jsx(Ut,{style:{color:A("criticalHit")},defaultValue:this.state.criticalHit,description:_({en:"crit: ",zh:"暴击："}),onChange:this.setCriticalHit}),u.jsx(Ut,{style:{color:A("directHit")},defaultValue:this.state.directHit,description:_({en:"direct hit: ",zh:"直击："}),onChange:this.setDirectHit}),u.jsx(Ut,{style:{color:A("determination")},defaultValue:this.state.determination,description:_({en:"determination: ",zh:"信念："}),onChange:this.setDetermination}),u.jsx(Ut,{style:{color:A("piety")},defaultValue:this.state.piety,description:_({en:"piety: ",zh:"信仰："}),onChange:this.setPiety}),u.jsx(Ut,{defaultValue:this.state.animationLock,description:_({en:"animation lock: ",zh:"能力技后摇："}),onChange:this.setAnimationLock}),u.jsxs("div",{children:[u.jsx(Ut,{componentColor:l,style:{display:"inline-block"},defaultValue:this.state.fps,description:_({en:"FPS: ",zh:"帧率："}),onChange:this.setFps}),u.jsxs("span",{children:[" ","(",_({en:"2.5s total tax",zh:"2.5s读条+帧率税"}),":"," ",this.state.b1TaxPreview," ",u.jsx(Je,{topic:"b1TaxPreview",content:c}),")"]})]}),u.jsx(Ut,{componentColor:l,defaultValue:this.state.gcdSkillCorrection,description:u.jsxs("span",{children:[_({en:"GCD correction",zh:"GCD时长修正"})," ",u.jsx(Je,{topic:"cast-time-correction",content:_({en:"Leaving this at 0 will probably give you the most accurate simulation. But if you want to manually correct your GCD skill durations (including casts) for whatever reason, you can put a small number (can be negative)",zh:"正常情况下填0即能得到最精确的模拟结果。如果实在需要修正的话，这里输入的时长会被加到你的每个GCD技能（包括读条）耗时里（可以为负）"})}),":"," "]}),onChange:this.setGcdSkillCorrection}),u.jsx(Ut,{defaultValue:this.state.timeTillFirstManaTick,description:_({en:"time till first MP tick: ",zh:"距首次跳蓝时间："}),onChange:this.setTimeTillFirstManaTick}),u.jsx(Ut,{defaultValue:this.state.countdown,description:u.jsxs("span",{children:[_({en:"countdown ",zh:"倒数时间 "}),u.jsx(Je,{topic:"countdown",content:_({en:"can use a negative countdown to start from a specific time of fight",zh:"可以是负数，时间轴会从战斗中途某个时间开始显示"})}),":"," "]}),onChange:this.setCountdown}),u.jsx(Ut,{defaultValue:this.state.randomSeed,description:u.jsxs("span",{children:[_({en:"random seed ",zh:"随机种子 "}),u.jsx(Je,{topic:"randomSeed",content:_({en:"can be anything, or leave empty to get 4 random digits.",zh:"可以是任意字符串，或者留空，会获得4个随机数字"})}),":"," "]}),onChange:this.setRandomSeed}),u.jsxs("div",{children:[u.jsxs("span",{children:[_({en:"proc mode ",zh:"随机BUFF获取 "}),u.jsx(Je,{topic:"procMode",content:_({en:"Default RNG: 40% Firestarter",zh:"RNG会像游戏内一样，相应技能40%概率获得火苗，Always则每次都会触发火苗，Never则从不触发。"})}),":"," "]}),u.jsxs("select",{style:{outline:"none"},value:this.state.procMode,onChange:this.setProcMode,children:[u.jsx("option",{value:jt.RNG,children:"RNG"},jt.RNG),u.jsx("option",{value:jt.Never,children:"Never"},jt.Never),u.jsx("option",{value:jt.Always,children:"Always"},jt.Always)]})]}),ge(this,ka,ZN).call(this),u.jsxs("button",{onClick:this.handleSubmit,style:{width:"100%",fontWeight:this.state.dirty?"bold":"normal"},children:[_({en:"apply and reset",zh:"应用并重置时间轴"}),this.state.dirty?"*":""]})]});return u.jsxs("div",{style:{marginBottom:20},children:[E,u.jsx("br",{}),R,u.jsx(iU,{job:D.getActiveJob(),dirty:this.state.dirty}),T,u.jsx("p",{children:_({en:"You can also import/export fights from/to local files at the bottom of the page.",zh:"页面底部有导入和导出战斗文件相关选项。"})})]})}}ka=new WeakSet,pm=function(a){let l="aba aba",s=new Set;a.forEach(c=>{s.add(c.type)});for(let c of ll(this.state.job).keys())if(!s.has(c)){l=c;break}return l},WN=function(){let a=new Map;if(this.state.initialResourceOverrides.forEach(h=>{a.set(h.type,h)}),a.has("ASTRAL_FIRE")&&a.has("UMBRAL_ICE")){let h=a.get("ASTRAL_FIRE").stacks,E=a.get("UMBRAL_ICE").stacks;if(h>0&&E>0)return window.alert("shouldn't have both AF and UI stacks"),!1}let l=0,s=0,c=0;if(a.has("ASTRAL_FIRE")&&(l=a.get("ASTRAL_FIRE").stacks),a.has("UMBRAL_ICE")&&(s=a.get("UMBRAL_ICE").stacks),a.has("UMBRAL_HEART")&&(c=a.get("UMBRAL_HEART").stacks),c>0&&l===0&&s===0)return window.alert("since there's at least one UH stack, there should also be Enochian and AF or UI"),!1;let d=!1;return(l>0||s>0||c>0)&&(d=!0),a.has("POLYGLOT")&&a.get("POLYGLOT").timeTillFullOrDrop>0&&!d?(window.alert("since a timer for polyglot is set (time till next stack > 0), there must also be AF/UI"),!1):!0},qN=function(){let a=this.state.selectedOverrideResource,l=ll(this.state.job).get(a),s=parseFloat(this.state.overrideTimer),c=parseInt(this.state.overrideStacks),d=this.state.overrideEnabled;if(a==="POLYGLOT"&&this.state.overrideTimer===""&&(s=0),isNaN(c)||isNaN(s)){window.alert("some inputs are not numbers!");return}let h;if(l.isCoolDown){let A=l.maxStacks*l.cdPerStack;if(s<0||s>A){window.alert("invalid input timeout (must be in range [0, "+A+"])");return}h={type:a,timeTillFullOrDrop:s,stacks:l.maxStacks>1?c:1,effectOrTimerEnabled:!0}}else{if((l.maxValue>1||l.maxValue===l.defaultValue)&&a!=="PARADOX"&&(c<0||c>l.maxValue)){window.alert("invalid input amount (must be in range [0, "+l.maxValue+"])");return}if(l.maxTimeout>=0&&(s<0||s>l.maxTimeout)){window.alert("invalid input timeout (must be in range [0, "+l.maxTimeout+"])");return}h={type:a,timeTillFullOrDrop:l.maxTimeout>=0?s:-1,stacks:l.maxValue>1||l.maxValue===l.defaultValue?c:1,effectOrTimerEnabled:a==="LEY_LINES"?d:!0}}let E=this.state.initialResourceOverrides;E.push(h),this.setState({initialResourceOverrides:E,dirty:!0})},XN=function(){const a=ll(this.state.job);let l=new Set;this.state.initialResourceOverrides.forEach(R=>{l.add(R.type)});const s=[];for(let R of a.keys())l.has(R)||s.push({rsc:R,isCoolDown:a.get(R).isCoolDown?1:0});let c=s.sort((R,T)=>R.isCoolDown-T.isCoolDown).map((R,T)=>u.jsx("option",{value:R.rsc,children:Zn(R.rsc)},T)),d=this.state.selectedOverrideResource,h=a.get(d),E;if(h!==void 0){let R,T,S,p="-1",I,b="0",O;h.isCoolDown?(R=!0,T=!1,S=!1,p=this.state.overrideTimer,I=this.setOverrideTimer):(h.maxTimeout>=0?(R=!0,p=this.state.overrideTimer,I=this.setOverrideTimer):R=!1,h.maxValue>1||h.maxValue===h.defaultValue?(T=!0,b=this.state.overrideStacks,O=this.setOverrideStacks):T=!1,S=d==="LEY_LINES");let v;h.isCoolDown?v=_({en:"Time till full: ",zh:"距CD转好时间："}):d==="POLYGLOT"?v=_({en:"Time till next stack: ",zh:"距下一层时间："}):v=_({en:"Time till drop: ",zh:" 距状态消失时间："});let L=_({en:"enabled",zh:"生效中"});E=u.jsxs("div",{style:{margin:"6px 0"},children:[u.jsx("div",{hidden:!R,children:u.jsx(Ut,{description:v,defaultValue:p,onChange:I})}),u.jsx("div",{hidden:!T,children:u.jsx(Ut,{description:_({en:"Amount: ",zh:"数量："}),defaultValue:b,onChange:O})}),u.jsxs("div",{hidden:!S,children:[u.jsx("input",{style:{position:"relative",top:3,marginRight:5},type:"checkbox",checked:this.state.overrideEnabled,onChange:this.setOverrideEnabled}),u.jsx("span",{children:L})]})]})}const A=Hf(this.context,"bgMediumContrast");return u.jsx("div",{children:u.jsxs("form",{onSubmit:R=>{ge(this,ka,qN).call(this),this.setState({selectedOverrideResource:ge(this,ka,pm).call(this,this.state.initialResourceOverrides)}),R.preventDefault()},style:{marginTop:16,outline:"1px solid "+A,outlineOffset:6},children:[u.jsx("select",{value:this.state.selectedOverrideResource,onChange:R=>{R.target&&this.setState({selectedOverrideResource:R.target.value,overrideEnabled:R.target.value==="LEY_LINES"?this.state.overrideEnabled:!0})},children:c}),E,u.jsx("input",{type:"submit",value:_({en:"add override",zh:"应用此状态"})})]})})},ZN=function(){let a=[];for(let l=0;l<this.state.initialResourceOverrides.length;l++){let s=this.state.initialResourceOverrides[l];a.push(u.jsx(aU,{job:this.state.job,override:s,deleteFn:this.deleteResourceOverride},l))}return u.jsx("div",{style:{marginTop:10},children:u.jsx(qo,{title:"overrideInitialResources",titleNode:u.jsxs("span",{children:[_({en:"Override initial resources",zh:"指定初始资源"})," ",u.jsx(Je,{topic:"overrideInitialResources",content:_({en:u.jsxs("div",{children:[u.jsx("div",{className:"paragraph",style:{color:"orangered"},children:u.jsx("b",{children:"Can create invalid game states. Go over Instructions/Troubleshoot first and use carefully at your own risk!"})}),u.jsx("div",{className:"paragraph",children:"Also, currently thunder dot buff created this way doesn't actually tick. It just shows the remaining buff timer."}),u.jsx("div",{className:"paragraph",children:"I would recommend saving settings (stats, lines presets, timeline markers etc.) to files first, in case invalid game states really mess up the tool and a complete reset is required."})]}),zh:u.jsxs("div",{children:[u.jsx("div",{className:"paragraph",style:{color:"orangered"},children:u.jsx("b",{children:"错误的初始资源可能会导致非法游戏状态。请在阅读工具顶部的使用说明/常见问题后慎重使用，并优先自行排查问题！"})}),u.jsx("div",{className:"paragraph",children:"另：当前靠初始资源覆盖添加的雷dot只显示剩余时间，不会结算伤害。"}),u.jsx("div",{className:"paragraph",children:"使用此功能时，请最好先下载保存各项数据（面板数值，技能轴，时间轴预设等），以防造成未知错误后排轴器重置导致的数据丢失。"})]})})})]}),content:u.jsxs("div",{children:[u.jsx("button",{onClick:l=>{this.setState({initialResourceOverrides:[],dirty:!0}),l.preventDefault()},children:_({en:"clear all overrides",zh:"清除所有指定初始资源"})}),a,ge(this,ka,XN).call(this)]})})})},F(KN,"contextType",Pa);function QN(e){let t=$l[0],a=0;return $l.forEach(l=>{const s=e.reduce((c,d)=>f1(l,d)?c+1:c,0);s>a&&(t=l,a=s)}),t}var Ql,Vd,$N;class oU{constructor(){ke(this,Ql);F(this,"presetLines",[]);ge(this,Ql,$N).call(this)}serialized(){return{fileType:Ai.SkillSequencePresets,presets:this.presetLines.map(({actions:t,job:a})=>t.serialized())}}deserializeAndAppend(t){for(let a of t.presets){const l=Cr.deserialize(a.actions);l.name=a.name;const s=l.actions.flatMap(c=>c.info.type===vt.Skill?[c.info.skillName]:[]);this.addLine(l,a.job??QN(s))}}getLinesForJob(t){return this.presetLines.flatMap(({actions:a,job:l})=>l===t?[a]:[])}addLine(t,a){this.presetLines.push({actions:t,job:a}),Xl(),ge(this,Ql,Vd).call(this)}deleteLine(t){for(let a=0;a<this.presetLines.length;a++)if(this.presetLines[a].actions===t){this.presetLines.splice(a,1),Xl(),ge(this,Ql,Vd).call(this);return}console.assert(!1)}deleteAllLines(){this.presetLines=[],Xl(),ge(this,Ql,Vd).call(this)}}Ql=new WeakSet,Vd=function(){Qt("presetLines",JSON.stringify(this.serialized()))},$N=function(){let t=dn("presetLines");if(t!==null){let a=JSON.parse(t);return this.deserializeAndAppend(a),!0}return!1};const sU=new Set(["BLIZZARD","FIRE","BLIZZARD_II","FIRE_II","BLIZZARD_III","FIRE_III","FREEZE","FLARE","BLIZZARD_IV","FIRE_IV","DESPAIR","HIGH_FIRE_II","HIGH_BLIZZARD_II","FLARE_STAR"]),rU=new Set(["FOUL","XENOGLOSSY","PARADOX"]),wl=new Set([]),Fn=e=>D.getUntargetableMask()&&D.timeline.duringUntargetable(e),Nr=(e,t)=>D.getUntargetableMask()?D.timeline.getTargetableDurationBetween(e,t):t-e;function ko(e){return e.info.type===vt.Skill&&D.game.dotSkills.includes(e.info.skillName)}function cU(e,t,a){console.assert(ko(e),`${e.getNameForMessage()} is not registered as a dot skill`);let l=e.getInitialPotency(),s={castTime:e.tmp_startLockTime?e.tmp_startLockTime-D.gameConfig.countdown:0,applicationTime:e.applicationTime?e.applicationTime-D.gameConfig.countdown:0,displayedModifiers:[],gap:0,override:0,mainPotencyHit:!0,baseMainPotency:0,baseDotPotency:0,initialHitCalculationModifiers:[],tickCalculationModifiers:[],totalNumTicks:0,numHitTicks:0,potencyWithoutPot:0,potPotency:0,partyBuffPotency:0,targetCount:e.targetCount,mainHitFalloff:(l==null?void 0:l.falloff)??0};s.gap=e.getOverTimeGap(t,"damage"),s.override=e.getOverTimeOverrideAmount(t,"damage"),s.baseMainPotency=(l==null?void 0:l.base)??0,s.initialHitCalculationModifiers=(l==null?void 0:l.modifiers)??[],s.mainPotencyHit=e.hitBoss(Fn),s.tickCalculationModifiers=s.initialHitCalculationModifiers.filter(E=>E.source!==z.COMBO&&E.source!==z.POSITIONAL);for(let E=0;E<s.initialHitCalculationModifiers.length;E++){const A=s.initialHitCalculationModifiers[E].source;[z.ENO,z.FUGETSU,z.NO_MERCY,z.POWER_SURGE,z.LANCE_CHARGE,z.LIFE_OF_THE_DRAGON,z.BATTLE_LITANY,z.FIGHT_OR_FLIGHT].includes(A)&&s.displayedModifiers.push(A)}e.getDotPotencies(t).forEach((E,A)=>{E.hasResolved()&&(s.totalNumTicks++,s.baseDotPotency=E.base,E.hasHitBoss(Fn)&&s.numHitTicks++)});let c=e.getPotency({tincturePotencyMultiplier:1,includePartyBuffs:!1,untargetable:Fn,includeSplash:!0}).applied,d=e.getPotency({tincturePotencyMultiplier:D.getTincturePotencyMultiplier(),includePartyBuffs:!1,untargetable:Fn,includeSplash:!0}).applied,h=e.getPotency({tincturePotencyMultiplier:D.getTincturePotencyMultiplier(),includePartyBuffs:!0,untargetable:Fn,includeSplash:!0}).applied;return s.potencyWithoutPot=c,s.potPotency=d-c,s.partyBuffPotency=h-d,s}function uU(e){let t={basePotency:0,displayedModifiers:[],calculationModifiers:[],falloff:1,targetCount:1};if(e.info.type===vt.Skill){const a=e.info.skillName,l=e.getInitialPotency();if(l)if(t.targetCount=e.targetCount,t.falloff=l.falloff??1,sU.has(a)){t.basePotency=l.base,t.calculationModifiers=l.modifiers;for(const s of l.modifiers){const c=s.source;if(c!==z.ENO&&c!==z.POT){t.displayedModifiers.push(c);break}}}else if(rU.has(a))for(const s of l.modifiers){const c=s.source;if(c===z.ENO){t.basePotency=l.base,t.displayedModifiers=[c],t.calculationModifiers=l.modifiers;break}}else if(ko(e))t.basePotency=l.base,e.info.targetCount=l.targetCount;else{t.basePotency=l.base;for(const s of l.modifiers){const c=s.source;c!==z.POT&&c!==z.NO_CDH&&(t.displayedModifiers.push(c),t.calculationModifiers.push(s))}}return t}else return console.assert(!1),t}function dU(e,t){if(e.length!==t.length)return!1;for(let a=0;a<e.length;a++)if(e[a]!==t[a])return!1;return!0}function fU(e,t){let a=uU(t),l={mainTableIndex:-1,expandedNode:a};for(let s=0;s<e.length;s++)if(t.info.type===vt.Skill&&t.info.skillName===e[s].skillName&&dU(a.displayedModifiers,e[s].displayedModifiers)&&t.targetCount===e[s].targetCount)return l.mainTableIndex=s,l;return l}function ti(e){return!wl.has(e)}function hU(){return wl.size===0}function J_(e){e.include&&wl.has(e.skillNameOrDoT)?(wl.delete(e.skillNameOrDoT),e.skillNameOrDoT==="DoT"?D.game.dotSkills.forEach(t=>wl.delete(t)):D.game.dotSkills.includes(e.skillNameOrDoT)&&wl.delete("DoT")):(wl.add(e.skillNameOrDoT),e.skillNameOrDoT!=="DoT"&&D.game.dotSkills.includes(e.skillNameOrDoT)&&wl.add("DoT")),D.displayCurrentState(),D.updateStats()}function EU(e){let t={totalDuration:0,targetableDuration:0,potency:{applied:0,pending:0},gcdSkills:{applied:0,pending:0}},a=D.record.getFirstSelection(),l=D.record.getLastSelection();if(a&&l&&a.tmp_startLockTime!==void 0&&l.tmp_endLockTime!==void 0){t.totalDuration=l.tmp_endLockTime-a.tmp_startLockTime;let s=D.gameConfig.countdown;t.targetableDuration=Nr(a.tmp_startLockTime-s,l.tmp_endLockTime-s)}return D.record.iterateSelected(s=>{if(s.info.type===vt.Skill&&!(s.info.skillName in il)){const c=ti(s.info.skillName);D.game.skillsList.get(s.info.skillName).cdName==="cd_GCD"&&c&&(s.hitBoss(Fn)?t.gcdSkills.applied++:s.resolved()||t.gcdSkills.pending++);let h=s.getPotency({tincturePotencyMultiplier:D.getTincturePotencyMultiplier(),untargetable:Fn,includePartyBuffs:!0,excludeDoT:ko(s)&&!ti("DoT"),includeSplash:!0});c&&(t.potency.applied+=h.applied,t.potency.pending+=h.snapshottedButPending)}}),t}function AU(e){let t=jc.Normal;D.displayingUpToDateGameState||(t=jc.Historical),D.record.getFirstSelection()&&(t=jc.Selected);let a={applied:0,pending:0},l={applied:0,pending:0},s=[],c={totalPotencyWithoutPot:0,totalPotPotency:0,totalPartyBuffPotency:0};const d=new Map;let h=new Map;const E=A=>{if(A.info.type===vt.Skill){const R=A.info.skillName,T=ti(R),S=R in il;D.game.skillsList.get(R).cdName==="cd_GCD"&&T&&(A.hitBoss(Fn)?l.applied++:A.resolved()||l.pending++);let I=A.getPotency({tincturePotencyMultiplier:D.getTincturePotencyMultiplier(),untargetable:Fn,includePartyBuffs:!0,includeSplash:!0,excludeDoT:ko(A)&&!ti("DoT")});if(T&&!S&&(a.applied+=I.applied,a.pending+=I.snapshottedButPending),A.resolved()){let b=fU(s,A);b.mainTableIndex<0&&(s.push({skillName:R,displayedModifiers:b.expandedNode.displayedModifiers,basePotency:S?0:b.expandedNode.basePotency,calculationModifiers:b.expandedNode.calculationModifiers,usageCount:0,hitCount:0,totalPotencyWithoutPot:0,showPotency:A.anyPotencies(),potPotency:0,potCount:0,partyBuffPotency:0,falloff:b.expandedNode.falloff,targetCount:b.expandedNode.targetCount}),b.mainTableIndex=s.length-1);const O=A.hitBoss(Fn);if(s[b.mainTableIndex].usageCount+=1,O&&(s[b.mainTableIndex].hitCount+=1),S)return;let v=A.getPotency({tincturePotencyMultiplier:1,untargetable:Fn,includePartyBuffs:!1,excludeDoT:ko(A)&&!ti("DoT"),includeSplash:!0}).applied,L=A.getPotency({tincturePotencyMultiplier:D.getTincturePotencyMultiplier(),untargetable:Fn,includePartyBuffs:!1,excludeDoT:ko(A)&&!ti("DoT"),includeSplash:!0}).applied,P=A.getPotency({tincturePotencyMultiplier:D.getTincturePotencyMultiplier(),untargetable:Fn,includePartyBuffs:!0,excludeDoT:ko(A)&&!ti("DoT"),includeSplash:!0}).applied;s[b.mainTableIndex].totalPotencyWithoutPot+=v,s[b.mainTableIndex].potPotency+=L-v,s[b.mainTableIndex].partyBuffPotency+=P-L,O&&A.hasBuff(k.Tincture)&&(s[b.mainTableIndex].potCount+=1);let U=h.get(R)??0;U+=P,h.set(R,U),T&&(c.totalPotencyWithoutPot+=v,c.totalPotPotency+=L-v,c.totalPartyBuffPotency+=P-L),A.getAllDotPotencies().forEach((V,G)=>{let H=d.get(G);const ue=D.game.excludedDoTs.includes(G);H||(H={tableRows:[],summary:{cumulativeGap:0,cumulativeOverride:0,timeSinceLastDoTDropped:0,totalTicks:0,maxTicks:D.getMaxTicks(D.game.time,G,ue),dotCoverageTimeFraction:D.getDotCoverageTimeFraction(D.game.getDisplayTime(),G),totalPotencyWithoutPot:0,totalPotPotency:0,totalPartyBuffPotency:0},lastDoT:void 0},d.set(G,H));let Ae=cU(A,G,H.lastDoT);H.tableRows.push(Ae),H.lastDoT=A,H.summary.cumulativeGap+=Ae.gap,H.summary.cumulativeOverride+=Ae.override,H.summary.totalTicks+=Ae.numHitTicks,H.summary.totalPotencyWithoutPot+=Ae.potencyWithoutPot,H.summary.totalPotPotency+=Ae.potPotency,H.summary.totalPartyBuffPotency+=Ae.partyBuffPotency})}}};return t===jc.Selected?D.record.iterateSelected(E):D.record.iterateAll(E),d.forEach((A,R)=>{if(A.lastDoT){const T=A.lastDoT.applicationTime;console.assert(T,"DoT node was not resolved");let S=T+D.game.getStatusDuration(R),p=Nr(S,D.game.getDisplayTime()),I=D.game.getDisplayTime()-S;I>0&&(A.summary.cumulativeGap+=p,A.summary.timeSinceLastDoTDropped=I)}else{let T=Nr(0,Math.max(0,D.game.getDisplayTime()));A.summary.cumulativeGap=T,A.summary.timeSinceLastDoTDropped=T}}),s.sort((A,R)=>{if(A.showPotency!==R.showPotency){let T=A.showPotency?1:0;return(R.showPotency?1:0)-T}else if(A.skillName!==R.skillName){let T=h.get(A.skillName)??0;return(h.get(R.skillName)??0)-T}else{if(A.targetCount!==R.targetCount)return R.targetCount-A.targetCount;if(A.displayedModifiers.length!==R.displayedModifiers.length)return R.displayedModifiers.length-A.displayedModifiers.length;for(let T=0;T<A.displayedModifiers.length;T++){let S=A.displayedModifiers[T]-R.displayedModifiers[T];if(S!==0)return S}return 0}}),{time:D.game.time,tinctureBuffPercentage:e.tinctureBuffPercentage,totalPotency:a,lastDamageApplicationTime:e.lastDamageApplicationTime,countdown:D.gameConfig.countdown,gcdSkills:l,mainTable:s,mainTableSummary:c,dotTables:d,mode:t}}var jc=(e=>(e[e.Normal=0]="Normal",e[e.Historical=1]="Historical",e[e.Selected=2]="Selected",e))(jc||{});let _m=e=>{},JN=e=>{};function eI(e){let t=s1(e.buff),a=uv(e.buff);return u.jsx("span",{style:{borderRadius:2,border:"1px solid "+a,fontSize:11,marginRight:4,padding:"1px 4px",background:a+"1f"},children:u.jsx("b",{style:{color:a},children:t})})}function zA(e){let t=e.basePotency,a=e.basePotency.toFixed(2)+_({en:"(base)",zh:"(基础威力)"});e.explainUntargetable&&(a+=_({en:"(untargetable)",zh:"(不可选中)"}));let l="";if(e.calc.forEach(s=>{s.kind==="adder"&&s.additiveAmount>0&&(t+=s.additiveAmount,l+=" + "+s.additiveAmount+"("+n_(s.source)+")")}),l&&(a="[ "+a+l+" ]"),e.calc.forEach(s=>{s.kind==="multiplier"&&s.potencyFactor!==1&&(t*=s.potencyFactor,a+=" × "+s.potencyFactor+"("+n_(s.source)+")")}),e.targetCount&&e.falloff!==void 0&&e.targetCount>1){const s=1+(1-e.falloff)*(e.targetCount-1);a=`[ ${a} ] x ${s}(${e.targetCount}${_({en:" targets",zh:"个目标"})})`,t*=s}return u.jsxs("span",{style:{textDecoration:e.includeInStats?"none":"line-through"},children:[t.toFixed(2)," ",u.jsx(Je,{topic:e.helpTopic,content:a})]})}function mU(){const[e,t]=N.useState("8"),a=s=>{t(s);const c=parseFloat(s);isNaN(c)||(D.setTinctureBuffPercentage(c),Qt("tinctureBuffPercentage",s))};N.useEffect(()=>{const s=dn("tinctureBuffPercentage");s!==null&&a(s)},[]);const l=u.jsxs("span",{children:[_({en:"exclude damage when untargetable",zh:"Boss上天期间威力按0计算"})," ",u.jsx(Je,{topic:"untargetableMask",content:u.jsxs("div",{children:[u.jsx("div",{className:"paragraph",children:_({en:"Having this checked will exclude damages from untargetable phases.",zh:"若勾选，统计将不包括Boss上天期间造成的伤害。"})}),u.jsx("div",{className:"paragraph",children:_({en:'You can mark up such phases using timeline markers of type "Untargetable".',zh:"可在下方用 “不可选中” 类型的时间轴标记来指定时间区间。"})}),u.jsx("div",{className:"paragraph",children:_({en:"This is just a statistics helper though. For example it doesn't prevent you from using skills when the boss is untargetable.",zh:"此功能只是一个统计用的工具，在标注了 “不可选中” 的时间里其实也能正常使用技能。"})})]})})]});return u.jsxs("div",{children:[u.jsx(Ut,{defaultValue:e,description:_({en:" tincture potency buff ",zh:"爆发药威力加成 "}),onChange:a,width:2,style:{display:"inline"}}),u.jsx("span",{children:"%"}),u.jsx(Fc,{uniqueName:"untargetableMask",label:l,onChange:s=>{D.setUntargetableMask(s)}})]})}const tI="0.375em 0.75em";class e0 extends ft.Component{constructor(a){super(a);F(this,"selected",{totalDuration:0,targetableDuration:0,potency:{applied:0,pending:0},gcdSkills:{applied:0,pending:0}});F(this,"data",{time:0,tinctureBuffPercentage:0,countdown:0,totalPotency:{applied:0,pending:0},lastDamageApplicationTime:0,gcdSkills:{applied:0,pending:0},mainTable:[],mainTableSummary:{totalPotencyWithoutPot:0,totalPotPotency:0,totalPartyBuffPotency:0},dotTables:new Map,mode:0});_m=l=>{this.data={...this.data,...l},this.forceUpdate()},JN=l=>{this.selected={...this.selected,...l},this.forceUpdate()}}componentWillUnmount(){_m=a=>{}}render(){let a=fl(this.context);const l=hU(),s=_({en:": ",zh:"："}),c=_({en:" (",zh:"（"}),d=_({en:") ",zh:"）"}),h=l?"":_({en:" (checked only)",zh:"（勾选部分）"});let E=this.data.lastDamageApplicationTime-this.data.countdown,A=Nr(0,E),R=this.data.lastDamageApplicationTime>-this.data.countdown,T=R?E.toFixed(3).toString():"N/A",S=_({en:"Total potency",zh:"总威力"}),p=_({en:"Selected potency",zh:"选中威力"});if(this.data.tinctureBuffPercentage>0){let M=c+_({en:"pot +",zh:"爆发药 +"})+this.data.tinctureBuffPercentage+"%"+d;S+=M,p+=M}S+=h,p+=h,S+=s+this.data.totalPotency.applied.toFixed(2),p+=s+this.selected.potency.applied.toFixed(2),this.data.totalPotency.pending>0&&(S+=c+this.data.totalPotency.pending.toFixed(2)+_({en:" pending",zh:"未结算"})+d),this.selected.potency.pending>0&&(p+=c+this.selected.potency.pending.toFixed(2)+_({en:" pending",zh:"未结算"})+d);let I=_({en:"GCD skills",zh:"GCD技能"})+h+s+this.data.gcdSkills.applied,b=_({en:"Selected GCD skills",zh:"选中GCD技能"})+h+s+this.selected.gcdSkills.applied;this.data.gcdSkills.pending>0&&(I+=c+"+"+this.data.gcdSkills.pending+_({en:" not yet applied",zh:"未结算"})+d),this.selected.gcdSkills.pending>0&&(b+=c+"+"+this.selected.gcdSkills.pending+_({en:" not yet applied",zh:"未结算"})+d);const O=D.game.overTimeEffectGroups.filter(M=>M.reportName&&!M.isHealing).map(M=>{let W=M.reportName+_({en:" uptime",zh:"覆盖率"})+s,ie=0,y=0,X=0;return M.groupedEffects.forEach(Z=>{const Y=this.data.dotTables.get(Z.effectName);Y&&(ie+=Y.summary.dotCoverageTimeFraction,y+=Y.summary.totalTicks,X=Math.max(X,Y.summary.maxTicks))}),W+=(ie*100).toFixed(2)+"%",W+=c+_({en:"ticks",zh:"跳雷次数"})+s+y+"/"+X+d,u.jsx("div",{children:W},`dot-uptime-${M.reportName}`)});let v,L=this.selected.targetableDuration>0;this.selected.totalDuration>0&&(v=u.jsxs("div",{style:{flex:1,color:a.accent},children:[u.jsxs("div",{children:[_({en:"Selected duration",zh:"选中时长"}),s,this.selected.totalDuration.toFixed(3)]}),u.jsx("div",{children:p}),u.jsxs("div",{children:[_({en:"Selected PPS",zh:"选中部分PPS"}),s,L?(this.selected.potency.applied/this.selected.targetableDuration).toFixed(2):"N/A"]}),u.jsx("div",{children:b})]}));let P=u.jsxs("div",{style:{display:"flex",marginBottom:10,flexDirection:"row"},children:[u.jsxs("div",{style:{flex:1},children:[u.jsxs("div",{style:{color:this.data.mode!==0?a.historical:a.text},children:[u.jsxs("div",{children:[_({en:"Last damage application time",zh:"最后伤害结算时间"}),s,T]}),u.jsx("div",{children:S}),u.jsxs("div",{children:["PPS"," ",u.jsx(Je,{topic:"ppsNotes",content:u.jsxs("div",{className:"toolTip",children:[u.jsx("div",{className:"paragraph",children:_({en:"(total applied potency of checked skills) / (total targetable duration from 0s until last damage application time).",zh:"统计表中勾选技能的已结算总威力 / (从0s到最后伤害结算时间 - 不可选中总时长)。"})}),u.jsx("div",{className:"paragraph",children:_({en:"could be inaccurate if any damage happens before pull, or if some damage's not applied yet",zh:"如果有伤害在0s之前结算，或者当前有的伤害还未结算，那么此PPS可能会不准确"})})]})}),s,R?(this.data.totalPotency.applied/A).toFixed(2):"N/A"]}),u.jsx("div",{children:I}),O]}),u.jsxs("div",{style:{marginTop:10},children:[u.jsx(mU,{}),u.jsx(Zl,{fileFormat:sl.Csv,getContentFn:()=>D.getDamageLogCsv(),filename:"damage-log",displayName:_({en:"download detailed damage log as CSV file",zh:"下载详细伤害结算记录（CSV格式）"})})]})]}),v]}),U=function(M){return{verticalAlign:"middle",boxSizing:"border-box",display:"inline-block",width:M+"%",padding:tI}},V=function(M){return D.game.dotSkills.includes(M)},G=function(M){return V(M)?!0:["AUTOMATON_QUEEN","WILDFIRE",...Object.keys(il)].includes(M)},H=function(M){const W=M.row.skillName===M.lastRowSkill;let ie=[];ie.push(M.row.displayedModifiers.map((Oe,Be)=>u.jsx(eI,{buff:Oe},Be)));const y=ti(M.row.skillName);let X=[];!W&&M.row.basePotency>0&&!(M.row.skillName in il)&&X.push(u.jsx("input",{type:"checkbox",style:{position:"relative",top:2,marginRight:10},checked:y,onChange:()=>{J_({skillNameOrDoT:M.row.skillName,include:!y})}},"main")),!W&&V(M.row.skillName)&&X.push(u.jsx("input",{type:"checkbox",style:{position:"relative",top:2,marginRight:10},checked:ti("DoT"),onChange:()=>{J_({skillNameOrDoT:"DoT",include:!ti("DoT")})}},"dot"));let Z;W||(Z=u.jsxs("span",{children:[u.jsxs("span",{style:{textDecoration:y?"none":"line-through",color:y?a.text:a.bgHighContrast},children:[io(M.row.skillName)," ",V(M.row.skillName)?u.jsx(Je,{topic:"potencyStats-thunder",content:_({en:"See table below for details",zh:"详见下方统计表格"})}):void 0]}),V(M.row.skillName)?u.jsxs("span",{style:{textDecoration:ti("DoT")?"none":"line-through",color:ti("DoT")?a.text:a.bgHighContrast},children:[u.jsx("br",{}),_({en:"(DoT)",zh:"（DoT）"})," "]}):void 0]}));let Y;M.row.targetCount&&M.row.basePotency>0&&(Y=u.jsx("span",{style:{textDecoration:y?"none":"line-through"},children:M.row.targetCount}));let le;M.row.basePotency>0&&!G(M.row.skillName)&&(le=u.jsx(zA,{includeInStats:y,basePotency:M.row.basePotency,helpTopic:"mainTable-potencyCalc-"+M.key,calc:M.row.calculationModifiers,falloff:M.row.falloff,targetCount:M.row.targetCount}));let de=M.row.usageCount-M.row.hitCount,re=u.jsxs("span",{style:{textDecoration:y?"none":"line-through"},children:[M.row.hitCount,de>0?u.jsxs("span",{style:{color:a.timeline.untargetableDamageMark+"af"},children:[" ","+",de," ",u.jsx(Je,{topic:"mainTable-numUntargetableUsages-"+M.key,content:_({en:"usage(s) when untargetable",zh:"Boss上天期间使用次数"})})]}):void 0]}),Re;M.row.showPotency&&!(M.row.skillName in il)&&(Re=u.jsxs("span",{style:{textDecoration:y?"none":"line-through"},children:[M.row.totalPotencyWithoutPot.toFixed(2),M.row.potPotency>0?u.jsxs("span",{style:{color:y?a.timeline.potCover:a.bgHighContrast},children:[" ","+",M.row.potPotency.toFixed(2),"(",_({en:"pot",zh:"爆发药"}),")(",M.row.potCount,")"]}):void 0,M.row.partyBuffPotency>0?u.jsxs("span",{style:{color:y?a.accent:a.bgHighContrast},children:[" ","+",M.row.partyBuffPotency.toFixed(2),"(",_({en:"party",zh:"团辅"}),")"]}):void 0]}));let he={textAlign:"left",position:"relative",borderTop:W?"none":"1px solid "+a.bgMediumContrast};return y||(he.color=a.bgHighContrast),u.jsxs("div",{style:he,children:[u.jsx("div",{style:U(3),children:X}),u.jsx("div",{style:U(18),children:Z}),u.jsx("div",{style:U(8),children:Y}),u.jsx("div",{style:U(19),children:ie}),u.jsx("div",{style:U(14),children:le}),u.jsx("div",{style:U(8),children:re}),u.jsx("div",{style:U(30),children:Re})]},M.key)},ue=[];for(let M=0;M<this.data.mainTable.length;M++)ue.push(H({row:this.data.mainTable[M],key:M,lastRowSkill:M===0?void 0:this.data.mainTable[M-1].skillName}));let Ae=function(M){let W=[];W.push(M.row.displayedModifiers.map((he,Oe)=>u.jsx(eI,{buff:he},Oe)));let ie=M.row.gap.toFixed(3),y=M.row.gap>0?u.jsx("span",{children:ie}):u.jsx("span",{}),X=M.row.override.toFixed(3),Z=M.row.override>0?u.jsx("span",{children:X}):u.jsx("span",{}),Y=u.jsx(zA,{basePotency:M.row.mainPotencyHit?M.row.baseMainPotency:0,includeInStats:!0,explainUntargetable:!M.row.mainPotencyHit,helpTopic:"thunderTable-main-"+M.key,calc:M.row.initialHitCalculationModifiers,targetCount:M.row.targetCount,falloff:M.row.mainHitFalloff}),le=u.jsx(zA,{basePotency:M.row.baseDotPotency,includeInStats:!0,helpTopic:"thunderTable-dot-"+M.key,calc:M.row.tickCalculationModifiers,targetCount:M.row.targetCount,falloff:0}),de=M.row.totalNumTicks-M.row.numHitTicks,re=u.jsxs("span",{children:[M.row.numHitTicks,de>0?u.jsxs("span",{style:{color:a.timeline.untargetableDamageMark+"af"},children:[" ","+",de," ",u.jsx(Je,{topic:"thunderTable-numUntargetableTicks-"+M.key,content:_({en:"tick(s) when untargetable",zh:"Boss上天期间跳DoT次数"})})]}):void 0]}),Re=u.jsxs("span",{children:[M.row.potencyWithoutPot.toFixed(2),M.row.potPotency>0?u.jsxs("span",{style:{color:a.timeline.potCover},children:[" ","+",M.row.potPotency.toFixed(2),"(",_({en:"pot",zh:"爆发药"}),")"]}):void 0,M.row.partyBuffPotency>0?u.jsxs("span",{style:{color:a.accent},children:[" ","+",M.row.partyBuffPotency.toFixed(2),"(",_({en:"party",zh:"团辅"}),")"]}):void 0]});return u.jsxs("div",{style:{textAlign:"left",position:"relative",borderTop:"1px solid "+a.bgMediumContrast},children:[u.jsx("div",{style:U(8),children:M.row.castTime.toFixed(3)}),u.jsx("div",{style:U(8),children:M.row.applicationTime.toFixed(3)}),u.jsx("div",{style:U(12),children:W}),u.jsx("div",{style:U(10),children:y}),u.jsx("div",{style:U(10),children:Z}),u.jsx("div",{style:U(10),children:Y}),u.jsx("div",{style:U(10),children:le}),u.jsx("div",{style:U(8),children:re}),u.jsx("div",{style:U(24),children:Re})]},M.key)};const Ee=[];this.data.dotTables.forEach((M,W)=>{const ie=[];for(let y=0;y<M.tableRows.length;y++)ie.push(Ae({row:M.tableRows[y],key:y}));Ee.push({dotName:W,tableRows:ie})});let oe={display:"inline-block",padding:tI},Te=_(l?{en:"Applied Skills",zh:"技能统计"}:{en:"Applied Skills (Checked Only)",zh:"技能统计（仅统计选中技能）"}),Se="";if(this.data.mode===1){let M=(this.data.time-this.data.countdown).toFixed(3)+"s",W=c+_({en:"up till "+M,zh:"截至"+M})+d;Te+=W,Se=W}else if(this.data.mode===2){const M=c+_({en:"from selected skills",zh:"来自选中技能"})+d;Te+=M,Se+=M}let ne=a.text;this.data.mode===1?ne=a.historical:this.data.mode===2&&(ne=a.accent);let ae=u.jsxs("div",{id:"damageTable",style:{position:"relative",margin:"0 auto",marginBottom:40,maxWidth:960},children:[u.jsx("div",{style:{...U(100),textAlign:"center",marginBottom:10},children:u.jsx("b",{style:{color:ne},children:Te})}),u.jsxs("div",{style:{outline:"1px solid "+a.bgMediumContrast},children:[u.jsxs("div",{children:[u.jsx("div",{style:{display:"inline-block",width:"21%"},children:u.jsx("span",{style:oe,children:u.jsx("b",{children:_({en:"skill",zh:"技能"})})})}),u.jsx("div",{style:{display:"inline-block",width:"27%"},children:u.jsx("span",{style:oe,children:u.jsx("b",{children:_({en:"targets",zh:"目标数"})})})}),u.jsx("div",{style:{display:"inline-block",width:"14%"},children:u.jsx("span",{style:oe,children:u.jsx("b",{children:_({en:"potency",zh:"单次威力"})})})}),u.jsx("div",{style:{display:"inline-block",width:"8%"},children:u.jsx("span",{style:oe,children:u.jsx("b",{children:_({en:"count",zh:"数量"})})})}),u.jsx("div",{style:{display:"inline-block",width:"30%"},children:u.jsx("span",{style:oe,children:u.jsx("b",{children:_({en:"total",zh:"总威力"})})})})]}),ue,u.jsxs("div",{style:{textAlign:"left",position:"relative",borderTop:"1px solid "+a.bgMediumContrast},children:[u.jsx("div",{style:U(70)}),u.jsx("div",{style:U(30),children:u.jsxs("span",{children:[this.data.mainTableSummary.totalPotencyWithoutPot.toFixed(2),this.data.mainTableSummary.totalPotPotency>0?u.jsxs("span",{style:{color:a.timeline.potCover},children:[" ","+",this.data.mainTableSummary.totalPotPotency.toFixed(2),_({en:" (pot +"+this.data.tinctureBuffPercentage+"%)",zh:"(爆发药 +"+this.data.tinctureBuffPercentage+"%)"})]}):void 0,this.data.mainTableSummary.totalPartyBuffPotency>0?u.jsxs("span",{style:{color:a.accent},children:[" ","+",this.data.mainTableSummary.totalPartyBuffPotency.toFixed(2),"(",_({en:"party",zh:"团辅"}),")"]}):void 0]})})]})]})]}),w=Ee.map(M=>{var X;const W=M.tableRows,ie=(X=this.data.dotTables.get(M.dotName))==null?void 0:X.summary;if(ie===void 0)return u.jsx(u.Fragment,{});const y=Zn(M.dotName)+Se;return u.jsxs("div",{style:{position:"relative",margin:"0 auto",marginBottom:40,maxWidth:960},children:[u.jsx("div",{style:{...U(100),textAlign:"center",marginBottom:10},children:u.jsx("b",{style:{color:ne},children:y})}),u.jsxs("div",{style:{outline:"1px solid "+a.bgMediumContrast},children:[u.jsxs("div",{children:[u.jsx("div",{style:{display:"inline-block",width:"8%"},children:u.jsx("span",{style:oe,children:u.jsx("b",{children:_({en:"cast time",zh:"读条时间"})})})}),u.jsx("div",{style:{display:"inline-block",width:"8%"},children:u.jsx("span",{style:oe,children:u.jsx("b",{children:_({en:"application time",zh:"结算时间"})})})}),u.jsx("div",{style:{display:"inline-block",width:"12%"},children:u.jsx("span",{style:oe})}),u.jsx("div",{style:{display:"inline-block",width:"10%"},children:u.jsxs("span",{style:oe,children:[u.jsxs("b",{children:[_({en:"gap",zh:"DoT间隙"})," "]}),u.jsx(Je,{topic:"dot-gap-title",content:_({en:u.jsxs("div",{children:[u.jsx("div",{className:"paragraph",children:"DoT coverage time gap since pull or previous application"}),u.jsx("div",{className:"paragraph",children:"The last row also includes gap at the beginning and end of the fight"})]}),zh:u.jsx("div",{children:"雷DoT覆盖间隙，最后一行也包括战斗开始和结束时没有雷DoT的时间"})})})]})}),u.jsx("div",{style:{display:"inline-block",width:"10%"},children:u.jsxs("span",{style:oe,children:[u.jsxs("b",{children:[_({en:"override",zh:"DoT覆盖"})," "]}),u.jsx(Je,{topic:"dot-override-title",content:_({en:u.jsx("div",{children:"Overridden DoT time from previous application"}),zh:u.jsx("div",{children:"提前覆盖雷DoT时长"})})})]})}),u.jsx("div",{style:{display:"inline-block",width:"10%"},children:u.jsx("span",{style:oe,children:u.jsx("b",{children:_({en:"initial",zh:"初始威力"})})})}),u.jsx("div",{style:{display:"inline-block",width:"10%"},children:u.jsx("span",{style:oe,children:u.jsx("b",{children:_({en:"DoT",zh:"DoT威力"})})})}),u.jsx("div",{style:{display:"inline-block",width:"8%"},children:u.jsx("span",{style:oe,children:u.jsx("b",{children:_({en:"ticks",zh:"跳雷次数"})})})}),u.jsx("div",{style:{display:"inline-block",width:"24%"},children:u.jsx("span",{style:oe,children:u.jsx("b",{children:_({en:"total",zh:"总威力"})})})})]}),W,u.jsxs("div",{style:{textAlign:"left",position:"relative",borderTop:"1px solid "+a.bgMediumContrast},children:[u.jsx("div",{style:U(28)}),u.jsx("div",{style:U(10),children:ie.cumulativeGap.toFixed(3)}),u.jsx("div",{style:U(10),children:ie.cumulativeOverride.toFixed(3)}),u.jsx("div",{style:U(20)}),u.jsx("div",{style:U(8),children:D.game.fullTimeDoTs.includes(M.dotName)?u.jsxs(u.Fragment,{children:[ie.totalTicks,"/",ie.maxTicks]}):u.jsx(u.Fragment,{children:ie.totalTicks})}),u.jsxs("div",{style:U(24),children:[ie.totalPotencyWithoutPot.toFixed(2),ie.totalPotPotency>0?u.jsxs("span",{style:{color:a.timeline.potCover},children:[" ","+",ie.totalPotPotency.toFixed(2),_({en:"(pot +"+this.data.tinctureBuffPercentage+"%)",zh:"(爆发药 +"+this.data.tinctureBuffPercentage+"%)"})]}):void 0,ie.totalPartyBuffPotency>0?u.jsxs("span",{style:{color:a.accent},children:[" ","+",ie.totalPartyBuffPotency.toFixed(2),"(",_({en:"party",zh:"团辅"}),")"]}):void 0]})]})]})]},`dot-table-${M.dotName}`)});return u.jsxs("div",{children:[P,u.jsxs("div",{children:[ae,w]})]})}}F(e0,"contextType",Pa);var Kd={exports:{}},RU=Kd.exports,nI;function TU(){return nI||(nI=1,function(e){(function(t,a,l){function s(E){var A=this,R=h();A.next=function(){var T=2091639*A.s0+A.c*23283064365386963e-26;return A.s0=A.s1,A.s1=A.s2,A.s2=T-(A.c=T|0)},A.c=1,A.s0=R(" "),A.s1=R(" "),A.s2=R(" "),A.s0-=R(E),A.s0<0&&(A.s0+=1),A.s1-=R(E),A.s1<0&&(A.s1+=1),A.s2-=R(E),A.s2<0&&(A.s2+=1),R=null}function c(E,A){return A.c=E.c,A.s0=E.s0,A.s1=E.s1,A.s2=E.s2,A}function d(E,A){var R=new s(E),T=A&&A.state,S=R.next;return S.int32=function(){return R.next()*4294967296|0},S.double=function(){return S()+(S()*2097152|0)*11102230246251565e-32},S.quick=S,T&&(typeof T=="object"&&c(T,R),S.state=function(){return c(R,{})}),S}function h(){var E=4022871197,A=function(R){R=String(R);for(var T=0;T<R.length;T++){E+=R.charCodeAt(T);var S=.02519603282416938*E;E=S>>>0,S-=E,S*=E,E=S>>>0,S-=E,E+=S*4294967296}return(E>>>0)*23283064365386963e-26};return A}a&&a.exports?a.exports=d:this.alea=d})(RU,e)}(Kd)),Kd.exports}var Wd={exports:{}},SU=Wd.exports,aI;function gU(){return aI||(aI=1,function(e){(function(t,a,l){function s(h){var E=this,A="";E.x=0,E.y=0,E.z=0,E.w=0,E.next=function(){var T=E.x^E.x<<11;return E.x=E.y,E.y=E.z,E.z=E.w,E.w^=E.w>>>19^T^T>>>8},h===(h|0)?E.x=h:A+=h;for(var R=0;R<A.length+64;R++)E.x^=A.charCodeAt(R)|0,E.next()}function c(h,E){return E.x=h.x,E.y=h.y,E.z=h.z,E.w=h.w,E}function d(h,E){var A=new s(h),R=E&&E.state,T=function(){return(A.next()>>>0)/4294967296};return T.double=function(){do var S=A.next()>>>11,p=(A.next()>>>0)/4294967296,I=(S+p)/(1<<21);while(I===0);return I},T.int32=A.next,T.quick=T,R&&(typeof R=="object"&&c(R,A),T.state=function(){return c(A,{})}),T}a&&a.exports?a.exports=d:this.xor128=d})(SU,e)}(Wd)),Wd.exports}var qd={exports:{}},pU=qd.exports,iI;function _U(){return iI||(iI=1,function(e){(function(t,a,l){function s(h){var E=this,A="";E.next=function(){var T=E.x^E.x>>>2;return E.x=E.y,E.y=E.z,E.z=E.w,E.w=E.v,(E.d=E.d+362437|0)+(E.v=E.v^E.v<<4^(T^T<<1))|0},E.x=0,E.y=0,E.z=0,E.w=0,E.v=0,h===(h|0)?E.x=h:A+=h;for(var R=0;R<A.length+64;R++)E.x^=A.charCodeAt(R)|0,R==A.length&&(E.d=E.x<<10^E.x>>>4),E.next()}function c(h,E){return E.x=h.x,E.y=h.y,E.z=h.z,E.w=h.w,E.v=h.v,E.d=h.d,E}function d(h,E){var A=new s(h),R=E&&E.state,T=function(){return(A.next()>>>0)/4294967296};return T.double=function(){do var S=A.next()>>>11,p=(A.next()>>>0)/4294967296,I=(S+p)/(1<<21);while(I===0);return I},T.int32=A.next,T.quick=T,R&&(typeof R=="object"&&c(R,A),T.state=function(){return c(A,{})}),T}a&&a.exports?a.exports=d:this.xorwow=d})(pU,e)}(qd)),qd.exports}var Xd={exports:{}},IU=Xd.exports,lI;function CU(){return lI||(lI=1,function(e){(function(t,a,l){function s(h){var E=this;E.next=function(){var R=E.x,T=E.i,S,p;return S=R[T],S^=S>>>7,p=S^S<<24,S=R[T+1&7],p^=S^S>>>10,S=R[T+3&7],p^=S^S>>>3,S=R[T+4&7],p^=S^S<<7,S=R[T+7&7],S=S^S<<13,p^=S^S<<9,R[T]=p,E.i=T+1&7,p};function A(R,T){var S,p=[];if(T===(T|0))p[0]=T;else for(T=""+T,S=0;S<T.length;++S)p[S&7]=p[S&7]<<15^T.charCodeAt(S)+p[S+1&7]<<13;for(;p.length<8;)p.push(0);for(S=0;S<8&&p[S]===0;++S);for(S==8?p[7]=-1:p[S],R.x=p,R.i=0,S=256;S>0;--S)R.next()}A(E,h)}function c(h,E){return E.x=h.x.slice(),E.i=h.i,E}function d(h,E){h==null&&(h=+new Date);var A=new s(h),R=E&&E.state,T=function(){return(A.next()>>>0)/4294967296};return T.double=function(){do var S=A.next()>>>11,p=(A.next()>>>0)/4294967296,I=(S+p)/(1<<21);while(I===0);return I},T.int32=A.next,T.quick=T,R&&(R.x&&c(R,A),T.state=function(){return c(A,{})}),T}a&&a.exports?a.exports=d:this.xorshift7=d})(IU,e)}(Xd)),Xd.exports}var Zd={exports:{}},NU=Zd.exports,oI;function OU(){return oI||(oI=1,function(e){(function(t,a,l){function s(h){var E=this;E.next=function(){var R=E.w,T=E.X,S=E.i,p,I;return E.w=R=R+1640531527|0,I=T[S+34&127],p=T[S=S+1&127],I^=I<<13,p^=p<<17,I^=I>>>15,p^=p>>>12,I=T[S]=I^p,E.i=S,I+(R^R>>>16)|0};function A(R,T){var S,p,I,b,O,v=[],L=128;for(T===(T|0)?(p=T,T=null):(T=T+"\0",p=0,L=Math.max(L,T.length)),I=0,b=-32;b<L;++b)T&&(p^=T.charCodeAt((b+32)%T.length)),b===0&&(O=p),p^=p<<10,p^=p>>>15,p^=p<<4,p^=p>>>13,b>=0&&(O=O+1640531527|0,S=v[b&127]^=p+O,I=S==0?I+1:0);for(I>=128&&(v[(T&&T.length||0)&127]=-1),I=127,b=4*128;b>0;--b)p=v[I+34&127],S=v[I=I+1&127],p^=p<<13,S^=S<<17,p^=p>>>15,S^=S>>>12,v[I]=p^S;R.w=O,R.X=v,R.i=I}A(E,h)}function c(h,E){return E.i=h.i,E.w=h.w,E.X=h.X.slice(),E}function d(h,E){h==null&&(h=+new Date);var A=new s(h),R=E&&E.state,T=function(){return(A.next()>>>0)/4294967296};return T.double=function(){do var S=A.next()>>>11,p=(A.next()>>>0)/4294967296,I=(S+p)/(1<<21);while(I===0);return I},T.int32=A.next,T.quick=T,R&&(R.X&&c(R,A),T.state=function(){return c(A,{})}),T}a&&a.exports?a.exports=d:this.xor4096=d})(NU,e)}(Zd)),Zd.exports}var Qd={exports:{}},bU=Qd.exports,sI;function yU(){return sI||(sI=1,function(e){(function(t,a,l){function s(h){var E=this,A="";E.next=function(){var T=E.b,S=E.c,p=E.d,I=E.a;return T=T<<25^T>>>7^S,S=S-p|0,p=p<<24^p>>>8^I,I=I-T|0,E.b=T=T<<20^T>>>12^S,E.c=S=S-p|0,E.d=p<<16^S>>>16^I,E.a=I-T|0},E.a=0,E.b=0,E.c=-1640531527,E.d=1367130551,h===Math.floor(h)?(E.a=h/4294967296|0,E.b=h|0):A+=h;for(var R=0;R<A.length+20;R++)E.b^=A.charCodeAt(R)|0,E.next()}function c(h,E){return E.a=h.a,E.b=h.b,E.c=h.c,E.d=h.d,E}function d(h,E){var A=new s(h),R=E&&E.state,T=function(){return(A.next()>>>0)/4294967296};return T.double=function(){do var S=A.next()>>>11,p=(A.next()>>>0)/4294967296,I=(S+p)/(1<<21);while(I===0);return I},T.int32=A.next,T.quick=T,R&&(typeof R=="object"&&c(R,A),T.state=function(){return c(A,{})}),T}a&&a.exports?a.exports=d:this.tychei=d})(bU,e)}(Qd)),Qd.exports}var $d={exports:{}};const vU={},DU=Object.freeze(Object.defineProperty({__proto__:null,default:vU},Symbol.toStringTag,{value:"Module"})),MU=ky(DU);var LU=$d.exports,rI;function HU(){return rI||(rI=1,function(e){(function(t,a,l){var s=256,c=6,d=52,h="random",E=l.pow(s,c),A=l.pow(2,d),R=A*2,T=s-1,S;function p(U,V,G){var H=[];V=V==!0?{entropy:!0}:V||{};var ue=v(O(V.entropy?[U,P(a)]:U??L(),3),H),Ae=new I(H),Ee=function(){for(var oe=Ae.g(c),Te=E,Se=0;oe<A;)oe=(oe+Se)*s,Te*=s,Se=Ae.g(1);for(;oe>=R;)oe/=2,Te/=2,Se>>>=1;return(oe+Se)/Te};return Ee.int32=function(){return Ae.g(4)|0},Ee.quick=function(){return Ae.g(4)/4294967296},Ee.double=Ee,v(P(Ae.S),a),(V.pass||G||function(oe,Te,Se,ne){return ne&&(ne.S&&b(ne,Ae),oe.state=function(){return b(Ae,{})}),Se?(l[h]=oe,Te):oe})(Ee,ue,"global"in V?V.global:this==l,V.state)}function I(U){var V,G=U.length,H=this,ue=0,Ae=H.i=H.j=0,Ee=H.S=[];for(G||(U=[G++]);ue<s;)Ee[ue]=ue++;for(ue=0;ue<s;ue++)Ee[ue]=Ee[Ae=T&Ae+U[ue%G]+(V=Ee[ue])],Ee[Ae]=V;(H.g=function(oe){for(var Te,Se=0,ne=H.i,ae=H.j,w=H.S;oe--;)Te=w[ne=T&ne+1],Se=Se*s+w[T&(w[ne]=w[ae=T&ae+Te])+(w[ae]=Te)];return H.i=ne,H.j=ae,Se})(s)}function b(U,V){return V.i=U.i,V.j=U.j,V.S=U.S.slice(),V}function O(U,V){var G=[],H=typeof U,ue;if(V&&H=="object")for(ue in U)try{G.push(O(U[ue],V-1))}catch{}return G.length?G:H=="string"?U:U+"\0"}function v(U,V){for(var G=U+"",H,ue=0;ue<G.length;)V[T&ue]=T&(H^=V[T&ue]*19)+G.charCodeAt(ue++);return P(V)}function L(){try{var U;return S&&(U=S.randomBytes)?U=U(s):(U=new Uint8Array(s),(t.crypto||t.msCrypto).getRandomValues(U)),P(U)}catch{var V=t.navigator,G=V&&V.plugins;return[+new Date,t,G,t.screen,P(a)]}}function P(U){return String.fromCharCode.apply(0,U)}if(v(l.random(),a),e.exports){e.exports=p;try{S=MU}catch{}}else l["seed"+h]=p})(typeof self<"u"?self:LU,[],Math)}($d)),$d.exports}var YA,cI;function xU(){if(cI)return YA;cI=1;var e=TU(),t=gU(),a=_U(),l=CU(),s=OU(),c=yU(),d=HU();return d.alea=e,d.xor128=t,d.xorwow=a,d.xorshift7=l,d.xor4096=s,d.tychei=c,YA=d,YA}var UU=xU();const uI=Gm(UU);var Rr,Tr,ru,cu,vf,t0;class Jt{constructor(t){ke(this,vf);F(this,"config");F(this,"rng");F(this,"nonProcRng");F(this,"lucidTickOffset");F(this,"dotTickOffset");F(this,"hotTickOffset");F(this,"time");F(this,"resources");F(this,"cooldowns");F(this,"eventsQueue");F(this,"skillsList");F(this,"displayedSkills");F(this,"autoAttackDelay");F(this,"overTimeEffectGroups",[]);F(this,"dotResources",[]);F(this,"hotResources",[]);F(this,"excludedDoTs",[]);F(this,"excludedHoTs",[]);F(this,"fullTimeDoTs",[]);ke(this,Rr,[]);ke(this,Tr,[]);F(this,"dotSkills",[]);F(this,"hotSkills",[]);ke(this,ru,new Map);ke(this,cu,new Map);this.config=t,this.rng=uI(t.randomSeed),this.nonProcRng=uI(t.randomSeed+"_nonProcs"),this.lucidTickOffset=this.nonProcRng()*3,this.dotTickOffset=this.nonProcRng()*3,this.hotTickOffset=this.nonProcRng()*3,this.time=0,this.resources=new u1(this),this.cooldowns=new c1(this),ll(this.job).forEach((l,s)=>{l.isCoolDown?this.cooldowns.set(new Ke(s,l.cdPerStack,l.maxStacks,l.maxStacks)):this.resources.set(new ei(s,l.maxValue,l.defaultValue))});let a=2.5;switch(It[this.job].role){case"TANK":case"MELEE":case"RANGED":a=t.adjustedSksGCD();break;case"HEALER":case"CASTER":a=t.adjustedGCD();break}this.cooldowns.set(new Ke("cd_GCD",t.getAfterTaxGCD(a),1,1)),this.resources.set(new ei("MOVEMENT",1,1)),this.resources.set(new ei("NOT_ANIMATION_LOCKED",1,1)),this.resources.set(new ei("NOT_CASTER_TAXED",1,1)),this.resources.set(new ei("IN_COMBAT",1,0)),this.cooldowns.set(new Ke("NEVER",0,0,0)),this.eventsQueue=[],this.skillsList=new A1(this),this.displayedSkills=new m1(this.job,t.level),this.autoAttackDelay=2.5}get statusPropsGenerator(){return new $t(this)}get job(){return this.config.job}get partySize(){return this.resources.get("PARTY_SIZE").availableAmount()}registerRecurringEvents(t=[],a=[]){let l=this;{let h=()=>{let E=this.resources.get("MANA"),A=this.captureManaRegenAmount();E.gain(A);let R=E.availableAmount();D.reportManaTick(l.time,"+"+A+" (MP="+R+")"),this.resources.addResourceEvent({rscType:"MANA",name:"mana tick",delay:3,fnOnRsc:T=>{h()},tags:[ia.MpTick,ia.ManaGain]})};this.resources.addResourceEvent({rscType:"MANA",name:"initial mana tick",delay:this.config.timeTillFirstManaTick,fnOnRsc:h,tags:[ia.MpTick,ia.ManaGain]})}let s=()=>{let h=this.resources.get("LUCID_DREAMING");if(h.available(1)&&(h.tickCount++,!(this.isBLMState()&&this.getFireStacks()>0))){let A=this.resources.get("MANA");A.gain(550);let R="+550";if(console.assert(h.node!==void 0),h.node){let T="??";h.node.tmp_startLockTime&&(T=(h.node.tmp_startLockTime-this.config.countdown).toFixed(3)),R+=" {skill}@"+T,R+=" ("+h.tickCount+"/7)"}R+=" (MP="+A.availableAmount()+")",D.reportLucidTick(this.time,R)}let E=new Ge("lucid tick",3,()=>{s()});E.addTag(ia.LucidTick),h.available(1)&&h.pendingChange&&h.pendingChange.timeTillEvent>=3&&E.addTag(ia.ManaGain),this.addEvent(E)};if([...Ga,...wa].includes(this.job)){let h=this.config.timeTillFirstManaTick+this.lucidTickOffset;for(;h>3;)h-=3;let E=new Ge("initial lucid tick",h,s);E.addTag(ia.LucidTick),this.addEvent(E)}let c=()=>{this.dotResources.filter(h=>!this.excludedDoTs.includes(h)).forEach(h=>this.handleDoTTick(h)),this.getDisplayTime()>=0&&D.reportDotTick(this.time),this.addEvent(new Ge("DoT tick",3,()=>{c()}))},d=()=>{this.hotResources.filter(h=>!this.excludedHoTs.includes(h)).forEach(h=>this.handleHoTTick(h)),this.getDisplayTime()>=0&&D.reportHotTick(this.time),this.addEvent(new Ge("HoT tick",3,()=>{d()}))};if(t.forEach(h=>{h.groupedEffects.forEach(E=>{let A=this.dotResources,R=ee(this,Rr),T=ee(this,ru),S=this.excludedDoTs;h.isHealing&&(A=this.hotResources,R=ee(this,Tr),T=ee(this,cu),S=this.excludedHoTs),A.includes(E.effectName)?console.assert(!1,`${E.effectName} was registered as an over time effect multiple times for ${this.job}`):(A.push(E.effectName),E.appliedBy.forEach(p=>{!h.isHealing&&!this.dotSkills.includes(p)&&this.dotSkills.push(p),h.isHealing&&!this.hotSkills.includes(p)&&this.hotSkills.push(p)}),T.set(E.effectName,h.groupedEffects.filter(p=>p!==E).map(p=>p.effectName)),E.isGroundTargeted&&!R.includes(E.effectName)&&R.push(E.effectName),E.exclude&&!S.includes(E.effectName)&&S.push(E.effectName),!h.isHealing&&h.reportName&&!this.fullTimeDoTs.includes(E.effectName)&&this.fullTimeDoTs.push(E.effectName))})}),a.forEach(h=>this.dotSkills.push(h)),this.overTimeEffectGroups=t,this.dotResources.filter(h=>!this.excludedDoTs.includes(h)).length>0){let h=this.config.timeTillFirstManaTick+this.dotTickOffset;for(;h>3;)h-=3;this.addEvent(new Ge("initial DoT tick",h,c))}if(this.hotResources.filter(h=>!this.excludedHoTs.includes(h)).length>0){let h=this.config.timeTillFirstManaTick+this.hotTickOffset;for(;h>3;)h-=3;this.addEvent(new Ge("initial HoT tick",h,d))}this.jobSpecificRegisterRecurringEvents()}onResolveOverTimeTick(t,a){a==="damage"?this.jobSpecificOnResolveDotTick(t):this.jobSpecificOnResolveHotTick(t)}jobSpecificRegisterRecurringEvents(){}jobSpecificOnResolveDotTick(t){}jobSpecificOnResolveHotTick(t){}jobSpecificAddDamageBuffCovers(t,a){}jobSpecificAddSpeedBuffCovers(t,a){}jobSpecificAddHealingBuffCovers(t,a){}maybeCancelChanneledSkills(t){const a=this.skillsList.get(t);a&&(a.animationLockFn(this)<=li||this.cancelChanneledSkills())}cancelChanneledSkills(){}jobSpecificOnAutoAttack(){}onAutoAttack(){this.jobSpecificOnAutoAttack()}getStatusDuration(t){return Pt(this.job,t).maxTimeout}gainStatus(t,a=1){const l=this.resources.get(t),s=Pt(this.job,t);this.hasResourceAvailable(t)?(s.maxTimeout>0&&l.overrideTimer(this,s.maxTimeout),l.availableAmount()!==a&&l.overrideCurrentValue(a)):(l.gain(a),s.maxTimeout>0&&this.enqueueResourceDrop(t))}maybeGainProc(t,a=.5){this.triggersEffect(a)&&this.gainStatus(t)}triggersEffect(t){return this.config.procMode===jt.Never?!1:this.config.procMode===jt.Always?!0:this.rng()<t}handleDoTTick(t){this.handleOverTimeTick(t,"damage")}handleHoTTick(t){this.handleOverTimeTick(t,"healing")}handleOverTimeTick(t,a){const l=this.resources.get(t);if(l.availableAmountIncludingDisabled()>0){if(l.node&&l.enabled){const s=l.node.getOverTimePotencies(t,a)[l.tickCount];D.resolveOverTimePotency(s,a),this.onResolveOverTimeTick(t,a)}l.tickCount++}else l.node&&(l.node.removeUnresolvedOvertimePotencies(a),l.node=void 0)}tick(t,a=()=>!1){let l=0;for(;l<t&&this.eventsQueue.length>0&&!a();){this.eventsQueue.sort((h,E)=>h.timeTillEvent-E.timeTillEvent);let s=Math.min(t-l,this.eventsQueue[0].timeTillEvent);l=Math.min(l+s,t),this.time+=s,this.cooldowns.tick(s);const c=[];for(let h=0;h<this.eventsQueue.length;h++)c.push(this.eventsQueue[h]);c.forEach(h=>{h.timeTillEvent-=s});let d=0;c.forEach(h=>{h.timeTillEvent<=pn.epsilon&&(h.canceled||h.effectFn(),d++)}),this.eventsQueue.splice(0,d)}return l}addEvent(t){this.eventsQueue.push(t)}getDisplayTime(){return this.time-this.config.countdown}captureManaRegenAmount(){return this.isInCombat()?this.job in eR?ht.mpTick(this.config.level,this.config.piety):200:600}requestToggleBuff(t){let a=this.resources.get(t);if(t==="AUTOS_ENGAGED")return this.toggleAutosEngaged(),!0;if(ot[t].mayBeToggled)return a.available(1)?(a.enabled=!1,!0):(a.enabled=!0,!0);if(ot[t].mayNotBeCanceled)return!0;if(t==="MEDITATE"){const l=this.findNextQueuedEventByTag(ia.MeditateTick);l&&(l.canceled=!0)}return t==="KARDIA"&&this.tryConsumeResource("KARDION"),a.consume(a.availableAmount()),a.removeTimer(),!0}addRecurringAutoAttackEvent(t,a){const l=(s,c)=>{const d=new Ge("aa tick",s,()=>{this.resources.get("AUTOS_ENGAGED").available(1)&&this.isInCombat()&&this.onAutoAttack(),this.addEvent(l(c,c))});return d.addTag(ia.AutoTick),d};this.addEvent(l(t,a))}findAutoAttackTimerInQueue(){let t=-1;return this.eventsQueue.forEach(a=>{a.name==="aa tick"&&(t=a.timeTillEvent)}),t}startAutoAttackTimer(t,a,l){if(this.findAutoAttackTimerInQueue()!==-1)this.removeAutoAttackTimer();else if(this.resources.get("STORED_AUTO").available(1)){const h=new Ge("stored auto",l||0,()=>{this.onAutoAttack()});this.addEvent(h)}this.tryConsumeResource("STORED_AUTO"),this.resources.get("AUTOS_ENGAGED").availableAmount()===0&&this.resources.get("AUTOS_ENGAGED").gain(1);const c=a||3;let d=0;t===-1?d=c:d=t??c,this.addRecurringAutoAttackEvent(d,c)}removeAutoAttackTimer(){let t=0;this.eventsQueue.forEach(a=>{a.name==="aa tick"&&this.eventsQueue.splice(t,1),t++})}toggleAutosEngaged(){const t=this.findAutoAttackTimerInQueue();if(this.resources.get("AUTOS_ENGAGED").availableAmount()===0)this.startAutoAttackTimer(t===-1?3:t);else if(this.resources.get("AUTOS_ENGAGED").consume(1),t!==-1){this.removeAutoAttackTimer();const a=new Ge("aa tick",t,()=>{this.resources.get("STORED_AUTO").available(0)&&this.resources.get("STORED_AUTO").gain(1)});this.addEvent(a)}}refreshAutoBasedOnSkill(t,a,l){const s=a!==0,c=this.resources.get("AUTOS_ENGAGED").available(1),d=this.autoAttackDelay,h=this.findAutoAttackTimerInQueue(),E=t.startsAuto;if(l){if(this.isInCombat()){if(s&&c){const A=a+(h===-1?d:h);this.startAutoAttackTimer(A,d,a)}else if(!s&&!c)E&&this.startAutoAttackTimer(h,d);else if(s&&!c){if(E){const A=a+(h===-1?d:h);this.startAutoAttackTimer(A,d,a)}else if(h>0){this.removeAutoAttackTimer();const A=new Ge("aa tick",h+a,()=>{this.resources.get("STORED_AUTO").available(0)&&this.resources.get("STORED_AUTO").gain(1)});this.addEvent(A)}}}else if(E){const A=a+(h===-1?d:h);this.startAutoAttackTimer(A,d,a)}}else if(this.isInCombat()){if(s&&c){const A=this.findAutoAttackTimerInQueue(),R=a+(A===-1?d:A);this.startAutoAttackTimer(R)}else if(s&&!c&&h>0){this.removeAutoAttackTimer();const A=new Ge("aa tick",h+a,()=>{this.resources.get("STORED_AUTO").available(0)&&this.resources.get("STORED_AUTO").gain(1)});this.addEvent(A)}}}useSpellOrWeaponskill(t,a,l){const s=this.cooldowns.get(t.cdName),c=t.secondaryCd?this.cooldowns.get(t.secondaryCd.cdName):void 0;let d=t.castTimeFn(this);const h=t.recastTimeFn(this);this.jobSpecificAddSpeedBuffCovers(a,t);const E=t.potencyFn(this);let A=a.getInitialPotency();!A&&(E>0||t.drawsAggro&&!this.isInCombat())?(this.refreshAutoBasedOnSkill(t,d,!0),A=new bn({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t.name,aspect:t.aspect,basePotency:E,snapshotTime:void 0,description:"",targetCount:a.targetCount,falloff:t.falloff}),a.addPotency(A)):this.refreshAutoBasedOnSkill(t,d,!1);const R=t.healingPotencyFn(this);let T=a.getInitialHealingPotency();!T&&R>0&&(T=new bn({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t.name,aspect:t.aspect,basePotency:R,snapshotTime:void 0,description:"",targetCount:a.healTargetCount,falloff:0}),a.addHealingPotency(T));const S=()=>{let I=t.manaCostFn(this);I>this.resources.get("MANA").availableAmount()?D.reportInterruption({failNode:a,failIndex:l}):I>0&&this.resources.get("MANA").consume(I);const b=E>0;if(A&&(A.snapshotTime=this.getDisplayTime(),b)){const v=[];this.hasResourceAvailable("TINCTURE")&&v.push(me.Tincture),v.push(...t.jobPotencyModifiers(this)),A.modifiers=v}b&&(this.hasResourceAvailable("TINCTURE")&&!a.hasBuff(k.Tincture)&&a.addBuff(k.Tincture),this.jobSpecificAddDamageBuffCovers(a,t));const O=R>0;if(T){T.snapshotTime=this.getDisplayTime();const v=[];this.hasResourceAvailable("TINCTURE")&&v.push(me.Tincture),v.push(...t.jobHealingPotencyModifiers(this)),T.modifiers=v}if(O&&(this.hasResourceAvailable("TINCTURE")&&!a.hasBuff(k.Tincture)&&a.addBuff(k.Tincture),this.jobSpecificAddHealingBuffCovers(a,t)),t.onConfirm(this,a),this.addEvent(new Ge(t.name+" applied",t.applicationDelay,()=>{A&&(D.resolvePotency(A),this.hasResourceAvailable("IN_COMBAT")||this.resources.get("IN_COMBAT").gain(1)),T&&D.resolveHealingPotency(T),t.onApplication(this,a)})),A&&!this.hasResourceAvailable("IN_COMBAT")){const v=this.resources.timeTillReady("IN_COMBAT");(v===0||v>t.applicationDelay)&&this.resources.addResourceEvent({rscType:"IN_COMBAT",name:"begin combat if necessary",delay:t.applicationDelay,fnOnRsc:L=>{L.gain(1)}})}};if(d===0||t.isInstantFn(this))this.resources.takeResourceLock("NOT_ANIMATION_LOCKED",t.animationLockFn(this)),S();else{this.resources.takeResourceLock("MOVEMENT",d-Wl.getSlidecastWindow(d)),this.resources.takeResourceLock("NOT_CASTER_TAXED",this.config.getAfterTaxCastTime(d));const I=d-Wl.getSlidecastWindow(d);this.addEvent(new Ge(t.name+" captured",I,()=>{t.validateAttempt(this)?S():D.reportInterruption({failNode:a,failIndex:l})}))}s.useStackWithRecast(this.config.getAfterTaxGCD(h)),c&&c.useStack()}useAbility(t,a){console.assert(a);let l=this.cooldowns.get(t.cdName);const s=t.potencyFn(this);let c;if((s>0||t.drawsAggro)&&(c=new bn({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t.name,aspect:t.aspect,basePotency:s,snapshotTime:this.getDisplayTime(),description:"",targetCount:a.targetCount,falloff:t.falloff})),c&&s>0){const S=[];this.hasResourceAvailable("TINCTURE")&&S.push(me.Tincture),S.push(...t.jobPotencyModifiers(this)),c.modifiers=S,a.addPotency(c)}const d=this.resources.get("AUTOS_ENGAGED").available(1),h=this.autoAttackDelay,E=this.findAutoAttackTimerInQueue(),A=t.startsAuto||c&&s>0;if(A)if(this.isInCombat())d||A&&this.startAutoAttackTimer(E,h);else{const S=E===-1?h:E;this.startAutoAttackTimer(S,h,void 0)}const R=t.healingPotencyFn(this);let T;if(R>0){T=new bn({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t.name,aspect:t.aspect,basePotency:R,snapshotTime:this.getDisplayTime(),description:"",targetCount:a.healTargetCount,falloff:0});const S=[];this.hasResourceAvailable("TINCTURE")&&S.push(me.Tincture),S.push(...t.jobHealingPotencyModifiers(this)),T.modifiers=S,a.addHealingPotency(T)}if(s>0&&!a.hasBuff(k.Tincture)&&(this.hasResourceAvailable("TINCTURE")&&a.addBuff(k.Tincture),this.jobSpecificAddDamageBuffCovers(a,t)),R>0&&(this.hasResourceAvailable("TINCTURE")&&!a.hasBuff(k.Tincture)&&a.addBuff(k.Tincture),this.jobSpecificAddHealingBuffCovers(a,t)),t.onConfirm(this,a),c&&!this.hasResourceAvailable("IN_COMBAT")){const S=this.resources.timeTillReady("IN_COMBAT");(S===0||S>t.applicationDelay)&&this.resources.addResourceEvent({rscType:"IN_COMBAT",name:"begin combat if necessary",delay:t.applicationDelay,fnOnRsc:p=>{p.gain(1)}})}t.applicationDelay>0?this.addEvent(new Ge(t.name+" applied",t.applicationDelay,()=>{c&&D.resolvePotency(c),T&&D.resolveHealingPotency(T),t.onApplication(this,a)})):(c&&D.resolvePotency(c),T&&D.resolveHealingPotency(T),t.onApplication(this,a)),l.useStack(),this.resources.takeResourceLock("NOT_ANIMATION_LOCKED",t.animationLockFn(this))}useLimitBreak(t,a,l){const s=this.cooldowns.get(t.cdName),c=t.castTimeFn(this),d=c>0?Wl.getSlidecastWindow(c):0,h=t.potencyFn(this);let E;h>0&&(E=new bn({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t.name,aspect:t.aspect,basePotency:h,snapshotTime:void 0,description:"",targetCount:a.targetCount,falloff:t.falloff}),a.addPotency(E));const A=t.healingPotencyFn(this);let R;A>0&&(R=new bn({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t.name,aspect:t.aspect,basePotency:A,snapshotTime:void 0,description:"",targetCount:a.healTargetCount,falloff:0}),a.addHealingPotency(R));const T=()=>{t.onConfirm(this,a),E&&(E.snapshotTime=this.getDisplayTime()),R&&(R.snapshotTime=this.getDisplayTime()),this.addEvent(new Ge(t.name+" applied",t.applicationDelay,()=>{E&&D.resolvePotency(E),R&&D.resolveHealingPotency(R),t.onApplication(this,a)})),this.resources.takeResourceLock("NOT_ANIMATION_LOCKED",d+t.animationLockFn(this))};if(c===0)T();else{this.resources.takeResourceLock("MOVEMENT",c-d),this.resources.takeResourceLock("NOT_CASTER_TAXED",this.config.getAfterTaxCastTime(c));const p=c-d;this.addEvent(new Ge(t.name+" captured",p,()=>{t.validateAttempt(this)?T():D.reportInterruption({failNode:a,failIndex:l})}))}s.useStack()}timeTillAnySkillAvailable(){let t=this.resources.timeTillReady("NOT_ANIMATION_LOCKED"),a=this.resources.timeTillReady("NOT_CASTER_TAXED");return Math.max(t,a)}findNextQueuedEventByTag(t){for(let a=0;a<this.eventsQueue.length;a++){let l=this.eventsQueue[a];if(l.hasTag(t))return l}}hasResourceAvailable(t,a){return this.resources.get(t).available(a??1)}enqueueResourceDrop(t,a,l){if(a===void 0){const c=Pt(this.job,t);console.assert(c==null?void 0:c.maxTimeout,`could not find timeout declaration for resource ${t}`),a=c.maxTimeout}const s=(l===void 0?"drop all ":`drop ${l} `)+t;this.resources.get(t).removeTimer(),this.resources.addResourceEvent({rscType:t,name:s,delay:a,fnOnRsc:c=>{c.consume(l??c.availableAmountIncludingDisabled());const d=Pt(this.job,c.type);d.warningOnTimeout&&D.reportWarning(d.warningOnTimeout)}})}getOverriddenDots(t){return ee(this,ru).get(t)??[]}getOverriddenHots(t){return ee(this,cu).get(t)??[]}applyDoT(t,a){this.applyOverTimeEffect(t,a,"damage")}applyHoT(t,a){this.applyOverTimeEffect(t,a,"healing")}applyOverTimeEffect(t,a,l){const s=this.resources.get(t),c=Pt(this.config.job,t).maxTimeout;let d;if((l==="damage"?this.getOverriddenDots(t):this.getOverriddenHots(t)).forEach(E=>{if(E!==t){if(!this.hasResourceAvailable(E)){const A=this.resources.get(E).getLastExpirationTime();if(A){const R=this.getDisplayTime()-A;d=d===void 0?R:Math.min(d,R)}return}a.setOverTimeOverrideAmount(t,a.getOverTimeOverrideAmount(t,l)+this.resources.timeTillReady(E),l),D.reportOverTimeDrop(this.getDisplayTime(),E,l),d=0,this.tryConsumeResource(E)}}),s.available(1))console.assert(s.node),s.node.removeUnresolvedOvertimePotencies(l),a.setOverTimeOverrideAmount(t,a.getOverTimeOverrideAmount(t,l)+this.resources.timeTillReady(t),l),s.overrideTimer(this,c);else{const E=this.getDisplayTime()-(s.getLastExpirationTime()??0);d=d===void 0?E:Math.min(d,E),s.gain(1);const A=l==="damage"?" DoT":" HoT";D.reportOverTimeStart(this.getDisplayTime(),t,l),this.resources.addResourceEvent({rscType:t,name:"drop "+t+A,delay:c,fnOnRsc:R=>{R.consume(1),D.reportOverTimeDrop(this.getDisplayTime(),t,l)}})}a.setOverTimeGap(t,d??0,l),s.node=a,s.tickCount=0,ee(this,Rr).includes(t)&&(this.handleDoTTick(t),D.reportDotTick(this.time,t)),ee(this,Tr).includes(t)&&(this.handleHoTTick(t),D.reportHotTick(this.time,t))}addDoTPotencies(t){this.addOverTimePotencies(t,"damage")}addHoTPotencies(t){this.addOverTimePotencies(t,"healing")}addOverTimePotencies(t,a){const l=t.modifiers??[];this.hasResourceAvailable("TINCTURE")&&!l.includes(me.Tincture)&&(l.push(me.Tincture),t.node.addBuff(k.Tincture));const s=Pt(this.config.job,t.effectName).maxTimeout,c=ee(this,Rr).includes(t.effectName)||ee(this,Tr).includes(t.effectName),d=s/(t.tickFrequency??3)+(c?1:0),h=a==="damage"?"DoT":"HoT",E=a==="damage"?t.node.targetCount:t.node.healTargetCount;for(let A=0;A<d;A++){let R=new bn({config:D.record.config??D.gameConfig,sourceTime:this.getDisplayTime(),sourceSkill:t.skillName,aspect:t.aspect??pe.Other,basePotency:this.config.adjustedOvertimePotency(t.tickPotency,t.speedStat),snapshotTime:this.getDisplayTime(),description:Zn(t.effectName)+` ${h} `+(A+1)+`/${d}`,targetCount:E,falloff:0});R.modifiers=l,t.node.addOverTimePotency(R,t.effectName,a)}}refreshDot(t,a=!1){this.refreshOverTimeEffect(t,"damage",a)}refreshHot(t){this.refreshOverTimeEffect(t,"healing",!1)}refreshOverTimeEffect(t,a,l){!l&&!this.hasResourceAvailable(t.effectName)||(this.addOverTimePotencies(t,a),this.applyOverTimeEffect(t.effectName,t.node,a))}timeTillNextMpGainEvent(){let t=this.findNextQueuedEventByTag(ia.ManaGain);return t?t.timeTillEvent:0}timeTillNextDamageEvent(){return this.resources.timeTillReady("IN_COMBAT")}getSkillAvailabilityStatus(t,a=!1){let l=this.skillsList.get(t),s=ge(this,vf,t0).call(this,l.name),c=l.manaCostFn(this),d=this.job==="BLM"&&this.resources.get("LEY_LINES").available(1),h=l.kind==="weaponskill"||l.kind==="spell"||l.kind==="limitbreak"?l.castTimeFn(this):0,E=h===0||l.kind==="ability"||l.kind!=="limitbreak"&&l.isInstantFn(this),A=this.resources.get("MANA").availableAmount(),R=s>pn.epsilon,T=c<=A,S=l.validateAttempt(this),p=this.config.level>=l.unlockLevel,I=Bm();if(R&&I.addUnavailableReason(qn.Blocked),l.secondaryCd&&this.cooldowns.get(l.secondaryCd.cdName).stacksAvailable()===0&&I.addUnavailableReason(qn.SecondaryBlocked),p||I.addUnavailableReason(qn.SkillNotUnlocked),S||I.addUnavailableReason(qn.RequirementsNotMet),T||I.addUnavailableReason(qn.NotEnoughMP),l.name==="MEDITATE"&&(s>pn.epsilon||this.cooldowns.get("cd_GCD").timeTillNextStackAvailable()>pn.epsilon)){const oe=I.unavailableReasons.indexOf(qn.RequirementsNotMet);oe>=0&&I.unavailableReasons.splice(oe,1),I.addUnavailableReason(qn.Blocked)}l.requiresCombat&&I.unavailableReasons.includes(qn.RequirementsNotMet)&&(I.addUnavailableReason(qn.NotInCombat),s=this.timeTillNextDamageEvent());let b=this.cooldowns.get(l.cdName);const O=l.secondaryCd?this.cooldowns.get(l.secondaryCd.cdName):void 0;let v=b.timeTillNextStackAvailable()%b.currentStackCd();const L=l.secondaryCd?this.cooldowns.timeTillNextStackAvailable(l.secondaryCd.cdName):void 0;let P=b.currentStackCd();if(t==="MEDITATE"&&v<pn.epsilon){const oe=this.cooldowns.get("cd_GCD"),Te=oe.currentStackCd();oe.timeTillNextStackAvailable()>v&&(b=oe,P=Te,v=oe.timeTillNextStackAvailable(),s=v)}const U=b.stacksAvailable(),V=b.maxStacks();let G=(O==null?void 0:O.currentStackCd())??0,H=0;I.ready()&&(l.kind==="spell"?H=(E?0:h-Wl.getSlidecastWindow(h))+l.applicationDelay:l.kind==="limitbreak"?H=h+l.applicationDelay:H=l.applicationDelay);const ue=(O==null?void 0:O.stacksAvailable())??0,Ae=(O==null?void 0:O.maxStacks())??0,Ee=l.highlightIf(this);return{skillName:l.name,status:I,stacksAvailable:Ae>0?ue:U,maxStacks:Math.max(V,Ae),castTime:h,instantCast:E,cdRecastTime:P,secondaryCdRecastTime:G,timeTillNextStackReady:v,timeTillSecondaryReady:L,timeTillAvailable:s,timeTillDamageApplication:H,capturedManaCost:c,highlight:Ee,llCovered:d}}useSkill(t,a,l){let s=this.skillsList.get(t);s.onExecute(this,a),s.falloff===void 0&&a.setTargetCount(1),s.aoeHeal&&a.setHealTargetCount(this.resources.get("PARTY_SIZE").availableAmount()),s.kind==="spell"||s.kind==="weaponskill"?this.useSpellOrWeaponskill(s,a,l):s.kind==="ability"?this.useAbility(s,a):s.kind==="limitbreak"&&this.useLimitBreak(s,a,l)}getPartyBuffs(t){const a=new Map;return D.timeline.getBuffMarkers().filter(s=>s.time<=t&&s.time+s.duration>=t).forEach(s=>{const c=new af(s.description);a.has(c.name)||(c.info.damageFactor===1?a.set(c.name,{kind:"critDirect",source:z.PARTY,buffType:c.name,critBonus:c.info.critBonus,dhBonus:c.info.dhBonus}):a.set(c.name,{kind:"multiplier",source:z.PARTY,buffType:c.name,potencyFactor:c.info.damageFactor}))}),a}tryConsumeResource(t,a=!1){const l=this.resources.get(t),s=a?l.availableAmount():1;return l.available(s)?(l.consume(s),l.available(s)||l.removeTimer(),!0):!1}setComboState(t,a){a===0?this.tryConsumeResource(t,!0):(this.resources.get(t).overrideCurrentValue(a),this.enqueueResourceDrop(t,30))}hasTraitUnlocked(t){return JI(t,this.config.level)}isInCombat(){return this.hasResourceAvailable("IN_COMBAT")}isBLMState(){return this.job==="BLM"}}Rr=new WeakMap,Tr=new WeakMap,ru=new WeakMap,cu=new WeakMap,vf=new WeakSet,t0=function(t){var d;let a=this.skillsList.get(t),l=a.cdName;const s=(d=a.secondaryCd)==null?void 0:d.cdName;let c=this.cooldowns.timeTillAnyStackAvailable(l);return s&&(c=Math.max(c,this.cooldowns.timeTillAnyStackAvailable(s))),Math.max(this.timeTillAnySkillAvailable(),c)};const n0=["THUNDER_III","THUNDER_IV","HIGH_THUNDER","HIGH_THUNDER_II"],kU=Object.keys(Fm).filter(e=>!n0.includes(e));Object.keys(Fm).forEach(e=>$n(e,`BLM/${ot[e].name}.png`));class PU extends $t{jobSpecificOtherTargetedBuffViewProps(){return[...n0.map(t=>this.makeCommonTimer(t,!1))]}jobSpecificSelfTargetedBuffViewProps(){return kU.map(t=>t==="LEY_LINES"?this.makeToggleableTimer(t):t==="THUNDERHEAD"||t==="FIRESTARTER"?this.makeCommonTimerless(t):this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){let a=this.state.resources.get("ENOCHIAN");const l=this.state.resources,s=this.state.getFireStacks(),c=this.state.getIceStacks(),d=l.get("UMBRAL_HEART").availableAmount(),h=l.get("PARADOX").availableAmount(),E=l.get("ASTRAL_SOUL").availableAmount(),A=a.available(1)?l.timeTillReady("POLYGLOT"):30,R=l.get("POLYGLOT").availableAmount(),T=this.state.hasTraitUnlocked("ENHANCED_POLYGLOT_II")&&3||this.state.hasTraitUnlocked("ENHANCED_POLYGLOT")&&2||1,S=[{kind:"counter",name:_({en:"AF/UI",zh:"冰火层数",ja:"AF/UB"}),color:s>0?t.blm.astralFire:t.blm.umbralIce,currentStacks:s>0?s:c,maxStacks:3},{kind:"counter",name:_({en:"hearts",zh:"冰针",ja:"アンブラルハート"}),color:t.blm.umbralHeart,currentStacks:d,maxStacks:3},{kind:"counter",name:_({en:"paradox",zh:"悖论",ja:"パラドックス"}),color:t.blm.paradox,currentStacks:h,maxStacks:1}];return this.state.hasTraitUnlocked("ENHANCED_ASTRAL_FIRE")&&S.push({kind:"counter",name:_({en:"astral soul",zh:"星极魂",ja:"アストラルソウル"}),color:t.blm.astralSoul,currentStacks:E,maxStacks:6}),S.push({kind:"bar",name:_({en:"poly timer",zh:"通晓计时",ja:"エノキ継続時間"}),color:t.blm.polyTimer,progress:1-A/30,valueString:A.toFixed(3)},{kind:"counter",name:_({en:"poly stacks",zh:"通晓层数",ja:"ポリグロット"}),color:t.blm.polyStacks,currentStacks:R,maxStacks:T}),S}}const Jn=(e,t,a)=>{tt("BLM",e,t,a??{})};Jn("POLYGLOT",3,{timeout:30});Jn("ASTRAL_FIRE",3);Jn("UMBRAL_ICE",3);Jn("UMBRAL_HEART",3);Jn("ASTRAL_SOUL",6);Jn("LEY_LINES",1,{timeout:20});Jn("ENOCHIAN",1);Jn("PARADOX",1);Jn("FIRESTARTER",1);Jn("THUNDERHEAD",1);Jn("THUNDER_III",1,{timeout:27});Jn("THUNDER_IV",1,{timeout:21});Jn("HIGH_THUNDER",1,{timeout:30});Jn("HIGH_THUNDER_II",1,{timeout:24});Jn("MANAWARD",1,{timeout:20});Jn("TRIPLECAST",3,{timeout:15.7});class GU extends Jt{constructor(a){super(a);F(this,"thunderTickOffset");a.initialResourceOverrides.some(h=>(h.type==="ASTRAL_FIRE"||h.type==="UMBRAL_ICE")&&h.stacks>0)&&this.gainStatus("ENOCHIAN"),this.thunderTickOffset=this.nonProcRng()*3;const s=this.hasTraitUnlocked("ENHANCED_POLYGLOT_II")&&3||this.hasTraitUnlocked("ENHANCED_POLYGLOT")&&2||1;this.resources.set(new ei("POLYGLOT",s,0));const c=this.hasTraitUnlocked("ENHANCED_MANAFONT")&&100||120,d=this.hasTraitUnlocked("ENHANCED_SWIFTCAST")&&40||60;[new Ke("cd_MANAFONT",c,1,1),new Ke("cd_SWIFTCAST",d,1,1)].forEach(h=>this.cooldowns.set(h)),this.registerRecurringEvents([{reportName:_({en:"Thunder DoT",zh:"雷DoT"}),groupedEffects:[{effectName:"HIGH_THUNDER",appliedBy:["HIGH_THUNDER"]},{effectName:"HIGH_THUNDER_II",appliedBy:["HIGH_THUNDER_II"]},{effectName:"THUNDER_III",appliedBy:["THUNDER_III"]},{effectName:"THUNDER_IV",appliedBy:["THUNDER_IV"]}]}])}get statusPropsGenerator(){return new PU(this)}jobSpecificRegisterRecurringEvents(){let a=l=>{this.hasEnochian()&&(l.availableAmount()===l.maxValue&&D.reportWarning(Fe.PolyglotOvercap),l.gain(1)),this.resources.addResourceEvent({rscType:"POLYGLOT",name:"gain polyglot if currently has enochian",delay:30,fnOnRsc:a})};a(this.resources.get("POLYGLOT"))}jobSpecificAddSpeedBuffCovers(a,l){this.hasResourceAvailable("LEY_LINES")&&l.cdName==="cd_GCD"&&a.addBuff(k.LeyLines)}captureManaRegenAmount(){return this.getFireStacks()>0?0:200}getFireStacks(){return this.resources.get("ASTRAL_FIRE").availableAmount()}getIceStacks(){return this.resources.get("UMBRAL_ICE").availableAmount()}getUmbralHearts(){return this.resources.get("UMBRAL_HEART").availableAmount()}getMP(){return this.resources.get("MANA").availableAmount()}gainThunderhead(){this.resources.get("THUNDERHEAD").gain(1)}switchToAForUI(a,l){console.assert(l>0);let s=this.resources.get("ASTRAL_FIRE"),c=this.resources.get("UMBRAL_ICE"),d=this.resources.get("UMBRAL_HEART"),h=this.resources.get("PARADOX"),E=this.resources.get("ASTRAL_SOUL");a==="ASTRAL_FIRE"?(s.availableAmount()===0&&this.gainThunderhead(),s.gain(l),this.hasTraitUnlocked("ASPECT_MASTERY_V")&&c.available(3)&&d.available(3)&&h.gain(1),c.consume(c.availableAmount())):a==="UMBRAL_ICE"&&(c.availableAmount()===0&&this.gainThunderhead(),c.gain(l),this.hasTraitUnlocked("ASPECT_MASTERY_V")&&s.available(3)&&h.gain(1),s.consume(s.availableAmount()),E.consume(E.availableAmount()))}gainUmbralMana(a=0){let l=0;switch(this.resources.get("UMBRAL_ICE").availableAmount()){case 1:l=2500;break;case 2:l=5e3;break;case 3:l=1e4;break;default:l=0;break}this.addEvent(new Ge("gain umbral mana",a,()=>{this.resources.get("MANA").gain(l)}))}captureManaCost(a,l,s){const c=this.getIceStacks(),d=this.getFireStacks(),h=this.getUmbralHearts();if(a==="PARADOX"&&this.getIceStacks()>0||a==="FIRE_III"&&this.hasResourceAvailable("FIRESTARTER"))return 0;let E=1;return l===pe.Fire&&c>0||l===pe.Ice&&(c>0||d>0)?E=0:l===pe.Fire&&d>0&&h===0&&(E=2),s*E}captureSpellCastTimeAFUI(a,l){const s=this.config.adjustedCastTime(a,this.hasResourceAvailable("LEY_LINES")?15:void 0);let c=1;return(l===pe.Fire&&this.getIceStacks()===3||l===pe.Ice&&this.getFireStacks()===3)&&(c=.5),s*c}hasEnochian(){return this.hasResourceAvailable("ENOCHIAN")}startOrRefreshEnochian(){let a=this.resources.get("ENOCHIAN");a.available(1)||(this.resources.get("POLYGLOT").overrideTimer(this,30),a.gain(1))}loseEnochian(){this.resources.get("ENOCHIAN").consume(1);let a=this.resources.get("ASTRAL_FIRE"),l=this.resources.get("UMBRAL_ICE"),s=this.resources.get("UMBRAL_HEART"),c=this.resources.get("PARADOX"),d=this.resources.get("ASTRAL_SOUL");a.consume(a.availableAmount()),l.consume(l.availableAmount()),s.consume(s.availableAmount()),c.consume(c.availableAmount()),d.consume(d.availableAmount())}}const a0=e=>e.resources.get("LEY_LINES").availableAmountIncludingDisabled()>0,pR=e=>e.hasResourceAvailable("PARADOX"),i0=e=>e.hasTraitUnlocked("ENHANCED_ENOCHIAN_IV")&&1.27||e.hasTraitUnlocked("ENHANCED_ENOCHIAN_III")&&1.22||e.hasTraitUnlocked("ENHANCED_ENOCHIAN_II")&&1.15||1.1,en=(e,t,a)=>{const l=a.aspect??pe.Other;let s=ut((d,h)=>{a.baseCastTime===0||e==="DESPAIR"&&d.hasTraitUnlocked("ENHANCED_ASTRAL_FIRE")||e==="FOUL"&&d.hasTraitUnlocked("ENHANCED_FOUL")||e==="FIRE_III"&&d.hasResourceAvailable("FIRESTARTER")||d.tryConsumeResource("SWIFTCAST")||d.tryConsumeResource("TRIPLECAST")},(d,h)=>{d.getFireStacks()>0&&l===pe.Fire&&!["DESPAIR","FLARE_STAR","FLARE"].includes(e)&&!(e==="FIRE_III"&&d.hasResourceAvailable("FIRESTARTER"))&&d.tryConsumeResource("UMBRAL_HEART"),l===pe.Ice&&d.gainUmbralMana(a.applicationDelay)},a.onConfirm??je);const c=a.onApplication??je;return oo("BLM",e,t,{...a,aspect:l,castTime:d=>d.captureSpellCastTimeAFUI(a.baseCastTime,l),recastTime:d=>d.config.adjustedGCD(2.5,d.hasResourceAvailable("LEY_LINES")?15:0),manaCost:d=>d.captureManaCost(e,l,a.baseManaCost),potency:d=>a.basePotency,isInstantFn:d=>e==="DESPAIR"&&d.hasTraitUnlocked("ENHANCED_ASTRAL_FIRE")||e==="FOUL"&&d.hasTraitUnlocked("ENHANCED_FOUL")||e==="FIRE_III"&&d.hasResourceAvailable("FIRESTARTER")||d.hasResourceAvailable("SWIFTCAST")||d.hasResourceAvailable("TRIPLECAST"),onConfirm:s,onApplication:c,jobPotencyModifiers:d=>{const h=[];if(d.hasResourceAvailable("ENOCHIAN")){const R=i0(d);h.push({kind:"multiplier",source:z.ENO,potencyFactor:R})}const E=d.getIceStacks(),A=d.getFireStacks();return E===1?l===pe.Fire?h.push({kind:"multiplier",source:z.UI1,potencyFactor:.9}):l===pe.Ice&&h.push({kind:"multiplier",source:z.UI1,potencyFactor:1}):E===2?l===pe.Fire?h.push({kind:"multiplier",source:z.UI2,potencyFactor:.8}):l===pe.Ice&&h.push({kind:"multiplier",source:z.UI2,potencyFactor:1}):E===3&&(l===pe.Fire?h.push({kind:"multiplier",source:z.UI3,potencyFactor:.7}):l===pe.Ice&&h.push({kind:"multiplier",source:z.UI3,potencyFactor:1})),A===1?l===pe.Ice?h.push({kind:"multiplier",source:z.AF1,potencyFactor:.9}):l===pe.Fire&&h.push({kind:"multiplier",source:z.AF1,potencyFactor:1.4}):A===2?l===pe.Ice?h.push({kind:"multiplier",source:z.AF2,potencyFactor:.8}):l===pe.Fire&&h.push({kind:"multiplier",source:z.AF2,potencyFactor:1.6}):A===3&&(l===pe.Ice?h.push({kind:"multiplier",source:z.AF3,potencyFactor:.7}):l===pe.Fire&&h.push({kind:"multiplier",source:z.AF3,potencyFactor:1.8})),h}})},ls=(e,t,a,l)=>Nt("BLM",e,t,a,l);en("BLIZZARD",1,{aspect:pe.Ice,baseCastTime:2,baseManaCost:400,basePotency:180,applicationDelay:.846,onConfirm:(e,t)=>{e.getFireStacks()===0?(e.switchToAForUI("UMBRAL_ICE",1),e.startOrRefreshEnochian()):(e.resources.get("ENOCHIAN").removeTimer(),e.loseEnochian())},replaceIf:[{newSkill:"PARADOX",condition:pR}]});const l0=e=>{e.resources.get("FIRESTARTER").gain(1)},wU=e=>{let t=e.rng();(e.config.procMode===jt.Always||e.config.procMode===jt.RNG&&t<.4)&&l0(e)};en("FIRE",2,{aspect:pe.Fire,baseCastTime:2,baseManaCost:800,basePotency:180,applicationDelay:1.871,onConfirm:(e,t)=>{wU(e),e.getIceStacks()===0?(e.switchToAForUI("ASTRAL_FIRE",1),e.startOrRefreshEnochian()):(e.resources.get("ENOCHIAN").removeTimer(),e.loseEnochian())},replaceIf:[{newSkill:"PARADOX",condition:pR}]});ls("TRANSPOSE",4,"cd_TRANSPOSE",{applicationDelay:0,cooldown:5,validateAttempt:e=>e.getFireStacks()>0||e.getIceStacks()>0,onApplication:(e,t)=>{(e.getFireStacks()!==0||e.getIceStacks()!==0)&&(e.switchToAForUI(e.getFireStacks()>0?"UMBRAL_ICE":"ASTRAL_FIRE",1),e.startOrRefreshEnochian())}});const Qf=(e,t)=>(a,l)=>{let s=0;switch(e){case"HIGH_THUNDER":s=60;break;case"THUNDER_III":s=50;break;case"THUNDER_IV":s=35;break;case"HIGH_THUNDER_II":s=40;break}const c=[];if(a.hasResourceAvailable("ENOCHIAN")){const h=i0(a);c.push({kind:"multiplier",source:z.ENO,potencyFactor:h})}console.assert(s>0,`${e} was applied as a Thunder DoT`),a.addDoTPotencies({node:l,effectName:t,skillName:e,tickPotency:s,speedStat:"sps",aspect:pe.Lightning,modifiers:c});let d=a.resources.get("THUNDERHEAD");d.consume(1),d.removeTimer()};en("THUNDER_III",45,{aspect:pe.Lightning,baseCastTime:0,baseManaCost:0,basePotency:120,applicationDelay:1.03,validateAttempt:e=>e.hasResourceAvailable("THUNDERHEAD"),onConfirm:Qf("THUNDER_III","THUNDER_III"),onApplication:(e,t)=>e.applyDoT("THUNDER_III",t),autoUpgrade:{trait:"THUNDER_MASTERY_III",otherSkill:"HIGH_THUNDER"},highlightIf:e=>e.hasResourceAvailable("THUNDERHEAD")});ze("BLM","MANAWARD",30,"cd_MANAWARD",{rscType:"MANAWARD",applicationDelay:1.114,cooldown:120});ls("MANAFONT",30,"cd_MANAFONT",{applicationDelay:.2,cooldown:100,validateAttempt:e=>e.getFireStacks()>0,onConfirm:(e,t)=>{e=e,e.resources.get("ASTRAL_FIRE").gain(3),e.resources.get("UMBRAL_HEART").gain(3),e.hasTraitUnlocked("ASPECT_MASTERY_V")&&e.resources.get("PARADOX").gain(1),e.gainThunderhead(),e.startOrRefreshEnochian()},onApplication:(e,t)=>{e.resources.get("MANA").gain(1e4)}});en("FIRE_III",35,{aspect:pe.Fire,baseCastTime:3.5,baseManaCost:2e3,basePotency:290,applicationDelay:1.292,onConfirm:(e,t)=>{e.tryConsumeResource("FIRESTARTER"),e.switchToAForUI("ASTRAL_FIRE",3),e.startOrRefreshEnochian()},highlightIf:e=>e.hasResourceAvailable("FIRESTARTER")});en("BLIZZARD_III",35,{aspect:pe.Ice,baseCastTime:3.5,baseManaCost:800,basePotency:290,applicationDelay:.89,onConfirm:(e,t)=>{e.switchToAForUI("UMBRAL_ICE",3),e.startOrRefreshEnochian()}});en("FREEZE",40,{aspect:pe.Ice,baseCastTime:2,baseManaCost:1e3,basePotency:120,applicationDelay:.664,falloff:0,validateAttempt:e=>e.getIceStacks()>0,onConfirm:(e,t)=>e.resources.get("UMBRAL_HEART").gain(3)});en("FLARE",50,{aspect:pe.Fire,baseCastTime:2,baseManaCost:0,basePotency:240,applicationDelay:1.157,falloff:.3,validateAttempt:e=>e.getFireStacks()>0&&e.getMP()>=800,onConfirm:(e,t)=>{let a=e.resources.get("UMBRAL_HEART"),l=e.resources.get("MANA"),s=a.available(1)?l.availableAmount()*.66:l.availableAmount();e.resources.get("MANA").consume(s),a.consume(a.availableAmount()),e.resources.get("ASTRAL_FIRE").gain(3),e.hasTraitUnlocked("ENHANCED_ASTRAL_FIRE")&&e.resources.get("ASTRAL_SOUL").gain(3),e.startOrRefreshEnochian()}});ze("BLM","LEY_LINES",52,"cd_LEY_LINES",{rscType:"LEY_LINES",applicationDelay:.49,cooldown:120,maxCharges:2,validateAttempt:e=>!(e.resources.get("LEY_LINES").availableAmountIncludingDisabled()>0),onApplication:(e,t)=>{e.resources.get("LEY_LINES").enabled=!0},replaceIf:[{newSkill:"RETRACE",condition:a0}]});en("BLIZZARD_IV",58,{aspect:pe.Ice,baseCastTime:2,baseManaCost:800,basePotency:300,applicationDelay:1.156,validateAttempt:e=>e.getIceStacks()>0,onConfirm:(e,t)=>e.resources.get("UMBRAL_HEART").gain(3)});en("FIRE_IV",60,{aspect:pe.Fire,baseCastTime:2,baseManaCost:800,basePotency:300,applicationDelay:1.159,validateAttempt:e=>e.getFireStacks()>0,onConfirm:(e,t)=>{e.hasTraitUnlocked("ENHANCED_ASTRAL_FIRE")&&e.resources.get("ASTRAL_SOUL").gain(1)}});ls("BETWEEN_THE_LINES",62,"cd_BETWEEN_THE_LINES",{applicationDelay:0,cooldown:3,animationLock:jn,validateAttempt:e=>e.resources.get("LEY_LINES").availableAmountIncludingDisabled()>0,onConfirm:(e,t)=>{e.resources.get("LEY_LINES").enabled=!0}});ls("AETHERIAL_MANIPULATION",50,"cd_AETHERIAL_MANIPULATION",{applicationDelay:0,cooldown:10,animationLock:jn});ls("TRIPLECAST",66,"cd_TRIPLECAST",{applicationDelay:0,cooldown:60,maxCharges:2,onApplication:(e,t)=>{const a=e.resources.get("TRIPLECAST");a.pendingChange&&a.removeTimer(),a.gain(3),e.enqueueResourceDrop("TRIPLECAST")}});en("FOUL",70,{baseCastTime:2,baseManaCost:0,basePotency:600,falloff:.25,applicationDelay:1.158,validateAttempt:e=>e.hasResourceAvailable("POLYGLOT"),onConfirm:(e,t)=>e.resources.get("POLYGLOT").consume(1),highlightIf:e=>e.hasResourceAvailable("POLYGLOT")});en("DESPAIR",72,{aspect:pe.Fire,baseCastTime:2,baseManaCost:0,basePotency:350,applicationDelay:.556,validateAttempt:e=>e.getFireStacks()>0&&e.getMP()>=800,onConfirm:(e,t)=>{const a=e.resources.get("MANA"),l=a.availableAmount();console.assert(l>=800,`tried to confirm despair at ${l} MP`),a.consume(l),e.resources.get("ASTRAL_FIRE").gain(3),e.startOrRefreshEnochian()}});en("UMBRAL_SOUL",35,{aspect:pe.Ice,baseCastTime:0,baseManaCost:0,basePotency:0,applicationDelay:.633,validateAttempt:e=>e.getIceStacks()>0,onConfirm:(e,t)=>{e.resources.get("UMBRAL_ICE").gain(1),e.resources.get("UMBRAL_HEART").gain(1)}});en("XENOGLOSSY",80,{baseCastTime:0,baseManaCost:0,basePotency:890,applicationDelay:.63,validateAttempt:e=>e.hasResourceAvailable("POLYGLOT"),onConfirm:(e,t)=>e.resources.get("POLYGLOT").consume(1),highlightIf:e=>e.hasResourceAvailable("POLYGLOT")});en("FIRE_II",18,{aspect:pe.Fire,baseCastTime:3,baseManaCost:1500,basePotency:80,falloff:0,applicationDelay:1.154,autoUpgrade:{trait:"ASPECT_MASTERY_IV",otherSkill:"HIGH_FIRE_II"},onConfirm:(e,t)=>{e.switchToAForUI("ASTRAL_FIRE",3),e.startOrRefreshEnochian()}});en("BLIZZARD_II",12,{aspect:pe.Ice,baseCastTime:3,baseManaCost:800,basePotency:80,falloff:0,applicationDelay:1.158,autoUpgrade:{trait:"ASPECT_MASTERY_IV",otherSkill:"HIGH_BLIZZARD_II"},onConfirm:(e,t)=>{e.switchToAForUI("UMBRAL_ICE",3),e.startOrRefreshEnochian()}});en("HIGH_FIRE_II",82,{aspect:pe.Fire,baseCastTime:3,baseManaCost:1500,basePotency:100,falloff:0,applicationDelay:1.154,autoDowngrade:{trait:"ASPECT_MASTERY_IV",otherSkill:"FIRE_II"},onConfirm:(e,t)=>{e.switchToAForUI("ASTRAL_FIRE",3),e.startOrRefreshEnochian()}});en("HIGH_BLIZZARD_II",82,{aspect:pe.Ice,baseCastTime:3,baseManaCost:800,basePotency:100,falloff:0,applicationDelay:1.158,autoDowngrade:{trait:"ASPECT_MASTERY_IV",otherSkill:"BLIZZARD_II"},onConfirm:(e,t)=>{e.switchToAForUI("UMBRAL_ICE",3),e.startOrRefreshEnochian()}});ls("AMPLIFIER",86,"cd_AMPLIFIER",{applicationDelay:0,cooldown:120,validateAttempt:e=>e.getFireStacks()>0||e.getIceStacks()>0,onApplication:(e,t)=>{let a=e.resources.get("POLYGLOT");a.available(a.maxValue)&&D.reportWarning(Fe.PolyglotOvercap),a.gain(1)}});en("PARADOX",90,{baseCastTime:0,baseManaCost:1600,basePotency:540,applicationDelay:.624,validateAttempt:pR,onConfirm:(e,t)=>{e.resources.get("PARADOX").consume(1),e.getFireStacks()>0?l0(e):e.getIceStacks()===0&&console.error("cannot cast Paradox outside of AF/UI")},replaceIf:[{newSkill:"BLIZZARD",condition:e=>!e.hasResourceAvailable("PARADOX")&&e.getIceStacks()>0},{newSkill:"FIRE",condition:e=>!e.hasResourceAvailable("PARADOX")&&e.getFireStacks()>0}],startOnHotbar:!1,highlightIf:e=>!0});en("HIGH_THUNDER",92,{aspect:pe.Lightning,baseCastTime:0,baseManaCost:0,basePotency:150,applicationDelay:.757,validateAttempt:e=>e.hasResourceAvailable("THUNDERHEAD"),onConfirm:Qf("HIGH_THUNDER","HIGH_THUNDER"),onApplication:(e,t)=>e.applyDoT("HIGH_THUNDER",t),autoDowngrade:{trait:"THUNDER_MASTERY_III",otherSkill:"THUNDER_III"},highlightIf:e=>e.hasResourceAvailable("THUNDERHEAD")});en("FLARE_STAR",100,{aspect:pe.Fire,baseCastTime:2,baseManaCost:0,basePotency:500,falloff:.65,applicationDelay:.622,validateAttempt:e=>e.hasResourceAvailable("ASTRAL_SOUL",6),onConfirm:(e,t)=>e.resources.get("ASTRAL_SOUL").consume(6),highlightIf:e=>e.resources.get("ASTRAL_SOUL").available(6)});en("THUNDER_IV",64,{aspect:pe.Lightning,baseCastTime:0,baseManaCost:0,basePotency:80,falloff:0,applicationDelay:1.16,validateAttempt:e=>e.hasResourceAvailable("THUNDERHEAD"),onConfirm:Qf("THUNDER_IV","THUNDER_IV"),onApplication:(e,t)=>e.applyDoT("THUNDER_IV",t),autoUpgrade:{trait:"THUNDER_MASTERY_III",otherSkill:"HIGH_THUNDER_II"},highlightIf:e=>e.hasResourceAvailable("THUNDERHEAD")});en("HIGH_THUNDER_II",92,{aspect:pe.Lightning,baseCastTime:0,baseManaCost:0,basePotency:100,falloff:0,applicationDelay:.8,validateAttempt:e=>e.hasResourceAvailable("THUNDERHEAD"),onConfirm:Qf("HIGH_THUNDER_II","HIGH_THUNDER_II"),onApplication:(e,t)=>e.applyDoT("HIGH_THUNDER_II",t),autoDowngrade:{trait:"THUNDER_MASTERY_III",otherSkill:"THUNDER_IV"},highlightIf:e=>e.hasResourceAvailable("THUNDERHEAD")});ls("RETRACE",96,"cd_RETRACE",{applicationDelay:0,cooldown:40,validateAttempt:a0,onConfirm:(e,t)=>{let a=e.resources.get("LEY_LINES");a.enabled=!0,console.assert(a.pendingChange!==void 0,"LL should def have a timer when Retrace is used"),a.pendingChange.timeTillEvent=Math.floor(a.pendingChange.timeTillEvent)+.5},startOnHotbar:!1});const o0=["CAUSTIC_BITE","STORMBITE"],BU=Object.keys(jm).filter(e=>!o0.includes(e));Object.keys(jm).forEach(e=>$n(e,`BRD/${ot[e].name}.png`));class FU extends $t{jobSpecificOtherTargetedBuffViewProps(){return[...o0.map(t=>this.makeCommonTimer(t,!1))]}jobSpecificSelfTargetedBuffViewProps(){return[...BU.map(t=>this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){const a=this.state.resources,l=a.get("PITCH_PERFECT"),s=a.get("REPERTOIRE"),c=[{kind:"counter",name:_({en:"Pitch Perfect"}),color:t.brd.pitchPerfect,currentStacks:l.availableAmount(),maxStacks:l.maxValue},{kind:"counter",name:_({en:"Paeon Repertoire"}),color:t.brd.repertoire,currentStacks:s.availableAmount(),maxStacks:s.maxValue}];if(this.state.hasTraitUnlocked("SOUL_VOICE")){const d=a.get("SOUL_VOICE");c.push({kind:"bar",name:_({en:"Soul Voice"}),color:t.brd.soulVoice,progress:d.availableAmount()/d.maxValue,valueString:d.availableAmount().toFixed(0)})}return this.state.hasTraitUnlocked("MINSTRELS_CODA")&&c.push({kind:"coda",name:_({en:"Coda"}),hasWanderers:this.state.hasResourceAvailable("WANDERERS_CODA"),hasMages:this.state.hasResourceAvailable("MAGES_CODA"),hasArmys:this.state.hasResourceAvailable("ARMYS_CODA"),wanderersColor:t.brd.wanderersCoda,magesColor:t.brd.magesCoda,armysColor:t.brd.armysCoda}),c}}const Mt=(e,t,a)=>{tt("BRD",e,t,a??{})};Mt("SOUL_VOICE",100);Mt("PITCH_PERFECT",3);Mt("REPERTOIRE",4);Mt("WANDERERS_CODA",1);Mt("MAGES_CODA",1);Mt("ARMYS_CODA",1);Mt("ETHOS_REPERTOIRE",4);Mt("MUSE_REPERTOIRE",4);Mt("HAWKS_EYE",1,{timeout:30});Mt("RAGING_STRIKES",1,{timeout:20});Mt("BARRAGE",1,{timeout:10});Mt("ARMYS_MUSE",4,{timeout:10});Mt("ARMYS_ETHOS",4,{timeout:30});Mt("BLAST_ARROW_READY",1,{timeout:10});Mt("RESONANT_ARROW_READY",1,{timeout:30});Mt("RADIANT_ENCORE_READY",1,{timeout:30});Mt("MAGES_BALLAD",1,{timeout:45});Mt("ARMYS_PAEON",1,{timeout:45});Mt("WANDERERS_MINUET",1,{timeout:45});Mt("BATTLE_VOICE",1,{timeout:20});Mt("WARDENS_PAEAN",1,{timeout:30});Mt("TROUBADOUR",1,{timeout:15});Mt("NATURES_MINNE",1,{timeout:15});Mt("RADIANT_FINALE",1,{timeout:20});Mt("RADIANT_CODA",3);Mt("CAUSTIC_BITE",1,{timeout:45});Mt("STORMBITE",1,{timeout:45});const dI=["WANDERERS_MINUET","MAGES_BALLAD","ARMYS_PAEON"],jU=["REFULGENT_ARROW","SHADOWBITE","WIDE_VOLLEY"];class zU extends Jt{constructor(t){super(t),this.hasTraitUnlocked("ENHANCED_BLOODLETTER")||this.cooldowns.set(new Ke("cd_HEARTBREAK_SHOT",15,2,2)),this.hasTraitUnlocked("ENHANCED_TROUBADOUR")||this.cooldowns.set(new Ke("cd_TROUBADOUR",120,1,1)),this.registerRecurringEvents([{reportName:Zn("STORMBITE"),groupedEffects:[{effectName:"STORMBITE",appliedBy:["STORMBITE","IRON_JAWS"]}]},{reportName:Zn("CAUSTIC_BITE"),groupedEffects:[{effectName:"CAUSTIC_BITE",appliedBy:["CAUSTIC_BITE","IRON_JAWS"]}]}])}get statusPropsGenerator(){return new FU(this)}jobSpecificAddDamageBuffCovers(t,a){switch(this.hasResourceAvailable("RAGING_STRIKES")&&t.addBuff(k.RagingStrikes),this.hasResourceAvailable("BATTLE_VOICE")&&t.addBuff(k.BattleVoice),this.resources.get("RADIANT_FINALE").availableAmount()){case 1:t.addBuff(k.RadiantFinale1);break;case 2:t.addBuff(k.RadiantFinale2);break;case 3:t.addBuff(k.RadiantFinale3);break}this.hasResourceAvailable("BARRAGE")&&jU.includes(a.name)&&t.addBuff(k.Barrage),this.hasResourceAvailable("WANDERERS_MINUET")?t.addBuff(k.WanderersMinuet):this.hasResourceAvailable("MAGES_BALLAD")?t.addBuff(k.MagesBallad):this.hasResourceAvailable("ARMYS_PAEON")&&t.addBuff(k.ArmysPaeon)}songTick(t){this.resourceIsSong(t)&&this.hasResourceAvailable(t)&&(this.triggersEffect(.8)&&this.gainRepertoireEffect(t),this.resources.timeTillReady(t)>3+pn.epsilon&&this.addEvent(new Ge(`${t} tick`,3,()=>{this.songTick(t)})))}gainRepertoireEffect(t){if(t||(this.hasResourceAvailable("WANDERERS_MINUET")?t="WANDERERS_MINUET":this.hasResourceAvailable("MAGES_BALLAD")?t="MAGES_BALLAD":this.hasResourceAvailable("ARMYS_PAEON")&&(t="ARMYS_PAEON")),!!t&&this.resourceIsSong(t)){switch(t){case"WANDERERS_MINUET":this.resources.get("PITCH_PERFECT").gain(1);break;case"MAGES_BALLAD":this.cooldowns.get("cd_HEARTBREAK_SHOT").restore(7.5);break;case"ARMYS_PAEON":this.resources.get("REPERTOIRE").gain(1);break}this.hasTraitUnlocked("SOUL_VOICE")&&(this.hasResourceAvailable("SOUL_VOICE",100)&&D.reportWarning(Fe.SoulVoiceOvercap),this.resources.get("SOUL_VOICE").gain(5))}}resourceIsSong(t){return dI.includes(t)}beginSong(t){if(this.resourceIsSong(t)){if(dI.forEach(a=>this.tryExpireSong(a)),t!=="ARMYS_PAEON"&&this.hasResourceAvailable("ARMYS_ETHOS")){const a=this.resources.get("ETHOS_REPERTOIRE").availableAmount();this.resources.get("MUSE_REPERTOIRE").gain(a),this.tryConsumeResource("ARMYS_ETHOS"),this.tryConsumeResource("ETHOS_REPERTOIRE",!0),this.gainStatus("ARMYS_MUSE")}if(this.hasTraitUnlocked("MINSTRELS_CODA")){const a=t==="WANDERERS_MINUET"?"WANDERERS_CODA":t==="MAGES_BALLAD"?"MAGES_CODA":"ARMYS_CODA";this.hasResourceAvailable(a)&&D.reportWarning(Fe.CodaOvercap),this.resources.get(a).gain(1)}this.resources.get(t).gain(1),this.resources.addResourceEvent({rscType:t,name:"drop "+t,delay:this.getStatusDuration(t),fnOnRsc:a=>this.tryExpireSong(t)}),this.addEvent(new Ge(`${t} tick`,3,()=>{this.songTick(t)}))}}tryExpireSong(t){if(this.resourceIsSong(t)&&this.hasResourceAvailable(t)){switch(t){case"WANDERERS_MINUET":this.tryConsumeResource("PITCH_PERFECT",!0);break;case"ARMYS_PAEON":if(this.hasTraitUnlocked("ENHANCED_ARMYS_PAEON")){const a=this.resources.get("REPERTOIRE").availableAmount();a>0&&(this.resources.get("ETHOS_REPERTOIRE").gain(a),this.gainStatus("ARMYS_ETHOS")),this.tryConsumeResource("MUSE_REPERTOIRE",!0)}this.tryConsumeResource("REPERTOIRE",!0);break}this.tryConsumeResource(t)}}getCodaCount(){const t=this.resources.get("WANDERERS_CODA").availableAmount(),a=this.resources.get("MAGES_CODA").availableAmount(),l=this.resources.get("ARMYS_CODA").availableAmount();return t+a+l}getJobPotencyModifiers(t){const a=[];if([{rscType:"WANDERERS_MINUET",mod:me.WanderersMinuet},{rscType:"MAGES_BALLAD",mod:me.MagesBallad},{rscType:"ARMYS_PAEON",mod:me.ArmysPaeon},{rscType:"RAGING_STRIKES",mod:me.RagingStrikes},{rscType:"BATTLE_VOICE",mod:me.BattleVoice}].forEach(s=>{this.hasResourceAvailable(s.rscType)&&a.push(s.mod)}),this.hasResourceAvailable("RADIANT_FINALE")){const s=this.resources.get("RADIANT_CODA").availableAmount();s===3?a.push(me.RadiantFinaleThreeCoda):s===2?a.push(me.RadiantFinaleTwoCoda):s===1&&a.push(me.RadiantFinaleOneCoda)}if(this.hasResourceAvailable("BARRAGE"))switch(t){case"REFULGENT_ARROW":a.push(me.BarrageRefulgent);break;case"SHADOWBITE":a.push(me.BarrageShadowbite);break;case"WIDE_VOLLEY":a.push(me.BarrageWideVolley);break}return a}getSpeedModifier(t){if(t==="ARMYS_PAEON")return this.resources.get("REPERTOIRE").availableAmount()*4;if(t==="ARMYS_MUSE"){const a=this.resources.get("MUSE_REPERTOIRE").availableAmount();return a===4?12:a===3?4:a}return 0}}const Ba=(e,t,a)=>Mi("BRD",e,t,{...a,recastTime:l=>{let s;l.hasResourceAvailable("ARMYS_PAEON")?s="ARMYS_PAEON":l.hasResourceAvailable("ARMYS_MUSE")&&(s="ARMYS_MUSE");const c=l.getSpeedModifier(s);return l.config.adjustedSksGCD(2.5,c)},jobPotencyModifiers:l=>l.getJobPotencyModifiers(e)}),ro=(e,t,a,l)=>Nt("BRD",e,t,a,{...l,jobPotencyModifiers:s=>s.getJobPotencyModifiers(e)}),os=(e,t,a,l)=>ze("BRD",e,t,a,{...l});Ba("HEAVY_SHOT",1,{potency:160,applicationDelay:1.47,onApplication:e=>e.maybeGainProc("HAWKS_EYE",.2),autoUpgrade:{trait:"HEAVY_SHOT_MASTERY",otherSkill:"BURST_SHOT"}});Ba("BURST_SHOT",1,{startOnHotbar:!1,potency:[["NEVER",200],["RANGED_MASTERY",220]],applicationDelay:1.47,onApplication:e=>e.maybeGainProc("HAWKS_EYE",.35)});Ba("REFULGENT_ARROW",70,{potency:[["NEVER",260],["RANGED_MASTERY",280]],applicationDelay:1.47,onConfirm:e=>{e.hasResourceAvailable("BARRAGE")?e.tryConsumeResource("BARRAGE"):e.tryConsumeResource("HAWKS_EYE")},validateAttempt:e=>e.hasResourceAvailable("HAWKS_EYE")||e.hasResourceAvailable("BARRAGE"),highlightIf:e=>e.hasResourceAvailable("HAWKS_EYE")||e.hasResourceAvailable("BARRAGE")});const Im=[{skillName:"CAUSTIC_BITE",dotName:"CAUSTIC_BITE",initialPotency:150,tickPotency:20},{skillName:"STORMBITE",dotName:"STORMBITE",initialPotency:100,tickPotency:25}];Im.forEach(e=>{Ba(e.skillName,1,{potency:e.initialPotency,applicationDelay:1.29,onConfirm:(t,a)=>t.addDoTPotencies({node:a,effectName:e.dotName,skillName:e.skillName,tickPotency:e.tickPotency,speedStat:"sks",modifiers:t.getJobPotencyModifiers(e.skillName)}),onApplication:(t,a)=>{t.applyDoT(e.dotName,a),t.hasTraitUnlocked("BITE_MASTERY_II")&&t.maybeGainProc("HAWKS_EYE",.35)}})});Ba("IRON_JAWS",56,{potency:100,applicationDelay:.67,onConfirm:(e,t)=>{const a=Im.map(l=>e.hasResourceAvailable(l.dotName));e.addEvent(new Ge("iron jaws dot refresh",.67,()=>{Im.forEach((l,s)=>{e.refreshDot({node:t,effectName:l.dotName,tickPotency:l.tickPotency,skillName:"IRON_JAWS",speedStat:"sks",modifiers:e.getJobPotencyModifiers("IRON_JAWS")},a[s])}),e.hasTraitUnlocked("BITE_MASTERY_II")&&e.maybeGainProc("HAWKS_EYE",.35)}))}});Ba("APEX_ARROW",80,{potency:e=>{const t=e.resources.get("SOUL_VOICE"),a=20,l=e.hasTraitUnlocked("RANGED_MASTERY")?120:100,s=e.hasTraitUnlocked("RANGED_MASTERY")?600:500,c=1*(t.availableAmount()-a)/(t.maxValue-a);return(s-l)*c+l},falloff:0,applicationDelay:1.07,onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_APEX_ARROW")&&e.resources.get("SOUL_VOICE").availableAmount()>=80&&e.gainStatus("BLAST_ARROW_READY"),e.tryConsumeResource("SOUL_VOICE",!0)},validateAttempt:e=>e.hasResourceAvailable("SOUL_VOICE",20),highlightIf:e=>e.hasResourceAvailable("SOUL_VOICE",80),replaceIf:[{newSkill:"BLAST_ARROW",condition:e=>e.hasResourceAvailable("BLAST_ARROW_READY")}]});Ba("BLAST_ARROW",86,{startOnHotbar:!1,potency:600,falloff:.6,applicationDelay:1.65,validateAttempt:e=>e.hasResourceAvailable("BLAST_ARROW_READY"),highlightIf:e=>e.hasResourceAvailable("BLAST_ARROW_READY"),onConfirm:e=>e.tryConsumeResource("BLAST_ARROW_READY")});ro("EMYPREAL_ARROW",54,"cd_EMPYREAL_ARROW",{potency:[["NEVER",240],["RANGED_MASTERY",260]],cooldown:15,applicationDelay:1.03,onConfirm:e=>e.gainRepertoireEffect()});ro("BLOODLETTER",12,"cd_HEARTBREAK_SHOT",{potency:130,cooldown:15,maxCharges:3,applicationDelay:1.65,autoUpgrade:{otherSkill:"HEARTBREAK_SHOT",trait:"BLOODLETTER_MASTERY"}});ro("HEARTBREAK_SHOT",92,"cd_HEARTBREAK_SHOT",{startOnHotbar:!1,potency:180,cooldown:15,maxCharges:3,applicationDelay:1.65});ro("SIDEWINDER",60,"cd_SIDEWINDER",{potency:[["NEVER",320],["RANGED_MASTERY",400]],cooldown:60,applicationDelay:.53});const YU=[{skillName:"WANDERERS_MINUET",song:"WANDERERS_MINUET",skillLevel:52,cdName:"cd_WANDERERS_MINUET",replaceIf:[{newSkill:"PITCH_PERFECT",condition:e=>e.hasResourceAvailable("WANDERERS_MINUET")}]},{skillName:"MAGES_BALLAD",song:"MAGES_BALLAD",skillLevel:30,cdName:"cd_MAGES_BALLAD"},{skillName:"ARMYS_PAEON",song:"ARMYS_PAEON",skillLevel:40,cdName:"cd_ARMYS_PAEON"}];YU.forEach(e=>{ro(e.skillName,e.skillLevel,e.cdName,{applicationDelay:0,requiresCombat:!0,cooldown:120,replaceIf:e.replaceIf,onConfirm:t=>t.beginSong(e.song)})});ro("PITCH_PERFECT",52,"cd_PITCH_PERFECT",{startOnHotbar:!1,applicationDelay:.8,cooldown:1,potency:e=>{const t=e.resources.get("PITCH_PERFECT").availableAmount();return t===3?360:t===2?220:100},falloff:.55,onConfirm:e=>e.tryConsumeResource("PITCH_PERFECT",!0),validateAttempt:e=>e.hasResourceAvailable("WANDERERS_MINUET")&&e.hasResourceAvailable("PITCH_PERFECT"),highlightIf:e=>e.hasResourceAvailable("WANDERERS_MINUET")&&e.hasResourceAvailable("PITCH_PERFECT")});os("BARRAGE",38,"cd_BARRAGE",{rscType:"BARRAGE",applicationDelay:0,cooldown:120,onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_BARRAGE")&&e.gainStatus("RESONANT_ARROW_READY")},replaceIf:[{newSkill:"RESONANT_ARROW",condition:e=>e.hasResourceAvailable("RESONANT_ARROW_READY")}]});Ba("RESONANT_ARROW",96,{startOnHotbar:!1,potency:600,falloff:.55,applicationDelay:1.16,onConfirm:e=>e.tryConsumeResource("RESONANT_ARROW_READY"),validateAttempt:e=>e.hasResourceAvailable("RESONANT_ARROW_READY"),highlightIf:e=>e.hasResourceAvailable("RESONANT_ARROW_READY")});os("RADIANT_FINALE",90,"cd_RADIANT_FINALE",{rscType:"RADIANT_FINALE",applicationDelay:.62,cooldown:110,onConfirm:e=>{const t=e.getCodaCount();e.resources.get("RADIANT_CODA").overrideCurrentValue(t),e.tryConsumeResource("WANDERERS_CODA"),e.tryConsumeResource("MAGES_CODA"),e.tryConsumeResource("ARMYS_CODA"),e.hasTraitUnlocked("ENHANCED_RADIANT_FINALE")&&e.gainStatus("RADIANT_ENCORE_READY")},validateAttempt:e=>e.getCodaCount()>0,replaceIf:[{newSkill:"RADIANT_ENCORE",condition:e=>e.hasResourceAvailable("RADIANT_ENCORE_READY")}]});Ba("RADIANT_ENCORE",100,{startOnHotbar:!1,potency:e=>{const t=e.resources.get("RADIANT_CODA").availableAmount();return t===3?900:t===2?600:500},falloff:.55,applicationDelay:1.96,onConfirm:e=>e.tryConsumeResource("RADIANT_ENCORE_READY"),validateAttempt:e=>e.hasResourceAvailable("RADIANT_ENCORE_READY"),highlightIf:e=>e.hasResourceAvailable("RADIANT_ENCORE_READY")});os("RAGING_STRIKES",4,"cd_RAGING_STRIKES",{rscType:"RAGING_STRIKES",applicationDelay:.53,cooldown:120});os("BATTLE_VOICE",50,"cd_BATTLE_VOICE",{rscType:"BATTLE_VOICE",applicationDelay:.62,cooldown:120});Ba("QUICK_NOCK",18,{potency:110,applicationDelay:1.11,onApplication:e=>e.maybeGainProc("HAWKS_EYE",.2),falloff:0,autoUpgrade:{trait:"QUICK_NOCK_MASTERY",otherSkill:"LADONSBITE"}});Ba("LADONSBITE",82,{startOnHotbar:!1,potency:140,falloff:0,applicationDelay:1.11,onApplication:e=>e.maybeGainProc("HAWKS_EYE",.35)});Ba("WIDE_VOLLEY",18,{potency:140,falloff:0,applicationDelay:1.43,onConfirm:e=>{e.hasResourceAvailable("BARRAGE")?e.tryConsumeResource("BARRAGE"):e.tryConsumeResource("HAWKS_EYE")},validateAttempt:e=>e.hasResourceAvailable("HAWKS_EYE")||e.hasResourceAvailable("BARRAGE"),highlightIf:e=>e.hasResourceAvailable("HAWKS_EYE")||e.hasResourceAvailable("BARRAGE"),autoUpgrade:{trait:"WIDE_VOLLEY_MASTERY",otherSkill:"SHADOWBITE"}});Ba("SHADOWBITE",72,{startOnHotbar:!1,potency:180,falloff:0,applicationDelay:1.43,onConfirm:e=>{e.hasResourceAvailable("BARRAGE")?e.tryConsumeResource("BARRAGE"):e.tryConsumeResource("HAWKS_EYE")},validateAttempt:e=>e.hasResourceAvailable("HAWKS_EYE")||e.hasResourceAvailable("BARRAGE"),highlightIf:e=>e.hasResourceAvailable("HAWKS_EYE")||e.hasResourceAvailable("BARRAGE")});ro("RAIN_OF_DEATH",45,"cd_HEARTBREAK_SHOT",{potency:100,cooldown:15,maxCharges:3,falloff:0,applicationDelay:1.65});os("WARDENS_PAEAN",35,"cd_WARDENS_PAEAN",{rscType:"WARDENS_PAEAN",cooldown:45,applicationDelay:.62});os("NATURES_MINNE",35,"cd_NATURES_MINNE",{rscType:"NATURES_MINNE",cooldown:120,applicationDelay:.62});ro("REPELLING_SHOT",15,"cd_REPELLING_SHOT",{cooldown:30,animationLock:jn});os("TROUBADOUR",56,"cd_TROUBADOUR",{rscType:"TROUBADOUR",maxCharges:1,cooldown:90,applicationDelay:0});Object.keys(zm).filter(e=>!(e==="ESPRIT_PARTNER"||e==="STANDARD_FINISH_PARTNER")).forEach(e=>$n(e,`DNC/${ot[e].name}.png`));$n("ESPRIT_PARTNER","DNC/Esprit.png");$n("STANDARD_FINISH_PARTNER","DNC/Standard Finish.png");const fI=["ESPRIT_TECHNICAL","ESPRIT_PARTNER","STANDARD_FINISH_PARTNER","DANCE_PARTNER"];class VU extends $t{jobSpecificOtherTargetedBuffViewProps(){return fI.map(t=>t==="DANCE_PARTNER"?this.makeCommonTimerless(t,!1):this.makeCommonTimer(t,!1))}jobSpecificSelfTargetedBuffViewProps(){return[...Object.keys(zm).filter(t=>!fI.includes(t)).map(t=>t==="CLOSED_POSITION"||t==="RISING_RHYTHM"?this.makeCommonTimerless(t):this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){const a=this.state.resources,l=a.get("FEATHER_GAUGE").availableAmount(),s=a.get("STANDARD_DANCE").availableAmount(),c=a.get("TECHNICAL_DANCE").availableAmount(),d=[];if(this.state.hasTraitUnlocked("ESPRIT")){const h=a.get("ESPRIT_GAUGE").availableAmount();d.push({kind:"bar",name:_({en:"Esprit",zh:"伶俐"}),color:t.dnc.esprit,progress:h/100,valueString:h.toFixed(0)})}return d.push({kind:"counter",name:_({en:"Feathers",zh:"幻扇"}),color:t.dnc.feathers,currentStacks:l,maxStacks:4},{kind:"dance",name:_({en:"Standard",zh:"标准舞步计数"}),maxStacks:2,currentStacks:s,emboiteColor:t.dnc.emboite,entrechatColor:t.dnc.entrechat,jeteColor:t.dnc.jete,pirouetteColor:t.dnc.pirouette},{kind:"dance",name:_({en:"Technical",zh:"技巧舞步计数"}),maxStacks:4,currentStacks:c,emboiteColor:t.dnc.emboite,entrechatColor:t.dnc.entrechat,jeteColor:t.dnc.jete,pirouetteColor:t.dnc.pirouette}),d}statusLayoutFn(t){return u.jsxs("div",{children:[u.jsxs("div",{style:{display:"inline-block",verticalAlign:"top",width:"50%",height:"100%"},children:[u.jsxs("span",{style:{display:"block",marginBottom:10},children:[_({en:"time: ",zh:"战斗时间：",ja:"経過時間："}),`${Ct.displayTime(t.time,3)} (${t.time.toFixed(3)})`]}),t.resources?u.jsx(jN,{data:{level:t.level,resources:t.resources},style:{height:"17em"}}):void 0]}),u.jsxs("div",{style:{position:"relative",display:"inline-block",float:"right",width:"50%"},children:[t.resourceLocks?u.jsx(FN,{data:t.resourceLocks}):void 0,u.jsx(Sf,{data:t.enemyBuffs,style:{marginTop:50,marginBottom:"2em"}}),u.jsx(Sf,{data:t.selfBuffs,style:{position:"absolute",right:0,width:"200%"}})]})]})}}const at=(e,t,a)=>{tt("DNC",e,t,a??{})};at("ESPRIT_GAUGE",100);at("FEATHER_GAUGE",4);at("STANDARD_DANCE",2);at("TECHNICAL_DANCE",4);at("SILKEN_SYMMETRY",1,{timeout:30});at("SILKEN_FLOW",1,{timeout:30});at("FLOURISHING_SYMMETRY",1,{timeout:30});at("FLOURISHING_FLOW",1,{timeout:30});at("THREEFOLD_FAN_DANCE",1,{timeout:30});at("FOURFOLD_FAN_DANCE",1,{timeout:30});at("FINISHING_MOVE_READY",1,{timeout:30});at("FLOURISHING_STARFALL",1,{timeout:20});at("STANDARD_STEP",1,{timeout:15});at("STANDARD_FINISH",1,{timeout:60});at("STANDARD_BONUS",2,{timeout:60});at("ESPRIT",1,{timeout:60});at("TECHNICAL_STEP",1,{timeout:15});at("TECHNICAL_FINISH",1,{timeout:20.5});at("TECHNICAL_BONUS",4,{timeout:20.5});at("LAST_DANCE_READY",1,{timeout:30});at("DANCE_OF_THE_DAWN_READY",1,{timeout:30});at("FLOURISHING_FINISH",1,{timeout:30});at("CLOSED_POSITION",1,{default:1});at("DEVILMENT",1,{timeout:20});at("SHIELD_SAMBA",1,{timeout:15});at("IMPROVISATION",1,{timeout:15});at("RISING_RHYTHM",4,{timeout:15});at("IMPROVISATION_REGEN",1,{timeout:15});at("IMPROVISED_FINISH",1,{timeout:30});at("DANCE_PARTNER",1,{default:1});at("ESPRIT_PARTNER",1,{timeout:60});at("STANDARD_FINISH_PARTNER",1,{timeout:60});at("ESPRIT_TECHNICAL",1,{timeout:20});at("CASCADE_COMBO",1,{timeout:30});at("WINDMILL_COMBO",1,{timeout:30});const KU=["CASCADE","FOUNTAIN","WINDMILL","BLADESHOWER"],WU=["EMBOITE","ENTRECHAT","JETE","PIROUETTE"];class qU extends Jt{constructor(t){super(t),this.hasTraitUnlocked("ESPRIT")||this.resources.set(new ei("ESPRIT_GAUGE",0,0));const a=this.hasTraitUnlocked("ENHANCED_EN_AVANT_II")?3:2;this.cooldowns.set(new Ke("cd_EN_AVANT",30,a,a));const l=this.hasTraitUnlocked("ENHANCED_SHIELD_SAMBA")?90:120;this.cooldowns.set(new Ke("cd_SHIELD_SAMBA",l,1,1)),this.registerRecurringEvents()}get statusPropsGenerator(){return new VU(this)}jobSpecificAddDamageBuffCovers(t,a){this.hasResourceAvailable("TECHNICAL_FINISH")&&t.addBuff(k.TechnicalFinish),this.hasResourceAvailable("DEVILMENT")&&t.addBuff(k.Devilment)}cancelChanneledSkills(){this.tryConsumeResource("IMPROVISATION"),this.tryConsumeResource("RISING_RHYTHM",!0)}processComboStatus(t){if(!KU.includes(t))return;const a=t==="CASCADE",l=t==="WINDMILL";this.setComboState("CASCADE_COMBO",a?1:0),this.setComboState("WINDMILL_COMBO",l?1:0)}getCurrentDanceStatus(){const t=this.hasResourceAvailable("STANDARD_STEP")?"STANDARD_DANCE":"TECHNICAL_DANCE";return this.resources.get(t).availableAmount()}processDanceStatus(t){if(!WU.includes(t))return;const a=this.hasResourceAvailable("STANDARD_STEP")?"STANDARD_DANCE":"TECHNICAL_DANCE";let l=0;switch(t){case"ENTRECHAT":l=1;break;case"JETE":l=2;break;case"PIROUETTE":l=3;break}const s=this.resources.get(a);s.availableAmount()===l&&s.gain(1)}gainProc(t){const a=Pt("DNC",t).maxTimeout;this.resources.get(t).available(1)?(t==="THREEFOLD_FAN_DANCE"&&D.reportWarning(Fe.FanThreeOverwrite),this.resources.get(t).overrideTimer(this,a)):(this.resources.get(t).gain(1),this.enqueueResourceDrop(t,a))}maybeGainProc(t,a=.5){if(this.config.procMode===jt.Never)return;let l=this.rng();(this.config.procMode===jt.Always||l<a)&&this.gainProc(t)}gainResource(t,a){const l=this.resources.get(t);l.availableAmount()+a>l.maxValue&&D.reportWarning(t==="ESPRIT_GAUGE"?Fe.EspritOvercap:Fe.FeatherOvercap),this.resources.get(t).gain(a)}maybeGainResource(t,a,l=.5){if(this.config.procMode===jt.Never)return;let s=this.rng();(this.config.procMode===jt.Always||s<l)&&this.gainResource(t,a)}simulatePartyEspritGain(){if(this.hasResourceAvailable("ESPRIT_TECHNICAL")){for(let t=0;t<this.resources.get("PARTY_SIZE").availableAmount()-1;t++)this.maybeGainResource("ESPRIT_GAUGE",10,.2);return}this.hasResourceAvailable("ESPRIT_PARTNER")&&this.maybeGainResource("ESPRIT_GAUGE",10,.2)}applyStandardFinish(t){if(t===0)return;this.gainProc("STANDARD_FINISH"),this.tryConsumeResource("STANDARD_BONUS",!0),this.resources.get("STANDARD_BONUS").gain(t);const a=Pt("DNC","STANDARD_FINISH").maxTimeout;this.enqueueResourceDrop("STANDARD_BONUS",a,t),this.hasResourceAvailable("DANCE_PARTNER")&&this.gainProc("STANDARD_FINISH_PARTNER"),this.hasTraitUnlocked("ESPRIT")&&(this.gainProc("ESPRIT"),this.hasResourceAvailable("DANCE_PARTNER")&&this.gainProc("ESPRIT_PARTNER")),this.hasTraitUnlocked("ENHANCED_STANDARD_FINISH")&&this.gainProc("LAST_DANCE_READY")}}const tn=e=>e.hasResourceAvailable("STANDARD_STEP")||e.hasResourceAvailable("TECHNICAL_STEP"),s0={newSkill:"EMBOITE",condition:e=>tn(e)},r0={newSkill:"ENTRECHAT",condition:e=>tn(e)},c0={newSkill:"JETE",condition:e=>tn(e)},u0={newSkill:"PIROUETTE",condition:e=>tn(e)},Vt=(e,t,a)=>{const l=ut(s=>{a.potency&&s.simulatePartyEspritGain()},a.onConfirm??je,s=>s.processComboStatus(e));return Mi("DNC",e,t,{...a,onConfirm:l,jobPotencyModifiers:s=>{const c=[];if(a.combo&&s.resources.get(a.combo.resource).availableAmount()===a.combo.resourceValue&&c.push(dl(Xe(s,a.combo.potency)-Xe(s,a.potency))),s.hasResourceAvailable("STANDARD_FINISH")){const d=s.resources.get("STANDARD_BONUS").availableAmount()===2?me.DoubleStandardFinish:me.SingleStandardFinish;c.push(d)}if(s.hasResourceAvailable("TECHNICAL_FINISH")){const d=s.resources.get("TECHNICAL_BONUS").availableAmount(),h=d===4?me.QuadrupleTechnicalFinish:d===3?me.TripleTechnicalFinish:me.SingleTechnicalFinish;c.push(h)}return s.hasResourceAvailable("DEVILMENT")&&c.push(me.Devilment),e==="STARFALL_DANCE"&&c.push(me.AutoCDH),c}})},Ri=(e,t,a,l)=>Nt("DNC",e,t,a,{...l,onConfirm:l.onConfirm,jobPotencyModifiers:s=>{const c=[];if(s.hasResourceAvailable("STANDARD_FINISH")){const d=s.resources.get("STANDARD_BONUS").availableAmount()===2?me.DoubleStandardFinish:me.SingleStandardFinish;c.push(d)}if(s.hasResourceAvailable("TECHNICAL_FINISH")){const d=s.resources.get("TECHNICAL_BONUS").availableAmount(),h=d===4?me.QuadrupleTechnicalFinish:d===3?me.TripleTechnicalFinish:me.SingleTechnicalFinish;c.push(h)}return s.hasResourceAvailable("DEVILMENT")&&c.push(me.Devilment),c}}),d0=(e,t,a,l)=>ze("DNC",e,t,a,{...l});Vt("EMBOITE",15,{startOnHotbar:!1,recastTime:1,onConfirm:e=>e.processDanceStatus("EMBOITE"),highlightIf:e=>tn(e)&&e.getCurrentDanceStatus()===0});Vt("ENTRECHAT",15,{startOnHotbar:!1,recastTime:1,onConfirm:e=>e.processDanceStatus("ENTRECHAT"),highlightIf:e=>tn(e)&&e.getCurrentDanceStatus()===1});Vt("JETE",15,{startOnHotbar:!1,recastTime:1,onConfirm:e=>e.processDanceStatus("JETE"),highlightIf:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===2});Vt("PIROUETTE",15,{startOnHotbar:!1,recastTime:1,onConfirm:e=>e.processDanceStatus("PIROUETTE"),highlightIf:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===3});Vt("CASCADE",1,{replaceIf:[s0],potency:[["NEVER",200],["DYNAMIC_DANCER",220]],recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.8,onConfirm:e=>{e.maybeGainProc("SILKEN_SYMMETRY"),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",5)}});Vt("FOUNTAIN",2,{replaceIf:[r0],potency:[["NEVER",100],["DYNAMIC_DANCER",120]],combo:{potency:[["NEVER",260],["DYNAMIC_DANCER",280]],resource:"CASCADE_COMBO",resourceValue:1},recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.98,onConfirm:e=>{e.maybeGainProc("SILKEN_FLOW"),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",5)},highlightIf:e=>e.resources.get("CASCADE_COMBO").availableAmount()===1});Vt("REVERSE_CASCADE",20,{replaceIf:[c0],potency:[["NEVER",260],["DYNAMIC_DANCER",280]],recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("SILKEN_SYMMETRY")||e.hasResourceAvailable("FLOURISHING_SYMMETRY"),onConfirm:e=>{e.hasResourceAvailable("SILKEN_SYMMETRY")?e.tryConsumeResource("SILKEN_SYMMETRY"):e.tryConsumeResource("FLOURISHING_SYMMETRY"),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",10),e.maybeGainResource("FEATHER_GAUGE",1)},highlightIf:e=>e.hasResourceAvailable("SILKEN_SYMMETRY")||e.hasResourceAvailable("FLOURISHING_SYMMETRY")});Vt("FOUNTAINFALL",40,{replaceIf:[u0],potency:[["NEVER",320],["DYNAMIC_DANCER",340]],recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:1.21,validateAttempt:e=>e.hasResourceAvailable("SILKEN_FLOW")||e.hasResourceAvailable("FLOURISHING_FLOW"),onConfirm:e=>{e.hasResourceAvailable("SILKEN_FLOW")?e.tryConsumeResource("SILKEN_FLOW"):e.tryConsumeResource("FLOURISHING_FLOW"),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",10),e.maybeGainResource("FEATHER_GAUGE",1)},highlightIf:e=>e.hasResourceAvailable("SILKEN_FLOW")||e.hasResourceAvailable("FLOURISHING_FLOW")});Ri("FAN_DANCE",30,"cd_FAN_DANCE",{potency:[["NEVER",150],["DYNAMIC_DANCER",180]],cooldown:1,applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("FEATHER_GAUGE")&&!tn(e),highlightIf:e=>e.hasResourceAvailable("FEATHER_GAUGE"),onConfirm:e=>{e.tryConsumeResource("FEATHER_GAUGE"),e.maybeGainProc("THREEFOLD_FAN_DANCE")}});Vt("SABER_DANCE",76,{replaceIf:[{newSkill:"DANCE_OF_THE_DAWN",condition:e=>e.hasResourceAvailable("DANCE_OF_THE_DAWN_READY")&&e.hasResourceAvailable("ESPRIT_GAUGE",50)}],potency:[["NEVER",500],["DYNAMIC_DANCER",520]],recastTime:e=>e.config.adjustedSksGCD(),falloff:.6,applicationDelay:.44,validateAttempt:e=>e.hasResourceAvailable("ESPRIT_GAUGE",50)&&!tn(e),highlightIf:e=>e.hasResourceAvailable("ESPRIT_GAUGE",50),onConfirm:e=>e.resources.get("ESPRIT_GAUGE").consume(50)});Vt("DANCE_OF_THE_DAWN",100,{startOnHotbar:!1,potency:1e3,recastTime:e=>e.config.adjustedSksGCD(),falloff:.6,applicationDelay:.44,validateAttempt:e=>e.hasResourceAvailable("ESPRIT_GAUGE",50)&&!tn(e),highlightIf:e=>e.hasResourceAvailable("ESPRIT_GAUGE",50),onConfirm:e=>{e.resources.get("ESPRIT_GAUGE").consume(50),e.tryConsumeResource("DANCE_OF_THE_DAWN_READY")}});Vt("LAST_DANCE",92,{potency:520,recastTime:e=>e.config.adjustedSksGCD(),falloff:.6,applicationDelay:1.26,validateAttempt:e=>e.hasResourceAvailable("LAST_DANCE_READY")&&!tn(e),highlightIf:e=>e.hasResourceAvailable("LAST_DANCE_READY"),onConfirm:e=>e.tryConsumeResource("LAST_DANCE_READY")});Vt("STANDARD_STEP",15,{replaceIf:[{newSkill:"STANDARD_FINISH",condition:e=>e.hasResourceAvailable("STANDARD_STEP")&&e.getCurrentDanceStatus()===0},{newSkill:"SINGLE_STANDARD_FINISH",condition:e=>e.hasResourceAvailable("STANDARD_STEP")&&e.getCurrentDanceStatus()===1},{newSkill:"DOUBLE_STANDARD_FINISH",condition:e=>e.hasResourceAvailable("STANDARD_STEP")&&e.getCurrentDanceStatus()===2},{newSkill:"FINISHING_MOVE",condition:e=>e.hasResourceAvailable("FINISHING_MOVE_READY")}],validateAttempt:e=>!tn(e),onConfirm:e=>e.gainProc("STANDARD_STEP"),recastTime:1.5,secondaryCooldown:{cdName:"cd_STANDARD_STEP",cooldown:30,maxCharges:1}});Vt("FINISHING_MOVE",96,{startOnHotbar:!1,potency:850,recastTime:e=>e.config.adjustedSksGCD(),falloff:.6,applicationDelay:2.05,onConfirm:e=>{e.applyStandardFinish(2),e.tryConsumeResource("FINISHING_MOVE_READY")},secondaryCooldown:{cdName:"cd_STANDARD_STEP",cooldown:30,maxCharges:1},validateAttempt:e=>e.hasResourceAvailable("FINISHING_MOVE_READY")&&!tn(e),highlightIf:e=>e.hasResourceAvailable("FINISHING_MOVE_READY")});const XU=[{skill:"STANDARD_FINISH",potency:360},{skill:"SINGLE_STANDARD_FINISH",potency:540},{skill:"DOUBLE_STANDARD_FINISH",potency:[["NEVER",800],["DYNAMIC_DANCER",850]]}];XU.forEach(e=>{Vt(e.skill,15,{assetPath:"DNC/Standard Finish.png",startOnHotbar:!1,potency:e.potency,falloff:.6,applicationDelay:.54,onConfirm:t=>{const a=t.getCurrentDanceStatus();t.tryConsumeResource("STANDARD_STEP"),t.tryConsumeResource("STANDARD_DANCE",!0),a!==0&&t.applyStandardFinish(a)},recastTime:1.5,validateAttempt:t=>t.hasResourceAvailable("STANDARD_STEP"),highlightIf:t=>t.hasResourceAvailable("STANDARD_STEP")&&t.getCurrentDanceStatus()===2})});Ri("FLOURISH",72,"cd_FLOURISH",{cooldown:60,requiresCombat:!0,validateAttempt:e=>!tn(e),onConfirm:e=>{e.gainProc("FLOURISHING_SYMMETRY"),e.gainProc("FLOURISHING_FLOW"),e.gainProc("THREEFOLD_FAN_DANCE"),e.hasTraitUnlocked("ENHANCED_FLOURISH")&&e.gainProc("FOURFOLD_FAN_DANCE"),e.hasTraitUnlocked("ENHANCED_FLOURISH_II")&&e.gainProc("FINISHING_MOVE_READY")}});Ri("FAN_DANCE_III",66,"cd_FAN_DANCE_III",{potency:[["NEVER",200],["DYNAMIC_DANCER",220]],cooldown:1,falloff:.6,applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("THREEFOLD_FAN_DANCE")&&!tn(e),highlightIf:e=>e.hasResourceAvailable("THREEFOLD_FAN_DANCE"),onConfirm:e=>e.tryConsumeResource("THREEFOLD_FAN_DANCE")});Ri("FAN_DANCE_IV",86,"cd_FAN_DANCE_IV",{potency:[["NEVER",300],["DYNAMIC_DANCER",420]],falloff:.6,cooldown:1,applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("FOURFOLD_FAN_DANCE")&&!tn(e),highlightIf:e=>e.hasResourceAvailable("FOURFOLD_FAN_DANCE"),onConfirm:e=>e.tryConsumeResource("FOURFOLD_FAN_DANCE")});Vt("TECHNICAL_STEP",70,{replaceIf:[{newSkill:"TECHNICAL_FINISH",condition:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===0},{newSkill:"SINGLE_TECHNICAL_FINISH",condition:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===1},{newSkill:"DOUBLE_TECHNICAL_FINISH",condition:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===2},{newSkill:"TRIPLE_TECHNICAL_FINISH",condition:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===3},{newSkill:"QUADRUPLE_TECHNICAL_FINISH",condition:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===4},{newSkill:"TILLANA",condition:e=>e.hasResourceAvailable("FLOURISHING_FINISH")}],validateAttempt:e=>!tn(e),onConfirm:e=>e.gainProc("TECHNICAL_STEP"),recastTime:1.5,falloff:.75,secondaryCooldown:{cdName:"cd_TECHNICAL_STEP",cooldown:120,maxCharges:1}});Vt("TILLANA",82,{startOnHotbar:!1,potency:600,recastTime:e=>e.config.adjustedSksGCD(),falloff:.6,applicationDelay:.84,onConfirm:e=>{e.gainResource("ESPRIT_GAUGE",50),e.tryConsumeResource("FLOURISHING_FINISH")},validateAttempt:e=>e.hasResourceAvailable("FLOURISHING_FINISH")&&!tn(e),highlightIf:e=>e.hasResourceAvailable("FLOURISHING_FINISH")});Vt("TECHNICAL_FINISH",70,{startOnHotbar:!1,potency:350,applicationDelay:.54,onConfirm:e=>{e.tryConsumeResource("TECHNICAL_STEP"),e.tryConsumeResource("TECHNICAL_DANCE",!0)},recastTime:1.5,validateAttempt:e=>e.hasResourceAvailable("TECHNICAL_STEP")});const ZU=[{skill:"TECHNICAL_FINISH",potency:350},{skill:"SINGLE_TECHNICAL_FINISH",potency:540},{skill:"DOUBLE_TECHNICAL_FINISH",potency:720},{skill:"TRIPLE_TECHNICAL_FINISH",potency:900},{skill:"QUADRUPLE_TECHNICAL_FINISH",potency:[["NEVER",1200],["DYNAMIC_DANCER",1300]]}];ZU.forEach(e=>{Vt(e.skill,70,{assetPath:"DNC/Technical Finish.png",startOnHotbar:!1,potency:e.potency,applicationDelay:.54,falloff:.6,onConfirm:t=>{const a=t.getCurrentDanceStatus();if(t.tryConsumeResource("TECHNICAL_STEP"),t.tryConsumeResource("TECHNICAL_DANCE",!0),a===0)return;t.gainProc("TECHNICAL_FINISH"),t.hasTraitUnlocked("ESPRIT")&&t.gainProc("ESPRIT_TECHNICAL"),t.resources.get("TECHNICAL_BONUS").gain(a);const l=Pt("DNC","TECHNICAL_FINISH").maxTimeout;t.enqueueResourceDrop("TECHNICAL_BONUS",l,a),t.hasTraitUnlocked("ENHANCED_TECHNICAL_FINISH")&&t.gainProc("FLOURISHING_FINISH"),t.hasTraitUnlocked("ENHANCED_TECHNICAL_FINISH_II")&&t.gainProc("DANCE_OF_THE_DAWN_READY")},recastTime:1.5,validateAttempt:t=>t.hasResourceAvailable("TECHNICAL_STEP"),highlightIf:t=>t.hasResourceAvailable("TECHNICAL_STEP")&&t.getCurrentDanceStatus()===4})});d0("DEVILMENT",62,"cd_DEVILMENT",{replaceIf:[{newSkill:"STARFALL_DANCE",condition:e=>e.hasResourceAvailable("FLOURISHING_STARFALL")}],rscType:"DEVILMENT",applicationDelay:0,cooldown:120,validateAttempt:e=>!tn(e),onApplication:e=>{e.hasTraitUnlocked("ENHANCED_DEVILMENT")&&e.gainProc("FLOURISHING_STARFALL")}});Vt("STARFALL_DANCE",90,{startOnHotbar:!1,potency:600,recastTime:e=>e.config.adjustedSksGCD(),falloff:.75,applicationDelay:.89,validateAttempt:e=>e.hasResourceAvailable("FLOURISHING_STARFALL")&&!tn(e),highlightIf:e=>e.hasResourceAvailable("FLOURISHING_STARFALL"),onConfirm:e=>e.tryConsumeResource("FLOURISHING_STARFALL")});Vt("WINDMILL",15,{replaceIf:[s0],potency:120,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.62,onConfirm:e=>{e.maybeGainProc("SILKEN_SYMMETRY"),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",5)}});Vt("BLADESHOWER",25,{replaceIf:[r0],potency:100,recastTime:e=>e.config.adjustedSksGCD(),combo:{potency:160,resource:"WINDMILL_COMBO",resourceValue:1},falloff:0,applicationDelay:.62,onConfirm:e=>{e.maybeGainProc("SILKEN_FLOW"),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",5)},highlightIf:e=>e.resources.get("WINDMILL_COMBO").availableAmount()===1});Vt("RISING_WINDMILL",35,{replaceIf:[c0],potency:160,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("SILKEN_SYMMETRY")||e.hasResourceAvailable("FLOURISHING_SYMMETRY"),onConfirm:e=>{e.hasResourceAvailable("SILKEN_SYMMETRY")?e.tryConsumeResource("SILKEN_SYMMETRY"):e.tryConsumeResource("FLOURISHING_SYMMETRY"),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",10),e.maybeGainResource("FEATHER_GAUGE",1)},highlightIf:e=>e.hasResourceAvailable("SILKEN_SYMMETRY")||e.hasResourceAvailable("FLOURISHING_SYMMETRY")});Vt("BLOODSHOWER",45,{replaceIf:[u0],potency:200,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("SILKEN_FLOW")||e.hasResourceAvailable("FLOURISHING_FLOW"),onConfirm:e=>{e.hasResourceAvailable("SILKEN_FLOW")?e.tryConsumeResource("SILKEN_FLOW"):e.tryConsumeResource("FLOURISHING_FLOW"),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",10),e.maybeGainResource("FEATHER_GAUGE",1)},highlightIf:e=>e.hasResourceAvailable("SILKEN_FLOW")||e.hasResourceAvailable("FLOURISHING_FLOW")});Ri("FAN_DANCE_II",30,"cd_FAN_DANCE_II",{potency:100,cooldown:1,falloff:0,applicationDelay:.54,validateAttempt:e=>e.hasResourceAvailable("FEATHER_GAUGE")&&!tn(e),highlightIf:e=>e.hasResourceAvailable("FEATHER_GAUGE"),onConfirm:e=>{e.tryConsumeResource("FEATHER_GAUGE"),e.maybeGainProc("THREEFOLD_FAN_DANCE")}});Ri("CURING_WALTZ",52,"cd_CURING_WALTZ",{cooldown:60,applicationDelay:.58});Ri("IMPROVISATION",80,"cd_IMPROVISATION",{replaceIf:[{newSkill:"IMPROVISED_FINISH",condition:e=>e.hasResourceAvailable("IMPROVISATION")}],cooldown:120,applicationDelay:.89,validateAttempt:e=>!tn(e),onConfirm:e=>{e.gainProc("IMPROVISATION"),e.gainProc("IMPROVISATION_REGEN");let t=()=>{e.hasResourceAvailable("IMPROVISATION")&&(e.resources.get("RISING_RHYTHM").gain(1),e.gainProc("IMPROVISATION_REGEN"),e.resources.addResourceEvent({rscType:"RISING_RHYTHM",name:"rising rhythm tic",delay:3,fnOnRsc:a=>t()}))};e.resources.addResourceEvent({rscType:"RISING_RHYTHM",name:"rising rhythm tic",delay:3,fnOnRsc:a=>t()}),e.resources.addResourceEvent({rscType:"IMPROVISATION",name:"improvisation timeout",delay:Pt("DNC","IMPROVISATION").maxTimeout,fnOnRsc:a=>{a.consume(1),e.tryConsumeResource("RISING_RHYTHM",!0)}})}});Ri("IMPROVISED_FINISH",80,"cd_IMPROVISED_FINISH",{startOnHotbar:!1,cooldown:120,applicationDelay:.71,validateAttempt:e=>!tn(e),onConfirm:e=>e.gainProc("IMPROVISED_FINISH")});Ri("EN_AVANT",50,"cd_EN_AVANT",{cooldown:30,maxCharges:3,animationLock:jn});d0("SHIELD_SAMBA",56,"cd_SHIELD_SAMBA",{rscType:"SHIELD_SAMBA",maxCharges:1,cooldown:90,applicationDelay:0});Ri("CLOSED_POSITION",60,"cd_CLOSED_POSITION",{replaceIf:[{newSkill:"ENDING",condition:e=>e.hasResourceAvailable("CLOSED_POSITION")}],cooldown:30,maxCharges:1,applicationDelay:0,onConfirm:e=>{e.resources.get("CLOSED_POSITION").gain(1),e.resources.get("DANCE_PARTNER").gain(1)},validateAttempt:e=>!e.hasResourceAvailable("CLOSED_POSITION"),secondaryCooldown:{cdName:"cd_ENDING",cooldown:1,maxCharges:1}});Ri("ENDING",60,"cd_ENDING",{startOnHotbar:!1,cooldown:1,maxCharges:1,applicationDelay:0,onConfirm:e=>{e.tryConsumeResource("CLOSED_POSITION",!0),e.tryConsumeResource("DANCE_PARTNER",!0),e.tryConsumeResource("STANDARD_FINISH_PARTNER",!0),e.tryConsumeResource("ESPRIT_PARTNER",!0)},secondaryCooldown:{cdName:"cd_CLOSED_POSITION",cooldown:30,maxCharges:1}});const f0=["CHAOS_THRUST_DOT","CHAOTIC_SPRING_DOT"],QU=Object.keys(Ym).filter(e=>!f0.includes(e));Object.keys(Ym).forEach(e=>$n(e,`DRG/${ot[e].name}.png`));class $U extends $t{jobSpecificOtherTargetedBuffViewProps(){return[...f0.map(t=>this.makeCommonTimer(t,!1))]}jobSpecificSelfTargetedBuffViewProps(){return QU.map(t=>this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){var T,S,p,I;const a=this.state.resources,l=a.get("DRG_CHAOS_COMBO_TRACKER"),s=a.get("DRG_HEAVENS_COMBO_TRACKER"),c=a.get("DRG_AOE_COMBO_TRACKER"),d=a.get("FIRSTMINDS_FOCUS").availableAmount(),h=a.get("LIFE_OF_THE_DRAGON"),E=h.available(1)?(T=h.pendingChange)==null?void 0:T.timeTillEvent:void 0,A=l.available(1)?(S=l.pendingChange)==null?void 0:S.timeTillEvent:s.available(1)?(p=s.pendingChange)==null?void 0:p.timeTillEvent:c.available(1)?(I=c.pendingChange)==null?void 0:I.timeTillEvent:void 0;return[{kind:"bar",name:_({en:"Combo Timer"}),color:t.drg.drgComboTimer,progress:A?A/30:0,valueString:(A==null?void 0:A.toFixed(3))??"N/A"},{kind:"bar",name:_({en:"Life of the Dragon"}),color:t.drg.lifeOfTheDragonBar,progress:E?E/20:0,valueString:E?E.toFixed(3):"N/A"},{kind:"counter",name:_({en:"Firstmind's Focus"}),color:t.drg.firstmindsFocusStacks,currentStacks:d,maxStacks:2}]}}const zn=(e,t,a)=>{tt("DRG",e,t,a??{})};zn("POWER_SURGE",1,{timeout:30});zn("LIFE_SURGE",1,{timeout:5.52});zn("ENHANCED_PIERCING_TALON",1,{timeout:15.62});zn("LANCE_CHARGE",1,{timeout:20});zn("DIVE_READY",1,{timeout:15.46});zn("CHAOS_THRUST_DOT",1,{timeout:24});zn("BATTLE_LITANY",1,{timeout:20});zn("LIFE_OF_THE_DRAGON",1,{timeout:20});zn("NASTROND_READY",1,{timeout:20});zn("DRACONIAN_FIRE",1,{timeout:30});zn("CHAOTIC_SPRING_DOT",1,{timeout:24});zn("FIRSTMINDS_FOCUS",2);zn("DRAGONS_FLIGHT",1,{timeout:30.79});zn("STARCROSS_READY",1,{timeout:20});zn("DRG_CHAOS_COMBO_TRACKER",4,{timeout:30});zn("DRG_HEAVENS_COMBO_TRACKER",4,{timeout:30});zn("DRG_AOE_COMBO_TRACKER",2,{timeout:30});const JU=["DOOM_SPIKE","SONIC_THRUST","COERTHAN_TORMENT","DRACONIAN_FURY"],hI=new Map([["DISEMBOWEL",1],["SPIRAL_BLOW",1],["CHAOS_THRUST",2],["CHAOTIC_SPRING",2],["WHEELING_THRUST",3]]),EI=new Map([["VORPAL_THRUST",1],["LANCE_BARRAGE",1],["FULL_THRUST",2],["HEAVENS_THRUST",2],["FANG_AND_CLAW",3]]);class ek extends Jt{constructor(t){super(t);const a=this.hasTraitUnlocked("ENHANCED_WINGED_GLIDE")?2:1,l=this.hasTraitUnlocked("ENHANCED_LIFE_SURGE")?2:1;[new Ke("cd_WINGED_GLIDE",60,a,a),new Ke("cd_LIFE_SURGE",40,l,l)].forEach(s=>this.cooldowns.set(s)),this.registerRecurringEvents([{groupedEffects:[{effectName:"CHAOS_THRUST_DOT",appliedBy:["CHAOS_THRUST"]}]},{groupedEffects:[{effectName:"CHAOTIC_SPRING_DOT",appliedBy:["CHAOTIC_SPRING"]}]}])}get statusPropsGenerator(){return new $U(this)}jobSpecificAddDamageBuffCovers(t,a){this.hasResourceAvailable("POWER_SURGE")&&t.addBuff(k.PowerSurge),this.hasResourceAvailable("LANCE_CHARGE")&&t.addBuff(k.LanceCharge),this.hasResourceAvailable("LIFE_OF_THE_DRAGON")&&t.addBuff(k.LifeOfTheDragon),this.hasResourceAvailable("BATTLE_LITANY")&&t.addBuff(k.BattleLitany),a.name==="PIERCING_TALON"&&this.hasResourceAvailable("ENHANCED_PIERCING_TALON")&&t.addBuff(k.EnhancedPiercingTalon),a.cdName==="cd_GCD"&&this.hasResourceAvailable("LIFE_SURGE")&&t.addBuff(k.LifeSurge)}pushUniversalModifiers(t){this.hasResourceAvailable("POWER_SURGE")&&t.push(me.PowerSurge),this.hasResourceAvailable("LANCE_CHARGE")&&t.push(me.LanceCharge),this.hasResourceAvailable("LIFE_OF_THE_DRAGON")&&t.push(me.LifeOfTheDragon),this.hasResourceAvailable("BATTLE_LITANY")&&t.push(me.BattleLitany)}fixDRGComboState(t){this.tryConsumeResource("DRACONIAN_FIRE",!0);let a="DRG_AOE_COMBO_TRACKER";if(JU.includes(t)){this.tryConsumeResource("DRG_CHAOS_COMBO_TRACKER",!0),this.tryConsumeResource("DRG_HEAVENS_COMBO_TRACKER",!0),t==="DOOM_SPIKE"||t==="DRACONIAN_FURY"?(this.tryConsumeResource(a,!0),this.resources.get(a).gain(1),this.enqueueResourceDrop(a)):t==="SONIC_THRUST"?this.resources.get(a).availableAmount()===1?(this.resources.get(a).gain(1),this.enqueueResourceDrop(a)):this.tryConsumeResource(a,!0):t==="COERTHAN_TORMENT"&&this.tryConsumeResource(a,!0);return}if(this.tryConsumeResource("DRG_AOE_COMBO_TRACKER",!0),t==="TRUE_THRUST"||t==="RAIDEN_THRUST"){this.tryConsumeResource("DRG_CHAOS_COMBO_TRACKER",!0),this.tryConsumeResource("DRG_HEAVENS_COMBO_TRACKER",!0),this.resources.get("DRG_CHAOS_COMBO_TRACKER").gain(1),this.enqueueResourceDrop("DRG_CHAOS_COMBO_TRACKER"),this.resources.get("DRG_HEAVENS_COMBO_TRACKER").gain(1),this.enqueueResourceDrop("DRG_HEAVENS_COMBO_TRACKER");return}let l=-1;if(hI.has(t))this.tryConsumeResource("DRG_HEAVENS_COMBO_TRACKER",!0),a="DRG_CHAOS_COMBO_TRACKER",l=hI.get(t)??-1;else if(EI.has(t))this.tryConsumeResource("DRG_CHAOS_COMBO_TRACKER",!0),a="DRG_HEAVENS_COMBO_TRACKER",l=EI.get(t)??-1;else if(t==="DRAKESBANE"){this.tryConsumeResource("DRG_HEAVENS_COMBO_TRACKER",!0),this.tryConsumeResource("DRG_CHAOS_COMBO_TRACKER",!0);return}this.resources.get(a).availableAmount()===l?(this.resources.get(a).gain(1),this.enqueueResourceDrop(a)):this.tryConsumeResource(a,!0)}checkCombo(t){return this.hasResourceAvailable(t)}gainScale(t){this.resources.get("FIRSTMINDS_FOCUS").availableAmount()+t>2&&D.reportWarning(Fe.ScaleOvercap),this.resources.get("FIRSTMINDS_FOCUS").gain(t)}refreshBuff(t,a){this.addEvent(new Ge("gain buff",a,()=>{this.resources.get(t).gain(1),this.enqueueResourceDrop(t)}))}}const Dn=(e,t,a)=>{const l=ut(a.onConfirm??je,d=>{e!=="PIERCING_TALON"&&d.fixDRGComboState(e),d.tryConsumeResource("LIFE_SURGE")}),s=a.onApplication??je,c=a.jobPotencyModifiers??(d=>[]);return Mi("DRG",e,t,{...a,onConfirm:l,onApplication:s,recastTime:d=>d.config.adjustedSksGCD(),jobPotencyModifiers:d=>{const h=c(d),E=a.positional&&(d.hasResourceAvailable("TRUE_NORTH")||a.positional.location==="flank"&&d.hasResourceAvailable("FLANK_POSITIONAL")||a.positional.location==="rear"&&d.hasResourceAvailable("REAR_POSITIONAL"));return a.combo&&d.checkCombo(a.combo.resource)?(h.push(dl(Xe(d,a.combo.potency)-Xe(d,a.potency))),a.positional&&E&&h.push(Xc(Xe(d,a.positional.comboPotency)-Xe(d,a.combo.potency)))):a.positional&&E&&h.push(Xc(Xe(d,a.positional.potency)-Xe(d,a.potency))),e==="PIERCING_TALON"&&d.hasResourceAvailable("ENHANCED_PIERCING_TALON")&&h.push(me.EnhancedPiercingTalon),d.pushUniversalModifiers(h),d.hasResourceAvailable("LIFE_SURGE")&&h.push(me.LifeSurge),h}})},oi=(e,t,a,l)=>Nt("DRG",e,t,a,{...l,onConfirm:l.onConfirm,jobPotencyModifiers:s=>{const c=[];return s.pushUniversalModifiers(c),c}}),tk={newSkill:"DRAKESBANE",condition:e=>e.resources.get("DRG_HEAVENS_COMBO_TRACKER").availableAmount()===4},nk={newSkill:"DRAKESBANE",condition:e=>e.resources.get("DRG_CHAOS_COMBO_TRACKER").availableAmount()===4},ak={newSkill:"RAIDEN_THRUST",condition:e=>e.resources.get("DRACONIAN_FIRE").available(1)},ik={newSkill:"TRUE_THRUST",condition:e=>!e.resources.get("DRACONIAN_FIRE").available(1)},lk={newSkill:"DRACONIAN_FURY",condition:e=>e.resources.get("DRACONIAN_FIRE").available(1)},ok={newSkill:"DOOM_SPIKE",condition:e=>!e.resources.get("DRACONIAN_FIRE").available(1)},sk={newSkill:"STARCROSS",condition:e=>e.hasResourceAvailable("STARCROSS_READY")&&e.hasResourceAvailable("LIFE_OF_THE_DRAGON")},rk={newSkill:"STARDIVER",condition:e=>!e.hasResourceAvailable("STARCROSS_READY")};Dn("PIERCING_TALON",15,{potency:[["NEVER",150],["LANCE_MASTERY",200]],applicationDelay:.85,onConfirm:e=>{e.tryConsumeResource("ENHANCED_PIERCING_TALON")},highlightIf:e=>e.hasResourceAvailable("ENHANCED_PIERCING_TALON")});Dn("TRUE_THRUST",1,{replaceIf:[ak],potency:[["NEVER",200],["LANCE_MASTERY",230]],applicationDelay:.76});Dn("RAIDEN_THRUST",76,{startOnHotbar:!1,replaceIf:[ik],potency:[["NEVER",280],["MELEE_MASTERY_DRG",320]],applicationDelay:.62,validateAttempt:e=>e.resources.get("DRACONIAN_FIRE").available(1),highlightIf:e=>e.resources.get("DRACONIAN_FIRE").available(1),onConfirm:e=>{e.hasTraitUnlocked("LANCE_MASTERY_III")&&e.gainScale(1)}});Dn("DISEMBOWEL",18,{autoUpgrade:{trait:"LANCE_MASTERY_IV",otherSkill:"SPIRAL_BLOW"},applicationDelay:1.65,potency:[["NEVER",100],["LANCE_MASTERY",140]],combo:{potency:[["NEVER",220],["LANCE_MASTERY",250]],resource:"DRG_CHAOS_COMBO_TRACKER",resourceValue:1},onConfirm:e=>{e.resources.get("DRG_CHAOS_COMBO_TRACKER").availableAmount()===1&&(e.resources.get("POWER_SURGE").gain(1),e.enqueueResourceDrop("POWER_SURGE",31.63))},highlightIf:e=>e.resources.get("DRG_CHAOS_COMBO_TRACKER").availableAmount()===1});Dn("SPIRAL_BLOW",96,{autoDowngrade:{trait:"LANCE_MASTERY_IV",otherSkill:"DISEMBOWEL"},applicationDelay:1.38,potency:140,combo:{potency:[["NEVER",300]],resource:"DRG_CHAOS_COMBO_TRACKER",resourceValue:1},onConfirm:e=>{e.resources.get("DRG_CHAOS_COMBO_TRACKER").availableAmount()===1&&(e.resources.get("POWER_SURGE").gain(1),e.enqueueResourceDrop("POWER_SURGE",31.38))},highlightIf:e=>e.resources.get("DRG_CHAOS_COMBO_TRACKER").availableAmount()===1});Dn("CHAOS_THRUST",50,{autoUpgrade:{trait:"LANCE_MASTERY_II",otherSkill:"CHAOTIC_SPRING"},applicationDelay:1.65,potency:100,combo:{potency:220,resource:"DRG_CHAOS_COMBO_TRACKER",resourceValue:2},positional:{potency:140,comboPotency:260,location:"rear"},onConfirm:(e,t)=>{if(e.resources.get("DRG_CHAOS_COMBO_TRACKER").availableAmount()===2){const a=[];e.pushUniversalModifiers(a),e.addDoTPotencies({node:t,effectName:"CHAOS_THRUST_DOT",skillName:"CHAOS_THRUST",tickPotency:40,speedStat:"sks",modifiers:a}),e.addEvent(new Ge("apply chaos thrust dot",1.65,()=>{e.applyDoT("CHAOS_THRUST_DOT",t)}))}},highlightIf:e=>e.resources.get("DRG_CHAOS_COMBO_TRACKER").availableAmount()===2});Dn("CHAOTIC_SPRING",86,{autoDowngrade:{trait:"LANCE_MASTERY_II",otherSkill:"CHAOS_THRUST"},applicationDelay:.45,potency:140,combo:{potency:300,resource:"DRG_CHAOS_COMBO_TRACKER",resourceValue:2},positional:{potency:180,comboPotency:340,location:"rear"},onConfirm:(e,t)=>{if(e.resources.get("DRG_CHAOS_COMBO_TRACKER").availableAmount()===2){const a=[];e.pushUniversalModifiers(a),e.addDoTPotencies({node:t,effectName:"CHAOTIC_SPRING_DOT",skillName:"CHAOTIC_SPRING",tickPotency:45,speedStat:"sks",modifiers:a}),e.addEvent(new Ge("apply chaotic spring dot",.45,()=>{e.applyDoT("CHAOTIC_SPRING_DOT",t)}))}},highlightIf:e=>e.resources.get("DRG_CHAOS_COMBO_TRACKER").availableAmount()===2});Dn("WHEELING_THRUST",58,{replaceIf:[tk],applicationDelay:.67,potency:[["NEVER",100],["MELEE_MASTERY_DRG",140]],combo:{potency:[["NEVER",260],["MELEE_MASTERY_DRG",300]],resource:"DRG_CHAOS_COMBO_TRACKER",resourceValue:3},positional:{potency:[["NEVER",140],["MELEE_MASTERY_DRG",180]],comboPotency:[["NEVER",300],["MELEE_MASTERY_DRG",340]],location:"rear"},highlightIf:e=>e.resources.get("DRG_CHAOS_COMBO_TRACKER").availableAmount()===3});Dn("VORPAL_THRUST",4,{autoUpgrade:{trait:"LANCE_MASTERY_IV",otherSkill:"LANCE_BARRAGE"},applicationDelay:1.02,potency:[["NEVER",100],["LANCE_MASTERY",130]],combo:{potency:[["NEVER",250],["LANCE_MASTERY",280]],resource:"DRG_HEAVENS_COMBO_TRACKER",resourceValue:1},highlightIf:e=>e.resources.get("DRG_HEAVENS_COMBO_TRACKER").availableAmount()===1});Dn("LANCE_BARRAGE",96,{autoDowngrade:{trait:"LANCE_MASTERY_IV",otherSkill:"VORPAL_THRUST"},applicationDelay:.94,potency:130,combo:{potency:340,resource:"DRG_HEAVENS_COMBO_TRACKER",resourceValue:1},highlightIf:e=>e.resources.get("DRG_HEAVENS_COMBO_TRACKER").availableAmount()===1});Dn("FULL_THRUST",26,{autoUpgrade:{trait:"LANCE_MASTERY_II",otherSkill:"HEAVENS_THRUST"},applicationDelay:1.12,potency:100,combo:{potency:380,resource:"DRG_HEAVENS_COMBO_TRACKER",resourceValue:2},highlightIf:e=>e.resources.get("DRG_HEAVENS_COMBO_TRACKER").availableAmount()===2});Dn("HEAVENS_THRUST",86,{autoDowngrade:{trait:"LANCE_MASTERY_II",otherSkill:"FULL_THRUST"},applicationDelay:.71,potency:[["NEVER",100],["MELEE_MASTERY_DRG",160]],combo:{potency:[["NEVER",400],["MELEE_MASTERY_DRG",460]],resource:"DRG_HEAVENS_COMBO_TRACKER",resourceValue:2},highlightIf:e=>e.resources.get("DRG_HEAVENS_COMBO_TRACKER").availableAmount()===2});Dn("FANG_AND_CLAW",56,{replaceIf:[nk],applicationDelay:.62,potency:[["NEVER",100],["MELEE_MASTERY_DRG",140]],combo:{potency:[["NEVER",260],["MELEE_MASTERY_DRG",300]],resource:"DRG_HEAVENS_COMBO_TRACKER",resourceValue:3},positional:{potency:[["NEVER",140],["MELEE_MASTERY_DRG",180]],comboPotency:[["NEVER",300],["MELEE_MASTERY_DRG",340]],location:"flank"},highlightIf:e=>e.resources.get("DRG_HEAVENS_COMBO_TRACKER").availableAmount()===3});Dn("DRAKESBANE",64,{startOnHotbar:!1,applicationDelay:1,potency:[["NEVER",380],["LANCE_MASTERY_II",400],["MELEE_MASTERY_DRG",460]],validateAttempt:e=>e.resources.get("DRG_CHAOS_COMBO_TRACKER").availableAmount()===4||e.resources.get("DRG_HEAVENS_COMBO_TRACKER").availableAmount()===4,onConfirm:e=>{(e.resources.get("DRG_CHAOS_COMBO_TRACKER").availableAmount()===4||e.resources.get("DRG_HEAVENS_COMBO_TRACKER").availableAmount()===4)&&e.refreshBuff("DRACONIAN_FIRE",0)},highlightIf:e=>e.resources.get("DRG_CHAOS_COMBO_TRACKER").availableAmount()===4||e.resources.get("DRG_HEAVENS_COMBO_TRACKER").availableAmount()===4});Dn("DOOM_SPIKE",40,{replaceIf:[lk],potency:110,falloff:0,applicationDelay:1.29});Dn("DRACONIAN_FURY",82,{replaceIf:[ok],startOnHotbar:!1,potency:130,falloff:0,applicationDelay:.76,validateAttempt:e=>e.resources.get("DRACONIAN_FIRE").available(1),highlightIf:e=>e.resources.get("DRACONIAN_FIRE").available(1),onConfirm:e=>{e.hasTraitUnlocked("LANCE_MASTERY_III")&&e.gainScale(1)}});Dn("SONIC_THRUST",62,{applicationDelay:.8,potency:100,combo:{potency:120,resource:"DRG_AOE_COMBO_TRACKER",resourceValue:1},falloff:0,highlightIf:e=>e.resources.get("DRG_AOE_COMBO_TRACKER").availableAmount()===1,onConfirm:e=>{e.resources.get("DRG_AOE_COMBO_TRACKER").availableAmount()===1&&(e.resources.get("POWER_SURGE").gain(1),e.enqueueResourceDrop("POWER_SURGE",30.79))}});Dn("COERTHAN_TORMENT",72,{applicationDelay:.49,potency:100,combo:{potency:150,resource:"DRG_AOE_COMBO_TRACKER",resourceValue:2},falloff:0,highlightIf:e=>e.resources.get("DRG_AOE_COMBO_TRACKER").availableAmount()===2,onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_COERTHAN_TORMENT")&&e.resources.get("DRG_AOE_COMBO_TRACKER").availableAmount()===2&&e.refreshBuff("DRACONIAN_FIRE",0)}});ze("DRG","LIFE_SURGE",6,"cd_LIFE_SURGE",{rscType:"LIFE_SURGE",applicationDelay:0,cooldown:40,maxCharges:2});oi("WYRMWIND_THRUST",90,"cd_WYRMWIND_THRUST",{applicationDelay:1.2,validateAttempt:e=>e.resources.get("FIRSTMINDS_FOCUS").availableAmount()===2,highlightIf:e=>e.resources.get("FIRSTMINDS_FOCUS").availableAmount()===2,potency:[["NEVER",420],["MELEE_MASTERY_DRG",440]],falloff:.5,cooldown:10,onConfirm:e=>{e.tryConsumeResource("FIRSTMINDS_FOCUS",!0)}});ze("DRG","LANCE_CHARGE",30,"cd_LANCE_CHARGE",{rscType:"LANCE_CHARGE",applicationDelay:.62,cooldown:60});ze("DRG","BATTLE_LITANY",52,"cd_BATTLE_LITANY",{rscType:"BATTLE_LITANY",applicationDelay:.62,cooldown:120});oi("GEIRSKOGUL",60,"cd_GEIRSKOGUL",{applicationDelay:.67,potency:[["NEVER",200],["LANCE_MASTERY_III",280]],falloff:.5,cooldown:60,onConfirm:e=>{e.refreshBuff("LIFE_OF_THE_DRAGON",0),e.refreshBuff("NASTROND_READY",0),e.addEvent(new Ge("drop starcross when life drops",20,()=>{e.tryConsumeResource("STARCROSS_READY")}))}});oi("NASTROND",70,"cd_NASTROND",{applicationDelay:.76,potency:[["NEVER",600],["LANCE_MASTERY_III",720]],falloff:.5,cooldown:2,validateAttempt:e=>e.resources.get("LIFE_OF_THE_DRAGON").available(1)&&e.resources.get("NASTROND_READY").available(1),highlightIf:e=>e.resources.get("LIFE_OF_THE_DRAGON").available(1)&&e.resources.get("NASTROND_READY").available(1),onConfirm:e=>{e.tryConsumeResource("NASTROND_READY")}});oi("JUMP",30,"cd_JUMP",{autoUpgrade:{trait:"JUMP_MASTERY",otherSkill:"HIGH_JUMP"},applicationDelay:.49,animationLock:.8,potency:320,cooldown:30,onConfirm:e=>{e.refreshBuff("DIVE_READY",0)}});oi("HIGH_JUMP",74,"cd_HIGH_JUMP",{autoDowngrade:{trait:"JUMP_MASTERY",otherSkill:"JUMP"},applicationDelay:.49,animationLock:.8,potency:400,cooldown:30,onConfirm:e=>{e.refreshBuff("DIVE_READY",0)}});oi("MIRAGE_DIVE",68,"cd_MIRAGE_DIVE",{applicationDelay:.8,validateAttempt:e=>e.hasResourceAvailable("DIVE_READY"),highlightIf:e=>e.hasResourceAvailable("DIVE_READY"),potency:380,cooldown:1,onConfirm:e=>{e.tryConsumeResource("DIVE_READY")}});oi("DRAGONFIRE_DIVE",50,"cd_DRAGONFIRE_DIVE",{applicationDelay:.8,animationLock:.8,potency:500,falloff:.5,cooldown:120,onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_DRAGONFIRE_DIVE")&&e.refreshBuff("DRAGONS_FLIGHT",0)}});oi("RISE_OF_THE_DRAGON",92,"cd_RISE_OF_THE_DRAGON",{applicationDelay:1.16,potency:550,falloff:.5,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("DRAGONS_FLIGHT"),highlightIf:e=>e.hasResourceAvailable("DRAGONS_FLIGHT"),onConfirm:e=>{e.tryConsumeResource("DRAGONS_FLIGHT")}});oi("STARDIVER",80,"cd_STARDIVER",{replaceIf:[sk],applicationDelay:1.29,animationLock:1.5,potency:[["NEVER",720],["MELEE_MASTERY_DRG",840]],falloff:.5,cooldown:30,validateAttempt:e=>e.hasResourceAvailable("LIFE_OF_THE_DRAGON"),onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_STARDIVER")&&e.refreshBuff("STARCROSS_READY",0)}});oi("STARCROSS",100,"cd_STARCROSS",{startOnHotbar:!1,replaceIf:[rk],applicationDelay:.98,potency:1e3,falloff:.5,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("STARCROSS_READY")&&e.hasResourceAvailable("LIFE_OF_THE_DRAGON"),highlightIf:e=>e.hasResourceAvailable("STARCROSS_READY")&&e.hasResourceAvailable("LIFE_OF_THE_DRAGON"),onConfirm:e=>{e.tryConsumeResource("STARCROSS_READY")}});oi("ELUSIVE_JUMP",35,"cd_ELUSIVE_JUMP",{potency:0,applicationDelay:0,animationLock:1,cooldown:30,onConfirm:e=>{e.refreshBuff("ENHANCED_PIERCING_TALON",0)}});oi("WINGED_GLIDE",45,"cd_WINGED_GLIDE",{potency:0,applicationDelay:0,animationLock:jn,cooldown:60,maxCharges:2});const h0=["SONIC_BREAK_DOT","BOW_SHOCK_DOT"],ck=Object.keys(Vm).filter(e=>!h0.includes(e));Object.keys(Vm).forEach(e=>$n(e,`GNB/${ot[e].name}.png`));class uk extends $t{jobSpecificOtherTargetedBuffViewProps(){return[...h0.map(t=>this.makeCommonTimer(t,!1))]}jobSpecificSelfTargetedBuffViewProps(){return ck.map(t=>t==="ROYAL_GUARD"?this.makeCommonTimerless(t):this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){var A,R;const a=this.state.resources,l=a.get("GNB_COMBO_TRACKER"),s=a.get("GNB_AOE_COMBO_TRACKER"),c=a.get("POWDER_GAUGE").availableAmount(),d=a.get("ROYAL_GUARD").availableAmount(),h=l.available(1)?(A=l.pendingChange)==null?void 0:A.timeTillEvent:s.available(1)?(R=s.pendingChange)==null?void 0:R.timeTillEvent:void 0;return[{kind:"bar",name:_({en:"Combo Timer"}),color:t.rdm.manaStack,progress:h?h/30:0,valueString:(h==null?void 0:h.toFixed(3))??"N/A"},{kind:"counter",name:_({en:"Royal Guard"}),color:t.rdm.manaStack,currentStacks:d,maxStacks:1},{kind:"counter",name:_({en:"Powder Gauge",zh:"晶壤"}),color:t.rdm.manaStack,currentStacks:c,maxStacks:this.state.hasTraitUnlocked("CARTRIDGE_CHARGE_II")?3:2}]}}const Lt=(e,t,a)=>{tt("GNB",e,t,a??{})};Lt("POWDER_GAUGE",3);Lt("ROYAL_GUARD",1);Lt("NO_MERCY",1,{timeout:20});Lt("AURORA",1,{timeout:18});Lt("BOW_SHOCK_DOT",1,{timeout:15});Lt("CAMOUFLAGE",1,{timeout:20});Lt("HEART_OF_CORUNDUM",1,{timeout:8});Lt("CLARITY_OF_CORUNDUM",1,{timeout:15});Lt("CATHARSIS_OF_CORUNDUM",1,{timeout:20});Lt("NEBULA",1,{timeout:15});Lt("GREAT_NEBULA",1,{timeout:15});Lt("HEART_OF_LIGHT",1,{timeout:15});Lt("HEART_OF_STONE",1,{timeout:8});Lt("READY_TO_BLAST",1,{timeout:10});Lt("READY_TO_BREAK",1,{timeout:30});Lt("READY_TO_GOUGE",1,{timeout:10});Lt("READY_TO_RAZE",1,{timeout:10});Lt("READY_TO_REIGN",1,{timeout:30});Lt("READY_TO_RIP",1,{timeout:10});Lt("READY_TO_TEAR",1,{timeout:10});Lt("SONIC_BREAK_DOT",1,{timeout:30});Lt("SUPERBOLIDE",1,{timeout:10});Lt("BRUTAL_SHELL",1,{timeout:30});Lt("GNB_COMBO_TRACKER",2,{timeout:30});Lt("GNB_AOE_COMBO_TRACKER",1,{timeout:30});Lt("GNB_GNASHING_COMBO_TRACKER",2,{timeout:30});Lt("GNB_REIGN_COMBO_TRACKER",2,{timeout:30});const AI=["KEEN_EDGE","BRUTAL_SHELL","SOLID_BARREL"],dk=["DEMON_SLICE","DEMON_SLAUGHTER"],mI=["GNASHING_FANG","SAVAGE_CLAW","WICKED_TALON"],RI=["REIGN_OF_BEASTS","NOBLE_BLOOD","LION_HEART"];class fk extends Jt{constructor(t){super(t);const a=this.hasTraitUnlocked("ENHANCED_AURORA")?2:1;[new Ke("cd_AURORA",60,a,a)].forEach(s=>this.cooldowns.set(s)),this.cooldowns.set(new Ke("cd_DOUBLE_DOWN",this.config.adjustedSksGCD(60),1,1)),this.cooldowns.set(new Ke("cd_GNASHING_FANG",this.config.adjustedSksGCD(30),1,1));const l=this.hasTraitUnlocked("CARTRIDGE_CHARGE_II")?3:2;this.resources.set(new ei("POWDER_GAUGE",l,0)),this.registerRecurringEvents([{groupedEffects:[{effectName:"SONIC_BREAK_DOT",appliedBy:["SONIC_BREAK"]}]},{groupedEffects:[{effectName:"BOW_SHOCK_DOT",appliedBy:["BOW_SHOCK"]}]}])}get statusPropsGenerator(){return new uk(this)}jobSpecificAddDamageBuffCovers(t,a){this.hasResourceAvailable("NO_MERCY")&&t.addBuff(k.NoMercy)}fixGNBComboState(t){if(dk.includes(t)){this.tryConsumeResource("GNB_COMBO_TRACKER",!0),this.tryConsumeResource("GNB_REIGN_COMBO_TRACKER",!0),this.tryConsumeResource("GNB_GNASHING_COMBO_TRACKER",!0),this.tryConsumeResource("GNB_AOE_COMBO_TRACKER"),t==="DEMON_SLICE"&&(this.resources.get("GNB_AOE_COMBO_TRACKER").gain(1),this.enqueueResourceDrop("GNB_AOE_COMBO_TRACKER"));return}let a="GNB_COMBO_TRACKER",l=-1;AI.includes(t)?(this.tryConsumeResource("GNB_AOE_COMBO_TRACKER",!0),this.tryConsumeResource("GNB_REIGN_COMBO_TRACKER",!0),this.tryConsumeResource("GNB_GNASHING_COMBO_TRACKER",!0),l=AI.indexOf(t)):mI.includes(t)?(this.tryConsumeResource("GNB_REIGN_COMBO_TRACKER",!0),a="GNB_GNASHING_COMBO_TRACKER",l=mI.indexOf(t)):RI.includes(t)&&(this.tryConsumeResource("GNB_GNASHING_COMBO_TRACKER",!0),a="GNB_REIGN_COMBO_TRACKER",l=RI.indexOf(t)),l===0?(this.tryConsumeResource(a,!0),this.resources.get(a).gain(1),this.enqueueResourceDrop(a)):l===1?this.resources.get(a).availableAmount()===1?(this.resources.get(a).gain(1),this.enqueueResourceDrop(a)):this.tryConsumeResource(a,!0):l===2&&this.tryConsumeResource(a,!0)}gainCartridge(t){const a=this.hasTraitUnlocked("CARTRIDGE_CHARGE_II")?3:2;this.resources.get("POWDER_GAUGE").availableAmount()+t>a&&D.reportWarning(Fe.CartridgeOvercap),this.resources.get("POWDER_GAUGE").gain(t)}refreshBuff(t,a){this.addEvent(new Ge("gain buff",a,()=>{this.resources.get(t).gain(1),this.enqueueResourceDrop(t)}))}}const ea=(e,t,a)=>{const l=ut(a.onConfirm??je,d=>{e!=="SONIC_BREAK"&&d.fixGNBComboState(e),d.tryConsumeResource("READY_TO_BLAST"),d.tryConsumeResource("READY_TO_RAZE"),d.tryConsumeResource("READY_TO_RIP"),d.tryConsumeResource("READY_TO_TEAR"),d.tryConsumeResource("READY_TO_GOUGE")}),s=a.onApplication??je,c=a.jobPotencyModifiers??(d=>[]);return Mi("GNB",e,t,{...a,onConfirm:l,onApplication:s,recastTime:d=>d.config.adjustedSksGCD(),jobPotencyModifiers:d=>{const h=c(d);return a.combo&&d.resources.get(a.combo.resource).availableAmount()===a.combo.resourceValue&&h.push(dl(Xe(d,a.combo.potency)-Xe(d,a.potency))),d.hasResourceAvailable("NO_MERCY")&&h.push(me.NoMercy),h}})},nn=(e,t,a,l)=>Nt("GNB",e,t,a,{...l,onConfirm:l.onConfirm,jobPotencyModifiers:s=>{const c=[];return s.hasResourceAvailable("NO_MERCY")&&c.push(me.NoMercy),c}}),E0={newSkill:"GNASHING_FANG",condition:e=>e.resources.get("GNB_GNASHING_COMBO_TRACKER").availableAmount()===0},A0={newSkill:"SAVAGE_CLAW",condition:e=>e.resources.get("GNB_GNASHING_COMBO_TRACKER").availableAmount()===1},m0={newSkill:"WICKED_TALON",condition:e=>e.resources.get("GNB_GNASHING_COMBO_TRACKER").availableAmount()===2},R0={newSkill:"REIGN_OF_BEASTS",condition:e=>e.resources.get("GNB_REIGN_COMBO_TRACKER").availableAmount()===0},T0={newSkill:"NOBLE_BLOOD",condition:e=>e.resources.get("GNB_REIGN_COMBO_TRACKER").availableAmount()===1},S0={newSkill:"LION_HEART",condition:e=>e.resources.get("GNB_REIGN_COMBO_TRACKER").availableAmount()===2},hk={newSkill:"HYPERVELOCITY",condition:e=>e.hasResourceAvailable("READY_TO_BLAST")},Ek={newSkill:"FATED_BRAND",condition:e=>e.hasResourceAvailable("READY_TO_RAZE")},Ak={newSkill:"JUGULAR_RIP",condition:e=>e.hasResourceAvailable("READY_TO_RIP")},mk={newSkill:"ABDOMEN_TEAR",condition:e=>e.hasResourceAvailable("READY_TO_TEAR")},Rk={newSkill:"EYE_GOUGE",condition:e=>e.hasResourceAvailable("READY_TO_GOUGE")},Tk={newSkill:"ROYAL_GUARD",condition:e=>!e.hasResourceAvailable("ROYAL_GUARD")},Sk={newSkill:"RELEASE_ROYAL_GUARD",condition:e=>e.hasResourceAvailable("ROYAL_GUARD")};ea("LIGHTNING_SHOT",15,{potency:150,applicationDelay:.72});ea("KEEN_EDGE",1,{potency:[["NEVER",150],["MELEE_MASTERY_TANK",200],["MELEE_MASTERY_II_TANK",300]],applicationDelay:.89});ea("BRUTAL_SHELL",4,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",160],["MELEE_MASTERY_II_TANK",240]],combo:{potency:[["NEVER",240],["MELEE_MASTERY_TANK",300],["MELEE_MASTERY_II_TANK",380]],resource:"GNB_COMBO_TRACKER",resourceValue:1},applicationDelay:1.07,onConfirm:e=>{e.resources.get("GNB_COMBO_TRACKER").availableAmount()===1&&e.refreshBuff("BRUTAL_SHELL",0)},highlightIf:e=>e.resources.get("GNB_COMBO_TRACKER").availableAmount()===1});ea("SOLID_BARREL",26,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",140],["MELEE_MASTERY_II_TANK",240]],combo:{potency:[["NEVER",320],["MELEE_MASTERY_TANK",360],["MELEE_MASTERY_II_TANK",460]],resource:"GNB_COMBO_TRACKER",resourceValue:2},applicationDelay:1.07,onConfirm:e=>{e.resources.get("GNB_COMBO_TRACKER").availableAmount()===2&&e.gainCartridge(1)},highlightIf:e=>e.resources.get("GNB_COMBO_TRACKER").availableAmount()===2});ea("DEMON_SLICE",10,{potency:100,falloff:0,applicationDelay:.62});ea("DEMON_SLAUGHTER",40,{potency:100,combo:{potency:160,resource:"GNB_AOE_COMBO_TRACKER",resourceValue:1},falloff:0,applicationDelay:.62,onConfirm:e=>{e.resources.get("GNB_AOE_COMBO_TRACKER").availableAmount()===1&&e.gainCartridge(1)},highlightIf:e=>e.resources.get("GNB_AOE_COMBO_TRACKER").availableAmount()===1});ea("BURST_STRIKE",30,{potency:[["NEVER",400],["MELEE_MASTERY_II_TANK",460]],applicationDelay:.71,validateAttempt:e=>e.hasResourceAvailable("POWDER_GAUGE"),onConfirm:e=>{e.tryConsumeResource("POWDER_GAUGE"),e.hasTraitUnlocked("ENHANCED_CONTINUATION")&&e.refreshBuff("READY_TO_BLAST",0)},highlightIf:e=>e.hasResourceAvailable("POWDER_GAUGE")});ea("FATED_CIRCLE",72,{potency:300,falloff:0,applicationDelay:.54,validateAttempt:e=>e.hasResourceAvailable("POWDER_GAUGE"),onConfirm:e=>{e.tryConsumeResource("POWDER_GAUGE"),e.hasTraitUnlocked("ENHANCED_CONTINUATION_II")&&e.refreshBuff("READY_TO_RAZE",0)},highlightIf:e=>e.hasResourceAvailable("POWDER_GAUGE")});nn("BLOODFEST",76,"cd_BLOODFEST",{applicationDelay:0,cooldown:120,maxCharges:1,onConfirm:e=>{const t=e.hasTraitUnlocked("CARTRIDGE_CHARGE_II")?3:2;e.gainCartridge(t),e.hasTraitUnlocked("ENHANCED_BLOODFEST")&&e.refreshBuff("READY_TO_REIGN",0)}});nn("NO_MERCY",2,"cd_NO_MERCY",{applicationDelay:0,cooldown:60,maxCharges:1,onConfirm:e=>{e.refreshBuff("NO_MERCY",.62),e.refreshBuff("READY_TO_BREAK",0)}});ea("SONIC_BREAK",54,{potency:300,applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("READY_TO_BREAK"),onConfirm:(e,t)=>{e.tryConsumeResource("READY_TO_BREAK");const a=[];e.hasResourceAvailable("NO_MERCY")&&a.push(me.NoMercy),e.addDoTPotencies({node:t,effectName:"SONIC_BREAK_DOT",skillName:"SONIC_BREAK",tickPotency:60,speedStat:"sks",modifiers:a})},onApplication:(e,t)=>e.applyDoT("SONIC_BREAK_DOT",t),highlightIf:e=>e.hasResourceAvailable("READY_TO_BREAK")});ea("GNASHING_FANG",60,{replaceIf:[A0,m0],potency:[["NEVER",380],["MELEE_MASTERY_II_TANK",500]],applicationDelay:.62,recastTime:e=>e.config.adjustedSksGCD(),validateAttempt:e=>e.hasResourceAvailable("POWDER_GAUGE"),onConfirm:e=>{e.refreshBuff("READY_TO_RIP",0),e.tryConsumeResource("POWDER_GAUGE")},highlightIf:e=>e.hasResourceAvailable("POWDER_GAUGE")&&!e.hasResourceAvailable("GNB_REIGN_COMBO_TRACKER"),secondaryCooldown:{cdName:"cd_GNASHING_FANG",cooldown:30,maxCharges:1}});ea("SAVAGE_CLAW",60,{startOnHotbar:!1,replaceIf:[E0,m0],potency:[["NEVER",460],["MELEE_MASTERY_II_TANK",560]],applicationDelay:.62,validateAttempt:e=>e.resources.get("GNB_GNASHING_COMBO_TRACKER").availableAmount()===1,onConfirm:e=>{e.refreshBuff("READY_TO_TEAR",0)},highlightIf:e=>e.resources.get("GNB_GNASHING_COMBO_TRACKER").availableAmount()===1});ea("WICKED_TALON",60,{startOnHotbar:!1,replaceIf:[E0,A0],potency:[["NEVER",540],["MELEE_MASTERY_II_TANK",620]],applicationDelay:1.16,validateAttempt:e=>e.resources.get("GNB_GNASHING_COMBO_TRACKER").availableAmount()===2,onConfirm:e=>{e.refreshBuff("READY_TO_GOUGE",0)},highlightIf:e=>e.resources.get("GNB_GNASHING_COMBO_TRACKER").availableAmount()===2});ea("DOUBLE_DOWN",90,{potency:1200,falloff:.15,applicationDelay:.72,recastTime:e=>e.config.adjustedSksGCD(),validateAttempt:e=>e.hasResourceAvailable("POWDER_GAUGE"),onConfirm:e=>{e.tryConsumeResource("POWDER_GAUGE")},highlightIf:e=>e.hasResourceAvailable("POWDER_GAUGE"),secondaryCooldown:{cdName:"cd_DOUBLE_DOWN",cooldown:60,maxCharges:1}});ea("REIGN_OF_BEASTS",100,{replaceIf:[T0,S0],potency:1e3,falloff:.6,applicationDelay:1.16,validateAttempt:e=>e.hasResourceAvailable("READY_TO_REIGN"),onConfirm:e=>{e.tryConsumeResource("READY_TO_REIGN")},highlightIf:e=>e.hasResourceAvailable("READY_TO_REIGN")});ea("NOBLE_BLOOD",100,{startOnHotbar:!1,replaceIf:[R0,S0],potency:1100,falloff:.6,applicationDelay:1.65,validateAttempt:e=>e.resources.get("GNB_REIGN_COMBO_TRACKER").availableAmount()===1,highlightIf:e=>e.resources.get("GNB_REIGN_COMBO_TRACKER").availableAmount()===1});ea("LION_HEART",100,{startOnHotbar:!1,replaceIf:[R0,T0],potency:1200,falloff:.6,applicationDelay:1.79,validateAttempt:e=>e.resources.get("GNB_REIGN_COMBO_TRACKER").availableAmount()===2,highlightIf:e=>e.resources.get("GNB_REIGN_COMBO_TRACKER").availableAmount()===2});nn("CONTINUATION",70,"cd_CONTINUATION",{replaceIf:[hk,Ek,Ak,mk,Rk],applicationDelay:0,potency:0,cooldown:1,validateAttempt:e=>!1});nn("HYPERVELOCITY",86,"cd_HYPERVELOCITY",{startOnHotbar:!1,applicationDelay:.76,potency:200,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("READY_TO_BLAST"),highlightIf:e=>e.hasResourceAvailable("READY_TO_BLAST"),onConfirm:e=>{e.tryConsumeResource("READY_TO_BLAST")}});nn("FATED_BRAND",96,"cd_FATED_BRAND",{startOnHotbar:!1,applicationDelay:1.16,potency:120,falloff:0,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("READY_TO_RAZE"),highlightIf:e=>e.hasResourceAvailable("READY_TO_RAZE"),onConfirm:e=>{e.tryConsumeResource("READY_TO_RAZE")}});nn("JUGULAR_RIP",70,"cd_JUGULAR_RIP",{startOnHotbar:!1,applicationDelay:.8,potency:240,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("READY_TO_RIP"),highlightIf:e=>e.hasResourceAvailable("READY_TO_RIP"),onConfirm:e=>{e.tryConsumeResource("READY_TO_RIP")}});nn("ABDOMEN_TEAR",70,"cd_ABDOMEN_TEAR",{startOnHotbar:!1,applicationDelay:.76,potency:280,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("READY_TO_TEAR"),highlightIf:e=>e.hasResourceAvailable("READY_TO_TEAR"),onConfirm:e=>{e.tryConsumeResource("READY_TO_TEAR")}});nn("EYE_GOUGE",70,"cd_EYE_GOUGE",{startOnHotbar:!1,applicationDelay:.98,potency:320,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("READY_TO_GOUGE"),highlightIf:e=>e.hasResourceAvailable("READY_TO_GOUGE"),onConfirm:e=>{e.tryConsumeResource("READY_TO_GOUGE")}});nn("DANGER_ZONE",18,"cd_DANGER_ZONE",{autoUpgrade:{trait:"DANGER_ZONE_MASTERY",otherSkill:"BLASTING_ZONE"},applicationDelay:.62,potency:250,cooldown:30});nn("BLASTING_ZONE",80,"cd_BLASTING_ZONE",{startOnHotbar:!1,applicationDelay:.62,potency:800,cooldown:30});nn("BOW_SHOCK",62,"cd_BOW_SHOCK",{applicationDelay:.62,potency:150,falloff:0,cooldown:60,onConfirm:(e,t)=>{const a=[];e.hasResourceAvailable("NO_MERCY")&&a.push(me.NoMercy),e.addDoTPotencies({node:t,effectName:"BOW_SHOCK_DOT",skillName:"BOW_SHOCK",tickPotency:60,speedStat:"sks",modifiers:a})},onApplication:(e,t)=>e.applyDoT("BOW_SHOCK_DOT",t)});nn("TRAJECTORY",56,"cd_TRAJECTORY",{animationLock:jn,cooldown:30,maxCharges:2,applicationDelay:.66,drawsAggro:!0});nn("HEART_OF_STONE",68,"cd_HEART_OF_STONE",{autoUpgrade:{trait:"HEART_OF_STONE_MASTERY",otherSkill:"HEART_OF_CORUNDUM"},applicationDelay:.62,cooldown:25,onApplication:e=>{e.refreshBuff("HEART_OF_STONE",0)}});nn("HEART_OF_CORUNDUM",82,"cd_HEART_OF_CORUNDUM",{startOnHotbar:!1,applicationDelay:.62,cooldown:25,onApplication:e=>{e.refreshBuff("CATHARSIS_OF_CORUNDUM",0),e.refreshBuff("HEART_OF_CORUNDUM",0),e.refreshBuff("CLARITY_OF_CORUNDUM",0)}});nn("SUPERBOLIDE",50,"cd_SUPERBOLIDE",{applicationDelay:0,cooldown:360,onConfirm:e=>{e.refreshBuff("SUPERBOLIDE",0)}});nn("CAMOUFLAGE",6,"cd_CAMOUFLAGE",{applicationDelay:.62,cooldown:90,onConfirm:e=>{e.refreshBuff("CAMOUFLAGE",0)}});nn("NEBULA",38,"cd_NEBULA",{autoUpgrade:{trait:"NEBULA_MASTERY",otherSkill:"GREAT_NEBULA"},applicationDelay:.56,cooldown:120,onConfirm:e=>{e.refreshBuff("NEBULA",0)}});nn("GREAT_NEBULA",38,"cd_GREAT_NEBULA",{startOnHotbar:!1,applicationDelay:.56,cooldown:120,onConfirm:e=>{e.refreshBuff("GREAT_NEBULA",0)}});nn("HEART_OF_LIGHT",64,"cd_HEART_OF_LIGHT",{applicationDelay:.62,cooldown:60,onConfirm:e=>{e.refreshBuff("HEART_OF_LIGHT",0)}});nn("AURORA",45,"cd_AURORA",{applicationDelay:.62,cooldown:60,onConfirm:e=>{e.refreshBuff("AURORA",0)},maxCharges:2});nn("ROYAL_GUARD",10,"cd_ROYAL_GUARD",{applicationDelay:0,cooldown:2,validateAttempt:e=>!e.hasResourceAvailable("ROYAL_GUARD"),onConfirm:e=>{e.resources.get("ROYAL_GUARD").gain(1)},replaceIf:[Sk],secondaryCooldown:{cdName:"cd_RELEASE_ROYAL_GUARD",cooldown:1,maxCharges:1}});nn("RELEASE_ROYAL_GUARD",10,"cd_RELEASE_ROYAL_GUARD",{startOnHotbar:!1,replaceIf:[Tk],applicationDelay:0,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("ROYAL_GUARD"),onConfirm:e=>{e.tryConsumeResource("ROYAL_GUARD")},secondaryCooldown:{cdName:"cd_ROYAL_GUARD",cooldown:2,maxCharges:1}});Object.keys(Km).forEach(e=>$n(e,`MCH/${ot[e].name}.png`));class gk extends $t{jobSpecificOtherTargetedBuffViewProps(){return[...["WILDFIRE","BIOBLASTER"].map(t=>this.makeCommonTimer(t,!1))]}jobSpecificSelfTargetedBuffViewProps(){return[...Object.keys(Km).filter(t=>!(t==="WILDFIRE"||t==="BIOBLASTER")).map(t=>this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){const a=this.state.resources,l=a.get("HEAT_GAUGE").availableAmount(),s=a.get("BATTERY_GAUGE").availableAmount(),c=a.get("QUEEN_PUNCHES"),d=a.get("QUEEN_FINISHERS"),h=c.availableAmount()+d.availableAmount(),E=c.maxValue+d.maxValue;return[{kind:"bar",name:_({en:"Heat",zh:"枪管热度"}),color:t.mch.heat,progress:l/100,valueString:l.toFixed(0)},{kind:"bar",name:_({en:"Battery",zh:"电量"}),color:t.mch.battery,progress:s/100,valueString:s.toFixed(0)},{kind:"bar",name:_({en:"Queen Hits",zh:"人偶攻击命中"}),color:t.mch.battery,progress:h/E,valueString:h.toFixed(0)}]}}const Mn=(e,t,a)=>{tt("MCH",e,t,a??{})};Mn("HEAT_GAUGE",100);Mn("BATTERY_GAUGE",100);Mn("REASSEMBLED",1,{timeout:5});Mn("OVERHEATED",5,{timeout:10});Mn("WILDFIRE",1,{timeout:10});Mn("WILDFIRE_SELF",1,{timeout:10});Mn("FLAMETHROWER",1,{timeout:10});Mn("BIOBLASTER",1,{timeout:15});Mn("TACTICIAN",1,{timeout:15});Mn("HYPERCHARGED",1,{timeout:30});Mn("EXCAVATOR_READY",1,{timeout:30});Mn("FULL_METAL_MACHINIST",1,{timeout:30});Mn("HEAT_COMBO",2,{timeout:30});Mn("QUEEN",7);Mn("QUEEN_PUNCHES",5);Mn("QUEEN_FINISHERS",2);Mn("WILDFIRE_HITS",6);Mn("BATTERY_BONUS",50);const pk=["HEATED_CLEAN_SHOT","HEATED_SLUG_SHOT","HEATED_SPLIT_SHOT","SPREAD_SHOT","SCATTERGUN"],TI=["CHAIN_SAW","EXCAVATOR","FULL_METAL_FIELD","SCATTERGUN","BIOBLASTER","SPREAD_SHOT"];class _k extends Jt{constructor(a){super(a);F(this,"handleQueenPunch",()=>{if(!this.hasResourceAvailable("QUEEN_PUNCHES")){this.handleQueenFinisher();return}const a=this.resources.get("QUEEN").node;a!==void 0&&this.resolveQueenPotency(a),this.resources.get("QUEEN_PUNCHES").consume(1),this.hasResourceAvailable("QUEEN_PUNCHES")?this.addEvent(new Ge("queen punch",1.56,()=>this.handleQueenPunch())):this.addEvent(new Ge("queen finisher",1.56,()=>this.handleQueenFinisher()))});F(this,"handleQueenFinisher",()=>{if(!this.hasResourceAvailable("QUEEN_FINISHERS"))return;const a=this.resources.get("QUEEN").node;a!==void 0&&this.resolveQueenPotency(a),this.resources.get("QUEEN_FINISHERS").consume(1),this.hasResourceAvailable("QUEEN_FINISHERS")?this.addEvent(new Ge("queen finisher",2,()=>this.handleQueenFinisher())):(this.tryConsumeResource("BATTERY_BONUS",!0),this.addEvent(new Ge("expire queen",5,()=>{this.tryConsumeResource("QUEEN",!0)})))});this.cooldowns.set(new Ke("cd_AIR_ANCHOR",this.config.adjustedSksGCD(40),1,1)),this.cooldowns.set(new Ke("cd_CHAINSAW",this.config.adjustedSksGCD(60),1,1)),this.hasTraitUnlocked("QUEENS_GAMBIT")||(this.resources.set(new ei("QUEEN_FINISHERS",1,0)),this.resources.set(new ei("QUEEN",6,0))),this.hasTraitUnlocked("ENHANCED_REASSEMBLE")||this.cooldowns.set(new Ke("cd_REASSEMBLE",55,1,1)),this.hasTraitUnlocked("ENHANCED_MULTI_WEAPON")||this.cooldowns.set(new Ke("cd_DRILL",this.config.adjustedSksGCD(20),1,1)),this.hasTraitUnlocked("CHARGED_ACTION_MASTERY")||(this.cooldowns.set(new Ke("cd_DOUBLE_CHECK",30,2,2)),this.cooldowns.set(new Ke("cd_CHECKMATE",30,2,2))),this.hasTraitUnlocked("ENHANCED_TACTICIAN")||this.cooldowns.set(new Ke("cd_TACTICIAN",120,1,1)),this.registerRecurringEvents([{groupedEffects:[{effectName:"BIOBLASTER",appliedBy:["BIOBLASTER"]}]},{groupedEffects:[{effectName:"FLAMETHROWER",appliedBy:["FLAMETHROWER"],isGroundTargeted:!0,exclude:!0}]}],["ROOK_AUTOTURRET","AUTOMATON_QUEEN","WILDFIRE"])}get statusPropsGenerator(){return new gk(this)}jobSpecificRegisterRecurringEvents(){let a=()=>{this.handleDoTTick("FLAMETHROWER"),this.getDisplayTime()>=0&&D.reportDotTick(this.time,"FLAMETHROWER"),this.addEvent(new Ge("Flamethrower tick",1,()=>{a()}))},l=this.config.timeTillFirstManaTick+this.dotTickOffset;for(;l>1;)l--;this.addEvent(new Ge("initial Flamethrower tick",l,a))}cancelChanneledSkills(){this.tryConsumeResource("FLAMETHROWER")}processComboStatus(a){if(!pk.includes(a))return;const l=this.resources.get("HEAT_COMBO").availableAmount();let s=0;l===0&&a==="HEATED_SPLIT_SHOT"?s=1:l===1&&a==="HEATED_SLUG_SHOT"&&(s=2),this.setComboState("HEAT_COMBO",s)}gainResource(a,l){const s=this.resources.get(a);s.availableAmount()+l>s.maxValue&&D.reportWarning(a==="HEAT_GAUGE"?Fe.HeatOvercap:Fe.BatteryOvercap),this.resources.get(a).gain(l)}resolveQueenPotency(a){const l=this.resources.get("QUEEN_PUNCHES").availableAmount()+this.resources.get("QUEEN_FINISHERS").availableAmount(),s=this.resources.get("QUEEN").availableAmount()-l;if(s<0)return;const c=a.getDotPotencies("QUEEN")[s];this.hasResourceAvailable("TINCTURE")&&c.modifiers.push(me.Tincture),c.snapshotTime=this.getDisplayTime(),D.resolvePotency(c)}calculateQueenPotency(a,l){const s=this.resources.get("BATTERY_BONUS").availableAmount(),c=(l-a)*(s/50);return Math.floor((a+c)*.89)}expireWildfire(){if(!this.hasResourceAvailable("WILDFIRE_HITS"))return;this.tryConsumeResource("WILDFIRE_SELF"),this.tryConsumeResource("WILDFIRE");const a=this.hasTraitUnlocked("ENHANCED_WILD_FIRE")?240:100,l=Math.min(this.resources.get("WILDFIRE_HITS").availableAmount(),6)*a,s=this.resources.get("WILDFIRE").node;if(s===void 0)return;const c=s.getDotPotencies("WILDFIRE")[0];c.base=l,D.resolvePotency(c),this.tryConsumeResource("WILDFIRE_HITS",!0)}}const ua=(e,t,a)=>{const l=ut(a.onConfirm??je,c=>c.processComboStatus(e),c=>{e!=="FULL_METAL_FIELD"&&c.tryConsumeResource("REASSEMBLED")},c=>{c.hasResourceAvailable("WILDFIRE_SELF")&&c.resources.get("WILDFIRE_HITS").gain(1)},c=>{TI.includes(e)||c.tryConsumeResource("OVERHEATED")}),s=a.onApplication??je;return Mi("MCH",e,t,{...a,onConfirm:l,onApplication:s,jobPotencyModifiers:c=>{const d=[];return a.combo&&c.resources.get(a.combo.resource).availableAmount()===a.combo.resourceValue&&d.push(dl(Xe(c,a.combo.potency)-Xe(c,a.potency))),(c.hasResourceAvailable("REASSEMBLED")||e==="FULL_METAL_FIELD")&&d.push(me.AutoCDH),c.hasResourceAvailable("OVERHEATED")&&!TI.includes(e)&&d.push(me.Overheated),d}})},Hi=(e,t,a,l)=>{const s=ut(l.onConfirm??je);return Nt("MCH",e,t,a,{...l,onConfirm:s,jobPotencyModifiers:c=>[]})},_R=(e,t,a,l)=>{const s=ut(l.onConfirm??je);return ze("MCH",e,t,a,{...l,onConfirm:s})};ua("HEATED_SPLIT_SHOT",54,{potency:[["NEVER",180],["MARKSMANS_MASTERY",200],["MARKSMANS_MASTERY_II",220]],applicationDelay:.8,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.gainResource("HEAT_GAUGE",5)});ua("HEATED_SLUG_SHOT",60,{potency:[["NEVER",100],["MARKSMANS_MASTERY",120],["MARKSMANS_MASTERY_II",140]],combo:{potency:[["NEVER",280],["MARKSMANS_MASTERY",300],["MARKSMANS_MASTERY_II",320]],resource:"HEAT_COMBO",resourceValue:1},applicationDelay:.8,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.gainResource("HEAT_GAUGE",5),highlightIf:e=>e.resources.get("HEAT_COMBO").availableAmount()===1});ua("HEATED_CLEAN_SHOT",64,{potency:[["NEVER",100],["MARKSMANS_MASTERY",120],["MARKSMANS_MASTERY_II",160]],combo:{potency:[["NEVER",360],["MARKSMANS_MASTERY",380],["MARKSMANS_MASTERY_II",420]],resource:"HEAT_COMBO",resourceValue:2},applicationDelay:.8,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>{e.gainResource("HEAT_GAUGE",5),e.gainResource("BATTERY_GAUGE",10)},highlightIf:e=>e.resources.get("HEAT_COMBO").availableAmount()===2});_R("REASSEMBLE",10,"cd_REASSEMBLE",{rscType:"REASSEMBLED",applicationDelay:0,cooldown:55,maxCharges:2});ua("DRILL",58,{potency:600,applicationDelay:1.15,recastTime:e=>e.config.adjustedSksGCD(),secondaryCooldown:{cdName:"cd_DRILL",cooldown:20,maxCharges:2}});ua("HOT_SHOT",4,{autoUpgrade:{trait:"HOT_SHOT_MASTERY",otherSkill:"AIR_ANCHOR"},potency:240,applicationDelay:1.15,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.gainResource("BATTERY_GAUGE",20),secondaryCooldown:{cdName:"cd_AIR_ANCHOR",cooldown:40,maxCharges:1}});ua("AIR_ANCHOR",76,{startOnHotbar:!1,potency:600,applicationDelay:1.15,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.gainResource("BATTERY_GAUGE",20),secondaryCooldown:{cdName:"cd_AIR_ANCHOR",cooldown:40,maxCharges:1}});ua("CHAIN_SAW",90,{replaceIf:[{newSkill:"EXCAVATOR",condition:e=>e.hasResourceAvailable("EXCAVATOR_READY")}],potency:600,falloff:.5,applicationDelay:1.03,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>{e.gainResource("BATTERY_GAUGE",20),e.hasTraitUnlocked("ENHANCED_MULTI_WEAPON_II")&&e.gainStatus("EXCAVATOR_READY")},secondaryCooldown:{cdName:"cd_CHAINSAW",cooldown:60,maxCharges:1}});ua("EXCAVATOR",90,{startOnHotbar:!1,potency:600,falloff:.5,applicationDelay:1.07,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>{e.gainResource("BATTERY_GAUGE",20),e.tryConsumeResource("EXCAVATOR_READY")},validateAttempt:e=>e.hasResourceAvailable("EXCAVATOR_READY"),highlightIf:e=>e.hasResourceAvailable("EXCAVATOR_READY")});Hi("BARREL_STABILIZER",66,"cd_BARREL_STABILIZER",{replaceIf:[{newSkill:"FULL_METAL_FIELD",condition:e=>e.hasResourceAvailable("FULL_METAL_MACHINIST")}],applicationDelay:0,cooldown:120,maxCharges:1,requiresCombat:!0,onConfirm:e=>{e.gainStatus("HYPERCHARGED"),e.hasTraitUnlocked("ENHANCED_BARREL_STABILIZER")&&e.gainStatus("FULL_METAL_MACHINIST")}});ua("FULL_METAL_FIELD",100,{startOnHotbar:!1,potency:900,falloff:.4,applicationDelay:1.02,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.tryConsumeResource("FULL_METAL_MACHINIST"),validateAttempt:e=>e.hasResourceAvailable("FULL_METAL_MACHINIST"),highlightIf:e=>e.hasResourceAvailable("FULL_METAL_MACHINIST")});_R("HYPERCHARGE",30,"cd_HYPERCHARGE",{rscType:"OVERHEATED",applicationDelay:0,cooldown:10,maxCharges:1,onConfirm:e=>{e.hasResourceAvailable("HYPERCHARGED")?e.tryConsumeResource("HYPERCHARGED"):e.resources.get("HEAT_GAUGE").consume(50)},validateAttempt:e=>e.hasResourceAvailable("HEAT_GAUGE",50)||e.hasResourceAvailable("HYPERCHARGED"),highlightIf:e=>e.hasResourceAvailable("HEAT_GAUGE",50)||e.hasResourceAvailable("HYPERCHARGED")});Hi("WILDFIRE",45,"cd_WILDFIRE",{replaceIf:[{newSkill:"DETONATOR",condition:e=>e.hasResourceAvailable("WILDFIRE_SELF")}],applicationDelay:.67,cooldown:120,maxCharges:1,onConfirm:(e,t)=>{e.gainStatus("WILDFIRE_SELF");const a=e.resources.get("WILDFIRE"),l=new bn({config:e.config,sourceTime:e.getDisplayTime(),sourceSkill:"WILDFIRE",aspect:pe.Physical,basePotency:0,snapshotTime:e.getDisplayTime(),description:"wildfire",targetCount:1});l.modifiers=[me.NoCDH],e.hasResourceAvailable("TINCTURE")&&l.modifiers.push(me.Tincture),t.addDoTPotency(l,"WILDFIRE"),a.gain(1),a.node=t,e.resources.addResourceEvent({rscType:"WILDFIRE",name:"wildfire expiration",delay:Pt("MCH","WILDFIRE").maxTimeout,fnOnRsc:s=>e.expireWildfire()})}});Hi("DETONATOR",45,"cd_DETONATOR",{startOnHotbar:!1,applicationDelay:.62,cooldown:1,maxCharges:1,onConfirm:e=>e.expireWildfire(),validateAttempt:e=>e.hasResourceAvailable("WILDFIRE_SELF")});ua("BLAZING_SHOT",68,{potency:[["NEVER",220],["MARKSMANS_MASTERY_II",240]],applicationDelay:.85,recastTime:1.5,onConfirm:e=>{e.cooldowns.get("cd_DOUBLE_CHECK").restore(15),e.cooldowns.get("cd_CHECKMATE").restore(15)},validateAttempt:e=>e.hasResourceAvailable("OVERHEATED"),highlightIf:e=>e.hasResourceAvailable("OVERHEATED")});Hi("GAUSS_ROUND",15,"cd_DOUBLE_CHECK",{autoUpgrade:{trait:"DOUBLE_BARREL_MASTERY",otherSkill:"DOUBLE_CHECK"},potency:130,applicationDelay:.71,cooldown:30,maxCharges:3});Hi("DOUBLE_CHECK",92,"cd_DOUBLE_CHECK",{startOnHotbar:!1,potency:170,falloff:.4,applicationDelay:.71,cooldown:30,maxCharges:3});Hi("RICOCHET",50,"cd_CHECKMATE",{autoUpgrade:{trait:"DOUBLE_BARREL_MASTERY",otherSkill:"CHECKMATE"},potency:130,falloff:.4,applicationDelay:.71,cooldown:30,maxCharges:3});Hi("CHECKMATE",92,"cd_CHECKMATE",{startOnHotbar:!1,potency:170,falloff:.4,applicationDelay:.71,cooldown:30,maxCharges:3});const Ik=[{skillName:"ROOK_AUTOTURRET",skillLevel:40,autoUpgrade:{otherSkill:"AUTOMATON_QUEEN",trait:"PROMOTION"}},{skillName:"AUTOMATON_QUEEN",skillLevel:80,startOnHotbar:!1}];Ik.forEach(e=>{Hi(e.skillName,e.skillLevel,"cd_QUEEN",{startOnHotbar:e.startOnHotbar,autoUpgrade:e.autoUpgrade,applicationDelay:0,cooldown:6,maxCharges:1,validateAttempt:t=>t.hasResourceAvailable("BATTERY_GAUGE",50)&&!t.hasResourceAvailable("QUEEN"),onConfirm:(t,a)=>{const l=t.resources.get("BATTERY_GAUGE").availableAmount();t.resources.get("BATTERY_BONUS").gain(l-50),t.tryConsumeResource("BATTERY_GAUGE",!0);const s=t.resources.get("QUEEN_PUNCHES");s.gain(5);const c=t.hasTraitUnlocked("QUEENS_GAMBIT")?2:1;t.resources.get("QUEEN_FINISHERS").gain(c),t.resources.get("QUEEN").gain(s.availableAmount()+c);let d="VOLLEY_FIRE",h=0;t.hasTraitUnlocked("PROMOTION")?(d="ARM_PUNCH",h=t.calculateQueenPotency(120,240)):h=t.calculateQueenPotency(35,75);for(let E=0;E<s.availableAmount();E++)a.addDoTPotency(new bn({config:t.config,sourceTime:t.getDisplayTime(),sourceSkill:d,aspect:pe.Physical,description:"",basePotency:h,snapshotTime:void 0,targetCount:a.targetCount}),"QUEEN");d=t.hasTraitUnlocked("PROMOTION")?"PILE_BUNKER":"ROOK_OVERLOAD",d==="PILE_BUNKER"?h=t.calculateQueenPotency(340,680):h=t.calculateQueenPotency(160,320),a.addDoTPotency(new bn({config:t.config,sourceTime:t.getDisplayTime(),sourceSkill:d,aspect:pe.Physical,description:"",basePotency:h,snapshotTime:void 0,targetCount:a.targetCount}),"QUEEN"),t.hasTraitUnlocked("QUEENS_GAMBIT")&&a.addDoTPotency(new bn({config:t.config,sourceTime:t.getDisplayTime(),sourceSkill:"CROWNED_COLLIDER",aspect:pe.Physical,description:"",basePotency:t.calculateQueenPotency(390,780),snapshotTime:void 0,targetCount:a.targetCount}),"QUEEN"),t.resources.get("QUEEN").node=a,t.addEvent(new Ge("initial queen punch",5.5,()=>t.handleQueenPunch()))}})});const Ck=[{skillName:"ROOK_OVERDRIVE",skillLevel:40,autoUpgrade:{otherSkill:"QUEEN_OVERDRIVE",trait:"PROMOTION"}},{skillName:"QUEEN_OVERDRIVE",skillLevel:80,startOnHotbar:!1}];Ck.forEach(e=>{Hi(e.skillName,e.skillLevel,"cd_OVERDRIVE",{startOnHotbar:e.startOnHotbar,autoUpgrade:e.autoUpgrade,applicationDelay:0,cooldown:15,maxCharges:1,validateAttempt:t=>t.hasResourceAvailable("QUEEN_PUNCHES"),onConfirm:t=>{t.tryConsumeResource("QUEEN_PUNCHES",!0)}})});ua("SPREAD_SHOT",18,{autoUpgrade:{trait:"SPREAD_SHOT_MASTERY",otherSkill:"SCATTERGUN"},potency:110,falloff:0,applicationDelay:.8,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.gainResource("HEAT_GAUGE",5)});ua("SCATTERGUN",82,{startOnHotbar:!1,potency:130,falloff:0,applicationDelay:1.15,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.gainResource("HEAT_GAUGE",10)});ua("BIOBLASTER",58,{potency:50,falloff:0,applicationDelay:.97,recastTime:e=>e.config.adjustedSksGCD(),secondaryCooldown:{cdName:"cd_DRILL",cooldown:20,maxCharges:2},onConfirm:(e,t)=>e.addDoTPotencies({node:t,effectName:"BIOBLASTER",skillName:"BIOBLASTER",tickPotency:50,speedStat:"sks"}),onApplication:(e,t)=>e.applyDoT("BIOBLASTER",t)});ua("AUTO_CROSSBOW",52,{potency:[["NEVER",140],["MARKSMANS_MASTERY_II",160]],falloff:0,applicationDelay:.89,recastTime:1.5,validateAttempt:e=>e.hasResourceAvailable("OVERHEATED"),highlightIf:e=>e.hasResourceAvailable("OVERHEATED")});ua("FLAMETHROWER",70,{applicationDelay:.89,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"FLAMETHROWER",skillName:"FLAMETHROWER",tickPotency:100,tickFrequency:1,speedStat:"sks"})},onApplication:(e,t)=>{e.applyDoT("FLAMETHROWER",t)},secondaryCooldown:{cdName:"cd_FLAMETHROWER",cooldown:60,maxCharges:1}});_R("TACTICIAN",56,"cd_TACTICIAN",{rscType:"TACTICIAN",maxCharges:1,cooldown:90,applicationDelay:.62});Hi("DISMANTLE",62,"cd_DISMANTLE",{maxCharges:1,cooldown:120,applicationDelay:.62});Object.keys(Wm).forEach(e=>$n(e,`PCT/${ot[e].name}.png`));class Nk extends $t{jobSpecificSelfTargetedBuffViewProps(){return[...Object.keys(Wm).map(t=>t==="MONOCHROME_TONES"||t==="SUBTRACTIVE_PALETTE"?this.makeCommonTimerless(t):t==="INSPIRATION"?this.makeToggleableTimer(t):this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){const a=this.state.resources,l=a.get("PORTRAIT").availableAmount(),s=a.get("DEPICTIONS").availableAmount(),c=a.get("CREATURE_CANVAS").availableAmount(),d=a.get("WEAPON_CANVAS").availableAmount(),h=a.get("LANDSCAPE_CANVAS").availableAmount(),E=a.get("PALETTE_GAUGE").availableAmount(),A=a.get("PAINT").availableAmount(),R=a.get("MONOCHROME_TONES").available(1),T=[{kind:"text",name:_({en:"portrait",zh:"肖像标识"}),text:l===0?"/":_(l===1?{en:"moogle",zh:"莫古力"}:{en:"madeen",zh:"马蒂恩"})},{kind:"text",name:_({en:"depictions",zh:"动物标识"}),text:s===0?"/":_(s===1?{en:"pom",zh:"绒球"}:s===2?{en:"wing",zh:"翅膀"}:s===3?{en:"fang",zh:"兽爪"}:{en:"maw",zh:"尖牙"})},{kind:"counter",name:_({en:"creature",zh:"动物"}),color:t.pct.creatureCanvas,currentStacks:c,maxStacks:1},{kind:"counter",name:_({en:"weapon",zh:"武器"}),color:t.pct.weaponCanvas,currentStacks:d,maxStacks:1},{kind:"counter",name:_({en:"landscape",zh:"风景"}),color:t.pct.landscapeCanvas,currentStacks:h,maxStacks:1},{kind:"bar",name:_({en:"palette gauge",zh:"调色量谱"}),color:t.pct.paletteGauge,progress:E/100,valueString:E.toFixed(0)}];return this.state.hasTraitUnlocked("ENHANCED_ARTISTRY")&&T.push({kind:"paint",name:_({en:"paint gauge",zh:"颜料量谱"}),holyColor:t.pct.holyPaint,cometColor:t.pct.cometPaint,currentStacks:A,maxStacks:5,hasComet:this.state.hasTraitUnlocked("ENHANCED_PALETTE")&&R}),T}}const An=(e,t,a)=>{tt("PCT",e,t,a??{})};An("PORTRAIT",2);An("DEPICTIONS",3);An("CREATURE_CANVAS",1,{default:1});An("WEAPON_CANVAS",1,{default:1});An("LANDSCAPE_CANVAS",1,{default:1});An("PALETTE_GAUGE",100);An("PAINT",5);An("AETHERHUES",2,{timeout:30.8});An("MONOCHROME_TONES",1);An("SUBTRACTIVE_PALETTE",3);An("HAMMER_TIME",3,{timeout:30});An("INSPIRATION",1);An("SUBTRACTIVE_SPECTRUM",1,{timeout:30});An("HYPERPHANTASIA",5,{timeout:30});An("RAINBOW_BRIGHT",1,{timeout:30});An("STARSTRUCK",1,{timeout:20});An("STARRY_MUSE",1,{timeout:20.5});An("TEMPERA_COAT",1,{timeout:10});An("TEMPERA_GRASSA",1,{timeout:10});An("SMUDGE",1,{timeout:5});const Ok=["FIRE_IN_RED","FIRE_II_IN_RED","AERO_IN_GREEN","AERO_II_IN_GREEN","WATER_IN_BLUE","WATER_II_IN_BLUE","HOLY_IN_WHITE","BLIZZARD_IN_CYAN","BLIZZARD_II_IN_CYAN","STONE_IN_YELLOW","STONE_II_IN_YELLOW","THUNDER_IN_MAGENTA","THUNDER_II_IN_MAGENTA","COMET_IN_BLACK","STAR_PRISM"],SI=["POM_MOTIF","WING_MOTIF","CLAW_MOTIF","MAW_MOTIF"],bk=["HAMMER_BRUSH","HAMMER_STAMP","POLISHING_HAMMER"];class yk extends Jt{constructor(t){super(t);const a=this.hasTraitUnlocked("ENHANCED_SWIFTCAST")&&40||60;[new Ke("cd_SWIFTCAST",a,1,1)].forEach(c=>this.cooldowns.set(c));const l=this.hasTraitUnlocked("ENHANCED_PICTOMANCY_IV")?3:2;this.cooldowns.set(new Ke("cd_LIVING_MUSE",40,l,l));const s=this.hasTraitUnlocked("ENHANCED_PICTOMANCY_II")?2:1;this.cooldowns.set(new Ke("cd_STEEL_MUSE",60,s,s)),this.registerRecurringEvents()}get statusPropsGenerator(){return new Nk(this)}jobSpecificAddDamageBuffCovers(t,a){this.hasResourceAvailable("STARRY_MUSE")&&t.addBuff(k.StarryMuse)}jobSpecificAddSpeedBuffCovers(t,a){this.hasResourceAvailable("INSPIRATION")&&Ok.includes(a.name)&&t.addBuff(k.Hyperphantasia)}captureSpellCastTime(t,a){return SI.includes(t)?a:t==="RAINBOW_DRIP"?this.hasResourceAvailable("RAINBOW_BRIGHT")?0:this.config.adjustedCastTime(a):this.config.adjustedCastTime(a,this.hasResourceAvailable("INSPIRATION")?25:void 0)}captureSpellRecastTime(t,a){if(SI.includes(t))return a;if(t==="RAINBOW_DRIP"){let l=this.config.adjustedGCD(a);return this.hasResourceAvailable("RAINBOW_BRIGHT")?l-3.5:l}return bk.includes(t)?this.config.adjustedGCD(a):this.config.adjustedGCD(a,this.hasResourceAvailable("INSPIRATION")?25:void 0)}getHammerStacks(){return this.resources.get("HAMMER_TIME").availableAmount()}doFiller(){this.cycleAetherhues(),this.tryConsumeHyperphantasia(),this.tryConsumeResource("SUBTRACTIVE_PALETTE")}cycleAetherhues(){const t=this.resources.get("AETHERHUES"),a=Pt("PCT","AETHERHUES").maxTimeout;t.available(2)&&t.pendingChange?(t.overrideCurrentValue(0),t.removeTimer()):t.available(1)&&t.pendingChange?(t.overrideTimer(this,a),t.gain(1)):(t.gain(1),this.resources.addResourceEvent({rscType:"AETHERHUES",name:"reset aetherhues status",delay:a,fnOnRsc:l=>this.resources.get("AETHERHUES").overrideCurrentValue(0)}))}tryConsumeHyperphantasia(){let t=this.resources.get("HYPERPHANTASIA"),a=this.resources.get("INSPIRATION");a.available(1)&&t.available(1)&&t.pendingChange&&(t.consume(1),t.availableAmount()===0&&(a.consume(1),t.removeTimer(),a.removeTimer(),this.hasTraitUnlocked("ENHANCED_PICTOMANCY_III")&&(this.resources.get("RAINBOW_BRIGHT").gain(1),this.enqueueResourceDrop("RAINBOW_BRIGHT"))))}}const an=(e,t,a)=>{const l=a.baseRecastTime??2.5;let s=ut((d,h)=>{e==="RAINBOW_DRIP"&&d.hasResourceAvailable("RAINBOW_BRIGHT")||e==="STAR_PRISM"||e==="HOLY_IN_WHITE"||e==="COMET_IN_BLACK"||e==="HAMMER_STAMP"||e==="HAMMER_BRUSH"||e==="POLISHING_HAMMER"||d.tryConsumeResource("SWIFTCAST")},a.onConfirm??je);const c=a.onApplication??je;return oo("PCT",e,t,{replaceIf:a.replaceIf,startOnHotbar:a.startOnHotbar,highlightIf:a.highlightIf,castTime:d=>d.captureSpellCastTime(e,a.baseCastTime),recastTime:d=>d.captureSpellRecastTime(e,l),manaCost:a.baseManaCost??0,potency:a.basePotency,jobPotencyModifiers:d=>{const h=[];return d.hasResourceAvailable("STARRY_MUSE")&&h.push(me.Starry),a.jobPotencyModifiers&&h.push(...a.jobPotencyModifiers(d)),h},falloff:a.falloff,validateAttempt:a.validateAttempt,applicationDelay:a.applicationDelay,isInstantFn:d=>e==="RAINBOW_DRIP"&&d.hasResourceAvailable("RAINBOW_BRIGHT")||e==="STAR_PRISM"||e==="HOLY_IN_WHITE"||e==="COMET_IN_BLACK"||e==="HAMMER_STAMP"||e==="HAMMER_BRUSH"||e==="POLISHING_HAMMER"||d.hasResourceAvailable("SWIFTCAST"),onConfirm:s,onApplication:c})},Ti=(e,t,a,l)=>Nt("PCT",e,t,a,{jobPotencyModifiers:s=>s.hasResourceAvailable("STARRY_MUSE")?[me.Starry]:[],...l}),IR={newSkill:"FIRE_IN_RED",condition:e=>!e.hasResourceAvailable("AETHERHUES")},CR={newSkill:"AERO_IN_GREEN",condition:e=>e.resources.get("AETHERHUES").availableAmount()===1},NR={newSkill:"WATER_IN_BLUE",condition:e=>e.resources.get("AETHERHUES").availableAmount()===2},OR={newSkill:"BLIZZARD_IN_CYAN",condition:e=>!e.hasResourceAvailable("AETHERHUES")},bR={newSkill:"STONE_IN_YELLOW",condition:e=>e.resources.get("AETHERHUES").availableAmount()===1},yR={newSkill:"THUNDER_IN_MAGENTA",condition:e=>e.resources.get("AETHERHUES").availableAmount()===2},vR={newSkill:"FIRE_II_IN_RED",condition:e=>!e.hasResourceAvailable("AETHERHUES")},DR={newSkill:"AERO_II_IN_GREEN",condition:e=>e.resources.get("AETHERHUES").availableAmount()===1},MR={newSkill:"WATER_II_IN_BLUE",condition:e=>e.resources.get("AETHERHUES").availableAmount()===2},LR={newSkill:"BLIZZARD_II_IN_CYAN",condition:e=>!e.hasResourceAvailable("AETHERHUES")},HR={newSkill:"STONE_II_IN_YELLOW",condition:e=>e.resources.get("AETHERHUES").availableAmount()===1},xR={newSkill:"THUNDER_II_IN_MAGENTA",condition:e=>e.resources.get("AETHERHUES").availableAmount()===2},vk={newSkill:"CREATURE_MOTIF",condition:e=>e.hasResourceAvailable("CREATURE_CANVAS")},g0={newSkill:"POM_MOTIF",condition:e=>!e.hasResourceAvailable("CREATURE_CANVAS")&&e.resources.get("DEPICTIONS").availableAmount()===0},p0={newSkill:"WING_MOTIF",condition:e=>!e.hasResourceAvailable("CREATURE_CANVAS")&&e.resources.get("DEPICTIONS").availableAmount()===1},_0={newSkill:"CLAW_MOTIF",condition:e=>!e.hasResourceAvailable("CREATURE_CANVAS")&&e.resources.get("DEPICTIONS").availableAmount()===2},I0={newSkill:"MAW_MOTIF",condition:e=>!e.hasResourceAvailable("CREATURE_CANVAS")&&e.resources.get("DEPICTIONS").availableAmount()===3},Dk={newSkill:"LIVING_MUSE",condition:e=>!e.hasResourceAvailable("CREATURE_CANVAS")},C0={newSkill:"POM_MUSE",condition:e=>e.hasResourceAvailable("CREATURE_CANVAS")&&e.resources.get("DEPICTIONS").availableAmount()===0},N0={newSkill:"WINGED_MUSE",condition:e=>e.hasResourceAvailable("CREATURE_CANVAS")&&e.resources.get("DEPICTIONS").availableAmount()===1},O0={newSkill:"CLAWED_MUSE",condition:e=>e.hasResourceAvailable("CREATURE_CANVAS")&&e.resources.get("DEPICTIONS").availableAmount()===2},b0={newSkill:"FANGED_MUSE",condition:e=>e.hasResourceAvailable("CREATURE_CANVAS")&&e.resources.get("DEPICTIONS").availableAmount()===3},Mk={newSkill:"MOG_OF_THE_AGES",condition:e=>e.resources.get("PORTRAIT").availableAmount()!==2},Lk={newSkill:"RETRIBUTION_OF_THE_MADEEN",condition:e=>e.resources.get("PORTRAIT").availableAmount()===2},Hk={newSkill:"WEAPON_MOTIF",condition:e=>e.hasResourceAvailable("WEAPON_CANVAS")},y0={newSkill:"HAMMER_MOTIF",condition:e=>!e.hasResourceAvailable("WEAPON_CANVAS")},xk={newSkill:"STEEL_MUSE",condition:e=>!e.hasResourceAvailable("WEAPON_CANVAS")},Uk={newSkill:"STRIKING_MUSE",condition:e=>e.hasResourceAvailable("WEAPON_CANVAS")},kk={newSkill:"LANDSCAPE_MOTIF",condition:e=>e.hasResourceAvailable("LANDSCAPE_CANVAS")},v0={newSkill:"STARRY_SKY_MOTIF",condition:e=>!e.hasResourceAvailable("LANDSCAPE_CANVAS")},Pk={newSkill:"SCENIC_MUSE",condition:e=>!e.hasResourceAvailable("LANDSCAPE_CANVAS")},D0={newSkill:"STARRY_MUSE",condition:e=>e.hasResourceAvailable("LANDSCAPE_CANVAS")};an("FIRE_IN_RED",1,{replaceIf:[CR,NR],baseCastTime:1.5,baseManaCost:300,basePotency:[["NEVER",330],["PICTOMANCY_MASTERY_II",400],["PICTOMANCY_MASTERY_III",450],["PICTOMANCY_MASTERY_IV",520]],applicationDelay:.84,validateAttempt:e=>IR.condition(e)&&!e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller()});an("AERO_IN_GREEN",5,{replaceIf:[IR,NR],startOnHotbar:!1,baseCastTime:1.5,baseManaCost:300,basePotency:[["NEVER",370],["PICTOMANCY_MASTERY_II",440],["PICTOMANCY_MASTERY_III",490],["PICTOMANCY_MASTERY_IV",560]],applicationDelay:.89,validateAttempt:e=>CR.condition(e)&&!e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller(),highlightIf:e=>!e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});an("WATER_IN_BLUE",15,{replaceIf:[IR,CR],startOnHotbar:!1,baseCastTime:1.5,baseManaCost:300,basePotency:[["NEVER",410],["PICTOMANCY_MASTERY_II",480],["PICTOMANCY_MASTERY_III",530],["PICTOMANCY_MASTERY_IV",600]],applicationDelay:.98,validateAttempt:e=>NR.condition(e)&&!e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>{e.doFiller();const t=e.resources.get("PALETTE_GAUGE");t.available(100)&&D.reportWarning(Fe.PaletteOvercap),t.gain(25),e.hasTraitUnlocked("ENHANCED_ARTISTRY")&&e.resources.get("PAINT").gain(1)},highlightIf:e=>!e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});an("FIRE_II_IN_RED",25,{replaceIf:[DR,MR],baseCastTime:1.5,baseManaCost:300,basePotency:[["NEVER",120],["PICTOMANCY_MASTERY_II",150],["PICTOMANCY_MASTERY_IV",180]],falloff:0,applicationDelay:.84,validateAttempt:e=>vR.condition(e)&&!e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller()});an("AERO_II_IN_GREEN",35,{replaceIf:[vR,MR],startOnHotbar:!1,baseCastTime:1.5,baseManaCost:300,basePotency:[["NEVER",140],["PICTOMANCY_MASTERY_II",170],["PICTOMANCY_MASTERY_IV",200]],falloff:0,applicationDelay:.89,validateAttempt:e=>DR.condition(e)&&!e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller(),highlightIf:e=>!e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});an("WATER_II_IN_BLUE",45,{replaceIf:[vR,DR],startOnHotbar:!1,baseCastTime:1.5,baseManaCost:300,basePotency:[["NEVER",170],["PICTOMANCY_MASTERY_II",190],["PICTOMANCY_MASTERY_IV",220]],falloff:0,applicationDelay:.89,validateAttempt:e=>MR.condition(e)&&!e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>{e.doFiller();const t=e.resources.get("PALETTE_GAUGE");t.available(100)&&D.reportWarning(Fe.PaletteOvercap),t.gain(25),e.hasTraitUnlocked("ENHANCED_ARTISTRY")&&e.resources.get("PAINT").gain(1)},highlightIf:e=>!e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});an("BLIZZARD_IN_CYAN",60,{replaceIf:[bR,yR],baseCastTime:2.3,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",590],["PICTOMANCY_MASTERY_II",710],["PICTOMANCY_MASTERY_III",790],["PICTOMANCY_MASTERY_IV",900]],applicationDelay:.75,validateAttempt:e=>OR.condition(e)&&e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller(),highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});an("STONE_IN_YELLOW",60,{replaceIf:[OR,yR],startOnHotbar:!1,baseCastTime:2.3,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",630],["PICTOMANCY_MASTERY_II",750],["PICTOMANCY_MASTERY_III",830],["PICTOMANCY_MASTERY_IV",940]],applicationDelay:.8,validateAttempt:e=>bR.condition(e)&&e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller(),highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});an("THUNDER_IN_MAGENTA",60,{replaceIf:[OR,bR],startOnHotbar:!1,baseCastTime:2.3,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",670],["PICTOMANCY_MASTERY_II",790],["PICTOMANCY_MASTERY_III",870],["PICTOMANCY_MASTERY_IV",980]],applicationDelay:.8,validateAttempt:e=>yR.condition(e)&&e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>{e.doFiller(),e.hasTraitUnlocked("ENHANCED_ARTISTRY")&&e.resources.get("PAINT").gain(1)},highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});an("BLIZZARD_II_IN_CYAN",60,{replaceIf:[HR,xR],baseCastTime:2.3,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",270],["PICTOMANCY_MASTERY_II",330],["PICTOMANCY_MASTERY_IV",360]],falloff:0,applicationDelay:.75,validateAttempt:e=>LR.condition(e)&&e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller(),highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});an("STONE_II_IN_YELLOW",60,{replaceIf:[LR,xR],startOnHotbar:!1,baseCastTime:2.3,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",290],["PICTOMANCY_MASTERY_II",350],["PICTOMANCY_MASTERY_IV",380]],falloff:0,applicationDelay:.8,validateAttempt:e=>HR.condition(e)&&e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller(),highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});an("THUNDER_II_IN_MAGENTA",60,{replaceIf:[LR,HR],startOnHotbar:!1,baseCastTime:2.3,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",310],["PICTOMANCY_MASTERY_II",370],["PICTOMANCY_MASTERY_IV",400]],falloff:0,applicationDelay:.8,validateAttempt:e=>xR.condition(e)&&e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>{e.doFiller(),e.hasTraitUnlocked("ENHANCED_ARTISTRY")&&e.resources.get("PAINT").gain(1)},highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});an("HOLY_IN_WHITE",80,{baseCastTime:0,baseManaCost:300,basePotency:[["NEVER",480],["PICTOMANCY_MASTERY_III",530],["PICTOMANCY_MASTERY_IV",600]],falloff:.65,applicationDelay:1.34,validateAttempt:e=>!e.hasResourceAvailable("MONOCHROME_TONES")&&e.hasResourceAvailable("PAINT"),onConfirm:e=>{e.tryConsumeResource("PAINT"),e.tryConsumeHyperphantasia()},highlightIf:e=>!e.hasResourceAvailable("MONOCHROME_TONES")&&e.hasResourceAvailable("PAINT")});an("COMET_IN_BLACK",90,{baseCastTime:0,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",870],["PICTOMANCY_MASTERY_IV",980]],falloff:.6,applicationDelay:1.87,validateAttempt:e=>e.hasResourceAvailable("MONOCHROME_TONES")&&e.hasResourceAvailable("PAINT"),onConfirm:e=>{e.tryConsumeResource("PAINT"),e.tryConsumeResource("MONOCHROME_TONES"),e.tryConsumeHyperphantasia()},highlightIf:e=>e.hasResourceAvailable("MONOCHROME_TONES")});an("RAINBOW_DRIP",92,{baseCastTime:4,baseRecastTime:6,baseManaCost:400,basePotency:1e3,applicationDelay:1.24,falloff:.85,onConfirm:e=>{e.resources.get("PAINT").gain(1),e.tryConsumeResource("RAINBOW_BRIGHT")},highlightIf:e=>e.hasResourceAvailable("RAINBOW_BRIGHT")});an("STAR_PRISM",100,{baseCastTime:0,baseManaCost:0,basePotency:1100,applicationDelay:1.25,falloff:.7,validateAttempt:e=>e.hasResourceAvailable("STARSTRUCK"),onConfirm:e=>{e.tryConsumeResource("STARSTRUCK"),e.tryConsumeHyperphantasia()},highlightIf:e=>e.hasResourceAvailable("STARSTRUCK")});Ti("SUBTRACTIVE_PALETTE",60,"cd_SUBTRACTIVE",{cooldown:1,validateAttempt:e=>!e.hasResourceAvailable("SUBTRACTIVE_PALETTE")&&(e.hasResourceAvailable("SUBTRACTIVE_SPECTRUM")||e.hasResourceAvailable("PALETTE_GAUGE",50)),onConfirm:e=>{e.tryConsumeResource("SUBTRACTIVE_SPECTRUM")||e.resources.get("PALETTE_GAUGE").consume(50),e.hasResourceAvailable("MONOCHROME_TONES")&&D.reportWarning(Fe.CometOverwrite),e.hasTraitUnlocked("ENHANCED_PALETTE")&&e.resources.get("MONOCHROME_TONES").gain(1),e.resources.get("SUBTRACTIVE_PALETTE").gain(3)},highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_SPECTRUM")||e.resources.get("PALETTE_GAUGE").available(50)});const gI=[vk,g0,p0,_0,I0],Gk=[["CREATURE_MOTIF",30,e=>!1],["POM_MOTIF",30,g0.condition],["WING_MOTIF",30,p0.condition],["CLAW_MOTIF",96,_0.condition],["MAW_MOTIF",96,I0.condition]];Gk.forEach(([e,t,a],l)=>an(e,t,{replaceIf:gI.slice(0,l).concat(gI.slice(l+1)),startOnHotbar:l===0,baseCastTime:3,baseRecastTime:4,baseManaCost:0,applicationDelay:0,validateAttempt:a,onConfirm:s=>s.resources.get("CREATURE_CANVAS").gain(1)}));const pI=[Dk,C0,N0,O0,b0],wk=[["LIVING_MUSE",30,0,0,e=>!1],["POM_MUSE",30,[["NEVER",700],["PICTOMANCY_MASTERY_III",800]],.62,C0.condition],["WINGED_MUSE",30,[["NEVER",700],["PICTOMANCY_MASTERY_III",800]],.98,N0.condition],["CLAWED_MUSE",96,800,.98,O0.condition],["FANGED_MUSE",96,800,1.16,b0.condition]];wk.forEach(([e,t,a,l,s],c)=>Ti(e,t,"cd_LIVING_MUSE",{replaceIf:pI.slice(0,c).concat(pI.slice(c+1)),startOnHotbar:c===0,potency:a,falloff:.7,applicationDelay:l,cooldown:40,validateAttempt:s,onConfirm:d=>{let h=d.resources.get("DEPICTIONS"),E=d.resources.get("PORTRAIT");d.tryConsumeResource("CREATURE_CANVAS"),h.gain(1),e==="WINGED_MUSE"&&(E.overrideCurrentValue(1),d.hasTraitUnlocked("ENHANCED_PICTOMANCY_IV")||h.overrideCurrentValue(0)),e==="FANGED_MUSE"&&(E.overrideCurrentValue(2),h.overrideCurrentValue(0))},maxCharges:3,highlightIf:d=>d.hasResourceAvailable("CREATURE_CANVAS")}));Ti("MOG_OF_THE_AGES",30,"cd_PORTRAIT",{replaceIf:[Lk],potency:[["NEVER",800],["PICTOMANCY_MASTERY_III",1e3]],falloff:.7,applicationDelay:1.15,validateAttempt:e=>e.resources.get("PORTRAIT").availableAmount()===1,onConfirm:e=>e.tryConsumeResource("PORTRAIT"),cooldown:30,highlightIf:e=>e.hasResourceAvailable("PORTRAIT")});Ti("RETRIBUTION_OF_THE_MADEEN",30,"cd_PORTRAIT",{replaceIf:[Mk],startOnHotbar:!1,potency:1100,falloff:.7,applicationDelay:1.3,validateAttempt:e=>e.resources.get("PORTRAIT").availableAmount()===2,onConfirm:e=>e.resources.get("PORTRAIT").overrideCurrentValue(0),cooldown:30,highlightIf:e=>e.hasResourceAvailable("PORTRAIT")});an("WEAPON_MOTIF",50,{replaceIf:[y0],baseCastTime:3,baseRecastTime:4,baseManaCost:0,applicationDelay:0,validateAttempt:e=>!1});an("HAMMER_MOTIF",50,{replaceIf:[Hk],startOnHotbar:!1,baseCastTime:3,baseRecastTime:4,baseManaCost:0,applicationDelay:0,validateAttempt:e=>y0.condition(e)&&!e.hasResourceAvailable("HAMMER_TIME"),onConfirm:e=>e.resources.get("WEAPON_CANVAS").gain(1)});Ti("STEEL_MUSE",50,"cd_STEEL_MUSE",{replaceIf:[Uk],cooldown:60,maxCharges:2,validateAttempt:e=>!1});Ti("STRIKING_MUSE",50,"cd_STEEL_MUSE",{replaceIf:[xk],startOnHotbar:!1,requiresCombat:!0,cooldown:60,maxCharges:2,validateAttempt:e=>e.hasResourceAvailable("WEAPON_CANVAS"),onConfirm:e=>{e.tryConsumeResource("WEAPON_CANVAS"),e.resources.get("HAMMER_TIME").gain(3),e.enqueueResourceDrop("HAMMER_TIME")},highlightIf:e=>e.hasResourceAvailable("WEAPON_CANVAS")});const VA=[{newSkill:"HAMMER_STAMP",condition:e=>!e.hasTraitUnlocked("ENHANCED_PICTOMANCY_II")||e.getHammerStacks()===3},{newSkill:"HAMMER_BRUSH",condition:e=>e.hasTraitUnlocked("ENHANCED_PICTOMANCY_II")&&e.getHammerStacks()===2},{newSkill:"POLISHING_HAMMER",condition:e=>e.hasTraitUnlocked("ENHANCED_PICTOMANCY_II")&&e.getHammerStacks()===1}],Bk=[["HAMMER_STAMP",50,[["NEVER",350],["PICTOMANCY_MASTERY_II",420],["PICTOMANCY_MASTERY_III",460],["PICTOMANCY_MASTERY_IV",480]],1.38],["HAMMER_BRUSH",86,[["NEVER",500],["PICTOMANCY_MASTERY_IV",520]],1.25],["POLISHING_HAMMER",86,[["NEVER",540],["PICTOMANCY_MASTERY_IV",560]],2.1]];Bk.forEach(([e,t,a,l],s)=>an(e,t,{replaceIf:VA.slice(0,s).concat(VA.slice(s+1)),baseCastTime:0,startOnHotbar:s===0,basePotency:a,falloff:.7,applicationDelay:l,validateAttempt:c=>VA[s].condition(c)&&c.hasResourceAvailable("HAMMER_TIME"),onConfirm:c=>c.tryConsumeResource("HAMMER_TIME"),highlightIf:c=>c.hasResourceAvailable("HAMMER_TIME"),jobPotencyModifiers:c=>[me.AutoCDH]}));an("LANDSCAPE_MOTIF",70,{replaceIf:[v0],baseCastTime:3,baseRecastTime:4,baseManaCost:0,applicationDelay:0,validateAttempt:e=>!1});an("STARRY_SKY_MOTIF",70,{replaceIf:[kk],startOnHotbar:!1,baseCastTime:3,baseRecastTime:4,baseManaCost:0,applicationDelay:0,validateAttempt:e=>v0.condition(e)&&!e.hasResourceAvailable("STARRY_MUSE"),onConfirm:e=>e.resources.get("LANDSCAPE_CANVAS").gain(1)});Ti("SCENIC_MUSE",70,"cd_SCENIC_MUSE",{replaceIf:[D0],applicationDelay:0,cooldown:120,validateAttempt:e=>!1});Ti("STARRY_MUSE",70,"cd_SCENIC_MUSE",{replaceIf:[Pk],startOnHotbar:!1,requiresCombat:!0,applicationDelay:0,cooldown:120,validateAttempt:e=>D0.condition(e),onConfirm:e=>{if(e.tryConsumeResource("LANDSCAPE_CANVAS"),e.resources.get("STARRY_MUSE").gain(1),e.hasTraitUnlocked("ENHANCED_PICTOMANCY")){e.resources.get("HYPERPHANTASIA").gain(5),e.resources.get("INSPIRATION").gain(1);const t=Pt("PCT","HYPERPHANTASIA").maxTimeout;e.enqueueResourceDrop("HYPERPHANTASIA",t),e.enqueueResourceDrop("INSPIRATION",t)}e.hasTraitUnlocked("ENHANCED_PICTOMANCY_V")&&(e.resources.get("STARSTRUCK").gain(1),e.enqueueResourceDrop("STARSTRUCK")),e.resources.get("SUBTRACTIVE_SPECTRUM").gain(1),e.enqueueResourceDrop("STARRY_MUSE"),e.enqueueResourceDrop("SUBTRACTIVE_SPECTRUM")},highlightIf:e=>e.hasResourceAvailable("LANDSCAPE_CANVAS")});ze("PCT","TEMPERA_COAT",10,"cd_TEMPERA_COAT",{rscType:"TEMPERA_COAT",replaceIf:[{newSkill:"TEMPERA_COAT_POP",condition:e=>e.hasResourceAvailable("TEMPERA_COAT")}],applicationDelay:0,cooldown:120});Ti("TEMPERA_GRASSA",88,"cd_GRASSA",{replaceIf:[{newSkill:"TEMPERA_GRASSA_POP",condition:e=>e.hasResourceAvailable("TEMPERA_GRASSA")}],applicationDelay:0,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("TEMPERA_COAT"),onConfirm:e=>{e.tryConsumeResource("TEMPERA_COAT"),e.resources.get("TEMPERA_GRASSA").gain(1),e.enqueueResourceDrop("TEMPERA_GRASSA")},highlightIf:e=>e.hasResourceAvailable("TEMPERA_COAT")});Ti("TEMPERA_COAT_POP",10,"cd_TEMPERA_POP",{replaceIf:[{newSkill:"TEMPERA_GRASSA_POP",condition:e=>e.hasResourceAvailable("TEMPERA_GRASSA")}],startOnHotbar:!1,applicationDelay:0,animationLock:li,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("TEMPERA_COAT"),onConfirm:e=>{e.tryConsumeResource("TEMPERA_COAT");let t=e.cooldowns.get("cd_TEMPERA_COAT").timeTillNextStackAvailable();console.assert(t>0,"attempted to pop Tempera Coat when no timer for Tempera Coat CD was active"),e.cooldowns.get("cd_TEMPERA_COAT").overrideTimeTillNextStack(Math.max(0,t-60))},highlightIf:e=>e.hasResourceAvailable("TEMPERA_COAT")});Ti("TEMPERA_GRASSA_POP",10,"cd_TEMPERA_POP",{replaceIf:[{newSkill:"TEMPERA_COAT_POP",condition:e=>e.hasResourceAvailable("TEMPERA_COAT")}],startOnHotbar:!1,applicationDelay:0,animationLock:li,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("TEMPERA_GRASSA"),onConfirm:e=>{e.tryConsumeResource("TEMPERA_GRASSA");let t=e.cooldowns.get("cd_TEMPERA_COAT").timeTillNextStackAvailable();console.assert(t>0,"attempted to pop Tempera Grassa when no timer for Tempera Coat CD was active"),e.cooldowns.get("cd_TEMPERA_COAT").overrideTimeTillNextStack(Math.max(0,t-30))},highlightIf:e=>e.hasResourceAvailable("TEMPERA_GRASSA")});ze("PCT","SMUDGE",20,"cd_SMUDGE",{rscType:"SMUDGE",applicationDelay:0,cooldown:20,animationLock:jn});Object.keys(Xm).forEach(e=>$n(e,`RDM/${ot[e].name}.png`));class Fk extends $t{jobSpecificSelfTargetedBuffViewProps(){return[...Object.keys(Xm).map(t=>this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){const a=this.state.resources,l=a.get("WHITE_MANA").availableAmount(),s=a.get("BLACK_MANA").availableAmount(),c=a.get("MANA_STACKS").availableAmount();return[{kind:"bar",name:_({en:"white mana",zh:"白魔元"}),color:t.rdm.whiteMana,progress:l/100,valueString:l.toFixed(0)},{kind:"bar",name:_({en:"black mana",zh:"黑魔元"}),color:t.rdm.blackMana,progress:s/100,valueString:s.toFixed(0)},{kind:"counter",name:_({en:"mana stacks",zh:"魔元集"}),color:t.rdm.manaStack,currentStacks:c,maxStacks:3}]}}const Yn=(e,t,a)=>{tt("RDM",e,t,a??{})};Yn("WHITE_MANA",100);Yn("BLACK_MANA",100);Yn("MANA_STACKS",3);Yn("ACCELERATION",1,{timeout:20});Yn("DUALCAST",1,{timeout:15});Yn("EMBOLDEN",1,{timeout:20});Yn("GRAND_IMPACT_READY",1,{timeout:30,warningOnTimeout:Fe.GIDrop});Yn("MAGICK_BARRIER",1,{timeout:10});Yn("MAGICKED_SWORDPLAY",3,{timeout:30,warningOnTimeout:Fe.MagickedSwordplayDrop});Yn("MANAFICATION",6,{timeout:30,warningOnTimeout:Fe.ManaficDrop});Yn("PREFULGENCE_READY",1,{timeout:30,warningOnTimeout:Fe.PrefulgenceDrop});Yn("THORNED_FLOURISH",1,{timeout:30,warningOnTimeout:Fe.ViceOfThornsDrop});Yn("VERFIRE_READY",1,{timeout:30});Yn("VERSTONE_READY",1,{timeout:30});Yn("RDM_MELEE_COUNTER",2,{timeout:30});Yn("RDM_FINISHER_COUNTER",2,{timeout:30});Yn("RDM_AOE_COUNTER",2,{timeout:30});const M0=["IMPACT","VERAERO","VERTHUNDER","VERAERO_III","VERTHUNDER_III"],L0=["VERHOLY","VERFLARE","SCORCH","RESOLUTION"];class jk extends Jt{constructor(t){super(t);const a=this.hasTraitUnlocked("ENHANCED_SWIFTCAST")?40:60,l=this.hasTraitUnlocked("RED_MAGIC_MASTERY")?35:45,s=this.hasTraitUnlocked("ENHANCED_MANAFICATION")?110:120;[new Ke("cd_SWIFTCAST",a,1,1),new Ke("cd_CONTRE_SIXTE",l,1,1),new Ke("cd_MANAFICATION",s,1,1)].forEach(h=>this.cooldowns.set(h));const c=this.hasTraitUnlocked("ENHANCED_ACCELERATION")?2:1;this.cooldowns.set(new Ke("cd_ACCELERATION",55,c,c));const d=this.hasTraitUnlocked("ENHANCED_MANAFICATION_II")?6:this.hasTraitUnlocked("ENHANCED_MANAFICATION")?5:4;this.resources.set(new ei("MANAFICATION",d,0)),this.registerRecurringEvents()}get statusPropsGenerator(){return new Fk(this)}jobSpecificAddDamageBuffCovers(t,a){this.hasResourceAvailable("EMBOLDEN")&&a.aspect!==pe.Physical&&t.addBuff(k.Embolden),(this.hasResourceAvailable("MANAFICATION")&&a.kind==="spell"||a.kind==="weaponskill")&&t.addBuff(k.Manafication),a.name==="IMPACT"&&this.hasResourceAvailable("ACCELERATION")&&t.addBuff(k.Acceleration)}hasThreeManaStacks(){return this.hasResourceAvailable("MANA_STACKS",3)}getFinisherCounter(){return this.resources.get("RDM_FINISHER_COUNTER").availableAmount()}processDualcastAndInstants(t){L0.includes(t)||t==="GRAND_IMPACT"&&this.tryConsumeResource("GRAND_IMPACT_READY")||M0.includes(t)&&this.tryConsumeResource("ACCELERATION")||this.tryConsumeResource("DUALCAST")||this.tryConsumeResource("SWIFTCAST")||(this.resources.get("DUALCAST").gain(1),this.enqueueResourceDrop("DUALCAST"))}gainColorMana(t){const a=this.resources.get("WHITE_MANA"),l=this.resources.get("BLACK_MANA");if(t.w){const s=l.availableAmount()-a.availableAmount()>30;a.gain(s?Math.floor(t.w/2):t.w)}if(t.b){const s=a.availableAmount()-l.availableAmount()>30;l.gain(s?Math.floor(t.b/2):t.b)}Math.abs(l.availableAmount()-a.availableAmount())>30&&D.reportWarning(Fe.ImbalancedMana)}colorManaExceeds(t){return this.hasResourceAvailable("MAGICKED_SWORDPLAY")||this.hasResourceAvailable("WHITE_MANA",t)&&this.hasResourceAvailable("BLACK_MANA",t)}consumeColorMana(t){this.hasResourceAvailable("MAGICKED_SWORDPLAY")?this.tryConsumeResource("MAGICKED_SWORDPLAY"):(this.resources.get("WHITE_MANA").consume(t),this.resources.get("BLACK_MANA").consume(t))}gainVerproc(t){let a=Pt("RDM",t).maxTimeout;this.resources.get(t).available(1)?this.resources.get(t).overrideTimer(this,a):(this.resources.get(t).gain(1),this.enqueueResourceDrop(t,a))}maybeGainVerproc(t,a=.5){let l=this.rng();(this.config.procMode===jt.Always||this.config.procMode===jt.RNG&&l<a)&&this.gainVerproc(t)}processComboStatus(t){const a=this.resources.get("MANA_STACKS"),l=this.config.level>=80,s=this.config.level>=90,c=this.resources.get("RDM_MELEE_COUNTER").availableAmount(),d=this.resources.get("RDM_FINISHER_COUNTER").availableAmount(),h=this.resources.get("RDM_AOE_COUNTER").availableAmount(),E=c+d+h>0;let A;t==="ENCHANTED_RIPOSTE"||t==="RIPOSTE"?(E&&D.reportWarning(Fe.ComboBreak),A=[1,0,0],t==="ENCHANTED_RIPOSTE"&&a.gain(1)):t==="ENCHANTED_ZWERCHHAU"||t==="ZWERCHHAU"?(E&&c!==1&&D.reportWarning(Fe.ComboBreak),A=[c===1?2:0,0,0],t==="ENCHANTED_ZWERCHHAU"&&a.gain(1)):t==="ENCHANTED_REDOUBLEMENT"||t==="REDOUBLEMENT"?(E&&c!==2&&D.reportWarning(Fe.ComboBreak),A=[0,0,0],t==="ENCHANTED_REDOUBLEMENT"&&a.gain(1)):t==="VERHOLY"||t==="VERFLARE"?(A=[0,l?1:0,0],a.consume(3)):t==="SCORCH"?A=[0,s?2:0,0]:t==="RESOLUTION"?A=[0,0,0]:t==="ENCHANTED_MOULINET"?(c+d>0&&D.reportWarning(Fe.ComboBreak),A=[0,0,1],a.gain(1)):t==="ENCHANTED_MOULINET_II"?(A=[0,0,2],a.gain(1)):t==="ENCHANTED_MOULINET_III"?(A=[0,0,0],a.gain(1)):t==="ENCHANTED_REPRISE"?A=[c,d,h]:(E&&D.reportWarning(Fe.ComboBreak),A=[0,0,0],a.consume(a.availableAmount())),this.setComboState("RDM_MELEE_COUNTER",A[0]),this.setComboState("RDM_FINISHER_COUNTER",A[1]),this.setComboState("RDM_AOE_COUNTER",A[2])}processManafic(){this.tryConsumeResource("MANAFICATION")&&!this.hasResourceAvailable("MANAFICATION")&&this.hasTraitUnlocked("ENHANCED_MANAFICATION_III")&&(this.resources.get("PREFULGENCE_READY").gain(1),this.enqueueResourceDrop("PREFULGENCE_READY"))}}const Ln=(e,t,a)=>{const l=ut(s=>s.processManafic(),a.onConfirm??je,s=>s.processDualcastAndInstants(e),s=>s.processComboStatus(e));return oo("RDM",e,t,{...a,aspect:a.isPhysical?pe.Physical:void 0,castTime:s=>s.config.adjustedCastTime(a.baseCastTime),recastTime:s=>s.config.adjustedGCD(),manaCost:a.baseManaCost??0,potency:a.basePotency,jobPotencyModifiers:s=>{const c=[];return s.hasResourceAvailable("EMBOLDEN")&&c.push(me.EmboldenMagic),s.hasResourceAvailable("MANAFICATION")&&c.push(me.Manafication),a.jobPotencyModifiers&&c.push(...a.jobPotencyModifiers(s)),c},isInstantFn:s=>L0.includes(e)||e==="GRAND_IMPACT"||M0.includes(e)&&s.hasResourceAvailable("ACCELERATION")||s.hasResourceAvailable("DUALCAST")||s.hasResourceAvailable("SWIFTCAST"),onConfirm:l})},si=(e,t,a)=>{const l=!e.toString().startsWith("ENCHANTED"),s=ut(c=>c.processManafic(),c=>c.processComboStatus(e),a.onConfirm??je);return Mi("RDM",e,t,{...a,aspect:l?pe.Physical:void 0,onConfirm:s,jobPotencyModifiers:c=>{const d=[];return a.combo&&c.resources.get(a.combo.resource).availableAmount()===a.combo.resourceValue&&d.push(dl(Xe(c,a.combo.potency)-Xe(c,a.potency))),l||(c.hasResourceAvailable("EMBOLDEN")&&d.push(me.EmboldenMagic),c.hasResourceAvailable("MANAFICATION")&&d.push(me.Manafication)),d}})},ss=(e,t,a,l)=>Nt("RDM",e,t,a,{aspect:l.isPhysical?pe.Physical:void 0,jobPotencyModifiers:s=>!l.isPhysical&&s.hasResourceAvailable("EMBOLDEN")?[me.EmboldenMagic]:[],...l}),UR={newSkill:"SCORCH",condition:e=>e.getFinisherCounter()===1},kR={newSkill:"RESOLUTION",condition:e=>e.getFinisherCounter()===2},eu={newSkill:"GRAND_IMPACT",condition:e=>e.getFinisherCounter()<1&&e.hasResourceAvailable("GRAND_IMPACT_READY")};Ln("JOLT_II",62,{replaceIf:[UR,kR,eu],autoUpgrade:{trait:"RED_MAGIC_MASTERY_III",otherSkill:"JOLT_III"},baseCastTime:2,baseManaCost:200,applicationDelay:.8,basePotency:280,validateAttempt:e=>e.getFinisherCounter()<1&&!e.hasResourceAvailable("GRAND_IMPACT_READY"),onConfirm:e=>e.gainColorMana({w:2,b:2})});Ln("JOLT_III",84,{replaceIf:[UR,kR,eu],autoDowngrade:{trait:"RED_MAGIC_MASTERY_III",otherSkill:"JOLT_II"},baseCastTime:2,baseManaCost:200,applicationDelay:.8,basePotency:360,validateAttempt:e=>e.getFinisherCounter()<1&&!e.hasResourceAvailable("GRAND_IMPACT_READY"),onConfirm:e=>e.gainColorMana({w:2,b:2})});const H0=[["NEVER",300],["RED_MAGIC_MASTERY_II",340],["RED_MAGIC_MASTERY_III",380]];Ln("VERSTONE",30,{baseCastTime:2,baseManaCost:200,applicationDelay:.8,basePotency:H0,validateAttempt:e=>e.hasResourceAvailable("VERSTONE_READY"),onConfirm:e=>{e.gainColorMana({w:5}),e.tryConsumeResource("VERSTONE_READY")},highlightIf:e=>e.hasResourceAvailable("VERSTONE_READY")});Ln("VERFIRE",26,{baseCastTime:2,baseManaCost:200,applicationDelay:.8,basePotency:H0,validateAttempt:e=>e.hasResourceAvailable("VERFIRE_READY"),onConfirm:e=>{e.gainColorMana({b:5}),e.tryConsumeResource("VERFIRE_READY")},highlightIf:e=>e.hasResourceAvailable("VERFIRE_READY")});const PR={newSkill:"VERHOLY",condition:e=>e.hasThreeManaStacks()},GR={newSkill:"VERFLARE",condition:e=>e.hasThreeManaStacks()};Ln("VERAERO",10,{replaceIf:[PR],autoUpgrade:{trait:"RED_MAGIC_MASTERY_II",otherSkill:"VERAERO_III"},baseCastTime:5,baseManaCost:400,applicationDelay:.76,basePotency:360,validateAttempt:e=>!e.hasThreeManaStacks(),onConfirm:e=>{e.gainColorMana({w:6}),e.hasResourceAvailable("ACCELERATION")?e.gainVerproc("VERSTONE_READY"):e.maybeGainVerproc("VERSTONE_READY")}});Ln("VERTHUNDER",4,{replaceIf:[GR],autoUpgrade:{trait:"RED_MAGIC_MASTERY_II",otherSkill:"VERTHUNDER_III"},baseCastTime:5,baseManaCost:400,applicationDelay:.76,basePotency:360,validateAttempt:e=>!e.hasThreeManaStacks(),onConfirm:e=>{e.gainColorMana({b:6}),e.hasResourceAvailable("ACCELERATION")?e.gainVerproc("VERFIRE_READY"):e.maybeGainVerproc("VERFIRE_READY")}});const x0=[["NEVER",380],["ENCHANTED_BLADE_MASTERY",440]];Ln("VERAERO_III",82,{replaceIf:[PR],autoDowngrade:{trait:"RED_MAGIC_MASTERY_II",otherSkill:"VERAERO"},baseCastTime:5,baseManaCost:400,applicationDelay:.76,basePotency:x0,validateAttempt:e=>!e.hasThreeManaStacks(),onConfirm:e=>{e.gainColorMana({w:6}),e.hasResourceAvailable("ACCELERATION")?e.gainVerproc("VERSTONE_READY"):e.maybeGainVerproc("VERSTONE_READY")}});Ln("VERTHUNDER_III",82,{replaceIf:[GR],autoDowngrade:{trait:"RED_MAGIC_MASTERY_II",otherSkill:"VERTHUNDER"},baseCastTime:5,baseManaCost:400,applicationDelay:.76,basePotency:x0,validateAttempt:e=>!e.hasThreeManaStacks(),onConfirm:e=>{e.gainColorMana({b:6}),e.hasResourceAvailable("ACCELERATION")?e.gainVerproc("VERFIRE_READY"):e.maybeGainVerproc("VERFIRE_READY")}});const U0=[["NEVER",100],["RED_MAGIC_MASTERY",120],["RED_MAGIC_MASTERY_III",140]];Ln("VERAERO_II",22,{replaceIf:[PR],baseCastTime:2,baseManaCost:400,applicationDelay:.8,basePotency:U0,falloff:0,validateAttempt:e=>!e.hasThreeManaStacks(),onConfirm:e=>e.gainColorMana({w:7})});Ln("VERTHUNDER_II",18,{replaceIf:[GR],baseCastTime:2,baseManaCost:400,falloff:0,applicationDelay:.8,basePotency:U0,validateAttempt:e=>!e.hasThreeManaStacks(),onConfirm:e=>e.gainColorMana({b:7})});Ln("IMPACT",66,{replaceIf:[UR,kR,eu],baseCastTime:5,baseManaCost:400,falloff:0,applicationDelay:.76,basePotency:[["NEVER",200],["RED_MAGIC_MASTERY_III",210]],jobPotencyModifiers:e=>e.hasResourceAvailable("ACCELERATION")?[me.AccelerationImpact]:[],validateAttempt:e=>e.getFinisherCounter()<1&&!e.hasResourceAvailable("GRAND_IMPACT_READY"),onConfirm:e=>e.gainColorMana({w:3,b:3})});Ln("GRAND_IMPACT",96,{startOnHotbar:!1,baseCastTime:0,baseManaCost:0,basePotency:600,falloff:.6,applicationDelay:1.55,validateAttempt:eu.condition,highlightIf:eu.condition,onConfirm:e=>e.gainColorMana({w:3,b:3})});si("RIPOSTE",1,{replaceIf:[{newSkill:"ENCHANTED_RIPOSTE",condition:e=>e.colorManaExceeds(20)}],applicationDelay:.62,potency:130,recastTime:2.5,validateAttempt:e=>!e.colorManaExceeds(20)});si("ZWERCHHAU",35,{replaceIf:[{newSkill:"ENCHANTED_ZWERCHHAU",condition:e=>e.colorManaExceeds(15)}],applicationDelay:.62,potency:100,combo:{potency:150,resource:"RDM_MELEE_COUNTER",resourceValue:1},recastTime:2.5,validateAttempt:e=>!e.colorManaExceeds(15),highlightIf:e=>e.resources.get("RDM_MELEE_COUNTER").availableAmount()===1});si("REDOUBLEMENT",50,{replaceIf:[{newSkill:"ENCHANTED_REDOUBLEMENT",condition:e=>e.colorManaExceeds(15)}],applicationDelay:.62,potency:100,combo:{potency:230,resource:"RDM_MELEE_COUNTER",resourceValue:2},recastTime:2.5,validateAttempt:e=>!e.colorManaExceeds(15),highlightIf:e=>e.resources.get("RDM_MELEE_COUNTER").availableAmount()===2});si("ENCHANTED_RIPOSTE",50,{startOnHotbar:!1,replaceIf:[{newSkill:"RIPOSTE",condition:e=>!e.colorManaExceeds(20)}],applicationDelay:.62,potency:[["NEVER",220],["RED_MAGIC_MASTERY_III",280],["ENCHANTED_BLADE_MASTERY",300]],recastTime:1.5,validateAttempt:e=>e.colorManaExceeds(20),onConfirm:e=>e.consumeColorMana(20)});si("ENCHANTED_ZWERCHHAU",50,{startOnHotbar:!1,replaceIf:[{newSkill:"ZWERCHHAU",condition:e=>!e.colorManaExceeds(15)}],applicationDelay:.62,potency:[["NEVER",100],["RED_MAGIC_MASTERY_III",150],["ENCHANTED_BLADE_MASTERY",170]],combo:{potency:[["NEVER",290],["RED_MAGIC_MASTERY_III",340],["ENCHANTED_BLADE_MASTERY",360]],resource:"RDM_MELEE_COUNTER",resourceValue:1},recastTime:1.5,validateAttempt:e=>e.colorManaExceeds(15),onConfirm:e=>e.consumeColorMana(15),highlightIf:e=>e.resources.get("RDM_MELEE_COUNTER").availableAmount()===1});si("ENCHANTED_REDOUBLEMENT",50,{startOnHotbar:!1,replaceIf:[{newSkill:"REDOUBLEMENT",condition:e=>!e.colorManaExceeds(15)}],applicationDelay:.62,potency:[["NEVER",100],["RED_MAGIC_MASTERY_III",130],["ENCHANTED_BLADE_MASTERY",170]],combo:{potency:[["NEVER",470],["RED_MAGIC_MASTERY_III",500],["ENCHANTED_BLADE_MASTERY",530]],resource:"RDM_MELEE_COUNTER",resourceValue:2},recastTime:2.2,validateAttempt:e=>e.colorManaExceeds(15),onConfirm:e=>e.consumeColorMana(15),highlightIf:e=>e.resources.get("RDM_MELEE_COUNTER").availableAmount()===2});const gf=e=>e.resources.get("WHITE_MANA").available(5)&&e.resources.get("BLACK_MANA").available(5);si("REPRISE",76,{replaceIf:[{newSkill:"ENCHANTED_REPRISE",condition:e=>gf(e)}],applicationDelay:.62,potency:100,recastTime:2.5,validateAttempt:e=>!gf(e)});si("ENCHANTED_REPRISE",76,{startOnHotbar:!1,replaceIf:[{newSkill:"REPRISE",condition:e=>!gf(e)}],applicationDelay:.62,potency:[["NEVER",290],["RED_MAGIC_MASTERY_III",340],["ENCHANTED_BLADE_MASTERY",420]],recastTime:2.5,validateAttempt:e=>gf(e),onConfirm:e=>{e.resources.get("WHITE_MANA").consume(5),e.resources.get("BLACK_MANA").consume(5)}});const yn=[{newSkill:"MOULINET",condition:e=>e.resources.get("RDM_AOE_COUNTER").availableAmount()===0&&!e.colorManaExceeds(20)||!e.colorManaExceeds(15)},{newSkill:"ENCHANTED_MOULINET",condition:e=>e.colorManaExceeds(20)&&e.resources.get("RDM_AOE_COUNTER").availableAmount()===0},{newSkill:"ENCHANTED_MOULINET_II",condition:e=>e.colorManaExceeds(15)&&e.resources.get("RDM_AOE_COUNTER").availableAmount()===1},{newSkill:"ENCHANTED_MOULINET_III",condition:e=>e.colorManaExceeds(15)&&e.resources.get("RDM_AOE_COUNTER").availableAmount()===2}];si("MOULINET",52,{replaceIf:[yn[1],yn[2],yn[3]],falloff:0,applicationDelay:.8,potency:60,recastTime:2.5,validateAttempt:yn[0].condition});si("ENCHANTED_MOULINET",52,{startOnHotbar:!1,replaceIf:[yn[0],yn[2],yn[3]],falloff:0,applicationDelay:.8,potency:130,recastTime:1.5,validateAttempt:yn[1].condition,onConfirm:e=>e.consumeColorMana(20)});si("ENCHANTED_MOULINET_II",52,{startOnHotbar:!1,replaceIf:[yn[0],yn[1],yn[3]],falloff:0,applicationDelay:.8,potency:140,recastTime:1.5,validateAttempt:yn[2].condition,onConfirm:e=>e.consumeColorMana(15),highlightIf:yn[2].condition});si("ENCHANTED_MOULINET_III",52,{startOnHotbar:!1,replaceIf:[yn[0],yn[1],yn[2]],falloff:0,applicationDelay:.8,potency:150,recastTime:1.5,validateAttempt:yn[3].condition,onConfirm:e=>e.consumeColorMana(15),highlightIf:yn[3].condition});const k0=[["NEVER",600],["ENCHANTED_BLADE_MASTERY",650]];Ln("VERHOLY",70,{startOnHotbar:!1,baseCastTime:0,baseManaCost:400,falloff:.6,applicationDelay:1.43,basePotency:k0,validateAttempt:e=>e.hasThreeManaStacks(),highlightIf:e=>e.hasThreeManaStacks(),onConfirm:e=>{e.resources.get("WHITE_MANA").availableAmount()<e.resources.get("BLACK_MANA").availableAmount()?e.gainVerproc("VERSTONE_READY"):e.maybeGainVerproc("VERSTONE_READY",.2),e.gainColorMana({w:11})}});Ln("VERFLARE",68,{startOnHotbar:!1,baseCastTime:0,baseManaCost:400,falloff:.6,applicationDelay:1.43,basePotency:k0,validateAttempt:e=>e.hasThreeManaStacks(),highlightIf:e=>e.hasThreeManaStacks(),onConfirm:e=>{e.resources.get("BLACK_MANA").availableAmount()<e.resources.get("WHITE_MANA").availableAmount()?e.gainVerproc("VERFIRE_READY"):e.maybeGainVerproc("VERFIRE_READY",.2),e.gainColorMana({b:11})}});Ln("SCORCH",80,{startOnHotbar:!1,baseCastTime:0,baseManaCost:400,falloff:.6,applicationDelay:1.83,basePotency:[["NEVER",680],["ENCHANTED_BLADE_MASTERY",750]],validateAttempt:e=>e.getFinisherCounter()===1,onConfirm:e=>e.gainColorMana({w:4,b:4}),highlightIf:e=>e.getFinisherCounter()===1});Ln("RESOLUTION",90,{startOnHotbar:!1,baseCastTime:0,baseManaCost:400,falloff:.6,applicationDelay:1.56,basePotency:[["NEVER",750],["ENCHANTED_BLADE_MASTERY",850]],validateAttempt:e=>e.getFinisherCounter()===2,onConfirm:e=>e.gainColorMana({w:4,b:4}),highlightIf:e=>e.getFinisherCounter()===2});Ln("VERCURE",54,{baseCastTime:2,baseManaCost:500,applicationDelay:.8,basePotency:0});Ln("VERRAISE",64,{baseCastTime:10,baseManaCost:2400,applicationDelay:.81,basePotency:0});ze("RDM","EMBOLDEN",58,"cd_EMBOLDEN",{replaceIf:[{newSkill:"VICE_OF_THORNS",condition:e=>e.hasResourceAvailable("THORNED_FLOURISH")}],rscType:"EMBOLDEN",applicationDelay:.62,cooldown:120,onApplication:e=>{e.hasTraitUnlocked("ENHANCED_EMBOLDEN")&&(e.resources.get("THORNED_FLOURISH").gain(1),e.enqueueResourceDrop("THORNED_FLOURISH"))}});ze("RDM","MANAFICATION",60,"cd_MANAFICATION",{replaceIf:[{newSkill:"PREFULGENCE",condition:e=>e.hasResourceAvailable("PREFULGENCE_READY")}],rscType:"MANAFICATION",requiresCombat:!0,applicationDelay:0,cooldown:110,onApplication:e=>{e.resources.get("MAGICKED_SWORDPLAY").gain(3),e.enqueueResourceDrop("MAGICKED_SWORDPLAY"),(e.hasResourceAvailable("RDM_MELEE_COUNTER")||e.hasResourceAvailable("RDM_FINISHER_COUNTER")||e.hasResourceAvailable("RDM_AOE_COUNTER"))&&D.reportWarning(Fe.ComboBreak),e.setComboState("RDM_MELEE_COUNTER",0),e.setComboState("RDM_FINISHER_COUNTER",0),e.setComboState("RDM_AOE_COUNTER",0)}});ss("CORPS_A_CORPS",6,"cd_CORPS_A_CORPS",{isPhysical:!0,applicationDelay:.62,potency:130,cooldown:35,maxCharges:2,animationLock:jn});const P0=[["NEVER",130],["ENHANCED_DISPLACEMENT",180]];ss("ENGAGEMENT",40,"cd_DISPLACEMENT",{isPhysical:!0,applicationDelay:.62,potency:P0,cooldown:35,maxCharges:2});ss("DISPLACEMENT",40,"cd_DISPLACEMENT",{isPhysical:!0,applicationDelay:.62,potency:P0,cooldown:35,maxCharges:2,animationLock:jn});ss("FLECHE",45,"cd_FLECHE",{isPhysical:!0,applicationDelay:1.16,potency:[["NEVER",460],["ENCHANTED_BLADE_MASTERY",480]],cooldown:25});ss("CONTRE_SIXTE",56,"cd_CONTRE_SIXTE",{isPhysical:!0,falloff:0,applicationDelay:1.16,potency:[["NEVER",380],["ENCHANTED_BLADE_MASTERY",420]],cooldown:35});ze("RDM","ACCELERATION",50,"cd_ACCELERATION",{rscType:"ACCELERATION",applicationDelay:0,cooldown:55,maxCharges:2,onApplication:e=>{e.hasTraitUnlocked("ENHANCED_ACCELERATION_II")&&(e.hasResourceAvailable("GRAND_IMPACT_READY")&&D.reportWarning(Fe.GIOverwrite),e.resources.get("GRAND_IMPACT_READY").gain(1),e.enqueueResourceDrop("GRAND_IMPACT_READY"))}});ze("RDM","MAGICK_BARRIER",86,"cd_MAGICK_BARRIER",{rscType:"MAGICK_BARRIER",applicationDelay:0,cooldown:120});ss("VICE_OF_THORNS",92,"cd_VICE_OF_THORNS",{startOnHotbar:!1,falloff:.6,applicationDelay:.8,potency:800,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("THORNED_FLOURISH"),onConfirm:e=>e.tryConsumeResource("THORNED_FLOURISH"),highlightIf:e=>e.hasResourceAvailable("THORNED_FLOURISH")});ss("PREFULGENCE",100,"cd_PREFULGENCE",{startOnHotbar:!1,falloff:.6,applicationDelay:1.42,potency:1e3,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("PREFULGENCE_READY"),onConfirm:e=>e.tryConsumeResource("PREFULGENCE_READY"),highlightIf:e=>e.hasResourceAvailable("PREFULGENCE_READY")});Object.keys(Zm).forEach(e=>$n(e,`RPR/${ot[e].name}.png`));class zk extends $t{jobSpecificOtherTargetedBuffViewProps(){return[this.makeCommonTimer("DEATHS_DESIGN",!1)]}jobSpecificSelfTargetedBuffViewProps(){return[...Object.keys(Zm).filter(t=>t!=="DEATHS_DESIGN").map(t=>t==="SOULSOW"?this.makeCommonTimerless(t):this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){var T,S;const a=this.state.resources,l=a.get("SOUL").availableAmount(),s=a.get("SHROUD").availableAmount(),c=a.get("LEMURE_SHROUD").availableAmount(),d=a.get("VOID_SHROUD").availableAmount(),h=a.get("RPR_COMBO"),E=a.get("RPR_AOE_COMBO"),A=h.available(1)?(T=h.pendingChange)==null?void 0:T.timeTillEvent:E.available(1)?(S=E.pendingChange)==null?void 0:S.timeTillEvent:void 0,R=[{kind:"text",name:_({en:"Combo Timer",zh:"连击监控"}),text:(A==null?void 0:A.toFixed(3))??"N/A"},{kind:"bar",name:_({en:"Soul Gauge",zh:"灵魂量谱"}),color:l<50?t.rpr.soulGaugeLow:t.rpr.soulGaugeHigh,progress:l/100,valueString:Math.floor(l)+"/100"}];return this.state.hasTraitUnlocked("SHROUD_GAUGE")&&R.push({kind:"bar",name:_({en:"Shroud Gauge",zh:"魂衣量谱"}),color:s<50?t.rpr.shroudGaugeLow:t.rpr.shroudGaugeHigh,progress:s/100,valueString:Math.floor(s)+"/100"},{kind:"counter",name:_({en:"Lemure Shroud",zh:"夜游魂"}),color:t.rpr.lemureShroud,currentStacks:c,maxStacks:5}),this.state.hasTraitUnlocked("VOID_SOUL")&&R.push({kind:"counter",name:_({en:"Void Shroud",zh:"虚无魂"}),color:d<2?t.rpr.voidShroudLow:t.rpr.voidShroudHigh,currentStacks:d,maxStacks:5}),R}}function Tt(e,t,a){tt("RPR",e,t,a??{})}Tt("SOUL",100);Tt("SHROUD",100);Tt("DEATHS_DESIGN",1,{});Tt("SOUL_REAVER",2,{timeout:30});Tt("ENHANCED_GIBBET",1,{timeout:60});Tt("ENHANCED_GALLOWS",1,{timeout:60});Tt("EXECUTIONER",2,{timeout:30});Tt("ENSHROUDED",1,{timeout:30});Tt("LEMURE_SHROUD",5,{timeout:30});Tt("VOID_SHROUD",5);Tt("OBLATIO",1,{timeout:30});Tt("ENHANCED_VOID_REAPING",1,{timeout:30});Tt("ENHANCED_CROSS_REAPING",1,{timeout:30});Tt("IDEAL_HOST",1,{timeout:30});Tt("PERFECTIO_OCCULTA",1,{timeout:30});Tt("PERFECTIO_PARATA",1,{timeout:30});Tt("ARCANE_CIRCLE",1,{timeout:20});Tt("CIRCLE_OF_SACRIFICE",1,{timeout:5});Tt("BLOODSOWN_CIRCLE",1,{timeout:6});Tt("IMMORTAL_SACRIFICE",8,{timeout:30});Tt("ARCANE_CREST",1,{timeout:5});Tt("CREST_OF_TIME_BORROWED",1,{timeout:5});Tt("CREST_OF_TIME_RETURNED",1,{timeout:15});Tt("SOULSOW",1,{default:1});Tt("THRESHOLD",1,{timeout:10});Tt("ENHANCED_HARPE",1,{timeout:10});Tt("HELLS_INGRESS_USED",1);Tt("RPR_COMBO",2,{timeout:30});Tt("RPR_AOE_COMBO",1,{timeout:30});class Yk extends Jt{constructor(t){super(t);const a=this.hasTraitUnlocked("TEMPERED_SOUL")?2:1;this.cooldowns.set(new Ke("cd_SOUL_SLICE",30,a,a)),this.registerRecurringEvents()}get statusPropsGenerator(){return new zk(this)}jobSpecificAddDamageBuffCovers(t,a){this.hasResourceAvailable("ARCANE_CIRCLE")&&t.addBuff(k.ArcaneCircle),this.hasResourceAvailable("DEATHS_DESIGN")&&t.addBuff(k.DeathsDesign)}refreshDeathsDesign(){const t=this.resources.get("DEATHS_DESIGN"),a=Math.min(this.resources.timeTillReady("DEATHS_DESIGN")+30,60);if(t.available(1)){t.overrideTimer(this,a);return}t.gain(1),this.resources.addResourceEvent({rscType:"DEATHS_DESIGN",name:"drop Death's Design",delay:a,fnOnRsc:l=>{l.consume(1)}})}setTimedResource(t,a){this.tryConsumeResource(t),this.resources.get(t).gain(a),this.enqueueResourceDrop(t)}processCombo(t){const a=this.resources.get("RPR_COMBO").availableAmount(),l=this.resources.get("RPR_AOE_COMBO").availableAmount();let[s,c]=new Map([["SLICE",[1,0]],["WAXING_SLICE",[a===1?2:0,0]],["INFERNAL_SLICE",[0,0]],["SPINNING_SCYTHE",[0,1]],["NIGHTMARE_SCYTHE",[0,0]]]).get(t)??[a,l];s!==a&&this.setComboState("RPR_COMBO",s),c!==l&&this.setComboState("RPR_AOE_COMBO",c)}processSoulGauge(t){const a=this.resources.get("SOUL");if(["SLICE","WAXING_SLICE","INFERNAL_SLICE","SPINNING_SCYTHE","NIGHTMARE_SCYTHE","HARPE","HARVEST_MOON"].includes(t)){a.gain(10);return}if(["SOUL_SLICE","SOUL_SCYTHE"].includes(t)){a.gain(50);return}if(["BLOOD_STALK","UNVEILED_GALLOWS","UNVEILED_GIBBET","GRIM_SWATHE","GLUTTONY"].includes(t)){a.consume(50);return}}processShroudGauge(t){const a=this.resources.get("SHROUD");if(["GALLOWS","GIBBET","EXECUTIONERS_GALLOWS","EXECUTIONERS_GIBBET","GUILLOTINE","EXECUTIONERS_GUILLOTINE"].includes(t)){a.gain(10);return}t==="ENSHROUD"&&!this.resources.get("IDEAL_HOST").available(1)&&a.consume(50)}processReaversExecutioner(t){const a=this.resources.get("SOUL_REAVER"),l=this.resources.get("EXECUTIONER");if(["GIBBET","GALLOWS","GUILLOTINE"].includes(t)){a.consume(1);return}if(["EXECUTIONERS_GIBBET","EXECUTIONERS_GALLOWS","EXECUTIONERS_GUILLOTINE"].includes(t)){l.consume(1);return}if(this.skillsList.get(t).cdName==="cd_GCD"&&(a.consume(a.availableAmount()),l.consume(l.availableAmount())),["BLOOD_STALK","UNVEILED_GALLOWS","UNVEILED_GIBBET","GRIM_SWATHE"].includes(t)){a.consume(a.availableAmount()),l.consume(l.availableAmount()),this.setTimedResource("SOUL_REAVER",1);return}if(t==="GLUTTONY"){if(a.consume(a.availableAmount()),l.consume(l.availableAmount()),this.hasTraitUnlocked("ENHANCED_GLUTTONY")){this.setTimedResource("EXECUTIONER",2);return}this.setTimedResource("SOUL_REAVER",2);return}}processGibbetGallows(t){const a=this.resources.get("SOUL_REAVER"),l=this.resources.get("EXECUTIONER");["GIBBET","GALLOWS","EXECUTIONERS_GIBBET","EXECUTIONERS_GALLOWS"].includes(t)||(a.consume(a.availableAmount()),l.consume(l.availableAmount()));const s=new Map([["GIBBET","ENHANCED_GIBBET"],["EXECUTIONERS_GIBBET","ENHANCED_GIBBET"],["GALLOWS","ENHANCED_GALLOWS"],["EXECUTIONERS_GALLOWS","ENHANCED_GALLOWS"]]),c=new Map([["GIBBET","ENHANCED_GALLOWS"],["EXECUTIONERS_GIBBET","ENHANCED_GALLOWS"],["GALLOWS","ENHANCED_GIBBET"],["EXECUTIONERS_GALLOWS","ENHANCED_GIBBET"]]),d=this.resources.get(s.get(t)),h=this.resources.get(c.get(t));d.consume(d.availableAmount()),h.consume(h.availableAmount()),h.gain(1)}processCircleOfSacrifice(t){if(!this.hasResourceAvailable("CIRCLE_OF_SACRIFICE"))return;Yo("RPR",t).potencyFn(this)>0&&(this.resources.get("IMMORTAL_SACRIFICE").availableAmount()===0?this.setTimedResource("IMMORTAL_SACRIFICE",1):this.resources.get("IMMORTAL_SACRIFICE").gain(1),this.tryConsumeResource("CIRCLE_OF_SACRIFICE",!0))}enterEnshroud(){this.hasResourceAvailable("IDEAL_HOST")&&this.resources.get("IDEAL_HOST").consume(1),this.hasTraitUnlocked("ENHANCED_ENSHROUD")&&this.setTimedResource("OBLATIO",1),this.setTimedResource("LEMURE_SHROUD",5),this.tryConsumeResource("PERFECTIO_PARATA",!0)}exitEnshroud(){this.tryConsumeResource("ENSHROUDED"),this.tryConsumeResource("OBLATIO"),this.tryConsumeResource("LEMURE_SHROUD"),this.tryConsumeResource("VOID_SHROUD"),this.tryConsumeResource("ENHANCED_CROSS_REAPING"),this.tryConsumeResource("ENHANCED_VOID_REAPING")}}const Vk=new Set(["SHADOW_OF_DEATH","WHORL_OF_DEATH","HARVEST_MOON","HARPE","VOID_REAPING","CROSS_REAPING","GRIM_REAPING","LEMURES_SLICE","LEMURES_SCYTHE","SACRIFICIUM","COMMUNIO","ARCANE_CIRCLE","HELLS_EGRESS","HELLS_INGRESS","REGRESS","ARCANE_CREST","FEINT","LEG_SWEEP","BLOODBATH","TRUE_NORTH","ARMS_LENGTH","SECOND_WIND","SPRINT","TINCTURE"]),$f=(e,t)=>a=>{const l=["GIBBET","GALLOWS","GUILLOTINE"].includes(t)?a.resources.get("SOUL_REAVER"):a.resources.get("EXECUTIONER");return a.resources.get(e).available(1)||l.available(1)&&!a.hasResourceAvailable("ENHANCED_GIBBET")&&!a.hasResourceAvailable("ENHANCED_GALLOWS")},wR=e=>e.hasResourceAvailable("SOUL_REAVER"),BR=e=>e.hasResourceAvailable("EXECUTIONER"),Di=e=>t=>t.resources.get("SOUL").availableAmount()>=e,FR=e=>Vk.has(e),Jf=e=>ut(t=>t.processCombo(e),t=>t.processSoulGauge(e),t=>t.processShroudGauge(e),t=>t.processReaversExecutioner(e),t=>t.processCircleOfSacrifice(e)),jR=e=>{const t=[];return e.hasResourceAvailable("ARCANE_CIRCLE")&&t.push(me.ArcaneCircle),e.hasResourceAvailable("DEATHS_DESIGN")&&t.push(me.DeathsDesign),t},eh=(e,t,a)=>{const l=ut(Jf(e),a.onConfirm??je),s=xf(c=>!c.resources.get("ENSHROUDED").available(1)||FR(e),a.validateAttempt??(()=>!0));return oo("RPR",e,t,{...a,recastTime:c=>c.config.adjustedGCD(a.recastTime),onConfirm:l,validateAttempt:s,isInstantFn:c=>!(e==="COMMUNIO"||e==="HARPE"&&!c.hasResourceAvailable("ENHANCED_HARPE")||e==="SOULSOW"&&c.isInCombat()),jobPotencyModifiers:jR})},mn=(e,t,a)=>{const l=ut(Jf(e),a.onConfirm??je),s=xf(c=>!c.resources.get("ENSHROUDED").available(1)||FR(e),a.validateAttempt??(()=>!0));return Mi("RPR",e,t,{...a,onConfirm:l,jobPotencyModifiers:c=>{const d=jR(c);if(a.combo&&c.resources.get(a.combo.resource).availableAmount()===a.combo.resourceValue&&d.push(dl(Xe(c,a.combo.potency)-Xe(c,a.potency))),a.positional&&(c.hasResourceAvailable("TRUE_NORTH")||a.positional.location==="flank"&&c.hasResourceAvailable("FLANK_POSITIONAL")||a.positional.location==="rear"&&c.hasResourceAvailable("REAR_POSITIONAL"))&&d.push(Xc(Xe(c,a.positional.potency)-Xe(c,a.potency))),["GIBBET","EXECUTIONERS_GIBBET"].includes(e)&&c.hasResourceAvailable("ENHANCED_GIBBET")&&d.push(me.EnhancedGibbetGallows),["GALLOWS","EXECUTIONERS_GALLOWS"].includes(e)&&c.hasResourceAvailable("ENHANCED_GALLOWS")&&d.push(me.EnhancedGibbetGallows),e==="VOID_REAPING"&&c.hasResourceAvailable("ENHANCED_VOID_REAPING")&&d.push(me.EnhancedReaping),e==="CROSS_REAPING"&&c.hasResourceAvailable("ENHANCED_CROSS_REAPING")&&d.push(me.EnhancedReaping),e==="PLENTIFUL_HARVEST"&&c.hasResourceAvailable("IMMORTAL_SACRIFICE"))for(let h=0;h<c.resources.get("IMMORTAL_SACRIFICE").availableAmount();h++)d.push(me.ImmortalSacrifice);return d},validateAttempt:s})},Ta=(e,t,a,l)=>{const s=ut(Jf(e),l.onConfirm??je),c=xf(d=>!d.resources.get("ENSHROUDED").available(1)||FR(e),l.validateAttempt??(()=>!0));return Nt("RPR",e,t,a,{...l,onConfirm:s,validateAttempt:c,jobPotencyModifiers:jR})};mn("SHADOW_OF_DEATH",10,{potency:300,aspect:pe.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:1.15,onConfirm:e=>e.refreshDeathsDesign()});mn("SLICE",1,{potency:[["NEVER",260],["MELEE_MASTERY_II_RPR",320],["MELEE_MASTERY_III_RPR",460]],aspect:pe.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.49});mn("WAXING_SLICE",5,{potency:[["NEVER",100],["MELEE_MASTERY_II_RPR",160],["MELEE_MASTERY_III_RPR",260]],combo:{potency:[["NEVER",340],["MELEE_MASTERY_II_RPR",400],["MELEE_MASTERY_III_RPR",500]],resource:"RPR_COMBO",resourceValue:1},aspect:pe.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.58,highlightIf:function(e){return e.resources.get("RPR_COMBO").availableAmount()===1}});mn("INFERNAL_SLICE",30,{potency:[["NEVER",100],["MELEE_MASTERY_II_RPR",180],["MELEE_MASTERY_III_RPR",280]],combo:{potency:[["NEVER",420],["MELEE_MASTERY_II_RPR",500],["MELEE_MASTERY_III_RPR",600]],resource:"RPR_COMBO",resourceValue:2},aspect:pe.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.54,highlightIf:function(e){return e.resources.get("RPR_COMBO").availableAmount()===2}});mn("SOUL_SLICE",60,{potency:[["NEVER",460],["MELEE_MASTERY_III_RPR",520]],aspect:pe.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.99,secondaryCooldown:{cdName:"cd_SOUL_SLICE",cooldown:30,maxCharges:2}});mn("GIBBET",70,{replaceIf:[{newSkill:"VOID_REAPING",condition:e=>e.hasResourceAvailable("ENSHROUDED")},{newSkill:"EXECUTIONERS_GIBBET",condition:e=>e.hasResourceAvailable("EXECUTIONER")}],potency:[["NEVER",460],["MELEE_MASTERY_III_RPR",500]],positional:{potency:[["NEVER",520],["MELEE_MASTERY_III_RPR",560]],location:"flank"},aspect:pe.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.5,highlightIf:$f("ENHANCED_GIBBET","GIBBET"),validateAttempt:wR,onConfirm:e=>{e.tryConsumeResource("ENHANCED_GIBBET"),e.setTimedResource("ENHANCED_GALLOWS",1)}});mn("GALLOWS",70,{replaceIf:[{newSkill:"CROSS_REAPING",condition:e=>e.hasResourceAvailable("ENSHROUDED")},{newSkill:"EXECUTIONERS_GALLOWS",condition:e=>e.resources.get("EXECUTIONER").available(1)}],potency:[["NEVER",460],["MELEE_MASTERY_III_RPR",500]],positional:{potency:[["NEVER",520],["MELEE_MASTERY_III_RPR",560]],location:"rear"},aspect:pe.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.53,highlightIf:$f("ENHANCED_GALLOWS","GALLOWS"),validateAttempt:wR,onConfirm:e=>{e.tryConsumeResource("ENHANCED_GALLOWS"),e.setTimedResource("ENHANCED_GIBBET",1)}});mn("EXECUTIONERS_GIBBET",96,{startOnHotbar:!1,potency:700,positional:{potency:760,location:"flank"},aspect:pe.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.62,highlightIf:$f("ENHANCED_GIBBET","EXECUTIONERS_GIBBET"),validateAttempt:BR,onConfirm:e=>{e.tryConsumeResource("ENHANCED_GIBBET"),e.setTimedResource("ENHANCED_GALLOWS",1)}});mn("EXECUTIONERS_GALLOWS",96,{startOnHotbar:!1,potency:700,positional:{potency:760,location:"flank"},aspect:pe.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.62,highlightIf:$f("ENHANCED_GALLOWS","EXECUTIONERS_GALLOWS"),validateAttempt:BR,onConfirm:e=>{e.tryConsumeResource("ENHANCED_GALLOWS"),e.setTimedResource("ENHANCED_GIBBET",1)}});mn("PLENTIFUL_HARVEST",88,{potency:720,aspect:pe.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:.4,applicationDelay:1.16,highlightIf:e=>e.hasResourceAvailable("IMMORTAL_SACRIFICE",1),validateAttempt:e=>e.hasResourceAvailable("IMMORTAL_SACRIFICE",1)&&!e.hasResourceAvailable("BLOODSOWN_CIRCLE"),onConfirm:e=>{e.resources.get("IMMORTAL_SACRIFICE").consume(e.resources.get("IMMORTAL_SACRIFICE").availableAmount()),e.setTimedResource("IDEAL_HOST",1),e.setTimedResource("PERFECTIO_OCCULTA",1)}});eh("COMMUNIO",90,{replaceIf:[{condition:e=>e.hasResourceAvailable("PERFECTIO_PARATA"),newSkill:"PERFECTIO"}],potency:1100,aspect:pe.Other,castTime:1.3,recastTime:2.5,falloff:.4,applicationDelay:1.16,validateAttempt:e=>e.hasResourceAvailable("ENSHROUDED"),highlightIf:e=>e.hasResourceAvailable("ENSHROUDED")&&e.resources.get("LEMURE_SHROUD").availableAmount()===1,onConfirm:e=>{e.hasResourceAvailable("PERFECTIO_OCCULTA")&&(e.resources.get("PERFECTIO_OCCULTA").consume(1),e.setTimedResource("PERFECTIO_PARATA",1)),e.exitEnshroud(),e.tryConsumeResource("ENHANCED_CROSS_REAPING"),e.tryConsumeResource("ENHANCED_VOID_REAPING")}});eh("HARPE",15,{potency:300,aspect:pe.Other,castTime:1.3,recastTime:2.5,applicationDelay:.9,highlightIf:e=>e.hasResourceAvailable("ENHANCED_HARPE"),onConfirm:e=>e.tryConsumeResource("ENHANCED_HARPE")});eh("SOULSOW",82,{potency:0,replaceIf:[{condition:e=>e.hasResourceAvailable("SOULSOW"),newSkill:"HARVEST_MOON"}],startOnHotbar:!0,aspect:pe.Other,castTime:5,recastTime:2.5,applicationDelay:0,onConfirm:e=>e.resources.get("SOULSOW").gain(1)});eh("HARVEST_MOON",82,{potency:[["NEVER",600],["MELEE_MASTERY_III_RPR",800]],startOnHotbar:!1,aspect:pe.Other,castTime:0,recastTime:2.5,falloff:.4,applicationDelay:.9,validateAttempt:e=>e.hasResourceAvailable("SOULSOW"),highlightIf:e=>e.hasResourceAvailable("SOULSOW"),onConfirm:e=>e.resources.get("SOULSOW").consume(1)});Ta("GLUTTONY",76,"cd_GLUTTONY",{replaceIf:[{condition:e=>e.hasResourceAvailable("ENSHROUDED"),newSkill:"SACRIFICIUM"}],isPhysical:!1,potency:520,startOnHotbar:!0,falloff:.25,applicationDelay:1.06,cooldown:60,validateAttempt:Di(50),highlightIf:Di(50)});Ta("BLOOD_STALK",50,"cd_BLOOD_STALK",{replaceIf:[{newSkill:"LEMURES_SLICE",condition:e=>e.hasResourceAvailable("ENSHROUDED")},{newSkill:"UNVEILED_GIBBET",condition:e=>e.hasResourceAvailable("ENHANCED_GIBBET")},{newSkill:"UNVEILED_GALLOWS",condition:e=>e.hasResourceAvailable("ENHANCED_GALLOWS")}],isPhysical:!0,potency:340,startOnHotbar:!0,applicationDelay:.89,cooldown:1,validateAttempt:Di(50),highlightIf:Di(50)});Ta("GRIM_SWATHE",55,"cd_BLOOD_STALK",{replaceIf:[{condition:e=>e.hasResourceAvailable("ENSHROUDED"),newSkill:"LEMURES_SCYTHE"}],isPhysical:!0,potency:140,startOnHotbar:!0,falloff:0,applicationDelay:.58,cooldown:1,validateAttempt:Di(50),highlightIf:Di(50)});Ta("UNVEILED_GIBBET",70,"cd_BLOOD_STALK",{isPhysical:!0,potency:440,startOnHotbar:!1,applicationDelay:.54,cooldown:1,validateAttempt:Di(50),highlightIf:Di(50)});Ta("UNVEILED_GALLOWS",70,"cd_BLOOD_STALK",{isPhysical:!0,potency:440,startOnHotbar:!1,applicationDelay:.54,cooldown:1,validateAttempt:Di(50),highlightIf:Di(50)});Ta("LEMURES_SLICE",86,"cd_LEMURES_SLICE",{isPhysical:!0,potency:[["NEVER",240],["MELEE_MASTERY_III_RPR",280]],startOnHotbar:!1,applicationDelay:.7,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("VOID_SHROUD",2),highlightIf:e=>e.hasResourceAvailable("VOID_SHROUD",2),onConfirm:e=>{e.resources.get("VOID_SHROUD").consume(2)}});Ta("SACRIFICIUM",92,"cd_SACRIFICIUM",{isPhysical:!1,potency:600,startOnHotbar:!1,falloff:.4,applicationDelay:.76,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("OBLATIO"),highlightIf:e=>e.hasResourceAvailable("OBLATIO"),onConfirm:e=>e.resources.get("OBLATIO").consume(1)});ze("RPR","ARCANE_CIRCLE",72,"cd_ARCANE_CIRCLE",{rscType:"ARCANE_CIRCLE",applicationDelay:.6,startOnHotbar:!0,maxCharges:1,potency:0,onApplication:e=>{e.hasTraitUnlocked("ENHANCED_ARCANE_CIRCLE")&&(e.setTimedResource("CIRCLE_OF_SACRIFICE",1),e.setTimedResource("BLOODSOWN_CIRCLE",1))},cooldown:120});mn("VOID_REAPING",80,{startOnHotbar:!1,potency:[["NEVER",460],["MELEE_MASTERY_III_RPR",540]],aspect:pe.Physical,recastTime:1.5,applicationDelay:.53,highlightIf:e=>e.resources.get("LEMURE_SHROUD").availableAmount()>1&&!e.hasResourceAvailable("ENHANCED_CROSS_REAPING"),validateAttempt:e=>e.hasResourceAvailable("LEMURE_SHROUD"),onConfirm:e=>{e.tryConsumeResource("ENHANCED_VOID_REAPING"),e.setTimedResource("ENHANCED_CROSS_REAPING",1),e.resources.get("LEMURE_SHROUD").consume(1),e.resources.get("VOID_SHROUD").gain(1),e.resources.get("LEMURE_SHROUD").availableAmount()===0&&e.exitEnshroud()}});mn("CROSS_REAPING",80,{startOnHotbar:!1,potency:[["NEVER",460],["MELEE_MASTERY_III_RPR",540]],aspect:pe.Physical,recastTime:1.5,applicationDelay:.53,highlightIf:e=>e.resources.get("LEMURE_SHROUD").availableAmount()>1&&!e.hasResourceAvailable("ENHANCED_VOID_REAPING"),validateAttempt:e=>e.hasResourceAvailable("LEMURE_SHROUD"),onConfirm:e=>{e.tryConsumeResource("ENHANCED_CROSS_REAPING"),e.setTimedResource("ENHANCED_VOID_REAPING",1),e.resources.get("LEMURE_SHROUD").consume(1),e.resources.get("VOID_SHROUD").gain(1),e.resources.get("LEMURE_SHROUD").availableAmount()===0&&e.exitEnshroud()}});ze("RPR","ENSHROUD",80,"cd_ENSHROUD",{rscType:"ENSHROUDED",highlightIf:e=>e.hasResourceAvailable("SHROUD",50)||e.hasResourceAvailable("IDEAL_HOST"),applicationDelay:0,startOnHotbar:!0,cooldown:15,validateAttempt:e=>e.hasResourceAvailable("SHROUD",50)||e.hasResourceAvailable("IDEAL_HOST"),onConfirm:ut(Jf("ENSHROUD"),e=>{e.enterEnshroud()})});mn("PERFECTIO",100,{potency:1300,aspect:pe.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:.4,applicationDelay:1.29,startOnHotbar:!1,highlightIf:e=>e.hasResourceAvailable("PERFECTIO_PARATA"),validateAttempt:e=>e.hasResourceAvailable("PERFECTIO_PARATA"),onConfirm:e=>{e.resources.get("PERFECTIO_PARATA").consume(1)}});Ta("REGRESS",74,"cd_BLOOD_STALK",{cooldown:1,animationLock:jn,startOnHotbar:!1,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("THRESHOLD"),onConfirm:e=>e.resources.get("THRESHOLD").consume(1)});Ta("HELLS_INGRESS",20,"cd_INGRESS_EGRESS",{replaceIf:[{condition:e=>e.hasResourceAvailable("THRESHOLD")&&e.hasResourceAvailable("HELLS_INGRESS_USED"),newSkill:"REGRESS"}],cooldown:20,animationLock:jn,onConfirm:e=>{e.resources.get("HELLS_INGRESS_USED").gain(1),e.hasTraitUnlocked("HELLSGATE")&&e.setTimedResource("THRESHOLD",1),e.setTimedResource("ENHANCED_HARPE",1)}});Ta("HELLS_EGRESS",20,"cd_INGRESS_EGRESS",{replaceIf:[{condition:e=>e.hasResourceAvailable("THRESHOLD")&&!e.hasResourceAvailable("HELLS_INGRESS_USED"),newSkill:"REGRESS"}],cooldown:20,animationLock:jn,onConfirm:e=>{e.tryConsumeResource("HELLS_INGRESS_USED"),e.hasTraitUnlocked("HELLSGATE")&&e.setTimedResource("THRESHOLD",1),e.setTimedResource("ENHANCED_HARPE",1)}});Ta("ARCANE_CREST",40,"cd_ARCANE_CREST",{replaceIf:[{condition:e=>e.hasResourceAvailable("CREST_OF_TIME_BORROWED"),newSkill:"ARCANE_CREST_POP"}],cooldown:30,onConfirm:e=>e.setTimedResource("CREST_OF_TIME_BORROWED",1)});Ta("ARCANE_CREST_POP",40,"cd_ARCANE_CREST_POP",{cooldown:1,animationLock:li,startOnHotbar:!1,onConfirm:e=>{e.resources.get("CREST_OF_TIME_BORROWED").consume(1),e.setTimedResource("CREST_OF_TIME_RETURNED",1)},validateAttempt:e=>e.hasResourceAvailable("CREST_OF_TIME_BORROWED"),highlightIf:e=>e.hasResourceAvailable("CREST_OF_TIME_BORROWED")});mn("WHORL_OF_DEATH",35,{potency:100,aspect:pe.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:1.15,onConfirm:e=>e.refreshDeathsDesign()});mn("SPINNING_SCYTHE",25,{potency:140,aspect:pe.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.62});mn("NIGHTMARE_SCYTHE",45,{potency:120,combo:{potency:180,resource:"RPR_AOE_COMBO",resourceValue:1},aspect:pe.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.8,highlightIf:function(e){return e.resources.get("RPR_AOE_COMBO").availableAmount()===1}});mn("SOUL_SCYTHE",65,{potency:180,aspect:pe.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.66,secondaryCooldown:{cdName:"cd_SOUL_SLICE",cooldown:30,maxCharges:2}});mn("EXECUTIONERS_GUILLOTINE",96,{startOnHotbar:!1,potency:260,aspect:pe.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.53,highlightIf:e=>e.hasResourceAvailable("EXECUTIONER"),validateAttempt:BR});mn("GRIM_REAPING",80,{startOnHotbar:!1,potency:200,recastTime:1.5,falloff:0,applicationDelay:.8,highlightIf:e=>e.resources.get("LEMURE_SHROUD").availableAmount()>1,validateAttempt:e=>e.hasResourceAvailable("LEMURE_SHROUD"),onConfirm:e=>{e.resources.get("LEMURE_SHROUD").consume(1),e.resources.get("VOID_SHROUD").gain(1),e.resources.get("LEMURE_SHROUD").availableAmount()===0&&e.exitEnshroud()},aspect:pe.Physical});Ta("LEMURES_SCYTHE",86,"cd_LEMURES_SLICE",{isPhysical:!0,potency:100,falloff:0,applicationDelay:.66,cooldown:1,startOnHotbar:!1,validateAttempt:e=>e.hasResourceAvailable("VOID_SHROUD",2),highlightIf:e=>e.hasResourceAvailable("VOID_SHROUD",2),onConfirm:e=>{e.resources.get("VOID_SHROUD").consume(2)}});mn("GUILLOTINE",70,{replaceIf:[{newSkill:"GRIM_REAPING",condition:e=>e.hasResourceAvailable("ENSHROUDED")},{newSkill:"EXECUTIONERS_GUILLOTINE",condition:e=>e.resources.get("EXECUTIONER").available(1)}],potency:200,aspect:pe.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.49,highlightIf:e=>e.hasResourceAvailable("SOUL_REAVER"),validateAttempt:wR});Ta("GAIN_SOUL_GAUGE",50,"cd_GAIN_SOUL_GAUGE",{applicationDelay:0,animationLock:li,cooldown:.01,onConfirm:e=>e.resources.get("SOUL").gain(10)});Object.keys(Qm).forEach(e=>$n(e,`SAM/${ot[e].name}.png`));class Kk extends $t{jobSpecificOtherTargetedBuffViewProps(){return[this.makeCommonTimer("HIGANBANA_DOT",!1)]}jobSpecificSelfTargetedBuffViewProps(){return Object.keys(Qm).filter(t=>t!=="HIGANBANA_DOT").map(t=>this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){const a=this.state.resources,l=a.get("KENKI").availableAmount(),s=a.get("MEDITATION").availableAmount();return[{kind:"sen",name:_({en:"sen",zh:"闪"}),hasSetsu:this.state.hasResourceAvailable("SETSU"),hasGetsu:this.state.hasResourceAvailable("GETSU"),hasKa:this.state.hasResourceAvailable("KA_SEN"),setsuColor:t.sam.setsu,getsuColor:t.sam.getsu,kaColor:t.sam.kaSen},{kind:"bar",name:_({en:"kenki",zh:"剑气"}),color:t.sam.kenki,progress:l/100,valueString:l.toFixed(0)},{kind:"counter",name:_({en:"meditation",zh:"剑压"}),color:t.sam.meditation,currentStacks:s,maxStacks:3}]}}const Rn=(e,t,a)=>{tt("SAM",e,t,a??{})};Rn("MEIKYO_SHISUI",3,{timeout:20});Rn("FUGETSU",1,{timeout:40});Rn("FUKA",1,{timeout:40});Rn("ZANSHIN_READY",1,{timeout:30});Rn("TENDO",1,{timeout:30});Rn("OGI_READY",1,{timeout:30});Rn("TSUBAME_GAESHI_READY",1,{timeout:30});Rn("THIRD_EYE",1,{timeout:4});Rn("TENGENTSU",1,{timeout:4});Rn("TENGENTSUS_FORESIGHT",1,{timeout:9});Rn("ENHANCED_ENPI",1,{timeout:15});Rn("MEDITATE",1,{timeout:15.2});Rn("KENKI",100);Rn("SETSU",1);Rn("GETSU",1);Rn("KA_SEN",1);Rn("MEDITATION",3);Rn("HIGANBANA_DOT",1,{timeout:60});const G0=["SAM_TWO_READY","SAM_TWO_AOE_READY","GEKKO_READY","KASHA_READY","KAESHI_OGI_READY"];G0.forEach(e=>Rn(e,1,{timeout:30}));Rn("KAESHI_TRACKER",4,{timeout:30});class Wk extends Jt{constructor(t){super(t);const a=this.hasTraitUnlocked("ENHANCED_HISSATSU")?60:120,l=this.hasTraitUnlocked("ENHANCED_MEIKYO_SHISUI")?2:1;[new Ke("cd_MEIKYO_SHISUI",55,l,l),new Ke("cd_SENEI_GUREN",a,1,1)].forEach(s=>this.cooldowns.set(s)),super.registerRecurringEvents([{reportName:Zn("HIGANBANA_DOT"),groupedEffects:[{effectName:"HIGANBANA_DOT",appliedBy:["HIGANBANA"]}]}])}get statusPropsGenerator(){return new Kk(this)}jobSpecificAddDamageBuffCovers(t,a){this.hasResourceAvailable("ENHANCED_ENPI")&&a.name==="ENPI"&&t.addBuff(k.EnhancedEnpi),this.hasResourceAvailable("FUGETSU")&&t.addBuff(k.Fugetsu)}jobSpecificAddSpeedBuffCovers(t,a){this.hasResourceAvailable("FUKA")&&a.cdName==="cd_GCD"&&t.addBuff(k.Fuka)}cancelChanneledSkills(){const t=this.findNextQueuedEventByTag(ia.MeditateTick);t&&(t.canceled=!0),this.tryConsumeResource("MEDITATE")}getFugetsuModifier(){return this.hasTraitUnlocked("ENHANCED_FUGETSU_AND_FUKA")?me.FugetsuEnhanced:me.FugetsuBase}getFukaModifier(){return this.hasResourceAvailable("FUKA")?this.hasTraitUnlocked("ENHANCED_FUGETSU_AND_FUKA")?13:10:0}checkCombo(t){return this.hasResourceAvailable(t)||this.hasResourceAvailable("MEIKYO_SHISUI")}refreshBuff(t,a){this.addEvent(new Ge("gain fugetsu",a,()=>{this.resources.get(t).gain(1),this.enqueueResourceDrop(t)}))}progressActiveCombo(t){G0.forEach(a=>{t.includes(a)||this.setComboState(a,0)}),t.forEach(a=>this.setComboState(a,1))}tryConsumeMeikyo(){this.tryConsumeResource("MEIKYO_SHISUI")}gainKenki(t){this.resources.get("KENKI").availableAmount()+t>100&&D.reportWarning(Fe.KenkiOvercap),this.resources.get("KENKI").gain(t)}gainMeditation(){this.resources.get("MEDITATION").availableAmount()===3&&D.reportWarning(Fe.MeditationOvercap),this.resources.get("MEDITATION").gain(1)}gainSen(t){const a=this.resources.get(t);a.available(1)&&D.reportWarning(Fe.SenOvercap),a.gain(1)}countSen(){return["GETSU","SETSU","KA_SEN"].reduce((t,a)=>this.hasResourceAvailable(a)?t+1:t,0)}consumeAllSen(){this.resources.get("SETSU").available(1)&&this.resources.get("SETSU").consume(1),this.resources.get("GETSU").available(1)&&this.resources.get("GETSU").consume(1),this.resources.get("KA_SEN").available(1)&&this.resources.get("KA_SEN").consume(1)}startMeditateTimer(){const t=a=>{const l=new Ge("meditate tick",3,()=>{a<5&&(this.isInCombat()&&(D.reportMeditateTick(this.time,"+kenki/meditation"),this.resources.get("KENKI").gain(10),this.resources.get("MEDITATION").gain(1)),this.addEvent(t(a+1)))});return l.addTag(ia.MeditateTick),l};this.addEvent(t(0))}}const Gt=(e,t,a)=>{const l=a.onApplication??je,s=d=>{const h=d.hasResourceAvailable("FUGETSU")?[d.getFugetsuModifier()]:[];a.jobPotencyModifiers&&h.push(...a.jobPotencyModifiers(d));const E=a.positional&&(d.hasResourceAvailable("TRUE_NORTH")||a.positional.location==="flank"&&d.hasResourceAvailable("FLANK_POSITIONAL")||a.positional.location==="rear"&&d.hasResourceAvailable("REAR_POSITIONAL"));return a.combo&&d.checkCombo(a.combo.resource)?(h.push(dl(Xe(d,a.combo.potency)-Xe(d,a.basePotency))),a.positional&&E&&h.push(Xc(Xe(d,a.positional.comboPotency)-Xe(d,a.combo.potency)))):a.positional&&E&&h.push(Xc(Xe(d,a.positional.potency)-Xe(d,a.basePotency))),h};let c=a.baseCastTime||0;return c&&(c=d=>d.hasTraitUnlocked("ENHANCED_IAIJUTSU")?a.baseCastTime||0:d.config.adjustedSksCastTime(1.8,d.getFukaModifier())),Mi("SAM",e,t,{replaceIf:a.replaceIf,startOnHotbar:a.startOnHotbar,highlightIf:a.highlightIf,autoUpgrade:a.autoUpgrade,autoDowngrade:a.autoDowngrade,castTime:c,recastTime:d=>d.config.adjustedSksGCD(a.baseRecastTime??2.5,d.getFukaModifier()),potency:a.basePotency,validateAttempt:a.validateAttempt,jobPotencyModifiers:s,applicationDelay:a.applicationDelay,isInstantFn:d=>!(a.baseCastTime&&a.baseCastTime>0),onConfirm:a.onConfirm,onApplication:l})},Fa=(e,t,a,l)=>(l.potency&&!l.jobPotencyModifiers&&(l.jobPotencyModifiers=s=>s.hasResourceAvailable("FUGETSU")?[s.getFugetsuModifier()]:[]),Nt("SAM",e,t,a,l));Gt("ENPI",15,{applicationDelay:.71,basePotency:100,onConfirm:e=>{e.hasResourceAvailable("ENHANCED_ENPI")&&e.tryConsumeResource("ENHANCED_ENPI"),e.gainKenki(10)},jobPotencyModifiers:e=>e.hasResourceAvailable("ENHANCED_ENPI")?[e.hasTraitUnlocked("WAY_OF_THE_SAMURAI_III")?me.YatenpiEnhanced:me.YatenpiBase]:[],highlightIf:e=>e.hasResourceAvailable("ENHANCED_ENPI")});Gt("HAKAZE",1,{autoUpgrade:{trait:"HAKAZE_MASTERY",otherSkill:"GYOFU"},applicationDelay:.85,basePotency:200,onConfirm:e=>{e.tryConsumeMeikyo(),e.gainKenki(5),e.progressActiveCombo(["SAM_TWO_READY"])}});Gt("GYOFU",92,{autoDowngrade:{trait:"HAKAZE_MASTERY",otherSkill:"HAKAZE"},applicationDelay:.85,basePotency:240,onConfirm:e=>{e.tryConsumeMeikyo(),e.gainKenki(5),e.progressActiveCombo(["SAM_TWO_READY"])}});Gt("YUKIKAZE",50,{applicationDelay:.85,basePotency:[["NEVER",100],["WAY_OF_THE_SAMURAI_II",110],["WAY_OF_THE_SAMURAI_III",160]],combo:{potency:[["NEVER",280],["WAY_OF_THE_SAMURAI_II",290],["WAY_OF_THE_SAMURAI_III",340]],resource:"SAM_TWO_READY"},onConfirm:e=>{e.checkCombo("SAM_TWO_READY")&&(e.gainKenki(15),e.gainSen("SETSU")),e.tryConsumeMeikyo(),e.progressActiveCombo([])},highlightIf:e=>e.checkCombo("SAM_TWO_READY")});Gt("JINPU",4,{applicationDelay:.62,basePotency:[["NEVER",120],["WAY_OF_THE_SAMURAI_III",140]],combo:{potency:[["NEVER",280],["WAY_OF_THE_SAMURAI_III",300]],resource:"SAM_TWO_READY"},onConfirm:e=>{e.checkCombo("SAM_TWO_READY")?(e.gainKenki(5),e.refreshBuff("FUGETSU",.62),e.tryConsumeMeikyo(),e.progressActiveCombo(["GEKKO_READY"])):(e.tryConsumeMeikyo(),e.progressActiveCombo([]))},highlightIf:e=>e.checkCombo("SAM_TWO_READY")});Gt("GEKKO",30,{applicationDelay:.76,basePotency:[["NEVER",100],["WAY_OF_THE_SAMURAI_II",110],["WAY_OF_THE_SAMURAI_III",160]],combo:{potency:[["NEVER",310],["WAY_OF_THE_SAMURAI_II",320],["WAY_OF_THE_SAMURAI_III",370]],resource:"GEKKO_READY"},positional:{potency:[["NEVER",150],["WAY_OF_THE_SAMURAI_II",160],["WAY_OF_THE_SAMURAI_III",210]],comboPotency:[["NEVER",360],["WAY_OF_THE_SAMURAI_II",370],["WAY_OF_THE_SAMURAI_III",420]],location:"rear"},onConfirm:e=>{e.checkCombo("GEKKO_READY")&&(e.gainKenki(10),e.gainSen("GETSU")),e.hasResourceAvailable("MEIKYO_SHISUI")&&e.refreshBuff("FUGETSU",.76),e.tryConsumeMeikyo(),e.progressActiveCombo([])},highlightIf:e=>e.checkCombo("GEKKO_READY")});Gt("SHIFU",18,{applicationDelay:.8,basePotency:[["NEVER",120],["WAY_OF_THE_SAMURAI_III",140]],combo:{potency:[["NEVER",280],["WAY_OF_THE_SAMURAI_III",300]],resource:"SAM_TWO_READY"},onConfirm:e=>{e.checkCombo("SAM_TWO_READY")?(e.gainKenki(5),e.refreshBuff("FUKA",.8),e.tryConsumeMeikyo(),e.progressActiveCombo(["KASHA_READY"])):(e.tryConsumeMeikyo(),e.progressActiveCombo([]))},highlightIf:e=>e.checkCombo("SAM_TWO_READY")});Gt("KASHA",40,{applicationDelay:.62,basePotency:[["NEVER",100],["WAY_OF_THE_SAMURAI_II",110],["WAY_OF_THE_SAMURAI_III",160]],combo:{potency:[["NEVER",310],["WAY_OF_THE_SAMURAI_II",320],["WAY_OF_THE_SAMURAI_III",370]],resource:"KASHA_READY"},positional:{potency:[["NEVER",150],["WAY_OF_THE_SAMURAI_II",160],["WAY_OF_THE_SAMURAI_III",210]],comboPotency:[["NEVER",360],["WAY_OF_THE_SAMURAI_II",370],["WAY_OF_THE_SAMURAI_III",420]],location:"flank"},onConfirm:e=>{e.checkCombo("KASHA_READY")&&(e.gainKenki(10),e.gainSen("KA_SEN")),e.hasResourceAvailable("MEIKYO_SHISUI")&&e.refreshBuff("FUKA",.62),e.tryConsumeMeikyo(),e.progressActiveCombo([])},highlightIf:e=>e.checkCombo("KASHA_READY")});Gt("FUGA",26,{autoUpgrade:{trait:"FUGA_MASTERY",otherSkill:"FUKO"},falloff:0,applicationDelay:.76,basePotency:90,onConfirm:e=>{e.gainKenki(5),e.progressActiveCombo(["SAM_TWO_AOE_READY"])}});Gt("FUKO",86,{autoDowngrade:{trait:"FUGA_MASTERY",otherSkill:"FUGA"},falloff:0,applicationDelay:.76,basePotency:100,onConfirm:e=>{e.gainKenki(10),e.progressActiveCombo(["SAM_TWO_AOE_READY"])}});Gt("MANGETSU",35,{falloff:0,applicationDelay:.62,basePotency:100,combo:{potency:120,resource:"SAM_TWO_AOE_READY"},onConfirm:e=>{e.checkCombo("SAM_TWO_AOE_READY")&&(e.gainKenki(10),e.refreshBuff("FUGETSU",.62),e.gainSen("GETSU")),e.progressActiveCombo([])},highlightIf:e=>e.checkCombo("SAM_TWO_AOE_READY")});Gt("OKA",35,{falloff:0,applicationDelay:.62,basePotency:100,combo:{potency:120,resource:"SAM_TWO_AOE_READY"},onConfirm:e=>{e.checkCombo("SAM_TWO_AOE_READY")&&(e.gainKenki(10),e.refreshBuff("FUKA",.62),e.gainSen("KA_SEN")),e.progressActiveCombo([])},highlightIf:e=>e.checkCombo("SAM_TWO_AOE_READY")});const Mr={newSkill:"HIGANBANA",condition:e=>e.countSen()===1},Lr={newSkill:"TENKA_GOKEN",condition:e=>!e.hasResourceAvailable("TENDO")&&e.countSen()===2},Hr={newSkill:"TENDO_GOKEN",condition:e=>e.hasResourceAvailable("TENDO")&&e.countSen()===2},xr={newSkill:"MIDARE_SETSUGEKKA",condition:e=>!e.hasResourceAvailable("TENDO")&&e.countSen()===3},Ur={newSkill:"TENDO_SETSUGEKKA",condition:e=>e.hasResourceAvailable("TENDO")&&e.countSen()===3};Gt("IAIJUTSU",30,{replaceIf:[Mr,Lr,Hr,xr,Ur],baseCastTime:1.3,basePotency:0,applicationDelay:0,validateAttempt:e=>!1});Gt("HIGANBANA",30,{startOnHotbar:!1,replaceIf:[Lr,Hr,xr,Ur],baseCastTime:1.3,basePotency:200,applicationDelay:.62,validateAttempt:Mr.condition,onConfirm:(e,t)=>{const a=[];e.hasResourceAvailable("FUGETSU")&&a.push(e.getFugetsuModifier());const l=e.hasTraitUnlocked("WAY_OF_THE_SAMURAI_III")?50:45;e.addDoTPotencies({node:t,effectName:"HIGANBANA_DOT",skillName:"HIGANBANA",tickPotency:l,speedStat:"sks",modifiers:a}),e.consumeAllSen(),e.gainMeditation()},onApplication:(e,t)=>e.applyDoT("HIGANBANA_DOT",t)});const th=e=>t=>{t.consumeAllSen(),t.resources.get("KAESHI_TRACKER").overrideCurrentValue(e),t.enqueueResourceDrop("KAESHI_TRACKER"),t.gainMeditation(),t.resources.get("TSUBAME_GAESHI_READY").gain(1),t.enqueueResourceDrop("TSUBAME_GAESHI_READY"),t.tryConsumeResource("TENDO")};Gt("TENKA_GOKEN",30,{startOnHotbar:!1,replaceIf:[Mr,Hr,xr,Ur],baseCastTime:1.3,basePotency:300,falloff:0,applicationDelay:.62,validateAttempt:Lr.condition,onConfirm:th(1)});Gt("TENDO_GOKEN",100,{startOnHotbar:!1,replaceIf:[Mr,Lr,xr,Ur],baseCastTime:1.3,basePotency:410,falloff:0,applicationDelay:.36,validateAttempt:Hr.condition,onConfirm:th(2)});Gt("MIDARE_SETSUGEKKA",30,{startOnHotbar:!1,replaceIf:[Mr,Lr,Hr,Ur],baseCastTime:1.3,basePotency:[["NEVER",620],["WAY_OF_THE_SAMURAI_III",640]],applicationDelay:.62,jobPotencyModifiers:e=>[me.AutoCrit],validateAttempt:xr.condition,onConfirm:th(3)});Gt("TENDO_SETSUGEKKA",100,{startOnHotbar:!1,replaceIf:[Mr,Lr,Hr,xr],baseCastTime:1.3,basePotency:1100,applicationDelay:1.03,jobPotencyModifiers:e=>[me.AutoCrit],validateAttempt:Ur.condition,onConfirm:th(4)});const tu={newSkill:"KAESHI_GOKEN",condition:e=>e.resources.get("KAESHI_TRACKER").availableAmount()===1},Xo={newSkill:"TENDO_KAESHI_GOKEN",condition:e=>e.resources.get("KAESHI_TRACKER").availableAmount()===2},Or={newSkill:"KAESHI_SETSUGEKKA",condition:e=>e.resources.get("KAESHI_TRACKER").availableAmount()===3},br={newSkill:"TENDO_KAESHI_SETSUGEKKA",condition:e=>e.resources.get("KAESHI_TRACKER").availableAmount()===4};Gt("TSUBAME_GAESHI",74,{replaceIf:[tu,Xo,Or,br],basePotency:0,applicationDelay:0,validateAttempt:e=>!1});const nh=e=>{e.tryConsumeResource("KAESHI_TRACKER",!0),e.tryConsumeResource("TSUBAME_GAESHI_READY"),e.tryConsumeResource("KAESHI_OGI_READY")};Gt("KAESHI_GOKEN",74,{startOnHotbar:!1,replaceIf:[Xo,Or,br],basePotency:300,falloff:0,applicationDelay:.62,validateAttempt:tu.condition,onConfirm:nh,highlightIf:tu.condition});Gt("TENDO_KAESHI_GOKEN",100,{startOnHotbar:!1,replaceIf:[Xo,Or,br],basePotency:410,falloff:0,applicationDelay:.36,validateAttempt:Xo.condition,onConfirm:nh,highlightIf:Xo.condition});Gt("KAESHI_SETSUGEKKA",74,{startOnHotbar:!1,replaceIf:[tu,Xo,br],basePotency:[["NEVER",620],["WAY_OF_THE_SAMURAI_III",640]],applicationDelay:.62,jobPotencyModifiers:e=>[me.AutoCrit],validateAttempt:Or.condition,onConfirm:nh,highlightIf:Or.condition});Gt("TENDO_KAESHI_SETSUGEKKA",74,{startOnHotbar:!1,replaceIf:[tu,Xo,Or],basePotency:1100,applicationDelay:1.03,jobPotencyModifiers:e=>[me.AutoCrit],validateAttempt:br.condition,onConfirm:nh,highlightIf:br.condition});Gt("OGI_NAMIKIRI",90,{replaceIf:[{newSkill:"KAESHI_NAMIKIRI",condition:e=>e.hasResourceAvailable("KAESHI_OGI_READY")}],falloff:.5,applicationDelay:.49,basePotency:[["NEVER",860],["WAY_OF_THE_SAMURAI_III",1e3]],baseCastTime:1.3,jobPotencyModifiers:e=>[me.AutoCrit],validateAttempt:e=>e.hasResourceAvailable("OGI_READY"),onConfirm:e=>{e.tryConsumeResource("OGI_READY"),e.gainMeditation(),e.resources.get("KAESHI_OGI_READY").gain(1),e.enqueueResourceDrop("KAESHI_OGI_READY")},highlightIf:e=>e.hasResourceAvailable("OGI_READY")});Gt("KAESHI_NAMIKIRI",90,{startOnHotbar:!1,falloff:.5,applicationDelay:.49,basePotency:[["NEVER",860],["WAY_OF_THE_SAMURAI_III",1e3]],jobPotencyModifiers:e=>[me.AutoCrit],validateAttempt:e=>e.hasResourceAvailable("KAESHI_OGI_READY"),onConfirm:e=>e.tryConsumeResource("KAESHI_OGI_READY"),highlightIf:e=>e.hasResourceAvailable("KAESHI_OGI_READY")});Fa("MEIKYO_SHISUI",50,"cd_MEIKYO_SHISUI",{cooldown:55,maxCharges:2,onConfirm:e=>{e.resources.get("MEIKYO_SHISUI").gain(3),e.enqueueResourceDrop("MEIKYO_SHISUI"),e.hasTraitUnlocked("ENHANCED_MEIKYO_SHISUI_II")&&(e.resources.get("TENDO").gain(1),e.enqueueResourceDrop("TENDO"))}});Fa("IKISHOTEN",68,"cd_IKISHOTEN",{replaceIf:[{newSkill:"ZANSHIN",condition:e=>e.hasResourceAvailable("ZANSHIN_READY")}],cooldown:120,requiresCombat:!0,onConfirm:e=>{e.gainKenki(50),e.hasTraitUnlocked("ENHANCED_IKISHOTEN")&&(e.resources.get("OGI_READY").gain(1),e.enqueueResourceDrop("OGI_READY")),e.hasTraitUnlocked("ENHANCED_IKISHOTEN_II")&&(e.resources.get("ZANSHIN_READY").gain(1),e.enqueueResourceDrop("ZANSHIN_READY"))}});Fa("HISSATSU_SHINTEN",52,"cd_SHINTEN",{cooldown:1,potency:250,validateAttempt:e=>e.resources.get("KENKI").available(25),onConfirm:e=>e.resources.get("KENKI").consume(25),highlightIf:e=>e.resources.get("KENKI").available(25)});Fa("HISSATSU_KYUTEN",62,"cd_KYUTEN",{cooldown:1,potency:100,falloff:0,validateAttempt:e=>e.resources.get("KENKI").available(25),onConfirm:e=>e.resources.get("KENKI").consume(25),highlightIf:e=>e.resources.get("KENKI").available(25)});Fa("HISSATSU_GYOTEN",54,"cd_GYOTEN",{cooldown:5,animationLock:jn,potency:100,validateAttempt:e=>e.resources.get("KENKI").available(10),onConfirm:e=>e.resources.get("KENKI").consume(10),highlightIf:e=>e.resources.get("KENKI").available(10)});Fa("HISSATSU_YATEN",56,"cd_YATEN",{cooldown:10,animationLock:jn,potency:100,validateAttempt:e=>e.resources.get("KENKI").available(10),onConfirm:e=>{e.resources.get("KENKI").consume(10),e.resources.get("ENHANCED_ENPI").gain(1),e.enqueueResourceDrop("ENHANCED_ENPI")},highlightIf:e=>e.resources.get("KENKI").available(10)});Fa("HISSATSU_SENEI",72,"cd_SENEI_GUREN",{cooldown:60,potency:800,validateAttempt:e=>e.resources.get("KENKI").available(25),onConfirm:e=>e.resources.get("KENKI").consume(25),highlightIf:e=>e.resources.get("KENKI").available(25)});Fa("HISSATSU_GUREN",70,"cd_SENEI_GUREN",{cooldown:60,potency:400,falloff:.25,validateAttempt:e=>e.resources.get("KENKI").available(25),onConfirm:e=>e.resources.get("KENKI").consume(25),highlightIf:e=>e.resources.get("KENKI").available(25)});Fa("HAGAKURE",68,"cd_HAGAKURE",{cooldown:5,validateAttempt:e=>e.countSen()>0,onConfirm:e=>{e.gainKenki(e.countSen()*10),e.consumeAllSen()},highlightIf:e=>e.countSen()===3});Fa("SHOHA",80,"cd_SHOHA",{cooldown:15,potency:[["NEVER",560],["WAY_OF_THE_SAMURAI_III",640]],falloff:.5,applicationDelay:.58,validateAttempt:e=>e.resources.get("MEDITATION").available(3),onConfirm:e=>e.tryConsumeResource("MEDITATION",!0),highlightIf:e=>e.resources.get("MEDITATION").available(3)});ze("SAM","THIRD_EYE",6,"cd_THIRD_EYE",{rscType:"THIRD_EYE",autoUpgrade:{trait:"THIRD_EYE_MASTERY",otherSkill:"TENGENTSU"},replaceIf:[{newSkill:"THIRD_EYE_POP",condition:e=>e.hasResourceAvailable("THIRD_EYE")}],cooldown:15,applicationDelay:0});ze("SAM","TENGENTSU",82,"cd_THIRD_EYE",{rscType:"TENGENTSU",autoDowngrade:{trait:"THIRD_EYE_MASTERY",otherSkill:"THIRD_EYE"},replaceIf:[{newSkill:"TENGENTSU_POP",condition:e=>e.hasResourceAvailable("TENGENTSU")}],cooldown:15,applicationDelay:0});Fa("THIRD_EYE_POP",6,"cd_THIRD_EYE_POP",{startOnHotbar:!1,applicationDelay:0,animationLock:li,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("THIRD_EYE"),onConfirm:e=>{e.tryConsumeResource("THIRD_EYE"),e.gainKenki(10)},highlightIf:e=>e.hasResourceAvailable("THIRD_EYE")});Fa("TENGENTSU_POP",82,"cd_THIRD_EYE_POP",{startOnHotbar:!1,applicationDelay:0,animationLock:li,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("TENGENTSU"),onConfirm:e=>{e.tryConsumeResource("TENGENTSU"),e.resources.get("TENGENTSUS_FORESIGHT").gain(1),e.enqueueResourceDrop("TENGENTSUS_FORESIGHT"),e.gainKenki(10)},highlightIf:e=>e.hasResourceAvailable("TENGENTSU")});Fa("ZANSHIN",96,"cd_ZANSHIN",{startOnHotbar:!1,cooldown:1,falloff:.5,applicationDelay:1.03,potency:940,validateAttempt:e=>e.hasResourceAvailable("ZANSHIN_READY")&&e.resources.get("KENKI").available(50),onConfirm:e=>{e.resources.get("KENKI").consume(50),e.tryConsumeResource("ZANSHIN_READY")},highlightIf:e=>e.hasResourceAvailable("ZANSHIN_READY")});ze("SAM","MEDITATE",60,"cd_MEDITATE",{rscType:"MEDITATE",cooldown:60,applicationDelay:.62,validateAttempt:e=>e.cooldowns.get("cd_GCD").stacksAvailable()>0,onConfirm:e=>{const t=e.config.adjustedSksGCD(2.5,e.getFukaModifier());e.cooldowns.get("cd_GCD").useStackWithRecast(e.config.getAfterTaxGCD(t))},onApplication:e=>e.startMeditateTimer()});Object.keys($m).forEach(e=>$n(e,`SMN/${ot[e].name}.png`));class qk extends $t{jobSpecificSelfTargetedBuffViewProps(){const t=["AETHERFLOW","IFRITS_FAVOR","TITANS_FAVOR","GARUDAS_FAVOR","CRIMSON_STRIKE_READY"];return[...Object.keys($m).map(a=>t.includes(a)?this.makeCommonTimerless(a):this.makeCommonTimer(a))]}jobSpecificResourceViewProps(t){const a=this.state.resources,l=Math.max(a.timeTillReady("FIRE_ATTUNEMENT"),a.timeTillReady("EARTH_ATTUNEMENT"),a.timeTillReady("WIND_ATTUNEMENT")),s=a.get("ACTIVE_DEMI").availableAmount(),c=a.timeTillReady("ACTIVE_DEMI");a.get("RUBY_ARCANUM").available(1),a.get("TOPAZ_ARCANUM").available(1),a.get("EMERALD_ARCANUM").available(1);const d=s===Cm.BAHAMUT?t.smn.bahamut:s===Cm.PHOENIX?t.smn.phoenix:t.smn.solar,h=a.get("FIRE_ATTUNEMENT").available(1)?t.smn.ruby:a.get("EARTH_ATTUNEMENT").available(1)?t.smn.topaz:t.smn.emerald,E=this.state.cooldowns.get("cd_SUMMON_LOCKOUT"),A=E.timeTillNextStackAvailable();return[{kind:"counter",name:_({en:"aetherflow"}),color:t.smn.aetherflow,currentStacks:a.get("AETHERFLOW").availableAmount(),maxStacks:2},{kind:"bar",name:_({en:"demi summon"}),color:d,progress:c===0?0:1-c/15,valueString:c.toFixed(3)},{kind:"attunement",aetherName:_({en:"aether"}),attunementName:_({en:"attunement"}),ruby:a.get("RUBY_ARCANUM").available(1),topaz:a.get("TOPAZ_ARCANUM").available(1),emerald:a.get("EMERALD_ARCANUM").available(1),attunementCount:Math.max(a.get("FIRE_ATTUNEMENT").availableAmount(),a.get("EARTH_ATTUNEMENT").availableAmount(),a.get("WIND_ATTUNEMENT").availableAmount()),timeRemaining:l,rubyColor:t.smn.ruby,topazColor:t.smn.topaz,emeraldColor:t.smn.emerald},{kind:"bar",name:_({en:"summon lock"}),color:h,progress:A>0?E.availableAmount()/E.maxValue:0,valueString:A.toFixed(3)}]}}const Kt=(e,t,a)=>{tt("SMN",e,t,a??{})};var Cm=(e=>(e[e.NONE=0]="NONE",e[e.SOLAR=1]="SOLAR",e[e.BAHAMUT=2]="BAHAMUT",e[e.PHOENIX=3]="PHOENIX",e))(Cm||{});const w0=15;Kt("AETHERFLOW",2);Kt("RUBY_ARCANUM",1);Kt("TOPAZ_ARCANUM",1);Kt("EMERALD_ARCANUM",1);Kt("FIRE_ATTUNEMENT",2,{timeout:30});Kt("EARTH_ATTUNEMENT",4,{timeout:30});Kt("WIND_ATTUNEMENT",4,{timeout:30});Kt("CRIMSON_STRIKE_READY",1);Kt("EVERLASTING_FLIGHT",1,{timeout:21});Kt("FURTHER_RUIN",1,{timeout:60});Kt("GARUDAS_FAVOR",1);Kt("IFRITS_FAVOR",1);Kt("TITANS_FAVOR",1);Kt("RADIANT_AEGIS",1,{timeout:30});Kt("REFULGENT_LUX",1,{timeout:30});Kt("REKINDLE",1,{timeout:30});Kt("UNDYING_FLAME",1,{timeout:15});Kt("RUBYS_GLIMMER",1,{timeout:30,warningOnTimeout:Fe.RubysGlimmerDrop});Kt("SEARING_LIGHT",1,{timeout:20});Kt("SLIPSTREAM",1,{timeout:15});Kt("ACTIVE_DEMI",3,{timeout:w0});Kt("NEXT_DEMI_CYCLE",3);Kt("DEMI_AUTO",4);const _I=3.163,Xk=new Map([["SUMMON_IFRIT_II",2.1],["SUMMON_GARUDA_II",2.1],["SUMMON_TITAN_II",2.1],["SUMMON_IFRIT",2.46],["SUMMON_GARUDA",2.1],["SUMMON_TITAN",2.46]]),II=new Map([["SUMMON_IFRIT_II",1.96],["SUMMON_GARUDA_II",1.29],["SUMMON_TITAN_II",1.96],["SUMMON_IFRIT",.936],["SUMMON_GARUDA",.8],["SUMMON_TITAN",.8],["ENKINDLE_BAHAMUT",.894],["ENKINDLE_PHOENIX",1.026],["ENKINDLE_SOLAR_BAHAMUT",.846]]),Zk=new Map([["SUMMON_IFRIT_II",6.29],["SUMMON_GARUDA_II",6.29],["SUMMON_TITAN_II",6.29],["SUMMON_IFRIT",4.6],["SUMMON_GARUDA",4.3],["SUMMON_TITAN",4.6]]);class Qk extends Jt{constructor(t){super(t);const a=this.hasTraitUnlocked("ENHANCED_SWIFTCAST")?40:60;this.cooldowns.set(new Ke("cd_SWIFTCAST",a,1,1));const l=this.hasTraitUnlocked("ENHANCED_RADIANT_AEGIS")?2:1;this.cooldowns.set(new Ke("cd_RADIANT_AEGIS",60,l,l)),this.cooldowns.set(new Ke("cd_DEMI_SUMMON",this.config.adjustedGCD(60),1,1)),this.cooldowns.set(new Ke("cd_SUMMON_LOCKOUT",5,1,1)),this.registerRecurringEvents([{groupedEffects:[{effectName:"SLIPSTREAM",appliedBy:["SLIPSTREAM"],isGroundTargeted:!0}]}],["SUMMON_BAHAMUT","SUMMON_PHOENIX","SUMMON_SOLAR_BAHAMUT"])}get statusPropsGenerator(){return new qk(this)}jobSpecificAddDamageBuffCovers(t,a){this.hasResourceAvailable("SEARING_LIGHT")&&t.addBuff(k.SearingLight)}get activeDemi(){return this.resources.get("ACTIVE_DEMI").availableAmount()}get nextDemi(){const t=this.resources.get("NEXT_DEMI_CYCLE").availableAmount();return this.hasTraitUnlocked("ENHANCED_SUMMON_BAHAMUT_II")?t===1?2:t===3?3:1:this.hasTraitUnlocked("ENHANCED_SUMMON_BAHAMUT")?t%2===0?2:3:2}get hasActivePet(){return this.activeDemi!==0||this.cooldowns.get("cd_SUMMON_LOCKOUT").stacksAvailable()===0}snapSearingAndTincture(t,a){const l=a.modifiers;this.hasResourceAvailable("SEARING_LIGHT")&&l.push(me.SearingLight),this.hasResourceAvailable("TINCTURE")&&(l.push(me.Tincture),t.addBuff(k.Tincture))}makePetPotency(t,a,l,s,c){const d=new bn({config:this.config,sourceTime:l,sourceSkill:a,aspect:pe.Other,basePotency:s,snapshotTime:this.getDisplayTime(),description:"",targetCount:t,falloff:c}),h=[me.SmnPet];return d.modifiers=h,d}handleDemiAuto(){if(!this.hasResourceAvailable("DEMI_AUTO"))return;const t=4-this.resources.get("DEMI_AUTO").availableAmount();if(t<0)return;const a=this.resources.get("DEMI_AUTO").node;if(a!==void 0){const l=a.getDotPotencies("DEMI_AUTO")[t];this.snapSearingAndTincture(a,l),l.snapshotTime=this.getDisplayTime(),D.resolvePotency(l)}this.tryConsumeResource("DEMI_AUTO"),this.addEvent(new Ge("demi auto",_I,()=>this.handleDemiAuto()))}startPetAutos(t,a){const l=this.resources.get("DEMI_AUTO"),s=this.activeDemi===1?160:150;l.gain(4),l.node=t;for(let c=0;c<4;c++)t.addDoTPotency(this.makePetPotency(1,a,this.getDisplayTime(),s),"DEMI_AUTO");this.addEvent(new Ge("first demi auto",_I,()=>this.handleDemiAuto()))}queuePetDamageEvent(t,a,l,s,c,d){const h=this.getDisplayTime();this.addEvent(new Ge(l+" pet snapshot",c,()=>{const E=this.makePetPotency(t.targetCount,l,h,s,.6);t.addPotency(E),this.snapSearingAndTincture(t,E),this.jobSpecificAddDamageBuffCovers(t,Yo("SMN",a)),this.addEvent(new Ge(l+" application",d,()=>D.resolvePotency(E)))}))}queueEnkindle(t,a){let l,s;a==="ENKINDLE_BAHAMUT"?(l="AKH_MORN",s=1300):a==="ENKINDLE_PHOENIX"?(l="REVELATION",s=1300):(l="EXODUS",s=1500);const c=this.resources.get("ACTIVE_DEMI").pendingChange;console.assert(c),c&&c.timeTillEvent<2.5&&D.reportWarning(Fe.LateEnkindle),this.queuePetDamageEvent(t,a,l,s,0,II.get(a))}queuePrimalSummon(t,a){let l=600;this.hasTraitUnlocked("ARCANE_MASTERY")?l=800:this.hasTraitUnlocked("ENKINDLE_II")&&(l=750);let s;a.includes("IFRIT")?s="INFERNO":a.includes("TITAN")?s="EARTHEN_FURY":s="AERIAL_BLAST",this.queuePetDamageEvent(t,a,s,l,Xk.get(a),II.get(a));const c=Zk.get(a);this.cooldowns.get("cd_SUMMON_LOCKOUT").useStackWithRecast(c)}}const Ze=(e,t,a)=>{const l=a.baseCastTime??0,s=a.baseRecastTime??2.5,c=l>0?ut(d=>d.tryConsumeResource("SWIFTCAST"),a.onConfirm??je):a.onConfirm;return oo("SMN",e,t,{...a,castTime:d=>d.config.adjustedCastTime(l),recastTime:d=>s<=1.5?s:d.config.adjustedGCD(s),potency:a.basePotency,jobPotencyModifiers:d=>{const h=[];return a.isPetAttack&&h.push(me.SmnPet),d.hasResourceAvailable("SEARING_LIGHT")&&h.push(me.SearingLight),h},isInstantFn:d=>d.hasResourceAvailable("SWIFTCAST")||l===0,onConfirm:c})},xi=(e,t,a,l)=>Nt("SMN",e,t,a,{jobPotencyModifiers:s=>s.hasResourceAvailable("SEARING_LIGHT")?[me.SearingLight]:[],...l});function da(e,t){const a=e.slice();return a.splice(t,1),a}const is=[{newSkill:"ASTRAL_IMPULSE",condition:e=>e.activeDemi===2},{newSkill:"FOUNTAIN_OF_FIRE",condition:e=>e.activeDemi===3},{newSkill:"UMBRAL_IMPULSE",condition:e=>e.activeDemi===1}];Ze("RUIN_III",54,{basePotency:[["NEVER",300],["RUIN_MASTERY_IV",310],["ARCANE_MASTERY",360]],baseCastTime:1.5,manaCost:300,replaceIf:is,applicationDelay:.8});Ze("ASTRAL_IMPULSE",58,{basePotency:[["NEVER",440],["ARCANE_MASTERY",500]],manaCost:300,replaceIf:da(is,0),applicationDelay:.67,validateAttempt:is[0].condition,startOnHotbar:!1});Ze("FOUNTAIN_OF_FIRE",80,{basePotency:[["NEVER",540],["ARCANE_MASTERY",580]],manaCost:300,replaceIf:da(is,1),applicationDelay:1.07,validateAttempt:is[1].condition,startOnHotbar:!1});Ze("UMBRAL_IMPULSE",100,{basePotency:620,manaCost:300,replaceIf:da(is,2),applicationDelay:.8,validateAttempt:is[2].condition,startOnHotbar:!1});const no=[{newSkill:"ASTRAL_FLARE",condition:e=>e.activeDemi===2},{newSkill:"BRAND_OF_PURGATORY",condition:e=>e.activeDemi===3},{newSkill:"UMBRAL_FLARE",condition:e=>e.activeDemi===1}];Ze("OUTBURST",26,{autoUpgrade:{trait:"OUTBURST_MASTERY",otherSkill:"TRI_DISASTER"},basePotency:100,baseCastTime:1.5,manaCost:300,replaceIf:no,applicationDelay:.8,falloff:0});Ze("TRI_DISASTER",74,{autoDowngrade:{trait:"OUTBURST_MASTERY",otherSkill:"OUTBURST"},basePotency:120,baseCastTime:1.5,manaCost:300,replaceIf:no,applicationDelay:.8,falloff:0});Ze("ASTRAL_FLARE",58,{basePotency:180,manaCost:300,replaceIf:da(no,0),applicationDelay:.54,validateAttempt:no[0].condition,falloff:0,startOnHotbar:!1});Ze("BRAND_OF_PURGATORY",80,{basePotency:240,manaCost:300,replaceIf:da(no,1),applicationDelay:.8,validateAttempt:no[1].condition,falloff:0,startOnHotbar:!1});Ze("UMBRAL_FLARE",100,{basePotency:280,manaCost:300,replaceIf:da(no,2),applicationDelay:.53,validateAttempt:no[2].condition,falloff:0,startOnHotbar:!1});const $k=[{newSkill:"RUBY_RUIN_III",condition:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT")},{newSkill:"TOPAZ_RUIN_III",condition:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT")},{newSkill:"EMERALD_RUIN_III",condition:e=>e.hasResourceAvailable("WIND_ATTUNEMENT")}];Ze("GEMSHINE",6,{replaceIf:$k,applicationDelay:0,validateAttempt:e=>!1});Ze("RUBY_RUIN_III",54,{autoUpgrade:{trait:"RUIN_MASTERY_III",otherSkill:"RUBY_RITE"},basePotency:410,baseCastTime:2.8,baseRecastTime:3,applicationDelay:.62,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("FIRE_ATTUNEMENT"),startOnHotbar:!1});Ze("TOPAZ_RUIN_III",54,{autoUpgrade:{trait:"RUIN_MASTERY_III",otherSkill:"TOPAZ_RITE"},basePotency:300,applicationDelay:.62,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("EARTH_ATTUNEMENT"),startOnHotbar:!1});Ze("EMERALD_RUIN_III",54,{autoUpgrade:{trait:"RUIN_MASTERY_III",otherSkill:"EMERALD_RITE"},baseRecastTime:1.5,basePotency:180,applicationDelay:.62,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("WIND_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("WIND_ATTUNEMENT"),startOnHotbar:!1});Ze("RUBY_RITE",72,{autoDowngrade:{trait:"RUIN_MASTERY_III",otherSkill:"RUBY_RITE"},basePotency:[["NEVER",480],["RUIN_MASTERY_IV",510],["ARCANE_MASTERY",540]],baseCastTime:2.8,baseRecastTime:3,applicationDelay:.62,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("FIRE_ATTUNEMENT"),startOnHotbar:!1});Ze("TOPAZ_RITE",72,{autoDowngrade:{trait:"RUIN_MASTERY_III",otherSkill:"TOPAZ_RUIN_III"},basePotency:[["NEVER",320],["RUIN_MASTERY_IV",330],["ARCANE_MASTERY",340]],applicationDelay:.62,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT"),onConfirm:e=>{e.tryConsumeResource("EARTH_ATTUNEMENT"),e.gainStatus("TITANS_FAVOR")},startOnHotbar:!1});Ze("EMERALD_RITE",72,{autoDowngrade:{trait:"RUIN_MASTERY_III",otherSkill:"EMERALD_RUIN_III"},baseRecastTime:1.5,basePotency:[["NEVER",220],["RUIN_MASTERY_IV",230],["ARCANE_MASTERY",240]],applicationDelay:.62,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("WIND_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("WIND_ATTUNEMENT"),startOnHotbar:!1});const Jk=[{newSkill:"RUBY_OUTBURST",condition:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT")},{newSkill:"TOPAZ_OUTBURST",condition:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT")},{newSkill:"EMERALD_OUTBURST",condition:e=>e.hasResourceAvailable("WIND_ATTUNEMENT")}];Ze("PRECIOUS_BRILLIANCE",26,{replaceIf:Jk,applicationDelay:0,validateAttempt:e=>!1});Ze("RUBY_OUTBURST",26,{autoUpgrade:{trait:"OUTBURST_MASTERY",otherSkill:"RUBY_DISASTER"},basePotency:160,baseCastTime:2.8,baseRecastTime:3,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("FIRE_ATTUNEMENT"),falloff:0,startOnHotbar:!1});Ze("TOPAZ_OUTBURST",26,{autoUpgrade:{trait:"OUTBURST_MASTERY",otherSkill:"TOPAZ_DISASTER"},basePotency:110,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("EARTH_ATTUNEMENT"),falloff:0,startOnHotbar:!1});Ze("EMERALD_OUTBURST",26,{autoUpgrade:{trait:"OUTBURST_MASTERY",otherSkill:"EMERALD_DISASTER"},baseRecastTime:1.5,basePotency:70,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("WIND_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("WIND_ATTUNEMENT"),falloff:0,startOnHotbar:!1});Ze("RUBY_DISASTER",74,{autoDowngrade:{trait:"OUTBURST_MASTERY",otherSkill:"RUBY_OUTBURST"},autoUpgrade:{trait:"OUTBURST_MASTERY_II",otherSkill:"RUBY_CATASTROPHE"},basePotency:190,baseCastTime:2.8,baseRecastTime:3,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("FIRE_ATTUNEMENT"),falloff:0,startOnHotbar:!1});Ze("TOPAZ_DISASTER",74,{autoDowngrade:{trait:"OUTBURST_MASTERY",otherSkill:"TOPAZ_OUTBURST"},autoUpgrade:{trait:"OUTBURST_MASTERY_II",otherSkill:"TOPAZ_CATASTROPHE"},basePotency:130,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("EARTH_ATTUNEMENT"),falloff:0,startOnHotbar:!1});Ze("EMERALD_DISASTER",74,{autoDowngrade:{trait:"OUTBURST_MASTERY",otherSkill:"EMERALD_OUTBURST"},autoUpgrade:{trait:"OUTBURST_MASTERY_II",otherSkill:"EMERALD_CATASTROPHE"},baseRecastTime:1.5,basePotency:90,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("WIND_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("WIND_ATTUNEMENT"),falloff:0,startOnHotbar:!1});Ze("RUBY_CATASTROPHE",82,{autoDowngrade:{trait:"OUTBURST_MASTERY_II",otherSkill:"RUBY_DISASTER"},basePotency:210,baseCastTime:2.8,baseRecastTime:3,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("FIRE_ATTUNEMENT"),falloff:0,startOnHotbar:!1});Ze("TOPAZ_CATASTROPHE",82,{autoDowngrade:{trait:"OUTBURST_MASTERY_II",otherSkill:"TOPAZ_DISASTER"},basePotency:140,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT"),onConfirm:e=>{e.tryConsumeResource("EARTH_ATTUNEMENT"),e.gainStatus("TITANS_FAVOR")},falloff:0,startOnHotbar:!1});Ze("EMERALD_CATASTROPHE",82,{autoDowngrade:{trait:"OUTBURST_MASTERY_II",otherSkill:"EMERALD_DISASTER"},baseRecastTime:1.5,basePotency:100,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("WIND_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("WIND_ATTUNEMENT"),falloff:0,startOnHotbar:!1});const eP=[{newSkill:"SUMMON_BAHAMUT",condition:e=>e.nextDemi===2},{newSkill:"SUMMON_PHOENIX",condition:e=>e.nextDemi===3},{newSkill:"SUMMON_SOLAR_BAHAMUT",condition:e=>e.nextDemi===1}],tP={cdName:"cd_DEMI_SUMMON",cooldown:60,maxCharges:1};[{name:"SUMMON_BAHAMUT",autoName:"WYRMWAVE",level:70,activeValue:2},{name:"SUMMON_PHOENIX",autoName:"SCARLET_FLAME",level:80,activeValue:3},{name:"SUMMON_SOLAR_BAHAMUT",autoName:"LUXWAVE",level:100,activeValue:1}].forEach((e,t)=>Ze(e.name,e.level,{applicationDelay:.76,replaceIf:da(eP,t),secondaryCooldown:tP,validateAttempt:a=>!a.hasActivePet&&a.nextDemi===e.activeValue,drawsAggro:!0,onConfirm:(a,l)=>{a.gainStatus("ACTIVE_DEMI",e.activeValue),a.startPetAutos(l,e.autoName),["RUBY_ARCANUM","TOPAZ_ARCANUM","EMERALD_ARCANUM"].forEach(s=>a.gainStatus(s,1)),["FIRE_ATTUNEMENT","EARTH_ATTUNEMENT","WIND_ATTUNEMENT"].forEach(s=>a.tryConsumeResource(s,!0)),a.tryConsumeResource("IFRITS_FAVOR"),a.tryConsumeResource("CRIMSON_STRIKE_READY"),a.tryConsumeResource("GARUDAS_FAVOR"),a.tryConsumeResource("TITANS_FAVOR"),e.name==="SUMMON_SOLAR_BAHAMUT"&&a.gainStatus("REFULGENT_LUX"),a.addEvent(new Ge("update next demi",w0,()=>{a.resources.get("NEXT_DEMI_CYCLE").gainWrapping(1)}))},onApplication:a=>{a.isInCombat()||a.resources.get("IN_COMBAT").gain(1)},startOnHotbar:t===0}));const pf=e=>!e.hasActivePet&&e.hasResourceAvailable("RUBY_ARCANUM"),_f=e=>!e.hasActivePet&&e.hasResourceAvailable("TOPAZ_ARCANUM"),If=e=>!e.hasActivePet&&e.hasResourceAvailable("EMERALD_ARCANUM"),B0=e=>(t,a)=>{t.tryConsumeResource("RUBY_ARCANUM"),t.gainStatus("FIRE_ATTUNEMENT",2),t.queuePrimalSummon(a,e),t.tryConsumeResource("EARTH_ATTUNEMENT",!0),t.tryConsumeResource("WIND_ATTUNEMENT",!0),t.tryConsumeResource("TITANS_FAVOR"),t.tryConsumeResource("GARUDAS_FAVOR")},F0=e=>(t,a)=>{t.tryConsumeResource("TOPAZ_ARCANUM"),t.gainStatus("EARTH_ATTUNEMENT",4),t.queuePrimalSummon(a,e),t.tryConsumeResource("FIRE_ATTUNEMENT",!0),t.tryConsumeResource("WIND_ATTUNEMENT",!0),t.tryConsumeResource("IFRITS_FAVOR"),t.tryConsumeResource("CRIMSON_STRIKE_READY"),t.tryConsumeResource("GARUDAS_FAVOR")},j0=e=>(t,a)=>{t.tryConsumeResource("EMERALD_ARCANUM"),t.gainStatus("WIND_ATTUNEMENT",4),t.queuePrimalSummon(a,e),t.tryConsumeResource("FIRE_ATTUNEMENT",!0),t.tryConsumeResource("EARTH_ATTUNEMENT",!0),t.tryConsumeResource("IFRITS_FAVOR"),t.tryConsumeResource("CRIMSON_STRIKE_READY"),t.tryConsumeResource("TITANS_FAVOR")};Ze("SUMMON_IFRIT",30,{autoUpgrade:{trait:"ENKINDLE_II",otherSkill:"SUMMON_IFRIT_II"},applicationDelay:0,highlightIf:pf,validateAttempt:pf,onConfirm:B0("SUMMON_IFRIT"),falloff:.6});Ze("SUMMON_TITAN",35,{autoUpgrade:{trait:"ENKINDLE_II",otherSkill:"SUMMON_TITAN_II"},applicationDelay:0,highlightIf:_f,validateAttempt:_f,onConfirm:F0("SUMMON_TITAN"),falloff:.6});Ze("SUMMON_GARUDA",45,{autoUpgrade:{trait:"ENKINDLE_II",otherSkill:"SUMMON_GARUDA_II"},applicationDelay:0,highlightIf:If,validateAttempt:If,onConfirm:j0("SUMMON_GARUDA"),falloff:.6});Ze("SUMMON_IFRIT_II",90,{autoDowngrade:{trait:"ENKINDLE_II",otherSkill:"SUMMON_IFRIT"},applicationDelay:0,highlightIf:pf,validateAttempt:pf,onConfirm:ut(e=>e.gainStatus("IFRITS_FAVOR"),B0("SUMMON_IFRIT_II")),falloff:.6});Ze("SUMMON_TITAN_II",90,{autoDowngrade:{trait:"ENKINDLE_II",otherSkill:"SUMMON_TITAN"},applicationDelay:0,highlightIf:_f,validateAttempt:_f,onConfirm:F0("SUMMON_TITAN_II"),falloff:.6});Ze("SUMMON_GARUDA_II",90,{autoDowngrade:{trait:"ENKINDLE_II",otherSkill:"SUMMON_GARUDA"},applicationDelay:0,highlightIf:If,validateAttempt:If,onConfirm:ut(e=>e.gainStatus("GARUDAS_FAVOR"),j0("SUMMON_GARUDA_II")),falloff:.6});const sa=[{newSkill:"DEATHFLARE",condition:e=>e.activeDemi===2},{newSkill:"REKINDLE",condition:e=>e.activeDemi===3},{newSkill:"SUNFLARE",condition:e=>e.activeDemi===1},{newSkill:"CRIMSON_CYCLONE",condition:e=>e.hasResourceAvailable("IFRITS_FAVOR")},{newSkill:"CRIMSON_STRIKE",condition:e=>e.hasResourceAvailable("CRIMSON_STRIKE_READY")},{newSkill:"MOUNTAIN_BUSTER",condition:e=>e.hasResourceAvailable("TITANS_FAVOR")},{newSkill:"SLIPSTREAM",condition:e=>e.hasResourceAvailable("GARUDAS_FAVOR")}];xi("ASTRAL_FLOW",60,"cd_ASTRAL_FLOW",{applicationDelay:0,cooldown:20,replaceIf:sa,validateAttempt:e=>!1});xi("DEATHFLARE",60,"cd_ASTRAL_FLOW",{potency:500,applicationDelay:.8,cooldown:20,replaceIf:da(sa,0),highlightIf:e=>!0,validateAttempt:sa[0].condition,falloff:.6,startOnHotbar:!1});xi("REKINDLE",80,"cd_ASTRAL_FLOW",{applicationDelay:1.03,cooldown:20,replaceIf:da(sa,1),highlightIf:e=>!0,validateAttempt:sa[1].condition,onConfirm:e=>e.gainStatus("REKINDLE"),startOnHotbar:!1});xi("SUNFLARE",100,"cd_ASTRAL_FLOW",{potency:800,applicationDelay:.8,cooldown:20,replaceIf:da(sa,2),highlightIf:e=>!0,validateAttempt:sa[2].condition,falloff:.6,startOnHotbar:!1});Ze("CRIMSON_CYCLONE",86,{basePotency:[["NEVER",430],["ARCANE_MASTERY",490]],applicationDelay:.8,replaceIf:da(sa,3),highlightIf:e=>!0,validateAttempt:sa[3].condition,onConfirm:e=>{e.tryConsumeResource("IFRITS_FAVOR"),e.gainStatus("CRIMSON_STRIKE_READY")},falloff:.65,startOnHotbar:!1});Ze("CRIMSON_STRIKE",86,{basePotency:[["NEVER",430],["ARCANE_MASTERY",490]],applicationDelay:.76,replaceIf:da(sa,4),highlightIf:e=>!0,validateAttempt:sa[4].condition,onConfirm:e=>e.tryConsumeResource("CRIMSON_STRIKE_READY"),falloff:.65,startOnHotbar:!1});xi("MOUNTAIN_BUSTER",86,"cd_MOUNTAIN_BUSTER",{potency:[["NEVER",150],["ARCANE_MASTERY",160]],cooldown:1,applicationDelay:.76,replaceIf:da(sa,5),highlightIf:e=>!0,validateAttempt:sa[5].condition,onConfirm:e=>e.tryConsumeResource("TITANS_FAVOR"),falloff:.7,startOnHotbar:!1});Ze("SLIPSTREAM",86,{baseCastTime:3,baseRecastTime:3.5,basePotency:[["NEVER",430],["ARCANE_MASTERY",490]],applicationDelay:1.02,replaceIf:da(sa,6),highlightIf:e=>!0,validateAttempt:sa[6].condition,onConfirm:(e,t)=>{e.tryConsumeResource("GARUDAS_FAVOR"),e.addDoTPotencies({node:t,effectName:"SLIPSTREAM",skillName:"SLIPSTREAM",tickPotency:30,speedStat:"sps"})},onApplication:(e,t)=>e.applyDoT("SLIPSTREAM",t),falloff:.65,startOnHotbar:!1});const nP=[{newSkill:"ENKINDLE_BAHAMUT",condition:e=>[0,2].includes(e.activeDemi)},{newSkill:"ENKINDLE_PHOENIX",condition:e=>e.activeDemi===3},{newSkill:"ENKINDLE_SOLAR_BAHAMUT",condition:e=>e.activeDemi===1}];[{name:"ENKINDLE_BAHAMUT",level:70,activeValue:2,falloff:.6},{name:"ENKINDLE_PHOENIX",level:80,activeValue:3,falloff:void 0},{name:"ENKINDLE_SOLAR_BAHAMUT",level:100,activeValue:1,falloff:.6}].forEach((e,t)=>xi(e.name,e.level,"cd_ENKINDLE",{applicationDelay:0,cooldown:20,replaceIf:da(nP,t),validateAttempt:a=>a.activeDemi===e.activeValue,onConfirm:(a,l)=>a.queueEnkindle(l,e.name),startOnHotbar:t===0,falloff:e.falloff}));Ze("RUIN_IV",62,{basePotency:[["NEVER",430],["ARCANE_MASTERY",490]],manaCost:400,applicationDelay:.8,falloff:.6,highlightIf:e=>e.hasResourceAvailable("FURTHER_RUIN"),validateAttempt:e=>e.hasResourceAvailable("FURTHER_RUIN"),onConfirm:e=>e.tryConsumeResource("FURTHER_RUIN")});[{name:"ENERGY_DRAIN",level:10,potency:200,applicationDelay:1.07},{name:"ENERGY_SIPHON",level:52,potency:100,applicationDelay:1.02,falloff:0}].forEach(e=>xi(e.name,e.level,"cd_ENERGY_DRAIN",{...e,cooldown:60,onConfirm:t=>{t.resources.get("AETHERFLOW").available(1)&&D.reportWarning(Fe.AetherflowOvercap),t.gainStatus("AETHERFLOW",2),t.gainStatus("FURTHER_RUIN")}}));[{name:"FESTER",level:10,potency:340,applicationDelay:.71,autoUpgrade:{trait:"ENHANCED_FESTER",otherSkill:"NECROTIZE"}},{name:"PAINFLARE",level:40,potency:150,applicationDelay:.44,falloff:0},{name:"NECROTIZE",level:92,potency:460,applicationDelay:.71,autoDowngrade:{trait:"ENHANCED_FESTER",otherSkill:"FESTER"}}].forEach(e=>xi(e.name,e.level,"cd_AETHERFLOW",{...e,cooldown:1,validateAttempt:t=>t.hasResourceAvailable("AETHERFLOW"),onConfirm:t=>t.tryConsumeResource("AETHERFLOW")}));ze("SMN","SEARING_LIGHT",66,"cd_SEARING_LIGHT",{rscType:"SEARING_LIGHT",applicationDelay:0,cooldown:120,onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_SEARING_LIGHT")&&e.gainStatus("RUBYS_GLIMMER")},replaceIf:[{newSkill:"SEARING_FLASH",condition:e=>e.hasResourceAvailable("RUBYS_GLIMMER")}]});xi("SEARING_FLASH",96,"cd_SEARING_FLASH",{potency:600,applicationDelay:.8,cooldown:1,falloff:0,startOnHotbar:!1,highlightIf:e=>e.hasResourceAvailable("RUBYS_GLIMMER"),validateAttempt:e=>e.hasResourceAvailable("RUBYS_GLIMMER"),onConfirm:e=>e.tryConsumeResource("RUBYS_GLIMMER")});ze("SMN","RADIANT_AEGIS",2,"cd_RADIANT_AEGIS",{rscType:"RADIANT_AEGIS",applicationDelay:.45,cooldown:60,maxCharges:2,validateAttempt:e=>!e.hasActivePet});xi("LUX_SOLARIS",100,"cd_LUX_SOLARIS",{applicationDelay:.62,cooldown:60,highlightIf:e=>e.hasResourceAvailable("REFULGENT_LUX"),validateAttempt:e=>e.hasResourceAvailable("REFULGENT_LUX"),onConfirm:e=>e.tryConsumeResource("REFULGENT_LUX")});Ze("RESURRECTION",12,{baseCastTime:8,manaCost:2400,applicationDelay:1.11,basePotency:0});Object.keys(eC).forEach(e=>$n(e,`SGE/${ot[e].name}.png`));const aP=["EUKRASIAN_DOSIS","EUKRASIAN_DOSIS_II","EUKRASIAN_DOSIS_III","EUKRASIAN_DYSKRASIA"],iP=["EUKRASIAN_DIAGNOSIS","KRASIS","TAUROCHOLE","HAIMA","HAIMATINON","KARDION"],lP=["EUKRASIA","SOTERIA","ZOE","PHILOSOPHIA","KARDIA"],oP=["EUKRASIAN_PROGNOSIS","PANHAIMA","PANHAIMATINON","KERACHOLE","KERAKEIA","EUDAIMONIA","HOLOS","HOLOSAKOS"];class sP extends $t{jobSpecificOtherTargetedBuffViewProps(){return[...aP,...iP].map(t=>t==="KARDION"?this.makeCommonTimerless(t,!1):this.makeCommonTimer(t,!1))}jobSpecificSelfTargetedBuffViewProps(){return[...oP,...lP].map(t=>t==="KARDIA"||t==="EUKRASIA"?this.makeCommonTimerless(t):this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){const a=this.state.resources.get("ADDERSGALL"),l=Pt("SGE","ADDERSGALL").maxTimeout,s=a.availableAmount()<a.maxValue?this.state.resources.timeTillReady("ADDERSGALL"):l,c=this.state.resources.get("ADDERSTING");return[{kind:"counter",name:_({en:ot.ADDERSGALL.name}),color:t.sge.addersgall,currentStacks:a.availableAmount(),maxStacks:a.maxValue},{kind:"bar",name:_({en:ot.ADDERSGALL.name+" timer"}),color:t.sge.addersgall,progress:1-s/l,valueString:s.toFixed(3)},{kind:"counter",name:_({en:ot.ADDERSTING.name}),color:t.sge.addersting,currentStacks:c.availableAmount(),maxStacks:c.maxValue}]}}const Ot=(e,t,a)=>{tt("SGE",e,t,a??{})};Ot("ADDERSGALL",3,{default:3,timeout:20});Ot("ADDERSTING",3,{default:3});Ot("EUKRASIA",1);Ot("KARDIA",1,{default:1});Ot("KARDION",1,{default:1});Ot("EUKRASIAN_DIAGNOSIS",1,{timeout:30});Ot("DIFFERENTIAL_DIAGNOSIS",1,{timeout:30});Ot("EUKRASIAN_PROGNOSIS",1,{timeout:30});Ot("HAIMA",1,{timeout:15});Ot("HAIMATINON",5,{timeout:15});Ot("PANHAIMA",1,{timeout:15});Ot("PANHAIMATINON",5,{timeout:15});Ot("PHYSIS_II",1,{timeout:15});Ot("AUTOPHYSIS",1,{timeout:15});Ot("PHILOSOPHIA",1,{timeout:20});Ot("EUDAIMONIA",1,{timeout:20});Ot("HOLOS",1,{timeout:20});Ot("HOLOSAKOS",1,{timeout:30});Ot("SOTERIA",4,{timeout:15});Ot("ZOE",1,{timeout:30});Ot("KRASIS",1,{timeout:10});Ot("KERACHOLE",1,{timeout:15});Ot("KERAKEIA",1,{timeout:15});Ot("TAUROCHOLE",1,{timeout:15});Ot("EUKRASIAN_DOSIS",1,{timeout:30});Ot("EUKRASIAN_DOSIS_II",1,{timeout:30});Ot("EUKRASIAN_DOSIS_III",1,{timeout:30});Ot("EUKRASIAN_DYSKRASIA",1,{timeout:30});class rP extends Jt{constructor(t){if(super(t),this.hasTraitUnlocked("ENHANCED_SWIFTCAST")||this.cooldowns.set(new Ke("cd_SWIFTCAST",60,1,1)),!this.hasTraitUnlocked("ENHANCED_PHYSIS_II")){const a=ll(this.job).get("AUTOPHYSIS");a.maxTimeout=10,ll(this.job).set("AUTOPHYSIS",a)}this.hasTraitUnlocked("ENHANCED_SOTERIA")||this.cooldowns.set(new Ke("cd_SOTERIA",90,1,1)),this.hasTraitUnlocked("ENHANCED_ZOE")||this.cooldowns.set(new Ke("cd_ZOE",120,1,1)),this.registerRecurringEvents([{reportName:_({en:"Eukrasian DoT"}),groupedEffects:[{effectName:"EUKRASIAN_DOSIS",appliedBy:["EUKRASIAN_DOSIS"]},{effectName:"EUKRASIAN_DOSIS_II",appliedBy:["EUKRASIAN_DOSIS_II"]},{effectName:"EUKRASIAN_DOSIS_III",appliedBy:["EUKRASIAN_DOSIS_III"]},{effectName:"EUKRASIAN_DYSKRASIA",appliedBy:["EUKRASIAN_DYSKRASIA"]}]},{isHealing:!0,groupedEffects:[{effectName:"PHYSIS_II",appliedBy:["PHYSIS_II"]}]},{isHealing:!0,groupedEffects:[{effectName:"KERAKEIA",appliedBy:["KERACHOLE"]}]}])}get statusPropsGenerator(){return new sP(this)}jobSpecificRegisterRecurringEvents(){let t=a=>{const l=Pt("SGE","ADDERSGALL");this.hasResourceAvailable("ADDERSGALL",l.maxValue)||this.resources.get("ADDERSGALL").gain(1),this.resources.addResourceEvent({rscType:"ADDERSGALL",name:"gain addersgall if not currently capped",delay:l.maxTimeout,fnOnRsc:t})};t(this.resources.get("ADDERSGALL"))}jobSpecificAddHealingBuffCovers(t,a){this.hasResourceAvailable("AUTOPHYSIS")&&t.addBuff(k.Autophysis),this.hasResourceAvailable("KRASIS")&&t.addBuff(k.Krasis),a.cdName==="cd_GCD"&&(this.hasResourceAvailable("ZOE")&&t.addBuff(k.Zoe),this.hasResourceAvailable("PHILOSOPHIA")&&t.addBuff(k.Philosophia))}consumeAddersgall(){const t=Pt("SGE","ADDERSGALL");this.hasResourceAvailable("ADDERSGALL",t.maxValue)&&this.resources.get("ADDERSGALL").overrideTimer(this,t.maxTimeout),this.tryConsumeResource("ADDERSGALL"),this.resources.get("MANA").gain(700)}addPepsisPotency(t,a){const l=new bn({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:"PEPSIS",aspect:pe.Other,basePotency:t==="EUKRASIAN_DIAGNOSIS"?450:350,description:Zn(t),targetCount:t==="EUKRASIAN_DIAGNOSIS"?1:this.partySize,snapshotTime:this.getDisplayTime()});if(this.hasResourceAvailable("TINCTURE")&&l.modifiers.push(me.Tincture),this.hasResourceAvailable("AUTOPHYSIS")&&l.modifiers.push(me.Autophysis),this.hasResourceAvailable("KRASIS")){if(t==="EUKRASIAN_PROGNOSIS"){const s=new bn({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:"PEPSIS",aspect:pe.Other,basePotency:l.base,description:Zn(t),targetCount:l.targetCount-1,snapshotTime:this.getDisplayTime()});a.addHoTPotency(s,"PEPSIS"),l.targetCount=1,l.description+=", "+Zn("KRASIS")}l.modifiers.push(me.Krasis)}a.addHoTPotency(l,"PEPSIS")}addHaimaExpirationPotency(t,a){if(!(t==="HAIMA"||t==="PANHAIMA"))return;const l=new bn({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t==="HAIMA"?"HAIMA":"PANHAIMA",aspect:pe.Other,basePotency:t==="HAIMA"?150:100,description:"",targetCount:t==="HAIMA"?1:this.partySize,snapshotTime:this.getDisplayTime()});if(this.hasResourceAvailable("TINCTURE")&&l.modifiers.push(me.Tincture),this.hasResourceAvailable("AUTOPHYSIS")&&l.modifiers.push(me.Autophysis),this.hasResourceAvailable("KRASIS")){if(t==="PANHAIMA"){const s=new bn({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:"PANHAIMA",aspect:pe.Other,basePotency:100,description:"",targetCount:this.partySize-1,snapshotTime:this.getDisplayTime()});a.addHoTPotency(s,t),l.targetCount=1}l.modifiers.push(me.Krasis)}a.addHoTPotency(l,t)}handleHaimaExpiration(t,a){if(!(t==="HAIMA"||t==="PANHAIMA"))return;const l=t==="HAIMA"?"HAIMATINON":"PANHAIMATINON",s=this.resources.get(l).availableAmount();s<=0||this.addEvent(new Ge(`${ot[t].name} expiration heal`,.001,()=>{a.getHotPotencies(t).forEach(c=>{c.description=Zn(t)+" "+_({en:"expiration"})+" ("+s+" "+_({en:"stacks"})+")",t==="PANHAIMA"&&c.modifiers.includes(me.Krasis)&&(c.description+=", "+Zn("KRASIS")),c.base*=s,D.resolveHealingPotency(c)})}))}addHealingMagicPotencyModifiers(t){this.hasResourceAvailable("ZOE")&&t.push(me.Zoe),this.hasResourceAvailable("PHILOSOPHIA")&&t.push(me.Philosophia)}addHealingActionPotencyModifiers(t){this.hasResourceAvailable("AUTOPHYSIS")&&t.push(me.Autophysis),this.hasResourceAvailable("KRASIS")&&t.push(me.Krasis)}}const ln=(e,t,a)=>{const l=h=>h.config.adjustedCastTime(1.5),s=h=>h.config.adjustedGCD(2.5),c=h=>{if(!a.healingPotency)return[];const E=[];return h.addHealingMagicPotencyModifiers(E),h.addHealingActionPotencyModifiers(E),E},d=ut(h=>{a.castTime!==0&&h.tryConsumeResource("SWIFTCAST")},(h,E)=>{if(!(h.hasResourceAvailable("KARDIA")&&E.getInitialPotency()))return;const A=new bn({config:h.config,sourceTime:h.getDisplayTime(),sourceSkill:e,aspect:pe.Other,basePotency:h.hasTraitUnlocked("ENHANCED_HEALING_MAGIC")?170:130,description:Zn("KARDIA"),targetCount:1,snapshotTime:h.getDisplayTime()});h.hasResourceAvailable("TINCTURE")&&A.modifiers.push(me.Tincture),h.hasResourceAvailable("SOTERIA")&&A.modifiers.push(me.Soteria),h.addHealingActionPotencyModifiers(A.modifiers),E.addHoTPotency(A,"KARDION")},(h,E)=>{if(!h.hasResourceAvailable("EUDAIMONIA"))return;const A=new bn({config:h.config,sourceTime:h.getDisplayTime(),sourceSkill:e,aspect:pe.Other,basePotency:150,description:Zn("EUDAIMONIA"),targetCount:h.partySize,snapshotTime:h.getDisplayTime()});h.hasResourceAvailable("TINCTURE")&&A.modifiers.push(me.Tincture),h.addHealingActionPotencyModifiers(A.modifiers),E.addHoTPotency(A,"EUDAIMONIA")},h=>{a.healingPotency&&h.tryConsumeResource("ZOE")},a.onConfirm??je);return oo("SGE",e,t,{...a,castTime:a.castTime??l,recastTime:a.recastTime??s,isInstantFn:h=>h.hasResourceAvailable("SWIFTCAST"),jobHealingPotencyModifiers:c,onConfirm:d,onApplication:ut((h,E)=>{const A=E.getHotPotencies("KARDION"),R=E.getHotPotencies("EUDAIMONIA");A.length>0&&(D.resolveHealingPotency(A[0]),h.tryConsumeResource("SOTERIA")),R.forEach(T=>{D.resolveHealingPotency(T)})},a.onApplication??je)})},_n=(e,t,a,l)=>Nt("SGE",e,t,a,{...l,jobHealingPotencyModifiers:c=>{if(!l.healingPotency)return[];const d=[];return c.addHealingActionPotencyModifiers(d),d}}),zR=(e,t,a,l)=>ze("SGE",e,t,a,l);ln("EUKRASIA",30,{castTime:0,recastTime:1,applicationDelay:0,validateAttempt:e=>!e.hasResourceAvailable("EUKRASIA"),onConfirm:e=>e.gainStatus("EUKRASIA")});ln("DOSIS",1,{replaceIf:[{condition:e=>e.hasResourceAvailable("EUKRASIA"),newSkill:"EUKRASIAN_DOSIS"}],autoUpgrade:{trait:"OFFENSIVE_MAGIC_MASTERY",otherSkill:"DOSIS_II"},manaCost:300,potency:300,applicationDelay:.67});ln("DOSIS_II",72,{startOnHotbar:!1,replaceIf:[{condition:e=>e.hasResourceAvailable("EUKRASIA"),newSkill:"EUKRASIAN_DOSIS_II"}],autoUpgrade:{trait:"OFFENSIVE_MAGIC_MASTERY_II",otherSkill:"DOSIS_III"},manaCost:400,potency:320,applicationDelay:.67});ln("DOSIS_III",82,{startOnHotbar:!1,replaceIf:[{condition:e=>e.hasResourceAvailable("EUKRASIA"),newSkill:"EUKRASIAN_DOSIS_III"}],manaCost:400,potency:[["NEVER",330],["MAGICK_MASTERY_HEALER",370]],applicationDelay:.67});ln("EUKRASIAN_DOSIS",30,{startOnHotbar:!1,manaCost:400,castTime:0,recastTime:1.5,applicationDelay:.76,drawsAggro:!0,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"EUKRASIAN_DOSIS",skillName:"EUKRASIAN_DOSIS",tickPotency:40,speedStat:"sps"}),e.tryConsumeResource("EUKRASIA")},onApplication:(e,t)=>{e.applyDoT("EUKRASIAN_DOSIS",t)}});ln("EUKRASIAN_DOSIS_II",72,{startOnHotbar:!1,manaCost:400,castTime:0,recastTime:1.5,applicationDelay:.76,drawsAggro:!0,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"EUKRASIAN_DOSIS_II",skillName:"EUKRASIAN_DOSIS_II",tickPotency:60,speedStat:"sps"}),e.tryConsumeResource("EUKRASIA")},onApplication:(e,t)=>{e.applyDoT("EUKRASIAN_DOSIS_II",t)}});ln("EUKRASIAN_DOSIS_III",82,{startOnHotbar:!1,manaCost:400,castTime:0,recastTime:1.5,applicationDelay:.76,drawsAggro:!0,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"EUKRASIAN_DOSIS_III",skillName:"EUKRASIAN_DOSIS_III",tickPotency:80,speedStat:"sps"}),e.tryConsumeResource("EUKRASIA")},onApplication:(e,t)=>{e.applyDoT("EUKRASIAN_DOSIS_III",t)}});ln("TOXIKON",66,{autoUpgrade:{trait:"OFFENSIVE_MAGIC_MASTERY_II",otherSkill:"TOXIKON_II"},potency:[["NEVER",240],["OFFENSIVE_MAGIC_MASTERY",300]],falloff:.5,applicationDelay:1.2,castTime:0,validateAttempt:e=>e.hasResourceAvailable("ADDERSTING"),onConfirm:e=>e.tryConsumeResource("ADDERSTING")});ln("TOXIKON_II",82,{startOnHotbar:!1,potency:[["NEVER",330],["MAGICK_MASTERY_HEALER",370]],falloff:.5,applicationDelay:1.2,castTime:0,validateAttempt:e=>e.hasResourceAvailable("ADDERSTING"),onConfirm:e=>e.tryConsumeResource("ADDERSTING")});ln("PHLEGMA",26,{autoUpgrade:{trait:"OFFENSIVE_MAGIC_MASTERY",otherSkill:"PHLEGMA_II"},potency:400,falloff:.5,applicationDelay:.67,manaCost:400,castTime:0,secondaryCooldown:{cdName:"cd_PHLEGMA",maxCharges:2,cooldown:40}});ln("PHLEGMA_II",72,{startOnHotbar:!1,autoUpgrade:{trait:"OFFENSIVE_MAGIC_MASTERY_II",otherSkill:"PHLEGMA_III"},potency:490,falloff:.5,applicationDelay:.67,manaCost:400,castTime:0,secondaryCooldown:{cdName:"cd_PHLEGMA",maxCharges:2,cooldown:40}});ln("PHLEGMA_III",82,{startOnHotbar:!1,potency:600,falloff:.5,applicationDelay:.67,manaCost:400,castTime:0,secondaryCooldown:{cdName:"cd_PHLEGMA",maxCharges:2,cooldown:40}});_n("PSYCHE",92,"cd_PSYCHE",{potency:600,falloff:.5,applicationDelay:2.1,cooldown:60});ln("DYSKRASIA",46,{autoUpgrade:{trait:"OFFENSIVE_MAGIC_MASTERY_II",otherSkill:"DYSKRASIA_II"},potency:160,falloff:0,applicationDelay:.76,manaCost:400,castTime:0});ln("DYSKRASIA_II",82,{startOnHotbar:!1,replaceIf:[{condition:e=>e.hasResourceAvailable("EUKRASIA"),newSkill:"EUKRASIAN_DYSKRASIA"}],potency:170,falloff:0,applicationDelay:.76,manaCost:400,castTime:0});ln("EUKRASIAN_DYSKRASIA",82,{startOnHotbar:!1,falloff:0,applicationDelay:1.03,castTime:0,recastTime:1.5,drawsAggro:!0,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"EUKRASIAN_DYSKRASIA",skillName:"EUKRASIAN_DYSKRASIA",tickPotency:40,speedStat:"sps"}),e.tryConsumeResource("EUKRASIA")},onApplication:(e,t)=>{e.applyDoT("EUKRASIAN_DYSKRASIA",t)}});ln("DIAGNOSIS",2,{healingPotency:[["NEVER",400],["ENHANCED_HEALING_MAGIC",450]],applicationDelay:.58,replaceIf:[{condition:e=>e.hasResourceAvailable("EUKRASIA"),newSkill:"EUKRASIAN_DIAGNOSIS"}],manaCost:400});ln("EUKRASIAN_DIAGNOSIS",30,{startOnHotbar:!1,healingPotency:300,applicationDelay:.67,castTime:0,recastTime:1.5,manaCost:800,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:e=>e.tryConsumeResource("EUKRASIA"),onApplication:e=>e.gainStatus("EUKRASIAN_DIAGNOSIS")});_n("EUKRASIAN_DIAGNOSIS_POP",30,"cd_DIAGNOSIS_POP",{animationLock:li,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("EUKRASIAN_DIAGNOSIS"),onConfirm:e=>{e.tryConsumeResource("EUKRASIAN_DIAGNOSIS"),e.resources.get("ADDERSTING").gain(1)},highlightIf:e=>e.hasResourceAvailable("EUKRASIAN_DIAGNOSIS")});ln("PROGNOSIS",10,{healingPotency:300,aoeHeal:!0,applicationDelay:.58,replaceIf:[{condition:e=>e.hasResourceAvailable("EUKRASIA")&&e.hasTraitUnlocked("EUKRASIAN_PROGNOSIS_MASTERY"),newSkill:"EUKRASIAN_PROGNOSIS_II"},{condition:e=>e.hasResourceAvailable("EUKRASIA")&&!e.hasTraitUnlocked("EUKRASIAN_PROGNOSIS_MASTERY"),newSkill:"EUKRASIAN_PROGNOSIS"}],manaCost:700,castTime:e=>e.config.adjustedCastTime(2)});ln("EUKRASIAN_PROGNOSIS",30,{startOnHotbar:!1,autoUpgrade:{trait:"EUKRASIAN_PROGNOSIS_MASTERY",otherSkill:"EUKRASIAN_PROGNOSIS_II"},healingPotency:100,aoeHeal:!0,applicationDelay:.94,castTime:0,recastTime:1.5,manaCost:800,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:e=>e.tryConsumeResource("EUKRASIA"),onApplication:e=>e.gainStatus("EUKRASIAN_PROGNOSIS")});ln("EUKRASIAN_PROGNOSIS_II",96,{startOnHotbar:!1,healingPotency:100,aoeHeal:!0,applicationDelay:.94,castTime:0,recastTime:1.5,manaCost:800,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:e=>e.tryConsumeResource("EUKRASIA"),onApplication:e=>e.gainStatus("EUKRASIAN_PROGNOSIS")});_n("EUKRASIAN_PROGNOSIS_POP",30,"cd_PROGNOSIS_POP",{autoUpgrade:{trait:"EUKRASIAN_PROGNOSIS_MASTERY",otherSkill:"EUKRASIAN_PROGNOSIS_II_POP"},animationLock:li,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("EUKRASIAN_PROGNOSIS"),onConfirm:e=>{e.tryConsumeResource("EUKRASIAN_PROGNOSIS"),e.resources.get("ADDERSTING").gain(1)},highlightIf:e=>e.hasResourceAvailable("EUKRASIAN_PROGNOSIS")});_n("EUKRASIAN_PROGNOSIS_II_POP",30,"cd_PROGNOSIS_POP",{startOnHotbar:!1,animationLock:li,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("EUKRASIAN_PROGNOSIS"),onConfirm:e=>{e.tryConsumeResource("EUKRASIAN_PROGNOSIS"),e.resources.get("ADDERSTING").gain(1)},highlightIf:e=>e.hasResourceAvailable("EUKRASIAN_PROGNOSIS")});ln("PNEUMA",90,{potency:[["NEVER",330],["MAGICK_MASTERY_HEALER",370]],falloff:.4,healingPotency:600,aoeHeal:!0,applicationDelay:.58,manaCost:700,secondaryCooldown:{cdName:"cd_PNEUMA",maxCharges:1,cooldown:120}});zR("ZOE",56,"cd_ZOE",{rscType:"ZOE",applicationDelay:0,cooldown:90});_n("PEPSIS",58,"cd_PEPSIS",{cooldown:30,applicationDelay:1.16,onConfirm:(e,t)=>{e.hasResourceAvailable("EUKRASIAN_DIAGNOSIS")&&(e.addPepsisPotency("EUKRASIAN_DIAGNOSIS",t),e.tryConsumeResource("EUKRASIAN_DIAGNOSIS")),e.hasResourceAvailable("EUKRASIAN_PROGNOSIS")&&(e.addPepsisPotency("EUKRASIAN_PROGNOSIS",t),e.tryConsumeResource("EUKRASIAN_PROGNOSIS"))},onApplication:(e,t)=>{t.getHotPotencies("PEPSIS").forEach(a=>{D.resolveHealingPotency(a)})}});zR("SOTERIA",35,"cd_SOTERIA",{rscType:"SOTERIA",applicationDelay:.8,cooldown:60});zR("KRASIS",86,"cd_KRASIS",{rscType:"KRASIS",applicationDelay:.76,cooldown:60});_n("HAIMA",70,"cd_HAIMA",{replaceIf:[{condition:e=>e.hasResourceAvailable("HAIMA"),newSkill:"HAIMA_POP"}],applicationDelay:.76,cooldown:120,onConfirm:(e,t)=>e.addHaimaExpirationPotency("HAIMA",t),onApplication:(e,t)=>{const a=Pt("SGE","HAIMATINON").maxValue;e.gainStatus("HAIMA"),e.gainStatus("HAIMATINON",a),e.addEvent(new Ge("Haima Expiration heal Check",Pt("SGE","HAIMA").maxTimeout-.001,()=>e.handleHaimaExpiration("HAIMA",t)))}});_n("HAIMA_POP",70,"cd_HAIMA_POP",{startOnHotbar:!1,animationLock:li,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("HAIMA"),highlightIf:e=>e.hasResourceAvailable("HAIMA"),onConfirm:e=>{e.hasResourceAvailable("HAIMATINON")?e.tryConsumeResource("HAIMATINON"):e.tryConsumeResource("HAIMA")}});_n("PHYSIS_II",60,"cd_PHYSIS",{aoeHeal:!0,applicationDelay:.85,cooldown:60,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"PHYSIS_II",effectName:"PHYSIS_II",speedStat:"sps",tickPotency:130})},onApplication:(e,t)=>{e.applyHoT("PHYSIS_II",t),e.gainStatus("AUTOPHYSIS")}});_n("PHILOSOPHIA",100,"cd_PHILOSOPHIA",{applicationDelay:1.83,cooldown:180,onApplication:e=>{e.gainStatus("PHILOSOPHIA"),e.gainStatus("EUDAIMONIA")}});_n("HOLOS",76,"cd_HOLOS",{applicationDelay:.62,cooldown:120,onApplication:e=>{e.gainStatus("HOLOS"),e.gainStatus("HOLOSAKOS")}});_n("PANHAIMA",80,"cd_PANHAIMA",{replaceIf:[{condition:e=>e.hasResourceAvailable("PANHAIMA"),newSkill:"PANHAIMA_POP"}],applicationDelay:.62,cooldown:120,onConfirm:(e,t)=>e.addHaimaExpirationPotency("PANHAIMA",t),onApplication:(e,t)=>{const a=Pt("SGE","PANHAIMATINON").maxValue;e.gainStatus("PANHAIMA"),e.gainStatus("PANHAIMATINON",a),e.addEvent(new Ge("Panhaima Expiration heal Check",Pt("SGE","PANHAIMA").maxTimeout-.001,()=>e.handleHaimaExpiration("PANHAIMA",t)))}});_n("PANHAIMA_POP",80,"cd_PANHAIMA_POP",{startOnHotbar:!1,animationLock:li,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("PANHAIMA"),highlightIf:e=>e.hasResourceAvailable("PANHAIMA"),onConfirm:e=>{e.hasResourceAvailable("PANHAIMATINON")?e.tryConsumeResource("PANHAIMATINON"):e.tryConsumeResource("PANHAIMA")}});_n("RHIZOMATA",74,"cd_RHIZOMATA",{cooldown:90,onConfirm:e=>e.resources.get("ADDERSGALL").gain(1)});_n("DRUOCHOLE",45,"cd_DRUOCHOLE",{cooldown:1,healingPotency:600,applicationDelay:.78,validateAttempt:e=>e.hasResourceAvailable("ADDERSGALL"),onConfirm:e=>e.consumeAddersgall()});_n("IXOCHOLE",52,"cd_IXOCHOLE",{cooldown:30,healingPotency:400,aoeHeal:!0,applicationDelay:.756,validateAttempt:e=>e.hasResourceAvailable("ADDERSGALL"),onConfirm:e=>e.consumeAddersgall()});_n("TAUROCHOLE",62,"cd_TAUROCHOLE",{cooldown:45,applicationDelay:.67,onConfirm:e=>e.consumeAddersgall(),onApplication:e=>e.gainStatus("TAUROCHOLE")});_n("KERACHOLE",50,"cd_KERACHOLE",{cooldown:30,aoeHeal:!0,applicationDelay:.81,validateAttempt:e=>e.hasResourceAvailable("ADDERSGALL"),onConfirm:(e,t)=>{e.consumeAddersgall(),e.addHoTPotencies({node:t,skillName:"KERACHOLE",effectName:"KERAKEIA",speedStat:"sps",tickPotency:100})},onApplication:(e,t)=>{e.gainStatus("KERACHOLE"),e.hasTraitUnlocked("ENHANCED_KERACHOLE")&&e.applyHoT("KERAKEIA",t)}});ln("EGEIRO",12,{applicationDelay:.58,manaCost:2400,castTime:8});_n("KARDIA",4,"cd_KARDIA",{applicationDelay:.62,cooldown:5,onApplication:e=>{e.gainStatus("KARDIA"),e.gainStatus("KARDION")}});_n("ICARUS",40,"cd_ICARUS",{cooldown:45,animationLock:jn});Object.keys(Jm).forEach(e=>$n(e,`WAR/${ot[e].name}.png`));class cP extends $t{jobSpecificSelfTargetedBuffViewProps(){return Object.keys(Jm).map(t=>this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){var E,A;const a=this.state.resources,l=a.get("BEAST_GAUGE").availableAmount(),s=a.get("STORM_COMBO"),c=a.get("TEMPEST_COMBO"),d=s.available(1)?(E=s.pendingChange)==null?void 0:E.timeTillEvent:c.available(1)?(A=c.pendingChange)==null?void 0:A.timeTillEvent:void 0;return[{kind:"text",name:_({en:"Combo Timer",zh:"连击监控"}),text:(d==null?void 0:d.toFixed(3))??"N/A"},{kind:"bar",name:_({en:"Beast Gauge",zh:"兽魂量谱"}),color:t.war.beastGauge,progress:l/100,valueString:l.toFixed(0)}]}}const wt=(e,t,a)=>{tt("WAR",e,t,a??{})};wt("BEAST_GAUGE",100);wt("SURGING_TEMPEST",1,{timeout:60});wt("NASCENT_CHAOS",1,{timeout:30});wt("INNER_RELEASE",3,{timeout:15});wt("INNER_STRENGTH",1,{timeout:15});wt("BURGEONING_FURY",3,{timeout:30});wt("WRATHFUL",1,{timeout:30});wt("PRIMAL_REND_READY",1,{timeout:30});wt("PRIMAL_RUINATION_READY",1,{timeout:20});wt("THRILL_OF_BATTLE",1,{timeout:10});wt("EQUILIBRIUM",1,{timeout:15});wt("RAW_INTUITION",1,{timeout:6});wt("BLOODWHETTING",1,{timeout:8});wt("STEM_THE_FLOW",1,{timeout:4});wt("STEM_THE_TIDE",1,{timeout:20});wt("NASCENT_FLASH",1,{timeout:8});wt("VENGEANCE",1,{timeout:15});wt("DAMNATION",1,{timeout:15});wt("PRIMEVAL_IMPULSE",1,{timeout:15});wt("SHAKE_IT_OFF",1,{timeout:30});wt("SHAKE_IT_OFF_OVER_TIME",1,{timeout:15});wt("HOLMGANG",1,{timeout:10});wt("DEFIANCE",1);wt("STORM_COMBO",2,{timeout:30});wt("TEMPEST_COMBO",1,{timeout:30});const uP=["HEAVY_SWING","MAIM","STORMS_EYE","STORMS_PATH"],z0=["OVERPOWER","MYTHRIL_TEMPEST"],dP=[...uP,...z0],CI=["FELL_CLEAVE","DECIMATE"],fP=["THRILL_OF_BATTLE","DAMNATION","BLOODWHETTING","VENGEANCE","RAW_INTUITION"];class hP extends Jt{constructor(t){super(t),this.hasTraitUnlocked("ENHANCED_ONSLAUGHT")&&this.cooldowns.set(new Ke("cd_ONSLAUGHT",30,3,3)),this.registerRecurringEvents()}get statusPropsGenerator(){return new cP(this)}processComboStatus(t){if(!dP.includes(t))return;const a=z0.includes(t),l=a?"TEMPEST_COMBO":"STORM_COMBO",s=a?"STORM_COMBO":"TEMPEST_COMBO";this.setComboState(s,0);let c=this.resources.get(l).availableAmount(),d=0;a?t==="OVERPOWER"&&(d=1):t==="HEAVY_SWING"?d=1:c===1&&t==="MAIM"&&(d=2),this.setComboState(l,d)}hasComboStatus(t,a){return this.resources.get(t).availableAmount()===a}gainBeastGauge(t){const a=this.resources.get("BEAST_GAUGE");a.availableAmount()+t>a.maxValue&&D.reportWarning(Fe.BeastGaugeOvercap),a.gain(t)}gainProc(t,a){const l=Pt("WAR",t).maxTimeout;this.hasResourceAvailable(t)?(t==="BURGEONING_FURY"&&this.resources.get(t).gain(1),this.resources.get(t).overrideTimer(this,l)):(this.resources.get(t).gain(a??1),l&&this.enqueueResourceDrop(t,l))}gainSurgingTempest(t){var c;const a=this.resources.get("SURGING_TEMPEST"),l=Pt("WAR","SURGING_TEMPEST").maxTimeout,s=(((c=a.pendingChange)==null?void 0:c.timeTillEvent)??0)+t;a.overrideTimer(this,s>=l?l:s)}gainSurgingTempestGCD(t,a,l){this.hasResourceAvailable("SURGING_TEMPEST")?this.addEvent(new Ge("surging tempest refresh",a,()=>{this.hasResourceAvailable("SURGING_TEMPEST")?this.gainSurgingTempest(t):(this.resources.get("SURGING_TEMPEST").gain(1),this.enqueueResourceDrop("SURGING_TEMPEST",t))})):(this.resources.get("SURGING_TEMPEST").gain(1),this.enqueueResourceDrop("SURGING_TEMPEST",t+l))}}const ja=(e,t,a)=>{const l=ut(a.onConfirm??je,d=>d.processComboStatus(e),d=>{CI.includes(e)&&d.tryConsumeResource("INNER_RELEASE")&&d.hasTraitUnlocked("ENHANCED_INNER_RELEASE")&&(d.gainProc("BURGEONING_FURY"),d.hasResourceAvailable("BURGEONING_FURY",3)&&(d.gainProc("WRATHFUL"),d.tryConsumeResource("BURGEONING_FURY",!0)))}),s=a.onApplication??je,c=a.jobPotencyModifiers??(d=>[]);return Mi("WAR",e,t,{...a,onConfirm:l,onApplication:s,recastTime:d=>d.config.adjustedSksGCD(),jobPotencyModifiers:d=>{const h=c(d);return a.combo&&d.hasComboStatus(a.combo.resource,a.combo.resourceValue)&&h.push(dl(Xe(d,a.combo.potency)-Xe(d,a.potency))),d.hasResourceAvailable("SURGING_TEMPEST")&&h.push(me.SurgingTempest),d.hasResourceAvailable("INNER_RELEASE")&&CI.includes(e)&&h.push(me.AutoCDH),h}})},kr=(e,t,a,l)=>Nt("WAR",e,t,a,{...l,onConfirm:l.onConfirm,jobPotencyModifiers:s=>{const c=[];return s.hasResourceAvailable("SURGING_TEMPEST")&&c.push(me.SurgingTempest),c}});ja("TOMAHAWK",15,{potency:150,applicationDelay:.71});ja("HEAVY_SWING",1,{potency:[["NEVER",150],["MELEE_MASTERY_TANK",200],["MELEE_MASTERY_II_TANK",240]],applicationDelay:.53});ja("MAIM",4,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",150],["MELEE_MASTERY_II_TANK",190]],combo:{potency:[["NEVER",250],["MELEE_MASTERY_TANK",300],["MELEE_MASTERY_II_TANK",340]],resource:"STORM_COMBO",resourceValue:1},applicationDelay:.62,onConfirm:e=>{e.hasComboStatus("STORM_COMBO",1)&&e.gainBeastGauge(10)},highlightIf:e=>e.hasComboStatus("STORM_COMBO",1)});ja("STORMS_PATH",26,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",160],["MELEE_MASTERY_II_TANK",220]],combo:{potency:[["NEVER",380],["MELEE_MASTERY_TANK",440],["MELEE_MASTERY_II_TANK",500]],resource:"STORM_COMBO",resourceValue:2},applicationDelay:1.52,onConfirm:e=>{e.hasComboStatus("STORM_COMBO",2)&&e.gainBeastGauge(20)},highlightIf:e=>e.hasComboStatus("STORM_COMBO",2)});ja("STORMS_EYE",50,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",160],["MELEE_MASTERY_II_TANK",220]],combo:{potency:[["NEVER",380],["MELEE_MASTERY_TANK",440],["MELEE_MASTERY_II_TANK",500]],resource:"STORM_COMBO",resourceValue:2},applicationDelay:.62,onConfirm:e=>{e.hasComboStatus("STORM_COMBO",2)&&(e.gainBeastGauge(10),e.gainSurgingTempestGCD(30,.62,1.7))},highlightIf:e=>e.hasComboStatus("STORM_COMBO",2)});ja("OVERPOWER",10,{potency:110,falloff:0,applicationDelay:.62});ja("MYTHRIL_TEMPEST",40,{potency:100,combo:{potency:140,resource:"TEMPEST_COMBO",resourceValue:1},falloff:0,applicationDelay:.49,onConfirm:e=>{e.hasComboStatus("TEMPEST_COMBO",1)&&(e.gainBeastGauge(20),e.gainSurgingTempestGCD(30,.49,.45))},highlightIf:e=>e.hasComboStatus("TEMPEST_COMBO",1)});function ah(e){e.cooldowns.get("cd_INFURIATE").restore(5)}ja("FELL_CLEAVE",54,{potency:[["NEVER",520],["MELEE_MASTERY_II_TANK",580]],applicationDelay:.62,validateAttempt:e=>e.resources.get("BEAST_GAUGE").available(50)||e.resources.get("INNER_RELEASE").available(1),onConfirm:e=>{e.hasResourceAvailable("INNER_RELEASE")||e.resources.get("BEAST_GAUGE").consume(50),ah(e)},replaceIf:[{newSkill:"INNER_CHAOS",condition:e=>e.hasResourceAvailable("NASCENT_CHAOS")}],highlightIf:e=>e.hasResourceAvailable("BEAST_GAUGE",50)||e.hasResourceAvailable("INNER_RELEASE")});ja("DECIMATE",60,{potency:180,falloff:0,applicationDelay:1.83,validateAttempt:e=>e.hasResourceAvailable("BEAST_GAUGE",50)||e.hasResourceAvailable("INNER_RELEASE"),onConfirm:e=>{e.tryConsumeResource("INNER_RELEASE")||e.resources.get("BEAST_GAUGE").consume(50),ah(e)},highlightIf:e=>e.hasResourceAvailable("BEAST_GAUGE",50)||e.hasResourceAvailable("INNER_RELEASE"),replaceIf:[{newSkill:"CHAOTIC_CYCLONE",condition:e=>e.hasResourceAvailable("NASCENT_CHAOS")}]});kr("INNER_RELEASE",70,"cd_INNER_RELEASE",{applicationDelay:0,requiresCombat:!0,cooldown:60,maxCharges:1,onConfirm:e=>{e.gainProc("INNER_RELEASE",3),e.gainProc("INNER_STRENGTH"),e.hasResourceAvailable("SURGING_TEMPEST")&&e.gainSurgingTempest(10),e.config.level>=kt.lvl90&&e.gainProc("PRIMAL_REND_READY")},replaceIf:[{newSkill:"PRIMAL_WRATH",condition:e=>e.hasResourceAvailable("WRATHFUL")}]});ja("PRIMAL_REND",90,{potency:700,applicationDelay:1.16,falloff:.5,animationLock:1.2,validateAttempt:e=>e.hasResourceAvailable("PRIMAL_REND_READY"),onConfirm:e=>{e.tryConsumeResource("PRIMAL_REND_READY"),e.hasTraitUnlocked("ENHANCED_PRIMAL_REND")&&e.gainProc("PRIMAL_RUINATION_READY")},highlightIf:e=>e.hasResourceAvailable("PRIMAL_REND_READY"),replaceIf:[{newSkill:"PRIMAL_RUINATION",condition:e=>e.hasResourceAvailable("PRIMAL_RUINATION_READY")}],jobPotencyModifiers:e=>[me.AutoCDH]});kr("PRIMAL_WRATH",96,"cd_PRIMAL_WRATH",{startOnHotbar:!1,potency:700,falloff:.5,applicationDelay:1.15,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("WRATHFUL"),onConfirm:e=>e.tryConsumeResource("WRATHFUL"),highlightIf:e=>!0});ja("PRIMAL_RUINATION",100,{startOnHotbar:!1,potency:780,falloff:.5,applicationDelay:1.06,validateAttempt:e=>e.hasResourceAvailable("PRIMAL_RUINATION_READY"),onConfirm:e=>{e.tryConsumeResource("PRIMAL_RUINATION_READY")},highlightIf:e=>!0,jobPotencyModifiers:e=>[me.AutoCDH]});kr("INFURIATE",50,"cd_INFURIATE",{applicationDelay:0,requiresCombat:!0,cooldown:60,maxCharges:2,onApplication:e=>{e.gainBeastGauge(50),e.hasTraitUnlocked("NASCENT_CHAOS")&&e.gainProc("NASCENT_CHAOS")}});ja("INNER_CHAOS",80,{startOnHotbar:!1,potency:660,applicationDelay:.94,validateAttempt:e=>e.hasResourceAvailable("BEAST_GAUGE",50)&&e.hasResourceAvailable("NASCENT_CHAOS"),onConfirm:e=>{e.tryConsumeResource("NASCENT_CHAOS"),e.resources.get("BEAST_GAUGE").consume(50),ah(e)},highlightIf:e=>e.hasResourceAvailable("BEAST_GAUGE",50),jobPotencyModifiers:e=>[me.AutoCDH]});ja("CHAOTIC_CYCLONE",72,{startOnHotbar:!1,potency:200,falloff:0,applicationDelay:1.43,validateAttempt:e=>e.hasResourceAvailable("BEAST_GAUGE",50)&&e.hasResourceAvailable("NASCENT_CHAOS"),onConfirm:e=>{e.tryConsumeResource("NASCENT_CHAOS"),e.resources.get("BEAST_GAUGE").consume(50),ah(e)},highlightIf:e=>e.hasResourceAvailable("BEAST_GAUGE",50),jobPotencyModifiers:e=>[me.AutoCDH]});kr("ONSLAUGHT",62,"cd_ONSLAUGHT",{potency:150,applicationDelay:.63,cooldown:30,maxCharges:2,animationLock:jn});kr("UPHEAVAL",64,"cd_UPHEAVAL",{potency:420,applicationDelay:.62,cooldown:30});kr("OROGENY",86,"cd_UPHEAVAL",{potency:150,falloff:0,applicationDelay:.62,cooldown:30});ze("WAR","VENGEANCE",38,"cd_VENGEANCE",{rscType:"VENGEANCE",autoUpgrade:{trait:"VENGEANCE_MASTERY",otherSkill:"DAMNATION"},cooldown:120,applicationDelay:.62});ze("WAR","DAMNATION",92,"cd_VENGEANCE",{rscType:"DAMNATION",autoDowngrade:{trait:"VENGEANCE_MASTERY",otherSkill:"VENGEANCE"},cooldown:120,applicationDelay:.62});ze("WAR","RAW_INTUITION",56,"cd_RAW_INTUITION",{rscType:"RAW_INTUITION",autoUpgrade:{trait:"RAW_INTUITION_MASTERY",otherSkill:"BLOODWHETTING"},cooldown:25,applicationDelay:.45});ze("WAR","BLOODWHETTING",82,"cd_RAW_INTUITION",{rscType:"BLOODWHETTING",autoDowngrade:{trait:"RAW_INTUITION_MASTERY",otherSkill:"RAW_INTUITION"},onApplication:e=>{e.gainProc("STEM_THE_FLOW"),e.gainProc("STEM_THE_TIDE")},cooldown:25,applicationDelay:.45});Nt("WAR","NASCENT_FLASH",76,"cd_RAW_INTUITION",{onApplication:e=>{let t=6;e.hasTraitUnlocked("ENHANCED_NASCENT_FLASH")&&(t=8),e.resources.get("NASCENT_FLASH").gain(1),e.enqueueResourceDrop("NASCENT_FLASH",t)},cooldown:25,applicationDelay:.45});ze("WAR","HOLMGANG",45,"cd_HOLMGANG",{rscType:"HOLMGANG",cooldown:240,applicationDelay:.45});ze("WAR","THRILL_OF_BATTLE",30,"cd_THRILL_OF_BATTLE",{rscType:"THRILL_OF_BATTLE",cooldown:90,applicationDelay:.62});Nt("WAR","EQUILIBRIUM",58,"cd_EQUILIBRIUM",{cooldown:60,applicationDelay:.62,onApplication:e=>{e.hasTraitUnlocked("ENHANCED_EQUILIBRIUM")&&e.gainProc("EQUILIBRIUM")}});ze("WAR","SHAKE_IT_OFF",68,"cd_SHAKE_IT_OFF",{rscType:"SHAKE_IT_OFF",cooldown:90,onApplication:(e,t)=>{let a=0;fP.forEach(l=>{e.tryConsumeResource(l)&&(a+=1)}),console.debug(`Shake It Off dispelled ${a} buffs`),e.gainProc("SHAKE_IT_OFF_OVER_TIME")},applicationDelay:0});Nt("WAR","DEFIANCE",10,"cd_DEFIANCE",{cooldown:2,maxCharges:1,applicationDelay:0,validateAttempt:e=>!e.hasResourceAvailable("DEFIANCE"),onConfirm:e=>e.resources.get("DEFIANCE").gain(1),replaceIf:[{newSkill:"RELEASE_DEFIANCE",condition:e=>e.hasResourceAvailable("DEFIANCE")}],secondaryCooldown:{cdName:"cd_RELEASE_DEFIANCE",cooldown:1,maxCharges:1}});Nt("WAR","RELEASE_DEFIANCE",10,"cd_RELEASE_DEFIANCE",{startOnHotbar:!1,cooldown:1,maxCharges:1,secondaryCooldown:{cdName:"cd_DEFIANCE",cooldown:2,maxCharges:1},applicationDelay:0,validateAttempt:e=>e.hasResourceAvailable("DEFIANCE"),onConfirm:e=>e.tryConsumeResource("DEFIANCE")});const Y0=["CIRCLE_OF_SCORN_DOT"],EP=Object.keys(qm).filter(e=>!Y0.includes(e));Object.keys(qm).forEach(e=>$n(e,`PLD/${ot[e].name}.png`));class AP extends $t{jobSpecificOtherTargetedBuffViewProps(){return[...Y0.map(t=>this.makeCommonTimer(t,!1))]}jobSpecificSelfTargetedBuffViewProps(){return EP.map(t=>this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){var T,S;const a=this.state.resources,l=a.get("PLD_COMBO_TRACKER"),s=a.get("PLD_AOE_COMBO_TRACKER"),c=a.get("OATH_GAUGE").availableAmount(),d=a.get("IRON_WILL").availableAmount(),h=l.available(1)?(T=l.pendingChange)==null?void 0:T.timeTillEvent:s.available(1)?(S=s.pendingChange)==null?void 0:S.timeTillEvent:void 0,E=this.state.findAutoAttackTimerInQueue();let A="";return this.state.hasResourceAvailable("STORED_AUTO")?A="stored":A=E!==-1?E.toFixed(3):"N/A",[{kind:"bar",name:_({en:"Auto Tracker"}),color:t.pld.ironWillColor,progress:E!==-1?(3-E)/3:0,valueString:A},{kind:"bar",name:_({en:"Combo Timer"}),color:t.pld.pldComboTimer,progress:h?h/30:0,valueString:(h==null?void 0:h.toFixed(3))??"N/A"},{kind:"counter",name:_({en:"Iron Will"}),color:t.pld.ironWillColor,currentStacks:d,maxStacks:1},{kind:"bar",name:_({en:"Oath Gauge"}),color:t.pld.oathGaugeColor,progress:c/100,valueString:c.toFixed(0)}]}}const St=(e,t,a)=>{tt("PLD",e,t,a??{})};St("FIGHT_OR_FLIGHT",1,{timeout:20});St("IRON_WILL",1);St("OATH_GAUGE",100);St("SHELTRON",1,{timeout:6});St("SENTINEL",1,{timeout:15});St("CIRCLE_OF_SCORN_DOT",1,{timeout:15});St("HALLOWED_GROUND",1,{timeout:10});St("BULWARK",1,{timeout:10});St("GORING_BLADE_READY",1,{timeout:30});St("DIVINE_VEIL",1,{timeout:30});St("ATONEMENT_READY",1,{timeout:30});St("DIVINE_MIGHT",1,{timeout:30});St("KNIGHTS_RESOLVE",1,{timeout:4});St("KNIGHTS_BENEDICTION",1,{timeout:12});St("REQUIESCAT",4,{timeout:30});St("CONFITEOR_READY",1,{timeout:30});St("PASSAGE_OF_ARMS",1,{timeout:18});St("SUPPLICATION_READY",1,{timeout:30});St("SEPULCHRE_READY",1,{timeout:30});St("HOLY_SHELTRON",1,{timeout:8});St("BLADE_OF_HONOR_READY",1,{timeout:30});St("GUARDIAN",1,{timeout:15});St("GUARDIANS_WILL",1,{timeout:15});St("PLD_COMBO_TRACKER",2,{timeout:30});St("PLD_CONFITEOR_COMBO_TRACKER",3,{timeout:30});St("PLD_AOE_COMBO_TRACKER",1,{timeout:30});St("INTERVENTION",1,{timeout:8});St("ARMS_UP",1);St("COVER",1,{timeout:12});const KA=new Map([["TOTAL_ECLIPSE",0],["PROMINENCE",1]]),WA=new Map([["FAST_BLADE",0],["RIOT_BLADE",1],["ROYAL_AUTHORITY",2]]),V0=new Map([["CONFITEOR",0],["BLADE_OF_FAITH",1],["BLADE_OF_TRUTH",2],["BLADE_OF_VALOR",3]]),Jd=["HOLY_SPIRIT","HOLY_CIRCLE"];class mP extends Jt{constructor(t){super(t),this.resources.get("OATH_GAUGE").gain(100),this.registerRecurringEvents([{groupedEffects:[{effectName:"CIRCLE_OF_SCORN_DOT",appliedBy:["CIRCLE_OF_SCORN"]}]}])}get statusPropsGenerator(){return new AP(this)}jobSpecificAddDamageBuffCovers(t,a){this.hasResourceAvailable("FIGHT_OR_FLIGHT")&&t.addBuff(k.FightOrFlight);const l=a.name;this.hasResourceAvailable("DIVINE_MIGHT")&&(l==="HOLY_SPIRIT"||l==="HOLY_CIRCLE")?t.addBuff(k.DivineMight):this.hasResourceAvailable("REQUIESCAT")&&(l==="HOLY_SPIRIT"||l==="HOLY_CIRCLE"||l==="CONFITEOR"||l==="BLADE_OF_FAITH"||l==="BLADE_OF_TRUTH"||l==="BLADE_OF_VALOR")&&t.addBuff(k.Requiescat)}cancelChanneledSkills(){this.tryConsumeResource("PASSAGE_OF_ARMS")}jobSpecificOnAutoAttack(){D.reportAutoTick(this.time,"auto"),this.resources.get("OATH_GAUGE").gain(5)}isSpellInstant(t){return t!=="CLEMENCY"?this.hasResourceAvailable("DIVINE_MIGHT")||this.hasResourceAvailable("REQUIESCAT"):this.hasResourceAvailable("REQUIESCAT")}captureSpellCastTime(t,a){return this.isSpellInstant(t)?0:this.config.adjustedCastTime(a)}tryConsumeRequiescat(t){(Jd.includes(t)||V0.has(t)||t==="CLEMENCY")&&this.tryConsumeResource("REQUIESCAT")}isHolySpiritCircleGoodForReq(){const t=this.resources.get("REQUIESCAT").availableAmount();return t===0||this.hasResourceAvailable("PLD_CONFITEOR_COMBO_TRACKER")||this.config.level>=90?!1:this.config.level>=80?!this.hasResourceAvailable("CONFITEOR_READY")||this.hasResourceAvailable("CONFITEOR_READY")&&t>1:!0}progressComboTracker(t,a,l){const s=this.resources.get(a).maxValue,c=l.get(t)??-1,d=this.resources.get(a).availableAmount();this.tryConsumeResource(a,!0),(c!==s&&c===d||c===0)&&(this.resources.get(a).gain(c+1),this.enqueueResourceDrop(a))}fixPLDPhysicalComboState(t){KA.has(t)?(this.tryConsumeResource("PLD_COMBO_TRACKER",!0),this.progressComboTracker(t,"PLD_AOE_COMBO_TRACKER",KA)):WA.has(t)&&(this.tryConsumeResource("PLD_AOE_COMBO_TRACKER",!0),this.progressComboTracker(t,"PLD_COMBO_TRACKER",WA)),(KA.has(t)||WA.has(t)||t==="SHIELD_BASH")&&this.tryConsumeResource("PLD_CONFITEOR_COMBO_TRACKER",!0)}getDelayedManaFromAction(t,a){this.addEvent(new Ge("get MP from "+a,this.skillsList.get(a).applicationDelay,()=>{this.resources.get("MANA").gain(t)}))}refreshBuff(t,a){this.addEvent(new Ge("gain buff",a,()=>{this.resources.get(t).gain(1),this.enqueueResourceDrop(t)}))}}const Si=(e,t,a)=>{const l=ut(a.onConfirm??je,d=>{e!=="SHIELD_LOB"&&e!=="SHIELD_BASH"&&e!=="GORING_BLADE"&&d.fixPLDPhysicalComboState(e)}),s=a.onApplication??je,c=a.jobPotencyModifiers??(d=>[]);return Mi("PLD",e,t,{...a,onConfirm:l,onApplication:s,startsAuto:a.startsAuto,recastTime:d=>d.config.adjustedSksGCD(),jobPotencyModifiers:d=>{const h=c(d);return a.combo&&d.resources.get(a.combo.resource).availableAmount()===a.combo.resourceValue&&h.push(dl(Xe(d,a.combo.potency)-Xe(d,a.potency))),d.hasResourceAvailable("FIGHT_OR_FLIGHT")&&h.push(me.FightOrFlight),h}})},rs=(e,t,a)=>{let l=ut((d,h)=>{d.hasResourceAvailable("DIVINE_MIGHT")&&Jd.includes(e)?d.tryConsumeResource("DIVINE_MIGHT"):d.tryConsumeRequiescat(e)},a.onConfirm??je);const s=a.onApplication??je;let c=ut((d,h)=>{},a.onExecute??je);return oo("PLD",e,t,{replaceIf:a.replaceIf,startOnHotbar:a.startOnHotbar,highlightIf:a.highlightIf,castTime:d=>d.captureSpellCastTime(e,a.baseCastTime),recastTime:d=>d.config.adjustedGCD(),manaCost:a.baseManaCost??0,potency:a.basePotency,jobPotencyModifiers:d=>{const h=[];return Jd.includes(e)&&d.hasResourceAvailable("DIVINE_MIGHT")?a.dmPotency&&h.push(sv(Xe(d,a.dmPotency)-Xe(d,a.basePotency))):(Jd.includes(e)||V0.has(e))&&d.hasResourceAvailable("REQUIESCAT")&&a.reqPotency&&h.push(ov(Xe(d,a.reqPotency)-Xe(d,a.basePotency))),e!=="CLEMENCY"&&d.hasResourceAvailable("FIGHT_OR_FLIGHT")&&h.push(me.FightOrFlight),a.jobPotencyModifiers&&h.push(...a.jobPotencyModifiers(d)),h},falloff:a.falloff,validateAttempt:a.validateAttempt,applicationDelay:a.applicationDelay,isInstantFn:d=>d.isSpellInstant(e),onConfirm:l,onApplication:s,onExecute:c,startsAuto:a.startsAuto})},Hn=(e,t,a,l)=>Nt("PLD",e,t,a,{...l,onConfirm:l.onConfirm,startsAuto:l.startsAuto,jobPotencyModifiers:s=>{const c=[];return s.hasResourceAvailable("FIGHT_OR_FLIGHT")&&c.push(me.FightOrFlight),c}}),K0=(e,t,a,l)=>ze("PLD",e,t,a,{...l,rscType:l.rscType,cooldown:l.cooldown,applicationDelay:l.applicationDelay}),W0={newSkill:"ATONEMENT",condition:e=>e.hasResourceAvailable("ATONEMENT_READY")},q0={newSkill:"SUPPLICATION",condition:e=>e.hasResourceAvailable("SUPPLICATION_READY")},X0={newSkill:"SEPULCHRE",condition:e=>e.hasResourceAvailable("SEPULCHRE_READY")},YR={newSkill:"CONFITEOR",condition:e=>e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").availableAmount()===0},nu={newSkill:"BLADE_OF_FAITH",condition:e=>e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").availableAmount()===1},au={newSkill:"BLADE_OF_TRUTH",condition:e=>e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").availableAmount()===2},iu={newSkill:"BLADE_OF_VALOR",condition:e=>e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").availableAmount()===3},Nm={newSkill:"BLADE_OF_HONOR",condition:e=>e.hasResourceAvailable("BLADE_OF_HONOR_READY")},RP={newSkill:"IMPERATOR",condition:e=>!e.hasResourceAvailable("BLADE_OF_HONOR_READY")},TP={newSkill:"IRON_WILL",condition:e=>!e.hasResourceAvailable("IRON_WILL")},SP={newSkill:"RELEASE_IRON_WILL",condition:e=>e.hasResourceAvailable("IRON_WILL")};Si("SHIELD_LOB",15,{potency:100,applicationDelay:.89,startsAuto:!1});Si("FAST_BLADE",1,{potency:[["NEVER",150],["MELEE_MASTERY_TANK",200],["MELEE_MASTERY_II_TANK",220]],applicationDelay:.62});Si("RIOT_BLADE",4,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",140],["MELEE_MASTERY_II_TANK",170]],combo:{potency:[["NEVER",260],["MELEE_MASTERY_TANK",300],["MELEE_MASTERY_II_TANK",330]],resource:"PLD_COMBO_TRACKER",resourceValue:1},highlightIf:e=>e.resources.get("PLD_COMBO_TRACKER").availableAmount()===1,applicationDelay:.76,onConfirm:e=>{e.resources.get("PLD_COMBO_TRACKER").availableAmount()===1&&e.getDelayedManaFromAction(1e3,"RIOT_BLADE")}});Si("ROYAL_AUTHORITY",60,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",140],["MELEE_MASTERY_II_TANK",200]],combo:{potency:[["NEVER",360],["MELEE_MASTERY_TANK",400],["MELEE_MASTERY_II_TANK",460]],resource:"PLD_COMBO_TRACKER",resourceValue:2},highlightIf:e=>e.resources.get("PLD_COMBO_TRACKER").availableAmount()===2,applicationDelay:.62,onConfirm:e=>{e.resources.get("PLD_COMBO_TRACKER").availableAmount()===2&&(e.refreshBuff("DIVINE_MIGHT",0),e.hasTraitUnlocked("SWORD_OATH")&&(e.refreshBuff("ATONEMENT_READY",0),e.tryConsumeResource("SUPPLICATION_READY"),e.tryConsumeResource("SEPULCHRE_READY")))}});Si("ATONEMENT",76,{replaceIf:[q0,X0],potency:[["NEVER",360],["MELEE_MASTERY_TANK",400],["MELEE_MASTERY_II_TANK",460]],applicationDelay:1.26,validateAttempt:e=>e.hasResourceAvailable("ATONEMENT_READY"),highlightIf:e=>e.hasResourceAvailable("ATONEMENT_READY"),onConfirm:e=>{e.tryConsumeResource("ATONEMENT_READY"),e.refreshBuff("SUPPLICATION_READY",0),e.getDelayedManaFromAction(400,"ATONEMENT")}});Si("SUPPLICATION",76,{startOnHotbar:!1,replaceIf:[W0,X0],potency:[["NEVER",380],["MELEE_MASTERY_TANK",420],["MELEE_MASTERY_II_TANK",500]],applicationDelay:1.16,validateAttempt:e=>e.hasResourceAvailable("SUPPLICATION_READY"),highlightIf:e=>e.hasResourceAvailable("SUPPLICATION_READY"),onConfirm:e=>{e.tryConsumeResource("SUPPLICATION_READY"),e.refreshBuff("SEPULCHRE_READY",0),e.getDelayedManaFromAction(400,"SUPPLICATION")}});Si("SEPULCHRE",76,{startOnHotbar:!1,replaceIf:[W0,q0],potency:[["NEVER",400],["MELEE_MASTERY_TANK",440],["MELEE_MASTERY_II_TANK",540]],applicationDelay:1.29,validateAttempt:e=>e.hasResourceAvailable("SEPULCHRE_READY"),highlightIf:e=>e.hasResourceAvailable("SEPULCHRE_READY"),onConfirm:e=>{e.tryConsumeResource("SEPULCHRE_READY"),e.getDelayedManaFromAction(400,"SEPULCHRE")}});Si("TOTAL_ECLIPSE",6,{potency:120,applicationDelay:.76,falloff:0});Si("PROMINENCE",40,{potency:100,combo:{potency:220,resource:"PLD_AOE_COMBO_TRACKER",resourceValue:1},applicationDelay:.62,falloff:0,highlightIf:e=>e.resources.get("PLD_AOE_COMBO_TRACKER").availableAmount()===1,onConfirm:e=>{e.resources.get("PLD_AOE_COMBO_TRACKER").availableAmount()===1&&e.hasTraitUnlocked("ENHANCED_PROMINENCE")&&(e.refreshBuff("DIVINE_MIGHT",0),e.getDelayedManaFromAction(500,"PROMINENCE"))}});rs("HOLY_SPIRIT",64,{baseCastTime:1.5,applicationDelay:.76,baseManaCost:1e3,startsAuto:!1,basePotency:[["NEVER",300],["MELEE_MASTERY_TANK",350],["MELEE_MASTERY_II_TANK",400]],reqPotency:[["NEVER",600],["MELEE_MASTERY_TANK",650],["MELEE_MASTERY_II_TANK",700]],dmPotency:[["NEVER",400],["MELEE_MASTERY_TANK",450],["MELEE_MASTERY_II_TANK",500]],highlightIf:e=>e.hasResourceAvailable("DIVINE_MIGHT")||e.isHolySpiritCircleGoodForReq()});rs("HOLY_CIRCLE",72,{baseCastTime:1.5,applicationDelay:.62,baseManaCost:1e3,basePotency:100,reqPotency:350,dmPotency:250,falloff:0,highlightIf:e=>e.hasResourceAvailable("DIVINE_MIGHT")||e.isHolySpiritCircleGoodForReq()});Si("GORING_BLADE",54,{applicationDelay:.53,potency:700,validateAttempt:e=>e.hasResourceAvailable("GORING_BLADE_READY"),highlightIf:e=>e.hasResourceAvailable("GORING_BLADE_READY"),onConfirm:e=>{e.tryConsumeResource("GORING_BLADE_READY")}});rs("CONFITEOR",80,{replaceIf:[nu,au,iu],baseCastTime:0,applicationDelay:.62,baseManaCost:1e3,startsAuto:!1,basePotency:[["NEVER",420],["MELEE_MASTERY_II_TANK",500]],reqPotency:[["NEVER",920],["MELEE_MASTERY_II_TANK",1e3]],falloff:.6,validateAttempt:e=>e.hasResourceAvailable("CONFITEOR_READY"),highlightIf:e=>e.hasResourceAvailable("CONFITEOR_READY"),onConfirm:e=>{e.tryConsumeResource("CONFITEOR_READY"),e.tryConsumeResource("PLD_CONFITEOR_COMBO_TRACKER",!0),e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").gain(1),e.enqueueResourceDrop("PLD_CONFITEOR_COMBO_TRACKER")}});rs("BLADE_OF_FAITH",90,{replaceIf:[YR,au,iu],startOnHotbar:!1,baseCastTime:0,baseManaCost:1e3,startsAuto:!1,applicationDelay:.62,basePotency:[["NEVER",220],["MELEE_MASTERY_II_TANK",260]],reqPotency:[["NEVER",720],["MELEE_MASTERY_II_TANK",760]],falloff:.6,validateAttempt:e=>nu.condition(e),highlightIf:e=>nu.condition(e),onConfirm:e=>{e.tryConsumeResource("PLD_CONFITEOR_COMBO_TRACKER",!0),e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").gain(2),e.enqueueResourceDrop("PLD_CONFITEOR_COMBO_TRACKER")}});rs("BLADE_OF_TRUTH",90,{replaceIf:[YR,nu,iu],startOnHotbar:!1,baseCastTime:0,baseManaCost:1e3,applicationDelay:.89,startsAuto:!1,basePotency:[["NEVER",320],["MELEE_MASTERY_II_TANK",380]],reqPotency:[["NEVER",820],["MELEE_MASTERY_II_TANK",880]],falloff:.6,validateAttempt:e=>au.condition(e),highlightIf:e=>au.condition(e),onConfirm:e=>{e.tryConsumeResource("PLD_CONFITEOR_COMBO_TRACKER",!0),e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").gain(3),e.enqueueResourceDrop("PLD_CONFITEOR_COMBO_TRACKER")}});rs("BLADE_OF_VALOR",90,{replaceIf:[YR,nu,au],startOnHotbar:!1,baseCastTime:0,baseManaCost:1e3,applicationDelay:.89,startsAuto:!1,basePotency:[["NEVER",420],["MELEE_MASTERY_II_TANK",500]],reqPotency:[["NEVER",920],["MELEE_MASTERY_II_TANK",1e3]],falloff:.6,validateAttempt:e=>iu.condition(e),highlightIf:e=>iu.condition(e),onConfirm:e=>{e.tryConsumeResource("PLD_CONFITEOR_COMBO_TRACKER",!0),e.refreshBuff("BLADE_OF_HONOR_READY",0)}});Hn("FIGHT_OR_FLIGHT",2,"cd_FIGHT_OR_FLIGHT",{applicationDelay:.62,cooldown:60,onConfirm:e=>{e.refreshBuff("GORING_BLADE_READY",0),e.refreshBuff("FIGHT_OR_FLIGHT",.62)}});Hn("REQUIESCAT",68,"cd_REQUIESCAT",{autoUpgrade:{trait:"REQUIESCAT_MASTERY",otherSkill:"IMPERATOR"},applicationDelay:.62,cooldown:60,potency:320,onConfirm:e=>{e.resources.get("REQUIESCAT").gain(4),e.enqueueResourceDrop("REQUIESCAT",30),e.hasTraitUnlocked("ENHANCED_REQUIESCAT")&&e.refreshBuff("CONFITEOR_READY",0)}});Hn("IMPERATOR",96,"cd_IMPERATOR",{autoDowngrade:{trait:"REQUIESCAT_MASTERY",otherSkill:"REQUIESCAT"},replaceIf:[Nm],applicationDelay:1.29,cooldown:60,potency:580,falloff:.6,onConfirm:e=>{e.resources.get("REQUIESCAT").gain(4),e.enqueueResourceDrop("REQUIESCAT",30,4),e.hasTraitUnlocked("ENHANCED_REQUIESCAT")&&e.refreshBuff("CONFITEOR_READY",0)}});Hn("BLADE_OF_HONOR",100,"cd_BLADE_OF_HONOR",{startOnHotbar:!1,cooldown:1,replaceIf:[RP],validateAttempt:Nm.condition,highlightIf:Nm.condition,applicationDelay:1.16,potency:1e3,startsAuto:!1,falloff:.5,onConfirm:e=>{e.tryConsumeResource("BLADE_OF_HONOR_READY")}});Hn("SPIRITS_WITHIN",30,"cd_SPIRITS_WITHIN",{autoUpgrade:{trait:"SPIRITS_WITHIN_MASTERY",otherSkill:"EXPIACION"},applicationDelay:.89,cooldown:30,potency:270,onConfirm:e=>{e.getDelayedManaFromAction(500,"SPIRITS_WITHIN")}});Hn("EXPIACION",86,"cd_EXPIACION",{autoDowngrade:{trait:"SPIRITS_WITHIN_MASTERY",otherSkill:"SPIRITS_WITHIN"},applicationDelay:.36,cooldown:30,potency:450,falloff:.6,onConfirm:e=>{e.getDelayedManaFromAction(500,"EXPIACION")}});Hn("CIRCLE_OF_SCORN",50,"cd_CIRCLE_OF_SCORN",{applicationDelay:1.02,cooldown:30,potency:140,falloff:0,onConfirm:(e,t)=>{const a=[];e.hasResourceAvailable("FIGHT_OR_FLIGHT")&&a.push(me.FightOrFlight),e.addDoTPotencies({node:t,effectName:"CIRCLE_OF_SCORN_DOT",skillName:"CIRCLE_OF_SCORN",tickPotency:30,speedStat:"sks",modifiers:a}),e.addEvent(new Ge("apply CoS dot",1.02,()=>{e.applyDoT("CIRCLE_OF_SCORN_DOT",t)}))}});Hn("INTERVENE",66,"cd_INTERVENE",{applicationDelay:.62,cooldown:30,potency:150,maxCharges:2,animationLock:jn});rs("CLEMENCY",58,{baseCastTime:1.5,applicationDelay:.62,baseManaCost:2e3,basePotency:0,highlightIf:e=>e.hasResourceAvailable("REQUIESCAT")});Hn("SHELTRON",35,"cd_SHELTRON",{autoUpgrade:{trait:"SHELTRON_MASTERY",otherSkill:"HOLY_SHELTRON"},validateAttempt:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,highlightIf:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,applicationDelay:0,cooldown:5,onConfirm:e=>{e.resources.get("OATH_GAUGE").consume(50),e.refreshBuff("SHELTRON",0)}});Hn("HOLY_SHELTRON",82,"cd_HOLY_SHELTRON",{autoDowngrade:{trait:"SHELTRON_MASTERY",otherSkill:"SHELTRON"},applicationDelay:0,cooldown:5,validateAttempt:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,highlightIf:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,onConfirm:e=>{e.refreshBuff("HOLY_SHELTRON",0),e.refreshBuff("KNIGHTS_RESOLVE",0),e.refreshBuff("KNIGHTS_BENEDICTION",0),e.resources.get("OATH_GAUGE").consume(50)}});Hn("INTERVENTION",62,"cd_INTERVENTION",{applicationDelay:.8,cooldown:10,validateAttempt:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,highlightIf:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,onConfirm:e=>{e.resources.get("OATH_GAUGE").consume(50)}});K0("HALLOWED_GROUND",50,"cd_HALLOWED_GROUND",{rscType:"HALLOWED_GROUND",applicationDelay:0,cooldown:420});K0("BULWARK",52,"cd_BULWARK",{rscType:"BULWARK",applicationDelay:0,cooldown:90});Hn("SENTINEL",38,"cd_SENTINEL",{autoUpgrade:{trait:"SENTINEL_MASTERY",otherSkill:"GUARDIAN"},applicationDelay:.53,cooldown:120,onConfirm:e=>{e.refreshBuff("SENTINEL",.53)}});Hn("GUARDIAN",92,"cd_GUARDIAN",{autoDowngrade:{trait:"SENTINEL_MASTERY",otherSkill:"SENTINEL"},applicationDelay:.53,cooldown:120,onConfirm:e=>{e.refreshBuff("GUARDIAN",.53),e.refreshBuff("GUARDIANS_WILL",.53)}});Hn("DIVINE_VEIL",56,"cd_DIVINE_VEIL",{applicationDelay:0,cooldown:90,onConfirm:e=>{e.refreshBuff("DIVINE_VEIL",0)}});Hn("PASSAGE_OF_ARMS",70,"cd_PASSAGE_OF_ARMS",{applicationDelay:.62,cooldown:120,onConfirm:e=>{e.refreshBuff("PASSAGE_OF_ARMS",.62)}});Hn("COVER",45,"cd_COVER",{applicationDelay:.62,cooldown:120,validateAttempt:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,highlightIf:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,onConfirm:e=>{e.resources.get("OATH_GAUGE").consume(50)}});Hn("IRON_WILL",10,"cd_IRON_WILL",{applicationDelay:0,cooldown:2,validateAttempt:e=>!e.hasResourceAvailable("IRON_WILL"),onConfirm:e=>{e.resources.get("IRON_WILL").gain(1)},replaceIf:[SP],secondaryCooldown:{cdName:"cd_RELEASE_IRON_WILL",cooldown:1,maxCharges:1}});Hn("RELEASE_IRON_WILL",10,"cd_RELEASE_IRON_WILL",{startOnHotbar:!1,replaceIf:[TP],applicationDelay:0,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("IRON_WILL"),onConfirm:e=>{e.tryConsumeResource("IRON_WILL")},secondaryCooldown:{cdName:"cd_IRON_WILL",cooldown:2,maxCharges:1}});Si("SHIELD_BASH",10,{potency:100,applicationDelay:.45});class gP extends $t{jobSpecificOtherTargetedBuffViewProps(){return[]}jobSpecificSelfTargetedBuffViewProps(){return[]}jobSpecificResourceViewProps(){return[]}}class pP extends Jt{constructor(t){super(t),this.registerRecurringEvents()}get statusPropsGenerator(){return new gP(this)}}class _P extends $t{jobSpecificOtherTargetedBuffViewProps(){return[]}jobSpecificSelfTargetedBuffViewProps(){return[]}jobSpecificResourceViewProps(){return[]}}class IP extends Jt{constructor(t){super(t),this.registerRecurringEvents()}get statusPropsGenerator(){return new _P(this)}}class CP extends $t{jobSpecificOtherTargetedBuffViewProps(){return[]}jobSpecificSelfTargetedBuffViewProps(){return[]}jobSpecificResourceViewProps(){return[]}}class NP extends Jt{constructor(t){super(t),this.registerRecurringEvents()}get statusPropsGenerator(){return new CP(this)}}class OP extends $t{jobSpecificOtherTargetedBuffViewProps(){return[]}jobSpecificSelfTargetedBuffViewProps(){return[]}jobSpecificResourceViewProps(){return[]}}class bP extends Jt{constructor(t){super(t),this.registerRecurringEvents()}get statusPropsGenerator(){return new OP(this)}}class yP extends $t{jobSpecificOtherTargetedBuffViewProps(){return[]}jobSpecificSelfTargetedBuffViewProps(){return[]}jobSpecificResourceViewProps(){return[]}}class vP extends Jt{constructor(t){super(t),this.registerRecurringEvents()}get statusPropsGenerator(){return new yP(this)}}class DP extends $t{jobSpecificOtherTargetedBuffViewProps(){return[]}jobSpecificSelfTargetedBuffViewProps(){return[]}jobSpecificResourceViewProps(){return[]}}class MP extends Jt{constructor(t){super(t),this.registerRecurringEvents()}get statusPropsGenerator(){return new DP(this)}}class LP extends $t{jobSpecificOtherTargetedBuffViewProps(){return[]}jobSpecificSelfTargetedBuffViewProps(){return[]}jobSpecificResourceViewProps(){return[]}}class HP extends Jt{constructor(t){super(t),this.registerRecurringEvents()}get statusPropsGenerator(){return new LP(this)}}function Pd(e){switch(e.job){case"PLD":return new mP(e);case"WAR":return new hP(e);case"DRK":return new pP(e);case"GNB":return new fk(e);case"WHM":return new bP(e);case"SCH":return new NP(e);case"AST":return new IP(e);case"SGE":return new rP(e);case"MNK":return new MP(e);case"DRG":return new ek(e);case"NIN":return new vP(e);case"SAM":return new Wk(e);case"RPR":return new Yk(e);case"VPR":return new HP(e);case"BRD":return new zU(e);case"MCH":return new _k(e);case"DNC":return new qU(e);case"BLM":return new GU(e);case"SMN":return new Qk(e);case"RDM":return new jk(e);case"PCT":return new yk(e)}return new Jt(e)}const mu=e=>{e.job==="RDM"&&e.tryConsumeResource("DUALCAST")&&D.reportWarning(Fe.DualcastEaten)};Nt(ra,"INTERJECT",18,"cd_HEAD_GRAZE",{applicationDelay:0,cooldown:30,assetPath:"Role/Interject.png",startsAuto:!0});Nt(lo,"HEAD_GRAZE",24,"cd_HEAD_GRAZE",{applicationDelay:0,cooldown:30,assetPath:"Role/Head Graze.png"});ra.forEach(e=>{tt(e,"REPRISAL",1,{timeout:15})});ze(ra,"REPRISAL",22,"cd_REPRISAL",{rscType:"REPRISAL",applicationDelay:.62,cooldown:60,duration:e=>e.hasTraitUnlocked("ENHANCED_REPRISAL")&&15||10,assetPath:"Role/Reprisal.png",startsAuto:!0});Qn.forEach(e=>{tt(e,"FEINT",1,{timeout:15})});ze(Qn,"FEINT",22,"cd_FEINT",{rscType:"FEINT",applicationDelay:.537,cooldown:90,duration:e=>e.hasTraitUnlocked("ENHANCED_FEINT")&&15||10,assetPath:"Role/Feint.png"});wa.forEach(e=>{tt(e,"ADDLE",1,{timeout:15})});ze(wa,"ADDLE",8,"cd_ADDLE",{rscType:"ADDLE",applicationDelay:.621,cooldown:90,duration:e=>e.hasTraitUnlocked("ENHANCED_ADDLE")&&15||10,assetPath:"Role/Addle.png"});ra.forEach(e=>{tt(e,"RAMPART",1,{timeout:20})});ze(ra,"RAMPART",8,"cd_RAMPART",{rscType:"RAMPART",applicationDelay:.62,cooldown:90,assetPath:"Role/Rampart.png"});Qn.forEach(e=>{tt(e,"TRUE_NORTH",1,{timeout:10})});ze(Qn,"TRUE_NORTH",50,"cd_TRUE_NORTH",{rscType:"TRUE_NORTH",applicationDelay:0,cooldown:45,maxCharges:2,assetPath:"Role/True North.png"});[...Ga,...wa].forEach(e=>{tt(e,"SWIFTCAST",1,{timeout:10})});ze([...Ga,...wa],"SWIFTCAST",18,"cd_SWIFTCAST",{rscType:"SWIFTCAST",applicationDelay:0,cooldown:40,assetPath:"Role/Swiftcast.png"});[...Ga,...wa].forEach(e=>{tt(e,"LUCID_DREAMING",1,{timeout:21})});ze([...Ga,...wa],"LUCID_DREAMING",14,"cd_LUCID_DREAMING",{rscType:"LUCID_DREAMING",applicationDelay:.623,cooldown:60,assetPath:"Role/Lucid Dreaming.png",onApplication:(e,t)=>{let a=e.resources.get("LUCID_DREAMING");a.node=t,a.tickCount=0;let l=e.findNextQueuedEventByTag(ia.LucidTick);l&&l.addTag(ia.ManaGain)}});[...ra,...Qn,...lo].forEach(e=>{tt(e,"ARMS_LENGTH",1,{timeout:6.5})});ze([...ra,...Qn,...lo],"ARMS_LENGTH",32,"cd_ARMS_LENGTH",{rscType:"ARMS_LENGTH",applicationDelay:.62,cooldown:120,assetPath:"Role/Arms Length.png"});[...Ga,...wa].forEach(e=>{tt(e,"SURECAST",1,{timeout:6.5})});ze([...Ga,...wa],"SURECAST",44,"cd_SURECAST",{rscType:"SURECAST",applicationDelay:0,cooldown:120,assetPath:"Role/Surecast.png"});Qn.forEach(e=>{tt(e,"BLOODBATH",1,{timeout:20})});ze(Qn,"BLOODBATH",8,"cd_BLOODBATH",{rscType:"BLOODBATH",applicationDelay:.625,cooldown:90,assetPath:"Role/Bloodbath.png"});Nt([...Qn,...lo],"SECOND_WIND",12,"cd_SECOND_WIND",{healingPotency:600,applicationDelay:.625,cooldown:120,assetPath:"Role/Second Wind.png"});Nt(ra,"PROVOKE",15,"cd_PROVOKE",{applicationDelay:.62,cooldown:30,assetPath:"Role/Provoke.png",drawsAggro:!0,startsAuto:!0});Nt(ra,"SHIRK",48,"cd_SHIRK",{applicationDelay:0,cooldown:120,assetPath:"Role/Shirk.png"});Nt(ra,"LOW_BLOW",25,"cd_LOW_BLOW",{applicationDelay:.62,cooldown:25,assetPath:"Role/Low Blow.png",startsAuto:!0});oo(Ga,"ESUNA",10,{manaCost:400,castTime:0,applicationDelay:1.14,assetPath:"Role/Esuna.png"});Nt(Ga,"RESCUE",48,"cd_RESCUE",{applicationDelay:0,cooldown:120,assetPath:"Role/Rescue.png"});Nt(Qn,"LEG_SWEEP",10,"cd_LEG_SWEEP",{applicationDelay:.625,cooldown:40,assetPath:"Role/Leg Sweep.png"});ze($l,"TINCTURE",1,"cd_TINCTURE",{rscType:"TINCTURE",applicationDelay:.64,cooldown:270,assetPath:"General/Tincture.png",onConfirm:mu});ze($l,"SPRINT",1,"cd_SPRINT",{rscType:"SPRINT",applicationDelay:.133,cooldown:60,assetPath:"General/Sprint.png",onConfirm:mu});ra.forEach(e=>{tt(e,"SHIELD_WALL",1,{timeout:10}),tt(e,"STRONGHOLD",1,{timeout:12})});const VR=e=>Object.keys(tC).forEach(t=>{t!=="UNKNOWN"&&e.tryConsumeResource(t)});ca(ra,"SHIELD_WALL","cd_LIMIT_BREAK_1",{tier:"1",applicationDelay:.45,animationLock:1.93,onApplication:e=>{VR(e),e.gainStatus("SHIELD_WALL")}});ca(ra,"STRONGHOLD","cd_LIMIT_BREAK_2",{tier:"2",applicationDelay:.89,animationLock:3.86,onApplication:e=>{VR(e),e.gainStatus("STRONGHOLD")}});ra.forEach(e=>{const t=It[e].limitBreak??"UNKNOWN",a=It[e].limitBreakBuff??"UNKNOWN";tt(e,a,1,{timeout:8}),ca(e,t,"cd_LIMIT_BREAK_3",{tier:"3",applicationDelay:1.34,animationLock:3.86,onApplication:l=>{VR(l),l.gainStatus(a)}})});ca(Ga,"HEALING_WIND","cd_LIMIT_BREAK_1",{tier:"1",castTime:2,healingPotency:25,applicationDelay:.76,animationLock:2.1});ca(Ga,"BREATH_OF_THE_EARTH","cd_LIMIT_BREAK_2",{tier:"2",castTime:2,healingPotency:50,applicationDelay:.8,animationLock:5.13});Ga.forEach(e=>{const t=It[e].limitBreak??"UNKNOWN";ca(e,t,"cd_LIMIT_BREAK_3",{tier:"3",castTime:2,healingPotency:100,applicationDelay:.8,animationLock:8.1})});ca(Qn,"BRAVER","cd_LIMIT_BREAK_1",{tier:"1",castTime:2,applicationDelay:2.23,animationLock:3.86,potency:1e3});ca(Qn,"BLADEDANCE","cd_LIMIT_BREAK_2",{tier:"2",castTime:3,applicationDelay:3.28,animationLock:3.86,potency:2200});Qn.forEach(e=>{const t=It[e].limitBreak??"UNKNOWN";ca(e,t,"cd_LIMIT_BREAK_3",{tier:"3",castTime:4.5,applicationDelay:2.26,animationLock:3.7,potency:3500})});ca(lo,"BIGSHOT","cd_LIMIT_BREAK_1",{tier:"1",castTime:2,applicationDelay:2.23,animationLock:3.1,potency:540});ca(lo,"DESPERADO","cd_LIMIT_BREAK_2",{tier:"2",castTime:3,applicationDelay:2.49,animationLock:3.1,potency:1170});lo.forEach(e=>{const t=It[e].limitBreak??"UNKNOWN";ca(e,t,"cd_LIMIT_BREAK_3",{tier:"3",castTime:4.5,applicationDelay:3.16,animationLock:3.7,potency:1890})});ca(wa,"SKYSHARD","cd_LIMIT_BREAK_1",{tier:"1",castTime:2,applicationDelay:1.64,animationLock:3.1,onConfirm:mu,potency:600});ca(wa,"STARSTORM","cd_LIMIT_BREAK_2",{tier:"2",castTime:3,applicationDelay:3.75,animationLock:5.1,onConfirm:mu,potency:1300});wa.forEach(e=>{const t=It[e].limitBreak??"UNKNOWN";ca(e,t,"cd_LIMIT_BREAK_3",{tier:"3",castTime:4.5,applicationDelay:4.5,animationLock:8.1,onConfirm:e==="RDM"?mu:void 0,potency:2100})});const NI="stdtick";var Oi,Go,Sr,$a,wo,uu,Yl,gr,du,Bo,Fo,bi,jo,wn,hi,Vl,De,Gl,Om,Mo,zc,bm,na,ym,Z0,vm,Lo,Dm,Q0,$0;class xP{constructor(){ke(this,De);F(this,"timeScale");F(this,"shouldLoop");F(this,"tickMode");F(this,"timeline");ke(this,Oi);F(this,"gameConfig");F(this,"record");F(this,"imageExportConfig");F(this,"timelineDrawOptions",GN);F(this,"game");ke(this,Go,0);ke(this,Sr,!0);ke(this,$a);ke(this,wo,[]);ke(this,uu,[]);ke(this,Yl,[]);ke(this,gr,new Map);ke(this,du,new Map);ke(this,Bo,new Map);ke(this,Fo,new Map);F(this,"savedHistoricalGame");F(this,"savedHistoricalRecord");ke(this,bi,!1);ke(this,jo,!1);ke(this,wn,!1);ke(this,hi,!1);F(this,"displayingUpToDateGameState",!0);ke(this,Vl,0);F(this,"lastSkillTime",0);this.timeScale=1,this.shouldLoop=!1,this.tickMode=Ja.RealTimeAutoPause,this.timeline=new Ax,this.timeline.reset(),ve(this,Oi,new oU),this.gameConfig=new Wl($i),this.game=Pd(this.gameConfig),this.record=new Zi,this.record.config=this.gameConfig,this.imageExportConfig={wrapThresholdSeconds:JSON.parse(dn("img: wrapThresholdSeconds")??"0"),includeTime:JSON.parse(dn("img: includeTime")??"true")},ve(this,$a,-this.gameConfig.countdown),this.savedHistoricalGame=this.game,this.savedHistoricalRecord=this.record,ge(this,De,Mo).call(this)}updateStats(){ge(this,De,zc).call(this),ge(this,De,bm).call(this)}updateAllDisplay(t=this.game){Sm(t.config.serialized()),this.updateStatusDisplay(t),this.updateSkillButtons(t),this.updateTimelineDisplay(),this.updateStats(),Of(this.getActiveJob())}checkRecordValidity(t,a){console.assert(t.config!==void 0);let l={isValid:!0,firstInvalidAction:void 0,invalidReason:void 0,invalidTime:void 0,straightenedIfValid:void 0};return a===void 0?(console.log("no edit happened"),l):(ge(this,De,Om).call(this,()=>{var d;let s=t.config??this.gameConfig;this.game=Pd(s),this.record=new Zi,this.record.config=s,ve(this,$a,-s.countdown),ge(this,De,Gl).call(this,this.record.config),ve(this,bi,!0);let c=ge(this,De,Lo).call(this,{line:t,replayMode:gn.Edited,firstEditedNodeIndex:a,selectionStart:t.getFirstSelection(),selectionEnd:t.getLastSelection()});ve(this,bi,!1),l.isValid=c.success,l.firstInvalidAction=c.firstInvalidNode,l.invalidReason=(d=c.invalidReason)==null?void 0:d.toString(),l.invalidTime=c.invalidTime,c.success&&(l.straightenedIfValid=this.record)}),l)}displayHistoricalState(t,a){let l=t+this.gameConfig.countdown;const s=this.record.getFirstSelection()!==void 0;ge(this,De,Om).call(this,()=>{let c=this.record;this.game=Pd(this.gameConfig),this.record=new Zi,this.record.config=this.gameConfig,ve(this,$a,-this.gameConfig.countdown),ge(this,De,Gl).call(this,this.record.config),ge(this,De,Lo).call(this,{line:c,replayMode:gn.Exact,maxReplayTime:l,cutoffIndex:a}),this.timeline.updateElem({type:rt.s_ViewOnlyCursor,time:this.game.time,displayTime:this.game.getDisplayTime(),enabled:!0}),this.updateStatusDisplay(this.game),this.updateSkillButtons(this.game),Xl(),ge(this,De,zc).call(this),this.timeline.drawElements()}),yf(!0),s&&ge(this,De,zc).call(this,!0),ge(this,De,bm).call(this)}displayCurrentState(){this.displayingUpToDateGameState=!0,this.timeline.updateElem({type:rt.s_ViewOnlyCursor,enabled:!1,time:0,displayTime:0}),yf(!1),this.updateAllDisplay(this.game)}restart(){ge(this,De,Mo).call(this),ge(this,De,Gl).call(this,this.gameConfig)}getPresetLines(){return ee(this,Oi).getLinesForJob(this.getActiveJob())}serializedPresets(){return ee(this,Oi).serialized()}addSelectionToPreset(t="(untitled)"){console.assert(this.record.getFirstSelection());let a=this.record.getSelected();a.name=t,ee(this,Oi).addLine(a,this.getActiveJob())}appendFilePresets(t){ee(this,Oi).deserializeAndAppend(t)}loadBattleRecordFromFile(t){t.config.procMode===void 0&&(t.config.rngProcs!==void 0?t.config.procMode=t.config.rngProcs?jt.RNG:jt.Never:t.config.procMode=jt.RNG),t.config.fps===void 0&&(t.config.fps=$i.fps),t.config.gcdSkillCorrection===void 0&&(t.config.gcdSkillCorrection=$i.gcdSkillCorrection),t.config.level&&(t.config.level=parseInt(t.config.level)),t.config.skillSpeed===void 0&&(t.config.skillSpeed=ht.getSubstatBase(t.config.level)),t.config.shellVersion===void 0&&(t.config.shellVersion=Kl.Initial),t.config.job===void 0&&(t.config.job=QN(t.actions.flatMap(c=>c.skillName?[hC(c.skillName)]:[]))),Qn.includes(t.config.job)||(t.config.initialResourceOverrides=t.config.initialResourceOverrides.filter(c=>![ot.FLANK_POSITIONAL.name,ot.REAR_POSITIONAL.name].includes(c.type)));let a=new Wl(t.config);this.gameConfig=a,this.record=new Zi,this.record.config=a,ge(this,De,Mo).call(this),ge(this,De,Gl).call(this,this.gameConfig);let l=Cr.deserialize(t.actions),s=ge(this,De,Lo).call(this,{line:l,replayMode:gn.Exact});if(!s.success){let c=`Failed to load the entire record- 
`;if(s.firstInvalidNode)if(s.firstInvalidNode.info.type===vt.Skill){const d=s.firstInvalidNode.info.skillName?io(s.firstInvalidNode.info.skillName):"(unknown)";c+="Stopped here because the next action "+d+" can't be added: "}else c+="Stopped here because the next action "+s.firstInvalidNode.info.type+" can't be added: ";c+=s.invalidReason,window.alert(c)}}applyEditedRecord(t){if(!t.config){console.assert(!1);return}this.gameConfig=t.config,this.record=new Zi,this.record.config=t.config,ge(this,De,Mo).call(this),ge(this,De,Gl).call(this,this.gameConfig);let a=ge(this,De,Lo).call(this,{line:t,replayMode:gn.Exact,removeTrailingIdleTime:!0});console.assert(a.success),t.selectionStartIndex!==void 0&&(this.record.selectSingle(t.selectionStartIndex),this.record.selectUntil(t.selectionEndIndex)),this.autoSave()}getTincturePotencyMultiplier(){return 1+ee(this,Go)*.01}setTinctureBuffPercentage(t){ve(this,Go,t),this.displayCurrentState(),ul()}setUntargetableMask(t){ve(this,Sr,t),this.displayCurrentState(),ul()}getUntargetableMask(){return ee(this,Sr)}getMaxTicks(t,a,l){let s=0;const c=[a];return l||c.push(NI),c.forEach(d=>{var h;(h=ee(this,gr).get(d))==null||h.forEach(E=>{!Fn(E-this.gameConfig.countdown)&&E<=t&&s++})}),s}getDotCoverageTimeFraction(t,a){return this.getOverTimeCoverageTimeFraction(t,a,ee(this,Bo))}getHotCoverageTimeFraction(t,a){return this.getOverTimeCoverageTimeFraction(t,a,ee(this,Fo))}getOverTimeCoverageTimeFraction(t,a,l){if(t<=pn.epsilon)return 0;const s=l.get(a);if(!s)return 0;let c=0;s.forEach(h=>{if(h.tStartDisplay<=t){let E=Math.max(0,h.tStartDisplay),A=h.tEndDisplay!==void 0&&h.tEndDisplay<=t?h.tEndDisplay:t;A=Math.max(0,A),c+=Nr(E,A)}});let d=Nr(0,t);return c/d}setTimelineOptions(t){this.timelineDrawOptions={...this.timelineDrawOptions,...t},this.updateTimelineDisplay()}getTimelineRenderingProps(){var s,c;let t=this.record.getFirstSelection()!=null&&this.record.getLastSelection()!=null,a=this.gameConfig.countdown,l=this.timeline.getAllSlotsTimeInfo();return l!==null&&(a=Math.max(a,l.countdown)),{timelineWidth:this.timeline.getCanvasWidth(),timelineHeight:this.timeline.getCanvasHeight(),scale:this.timeline.scale,countdown:a,tincturePotencyMultiplier:this.getTincturePotencyMultiplier(),untargetableMask:ee(this,Sr),sharedElements:this.timeline.sharedElements,slots:this.timeline.slots,activeSlotIndex:this.timeline.activeSlotIndex,allMarkers:this.timeline.getAllMarkers(),untargetableMarkers:this.timeline.getUntargetableMarkers(),buffMarkers:this.timeline.getBuffMarkers(),showSelection:t,selectionStartDisplayTime:(((s=this.record.getFirstSelection())==null?void 0:s.tmp_startLockTime)??0)-this.gameConfig.countdown,selectionEndDisplayTime:(((c=this.record.getLastSelection())==null?void 0:c.tmp_endLockTime)??0)-this.gameConfig.countdown,drawOptions:this.timelineDrawOptions}}reportWarning(t){ee(this,wn)||this.timeline.addElement({type:rt.WarningMark,warningType:t,time:this.game.time,displayTime:this.game.getDisplayTime()})}resolvePotency(t){this.resolveAnyPotency(t,rt.DamageMark,ee(this,wo)),ge(this,De,zc).call(this)}resolveHealingPotency(t){this.resolveAnyPotency(t,rt.HealingMark,ee(this,uu))}resolveOverTimePotency(t,a){a==="damage"?this.resolveAnyPotency(t,rt.DamageMark,ee(this,wo)):this.resolveAnyPotency(t,rt.HealingMark,ee(this,uu))}resolveAnyPotency(t,a,l){t.resolve(this.game.getDisplayTime()),ve(this,$a,this.game.time),t.base===0&&(a=rt.AggroMark);let s=!1;if(t.modifiers.forEach(c=>{c.source===z.POT&&(s=!0)}),!ee(this,wn)){let c="{skill}@"+t.sourceTime.toFixed(3);t.description.length>0&&(c+=" "+t.description);const d={potency:t,sourceDesc:c,sourceSkill:t.sourceSkill};let h=this.timeline.tryGetElement(this.game.time,a);h?(h.potencyInfos.push(d),s&&!h.buffs.includes("TINCTURE")&&h.buffs.push("TINCTURE")):this.timeline.addElement({type:a,potencyInfos:[d],buffs:s?["TINCTURE"]:[],time:this.game.time,displayTime:this.game.getDisplayTime()}),l.push({time:this.game.getDisplayTime(),source:t.sourceSkill+"@"+t.sourceTime,potency:t.getAmount({tincturePotencyMultiplier:1,includePartyBuffs:!0,includeSplash:!0}),buffs:s?["TINCTURE"]:[]})}}reportLucidTick(t,a){ee(this,wn)||this.timeline.addElement({type:rt.LucidMark,time:t,displayTime:this.game.getDisplayTime(),sourceDesc:a})}reportManaTick(t,a){ee(this,wn)||this.timeline.addElement({type:rt.MPTickMark,time:t,displayTime:this.game.getDisplayTime(),sourceDesc:a})}reportMeditateTick(t,a){ee(this,wn)||this.timeline.addElement({type:rt.MeditateTickMark,time:t,displayTime:this.game.getDisplayTime(),sourceDesc:a})}reportAutoTick(t,a){ee(this,wn)||this.timeline.addElement({type:rt.AutoTickMark,time:t,displayTime:this.game.getDisplayTime(),sourceDesc:a})}reportDotTick(t,a){this.reportOverTimeTick(t,ee(this,gr),a)}reportHotTick(t,a){this.reportOverTimeTick(t,ee(this,du),a)}reportOverTimeTick(t,a,l){if(!ee(this,wn)){const s=l??NI;let c=a.get(s);c||(c=[],a.set(s,c)),c.push(t),this.updateStats()}}reportDotStart(t,a){this.reportOverTimeStart(t,a,"damage")}reportHotStart(t,a){this.reportOverTimeStart(t,a,"healing")}reportOverTimeStart(t,a,l){if(!ee(this,wn)){const s=l==="damage"?ee(this,Bo):ee(this,Fo);let c=s.get(a);c||(c=[],s.set(a,c));let d=c.length;console.assert(d===0||c[d-1].tEndDisplay!==void 0),c.push({tStartDisplay:t,tEndDisplay:void 0})}}reportDotDrop(t,a){this.reportOverTimeDrop(t,a,"damage")}reportHotDrop(t,a){this.reportOverTimeDrop(t,a,"healing")}reportOverTimeDrop(t,a,l){if(!ee(this,wn)){const c=(l==="damage"?ee(this,Bo):ee(this,Fo)).get(a);if(console.assert(c,`Reported dropping ${a} when no coverage was detected`),!c)return;let d=c.length;console.assert(d>0&&c[d-1].tEndDisplay===void 0),c[d-1].tEndDisplay=t}}updateStatusDisplay(t){let a=t.resources.get("NOT_CASTER_TAXED"),l=t.resources.get("NOT_ANIMATION_LOCKED"),s=t.cooldowns.get("cd_GCD"),c={gcdReady:s.stacksAvailable()>0,gcd:s.currentStackCd(),timeTillGCDReady:t.cooldowns.timeTillAnyStackAvailable("cd_GCD"),castLocked:t.resources.timeTillReady("NOT_CASTER_TAXED")>0,castLockTotalDuration:a.pendingChange?a.pendingChange.delay:0,castLockCountdown:t.resources.timeTillReady("NOT_CASTER_TAXED"),animLocked:t.resources.timeTillReady("NOT_ANIMATION_LOCKED")>0,animLockTotalDuration:l.pendingChange?l.pendingChange.delay:0,animLockCountdown:t.resources.timeTillReady("NOT_ANIMATION_LOCKED"),canMove:t.resources.get("MOVEMENT").available(1)};const d=t.statusPropsGenerator;zN(h=>({time:t.getDisplayTime(),resources:d.getAllResourceViewProps(h),resourceLocks:c,enemyBuffs:d.getAllOtherTargetedBuffViewProps(),selfBuffs:d.getAllSelfTargetedBuffViewProps(),level:t.config.level}),d.statusLayoutFn)}updateTimelineDisplay(){this.timeline.setTimeSegment(0,this.game.time),Xl(),Vo(),ee(this,wn)||this.timeline.updateElem({type:rt.s_Cursor,time:this.game.time,displayTime:this.game.getDisplayTime()}),this.timeline.drawElements()}updateSkillButtons(t){uN(this.game.displayedSkills.getCurrentSkillNames(this.game).map(a=>t.getSkillAvailabilityStatus(a)))}setTimeControlSettings(t){this.timeScale=t.timeScale,this.tickMode=t.tickMode,this.shouldLoop=!1}setConfigAndRestart(t){const a=this.gameConfig.job;this.gameConfig=new Wl({...t,shellVersion:Mf.version}),this.record=new Zi,this.record.config=this.gameConfig,ge(this,De,Mo).call(this),ge(this,De,Gl).call(this,this.gameConfig),a!==t.job&&Of(t.job),this.autoSave()}getDisplayedGame(){return this.displayingUpToDateGameState?this.game:this.savedHistoricalGame}getActiveJob(){return this.game.job}getSkillInfo(t){return t.game.getSkillAvailabilityStatus(t.skillName)}autoSave(){let t=this.record.serialized();this.timeline.saveCurrentSlot(t,this.gameConfig.countdown,this.game.time)}tryAutoLoad(){let t=dn("gameRecord");t!==null&&(console.log("migrating existing record to slot 0"),Qt("gameRecord0",t),nm("gameRecord"));for(let l=0;l<al;l++)this.timeline.loadSlot(l);this.timeline.slots.length>0||this.timeline.addSlot(),this.setActiveSlot(0)}setActiveSlot(t){ge(this,De,ym).call(this,{shouldLoop:!1}),this.autoSave(),this.record.unselectAll(),console.assert(this.timeline.loadSlot(t)),this.displayCurrentState()}getDamageLogCsv(){let t=ee(this,wo).map(a=>{let l=!1;a.buffs.forEach(c=>{c==="TINCTURE"&&(l=!0)});let s=a.potency;return l&&(s*=this.getTincturePotencyMultiplier()),[a.time,a.source,s]});return[["time","damageSource","potency"]].concat(t)}getActionsLogCsv(){let t=ee(this,Yl).map(a=>[a.time,a.action,a.isGCD,a.castTime]);return[["time","action","isGCD","castTime"]].concat(t)}getAmaSimCsv(){const t=R=>R===xa.TINCTURE.name?"Grade 3 Gemdraught":R.replace(" 2"," II").replace(" 3"," III").replace(" 4"," IV"),a=this.getActiveJob(),l=ra.includes(a)||Qn.includes(a),s=this.timeline.getBuffMarkers().map(R=>{const T=new af(R.description);let S=T.info.name;T.info.name===k.Card_TheSpear?S="The Spear":T.info.name===k.Card_TheBalance?S="The Balance":[k.RadiantFinale1,k.RadiantFinale2,k.RadiantFinale3].includes(T.info.name)&&(S="Radiant Finale");const p=()=>T.info.name===k.Dokumori?"Debuff Only":T.info.name===k.RadiantFinale1?'"1 Coda, Buff Only"':T.info.name===k.RadiantFinale2?'"2 Coda, Buff Only"':T.info.name===k.RadiantFinale3?'"3 Coda, Buff Only"':[k.ArmysPaeon,k.MagesBallad,k.WanderersMinuet,k.StandardFinish,k.TechnicalFinish].includes(T.info.name)?"Buff Only":T.info.name===k.Card_TheSpear?l?"Small":"Big":T.info.name===k.Card_TheBalance?l?"Big":"Small":"";return[R.time,S,T.info.job,p(),""]}),c=ee(this,Yl).filter(R=>!R.action.includes("Toggle buff")).map(R=>{let T="";if(R.isDamaging&&R.targetCount!==void 0){T='"';for(let S=0;S<R.targetCount;S++)S!==0&&(T+=", "),T+="Boss"+S.toString();T+='"'}return[R.time,t(R.action),"","",T]}),d=["use_strict_skill_naming = False"],h=!(l||lo.includes(a));h&&d.push("enable_autos = False");const E={job_class:a,det_stat:this.gameConfig.determination,crit_stat:this.gameConfig.criticalHit,dh_stat:this.gameConfig.directHit,speed_stat:h?this.gameConfig.spellSpeed:this.gameConfig.skillSpeed,version:Ky,level:this.gameConfig.level};d.push("stats = "+JSON.stringify(E));const A=this.timeline.getUntargetableMarkers().map(R=>`(${R.time}, ${R.time+R.duration}),`);return A.length>0&&d.push("downtime_windows = ("+A.join(" ")+")"),{meta:d,body:[["time","skill_name","job_class","skill_conditional","targets"]].concat(s,c)}}tryAddLine(t,a=gn.SkillSequence){ve(this,bi,!0);let l=ge(this,De,Lo).call(this,{line:t,replayMode:a});return l.success?(this.autoSave(),ve(this,bi,!1),!0):(this.rewindUntilBefore(l.firstAddedIndex,!1),window.alert('Failed to add line "'+t.name+'" due to insufficient resources and/or stats mismatch.'),ve(this,bi,!1),!1)}deleteLine(t){ee(this,Oi).deleteLine(t)}deleteAllLines(){ee(this,Oi).deleteAllLines()}reportInterruption(t){if(!ee(this,wn)){const a=t.failNode.getNameForMessage();window.alert("cast failed! Resources for "+a+" are no longer available"),console.warn("failed: "+a)}if(ee(this,bi))ve(this,jo,!0);else{let a=this.game.time,l=this.shouldLoop;this.rewindUntilBefore(t.failIndex,!1),this.autoSave(),ge(this,De,na).call(this,{deltaTime:a-this.game.time,separateNode:!0}),this.shouldLoop=l}}rewindUntilBefore(t,a){let l=this.record;this.record=new Zi,this.record.config=this.gameConfig,ge(this,De,Mo).call(this),ge(this,De,Gl).call(this,this.gameConfig),t!==void 0&&(l.spliceUpTo(t),ge(this,De,Lo).call(this,{line:l,replayMode:gn.Exact,removeTrailingIdleTime:a}))}removeTrailingIdleTime(){let t;for(let a=this.record.length-1;a>=0;a--)if(this.record.actions[a].info.type===vt.Skill){t=a;break}t===void 0?this.rewindUntilBefore(0,!0):this.rewindUntilBefore(t+1,!0)}waitTillNextMpOrLucidTick(){ge(this,De,na).call(this,{deltaTime:this.game.timeTillNextMpGainEvent(),separateNode:!0}),this.updateAllDisplay()}requestUseSkill(t){this.tickMode===Ja.RealTimeAutoPause&&this.shouldLoop||ge(this,De,vm).call(this,t.skillName,t.targetCount).status.ready()&&(this.scrollToTime(this.game.time),this.autoSave())}requestToggleBuff(t){return this.game.requestToggleBuff(t)?(this.record.addActionNode(cx(t)),ee(this,Yl).push({time:this.game.getDisplayTime(),action:"Toggle buff: "+ot[t].name,isGCD:0,castTime:0,isDamaging:!1}),!0):!1}scrollToTime(t){let a=t===void 0?this.game.time:t;setTimeout(()=>{Um(Ct.positionFromTimeAndScale(a,this.timeline.scale))},0)}step(t){ge(this,De,na).call(this,{deltaTime:t,separateNode:!0}),this.updateAllDisplay()}handleKeyboardEvent(t){this.displayingUpToDateGameState&&(this.tickMode===Ja.RealTimeAutoPause?ge(this,De,Q0).call(this,t):this.tickMode===Ja.Manual&&ge(this,De,$0).call(this,t))}setImageExportConfig(t){this.imageExportConfig=t}}Oi=new WeakMap,Go=new WeakMap,Sr=new WeakMap,$a=new WeakMap,wo=new WeakMap,uu=new WeakMap,Yl=new WeakMap,gr=new WeakMap,du=new WeakMap,Bo=new WeakMap,Fo=new WeakMap,bi=new WeakMap,jo=new WeakMap,wn=new WeakMap,hi=new WeakMap,Vl=new WeakMap,De=new WeakSet,Gl=function(t){let a=t.initialResourceOverrides;for(let l=0;l<a.length;l++)a[l].applyTo(this.game)},Om=function(t){this.displayingUpToDateGameState=!1,ve(this,wn,!0);let a=this.game,l=this.record,s=ee(this,$a);t(),ve(this,wn,!1),this.savedHistoricalGame=this.game,this.savedHistoricalRecord=this.record,this.game=a,this.record=l,ve(this,$a,s)},Mo=function(){this.game=Pd(this.gameConfig),ge(this,De,ym).call(this,{shouldLoop:!1}),this.timeline.reset(),this.record.unselectAll(),ve(this,$a,-this.gameConfig.countdown),ve(this,wo,[]),ve(this,Yl,[]),ve(this,gr,new Map),ve(this,Bo,new Map),ve(this,du,new Map),ve(this,Fo,new Map),ve(this,bi,!1),ve(this,jo,!1),this.displayingUpToDateGameState=!0},zc=function(t=!1){if(!ee(this,hi)){let a=AU({tinctureBuffPercentage:ee(this,Go),lastDamageApplicationTime:ee(this,$a)});t&&(a={mainTable:a.mainTable,mainTableSummary:a.mainTableSummary,dotTables:a.dotTables,mode:a.mode}),_m(a)}},bm=function(){if(!ee(this,hi)){let t=EU({tinctureBuffPercentage:ee(this,Go),lastDamageApplicationTime:ee(this,$a)});JN(t)}},na=function(t){if(t.deltaTime>0){ve(this,Vl,t.deltaTime);let a=this.game.tick(t.deltaTime,t.prematureStopCondition?t.prematureStopCondition:()=>!1);t.separateNode&&this.record.addActionNode(j_(a))}},ym=function(t){let a=t.shouldLoop;this.shouldLoop!==a&&(this.shouldLoop=a,this.shouldLoop&&ge(this,De,Dm).call(this,()=>this.shouldLoop))},Z0=function(t){let a=this.game.timeTillAnySkillAvailable();t>=0&&(a=Math.min(t-this.game.time,a)),ge(this,De,na).call(this,{deltaTime:a,separateNode:!1})},vm=function(t,a,l=this.tickMode,s=-1){let c=this.game.getSkillAvailabilityStatus(t);const d=c.timeTillAvailable;if(ge(this,De,na).call(this,{deltaTime:d,separateNode:!1}),t=AC(t,this.game),c=this.game.getSkillAvailabilityStatus(t),c.status.ready()){let h=rx(t,a);this.record.addActionNode(h);const E=this.record.tailIndex;this.game.useSkill(t,h,E),l===Ja.RealTimeAutoPause&&(this.shouldLoop=!0,ge(this,De,Dm).call(this,()=>this.game.timeTillAnySkillAvailable()>0));let A=this.game.timeTillAnySkillAvailable();if(h.tmp_startLockTime=this.game.time,h.tmp_endLockTime=this.game.time+A,!ee(this,wn)){this.lastSkillTime=this.game.time;let R=this.game.getSkillAvailabilityStatus(t,!0),S=this.game.skillsList.get(t).cdName==="cd_GCD",p=c.castTime>0&&!c.instantCast,I=p?c.castTime-Wl.getSlidecastWindow(c.castTime):0,b=R.cdRecastTime;t==="MEDITATE"&&(S=!0,b=this.game.getSkillAvailabilityStatus("YUKIKAZE").cdRecastTime),this.timeline.addElement({type:rt.Skill,displayTime:this.game.getDisplayTime(),skillName:t,isGCD:S,isSpellCast:p,time:this.game.time,relativeSnapshotTime:I,lockDuration:A,recastDuration:b,node:h,actionIndex:E}),ee(this,Yl).push({time:this.game.getDisplayTime(),action:xa[t].name,isGCD:S?1:0,castTime:c.instantCast?0:c.castTime,targetCount:h.targetCount,isDamaging:h.anyPotencies()})}l!==Ja.RealTimeAutoPause&&ge(this,De,Z0).call(this,s),ee(this,hi)||Vo()}else d>0&&this.record.addActionNode(j_(d));return c},Lo=function(t){ve(this,hi,!0),t.removeTrailingIdleTime===void 0&&(t.removeTrailingIdleTime=!1);let a=t.maxReplayTime??-1,l=t.replayMode;t.replayMode===gn.Edited&&(l=gn.Exact);const s=t.line;if(s.length===0)return ve(this,hi,!1),{success:!0,firstAddedIndex:void 0,firstInvalidNode:void 0,invalidReason:void 0,invalidTime:void 0};let c=this.record.length,d;const h=t.cutoffIndex??s.actions.length,E=s.actions.slice();for(let T=0;T<h;T++){const S=E[T];t.replayMode===gn.Edited&&l===gn.Exact&&T===t.firstEditedNodeIndex&&(l=gn.Edited);let p=!1,I,b,O,v=0;if(S.info.type===vt.Wait?v=S.info.waitDuration:S.info.type===vt.Skill&&(v=this.game.getSkillAvailabilityStatus(S.info.skillName).timeTillAvailable),T>0){const P=E[T-1].legacyWaitDuration;if(P!==void 0&&Math.abs(P-ee(this,Vl))>pn.epsilon){const U=P-ee(this,Vl);if(U>0&&S.info.type!==vt.Wait){let V=!0;if(S.info.type===vt.Skill){const G=this.game.getSkillAvailabilityStatus(S.info.skillName).timeTillAvailable;V=Math.abs(G-U)>pn.epsilon}V&&(ge(this,De,na).call(this,{deltaTime:U,separateNode:V}),c++)}else S.info.type===vt.Wait&&(v+=U)}}if(a>=0&&a-this.game.time<v&&l===gn.Exact)return ge(this,De,na).call(this,{deltaTime:a-this.game.time,separateNode:!0}),ve(this,hi,!1),this.updateAllDisplay(),{success:!0,firstAddedIndex:d,firstInvalidNode:void 0,invalidReason:void 0,invalidTime:void 0};if(S.info.type===vt.Wait)ge(this,De,na).call(this,{deltaTime:v,separateNode:!0});else if(S.info.type===vt.Skill){let L=S.info.skillName;t.replayMode===gn.SkillSequence&&(L=pr(this.game.job,L,this.gameConfig.level));let P=ge(this,De,vm).call(this,L,S.info.targetCount,Ja.Manual,a);P.status.ready()||(p=!0,I=S,b=P.status.clone(),O=this.game.getDisplayTime()),ee(this,jo)&&(ve(this,jo,!1),p=!0,I=S,b=P.status,O=this.game.getDisplayTime())}else if(S.info.type===vt.SetResourceEnabled&&(l===gn.Exact||l===gn.Edited)){let L=this.requestToggleBuff(S.info.buffName);const P=l===gn.Exact;if(L)ge(this,De,na).call(this,{deltaTime:P?v:Math.min(v,this.game.timeTillAnySkillAvailable()),separateNode:!1});else{const U=Bm();U.addUnavailableReason(qn.BuffNoLongerAvailable),p=!0,I=S,b=U,O=this.game.getDisplayTime()}}else console.assert(!1);if(t.replayMode===gn.Edited){let L=this.record.tailIndex;S===t.selectionStart&&L>=0?this.record.selectSingle(L):S===t.selectionEnd&&L>=0&&this.record.selectUntil(L)}if(this.record.length!==c&&d===void 0&&(d=this.record.tailIndex),p)return ve(this,hi,!1),this.updateAllDisplay(),{success:!1,firstAddedIndex:d,firstInvalidNode:I,invalidReason:b,invalidTime:O}}if(t.cutoffIndex!==void 0){const T=E[t.cutoffIndex].info;if(T.type===vt.Skill){const S=this.game.getSkillAvailabilityStatus(T.skillName);ge(this,De,na).call(this,{deltaTime:S.timeTillAvailable,separateNode:!1})}}const A=E[E.length-1],R=A.legacyWaitDuration;if(R!==void 0&&(A.info.type===vt.Skill||A.info.type===vt.SetResourceEnabled)&&Math.abs(R-ee(this,Vl))>pn.epsilon){const T=R-ee(this,Vl);ge(this,De,na).call(this,{deltaTime:T,separateNode:!0})}return ve(this,hi,!1),this.updateAllDisplay(),{success:!0,firstAddedIndex:d,firstInvalidNode:void 0,invalidReason:void 0,invalidTime:void 0}},Dm=function(t){let a=0,l=this;const s=function(c){var E,A,R;a===0&&(a=c);let d=(c-a)/1e3*l.timeScale,h=l.game.timeTillAnySkillAvailable();h>=d?ge(E=l,De,na).call(E,{deltaTime:d,separateNode:!1,prematureStopCondition:()=>!t()}):(ge(A=l,De,na).call(A,{deltaTime:h,separateNode:!1,prematureStopCondition:()=>!t()}),ge(R=l,De,na).call(R,{deltaTime:d-h,separateNode:!1,prematureStopCondition:()=>!t()})),l.updateAllDisplay(),a=c,t()?requestAnimationFrame(s):(l.shouldLoop=!1,l.autoSave(),bf(!1))};bf(!0),requestAnimationFrame(s)},Q0=function(t){this.shouldLoop||t.keyCode===85&&(this.rewindUntilBefore(this.record.tailIndex,!1),this.updateAllDisplay(),this.autoSave())},$0=function(t){t.keyCode===85&&(this.rewindUntilBefore(this.record.tailIndex,!1),this.updateAllDisplay(),this.autoSave())};const D=new xP,we=new Map;we.set(k.LeyLines,"Buffs/BLM/Ley Lines.png");we.set(k.Tincture,"Buffs/General/Tincture.png");we.set(k.ArcaneCircle,"Buffs/RPR/Arcane Circle.png");we.set(k.ArmysPaeon,"Buffs/BRD/Army's Paeon.png");we.set(k.BattleLitany,"PartyBuffs/battle_litany.png");we.set(k.BattleVoice,"Buffs/BRD/Battle Voice.png");we.set(k.Brotherhood,"PartyBuffs/brotherhood.png");we.set(k.Card_TheBalance,"PartyBuffs/the_balance.png");we.set(k.Card_TheSpear,"PartyBuffs/the_spear.png");we.set(k.ChainStratagem,"PartyBuffs/chain_stratagem.png");we.set(k.Devilment,"Buffs/DNC/Devilment.png");we.set(k.Divination,"PartyBuffs/divination.png");we.set(k.Dokumori,"PartyBuffs/dokumori.png");we.set(k.Embolden,"PartyBuffs/Embolden.png");we.set(k.MagesBallad,"Buffs/BRD/Mage's Ballad.png");we.set(k.RadiantFinale1,"Buffs/BRD/Radiant Finale.png");we.set(k.RadiantFinale2,"Buffs/BRD/Radiant Finale.png");we.set(k.RadiantFinale3,"Buffs/BRD/Radiant Finale.png");we.set(k.SearingLight,"PartyBuffs/searing_light.png");we.set(k.StandardFinish,"Buffs/DNC/Standard Finish.png");we.set(k.StarryMuse,"Buffs/PCT/Starry Muse.png");we.set(k.TechnicalFinish,"Buffs/DNC/Technical Finish.png");we.set(k.WanderersMinuet,"Buffs/BRD/Wanderer's Minuet.png");we.set(k.Manafication,"PartyBuffs/manafication.png");we.set(k.Acceleration,"Buffs/RDM/Acceleration.png");we.set(k.Fuka,"Buffs/SAM/Fuka.png");we.set(k.Fugetsu,"Buffs/SAM/Fugetsu.png");we.set(k.EnhancedEnpi,"Buffs/SAM/Enhanced Enpi.png");we.set(k.DeathsDesign,"Buffs/RPR/Death's Design.png");we.set(k.ArcaneCircle,"Buffs/RPR/Arcane Circle.png");we.set(k.RagingStrikes,"Buffs/BRD/Raging Strikes.png");we.set(k.Barrage,"Buffs/BRD/Barrage.png");we.set(k.NoMercy,"Buffs/GNB/No Mercy.png");we.set(k.EnhancedPiercingTalon,"Buffs/DRG/Enhanced Piercing Talon.png");we.set(k.PowerSurge,"Buffs/DRG/Power Surge.png");we.set(k.LanceCharge,"Buffs/DRG/Lance Charge.png");we.set(k.LifeOfTheDragon,"Buffs/DRG/Life of the Dragon.png");we.set(k.LifeSurge,"Buffs/DRG/Life Surge.png");we.set(k.DivineMight,"Buffs/PLD/Divine Might.png");we.set(k.Requiescat,"Buffs/PLD/Requiescat Zero.png");we.set(k.FightOrFlight,"Buffs/PLD/Fight or Flight.png");we.set(k.Zoe,"Buffs/SGE/Zoe.png");we.set(k.Autophysis,"Buffs/SGE/Autophysis.png");we.set(k.Krasis,"Buffs/SGE/Krasis.png");we.set(k.Philosophia,"Buffs/SGE/Philosophia.png");we.set(k.Soteria,"Buffs/SGE/Soteria.png");const Zo=new Map;we.forEach((e,t)=>{let a=new Image;a.src="assets/"+e,a.onload=function(){ul()},Zo.set(t,a)});const Mm=400;let j,J0=0,rr=0,Lm=!1,Hm,qA,yr=0,lu=0,xm=!1,Ce,Cf,eO,Nf,be={timelineWidth:0,timelineHeight:0,countdown:0,scale:1,tincturePotencyMultiplier:1,allMarkers:[],sharedElements:[],slots:[],activeSlotIndex:0,showSelection:!1,selectionStartDisplayTime:0,selectionEndDisplayTime:0,drawOptions:GN},OI=!1,qc=!1;function un(e,t,a,l,s){yr>=e.x&&yr<e.x+e.w&&lu>=e.y&&lu<e.y+e.h&&(Cf=t,eO=s,Nf=a,qc=l===!0)}const ar=()=>{D.record.unselectAll(),D.displayCurrentState()};function UP(e,t,a,l){if(!e.length)return;const s=14,c=24,d=8,h=4;j.font="12px monospace";let E=-1;e.forEach(v=>{E=Math.max(E,j.measureText(v).width)});let[A,R]=[E+2*d,s*e.length+2*h];l&&l.length>0&&(A=Math.max(A,d+l.length*(c+d)),R+=c+h);let T=yr,S=lu;const p=4;S>=R+p?S=S-R-p:S=S+11+p,T-A/2>=0&&T+A/2<t?T=T-A/2:T-A/2<0?T=0:T=t-A,j.strokeStyle=Ce.bgHighContrast,j.lineWidth=1,j.fillStyle=Ce.tipBackground,j.fillRect(T,S,A,R),j.strokeRect(T,S,A,R),j.fillStyle=Ce.emphasis,j.textBaseline="top",j.textAlign="left";for(let v=0;v<e.length;v++)j.fillText(e[v],T+d,S+v*s+2+h);let b=T+d,O=S+e.length*s+2+h;if(l)for(let v=0;v<l.length;v++)l[v]&&j.drawImage(l[v],b+v*c,O,c*.75,c)}function kP(e,t,a,l,s,c){j.lineCap="round",j.lineWidth=4,j.font="11px monospace",j.textAlign="left",c.forEach((d,h)=>{let E=l-(h+1)*ye.trackHeight;h===Ko&&(E=a);for(let A=0;A<d.length;A++){let R=d[A],T=R.description;R.markerType===aa.Untargetable?T=_({en:"Untargetable",zh:"不可选中"}):R.markerType===aa.Buff&&(T=iC(R.description));let S=s+Ct.positionFromTimeAndScale(R.time+e,t),p=()=>{let I=D.timeline.deleteMarker(R);console.assert(I),D.updateStats(),Em(R)};if(R.duration>0){let I=Ct.positionFromTimeAndScale(R.duration,t);if(R.markerType===aa.Buff){j.fillStyle=R.color+Ce.timeline.markerAlpha,j.fillRect(S,E,I,ye.trackHeight);let O=Zo.get(R.description);O&&j.drawImage(O,S,E,ye.trackHeight*.75,ye.trackHeight),j.fillStyle=Ce.emphasis,j.fillText(T,S+ye.trackHeight*1.5,E+10)}else R.showText?(j.fillStyle=R.color+Ce.timeline.markerAlpha,j.fillRect(S,E,I,ye.trackHeight),j.fillStyle=Ce.emphasis,j.fillText(T,S+ye.trackHeight/2,E+10)):(j.strokeStyle=R.color,j.beginPath(),j.moveTo(S,E+ye.trackHeight/2),j.lineTo(S+I,E+ye.trackHeight/2),j.stroke());let b=R.time+" - "+parseFloat((R.time+R.duration).toFixed(3));un({x:S,y:E,w:Math.max(I,ye.trackHeight),h:ye.trackHeight},["["+b+"] "+T],p)}else j.fillStyle=R.color,j.beginPath(),j.ellipse(S,E+ye.trackHeight/2,4,4,0,0,2*Math.PI),j.fill(),R.showText&&(j.fillStyle=Ce.emphasis,j.beginPath(),j.fillText(T,S+ye.trackHeight/2,E+10)),un({x:S-ye.trackHeight/2,y:E,w:ye.trackHeight,h:ye.trackHeight},["["+R.time+"] "+T],p)}})}function PP(e,t,a,l,s){j.lineWidth=1,j.strokeStyle=Ce.timeline.mpTickMark,j.beginPath(),s.forEach(c=>{let d=a+Ct.positionFromTimeAndScale(c.displayTime,t);j.moveTo(d,l),j.lineTo(d,l+ye.renderSlotHeight()),un({x:d-2,y:l,w:4,h:ye.renderSlotHeight()},["["+c.displayTime.toFixed(3)+"] "+c.sourceDesc])}),j.stroke()}function GP(e,t,a,l,s){j.lineWidth=1,j.strokeStyle=Ce.sam.meditation,j.beginPath(),s.forEach(c=>{let d=a+Ct.positionFromTimeAndScale(c.displayTime,t);j.moveTo(d,l),j.lineTo(d,l+ye.renderSlotHeight()),un({x:d-2,y:l,w:4,h:ye.renderSlotHeight()},["["+c.displayTime.toFixed(3)+"] "+c.sourceDesc])}),j.stroke()}function wP(e,t,a,l,s){j.lineWidth=1,j.strokeStyle=Ce.pld.ironWillColor,j.beginPath(),s.forEach(c=>{let d=a+Ct.positionFromTimeAndScale(c.displayTime,t);j.moveTo(d,l),j.lineTo(d,l+ye.renderSlotHeight()),un({x:d-2,y:l,w:4,h:ye.renderSlotHeight()},["["+c.displayTime.toFixed(3)+"] "+c.sourceDesc])}),j.stroke()}function BP(e,t,a,l,s){j.font="bold 10px monospace",s.forEach(c=>{const d=a+Ct.positionFromTimeAndScale(c.displayTime,t),h=12,E=l+h;j.beginPath(),j.textAlign="center",j.moveTo(d,E-h),j.lineTo(d-h/2,E),j.lineTo(d+h/2,E),j.fillStyle=Ce.timeline.warningMark,j.fill(),j.fillStyle="white",j.fillText("!",d,E-1);let A="["+c.displayTime.toFixed(3)+"] ";c.warningType===Fe.PolyglotOvercap?A+=_({en:"polyglot overcap!",zh:"通晓溢出！"}):c.warningType===Fe.CometOverwrite?A+=_({en:"comet overwrite!",zh:"彗星之黑被覆盖！"}):c.warningType===Fe.PaletteOvercap?A+=_({en:"palette gauge overcap!",zh:"调色量值溢出！"}):c.warningType===Fe.ImbalancedMana?A+=_({en:c.warningType+"!",zh:"魔元失衡！"}):c.warningType===Fe.KenkiOvercap?A+=_({en:"kenki overcap!"}):c.warningType===Fe.MeditationOvercap?A+=_({en:"meditation stack overcap!"}):c.warningType===Fe.SenOvercap?A+=_({en:"sen overcap!"}):A+=_({en:c.warningType+"!"}),un({x:d-h/2,y:E-h,w:h,h},[A])})}function XA(e,t,a,l,s){s.forEach(c=>{const d=c.type===rt.DamageMark&&Fn(c.displayTime),h=a+Ct.positionFromTimeAndScale(c.displayTime,t);let E="["+c.displayTime.toFixed(3)+"] ";const A=_({en:"Untargetable",zh:"不可选中"});switch(c.type){case rt.AggroMark:j.fillStyle=Ce.timeline.aggroMark,E+=_({en:"aggro"});break;case rt.HealingMark:j.fillStyle=Ce.timeline.healingMark,E+=_({en:"healing potency"});break;default:j.fillStyle=d?Ce.timeline.untargetableDamageMark:Ce.timeline.damageMark,E+=_({en:"damage potency"})}j.beginPath(),c.type===rt.AggroMark||c.type===rt.DamageMark?(j.moveTo(h-3,l),j.lineTo(h+3,l),j.lineTo(h,l+6)):(j.moveTo(h-3,l+12),j.lineTo(h+3,l+12),j.lineTo(h,l+6)),j.fill();const R=c.buffs.filter(I=>I==="TINCTURE").length>0,T=[],S=[];c.potencyInfos.forEach(I=>{const b=I.sourceDesc.replace("{skill}",io(I.sourceSkill));if(d)T.push(0 .toFixed(3)+" ("+b+")");else if(I.sourceSkill in il){const O=_({en:"LB"});T.push(O+" ("+b+")")}else{const O=I.potency.getAmount({tincturePotencyMultiplier:be.tincturePotencyMultiplier,includePartyBuffs:!0,includeSplash:!1});if(I.potency.targetCount>1){const v=O*(1-(I.potency.falloff??1)),L=I.potency.targetCount-1,P=v.toFixed(2)+(L>1?` x ${L}`:""),U=L>1?_({en:`${b}, ${L} additional targets`,zh:`${b}, ${L} 额外目标`}):_({en:`${b}, 1 additional target`,zh:`${b}, 1 额外目标`});T.push(O.toFixed(2)+" ("+_({en:`${b}, primary target`,zh:`${b}, 主要目标`})+")"),T.push(P+` (${U})`)}else T.push(O.toFixed(2)+" ("+b+")");R&&!S.includes(Zo.get(k.Tincture))&&S.push(Zo.get(k.Tincture)),I.potency.getPartyBuffs().forEach(v=>{const L=Zo.get(v);S.includes(L)||S.push()})}});const p=c.type===rt.HealingMark?{x:h-3,y:l+6,w:6,h:6}:{x:h-3,y:l,w:6,h:6};un(p,d?[E,...T,A]:[E,...T],void 0,void 0,S)})}function FP(e,t,a,l,s){j.fillStyle=Ce.timeline.lucidTickMark,s.forEach(c=>{let d=a+Ct.positionFromTimeAndScale(c.displayTime,t);j.beginPath(),j.moveTo(d-3,l),j.lineTo(d+3,l),j.lineTo(d,l+6),j.fill();let h="["+c.displayTime.toFixed(3)+"] "+c.sourceDesc.replace("{skill}",io("LUCID_DREAMING"));un({x:d-3,y:l,w:6,h:6},[h])})}function jP(e,t,a,l,s,c){let d=[],h=[],E=[],A=[],R=[];const T=new Map([[k.Tincture,{color:Ce.timeline.potCover,showImage:!0}],[k.LeyLines,{color:Ce.timeline.llCover,showImage:!0}],[k.SearingLight,{color:Ce.smn.searing,showImage:!0}],[k.Hyperphantasia,{color:Ce.timeline.llCover,showImage:!1}],[k.StarryMuse,{color:Ce.timeline.buffCover,showImage:!0}],[k.Embolden,{color:Ce.rdm.emboldenBuff,showImage:!0}],[k.Manafication,{color:Ce.rdm.manaficBuff,showImage:!0}],[k.Acceleration,{color:Ce.rdm.accelBuff,showImage:!0}],[k.TechnicalFinish,{color:Ce.dnc.esprit,showImage:!0}],[k.Devilment,{color:Ce.dnc.feathers,showImage:!0}],[k.Fuka,{color:Ce.timeline.llCover,showImage:!0}],[k.Fugetsu,{color:Ce.sam.fugetsu,showImage:!0}],[k.NoMercy,{color:Ce.sam.fugetsu,showImage:!0}],[k.EnhancedPiercingTalon,{color:Ce.drg.enhancedPiercingTalon,showImage:!0}],[k.PowerSurge,{color:Ce.drg.powerSurge,showImage:!0}],[k.LifeSurge,{color:Ce.drg.lifeSurge,showImage:!0}],[k.LanceCharge,{color:Ce.drg.lanceCharge,showImage:!0}],[k.LifeOfTheDragon,{color:Ce.drg.lifeOfTheDragon,showImage:!0}],[k.BattleLitany,{color:Ce.drg.battleLitany,showImage:!0}],[k.DivineMight,{color:Ce.pld.divineMight,showImage:!0}],[k.Requiescat,{color:Ce.pld.requiescat,showImage:!0}],[k.FightOrFlight,{color:Ce.pld.fightOrFlight,showImage:!0}],[k.EnhancedEnpi,{color:Ce.rdm.accelBuff,showImage:!0}],[k.ArcaneCircle,{color:Ce.rpr.arcaneCircle,showImage:!0}],[k.DeathsDesign,{color:Ce.rpr.deathsDesign,showImage:!0}],[k.WanderersMinuet,{color:Ce.brd.wanderersCoda,showImage:!0}],[k.MagesBallad,{color:Ce.brd.magesCoda,showImage:!0}],[k.ArmysPaeon,{color:Ce.brd.armysCoda,showImage:!0}],[k.RagingStrikes,{color:Ce.brd.ragingStrikes,showImage:!0}],[k.Barrage,{color:Ce.brd.barrage,showImage:!0}],[k.BattleVoice,{color:Ce.brd.battleVoice,showImage:!0}],[k.RadiantFinale1,{color:Ce.brd.radiantFinale,showImage:!0}],[k.RadiantFinale2,{color:Ce.brd.radiantFinale,showImage:!0}],[k.RadiantFinale3,{color:Ce.brd.radiantFinale,showImage:!0}],[k.Zoe,{color:Ce.sge.zoe,showImage:!0}],[k.Autophysis,{color:Ce.sge.autophysis,showImage:!0}],[k.Krasis,{color:Ce.sge.krasis,showImage:!0}],[k.Soteria,{color:Ce.sge.soteria,showImage:!0}],[k.Philosophia,{color:Ce.sge.philosophia,showImage:!0}]]),S=new Map;T.forEach((O,v)=>S.set(v,[]));const p=[];let I=[],b=l+ye.skillButtonHeight/2;s.forEach(O=>{let v=O,L=a+Ct.positionFromTimeAndScale(v.displayTime,t),P=v.isGCD?b+ye.skillButtonHeight/2:b;const U=v.node.targetCount;U>1&&d.push({count:U,x:L+ye.skillButtonHeight/2,y:P-5});const V=2;let G=Ct.positionFromTimeAndScale(v.lockDuration,t);if(v.isSpellCast?(E.push({x:L+V,y:P,w:G-V,h:ye.skillButtonHeight/2}),R.push(L+Ct.positionFromTimeAndScale(v.relativeSnapshotTime,t))):h.push({x:L+V,y:P,w:G-V,h:ye.skillButtonHeight}),v.isGCD){let Ee=Ct.positionFromTimeAndScale(v.recastDuration,t);A.push({x:L+V,y:P+ye.skillButtonHeight/2,w:Ee-V,h:ye.skillButtonHeight/2})}if(v.skillName in il){let Ee=Ct.positionFromTimeAndScale(v.recastDuration,t);h.push({x:L+V,y:P+ye.skillButtonHeight/2,w:Ee-V,h:ye.skillButtonHeight/2})}let H=0;S.forEach((Ee,oe)=>{v.node.hasBuff(oe)&&(H+=ue(H,Ee))}),v.node.hasPartyBuff()&&ue(H,p);function ue(Ee,oe){return be.drawOptions.drawBuffIndicators&&oe.push({x:L,y:P+28+Ee*4,w:28,h:4}),1}F_(v.skillName)&&I.push({elem:O,x:L,y:P})}),j.font="13px monospace",j.fillStyle=Ce.text,j.textAlign="center",d.forEach(O=>{j.fillText("x"+O.count.toString(),O.x,O.y)}),j.fillStyle=Ce.timeline.castBar,j.beginPath(),E.forEach(O=>{j.rect(O.x,O.y,O.w,O.h),c&&un(O,void 0,ar)}),j.fill(),j.lineWidth=1,j.strokeStyle="rgba(151, 85, 239, 0.4)",j.beginPath(),R.forEach(O=>{j.moveTo(O,b+14),j.lineTo(O,b+28)}),j.stroke(),j.fillStyle=Ce.timeline.gcdBar,j.beginPath(),A.forEach(O=>{j.rect(O.x,O.y,O.w,O.h),c&&un(O,void 0,ar)}),j.fill(),j.fillStyle=Ce.timeline.lockBar,j.beginPath(),h.forEach(O=>{j.rect(O.x,O.y,O.w,O.h),c&&un(O,void 0,ar)}),j.fill(),S.forEach((O,v)=>{j.fillStyle=T.get(v).color,j.beginPath(),O.forEach(L=>{j.rect(L.x,L.y,L.w,L.h),c&&un(L,void 0,ar)}),j.fill()}),j.fillStyle=Ce.timeline.buffCover,j.beginPath(),p.forEach(O=>{j.rect(O.x,O.y,O.w,O.h),c&&un(O,void 0,ar)}),j.fill(),j.beginPath(),I.forEach(O=>{j.drawImage(F_(O.elem.skillName),O.x,O.y,28,28);let v=O.elem.node,L=[],P=[],U=io(O.elem.skillName)+"@"+O.elem.displayTime.toFixed(3);if(L.push(U),!((v.maybeGetActionKey()??"NEVER")in il)){if(v.getInitialPotency()){const G=v.getPotency({tincturePotencyMultiplier:be.tincturePotencyMultiplier,includePartyBuffs:!0,includeSplash:!1,untargetable:Fn}).applied;L.push(_({en:"potency: ",zh:"威力："})+G.toFixed(2))}if(v.getInitialHealingPotency()){const G=v.getHealingPotency({tincturePotencyMultiplier:be.tincturePotencyMultiplier,includeSplash:!1,includePartyBuffs:!0,untargetable:Fn}).applied;L.push(_({en:"healing potency: "})+G.toFixed(2))}}let V=0;v.tmp_endLockTime!==void 0&&v.tmp_startLockTime!==void 0&&(V=v.tmp_endLockTime-v.tmp_startLockTime),L.push(_({en:"duration: ",zh:"耗时："})+V.toFixed(3)),T.forEach((G,H)=>{G.showImage&&v.hasBuff(H)&&P.push(Zo.get(H))}),v.getPartyBuffs().forEach(G=>{let H=Zo.get(G);H&&P.push(H)}),c?un({x:O.x,y:O.y,w:28,h:28},L,()=>{D.timeline.onClickTimelineAction(O.elem.actionIndex,Hm?Hm.shiftKey:!1),EN()},!0,P):un({x:O.x,y:O.y,w:28,h:28},L,()=>{},!1,P)})}function bI(e,t,a,l,s,c){j.fillStyle=s,j.beginPath(),j.moveTo(e-3,0),j.lineTo(e+3,0),j.lineTo(e,6),j.fill(),j.lineWidth=1,j.strokeStyle=s,j.setLineDash([]),j.beginPath(),j.moveTo(e,0),j.lineTo(e,t),j.stroke(),j.strokeStyle=s+"9f",j.setLineDash([2,3]),j.beginPath(),j.moveTo(e,t),j.lineTo(e,a),j.stroke(),j.strokeStyle=s,j.setLineDash([]),j.beginPath(),j.moveTo(e,a),j.lineTo(e,l),j.stroke(),j.strokeStyle=s+"9f",j.setLineDash([2,3]),j.beginPath(),j.moveTo(e,l),j.lineTo(e,Mm),j.stroke(),un({x:e-3,y:0,w:6,h:Mm},[c]),j.setLineDash([])}function tO(e,t=!1){const a=t?Ct.positionFromTimeAndScale(D.game.time+be.countdown,be.scale):rr;j.fillStyle=Ce.timeline.ruler,j.fillRect(0,0,a,ye.rulerHeight);let l=Ct.timeFromPositionAndScale(yr-e,be.scale)-be.countdown;un({x:ye.leftBufferWidth,y:0,w:a-ye.leftBufferWidth,h:ye.rulerHeight},[l.toFixed(3)],()=>{l<D.game.getDisplayTime()&&l>=-D.game.config.countdown?D.displayHistoricalState(l,void 0):D.displayCurrentState()}),j.lineCap="butt",j.beginPath();let s=be.scale*100,c=be.countdown*s;j.lineWidth=1,j.strokeStyle=Ce.text,j.textBaseline="alphabetic",j.font="13px monospace",j.textAlign="center",j.fillStyle=Ce.text;const d=50,h=function(E,A,R){const T=E*s;let S=e+T+c;S>=-50&&S<=a+d&&(j.moveTo(S,0),j.lineTo(S,A),R&&j.fillText(Ct.displayTime(T/s,0),S,23))};if(s>=6){for(let E=0;E*s<be.timelineWidth-c;E+=1)E%5!==0&&h(E,6,!1);for(let E=-1;E*s>=-c;E-=1)E%5!==0&&h(E,6,!1)}for(let E=0;E*s<be.timelineWidth-c;E+=5)h(E,10,!0);for(let E=-5;E*s>=-c;E-=5)h(E,10,!0);return j.stroke(),ye.rulerHeight}function nO(e,t,a=!1){const l=a?Ct.positionFromTimeAndScale(D.game.time+be.countdown,be.scale):rr;let s=new Map;be.allMarkers.forEach(E=>{let A=s.get(E.track);A===void 0&&(A=[]),A.push(E),s.set(E.track,A)}),j.beginPath();let c=0,d=!1;for(let E of s.keys())c=Math.max(c,E+1),E===Ko&&(d=!0);d&&(c+=1);let h=t+c*ye.trackHeight;j.fillStyle=Ce.timeline.tracks;for(let E=0;E<c;E+=2){let A=h-(E+1)*ye.trackHeight;j.rect(0,A,l,ye.trackHeight)}return j.fill(),kP(be.countdown,be.scale,t,h,e,s),c*ye.trackHeight}function aO(e,t,a){const l=e+Ct.positionFromTimeAndScale(be.countdown,be.scale);for(let d=0;d<be.slots.length;d++){let h=d===be.activeSlotIndex,E=new Map;if(a&&!h)continue;be.slots[d].elements.forEach(R=>{let T=E.get(R.type)??[];T.push(R),E.set(R.type,T)});let A=t+d*ye.renderSlotHeight();if(a&&(A=t),be.drawOptions.drawMPTickMarks&&PP(be.countdown,be.scale,l,A,E.get(rt.MPTickMark)??[]),be.drawOptions.drawHealingMarks&&XA(be.countdown,be.scale,l,A,E.get(rt.HealingMark)??[]),be.drawOptions.drawDamageMarks&&(XA(be.countdown,be.scale,l,A,E.get(rt.DamageMark)??[]),XA(be.countdown,be.scale,l,A,E.get(rt.AggroMark)??[])),be.drawOptions.drawMPTickMarks&&FP(be.countdown,be.scale,l,A,E.get(rt.LucidMark)??[]),GP(be.countdown,be.scale,l,A,E.get(rt.MeditateTickMark)??[]),wP(be.countdown,be.scale,l,A,E.get(rt.AutoTickMark)??[]),BP(be.countdown,be.scale,l,A,E.get(rt.WarningMark)??[]),jP(be.countdown,be.scale,l,A,E.get(rt.Skill)??[],h),be.showSelection&&h&&!a){j.fillStyle="rgba(147, 112, 219, 0.15)";let R=l+Ct.positionFromTimeAndScale(be.selectionStartDisplayTime,be.scale),T=Ct.positionFromTimeAndScale(be.selectionEndDisplayTime-be.selectionStartDisplayTime,be.scale);j.fillRect(R,A,T,ye.renderSlotHeight()),j.strokeStyle="rgba(147, 112, 219, 0.5)",j.lineWidth=1,j.beginPath(),j.moveTo(R,A),j.lineTo(R,A+ye.renderSlotHeight()),j.moveTo(R+T,A),j.lineTo(R+T,A+ye.renderSlotHeight()),j.stroke()}}let s=Ct.positionFromTimeAndScale(be.countdown,be.scale),c=ye.renderSlotHeight()*be.slots.length;if(be.slots.length<al&&(c+=ye.addSlotButtonHeight),j.fillStyle=Ce.timeline.countdown,j.fillRect(e-ye.leftBufferWidth,t,s+ye.leftBufferWidth,c),a)return ye.renderSlotHeight();for(let d=0;d<be.slots.length;d++){let E={x:0,y:t+d*ye.renderSlotHeight()+1,w:14,h:ye.renderSlotHeight()-2};if(j.fillStyle=d===be.activeSlotIndex?Ce.accent:Ce.bgMediumContrast,j.fillRect(E.x,E.y,E.w,E.h),un(E,d===be.activeSlotIndex?void 0:[_({en:"set active",zh:"设为当前"})],()=>{D.setActiveSlot(d)},!0),be.slots.length>1&&d===be.activeSlotIndex){j.fillStyle=Ce.emphasis,j.font="bold 14px monospace",j.textAlign="center",j.fillText("×",E.x+E.w/2,E.y+E.h-4);let A={x:E.x,y:E.y+E.h-E.w,w:E.w,h:E.w};un(A,[_({en:"delete",zh:"删除"})],()=>{D.timeline.removeSlot(d),D.displayCurrentState()},!0)}}return ye.renderSlotHeight()*be.slots.length}function zP(e,t){const a=e+Ct.positionFromTimeAndScale(be.countdown,be.scale),l=ye.renderSlotHeight(),s=t+be.activeSlotIndex*l;let c=new Map;return be.sharedElements.forEach(d=>{let h=c.get(d.type)??[];h.push(d),c.set(d.type,h)}),(c.get(rt.s_ViewOnlyCursor)??[]).forEach(d=>{let h=d;if(h.enabled){let E=a+Ct.positionFromTimeAndScale(d.displayTime,be.scale);bI(E,t,s,s+l,Ce.historical,_({en:"cursor: ",zh:"光标："})+h.displayTime.toFixed(3))}}),(c.get(rt.s_Cursor)??[]).forEach(d=>{let h=d,E=a+Ct.positionFromTimeAndScale(h.displayTime,be.scale);bI(E,t,s,s+l,Ce.emphasis,_({en:"cursor: ",zh:"光标："})+h.displayTime.toFixed(3))}),0}function YP(e){if(be.slots.length<al){let t={x:4,y:e+2,w:192,h:ye.addSlotButtonHeight-4};return j.fillStyle=Ce.bgLowContrast,j.fillRect(t.x,t.y,t.w,t.h),j.strokeStyle=Ce.bgHighContrast,j.lineWidth=1,j.strokeRect(t.x,t.y,t.w,t.h),j.font="13px monospace",j.fillStyle=Ce.text,j.textAlign="center",j.fillText(_({en:"Add timeline slot",zh:"添加时间轴"}),t.x+t.w/2,t.y+t.h-4),un(t,void 0,()=>{D.timeline.addSlot(),D.displayCurrentState()},!0),ye.addSlotButtonHeight}return 0}function VP(){let e=-J0+ye.leftBufferWidth,t=0;j.fillStyle=Ce.background,j.fillRect(0,0,rr+1,be.timelineHeight+1),un({x:0,y:0,w:rr,h:Mm},void 0,ar),t+=tO(e),t+=nO(e,t);const a=t;t+=aO(e,t,!1),t+=zP(e,a),t+=YP(t),xm&&(Cf&&UP(Cf,rr,be.timelineHeight,eO),Lm&&Nf&&Nf())}let iO=(e,t)=>{},lO=()=>{},oO=()=>{},sO=e=>{},rO=e=>{},KP=()=>qc;function WP(e){const t=N.useRef(null),a=window.devicePixelRatio;let l=e.visibleWidth*a,s=e.timelineHeight*a;const[c,d]=N.useState(0),[h,E]=N.useState(0),[A,R]=N.useState(!1),[T,S]=N.useState(0),[p,I]=N.useState(0),b=N.useContext(Pa);return N.useEffect(()=>{iO=(O,v)=>{yr=O,lu=v,d(yr),E(lu)},lO=()=>{R(!0),xm=!0},oO=()=>{R(!1),xm=!1},sO=O=>{D.shouldLoop||(S(v=>v+1),Lm=!0,Hm=O)},rO=O=>{if(!D.shouldLoop&&(I(v=>v+1),qA=O,qA.key==="Backspace"||qA.key==="Delete")){let v=D.record.selectionStartIndex;v!==void 0&&(D.rewindUntilBefore(v,!1),D.displayCurrentState(),D.updateAllDisplay(),D.autoSave())}}},[]),N.useEffect(()=>{var v;Cf=void 0,Nf=void 0,J0=e.visibleLeft,rr=e.visibleWidth,Ce=fl(b),OI=qc,be=D.getTimelineRenderingProps();let O=(v=t.current)==null?void 0:v.getContext("2d",{alpha:!1});O&&(j=O,j.scale(a,a),VP(),j.scale(1/a,1/a)),OI!==qc&&ul(),Lm=!1},[e.visibleLeft,e.visibleWidth,c,h,A,T,p,e.version,a]),u.jsx("canvas",{ref:t,width:Math.ceil(l),height:Math.ceil(s),tabIndex:0,style:{width:e.visibleWidth,height:e.timelineHeight,position:"absolute",pointerEvents:"none",cursor:qc?"pointer":"default"}})}function qP(e,t){let a=j;j=e,t(),j=a}function XP(e,t){const a=D.getTimelineRenderingProps();let l=a.selectionStartDisplayTime,s=a.selectionEndDisplayTime;l===s&&(l=-a.countdown,s=D.game.time-a.countdown+4);const c=D.imageExportConfig;let d,h;c.wrapThresholdSeconds===0?(d=1,h=s-l):(d=Math.ceil((s-l)/c.wrapThresholdSeconds),h=c.wrapThresholdSeconds);const E=document.createElement("canvas"),A=document.createElement("canvas"),R=ye.trackHeight/2,T=D.timeline,S=T.positionFromTime(a.countdown);E.width=T.positionFromTime(s)+S;let p=ye.renderSlotHeight();e&&(p+=ye.rulerHeight,p+=ye.trackHeight*T.getNumMarkerTracks()),E.height=p;const I=E.getContext("2d",{willReadFrequently:!0});qP(I,()=>{const L=I,P=0;L.fillStyle=t.background,L.fillRect(0,0,E.width,E.height);let U=0;e&&(U+=tO(P,!0),U+=nO(P,U,!0)),aO(P,U,!0)});const b=T.positionFromTime(l)+S,O=T.positionFromTime(s)+S;A.height=(R+p)*(d-1)+p,A.width=d===1?O-b:T.positionFromTime(h);const v=A.getContext("2d");for(let L=0;L<d;L++){const P=T.positionFromTime(h);if(b>O)break;const U=Math.min(O-(b+L*P),P),V=I.getImageData(b+L*P,0,U+1,E.height+1);v.putImageData(V,0,L*(R+p)),L>0&&U<P&&(v.fillStyle=t.background,v.fillRect(U,L*(R+p),P-U,E.height+1))}return A}function ZP(){const[e,t]=N.useState(D.imageExportConfig),a=(E,A)=>{const R=Object.assign({},e);R[E]=A,D.setImageExportConfig(R),t(R),Qt("img: "+E,JSON.stringify(A))},l={position:"relative",top:3,marginRight:"0.25em"},s=(E,A)=>u.jsxs("div",{style:{marginBottom:5},children:[u.jsx("input",{type:"checkbox",onClick:R=>a(E,R.currentTarget.checked),value:e[E]?"on":"off",style:l,defaultChecked:e[E]}),u.jsx("span",{children:_(A)})]}),c=E=>{Number.isNaN(parseFloat(E))||a("wrapThresholdSeconds",parseFloat(E))},d=u.jsxs(u.Fragment,{children:[u.jsx("div",{children:u.jsx(Ut,{defaultValue:e.wrapThresholdSeconds.toString(),description:u.jsxs("span",{children:[_({en:"seconds before wrapping ",zh:"每行秒数 "}),u.jsx(Je,{topic:"png-wrap",content:_({en:"number of elapsed seconds, including the countdown, in each row in the image (set to 0 to never wrap)",zh:"从开始倒计时算起，每显示多少秒换一次行。如果填0则从不换行。"})}),":"," "]}),onChange:c,style:{margin:"10px 0"}})}),s("includeTime",{en:"include time and markers",zh:"显示时间刻度和时间轴标记"})]}),h=Yt();return u.jsxs("div",{children:[u.jsx("p",{children:_({en:u.jsx("span",{children:"export the selected part of the timeline as a png according to the current display settings, or the whole timeline if nothing is selected"}),zh:"根据当前显示设置将时间轴内选择部分导出为png，如果无选择将整个时间轴导出"})}),d,u.jsx("p",{children:u.jsx(Zl,{filename:"fight",fileFormat:sl.Png,getContentFn:()=>XP(e.includeTime,h),displayName:_({en:"export selection as png",zh:"将选择部分导出为png"})})})]})}function QP(){const e=d=>{d.fileType===Ai.Record?(D.loadBattleRecordFromFile(d),D.autoSave()):d.fileType===Ai.MarkerTrackIndividual||d.fileType===Ai.MarkerTracksCombined?window.alert("wrong file type '"+d.fileType+`'; use the "Timeline markers" section instead if you meant import markers.`):window.alert("wrong file type '"+d.fileType+"'.")},t=_({en:"Export fight to file",zh:"导出战斗到文件"}),a=u.jsxs("div",{children:[u.jsx("p",{children:_({en:"for sharing and importing:",zh:"用于分享和导入："})}),u.jsx(Zl,{fileFormat:sl.Json,getContentFn:()=>D.record.serialized(),filename:"fight",displayName:_({en:"txt format",zh:"txt格式"})}),u.jsx("p",{children:_({en:u.jsxs("span",{children:["for external tools such as excel and"," ",u.jsx("a",{href:"https://github.com/Tischel/BLMInTheShell",children:"Tischel's plugin"}),":"]}),zh:u.jsxs("span",{children:["用于excel，",u.jsx("a",{href:"https://github.com/Tischel/BLMInTheShell",children:"Tischel的插件"}),"等外部工具："]})})}),u.jsx(Zl,{fileFormat:sl.Csv,getContentFn:()=>({body:D.getActionsLogCsv()}),filename:"fight",displayName:_({en:"csv format",zh:"csv格式"})}),u.jsx("p",{children:_({en:u.jsxs("span",{children:["for use with"," ",u.jsx("a",{href:"https://colab.research.google.com/github/zqsz-xiv/xivintheshell-ama-sim-notebook/blob/main/in_the_shell_with_ama_sim.ipynb",children:"Amarantine's combat simulator"}),":"]}),zh:u.jsxs("span",{children:["用于",u.jsx("a",{href:"https://github.com/Amarantine-xiv/Amas-FF14-Combat-Sim",children:"Amarantine的战斗模拟器"}),"："]})})}),u.jsx(Zl,{fileFormat:sl.Csv,getContentFn:()=>D.getAmaSimCsv(),filename:"fight",displayName:_({en:"csv format",zh:"csv格式"})})]}),l=_({en:"Import fight from file",zh:"从文件导入战斗"}),s=u.jsx(Tf,{allowLoadFromUrl:!1,onLoadFn:e}),c=u.jsx(u.Fragment,{children:_({en:"Image Export",zh:"导出为图像"})});return u.jsx(gR,{contentHeight:KR,children:[{defaultSize:25,title:l,content:s},{defaultSize:30,title:t,content:a},{defaultSize:45,title:c,content:u.jsx(ZP,{})}]})}function $P(){return u.jsxs("div",{children:[u.jsx(Fc,{uniqueName:"showDamageMarks",label:_({en:"show damage marks",zh:"显示伤害结算标记"}),onChange:e=>{D.setTimelineOptions({drawDamageMarks:e})}}),u.jsx(Fc,{uniqueName:"showHealingMarks",label:_({en:"show healing marks"}),onChange:e=>{D.setTimelineOptions({drawHealingMarks:e})}}),u.jsx(Fc,{uniqueName:"showMPAndLucidTickMarks",label:_({en:"show MP and lucid ticks",zh:"显示跳蓝和跳醒梦"}),onChange:e=>{D.setTimelineOptions({drawMPTickMarks:e})}}),u.jsx(Fc,{uniqueName:"showBuffIndicators",label:_({en:"show buff indicators",zh:"显示buff标记"}),onChange:e=>{D.setTimelineOptions({drawBuffIndicators:e})}})]})}let ul=()=>{},Um=e=>{};class cO extends ft.Component{constructor(a){super(a);F(this,"myRef");F(this,"updateVisibleRange");F(this,"state");this.state={timelineWidth:11,timelineHeight:300,visibleLeft:23,visibleWidth:66,version:0},this.myRef=ft.createRef(),this.updateVisibleRange=()=>{this.myRef.current&&this.setState({visibleLeft:this.myRef.current.scrollLeft,visibleWidth:this.myRef.current.clientWidth})}}componentDidMount(){this.setState({timelineWidth:D.timeline.getCanvasWidth(),timelineHeight:D.timeline.getCanvasHeight()}),ul=()=>{this.setState({timelineWidth:D.timeline.getCanvasWidth(),timelineHeight:D.timeline.getCanvasHeight(),version:this.state.version+1})},Um=a=>{if(this.myRef.current!=null){let l=this.myRef.current.clientWidth;this.myRef.current.scrollLeft=a-l*.6}this.updateVisibleRange()},this.updateVisibleRange()}componentWillUnmount(){ul=()=>{},Um=a=>{}}render(){let a=u.jsx(WP,{timelineHeight:this.state.timelineHeight,visibleLeft:this.state.visibleLeft,visibleWidth:this.state.visibleWidth,version:this.state.version});const l=navigator.userAgent.indexOf("Firefox")>=0,s=Hf(this.context,"bgMediumContrast");return u.jsxs("div",{style:{position:"relative"},children:[a,u.jsx("div",{tabIndex:0,className:"visibleScrollbar",style:{position:"relative",width:"100%",overflowX:"scroll",overflowY:"clip",outline:"1px solid "+s,cursor:KP()?"pointer":"default",paddingBottom:l?10:0},ref:this.myRef,onScroll:c=>{this.myRef.current&&(this.myRef.current.scrollLeft=Math.min(this.myRef.current.scrollWidth-this.myRef.current.clientWidth,this.myRef.current.scrollLeft),this.setState({visibleLeft:this.myRef.current.scrollLeft,visibleWidth:this.myRef.current.clientWidth}))},onMouseMove:c=>{if(this.myRef.current){let d=this.myRef.current.getBoundingClientRect(),h=c.clientX-d.left,E=c.clientY-d.top;iO(h,E)}},onMouseEnter:c=>{lO()},onMouseLeave:c=>{oO()},onClick:c=>{sO(c)},onKeyDown:c=>{rO(c)},children:u.jsx("div",{style:{position:"relative",backgroundColor:"transparent",width:this.state.timelineWidth,height:this.state.timelineHeight,pointerEvents:"none"}})})]})}}F(cO,"contextType",Pa);const uO=320,KR=uO-40;function JP(){return u.jsxs("div",{style:{position:"relative",margin:6},children:[u.jsx(BN,{uniqueName:"timeline",maxWidth:1440,content:[{titleNode:_({en:"Timeline markers",zh:"时间轴标记"}),contentNode:u.jsx(oN,{})},{titleNode:u.jsxs("div",{style:{position:"relative"},children:[_({en:"Timeline editor ",zh:"时间轴编辑器 "}),u.jsx(Je,{topic:"timeline editor",content:u.jsxs("div",{children:[u.jsx("div",{className:"paragraph",style:{color:"orangered"},children:u.jsx("b",{children:_({en:"Has the bare minimum features but might still be buggy (let me know). Would recommend going over Instructions/Troubleshoot first, plus saving data to drive in case bugs mess up the entire tool",zh:"本编辑器仍在开发中，不过有最基本的各项功能，请务必向我们汇报任何发现的bug。"})})}),u.jsx("div",{className:"paragraph",children:_({en:"I hope it's otherwise self-explanatory. Note that edits made here are not saved until they're applied to the actual timeline.",zh:"使用前最好先阅读使用指南并时刻保存各项数据。"})})]})})]}),contentNode:u.jsx(hx,{})},{titleNode:_({en:"Import/Export",zh:"导入/导出"}),contentNode:u.jsx("div",{children:u.jsx(QP,{})})},{titleNode:_({en:"Display settings",zh:"显示设置"}),contentNode:u.jsx($P,{})}],collapsible:!0,scrollable:!1,height:uO,defaultSelectedIndex:void 0}),u.jsx(Zx,{uniqueName:"timelineDisplayScale",description:_({en:"horizontal scale ",zh:"水平缩放 "}),defaultValue:"0.4",style:{position:"absolute",top:0,right:6,height:Rf,lineHeight:`${Rf}px`,verticalAlign:"middle"},onChange:e=>{D.timeline.setHorizontalScale(parseFloat(e)),D.scrollToTime()}})]})}function eG(){return u.jsxs("div",{style:{bottom:0,left:0,right:0,paddingLeft:0,paddingRight:0,borderTop:"2px solid "+Yt().bgHighContrast,flex:0},children:[u.jsx(cO,{}),u.jsx(JP,{})]})}const WR=N.createContext(void 0),qR=N.createContext(void 0);function tG(){const e=N.useContext(qR),t=N.useContext(WR);if(!(t===void 0&&e===void 0))return{...e,...t}}function cs(){const e=N.useContext(qR),t=N.useContext(WR);if(t===void 0)throw new Error("Base UI: DialogRootContext is missing. Dialog parts must be placed within <Dialog.Root>.");return{...e,...t}}function Pr(e){const t=typeof e.render=="string"?e.render:void 0,a=typeof e.render=="string"?void 0:e.render;return{renderElement:Kf(t,{className:e.className,render:a},{...e,props:e.extraProps})}}const nG={...Vf,...AR},aG=N.forwardRef(function(t,a){const{render:l,className:s,...c}=t,{open:d,nested:h,mounted:E,transitionStatus:A,backdropRef:R}=cs(),T=N.useMemo(()=>({open:d,transitionStatus:A}),[d,A]),S=Dr(R,a),{renderElement:p}=Pr({render:l??"div",className:s,state:T,ref:S,extraProps:hl({role:"presentation",hidden:!E,style:{userSelect:"none",WebkitUserSelect:"none"}},c),customStyleHookMapping:nG});return h?null:p()});function iG(e){const{rootElementName:t=""}=e,[a,l]=N.useState(t.toUpperCase()),s=N.useCallback(c=>{l((c==null?void 0:c.tagName)??"")},[]);return{rootElementName:a,updateRootElementName:s}}const lG=N.createContext(void 0);function oG(e=!1){const t=N.useContext(lG);if(t===void 0&&!e)throw new Error("Base UI: CompositeRootContext is missing. Composite parts must be placed within <Composite.Root>.");return t}function dO(e={}){const{buttonRef:t,disabled:a=!1,focusableWhenDisabled:l,tabIndex:s,type:c="button",elementName:d}=e,h=N.useRef(null),{rootElementName:E,updateRootElementName:A}=iG({rootElementName:d}),R=oG(!0)!==void 0,T=ii(()=>{const O=h.current;return E==="BUTTON"||E==="INPUT"&&["button","submit","reset"].includes(O==null?void 0:O.type)}),S=ii(()=>{const O=h.current;return!!(E==="A"&&(O!=null&&O.href))}),p=Dr(A,t,h),I=N.useMemo(()=>{const O={};return s!==void 0&&!R&&(O.tabIndex=s),E==="BUTTON"||E==="INPUT"?l||R?O["aria-disabled"]=a:R||(O.disabled=a):E!==""&&(E!=="A"?(O.role="button",R||(O.tabIndex=s??0)):s&&!R&&(O.tabIndex=s),a&&(O["aria-disabled"]=a,R||(O.tabIndex=l?s??0:-1))),O},[a,E,l,R,s]);return vi(()=>{const O=h.current;O instanceof HTMLButtonElement&&R&&a&&I.disabled===void 0&&O.disabled&&(O.disabled=!1)},[a,I.disabled,R]),{getButtonProps:N.useCallback((O={})=>{const{onClick:v,onMouseDown:L,onKeyUp:P,onKeyDown:U,onPointerDown:V,...G}=O;return hl({type:E==="BUTTON"||E==="INPUT"?c:void 0,onClick(H){if(a){H.preventDefault();return}v==null||v(H)},onMouseDown(H){a||L==null||L(H)},onKeyDown(H){(a&&l&&H.key!=="Tab"||H.target===H.currentTarget&&!T()&&H.key===" ")&&H.preventDefault(),a||(hm(H),U==null||U(H)),!H.baseUIHandlerPrevented&&H.target===H.currentTarget&&!T()&&!S()&&H.key==="Enter"&&!a&&(v==null||v(H),H.preventDefault())},onKeyUp(H){a||(hm(H),P==null||P(H)),!H.baseUIHandlerPrevented&&H.target===H.currentTarget&&!T()&&!a&&H.key===" "&&(v==null||v(H))},onPointerDown(H){if(a){H.preventDefault();return}V==null||V(H)},ref:p},I,G)},[I,a,E,l,T,S,p,c]),buttonRef:p}}function sG(e){const{open:t,setOpen:a,rootRef:l,disabled:s}=e,c=ii(E=>{t&&a(!1,E.nativeEvent,"click")}),{getButtonProps:d}=dO({disabled:s,buttonRef:l});return{getRootProps:E=>hl({onClick:c},E,d)}}const rG=N.forwardRef(function(t,a){const{render:l,className:s,disabled:c=!1,...d}=t,{open:h,setOpen:E}=cs(),{getRootProps:A}=sG({disabled:c,open:h,setOpen:E,rootRef:a}),R=N.useMemo(()=>({disabled:c}),[c]),{renderElement:T}=Pr({render:l??"button",className:s,state:R,propGetter:A,extraProps:d});return T()});let yI=0;function cG(e,t="mui"){const[a,l]=N.useState(e),s=e||a;return N.useEffect(()=>{a==null&&(yI+=1,l(`${t}-${yI}`))},[a,t]),s}const uG={...Df},vI=uG.useId;function dG(e,t){if(vI!==void 0){const a=vI();return e??`${t}-${a}`}return cG(e,t)}function fO(e){return dG(e,"base-ui")}const fG={},hG=N.forwardRef(function(t,a){const{render:l,className:s,id:c,...d}=t,{setDescriptionElementId:h}=cs(),E=fO(c);vi(()=>(h(E),()=>{h(void 0)}),[E,h]);const A=N.useCallback((T={})=>hl({id:E},T),[E]),{renderElement:R}=Pr({propGetter:A,render:l??"p",className:s,state:fG,ref:a,extraProps:d});return R()});function EG(e){const{descriptionElementId:t,getPopupProps:a,initialFocus:l,modal:s,mounted:c,openMethod:d,ref:h,setPopupElement:E,titleElementId:A}=e,R=N.useRef(null),T=Dr(h,R,E),S=N.useCallback(b=>b==="touch"?R:0,[]),p=N.useMemo(()=>l==null?S(d??""):typeof l=="function"?l(d??""):l,[S,l,d]);return{getRootProps:b=>hl({"aria-labelledby":A??void 0,"aria-describedby":t??void 0,"aria-modal":c&&s===!0?!0:void 0,role:"dialog",tabIndex:-1,...a(),ref:T,hidden:!c},b),resolvedInitialFocus:p}}let AG=function(e){return e.nestedDialogs="--nested-dialogs",e}({}),mG=function(e){return e[e.open=Uo.open]="open",e[e.closed=Uo.closed]="closed",e[e.startingStyle=Uo.startingStyle]="startingStyle",e[e.endingStyle=Uo.endingStyle]="endingStyle",e.nested="data-nested",e.nestedDialogOpen="data-nested-dialog-open",e}({});const RG=N.forwardRef(function(t,a){return u.jsx("div",{ref:a,role:"presentation","data-floating-ui-inert":!0,...t,style:{position:"fixed",inset:0,userSelect:"none",WebkitUserSelect:"none"}})}),hO=N.createContext(void 0);function TG(){const e=N.useContext(hO);if(e===void 0)throw new Error("Base UI: <Dialog.Portal> is missing.");return e}function SG(e){return eN(19)?e:e?"true":void 0}const gG={...Vf,...AR,nestedDialogOpen(e){return e?{[mG.nestedDialogOpen]:""}:null}},pG=N.forwardRef(function(t,a){const{className:l,finalFocus:s,initialFocus:c,render:d,...h}=t,{descriptionElementId:E,dismissible:A,floatingRootContext:R,getPopupProps:T,modal:S,mounted:p,nested:I,nestedOpenDialogCount:b,open:O,openMethod:v,popupRef:L,setPopupElement:P,titleElementId:U,transitionStatus:V,onOpenChangeComplete:G,internalBackdropRef:H}=cs();TG(),Yf({open:O,ref:L,onComplete(){O&&(G==null||G(!0))}});const ue=Dr(a,L),{getRootProps:Ae,resolvedInitialFocus:Ee}=EG({descriptionElementId:E,getPopupProps:T,initialFocus:c,modal:S,mounted:p,openMethod:v,ref:ue,setPopupElement:P,titleElementId:U}),oe=b>0,Te=N.useMemo(()=>({open:O,nested:I,transitionStatus:V,nestedDialogOpen:oe}),[O,I,V,oe]),{renderElement:Se}=Pr({render:d??"div",className:l,state:Te,propGetter:Ae,extraProps:{...h,style:{...h.style,[AG.nestedDialogs]:b}},customStyleHookMapping:gG});return u.jsxs(N.Fragment,{children:[p&&S===!0&&u.jsx(RG,{ref:H,inert:SG(!O)}),u.jsx(fH,{context:R,disabled:!p,closeOnFocusOut:A,initialFocus:Ee,returnFocus:s,modal:S!==!1,children:Se()})]})});function _G(e){const{children:t,keepMounted:a=!1,container:l}=e,{mounted:s}=cs();return s||a?u.jsx(hO.Provider,{value:a,children:u.jsx(sH,{root:l,children:t})}):null}const IG=typeof document<"u"?ft.useLayoutEffect:()=>{};function km(...e){return(...t)=>{for(let a of e)typeof a=="function"&&a(...t)}}function XR(e){var t;return typeof window<"u"&&window.navigator!=null?e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform):!1}function ih(e){let t=null;return()=>(t==null&&(t=e()),t)}const CG=ih(function(){return XR(/^Mac/i)}),NG=ih(function(){return XR(/^iPhone/i)}),OG=ih(function(){return XR(/^iPad/i)||CG()&&navigator.maxTouchPoints>1}),bG=ih(function(){return NG()||OG()});function DI(e,t){if(!e)return!1;let a=window.getComputedStyle(e),l=/(auto|scroll)/.test(a.overflow+a.overflowX+a.overflowY);return l&&t&&(l=e.scrollHeight!==e.clientHeight||e.scrollWidth!==e.clientWidth),l}function EO(e,t){let a=e;for(DI(a,t)&&(a=a.parentElement);a&&!DI(a,t);)a=a.parentElement;return a||document.scrollingElement||document.documentElement}const ZA=typeof document<"u"&&window.visualViewport,yG=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let Gd=0,QA;function vG(e={}){let{isDisabled:t}=e;IG(()=>{if(!t)return Gd++,Gd===1&&(bG()?QA=MG():QA=DG()),()=>{Gd--,Gd===0&&QA()}},[t])}function DG(){return km(lr(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`),lr(document.documentElement,"overflow","hidden"))}function MG(){let e,t,a=A=>{e=EO(A.target,!0),!(e===document.documentElement&&e===document.body)&&e instanceof HTMLElement&&window.getComputedStyle(e).overscrollBehavior==="auto"&&(t=lr(e,"overscrollBehavior","contain"))},l=A=>{if(!e||e===document.documentElement||e===document.body){A.preventDefault();return}e.scrollHeight===e.clientHeight&&e.scrollWidth===e.clientWidth&&A.preventDefault()},s=()=>{t&&t()},c=A=>{let R=A.target;LG(R)&&(h(),R.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{R.style.transform="",ZA&&(ZA.height<window.innerHeight?requestAnimationFrame(()=>{MI(R)}):ZA.addEventListener("resize",()=>MI(R),{once:!0}))}))},d=null,h=()=>{if(d)return;let A=()=>{window.scrollTo(0,0)},R=window.pageXOffset,T=window.pageYOffset;d=km(Pc(window,"scroll",A),lr(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`),lr(document.documentElement,"overflow","hidden"),lr(document.body,"marginTop",`-${T}px`),()=>{window.scrollTo(R,T)}),window.scrollTo(0,0)},E=km(Pc(document,"touchstart",a,{passive:!1,capture:!0}),Pc(document,"touchmove",l,{passive:!1,capture:!0}),Pc(document,"touchend",s,{passive:!1,capture:!0}),Pc(document,"focus",c,!0));return()=>{t==null||t(),d==null||d(),E()}}function lr(e,t,a){let l=e.style[t];return e.style[t]=a,()=>{e.style[t]=l}}function Pc(e,t,a,l){return e.addEventListener(t,a,l),()=>{e.removeEventListener(t,a,l)}}function MI(e){let t=document.scrollingElement||document.documentElement,a=e;for(;a&&a!==t;){let l=EO(a);if(l!==document.documentElement&&l!==document.body&&l!==a){let s=l.getBoundingClientRect().top,c=a.getBoundingClientRect().top;c>s+a.clientHeight&&(l.scrollTop+=c-s)}a=l.parentElement}}function LG(e){return e instanceof HTMLInputElement&&!yG.has(e.type)||e instanceof HTMLTextAreaElement||e instanceof HTMLElement&&e.isContentEditable}function HG(){if(typeof navigator>"u")return{platform:"",maxTouchPoints:-1};const e=navigator.userAgentData;return e!=null&&e.platform?{platform:e.platform,maxTouchPoints:navigator.maxTouchPoints}:{platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints}}function AO(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter:none")}function Pm(){const e=HG();return e.platform==="MacIntel"&&e.maxTouchPoints>1?!0:/iP(hone|ad|od)|iOS/.test(e.platform)}function xG(){return/firefox/i.test(cR())}function Ru(e){return e&&e.ownerDocument||document}function mO(e){return Ru(e).defaultView||window}let LI={},HI={},xI="",Yc=0,UI=()=>{};function UG(){return Yc}function kG(){return typeof CSS<"u"&&typeof CSS.supports=="function"&&CSS.supports("height","1dvh")}function PG(e){if(typeof document>"u")return!1;const t=Ru(e);return mO(t).innerWidth-t.documentElement.clientWidth>0}function GG(e){var T;const t=Ru(e),a=t.documentElement,l=t.body,s=mO(a);let c=0,d=0,h=-1;if(AO()&&(((T=s.visualViewport)==null?void 0:T.scale)??1)!==1)return()=>{};function E(){var H;const S=s.getComputedStyle(a),p=s.getComputedStyle(l);c=a.scrollTop,d=a.scrollLeft,LI={overflowY:a.style.overflowY,overflowX:a.style.overflowX},xI=a.style.scrollBehavior,HI={position:l.style.position,height:l.style.height,width:l.style.width,boxSizing:l.style.boxSizing,overflowY:l.style.overflowY,overflowX:l.style.overflowX,scrollBehavior:l.style.scrollBehavior};const I=(H=S.scrollbarGutter)==null?void 0:H.includes("stable"),b=a.scrollHeight>a.clientHeight,O=a.scrollWidth>a.clientWidth,v=S.overflowY==="scroll"||p.overflowY==="scroll",L=S.overflowX==="scroll"||p.overflowX==="scroll",P=Math.max(0,s.innerWidth-a.clientWidth),U=Math.max(0,s.innerHeight-a.clientHeight);Object.assign(a.style,{overflowY:!I&&(b||v)?"scroll":"hidden",overflowX:!I&&(O||L)?"scroll":"hidden"});const V=parseFloat(p.marginTop)+parseFloat(p.marginBottom),G=parseFloat(p.marginLeft)+parseFloat(p.marginRight);Object.assign(l.style,{position:"relative",height:V||U?`calc(100dvh - ${V+U}px)`:"100dvh",width:G||P?`calc(100vw - ${G+P}px)`:"100vw",boxSizing:"border-box",overflow:"hidden",scrollBehavior:"unset"}),l.scrollTop=c,l.scrollLeft=d,a.setAttribute("data-base-ui-scroll-locked",""),a.style.scrollBehavior="unset"}function A(){Object.assign(a.style,LI),Object.assign(l.style,HI),a.scrollTop=c,a.scrollLeft=d,a.removeAttribute("data-base-ui-scroll-locked"),a.style.scrollBehavior=xI}function R(){A(),cancelAnimationFrame(h),h=requestAnimationFrame(E)}return E(),s.addEventListener("resize",R),()=>{cancelAnimationFrame(h),A(),s.removeEventListener("resize",R)}}function wG(e){const{enabled:t=!0,mounted:a,open:l,referenceElement:s}=e,c=N.useMemo(()=>t&&(Pm()||!kG()||xG()&&!PG(s)),[t,s]);vi(()=>{if(a&&!l&&AO()){const d=Ru(s),h=d.body.style.userSelect,E=d.body.style.webkitUserSelect;return d.body.style.userSelect="none",d.body.style.webkitUserSelect="none",()=>{d.body.style.userSelect=h,d.body.style.webkitUserSelect=E}}},[a,l,s]),vG({isDisabled:!c}),vi(()=>{if(!(!t||c))return Yc+=1,Yc===1&&(UI=GG(s)),()=>{Yc-=1,Yc===0&&UI()}},[t,c,s])}function BG(e){const t=N.useRef(""),a=N.useCallback(s=>{s.defaultPrevented||(t.current=s.pointerType)},[]);return{onClick:N.useCallback(s=>{if(s.detail===0){e(s,"keyboard");return}"pointerType"in s&&e(s,s.pointerType),e(s,t.current),t.current=""},[e]),onPointerDown:a}}function FG(e){const[t,a]=N.useState(null);!e&&t!==null&&a(null);const l=N.useCallback((d,h)=>{e||a(h)},[e,a]),{onClick:s,onPointerDown:c}=BG(l);return N.useMemo(()=>({openMethod:t,triggerProps:{onClick:s,onPointerDown:c}}),[t,s,c])}function jG(e){const{enabled:t,setLock:a,popupRef:l}=e,s=ii(a),c=N.useRef(t);vi(()=>{if(!Pm()||(t&&(c.current=!0),!c.current))return;const E=Ru(l.current).documentElement;if(t){const A=E.scrollLeft,R=E.scrollTop;return()=>{UG()===0&&(E.scrollLeft=A,E.scrollTop=R)}}},[t,l]);const d=ii(h=>{if(!Pm())return;const E=Ei(h.nativeEvent);Ff(E)&&(s(!1),setTimeout(()=>s(!0)))});return N.useMemo(()=>({floating:{onFocus:d,onClick:d}}),[d])}function zG(e){const{defaultOpen:t,dismissible:a,modal:l,onNestedDialogClose:s,onNestedDialogOpen:c,onOpenChange:d,open:h,onOpenChangeComplete:E}=e,[A,R]=WC({controlled:h,default:t,name:"DialogRoot",state:"open"}),T=N.useRef(null),S=N.useRef(null),p=N.useRef(null),[I,b]=N.useState(void 0),[O,v]=N.useState(void 0),[L,P]=N.useState(null),[U,V]=N.useState(null),[G,H]=N.useState(!0),{mounted:ue,setMounted:Ae,transitionStatus:Ee}=qC(A),oe=ii((Ne,Ie,_e)=>{d==null||d(Ne,Ie,_e),R(Ne)}),Te=ii(()=>{Ae(!1),E==null||E(!1)});Yf({enabled:!e.actionsRef,open:A,ref:T,onComplete(){A||Te()}}),N.useImperativeHandle(e.actionsRef,()=>({unmount:Te}),[Te]);const ne=ER({elements:{reference:L,floating:U},open:A,onOpenChange:(Ne,Ie,_e)=>{oe(Ne,Ie,ZC(_e))}}),[ae,w]=N.useState(0),M=ae===0,W=_H(ne),ie=EH(ne),y=VC(ne,{outsidePressEvent:"mousedown",outsidePress(Ne){if(Ne.button!==0)return!1;const Ie=Ei(Ne);if(M&&a){const _e=Ie;return l?_e?[p.current,S.current].includes(_e):!1:!0}return!1},escapeKey:M}),X=A&&l===!0,Z=X&&G,Y=jG({enabled:X,setLock:H,popupRef:T});wG({enabled:Z,mounted:ue,open:A,referenceElement:U});const{getReferenceProps:le,getFloatingProps:de}=KC([W,ie,y,Y]);N.useEffect(()=>(c&&A&&c(ae),s&&!A&&s(),()=>{s&&A&&s()}),[A,s,c,ae]);const re=N.useCallback(Ne=>{w(Ne+1)},[]),Re=N.useCallback(()=>{w(0)},[]),{openMethod:he,triggerProps:Oe}=FG(A),Be=N.useCallback((Ne={})=>le(hl(Oe,Ne)),[le,Oe]);return N.useMemo(()=>({modal:l,setOpen:oe,open:A,titleElementId:I,setTitleElementId:b,descriptionElementId:O,setDescriptionElementId:v,onNestedDialogOpen:re,onNestedDialogClose:Re,nestedOpenDialogCount:ae,openMethod:he,mounted:ue,transitionStatus:Ee,getTriggerProps:Be,getPopupProps:de,setTriggerElement:P,setPopupElement:V,popupRef:T,backdropRef:S,internalBackdropRef:p,floatingRootContext:ne}),[l,oe,A,I,O,re,Re,ae,he,ue,Ee,Be,de,ne])}const YG=function(t){const{children:a,defaultOpen:l=!1,dismissible:s=!0,modal:c=!0,onOpenChange:d,open:h,actionsRef:E,onOpenChangeComplete:A}=t,R=tG(),T=zG({open:h,defaultOpen:l,onOpenChange:d,modal:c,dismissible:s,actionsRef:E,onOpenChangeComplete:A,onNestedDialogClose:R==null?void 0:R.onNestedDialogClose,onNestedDialogOpen:R==null?void 0:R.onNestedDialogOpen}),S=!!R,p=N.useMemo(()=>({...T,nested:S,onOpenChangeComplete:A}),[T,S,A]),I=N.useMemo(()=>({dismissible:s}),[s]);return u.jsx(WR.Provider,{value:p,children:u.jsx(qR.Provider,{value:I,children:a})})},VG={},KG=N.forwardRef(function(t,a){const{render:l,className:s,id:c,...d}=t,{setTitleElementId:h}=cs(),E=fO(c);vi(()=>(h(E),()=>{h(void 0)}),[E,h]);const A=N.useCallback((T={})=>hl({id:E},T),[E]),{renderElement:R}=Pr({propGetter:A,render:l??"h2",className:s,state:VG,ref:a,extraProps:d});return R()}),WG=N.forwardRef(function(t,a){const{render:l,className:s,disabled:c=!1,...d}=t,{open:h,setTriggerElement:E,getTriggerProps:A}=cs(),R=N.useMemo(()=>({disabled:c,open:h}),[c,h]),T=Dr(a,E),{getButtonProps:S}=dO({disabled:c,buttonRef:T}),{renderElement:p}=Pr({render:l??"button",className:s,state:R,propGetter:I=>S(A(I)),extraProps:d,customStyleHookMapping:$C});return p()}),Da=JSON.parse(`[{"date":"5/18/25","changes":["Updated the site to automatically use dark mode if your system is set to use it. Manually using the theme selector overrides this.","[GNB] Fixed a typo where \\"Lightning Shot\\" was incorrectly called \\"Lightning Shock.\\"","[GNB] Updated the application delay of Trajectory from 0.22 to 0.66 to match the current version of the game."]},{"date":"5/17/25","changes":["We've made some big updates to the tools we use to build XIV in the Shell. The site should work the same as before, but if you notice anything broken or slow, please let us know posthaste.","We're planning on adding some large features in the near feature, so we've also made the changelog more prominent in anticipation. Please look forward to it."],"changes_zh":["我们对制造XIV in the Shell的软件工具做了大更新。网站的操作应该和以前一样、如果您发现有任何功能有破坏或变慢了，请尽快通知我们。","因为我们准备在不久的将来内对排轴器增加大功能，所以我们先把更新日志变得更加引人注意。更大的公告也会有像这样的中文翻译。敬请期待。"]},{"date":"5/10/25","changes":["[PLD] Added initial support for PLD"],"changes_zh":["【骑士】 加了初步的骑士支持。"]},{"date":"5/9/25","changes":["[RPR] Fixed a bug where Regress wasn't usable in enshroud","[RPR] Fixed a bug where Grim Swathe was replaced with Lemure's Slice instead of Lemure's Scythe","[RPR] Fixed a bug where Perfectio was usable in enshroud","[RPR] Fixed a bug where Executioner's Gibbet/Gallows weren't replaced with Void/Cross Reaping while in enshroud","[SMN] Fixed a bug where Slipstream's initial hit falloff was displayed incorrectly in the DoT table (thanks omor1)","[SMN] Fixed the potency of Mountain Buster (was incorrectly listed as 170 instead of 160, thanks omor1)"]},{"date":"5/2/25","changes":["Changed Ama's combat sim export to disable auto-attacks for healer/caster jobs."]},{"date":"4/28/25","changes":["Refactored cooldown logic. Changes should not affect end users, but let us know if anything is off.","Added a few missing translations"]},{"date":"4/21/25","changes":["Updated compatibility with Ama's combat sim for newly-supported jobs."]},{"date":"4/17/25","changes":["[RPR] Added a button to gain +10 Soul Gauge to simulate a target dying with Death's Design active","[BRD] Fixed a bug where Iron Jaws checked the dot status at application time instead of confirmation time (thanks Yumiya)","[BRD] Fixed a bug where Empyreal Arrow applied repertoire at application time instead of confirmation time (also thanks Yumiya)"]},{"date":"4/13/25","changes":["Added English-language markers for M8S"]},{"date":"4/7/25","changes":["Added English-language markers for M7S"]},{"date":"4/6/25","changes":["Added English-language markers for M5S + M6S"]},{"date":"3/29/25","changes":["[BLM] Removed \\"outdated\\" status"]},{"date":"3/26/25","changes":["Added user survey link"]},{"date":"3/24/25","changes":["We have updated the site in accordance with the 7.2 patch notes. Goodbye to the Enochian timer o7","[BLM] will remain in \\"outdated\\" status until we have a change to play with the changes in-game.","Since most jobs received only potency changes, your old 7.1 plans should work, but as usual, please let us know if anything seems incorrect."]},{"date":"3/20/25","changes":["[DNC] Fixed an issue where the icons for Finishing Move Ready and Last Dance Ready were swapped, and an issue where Last Dance Ready was not consumed by Last Dance (thank you bluke)"]},{"date":"3/16/25","changes":["Fixed an issue where resource toggles were shown in their timeline editor with their internal keys rather than localized test.","Fixed mistakes in DoT effect override calculations.","In anticipation of patch 7.2, we're working on some changes to make it easier to migrate timelines after site or game changes. The following things have changed:","- Single-clicking an action will now try to use it as soon as the current animation lock/skill cooldown is over (this used to require double-clicking). If the action cannot be used, a wait is automatically added to the timeilne.","- In \\"manual\\" control mode, you no longer need to press space to advance past an action's animation lock (it will now advance automatically when a skill is used).","- Displayed wait durations are now always calculated from the end of the previous animation lock. Any existing timelines will automatically be adjusted--the shown wait times may be different, but the times where actions are used will remain the same.","- Skill sequence presets now include wait durations. This lets you load/save sequences that use late weaves or wait for MP ticks (assuming ticks still line up quietly).","As a consequence of these changes, you actually might now be able to load BLM timelines from 7.05/7.0 that previously were broken as a result of Despair becoming instant. Despair will still be instant and other buff usage will be unchanged, but the time between abilities should be correct.","These changes are very large, and while we've tested to make sure they won't break your existing timelines, there might still be some bugs that slipped through the cracks. As always, please reach out to us if you encounter any problems."]},{"date":"3/1/25","changes":["Make it so that you can only delete the currently active slot, to hopefully reduce the chance of accidentally deleting a slot when switching"]},{"date":"2/26/25","changes":["Updated the GCD formula because the old formula may be off by 0.01s when there is haste buff. Thank you Yuyuka for spotting the error. Note: old timelines (including timelines in browser localStorage) aren't affected; only newly created timelines use the new formula."]},{"date":"2/22/25","changes":["Added Queen Eternal markers by 小盐"]},{"date":"2/21/25","changes":["[BRD][GNB][SMN] Removed testing tag"]},{"date":"2/20/25","changes":["[SGE] Initial implementation for SGE","- Some rough edges still exist around Krasis' healing potency modification and Eukrasian shield handling.","- Basic functionality should be reasonably complete.","[RDM] Fixed a bug where Manafication could be used before combat"]},{"date":"2/16/25","changes":["[SAM] Fixed Hagakure only being usable at 3 sen"]},{"date":"2/15/25","changes":["[BLM] Fixed Manafont CD at lvl80 and below: should be 120s"]},{"date":"2/13/25","changes":["Updated English FRU tracks to more accurately reflect downtime between phases. We previously used the \\"death\\" event in a log as the end of a phase, but it turns out this is inaccurate as the last damage application to the boss occurs ~2 seconds before its recorded death.","- P1 to P2 untargetable duration increased by 2 seconds","- P2 to intermission untargetable duration decreased to align with the \\"crystals become targetable\\" mark","- Intermission to P3 downtime increased to match Gaia's attack killing the crystal","In order to not break existing timelines, the preset EN full fight track now treats P1 as dying 2 seconds before the end of the enrage cast. The start times of all phases are unaffected."]},{"date":"2/4/25","changes":["[SAM] Fixed AoE combo actions not ending the combo","[DRG] Added initial support for DRG"]},{"date":"2/2/25","changes":["[BRD][DNC] Fixed bonuses given from certain crit/DH buffs not applying in total potency calculations"]},{"date":"2/1/25","changes":["[WAR][SAM][RPR][MCH][DNC] Implemented localization for some recently added jobs"]},{"date":"1/27/25","changes":["[SMN] Added initial support for SMN"]},{"date":"1/26/25","changes":["[WAR][GNB] Fixed missing icon for tank LB3s"]},{"date":"1/18/25","changes":["[GNB] Added initial support for GNB"]},{"date":"1/17/25","changes":["Added \\"move end of selection to start of selection\\" button to the timeline editor"]},{"date":"1/12/25","changes":["[RPR] Fixed a bug where oGCDs would improperly consume Reaver/Executioner stacks"]},{"date":"1/8/25","changes":["[WAR] Fixed surging tempest text not showing up in potency modifier tooltip","[MCH] Fixed Overheated potency modifier not being applied"]},{"date":"1/5/25","changes":["Fixed a bug where multi-target spells lost their target counts when using the timeline editor"]},{"date":"1/4/25","changes":["Added support for multi-target abilities"]},{"date":"1/3/25","changes":["[WAR][SAM][RPR] Removed testing tag"]},{"date":"1/1/25","changes":["Added combined English FRU tracks"]},{"date":"12/28/24","changes":["[PCT] Fixed warning for Palette Gauge overcap"]},{"date":"12/24/24","changes":["[MCH] Added support for Flamethrower"]},{"date":"12/22/24","changes":["[BRD] Added initial support for BRD","Overhaul DoT tracking to provide better usage statistics","[BLM] Added High Thunder II"]},{"date":"12/20/24","changes":["Fixed stats tables not including party buff potencies for most skills","Removed flank/rear positional resources for non-melee jobs"]},{"date":"12/19/24","changes":["[WAR] Adjusted animation lock of Primal Rend","Fixed Down for the Count timing in FRU P4 (thanks xi12570)"]},{"date":"12/16/24","changes":["Limit breaks for all jobs!","[MCH][DNC] Removed testing tag","Updated \\"About this tool\\" section","More underlying implementation changes","[PCT] Made Hammer combo expire with Hammer Time buff (changed in 7.1)"]},{"date":"12/13/24","changes":["Fixed sometimes unable to use skills in manual mode with double click","[RPR] Added timer for Immortal Sacrifice","[RPR] Removed enhanced reapings whenever shroud is exited","[RPR] Separated cooldowns of Sacrificium and Lemure's Slice","[RPR] Fixed sks scaling","[WAR] Added initial WAR support"]},{"date":"12/12/24","changes":["Updated English FRU tracks and added P4 + P5"]},{"date":"12/8/24","changes":["Updated Chinese FRU tracks to latest (12/8 ver)","Make stats tables only include selected skills when there is selection"]},{"date":"12/7/24","changes":["Updated positional buff icons","Misc cleanups and optimizations (hey devs: rerun npm install)","[BLM] Fixed Retrace button not changing back to LL if LL is disabled when the buff drops"]},{"date":"12/5/24","changes":["Updated Chinese FRU tracks to latest (12/2 version)","Additional Chinese localization changes (preset lines; initial resource overrides section; many resource names)","New skill icon progress bar visuals 🎉"]},{"date":"12/4/24","changes":["Added English FRU P3 tracks by Yara","[RDM] Fixed Swiftcast being consumed before Dualcast when both are active"]},{"date":"12/2/24","changes":["Added English FRU P2 tracks by Yara","Fixed a bug where 'Load tracks starting at timestamp' did not accept some time formats","[RDM] Removed the 'testing' label"]},{"date":"12/1/24","changes":["Updated full FRU tracks in Chinese by 盐宝 & czmm"]},{"date":"11/30/24","changes":["[MCH] Fixed Scattergun's heat generation (thanks Kairos)","[PCT] Fixed Monochrome Tones appearing when synced to level 80 and other internal trait logic (thanks misterperson)"]},{"date":"11/29/24","changes":["[MCH] Fixed bugs with MCH Overheat consumption on AoE abilities (thanks FloatingGhost)"]},{"date":"11/28/24","changes":["Added some Chinese tracks (M1S-M4S, FRU before P2.5)"]},{"date":"11/27/24","changes":["Added the ability to override stacks to 0 for 1-stack resources that start present by default","Added preliminary FRU P1 tracks by Yara"]},{"date":"11/26/24","changes":["Added the ability to load marker tracks starting from a particular timestamp"]},{"date":"11/25/24","changes":["[RPR] Added initial RPR support"]},{"date":"11/24/24","changes":["[MCH] Added initial MCH support"]},{"date":"11/21/24","changes":["[SAM] Fixed a bug where Fuka haste was doubly applied","[SAM] Added GCD under Fuka in playback control"]},{"date":"11/20/24","changes":["[DNC] Added initial DNC support","[SAM] Added initial SAM support (thank you Sterling Sylva for the initial work)","Added support for skill speed in addition to spell speed"]},{"date":"11/17/24","changes":["[RDM] Fix Manafication CD (thanks 云青渔语)","[all casters] Fix Surecast duration: previously 10s, now 6.5s (ty erii)"]},{"date":"11/16/24","changes":["Make DET use main stat formula and default to 440","Add hyperlinks for xivgear and etro"]},{"date":"11/15/24","changes":["(thank you Yuyuka for reporting a bunch of RDM bugs)","[RDM] Added some additional warnings on unintended buff drops, overwrites, and combo breaks","[RDM] Fixed the duration of the Acceleration buff","[RDM] Fixed the MP costs of Veraero II/Verthunder II","[RDM] Fixed Manafication failing to interrupt combos","[RDM] Fixed Manafication being usable out of combat","[RDM] Fixed Enchanted Reprise clearing mana stacks","[RDM] Made Prefulgence and Vice of Thorns into button replacements"]},{"date":"11/14/24","changes":["(thank you Wan Shott for reporting a bunch of RDM bugs)","[RDM] Fixed bugs where Verfire and Grand Impact didn't grant correct mana","[RDM] Fixed a bug where it was possible to use un-enchanted Moulinet under certain incorrect conditions","mark newly-implemented jobs as in testing and display a warning message when using those jobs"]},{"date":"11/13/24","changes":["Fixed a bug where party buff potencies were not displayed","[PCT] Fixed a bug where using two hammer combos within 30s of each other caused the combo to break","[RDM] Fixed a bug where level synced RDM still received Grand Impact Ready from Acceleration","[RDM] Fixed a bug where Acceleration did not always grant a Verstone/Verfire proc","[RDM] Fixed a bug where certain role buffs were not being displayed on the hotbar","[RDM] Fixed a bug where buffs were overlapping the hotbar","[RDM] Fixed a bug where Contre Sixte's cooldown was improperly affected by traits","Removed debug and implementation notes sections (see repository wiki for implementation notes)"]},{"date":"11/12/24","changes":["Initial XIV in the Shell! Supporting patch 7.1 BLM and PCT, plus preliminary RDM"]}]`);function $A(){return Da[0].date}function kI(e){return u.jsxs("div",{className:"changelogGroup",children:[u.jsx("div",{children:e.date}),u.jsx("div",{children:_({en:u.jsx(u.Fragment,{children:e.changes.map((t,a)=>u.jsx("div",{className:"changelogLine",children:t},a))}),zh:e.changes_zh!==void 0?u.jsx(u.Fragment,{children:e.changes_zh.map((t,a)=>u.jsx("div",{className:"changelogLine",children:t},a))}):void 0})})]})}const qG=`
.Backdrop {
  position: fixed;
  inset: 0;
  background-color: black;
  transition: opacity 50ms cubic-bezier(0.45, 1.005, 0, 1.005);

  &[data-starting-style],
  &[data-ending-style] {
	opacity: 0;
  }
}

.Popup {
  box-sizing: border-box;
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 50vw;
  height: 70vh;
  max-height: 70vh;
  overflow-y: scroll;
  margin-top: -2rem;
  padding-left: 1.5rem;
  padding-right: 1.5rem;
  transition: all 50ms cubic-bezier(0.45, 1.005, 0, 1.005);

  font-family: monospace;
  font-size: 13px;

  &[data-starting-style],
  &[data-ending-style] {
	opacity: 0;
	transform: translate(-50%, -50%) scale(0.9);
  }
}

.changelogGroup {
	margin-top: 1em;
	margin-bottom: 1em;
}

.changelogLine {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
	margin-left: 0.5em;
}
`;function XG(){let e,t,a={};const l=N.useRef(5),[s,c]=N.useState(!1),d=N.useContext(Pa)==="Light",h=Yt();N.useEffect(()=>{let T=dn("changelogLastRead"),S=dn("changelogLastReadChangeCount");!Xy&&(T===null||S===null)&&(T="5/10/25",S="1");const p=T===null||S===null||T===Da[0].date&&S===Da[0].changes.length.toString();if(c(p),T!==null&&S!==null){if(!p){let I=0;for(;I<Da.length-1;I++)if(T===Da[I].date){S!==Da[I].changes.length.toString()&&I++;break}l.current=I}}else Qt("changelogLastRead",Da[0].date),Qt("changelogLastReadChangeCount",Da[0].changes.length.toString())},[]);const E=T=>{T||(l.current=5,s||(Qt("changelogLastRead",Da[0].date),Qt("changelogLastReadChangeCount",Da[0].changes.length.toString())),c(!0))};if(s)e=_({en:"Changelog",zh:"更新日志",ja:"更新履歴"}),t="•";else{const T=Yt();e=_({en:"Changelog (new updates!!)",zh:"更新日志（有变！！）"}),t="!",a={color:T.warning,fontWeight:"bold"}}const A=u.jsx("div",{className:"clickable",children:u.jsxs("span",{style:a,children:[u.jsxs("span",{children:[t," "]}),u.jsx("span",{className:"clickableLinkLike",children:e})]})}),R=u.jsx(nU,{className:"dialogExit",style:{color:h.bgHighContrast}});return u.jsxs(u.Fragment,{children:[u.jsx("style",{children:qG}),u.jsxs(YG,{onOpenChange:E,children:[u.jsx(WG,{render:A}),u.jsxs(_G,{children:[u.jsx(aG,{className:"Backdrop",style:{opacity:d?.2:.7}}),u.jsxs(pG,{className:"Popup visibleScrollbar",id:"changelogPopup",style:{backgroundColor:h.background,border:"1px solid "+h.bgMediumContrast,color:h.text},children:[u.jsx(KG,{render:u.jsx("h3",{children:e})}),u.jsx(rG,{render:R}),u.jsx(hG,{className:"Description",render:u.jsx(ZG,{hiddenStartIndex:l.current,newChanges:!s})})]})]})]})]})}function ZG(e){const t=[],a=[];for(let A=0;A<e.hiddenStartIndex;A++)t.push(kI(Da[A]));for(let A=e.hiddenStartIndex;A<Da.length;A++)a.push(kI(Da[A]));const l=_({en:e.newChanges?"New Changes":"Recent Changes",zh:e.newChanges?"新的更新":"最近的更新"}),s=u.jsxs("div",{style:{marginTop:10,marginBottom:10},children:[u.jsx("span",{style:{marginTop:10,marginBottom:10},children:u.jsx("b",{children:l})}),u.jsx("div",{style:{margin:10,paddingLeft:6},children:t.map((A,R)=>u.jsx("div",{children:A},R))})]}),[c,d]=N.useState(!1),h=_({en:"Older Changes",zh:"之前的更新"}),E=u.jsxs("div",{style:{marginTop:10,marginBottom:10},children:[u.jsx(ns,{content:u.jsxs("span",{children:[u.jsx("span",{children:c?"- ":"+ "}),u.jsx("b",{children:h})]}),onClickFn:()=>d(!c)}),u.jsx("div",{style:{position:"relative",display:c?"block":"none"},children:u.jsxs("div",{style:{margin:10,paddingLeft:6,marginBottom:20},children:[u.jsx("div",{children:a.map((A,R)=>u.jsx("div",{children:A},R))}),u.jsxs("div",{children:["For older changelog entries before the BLM/PCT in the Shell rejoining, see ",u.jsx("b",{children:"About this site/Changelog"})," on the old sites: ",u.jsx("a",{target:"_blank",rel:"noreferrer",href:"https://miyehn.me/ffxiv-blm-rotation/",children:"BLM in the Shell"}),", ",u.jsx("a",{target:"_blank",rel:"noreferrer",href:"https://picto.zqsz.me/",children:"PCT in the Shell"})]})]})})]});return u.jsxs("div",{children:[s,E]})}const JA="https://xivintheshell.com",em="https://github.com/xivintheshell/xivintheshell",QG="https://discord.com/channels/277897135515762698/1307922201726685236",tm="https://discord.gg/thebalanceffxiv",$G=()=>u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"paragraph",children:_({en:u.jsxs(u.Fragment,{children:[u.jsx("span",{children:"This tool was initially Black Mage in the Shell, "}),u.jsxs("span",{children:["ideated by ",u.jsx("b",{children:"Eshiya (Galahad)"})," and developed by ",u.jsx("b",{children:"miyehn"})," specifically for BLM during Endwalker since around February 2022."," "]}),u.jsx("span",{children:"After Dawntrail's release, it was expanded to support other jobs and is now maintained by a small team of developers:"})]}),zh:u.jsxs(u.Fragment,{children:[u.jsx("span",{children:"本工具起初是由加拉哈德构想、由miyehn开发的黑魔排轴器，于2022年2月开工，陪黑魔们走过了大半段6.x时期。"}),u.jsx("span",{children:"7.0发售后，它被重构并逐渐开始支持更多职业，现在的排轴器由多名开发共同维护："})]})})}),_({en:u.jsxs("ul",{children:[u.jsxs("li",{children:["Tool design and core systems: ",u.jsx("b",{children:"shanzhe"}),", ",u.jsx("b",{children:"miyehn"}),", ",u.jsx("b",{children:"Turtle"}),","," ",u.jsx("b",{children:"Akairyu"})]}),u.jsxs("li",{children:["BLM: ",u.jsx("b",{children:"shanzhe"}),", ",u.jsx("b",{children:"Akairyu"}),", ",u.jsx("b",{children:"Turtle"}),", ",u.jsx("b",{children:"miyehn"})]}),u.jsxs("li",{children:["PCT, RDM, SMN: ",u.jsx("b",{children:"shanzhe"})]}),u.jsxs("li",{children:["SAM: ",u.jsx("b",{children:"Sterling"}),", ",u.jsx("b",{children:"shanzhe"})]}),u.jsxs("li",{children:["DNC, MCH, BRD, SGE: ",u.jsx("b",{children:"Akairyu"})]}),u.jsxs("li",{children:["RPR: ",u.jsx("b",{children:"Honey B. Lovely's Favorite Bee"})]}),u.jsxs("li",{children:["WAR: ",u.jsx("b",{children:"misterperson"})]}),u.jsxs("li",{children:["GNB, DRG, PLD: ",u.jsx("b",{children:"Sterling"})]}),u.jsxs("li",{children:["Framework for adding new jobs: ",u.jsx("b",{children:"shanzhe"})]}),u.jsxs("li",{children:["Chinese localization: ",u.jsx("b",{children:"miyehn"}),", ",u.jsx("b",{children:"Eshiya"}),", ",u.jsx("b",{children:"Yuyuka"}),", ",u.jsx("b",{children:"shanzhe"}),","," ",u.jsx("b",{children:"小盐"}),", ",u.jsx("b",{children:"卿落青"}),", ",u.jsx("b",{children:"久逺"}),", ",u.jsx("b",{children:"大猫"})]})]}),zh:u.jsxs("ul",{children:[u.jsxs("li",{children:["工具设计和核心系统：",u.jsx("b",{children:"shanzhe"}),"、",u.jsx("b",{children:"miyehn"}),"、",u.jsx("b",{children:"Turtle"}),"、",u.jsx("b",{children:"Akairyu"})]}),u.jsxs("li",{children:["黑魔：",u.jsx("b",{children:"shanzhe"}),"、",u.jsx("b",{children:"Akairyu"}),"、",u.jsx("b",{children:"Turtle"}),"、",u.jsx("b",{children:"miyehn"})]}),u.jsxs("li",{children:["画家、赤魔、召唤：",u.jsx("b",{children:"shanzhe"})]}),u.jsxs("li",{children:["武士：",u.jsx("b",{children:"Sterling"}),"、",u.jsx("b",{children:"shanzhe"})]}),u.jsxs("li",{children:["舞者、机工、吟游诗人、贤者：",u.jsx("b",{children:"Akairyu"})]}),u.jsxs("li",{children:["钐镰客：",u.jsx("b",{children:"Honey B. Lovely's Favorite Bee"})]}),u.jsxs("li",{children:["战士：",u.jsx("b",{children:"misterperson"})]}),u.jsxs("li",{children:["绝抢战士，龙骑士，骑士：",u.jsx("b",{children:"Sterling"})]}),u.jsxs("li",{children:["添加新职业的程序框架：",u.jsx("b",{children:"shanzhe"})]}),u.jsxs("li",{children:["中文本地化：",u.jsx("b",{children:"miyehn"}),"、",u.jsx("b",{children:"加拉哈德"}),"、",u.jsx("b",{children:"鱼卡"}),"、",u.jsx("b",{children:"shanzhe"}),"、",u.jsx("b",{children:"小盐"}),"、",u.jsx("b",{children:"卿落青"}),"、",u.jsx("b",{children:"久逺"}),"、",u.jsx("b",{children:"大猫"})]})]})}),u.jsx("div",{className:"paragraph",children:_({en:"And many thanks to Yara, Spider, Santa, players in 不打冰三攻略组, kiyozero, czmm, and other players and groups who contributed feature suggestions, timeline markers, bug reports, etc.",zh:"同时，感谢Yara、Spider、Santa、不打冰三攻略组成员、kiyozero、czmm等，以体验反馈、报bug、时间轴标记等形式为这个工具作出过无私贡献的玩家们。"})}),_({en:u.jsxs("div",{className:"paragraph",children:["If you have questions or would like to provide feedback, you can message in"," ",u.jsx("a",{target:"_blank",href:QG,rel:"noreferrer",children:"this channel in The Balance"})," ",'(requires the "Misc. Support" role). In case of sending a bug report, attaching the fight record (download "fight.txt" from the bottom or name it anything else) would be very helpful.']}),zh:u.jsxs("div",{className:"paragraph",children:[u.jsx("span",{children:"如果遇到bug或者有任何工具相关的问题和建议，都欢迎反馈给我们，可请不打冰三攻略组的黑魔们或鱼卡转达，或加miyehn的QQ（870340705，加时请注明来意）。"}),u.jsx("span",{children:"如果是反馈bug，最好把能够复现bug的战斗记录文件（从下方下载的fight.txt）一起发过来。"})]}),ja:u.jsx("div",{className:"paragraph",children:"[outdated (ja)] 質問、バグ報告、機能提案などがある場合は、Discord（miyehn）またはメール（ellyn.waterford@gmail.com）でお問い合わせください。 バグ報告の場合は、右側からダウンロードした「fight.txt」を添付していただくと助かります。"})})]});function JG(e){let t={marginBottom:5},a=Yt();const l=e.job;return u.jsxs("div",{children:[u.jsx(XG,{}),u.jsx(qo,{defaultShow:!0,title:"instructions",titleNode:u.jsxs("span",{children:[_({en:"Instructions ",zh:"使用说明 ",ja:"説明 "}),u.jsx(Je,{topic:"expandable",content:_({en:"click me to expand or collapse",zh:"点击展开/折叠",ja:"クリックして開閉する"})})]}),content:u.jsxs("div",{children:[u.jsx("div",{className:"paragraph",children:u.jsx("b",{children:_({en:"General Usage",zh:"基本用法",ja:"使い方"})})}),_({en:u.jsxs("ul",{children:[u.jsxs("li",{style:t,children:["Set your stats in ",u.jsx("b",{children:"Config"})," on the right, then"," ",u.jsx(cn,{text:"apply and reset"})]}),u.jsx("li",{style:t,children:"Click on a skill to use it. The simulation will always jump to when the animation lock ends and the skill's cooldown becomes available."}),u.jsxs("li",{style:t,children:["Press ",u.jsx(cn,{text:"u"})," to delete the last added action (effective when not running in real-time)."]}),u.jsx("li",{style:t,children:"Click on a buff applied to self to remove it. Unless it's ley lines, in which case it can be re-enabled."})]}),zh:u.jsxs("ul",{children:[u.jsxs("li",{style:t,children:["在右边",u.jsx("b",{children:"属性设置"}),"里输入装备数据，然后点击"," ",u.jsx(cn,{text:"应用并重置时间轴"})]}),u.jsx("li",{style:t,children:"单击使用技能，如果CD还没转好，会自动等到转好然后重试。"}),u.jsxs("li",{style:t,children:["按 ",u.jsx(cn,{text:"u"})," ","删除时间线上的最后一个操作（实时模式下此操作无效）。"]}),u.jsx("li",{style:t,children:"左键单击可以移除自己身上的buff。黑魔纹除外，黑魔纹在单击关闭后可以被再次点击开启。"})]}),ja:u.jsxs("ul",{children:[u.jsxs("li",{style:t,children:["右側にある",u.jsx("b",{children:"設定"}),"でステータスをセットしてから",u.jsx(cn,{text:"適用とリセット"}),"をクリックしてください。"]}),u.jsx("li",{style:t,children:"実行したいアクションをクリックしてください。リキャストが戻ってきていないアクションをクリックすると使用可能な時間まで待って再実行します。"}),u.jsxs("li",{style:t,children:[u.jsx(cn,{text:"u"}),"を押すと最後に追加されたアクションを削除できます。"]}),u.jsx("li",{style:t,children:"黒魔紋以外のバフをクリックすると削除できます。黒魔紋はバフの有効無効を切り替えられます。"})]})}),u.jsx("div",{className:"paragraph",children:u.jsx("b",{children:_({en:"Timeline",zh:"时间轴",ja:"タイムライン"})})}),_({en:u.jsxs("ul",{children:[u.jsxs("li",{style:t,children:["Holding ",u.jsx(cn,{text:"shift"})," lets you scroll horizontally"]}),u.jsx("li",{style:t,children:"Click to select/unselect a single skill on the timeline. Shift click to select a sequence of skills"}),u.jsxs("li",{style:t,children:[u.jsx(cn,{text:"backspace"})," or"," ",u.jsx(cn,{text:"delete"})," to delete the selected skill and everything after it"]}),u.jsxs("li",{style:t,children:["Click on the timeline's ruler-like header to view historical game states. While doing so, the main control region will have an"," ",u.jsx("b",{style:{color:"darkorange"},children:"orange"})," border and you will not be able to use skills. Click on somewhere else on the timeline to cancel."]})]}),zh:u.jsxs("ul",{children:[u.jsxs("li",{style:t,children:["按住 ",u.jsx(cn,{text:"shift"})," ","时滑动鼠标滚轮可以横向滚动时间线。"]}),u.jsxs("li",{style:t,children:["单击选中/取消选中时间轴上的单个技能。已经选中一个技能时，按住"," ",u.jsx(cn,{text:"shift"})," ","点击另一个技能会选中期间的所有操作。"]}),u.jsxs("li",{style:t,children:["按 ",u.jsx(cn,{text:"backspace"})," 或"," ",u.jsx(cn,{text:"delete"})," 删除选中技能及其之后的所有操作。"]}),u.jsxs("li",{style:t,children:["选中某技能或者刻度上的某时间时，可以看到相应时间的职业资源状态。此时控制区域边框变为",u.jsx("b",{style:{color:"darkorange"},children:"橙色"}),"且无法使用技能。点击控制区域或时间轴空白处取消。"]})]}),ja:u.jsxs("ul",{children:[u.jsxs("li",{style:t,children:[u.jsx(cn,{text:"shift"}),"を押しながらスクロールすると横スクロールできます。"]}),u.jsxs("li",{style:t,children:["タイムライン上のアクションをクリックすると選択できます。",u.jsx(cn,{text:"shift"}),"を押しながらクリックすると複数選択できます。"]}),u.jsxs("li",{style:t,children:[u.jsx(cn,{text:"backspace"}),"か",u.jsx(cn,{text:"delete"}),"を押すと選択中のアクションとそれ以降のアクションを全て削除します。"]}),u.jsxs("li",{style:t,children:["タイムラインの経過時間が表示されているヘッダー部分をクリックするとメインコントロールの枠が",u.jsx("b",{style:{color:"darkorange"},children:"オレンジ"}),"になり、その瞬間の状態を確認できます。 その間はアクションを実行できません。他の場所をクリックするとキャンセルされ通常モードに戻ります。"]})]})}),_({en:u.jsxs("div",{className:"paragraph",children:[u.jsx("span",{style:{color:a.fileDownload,cursor:"pointer"},children:u.jsx("u",{children:"[these]"})})," ","are file download links. Click to download, or right click to choose save location."]}),zh:u.jsxs("div",{className:"paragraph",children:[u.jsx("span",{style:{color:a.fileDownload,cursor:"pointer"},children:u.jsx("u",{children:"[这样的按钮]"})})," ","是文件下载链接，可以点击直接下载也可以右键另存为。"]}),ja:u.jsxs("div",{className:"paragraph",children:[u.jsx("span",{style:{color:a.fileDownload,cursor:"pointer"},children:u.jsx("u",{children:"[このように表示されている部分]"})}),"はダウンロードリンクです。クリックしてダウンロードするか右クリックで場所を指定してダウンロードできます。"]})}),_({en:u.jsxs("div",{className:"paragraph",children:["You can save/load fight records at the bottom, under the"," ",u.jsx("b",{children:"Import/Export"})," tab. Most edits are also automatically saved in your browser cache, so it's generally okay to refresh the page and not worry about losing progress."]}),zh:u.jsxs("div",{className:"paragraph",children:["工具最下方的 ",u.jsx("b",{children:"导入/导出"})," ","区域有链接可以保存/加载战斗记录。大部分编辑也都会被保存在浏览器缓存，所以一般情况下刷新网页也不会丢失数据。"]})}),_({en:u.jsxs("div",{className:"paragraph",children:["Hover over ",u.jsx(Je,{topic:"sampleTips",content:"sample tip"})," ","everywhere to see more tips."]}),zh:u.jsxs("div",{className:"paragraph",children:["鼠标悬浮在各处的 ",u.jsx(Je,{topic:"sampleTips",content:"我是一个说明"})," ","上查看更多使用说明。"]}),ja:u.jsxs("div",{className:"paragraph",children:[u.jsx(Je,{topic:"sampleTips",content:"サンプルのヘルプテキストです"}),"をホバーするとヘルプテキストを確認できます。"]})}),u.jsx("div",{className:"paragraph",style:{marginTop:16},children:u.jsx(qo,{title:"Troubleshoot",titleNode:_({en:u.jsx("b",{children:"troubleshoot"}),zh:u.jsx("b",{children:"常见问题"}),ja:u.jsx("b",{children:"トラブルシューティング"})}),content:u.jsxs(u.Fragment,{children:[_({en:u.jsxs("div",{children:[u.jsx("div",{className:"paragraph",children:"I can't guarantee that my updates are always backward compatible. If your fight record files aren't loading properly but you don't understand why, contact me and I'll try my best to help."}),u.jsxs("div",{className:"paragraph",children:["If the browser cache is somehow messed up (likely due to invalid game states), this is how to reset it:",u.jsx("br",{}),"Enter this tool from"," ",u.jsx("b",{children:JA+"?{command}"})," replacing"," ",u.jsx("b",{children:"{command}"})," with one of the following:",u.jsxs("ul",{children:[u.jsxs("li",{style:t,children:[u.jsx("b",{children:"resetResourceOverrides"}),": delete all resource overrides and all actions on the current timeline."]}),u.jsxs("li",{style:t,children:[u.jsx("b",{children:"resetAll"}),": delete all browser-cached settings."]})]})]})]}),zh:u.jsxs("div",{children:[u.jsx("div",{className:"paragraph",children:"我无法保证每次更新都能兼容已有的战斗记录文件。如果你的战斗记录无法被正常导入但你不清楚原因，可以联系我，我会尽力帮一起看。"}),u.jsxs("div",{className:"paragraph",children:["如果浏览器缓存因不明原因出问题（比如预设了刚打完绝望满蓝这样的“非法状态”），可尝试用以下方法重置浏览器缓存：",u.jsx("br",{}),"用以下链接进入本工具：",u.jsx("b",{children:JA+"?{command}"}),"，然后把",u.jsx("b",{children:"{command}"}),"替换成以下两个指令之一：",u.jsxs("ul",{children:[u.jsxs("li",{style:t,children:[u.jsx("b",{children:"resetResourceOverrides"}),": 删除当前时间线上的所有资源预设和技能"]}),u.jsxs("li",{style:t,children:[u.jsx("b",{children:"resetAll"}),": 删除所有本工具相关的浏览器缓存"]})]})]})]}),ja:u.jsxs("div",{children:[u.jsx("div",{className:"paragraph",children:"後方互換性があるとは限りません。保存したファイルが正しく読み込まれず、その理由がわからない場合はお問い合わせください。できる限りお手伝いします。"}),u.jsxs("div",{className:"paragraph",children:["ブラウザのキャッシュが何らかの理由で壊れている場合、次の方法でリセットできます。",u.jsx("br",{}),u.jsx("b",{children:JA+"?{command}"})," にアクセスし、",u.jsx("b",{children:"{command}"})," ","を以下のいずれかに置き換えます：",u.jsxs("ul",{children:[u.jsxs("li",{style:t,children:[u.jsx("b",{children:"resetResourceOverrides"}),": 全てのリソースとタイムライン上のアクションを上書きします。"]}),u.jsxs("li",{style:t,children:[u.jsx("b",{children:"resetAll"}),": 全てのブラウザキャッシュを削除します。"]})]})]})]})}),u.jsxs("div",{children:[_({en:"Or just: ",zh:"或者直接："}),u.jsx("button",{className:"dangerButton",onClick:()=>{FI(),window.location.reload()},children:_({en:"[DANGER!] clear browser cache and reload",zh:"[谨慎操作] 清除缓存并刷新",ja:"[キケン！] ブラウザキャッシュをクリアしてリロード"})})]})]})})})]})}),u.jsx(qo,{defaultShow:!1,title:"About this tool",titleNode:_({en:"About this tool",zh:"关于",ja:"このツールについて"}),content:u.jsxs("div",{children:[u.jsx("div",{className:"paragraph",children:_({en:"This is a FFXIV simulator & rotation planner.",zh:"是个FF14模拟器/排轴工具。",ja:"FF14のスキルローテーションシミュレーターです。"})}),$G(),u.jsx("div",{className:"paragraph",children:_({en:"Some links:",zh:"一些链接：",ja:"リンク集"})}),_({en:u.jsxs("ul",{children:[u.jsx("li",{children:u.jsx("a",{href:em,children:"Github repository"})}),u.jsxs("li",{children:[u.jsx("a",{href:"https://miyehn.me/ffxiv-blm-rotation-endwalker/",children:"Black Mage in the Shell (Endwalker)"}),": a snapshot of this tool at the end of Endwalker. It also contains some notable fight plans from Endwalker, as memoir."]}),u.jsxs("li",{children:[u.jsx("a",{href:"https://spide-r.github.io/ffxiv-blm-rotation/",children:"Black Mage in the Bozjan Shell"}),": a variation for Save the Queens areas, created by"," ",u.jsx("b",{children:"A'zhek Silvaire @ Zalera"})]}),u.jsx("li",{children:u.jsx("a",{href:"https://na.finalfantasyxiv.com/jobguide/battle/",children:"Official FFXIV job guides"})}),u.jsxs("li",{children:["The Balance's community"," ",u.jsx("a",{href:"https://www.thebalanceffxiv.com/",children:"job guides"})," and"," ",u.jsx("a",{href:tm,children:"Discord"})]})]}),zh:u.jsxs("ul",{children:[u.jsx("li",{children:u.jsx("a",{href:em,children:"Github页面"})}),u.jsxs("li",{children:[u.jsx("a",{href:"https://miyehn.me/ffxiv-blm-rotation-endwalker/",children:"6.x版排轴器"}),"，历史版本黑魔排轴器。那里也公开展示着一些6.x时期的轴作为纪念。"]}),u.jsxs("li",{children:[u.jsx("a",{href:"https://spide-r.github.io/ffxiv-blm-rotation/",children:"博兹雅版排轴器（Black Mage in the Bozjan Shell）"}),": 本工具的博兹雅/天佑女王版。制作者："," ",u.jsx("b",{children:"A'zhek Silvaire @ Zalera"})]}),u.jsx("li",{children:u.jsx("a",{href:"https://na.finalfantasyxiv.com/jobguide/battle/",children:"官方各职业介绍（英文）"})}),u.jsxs("li",{children:["The Balance",u.jsxs("a",{href:"https://www.thebalanceffxiv.com/",children:[" ","玩家社区攻略（英文）"]}),"和 ",u.jsx("a",{href:tm,children:"Discord服务器"})]})]}),ja:u.jsx("ul",{children:u.jsxs(u.Fragment,{children:[u.jsx("li",{children:u.jsx("a",{href:em,children:"Github repository"})}),u.jsxs("li",{children:[u.jsx("a",{href:"https://spide-r.github.io/ffxiv-blm-rotation/",children:"Black Mage in the Bozjan Shell"}),": 南方ボズヤ戦線向けのツール。作者：",u.jsx("b",{children:"A'zhek Silvaire @ Zalera"})]}),u.jsx("li",{children:u.jsx("a",{href:"https://na.finalfantasyxiv.com/jobguide/blackmage/",children:"Official FFXIV black mage job guide"})}),u.jsxs("li",{children:[u.jsxs("a",{target:"_blank",href:tm,rel:"noreferrer",children:[l," resources channel on The Balance"]})," ","（ぜひDiscordサーバーに参加してください。）"," "]})]})})})]})})]})}var ew={};let Of=e=>{},bf=e=>{},yf=e=>{};function tw(e){if(e==="resetAll")FI();else if(e==="resetResourceOverrides"){let t=dn("gameRecord");for(let a=0;a<al;a++){let l=dn("gameRecord"+a.toString());if(a===0&&l===null&&t!==null&&(l=t),l!==null){let s=JSON.parse(l);console.log(s),s.config&&(s.config.initialResourceOverrides=[]),s.actions=[],Qt("gameRecord"+a.toString(),JSON.stringify(s))}}}else e!==void 0&&console.log("unrecognized command '"+e+"'")}function nw(e){return u.jsx("div",{style:{flex:3,height:e.height,marginLeft:6,position:"relative",verticalAlign:"top"},children:u.jsx(BN,{uniqueName:"mainConfig",content:[{titleNode:_({en:"Config",zh:"属性设置"}),contentNode:u.jsx(KN,{})},{titleNode:_({en:"Control",zh:"操作设置"}),contentNode:u.jsx(lU,{})}],collapsible:!1,scrollable:!0,height:e.height,defaultSelectedIndex:0})})}function aw(e){let t=e.color??Yt().accent;return u.jsx("div",{style:{display:e.hidden===!0?"none":"block",color:t,border:"1px solid "+t,borderRadius:4,padding:"10px 10px 0 10px"},children:e.children})}class iw extends ft.Component{constructor(a){super(a);F(this,"controlRegionRef");F(this,"gameplayKeyCapture");F(this,"gameplayMouseCapture");F(this,"setColorTheme");F(this,"state");tw(a.command),this.state={job:D.getActiveJob(),hasFocus:!1,historical:!1,realTime:!1,controlRegionHeight:0,colorTheme:$I()},this.controlRegionRef=ft.createRef(),this.gameplayKeyCapture=l=>{var s;l.target&&l.target===((s=this.controlRegionRef)==null?void 0:s.current)&&(D.handleKeyboardEvent(l),l.preventDefault())},this.gameplayMouseCapture=l=>{D.displayCurrentState()},Of=l=>{this.setState({job:l});const s=document.querySelector("link[rel~='icon']");s&&(l in It?s.href="/favicons/"+l.toString().toLocaleLowerCase()+".ico":s.href=ew.PUBLIC_URL+"/favicon.ico");const c=document.getElementById("pageTitle");c&&(c.text=`XIV in the Shell (${l})`)},bf=l=>{this.setState({realTime:l})},yf=l=>{this.setState({historical:l})},this.setColorTheme=l=>{l!==this.state.colorTheme&&(D.updateAllDisplay(),this.setState({colorTheme:l}),Qt("colorTheme",l))}}componentDidMount(){D.tryAutoLoad(),D.updateAllDisplay(),this.controlRegionRef.current&&new ResizeObserver(()=>{var l;let a=((l=this.controlRegionRef.current)==null?void 0:l.clientHeight)??0;this.setState({controlRegionHeight:a})}).observe(this.controlRegionRef.current)}componentWillUnmount(){Of=a=>{},bf=a=>{},yf=a=>{}}render(){let a=fl(this.state.colorTheme),l={height:"100%",accentColor:a.accent,fontFamily:"monospace",fontSize:13,color:a.text,backgroundColor:a.background,display:"flex",flexDirection:"column"},s;this.state.historical?s="2px solid "+a.historical:this.state.hasFocus?this.state.realTime?s="2px solid "+a.realTime:s="2px solid "+a.accent:s="1px solid "+a.bgMediumContrast;let c=u.jsx("div",{style:{flex:7,display:"inline-block",position:"relative"},children:u.jsxs("div",{onFocus:()=>{this.setState({hasFocus:!0})},onBlur:()=>{this.setState({hasFocus:!1})},style:{display:"inline-block",padding:8,outline:s},tabIndex:-1,ref:this.controlRegionRef,onKeyDown:this.gameplayKeyCapture,onClick:this.gameplayMouseCapture,children:[u.jsx(YN,{}),u.jsx(dN,{})]})});return u.jsxs("div",{style:{position:"fixed",top:0,bottom:0,left:0,right:0},children:[u.jsx("style",{children:`
				.visibleScrollbar::-webkit-scrollbar {
					appearance: none;
					background-color: ${a.bgLowContrast};
					height: 8px;
					width: 5px;
				}
				.visibleScrollbar::-webkit-scrollbar-thumb {
					background-color: ${a.bgHighContrast};
				}
				.invisibleScrollbar::-webkit-scrollbar {
					appearance: none;
					background-color: clear;
					height: 8px;
					width: 5px;
				}
				.invisibleScrollbar::-webkit-scrollbar-thumb {
					background-color: ${a.bgHighContrast};
				}
				a {
					color: ${a.accent};
				}
				b, h1, h2, h3, h4 {
					color: ${a.emphasis};
				}
				p {
					margin-block-start: 10px;
					margin-block-end: 10px;
				}
				p:first-child {
					margin-block-start: 0px;
				}
				::selection {
					background: rgba(147, 112, 219, 0.4);
				}
				option, select {
					color: ${a.text};
					background-color: ${a.background};
				}
				button, input[type="submit"], ::-webkit-file-upload-button {
					color: ${a.text};
					background-color: ${a.bgLowContrast};
					border: 1px solid ${a.bgHighContrast};
				}
				input[type="radio"] {
					appearance: none;
					width: 1em;
					height: 1em;
					border: 1px solid ${a.bgHighContrast};
					border-radius: 50%;
					background-clip: content-box;
					padding: 2px;
				}
				input[type="radio"]:checked {
					background-color: ${a.accent};
				}
				input[type="checkbox"] {
					appearance: none;
					width: 1em;
					height: 1em;
					border: 1px solid ${a.bgHighContrast};
					border-radius: 1px;
					background-clip: content-box;
					padding: 2px;
				}
				input[type="checkbox"]:checked:after {
					content: '\\2714';
					color: ${a.accent};
					position: absolute;
					font-size: 22px;
					top: -6px;
					left: -2px;
				}
				input[type="range"] {
					appearance: none;
					background-color: transparent;
					border: 1px solid ${a.bgHighContrast};
					vertical-align: middle;
					height: 0.9em;
					border-radius: 0.45em;
					overflow: hidden;
					padding: 0.05em;
				}
				input[type="range"]::-webkit-slider-thumb {
					appearance: none;
					background-color: ${a.accent};
					width: 0.8em;
					height: 0.8em;
					border-radius: 0.4em;
				}
				.help-tooltip {
				    color: ${a.text};
				    background-color: ${a.tipBackground};
				    opacity: 0.98;
				    max-width: 300px;
				    outline: 1px solid ${a.bgHighContrast};
				    transition: none;
				    font-size: 100%;
				    z-index: 10;
				}
			`}),u.jsx(Pa.Provider,{value:this.state.colorTheme,children:u.jsxs("div",{style:l,id:"globalHelpTooltipAnchor",children:[u.jsx("div",{style:{flex:1,overflowY:"scroll",overscrollBehaviorY:"contain"},children:u.jsxs("div",{style:{position:"relative",maxWidth:1060,margin:"0 auto",marginTop:40},children:[u.jsx(r1,{}),u.jsx(dv,{setColorTheme:this.setColorTheme}),u.jsxs("div",{children:[u.jsx("h3",{style:{marginTop:20,marginBottom:6},children:"XIV in the Shell"}),_({en:u.jsxs("div",{style:{marginBottom:16},children:["Last updated: ",$A()," (see ",u.jsx("b",{children:"Changelog"}),")"]}),zh:u.jsxs("div",{style:{marginBottom:16},children:["最近更新（月日年）：",$A(),"（详见",u.jsx("b",{children:"更新日志"}),"）"]}),ja:u.jsxs("div",{style:{marginBottom:16},children:["最終更新日：",i1($A()),"（",u.jsx("b",{children:"更新履歴"}),"を参照）（",u.jsx("a",{href:"https://coda.io/d/_d-N3WFoMZ8e/Black-Mage-in-the-Shell_suRLF",children:"ロードマップ"}),"）"]})}),qy()?u.jsx("div",{style:{margin:"10px 0",padding:"10px",border:"1px solid "+a.warning,color:a.warning,borderRadius:4},children:_({en:u.jsxs("div",{children:["NOTE: Your browser cache contains data from BLM in the Shell before it's updated for Dawntrail. Visit the Endwalker archive at"," ",u.jsx("a",{style:{color:a.warning},href:"https://miyehn.me/ffxiv-blm-rotation-endwalker",children:"miyehn.me/ffxiv-blm-rotation-endwalker"})," ","to access and automatically re-save it. Once you do that, this notice will also go away."]}),zh:u.jsxs("div",{children:["提示：你的浏览器缓存里有排轴器更新到7.0前的数据，它们在这里已经不可用。请访问6.0历史版本（链接：",u.jsx("a",{style:{color:a.warning},href:"https://miyehn.me/ffxiv-blm-rotation-endwalker",children:"miyehn.me/ffxiv-blm-rotation-endwalker"}),"），数据会在那边被重新自动保存。访问过一次后，这个提示也会消失。"]})})}):void 0,u.jsx(JG,{job:this.state.job}),u.jsx(qo,{defaultShow:!0,title:"7-2-user-survey",titleNode:u.jsx("span",{children:_({en:"7.2 User Survey",zh:"7.2用户体验调查"})}),content:u.jsx(aw,{children:_({en:u.jsx(u.Fragment,{children:u.jsxs("p",{children:["Help us improve XIV in the Shell! Please take our user survey:"," ",u.jsx("b",{children:u.jsx("a",{target:"_blank",rel:"noreferrer",href:"https://forms.gle/eKVygxxZVd894323A",children:"https://forms.gle/eKVygxxZVd894323A"})})]})}),zh:u.jsx(u.Fragment,{children:u.jsxs("p",{children:["帮我们改进排轴器！请参加我们的用户体验调查："," ",u.jsx("b",{children:u.jsx("a",{target:"_blank",rel:"noreferrer",href:"https://www.wjx.cn/vm/mQ1gV2b.aspx",children:"https://www.wjx.cn/vm/mQ1gV2b.aspx"})})]})})})})})]}),u.jsxs("div",{style:{display:"flex",flexDirection:"row",position:"relative",marginBottom:"20px"},children:[c,u.jsx(nw,{height:this.state.controlRegionHeight})]}),u.jsx(fN,{}),u.jsx("hr",{style:{margin:"30px 0px",border:"none",borderTop:"1px solid "+a.bgHighContrast}}),u.jsx(e0,{})]})}),u.jsx(eG,{})]})})]})}}const lw=Vy.createRoot(document.getElementById("root")),ow=new URLSearchParams(document.location.search),PI=Array.from(ow.keys());lw.render(u.jsx(iw,{command:PI.length>0?PI[0]:void 0}));
