var DM=Object.defineProperty;var IN=e=>{throw TypeError(e)};var yM=(e,t,n)=>t in e?DM(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Z=(e,t,n)=>yM(e,typeof t!="symbol"?t+"":t,n),ym=(e,t,n)=>t.has(e)||IN("Cannot "+n);var ie=(e,t,n)=>(ym(e,t,"read from private field"),n?n.call(e):t.get(e)),Fe=(e,t,n)=>t.has(e)?IN("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Me=(e,t,n,o)=>(ym(e,t,"write to private field"),o?o.call(e,n):t.set(e,n),n),pe=(e,t,n)=>(ym(e,t,"access private method"),n);function vM(e,t){for(var n=0;n<t.length;n++){const o=t[n];if(typeof o!="string"&&!Array.isArray(o)){for(const l in o)if(l!=="default"&&!(l in e)){const r=Object.getOwnPropertyDescriptor(o,l);r&&Object.defineProperty(e,l,r.get?r:{enumerable:!0,get:()=>o[l]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const r of l)if(r.type==="childList")for(const d of r.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function n(l){const r={};return l.integrity&&(r.integrity=l.integrity),l.referrerPolicy&&(r.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?r.credentials="include":l.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(l){if(l.ep)return;l.ep=!0;const r=n(l);fetch(l.href,r)}})();function nT(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function MM(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function o(){return this instanceof o?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(o){var l=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(n,o,l.get?l:{enumerable:!0,get:function(){return e[o]}})}),n}var vm={exports:{}},hu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _N;function LM(){if(_N)return hu;_N=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(o,l,r){var d=null;if(r!==void 0&&(d=""+r),l.key!==void 0&&(d=""+l.key),"key"in l){r={};for(var h in l)h!=="key"&&(r[h]=l[h])}else r=l;return l=r.ref,{$$typeof:e,type:o,key:d,ref:l!==void 0?l:null,props:r}}return hu.Fragment=t,hu.jsx=n,hu.jsxs=n,hu}var gN;function HM(){return gN||(gN=1,vm.exports=LM()),vm.exports}var u=HM(),Mm={exports:{}},fu={},Lm={exports:{}},Hm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NN;function UM(){return NN||(NN=1,function(e){function t(Y,P){var K=Y.length;Y.push(P);e:for(;0<K;){var W=K-1>>>1,D=Y[W];if(0<l(D,P))Y[W]=P,Y[K]=D,K=W;else break e}}function n(Y){return Y.length===0?null:Y[0]}function o(Y){if(Y.length===0)return null;var P=Y[0],K=Y.pop();if(K!==P){Y[0]=K;e:for(var W=0,D=Y.length,j=D>>>1;W<j;){var F=2*(W+1)-1,G=Y[F],J=F+1,Ee=Y[J];if(0>l(G,K))J<D&&0>l(Ee,G)?(Y[W]=Ee,Y[J]=K,W=J):(Y[W]=G,Y[F]=K,W=F);else if(J<D&&0>l(Ee,K))Y[W]=Ee,Y[J]=K,W=J;else break e}}return P}function l(Y,P){var K=Y.sortIndex-P.sortIndex;return K!==0?K:Y.id-P.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;e.unstable_now=function(){return r.now()}}else{var d=Date,h=d.now();e.unstable_now=function(){return d.now()-h}}var E=[],A=[],R=1,T=null,S=3,I=!1,p=!1,_=!1,b=!1,v=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function M(Y){for(var P=n(A);P!==null;){if(P.callback===null)o(A);else if(P.startTime<=Y)o(A),P.sortIndex=P.expirationTime,t(E,P);else break;P=n(A)}}function B(Y){if(_=!1,M(Y),!p)if(n(E)!==null)p=!0,w||(w=!0,de());else{var P=n(A);P!==null&&ee(B,P.startTime-Y)}}var w=!1,x=-1,Q=5,oe=-1;function he(){return b?!0:!(e.unstable_now()-oe<Q)}function ue(){if(b=!1,w){var Y=e.unstable_now();oe=Y;var P=!0;try{e:{p=!1,_&&(_=!1,L(x),x=-1),I=!0;var K=S;try{t:{for(M(Y),T=n(E);T!==null&&!(T.expirationTime>Y&&he());){var W=T.callback;if(typeof W=="function"){T.callback=null,S=T.priorityLevel;var D=W(T.expirationTime<=Y);if(Y=e.unstable_now(),typeof D=="function"){T.callback=D,M(Y),P=!0;break t}T===n(E)&&o(E),M(Y)}else o(E);T=n(E)}if(T!==null)P=!0;else{var j=n(A);j!==null&&ee(B,j.startTime-Y),P=!1}}break e}finally{T=null,S=K,I=!1}P=void 0}}finally{P?de():w=!1}}}var de;if(typeof k=="function")de=function(){k(ue)};else if(typeof MessageChannel<"u"){var fe=new MessageChannel,$=fe.port2;fe.port1.onmessage=ue,de=function(){$.postMessage(null)}}else de=function(){v(ue,0)};function ee(Y,P){x=v(function(){Y(e.unstable_now())},P)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Y){Y.callback=null},e.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Q=0<Y?Math.floor(1e3/Y):5},e.unstable_getCurrentPriorityLevel=function(){return S},e.unstable_next=function(Y){switch(S){case 1:case 2:case 3:var P=3;break;default:P=S}var K=S;S=P;try{return Y()}finally{S=K}},e.unstable_requestPaint=function(){b=!0},e.unstable_runWithPriority=function(Y,P){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var K=S;S=Y;try{return P()}finally{S=K}},e.unstable_scheduleCallback=function(Y,P,K){var W=e.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?W+K:W):K=W,Y){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=K+D,Y={id:R++,callback:P,priorityLevel:Y,startTime:K,expirationTime:D,sortIndex:-1},K>W?(Y.sortIndex=K,t(A,Y),n(E)===null&&Y===n(A)&&(_?(L(x),x=-1):_=!0,ee(B,K-W))):(Y.sortIndex=D,t(E,Y),p||I||(p=!0,w||(w=!0,de()))),Y},e.unstable_shouldYield=he,e.unstable_wrapCallback=function(Y){var P=S;return function(){var K=S;S=P;try{return Y.apply(this,arguments)}finally{S=K}}}}(Hm)),Hm}var pN;function kM(){return pN||(pN=1,Lm.exports=UM()),Lm.exports}var Um={exports:{}},qe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CN;function xM(){if(CN)return qe;CN=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),r=Symbol.for("react.consumer"),d=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),A=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),T=Symbol.iterator;function S(D){return D===null||typeof D!="object"?null:(D=T&&D[T]||D["@@iterator"],typeof D=="function"?D:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,_={};function b(D,j,F){this.props=D,this.context=j,this.refs=_,this.updater=F||I}b.prototype.isReactComponent={},b.prototype.setState=function(D,j){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,j,"setState")},b.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function v(){}v.prototype=b.prototype;function L(D,j,F){this.props=D,this.context=j,this.refs=_,this.updater=F||I}var k=L.prototype=new v;k.constructor=L,p(k,b.prototype),k.isPureReactComponent=!0;var M=Array.isArray,B={H:null,A:null,T:null,S:null,V:null},w=Object.prototype.hasOwnProperty;function x(D,j,F,G,J,Ee){return F=Ee.ref,{$$typeof:e,type:D,key:j,ref:F!==void 0?F:null,props:Ee}}function Q(D,j){return x(D.type,j,void 0,void 0,void 0,D.props)}function oe(D){return typeof D=="object"&&D!==null&&D.$$typeof===e}function he(D){var j={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(F){return j[F]})}var ue=/\/+/g;function de(D,j){return typeof D=="object"&&D!==null&&D.key!=null?he(""+D.key):j.toString(36)}function fe(){}function $(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(fe,fe):(D.status="pending",D.then(function(j){D.status==="pending"&&(D.status="fulfilled",D.value=j)},function(j){D.status==="pending"&&(D.status="rejected",D.reason=j)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function ee(D,j,F,G,J){var Ee=typeof D;(Ee==="undefined"||Ee==="boolean")&&(D=null);var re=!1;if(D===null)re=!0;else switch(Ee){case"bigint":case"string":case"number":re=!0;break;case"object":switch(D.$$typeof){case e:case t:re=!0;break;case R:return re=D._init,ee(re(D._payload),j,F,G,J)}}if(re)return J=J(D),re=G===""?"."+de(D,0):G,M(J)?(F="",re!=null&&(F=re.replace(ue,"$&/")+"/"),ee(J,j,F,"",function(Ce){return Ce})):J!=null&&(oe(J)&&(J=Q(J,F+(J.key==null||D&&D.key===J.key?"":(""+J.key).replace(ue,"$&/")+"/")+re)),j.push(J)),1;re=0;var Ae=G===""?".":G+":";if(M(D))for(var Re=0;Re<D.length;Re++)G=D[Re],Ee=Ae+de(G,Re),re+=ee(G,j,F,Ee,J);else if(Re=S(D),typeof Re=="function")for(D=Re.call(D),Re=0;!(G=D.next()).done;)G=G.value,Ee=Ae+de(G,Re++),re+=ee(G,j,F,Ee,J);else if(Ee==="object"){if(typeof D.then=="function")return ee($(D),j,F,G,J);throw j=String(D),Error("Objects are not valid as a React child (found: "+(j==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":j)+"). If you meant to render a collection of children, use an array instead.")}return re}function Y(D,j,F){if(D==null)return D;var G=[],J=0;return ee(D,G,"","",function(Ee){return j.call(F,Ee,J++)}),G}function P(D){if(D._status===-1){var j=D._result;j=j(),j.then(function(F){(D._status===0||D._status===-1)&&(D._status=1,D._result=F)},function(F){(D._status===0||D._status===-1)&&(D._status=2,D._result=F)}),D._status===-1&&(D._status=0,D._result=j)}if(D._status===1)return D._result.default;throw D._result}var K=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var j=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(j))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)};function W(){}return qe.Children={map:Y,forEach:function(D,j,F){Y(D,function(){j.apply(this,arguments)},F)},count:function(D){var j=0;return Y(D,function(){j++}),j},toArray:function(D){return Y(D,function(j){return j})||[]},only:function(D){if(!oe(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},qe.Component=b,qe.Fragment=n,qe.Profiler=l,qe.PureComponent=L,qe.StrictMode=o,qe.Suspense=E,qe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=B,qe.__COMPILER_RUNTIME={__proto__:null,c:function(D){return B.H.useMemoCache(D)}},qe.cache=function(D){return function(){return D.apply(null,arguments)}},qe.cloneElement=function(D,j,F){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var G=p({},D.props),J=D.key,Ee=void 0;if(j!=null)for(re in j.ref!==void 0&&(Ee=void 0),j.key!==void 0&&(J=""+j.key),j)!w.call(j,re)||re==="key"||re==="__self"||re==="__source"||re==="ref"&&j.ref===void 0||(G[re]=j[re]);var re=arguments.length-2;if(re===1)G.children=F;else if(1<re){for(var Ae=Array(re),Re=0;Re<re;Re++)Ae[Re]=arguments[Re+2];G.children=Ae}return x(D.type,J,void 0,void 0,Ee,G)},qe.createContext=function(D){return D={$$typeof:d,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:r,_context:D},D},qe.createElement=function(D,j,F){var G,J={},Ee=null;if(j!=null)for(G in j.key!==void 0&&(Ee=""+j.key),j)w.call(j,G)&&G!=="key"&&G!=="__self"&&G!=="__source"&&(J[G]=j[G]);var re=arguments.length-2;if(re===1)J.children=F;else if(1<re){for(var Ae=Array(re),Re=0;Re<re;Re++)Ae[Re]=arguments[Re+2];J.children=Ae}if(D&&D.defaultProps)for(G in re=D.defaultProps,re)J[G]===void 0&&(J[G]=re[G]);return x(D,Ee,void 0,void 0,null,J)},qe.createRef=function(){return{current:null}},qe.forwardRef=function(D){return{$$typeof:h,render:D}},qe.isValidElement=oe,qe.lazy=function(D){return{$$typeof:R,_payload:{_status:-1,_result:D},_init:P}},qe.memo=function(D,j){return{$$typeof:A,type:D,compare:j===void 0?null:j}},qe.startTransition=function(D){var j=B.T,F={};B.T=F;try{var G=D(),J=B.S;J!==null&&J(F,G),typeof G=="object"&&G!==null&&typeof G.then=="function"&&G.then(W,K)}catch(Ee){K(Ee)}finally{B.T=j}},qe.unstable_useCacheRefresh=function(){return B.H.useCacheRefresh()},qe.use=function(D){return B.H.use(D)},qe.useActionState=function(D,j,F){return B.H.useActionState(D,j,F)},qe.useCallback=function(D,j){return B.H.useCallback(D,j)},qe.useContext=function(D){return B.H.useContext(D)},qe.useDebugValue=function(){},qe.useDeferredValue=function(D,j){return B.H.useDeferredValue(D,j)},qe.useEffect=function(D,j,F){var G=B.H;if(typeof F=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return G.useEffect(D,j)},qe.useId=function(){return B.H.useId()},qe.useImperativeHandle=function(D,j,F){return B.H.useImperativeHandle(D,j,F)},qe.useInsertionEffect=function(D,j){return B.H.useInsertionEffect(D,j)},qe.useLayoutEffect=function(D,j){return B.H.useLayoutEffect(D,j)},qe.useMemo=function(D,j){return B.H.useMemo(D,j)},qe.useOptimistic=function(D,j){return B.H.useOptimistic(D,j)},qe.useReducer=function(D,j,F){return B.H.useReducer(D,j,F)},qe.useRef=function(D){return B.H.useRef(D)},qe.useState=function(D){return B.H.useState(D)},qe.useSyncExternalStore=function(D,j,F){return B.H.useSyncExternalStore(D,j,F)},qe.useTransition=function(){return B.H.useTransition()},qe.version="19.1.0",qe}var ON;function iT(){return ON||(ON=1,Um.exports=xM()),Um.exports}var km={exports:{}},an={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bN;function PM(){if(bN)return an;bN=1;var e=iT();function t(E){var A="https://react.dev/errors/"+E;if(1<arguments.length){A+="?args[]="+encodeURIComponent(arguments[1]);for(var R=2;R<arguments.length;R++)A+="&args[]="+encodeURIComponent(arguments[R])}return"Minified React error #"+E+"; visit "+A+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var o={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function r(E,A,R){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:T==null?null:""+T,children:E,containerInfo:A,implementation:R}}var d=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(E,A){if(E==="font")return"";if(typeof A=="string")return A==="use-credentials"?A:""}return an.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,an.createPortal=function(E,A){var R=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!A||A.nodeType!==1&&A.nodeType!==9&&A.nodeType!==11)throw Error(t(299));return r(E,A,null,R)},an.flushSync=function(E){var A=d.T,R=o.p;try{if(d.T=null,o.p=2,E)return E()}finally{d.T=A,o.p=R,o.d.f()}},an.preconnect=function(E,A){typeof E=="string"&&(A?(A=A.crossOrigin,A=typeof A=="string"?A==="use-credentials"?A:"":void 0):A=null,o.d.C(E,A))},an.prefetchDNS=function(E){typeof E=="string"&&o.d.D(E)},an.preinit=function(E,A){if(typeof E=="string"&&A&&typeof A.as=="string"){var R=A.as,T=h(R,A.crossOrigin),S=typeof A.integrity=="string"?A.integrity:void 0,I=typeof A.fetchPriority=="string"?A.fetchPriority:void 0;R==="style"?o.d.S(E,typeof A.precedence=="string"?A.precedence:void 0,{crossOrigin:T,integrity:S,fetchPriority:I}):R==="script"&&o.d.X(E,{crossOrigin:T,integrity:S,fetchPriority:I,nonce:typeof A.nonce=="string"?A.nonce:void 0})}},an.preinitModule=function(E,A){if(typeof E=="string")if(typeof A=="object"&&A!==null){if(A.as==null||A.as==="script"){var R=h(A.as,A.crossOrigin);o.d.M(E,{crossOrigin:R,integrity:typeof A.integrity=="string"?A.integrity:void 0,nonce:typeof A.nonce=="string"?A.nonce:void 0})}}else A==null&&o.d.M(E)},an.preload=function(E,A){if(typeof E=="string"&&typeof A=="object"&&A!==null&&typeof A.as=="string"){var R=A.as,T=h(R,A.crossOrigin);o.d.L(E,R,{crossOrigin:T,integrity:typeof A.integrity=="string"?A.integrity:void 0,nonce:typeof A.nonce=="string"?A.nonce:void 0,type:typeof A.type=="string"?A.type:void 0,fetchPriority:typeof A.fetchPriority=="string"?A.fetchPriority:void 0,referrerPolicy:typeof A.referrerPolicy=="string"?A.referrerPolicy:void 0,imageSrcSet:typeof A.imageSrcSet=="string"?A.imageSrcSet:void 0,imageSizes:typeof A.imageSizes=="string"?A.imageSizes:void 0,media:typeof A.media=="string"?A.media:void 0})}},an.preloadModule=function(E,A){if(typeof E=="string")if(A){var R=h(A.as,A.crossOrigin);o.d.m(E,{as:typeof A.as=="string"&&A.as!=="script"?A.as:void 0,crossOrigin:R,integrity:typeof A.integrity=="string"?A.integrity:void 0})}else o.d.m(E)},an.requestFormReset=function(E){o.d.r(E)},an.unstable_batchedUpdates=function(E,A){return E(A)},an.useFormState=function(E,A,R){return d.H.useFormState(E,A,R)},an.useFormStatus=function(){return d.H.useHostTransitionStatus()},an.version="19.1.0",an}var DN;function pC(){if(DN)return km.exports;DN=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),km.exports=PM(),km.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yN;function wM(){if(yN)return fu;yN=1;var e=kM(),t=iT(),n=pC();function o(a){var i="https://react.dev/errors/"+a;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)i+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+a+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function r(a){var i=a,s=a;if(a.alternate)for(;i.return;)i=i.return;else{a=i;do i=a,(i.flags&4098)!==0&&(s=i.return),a=i.return;while(a)}return i.tag===3?s:null}function d(a){if(a.tag===13){var i=a.memoizedState;if(i===null&&(a=a.alternate,a!==null&&(i=a.memoizedState)),i!==null)return i.dehydrated}return null}function h(a){if(r(a)!==a)throw Error(o(188))}function E(a){var i=a.alternate;if(!i){if(i=r(a),i===null)throw Error(o(188));return i!==a?null:a}for(var s=a,c=i;;){var f=s.return;if(f===null)break;var m=f.alternate;if(m===null){if(c=f.return,c!==null){s=c;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===s)return h(f),a;if(m===c)return h(f),i;m=m.sibling}throw Error(o(188))}if(s.return!==c.return)s=f,c=m;else{for(var g=!1,y=f.child;y;){if(y===s){g=!0,s=f,c=m;break}if(y===c){g=!0,c=f,s=m;break}y=y.sibling}if(!g){for(y=m.child;y;){if(y===s){g=!0,s=m,c=f;break}if(y===c){g=!0,c=m,s=f;break}y=y.sibling}if(!g)throw Error(o(189))}}if(s.alternate!==c)throw Error(o(190))}if(s.tag!==3)throw Error(o(188));return s.stateNode.current===s?a:i}function A(a){var i=a.tag;if(i===5||i===26||i===27||i===6)return a;for(a=a.child;a!==null;){if(i=A(a),i!==null)return i;a=a.sibling}return null}var R=Object.assign,T=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),I=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),v=Symbol.for("react.provider"),L=Symbol.for("react.consumer"),k=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),w=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),Q=Symbol.for("react.lazy"),oe=Symbol.for("react.activity"),he=Symbol.for("react.memo_cache_sentinel"),ue=Symbol.iterator;function de(a){return a===null||typeof a!="object"?null:(a=ue&&a[ue]||a["@@iterator"],typeof a=="function"?a:null)}var fe=Symbol.for("react.client.reference");function $(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===fe?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case p:return"Fragment";case b:return"Profiler";case _:return"StrictMode";case B:return"Suspense";case w:return"SuspenseList";case oe:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case I:return"Portal";case k:return(a.displayName||"Context")+".Provider";case L:return(a._context.displayName||"Context")+".Consumer";case M:var i=a.render;return a=a.displayName,a||(a=i.displayName||i.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case x:return i=a.displayName||null,i!==null?i:$(a.type)||"Memo";case Q:i=a._payload,a=a._init;try{return $(a(i))}catch{}}return null}var ee=Array.isArray,Y=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K={pending:!1,data:null,method:null,action:null},W=[],D=-1;function j(a){return{current:a}}function F(a){0>D||(a.current=W[D],W[D]=null,D--)}function G(a,i){D++,W[D]=a.current,a.current=i}var J=j(null),Ee=j(null),re=j(null),Ae=j(null);function Re(a,i){switch(G(re,i),G(Ee,a),G(J,null),i.nodeType){case 9:case 11:a=(a=i.documentElement)&&(a=a.namespaceURI)?Xg(a):0;break;default:if(a=i.tagName,i=i.namespaceURI)i=Xg(i),a=qg(i,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}F(J),G(J,a)}function Ce(){F(J),F(Ee),F(re)}function xe(a){a.memoizedState!==null&&G(Ae,a);var i=J.current,s=qg(i,a.type);i!==s&&(G(Ee,a),G(J,s))}function _e(a){Ee.current===a&&(F(J),F(Ee)),Ae.current===a&&(F(Ae),ru._currentValue=K)}var ge=Object.prototype.hasOwnProperty,le=e.unstable_scheduleCallback,Ne=e.unstable_cancelCallback,Le=e.unstable_shouldYield,Xe=e.unstable_requestPaint,Ze=e.unstable_now,Qe=e.unstable_getCurrentPriorityLevel,Ke=e.unstable_ImmediatePriority,At=e.unstable_UserBlockingPriority,Qt=e.unstable_NormalPriority,wl=e.unstable_LowPriority,xs=e.unstable_IdlePriority,ld=e.log,sd=e.unstable_setDisableYieldValue,mc=null,Gn=null;function Fo(a){if(typeof ld=="function"&&sd(a),Gn&&typeof Gn.setStrictMode=="function")try{Gn.setStrictMode(mc,a)}catch{}}var Bn=Math.clz32?Math.clz32:fy,Ey=Math.log,hy=Math.LN2;function fy(a){return a>>>=0,a===0?32:31-(Ey(a)/hy|0)|0}var rd=256,cd=4194304;function Gl(a){var i=a&42;if(i!==0)return i;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function ud(a,i,s){var c=a.pendingLanes;if(c===0)return 0;var f=0,m=a.suspendedLanes,g=a.pingedLanes;a=a.warmLanes;var y=c&134217727;return y!==0?(c=y&~m,c!==0?f=Gl(c):(g&=y,g!==0?f=Gl(g):s||(s=y&~a,s!==0&&(f=Gl(s))))):(y=c&~m,y!==0?f=Gl(y):g!==0?f=Gl(g):s||(s=c&~a,s!==0&&(f=Gl(s)))),f===0?0:i!==0&&i!==f&&(i&m)===0&&(m=f&-f,s=i&-i,m>=s||m===32&&(s&4194048)!==0)?i:f}function Rc(a,i){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&i)===0}function Ay(a,i){switch(a){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function MS(){var a=rd;return rd<<=1,(rd&4194048)===0&&(rd=256),a}function LS(){var a=cd;return cd<<=1,(cd&62914560)===0&&(cd=4194304),a}function Tf(a){for(var i=[],s=0;31>s;s++)i.push(a);return i}function Tc(a,i){a.pendingLanes|=i,i!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function my(a,i,s,c,f,m){var g=a.pendingLanes;a.pendingLanes=s,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=s,a.entangledLanes&=s,a.errorRecoveryDisabledLanes&=s,a.shellSuspendCounter=0;var y=a.entanglements,z=a.expirationTimes,ne=a.hiddenUpdates;for(s=g&~s;0<s;){var me=31-Bn(s),Se=1<<me;y[me]=0,z[me]=-1;var se=ne[me];if(se!==null)for(ne[me]=null,me=0;me<se.length;me++){var ce=se[me];ce!==null&&(ce.lane&=-536870913)}s&=~Se}c!==0&&HS(a,c,0),m!==0&&f===0&&a.tag!==0&&(a.suspendedLanes|=m&~(g&~i))}function HS(a,i,s){a.pendingLanes|=i,a.suspendedLanes&=~i;var c=31-Bn(i);a.entangledLanes|=i,a.entanglements[c]=a.entanglements[c]|1073741824|s&4194090}function US(a,i){var s=a.entangledLanes|=i;for(a=a.entanglements;s;){var c=31-Bn(s),f=1<<c;f&i|a[c]&i&&(a[c]|=i),s&=~f}}function Sf(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function If(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function kS(){var a=P.p;return a!==0?a:(a=window.event,a===void 0?32:fN(a.type))}function Ry(a,i){var s=P.p;try{return P.p=a,i()}finally{P.p=s}}var zo=Math.random().toString(36).slice(2),en="__reactFiber$"+zo,bn="__reactProps$"+zo,Ps="__reactContainer$"+zo,_f="__reactEvents$"+zo,Ty="__reactListeners$"+zo,Sy="__reactHandles$"+zo,xS="__reactResources$"+zo,Sc="__reactMarker$"+zo;function gf(a){delete a[en],delete a[bn],delete a[_f],delete a[Ty],delete a[Sy]}function ws(a){var i=a[en];if(i)return i;for(var s=a.parentNode;s;){if(i=s[Ps]||s[en]){if(s=i.alternate,i.child!==null||s!==null&&s.child!==null)for(a=Jg(a);a!==null;){if(s=a[en])return s;a=Jg(a)}return i}a=s,s=a.parentNode}return null}function Gs(a){if(a=a[en]||a[Ps]){var i=a.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return a}return null}function Ic(a){var i=a.tag;if(i===5||i===26||i===27||i===6)return a.stateNode;throw Error(o(33))}function Bs(a){var i=a[xS];return i||(i=a[xS]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Ma(a){a[Sc]=!0}var PS=new Set,wS={};function Bl(a,i){Fs(a,i),Fs(a+"Capture",i)}function Fs(a,i){for(wS[a]=i,a=0;a<i.length;a++)PS.add(i[a])}var Iy=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),GS={},BS={};function _y(a){return ge.call(BS,a)?!0:ge.call(GS,a)?!1:Iy.test(a)?BS[a]=!0:(GS[a]=!0,!1)}function dd(a,i,s){if(_y(i))if(s===null)a.removeAttribute(i);else{switch(typeof s){case"undefined":case"function":case"symbol":a.removeAttribute(i);return;case"boolean":var c=i.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){a.removeAttribute(i);return}}a.setAttribute(i,""+s)}}function Ed(a,i,s){if(s===null)a.removeAttribute(i);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(i);return}a.setAttribute(i,""+s)}}function ro(a,i,s,c){if(c===null)a.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(s);return}a.setAttributeNS(i,s,""+c)}}var Nf,FS;function zs(a){if(Nf===void 0)try{throw Error()}catch(s){var i=s.stack.trim().match(/\n( *(at )?)/);Nf=i&&i[1]||"",FS=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Nf+a+FS}var pf=!1;function Cf(a,i){if(!a||pf)return"";pf=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(i){var Se=function(){throw Error()};if(Object.defineProperty(Se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Se,[])}catch(ce){var se=ce}Reflect.construct(a,[],Se)}else{try{Se.call()}catch(ce){se=ce}a.call(Se.prototype)}}else{try{throw Error()}catch(ce){se=ce}(Se=a())&&typeof Se.catch=="function"&&Se.catch(function(){})}}catch(ce){if(ce&&se&&typeof ce.stack=="string")return[ce.stack,se.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=c.DetermineComponentFrameRoot(),g=m[0],y=m[1];if(g&&y){var z=g.split(`
`),ne=y.split(`
`);for(f=c=0;c<z.length&&!z[c].includes("DetermineComponentFrameRoot");)c++;for(;f<ne.length&&!ne[f].includes("DetermineComponentFrameRoot");)f++;if(c===z.length||f===ne.length)for(c=z.length-1,f=ne.length-1;1<=c&&0<=f&&z[c]!==ne[f];)f--;for(;1<=c&&0<=f;c--,f--)if(z[c]!==ne[f]){if(c!==1||f!==1)do if(c--,f--,0>f||z[c]!==ne[f]){var me=`
`+z[c].replace(" at new "," at ");return a.displayName&&me.includes("<anonymous>")&&(me=me.replace("<anonymous>",a.displayName)),me}while(1<=c&&0<=f);break}}}finally{pf=!1,Error.prepareStackTrace=s}return(s=a?a.displayName||a.name:"")?zs(s):""}function gy(a){switch(a.tag){case 26:case 27:case 5:return zs(a.type);case 16:return zs("Lazy");case 13:return zs("Suspense");case 19:return zs("SuspenseList");case 0:case 15:return Cf(a.type,!1);case 11:return Cf(a.type.render,!1);case 1:return Cf(a.type,!0);case 31:return zs("Activity");default:return""}}function zS(a){try{var i="";do i+=gy(a),a=a.return;while(a);return i}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}function ti(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function jS(a){var i=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Ny(a){var i=jS(a)?"checked":"value",s=Object.getOwnPropertyDescriptor(a.constructor.prototype,i),c=""+a[i];if(!a.hasOwnProperty(i)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var f=s.get,m=s.set;return Object.defineProperty(a,i,{configurable:!0,get:function(){return f.call(this)},set:function(g){c=""+g,m.call(this,g)}}),Object.defineProperty(a,i,{enumerable:s.enumerable}),{getValue:function(){return c},setValue:function(g){c=""+g},stopTracking:function(){a._valueTracker=null,delete a[i]}}}}function hd(a){a._valueTracker||(a._valueTracker=Ny(a))}function YS(a){if(!a)return!1;var i=a._valueTracker;if(!i)return!0;var s=i.getValue(),c="";return a&&(c=jS(a)?a.checked?"true":"false":a.value),a=c,a!==s?(i.setValue(a),!0):!1}function fd(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var py=/[\n"\\]/g;function ai(a){return a.replace(py,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Of(a,i,s,c,f,m,g,y){a.name="",g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"?a.type=g:a.removeAttribute("type"),i!=null?g==="number"?(i===0&&a.value===""||a.value!=i)&&(a.value=""+ti(i)):a.value!==""+ti(i)&&(a.value=""+ti(i)):g!=="submit"&&g!=="reset"||a.removeAttribute("value"),i!=null?bf(a,g,ti(i)):s!=null?bf(a,g,ti(s)):c!=null&&a.removeAttribute("value"),f==null&&m!=null&&(a.defaultChecked=!!m),f!=null&&(a.checked=f&&typeof f!="function"&&typeof f!="symbol"),y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?a.name=""+ti(y):a.removeAttribute("name")}function KS(a,i,s,c,f,m,g,y){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(a.type=m),i!=null||s!=null){if(!(m!=="submit"&&m!=="reset"||i!=null))return;s=s!=null?""+ti(s):"",i=i!=null?""+ti(i):s,y||i===a.value||(a.value=i),a.defaultValue=i}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,a.checked=y?a.checked:!!c,a.defaultChecked=!!c,g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(a.name=g)}function bf(a,i,s){i==="number"&&fd(a.ownerDocument)===a||a.defaultValue===""+s||(a.defaultValue=""+s)}function js(a,i,s,c){if(a=a.options,i){i={};for(var f=0;f<s.length;f++)i["$"+s[f]]=!0;for(s=0;s<a.length;s++)f=i.hasOwnProperty("$"+a[s].value),a[s].selected!==f&&(a[s].selected=f),f&&c&&(a[s].defaultSelected=!0)}else{for(s=""+ti(s),i=null,f=0;f<a.length;f++){if(a[f].value===s){a[f].selected=!0,c&&(a[f].defaultSelected=!0);return}i!==null||a[f].disabled||(i=a[f])}i!==null&&(i.selected=!0)}}function VS(a,i,s){if(i!=null&&(i=""+ti(i),i!==a.value&&(a.value=i),s==null)){a.defaultValue!==i&&(a.defaultValue=i);return}a.defaultValue=s!=null?""+ti(s):""}function WS(a,i,s,c){if(i==null){if(c!=null){if(s!=null)throw Error(o(92));if(ee(c)){if(1<c.length)throw Error(o(93));c=c[0]}s=c}s==null&&(s=""),i=s}s=ti(i),a.defaultValue=s,c=a.textContent,c===s&&c!==""&&c!==null&&(a.value=c)}function Ys(a,i){if(i){var s=a.firstChild;if(s&&s===a.lastChild&&s.nodeType===3){s.nodeValue=i;return}}a.textContent=i}var Cy=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function XS(a,i,s){var c=i.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?c?a.setProperty(i,""):i==="float"?a.cssFloat="":a[i]="":c?a.setProperty(i,s):typeof s!="number"||s===0||Cy.has(i)?i==="float"?a.cssFloat=s:a[i]=(""+s).trim():a[i]=s+"px"}function qS(a,i,s){if(i!=null&&typeof i!="object")throw Error(o(62));if(a=a.style,s!=null){for(var c in s)!s.hasOwnProperty(c)||i!=null&&i.hasOwnProperty(c)||(c.indexOf("--")===0?a.setProperty(c,""):c==="float"?a.cssFloat="":a[c]="");for(var f in i)c=i[f],i.hasOwnProperty(f)&&s[f]!==c&&XS(a,f,c)}else for(var m in i)i.hasOwnProperty(m)&&XS(a,m,i[m])}function Df(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Oy=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),by=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ad(a){return by.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var yf=null;function vf(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Ks=null,Vs=null;function ZS(a){var i=Gs(a);if(i&&(a=i.stateNode)){var s=a[bn]||null;e:switch(a=i.stateNode,i.type){case"input":if(Of(a,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),i=s.name,s.type==="radio"&&i!=null){for(s=a;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+ai(""+i)+'"][type="radio"]'),i=0;i<s.length;i++){var c=s[i];if(c!==a&&c.form===a.form){var f=c[bn]||null;if(!f)throw Error(o(90));Of(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<s.length;i++)c=s[i],c.form===a.form&&YS(c)}break e;case"textarea":VS(a,s.value,s.defaultValue);break e;case"select":i=s.value,i!=null&&js(a,!!s.multiple,i,!1)}}}var Mf=!1;function QS(a,i,s){if(Mf)return a(i,s);Mf=!0;try{var c=a(i);return c}finally{if(Mf=!1,(Ks!==null||Vs!==null)&&(eE(),Ks&&(i=Ks,a=Vs,Vs=Ks=null,ZS(i),a)))for(i=0;i<a.length;i++)ZS(a[i])}}function _c(a,i){var s=a.stateNode;if(s===null)return null;var c=s[bn]||null;if(c===null)return null;s=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(a=a.type,c=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!c;break e;default:a=!1}if(a)return null;if(s&&typeof s!="function")throw Error(o(231,i,typeof s));return s}var co=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Lf=!1;if(co)try{var gc={};Object.defineProperty(gc,"passive",{get:function(){Lf=!0}}),window.addEventListener("test",gc,gc),window.removeEventListener("test",gc,gc)}catch{Lf=!1}var jo=null,Hf=null,md=null;function $S(){if(md)return md;var a,i=Hf,s=i.length,c,f="value"in jo?jo.value:jo.textContent,m=f.length;for(a=0;a<s&&i[a]===f[a];a++);var g=s-a;for(c=1;c<=g&&i[s-c]===f[m-c];c++);return md=f.slice(a,1<c?1-c:void 0)}function Rd(a){var i=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&i===13&&(a=13)):a=i,a===10&&(a=13),32<=a||a===13?a:0}function Td(){return!0}function JS(){return!1}function Dn(a){function i(s,c,f,m,g){this._reactName=s,this._targetInst=f,this.type=c,this.nativeEvent=m,this.target=g,this.currentTarget=null;for(var y in a)a.hasOwnProperty(y)&&(s=a[y],this[y]=s?s(m):m[y]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Td:JS,this.isPropagationStopped=JS,this}return R(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Td)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Td)},persist:function(){},isPersistent:Td}),i}var Fl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sd=Dn(Fl),Nc=R({},Fl,{view:0,detail:0}),Dy=Dn(Nc),Uf,kf,pc,Id=R({},Nc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pf,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==pc&&(pc&&a.type==="mousemove"?(Uf=a.screenX-pc.screenX,kf=a.screenY-pc.screenY):kf=Uf=0,pc=a),Uf)},movementY:function(a){return"movementY"in a?a.movementY:kf}}),eI=Dn(Id),yy=R({},Id,{dataTransfer:0}),vy=Dn(yy),My=R({},Nc,{relatedTarget:0}),xf=Dn(My),Ly=R({},Fl,{animationName:0,elapsedTime:0,pseudoElement:0}),Hy=Dn(Ly),Uy=R({},Fl,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),ky=Dn(Uy),xy=R({},Fl,{data:0}),tI=Dn(xy),Py={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function By(a){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(a):(a=Gy[a])?!!i[a]:!1}function Pf(){return By}var Fy=R({},Nc,{key:function(a){if(a.key){var i=Py[a.key]||a.key;if(i!=="Unidentified")return i}return a.type==="keypress"?(a=Rd(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?wy[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pf,charCode:function(a){return a.type==="keypress"?Rd(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Rd(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),zy=Dn(Fy),jy=R({},Id,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),aI=Dn(jy),Yy=R({},Nc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pf}),Ky=Dn(Yy),Vy=R({},Fl,{propertyName:0,elapsedTime:0,pseudoElement:0}),Wy=Dn(Vy),Xy=R({},Id,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),qy=Dn(Xy),Zy=R({},Fl,{newState:0,oldState:0}),Qy=Dn(Zy),$y=[9,13,27,32],wf=co&&"CompositionEvent"in window,Cc=null;co&&"documentMode"in document&&(Cc=document.documentMode);var Jy=co&&"TextEvent"in window&&!Cc,nI=co&&(!wf||Cc&&8<Cc&&11>=Cc),iI=" ",oI=!1;function lI(a,i){switch(a){case"keyup":return $y.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sI(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Ws=!1;function ev(a,i){switch(a){case"compositionend":return sI(i);case"keypress":return i.which!==32?null:(oI=!0,iI);case"textInput":return a=i.data,a===iI&&oI?null:a;default:return null}}function tv(a,i){if(Ws)return a==="compositionend"||!wf&&lI(a,i)?(a=$S(),md=Hf=jo=null,Ws=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return nI&&i.locale!=="ko"?null:i.data;default:return null}}var av={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rI(a){var i=a&&a.nodeName&&a.nodeName.toLowerCase();return i==="input"?!!av[a.type]:i==="textarea"}function cI(a,i,s,c){Ks?Vs?Vs.push(c):Vs=[c]:Ks=c,i=lE(i,"onChange"),0<i.length&&(s=new Sd("onChange","change",null,s,c),a.push({event:s,listeners:i}))}var Oc=null,bc=null;function nv(a){jg(a,0)}function _d(a){var i=Ic(a);if(YS(i))return a}function uI(a,i){if(a==="change")return i}var dI=!1;if(co){var Gf;if(co){var Bf="oninput"in document;if(!Bf){var EI=document.createElement("div");EI.setAttribute("oninput","return;"),Bf=typeof EI.oninput=="function"}Gf=Bf}else Gf=!1;dI=Gf&&(!document.documentMode||9<document.documentMode)}function hI(){Oc&&(Oc.detachEvent("onpropertychange",fI),bc=Oc=null)}function fI(a){if(a.propertyName==="value"&&_d(bc)){var i=[];cI(i,bc,a,vf(a)),QS(nv,i)}}function iv(a,i,s){a==="focusin"?(hI(),Oc=i,bc=s,Oc.attachEvent("onpropertychange",fI)):a==="focusout"&&hI()}function ov(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return _d(bc)}function lv(a,i){if(a==="click")return _d(i)}function sv(a,i){if(a==="input"||a==="change")return _d(i)}function rv(a,i){return a===i&&(a!==0||1/a===1/i)||a!==a&&i!==i}var Fn=typeof Object.is=="function"?Object.is:rv;function Dc(a,i){if(Fn(a,i))return!0;if(typeof a!="object"||a===null||typeof i!="object"||i===null)return!1;var s=Object.keys(a),c=Object.keys(i);if(s.length!==c.length)return!1;for(c=0;c<s.length;c++){var f=s[c];if(!ge.call(i,f)||!Fn(a[f],i[f]))return!1}return!0}function AI(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function mI(a,i){var s=AI(a);a=0;for(var c;s;){if(s.nodeType===3){if(c=a+s.textContent.length,a<=i&&c>=i)return{node:s,offset:i-a};a=c}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=AI(s)}}function RI(a,i){return a&&i?a===i?!0:a&&a.nodeType===3?!1:i&&i.nodeType===3?RI(a,i.parentNode):"contains"in a?a.contains(i):a.compareDocumentPosition?!!(a.compareDocumentPosition(i)&16):!1:!1}function TI(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var i=fd(a.document);i instanceof a.HTMLIFrameElement;){try{var s=typeof i.contentWindow.location.href=="string"}catch{s=!1}if(s)a=i.contentWindow;else break;i=fd(a.document)}return i}function Ff(a){var i=a&&a.nodeName&&a.nodeName.toLowerCase();return i&&(i==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||i==="textarea"||a.contentEditable==="true")}var cv=co&&"documentMode"in document&&11>=document.documentMode,Xs=null,zf=null,yc=null,jf=!1;function SI(a,i,s){var c=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;jf||Xs==null||Xs!==fd(c)||(c=Xs,"selectionStart"in c&&Ff(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),yc&&Dc(yc,c)||(yc=c,c=lE(zf,"onSelect"),0<c.length&&(i=new Sd("onSelect","select",null,i,s),a.push({event:i,listeners:c}),i.target=Xs)))}function zl(a,i){var s={};return s[a.toLowerCase()]=i.toLowerCase(),s["Webkit"+a]="webkit"+i,s["Moz"+a]="moz"+i,s}var qs={animationend:zl("Animation","AnimationEnd"),animationiteration:zl("Animation","AnimationIteration"),animationstart:zl("Animation","AnimationStart"),transitionrun:zl("Transition","TransitionRun"),transitionstart:zl("Transition","TransitionStart"),transitioncancel:zl("Transition","TransitionCancel"),transitionend:zl("Transition","TransitionEnd")},Yf={},II={};co&&(II=document.createElement("div").style,"AnimationEvent"in window||(delete qs.animationend.animation,delete qs.animationiteration.animation,delete qs.animationstart.animation),"TransitionEvent"in window||delete qs.transitionend.transition);function jl(a){if(Yf[a])return Yf[a];if(!qs[a])return a;var i=qs[a],s;for(s in i)if(i.hasOwnProperty(s)&&s in II)return Yf[a]=i[s];return a}var _I=jl("animationend"),gI=jl("animationiteration"),NI=jl("animationstart"),uv=jl("transitionrun"),dv=jl("transitionstart"),Ev=jl("transitioncancel"),pI=jl("transitionend"),CI=new Map,Kf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Kf.push("scrollEnd");function _i(a,i){CI.set(a,i),Bl(i,[a])}var OI=new WeakMap;function ni(a,i){if(typeof a=="object"&&a!==null){var s=OI.get(a);return s!==void 0?s:(i={value:a,source:i,stack:zS(i)},OI.set(a,i),i)}return{value:a,source:i,stack:zS(i)}}var ii=[],Zs=0,Vf=0;function gd(){for(var a=Zs,i=Vf=Zs=0;i<a;){var s=ii[i];ii[i++]=null;var c=ii[i];ii[i++]=null;var f=ii[i];ii[i++]=null;var m=ii[i];if(ii[i++]=null,c!==null&&f!==null){var g=c.pending;g===null?f.next=f:(f.next=g.next,g.next=f),c.pending=f}m!==0&&bI(s,f,m)}}function Nd(a,i,s,c){ii[Zs++]=a,ii[Zs++]=i,ii[Zs++]=s,ii[Zs++]=c,Vf|=c,a.lanes|=c,a=a.alternate,a!==null&&(a.lanes|=c)}function Wf(a,i,s,c){return Nd(a,i,s,c),pd(a)}function Qs(a,i){return Nd(a,null,null,i),pd(a)}function bI(a,i,s){a.lanes|=s;var c=a.alternate;c!==null&&(c.lanes|=s);for(var f=!1,m=a.return;m!==null;)m.childLanes|=s,c=m.alternate,c!==null&&(c.childLanes|=s),m.tag===22&&(a=m.stateNode,a===null||a._visibility&1||(f=!0)),a=m,m=m.return;return a.tag===3?(m=a.stateNode,f&&i!==null&&(f=31-Bn(s),a=m.hiddenUpdates,c=a[f],c===null?a[f]=[i]:c.push(i),i.lane=s|536870912),m):null}function pd(a){if(50<eu)throw eu=0,JA=null,Error(o(185));for(var i=a.return;i!==null;)a=i,i=a.return;return a.tag===3?a.stateNode:null}var $s={};function hv(a,i,s,c){this.tag=a,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zn(a,i,s,c){return new hv(a,i,s,c)}function Xf(a){return a=a.prototype,!(!a||!a.isReactComponent)}function uo(a,i){var s=a.alternate;return s===null?(s=zn(a.tag,i,a.key,a.mode),s.elementType=a.elementType,s.type=a.type,s.stateNode=a.stateNode,s.alternate=a,a.alternate=s):(s.pendingProps=i,s.type=a.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=a.flags&65011712,s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,i=a.dependencies,s.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},s.sibling=a.sibling,s.index=a.index,s.ref=a.ref,s.refCleanup=a.refCleanup,s}function DI(a,i){a.flags&=65011714;var s=a.alternate;return s===null?(a.childLanes=0,a.lanes=i,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,a.type=s.type,i=s.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),a}function Cd(a,i,s,c,f,m){var g=0;if(c=a,typeof a=="function")Xf(a)&&(g=1);else if(typeof a=="string")g=AM(a,s,J.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case oe:return a=zn(31,s,i,f),a.elementType=oe,a.lanes=m,a;case p:return Yl(s.children,f,m,i);case _:g=8,f|=24;break;case b:return a=zn(12,s,i,f|2),a.elementType=b,a.lanes=m,a;case B:return a=zn(13,s,i,f),a.elementType=B,a.lanes=m,a;case w:return a=zn(19,s,i,f),a.elementType=w,a.lanes=m,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case v:case k:g=10;break e;case L:g=9;break e;case M:g=11;break e;case x:g=14;break e;case Q:g=16,c=null;break e}g=29,s=Error(o(130,a===null?"null":typeof a,"")),c=null}return i=zn(g,s,i,f),i.elementType=a,i.type=c,i.lanes=m,i}function Yl(a,i,s,c){return a=zn(7,a,c,i),a.lanes=s,a}function qf(a,i,s){return a=zn(6,a,null,i),a.lanes=s,a}function Zf(a,i,s){return i=zn(4,a.children!==null?a.children:[],a.key,i),i.lanes=s,i.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},i}var Js=[],er=0,Od=null,bd=0,oi=[],li=0,Kl=null,Eo=1,ho="";function Vl(a,i){Js[er++]=bd,Js[er++]=Od,Od=a,bd=i}function yI(a,i,s){oi[li++]=Eo,oi[li++]=ho,oi[li++]=Kl,Kl=a;var c=Eo;a=ho;var f=32-Bn(c)-1;c&=~(1<<f),s+=1;var m=32-Bn(i)+f;if(30<m){var g=f-f%5;m=(c&(1<<g)-1).toString(32),c>>=g,f-=g,Eo=1<<32-Bn(i)+f|s<<f|c,ho=m+a}else Eo=1<<m|s<<f|c,ho=a}function Qf(a){a.return!==null&&(Vl(a,1),yI(a,1,0))}function $f(a){for(;a===Od;)Od=Js[--er],Js[er]=null,bd=Js[--er],Js[er]=null;for(;a===Kl;)Kl=oi[--li],oi[li]=null,ho=oi[--li],oi[li]=null,Eo=oi[--li],oi[li]=null}var En=null,$t=null,mt=!1,Wl=null,zi=!1,Jf=Error(o(519));function Xl(a){var i=Error(o(418,""));throw Lc(ni(i,a)),Jf}function vI(a){var i=a.stateNode,s=a.type,c=a.memoizedProps;switch(i[en]=a,i[bn]=c,s){case"dialog":nt("cancel",i),nt("close",i);break;case"iframe":case"object":case"embed":nt("load",i);break;case"video":case"audio":for(s=0;s<au.length;s++)nt(au[s],i);break;case"source":nt("error",i);break;case"img":case"image":case"link":nt("error",i),nt("load",i);break;case"details":nt("toggle",i);break;case"input":nt("invalid",i),KS(i,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),hd(i);break;case"select":nt("invalid",i);break;case"textarea":nt("invalid",i),WS(i,c.value,c.defaultValue,c.children),hd(i)}s=c.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||i.textContent===""+s||c.suppressHydrationWarning===!0||Wg(i.textContent,s)?(c.popover!=null&&(nt("beforetoggle",i),nt("toggle",i)),c.onScroll!=null&&nt("scroll",i),c.onScrollEnd!=null&&nt("scrollend",i),c.onClick!=null&&(i.onclick=sE),i=!0):i=!1,i||Xl(a)}function MI(a){for(En=a.return;En;)switch(En.tag){case 5:case 13:zi=!1;return;case 27:case 3:zi=!0;return;default:En=En.return}}function vc(a){if(a!==En)return!1;if(!mt)return MI(a),mt=!0,!1;var i=a.tag,s;if((s=i!==3&&i!==27)&&((s=i===5)&&(s=a.type,s=!(s!=="form"&&s!=="button")||Am(a.type,a.memoizedProps)),s=!s),s&&$t&&Xl(a),MI(a),i===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(o(317));e:{for(a=a.nextSibling,i=0;a;){if(a.nodeType===8)if(s=a.data,s==="/$"){if(i===0){$t=Ni(a.nextSibling);break e}i--}else s!=="$"&&s!=="$!"&&s!=="$?"||i++;a=a.nextSibling}$t=null}}else i===27?(i=$t,ol(a.type)?(a=Sm,Sm=null,$t=a):$t=i):$t=En?Ni(a.stateNode.nextSibling):null;return!0}function Mc(){$t=En=null,mt=!1}function LI(){var a=Wl;return a!==null&&(Mn===null?Mn=a:Mn.push.apply(Mn,a),Wl=null),a}function Lc(a){Wl===null?Wl=[a]:Wl.push(a)}var eA=j(null),ql=null,fo=null;function Yo(a,i,s){G(eA,i._currentValue),i._currentValue=s}function Ao(a){a._currentValue=eA.current,F(eA)}function tA(a,i,s){for(;a!==null;){var c=a.alternate;if((a.childLanes&i)!==i?(a.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),a===s)break;a=a.return}}function aA(a,i,s,c){var f=a.child;for(f!==null&&(f.return=a);f!==null;){var m=f.dependencies;if(m!==null){var g=f.child;m=m.firstContext;e:for(;m!==null;){var y=m;m=f;for(var z=0;z<i.length;z++)if(y.context===i[z]){m.lanes|=s,y=m.alternate,y!==null&&(y.lanes|=s),tA(m.return,s,a),c||(g=null);break e}m=y.next}}else if(f.tag===18){if(g=f.return,g===null)throw Error(o(341));g.lanes|=s,m=g.alternate,m!==null&&(m.lanes|=s),tA(g,s,a),g=null}else g=f.child;if(g!==null)g.return=f;else for(g=f;g!==null;){if(g===a){g=null;break}if(f=g.sibling,f!==null){f.return=g.return,g=f;break}g=g.return}f=g}}function Hc(a,i,s,c){a=null;for(var f=i,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var g=f.alternate;if(g===null)throw Error(o(387));if(g=g.memoizedProps,g!==null){var y=f.type;Fn(f.pendingProps.value,g.value)||(a!==null?a.push(y):a=[y])}}else if(f===Ae.current){if(g=f.alternate,g===null)throw Error(o(387));g.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(a!==null?a.push(ru):a=[ru])}f=f.return}a!==null&&aA(i,a,s,c),i.flags|=262144}function Dd(a){for(a=a.firstContext;a!==null;){if(!Fn(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function Zl(a){ql=a,fo=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function tn(a){return HI(ql,a)}function yd(a,i){return ql===null&&Zl(a),HI(a,i)}function HI(a,i){var s=i._currentValue;if(i={context:i,memoizedValue:s,next:null},fo===null){if(a===null)throw Error(o(308));fo=i,a.dependencies={lanes:0,firstContext:i},a.flags|=524288}else fo=fo.next=i;return s}var fv=typeof AbortController<"u"?AbortController:function(){var a=[],i=this.signal={aborted:!1,addEventListener:function(s,c){a.push(c)}};this.abort=function(){i.aborted=!0,a.forEach(function(s){return s()})}},Av=e.unstable_scheduleCallback,mv=e.unstable_NormalPriority,pa={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function nA(){return{controller:new fv,data:new Map,refCount:0}}function Uc(a){a.refCount--,a.refCount===0&&Av(mv,function(){a.controller.abort()})}var kc=null,iA=0,tr=0,ar=null;function Rv(a,i){if(kc===null){var s=kc=[];iA=0,tr=lm(),ar={status:"pending",value:void 0,then:function(c){s.push(c)}}}return iA++,i.then(UI,UI),i}function UI(){if(--iA===0&&kc!==null){ar!==null&&(ar.status="fulfilled");var a=kc;kc=null,tr=0,ar=null;for(var i=0;i<a.length;i++)(0,a[i])()}}function Tv(a,i){var s=[],c={status:"pending",value:null,reason:null,then:function(f){s.push(f)}};return a.then(function(){c.status="fulfilled",c.value=i;for(var f=0;f<s.length;f++)(0,s[f])(i)},function(f){for(c.status="rejected",c.reason=f,f=0;f<s.length;f++)(0,s[f])(void 0)}),c}var kI=Y.S;Y.S=function(a,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&Rv(a,i),kI!==null&&kI(a,i)};var Ql=j(null);function oA(){var a=Ql.current;return a!==null?a:kt.pooledCache}function vd(a,i){i===null?G(Ql,Ql.current):G(Ql,i.pool)}function xI(){var a=oA();return a===null?null:{parent:pa._currentValue,pool:a}}var xc=Error(o(460)),PI=Error(o(474)),Md=Error(o(542)),lA={then:function(){}};function wI(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Ld(){}function GI(a,i,s){switch(s=a[s],s===void 0?a.push(i):s!==i&&(i.then(Ld,Ld),i=s),i.status){case"fulfilled":return i.value;case"rejected":throw a=i.reason,FI(a),a;default:if(typeof i.status=="string")i.then(Ld,Ld);else{if(a=kt,a!==null&&100<a.shellSuspendCounter)throw Error(o(482));a=i,a.status="pending",a.then(function(c){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=c}},function(c){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=c}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw a=i.reason,FI(a),a}throw Pc=i,xc}}var Pc=null;function BI(){if(Pc===null)throw Error(o(459));var a=Pc;return Pc=null,a}function FI(a){if(a===xc||a===Md)throw Error(o(483))}var Ko=!1;function sA(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function rA(a,i){a=a.updateQueue,i.updateQueue===a&&(i.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function Vo(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function Wo(a,i,s){var c=a.updateQueue;if(c===null)return null;if(c=c.shared,(Tt&2)!==0){var f=c.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),c.pending=i,i=pd(a),bI(a,null,s),i}return Nd(a,c,i,s),pd(a)}function wc(a,i,s){if(i=i.updateQueue,i!==null&&(i=i.shared,(s&4194048)!==0)){var c=i.lanes;c&=a.pendingLanes,s|=c,i.lanes=s,US(a,s)}}function cA(a,i){var s=a.updateQueue,c=a.alternate;if(c!==null&&(c=c.updateQueue,s===c)){var f=null,m=null;if(s=s.firstBaseUpdate,s!==null){do{var g={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};m===null?f=m=g:m=m.next=g,s=s.next}while(s!==null);m===null?f=m=i:m=m.next=i}else f=m=i;s={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:c.shared,callbacks:c.callbacks},a.updateQueue=s;return}a=s.lastBaseUpdate,a===null?s.firstBaseUpdate=i:a.next=i,s.lastBaseUpdate=i}var uA=!1;function Gc(){if(uA){var a=ar;if(a!==null)throw a}}function Bc(a,i,s,c){uA=!1;var f=a.updateQueue;Ko=!1;var m=f.firstBaseUpdate,g=f.lastBaseUpdate,y=f.shared.pending;if(y!==null){f.shared.pending=null;var z=y,ne=z.next;z.next=null,g===null?m=ne:g.next=ne,g=z;var me=a.alternate;me!==null&&(me=me.updateQueue,y=me.lastBaseUpdate,y!==g&&(y===null?me.firstBaseUpdate=ne:y.next=ne,me.lastBaseUpdate=z))}if(m!==null){var Se=f.baseState;g=0,me=ne=z=null,y=m;do{var se=y.lane&-536870913,ce=se!==y.lane;if(ce?(ct&se)===se:(c&se)===se){se!==0&&se===tr&&(uA=!0),me!==null&&(me=me.next={lane:0,tag:y.tag,payload:y.payload,callback:null,next:null});e:{var Be=a,Pe=y;se=i;var Ct=s;switch(Pe.tag){case 1:if(Be=Pe.payload,typeof Be=="function"){Se=Be.call(Ct,Se,se);break e}Se=Be;break e;case 3:Be.flags=Be.flags&-65537|128;case 0:if(Be=Pe.payload,se=typeof Be=="function"?Be.call(Ct,Se,se):Be,se==null)break e;Se=R({},Se,se);break e;case 2:Ko=!0}}se=y.callback,se!==null&&(a.flags|=64,ce&&(a.flags|=8192),ce=f.callbacks,ce===null?f.callbacks=[se]:ce.push(se))}else ce={lane:se,tag:y.tag,payload:y.payload,callback:y.callback,next:null},me===null?(ne=me=ce,z=Se):me=me.next=ce,g|=se;if(y=y.next,y===null){if(y=f.shared.pending,y===null)break;ce=y,y=ce.next,ce.next=null,f.lastBaseUpdate=ce,f.shared.pending=null}}while(!0);me===null&&(z=Se),f.baseState=z,f.firstBaseUpdate=ne,f.lastBaseUpdate=me,m===null&&(f.shared.lanes=0),tl|=g,a.lanes=g,a.memoizedState=Se}}function zI(a,i){if(typeof a!="function")throw Error(o(191,a));a.call(i)}function jI(a,i){var s=a.callbacks;if(s!==null)for(a.callbacks=null,a=0;a<s.length;a++)zI(s[a],i)}var nr=j(null),Hd=j(0);function YI(a,i){a=go,G(Hd,a),G(nr,i),go=a|i.baseLanes}function dA(){G(Hd,go),G(nr,nr.current)}function EA(){go=Hd.current,F(nr),F(Hd)}var Xo=0,Je=null,Nt=null,Ra=null,Ud=!1,ir=!1,$l=!1,kd=0,Fc=0,or=null,Sv=0;function Ea(){throw Error(o(321))}function hA(a,i){if(i===null)return!1;for(var s=0;s<i.length&&s<a.length;s++)if(!Fn(a[s],i[s]))return!1;return!0}function fA(a,i,s,c,f,m){return Xo=m,Je=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Y.H=a===null||a.memoizedState===null?b_:D_,$l=!1,m=s(c,f),$l=!1,ir&&(m=VI(i,s,c,f)),KI(a),m}function KI(a){Y.H=Fd;var i=Nt!==null&&Nt.next!==null;if(Xo=0,Ra=Nt=Je=null,Ud=!1,Fc=0,or=null,i)throw Error(o(300));a===null||La||(a=a.dependencies,a!==null&&Dd(a)&&(La=!0))}function VI(a,i,s,c){Je=a;var f=0;do{if(ir&&(or=null),Fc=0,ir=!1,25<=f)throw Error(o(301));if(f+=1,Ra=Nt=null,a.updateQueue!=null){var m=a.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}Y.H=Ov,m=i(s,c)}while(ir);return m}function Iv(){var a=Y.H,i=a.useState()[0];return i=typeof i.then=="function"?zc(i):i,a=a.useState()[0],(Nt!==null?Nt.memoizedState:null)!==a&&(Je.flags|=1024),i}function AA(){var a=kd!==0;return kd=0,a}function mA(a,i,s){i.updateQueue=a.updateQueue,i.flags&=-2053,a.lanes&=~s}function RA(a){if(Ud){for(a=a.memoizedState;a!==null;){var i=a.queue;i!==null&&(i.pending=null),a=a.next}Ud=!1}Xo=0,Ra=Nt=Je=null,ir=!1,Fc=kd=0,or=null}function yn(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ra===null?Je.memoizedState=Ra=a:Ra=Ra.next=a,Ra}function Ta(){if(Nt===null){var a=Je.alternate;a=a!==null?a.memoizedState:null}else a=Nt.next;var i=Ra===null?Je.memoizedState:Ra.next;if(i!==null)Ra=i,Nt=a;else{if(a===null)throw Je.alternate===null?Error(o(467)):Error(o(310));Nt=a,a={memoizedState:Nt.memoizedState,baseState:Nt.baseState,baseQueue:Nt.baseQueue,queue:Nt.queue,next:null},Ra===null?Je.memoizedState=Ra=a:Ra=Ra.next=a}return Ra}function TA(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function zc(a){var i=Fc;return Fc+=1,or===null&&(or=[]),a=GI(or,a,i),i=Je,(Ra===null?i.memoizedState:Ra.next)===null&&(i=i.alternate,Y.H=i===null||i.memoizedState===null?b_:D_),a}function xd(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return zc(a);if(a.$$typeof===k)return tn(a)}throw Error(o(438,String(a)))}function SA(a){var i=null,s=Je.updateQueue;if(s!==null&&(i=s.memoCache),i==null){var c=Je.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(i={data:c.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),s===null&&(s=TA(),Je.updateQueue=s),s.memoCache=i,s=i.data[i.index],s===void 0)for(s=i.data[i.index]=Array(a),c=0;c<a;c++)s[c]=he;return i.index++,s}function mo(a,i){return typeof i=="function"?i(a):i}function Pd(a){var i=Ta();return IA(i,Nt,a)}function IA(a,i,s){var c=a.queue;if(c===null)throw Error(o(311));c.lastRenderedReducer=s;var f=a.baseQueue,m=c.pending;if(m!==null){if(f!==null){var g=f.next;f.next=m.next,m.next=g}i.baseQueue=f=m,c.pending=null}if(m=a.baseState,f===null)a.memoizedState=m;else{i=f.next;var y=g=null,z=null,ne=i,me=!1;do{var Se=ne.lane&-536870913;if(Se!==ne.lane?(ct&Se)===Se:(Xo&Se)===Se){var se=ne.revertLane;if(se===0)z!==null&&(z=z.next={lane:0,revertLane:0,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null}),Se===tr&&(me=!0);else if((Xo&se)===se){ne=ne.next,se===tr&&(me=!0);continue}else Se={lane:0,revertLane:ne.revertLane,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},z===null?(y=z=Se,g=m):z=z.next=Se,Je.lanes|=se,tl|=se;Se=ne.action,$l&&s(m,Se),m=ne.hasEagerState?ne.eagerState:s(m,Se)}else se={lane:Se,revertLane:ne.revertLane,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},z===null?(y=z=se,g=m):z=z.next=se,Je.lanes|=Se,tl|=Se;ne=ne.next}while(ne!==null&&ne!==i);if(z===null?g=m:z.next=y,!Fn(m,a.memoizedState)&&(La=!0,me&&(s=ar,s!==null)))throw s;a.memoizedState=m,a.baseState=g,a.baseQueue=z,c.lastRenderedState=m}return f===null&&(c.lanes=0),[a.memoizedState,c.dispatch]}function _A(a){var i=Ta(),s=i.queue;if(s===null)throw Error(o(311));s.lastRenderedReducer=a;var c=s.dispatch,f=s.pending,m=i.memoizedState;if(f!==null){s.pending=null;var g=f=f.next;do m=a(m,g.action),g=g.next;while(g!==f);Fn(m,i.memoizedState)||(La=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),s.lastRenderedState=m}return[m,c]}function WI(a,i,s){var c=Je,f=Ta(),m=mt;if(m){if(s===void 0)throw Error(o(407));s=s()}else s=i();var g=!Fn((Nt||f).memoizedState,s);g&&(f.memoizedState=s,La=!0),f=f.queue;var y=ZI.bind(null,c,f,a);if(jc(2048,8,y,[a]),f.getSnapshot!==i||g||Ra!==null&&Ra.memoizedState.tag&1){if(c.flags|=2048,lr(9,wd(),qI.bind(null,c,f,s,i),null),kt===null)throw Error(o(349));m||(Xo&124)!==0||XI(c,i,s)}return s}function XI(a,i,s){a.flags|=16384,a={getSnapshot:i,value:s},i=Je.updateQueue,i===null?(i=TA(),Je.updateQueue=i,i.stores=[a]):(s=i.stores,s===null?i.stores=[a]:s.push(a))}function qI(a,i,s,c){i.value=s,i.getSnapshot=c,QI(i)&&$I(a)}function ZI(a,i,s){return s(function(){QI(i)&&$I(a)})}function QI(a){var i=a.getSnapshot;a=a.value;try{var s=i();return!Fn(a,s)}catch{return!0}}function $I(a){var i=Qs(a,2);i!==null&&Wn(i,a,2)}function gA(a){var i=yn();if(typeof a=="function"){var s=a;if(a=s(),$l){Fo(!0);try{s()}finally{Fo(!1)}}}return i.memoizedState=i.baseState=a,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:mo,lastRenderedState:a},i}function JI(a,i,s,c){return a.baseState=s,IA(a,Nt,typeof c=="function"?c:mo)}function _v(a,i,s,c,f){if(Bd(a))throw Error(o(485));if(a=i.action,a!==null){var m={payload:f,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(g){m.listeners.push(g)}};Y.T!==null?s(!0):m.isTransition=!1,c(m),s=i.pending,s===null?(m.next=i.pending=m,e_(i,m)):(m.next=s.next,i.pending=s.next=m)}}function e_(a,i){var s=i.action,c=i.payload,f=a.state;if(i.isTransition){var m=Y.T,g={};Y.T=g;try{var y=s(f,c),z=Y.S;z!==null&&z(g,y),t_(a,i,y)}catch(ne){NA(a,i,ne)}finally{Y.T=m}}else try{m=s(f,c),t_(a,i,m)}catch(ne){NA(a,i,ne)}}function t_(a,i,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(c){a_(a,i,c)},function(c){return NA(a,i,c)}):a_(a,i,s)}function a_(a,i,s){i.status="fulfilled",i.value=s,n_(i),a.state=s,i=a.pending,i!==null&&(s=i.next,s===i?a.pending=null:(s=s.next,i.next=s,e_(a,s)))}function NA(a,i,s){var c=a.pending;if(a.pending=null,c!==null){c=c.next;do i.status="rejected",i.reason=s,n_(i),i=i.next;while(i!==c)}a.action=null}function n_(a){a=a.listeners;for(var i=0;i<a.length;i++)(0,a[i])()}function i_(a,i){return i}function o_(a,i){if(mt){var s=kt.formState;if(s!==null){e:{var c=Je;if(mt){if($t){t:{for(var f=$t,m=zi;f.nodeType!==8;){if(!m){f=null;break t}if(f=Ni(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){$t=Ni(f.nextSibling),c=f.data==="F!";break e}}Xl(c)}c=!1}c&&(i=s[0])}}return s=yn(),s.memoizedState=s.baseState=i,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i_,lastRenderedState:i},s.queue=c,s=p_.bind(null,Je,c),c.dispatch=s,c=gA(!1),m=DA.bind(null,Je,!1,c.queue),c=yn(),f={state:i,dispatch:null,action:a,pending:null},c.queue=f,s=_v.bind(null,Je,f,m,s),f.dispatch=s,c.memoizedState=a,[i,s,!1]}function l_(a){var i=Ta();return s_(i,Nt,a)}function s_(a,i,s){if(i=IA(a,i,i_)[0],a=Pd(mo)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var c=zc(i)}catch(g){throw g===xc?Md:g}else c=i;i=Ta();var f=i.queue,m=f.dispatch;return s!==i.memoizedState&&(Je.flags|=2048,lr(9,wd(),gv.bind(null,f,s),null)),[c,m,a]}function gv(a,i){a.action=i}function r_(a){var i=Ta(),s=Nt;if(s!==null)return s_(i,s,a);Ta(),i=i.memoizedState,s=Ta();var c=s.queue.dispatch;return s.memoizedState=a,[i,c,!1]}function lr(a,i,s,c){return a={tag:a,create:s,deps:c,inst:i,next:null},i=Je.updateQueue,i===null&&(i=TA(),Je.updateQueue=i),s=i.lastEffect,s===null?i.lastEffect=a.next=a:(c=s.next,s.next=a,a.next=c,i.lastEffect=a),a}function wd(){return{destroy:void 0,resource:void 0}}function c_(){return Ta().memoizedState}function Gd(a,i,s,c){var f=yn();c=c===void 0?null:c,Je.flags|=a,f.memoizedState=lr(1|i,wd(),s,c)}function jc(a,i,s,c){var f=Ta();c=c===void 0?null:c;var m=f.memoizedState.inst;Nt!==null&&c!==null&&hA(c,Nt.memoizedState.deps)?f.memoizedState=lr(i,m,s,c):(Je.flags|=a,f.memoizedState=lr(1|i,m,s,c))}function u_(a,i){Gd(8390656,8,a,i)}function d_(a,i){jc(2048,8,a,i)}function E_(a,i){return jc(4,2,a,i)}function h_(a,i){return jc(4,4,a,i)}function f_(a,i){if(typeof i=="function"){a=a();var s=i(a);return function(){typeof s=="function"?s():i(null)}}if(i!=null)return a=a(),i.current=a,function(){i.current=null}}function A_(a,i,s){s=s!=null?s.concat([a]):null,jc(4,4,f_.bind(null,i,a),s)}function pA(){}function m_(a,i){var s=Ta();i=i===void 0?null:i;var c=s.memoizedState;return i!==null&&hA(i,c[1])?c[0]:(s.memoizedState=[a,i],a)}function R_(a,i){var s=Ta();i=i===void 0?null:i;var c=s.memoizedState;if(i!==null&&hA(i,c[1]))return c[0];if(c=a(),$l){Fo(!0);try{a()}finally{Fo(!1)}}return s.memoizedState=[c,i],c}function CA(a,i,s){return s===void 0||(Xo&1073741824)!==0?a.memoizedState=i:(a.memoizedState=s,a=Ig(),Je.lanes|=a,tl|=a,s)}function T_(a,i,s,c){return Fn(s,i)?s:nr.current!==null?(a=CA(a,s,c),Fn(a,i)||(La=!0),a):(Xo&42)===0?(La=!0,a.memoizedState=s):(a=Ig(),Je.lanes|=a,tl|=a,i)}function S_(a,i,s,c,f){var m=P.p;P.p=m!==0&&8>m?m:8;var g=Y.T,y={};Y.T=y,DA(a,!1,i,s);try{var z=f(),ne=Y.S;if(ne!==null&&ne(y,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var me=Tv(z,c);Yc(a,i,me,Vn(a))}else Yc(a,i,c,Vn(a))}catch(Se){Yc(a,i,{then:function(){},status:"rejected",reason:Se},Vn())}finally{P.p=m,Y.T=g}}function Nv(){}function OA(a,i,s,c){if(a.tag!==5)throw Error(o(476));var f=I_(a).queue;S_(a,f,i,K,s===null?Nv:function(){return __(a),s(c)})}function I_(a){var i=a.memoizedState;if(i!==null)return i;i={memoizedState:K,baseState:K,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:mo,lastRenderedState:K},next:null};var s={};return i.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:mo,lastRenderedState:s},next:null},a.memoizedState=i,a=a.alternate,a!==null&&(a.memoizedState=i),i}function __(a){var i=I_(a).next.queue;Yc(a,i,{},Vn())}function bA(){return tn(ru)}function g_(){return Ta().memoizedState}function N_(){return Ta().memoizedState}function pv(a){for(var i=a.return;i!==null;){switch(i.tag){case 24:case 3:var s=Vn();a=Vo(s);var c=Wo(i,a,s);c!==null&&(Wn(c,i,s),wc(c,i,s)),i={cache:nA()},a.payload=i;return}i=i.return}}function Cv(a,i,s){var c=Vn();s={lane:c,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null},Bd(a)?C_(i,s):(s=Wf(a,i,s,c),s!==null&&(Wn(s,a,c),O_(s,i,c)))}function p_(a,i,s){var c=Vn();Yc(a,i,s,c)}function Yc(a,i,s,c){var f={lane:c,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null};if(Bd(a))C_(i,f);else{var m=a.alternate;if(a.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var g=i.lastRenderedState,y=m(g,s);if(f.hasEagerState=!0,f.eagerState=y,Fn(y,g))return Nd(a,i,f,0),kt===null&&gd(),!1}catch{}finally{}if(s=Wf(a,i,f,c),s!==null)return Wn(s,a,c),O_(s,i,c),!0}return!1}function DA(a,i,s,c){if(c={lane:2,revertLane:lm(),action:c,hasEagerState:!1,eagerState:null,next:null},Bd(a)){if(i)throw Error(o(479))}else i=Wf(a,s,c,2),i!==null&&Wn(i,a,2)}function Bd(a){var i=a.alternate;return a===Je||i!==null&&i===Je}function C_(a,i){ir=Ud=!0;var s=a.pending;s===null?i.next=i:(i.next=s.next,s.next=i),a.pending=i}function O_(a,i,s){if((s&4194048)!==0){var c=i.lanes;c&=a.pendingLanes,s|=c,i.lanes=s,US(a,s)}}var Fd={readContext:tn,use:xd,useCallback:Ea,useContext:Ea,useEffect:Ea,useImperativeHandle:Ea,useLayoutEffect:Ea,useInsertionEffect:Ea,useMemo:Ea,useReducer:Ea,useRef:Ea,useState:Ea,useDebugValue:Ea,useDeferredValue:Ea,useTransition:Ea,useSyncExternalStore:Ea,useId:Ea,useHostTransitionStatus:Ea,useFormState:Ea,useActionState:Ea,useOptimistic:Ea,useMemoCache:Ea,useCacheRefresh:Ea},b_={readContext:tn,use:xd,useCallback:function(a,i){return yn().memoizedState=[a,i===void 0?null:i],a},useContext:tn,useEffect:u_,useImperativeHandle:function(a,i,s){s=s!=null?s.concat([a]):null,Gd(4194308,4,f_.bind(null,i,a),s)},useLayoutEffect:function(a,i){return Gd(4194308,4,a,i)},useInsertionEffect:function(a,i){Gd(4,2,a,i)},useMemo:function(a,i){var s=yn();i=i===void 0?null:i;var c=a();if($l){Fo(!0);try{a()}finally{Fo(!1)}}return s.memoizedState=[c,i],c},useReducer:function(a,i,s){var c=yn();if(s!==void 0){var f=s(i);if($l){Fo(!0);try{s(i)}finally{Fo(!1)}}}else f=i;return c.memoizedState=c.baseState=f,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:f},c.queue=a,a=a.dispatch=Cv.bind(null,Je,a),[c.memoizedState,a]},useRef:function(a){var i=yn();return a={current:a},i.memoizedState=a},useState:function(a){a=gA(a);var i=a.queue,s=p_.bind(null,Je,i);return i.dispatch=s,[a.memoizedState,s]},useDebugValue:pA,useDeferredValue:function(a,i){var s=yn();return CA(s,a,i)},useTransition:function(){var a=gA(!1);return a=S_.bind(null,Je,a.queue,!0,!1),yn().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,i,s){var c=Je,f=yn();if(mt){if(s===void 0)throw Error(o(407));s=s()}else{if(s=i(),kt===null)throw Error(o(349));(ct&124)!==0||XI(c,i,s)}f.memoizedState=s;var m={value:s,getSnapshot:i};return f.queue=m,u_(ZI.bind(null,c,m,a),[a]),c.flags|=2048,lr(9,wd(),qI.bind(null,c,m,s,i),null),s},useId:function(){var a=yn(),i=kt.identifierPrefix;if(mt){var s=ho,c=Eo;s=(c&~(1<<32-Bn(c)-1)).toString(32)+s,i="«"+i+"R"+s,s=kd++,0<s&&(i+="H"+s.toString(32)),i+="»"}else s=Sv++,i="«"+i+"r"+s.toString(32)+"»";return a.memoizedState=i},useHostTransitionStatus:bA,useFormState:o_,useActionState:o_,useOptimistic:function(a){var i=yn();i.memoizedState=i.baseState=a;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=s,i=DA.bind(null,Je,!0,s),s.dispatch=i,[a,i]},useMemoCache:SA,useCacheRefresh:function(){return yn().memoizedState=pv.bind(null,Je)}},D_={readContext:tn,use:xd,useCallback:m_,useContext:tn,useEffect:d_,useImperativeHandle:A_,useInsertionEffect:E_,useLayoutEffect:h_,useMemo:R_,useReducer:Pd,useRef:c_,useState:function(){return Pd(mo)},useDebugValue:pA,useDeferredValue:function(a,i){var s=Ta();return T_(s,Nt.memoizedState,a,i)},useTransition:function(){var a=Pd(mo)[0],i=Ta().memoizedState;return[typeof a=="boolean"?a:zc(a),i]},useSyncExternalStore:WI,useId:g_,useHostTransitionStatus:bA,useFormState:l_,useActionState:l_,useOptimistic:function(a,i){var s=Ta();return JI(s,Nt,a,i)},useMemoCache:SA,useCacheRefresh:N_},Ov={readContext:tn,use:xd,useCallback:m_,useContext:tn,useEffect:d_,useImperativeHandle:A_,useInsertionEffect:E_,useLayoutEffect:h_,useMemo:R_,useReducer:_A,useRef:c_,useState:function(){return _A(mo)},useDebugValue:pA,useDeferredValue:function(a,i){var s=Ta();return Nt===null?CA(s,a,i):T_(s,Nt.memoizedState,a,i)},useTransition:function(){var a=_A(mo)[0],i=Ta().memoizedState;return[typeof a=="boolean"?a:zc(a),i]},useSyncExternalStore:WI,useId:g_,useHostTransitionStatus:bA,useFormState:r_,useActionState:r_,useOptimistic:function(a,i){var s=Ta();return Nt!==null?JI(s,Nt,a,i):(s.baseState=a,[a,s.queue.dispatch])},useMemoCache:SA,useCacheRefresh:N_},sr=null,Kc=0;function zd(a){var i=Kc;return Kc+=1,sr===null&&(sr=[]),GI(sr,a,i)}function Vc(a,i){i=i.props.ref,a.ref=i!==void 0?i:null}function jd(a,i){throw i.$$typeof===T?Error(o(525)):(a=Object.prototype.toString.call(i),Error(o(31,a==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":a)))}function y_(a){var i=a._init;return i(a._payload)}function v_(a){function i(q,V){if(a){var te=q.deletions;te===null?(q.deletions=[V],q.flags|=16):te.push(V)}}function s(q,V){if(!a)return null;for(;V!==null;)i(q,V),V=V.sibling;return null}function c(q){for(var V=new Map;q!==null;)q.key!==null?V.set(q.key,q):V.set(q.index,q),q=q.sibling;return V}function f(q,V){return q=uo(q,V),q.index=0,q.sibling=null,q}function m(q,V,te){return q.index=te,a?(te=q.alternate,te!==null?(te=te.index,te<V?(q.flags|=67108866,V):te):(q.flags|=67108866,V)):(q.flags|=1048576,V)}function g(q){return a&&q.alternate===null&&(q.flags|=67108866),q}function y(q,V,te,Te){return V===null||V.tag!==6?(V=qf(te,q.mode,Te),V.return=q,V):(V=f(V,te),V.return=q,V)}function z(q,V,te,Te){var De=te.type;return De===p?me(q,V,te.props.children,Te,te.key):V!==null&&(V.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===Q&&y_(De)===V.type)?(V=f(V,te.props),Vc(V,te),V.return=q,V):(V=Cd(te.type,te.key,te.props,null,q.mode,Te),Vc(V,te),V.return=q,V)}function ne(q,V,te,Te){return V===null||V.tag!==4||V.stateNode.containerInfo!==te.containerInfo||V.stateNode.implementation!==te.implementation?(V=Zf(te,q.mode,Te),V.return=q,V):(V=f(V,te.children||[]),V.return=q,V)}function me(q,V,te,Te,De){return V===null||V.tag!==7?(V=Yl(te,q.mode,Te,De),V.return=q,V):(V=f(V,te),V.return=q,V)}function Se(q,V,te){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=qf(""+V,q.mode,te),V.return=q,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case S:return te=Cd(V.type,V.key,V.props,null,q.mode,te),Vc(te,V),te.return=q,te;case I:return V=Zf(V,q.mode,te),V.return=q,V;case Q:var Te=V._init;return V=Te(V._payload),Se(q,V,te)}if(ee(V)||de(V))return V=Yl(V,q.mode,te,null),V.return=q,V;if(typeof V.then=="function")return Se(q,zd(V),te);if(V.$$typeof===k)return Se(q,yd(q,V),te);jd(q,V)}return null}function se(q,V,te,Te){var De=V!==null?V.key:null;if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return De!==null?null:y(q,V,""+te,Te);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case S:return te.key===De?z(q,V,te,Te):null;case I:return te.key===De?ne(q,V,te,Te):null;case Q:return De=te._init,te=De(te._payload),se(q,V,te,Te)}if(ee(te)||de(te))return De!==null?null:me(q,V,te,Te,null);if(typeof te.then=="function")return se(q,V,zd(te),Te);if(te.$$typeof===k)return se(q,V,yd(q,te),Te);jd(q,te)}return null}function ce(q,V,te,Te,De){if(typeof Te=="string"&&Te!==""||typeof Te=="number"||typeof Te=="bigint")return q=q.get(te)||null,y(V,q,""+Te,De);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case S:return q=q.get(Te.key===null?te:Te.key)||null,z(V,q,Te,De);case I:return q=q.get(Te.key===null?te:Te.key)||null,ne(V,q,Te,De);case Q:var et=Te._init;return Te=et(Te._payload),ce(q,V,te,Te,De)}if(ee(Te)||de(Te))return q=q.get(te)||null,me(V,q,Te,De,null);if(typeof Te.then=="function")return ce(q,V,te,zd(Te),De);if(Te.$$typeof===k)return ce(q,V,te,yd(V,Te),De);jd(V,Te)}return null}function Be(q,V,te,Te){for(var De=null,et=null,He=V,we=V=0,Ua=null;He!==null&&we<te.length;we++){He.index>we?(Ua=He,He=null):Ua=He.sibling;var ht=se(q,He,te[we],Te);if(ht===null){He===null&&(He=Ua);break}a&&He&&ht.alternate===null&&i(q,He),V=m(ht,V,we),et===null?De=ht:et.sibling=ht,et=ht,He=Ua}if(we===te.length)return s(q,He),mt&&Vl(q,we),De;if(He===null){for(;we<te.length;we++)He=Se(q,te[we],Te),He!==null&&(V=m(He,V,we),et===null?De=He:et.sibling=He,et=He);return mt&&Vl(q,we),De}for(He=c(He);we<te.length;we++)Ua=ce(He,q,we,te[we],Te),Ua!==null&&(a&&Ua.alternate!==null&&He.delete(Ua.key===null?we:Ua.key),V=m(Ua,V,we),et===null?De=Ua:et.sibling=Ua,et=Ua);return a&&He.forEach(function(ul){return i(q,ul)}),mt&&Vl(q,we),De}function Pe(q,V,te,Te){if(te==null)throw Error(o(151));for(var De=null,et=null,He=V,we=V=0,Ua=null,ht=te.next();He!==null&&!ht.done;we++,ht=te.next()){He.index>we?(Ua=He,He=null):Ua=He.sibling;var ul=se(q,He,ht.value,Te);if(ul===null){He===null&&(He=Ua);break}a&&He&&ul.alternate===null&&i(q,He),V=m(ul,V,we),et===null?De=ul:et.sibling=ul,et=ul,He=Ua}if(ht.done)return s(q,He),mt&&Vl(q,we),De;if(He===null){for(;!ht.done;we++,ht=te.next())ht=Se(q,ht.value,Te),ht!==null&&(V=m(ht,V,we),et===null?De=ht:et.sibling=ht,et=ht);return mt&&Vl(q,we),De}for(He=c(He);!ht.done;we++,ht=te.next())ht=ce(He,q,we,ht.value,Te),ht!==null&&(a&&ht.alternate!==null&&He.delete(ht.key===null?we:ht.key),V=m(ht,V,we),et===null?De=ht:et.sibling=ht,et=ht);return a&&He.forEach(function(bM){return i(q,bM)}),mt&&Vl(q,we),De}function Ct(q,V,te,Te){if(typeof te=="object"&&te!==null&&te.type===p&&te.key===null&&(te=te.props.children),typeof te=="object"&&te!==null){switch(te.$$typeof){case S:e:{for(var De=te.key;V!==null;){if(V.key===De){if(De=te.type,De===p){if(V.tag===7){s(q,V.sibling),Te=f(V,te.props.children),Te.return=q,q=Te;break e}}else if(V.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===Q&&y_(De)===V.type){s(q,V.sibling),Te=f(V,te.props),Vc(Te,te),Te.return=q,q=Te;break e}s(q,V);break}else i(q,V);V=V.sibling}te.type===p?(Te=Yl(te.props.children,q.mode,Te,te.key),Te.return=q,q=Te):(Te=Cd(te.type,te.key,te.props,null,q.mode,Te),Vc(Te,te),Te.return=q,q=Te)}return g(q);case I:e:{for(De=te.key;V!==null;){if(V.key===De)if(V.tag===4&&V.stateNode.containerInfo===te.containerInfo&&V.stateNode.implementation===te.implementation){s(q,V.sibling),Te=f(V,te.children||[]),Te.return=q,q=Te;break e}else{s(q,V);break}else i(q,V);V=V.sibling}Te=Zf(te,q.mode,Te),Te.return=q,q=Te}return g(q);case Q:return De=te._init,te=De(te._payload),Ct(q,V,te,Te)}if(ee(te))return Be(q,V,te,Te);if(de(te)){if(De=de(te),typeof De!="function")throw Error(o(150));return te=De.call(te),Pe(q,V,te,Te)}if(typeof te.then=="function")return Ct(q,V,zd(te),Te);if(te.$$typeof===k)return Ct(q,V,yd(q,te),Te);jd(q,te)}return typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint"?(te=""+te,V!==null&&V.tag===6?(s(q,V.sibling),Te=f(V,te),Te.return=q,q=Te):(s(q,V),Te=qf(te,q.mode,Te),Te.return=q,q=Te),g(q)):s(q,V)}return function(q,V,te,Te){try{Kc=0;var De=Ct(q,V,te,Te);return sr=null,De}catch(He){if(He===xc||He===Md)throw He;var et=zn(29,He,null,q.mode);return et.lanes=Te,et.return=q,et}finally{}}}var rr=v_(!0),M_=v_(!1),si=j(null),ji=null;function qo(a){var i=a.alternate;G(Ca,Ca.current&1),G(si,a),ji===null&&(i===null||nr.current!==null||i.memoizedState!==null)&&(ji=a)}function L_(a){if(a.tag===22){if(G(Ca,Ca.current),G(si,a),ji===null){var i=a.alternate;i!==null&&i.memoizedState!==null&&(ji=a)}}else Zo()}function Zo(){G(Ca,Ca.current),G(si,si.current)}function Ro(a){F(si),ji===a&&(ji=null),F(Ca)}var Ca=j(0);function Yd(a){for(var i=a;i!==null;){if(i.tag===13){var s=i.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||Tm(s)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break;for(;i.sibling===null;){if(i.return===null||i.return===a)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function yA(a,i,s,c){i=a.memoizedState,s=s(c,i),s=s==null?i:R({},i,s),a.memoizedState=s,a.lanes===0&&(a.updateQueue.baseState=s)}var vA={enqueueSetState:function(a,i,s){a=a._reactInternals;var c=Vn(),f=Vo(c);f.payload=i,s!=null&&(f.callback=s),i=Wo(a,f,c),i!==null&&(Wn(i,a,c),wc(i,a,c))},enqueueReplaceState:function(a,i,s){a=a._reactInternals;var c=Vn(),f=Vo(c);f.tag=1,f.payload=i,s!=null&&(f.callback=s),i=Wo(a,f,c),i!==null&&(Wn(i,a,c),wc(i,a,c))},enqueueForceUpdate:function(a,i){a=a._reactInternals;var s=Vn(),c=Vo(s);c.tag=2,i!=null&&(c.callback=i),i=Wo(a,c,s),i!==null&&(Wn(i,a,s),wc(i,a,s))}};function H_(a,i,s,c,f,m,g){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(c,m,g):i.prototype&&i.prototype.isPureReactComponent?!Dc(s,c)||!Dc(f,m):!0}function U_(a,i,s,c){a=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(s,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(s,c),i.state!==a&&vA.enqueueReplaceState(i,i.state,null)}function Jl(a,i){var s=i;if("ref"in i){s={};for(var c in i)c!=="ref"&&(s[c]=i[c])}if(a=a.defaultProps){s===i&&(s=R({},s));for(var f in a)s[f]===void 0&&(s[f]=a[f])}return s}var Kd=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function k_(a){Kd(a)}function x_(a){console.error(a)}function P_(a){Kd(a)}function Vd(a,i){try{var s=a.onUncaughtError;s(i.value,{componentStack:i.stack})}catch(c){setTimeout(function(){throw c})}}function w_(a,i,s){try{var c=a.onCaughtError;c(s.value,{componentStack:s.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function MA(a,i,s){return s=Vo(s),s.tag=3,s.payload={element:null},s.callback=function(){Vd(a,i)},s}function G_(a){return a=Vo(a),a.tag=3,a}function B_(a,i,s,c){var f=s.type.getDerivedStateFromError;if(typeof f=="function"){var m=c.value;a.payload=function(){return f(m)},a.callback=function(){w_(i,s,c)}}var g=s.stateNode;g!==null&&typeof g.componentDidCatch=="function"&&(a.callback=function(){w_(i,s,c),typeof f!="function"&&(al===null?al=new Set([this]):al.add(this));var y=c.stack;this.componentDidCatch(c.value,{componentStack:y!==null?y:""})})}function bv(a,i,s,c,f){if(s.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(i=s.alternate,i!==null&&Hc(i,s,f,!0),s=si.current,s!==null){switch(s.tag){case 13:return ji===null?tm():s.alternate===null&&Jt===0&&(Jt=3),s.flags&=-257,s.flags|=65536,s.lanes=f,c===lA?s.flags|=16384:(i=s.updateQueue,i===null?s.updateQueue=new Set([c]):i.add(c),nm(a,c,f)),!1;case 22:return s.flags|=65536,c===lA?s.flags|=16384:(i=s.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([c])},s.updateQueue=i):(s=i.retryQueue,s===null?i.retryQueue=new Set([c]):s.add(c)),nm(a,c,f)),!1}throw Error(o(435,s.tag))}return nm(a,c,f),tm(),!1}if(mt)return i=si.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,c!==Jf&&(a=Error(o(422),{cause:c}),Lc(ni(a,s)))):(c!==Jf&&(i=Error(o(423),{cause:c}),Lc(ni(i,s))),a=a.current.alternate,a.flags|=65536,f&=-f,a.lanes|=f,c=ni(c,s),f=MA(a.stateNode,c,f),cA(a,f),Jt!==4&&(Jt=2)),!1;var m=Error(o(520),{cause:c});if(m=ni(m,s),Jc===null?Jc=[m]:Jc.push(m),Jt!==4&&(Jt=2),i===null)return!0;c=ni(c,s),s=i;do{switch(s.tag){case 3:return s.flags|=65536,a=f&-f,s.lanes|=a,a=MA(s.stateNode,c,a),cA(s,a),!1;case 1:if(i=s.type,m=s.stateNode,(s.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(al===null||!al.has(m))))return s.flags|=65536,f&=-f,s.lanes|=f,f=G_(f),B_(f,a,s,c),cA(s,f),!1}s=s.return}while(s!==null);return!1}var F_=Error(o(461)),La=!1;function Ka(a,i,s,c){i.child=a===null?M_(i,null,s,c):rr(i,a.child,s,c)}function z_(a,i,s,c,f){s=s.render;var m=i.ref;if("ref"in c){var g={};for(var y in c)y!=="ref"&&(g[y]=c[y])}else g=c;return Zl(i),c=fA(a,i,s,g,m,f),y=AA(),a!==null&&!La?(mA(a,i,f),To(a,i,f)):(mt&&y&&Qf(i),i.flags|=1,Ka(a,i,c,f),i.child)}function j_(a,i,s,c,f){if(a===null){var m=s.type;return typeof m=="function"&&!Xf(m)&&m.defaultProps===void 0&&s.compare===null?(i.tag=15,i.type=m,Y_(a,i,m,c,f)):(a=Cd(s.type,null,c,i,i.mode,f),a.ref=i.ref,a.return=i,i.child=a)}if(m=a.child,!GA(a,f)){var g=m.memoizedProps;if(s=s.compare,s=s!==null?s:Dc,s(g,c)&&a.ref===i.ref)return To(a,i,f)}return i.flags|=1,a=uo(m,c),a.ref=i.ref,a.return=i,i.child=a}function Y_(a,i,s,c,f){if(a!==null){var m=a.memoizedProps;if(Dc(m,c)&&a.ref===i.ref)if(La=!1,i.pendingProps=c=m,GA(a,f))(a.flags&131072)!==0&&(La=!0);else return i.lanes=a.lanes,To(a,i,f)}return LA(a,i,s,c,f)}function K_(a,i,s){var c=i.pendingProps,f=c.children,m=a!==null?a.memoizedState:null;if(c.mode==="hidden"){if((i.flags&128)!==0){if(c=m!==null?m.baseLanes|s:s,a!==null){for(f=i.child=a.child,m=0;f!==null;)m=m|f.lanes|f.childLanes,f=f.sibling;i.childLanes=m&~c}else i.childLanes=0,i.child=null;return V_(a,i,c,s)}if((s&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},a!==null&&vd(i,m!==null?m.cachePool:null),m!==null?YI(i,m):dA(),L_(i);else return i.lanes=i.childLanes=536870912,V_(a,i,m!==null?m.baseLanes|s:s,s)}else m!==null?(vd(i,m.cachePool),YI(i,m),Zo(),i.memoizedState=null):(a!==null&&vd(i,null),dA(),Zo());return Ka(a,i,f,s),i.child}function V_(a,i,s,c){var f=oA();return f=f===null?null:{parent:pa._currentValue,pool:f},i.memoizedState={baseLanes:s,cachePool:f},a!==null&&vd(i,null),dA(),L_(i),a!==null&&Hc(a,i,c,!0),null}function Wd(a,i){var s=i.ref;if(s===null)a!==null&&a.ref!==null&&(i.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(o(284));(a===null||a.ref!==s)&&(i.flags|=4194816)}}function LA(a,i,s,c,f){return Zl(i),s=fA(a,i,s,c,void 0,f),c=AA(),a!==null&&!La?(mA(a,i,f),To(a,i,f)):(mt&&c&&Qf(i),i.flags|=1,Ka(a,i,s,f),i.child)}function W_(a,i,s,c,f,m){return Zl(i),i.updateQueue=null,s=VI(i,c,s,f),KI(a),c=AA(),a!==null&&!La?(mA(a,i,m),To(a,i,m)):(mt&&c&&Qf(i),i.flags|=1,Ka(a,i,s,m),i.child)}function X_(a,i,s,c,f){if(Zl(i),i.stateNode===null){var m=$s,g=s.contextType;typeof g=="object"&&g!==null&&(m=tn(g)),m=new s(c,m),i.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=vA,i.stateNode=m,m._reactInternals=i,m=i.stateNode,m.props=c,m.state=i.memoizedState,m.refs={},sA(i),g=s.contextType,m.context=typeof g=="object"&&g!==null?tn(g):$s,m.state=i.memoizedState,g=s.getDerivedStateFromProps,typeof g=="function"&&(yA(i,s,g,c),m.state=i.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(g=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),g!==m.state&&vA.enqueueReplaceState(m,m.state,null),Bc(i,c,m,f),Gc(),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308),c=!0}else if(a===null){m=i.stateNode;var y=i.memoizedProps,z=Jl(s,y);m.props=z;var ne=m.context,me=s.contextType;g=$s,typeof me=="object"&&me!==null&&(g=tn(me));var Se=s.getDerivedStateFromProps;me=typeof Se=="function"||typeof m.getSnapshotBeforeUpdate=="function",y=i.pendingProps!==y,me||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(y||ne!==g)&&U_(i,m,c,g),Ko=!1;var se=i.memoizedState;m.state=se,Bc(i,c,m,f),Gc(),ne=i.memoizedState,y||se!==ne||Ko?(typeof Se=="function"&&(yA(i,s,Se,c),ne=i.memoizedState),(z=Ko||H_(i,s,z,c,se,ne,g))?(me||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(i.flags|=4194308)):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=ne),m.props=c,m.state=ne,m.context=g,c=z):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{m=i.stateNode,rA(a,i),g=i.memoizedProps,me=Jl(s,g),m.props=me,Se=i.pendingProps,se=m.context,ne=s.contextType,z=$s,typeof ne=="object"&&ne!==null&&(z=tn(ne)),y=s.getDerivedStateFromProps,(ne=typeof y=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(g!==Se||se!==z)&&U_(i,m,c,z),Ko=!1,se=i.memoizedState,m.state=se,Bc(i,c,m,f),Gc();var ce=i.memoizedState;g!==Se||se!==ce||Ko||a!==null&&a.dependencies!==null&&Dd(a.dependencies)?(typeof y=="function"&&(yA(i,s,y,c),ce=i.memoizedState),(me=Ko||H_(i,s,me,c,se,ce,z)||a!==null&&a.dependencies!==null&&Dd(a.dependencies))?(ne||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(c,ce,z),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(c,ce,z)),typeof m.componentDidUpdate=="function"&&(i.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof m.componentDidUpdate!="function"||g===a.memoizedProps&&se===a.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||g===a.memoizedProps&&se===a.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=ce),m.props=c,m.state=ce,m.context=z,c=me):(typeof m.componentDidUpdate!="function"||g===a.memoizedProps&&se===a.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||g===a.memoizedProps&&se===a.memoizedState||(i.flags|=1024),c=!1)}return m=c,Wd(a,i),c=(i.flags&128)!==0,m||c?(m=i.stateNode,s=c&&typeof s.getDerivedStateFromError!="function"?null:m.render(),i.flags|=1,a!==null&&c?(i.child=rr(i,a.child,null,f),i.child=rr(i,null,s,f)):Ka(a,i,s,f),i.memoizedState=m.state,a=i.child):a=To(a,i,f),a}function q_(a,i,s,c){return Mc(),i.flags|=256,Ka(a,i,s,c),i.child}var HA={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function UA(a){return{baseLanes:a,cachePool:xI()}}function kA(a,i,s){return a=a!==null?a.childLanes&~s:0,i&&(a|=ri),a}function Z_(a,i,s){var c=i.pendingProps,f=!1,m=(i.flags&128)!==0,g;if((g=m)||(g=a!==null&&a.memoizedState===null?!1:(Ca.current&2)!==0),g&&(f=!0,i.flags&=-129),g=(i.flags&32)!==0,i.flags&=-33,a===null){if(mt){if(f?qo(i):Zo(),mt){var y=$t,z;if(z=y){e:{for(z=y,y=zi;z.nodeType!==8;){if(!y){y=null;break e}if(z=Ni(z.nextSibling),z===null){y=null;break e}}y=z}y!==null?(i.memoizedState={dehydrated:y,treeContext:Kl!==null?{id:Eo,overflow:ho}:null,retryLane:536870912,hydrationErrors:null},z=zn(18,null,null,0),z.stateNode=y,z.return=i,i.child=z,En=i,$t=null,z=!0):z=!1}z||Xl(i)}if(y=i.memoizedState,y!==null&&(y=y.dehydrated,y!==null))return Tm(y)?i.lanes=32:i.lanes=536870912,null;Ro(i)}return y=c.children,c=c.fallback,f?(Zo(),f=i.mode,y=Xd({mode:"hidden",children:y},f),c=Yl(c,f,s,null),y.return=i,c.return=i,y.sibling=c,i.child=y,f=i.child,f.memoizedState=UA(s),f.childLanes=kA(a,g,s),i.memoizedState=HA,c):(qo(i),xA(i,y))}if(z=a.memoizedState,z!==null&&(y=z.dehydrated,y!==null)){if(m)i.flags&256?(qo(i),i.flags&=-257,i=PA(a,i,s)):i.memoizedState!==null?(Zo(),i.child=a.child,i.flags|=128,i=null):(Zo(),f=c.fallback,y=i.mode,c=Xd({mode:"visible",children:c.children},y),f=Yl(f,y,s,null),f.flags|=2,c.return=i,f.return=i,c.sibling=f,i.child=c,rr(i,a.child,null,s),c=i.child,c.memoizedState=UA(s),c.childLanes=kA(a,g,s),i.memoizedState=HA,i=f);else if(qo(i),Tm(y)){if(g=y.nextSibling&&y.nextSibling.dataset,g)var ne=g.dgst;g=ne,c=Error(o(419)),c.stack="",c.digest=g,Lc({value:c,source:null,stack:null}),i=PA(a,i,s)}else if(La||Hc(a,i,s,!1),g=(s&a.childLanes)!==0,La||g){if(g=kt,g!==null&&(c=s&-s,c=(c&42)!==0?1:Sf(c),c=(c&(g.suspendedLanes|s))!==0?0:c,c!==0&&c!==z.retryLane))throw z.retryLane=c,Qs(a,c),Wn(g,a,c),F_;y.data==="$?"||tm(),i=PA(a,i,s)}else y.data==="$?"?(i.flags|=192,i.child=a.child,i=null):(a=z.treeContext,$t=Ni(y.nextSibling),En=i,mt=!0,Wl=null,zi=!1,a!==null&&(oi[li++]=Eo,oi[li++]=ho,oi[li++]=Kl,Eo=a.id,ho=a.overflow,Kl=i),i=xA(i,c.children),i.flags|=4096);return i}return f?(Zo(),f=c.fallback,y=i.mode,z=a.child,ne=z.sibling,c=uo(z,{mode:"hidden",children:c.children}),c.subtreeFlags=z.subtreeFlags&65011712,ne!==null?f=uo(ne,f):(f=Yl(f,y,s,null),f.flags|=2),f.return=i,c.return=i,c.sibling=f,i.child=c,c=f,f=i.child,y=a.child.memoizedState,y===null?y=UA(s):(z=y.cachePool,z!==null?(ne=pa._currentValue,z=z.parent!==ne?{parent:ne,pool:ne}:z):z=xI(),y={baseLanes:y.baseLanes|s,cachePool:z}),f.memoizedState=y,f.childLanes=kA(a,g,s),i.memoizedState=HA,c):(qo(i),s=a.child,a=s.sibling,s=uo(s,{mode:"visible",children:c.children}),s.return=i,s.sibling=null,a!==null&&(g=i.deletions,g===null?(i.deletions=[a],i.flags|=16):g.push(a)),i.child=s,i.memoizedState=null,s)}function xA(a,i){return i=Xd({mode:"visible",children:i},a.mode),i.return=a,a.child=i}function Xd(a,i){return a=zn(22,a,null,i),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function PA(a,i,s){return rr(i,a.child,null,s),a=xA(i,i.pendingProps.children),a.flags|=2,i.memoizedState=null,a}function Q_(a,i,s){a.lanes|=i;var c=a.alternate;c!==null&&(c.lanes|=i),tA(a.return,i,s)}function wA(a,i,s,c,f){var m=a.memoizedState;m===null?a.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:s,tailMode:f}:(m.isBackwards=i,m.rendering=null,m.renderingStartTime=0,m.last=c,m.tail=s,m.tailMode=f)}function $_(a,i,s){var c=i.pendingProps,f=c.revealOrder,m=c.tail;if(Ka(a,i,c.children,s),c=Ca.current,(c&2)!==0)c=c&1|2,i.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=i.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&Q_(a,s,i);else if(a.tag===19)Q_(a,s,i);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break e;for(;a.sibling===null;){if(a.return===null||a.return===i)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}c&=1}switch(G(Ca,c),f){case"forwards":for(s=i.child,f=null;s!==null;)a=s.alternate,a!==null&&Yd(a)===null&&(f=s),s=s.sibling;s=f,s===null?(f=i.child,i.child=null):(f=s.sibling,s.sibling=null),wA(i,!1,f,s,m);break;case"backwards":for(s=null,f=i.child,i.child=null;f!==null;){if(a=f.alternate,a!==null&&Yd(a)===null){i.child=f;break}a=f.sibling,f.sibling=s,s=f,f=a}wA(i,!0,s,null,m);break;case"together":wA(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function To(a,i,s){if(a!==null&&(i.dependencies=a.dependencies),tl|=i.lanes,(s&i.childLanes)===0)if(a!==null){if(Hc(a,i,s,!1),(s&i.childLanes)===0)return null}else return null;if(a!==null&&i.child!==a.child)throw Error(o(153));if(i.child!==null){for(a=i.child,s=uo(a,a.pendingProps),i.child=s,s.return=i;a.sibling!==null;)a=a.sibling,s=s.sibling=uo(a,a.pendingProps),s.return=i;s.sibling=null}return i.child}function GA(a,i){return(a.lanes&i)!==0?!0:(a=a.dependencies,!!(a!==null&&Dd(a)))}function Dv(a,i,s){switch(i.tag){case 3:Re(i,i.stateNode.containerInfo),Yo(i,pa,a.memoizedState.cache),Mc();break;case 27:case 5:xe(i);break;case 4:Re(i,i.stateNode.containerInfo);break;case 10:Yo(i,i.type,i.memoizedProps.value);break;case 13:var c=i.memoizedState;if(c!==null)return c.dehydrated!==null?(qo(i),i.flags|=128,null):(s&i.child.childLanes)!==0?Z_(a,i,s):(qo(i),a=To(a,i,s),a!==null?a.sibling:null);qo(i);break;case 19:var f=(a.flags&128)!==0;if(c=(s&i.childLanes)!==0,c||(Hc(a,i,s,!1),c=(s&i.childLanes)!==0),f){if(c)return $_(a,i,s);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),G(Ca,Ca.current),c)break;return null;case 22:case 23:return i.lanes=0,K_(a,i,s);case 24:Yo(i,pa,a.memoizedState.cache)}return To(a,i,s)}function J_(a,i,s){if(a!==null)if(a.memoizedProps!==i.pendingProps)La=!0;else{if(!GA(a,s)&&(i.flags&128)===0)return La=!1,Dv(a,i,s);La=(a.flags&131072)!==0}else La=!1,mt&&(i.flags&1048576)!==0&&yI(i,bd,i.index);switch(i.lanes=0,i.tag){case 16:e:{a=i.pendingProps;var c=i.elementType,f=c._init;if(c=f(c._payload),i.type=c,typeof c=="function")Xf(c)?(a=Jl(c,a),i.tag=1,i=X_(null,i,c,a,s)):(i.tag=0,i=LA(null,i,c,a,s));else{if(c!=null){if(f=c.$$typeof,f===M){i.tag=11,i=z_(null,i,c,a,s);break e}else if(f===x){i.tag=14,i=j_(null,i,c,a,s);break e}}throw i=$(c)||c,Error(o(306,i,""))}}return i;case 0:return LA(a,i,i.type,i.pendingProps,s);case 1:return c=i.type,f=Jl(c,i.pendingProps),X_(a,i,c,f,s);case 3:e:{if(Re(i,i.stateNode.containerInfo),a===null)throw Error(o(387));c=i.pendingProps;var m=i.memoizedState;f=m.element,rA(a,i),Bc(i,c,null,s);var g=i.memoizedState;if(c=g.cache,Yo(i,pa,c),c!==m.cache&&aA(i,[pa],s,!0),Gc(),c=g.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:g.cache},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){i=q_(a,i,c,s);break e}else if(c!==f){f=ni(Error(o(424)),i),Lc(f),i=q_(a,i,c,s);break e}else{switch(a=i.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for($t=Ni(a.firstChild),En=i,mt=!0,Wl=null,zi=!0,s=M_(i,null,c,s),i.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(Mc(),c===f){i=To(a,i,s);break e}Ka(a,i,c,s)}i=i.child}return i;case 26:return Wd(a,i),a===null?(s=nN(i.type,null,i.pendingProps,null))?i.memoizedState=s:mt||(s=i.type,a=i.pendingProps,c=rE(re.current).createElement(s),c[en]=i,c[bn]=a,Wa(c,s,a),Ma(c),i.stateNode=c):i.memoizedState=nN(i.type,a.memoizedProps,i.pendingProps,a.memoizedState),null;case 27:return xe(i),a===null&&mt&&(c=i.stateNode=eN(i.type,i.pendingProps,re.current),En=i,zi=!0,f=$t,ol(i.type)?(Sm=f,$t=Ni(c.firstChild)):$t=f),Ka(a,i,i.pendingProps.children,s),Wd(a,i),a===null&&(i.flags|=4194304),i.child;case 5:return a===null&&mt&&((f=c=$t)&&(c=aM(c,i.type,i.pendingProps,zi),c!==null?(i.stateNode=c,En=i,$t=Ni(c.firstChild),zi=!1,f=!0):f=!1),f||Xl(i)),xe(i),f=i.type,m=i.pendingProps,g=a!==null?a.memoizedProps:null,c=m.children,Am(f,m)?c=null:g!==null&&Am(f,g)&&(i.flags|=32),i.memoizedState!==null&&(f=fA(a,i,Iv,null,null,s),ru._currentValue=f),Wd(a,i),Ka(a,i,c,s),i.child;case 6:return a===null&&mt&&((a=s=$t)&&(s=nM(s,i.pendingProps,zi),s!==null?(i.stateNode=s,En=i,$t=null,a=!0):a=!1),a||Xl(i)),null;case 13:return Z_(a,i,s);case 4:return Re(i,i.stateNode.containerInfo),c=i.pendingProps,a===null?i.child=rr(i,null,c,s):Ka(a,i,c,s),i.child;case 11:return z_(a,i,i.type,i.pendingProps,s);case 7:return Ka(a,i,i.pendingProps,s),i.child;case 8:return Ka(a,i,i.pendingProps.children,s),i.child;case 12:return Ka(a,i,i.pendingProps.children,s),i.child;case 10:return c=i.pendingProps,Yo(i,i.type,c.value),Ka(a,i,c.children,s),i.child;case 9:return f=i.type._context,c=i.pendingProps.children,Zl(i),f=tn(f),c=c(f),i.flags|=1,Ka(a,i,c,s),i.child;case 14:return j_(a,i,i.type,i.pendingProps,s);case 15:return Y_(a,i,i.type,i.pendingProps,s);case 19:return $_(a,i,s);case 31:return c=i.pendingProps,s=i.mode,c={mode:c.mode,children:c.children},a===null?(s=Xd(c,s),s.ref=i.ref,i.child=s,s.return=i,i=s):(s=uo(a.child,c),s.ref=i.ref,i.child=s,s.return=i,i=s),i;case 22:return K_(a,i,s);case 24:return Zl(i),c=tn(pa),a===null?(f=oA(),f===null&&(f=kt,m=nA(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=s),f=m),i.memoizedState={parent:c,cache:f},sA(i),Yo(i,pa,f)):((a.lanes&s)!==0&&(rA(a,i),Bc(i,null,null,s),Gc()),f=a.memoizedState,m=i.memoizedState,f.parent!==c?(f={parent:c,cache:c},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Yo(i,pa,c)):(c=m.cache,Yo(i,pa,c),c!==f.cache&&aA(i,[pa],s,!0))),Ka(a,i,i.pendingProps.children,s),i.child;case 29:throw i.pendingProps}throw Error(o(156,i.tag))}function So(a){a.flags|=4}function eg(a,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!rN(i)){if(i=si.current,i!==null&&((ct&4194048)===ct?ji!==null:(ct&62914560)!==ct&&(ct&536870912)===0||i!==ji))throw Pc=lA,PI;a.flags|=8192}}function qd(a,i){i!==null&&(a.flags|=4),a.flags&16384&&(i=a.tag!==22?LS():536870912,a.lanes|=i,Er|=i)}function Wc(a,i){if(!mt)switch(a.tailMode){case"hidden":i=a.tail;for(var s=null;i!==null;)i.alternate!==null&&(s=i),i=i.sibling;s===null?a.tail=null:s.sibling=null;break;case"collapsed":s=a.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?i||a.tail===null?a.tail=null:a.tail.sibling=null:c.sibling=null}}function jt(a){var i=a.alternate!==null&&a.alternate.child===a.child,s=0,c=0;if(i)for(var f=a.child;f!==null;)s|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=a,f=f.sibling;else for(f=a.child;f!==null;)s|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=a,f=f.sibling;return a.subtreeFlags|=c,a.childLanes=s,i}function yv(a,i,s){var c=i.pendingProps;switch($f(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jt(i),null;case 1:return jt(i),null;case 3:return s=i.stateNode,c=null,a!==null&&(c=a.memoizedState.cache),i.memoizedState.cache!==c&&(i.flags|=2048),Ao(pa),Ce(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(a===null||a.child===null)&&(vc(i)?So(i):a===null||a.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,LI())),jt(i),null;case 26:return s=i.memoizedState,a===null?(So(i),s!==null?(jt(i),eg(i,s)):(jt(i),i.flags&=-16777217)):s?s!==a.memoizedState?(So(i),jt(i),eg(i,s)):(jt(i),i.flags&=-16777217):(a.memoizedProps!==c&&So(i),jt(i),i.flags&=-16777217),null;case 27:_e(i),s=re.current;var f=i.type;if(a!==null&&i.stateNode!=null)a.memoizedProps!==c&&So(i);else{if(!c){if(i.stateNode===null)throw Error(o(166));return jt(i),null}a=J.current,vc(i)?vI(i):(a=eN(f,c,s),i.stateNode=a,So(i))}return jt(i),null;case 5:if(_e(i),s=i.type,a!==null&&i.stateNode!=null)a.memoizedProps!==c&&So(i);else{if(!c){if(i.stateNode===null)throw Error(o(166));return jt(i),null}if(a=J.current,vc(i))vI(i);else{switch(f=rE(re.current),a){case 1:a=f.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:a=f.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":a=f.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":a=f.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":a=f.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof c.is=="string"?f.createElement("select",{is:c.is}):f.createElement("select"),c.multiple?a.multiple=!0:c.size&&(a.size=c.size);break;default:a=typeof c.is=="string"?f.createElement(s,{is:c.is}):f.createElement(s)}}a[en]=i,a[bn]=c;e:for(f=i.child;f!==null;){if(f.tag===5||f.tag===6)a.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===i)break e;for(;f.sibling===null;){if(f.return===null||f.return===i)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}i.stateNode=a;e:switch(Wa(a,s,c),s){case"button":case"input":case"select":case"textarea":a=!!c.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&So(i)}}return jt(i),i.flags&=-16777217,null;case 6:if(a&&i.stateNode!=null)a.memoizedProps!==c&&So(i);else{if(typeof c!="string"&&i.stateNode===null)throw Error(o(166));if(a=re.current,vc(i)){if(a=i.stateNode,s=i.memoizedProps,c=null,f=En,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}a[en]=i,a=!!(a.nodeValue===s||c!==null&&c.suppressHydrationWarning===!0||Wg(a.nodeValue,s)),a||Xl(i)}else a=rE(a).createTextNode(c),a[en]=i,i.stateNode=a}return jt(i),null;case 13:if(c=i.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(f=vc(i),c!==null&&c.dehydrated!==null){if(a===null){if(!f)throw Error(o(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(o(317));f[en]=i}else Mc(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;jt(i),f=!1}else f=LI(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(Ro(i),i):(Ro(i),null)}if(Ro(i),(i.flags&128)!==0)return i.lanes=s,i;if(s=c!==null,a=a!==null&&a.memoizedState!==null,s){c=i.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool);var m=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==f&&(c.flags|=2048)}return s!==a&&s&&(i.child.flags|=8192),qd(i,i.updateQueue),jt(i),null;case 4:return Ce(),a===null&&um(i.stateNode.containerInfo),jt(i),null;case 10:return Ao(i.type),jt(i),null;case 19:if(F(Ca),f=i.memoizedState,f===null)return jt(i),null;if(c=(i.flags&128)!==0,m=f.rendering,m===null)if(c)Wc(f,!1);else{if(Jt!==0||a!==null&&(a.flags&128)!==0)for(a=i.child;a!==null;){if(m=Yd(a),m!==null){for(i.flags|=128,Wc(f,!1),a=m.updateQueue,i.updateQueue=a,qd(i,a),i.subtreeFlags=0,a=s,s=i.child;s!==null;)DI(s,a),s=s.sibling;return G(Ca,Ca.current&1|2),i.child}a=a.sibling}f.tail!==null&&Ze()>$d&&(i.flags|=128,c=!0,Wc(f,!1),i.lanes=4194304)}else{if(!c)if(a=Yd(m),a!==null){if(i.flags|=128,c=!0,a=a.updateQueue,i.updateQueue=a,qd(i,a),Wc(f,!0),f.tail===null&&f.tailMode==="hidden"&&!m.alternate&&!mt)return jt(i),null}else 2*Ze()-f.renderingStartTime>$d&&s!==536870912&&(i.flags|=128,c=!0,Wc(f,!1),i.lanes=4194304);f.isBackwards?(m.sibling=i.child,i.child=m):(a=f.last,a!==null?a.sibling=m:i.child=m,f.last=m)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=Ze(),i.sibling=null,a=Ca.current,G(Ca,c?a&1|2:a&1),i):(jt(i),null);case 22:case 23:return Ro(i),EA(),c=i.memoizedState!==null,a!==null?a.memoizedState!==null!==c&&(i.flags|=8192):c&&(i.flags|=8192),c?(s&536870912)!==0&&(i.flags&128)===0&&(jt(i),i.subtreeFlags&6&&(i.flags|=8192)):jt(i),s=i.updateQueue,s!==null&&qd(i,s.retryQueue),s=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),c=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),c!==s&&(i.flags|=2048),a!==null&&F(Ql),null;case 24:return s=null,a!==null&&(s=a.memoizedState.cache),i.memoizedState.cache!==s&&(i.flags|=2048),Ao(pa),jt(i),null;case 25:return null;case 30:return null}throw Error(o(156,i.tag))}function vv(a,i){switch($f(i),i.tag){case 1:return a=i.flags,a&65536?(i.flags=a&-65537|128,i):null;case 3:return Ao(pa),Ce(),a=i.flags,(a&65536)!==0&&(a&128)===0?(i.flags=a&-65537|128,i):null;case 26:case 27:case 5:return _e(i),null;case 13:if(Ro(i),a=i.memoizedState,a!==null&&a.dehydrated!==null){if(i.alternate===null)throw Error(o(340));Mc()}return a=i.flags,a&65536?(i.flags=a&-65537|128,i):null;case 19:return F(Ca),null;case 4:return Ce(),null;case 10:return Ao(i.type),null;case 22:case 23:return Ro(i),EA(),a!==null&&F(Ql),a=i.flags,a&65536?(i.flags=a&-65537|128,i):null;case 24:return Ao(pa),null;case 25:return null;default:return null}}function tg(a,i){switch($f(i),i.tag){case 3:Ao(pa),Ce();break;case 26:case 27:case 5:_e(i);break;case 4:Ce();break;case 13:Ro(i);break;case 19:F(Ca);break;case 10:Ao(i.type);break;case 22:case 23:Ro(i),EA(),a!==null&&F(Ql);break;case 24:Ao(pa)}}function Xc(a,i){try{var s=i.updateQueue,c=s!==null?s.lastEffect:null;if(c!==null){var f=c.next;s=f;do{if((s.tag&a)===a){c=void 0;var m=s.create,g=s.inst;c=m(),g.destroy=c}s=s.next}while(s!==f)}}catch(y){yt(i,i.return,y)}}function Qo(a,i,s){try{var c=i.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var m=f.next;c=m;do{if((c.tag&a)===a){var g=c.inst,y=g.destroy;if(y!==void 0){g.destroy=void 0,f=i;var z=s,ne=y;try{ne()}catch(me){yt(f,z,me)}}}c=c.next}while(c!==m)}}catch(me){yt(i,i.return,me)}}function ag(a){var i=a.updateQueue;if(i!==null){var s=a.stateNode;try{jI(i,s)}catch(c){yt(a,a.return,c)}}}function ng(a,i,s){s.props=Jl(a.type,a.memoizedProps),s.state=a.memoizedState;try{s.componentWillUnmount()}catch(c){yt(a,i,c)}}function qc(a,i){try{var s=a.ref;if(s!==null){switch(a.tag){case 26:case 27:case 5:var c=a.stateNode;break;case 30:c=a.stateNode;break;default:c=a.stateNode}typeof s=="function"?a.refCleanup=s(c):s.current=c}}catch(f){yt(a,i,f)}}function Yi(a,i){var s=a.ref,c=a.refCleanup;if(s!==null)if(typeof c=="function")try{c()}catch(f){yt(a,i,f)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(f){yt(a,i,f)}else s.current=null}function ig(a){var i=a.type,s=a.memoizedProps,c=a.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":s.autoFocus&&c.focus();break e;case"img":s.src?c.src=s.src:s.srcSet&&(c.srcset=s.srcSet)}}catch(f){yt(a,a.return,f)}}function BA(a,i,s){try{var c=a.stateNode;Qv(c,a.type,s,i),c[bn]=i}catch(f){yt(a,a.return,f)}}function og(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&ol(a.type)||a.tag===4}function FA(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||og(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&ol(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function zA(a,i,s){var c=a.tag;if(c===5||c===6)a=a.stateNode,i?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(a,i):(i=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,i.appendChild(a),s=s._reactRootContainer,s!=null||i.onclick!==null||(i.onclick=sE));else if(c!==4&&(c===27&&ol(a.type)&&(s=a.stateNode,i=null),a=a.child,a!==null))for(zA(a,i,s),a=a.sibling;a!==null;)zA(a,i,s),a=a.sibling}function Zd(a,i,s){var c=a.tag;if(c===5||c===6)a=a.stateNode,i?s.insertBefore(a,i):s.appendChild(a);else if(c!==4&&(c===27&&ol(a.type)&&(s=a.stateNode),a=a.child,a!==null))for(Zd(a,i,s),a=a.sibling;a!==null;)Zd(a,i,s),a=a.sibling}function lg(a){var i=a.stateNode,s=a.memoizedProps;try{for(var c=a.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);Wa(i,c,s),i[en]=a,i[bn]=s}catch(m){yt(a,a.return,m)}}var Io=!1,ha=!1,jA=!1,sg=typeof WeakSet=="function"?WeakSet:Set,Ha=null;function Mv(a,i){if(a=a.containerInfo,hm=fE,a=TI(a),Ff(a)){if("selectionStart"in a)var s={start:a.selectionStart,end:a.selectionEnd};else e:{s=(s=a.ownerDocument)&&s.defaultView||window;var c=s.getSelection&&s.getSelection();if(c&&c.rangeCount!==0){s=c.anchorNode;var f=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{s.nodeType,m.nodeType}catch{s=null;break e}var g=0,y=-1,z=-1,ne=0,me=0,Se=a,se=null;t:for(;;){for(var ce;Se!==s||f!==0&&Se.nodeType!==3||(y=g+f),Se!==m||c!==0&&Se.nodeType!==3||(z=g+c),Se.nodeType===3&&(g+=Se.nodeValue.length),(ce=Se.firstChild)!==null;)se=Se,Se=ce;for(;;){if(Se===a)break t;if(se===s&&++ne===f&&(y=g),se===m&&++me===c&&(z=g),(ce=Se.nextSibling)!==null)break;Se=se,se=Se.parentNode}Se=ce}s=y===-1||z===-1?null:{start:y,end:z}}else s=null}s=s||{start:0,end:0}}else s=null;for(fm={focusedElem:a,selectionRange:s},fE=!1,Ha=i;Ha!==null;)if(i=Ha,a=i.child,(i.subtreeFlags&1024)!==0&&a!==null)a.return=i,Ha=a;else for(;Ha!==null;){switch(i=Ha,m=i.alternate,a=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&m!==null){a=void 0,s=i,f=m.memoizedProps,m=m.memoizedState,c=s.stateNode;try{var Be=Jl(s.type,f,s.elementType===s.type);a=c.getSnapshotBeforeUpdate(Be,m),c.__reactInternalSnapshotBeforeUpdate=a}catch(Pe){yt(s,s.return,Pe)}}break;case 3:if((a&1024)!==0){if(a=i.stateNode.containerInfo,s=a.nodeType,s===9)Rm(a);else if(s===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":Rm(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(o(163))}if(a=i.sibling,a!==null){a.return=i.return,Ha=a;break}Ha=i.return}}function rg(a,i,s){var c=s.flags;switch(s.tag){case 0:case 11:case 15:$o(a,s),c&4&&Xc(5,s);break;case 1:if($o(a,s),c&4)if(a=s.stateNode,i===null)try{a.componentDidMount()}catch(g){yt(s,s.return,g)}else{var f=Jl(s.type,i.memoizedProps);i=i.memoizedState;try{a.componentDidUpdate(f,i,a.__reactInternalSnapshotBeforeUpdate)}catch(g){yt(s,s.return,g)}}c&64&&ag(s),c&512&&qc(s,s.return);break;case 3:if($o(a,s),c&64&&(a=s.updateQueue,a!==null)){if(i=null,s.child!==null)switch(s.child.tag){case 27:case 5:i=s.child.stateNode;break;case 1:i=s.child.stateNode}try{jI(a,i)}catch(g){yt(s,s.return,g)}}break;case 27:i===null&&c&4&&lg(s);case 26:case 5:$o(a,s),i===null&&c&4&&ig(s),c&512&&qc(s,s.return);break;case 12:$o(a,s);break;case 13:$o(a,s),c&4&&dg(a,s),c&64&&(a=s.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(s=Bv.bind(null,s),iM(a,s))));break;case 22:if(c=s.memoizedState!==null||Io,!c){i=i!==null&&i.memoizedState!==null||ha,f=Io;var m=ha;Io=c,(ha=i)&&!m?Jo(a,s,(s.subtreeFlags&8772)!==0):$o(a,s),Io=f,ha=m}break;case 30:break;default:$o(a,s)}}function cg(a){var i=a.alternate;i!==null&&(a.alternate=null,cg(i)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(i=a.stateNode,i!==null&&gf(i)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var Bt=null,vn=!1;function _o(a,i,s){for(s=s.child;s!==null;)ug(a,i,s),s=s.sibling}function ug(a,i,s){if(Gn&&typeof Gn.onCommitFiberUnmount=="function")try{Gn.onCommitFiberUnmount(mc,s)}catch{}switch(s.tag){case 26:ha||Yi(s,i),_o(a,i,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:ha||Yi(s,i);var c=Bt,f=vn;ol(s.type)&&(Bt=s.stateNode,vn=!1),_o(a,i,s),iu(s.stateNode),Bt=c,vn=f;break;case 5:ha||Yi(s,i);case 6:if(c=Bt,f=vn,Bt=null,_o(a,i,s),Bt=c,vn=f,Bt!==null)if(vn)try{(Bt.nodeType===9?Bt.body:Bt.nodeName==="HTML"?Bt.ownerDocument.body:Bt).removeChild(s.stateNode)}catch(m){yt(s,i,m)}else try{Bt.removeChild(s.stateNode)}catch(m){yt(s,i,m)}break;case 18:Bt!==null&&(vn?(a=Bt,$g(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.stateNode),Eu(a)):$g(Bt,s.stateNode));break;case 4:c=Bt,f=vn,Bt=s.stateNode.containerInfo,vn=!0,_o(a,i,s),Bt=c,vn=f;break;case 0:case 11:case 14:case 15:ha||Qo(2,s,i),ha||Qo(4,s,i),_o(a,i,s);break;case 1:ha||(Yi(s,i),c=s.stateNode,typeof c.componentWillUnmount=="function"&&ng(s,i,c)),_o(a,i,s);break;case 21:_o(a,i,s);break;case 22:ha=(c=ha)||s.memoizedState!==null,_o(a,i,s),ha=c;break;default:_o(a,i,s)}}function dg(a,i){if(i.memoizedState===null&&(a=i.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{Eu(a)}catch(s){yt(i,i.return,s)}}function Lv(a){switch(a.tag){case 13:case 19:var i=a.stateNode;return i===null&&(i=a.stateNode=new sg),i;case 22:return a=a.stateNode,i=a._retryCache,i===null&&(i=a._retryCache=new sg),i;default:throw Error(o(435,a.tag))}}function YA(a,i){var s=Lv(a);i.forEach(function(c){var f=Fv.bind(null,a,c);s.has(c)||(s.add(c),c.then(f,f))})}function jn(a,i){var s=i.deletions;if(s!==null)for(var c=0;c<s.length;c++){var f=s[c],m=a,g=i,y=g;e:for(;y!==null;){switch(y.tag){case 27:if(ol(y.type)){Bt=y.stateNode,vn=!1;break e}break;case 5:Bt=y.stateNode,vn=!1;break e;case 3:case 4:Bt=y.stateNode.containerInfo,vn=!0;break e}y=y.return}if(Bt===null)throw Error(o(160));ug(m,g,f),Bt=null,vn=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)Eg(i,a),i=i.sibling}var gi=null;function Eg(a,i){var s=a.alternate,c=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:jn(i,a),Yn(a),c&4&&(Qo(3,a,a.return),Xc(3,a),Qo(5,a,a.return));break;case 1:jn(i,a),Yn(a),c&512&&(ha||s===null||Yi(s,s.return)),c&64&&Io&&(a=a.updateQueue,a!==null&&(c=a.callbacks,c!==null&&(s=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=s===null?c:s.concat(c))));break;case 26:var f=gi;if(jn(i,a),Yn(a),c&512&&(ha||s===null||Yi(s,s.return)),c&4){var m=s!==null?s.memoizedState:null;if(c=a.memoizedState,s===null)if(c===null)if(a.stateNode===null){e:{c=a.type,s=a.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Sc]||m[en]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(c),f.head.insertBefore(m,f.querySelector("head > title"))),Wa(m,c,s),m[en]=a,Ma(m),c=m;break e;case"link":var g=lN("link","href",f).get(c+(s.href||""));if(g){for(var y=0;y<g.length;y++)if(m=g[y],m.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&m.getAttribute("rel")===(s.rel==null?null:s.rel)&&m.getAttribute("title")===(s.title==null?null:s.title)&&m.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){g.splice(y,1);break t}}m=f.createElement(c),Wa(m,c,s),f.head.appendChild(m);break;case"meta":if(g=lN("meta","content",f).get(c+(s.content||""))){for(y=0;y<g.length;y++)if(m=g[y],m.getAttribute("content")===(s.content==null?null:""+s.content)&&m.getAttribute("name")===(s.name==null?null:s.name)&&m.getAttribute("property")===(s.property==null?null:s.property)&&m.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&m.getAttribute("charset")===(s.charSet==null?null:s.charSet)){g.splice(y,1);break t}}m=f.createElement(c),Wa(m,c,s),f.head.appendChild(m);break;default:throw Error(o(468,c))}m[en]=a,Ma(m),c=m}a.stateNode=c}else sN(f,a.type,a.stateNode);else a.stateNode=oN(f,c,a.memoizedProps);else m!==c?(m===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):m.count--,c===null?sN(f,a.type,a.stateNode):oN(f,c,a.memoizedProps)):c===null&&a.stateNode!==null&&BA(a,a.memoizedProps,s.memoizedProps)}break;case 27:jn(i,a),Yn(a),c&512&&(ha||s===null||Yi(s,s.return)),s!==null&&c&4&&BA(a,a.memoizedProps,s.memoizedProps);break;case 5:if(jn(i,a),Yn(a),c&512&&(ha||s===null||Yi(s,s.return)),a.flags&32){f=a.stateNode;try{Ys(f,"")}catch(ce){yt(a,a.return,ce)}}c&4&&a.stateNode!=null&&(f=a.memoizedProps,BA(a,f,s!==null?s.memoizedProps:f)),c&1024&&(jA=!0);break;case 6:if(jn(i,a),Yn(a),c&4){if(a.stateNode===null)throw Error(o(162));c=a.memoizedProps,s=a.stateNode;try{s.nodeValue=c}catch(ce){yt(a,a.return,ce)}}break;case 3:if(dE=null,f=gi,gi=cE(i.containerInfo),jn(i,a),gi=f,Yn(a),c&4&&s!==null&&s.memoizedState.isDehydrated)try{Eu(i.containerInfo)}catch(ce){yt(a,a.return,ce)}jA&&(jA=!1,hg(a));break;case 4:c=gi,gi=cE(a.stateNode.containerInfo),jn(i,a),Yn(a),gi=c;break;case 12:jn(i,a),Yn(a);break;case 13:jn(i,a),Yn(a),a.child.flags&8192&&a.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(ZA=Ze()),c&4&&(c=a.updateQueue,c!==null&&(a.updateQueue=null,YA(a,c)));break;case 22:f=a.memoizedState!==null;var z=s!==null&&s.memoizedState!==null,ne=Io,me=ha;if(Io=ne||f,ha=me||z,jn(i,a),ha=me,Io=ne,Yn(a),c&8192)e:for(i=a.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(s===null||z||Io||ha||es(a)),s=null,i=a;;){if(i.tag===5||i.tag===26){if(s===null){z=s=i;try{if(m=z.stateNode,f)g=m.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none";else{y=z.stateNode;var Se=z.memoizedProps.style,se=Se!=null&&Se.hasOwnProperty("display")?Se.display:null;y.style.display=se==null||typeof se=="boolean"?"":(""+se).trim()}}catch(ce){yt(z,z.return,ce)}}}else if(i.tag===6){if(s===null){z=i;try{z.stateNode.nodeValue=f?"":z.memoizedProps}catch(ce){yt(z,z.return,ce)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===a)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;s===i&&(s=null),i=i.return}s===i&&(s=null),i.sibling.return=i.return,i=i.sibling}c&4&&(c=a.updateQueue,c!==null&&(s=c.retryQueue,s!==null&&(c.retryQueue=null,YA(a,s))));break;case 19:jn(i,a),Yn(a),c&4&&(c=a.updateQueue,c!==null&&(a.updateQueue=null,YA(a,c)));break;case 30:break;case 21:break;default:jn(i,a),Yn(a)}}function Yn(a){var i=a.flags;if(i&2){try{for(var s,c=a.return;c!==null;){if(og(c)){s=c;break}c=c.return}if(s==null)throw Error(o(160));switch(s.tag){case 27:var f=s.stateNode,m=FA(a);Zd(a,m,f);break;case 5:var g=s.stateNode;s.flags&32&&(Ys(g,""),s.flags&=-33);var y=FA(a);Zd(a,y,g);break;case 3:case 4:var z=s.stateNode.containerInfo,ne=FA(a);zA(a,ne,z);break;default:throw Error(o(161))}}catch(me){yt(a,a.return,me)}a.flags&=-3}i&4096&&(a.flags&=-4097)}function hg(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var i=a;hg(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),a=a.sibling}}function $o(a,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)rg(a,i.alternate,i),i=i.sibling}function es(a){for(a=a.child;a!==null;){var i=a;switch(i.tag){case 0:case 11:case 14:case 15:Qo(4,i,i.return),es(i);break;case 1:Yi(i,i.return);var s=i.stateNode;typeof s.componentWillUnmount=="function"&&ng(i,i.return,s),es(i);break;case 27:iu(i.stateNode);case 26:case 5:Yi(i,i.return),es(i);break;case 22:i.memoizedState===null&&es(i);break;case 30:es(i);break;default:es(i)}a=a.sibling}}function Jo(a,i,s){for(s=s&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var c=i.alternate,f=a,m=i,g=m.flags;switch(m.tag){case 0:case 11:case 15:Jo(f,m,s),Xc(4,m);break;case 1:if(Jo(f,m,s),c=m,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(ne){yt(c,c.return,ne)}if(c=m,f=c.updateQueue,f!==null){var y=c.stateNode;try{var z=f.shared.hiddenCallbacks;if(z!==null)for(f.shared.hiddenCallbacks=null,f=0;f<z.length;f++)zI(z[f],y)}catch(ne){yt(c,c.return,ne)}}s&&g&64&&ag(m),qc(m,m.return);break;case 27:lg(m);case 26:case 5:Jo(f,m,s),s&&c===null&&g&4&&ig(m),qc(m,m.return);break;case 12:Jo(f,m,s);break;case 13:Jo(f,m,s),s&&g&4&&dg(f,m);break;case 22:m.memoizedState===null&&Jo(f,m,s),qc(m,m.return);break;case 30:break;default:Jo(f,m,s)}i=i.sibling}}function KA(a,i){var s=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),a=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),a!==s&&(a!=null&&a.refCount++,s!=null&&Uc(s))}function VA(a,i){a=null,i.alternate!==null&&(a=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==a&&(i.refCount++,a!=null&&Uc(a))}function Ki(a,i,s,c){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)fg(a,i,s,c),i=i.sibling}function fg(a,i,s,c){var f=i.flags;switch(i.tag){case 0:case 11:case 15:Ki(a,i,s,c),f&2048&&Xc(9,i);break;case 1:Ki(a,i,s,c);break;case 3:Ki(a,i,s,c),f&2048&&(a=null,i.alternate!==null&&(a=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==a&&(i.refCount++,a!=null&&Uc(a)));break;case 12:if(f&2048){Ki(a,i,s,c),a=i.stateNode;try{var m=i.memoizedProps,g=m.id,y=m.onPostCommit;typeof y=="function"&&y(g,i.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(z){yt(i,i.return,z)}}else Ki(a,i,s,c);break;case 13:Ki(a,i,s,c);break;case 23:break;case 22:m=i.stateNode,g=i.alternate,i.memoizedState!==null?m._visibility&2?Ki(a,i,s,c):Zc(a,i):m._visibility&2?Ki(a,i,s,c):(m._visibility|=2,cr(a,i,s,c,(i.subtreeFlags&10256)!==0)),f&2048&&KA(g,i);break;case 24:Ki(a,i,s,c),f&2048&&VA(i.alternate,i);break;default:Ki(a,i,s,c)}}function cr(a,i,s,c,f){for(f=f&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var m=a,g=i,y=s,z=c,ne=g.flags;switch(g.tag){case 0:case 11:case 15:cr(m,g,y,z,f),Xc(8,g);break;case 23:break;case 22:var me=g.stateNode;g.memoizedState!==null?me._visibility&2?cr(m,g,y,z,f):Zc(m,g):(me._visibility|=2,cr(m,g,y,z,f)),f&&ne&2048&&KA(g.alternate,g);break;case 24:cr(m,g,y,z,f),f&&ne&2048&&VA(g.alternate,g);break;default:cr(m,g,y,z,f)}i=i.sibling}}function Zc(a,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var s=a,c=i,f=c.flags;switch(c.tag){case 22:Zc(s,c),f&2048&&KA(c.alternate,c);break;case 24:Zc(s,c),f&2048&&VA(c.alternate,c);break;default:Zc(s,c)}i=i.sibling}}var Qc=8192;function ur(a){if(a.subtreeFlags&Qc)for(a=a.child;a!==null;)Ag(a),a=a.sibling}function Ag(a){switch(a.tag){case 26:ur(a),a.flags&Qc&&a.memoizedState!==null&&RM(gi,a.memoizedState,a.memoizedProps);break;case 5:ur(a);break;case 3:case 4:var i=gi;gi=cE(a.stateNode.containerInfo),ur(a),gi=i;break;case 22:a.memoizedState===null&&(i=a.alternate,i!==null&&i.memoizedState!==null?(i=Qc,Qc=16777216,ur(a),Qc=i):ur(a));break;default:ur(a)}}function mg(a){var i=a.alternate;if(i!==null&&(a=i.child,a!==null)){i.child=null;do i=a.sibling,a.sibling=null,a=i;while(a!==null)}}function $c(a){var i=a.deletions;if((a.flags&16)!==0){if(i!==null)for(var s=0;s<i.length;s++){var c=i[s];Ha=c,Tg(c,a)}mg(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Rg(a),a=a.sibling}function Rg(a){switch(a.tag){case 0:case 11:case 15:$c(a),a.flags&2048&&Qo(9,a,a.return);break;case 3:$c(a);break;case 12:$c(a);break;case 22:var i=a.stateNode;a.memoizedState!==null&&i._visibility&2&&(a.return===null||a.return.tag!==13)?(i._visibility&=-3,Qd(a)):$c(a);break;default:$c(a)}}function Qd(a){var i=a.deletions;if((a.flags&16)!==0){if(i!==null)for(var s=0;s<i.length;s++){var c=i[s];Ha=c,Tg(c,a)}mg(a)}for(a=a.child;a!==null;){switch(i=a,i.tag){case 0:case 11:case 15:Qo(8,i,i.return),Qd(i);break;case 22:s=i.stateNode,s._visibility&2&&(s._visibility&=-3,Qd(i));break;default:Qd(i)}a=a.sibling}}function Tg(a,i){for(;Ha!==null;){var s=Ha;switch(s.tag){case 0:case 11:case 15:Qo(8,s,i);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var c=s.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Uc(s.memoizedState.cache)}if(c=s.child,c!==null)c.return=s,Ha=c;else e:for(s=a;Ha!==null;){c=Ha;var f=c.sibling,m=c.return;if(cg(c),c===s){Ha=null;break e}if(f!==null){f.return=m,Ha=f;break e}Ha=m}}}var Hv={getCacheForType:function(a){var i=tn(pa),s=i.data.get(a);return s===void 0&&(s=a(),i.data.set(a,s)),s}},Uv=typeof WeakMap=="function"?WeakMap:Map,Tt=0,kt=null,at=null,ct=0,St=0,Kn=null,el=!1,dr=!1,WA=!1,go=0,Jt=0,tl=0,ts=0,XA=0,ri=0,Er=0,Jc=null,Mn=null,qA=!1,ZA=0,$d=1/0,Jd=null,al=null,Va=0,nl=null,hr=null,fr=0,QA=0,$A=null,Sg=null,eu=0,JA=null;function Vn(){if((Tt&2)!==0&&ct!==0)return ct&-ct;if(Y.T!==null){var a=tr;return a!==0?a:lm()}return kS()}function Ig(){ri===0&&(ri=(ct&536870912)===0||mt?MS():536870912);var a=si.current;return a!==null&&(a.flags|=32),ri}function Wn(a,i,s){(a===kt&&(St===2||St===9)||a.cancelPendingCommit!==null)&&(Ar(a,0),il(a,ct,ri,!1)),Tc(a,s),((Tt&2)===0||a!==kt)&&(a===kt&&((Tt&2)===0&&(ts|=s),Jt===4&&il(a,ct,ri,!1)),Vi(a))}function _g(a,i,s){if((Tt&6)!==0)throw Error(o(327));var c=!s&&(i&124)===0&&(i&a.expiredLanes)===0||Rc(a,i),f=c?Pv(a,i):am(a,i,!0),m=c;do{if(f===0){dr&&!c&&il(a,i,0,!1);break}else{if(s=a.current.alternate,m&&!kv(s)){f=am(a,i,!1),m=!1;continue}if(f===2){if(m=i,a.errorRecoveryDisabledLanes&m)var g=0;else g=a.pendingLanes&-536870913,g=g!==0?g:g&536870912?536870912:0;if(g!==0){i=g;e:{var y=a;f=Jc;var z=y.current.memoizedState.isDehydrated;if(z&&(Ar(y,g).flags|=256),g=am(y,g,!1),g!==2){if(WA&&!z){y.errorRecoveryDisabledLanes|=m,ts|=m,f=4;break e}m=Mn,Mn=f,m!==null&&(Mn===null?Mn=m:Mn.push.apply(Mn,m))}f=g}if(m=!1,f!==2)continue}}if(f===1){Ar(a,0),il(a,i,0,!0);break}e:{switch(c=a,m=f,m){case 0:case 1:throw Error(o(345));case 4:if((i&4194048)!==i)break;case 6:il(c,i,ri,!el);break e;case 2:Mn=null;break;case 3:case 5:break;default:throw Error(o(329))}if((i&62914560)===i&&(f=ZA+300-Ze(),10<f)){if(il(c,i,ri,!el),ud(c,0,!0)!==0)break e;c.timeoutHandle=Zg(gg.bind(null,c,s,Mn,Jd,qA,i,ri,ts,Er,el,m,2,-0,0),f);break e}gg(c,s,Mn,Jd,qA,i,ri,ts,Er,el,m,0,-0,0)}}break}while(!0);Vi(a)}function gg(a,i,s,c,f,m,g,y,z,ne,me,Se,se,ce){if(a.timeoutHandle=-1,Se=i.subtreeFlags,(Se&8192||(Se&16785408)===16785408)&&(su={stylesheets:null,count:0,unsuspend:mM},Ag(i),Se=TM(),Se!==null)){a.cancelPendingCommit=Se(yg.bind(null,a,i,m,s,c,f,g,y,z,me,1,se,ce)),il(a,m,g,!ne);return}yg(a,i,m,s,c,f,g,y,z)}function kv(a){for(var i=a;;){var s=i.tag;if((s===0||s===11||s===15)&&i.flags&16384&&(s=i.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var c=0;c<s.length;c++){var f=s[c],m=f.getSnapshot;f=f.value;try{if(!Fn(m(),f))return!1}catch{return!1}}if(s=i.child,i.subtreeFlags&16384&&s!==null)s.return=i,i=s;else{if(i===a)break;for(;i.sibling===null;){if(i.return===null||i.return===a)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function il(a,i,s,c){i&=~XA,i&=~ts,a.suspendedLanes|=i,a.pingedLanes&=~i,c&&(a.warmLanes|=i),c=a.expirationTimes;for(var f=i;0<f;){var m=31-Bn(f),g=1<<m;c[m]=-1,f&=~g}s!==0&&HS(a,s,i)}function eE(){return(Tt&6)===0?(tu(0),!1):!0}function em(){if(at!==null){if(St===0)var a=at.return;else a=at,fo=ql=null,RA(a),sr=null,Kc=0,a=at;for(;a!==null;)tg(a.alternate,a),a=a.return;at=null}}function Ar(a,i){var s=a.timeoutHandle;s!==-1&&(a.timeoutHandle=-1,Jv(s)),s=a.cancelPendingCommit,s!==null&&(a.cancelPendingCommit=null,s()),em(),kt=a,at=s=uo(a.current,null),ct=i,St=0,Kn=null,el=!1,dr=Rc(a,i),WA=!1,Er=ri=XA=ts=tl=Jt=0,Mn=Jc=null,qA=!1,(i&8)!==0&&(i|=i&32);var c=a.entangledLanes;if(c!==0)for(a=a.entanglements,c&=i;0<c;){var f=31-Bn(c),m=1<<f;i|=a[f],c&=~m}return go=i,gd(),s}function Ng(a,i){Je=null,Y.H=Fd,i===xc||i===Md?(i=BI(),St=3):i===PI?(i=BI(),St=4):St=i===F_?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Kn=i,at===null&&(Jt=1,Vd(a,ni(i,a.current)))}function pg(){var a=Y.H;return Y.H=Fd,a===null?Fd:a}function Cg(){var a=Y.A;return Y.A=Hv,a}function tm(){Jt=4,el||(ct&4194048)!==ct&&si.current!==null||(dr=!0),(tl&134217727)===0&&(ts&134217727)===0||kt===null||il(kt,ct,ri,!1)}function am(a,i,s){var c=Tt;Tt|=2;var f=pg(),m=Cg();(kt!==a||ct!==i)&&(Jd=null,Ar(a,i)),i=!1;var g=Jt;e:do try{if(St!==0&&at!==null){var y=at,z=Kn;switch(St){case 8:em(),g=6;break e;case 3:case 2:case 9:case 6:si.current===null&&(i=!0);var ne=St;if(St=0,Kn=null,mr(a,y,z,ne),s&&dr){g=0;break e}break;default:ne=St,St=0,Kn=null,mr(a,y,z,ne)}}xv(),g=Jt;break}catch(me){Ng(a,me)}while(!0);return i&&a.shellSuspendCounter++,fo=ql=null,Tt=c,Y.H=f,Y.A=m,at===null&&(kt=null,ct=0,gd()),g}function xv(){for(;at!==null;)Og(at)}function Pv(a,i){var s=Tt;Tt|=2;var c=pg(),f=Cg();kt!==a||ct!==i?(Jd=null,$d=Ze()+500,Ar(a,i)):dr=Rc(a,i);e:do try{if(St!==0&&at!==null){i=at;var m=Kn;t:switch(St){case 1:St=0,Kn=null,mr(a,i,m,1);break;case 2:case 9:if(wI(m)){St=0,Kn=null,bg(i);break}i=function(){St!==2&&St!==9||kt!==a||(St=7),Vi(a)},m.then(i,i);break e;case 3:St=7;break e;case 4:St=5;break e;case 7:wI(m)?(St=0,Kn=null,bg(i)):(St=0,Kn=null,mr(a,i,m,7));break;case 5:var g=null;switch(at.tag){case 26:g=at.memoizedState;case 5:case 27:var y=at;if(!g||rN(g)){St=0,Kn=null;var z=y.sibling;if(z!==null)at=z;else{var ne=y.return;ne!==null?(at=ne,tE(ne)):at=null}break t}}St=0,Kn=null,mr(a,i,m,5);break;case 6:St=0,Kn=null,mr(a,i,m,6);break;case 8:em(),Jt=6;break e;default:throw Error(o(462))}}wv();break}catch(me){Ng(a,me)}while(!0);return fo=ql=null,Y.H=c,Y.A=f,Tt=s,at!==null?0:(kt=null,ct=0,gd(),Jt)}function wv(){for(;at!==null&&!Le();)Og(at)}function Og(a){var i=J_(a.alternate,a,go);a.memoizedProps=a.pendingProps,i===null?tE(a):at=i}function bg(a){var i=a,s=i.alternate;switch(i.tag){case 15:case 0:i=W_(s,i,i.pendingProps,i.type,void 0,ct);break;case 11:i=W_(s,i,i.pendingProps,i.type.render,i.ref,ct);break;case 5:RA(i);default:tg(s,i),i=at=DI(i,go),i=J_(s,i,go)}a.memoizedProps=a.pendingProps,i===null?tE(a):at=i}function mr(a,i,s,c){fo=ql=null,RA(i),sr=null,Kc=0;var f=i.return;try{if(bv(a,f,i,s,ct)){Jt=1,Vd(a,ni(s,a.current)),at=null;return}}catch(m){if(f!==null)throw at=f,m;Jt=1,Vd(a,ni(s,a.current)),at=null;return}i.flags&32768?(mt||c===1?a=!0:dr||(ct&536870912)!==0?a=!1:(el=a=!0,(c===2||c===9||c===3||c===6)&&(c=si.current,c!==null&&c.tag===13&&(c.flags|=16384))),Dg(i,a)):tE(i)}function tE(a){var i=a;do{if((i.flags&32768)!==0){Dg(i,el);return}a=i.return;var s=yv(i.alternate,i,go);if(s!==null){at=s;return}if(i=i.sibling,i!==null){at=i;return}at=i=a}while(i!==null);Jt===0&&(Jt=5)}function Dg(a,i){do{var s=vv(a.alternate,a);if(s!==null){s.flags&=32767,at=s;return}if(s=a.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!i&&(a=a.sibling,a!==null)){at=a;return}at=a=s}while(a!==null);Jt=6,at=null}function yg(a,i,s,c,f,m,g,y,z){a.cancelPendingCommit=null;do aE();while(Va!==0);if((Tt&6)!==0)throw Error(o(327));if(i!==null){if(i===a.current)throw Error(o(177));if(m=i.lanes|i.childLanes,m|=Vf,my(a,s,m,g,y,z),a===kt&&(at=kt=null,ct=0),hr=i,nl=a,fr=s,QA=m,$A=f,Sg=c,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,zv(Qt,function(){return Ug(),null})):(a.callbackNode=null,a.callbackPriority=0),c=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||c){c=Y.T,Y.T=null,f=P.p,P.p=2,g=Tt,Tt|=4;try{Mv(a,i,s)}finally{Tt=g,P.p=f,Y.T=c}}Va=1,vg(),Mg(),Lg()}}function vg(){if(Va===1){Va=0;var a=nl,i=hr,s=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||s){s=Y.T,Y.T=null;var c=P.p;P.p=2;var f=Tt;Tt|=4;try{Eg(i,a);var m=fm,g=TI(a.containerInfo),y=m.focusedElem,z=m.selectionRange;if(g!==y&&y&&y.ownerDocument&&RI(y.ownerDocument.documentElement,y)){if(z!==null&&Ff(y)){var ne=z.start,me=z.end;if(me===void 0&&(me=ne),"selectionStart"in y)y.selectionStart=ne,y.selectionEnd=Math.min(me,y.value.length);else{var Se=y.ownerDocument||document,se=Se&&Se.defaultView||window;if(se.getSelection){var ce=se.getSelection(),Be=y.textContent.length,Pe=Math.min(z.start,Be),Ct=z.end===void 0?Pe:Math.min(z.end,Be);!ce.extend&&Pe>Ct&&(g=Ct,Ct=Pe,Pe=g);var q=mI(y,Pe),V=mI(y,Ct);if(q&&V&&(ce.rangeCount!==1||ce.anchorNode!==q.node||ce.anchorOffset!==q.offset||ce.focusNode!==V.node||ce.focusOffset!==V.offset)){var te=Se.createRange();te.setStart(q.node,q.offset),ce.removeAllRanges(),Pe>Ct?(ce.addRange(te),ce.extend(V.node,V.offset)):(te.setEnd(V.node,V.offset),ce.addRange(te))}}}}for(Se=[],ce=y;ce=ce.parentNode;)ce.nodeType===1&&Se.push({element:ce,left:ce.scrollLeft,top:ce.scrollTop});for(typeof y.focus=="function"&&y.focus(),y=0;y<Se.length;y++){var Te=Se[y];Te.element.scrollLeft=Te.left,Te.element.scrollTop=Te.top}}fE=!!hm,fm=hm=null}finally{Tt=f,P.p=c,Y.T=s}}a.current=i,Va=2}}function Mg(){if(Va===2){Va=0;var a=nl,i=hr,s=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||s){s=Y.T,Y.T=null;var c=P.p;P.p=2;var f=Tt;Tt|=4;try{rg(a,i.alternate,i)}finally{Tt=f,P.p=c,Y.T=s}}Va=3}}function Lg(){if(Va===4||Va===3){Va=0,Xe();var a=nl,i=hr,s=fr,c=Sg;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Va=5:(Va=0,hr=nl=null,Hg(a,a.pendingLanes));var f=a.pendingLanes;if(f===0&&(al=null),If(s),i=i.stateNode,Gn&&typeof Gn.onCommitFiberRoot=="function")try{Gn.onCommitFiberRoot(mc,i,void 0,(i.current.flags&128)===128)}catch{}if(c!==null){i=Y.T,f=P.p,P.p=2,Y.T=null;try{for(var m=a.onRecoverableError,g=0;g<c.length;g++){var y=c[g];m(y.value,{componentStack:y.stack})}}finally{Y.T=i,P.p=f}}(fr&3)!==0&&aE(),Vi(a),f=a.pendingLanes,(s&4194090)!==0&&(f&42)!==0?a===JA?eu++:(eu=0,JA=a):eu=0,tu(0)}}function Hg(a,i){(a.pooledCacheLanes&=i)===0&&(i=a.pooledCache,i!=null&&(a.pooledCache=null,Uc(i)))}function aE(a){return vg(),Mg(),Lg(),Ug()}function Ug(){if(Va!==5)return!1;var a=nl,i=QA;QA=0;var s=If(fr),c=Y.T,f=P.p;try{P.p=32>s?32:s,Y.T=null,s=$A,$A=null;var m=nl,g=fr;if(Va=0,hr=nl=null,fr=0,(Tt&6)!==0)throw Error(o(331));var y=Tt;if(Tt|=4,Rg(m.current),fg(m,m.current,g,s),Tt=y,tu(0,!1),Gn&&typeof Gn.onPostCommitFiberRoot=="function")try{Gn.onPostCommitFiberRoot(mc,m)}catch{}return!0}finally{P.p=f,Y.T=c,Hg(a,i)}}function kg(a,i,s){i=ni(s,i),i=MA(a.stateNode,i,2),a=Wo(a,i,2),a!==null&&(Tc(a,2),Vi(a))}function yt(a,i,s){if(a.tag===3)kg(a,a,s);else for(;i!==null;){if(i.tag===3){kg(i,a,s);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(al===null||!al.has(c))){a=ni(s,a),s=G_(2),c=Wo(i,s,2),c!==null&&(B_(s,c,i,a),Tc(c,2),Vi(c));break}}i=i.return}}function nm(a,i,s){var c=a.pingCache;if(c===null){c=a.pingCache=new Uv;var f=new Set;c.set(i,f)}else f=c.get(i),f===void 0&&(f=new Set,c.set(i,f));f.has(s)||(WA=!0,f.add(s),a=Gv.bind(null,a,i,s),i.then(a,a))}function Gv(a,i,s){var c=a.pingCache;c!==null&&c.delete(i),a.pingedLanes|=a.suspendedLanes&s,a.warmLanes&=~s,kt===a&&(ct&s)===s&&(Jt===4||Jt===3&&(ct&62914560)===ct&&300>Ze()-ZA?(Tt&2)===0&&Ar(a,0):XA|=s,Er===ct&&(Er=0)),Vi(a)}function xg(a,i){i===0&&(i=LS()),a=Qs(a,i),a!==null&&(Tc(a,i),Vi(a))}function Bv(a){var i=a.memoizedState,s=0;i!==null&&(s=i.retryLane),xg(a,s)}function Fv(a,i){var s=0;switch(a.tag){case 13:var c=a.stateNode,f=a.memoizedState;f!==null&&(s=f.retryLane);break;case 19:c=a.stateNode;break;case 22:c=a.stateNode._retryCache;break;default:throw Error(o(314))}c!==null&&c.delete(i),xg(a,s)}function zv(a,i){return le(a,i)}var nE=null,Rr=null,im=!1,iE=!1,om=!1,as=0;function Vi(a){a!==Rr&&a.next===null&&(Rr===null?nE=Rr=a:Rr=Rr.next=a),iE=!0,im||(im=!0,Yv())}function tu(a,i){if(!om&&iE){om=!0;do for(var s=!1,c=nE;c!==null;){if(a!==0){var f=c.pendingLanes;if(f===0)var m=0;else{var g=c.suspendedLanes,y=c.pingedLanes;m=(1<<31-Bn(42|a)+1)-1,m&=f&~(g&~y),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(s=!0,Bg(c,m))}else m=ct,m=ud(c,c===kt?m:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(m&3)===0||Rc(c,m)||(s=!0,Bg(c,m));c=c.next}while(s);om=!1}}function jv(){Pg()}function Pg(){iE=im=!1;var a=0;as!==0&&($v()&&(a=as),as=0);for(var i=Ze(),s=null,c=nE;c!==null;){var f=c.next,m=wg(c,i);m===0?(c.next=null,s===null?nE=f:s.next=f,f===null&&(Rr=s)):(s=c,(a!==0||(m&3)!==0)&&(iE=!0)),c=f}tu(a)}function wg(a,i){for(var s=a.suspendedLanes,c=a.pingedLanes,f=a.expirationTimes,m=a.pendingLanes&-62914561;0<m;){var g=31-Bn(m),y=1<<g,z=f[g];z===-1?((y&s)===0||(y&c)!==0)&&(f[g]=Ay(y,i)):z<=i&&(a.expiredLanes|=y),m&=~y}if(i=kt,s=ct,s=ud(a,a===i?s:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),c=a.callbackNode,s===0||a===i&&(St===2||St===9)||a.cancelPendingCommit!==null)return c!==null&&c!==null&&Ne(c),a.callbackNode=null,a.callbackPriority=0;if((s&3)===0||Rc(a,s)){if(i=s&-s,i===a.callbackPriority)return i;switch(c!==null&&Ne(c),If(s)){case 2:case 8:s=At;break;case 32:s=Qt;break;case 268435456:s=xs;break;default:s=Qt}return c=Gg.bind(null,a),s=le(s,c),a.callbackPriority=i,a.callbackNode=s,i}return c!==null&&c!==null&&Ne(c),a.callbackPriority=2,a.callbackNode=null,2}function Gg(a,i){if(Va!==0&&Va!==5)return a.callbackNode=null,a.callbackPriority=0,null;var s=a.callbackNode;if(aE()&&a.callbackNode!==s)return null;var c=ct;return c=ud(a,a===kt?c:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),c===0?null:(_g(a,c,i),wg(a,Ze()),a.callbackNode!=null&&a.callbackNode===s?Gg.bind(null,a):null)}function Bg(a,i){if(aE())return null;_g(a,i,!0)}function Yv(){eM(function(){(Tt&6)!==0?le(Ke,jv):Pg()})}function lm(){return as===0&&(as=MS()),as}function Fg(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:Ad(""+a)}function zg(a,i){var s=i.ownerDocument.createElement("input");return s.name=i.name,s.value=i.value,a.id&&s.setAttribute("form",a.id),i.parentNode.insertBefore(s,i),a=new FormData(a),s.parentNode.removeChild(s),a}function Kv(a,i,s,c,f){if(i==="submit"&&s&&s.stateNode===f){var m=Fg((f[bn]||null).action),g=c.submitter;g&&(i=(i=g[bn]||null)?Fg(i.formAction):g.getAttribute("formAction"),i!==null&&(m=i,g=null));var y=new Sd("action","action",null,c,f);a.push({event:y,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(as!==0){var z=g?zg(f,g):new FormData(f);OA(s,{pending:!0,data:z,method:f.method,action:m},null,z)}}else typeof m=="function"&&(y.preventDefault(),z=g?zg(f,g):new FormData(f),OA(s,{pending:!0,data:z,method:f.method,action:m},m,z))},currentTarget:f}]})}}for(var sm=0;sm<Kf.length;sm++){var rm=Kf[sm],Vv=rm.toLowerCase(),Wv=rm[0].toUpperCase()+rm.slice(1);_i(Vv,"on"+Wv)}_i(_I,"onAnimationEnd"),_i(gI,"onAnimationIteration"),_i(NI,"onAnimationStart"),_i("dblclick","onDoubleClick"),_i("focusin","onFocus"),_i("focusout","onBlur"),_i(uv,"onTransitionRun"),_i(dv,"onTransitionStart"),_i(Ev,"onTransitionCancel"),_i(pI,"onTransitionEnd"),Fs("onMouseEnter",["mouseout","mouseover"]),Fs("onMouseLeave",["mouseout","mouseover"]),Fs("onPointerEnter",["pointerout","pointerover"]),Fs("onPointerLeave",["pointerout","pointerover"]),Bl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Bl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Bl("onBeforeInput",["compositionend","keypress","textInput","paste"]),Bl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Bl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Bl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var au="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xv=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(au));function jg(a,i){i=(i&4)!==0;for(var s=0;s<a.length;s++){var c=a[s],f=c.event;c=c.listeners;e:{var m=void 0;if(i)for(var g=c.length-1;0<=g;g--){var y=c[g],z=y.instance,ne=y.currentTarget;if(y=y.listener,z!==m&&f.isPropagationStopped())break e;m=y,f.currentTarget=ne;try{m(f)}catch(me){Kd(me)}f.currentTarget=null,m=z}else for(g=0;g<c.length;g++){if(y=c[g],z=y.instance,ne=y.currentTarget,y=y.listener,z!==m&&f.isPropagationStopped())break e;m=y,f.currentTarget=ne;try{m(f)}catch(me){Kd(me)}f.currentTarget=null,m=z}}}}function nt(a,i){var s=i[_f];s===void 0&&(s=i[_f]=new Set);var c=a+"__bubble";s.has(c)||(Yg(i,a,2,!1),s.add(c))}function cm(a,i,s){var c=0;i&&(c|=4),Yg(s,a,c,i)}var oE="_reactListening"+Math.random().toString(36).slice(2);function um(a){if(!a[oE]){a[oE]=!0,PS.forEach(function(s){s!=="selectionchange"&&(Xv.has(s)||cm(s,!1,a),cm(s,!0,a))});var i=a.nodeType===9?a:a.ownerDocument;i===null||i[oE]||(i[oE]=!0,cm("selectionchange",!1,i))}}function Yg(a,i,s,c){switch(fN(i)){case 2:var f=_M;break;case 8:f=gM;break;default:f=pm}s=f.bind(null,i,s,a),f=void 0,!Lf||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),c?f!==void 0?a.addEventListener(i,s,{capture:!0,passive:f}):a.addEventListener(i,s,!0):f!==void 0?a.addEventListener(i,s,{passive:f}):a.addEventListener(i,s,!1)}function dm(a,i,s,c,f){var m=c;if((i&1)===0&&(i&2)===0&&c!==null)e:for(;;){if(c===null)return;var g=c.tag;if(g===3||g===4){var y=c.stateNode.containerInfo;if(y===f)break;if(g===4)for(g=c.return;g!==null;){var z=g.tag;if((z===3||z===4)&&g.stateNode.containerInfo===f)return;g=g.return}for(;y!==null;){if(g=ws(y),g===null)return;if(z=g.tag,z===5||z===6||z===26||z===27){c=m=g;continue e}y=y.parentNode}}c=c.return}QS(function(){var ne=m,me=vf(s),Se=[];e:{var se=CI.get(a);if(se!==void 0){var ce=Sd,Be=a;switch(a){case"keypress":if(Rd(s)===0)break e;case"keydown":case"keyup":ce=zy;break;case"focusin":Be="focus",ce=xf;break;case"focusout":Be="blur",ce=xf;break;case"beforeblur":case"afterblur":ce=xf;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=eI;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=vy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=Ky;break;case _I:case gI:case NI:ce=Hy;break;case pI:ce=Wy;break;case"scroll":case"scrollend":ce=Dy;break;case"wheel":ce=qy;break;case"copy":case"cut":case"paste":ce=ky;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=aI;break;case"toggle":case"beforetoggle":ce=Qy}var Pe=(i&4)!==0,Ct=!Pe&&(a==="scroll"||a==="scrollend"),q=Pe?se!==null?se+"Capture":null:se;Pe=[];for(var V=ne,te;V!==null;){var Te=V;if(te=Te.stateNode,Te=Te.tag,Te!==5&&Te!==26&&Te!==27||te===null||q===null||(Te=_c(V,q),Te!=null&&Pe.push(nu(V,Te,te))),Ct)break;V=V.return}0<Pe.length&&(se=new ce(se,Be,null,s,me),Se.push({event:se,listeners:Pe}))}}if((i&7)===0){e:{if(se=a==="mouseover"||a==="pointerover",ce=a==="mouseout"||a==="pointerout",se&&s!==yf&&(Be=s.relatedTarget||s.fromElement)&&(ws(Be)||Be[Ps]))break e;if((ce||se)&&(se=me.window===me?me:(se=me.ownerDocument)?se.defaultView||se.parentWindow:window,ce?(Be=s.relatedTarget||s.toElement,ce=ne,Be=Be?ws(Be):null,Be!==null&&(Ct=r(Be),Pe=Be.tag,Be!==Ct||Pe!==5&&Pe!==27&&Pe!==6)&&(Be=null)):(ce=null,Be=ne),ce!==Be)){if(Pe=eI,Te="onMouseLeave",q="onMouseEnter",V="mouse",(a==="pointerout"||a==="pointerover")&&(Pe=aI,Te="onPointerLeave",q="onPointerEnter",V="pointer"),Ct=ce==null?se:Ic(ce),te=Be==null?se:Ic(Be),se=new Pe(Te,V+"leave",ce,s,me),se.target=Ct,se.relatedTarget=te,Te=null,ws(me)===ne&&(Pe=new Pe(q,V+"enter",Be,s,me),Pe.target=te,Pe.relatedTarget=Ct,Te=Pe),Ct=Te,ce&&Be)t:{for(Pe=ce,q=Be,V=0,te=Pe;te;te=Tr(te))V++;for(te=0,Te=q;Te;Te=Tr(Te))te++;for(;0<V-te;)Pe=Tr(Pe),V--;for(;0<te-V;)q=Tr(q),te--;for(;V--;){if(Pe===q||q!==null&&Pe===q.alternate)break t;Pe=Tr(Pe),q=Tr(q)}Pe=null}else Pe=null;ce!==null&&Kg(Se,se,ce,Pe,!1),Be!==null&&Ct!==null&&Kg(Se,Ct,Be,Pe,!0)}}e:{if(se=ne?Ic(ne):window,ce=se.nodeName&&se.nodeName.toLowerCase(),ce==="select"||ce==="input"&&se.type==="file")var De=uI;else if(rI(se))if(dI)De=sv;else{De=ov;var et=iv}else ce=se.nodeName,!ce||ce.toLowerCase()!=="input"||se.type!=="checkbox"&&se.type!=="radio"?ne&&Df(ne.elementType)&&(De=uI):De=lv;if(De&&(De=De(a,ne))){cI(Se,De,s,me);break e}et&&et(a,se,ne),a==="focusout"&&ne&&se.type==="number"&&ne.memoizedProps.value!=null&&bf(se,"number",se.value)}switch(et=ne?Ic(ne):window,a){case"focusin":(rI(et)||et.contentEditable==="true")&&(Xs=et,zf=ne,yc=null);break;case"focusout":yc=zf=Xs=null;break;case"mousedown":jf=!0;break;case"contextmenu":case"mouseup":case"dragend":jf=!1,SI(Se,s,me);break;case"selectionchange":if(cv)break;case"keydown":case"keyup":SI(Se,s,me)}var He;if(wf)e:{switch(a){case"compositionstart":var we="onCompositionStart";break e;case"compositionend":we="onCompositionEnd";break e;case"compositionupdate":we="onCompositionUpdate";break e}we=void 0}else Ws?lI(a,s)&&(we="onCompositionEnd"):a==="keydown"&&s.keyCode===229&&(we="onCompositionStart");we&&(nI&&s.locale!=="ko"&&(Ws||we!=="onCompositionStart"?we==="onCompositionEnd"&&Ws&&(He=$S()):(jo=me,Hf="value"in jo?jo.value:jo.textContent,Ws=!0)),et=lE(ne,we),0<et.length&&(we=new tI(we,a,null,s,me),Se.push({event:we,listeners:et}),He?we.data=He:(He=sI(s),He!==null&&(we.data=He)))),(He=Jy?ev(a,s):tv(a,s))&&(we=lE(ne,"onBeforeInput"),0<we.length&&(et=new tI("onBeforeInput","beforeinput",null,s,me),Se.push({event:et,listeners:we}),et.data=He)),Kv(Se,a,ne,s,me)}jg(Se,i)})}function nu(a,i,s){return{instance:a,listener:i,currentTarget:s}}function lE(a,i){for(var s=i+"Capture",c=[];a!==null;){var f=a,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=_c(a,s),f!=null&&c.unshift(nu(a,f,m)),f=_c(a,i),f!=null&&c.push(nu(a,f,m))),a.tag===3)return c;a=a.return}return[]}function Tr(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function Kg(a,i,s,c,f){for(var m=i._reactName,g=[];s!==null&&s!==c;){var y=s,z=y.alternate,ne=y.stateNode;if(y=y.tag,z!==null&&z===c)break;y!==5&&y!==26&&y!==27||ne===null||(z=ne,f?(ne=_c(s,m),ne!=null&&g.unshift(nu(s,ne,z))):f||(ne=_c(s,m),ne!=null&&g.push(nu(s,ne,z)))),s=s.return}g.length!==0&&a.push({event:i,listeners:g})}var qv=/\r\n?/g,Zv=/\u0000|\uFFFD/g;function Vg(a){return(typeof a=="string"?a:""+a).replace(qv,`
`).replace(Zv,"")}function Wg(a,i){return i=Vg(i),Vg(a)===i}function sE(){}function pt(a,i,s,c,f,m){switch(s){case"children":typeof c=="string"?i==="body"||i==="textarea"&&c===""||Ys(a,c):(typeof c=="number"||typeof c=="bigint")&&i!=="body"&&Ys(a,""+c);break;case"className":Ed(a,"class",c);break;case"tabIndex":Ed(a,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Ed(a,s,c);break;case"style":qS(a,c,m);break;case"data":if(i!=="object"){Ed(a,"data",c);break}case"src":case"href":if(c===""&&(i!=="a"||s!=="href")){a.removeAttribute(s);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){a.removeAttribute(s);break}c=Ad(""+c),a.setAttribute(s,c);break;case"action":case"formAction":if(typeof c=="function"){a.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(s==="formAction"?(i!=="input"&&pt(a,i,"name",f.name,f,null),pt(a,i,"formEncType",f.formEncType,f,null),pt(a,i,"formMethod",f.formMethod,f,null),pt(a,i,"formTarget",f.formTarget,f,null)):(pt(a,i,"encType",f.encType,f,null),pt(a,i,"method",f.method,f,null),pt(a,i,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){a.removeAttribute(s);break}c=Ad(""+c),a.setAttribute(s,c);break;case"onClick":c!=null&&(a.onclick=sE);break;case"onScroll":c!=null&&nt("scroll",a);break;case"onScrollEnd":c!=null&&nt("scrollend",a);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(o(61));if(s=c.__html,s!=null){if(f.children!=null)throw Error(o(60));a.innerHTML=s}}break;case"multiple":a.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":a.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){a.removeAttribute("xlink:href");break}s=Ad(""+c),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?a.setAttribute(s,""+c):a.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?a.setAttribute(s,""):a.removeAttribute(s);break;case"capture":case"download":c===!0?a.setAttribute(s,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?a.setAttribute(s,c):a.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?a.setAttribute(s,c):a.removeAttribute(s);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?a.removeAttribute(s):a.setAttribute(s,c);break;case"popover":nt("beforetoggle",a),nt("toggle",a),dd(a,"popover",c);break;case"xlinkActuate":ro(a,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":ro(a,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":ro(a,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":ro(a,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":ro(a,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":ro(a,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":ro(a,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":ro(a,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":ro(a,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":dd(a,"is",c);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=Oy.get(s)||s,dd(a,s,c))}}function Em(a,i,s,c,f,m){switch(s){case"style":qS(a,c,m);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(o(61));if(s=c.__html,s!=null){if(f.children!=null)throw Error(o(60));a.innerHTML=s}}break;case"children":typeof c=="string"?Ys(a,c):(typeof c=="number"||typeof c=="bigint")&&Ys(a,""+c);break;case"onScroll":c!=null&&nt("scroll",a);break;case"onScrollEnd":c!=null&&nt("scrollend",a);break;case"onClick":c!=null&&(a.onclick=sE);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!wS.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(f=s.endsWith("Capture"),i=s.slice(2,f?s.length-7:void 0),m=a[bn]||null,m=m!=null?m[s]:null,typeof m=="function"&&a.removeEventListener(i,m,f),typeof c=="function")){typeof m!="function"&&m!==null&&(s in a?a[s]=null:a.hasAttribute(s)&&a.removeAttribute(s)),a.addEventListener(i,c,f);break e}s in a?a[s]=c:c===!0?a.setAttribute(s,""):dd(a,s,c)}}}function Wa(a,i,s){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":nt("error",a),nt("load",a);var c=!1,f=!1,m;for(m in s)if(s.hasOwnProperty(m)){var g=s[m];if(g!=null)switch(m){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,i));default:pt(a,i,m,g,s,null)}}f&&pt(a,i,"srcSet",s.srcSet,s,null),c&&pt(a,i,"src",s.src,s,null);return;case"input":nt("invalid",a);var y=m=g=f=null,z=null,ne=null;for(c in s)if(s.hasOwnProperty(c)){var me=s[c];if(me!=null)switch(c){case"name":f=me;break;case"type":g=me;break;case"checked":z=me;break;case"defaultChecked":ne=me;break;case"value":m=me;break;case"defaultValue":y=me;break;case"children":case"dangerouslySetInnerHTML":if(me!=null)throw Error(o(137,i));break;default:pt(a,i,c,me,s,null)}}KS(a,m,y,z,ne,g,f,!1),hd(a);return;case"select":nt("invalid",a),c=g=m=null;for(f in s)if(s.hasOwnProperty(f)&&(y=s[f],y!=null))switch(f){case"value":m=y;break;case"defaultValue":g=y;break;case"multiple":c=y;default:pt(a,i,f,y,s,null)}i=m,s=g,a.multiple=!!c,i!=null?js(a,!!c,i,!1):s!=null&&js(a,!!c,s,!0);return;case"textarea":nt("invalid",a),m=f=c=null;for(g in s)if(s.hasOwnProperty(g)&&(y=s[g],y!=null))switch(g){case"value":c=y;break;case"defaultValue":f=y;break;case"children":m=y;break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(o(91));break;default:pt(a,i,g,y,s,null)}WS(a,c,f,m),hd(a);return;case"option":for(z in s)if(s.hasOwnProperty(z)&&(c=s[z],c!=null))switch(z){case"selected":a.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:pt(a,i,z,c,s,null)}return;case"dialog":nt("beforetoggle",a),nt("toggle",a),nt("cancel",a),nt("close",a);break;case"iframe":case"object":nt("load",a);break;case"video":case"audio":for(c=0;c<au.length;c++)nt(au[c],a);break;case"image":nt("error",a),nt("load",a);break;case"details":nt("toggle",a);break;case"embed":case"source":case"link":nt("error",a),nt("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ne in s)if(s.hasOwnProperty(ne)&&(c=s[ne],c!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,i));default:pt(a,i,ne,c,s,null)}return;default:if(Df(i)){for(me in s)s.hasOwnProperty(me)&&(c=s[me],c!==void 0&&Em(a,i,me,c,s,void 0));return}}for(y in s)s.hasOwnProperty(y)&&(c=s[y],c!=null&&pt(a,i,y,c,s,null))}function Qv(a,i,s,c){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,g=null,y=null,z=null,ne=null,me=null;for(ce in s){var Se=s[ce];if(s.hasOwnProperty(ce)&&Se!=null)switch(ce){case"checked":break;case"value":break;case"defaultValue":z=Se;default:c.hasOwnProperty(ce)||pt(a,i,ce,null,c,Se)}}for(var se in c){var ce=c[se];if(Se=s[se],c.hasOwnProperty(se)&&(ce!=null||Se!=null))switch(se){case"type":m=ce;break;case"name":f=ce;break;case"checked":ne=ce;break;case"defaultChecked":me=ce;break;case"value":g=ce;break;case"defaultValue":y=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(o(137,i));break;default:ce!==Se&&pt(a,i,se,ce,c,Se)}}Of(a,g,y,z,ne,me,m,f);return;case"select":ce=g=y=se=null;for(m in s)if(z=s[m],s.hasOwnProperty(m)&&z!=null)switch(m){case"value":break;case"multiple":ce=z;default:c.hasOwnProperty(m)||pt(a,i,m,null,c,z)}for(f in c)if(m=c[f],z=s[f],c.hasOwnProperty(f)&&(m!=null||z!=null))switch(f){case"value":se=m;break;case"defaultValue":y=m;break;case"multiple":g=m;default:m!==z&&pt(a,i,f,m,c,z)}i=y,s=g,c=ce,se!=null?js(a,!!s,se,!1):!!c!=!!s&&(i!=null?js(a,!!s,i,!0):js(a,!!s,s?[]:"",!1));return;case"textarea":ce=se=null;for(y in s)if(f=s[y],s.hasOwnProperty(y)&&f!=null&&!c.hasOwnProperty(y))switch(y){case"value":break;case"children":break;default:pt(a,i,y,null,c,f)}for(g in c)if(f=c[g],m=s[g],c.hasOwnProperty(g)&&(f!=null||m!=null))switch(g){case"value":se=f;break;case"defaultValue":ce=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(o(91));break;default:f!==m&&pt(a,i,g,f,c,m)}VS(a,se,ce);return;case"option":for(var Be in s)if(se=s[Be],s.hasOwnProperty(Be)&&se!=null&&!c.hasOwnProperty(Be))switch(Be){case"selected":a.selected=!1;break;default:pt(a,i,Be,null,c,se)}for(z in c)if(se=c[z],ce=s[z],c.hasOwnProperty(z)&&se!==ce&&(se!=null||ce!=null))switch(z){case"selected":a.selected=se&&typeof se!="function"&&typeof se!="symbol";break;default:pt(a,i,z,se,c,ce)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Pe in s)se=s[Pe],s.hasOwnProperty(Pe)&&se!=null&&!c.hasOwnProperty(Pe)&&pt(a,i,Pe,null,c,se);for(ne in c)if(se=c[ne],ce=s[ne],c.hasOwnProperty(ne)&&se!==ce&&(se!=null||ce!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(o(137,i));break;default:pt(a,i,ne,se,c,ce)}return;default:if(Df(i)){for(var Ct in s)se=s[Ct],s.hasOwnProperty(Ct)&&se!==void 0&&!c.hasOwnProperty(Ct)&&Em(a,i,Ct,void 0,c,se);for(me in c)se=c[me],ce=s[me],!c.hasOwnProperty(me)||se===ce||se===void 0&&ce===void 0||Em(a,i,me,se,c,ce);return}}for(var q in s)se=s[q],s.hasOwnProperty(q)&&se!=null&&!c.hasOwnProperty(q)&&pt(a,i,q,null,c,se);for(Se in c)se=c[Se],ce=s[Se],!c.hasOwnProperty(Se)||se===ce||se==null&&ce==null||pt(a,i,Se,se,c,ce)}var hm=null,fm=null;function rE(a){return a.nodeType===9?a:a.ownerDocument}function Xg(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function qg(a,i){if(a===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&i==="foreignObject"?0:a}function Am(a,i){return a==="textarea"||a==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var mm=null;function $v(){var a=window.event;return a&&a.type==="popstate"?a===mm?!1:(mm=a,!0):(mm=null,!1)}var Zg=typeof setTimeout=="function"?setTimeout:void 0,Jv=typeof clearTimeout=="function"?clearTimeout:void 0,Qg=typeof Promise=="function"?Promise:void 0,eM=typeof queueMicrotask=="function"?queueMicrotask:typeof Qg<"u"?function(a){return Qg.resolve(null).then(a).catch(tM)}:Zg;function tM(a){setTimeout(function(){throw a})}function ol(a){return a==="head"}function $g(a,i){var s=i,c=0,f=0;do{var m=s.nextSibling;if(a.removeChild(s),m&&m.nodeType===8)if(s=m.data,s==="/$"){if(0<c&&8>c){s=c;var g=a.ownerDocument;if(s&1&&iu(g.documentElement),s&2&&iu(g.body),s&4)for(s=g.head,iu(s),g=s.firstChild;g;){var y=g.nextSibling,z=g.nodeName;g[Sc]||z==="SCRIPT"||z==="STYLE"||z==="LINK"&&g.rel.toLowerCase()==="stylesheet"||s.removeChild(g),g=y}}if(f===0){a.removeChild(m),Eu(i);return}f--}else s==="$"||s==="$?"||s==="$!"?f++:c=s.charCodeAt(0)-48;else c=0;s=m}while(s);Eu(i)}function Rm(a){var i=a.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var s=i;switch(i=i.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":Rm(s),gf(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}a.removeChild(s)}}function aM(a,i,s,c){for(;a.nodeType===1;){var f=s;if(a.nodeName.toLowerCase()!==i.toLowerCase()){if(!c&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(c){if(!a[Sc])switch(i){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(m=a.getAttribute("rel"),m==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(m!==f.rel||a.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||a.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||a.getAttribute("title")!==(f.title==null?null:f.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(m=a.getAttribute("src"),(m!==(f.src==null?null:f.src)||a.getAttribute("type")!==(f.type==null?null:f.type)||a.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(i==="input"&&a.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&a.getAttribute("name")===m)return a}else return a;if(a=Ni(a.nextSibling),a===null)break}return null}function nM(a,i,s){if(i==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!s||(a=Ni(a.nextSibling),a===null))return null;return a}function Tm(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function iM(a,i){var s=a.ownerDocument;if(a.data!=="$?"||s.readyState==="complete")i();else{var c=function(){i(),s.removeEventListener("DOMContentLoaded",c)};s.addEventListener("DOMContentLoaded",c),a._reactRetry=c}}function Ni(a){for(;a!=null;a=a.nextSibling){var i=a.nodeType;if(i===1||i===3)break;if(i===8){if(i=a.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return a}var Sm=null;function Jg(a){a=a.previousSibling;for(var i=0;a;){if(a.nodeType===8){var s=a.data;if(s==="$"||s==="$!"||s==="$?"){if(i===0)return a;i--}else s==="/$"&&i++}a=a.previousSibling}return null}function eN(a,i,s){switch(i=rE(s),a){case"html":if(a=i.documentElement,!a)throw Error(o(452));return a;case"head":if(a=i.head,!a)throw Error(o(453));return a;case"body":if(a=i.body,!a)throw Error(o(454));return a;default:throw Error(o(451))}}function iu(a){for(var i=a.attributes;i.length;)a.removeAttributeNode(i[0]);gf(a)}var ci=new Map,tN=new Set;function cE(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var No=P.d;P.d={f:oM,r:lM,D:sM,C:rM,L:cM,m:uM,X:EM,S:dM,M:hM};function oM(){var a=No.f(),i=eE();return a||i}function lM(a){var i=Gs(a);i!==null&&i.tag===5&&i.type==="form"?__(i):No.r(a)}var Sr=typeof document>"u"?null:document;function aN(a,i,s){var c=Sr;if(c&&typeof i=="string"&&i){var f=ai(i);f='link[rel="'+a+'"][href="'+f+'"]',typeof s=="string"&&(f+='[crossorigin="'+s+'"]'),tN.has(f)||(tN.add(f),a={rel:a,crossOrigin:s,href:i},c.querySelector(f)===null&&(i=c.createElement("link"),Wa(i,"link",a),Ma(i),c.head.appendChild(i)))}}function sM(a){No.D(a),aN("dns-prefetch",a,null)}function rM(a,i){No.C(a,i),aN("preconnect",a,i)}function cM(a,i,s){No.L(a,i,s);var c=Sr;if(c&&a&&i){var f='link[rel="preload"][as="'+ai(i)+'"]';i==="image"&&s&&s.imageSrcSet?(f+='[imagesrcset="'+ai(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(f+='[imagesizes="'+ai(s.imageSizes)+'"]')):f+='[href="'+ai(a)+'"]';var m=f;switch(i){case"style":m=Ir(a);break;case"script":m=_r(a)}ci.has(m)||(a=R({rel:"preload",href:i==="image"&&s&&s.imageSrcSet?void 0:a,as:i},s),ci.set(m,a),c.querySelector(f)!==null||i==="style"&&c.querySelector(ou(m))||i==="script"&&c.querySelector(lu(m))||(i=c.createElement("link"),Wa(i,"link",a),Ma(i),c.head.appendChild(i)))}}function uM(a,i){No.m(a,i);var s=Sr;if(s&&a){var c=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+ai(c)+'"][href="'+ai(a)+'"]',m=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=_r(a)}if(!ci.has(m)&&(a=R({rel:"modulepreload",href:a},i),ci.set(m,a),s.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(lu(m)))return}c=s.createElement("link"),Wa(c,"link",a),Ma(c),s.head.appendChild(c)}}}function dM(a,i,s){No.S(a,i,s);var c=Sr;if(c&&a){var f=Bs(c).hoistableStyles,m=Ir(a);i=i||"default";var g=f.get(m);if(!g){var y={loading:0,preload:null};if(g=c.querySelector(ou(m)))y.loading=5;else{a=R({rel:"stylesheet",href:a,"data-precedence":i},s),(s=ci.get(m))&&Im(a,s);var z=g=c.createElement("link");Ma(z),Wa(z,"link",a),z._p=new Promise(function(ne,me){z.onload=ne,z.onerror=me}),z.addEventListener("load",function(){y.loading|=1}),z.addEventListener("error",function(){y.loading|=2}),y.loading|=4,uE(g,i,c)}g={type:"stylesheet",instance:g,count:1,state:y},f.set(m,g)}}}function EM(a,i){No.X(a,i);var s=Sr;if(s&&a){var c=Bs(s).hoistableScripts,f=_r(a),m=c.get(f);m||(m=s.querySelector(lu(f)),m||(a=R({src:a,async:!0},i),(i=ci.get(f))&&_m(a,i),m=s.createElement("script"),Ma(m),Wa(m,"link",a),s.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function hM(a,i){No.M(a,i);var s=Sr;if(s&&a){var c=Bs(s).hoistableScripts,f=_r(a),m=c.get(f);m||(m=s.querySelector(lu(f)),m||(a=R({src:a,async:!0,type:"module"},i),(i=ci.get(f))&&_m(a,i),m=s.createElement("script"),Ma(m),Wa(m,"link",a),s.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function nN(a,i,s,c){var f=(f=re.current)?cE(f):null;if(!f)throw Error(o(446));switch(a){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(i=Ir(s.href),s=Bs(f).hoistableStyles,c=s.get(i),c||(c={type:"style",instance:null,count:0,state:null},s.set(i,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){a=Ir(s.href);var m=Bs(f).hoistableStyles,g=m.get(a);if(g||(f=f.ownerDocument||f,g={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(a,g),(m=f.querySelector(ou(a)))&&!m._p&&(g.instance=m,g.state.loading=5),ci.has(a)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},ci.set(a,s),m||fM(f,a,s,g.state))),i&&c===null)throw Error(o(528,""));return g}if(i&&c!==null)throw Error(o(529,""));return null;case"script":return i=s.async,s=s.src,typeof s=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=_r(s),s=Bs(f).hoistableScripts,c=s.get(i),c||(c={type:"script",instance:null,count:0,state:null},s.set(i,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,a))}}function Ir(a){return'href="'+ai(a)+'"'}function ou(a){return'link[rel="stylesheet"]['+a+"]"}function iN(a){return R({},a,{"data-precedence":a.precedence,precedence:null})}function fM(a,i,s,c){a.querySelector('link[rel="preload"][as="style"]['+i+"]")?c.loading=1:(i=a.createElement("link"),c.preload=i,i.addEventListener("load",function(){return c.loading|=1}),i.addEventListener("error",function(){return c.loading|=2}),Wa(i,"link",s),Ma(i),a.head.appendChild(i))}function _r(a){return'[src="'+ai(a)+'"]'}function lu(a){return"script[async]"+a}function oN(a,i,s){if(i.count++,i.instance===null)switch(i.type){case"style":var c=a.querySelector('style[data-href~="'+ai(s.href)+'"]');if(c)return i.instance=c,Ma(c),c;var f=R({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return c=(a.ownerDocument||a).createElement("style"),Ma(c),Wa(c,"style",f),uE(c,s.precedence,a),i.instance=c;case"stylesheet":f=Ir(s.href);var m=a.querySelector(ou(f));if(m)return i.state.loading|=4,i.instance=m,Ma(m),m;c=iN(s),(f=ci.get(f))&&Im(c,f),m=(a.ownerDocument||a).createElement("link"),Ma(m);var g=m;return g._p=new Promise(function(y,z){g.onload=y,g.onerror=z}),Wa(m,"link",c),i.state.loading|=4,uE(m,s.precedence,a),i.instance=m;case"script":return m=_r(s.src),(f=a.querySelector(lu(m)))?(i.instance=f,Ma(f),f):(c=s,(f=ci.get(m))&&(c=R({},s),_m(c,f)),a=a.ownerDocument||a,f=a.createElement("script"),Ma(f),Wa(f,"link",c),a.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(o(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(c=i.instance,i.state.loading|=4,uE(c,s.precedence,a));return i.instance}function uE(a,i,s){for(var c=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,m=f,g=0;g<c.length;g++){var y=c[g];if(y.dataset.precedence===i)m=y;else if(m!==f)break}m?m.parentNode.insertBefore(a,m.nextSibling):(i=s.nodeType===9?s.head:s,i.insertBefore(a,i.firstChild))}function Im(a,i){a.crossOrigin==null&&(a.crossOrigin=i.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=i.referrerPolicy),a.title==null&&(a.title=i.title)}function _m(a,i){a.crossOrigin==null&&(a.crossOrigin=i.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=i.referrerPolicy),a.integrity==null&&(a.integrity=i.integrity)}var dE=null;function lN(a,i,s){if(dE===null){var c=new Map,f=dE=new Map;f.set(s,c)}else f=dE,c=f.get(s),c||(c=new Map,f.set(s,c));if(c.has(a))return c;for(c.set(a,null),s=s.getElementsByTagName(a),f=0;f<s.length;f++){var m=s[f];if(!(m[Sc]||m[en]||a==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var g=m.getAttribute(i)||"";g=a+g;var y=c.get(g);y?y.push(m):c.set(g,[m])}}return c}function sN(a,i,s){a=a.ownerDocument||a,a.head.insertBefore(s,i==="title"?a.querySelector("head > title"):null)}function AM(a,i,s){if(s===1||i.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return a=i.disabled,typeof i.precedence=="string"&&a==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function rN(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var su=null;function mM(){}function RM(a,i,s){if(su===null)throw Error(o(475));var c=su;if(i.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var f=Ir(s.href),m=a.querySelector(ou(f));if(m){a=m._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(c.count++,c=EE.bind(c),a.then(c,c)),i.state.loading|=4,i.instance=m,Ma(m);return}m=a.ownerDocument||a,s=iN(s),(f=ci.get(f))&&Im(s,f),m=m.createElement("link"),Ma(m);var g=m;g._p=new Promise(function(y,z){g.onload=y,g.onerror=z}),Wa(m,"link",s),i.instance=m}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(i,a),(a=i.state.preload)&&(i.state.loading&3)===0&&(c.count++,i=EE.bind(c),a.addEventListener("load",i),a.addEventListener("error",i))}}function TM(){if(su===null)throw Error(o(475));var a=su;return a.stylesheets&&a.count===0&&gm(a,a.stylesheets),0<a.count?function(i){var s=setTimeout(function(){if(a.stylesheets&&gm(a,a.stylesheets),a.unsuspend){var c=a.unsuspend;a.unsuspend=null,c()}},6e4);return a.unsuspend=i,function(){a.unsuspend=null,clearTimeout(s)}}:null}function EE(){if(this.count--,this.count===0){if(this.stylesheets)gm(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var hE=null;function gm(a,i){a.stylesheets=null,a.unsuspend!==null&&(a.count++,hE=new Map,i.forEach(SM,a),hE=null,EE.call(a))}function SM(a,i){if(!(i.state.loading&4)){var s=hE.get(a);if(s)var c=s.get(null);else{s=new Map,hE.set(a,s);for(var f=a.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var g=f[m];(g.nodeName==="LINK"||g.getAttribute("media")!=="not all")&&(s.set(g.dataset.precedence,g),c=g)}c&&s.set(null,c)}f=i.instance,g=f.getAttribute("data-precedence"),m=s.get(g)||c,m===c&&s.set(null,f),s.set(g,f),this.count++,c=EE.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),m?m.parentNode.insertBefore(f,m.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(f,a.firstChild)),i.state.loading|=4}}var ru={$$typeof:k,Provider:null,Consumer:null,_currentValue:K,_currentValue2:K,_threadCount:0};function IM(a,i,s,c,f,m,g,y){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Tf(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Tf(0),this.hiddenUpdates=Tf(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=g,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=y,this.incompleteTransitions=new Map}function cN(a,i,s,c,f,m,g,y,z,ne,me,Se){return a=new IM(a,i,s,g,y,z,ne,Se),i=1,m===!0&&(i|=24),m=zn(3,null,null,i),a.current=m,m.stateNode=a,i=nA(),i.refCount++,a.pooledCache=i,i.refCount++,m.memoizedState={element:c,isDehydrated:s,cache:i},sA(m),a}function uN(a){return a?(a=$s,a):$s}function dN(a,i,s,c,f,m){f=uN(f),c.context===null?c.context=f:c.pendingContext=f,c=Vo(i),c.payload={element:s},m=m===void 0?null:m,m!==null&&(c.callback=m),s=Wo(a,c,i),s!==null&&(Wn(s,a,i),wc(s,a,i))}function EN(a,i){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var s=a.retryLane;a.retryLane=s!==0&&s<i?s:i}}function Nm(a,i){EN(a,i),(a=a.alternate)&&EN(a,i)}function hN(a){if(a.tag===13){var i=Qs(a,67108864);i!==null&&Wn(i,a,67108864),Nm(a,67108864)}}var fE=!0;function _M(a,i,s,c){var f=Y.T;Y.T=null;var m=P.p;try{P.p=2,pm(a,i,s,c)}finally{P.p=m,Y.T=f}}function gM(a,i,s,c){var f=Y.T;Y.T=null;var m=P.p;try{P.p=8,pm(a,i,s,c)}finally{P.p=m,Y.T=f}}function pm(a,i,s,c){if(fE){var f=Cm(c);if(f===null)dm(a,i,c,AE,s),AN(a,c);else if(pM(f,a,i,s,c))c.stopPropagation();else if(AN(a,c),i&4&&-1<NM.indexOf(a)){for(;f!==null;){var m=Gs(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var g=Gl(m.pendingLanes);if(g!==0){var y=m;for(y.pendingLanes|=2,y.entangledLanes|=2;g;){var z=1<<31-Bn(g);y.entanglements[1]|=z,g&=~z}Vi(m),(Tt&6)===0&&($d=Ze()+500,tu(0))}}break;case 13:y=Qs(m,2),y!==null&&Wn(y,m,2),eE(),Nm(m,2)}if(m=Cm(c),m===null&&dm(a,i,c,AE,s),m===f)break;f=m}f!==null&&c.stopPropagation()}else dm(a,i,c,null,s)}}function Cm(a){return a=vf(a),Om(a)}var AE=null;function Om(a){if(AE=null,a=ws(a),a!==null){var i=r(a);if(i===null)a=null;else{var s=i.tag;if(s===13){if(a=d(i),a!==null)return a;a=null}else if(s===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;a=null}else i!==a&&(a=null)}}return AE=a,null}function fN(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Qe()){case Ke:return 2;case At:return 8;case Qt:case wl:return 32;case xs:return 268435456;default:return 32}default:return 32}}var bm=!1,ll=null,sl=null,rl=null,cu=new Map,uu=new Map,cl=[],NM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function AN(a,i){switch(a){case"focusin":case"focusout":ll=null;break;case"dragenter":case"dragleave":sl=null;break;case"mouseover":case"mouseout":rl=null;break;case"pointerover":case"pointerout":cu.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":uu.delete(i.pointerId)}}function du(a,i,s,c,f,m){return a===null||a.nativeEvent!==m?(a={blockedOn:i,domEventName:s,eventSystemFlags:c,nativeEvent:m,targetContainers:[f]},i!==null&&(i=Gs(i),i!==null&&hN(i)),a):(a.eventSystemFlags|=c,i=a.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),a)}function pM(a,i,s,c,f){switch(i){case"focusin":return ll=du(ll,a,i,s,c,f),!0;case"dragenter":return sl=du(sl,a,i,s,c,f),!0;case"mouseover":return rl=du(rl,a,i,s,c,f),!0;case"pointerover":var m=f.pointerId;return cu.set(m,du(cu.get(m)||null,a,i,s,c,f)),!0;case"gotpointercapture":return m=f.pointerId,uu.set(m,du(uu.get(m)||null,a,i,s,c,f)),!0}return!1}function mN(a){var i=ws(a.target);if(i!==null){var s=r(i);if(s!==null){if(i=s.tag,i===13){if(i=d(s),i!==null){a.blockedOn=i,Ry(a.priority,function(){if(s.tag===13){var c=Vn();c=Sf(c);var f=Qs(s,c);f!==null&&Wn(f,s,c),Nm(s,c)}});return}}else if(i===3&&s.stateNode.current.memoizedState.isDehydrated){a.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}a.blockedOn=null}function mE(a){if(a.blockedOn!==null)return!1;for(var i=a.targetContainers;0<i.length;){var s=Cm(a.nativeEvent);if(s===null){s=a.nativeEvent;var c=new s.constructor(s.type,s);yf=c,s.target.dispatchEvent(c),yf=null}else return i=Gs(s),i!==null&&hN(i),a.blockedOn=s,!1;i.shift()}return!0}function RN(a,i,s){mE(a)&&s.delete(i)}function CM(){bm=!1,ll!==null&&mE(ll)&&(ll=null),sl!==null&&mE(sl)&&(sl=null),rl!==null&&mE(rl)&&(rl=null),cu.forEach(RN),uu.forEach(RN)}function RE(a,i){a.blockedOn===i&&(a.blockedOn=null,bm||(bm=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,CM)))}var TE=null;function TN(a){TE!==a&&(TE=a,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){TE===a&&(TE=null);for(var i=0;i<a.length;i+=3){var s=a[i],c=a[i+1],f=a[i+2];if(typeof c!="function"){if(Om(c||s)===null)continue;break}var m=Gs(s);m!==null&&(a.splice(i,3),i-=3,OA(m,{pending:!0,data:f,method:s.method,action:c},c,f))}}))}function Eu(a){function i(z){return RE(z,a)}ll!==null&&RE(ll,a),sl!==null&&RE(sl,a),rl!==null&&RE(rl,a),cu.forEach(i),uu.forEach(i);for(var s=0;s<cl.length;s++){var c=cl[s];c.blockedOn===a&&(c.blockedOn=null)}for(;0<cl.length&&(s=cl[0],s.blockedOn===null);)mN(s),s.blockedOn===null&&cl.shift();if(s=(a.ownerDocument||a).$$reactFormReplay,s!=null)for(c=0;c<s.length;c+=3){var f=s[c],m=s[c+1],g=f[bn]||null;if(typeof m=="function")g||TN(s);else if(g){var y=null;if(m&&m.hasAttribute("formAction")){if(f=m,g=m[bn]||null)y=g.formAction;else if(Om(f)!==null)continue}else y=g.action;typeof y=="function"?s[c+1]=y:(s.splice(c,3),c-=3),TN(s)}}}function Dm(a){this._internalRoot=a}SE.prototype.render=Dm.prototype.render=function(a){var i=this._internalRoot;if(i===null)throw Error(o(409));var s=i.current,c=Vn();dN(s,c,a,i,null,null)},SE.prototype.unmount=Dm.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var i=a.containerInfo;dN(a.current,2,null,a,null,null),eE(),i[Ps]=null}};function SE(a){this._internalRoot=a}SE.prototype.unstable_scheduleHydration=function(a){if(a){var i=kS();a={blockedOn:null,target:a,priority:i};for(var s=0;s<cl.length&&i!==0&&i<cl[s].priority;s++);cl.splice(s,0,a),s===0&&mN(a)}};var SN=t.version;if(SN!=="19.1.0")throw Error(o(527,SN,"19.1.0"));P.findDOMNode=function(a){var i=a._reactInternals;if(i===void 0)throw typeof a.render=="function"?Error(o(188)):(a=Object.keys(a).join(","),Error(o(268,a)));return a=E(i),a=a!==null?A(a):null,a=a===null?null:a.stateNode,a};var OM={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var IE=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!IE.isDisabled&&IE.supportsFiber)try{mc=IE.inject(OM),Gn=IE}catch{}}return fu.createRoot=function(a,i){if(!l(a))throw Error(o(299));var s=!1,c="",f=k_,m=x_,g=P_,y=null;return i!=null&&(i.unstable_strictMode===!0&&(s=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(m=i.onCaughtError),i.onRecoverableError!==void 0&&(g=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(y=i.unstable_transitionCallbacks)),i=cN(a,1,!1,null,null,s,c,f,m,g,y,null),a[Ps]=i.current,um(a),new Dm(i)},fu.hydrateRoot=function(a,i,s){if(!l(a))throw Error(o(299));var c=!1,f="",m=k_,g=x_,y=P_,z=null,ne=null;return s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(f=s.identifierPrefix),s.onUncaughtError!==void 0&&(m=s.onUncaughtError),s.onCaughtError!==void 0&&(g=s.onCaughtError),s.onRecoverableError!==void 0&&(y=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(z=s.unstable_transitionCallbacks),s.formState!==void 0&&(ne=s.formState)),i=cN(a,1,!0,i,s??null,c,f,m,g,y,z,ne),i.context=uN(null),s=i.current,c=Vn(),c=Sf(c),f=Vo(c),f.callback=null,Wo(s,f,c),s=c,i.current.lanes=s,Tc(i,s),Vi(i),a[Ps]=i.current,um(a),new SE(i)},fu.version="19.1.0",fu}var vN;function GM(){if(vN)return Mm.exports;vN=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Mm.exports=wM(),Mm.exports}var BM=GM(),O=iT();const rn=nT(O),Lh=vM({__proto__:null,default:rn},[O]);var CC={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Hr=rn.createContext&&rn.createContext(CC),FM=["attr","size","title"];function zM(e,t){if(e==null)return{};var n=jM(e,t),o,l;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(l=0;l<r.length;l++)o=r[l],!(t.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}function jM(e,t){if(e==null)return{};var n={};for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){if(t.indexOf(o)>=0)continue;n[o]=e[o]}return n}function ZE(){return ZE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},ZE.apply(this,arguments)}function MN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,o)}return n}function QE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?MN(Object(n),!0).forEach(function(o){YM(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MN(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function YM(e,t,n){return t=KM(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function KM(e){var t=VM(e,"string");return typeof t=="symbol"?t:t+""}function VM(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function OC(e){return e&&e.map((t,n)=>rn.createElement(t.tag,QE({key:n},t.attr),OC(t.child)))}function ki(e){return t=>rn.createElement(WM,ZE({attr:QE({},e.attr)},t),OC(e.child))}function WM(e){var t=n=>{var{attr:o,size:l,title:r}=e,d=zM(e,FM),h=l||n.size||"1em",E;return n.className&&(E=n.className),e.className&&(E=(E?E+" ":"")+e.className),rn.createElement("svg",ZE({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,o,d,{className:E,style:QE(QE({color:e.color||n.color},n.style),e.style),height:h,width:h,xmlns:"http://www.w3.org/2000/svg"}),r&&rn.createElement("title",null,r),e.children)};return Hr!==void 0?rn.createElement(Hr.Consumer,null,n=>t(n)):t(CC)}function XM(e){return ki({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M407.8 294.7c-3.3-.4-6.7-.8-10-1.3c3.4 .4 6.7 .9 10 1.3zM288 227.1C261.9 176.4 190.9 81.9 124.9 35.3C61.6-9.4 37.5-1.7 21.6 5.5C3.3 13.8 0 41.9 0 58.4S9.1 194 15 213.9c19.5 65.7 89.1 87.9 153.2 80.7c3.3-.5 6.6-.9 10-1.4c-3.3 .5-6.6 1-10 1.4C74.3 308.6-9.1 342.8 100.3 464.5C220.6 589.1 265.1 437.8 288 361.1c22.9 76.7 49.2 222.5 185.6 103.4c102.4-103.4 28.1-156-65.8-169.9c-3.3-.4-6.7-.8-10-1.3c3.4 .4 6.7 .9 10 1.3c64.1 7.1 133.6-15.1 153.2-80.7C566.9 194 576 75 576 58.4s-3.3-44.7-21.6-52.9c-15.8-7.1-40-14.9-103.2 29.8C385.1 81.9 314.1 176.4 288 227.1z"},child:[]}]})(e)}function qM(e){return ki({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"},child:[]}]})(e)}function ZM(e){return ki({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M192 32c0 17.7 14.3 32 32 32c123.7 0 224 100.3 224 224c0 17.7 14.3 32 32 32s32-14.3 32-32C512 128.9 383.1 0 224 0c-17.7 0-32 14.3-32 32zm0 96c0 17.7 14.3 32 32 32c70.7 0 128 57.3 128 128c0 17.7 14.3 32 32 32s32-14.3 32-32c0-106-86-192-192-192c-17.7 0-32 14.3-32 32zM96 144c0-26.5-21.5-48-48-48S0 117.5 0 144V368c0 79.5 64.5 144 144 144s144-64.5 144-144s-64.5-144-144-144H128v96h16c26.5 0 48 21.5 48 48s-21.5 48-48 48s-48-21.5-48-48V144z"},child:[]}]})(e)}function QM(e){return ki({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"},child:[]}]})(e)}function $M(e){return ki({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M352 144c0-44.2 35.8-80 80-80s80 35.8 80 80v48c0 17.7 14.3 32 32 32s32-14.3 32-32V144C576 64.5 511.5 0 432 0S288 64.5 288 144v48H64c-35.3 0-64 28.7-64 64V448c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V256c0-35.3-28.7-64-64-64H352V144z"},child:[]}]})(e)}function JM(e){return ki({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M144 144v48H304V144c0-44.2-35.8-80-80-80s-80 35.8-80 80zM80 192V144C80 64.5 144.5 0 224 0s144 64.5 144 144v48h16c35.3 0 64 28.7 64 64V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V256c0-35.3 28.7-64 64-64H80z"},child:[]}]})(e)}function eL(e){return ki({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"},child:[]}]})(e)}const tL="7.3",aL=16;var Oa=(e=>(e.Exact="Exact",e.SkillSequence="SkillSequence",e.Edited="Edited",e))(Oa||{}),Mi=(e=>(e.Record="Record",e.SkillSequencePresets="SkillSequencePresets",e.MarkerTrackIndividual="MarkerTrackIndividual",e.MarkerTracksCombined="MarkerTracksCombined",e))(Mi||{}),di=(e=>(e[e.RealTime=0]="RealTime",e[e.RealTimeAutoPause=1]="RealTimeAutoPause",e[e.Manual=2]="Manual",e))(di||{}),vo=(e=>(e[e.Initial=0]="Initial",e[e.FpsTax=1]="FpsTax",e[e.AllaganGcdFormula=2]="AllaganGcdFormula",e))(vo||{});const oT={version:2};let bC=!1;function nL(){return bC}const Hh="DT",Nu=window.location.hostname.startsWith("beta"),iL=localStorage.length===0;function bt(e){const t=localStorage.getItem(Hh+"."+e);return localStorage.getItem(e)!==null&&(bC=!0),t}function It(e,t){localStorage.setItem(Hh+"."+e,t)}function TR(e){localStorage.removeItem(Hh+"."+e)}function DC(){Object.keys(localStorage).forEach(e=>{e.startsWith(Hh+".")&&localStorage.removeItem(e)})}function yC(e,t){const n=e in xm?xm[e]:xm.NEVER;return t>=n.level}const ae=()=>e=>e,oL=ae()({BENEFIC:{id:3594,name:"Benefic",label:{zh:"吉星",ja:"ベネフィク"}},LIGHTSPEED:{id:3606,name:"Lightspeed",label:{zh:"光速",ja:"ライトスピード"}},HELIOS:{id:3600,name:"Helios",label:{zh:"阳星",ja:"ヘリオス"}},ASCEND:{id:3603,name:"Ascend",label:{zh:"生辰",ja:"アセンド"}},ESSENTIAL_DIGNITY:{id:3614,name:"Essential Dignity",label:{zh:"先天禀赋",ja:"ディグニティ"}},BENEFIC_II:{id:3610,name:"Benefic II",label:{zh:"福星",ja:"ベネフィラ"}},ASTRAL_DRAW:{id:37017,name:"Astral Draw",label:{zh:"星极抽卡",ja:"アストラルドロー"}},UMBRAL_DRAW:{id:37018,name:"Umbral Draw",label:{zh:"灵极抽卡",ja:"アンブラルドロー"}},PLAY_I:{id:37019,name:"Play I",label:{zh:"出卡I",ja:"プレイI"}},PLAY_II:{id:37020,name:"Play II",label:{zh:"出卡II",ja:"プレイII"}},PLAY_III:{id:37021,name:"Play III",label:{zh:"出卡III",ja:"プレイIII"}},ASPECTED_BENEFIC:{id:3595,name:"Aspected Benefic",label:{zh:"吉星相位",ja:"アスペクト・ベネフィク"}},ASPECTED_HELIOS:{id:3601,name:"Aspected Helios",label:{zh:"阳星相位",ja:"アスペクト・ヘリオス"}},GRAVITY:{id:3615,name:"Gravity",label:{zh:"重力",ja:"グラビデ"}},COMBUST_II:{id:3608,name:"Combust II",label:{zh:"炽灼",ja:"コンバラ"}},SYNASTRY:{id:3612,name:"Synastry",label:{zh:"星位合图",ja:"シナストリー"}},DIVINATION:{id:16552,name:"Divination",label:{zh:"占卜",ja:"ディヴィネーション"}},COLLECTIVE_UNCONSCIOUS:{id:3613,name:"Collective Unconscious",label:{zh:"命运之轮",ja:"運命の輪"}},CELESTIAL_OPPOSITION:{id:16553,name:"Celestial Opposition",label:{zh:"天星冲日",ja:"星天対抗"}},EARTHLY_STAR:{id:7439,name:"Earthly Star",label:{zh:"地星",ja:"アーサリースター"}},STELLAR_DETONATION:{id:8324,name:"Stellar Detonation",label:{zh:"星体爆轰",ja:"ステラデトネーション"}},MALEFIC_III:{id:7442,name:"Malefic III",label:{zh:"祸星",ja:"マレフィガ"}},MINOR_ARCANA:{id:37022,name:"Minor Arcana",label:{zh:"小奥秘卡",ja:"マイナーアルカナ"}},COMBUST_III:{id:16554,name:"Combust III",label:{zh:"焚灼",ja:"コンバガ"}},MALEFIC_IV:{id:16555,name:"Malefic IV",label:{zh:"煞星",ja:"マレフィジャ"}},CELESTIAL_INTERSECTION:{id:16556,name:"Celestial Intersection",label:{zh:"天星交错",ja:"星天交差"}},HOROSCOPE:{id:16557,name:"Horoscope",label:{zh:"天宫图",ja:"ホロスコープ"}},HOROSCOPE_RECAST:{id:16558,name:"Horoscope (Recast)",label:{zh:"天宫图（重复）",ja:"ホロスコープ"}},NEUTRAL_SECT:{id:16559,name:"Neutral Sect",label:{zh:"中间学派",ja:"ニュートラルセクト"}},FALL_MALEFIC:{id:25871,name:"Fall Malefic",label:{zh:"落陷凶星",ja:"フォールマレフィク"}},GRAVITY_II:{id:25872,name:"Gravity II",label:{zh:"中重力",ja:"グラビラ"}},EXALTATION:{id:25873,name:"Exaltation",label:{zh:"擢升",ja:"エクザルテーション"}},MACROCOSMOS:{id:25874,name:"Macrocosmos",label:{zh:"大宇宙",ja:"マクロコスモス"}},MICROCOSMOS:{id:25875,name:"Microcosmos",label:{zh:"小宇宙",ja:"ミクロコスモス"}},ORACLE:{id:37029,name:"Oracle",label:{zh:"神谕",ja:"オラクル"}},HELIOS_CONJUNCTION:{id:37030,name:"Helios Conjunction",label:{zh:"阳星合相",ja:"コンジャンクション・ヘリオス"}},SUN_SIGN:{id:37031,name:"Sun Sign",label:{zh:"太阳星座",ja:"サンサイン"}},THE_BALANCE:{id:37023,name:"The Balance",label:{zh:"太阳神之衡",ja:"アーゼマの均衡"}},THE_ARROW:{id:37024,name:"The Arrow",label:{zh:"放浪神之箭",ja:"オシュオンの矢"}},THE_SPIRE:{id:37025,name:"The Spire",label:{zh:"建筑神之塔",ja:"ビエルゴの塔"}},THE_SPEAR:{id:37026,name:"The Spear",label:{zh:"战争神之枪",ja:"ハルオーネの槍"}},THE_BOLE:{id:37027,name:"The Bole",label:{zh:"世界树之干",ja:"世界樹の幹"}},THE_EWER:{id:37028,name:"The Ewer",label:{zh:"河流神之瓶",ja:"サリャクの水瓶"}},LORD_OF_CROWNS:{id:7444,name:"Lord of Crowns",label:{zh:"王冠之领主",ja:"クラウンロード"}},LADY_OF_CROWNS:{id:7445,name:"Lady of Crowns",label:{zh:"王冠之贵妇",ja:"クラウンレディ"}}}),lL=ae()({cd_LIGHTSPEED:{name:"cd_Lightspeed"},cd_ESSENTIAL_DIGNITY:{name:"cd_EssentialDignity"},cd_ASTRAL_DRAW:{name:"cd_AstralDraw"},cd_PLAY_I:{name:"cd_PlayI"},cd_PLAY_II:{name:"cd_PlayII"},cd_PLAY_III:{name:"cd_PlayIII"},cd_SYNASTRY:{name:"cd_Synastry"},cd_DIVINATION:{name:"cd_Divination"},cd_COLLECTIVE_UNCONSCIOUS:{name:"cd_CollectiveUnconscious"},cd_CELESTIAL_OPPOSITION:{name:"cd_CelestialOpposition"},cd_EARTHLY_STAR:{name:"cd_EarthlyStar"},cd_STELLAR_DETONATION:{name:"cd_StellarDetonation"},cd_MINOR_ARCANA:{name:"cd_MinorArcana"},cd_CELESTIAL_INTERSECTION:{name:"cd_CelestialIntersection"},cd_HOROSCOPE:{name:"cd_Horoscope"},cd_HOROSCOPE_RECAST:{name:"cd_HoroscopeRecast"},cd_NEUTRAL_SECT:{name:"cd_NeutralSect"},cd_EXALTATION:{name:"cd_Exaltation"},cd_MACROCOSMOS:{name:"cd_Macrocosmos"},cd_MICROCOSMOS:{name:"cd_Microcosmos"},cd_ORACLE:{name:"cd_Oracle"},cd_SUN_SIGN:{name:"cd_SunSign"}}),sL=ae()({ARCANA:{name:"Arcana",label:{zh:"奥秘卡"}},MINOR_ARCANA:{name:"Minor Arcana",label:{zh:"小奥秘卡"}}}),lT=ae()({LIGHTSPEED:{name:"Lightspeed",label:{zh:"光速"}},THE_BALANCE:{name:"The Balance",label:{zh:"太阳神之衡"}},THE_ARROW:{name:"The Arrow",label:{zh:"放浪神之箭"}},THE_SPIRE:{name:"The Spire",label:{zh:"建筑神之塔"}},THE_SPEAR:{name:"The Spear",label:{zh:"战争神之枪"}},THE_BOLE:{name:"The Bole",label:{zh:"世界树之干"}},THE_EWER:{name:"The Ewer",label:{zh:"河流神之瓶"}},ASPECTED_BENEFIC:{name:"Aspected Benefic",label:{zh:"吉星相位"}},ASPECTED_HELIOS:{name:"Aspected Helios",label:{zh:"阳星相位"}},SYNASTRY:{name:"Synastry",label:{zh:"星位合图"}},DIVINATION:{name:"Divination",label:{zh:"占卜"}},DIVINING:{name:"Divining",label:{zh:"神谕预备"}},COLLECTIVE_UNCONSCIOUS:{name:"Collective Unconscious",label:{zh:"命运之轮"}},COLLECTIVE_UNCONSCIOUS_MIT:{name:"Collective Unconscious (Mitigation)",label:{zh:"命运之轮（减伤）"}},WHEEL_OF_FORTUNE:{name:"Wheel of Fortune",label:{zh:"命运之轮（恢复）"}},OPPOSITION:{name:"Opposition",label:{zh:"天星冲日"}},EARTHLY_DOMINANCE:{name:"Earthly Dominance",mayNotBeCanceled:!0,label:{zh:"地星主宰"}},GIANT_DOMINANCE:{name:"Giant Dominance",mayNotBeCanceled:!0,label:{zh:"巨星主宰"}},COMBUST_II:{name:"Combust II",label:{zh:"炽灼"}},COMBUST_III:{name:"Combust III",label:{zh:"焚灼"}},INTERSECTION:{name:"Intersection",label:{zh:"天星交错"}},HOROSCOPE:{name:"Horoscope",label:{zh:"天宫图"}},HOROSCOPE_HELIOS:{name:"Horoscope Helios",label:{zh:"阳星天宫图"}},NEUTRAL_SECT:{name:"Neutral Sect",label:{zh:"中间学派"}},NEUTRAL_SECT_SHIELD:{name:"Neutral Sect (Shield)",label:{zh:"中间学派（防护罩）"}},SUNTOUCHED:{name:"Suntouched",label:{zh:"太阳星座预备"}},EXALTATION:{name:"Exaltation",label:{zh:"擢升"}},MACROCOSMOS:{name:"Macrocosmos",label:{zh:"大宇宙"}},HELIOS_CONJUNCTION:{name:"Helios Conjunction",label:{zh:"阳星合相"}},SUN_SIGN:{name:"Sun Sign",label:{zh:"太阳星座"}}}),rL=ae()({ARCANA_1:{name:"Arcana 1",label:{zh:"奥秘卡1"}},ARCANA_2:{name:"Arcana 2",label:{zh:"奥秘卡2"}},ARCANA_3:{name:"Arcana 3",label:{zh:"奥秘卡3"}},NEXT_DRAW:{name:"Next Draw",label:{zh:"下一张卡"}}}),cL=ae()({COMBUST_MASTERY_II:{name:"Combust Mastery II",level:72},MALEFIC_MASTERY_III:{name:"Malefic Mastery III",level:82},ENHANCED_ESSENTIAL_DIGNITY:{name:"Enhanced Essential Dignity",level:78},MALEFIC_MASTERY_IV:{name:"Malefic Mastery IV",level:82},GRAVITY_MASTERY:{name:"Gravity Mastery",level:82},ENHANCED_CELESTIAL_INTERSECTION:{name:"Enhanced Celestial Intersection",level:88},ENHANCED_DIVINATION:{name:"Enhanced Divination",level:92},ASPECTED_HELIOS_MASTERY:{name:"Aspected Helios Mastery",level:96},ENHANCED_ESSENTIAL_DIGNITY_II:{name:"Enhanced Essential Dignity_II",level:98},ENHANCED_NEUTRAL_SECT:{name:"Enhanced Neutral Sect",level:100}}),uL={...sL,...lT,...rL},dL=ae()({BLIZZARD:{id:142,name:"Blizzard",label:{zh:"冰1",ja:"ブリザド"},discordEmote:"B1"},FIRE:{id:141,name:"Fire",label:{zh:"火1",ja:"ファイア"},discordEmote:"F1"},BLIZZARD_II:{id:25793,name:"Blizzard 2",label:{zh:"冰2",ja:"ブリザラ"},discordEmote:"F2"},FIRE_II:{id:147,name:"Fire 2",label:{zh:"火2",ja:"ファイラ"},discordEmote:"F2"},TRANSPOSE:{id:149,name:"Transpose",label:{zh:"星灵移位",ja:"トランス"},discordEmote:"Transpose"},THUNDER_III:{id:153,name:"Thunder 3",label:{zh:"雷3",ja:"サンダガ"},discordEmote:"T3"},THUNDER_IV:{id:7420,name:"Thunder 4",label:{zh:"霹雷"},discordEmote:"T4"},MANAWARD:{id:157,name:"Manaward",label:{zh:"魔罩",ja:"マバリア"},discordEmote:"Manaward"},MANAFONT:{id:158,name:"Manafont",label:{zh:"魔泉",ja:"マナフォント"},discordEmote:"Manafont"},LEY_LINES:{id:3573,name:"Ley Lines",label:{zh:"黑魔纹",ja:"黒魔紋"},discordEmote:"LL"},FIRE_III:{id:152,name:"Fire 3",label:{zh:"火3",ja:"ファイガ"},discordEmote:"F3"},BLIZZARD_III:{id:154,name:"Blizzard 3",label:{zh:"冰3",ja:"ブリザガ"},discordEmote:"B3"},FREEZE:{id:159,name:"Freeze",label:{zh:"玄冰",ja:"フリーズ"},discordEmote:"Freeze"},FLARE:{id:162,name:"Flare",label:{zh:"核爆",ja:"フレア"},discordEmote:"Flare"},BLIZZARD_IV:{id:3576,name:"Blizzard 4",label:{zh:"冰4",ja:"ブリザジャ"},discordEmote:"B4"},FIRE_IV:{id:3577,name:"Fire 4",label:{zh:"火4",ja:"ファイジャ"},discordEmote:"F4"},BETWEEN_THE_LINES:{id:7419,name:"Between the Lines",label:{zh:"魔纹步",ja:"ラインズステップ"},discordEmote:"BtL"},AETHERIAL_MANIPULATION:{id:155,name:"Aetherial Manipulation",label:{zh:"以太步",ja:"エーテリアルテップ"},discordEmote:"AM"},TRIPLECAST:{id:7421,name:"Triplecast",label:{zh:"三连咏唱",ja:"三連魔"},discordEmote:"Triple"},FOUL:{id:7422,name:"Foul",label:{zh:"秽浊",ja:"ファウル"},discordEmote:"Foul"},DESPAIR:{id:16505,name:"Despair",label:{zh:"绝望",ja:"デスペア"},discordEmote:"Despair"},UMBRAL_SOUL:{id:16506,name:"Umbral Soul",label:{zh:"灵极魂",ja:"アンブラルソウル"},discordEmote:"Soul"},XENOGLOSSY:{id:16507,name:"Xenoglossy",label:{zh:"异言",ja:"ゼノグロシー"},discordEmote:"Xeno"},HIGH_FIRE_II:{id:25794,name:"High Fire 2",label:{zh:"高火2",ja:"ハイファイラ"},discordEmote:"HF2"},HIGH_BLIZZARD_II:{id:25795,name:"High Blizzard 2",label:{zh:"高冰冻2",ja:"ハイブリザラ"},discordEmote:"HB2"},AMPLIFIER:{id:25796,name:"Amplifier",label:{zh:"详述",ja:"アンプリファイア"},discordEmote:"Amplifier"},PARADOX:{id:25797,name:"Paradox",label:{zh:"悖论",ja:"パラドックス"},discordEmote:"Para"},HIGH_THUNDER:{id:36986,name:"High Thunder",label:{zh:"高闪雷",ja:"ハイサンダー"},discordEmote:"HThunder"},HIGH_THUNDER_II:{id:36987,name:"High Thunder 2",label:{zh:"高震雷"},discordEmote:"HThunder2"},FLARE_STAR:{id:36989,name:"Flare Star",label:{zh:"耀星",ja:"フレアスター"},discordEmote:"FS"},RETRACE:{id:36988,name:"Retrace",label:{zh:"魔纹重置",ja:"魔紋再設置"}}}),EL=ae()({cd_TRANSPOSE:{name:"cd_Transpose"},cd_LEY_LINES:{name:"cd_LeyLines"},cd_MANAWARD:{name:"cd_Manaward"},cd_BETWEEN_THE_LINES:{name:"cd_BetweenTheLines"},cd_AETHERIAL_MANIPULATION:{name:"cd_AetherialManipulation"},cd_TRIPLECAST:{name:"cd_Triplecast"},cd_MANAFONT:{name:"cd_Manafont"},cd_AMPLIFIER:{name:"cd_Amplifier"},cd_RETRACE:{name:"cd_Retrace"}}),hL=ae()({POLYGLOT:{name:"Polyglot",label:{zh:"通晓"}},ASTRAL_FIRE:{name:"Astral Fire",label:{zh:"星极火"}},UMBRAL_ICE:{name:"Umbral Ice",label:{zh:"灵极冰"}},UMBRAL_HEART:{name:"Umbral Heart",label:{zh:"冰针"}},ENOCHIAN:{name:"Enochian",label:{zh:"天语"}},PARADOX:{name:"Paradox",label:{zh:"悖论"}},ASTRAL_SOUL:{name:"Astral Soul",label:{zh:"星极魂"}}}),sT=ae()({LEY_LINES:{name:"Ley Lines",label:{zh:"黑魔纹"},mayBeToggled:!0},TRIPLECAST:{name:"Triplecast",label:{zh:"三重咏唱"},maximumStacks:3},FIRESTARTER:{name:"Firestarter",label:{zh:"火苗"}},THUNDERHEAD:{name:"Thunderhead",label:{zh:"雷砧"}},THUNDER_III:{name:"Thunder III",label:{zh:"暴雷"}},THUNDER_IV:{name:"Thunder IV",label:{zh:"霹雷"}},HIGH_THUNDER:{name:"High Thunder",label:{zh:"高闪雷"}},HIGH_THUNDER_II:{name:"High Thunder II",label:{zh:"高震雷"}},MANAWARD:{name:"Manaward",label:{zh:"魔纹罩"}}}),fL=ae()({}),AL=ae()({ENHANCED_ENOCHIAN_II:{name:"Enhanced Enochian II",level:78},ENHANCED_POLYGLOT:{name:"Enhanced Polyglot",level:80},ENHANCED_FOUL:{name:"Enhanced Foul",level:80},ASPECT_MASTERY_IV:{name:"Aspect Mastery IV",level:82},ENHANCED_MANAFONT:{name:"Enhanced Manafont",level:84},ENHANCED_ENOCHIAN_III:{name:"Enhanced Enochian III",level:86},ASPECT_MASTERY_V:{name:"Aspect Mastery V",level:90},THUNDER_MASTERY_III:{name:"Thunder Mastery III",level:92},ENHANCED_LEYLINES:{name:"Enhanced Ley Lines",level:96},ENHANCED_ENOCHIAN_IV:{name:"Enhanced Enochian IV",level:96},ENHANCED_POLYGLOT_II:{name:"Enhanced Polyglot II",level:98},ENHANCED_ASTRAL_FIRE:{name:"Enhanced Astral Fire",level:100}}),mL={...hL,...sT,...fL},RL=ae()({HEAVY_SHOT:{id:97,name:"Heavy Shot"},QUICK_NOCK:{id:100,name:"Quick Nock"},BLOODLETTER:{id:110,name:"Bloodletter"},BARRAGE:{id:107,name:"Barrage"},RAGING_STRIKES:{id:101,name:"Raging Strikes"},REPELLING_SHOT:{id:112,name:"Repelling Shot"},WIDE_VOLLEY:{id:111,name:"Wide Volley"},MAGES_BALLAD:{id:114,name:"Mage's Ballad"},ARMYS_PAEON:{id:116,name:"Army's Paeon"},RAIN_OF_DEATH:{id:117,name:"Rain of Death"},BATTLE_VOICE:{id:118,name:"Battle Voice"},EMYPREAL_ARROW:{id:3558,name:"Empyreal Arrow"},WANDERERS_MINUET:{id:3559,name:"The Wanderer's Minuet"},IRON_JAWS:{id:3560,name:"Iron Jaws"},WARDENS_PAEAN:{id:3561,name:"Warden's Paean"},SIDEWINDER:{id:3562,name:"Sidewinder"},PITCH_PERFECT:{id:7404,name:"Pitch Perfect"},TROUBADOUR:{id:7405,name:"Troubadour"},CAUSTIC_BITE:{id:7406,name:"Caustic Bite"},STORMBITE:{id:7407,name:"Stormbite"},NATURES_MINNE:{id:7408,name:"Nature's Minne"},REFULGENT_ARROW:{id:7409,name:"Refulgent Arrow"},SHADOWBITE:{id:16494,name:"Shadowbite"},BURST_SHOT:{id:16495,name:"Burst Shot"},APEX_ARROW:{id:16496,name:"Apex Arrow"},LADONSBITE:{id:25783,name:"Ladonsbite"},BLAST_ARROW:{id:25784,name:"Blast Arrow"},RADIANT_FINALE:{id:25785,name:"Radiant Finale"},HEARTBREAK_SHOT:{id:36975,name:"Heartbreak Shot"},RESONANT_ARROW:{id:36976,name:"Resonant Arrow"},RADIANT_ENCORE:{id:36977,name:"Radiant Encore"}}),TL=ae()({cd_RAGING_STRIKES:{name:"cd_RagingStrikes"},cd_BARRAGE:{name:"cd_Barrage"},cd_EMPYREAL_ARROW:{name:"cd_EmpyrealArrow"},cd_HEARTBREAK_SHOT:{name:"cd_HeartbreakShot"},cd_SIDEWINDER:{name:"cd_Sidewinder"},cd_WANDERERS_MINUET:{name:"cd_WanderersMinuet"},cd_MAGES_BALLAD:{name:"cd_MagesBallad"},cd_ARMYS_PAEON:{name:"cd_ArmysPaeon"},cd_WARDENS_PAEAN:{name:"cd_WardensPaean"},cd_NATURES_MINNE:{name:"cd_NaturesMinne"},cd_REPELLING_SHOT:{name:"cd_RepellingShot"},cd_BATTLE_VOICE:{name:"cd_BattleVoice"},cd_RADIANT_FINALE:{name:"cd_RadiantFinale"},cd_TROUBADOUR:{name:"cd_Troubadour"},cd_PITCH_PERFECT:{name:"cd_PitchPerfect"}}),SL=ae()({SONG_TIMER:{name:"SongTimer"},SOUL_VOICE:{name:"Soul Voice"},PITCH_PERFECT:{name:"Pitch Perfect"},REPERTOIRE:{name:"Repertoire"},WANDERERS_CODA:{name:"Wanderer's Coda"},MAGES_CODA:{name:"Mage's Coda"},ARMYS_CODA:{name:"Army's Coda"}}),rT=ae()({HAWKS_EYE:{name:"Hawk's Eye"},RAGING_STRIKES:{name:"Raging Strikes"},BARRAGE:{name:"Barrage"},ARMYS_MUSE:{name:"Army's Muse"},ARMYS_ETHOS:{name:"Army's Ethos"},BLAST_ARROW_READY:{name:"Blast Arrow Ready"},RESONANT_ARROW_READY:{name:"Resonant Arrow Ready"},RADIANT_ENCORE_READY:{name:"Radiant Encore Ready"},CAUSTIC_BITE:{name:"Caustic Bite"},STORMBITE:{name:"Stormbite"},MAGES_BALLAD:{name:"Mage's Ballad"},ARMYS_PAEON:{name:"Army's Paeon"},WANDERERS_MINUET:{name:"Wanderer's Minuet"},BATTLE_VOICE:{name:"Battle Voice"},WARDENS_PAEAN:{name:"Warden's Paean"},TROUBADOUR:{name:"Troubadour"},NATURES_MINNE:{name:"Nature's Minne"},RADIANT_FINALE:{name:"Radiant Finale"}}),IL=ae()({RADIANT_CODA:{name:"Radiant Coda"},MUSE_REPERTOIRE:{name:"Muse Repertoire"},ETHOS_REPERTOIRE:{name:"Ethos Repertoire"}}),_L=ae()({WIDE_VOLLEY_MASTERY:{name:"Wide Volley Mastery",level:72},BITE_MASTERY_II:{name:"Bite Mastery II",level:76},HEAVY_SHOT_MASTERY:{name:"Heavy Shot Mastery",level:76},ENHANCED_ARMYS_PAEON:{name:"Enhanced Army's Paeon",level:78},SOUL_VOICE:{name:"Soul Voice",level:80},QUICK_NOCK_MASTERY:{name:"Quick Nock Mastery",level:82},ENHANCED_BLOODLETTER:{name:"Enhanced Bloodletter",level:84},ENHANCED_APEX_ARROW:{name:"Enhanced Apex Arrow",level:86},ENHANCED_TROUBADOUR:{name:"Enhanced Troubadour",level:88},MINSTRELS_CODA:{name:"Minstrel's Coda",level:90},BLOODLETTER_MASTERY:{name:"Bloodletter Mastery",level:92},RANGED_MASTERY:{name:"Ranged Mastery",level:94},ENHANCED_BARRAGE:{name:"Enhanced Barrage",level:96},ENHANCED_RADIANT_FINALE:{name:"Enhanced Radiant Finale",level:100}}),gL={...SL,...rT,...IL},NL=ae()({STANDARD_FINISH:{id:16003,name:"Standard Finish",label:{zh:"标准舞步结束"}},SINGLE_STANDARD_FINISH:{id:16191,name:"Single Standard Finish",label:{zh:"单色标准舞步结束"}},DOUBLE_STANDARD_FINISH:{id:16192,name:"Double Standard Finish",label:{zh:"双色标准舞步结束"}},FINISHING_MOVE:{id:36984,name:"Finishing Move",label:{zh:"结束动作"}},LAST_DANCE:{id:36983,name:"Last Dance",label:{zh:"落幕舞"}},TECHNICAL_FINISH:{id:16004,name:"Technical Finish",label:{zh:"技巧舞步结束"}},SINGLE_TECHNICAL_FINISH:{id:16193,name:"Single Technical Finish",label:{zh:"单色技巧舞步结束"}},DOUBLE_TECHNICAL_FINISH:{id:16194,name:"Double Technical Finish",label:{zh:"双色技巧舞步结束"}},TRIPLE_TECHNICAL_FINISH:{id:16195,name:"Triple Technical Finish",label:{zh:"三色技巧舞步结束"}},QUADRUPLE_TECHNICAL_FINISH:{id:16196,name:"Quadruple Technical Finish",label:{zh:"四色技巧舞步结束"}},TILLANA:{id:25790,name:"Tillana",label:{zh:"提拉纳"}},CASCADE:{id:15989,name:"Cascade",label:{zh:"瀑泻"}},FOUNTAIN:{id:15990,name:"Fountain",label:{zh:"喷泉"}},REVERSE_CASCADE:{id:15991,name:"Reverse Cascade",label:{zh:"逆瀑泻"}},FOUNTAINFALL:{id:15992,name:"Fountainfall",label:{zh:"坠喷泉"}},WINDMILL:{id:15993,name:"Windmill",label:{zh:"风车"}},BLADESHOWER:{id:15994,name:"Bladeshower",label:{zh:"落刃雨"}},RISING_WINDMILL:{id:15995,name:"Rising Windmill",label:{zh:"升风车"}},BLOODSHOWER:{id:15996,name:"Bloodshower",label:{zh:"落血雨"}},STANDARD_STEP:{id:15997,name:"Standard Step",label:{zh:"标准舞步"}},TECHNICAL_STEP:{id:15998,name:"Technical Step",label:{zh:"技巧舞步"}},EMBOITE:{id:15999,name:"Emboite",label:{zh:"蔷薇曲舞步"}},ENTRECHAT:{id:16e3,name:"Entrechat",label:{zh:"小鸟交叠跳"}},JETE:{id:16001,name:"Jete",label:{zh:"绿叶小踢腿"}},PIROUETTE:{id:16002,name:"Pirouette",label:{zh:"金冠趾尖转"}},SABER_DANCE:{id:16005,name:"Saber Dance",label:{zh:"剑舞"}},DANCE_OF_THE_DAWN:{id:36985,name:"Dance of the Dawn",label:{zh:"拂晓舞"}},CLOSED_POSITION:{id:16006,name:"Closed Position",label:{zh:"闭式舞姿"}},FAN_DANCE:{id:16007,name:"Fan Dance",label:{zh:"扇舞·序"}},FAN_DANCE_II:{id:16008,name:"Fan Dance II",label:{zh:"扇舞·破"}},FAN_DANCE_III:{id:16009,name:"Fan Dance III",label:{zh:"扇舞·急"}},FAN_DANCE_IV:{id:25791,name:"Fan Dance IV",label:{zh:"扇舞·终"}},EN_AVANT:{id:16010,name:"En Avant",label:{zh:"前冲步"}},DEVILMENT:{id:16011,name:"Devilment",label:{zh:"进攻之探戈"}},STARFALL_DANCE:{id:25792,name:"Starfall Dance",label:{zh:"流星舞"}},SHIELD_SAMBA:{id:16012,name:"Shield Samba",label:{zh:"防守之桑巴"}},FLOURISH:{id:16013,name:"Flourish",label:{zh:"百花争艳"}},IMPROVISATION:{id:16014,name:"Improvisation",label:{zh:"即兴表演"}},IMPROVISED_FINISH:{id:25789,name:"Improvised Finish",label:{zh:"即兴表演结束"}},CURING_WALTZ:{id:16015,name:"Curing Waltz",label:{zh:"治疗之华尔兹"}},ENDING:{id:18073,name:"Ending",label:{zh:"解除闭式舞姿"}}}),pL=ae()({cd_STANDARD_STEP:{name:"cd_StandardStep"},cd_TECHNICAL_STEP:{name:"cd_TechnicalStep"},cd_CLOSED_POSITION:{name:"cd_ClosedPosition"},cd_FAN_DANCE:{name:"cd_FanDance"},cd_FAN_DANCE_II:{name:"cd_FanDanceII",label:{zh:"CD：扇舞·破"}},cd_FAN_DANCE_III:{name:"cd_FanDanceIII",label:{zh:"CD：扇舞·急"}},cd_FAN_DANCE_IV:{name:"cd_FanDanceIV",label:{zh:"CD：扇舞·终"}},cd_EN_AVANT:{name:"cd_EnAvant"},cd_DEVILMENT:{name:"cd_Devilment"},cd_SHIELD_SAMBA:{name:"cd_ShieldSamba"},cd_FLOURISH:{name:"cd_Flourish"},cd_IMPROVISATION:{name:"cd_Improvisation"},cd_IMPROVISED_FINISH:{name:"cd_ImprovisedFinish"},cd_CURING_WALTZ:{name:"cd_CuringWaltz"},cd_ENDING:{name:"cd_Ending"}}),CL=ae()({ESPRIT_GAUGE:{name:"EspritGauge",label:{zh:"伶俐量值"}},FEATHER_GAUGE:{name:"Feathers",label:{zh:"幻扇"}},STANDARD_DANCE:{name:"Standard Dance",label:{zh:"标准舞步"}},TECHNICAL_DANCE:{name:"Technical Dance",label:{zh:"技巧舞步"}}}),cT=ae()({SILKEN_SYMMETRY:{name:"Silken Symmetry",label:{zh:"对称投掷"}},SILKEN_FLOW:{name:"Silken Flow",label:{zh:"非对称投掷"}},FLOURISHING_SYMMETRY:{name:"Flourishing Symmetry",label:{zh:"对称投掷·百花争艳"}},FLOURISHING_FLOW:{name:"Flourishing Flow",label:{zh:"非对称投掷·百花争艳"}},THREEFOLD_FAN_DANCE:{name:"Threefold Fan Dance",label:{zh:"扇舞·急预备"}},FOURFOLD_FAN_DANCE:{name:"Fourfold Fan Dance",label:{zh:"扇舞·终预备"}},FINISHING_MOVE_READY:{name:"Finishing Move Ready",label:{zh:"结束动作预备"}},FLOURISHING_STARFALL:{name:"Flourishing Starfall",label:{zh:"流星舞预备"}},STANDARD_STEP:{name:"Standard Step",label:{zh:"标准舞步"},mayNotBeCanceled:!0},TECHNICAL_STEP:{name:"Technical Step",label:{zh:"技巧舞步"},mayNotBeCanceled:!0},LAST_DANCE_READY:{name:"Last Dance Ready",label:{zh:"落幕舞预备"}},DANCE_OF_THE_DAWN_READY:{name:"Dance of the Dawn Ready",label:{zh:"拂晓舞预备"}},FLOURISHING_FINISH:{name:"Flourishing Finish",label:{zh:"提拉纳预备"}},SHIELD_SAMBA:{name:"Shield Samba",label:{zh:"防守之桑巴"}},IMPROVISATION:{name:"Improvisation",label:{zh:"即兴表演"},mayNotBeCanceled:!0},RISING_RHYTHM:{name:"Rising Rhythm",label:{zh:"舞动的热情"},maximumStacks:4},IMPROVISATION_REGEN:{name:"Improvisation Regen",label:{zh:"享受即兴表演"}},IMPROVISED_FINISH:{name:"Improvised Finish",label:{zh:"即兴表演结束"}},DEVILMENT:{name:"Devilment",label:{zh:"进攻之探戈"}},TECHNICAL_FINISH:{name:"Technical Finish",label:{zh:"技巧舞步结束"}},ESPRIT:{name:"Esprit",label:{zh:"伶俐"},mayNotBeCanceled:!0},STANDARD_FINISH:{name:"Standard Finish",label:{zh:"标准舞步结束"}},CLOSED_POSITION:{name:"Closed Position",label:{zh:"闭式舞姿"},mayNotBeCanceled:!0},DANCE_PARTNER:{name:"Dance Partner",label:{zh:"舞伴"}},STANDARD_FINISH_PARTNER:{name:"Standard Finish Partner",label:{zh:"舞伴小舞buff"}},ESPRIT_PARTNER:{name:"Esprit Partner",label:{zh:"舞伴伶俐buff"}},ESPRIT_TECHNICAL:{name:"Esprit Technical",label:{zh:"大舞伶俐buff"}}}),OL=ae()({CASCADE_COMBO:{name:"CascadeCombo",label:{zh:"瀑泻连击"}},WINDMILL_COMBO:{name:"WindmillCombo",label:{zh:"风车连击"}},STANDARD_BONUS:{name:"StandardBonus",label:{zh:"小舞连击"}},TECHNICAL_BONUS:{name:"TechnicalBonus",label:{zh:"大舞连击"}}}),bL=ae()({ESPRIT:{name:"Esprit",level:76},ENHANCED_EN_AVANT_II:{name:"Enhanced En Avant II",level:78},ENHANCED_TECHNICAL_FINISH:{name:"Enhanced Technical Finish",level:82},ENHANCED_ESPRIT:{name:"Enhanced Esprit",level:84},ENHANCED_FLOURISH:{name:"Enhanced Flourish",level:86},ENHANCED_SHIELD_SAMBA:{name:"Enhanced Shield Samba",level:88},ENHANCED_DEVILMENT:{name:"Enhanced Devilment",level:90},ENHANCED_STANDARD_FINISH:{name:"Enhanced Standard Finish",level:92},DYNAMIC_DANCER:{name:"Dynamic Dancer",level:94},ENHANCED_FLOURISH_II:{name:"Enhanced Flourish II",level:96},ENHANCED_TECHNICAL_FINISH_II:{name:"Enhanced Technical Finish II",level:100}}),DL={...CL,...cT,...OL},yL=ae()({PIERCING_TALON:{id:90,name:"Piercing Talon"},TRUE_THRUST:{id:75,name:"True Thrust"},RAIDEN_THRUST:{id:16479,name:"Raiden Thrust"},DISEMBOWEL:{id:87,name:"Disembowel"},SPIRAL_BLOW:{id:36955,name:"Spiral Blow"},CHAOS_THRUST:{id:88,name:"Chaos Thrust"},CHAOTIC_SPRING:{id:25772,name:"Chaotic Spring"},WHEELING_THRUST:{id:3556,name:"Wheeling Thrust"},VORPAL_THRUST:{id:78,name:"Vorpal Thrust"},LANCE_BARRAGE:{id:36954,name:"Lance Barrage"},FULL_THRUST:{id:84,name:"Full Thrust"},HEAVENS_THRUST:{id:25771,name:"Heavens' Thrust"},FANG_AND_CLAW:{id:3554,name:"Fang and Claw"},DRAKESBANE:{id:36952,name:"Drakesbane"},DOOM_SPIKE:{id:86,name:"Doom Spike"},DRACONIAN_FURY:{id:25770,name:"Draconian Fury"},SONIC_THRUST:{id:7397,name:"Sonic Thrust"},COERTHAN_TORMENT:{id:16477,name:"Coerthan Torment"},LIFE_SURGE:{id:83,name:"Life Surge"},LANCE_CHARGE:{id:85,name:"Lance Charge"},JUMP:{id:92,name:"Jump"},HIGH_JUMP:{id:16478,name:"High Jump"},MIRAGE_DIVE:{id:7339,name:"Mirage Dive"},DRAGONFIRE_DIVE:{id:96,name:"Dragonfire Dive"},RISE_OF_THE_DRAGON:{id:36953,name:"Rise of the Dragon"},BATTLE_LITANY:{id:3557,name:"Battle Litany"},WYRMWIND_THRUST:{id:25773,name:"Wyrmwind Thrust"},GEIRSKOGUL:{id:3555,name:"Geirskogul"},NASTROND:{id:7400,name:"Nastrond"},STARDIVER:{id:16480,name:"Stardiver"},STARCROSS:{id:36956,name:"Starcross"},ELUSIVE_JUMP:{id:94,name:"Elusive Jump"},WINGED_GLIDE:{id:36951,name:"Winged Glide"}}),vL=ae()({cd_LIFE_SURGE:{name:"cd_LifeSurge"},cd_LANCE_CHARGE:{name:"cd_LanceCharge"},cd_JUMP:{name:"cd_Jump"},cd_HIGH_JUMP:{name:"cd_HighJump"},cd_ELUSIVE_JUMP:{name:"cd_ElusiveJump"},cd_WINGED_GLIDE:{name:"cd_WingedGlide"},cd_DRAGONFIRE_DIVE:{name:"cd_DragonfireDive"},cd_BATTLE_LITANY:{name:"cd_BattleLitany"},cd_GEIRSKOGUL:{name:"cd_Geirskogul"},cd_MIRAGE_DIVE:{name:"cd_MirageDive"},cd_NASTROND:{name:"cd_Nastrond"},cd_STARDIVER:{name:"cd_Stardiver"},cd_WYRMWIND_THRUST:{name:"cd_WyrmwindThrust"},cd_RISE_OF_THE_DRAGON:{name:"cd_RiseOfTheDragon"},cd_STARCROSS:{name:"cd_Starcross"}}),ML=ae()({LIFE_OF_THE_DRAGON:{name:"Life of the Dragon"},FIRSTMINDS_FOCUS:{name:"Firstminds' Focus"}}),uT=ae()({LIFE_SURGE:{name:"Life Surge"},ENHANCED_PIERCING_TALON:{name:"Enhanced Piercing Talon"},POWER_SURGE:{name:"Power Surge"},LANCE_CHARGE:{name:"Lance Charge"},DIVE_READY:{name:"Dive Ready"},CHAOS_THRUST_DOT:{name:"Chaos Thrust DoT"},CHAOTIC_SPRING_DOT:{name:"Chaotic Spring DoT"},DRAGONS_FLIGHT:{name:"Dragon's Flight"},BATTLE_LITANY:{name:"Battle Litany"},NASTROND_READY:{name:"Nastrond Ready"},DRACONIAN_FIRE:{name:"Draconian Fire"},STARCROSS_READY:{name:"Starcross Ready"}}),LL=ae()({DRG_CHAOS_COMBO_TRACKER:{name:"DRG Chaos Combo"},DRG_HEAVENS_COMBO_TRACKER:{name:"DRG Heavens Combo"},DRG_AOE_COMBO_TRACKER:{name:"DRG AOE Combo"}}),HL=ae()({JUMP_MASTERY:{name:"Jump Mastery",level:74},LANCE_MASTERY:{name:"Lance Mastery",level:76},ENHANCED_COERTHAN_TORMENT:{name:"Enhanced Coerthan Torment",level:82},ENHANCED_WINGED_GLIDE:{name:"Enhanced Winged Glide",level:84},LANCE_MASTERY_II:{name:"Lance Mastery II",level:86},ENHANCED_LIFE_SURGE:{name:"Enhanced Life Surge",level:88},LANCE_MASTERY_III:{name:"Lance Mastery III",level:90},ENHANCED_DRAGONFIRE_DIVE:{name:"Enhanced Dragonfire Dive",level:92},MELEE_MASTERY_DRG:{name:"Melee Mastery DRG",level:94},LANCE_MASTERY_IV:{name:"Lance Mastery IV",level:96},ENHANCED_STARDIVER:{name:"Enhanced Stardiver",level:100}}),UL={...ML,...uT,...LL},kL=ae()({HARD_SLASH:{id:3617,name:"Hard Slash",label:{zh:"重斩"}},SYPHON_STRIKE:{id:3623,name:"Syphon Strike",label:{zh:"吸收斩"}},UNLEASH:{id:3621,name:"Unleash",label:{zh:"释放"}},GRIT:{id:3629,name:"Grit",label:{zh:"深恶痛绝"}},RELEASE_GRIT:{id:32067,name:"Release Grit",label:{zh:"解除深恶痛绝"}},UNMEND:{id:3624,name:"Unmend",label:{zh:"伤残"}},SOULEATER:{id:3632,name:"Souleater",label:{zh:"噬魂斩"}},FLOOD_OF_DARKNESS:{name:"Flood of Darkness",label:{zh:"暗黑波动"}},BLOOD_WEAPON:{id:3625,name:"Blood Weapon",label:{zh:"嗜血"}},SHADOW_WALL:{id:3636,name:"Shadow Wall",label:{zh:"暗影墙"}},STALWART_SOUL:{id:16468,name:"Stalwart Soul",label:{zh:"刚魂"}},EDGE_OF_DARKNESS:{name:"Edge of Darkness",label:{zh:"暗黑锋"}},DARK_MIND:{id:3634,name:"Dark Mind",label:{zh:"弃明投暗"}},LIVING_DEAD:{id:3638,name:"Living Dead",label:{zh:"行尸走肉"}},SALTED_EARTH:{id:3639,name:"Salted Earth",label:{zh:"腐秽大地"}},SHADOWSTRIDE:{id:36926,name:"Shadowstride",label:{zh:"暗影步"}},ABYSSAL_DRAIN:{id:3641,name:"Abyssal Drain",label:{zh:"吸血深渊"}},CARVE_AND_SPIT:{id:3643,name:"Carve and Spit",label:{zh:"精雕怒斩"}},BLOODSPILLER:{id:7392,name:"Bloodspiller",label:{zh:"血溅"}},QUIETUS:{id:7391,name:"Quietus",label:{zh:"寂灭"}},DARK_MISSIONARY:{id:16471,name:"Dark Missionary",label:{zh:"暗黑布道"}},DELIRIUM:{id:7390,name:"Delirium",label:{zh:"血乱"}},THE_BLACKEST_NIGHT:{id:7393,name:"The Blackest Night",label:{zh:"至黑之夜"}},THE_BLACKEST_NIGHT_POP:{name:"Pop The Blackest Night",label:{zh:"至黑之夜破盾"}},FLOOD_OF_SHADOW:{id:16469,name:"Flood of Shadow",label:{zh:"暗影波动"}},EDGE_OF_SHADOW:{id:16470,name:"Edge of Shadow",label:{zh:"暗影锋"}},LIVING_SHADOW:{id:16472,name:"Living Shadow",label:{zh:"掠影示现"}},OBLATION:{id:25754,name:"Oblation",label:{zh:"献奉"}},SALT_AND_DARKNESS:{id:25755,name:"Salt and Darkness",label:{zh:"腐秽黑暗"}},SHADOWBRINGER:{id:25757,name:"Shadowbringer",label:{zh:"暗影使者"}},SHADOWED_VIGIL:{id:36927,name:"Shadowed Vigil",label:{zh:"暗影卫"}},SCARLET_DELIRIUM:{id:36928,name:"Scarlet Delirium",label:{zh:"血红乱"}},COMEUPPANCE:{id:36929,name:"Comeuppance",label:{zh:"报应"}},TORCLEAVER:{id:36930,name:"Torcleaver",label:{zh:"戮山"}},IMPALEMENT:{id:36931,name:"Impalement",label:{zh:"刺穿"}},DISESTEEM:{id:36932,name:"Disesteem",label:{zh:"掠影的蔑视"}},ABYSSAL_DRAIN_PET:{id:17904,name:"Abyssal Drain (Esteem)",label:{zh:"吸血深渊（掠影）"}},SHADOWSTRIDE_PET:{id:38512,name:"Shadowstride (Esteem)",label:{zh:"暗影步（掠影）"}},SHADOWBRINGER_PET:{id:25881,name:"Shadowbringer (Esteem)",label:{zh:"暗影使者（掠影）"}},EDGE_OF_SHADOW_PET:{id:17908,name:"Edge of Shadow (Esteem)",label:{zh:"暗影锋（掠影）"}},FLOOD_OF_SHADOW_PET:{name:"Flood of Shadow (Esteem)",label:{zh:"暗影波动（掠影）"}},BLOODSPILLER_PET:{id:17909,name:"Bloodspiller (Esteem)",label:{zh:"血溅（掠影）"}},CARVE_AND_SPIT_PET:{name:"Carve and Spit (Esteem)",label:{zh:"精雕怒斩（掠影）"}},DISESTEEM_PET:{id:36933,name:"Disesteem (Esteem)",label:{zh:"掠影的蔑视（掠影）"}}}),xL=ae()({cd_GRIT:{name:"cd_Grit"},cd_RELEASE_GRIT:{name:"cd_ReleaseGrit"},cd_FLOOD_OF_DARKNESS:{name:"cd_FloodOfDarkness"},cd_SHADOW_WALL:{name:"cd_ShadowWall"},cd_DARK_MIND:{name:"cd_DarkMind"},cd_LIVING_DEAD:{name:"cd_LivingDead"},cd_SALTED_EARTH:{name:"cd_SaltedEarth"},cd_SHADOWSTRIDE:{name:"cd_Shadowstride"},cd_ABYSSAL_DRAIN:{name:"cd_AbyssalDrain"},cd_DARK_MISSIONARY:{name:"cd_DarkMissionary"},cd_DELIRIUM:{name:"cd_Delirium"},cd_THE_BLACKEST_NIGHT:{name:"cd_TheBlackestNight"},cd_THE_BLACKEST_NIGHT_POP:{name:"cd_TheBlackestNightPop"},cd_LIVING_SHADOW:{name:"cd_LivingShadow"},cd_OBLATION:{name:"cd_Oblation"},cd_SALT_AND_DARKNESS:{name:"cd_SaltAndDarkness"},cd_SHADOWBRINGER:{name:"cd_Shadowbringer"},cd_POP_TBN:{name:"cd_PopTBN"}}),PL=ae()({DARKSIDE:{name:"Darkside",label:{zh:"暗黑"}},BLOOD_GAUGE:{name:"Blood Gauge",label:{zh:"暗血"}}}),dT=ae()({SALTED_EARTH:{name:"Salted Earth",mayBeToggled:!0,label:{zh:"腐秽大地"}},GRIT:{name:"Grit",label:{zh:"深恶痛绝"}},SHADOW_WALL:{name:"Shadow Wall",label:{zh:"暗影墙"}},DARK_MIND:{name:"Dark Mind",label:{zh:"弃明投暗"}},LIVING_DEAD:{name:"Living Dead",label:{zh:"行尸走肉"}},WALKING_DEAD:{name:"Walking Dead",label:{zh:"死而不僵"}},UNDEAD_REBIRTH:{name:"Undead Rebirth",label:{zh:"出死入生"}},DARK_MISSIONARY:{name:"Dark Missionary",label:{zh:"暗黑布道"}},DELIRIUM:{name:"Delirium",maximumStacks:3,label:{zh:"血乱"}},BLOOD_WEAPON:{name:"Blood Weapon",maximumStacks:3,label:{zh:"嗜血"}},BLACKEST_NIGHT:{name:"Blackest Night",label:{zh:"至黑之夜"}},SCORN:{name:"Scorn",label:{zh:"掠影的蔑视预备"}},OBLATION:{name:"Oblation",label:{zh:"献奉"}},SHADOWED_VIGIL:{name:"Shadowed Vigil",label:{zh:"暗影卫"}},VIGILANT:{name:"Vigilant",label:{zh:"影卫"}}}),wL=ae()({DRK_COMBO_TRACKER:{name:"DRK Combo",label:{zh:"重斩连连击状态"}},DRK_AOE_COMBO_TRACKER:{name:"DRK AOE Combo",label:{zh:"AOE连连击状态"}},DRK_DELIRIUM_COMBO_TRACKER:{name:"DRK Delirium Combo",label:{zh:"血红乱连连击状态"}},DARK_ARTS:{name:"Dark Arts",label:{zh:"暗技"}},ESTEEM_TRACKER:{name:"Esteem Attacks",label:{zh:"掠影攻击"}}}),GL=ae()({DAKRSIDE_MASTERY:{name:"Darkside Mastery",level:74},ENHANCED_UNMEND:{name:"Enhanced Unmend",level:84},ENHANCED_LIVING_SHADOW:{name:"Enhanced Living Shadow",level:88},ENHANCED_LIVING_SHADOW_II:{name:"Enhanced Living Shadow II",level:90},SHADOW_WALL_MASTERY:{name:"Shadow Wall Mastery",level:92},ENHANCED_DELIRIUM:{name:"Enhanced Delirium",level:96},ENHANCED_LIVING_SHADOW_III:{name:"Enhanced Living Shadow III",level:100}}),BL={...PL,...dT,...wL},FL=ae()({LIGHTNING_SHOT:{id:16143,name:"Lightning Shot",label:{zh:"闪雷弹"}},KEEN_EDGE:{id:16137,name:"Keen Edge",label:{zh:"利刃斩"}},BRUTAL_SHELL:{id:16139,name:"Brutal Shell",label:{zh:"残暴弹"}},SOLID_BARREL:{id:16145,name:"Solid Barrel",label:{zh:"迅连斩"}},DEMON_SLICE:{id:16141,name:"Demon Slice",label:{zh:"恶魔切"}},DEMON_SLAUGHTER:{id:16149,name:"Demon Slaughter",label:{zh:"恶魔杀"}},BURST_STRIKE:{id:16162,name:"Burst Strike",label:{zh:"爆发击"}},FATED_CIRCLE:{id:16163,name:"Fated Circle",label:{zh:"命运之环"}},BLOODFEST:{id:16164,name:"Bloodfest",label:{zh:"血壤"}},NO_MERCY:{id:16138,name:"No Mercy",label:{zh:"无情"}},SONIC_BREAK:{id:16153,name:"Sonic Break",label:{zh:"音速破"}},GNASHING_FANG:{id:16146,name:"Gnashing Fang",label:{zh:"烈牙"}},SAVAGE_CLAW:{id:16147,name:"Savage Claw",label:{zh:"猛兽爪"}},WICKED_TALON:{id:16150,name:"Wicked Talon",label:{zh:"凶禽爪"}},DOUBLE_DOWN:{id:25760,name:"Double Down",label:{zh:"倍攻"}},REIGN_OF_BEASTS:{id:36937,name:"Reign of Beasts",label:{zh:"崛起之心"}},NOBLE_BLOOD:{id:36938,name:"Noble Blood",label:{zh:"支配之心"}},LION_HEART:{id:36939,name:"Lion Heart",label:{zh:"终结之心"}},CONTINUATION:{id:16155,name:"Continuation",label:{zh:"续剑"}},HYPERVELOCITY:{id:25759,name:"Hypervelocity",label:{zh:"超高速"}},FATED_BRAND:{id:36936,name:"Fated Brand",label:{zh:"命运之印"}},JUGULAR_RIP:{id:16156,name:"Jugular Rip",label:{zh:"撕喉"}},ABDOMEN_TEAR:{id:16157,name:"Abdomen Tear",label:{zh:"裂膛"}},EYE_GOUGE:{id:16158,name:"Eye Gouge",label:{zh:"穿目"}},DANGER_ZONE:{id:16144,name:"Danger Zone",label:{zh:"危险领域"}},BLASTING_ZONE:{id:16165,name:"Blasting Zone",label:{zh:"爆破领域"}},BOW_SHOCK:{id:16159,name:"Bow Shock",label:{zh:"弓形冲波"}},TRAJECTORY:{id:36934,name:"Trajectory",label:{zh:"弹道"}},HEART_OF_STONE:{id:16161,name:"Heart of Stone",label:{zh:"石之心"}},HEART_OF_CORUNDUM:{id:25758,name:"Heart of Corundum",label:{zh:"刚玉之心"}},SUPERBOLIDE:{id:16152,name:"Superbolide",label:{zh:"超火流星"}},CAMOUFLAGE:{id:16140,name:"Camouflage",label:{zh:"伪装"}},NEBULA:{id:16148,name:"Nebula",label:{zh:"星云"}},GREAT_NEBULA:{id:36935,name:"Great Nebula",label:{zh:"大星云"}},HEART_OF_LIGHT:{id:16160,name:"Heart of Light",label:{zh:"光之心"}},AURORA:{id:16151,name:"Aurora",label:{zh:"极光"}},ROYAL_GUARD:{id:16142,name:"Royal Guard",label:{zh:"王室亲卫"}},RELEASE_ROYAL_GUARD:{id:32068,name:"Release Royal Guard",label:{zh:"解除王室亲卫"}}}),zL=ae()({cd_NO_MERCY:{name:"cd_NoMercy"},cd_BLOODFEST:{name:"cd_Bloodfest"},cd_CAMOUFLAGE:{name:"cd_Camouflage"},cd_ROYAL_GUARD:{name:"cd_RoyalGuard"},cd_RELEASE_ROYAL_GUARD:{name:"cd_ReleaseRoyalGuard"},cd_DANGER_ZONE:{name:"cd_DangerZone"},cd_BLASTING_ZONE:{name:"cd_BlastingZone"},cd_NEBULA:{name:"cd_Nebula"},cd_GREAT_NEBULA:{name:"cd_GreatNebula"},cd_AURORA:{name:"cd_Aurora"},cd_SUPERBOLIDE:{name:"cd_Superbolide"},cd_TRAJECTORY:{name:"cd_Trajectory"},cd_GNASHING_FANG:{name:"cd_GnashingFang"},cd_BOW_SHOCK:{name:"cd_BowShock"},cd_HEART_OF_LIGHT:{name:"cd_HeartOfLight"},cd_HEART_OF_STONE:{name:"cd_HeartOfStone"},cd_HEART_OF_CORUNDUM:{name:"cd_HeartOfCorundum"},cd_DOUBLE_DOWN:{name:"cd_DoubleDown"},cd_CONTINUATION:{name:"cd_Continuation"},cd_HYPERVELOCITY:{name:"cd_Hypervelocity"},cd_FATED_BRAND:{name:"cd_FatedBrand"},cd_JUGULAR_RIP:{name:"cd_JugularRip"},cd_ABDOMEN_TEAR:{name:"cd_AbdomenTear"},cd_EYE_GOUGE:{name:"cd_EyeGouge"}}),jL=ae()({POWDER_GAUGE:{name:"Powder Gauge",label:{zh:"晶壤"}}}),ET=ae()({NO_MERCY:{name:"No Mercy",label:{zh:"无情"}},AURORA:{name:"Aurora",label:{zh:"极光"}},BOW_SHOCK_DOT:{name:"Bow Shock DoT",label:{zh:"弓形冲波"}},CAMOUFLAGE:{name:"Camouflage",label:{zh:"伪装"}},HEART_OF_CORUNDUM:{name:"Heart of Corundum",label:{zh:"刚玉之心"}},CLARITY_OF_CORUNDUM:{name:"Clarity of Corundum",label:{zh:"刚玉之清"}},CATHARSIS_OF_CORUNDUM:{name:"Catharsis of Corundum",label:{zh:"刚玉之净"}},NEBULA:{name:"Nebula",label:{zh:"星云"}},GREAT_NEBULA:{name:"Great Nebula",label:{zh:"大星云"}},HEART_OF_LIGHT:{name:"Heart of Light",label:{zh:"光之心"}},HEART_OF_STONE:{name:"Heart of Stone",label:{zh:"石之心"}},READY_TO_BLAST:{name:"Ready to Blast",label:{zh:"超高速预备"}},READY_TO_BREAK:{name:"Ready to Break",label:{zh:"音速破预备"}},READY_TO_GOUGE:{name:"Ready to Gouge",label:{zh:"穿目预备"}},READY_TO_RAZE:{name:"Ready to Raze",label:{zh:"命运之印预备"}},READY_TO_REIGN:{name:"Ready to Reign",label:{zh:"心有灵狮"}},READY_TO_RIP:{name:"Ready to Rip",label:{zh:"撕喉预备"}},READY_TO_TEAR:{name:"Ready to Tear",label:{zh:"裂膛预备"}},ROYAL_GUARD:{name:"Royal Guard",label:{zh:"王室亲卫"}},SONIC_BREAK_DOT:{name:"Sonic Break DoT",label:{zh:"音速破"}},SUPERBOLIDE:{name:"Superbolide",label:{zh:"超火流星"}},BRUTAL_SHELL:{name:"Brutal Shell",label:{zh:"残暴弹"}}}),YL=ae()({GNB_COMBO_TRACKER:{name:"GNB Combo",label:{zh:"常规连"}},GNB_AOE_COMBO_TRACKER:{name:"GNB AOE Combo",label:{zh:"AOE连"}},GNB_GNASHING_COMBO_TRACKER:{name:"GNB Gnashing Combo",label:{zh:"续剑连"}},GNB_REIGN_COMBO_TRACKER:{name:"GNB Reign Combo",label:{zh:"狮心连"}}}),KL=ae()({DANGER_ZONE_MASTERY:{name:"Danger Zone Mastery",level:80},HEART_OF_STONE_MASTERY:{name:"Heart Of Stone Mastery",level:82},ENHANCED_AURORA:{name:"Enhanced Aurora",level:84},ENHANCED_CONTINUATION:{name:"Enhanced Continuation",level:86},CARTRIDGE_CHARGE_II:{name:"Cartridge Charge II",level:88},NEBULA_MASTERY:{name:"Nebula Mastery",level:92},ENHANCED_CONTINUATION_II:{name:"Enhanced Continuation II",level:96},ENHANCED_BLOODFEST:{name:"Enhanced Bloodfest",level:100}}),VL={...jL,...ET,...YL},WL=ae()({HEATED_SPLIT_SHOT:{id:7411,name:"Heated Split Shot",label:{zh:"热分裂弹"}},HEATED_SLUG_SHOT:{id:7412,name:"Heated Slug Shot",label:{zh:"热独头弹"}},HEATED_CLEAN_SHOT:{id:7413,name:"Heated Clean Shot",label:{zh:"热狙击弹"}},DRILL:{id:16498,name:"Drill",label:{zh:"钻头"}},HOT_SHOT:{id:2872,name:"Hot Shot",label:{zh:"热弹"}},AIR_ANCHOR:{id:16500,name:"Air Anchor",label:{zh:"空气锚"}},CHAIN_SAW:{id:25788,name:"Chain Saw",label:{zh:"回转飞锯"}},EXCAVATOR:{id:36981,name:"Excavator",label:{zh:"掘地飞轮"}},GAUSS_ROUND:{id:2874,name:"Gauss Round",label:{zh:"虹吸弹"}},DOUBLE_CHECK:{id:36979,name:"Double Check",label:{zh:"双将"}},RICOCHET:{id:2890,name:"Ricochet",label:{zh:"弹射"}},CHECKMATE:{id:36980,name:"Checkmate",label:{zh:"将死"}},BLAZING_SHOT:{id:36978,name:"Blazing Shot",label:{zh:"烈焰弹"}},WILDFIRE:{id:2878,name:"Wildfire",label:{zh:"野火"}},DETONATOR:{id:16766,name:"Detonator",label:{zh:"引爆装置"}},HYPERCHARGE:{id:17209,name:"Hypercharge",label:{zh:"超荷"}},ROOK_AUTOTURRET:{id:2864,name:"Rook Autoturret",label:{zh:"车式浮空炮塔"}},ROOK_OVERDRIVE:{id:7415,name:"Rook Overdrive",label:{zh:"超档车式炮塔"}},AUTOMATON_QUEEN:{id:16501,name:"Automaton Queen",label:{zh:"后式自走人偶"}},QUEEN_OVERDRIVE:{id:16502,name:"Queen Overdrive",label:{zh:"超档后式人偶"}},BARREL_STABILIZER:{id:7414,name:"Barrel Stabilizer",label:{zh:"枪管加热"}},REASSEMBLE:{id:2876,name:"Reassemble",label:{zh:"整备"}},FULL_METAL_FIELD:{id:36982,name:"Full Metal Field",label:{zh:"全金属爆发"}},SPREAD_SHOT:{id:2870,name:"Spread Shot",label:{zh:"散射"}},SCATTERGUN:{id:25786,name:"Scattergun",label:{zh:"霰弹枪"}},AUTO_CROSSBOW:{id:16497,name:"Auto Crossbow",label:{zh:"自动弩"}},BIOBLASTER:{id:16499,name:"Bioblaster",label:{zh:"毒菌冲击"}},FLAMETHROWER:{id:7418,name:"Flamethrower",label:{zh:"火焰喷射器"}},DISMANTLE:{id:2887,name:"Dismantle",label:{zh:"武装解除"}},TACTICIAN:{id:16889,name:"Tactician",label:{zh:"策动"}},VOLLEY_FIRE:{id:2891,name:"Volley Fire",label:{zh:"齐射"}},ARM_PUNCH:{id:16504,name:"Arm Punch",label:{zh:"铁臂拳"}},ROOK_OVERLOAD:{id:7416,name:"Rook Overload",label:{zh:"超负荷车式炮塔"}},PILE_BUNKER:{id:16503,name:"Pile Bunker",label:{zh:"打桩枪"}},CROWNED_COLLIDER:{id:25787,name:"Crowned Collider",label:{zh:"王室对撞机"}}}),XL=ae()({cd_REASSEMBLE:{name:"cd_Reassemble"},cd_DRILL:{name:"cd_Drill"},cd_CHECKMATE:{name:"cd_Checkmate"},cd_DOUBLE_CHECK:{name:"cd_DoubleCheck"},cd_AIR_ANCHOR:{name:"cd_AirAnchor"},cd_CHAINSAW:{name:"cd_Chainsaw",label:{zh:"CD：回转飞锯"}},cd_BARREL_STABILIZER:{name:"cd_BarrelStabilizer"},cd_WILDFIRE:{name:"cd_Wildfire"},cd_QUEEN:{name:"cd_Queen",label:{zh:"CD：后式自走人偶"}},cd_OVERDRIVE:{name:"cd_Overdrive",label:{zh:"CD：超档车式炮塔/超档后式人偶"}},cd_DISMANTLE:{name:"cd_Dismantle"},cd_TACTICIAN:{name:"cd_Tactician"},cd_HYPERCHARGE:{name:"cd_Hypercharge"},cd_DETONATOR:{name:"cd_Detonator"},cd_FLAMETHROWER:{name:"cd_Flamethrower"}}),qL=ae()({HEAT_GAUGE:{name:"Heat",label:{zh:"枪管热度"}},BATTERY_GAUGE:{name:"Battery",label:{zh:"电能"}}}),hT=ae()({REASSEMBLED:{name:"Reassembled",label:{zh:"整备预备"}},OVERHEATED:{name:"Overheated",label:{zh:"过热状态"},maximumStacks:5},WILDFIRE:{name:"Wildfire",label:{zh:"野火（敌）"}},WILDFIRE_SELF:{name:"Wildfire Self",label:{zh:"野火（我）"}},FLAMETHROWER:{name:"Flamethrower",label:{zh:"火焰喷射器持续中"}},BIOBLASTER:{name:"Bioblaster",label:{zh:"毒菌冲击dot"}},TACTICIAN:{name:"Tactician",label:{zh:"策动buff"}},HYPERCHARGED:{name:"Hypercharged",label:{zh:"超荷预备"}},EXCAVATOR_READY:{name:"Excavator Ready",label:{zh:"掘地飞轮预备"}},FULL_METAL_MACHINIST:{name:"Full Metal Machinist",label:{zh:"全金属爆发预备"}}}),ZL=ae()({HEAT_COMBO:{name:"Heat Combo",label:{zh:"热连击"}},QUEEN:{name:"Queen",label:{zh:"人偶预备"}},QUEEN_PUNCHES:{name:"QueenPunches",label:{zh:"人偶铁壁拳"}},QUEEN_FINISHERS:{name:"QueenFinishers",label:{zh:"人偶离场"}},BATTERY_BONUS:{name:"BatteryBonus",label:{zh:"额外电量"}},WILDFIRE_HITS:{name:"WildfireHits",label:{zh:"野火命中"}}}),QL=ae()({CHARGED_ACTION_MASTERY:{name:"Charged Action Mastery",level:74},HOT_SHOT_MASTERY:{name:"Hot Shot Mastery",level:76},ENHANCED_WILD_FIRE:{name:"Enhanced Wildfire",level:88},PROMOTION:{name:"Promotion",level:80},SPREAD_SHOT_MASTERY:{name:"Spread Shot Mastery",level:82},ENHANCED_REASSEMBLE:{name:"Enhanced Reassemble",level:84},MARKSMANS_MASTERY:{name:"Marksman's Mastery",level:84},QUEENS_GAMBIT:{name:"Queen's Gambit",level:86},ENHANCED_TACTICIAN:{name:"Enhanced Tactician",level:88},DOUBLE_BARREL_MASTERY:{name:"Double-Barrel Mastery",level:92},ENHANCED_MULTI_WEAPON:{name:"Enhanced Multiweapon",level:94},MARKSMANS_MASTERY_II:{name:"Marksman's Mastery II",level:94},ENHANCED_MULTI_WEAPON_II:{name:"Enhanced Multiweapon II",level:96},ENHANCED_BARREL_STABILIZER:{name:"Enhanced Barrel Stabilizer",level:100}}),$L={...qL,...hT,...ZL},JL=ae()({BOOTSHINE:{id:53,name:"Bootshine",label:{zh:"连击",ja:"連撃"}},TRUE_STRIKE:{id:54,name:"True Strike",label:{zh:"正拳",ja:"正拳突き"}},SNAP_PUNCH:{id:56,name:"Snap Punch",label:{zh:"崩拳",ja:"崩拳"}},TWIN_SNAKES:{id:61,name:"Twin Snakes",label:{zh:"双掌打",ja:"双掌打"}},ARM_OF_THE_DESTROYER:{id:62,name:"Arm of the Destroyer",label:{zh:"破坏神冲",ja:"壊神衝"}},DEMOLISH:{id:66,name:"Demolish",label:{zh:"破碎拳",ja:"破砕拳"}},ROCKBREAKER:{id:70,name:"Rockbreaker",label:{zh:"地烈劲",ja:"地烈斬"}},THUNDERCLAP:{id:25762,name:"Thunderclap",label:{zh:"轻身步法",ja:"抜重歩法"}},HOWLING_FIST:{id:25763,name:"Howling Fist",label:{zh:"空鸣拳",ja:"空鳴拳"}},MANTRA:{id:65,name:"Mantra",label:{zh:"真言",ja:"マントラ"}},FOUR_POINT_FURY:{id:16473,name:"Four-point Fury",label:{zh:"四面脚",ja:"四面脚"}},DRAGON_KICK:{id:74,name:"Dragon Kick",label:{zh:"双龙脚",ja:"双竜脚"}},PERFECT_BALANCE:{id:69,name:"Perfect Balance",label:{zh:"震脚",ja:"踏鳴"}},FORM_SHIFT:{id:4262,name:"Form Shift",label:{zh:"演武",ja:"演武"}},FORBIDDEN_MEDITATION:{id:36942,name:"Forbidden Meditation",label:{zh:"阴阳斗气",ja:"陰陽闘気"}},THE_FORBIDDEN_CHAKRA:{id:3547,name:"The Forbidden Chakra",label:{zh:"阴阳斗气斩",ja:"陰陽闘気斬"}},MASTERFUL_BLITZ:{id:25764,name:"Masterful Blitz",label:{zh:"必杀技",ja:"必殺技"}},TORNADO_KICK:{id:3543,name:"Tornado Kick",label:{zh:"斗魂旋风脚",ja:"闘魂旋風脚"}},ELIXIR_FIELD:{id:3545,name:"Elixir Field",label:{zh:"苍气炮",ja:"蒼気砲"}},CELESTIAL_REVOLUTION:{id:25765,name:"Celestial Revolution",label:{zh:"翻天脚",ja:"天宙脚"}},FLINT_STRIKE:{id:25882,name:"Flint Strike",label:{zh:"爆裂脚",ja:"爆裂脚"}},RIDDLE_OF_EARTH:{id:7394,name:"Riddle of Earth",label:{zh:"金刚极意",ja:"金剛の極意"}},EARTHS_REPLY:{id:36944,name:"Earth's Reply",label:{zh:"金刚周天",ja:"金剛周天"}},RIDDLE_OF_FIRE:{id:7395,name:"Riddle of Fire",label:{zh:"红莲极意",ja:"紅蓮の極意"}},BROTHERHOOD:{id:7396,name:"Brotherhood",label:{zh:"义结金兰",ja:"桃園結義"}},RIDDLE_OF_WIND:{id:25766,name:"Riddle of Wind",label:{zh:"疾风极意",ja:"疾風の極意"}},INSPIRITED_MEDITATION:{id:36941,name:"Inspirited Meditation",label:{zh:"空鸣斗气",ja:"空鳴闘気"}},ENLIGHTENED_MEDITATION:{id:36943,name:"Enlightened Meditation",label:{zh:"万象斗气",ja:"万象闘気"}},ENLIGHTENMENT:{id:16474,name:"Enlightenment",label:{zh:"万象斗气圈",ja:"万象闘気圏"}},SIX_SIDED_STAR:{id:16476,name:"Six-sided Star",label:{zh:"六合星导脚",ja:"六合星導脚"}},SHADOW_OF_THE_DESTROYER:{id:25767,name:"Shadow of the Destroyer",label:{zh:"破坏神脚",ja:"壊神脚"}},RISING_PHOENIX:{id:25768,name:"Rising Phoenix",label:{zh:"凤凰舞",ja:"鳳凰の舞"}},PHANTOM_RUSH:{id:25769,name:"Phantom Rush",label:{zh:"梦幻斗舞",ja:"夢幻闘舞"}},LEAPING_OPO:{id:36945,name:"Leaping Opo",label:{zh:"猿舞连击",ja:"猿舞連撃"}},RISING_RAPTOR:{id:36946,name:"Rising Raptor",label:{zh:"龙颚正拳",ja:"竜頷正拳撃"}},POUNCING_COEURL:{id:36947,name:"Pouncing Coeurl",label:{zh:"豹袭崩拳",ja:"虎襲崩拳"}},ELIXIR_BURST:{id:36948,name:"Elixir Burst",label:{zh:"真空波",ja:"真空波"}},WINDS_REPLY:{id:36949,name:"Wind's Reply",label:{zh:"绝空拳",ja:"絶空拳"}},FIRES_REPLY:{id:36950,name:"Fire's Reply",label:{zh:"乾坤斗气弹",ja:"乾坤闘気弾"}}}),e1=ae()({cd_THUNDERCLAP:{name:"cd_Thunderclap"},cd_MANTRA:{name:"cd_Mantra"},cd_PERFECT_BALANCE:{name:"cd_PerfectBalance"},cd_ENLIGHTENMENT:{name:"cd_Enlightenment"},cd_THE_FORBIDDEN_CHAKRA:{name:"cd_TheForbiddenChakra"},cd_RIDDLE_OF_EARTH:{name:"cd_RiddleOfEarth"},cd_EARTHS_REPLY:{name:"cd_EarthsReply"},cd_RIDDLE_OF_FIRE:{name:"cd_RiddleOfFire"},cd_BROTHERHOOD:{name:"cd_Brotherhood"},cd_RIDDLE_OF_WIND:{name:"cd_RiddleOfWind"}}),t1=ae()({CHAKRA:{name:"Chakra",label:{zh:"斗气"}},BEAST_CHAKRA:{name:"Beast Chakra",label:{zh:"脉轮"}},BEAST_CHAKRA_TIMER:{name:"Beast Timer",label:{zh:"脉轮时间"}},NADI:{name:"Nadi",label:{zh:"太阴/太阳斗气"}},LUNAR_NADI:{name:"Lunar Nadi",label:{zh:"太阴斗气"}},SOLAR_NADI:{name:"Solar Nadi",label:{zh:"太阳斗气"}},OPO_OPOS_FURY:{name:"Opo-opo's Fury",label:{zh:"魔猿功力"}},RAPTORS_FURY:{name:"Raptor's Fury",label:{zh:"盗龙功力"}},COEURLS_FURY:{name:"Coeurl's Fury",label:{zh:"猛豹功力"}}}),fT=ae()({MANTRA:{name:"Mantra",label:{zh:"真言"}},OPO_OPO_FORM:{name:"Opo-opo Form",label:{zh:"魔猿身形"}},RAPTOR_FORM:{name:"Raptor Form",label:{zh:"盗龙身形"}},COEURL_FORM:{name:"Coeurl Form",label:{zh:"猛豹身形"}},PERFECT_BALANCE:{name:"Perfect Balance",maximumStacks:3,label:{zh:"震脚"}},FORMLESS_FIST:{name:"Formless Fist",label:{zh:"无相身形"}},RIDDLE_OF_EARTH:{name:"Riddle of Earth",label:{zh:"金刚极意"}},EARTHS_RESOLVE:{name:"Earth's Resolve",label:{zh:"金刚决意"}},EARTHS_RUMINATION:{name:"Earth's Rumination",label:{zh:"金刚周天预备"}},RIDDLE_OF_FIRE:{name:"Riddle of Fire",label:{zh:"红莲极意"}},FIRES_RUMINATION:{name:"Fire's Rumination",label:{zh:"乾坤斗气弹预备"}},BROTHERHOOD:{name:"Brotherhood",label:{zh:"义结金兰"}},MEDITATIVE_BROTHERHOOD:{name:"Meditative Brotherhood",label:{zh:"义结金兰：斗气"}},RIDDLE_OF_WIND:{name:"Riddle of Wind",label:{zh:"疾风极意"}},WINDS_RUMINATION:{name:"Wind's Rumination",label:{zh:"绝空拳预备"}},SIX_SIDED_STAR:{name:"Six-sided Star",label:{zh:"六合星导脚"}}}),a1=ae()({BEAST_CHAKRA_1:{name:"Beast Chakra 1",label:{zh:"脉轮1"}},BEAST_CHAKRA_2:{name:"Beast Chakra 2",label:{zh:"脉轮2"}},BEAST_CHAKRA_3:{name:"Beast Chakra 3",label:{zh:"脉轮3"}}}),n1=ae()({DEEP_MEDITATION_II:{name:"Deep Meditation II",level:74},HOWLING_FIST_MASTERY:{name:"Howling Fist Mastery",level:74},ENHANCED_GREASED_LIGHTNING_III:{name:"Enhanced Greased Lightning III",level:76},ARM_OF_THE_DESTROYER_MASTERY:{name:"Arm of the Destroyer Mastery",level:82},ENHANCED_THUNDERCLAP:{name:"Enhanced Thunderclap",level:84},MELEE_MASTERY_MNK:{name:"Melee Mastery MNK",level:84},FLINT_STRIKE_MASTERY:{name:"Flint Strike Mastery",level:86},ENHANCED_BROTHERHOOD:{name:"Enhanced Brotherhood",level:88},TORNADO_KICK_MASTERY:{name:"Tornado Kick Mastery",level:90},BEAST_CHAKRA_MASTERY:{name:"Beast Chakra Mastery",level:92},MELEE_MASTERY_II_MNK:{name:"Melee Mastery II MNK",level:94},ENHANCED_RIDDLE_OF_WIND:{name:"Enhanced Riddle of Wind",level:96},ENHANCED_RIDDLE_OF_FIRE:{name:"Enhanced Riddle of Fire",level:100}}),vC={...t1,...fT,...a1},i1=ae()({SPINNING_EDGE:{id:2240,name:"Spinning Edge",label:{zh:"双刃旋"}},SHADE_SHIFT:{id:2241,name:"Shade Shift",label:{zh:"残影"}},GUST_SLASH:{id:2242,name:"Gust Slash",label:{zh:"绝风"}},HIDE:{id:2245,name:"Hide",label:{zh:"隐遁"}},THROWING_DAGGER:{id:2247,name:"Throwing Dagger",label:{zh:"飞刀"}},TRICK_ATTACK:{id:2258,name:"Trick Attack",label:{zh:"攻其不备"}},AEOLIAN_EDGE:{id:2255,name:"Aeolian Edge",label:{zh:"旋风刃"}},TEN:{id:2259,name:"Ten",label:{zh:"天之印"}},NINJUTSU:{id:2260,name:"Ninjutsu",label:{zh:"忍术"}},CHI:{id:2261,name:"Chi",label:{zh:"地之印"}},DEATH_BLOSSOM:{id:2254,name:"Death Blossom",label:{zh:"血雨飞花"}},SHUKUCHI:{id:2262,name:"Shukuchi",label:{zh:"缩地"}},JIN:{id:2263,name:"Jin",label:{zh:"人之印"}},KASSATSU:{id:2264,name:"Kassatsu",label:{zh:"生杀予夺"}},HAKKE_MUJINSATSU:{id:16488,name:"Hakke Mujinsatsu",label:{zh:"八卦无刃杀"}},ARMOR_CRUSH:{id:3563,name:"Armor Crush",label:{zh:"强甲破点突"}},DREAM_WITHIN_A_DREAM:{id:3566,name:"Dream Within a Dream",label:{zh:"梦幻三段"}},HELLFROG_MEDIUM:{id:7401,name:"Hellfrog Medium",label:{zh:"通灵之术·大虾蟆"}},DOKUMORI:{id:36957,name:"Dokumori",label:{zh:"介毒之术"}},BHAVACAKRA:{id:7402,name:"Bhavacakra",label:{zh:"六道轮回"}},TEN_CHI_JIN:{id:7403,name:"Ten Chi Jin",label:{zh:"天地人"}},MEISUI:{id:16489,name:"Meisui",label:{zh:"命水"}},BUNSHIN:{id:16493,name:"Bunshin",label:{zh:"分身之术"}},PHANTOM_KAMAITACHI:{id:25774,name:"Phantom Kamaitachi",label:{zh:"残影镰鼬"}},FORKED_RAIJU:{id:25777,name:"Forked Raiju",label:{zh:"月影雷兽爪"}},FLEETING_RAIJU:{id:25778,name:"Fleeting Raiju",label:{zh:"月影雷兽牙"}},KUNAIS_BANE:{id:36958,name:"Kunai's Bane",label:{zh:"百雷铳"}},DEATHFROG_MEDIUM:{id:36959,name:"Deathfrog Medium",label:{zh:"通灵之术·虾蟆仙"}},ZESHO_MEPPO:{id:36960,name:"Zesho Meppo",label:{zh:"是生灭法"}},TENRI_JINDO:{id:36961,name:"Tenri Jindo",label:{zh:"天理人道"}},KATON:{id:2266,name:"Katon",label:{zh:"火遁之术"}},RAITON:{id:2267,name:"Raiton",label:{zh:"雷遁之术"}},HYOTON:{id:2268,name:"Hyoton",label:{zh:"冰遁之术"}},HUTON:{id:2269,name:"Huton",label:{zh:"风遁之术"}},DOTON:{id:2270,name:"Doton",label:{zh:"土遁之术"}},SUITON:{id:2271,name:"Suiton",label:{zh:"水遁之术"}},GOKA_MEKKYAKU:{id:16491,name:"Goka Mekkyaku",label:{zh:"劫火灭却之术"}},HYOSHO_RANRYU:{id:16492,name:"Hyosho Ranryu",label:{zh:"冰晶乱流之术"}},RABBIT_MEDIUM:{id:2272,name:"Rabbit Medium",label:{zh:"通灵之术·兔子"}},FUMA_SHURIKEN:{id:2265,name:"Fuma Shuriken",label:{zh:"风魔手里剑"}},FUMA_SHURIKEN_TEN:{id:18873,name:"Fuma Shuriken (Ten)",label:{zh:"风魔手里剑（天）"}},FUMA_SHURIKEN_CHI:{id:18874,name:"Fuma Shuriken (Chi)",label:{zh:"风魔手里剑（地）"}},FUMA_SHURIKEN_JIN:{id:18875,name:"Fuma Shuriken (Jin)",label:{zh:"风魔手里剑（人）"}},KATON_TEN:{id:18876,name:"Katon (Ten)",label:{zh:"火遁之术（天）"}},RAITON_CHI:{id:18877,name:"Raiton (Chi)",label:{zh:"雷遁之术（地）"}},HYOTON_JIN:{id:18878,name:"Hyoton (Jin)",label:{zh:"冰遁之术（人）"}},HUTON_TEN:{id:18879,name:"Huton (Ten)",label:{zh:"风遁之术（天）"}},DOTON_CHI:{id:18880,name:"Doton (Chi)",label:{zh:"土遁之术（地）"}},SUITON_JIN:{id:18881,name:"Suiton (Jin)",label:{zh:"水遁之术（人）"}}}),o1=ae()({cd_MUDRA_HACK:{name:"cd_MudraHack"},cd_MUDRA:{name:"cd_Mudra"},cd_SHADE_SHIFT:{name:"cd_Shadeshift"},cd_HIDE:{name:"cd_Hide"},cd_TRICK_ATTACK:{name:"cd_TrickAttack"},cd_SHUKUCHI:{name:"cd_Shukuchi"},cd_KASSATSU:{name:"cd_Kassatsu"},cd_DREAM_WITHIN_A_DREAM:{name:"cd_DREAM_WITHIN_A_DREAM"},cd_DOKUMORI:{name:"cd_Dokumori"},cd_TEN_CHI_JIN:{name:"cd_TenChiJin"},cd_MEISUI:{name:"cd_Meisui"},cd_BUNSHIN:{name:"cd_Bunshin"},cd_BHAVACAKRA:{name:"cd_Bhavacakra"},cd_TENRI_JINDO:{name:"cd_TenriJindo"}}),l1=ae()({KAZEMATOI:{name:"Kazematoi",label:{zh:"风缠"}},NINKI:{name:"Ninki",label:{zh:"忍气"}}}),AT=ae()({MUDRA:{name:"Mudra",label:{zh:"手势"}},SHADE_SHIFT:{name:"Shade Shift",label:{zh:"残影"}},HIDDEN:{name:"Hidden",label:{zh:"隐遁"}},TRICK_ATTACK:{name:"Trick Attack",label:{zh:"攻其不备"}},KASSATSU:{name:"Kassatsu",label:{zh:"生杀予夺"}},DOKUMORI:{name:"Dokumori",label:{zh:"介毒之术"}},TENRI_JINDO_READY:{name:"Tenri Jindo Ready",label:{zh:"天理人道预备"}},TEN_CHI_JIN:{name:"Ten Chi Jin",maximumStacks:3,label:{zh:"天地人"}},MEISUI:{name:"Meisui",label:{zh:"命水"}},SHADOW_WALKER:{name:"Shadow Walker",label:{zh:"忍隐"}},BUNSHIN:{name:"Bunshin",maximumStacks:5,label:{zh:"分身之术"}},PHANTOM_KAMAITACHI_READY:{name:"Phantom Kamaitachi Ready",label:{zh:"残影镰鼬预备"}},RAIJU_READY:{name:"Raiju Ready",maximumStacks:3,label:{zh:"月影雷兽预备"}},KUNAIS_BANE:{name:"Kunai's Bane",label:{zh:"百雷铳"}},HIGI:{name:"Higi",label:{zh:"秘技预备"}},DOTON:{name:"Doton",mayBeToggled:!0,label:{zh:"土遁之术"}}}),s1=ae()({NIN_COMBO_TRACKER:{name:"NIN Combo",label:{zh:"双刃旋连连击状态"}},NIN_AOE_COMBO_TRACKER:{name:"NIN AOE Combo",label:{zh:"AOE连连击状态"}},MUDRA_TRACKER:{name:"Mudra Tracker",label:{zh:"手势状态"}},BUNNY:{name:"Bunny",label:{zh:"兔子"}}}),r1=ae()({ENHANCED_SHUKUCHI_II:{name:"Enhanced Shukuchi II",level:74},MELEE_MASTERY_NIN:{name:"Melee Mastery NIN",level:74},ENHANCED_KASSATSU:{name:"Enhanced Kassatsu",level:76},SHUKIHO_II:{name:"Shukiho II",level:78},SHUKIHO_III:{name:"Shukiho III",level:84},MELEE_MASTERY_II_NIN:{name:"Melee Mastery II NIN",level:84},ENHANCED_MEISUI:{name:"Enhanced Meisui",level:88},ENHANCED_RAITON:{name:"Enhanced Raiton",level:90},TRICK_ATTACK_MASTERY:{name:"Trick Attack Mastery",level:92},MELEE_MASTERY_III_NIN:{name:"Melee Mastery III NIN",level:94},ENHANCED_DOKUMORI:{name:"Enhanced Dokumori",level:96},ENHANCED_TEN_CHI_JIN:{name:"Enhanced Ten Chi Jin",level:100}}),c1={...l1,...AT,...s1},u1=ae()({FIRE_IN_RED:{id:34650,name:"Fire in Red",label:{zh:"火炎之红",ja:"レッドファイア"}},AERO_IN_GREEN:{id:34651,name:"Aero in Green",label:{zh:"疾风之绿",ja:"グリーンエアロ"}},WATER_IN_BLUE:{id:34652,name:"Water in Blue",label:{zh:"流水之蓝",ja:"ブルーウォータ"}},FIRE_II_IN_RED:{id:34656,name:"Fire II in Red",label:{zh:"烈炎之红",ja:"レッドファイラ"},discordEmote:"Fire2inRed"},AERO_II_IN_GREEN:{id:34657,name:"Aero II in Green",label:{zh:"烈风之绿",ja:"グリーンエアロラ"},discordEmote:"Aero2inGreen"},WATER_II_IN_BLUE:{id:34658,name:"Water II in Blue",label:{zh:"激水之蓝",ja:"ブルーウォタラ"},discordEmote:"Water2inBlue"},BLIZZARD_IN_CYAN:{id:34653,name:"Blizzard in Cyan",label:{zh:"冰结之蓝青",ja:"シアンブリザド"}},STONE_IN_YELLOW:{id:34654,name:"Stone in Yellow",label:{zh:"飞石之纯黄",ja:"イエローストーン"}},THUNDER_IN_MAGENTA:{id:34655,name:"Thunder in Magenta",label:{zh:"闪雷之品红",ja:"マゼンタサンダー"}},BLIZZARD_II_IN_CYAN:{id:34659,name:"Blizzard II in Cyan",label:{zh:"冰冻之蓝青",ja:"イエローストンラ"},discordEmote:"Blizzard2inCyan"},STONE_II_IN_YELLOW:{id:34660,name:"Stone II in Yellow",label:{zh:"坚石之纯黄",ja:"マゼンタサンダラ"},discordEmote:"Stone2inYellow"},THUNDER_II_IN_MAGENTA:{id:34661,name:"Thunder II in Magenta",label:{zh:"震雷之品红",ja:""},discordEmote:"Thunder2inMagenta"},HOLY_IN_WHITE:{id:34662,name:"Holy in White",label:{zh:"神圣之白",ja:"ホワイトホーリー"}},COMET_IN_BLACK:{id:34663,name:"Comet in Black",label:{zh:"彗星之黑",ja:"ブラックコメット"}},RAINBOW_DRIP:{id:34688,name:"Rainbow Drip",label:{zh:"彩虹点滴",ja:"レインボードリップ"}},STAR_PRISM:{id:34681,name:"Star Prism",label:{zh:"天星棱光",ja:"スタープリズム"}},TEMPERA_COAT:{id:34685,name:"Tempera Coat",label:{zh:"坦培拉涂层",ja:"テンペラコート"}},TEMPERA_GRASSA:{id:34686,name:"Tempera Grassa",label:{zh:"油性坦培拉涂层",ja:"テンペラグラッサ"}},TEMPERA_COAT_POP:{name:"Pop Tempera Coat",label:{zh:"坦培拉涂层破盾",ja:"テンペラコート【ブレイク】"}},TEMPERA_GRASSA_POP:{name:"Pop Tempera Grassa",label:{zh:"油性坦培拉涂层破盾",ja:"テンペラグラッサ【ブレイク】"}},SMUDGE:{id:34684,name:"Smudge",label:{zh:"速涂",ja:"スマッジ"}},SUBTRACTIVE_PALETTE:{id:34683,name:"Subtractive Palette",label:{zh:"减色混合",ja:"サブトラクティブパレット"}},CREATURE_MOTIF:{id:34689,name:"Creature Motif",label:{zh:"动物彩绘",ja:"ピクトアニマル"}},POM_MOTIF:{id:34664,name:"Pom Motif",label:{zh:"绒球彩绘",ja:"ピクトアニマル"}},WING_MOTIF:{id:34665,name:"Wing Motif",label:{zh:"翅膀彩绘",ja:"ピクトスケープ"}},CLAW_MOTIF:{id:34666,name:"Claw Motif",label:{zh:"兽爪彩绘",ja:"ピクトクロー"}},MAW_MOTIF:{id:34667,name:"Maw Motif",label:{zh:"尖牙彩绘",ja:"ピクトファング"}},LIVING_MUSE:{id:35347,name:"Living Muse",label:{zh:"动物构想",ja:"イマジンアニマル"}},POM_MUSE:{id:34670,name:"Pom Muse",label:{zh:"绒球构想",ja:"ピクトポンポン"}},WINGED_MUSE:{id:34671,name:"Winged Muse",label:{zh:"翅膀构想",ja:"ピクトウィング"}},CLAWED_MUSE:{id:34672,name:"Clawed Muse",label:{zh:"兽爪构想",ja:"イマジンクロー"}},FANGED_MUSE:{id:34673,name:"Fanged Muse",label:{zh:"尖牙构想",ja:"イマジンファング"}},MOG_OF_THE_AGES:{id:34676,name:"Mog of the Ages",label:{zh:"莫古力激流",ja:"モーグリストリーム"}},RETRIBUTION_OF_THE_MADEEN:{id:34677,name:"Retribution of the Madeen",label:{zh:"马蒂恩惩罚",ja:"マディーンレトリビューション"}},WEAPON_MOTIF:{id:34690,name:"Weapon Motif",label:{zh:"武器彩绘",ja:"ピクトウェポン"}},STEEL_MUSE:{id:35348,name:"Steel Muse",label:{zh:"武器构想",ja:"イマジンウェポン"}},HAMMER_MOTIF:{id:34668,name:"Hammer Motif",label:{zh:"重锤彩绘",ja:"ピクトハンマー"}},STRIKING_MUSE:{id:34674,name:"Striking Muse",label:{zh:"重锤构想",ja:"イマジンハンマー"}},HAMMER_STAMP:{id:34678,name:"Hammer Stamp",label:{zh:"重锤敲章",ja:"ハンマースタンプ"}},HAMMER_BRUSH:{id:34679,name:"Hammer Brush",label:{zh:"重锤掠刷",ja:"ハンマーブラッシュ"}},POLISHING_HAMMER:{id:34680,name:"Polishing Hammer",label:{zh:"重锤抛光",ja:"ハンマーポリッシュ"}},LANDSCAPE_MOTIF:{id:34691,name:"Landscape Motif",label:{zh:"风景彩绘",ja:"ピクトスケープ"}},SCENIC_MUSE:{id:35349,name:"Scenic Muse",label:{zh:"风景构想",ja:"イマジンスケープ"}},STARRY_SKY_MOTIF:{id:34669,name:"Starry Sky Motif",label:{zh:"星空彩绘",ja:"ピクトスカイ"}},STARRY_MUSE:{id:34675,name:"Starry Muse",label:{zh:"星空构想",ja:"イマジンスカイ"}}}),d1=ae()({cd_TEMPERA_COAT:{name:"cd_TemperaCoat"},cd_SMUDGE:{name:"cd_Smudge"},cd_LIVING_MUSE:{name:"cd_LivingMuse"},cd_PORTRAIT:{name:"cd_Portrait",label:{zh:"CD：莫古力激流/马蒂恩惩罚"}},cd_STEEL_MUSE:{name:"cd_SteelMuse"},cd_SCENIC_MUSE:{name:"cd_ScenicMuse"},cd_SUBTRACTIVE:{name:"cd_Subtractive",label:{zh:"CD：减色混合"}},cd_GRASSA:{name:"cd_Grassa",label:{zh:"CD：油性坦培拉涂层"}},cd_TEMPERA_POP:{name:"cd_TemperaPop",label:{zh:"CD：坦培拉涂层破盾"}}}),E1=ae()({PORTRAIT:{name:"Portrait",label:{zh:"肖像标识（无/莫古力/马蒂恩）"}},DEPICTIONS:{name:"Depictions",label:{zh:"动物标识（绒球/翅膀/兽爪/尖牙）"}},CREATURE_CANVAS:{name:"Creature Canvas",label:{zh:"动物画"}},WEAPON_CANVAS:{name:"Weapon Canvas",label:{zh:"武器画"}},LANDSCAPE_CANVAS:{name:"Landscape Canvas",label:{zh:"风景画"}},PALETTE_GAUGE:{name:"Palette Gauge",label:{zh:"调色量谱"}},PAINT:{name:"Paint",label:{zh:"颜料量谱"}}}),mT=ae()({AETHERHUES:{name:"Aetherhues",label:{zh:"以太色调"},mayNotBeCanceled:!0,maximumStacks:2},MONOCHROME_TONES:{name:"Monochrome Tones",label:{zh:"色调反转"}},SUBTRACTIVE_PALETTE:{name:"Subtractive Palette",label:{zh:"减色混合"},mayNotBeCanceled:!0,maximumStacks:3},HAMMER_TIME:{name:"Hammer Time",label:{zh:"重锤连击"},mayNotBeCanceled:!0,maximumStacks:3},INSPIRATION:{name:"Inspiration",label:{zh:"绘画装置"},mayBeToggled:!0},SUBTRACTIVE_SPECTRUM:{name:"Subtractive Spectrum",label:{zh:"减色混合预备"}},HYPERPHANTASIA:{name:"Hyperphantasia",label:{zh:"绘灵幻景"},maximumStacks:5},RAINBOW_BRIGHT:{name:"Rainbow Bright",label:{zh:"彩虹点滴效果提高"}},STARSTRUCK:{name:"Starstruck",label:{zh:"天星棱光预备"}},STARRY_MUSE:{name:"Starry Muse",label:{zh:"星空构想"}},TEMPERA_COAT:{name:"Tempera Coat",label:{zh:"坦培拉涂层"}},TEMPERA_GRASSA:{name:"Tempera Grassa",label:{zh:"油性坦培拉涂层"}},SMUDGE:{name:"Smudge",label:{zh:"速涂"}}}),h1=ae()({HAMMER_COMBO:{name:"Hammer Combo Counter",label:{zh:"重锤连击数"}}}),f1=ae()({PICTOMANCY_MASTERY_II:{name:"Pictomancy Mastery II",level:74},ENHANCED_ARTISTRY:{name:"Enhanced Artistry",level:80},ENHANCED_PICTOMANCY:{name:"Enhanced Pictomancy",level:82},ENHANCED_SMUDGE:{name:"Enhanced Smudge",level:84},PICTOMANCY_MASTERY_III:{name:"Pictomancy Mastery III",level:84},ENHANCED_PICTOMANCY_II:{name:"Enhanced Pictomancy II",level:86},ENHANCED_TEMPERA:{name:"Enhanced Tempera",level:88},ENHANCED_PALETTE:{name:"Enhanced Palette",level:90},ENHANCED_PICTOMANCY_III:{name:"Enhanced Pictomancy III",level:92},PICTOMANCY_MASTERY_IV:{name:"Pictomancy Mastery IV",level:94},ENHANCED_PICTOMANCY_IV:{name:"Enhanced Pictomancy IV",level:96},ENHANCED_PICTOMANCY_V:{name:"Enhanced Pictomancy V",level:100}}),A1={...E1,...mT,...h1},m1=ae()({FAST_BLADE:{id:9,name:"Fast Blade",label:{zh:"先锋剑"}},FIGHT_OR_FLIGHT:{id:20,name:"Fight or Flight",label:{zh:"战逃反应"}},RIOT_BLADE:{id:15,name:"Riot Blade",label:{zh:"暴乱剑"}},TOTAL_ECLIPSE:{id:7381,name:"Total Eclipse",label:{zh:"全蚀斩"}},SHIELD_BASH:{id:16,name:"Shield Bash",label:{zh:"盾牌猛击"}},IRON_WILL:{id:28,name:"Iron Will",label:{zh:"钢铁信念"}},RELEASE_IRON_WILL:{id:32065,name:"Release Iron Will",label:{zh:"解除钢铁信念"}},SHIELD_LOB:{id:24,name:"Shield Lob",label:{zh:"投盾"}},SPIRITS_WITHIN:{id:29,name:"Spirits Within",label:{zh:"深奥之灵"}},SHELTRON:{id:3542,name:"Sheltron",label:{zh:"盾阵"}},SENTINEL:{id:17,name:"Sentinel",label:{zh:"预警"}},PROMINENCE:{id:16457,name:"Prominence",label:{zh:"日珥斩"}},COVER:{id:27,name:"Cover",label:{zh:"保护"}},CIRCLE_OF_SCORN:{id:23,name:"Circle of Scorn",label:{zh:"厄运流转"}},HALLOWED_GROUND:{id:30,name:"Hallowed Ground",label:{zh:"神圣领域"}},BULWARK:{id:22,name:"Bulwark",label:{zh:"壁垒"}},GORING_BLADE:{id:3538,name:"Goring Blade",label:{zh:"沥血剑"}},DIVINE_VEIL:{id:3540,name:"Divine Veil",label:{zh:"圣光幕帘"}},CLEMENCY:{id:3541,name:"Clemency",label:{zh:"深仁厚泽"}},ROYAL_AUTHORITY:{id:3539,name:"Royal Authority",label:{zh:"王权剑"}},INTERVENTION:{id:7382,name:"Intervention",label:{zh:"干预"}},HOLY_SPIRIT:{id:7384,name:"Holy Spirit",label:{zh:"圣灵"}},INTERVENE:{id:16461,name:"Intervene",label:{zh:"调停"}},REQUIESCAT:{id:7383,name:"Requiescat",label:{zh:"安魂祈祷"}},PASSAGE_OF_ARMS:{id:7385,name:"Passage of Arms",label:{zh:"武装戍卫"}},HOLY_CIRCLE:{id:16458,name:"Holy Circle",label:{zh:"圣环"}},ATONEMENT:{id:16460,name:"Atonement",label:{zh:"赎罪剑"}},SUPPLICATION:{id:36918,name:"Supplication",label:{zh:"祈告剑（赎罪连2）"}},SEPULCHRE:{id:36919,name:"Sepulchre",label:{zh:"葬送剑（赎罪连3）"}},CONFITEOR:{id:16459,name:"Confiteor",label:{zh:"悔罪"}},HOLY_SHELTRON:{id:25746,name:"Holy Sheltron",label:{zh:"圣盾阵"}},EXPIACION:{id:25747,name:"Expiacion",label:{zh:"偿赎剑"}},BLADE_OF_FAITH:{id:25748,name:"Blade of Faith",label:{zh:"信念之剑（悔罪连2）"}},BLADE_OF_TRUTH:{id:25749,name:"Blade of Truth",label:{zh:"真理之剑（悔罪连3）"}},BLADE_OF_VALOR:{id:25750,name:"Blade of Valor",label:{zh:"英勇之剑（悔罪连4）"}},GUARDIAN:{id:36920,name:"Guardian",label:{zh:"极致防御"}},IMPERATOR:{id:36921,name:"Imperator",label:{zh:"绝对统治"}},BLADE_OF_HONOR:{id:36922,name:"Blade of Honor",label:{zh:"荣耀之剑"}}}),R1=ae()({cd_FIGHT_OR_FLIGHT:{name:"cd_FightOrFlight"},cd_IRON_WILL:{name:"cd_IronWill"},cd_RELEASE_IRON_WILL:{name:"cd_ReleaseIronWill"},cd_SPIRITS_WITHIN:{name:"cd_SpiritsWithin"},cd_SHELTRON:{name:"cd_Sheltron"},cd_SENTINEL:{name:"cd_Sentinel"},cd_COVER:{name:"cd_Cover"},cd_CIRCLE_OF_SCORN:{name:"cd_CircleOfScorn"},cd_HALLOWED_GROUND:{name:"cd_HallowedGround"},cd_BULWARK:{name:"cd_Bulwark"},cd_DIVINE_VEIL:{name:"cd_DivineVeil"},cd_INTERVENTION:{name:"cd_Intervention"},cd_INTERVENE:{name:"cd_Intervene"},cd_REQUIESCAT:{name:"cd_Requiescat"},cd_PASSAGE_OF_ARMS:{name:"cd_PassageOfArms"},cd_HOLY_SHELTRON:{name:"cd_HolySheltron"},cd_EXPIACION:{name:"cd_Expiacion"},cd_GUARDIAN:{name:"cd_Guardian"},cd_IMPERATOR:{name:"cd_Imperator"},cd_BLADE_OF_HONOR:{name:"cd_BladeOfHonor"}}),T1=ae()({OATH_GAUGE:{name:"Oath Gauge",label:{zh:"忠义值"}}}),RT=ae()({FIGHT_OR_FLIGHT:{name:"Fight or Flight",label:{zh:"战逃反应"}},IRON_WILL:{name:"Iron Will",label:{zh:"钢铁信念"}},CIRCLE_OF_SCORN_DOT:{name:"Circle of Scorn DoT",label:{zh:"厄运流转DOT"}},SHELTRON:{name:"Sheltron",label:{zh:"盾阵"}},SENTINEL:{name:"Sentinel",label:{zh:"预警"}},COVER:{name:"Cover",label:{zh:"保护"}},HALLOWED_GROUND:{name:"Hallowed Ground",label:{zh:"神圣领域"}},BULWARK:{name:"Bulwark",label:{zh:"壁垒"}},GORING_BLADE_READY:{name:"Goring Blade Ready",label:{zh:"沥血剑预备"}},DIVINE_VEIL:{name:"Divine Veil",label:{zh:"圣光幕帘"}},ATONEMENT_READY:{name:"Atonement Ready",label:{zh:"赎罪剑预备"}},DIVINE_MIGHT:{name:"Divine Might",label:{zh:"神圣魔法效果提高"}},INTERVENTION:{name:"Intervention",label:{zh:"干预"}},KNIGHTS_RESOLVE:{name:"Knight's Resolve",label:{zh:"骑士的坚守"}},KNIGHTS_BENEDICTION:{name:"Knight's Benediction",label:{zh:"骑士的加护"}},REQUIESCAT:{name:"Requiescat",maximumStacks:4,label:{zh:"安魂祈祷"}},CONFITEOR_READY:{name:"Confiteor Ready",label:{zh:"悔罪预备"}},PASSAGE_OF_ARMS:{name:"Passage of Arms",label:{zh:"武装戍卫"}},ARMS_UP:{name:"Arms Up",label:{zh:"武装"}},SUPPLICATION_READY:{name:"Supplication Ready",label:{zh:"祈告剑预备"}},SEPULCHRE_READY:{name:"Sepulchre Ready",label:{zh:"葬送剑预备"}},HOLY_SHELTRON:{name:"Holy Sheltron",label:{zh:"圣盾阵"}},BLADE_OF_HONOR_READY:{name:"Blade of Honor Ready",label:{zh:"荣耀之剑预备"}},GUARDIAN:{name:"Guardian",label:{zh:"极致防御"}},GUARDIANS_WILL:{name:"Guardian's Will",label:{zh:"极致护盾"}}}),S1=ae()({PLD_COMBO_TRACKER:{name:"PLD Combo Tracker",label:{zh:"王权连连击状态"}},PLD_CONFITEOR_COMBO_TRACKER:{name:"PLD Confiteor Combo Tracker",label:{zh:"悔罪连连击状态"}},PLD_AOE_COMBO_TRACKER:{name:"PLD AOE Combo Tracker",label:{zh:"AOE连连击状态"}}}),I1=ae()({ENHANCED_PROMINENCE:{name:"Enhanced Prominence",level:72},ENHANCED_SHELTRON:{name:"Enhanced Sheltron",level:74},SWORD_OATH:{name:"Sword Oath",level:76},ENHANCED_REQUIESCAT:{name:"Enhanced Requiescat",level:80},SHELTRON_MASTERY:{name:"Sheltron Mastery",level:82},ENHANCED_INTERVENTION:{name:"Enhanced Intervention",level:82},DIVINE_MAGIC_MASTERY_II:{name:"Divine Magic Mastery II",level:84},SPIRITS_WITHIN_MASTERY:{name:"Spirits Within Mastery",level:86},ENHANCED_DIVINE_VEIL:{name:"Enhanced Divine Veil",level:88},SENTINEL_MASTERY:{name:"Sentinel Mastery",level:92},REQUIESCAT_MASTERY:{name:"Requiescat Mastery",level:96},ENHANCED_BLADE_OF_VALOR:{name:"Enhanced Blade of Valor",level:100}}),_1={...T1,...RT,...S1},g1=ae()({RIPOSTE:{id:7504,name:"Riposte",label:{zh:"回刺",ja:""}},VERTHUNDER:{id:7505,name:"Verthunder",label:{zh:"赤闪雷",ja:""}},CORPS_A_CORPS:{id:7506,name:"Corps-a-corps",label:{zh:"短兵相接",ja:""}},VERAERO:{id:7507,name:"Veraero",label:{zh:"赤疾风",ja:""}},VERFIRE:{id:7510,name:"Verfire",label:{zh:"赤火炎",ja:""}},VERSTONE:{id:7511,name:"Verstone",label:{zh:"赤飞石",ja:""}},ZWERCHHAU:{id:7512,name:"Zwerchhau",label:{zh:"交击斩",ja:""}},DISPLACEMENT:{id:7515,name:"Displacement",label:{zh:"移转",ja:""}},FLECHE:{id:7517,name:"Fleche",label:{zh:"飞刺",ja:""}},REDOUBLEMENT:{id:7516,name:"Redoublement",label:{zh:"连攻",ja:""}},ACCELERATION:{id:7518,name:"Acceleration",label:{zh:"促进",ja:""}},MOULINET:{id:7513,name:"Moulinet",label:{zh:"划圆斩",ja:""}},VERCURE:{id:7514,name:"Vercure",label:{zh:"赤治疗",ja:""}},CONTRE_SIXTE:{id:7519,name:"Contre Sixte",label:{zh:"六分反击",ja:""}},EMBOLDEN:{id:7520,name:"Embolden",label:{zh:"鼓励",ja:""}},MANAFICATION:{id:7521,name:"Manafication",label:{zh:"魔元化",ja:""}},JOLT_II:{id:7524,name:"Jolt II",label:{zh:"震荡",ja:""}},VERRAISE:{id:7523,name:"Verraise",label:{zh:"赤复活",ja:""}},IMPACT:{id:16526,name:"Impact",label:{zh:"冲击",ja:""}},VERFLARE:{id:7525,name:"Verflare",label:{zh:"赤核爆",ja:""}},VERHOLY:{id:7526,name:"Verholy",label:{zh:"赤神圣",ja:""}},ENCHANTED_RIPOSTE:{id:7527,name:"Enchanted Riposte",label:{zh:"魔回刺",ja:""}},ENCHANTED_ZWERCHHAU:{id:7528,name:"Enchanted Zwerchhau",label:{zh:"魔交击斩",ja:""}},ENCHANTED_REDOUBLEMENT:{id:7529,name:"Enchanted Redoublement",label:{zh:"魔连攻",ja:""}},ENCHANTED_MOULINET:{id:7530,name:"Enchanted Moulinet",label:{zh:"魔划圆斩",ja:""}},VERTHUNDER_II:{id:16524,name:"Verthunder II",label:{zh:"赤震雷",ja:""}},VERAERO_II:{id:16525,name:"Veraero II",label:{zh:"赤烈风",ja:""}},ENGAGEMENT:{id:16527,name:"Engagement",label:{zh:"交剑",ja:""}},ENCHANTED_REPRISE:{id:16528,name:"Enchanted Reprise",label:{zh:"魔续斩",ja:""}},REPRISE:{id:16529,name:"Reprise",label:{zh:"续斩",ja:""}},SCORCH:{id:16530,name:"Scorch",label:{zh:"焦热",ja:""}},VERTHUNDER_III:{id:25855,name:"Verthunder III",label:{zh:"赤暴雷",ja:""}},VERAERO_III:{id:25856,name:"Veraero III",label:{zh:"赤疾风",ja:""}},MAGICK_BARRIER:{id:25857,name:"Magick Barrier",label:{zh:"抗死",ja:""}},RESOLUTION:{id:25858,name:"Resolution",label:{zh:"决断",ja:""}},ENCHANTED_MOULINET_II:{id:37002,name:"Enchanted Moulinet Deux",label:{zh:"魔划圆斩·二段",ja:""}},ENCHANTED_MOULINET_III:{id:37003,name:"Enchanted Moulinet Trois",label:{zh:"魔划圆斩·三段",ja:""}},JOLT_III:{id:37004,name:"Jolt III",label:{zh:"激荡",ja:""}},VICE_OF_THORNS:{id:37005,name:"Vice of Thorns",label:{zh:"荆棘回环",ja:""}},GRAND_IMPACT:{id:37006,name:"Grand Impact",label:{zh:"显贵冲击",ja:""}},PREFULGENCE:{id:37007,name:"Prefulgence",label:{zh:"光芒四射",ja:""}}}),N1=ae()({cd_CORPS_A_CORPS:{name:"cd_CorpsACorps"},cd_DISPLACEMENT:{name:"cd_Displacement"},cd_FLECHE:{name:"cd_Fleche"},cd_ACCELERATION:{name:"cd_Acceleration"},cd_CONTRE_SIXTE:{name:"cd_ContreSixte"},cd_EMBOLDEN:{name:"cd_Embolden"},cd_MANAFICATION:{name:"cd_Manafication"},cd_MAGICK_BARRIER:{name:"cd_MagickBarrier"},cd_VICE_OF_THORNS:{name:"cd_ViceOfThorns"},cd_PREFULGENCE:{name:"cd_Prefulgence"}}),p1=ae()({WHITE_MANA:{name:"White Mana",label:{zh:"白魔元"}},BLACK_MANA:{name:"Black Mana",label:{zh:"黑魔元"}},MANA_STACKS:{name:"Mana Stacks",label:{zh:"魔元集"}}}),TT=ae()({ACCELERATION:{name:"Acceleration",label:{zh:"促进"}},DUALCAST:{name:"Dualcast",label:{zh:"连续咏唱"}},EMBOLDEN:{name:"Embolden",label:{zh:"鼓励"}},GRAND_IMPACT_READY:{name:"Grand Impact Ready",label:{zh:"显贵冲击预备"}},MAGICK_BARRIER:{name:"Magick Barrier",label:{zh:"抗死"}},MAGICKED_SWORDPLAY:{name:"Magicked Swordplay",label:{zh:"魔法剑术"},maximumStacks:3},MANAFICATION:{name:"Manafication",label:{zh:"魔元化"},maximumStacks:6},PREFULGENCE_READY:{name:"Prefulgence Ready",label:{zh:"光芒四射预备"}},THORNED_FLOURISH:{name:"Thorned Flourish",label:{zh:"荆棘环绕预备"}},VERFIRE_READY:{name:"Verfire Ready",label:{zh:"赤火炎预备"}},VERSTONE_READY:{name:"Verstone Ready",label:{zh:"赤飞石预备"}}}),C1=ae()({RDM_MELEE_COUNTER:{name:"RDM Melee Combo",label:{zh:"赤魔近战连"}},RDM_FINISHER_COUNTER:{name:"RDM Finisher Combo",label:{zh:"赤核爆/赤神圣连击"}},RDM_AOE_COUNTER:{name:"RDM AoE Combo",label:{zh:"赤魔AOE连"}}}),O1=ae()({ENHANCED_DISPLACEMENT:{name:"Enhanced Displacement",level:72},RED_MAGIC_MASTERY:{name:"Red Magic Mastery",level:74},ENHANCED_MANAFICATION:{name:"Enhanced Manafication",level:78},RED_MAGIC_MASTERY_II:{name:"Red Magic Mastery II",level:82},RED_MAGIC_MASTERY_III:{name:"Red Magic Mastery III",level:84},ENHANCED_ACCELERATION:{name:"Enhanced Acceleration",level:88},ENHANCED_MANAFICATION_II:{name:"Enhanced Manafication II",level:90},ENHANCED_EMBOLDEN:{name:"Enhanced Embolden",level:92},ENCHANTED_BLADE_MASTERY:{name:"Enchanted Blade Mastery",level:94},ENHANCED_ACCELERATION_II:{name:"Enhanced Acceleration II",level:96},ENHANCED_MANAFICATION_III:{name:"Enhanced Manafication III",level:100}}),b1={...p1,...TT,...C1},D1=ae()({SLICE:{id:24373,name:"Slice",label:{zh:"切割"}},WAXING_SLICE:{id:24374,name:"Waxing Slice",label:{zh:"增盈切割"}},INFERNAL_SLICE:{id:24375,name:"Infernal Slice",label:{zh:"地狱切割"}},SHADOW_OF_DEATH:{id:24378,name:"Shadow of Death",label:{zh:"死亡之影"}},SOUL_SLICE:{id:24380,name:"Soul Slice",label:{zh:"灵魂切割"}},GIBBET:{id:24382,name:"Gibbet",label:{zh:"绞决"}},GALLOWS:{id:24383,name:"Gallows",label:{zh:"缢杀"}},EXECUTIONERS_GIBBET:{id:36970,name:"Executioner's Gibbet",label:{zh:"绞决处刑"}},EXECUTIONERS_GALLOWS:{id:36971,name:"Executioner's Gallows",label:{zh:"缢杀处刑"}},VOID_REAPING:{id:24395,name:"Void Reaping",label:{zh:"虚无收割"}},CROSS_REAPING:{id:24396,name:"Cross Reaping",label:{zh:"交错收割"}},PLENTIFUL_HARVEST:{id:24385,name:"Plentiful Harvest",label:{zh:"阴冷收割"}},HARVEST_MOON:{id:24388,name:"Harvest Moon",label:{zh:"收获月"}},COMMUNIO:{id:24398,name:"Communio",label:{zh:"团契"}},PERFECTIO:{id:36973,name:"Perfectio",label:{zh:"完人"}},SOULSOW:{id:24387,name:"Soulsow",label:{zh:"播魂种"}},HARPE:{id:24386,name:"Harpe",label:{zh:"勾刃"}},BLOOD_STALK:{id:24389,name:"Blood Stalk",label:{zh:"隐匿挥割"}},UNVEILED_GIBBET:{id:24390,name:"Unveiled Gibbet",label:{zh:"绞决爪"}},UNVEILED_GALLOWS:{id:24391,name:"Unveiled Gallows",label:{zh:"缢杀爪"}},LEMURES_SLICE:{id:24399,name:"Lemure's Slice",label:{zh:"夜游魂切割"}},SACRIFICIUM:{id:36969,name:"Sacrificium",label:{zh:"祭牲"}},ARCANE_CIRCLE:{id:24405,name:"Arcane Circle",label:{zh:"神秘环"}},GLUTTONY:{id:24393,name:"Gluttony",label:{zh:"暴食"}},ENSHROUD:{id:24394,name:"Enshroud",label:{zh:"夜游魂衣"}},SPINNING_SCYTHE:{id:24376,name:"Spinning Scythe",label:{zh:"旋转钐割"}},NIGHTMARE_SCYTHE:{id:24377,name:"Nightmare Scythe",label:{zh:"噩梦钐割"}},WHORL_OF_DEATH:{id:24379,name:"Whorl of Death",label:{zh:"死亡之涡"}},SOUL_SCYTHE:{id:24381,name:"Soul Scythe",label:{zh:"灵魂钐割"}},GUILLOTINE:{id:24384,name:"Guillotine",label:{zh:"断首"}},EXECUTIONERS_GUILLOTINE:{id:36972,name:"Executioner's Guillotine",label:{zh:"断首处刑"}},GRIM_REAPING:{id:24397,name:"Grim Reaping",label:{zh:"阴冷收割"}},GRIM_SWATHE:{id:24392,name:"Grim Swathe",label:{zh:"束缚挥割"}},LEMURES_SCYTHE:{id:24400,name:"Lemure's Scythe",label:{zh:"夜游魂钐割"}},ARCANE_CREST:{id:24404,name:"Arcane Crest",label:{zh:"神秘纹"}},ARCANE_CREST_POP:{name:"Pop Arcane Crest",label:{zh:"神秘纹破裂"}},HELLS_INGRESS:{id:24401,name:"Hell's Ingress",label:{zh:"地狱入境"}},HELLS_EGRESS:{id:24402,name:"Hell's Egress",label:{zh:"地狱出境"}},REGRESS:{id:24403,name:"Regress",label:{zh:"回退"}},GAIN_SOUL_GAUGE:{name:"+10 Soul Gauge",label:{zh:"灵魂量谱+10"}}}),y1=ae()({cd_ARCANE_CIRCLE:{name:"cd_ArcaneCircle"},cd_GLUTTONY:{name:"cd_Gluttony"},cd_SOUL_SLICE:{name:"cd_SoulSlice"},cd_ENSHROUD:{name:"cd_Enshroud"},cd_INGRESS_EGRESS:{name:"cd_IngressEgress",label:{zh:"CD：地狱入境/地狱出境"}},cd_ARCANE_CREST:{name:"cd_ArcaneCrest"},cd_ARCANE_CREST_POP:{name:"cd_ArcaneCrestPop"},cd_BLOOD_STALK:{name:"cd_BloodStalk"},cd_LEMURES_SLICE:{name:"cd_LemuresSlice"},cd_SACRIFICIUM:{name:"cd_Sacrificium"},cd_GAIN_SOUL_GAUGE:{name:"cd_GainSoulGauge"}}),v1=ae()({SOUL:{name:"Soul",label:{zh:"灵魂"}},SHROUD:{name:"Shroud",label:{zh:"魂衣"}},LEMURE_SHROUD:{name:"Lemure Shroud",label:{zh:"夜游魂"}},VOID_SHROUD:{name:"Void Shroud",label:{zh:"虚无魂"}}}),ST=ae()({DEATHS_DESIGN:{name:"Death's Design",label:{zh:"死亡烙印"}},SOUL_REAVER:{name:"Soul Reaver",label:{zh:"妖异之镰"},maximumStacks:2},ENHANCED_GIBBET:{name:"Enhanced Gibbet",label:{zh:"绞决效果提高"}},ENHANCED_GALLOWS:{name:"Enhanced Gallows",label:{zh:"缢杀效果提高"}},EXECUTIONER:{name:"Executioner",label:{zh:"处刑人"},maximumStacks:2},ENSHROUDED:{name:"Enshrouded",label:{zh:"夜游魂衣"}},ENHANCED_VOID_REAPING:{name:"Enhanced Void Reaping",label:{zh:"虚无收割效果提高"}},ENHANCED_CROSS_REAPING:{name:"Enhanced Cross Reaping",label:{zh:"交错收割效果提高"}},OBLATIO:{name:"Oblatio",label:{zh:"祭牲预备"}},IDEAL_HOST:{name:"Ideal Host",label:{zh:"夜游魂衣预备"}},PERFECTIO_OCCULTA:{name:"Perfectio Occulta",label:{zh:"补完"}},PERFECTIO_PARATA:{name:"Perfectio Parata",label:{zh:"完人预备"}},ARCANE_CIRCLE:{name:"Arcane Circle",label:{zh:"神秘环"}},CIRCLE_OF_SACRIFICE:{name:"Circle of Sacrifice",label:{zh:"祭祀环"}},BLOODSOWN_CIRCLE:{name:"Bloodsown Circle",label:{zh:"死亡祭祀"}},IMMORTAL_SACRIFICE:{name:"Immortal Sacrifice",label:{zh:"死亡祭品"},maximumStacks:8},CREST_OF_TIME_BORROWED:{name:"Crest of Time Borrowed",label:{zh:"守护纹"}},CREST_OF_TIME_RETURNED:{name:"Crest of Time Returned",label:{zh:"活性纹"}},SOULSOW:{name:"Soulsow",label:{zh:"播魂种"}},THRESHOLD:{name:"Threshold",label:{zh:"回退预备"}},ENHANCED_HARPE:{name:"Enhanced Harpe",label:{zh:"勾刃效果提高"}}}),M1=ae()({ARCANE_CREST:{name:"Arcane Crest",label:{zh:"神秘纹"}},HELLS_INGRESS_USED:{name:"Hell's Ingress Used",label:{zh:"地狱入境已使用"}},RPR_COMBO:{name:"RPR Combo",label:{zh:"单体连击"}},RPR_AOE_COMBO:{name:"RPR AoE Combo",label:{zh:"AOE连击"}}}),L1=ae()({HELLSGATE:{name:"Hellsgate",level:74},TEMPERED_SOUL:{name:"Tempered Soul",level:78},SHROUD_GAUGE:{name:"Shroud Gauge",level:80},ENHANCED_ARCANE_CREST:{name:"Enhanced Arcane Crest",level:84},MELEE_MASTERY_II_RPR:{name:"Melee Mastery II",level:84},VOID_SOUL:{name:"Void Soul",level:86},ENHANCED_ARCANE_CIRCLE:{name:"Enhanced Arcane Circle",level:88},ENHANCED_ENSHROUD:{name:"Enhanced Enshroud",level:92},MELEE_MASTERY_III_RPR:{name:"Melee Mastery III",level:94},ENHANCED_GLUTTONY:{name:"Enhanced Gluttony",level:96},ENHANCED_PLENTIFUL_HARVEST:{name:"Enhanced Plentiful Harvest",level:100}}),H1={...v1,...ST,...M1},U1=ae()({ENPI:{id:7486,name:"Enpi",label:{zh:"燕飞"}},HAKAZE:{id:7477,name:"Hakaze",label:{zh:"刃风"}},GYOFU:{id:36963,name:"Gyofu",label:{zh:"晓风"}},YUKIKAZE:{id:7480,name:"Yukikaze",label:{zh:"雪风"}},JINPU:{id:7478,name:"Jinpu",label:{zh:"阵风"}},GEKKO:{id:7481,name:"Gekko",label:{zh:"月光"}},SHIFU:{id:7479,name:"Shifu",label:{zh:"士风"}},KASHA:{id:7482,name:"Kasha",label:{zh:"花车"}},FUGA:{id:7483,name:"Fuga",label:{zh:"风雅"}},FUKO:{id:25780,name:"Fuko",label:{zh:"风光"}},MANGETSU:{id:7484,name:"Mangetsu",label:{zh:"满月"}},OKA:{id:7485,name:"Oka",label:{zh:"樱花"}},MEIKYO_SHISUI:{id:7499,name:"Meikyo Shisui",label:{zh:"明镜止水"}},IKISHOTEN:{id:16482,name:"Ikishoten",label:{zh:"意气冲天"}},HISSATSU_SHINTEN:{id:7490,name:"Hissatsu: Shinten",label:{zh:"必杀剑·震天"}},HISSATSU_KYUTEN:{id:7491,name:"Hissatsu: Kyuten",label:{zh:"必杀剑·九天"}},HISSATSU_GYOTEN:{id:7492,name:"Hissatsu: Gyoten",label:{zh:"必杀剑·晓天"}},HISSATSU_YATEN:{id:7493,name:"Hissatsu: Yaten",label:{zh:"必杀剑·夜天"}},HISSATSU_SENEI:{id:16481,name:"Hissatsu: Senei",label:{zh:"必杀剑·闪影"}},HISSATSU_GUREN:{id:7496,name:"Hissatsu: Guren",label:{zh:"必杀剑·红莲"}},HAGAKURE:{id:7495,name:"Hagakure",label:{zh:"叶隐"}},IAIJUTSU:{id:7867,name:"Iaijutsu",label:{zh:"居合术"}},TSUBAME_GAESHI:{id:16483,name:"Tsubame-gaeshi",label:{zh:"燕回返"}},SHOHA:{id:16487,name:"Shoha",label:{zh:"照破"}},THIRD_EYE:{id:7498,name:"Third Eye",label:{zh:"心眼"}},TENGENTSU:{id:36962,name:"Tengentsu",label:{zh:"天眼通"}},OGI_NAMIKIRI:{id:25781,name:"Ogi Namikiri",label:{zh:"奥义斩浪"}},KAESHI_NAMIKIRI:{id:25782,name:"Kaeshi: Namikiri",label:{zh:"回返斩浪"}},ZANSHIN:{id:36964,name:"Zanshin",label:{zh:"残心"}},MEDITATE:{id:7497,name:"Meditate",label:{zh:"默想"}},HIGANBANA:{id:7489,name:"Higanbana",label:{zh:"彼岸花"}},TENKA_GOKEN:{id:7488,name:"Tenka Goken",label:{zh:"天下五剑"}},KAESHI_GOKEN:{id:16485,name:"Kaeshi: Goken",label:{zh:"回返五剑"}},TENDO_GOKEN:{id:36965,name:"Tendo Goken",label:{zh:"天道五剑"}},TENDO_KAESHI_GOKEN:{id:36967,name:"Tendo Kaeshi Goken",label:{zh:"天道回返五剑"}},MIDARE_SETSUGEKKA:{id:7487,name:"Midare Setsugekka",label:{zh:"纷乱雪月花"}},KAESHI_SETSUGEKKA:{id:16486,name:"Kaeshi: Setsugekka",label:{zh:"回返雪月花"}},TENDO_SETSUGEKKA:{id:36966,name:"Tendo Setsugekka",label:{zh:"天道雪月花"}},TENDO_KAESHI_SETSUGEKKA:{id:36968,name:"Tendo Kaeshi Setsugekka",label:{zh:"天道回返雪月花"}},THIRD_EYE_POP:{name:"Pop Third Eye",label:{zh:"心眼触发"}},TENGENTSU_POP:{name:"Pop Tengentsu",label:{zh:"天眼通触发"}}}),k1=ae()({cd_YATEN:{name:"cd_Yaten",label:{zh:"CD：夜天"}},cd_GYOTEN:{name:"cd_Gyoten",label:{zh:"CD：晓天"}},cd_SENEI_GUREN:{name:"cd_Senei",label:{zh:"CD: 闪影/红莲"}},cd_SHINTEN:{name:"cd_Shinten",label:{zh:"CD：震天"}},cd_KYUTEN:{name:"cd_Kyuten",label:{zh:"CD：九天"}},cd_MEDITATE:{name:"cd_Meditate"},cd_IKISHOTEN:{name:"cd_Ikishoten"},cd_ZANSHIN:{name:"cd_Zanshin"},cd_HAGAKURE:{name:"cd_Hagakure"},cd_SHOHA:{name:"cd_Shoha"},cd_MEIKYO_SHISUI:{name:"cd_MeikyoShisui"},cd_THIRD_EYE:{name:"cd_ThirdEye"},cd_THIRD_EYE_POP:{name:"cd_ThirdEyePop"}}),x1=ae()({KENKI:{name:"Kenki",label:{zh:"剑气"}},SETSU:{name:"Setsu",label:{zh:"雪闪"}},GETSU:{name:"Getsu",label:{zh:"月闪"}},KA_SEN:{name:"Ka",label:{zh:"花闪"}},MEDITATION:{name:"Meditation",label:{zh:"默想"}}}),IT=ae()({MEIKYO_SHISUI:{name:"Meikyo Shisui",label:{zh:"明镜止水"},maximumStacks:3},FUGETSU:{name:"Fugetsu",label:{zh:"风月"}},FUKA:{name:"Fuka",label:{zh:"风花"}},ZANSHIN_READY:{name:"Zanshin Ready",label:{zh:"残心预备"}},TENDO:{name:"Tendo",label:{zh:"天道"}},OGI_READY:{name:"Ogi Namikiri Ready",label:{zh:"奥义斩浪预备"}},TSUBAME_GAESHI_READY:{name:"Tsubame-gaeshi Ready",label:{zh:"燕回返预备"}},THIRD_EYE:{name:"Third Eye",label:{zh:"心眼"}},TENGENTSU:{name:"Tengentsu",label:{zh:"天眼通"}},TENGENTSUS_FORESIGHT:{name:"Tengentsu's Foresight",label:{zh:"通天眼"}},MEDITATE:{name:"Meditate",label:{zh:"默想"}},ENHANCED_ENPI:{name:"Enhanced Enpi",label:{zh:"燕飞效果提高"}},HIGANBANA_DOT:{name:"HiganbanaDoT",label:{zh:"彼岸花dot"}}}),P1=ae()({SAM_TWO_READY:{name:"SAMTwoReady",label:{zh:"连击2预备"}},SAM_TWO_AOE_READY:{name:"SAMTwoAoeReady",label:{zh:"AOE2预备"}},GEKKO_READY:{name:"GekkoReady",label:{zh:"月光预备"}},KASHA_READY:{name:"KashaReady",label:{zh:"花车预备"}},KAESHI_OGI_READY:{name:"KaeshiOgiReady",label:{zh:"回返斩浪预备"}},KAESHI_TRACKER:{name:"KaeshiTracker",label:{zh:"回返状态"}}}),w1=ae()({ENHANCED_IAIJUTSU:{name:"Enhanced Iaijutsu",level:74},ENHANCED_MEIKYO_SHISUI:{name:"Enhanced Meikyo Shisui",level:76},ENHANCED_FUGETSU_AND_FUKA:{name:"Enhanced Fugetsu and Fuka",level:78},THIRD_EYE_MASTERY:{name:"Third Eye Mastery",level:82},WAY_OF_THE_SAMURAI_II:{name:"Way of the Samurai II",level:84},FUGA_MASTERY:{name:"Fuga Mastery",level:86},ENHANCED_IKISHOTEN:{name:"Enhanced Ikishoten",level:90},HAKAZE_MASTERY:{name:"Hakaze Mastery",level:92},ENHANCED_HISSATSU:{name:"Enhanced Hissatsu",level:94},WAY_OF_THE_SAMURAI_III:{name:"Way of the Samurai III",level:94},ENHANCED_IKISHOTEN_II:{name:"Enhanced Ikishoten II",level:96},ENHANCED_MEIKYO_SHISUI_II:{name:"Enhanced Meikyo Shisui II",level:100}}),G1={...x1,...IT,...P1},B1=ae()({PHYSICK:{id:190,name:"Physick",label:{zh:"医术",ja:"フィジク"}},SUMMON_EOS:{id:17215,name:"Summon Eos",label:{zh:"朝日召唤",ja:"サモン・エオス"}},RESURRECTION:{id:173,name:"Resurrection",label:{zh:"复生",ja:"リザレク"}},WHISPERING_DAWN:{id:803,name:"Whispering Dawn",label:{zh:"仙光的低语",ja:"光の囁き"}},BIO_II:{id:17865,name:"Bio II",label:{zh:"猛毒菌",ja:"バイオラ"}},ADLOQUIUM:{id:185,name:"Adloquium",label:{zh:"鼓舞激励之策",ja:"鼓舞激励の策"}},SUCCOR:{id:186,name:"Succor",label:{zh:"士气高扬之策",ja:"士気高揚の策"}},RUIN_II:{id:17870,name:"Ruin II",label:{zh:"毁坏",ja:"ルインラ"}},FEY_ILLUMINATION:{id:805,name:"Fey Illumination",label:{zh:"异想的幻光",ja:"フェイイルミネーション"}},AETHERFLOW:{id:166,name:"Aetherflow",label:{zh:"以太超流",ja:"エーテルフロー"}},ENERGY_DRAIN:{id:167,name:"Energy Drain",label:{zh:"能量吸收",ja:"エナジードレイン"}},LUSTRATE:{id:189,name:"Lustrate",label:{zh:"生命活性法",ja:"生命活性法"}},ART_OF_WAR:{id:16539,name:"Art of War",label:{zh:"破阵法",ja:"破陣法"}},SACRED_SOIL:{id:188,name:"Sacred Soil",label:{zh:"野战治疗阵",ja:"野戦治療の陣"}},INDOMITABILITY:{id:3583,name:"Indomitability",label:{zh:"不屈不挠之策",ja:"不撓不屈の策"}},DEPLOYMENT_TACTICS:{id:3585,name:"Deployment Tactics",label:{zh:"展开战术",ja:"展開戦術"}},EMERGENCY_TACTICS:{id:3586,name:"Emergency Tactics",label:{zh:"应急战术",ja:"応急戦術"}},DISSIPATION:{id:3587,name:"Dissipation",label:{zh:"转化",ja:"転化"}},EXCOGITATION:{id:7434,name:"Excogitation",label:{zh:"深谋远虑之策",ja:"深謀遠慮の策"}},BROIL_II:{id:7435,name:"Broil II",label:{zh:"魔炎法",ja:"魔炎法"}},CHAIN_STRATAGEM:{id:7436,name:"Chain Stratagem",label:{zh:"连环计",ja:"連環計"}},AETHERPACT:{id:7437,name:"Aetherpact",label:{zh:"以太契约",ja:"エーテルパクト"}},DISSOLVE_UNION:{id:7869,name:"Dissolve Union",label:{zh:"融光解除",ja:"フェイユニオン解除"}},BIOLYSIS:{id:16540,name:"Biolysis",label:{zh:"蛊毒法",ja:"蠱毒法"}},BROIL_III:{id:16541,name:"Broil III",label:{zh:"死炎法",ja:"死炎法"}},RECITATION:{id:16542,name:"Recitation",label:{zh:"秘策",ja:"秘策"}},FEY_BLESSING:{id:16543,name:"Fey Blessing",label:{zh:"异想的祥光",ja:"フェイブレッシング"}},SUMMON_SERAPH:{id:16545,name:"Summon Seraph",label:{zh:"炽天召唤",ja:"サモン・セラフィム"}},CONSOLATION:{id:16546,name:"Consolation",label:{zh:"慰藉",ja:"コンソレイション"}},BROIL_IV:{id:25865,name:"Broil IV",label:{zh:"极炎法",ja:"極炎法"}},ART_OF_WAR_II:{id:25866,name:"Art of War II",label:{zh:"裂阵法",ja:"裂陣法"}},PROTRACTION:{id:25867,name:"Protraction",label:{zh:"生命回生法",ja:"生命回生法"}},EXPEDIENT:{id:25868,name:"Expedient",label:{zh:"疾风怒涛之计",ja:"疾風怒濤の計"}},BANEFUL_IMPACTION:{id:37012,name:"Baneful Impaction",label:{zh:"埋伏之毒",ja:"埋伏の毒"}},CONCITATION:{id:37013,name:"Concitation",label:{zh:"意气轩昂之策",ja:"意気軒昂の策"}},SERAPHISM:{id:37014,name:"Seraphism",label:{zh:"炽天附体",ja:"セラフィズム"}},MANIFESTATION:{id:37015,name:"Manifestation",label:{zh:"显灵之章",ja:"マニフェステーション"}},ACCESSION:{id:37016,name:"Accession",label:{zh:"降临之章",ja:"アクセッション"}},ANGELS_WHISPER:{name:"Angel's Whisper",label:{zh:"天使的低语"}}}),F1=ae()({cd_WHISPERING_DAWN:{name:"cd_WhisperingDawn"},cd_FEY_ILLUMINATION:{name:"cd_FeyIllumination"},cd_AETHERFLOW:{name:"cd_Aetherflow"},cd_ENERGY_DRAIN:{name:"cd_EnergyDrain"},cd_LUSTRATE:{name:"cd_Lustrate"},cd_SACRED_SOIL:{name:"cd_SacredSoil"},cd_INDOMITABILITY:{name:"cd_Indomitability"},cd_DEPLOYMENT_TACTICS:{name:"cd_DeploymentTactics"},cd_EMERGENCY_TACTICS:{name:"cd_EmergencyTactics"},cd_DISSIPATION:{name:"cd_Dissipation"},cd_EXCOGITATION:{name:"cd_Excogitation"},cd_CHAIN_STRATAGEM:{name:"cd_ChainStratagem"},cd_AETHERPACT:{name:"cd_Aetherpact"},cd_DISSOLVE_UNION:{name:"cd_DissolveUnion"},cd_RECITATION:{name:"cd_Recitation"},cd_FEY_BLESSING:{name:"cd_FeyBlessing"},cd_SUMMON_SERAPH:{name:"cd_SummonSeraph"},cd_CONSOLATION:{name:"cd_Consolation"},cd_CONSOLATION_INTERNAL:{name:"cd_ConsolationInternal"},cd_PROTRACTION:{name:"cd_Protraction"},cd_EXPEDIENT:{name:"cd_Expedient"},cd_BANEFUL_IMPACTION:{name:"cd_BanefulImpaction"},cd_SERAPHISM:{name:"cd_Seraphism"}}),z1=ae()({AETHERFLOW:{name:"Aetherflow",maximumCharges:3,label:{zh:"以太超流"}},FAERIE_GAUGE:{name:"Faerie Gauge",maximumStacks:100,label:{zh:"异想以太"}}}),_T=ae()({BIO_II:{name:"Bio II",label:{zh:"猛毒菌"}},CATALYZE:{name:"Catalyze",label:{zh:"激励"}},GALVANIZE:{name:"Galvanize",label:{zh:"鼓舞"}},WHISPERING_DAWN:{name:"Whispering Dawn",label:{zh:"仙光的低语"}},ANGELS_WHISPER:{name:"Angel's Whisper",label:{zh:"天使的低语"}},FEY_ILLUMINATION:{name:"Fey Illumination",label:{zh:"异想的幻光"}},SERAPHIC_ILLUMINATION:{name:"Seraphic Illumination",label:{zh:"炽天的幻光"}},SACRED_SOIL_MIT:{name:"Sacred Soil (Mitigation)",label:{zh:"野战治疗阵[减伤]"},mayNotBeCanceled:!0},SACRED_SOIL_ZONE:{name:"Sacred Soil",label:{zh:"野战治疗阵"},mayBeToggled:!0},EMERGENCY_TACTICS:{name:"Emergency Tactics",label:{zh:"应急战术"}},DISSIPATION:{name:"Dissipation",label:{zh:"转化"},mayNotBeCanceled:!0},EXCOGITATION:{name:"Excogitation",label:{zh:"深谋远虑之策"}},CHAIN_STRATAGEM:{name:"Chain Stratagem",label:{zh:"连环计"}},IMPACT_IMMINENT:{name:"Impact Imminent",label:{zh:"埋伏之毒预备"}},BIOLYSIS:{name:"Biolysis",label:{zh:"蛊毒法"}},RECITATION:{name:"Recitation",label:{zh:"秘策"}},FEY_UNION:{name:"Fey Union",label:{zh:"异想的融光"}},SERAPHIC_VEIL:{name:"Seraphic Veil",label:{zh:"炽天的幕帘"}},PROTRACTION:{name:"Protraction",label:{zh:"生命回生法"}},EXPEDIENCE:{name:"Expedience",label:{zh:"疾风之计"}},DESPERATE_MEASURES:{name:"Desperate Measures",label:{zh:"怒涛之计"}},BANEFUL_IMPACTION:{name:"Baneful Impaction",label:{zh:"埋伏之毒"}},SERAPHISM:{name:"Seraphism",label:{zh:"炽天附体"},mayNotBeCanceled:!0},SERAPHISM_REGEN:{name:"Seraphism (Regen)",label:{zh:"炽天附体[回]"}}}),j1=ae()({SERAPH_SUMMON_TIMER:{name:"Seraph Summon Timer",label:{zh:"炽天的召唤时间"}}}),Y1=ae()({CORRUPTION_MASTERY_II:{name:"Corruption Mastery II",level:72},BROIL_MASTERY_III:{name:"Broil Mastery III",level:72},ENHANCED_SACRED_SOIL:{name:"Enhanced Sacred Soil",level:78},BROIL_MASTERY_IV:{name:"Broil Mastery IV",level:82},ART_OF_WAR_MASTERY:{name:"Art of War Mastery",level:82},ENHANCED_DEPLOYMENT_TACTICS:{name:"Enhanced Deployment Tactics",level:88},ENHANCED_CHAIN_STRATAGEM:{name:"Enhanced Chain Stratagem",level:92},TACTICIANS_MASTERY:{name:"Tactician's Mastery",level:94},SUCCOR_MASTERY:{name:"Succor Mastery",level:96},ENHANCED_RECITATION:{name:"Enhanced Recitation",level:98}}),K1={...z1,..._T,...j1},V1=ae()({DIAGNOSIS:{id:24284,name:"Diagnosis",label:{zh:"诊断"}},EUKRASIAN_DIAGNOSIS:{id:24291,name:"Eukrasian Diagnosis",label:{zh:"均衡诊断"}},EUKRASIAN_DIAGNOSIS_POP:{name:"Pop Eukrasian Diagnosis",label:{zh:"均衡诊断破盾"}},HAIMA:{id:24305,name:"Haima",label:{zh:"输血"}},HAIMA_POP:{name:"Pop Haima",label:{zh:"输血破盾"}},EGEIRO:{id:24287,name:"Egeiro",label:{zh:"复苏"}},PROGNOSIS:{id:24286,name:"Prognosis",label:{zh:"预后"}},EUKRASIAN_PROGNOSIS:{id:24292,name:"Eukrasian Prognosis",label:{zh:"均衡预后"}},EUKRASIAN_PROGNOSIS_II:{id:37034,name:"Eukrasian Prognosis II",label:{zh:"均衡预后 II"}},EUKRASIAN_PROGNOSIS_POP:{name:"Pop Eukrasian Prognosis",label:{zh:"均衡预后破盾"}},EUKRASIAN_PROGNOSIS_II_POP:{name:"Pop Eukrasian Prognosis II",label:{zh:"均衡预后 II 破盾"}},PANHAIMA:{id:24311,name:"Panhaima",label:{zh:"泛输血"}},PANHAIMA_POP:{name:"Pop Panhaima",label:{zh:"泛输血破盾"}},PHYSIS_II:{id:24302,name:"Physis II",label:{zh:"自生 II"}},HOLOS:{id:24310,name:"Holos",label:{zh:"整体论"}},PEPSIS:{id:24301,name:"Pepsis",label:{zh:"消化"}},KARDIA:{id:24285,name:"Kardia",label:{zh:"心关"}},EUKRASIA:{id:24290,name:"Eukrasia",label:{zh:"均衡"}},SOTERIA:{id:24294,name:"Soteria",label:{zh:"拯救"}},ICARUS:{id:24295,name:"Icarus",label:{zh:"神翼"}},ZOE:{id:24300,name:"Zoe",label:{zh:"活化"}},KRASIS:{id:24317,name:"Krasis",label:{zh:"混合"}},PHILOSOPHIA:{id:37035,name:"Philosophia",label:{zh:"智慧之爱"}},RHIZOMATA:{id:24309,name:"Rhizomata",label:{zh:"根素"}},DRUOCHOLE:{id:24296,name:"Druochole",label:{zh:"灵橡清汁"}},IXOCHOLE:{id:24299,name:"Ixochole",label:{zh:"寄生清汁"}},KERACHOLE:{id:24298,name:"Kerachole",label:{zh:"坚角清汁"}},TAUROCHOLE:{id:24303,name:"Taurochole",label:{zh:"白牛清汁"}},DOSIS:{id:24283,name:"Dosis",label:{zh:"注药"}},DOSIS_II:{id:24306,name:"Dosis II",label:{zh:"注药 II"}},DOSIS_III:{id:24312,name:"Dosis III",label:{zh:"注药 III"}},EUKRASIAN_DOSIS:{id:24293,name:"Eukrasian Dosis",label:{zh:"均衡注药"}},EUKRASIAN_DOSIS_II:{id:24308,name:"Eukrasian Dosis II",label:{zh:"均衡注药 II"}},EUKRASIAN_DOSIS_III:{id:24314,name:"Eukrasian Dosis III",label:{zh:"均衡注药 III"}},TOXIKON:{id:24304,name:"Toxikon",label:{zh:"箭毒"}},TOXIKON_II:{id:24316,name:"Toxikon II",label:{zh:"箭毒 II"}},DYSKRASIA:{id:24297,name:"Dyskrasia",label:{zh:"失衡"}},DYSKRASIA_II:{id:24315,name:"Dyskrasia II",label:{zh:"失衡 II"}},EUKRASIAN_DYSKRASIA:{id:37032,name:"Eukrasian Dyskrasia",label:{zh:"均衡失衡"}},PHLEGMA:{id:24289,name:"Phlegma",label:{zh:"发炎"}},PHLEGMA_II:{id:24307,name:"Phlegma II",label:{zh:"发炎 II"}},PHLEGMA_III:{id:24313,name:"Phlegma III",label:{zh:"发炎 III"}},PSYCHE:{id:37033,name:"Psyche",label:{zh:"心神风息"}},PNEUMA:{id:24318,name:"Pneuma",label:{zh:"魂灵风息"}}}),W1=ae()({cd_HAIMA:{name:"cd_Haima"},cd_PANHAIMA:{name:"cd_PANHAIMA"},cd_PHYSIS:{name:"cd_PHYSIS",label:{zh:"CD：自生"}},cd_HOLOS:{name:"cd_HOLOS"},cd_PEPSIS:{name:"cd_PEPSIS"},cd_KARDIA:{name:"cd_KARDIA"},cd_EUKRASIA:{name:"cd_EUKRASIA"},cd_SOTERIA:{name:"cd_SOTERIA"},cd_ICARUS:{name:"cd_ICARUS"},cd_ZOE:{name:"cd_ZOE"},cd_KRASIS:{name:"cd_KRASIS"},cd_PHILOSOPHIA:{name:"cd_PHILOSOPHIA"},cd_RHIZOMATA:{name:"cd_RHIZOMATA"},cd_DRUOCHOLE:{name:"cd_DRUOCHOLE"},cd_IXOCHOLE:{name:"cd_IXOCHOLE"},cd_KERACHOLE:{name:"cd_KERACHOLE"},cd_TAUROCHOLE:{name:"cd_TAUROCHOLE"},cd_PHLEGMA:{name:"cd_PHLEGMA"},cd_PSYCHE:{name:"cd_PSYCHE"},cd_PNEUMA:{name:"cd_PNEUMA"},cd_DIAGNOSIS_POP:{name:"cd_DIAGNOSIS_POP",label:{zh:"CD：均衡诊断破盾"}},cd_PROGNOSIS_POP:{name:"cd_PROGNOSIS_POP",label:{zh:"CD：均衡预后破盾"}},cd_HAIMA_POP:{name:"cd_HAIMA_POP"},cd_PANHAIMA_POP:{name:"cd_PANHAIMA_POP"}}),X1=ae()({ADDERSGALL:{name:"Addersgall",label:{zh:"蛇胆"}},ADDERSTING:{name:"Addersting",label:{zh:"蛇刺"}}}),MC=ae()({EUKRASIA:{id:2606,name:"Eukrasia",label:{zh:"均衡"}},EUKRASIAN_DIAGNOSIS:{id:2607,name:"Eukrasian Diagnosis",label:{zh:"均衡诊断"}},DIFFERENTIAL_DIAGNOSIS:{id:2608,name:"Differential Diagnosis",label:{zh:"齐衡诊断"}},HAIMA:{id:2612,name:"Haima",label:{zh:"输血"},mayNotBeCanceled:!0},HAIMATINON:{id:2642,name:"Haimatinon",label:{zh:"血印"},maximumStacks:5,mayNotBeCanceled:!0},EUKRASIAN_PROGNOSIS:{id:2609,name:"Eukrasian Prognosis",label:{zh:"均衡预后"}},PANHAIMA:{id:2613,name:"Panhaima",label:{zh:"泛输血"},mayNotBeCanceled:!0},PANHAIMATINON:{id:2643,name:"Panhaimatinon",label:{zh:"泛血印"},maximumStacks:5,mayNotBeCanceled:!0},PHYSIS_II:{id:2620,name:"Physis II",label:{zh:"自生 II"}},AUTOPHYSIS:{id:2621,name:"Autophysis",label:{zh:"催进"}},KARDIA:{id:2604,name:"Kardia",label:{zh:"心关"}},KARDION:{id:2605,name:"Kardion",label:{zh:"关心"}},PHILOSOPHIA:{id:3898,name:"Philosophia",label:{zh:"智慧之爱"}},EUDAIMONIA:{id:3899,name:"Eudaimonia",label:{zh:"幸福"}},SOTERIA:{id:2610,name:"Soteria",label:{zh:"拯救"},maximumStacks:4},ZOE:{id:2611,name:"Zoe",label:{zh:"活化"}},KRASIS:{id:2622,name:"Krasis",label:{zh:"混合"}},KERACHOLE:{id:2618,name:"Kerachole",label:{zh:"坚角清汁"}},KERAKEIA:{id:2938,name:"Kerakeia",label:{zh:"坚角清汁[回]"}},TAUROCHOLE:{id:2619,name:"Taurochole",label:{zh:"白牛清汁"}},EUKRASIAN_DOSIS:{id:2614,name:"Eukrasian Dosis",label:{zh:"均衡注药"}},EUKRASIAN_DOSIS_II:{id:2615,name:"Eukrasian Dosis II",label:{zh:"均衡注药 II"}},EUKRASIAN_DOSIS_III:{id:2616,name:"Eukrasian Dosis III",label:{zh:"均衡注药 III"}},EUKRASIAN_DYSKRASIA:{id:3897,name:"Eukrasian Dyskrasia",label:{zh:"均衡失衡"}},PNEUMA:{id:2623,name:"Pneuma",label:{zh:"魂灵风息"}},HOLOS:{id:3003,name:"Holos",label:{zh:"整体论"}},HOLOSAKOS:{id:3365,name:"Holosakos",label:{zh:"整体盾"}}}),q1=ae()({PEPSIS:{name:"Pepsis",label:{zh:"消化"}}}),Z1=ae()({OFFENSIVE_MAGIC_MASTERY:{name:"Offensive Magic Mastery",level:72},OFFENSIVE_MAGIC_MASTERY_II:{name:"Offensive Magic Mastery II",level:82},ENHANCED_KERACHOLE:{name:"Enhanced Kerachole",level:78},ENHANCED_ZOE:{name:"Enhanced Zoe",level:88},ENHANCED_SOTERIA:{name:"Enhanced Soteria",level:94},EUKRASIAN_PROGNOSIS_MASTERY:{name:"Eukrasian Prognosis Mastery",level:96},ENHANCED_PHYSIS_II:{name:"Enhanced Physis II",level:98}}),Q1={...X1,...MC,...q1},$1=ae()({SUMMON_CARBUNCLE:{id:25798,name:"Summon Carbuncle",label:{zh:"宝石兽召唤"}},RADIANT_AEGIS:{id:25799,name:"Radiant Aegis",label:{zh:"守护之光"}},PHYSICK:{id:16230,name:"Physick",label:{zh:"医术"}},GEMSHINE:{id:25883,name:"Gemshine",label:{zh:"宝石耀"}},FESTER:{id:181,name:"Fester",label:{zh:"溃烂爆发"}},ENERGY_DRAIN:{id:16508,name:"Energy Drain",label:{zh:"能量吸收"}},RESURRECTION:{id:173,name:"Resurrection",label:{zh:"复生"}},OUTBURST:{id:16511,name:"Outburst",label:{zh:"迸裂"}},PRECIOUS_BRILLIANCE:{id:25884,name:"Precious Brilliance",label:{zh:"宝石辉"}},RUBY_OUTBURST:{id:25814,name:"Ruby Outburst",label:{zh:"红宝石迸裂"}},TOPAZ_OUTBURST:{id:25815,name:"Topaz Outburst",label:{zh:"黄宝石迸裂"}},EMERALD_OUTBURST:{id:25816,name:"Emerald Outburst",label:{zh:"绿宝石迸裂"}},SUMMON_IFRIT:{id:25805,name:"Summon Ifrit",label:{zh:"火神召唤"}},PAINFLARE:{id:3578,name:"Painflare",label:{zh:"痛苦核爆"}},SUMMON_TITAN:{id:25806,name:"Summon Titan",label:{zh:"土神召唤"}},SUMMON_GARUDA:{id:25807,name:"Summon Garuda",label:{zh:"风神召唤"}},ENERGY_SIPHON:{id:16510,name:"Energy Siphon",label:{zh:"能量抽取"}},RUBY_RUIN_III:{id:25817,name:"Ruby Ruin III",label:{zh:"红宝石毁荡"}},TOPAZ_RUIN_III:{id:25818,name:"Topaz Ruin III",label:{zh:"黄宝石毁荡"}},EMERALD_RUIN_III:{id:25819,name:"Emerald Ruin III",label:{zh:"绿宝石毁荡"}},RUIN_III:{id:3579,name:"Ruin III",label:{zh:"毁荡"}},ASTRAL_IMPULSE:{id:25820,name:"Astral Impulse",label:{zh:"星极脉冲"}},ASTRAL_FLARE:{id:25821,name:"Astral Flare",label:{zh:"星极核爆"}},ASTRAL_FLOW:{id:25822,name:"Astral Flow",label:{zh:"星极超流"}},DEATHFLARE:{id:3582,name:"Deathflare",label:{zh:"死星核爆"}},RUIN_IV:{id:7426,name:"Ruin IV",label:{zh:"毁绝"}},SEARING_LIGHT:{id:25801,name:"Searing Light",label:{zh:"灼热之光"}},SUMMON_BAHAMUT:{id:7427,name:"Summon Bahamut",label:{zh:"龙神召唤"}},ENKINDLE_BAHAMUT:{id:7429,name:"Enkindle Bahamut",label:{zh:"龙神迸发"}},RUBY_RITE:{id:25823,name:"Ruby Rite",label:{zh:"红宝石之仪"}},TOPAZ_RITE:{id:25824,name:"Topaz Rite",label:{zh:"黄宝石之仪"}},EMERALD_RITE:{id:25825,name:"Emerald Rite",label:{zh:"绿宝石之仪"}},TRI_DISASTER:{id:25826,name:"Tri-disaster",label:{zh:"三重灾祸"}},RUBY_DISASTER:{id:25827,name:"Ruby Disaster",label:{zh:"红宝石灾祸"}},TOPAZ_DISASTER:{id:25828,name:"Topaz Disaster",label:{zh:"黄宝石灾祸"}},EMERALD_DISASTER:{id:25829,name:"Emerald Disaster",label:{zh:"绿宝石灾祸"}},SUMMON_PHOENIX:{id:25831,name:"Summon Phoenix",label:{zh:"不死鸟召唤"}},FOUNTAIN_OF_FIRE:{id:16514,name:"Fountain of Fire",label:{zh:"灵泉之炎"}},BRAND_OF_PURGATORY:{id:16515,name:"Brand of Purgatory",label:{zh:"炼狱之炎"}},REKINDLE:{id:25830,name:"Rekindle",label:{zh:"苏生之炎"}},ENKINDLE_PHOENIX:{id:16516,name:"Enkindle Phoenix",label:{zh:"不死鸟迸发"}},RUBY_CATASTROPHE:{id:25832,name:"Ruby Catastrophe",label:{zh:"红宝石灾变"}},TOPAZ_CATASTROPHE:{id:25833,name:"Topaz Catastrophe",label:{zh:"黄宝石灾变"}},EMERALD_CATASTROPHE:{id:25834,name:"Emerald Catastrophe",label:{zh:"绿宝石灾变"}},CRIMSON_CYCLONE:{id:25835,name:"Crimson Cyclone",label:{zh:"深红旋风"}},CRIMSON_STRIKE:{id:25885,name:"Crimson Strike",label:{zh:"深红强袭"}},MOUNTAIN_BUSTER:{id:25836,name:"Mountain Buster",label:{zh:"山崩"}},SLIPSTREAM:{id:25837,name:"Slipstream",label:{zh:"螺旋气流"}},SUMMON_IFRIT_II:{id:25838,name:"Summon Ifrit II",label:{zh:"火神召唤 II"}},SUMMON_TITAN_II:{id:25839,name:"Summon Titan II",label:{zh:"土神召唤 II"}},SUMMON_GARUDA_II:{id:25840,name:"Summon Garuda II",label:{zh:"风神召唤 II"}},NECROTIZE:{id:36990,name:"Necrotize",label:{zh:"坏死爆发"}},SEARING_FLASH:{id:36991,name:"Searing Flash",label:{zh:"灼热之闪"}},SUMMON_SOLAR_BAHAMUT:{id:36992,name:"Summon Solar Bahamut",label:{zh:"烈日龙神召唤"}},UMBRAL_IMPULSE:{id:36994,name:"Umbral Impulse",label:{zh:"灵极脉冲"}},UMBRAL_FLARE:{id:36995,name:"Umbral Flare",label:{zh:"灵极核爆"}},SUNFLARE:{id:36996,name:"Sunflare",label:{zh:"烈日核爆"}},ENKINDLE_SOLAR_BAHAMUT:{id:36998,name:"Enkindle Solar Bahamut",label:{zh:"烈日龙神迸发"}},LUX_SOLARIS:{id:36997,name:"Lux Solaris",label:{zh:"日光普照"}},INFERNO:{id:25852,name:"Inferno",label:{zh:"地狱之火炎"}},EARTHEN_FURY:{id:25853,name:"Earthen Fury",label:{zh:"大地之怒"}},AERIAL_BLAST:{id:25854,name:"Aerial Blast",label:{zh:"大气爆发"}},WYRMWAVE:{id:7428,name:"Wyrmwave",label:{zh:"真龙波"}},SCARLET_FLAME:{id:16519,name:"Scarlet Flame",label:{zh:"赤焰"}},LUXWAVE:{id:36993,name:"Luxwave",label:{zh:"光芒"}},AKH_MORN:{id:7449,name:"Akh Morn",label:{zh:"死亡轮回"}},REVELATION:{id:16518,name:"Revelation",label:{zh:"天启"}},EXODUS:{id:36999,name:"Exodus",label:{zh:"众生离绝"}}}),J1=ae()({cd_RADIANT_AEGIS:{name:"cd_RADIANT_AEGIS"},cd_ASTRAL_FLOW:{name:"cd_ASTRAL_FLOW"},cd_ENKINDLE:{name:"cd_ENKINDLE",label:{zh:"CD：龙神/烈日龙神/不死鸟迸发"}},cd_DEMI_SUMMON:{name:"cd_DEMI_SUMMON",label:{zh:"CD：亚灵神召唤"}},cd_ENERGY_DRAIN:{name:"cd_ENERGY_DRAIN"},cd_AETHERFLOW:{name:"cd_AETHERFLOW",label:{zh:"CD：以太超流"}},cd_SEARING_LIGHT:{name:"cd_SEARING_LIGHT"},cd_SEARING_FLASH:{name:"cd_SEARING_FLASH"},cd_LUX_SOLARIS:{name:"cd_LUX_SOLARIS"},cd_MOUNTAIN_BUSTER:{name:"cd_MOUNTAIN_BUSTER"},cd_SUMMON_LOCKOUT:{name:"cd_SUMMON_LOCKOUT"}}),eH=ae()({AETHERFLOW:{name:"Aetherflow",label:{zh:"以太超流"}},RUBY_ARCANUM:{name:"Ruby Arcanum",label:{zh:"红宝石的奥秘"}},TOPAZ_ARCANUM:{name:"Topaz Arcanum",label:{zh:"黄宝石的奥秘"}},EMERALD_ARCANUM:{name:"Emerald Arcanum",label:{zh:"绿宝石的奥秘"}},FIRE_ATTUNEMENT:{name:"Fire Attunement",label:{zh:"火属性以太"}},EARTH_ATTUNEMENT:{name:"Earth Attunement",label:{zh:"土属性以太"}},WIND_ATTUNEMENT:{name:"Wind Attunement",label:{zh:"风属性以太"}},ACTIVE_DEMI:{name:"Active Demi",label:{zh:"同调量谱"}}}),gT=ae()({AETHERFLOW:{name:"Aetherflow",maximumStacks:2,label:{zh:"以太超流"}},CRIMSON_STRIKE_READY:{name:"Crimson Strike Ready",label:{zh:"深红强袭预备"}},EVERLASTING_FLIGHT:{name:"Everlasting Flight",label:{zh:"不死鸟之翼"}},FURTHER_RUIN:{name:"Further Ruin",label:{zh:"毁绝预备"}},GARUDAS_FAVOR:{name:"Garuda's Favor",label:{zh:"螺旋气流预备"}},IFRITS_FAVOR:{name:"Ifrit's Favor",label:{zh:"深红旋风预备"}},RADIANT_AEGIS:{name:"Radiant Aegis",label:{zh:"守护之光"}},REFULGENT_LUX:{name:"Refulgent Lux",label:{zh:"日光普照预备"}},REKINDLE:{name:"Rekindle",label:{zh:"苏生之炎"}},RUBYS_GLIMMER:{name:"Ruby's Glimmer",label:{zh:"灼热之闪预备"}},SEARING_LIGHT:{name:"Searing Light",label:{zh:"灼热之光"}},SLIPSTREAM:{name:"Slipstream",mayBeToggled:!0,label:{zh:"螺旋气流"}},TITANS_FAVOR:{name:"Titan's Favor",label:{zh:"山崩预备"}},UNDYING_FLAME:{name:"Undying Flame",label:{zh:"苏生之炎"}}}),tH=ae()({NEXT_DEMI_CYCLE:{name:"Next Demi Cycle",label:{zh:"亚灵神循环"}},DEMI_AUTO:{name:"Demi Auto-attack",label:{zh:"亚灵神自动攻击"}}}),aH=ae()({RUIN_MASTERY_III:{name:"Ruin Mastery III",level:72},OUTBURST_MASTERY:{name:"Outburst Mastery",level:74},ENHANCED_SUMMON_BAHAMUT:{name:"Enhanced Summon Bahamut",level:80},OUTBURST_MASTERY_II:{name:"Outburst Mastery II",level:82},RUIN_MASTERY_IV:{name:"Ruin Mastery IV",level:84},ELEMENTAL_MASTERY:{name:"Elemental Mastery",level:86},ENHANCED_RADIANT_AEGIS:{name:"Enhanced Radiant Aegis",level:88},ENKINDLE_II:{name:"Enkindle II",level:90},ENHANCED_FESTER:{name:"Enhanced Fester",level:92},ARCANE_MASTERY:{name:"Arcane Mastery",level:94},ENHANCED_SEARING_LIGHT:{name:"Enhanced Searing Light",level:96},ENHANCED_SUMMON_BAHAMUT_II:{name:"Enhanced Summon Bahamut II",level:100}}),nH={...eH,...gT,...tH},iH=ae()({STEEL_FANGS:{id:34606,name:"Steel Fangs",label:{zh:"咬噬尖齿",ja:"壱の牙【咬創】"}},HUNTERS_STING:{id:34608,name:"Hunter's Sting",label:{zh:"猛袭利齿",ja:"弐の牙【猛襲】"}},REAVING_FANGS:{id:34607,name:"Reaving Fangs",label:{zh:"穿裂尖齿",ja:"壱の牙【穿裂】"}},WRITHING_SNAP:{id:34632,name:"Writhing Snap",label:{zh:"飞蛇之牙",ja:"飛蛇の牙"}},SWIFTSKINS_STING:{id:34609,name:"Swiftskin's Sting",label:{zh:"疾速利齿",ja:"弐の牙【疾速】"}},STEEL_MAW:{id:34614,name:"Steel Maw",label:{zh:"咬噬尖牙",ja:"壱の大牙【咬創】"}},FLANKSTING_STRIKE:{id:34610,name:"Flanksting Strike",label:{zh:"侧击獠齿",ja:"参の牙【側撃】"}},FLANKSBANE_FANG:{id:34611,name:"Flanksbane Fang",label:{zh:"侧裂獠齿",ja:"参の牙【側裂】"}},HINDSTING_STRIKE:{id:34612,name:"Hindsting Strike",label:{zh:"背击獠齿",ja:"参の牙【背撃】"}},HINDSBANE_FANG:{id:34613,name:"Hindsbane Fang",label:{zh:"背裂獠齿",ja:"参の牙【背裂】"}},REAVING_MAW:{id:34615,name:"Reaving Maw",label:{zh:"穿裂尖牙",ja:"壱の大牙【穿裂】"}},SLITHER:{id:34646,name:"Slither",label:{zh:"蛇行",ja:"蛇行"}},HUNTERS_BITE:{id:34616,name:"Hunter's Bite",label:{zh:"猛袭利牙",ja:"弐の大牙【猛襲】"}},SWIFTSKINS_BITE:{id:34617,name:"Swiftskin's Bite",label:{zh:"疾速利牙",ja:"弐の大牙【疾速】"}},JAGGED_MAW:{id:34618,name:"Jagged Maw",label:{zh:"乱击獠牙",ja:"参の大牙【乱撃】"}},BLOODIED_MAW:{id:34619,name:"Bloodied Maw",label:{zh:"乱裂獠牙",ja:"参の大牙【乱裂】"}},SERPENTS_TAIL:{id:35920,name:"Serpent's Tail",label:{zh:"蛇尾术",ja:"蛇尾術"}},DEATH_RATTLE:{id:34634,name:"Death Rattle",label:{zh:"蛇尾击",ja:"蛇尾撃"}},LAST_LASH:{id:34635,name:"Last Lash",label:{zh:"蛇尾闪",ja:"蛇尾閃"}},VICEWINDER:{id:34620,name:"Vicewinder",label:{zh:"强碎灵蛇",ja:"壱の蛇【強砕】"}},HUNTERS_COIL:{id:34621,name:"Hunter's Coil",label:{zh:"猛袭盘蛇",ja:"弐の蛇【猛襲】"}},SWIFTSKINS_COIL:{id:34622,name:"Swiftskin's Coil",label:{zh:"疾速盘蛇",ja:"弐の蛇【疾速】"}},VICEPIT:{id:34623,name:"Vicepit",label:{zh:"强碎灵蝰",ja:"壱の大蛇【強砕】"}},HUNTERS_DEN:{id:34624,name:"Hunter's Den",label:{zh:"猛袭盘蝰",ja:"弐の大蛇【猛襲】"}},SWIFTSKINS_DEN:{id:34625,name:"Swiftskin's Den",label:{zh:"疾速盘蝰",ja:"弐の大蛇【疾速】"}},TWINFANG:{id:35921,name:"Twinfang",label:{zh:"双牙连术",ja:"双牙連術"}},TWINBLOOD:{id:35922,name:"Twinblood",label:{zh:"双牙乱术",ja:"双牙乱術"}},TWINFANG_BITE:{id:34636,name:"Twinfang Bite",label:{zh:"双牙连击",ja:"双牙連撃"}},TWINBLOOD_BITE:{id:34637,name:"Twinblood Bite",label:{zh:"双牙乱击",ja:"双牙乱撃"}},TWINFANG_THRESH:{id:34638,name:"Twinfang Thresh",label:{zh:"双牙连闪",ja:"双牙連閃"}},TWINBLOOD_THRESH:{id:34639,name:"Twinblood Thresh",label:{zh:"双牙乱闪",ja:"双牙乱閃"}},UNCOILED_FURY:{id:34633,name:"Uncoiled Fury",label:{zh:"飞蛇之尾",ja:"飛蛇の尾"}},SERPENTS_IRE:{id:34647,name:"Serpent's Ire",label:{zh:"蛇灵气",ja:"蛇の霊気"}},REAWAKEN:{id:34626,name:"Reawaken",label:{zh:"祖灵降临",ja:"祖霊降ろし"}},FIRST_GENERATION:{id:34627,name:"First Generation",label:{zh:"祖灵之牙一式",ja:"祖霊の牙【壱】"}},SECOND_GENERATION:{id:34628,name:"Second Generation",label:{zh:"祖灵之牙二式",ja:"祖霊の牙【弐】"}},THIRD_GENERATION:{id:34629,name:"Third Generation",label:{zh:"祖灵之牙三式",ja:"祖霊の牙【参】"}},FOURTH_GENERATION:{id:34630,name:"Fourth Generation",label:{zh:"祖灵之牙四式",ja:"祖霊の牙【肆】"}},UNCOILED_TWINFANG:{id:34644,name:"Uncoiled Twinfang",label:{zh:"飞蛇连尾击",ja:"飛蛇連尾撃"}},UNCOILED_TWINBLOOD:{id:34645,name:"Uncoiled Twinblood",label:{zh:"飞蛇乱尾击",ja:"飛蛇乱尾撃"}},OUROBOROS:{id:34631,name:"Ouroboros",label:{zh:"祖灵大蛇牙",ja:"祖霊の大蛇牙"}},FIRST_LEGACY:{id:34640,name:"First Legacy",label:{zh:"祖灵之蛇一式",ja:"祖霊の蛇【壱】"}},SECOND_LEGACY:{id:34641,name:"Second Legacy",label:{zh:"祖灵之蛇二式",ja:"祖霊の蛇【弐】"}},THIRD_LEGACY:{id:34642,name:"Third Legacy",label:{zh:"祖灵之蛇三式",ja:"祖霊の蛇【参】"}},FOURTH_LEGACY:{id:34643,name:"Fourth Legacy",label:{zh:"祖灵之蛇四式",ja:"祖霊の蛇【肆】"}}}),oH=ae()({cd_SERPENTS_IRE:{name:"cd_SerpentsIre"},cd_VICEWINDER:{name:"cd_Vicewinder"},cd_SLITHER:{name:"cd_Slither"},cd_SERPENTS_TAIL:{name:"cd_SerpentsTail"},cd_TWINFANG:{name:"cd_Twinfang"},cd_TWINBLOOD:{name:"cd_Twinblood"}}),lH=ae()({RATTLING_COIL:{name:"Rattling Coil",label:{zh:"飞蛇之魂"}},SERPENT_OFFERINGS:{name:"Serpent Offerings",label:{zh:"灵力"}},ANGUINE_TRIBUTE:{name:"Anguine Tribute",label:{zh:"祖灵力"}}}),NT=ae()({HUNTERS_INSTINCT:{name:"Hunter's Instinct",label:{zh:"猛袭"}},SWIFTSCALED:{name:"Swiftscaled",label:{zh:"疾速"}},HONED_STEEL:{name:"Honed Steel",label:{zh:"咬噬锐牙"}},HONED_REAVERS:{name:"Honed Reavers",label:{zh:"穿裂锐牙"}},FLANKSTUNG_VENOM:{name:"Flankstung Venom",label:{zh:"侧击锐牙"}},HINDSTUNG_VENOM:{name:"Hindstung Venom",label:{zh:"背击锐牙"}},FLANKSBANE_VENOM:{name:"Flanksbane Venom",label:{zh:"侧裂锐牙"}},HINDSBANE_VENOM:{name:"Hindsbane Venom",label:{zh:"背裂锐牙"}},GRIMSKINS_VENOM:{name:"Grimskin's Venom",label:{zh:"乱裂锐牙"}},GRIMHUNTERS_VENOM:{name:"Grimhunter's Venom",label:{zh:"乱击锐牙"}},HUNTERS_VENOM:{name:"Hunter's Venom",label:{zh:"飞蛇之魂"}},SWIFTSKINS_VENOM:{name:"Swiftskin's Venom",label:{zh:"乱击双锐牙"}},POISED_FOR_TWINFANG:{name:"Poised for Twinfang",label:{zh:"连尾锐尾"}},POISED_FOR_TWINBLOOD:{name:"Poised for Twinblood",label:{zh:"乱尾锐尾"}},FELLHUNTERS_VENOM:{name:"Fellhunter's Venom",label:{zh:"连闪双锐牙"}},FELLSKINS_VENOM:{name:"Fellskin's Venom",label:{zh:"乱闪双锐牙"}},READY_TO_REAWAKEN:{name:"Ready to Reawaken",label:{zh:"祖灵降临预备"}},REAWAKENED:{name:"Reawakened",label:{zh:"祖灵降临"},mayNotBeCanceled:!0}}),sH=ae()({VPR_COMBO:{name:"VPR Combo"},DEATH_RATTLE_READY:{name:"Death Rattle Ready"},VPR_AOE_COMBO:{name:"VPR AoE Combo"},LAST_LASH_READY:{name:"Last Lash Ready"},HUNTERS_COIL_READY:{name:"Hunter's Coil Ready"},SWIFTSKINS_COIL_READY:{name:"Swiftskin's Coil Ready"},COIL_OGCD_READY:{name:"Coil oGCD Ready"},HUNTERS_DEN_READY:{name:"Hunter's Den Ready"},SWIFTSKINS_DEN_READY:{name:"Swiftskin's Den Ready"},DEN_OGCD_READY:{name:"Den oGCD Ready"},UNCOILED_OGCD_READY:{name:"Uncoiled oGCD Ready"},REAWAKEN_COMBO:{name:"Reawaken Combo"},LEGACY_READY:{name:"Legacy Ready"}}),rH=ae()({MELEE_MASTERY_VPR:{name:"Melee Mastery VPR",level:74},VIPERS_BITE:{name:"Viper's Bite",level:75},VIPERS_THRESH:{name:"Viper's Thresh",level:80},VIPERS_RATTLE:{name:"Viper's Rattle",level:82},ENHANCED_SLITHER:{name:"Enhanced Slither",level:84},MELEE_MASTERY_II_VPR:{name:"Melee Mastery II VPR",level:84},ENHANCED_VIPERS_RATTLE:{name:"Enhanced Viper's Rattle",level:88},SERPENTS_LINEAGE:{name:"Serpent's Lineage",level:90},UNCOILED_FANGS:{name:"Uncoiled Fangs",level:92},ENHANCED_SERPENTS_LINEAGE:{name:"Enhanced Serpent's Lineage",level:96},SERPENTS_LEGACY:{name:"Serpent's Legacy",level:100}}),cH={...lH,...NT,...sH},uH=ae()({HEAVY_SWING:{id:31,name:"Heavy Swing",label:{zh:"重劈"}},MAIM:{id:37,name:"Maim",label:{zh:"凶残裂"}},STORMS_PATH:{id:42,name:"Storms Path",label:{zh:"暴风斩"}},STORMS_EYE:{id:45,name:"Storms Eye",label:{zh:"暴风碎"}},FELL_CLEAVE:{id:3549,name:"Fell Cleave",label:{zh:"裂石飞环"}},UPHEAVAL:{id:7387,name:"Upheaval",label:{zh:"动乱"}},ONSLAUGHT:{id:7386,name:"Onslaught",label:{zh:"猛攻"}},TOMAHAWK:{id:46,name:"Tomahawk",label:{zh:"飞斧"}},OVERPOWER:{id:41,name:"Overpower",label:{zh:"超压斧"}},MYTHRIL_TEMPEST:{id:16462,name:"Mythril Tempest",label:{zh:"秘银暴风"}},DECIMATE:{id:3550,name:"Decimate",label:{zh:"地毁人亡"}},OROGENY:{id:25752,name:"Orogeny",label:{zh:"群山隆起"}},INNER_RELEASE:{id:7389,name:"Inner Release",label:{zh:"原初的解放"}},PRIMAL_WRATH:{id:36924,name:"Primal Wrath",label:{zh:"原初的怒震"}},PRIMAL_REND:{id:25753,name:"Primal Rend",label:{zh:"蛮荒崩裂"}},PRIMAL_RUINATION:{id:36925,name:"Primal Ruination",label:{zh:"尽毁"}},INFURIATE:{id:52,name:"Infuriate",label:{zh:"战嚎"}},INNER_CHAOS:{id:16465,name:"Inner Chaos",label:{zh:"狂魂"}},CHAOTIC_CYCLONE:{id:16463,name:"Chaotic Cyclone",label:{zh:"混沌旋风"}},THRILL_OF_BATTLE:{id:40,name:"Thrill of Battle",label:{zh:"战栗"}},EQUILIBRIUM:{id:3552,name:"Equilibrium",label:{zh:"泰然自若"}},SHAKE_IT_OFF:{id:7388,name:"Shake It Off",label:{zh:"摆脱"}},RAW_INTUITION:{id:3551,name:"Raw Intuition",label:{zh:"原初的直觉"}},NASCENT_FLASH:{id:16464,name:"Nascent Flash",label:{zh:"原初的勇猛"}},BLOODWHETTING:{id:25751,name:"Bloodwhetting",label:{zh:"原初的血气"}},VENGEANCE:{id:44,name:"Vengeance",label:{zh:"复仇"}},DAMNATION:{id:36923,name:"Damnation",label:{zh:"戮罪"}},HOLMGANG:{id:43,name:"Holmgang",label:{zh:"死斗"}},DEFIANCE:{id:48,name:"Defiance",label:{zh:"守护"}},RELEASE_DEFIANCE:{id:32066,name:"Release Defiance",label:{zh:"取消守护"}}}),dH=ae()({cd_INNER_RELEASE:{name:"cd_InnerRelease"},cd_PRIMAL_WRATH:{name:"cd_PrimalWrath"},cd_UPHEAVAL:{name:"cd_Upheaval"},cd_ONSLAUGHT:{name:"cd_Onslaught"},cd_INFURIATE:{name:"cd_Infuriate"},cd_VENGEANCE:{name:"cd_Vengeance"},cd_THRILL_OF_BATTLE:{name:"cd_ThrillOfBattle"},cd_RAW_INTUITION:{name:"cd_RawIntuition"},cd_EQUILIBRIUM:{name:"cd_Equilibrium"},cd_SHAKE_IT_OFF:{name:"cd_ShakeItOff"},cd_HOLMGANG:{name:"cd_Holmgang"},cd_DEFIANCE:{name:"cd_Defiance"},cd_RELEASE_DEFIANCE:{name:"cd_ReleaseDefiance"}}),EH=ae()({BEAST_GAUGE:{name:"Beast Gauge",label:{zh:"兽魂量谱"}}}),pT=ae()({SURGING_TEMPEST:{name:"Surging Tempest",label:{zh:"战场风暴buff"}},INNER_RELEASE:{name:"Inner Release",label:{zh:"原初的解放buff"},maximumStacks:3},INNER_STRENGTH:{name:"Inner Strength",label:{zh:"原初的觉悟buff"}},BURGEONING_FURY:{name:"Burgeoning Fury",label:{zh:"原初的搏动buff"},maximumStacks:3},WRATHFUL:{name:"Wrathful",label:{zh:"原初的怒震预备"}},PRIMAL_REND_READY:{name:"Primal Rend Ready",label:{zh:"蛮荒崩裂预备"}},PRIMAL_RUINATION_READY:{name:"Primal Ruination Ready",label:{zh:"尽毁预备"}},NASCENT_CHAOS:{name:"Nascent Chaos",label:{zh:"原初的混沌buff"}},NASCENT_FLASH:{name:"Nascent Flash",label:{zh:"原初的勇猛buff（给队友）"}},THRILL_OF_BATTLE:{name:"Thrill of Battle",label:{zh:"战栗"}},EQUILIBRIUM:{name:"Equilibrium",label:{zh:"泰然自若的hot"}},SHAKE_IT_OFF:{name:"Shake It Off",label:{zh:"摆脱的盾"}},SHAKE_IT_OFF_OVER_TIME:{name:"Shake It Off Over Time",label:{zh:"摆脱的hot"}},RAW_INTUITION:{name:"Raw Intuition",label:{zh:"原初的直觉buff"}},STEM_THE_TIDE:{name:"Stem the Tide",label:{zh:"原初的血烟（挡伤害buff）"}},STEM_THE_FLOW:{name:"Stem the Flow",label:{zh:"原初的勇猛buff（给队友）"}},BLOODWHETTING:{name:"Bloodwhetting",label:{zh:"原初的血气（吸血buff）"}},VENGEANCE:{name:"Vengeance",label:{zh:"复仇减伤30"}},DAMNATION:{name:"Damnation",label:{zh:"戮罪减伤40"}},PRIMEVAL_IMPULSE:{name:"Primeval Impulse",label:{zh:"讨罪hot"}},HOLMGANG:{name:"Holmgang",label:{zh:"死斗buff"}},DEFIANCE:{name:"Defiance",label:{zh:"盾姿buff"},mayNotBeCanceled:!0}}),hH=ae()({STORM_COMBO:{name:"Storm Combo",label:{zh:"单体连击"}},TEMPEST_COMBO:{name:"Tempest Combo",label:{zh:"aoe连击"}}}),fH=ae()({NASCENT_CHAOS:{name:"Nascent Chaos",level:72},MASTERING_THE_BEAST:{name:"Mastering the Beast",level:74},ENHANCED_SHAKE_IT_OFF:{name:"Enhanced Shake It Off",level:76},ENHANCED_THRILL_OF_BATTLE:{name:"Enhanced Thrill of Battle",level:78},RAW_INTUITION_MASTERY:{name:"Raw Intuition Mastery",level:82},ENHANCED_NASCENT_FLASH:{name:"Enhanced Nascent Flash",level:82},ENHANCED_EQUILIBRIUM:{name:"Enhanced Equilibrium",level:84},ENHANCED_ONSLAUGHT:{name:"Enhanced Onslaught",level:88},VENGEANCE_MASTERY:{name:"Vengeance Mastery",level:92},ENHANCED_INNER_RELEASE:{name:"Enhanced Inner Release",level:96},ENHANCED_PRIMAL_REND:{name:"Enhanced Primal Rend",level:100}}),AH={...EH,...pT,...hH},mH=ae()({CURE:{id:120,name:"Cure",label:{zh:"治疗",ja:"ケアル"}},MEDICA:{id:124,name:"Medica",label:{zh:"医治",ja:"メディカ"}},RAISE:{id:125,name:"Raise",label:{zh:"复活",ja:"レイズ"}},CURE_II:{id:135,name:"Cure II",label:{zh:"救疗",ja:"ケアルラ"}},PRESENCE_OF_MIND:{id:136,name:"Presence of Mind",label:{zh:"神速咏唱",ja:"神速魔"}},REGEN:{id:137,name:"Regen",label:{zh:"再生",ja:"リジェネ"}},CURE_III:{id:131,name:"Cure III",label:{zh:"愈疗",ja:"ケアルガ"}},AETHERIAL_SHIFT:{id:37008,name:"Aetherial Shift",label:{zh:"以太变移",ja:"エーテリアルシフト"}},HOLY:{id:139,name:"Holy",label:{zh:"神圣",ja:"ホーリー"}},AERO_II:{id:132,name:"Aero II",label:{zh:"烈风",ja:"エアロラ"}},MEDICA_II:{id:133,name:"Medica II",label:{zh:"医济",ja:"メディカラ"}},BENEDICTION:{id:140,name:"Benediction",label:{zh:"天赐祝福",ja:"ベネディクション"}},AFFLATUS_SOLACE:{id:16531,name:"Afflatus Solace",label:{zh:"安慰之心",ja:"ハート・オブ・ソラス"}},ASYLUM:{id:3569,name:"Asylum",label:{zh:"庇护所",ja:"アサイラム"}},ASSIZE:{id:3571,name:"Assize",label:{zh:"法令",ja:"アサイズ"}},THIN_AIR:{id:7430,name:"Thin Air",label:{zh:"无中生有",ja:"シンエアー"}},TETRAGRAMMATON:{id:3570,name:"Tetragrammaton",label:{zh:"神名",ja:"テトラグラマトン"}},STONE_IV:{id:7431,name:"Stone IV",label:{zh:"崩石",ja:"ストンジャ"}},DIVINE_BENISON:{id:7432,name:"Divine Benison",label:{zh:"神祝祷",ja:"ディヴァインベニゾン"}},PLENARY_INDULGENCE:{id:7433,name:"Plenary Indulgence",label:{zh:"全大赦",ja:"インドゥルゲンティア"}},DIA:{id:16532,name:"Dia",label:{zh:"天辉",ja:"ディア"}},GLARE:{id:16533,name:"Glare",label:{zh:"闪耀",ja:"グレア"}},AFFLATUS_MISERY:{id:16535,name:"Afflatus Misery",label:{zh:"苦难之心",ja:"ハート・オブ・ミゼリ"}},AFFLATUS_RAPTURE:{id:16534,name:"Afflatus Rapture",label:{zh:"狂喜之心",ja:"ハート・オブ・ラプチャー"}},TEMPERANCE:{id:16536,name:"Temperance",label:{zh:"节制",ja:"テンパランス"}},GLARE_III:{id:25859,name:"Glare III",label:{zh:"闪灼",ja:"グレアガ"}},HOLY_III:{id:25860,name:"Holy III",label:{zh:"豪圣",ja:"ホーリガ"}},AQUAVEIL:{id:25861,name:"Aquaveil",label:{zh:"水流幕",ja:"アクアヴェール"}},LITURGY_OF_THE_BELL:{id:25862,name:"Liturgy of the Bell",label:{zh:"礼仪之铃",ja:"リタージー・オブ・ベル"}},LITURGY_POP:{name:"Pop Liturgy of the Bell",label:{zh:"礼仪之铃破盾"}},LITURGY_TRIGGER:{name:"Trigger Liturgy of the Bell",label:{zh:"礼仪之铃被打"}},GLARE_IV:{id:37009,name:"Glare IV",label:{zh:"闪飒",ja:"グレアジャ"}},MEDICA_III:{id:37010,name:"Medica III",label:{zh:"医养",ja:"メディガ"}},DIVINE_CARESS:{id:37011,name:"Divine Caress",label:{zh:"神爱抚",ja:"ディヴァインカレス"}}}),RH=ae()({cd_PRESENCE_OF_MIND:{name:"cd_PresenceOfMind"},cd_AETHERIAL_SHIFT:{name:"cd_AetherialShift"},cd_BENEDICTION:{name:"cd_Benediction"},cd_ASYLUM:{name:"cd_Asylum"},cd_ASSIZE:{name:"cd_Assize"},cd_THIN_AIR:{name:"cd_ThinAir"},cd_TETRAGRAMMATON:{name:"cd_Tetragrammaton"},cd_DIVINE_BENISON:{name:"cd_DivineBenison"},cd_PLENARY_INDULGENCE:{name:"cd_PlenaryIndulgence"},cd_TEMPERANCE:{name:"cd_Temperance"},cd_AQUAVEIL:{name:"cd_Aquaveil"},cd_LITURGY_OF_THE_BELL:{name:"cd_LiturgyOfTheBell"},cd_LITURGY_POP:{name:"cd_LiturgyPop"},cd_LITURGY_TRIGGER:{name:"cd_LiturgyTrigger"},cd_DIVINE_CARESS:{name:"cd_DivineCaress"}}),TH=ae()({LILLIES:{name:"Lillies",maximumCharges:3,label:{zh:"百合"}},LILY_TIMER:{name:"Lily Timer",label:{zh:"百合计时"}},BLOOD_LILY:{name:"Blood Lily",maximumCharges:3,label:{zh:"血百合"}}}),CT=ae()({FREECURE:{name:"Freecure",label:{zh:"治疗效果提高"}},PRESENCE_OF_MIND:{name:"Presence of Mind",label:{zh:"神速咏唱"}},SACRED_SIGHT:{name:"Sacred Sight",maximumStacks:3,label:{zh:"闪飒预备"}},REGEN:{name:"Regen",label:{zh:"再生"}},AERO_II:{name:"Aero II",label:{zh:"烈风"}},MEDICA_II:{name:"Medica II",label:{zh:"医济"}},ASYLUM:{name:"Asylum",mayBeToggled:!0,label:{zh:"庇护所"}},THIN_AIR:{name:"Thin Air",label:{zh:"无中生有"}},DIVINE_BENISON:{name:"Divine Benison",label:{zh:"神祝祷"}},CONFESSION:{name:"Confession",label:{zh:"全大赦"}},DIA:{name:"Dia",label:{zh:"天辉"}},TEMPERANCE:{name:"Temperance",label:{zh:"节制"}},DIVINE_GRACE:{name:"Divine Grace",label:{zh:"神爱抚预备"}},AQUAVEIL:{name:"Aquaveil",label:{zh:"水流幕"}},LITURGY_OF_THE_BELL:{name:"Liturgy of the Bell",maximumStacks:5,mayNotBeCanceled:!0,label:{zh:"礼仪之铃"}},MEDICA_III:{name:"Medica III",label:{zh:"医养"}},DIVINE_CARESS:{name:"Divine Caress",label:{zh:"神爱抚"}},DIVINE_AURA:{name:"Divine Aura",label:{zh:"神爱环"}}}),SH=ae()({}),IH=ae()({AERO_MASTERY_II:{name:"Aero Mastery II",level:72},STONE_MASTERY_IV:{name:"Stone Mastery IV",level:72},TRANSCENDENT_AFFLATUS:{name:"Transcendent Afflatus",level:74},ENHANCED_ASYLUM:{name:"Enhanced Asylum",level:78},GLARE_MASTERY:{name:"Glare Mastery",level:82},HOLY_MASTERY:{name:"Holy Mastery",level:82},ENHANCED_DIVINE_BENISON:{name:"Enhanced Divine Benison",level:88},ENHANCED_PRESENCE_OF_MIND:{name:"Enhanced Presence of Mind",level:92},WHITE_MAGIC_MASTERY:{name:"White Magic Mastery",level:94},MEDICA_MASTERY:{name:"Medica Mastery",level:96},ENHANCED_TETRAGRAMMATON:{name:"Enhanced Tetragrammaton",level:98},ENHANCED_TEMPERANCE:{name:"Enhanced Temperance",level:100}}),_H={...TH,...CT,...SH},gH=ae()({WATER_CANNON:{name:"Water Cannon",label:{zh:"水泡(2秒200)"}},SONIC_BOOM:{name:"Sonic Boom",label:{zh:"音爆(1秒210)"}},SHARPENED_KNIFE:{name:"Sharpened Knife",label:{zh:"锋利菜刀(1秒220)"}},HYDRO_PULL:{name:"Hydro Pull",label:{zh:"水力吸引(2秒220)"}},MOON_FLUTE:{name:"Moon Flute",label:{zh:"月之笛"}},DIAMONDBACK:{name:"Diamondback",label:{zh:"超硬化"}},SONG_OF_TORMENT:{name:"Song of Torment",label:{zh:"苦闷之歌"}},WHISTLE:{name:"Whistle",label:{zh:"口笛"}},BRISTLE:{name:"Bristle",label:{zh:"蓄力"}},TINGLE:{name:"Tingle",label:{zh:"哔哩哔哩"}},FINAL_STING:{name:"Final Sting",label:{zh:"终极针"}},COLD_FOG:{name:"Cold Fog",label:{zh:"彻骨雾寒"}},WHITE_DEATH:{name:"White Death",label:{zh:"冰雾"}},POP_COLD_FOG:{name:"Pop Cold Fog",label:{zh:"冰雾触发"}},PHANTOM_FLURRY:{name:"Phantom Flurry",label:{zh:"鬼宿脚"}},END_PHANTOM_FLURRY:{name:"End Phantom Flurry",label:{zh:"鬼宿脚"}},MATRA_MAGIC:{name:"Matra Magic",label:{zh:"魔术"}},WINGED_REPROBATION:{name:"Winged Reprobation",label:{zh:"断罪飞翔"}},CONVICTION_MARCATO:{name:"Conviction Marcato",label:{zh:"加强信音"}},REVENGE_BLAST:{name:"Revenge Blast",label:{zh:"复仇冲击"}},WILD_RAGE:{name:"Wild Rage",label:{zh:"兽魂的愤怒"}},GOBLIN_PUNCH:{name:"Goblin Punch",label:{zh:"哥布林乱拳"}},THE_ROSE_OF_DESTRUCTION:{name:"The Rose of Destruction",label:{zh:"斗灵弹"}},ERUPTION:{name:"Eruption",label:{zh:"地火喷发"}},FEATHER_RAIN:{name:"Feather Rain",label:{zh:"飞翎雨"}},MOUNTAIN_BUSTER:{name:"Mountain Buster",label:{zh:"山崩"}},SHOCK_STRIKE:{name:"Shock Strike",label:{zh:"轰雷"}},GLASS_DANCE:{name:"Glass Dance",label:{zh:"冰雪乱舞"}},QUASAR:{name:"Quasar",label:{zh:"类星体"}},J_KICK:{name:"J Kick",label:{zh:"正义飞踢"}},TRIPLE_TRIDENT:{name:"Triple Trident",label:{zh:"渔叉三段"}},BOTH_ENDS:{name:"Both Ends",label:{zh:"如意大旋风"}},NIGHTBLOOM:{name:"Nightbloom",label:{zh:"月下彼岸花"}},SEA_SHANTY:{name:"Sea Shanty",label:{zh:"咕噜咕噜"}},APOKALYPSIS:{name:"Apokalypsis",label:{zh:"启示录"}},BEING_MORTAL:{name:"Being Mortal",label:{zh:"终有一死"}},BREATH_OF_MAGIC:{name:"Breath of Magic",label:{zh:"魔法吐息"}},MORTAL_FLAME:{name:"Mortal Flame",label:{zh:"必灭之炎"}},SURPANAKHA:{name:"Surpanakha",label:{zh:"穿甲散弹"}}}),NH=ae()({cd_ERUPTION:{name:"cd_Eruption",label:{zh:"CD: 地火/飞翎雨"}},cd_SHOCK_STRIKE:{name:"cd_Shock_Strike",label:{zh:"CD: 轰雷/地裂"}},cd_GLASS_DANCE:{name:"cd_Glass_Dance",label:{zh:"CD: 冰雪乱舞"}},cd_SURPANAKHA:{name:"cd_Surpanakha",label:{zh:"CD: 穿甲散弹"}},cd_QUASAR:{name:"cd_Quasar",label:{zh:"CD: 类星体/飞踢"}},cd_NIGHTBLOOM:{name:"cd_Nightbloom",label:{zh:"CD: 大旋风/彼岸花"}},cd_SEA_SHANTY:{name:"cd_Sea_Shanty",label:{zh:"CD: 咕噜咕噜"}},cd_BEING_MORTAL:{name:"cd_Being_Mortal",label:{zh:"CD: 启示录/终有一死"}},cd_COLD_FOG:{name:"cd_Cold_Fog",label:{zh:"CD: 彻骨雾寒"}},cd_TRIPLE_TRIDENT:{name:"cd_Triple_Trident",label:{zh:"CD: 渔叉三段"}},cd_PHANTOM_FLURRY:{name:"cd_Phantom_Flurry",label:{zh:"CD: 鬼宿脚"}},cd_COLD_FOG_POP:{name:"cd_Cold_Fog_Pop",label:{zh:"CD: 彻骨雾寒触发"}},cd_MATRA_MAGIC:{name:"cd_Matra_Magic",label:{zh:"CD: 魔术"}},cd_WINGED_REPROBATION:{name:"cd_Winged_Reprobation",label:{zh:"CD: 断罪飞翔"}},cd_THE_ROSE_OF_DESTRUCTION:{name:"cd_The_Rose_of_Destruction",label:{zh:"CD: 斗灵弹"}},cd_SURPANAKHA_LOCKOUT:{name:"cd_SurpanakhaLockout",label:{zh:"CD: 穿甲散弹"}}}),pH=ae()({}),OT=ae()({NIGHTBLOOM:{name:"Bleeding",label:{zh:"出血（彼岸花）"}},SONG_OF_TORMENT:{name:"Bleeding",label:{zh:"出血（苦闷）"}},FEATHER_RAIN:{name:"Feather Rain",label:{zh:"裂伤"}},WAXING_NOCTURNE:{name:"Waxing Nocturne",label:{zh:"狂战士化"}},WANING_NOCTURNE:{name:"Waning Nocturne",label:{zh:"狂战士化的副作用"}},WHISTLE:{name:"Whistle",label:{zh:"口笛"}},BRISTLE:{name:"Bristle",label:{zh:"蓄力"}},TINGLE:{name:"Tingle",label:{zh:"哔哩哔哩"}},COLD_FOG:{name:"Cold Fog",label:{zh:"彻骨雾寒"}},TOUCH_OF_FROST:{name:"Touch of Frost",label:{zh:"冰雾"}},PHANTOM_FLURRY:{name:"Phantom Flurry",label:{zh:"鬼宿脚"}},DIAMONDBACK:{name:"Diamondback",label:{zh:"超硬化"}},APOKALYPSIS:{name:"Apokalypsis",label:{zh:"启示录"}},WINGED_REDEMPTION:{name:"Winged Redemption",label:{zh:"完美神的祝福"}},BREATH_OF_MAGIC:{name:"Breath of Magic",label:{zh:"魔法吐息"}},MORTAL_FLAME:{name:"Mortal Flame",label:{zh:"必灭之炎"}},WINGED_REPROBATION:{name:"Winged Reprobation",label:{zh:"断罪飞翔"},maximumStacks:4},SURPANAKHAS_FURY:{name:"Surpanakha's Fury",label:{zh:"穿甲散弹"},maximumStacks:4},BRUSH_WITH_DEATH:{name:"Brush with Death",label:{zh:"意志薄弱"}}}),CH=ae()({SURPANAKHA_LOCKOUT:{name:"Supranakha Lockout",label:{zh:"断罪飞翔"}}}),OH=ae()({}),bH={...pH,...OT,...CH},DH=ae()({NEVER:{name:"Never"},TINCTURE:{name:"Tincture",label:{zh:"爆发药",ja:"薬"}},SPRINT:{name:"Sprint",label:{zh:"疾跑",ja:"スプリント"}}}),yH=ae()({NEVER:{name:"Never"},cd_GCD:{name:"cd_GCD",label:{zh:"GCD"}},cd_TINCTURE:{name:"cd_Tincture"},cd_SPRINT:{name:"cd_Sprint"}}),vH=ae()({MANA:{name:"Mana",label:{zh:"MP"}}}),MH=ae()({TINCTURE:{name:"Tincture",label:{zh:"爆发药"}},SPRINT:{name:"Sprint",label:{zh:"疾跑"}}}),LH=ae()({MOVEMENT:{name:"Movement"},NOT_ANIMATION_LOCKED:{name:"NotAnimationLocked"},NOT_CASTER_TAXED:{name:"NotCasterTaxed"},IN_COMBAT:{name:"InCombat",label:{zh:"战斗中"}},AUTOS_ENGAGED:{name:"Autos Engaged"},STORED_AUTO:{name:"Stored Auto"},PARTY_SIZE:{name:"PartySize",label:{zh:"小队人数"}},NEVER:{name:"Never"}}),HH=ae()({NEVER:{name:"Never",level:1}}),UH={...vH,...MH,...LH},kH=ae()({LAST_BASTION:{name:"Last Bastion",label:{zh:"终极堡垒"}},LAND_WAKER:{name:"Land Waker",label:{zh:"原初大地"}},DARK_FORCE:{name:"Dark Force",label:{zh:"暗黑之力"}},GUNMETAL_SOUL:{name:"Gunmetal Soul",label:{zh:"灵魂之青"}}}),xH=ae()({PULSE_OF_LIFE:{name:"Pulse of Life"},ANGEL_FEATHERS:{name:"Angel Feathers"},ASTRAL_STASIS:{name:"Astral Stasis"},TECHNE_MAKRE:{name:"Techne Makre"}}),PH=ae()({FINAL_HEAVEN:{name:"Final Heaven"},DRAGONSONG_DIVE:{name:"Dragonsong Dive"},CHIMATSURI:{name:"Chimatsuri"},DOOM_OF_THE_LIVING:{name:"Doom of the Living"},THE_END:{name:"The End"},WORLD_SWALLOWER:{name:"World-swallower"}}),wH=ae()({SAGITTARIUS_ARROW:{name:"Sagittarius Arrow"},SATELLITE_BEAM:{name:"Satellite Beam"},CRIMSON_LOTUS:{name:"Crimson Lotus"}}),GH=ae()({METEOR:{name:"Meteor"},TERAFLARE:{name:"Teraflare"},VERMILLION_SCOURGE:{name:"Vermillion Scourge"},CHROMATIC_FANTASY:{name:"Chromatic Fantasy"}}),BH=ae()({LAST_BASTION:{name:"Last Bastion",label:{zh:"终极堡垒（骑士LB3 buff）"}},LAND_WAKER:{name:"Land Waker",label:{zh:"原初大地（战士LB3 buff）"}},DARK_FORCE:{name:"Dark Force",label:{zh:"暗黑之力（黑骑LB3 buff）"}},GUNMETAL_SOUL:{name:"Gunmetal Soul",label:{zh:"灵魂之青（绝枪LB3 buff）"}}}),FH=ae()({cd_LIMIT_BREAK_1:{name:"cd_LIMIT_BREAK_1",label:{zh:"CD：一段LB"}},cd_LIMIT_BREAK_2:{name:"cd_LIMIT_BREAK_2",label:{zh:"CD：二段LB"}},cd_LIMIT_BREAK_3:{name:"cd_LIMIT_BREAK_3",label:{zh:"CD：三段LB"}}}),zH=ae()({UNKNOWN:{name:"Unknown"},SHIELD_WALL:{name:"Shield Wall"},STRONGHOLD:{name:"Stronghold"},HEALING_WIND:{name:"Healing Wind"},BREATH_OF_THE_EARTH:{name:"Breath of the Earth"},BRAVER:{name:"Braver"},BLADEDANCE:{name:"Bladedance"},BIGSHOT:{name:"Big Shot"},DESPERADO:{name:"Desperado"},SKYSHARD:{name:"Skyshard"},STARSTORM:{name:"Starstorm"}}),LC=ae()({UNKNOWN:{name:"Unknown"},SHIELD_WALL:{name:"Shield Wall",label:{zh:"铜墙铁盾（防护LB1 buff）"}},STRONGHOLD:{name:"Stronghold",label:{zh:"坚守要塞（防护LB2 buff）"}}}),jH={...kH,...xH,...PH,...wH,...GH},Lo={...zH,...jH},HC={...LC,...BH},YH=ae()({ARMS_LENGTH:{name:"Arm's Length",label:{zh:"亲疏自行"}},SECOND_WIND:{name:"Second Wind",label:{zh:"内丹"}},HEAD_GRAZE:{name:"Head Graze",label:{zh:"伤头"}},ESUNA:{name:"Esuna",label:{zh:"康复"}},RESCUE:{name:"Rescue",label:{zh:"营救"}},ADDLE:{name:"Addle",label:{zh:"病毒",ja:"アドル"},discordEmote:"Addle"},SWIFTCAST:{name:"Swiftcast",label:{zh:"即刻咏唱",ja:"迅速魔"}},LUCID_DREAMING:{name:"Lucid Dreaming",label:{zh:"醒梦",ja:"ルーシッドドリーム"},discordEmote:"Lucid"},SURECAST:{name:"Surecast",label:{zh:"沉稳咏唱",ja:"堅実魔"},discordEmote:"Surecast"},FEINT:{name:"Feint",label:{zh:"牵制"}},BLOODBATH:{name:"Bloodbath",label:{zh:"浴血"}},TRUE_NORTH:{name:"True North",label:{zh:"真北"}},LEG_SWEEP:{name:"Leg Sweep",label:{zh:"扫腿"}},RAMPART:{name:"Rampart",label:{zh:"铁壁"}},REPRISAL:{name:"Reprisal",label:{zh:"雪仇"}},LOW_BLOW:{name:"Low Blow",label:{zh:"下踢"}},INTERJECT:{name:"Interject",label:{zh:"插言"}},PROVOKE:{name:"Provoke",label:{zh:"挑衅"}},SHIRK:{name:"Shirk",label:{zh:"退避"}}}),KH=ae()({cd_ADDLE:{name:"cd_Addle"},cd_SWIFTCAST:{name:"cd_Swiftcast"},cd_LUCID_DREAMING:{name:"cd_LucidDreaming"},cd_SURECAST:{name:"cd_Surecast"},cd_SECOND_WIND:{name:"cd_SecondWind"},cd_ARMS_LENGTH:{name:"cd_ArmsLength"},cd_RESCUE:{name:"cd_Rescue"},cd_FEINT:{name:"cd_Feint"},cd_TRUE_NORTH:{name:"cd_TrueNorth"},cd_BLOODBATH:{name:"cd_Bloodbath"},cd_LEG_SWEEP:{name:"cd_LegSweep"},cd_RAMPART:{name:"cd_Rampart"},cd_REPRISAL:{name:"cd_Reprisal"},cd_LOW_BLOW:{name:"cd_LowBlow"},cd_INTERJECT:{name:"cd_Interject"},cd_PROVOKE:{name:"cd_Provoke"},cd_SHIRK:{name:"cd_Shirk"},cd_HEAD_GRAZE:{name:"cd_HeadGraze"}}),VH=ae()({ADDLE:{name:"Addle",label:{zh:"昏乱"}},SWIFTCAST:{name:"Swiftcast",label:{zh:"即刻咏唱"}},LUCID_DREAMING:{name:"Lucid Dreaming",label:{zh:"醒梦"}},SURECAST:{name:"Surecast",label:{zh:"沉稳咏唱"}},ARMS_LENGTH:{name:"Arms Length",label:{zh:"亲疏自行"}},FEINT:{name:"Feint",label:{zh:"牵制"}},TRUE_NORTH:{name:"True North",label:{zh:"真北"}},BLOODBATH:{name:"Bloodbath",label:{zh:"浴血"}},RAMPART:{name:"Rampart",label:{zh:"铁壁buff"}},REPRISAL:{name:"Reprisal",label:{zh:"雪仇buff"}}}),WH=ae()({REAR_POSITIONAL:{name:"Rear Positional",label:{zh:"身位加成（后）"},mayBeToggled:!0},FLANK_POSITIONAL:{name:"Flank Positional",label:{zh:"身位加成（侧）"},mayBeToggled:!0},AUTOS_ENGAGED:{name:"Autos Engaged",mayBeToggled:!0}}),XH=ae()({ENHANCED_SWIFTCAST:{name:"Enhanced Swiftcast",level:94},ENHANCED_ADDLE:{name:"Enhanced Addle",level:98},ENHANCED_HEALING_MAGIC:{name:"Enhanced Healing Magic",level:85},MAGICK_MASTERY_HEALER:{name:"Magick Mastery",level:94},ENHANCED_SECOND_WIND:{name:"Enhanced Second Wind",level:94},ENHANCED_FEINT:{name:"Enhanced Feint",level:98},MELEE_MASTERY_TANK:{name:"Melee Mastery",level:84},ENHANCED_RAMPART:{name:"Enhanced Rampart",level:94},MELEE_MASTERY_II_TANK:{name:"Melee Mastery II",level:94},ENHANCED_REPRISAL:{name:"Enhanced Reprisal",level:98}}),UC={...VH,...WH},Pa={...DH,...YH,...Lo,...m1,...uH,...kL,...FL,...mH,...B1,...oL,...V1,...JL,...yL,...i1,...U1,...D1,...iH,...RL,...WL,...NL,...dL,...$1,...g1,...u1,...gH},Rs={...yH,...KH,...FH,...R1,...dH,...xL,...zL,...RH,...F1,...lL,...W1,...e1,...vL,...o1,...k1,...y1,...oH,...TL,...XL,...pL,...EL,...J1,...N1,...d1,...NH},Ge={...UH,...UC,...HC,..._1,...AH,...BL,...VL,..._H,...K1,...uL,...Q1,...vC,...UL,...c1,...G1,...H1,...cH,...gL,...$L,...DL,...mL,...nH,...b1,...A1,...bH},xm={...HH,...XH,...I1,...fH,...GL,...KL,...IH,...Y1,...cL,...Z1,...n1,...HL,...r1,...w1,...L1,...rH,..._L,...QL,...bL,...AL,...aH,...O1,...f1,...OH},Sa={epsilon:1e-6};var Rt=(e=>(e[e.lvl70=70]="lvl70",e[e.lvl80=80]="lvl80",e[e.lvl90=90]="lvl90",e[e.lvl100=100]="lvl100",e))(Rt||{});const qH=.1;var Ie=(e=>(e.Fire="Fire",e.Ice="Ice",e.Lightning="Lightning",e.Wind="Wind",e.Earth="Earth",e.Physical="Physical",e.Other="Other",e))(Ie||{}),xn=(e=>(e.RNG="RNG",e.Never="Never",e.Always="Always",e))(xn||{}),Et=(e=>(e.Blocked="blocked by CD, animation lock or caster tax",e.SecondaryBlocked="blocked by secondary CD",e.NotEnoughMP="not enough MP",e.NotInCombat="not in combat (must wait for first damage application)",e.RequirementsNotMet="skill requirements not satisfied",e.SkillNotUnlocked="skill not unlocked at provided level",e.BuffNoLongerAvailable="buff no longer available",e.PastTargetTime="jump target time has already passed",e.CastCanceled="cast canceled (skill requirements no longer met at confirmation time)",e.UnknownSkill="unknown skill",e))(Et||{});function pu(){return{unavailableReasons:[],ready:function(){return this.unavailableReasons.length===0},toString:function(){return this.ready()?"ready":this.unavailableReasons.join("; ")},addUnavailableReason:function(e){this.unavailableReasons.includes(e)||this.unavailableReasons.push(e)},clone:function(){const e=pu();return this.unavailableReasons.forEach(t=>e.addUnavailableReason(t)),e}}}var H=(e=>(e.LeyLines="Ley Lines",e.Hyperphantasia="Hyperphantasia",e.Manafication="Manafication",e.Acceleration="Acceleration",e.Fuka="Fuka",e.Fugetsu="Fugetsu",e.EnhancedEnpi="Enhanced Enpi",e.NoMercy="No Mercy",e.PowerSurge="Power Surge",e.LanceCharge="Lance Charge",e.LifeOfTheDragon="Life Of The Dragon",e.EnhancedPiercingTalon="Enhanced Piercing Talon",e.LifeSurge="Life Surge",e.DivineMight="Divine Might",e.Requiescat="Requiescat",e.FightOrFlight="Fight Or Flight",e.Tincture="Tincture",e.ArcaneCircle="Arcane Circle",e.ArmysPaeon="Army's Paeon",e.BattleLitany="Battle Litany",e.BattleVoice="Battle Voice",e.Brotherhood="Brotherhood",e.Card_TheBalance="Card - The Balance",e.Card_TheSpear="Card - The Spear",e.ChainStratagem="Chain Stratagem",e.Devilment="Devilment",e.Divination="Divination",e.Dokumori="Dokumori",e.Embolden="Embolden",e.MagesBallad="Mage's Ballad",e.RadiantFinale1="Radiant Finale (1)",e.RadiantFinale2="Radiant Finale (2)",e.RadiantFinale3="Radiant Finale (3)",e.Barrage="Barrage",e.SearingLight="Searing Light",e.StandardFinish="Standard Finish",e.StarryMuse="Starry Muse",e.TechnicalFinish="Technical Finish",e.WanderersMinuet="The Wanderer's Minuet",e.RagingStrikes="Raging Strikes",e.DeathsDesign="Death's Design",e.Zoe="Zoe",e.Autophysis="Autophysis",e.Krasis="Krasis",e.Philosophia="Philosophia",e.Soteria="Soteria",e.WaxingNocturne="Waxing Nocturne",e.Whistle="Whistle",e.Bristle="Bristle",e.TingleA="TingleA",e.TingleB="TingleB",e.TrickAttack="Trick Attack",e.KunaisBane="Kunai's Bane",e.Bunshin="Bunshin",e.RiddleOfFire="Riddle of Fire",e.TheArrow="The Arrow",e.NeutralSect="Neutral Sect",e.Synastry="Synastry",e.Confession="Confession",e.Asylum="Asylum",e.Temperance="Temperance",e.HuntersInstinct="Hunter's Instinct",e.Swiftscaled="Swiftscaled",e.FeyIllumination="Fey Illumination",e.Dissipation="Dissipation",e.Protraction="Protraction",e.Recitation="Recitation",e))(H||{});function ZH(e){return ki({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93 6h-2.95a15.65 15.65 0 0 0-1.38-3.56A8.03 8.03 0 0 1 18.92 8zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56A7.987 7.987 0 0 1 5.08 16zm2.95-8H5.08a7.987 7.987 0 0 1 4.33-3.56A15.65 15.65 0 0 0 8.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2zm.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95a8.03 8.03 0 0 1-4.33 3.56zM16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.38z"},child:[]}]})(e)}function QH(e){return ki({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 3a9 9 0 1 0 9 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 0 1-4.4 2.26 5.403 5.403 0 0 1-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"},child:[]}]})(e)}function $H(e){return ki({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58a.996.996 0 0 0-1.41 0 .996.996 0 0 0 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37a.996.996 0 0 0-1.41 0 .996.996 0 0 0 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0a.996.996 0 0 0 0-1.41l-1.06-1.06zm1.06-10.96a.996.996 0 0 0 0-1.41.996.996 0 0 0-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36a.996.996 0 0 0 0-1.41.996.996 0 0 0-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z"},child:[]}]})(e)}function Pm(e,t){const n=Math.pow(10,t);return Math.floor(e*n)/n}var Ui,kC,xC,PC,SR;const Co=class Co{static getMainstatBase(t){switch(t){case Rt.lvl70:return 292;case Rt.lvl80:return 340;case Rt.lvl90:return 390;case Rt.lvl100:return 440}}static getSubstatBase(t){switch(t){case Rt.lvl70:return 364;case Rt.lvl80:return 380;case Rt.lvl90:return 400;case Rt.lvl100:return 420}}static getStatDiv(t){switch(t){case Rt.lvl70:return 900;case Rt.lvl80:return 1300;case Rt.lvl90:return 1900;case Rt.lvl100:return 2780}}static calculateDamage(t,n,o,l,r,d,h){var x,Q,oe,he,ue;let E=r;const A=d>=1?d:d<0?0:Co.criticalHitRate(t,n)+d,R=h>=1?h:h<0?0:pe(x=Co,Ui,xC).call(x,t,o)+h;if(A===0&&R===0)return E;const T=pe(Q=Co,Ui,kC).call(Q,t,n),S=1.25,I=A>=1&&R>=1,p=A>1?Pm(1+(T-1)*(d-1),3):1,_=R>1?Pm(1+(S-1)*(h-1),3):1,b=A>1?1:A,v=R>1?1:R;I?E*=Pm(pe(oe=Co,Ui,SR).call(oe,t,l)+pe(he=Co,Ui,PC).call(he,t,o),3):E*=pe(ue=Co,Ui,SR).call(ue,t,l);const L=E*p*T,k=E*_*S,M=L*_*S,B=b*v,w=1-b-v+B;return E*w+L*(b-B)+k*(v-B)+M*B}static criticalHitRate(t,n){const o=this.getSubstatBase(t),l=this.getStatDiv(t);return(Math.floor(200*(n-o)/l)+50)*.001}static overtimePotency(t,n,o){const l=this.getSubstatBase(t),r=this.getStatDiv(t),d=(1e3+Math.floor((n-l)*130/r))*.001;return o*d}static mpTick(t,n){const o=this.getMainstatBase(t),l=this.getStatDiv(t);return 200+Math.floor(150*(n-o)/l)}static preTaxGcd(t,n,o,l){const r=this.getSubstatBase(t),d=this.getStatDiv(t),h=Math.ceil((r-n)*130/d),E=Math.floor(o*(1e3+h));return Math.floor((100-(l??0))*E/1e3)/100}static preTaxGcdLegacy(t,n,o,l){const r=this.getSubstatBase(t),d=this.getStatDiv(t);return Math.floor(Math.floor(Math.floor((100-(l??0))*100/100)*Math.floor((2e3-Math.floor(130*(n-r)/d+1e3))*(1e3*o)/1e4)/100)*100/100)/100}static preTaxCastTime(t,n,o,l){const r=this.getSubstatBase(t),d=this.getStatDiv(t);return Math.floor(Math.floor(Math.floor((100-(l??0))*100/100)*Math.floor((2e3-Math.floor(130*(n-r)/d+1e3))*(1e3*o)/1e3)/100)*100/100)/1e3}static afterFpsTax(t,n){return Math.floor(n*t+1)/t}};Ui=new WeakSet,kC=function(t,n){const o=this.getSubstatBase(t),l=this.getStatDiv(t);return(Math.floor(200*(n-o)/l)+1400)*.001},xC=function(t,n){const o=this.getSubstatBase(t),l=this.getStatDiv(t);return Math.floor(550*(n-o)/l)*.001},PC=function(t,n){const o=this.getSubstatBase(t),l=this.getStatDiv(t);return Math.floor(140*(n-o)/l)*.001},SR=function(t,n){const o=this.getMainstatBase(t),l=this.getStatDiv(t);return Math.floor(1e3+140*(n-o)/l)*.001},Fe(Co,Ui);let Ot=Co;var U=(e=>(e[e.AF3=0]="AF3",e[e.AF2=1]="AF2",e[e.AF1=2]="AF1",e[e.UI3=3]="UI3",e[e.UI2=4]="UI2",e[e.UI1=5]="UI1",e[e.ENO=6]="ENO",e[e.STARRY=7]="STARRY",e[e.EMBOLDEN_M=8]="EMBOLDEN_M",e[e.MANAFIC=9]="MANAFIC",e[e.ACCELERATION=10]="ACCELERATION",e[e.POT=11]="POT",e[e.COMBO=12]="COMBO",e[e.AUTO_CDH=13]="AUTO_CDH",e[e.NO_CDH=14]="NO_CDH",e[e.PARTY=15]="PARTY",e[e.STANDARD_SINGLE=16]="STANDARD_SINGLE",e[e.STANDARD_DOUBLE=17]="STANDARD_DOUBLE",e[e.TECHNICAL_SINGLE=18]="TECHNICAL_SINGLE",e[e.TECHNICAL_DOUBLE=19]="TECHNICAL_DOUBLE",e[e.TECHNICAL_TRIPLE=20]="TECHNICAL_TRIPLE",e[e.TECHNICAL_QUADRUPLE=21]="TECHNICAL_QUADRUPLE",e[e.DEVILMENT=22]="DEVILMENT",e[e.FUGETSU=23]="FUGETSU",e[e.AUTO_CRIT=24]="AUTO_CRIT",e[e.YATEN=25]="YATEN",e[e.POSITIONAL=26]="POSITIONAL",e[e.ARCANE_CIRCLE=27]="ARCANE_CIRCLE",e[e.DEATHSDESIGN=28]="DEATHSDESIGN",e[e.ENHANCED_GIBBET_GALLOWS=29]="ENHANCED_GIBBET_GALLOWS",e[e.ENHANCED_REAPING=30]="ENHANCED_REAPING",e[e.IMMORTAL_SACRIFICE=31]="IMMORTAL_SACRIFICE",e[e.OVERHEATED=32]="OVERHEATED",e[e.SURGING_TEMPEST=33]="SURGING_TEMPEST",e[e.RAGING_STRIKES=34]="RAGING_STRIKES",e[e.WANDERERS_MINUET=35]="WANDERERS_MINUET",e[e.MAGES_BALLAD=36]="MAGES_BALLAD",e[e.ARMYS_PAEON=37]="ARMYS_PAEON",e[e.BATTLE_VOICE=38]="BATTLE_VOICE",e[e.RADIANT_FINALE_ONE_CODA=39]="RADIANT_FINALE_ONE_CODA",e[e.RADIANT_FINALE_TWO_CODA=40]="RADIANT_FINALE_TWO_CODA",e[e.RADIANT_FINALE_THREE_CODA=41]="RADIANT_FINALE_THREE_CODA",e[e.BARRAGE=42]="BARRAGE",e[e.NO_MERCY=43]="NO_MERCY",e[e.SEARING_LIGHT=44]="SEARING_LIGHT",e[e.POWER_SURGE=45]="POWER_SURGE",e[e.ENHANCED_PIERCING_TALON=46]="ENHANCED_PIERCING_TALON",e[e.LANCE_CHARGE=47]="LANCE_CHARGE",e[e.LIFE_OF_THE_DRAGON=48]="LIFE_OF_THE_DRAGON",e[e.LIFE_SURGE=49]="LIFE_SURGE",e[e.BATTLE_LITANY=50]="BATTLE_LITANY",e[e.FIGHT_OR_FLIGHT=51]="FIGHT_OR_FLIGHT",e[e.DIVINE_MIGHT=52]="DIVINE_MIGHT",e[e.REQUIESCAT=53]="REQUIESCAT",e[e.PET=54]="PET",e[e.ZOE=55]="ZOE",e[e.SOTERIA=56]="SOTERIA",e[e.KRASIS=57]="KRASIS",e[e.AUTOPHYSIS=58]="AUTOPHYSIS",e[e.PHILOSOPHIA=59]="PHILOSOPHIA",e[e.MOON_FLUTE=60]="MOON_FLUTE",e[e.BRISTLE=61]="BRISTLE",e[e.WHISTLE=62]="WHISTLE",e[e.TINGLEA=63]="TINGLEA",e[e.TINGLEB=64]="TINGLEB",e[e.SURPANAKHA=65]="SURPANAKHA",e[e.WINGED_REPROBATION=66]="WINGED_REPROBATION",e[e.WINGED_REDEMPTION=67]="WINGED_REDEMPTION",e[e.DARKSIDE=68]="DARKSIDE",e[e.BUNSHIN=69]="BUNSHIN",e[e.KASSATSU=70]="KASSATSU",e[e.HOLLOW_NOZUCHI=71]="HOLLOW_NOZUCHI",e[e.KAZEMATOI=72]="KAZEMATOI",e[e.MEISUI=73]="MEISUI",e[e.DOKUMORI=74]="DOKUMORI",e[e.TRICK_ATTACK=75]="TRICK_ATTACK",e[e.KUNAIS_BANE=76]="KUNAIS_BANE",e[e.BROTHERHOOD=77]="BROTHERHOOD",e[e.RIDDLE_OF_FIRE=78]="RIDDLE_OF_FIRE",e[e.SSS_CHAKRA=79]="SSS_CHAKRA",e[e.MNK_BALL=80]="MNK_BALL",e[e.DIVINATION=81]="DIVINATION",e[e.NEUTRAL_SECT=82]="NEUTRAL_SECT",e[e.THE_ARROW=83]="THE_ARROW",e[e.SYNASTRY=84]="SYNASTRY",e[e.CONFESSION=85]="CONFESSION",e[e.ASYLUM=86]="ASYLUM",e[e.TEMPERANCE=87]="TEMPERANCE",e[e.EXTRA_BELL_STACKS=88]="EXTRA_BELL_STACKS",e[e.HUNTERS_INSTINCT=89]="HUNTERS_INSTINCT",e[e.HONED=90]="HONED",e[e.VENOM=91]="VENOM",e[e.POISED=92]="POISED",e[e.CHAIN_STRAT=93]="CHAIN_STRAT",e[e.FEY_ILLUMINATION=94]="FEY_ILLUMINATION",e[e.DISSIPATION=95]="DISSIPATION",e[e.PROTRACTION=96]="PROTRACTION",e))(U||{});const LN=1.1,wm=.9,X={Tincture:{kind:"multiplier",source:11,potencyFactor:1},AutoCrit:{kind:"critDirect",source:24,critBonus:1,dhBonus:0},AutoCDH:{kind:"critDirect",source:13,critBonus:1,dhBonus:1},NoCDH:{kind:"critDirect",source:14,critBonus:0,dhBonus:0},Starry:{kind:"multiplier",source:7,potencyFactor:1.05},EmboldenMagic:{kind:"multiplier",source:8,potencyFactor:1.05},AccelerationImpact:{kind:"adder",source:10,additiveAmount:50},Manafication:{kind:"multiplier",source:9,potencyFactor:1.05},SingleStandardFinish:{kind:"multiplier",source:16,potencyFactor:1.02},DoubleStandardFinish:{kind:"multiplier",source:17,potencyFactor:1.05},SingleTechnicalFinish:{kind:"multiplier",source:18,potencyFactor:1.01},TripleTechnicalFinish:{kind:"multiplier",source:20,potencyFactor:1.03},QuadrupleTechnicalFinish:{kind:"multiplier",source:21,potencyFactor:1.05},Devilment:{kind:"critDirect",source:22,critBonus:.2,dhBonus:.2},FugetsuBase:{kind:"multiplier",source:23,potencyFactor:1.1},FugetsuEnhanced:{kind:"multiplier",source:23,potencyFactor:1.13},YatenpiBase:{kind:"adder",source:25,additiveAmount:160},YatenpiEnhanced:{kind:"adder",source:25,additiveAmount:170},ArcaneCircle:{kind:"multiplier",source:27,potencyFactor:1.03},DeathsDesign:{kind:"multiplier",source:28,potencyFactor:1.1},EnhancedGibbetGallows:{kind:"adder",source:29,additiveAmount:60},EnhancedReaping:{kind:"adder",source:30,additiveAmount:60},ImmortalSacrifice:{kind:"adder",source:31,additiveAmount:40},Overheated:{kind:"adder",source:32,additiveAmount:20},SurgingTempest:{kind:"multiplier",source:33,potencyFactor:1.1},RagingStrikes:{kind:"multiplier",source:34,potencyFactor:1.15},MagesBallad:{kind:"multiplier",source:36,potencyFactor:1.01},ArmysPaeon:{kind:"critDirect",source:37,critBonus:0,dhBonus:.03},WanderersMinuet:{kind:"critDirect",source:35,critBonus:.02,dhBonus:0},BattleVoice:{kind:"critDirect",source:38,critBonus:0,dhBonus:.2},RadiantFinaleOneCoda:{kind:"multiplier",source:39,potencyFactor:1.02},RadiantFinaleTwoCoda:{kind:"multiplier",source:40,potencyFactor:1.04},RadiantFinaleThreeCoda:{kind:"multiplier",source:41,potencyFactor:1.06},BarrageRefulgent:{kind:"multiplier",source:42,potencyFactor:3},BarrageWideVolley:{kind:"adder",source:42,additiveAmount:80},BarrageShadowbite:{kind:"adder",source:42,additiveAmount:100},NoMercy:{kind:"multiplier",source:43,potencyFactor:1.2},SearingLight:{kind:"multiplier",source:44,potencyFactor:1.05},SmnPet:{kind:"multiplier",source:54,potencyFactor:.8},PowerSurge:{kind:"multiplier",source:45,potencyFactor:1.1},LanceCharge:{kind:"multiplier",source:47,potencyFactor:1.1},LifeOfTheDragon:{kind:"multiplier",source:48,potencyFactor:1.15},BattleLitany:{kind:"critDirect",source:50,critBonus:.1,dhBonus:0},EnhancedPiercingTalon:{kind:"adder",source:46,additiveAmount:150},LifeSurge:{kind:"critDirect",source:49,critBonus:1,dhBonus:0},FightOrFlight:{kind:"multiplier",source:51,potencyFactor:1.25},Zoe:{kind:"multiplier",source:55,potencyFactor:1.5},Soteria:{kind:"multiplier",source:56,potencyFactor:1.7},Krasis:{kind:"multiplier",source:57,potencyFactor:1.2},Autophysis:{kind:"multiplier",source:58,potencyFactor:1.1},Philosophia:{kind:"multiplier",source:59,potencyFactor:1.2},MoonFlute:{kind:"multiplier",source:60,potencyFactor:1.5},Whistle:{kind:"multiplier",source:62,potencyFactor:1.8},Bristle:{kind:"multiplier",source:61,potencyFactor:1.5},TingleA:{kind:"adder",source:63,additiveAmount:100},TingleB:{kind:"adder",source:64,additiveAmount:300},WingedReprobation:{kind:"adder",source:66,additiveAmount:100},WingedRedemption:{kind:"adder",source:67,additiveAmount:220},Darkside:{kind:"multiplier",source:68,potencyFactor:LN},DrkPet:{kind:"multiplier",source:54,potencyFactor:1.05*LN},BunshinST:{kind:"adder",source:69,additiveAmount:160*wm},BunshinAOE:{kind:"adder",source:69,additiveAmount:80*wm},NinPet:{kind:"multiplier",source:54,potencyFactor:wm},Kassatsu:{kind:"multiplier",source:70,potencyFactor:1.3},HollowNozuchi:{kind:"adder",source:71,additiveAmount:70},Kazematoi:{kind:"adder",source:72,additiveAmount:100},Meisui:{kind:"adder",source:73,additiveAmount:150},Dokumori:{kind:"multiplier",source:74,potencyFactor:1.05},TrickAttack:{kind:"multiplier",source:75,potencyFactor:1.1},KunaisBane:{kind:"multiplier",source:76,potencyFactor:1.1},Brotherhood:{kind:"multiplier",source:77,potencyFactor:1.05},RiddleOfFire:{kind:"multiplier",source:78,potencyFactor:1.15},Divination:{kind:"multiplier",source:81,potencyFactor:1.06},NeutralSect:{kind:"multiplier",source:82,potencyFactor:1.2},TheArrow:{kind:"multiplier",source:83,potencyFactor:1.1},Synastry:{kind:"multiplier",source:84,potencyFactor:1.4},AstPet:{kind:"multiplier",source:54,potencyFactor:.98},Confession:{kind:"adder",source:85,additiveAmount:200},Asylum:{kind:"multiplier",source:86,potencyFactor:1.1},Temperance:{kind:"multiplier",source:87,potencyFactor:1.2},WhmPet:{kind:"multiplier",source:54,potencyFactor:.96},HuntersInstinct:{kind:"multiplier",source:89,potencyFactor:1.1},HonedST:{kind:"adder",source:90,additiveAmount:100},HonedAoE:{kind:"adder",source:90,additiveAmount:20},VenomST:{kind:"adder",source:91,additiveAmount:100},VenomAoE:{kind:"adder",source:91,additiveAmount:20},VenomOGCDST:{kind:"adder",source:91,additiveAmount:50},VenomOGCDAoE:{kind:"adder",source:91,additiveAmount:30},Poised:{kind:"adder",source:92,additiveAmount:50},ChainStrat:{kind:"critDirect",source:93,critBonus:.1,dhBonus:0},SchPet:{kind:"multiplier",source:54,potencyFactor:.9},FeyIllum:{kind:"multiplier",source:94,potencyFactor:1.1},Dissipation:{kind:"multiplier",source:95,potencyFactor:1.2},Protraction:{kind:"multiplier",source:96,potencyFactor:1.1}};function JH(e){return{kind:"adder",source:12,additiveAmount:e}}function eU(e){return{kind:"adder",source:53,additiveAmount:e}}function tU(e){return{kind:"adder",source:52,additiveAmount:e}}function $E(e){return{kind:"adder",source:26,additiveAmount:e}}var Ml,wC,GC,BC;class ea{constructor(t){Fe(this,Ml);Z(this,"config");Z(this,"sourceTime");Z(this,"sourceSkill");Z(this,"aspect");Z(this,"description");Z(this,"base");Z(this,"targetCount");Z(this,"falloff");Z(this,"snapshotTime");Z(this,"applicationTime");Z(this,"modifiers",[]);this.config=t.config,this.sourceTime=t.sourceTime,this.sourceSkill=t.sourceSkill,this.aspect=t.aspect,this.base=t.basePotency,this.snapshotTime=t.snapshotTime,this.description=t.description,this.targetCount=t.targetCount,this.falloff=t.falloff}getAmount(t){let n=1,o=0,l=0,r=0,d=!1,h=!1,E=!1;this.modifiers.forEach(T=>{T.source===11?n*=t.tincturePotencyMultiplier:T.source===13?d=!0:T.source===24?h=!0:T.source===14?E=!0:T.kind==="critDirect"?(l+=T.critBonus,r+=T.dhBonus):T.kind==="multiplier"?n*=T.potencyFactor:T.kind==="adder"&&(o+=T.additiveAmount)}),console.assert(!(E&&(d||h)),"skills that can't CDH cannot be auto-crit or auto-CDH"),E&&(d=!1,h=!1),console.assert(!(d&&h),"cannot be both auto-crit and auto-CDH"),t.includePartyBuffs&&this.snapshotTime&&N.game.getPartyBuffs(this.snapshotTime).forEach(T=>{T.kind==="multiplier"?n*=T.potencyFactor:T.kind==="critDirect"&&(l+=T.critBonus,r+=T.dhBonus)});let R=(this.base+o)*pe(this,Ml,BC).call(this,n,E?0:l,E?0:r);if(d?R*=pe(this,Ml,wC).call(this,l,r):h&&(R*=pe(this,Ml,GC).call(this,l,r)),t.includeSplash){const T=1+(1-(this.falloff??1))*(this.targetCount-1);R*=T}return R}getPartyBuffs(){return this.snapshotTime?[...N.game.getPartyBuffs(this.snapshotTime).keys()]:[]}resolve(t){console.assert(this.snapshotTime!==void 0,`${this.sourceSkill} displayed at ${t} did not have snapshotTime`),console.assert(this.applicationTime===void 0,`${this.sourceSkill} displayed at ${t} was already resolved at ${this.applicationTime}`),this.applicationTime=t}hasResolved(){return this.applicationTime!==void 0}hasHitBoss(t){return this.applicationTime!==void 0&&!t(this.applicationTime)}hasSnapshotted(){return this.snapshotTime!==void 0}}Ml=new WeakSet,wC=function(t,n){const o=this.config.level,l=Ot.calculateDamage(o,N.gameConfig.criticalHit,N.gameConfig.directHit,N.gameConfig.determination,1,t,n);return Ot.calculateDamage(o,N.gameConfig.criticalHit,N.gameConfig.directHit,N.gameConfig.determination,1,1+t,1+n)/l},GC=function(t,n){const o=this.config.level,l=Ot.calculateDamage(o,N.gameConfig.criticalHit,N.gameConfig.directHit,N.gameConfig.determination,1,t,n);return Ot.calculateDamage(o,N.gameConfig.criticalHit,N.gameConfig.directHit,N.gameConfig.determination,1,1+t,n)/l},BC=function(t,n,o){const l=this.config.level,r=this.config.criticalHit,d=this.config.directHit,h=this.config.determination,E=Ot.calculateDamage(l,r,d,h,1,0,0);return Ot.calculateDamage(l,r,d,h,t,n,o)/E};var dt=(e=>(e.Red="#f64141",e.Orange="#e89b5f",e.Yellow="#ffd535",e.Green="#50c53d",e.Cyan="#53e5e5",e.Blue="#217ff5",e.Purple="#9755ef",e.Pink="#ee79ee",e.Grey="#6f6f6f",e))(dt||{});const Pt=()=>Hi(O.useContext(Ga)),Hi=e=>e==="Dark"?aU:nU,Cl=(e,t)=>Hi(e)[t],aU={accent:"mediumpurple",jobAccents:{BLM:"#9370db",BLU:"#9370db",PCT:"#e176c2",RDM:"#ff0000",DNC:"#e2b0af",SAM:"#f59542",MCH:"#6ee1d6",WAR:"#b10b0b",RPR:"#965a90",BRD:"#91ba5e",GNB:"#f6b26b",SMN:"#2D9B78",SGE:"#80a0f0"},editingValid:"#ffdc00",editingInvalid:"#ff0000",dropTarget:"#5579f1",realTime:"mediumseagreen",historical:"#ff8c00",fileDownload:"#798c3f",text:"#b0b0b0",emphasis:"#dadada",success:"mediumseagreen",warning:"#ff6224",background:"#1f1f21",tipBackground:"#2a2a2a",bgLowContrast:"#333",bgMediumContrast:"#393939",bgHighContrast:"#626262",timelineEditor:{headerFooter:"#424242",bgAlternateRow:"#282828"},resources:{gcdBar:"#5cab43",lockBar:"#737373",mana:"#62a5d2",manaTick:"#3d5c73",cdhTag:"#d55124",comboTag:"#5c8bad",petTag:"#eb9b5f"},blm:{enochian:"#b69241",astralFire:"#d55124",astralSoul:"#cb8046",umbralIce:"#509bd5",umbralHeart:"#8fced5",paradox:"#d953ee",polyTimer:"#594472",polyStacks:"#b138ee"},blu:{moonflute:"#b69241",whistle:"#b69241",bristle:"#b69241",tinglea:"#217ff5",tingleb:"#217ff5",surpanakha:"#b69241",wingedreprobation:"#ffd535"},pct:{creatureCanvas:"#a948e3",weaponCanvas:"#a53535",landscapeCanvas:"#2e51dd",paletteGauge:"#b69241",holyPaint:"#9bc6dd",cometPaint:"#7e19aa",starryBuff:"#509bd5"},rdm:{whiteMana:"#dddddd",blackMana:"#2a4bf5",manaStack:"#cb8046",emboldenBuff:"#de0202",manaficBuff:"#c169c2",accelBuff:"#f0d1e8"},dnc:{esprit:"#e2b0af",feathers:"#8DA147",emboite:"#bf615c",entrechat:"#3a8db7",jete:"#539350",pirouette:"#b0984e"},sam:{kenki:"#d55124",setsu:"#c7ffff",getsu:"#7987fc",kaSen:"#f8a2a6",meditation:"#ff853d",fugetsu:"#0f52ba",iai:"#89cfef"},mch:{heat:"#D35A10",battery:"#2C9FCB"},rpr:{soulGaugeLow:"#660929",soulGaugeHigh:"#e5004e",shroudGaugeLow:"#03706c",shroudGaugeHigh:"#00fcf3",lemureShroud:"#53ffff",voidShroudLow:"#5c125c",voidShroudHigh:"#ff04ff",deathsDesign:"#ab0009",arcaneCircle:"#ff94fd"},war:{beastGauge:"#ffba00"},brd:{soulVoice:"#5DBD99",pitchPerfect:"#9ac5f1",repertoire:"#e8c35a",wanderersCoda:"#add549",magesCoda:"#ffbcf8",armysCoda:"#eb9b5f",ragingStrikes:"#c04414",barrage:"#e6c65b",battleVoice:"#71bed1",radiantFinale:"#edcce7"},gnb:{},smn:{aetherflow:"#ffd4ff",bahamut:"#2D9B78",phoenix:"#d55124",solar:"#9bc6dd",ruby:"#e5004e",topaz:"#b0984e",emerald:"#539350",searing:"#2D9B78"},drg:{lifeSurge:"#ff6633",lanceCharge:"#d6002d",lifeOfTheDragon:"#0968af",battleLitany:"#33b8e3",powerSurge:"#59ed78",enhancedPiercingTalon:"#f4caa6",firstmindsFocusStacks:"#9926c8",lifeOfTheDragonBar:"#d74936",drgComboTimer:"#3d61ae"},sge:{addersgall:"#80a0f0",addersting:"#9e2dca",zoe:"cyan",autophysis:"lightblue",krasis:"teal",soteria:"green",philosophia:"lightgreen"},pld:{divineMight:"#ff6633",requiescat:"#d6002d",fightOrFlight:"#0968af",pldComboTimer:"#59ed78",ironWillColor:"#d74936",oathGaugeColor:"#3d61ae"},drk:{darkside:"#c000d1",blood:"#8803fc",darkarts:"#ffdf0d",drkComboTimer:"#cb8046",grit:"#82cad9"},nin:{ninComboTimer:"#8532a8",kazematoi:"#ab1fd1",meisui:"#559ef2",ninki:"#8532a8",bunshin:"#ed8021",kassatsu:"#fa9bd4",nozuchi:"#d6a440",dokumori:"#9a0ec4",trick:"#ffd454"},mnk:{opo:"#feabf7",raptor:"#c495fb",coeurl:"#00d9a5",lunar:"#a984f5",solar:"#c6c5c3",riddleOfFire:"#d98d58",brotherhood:"#da4c32",chakra:"#fffea5",extraChakra:"#fe9b28"},whm:{lily:"#d3ffff",blood:"#e08889",pom:"#9788e0",asylum:"#b5e075",confession:"#8df2e8",temperance:"#77f7b7"},ast:{div:"#ffd535",astralCard:"#52d3f7",umbralCard:"#f7b3ff",lord:"#de1200",lady:"#f8facd",neutral:"#354869",synastry:"#578a7e",arrow:"#1690a8"},vpr:{vprComboTimer:"#dea65d",rattlingCoil:"#f64141",serpentOfferings:"#f64141",anguineTribute:"#24e2ff",huntersInstinct:"#9e5a02",swiftscaled:"#ffe20a"},sch:{chain:"#6f6f6f",faerieGauge:"#96ffbd",aetherflow:"#acfff7",seraph:"#44b6fd",feyIllumination:"#2cc7b0",dissipation:"#c4c4c4",protraction:"#77c990",recitation:"#ffce1c"},timeline:{ruler:"#2d2d2d",tracks:"#242424",castBar:"#42364d",lockBar:"#696969",gcdBar:"#354931",invalidBg:"#f25449",llCover:"#5ea647",potCover:"#c4543a",buffCover:"#9370db",damageMark:"#ff0000",healingMark:"#2cda30",aggroMark:"#ff8000",untargetableDamageMark:"#7f7f7f",mpTickMark:"#32525e",warningMark:"#9d7103",lucidTickMark:"#56b3d5",countdown:"rgba(15, 15, 15, 0.4)",markerAlpha:"4f"}},nU={accent:"mediumpurple",jobAccents:{BLM:"#9370db",BLU:"#9370db",PCT:"#f485d6",RDM:"#ff0000",DNC:"#e2b0af",SAM:"#f59542",MCH:"#6ee1d6",WAR:"#b10b0b",RPR:"#965a90",BRD:"#91ba5e",SMN:"#2D9B78",SGE:"#80a0f0"},editingValid:"#ffdc00",editingInvalid:"#ff0000",dropTarget:"#4665ff",realTime:"mediumseagreen",historical:"#ff8c00",fileDownload:"#798c3f",text:"#000000",emphasis:"#000000",success:"mediumseagreen",warning:"#ff4d07",background:"#ffffff",tipBackground:"#ffffff",bgLowContrast:"#efefef",bgMediumContrast:"lightgrey",bgHighContrast:"darkgrey",timelineEditor:{headerFooter:"#cacaca",bgAlternateRow:"#eeeeee"},resources:{gcdBar:"#8edc72",lockBar:"#cbcbcb",mana:"#8ACEEA",manaTick:"#C2EAFF",cdhTag:"#ff6633",comboTag:"#53a7c9",petTag:"#eb9b5f"},blm:{enochian:"#f5cf96",astralFire:"#ff6633",astralSoul:"#ffa641",umbralIce:"#66bbff",umbralHeart:"#95dae3",paradox:"#d953ee",polyTimer:"#d5bbf1",polyStacks:"#b138ee"},blu:{moonflute:"#b69241",whistle:"#b69241",bristle:"#b69241",tinglea:"#217ff5",tingleb:"#217ff5",surpanakha:"#b69241",wingedreprobation:"#ffd535"},pct:{creatureCanvas:"#b854e8",weaponCanvas:"#d54d48",landscapeCanvas:"#4568f6",paletteGauge:"#f5cf96",holyPaint:"#b7c9d5",cometPaint:"#9926c8",starryBuff:"#66bbff"},rdm:{whiteMana:"#fcd8d4",blackMana:"#467aeb",manaStack:"#9926c8",emboldenBuff:"#c91310",manaficBuff:"#530954",accelBuff:"#c973b4"},dnc:{esprit:"#e2b0af",feathers:"#8DA147",emboite:"#bf615c",entrechat:"#3a8db7",jete:"#539350",pirouette:"#b0984e"},sam:{kenki:"#d55124",setsu:"#addede",getsu:"#7987fc",kaSen:"#f8a2a6",meditation:"#ff853d",fugetsu:"#0f52ba",iai:"#89cfef"},mch:{heat:"#D35A10",battery:"#2C9FCB"},rpr:{soulGaugeLow:"#660929",soulGaugeHigh:"#e5004e",shroudGaugeLow:"#03706c",shroudGaugeHigh:"#00fcf3",lemureShroud:"#53ffff",voidShroudLow:"#5c125c",voidShroudHigh:"#ff04ff",deathsDesign:"#ab0009",arcaneCircle:"#ff94fd"},war:{beastGauge:"#e74a3c"},brd:{soulVoice:"#5DBD99",pitchPerfect:"#9ac5f1",repertoire:"#e8c35a",wanderersCoda:"#add549",magesCoda:"#ffbcf8",armysCoda:"#eb9b5f",ragingStrikes:"#c04414",barrage:"#e6c65b",battleVoice:"#71bed1",radiantFinale:"#edcce7"},gnb:{},smn:{aetherflow:"#ffd4ff",bahamut:"#2D9B78",phoenix:"#d55124",solar:"#9bc6dd",ruby:"#e5004e",topaz:"#b0984e",emerald:"#539350",searing:"#2D9B78"},drg:{lifeSurge:"#ff6633",lanceCharge:"#d6002d",lifeOfTheDragon:"#0968af",battleLitany:"#33b8e3",powerSurge:"#59ed78",enhancedPiercingTalon:"#f4caa6",firstmindsFocusStacks:"#9926c8",lifeOfTheDragonBar:"#d74936",drgComboTimer:"#3d61ae"},sge:{addersgall:"#80a0f0",addersting:"#9e2dca",zoe:"cyan",autophysis:"lightblue",krasis:"teal",soteria:"green",philosophia:"lightgreen"},pld:{divineMight:"#ff6633",requiescat:"#d6002d",fightOrFlight:"#0968af",pldComboTimer:"#59ed78",ironWillColor:"#d74936",oathGaugeColor:"#3d61ae"},drk:{darkside:"#c000d1",blood:"#8803fc",darkarts:"#ffdf0d",drkComboTimer:"#cb8046",grit:"#82cad9"},nin:{ninComboTimer:"#8532a8",kazematoi:"#ab1fd1",meisui:"#559ef2",ninki:"#8532a8",bunshin:"#ed8021",kassatsu:"#fa9bd4",nozuchi:"#d6a440",dokumori:"#7e03a3",trick:"#e6b525"},mnk:{opo:"#feabf7",raptor:"#c495fb",coeurl:"#00d9a5",lunar:"#a984f5",solar:"#c6c5c3",riddleOfFire:"#d98d58",brotherhood:"#da4c32",chakra:"#fee11c",extraChakra:"#fe9b28"},whm:{lily:"#a5d0e8",blood:"#ff5454",pom:"#9788e0",asylum:"#b5e075",confession:"#8df2e8",temperance:"#77f7b7"},ast:{div:"#ffd535",astralCard:"#52d3f7",umbralCard:"#f7b3ff",lord:"#de1200",lady:"#d3d672",neutral:"#354869",synastry:"#578a7e",arrow:"#1690a8"},vpr:{vprComboTimer:"#dea65d",rattlingCoil:"#f64141",serpentOfferings:"#f64141",anguineTribute:"#24e2ff",huntersInstinct:"#9e5a02",swiftscaled:"#ffe20a"},sch:{chain:"#6f6f6f",faerieGauge:"#96ffbd",aetherflow:"#79d9d0",seraph:"#3299d9",feyIllumination:"#2cc7b0",dissipation:"#c4c4c4",protraction:"#77c990",recitation:"#ffce1c"},timeline:{ruler:"#e9e9e9",tracks:"#f3f3f3",castBar:"#ecd6f3",lockBar:"#9d9d9d",gcdBar:"#ccefc6",invalidBg:"#c21104",llCover:"#87ec71",potCover:"#ff865c",buffCover:"#9370db",damageMark:"#ff0000",healingMark:"#2cda30",aggroMark:"#ff8000",untargetableDamageMark:"#7f7f7f",mpTickMark:"#b6dfea",warningMark:"#ffbb29",lucidTickMark:"#88cae0",countdown:"rgba(0, 0, 0, 0.1)",markerAlpha:"7f"}};function iU(e){const t=Pt(),n=new Map([[U.AF3,t.blm.astralFire],[U.AF2,t.blm.astralFire],[U.AF1,t.blm.astralFire],[U.UI3,t.blm.umbralIce],[U.UI2,t.blm.umbralIce],[U.UI1,t.blm.umbralIce],[U.ENO,t.blm.enochian],[U.AUTO_CDH,t.resources.cdhTag],[U.STARRY,t.pct.starryBuff],[U.EMBOLDEN_M,t.rdm.emboldenBuff],[U.MANAFIC,t.rdm.manaficBuff],[U.ACCELERATION,t.rdm.accelBuff],[U.STANDARD_SINGLE,t.dnc.jete],[U.STANDARD_DOUBLE,t.dnc.jete],[U.TECHNICAL_SINGLE,t.dnc.esprit],[U.TECHNICAL_DOUBLE,t.dnc.esprit],[U.TECHNICAL_TRIPLE,t.dnc.esprit],[U.TECHNICAL_QUADRUPLE,t.dnc.esprit],[U.DEVILMENT,t.dnc.feathers],[U.OVERHEATED,"#ee79ee"],[U.COMBO,t.resources.comboTag],[U.FUGETSU,t.sam.fugetsu],[U.AUTO_CRIT,t.resources.cdhTag],[U.YATEN,t.pct.cometPaint],[U.POSITIONAL,"#50c53d"],[U.ARCANE_CIRCLE,"#ee79ee"],[U.DEATHSDESIGN,"#f64141"],[U.ENHANCED_GIBBET_GALLOWS,"#217ff5"],[U.ENHANCED_REAPING,"#9755ef"],[U.IMMORTAL_SACRIFICE,"#ee79ee"],[U.SURGING_TEMPEST,"#9755ef"],[U.BARRAGE,t.brd.barrage],[U.RAGING_STRIKES,t.brd.ragingStrikes],[U.BATTLE_VOICE,t.brd.battleVoice],[U.RADIANT_FINALE_THREE_CODA,t.brd.radiantFinale],[U.RADIANT_FINALE_TWO_CODA,t.brd.radiantFinale],[U.RADIANT_FINALE_ONE_CODA,t.brd.radiantFinale],[U.WANDERERS_MINUET,t.brd.wanderersCoda],[U.MAGES_BALLAD,t.brd.magesCoda],[U.ARMYS_PAEON,t.brd.armysCoda],[U.NO_MERCY,t.rdm.blackMana],[U.SEARING_LIGHT,t.smn.searing],[U.LIFE_SURGE,t.drg.lifeSurge],[U.LANCE_CHARGE,t.drg.lanceCharge],[U.LIFE_OF_THE_DRAGON,t.drg.lifeOfTheDragon],[U.BATTLE_LITANY,t.drg.battleLitany],[U.POWER_SURGE,t.drg.powerSurge],[U.ENHANCED_PIERCING_TALON,t.drg.enhancedPiercingTalon],[U.DIVINE_MIGHT,t.pld.divineMight],[U.REQUIESCAT,t.pld.requiescat],[U.FIGHT_OR_FLIGHT,t.pld.fightOrFlight],[U.PET,t.resources.petTag],[U.MOON_FLUTE,t.blu.moonflute],[U.WHISTLE,t.blu.whistle],[U.BRISTLE,t.blu.bristle],[U.TINGLEA,t.blu.tinglea],[U.TINGLEB,t.blu.tingleb],[U.SURPANAKHA,t.blu.surpanakha],[U.WINGED_REDEMPTION,t.blu.wingedreprobation],[U.WINGED_REPROBATION,t.blu.wingedreprobation],[U.DARKSIDE,t.drk.darkside],[U.BUNSHIN,t.nin.bunshin],[U.KASSATSU,t.nin.kassatsu],[U.HOLLOW_NOZUCHI,t.nin.nozuchi],[U.KAZEMATOI,t.nin.kazematoi],[U.MEISUI,t.nin.meisui],[U.DOKUMORI,t.nin.dokumori],[U.TRICK_ATTACK,t.nin.trick],[U.KUNAIS_BANE,t.nin.trick],[U.BROTHERHOOD,t.mnk.brotherhood],[U.RIDDLE_OF_FIRE,t.mnk.riddleOfFire],[U.MNK_BALL,t.mnk.opo],[U.SSS_CHAKRA,t.mnk.chakra],[U.DIVINATION,t.ast.div],[U.HUNTERS_INSTINCT,t.vpr.huntersInstinct],[U.HONED,t.vpr.vprComboTimer],[U.VENOM,t.vpr.vprComboTimer],[U.POISED,t.vpr.vprComboTimer],[U.CHAIN_STRAT,t.sch.chain]]);return console.assert(n.has(e),`modifier ${e} doesn't have a color!`),n.get(e)??t.text}function HN(e){const t=e.colorTheme==="Dark",n=t?u.jsx(QH,{}):u.jsx($H,{}),o=Pt(),l=O.useContext(Ga),r=C({en:t?"Dark Mode":"Light Mode",zh:t?"黑暗模式":"灯光模式"});return u.jsx("div",{title:r,style:{display:"inline-block",cursor:"pointer",borderBottom:e.colorTheme===l?"none":"1px solid "+o.text,borderTop:e.colorTheme===l?"1px solid "+o.text:"none"},onClick:()=>e.setColorTheme(e.colorTheme),children:n})}const FC=()=>{var t;const e=bt("colorTheme");return e==="Light"||e==="Dark"?e:(t=window.matchMedia)!=null&&t.call(window,"(prefers-color-scheme: dark)").matches?"Dark":"Light"},Ga=O.createContext(FC());function oU(e){return u.jsx("div",{style:{display:"inline-block"},children:u.jsxs("div",{style:{display:"inline-block",fontSize:16},children:[u.jsx(HN,{colorTheme:"Light",setColorTheme:e.setColorTheme}),"|",u.jsx(HN,{colorTheme:"Dark",setColorTheme:e.setColorTheme})]})})}class JE{static getJob(t){return ft[t]}static getAction(t){return Pa[t]}static findAction(t){return this.findByName(Pa,t)}static findActionKey(t){return this.findKeyByName(Pa,t)}static getResource(t){return Ge[t]}static findResource(t){return this.findByName(Ge,t)}static findResourceKey(t){return this.findKeyByName(Ge,t)}static getCooldown(t){return Rs[t]}static findCooldown(t){return this.findByName(Rs,t)}static findCooldownKey(t){return this.findKeyByName(Rs,t)}static findByName(t,n){return Object.values(t).find(o=>o.name===n)}static findKeyByName(t,n){const o=Object.entries(t).find(([l,r])=>r.name===n);if(o)return o[0]}}function C(e){const t=ko();return t==="zh"&&e.zh?e.zh:t==="ja"&&e.ja?e.ja:e.en}function lU(e,t){{const[n,o,l]=e.split("/");return`20${l}年${n}月${o}日`}}function xi(e){if(e==="NEVER")return C({en:"unknown skill",zh:"未知技能"}).toString();if(!(e in Pa))return e;const t=JE.getAction(e);return C({en:t.name,...t.label}).toString()}function Ur(e){if(e===void 0)return C({en:"reason unknown",zh:"未知的理由"}).toString();let t="（未知的理由）";return e===Et.Blocked?t="在CD，能力技后摇，或读条税中":e===Et.SecondaryBlocked?t="在次要的CD中":e===Et.NotEnoughMP?t="MP不足":e===Et.NotInCombat?t="不在战斗中（需先等第一次伤害结算）":e===Et.RequirementsNotMet?t="未满足释放条件":e===Et.SkillNotUnlocked?t="Lv比此技能的习得条件低":e===Et.BuffNoLongerAvailable?t="BUFF以结束":e===Et.PastTargetTime?t="跳时间的目标已经过去了":e===Et.CastCanceled?t="咏唱被中断（确定时不再满足播放条件）":e===Et.UnknownSkill?t="未知技能":console.error("unlocalized reason: "+e),C({en:e,zh:t}).toString()}const sU=new Map([[H.LeyLines,"黑魔纹"],[H.Hyperphantasia,"绘灵幻景"],[H.Tincture,"爆发药"],[H.ArcaneCircle,"神秘纹"],[H.ArmysPaeon,"军神的赞美歌歌"],[H.BattleLitany,"战斗连祷"],[H.BattleVoice,"战斗之声"],[H.Brotherhood,"义结金兰"],[H.Card_TheBalance,"太阳神之衡"],[H.Card_TheSpear,"战斗神之枪"],[H.ChainStratagem,"连环计"],[H.Devilment,"进攻之探戈"],[H.Divination,"占卜"],[H.Dokumori,"介毒之术"],[H.Embolden,"鼓励"],[H.MagesBallad,"贤者的叙事谣"],[H.RadiantFinale1,"光明神的最终乐章1"],[H.RadiantFinale2,"光明神的最终乐章2"],[H.RadiantFinale3,"光明神的最终乐章3"],[H.SearingLight,"灼热之光"],[H.StandardFinish,"标准舞步结束"],[H.StarryMuse,"星空构想"],[H.TechnicalFinish,"技巧舞步结束"],[H.WanderersMinuet,"放浪神的小步舞曲"]]),rU=new Map([[H.LeyLines,"黒魔紋"],[H.Tincture,"薬"],[H.ArcaneCircle,"アルケインサークル"],[H.ArmysPaeon,"軍神のパイオン"],[H.BattleLitany,"バトルリタニー"],[H.BattleVoice,"バトルボイス"],[H.Brotherhood,"桃園結義"],[H.Card_TheBalance,"アーゼマの均衡"],[H.Card_TheSpear,"ハルオーネの槍"],[H.ChainStratagem,"連環計"],[H.Devilment,"攻めのタンゴ"],[H.Divination,"ディヴィネーション"],[H.Dokumori,"毒盛の術"],[H.Embolden,"エンボルデン"],[H.MagesBallad,"賢人のバラード"],[H.RadiantFinale1,"光神のフィナーレ1"],[H.RadiantFinale2,"光神のフィナーレ2"],[H.RadiantFinale3,"光神のフィナーレ3"],[H.SearingLight,"シアリングライト"],[H.StandardFinish,"スタンダードフィニッシュ"],[H.StarryMuse,"イマジンスカイ"],[H.TechnicalFinish,"テクニカルフィニッシュ"],[H.WanderersMinuet,"旅神のメヌエット"]]);function zC(e){const t=ko();return t==="zh"?sU.get(e)??e:t==="ja"?rU.get(e)??e:e}function je(e){const t=ko();if(e in Rs){const o=JE.getCooldown(e),l=C({en:o.name,...o.label}).toString();if(t!=="en"&&l===o.name){const r=e.slice(3),d=Object.keys(Pa).find(h=>Pa[h].name===r||h===r);if(d!==void 0)return"CD："+xi(d)}return l}const n=JE.getResource(e);return C({en:n.name,...n.label}).toString()}const UN=new Map([[U.AF3,{en:"AF3",zh:"三层火"}],[U.AF2,{en:"AF2",zh:"二层火"}],[U.AF1,{en:"AF1",zh:"一层火"}],[U.UI3,{en:"UI3",zh:"三层冰"}],[U.UI2,{en:"UI2",zh:"二层冰"}],[U.UI1,{en:"UI1",zh:"一层冰"}],[U.ENO,{en:"enochian",zh:"天语"}],[U.POT,{en:"pot",zh:"爆发药"}],[U.PARTY,{en:"party",zh:"团辅"}],[U.AUTO_CDH,{en:"auto crit/direct hit",zh:"必直暴"}],[U.STARRY,{en:"starry muse",zh:"星空构想"}],[U.EMBOLDEN_M,{en:"embolden",zh:"鼓励"}],[U.MANAFIC,{en:"manafication",zh:"魔元化"}],[U.ACCELERATION,{en:"acceleration",zh:"促进"}],[U.STANDARD_SINGLE,{en:"single standard finish",zh:"单色小舞"}],[U.STANDARD_DOUBLE,{en:"double standard finish",zh:"双色小舞"}],[U.TECHNICAL_SINGLE,{en:"single technical finish",zh:"单色大舞"}],[U.TECHNICAL_DOUBLE,{en:"double technical finish",zh:"双色大舞"}],[U.TECHNICAL_TRIPLE,{en:"triple technical finish",zh:"三色大舞"}],[U.TECHNICAL_QUADRUPLE,{en:"quadruple technical finish",zh:"四色大舞"}],[U.DEVILMENT,{en:"devilment",zh:"探戈"}],[U.OVERHEATED,{en:"overheated",zh:"过热"}],[U.COMBO,{en:"combo",zh:"连击"}],[U.FUGETSU,{en:"fugetsu",zh:"风月"}],[U.AUTO_CRIT,{en:"auto crit",zh:"必暴"}],[U.YATEN,{en:"yaten",zh:"强化夜天"}],[U.POSITIONAL,{en:"positional",zh:"身位"}],[U.ARCANE_CIRCLE,{en:"arcane circle",zh:"神秘环"}],[U.DEATHSDESIGN,{en:"death's design",zh:"死亡烙印"}],[U.ENHANCED_GIBBET_GALLOWS,{en:"enhanced gibbet/gallows",zh:"绞决/缢杀效果提高"}],[U.ENHANCED_REAPING,{en:"enhanced reaping",zh:"虚无/交错收割效果提高"}],[U.IMMORTAL_SACRIFICE,{en:"immortal sacrifice"}],[U.BARRAGE,{en:"barrage"}],[U.RAGING_STRIKES,{en:"raging strikes"}],[U.BATTLE_VOICE,{en:"battle voice"}],[U.RADIANT_FINALE_THREE_CODA,{en:"three coda radiant finale"}],[U.RADIANT_FINALE_TWO_CODA,{en:"two coda radiant finale"}],[U.RADIANT_FINALE_ONE_CODA,{en:"one coda radiant finale"}],[U.WANDERERS_MINUET,{en:"wanderer's minuet"}],[U.MAGES_BALLAD,{en:"mage's ballad"}],[U.ARMYS_PAEON,{en:"army's paeon"}],[U.NO_MERCY,{en:"no mercy",zh:"无情"}],[U.SEARING_LIGHT,{en:"searing light",zh:"灼热之光"}],[U.SURGING_TEMPEST,{en:"surging tempest",zh:"战场风暴"}],[U.POWER_SURGE,{en:"power surge"}],[U.LANCE_CHARGE,{en:"lance charge"}],[U.ENHANCED_PIERCING_TALON,{en:"enhanced piercing talon"}],[U.LIFE_OF_THE_DRAGON,{en:"life of the dragon"}],[U.LIFE_SURGE,{en:"life surge"}],[U.PET,{en:"pet modifier",zh:"召唤物加成"}],[U.DIVINE_MIGHT,{en:"divine might",zh:"神圣魔法效果提高"}],[U.REQUIESCAT,{en:"requiescat",zh:"安魂祈祷"}],[U.FIGHT_OR_FLIGHT,{en:"fight or flight",zh:"战逃反应"}],[U.WHISTLE,{en:"WH",zh:"口笛"}],[U.BRISTLE,{en:"BR",zh:"蓄力"}],[U.MOON_FLUTE,{en:"MF",zh:"月笛"}],[U.TINGLEA,{en:"TING",zh:"哔哩哔哩"}],[U.TINGLEB,{en:"TING",zh:"哔哩哔哩"}],[U.WINGED_REPROBATION,{en:"WREP",zh:"断罪飞翔"}],[U.WINGED_REDEMPTION,{en:"WRED",zh:"完美神的祝福"}],[U.DARKSIDE,{en:"darkside",zh:"暗黑"}],[U.BUNSHIN,{en:"bunshin",zh:"分身之术"}],[U.KASSATSU,{en:"kassatsu",zh:"生杀予夺"}],[U.HOLLOW_NOZUCHI,{en:"hollow nozuchi",zh:"幻影野槌"}],[U.KAZEMATOI,{en:"kazematoi",zh:"风缠"}],[U.MEISUI,{en:"meisui",zh:"命水"}],[U.DOKUMORI,{en:"dokumori",zh:"介毒之术"}],[U.TRICK_ATTACK,{en:"trick attack",zh:"攻其不备"}],[U.KUNAIS_BANE,{en:"kunai's bane",zh:"百雷铳"}],[U.BROTHERHOOD,{en:"brotherhood",zh:"义结金兰"}],[U.RIDDLE_OF_FIRE,{en:"riddle of fire",zh:"红莲极意"}],[U.MNK_BALL,{en:"ball",zh:"功力"}],[U.SSS_CHAKRA,{en:"chakra",zh:"斗气"}],[U.DIVINATION,{en:"divination",zh:"占卜"}],[U.HUNTERS_INSTINCT,{en:"hunter's instinct",zh:"猛袭"}],[U.HONED,{en:"honed"}],[U.VENOM,{en:"venom"}],[U.POISED,{en:"poised"}],[U.CHAIN_STRAT,{en:"chain stratagem",zh:"连环计"}]]);function kN(e){return console.assert(UN.has(e),`modifier ${e} doesn't have a name!`),C(UN.get(e)??{en:"unknown"})}const xN=new Map([[U.AF3,{en:"AF3",zh:"三层火"}],[U.AF2,{en:"AF2",zh:"二层火"}],[U.AF1,{en:"AF1",zh:"一层火"}],[U.UI3,{en:"UI3",zh:"三层冰"}],[U.UI2,{en:"UI2",zh:"二层冰"}],[U.UI1,{en:"UI1",zh:"一层冰"}],[U.ENO,{en:"ENO",zh:"天语"}],[U.POT,{en:"pot",zh:"爆发药"}],[U.PARTY,{en:"party",zh:"团辅"}],[U.AUTO_CDH,{en:"CDH",zh:"必直暴"}],[U.STARRY,{en:"STARRY",zh:"星空"}],[U.EMBOLDEN_M,{en:"MB",zh:"鼓励"}],[U.MANAFIC,{en:"MF",zh:"魔元化"}],[U.ACCELERATION,{en:"ACC",zh:"促进"}],[U.STANDARD_SINGLE,{en:"SSF",zh:"单色小舞"}],[U.STANDARD_DOUBLE,{en:"DSF",zh:"双色小舞"}],[U.TECHNICAL_SINGLE,{en:"STF",zh:"单色大舞"}],[U.TECHNICAL_DOUBLE,{en:"DTF",zh:"双色大舞"}],[U.TECHNICAL_TRIPLE,{en:"TTF",zh:"三色大舞"}],[U.TECHNICAL_QUADRUPLE,{en:"QTF",zh:"四色大舞"}],[U.DEVILMENT,{en:"DEV",zh:"探戈"}],[U.OVERHEATED,{en:"OVERHEATED",zh:"过热"}],[U.COMBO,{en:"CMB",zh:"连击"}],[U.FUGETSU,{en:"FGS",zh:"风月"}],[U.AUTO_CRIT,{en:"CRIT",zh:"必暴"}],[U.YATEN,{en:"ENH",zh:"强化夜天"}],[U.POSITIONAL,{en:"PS",zh:"身位"}],[U.ARCANE_CIRCLE,{en:"AC",zh:"神秘环"}],[U.DEATHSDESIGN,{en:"DD",zh:"死亡烙印"}],[U.ENHANCED_GIBBET_GALLOWS,{en:"E. GIB/GAL",zh:"绞决/缢杀↑"}],[U.ENHANCED_REAPING,{en:"E. REAPING",zh:"虚无/交错收割↑"}],[U.IMMORTAL_SACRIFICE,{en:"IMMORTAL SAC",zh:"死亡祭品"}],[U.BARRAGE,{en:"BRG"}],[U.RAGING_STRIKES,{en:"RS"}],[U.BATTLE_VOICE,{en:"BV"}],[U.RADIANT_FINALE_THREE_CODA,{en:"RF3"}],[U.RADIANT_FINALE_TWO_CODA,{en:"RF2"}],[U.RADIANT_FINALE_ONE_CODA,{en:"RF1"}],[U.WANDERERS_MINUET,{en:"WM"}],[U.MAGES_BALLAD,{en:"MB"}],[U.ARMYS_PAEON,{en:"AP"}],[U.NO_MERCY,{en:"NM",zh:"无情"}],[U.SEARING_LIGHT,{en:"SL",zh:"灼热"}],[U.SURGING_TEMPEST,{en:"SURGING",zh:"战场风暴"}],[U.POWER_SURGE,{en:"PWS"}],[U.LANCE_CHARGE,{en:"LC"}],[U.LIFE_OF_THE_DRAGON,{en:"LIFE"}],[U.ENHANCED_PIERCING_TALON,{en:"ENH"}],[U.LIFE_SURGE,{en:"LS"}],[U.BATTLE_LITANY,{en:"BL"}],[U.DIVINE_MIGHT,{en:"DM",zh:"强化圣灵"}],[U.REQUIESCAT,{en:"REQ",zh:"安魂"}],[U.FIGHT_OR_FLIGHT,{en:"FOF",zh:"战逃"}],[U.PET,{en:"PET",zh:"召唤物"}],[U.WHISTLE,{en:"WH",zh:"口笛"}],[U.BRISTLE,{en:"BR",zh:"蓄力"}],[U.MOON_FLUTE,{en:"MF",zh:"月笛"}],[U.TINGLEA,{en:"TING",zh:"哔哩哔哩"}],[U.TINGLEB,{en:"TING",zh:"哔哩哔哩"}],[U.WINGED_REPROBATION,{en:"WREP",zh:"断罪飞翔"}],[U.WINGED_REDEMPTION,{en:"WRED",zh:"完美神的祝福"}],[U.DARKSIDE,{en:"DS",zh:"暗黑"}],[U.BUNSHIN,{en:"BUN",zh:"分身之术"}],[U.KASSATSU,{en:"KASS",zh:"生杀予夺"}],[U.HOLLOW_NOZUCHI,{en:"NOZ",zh:"幻影野槌"}],[U.KAZEMATOI,{en:"KAZ",zh:"风缠"}],[U.MEISUI,{en:"MEI",zh:"命水"}],[U.DOKUMORI,{en:"DOKU",zh:"介毒之术"}],[U.TRICK_ATTACK,{en:"TRICK",zh:"攻其不备"}],[U.KUNAIS_BANE,{en:"KB",zh:"百雷铳"}],[U.BROTHERHOOD,{en:"BH",zh:"义结金兰"}],[U.RIDDLE_OF_FIRE,{en:"ROF",zh:"红莲极意"}],[U.MNK_BALL,{en:"BALL",zh:"功力"}],[U.SSS_CHAKRA,{en:"CHAKRA",zh:"斗气"}],[U.DIVINATION,{en:"DIV",zh:"占卜"}],[U.HUNTERS_INSTINCT,{en:"HI",zh:"猛袭"}],[U.HONED,{en:"HONED"}],[U.VENOM,{en:"VENOM"}],[U.POISED,{en:"POISED"}],[U.CHAIN_STRAT,{en:"CHAIN",zh:"连环计"}]]);function cU(e){return console.assert(xN.has(e),`modifier ${e} doesn't have a tag name!`),C(xN.get(e)??{en:"unknown"})}let ko=()=>"en";function PN(e){let t="English";e.lang==="zh"&&(t="中文"),e.lang==="ja"&&(t="日本語");const n=Pt();return u.jsx("div",{style:{display:"inline-block",cursor:"pointer",textDecoration:e.lang===ko()?"none":"underline",borderTop:e.lang===ko()?"1px solid "+n.text:"none"},onClick:()=>{e.setCurrentLanguage(e.lang)},children:t})}function uU(){const e=bt("language"),t=e==="zh"||e==="ja"?e:"en",[n,o]=O.useState(t),l=r=>{o(r),It("language",r)};return O.useEffect(()=>(ko=()=>n,()=>{ko=()=>"en"})),O.useEffect(()=>{N.updateAllDisplay()},[n]),u.jsxs("div",{style:{display:"inline-block"},children:[u.jsx("span",{style:{display:"inline-block",fontSize:17,position:"relative",marginRight:2},children:u.jsx(ZH,{})}),u.jsxs("div",{style:{display:"inline-block",fontSize:14,verticalAlign:"top"},children:[u.jsx(PN,{lang:"en",setCurrentLanguage:l}),"|",u.jsx(PN,{lang:"zh",setCurrentLanguage:l})]})]})}const jC=ae()({UNIMPLEMENTED:{},OUTDATED:{label:{en:"Outdated",zh:"待更新"},warningContent:{en:"WARNING: This job recently had significant changes, and may not have been fully updated to reflect them. Exported plans may not load correctly following these changes, so be cautious about relying on them until the job has been fully updated.",zh:"警告：此职业最近经历的技改还未被完整实现到排轴器中。当前排轴器的此职业可能有bug，或在近期经历更新，所以暂时不要太依赖txt，记得勤在别处保存排轴进度。"}},TESTING:{label:{en:"Testing",zh:"测试中"},warningContent:{en:"WARNING: This job was recently added to XIV in the Shell and is still being tested. There may be bugs or changes in the near future, so make sure to frequently export and save timelines for this job to make sure you don't lose your work.",zh:"警告：此职业刚被实现没多久，可能还不是很稳定，目前暂时不要太依赖txt文件，记得勤在别处保存进度。"}},LIVE:{}});ae()({TANK:{label:C({en:"Tank"})},HEALER:{label:C({en:"Healer"})},MELEE:{label:C({en:"Melee"})},RANGED:{label:C({en:"Ranged"})},CASTER:{label:C({en:"Caster"})},LIMITED:{label:C({en:"Limited"})}});const YC=ae()({PLD:{role:"TANK",implementationLevel:"TESTING",usesMp:!0,limitBreak:"LAST_BASTION",limitBreakBuff:"LAST_BASTION"},WAR:{role:"TANK",implementationLevel:"LIVE",limitBreak:"LAND_WAKER",limitBreakBuff:"LAND_WAKER"},DRK:{role:"TANK",implementationLevel:"LIVE",usesMp:!0,limitBreak:"DARK_FORCE",limitBreakBuff:"DARK_FORCE"},GNB:{role:"TANK",implementationLevel:"LIVE",limitBreak:"GUNMETAL_SOUL",limitBreakBuff:"GUNMETAL_SOUL"}}),bT=ae()({WHM:{role:"HEALER",implementationLevel:"TESTING",usesMp:!0,limitBreak:"PULSE_OF_LIFE"},SCH:{role:"HEALER",implementationLevel:"TESTING",usesMp:!0,limitBreak:"ANGEL_FEATHERS"},AST:{role:"HEALER",implementationLevel:"TESTING",usesMp:!0,limitBreak:"ASTRAL_STASIS"},SGE:{role:"HEALER",implementationLevel:"TESTING",usesMp:!0,limitBreak:"TECHNE_MAKRE"}}),KC=ae()({MNK:{role:"MELEE",implementationLevel:"LIVE",limitBreak:"FINAL_HEAVEN"},DRG:{role:"MELEE",implementationLevel:"LIVE",limitBreak:"DRAGONSONG_DIVE"},NIN:{role:"MELEE",implementationLevel:"LIVE",limitBreak:"CHIMATSURI"},SAM:{role:"MELEE",implementationLevel:"LIVE",limitBreak:"DOOM_OF_THE_LIVING"},RPR:{role:"MELEE",implementationLevel:"LIVE",limitBreak:"THE_END"},VPR:{role:"MELEE",implementationLevel:"LIVE",limitBreak:"WORLD_SWALLOWER"}}),VC=ae()({BRD:{role:"RANGED",implementationLevel:"LIVE",limitBreak:"SAGITTARIUS_ARROW"},MCH:{role:"RANGED",implementationLevel:"LIVE",limitBreak:"SATELLITE_BEAM"},DNC:{role:"RANGED",implementationLevel:"LIVE",limitBreak:"CRIMSON_LOTUS"}}),WC=ae()({BLM:{role:"CASTER",implementationLevel:"LIVE",usesMp:!0,limitBreak:"METEOR"},SMN:{role:"CASTER",implementationLevel:"LIVE",usesMp:!0,limitBreak:"TERAFLARE"},RDM:{role:"CASTER",implementationLevel:"LIVE",usesMp:!0,limitBreak:"VERMILLION_SCOURGE"},PCT:{role:"CASTER",implementationLevel:"LIVE",usesMp:!0,limitBreak:"CHROMATIC_FANTASY"}}),XC=ae()({BLU:{role:"LIMITED",implementationLevel:"TESTING",usesMp:!0}}),ft={...YC,...bT,...KC,...VC,...WC,...XC,...ae()({NEVER:{role:"LIMITED",implementationLevel:"UNIMPLEMENTED",usesMp:!1}})},Is=Object.keys(ft),Tn=Object.keys(YC),Ri=Object.keys(bT),cn=Object.keys(KC),Ll=Object.keys(VC),Ti=Object.keys(WC),rc=Object.keys(XC);var hn=(e=>(e[e.ManaGain=0]="ManaGain",e[e.MpTick=1]="MpTick",e[e.LucidTick=2]="LucidTick",e[e.MeditateTick=3]="MeditateTick",e[e.AutoTick=4]="AutoTick",e))(hn||{}),ds;class be{constructor(t,n,o){Z(this,"name");Fe(this,ds);Z(this,"timeTillEvent");Z(this,"delay");Z(this,"effectFn");Z(this,"canceled");this.name=t,Me(this,ds,[]),this.timeTillEvent=n,this.delay=n,this.effectFn=o,this.canceled=!1}hasTag(t){for(let n=0;n<ie(this,ds).length;n++)if(t===ie(this,ds)[n])return!0;return!1}addTag(t){this.hasTag(t)||ie(this,ds).push(t)}}ds=new WeakMap;class qC{constructor(t,n){Z(this,"maxValue");Z(this,"currentValue");this.maxValue=t,this.currentValue=n}availableAmount(){return this.currentValue}consume(t){this.currentValue<t-Sa.epsilon&&console.warn(`invalid resource consumption: ${this.type}, ${this.currentValue} - ${t}`),this.currentValue=Math.max(this.currentValue-t,0)}gain(t){this.currentValue=Math.min(this.currentValue+t,this.maxValue)}overrideCurrentValue(t){(t<0||t>this.maxValue)&&console.warn(`invalid resource value override: ${this.type}, ${t} should be in [0, ${this.maxValue}]`),this.currentValue=t}}var Pu;class sn extends qC{constructor(n,o,l,r=!1){super(o,l);Z(this,"type");Z(this,"enabled");Z(this,"warnOnOvercap");Z(this,"pendingChange");Fe(this,Pu);this.type=n,this.enabled=!0,this.warnOnOvercap=r}available(n){return this.availableAmount()+Sa.epsilon>=n}availableAmountIncludingDisabled(){return this.currentValue}availableAmount(){return this.enabled?super.availableAmount():0}gain(n){this.warnOnOvercap&&this.currentValue+n>this.maxValue&&N.reportWarning({kind:"overcap",rsc:this.type}),super.gain(n)}gainWrapping(n){this.currentValue=(this.currentValue+n)%(this.maxValue+1)}overrideTimer(n,o){this.pendingChange?(n.addEvent(new be("override "+this.pendingChange.name+" timer: "+o,0,()=>{this.pendingChange&&(this.pendingChange.timeTillEvent=o)})),this.pendingChange.timeTillEvent=o):console.error(`Failed to override non-pending resource timer for resource: ${this.type}`)}removeTimer(){this.pendingChange&&(this.pendingChange.canceled=!0,this.pendingChange=void 0)}getLastExpirationTime(){return ie(this,Pu)}consume(n){super.consume(n),this.currentValue===0&&Me(this,Pu,N.game.getDisplayTime())}}Pu=new WeakMap;var Fr,ml,pi;class ke extends qC{constructor(n,o,l,r){super(l,r);Z(this,"type");Fe(this,Fr);Fe(this,ml);Fe(this,pi);this.type=n,Me(this,Fr,o),Me(this,ml,o),Me(this,pi,0)}currentStackCd(){return ie(this,ml)}maxStacks(){return this.maxValue}useStack(){this.stacksAvailable()===this.maxStacks()&&Me(this,pi,ie(this,ml)),super.consume(1)}useStackWithRecast(n){console.assert(this.maxStacks()===1,"class CoolDown assumes special recasts are only available for skills with at most 1 stack"),Me(this,ml,n),this.useStack()}restore(n){for(;n>0&&super.availableAmount()<this.maxStacks();){const o=Math.min(ie(this,pi),n);Me(this,pi,ie(this,pi)-o),ie(this,pi)<Sa.epsilon&&(super.gain(1),Me(this,ml,ie(this,Fr)),this.stacksAvailable()<this.maxStacks()&&Me(this,pi,ie(this,pi)+ie(this,Fr))),n-=o}}timeTillNextStackAvailable(){return ie(this,pi)}overrideTimeTillNextStack(n){Me(this,pi,n)}stacksAvailable(){return super.availableAmount()}}Fr=new WeakMap,ml=new WeakMap,pi=new WeakMap;var Rl;class dU{constructor(t){Z(this,"game");Fe(this,Rl);this.game=t,Me(this,Rl,new Map)}forEach(t){ie(this,Rl).forEach(t)}get(t){const n=ie(this,Rl).get(t);return n||(console.assert(!1,`no cooldown for resource ${t}`),new ke("NEVER",0,0,0))}set(t){ie(this,Rl).set(t.type,t)}tick(t){for(const n of ie(this,Rl).values())n.restore(t)}timeTillNextStackAvailable(t){return this.get(t).timeTillNextStackAvailable()}timeTillAnyStackAvailable(t){const n=this.get(t);return n.stacksAvailable()>0?0:n.timeTillNextStackAvailable()}}Rl=new WeakMap;var zr;class EU{constructor(t){Z(this,"game");Fe(this,zr);this.game=t,Me(this,zr,new Map)}get(t){const n=ie(this,zr).get(t);return n||(console.error(`could not find resource ${t}`),new sn("NEVER",0,0))}set(t){ie(this,zr).set(t.type,t)}timeTillReady(t){const n=this.get(t);return n.pendingChange?n.pendingChange.timeTillEvent:0}addResourceEvent(t){const n=this.get(t.rscType),o=new be(t.name,t.delay,()=>{n.pendingChange=void 0,t.fnOnRsc(n)});n.pendingChange=o,t.tags&&t.tags.forEach(l=>{o.addTag(l)}),this.game.addEvent(o)}takeResourceLock(t,n){this.get(t).consume(1),this.addResourceEvent({rscType:t,name:"[resource ready] "+t,delay:n,fnOnRsc:o=>{o.gain(1)}})}}zr=new WeakMap;const eh=new Map,ZC=new Map,QC=new Map,$C=new Map;function wN(e){return ZC.get(e.toLowerCase())??QC.get(e)??$C.get(e)}function Kt(e,t){const n=eh.get(e);return n.has(t)||console.error(`no resource info found for ${t}`),n.get(t)}function $i(e){return eh.has(e)||console.error("could not find resources for job "+e),eh.get(e)}function Ye(e,t,n,o){$i(e).set(t,{isCoolDown:!1,defaultValue:o.default??0,maxValue:n,maxTimeout:o.timeout??-1,warnOnOvercap:o.warnOnOvercap??!1,warnOnTimeout:o.warnOnTimeout??!1});const l=Ge[t].label;ZC.set(Ge[t].name.toLowerCase(),t),(l==null?void 0:l.zh)!==void 0&&QC.set(l.zh,t),(l==null?void 0:l.ja)!==void 0&&$C.set(l.ja,t)}Is.forEach(e=>{eh.set(e,new Map([["cd_GCD",{isCoolDown:!0,maxStacks:1,cdPerStack:2.5}]])),Ye(e,"IN_COMBAT",1,{default:0}),Ye(e,"MANA",1e4,{default:1e4}),Ye(e,"TINCTURE",1,{timeout:30}),Ye(e,"SPRINT",1,{timeout:10}),Ye(e,"PARTY_SIZE",8,{default:8}),Ye(e,"AUTOS_ENGAGED",1,{default:0}),Ye(e,"STORED_AUTO",1,{default:0})});cn.forEach(e=>{Ye(e,"REAR_POSITIONAL",1,{default:1}),Ye(e,"FLANK_POSITIONAL",1,{default:1})});function Du(e,t,n,o=1){$i(e).set(t,{isCoolDown:!0,cdPerStack:n,maxStacks:o})}class DT{constructor(t){Z(this,"type");Z(this,"timeTillFullOrDrop");Z(this,"stacks");Z(this,"effectOrTimerEnabled");this.type=t.type,this.timeTillFullOrDrop=t.timeTillFullOrDrop,this.stacks=t.stacks,this.effectOrTimerEnabled=t.effectOrTimerEnabled}equals(t){return this.type===t.type&&this.timeTillFullOrDrop===t.timeTillFullOrDrop&&this.stacks===t.stacks&&this.effectOrTimerEnabled===t.effectOrTimerEnabled}static fromGameState(t){const n=[];return t.cooldowns.forEach((o,l)=>{o.availableAmount(),n.push(new DT({type:l,timeTillFullOrDrop:o.maxValue-o.availableAmount(),stacks:0,effectOrTimerEnabled:!0}))}),n}applyTo(t){const n=$i(t.job).get(this.type);if(!n){console.assert(!1,`can't apply override ${this.type} to job ${t.job}`);return}if(n.isCoolDown){const o=t.cooldowns.get(this.type),l=o.maxStacks()*o.currentStackCd()-this.timeTillFullOrDrop,r=Math.floor((l+Sa.epsilon)/o.currentStackCd()),d=this.timeTillFullOrDrop%o.currentStackCd();o.overrideCurrentValue(r),o.overrideTimeTillNextStack(d)}else{const o=t.resources.get(this.type),l=r=>{o.removeTimer(),t.resources.addResourceEvent({rscType:o.type,name:"drop "+o.type,delay:r,fnOnRsc:d=>{o.type==="ENOCHIAN"?t.loseEnochian():d.consume(d.availableAmount())}})};if(o.type==="LEY_LINES")o.consume(o.availableAmount()),o.gain(1),l(this.timeTillFullOrDrop),o.enabled=this.effectOrTimerEnabled;else if(o.type==="POLYGLOT"){const r=this.stacks;o.consume(o.availableAmount()),o.gain(r);const d=this.timeTillFullOrDrop;d>0&&o.overrideTimer(t,d)}else{const r=this.stacks;o.consume(o.availableAmount()),o.gain(r);const d=this.timeTillFullOrDrop;r>0&&n.maxTimeout>=0&&l(d)}}}serialized(){return{type:this.type,timeTillFullOrDrop:this.timeTillFullOrDrop,stacks:this.stacks,effectOrTimerEnabled:this.effectOrTimerEnabled}}}const Vt=.8,Sn=.01;function yu(e,t){}function Ue(e,...t){return(n,o)=>{e!==void 0&&e(n,o);for(const l of t)l!==void 0&&l(n,o)}}function ju(e,...t){return n=>(e===void 0||e(n))&&t.every(o=>o===void 0||o(n))}const _s=new Map,yT=new Map;Is.forEach(e=>{_s.set(e,new Map),yT.set(e,new Map)});const th=new Map,Uh="General/Missing.png",GN=new Set,IR=new Map,JC=new Map,e0=new Map,BN=new Map([["Lightning Shock","Lightning Shot"],["Wanderer's Minuet","The Wanderer's Minuet"],["Apex Arow","Apex Arrow"]]);function vT(e){return BN.has(e)&&(e=BN.get(e)),e=e.toLowerCase(),!IR.has(e)&&!GN.has(e)&&(console.error(`could not find skill with name: ${e}`),GN.add(e)),IR.get(e)}function hU(e){return e in Ge?e:JE.findResourceKey(e)}function Sl(e,t){return _s.get(e).get(t)}function t0(e){return th.get(e)??Uh}function fU(e,t){return _s.get(e).has(t)}function kh(e,t,n){_s.get(e).set(t,n),yT.get(e).set(Pa[t].discordEmote??Pa[t].name.replaceAll(" ",""),t),IR.set(Pa[t].name.toLowerCase(),t);const o=Pa[t].label;(o==null?void 0:o.zh)!==void 0&&JC.set(o.zh,t),(o==null?void 0:o.ja)!==void 0&&e0.set(o.ja,t),th.set(t,n.assetPath)}function An(e,t){return e===void 0?n=>t||0:typeof e=="number"?n=>e:e}function AU(e){return console.assert(e.length>0,`invalid trait potency array: ${e}`),t=>{let n;const o=t.config.level;for(const[l,r]of e)t.hasTraitUnlocked(l)&&(n=r);return console.assert(n!==void 0,`no applicable potency at level ${o} found in array ${e}`),n||0}}function aa(e,t){return(Array.isArray(t)?AU(t):An(t,0))(e)}function MT(e,t){const n=Pa[t].name;return`${e}/${n.replace(":","")}.png`}function Qn(e,t,n,o){Array.isArray(e)||(e=[e]);const l=Ue((E,A)=>A.applicationTime=E.time,o.onApplication),r=Ue(E=>E.maybeCancelChanneledSkills(t),o.onExecute),d=E=>{const A=[];return o.potency&&(o.combo||o.positional)&&A.push(...E.computeComboAndPositionalModifiers(aa(E,o.potency),o.combo,o.positional)),o.jobPotencyModifiers&&A.push(...o.jobPotencyModifiers(E)),A},h={kind:"spell",name:t,assetPath:o.assetPath??(e.length===1?MT(e[0],t):Uh),unlockLevel:n,autoUpgrade:o.autoUpgrade,autoDowngrade:o.autoDowngrade,cdName:"cd_GCD",secondaryCd:o.secondaryCooldown,aspect:o.aspect??Ie.Other,replaceIf:o.replaceIf??[],startOnHotbar:o.startOnHotbar??!0,highlightIf:o.highlightIf??(E=>!1),castTimeFn:An(o.castTime,0),recastTimeFn:An(o.recastTime,2.5),animationLockFn:E=>An(o.animationLock,E.config.animationLock)(E),manaCostFn:An(o.manaCost,0),potencyFn:E=>aa(E,o.potency),jobPotencyModifiers:d,drawsAggro:o.drawsAggro??!1,falloff:o.falloff,healingPotencyFn:E=>aa(E,o.healingPotency),jobHealingPotencyModifiers:o.jobHealingPotencyModifiers??(E=>[]),aoeHeal:o.aoeHeal??!1,validateAttempt:o.validateAttempt??(E=>!0),isInstantFn:o.isInstantFn??(E=>!1),onExecute:r,onConfirm:o.onConfirm??yu,onApplication:l,applicationDelay:o.applicationDelay??0,startsAuto:o.startsAuto??!1};if(e.forEach(E=>kh(E,h.name,h)),o.secondaryCooldown!==void 0){const{cdName:E,cooldown:A,maxCharges:R}=o.secondaryCooldown;e.forEach(T=>Du(T,E,A,R))}return h}function na(e,t,n,o){Array.isArray(e)||(e=[e]);const l=Ue((E,A)=>A.applicationTime=E.time,o.onApplication),r=Ue(E=>E.maybeCancelChanneledSkills(t),o.onExecute),d=E=>{const A=[];return o.potency&&(o.combo||o.positional)&&A.push(...E.computeComboAndPositionalModifiers(aa(E,o.potency),o.combo,o.positional)),o.jobPotencyModifiers&&A.push(...o.jobPotencyModifiers(E)),A},h={kind:"weaponskill",name:t,assetPath:o.assetPath??(e.length===1?MT(e[0],t):Uh),unlockLevel:n,autoUpgrade:o.autoUpgrade,autoDowngrade:o.autoDowngrade,cdName:"cd_GCD",secondaryCd:o.secondaryCooldown,aspect:o.aspect??Ie.Other,replaceIf:o.replaceIf??[],startOnHotbar:o.startOnHotbar??!0,highlightIf:o.highlightIf??(E=>!1),castTimeFn:An(o.castTime,0),recastTimeFn:An(o.recastTime,2.5),animationLockFn:E=>An(o.animationLock,E.config.animationLock)(E),manaCostFn:An(o.manaCost,0),potencyFn:E=>aa(E,o.potency),jobPotencyModifiers:d,drawsAggro:o.drawsAggro??!1,falloff:o.falloff,healingPotencyFn:E=>aa(E,o.healingPotency),jobHealingPotencyModifiers:o.jobHealingPotencyModifiers??(E=>[]),aoeHeal:o.aoeHeal??!1,validateAttempt:o.validateAttempt??(E=>!0),isInstantFn:o.isInstantFn??(E=>!0),onExecute:r,onConfirm:o.onConfirm??yu,onApplication:l,applicationDelay:o.applicationDelay??0,startsAuto:o.startsAuto??!0};if(e.forEach(E=>kh(E,h.name,h)),o.secondaryCooldown!==void 0){const{cdName:E,cooldown:A,maxCharges:R}=o.secondaryCooldown;e.forEach(T=>Du(T,E,A,R))}return h}function ot(e,t,n,o,l){Array.isArray(e)||(e=[e]);const r=Ue((A,R)=>R.applicationTime=A.time,l.onApplication),d=Ue(A=>A.maybeCancelChanneledSkills(t),l.onExecute),h=ju(A=>l.requiresCombat?A.isInCombat():!0,l.validateAttempt??(A=>!0)),E={kind:"ability",name:t,assetPath:l.assetPath??(e.length===1?MT(e[0],t):Uh),requiresCombat:l.requiresCombat,unlockLevel:n,autoUpgrade:l.autoUpgrade,autoDowngrade:l.autoDowngrade,cdName:o,secondaryCd:l.secondaryCooldown,aspect:l.aspect??Ie.Other,replaceIf:l.replaceIf??[],startOnHotbar:l.startOnHotbar??!0,highlightIf:l.highlightIf??(A=>!1),animationLockFn:A=>An(l.animationLock,A.config.animationLock)(A),manaCostFn:An(l.manaCost,0),potencyFn:A=>aa(A,l.potency),jobPotencyModifiers:l.jobPotencyModifiers??(A=>[]),drawsAggro:l.drawsAggro??!1,falloff:l.falloff,healingPotencyFn:A=>aa(A,l.healingPotency),jobHealingPotencyModifiers:l.jobHealingPotencyModifiers??(A=>[]),aoeHeal:l.aoeHeal??!1,applicationDelay:l.applicationDelay??0,validateAttempt:h,onExecute:d,onConfirm:l.onConfirm??yu,onApplication:r,startsAuto:l.startsAuto??!1};if(e.forEach(A=>kh(A,E.name,E)),l.cooldown!==void 0&&e.forEach(A=>Du(A,o,l.cooldown,l.maxCharges??1)),l.secondaryCooldown!==void 0){const{cdName:A,cooldown:R,maxCharges:T}=l.secondaryCooldown;e.forEach(S=>Du(S,A,R,T))}return E}function ze(e,t,n,o,l){const r=Ue((d,h)=>{const E=d.resources.get(l.rscType),A=l.duration??Kt(d.job,l.rscType).maxTimeout,R=typeof A=="number"?T=>A:A;E.gain(E.maxValue),d.enqueueResourceDrop(l.rscType,R(d))},l==null?void 0:l.onApplication);return ot(e,t,n,o,{...l,onApplication:r})}function In(e,t,n,o){Array.isArray(e)||(e=[e]);const l="Limit Break "+o.tier,r=Ue(h=>h.maybeCancelChanneledSkills(t),o.onExecute),d={kind:"limitbreak",name:t,animationLockFn:h=>o.animationLock,assetPath:`General/${l}.png`,unlockLevel:1,autoUpgrade:void 0,autoDowngrade:void 0,cdName:n,secondaryCd:void 0,aspect:Ie.Other,replaceIf:[],startOnHotbar:!0,castTimeFn:An(o.castTime,0),highlightIf:h=>!1,manaCostFn:h=>0,potencyFn:An(o.potency,0),jobPotencyModifiers:h=>[],healingPotencyFn:An(o.healingPotency,0),jobHealingPotencyModifiers:h=>[],aoeHeal:!1,drawsAggro:!1,applicationDelay:o.applicationDelay??0,validateAttempt:o.validateAttempt??(h=>!0),onExecute:r,onConfirm:o.onConfirm??yu,onApplication:o.onApplication??yu,startsAuto:!1};return e.forEach(h=>kh(h,d.name,d)),e.forEach(h=>Du(h,n,(o.castTime??0)+o.animationLock,1)),d}class mU{constructor(t){Z(this,"job");this.job=t.job}get(t){const n=_s.get(this.job).get(t);return n||(console.error(`creating placeholder skill ${t} for ${this.job}`),ot([this.job],t,1,"NEVER",{validateAttempt:o=>!1}))}}function ec(e,t,n){let o=Sl(e,t);for(;o.autoUpgrade&&yC(o.autoUpgrade.trait,n);)o=Sl(e,ec(e,o.autoUpgrade.otherSkill,n));for(;o.autoDowngrade&&n<o.unlockLevel;)o=Sl(e,ec(e,o.autoDowngrade.otherSkill,n));return o.name}function a0(e,t){const n=Sl(t.job,e);for(const o of n.replaceIf){if(o.newSkill===e)continue;const l=Sl(t.job,o.newSkill);if(!l)throw new Error("couldn't find skill info for "+o.newSkill);if(t.config.level>=l.unlockLevel&&o.condition(t))return ec(t.job,o.newSkill,t.config.level)}return ec(t.job,n.name,t.config.level)}var jr;class RU{constructor(t,n){Fe(this,jr);Me(this,jr,[]),console.assert(_s.has(t),`No skill map found for job: ${t}`);for(const l of _s.get(t).values())l.name!=="NEVER"&&l.cdName!=="NEVER"&&n>=l.unlockLevel&&l.autoDowngrade===void 0&&l.startOnHotbar&&ie(this,jr).push(ec(t,l.name,n));let o=th.get("TINCTURE");switch(ft[t].role){case"TANK":case"MELEE":t==="NIN"||t==="VPR"?o="Role/Dexterity Tincture.png":o="Role/Strength Tincture.png";break;case"HEALER":o="Role/Mind Tincture.png";break;case"LIMITED":case"CASTER":o="Role/Intelligence Tincture.png";break;case"RANGED":o="Role/Dexterity Tincture.png";break}th.set("TINCTURE",o)}getCurrentSkillNames(t){return ie(this,jr).map(n=>a0(n,t))}}jr=new WeakMap;var Ve=(e=>(e.Skill="Skill",e.Wait="Wait",e.JumpToTimestamp="JumpToTimestamp",e.WaitForMP="WaitForMP",e.SetResourceEnabled="SetResourceEnabled",e.Unknown="Unknown",e.Invalid="Invalid",e))(Ve||{});function kr(e,t){return new hi({type:"Skill",skillName:e,targetCount:t??1,healTargetCount:void 0})}function TU(e,t){return new hi({type:"Unknown",skillName:e,targetCount:t??1,healTargetCount:void 0})}function Cu(e){return new hi({type:"Wait",waitDuration:e})}function br(e){return new hi({type:"JumpToTimestamp",targetTime:e})}function n0(){return new hi({type:"WaitForMP"})}function _R(e){return new hi({type:"SetResourceEnabled",buffName:e})}var Yr,Hn,Ci,Oo,Xi,Kr,Vr,Wr,Xr;const yS=class yS{constructor(t,n){Fe(this,Yr);Fe(this,Hn);Fe(this,Ci);Fe(this,Oo);Fe(this,Xi);Z(this,"applicationTime");Fe(this,Kr);Fe(this,Vr);Fe(this,Wr);Fe(this,Xr);Z(this,"info");Z(this,"legacyWaitDuration");Z(this,"tmp_startLockTime");Z(this,"tmp_endLockTime");Z(this,"tmp_invalid_reasons");this.info=t,Me(this,Yr,new Set),Me(this,Ci,new Map),Me(this,Xi,new Map),Me(this,Kr,new Map),Me(this,Vr,new Map),Me(this,Wr,new Map),Me(this,Xr,new Map),this.legacyWaitDuration=n,this.tmp_invalid_reasons=[]}serialized(){return this.info.type==="Skill"?{type:"Skill",skillName:Pa[this.info.skillName].name,targetCount:this.info.targetCount,healTargetCount:this.info.healTargetCount}:this.info.type==="SetResourceEnabled"?{type:"SetResourceEnabled",buffName:this.info.buffName.toString()}:this.info.type==="Unknown"?{type:"Skill",skillName:this.info.skillName,targetCount:this.info.targetCount,healTargetCount:this.info.healTargetCount}:this.info}toLocalizedString(){if(this.info.type==="Skill")return xi(this.info.skillName);if(this.info.type==="SetResourceEnabled")return C({en:"toggle ",zh:"开关"}).toString()+je(this.info.buffName);if(this.info.type==="Wait"){const t=this.info.waitDuration.toFixed(3);return C({en:`wait ${t}`,zh:`快进至${t}`}).toString()}else{if(this.info.type==="WaitForMP")return C({en:"wait MP",zh:"快进至跳蓝"}).toString();if(this.info.type==="JumpToTimestamp"){const t=this.info.targetTime.toFixed(3);return C({en:`jump ${t}`,zh:`跳到${t}`}).toString()}}return"(unknown)"}maybeGetActionKey(){return this.info.type==="Skill"?this.info.skillName:void 0}get targetCount(){return this.info.type==="Skill"?this.info.targetCount:0}get healTargetCount(){return this.info.type==="Skill"?this.info.healTargetCount??0:0}getNameForMessage(){return this.info.type==="Skill"?Pa[this.info.skillName].name:this.info.type.toString()}getClone(){return new yS(this.info,this.legacyWaitDuration)}addBuff(t){ie(this,Yr).add(t)}hasBuff(t){return ie(this,Yr).has(t)}hasPartyBuff(){var n;const t=(n=ie(this,Hn))==null?void 0:n.snapshotTime;return t!==void 0&&N.game.getPartyBuffs(t).size>0}getPartyBuffs(){var n;const t=(n=ie(this,Hn))==null?void 0:n.snapshotTime;return t?[...N.game.getPartyBuffs(t).keys()]:[]}setTargetCount(t){this.info.type==="Skill"&&(this.info.targetCount=t)}setHealTargetCount(t){this.info.type==="Skill"&&(this.info.healTargetCount=t)}resolveAll(t){ie(this,Hn)&&ie(this,Hn).resolve(t),ie(this,Ci).forEach(n=>{n.forEach(o=>{o.resolve(t)})})}resolved(){return this.applicationTime!==void 0}hitBoss(t){var n;return((n=ie(this,Hn))==null?void 0:n.hasHitBoss(t))??!0}getPotency(t){const n={applied:0,snapshottedButPending:0};return ie(this,Hn)&&this.recordPotency(t,ie(this,Hn),n),t.excludeDoT||ie(this,Ci).forEach(o=>{o.forEach(l=>{this.recordPotency(t,l,n)})}),n}getHealingPotency(t){const n={applied:0,snapshottedButPending:0};return ie(this,Oo)&&this.recordPotency(t,ie(this,Oo),n),t.excludeHoT||ie(this,Xi).forEach(o=>{o.forEach(l=>{this.recordPotency(t,l,n)})}),n}recordPotency(t,n,o){n.hasHitBoss(t.untargetable)?o.applied+=n.getAmount(t):!n.hasResolved()&&n.hasSnapshotted()&&(o.snapshottedButPending+=n.getAmount(t))}removeUnresolvedOvertimePotencies(t){(t==="damage"?ie(this,Ci):ie(this,Xi)).forEach(o=>{const l=o.findIndex(r=>!r.hasResolved());l<0||o.splice(l)})}anyPotencies(){return ie(this,Hn)!==void 0||ie(this,Ci).size>0}anyHealingPotencies(){return ie(this,Oo)!==void 0||ie(this,Xi).size>0}getInitialPotency(){return ie(this,Hn)}getInitialHealingPotency(){return ie(this,Oo)}getAllDotPotencies(){return this.getAllOverTimePotencies("damage")}getAllHotPotencies(){return this.getAllOverTimePotencies("healing")}getAllOverTimePotencies(t){return t==="damage"?ie(this,Ci):ie(this,Xi)}getDotPotencies(t){return this.getOverTimePotencies(t,"damage")}getHotPotencies(t){return this.getOverTimePotencies(t,"healing")}getOverTimePotencies(t,n){return n==="damage"?ie(this,Ci).get(t)??[]:ie(this,Xi).get(t)??[]}addPotency(t){console.assert(!ie(this,Hn),`ActionNode for ${this.getNameForMessage()} already had an initial potency`),Me(this,Hn,t)}addHealingPotency(t){console.assert(!ie(this,Oo),`ActionNode for ${this.getNameForMessage()} already had an initial healing potency`),Me(this,Oo,t)}addDoTPotency(t,n){this.addOverTimePotency(t,n,"damage")}addHoTPotency(t,n){this.addOverTimePotency(t,n,"healing")}addOverTimePotency(t,n,o){const l=o==="damage"?ie(this,Ci):ie(this,Xi),r=l.get(n)??[];r.length===0&&l.set(n,r),r.push(t)}setOverTimeGap(t,n,o){this.setOverTimeMappedAmount(t,n,o==="damage"?ie(this,Vr):ie(this,Xr))}getOverTimeGap(t,n){return this.getOverTimeMappedAmount(t,n==="damage"?ie(this,Vr):ie(this,Xr))}setOverTimeOverrideAmount(t,n,o){this.setOverTimeMappedAmount(t,n,o==="damage"?ie(this,Kr):ie(this,Wr))}getOverTimeOverrideAmount(t,n){return this.getOverTimeMappedAmount(t,n==="damage"?ie(this,Kr):ie(this,Wr))}setOverTimeMappedAmount(t,n,o){o.set(t,n)}getOverTimeMappedAmount(t,n){return n.get(t)??0}};Yr=new WeakMap,Hn=new WeakMap,Ci=new WeakMap,Oo=new WeakMap,Xi=new WeakMap,Kr=new WeakMap,Vr=new WeakMap,Wr=new WeakMap,Xr=new WeakMap;let hi=yS;class tc{constructor(){Z(this,"actions");Z(this,"name","(anonymous line)");this.actions=[]}get length(){return this.actions.length}get head(){return this.length>0?this.actions[0]:void 0}get tail(){return this.length>0?this.actions[this.actions.length-1]:void 0}get tailIndex(){return this.length-1}prependActionNode(t){console.assert(t!==void 0),this.actions.unshift(t)}insertActionNodes(t,n){t.length>0&&this.actions.splice(n,0,...t)}addActionNode(t){console.assert(t!==void 0),this.actions.push(t)}iterateAll(t){this.actions.forEach(n=>t(n))}serialized(){return{name:this.name,actions:this.actions.map(t=>t.serialized())}}exportCsv(){return[]}static deserialize(t){const n=t.map(l=>{if(l.type==="Skill"){const r=vT(l.skillName),d="waitDuration"in l?l.waitDuration:void 0;return new hi(r!==void 0?{type:"Skill",skillName:r,targetCount:l.targetCount,healTargetCount:l.healTargetCount}:{type:"Unknown",skillName:l.skillName,targetCount:l.targetCount,healTargetCount:l.healTargetCount},d)}else if(l.type==="SetResourceEnabled"){const r="waitDuration"in l?l.waitDuration:void 0;return new hi({type:"SetResourceEnabled",buffName:hU(l.buffName)},r)}else return l.type==="Wait"||l.type==="JumpToTimestamp"||l.type==="WaitForMP"?new hi(l):(window.alert("unparseable action: "+JSON.stringify(l)),new hi({type:"Invalid"}))}),o=new tc;return o.actions=n,o}}var wu,gR;const vS=class vS extends tc{constructor(){super(...arguments);Fe(this,wu);Z(this,"selectionStartIndex");Z(this,"selectionEndIndex");Z(this,"startIsPivot",!0);Z(this,"config")}get selectionStart(){return this.selectionStartIndex!==void 0?this.actions[this.selectionStartIndex]:void 0}get selectionEnd(){return this.selectionEndIndex!==void 0?this.actions[this.selectionEndIndex]:void 0}getFirstSelection(){return this.selectionStart&&console.assert(this.selectionEnd!==void 0),this.selectionStart}getLastSelection(){return this.selectionEnd&&console.assert(this.selectionStart!==void 0),this.selectionEnd}isInSelection(n){return this.selectionStartIndex!==void 0&&this.selectionEndIndex!==void 0&&n>=this.selectionStartIndex&&n<=this.selectionEndIndex}iterateSelected(n){if(!(this.selectionStartIndex===void 0||this.selectionEndIndex===void 0))for(let o=this.selectionStartIndex;o<=this.selectionEndIndex;o++)n(this.actions[o])}getSelected(){const n=new tc;return this.selectionStartIndex!==void 0&&this.selectionEndIndex!==void 0&&(n.actions=this.actions.slice(this.selectionStartIndex,this.selectionEndIndex+1)),n}getSelectionLength(){return this.selectionStartIndex===void 0||this.selectionEndIndex===void 0?0:this.selectionEndIndex-this.selectionStartIndex+1}selectSingle(n){this.unselectAll(),this.selectionStartIndex=n,this.selectionEndIndex=n,this.startIsPivot=!0}unselectAll(){this.selectionStartIndex=void 0,this.selectionEndIndex=void 0,this.startIsPivot=!0}selectUntil(n){if(this.selectionStartIndex!==void 0&&this.selectionStartIndex===this.selectionEndIndex)this.selectionStartIndex<=n?(pe(this,wu,gR).call(this,this.selectionStartIndex,n),this.startIsPivot=!0):(pe(this,wu,gR).call(this,n,this.selectionStartIndex),this.startIsPivot=!1);else if(this.selectionStartIndex!==void 0&&this.selectionStartIndex!==this.selectionEndIndex){const o=this.startIsPivot?this.selectionStartIndex:this.selectionEndIndex;this.selectionStartIndex=o,this.selectionEndIndex=o,this.selectUntil(n)}}onClickNode(n,o){o&&this.selectionStartIndex!==void 0?this.selectUntil(n):this.selectionStartIndex===n&&this.selectionEndIndex===n?this.unselectAll():this.selectSingle(n)}moveSelected(n){if(n===0||this.selectionStartIndex===void 0||this.selectionEndIndex===void 0)return;const o=this.selectionStartIndex,l=this.getSelectionLength(),r=this.actions.splice(o,l);let d=o+n;return d=Math.max(d,0),d=Math.min(d,this.length),this.actions.splice(d,0,...r),this.selectionStartIndex=d,this.selectionEndIndex=d+l-1,d}deleteSelected(){if(this.selectionStartIndex===void 0||this.selectionEndIndex===void 0)return;const n=this.selectionStartIndex;return this.actions.splice(n,this.getSelectionLength()),this.unselectAll(),n}serialized(){var o;console.assert(this.config);const n=super.serialized();return{name:n.name,fileType:Mi.Record,config:(o=this.config)==null?void 0:o.serialized(),actions:n.actions}}spliceUpTo(n){const o=this.selectionStartIndex,l=this.selectionEndIndex;this.unselectAll(),n<this.length&&this.actions.splice(n,this.length-n),o!==void 0&&(this.selectSingle(o),this.selectUntil(l))}getCloneWithSharedConfig(){const n=new vS;return n.config=this.config,n.actions=this.actions.map(o=>o.getClone()),n.selectionStartIndex=this.selectionStartIndex,n.selectionEndIndex=this.selectionEndIndex,n}};wu=new WeakSet,gR=function(n,o){this.unselectAll(),this.selectionStartIndex=n,this.selectionEndIndex=o};let po=vS;var Gm={exports:{}},Bm,FN;function SU(){if(FN)return Bm;FN=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Bm=e,Bm}var Fm,zN;function IU(){if(zN)return Fm;zN=1;var e=SU();function t(){}function n(){}return n.resetWarningCache=t,Fm=function(){function o(d,h,E,A,R,T){if(T!==e){var S=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw S.name="Invariant Violation",S}}o.isRequired=o;function l(){return o}var r={array:o,bigint:o,bool:o,func:o,number:o,object:o,string:o,symbol:o,any:o,arrayOf:l,element:o,elementType:o,instanceOf:l,node:o,objectOf:l,oneOf:l,oneOfType:l,shape:l,exact:l,checkPropTypes:n,resetWarningCache:t};return r.PropTypes=r,r},Fm}var jN;function _U(){return jN||(jN=1,Gm.exports=IU()()),Gm.exports}var gU=_U();const zm=nT(gU),i0=O.createContext(void 0);function Yu(){const e=O.useContext(i0);if(e===void 0)throw new Error("Base UI: TooltipRootContext is missing. Tooltip parts must be placed within <Tooltip.Root>.");return e}var Ku=pC();function xh(){return typeof window<"u"}function Hl(e){return o0(e)?(e.nodeName||"").toLowerCase():"#document"}function mn(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function ao(e){var t;return(t=(o0(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function o0(e){return xh()?e instanceof Node||e instanceof mn(e).Node:!1}function vt(e){return xh()?e instanceof Element||e instanceof mn(e).Element:!1}function Ia(e){return xh()?e instanceof HTMLElement||e instanceof mn(e).HTMLElement:!1}function ah(e){return!xh()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof mn(e).ShadowRoot}function Vu(e){const{overflow:t,overflowX:n,overflowY:o,display:l}=Ai(e);return/auto|scroll|overlay|hidden|clip/.test(t+o+n)&&!["inline","contents"].includes(l)}function NU(e){return["table","td","th"].includes(Hl(e))}function Ph(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function LT(e){const t=wh(),n=vt(e)?Ai(e):e;return["transform","translate","scale","rotate","perspective"].some(o=>n[o]?n[o]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(o=>(n.willChange||"").includes(o))||["paint","layout","strict","content"].some(o=>(n.contain||"").includes(o))}function pU(e){let t=xo(e);for(;Ia(t)&&!Ho(t);){if(LT(t))return t;if(Ph(t))return null;t=xo(t)}return null}function wh(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Ho(e){return["html","body","#document"].includes(Hl(e))}function Ai(e){return mn(e).getComputedStyle(e)}function Gh(e){return vt(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function xo(e){if(Hl(e)==="html")return e;const t=e.assignedSlot||e.parentNode||ah(e)&&e.host||ao(e);return ah(t)?t.host:t}function l0(e){const t=xo(e);return Ho(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ia(t)&&Vu(t)?t:l0(t)}function Il(e,t,n){var o;t===void 0&&(t=[]),n===void 0&&(n=!0);const l=l0(e),r=l===((o=e.ownerDocument)==null?void 0:o.body),d=mn(l);if(r){const h=NR(d);return t.concat(d,d.visualViewport||[],Vu(l)?l:[],h&&n?Il(h):[])}return t.concat(l,Il(l,[],n))}function NR(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}const CU=["top","right","bottom","left"],Ol=Math.min,Zn=Math.max,nh=Math.round,_E=Math.floor,Zi=e=>({x:e,y:e}),OU={left:"right",right:"left",bottom:"top",top:"bottom"},bU={start:"end",end:"start"};function pR(e,t,n){return Zn(e,Ol(t,n))}function Po(e,t){return typeof e=="function"?e(t):e}function fi(e){return e.split("-")[0]}function bl(e){return e.split("-")[1]}function HT(e){return e==="x"?"y":"x"}function UT(e){return e==="y"?"height":"width"}function Dl(e){return["top","bottom"].includes(fi(e))?"y":"x"}function kT(e){return HT(Dl(e))}function DU(e,t,n){n===void 0&&(n=!1);const o=bl(e),l=kT(e),r=UT(l);let d=l==="x"?o===(n?"end":"start")?"right":"left":o==="start"?"bottom":"top";return t.reference[r]>t.floating[r]&&(d=ih(d)),[d,ih(d)]}function yU(e){const t=ih(e);return[CR(e),t,CR(t)]}function CR(e){return e.replace(/start|end/g,t=>bU[t])}function vU(e,t,n){const o=["left","right"],l=["right","left"],r=["top","bottom"],d=["bottom","top"];switch(e){case"top":case"bottom":return n?t?l:o:t?o:l;case"left":case"right":return t?r:d;default:return[]}}function MU(e,t,n,o){const l=bl(e);let r=vU(fi(e),n==="start",o);return l&&(r=r.map(d=>d+"-"+l),t&&(r=r.concat(r.map(CR)))),r}function ih(e){return e.replace(/left|right|bottom|top/g,t=>OU[t])}function LU(e){return{top:0,right:0,bottom:0,left:0,...e}}function s0(e){return typeof e!="number"?LU(e):{top:e,right:e,bottom:e,left:e}}function oh(e){const{x:t,y:n,width:o,height:l}=e;return{width:o,height:l,top:n,left:t,right:t+o,bottom:n+l,x:t,y:n}}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var HU=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],lh=HU.join(","),r0=typeof Element>"u",ac=r0?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,sh=!r0&&Element.prototype.getRootNode?function(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}:function(e){return e==null?void 0:e.ownerDocument},rh=function e(t,n){var o;n===void 0&&(n=!0);var l=t==null||(o=t.getAttribute)===null||o===void 0?void 0:o.call(t,"inert"),r=l===""||l==="true",d=r||n&&t&&e(t.parentNode);return d},UU=function(t){var n,o=t==null||(n=t.getAttribute)===null||n===void 0?void 0:n.call(t,"contenteditable");return o===""||o==="true"},c0=function(t,n,o){if(rh(t))return[];var l=Array.prototype.slice.apply(t.querySelectorAll(lh));return n&&ac.call(t,lh)&&l.unshift(t),l=l.filter(o),l},u0=function e(t,n,o){for(var l=[],r=Array.from(t);r.length;){var d=r.shift();if(!rh(d,!1))if(d.tagName==="SLOT"){var h=d.assignedElements(),E=h.length?h:d.children,A=e(E,!0,o);o.flatten?l.push.apply(l,A):l.push({scopeParent:d,candidates:A})}else{var R=ac.call(d,lh);R&&o.filter(d)&&(n||!t.includes(d))&&l.push(d);var T=d.shadowRoot||typeof o.getShadowRoot=="function"&&o.getShadowRoot(d),S=!rh(T,!1)&&(!o.shadowRootFilter||o.shadowRootFilter(d));if(T&&S){var I=e(T===!0?d.children:T.children,!0,o);o.flatten?l.push.apply(l,I):l.push({scopeParent:d,candidates:I})}else r.unshift.apply(r,d.children)}}return l},d0=function(t){return!isNaN(parseInt(t.getAttribute("tabindex"),10))},E0=function(t){if(!t)throw new Error("No node provided");return t.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||UU(t))&&!d0(t)?0:t.tabIndex},kU=function(t,n){var o=E0(t);return o<0&&n&&!d0(t)?0:o},xU=function(t,n){return t.tabIndex===n.tabIndex?t.documentOrder-n.documentOrder:t.tabIndex-n.tabIndex},h0=function(t){return t.tagName==="INPUT"},PU=function(t){return h0(t)&&t.type==="hidden"},wU=function(t){var n=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(o){return o.tagName==="SUMMARY"});return n},GU=function(t,n){for(var o=0;o<t.length;o++)if(t[o].checked&&t[o].form===n)return t[o]},BU=function(t){if(!t.name)return!0;var n=t.form||sh(t),o=function(h){return n.querySelectorAll('input[type="radio"][name="'+h+'"]')},l;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")l=o(window.CSS.escape(t.name));else try{l=o(t.name)}catch(d){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",d.message),!1}var r=GU(l,t.form);return!r||r===t},FU=function(t){return h0(t)&&t.type==="radio"},zU=function(t){return FU(t)&&!BU(t)},jU=function(t){var n,o=t&&sh(t),l=(n=o)===null||n===void 0?void 0:n.host,r=!1;if(o&&o!==t){var d,h,E;for(r=!!((d=l)!==null&&d!==void 0&&(h=d.ownerDocument)!==null&&h!==void 0&&h.contains(l)||t!=null&&(E=t.ownerDocument)!==null&&E!==void 0&&E.contains(t));!r&&l;){var A,R,T;o=sh(l),l=(A=o)===null||A===void 0?void 0:A.host,r=!!((R=l)!==null&&R!==void 0&&(T=R.ownerDocument)!==null&&T!==void 0&&T.contains(l))}}return r},YN=function(t){var n=t.getBoundingClientRect(),o=n.width,l=n.height;return o===0&&l===0},YU=function(t,n){var o=n.displayCheck,l=n.getShadowRoot;if(getComputedStyle(t).visibility==="hidden")return!0;var r=ac.call(t,"details>summary:first-of-type"),d=r?t.parentElement:t;if(ac.call(d,"details:not([open]) *"))return!0;if(!o||o==="full"||o==="legacy-full"){if(typeof l=="function"){for(var h=t;t;){var E=t.parentElement,A=sh(t);if(E&&!E.shadowRoot&&l(E)===!0)return YN(t);t.assignedSlot?t=t.assignedSlot:!E&&A!==t.ownerDocument?t=A.host:t=E}t=h}if(jU(t))return!t.getClientRects().length;if(o!=="legacy-full")return!0}else if(o==="non-zero-area")return YN(t);return!1},KU=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var n=t.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var o=0;o<n.children.length;o++){var l=n.children.item(o);if(l.tagName==="LEGEND")return ac.call(n,"fieldset[disabled] *")?!0:!l.contains(t)}return!0}n=n.parentElement}return!1},OR=function(t,n){return!(n.disabled||rh(n)||PU(n)||YU(n,t)||wU(n)||KU(n))},bR=function(t,n){return!(zU(n)||E0(n)<0||!OR(t,n))},VU=function(t){var n=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},WU=function e(t){var n=[],o=[];return t.forEach(function(l,r){var d=!!l.scopeParent,h=d?l.scopeParent:l,E=kU(h,d),A=d?e(l.candidates):h;E===0?d?n.push.apply(n,A):n.push(h):o.push({documentOrder:r,tabIndex:E,item:l,isScope:d,content:A})}),o.sort(xU).reduce(function(l,r){return r.isScope?l.push.apply(l,r.content):l.push(r.content),l},[]).concat(n)},Bh=function(t,n){n=n||{};var o;return n.getShadowRoot?o=u0([t],n.includeContainer,{filter:bR.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:VU}):o=c0(t,n.includeContainer,bR.bind(null,n)),WU(o)},XU=function(t,n){n=n||{};var o;return n.getShadowRoot?o=u0([t],n.includeContainer,{filter:OR.bind(null,n),flatten:!0,getShadowRoot:n.getShadowRoot}):o=c0(t,n.includeContainer,OR.bind(null,n)),o},f0=function(t,n){if(n=n||{},!t)throw new Error("No node provided");return ac.call(t,lh)===!1?!1:bR(n,t)};function A0(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function xT(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:o}=t;return n+"/"+o}).join(" "):navigator.userAgent}function m0(){return/apple/i.test(navigator.vendor)}function DR(){const e=/android/i;return e.test(A0())||e.test(xT())}function qU(){return A0().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function R0(){return xT().includes("jsdom/")}const KN="data-floating-ui-focusable",ZU="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function fl(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function Za(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&ah(n)){let o=t;for(;o;){if(e===o)return!0;o=o.parentNode||o.host}}return!1}function Di(e){return"composedPath"in e?e.composedPath()[0]:e.target}function jm(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function QU(e){return e.matches("html,body")}function ln(e){return(e==null?void 0:e.ownerDocument)||document}function Fh(e){return Ia(e)&&e.matches(ZU)}function VN(e){return e?e.getAttribute("role")==="combobox"&&Fh(e):!1}function $U(e){if(!e||R0())return!0;try{return e.matches(":focus-visible")}catch{return!0}}function yR(e){return e?e.hasAttribute(KN)?e:e.querySelector("["+KN+"]")||e:null}function Ou(e,t,n){n===void 0&&(n=!0);let o=e.filter(r=>{var d;return r.parentId===t&&((d=r.context)==null?void 0:d.open)}),l=o;for(;l.length;)l=n?e.filter(r=>{var d;return(d=l)==null?void 0:d.some(h=>{var E;return r.parentId===h.id&&((E=r.context)==null?void 0:E.open)})}):e,o=o.concat(l);return o}function WN(e,t){var n;let o=[],l=(n=e.find(r=>r.id===t))==null?void 0:n.parentId;for(;l;){const r=e.find(d=>d.id===l);l=r==null?void 0:r.parentId,r&&(o=o.concat(r))}return o}function Ym(e){e.preventDefault(),e.stopPropagation()}function JU(e){return"nativeEvent"in e}function ek(e){return e.mozInputSource===0&&e.isTrusted?!0:DR()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function tk(e){return R0()?!1:!DR()&&e.width===0&&e.height===0||DR()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function nc(e,t){const n=["mouse","pen"];return t||n.push("",void 0),n.includes(e)}var wa=typeof document<"u"?O.useLayoutEffect:O.useEffect;const ak={...Lh};function rs(e){const t=O.useRef(e);return wa(()=>{t.current=e}),t}const nk=ak.useInsertionEffect,ik=nk||(e=>e());function fn(e){const t=O.useRef(()=>{});return ik(()=>{t.current=e}),O.useCallback(function(){for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return t.current==null?void 0:t.current(...o)},[])}const Wu=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function T0(e,t){const n=Bh(e,Wu()),o=n.length;if(o===0)return;const l=fl(ln(e)),r=n.indexOf(l),d=r===-1?t===1?0:o-1:r+t;return n[d]}function S0(e){return T0(ln(e).body,1)||e}function I0(e){return T0(ln(e).body,-1)||e}function bu(e,t){const n=t||e.currentTarget,o=e.relatedTarget;return!o||!Za(n,o)}function ok(e){Bh(e,Wu()).forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")})}function XN(e){e.querySelectorAll("[data-tabindex]").forEach(n=>{const o=n.dataset.tabindex;delete n.dataset.tabindex,o?n.setAttribute("tabindex",o):n.removeAttribute("tabindex")})}function qN(e,t,n){let{reference:o,floating:l}=e;const r=Dl(t),d=kT(t),h=UT(d),E=fi(t),A=r==="y",R=o.x+o.width/2-l.width/2,T=o.y+o.height/2-l.height/2,S=o[h]/2-l[h]/2;let I;switch(E){case"top":I={x:R,y:o.y-l.height};break;case"bottom":I={x:R,y:o.y+o.height};break;case"right":I={x:o.x+o.width,y:T};break;case"left":I={x:o.x-l.width,y:T};break;default:I={x:o.x,y:o.y}}switch(bl(t)){case"start":I[d]-=S*(n&&A?-1:1);break;case"end":I[d]+=S*(n&&A?-1:1);break}return I}const lk=async(e,t,n)=>{const{placement:o="bottom",strategy:l="absolute",middleware:r=[],platform:d}=n,h=r.filter(Boolean),E=await(d.isRTL==null?void 0:d.isRTL(t));let A=await d.getElementRects({reference:e,floating:t,strategy:l}),{x:R,y:T}=qN(A,o,E),S=o,I={},p=0;for(let _=0;_<h.length;_++){const{name:b,fn:v}=h[_],{x:L,y:k,data:M,reset:B}=await v({x:R,y:T,initialPlacement:o,placement:S,strategy:l,middlewareData:I,rects:A,platform:d,elements:{reference:e,floating:t}});R=L??R,T=k??T,I={...I,[b]:{...I[b],...M}},B&&p<=50&&(p++,typeof B=="object"&&(B.placement&&(S=B.placement),B.rects&&(A=B.rects===!0?await d.getElementRects({reference:e,floating:t,strategy:l}):B.rects),{x:R,y:T}=qN(A,S,E)),_=-1)}return{x:R,y:T,placement:S,strategy:l,middlewareData:I}};async function vu(e,t){var n;t===void 0&&(t={});const{x:o,y:l,platform:r,rects:d,elements:h,strategy:E}=e,{boundary:A="clippingAncestors",rootBoundary:R="viewport",elementContext:T="floating",altBoundary:S=!1,padding:I=0}=Po(t,e),p=s0(I),b=h[S?T==="floating"?"reference":"floating":T],v=oh(await r.getClippingRect({element:(n=await(r.isElement==null?void 0:r.isElement(b)))==null||n?b:b.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(h.floating)),boundary:A,rootBoundary:R,strategy:E})),L=T==="floating"?{x:o,y:l,width:d.floating.width,height:d.floating.height}:d.reference,k=await(r.getOffsetParent==null?void 0:r.getOffsetParent(h.floating)),M=await(r.isElement==null?void 0:r.isElement(k))?await(r.getScale==null?void 0:r.getScale(k))||{x:1,y:1}:{x:1,y:1},B=oh(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({elements:h,rect:L,offsetParent:k,strategy:E}):L);return{top:(v.top-B.top+p.top)/M.y,bottom:(B.bottom-v.bottom+p.bottom)/M.y,left:(v.left-B.left+p.left)/M.x,right:(B.right-v.right+p.right)/M.x}}const sk=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:o,placement:l,rects:r,platform:d,elements:h,middlewareData:E}=t,{element:A,padding:R=0}=Po(e,t)||{};if(A==null)return{};const T=s0(R),S={x:n,y:o},I=kT(l),p=UT(I),_=await d.getDimensions(A),b=I==="y",v=b?"top":"left",L=b?"bottom":"right",k=b?"clientHeight":"clientWidth",M=r.reference[p]+r.reference[I]-S[I]-r.floating[p],B=S[I]-r.reference[I],w=await(d.getOffsetParent==null?void 0:d.getOffsetParent(A));let x=w?w[k]:0;(!x||!await(d.isElement==null?void 0:d.isElement(w)))&&(x=h.floating[k]||r.floating[p]);const Q=M/2-B/2,oe=x/2-_[p]/2-1,he=Ol(T[v],oe),ue=Ol(T[L],oe),de=he,fe=x-_[p]-ue,$=x/2-_[p]/2+Q,ee=pR(de,$,fe),Y=!E.arrow&&bl(l)!=null&&$!==ee&&r.reference[p]/2-($<de?he:ue)-_[p]/2<0,P=Y?$<de?$-de:$-fe:0;return{[I]:S[I]+P,data:{[I]:ee,centerOffset:$-ee-P,...Y&&{alignmentOffset:P}},reset:Y}}}),rk=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,o;const{placement:l,middlewareData:r,rects:d,initialPlacement:h,platform:E,elements:A}=t,{mainAxis:R=!0,crossAxis:T=!0,fallbackPlacements:S,fallbackStrategy:I="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:_=!0,...b}=Po(e,t);if((n=r.arrow)!=null&&n.alignmentOffset)return{};const v=fi(l),L=Dl(h),k=fi(h)===h,M=await(E.isRTL==null?void 0:E.isRTL(A.floating)),B=S||(k||!_?[ih(h)]:yU(h)),w=p!=="none";!S&&w&&B.push(...MU(h,_,p,M));const x=[h,...B],Q=await vu(t,b),oe=[];let he=((o=r.flip)==null?void 0:o.overflows)||[];if(R&&oe.push(Q[v]),T){const $=DU(l,d,M);oe.push(Q[$[0]],Q[$[1]])}if(he=[...he,{placement:l,overflows:oe}],!oe.every($=>$<=0)){var ue,de;const $=(((ue=r.flip)==null?void 0:ue.index)||0)+1,ee=x[$];if(ee)return{data:{index:$,overflows:he},reset:{placement:ee}};let Y=(de=he.filter(P=>P.overflows[0]<=0).sort((P,K)=>P.overflows[1]-K.overflows[1])[0])==null?void 0:de.placement;if(!Y)switch(I){case"bestFit":{var fe;const P=(fe=he.filter(K=>{if(w){const W=Dl(K.placement);return W===L||W==="y"}return!0}).map(K=>[K.placement,K.overflows.filter(W=>W>0).reduce((W,D)=>W+D,0)]).sort((K,W)=>K[1]-W[1])[0])==null?void 0:fe[0];P&&(Y=P);break}case"initialPlacement":Y=h;break}if(l!==Y)return{reset:{placement:Y}}}return{}}}};function ZN(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function QN(e){return CU.some(t=>e[t]>=0)}const ck=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:o="referenceHidden",...l}=Po(e,t);switch(o){case"referenceHidden":{const r=await vu(t,{...l,elementContext:"reference"}),d=ZN(r,n.reference);return{data:{referenceHiddenOffsets:d,referenceHidden:QN(d)}}}case"escaped":{const r=await vu(t,{...l,altBoundary:!0}),d=ZN(r,n.floating);return{data:{escapedOffsets:d,escaped:QN(d)}}}default:return{}}}}};async function uk(e,t){const{placement:n,platform:o,elements:l}=e,r=await(o.isRTL==null?void 0:o.isRTL(l.floating)),d=fi(n),h=bl(n),E=Dl(n)==="y",A=["left","top"].includes(d)?-1:1,R=r&&E?-1:1,T=Po(t,e);let{mainAxis:S,crossAxis:I,alignmentAxis:p}=typeof T=="number"?{mainAxis:T,crossAxis:0,alignmentAxis:null}:{mainAxis:T.mainAxis||0,crossAxis:T.crossAxis||0,alignmentAxis:T.alignmentAxis};return h&&typeof p=="number"&&(I=h==="end"?p*-1:p),E?{x:I*R,y:S*A}:{x:S*A,y:I*R}}const dk=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,o;const{x:l,y:r,placement:d,middlewareData:h}=t,E=await uk(t,e);return d===((n=h.offset)==null?void 0:n.placement)&&(o=h.arrow)!=null&&o.alignmentOffset?{}:{x:l+E.x,y:r+E.y,data:{...E,placement:d}}}}},Ek=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:o,placement:l}=t,{mainAxis:r=!0,crossAxis:d=!1,limiter:h={fn:b=>{let{x:v,y:L}=b;return{x:v,y:L}}},...E}=Po(e,t),A={x:n,y:o},R=await vu(t,E),T=Dl(fi(l)),S=HT(T);let I=A[S],p=A[T];if(r){const b=S==="y"?"top":"left",v=S==="y"?"bottom":"right",L=I+R[b],k=I-R[v];I=pR(L,I,k)}if(d){const b=T==="y"?"top":"left",v=T==="y"?"bottom":"right",L=p+R[b],k=p-R[v];p=pR(L,p,k)}const _=h.fn({...t,[S]:I,[T]:p});return{..._,data:{x:_.x-n,y:_.y-o,enabled:{[S]:r,[T]:d}}}}}},hk=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:o,placement:l,rects:r,middlewareData:d}=t,{offset:h=0,mainAxis:E=!0,crossAxis:A=!0}=Po(e,t),R={x:n,y:o},T=Dl(l),S=HT(T);let I=R[S],p=R[T];const _=Po(h,t),b=typeof _=="number"?{mainAxis:_,crossAxis:0}:{mainAxis:0,crossAxis:0,..._};if(E){const k=S==="y"?"height":"width",M=r.reference[S]-r.floating[k]+b.mainAxis,B=r.reference[S]+r.reference[k]-b.mainAxis;I<M?I=M:I>B&&(I=B)}if(A){var v,L;const k=S==="y"?"width":"height",M=["top","left"].includes(fi(l)),B=r.reference[T]-r.floating[k]+(M&&((v=d.offset)==null?void 0:v[T])||0)+(M?0:b.crossAxis),w=r.reference[T]+r.reference[k]+(M?0:((L=d.offset)==null?void 0:L[T])||0)-(M?b.crossAxis:0);p<B?p=B:p>w&&(p=w)}return{[S]:I,[T]:p}}}},fk=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,o;const{placement:l,rects:r,platform:d,elements:h}=t,{apply:E=()=>{},...A}=Po(e,t),R=await vu(t,A),T=fi(l),S=bl(l),I=Dl(l)==="y",{width:p,height:_}=r.floating;let b,v;T==="top"||T==="bottom"?(b=T,v=S===(await(d.isRTL==null?void 0:d.isRTL(h.floating))?"start":"end")?"left":"right"):(v=T,b=S==="end"?"top":"bottom");const L=_-R.top-R.bottom,k=p-R.left-R.right,M=Ol(_-R[b],L),B=Ol(p-R[v],k),w=!t.middlewareData.shift;let x=M,Q=B;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(Q=k),(o=t.middlewareData.shift)!=null&&o.enabled.y&&(x=L),w&&!S){const he=Zn(R.left,0),ue=Zn(R.right,0),de=Zn(R.top,0),fe=Zn(R.bottom,0);I?Q=p-2*(he!==0||ue!==0?he+ue:Zn(R.left,R.right)):x=_-2*(de!==0||fe!==0?de+fe:Zn(R.top,R.bottom))}await E({...t,availableWidth:Q,availableHeight:x});const oe=await d.getDimensions(h.floating);return p!==oe.width||_!==oe.height?{reset:{rects:!0}}:{}}}};function _0(e){const t=Ai(e);let n=parseFloat(t.width)||0,o=parseFloat(t.height)||0;const l=Ia(e),r=l?e.offsetWidth:n,d=l?e.offsetHeight:o,h=nh(n)!==r||nh(o)!==d;return h&&(n=r,o=d),{width:n,height:o,$:h}}function PT(e){return vt(e)?e:e.contextElement}function xr(e){const t=PT(e);if(!Ia(t))return Zi(1);const n=t.getBoundingClientRect(),{width:o,height:l,$:r}=_0(t);let d=(r?nh(n.width):n.width)/o,h=(r?nh(n.height):n.height)/l;return(!d||!Number.isFinite(d))&&(d=1),(!h||!Number.isFinite(h))&&(h=1),{x:d,y:h}}const Ak=Zi(0);function g0(e){const t=mn(e);return!wh()||!t.visualViewport?Ak:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function mk(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==mn(e)?!1:t}function gs(e,t,n,o){t===void 0&&(t=!1),n===void 0&&(n=!1);const l=e.getBoundingClientRect(),r=PT(e);let d=Zi(1);t&&(o?vt(o)&&(d=xr(o)):d=xr(e));const h=mk(r,n,o)?g0(r):Zi(0);let E=(l.left+h.x)/d.x,A=(l.top+h.y)/d.y,R=l.width/d.x,T=l.height/d.y;if(r){const S=mn(r),I=o&&vt(o)?mn(o):o;let p=S,_=NR(p);for(;_&&o&&I!==p;){const b=xr(_),v=_.getBoundingClientRect(),L=Ai(_),k=v.left+(_.clientLeft+parseFloat(L.paddingLeft))*b.x,M=v.top+(_.clientTop+parseFloat(L.paddingTop))*b.y;E*=b.x,A*=b.y,R*=b.x,T*=b.y,E+=k,A+=M,p=mn(_),_=NR(p)}}return oh({width:R,height:T,x:E,y:A})}function wT(e,t){const n=Gh(e).scrollLeft;return t?t.left+n:gs(ao(e)).left+n}function N0(e,t,n){n===void 0&&(n=!1);const o=e.getBoundingClientRect(),l=o.left+t.scrollLeft-(n?0:wT(e,o)),r=o.top+t.scrollTop;return{x:l,y:r}}function Rk(e){let{elements:t,rect:n,offsetParent:o,strategy:l}=e;const r=l==="fixed",d=ao(o),h=t?Ph(t.floating):!1;if(o===d||h&&r)return n;let E={scrollLeft:0,scrollTop:0},A=Zi(1);const R=Zi(0),T=Ia(o);if((T||!T&&!r)&&((Hl(o)!=="body"||Vu(d))&&(E=Gh(o)),Ia(o))){const I=gs(o);A=xr(o),R.x=I.x+o.clientLeft,R.y=I.y+o.clientTop}const S=d&&!T&&!r?N0(d,E,!0):Zi(0);return{width:n.width*A.x,height:n.height*A.y,x:n.x*A.x-E.scrollLeft*A.x+R.x+S.x,y:n.y*A.y-E.scrollTop*A.y+R.y+S.y}}function Tk(e){return Array.from(e.getClientRects())}function Sk(e){const t=ao(e),n=Gh(e),o=e.ownerDocument.body,l=Zn(t.scrollWidth,t.clientWidth,o.scrollWidth,o.clientWidth),r=Zn(t.scrollHeight,t.clientHeight,o.scrollHeight,o.clientHeight);let d=-n.scrollLeft+wT(e);const h=-n.scrollTop;return Ai(o).direction==="rtl"&&(d+=Zn(t.clientWidth,o.clientWidth)-l),{width:l,height:r,x:d,y:h}}function Ik(e,t){const n=mn(e),o=ao(e),l=n.visualViewport;let r=o.clientWidth,d=o.clientHeight,h=0,E=0;if(l){r=l.width,d=l.height;const A=wh();(!A||A&&t==="fixed")&&(h=l.offsetLeft,E=l.offsetTop)}return{width:r,height:d,x:h,y:E}}function _k(e,t){const n=gs(e,!0,t==="fixed"),o=n.top+e.clientTop,l=n.left+e.clientLeft,r=Ia(e)?xr(e):Zi(1),d=e.clientWidth*r.x,h=e.clientHeight*r.y,E=l*r.x,A=o*r.y;return{width:d,height:h,x:E,y:A}}function $N(e,t,n){let o;if(t==="viewport")o=Ik(e,n);else if(t==="document")o=Sk(ao(e));else if(vt(t))o=_k(t,n);else{const l=g0(e);o={x:t.x-l.x,y:t.y-l.y,width:t.width,height:t.height}}return oh(o)}function p0(e,t){const n=xo(e);return n===t||!vt(n)||Ho(n)?!1:Ai(n).position==="fixed"||p0(n,t)}function gk(e,t){const n=t.get(e);if(n)return n;let o=Il(e,[],!1).filter(h=>vt(h)&&Hl(h)!=="body"),l=null;const r=Ai(e).position==="fixed";let d=r?xo(e):e;for(;vt(d)&&!Ho(d);){const h=Ai(d),E=LT(d);!E&&h.position==="fixed"&&(l=null),(r?!E&&!l:!E&&h.position==="static"&&!!l&&["absolute","fixed"].includes(l.position)||Vu(d)&&!E&&p0(e,d))?o=o.filter(R=>R!==d):l=h,d=xo(d)}return t.set(e,o),o}function Nk(e){let{element:t,boundary:n,rootBoundary:o,strategy:l}=e;const d=[...n==="clippingAncestors"?Ph(t)?[]:gk(t,this._c):[].concat(n),o],h=d[0],E=d.reduce((A,R)=>{const T=$N(t,R,l);return A.top=Zn(T.top,A.top),A.right=Ol(T.right,A.right),A.bottom=Ol(T.bottom,A.bottom),A.left=Zn(T.left,A.left),A},$N(t,h,l));return{width:E.right-E.left,height:E.bottom-E.top,x:E.left,y:E.top}}function pk(e){const{width:t,height:n}=_0(e);return{width:t,height:n}}function Ck(e,t,n){const o=Ia(t),l=ao(t),r=n==="fixed",d=gs(e,!0,r,t);let h={scrollLeft:0,scrollTop:0};const E=Zi(0);if(o||!o&&!r)if((Hl(t)!=="body"||Vu(l))&&(h=Gh(t)),o){const S=gs(t,!0,r,t);E.x=S.x+t.clientLeft,E.y=S.y+t.clientTop}else l&&(E.x=wT(l));const A=l&&!o&&!r?N0(l,h):Zi(0),R=d.left+h.scrollLeft-E.x-A.x,T=d.top+h.scrollTop-E.y-A.y;return{x:R,y:T,width:d.width,height:d.height}}function Km(e){return Ai(e).position==="static"}function JN(e,t){if(!Ia(e)||Ai(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return ao(e)===n&&(n=n.ownerDocument.body),n}function C0(e,t){const n=mn(e);if(Ph(e))return n;if(!Ia(e)){let l=xo(e);for(;l&&!Ho(l);){if(vt(l)&&!Km(l))return l;l=xo(l)}return n}let o=JN(e,t);for(;o&&NU(o)&&Km(o);)o=JN(o,t);return o&&Ho(o)&&Km(o)&&!LT(o)?n:o||pU(e)||n}const Ok=async function(e){const t=this.getOffsetParent||C0,n=this.getDimensions,o=await n(e.floating);return{reference:Ck(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:o.width,height:o.height}}};function bk(e){return Ai(e).direction==="rtl"}const Dk={convertOffsetParentRelativeRectToViewportRelativeRect:Rk,getDocumentElement:ao,getClippingRect:Nk,getOffsetParent:C0,getElementRects:Ok,getClientRects:Tk,getDimensions:pk,getScale:xr,isElement:vt,isRTL:bk};function O0(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function yk(e,t){let n=null,o;const l=ao(e);function r(){var h;clearTimeout(o),(h=n)==null||h.disconnect(),n=null}function d(h,E){h===void 0&&(h=!1),E===void 0&&(E=1),r();const A=e.getBoundingClientRect(),{left:R,top:T,width:S,height:I}=A;if(h||t(),!S||!I)return;const p=_E(T),_=_E(l.clientWidth-(R+S)),b=_E(l.clientHeight-(T+I)),v=_E(R),k={rootMargin:-p+"px "+-_+"px "+-b+"px "+-v+"px",threshold:Zn(0,Ol(1,E))||1};let M=!0;function B(w){const x=w[0].intersectionRatio;if(x!==E){if(!M)return d();x?d(!1,x):o=setTimeout(()=>{d(!1,1e-7)},1e3)}x===1&&!O0(A,e.getBoundingClientRect())&&d(),M=!1}try{n=new IntersectionObserver(B,{...k,root:l.ownerDocument})}catch{n=new IntersectionObserver(B,k)}n.observe(e)}return d(!0),r}function ep(e,t,n,o){o===void 0&&(o={});const{ancestorScroll:l=!0,ancestorResize:r=!0,elementResize:d=typeof ResizeObserver=="function",layoutShift:h=typeof IntersectionObserver=="function",animationFrame:E=!1}=o,A=PT(e),R=l||r?[...A?Il(A):[],...Il(t)]:[];R.forEach(v=>{l&&v.addEventListener("scroll",n,{passive:!0}),r&&v.addEventListener("resize",n)});const T=A&&h?yk(A,n):null;let S=-1,I=null;d&&(I=new ResizeObserver(v=>{let[L]=v;L&&L.target===A&&I&&(I.unobserve(t),cancelAnimationFrame(S),S=requestAnimationFrame(()=>{var k;(k=I)==null||k.observe(t)})),n()}),A&&!E&&I.observe(A),I.observe(t));let p,_=E?gs(e):null;E&&b();function b(){const v=gs(e);_&&!O0(_,v)&&n(),_=v,p=requestAnimationFrame(b)}return n(),()=>{var v;R.forEach(L=>{l&&L.removeEventListener("scroll",n),r&&L.removeEventListener("resize",n)}),T==null||T(),(v=I)==null||v.disconnect(),I=null,E&&cancelAnimationFrame(p)}}const vk=dk,Mk=Ek,Lk=rk,Hk=fk,Uk=ck,tp=sk,kk=hk,xk=(e,t,n)=>{const o=new Map,l={platform:Dk,...n},r={...l.platform,_c:o};return lk(e,t,{...l,platform:r})};var DE=typeof document<"u"?O.useLayoutEffect:O.useEffect;function ch(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,o,l;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(o=n;o--!==0;)if(!ch(e[o],t[o]))return!1;return!0}if(l=Object.keys(e),n=l.length,n!==Object.keys(t).length)return!1;for(o=n;o--!==0;)if(!{}.hasOwnProperty.call(t,l[o]))return!1;for(o=n;o--!==0;){const r=l[o];if(!(r==="_owner"&&e.$$typeof)&&!ch(e[r],t[r]))return!1}return!0}return e!==e&&t!==t}function b0(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function ap(e,t){const n=b0(e);return Math.round(t*n)/n}function Vm(e){const t=O.useRef(e);return DE(()=>{t.current=e}),t}function Pk(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:o=[],platform:l,elements:{reference:r,floating:d}={},transform:h=!0,whileElementsMounted:E,open:A}=e,[R,T]=O.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[S,I]=O.useState(o);ch(S,o)||I(o);const[p,_]=O.useState(null),[b,v]=O.useState(null),L=O.useCallback(K=>{K!==w.current&&(w.current=K,_(K))},[]),k=O.useCallback(K=>{K!==x.current&&(x.current=K,v(K))},[]),M=r||p,B=d||b,w=O.useRef(null),x=O.useRef(null),Q=O.useRef(R),oe=E!=null,he=Vm(E),ue=Vm(l),de=Vm(A),fe=O.useCallback(()=>{if(!w.current||!x.current)return;const K={placement:t,strategy:n,middleware:S};ue.current&&(K.platform=ue.current),xk(w.current,x.current,K).then(W=>{const D={...W,isPositioned:de.current!==!1};$.current&&!ch(Q.current,D)&&(Q.current=D,Ku.flushSync(()=>{T(D)}))})},[S,t,n,ue,de]);DE(()=>{A===!1&&Q.current.isPositioned&&(Q.current.isPositioned=!1,T(K=>({...K,isPositioned:!1})))},[A]);const $=O.useRef(!1);DE(()=>($.current=!0,()=>{$.current=!1}),[]),DE(()=>{if(M&&(w.current=M),B&&(x.current=B),M&&B){if(he.current)return he.current(M,B,fe);fe()}},[M,B,fe,he,oe]);const ee=O.useMemo(()=>({reference:w,floating:x,setReference:L,setFloating:k}),[L,k]),Y=O.useMemo(()=>({reference:M,floating:B}),[M,B]),P=O.useMemo(()=>{const K={position:n,left:0,top:0};if(!Y.floating)return K;const W=ap(Y.floating,R.x),D=ap(Y.floating,R.y);return h?{...K,transform:"translate("+W+"px, "+D+"px)",...b0(Y.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:W,top:D}},[n,h,Y.floating,R.x,R.y]);return O.useMemo(()=>({...R,update:fe,refs:ee,elements:Y,floatingStyles:P}),[R,fe,ee,Y,P])}const wk=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:o,padding:l}=typeof e=="function"?e(n):e;return o&&t(o)?o.current!=null?tp({element:o.current,padding:l}).fn(n):{}:o?tp({element:o,padding:l}).fn(n):{}}}},Gk=(e,t)=>({...vk(e),options:[e,t]}),Bk=(e,t)=>({...Mk(e),options:[e,t]}),Fk=(e,t)=>({...kk(e),options:[e,t]}),zk=(e,t)=>({...Lk(e),options:[e,t]}),jk=(e,t)=>({...Hk(e),options:[e,t]}),Yk=(e,t)=>({...Uk(e),options:[e,t]}),Kk=(e,t)=>({...wk(e),options:[e,t]}),Vk="data-floating-ui-focusable",np="active",ip="selected",Wk={...Lh};let op=!1,Xk=0;const lp=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Xk++;function qk(){const[e,t]=O.useState(()=>op?lp():void 0);return wa(()=>{e==null&&t(lp())},[]),O.useEffect(()=>{op=!0},[]),e}const Zk=Wk.useId,GT=Zk||qk;function Qk(){const e=new Map;return{emit(t,n){var o;(o=e.get(t))==null||o.forEach(l=>l(n))},on(t,n){e.has(t)||e.set(t,new Set),e.get(t).add(n)},off(t,n){var o;(o=e.get(t))==null||o.delete(n)}}}const $k=O.createContext(null),Jk=O.createContext(null),BT=()=>{var e;return((e=O.useContext($k))==null?void 0:e.id)||null},zh=()=>O.useContext(Jk);function Ns(e){return"data-floating-ui-"+e}function Xn(e){e.current!==-1&&(clearTimeout(e.current),e.current=-1)}const sp=Ns("safe-polygon");function yE(e,t,n){if(n&&!nc(n))return 0;if(typeof e=="number")return e;if(typeof e=="function"){const o=e();return typeof o=="number"?o:o==null?void 0:o[t]}return e==null?void 0:e[t]}function Wm(e){return typeof e=="function"?e():e}function ex(e,t){t===void 0&&(t={});const{open:n,onOpenChange:o,dataRef:l,events:r,elements:d}=e,{enabled:h=!0,delay:E=0,handleClose:A=null,mouseOnly:R=!1,restMs:T=0,move:S=!0}=t,I=zh(),p=BT(),_=rs(A),b=rs(E),v=rs(n),L=rs(T),k=O.useRef(),M=O.useRef(-1),B=O.useRef(),w=O.useRef(-1),x=O.useRef(!0),Q=O.useRef(!1),oe=O.useRef(()=>{}),he=O.useRef(!1),ue=O.useCallback(()=>{var P;const K=(P=l.current.openEvent)==null?void 0:P.type;return(K==null?void 0:K.includes("mouse"))&&K!=="mousedown"},[l]);O.useEffect(()=>{if(!h)return;function P(K){let{open:W}=K;W||(Xn(M),Xn(w),x.current=!0,he.current=!1)}return r.on("openchange",P),()=>{r.off("openchange",P)}},[h,r]),O.useEffect(()=>{if(!h||!_.current||!n)return;function P(W){ue()&&o(!1,W,"hover")}const K=ln(d.floating).documentElement;return K.addEventListener("mouseleave",P),()=>{K.removeEventListener("mouseleave",P)}},[d.floating,n,o,h,_,ue]);const de=O.useCallback(function(P,K,W){K===void 0&&(K=!0),W===void 0&&(W="hover");const D=yE(b.current,"close",k.current);D&&!B.current?(Xn(M),M.current=window.setTimeout(()=>o(!1,P,W),D)):K&&(Xn(M),o(!1,P,W))},[b,o]),fe=fn(()=>{oe.current(),B.current=void 0}),$=fn(()=>{if(Q.current){const P=ln(d.floating).body;P.style.pointerEvents="",P.removeAttribute(sp),Q.current=!1}}),ee=fn(()=>l.current.openEvent?["click","mousedown"].includes(l.current.openEvent.type):!1);O.useEffect(()=>{if(!h)return;function P(F){if(Xn(M),x.current=!1,R&&!nc(k.current)||Wm(L.current)>0&&!yE(b.current,"open"))return;const G=yE(b.current,"open",k.current);G?M.current=window.setTimeout(()=>{v.current||o(!0,F,"hover")},G):n||o(!0,F,"hover")}function K(F){if(ee()){$();return}oe.current();const G=ln(d.floating);if(Xn(w),he.current=!1,_.current&&l.current.floatingContext){n||Xn(M),B.current=_.current({...l.current.floatingContext,tree:I,x:F.clientX,y:F.clientY,onClose(){$(),fe(),ee()||de(F,!0,"safe-polygon")}});const Ee=B.current;G.addEventListener("mousemove",Ee),oe.current=()=>{G.removeEventListener("mousemove",Ee)};return}(k.current==="touch"?!Za(d.floating,F.relatedTarget):!0)&&de(F)}function W(F){ee()||l.current.floatingContext&&(_.current==null||_.current({...l.current.floatingContext,tree:I,x:F.clientX,y:F.clientY,onClose(){$(),fe(),ee()||de(F)}})(F))}function D(){Xn(M)}function j(F){ee()||de(F,!1)}if(vt(d.domReference)){const F=d.domReference,G=d.floating;return n&&F.addEventListener("mouseleave",W),S&&F.addEventListener("mousemove",P,{once:!0}),F.addEventListener("mouseenter",P),F.addEventListener("mouseleave",K),G&&(G.addEventListener("mouseleave",W),G.addEventListener("mouseenter",D),G.addEventListener("mouseleave",j)),()=>{n&&F.removeEventListener("mouseleave",W),S&&F.removeEventListener("mousemove",P),F.removeEventListener("mouseenter",P),F.removeEventListener("mouseleave",K),G&&(G.removeEventListener("mouseleave",W),G.removeEventListener("mouseenter",D),G.removeEventListener("mouseleave",j))}}},[d,h,e,R,S,de,fe,$,o,n,v,I,b,_,l,ee,L]),wa(()=>{var P;if(h&&n&&(P=_.current)!=null&&P.__options.blockPointerEvents&&ue()){Q.current=!0;const W=d.floating;if(vt(d.domReference)&&W){var K;const D=ln(d.floating).body;D.setAttribute(sp,"");const j=d.domReference,F=I==null||(K=I.nodesRef.current.find(G=>G.id===p))==null||(K=K.context)==null?void 0:K.elements.floating;return F&&(F.style.pointerEvents=""),D.style.pointerEvents="none",j.style.pointerEvents="auto",W.style.pointerEvents="auto",()=>{D.style.pointerEvents="",j.style.pointerEvents="",W.style.pointerEvents=""}}}},[h,n,p,d,I,_,ue]),wa(()=>{n||(k.current=void 0,he.current=!1,fe(),$())},[n,fe,$]),O.useEffect(()=>()=>{fe(),Xn(M),Xn(w),$()},[h,d.domReference,fe,$]);const Y=O.useMemo(()=>{function P(K){k.current=K.pointerType}return{onPointerDown:P,onPointerEnter:P,onMouseMove(K){const{nativeEvent:W}=K;function D(){!x.current&&!v.current&&o(!0,W,"hover")}R&&!nc(k.current)||n||Wm(L.current)===0||he.current&&K.movementX**2+K.movementY**2<2||(Xn(w),k.current==="touch"?D():(he.current=!0,w.current=window.setTimeout(D,Wm(L.current))))}}},[R,o,n,v,L]);return O.useMemo(()=>h?{reference:Y}:{},[h,Y])}const tx=O.createContext({hasProvider:!1,timeoutMs:0,delayRef:{current:0},initialDelayRef:{current:0},timeoutIdRef:{current:-1},currentIdRef:{current:null},currentContextRef:{current:null}});function ax(e,t){t===void 0&&(t={});const{open:n,onOpenChange:o,floatingId:l}=e,{enabled:r=!0}=t,d=O.useContext(tx),{currentIdRef:h,delayRef:E,timeoutMs:A,initialDelayRef:R,currentContextRef:T,hasProvider:S,timeoutIdRef:I}=d,[p,_]=O.useState(!1);return wa(()=>{function b(){var v;_(!1),(v=T.current)==null||v.setIsInstantPhase(!1),h.current=null,T.current=null,E.current=R.current}if(r&&h.current&&!n&&h.current===l){if(_(!1),A)return I.current=window.setTimeout(b,A),()=>{clearTimeout(I.current)};b()}},[r,n,l,h,E,A,R,T,I]),wa(()=>{if(!r||!n)return;const b=T.current,v=h.current;T.current={onOpenChange:o,setIsInstantPhase:_},h.current=l,E.current={open:0,close:yE(R.current,"close")},v!==null&&v!==l?(Xn(I),_(!0),b==null||b.setIsInstantPhase(!0),b==null||b.onOpenChange(!1)):(_(!1),b==null||b.setIsInstantPhase(!1))},[r,n,l,o,h,E,A,R,T,I]),wa(()=>()=>{T.current=null},[T]),O.useMemo(()=>({hasProvider:S,delayRef:E,isInstantPhase:p}),[S,E,p])}let rp=0;function gr(e,t){t===void 0&&(t={});const{preventScroll:n=!1,cancelPrevious:o=!0,sync:l=!1}=t;o&&cancelAnimationFrame(rp);const r=()=>e==null?void 0:e.focus({preventScroll:n});l?r():rp=requestAnimationFrame(r)}function Xm(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&ah(n)){let o=t;for(;o;){if(e===o)return!0;o=o.parentNode||o.host}}return!1}function nx(e){return"composedPath"in e?e.composedPath()[0]:e.target}function ix(e){return(e==null?void 0:e.ownerDocument)||document}let Nr=new WeakMap,gE=new WeakSet,NE={},qm=0;const ox=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,D0=e=>e&&(e.host||D0(e.parentNode)),lx=(e,t)=>t.map(n=>{if(e.contains(n))return n;const o=D0(n);return e.contains(o)?o:null}).filter(n=>n!=null);function sx(e,t,n,o){const l="data-floating-ui-inert",r=o?"inert":n?"aria-hidden":null,d=lx(t,e),h=new Set,E=new Set(d),A=[];NE[l]||(NE[l]=new WeakMap);const R=NE[l];d.forEach(T),S(t),h.clear();function T(I){!I||h.has(I)||(h.add(I),I.parentNode&&T(I.parentNode))}function S(I){!I||E.has(I)||[].forEach.call(I.children,p=>{if(Hl(p)!=="script")if(h.has(p))S(p);else{const _=r?p.getAttribute(r):null,b=_!==null&&_!=="false",v=Nr.get(p)||0,L=r?v+1:v,k=(R.get(p)||0)+1;Nr.set(p,L),R.set(p,k),A.push(p),L===1&&b&&gE.add(p),k===1&&p.setAttribute(l,""),!b&&r&&p.setAttribute(r,r==="inert"?"":"true")}})}return qm++,()=>{A.forEach(I=>{const p=Nr.get(I)||0,_=r?p-1:p,b=(R.get(I)||0)-1;Nr.set(I,_),R.set(I,b),_||(!gE.has(I)&&r&&I.removeAttribute(r),gE.delete(I)),b||I.removeAttribute(l)}),qm--,qm||(Nr=new WeakMap,Nr=new WeakMap,gE=new WeakSet,NE={})}}function cp(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);const o=ix(e[0]).body;return sx(e.concat(Array.from(o.querySelectorAll("[aria-live]"))),o,t,n)}const jh={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0},uh=O.forwardRef(function(t,n){const[o,l]=O.useState();wa(()=>{m0()&&l("button")},[]);const r={ref:n,tabIndex:0,role:o,"aria-hidden":o?void 0:!0,[Ns("focus-guard")]:"",style:jh};return u.jsx("span",{...t,...r})}),y0=O.createContext(null),up=Ns("portal");function v0(e){e===void 0&&(e={});const{id:t,root:n}=e,o=GT(),l=M0(),[r,d]=O.useState(null),h=O.useRef(null);return wa(()=>()=>{r==null||r.remove(),queueMicrotask(()=>{h.current=null})},[r]),wa(()=>{if(!o||h.current)return;const E=t?document.getElementById(t):null;if(!E)return;const A=document.createElement("div");A.id=o,A.setAttribute(up,""),E.appendChild(A),h.current=A,d(A)},[t,o]),wa(()=>{if(n===null||!o||h.current)return;let E=n||(l==null?void 0:l.portalNode);E&&!vt(E)&&(E=E.current),E=E||document.body;let A=null;t&&(A=document.createElement("div"),A.id=t,E.appendChild(A));const R=document.createElement("div");R.id=o,R.setAttribute(up,""),E=A||E,E.appendChild(R),h.current=R,d(R)},[t,n,o,l]),r}function rx(e){const{children:t,id:n,root:o,preserveTabOrder:l=!0}=e,r=v0({id:n,root:o}),[d,h]=O.useState(null),E=O.useRef(null),A=O.useRef(null),R=O.useRef(null),T=O.useRef(null),S=d==null?void 0:d.modal,I=d==null?void 0:d.open,p=!!d&&!d.modal&&d.open&&l&&!!(o||r);return O.useEffect(()=>{if(!r||!l||S)return;function _(b){r&&bu(b)&&(b.type==="focusin"?XN:ok)(r)}return r.addEventListener("focusin",_,!0),r.addEventListener("focusout",_,!0),()=>{r.removeEventListener("focusin",_,!0),r.removeEventListener("focusout",_,!0)}},[r,l,S]),O.useEffect(()=>{r&&(I||XN(r))},[I,r]),u.jsxs(y0.Provider,{value:O.useMemo(()=>({preserveTabOrder:l,beforeOutsideRef:E,afterOutsideRef:A,beforeInsideRef:R,afterInsideRef:T,portalNode:r,setFocusManagerState:h}),[l,r]),children:[p&&r&&u.jsx(uh,{"data-type":"outside",ref:E,onFocus:_=>{if(bu(_,r)){var b;(b=R.current)==null||b.focus()}else{const v=d?d.domReference:null,L=I0(v);L==null||L.focus()}}}),p&&r&&u.jsx("span",{"aria-owns":r.id,style:jh}),r&&Ku.createPortal(t,r),p&&r&&u.jsx(uh,{"data-type":"outside",ref:A,onFocus:_=>{if(bu(_,r)){var b;(b=T.current)==null||b.focus()}else{const v=d?d.domReference:null,L=S0(v);L==null||L.focus(),d!=null&&d.closeOnFocusOut&&(d==null||d.onOpenChange(!1,_.nativeEvent,"focus-out"))}}})]})}const M0=()=>O.useContext(y0);function dp(e){return O.useMemo(()=>t=>{e.forEach(n=>{n&&(n.current=t)})},e)}const cx=20;let os=[];function ux(e){os=os.filter(t=>t.isConnected),e&&Hl(e)!=="body"&&(os.push(e),os.length>cx&&(os=os.slice(-20)))}function Ep(){return os.slice().reverse().find(e=>e.isConnected)}function dx(e){const t=Wu();return f0(e,t)?e:Bh(e,t)[0]||e}function hp(e,t){var n;if(!t.current.includes("floating")&&!((n=e.getAttribute("role"))!=null&&n.includes("dialog")))return;const o=Wu(),r=XU(e,o).filter(h=>{const E=h.getAttribute("data-tabindex")||"";return f0(h,o)||h.hasAttribute("data-tabindex")&&!E.startsWith("-")}),d=e.getAttribute("tabindex");t.current.includes("floating")||r.length===0?d!=="0"&&e.setAttribute("tabindex","0"):(d!=="-1"||e.hasAttribute("data-tabindex")&&e.getAttribute("data-tabindex")!=="-1")&&(e.setAttribute("tabindex","-1"),e.setAttribute("data-tabindex","-1"))}const Ex=O.forwardRef(function(t,n){return u.jsx("button",{...t,type:"button",ref:n,tabIndex:-1,style:jh})});function hx(e){const{context:t,children:n,disabled:o=!1,order:l=["content"],guards:r=!0,initialFocus:d=0,returnFocus:h=!0,restoreFocus:E=!1,modal:A=!0,visuallyHiddenDismiss:R=!1,closeOnFocusOut:T=!0,outsideElementsInert:S=!1,getInsideElements:I=()=>[]}=e,{open:p,onOpenChange:_,events:b,dataRef:v,elements:{domReference:L,floating:k}}=t,M=fn(()=>{var _e;return(_e=v.current.floatingContext)==null?void 0:_e.nodeId}),B=fn(I),w=typeof d=="number"&&d<0,x=VN(L)&&w,Q=ox(),oe=Q?r:!0,he=!oe||Q&&S,ue=rs(l),de=rs(d),fe=rs(h),$=zh(),ee=M0(),Y=O.useRef(null),P=O.useRef(null),K=O.useRef(!1),W=O.useRef(!1),D=O.useRef(-1),j=ee!=null,F=yR(k),G=fn(function(_e){return _e===void 0&&(_e=F),_e?Bh(_e,Wu()):[]}),J=fn(_e=>{const ge=G(_e);return ue.current.map(le=>L&&le==="reference"?L:F&&le==="floating"?F:ge).filter(Boolean).flat()});O.useEffect(()=>{if(o||!A)return;function _e(le){if(le.key==="Tab"){Za(F,fl(ln(F)))&&G().length===0&&!x&&Ym(le);const Ne=J(),Le=Di(le);ue.current[0]==="reference"&&Le===L&&(Ym(le),le.shiftKey?gr(Ne[Ne.length-1]):gr(Ne[1])),ue.current[1]==="floating"&&Le===F&&le.shiftKey&&(Ym(le),gr(Ne[0]))}}const ge=ln(F);return ge.addEventListener("keydown",_e),()=>{ge.removeEventListener("keydown",_e)}},[o,L,F,A,ue,x,G,J]),O.useEffect(()=>{if(o||!k)return;function _e(ge){const le=Di(ge),Le=G().indexOf(le);Le!==-1&&(D.current=Le)}return k.addEventListener("focusin",_e),()=>{k.removeEventListener("focusin",_e)}},[o,k,G]),O.useEffect(()=>{if(o||!T)return;function _e(){W.current=!0,setTimeout(()=>{W.current=!1})}function ge(le){const Ne=le.relatedTarget,Le=le.currentTarget;queueMicrotask(()=>{const Xe=M(),Ze=!(Za(L,Ne)||Za(k,Ne)||Za(Ne,k)||Za(ee==null?void 0:ee.portalNode,Ne)||Ne!=null&&Ne.hasAttribute(Ns("focus-guard"))||$&&(Ou($.nodesRef.current,Xe).find(Qe=>{var Ke,At;return Za((Ke=Qe.context)==null?void 0:Ke.elements.floating,Ne)||Za((At=Qe.context)==null?void 0:At.elements.domReference,Ne)})||WN($.nodesRef.current,Xe).find(Qe=>{var Ke,At,Qt;return[(Ke=Qe.context)==null?void 0:Ke.elements.floating,yR((At=Qe.context)==null?void 0:At.elements.floating)].includes(Ne)||((Qt=Qe.context)==null?void 0:Qt.elements.domReference)===Ne})));if(Le===L&&F&&hp(F,ue),E&&Ze&&fl(ln(F))===ln(F).body){Ia(F)&&F.focus();const Qe=D.current,Ke=G(),At=Ke[Qe]||Ke[Ke.length-1]||F;Ia(At)&&At.focus()}(x||!A)&&Ne&&Ze&&!W.current&&Ne!==Ep()&&(K.current=!0,_(!1,le,"focus-out"))})}if(k&&Ia(L))return L.addEventListener("focusout",ge),L.addEventListener("pointerdown",_e),k.addEventListener("focusout",ge),()=>{L.removeEventListener("focusout",ge),L.removeEventListener("pointerdown",_e),k.removeEventListener("focusout",ge)}},[o,L,k,F,A,$,ee,_,T,E,G,x,M,ue]);const Ee=O.useRef(null),re=O.useRef(null),Ae=dp([Ee,ee==null?void 0:ee.beforeInsideRef]),Re=dp([re,ee==null?void 0:ee.afterInsideRef]);O.useEffect(()=>{var _e,ge;if(o||!k)return;const le=Array.from((ee==null||(_e=ee.portalNode)==null?void 0:_e.querySelectorAll("["+Ns("portal")+"]"))||[]),Ne=$?WN($.nodesRef.current,M()):[],Le=$&&!A?Ne.map(Ke=>{var At;return(At=Ke.context)==null?void 0:At.elements.floating}):[],Xe=(ge=Ne.find(Ke=>{var At;return VN(((At=Ke.context)==null?void 0:At.elements.domReference)||null)}))==null||(ge=ge.context)==null?void 0:ge.elements.domReference,Ze=[k,Xe,...le,...Le,...B(),Y.current,P.current,Ee.current,re.current,ee==null?void 0:ee.beforeOutsideRef.current,ee==null?void 0:ee.afterOutsideRef.current,ue.current.includes("reference")||x?L:null].filter(Ke=>Ke!=null),Qe=A||x?cp(Ze,!he,he):cp(Ze);return()=>{Qe()}},[o,L,k,A,ue,ee,x,oe,he,$,M,B]),wa(()=>{if(o||!Ia(F))return;const _e=ln(F),ge=fl(_e);queueMicrotask(()=>{const le=J(F),Ne=de.current,Le=(typeof Ne=="number"?le[Ne]:Ne.current)||F,Xe=Za(F,ge);!w&&!Xe&&p&&gr(Le,{preventScroll:Le===F})})},[o,p,F,w,J,de]),wa(()=>{if(o||!F)return;let _e=!1;const ge=ln(F),le=fl(ge);ux(le);function Ne(Ze){let{reason:Qe,event:Ke,nested:At}=Ze;if(["hover","safe-polygon"].includes(Qe)&&Ke.type==="mouseleave"&&(K.current=!0),Qe==="outside-press")if(At)K.current=!1,_e=!0;else if(ek(Ke)||tk(Ke))K.current=!1;else{let Qt=!1;document.createElement("div").focus({get preventScroll(){return Qt=!0,!1}}),Qt?(K.current=!1,_e=!0):K.current=!0}}b.on("openchange",Ne);const Le=ge.createElement("span");Le.setAttribute("tabindex","-1"),Le.setAttribute("aria-hidden","true"),Object.assign(Le.style,jh),j&&L&&L.insertAdjacentElement("afterend",Le);function Xe(){if(typeof fe.current=="boolean"){const Ze=L||Ep();return Ze&&Ze.isConnected?Ze:Le}return fe.current.current||Le}return()=>{b.off("openchange",Ne);const Ze=fl(ge),Qe=Za(k,Ze)||$&&Ou($.nodesRef.current,M()).some(At=>{var Qt;return Za((Qt=At.context)==null?void 0:Qt.elements.floating,Ze)}),Ke=Xe();queueMicrotask(()=>{const At=dx(Ke);fe.current&&!K.current&&Ia(At)&&(!(At!==Ze&&Ze!==ge.body)||Qe)&&At.focus({preventScroll:_e}),Le.remove()})}},[o,k,F,fe,v,b,$,j,L,M]),O.useEffect(()=>{queueMicrotask(()=>{K.current=!1})},[o]),wa(()=>{if(!o&&ee)return ee.setFocusManagerState({modal:A,closeOnFocusOut:T,open:p,onOpenChange:_,domReference:L}),()=>{ee.setFocusManagerState(null)}},[o,ee,A,p,_,T,L]),wa(()=>{o||F&&hp(F,ue)},[o,F,ue]);function Ce(_e){return o||!R||!A?null:u.jsx(Ex,{ref:_e==="start"?Y:P,onClick:ge=>_(!1,ge.nativeEvent),children:typeof R=="string"?R:"Dismiss"})}const xe=!o&&oe&&(A?!x:!0)&&(j||A);return u.jsxs(u.Fragment,{children:[xe&&u.jsx(uh,{"data-type":"inside",ref:Ae,onFocus:_e=>{if(A){const le=J();gr(l[0]==="reference"?le[0]:le[le.length-1])}else if(ee!=null&&ee.preserveTabOrder&&ee.portalNode)if(K.current=!1,bu(_e,ee.portalNode)){const le=S0(L);le==null||le.focus()}else{var ge;(ge=ee.beforeOutsideRef.current)==null||ge.focus()}}}),!x&&Ce("start"),n,Ce("end"),xe&&u.jsx(uh,{"data-type":"inside",ref:Re,onFocus:_e=>{if(A)gr(J()[0]);else if(ee!=null&&ee.preserveTabOrder&&ee.portalNode)if(T&&(K.current=!0),bu(_e,ee.portalNode)){const le=I0(L);le==null||le.focus()}else{var ge;(ge=ee.afterOutsideRef.current)==null||ge.focus()}}})]})}function fp(e){return Ia(e.target)&&e.target.tagName==="BUTTON"}function fx(e){return Ia(e.target)&&e.target.tagName==="A"}function Ap(e){return Fh(e)}function Ax(e,t){t===void 0&&(t={});const{open:n,onOpenChange:o,dataRef:l,elements:{domReference:r}}=e,{enabled:d=!0,event:h="click",toggle:E=!0,ignoreMouse:A=!1,keyboardHandlers:R=!0,stickIfOpen:T=!0}=t,S=O.useRef(),I=O.useRef(!1),p=O.useMemo(()=>({onPointerDown(_){S.current=_.pointerType},onMouseDown(_){const b=S.current;_.button===0&&h!=="click"&&(nc(b,!0)&&A||(n&&E&&(!(l.current.openEvent&&T)||l.current.openEvent.type==="mousedown")?o(!1,_.nativeEvent,"click"):(_.preventDefault(),o(!0,_.nativeEvent,"click"))))},onClick(_){const b=S.current;if(h==="mousedown"&&S.current){S.current=void 0;return}nc(b,!0)&&A||(n&&E&&(!(l.current.openEvent&&T)||l.current.openEvent.type==="click")?o(!1,_.nativeEvent,"click"):o(!0,_.nativeEvent,"click"))},onKeyDown(_){S.current=void 0,!(_.defaultPrevented||!R||fp(_))&&(_.key===" "&&!Ap(r)&&(_.preventDefault(),I.current=!0),!fx(_)&&_.key==="Enter"&&o(!(n&&E),_.nativeEvent,"click"))},onKeyUp(_){_.defaultPrevented||!R||fp(_)||Ap(r)||_.key===" "&&I.current&&(I.current=!1,o(!(n&&E),_.nativeEvent,"click"))}}),[l,r,h,A,R,o,n,T,E]);return O.useMemo(()=>d?{reference:p}:{},[d,p])}function mx(e,t){let n=null,o=null,l=!1;return{contextElement:e||void 0,getBoundingClientRect(){var r;const d=(e==null?void 0:e.getBoundingClientRect())||{width:0,height:0,x:0,y:0},h=t.axis==="x"||t.axis==="both",E=t.axis==="y"||t.axis==="both",A=["mouseenter","mousemove"].includes(((r=t.dataRef.current.openEvent)==null?void 0:r.type)||"")&&t.pointerType!=="touch";let R=d.width,T=d.height,S=d.x,I=d.y;return n==null&&t.x&&h&&(n=d.x-t.x),o==null&&t.y&&E&&(o=d.y-t.y),S-=n||0,I-=o||0,R=0,T=0,!l||A?(R=t.axis==="y"?d.width:0,T=t.axis==="x"?d.height:0,S=h&&t.x!=null?t.x:S,I=E&&t.y!=null?t.y:I):l&&!A&&(T=t.axis==="x"?d.height:T,R=t.axis==="y"?d.width:R),l=!0,{width:R,height:T,x:S,y:I,top:I,right:S+R,bottom:I+T,left:S}}}}function mp(e){return e!=null&&e.clientX!=null}function Rx(e,t){t===void 0&&(t={});const{open:n,dataRef:o,elements:{floating:l,domReference:r},refs:d}=e,{enabled:h=!0,axis:E="both",x:A=null,y:R=null}=t,T=O.useRef(!1),S=O.useRef(null),[I,p]=O.useState(),[_,b]=O.useState([]),v=fn((w,x)=>{T.current||o.current.openEvent&&!mp(o.current.openEvent)||d.setPositionReference(mx(r,{x:w,y:x,axis:E,dataRef:o,pointerType:I}))}),L=fn(w=>{A!=null||R!=null||(n?S.current||b([]):v(w.clientX,w.clientY))}),k=nc(I)?l:n,M=O.useCallback(()=>{if(!k||!h||A!=null||R!=null)return;const w=mn(l);function x(Q){const oe=Di(Q);Za(l,oe)?(w.removeEventListener("mousemove",x),S.current=null):v(Q.clientX,Q.clientY)}if(!o.current.openEvent||mp(o.current.openEvent)){w.addEventListener("mousemove",x);const Q=()=>{w.removeEventListener("mousemove",x),S.current=null};return S.current=Q,Q}d.setPositionReference(r)},[k,h,A,R,l,o,d,r,v]);O.useEffect(()=>M(),[M,_]),O.useEffect(()=>{h&&!l&&(T.current=!1)},[h,l]),O.useEffect(()=>{!h&&n&&(T.current=!0)},[h,n]),wa(()=>{h&&(A!=null||R!=null)&&(T.current=!1,v(A,R))},[h,A,R,v]);const B=O.useMemo(()=>{function w(x){let{pointerType:Q}=x;p(Q)}return{onPointerDown:w,onPointerEnter:w,onMouseMove:L,onMouseEnter:L}},[L]);return O.useMemo(()=>h?{reference:B}:{},[h,B])}const Tx={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},Sx={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},Rp=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function L0(e,t){t===void 0&&(t={});const{open:n,onOpenChange:o,elements:l,dataRef:r}=e,{enabled:d=!0,escapeKey:h=!0,outsidePress:E=!0,outsidePressEvent:A="pointerdown",referencePress:R=!1,referencePressEvent:T="pointerdown",ancestorScroll:S=!1,bubbles:I,capture:p}=t,_=zh(),b=fn(typeof E=="function"?E:()=>!1),v=typeof E=="function"?b:E,L=O.useRef(!1),k=O.useRef(!1),{escapeKey:M,outsidePress:B}=Rp(I),{escapeKey:w,outsidePress:x}=Rp(p),Q=O.useRef(!1),oe=fn(ee=>{var Y;if(!n||!d||!h||ee.key!=="Escape"||Q.current)return;const P=(Y=r.current.floatingContext)==null?void 0:Y.nodeId,K=_?Ou(_.nodesRef.current,P):[];if(!M&&(ee.stopPropagation(),K.length>0)){let W=!0;if(K.forEach(D=>{var j;if((j=D.context)!=null&&j.open&&!D.context.dataRef.current.__escapeKeyBubbles){W=!1;return}}),!W)return}o(!1,JU(ee)?ee.nativeEvent:ee,"escape-key")}),he=fn(ee=>{var Y;const P=()=>{var K;oe(ee),(K=Di(ee))==null||K.removeEventListener("keydown",P)};(Y=Di(ee))==null||Y.addEventListener("keydown",P)}),ue=fn(ee=>{var Y;const P=L.current;L.current=!1;const K=k.current;if(k.current=!1,A==="click"&&K||P||typeof v=="function"&&!v(ee))return;const W=Di(ee),D="["+Ns("inert")+"]",j=ln(l.floating).querySelectorAll(D);let F=vt(W)?W:null;for(;F&&!Ho(F);){const re=xo(F);if(Ho(re)||!vt(re))break;F=re}if(j.length&&vt(W)&&!QU(W)&&!Za(W,l.floating)&&Array.from(j).every(re=>!Za(F,re)))return;if(Ia(W)&&$){const re=Ho(W),Ae=Ai(W),Re=/auto|scroll/,Ce=re||Re.test(Ae.overflowX),xe=re||Re.test(Ae.overflowY),_e=Ce&&W.clientWidth>0&&W.scrollWidth>W.clientWidth,ge=xe&&W.clientHeight>0&&W.scrollHeight>W.clientHeight,le=Ae.direction==="rtl",Ne=ge&&(le?ee.offsetX<=W.offsetWidth-W.clientWidth:ee.offsetX>W.clientWidth),Le=_e&&ee.offsetY>W.clientHeight;if(Ne||Le)return}const G=(Y=r.current.floatingContext)==null?void 0:Y.nodeId,J=_&&Ou(_.nodesRef.current,G).some(re=>{var Ae;return jm(ee,(Ae=re.context)==null?void 0:Ae.elements.floating)});if(jm(ee,l.floating)||jm(ee,l.domReference)||J)return;const Ee=_?Ou(_.nodesRef.current,G):[];if(Ee.length>0){let re=!0;if(Ee.forEach(Ae=>{var Re;if((Re=Ae.context)!=null&&Re.open&&!Ae.context.dataRef.current.__outsidePressBubbles){re=!1;return}}),!re)return}o(!1,ee,"outside-press")}),de=fn(ee=>{var Y;const P=()=>{var K;ue(ee),(K=Di(ee))==null||K.removeEventListener(A,P)};(Y=Di(ee))==null||Y.addEventListener(A,P)});O.useEffect(()=>{if(!n||!d)return;r.current.__escapeKeyBubbles=M,r.current.__outsidePressBubbles=B;let ee=-1;function Y(j){o(!1,j,"ancestor-scroll")}function P(){window.clearTimeout(ee),Q.current=!0}function K(){ee=window.setTimeout(()=>{Q.current=!1},wh()?5:0)}const W=ln(l.floating);h&&(W.addEventListener("keydown",w?he:oe,w),W.addEventListener("compositionstart",P),W.addEventListener("compositionend",K)),v&&W.addEventListener(A,x?de:ue,x);let D=[];return S&&(vt(l.domReference)&&(D=Il(l.domReference)),vt(l.floating)&&(D=D.concat(Il(l.floating))),!vt(l.reference)&&l.reference&&l.reference.contextElement&&(D=D.concat(Il(l.reference.contextElement)))),D=D.filter(j=>{var F;return j!==((F=W.defaultView)==null?void 0:F.visualViewport)}),D.forEach(j=>{j.addEventListener("scroll",Y,{passive:!0})}),()=>{h&&(W.removeEventListener("keydown",w?he:oe,w),W.removeEventListener("compositionstart",P),W.removeEventListener("compositionend",K)),v&&W.removeEventListener(A,x?de:ue,x),D.forEach(j=>{j.removeEventListener("scroll",Y)}),window.clearTimeout(ee)}},[r,l,h,v,A,n,o,S,d,M,B,oe,w,he,ue,x,de]),O.useEffect(()=>{L.current=!1},[v,A]);const fe=O.useMemo(()=>({onKeyDown:oe,...R&&{[Tx[T]]:ee=>{o(!1,ee.nativeEvent,"reference-press")},...T!=="click"&&{onClick(ee){o(!1,ee.nativeEvent,"reference-press")}}}}),[oe,o,R,T]),$=O.useMemo(()=>({onKeyDown:oe,onMouseDown(){k.current=!0},onMouseUp(){k.current=!0},[Sx[A]]:()=>{L.current=!0}}),[oe,A]);return O.useMemo(()=>d?{reference:fe,floating:$}:{},[d,fe,$])}function FT(e){const{open:t=!1,onOpenChange:n,elements:o}=e,l=GT(),r=O.useRef({}),[d]=O.useState(()=>Qk()),h=BT()!=null,[E,A]=O.useState(o.reference),R=fn((I,p,_)=>{r.current.openEvent=I?p:void 0,d.emit("openchange",{open:I,event:p,reason:_,nested:h}),n==null||n(I,p,_)}),T=O.useMemo(()=>({setPositionReference:A}),[]),S=O.useMemo(()=>({reference:E||o.reference||null,floating:o.floating||null,domReference:o.reference}),[E,o.reference,o.floating]);return O.useMemo(()=>({dataRef:r,open:t,onOpenChange:R,elements:S,events:d,floatingId:l,refs:T}),[t,R,S,d,l,T])}function Ix(e){e===void 0&&(e={});const{nodeId:t}=e,n=FT({...e,elements:{reference:null,floating:null,...e.elements}}),o=e.rootContext||n,l=o.elements,[r,d]=O.useState(null),[h,E]=O.useState(null),R=(l==null?void 0:l.domReference)||r,T=O.useRef(null),S=zh();wa(()=>{R&&(T.current=R)},[R]);const I=Pk({...e,elements:{...l,...h&&{reference:h}}}),p=O.useCallback(k=>{const M=vt(k)?{getBoundingClientRect:()=>k.getBoundingClientRect(),getClientRects:()=>k.getClientRects(),contextElement:k}:k;E(M),I.refs.setReference(M)},[I.refs]),_=O.useCallback(k=>{(vt(k)||k===null)&&(T.current=k,d(k)),(vt(I.refs.reference.current)||I.refs.reference.current===null||k!==null&&!vt(k))&&I.refs.setReference(k)},[I.refs]),b=O.useMemo(()=>({...I.refs,setReference:_,setPositionReference:p,domReference:T}),[I.refs,_,p]),v=O.useMemo(()=>({...I.elements,domReference:R}),[I.elements,R]),L=O.useMemo(()=>({...I,...o,refs:b,elements:v,nodeId:t}),[I,b,v,t,o]);return wa(()=>{o.dataRef.current.floatingContext=L;const k=S==null?void 0:S.nodesRef.current.find(M=>M.id===t);k&&(k.context=L)}),O.useMemo(()=>({...I,context:L,refs:b,elements:v}),[I,b,v,L])}function Zm(){return qU()&&m0()}function _x(e,t){t===void 0&&(t={});const{open:n,onOpenChange:o,events:l,dataRef:r,elements:d}=e,{enabled:h=!0,visibleOnly:E=!0}=t,A=O.useRef(!1),R=O.useRef(-1),T=O.useRef(!0);O.useEffect(()=>{if(!h)return;const I=mn(d.domReference);function p(){!n&&Ia(d.domReference)&&d.domReference===fl(ln(d.domReference))&&(A.current=!0)}function _(){T.current=!0}function b(){T.current=!1}return I.addEventListener("blur",p),Zm()&&(I.addEventListener("keydown",_,!0),I.addEventListener("pointerdown",b,!0)),()=>{I.removeEventListener("blur",p),Zm()&&(I.removeEventListener("keydown",_,!0),I.removeEventListener("pointerdown",b,!0))}},[d.domReference,n,h]),O.useEffect(()=>{if(!h)return;function I(p){let{reason:_}=p;(_==="reference-press"||_==="escape-key")&&(A.current=!0)}return l.on("openchange",I),()=>{l.off("openchange",I)}},[l,h]),O.useEffect(()=>()=>{Xn(R)},[]);const S=O.useMemo(()=>({onMouseLeave(){A.current=!1},onFocus(I){if(A.current)return;const p=Di(I.nativeEvent);if(E&&vt(p)){if(Zm()&&!I.relatedTarget){if(!T.current&&!Fh(p))return}else if(!$U(p))return}o(!0,I.nativeEvent,"focus")},onBlur(I){A.current=!1;const p=I.relatedTarget,_=I.nativeEvent,b=vt(p)&&p.hasAttribute(Ns("focus-guard"))&&p.getAttribute("data-type")==="outside";R.current=window.setTimeout(()=>{var v;const L=fl(d.domReference?d.domReference.ownerDocument:document);!p&&L===d.domReference||Za((v=r.current.floatingContext)==null?void 0:v.refs.floating.current,L)||Za(d.domReference,L)||b||o(!1,_,"focus")})}}),[r,d.domReference,o,E]);return O.useMemo(()=>h?{reference:S}:{},[h,S])}function Qm(e,t,n){const o=new Map,l=n==="item";let r=e;if(l&&e){const{[np]:d,[ip]:h,...E}=e;r=E}return{...n==="floating"&&{tabIndex:-1,[Vk]:""},...r,...t.map(d=>{const h=d?d[n]:null;return typeof h=="function"?e?h(e):null:h}).concat(e).reduce((d,h)=>(h&&Object.entries(h).forEach(E=>{let[A,R]=E;if(!(l&&[np,ip].includes(A)))if(A.indexOf("on")===0){if(o.has(A)||o.set(A,[]),typeof R=="function"){var T;(T=o.get(A))==null||T.push(R),d[A]=function(){for(var S,I=arguments.length,p=new Array(I),_=0;_<I;_++)p[_]=arguments[_];return(S=o.get(A))==null?void 0:S.map(b=>b(...p)).find(b=>b!==void 0)}}}else d[A]=R}),d),{})}}function H0(e){e===void 0&&(e=[]);const t=e.map(h=>h==null?void 0:h.reference),n=e.map(h=>h==null?void 0:h.floating),o=e.map(h=>h==null?void 0:h.item),l=O.useCallback(h=>Qm(h,e,"reference"),t),r=O.useCallback(h=>Qm(h,e,"floating"),n),d=O.useCallback(h=>Qm(h,e,"item"),o);return O.useMemo(()=>({getReferenceProps:l,getFloatingProps:r,getItemProps:d}),[l,r,d])}const gx=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function Nx(e,t){var n,o;t===void 0&&(t={});const{open:l,elements:r,floatingId:d}=e,{enabled:h=!0,role:E="dialog"}=t,A=GT(),R=((n=r.domReference)==null?void 0:n.id)||A,T=O.useMemo(()=>{var L;return((L=yR(r.floating))==null?void 0:L.id)||d},[r.floating,d]),S=(o=gx.get(E))!=null?o:E,p=BT()!=null,_=O.useMemo(()=>S==="tooltip"||E==="label"?{["aria-"+(E==="label"?"labelledby":"describedby")]:l?T:void 0}:{"aria-expanded":l?"true":"false","aria-haspopup":S==="alertdialog"?"dialog":S,"aria-controls":l?T:void 0,...S==="listbox"&&{role:"combobox"},...S==="menu"&&{id:R},...S==="menu"&&p&&{role:"menuitem"},...E==="select"&&{"aria-autocomplete":"none"},...E==="combobox"&&{"aria-autocomplete":"list"}},[S,T,p,l,R,E]),b=O.useMemo(()=>{const L={id:T,...S&&{role:S}};return S==="tooltip"||E==="label"?L:{...L,...S==="menu"&&{"aria-labelledby":R}}},[S,T,R,E]),v=O.useCallback(L=>{let{active:k,selected:M}=L;const B={role:"option",...k&&{id:T+"-fui-option"}};switch(E){case"select":return{...B,"aria-selected":k&&M};case"combobox":return{...B,"aria-selected":M}}return{}},[T,E]);return O.useMemo(()=>h?{reference:_,floating:b,item:v}:{},[h,_,b,v])}function px(e,t,n){n===void 0&&(n=!0);let o=e.filter(r=>{var d;return r.parentId===t&&((d=r.context)==null?void 0:d.open)}),l=o;for(;l.length;)l=n?e.filter(r=>{var d;return(d=l)==null?void 0:d.some(h=>{var E;return r.parentId===h.id&&((E=r.context)==null?void 0:E.open)})}):e,o=o.concat(l);return o}function Tp(e,t){const[n,o]=e;let l=!1;const r=t.length;for(let d=0,h=r-1;d<r;h=d++){const[E,A]=t[d]||[0,0],[R,T]=t[h]||[0,0];A>=o!=T>=o&&n<=(R-E)*(o-A)/(T-A)+E&&(l=!l)}return l}function Cx(e,t){return e[0]>=t.x&&e[0]<=t.x+t.width&&e[1]>=t.y&&e[1]<=t.y+t.height}function Ox(e){e===void 0&&(e={});const{buffer:t=.5,blockPointerEvents:n=!1,requireIntent:o=!0}=e;let l,r=!1,d=null,h=null,E=performance.now();function A(T,S){const I=performance.now(),p=I-E;if(d===null||h===null||p===0)return d=T,h=S,E=I,null;const _=T-d,b=S-h,L=Math.sqrt(_*_+b*b)/p;return d=T,h=S,E=I,L}const R=T=>{let{x:S,y:I,placement:p,elements:_,onClose:b,nodeId:v,tree:L}=T;return function(M){function B(){clearTimeout(l),b()}if(clearTimeout(l),!_.domReference||!_.floating||p==null||S==null||I==null)return;const{clientX:w,clientY:x}=M,Q=[w,x],oe=nx(M),he=M.type==="mouseleave",ue=Xm(_.floating,oe),de=Xm(_.domReference,oe),fe=_.domReference.getBoundingClientRect(),$=_.floating.getBoundingClientRect(),ee=p.split("-")[0],Y=S>$.right-$.width/2,P=I>$.bottom-$.height/2,K=Cx(Q,fe),W=$.width>fe.width,D=$.height>fe.height,j=(W?fe:$).left,F=(W?fe:$).right,G=(D?fe:$).top,J=(D?fe:$).bottom;if(ue&&(r=!0,!he))return;if(de&&(r=!1),de&&!he){r=!0;return}if(he&&vt(M.relatedTarget)&&Xm(_.floating,M.relatedTarget)||L&&px(L.nodesRef.current,v).some(Ae=>{let{context:Re}=Ae;return Re==null?void 0:Re.open}))return;if(ee==="top"&&I>=fe.bottom-1||ee==="bottom"&&I<=fe.top+1||ee==="left"&&S>=fe.right-1||ee==="right"&&S<=fe.left+1)return B();let Ee=[];switch(ee){case"top":Ee=[[j,fe.top+1],[j,$.bottom-1],[F,$.bottom-1],[F,fe.top+1]];break;case"bottom":Ee=[[j,$.top+1],[j,fe.bottom-1],[F,fe.bottom-1],[F,$.top+1]];break;case"left":Ee=[[$.right-1,J],[$.right-1,G],[fe.left+1,G],[fe.left+1,J]];break;case"right":Ee=[[fe.right-1,J],[fe.right-1,G],[$.left+1,G],[$.left+1,J]];break}function re(Ae){let[Re,Ce]=Ae;switch(ee){case"top":{const xe=[W?Re+t/2:Y?Re+t*4:Re-t*4,Ce+t+1],_e=[W?Re-t/2:Y?Re+t*4:Re-t*4,Ce+t+1],ge=[[$.left,Y||W?$.bottom-t:$.top],[$.right,Y?W?$.bottom-t:$.top:$.bottom-t]];return[xe,_e,...ge]}case"bottom":{const xe=[W?Re+t/2:Y?Re+t*4:Re-t*4,Ce-t],_e=[W?Re-t/2:Y?Re+t*4:Re-t*4,Ce-t],ge=[[$.left,Y||W?$.top+t:$.bottom],[$.right,Y?W?$.top+t:$.bottom:$.top+t]];return[xe,_e,...ge]}case"left":{const xe=[Re+t+1,D?Ce+t/2:P?Ce+t*4:Ce-t*4],_e=[Re+t+1,D?Ce-t/2:P?Ce+t*4:Ce-t*4];return[...[[P||D?$.right-t:$.left,$.top],[P?D?$.right-t:$.left:$.right-t,$.bottom]],xe,_e]}case"right":{const xe=[Re-t,D?Ce+t/2:P?Ce+t*4:Ce-t*4],_e=[Re-t,D?Ce-t/2:P?Ce+t*4:Ce-t*4],ge=[[P||D?$.left+t:$.right,$.top],[P?D?$.left+t:$.right:$.left+t,$.bottom]];return[xe,_e,...ge]}}}if(!Tp([w,x],Ee)){if(r&&!K)return B();if(!he&&o){const Ae=A(M.clientX,M.clientY);if(Ae!==null&&Ae<.1)return B()}Tp([w,x],re([S,I]))?!r&&o&&(l=window.setTimeout(B,40)):B()}}};return R.__options={blockPointerEvents:n},R}function U0({controlled:e,default:t,name:n,state:o="value"}){const{current:l}=O.useRef(e!==void 0),[r,d]=O.useState(t),h=l?e:r,E=O.useCallback(A=>{l||d(A)},[]);return[h,E]}const Ji=typeof window<"u"?O.useLayoutEffect:O.useEffect;function k0(e){const[t,n]=O.useState(e?"idle":void 0),[o,l]=O.useState(e);return e&&!o&&(l(!0),n("starting")),!e&&o&&t!=="ending"&&n("ending"),!e&&!o&&t==="ending"&&n(void 0),Ji(()=>{if(!e)return;e&&o&&t!=="idle"&&n("starting");const r=requestAnimationFrame(()=>{n("idle")});return()=>{cancelAnimationFrame(r)}},[e,o,n,t]),O.useMemo(()=>({mounted:o,setMounted:l,transitionStatus:t}),[o,t])}function mi(e){const t=O.useRef(e);return Ji(()=>{t.current=e}),O.useCallback((...n)=>{var o;return(o=t.current)==null?void 0:o.call(t,...n)},[])}const x0=600;function P0(e){if(e)return{click:"click",hover:"hover",focus:"focus","focus-out":"focus-out","escape-key":"escape-key","outside-press":"outside-press","reference-press":"trigger-press","safe-polygon":"hover","ancestor-scroll":void 0,"list-navigation":void 0}[e]}function bx(e,t=!1){const n=O.useRef(-1),o=O.useRef(-1),l=mi(()=>{cancelAnimationFrame(n.current),clearTimeout(o.current)});return O.useEffect(()=>l,[l]),mi((r,d=null)=>{l();const h=e.current;h&&(typeof h.getAnimations!="function"||globalThis.BASE_UI_ANIMATIONS_DISABLED?r():n.current=requestAnimationFrame(()=>{function E(){h&&Promise.allSettled(h.getAnimations().map(A=>A.finished)).then(()=>{d!=null&&d.aborted||Ku.flushSync(r)})}t?o.current=window.setTimeout(E):E()}))})}function vR(e){const t=O.useRef(e);return Ji(()=>{t.current=e}),t}function Yh(e){const{enabled:t=!0,open:n,ref:o,onComplete:l}=e,r=vR(n),d=mi(l),h=bx(o,n);O.useEffect(()=>{t&&h(()=>{n===r.current&&d()})},[t,n,d,h,r])}const Dx=O.createContext(void 0);function yx(){return O.useContext(Dx)}function vx(e){const{open:t,onOpenChange:n,defaultOpen:o=!1,hoverable:l=!0,trackCursorAxis:r="none",delay:d,closeDelay:h,onOpenChangeComplete:E,disabled:A}=e,R=d??x0,T=h??0,[S,I]=O.useState(null),[p,_]=O.useState(null),[b,v]=O.useState(),L=O.useRef(null),[k,M]=U0({controlled:t,default:o,name:"Tooltip",state:"open"}),B=mi(n),w=O.useCallback((G,J,Ee)=>{B(G,J,Ee),M(G)},[B,M]);k&&A&&w(!1,void 0,void 0);const{mounted:x,setMounted:Q,transitionStatus:oe}=k0(k),he=mi(()=>{Q(!1),E==null||E(!1)});Yh({enabled:!e.actionsRef,open:k,ref:L,onComplete(){k||he()}}),O.useImperativeHandle(e.actionsRef,()=>({unmount:he}),[he]);const ue=FT({elements:{reference:S,floating:p},open:k,onOpenChange(G,J,Ee){const re=Ee==="hover"||Ee==="safe-polygon",Ae=G&&Ee==="focus",Re=!G&&(Ee==="reference-press"||Ee==="escape-key");function Ce(){w(G,J,P0(Ee))}re?Ku.flushSync(Ce):Ce(),Ae||Re?v(Ae?"focus":"dismiss"):Ee==="hover"&&v(void 0)}}),de=yx(),{delayRef:fe,isInstantPhase:$,hasProvider:ee}=ax(ue),Y=$?"delay":b,P=ex(ue,{enabled:!A,mouseOnly:!0,move:!1,handleClose:l&&r!=="both"?Ox():null,restMs(){const G=de==null?void 0:de.delay,J=typeof fe.current=="object"?fe.current.open:void 0;let Ee=R;return ee&&(J!==0?Ee=d??G??R:Ee=0),Ee},delay(){const G=typeof fe.current=="object"?fe.current.close:void 0;let J=T;return h==null&&ee&&(J=G),{close:J}}}),K=_x(ue,{enabled:!A}),W=L0(ue,{enabled:!A,referencePress:!0}),D=Rx(ue,{enabled:!A&&r!=="none",axis:r==="none"?void 0:r}),{getReferenceProps:j,getFloatingProps:F}=H0([P,K,W,D]);return O.useMemo(()=>({open:k,setOpen:w,mounted:x,setMounted:Q,setTriggerElement:I,positionerElement:p,setPositionerElement:_,popupRef:L,getTriggerProps:j,getPopupProps:F,floatingRootContext:ue,instantType:Y,transitionStatus:oe,onOpenChangeComplete:E}),[x,k,Q,p,w,j,F,ue,Y,oe,E])}const w0=function(t){const{disabled:n=!1,defaultOpen:o=!1,onOpenChange:l,open:r,delay:d,closeDelay:h,hoverable:E=!0,trackCursorAxis:A="none",actionsRef:R,onOpenChangeComplete:T}=t,S=d??x0,I=h??0,p=vx({...t,defaultOpen:o,onOpenChange:l,open:r,hoverable:E,trackCursorAxis:A,delay:d,closeDelay:h,actionsRef:R,onOpenChangeComplete:T,disabled:n}),_=O.useMemo(()=>({...p,delay:S,closeDelay:I,trackCursorAxis:A}),[p,S,I,A]);return u.jsx(i0.Provider,{value:_,children:t.children})};let dh=function(e){return e.startingStyle="data-starting-style",e.endingStyle="data-ending-style",e}({});const Mx={[dh.startingStyle]:""},Lx={[dh.endingStyle]:""},zT={transitionStatus(e){return e==="starting"?Mx:e==="ending"?Lx:null}};let cs=function(e){return e.open="data-open",e.closed="data-closed",e[e.startingStyle=dh.startingStyle]="startingStyle",e[e.endingStyle=dh.endingStyle]="endingStyle",e.anchorHidden="data-anchor-hidden",e}({}),Hx=function(e){return e.popupOpen="data-popup-open",e.pressed="data-pressed",e}({});const Ux={[Hx.popupOpen]:""},kx={[cs.open]:""},xx={[cs.closed]:""},Px={[cs.anchorHidden]:""},G0={open(e){return e?Ux:null}},Kh={open(e){return e?kx:xx},anchorHidden(e){return e?Px:null}};function wx(e,t){let n={};return Object.entries(e).forEach(([o,l])=>{if(t!=null&&t.hasOwnProperty(o)){const r=t[o](l);r!=null&&(n={...n,...r});return}l===!0?n[`data-${o.toLowerCase()}`]="":l&&(n[`data-${o.toLowerCase()}`]=l.toString())}),n}function Gx(e,t){return typeof e=="function"?e(t):e}function Go(...e){if(e.length===0)return{};if(e.length===1)return Sp(e[0],{});let t=Sp(e[0],{});for(let n=1;n<e.length;n+=1){const o=e[n];o&&(B0(o)?t=o(t):t=Bx(t,o))}return t??{}}function Sp(e,t){return B0(e)?e(t):e??{}}function Bx(e,t){return t?e?Object.entries(t).reduce((n,[o,l])=>(Fx(o,l)?n[o]=zx(e[o],l):o==="style"?n[o]=jx(e.style,l):o==="className"?n[o]=Yx(e.className,l):n[o]=l,n),{...e}):t:e||{}}function Fx(e,t){const n=e.charCodeAt(2);return e[0]==="o"&&e[1]==="n"&&n>=65&&n<=90&&typeof t=="function"}function B0(e){return typeof e=="function"}function zx(e,t){return n=>{if(Kx(n)){const l=n;MR(l);const r=t(l);return l.baseUIHandlerPrevented||e==null||e(l),r}const o=t(n);return e==null||e(n),o}}function MR(e){return e.preventBaseUIHandler=()=>{e.baseUIHandlerPrevented=!0},e}function jx(e,t){if(t||e)return{...e,...t}}function Yx(e,t){return t?e?t+" "+e:t:e}function Kx(e){return e!=null&&typeof e=="object"&&"nativeEvent"in e}function Vx(e,t,n){return typeof e=="function"?e(t,n):O.cloneElement(e,{...Go(t,e.props),ref:t.ref})}function cc(...e){const t=O.useRef(void 0),n=O.useCallback(o=>{const l=e.map(r=>{if(r==null)return null;if(typeof r=="function"){const d=r,h=d(o);return typeof h=="function"?h:()=>{d(null)}}return r.current=o,()=>{r.current=null}});return()=>{l.forEach(r=>r==null?void 0:r())}},e);return O.useMemo(()=>e.every(o=>o==null)?null:o=>{t.current&&(t.current(),t.current=void 0),o!=null&&(t.current=n(o))},e)}const Wx=parseInt(O.version,10);function F0(e){return Wx>=e}function Xx(e,...t){let n;return typeof e!="function"?n=F0(19)?e.props.ref:e.ref:n=null,cc(n,...t)}function qx(e){return function(n){return e==="button"?u.jsx("button",{type:"button",...n}):e==="img"?u.jsx("img",{alt:"",...n}):u.jsx(e,{...n})}}const Ip={};function Vh(e,t,n={}){const{className:o,render:l}=t,{propGetter:r=v=>v,state:d=Ip,ref:h,props:E,customStyleHookMapping:A,styleHooks:R=!0}=n,T=l||(typeof e=="string"?qx(e):e),S=Gx(o,d),I=O.useMemo(()=>R?wx(d,A):Ip,[d,A,R]),p=r({...I,...Array.isArray(E)?Go(...E):E});let _=[];h!==void 0&&(_=Array.isArray(h)?h:[h]);const b={...p,ref:Xx(T,p.ref,..._)};return S!==void 0&&(b.className=S),()=>Vx(T,b,d)}const Zx=O.forwardRef(function(t,n){const{className:o,render:l,...r}=t,{open:d,setTriggerElement:h,getTriggerProps:E}=Yu(),A=O.useMemo(()=>({open:d}),[d]);return Vh("button",t,{state:A,ref:[n,h],props:[E,r],customStyleHookMapping:G0})()});zm.oneOfType([zm.func,zm.object]);const z0=O.createContext(void 0);function Qx(){const e=O.useContext(z0);if(e===void 0)throw new Error("Base UI: <Tooltip.Portal> is missing.");return e}function $x(e){const t=v0({root:e.root});return t&&Ku.createPortal(e.children,t)}function j0(e){const{children:t,keepMounted:n=!1,container:o}=e,{mounted:l}=Yu();return l||n?u.jsx(z0.Provider,{value:n,children:u.jsx($x,{root:o,children:t})}):null}const Y0=O.createContext(void 0);function Jx(){const e=O.useContext(Y0);if(e===void 0)throw new Error("Base UI: TooltipPositionerContext is missing. TooltipPositioner parts must be placed within <Tooltip.Positioner>.");return e}const eP=O.createContext(void 0);function tP(e=!0){const t=O.useContext(eP);if(t===void 0&&!e)throw new Error("Base UI: DirectionContext is missing.");return(t==null?void 0:t.direction)??"ltr"}function _p(e,t,n){const o=e==="inline-start"||e==="inline-end";return{top:"top",right:o?n?"inline-start":"inline-end":"right",bottom:"bottom",left:o?n?"inline-end":"inline-start":"left"}[t]}function aP(e){var xe,_e;const{anchor:t,positionMethod:n="absolute",side:o="bottom",sideOffset:l=0,align:r="center",alignOffset:d=0,collisionBoundary:h,collisionPadding:E=5,sticky:A=!1,arrowPadding:R=5,keepMounted:T=!1,floatingRootContext:S,mounted:I,trackAnchor:p=!0,nodeId:_}=e,v=tP()==="rtl",L={top:"top",right:"right",bottom:"bottom",left:"left","inline-end":v?"left":"right","inline-start":v?"right":"left"}[o],k=r==="center"?L:`${L}-${r}`,M={boundary:h==="clipping-ancestors"?"clippingAncestors":h,padding:E},B=O.useRef(null),w=vR(l),x=vR(d),he=[Gk(({rects:ge,placement:le})=>{const Ne={side:_p(o,fi(le),v),align:bl(le)||"center",anchor:{width:ge.reference.width,height:ge.reference.height},positioner:{width:ge.floating.width,height:ge.floating.height}},Le=typeof w.current=="function"?w.current(Ne):w.current,Xe=typeof x.current=="function"?x.current(Ne):x.current;return{mainAxis:Le,crossAxis:Xe,alignmentAxis:Xe}},[typeof l!="function"?l:0,typeof d!="function"?d:0,v,o])],ue=zk(M),de=Bk({...M,crossAxis:A,limiter:A?void 0:Fk(()=>{if(!B.current)return{};const{height:ge}=B.current.getBoundingClientRect();return{offset:ge/2+(typeof E=="number"?E:0)}})});r!=="center"?he.push(ue,de):he.push(de,ue),he.push(jk({...M,apply({elements:{floating:ge},rects:{reference:le},availableWidth:Ne,availableHeight:Le}){Object.entries({"--available-width":`${Ne}px`,"--available-height":`${Le}px`,"--anchor-width":`${le.width}px`,"--anchor-height":`${le.height}px`}).forEach(([Xe,Ze])=>{ge.style.setProperty(Xe,Ze)})}}),Kk(()=>({element:B.current||document.createElement("div"),padding:R}),[R]),Yk(),{name:"transformOrigin",fn({elements:ge,middlewareData:le,placement:Ne}){var ld,sd;const Le=fi(Ne),Xe=B.current,Ze=((ld=le.arrow)==null?void 0:ld.x)??0,Qe=((sd=le.arrow)==null?void 0:sd.y)??0,Ke=(Xe==null?void 0:Xe.clientWidth)??0,At=(Xe==null?void 0:Xe.clientHeight)??0,Qt=Ze+Ke/2,wl=Qe+At/2,xs={top:`${Qt}px calc(100% + ${l}px)`,bottom:`${Qt}px ${-l}px`,left:`calc(100% + ${l}px) ${wl}px`,right:`${-l}px ${wl}px`}[Le];return ge.floating.style.setProperty("--transform-origin",xs),{}}});let fe=S;!I&&S&&(fe={...S,elements:{reference:null,floating:null,domReference:null}});const $=O.useMemo(()=>({elementResize:p&&typeof ResizeObserver<"u",layoutShift:p&&typeof IntersectionObserver<"u"}),[p]),{refs:ee,elements:Y,floatingStyles:P,middlewareData:K,update:W,placement:D,context:j,isPositioned:F}=Ix({rootContext:fe,placement:k,middleware:he,strategy:n,whileElementsMounted:T?void 0:(...ge)=>ep(...ge,$),nodeId:_}),G=O.useRef(null);Ji(()=>{if(!I)return;const ge=typeof t=="function"?t():t;if(ge){const le=gp(ge)?ge.current:ge;ee.setPositionReference(le),G.current=le}},[I,ee,t]),O.useEffect(()=>{I&&typeof t!="function"&&gp(t)&&t.current!==G.current&&(ee.setPositionReference(t.current),G.current=t.current)},[I,ee,t]),O.useEffect(()=>{if(T&&I&&Y.domReference&&Y.floating)return ep(Y.domReference,Y.floating,W,$)},[T,I,Y,W,$]);const J=fi(D),Ee=_p(o,J,v),re=bl(D)||"center",Ae=!!((xe=K.hide)!=null&&xe.referenceHidden),Re=O.useMemo(()=>{var ge,le;return{position:"absolute",top:(ge=K.arrow)==null?void 0:ge.y,left:(le=K.arrow)==null?void 0:le.x}},[K.arrow]),Ce=((_e=K.arrow)==null?void 0:_e.centerOffset)!==0;return O.useMemo(()=>({positionerStyles:P,arrowStyles:Re,arrowRef:B,arrowUncentered:Ce,side:Ee,align:re,anchorHidden:Ae,refs:ee,context:j,isPositioned:F}),[P,Re,B,Ce,Ee,re,Ae,ee,j,F])}function gp(e){return e!=null&&"current"in e}function nP(e){const{open:t,trackCursorAxis:n,mounted:o}=Yu(),l=aP(e),r=O.useMemo(()=>{const d={};return(!t||n==="both")&&(d.pointerEvents="none"),{role:"presentation",hidden:!o,style:{...l.positionerStyles,...d}}},[t,n,o,l.positionerStyles]);return O.useMemo(()=>({props:r,...l}),[r,l])}const K0=O.forwardRef(function(t,n){const{render:o,className:l,anchor:r,positionMethod:d="absolute",side:h="top",align:E="center",sideOffset:A=0,alignOffset:R=0,collisionBoundary:T="clipping-ancestors",collisionPadding:S=5,arrowPadding:I=5,sticky:p=!1,trackAnchor:_=!0,...b}=t,{open:v,setPositionerElement:L,mounted:k,floatingRootContext:M}=Yu(),B=Qx(),w=nP({anchor:r,positionMethod:d,floatingRootContext:M,trackAnchor:_,mounted:k,side:h,sideOffset:A,align:E,alignOffset:R,collisionBoundary:T,collisionPadding:S,sticky:p,arrowPadding:I,keepMounted:B}),x=O.useMemo(()=>({open:v,side:w.side,align:w.align,anchorHidden:w.anchorHidden}),[v,w.side,w.align,w.anchorHidden]),Q=O.useMemo(()=>({...x,arrowRef:w.arrowRef,arrowStyles:w.arrowStyles,arrowUncentered:w.arrowUncentered}),[x,w.arrowRef,w.arrowStyles,w.arrowUncentered]),oe=Vh("div",t,{state:x,props:[w.props,b],ref:[n,L],customStyleHookMapping:Kh});return u.jsx(Y0.Provider,{value:Q,children:oe()})}),iP={...Kh,...zT},V0=O.forwardRef(function(t,n){const{className:o,render:l,...r}=t,{open:d,instantType:h,transitionStatus:E,getPopupProps:A,popupRef:R,onOpenChangeComplete:T}=Yu(),{side:S,align:I}=Jx();Yh({open:d,ref:R,onComplete(){d&&(T==null||T(!0))}});const p=O.useMemo(()=>({open:d,side:S,align:I,instant:h,transitionStatus:E}),[d,S,I,h,E]);return Vh("div",t,{state:p,ref:[n,R],props:[A,{style:E==="starting"?{transition:"none"}:{}},r],customStyleHookMapping:iP})()});class fa{constructor(t,n,o,l,r,d,h){Z(this,"name");Z(this,"duration");Z(this,"color");Z(this,"damageFactor");Z(this,"critBonus");Z(this,"dhBonus");Z(this,"job");this.name=t,this.duration=o,this.color=n,this.damageFactor=l,this.critBonus=r,this.dhBonus=d,this.job=h}}const jT=[new fa(H.ArcaneCircle,dt.Pink,20,1.03,0,0,"RPR"),new fa(H.ArmysPaeon,dt.Yellow,45,1,0,.03,"BRD"),new fa(H.BattleLitany,dt.Blue,20,1,.1,0,"DRG"),new fa(H.BattleVoice,dt.Orange,20,1,0,.2,"BRD"),new fa(H.Brotherhood,dt.Orange,20,1.05,0,0,"MNK"),new fa(H.Card_TheBalance,dt.Red,15,1.03,0,0,"AST"),new fa(H.Card_TheSpear,dt.Blue,15,1.06,0,0,"AST"),new fa(H.ChainStratagem,dt.Grey,20,1,.1,0,"SCH"),new fa(H.Devilment,dt.Green,20,1,.2,.2,"DNC"),new fa(H.Divination,dt.Yellow,20,1.06,0,0,"AST"),new fa(H.Dokumori,dt.Purple,21,1.05,0,0,"NIN"),new fa(H.Embolden,dt.Grey,20,1.05,0,0,"RDM"),new fa(H.MagesBallad,dt.Purple,45,1.01,0,0,"BRD"),new fa(H.RadiantFinale1,dt.Purple,20,1.02,0,0,"BRD"),new fa(H.RadiantFinale2,dt.Purple,20,1.04,0,0,"BRD"),new fa(H.RadiantFinale3,dt.Purple,20,1.06,0,0,"BRD"),new fa(H.SearingLight,dt.Blue,20,1.05,0,0,"SMN"),new fa(H.StandardFinish,dt.Yellow,60,1.05,0,0,"DNC"),new fa(H.StarryMuse,dt.Purple,20.5,1.05,0,0,"PCT"),new fa(H.TechnicalFinish,dt.Blue,20,1.05,0,0,"DNC"),new fa(H.WanderersMinuet,dt.Green,45,1,.02,0,"BRD")],W0=new Map;jT.forEach(e=>{W0.set(e.name,e)});let Eh=class{constructor(t){Z(this,"name");Z(this,"info");this.name=t;let n=W0.get(t);n||(n=jT[0],console.error("Buff info not found!")),this.info=n}},LR=e=>{},HR=e=>{};const ka="/presets/markers/",oP=function(e,t){gO(e,n=>{try{const o=JSON.parse(n);t(o)}catch{console.log("parse error")}})};function xa(e){const t={marginRight:4},n=Mo(e.offsetStr);return u.jsx("button",{style:t,onClick:()=>{oP(e.url,o=>{N.timeline.loadCombinedTracksPreset(o,isNaN(n)?0:n),N.updateStats(),N.timeline.drawElements()})},children:e.displayName})}class X0 extends rn.Component{constructor(n){super(n);Z(this,"state");Z(this,"onColorChange");Z(this,"onShowTextChange");Z(this,"onEnterBuffEdit");Z(this,"setOffset");Z(this,"setTime");Z(this,"setDuration");Z(this,"setTrack");Z(this,"setDescription");Z(this,"setBuff");Z(this,"setLoadTrackDest");LR=o=>{o.markerType===nn.Info?this.setState({nextMarkerType:o.markerType,nextMarkerColor:o.color,nextMarkerTime:o.time.toString(),nextMarkerDuration:o.duration.toString(),nextMarkerTrack:o.track.toString(),nextMarkerDescription:o.description,nextMarkerShowText:o.showText}):o.markerType===nn.Untargetable?this.setState({nextMarkerType:o.markerType,nextMarkerTime:o.time.toString(),nextMarkerDuration:o.duration.toString()}):this.setState({nextMarkerType:o.markerType,nextMarkerTrack:o.track.toString(),nextMarkerTime:o.time.toString(),nextMarkerDuration:o.duration.toString(),nextMarkerBuff:o.description})},this.onColorChange=o=>{o.target&&this.setState({nextMarkerColor:o.target.value})},this.onShowTextChange=o=>{o.target&&this.setState({nextMarkerShowText:o.target.checked})},this.onEnterBuffEdit=o=>{const l=new Eh(o);this.setState({nextMarkerDuration:l.info.duration})},this.state={nextMarkerType:nn.Info,nextMarkerColor:dt.Blue,nextMarkerTime:"0",nextMarkerDuration:"1",nextMarkerTrack:"0",nextMarkerDescription:"",nextMarkerShowText:!1,nextMarkerBuff:H.TechnicalFinish,loadTrackDest:"0",offsetStr:"",trackBins:new Map},this.setTime=o=>{this.setState({nextMarkerTime:o})},this.setDuration=o=>{this.setState({nextMarkerDuration:o})},this.setTrack=o=>{this.setState({nextMarkerTrack:o})},this.setDescription=o=>{this.setState({nextMarkerDescription:o})},this.setBuff=o=>{this.setState({nextMarkerBuff:o})},this.setLoadTrackDest=o=>{this.setState({loadTrackDest:o})},this.setOffset=o=>this.setState({offsetStr:o}),HR=o=>{this.setState({trackBins:o})}}componentWillUnmount(){HR=n=>{},LR=n=>{}}render(){const n={display:"inline-block",marginRight:"1em",marginBottom:6},o=function(w,x){return u.jsx("option",{value:w,children:x},w)},l="When specified, all imported and preset tracks will start from the specified timestamp. Use this to combine markers for multi-phase fights with varying kill times.",r="不为空时，下方所有导入的时间轴文件和预设都将从这个时间点开始。可以用此功能自行组合不同P的时间轴文件。",d=Mo(this.state.offsetStr),h=u.jsx(Aa,{defaultValue:this.state.offsetStr,description:u.jsxs(u.Fragment,{children:[u.jsx("span",{style:{color:isNaN(d)||d===0?"":dt.Purple},children:C({en:"Load tracks starting at timestamp ",zh:"载入文件到此时间点 "})}),u.jsx(We,{topic:"trackLoadOffset",content:C({en:l,zh:r})}),":"]}),width:4,style:{...n,marginTop:16},onChange:this.setOffset}),E=[];this.state.trackBins.forEach((w,x)=>{E.push(x)}),E.sort();const A=[];A.push(u.jsx(Nl,{fileFormat:Uo.Json,getContentFn:()=>N.timeline.serializedCombinedMarkerTracks(),filename:"tracks_all",displayName:C({en:"all tracks combined",zh:"所有轨道"})},"combined")),E.forEach(w=>{const x=w>=0?w.toString():"untargetable";let Q=C({en:"track ",zh:"轨"})+w.toString();w===gl&&(Q=C({en:"track untargetable",zh:"不可选中标记轨"})),A.push(u.jsx(Nl,{fileFormat:Uo.Json,getContentFn:()=>{const oe=N.timeline.serializedSeparateMarkerTracks();for(let he=0;he<oe.length;he++)if(oe[he].track===w)return oe[he];return console.assert(!1),[]},filename:"track_"+x,displayName:Q},w))});const R={marginRight:4},T=u.jsxs("div",{children:[u.jsx(Aa,{defaultValue:this.state.nextMarkerDescription,description:C({en:"Description: ",zh:"描述："}),width:40,onChange:this.setDescription}),u.jsx(Aa,{defaultValue:this.state.nextMarkerTrack,description:C({en:"Track: ",zh:"轨道序号："}),width:4,style:n,onChange:this.setTrack}),u.jsxs("div",{style:{display:"inline-block",marginTop:"4px"},children:[u.jsx("span",{children:C({en:"Color: ",zh:"颜色："})}),u.jsx("select",{style:{display:"inline-block",outline:"none"},value:this.state.nextMarkerColor,onChange:this.onColorChange,children:[o(dt.Red,C({en:"red",zh:"红"})),o(dt.Orange,C({en:"orange",zh:"橙"})),o(dt.Yellow,C({en:"yellow",zh:"黄"})),o(dt.Green,C({en:"green",zh:"绿"})),o(dt.Cyan,C({en:"cyan",zh:"青"})),o(dt.Blue,C({en:"blue",zh:"蓝"})),o(dt.Purple,C({en:"purple",zh:"紫"})),o(dt.Pink,C({en:"pink",zh:"粉"}))]}),u.jsx("div",{style:{background:this.state.nextMarkerColor,marginLeft:"4px",display:"inline-block",verticalAlign:"middle",height:"1em",width:"4em"}})]}),u.jsxs("div",{style:{display:"inline-block",marginTop:"4px",marginLeft:"10px"},children:[u.jsx("input",{type:"checkbox",style:{position:"relative",top:3},checked:this.state.nextMarkerShowText,onChange:this.onShowTextChange}),u.jsx("span",{style:{marginLeft:4},children:C({en:"show text",zh:"显示文字描述"})})]})]}),S=[];jT.forEach(w=>{const x=N.getActiveJob();!(x==="PCT"&&w.name===H.StarryMuse)&&!(x==="RDM"&&w.name===H.Embolden)&&!(x==="DNC"&&(w.name===H.TechnicalFinish||w.name===H.Devilment))&&S.push(u.jsx("option",{value:w.name,children:zC(w.name)},w.name))});const I=u.jsxs("div",{children:[u.jsx("span",{children:C({en:"Buff: ",zh:"团辅："})}),u.jsx("select",{value:this.state.nextMarkerBuff,onChange:w=>{if(w.target){const x=w.target.value;this.setBuff(x),this.onEnterBuffEdit(x)}},children:S}),u.jsx("div",{style:{marginTop:5},children:u.jsx(Aa,{defaultValue:this.state.nextMarkerTrack,description:C({en:"Track: ",zh:"轨道序号："}),width:4,style:n,onChange:this.setTrack})})]}),p=u.jsxs(u.Fragment,{children:[u.jsx("button",{style:R,onClick:()=>{N.timeline.deleteAllMarkers(),N.updateStats()},children:C({en:"clear all markers",zh:"清空当前"})}),u.jsx("button",{style:R,onClick:()=>{const w=N.timeline.sortAndRemoveDuplicateMarkers();w>0?alert("removed "+w+" duplicate markers"):alert("no duplicate markers found"),N.timeline.updateTimelineMarkers()},children:C({en:"remove duplicates",zh:"删除重复标记"})}),u.jsx("span",{children:C({en:", click to delete single markers",zh:"，可点击删除单个标记"})})]}),_=Cl(this.context,"text"),b=u.jsx("input",{style:{color:_,backgroundColor:"transparent",outline:"none",border:"none",borderBottom:"1px solid "+_},size:2,type:"text",value:this.state.loadTrackDest,onChange:w=>{this.setState({loadTrackDest:w.target.value})}}),v=C({en:u.jsxs("span",{children:["Load into individual track ",b,": "]}),zh:u.jsxs("span",{children:["载入第",b,"轨："]})}),L=Mo(this.state.offsetStr),k=u.jsxs(u.Fragment,{children:[u.jsx(Ah,{allowLoadFromUrl:!1,defaultLoadUrl:"",label:C({en:"Load multiple tracks combined: ",zh:"载入多轨文件："}),onLoadFn:w=>{N.timeline.loadCombinedTracksPreset(w,isNaN(L)?0:L),N.updateStats(),N.timeline.drawElements()}}),u.jsx("div",{className:"paragraph",children:u.jsx(Ah,{allowLoadFromUrl:!1,label:v,onLoadFn:w=>{const x=parseInt(this.state.loadTrackDest);if(isNaN(x)){window.alert("invalid track destination");return}N.timeline.loadIndividualTrackPreset(w,x,isNaN(L)?0:L),N.updateStats(),N.timeline.drawElements()}})})]}),M=u.jsxs("form",{children:[u.jsx("span",{children:C({en:"Type: ",zh:"类型："})}),u.jsxs("select",{value:this.state.nextMarkerType,onChange:w=>{if(w.target){const x=w.target.value;this.setState({nextMarkerType:x}),x===nn.Buff&&this.onEnterBuffEdit(this.state.nextMarkerBuff)}},children:[u.jsx("option",{value:nn.Info,children:C({en:"Info",zh:"备注信息"})}),u.jsx("option",{value:nn.Untargetable,children:C({en:"Untargetable",zh:"不可选中"})}),u.jsx("option",{value:nn.Buff,children:C({en:"Buff",zh:"团辅"})})]}),u.jsx("span",{children:" "}),u.jsx(Aa,{defaultValue:this.state.nextMarkerTime,description:C({en:"Time: ",zh:"时间："}),width:8,style:n,onChange:this.setTime}),u.jsx(Aa,{defaultValue:this.state.nextMarkerDuration,description:C({en:"Duration: ",zh:"持续时长："}),width:8,style:n,onChange:this.setDuration}),this.state.nextMarkerType===nn.Info?T:void 0,this.state.nextMarkerType===nn.Buff?I:void 0,u.jsx("button",{type:"submit",style:{display:"block",marginTop:"0.5em"},onClick:w=>{const x={type:st.Marker,markerType:this.state.nextMarkerType,time:Mo(this.state.nextMarkerTime),duration:parseFloat(this.state.nextMarkerDuration),color:this.state.nextMarkerColor,track:parseInt(this.state.nextMarkerTrack),description:this.state.nextMarkerDescription,showText:this.state.nextMarkerShowText};let Q;if(this.state.nextMarkerType===nn.Untargetable&&(x.color=dt.Grey,x.track=gl,x.description="",x.showText=!0),this.state.nextMarkerType===nn.Buff){const oe=new Eh(this.state.nextMarkerBuff),he=parseFloat(this.state.nextMarkerDuration);!isNaN(he)&&he>oe.info.duration&&(Q=C({en:`this buff can't last longer than ${oe.info.duration}s`,zh:`此团辅持续时间不能超过${oe.info.duration}秒`})),x.color=oe.info.color,x.description=oe.name,x.duration=he,x.showText=!0}if((isNaN(x.duration)||isNaN(x.time)||isNaN(x.track))&&(Q=C({en:"some input(s) are invalid",zh:"部分输入格式不对"})),Q){window.alert(Q),w.preventDefault();return}N.timeline.addMarker(x),N.updateStats(),this.state.nextMarkerType===nn.Untargetable&&on(),w.preventDefault()},children:C({en:"add marker",zh:"添加标记"})})]}),B=u.jsxs("div",{style:{},children:[u.jsxs("p",{children:[u.jsx("span",{children:C({en:"Current tier (en) by shanzhe: ",zh:"当前版本（英文，来自shanzhe）："})}),u.jsx(xa,{displayName:"M5S",url:ka+"m5s.txt",offsetStr:this.state.offsetStr}),u.jsx(xa,{displayName:"M6S",url:ka+"m6s.txt",offsetStr:this.state.offsetStr}),u.jsx(xa,{displayName:"M7S",url:ka+"m7s.txt",offsetStr:this.state.offsetStr}),u.jsx(xa,{displayName:"M8S full",url:ka+"m8s_full.txt",offsetStr:this.state.offsetStr}),u.jsx(xa,{displayName:"M8S P1 to adds",url:ka+"m8s_p1_through_adds.txt",offsetStr:this.state.offsetStr}),u.jsx(xa,{displayName:"M8S P1 post-adds",url:ka+"m8s_p1_post_adds.txt",offsetStr:this.state.offsetStr}),u.jsx(xa,{displayName:"M8S P2",url:ka+"m8s_p2.txt",offsetStr:this.state.offsetStr})]}),u.jsxs("p",{children:[u.jsx("span",{children:C({en:"EX trial: ",zh:"极神："})}),u.jsx(xa,{displayName:C({en:"Queen Eternal (en + zh) by 小盐",zh:"永恒女王（英+中，来自小盐）"}),url:ka+"queen_eternal.txt",offsetStr:this.state.offsetStr})]}),u.jsxs("p",{children:[u.jsx("span",{children:C({en:"FRU (en) by Yara & shanzhe: ",zh:"绝伊甸（英文，来自Yara+shanzhe）："})}),u.jsx(xa,{displayName:C({en:"P1",zh:"P1"}),url:ka+"fru_p1.txt",offsetStr:this.state.offsetStr}),u.jsx(xa,{displayName:C({en:"P2 + intermission",zh:"P2"}),url:ka+"fru_p2.txt",offsetStr:this.state.offsetStr}),u.jsx(xa,{displayName:C({en:"P3 + P4",zh:"P3 + P4"}),url:ka+"fru_p3_p4.txt",offsetStr:this.state.offsetStr}),u.jsx(xa,{displayName:C({en:"P5",zh:"P5"}),url:ka+"fru_p5.txt",offsetStr:this.state.offsetStr}),u.jsx(xa,{displayName:C({en:"full fight",zh:"完整"}),url:ka+"fru_en_full.txt",offsetStr:this.state.offsetStr})]}),u.jsxs("p",{children:[u.jsx("span",{children:C({en:"FRU (zh) by 小盐 & czmm: ",zh:"绝伊甸（中文，来自小盐+czmm）："})}),u.jsx(xa,{displayName:C({en:"full (12/8/24 ver)",zh:"完整（12/8/24版）"}),url:ka+"fru_zh.txt",offsetStr:this.state.offsetStr})]}),u.jsxs("p",{children:[u.jsx("span",{children:C({en:"Legacy ultimates: ",zh:"过去绝本（英文）："})}),u.jsx(xa,{displayName:"DSR P2 by Caro",url:ka+"dsr_p2.txt",offsetStr:this.state.offsetStr}),u.jsx(xa,{displayName:"DSR P6 by Tischel",url:ka+"dsr_p6.txt",offsetStr:this.state.offsetStr}),u.jsx(xa,{displayName:"DSR P7 by Santa",url:ka+"dsr_p7.txt",offsetStr:this.state.offsetStr}),u.jsx(xa,{displayName:"TOP by Santa",url:ka+"TOP_2023_04_02.track",offsetStr:this.state.offsetStr})]})]});return u.jsx(u.Fragment,{children:u.jsx(XT,{contentHeight:CS,children:[{defaultSize:50,content:u.jsxs(u.Fragment,{children:[p,u.jsx("br",{}),h,u.jsx("p",{children:u.jsx("b",{children:C({en:"Presets",zh:"预设文件"})})}),B,u.jsxs("p",{style:{marginTop:16},children:[u.jsx("b",{children:C({en:"Load from file",zh:"从文件导入"})})," ",u.jsx(We,{topic:"load tracks",content:C({en:"when loading additional markers, current markers will not be deleted",zh:"载入新的标记时，时间轴上的已有标记不会被删除"})})]}),k,u.jsx("p",{style:{marginTop:16},children:u.jsx("b",{children:C({en:"Save marker tracks to file",zh:"保存标记到文件"})})}),A]})},{defaultSize:50,content:u.jsxs(u.Fragment,{children:[u.jsx("p",{children:u.jsx("b",{children:C({en:"Create marker",zh:"添加标记"})})}),M]})}]})})}}Z(X0,"contextType",Ga);const $m=new Map,q0="assets/Skills/General/Missing.png",UR=e=>{if($m.has(e))return $m.get(e);const t=`assets/Skills/${t0(e)}`;if(t){const n=new Image;return n.src=t,n.onerror=o=>{n.src=q0,console.error("failed to load skill image: "+t),n.onerror=null},n.onload=()=>wo(),$m.set(e,n),n}};function Z0(e){const t=`assets/Skills/${t0(e.skillName)}`,[n,o]=O.useState(!1);return u.jsx("img",{style:e.style,src:n?q0:t,onError:l=>o(!0),alt:e.skillName})}function lP(e={diameter:50,progress:.7,color:"rgba(0, 0, 0, 0.6)"}){const t=e.diameter/2,n=Math.PI*t,o=n*(1-e.progress),l=n-o,r=o+","+l,d=u.jsx("circle",{r:t/2,cx:20,cy:21,fill:"none",stroke:e.color,strokeWidth:t,strokeDasharray:r,strokeDashoffset:n/4+o}),h=t,E=u.jsx("circle",{r:t+h/2,cx:20,cy:21,fill:"none",stroke:e.color,strokeWidth:h});return u.jsxs("svg",{width:48,height:48,style:{position:"absolute",left:"50%",marginLeft:-20,pointerEvents:"none"},children:[d,E]})}function sP(e={diameter:50,progress:.7,color:"rgba(0, 0, 0, 0.5)"}){const t=e.diameter/2,n=2*Math.PI*t,o=n*e.progress,l=n-o,r=o+","+l,d=u.jsx("circle",{r:t,cx:20,cy:21,fill:"none",stroke:e.color,strokeWidth:2,strokeDashoffset:n/4,strokeDasharray:r});return u.jsx("svg",{width:48,height:48,style:{position:"absolute",left:"50%",marginLeft:-20,pointerEvents:"none"},children:d})}function rP(e={diameter:50,progress:.7,color:"rgba(0, 0, 0, 0.5)"}){const t=e.diameter/2,n=Math.PI*t*2,o=n*e.progress,l=n-o,r=o+","+l,d=2*Math.PI*e.progress,h="#ffffffef",E=u.jsx("circle",{r:t,cx:20,cy:21,fill:"none",stroke:h,strokeWidth:1,strokeDasharray:r,strokeDashoffset:n/4}),A=u.jsx("line",{x1:20,y1:21,x2:20,y2:21-t,stroke:h,strokeWidth:1}),R=u.jsx("line",{x1:20,y1:21,x2:20+t*Math.cos(d-Math.PI/2),y2:21+t*Math.sin(d-Math.PI/2),stroke:h,strokeWidth:1});return u.jsxs("svg",{width:48,height:48,style:{position:"absolute",left:"50%",marginLeft:-20,pointerEvents:"none"},children:[E,A,R]})}function cP(e){const[t,n]=O.useState(u.jsx("div",{})),o=O.useContext(Ga),l=()=>{const w=N.getSkillInfo({game:N.getDisplayedGame(),skillName:e.skillName}),x=Hi(o),Q=[];if(w.status.ready()){let de="ready ("+w.stacksAvailable,fe="可释放 ("+w.stacksAvailable;w.timeTillNextStackReady>0&&(de+=") (next stack ready in "+w.timeTillNextStackReady.toFixed(3),fe+=") (下一层"+w.timeTillNextStackReady.toFixed(3)+"秒后转好"),de+=")",fe+=")",Q.push(C({en:de,zh:fe}))}else{if(w.status.unavailableReasons.includes(Et.RequirementsNotMet)&&Q.push(Ur(Et.RequirementsNotMet)),w.status.unavailableReasons.includes(Et.NotEnoughMP)&&Q.push(Ur(Et.NotEnoughMP)+C({en:" (needs "+w.capturedManaCost+")",zh:" （需"+w.capturedManaCost+"）"})),w.status.unavailableReasons.includes(Et.Blocked)){const de=Math.max(w.timeTillNextStackReady,w.timeTillSecondaryReady??0),fe=C({en:"possibly ready in "+w.timeTillAvailable.toFixed(3),zh:"预计"+w.timeTillAvailable.toFixed(3)+"秒后可释放"}),$=C({en:" (next stack ready in "+de.toFixed(3)+")",zh:"（"+de.toFixed(3)+"秒后转好下一层CD）"});Q.push(u.jsxs(u.Fragment,{children:[fe,w.stacksAvailable<w.maxStacks?$:void 0]}))}w.status.unavailableReasons.includes(Et.NotInCombat)&&Q.push(Ur(Et.NotInCombat))}const oe=w.instantCast?0:w.castTime;let he="";w.status.ready()&&(he+=C({en:"cast: ",zh:"读条："})+oe.toFixed(3),w.llCovered&&oe>Sa.epsilon&&(he+=" (LL)"),he+=C({en:", cast+delay: ",zh:" 读条+生效延迟："})+w.timeTillDamageApplication.toFixed(3));const ue=u.jsxs("div",{style:{color:N.displayingUpToDateGameState?x.text:x.historical},children:[u.jsx("div",{className:"paragraph",children:u.jsx("b",{children:xi(e.skillName)})}),u.jsx("div",{className:"paragraph",children:Q.map((de,fe)=>u.jsxs("span",{children:[de,u.jsx("br",{})]},fe))}),u.jsx("div",{className:"paragraph",children:he})]});n(ue)},r={width:48,height:48,verticalAlign:"top",position:"relative",display:"inline-block"},d={width:40,height:40,position:"absolute",top:2,left:"50%",marginLeft:-20};let h="transparent";e.readyAsideFromCd||(h="rgba(0, 0, 0, 0.6)");const E=N.getSkillInfo({game:N.getDisplayedGame(),skillName:e.skillName}),A=E.stacksAvailable,R=E.maxStacks;let T;const S=48,I=S/3+4;let p,_;if(A>0){p="0 0 2px rgba(255, 50, 0, 1), 0 0 3px rgba(255, 100, 0, 1), 0 0 5px rgba(255, 100, 0, 1)";const w=A===R?5:3;for(let x=0;x<w;x++)p+=", 0 0 10px black";_="white"}else p="0 0 4px black, 0 0 8px black",_="rgb(223,60,60)";R>1?T=u.jsx("div",{tabIndex:-1,style:{fontFamily:"Goldman Regular",color:_,fontSize:`${I}px`,textShadow:p,width:I,textAlign:"center",bottom:2,right:1,zIndex:3,position:"absolute"},children:A}):T=u.jsx(u.Fragment,{});const b=u.jsx(lP,{diameter:38,progress:e.cdProgress,color:e.ready?"rgba(0, 0, 0, 0)":"rgba(0, 0, 0, 0.6)"}),v=u.jsx(rP,{diameter:38,progress:e.cdProgress,color:e.ready?"rgba(0, 0, 0, 0)":"rgba(255, 255, 255, 1.0)"}),L=e.secondaryCdProgress&&u.jsx(sP,{diameter:32,progress:e.secondaryCdProgress,color:"rgba(250,186,47,255)"}),k=u.jsx("img",{hidden:!e.highlight,src:"/misc/proc.png",alt:"skill proc",style:{position:"absolute",width:44,height:44,top:0,left:2,zIndex:2}}),M=u.jsxs("div",{onMouseEnter:l,children:[u.jsxs("div",{style:r,children:[" ",u.jsx(Z0,{style:d,skillName:e.skillName}),u.jsxs("div",{style:{position:"absolute",width:40,height:41,top:1,left:"50%",marginLeft:-20,borderRadius:3,overflow:"hidden",zIndex:1,background:h},children:[e.cdProgress>1-Sa.epsilon||!e.readyAsideFromCd||b,e.cdProgress>1-Sa.epsilon||v,!e.secondaryCdProgress||e.secondaryCdProgress>1-Sa.epsilon||L]}),u.jsx("div",{style:{position:"absolute",width:S,height:S,background:"url('/misc/skillIcon_overlay.png') no-repeat"}})]}),k,T]}),B=u.jsx("span",{title:Pa[e.skillName].name,className:"skillButton",children:u.jsx(Cs,{onClickFn:()=>{N.requestUseSkill({skillName:e.skillName,targetCount:e.targetCount},!0)},content:M})});return u.jsxs(w0,{delay:0,hoverable:!1,children:[u.jsx(Zx,{render:B}),u.jsx(j0,{container:document.getElementById("skillsWindowAnchor"),children:u.jsx(K0,{sideOffset:3,side:"top",className:"tooltip-positioner",children:u.jsx(V0,{className:"info-tooltip tooltip",children:t})})})]})}let Q0=e=>{};class $0 extends rn.Component{constructor(n){super(n);Z(this,"state");Z(this,"onWaitTimeChange");Z(this,"onWaitTimeSubmit");Z(this,"onWaitUntilChange");Z(this,"onWaitUntilSubmit");Z(this,"onWaitSinceChange");Z(this,"onTargetCountChange");Z(this,"onRemoveTrailingIdleTime");Z(this,"onWaitTillNextMpOrLucidTick");Q0=o=>{this.setState({statusList:o})},this.onWaitTimeChange=o=>{!o||!o.target||this.setState({waitTime:o.target.value})},this.onWaitTimeSubmit=o=>{o.preventDefault();const l=parseFloat(this.state.waitTime);if(!isNaN(l))if(this.state.waitSince==="Now")N.step(l,!0);else if(this.state.waitSince==="LastSkill"){const r=N.game.time-N.lastSkillTime,d=l-r;d<=0?window.alert("Invalid input: trying to jump to "+l+"s since the last action, but "+r+"s has already elapsed."):N.step(d,!0)}else console.assert(!1)},this.onWaitUntilChange=o=>{!o||!o.target||this.setState({waitUntil:o.target.value})},this.onWaitUntilSubmit=o=>{o.preventDefault();const l=Mo(this.state.waitUntil);isNaN(l)||(l>(N.displayingUpToDateGameState?N.game.getDisplayTime():N.savedHistoricalGame.getDisplayTime())?N.stepUntil(l,!0):window.alert("Can only jump to a time in the future!"))},this.onWaitSinceChange=o=>{this.setState({waitSince:o.target.value})},this.onTargetCountChange=o=>{this.setState({targetCount:parseInt(o.target.value)})},this.onRemoveTrailingIdleTime=()=>{N.removeTrailingIdleTime()},this.onWaitTillNextMpOrLucidTick=()=>{N.waitTillNextMpOrLucidTick()},this.state={statusList:[],waitTime:"1",waitSince:"Now",waitUntil:"0:00",targetCount:1}}render(){const n=[];for(let E=0;E<this.state.statusList.length;E++){const A=this.state.statusList[E].skillName,R=this.state.statusList[E],T=R?!R.status.unavailableReasons.some(I=>I!==Et.Blocked):!1,S=u.jsx(cP,{highlight:R?R.highlight:!1,skillName:A,ready:R?R.status.ready():!1,readyAsideFromCd:T,cdProgress:R?1-R.timeTillNextStackReady/R.cdRecastTime:1,secondaryCdProgress:R&&R.secondaryCdRecastTime&&R.timeTillSecondaryReady?1-R.timeTillSecondaryReady/R.secondaryCdRecastTime:1,targetCount:this.state.targetCount},E);n.push(S)}const o=u.jsx(We,{topic:"waitUntilInputFormat",content:u.jsxs("div",{children:[u.jsx("div",{className:"paragraph",children:C({en:"Examples:",zh:"时间格式举例："})}),u.jsxs("div",{className:"paragraph",children:["12 ",u.jsx("br",{}),"1.5 ",u.jsx("br",{}),"10:04.2 ",u.jsx("br",{}),"-0:03"]})]})}),l={display:"inline-block",flex:"auto"},r=Hi(this.context),d={outline:"none",border:"none",borderBottom:"1px solid "+r.text,borderRadius:0,background:"transparent",color:r.text},h=u.jsx(We,{topic:"targetCount",content:C({en:u.jsxs(u.Fragment,{children:[u.jsx("span",{children:"The number of targets hit by the next ability. Damage fall-off is automatically computed. If the number of targets set is more than the number of enemies the ability can hit, then the additional targets are ignored."}),u.jsx("br",{}),u.jsx("br",{}),u.jsx("span",{children:"Buff calculations for enemy debuffs like Dokumori and Chain Stratagem may be inaccurate when multiple targets are selected."})]}),zh:u.jsxs("div",{children:[u.jsx("span",{children:"下一个技能击中的目标数。会自动计算对主目标之外敌人的伤害衰减。如果在此设置的敌人数量超过技能的生效敌人数上限（例：给对单技能设置2或更多目标数），多余的目标会被忽略。"}),u.jsx("br",{}),u.jsx("br",{}),u.jsx("span",{children:"注：介毒之术、连环计等作用于目标的团辅可能会使多目标技能威力计算出现误差。"})]})})});return u.jsx("div",{className:"skillsWindow",id:"skillsWindowAnchor",children:u.jsxs("div",{className:"skillIcons",children:[u.jsx("style",{children:`
					.info-tooltip {
						color: ${r.text};
						background-color: ${r.tipBackground};
						opacity: 0.98;
						max-width: 300px;
						outline: 1px solid ${r.bgHighContrast};
						transition: none;
						font-size: 100%;
						z-index: 10;
					}
				`}),n,u.jsxs("div",{style:{margin:"10px 0"},children:[C({en:"# of targets hit",zh:"击中目标数"})," ",h,":"," ",u.jsx("input",{type:"number",min:1,max:aL,style:{width:30,...d},value:this.state.targetCount,onChange:this.onTargetCountChange}),u.jsxs("div",{style:{display:"flex",flexDirection:"row",marginBottom:6},children:[C({en:u.jsxs("form",{onSubmit:this.onWaitTimeSubmit,style:l,children:["Wait until"," ",u.jsx("input",{type:"text",style:{width:40,...d},value:this.state.waitTime,onChange:this.onWaitTimeChange})," ","second(s) since"," ",u.jsxs("select",{style:{display:"inline-block",outline:"none"},value:this.state.waitSince,onChange:this.onWaitSinceChange,children:[u.jsx("option",{value:"Now",children:"now"}),u.jsx("option",{value:"LastSkill",children:"last action"})]})," ",u.jsx("input",{type:"submit",value:"GO"})]}),zh:u.jsxs("form",{onSubmit:this.onWaitTimeSubmit,style:l,children:["快进至"," ",u.jsxs("select",{style:{display:"inline-block",outline:"none"},value:this.state.waitSince,onChange:this.onWaitSinceChange,children:[u.jsx("option",{value:"Now",children:"当前"}),u.jsx("option",{value:"LastSkill",children:"上次操作"})]})," ","后的"," ",u.jsx("input",{type:"text",style:{width:30,...d},value:this.state.waitTime,onChange:this.onWaitTimeChange})," ","秒 ",u.jsx("input",{type:"submit",value:"GO"})]}),ja:u.jsxs("form",{onSubmit:this.onWaitTimeSubmit,style:l,children:[u.jsxs("select",{style:{display:"inline-block",outline:"none",marginRight:"4px"},value:this.state.waitSince,onChange:this.onWaitSinceChange,children:[u.jsx("option",{value:"Now",children:"現在のカーソルの位置"}),u.jsx("option",{value:"LastSkill",children:"最後のアクション"})]}),"から",u.jsx("input",{type:"text",style:{width:30,...d},value:this.state.waitTime,onChange:this.onWaitTimeChange}),"秒進む",u.jsx("input",{type:"submit",value:"GO"})]})}),C({en:u.jsxs("form",{onSubmit:this.onWaitUntilSubmit,style:l,children:["Wait until ",o," ",u.jsx("input",{type:"text",style:{width:60,...d},value:this.state.waitUntil,onChange:this.onWaitUntilChange}),u.jsx("input",{type:"submit",value:"GO"})]}),zh:u.jsxs("form",{onSubmit:this.onWaitUntilSubmit,style:l,children:["快进至指定时间 ",o," ",u.jsx("input",{type:"text",style:{width:60,...d},value:this.state.waitUntil,onChange:this.onWaitUntilChange}),u.jsx("input",{type:"submit",value:"GO"})]}),ja:u.jsxs("form",{onSubmit:this.onWaitUntilSubmit,style:l,children:["指定した時間まで進む ",o," ",u.jsx("input",{type:"text",style:{width:60,...d},value:this.state.waitUntil,onChange:this.onWaitUntilChange}),u.jsx("input",{type:"submit",value:"GO"})]})})]}),u.jsx("button",{onClick:this.onWaitTillNextMpOrLucidTick,children:C({en:"Wait until MP tick / lucid tick",zh:"快进至跳蓝/跳醒梦"})}),u.jsx("span",{children:" "}),u.jsx("button",{onClick:this.onRemoveTrailingIdleTime,children:C({en:"Remove trailing idle time",zh:"去除时间轴末尾的发呆时间"})})]})]})})}}Z($0,"contextType",Ga);let _l=()=>{};function uP(e){const[t,n]=O.useState("(untitled)"),o=l=>n(l);return u.jsxs("form",{children:[u.jsx(Aa,{style:{display:"inline-block",marginTop:"10px"},defaultValue:t,description:C({en:"name: ",zh:"预设名："}),width:30,onChange:o}),u.jsx("span",{children:" "}),u.jsx("button",{type:"submit",disabled:!e.enabled,onClick:l=>{N.addSelectionToPreset(t),l.preventDefault()},children:C({en:"add selection to preset",zh:"将选中的技能保存为预设"})})]})}function dP(e){const t=e.line,n=[];let o=0;const l={margin:"0 1px",width:"18px",verticalAlign:"middle"};for(const d of t.actions)if(d.info.type===Ve.Skill){const h=d.info.skillName;n.push(u.jsx(Z0,{style:l,skillName:h},o)),o++}const r=u.jsxs("span",{children:[t.name," (",n,")"]});return u.jsxs("div",{style:{marginBottom:"8px"},children:[u.jsx(Cs,{content:r,onClickFn:()=>{const d=N.record.selectionStartIndex;N.displayingUpToDateGameState?(N.tryAddLine(t,Oa.SkillSequence),N.updateAllDisplay(),N.scrollToTime()):d!==void 0&&N.undoStack.doThenPush(new QT(t.actions,d,"preset"))}}),u.jsx("span",{children:" "}),u.jsx(Cs,{content:"[x]",onClickFn:()=>{N.deleteLine(t)}})]})}function EP(){const e=O.useContext(Ga),[,t]=O.useReducer(r=>r+1,0);O.useEffect(()=>(_l=()=>t(),()=>{_l=()=>{}}),[]);const n=N.record.getFirstSelection()!==void 0,o=Cl(e,"bgMediumContrast"),l=u.jsxs("div",{children:[u.jsx("button",{style:{marginBottom:10},onClick:()=>{N.deleteAllLines()},children:C({en:"clear all presets",zh:"重置所有预设"})}),u.jsx(Ah,{allowLoadFromUrl:!1,defaultLoadUrl:"https://miyehn.me/ffxiv-blm-rotation/presets/lines/default.txt",onLoadFn:r=>{r.fileType===Mi.SkillSequencePresets?N.appendFilePresets(r):window.alert("incorrect file type '"+r.fileType+"'")}}),u.jsxs("div",{style:{outline:"1px solid "+o,margin:"10px 0",padding:"10px"},children:[N.getPresetLines().map((r,d)=>u.jsx(dP,{line:r},d)),u.jsx(uP,{enabled:n}),u.jsx("div",{style:{marginTop:16},children:u.jsx(Nl,{fileFormat:Uo.Json,getContentFn:()=>N.serializedPresets(),filename:"presets",displayName:C({en:"download presets to file",zh:"将当前预设下载为文件"})})})]})]});return u.jsx(wr,{title:C({en:"Skill sequence presets",zh:"技能序列预设"}),content:l,defaultShow:!1})}const yi=4;var st=(e=>(e.s_Cursor="s_Cursor",e.s_HistoricalCursor="s_HistoricalCursor",e.DamageMark="DamageMark",e.HealingMark="HealingMark",e.AggroMark="AggroMark",e.LucidMark="LucidMark",e.MPTickMark="MPTickMark",e.MeditateTickMark="MeditateTickMark",e.AutoTickMark="AutoTickMark",e.Skill="Skill",e.Marker="Marker",e.WarningMark="WarningMark",e.Buff="Buff",e))(st||{});const gl=-1;var nn=(e=>(e.Info="Info",e.Untargetable="Untargetable",e.Buff="Buff",e))(nn||{});function hP(e){return e.type==="s_Cursor"||e.type==="s_HistoricalCursor"}var xt,Un,bo,Yt,J0,vE,ME,kR,Cr,eO,NC;let fP=(NC=class{constructor(){Fe(this,Yt);Z(this,"scale");Z(this,"startTime");Z(this,"elapsedTime");Z(this,"sharedElements");Z(this,"slots");Z(this,"activeSlotIndex");Fe(this,xt);Fe(this,Un);Fe(this,bo);this.scale=.25,this.startTime=0,this.elapsedTime=0,this.sharedElements=[],this.slots=[],this.activeSlotIndex=-1,Me(this,xt,[]),Me(this,Un,[]),Me(this,bo,[]),pe(this,Yt,eO).call(this)}setTimeSegment(t,n){this.startTime=t,this.elapsedTime=n}addElement(t){hP(t)?this.sharedElements.push(t):(console.assert(this.slots.length>0),this.slots[this.activeSlotIndex].elements.push(t))}invalidateLastElement(){if(this.slots.length>0){const t=this.slots[this.activeSlotIndex].elements;for(let n=t.length-1;n>=0;n--){const o=t[n];if(o.type==="Skill"){o.node.tmp_invalid_reasons=[Et.CastCanceled];return}}}}tryGetElement(t,n){return this.slots[this.activeSlotIndex].elements.find(o=>o.time===t&&o.type===n)}getAllMarkers(){return ie(this,xt)}getUntargetableMarkers(){return ie(this,Un)}getBuffMarkers(){return ie(this,bo)}addMarker(t){ie(this,xt).push(t),t.markerType==="Untargetable"?ie(this,Un).push(t):t.markerType==="Buff"&&ie(this,bo).push(t),this.drawElements(),pe(this,Yt,Cr).call(this)}deleteMarker(t){let n=!1;for(let o=0;o<ie(this,xt).length;o++)t===ie(this,xt)[o]&&(ie(this,xt).splice(o,1),this.drawElements(),pe(this,Yt,Cr).call(this),n=!0);return pe(this,Yt,vE).call(this),pe(this,Yt,ME).call(this),n}sortAndRemoveDuplicateMarkers(){ie(this,xt).sort((n,o)=>n.time-o.time);let t=0;for(let n=ie(this,xt).length-1;n>0;n--)pe(this,Yt,J0).call(this,ie(this,xt)[n],ie(this,xt)[n-1])&&(ie(this,xt).splice(n,1),t++);return pe(this,Yt,vE).call(this),pe(this,Yt,ME).call(this),pe(this,Yt,Cr).call(this),t}loadCombinedTracksPreset(t,n){if(t.fileType!==Mi.MarkerTracksCombined){window.alert("wrong file type '"+t.fileType+"'");return}t.tracks.forEach(o=>{this.loadIndividualTrackPreset(o,o.track,n)})}loadIndividualTrackPreset(t,n,o){if(t.fileType!==Mi.MarkerTrackIndividual){window.alert("wrong file type '"+t.fileType+"'");return}pe(this,Yt,kR).call(this,t,n,o)}deleteAllMarkers(){const t=ie(this,Un).length>0;Me(this,xt,[]),Me(this,Un,[]),Me(this,bo,[]),this.drawElements(),t&&on(),pe(this,Yt,Cr).call(this)}addSlotAtIndex(t){if(t<0||t>this.slots.length||this.slots.length+1>yi){console.error("attempted to add slot at invalid index",t);return}for(let n=yi-1;n>=t;n--){let o=bt(`gameRecord${n}`);o!==null&&It(`gameRecord${n+1}`,o),o=bt(`gameTimeInfo${n}`),o!==null&&It(`gameTimeInfo${n+1}`,o)}this.slots.splice(t,0,{job:"BLM",elements:[]}),this.activeSlotIndex=t,N.setConfigAndRestart(N.gameConfig)}addSlot(){this.addSlotAtIndex(this.slots.length)}removeSlot(t){console.assert(t<this.slots.length);for(let n=t;n<yi;n++){let o=bt("gameRecord"+(n+1).toString());o!==null&&It("gameRecord"+n.toString(),o),o=bt("gameTimeInfo"+(n+1).toString()),o!==null&&It("gameTimeInfo"+n.toString(),o)}this.slots.splice(t,1);for(let n=this.slots.length;n<yi;n++)TR("gameRecord"+n.toString()),TR("gameTimeInfo"+n.toString());this.activeSlotIndex>=t&&(this.activeSlotIndex=Math.max(0,this.activeSlotIndex-1)),this.loadSlot(this.activeSlotIndex),It("activeSlotIndex",this.activeSlotIndex.toString())}saveCurrentSlot(t,n,o){It("gameRecord"+this.activeSlotIndex.toString(),JSON.stringify(t)),It("gameTimeInfo"+this.activeSlotIndex.toString(),JSON.stringify({countdown:n,elapsedTime:o})),N.gameConfig.savePartialConfig()}loadSlot(t){const n=bt("gameRecord"+t.toString());if(n!==null){for(this.activeSlotIndex=t;this.slots.length<=t;)this.slots.push({job:"BLM",elements:[]});const o=JSON.parse(n);return N.loadBattleRecordFromFile(o),this.slots[t].job=N.game.job,!0}else return!1}reset(){this.startTime=0,this.elapsedTime=0,this.slots.length>0&&(this.slots[this.activeSlotIndex].elements=[]),this.sharedElements=[],this.addElement({type:"s_Cursor",time:0,displayTime:0}),this.addElement({type:"s_HistoricalCursor",time:0,displayTime:0,enabled:!1})}updateElem(t){console.assert(t&&t.type.substring(0,2)==="s_");for(let n=0;n<this.sharedElements.length;n++)if(this.sharedElements[n].type===t.type){this.sharedElements[n]=t;return}console.assert(!1)}setHorizontalScale(t){this.scale=t,this.drawElements()}getAllSlotsTimeInfo(){let t=0,n=0,o=!1;for(let l=0;l<yi;l++){const r=bt("gameTimeInfo"+l.toString());if(r!==null){const d=JSON.parse(r);t=Math.max(t,d.countdown),n=Math.max(n,d.elapsedTime),o=!0}}return o?{countdown:t,rightMostTime:n}:null}getCanvasWidth(){let t=Math.max(0,this.elapsedTime),n=N.gameConfig.countdown;const o=this.getAllSlotsTimeInfo();return o!==null&&(n=Math.max(n,o.countdown),t=Math.max(t,o.rightMostTime)),ie(this,xt).forEach(r=>{const d=r.time+r.duration;t=Math.max(t,d+n)}),Math.ceil((t+Math.max(0,n)+4)/8)*8*100*this.scale}getCanvasHeight(){const t=this.getNumMarkerTracks();return Oe.timelineCanvasHeight(t,this.slots.length)}positionFromTime(t){return t*this.scale*100}timeFromPosition(t){return t/(this.scale*100)}drawElements(){wo(),this.updateTimelineMarkers()}updateTimelineMarkers(){wo();const t=new Map;ie(this,xt).forEach(n=>{let o=t.get(n.track);o===void 0&&(o=[]),o.push(n),t.set(n.track,o)}),HR(t)}onClickTimelineAction(t,n){if(t<0||t>=N.record.length)return;N.record.onClickNode(t,n),_l(),Hu();const o=N.record.selectionStartIndex;o!==void 0?N.displayHistoricalState(-1/0,o):N.displayHistoricalState(-1/0,t)}resizeSelection(t){const n=N.record.selectionStartIndex,o=N.record.selectionEndIndex;if(n!==void 0&&o!==void 0){const l=(N.record.startIsPivot?o:n)+(t?-1:1);l>=0&&l<N.record.length&&this.onClickTimelineAction(l,!0)}}getNumMarkerTracks(){let t=-1,n=!1;for(let o=0;o<ie(this,xt).length;o++)t=Math.max(t,ie(this,xt)[o].track),ie(this,xt)[o].track===gl&&(n=!0);return n?t+2:t+1}duringUntargetable(t){for(let n=0;n<ie(this,Un).length;n++){const o=ie(this,Un)[n],l=o.time,r=o.time+o.duration;if(t>=l&&t<r)return!0}return!1}getTargetableDurationBetween(t,n){const o=function([d,h],[E,A]){const R=[];return d<E&&R.push([d,Math.min(h,E)]),A<h&&R.push([Math.max(A,d),h]),R};let l=[[t,n]];for(let d=0;d<ie(this,Un).length;d++){const h=ie(this,Un)[d],E=h.time,A=h.time+h.duration;let R=[];l.forEach(T=>{R=R.concat(o(T,[E,A]))}),l=R}let r=0;return l.forEach(d=>{r+=d[1]-d[0]}),r}serializedSeparateMarkerTracks(){const t=this.getNumMarkerTracks()-1,n=new Map;for(let l=gl;l<t+1;l++)n.set(l,[]);ie(this,xt).forEach(l=>{const r=n.get(l.track);console.assert(r),r&&(r.push({time:l.time,markerType:l.markerType,duration:l.duration,description:l.description,color:l.color,showText:l.showText}),n.set(l.track,r))});const o=[];return n.forEach((l,r)=>{l.length>0&&o.push({fileType:Mi.MarkerTrackIndividual,track:r,markers:l})}),o}serializedCombinedMarkerTracks(){const t=this.serializedSeparateMarkerTracks();return{fileType:Mi.MarkerTracksCombined,tracks:t}}},xt=new WeakMap,Un=new WeakMap,bo=new WeakMap,Yt=new WeakSet,J0=function(t,n){const o=function(l,r){return Math.abs(l-r)<Sa.epsilon};return!(t.markerType!==n.markerType||!o(t.time,n.time)||!o(t.duration,n.duration)||t.color!==n.color||t.track!==n.track||t.showText!==n.showText||t.description!==n.description)},vE=function(){Me(this,Un,[]),ie(this,xt).forEach(t=>{t.markerType==="Untargetable"&&ie(this,Un).push(t)}),on()},ME=function(){Me(this,bo,[]),ie(this,xt).forEach(t=>{t.markerType==="Buff"&&(t.description==="Wanderer's Minuet"&&(t.description=H.WanderersMinuet),ie(this,bo).push(t))})},kR=function(t,n,o){const l=t.markers.map(r=>({time:r.time+o,duration:r.duration,color:r.color,description:r.description,track:r.markerType==="Untargetable"?gl:n,type:"Marker",markerType:r.markerType??"Info",showText:r.showText??!1}));Me(this,xt,ie(this,xt).concat(l)),pe(this,Yt,vE).call(this),pe(this,Yt,ME).call(this),pe(this,Yt,Cr).call(this)},Cr=function(){const t=this.serializedSeparateMarkerTracks();It("timelineMarkers",JSON.stringify(t))},eO=function(){const t=bt("timelineMarkers");t!==null&&JSON.parse(t).forEach(o=>{pe(this,Yt,kR).call(this,o,o.track,0)})},NC);function AP(e){return ki({attr:{viewBox:"0 0 32 32"},child:[{tag:"path",attr:{d:"M 5 5 L 5 27 L 27 27 L 27 5 Z M 7 7 L 25 7 L 25 25 L 7 25 Z M 9 20 L 9 22 L 23 22 L 23 20 Z"},child:[]}]})(e)}const Wh=O.createContext(null);Wh.displayName="PanelGroupContext";const ta={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},YT=10,Ts=O.useLayoutEffect,Np=Lh.useId,mP=typeof Np=="function"?Np:()=>null;let RP=0;function KT(e=null){const t=mP(),n=O.useRef(e||t||null);return n.current===null&&(n.current=""+RP++),e??n.current}function tO({children:e,className:t="",collapsedSize:n,collapsible:o,defaultSize:l,forwardedRef:r,id:d,maxSize:h,minSize:E,onCollapse:A,onExpand:R,onResize:T,order:S,style:I,tagName:p="div",..._}){const b=O.useContext(Wh);if(b===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:v,expandPanel:L,getPanelSize:k,getPanelStyle:M,groupId:B,isPanelCollapsed:w,reevaluatePanelConstraints:x,registerPanel:Q,resizePanel:oe,unregisterPanel:he}=b,ue=KT(d),de=O.useRef({callbacks:{onCollapse:A,onExpand:R,onResize:T},constraints:{collapsedSize:n,collapsible:o,defaultSize:l,maxSize:h,minSize:E},id:ue,idIsFromProps:d!==void 0,order:S});O.useRef({didLogMissingDefaultSizeWarning:!1}),Ts(()=>{const{callbacks:$,constraints:ee}=de.current,Y={...ee};de.current.id=ue,de.current.idIsFromProps=d!==void 0,de.current.order=S,$.onCollapse=A,$.onExpand=R,$.onResize=T,ee.collapsedSize=n,ee.collapsible=o,ee.defaultSize=l,ee.maxSize=h,ee.minSize=E,(Y.collapsedSize!==ee.collapsedSize||Y.collapsible!==ee.collapsible||Y.maxSize!==ee.maxSize||Y.minSize!==ee.minSize)&&x(de.current,Y)}),Ts(()=>{const $=de.current;return Q($),()=>{he($)}},[S,ue,Q,he]),O.useImperativeHandle(r,()=>({collapse:()=>{v(de.current)},expand:$=>{L(de.current,$)},getId(){return ue},getSize(){return k(de.current)},isCollapsed(){return w(de.current)},isExpanded(){return!w(de.current)},resize:$=>{oe(de.current,$)}}),[v,L,k,w,ue,oe]);const fe=M(de.current,l);return O.createElement(p,{..._,children:e,className:t,id:ue,style:{...fe,...I},[ta.groupId]:B,[ta.panel]:"",[ta.panelCollapsible]:o||void 0,[ta.panelId]:ue,[ta.panelSize]:parseFloat(""+fe.flexGrow).toFixed(1)})}const aO=O.forwardRef((e,t)=>O.createElement(tO,{...e,forwardedRef:t}));tO.displayName="Panel";aO.displayName="forwardRef(Panel)";let xR=null,LE=-1,Al=null;function TP(e,t){if(t){const n=(t&sO)!==0,o=(t&rO)!==0,l=(t&cO)!==0,r=(t&uO)!==0;if(n)return l?"se-resize":r?"ne-resize":"e-resize";if(o)return l?"sw-resize":r?"nw-resize":"w-resize";if(l)return"s-resize";if(r)return"n-resize"}switch(e){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function SP(){Al!==null&&(document.head.removeChild(Al),xR=null,Al=null,LE=-1)}function Jm(e,t){var n,o;const l=TP(e,t);if(xR!==l){if(xR=l,Al===null&&(Al=document.createElement("style"),document.head.appendChild(Al)),LE>=0){var r;(r=Al.sheet)===null||r===void 0||r.removeRule(LE)}LE=(n=(o=Al.sheet)===null||o===void 0?void 0:o.insertRule(`*{cursor: ${l} !important;}`))!==null&&n!==void 0?n:-1}}function nO(e){return e.type==="keydown"}function iO(e){return e.type.startsWith("pointer")}function oO(e){return e.type.startsWith("mouse")}function Xh(e){if(iO(e)){if(e.isPrimary)return{x:e.clientX,y:e.clientY}}else if(oO(e))return{x:e.clientX,y:e.clientY};return{x:1/0,y:1/0}}function IP(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function _P(e,t,n){return e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y}function gP(e,t){if(e===t)throw new Error("Cannot compare node with itself");const n={a:Op(e),b:Op(t)};let o;for(;n.a.at(-1)===n.b.at(-1);)e=n.a.pop(),t=n.b.pop(),o=e;$e(o,"Stacking order can only be calculated for elements with a common ancestor");const l={a:Cp(pp(n.a)),b:Cp(pp(n.b))};if(l.a===l.b){const r=o.childNodes,d={a:n.a.at(-1),b:n.b.at(-1)};let h=r.length;for(;h--;){const E=r[h];if(E===d.a)return 1;if(E===d.b)return-1}}return Math.sign(l.a-l.b)}const NP=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function pP(e){var t;const n=getComputedStyle((t=lO(e))!==null&&t!==void 0?t:e).display;return n==="flex"||n==="inline-flex"}function CP(e){const t=getComputedStyle(e);return!!(t.position==="fixed"||t.zIndex!=="auto"&&(t.position!=="static"||pP(e))||+t.opacity<1||"transform"in t&&t.transform!=="none"||"webkitTransform"in t&&t.webkitTransform!=="none"||"mixBlendMode"in t&&t.mixBlendMode!=="normal"||"filter"in t&&t.filter!=="none"||"webkitFilter"in t&&t.webkitFilter!=="none"||"isolation"in t&&t.isolation==="isolate"||NP.test(t.willChange)||t.webkitOverflowScrolling==="touch")}function pp(e){let t=e.length;for(;t--;){const n=e[t];if($e(n,"Missing node"),CP(n))return n}return null}function Cp(e){return e&&Number(getComputedStyle(e).zIndex)||0}function Op(e){const t=[];for(;e;)t.push(e),e=lO(e);return t}function lO(e){const{parentNode:t}=e;return t&&t instanceof ShadowRoot?t.host:t}const sO=1,rO=2,cO=4,uO=8,OP=IP()==="coarse";let Li=[],Pr=!1,ss=new Map,qh=new Map;const Mu=new Set;function bP(e,t,n,o,l){var r;const{ownerDocument:d}=t,h={direction:n,element:t,hitAreaMargins:o,setResizeHandlerState:l},E=(r=ss.get(d))!==null&&r!==void 0?r:0;return ss.set(d,E+1),Mu.add(h),hh(),function(){var R;qh.delete(e),Mu.delete(h);const T=(R=ss.get(d))!==null&&R!==void 0?R:1;if(ss.set(d,T-1),hh(),T===1&&ss.delete(d),Li.includes(h)){const S=Li.indexOf(h);S>=0&&Li.splice(S,1),WT(),l("up",!0,null)}}}function DP(e){const{target:t}=e,{x:n,y:o}=Xh(e);Pr=!0,VT({target:t,x:n,y:o}),hh(),Li.length>0&&(fh("down",e),e.preventDefault(),dO(t)||e.stopImmediatePropagation())}function eR(e){const{x:t,y:n}=Xh(e);if(Pr&&e.buttons===0&&(Pr=!1,fh("up",e)),!Pr){const{target:o}=e;VT({target:o,x:t,y:n})}fh("move",e),WT(),Li.length>0&&e.preventDefault()}function tR(e){const{target:t}=e,{x:n,y:o}=Xh(e);qh.clear(),Pr=!1,Li.length>0&&(e.preventDefault(),dO(t)||e.stopImmediatePropagation()),fh("up",e),VT({target:t,x:n,y:o}),WT(),hh()}function dO(e){let t=e;for(;t;){if(t.hasAttribute(ta.resizeHandle))return!0;t=t.parentElement}return!1}function VT({target:e,x:t,y:n}){Li.splice(0);let o=null;(e instanceof HTMLElement||e instanceof SVGElement)&&(o=e),Mu.forEach(l=>{const{element:r,hitAreaMargins:d}=l,h=r.getBoundingClientRect(),{bottom:E,left:A,right:R,top:T}=h,S=OP?d.coarse:d.fine;if(t>=A-S&&t<=R+S&&n>=T-S&&n<=E+S){if(o!==null&&document.contains(o)&&r!==o&&!r.contains(o)&&!o.contains(r)&&gP(o,r)>0){let p=o,_=!1;for(;p&&!p.contains(r);){if(_P(p.getBoundingClientRect(),h)){_=!0;break}p=p.parentElement}if(_)return}Li.push(l)}})}function aR(e,t){qh.set(e,t)}function WT(){let e=!1,t=!1;Li.forEach(o=>{const{direction:l}=o;l==="horizontal"?e=!0:t=!0});let n=0;qh.forEach(o=>{n|=o}),e&&t?Jm("intersection",n):e?Jm("horizontal",n):t?Jm("vertical",n):SP()}let nR=new AbortController;function hh(){nR.abort(),nR=new AbortController;const e={capture:!0,signal:nR.signal};Mu.size&&(Pr?(Li.length>0&&ss.forEach((t,n)=>{const{body:o}=n;t>0&&(o.addEventListener("contextmenu",tR,e),o.addEventListener("pointerleave",eR,e),o.addEventListener("pointermove",eR,e))}),window.addEventListener("pointerup",tR,e),window.addEventListener("pointercancel",tR,e)):ss.forEach((t,n)=>{const{body:o}=n;t>0&&(o.addEventListener("pointerdown",DP,e),o.addEventListener("pointermove",eR,e))}))}function fh(e,t){Mu.forEach(n=>{const{setResizeHandlerState:o}=n,l=Li.includes(n);o(e,l,t)})}function yP(){const[e,t]=O.useState(0);return O.useCallback(()=>t(n=>n+1),[])}function $e(e,t){if(!e)throw console.error(t),Error(t)}function ps(e,t,n=YT){return e.toFixed(n)===t.toFixed(n)?0:e>t?1:-1}function yo(e,t,n=YT){return ps(e,t,n)===0}function qn(e,t,n){return ps(e,t,n)===0}function vP(e,t,n){if(e.length!==t.length)return!1;for(let o=0;o<e.length;o++){const l=e[o],r=t[o];if(!qn(l,r,n))return!1}return!0}function Dr({panelConstraints:e,panelIndex:t,size:n}){const o=e[t];$e(o!=null,`Panel constraints not found for index ${t}`);let{collapsedSize:l=0,collapsible:r,maxSize:d=100,minSize:h=0}=o;if(ps(n,h)<0)if(r){const E=(l+h)/2;ps(n,E)<0?n=l:n=h}else n=h;return n=Math.min(d,n),n=parseFloat(n.toFixed(YT)),n}function mu({delta:e,initialLayout:t,panelConstraints:n,pivotIndices:o,prevLayout:l,trigger:r}){if(qn(e,0))return t;const d=[...t],[h,E]=o;$e(h!=null,"Invalid first pivot index"),$e(E!=null,"Invalid second pivot index");let A=0;if(r==="keyboard"){{const T=e<0?E:h,S=n[T];$e(S,`Panel constraints not found for index ${T}`);const{collapsedSize:I=0,collapsible:p,minSize:_=0}=S;if(p){const b=t[T];if($e(b!=null,`Previous layout not found for panel index ${T}`),qn(b,I)){const v=_-b;ps(v,Math.abs(e))>0&&(e=e<0?0-v:v)}}}{const T=e<0?h:E,S=n[T];$e(S,`No panel constraints found for index ${T}`);const{collapsedSize:I=0,collapsible:p,minSize:_=0}=S;if(p){const b=t[T];if($e(b!=null,`Previous layout not found for panel index ${T}`),qn(b,_)){const v=b-I;ps(v,Math.abs(e))>0&&(e=e<0?0-v:v)}}}}{const T=e<0?1:-1;let S=e<0?E:h,I=0;for(;;){const _=t[S];$e(_!=null,`Previous layout not found for panel index ${S}`);const v=Dr({panelConstraints:n,panelIndex:S,size:100})-_;if(I+=v,S+=T,S<0||S>=n.length)break}const p=Math.min(Math.abs(e),Math.abs(I));e=e<0?0-p:p}{let S=e<0?h:E;for(;S>=0&&S<n.length;){const I=Math.abs(e)-Math.abs(A),p=t[S];$e(p!=null,`Previous layout not found for panel index ${S}`);const _=p-I,b=Dr({panelConstraints:n,panelIndex:S,size:_});if(!qn(p,b)&&(A+=p-b,d[S]=b,A.toPrecision(3).localeCompare(Math.abs(e).toPrecision(3),void 0,{numeric:!0})>=0))break;e<0?S--:S++}}if(vP(l,d))return l;{const T=e<0?E:h,S=t[T];$e(S!=null,`Previous layout not found for panel index ${T}`);const I=S+A,p=Dr({panelConstraints:n,panelIndex:T,size:I});if(d[T]=p,!qn(p,I)){let _=I-p,v=e<0?E:h;for(;v>=0&&v<n.length;){const L=d[v];$e(L!=null,`Previous layout not found for panel index ${v}`);const k=L+_,M=Dr({panelConstraints:n,panelIndex:v,size:k});if(qn(L,M)||(_-=M-L,d[v]=M),qn(_,0))break;e>0?v--:v++}}}const R=d.reduce((T,S)=>S+T,0);return qn(R,100)?d:l}function MP({layout:e,panelsArray:t,pivotIndices:n}){let o=0,l=100,r=0,d=0;const h=n[0];$e(h!=null,"No pivot index found"),t.forEach((T,S)=>{const{constraints:I}=T,{maxSize:p=100,minSize:_=0}=I;S===h?(o=_,l=p):(r+=_,d+=p)});const E=Math.min(l,100-r),A=Math.max(o,100-d),R=e[h];return{valueMax:E,valueMin:A,valueNow:R}}function Lu(e,t=document){return Array.from(t.querySelectorAll(`[${ta.resizeHandleId}][data-panel-group-id="${e}"]`))}function EO(e,t,n=document){const l=Lu(e,n).findIndex(r=>r.getAttribute(ta.resizeHandleId)===t);return l??null}function hO(e,t,n){const o=EO(e,t,n);return o!=null?[o,o+1]:[-1,-1]}function fO(e,t=document){var n;if(t instanceof HTMLElement&&(t==null||(n=t.dataset)===null||n===void 0?void 0:n.panelGroupId)==e)return t;const o=t.querySelector(`[data-panel-group][data-panel-group-id="${e}"]`);return o||null}function Zh(e,t=document){const n=t.querySelector(`[${ta.resizeHandleId}="${e}"]`);return n||null}function LP(e,t,n,o=document){var l,r,d,h;const E=Zh(t,o),A=Lu(e,o),R=E?A.indexOf(E):-1,T=(l=(r=n[R])===null||r===void 0?void 0:r.id)!==null&&l!==void 0?l:null,S=(d=(h=n[R+1])===null||h===void 0?void 0:h.id)!==null&&d!==void 0?d:null;return[T,S]}function HP({committedValuesRef:e,eagerValuesRef:t,groupId:n,layout:o,panelDataArray:l,panelGroupElement:r,setLayout:d}){O.useRef({didWarnAboutMissingResizeHandle:!1}),Ts(()=>{if(!r)return;const h=Lu(n,r);for(let E=0;E<l.length-1;E++){const{valueMax:A,valueMin:R,valueNow:T}=MP({layout:o,panelsArray:l,pivotIndices:[E,E+1]}),S=h[E];if(S!=null){const I=l[E];$e(I,`No panel data found for index "${E}"`),S.setAttribute("aria-controls",I.id),S.setAttribute("aria-valuemax",""+Math.round(A)),S.setAttribute("aria-valuemin",""+Math.round(R)),S.setAttribute("aria-valuenow",T!=null?""+Math.round(T):"")}}return()=>{h.forEach((E,A)=>{E.removeAttribute("aria-controls"),E.removeAttribute("aria-valuemax"),E.removeAttribute("aria-valuemin"),E.removeAttribute("aria-valuenow")})}},[n,o,l,r]),O.useEffect(()=>{if(!r)return;const h=t.current;$e(h,"Eager values not found");const{panelDataArray:E}=h,A=fO(n,r);$e(A!=null,`No group found for id "${n}"`);const R=Lu(n,r);$e(R,`No resize handles found for group id "${n}"`);const T=R.map(S=>{const I=S.getAttribute(ta.resizeHandleId);$e(I,"Resize handle element has no handle id attribute");const[p,_]=LP(n,I,E,r);if(p==null||_==null)return()=>{};const b=v=>{if(!v.defaultPrevented)switch(v.key){case"Enter":{v.preventDefault();const L=E.findIndex(k=>k.id===p);if(L>=0){const k=E[L];$e(k,`No panel data found for index ${L}`);const M=o[L],{collapsedSize:B=0,collapsible:w,minSize:x=0}=k.constraints;if(M!=null&&w){const Q=mu({delta:qn(M,B)?x-B:B-M,initialLayout:o,panelConstraints:E.map(oe=>oe.constraints),pivotIndices:hO(n,I,r),prevLayout:o,trigger:"keyboard"});o!==Q&&d(Q)}}break}}};return S.addEventListener("keydown",b),()=>{S.removeEventListener("keydown",b)}});return()=>{T.forEach(S=>S())}},[r,e,t,n,o,l,d])}function bp(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function AO(e,t){const n=e==="horizontal",{x:o,y:l}=Xh(t);return n?o:l}function UP(e,t,n,o,l){const r=n==="horizontal",d=Zh(t,l);$e(d,`No resize handle element found for id "${t}"`);const h=d.getAttribute(ta.groupId);$e(h,"Resize handle element has no group id attribute");let{initialCursorPosition:E}=o;const A=AO(n,e),R=fO(h,l);$e(R,`No group element found for id "${h}"`);const T=R.getBoundingClientRect(),S=r?T.width:T.height;return(A-E)/S*100}function kP(e,t,n,o,l,r){if(nO(e)){const d=n==="horizontal";let h=0;e.shiftKey?h=100:l!=null?h=l:h=10;let E=0;switch(e.key){case"ArrowDown":E=d?0:h;break;case"ArrowLeft":E=d?-h:0;break;case"ArrowRight":E=d?h:0;break;case"ArrowUp":E=d?0:-h;break;case"End":E=100;break;case"Home":E=-100;break}return E}else return o==null?0:UP(e,t,n,o,r)}function xP({panelDataArray:e}){const t=Array(e.length),n=e.map(r=>r.constraints);let o=0,l=100;for(let r=0;r<e.length;r++){const d=n[r];$e(d,`Panel constraints not found for index ${r}`);const{defaultSize:h}=d;h!=null&&(o++,t[r]=h,l-=h)}for(let r=0;r<e.length;r++){const d=n[r];$e(d,`Panel constraints not found for index ${r}`);const{defaultSize:h}=d;if(h!=null)continue;const E=e.length-o,A=l/E;o++,t[r]=A,l-=A}return t}function pr(e,t,n){t.forEach((o,l)=>{const r=e[l];$e(r,`Panel data not found for index ${l}`);const{callbacks:d,constraints:h,id:E}=r,{collapsedSize:A=0,collapsible:R}=h,T=n[E];if(T==null||o!==T){n[E]=o;const{onCollapse:S,onExpand:I,onResize:p}=d;p&&p(o,T),R&&(S||I)&&(I&&(T==null||yo(T,A))&&!yo(o,A)&&I(),S&&(T==null||!yo(T,A))&&yo(o,A)&&S())}})}function pE(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function PP({defaultSize:e,dragState:t,layout:n,panelData:o,panelIndex:l,precision:r=3}){const d=n[l];let h;return d==null?h=e!=null?e.toPrecision(r):"1":o.length===1?h="1":h=d.toPrecision(r),{flexBasis:0,flexGrow:h,flexShrink:1,overflow:"hidden",pointerEvents:t!==null?"none":void 0}}function wP(e,t=10){let n=null;return(...l)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{e(...l)},t)}}function Dp(e){try{if(typeof localStorage<"u")e.getItem=t=>localStorage.getItem(t),e.setItem=(t,n)=>{localStorage.setItem(t,n)};else throw new Error("localStorage not supported in this environment")}catch(t){console.error(t),e.getItem=()=>null,e.setItem=()=>{}}}function mO(e){return`react-resizable-panels:${e}`}function RO(e){return e.map(t=>{const{constraints:n,id:o,idIsFromProps:l,order:r}=t;return l?o:r?`${r}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((t,n)=>t.localeCompare(n)).join(",")}function TO(e,t){try{const n=mO(e),o=t.getItem(n);if(o){const l=JSON.parse(o);if(typeof l=="object"&&l!=null)return l}}catch{}return null}function GP(e,t,n){var o,l;const r=(o=TO(e,n))!==null&&o!==void 0?o:{},d=RO(t);return(l=r[d])!==null&&l!==void 0?l:null}function BP(e,t,n,o,l){var r;const d=mO(e),h=RO(t),E=(r=TO(e,l))!==null&&r!==void 0?r:{};E[h]={expandToSizes:Object.fromEntries(n.entries()),layout:o};try{l.setItem(d,JSON.stringify(E))}catch(A){console.error(A)}}function yp({layout:e,panelConstraints:t}){const n=[...e],o=n.reduce((r,d)=>r+d,0);if(n.length!==t.length)throw Error(`Invalid ${t.length} panel layout: ${n.map(r=>`${r}%`).join(", ")}`);if(!qn(o,100)&&n.length>0)for(let r=0;r<t.length;r++){const d=n[r];$e(d!=null,`No layout data found for index ${r}`);const h=100/o*d;n[r]=h}let l=0;for(let r=0;r<t.length;r++){const d=n[r];$e(d!=null,`No layout data found for index ${r}`);const h=Dr({panelConstraints:t,panelIndex:r,size:d});d!=h&&(l+=d-h,n[r]=h)}if(!qn(l,0))for(let r=0;r<t.length;r++){const d=n[r];$e(d!=null,`No layout data found for index ${r}`);const h=d+l,E=Dr({panelConstraints:t,panelIndex:r,size:h});if(d!==E&&(l-=E-d,n[r]=E,qn(l,0)))break}return n}const FP=100,Ru={getItem:e=>(Dp(Ru),Ru.getItem(e)),setItem:(e,t)=>{Dp(Ru),Ru.setItem(e,t)}},vp={};function SO({autoSaveId:e=null,children:t,className:n="",direction:o,forwardedRef:l,id:r=null,onLayout:d=null,keyboardResizeBy:h=null,storage:E=Ru,style:A,tagName:R="div",...T}){const S=KT(r),I=O.useRef(null),[p,_]=O.useState(null),[b,v]=O.useState([]),L=yP(),k=O.useRef({}),M=O.useRef(new Map),B=O.useRef(0),w=O.useRef({autoSaveId:e,direction:o,dragState:p,id:S,keyboardResizeBy:h,onLayout:d,storage:E}),x=O.useRef({layout:b,panelDataArray:[],panelDataArrayChanged:!1});O.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),O.useImperativeHandle(l,()=>({getId:()=>w.current.id,getLayout:()=>{const{layout:G}=x.current;return G},setLayout:G=>{const{onLayout:J}=w.current,{layout:Ee,panelDataArray:re}=x.current,Ae=yp({layout:G,panelConstraints:re.map(Re=>Re.constraints)});bp(Ee,Ae)||(v(Ae),x.current.layout=Ae,J&&J(Ae),pr(re,Ae,k.current))}}),[]),Ts(()=>{w.current.autoSaveId=e,w.current.direction=o,w.current.dragState=p,w.current.id=S,w.current.onLayout=d,w.current.storage=E}),HP({committedValuesRef:w,eagerValuesRef:x,groupId:S,layout:b,panelDataArray:x.current.panelDataArray,setLayout:v,panelGroupElement:I.current}),O.useEffect(()=>{const{panelDataArray:G}=x.current;if(e){if(b.length===0||b.length!==G.length)return;let J=vp[e];J==null&&(J=wP(BP,FP),vp[e]=J);const Ee=[...G],re=new Map(M.current);J(e,Ee,re,b,E)}},[e,b,E]),O.useEffect(()=>{});const Q=O.useCallback(G=>{const{onLayout:J}=w.current,{layout:Ee,panelDataArray:re}=x.current;if(G.constraints.collapsible){const Ae=re.map(_e=>_e.constraints),{collapsedSize:Re=0,panelSize:Ce,pivotIndices:xe}=ns(re,G,Ee);if($e(Ce!=null,`Panel size not found for panel "${G.id}"`),!yo(Ce,Re)){M.current.set(G.id,Ce);const ge=Or(re,G)===re.length-1?Ce-Re:Re-Ce,le=mu({delta:ge,initialLayout:Ee,panelConstraints:Ae,pivotIndices:xe,prevLayout:Ee,trigger:"imperative-api"});pE(Ee,le)||(v(le),x.current.layout=le,J&&J(le),pr(re,le,k.current))}}},[]),oe=O.useCallback((G,J)=>{const{onLayout:Ee}=w.current,{layout:re,panelDataArray:Ae}=x.current;if(G.constraints.collapsible){const Re=Ae.map(Ne=>Ne.constraints),{collapsedSize:Ce=0,panelSize:xe=0,minSize:_e=0,pivotIndices:ge}=ns(Ae,G,re),le=J??_e;if(yo(xe,Ce)){const Ne=M.current.get(G.id),Le=Ne!=null&&Ne>=le?Ne:le,Ze=Or(Ae,G)===Ae.length-1?xe-Le:Le-xe,Qe=mu({delta:Ze,initialLayout:re,panelConstraints:Re,pivotIndices:ge,prevLayout:re,trigger:"imperative-api"});pE(re,Qe)||(v(Qe),x.current.layout=Qe,Ee&&Ee(Qe),pr(Ae,Qe,k.current))}}},[]),he=O.useCallback(G=>{const{layout:J,panelDataArray:Ee}=x.current,{panelSize:re}=ns(Ee,G,J);return $e(re!=null,`Panel size not found for panel "${G.id}"`),re},[]),ue=O.useCallback((G,J)=>{const{panelDataArray:Ee}=x.current,re=Or(Ee,G);return PP({defaultSize:J,dragState:p,layout:b,panelData:Ee,panelIndex:re})},[p,b]),de=O.useCallback(G=>{const{layout:J,panelDataArray:Ee}=x.current,{collapsedSize:re=0,collapsible:Ae,panelSize:Re}=ns(Ee,G,J);return $e(Re!=null,`Panel size not found for panel "${G.id}"`),Ae===!0&&yo(Re,re)},[]),fe=O.useCallback(G=>{const{layout:J,panelDataArray:Ee}=x.current,{collapsedSize:re=0,collapsible:Ae,panelSize:Re}=ns(Ee,G,J);return $e(Re!=null,`Panel size not found for panel "${G.id}"`),!Ae||ps(Re,re)>0},[]),$=O.useCallback(G=>{const{panelDataArray:J}=x.current;J.push(G),J.sort((Ee,re)=>{const Ae=Ee.order,Re=re.order;return Ae==null&&Re==null?0:Ae==null?-1:Re==null?1:Ae-Re}),x.current.panelDataArrayChanged=!0,L()},[L]);Ts(()=>{if(x.current.panelDataArrayChanged){x.current.panelDataArrayChanged=!1;const{autoSaveId:G,onLayout:J,storage:Ee}=w.current,{layout:re,panelDataArray:Ae}=x.current;let Re=null;if(G){const xe=GP(G,Ae,Ee);xe&&(M.current=new Map(Object.entries(xe.expandToSizes)),Re=xe.layout)}Re==null&&(Re=xP({panelDataArray:Ae}));const Ce=yp({layout:Re,panelConstraints:Ae.map(xe=>xe.constraints)});bp(re,Ce)||(v(Ce),x.current.layout=Ce,J&&J(Ce),pr(Ae,Ce,k.current))}}),Ts(()=>{const G=x.current;return()=>{G.layout=[]}},[]);const ee=O.useCallback(G=>{let J=!1;const Ee=I.current;return Ee&&window.getComputedStyle(Ee,null).getPropertyValue("direction")==="rtl"&&(J=!0),function(Ae){Ae.preventDefault();const Re=I.current;if(!Re)return()=>null;const{direction:Ce,dragState:xe,id:_e,keyboardResizeBy:ge,onLayout:le}=w.current,{layout:Ne,panelDataArray:Le}=x.current,{initialLayout:Xe}=xe??{},Ze=hO(_e,G,Re);let Qe=kP(Ae,G,Ce,xe,ge,Re);const Ke=Ce==="horizontal";Ke&&J&&(Qe=-Qe);const At=Le.map(xs=>xs.constraints),Qt=mu({delta:Qe,initialLayout:Xe??Ne,panelConstraints:At,pivotIndices:Ze,prevLayout:Ne,trigger:nO(Ae)?"keyboard":"mouse-or-touch"}),wl=!pE(Ne,Qt);(iO(Ae)||oO(Ae))&&B.current!=Qe&&(B.current=Qe,!wl&&Qe!==0?Ke?aR(G,Qe<0?sO:rO):aR(G,Qe<0?cO:uO):aR(G,0)),wl&&(v(Qt),x.current.layout=Qt,le&&le(Qt),pr(Le,Qt,k.current))}},[]),Y=O.useCallback((G,J)=>{const{onLayout:Ee}=w.current,{layout:re,panelDataArray:Ae}=x.current,Re=Ae.map(Ne=>Ne.constraints),{panelSize:Ce,pivotIndices:xe}=ns(Ae,G,re);$e(Ce!=null,`Panel size not found for panel "${G.id}"`);const ge=Or(Ae,G)===Ae.length-1?Ce-J:J-Ce,le=mu({delta:ge,initialLayout:re,panelConstraints:Re,pivotIndices:xe,prevLayout:re,trigger:"imperative-api"});pE(re,le)||(v(le),x.current.layout=le,Ee&&Ee(le),pr(Ae,le,k.current))},[]),P=O.useCallback((G,J)=>{const{layout:Ee,panelDataArray:re}=x.current,{collapsedSize:Ae=0,collapsible:Re}=J,{collapsedSize:Ce=0,collapsible:xe,maxSize:_e=100,minSize:ge=0}=G.constraints,{panelSize:le}=ns(re,G,Ee);le!=null&&(Re&&xe&&yo(le,Ae)?yo(Ae,Ce)||Y(G,Ce):le<ge?Y(G,ge):le>_e&&Y(G,_e))},[Y]),K=O.useCallback((G,J)=>{const{direction:Ee}=w.current,{layout:re}=x.current;if(!I.current)return;const Ae=Zh(G,I.current);$e(Ae,`Drag handle element not found for id "${G}"`);const Re=AO(Ee,J);_({dragHandleId:G,dragHandleRect:Ae.getBoundingClientRect(),initialCursorPosition:Re,initialLayout:re})},[]),W=O.useCallback(()=>{_(null)},[]),D=O.useCallback(G=>{const{panelDataArray:J}=x.current,Ee=Or(J,G);Ee>=0&&(J.splice(Ee,1),delete k.current[G.id],x.current.panelDataArrayChanged=!0,L())},[L]),j=O.useMemo(()=>({collapsePanel:Q,direction:o,dragState:p,expandPanel:oe,getPanelSize:he,getPanelStyle:ue,groupId:S,isPanelCollapsed:de,isPanelExpanded:fe,reevaluatePanelConstraints:P,registerPanel:$,registerResizeHandle:ee,resizePanel:Y,startDragging:K,stopDragging:W,unregisterPanel:D,panelGroupElement:I.current}),[Q,p,o,oe,he,ue,S,de,fe,P,$,ee,Y,K,W,D]),F={display:"flex",flexDirection:o==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return O.createElement(Wh.Provider,{value:j},O.createElement(R,{...T,children:t,className:n,id:r,ref:I,style:{...F,...A},[ta.group]:"",[ta.groupDirection]:o,[ta.groupId]:S}))}const IO=O.forwardRef((e,t)=>O.createElement(SO,{...e,forwardedRef:t}));SO.displayName="PanelGroup";IO.displayName="forwardRef(PanelGroup)";function Or(e,t){return e.findIndex(n=>n===t||n.id===t.id)}function ns(e,t,n){const o=Or(e,t),r=o===e.length-1?[o-1,o]:[o,o+1],d=n[o];return{...t.constraints,panelSize:d,pivotIndices:r}}function zP({disabled:e,handleId:t,resizeHandler:n,panelGroupElement:o}){O.useEffect(()=>{if(e||n==null||o==null)return;const l=Zh(t,o);if(l==null)return;const r=d=>{if(!d.defaultPrevented)switch(d.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{d.preventDefault(),n(d);break}case"F6":{d.preventDefault();const h=l.getAttribute(ta.groupId);$e(h,`No group element found for id "${h}"`);const E=Lu(h,o),A=EO(h,t,o);$e(A!==null,`No resize element found for id "${t}"`);const R=d.shiftKey?A>0?A-1:E.length-1:A+1<E.length?A+1:0;E[R].focus();break}}};return l.addEventListener("keydown",r),()=>{l.removeEventListener("keydown",r)}},[o,e,t,n])}function _O({children:e=null,className:t="",disabled:n=!1,hitAreaMargins:o,id:l,onBlur:r,onClick:d,onDragging:h,onFocus:E,onPointerDown:A,onPointerUp:R,style:T={},tabIndex:S=0,tagName:I="div",...p}){var _,b;const v=O.useRef(null),L=O.useRef({onClick:d,onDragging:h,onPointerDown:A,onPointerUp:R});O.useEffect(()=>{L.current.onClick=d,L.current.onDragging=h,L.current.onPointerDown=A,L.current.onPointerUp=R});const k=O.useContext(Wh);if(k===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:M,groupId:B,registerResizeHandle:w,startDragging:x,stopDragging:Q,panelGroupElement:oe}=k,he=KT(l),[ue,de]=O.useState("inactive"),[fe,$]=O.useState(!1),[ee,Y]=O.useState(null),P=O.useRef({state:ue});Ts(()=>{P.current.state=ue}),O.useEffect(()=>{if(n)Y(null);else{const j=w(he);Y(()=>j)}},[n,he,w]);const K=(_=o==null?void 0:o.coarse)!==null&&_!==void 0?_:15,W=(b=o==null?void 0:o.fine)!==null&&b!==void 0?b:5;O.useEffect(()=>{if(n||ee==null)return;const j=v.current;$e(j,"Element ref not attached");let F=!1;return bP(he,j,M,{coarse:K,fine:W},(J,Ee,re)=>{if(!Ee){de("inactive");return}switch(J){case"down":{de("drag"),F=!1,$e(re,'Expected event to be defined for "down" action'),x(he,re);const{onDragging:Ae,onPointerDown:Re}=L.current;Ae==null||Ae(!0),Re==null||Re();break}case"move":{const{state:Ae}=P.current;F=!0,Ae!=="drag"&&de("hover"),$e(re,'Expected event to be defined for "move" action'),ee(re);break}case"up":{de("hover"),Q();const{onClick:Ae,onDragging:Re,onPointerUp:Ce}=L.current;Re==null||Re(!1),Ce==null||Ce(),F||Ae==null||Ae();break}}})},[K,M,n,W,w,he,ee,x,Q]),zP({disabled:n,handleId:he,resizeHandler:ee,panelGroupElement:oe});const D={touchAction:"none",userSelect:"none"};return O.createElement(I,{...p,children:e,className:t,id:l,onBlur:()=>{$(!1),r==null||r()},onFocus:()=>{$(!0),E==null||E()},ref:v,role:"separator",style:{...D,...T},tabIndex:S,[ta.groupDirection]:M,[ta.groupId]:B,[ta.resizeHandle]:"",[ta.resizeHandleActive]:ue==="drag"?"pointer":fe?"keyboard":void 0,[ta.resizeHandleEnabled]:!n,[ta.resizeHandleId]:he,[ta.resizeHandleState]:ue})}_O.displayName="PanelResizeHandle";const jP=3,Oe={rulerHeight:30,trackHeight:14,slotPaddingTop:4,damageMarkerHeight:8,skillButtonHeight:28,buffCoverHeight:4,slotPaddingBottom:4,renderSlotHeight:()=>Oe.slotPaddingTop+Oe.damageMarkerHeight+Oe.skillButtonHeight*1.5+Oe.buffCoverHeight*jP+Oe.slotPaddingBottom,timelineCanvasHeight:(e,t)=>{let n=Oe.rulerHeight;return n+=Oe.trackHeight*e,n+=Oe.renderSlotHeight()*t,t<yi&&(n+=Oe.addSlotButtonHeight),n},leftBufferWidth:20,addSlotButtonHeight:20},YP={drawMarkers:!0,drawDamageMarks:!0,drawHealingMarks:!0,drawMPTickMarks:!0,drawBuffIndicators:!0};function KP(e){const t=new Blob([JSON.stringify(e)],{type:"text/plain;charset=utf-8"});return window.URL.createObjectURL(t)}function VP(e){var o;let t="";(o=e.meta)==null||o.forEach(l=>{t+="#"+l.toString()+`
`}),e.body.forEach(l=>{for(let r=0;r<l.length;r++)t+=l[r].toString(),r<l.length-1&&(t+=",");t+=`
`});const n=new Blob([t],{type:"text/csv;charset=utf-8"});return window.URL.createObjectURL(n)}var Uo=(e=>(e.Json="JSON",e.Csv="CSV",e.Png="PNG",e))(Uo||{});function Nl(e){var r;const[t,n]=O.useState({jsonContent:{},csvContent:{body:[]},pngContent:void 0}),o=()=>{const d=e.getContentFn();e.fileFormat==="JSON"?n({jsonContent:d}):e.fileFormat==="CSV"?n({csvContent:d}):e.fileFormat==="PNG"?n({pngContent:d}):console.assert(!1)};let l="";return e.fileFormat==="JSON"?l=KP(t.jsonContent):e.fileFormat==="CSV"?l=VP(t.csvContent):e.fileFormat==="PNG"?l=((r=t.pngContent)==null?void 0:r.toDataURL())??"":console.assert(!1),u.jsx("a",{style:{color:Pt().fileDownload,marginRight:6},href:l,download:e.filename,onClick:()=>o(),onContextMenu:()=>o(),children:`[${e.displayName===void 0?"download":e.displayName}]`})}function WP(e,t=n=>{console.log(n)}){const n=new FileReader;n.onload=function(o){var d,h;const l=((h=(d=o.target)==null?void 0:d.result)==null?void 0:h.toString())??"";let r;try{r=JSON.parse(l)}catch(E){window.alert(C({en:"Parse error! Are you sure this is the correct file? This tool only reads text files in JSON format.",zh:"解析出错- 你确定文件没选错吗？本工具只读取JSON格式的文本文件"})),console.error(E)}t(r)},n.readAsText(e,"UTF-8")}const it={positionFromTimeAndScale:function(e,t){return e*t*100},timeFromPositionAndScale:function(e,t){return e/(t*100)},displayTime:function(e,t){const n=Math.abs(e),o=Math.floor(n/60),l=n-60*o;return(e<0?"-":"")+o.toString()+":"+(l+Sa.epsilon<10?"0":"")+l.toFixed(t).toString()}},XP=function(e){console.log("[asyncFetch] some error occurred")},Mp=new Map;function gO(e,t,n=XP){const o=Mp.get(e);if(o){t(o);return}const l=new XMLHttpRequest;l.addEventListener("error",n),l.addEventListener("load",r=>{t(l.responseText),Mp.set(e,l.responseText)}),l.open("GET",e),l.send()}function Mo(e){const t=e.trim();let n=1;e[0]==="-"&&(n=-1,e=e.substring(1));const o=t.indexOf(":");if(o<0)return parseFloat(t);const l=parseInt(t.substring(0,o)),r=parseFloat(t.substring(o+1));return n*(l*60+r)}function Cs(e){return u.jsx("div",{className:"clickable",onClick:e.onClickFn,style:e.style,children:e.content})}function qP(e){const n={position:"relative",display:"inline-block",verticalAlign:"top",border:"1px solid "+Pt().bgHighContrast,borderRadius:4,height:8,top:e.offsetY,width:e.width},o={background:`${e.backgroundColor}`,height:"100%",borderRadius:"inherit",width:`${e.progress*100}%`};return u.jsx("div",{style:n,children:u.jsx("div",{style:o})})}const yr=26;function NO(e){const t=yr-2,[n,o]=rn.useState(void 0);O.useEffect(()=>{let A=e.defaultSelectedIndex;const R=bt("tabs: "+e.uniqueName);R!==null&&(R==="none"?A=void 0:A=parseInt(R)),o(A)},[e.defaultSelectedIndex,e.uniqueName]);const l=Pt(),r=function(A){const T="1px solid "+(A===n?l.bgHighContrast:l.bgMediumContrast),S="1px solid "+l.background;let I=T;(A===n||n===void 0)&&(I=S);const p=A===n?T:S;let _=S,b=S;return A===n?(_=T,b=T):A>0&&(n===void 0||n+1!==A)&&(_=T),{margin:0,display:"inline-block",boxSizing:"border-box",padding:"0 12px",borderBottom:I,borderTop:p,borderLeft:_,borderRight:b,lineHeight:`${t}px`,color:A===n?l.emphasis:l.text,cursor:e.collapsible||A!==n?"pointer":"default"}},d=[],h=[];for(let A=0;A<e.content.length;A++){const R=e.content[A],T=A===n;d.push(u.jsx("span",{style:r(A),onClick:()=>{let I=n;T?e.collapsible&&(I=void 0):I=A,o(I),It("tabs: "+e.uniqueName,I===void 0?"none":`${I}`)},children:R.titleNode},A));const S={display:T?"block":"none"};e.maxWidth!==void 0&&(S.maxWidth=e.maxWidth),h.push(u.jsx("div",{style:S,children:R.contentNode},A))}e.collapsible&&n!==void 0&&d.push(u.jsx("span",{onClick:()=>{o(void 0),It("tabs: "+e.uniqueName,"none")},children:u.jsx(AP,{style:{marginLeft:16,fontSize:14,cursor:"pointer",position:"relative",top:3}})},d.length));const E=navigator.userAgent.indexOf("Firefox")>=0;return u.jsxs("div",{style:{position:"relative",...e.style},children:[u.jsx("div",{children:d}),u.jsx("div",{className:e.scrollable?"visibleScrollbar":void 0,style:{display:n===void 0?"none":"block",height:e.height-yr,boxSizing:"border-box",padding:`10px ${E?15:5}px`,overflowY:e.scrollable?"scroll":"hidden"},children:h})]})}function XT(e){const t=Pt(),n=[];for(let o=0;o<e.children.length;o++){const l=e.children[o],r=o<e.children.length-1?e.children[o+1]:void 0;if(n.push(u.jsxs(aO,{className:l.showScrollbar?"visibleScrollbar":"invisibleScrollbar",defaultSize:l.defaultSize,minSize:l.minSize??20,style:{border:l.fullBorder===!0?`1px solid ${t.bgMediumContrast}`:void 0,boxSizing:"border-box",height:e.contentHeight,overflowY:"scroll"},children:[l.title?u.jsx("div",{style:{marginBottom:10},children:u.jsx("b",{children:l.title})}):void 0,l.content]},`column-${o}`)),o<e.children.length-1){const h=l.fullBorder===!0||r!==void 0&&r.fullBorder===!0?{margin:"0 5px"}:{borderLeft:"1px solid "+t.bgMediumContrast,margin:"0 15px 0 10px"};n.push(u.jsx(_O,{style:h},`divider-${o}`))}}return u.jsx(IO,{direction:"horizontal",children:n})}function Aa(e){var d;const t=h=>{e.onChange&&e.onChange(h.target.value)},n=Pt(),o=e.width??5,l={color:((d=e.style)==null?void 0:d.color)??e.componentColor??n.text,backgroundColor:"transparent",outline:"none",border:"none",borderBottom:"1px solid "+(e.componentColor??n.text)},r=e.style??{};return u.jsxs("div",{style:{...r,color:e.componentColor},children:[u.jsx("span",{children:e.description}),u.jsx("input",{style:l,size:o,type:"text",value:e.defaultValue,onChange:t,onKeyDown:h=>h.stopPropagation()})]})}function ZP(e){const t=e.description??"default description",[n,o]=O.useState(e.defaultValue??""),l=r=>{o(r.target.value),e.onChange&&e.onChange(r.target.value),It("slider: "+e.uniqueName,r.target.value)};return O.useEffect(()=>{let r=n;const d=bt("slider: "+e.uniqueName);d!==null&&(r=d,o(d)),e.onChange&&e.onChange(r)},[]),u.jsxs("div",{style:{display:"inline-block",...e.style},children:[u.jsx("span",{children:t??""}),u.jsx("input",{size:10,type:"range",value:n,min:.05,max:1,step:.025,onChange:l,style:{position:"relative",outline:"none"}})]})}function QP(e){const t=bt(`radio: ${e.uniqueName}`)??e.options[0][0],[n,o]=O.useState(t),l={position:"relative",top:3,marginRight:"0.25em"},r=e.options.map(([d,h])=>u.jsxs("div",{style:l,children:[u.jsx("input",{type:"radio",id:d,name:e.uniqueName,value:d,checked:n===d,onChange:E=>{o(d),It(`radio: ${e.uniqueName}`,d),e.onChange(d)}}),u.jsxs("label",{htmlFor:d,style:{verticalAlign:"top"},children:[" ",h]})]},d));return u.jsx("div",{children:r})}function Tu(e){const[t,n]=O.useState(!1);O.useEffect(()=>{let l=e.defaultChecked??!0;const r=bt("checked: "+e.uniqueName);r!==null&&(l=parseInt(r)>0),n(l),e.onChange(l)},[]);const o={position:"relative",top:3,marginRight:"0.25em"};return u.jsxs("div",{style:{marginBottom:5},children:[u.jsx("input",{type:"checkbox",onChange:l=>{const r=l.currentTarget.checked;n(r),It("checked: "+e.uniqueName,r?"1":"0"),e.onChange(r)},checked:t,style:o}),u.jsx("span",{children:e.label})]})}function wr(e){const[t,n]=O.useState(e.defaultShow??!1),o=e.autoIndent??!0,l=()=>{const d=!t;n(d),e.onExpand&&d&&e.onExpand(),e.onCollapse&&!d&&e.onCollapse(),It("exp: "+e.title,(d?1:0).toString())};O.useEffect(()=>{const d=bt("exp: "+e.title);d!==null&&n(parseInt(d)===1)},[]);const r=o?{margin:10,paddingLeft:6,marginBottom:20}:{};return u.jsxs("div",{style:e.noMargin?{}:{marginTop:10,marginBottom:10},children:[u.jsx(Cs,{content:u.jsxs("span",{children:[u.jsx("span",{children:t?"- ":"+ "}),e.titleNode??e.title]}),onClickFn:l}),u.jsx("div",{style:{position:"relative",display:t?"block":"none"},children:u.jsx("div",{style:r,children:e.content})})]})}function Ah(e){const t=O.useRef(null);let n=e.defaultLoadUrl??"";const o=E=>{E.target&&(n=E.target.value)},l=()=>{const E=t.current;if(E&&E.files&&E.files.length>0){const A=E.files[0];WP(A,R=>e.onLoadFn(R)),E.value=""}},r=()=>{const E=function(A){console.log("some error occurred")};gO(n,A=>{try{const R=JSON.parse(A);e.onLoadFn(R)}catch{E()}},A=>{E()})},d=Pt(),h={color:d.text,background:"transparent",outline:"none",border:"none",borderBottom:"1px solid "+d.text,width:"30em"};return u.jsxs("div",{children:[u.jsxs("div",{children:[u.jsx("span",{children:e.label??C({en:"Load from file: ",zh:"从文件导入："})}),u.jsx("input",{style:{width:"110px",color:"transparent"},type:"file",ref:t,onChange:l})]}),e.allowLoadFromUrl?u.jsxs("form",{children:[u.jsx("span",{children:C({en:"Load from URL: ",zh:"从URL导入："})}),u.jsx("input",{defaultValue:n,style:h,onChange:o}),u.jsx("span",{children:" "}),u.jsx("button",{type:"submit",onClick:E=>{r(),E.preventDefault()},children:C({en:"load",zh:"加载"})})]}):void 0]})}function bi(e){const t=Pt();return u.jsx("span",{style:{fontSize:11,border:"1px solid "+t.bgHighContrast,borderRadius:2,padding:"1px 4px",background:t.bgLowContrast},children:e.text})}const $P=100;function We(e){const n={display:"inline-block",position:"relative",width:12,height:12,lineHeight:1,cursor:"help",background:Pt().bgHighContrast,borderRadius:6,textAlign:"center",verticalAlign:"middle"},o=O.useRef(0),[l,r]=O.useState(!1);return u.jsxs(w0,{delay:0,open:l,children:[u.jsx("span",{id:`help-${e.topic}`,className:"help-icon global-help-tooltip",style:n,"data-tooltip-offset":4,onMouseEnter:()=>{const d=Date.now();d-o.current>$P&&r(!0),o.current=d},onMouseLeave:()=>r(!1),children:u.jsx("span",{style:{position:"relative",top:-1,color:"white"},children:"?"})}),u.jsx(j0,{container:document.getElementById("globalHelpTooltipAnchor"),children:u.jsx(K0,{className:"tooltip-positioner",anchor:document.getElementById(`help-${e.topic}`),children:u.jsx(V0,{className:"help-tooltip tooltip",children:e.content})})})]})}const mh="3f";let Hu=()=>{},on=()=>({isValid:!1,invalidActions:[],skillUseTimes:[],straightenedIfValid:void 0}),Su=e=>{e()};const pO=O.createContext(e=>({drop:t=>{},setSelected:t=>{}})),Gr=e=>({borderColor:e.bgMediumContrast,borderWidth:"1px",borderStyle:"solid"}),HE={width:"1.5%",textAlign:"right",paddingRight:"0.3em",paddingLeft:"0.3em"},CO={width:"12%",textAlign:"right",paddingRight:"0.3em",paddingLeft:"0.3em"},OO={width:"86.5%",textAlign:"left",paddingLeft:"0.3em"},bO={width:"100%",height:"1.6em",userSelect:"none",outline:"none"},DO=e=>({borderTopWidth:"4px",borderTopStyle:"solid",borderColor:e.dropTarget});function PR(e){return(e??0)+1}function JP(e){const t=Pt();let n=e.index%2===1?t.timelineEditor.bgAlternateRow:"transparent";e.isSelected&&(n="rgba(151,111,246,0.25)"),e.recordIsDirty&&e.isSelected&&(n=t.editingValid+mh);let o=C({en:"(other)",zh:"（其它）"});if(e.node.info.type===Ve.Skill){const T=e.node.info.targetCount>1?C({en:` (${e.node.info.targetCount} targets)`,zh:`（${e.node.info.targetCount}个目标）`}):"";o=e.node.info.skillName?xi(e.node.info.skillName)+T:C({en:"(unknown skill)",zh:"未知技能"})}else if(e.node.info.type===Ve.Wait)o=C({en:"(wait for "+e.node.info.waitDuration.toFixed(3)+"s)",zh:"（等"+e.node.info.waitDuration.toFixed(3)+"秒）"});else if(e.node.info.type===Ve.JumpToTimestamp)o=C({en:"(jump to time "+it.displayTime(e.node.info.targetTime,3)+")",zh:"（跳到时间 "+it.displayTime(e.node.info.targetTime,3)+"）"});else if(e.node.info.type===Ve.WaitForMP)o=C({en:"(wait until MP/lucid tick)",zh:"（快进至跳蓝/跳醒梦）"});else if(e.node.info.type===Ve.SetResourceEnabled){const T=je(e.node.info.buffName);o=C({en:"(toggle resource: "+T+")",zh:"（开关或去除BUFF："+T+"）"})}else e.node.info.type===Ve.Unknown&&(o=e.node.info.skillName);const l=u.jsxs("td",{style:{...OO,...Gr(t)},children:[e.isInvalid?u.jsx("span",{style:{marginRight:6,padding:"0 4px",backgroundColor:t.editingInvalid+mh},children:"→"}):void 0,u.jsx("span",{children:o})]}),r=e.includeDetails?u.jsx("td",{style:{...HE,...Gr(t)},children:PR(e.index)}):void 0,d=e.includeDetails?u.jsx("td",{style:{...CO,...Gr(t)},children:it.displayTime(e.usedAt,3)}):void 0,h=O.useContext(mf),E=h.dragTargetIndex===e.index,A=O.useContext(id),R=O.useContext(pO)(e.index);return u.jsxs("tr",{style:{...bO,background:n,...E?DO(t):{}},ref:e.refObj??null,draggable:!A.value,onDragStart:T=>{R.setSelected(!0),e.isSelected||N.timeline.onClickTimelineAction(e.index,!1)},onDragLeave:T=>{h.setDragTarget(null,null)},onDrop:T=>{R.drop(T),h.setDragTarget(null,null)},onDragOver:T=>{T.preventDefault();let S=e.usedAt;const I=e.index>0?N.record.actions[e.index-1]:void 0;(I==null?void 0:I.tmp_endLockTime)!==void 0&&e.node.info.type===Ve.Skill&&Sl(N.game.job,e.node.info.skillName).cdName==="cd_GCD"&&(S=I.tmp_endLockTime-N.gameConfig.countdown),h.setDragTarget(e.index,S)},onClick:T=>{R.setSelected(!0),e.recordIsDirty?N.timeline.onClickTimelineAction(e.index,T.shiftKey):(N.timeline.onClickTimelineAction(e.index,T.shiftKey),e.node.tmp_startLockTime!==void 0&&N.scrollToTime(e.node.tmp_startLockTime))},tabIndex:-1,onKeyDown:e.onKeyDown,children:[r,d,l]})}let qT=()=>{},yO=()=>{};function ew(){const e=Pt(),t=O.useRef(null),n=O.useRef(null),[o,l]=O.useState(!1),[r,d]=O.useState(void 0),[h,E]=O.useState(void 0),[,A]=O.useReducer(D=>D+1,0),R=O.useRef(!1),T=O.useRef(void 0);O.useEffect(()=>(Hu=()=>{A()},on=()=>{const D=N.checkRecordValidity(N.record,0,!0);return d(D),D},Su=D=>{o&&T.current&&(N.record=T.current,N.checkRecordValidity(N.record,0,!0)),D(),l(!1),T.current=N.record,d(N.checkRecordValidity(N.record,0,!0))},qT=()=>{setTimeout(()=>{var D;(D=t.current)==null||D.scrollIntoView({behavior:"smooth",block:"nearest"})},0)},yO=()=>{setTimeout(()=>{var D;(D=(N.record.getSelectionLength()===1?t:n).current)==null||D.scrollIntoView({behavior:"smooth",block:"nearest"})},0)},d(N.checkRecordValidity(N.record,0,!0)),()=>{Hu=()=>{}}),[]);const S=r&&r.isValid,I=D=>{D&&T.current&&(N.record=T.current),l(!1),d(N.checkRecordValidity(N.record,0,!0)),E(void 0)},p=5,_=()=>u.jsx("button",{style:{display:"block",marginTop:10,marginLeft:p},onClick:D=>{R.current=!0,o||console.error("attempted to discard edits while timeline editor was not dirty"),I(!0)},children:C({en:"discard changes",zh:"放弃更改"})}),b=()=>(o||(T.current=N.record,N.record=N.record.getCloneWithSharedConfig(),l(!0)),N.record),v=(D,j)=>{const F=D==null?void 0:D.node,G=D==null?void 0:D.index,J=D==null?void 0:D.reason,Ee=ko()==="en",re=(_e,ge)=>Ee?_e:ge;let Ae=re("(unknown node)","（未知节点）");if(F)if(F.info.type===Ve.Wait)Ae=re("(Wait)","（等待）");else if(F.info.type===Ve.JumpToTimestamp)Ae=re("(Jump to time)","（跳到时间）");else if(F.info.type===Ve.WaitForMP)Ae=re("(Wait for MP/lucid tick)","（快进到挑篮/跳星梦）");else if(F.info.type===Ve.SetResourceEnabled){const _e=je(F.info.buffName);Ae=re("(Toggle resource "+_e+")","（开关或去除BUFF： "+_e+"）")}else F.info.type===Ve.Skill?Ae=F.info.skillName?xi(F.info.skillName):re("(unknown skill)","（未知技能）"):F.info.type===Ve.Unknown&&(Ae=F.info.skillName);let Re;const Ce=G!==void 0?r==null?void 0:r.skillUseTimes[G]:void 0,xe=(J==null?void 0:J.unavailableReasons.map(Ur).join(re("; ","、")))??Ur(void 0);if(j?Re=re(`This sequence contains invalid actions! Check action #${PR(G)}: ${Ae}`,`此时间轴包含有问题的技能！请检查在第${PR(G)}位的技能： ${Ae}`):Re=re(`This action is invalid! ${Ae}`,`此技能有问题！ ${Ae}`),Ce!==void 0){const _e=it.displayTime(Ce,3);Re+=` @ ${_e}`+re(".","。")}return{en:u.jsxs(u.Fragment,{children:[Re,u.jsx("br",{}),u.jsx("br",{}),"Reason: ",xe]}),zh:u.jsxs(u.Fragment,{children:[Re,u.jsx("br",{}),u.jsx("br",{}),"理由：",xe]})}},L={padding:"0.3em"},k=()=>{if(o)return u.jsxs("div",{children:[u.jsx("div",{style:{...L,backgroundColor:(S?e.editingValid:e.editingInvalid)+mh},children:C(S?{en:"This edited sequence is valid.",zh:"此编辑可被应用。"}:v(r==null?void 0:r.invalidActions[0],!0))}),u.jsx("button",{style:{display:"block",marginTop:10,marginLeft:p},onClick:D=>{R.current=!0,o?N.applyEditedRecord():console.error("attempted to apply edits while timeline editor was not dirty"),I(!1),N.displayCurrentState()},children:C({en:"apply changes to timeline and save",zh:"应用并保存编辑。"})}),_()]});if(S)return u.jsx("div",{style:L,children:C({en:"Timeline is up to date.",zh:"时间轴已与编辑器同步。"})});{const D=new Map;r==null||r.invalidActions.forEach(Ee=>D.set(Ee.index,Ee));const j=r==null?void 0:r.invalidActions[0];let F=j,G=!0;const J=N.record;if(j!==void 0&&J.selectionStartIndex!==void 0){const Ee=r==null?void 0:r.invalidActions.find(Ae=>J.isInSelection(Ae.index)),re=J.getSelectionLength();re===1&&Ee!==void 0?(F=D.get(J.selectionStartIndex),G=!1):re>1&&Ee!==void 0&&(F=Ee)}return u.jsx("div",{children:u.jsx("div",{style:{...L,backgroundColor:e.editingInvalid+mh},children:C(v(F,G))})})}},M={display:"block",width:"100%",padding:3},B=D=>{if(N.record.getFirstSelection()){R.current=!0;const j=b();let F=h;const G=D(j);G!==void 0&&(F===void 0?F=G:F=Math.min(G,F));const J=N.checkRecordValidity(j,F);G!==void 0&&J.straightenedIfValid?(N.record=J.straightenedIfValid,E(void 0)):E(F),d(J),wo()}},w=N.undoStack.peekUndoMessage(),x=N.undoStack.peekRedoMessage(),Q=u.jsxs("div",{style:{marginBottom:6,flex:1,display:"flex",flexDirection:"column",gap:10},children:[u.jsx("button",{style:M,onClick:D=>B(j=>(N.undoStack.push(new UE(j.selectionStartIndex,j.getSelectionLength(),-1)),j.moveSelected(-1))),children:C({en:"move up",zh:"上移"})}),u.jsx("button",{style:M,onClick:D=>B(j=>(N.undoStack.push(new UE(j.selectionStartIndex,j.getSelectionLength(),1)),j.moveSelected(1))),children:C({en:"move down",zh:"下移"})}),u.jsx("button",{style:M,onClick:D=>B(j=>(N.undoStack.push(new vr(j.selectionStartIndex,j.getSelected().actions,"delete")),j.deleteSelected())),children:C({en:"delete selected",zh:"删除所选"})}),u.jsx("button",{style:M,onClick:D=>{const j=N.record.getSelectionLength();j>1&&B(F=>{const G=F.selectionStartIndex,J=F.selectionEndIndex;return N.undoStack.push(new UE(J,1,-(j-1))),F.selectSingle(J),F.moveSelected(-(j-1)),F.selectSingle(G),F.selectUntil(J),F.selectionStartIndex})},children:C({en:u.jsxs(u.Fragment,{children:["move end of selection",u.jsx("br",{}),"to start of selection"]}),zh:u.jsxs(u.Fragment,{children:["将选中的最后一个技能节点",u.jsx("br",{}),"移到选区最前"]})})}),u.jsx("hr",{style:{backgroundColor:e.bgLowContrast,height:2,marginTop:-2,marginBottom:-2,border:0,width:"100%"}}),u.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:6},children:[u.jsx("button",{style:M,onClick:wR,disabled:N.record.getSelectionLength()===0,children:C({en:"copy ",zh:"复制"})}),u.jsx("button",{style:M,onClick:kO,children:C({en:"paste ",zh:"粘贴"})})]}),u.jsxs("button",{style:M,onClick:()=>N.undoStack.undo(),disabled:w===void 0,children:[C({en:"undo ",zh:"撤消"}),C(w??{en:""})]}),u.jsxs("button",{style:M,onClick:()=>N.undoStack.redo(),disabled:x===void 0,children:[C({en:"redo ",zh:"重做"}),C(x??{en:""})]})]}),oe=D=>{const j=N.record.selectionStartIndex;j!==void 0&&(D.key==="Backspace"||D.key==="Delete"?B(G=>(N.undoStack.push(new vr(j,G.getSelected().actions,"delete")),G.deleteSelected())):(N.handleTimelineKeyboardEvent(D),D.key==="Escape"&&ee.setDragTarget(null,null)))},he=!0,ue=[],de=new Set(r==null?void 0:r.invalidActions.map(D=>D.index));N.record.actions.forEach((D,j)=>{const F=!o&&j===N.record.selectionStartIndex,G=!o&&j===N.record.selectionEndIndex;ue.push(u.jsx(JP,{index:j,node:D,isSelected:N.record.isInSelection(j),recordIsDirty:o,isInvalid:de.has(j),usedAt:(r==null?void 0:r.skillUseTimes[j])??0,includeDetails:he,onKeyDown:oe,refObj:F?t:G?n:void 0},j))});const fe=D=>({drop:j=>{const F=N.record.selectionStartIndex??0;let G=D-(F??0);G>0&&(G-=N.record.getSelectionLength()),G!==0&&B(J=>J.moveSelected(G))},setSelected:j=>{R.current=j}}),$=O.useContext(id),ee=O.useContext(mf),Y=ue.length,P=fe(Y),K=ee.dragTargetIndex===Y;Y>0&&ue.push(u.jsxs("tr",{tabIndex:-1,style:{height:"0.8em",background:e.timelineEditor.headerFooter,userSelect:"none",...K?DO(e):{}},draggable:!$.value,onDragStart:D=>D.preventDefault(),onDragLeave:D=>{ee.setDragTarget(null,null)},onDrop:D=>{P.drop(D),ee.setDragTarget(null,null)},onDragOver:D=>{D.preventDefault(),ee.setDragTarget(Y,N.game.getDisplayTime())},children:[u.jsx("td",{style:{border:"none"}}),u.jsx("td",{style:{border:"none"}}),u.jsx("td",{style:{border:"none"}})]},Y));const W={backgroundColor:e.timelineEditor.headerFooter};return u.jsx("div",{onClick:D=>{!D.shiftKey&&!R.current&&(N.record.unselectAll(),N.displayCurrentState()),R.current=!1},children:u.jsx(XT,{contentHeight:CS,children:[{content:Q,defaultSize:20},{content:u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:HE.paddingLeft},children:[u.jsxs("table",{style:{position:"relative",width:"100%",borderCollapse:"collapse",borderColor:e.bgMediumContrast,borderWidth:"1px",borderStyle:"solid"},children:[u.jsx("thead",{children:u.jsxs("tr",{style:bO,children:[u.jsx("th",{className:"stickyTh",style:{...W,...HE,...Gr(e)},children:"#"}),u.jsx("th",{className:"stickyTh",style:{...W,...CO,...Gr(e)},children:C({en:"Time",zh:"时间"})}),u.jsx("th",{className:"stickyTh",style:{...W,...OO,...Gr(e)},children:C({en:"Actions",zh:"技能"})})]})}),u.jsx("tbody",{children:u.jsx(pO.Provider,{value:fe,children:ue})})]}),Y===0&&u.jsx("span",{style:{paddingLeft:HE.paddingLeft,fontStyle:"italic"},children:C({en:"No actions to display yet.",zh:"暂无技能可显示。"})})]}),defaultSize:40,fullBorder:!0,showScrollbar:!0},{content:k(),defaultSize:40,fullBorder:!0}]})})}const tw=30;class aw{constructor(){Z(this,"actions");Z(this,"cursor");this.cursor=0,this.actions=[]}clear(){this.cursor=0,this.actions=[]}get length(){return this.actions.length}push(t){this.actions.splice(this.cursor,this.actions.length-this.cursor,t),this.actions.length>tw&&this.actions.shift(),this.cursor=this.actions.length}doThenPush(t){t.redo(),this.push(t)}emitLog(...t){}undo(){this.cursor>0?(this.actions[--this.cursor].undo(),this.emitLog("UNDO",this.actions[this.cursor])):this.emitLog("nothing to undo")}redo(){this.cursor<this.actions.length?(this.emitLog("REDO",this.actions[this.cursor]),this.actions[this.cursor++].redo()):this.emitLog("nothing to redo")}peekUndoMessage(){return this.cursor>0?this.actions[this.cursor-1].message:void 0}peekRedoMessage(){return this.cursor<this.actions.length?this.actions[this.cursor].message:void 0}}class no{constructor(t){Z(this,"message");this.message=t}}function ZT(e){return e>0?"actions":"action"}class is extends no{constructor(n,o){super({en:"add action",zh:"添加技能"});Z(this,"node");Z(this,"index");this.node=n,this.index=o}undo(){N.record.selectSingle(this.index),N.deleteSelectedSkills()}redo(){N.insertRecordNode(this.node,this.index)}}class UE extends no{constructor(n,o,l){super({en:`move ${o} ${ZT(o)}`,zh:"移动${selectCount}技能"});Z(this,"startIndex");Z(this,"selectCount");Z(this,"offset");this.startIndex=n,this.selectCount=o,this.offset=l}undo(){N.record.selectSingle(this.startIndex+this.offset),N.record.selectUntil(this.startIndex+this.selectCount+this.offset-1),N.record.moveSelected(-this.offset),N.autoSave(),on()}redo(){N.record.selectSingle(this.startIndex),N.record.selectUntil(this.startIndex+this.selectCount-1),N.record.moveSelected(this.offset),N.autoSave(),on()}}class vr extends no{constructor(n,o,l){super({en:`${l} ${o.length} ${ZT(o.length)}`,zh:`${l==="delete"?"删除":"剪切"}${o.length}技能`});Z(this,"startIndex");Z(this,"nodes");Z(this,"source");this.startIndex=n,this.nodes=o,this.source=l}undo(){N.insertRecordNodes(this.nodes,this.startIndex)}redo(){N.record.selectSingle(this.startIndex),N.record.selectUntil(this.startIndex+this.nodes.length-1),N.deleteSelectedSkills(),on()}}class QT extends no{constructor(n,o,l){super({en:l==="preset"?"add preset sequence":`paste ${n.length} ${ZT(n.length)}`,zh:l==="preset"?"增加技能序列预设":`粘贴${n.length}技能`});Z(this,"nodes");Z(this,"index");Z(this,"source");this.nodes=n,this.index=o,this.source=l}undo(){N.record.selectSingle(this.index),N.record.selectUntil(this.index+this.nodes.length-1),N.deleteSelectedSkills()}redo(){N.insertRecordNodes(this.nodes,this.index)}}class nw extends no{constructor(n,o){super({en:"change active slot",zh:"交换当前时间轴"});Z(this,"oldIndex");Z(this,"newIndex");this.oldIndex=n,this.newIndex=o}undo(){N.setActiveSlot(this.oldIndex),N.displayCurrentState()}redo(){N.setActiveSlot(this.newIndex),N.displayCurrentState()}}class iw extends no{constructor(n,o){super({en:"delete slot",zh:"删除时间轴"});Z(this,"deleteIndex");Z(this,"deletedRecord");this.deleteIndex=n,this.deletedRecord=o}undo(){N.timeline.addSlotAtIndex(this.deleteIndex),N.loadBattleRecordFromFile(this.deletedRecord),N.autoSave(),N.displayCurrentState()}redo(){N.timeline.removeSlot(this.deleteIndex),N.displayCurrentState()}}class ow extends no{constructor(n){super({en:"add slot",zh:"添加时间轴"});Z(this,"oldIndex");this.oldIndex=n}undo(){N.timeline.removeSlot(N.timeline.slots.length-1),N.setActiveSlot(this.oldIndex),N.displayCurrentState()}redo(){N.setActiveSlot(this.oldIndex),N.timeline.addSlot(),N.displayCurrentState()}}class lw extends no{constructor(n){super({en:"clone slot",zh:"复制时间轴"});Z(this,"sourceIndex");this.sourceIndex=n}undo(){N.timeline.removeSlot(N.timeline.slots.length-1),N.setActiveSlot(this.sourceIndex),N.displayCurrentState()}redo(){N.setActiveSlot(this.sourceIndex),N.cloneActiveSlot(),N.displayCurrentState()}}class sw extends no{constructor(n,o,l){super({en:"change config",zh:"调整属性设置"});Z(this,"oldConfig");Z(this,"newConfig");Z(this,"oldRecord");this.oldConfig=n,this.newConfig=o,l===void 0&&(n.job!==o.job||n.level!==o.level)&&console.error("config apply w/o reset but job or level changed"),this.oldRecord=l}undo(){this.oldRecord!==void 0?(N.loadBattleRecordFromFile(this.oldRecord),N.autoSave()):N.setConfigAndRestart(this.oldConfig,!1),N.updateAllDisplay(),N.scrollToTime()}redo(){N.setConfigAndRestart(this.newConfig,this.oldRecord!==void 0),N.updateAllDisplay(),N.scrollToTime()}}class rw extends no{constructor(n,o){super({en:"import from file",zh:"从文件导入战斗"});Z(this,"oldRecord");Z(this,"importedRecord");this.oldRecord=n,this.importedRecord=o}undo(){N.loadBattleRecordFromFile(this.oldRecord),N.autoSave(),N.displayCurrentState()}redo(){N.loadBattleRecordFromFile(this.importedRecord),N.autoSave(),N.displayCurrentState()}}let vO,MO=[];const LO="、",HO=", ",iR=":";function cw(e){const t=N.record.getSelected().actions,n=N.record.selectionStartIndex;if(n===void 0)return"";let o="";if(e==="plain"){const l=[];t.forEach(d=>l.push(d.toLocalizedString()));const r=ko()==="zh"?LO:HO;o=l.join(r)}else if(e==="tsv"){const l=[],r=N.checkRecordValidity(N.record,0);t.forEach((d,h)=>l.push([r.skillUseTimes[h+n].toFixed(3),d.targetCount,d.toLocalizedString()].join("	"))),o=l.join(`
`)}else if(e==="discord"){const l=[];t.forEach(r=>{if(r.info.type===Ve.Skill){const d=r.info.skillName;d==="TINCTURE"?l.push(":IntPot:"):d==="SWIFTCAST"?l.push(N.gameConfig.job==="BLM"?":Swift:":":Swiftcast:"):l.push(`:${Pa[d].discordEmote??Pa[d].name.replaceAll(" ","")}:`)}else l.push(r.toLocalizedString())}),o=l.join(" ")}else console.error("invalid clipboard mode",e);return vO=o,MO=t,o}function uw(e){return e==="."||e>="0"&&e<="9"}function UO(e,t){const n=e.toLowerCase(),o=t==null?void 0:t.toLowerCase();if(n==="wait mp"||e==="快进至跳蓝"||n==="wait"&&o===" mp"||e==="快进至"&&(t==null?void 0:t.substring(3,5))==="跳蓝")return n0();const l=e.split(" ");if(!(t!==void 0&&uw(t[0]))){if(l.length===2&&l[0]==="wait"){const r=Mo(l[1]);return isNaN(r)?void 0:Cu(r)}if(e.startsWith("快进至")){const r=Mo(e.substring(3));return isNaN(r)?void 0:Cu(r)}if(l.length===2&&l[0]==="jump"){const r=Mo(l[1]);return isNaN(r)?void 0:br(r)}if(e.startsWith("跳到")){const r=Mo(e.substring(2));return isNaN(r)?void 0:br(r)}if(l.length>=2&&l[0]==="toggle"){const r=wN(l.slice(1).join(" "));return r!==void 0?_R(r):void 0}if(e.startsWith("开关")){const r=wN(e.substring(2));return r!==void 0?_R(r):void 0}}}function Lp(e,t=1){const n=UO(e,void 0);if(n!==void 0)return n;const o=vT(e)??JC.get(e)??e0.get(e);return o!==void 0?kr(o,t):void 0}function dw(e){if(e===vO)return MO;const t=e.split(`
`),n=[];for(const o of t){const l=o.trimStart();if(o.includes("	")){const r=o.split("	");if(r.length>0){const d=r[r.length-1].trim();let h=1;if(r.length>1){const A=parseInt(r[r.length-2]);isNaN(A)||(h=A)}const E=Lp(d,h);E!==void 0&&n.push(E)}}else if(l.length>2&&l[0]===iR){let r=!0,d="";for(let h=1;h<l.length;h++){const E=l[h];if(r&&(E===iR||E===" ")){const R=d.indexOf("~");if(R>0&&(d=d.substring(0,R)),d.toLowerCase().endsWith("_ogcd")&&(d=d.substring(0,d.length-5)),d.length!==0)if(d==="IntPot")n.push(kr("TINCTURE",1));else if(d==="Swift"||d==="Swiftcast")n.push(kr("SWIFTCAST",1));else{const T=yT.get(N.gameConfig.job).get(d);T!==void 0?n.push(kr(T)):console.error("unrecognized discord emote",d)}d="",r=!1;continue}if(E===iR&&d.length===0){r=!0,d="";continue}(d.length>0||E!==" ")&&(d+=E);const A=l.substring(h+1,h+4);if(!r){const R=UO(d,A);R!==void 0&&(n.push(R),d="")}}}else{let r=l.split(HO);r.length<2&&(r=l.split(LO)),r.forEach(d=>{if(d.length>0){const h=Lp(d.trim());h!==void 0&&n.push(h)}})}}return n}function wR(){navigator.clipboard.writeText(cw(N.clipboardMode))}function kO(){N.queuedPastes++,navigator.clipboard.readText().then(e=>{const t=dw(e);if(t===void 0||t.length===0){console.error("failed to paste parsed clipboard contents:"),console.error(e);return}N.undoStack.doThenPush(new QT(t,N.record.selectionStartIndex??N.record.length,"paste"))}).finally(()=>{N.queuedPastes--,console.assert(N.queuedPastes>=0)})}const xO=152,CE=5882,qa=5925,oR={main:qa,spellSpeed:420,skillSpeed:420,criticalHit:3387,directHit:1935,determination:2407,piety:440,tenacity:420},Rh={DRK:{main:CE,spellSpeed:420,skillSpeed:420,criticalHit:3404,directHit:1068,determination:2883,piety:440,tenacity:794},GNB:{main:CE,spellSpeed:420,skillSpeed:420,criticalHit:3404,directHit:1068,determination:2883,piety:440,tenacity:794},PLD:{main:CE,spellSpeed:420,skillSpeed:420,criticalHit:3242,directHit:1230,determination:2883,piety:440,tenacity:794},WAR:{main:CE,spellSpeed:420,skillSpeed:420,criticalHit:3404,directHit:1068,determination:2883,piety:440,tenacity:794},AST:{main:qa,spellSpeed:704,skillSpeed:420,criticalHit:3427,directHit:1230,determination:2510,piety:718,tenacity:420},SCH:{main:qa,spellSpeed:1221,skillSpeed:420,criticalHit:3484,directHit:852,determination:2314,piety:718,tenacity:420},SGE:{main:qa,spellSpeed:704,skillSpeed:420,criticalHit:3427,directHit:1230,determination:2510,piety:718,tenacity:420},WHM:{main:qa,spellSpeed:704,skillSpeed:420,criticalHit:3427,directHit:1230,determination:2510,piety:718,tenacity:420},DRG:{main:qa,spellSpeed:420,skillSpeed:420,criticalHit:3425,directHit:1996,determination:2308,piety:440,tenacity:420},MNK:{main:qa,spellSpeed:420,skillSpeed:968,criticalHit:3487,directHit:1685,determination:2009,piety:440,tenacity:420},NIN:{main:qa,spellSpeed:420,skillSpeed:420,criticalHit:3378,directHit:1981,determination:2370,piety:440,tenacity:420},RPR:{main:qa,spellSpeed:420,skillSpeed:474,criticalHit:3425,directHit:1942,determination:2308,piety:440,tenacity:420},SAM:{main:qa,spellSpeed:420,skillSpeed:690,criticalHit:3425,directHit:2045,determination:1989,piety:440,tenacity:420},VPR:{main:qa,spellSpeed:420,skillSpeed:420,criticalHit:3378,directHit:1981,determination:2370,piety:440,tenacity:420},DNC:oR,BRD:oR,MCH:oR,BLM:{main:qa,spellSpeed:978,skillSpeed:420,criticalHit:3456,directHit:1764,determination:1951,piety:440,tenacity:420},RDM:{main:qa,spellSpeed:528,skillSpeed:420,criticalHit:3399,directHit:1872,determination:2350,piety:440,tenacity:420},SMN:{main:qa,spellSpeed:528,skillSpeed:420,criticalHit:3399,directHit:1872,determination:2350,piety:440,tenacity:420},PCT:{main:qa,spellSpeed:420,skillSpeed:420,criticalHit:3399,directHit:1764,determination:2566,piety:440,tenacity:420},BLU:{main:1701,spellSpeed:1573,skillSpeed:380,criticalHit:1343,directHit:785,determination:676,piety:340,tenacity:380},NEVER:{main:qa,spellSpeed:420,skillSpeed:420,criticalHit:420,directHit:420,determination:440,piety:440,tenacity:420}};function GR(e,t=Rt.lvl100){return{job:e,shellVersion:oT.version,level:t??(e==="BLU"?Rt.lvl80:Rt.lvl100),...Rh[e],wd:xO,countdown:5,randomSeed:"sup",fps:60,gcdSkillCorrection:0,animationLock:.7,timeTillFirstManaTick:1.2,procMode:xn.Never,initialResourceOverrides:[]}}function Ew(e){const t=bt(`defaultPartialConfig: ${e}`);if(t===null)return Rh[e];const n=JSON.parse(t);return Object.entries(Rh[e]).forEach(([o,l])=>{n[o]===void 0&&(n[o]=l)}),n}const kE=GR("BLM");class vi{constructor(t){Z(this,"job");Z(this,"shellVersion",oT.version);Z(this,"level");Z(this,"wd");Z(this,"main");Z(this,"spellSpeed");Z(this,"skillSpeed");Z(this,"criticalHit");Z(this,"directHit");Z(this,"determination");Z(this,"piety");Z(this,"tenacity");Z(this,"countdown");Z(this,"randomSeed");Z(this,"fps");Z(this,"gcdSkillCorrection");Z(this,"animationLock");Z(this,"timeTillFirstManaTick");Z(this,"procMode");Z(this,"initialResourceOverrides");Z(this,"legacy_casterTax");this.job=t.job,this.shellVersion=t.shellVersion;const n=kE;this.level=t.level??n.level,this.spellSpeed=t.spellSpeed,this.skillSpeed=t.skillSpeed??n.skillSpeed,this.criticalHit=t.criticalHit??n.criticalHit,this.directHit=t.directHit??n.directHit,this.determination=t.determination??n.determination,this.piety=t.piety??n.piety,this.countdown=t.countdown,this.randomSeed=t.randomSeed,this.fps=t.fps,this.gcdSkillCorrection=t.gcdSkillCorrection,this.animationLock=t.animationLock,this.timeTillFirstManaTick=t.timeTillFirstManaTick,this.procMode=t.procMode,this.initialResourceOverrides=t.initialResourceOverrides.map(o=>{if(o.effectOrTimerEnabled===void 0&&(o.enabled===void 0?o.effectOrTimerEnabled=!0:o.effectOrTimerEnabled=o.enabled),!(o.type in Ge||o.type in Rs))if(o.type.toString()==="AstralFire")o.type="ASTRAL_FIRE";else if(o.type.toString()==="UmbralIce")o.type="UMBRAL_ICE";else if(o.type.toString()==="UmbralHeart")o.type="UMBRAL_HEART";else{let l=Object.keys(Ge).find(r=>Ge[r].name===o.type);l||(l=Object.keys(Rs).find(r=>Rs[r].name===o.type)),l&&(o.type=l)}return new DT(o)}),this.legacy_casterTax=(t==null?void 0:t.casterTax)??0,this.tenacity=(t==null?void 0:t.tenacity)??420,this.main=(t==null?void 0:t.main)??qa,this.wd=(t==null?void 0:t.wd)??xO}adjustedOvertimePotency(t,n){return Ot.overtimePotency(this.level,n==="sks"?this.skillSpeed:n==="sps"?this.spellSpeed:Ot.getSubstatBase(this.level),t)}adjustedGCD(t=2.5,n){return this.shellVersion>=vo.AllaganGcdFormula?Ot.preTaxGcd(this.level,this.spellSpeed,t,n):Ot.preTaxGcdLegacy(this.level,this.spellSpeed,t,n)}adjustedSksGCD(t=2.5,n){return this.shellVersion>=vo.AllaganGcdFormula?Ot.preTaxGcd(this.level,this.skillSpeed,t,n):Ot.preTaxGcdLegacy(this.level,this.skillSpeed,t,n)}adjustedCastTime(t,n){return Ot.preTaxCastTime(this.level,this.spellSpeed,t,n)}adjustedSksCastTime(t,n){return Ot.preTaxCastTime(this.level,this.skillSpeed,t,n)}getAfterTaxGCD(t){return this.shellVersion<vo.FpsTax?t:Ot.afterFpsTax(this.fps,t)+this.gcdSkillCorrection}getAfterTaxCastTime(t){return this.shellVersion<vo.FpsTax?this.legacy_casterTax+t:Ot.afterFpsTax(this.fps,t)+Ot.afterFpsTax(this.fps,qH)+this.gcdSkillCorrection}static getSlidecastWindow(t){return .5}get critRate(){return Ot.criticalHitRate(this.level,this.criticalHit)}getOverrideStacks(t){var n;return(n=this.initialResourceOverrides.find(o=>o.type===t))==null?void 0:n.stacks}savePartialConfig(){const t={};Object.keys(Rh[this.job]).forEach(n=>{t[n]=this[n]}),It(`defaultPartialConfig: ${this.job}`,JSON.stringify(t))}serialized(){return{job:this.job,shellVersion:this.shellVersion,level:this.level,wd:this.wd,main:this.main,spellSpeed:this.spellSpeed,skillSpeed:this.skillSpeed,criticalHit:this.criticalHit,directHit:this.directHit,determination:this.determination,piety:this.piety,tenacity:this.tenacity,countdown:this.countdown,randomSeed:this.randomSeed,casterTax:this.legacy_casterTax,fps:this.fps,gcdSkillCorrection:this.gcdSkillCorrection,animationLock:this.animationLock,timeTillFirstManaTick:this.timeTillFirstManaTick,procMode:this.procMode,initialResourceOverrides:this.initialResourceOverrides.map(t=>t.serialized())}}}function hw(e){var n,o;const t=Pt();return u.jsx("div",{style:{top:1+(((n=e.offset)==null?void 0:n.y)??0),left:((o=e.offset)==null?void 0:o.x)??0,marginRight:8,position:"relative",width:16,height:16,borderRadius:8,display:"inline-block",border:"1px solid "+t.bgHighContrast,verticalAlign:"top"},children:e.color&&u.jsx("div",{style:{backgroundColor:`${e.color}`,position:"absolute",top:2,bottom:2,left:2,right:2,borderRadius:"inherit"}})})}function fw(e){var r,d;const t=Pt(),n=e.heightPx??30,o=e.widthPx??24;let l;return e.imgUrl?l=u.jsx("img",{src:e.imgUrl,alt:"resource img",style:{display:"block",margin:"2px auto",maxWidth:n-4,maxHeight:o-4}}):e.color&&(l=u.jsx("div",{style:{backgroundColor:e.color,position:"absolute",top:3,bottom:3,left:3,right:3}})),u.jsx("div",{style:{display:"inline-block",position:"relative",top:((r=e.offset)==null?void 0:r.y)??0,left:((d=e.offset)==null?void 0:d.x)??0,width:n,height:o,border:"1px solid "+t.bgHighContrast,marginRight:4},children:l})}function xE(e={name:"placeholder",color:"#6cf",value:"0.34/1.00",progress:.34,width:100,hidden:!1}){return u.jsxs("div",{hidden:e.hidden,style:{marginBottom:4,lineHeight:"1.5em"},children:[u.jsx("div",{style:{display:"inline-block",height:"100%",width:108},children:e.name}),u.jsxs("div",{style:{width:200,display:"inline-block"},children:[u.jsx(qP,{backgroundColor:e.color,progress:e.progress,width:e.width,offsetY:4}),u.jsx("div",{style:{marginLeft:6,height:"100%",display:"inline-block"},children:e.value})]})]})}function Wi(e){const t=e.containerType==="box"||e.items.some(o=>o.imgUrl!==void 0),n=e.items.map((o,l)=>e.containerType==="circle"&&o.imgUrl===void 0?u.jsx(hw,{color:o.color,offset:t?{x:0,y:3}:void 0},l):u.jsx(fw,{color:o.color,imgUrl:o.imgUrl,offset:t?{x:-2,y:0}:void 0,heightPx:o.boxHeightPx,widthPx:o.boxWidthPx},l));return t?u.jsxs("div",{style:{marginBottom:4},children:[u.jsx("div",{style:{display:"inline-block",position:"relative",verticalAlign:"top",top:6,width:108},children:e.name}),u.jsx("div",{style:{display:"inline-block"},children:n}),e.label?u.jsx("div",{style:{marginLeft:6,display:"inline-block",position:"relative",verticalAlign:"top",top:6},children:e.label}):void 0]}):u.jsxs("div",{style:{marginBottom:4,lineHeight:"1.5em"},children:[u.jsx("div",{style:{display:"inline-block",height:"100%",width:108},children:e.name}),u.jsxs("div",{style:{width:200,display:"inline-block"},children:[u.jsx("div",{style:{display:"inline-block"},children:n}),e.label?u.jsx("div",{style:{marginLeft:6,height:"100%",display:"inline-block"},children:e.label}):void 0]})]})}function Hp(e){return u.jsxs("div",{className:e.className,style:{marginBottom:4,lineHeight:"1.5em"},children:[u.jsx("div",{style:{display:"inline-block",height:"100%",width:108},children:e.name}),u.jsx("div",{style:{width:200,display:"inline-block"},children:u.jsx("div",{style:{display:"inline-block",marginLeft:6,color:e.color},children:e.text})})]})}const Os=new Map;function Ft(e,t){Os.set(e,`Buffs/${t}`);const n=Ge[e].maximumStacks??1;for(let o=2;o<=n;o++)Os.set(e+o,`Buffs/${t.replace(Ge[e].name,Ge[e].name+o)}`)}Object.keys(UC).forEach(e=>{const t=Ge[e].name;Os.set(e,`Buffs/Role/${t}.png`)});Object.keys(HC).forEach(e=>Os.set(e,"Buffs/Role/Tank Limit Break.png"));Os.set("SPRINT","Buffs/General/Sprint.png");Os.set("TINCTURE","Buffs/General/Tincture.png");function Aw(e){let t=e.rscType;e.stacks>1&&(t+=e.stacks);let n;e.rscType==="AUTOS_ENGAGED"||e.rscType==="REAR_POSITIONAL"||e.rscType==="FLANK_POSITIONAL"?n={height:40}:n={height:40};const o=Ge[e.rscType].mayNotBeCanceled,l={display:"inline-block",verticalAlign:"top",filter:e.enabled?"none":"grayScale(100%)"},r=u.jsx("img",{style:n,src:"assets/"+Os.get(t),alt:e.rscType});return u.jsxs("div",{title:je(e.rscType),className:e.className+" buff "+e.rscType,children:[o?u.jsx("div",{style:l,children:r}):u.jsx(Cs,{content:r,style:l,onClickFn:()=>{e.onSelf&&(N.requestToggleBuff(e.rscType,!0),N.updateStatusDisplay(N.game),N.updateSkillButtons(N.game),N.autoSave(),on())}}),u.jsx("span",{className:"buff-label",style:{visibility:e.timeRemaining===void 0?"hidden":void 0},children:e.timeRemaining??"0.000"})]})}function Th(e){const t=e.data,n=[];for(let l=0;l<t.length;l++)n.push(u.jsx(Aw,{...t[l]},l));let o={height:54,textAlign:"right",lineHeight:"1em"};return e.style&&(o={...o,...e.style}),u.jsx("div",{style:o,children:n})}function PO(e){const t=Pt(),n=e.data,o=u.jsx(xE,{name:"GCD",color:t.resources.gcdBar,progress:n.gcdReady?0:1-n.timeTillGCDReady/n.gcd,value:n.timeTillGCDReady.toFixed(3),width:100,hidden:n.gcdReady}),l=u.jsx(xE,{name:"casting/taxed",color:n.canMove?t.resources.gcdBar:t.resources.lockBar,progress:n.castLocked?1-n.castLockCountdown/n.castLockTotalDuration:0,value:n.castLockCountdown.toFixed(3),width:100,hidden:!n.castLocked}),r=u.jsx(xE,{name:"using skill",color:t.resources.lockBar,progress:n.animLocked?1-n.animLockCountdown/n.animLockTotalDuration:0,value:n.animLockCountdown.toFixed(3),width:100,hidden:!n.animLocked});return u.jsxs("div",{style:{position:"absolute"},children:[o,l,r]})}function wO(e){const t=e.data.resources.map((o,l)=>{switch(o.kind){case"bar":return u.jsx(xE,{name:o.name,color:o.color,progress:o.progress,value:o.valueString,width:o.widthPx??100,hidden:o.hidden??!1},"resourceDisplay"+l);case"counter":{const r=[];for(let d=0;d<o.maxStacks;d++)r.push({color:d<o.currentStacks?o.color:void 0});return u.jsx(Wi,{containerType:"circle",name:o.name,label:o.valueString??`${o.currentStacks}/${o.maxStacks}`,items:r},"resourceDisplay"+l)}case"paint":{const r=[];for(let h=0;h<o.maxStacks;h++){const E=o.hasComet&&h===o.currentStacks-1?o.cometColor:o.holyColor;r.push({color:h<o.currentStacks?E:void 0,imgUrl:void 0})}const d=`${o.currentStacks}/${o.maxStacks}`;return u.jsx(Wi,{containerType:"circle",name:o.name,label:d,items:r},"resourceDisplay"+l)}case"dance":{const r=o.currentStacks,d=[o.emboiteColor,o.entrechatColor,o.jeteColor,o.pirouetteColor],h=[];for(let A=0;A<o.maxStacks;A++)h.push({color:A<r?d[A]:void 0});const E=`${r}/${o.maxStacks}`;return u.jsx(Wi,{containerType:"circle",name:o.name,label:E,items:h},"resourceDisplay"+l)}case"sen":{const r=[{present:o.hasSetsu,color:o.setsuColor,name:"setsu"},{present:o.hasGetsu,color:o.getsuColor,name:"getsu"},{present:o.hasKa,color:o.kaColor,name:"ka"}],d=u.jsx(We,{topic:"senExplanation",content:C({en:"from left to right: setsu (yukikaze), getsu (gekko/mangetsu), ka (kasha/oka)",zh:"从左到右：雪闪（雪风），月闪（月光/满月），花闪（花车/樱花）"})});return u.jsx(Wi,{name:u.jsxs(u.Fragment,{children:[o.name," ",d]}),label:r.filter(h=>h.present).map(h=>h.name).join("+"),containerType:"circle",items:r.map(h=>({color:h.present?h.color:void 0}))},"resourceDisplay"+l)}case"coda":{const r=[{present:o.hasWanderers,color:o.wanderersColor},{present:o.hasMages,color:o.magesColor},{present:o.hasArmys,color:o.armysColor}],d=u.jsx(We,{topic:"codaExplanation",content:C({en:"from left to right: wanderer's coda, mage's coda, army's coda"})});return u.jsx(Wi,{name:u.jsxs(u.Fragment,{children:[o.name," ",d]}),containerType:"circle",items:r.map(h=>({color:h.present?h.color:void 0}))},"resourceDisplay"+l)}case"attunement":{const r=[{gem:o.ruby,color:o.rubyColor},{gem:o.topaz,color:o.topazColor},{gem:o.emerald,color:o.emeraldColor}];return u.jsxs("div",{children:[u.jsx(Wi,{name:o.aetherName,containerType:"circle",items:r.map(d=>({color:d.gem?d.color:void 0}))}),u.jsx(Hp,{name:o.attunementName,text:o.attunementCount.toString()+(o.attunementCount>0?` | ${o.timeRemaining.toFixed(3)}`:"")})]},"resourceDisplay"+l)}case"nadi":return u.jsx("div",{children:u.jsx(Wi,{name:o.name,label:o.label,containerType:"circle",items:[{color:o.lunar?o.lunarColor:void 0},{color:o.solar?o.solarColor:void 0}]})},"resourceDisplay"+l);case"beast":{const r=new Array(3).map(d=>({color:void 0}));return o.chakras.map((d,h)=>{r[h]={color:d==="opo"?o.opoColor:d==="raptor"?o.raptorColor:d==="coeurl"?o.coeurlColor:void 0}}),u.jsx("div",{children:u.jsx(Wi,{name:o.name,label:o.label,containerType:"circle",items:r})},"resourceDisplay"+l)}case"chakra":{const r=o.value>o.wrapCount,d=r?o.value%o.wrapCount:o.value,h=new Array(o.wrapCount);for(let E=0;E<o.wrapCount;E++)h[E]={color:r?E+1>d?o.regularColor:o.overflowColor:E+1>d?void 0:o.regularColor};return u.jsx("div",{children:u.jsx(Wi,{name:o.name,label:o.label,containerType:"circle",items:h})},"resourceDisplay"+l)}case"arcana":{const r=o.activeSlots.map((d,h)=>{const E=h===o.activeSlots.length-1?18:20,A=h===o.activeSlots.length-1?16:20;return{color:d?o.currentArcanaColor:void 0,boxHeightPx:E,boxWidthPx:A}});return u.jsx("div",{children:u.jsx(Wi,{name:o.name,containerType:"box",items:r})},"resourceDisplay"+l)}default:return u.jsx(Hp,{name:o.name,text:o.text,color:o.color},"resourceDisplay"+l)}});let n={textAlign:"left",minHeight:"13.5em"};return e.style&&(n={...n,...e.style}),u.jsx("div",{style:n,children:t})}let GO=(e,t)=>{};class BO extends rn.Component{constructor(n){super(n);Z(this,"state");this.state={time:0,resources:[],enemyBuffs:[],selfBuffs:[],level:100,layoutFn:o=>u.jsx("div",{})},GO=(o,l)=>{const r=o(Hi(this.context));this.setState({layoutFn:l,...r})}}componentDidMount(){N.updateStatusDisplay(N.game)}render(){return u.jsxs("div",{style:{position:"relative",textAlign:"left",margin:"8px 0"},children:[u.jsx("div",{style:{position:"absolute",top:-8,right:0,zIndex:1},children:u.jsx(We,{topic:"mainControlRegion",content:u.jsx("div",{className:"toolTip",children:C({en:u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"paragraph",children:[u.jsx("span",{style:{color:"lightgray"},children:"grey"})," border: not focused"]}),u.jsxs("div",{className:"paragraph",children:[u.jsx("b",{style:{color:"mediumpurple"},children:"purple"})," border: up-to-date, receiving input"]}),u.jsxs("div",{className:"paragraph",children:[u.jsx("b",{style:{color:"mediumseagreen"},children:"green"})," border: real-time"]}),u.jsxs("div",{className:"paragraph",children:[u.jsx("b",{style:{color:"darkorange"},children:"orange"})," border: viewing historical state, receiving input"]})]}),zh:u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"paragraph",children:[u.jsx("span",{style:{color:"lightgray"},children:"灰色"}),"边框：未选中"]}),u.jsxs("div",{className:"paragraph",children:[u.jsx("b",{style:{color:"mediumpurple"},children:"紫色"}),"边框：正在接收输入"]}),u.jsxs("div",{className:"paragraph",children:[u.jsx("b",{style:{color:"mediumseagreen"},children:"绿色"}),"边框：正在进行实时动作"]}),u.jsxs("div",{className:"paragraph",children:[u.jsx("b",{style:{color:"darkorange"},children:"橙色"}),"边框：正在查看历史状态，可接收输入"]})]}),ja:u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"paragraph",children:[u.jsx("span",{style:{color:"lightgray"},children:"グレー"})," : 未選択"]}),u.jsxs("div",{className:"paragraph",children:[u.jsx("b",{style:{color:"mediumpurple"},children:"紫"})," : 入力可"]}),u.jsxs("div",{className:"paragraph",children:[u.jsx("b",{style:{color:"mediumseagreen"},children:"緑"})," : リアルタイム"]}),u.jsxs("div",{className:"paragraph",children:[u.jsx("b",{style:{color:"darkorange"},children:"オレンジ"})," : 任意の時点の状態を確認中。入力不可"]})]})})})})}),this.state.layoutFn(this.state)]})}}Z(BO,"contextType",Ga);class Wt{constructor(t){Z(this,"state");this.state=t}makeCommonTimer(t,n=!0){const o=this.state.resources.timeTillReady(t),l=this.state.resources.get(t);return{rscType:t,onSelf:n,enabled:l.enabled,stacks:l.availableAmount(),timeRemaining:o.toFixed(3),className:l.availableAmountIncludingDisabled()>0?"":"hidden"}}makeToggleableTimer(t,n=!0){const o=this.state.resources.timeTillReady(t),l=this.state.resources.get(t);return{rscType:t,onSelf:n,enabled:l.enabled,stacks:l.availableAmount(),timeRemaining:o.toFixed(3),className:l.availableAmountIncludingDisabled()>0?"":"hidden"}}makeCommonTimerless(t,n=!0){return{rscType:t,onSelf:n,enabled:!0,stacks:this.state.resources.get(t).availableAmount(),className:this.state.hasResourceAvailable(t)?"":"hidden"}}makeToggleableTimerless(t,n=!0){const o=this.state.resources.get(t);return{rscType:t,onSelf:n,enabled:o.enabled,stacks:o.availableAmount(),className:o.availableAmountIncludingDisabled()>0?"":"hidden"}}jobSpecificOtherTargetedBuffViewProps(){return[]}getAllOtherTargetedBuffViewProps(){const t=this.state.job,n=[];return ft[t].role==="TANK"&&n.push(this.makeCommonTimer("REPRISAL",!1)),ft[t].role==="MELEE"&&n.push(this.makeCommonTimer("FEINT",!1)),ft[t].role==="CASTER"&&n.push(this.makeCommonTimer("ADDLE",!1)),[...this.jobSpecificOtherTargetedBuffViewProps(),...n]}jobSpecificSelfTargetedBuffViewProps(){return[]}getAllSelfTargetedBuffViewProps(){const t=this.state.job,n=this.state.resources,o=[];if(ft[t].role==="TANK"){o.push(...["RAMPART","SHIELD_WALL","STRONGHOLD"].map(r=>this.makeCommonTimer(r)));const l=ft[t].limitBreakBuff??"UNKNOWN";l&&o.push(this.makeCommonTimer(l))}return ft[t].role==="MELEE"&&o.push(...["TRUE_NORTH","BLOODBATH"].map(l=>this.makeCommonTimer(l))),["TANK","MELEE","RANGED"].includes(ft[t].role)&&o.push(this.makeCommonTimer("ARMS_LENGTH")),["HEALER","CASTER"].includes(ft[t].role)&&o.push(...["SWIFTCAST","LUCID_DREAMING","SURECAST"].map(l=>this.makeCommonTimer(l))),o.push(this.makeCommonTimer("TINCTURE"),this.makeCommonTimer("SPRINT")),ft[t].role==="MELEE"&&o.push(...["REAR_POSITIONAL","FLANK_POSITIONAL"].map(l=>({rscType:l,onSelf:!0,enabled:n.get(l).enabled,stacks:1,className:""}))),(ft[t].role==="TANK"||ft[t].role==="MELEE")&&o.push(...["AUTOS_ENGAGED"].map(l=>({rscType:l,onSelf:!0,enabled:n.get(l).available(1),stacks:1,className:""}))),[...this.jobSpecificSelfTargetedBuffViewProps(),...o]}jobSpecificResourceViewProps(t){return[]}getAllResourceViewProps(t){if(!ft[this.state.job].usesMp)return this.jobSpecificResourceViewProps(t);const n=this.state.resources,o=n.timeTillReady("MANA"),l=n.get("MANA").availableAmount();return[{kind:"bar",name:"MP",color:t.resources.mana,progress:l/1e4,valueString:Math.floor(l)+"/10000"},{kind:"bar",name:C({en:"MP tick",zh:"跳蓝时间",ja:"MPティック"}),color:t.resources.manaTick,progress:1-o/3,valueString:(3-o).toFixed(3)+"/3"},...this.jobSpecificResourceViewProps(t)]}statusLayoutFn(t){return u.jsxs(u.Fragment,{children:[u.jsxs("div",{style:{display:"inline-block",verticalAlign:"top",width:"50%",height:"100%"},children:[u.jsxs("span",{style:{display:"block",marginBottom:10},children:[C({en:"time: ",zh:"战斗时间：",ja:"経過時間："}),`${it.displayTime(t.time,3)} (${t.time.toFixed(3)})`]}),t.resources?u.jsx(wO,{data:{level:t.level,resources:t.resources}}):void 0]}),u.jsxs("div",{style:{position:"relative",display:"inline-block",float:"right",width:"50%"},children:[t.resourceLocks?u.jsx(PO,{data:t.resourceLocks}):void 0,u.jsx(Th,{data:t.enemyBuffs,style:{marginBottom:"3em"}}),u.jsx(Th,{data:t.selfBuffs})]})]})}}var PE={exports:{}},mw=PE.exports,Up;function Rw(){return Up||(Up=1,function(e){(function(t,n,o){function l(E){var A=this,R=h();A.next=function(){var T=2091639*A.s0+A.c*23283064365386963e-26;return A.s0=A.s1,A.s1=A.s2,A.s2=T-(A.c=T|0)},A.c=1,A.s0=R(" "),A.s1=R(" "),A.s2=R(" "),A.s0-=R(E),A.s0<0&&(A.s0+=1),A.s1-=R(E),A.s1<0&&(A.s1+=1),A.s2-=R(E),A.s2<0&&(A.s2+=1),R=null}function r(E,A){return A.c=E.c,A.s0=E.s0,A.s1=E.s1,A.s2=E.s2,A}function d(E,A){var R=new l(E),T=A&&A.state,S=R.next;return S.int32=function(){return R.next()*4294967296|0},S.double=function(){return S()+(S()*2097152|0)*11102230246251565e-32},S.quick=S,T&&(typeof T=="object"&&r(T,R),S.state=function(){return r(R,{})}),S}function h(){var E=4022871197,A=function(R){R=String(R);for(var T=0;T<R.length;T++){E+=R.charCodeAt(T);var S=.02519603282416938*E;E=S>>>0,S-=E,S*=E,E=S>>>0,S-=E,E+=S*4294967296}return(E>>>0)*23283064365386963e-26};return A}n&&n.exports?n.exports=d:this.alea=d})(mw,e)}(PE)),PE.exports}var wE={exports:{}},Tw=wE.exports,kp;function Sw(){return kp||(kp=1,function(e){(function(t,n,o){function l(h){var E=this,A="";E.x=0,E.y=0,E.z=0,E.w=0,E.next=function(){var T=E.x^E.x<<11;return E.x=E.y,E.y=E.z,E.z=E.w,E.w^=E.w>>>19^T^T>>>8},h===(h|0)?E.x=h:A+=h;for(var R=0;R<A.length+64;R++)E.x^=A.charCodeAt(R)|0,E.next()}function r(h,E){return E.x=h.x,E.y=h.y,E.z=h.z,E.w=h.w,E}function d(h,E){var A=new l(h),R=E&&E.state,T=function(){return(A.next()>>>0)/4294967296};return T.double=function(){do var S=A.next()>>>11,I=(A.next()>>>0)/4294967296,p=(S+I)/(1<<21);while(p===0);return p},T.int32=A.next,T.quick=T,R&&(typeof R=="object"&&r(R,A),T.state=function(){return r(A,{})}),T}n&&n.exports?n.exports=d:this.xor128=d})(Tw,e)}(wE)),wE.exports}var GE={exports:{}},Iw=GE.exports,xp;function _w(){return xp||(xp=1,function(e){(function(t,n,o){function l(h){var E=this,A="";E.next=function(){var T=E.x^E.x>>>2;return E.x=E.y,E.y=E.z,E.z=E.w,E.w=E.v,(E.d=E.d+362437|0)+(E.v=E.v^E.v<<4^(T^T<<1))|0},E.x=0,E.y=0,E.z=0,E.w=0,E.v=0,h===(h|0)?E.x=h:A+=h;for(var R=0;R<A.length+64;R++)E.x^=A.charCodeAt(R)|0,R==A.length&&(E.d=E.x<<10^E.x>>>4),E.next()}function r(h,E){return E.x=h.x,E.y=h.y,E.z=h.z,E.w=h.w,E.v=h.v,E.d=h.d,E}function d(h,E){var A=new l(h),R=E&&E.state,T=function(){return(A.next()>>>0)/4294967296};return T.double=function(){do var S=A.next()>>>11,I=(A.next()>>>0)/4294967296,p=(S+I)/(1<<21);while(p===0);return p},T.int32=A.next,T.quick=T,R&&(typeof R=="object"&&r(R,A),T.state=function(){return r(A,{})}),T}n&&n.exports?n.exports=d:this.xorwow=d})(Iw,e)}(GE)),GE.exports}var BE={exports:{}},gw=BE.exports,Pp;function Nw(){return Pp||(Pp=1,function(e){(function(t,n,o){function l(h){var E=this;E.next=function(){var R=E.x,T=E.i,S,I;return S=R[T],S^=S>>>7,I=S^S<<24,S=R[T+1&7],I^=S^S>>>10,S=R[T+3&7],I^=S^S>>>3,S=R[T+4&7],I^=S^S<<7,S=R[T+7&7],S=S^S<<13,I^=S^S<<9,R[T]=I,E.i=T+1&7,I};function A(R,T){var S,I=[];if(T===(T|0))I[0]=T;else for(T=""+T,S=0;S<T.length;++S)I[S&7]=I[S&7]<<15^T.charCodeAt(S)+I[S+1&7]<<13;for(;I.length<8;)I.push(0);for(S=0;S<8&&I[S]===0;++S);for(S==8?I[7]=-1:I[S],R.x=I,R.i=0,S=256;S>0;--S)R.next()}A(E,h)}function r(h,E){return E.x=h.x.slice(),E.i=h.i,E}function d(h,E){h==null&&(h=+new Date);var A=new l(h),R=E&&E.state,T=function(){return(A.next()>>>0)/4294967296};return T.double=function(){do var S=A.next()>>>11,I=(A.next()>>>0)/4294967296,p=(S+I)/(1<<21);while(p===0);return p},T.int32=A.next,T.quick=T,R&&(R.x&&r(R,A),T.state=function(){return r(A,{})}),T}n&&n.exports?n.exports=d:this.xorshift7=d})(gw,e)}(BE)),BE.exports}var FE={exports:{}},pw=FE.exports,wp;function Cw(){return wp||(wp=1,function(e){(function(t,n,o){function l(h){var E=this;E.next=function(){var R=E.w,T=E.X,S=E.i,I,p;return E.w=R=R+1640531527|0,p=T[S+34&127],I=T[S=S+1&127],p^=p<<13,I^=I<<17,p^=p>>>15,I^=I>>>12,p=T[S]=p^I,E.i=S,p+(R^R>>>16)|0};function A(R,T){var S,I,p,_,b,v=[],L=128;for(T===(T|0)?(I=T,T=null):(T=T+"\0",I=0,L=Math.max(L,T.length)),p=0,_=-32;_<L;++_)T&&(I^=T.charCodeAt((_+32)%T.length)),_===0&&(b=I),I^=I<<10,I^=I>>>15,I^=I<<4,I^=I>>>13,_>=0&&(b=b+1640531527|0,S=v[_&127]^=I+b,p=S==0?p+1:0);for(p>=128&&(v[(T&&T.length||0)&127]=-1),p=127,_=4*128;_>0;--_)I=v[p+34&127],S=v[p=p+1&127],I^=I<<13,S^=S<<17,I^=I>>>15,S^=S>>>12,v[p]=I^S;R.w=b,R.X=v,R.i=p}A(E,h)}function r(h,E){return E.i=h.i,E.w=h.w,E.X=h.X.slice(),E}function d(h,E){h==null&&(h=+new Date);var A=new l(h),R=E&&E.state,T=function(){return(A.next()>>>0)/4294967296};return T.double=function(){do var S=A.next()>>>11,I=(A.next()>>>0)/4294967296,p=(S+I)/(1<<21);while(p===0);return p},T.int32=A.next,T.quick=T,R&&(R.X&&r(R,A),T.state=function(){return r(A,{})}),T}n&&n.exports?n.exports=d:this.xor4096=d})(pw,e)}(FE)),FE.exports}var zE={exports:{}},Ow=zE.exports,Gp;function bw(){return Gp||(Gp=1,function(e){(function(t,n,o){function l(h){var E=this,A="";E.next=function(){var T=E.b,S=E.c,I=E.d,p=E.a;return T=T<<25^T>>>7^S,S=S-I|0,I=I<<24^I>>>8^p,p=p-T|0,E.b=T=T<<20^T>>>12^S,E.c=S=S-I|0,E.d=I<<16^S>>>16^p,E.a=p-T|0},E.a=0,E.b=0,E.c=-1640531527,E.d=1367130551,h===Math.floor(h)?(E.a=h/4294967296|0,E.b=h|0):A+=h;for(var R=0;R<A.length+20;R++)E.b^=A.charCodeAt(R)|0,E.next()}function r(h,E){return E.a=h.a,E.b=h.b,E.c=h.c,E.d=h.d,E}function d(h,E){var A=new l(h),R=E&&E.state,T=function(){return(A.next()>>>0)/4294967296};return T.double=function(){do var S=A.next()>>>11,I=(A.next()>>>0)/4294967296,p=(S+I)/(1<<21);while(p===0);return p},T.int32=A.next,T.quick=T,R&&(typeof R=="object"&&r(R,A),T.state=function(){return r(A,{})}),T}n&&n.exports?n.exports=d:this.tychei=d})(Ow,e)}(zE)),zE.exports}var jE={exports:{}};const Dw={},yw=Object.freeze(Object.defineProperty({__proto__:null,default:Dw},Symbol.toStringTag,{value:"Module"})),vw=MM(yw);var Mw=jE.exports,Bp;function Lw(){return Bp||(Bp=1,function(e){(function(t,n,o){var l=256,r=6,d=52,h="random",E=o.pow(l,r),A=o.pow(2,d),R=A*2,T=l-1,S;function I(M,B,w){var x=[];B=B==!0?{entropy:!0}:B||{};var Q=v(b(B.entropy?[M,k(n)]:M??L(),3),x),oe=new p(x),he=function(){for(var ue=oe.g(r),de=E,fe=0;ue<A;)ue=(ue+fe)*l,de*=l,fe=oe.g(1);for(;ue>=R;)ue/=2,de/=2,fe>>>=1;return(ue+fe)/de};return he.int32=function(){return oe.g(4)|0},he.quick=function(){return oe.g(4)/4294967296},he.double=he,v(k(oe.S),n),(B.pass||w||function(ue,de,fe,$){return $&&($.S&&_($,oe),ue.state=function(){return _(oe,{})}),fe?(o[h]=ue,de):ue})(he,Q,"global"in B?B.global:this==o,B.state)}function p(M){var B,w=M.length,x=this,Q=0,oe=x.i=x.j=0,he=x.S=[];for(w||(M=[w++]);Q<l;)he[Q]=Q++;for(Q=0;Q<l;Q++)he[Q]=he[oe=T&oe+M[Q%w]+(B=he[Q])],he[oe]=B;(x.g=function(ue){for(var de,fe=0,$=x.i,ee=x.j,Y=x.S;ue--;)de=Y[$=T&$+1],fe=fe*l+Y[T&(Y[$]=Y[ee=T&ee+de])+(Y[ee]=de)];return x.i=$,x.j=ee,fe})(l)}function _(M,B){return B.i=M.i,B.j=M.j,B.S=M.S.slice(),B}function b(M,B){var w=[],x=typeof M,Q;if(B&&x=="object")for(Q in M)try{w.push(b(M[Q],B-1))}catch{}return w.length?w:x=="string"?M:M+"\0"}function v(M,B){for(var w=M+"",x,Q=0;Q<w.length;)B[T&Q]=T&(x^=B[T&Q]*19)+w.charCodeAt(Q++);return k(B)}function L(){try{var M;return S&&(M=S.randomBytes)?M=M(l):(M=new Uint8Array(l),(t.crypto||t.msCrypto).getRandomValues(M)),k(M)}catch{var B=t.navigator,w=B&&B.plugins;return[+new Date,t,w,t.screen,k(n)]}}function k(M){return String.fromCharCode.apply(0,M)}if(v(o.random(),n),e.exports){e.exports=I;try{S=vw}catch{}}else o["seed"+h]=I})(typeof self<"u"?self:Mw,[],Math)}(jE)),jE.exports}var lR,Fp;function Hw(){if(Fp)return lR;Fp=1;var e=Rw(),t=Sw(),n=_w(),o=Nw(),l=Cw(),r=bw(),d=Lw();return d.alea=e,d.xor128=t,d.xorwow=n,d.xorshift7=o,d.xor4096=l,d.tychei=r,lR=d,lR}var Uw=Hw();const zp=nT(Uw);var qr,Zr,Gu,Bu,Mh,FO;class Xt{constructor(t){Fe(this,Mh);Z(this,"config");Z(this,"rng");Z(this,"nonProcRng");Z(this,"lucidTickOffset");Z(this,"dotTickOffset");Z(this,"hotTickOffset");Z(this,"time");Z(this,"resources");Z(this,"cooldowns");Z(this,"eventsQueue");Z(this,"skillsList");Z(this,"displayedSkills");Z(this,"autoAttackDelay");Z(this,"overTimeEffectGroups",[]);Z(this,"dotResources",[]);Z(this,"hotResources",[]);Z(this,"excludedDoTs",[]);Z(this,"excludedHoTs",[]);Z(this,"fullTimeDoTs",[]);Fe(this,qr,[]);Fe(this,Zr,[]);Z(this,"dotSkills",[]);Z(this,"hotSkills",[]);Fe(this,Gu,new Map);Fe(this,Bu,new Map);this.config=t,this.rng=zp(t.randomSeed),this.nonProcRng=zp(t.randomSeed+"_nonProcs"),this.lucidTickOffset=this.nonProcRng()*3,this.dotTickOffset=this.nonProcRng()*3,this.hotTickOffset=this.nonProcRng()*3,this.time=0,this.resources=new EU(this),this.cooldowns=new dU(this),$i(this.job).forEach((o,l)=>{o.isCoolDown?this.cooldowns.set(new ke(l,o.cdPerStack,o.maxStacks,o.maxStacks)):this.resources.set(new sn(l,o.maxValue,o.defaultValue,o.warnOnOvercap))});let n=2.5;switch(ft[this.job].role){case"TANK":case"MELEE":case"RANGED":n=t.adjustedSksGCD();break;case"HEALER":case"CASTER":n=t.adjustedGCD();break}this.cooldowns.set(new ke("cd_GCD",t.getAfterTaxGCD(n),1,1)),this.resources.set(new sn("MOVEMENT",1,1)),this.resources.set(new sn("NOT_ANIMATION_LOCKED",1,1)),this.resources.set(new sn("NOT_CASTER_TAXED",1,1)),this.resources.set(new sn("IN_COMBAT",1,0)),this.cooldowns.set(new ke("NEVER",0,0,0)),this.eventsQueue=[],this.skillsList=new mU(this),this.displayedSkills=new RU(this.job,t.level),this.autoAttackDelay=2.5}get statusPropsGenerator(){return new Wt(this)}get job(){return this.config.job}get partySize(){return this.resources.get("PARTY_SIZE").availableAmount()}registerRecurringEvents(t=[],n=[]){const o=this;{const h=()=>{const E=this.resources.get("MANA"),A=this.captureManaRegenAmount();E.gain(A);const R=E.availableAmount();N.reportManaTick(o.time,"+"+A+" (MP="+R+")"),this.resources.addResourceEvent({rscType:"MANA",name:"mana tick",delay:3,fnOnRsc:T=>{h()},tags:[hn.MpTick,hn.ManaGain]})};this.resources.addResourceEvent({rscType:"MANA",name:"initial mana tick",delay:this.config.timeTillFirstManaTick,fnOnRsc:h,tags:[hn.MpTick,hn.ManaGain]})}const l=()=>{const h=this.resources.get("LUCID_DREAMING");if(h.available(1)&&(h.tickCount++,!(this.job==="BLM"&&this.hasResourceAvailable("ASTRAL_FIRE")))){const A=this.resources.get("MANA");A.gain(550);let R="+550";if(console.assert(h.node!==void 0),h.node){let T="??";h.node.tmp_startLockTime&&(T=(h.node.tmp_startLockTime-this.config.countdown).toFixed(3)),R+=" {skill}@"+T,R+=" ("+h.tickCount+"/7)"}R+=" (MP="+A.availableAmount()+")",N.reportLucidTick(this.time,R)}const E=new be("lucid tick",3,()=>{l()});E.addTag(hn.LucidTick),h.available(1)&&h.pendingChange&&h.pendingChange.timeTillEvent>=3&&E.addTag(hn.ManaGain),this.addEvent(E)};if([...Ri,...Ti].includes(this.job)){let h=this.config.timeTillFirstManaTick+this.lucidTickOffset;for(;h>3;)h-=3;const E=new be("initial lucid tick",h,l);E.addTag(hn.LucidTick),this.addEvent(E)}const r=()=>{this.dotResources.filter(h=>!this.excludedDoTs.includes(h)).forEach(h=>this.handleDoTTick(h)),this.getDisplayTime()>=0&&N.reportDotTick(this.time),this.addEvent(new be("DoT tick",3,()=>{r()}))},d=()=>{this.hotResources.filter(h=>!this.excludedHoTs.includes(h)).forEach(h=>this.handleHoTTick(h)),this.getDisplayTime()>=0&&N.reportHotTick(this.time),this.addEvent(new be("HoT tick",3,()=>{d()}))};if(t.forEach(h=>{h.groupedEffects.forEach(E=>{let A=this.dotResources,R=ie(this,qr),T=ie(this,Gu),S=this.excludedDoTs;h.isHealing&&(A=this.hotResources,R=ie(this,Zr),T=ie(this,Bu),S=this.excludedHoTs),A.includes(E.effectName)?console.assert(!1,`${E.effectName} was registered as an over time effect multiple times for ${this.job}`):(A.push(E.effectName),E.appliedBy.forEach(I=>{!h.isHealing&&!this.dotSkills.includes(I)&&this.dotSkills.push(I),h.isHealing&&!this.hotSkills.includes(I)&&this.hotSkills.push(I)}),T.set(E.effectName,h.groupedEffects.filter(I=>I!==E).map(I=>I.effectName)),E.isGroundTargeted&&!R.includes(E.effectName)&&R.push(E.effectName),E.exclude&&!S.includes(E.effectName)&&S.push(E.effectName),!h.isHealing&&h.reportName&&!this.fullTimeDoTs.includes(E.effectName)&&this.fullTimeDoTs.push(E.effectName))})}),n.forEach(h=>this.dotSkills.push(h)),this.overTimeEffectGroups=t,this.dotResources.filter(h=>!this.excludedDoTs.includes(h)).length>0){let h=this.config.timeTillFirstManaTick+this.dotTickOffset;for(;h>3;)h-=3;this.addEvent(new be("initial DoT tick",h,r))}if(this.hotResources.filter(h=>!this.excludedHoTs.includes(h)).length>0){let h=this.config.timeTillFirstManaTick+this.hotTickOffset;for(;h>3;)h-=3;this.addEvent(new be("initial HoT tick",h,d))}this.jobSpecificRegisterRecurringEvents()}onResolveOverTimeTick(t,n){n==="damage"?this.jobSpecificOnResolveDotTick(t):this.jobSpecificOnResolveHotTick(t)}inherentSpeedModifier(){}jobSpecificRegisterRecurringEvents(){}jobSpecificOnResolveDotTick(t){}jobSpecificOnResolveHotTick(t){}jobSpecificAddDamageBuffCovers(t,n){}jobSpecificAddSpeedBuffCovers(t,n){}jobSpecificAddHealingBuffCovers(t,n){}maybeCancelChanneledSkills(t){const n=this.skillsList.get(t);n&&(n.animationLockFn(this)<=Sn||this.cancelChanneledSkills())}cancelChanneledSkills(){}jobSpecificOnAutoAttack(){}onAutoAttack(){this.jobSpecificOnAutoAttack()}getStatusDuration(t){return Kt(this.job,t).maxTimeout}gainStatus(t,n=1){const o=this.resources.get(t),l=Kt(this.job,t);this.hasResourceAvailable(t)?(l.warnOnOvercap&&n>=o.availableAmount()&&N.reportWarning({kind:"overcap",rsc:t}),l.maxTimeout>0&&o.overrideTimer(this,l.maxTimeout),o.availableAmount()!==n&&o.overrideCurrentValue(n)):(o.gain(n),l.maxTimeout>0&&this.enqueueResourceDrop(t))}maybeGainProc(t,n=.5,o=!1){this.triggersEffect(n,o)&&this.gainStatus(t)}triggersEffect(t,n=!1){if(this.config.procMode===xn.Never)return!1;const o=n?this.rng():void 0;return this.config.procMode===xn.Always?!0:(o??this.rng())<t}handleDoTTick(t){this.handleOverTimeTick(t,"damage")}handleHoTTick(t){this.handleOverTimeTick(t,"healing")}handleOverTimeTick(t,n){const o=this.resources.get(t);if(o.availableAmountIncludingDisabled()>0){if(o.node&&o.enabled){const l=o.node.getOverTimePotencies(t,n)[o.tickCount];N.resolveOverTimePotency(l,n),this.onResolveOverTimeTick(t,n)}o.tickCount++}else o.node&&(o.node.removeUnresolvedOvertimePotencies(n),o.node=void 0)}tick(t,n=()=>!1){let o=0;for(;o<t&&this.eventsQueue.length>0&&!n();){this.eventsQueue.sort((h,E)=>h.timeTillEvent-E.timeTillEvent);const l=Math.min(t-o,this.eventsQueue[0].timeTillEvent);o=Math.min(o+l,t),this.time+=l,this.cooldowns.tick(l);const r=[];for(let h=0;h<this.eventsQueue.length;h++)r.push(this.eventsQueue[h]);r.forEach(h=>{h.timeTillEvent-=l});let d=0;r.forEach(h=>{h.timeTillEvent<=Sa.epsilon&&(h.canceled||h.effectFn(),d++)}),this.eventsQueue.splice(0,d)}return o}addEvent(t){this.eventsQueue.push(t)}getDisplayTime(){return this.time-this.config.countdown}captureManaRegenAmount(){return this.isInCombat()?this.job in bT?Ot.mpTick(this.config.level,this.config.piety):200:600}requestToggleBuff(t){const n=this.resources.get(t);if(t==="AUTOS_ENGAGED")return this.toggleAutosEngaged(),!0;if(Ge[t].mayBeToggled)return n.available(1)?(n.enabled=!1,!0):(n.enabled=!0,!0);if(Ge[t].mayNotBeCanceled)return!1;if(t==="MEDITATE"){const o=this.findNextQueuedEventByTag(hn.MeditateTick);o&&(o.canceled=!0)}return t==="KARDIA"&&this.tryConsumeResource("KARDION"),(t==="TEN_CHI_JIN"||t==="MUDRA")&&(this.tryConsumeResource("MUDRA"),this.tryConsumeResource("KASSATSU"),this.resources.get("MUDRA_TRACKER").overrideCurrentValue(0),this.resources.get("BUNNY").overrideCurrentValue(0)),n.consume(n.availableAmount()),n.removeTimer(),!0}addRecurringAutoAttackEvent(t,n){const o=(l,r)=>{const d=new be("aa tick",l,()=>{this.resources.get("AUTOS_ENGAGED").available(1)&&this.isInCombat()&&this.onAutoAttack(),this.addEvent(o(r,r))});return d.addTag(hn.AutoTick),d};this.addEvent(o(t,n))}findAutoAttackTimerInQueue(){let t=-1;return this.eventsQueue.forEach(n=>{n.name==="aa tick"&&(t=n.timeTillEvent)}),t}startAutoAttackTimer(t,n,o){if(this.findAutoAttackTimerInQueue()!==-1)this.removeAutoAttackTimer();else if(this.resources.get("STORED_AUTO").available(1)){const h=new be("stored auto",o||0,()=>{this.onAutoAttack()});this.addEvent(h)}this.tryConsumeResource("STORED_AUTO"),this.resources.get("AUTOS_ENGAGED").availableAmount()===0&&this.resources.get("AUTOS_ENGAGED").gain(1);const r=n||3;let d=0;t===-1?d=r:d=t??r,this.addRecurringAutoAttackEvent(d,r)}removeAutoAttackTimer(){let t=0;this.eventsQueue.forEach(n=>{n.name==="aa tick"&&this.eventsQueue.splice(t,1),t++})}toggleAutosEngaged(){const t=this.findAutoAttackTimerInQueue();if(this.resources.get("AUTOS_ENGAGED").availableAmount()===0)this.startAutoAttackTimer(t===-1?3:t);else if(this.resources.get("AUTOS_ENGAGED").consume(1),t!==-1){this.removeAutoAttackTimer();const n=new be("aa tick",t,()=>{this.resources.get("STORED_AUTO").available(0)&&this.resources.get("STORED_AUTO").gain(1)});this.addEvent(n)}}refreshAutoBasedOnSkill(t,n,o){const l=n!==0,r=this.resources.get("AUTOS_ENGAGED").available(1),d=this.autoAttackDelay,h=this.findAutoAttackTimerInQueue(),E=t.startsAuto;if(o){if(this.isInCombat()){if(l&&r){const A=n+(h===-1?d:h);this.startAutoAttackTimer(A,d,n)}else if(!l&&!r)E&&this.startAutoAttackTimer(h,d);else if(l&&!r){if(E){const A=n+(h===-1?d:h);this.startAutoAttackTimer(A,d,n)}else if(h>0){this.removeAutoAttackTimer();const A=new be("aa tick",h+n,()=>{this.resources.get("STORED_AUTO").available(0)&&this.resources.get("STORED_AUTO").gain(1)});this.addEvent(A)}}}else if(E){const A=n+(h===-1?d:h);this.startAutoAttackTimer(A,d,n)}}else if(this.isInCombat()){if(l&&r){const A=this.findAutoAttackTimerInQueue(),R=n+(A===-1?d:A);this.startAutoAttackTimer(R)}else if(l&&!r&&h>0){this.removeAutoAttackTimer();const A=new be("aa tick",h+n,()=>{this.resources.get("STORED_AUTO").available(0)&&this.resources.get("STORED_AUTO").gain(1)});this.addEvent(A)}}}useSpellOrWeaponskill(t,n,o){const l=this.cooldowns.get(t.cdName),d=!(this.job==="NIN"&&(this.hasResourceAvailable("MUDRA")||this.hasResourceAvailable("KASSATSU"))&&["TEN","CHI","JIN"].includes(t.name))&&t.secondaryCd?this.cooldowns.get(t.secondaryCd.cdName):void 0,h=t.castTimeFn(this),E=t.recastTimeFn(this);this.jobSpecificAddSpeedBuffCovers(n,t);const A=t.potencyFn(this);let R=n.getInitialPotency();!R&&(A>0||t.drawsAggro&&!this.isInCombat())?(this.refreshAutoBasedOnSkill(t,h,!0),R=new ea({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t.name,aspect:t.aspect,basePotency:A,snapshotTime:void 0,description:"",targetCount:n.targetCount,falloff:t.falloff}),n.addPotency(R)):this.refreshAutoBasedOnSkill(t,h,!1);const T=t.healingPotencyFn(this);let S=n.getInitialHealingPotency();!S&&T>0&&(S=new ea({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t.name,aspect:t.aspect,basePotency:T,snapshotTime:void 0,description:"",targetCount:n.healTargetCount,falloff:0}),n.addHealingPotency(S));const I=()=>{const _=t.manaCostFn(this);_>this.resources.get("MANA").availableAmount()?N.reportInterruption({failNode:n,failIndex:o}):_>0&&this.resources.get("MANA").consume(_);const b=A>0;if(R&&(R.snapshotTime=this.getDisplayTime(),b)){const L=[];this.hasResourceAvailable("TINCTURE")&&L.push(X.Tincture),L.push(...t.jobPotencyModifiers(this)),R.modifiers=L}b&&(this.hasResourceAvailable("TINCTURE")&&!n.hasBuff(H.Tincture)&&n.addBuff(H.Tincture),this.jobSpecificAddDamageBuffCovers(n,t));const v=T>0;if(S){S.snapshotTime=this.getDisplayTime();const L=[];this.hasResourceAvailable("TINCTURE")&&L.push(X.Tincture),L.push(...t.jobHealingPotencyModifiers(this)),S.modifiers=L}if(v&&(this.hasResourceAvailable("TINCTURE")&&!n.hasBuff(H.Tincture)&&n.addBuff(H.Tincture),this.jobSpecificAddHealingBuffCovers(n,t)),t.onConfirm(this,n),this.addEvent(new be(t.name+" applied",t.applicationDelay,()=>{R&&(N.resolvePotency(R),this.hasResourceAvailable("IN_COMBAT")||this.resources.get("IN_COMBAT").gain(1)),S&&N.resolveHealingPotency(S),t.onApplication(this,n)})),R&&!this.hasResourceAvailable("IN_COMBAT")){const L=this.resources.timeTillReady("IN_COMBAT");(L===0||L>t.applicationDelay)&&this.resources.addResourceEvent({rscType:"IN_COMBAT",name:"begin combat if necessary",delay:t.applicationDelay,fnOnRsc:k=>{k.gain(1)}})}};if(h===0||t.isInstantFn(this))this.resources.takeResourceLock("NOT_ANIMATION_LOCKED",t.animationLockFn(this)),I();else{this.resources.takeResourceLock("MOVEMENT",h-vi.getSlidecastWindow(h)),this.resources.takeResourceLock("NOT_CASTER_TAXED",this.config.getAfterTaxCastTime(h));const _=h-vi.getSlidecastWindow(h);this.addEvent(new be(t.name+" captured",_,()=>{t.validateAttempt(this)?I():N.reportInterruption({failNode:n,failIndex:o})}))}l.useStackWithRecast(this.config.getAfterTaxGCD(E)),d==null||d.useStack()}useAbility(t,n){console.assert(n);const o=this.cooldowns.get(t.cdName),l=t.secondaryCd?this.cooldowns.get(t.secondaryCd.cdName):void 0,r=t.potencyFn(this);let d;if((r>0||t.drawsAggro)&&(d=new ea({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t.name,aspect:t.aspect,basePotency:r,snapshotTime:this.getDisplayTime(),description:"",targetCount:n.targetCount,falloff:t.falloff})),d&&r>0){const p=[];this.hasResourceAvailable("TINCTURE")&&p.push(X.Tincture),p.push(...t.jobPotencyModifiers(this)),d.modifiers=p,n.addPotency(d)}const h=this.resources.get("AUTOS_ENGAGED").available(1),E=this.autoAttackDelay,A=this.findAutoAttackTimerInQueue(),R=t.startsAuto||d&&r>0;if(R)if(this.isInCombat())h||R&&this.startAutoAttackTimer(A,E);else{const p=A===-1?E:A;this.startAutoAttackTimer(p,E,void 0)}const T=t.healingPotencyFn(this);let S;if(T>0){S=new ea({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t.name,aspect:t.aspect,basePotency:T,snapshotTime:this.getDisplayTime(),description:"",targetCount:n.healTargetCount,falloff:0});const p=[];this.hasResourceAvailable("TINCTURE")&&p.push(X.Tincture),p.push(...t.jobHealingPotencyModifiers(this)),S.modifiers=p,n.addHealingPotency(S)}r>0&&!n.hasBuff(H.Tincture)&&(this.hasResourceAvailable("TINCTURE")&&n.addBuff(H.Tincture),this.jobSpecificAddDamageBuffCovers(n,t)),T>0&&(this.hasResourceAvailable("TINCTURE")&&!n.hasBuff(H.Tincture)&&n.addBuff(H.Tincture),this.jobSpecificAddHealingBuffCovers(n,t));const I=t.manaCostFn(this);if(I>0&&this.resources.get("MANA").consume(I),t.onConfirm(this,n),d&&!this.hasResourceAvailable("IN_COMBAT")){const p=this.resources.timeTillReady("IN_COMBAT");(p===0||p>t.applicationDelay)&&this.resources.addResourceEvent({rscType:"IN_COMBAT",name:"begin combat if necessary",delay:t.applicationDelay,fnOnRsc:_=>{_.gain(1)}})}t.applicationDelay>0?this.addEvent(new be(t.name+" applied",t.applicationDelay,()=>{d&&N.resolvePotency(d),S&&N.resolveHealingPotency(S),t.onApplication(this,n)})):(d&&N.resolvePotency(d),S&&N.resolveHealingPotency(S),t.onApplication(this,n)),o.useStack(),l==null||l.useStack(),this.resources.takeResourceLock("NOT_ANIMATION_LOCKED",t.animationLockFn(this))}useLimitBreak(t,n,o){const l=this.cooldowns.get(t.cdName),r=t.castTimeFn(this),d=r>0?vi.getSlidecastWindow(r):0,h=t.potencyFn(this);let E;h>0&&(E=new ea({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t.name,aspect:t.aspect,basePotency:h,snapshotTime:void 0,description:"",targetCount:n.targetCount,falloff:t.falloff}),n.addPotency(E));const A=t.healingPotencyFn(this);let R;A>0&&(R=new ea({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t.name,aspect:t.aspect,basePotency:A,snapshotTime:void 0,description:"",targetCount:n.healTargetCount,falloff:0}),n.addHealingPotency(R));const T=()=>{t.onConfirm(this,n),E&&(E.snapshotTime=this.getDisplayTime()),R&&(R.snapshotTime=this.getDisplayTime()),this.addEvent(new be(t.name+" applied",t.applicationDelay,()=>{E&&N.resolvePotency(E),R&&N.resolveHealingPotency(R),t.onApplication(this,n)})),this.resources.takeResourceLock("NOT_ANIMATION_LOCKED",d+t.animationLockFn(this))};if(r===0)T();else{this.resources.takeResourceLock("MOVEMENT",r-d),this.resources.takeResourceLock("NOT_CASTER_TAXED",this.config.getAfterTaxCastTime(r));const I=r-d;this.addEvent(new be(t.name+" captured",I,()=>{t.validateAttempt(this)?T():N.reportInterruption({failNode:n,failIndex:o})}))}l.useStack()}timeTillAnySkillAvailable(){const t=this.resources.timeTillReady("NOT_ANIMATION_LOCKED"),n=this.resources.timeTillReady("NOT_CASTER_TAXED");return Math.max(t,n)}findNextQueuedEventByTag(t){for(let n=0;n<this.eventsQueue.length;n++){const o=this.eventsQueue[n];if(o.hasTag(t))return o}}hasResourceAvailable(t,n){return this.resources.get(t).available(n??1)}hasResourceExactly(t,n){return this.resources.get(t).availableAmount()===n}hitPositional(t){return this.hasResourceAvailable("TRUE_NORTH")||t==="flank"&&this.hasResourceAvailable("FLANK_POSITIONAL")||t==="rear"&&this.hasResourceAvailable("REAR_POSITIONAL")}hitCombo(t){return this.hasResourceExactly(t.resource,t.resourceValue)}computeComboAndPositionalModifiers(t,n,o){const l=[];return n&&this.hitCombo(n)?(l.push(JH(aa(this,n.potency)-t)),o&&this.hitPositional(o.location)&&l.push($E(aa(this,o.comboPotency)-aa(this,n.potency)))):o&&this.hitPositional(o.location)&&l.push($E(aa(this,o.potency)-t)),l}enqueueResourceDrop(t,n,o){if(n===void 0){const r=Kt(this.job,t);console.assert(r==null?void 0:r.maxTimeout,`could not find timeout declaration for resource ${t}`),n=r.maxTimeout}const l=(o===void 0?"drop all ":`drop ${o} `)+t;this.resources.get(t).removeTimer(),this.resources.addResourceEvent({rscType:t,name:l,delay:n,fnOnRsc:r=>{r.consume(o??r.availableAmountIncludingDisabled()),Kt(this.job,r.type).warnOnTimeout&&N.reportWarning({kind:"timeout",rsc:r.type})}})}getOverriddenDots(t){return ie(this,Gu).get(t)??[]}getOverriddenHots(t){return ie(this,Bu).get(t)??[]}applyDoT(t,n){this.applyOverTimeEffect(t,n,"damage")}applyHoT(t,n,o){this.applyOverTimeEffect(t,n,"healing",o)}applyOverTimeEffect(t,n,o,l){const r=this.resources.get(t),d=l??this.getStatusDuration(t);let h;if((o==="damage"?this.getOverriddenDots(t):this.getOverriddenHots(t)).forEach(A=>{if(A!==t){if(!this.hasResourceAvailable(A)){const R=this.resources.get(A).getLastExpirationTime();if(R){const T=this.getDisplayTime()-R;h=h===void 0?T:Math.min(h,T)}return}n.setOverTimeOverrideAmount(t,n.getOverTimeOverrideAmount(t,o)+this.resources.timeTillReady(A),o),N.reportOverTimeDrop(this.getDisplayTime(),A,o),h=0,this.tryConsumeResource(A)}}),r.available(1))console.assert(r.node),r.node.removeUnresolvedOvertimePotencies(o),n.setOverTimeOverrideAmount(t,n.getOverTimeOverrideAmount(t,o)+this.resources.timeTillReady(t),o),r.overrideTimer(this,d);else{const A=this.getDisplayTime()-(r.getLastExpirationTime()??0);h=h===void 0?A:Math.min(h,A),r.gain(1);const R=o==="damage"?" DoT":" HoT";N.reportOverTimeStart(this.getDisplayTime(),t,o),this.resources.addResourceEvent({rscType:t,name:"drop "+t+R,delay:d,fnOnRsc:T=>{T.consume(1),N.reportOverTimeDrop(this.getDisplayTime(),t,o)}})}n.setOverTimeGap(t,h??0,o),r.node=n,r.tickCount=0,ie(this,qr).includes(t)&&(this.handleDoTTick(t),N.reportDotTick(this.time,t)),ie(this,Zr).includes(t)&&(this.handleHoTTick(t),N.reportHotTick(this.time,t))}addDoTPotencies(t){this.addOverTimePotencies(t,"damage")}addHoTPotencies(t,n){this.addOverTimePotencies(t,"healing",n)}addOverTimePotencies(t,n,o){const l=t.modifiers??[];this.hasResourceAvailable("TINCTURE")&&!l.includes(X.Tincture)&&(l.push(X.Tincture),t.node.addBuff(H.Tincture));const r=o??this.getStatusDuration(t.effectName),d=ie(this,qr).includes(t.effectName)||ie(this,Zr).includes(t.effectName),h=Math.ceil(r/(t.tickFrequency??3))+(d?1:0),E=n==="damage"?"DoT":"HoT",A=n==="damage"?t.node.targetCount:t.node.healTargetCount;for(let R=0;R<h;R++){const T=new ea({config:N.record.config??N.gameConfig,sourceTime:this.getDisplayTime(),sourceSkill:t.skillName,aspect:t.aspect??Ie.Other,basePotency:this.config.adjustedOvertimePotency(t.tickPotency,t.speedStat),snapshotTime:this.getDisplayTime(),description:je(t.effectName)+` ${E} `+(R+1)+`/${h}`,targetCount:A,falloff:0});T.modifiers=l,t.node.addOverTimePotency(T,t.effectName,n)}}refreshDoT(t,n=!1){this.refreshOverTimeEffect(t,"damage",n)}refreshHoT(t,n=!1){this.refreshOverTimeEffect(t,"healing",n)}refreshOverTimeEffect(t,n,o){!o&&!this.hasResourceAvailable(t.effectName)||(this.addOverTimePotencies(t,n),this.applyOverTimeEffect(t.effectName,t.node,n))}timeTillNextMpGainEvent(){const t=this.findNextQueuedEventByTag(hn.ManaGain);return t?t.timeTillEvent:0}timeTillNextDamageEvent(){return this.resources.timeTillReady("IN_COMBAT")}getSkillAvailabilityStatus(t,n=!1){const o=this.skillsList.get(t);let l=pe(this,Mh,FO).call(this,o.name);const r=o.manaCostFn(this),d=this.job==="BLM"&&this.resources.get("LEY_LINES").available(1),h=o.kind==="weaponskill"||o.kind==="spell"||o.kind==="limitbreak"?o.castTimeFn(this):0,E=h===0||o.kind==="ability"||o.kind!=="limitbreak"&&o.kind!=="unknown"&&o.isInstantFn(this),A=this.resources.get("MANA").availableAmount(),R=l>Sa.epsilon,T=r<=A,S=o.validateAttempt(this),I=this.config.level>=o.unlockLevel,p=this.job==="NIN"&&(this.hasResourceAvailable("MUDRA")||this.hasResourceAvailable("KASSATSU"))&&["TEN","CHI","JIN"].includes(o.name),_=pu();if(R&&_.addUnavailableReason(Et.Blocked),!p&&o.secondaryCd&&this.cooldowns.get(o.secondaryCd.cdName).stacksAvailable()===0&&_.addUnavailableReason(Et.SecondaryBlocked),I||_.addUnavailableReason(Et.SkillNotUnlocked),S||_.addUnavailableReason(Et.RequirementsNotMet),T||_.addUnavailableReason(Et.NotEnoughMP),o.name==="MEDITATE"&&(l>Sa.epsilon||this.cooldowns.get("cd_GCD").timeTillNextStackAvailable()>Sa.epsilon)){const de=_.unavailableReasons.indexOf(Et.RequirementsNotMet);de>=0&&_.unavailableReasons.splice(de,1),_.addUnavailableReason(Et.Blocked)}o.requiresCombat&&_.unavailableReasons.includes(Et.RequirementsNotMet)&&(_.addUnavailableReason(Et.NotInCombat),l=this.timeTillNextDamageEvent());let b=this.cooldowns.get(o.cdName);const v=!p&&o.secondaryCd?this.cooldowns.get(o.secondaryCd.cdName):void 0;let L=b.timeTillNextStackAvailable()%b.currentStackCd();const k=!p&&o.secondaryCd?this.cooldowns.timeTillNextStackAvailable(o.secondaryCd.cdName):void 0;let M=b.currentStackCd();if(t==="MEDITATE"&&L<Sa.epsilon){const de=this.cooldowns.get("cd_GCD"),fe=de.currentStackCd();de.timeTillNextStackAvailable()>L&&(b=de,M=fe,L=de.timeTillNextStackAvailable(),l=L)}if(p){const de=this.cooldowns.get("cd_GCD"),fe=de.currentStackCd();b=de,M=fe,L=de.timeTillNextStackAvailable(),l=L}const B=b.stacksAvailable(),w=b.maxStacks(),x=(v==null?void 0:v.currentStackCd())??0;let Q=0;_.ready()&&(o.kind==="spell"?Q=(E?0:h-vi.getSlidecastWindow(h))+o.applicationDelay:o.kind==="limitbreak"?Q=h+o.applicationDelay:Q=o.applicationDelay);const oe=(v==null?void 0:v.stacksAvailable())??0,he=(v==null?void 0:v.maxStacks())??0,ue=o.highlightIf(this);return{skillName:o.name,status:_,stacksAvailable:he>0?oe:B,maxStacks:Math.max(w,he),castTime:h,instantCast:E,cdRecastTime:M,secondaryCdRecastTime:x,timeTillNextStackReady:L,timeTillSecondaryReady:k,timeTillAvailable:l,timeTillDamageApplication:Q,capturedManaCost:r,highlight:ue,llCovered:d,usedAt:this.getDisplayTime()}}useSkill(t,n,o){const l=this.skillsList.get(t);l.onExecute(this,n),l.falloff===void 0&&n.setTargetCount(1),l.aoeHeal&&n.setHealTargetCount(this.resources.get("PARTY_SIZE").availableAmount()),l.kind==="spell"||l.kind==="weaponskill"?this.useSpellOrWeaponskill(l,n,o):l.kind==="ability"?this.useAbility(l,n):l.kind==="limitbreak"&&this.useLimitBreak(l,n,o)}useInvalidSkill(t,n){const o=this.skillsList.get(t);if(o.falloff===void 0&&n.setTargetCount(1),o.aoeHeal&&n.setHealTargetCount(this.resources.get("PARTY_SIZE").availableAmount()),o.kind==="spell"||o.kind==="weaponskill"){const l=o.castTimeFn(this),r=o.recastTimeFn(this);l===0||o.isInstantFn(this)?this.resources.takeResourceLock("NOT_ANIMATION_LOCKED",o.animationLockFn(this)):this.resources.takeResourceLock("NOT_CASTER_TAXED",this.config.getAfterTaxCastTime(l)),this.cooldowns.get("cd_GCD").useStackWithRecast(this.config.getAfterTaxGCD(r))}else if(o.kind==="ability")this.resources.takeResourceLock("NOT_ANIMATION_LOCKED",o.animationLockFn(this));else if(o.kind==="limitbreak"){const l=o.castTimeFn(this),r=vi.getSlidecastWindow(l);this.resources.takeResourceLock("NOT_ANIMATION_LOCKED",r+o.animationLockFn(this))}}getPartyBuffs(t){const n=new Map;return N.timeline.getBuffMarkers().filter(l=>l.time<=t&&l.time+l.duration>=t).forEach(l=>{const r=new Eh(l.description);n.has(r.name)||(r.info.damageFactor===1?n.set(r.name,{kind:"critDirect",source:U.PARTY,buffType:r.name,critBonus:r.info.critBonus,dhBonus:r.info.dhBonus}):n.set(r.name,{kind:"multiplier",source:U.PARTY,buffType:r.name,potencyFactor:r.info.damageFactor}))}),n}tryConsumeResource(t,n=!1){const o=this.resources.get(t),l=n?o.availableAmount():1;return l>0&&o.available(l)?(o.consume(l),o.available(l)||o.removeTimer(),!0):!1}setComboState(t,n){n===0?this.tryConsumeResource(t,!0):(this.resources.get(t).overrideCurrentValue(n),this.enqueueResourceDrop(t,30))}hasTraitUnlocked(t){return yC(t,this.config.level)}isInCombat(){return this.hasResourceAvailable("IN_COMBAT")}}qr=new WeakMap,Zr=new WeakMap,Gu=new WeakMap,Bu=new WeakMap,Mh=new WeakSet,FO=function(t){var d;const n=this.skillsList.get(t),l=this.job==="NIN"&&(this.hasResourceAvailable("MUDRA")||this.hasResourceAvailable("KASSATSU"))&&["TEN","CHI","JIN"].includes(n.name)||(d=n.secondaryCd)==null?void 0:d.cdName;let r=this.cooldowns.timeTillAnyStackAvailable(n.cdName);return l&&(r=Math.max(r,this.cooldowns.timeTillAnyStackAvailable(l))),Math.max(this.timeTillAnySkillAvailable(),r)};const zO=["THUNDER_III","THUNDER_IV","HIGH_THUNDER","HIGH_THUNDER_II"],kw=Object.keys(sT).filter(e=>!zO.includes(e));Object.keys(sT).forEach(e=>Ft(e,`BLM/${Ge[e].name}.png`));class xw extends Wt{jobSpecificOtherTargetedBuffViewProps(){return[...zO.map(t=>this.makeCommonTimer(t,!1))]}jobSpecificSelfTargetedBuffViewProps(){return kw.map(t=>t==="LEY_LINES"?this.makeToggleableTimer(t):t==="THUNDERHEAD"||t==="FIRESTARTER"?this.makeCommonTimerless(t):this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){const n=this.state.resources.get("ENOCHIAN"),o=this.state.resources,l=this.state.getFireStacks(),r=this.state.getIceStacks(),d=o.get("UMBRAL_HEART").availableAmount(),h=o.get("PARADOX").availableAmount(),E=o.get("ASTRAL_SOUL").availableAmount(),A=n.available(1)?o.timeTillReady("POLYGLOT"):30,R=o.get("POLYGLOT").availableAmount(),T=this.state.hasTraitUnlocked("ENHANCED_POLYGLOT_II")&&3||this.state.hasTraitUnlocked("ENHANCED_POLYGLOT")&&2||1,S=[{kind:"counter",name:C({en:"AF/UI",zh:"冰火层数",ja:"AF/UB"}),color:l>0?t.blm.astralFire:t.blm.umbralIce,currentStacks:l>0?l:r,maxStacks:3},{kind:"counter",name:C({en:"hearts",zh:"冰针",ja:"アンブラルハート"}),color:t.blm.umbralHeart,currentStacks:d,maxStacks:3},{kind:"counter",name:C({en:"paradox",zh:"悖论",ja:"パラドックス"}),color:t.blm.paradox,currentStacks:h,maxStacks:1}];return this.state.hasTraitUnlocked("ENHANCED_ASTRAL_FIRE")&&S.push({kind:"counter",name:C({en:"astral soul",zh:"星极魂",ja:"アストラルソウル"}),color:t.blm.astralSoul,currentStacks:E,maxStacks:6}),S.push({kind:"bar",name:C({en:"poly timer",zh:"通晓计时",ja:"エノキ継続時間"}),color:t.blm.polyTimer,progress:1-A/30,valueString:A.toFixed(3)},{kind:"counter",name:C({en:"poly stacks",zh:"通晓层数",ja:"ポリグロット"}),color:t.blm.polyStacks,currentStacks:R,maxStacks:T}),S}}const un=(e,t,n)=>{Ye("BLM",e,t,n??{})};un("POLYGLOT",3,{timeout:30,warnOnOvercap:!0});un("ASTRAL_FIRE",3);un("UMBRAL_ICE",3);un("UMBRAL_HEART",3);un("ASTRAL_SOUL",6);un("LEY_LINES",1,{timeout:20});un("ENOCHIAN",1);un("PARADOX",1);un("FIRESTARTER",1);un("THUNDERHEAD",1);un("THUNDER_III",1,{timeout:27});un("THUNDER_IV",1,{timeout:21});un("HIGH_THUNDER",1,{timeout:30});un("HIGH_THUNDER_II",1,{timeout:24});un("MANAWARD",1,{timeout:20});un("TRIPLECAST",3,{timeout:15.7});class Pw extends Xt{constructor(n){super(n);Z(this,"thunderTickOffset");n.initialResourceOverrides.some(h=>(h.type==="ASTRAL_FIRE"||h.type==="UMBRAL_ICE")&&h.stacks>0)&&this.gainStatus("ENOCHIAN"),this.thunderTickOffset=this.nonProcRng()*3;const l=this.hasTraitUnlocked("ENHANCED_POLYGLOT_II")&&3||this.hasTraitUnlocked("ENHANCED_POLYGLOT")&&2||1;this.resources.set(new sn("POLYGLOT",l,0,!0));const r=this.hasTraitUnlocked("ENHANCED_MANAFONT")&&100||120,d=this.hasTraitUnlocked("ENHANCED_SWIFTCAST")&&40||60;[new ke("cd_MANAFONT",r,1,1),new ke("cd_SWIFTCAST",d,1,1)].forEach(h=>this.cooldowns.set(h)),this.registerRecurringEvents([{reportName:C({en:"Thunder DoT",zh:"雷DoT"}),groupedEffects:[{effectName:"HIGH_THUNDER",appliedBy:["HIGH_THUNDER"]},{effectName:"HIGH_THUNDER_II",appliedBy:["HIGH_THUNDER_II"]},{effectName:"THUNDER_III",appliedBy:["THUNDER_III"]},{effectName:"THUNDER_IV",appliedBy:["THUNDER_IV"]}]}])}get statusPropsGenerator(){return new xw(this)}jobSpecificRegisterRecurringEvents(){const n=o=>{this.hasEnochian()&&o.gain(1),this.resources.addResourceEvent({rscType:"POLYGLOT",name:"gain polyglot if currently has enochian",delay:30,fnOnRsc:n})};n(this.resources.get("POLYGLOT"))}jobSpecificAddSpeedBuffCovers(n,o){this.hasResourceAvailable("LEY_LINES")&&o.cdName==="cd_GCD"&&n.addBuff(H.LeyLines)}captureManaRegenAmount(){return this.getFireStacks()>0?0:200}getFireStacks(){return this.resources.get("ASTRAL_FIRE").availableAmount()}getIceStacks(){return this.resources.get("UMBRAL_ICE").availableAmount()}getUmbralHearts(){return this.resources.get("UMBRAL_HEART").availableAmount()}getMP(){return this.resources.get("MANA").availableAmount()}switchToAForUI(n,o){console.assert(o>0);const l=this.resources.get("ASTRAL_FIRE"),r=this.resources.get("UMBRAL_ICE"),d=this.resources.get("UMBRAL_HEART"),h=this.resources.get("PARADOX"),E=this.resources.get("ASTRAL_SOUL");n==="ASTRAL_FIRE"?(l.availableAmount()===0&&this.gainStatus("THUNDERHEAD"),l.gain(o),this.hasTraitUnlocked("ASPECT_MASTERY_V")&&r.available(3)&&d.available(3)&&h.gain(1),r.consume(r.availableAmount())):n==="UMBRAL_ICE"&&(r.availableAmount()===0&&this.gainStatus("THUNDERHEAD"),r.gain(o),this.hasTraitUnlocked("ASPECT_MASTERY_V")&&l.available(3)&&h.gain(1),l.consume(l.availableAmount()),E.consume(E.availableAmount()))}gainUmbralMana(n=0){let o=0;switch(this.resources.get("UMBRAL_ICE").availableAmount()){case 1:o=2500;break;case 2:o=5e3;break;case 3:o=1e4;break;default:o=0;break}this.addEvent(new be("gain umbral mana",n,()=>{this.resources.get("MANA").gain(o)}))}captureManaCost(n,o,l){const r=this.getIceStacks(),d=this.getFireStacks(),h=this.getUmbralHearts();if(n==="PARADOX"&&this.getIceStacks()>0||n==="FIRE_III"&&this.hasResourceAvailable("FIRESTARTER"))return 0;let E=1;return o===Ie.Fire&&r>0||o===Ie.Ice&&(r>0||d>0)?E=0:o===Ie.Fire&&d>0&&h===0&&(E=2),l*E}captureSpellCastTimeAFUI(n,o){const l=this.config.adjustedCastTime(n,this.hasResourceAvailable("LEY_LINES")?15:void 0);let r=1;return(o===Ie.Fire&&this.getIceStacks()===3||o===Ie.Ice&&this.getFireStacks()===3)&&(r=.5),l*r}hasEnochian(){return this.hasResourceAvailable("ENOCHIAN")}startOrRefreshEnochian(){const n=this.resources.get("ENOCHIAN");n.available(1)||(this.resources.get("POLYGLOT").overrideTimer(this,30),n.gain(1))}loseEnochian(){["ENOCHIAN","ASTRAL_FIRE","UMBRAL_ICE","UMBRAL_HEART","PARADOX","ASTRAL_SOUL"].forEach(o=>this.tryConsumeResource(o,!0))}}const jO=e=>e.resources.get("LEY_LINES").availableAmountIncludingDisabled()>0,$T=e=>e.hasResourceAvailable("PARADOX"),YO=e=>e.hasTraitUnlocked("ENHANCED_ENOCHIAN_IV")&&1.27||e.hasTraitUnlocked("ENHANCED_ENOCHIAN_III")&&1.22||e.hasTraitUnlocked("ENHANCED_ENOCHIAN_II")&&1.15||1.1,ia=(e,t,n)=>{const o=n.aspect??Ie.Other,l=Ue((r,d)=>{n.baseCastTime===0||e==="DESPAIR"&&r.hasTraitUnlocked("ENHANCED_ASTRAL_FIRE")||e==="FOUL"&&r.hasTraitUnlocked("ENHANCED_FOUL")||e==="FIRE_III"&&r.hasResourceAvailable("FIRESTARTER")||r.tryConsumeResource("SWIFTCAST")||r.tryConsumeResource("TRIPLECAST")},(r,d)=>{r.getFireStacks()>0&&o===Ie.Fire&&!["DESPAIR","FLARE_STAR","FLARE"].includes(e)&&!(e==="FIRE_III"&&r.hasResourceAvailable("FIRESTARTER"))&&r.tryConsumeResource("UMBRAL_HEART"),o===Ie.Ice&&r.gainUmbralMana(n.applicationDelay)},n.onConfirm);return Qn("BLM",e,t,{...n,aspect:o,castTime:r=>r.captureSpellCastTimeAFUI(n.baseCastTime,o),recastTime:r=>r.config.adjustedGCD(2.5,r.hasResourceAvailable("LEY_LINES")?15:0),manaCost:r=>r.captureManaCost(e,o,n.baseManaCost),potency:r=>n.basePotency,isInstantFn:r=>e==="DESPAIR"&&r.hasTraitUnlocked("ENHANCED_ASTRAL_FIRE")||e==="FOUL"&&r.hasTraitUnlocked("ENHANCED_FOUL")||e==="FIRE_III"&&r.hasResourceAvailable("FIRESTARTER")||r.hasResourceAvailable("SWIFTCAST")||r.hasResourceAvailable("TRIPLECAST"),onConfirm:l,jobPotencyModifiers:r=>{const d=[];if(r.hasResourceAvailable("ENOCHIAN")){const A=YO(r);d.push({kind:"multiplier",source:U.ENO,potencyFactor:A})}const h=r.getIceStacks(),E=r.getFireStacks();return h===1?o===Ie.Fire?d.push({kind:"multiplier",source:U.UI1,potencyFactor:.9}):o===Ie.Ice&&d.push({kind:"multiplier",source:U.UI1,potencyFactor:1}):h===2?o===Ie.Fire?d.push({kind:"multiplier",source:U.UI2,potencyFactor:.8}):o===Ie.Ice&&d.push({kind:"multiplier",source:U.UI2,potencyFactor:1}):h===3&&(o===Ie.Fire?d.push({kind:"multiplier",source:U.UI3,potencyFactor:.7}):o===Ie.Ice&&d.push({kind:"multiplier",source:U.UI3,potencyFactor:1})),E===1?o===Ie.Ice?d.push({kind:"multiplier",source:U.AF1,potencyFactor:.9}):o===Ie.Fire&&d.push({kind:"multiplier",source:U.AF1,potencyFactor:1.4}):E===2?o===Ie.Ice?d.push({kind:"multiplier",source:U.AF2,potencyFactor:.8}):o===Ie.Fire&&d.push({kind:"multiplier",source:U.AF2,potencyFactor:1.6}):E===3&&(o===Ie.Ice?d.push({kind:"multiplier",source:U.AF3,potencyFactor:.7}):o===Ie.Fire&&d.push({kind:"multiplier",source:U.AF3,potencyFactor:1.8})),d}})},Ds=(e,t,n,o)=>ot("BLM",e,t,n,o);ia("BLIZZARD",1,{aspect:Ie.Ice,baseCastTime:2,baseManaCost:400,basePotency:180,applicationDelay:.846,onConfirm:(e,t)=>{e.getFireStacks()===0?(e.switchToAForUI("UMBRAL_ICE",1),e.startOrRefreshEnochian()):(e.resources.get("ENOCHIAN").removeTimer(),e.loseEnochian())},replaceIf:[{newSkill:"PARADOX",condition:$T}]});ia("FIRE",2,{aspect:Ie.Fire,baseCastTime:2,baseManaCost:800,basePotency:180,applicationDelay:1.871,onConfirm:(e,t)=>{e.triggersEffect(.4,!0)&&e.gainStatus("FIRESTARTER"),e.getIceStacks()===0?(e.switchToAForUI("ASTRAL_FIRE",1),e.startOrRefreshEnochian()):(e.resources.get("ENOCHIAN").removeTimer(),e.loseEnochian())},replaceIf:[{newSkill:"PARADOX",condition:$T}]});Ds("TRANSPOSE",4,"cd_TRANSPOSE",{applicationDelay:0,cooldown:5,validateAttempt:e=>e.getFireStacks()>0||e.getIceStacks()>0,onApplication:(e,t)=>{(e.getFireStacks()!==0||e.getIceStacks()!==0)&&(e.switchToAForUI(e.getFireStacks()>0?"UMBRAL_ICE":"ASTRAL_FIRE",1),e.startOrRefreshEnochian())}});const Qh=(e,t)=>(n,o)=>{let l=0;switch(e){case"HIGH_THUNDER":l=60;break;case"THUNDER_III":l=50;break;case"THUNDER_IV":l=35;break;case"HIGH_THUNDER_II":l=40;break}const r=[];if(n.hasResourceAvailable("ENOCHIAN")){const d=YO(n);r.push({kind:"multiplier",source:U.ENO,potencyFactor:d})}console.assert(l>0,`${e} was applied as a Thunder DoT`),n.addDoTPotencies({node:o,effectName:t,skillName:e,tickPotency:l,speedStat:"sps",aspect:Ie.Lightning,modifiers:r}),n.tryConsumeResource("THUNDERHEAD")};ia("THUNDER_III",45,{aspect:Ie.Lightning,baseCastTime:0,baseManaCost:0,basePotency:120,applicationDelay:1.03,validateAttempt:e=>e.hasResourceAvailable("THUNDERHEAD"),onConfirm:Qh("THUNDER_III","THUNDER_III"),onApplication:(e,t)=>e.applyDoT("THUNDER_III",t),autoUpgrade:{trait:"THUNDER_MASTERY_III",otherSkill:"HIGH_THUNDER"},highlightIf:e=>e.hasResourceAvailable("THUNDERHEAD")});ze("BLM","MANAWARD",30,"cd_MANAWARD",{rscType:"MANAWARD",applicationDelay:1.114,cooldown:120});Ds("MANAFONT",30,"cd_MANAFONT",{applicationDelay:.2,cooldown:100,validateAttempt:e=>e.getFireStacks()>0,onConfirm:(e,t)=>{e=e,e.resources.get("ASTRAL_FIRE").gain(3),e.resources.get("UMBRAL_HEART").gain(3),e.hasTraitUnlocked("ASPECT_MASTERY_V")&&e.resources.get("PARADOX").gain(1),e.gainStatus("THUNDERHEAD"),e.startOrRefreshEnochian()},onApplication:(e,t)=>{e.resources.get("MANA").gain(1e4)}});ia("FIRE_III",35,{aspect:Ie.Fire,baseCastTime:3.5,baseManaCost:2e3,basePotency:290,applicationDelay:1.292,onConfirm:(e,t)=>{e.tryConsumeResource("FIRESTARTER"),e.switchToAForUI("ASTRAL_FIRE",3),e.startOrRefreshEnochian()},highlightIf:e=>e.hasResourceAvailable("FIRESTARTER")});ia("BLIZZARD_III",35,{aspect:Ie.Ice,baseCastTime:3.5,baseManaCost:800,basePotency:290,applicationDelay:.89,onConfirm:(e,t)=>{e.switchToAForUI("UMBRAL_ICE",3),e.startOrRefreshEnochian()}});ia("FREEZE",40,{aspect:Ie.Ice,baseCastTime:2,baseManaCost:1e3,basePotency:120,applicationDelay:.664,falloff:0,validateAttempt:e=>e.getIceStacks()>0,onConfirm:(e,t)=>e.resources.get("UMBRAL_HEART").gain(3)});ia("FLARE",50,{aspect:Ie.Fire,baseCastTime:2,baseManaCost:0,basePotency:240,applicationDelay:1.157,falloff:.3,validateAttempt:e=>e.getFireStacks()>0&&e.getMP()>=800,onConfirm:(e,t)=>{const n=e.resources.get("UMBRAL_HEART"),o=e.resources.get("MANA"),l=n.available(1)?o.availableAmount()*.66:o.availableAmount();e.resources.get("MANA").consume(l),n.consume(n.availableAmount()),e.resources.get("ASTRAL_FIRE").gain(3),e.hasTraitUnlocked("ENHANCED_ASTRAL_FIRE")&&e.resources.get("ASTRAL_SOUL").gain(3),e.startOrRefreshEnochian()}});ze("BLM","LEY_LINES",52,"cd_LEY_LINES",{rscType:"LEY_LINES",applicationDelay:.49,cooldown:120,maxCharges:2,validateAttempt:e=>!(e.resources.get("LEY_LINES").availableAmountIncludingDisabled()>0),onApplication:(e,t)=>{e.resources.get("LEY_LINES").enabled=!0},replaceIf:[{newSkill:"RETRACE",condition:jO}]});ia("BLIZZARD_IV",58,{aspect:Ie.Ice,baseCastTime:2,baseManaCost:800,basePotency:300,applicationDelay:1.156,validateAttempt:e=>e.getIceStacks()>0,onConfirm:(e,t)=>e.resources.get("UMBRAL_HEART").gain(3)});ia("FIRE_IV",60,{aspect:Ie.Fire,baseCastTime:2,baseManaCost:800,basePotency:300,applicationDelay:1.159,validateAttempt:e=>e.getFireStacks()>0,onConfirm:(e,t)=>{e.hasTraitUnlocked("ENHANCED_ASTRAL_FIRE")&&e.resources.get("ASTRAL_SOUL").gain(1)}});Ds("BETWEEN_THE_LINES",62,"cd_BETWEEN_THE_LINES",{applicationDelay:0,cooldown:3,animationLock:Vt,validateAttempt:e=>e.resources.get("LEY_LINES").availableAmountIncludingDisabled()>0,onConfirm:(e,t)=>{e.resources.get("LEY_LINES").enabled=!0}});Ds("AETHERIAL_MANIPULATION",50,"cd_AETHERIAL_MANIPULATION",{applicationDelay:0,cooldown:10,animationLock:Vt});Ds("TRIPLECAST",66,"cd_TRIPLECAST",{applicationDelay:0,cooldown:60,maxCharges:2,onApplication:(e,t)=>e.gainStatus("TRIPLECAST",3)});ia("FOUL",70,{baseCastTime:2,baseManaCost:0,basePotency:600,falloff:.25,applicationDelay:1.158,validateAttempt:e=>e.hasResourceAvailable("POLYGLOT"),onConfirm:(e,t)=>e.resources.get("POLYGLOT").consume(1),highlightIf:e=>e.hasResourceAvailable("POLYGLOT")});ia("DESPAIR",72,{aspect:Ie.Fire,baseCastTime:2,baseManaCost:0,basePotency:350,applicationDelay:.556,validateAttempt:e=>e.getFireStacks()>0&&e.getMP()>=800,onConfirm:(e,t)=>{const n=e.resources.get("MANA"),o=n.availableAmount();console.assert(o>=800,`tried to confirm despair at ${o} MP`),n.consume(o),e.resources.get("ASTRAL_FIRE").gain(3),e.startOrRefreshEnochian()}});ia("UMBRAL_SOUL",35,{aspect:Ie.Ice,baseCastTime:0,baseManaCost:0,basePotency:0,applicationDelay:.633,validateAttempt:e=>e.getIceStacks()>0,onConfirm:(e,t)=>{e.resources.get("UMBRAL_ICE").gain(1),e.resources.get("UMBRAL_HEART").gain(1)}});ia("XENOGLOSSY",80,{baseCastTime:0,baseManaCost:0,basePotency:890,applicationDelay:.63,validateAttempt:e=>e.hasResourceAvailable("POLYGLOT"),onConfirm:(e,t)=>e.resources.get("POLYGLOT").consume(1),highlightIf:e=>e.hasResourceAvailable("POLYGLOT")});ia("FIRE_II",18,{aspect:Ie.Fire,baseCastTime:3,baseManaCost:1500,basePotency:80,falloff:0,applicationDelay:1.154,autoUpgrade:{trait:"ASPECT_MASTERY_IV",otherSkill:"HIGH_FIRE_II"},onConfirm:(e,t)=>{e.switchToAForUI("ASTRAL_FIRE",3),e.startOrRefreshEnochian()}});ia("BLIZZARD_II",12,{aspect:Ie.Ice,baseCastTime:3,baseManaCost:800,basePotency:80,falloff:0,applicationDelay:1.158,autoUpgrade:{trait:"ASPECT_MASTERY_IV",otherSkill:"HIGH_BLIZZARD_II"},onConfirm:(e,t)=>{e.switchToAForUI("UMBRAL_ICE",3),e.startOrRefreshEnochian()}});ia("HIGH_FIRE_II",82,{aspect:Ie.Fire,baseCastTime:3,baseManaCost:1500,basePotency:100,falloff:0,applicationDelay:1.154,autoDowngrade:{trait:"ASPECT_MASTERY_IV",otherSkill:"FIRE_II"},onConfirm:(e,t)=>{e.switchToAForUI("ASTRAL_FIRE",3),e.startOrRefreshEnochian()}});ia("HIGH_BLIZZARD_II",82,{aspect:Ie.Ice,baseCastTime:3,baseManaCost:800,basePotency:100,falloff:0,applicationDelay:1.158,autoDowngrade:{trait:"ASPECT_MASTERY_IV",otherSkill:"BLIZZARD_II"},onConfirm:(e,t)=>{e.switchToAForUI("UMBRAL_ICE",3),e.startOrRefreshEnochian()}});Ds("AMPLIFIER",86,"cd_AMPLIFIER",{applicationDelay:0,cooldown:120,validateAttempt:e=>e.getFireStacks()>0||e.getIceStacks()>0,onApplication:(e,t)=>{e.resources.get("POLYGLOT").gain(1)}});ia("PARADOX",90,{baseCastTime:0,baseManaCost:1600,basePotency:540,applicationDelay:.624,validateAttempt:$T,onConfirm:(e,t)=>{e.resources.get("PARADOX").consume(1),e.getFireStacks()>0?e.gainStatus("FIRESTARTER"):e.getIceStacks()===0&&console.error("cannot cast Paradox outside of AF/UI")},replaceIf:[{newSkill:"BLIZZARD",condition:e=>!e.hasResourceAvailable("PARADOX")&&e.getIceStacks()>0},{newSkill:"FIRE",condition:e=>!e.hasResourceAvailable("PARADOX")&&e.getFireStacks()>0}],startOnHotbar:!1,highlightIf:e=>!0});ia("HIGH_THUNDER",92,{aspect:Ie.Lightning,baseCastTime:0,baseManaCost:0,basePotency:150,applicationDelay:.757,validateAttempt:e=>e.hasResourceAvailable("THUNDERHEAD"),onConfirm:Qh("HIGH_THUNDER","HIGH_THUNDER"),onApplication:(e,t)=>e.applyDoT("HIGH_THUNDER",t),autoDowngrade:{trait:"THUNDER_MASTERY_III",otherSkill:"THUNDER_III"},highlightIf:e=>e.hasResourceAvailable("THUNDERHEAD")});ia("FLARE_STAR",100,{aspect:Ie.Fire,baseCastTime:2,baseManaCost:0,basePotency:500,falloff:.65,applicationDelay:.622,validateAttempt:e=>e.hasResourceAvailable("ASTRAL_SOUL",6),onConfirm:(e,t)=>e.tryConsumeResource("ASTRAL_SOUL",!0),highlightIf:e=>e.hasResourceAvailable("ASTRAL_SOUL",6)});ia("THUNDER_IV",64,{aspect:Ie.Lightning,baseCastTime:0,baseManaCost:0,basePotency:80,falloff:0,applicationDelay:1.16,validateAttempt:e=>e.hasResourceAvailable("THUNDERHEAD"),onConfirm:Qh("THUNDER_IV","THUNDER_IV"),onApplication:(e,t)=>e.applyDoT("THUNDER_IV",t),autoUpgrade:{trait:"THUNDER_MASTERY_III",otherSkill:"HIGH_THUNDER_II"},highlightIf:e=>e.hasResourceAvailable("THUNDERHEAD")});ia("HIGH_THUNDER_II",92,{aspect:Ie.Lightning,baseCastTime:0,baseManaCost:0,basePotency:100,falloff:0,applicationDelay:.8,validateAttempt:e=>e.hasResourceAvailable("THUNDERHEAD"),onConfirm:Qh("HIGH_THUNDER_II","HIGH_THUNDER_II"),onApplication:(e,t)=>e.applyDoT("HIGH_THUNDER_II",t),autoDowngrade:{trait:"THUNDER_MASTERY_III",otherSkill:"THUNDER_IV"},highlightIf:e=>e.hasResourceAvailable("THUNDERHEAD")});Ds("RETRACE",96,"cd_RETRACE",{applicationDelay:0,cooldown:40,validateAttempt:jO,onConfirm:(e,t)=>{const n=e.resources.get("LEY_LINES");n.enabled=!0,console.assert(n.pendingChange!==void 0,"LL should def have a timer when Retrace is used"),n.pendingChange.timeTillEvent=Math.floor(n.pendingChange.timeTillEvent)+.5},startOnHotbar:!1});const KO=["CAUSTIC_BITE","STORMBITE"],ww=Object.keys(rT).filter(e=>!KO.includes(e));Object.keys(rT).forEach(e=>Ft(e,`BRD/${Ge[e].name}.png`));class Gw extends Wt{jobSpecificOtherTargetedBuffViewProps(){return[...KO.map(t=>this.makeCommonTimer(t,!1))]}jobSpecificSelfTargetedBuffViewProps(){return[...ww.map(t=>this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){const n=this.state.resources,o=n.get("PITCH_PERFECT"),l=n.get("REPERTOIRE"),r=[{kind:"counter",name:C({en:"Pitch Perfect"}),color:t.brd.pitchPerfect,currentStacks:o.availableAmount(),maxStacks:o.maxValue},{kind:"counter",name:C({en:"Paeon Repertoire"}),color:t.brd.repertoire,currentStacks:l.availableAmount(),maxStacks:l.maxValue}];if(this.state.hasTraitUnlocked("SOUL_VOICE")){const d=n.get("SOUL_VOICE");r.push({kind:"bar",name:C({en:"Soul Voice"}),color:t.brd.soulVoice,progress:d.availableAmount()/d.maxValue,valueString:d.availableAmount().toFixed(0)})}return this.state.hasTraitUnlocked("MINSTRELS_CODA")&&r.push({kind:"coda",name:C({en:"Coda"}),hasWanderers:this.state.hasResourceAvailable("WANDERERS_CODA"),hasMages:this.state.hasResourceAvailable("MAGES_CODA"),hasArmys:this.state.hasResourceAvailable("ARMYS_CODA"),wanderersColor:t.brd.wanderersCoda,magesColor:t.brd.magesCoda,armysColor:t.brd.armysCoda}),r}}const Mt=(e,t,n)=>{Ye("BRD",e,t,n??{})};Mt("SOUL_VOICE",100,{warnOnOvercap:!0});Mt("PITCH_PERFECT",3);Mt("REPERTOIRE",4);Mt("WANDERERS_CODA",1,{warnOnOvercap:!0});Mt("MAGES_CODA",1,{warnOnOvercap:!0});Mt("ARMYS_CODA",1,{warnOnOvercap:!0});Mt("ETHOS_REPERTOIRE",4);Mt("MUSE_REPERTOIRE",4);Mt("HAWKS_EYE",1,{timeout:30});Mt("RAGING_STRIKES",1,{timeout:20});Mt("BARRAGE",1,{timeout:10});Mt("ARMYS_MUSE",4,{timeout:10});Mt("ARMYS_ETHOS",4,{timeout:30});Mt("BLAST_ARROW_READY",1,{timeout:10});Mt("RESONANT_ARROW_READY",1,{timeout:30});Mt("RADIANT_ENCORE_READY",1,{timeout:30});Mt("MAGES_BALLAD",1,{timeout:45});Mt("ARMYS_PAEON",1,{timeout:45});Mt("WANDERERS_MINUET",1,{timeout:45});Mt("BATTLE_VOICE",1,{timeout:20});Mt("WARDENS_PAEAN",1,{timeout:30});Mt("TROUBADOUR",1,{timeout:15});Mt("NATURES_MINNE",1,{timeout:15});Mt("RADIANT_FINALE",1,{timeout:20});Mt("RADIANT_CODA",3);Mt("CAUSTIC_BITE",1,{timeout:45});Mt("STORMBITE",1,{timeout:45});const jp=["WANDERERS_MINUET","MAGES_BALLAD","ARMYS_PAEON"],Bw=["REFULGENT_ARROW","SHADOWBITE","WIDE_VOLLEY"];class Fw extends Xt{constructor(t){super(t),this.hasTraitUnlocked("ENHANCED_BLOODLETTER")||this.cooldowns.set(new ke("cd_HEARTBREAK_SHOT",15,2,2)),this.hasTraitUnlocked("ENHANCED_TROUBADOUR")||this.cooldowns.set(new ke("cd_TROUBADOUR",120,1,1)),this.registerRecurringEvents([{reportName:je("STORMBITE"),groupedEffects:[{effectName:"STORMBITE",appliedBy:["STORMBITE","IRON_JAWS"]}]},{reportName:je("CAUSTIC_BITE"),groupedEffects:[{effectName:"CAUSTIC_BITE",appliedBy:["CAUSTIC_BITE","IRON_JAWS"]}]}])}get statusPropsGenerator(){return new Gw(this)}jobSpecificAddDamageBuffCovers(t,n){switch(this.hasResourceAvailable("RAGING_STRIKES")&&t.addBuff(H.RagingStrikes),this.hasResourceAvailable("BATTLE_VOICE")&&t.addBuff(H.BattleVoice),this.resources.get("RADIANT_FINALE").availableAmount()){case 1:t.addBuff(H.RadiantFinale1);break;case 2:t.addBuff(H.RadiantFinale2);break;case 3:t.addBuff(H.RadiantFinale3);break}this.hasResourceAvailable("BARRAGE")&&Bw.includes(n.name)&&t.addBuff(H.Barrage),this.hasResourceAvailable("WANDERERS_MINUET")?t.addBuff(H.WanderersMinuet):this.hasResourceAvailable("MAGES_BALLAD")?t.addBuff(H.MagesBallad):this.hasResourceAvailable("ARMYS_PAEON")&&t.addBuff(H.ArmysPaeon)}songTick(t){this.resourceIsSong(t)&&this.hasResourceAvailable(t)&&(this.triggersEffect(.8)&&this.gainRepertoireEffect(t),this.resources.timeTillReady(t)>3+Sa.epsilon&&this.addEvent(new be(`${t} tick`,3,()=>{this.songTick(t)})))}gainRepertoireEffect(t){if(t||(this.hasResourceAvailable("WANDERERS_MINUET")?t="WANDERERS_MINUET":this.hasResourceAvailable("MAGES_BALLAD")?t="MAGES_BALLAD":this.hasResourceAvailable("ARMYS_PAEON")&&(t="ARMYS_PAEON")),!!t&&this.resourceIsSong(t)){switch(t){case"WANDERERS_MINUET":this.resources.get("PITCH_PERFECT").gain(1);break;case"MAGES_BALLAD":this.cooldowns.get("cd_HEARTBREAK_SHOT").restore(7.5);break;case"ARMYS_PAEON":this.resources.get("REPERTOIRE").gain(1);break}this.hasTraitUnlocked("SOUL_VOICE")&&this.resources.get("SOUL_VOICE").gain(5)}}resourceIsSong(t){return jp.includes(t)}beginSong(t){if(this.resourceIsSong(t)){if(jp.forEach(n=>this.tryExpireSong(n)),t!=="ARMYS_PAEON"&&this.hasResourceAvailable("ARMYS_ETHOS")){const n=this.resources.get("ETHOS_REPERTOIRE").availableAmount();this.resources.get("MUSE_REPERTOIRE").gain(n),this.tryConsumeResource("ARMYS_ETHOS"),this.tryConsumeResource("ETHOS_REPERTOIRE",!0),this.gainStatus("ARMYS_MUSE")}if(this.hasTraitUnlocked("MINSTRELS_CODA")){const n=t==="WANDERERS_MINUET"?"WANDERERS_CODA":t==="MAGES_BALLAD"?"MAGES_CODA":"ARMYS_CODA";this.resources.get(n).gain(1)}this.resources.get(t).gain(1),this.resources.addResourceEvent({rscType:t,name:"drop "+t,delay:this.getStatusDuration(t),fnOnRsc:n=>this.tryExpireSong(t)}),this.addEvent(new be(`${t} tick`,3,()=>{this.songTick(t)}))}}tryExpireSong(t){if(this.resourceIsSong(t)&&this.hasResourceAvailable(t)){switch(t){case"WANDERERS_MINUET":this.tryConsumeResource("PITCH_PERFECT",!0);break;case"ARMYS_PAEON":if(this.hasTraitUnlocked("ENHANCED_ARMYS_PAEON")){const n=this.resources.get("REPERTOIRE").availableAmount();n>0&&(this.resources.get("ETHOS_REPERTOIRE").gain(n),this.gainStatus("ARMYS_ETHOS")),this.tryConsumeResource("MUSE_REPERTOIRE",!0)}this.tryConsumeResource("REPERTOIRE",!0);break}this.tryConsumeResource(t)}}getCodaCount(){const t=this.resources.get("WANDERERS_CODA").availableAmount(),n=this.resources.get("MAGES_CODA").availableAmount(),o=this.resources.get("ARMYS_CODA").availableAmount();return t+n+o}getJobPotencyModifiers(t){const n=[];if([{rscType:"WANDERERS_MINUET",mod:X.WanderersMinuet},{rscType:"MAGES_BALLAD",mod:X.MagesBallad},{rscType:"ARMYS_PAEON",mod:X.ArmysPaeon},{rscType:"RAGING_STRIKES",mod:X.RagingStrikes},{rscType:"BATTLE_VOICE",mod:X.BattleVoice}].forEach(l=>{this.hasResourceAvailable(l.rscType)&&n.push(l.mod)}),this.hasResourceAvailable("RADIANT_FINALE")){const l=this.resources.get("RADIANT_CODA").availableAmount();l===3?n.push(X.RadiantFinaleThreeCoda):l===2?n.push(X.RadiantFinaleTwoCoda):l===1&&n.push(X.RadiantFinaleOneCoda)}if(this.hasResourceAvailable("BARRAGE"))switch(t){case"REFULGENT_ARROW":n.push(X.BarrageRefulgent);break;case"SHADOWBITE":n.push(X.BarrageShadowbite);break;case"WIDE_VOLLEY":n.push(X.BarrageWideVolley);break}return n}getSpeedModifier(t){if(t==="ARMYS_PAEON")return this.resources.get("REPERTOIRE").availableAmount()*4;if(t==="ARMYS_MUSE"){const n=this.resources.get("MUSE_REPERTOIRE").availableAmount();return n===4?12:n===3?4:n}return 0}}const $n=(e,t,n)=>na("BRD",e,t,{...n,recastTime:o=>{let l;o.hasResourceAvailable("ARMYS_PAEON")?l="ARMYS_PAEON":o.hasResourceAvailable("ARMYS_MUSE")&&(l="ARMYS_MUSE");const r=o.getSpeedModifier(l);return o.config.adjustedSksGCD(2.5,r)},jobPotencyModifiers:o=>o.getJobPotencyModifiers(e)}),Ul=(e,t,n,o)=>ot("BRD",e,t,n,{...o,jobPotencyModifiers:l=>l.getJobPotencyModifiers(e)}),ys=(e,t,n,o)=>ze("BRD",e,t,n,o);$n("HEAVY_SHOT",1,{potency:160,applicationDelay:1.47,onApplication:e=>e.maybeGainProc("HAWKS_EYE",.2),autoUpgrade:{trait:"HEAVY_SHOT_MASTERY",otherSkill:"BURST_SHOT"}});$n("BURST_SHOT",1,{startOnHotbar:!1,potency:[["NEVER",200],["RANGED_MASTERY",220]],applicationDelay:1.47,onApplication:e=>e.maybeGainProc("HAWKS_EYE",.35)});$n("REFULGENT_ARROW",70,{potency:[["NEVER",260],["RANGED_MASTERY",280]],applicationDelay:1.47,onConfirm:e=>{e.hasResourceAvailable("BARRAGE")?e.tryConsumeResource("BARRAGE"):e.tryConsumeResource("HAWKS_EYE")},validateAttempt:e=>e.hasResourceAvailable("HAWKS_EYE")||e.hasResourceAvailable("BARRAGE"),highlightIf:e=>e.hasResourceAvailable("HAWKS_EYE")||e.hasResourceAvailable("BARRAGE")});const BR=[{skillName:"CAUSTIC_BITE",dotName:"CAUSTIC_BITE",initialPotency:150,tickPotency:20},{skillName:"STORMBITE",dotName:"STORMBITE",initialPotency:100,tickPotency:25}];BR.forEach(e=>{$n(e.skillName,1,{potency:e.initialPotency,applicationDelay:1.29,onConfirm:(t,n)=>t.addDoTPotencies({node:n,effectName:e.dotName,skillName:e.skillName,tickPotency:e.tickPotency,speedStat:"sks",modifiers:t.getJobPotencyModifiers(e.skillName)}),onApplication:(t,n)=>{t.applyDoT(e.dotName,n),t.hasTraitUnlocked("BITE_MASTERY_II")&&t.maybeGainProc("HAWKS_EYE",.35)}})});$n("IRON_JAWS",56,{potency:100,applicationDelay:.67,onConfirm:(e,t)=>{const n=BR.map(o=>e.hasResourceAvailable(o.dotName));e.addEvent(new be("iron jaws dot refresh",.67,()=>{BR.forEach((o,l)=>{e.refreshDoT({node:t,effectName:o.dotName,tickPotency:o.tickPotency,skillName:"IRON_JAWS",speedStat:"sks",modifiers:e.getJobPotencyModifiers("IRON_JAWS")},n[l])}),e.hasTraitUnlocked("BITE_MASTERY_II")&&e.maybeGainProc("HAWKS_EYE",.35)}))}});$n("APEX_ARROW",80,{potency:e=>{const t=e.resources.get("SOUL_VOICE"),n=20,o=e.hasTraitUnlocked("RANGED_MASTERY")?120:100,l=e.hasTraitUnlocked("RANGED_MASTERY")?600:500,r=1*(t.availableAmount()-n)/(t.maxValue-n);return(l-o)*r+o},falloff:0,applicationDelay:1.07,onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_APEX_ARROW")&&e.resources.get("SOUL_VOICE").availableAmount()>=80&&e.gainStatus("BLAST_ARROW_READY"),e.tryConsumeResource("SOUL_VOICE",!0)},validateAttempt:e=>e.hasResourceAvailable("SOUL_VOICE",20),highlightIf:e=>e.hasResourceAvailable("SOUL_VOICE",80),replaceIf:[{newSkill:"BLAST_ARROW",condition:e=>e.hasResourceAvailable("BLAST_ARROW_READY")}]});$n("BLAST_ARROW",86,{startOnHotbar:!1,potency:600,falloff:.5,applicationDelay:1.65,validateAttempt:e=>e.hasResourceAvailable("BLAST_ARROW_READY"),highlightIf:e=>e.hasResourceAvailable("BLAST_ARROW_READY"),onConfirm:e=>e.tryConsumeResource("BLAST_ARROW_READY")});Ul("EMYPREAL_ARROW",54,"cd_EMPYREAL_ARROW",{potency:[["NEVER",240],["RANGED_MASTERY",260]],cooldown:15,applicationDelay:1.03,onConfirm:e=>e.gainRepertoireEffect()});Ul("BLOODLETTER",12,"cd_HEARTBREAK_SHOT",{potency:130,cooldown:15,maxCharges:3,applicationDelay:1.65,autoUpgrade:{otherSkill:"HEARTBREAK_SHOT",trait:"BLOODLETTER_MASTERY"}});Ul("HEARTBREAK_SHOT",92,"cd_HEARTBREAK_SHOT",{startOnHotbar:!1,potency:180,cooldown:15,maxCharges:3,applicationDelay:1.65});Ul("SIDEWINDER",60,"cd_SIDEWINDER",{potency:[["NEVER",320],["RANGED_MASTERY",400]],cooldown:60,applicationDelay:.53});const zw=[{skillName:"WANDERERS_MINUET",song:"WANDERERS_MINUET",skillLevel:52,cdName:"cd_WANDERERS_MINUET",replaceIf:[{newSkill:"PITCH_PERFECT",condition:e=>e.hasResourceAvailable("WANDERERS_MINUET")}]},{skillName:"MAGES_BALLAD",song:"MAGES_BALLAD",skillLevel:30,cdName:"cd_MAGES_BALLAD"},{skillName:"ARMYS_PAEON",song:"ARMYS_PAEON",skillLevel:40,cdName:"cd_ARMYS_PAEON"}];zw.forEach(e=>{Ul(e.skillName,e.skillLevel,e.cdName,{applicationDelay:0,requiresCombat:!0,cooldown:120,replaceIf:e.replaceIf,onConfirm:t=>t.beginSong(e.song)})});Ul("PITCH_PERFECT",52,"cd_PITCH_PERFECT",{startOnHotbar:!1,applicationDelay:.8,cooldown:1,potency:e=>{const t=e.resources.get("PITCH_PERFECT").availableAmount();return t===3?360:t===2?220:100},falloff:.5,onConfirm:e=>e.tryConsumeResource("PITCH_PERFECT",!0),validateAttempt:e=>e.hasResourceAvailable("WANDERERS_MINUET")&&e.hasResourceAvailable("PITCH_PERFECT"),highlightIf:e=>e.hasResourceAvailable("WANDERERS_MINUET")&&e.hasResourceAvailable("PITCH_PERFECT")});ys("BARRAGE",38,"cd_BARRAGE",{rscType:"BARRAGE",applicationDelay:0,cooldown:120,onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_BARRAGE")&&e.gainStatus("RESONANT_ARROW_READY")},replaceIf:[{newSkill:"RESONANT_ARROW",condition:e=>e.hasResourceAvailable("RESONANT_ARROW_READY")}]});$n("RESONANT_ARROW",96,{startOnHotbar:!1,potency:640,falloff:.5,applicationDelay:1.16,onConfirm:e=>e.tryConsumeResource("RESONANT_ARROW_READY"),validateAttempt:e=>e.hasResourceAvailable("RESONANT_ARROW_READY"),highlightIf:e=>e.hasResourceAvailable("RESONANT_ARROW_READY")});ys("RADIANT_FINALE",90,"cd_RADIANT_FINALE",{rscType:"RADIANT_FINALE",applicationDelay:.62,cooldown:110,onConfirm:e=>{const t=e.getCodaCount();e.resources.get("RADIANT_CODA").overrideCurrentValue(t),e.tryConsumeResource("WANDERERS_CODA"),e.tryConsumeResource("MAGES_CODA"),e.tryConsumeResource("ARMYS_CODA"),e.hasTraitUnlocked("ENHANCED_RADIANT_FINALE")&&e.gainStatus("RADIANT_ENCORE_READY")},validateAttempt:e=>e.getCodaCount()>0,replaceIf:[{newSkill:"RADIANT_ENCORE",condition:e=>e.hasResourceAvailable("RADIANT_ENCORE_READY")}]});$n("RADIANT_ENCORE",100,{startOnHotbar:!1,potency:e=>{const t=e.resources.get("RADIANT_CODA").availableAmount();return t===3?1e3:t===2?700:600},falloff:.5,applicationDelay:1.96,onConfirm:e=>e.tryConsumeResource("RADIANT_ENCORE_READY"),validateAttempt:e=>e.hasResourceAvailable("RADIANT_ENCORE_READY"),highlightIf:e=>e.hasResourceAvailable("RADIANT_ENCORE_READY")});ys("RAGING_STRIKES",4,"cd_RAGING_STRIKES",{rscType:"RAGING_STRIKES",applicationDelay:.53,cooldown:120});ys("BATTLE_VOICE",50,"cd_BATTLE_VOICE",{rscType:"BATTLE_VOICE",applicationDelay:.62,cooldown:120});$n("QUICK_NOCK",18,{potency:110,applicationDelay:1.11,onApplication:e=>e.maybeGainProc("HAWKS_EYE",.2),falloff:0,autoUpgrade:{trait:"QUICK_NOCK_MASTERY",otherSkill:"LADONSBITE"}});$n("LADONSBITE",82,{startOnHotbar:!1,potency:140,falloff:0,applicationDelay:1.11,onApplication:e=>e.maybeGainProc("HAWKS_EYE",.35)});$n("WIDE_VOLLEY",18,{potency:140,falloff:0,applicationDelay:1.43,onConfirm:e=>{e.hasResourceAvailable("BARRAGE")?e.tryConsumeResource("BARRAGE"):e.tryConsumeResource("HAWKS_EYE")},validateAttempt:e=>e.hasResourceAvailable("HAWKS_EYE")||e.hasResourceAvailable("BARRAGE"),highlightIf:e=>e.hasResourceAvailable("HAWKS_EYE")||e.hasResourceAvailable("BARRAGE"),autoUpgrade:{trait:"WIDE_VOLLEY_MASTERY",otherSkill:"SHADOWBITE"}});$n("SHADOWBITE",72,{startOnHotbar:!1,potency:200,falloff:0,applicationDelay:1.43,onConfirm:e=>{e.hasResourceAvailable("BARRAGE")?e.tryConsumeResource("BARRAGE"):e.tryConsumeResource("HAWKS_EYE")},validateAttempt:e=>e.hasResourceAvailable("HAWKS_EYE")||e.hasResourceAvailable("BARRAGE"),highlightIf:e=>e.hasResourceAvailable("HAWKS_EYE")||e.hasResourceAvailable("BARRAGE")});Ul("RAIN_OF_DEATH",45,"cd_HEARTBREAK_SHOT",{potency:100,cooldown:15,maxCharges:3,falloff:0,applicationDelay:1.65});ys("WARDENS_PAEAN",35,"cd_WARDENS_PAEAN",{rscType:"WARDENS_PAEAN",cooldown:45,applicationDelay:.62});ys("NATURES_MINNE",35,"cd_NATURES_MINNE",{rscType:"NATURES_MINNE",cooldown:120,applicationDelay:.62});Ul("REPELLING_SHOT",15,"cd_REPELLING_SHOT",{cooldown:30,animationLock:Vt});ys("TROUBADOUR",56,"cd_TROUBADOUR",{rscType:"TROUBADOUR",maxCharges:1,cooldown:90,applicationDelay:0});Object.keys(cT).filter(e=>!(e==="ESPRIT_PARTNER"||e==="STANDARD_FINISH_PARTNER")).forEach(e=>Ft(e,`DNC/${Ge[e].name}.png`));Ft("ESPRIT_PARTNER","DNC/Esprit.png");Ft("STANDARD_FINISH_PARTNER","DNC/Standard Finish.png");const Yp=["ESPRIT_TECHNICAL","ESPRIT_PARTNER","STANDARD_FINISH_PARTNER","DANCE_PARTNER"];class jw extends Wt{jobSpecificOtherTargetedBuffViewProps(){return Yp.map(t=>t==="DANCE_PARTNER"?this.makeCommonTimerless(t,!1):this.makeCommonTimer(t,!1))}jobSpecificSelfTargetedBuffViewProps(){return[...Object.keys(cT).filter(t=>!Yp.includes(t)).map(t=>t==="CLOSED_POSITION"||t==="RISING_RHYTHM"?this.makeCommonTimerless(t):this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){const n=this.state.resources,o=n.get("FEATHER_GAUGE").availableAmount(),l=n.get("STANDARD_DANCE").availableAmount(),r=n.get("TECHNICAL_DANCE").availableAmount(),d=[];if(this.state.hasTraitUnlocked("ESPRIT")){const h=n.get("ESPRIT_GAUGE").availableAmount();d.push({kind:"bar",name:C({en:"Esprit",zh:"伶俐"}),color:t.dnc.esprit,progress:h/100,valueString:h.toFixed(0)})}return d.push({kind:"counter",name:C({en:"Feathers",zh:"幻扇"}),color:t.dnc.feathers,currentStacks:o,maxStacks:4},{kind:"dance",name:C({en:"Standard",zh:"标准舞步计数"}),maxStacks:2,currentStacks:l,emboiteColor:t.dnc.emboite,entrechatColor:t.dnc.entrechat,jeteColor:t.dnc.jete,pirouetteColor:t.dnc.pirouette},{kind:"dance",name:C({en:"Technical",zh:"技巧舞步计数"}),maxStacks:4,currentStacks:r,emboiteColor:t.dnc.emboite,entrechatColor:t.dnc.entrechat,jeteColor:t.dnc.jete,pirouetteColor:t.dnc.pirouette}),d}statusLayoutFn(t){return u.jsxs("div",{children:[u.jsxs("div",{style:{display:"inline-block",verticalAlign:"top",width:"50%",height:"100%"},children:[u.jsxs("span",{style:{display:"block",marginBottom:10},children:[C({en:"time: ",zh:"战斗时间：",ja:"経過時間："}),`${it.displayTime(t.time,3)} (${t.time.toFixed(3)})`]}),t.resources?u.jsx(wO,{data:{level:t.level,resources:t.resources},style:{height:"17em"}}):void 0]}),u.jsxs("div",{style:{position:"relative",display:"inline-block",float:"right",width:"50%"},children:[t.resourceLocks?u.jsx(PO,{data:t.resourceLocks}):void 0,u.jsx(Th,{data:t.enemyBuffs,style:{marginTop:50,marginBottom:"2em"}}),u.jsx(Th,{data:t.selfBuffs,style:{position:"absolute",right:0,width:"200%"}})]})]})}}const rt=(e,t,n)=>{Ye("DNC",e,t,n??{})};rt("ESPRIT_GAUGE",100,{warnOnOvercap:!0});rt("FEATHER_GAUGE",4,{warnOnOvercap:!0});rt("STANDARD_DANCE",2);rt("TECHNICAL_DANCE",4);rt("SILKEN_SYMMETRY",1,{timeout:30});rt("SILKEN_FLOW",1,{timeout:30});rt("FLOURISHING_SYMMETRY",1,{timeout:30});rt("FLOURISHING_FLOW",1,{timeout:30});rt("THREEFOLD_FAN_DANCE",1,{timeout:30,warnOnOvercap:!0});rt("FOURFOLD_FAN_DANCE",1,{timeout:30});rt("FINISHING_MOVE_READY",1,{timeout:30});rt("FLOURISHING_STARFALL",1,{timeout:20});rt("STANDARD_STEP",1,{timeout:15});rt("STANDARD_FINISH",1,{timeout:60});rt("STANDARD_BONUS",2,{timeout:60});rt("ESPRIT",1,{timeout:60});rt("TECHNICAL_STEP",1,{timeout:15});rt("TECHNICAL_FINISH",1,{timeout:20.5});rt("TECHNICAL_BONUS",4,{timeout:20.5});rt("LAST_DANCE_READY",1,{timeout:30});rt("DANCE_OF_THE_DAWN_READY",1,{timeout:30});rt("FLOURISHING_FINISH",1,{timeout:30});rt("CLOSED_POSITION",1,{default:1});rt("DEVILMENT",1,{timeout:20});rt("SHIELD_SAMBA",1,{timeout:15});rt("IMPROVISATION",1,{timeout:15});rt("RISING_RHYTHM",4,{timeout:15});rt("IMPROVISATION_REGEN",1,{timeout:15});rt("IMPROVISED_FINISH",1,{timeout:30});rt("DANCE_PARTNER",1,{default:1});rt("ESPRIT_PARTNER",1,{timeout:60});rt("STANDARD_FINISH_PARTNER",1,{timeout:60});rt("ESPRIT_TECHNICAL",1,{timeout:20});rt("CASCADE_COMBO",1,{timeout:30});rt("WINDMILL_COMBO",1,{timeout:30});const Yw=["CASCADE","FOUNTAIN","WINDMILL","BLADESHOWER"],Kw=["EMBOITE","ENTRECHAT","JETE","PIROUETTE"];class Vw extends Xt{constructor(t){super(t),this.hasTraitUnlocked("ESPRIT")||this.resources.set(new sn("ESPRIT_GAUGE",0,0,!0));const n=this.hasTraitUnlocked("ENHANCED_EN_AVANT_II")?3:2;this.cooldowns.set(new ke("cd_EN_AVANT",30,n,n));const o=this.hasTraitUnlocked("ENHANCED_SHIELD_SAMBA")?90:120;this.cooldowns.set(new ke("cd_SHIELD_SAMBA",o,1,1)),this.registerRecurringEvents()}get statusPropsGenerator(){return new jw(this)}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("TECHNICAL_FINISH")&&t.addBuff(H.TechnicalFinish),this.hasResourceAvailable("DEVILMENT")&&t.addBuff(H.Devilment)}cancelChanneledSkills(){this.tryConsumeResource("IMPROVISATION"),this.tryConsumeResource("RISING_RHYTHM",!0)}processComboStatus(t){if(!Yw.includes(t))return;const n=t==="CASCADE",o=t==="WINDMILL";this.setComboState("CASCADE_COMBO",n?1:0),this.setComboState("WINDMILL_COMBO",o?1:0)}getCurrentDanceStatus(){const t=this.hasResourceAvailable("STANDARD_STEP")?"STANDARD_DANCE":"TECHNICAL_DANCE";return this.resources.get(t).availableAmount()}processDanceStatus(t){if(!Kw.includes(t))return;const n=this.hasResourceAvailable("STANDARD_STEP")?"STANDARD_DANCE":"TECHNICAL_DANCE";let o=0;switch(t){case"ENTRECHAT":o=1;break;case"JETE":o=2;break;case"PIROUETTE":o=3;break}const l=this.resources.get(n);l.availableAmount()===o&&l.gain(1)}gainProc(t){this.gainStatus(t)}maybeGainProc(t,n=.5){super.maybeGainProc(t,n,!0)}gainProcIfCombo(t,n){this.triggersEffect(.5,!0)&&n&&this.gainProc(t)}gainResource(t,n){this.resources.get(t).gain(n)}maybeGainResource(t,n,o=.5){this.triggersEffect(o,!0)&&this.gainResource(t,n)}simulatePartyEspritGain(){if(this.hasResourceAvailable("ESPRIT_TECHNICAL")){for(let t=0;t<this.resources.get("PARTY_SIZE").availableAmount()-1;t++)this.maybeGainResource("ESPRIT_GAUGE",10,.2);return}this.hasResourceAvailable("ESPRIT_PARTNER")&&this.maybeGainResource("ESPRIT_GAUGE",10,.2)}applyStandardFinish(t){t!==0&&(this.gainProc("STANDARD_FINISH"),this.gainStatus("STANDARD_BONUS",t),this.hasResourceAvailable("DANCE_PARTNER")&&this.gainProc("STANDARD_FINISH_PARTNER"),this.hasTraitUnlocked("ESPRIT")&&(this.gainProc("ESPRIT"),this.hasResourceAvailable("DANCE_PARTNER")&&this.gainProc("ESPRIT_PARTNER")),this.hasTraitUnlocked("ENHANCED_STANDARD_FINISH")&&this.gainProc("LAST_DANCE_READY"))}}const oa=e=>e.hasResourceAvailable("STANDARD_STEP")||e.hasResourceAvailable("TECHNICAL_STEP"),VO={newSkill:"EMBOITE",condition:e=>oa(e)},WO={newSkill:"ENTRECHAT",condition:e=>oa(e)},XO={newSkill:"JETE",condition:e=>oa(e)},qO={newSkill:"PIROUETTE",condition:e=>oa(e)},qt=(e,t,n)=>{const o=Ue(l=>{n.potency&&l.simulatePartyEspritGain()},n.onConfirm,l=>l.processComboStatus(e));return na("DNC",e,t,{...n,onConfirm:o,jobPotencyModifiers:l=>{const r=[];if(l.hasResourceAvailable("STANDARD_FINISH")){const d=l.resources.get("STANDARD_BONUS").availableAmount()===2?X.DoubleStandardFinish:X.SingleStandardFinish;r.push(d)}if(l.hasResourceAvailable("TECHNICAL_FINISH")){const d=l.resources.get("TECHNICAL_BONUS").availableAmount(),h=d===4?X.QuadrupleTechnicalFinish:d===3?X.TripleTechnicalFinish:X.SingleTechnicalFinish;r.push(h)}return l.hasResourceAvailable("DEVILMENT")&&r.push(X.Devilment),e==="STARFALL_DANCE"&&r.push(X.AutoCDH),r}})},Pi=(e,t,n,o)=>ot("DNC",e,t,n,{...o,onConfirm:o.onConfirm,jobPotencyModifiers:l=>{const r=[];if(l.hasResourceAvailable("STANDARD_FINISH")){const d=l.resources.get("STANDARD_BONUS").availableAmount()===2?X.DoubleStandardFinish:X.SingleStandardFinish;r.push(d)}if(l.hasResourceAvailable("TECHNICAL_FINISH")){const d=l.resources.get("TECHNICAL_BONUS").availableAmount(),h=d===4?X.QuadrupleTechnicalFinish:d===3?X.TripleTechnicalFinish:X.SingleTechnicalFinish;r.push(h)}return l.hasResourceAvailable("DEVILMENT")&&r.push(X.Devilment),r}}),ZO=(e,t,n,o)=>ze("DNC",e,t,n,o);qt("EMBOITE",15,{startOnHotbar:!1,recastTime:1,onConfirm:e=>e.processDanceStatus("EMBOITE"),highlightIf:e=>oa(e)&&e.getCurrentDanceStatus()===0});qt("ENTRECHAT",15,{startOnHotbar:!1,recastTime:1,onConfirm:e=>e.processDanceStatus("ENTRECHAT"),highlightIf:e=>oa(e)&&e.getCurrentDanceStatus()===1});qt("JETE",15,{startOnHotbar:!1,recastTime:1,onConfirm:e=>e.processDanceStatus("JETE"),highlightIf:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===2});qt("PIROUETTE",15,{startOnHotbar:!1,recastTime:1,onConfirm:e=>e.processDanceStatus("PIROUETTE"),highlightIf:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===3});qt("CASCADE",1,{replaceIf:[VO],potency:[["NEVER",200],["DYNAMIC_DANCER",220]],recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.8,onConfirm:e=>{e.maybeGainProc("SILKEN_SYMMETRY"),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",5)}});qt("FOUNTAIN",2,{replaceIf:[WO],potency:[["NEVER",100],["DYNAMIC_DANCER",120]],combo:{potency:[["NEVER",260],["DYNAMIC_DANCER",280]],resource:"CASCADE_COMBO",resourceValue:1},recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.98,onConfirm:e=>{e.gainProcIfCombo("SILKEN_FLOW",e.hasResourceExactly("CASCADE_COMBO",1)),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",5)},highlightIf:e=>e.resources.get("CASCADE_COMBO").availableAmount()===1});qt("REVERSE_CASCADE",20,{replaceIf:[XO],potency:[["NEVER",260],["DYNAMIC_DANCER",280]],recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("SILKEN_SYMMETRY")||e.hasResourceAvailable("FLOURISHING_SYMMETRY"),onConfirm:e=>{e.hasResourceAvailable("SILKEN_SYMMETRY")?e.tryConsumeResource("SILKEN_SYMMETRY"):e.tryConsumeResource("FLOURISHING_SYMMETRY"),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",10),e.maybeGainResource("FEATHER_GAUGE",1)},highlightIf:e=>e.hasResourceAvailable("SILKEN_SYMMETRY")||e.hasResourceAvailable("FLOURISHING_SYMMETRY")});qt("FOUNTAINFALL",40,{replaceIf:[qO],potency:[["NEVER",320],["DYNAMIC_DANCER",340]],recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:1.21,validateAttempt:e=>e.hasResourceAvailable("SILKEN_FLOW")||e.hasResourceAvailable("FLOURISHING_FLOW"),onConfirm:e=>{e.hasResourceAvailable("SILKEN_FLOW")?e.tryConsumeResource("SILKEN_FLOW"):e.tryConsumeResource("FLOURISHING_FLOW"),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",10),e.maybeGainResource("FEATHER_GAUGE",1)},highlightIf:e=>e.hasResourceAvailable("SILKEN_FLOW")||e.hasResourceAvailable("FLOURISHING_FLOW")});Pi("FAN_DANCE",30,"cd_FAN_DANCE",{potency:[["NEVER",150],["DYNAMIC_DANCER",180]],cooldown:1,applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("FEATHER_GAUGE")&&!oa(e),highlightIf:e=>e.hasResourceAvailable("FEATHER_GAUGE"),onConfirm:e=>{e.tryConsumeResource("FEATHER_GAUGE"),e.maybeGainProc("THREEFOLD_FAN_DANCE")}});qt("SABER_DANCE",76,{replaceIf:[{newSkill:"DANCE_OF_THE_DAWN",condition:e=>e.hasResourceAvailable("DANCE_OF_THE_DAWN_READY")&&e.hasResourceAvailable("ESPRIT_GAUGE",50)}],potency:[["NEVER",500],["DYNAMIC_DANCER",520]],recastTime:e=>e.config.adjustedSksGCD(),falloff:.6,applicationDelay:.44,validateAttempt:e=>e.hasResourceAvailable("ESPRIT_GAUGE",50)&&!oa(e),highlightIf:e=>e.hasResourceAvailable("ESPRIT_GAUGE",50),onConfirm:e=>e.resources.get("ESPRIT_GAUGE").consume(50)});qt("DANCE_OF_THE_DAWN",100,{startOnHotbar:!1,potency:1e3,recastTime:e=>e.config.adjustedSksGCD(),falloff:.6,applicationDelay:.44,validateAttempt:e=>e.hasResourceAvailable("ESPRIT_GAUGE",50)&&!oa(e),highlightIf:e=>e.hasResourceAvailable("ESPRIT_GAUGE",50),onConfirm:e=>{e.resources.get("ESPRIT_GAUGE").consume(50),e.tryConsumeResource("DANCE_OF_THE_DAWN_READY")}});qt("LAST_DANCE",92,{potency:520,recastTime:e=>e.config.adjustedSksGCD(),falloff:.6,applicationDelay:1.26,validateAttempt:e=>e.hasResourceAvailable("LAST_DANCE_READY")&&!oa(e),highlightIf:e=>e.hasResourceAvailable("LAST_DANCE_READY"),onConfirm:e=>e.tryConsumeResource("LAST_DANCE_READY")});qt("STANDARD_STEP",15,{replaceIf:[{newSkill:"STANDARD_FINISH",condition:e=>e.hasResourceAvailable("STANDARD_STEP")&&e.getCurrentDanceStatus()===0},{newSkill:"SINGLE_STANDARD_FINISH",condition:e=>e.hasResourceAvailable("STANDARD_STEP")&&e.getCurrentDanceStatus()===1},{newSkill:"DOUBLE_STANDARD_FINISH",condition:e=>e.hasResourceAvailable("STANDARD_STEP")&&e.getCurrentDanceStatus()===2},{newSkill:"FINISHING_MOVE",condition:e=>e.hasResourceAvailable("FINISHING_MOVE_READY")}],validateAttempt:e=>!oa(e),onConfirm:e=>e.gainProc("STANDARD_STEP"),recastTime:1.5,secondaryCooldown:{cdName:"cd_STANDARD_STEP",cooldown:30,maxCharges:1}});qt("FINISHING_MOVE",96,{startOnHotbar:!1,potency:850,recastTime:e=>e.config.adjustedSksGCD(),falloff:.6,applicationDelay:2.05,onConfirm:e=>{e.applyStandardFinish(2),e.tryConsumeResource("FINISHING_MOVE_READY")},secondaryCooldown:{cdName:"cd_STANDARD_STEP",cooldown:30,maxCharges:1},validateAttempt:e=>e.hasResourceAvailable("FINISHING_MOVE_READY")&&!oa(e),highlightIf:e=>e.hasResourceAvailable("FINISHING_MOVE_READY")});const Ww=[{skill:"STANDARD_FINISH",potency:360},{skill:"SINGLE_STANDARD_FINISH",potency:540},{skill:"DOUBLE_STANDARD_FINISH",potency:[["NEVER",800],["DYNAMIC_DANCER",850]]}];Ww.forEach(e=>{qt(e.skill,15,{assetPath:"DNC/Standard Finish.png",startOnHotbar:!1,potency:e.potency,falloff:.6,applicationDelay:.54,onConfirm:t=>{const n=t.getCurrentDanceStatus();t.tryConsumeResource("STANDARD_STEP"),t.tryConsumeResource("STANDARD_DANCE",!0),n!==0&&t.applyStandardFinish(n)},recastTime:1.5,validateAttempt:t=>t.hasResourceAvailable("STANDARD_STEP"),highlightIf:t=>t.hasResourceAvailable("STANDARD_STEP")&&t.getCurrentDanceStatus()===2})});Pi("FLOURISH",72,"cd_FLOURISH",{cooldown:60,requiresCombat:!0,validateAttempt:e=>!oa(e),onConfirm:e=>{e.gainProc("FLOURISHING_SYMMETRY"),e.gainProc("FLOURISHING_FLOW"),e.gainProc("THREEFOLD_FAN_DANCE"),e.hasTraitUnlocked("ENHANCED_FLOURISH")&&e.gainProc("FOURFOLD_FAN_DANCE"),e.hasTraitUnlocked("ENHANCED_FLOURISH_II")&&e.gainProc("FINISHING_MOVE_READY")}});Pi("FAN_DANCE_III",66,"cd_FAN_DANCE_III",{potency:[["NEVER",200],["DYNAMIC_DANCER",220]],cooldown:1,falloff:.6,applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("THREEFOLD_FAN_DANCE")&&!oa(e),highlightIf:e=>e.hasResourceAvailable("THREEFOLD_FAN_DANCE"),onConfirm:e=>e.tryConsumeResource("THREEFOLD_FAN_DANCE")});Pi("FAN_DANCE_IV",86,"cd_FAN_DANCE_IV",{potency:[["NEVER",300],["DYNAMIC_DANCER",420]],falloff:.6,cooldown:1,applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("FOURFOLD_FAN_DANCE")&&!oa(e),highlightIf:e=>e.hasResourceAvailable("FOURFOLD_FAN_DANCE"),onConfirm:e=>e.tryConsumeResource("FOURFOLD_FAN_DANCE")});qt("TECHNICAL_STEP",70,{replaceIf:[{newSkill:"TECHNICAL_FINISH",condition:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===0},{newSkill:"SINGLE_TECHNICAL_FINISH",condition:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===1},{newSkill:"DOUBLE_TECHNICAL_FINISH",condition:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===2},{newSkill:"TRIPLE_TECHNICAL_FINISH",condition:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===3},{newSkill:"QUADRUPLE_TECHNICAL_FINISH",condition:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===4},{newSkill:"TILLANA",condition:e=>e.hasResourceAvailable("FLOURISHING_FINISH")}],validateAttempt:e=>!oa(e),onConfirm:e=>e.gainProc("TECHNICAL_STEP"),recastTime:1.5,falloff:.75,secondaryCooldown:{cdName:"cd_TECHNICAL_STEP",cooldown:120,maxCharges:1}});qt("TILLANA",82,{startOnHotbar:!1,potency:600,recastTime:e=>e.config.adjustedSksGCD(),falloff:.6,applicationDelay:.84,onConfirm:e=>{e.gainResource("ESPRIT_GAUGE",50),e.tryConsumeResource("FLOURISHING_FINISH")},validateAttempt:e=>e.hasResourceAvailable("FLOURISHING_FINISH")&&!oa(e),highlightIf:e=>e.hasResourceAvailable("FLOURISHING_FINISH")});qt("TECHNICAL_FINISH",70,{startOnHotbar:!1,potency:350,applicationDelay:.54,onConfirm:e=>{e.tryConsumeResource("TECHNICAL_STEP"),e.tryConsumeResource("TECHNICAL_DANCE",!0)},recastTime:1.5,validateAttempt:e=>e.hasResourceAvailable("TECHNICAL_STEP")});const Xw=[{skill:"TECHNICAL_FINISH",potency:350},{skill:"SINGLE_TECHNICAL_FINISH",potency:540},{skill:"DOUBLE_TECHNICAL_FINISH",potency:720},{skill:"TRIPLE_TECHNICAL_FINISH",potency:900},{skill:"QUADRUPLE_TECHNICAL_FINISH",potency:[["NEVER",1200],["DYNAMIC_DANCER",1300]]}];Xw.forEach(e=>{qt(e.skill,70,{assetPath:"DNC/Technical Finish.png",startOnHotbar:!1,potency:e.potency,applicationDelay:.54,falloff:.6,onConfirm:t=>{const n=t.getCurrentDanceStatus();t.tryConsumeResource("TECHNICAL_STEP"),t.tryConsumeResource("TECHNICAL_DANCE",!0),n!==0&&(t.gainProc("TECHNICAL_FINISH"),t.hasTraitUnlocked("ESPRIT")&&t.gainProc("ESPRIT_TECHNICAL"),t.gainStatus("TECHNICAL_BONUS",n),t.hasTraitUnlocked("ENHANCED_TECHNICAL_FINISH")&&t.gainProc("FLOURISHING_FINISH"),t.hasTraitUnlocked("ENHANCED_TECHNICAL_FINISH_II")&&t.gainProc("DANCE_OF_THE_DAWN_READY"))},recastTime:1.5,validateAttempt:t=>t.hasResourceAvailable("TECHNICAL_STEP"),highlightIf:t=>t.hasResourceAvailable("TECHNICAL_STEP")&&t.getCurrentDanceStatus()===4})});ZO("DEVILMENT",62,"cd_DEVILMENT",{replaceIf:[{newSkill:"STARFALL_DANCE",condition:e=>e.hasResourceAvailable("FLOURISHING_STARFALL")}],rscType:"DEVILMENT",applicationDelay:0,cooldown:120,validateAttempt:e=>!oa(e),onApplication:e=>{e.hasTraitUnlocked("ENHANCED_DEVILMENT")&&e.gainProc("FLOURISHING_STARFALL")}});qt("STARFALL_DANCE",90,{startOnHotbar:!1,potency:600,recastTime:e=>e.config.adjustedSksGCD(),falloff:.75,applicationDelay:.89,validateAttempt:e=>e.hasResourceAvailable("FLOURISHING_STARFALL")&&!oa(e),highlightIf:e=>e.hasResourceAvailable("FLOURISHING_STARFALL"),onConfirm:e=>e.tryConsumeResource("FLOURISHING_STARFALL")});qt("WINDMILL",15,{replaceIf:[VO],potency:120,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.62,onConfirm:e=>{e.maybeGainProc("SILKEN_SYMMETRY"),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",5)}});qt("BLADESHOWER",25,{replaceIf:[WO],potency:100,recastTime:e=>e.config.adjustedSksGCD(),combo:{potency:160,resource:"WINDMILL_COMBO",resourceValue:1},falloff:0,applicationDelay:.62,onConfirm:e=>{e.gainProcIfCombo("SILKEN_FLOW",e.hasResourceExactly("WINDMILL_COMBO",1)),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",5)},highlightIf:e=>e.resources.get("WINDMILL_COMBO").availableAmount()===1});qt("RISING_WINDMILL",35,{replaceIf:[XO],potency:160,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("SILKEN_SYMMETRY")||e.hasResourceAvailable("FLOURISHING_SYMMETRY"),onConfirm:e=>{e.hasResourceAvailable("SILKEN_SYMMETRY")?e.tryConsumeResource("SILKEN_SYMMETRY"):e.tryConsumeResource("FLOURISHING_SYMMETRY"),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",10),e.maybeGainResource("FEATHER_GAUGE",1)},highlightIf:e=>e.hasResourceAvailable("SILKEN_SYMMETRY")||e.hasResourceAvailable("FLOURISHING_SYMMETRY")});qt("BLOODSHOWER",45,{replaceIf:[qO],potency:200,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("SILKEN_FLOW")||e.hasResourceAvailable("FLOURISHING_FLOW"),onConfirm:e=>{e.hasResourceAvailable("SILKEN_FLOW")?e.tryConsumeResource("SILKEN_FLOW"):e.tryConsumeResource("FLOURISHING_FLOW"),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",10),e.maybeGainResource("FEATHER_GAUGE",1)},highlightIf:e=>e.hasResourceAvailable("SILKEN_FLOW")||e.hasResourceAvailable("FLOURISHING_FLOW")});Pi("FAN_DANCE_II",30,"cd_FAN_DANCE_II",{potency:100,cooldown:1,falloff:0,applicationDelay:.54,validateAttempt:e=>e.hasResourceAvailable("FEATHER_GAUGE")&&!oa(e),highlightIf:e=>e.hasResourceAvailable("FEATHER_GAUGE"),onConfirm:e=>{e.tryConsumeResource("FEATHER_GAUGE"),e.maybeGainProc("THREEFOLD_FAN_DANCE")}});Pi("CURING_WALTZ",52,"cd_CURING_WALTZ",{cooldown:60,applicationDelay:.58});Pi("IMPROVISATION",80,"cd_IMPROVISATION",{replaceIf:[{newSkill:"IMPROVISED_FINISH",condition:e=>e.hasResourceAvailable("IMPROVISATION")}],cooldown:120,applicationDelay:.89,validateAttempt:e=>!oa(e),onConfirm:e=>{e.gainProc("IMPROVISATION"),e.gainProc("IMPROVISATION_REGEN");const t=()=>{e.hasResourceAvailable("IMPROVISATION")&&(e.resources.get("RISING_RHYTHM").gain(1),e.gainProc("IMPROVISATION_REGEN"),e.resources.addResourceEvent({rscType:"RISING_RHYTHM",name:"rising rhythm tic",delay:3,fnOnRsc:n=>t()}))};e.resources.addResourceEvent({rscType:"RISING_RHYTHM",name:"rising rhythm tic",delay:3,fnOnRsc:n=>t()}),e.resources.addResourceEvent({rscType:"IMPROVISATION",name:"improvisation timeout",delay:Kt("DNC","IMPROVISATION").maxTimeout,fnOnRsc:n=>{n.consume(1),e.tryConsumeResource("RISING_RHYTHM",!0)}})}});Pi("IMPROVISED_FINISH",80,"cd_IMPROVISED_FINISH",{startOnHotbar:!1,cooldown:120,applicationDelay:.71,validateAttempt:e=>!oa(e),onConfirm:e=>e.gainProc("IMPROVISED_FINISH")});Pi("EN_AVANT",50,"cd_EN_AVANT",{cooldown:30,maxCharges:3,animationLock:Vt});ZO("SHIELD_SAMBA",56,"cd_SHIELD_SAMBA",{rscType:"SHIELD_SAMBA",maxCharges:1,cooldown:90,applicationDelay:0});Pi("CLOSED_POSITION",60,"cd_CLOSED_POSITION",{replaceIf:[{newSkill:"ENDING",condition:e=>e.hasResourceAvailable("CLOSED_POSITION")}],cooldown:30,maxCharges:1,applicationDelay:0,onConfirm:e=>{e.resources.get("CLOSED_POSITION").gain(1),e.resources.get("DANCE_PARTNER").gain(1)},validateAttempt:e=>!e.hasResourceAvailable("CLOSED_POSITION"),secondaryCooldown:{cdName:"cd_ENDING",cooldown:1,maxCharges:1}});Pi("ENDING",60,"cd_ENDING",{startOnHotbar:!1,cooldown:1,maxCharges:1,applicationDelay:0,onConfirm:e=>{e.tryConsumeResource("CLOSED_POSITION",!0),e.tryConsumeResource("DANCE_PARTNER",!0),e.tryConsumeResource("STANDARD_FINISH_PARTNER",!0),e.tryConsumeResource("ESPRIT_PARTNER",!0)},secondaryCooldown:{cdName:"cd_CLOSED_POSITION",cooldown:30,maxCharges:1}});const QO=["CHAOS_THRUST_DOT","CHAOTIC_SPRING_DOT"],qw=Object.keys(uT).filter(e=>!QO.includes(e));Object.keys(uT).forEach(e=>Ft(e,`DRG/${Ge[e].name}.png`));class Zw extends Wt{jobSpecificOtherTargetedBuffViewProps(){return[...QO.map(t=>this.makeCommonTimer(t,!1))]}jobSpecificSelfTargetedBuffViewProps(){return qw.map(t=>this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){var T,S,I,p;const n=this.state.resources,o=n.get("DRG_CHAOS_COMBO_TRACKER"),l=n.get("DRG_HEAVENS_COMBO_TRACKER"),r=n.get("DRG_AOE_COMBO_TRACKER"),d=n.get("FIRSTMINDS_FOCUS").availableAmount(),h=n.get("LIFE_OF_THE_DRAGON"),E=h.available(1)?(T=h.pendingChange)==null?void 0:T.timeTillEvent:void 0,A=o.available(1)?(S=o.pendingChange)==null?void 0:S.timeTillEvent:l.available(1)?(I=l.pendingChange)==null?void 0:I.timeTillEvent:r.available(1)?(p=r.pendingChange)==null?void 0:p.timeTillEvent:void 0;return[{kind:"bar",name:C({en:"Combo Timer",zh:"连击监控"}),color:t.drg.drgComboTimer,progress:A?A/30:0,valueString:(A==null?void 0:A.toFixed(3))??"N/A"},{kind:"bar",name:C({en:"Life of the Dragon"}),color:t.drg.lifeOfTheDragonBar,progress:E?E/20:0,valueString:E?E.toFixed(3):"N/A"},{kind:"counter",name:C({en:"Firstmind's Focus"}),color:t.drg.firstmindsFocusStacks,currentStacks:d,maxStacks:2}]}}const $a=(e,t,n)=>{Ye("DRG",e,t,n??{})};$a("POWER_SURGE",1,{timeout:30});$a("LIFE_SURGE",1,{timeout:5.52,warnOnTimeout:!0});$a("ENHANCED_PIERCING_TALON",1,{timeout:15.62});$a("LANCE_CHARGE",1,{timeout:20});$a("DIVE_READY",1,{timeout:15.46,warnOnTimeout:!0});$a("CHAOS_THRUST_DOT",1,{timeout:24});$a("BATTLE_LITANY",1,{timeout:20});$a("LIFE_OF_THE_DRAGON",1,{timeout:20});$a("NASTROND_READY",1,{timeout:20,warnOnTimeout:!0});$a("DRACONIAN_FIRE",1,{timeout:30});$a("CHAOTIC_SPRING_DOT",1,{timeout:24});$a("FIRSTMINDS_FOCUS",2,{warnOnOvercap:!0});$a("DRAGONS_FLIGHT",1,{timeout:30.79});$a("STARCROSS_READY",1,{timeout:20,warnOnTimeout:!0});$a("DRG_CHAOS_COMBO_TRACKER",4,{timeout:30});$a("DRG_HEAVENS_COMBO_TRACKER",4,{timeout:30});$a("DRG_AOE_COMBO_TRACKER",2,{timeout:30});const Qw=["DOOM_SPIKE","SONIC_THRUST","COERTHAN_TORMENT","DRACONIAN_FURY"],Kp=new Map([["DISEMBOWEL",1],["SPIRAL_BLOW",1],["CHAOS_THRUST",2],["CHAOTIC_SPRING",2],["WHEELING_THRUST",3]]),Vp=new Map([["VORPAL_THRUST",1],["LANCE_BARRAGE",1],["FULL_THRUST",2],["HEAVENS_THRUST",2],["FANG_AND_CLAW",3]]);class $w extends Xt{constructor(t){super(t);const n=this.hasTraitUnlocked("ENHANCED_WINGED_GLIDE")?2:1,o=this.hasTraitUnlocked("ENHANCED_LIFE_SURGE")?2:1;[new ke("cd_WINGED_GLIDE",60,n,n),new ke("cd_LIFE_SURGE",40,o,o)].forEach(l=>this.cooldowns.set(l)),this.registerRecurringEvents([{groupedEffects:[{effectName:"CHAOS_THRUST_DOT",appliedBy:["CHAOS_THRUST"]}]},{groupedEffects:[{effectName:"CHAOTIC_SPRING_DOT",appliedBy:["CHAOTIC_SPRING"]}]}])}get statusPropsGenerator(){return new Zw(this)}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("POWER_SURGE")&&t.addBuff(H.PowerSurge),this.hasResourceAvailable("LANCE_CHARGE")&&t.addBuff(H.LanceCharge),this.hasResourceAvailable("LIFE_OF_THE_DRAGON")&&t.addBuff(H.LifeOfTheDragon),this.hasResourceAvailable("BATTLE_LITANY")&&t.addBuff(H.BattleLitany),n.name==="PIERCING_TALON"&&this.hasResourceAvailable("ENHANCED_PIERCING_TALON")&&t.addBuff(H.EnhancedPiercingTalon),n.cdName==="cd_GCD"&&this.hasResourceAvailable("LIFE_SURGE")&&t.addBuff(H.LifeSurge)}pushUniversalModifiers(t){this.hasResourceAvailable("POWER_SURGE")&&t.push(X.PowerSurge),this.hasResourceAvailable("LANCE_CHARGE")&&t.push(X.LanceCharge),this.hasResourceAvailable("LIFE_OF_THE_DRAGON")&&t.push(X.LifeOfTheDragon),this.hasResourceAvailable("BATTLE_LITANY")&&t.push(X.BattleLitany)}fixDRGComboState(t){if(this.tryConsumeResource("DRACONIAN_FIRE",!0),Qw.includes(t)){this.tryConsumeResource("DRG_CHAOS_COMBO_TRACKER",!0),this.tryConsumeResource("DRG_HEAVENS_COMBO_TRACKER",!0);let n=0;t==="DOOM_SPIKE"||t==="DRACONIAN_FURY"?n=1:t==="SONIC_THRUST"&&this.hasResourceExactly("DRG_AOE_COMBO_TRACKER",1)&&(n=2),this.setComboState("DRG_AOE_COMBO_TRACKER",n);return}if(this.tryConsumeResource("DRG_AOE_COMBO_TRACKER",!0),t==="TRUE_THRUST"||t==="RAIDEN_THRUST"){this.tryConsumeResource("DRG_CHAOS_COMBO_TRACKER",!0),this.tryConsumeResource("DRG_HEAVENS_COMBO_TRACKER",!0),this.setComboState("DRG_CHAOS_COMBO_TRACKER",1),this.setComboState("DRG_HEAVENS_COMBO_TRACKER",1);return}if(Kp.has(t)){const n=Kp.get(t);this.tryConsumeResource("DRG_HEAVENS_COMBO_TRACKER",!0),this.setComboState("DRG_CHAOS_COMBO_TRACKER",this.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",n)?n+1:0)}else if(Vp.has(t)){const n=Vp.get(t);this.tryConsumeResource("DRG_CHAOS_COMBO_TRACKER",!0),this.setComboState("DRG_HEAVENS_COMBO_TRACKER",this.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",n)?n+1:0)}else t==="DRAKESBANE"&&(this.tryConsumeResource("DRG_HEAVENS_COMBO_TRACKER",!0),this.tryConsumeResource("DRG_CHAOS_COMBO_TRACKER",!0))}checkCombo(t){return this.hasResourceAvailable(t)}gainScale(t){this.resources.get("FIRSTMINDS_FOCUS").gain(t)}refreshBuff(t,n){this.addEvent(new be("gain buff",n,()=>{this.resources.get(t).gain(1),this.enqueueResourceDrop(t)}))}}const Ba=(e,t,n)=>{const o=Ue(n.onConfirm,l=>{e!=="PIERCING_TALON"&&l.fixDRGComboState(e),l.tryConsumeResource("LIFE_SURGE")});return na("DRG",e,t,{...n,onConfirm:o,recastTime:l=>l.config.adjustedSksGCD(),jobPotencyModifiers:l=>{var d;const r=((d=n.jobPotencyModifiers)==null?void 0:d.call(n,l))??[];return e==="PIERCING_TALON"&&l.hasResourceAvailable("ENHANCED_PIERCING_TALON")&&r.push(X.EnhancedPiercingTalon),l.pushUniversalModifiers(r),l.hasResourceAvailable("LIFE_SURGE")&&r.push(X.LifeSurge),r}})},Si=(e,t,n,o)=>ot("DRG",e,t,n,{...o,onConfirm:o.onConfirm,jobPotencyModifiers:l=>{const r=[];return l.pushUniversalModifiers(r),r}}),Jw={newSkill:"DRAKESBANE",condition:e=>e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",4)},eG={newSkill:"DRAKESBANE",condition:e=>e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",4)},tG={newSkill:"RAIDEN_THRUST",condition:e=>e.resources.get("DRACONIAN_FIRE").available(1)},aG={newSkill:"TRUE_THRUST",condition:e=>!e.resources.get("DRACONIAN_FIRE").available(1)},nG={newSkill:"DRACONIAN_FURY",condition:e=>e.resources.get("DRACONIAN_FIRE").available(1)},iG={newSkill:"DOOM_SPIKE",condition:e=>!e.resources.get("DRACONIAN_FIRE").available(1)},oG={newSkill:"STARCROSS",condition:e=>e.hasResourceAvailable("STARCROSS_READY")&&e.hasResourceAvailable("LIFE_OF_THE_DRAGON")},lG={newSkill:"STARDIVER",condition:e=>!e.hasResourceAvailable("STARCROSS_READY")};Ba("PIERCING_TALON",15,{potency:[["NEVER",150],["LANCE_MASTERY",200]],applicationDelay:.85,onConfirm:e=>{e.tryConsumeResource("ENHANCED_PIERCING_TALON")},highlightIf:e=>e.hasResourceAvailable("ENHANCED_PIERCING_TALON")});Ba("TRUE_THRUST",1,{replaceIf:[tG],potency:[["NEVER",200],["LANCE_MASTERY",230]],applicationDelay:.76});Ba("RAIDEN_THRUST",76,{startOnHotbar:!1,replaceIf:[aG],potency:[["NEVER",280],["MELEE_MASTERY_DRG",320]],applicationDelay:.62,validateAttempt:e=>e.resources.get("DRACONIAN_FIRE").available(1),highlightIf:e=>e.resources.get("DRACONIAN_FIRE").available(1),onConfirm:e=>{e.hasTraitUnlocked("LANCE_MASTERY_III")&&e.gainScale(1)}});Ba("DISEMBOWEL",18,{autoUpgrade:{trait:"LANCE_MASTERY_IV",otherSkill:"SPIRAL_BLOW"},applicationDelay:1.65,potency:[["NEVER",100],["LANCE_MASTERY",140]],combo:{potency:[["NEVER",220],["LANCE_MASTERY",250]],resource:"DRG_CHAOS_COMBO_TRACKER",resourceValue:1},onConfirm:e=>{e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",1)&&(e.resources.get("POWER_SURGE").gain(1),e.enqueueResourceDrop("POWER_SURGE",31.63))},highlightIf:e=>e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",1)});Ba("SPIRAL_BLOW",96,{autoDowngrade:{trait:"LANCE_MASTERY_IV",otherSkill:"DISEMBOWEL"},applicationDelay:1.38,potency:140,combo:{potency:[["NEVER",300]],resource:"DRG_CHAOS_COMBO_TRACKER",resourceValue:1},onConfirm:e=>{e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",1)&&(e.resources.get("POWER_SURGE").gain(1),e.enqueueResourceDrop("POWER_SURGE",31.38))},highlightIf:e=>e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",1)});Ba("CHAOS_THRUST",50,{autoUpgrade:{trait:"LANCE_MASTERY_II",otherSkill:"CHAOTIC_SPRING"},applicationDelay:1.65,potency:100,combo:{potency:220,resource:"DRG_CHAOS_COMBO_TRACKER",resourceValue:2},positional:{potency:140,comboPotency:260,location:"rear"},onConfirm:(e,t)=>{if(e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",2)){const n=[];e.pushUniversalModifiers(n),e.addDoTPotencies({node:t,effectName:"CHAOS_THRUST_DOT",skillName:"CHAOS_THRUST",tickPotency:40,speedStat:"sks",modifiers:n}),e.addEvent(new be("apply chaos thrust dot",1.65,()=>{e.applyDoT("CHAOS_THRUST_DOT",t)}))}},highlightIf:e=>e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",2)});Ba("CHAOTIC_SPRING",86,{autoDowngrade:{trait:"LANCE_MASTERY_II",otherSkill:"CHAOS_THRUST"},applicationDelay:.45,potency:140,combo:{potency:300,resource:"DRG_CHAOS_COMBO_TRACKER",resourceValue:2},positional:{potency:180,comboPotency:340,location:"rear"},onConfirm:(e,t)=>{if(e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",2)){const n=[];e.pushUniversalModifiers(n),e.addDoTPotencies({node:t,effectName:"CHAOTIC_SPRING_DOT",skillName:"CHAOTIC_SPRING",tickPotency:45,speedStat:"sks",modifiers:n}),e.addEvent(new be("apply chaotic spring dot",.45,()=>{e.applyDoT("CHAOTIC_SPRING_DOT",t)}))}},highlightIf:e=>e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",2)});Ba("WHEELING_THRUST",58,{replaceIf:[Jw],applicationDelay:.67,potency:[["NEVER",100],["MELEE_MASTERY_DRG",140]],combo:{potency:[["NEVER",260],["MELEE_MASTERY_DRG",300]],resource:"DRG_CHAOS_COMBO_TRACKER",resourceValue:3},positional:{potency:[["NEVER",140],["MELEE_MASTERY_DRG",180]],comboPotency:[["NEVER",300],["MELEE_MASTERY_DRG",340]],location:"rear"},highlightIf:e=>e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",3)});Ba("VORPAL_THRUST",4,{autoUpgrade:{trait:"LANCE_MASTERY_IV",otherSkill:"LANCE_BARRAGE"},applicationDelay:1.02,potency:[["NEVER",100],["LANCE_MASTERY",130]],combo:{potency:[["NEVER",250],["LANCE_MASTERY",280]],resource:"DRG_HEAVENS_COMBO_TRACKER",resourceValue:1},highlightIf:e=>e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",1)});Ba("LANCE_BARRAGE",96,{autoDowngrade:{trait:"LANCE_MASTERY_IV",otherSkill:"VORPAL_THRUST"},applicationDelay:.94,potency:130,combo:{potency:340,resource:"DRG_HEAVENS_COMBO_TRACKER",resourceValue:1},highlightIf:e=>e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",1)});Ba("FULL_THRUST",26,{autoUpgrade:{trait:"LANCE_MASTERY_II",otherSkill:"HEAVENS_THRUST"},applicationDelay:1.12,potency:100,combo:{potency:380,resource:"DRG_HEAVENS_COMBO_TRACKER",resourceValue:2},highlightIf:e=>e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",2)});Ba("HEAVENS_THRUST",86,{autoDowngrade:{trait:"LANCE_MASTERY_II",otherSkill:"FULL_THRUST"},applicationDelay:.71,potency:[["NEVER",100],["MELEE_MASTERY_DRG",160]],combo:{potency:[["NEVER",400],["MELEE_MASTERY_DRG",460]],resource:"DRG_HEAVENS_COMBO_TRACKER",resourceValue:2},highlightIf:e=>e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",2)});Ba("FANG_AND_CLAW",56,{replaceIf:[eG],applicationDelay:.62,potency:[["NEVER",100],["MELEE_MASTERY_DRG",140]],combo:{potency:[["NEVER",260],["MELEE_MASTERY_DRG",300]],resource:"DRG_HEAVENS_COMBO_TRACKER",resourceValue:3},positional:{potency:[["NEVER",140],["MELEE_MASTERY_DRG",180]],comboPotency:[["NEVER",300],["MELEE_MASTERY_DRG",340]],location:"flank"},highlightIf:e=>e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",3)});Ba("DRAKESBANE",64,{startOnHotbar:!1,applicationDelay:1,potency:[["NEVER",380],["LANCE_MASTERY_II",400],["MELEE_MASTERY_DRG",460]],validateAttempt:e=>e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",4)||e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",4),onConfirm:e=>{(e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",4)||e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",4))&&e.refreshBuff("DRACONIAN_FIRE",0)},highlightIf:e=>e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",4)||e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",4)});Ba("DOOM_SPIKE",40,{replaceIf:[nG],potency:110,falloff:0,applicationDelay:1.29});Ba("DRACONIAN_FURY",82,{replaceIf:[iG],startOnHotbar:!1,potency:130,falloff:0,applicationDelay:.76,validateAttempt:e=>e.resources.get("DRACONIAN_FIRE").available(1),highlightIf:e=>e.resources.get("DRACONIAN_FIRE").available(1),onConfirm:e=>{e.hasTraitUnlocked("LANCE_MASTERY_III")&&e.gainScale(1)}});Ba("SONIC_THRUST",62,{applicationDelay:.8,potency:100,combo:{potency:120,resource:"DRG_AOE_COMBO_TRACKER",resourceValue:1},falloff:0,highlightIf:e=>e.hasResourceExactly("DRG_AOE_COMBO_TRACKER",1),onConfirm:e=>{e.hasResourceExactly("DRG_AOE_COMBO_TRACKER",1)&&(e.resources.get("POWER_SURGE").gain(1),e.enqueueResourceDrop("POWER_SURGE",30.79))}});Ba("COERTHAN_TORMENT",72,{applicationDelay:.49,potency:100,combo:{potency:150,resource:"DRG_AOE_COMBO_TRACKER",resourceValue:2},falloff:0,highlightIf:e=>e.hasResourceExactly("DRG_AOE_COMBO_TRACKER",2),onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_COERTHAN_TORMENT")&&e.hasResourceExactly("DRG_AOE_COMBO_TRACKER",2)&&e.refreshBuff("DRACONIAN_FIRE",0)}});ze("DRG","LIFE_SURGE",6,"cd_LIFE_SURGE",{rscType:"LIFE_SURGE",applicationDelay:0,cooldown:40,maxCharges:2});Si("WYRMWIND_THRUST",90,"cd_WYRMWIND_THRUST",{applicationDelay:1.2,validateAttempt:e=>e.hasResourceExactly("FIRSTMINDS_FOCUS",2),highlightIf:e=>e.hasResourceExactly("FIRSTMINDS_FOCUS",2),potency:[["NEVER",420],["MELEE_MASTERY_DRG",440]],falloff:.5,cooldown:10,onConfirm:e=>{e.tryConsumeResource("FIRSTMINDS_FOCUS",!0)}});ze("DRG","LANCE_CHARGE",30,"cd_LANCE_CHARGE",{rscType:"LANCE_CHARGE",applicationDelay:.62,cooldown:60});ze("DRG","BATTLE_LITANY",52,"cd_BATTLE_LITANY",{rscType:"BATTLE_LITANY",applicationDelay:.62,cooldown:120});Si("GEIRSKOGUL",60,"cd_GEIRSKOGUL",{applicationDelay:.67,potency:[["NEVER",200],["LANCE_MASTERY_III",280]],falloff:.5,cooldown:60,onConfirm:e=>{e.refreshBuff("LIFE_OF_THE_DRAGON",0),e.refreshBuff("NASTROND_READY",0),e.addEvent(new be("drop starcross when life drops",20,()=>{e.tryConsumeResource("STARCROSS_READY")}))}});Si("NASTROND",70,"cd_NASTROND",{applicationDelay:.76,potency:[["NEVER",600],["LANCE_MASTERY_III",720]],falloff:.5,cooldown:2,validateAttempt:e=>e.resources.get("LIFE_OF_THE_DRAGON").available(1)&&e.resources.get("NASTROND_READY").available(1),highlightIf:e=>e.resources.get("LIFE_OF_THE_DRAGON").available(1)&&e.resources.get("NASTROND_READY").available(1),onConfirm:e=>{e.tryConsumeResource("NASTROND_READY")}});Si("JUMP",30,"cd_JUMP",{autoUpgrade:{trait:"JUMP_MASTERY",otherSkill:"HIGH_JUMP"},applicationDelay:.49,animationLock:.8,potency:320,cooldown:30,onConfirm:e=>{e.refreshBuff("DIVE_READY",0)}});Si("HIGH_JUMP",74,"cd_HIGH_JUMP",{autoDowngrade:{trait:"JUMP_MASTERY",otherSkill:"JUMP"},applicationDelay:.49,animationLock:.8,potency:400,cooldown:30,onConfirm:e=>{e.refreshBuff("DIVE_READY",0)}});Si("MIRAGE_DIVE",68,"cd_MIRAGE_DIVE",{applicationDelay:.8,validateAttempt:e=>e.hasResourceAvailable("DIVE_READY"),highlightIf:e=>e.hasResourceAvailable("DIVE_READY"),potency:380,cooldown:1,onConfirm:e=>{e.tryConsumeResource("DIVE_READY")}});Si("DRAGONFIRE_DIVE",50,"cd_DRAGONFIRE_DIVE",{applicationDelay:.8,animationLock:.8,potency:500,falloff:.5,cooldown:120,onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_DRAGONFIRE_DIVE")&&e.refreshBuff("DRAGONS_FLIGHT",0)}});Si("RISE_OF_THE_DRAGON",92,"cd_RISE_OF_THE_DRAGON",{applicationDelay:1.16,potency:550,falloff:.5,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("DRAGONS_FLIGHT"),highlightIf:e=>e.hasResourceAvailable("DRAGONS_FLIGHT"),onConfirm:e=>{e.tryConsumeResource("DRAGONS_FLIGHT")}});Si("STARDIVER",80,"cd_STARDIVER",{replaceIf:[oG],applicationDelay:1.29,animationLock:1.5,potency:[["NEVER",720],["MELEE_MASTERY_DRG",840]],falloff:.4,cooldown:30,validateAttempt:e=>e.hasResourceAvailable("LIFE_OF_THE_DRAGON"),onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_STARDIVER")&&e.refreshBuff("STARCROSS_READY",0)}});Si("STARCROSS",100,"cd_STARCROSS",{startOnHotbar:!1,replaceIf:[lG],applicationDelay:.98,potency:1e3,falloff:.4,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("STARCROSS_READY")&&e.hasResourceAvailable("LIFE_OF_THE_DRAGON"),highlightIf:e=>e.hasResourceAvailable("STARCROSS_READY")&&e.hasResourceAvailable("LIFE_OF_THE_DRAGON"),onConfirm:e=>{e.tryConsumeResource("STARCROSS_READY")}});Si("ELUSIVE_JUMP",35,"cd_ELUSIVE_JUMP",{potency:0,applicationDelay:0,animationLock:1,cooldown:30,onConfirm:e=>{e.refreshBuff("ENHANCED_PIERCING_TALON",0)}});Si("WINGED_GLIDE",45,"cd_WINGED_GLIDE",{potency:0,applicationDelay:0,animationLock:Vt,cooldown:60,maxCharges:2});const $O=["SONIC_BREAK_DOT","BOW_SHOCK_DOT"],sG=Object.keys(ET).filter(e=>!$O.includes(e));Object.keys(ET).forEach(e=>Ft(e,`GNB/${Ge[e].name}.png`));class rG extends Wt{jobSpecificOtherTargetedBuffViewProps(){return[...$O.map(t=>this.makeCommonTimer(t,!1))]}jobSpecificSelfTargetedBuffViewProps(){return sG.map(t=>t==="ROYAL_GUARD"?this.makeCommonTimerless(t):this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){var A,R;const n=this.state.resources,o=n.get("GNB_COMBO_TRACKER"),l=n.get("GNB_AOE_COMBO_TRACKER"),r=n.get("POWDER_GAUGE").availableAmount(),d=n.get("ROYAL_GUARD").availableAmount(),h=o.available(1)?(A=o.pendingChange)==null?void 0:A.timeTillEvent:l.available(1)?(R=l.pendingChange)==null?void 0:R.timeTillEvent:void 0;return[{kind:"bar",name:C({en:"Combo Timer",zh:"连击监控"}),color:t.rdm.manaStack,progress:h?h/30:0,valueString:(h==null?void 0:h.toFixed(3))??"N/A"},{kind:"counter",name:C({en:"Royal Guard",zh:"王室亲卫"}),color:t.rdm.manaStack,currentStacks:d,maxStacks:1},{kind:"counter",name:C({en:"Powder Gauge",zh:"晶壤"}),color:t.rdm.manaStack,currentStacks:r,maxStacks:this.state.hasTraitUnlocked("CARTRIDGE_CHARGE_II")?3:2}]}}const Lt=(e,t,n)=>{Ye("GNB",e,t,n??{})};Lt("POWDER_GAUGE",3,{warnOnOvercap:!0});Lt("ROYAL_GUARD",1);Lt("NO_MERCY",1,{timeout:20});Lt("AURORA",1,{timeout:18});Lt("BOW_SHOCK_DOT",1,{timeout:15});Lt("CAMOUFLAGE",1,{timeout:20});Lt("HEART_OF_CORUNDUM",1,{timeout:8});Lt("CLARITY_OF_CORUNDUM",1,{timeout:15});Lt("CATHARSIS_OF_CORUNDUM",1,{timeout:20});Lt("NEBULA",1,{timeout:15});Lt("GREAT_NEBULA",1,{timeout:15});Lt("HEART_OF_LIGHT",1,{timeout:15});Lt("HEART_OF_STONE",1,{timeout:8});Lt("READY_TO_BLAST",1,{timeout:10,warnOnTimeout:!0});Lt("READY_TO_BREAK",1,{timeout:30,warnOnTimeout:!0});Lt("READY_TO_GOUGE",1,{timeout:10,warnOnTimeout:!0});Lt("READY_TO_RAZE",1,{timeout:10,warnOnTimeout:!0});Lt("READY_TO_REIGN",1,{timeout:30,warnOnTimeout:!0});Lt("READY_TO_RIP",1,{timeout:10,warnOnTimeout:!0});Lt("READY_TO_TEAR",1,{timeout:10,warnOnTimeout:!0});Lt("SONIC_BREAK_DOT",1,{timeout:30});Lt("SUPERBOLIDE",1,{timeout:10});Lt("BRUTAL_SHELL",1,{timeout:30});Lt("GNB_COMBO_TRACKER",2,{timeout:30});Lt("GNB_AOE_COMBO_TRACKER",1,{timeout:30});Lt("GNB_GNASHING_COMBO_TRACKER",2,{timeout:30});Lt("GNB_REIGN_COMBO_TRACKER",2,{timeout:30});const Wp=["KEEN_EDGE","BRUTAL_SHELL","SOLID_BARREL"],cG=["DEMON_SLICE","DEMON_SLAUGHTER"],Xp=["GNASHING_FANG","SAVAGE_CLAW","WICKED_TALON"],qp=["REIGN_OF_BEASTS","NOBLE_BLOOD","LION_HEART"];class uG extends Xt{constructor(t){super(t);const n=this.hasTraitUnlocked("ENHANCED_AURORA")?2:1;[new ke("cd_AURORA",60,n,n)].forEach(l=>this.cooldowns.set(l)),this.cooldowns.set(new ke("cd_DOUBLE_DOWN",this.config.adjustedSksGCD(60),1,1)),this.cooldowns.set(new ke("cd_GNASHING_FANG",this.config.adjustedSksGCD(30),1,1));const o=this.hasTraitUnlocked("CARTRIDGE_CHARGE_II")?3:2;this.resources.set(new sn("POWDER_GAUGE",o,0,!0)),this.registerRecurringEvents([{groupedEffects:[{effectName:"SONIC_BREAK_DOT",appliedBy:["SONIC_BREAK"]}]},{groupedEffects:[{effectName:"BOW_SHOCK_DOT",appliedBy:["BOW_SHOCK"]}]}])}get statusPropsGenerator(){return new rG(this)}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("NO_MERCY")&&t.addBuff(H.NoMercy)}fixGNBComboState(t){if(cG.includes(t)){this.tryConsumeResource("GNB_COMBO_TRACKER",!0),this.tryConsumeResource("GNB_REIGN_COMBO_TRACKER",!0),this.tryConsumeResource("GNB_GNASHING_COMBO_TRACKER",!0),this.tryConsumeResource("GNB_AOE_COMBO_TRACKER"),t==="DEMON_SLICE"&&this.setComboState("GNB_AOE_COMBO_TRACKER",1);return}let n="GNB_COMBO_TRACKER",o=-1;Wp.includes(t)?(this.tryConsumeResource("GNB_AOE_COMBO_TRACKER",!0),this.tryConsumeResource("GNB_REIGN_COMBO_TRACKER",!0),this.tryConsumeResource("GNB_GNASHING_COMBO_TRACKER",!0),o=Wp.indexOf(t)):Xp.includes(t)?(this.tryConsumeResource("GNB_REIGN_COMBO_TRACKER",!0),n="GNB_GNASHING_COMBO_TRACKER",o=Xp.indexOf(t)):qp.includes(t)&&(this.tryConsumeResource("GNB_GNASHING_COMBO_TRACKER",!0),n="GNB_REIGN_COMBO_TRACKER",o=qp.indexOf(t));let l=0;o===0?l=1:o===1&&this.hasResourceExactly(n,1)&&(l=2),this.setComboState(n,l)}gainCartridge(t){this.resources.get("POWDER_GAUGE").gain(t)}refreshBuff(t,n){this.addEvent(new be("gain buff",n,()=>{this.resources.get(t).gain(1),this.enqueueResourceDrop(t)}))}}const dn=(e,t,n)=>{const o=Ue(n.onConfirm,l=>{["SONIC_BREAK","BURST_STRIKE","FATED_CIRCLE","DOUBLE_DOWN","LIGHTNING_SHOT"].includes(e)||l.fixGNBComboState(e),l.tryConsumeResource("READY_TO_BLAST"),l.tryConsumeResource("READY_TO_RAZE"),l.tryConsumeResource("READY_TO_RIP"),l.tryConsumeResource("READY_TO_TEAR"),l.tryConsumeResource("READY_TO_GOUGE")});return na("GNB",e,t,{...n,onConfirm:o,recastTime:l=>l.config.adjustedSksGCD(),jobPotencyModifiers:l=>l.hasResourceAvailable("NO_MERCY")?[X.NoMercy]:[]})},la=(e,t,n,o)=>ot("GNB",e,t,n,{...o,jobPotencyModifiers:l=>l.hasResourceAvailable("NO_MERCY")?[X.NoMercy]:[]}),JO={newSkill:"GNASHING_FANG",condition:e=>e.resources.get("GNB_GNASHING_COMBO_TRACKER").availableAmount()===0},eb={newSkill:"SAVAGE_CLAW",condition:e=>e.resources.get("GNB_GNASHING_COMBO_TRACKER").availableAmount()===1},tb={newSkill:"WICKED_TALON",condition:e=>e.resources.get("GNB_GNASHING_COMBO_TRACKER").availableAmount()===2},ab={newSkill:"REIGN_OF_BEASTS",condition:e=>e.resources.get("GNB_REIGN_COMBO_TRACKER").availableAmount()===0},nb={newSkill:"NOBLE_BLOOD",condition:e=>e.resources.get("GNB_REIGN_COMBO_TRACKER").availableAmount()===1},ib={newSkill:"LION_HEART",condition:e=>e.resources.get("GNB_REIGN_COMBO_TRACKER").availableAmount()===2},dG={newSkill:"HYPERVELOCITY",condition:e=>e.hasResourceAvailable("READY_TO_BLAST")},EG={newSkill:"FATED_BRAND",condition:e=>e.hasResourceAvailable("READY_TO_RAZE")},hG={newSkill:"JUGULAR_RIP",condition:e=>e.hasResourceAvailable("READY_TO_RIP")},fG={newSkill:"ABDOMEN_TEAR",condition:e=>e.hasResourceAvailable("READY_TO_TEAR")},AG={newSkill:"EYE_GOUGE",condition:e=>e.hasResourceAvailable("READY_TO_GOUGE")},mG={newSkill:"ROYAL_GUARD",condition:e=>!e.hasResourceAvailable("ROYAL_GUARD")},RG={newSkill:"RELEASE_ROYAL_GUARD",condition:e=>e.hasResourceAvailable("ROYAL_GUARD")};dn("LIGHTNING_SHOT",15,{potency:150,applicationDelay:.72});dn("KEEN_EDGE",1,{potency:[["NEVER",150],["MELEE_MASTERY_TANK",200],["MELEE_MASTERY_II_TANK",300]],applicationDelay:.89});dn("BRUTAL_SHELL",4,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",160],["MELEE_MASTERY_II_TANK",240]],combo:{potency:[["NEVER",240],["MELEE_MASTERY_TANK",300],["MELEE_MASTERY_II_TANK",380]],resource:"GNB_COMBO_TRACKER",resourceValue:1},applicationDelay:1.07,onConfirm:e=>{e.hasResourceExactly("GNB_COMBO_TRACKER",1)&&e.refreshBuff("BRUTAL_SHELL",0)},highlightIf:e=>e.hasResourceExactly("GNB_COMBO_TRACKER",1)});dn("SOLID_BARREL",26,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",140],["MELEE_MASTERY_II_TANK",240]],combo:{potency:[["NEVER",320],["MELEE_MASTERY_TANK",360],["MELEE_MASTERY_II_TANK",460]],resource:"GNB_COMBO_TRACKER",resourceValue:2},applicationDelay:1.07,onConfirm:e=>{e.hasResourceExactly("GNB_COMBO_TRACKER",2)&&e.gainCartridge(1)},highlightIf:e=>e.hasResourceExactly("GNB_COMBO_TRACKER",2)});dn("DEMON_SLICE",10,{potency:100,falloff:0,applicationDelay:.62});dn("DEMON_SLAUGHTER",40,{potency:100,combo:{potency:160,resource:"GNB_AOE_COMBO_TRACKER",resourceValue:1},falloff:0,applicationDelay:.62,onConfirm:e=>{e.hasResourceExactly("GNB_AOE_COMBO_TRACKER",1)&&e.gainCartridge(1)},highlightIf:e=>e.hasResourceExactly("GNB_AOE_COMBO_TRACKER",1)});dn("BURST_STRIKE",30,{potency:[["NEVER",400],["MELEE_MASTERY_II_TANK",460]],applicationDelay:.71,validateAttempt:e=>e.hasResourceAvailable("POWDER_GAUGE"),onConfirm:e=>{e.tryConsumeResource("POWDER_GAUGE"),e.hasTraitUnlocked("ENHANCED_CONTINUATION")&&e.refreshBuff("READY_TO_BLAST",0)},highlightIf:e=>e.hasResourceAvailable("POWDER_GAUGE")});dn("FATED_CIRCLE",72,{potency:300,falloff:0,applicationDelay:.54,validateAttempt:e=>e.hasResourceAvailable("POWDER_GAUGE"),onConfirm:e=>{e.tryConsumeResource("POWDER_GAUGE"),e.hasTraitUnlocked("ENHANCED_CONTINUATION_II")&&e.refreshBuff("READY_TO_RAZE",0)},highlightIf:e=>e.hasResourceAvailable("POWDER_GAUGE")});la("BLOODFEST",76,"cd_BLOODFEST",{applicationDelay:0,cooldown:120,maxCharges:1,onConfirm:e=>{const t=e.hasTraitUnlocked("CARTRIDGE_CHARGE_II")?3:2;e.gainCartridge(t),e.hasTraitUnlocked("ENHANCED_BLOODFEST")&&e.refreshBuff("READY_TO_REIGN",0)}});la("NO_MERCY",2,"cd_NO_MERCY",{applicationDelay:0,cooldown:60,maxCharges:1,onConfirm:e=>{e.refreshBuff("NO_MERCY",.62),e.refreshBuff("READY_TO_BREAK",0)}});dn("SONIC_BREAK",54,{potency:300,applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("READY_TO_BREAK"),onConfirm:(e,t)=>{e.tryConsumeResource("READY_TO_BREAK");const n=[];e.hasResourceAvailable("NO_MERCY")&&n.push(X.NoMercy),e.addDoTPotencies({node:t,effectName:"SONIC_BREAK_DOT",skillName:"SONIC_BREAK",tickPotency:60,speedStat:"sks",modifiers:n})},onApplication:(e,t)=>e.applyDoT("SONIC_BREAK_DOT",t),highlightIf:e=>e.hasResourceAvailable("READY_TO_BREAK")});dn("GNASHING_FANG",60,{replaceIf:[eb,tb],potency:[["NEVER",380],["MELEE_MASTERY_II_TANK",500]],applicationDelay:.62,recastTime:e=>e.config.adjustedSksGCD(),validateAttempt:e=>e.hasResourceAvailable("POWDER_GAUGE"),onConfirm:e=>{e.refreshBuff("READY_TO_RIP",0),e.tryConsumeResource("POWDER_GAUGE")},highlightIf:e=>e.hasResourceAvailable("POWDER_GAUGE")&&!e.hasResourceAvailable("GNB_REIGN_COMBO_TRACKER"),secondaryCooldown:{cdName:"cd_GNASHING_FANG",cooldown:30,maxCharges:1}});dn("SAVAGE_CLAW",60,{startOnHotbar:!1,replaceIf:[JO,tb],potency:[["NEVER",460],["MELEE_MASTERY_II_TANK",560]],applicationDelay:.62,validateAttempt:e=>e.hasResourceExactly("GNB_GNASHING_COMBO_TRACKER",1),onConfirm:e=>{e.refreshBuff("READY_TO_TEAR",0)},highlightIf:e=>e.hasResourceExactly("GNB_GNASHING_COMBO_TRACKER",1)});dn("WICKED_TALON",60,{startOnHotbar:!1,replaceIf:[JO,eb],potency:[["NEVER",540],["MELEE_MASTERY_II_TANK",620]],applicationDelay:1.16,validateAttempt:e=>e.hasResourceExactly("GNB_GNASHING_COMBO_TRACKER",2),onConfirm:e=>{e.refreshBuff("READY_TO_GOUGE",0)},highlightIf:e=>e.hasResourceExactly("GNB_GNASHING_COMBO_TRACKER",2)});dn("DOUBLE_DOWN",90,{potency:1200,falloff:.15,applicationDelay:.72,recastTime:e=>e.config.adjustedSksGCD(),validateAttempt:e=>e.hasResourceAvailable("POWDER_GAUGE"),onConfirm:e=>{e.tryConsumeResource("POWDER_GAUGE")},highlightIf:e=>e.hasResourceAvailable("POWDER_GAUGE"),secondaryCooldown:{cdName:"cd_DOUBLE_DOWN",cooldown:60,maxCharges:1}});dn("REIGN_OF_BEASTS",100,{replaceIf:[nb,ib],potency:1e3,falloff:.6,applicationDelay:1.16,validateAttempt:e=>e.hasResourceAvailable("READY_TO_REIGN"),onConfirm:e=>{e.tryConsumeResource("READY_TO_REIGN")},highlightIf:e=>e.hasResourceAvailable("READY_TO_REIGN")});dn("NOBLE_BLOOD",100,{startOnHotbar:!1,replaceIf:[ab,ib],potency:1100,falloff:.6,applicationDelay:1.65,validateAttempt:e=>e.hasResourceExactly("GNB_REIGN_COMBO_TRACKER",1),highlightIf:e=>e.hasResourceExactly("GNB_REIGN_COMBO_TRACKER",1)});dn("LION_HEART",100,{startOnHotbar:!1,replaceIf:[ab,nb],potency:1200,falloff:.6,applicationDelay:1.79,validateAttempt:e=>e.hasResourceExactly("GNB_REIGN_COMBO_TRACKER",2),highlightIf:e=>e.hasResourceExactly("GNB_REIGN_COMBO_TRACKER",2)});la("CONTINUATION",70,"cd_CONTINUATION",{replaceIf:[dG,EG,hG,fG,AG],applicationDelay:0,potency:0,cooldown:1,validateAttempt:e=>!1});la("HYPERVELOCITY",86,"cd_HYPERVELOCITY",{startOnHotbar:!1,applicationDelay:.76,potency:200,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("READY_TO_BLAST"),highlightIf:e=>e.hasResourceAvailable("READY_TO_BLAST"),onConfirm:e=>{e.tryConsumeResource("READY_TO_BLAST")}});la("FATED_BRAND",96,"cd_FATED_BRAND",{startOnHotbar:!1,applicationDelay:1.16,potency:120,falloff:0,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("READY_TO_RAZE"),highlightIf:e=>e.hasResourceAvailable("READY_TO_RAZE"),onConfirm:e=>{e.tryConsumeResource("READY_TO_RAZE")}});la("JUGULAR_RIP",70,"cd_JUGULAR_RIP",{startOnHotbar:!1,applicationDelay:.8,potency:240,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("READY_TO_RIP"),highlightIf:e=>e.hasResourceAvailable("READY_TO_RIP"),onConfirm:e=>{e.tryConsumeResource("READY_TO_RIP")}});la("ABDOMEN_TEAR",70,"cd_ABDOMEN_TEAR",{startOnHotbar:!1,applicationDelay:.76,potency:280,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("READY_TO_TEAR"),highlightIf:e=>e.hasResourceAvailable("READY_TO_TEAR"),onConfirm:e=>{e.tryConsumeResource("READY_TO_TEAR")}});la("EYE_GOUGE",70,"cd_EYE_GOUGE",{startOnHotbar:!1,applicationDelay:.98,potency:320,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("READY_TO_GOUGE"),highlightIf:e=>e.hasResourceAvailable("READY_TO_GOUGE"),onConfirm:e=>{e.tryConsumeResource("READY_TO_GOUGE")}});la("DANGER_ZONE",18,"cd_DANGER_ZONE",{autoUpgrade:{trait:"DANGER_ZONE_MASTERY",otherSkill:"BLASTING_ZONE"},applicationDelay:.62,potency:250,cooldown:30});la("BLASTING_ZONE",80,"cd_BLASTING_ZONE",{startOnHotbar:!1,applicationDelay:.62,potency:800,cooldown:30});la("BOW_SHOCK",62,"cd_BOW_SHOCK",{applicationDelay:.62,potency:150,falloff:0,cooldown:60,onConfirm:(e,t)=>{const n=[];e.hasResourceAvailable("NO_MERCY")&&n.push(X.NoMercy),e.addDoTPotencies({node:t,effectName:"BOW_SHOCK_DOT",skillName:"BOW_SHOCK",tickPotency:60,speedStat:"sks",modifiers:n})},onApplication:(e,t)=>e.applyDoT("BOW_SHOCK_DOT",t)});la("TRAJECTORY",56,"cd_TRAJECTORY",{animationLock:Vt,cooldown:30,maxCharges:2,applicationDelay:.66,drawsAggro:!0});la("HEART_OF_STONE",68,"cd_HEART_OF_STONE",{autoUpgrade:{trait:"HEART_OF_STONE_MASTERY",otherSkill:"HEART_OF_CORUNDUM"},applicationDelay:.62,cooldown:25,onApplication:e=>{e.refreshBuff("HEART_OF_STONE",0)}});la("HEART_OF_CORUNDUM",82,"cd_HEART_OF_CORUNDUM",{startOnHotbar:!1,applicationDelay:.62,cooldown:25,onApplication:e=>{e.refreshBuff("CATHARSIS_OF_CORUNDUM",0),e.refreshBuff("HEART_OF_CORUNDUM",0),e.refreshBuff("CLARITY_OF_CORUNDUM",0)}});la("SUPERBOLIDE",50,"cd_SUPERBOLIDE",{applicationDelay:0,cooldown:360,onConfirm:e=>{e.refreshBuff("SUPERBOLIDE",0)}});la("CAMOUFLAGE",6,"cd_CAMOUFLAGE",{applicationDelay:.62,cooldown:90,onConfirm:e=>{e.refreshBuff("CAMOUFLAGE",0)}});la("NEBULA",38,"cd_NEBULA",{autoUpgrade:{trait:"NEBULA_MASTERY",otherSkill:"GREAT_NEBULA"},applicationDelay:.56,cooldown:120,onConfirm:e=>{e.refreshBuff("NEBULA",0)}});la("GREAT_NEBULA",38,"cd_GREAT_NEBULA",{startOnHotbar:!1,applicationDelay:.56,cooldown:120,onConfirm:e=>{e.refreshBuff("GREAT_NEBULA",0)}});la("HEART_OF_LIGHT",64,"cd_HEART_OF_LIGHT",{applicationDelay:.62,cooldown:60,onConfirm:e=>{e.refreshBuff("HEART_OF_LIGHT",0)}});la("AURORA",45,"cd_AURORA",{applicationDelay:.62,cooldown:60,onConfirm:e=>{e.refreshBuff("AURORA",0)},maxCharges:2});la("ROYAL_GUARD",10,"cd_ROYAL_GUARD",{applicationDelay:0,cooldown:2,validateAttempt:e=>!e.hasResourceAvailable("ROYAL_GUARD"),onConfirm:e=>{e.resources.get("ROYAL_GUARD").gain(1)},replaceIf:[RG],secondaryCooldown:{cdName:"cd_RELEASE_ROYAL_GUARD",cooldown:1,maxCharges:1}});la("RELEASE_ROYAL_GUARD",10,"cd_RELEASE_ROYAL_GUARD",{startOnHotbar:!1,replaceIf:[mG],applicationDelay:0,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("ROYAL_GUARD"),onConfirm:e=>{e.tryConsumeResource("ROYAL_GUARD")},secondaryCooldown:{cdName:"cd_ROYAL_GUARD",cooldown:2,maxCharges:1}});Object.keys(hT).forEach(e=>Ft(e,`MCH/${Ge[e].name}.png`));class TG extends Wt{jobSpecificOtherTargetedBuffViewProps(){return[...["WILDFIRE","BIOBLASTER"].map(t=>this.makeCommonTimer(t,!1))]}jobSpecificSelfTargetedBuffViewProps(){return[...Object.keys(hT).filter(t=>!(t==="WILDFIRE"||t==="BIOBLASTER")).map(t=>this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){const n=this.state.resources,o=n.get("HEAT_GAUGE").availableAmount(),l=n.get("BATTERY_GAUGE").availableAmount(),r=n.get("QUEEN_PUNCHES"),d=n.get("QUEEN_FINISHERS"),h=r.availableAmount()+d.availableAmount(),E=r.maxValue+d.maxValue;return[{kind:"bar",name:C({en:"Heat",zh:"枪管热度"}),color:t.mch.heat,progress:o/100,valueString:o.toFixed(0)},{kind:"bar",name:C({en:"Battery",zh:"电量"}),color:t.mch.battery,progress:l/100,valueString:l.toFixed(0)},{kind:"bar",name:C({en:"Queen Hits",zh:"人偶攻击命中"}),color:t.mch.battery,progress:h/E,valueString:h.toFixed(0)}]}}const Fa=(e,t,n)=>{Ye("MCH",e,t,n??{})};Fa("HEAT_GAUGE",100,{warnOnOvercap:!0});Fa("BATTERY_GAUGE",100,{warnOnOvercap:!0});Fa("REASSEMBLED",1,{timeout:5,warnOnTimeout:!0});Fa("OVERHEATED",5,{timeout:10,warnOnTimeout:!0});Fa("WILDFIRE",1,{timeout:10});Fa("WILDFIRE_SELF",1,{timeout:10});Fa("FLAMETHROWER",1,{timeout:10});Fa("BIOBLASTER",1,{timeout:15});Fa("TACTICIAN",1,{timeout:15});Fa("HYPERCHARGED",1,{timeout:30,warnOnTimeout:!0});Fa("EXCAVATOR_READY",1,{timeout:30,warnOnTimeout:!0});Fa("FULL_METAL_MACHINIST",1,{timeout:30,warnOnTimeout:!0});Fa("HEAT_COMBO",2,{timeout:30});Fa("QUEEN",7);Fa("QUEEN_PUNCHES",5);Fa("QUEEN_FINISHERS",2);Fa("WILDFIRE_HITS",6);Fa("BATTERY_BONUS",50);const SG=["HEATED_CLEAN_SHOT","HEATED_SLUG_SHOT","HEATED_SPLIT_SHOT","SPREAD_SHOT","SCATTERGUN"],Zp=["CHAIN_SAW","EXCAVATOR","FULL_METAL_FIELD","SCATTERGUN","BIOBLASTER","SPREAD_SHOT"];class IG extends Xt{constructor(n){super(n);Z(this,"handleQueenPunch",()=>{if(!this.hasResourceAvailable("QUEEN_PUNCHES")){this.handleQueenFinisher();return}const n=this.resources.get("QUEEN").node;n!==void 0&&this.resolveQueenPotency(n),this.resources.get("QUEEN_PUNCHES").consume(1),this.hasResourceAvailable("QUEEN_PUNCHES")?this.addEvent(new be("queen punch",1.56,()=>this.handleQueenPunch())):this.addEvent(new be("queen finisher",1.56,()=>this.handleQueenFinisher()))});Z(this,"handleQueenFinisher",()=>{if(!this.hasResourceAvailable("QUEEN_FINISHERS"))return;const n=this.resources.get("QUEEN").node;n!==void 0&&this.resolveQueenPotency(n),this.resources.get("QUEEN_FINISHERS").consume(1),this.hasResourceAvailable("QUEEN_FINISHERS")?this.addEvent(new be("queen finisher",2,()=>this.handleQueenFinisher())):(this.tryConsumeResource("BATTERY_BONUS",!0),this.addEvent(new be("expire queen",5,()=>{this.tryConsumeResource("QUEEN",!0)})))});this.cooldowns.set(new ke("cd_AIR_ANCHOR",this.config.adjustedSksGCD(40),1,1)),this.cooldowns.set(new ke("cd_CHAINSAW",this.config.adjustedSksGCD(60),1,1)),this.hasTraitUnlocked("QUEENS_GAMBIT")||(this.resources.set(new sn("QUEEN_FINISHERS",1,0)),this.resources.set(new sn("QUEEN",6,0))),this.hasTraitUnlocked("ENHANCED_REASSEMBLE")||this.cooldowns.set(new ke("cd_REASSEMBLE",55,1,1)),this.hasTraitUnlocked("ENHANCED_MULTI_WEAPON")||this.cooldowns.set(new ke("cd_DRILL",this.config.adjustedSksGCD(20),1,1)),this.hasTraitUnlocked("CHARGED_ACTION_MASTERY")||(this.cooldowns.set(new ke("cd_DOUBLE_CHECK",30,2,2)),this.cooldowns.set(new ke("cd_CHECKMATE",30,2,2))),this.hasTraitUnlocked("ENHANCED_TACTICIAN")||this.cooldowns.set(new ke("cd_TACTICIAN",120,1,1)),this.registerRecurringEvents([{groupedEffects:[{effectName:"BIOBLASTER",appliedBy:["BIOBLASTER"]}]},{groupedEffects:[{effectName:"FLAMETHROWER",appliedBy:["FLAMETHROWER"],isGroundTargeted:!0,exclude:!0}]}],["ROOK_AUTOTURRET","AUTOMATON_QUEEN","WILDFIRE"])}get statusPropsGenerator(){return new TG(this)}jobSpecificRegisterRecurringEvents(){const n=()=>{this.handleDoTTick("FLAMETHROWER"),this.getDisplayTime()>=0&&N.reportDotTick(this.time,"FLAMETHROWER"),this.addEvent(new be("Flamethrower tick",1,()=>{n()}))};let o=this.config.timeTillFirstManaTick+this.dotTickOffset;for(;o>1;)o--;this.addEvent(new be("initial Flamethrower tick",o,n))}cancelChanneledSkills(){this.tryConsumeResource("FLAMETHROWER")}processComboStatus(n){if(!SG.includes(n))return;const o=this.resources.get("HEAT_COMBO").availableAmount();let l=0;o===0&&n==="HEATED_SPLIT_SHOT"?l=1:o===1&&n==="HEATED_SLUG_SHOT"&&(l=2),this.setComboState("HEAT_COMBO",l)}gainResource(n,o){this.resources.get(n).gain(o)}resolveQueenPotency(n){const o=this.resources.get("QUEEN_PUNCHES").availableAmount()+this.resources.get("QUEEN_FINISHERS").availableAmount(),l=this.resources.get("QUEEN").availableAmount()-o;if(l<0)return;const r=n.getDotPotencies("QUEEN")[l];this.hasResourceAvailable("TINCTURE")&&r.modifiers.push(X.Tincture),r.snapshotTime=this.getDisplayTime(),N.resolvePotency(r)}calculateQueenPotency(n,o){const l=this.resources.get("BATTERY_BONUS").availableAmount(),r=(o-n)*(l/50);return Math.floor((n+r)*.89)}expireWildfire(){if(!this.hasResourceAvailable("WILDFIRE_HITS"))return;this.tryConsumeResource("WILDFIRE_SELF"),this.tryConsumeResource("WILDFIRE");const n=this.hasTraitUnlocked("ENHANCED_WILD_FIRE")?240:100,o=Math.min(this.resources.get("WILDFIRE_HITS").availableAmount(),6)*n,l=this.resources.get("WILDFIRE").node;if(l===void 0)return;const r=l.getDotPotencies("WILDFIRE")[0];r.base=o,N.resolvePotency(r),this.tryConsumeResource("WILDFIRE_HITS",!0)}}const _n=(e,t,n)=>{const o=Ue(n.onConfirm,l=>l.processComboStatus(e),l=>{e!=="FULL_METAL_FIELD"&&l.tryConsumeResource("REASSEMBLED")},l=>{l.hasResourceAvailable("WILDFIRE_SELF")&&l.resources.get("WILDFIRE_HITS").gain(1)},l=>{Zp.includes(e)||l.tryConsumeResource("OVERHEATED")});return na("MCH",e,t,{...n,onConfirm:o,jobPotencyModifiers:l=>{const r=[];return(l.hasResourceAvailable("REASSEMBLED")||e==="FULL_METAL_FIELD")&&r.push(X.AutoCDH),l.hasResourceAvailable("OVERHEATED")&&!Zp.includes(e)&&r.push(X.Overheated),r}})},io=(e,t,n,o)=>ot("MCH",e,t,n,o),JT=(e,t,n,o)=>{const l=Ue(o.onConfirm);return ze("MCH",e,t,n,{...o,onConfirm:l})};_n("HEATED_SPLIT_SHOT",54,{potency:[["NEVER",180],["MARKSMANS_MASTERY",200],["MARKSMANS_MASTERY_II",220]],applicationDelay:.8,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.gainResource("HEAT_GAUGE",5)});_n("HEATED_SLUG_SHOT",60,{potency:[["NEVER",100],["MARKSMANS_MASTERY",120],["MARKSMANS_MASTERY_II",140]],combo:{potency:[["NEVER",280],["MARKSMANS_MASTERY",300],["MARKSMANS_MASTERY_II",320]],resource:"HEAT_COMBO",resourceValue:1},applicationDelay:.8,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.gainResource("HEAT_GAUGE",5),highlightIf:e=>e.hasResourceExactly("HEAT_COMBO",1)});_n("HEATED_CLEAN_SHOT",64,{potency:[["NEVER",100],["MARKSMANS_MASTERY",120],["MARKSMANS_MASTERY_II",160]],combo:{potency:[["NEVER",360],["MARKSMANS_MASTERY",380],["MARKSMANS_MASTERY_II",420]],resource:"HEAT_COMBO",resourceValue:2},applicationDelay:.8,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>{e.gainResource("HEAT_GAUGE",5),e.gainResource("BATTERY_GAUGE",10)},highlightIf:e=>e.hasResourceExactly("HEAT_COMBO",2)});JT("REASSEMBLE",10,"cd_REASSEMBLE",{rscType:"REASSEMBLED",applicationDelay:0,cooldown:55,maxCharges:2});const $h=620;_n("DRILL",58,{potency:$h,applicationDelay:1.15,recastTime:e=>e.config.adjustedSksGCD(),secondaryCooldown:{cdName:"cd_DRILL",cooldown:20,maxCharges:2}});_n("HOT_SHOT",4,{autoUpgrade:{trait:"HOT_SHOT_MASTERY",otherSkill:"AIR_ANCHOR"},potency:240,applicationDelay:1.15,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.gainResource("BATTERY_GAUGE",20),secondaryCooldown:{cdName:"cd_AIR_ANCHOR",cooldown:40,maxCharges:1}});_n("AIR_ANCHOR",76,{startOnHotbar:!1,potency:$h,applicationDelay:1.15,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.gainResource("BATTERY_GAUGE",20),secondaryCooldown:{cdName:"cd_AIR_ANCHOR",cooldown:40,maxCharges:1}});_n("CHAIN_SAW",90,{replaceIf:[{newSkill:"EXCAVATOR",condition:e=>e.hasResourceAvailable("EXCAVATOR_READY")}],potency:$h,falloff:.25,applicationDelay:1.03,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>{e.gainResource("BATTERY_GAUGE",20),e.hasTraitUnlocked("ENHANCED_MULTI_WEAPON_II")&&e.gainStatus("EXCAVATOR_READY")},secondaryCooldown:{cdName:"cd_CHAINSAW",cooldown:60,maxCharges:1}});_n("EXCAVATOR",90,{startOnHotbar:!1,potency:$h,falloff:.25,applicationDelay:1.07,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>{e.gainResource("BATTERY_GAUGE",20),e.tryConsumeResource("EXCAVATOR_READY")},validateAttempt:e=>e.hasResourceAvailable("EXCAVATOR_READY"),highlightIf:e=>e.hasResourceAvailable("EXCAVATOR_READY")});io("BARREL_STABILIZER",66,"cd_BARREL_STABILIZER",{replaceIf:[{newSkill:"FULL_METAL_FIELD",condition:e=>e.hasResourceAvailable("FULL_METAL_MACHINIST")}],applicationDelay:0,cooldown:120,maxCharges:1,requiresCombat:!0,onConfirm:e=>{e.gainStatus("HYPERCHARGED"),e.hasTraitUnlocked("ENHANCED_BARREL_STABILIZER")&&e.gainStatus("FULL_METAL_MACHINIST")}});_n("FULL_METAL_FIELD",100,{startOnHotbar:!1,potency:900,falloff:.25,applicationDelay:1.02,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.tryConsumeResource("FULL_METAL_MACHINIST"),validateAttempt:e=>e.hasResourceAvailable("FULL_METAL_MACHINIST"),highlightIf:e=>e.hasResourceAvailable("FULL_METAL_MACHINIST")});JT("HYPERCHARGE",30,"cd_HYPERCHARGE",{rscType:"OVERHEATED",applicationDelay:0,cooldown:10,maxCharges:1,onConfirm:e=>{e.hasResourceAvailable("HYPERCHARGED")?e.tryConsumeResource("HYPERCHARGED"):e.resources.get("HEAT_GAUGE").consume(50)},validateAttempt:e=>e.hasResourceAvailable("HEAT_GAUGE",50)||e.hasResourceAvailable("HYPERCHARGED"),highlightIf:e=>e.hasResourceAvailable("HEAT_GAUGE",50)||e.hasResourceAvailable("HYPERCHARGED")});io("WILDFIRE",45,"cd_WILDFIRE",{replaceIf:[{newSkill:"DETONATOR",condition:e=>e.hasResourceAvailable("WILDFIRE_SELF")}],applicationDelay:.67,cooldown:120,maxCharges:1,onConfirm:(e,t)=>{e.gainStatus("WILDFIRE_SELF");const n=e.resources.get("WILDFIRE"),o=new ea({config:e.config,sourceTime:e.getDisplayTime(),sourceSkill:"WILDFIRE",aspect:Ie.Physical,basePotency:0,snapshotTime:e.getDisplayTime(),description:"wildfire",targetCount:1});o.modifiers=[X.NoCDH],e.hasResourceAvailable("TINCTURE")&&o.modifiers.push(X.Tincture),t.addDoTPotency(o,"WILDFIRE"),n.gain(1),n.node=t,e.resources.addResourceEvent({rscType:"WILDFIRE",name:"wildfire expiration",delay:Kt("MCH","WILDFIRE").maxTimeout,fnOnRsc:l=>e.expireWildfire()})}});io("DETONATOR",45,"cd_DETONATOR",{startOnHotbar:!1,applicationDelay:.62,cooldown:1,maxCharges:1,onConfirm:e=>e.expireWildfire(),validateAttempt:e=>e.hasResourceAvailable("WILDFIRE_SELF")});_n("BLAZING_SHOT",68,{potency:[["NEVER",220],["MARKSMANS_MASTERY_II",240]],applicationDelay:.85,recastTime:1.5,onConfirm:e=>{e.cooldowns.get("cd_DOUBLE_CHECK").restore(15),e.cooldowns.get("cd_CHECKMATE").restore(15)},validateAttempt:e=>e.hasResourceAvailable("OVERHEATED"),highlightIf:e=>e.hasResourceAvailable("OVERHEATED")});io("GAUSS_ROUND",15,"cd_DOUBLE_CHECK",{autoUpgrade:{trait:"DOUBLE_BARREL_MASTERY",otherSkill:"DOUBLE_CHECK"},potency:130,applicationDelay:.71,cooldown:30,maxCharges:3});io("DOUBLE_CHECK",92,"cd_DOUBLE_CHECK",{startOnHotbar:!1,potency:180,falloff:.3,applicationDelay:.71,cooldown:30,maxCharges:3});io("RICOCHET",50,"cd_CHECKMATE",{autoUpgrade:{trait:"DOUBLE_BARREL_MASTERY",otherSkill:"CHECKMATE"},potency:130,falloff:.3,applicationDelay:.71,cooldown:30,maxCharges:3});io("CHECKMATE",92,"cd_CHECKMATE",{startOnHotbar:!1,potency:180,falloff:.3,applicationDelay:.71,cooldown:30,maxCharges:3});const _G=[{skillName:"ROOK_AUTOTURRET",skillLevel:40,autoUpgrade:{otherSkill:"AUTOMATON_QUEEN",trait:"PROMOTION"}},{skillName:"AUTOMATON_QUEEN",skillLevel:80,startOnHotbar:!1}];_G.forEach(e=>{io(e.skillName,e.skillLevel,"cd_QUEEN",{startOnHotbar:e.startOnHotbar,autoUpgrade:e.autoUpgrade,applicationDelay:0,cooldown:6,maxCharges:1,validateAttempt:t=>t.hasResourceAvailable("BATTERY_GAUGE",50)&&!t.hasResourceAvailable("QUEEN"),onConfirm:(t,n)=>{const o=t.resources.get("BATTERY_GAUGE").availableAmount();t.resources.get("BATTERY_BONUS").gain(o-50),t.tryConsumeResource("BATTERY_GAUGE",!0);const l=t.resources.get("QUEEN_PUNCHES");l.gain(5);const r=t.hasTraitUnlocked("QUEENS_GAMBIT")?2:1;t.resources.get("QUEEN_FINISHERS").gain(r),t.resources.get("QUEEN").gain(l.availableAmount()+r);let d="VOLLEY_FIRE",h=0;t.hasTraitUnlocked("PROMOTION")?(d="ARM_PUNCH",h=t.calculateQueenPotency(120,240)):h=t.calculateQueenPotency(35,75);for(let E=0;E<l.availableAmount();E++)n.addDoTPotency(new ea({config:t.config,sourceTime:t.getDisplayTime(),sourceSkill:d,aspect:Ie.Physical,description:"",basePotency:h,snapshotTime:void 0,targetCount:n.targetCount}),"QUEEN");d=t.hasTraitUnlocked("PROMOTION")?"PILE_BUNKER":"ROOK_OVERLOAD",d==="PILE_BUNKER"?h=t.calculateQueenPotency(340,680):h=t.calculateQueenPotency(160,320),n.addDoTPotency(new ea({config:t.config,sourceTime:t.getDisplayTime(),sourceSkill:d,aspect:Ie.Physical,description:"",basePotency:h,snapshotTime:void 0,targetCount:n.targetCount}),"QUEEN"),t.hasTraitUnlocked("QUEENS_GAMBIT")&&n.addDoTPotency(new ea({config:t.config,sourceTime:t.getDisplayTime(),sourceSkill:"CROWNED_COLLIDER",aspect:Ie.Physical,description:"",basePotency:t.calculateQueenPotency(390,780),snapshotTime:void 0,targetCount:n.targetCount}),"QUEEN"),t.resources.get("QUEEN").node=n,t.addEvent(new be("initial queen punch",5.5,()=>t.handleQueenPunch()))}})});const gG=[{skillName:"ROOK_OVERDRIVE",skillLevel:40,autoUpgrade:{otherSkill:"QUEEN_OVERDRIVE",trait:"PROMOTION"}},{skillName:"QUEEN_OVERDRIVE",skillLevel:80,startOnHotbar:!1}];gG.forEach(e=>{io(e.skillName,e.skillLevel,"cd_OVERDRIVE",{startOnHotbar:e.startOnHotbar,autoUpgrade:e.autoUpgrade,applicationDelay:0,cooldown:15,maxCharges:1,validateAttempt:t=>t.hasResourceAvailable("QUEEN_PUNCHES"),onConfirm:t=>{t.tryConsumeResource("QUEEN_PUNCHES",!0)}})});_n("SPREAD_SHOT",18,{autoUpgrade:{trait:"SPREAD_SHOT_MASTERY",otherSkill:"SCATTERGUN"},potency:110,falloff:0,applicationDelay:.8,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.gainResource("HEAT_GAUGE",5)});_n("SCATTERGUN",82,{startOnHotbar:!1,potency:130,falloff:0,applicationDelay:1.15,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.gainResource("HEAT_GAUGE",10)});_n("BIOBLASTER",58,{potency:50,falloff:0,applicationDelay:.97,recastTime:e=>e.config.adjustedSksGCD(),secondaryCooldown:{cdName:"cd_DRILL",cooldown:20,maxCharges:2},onConfirm:(e,t)=>e.addDoTPotencies({node:t,effectName:"BIOBLASTER",skillName:"BIOBLASTER",tickPotency:50,speedStat:"sks"}),onApplication:(e,t)=>e.applyDoT("BIOBLASTER",t)});_n("AUTO_CROSSBOW",52,{potency:[["NEVER",140],["MARKSMANS_MASTERY_II",180]],falloff:0,applicationDelay:.89,recastTime:1.5,validateAttempt:e=>e.hasResourceAvailable("OVERHEATED"),highlightIf:e=>e.hasResourceAvailable("OVERHEATED")});_n("FLAMETHROWER",70,{applicationDelay:.89,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"FLAMETHROWER",skillName:"FLAMETHROWER",tickPotency:120,tickFrequency:1,speedStat:"sks"})},onApplication:(e,t)=>{e.applyDoT("FLAMETHROWER",t)},secondaryCooldown:{cdName:"cd_FLAMETHROWER",cooldown:60,maxCharges:1}});JT("TACTICIAN",56,"cd_TACTICIAN",{rscType:"TACTICIAN",maxCharges:1,cooldown:90,applicationDelay:.62});io("DISMANTLE",62,"cd_DISMANTLE",{maxCharges:1,cooldown:120,applicationDelay:.62});Object.keys(mT).forEach(e=>Ft(e,`PCT/${Ge[e].name}.png`));class NG extends Wt{jobSpecificSelfTargetedBuffViewProps(){return[...Object.keys(mT).map(t=>t==="MONOCHROME_TONES"||t==="SUBTRACTIVE_PALETTE"?this.makeCommonTimerless(t):t==="INSPIRATION"?this.makeToggleableTimerless(t):this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){const n=this.state.resources,o=n.get("PORTRAIT").availableAmount(),l=n.get("DEPICTIONS").availableAmount(),r=n.get("CREATURE_CANVAS").availableAmount(),d=n.get("WEAPON_CANVAS").availableAmount(),h=n.get("LANDSCAPE_CANVAS").availableAmount(),E=n.get("PALETTE_GAUGE").availableAmount(),A=n.get("PAINT").availableAmount(),R=n.get("MONOCHROME_TONES").available(1),T=[{kind:"text",name:C({en:"portrait",zh:"肖像标识"}),text:o===0?"/":C(o===1?{en:"moogle",zh:"莫古力"}:{en:"madeen",zh:"马蒂恩"})},{kind:"text",name:C({en:"depictions",zh:"动物标识"}),text:l===0?"/":C(l===1?{en:"pom",zh:"绒球"}:l===2?{en:"wing",zh:"翅膀"}:l===3?{en:"fang",zh:"兽爪"}:{en:"maw",zh:"尖牙"})},{kind:"counter",name:C({en:"creature",zh:"动物"}),color:t.pct.creatureCanvas,currentStacks:r,maxStacks:1},{kind:"counter",name:C({en:"weapon",zh:"武器"}),color:t.pct.weaponCanvas,currentStacks:d,maxStacks:1},{kind:"counter",name:C({en:"landscape",zh:"风景"}),color:t.pct.landscapeCanvas,currentStacks:h,maxStacks:1},{kind:"bar",name:C({en:"palette gauge",zh:"调色量谱"}),color:t.pct.paletteGauge,progress:E/100,valueString:E.toFixed(0)}];return this.state.hasTraitUnlocked("ENHANCED_ARTISTRY")&&T.push({kind:"paint",name:C({en:"paint gauge",zh:"颜料量谱"}),holyColor:t.pct.holyPaint,cometColor:t.pct.cometPaint,currentStacks:A,maxStacks:5,hasComet:this.state.hasTraitUnlocked("ENHANCED_PALETTE")&&R}),T}}const _a=(e,t,n)=>{Ye("PCT",e,t,n??{})};_a("PORTRAIT",2);_a("DEPICTIONS",3);_a("CREATURE_CANVAS",1,{default:1});_a("WEAPON_CANVAS",1,{default:1});_a("LANDSCAPE_CANVAS",1,{default:1});_a("PALETTE_GAUGE",100,{warnOnOvercap:!0});_a("PAINT",5);_a("AETHERHUES",2,{timeout:30.8});_a("MONOCHROME_TONES",1);_a("SUBTRACTIVE_PALETTE",3);_a("HAMMER_TIME",3,{timeout:30});_a("INSPIRATION",1,{timeout:30});_a("SUBTRACTIVE_SPECTRUM",1,{timeout:30,warnOnTimeout:!0});_a("HYPERPHANTASIA",5,{timeout:30,warnOnTimeout:!0});_a("RAINBOW_BRIGHT",1,{timeout:30,warnOnTimeout:!0});_a("STARSTRUCK",1,{timeout:20,warnOnTimeout:!0});_a("STARRY_MUSE",1,{timeout:20.5});_a("TEMPERA_COAT",1,{timeout:10});_a("TEMPERA_GRASSA",1,{timeout:10});_a("SMUDGE",1,{timeout:5});const pG=["FIRE_IN_RED","FIRE_II_IN_RED","AERO_IN_GREEN","AERO_II_IN_GREEN","WATER_IN_BLUE","WATER_II_IN_BLUE","HOLY_IN_WHITE","BLIZZARD_IN_CYAN","BLIZZARD_II_IN_CYAN","STONE_IN_YELLOW","STONE_II_IN_YELLOW","THUNDER_IN_MAGENTA","THUNDER_II_IN_MAGENTA","COMET_IN_BLACK","STAR_PRISM"],Qp=["POM_MOTIF","WING_MOTIF","CLAW_MOTIF","MAW_MOTIF"],CG=["HAMMER_BRUSH","HAMMER_STAMP","POLISHING_HAMMER"];class OG extends Xt{constructor(t){super(t);const n=this.hasTraitUnlocked("ENHANCED_SWIFTCAST")&&40||60;[new ke("cd_SWIFTCAST",n,1,1)].forEach(r=>this.cooldowns.set(r));const o=this.hasTraitUnlocked("ENHANCED_PICTOMANCY_IV")?3:2;this.cooldowns.set(new ke("cd_LIVING_MUSE",40,o,o));const l=this.hasTraitUnlocked("ENHANCED_PICTOMANCY_II")?2:1;this.cooldowns.set(new ke("cd_STEEL_MUSE",60,l,l)),this.registerRecurringEvents()}get statusPropsGenerator(){return new NG(this)}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("STARRY_MUSE")&&t.addBuff(H.StarryMuse)}jobSpecificAddSpeedBuffCovers(t,n){this.hasResourceAvailable("INSPIRATION")&&pG.includes(n.name)&&t.addBuff(H.Hyperphantasia)}captureSpellCastTime(t,n){return Qp.includes(t)?n:t==="RAINBOW_DRIP"?this.hasResourceAvailable("RAINBOW_BRIGHT")?0:this.config.adjustedCastTime(n):this.config.adjustedCastTime(n,this.hasResourceAvailable("INSPIRATION")?25:void 0)}captureSpellRecastTime(t,n){if(Qp.includes(t))return n;if(t==="RAINBOW_DRIP"){const o=this.config.adjustedGCD(n);return this.hasResourceAvailable("RAINBOW_BRIGHT")?o-3.5:o}return CG.includes(t)?this.config.adjustedGCD(n):this.config.adjustedGCD(n,this.hasResourceAvailable("INSPIRATION")?25:void 0)}getHammerStacks(){return this.resources.get("HAMMER_TIME").availableAmount()}doFiller(){this.cycleAetherhues(),this.tryConsumeHyperphantasia(),this.tryConsumeResource("SUBTRACTIVE_PALETTE")}cycleAetherhues(){const t=this.resources.get("AETHERHUES").availableAmount();this.tryConsumeResource("AETHERHUES",!0),t===2||(t===1?this.gainStatus("AETHERHUES",2):this.gainStatus("AETHERHUES",1))}tryConsumeHyperphantasia(){this.hasResourceAvailable("INSPIRATION")&&this.tryConsumeResource("HYPERPHANTASIA")&&!this.hasResourceAvailable("HYPERPHANTASIA")&&(this.tryConsumeResource("INSPIRATION"),this.hasTraitUnlocked("ENHANCED_PICTOMANCY_III")&&this.gainStatus("RAINBOW_BRIGHT"))}}const sa=(e,t,n)=>{const o=n.baseRecastTime??2.5,l=Ue((r,d)=>{e==="RAINBOW_DRIP"&&r.hasResourceAvailable("RAINBOW_BRIGHT")||n.baseCastTime===0||r.tryConsumeResource("SWIFTCAST")},n.onConfirm);return Qn("PCT",e,t,{...n,castTime:r=>r.captureSpellCastTime(e,n.baseCastTime),recastTime:r=>r.captureSpellRecastTime(e,o),manaCost:n.baseManaCost??0,potency:n.basePotency,jobPotencyModifiers:r=>{const d=[];return r.hasResourceAvailable("STARRY_MUSE")&&d.push(X.Starry),n.jobPotencyModifiers&&d.push(...n.jobPotencyModifiers(r)),d},isInstantFn:r=>e==="RAINBOW_DRIP"&&r.hasResourceAvailable("RAINBOW_BRIGHT")||n.baseCastTime===0||r.hasResourceAvailable("SWIFTCAST"),onConfirm:l})},wi=(e,t,n,o)=>ot("PCT",e,t,n,{...o,jobPotencyModifiers:l=>l.hasResourceAvailable("STARRY_MUSE")?[X.Starry]:[]}),ob={newSkill:"FIRE_IN_RED",condition:e=>!e.hasResourceAvailable("AETHERHUES")},lb={newSkill:"AERO_IN_GREEN",condition:e=>e.hasResourceExactly("AETHERHUES",1)},sb={newSkill:"WATER_IN_BLUE",condition:e=>e.hasResourceExactly("AETHERHUES",2)},rb={newSkill:"BLIZZARD_IN_CYAN",condition:e=>!e.hasResourceAvailable("AETHERHUES")},cb={newSkill:"STONE_IN_YELLOW",condition:e=>e.hasResourceExactly("AETHERHUES",1)},ub={newSkill:"THUNDER_IN_MAGENTA",condition:e=>e.hasResourceExactly("AETHERHUES",2)},db={newSkill:"FIRE_II_IN_RED",condition:e=>!e.hasResourceAvailable("AETHERHUES")},Eb={newSkill:"AERO_II_IN_GREEN",condition:e=>e.hasResourceExactly("AETHERHUES",1)},hb={newSkill:"WATER_II_IN_BLUE",condition:e=>e.hasResourceExactly("AETHERHUES",2)},fb={newSkill:"BLIZZARD_II_IN_CYAN",condition:e=>!e.hasResourceAvailable("AETHERHUES")},Ab={newSkill:"STONE_II_IN_YELLOW",condition:e=>e.hasResourceExactly("AETHERHUES",1)},mb={newSkill:"THUNDER_II_IN_MAGENTA",condition:e=>e.hasResourceExactly("AETHERHUES",2)},eS=[ob,lb,sb],tS=[rb,cb,ub],aS=[db,Eb,hb],nS=[fb,Ab,mb],bG={newSkill:"CREATURE_MOTIF",condition:e=>e.hasResourceAvailable("CREATURE_CANVAS")},Rb={newSkill:"POM_MOTIF",condition:e=>!e.hasResourceAvailable("CREATURE_CANVAS")&&!e.hasResourceAvailable("DEPICTIONS")},Tb={newSkill:"WING_MOTIF",condition:e=>!e.hasResourceAvailable("CREATURE_CANVAS")&&e.hasResourceExactly("DEPICTIONS",1)},Sb={newSkill:"CLAW_MOTIF",condition:e=>!e.hasResourceAvailable("CREATURE_CANVAS")&&e.hasResourceExactly("DEPICTIONS",2)},Ib={newSkill:"MAW_MOTIF",condition:e=>!e.hasResourceAvailable("CREATURE_CANVAS")&&e.hasResourceExactly("DEPICTIONS",3)},DG={newSkill:"LIVING_MUSE",condition:e=>!e.hasResourceAvailable("CREATURE_CANVAS")},_b={newSkill:"POM_MUSE",condition:e=>e.hasResourceAvailable("CREATURE_CANVAS")&&!e.hasResourceAvailable("DEPICTIONS")},gb={newSkill:"WINGED_MUSE",condition:e=>e.hasResourceAvailable("CREATURE_CANVAS")&&e.hasResourceExactly("DEPICTIONS",1)},Nb={newSkill:"CLAWED_MUSE",condition:e=>e.hasResourceAvailable("CREATURE_CANVAS")&&e.hasResourceExactly("DEPICTIONS",2)},pb={newSkill:"FANGED_MUSE",condition:e=>e.hasResourceAvailable("CREATURE_CANVAS")&&e.hasResourceExactly("DEPICTIONS",3)},yG={newSkill:"MOG_OF_THE_AGES",condition:e=>e.resources.get("PORTRAIT").availableAmount()!==2},vG={newSkill:"RETRIBUTION_OF_THE_MADEEN",condition:e=>e.resources.get("PORTRAIT").availableAmount()===2},MG={newSkill:"WEAPON_MOTIF",condition:e=>e.hasResourceAvailable("WEAPON_CANVAS")},Cb={newSkill:"HAMMER_MOTIF",condition:e=>!e.hasResourceAvailable("WEAPON_CANVAS")},LG={newSkill:"STEEL_MUSE",condition:e=>!e.hasResourceAvailable("WEAPON_CANVAS")},HG={newSkill:"STRIKING_MUSE",condition:e=>e.hasResourceAvailable("WEAPON_CANVAS")},UG={newSkill:"LANDSCAPE_MOTIF",condition:e=>e.hasResourceAvailable("LANDSCAPE_CANVAS")},Ob={newSkill:"STARRY_SKY_MOTIF",condition:e=>!e.hasResourceAvailable("LANDSCAPE_CANVAS")},kG={newSkill:"SCENIC_MUSE",condition:e=>!e.hasResourceAvailable("LANDSCAPE_CANVAS")},bb={newSkill:"STARRY_MUSE",condition:e=>e.hasResourceAvailable("LANDSCAPE_CANVAS")};sa("FIRE_IN_RED",1,{replaceIf:eS,baseCastTime:1.5,baseManaCost:300,basePotency:[["NEVER",310],["PICTOMANCY_MASTERY_II",380],["PICTOMANCY_MASTERY_III",420],["PICTOMANCY_MASTERY_IV",490]],applicationDelay:.84,validateAttempt:e=>ob.condition(e)&&!e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller()});sa("AERO_IN_GREEN",5,{replaceIf:eS,startOnHotbar:!1,baseCastTime:1.5,baseManaCost:300,basePotency:[["NEVER",350],["PICTOMANCY_MASTERY_II",420],["PICTOMANCY_MASTERY_III",460],["PICTOMANCY_MASTERY_IV",530]],applicationDelay:.89,validateAttempt:e=>lb.condition(e)&&!e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller(),highlightIf:e=>!e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});sa("WATER_IN_BLUE",15,{replaceIf:eS,startOnHotbar:!1,baseCastTime:1.5,baseManaCost:300,basePotency:[["NEVER",390],["PICTOMANCY_MASTERY_II",460],["PICTOMANCY_MASTERY_III",500],["PICTOMANCY_MASTERY_IV",570]],applicationDelay:.98,validateAttempt:e=>sb.condition(e)&&!e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>{e.doFiller(),e.resources.get("PALETTE_GAUGE").gain(25),e.hasTraitUnlocked("ENHANCED_ARTISTRY")&&e.resources.get("PAINT").gain(1)},highlightIf:e=>!e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});sa("FIRE_II_IN_RED",25,{replaceIf:aS,baseCastTime:1.5,baseManaCost:300,basePotency:[["NEVER",120],["PICTOMANCY_MASTERY_II",150],["PICTOMANCY_MASTERY_IV",180]],falloff:0,applicationDelay:.84,validateAttempt:e=>db.condition(e)&&!e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller()});sa("AERO_II_IN_GREEN",35,{replaceIf:aS,startOnHotbar:!1,baseCastTime:1.5,baseManaCost:300,basePotency:[["NEVER",140],["PICTOMANCY_MASTERY_II",170],["PICTOMANCY_MASTERY_IV",200]],falloff:0,applicationDelay:.89,validateAttempt:e=>Eb.condition(e)&&!e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller(),highlightIf:e=>!e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});sa("WATER_II_IN_BLUE",45,{replaceIf:aS,startOnHotbar:!1,baseCastTime:1.5,baseManaCost:300,basePotency:[["NEVER",170],["PICTOMANCY_MASTERY_II",190],["PICTOMANCY_MASTERY_IV",220]],falloff:0,applicationDelay:.89,validateAttempt:e=>hb.condition(e)&&!e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>{e.doFiller(),e.resources.get("PALETTE_GAUGE").gain(25),e.hasTraitUnlocked("ENHANCED_ARTISTRY")&&e.resources.get("PAINT").gain(1)},highlightIf:e=>!e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});sa("BLIZZARD_IN_CYAN",60,{replaceIf:tS,baseCastTime:2.3,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",560],["PICTOMANCY_MASTERY_II",680],["PICTOMANCY_MASTERY_III",750],["PICTOMANCY_MASTERY_IV",860]],applicationDelay:.75,validateAttempt:e=>rb.condition(e)&&e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller(),highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});sa("STONE_IN_YELLOW",60,{replaceIf:tS,startOnHotbar:!1,baseCastTime:2.3,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",600],["PICTOMANCY_MASTERY_II",720],["PICTOMANCY_MASTERY_III",790],["PICTOMANCY_MASTERY_IV",900]],applicationDelay:.8,validateAttempt:e=>cb.condition(e)&&e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller(),highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});sa("THUNDER_IN_MAGENTA",60,{replaceIf:tS,startOnHotbar:!1,baseCastTime:2.3,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",640],["PICTOMANCY_MASTERY_II",760],["PICTOMANCY_MASTERY_III",830],["PICTOMANCY_MASTERY_IV",940]],applicationDelay:.8,validateAttempt:e=>ub.condition(e)&&e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>{e.doFiller(),e.hasTraitUnlocked("ENHANCED_ARTISTRY")&&e.resources.get("PAINT").gain(1)},highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});sa("BLIZZARD_II_IN_CYAN",60,{replaceIf:nS,baseCastTime:2.3,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",270],["PICTOMANCY_MASTERY_II",330],["PICTOMANCY_MASTERY_IV",360]],falloff:0,applicationDelay:.75,validateAttempt:e=>fb.condition(e)&&e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller(),highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});sa("STONE_II_IN_YELLOW",60,{replaceIf:nS,startOnHotbar:!1,baseCastTime:2.3,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",290],["PICTOMANCY_MASTERY_II",350],["PICTOMANCY_MASTERY_IV",380]],falloff:0,applicationDelay:.8,validateAttempt:e=>Ab.condition(e)&&e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller(),highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});sa("THUNDER_II_IN_MAGENTA",60,{replaceIf:nS,startOnHotbar:!1,baseCastTime:2.3,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",310],["PICTOMANCY_MASTERY_II",370],["PICTOMANCY_MASTERY_IV",400]],falloff:0,applicationDelay:.8,validateAttempt:e=>mb.condition(e)&&e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>{e.doFiller(),e.hasTraitUnlocked("ENHANCED_ARTISTRY")&&e.resources.get("PAINT").gain(1)},highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});sa("HOLY_IN_WHITE",80,{baseCastTime:0,baseManaCost:300,basePotency:[["NEVER",460],["PICTOMANCY_MASTERY_III",500],["PICTOMANCY_MASTERY_IV",570]],falloff:.65,applicationDelay:1.34,validateAttempt:e=>!e.hasResourceAvailable("MONOCHROME_TONES")&&e.hasResourceAvailable("PAINT"),onConfirm:e=>{e.tryConsumeResource("PAINT"),e.tryConsumeHyperphantasia()},highlightIf:e=>!e.hasResourceAvailable("MONOCHROME_TONES")&&e.hasResourceAvailable("PAINT")});sa("COMET_IN_BLACK",90,{baseCastTime:0,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",830],["PICTOMANCY_MASTERY_IV",940]],falloff:.6,applicationDelay:1.87,validateAttempt:e=>e.hasResourceAvailable("MONOCHROME_TONES")&&e.hasResourceAvailable("PAINT"),onConfirm:e=>{e.tryConsumeResource("PAINT"),e.tryConsumeResource("MONOCHROME_TONES"),e.tryConsumeHyperphantasia()},highlightIf:e=>e.hasResourceAvailable("MONOCHROME_TONES")});sa("RAINBOW_DRIP",92,{baseCastTime:4,baseRecastTime:6,baseManaCost:400,basePotency:1e3,applicationDelay:1.24,falloff:.85,onConfirm:e=>{e.resources.get("PAINT").gain(1),e.tryConsumeResource("RAINBOW_BRIGHT")},highlightIf:e=>e.hasResourceAvailable("RAINBOW_BRIGHT")});sa("STAR_PRISM",100,{baseCastTime:0,baseManaCost:0,basePotency:1100,applicationDelay:1.25,falloff:.7,validateAttempt:e=>e.hasResourceAvailable("STARSTRUCK"),onConfirm:e=>{e.tryConsumeResource("STARSTRUCK"),e.tryConsumeHyperphantasia()},highlightIf:e=>e.hasResourceAvailable("STARSTRUCK")});wi("SUBTRACTIVE_PALETTE",60,"cd_SUBTRACTIVE",{cooldown:1,validateAttempt:e=>!e.hasResourceAvailable("SUBTRACTIVE_PALETTE")&&(e.hasResourceAvailable("SUBTRACTIVE_SPECTRUM")||e.hasResourceAvailable("PALETTE_GAUGE",50)),onConfirm:e=>{e.tryConsumeResource("SUBTRACTIVE_SPECTRUM")||e.resources.get("PALETTE_GAUGE").consume(50),e.hasResourceAvailable("MONOCHROME_TONES")&&N.reportWarning({kind:"custom",en:"comet overwrite!",zh:"彗星之黑被覆盖！"}),e.hasTraitUnlocked("ENHANCED_PALETTE")&&e.gainStatus("MONOCHROME_TONES"),e.gainStatus("SUBTRACTIVE_PALETTE",3)},highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_SPECTRUM")||e.resources.get("PALETTE_GAUGE").available(50)});const xG=[bG,Rb,Tb,Sb,Ib],PG=[["CREATURE_MOTIF",30,e=>!1],["POM_MOTIF",30,Rb.condition],["WING_MOTIF",30,Tb.condition],["CLAW_MOTIF",96,Sb.condition],["MAW_MOTIF",96,Ib.condition]];PG.forEach(([e,t,n],o)=>sa(e,t,{replaceIf:xG,startOnHotbar:o===0,baseCastTime:3,baseRecastTime:4,baseManaCost:0,applicationDelay:0,validateAttempt:n,onConfirm:l=>l.resources.get("CREATURE_CANVAS").gain(1)}));const wG=[DG,_b,gb,Nb,pb],GG=[["LIVING_MUSE",30,0,0,e=>!1],["POM_MUSE",30,[["NEVER",700],["PICTOMANCY_MASTERY_III",800]],.62,_b.condition],["WINGED_MUSE",30,[["NEVER",700],["PICTOMANCY_MASTERY_III",800]],.98,gb.condition],["CLAWED_MUSE",96,800,.98,Nb.condition],["FANGED_MUSE",96,800,1.16,pb.condition]];GG.forEach(([e,t,n,o,l],r)=>wi(e,t,"cd_LIVING_MUSE",{replaceIf:wG,startOnHotbar:r===0,potency:n,falloff:.7,applicationDelay:o,cooldown:40,validateAttempt:l,onConfirm:d=>{const h=d.resources.get("DEPICTIONS"),E=d.resources.get("PORTRAIT");d.tryConsumeResource("CREATURE_CANVAS"),h.gain(1),e==="WINGED_MUSE"&&(E.overrideCurrentValue(1),d.hasTraitUnlocked("ENHANCED_PICTOMANCY_IV")||h.overrideCurrentValue(0)),e==="FANGED_MUSE"&&(E.overrideCurrentValue(2),h.overrideCurrentValue(0))},maxCharges:3,highlightIf:d=>d.hasResourceAvailable("CREATURE_CANVAS")}));wi("MOG_OF_THE_AGES",30,"cd_PORTRAIT",{replaceIf:[vG],potency:[["NEVER",800],["PICTOMANCY_MASTERY_III",1e3]],falloff:.7,applicationDelay:1.15,validateAttempt:e=>e.hasResourceExactly("PORTRAIT",1),onConfirm:e=>e.tryConsumeResource("PORTRAIT"),cooldown:30,highlightIf:e=>e.hasResourceAvailable("PORTRAIT")});wi("RETRIBUTION_OF_THE_MADEEN",30,"cd_PORTRAIT",{replaceIf:[yG],startOnHotbar:!1,potency:1100,falloff:.7,applicationDelay:1.3,validateAttempt:e=>e.hasResourceExactly("PORTRAIT",2),onConfirm:e=>e.tryConsumeResource("PORTRAIT",!0),cooldown:30,highlightIf:e=>e.hasResourceAvailable("PORTRAIT")});sa("WEAPON_MOTIF",50,{replaceIf:[Cb],baseCastTime:3,baseRecastTime:4,baseManaCost:0,applicationDelay:0,validateAttempt:e=>!1});sa("HAMMER_MOTIF",50,{replaceIf:[MG],startOnHotbar:!1,baseCastTime:3,baseRecastTime:4,baseManaCost:0,applicationDelay:0,validateAttempt:e=>Cb.condition(e)&&!e.hasResourceAvailable("HAMMER_TIME"),onConfirm:e=>e.resources.get("WEAPON_CANVAS").gain(1)});wi("STEEL_MUSE",50,"cd_STEEL_MUSE",{replaceIf:[HG],cooldown:60,maxCharges:2,validateAttempt:e=>!1});wi("STRIKING_MUSE",50,"cd_STEEL_MUSE",{replaceIf:[LG],startOnHotbar:!1,requiresCombat:!0,cooldown:60,maxCharges:2,validateAttempt:e=>e.hasResourceAvailable("WEAPON_CANVAS"),onConfirm:e=>{e.tryConsumeResource("WEAPON_CANVAS"),e.gainStatus("HAMMER_TIME",3)},highlightIf:e=>e.hasResourceAvailable("WEAPON_CANVAS")});const $p=[{newSkill:"HAMMER_STAMP",condition:e=>!e.hasTraitUnlocked("ENHANCED_PICTOMANCY_II")||e.getHammerStacks()===3},{newSkill:"HAMMER_BRUSH",condition:e=>e.hasTraitUnlocked("ENHANCED_PICTOMANCY_II")&&e.getHammerStacks()===2},{newSkill:"POLISHING_HAMMER",condition:e=>e.hasTraitUnlocked("ENHANCED_PICTOMANCY_II")&&e.getHammerStacks()===1}],BG=[["HAMMER_STAMP",50,[["NEVER",420],["PICTOMANCY_MASTERY_II",500],["PICTOMANCY_MASTERY_III",540],["PICTOMANCY_MASTERY_IV",560]],1.38],["HAMMER_BRUSH",86,[["NEVER",560],["PICTOMANCY_MASTERY_IV",580]],1.25],["POLISHING_HAMMER",86,[["NEVER",580],["PICTOMANCY_MASTERY_IV",600]],2.1]];BG.forEach(([e,t,n,o],l)=>sa(e,t,{replaceIf:$p,baseCastTime:0,startOnHotbar:l===0,basePotency:n,falloff:.7,applicationDelay:o,validateAttempt:r=>$p[l].condition(r)&&r.hasResourceAvailable("HAMMER_TIME"),onConfirm:r=>r.tryConsumeResource("HAMMER_TIME"),highlightIf:r=>r.hasResourceAvailable("HAMMER_TIME"),jobPotencyModifiers:r=>[X.AutoCDH]}));sa("LANDSCAPE_MOTIF",70,{replaceIf:[Ob],baseCastTime:3,baseRecastTime:4,baseManaCost:0,applicationDelay:0,validateAttempt:e=>!1});sa("STARRY_SKY_MOTIF",70,{replaceIf:[UG],startOnHotbar:!1,baseCastTime:3,baseRecastTime:4,baseManaCost:0,applicationDelay:0,validateAttempt:e=>Ob.condition(e)&&!e.hasResourceAvailable("STARRY_MUSE"),onConfirm:e=>e.resources.get("LANDSCAPE_CANVAS").gain(1)});wi("SCENIC_MUSE",70,"cd_SCENIC_MUSE",{replaceIf:[bb],applicationDelay:0,cooldown:120,validateAttempt:e=>!1});wi("STARRY_MUSE",70,"cd_SCENIC_MUSE",{replaceIf:[kG],startOnHotbar:!1,requiresCombat:!0,applicationDelay:0,cooldown:120,validateAttempt:e=>bb.condition(e),onConfirm:e=>{e.tryConsumeResource("LANDSCAPE_CANVAS"),e.hasTraitUnlocked("ENHANCED_PICTOMANCY")&&(e.gainStatus("HYPERPHANTASIA",5),e.gainStatus("INSPIRATION")),e.hasTraitUnlocked("ENHANCED_PICTOMANCY_V")&&e.gainStatus("STARSTRUCK"),e.gainStatus("STARRY_MUSE"),e.gainStatus("SUBTRACTIVE_SPECTRUM")},highlightIf:e=>e.hasResourceAvailable("LANDSCAPE_CANVAS")});ze("PCT","TEMPERA_COAT",10,"cd_TEMPERA_COAT",{rscType:"TEMPERA_COAT",replaceIf:[{newSkill:"TEMPERA_COAT_POP",condition:e=>e.hasResourceAvailable("TEMPERA_COAT")}],applicationDelay:0,cooldown:120});wi("TEMPERA_GRASSA",88,"cd_GRASSA",{replaceIf:[{newSkill:"TEMPERA_GRASSA_POP",condition:e=>e.hasResourceAvailable("TEMPERA_GRASSA")}],applicationDelay:0,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("TEMPERA_COAT"),onConfirm:e=>{e.tryConsumeResource("TEMPERA_COAT"),e.gainStatus("TEMPERA_GRASSA")},highlightIf:e=>e.hasResourceAvailable("TEMPERA_COAT")});wi("TEMPERA_COAT_POP",10,"cd_TEMPERA_POP",{replaceIf:[{newSkill:"TEMPERA_GRASSA_POP",condition:e=>e.hasResourceAvailable("TEMPERA_GRASSA")}],startOnHotbar:!1,applicationDelay:0,animationLock:Sn,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("TEMPERA_COAT"),onConfirm:e=>{e.tryConsumeResource("TEMPERA_COAT");const t=e.cooldowns.get("cd_TEMPERA_COAT").timeTillNextStackAvailable();console.assert(t>0,"attempted to pop Tempera Coat when no timer for Tempera Coat CD was active"),e.cooldowns.get("cd_TEMPERA_COAT").overrideTimeTillNextStack(Math.max(0,t-60))},highlightIf:e=>e.hasResourceAvailable("TEMPERA_COAT")});wi("TEMPERA_GRASSA_POP",10,"cd_TEMPERA_POP",{replaceIf:[{newSkill:"TEMPERA_COAT_POP",condition:e=>e.hasResourceAvailable("TEMPERA_COAT")}],startOnHotbar:!1,applicationDelay:0,animationLock:Sn,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("TEMPERA_GRASSA"),onConfirm:e=>{e.tryConsumeResource("TEMPERA_GRASSA");const t=e.cooldowns.get("cd_TEMPERA_COAT").timeTillNextStackAvailable();console.assert(t>0,"attempted to pop Tempera Grassa when no timer for Tempera Coat CD was active"),e.cooldowns.get("cd_TEMPERA_COAT").overrideTimeTillNextStack(Math.max(0,t-30))},highlightIf:e=>e.hasResourceAvailable("TEMPERA_GRASSA")});ze("PCT","SMUDGE",20,"cd_SMUDGE",{rscType:"SMUDGE",applicationDelay:0,cooldown:20,animationLock:Vt});Object.keys(TT).forEach(e=>Ft(e,`RDM/${Ge[e].name}.png`));class FG extends Wt{jobSpecificSelfTargetedBuffViewProps(){return[...Object.keys(TT).map(t=>this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){const n=this.state.resources,o=n.get("WHITE_MANA").availableAmount(),l=n.get("BLACK_MANA").availableAmount(),r=n.get("MANA_STACKS").availableAmount();return[{kind:"bar",name:C({en:"white mana",zh:"白魔元"}),color:t.rdm.whiteMana,progress:o/100,valueString:o.toFixed(0)},{kind:"bar",name:C({en:"black mana",zh:"黑魔元"}),color:t.rdm.blackMana,progress:l/100,valueString:l.toFixed(0)},{kind:"counter",name:C({en:"mana stacks",zh:"魔元集"}),color:t.rdm.manaStack,currentStacks:r,maxStacks:3}]}}const Ja=(e,t,n)=>{Ye("RDM",e,t,n??{})};Ja("WHITE_MANA",100);Ja("BLACK_MANA",100);Ja("MANA_STACKS",3);Ja("ACCELERATION",1,{timeout:20});Ja("DUALCAST",1,{timeout:15});Ja("EMBOLDEN",1,{timeout:20});Ja("GRAND_IMPACT_READY",1,{timeout:30,warnOnTimeout:!0});Ja("MAGICK_BARRIER",1,{timeout:10});Ja("MAGICKED_SWORDPLAY",3,{timeout:30,warnOnTimeout:!0});Ja("MANAFICATION",6,{timeout:30,warnOnTimeout:!0});Ja("PREFULGENCE_READY",1,{timeout:30,warnOnTimeout:!0});Ja("THORNED_FLOURISH",1,{timeout:30,warnOnTimeout:!0});Ja("VERFIRE_READY",1,{timeout:30});Ja("VERSTONE_READY",1,{timeout:30});Ja("RDM_MELEE_COUNTER",2,{timeout:30});Ja("RDM_FINISHER_COUNTER",2,{timeout:30});Ja("RDM_AOE_COUNTER",2,{timeout:30});const Db=["IMPACT","VERAERO","VERTHUNDER","VERAERO_III","VERTHUNDER_III"],yb=["VERHOLY","VERFLARE","SCORCH","RESOLUTION"];class zG extends Xt{constructor(t){super(t);const n=this.hasTraitUnlocked("ENHANCED_SWIFTCAST")?40:60,o=this.hasTraitUnlocked("RED_MAGIC_MASTERY")?35:45,l=this.hasTraitUnlocked("ENHANCED_MANAFICATION")?110:120;[new ke("cd_SWIFTCAST",n,1,1),new ke("cd_CONTRE_SIXTE",o,1,1),new ke("cd_MANAFICATION",l,1,1)].forEach(h=>this.cooldowns.set(h));const r=this.hasTraitUnlocked("ENHANCED_ACCELERATION")?2:1;this.cooldowns.set(new ke("cd_ACCELERATION",55,r,r));const d=this.hasTraitUnlocked("ENHANCED_MANAFICATION_II")?6:this.hasTraitUnlocked("ENHANCED_MANAFICATION")?5:4;this.resources.set(new sn("MANAFICATION",d,0)),this.registerRecurringEvents()}get statusPropsGenerator(){return new FG(this)}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("EMBOLDEN")&&n.aspect!==Ie.Physical&&t.addBuff(H.Embolden),this.hasResourceAvailable("MANAFICATION")&&n.cdName==="cd_GCD"&&t.addBuff(H.Manafication),n.name==="IMPACT"&&this.hasResourceAvailable("ACCELERATION")&&t.addBuff(H.Acceleration)}hasThreeManaStacks(){return this.hasResourceAvailable("MANA_STACKS",3)}getFinisherCounter(){return this.resources.get("RDM_FINISHER_COUNTER").availableAmount()}processDualcastAndInstants(t){yb.includes(t)||t==="GRAND_IMPACT"&&this.tryConsumeResource("GRAND_IMPACT_READY")||Db.includes(t)&&this.tryConsumeResource("ACCELERATION")||this.tryConsumeResource("DUALCAST")||this.tryConsumeResource("SWIFTCAST")||this.gainStatus("DUALCAST")}gainColorMana(t){const n=this.resources.get("WHITE_MANA"),o=this.resources.get("BLACK_MANA");if(t.w){const l=o.availableAmount()-n.availableAmount()>30;n.gain(l?Math.floor(t.w/2):t.w)}if(t.b){const l=n.availableAmount()-o.availableAmount()>30;o.gain(l?Math.floor(t.b/2):t.b)}Math.abs(o.availableAmount()-n.availableAmount())>30&&N.reportWarning({kind:"custom",en:"mana difference became more than 30",zh:"魔元失衡！"})}colorManaExceeds(t){return this.hasResourceAvailable("MAGICKED_SWORDPLAY")||this.hasResourceAvailable("WHITE_MANA",t)&&this.hasResourceAvailable("BLACK_MANA",t)}consumeColorMana(t){this.hasResourceAvailable("MAGICKED_SWORDPLAY")?this.tryConsumeResource("MAGICKED_SWORDPLAY"):(this.resources.get("WHITE_MANA").consume(t),this.resources.get("BLACK_MANA").consume(t))}maybeGainVerproc(t,n=.5){this.maybeGainProc(t,n,!0)}processComboStatus(t){const n=this.resources.get("MANA_STACKS"),o=this.config.level>=80,l=this.config.level>=90,r=this.resources.get("RDM_MELEE_COUNTER").availableAmount(),d=this.resources.get("RDM_FINISHER_COUNTER").availableAmount(),h=this.resources.get("RDM_AOE_COUNTER").availableAmount(),E=r+d+h>0;let A;t==="ENCHANTED_RIPOSTE"||t==="RIPOSTE"?(E&&N.reportComboBreak(),A=[1,0,0],t==="ENCHANTED_RIPOSTE"&&n.gain(1)):t==="ENCHANTED_ZWERCHHAU"||t==="ZWERCHHAU"?(E&&r!==1&&N.reportComboBreak(),A=[r===1?2:0,0,0],t==="ENCHANTED_ZWERCHHAU"&&n.gain(1)):t==="ENCHANTED_REDOUBLEMENT"||t==="REDOUBLEMENT"?(E&&r!==2&&N.reportComboBreak(),A=[0,0,0],t==="ENCHANTED_REDOUBLEMENT"&&n.gain(1)):t==="VERHOLY"||t==="VERFLARE"?(A=[0,o?1:0,0],n.consume(3)):t==="SCORCH"?A=[0,l?2:0,0]:t==="RESOLUTION"?A=[0,0,0]:t==="ENCHANTED_MOULINET"?(r+d>0&&N.reportComboBreak(),A=[0,0,1],n.gain(1)):t==="ENCHANTED_MOULINET_II"?(A=[0,0,2],n.gain(1)):t==="ENCHANTED_MOULINET_III"?(A=[0,0,0],n.gain(1)):t==="ENCHANTED_REPRISE"?A=[r,d,h]:(E&&N.reportComboBreak(),A=[0,0,0],n.consume(n.availableAmount())),this.setComboState("RDM_MELEE_COUNTER",A[0]),this.setComboState("RDM_FINISHER_COUNTER",A[1]),this.setComboState("RDM_AOE_COUNTER",A[2])}processManafic(){this.tryConsumeResource("MANAFICATION")&&!this.hasResourceAvailable("MANAFICATION")&&this.hasTraitUnlocked("ENHANCED_MANAFICATION_III")&&this.gainStatus("PREFULGENCE_READY")}}const za=(e,t,n)=>{const o=Ue(l=>l.processManafic(),n.onConfirm,l=>l.processDualcastAndInstants(e),l=>l.processComboStatus(e));return Qn("RDM",e,t,{...n,aspect:n.isPhysical?Ie.Physical:void 0,castTime:l=>l.config.adjustedCastTime(n.baseCastTime),recastTime:l=>l.config.adjustedGCD(),manaCost:n.baseManaCost??0,potency:n.basePotency,jobPotencyModifiers:l=>{const r=[];return l.hasResourceAvailable("EMBOLDEN")&&r.push(X.EmboldenMagic),l.hasResourceAvailable("MANAFICATION")&&r.push(X.Manafication),n.jobPotencyModifiers&&r.push(...n.jobPotencyModifiers(l)),r},isInstantFn:l=>yb.includes(e)||e==="GRAND_IMPACT"||Db.includes(e)&&l.hasResourceAvailable("ACCELERATION")||l.hasResourceAvailable("DUALCAST")||l.hasResourceAvailable("SWIFTCAST"),onConfirm:o})},Ii=(e,t,n)=>{const o=!e.toString().startsWith("ENCHANTED"),l=Ue(r=>r.processManafic(),r=>r.processComboStatus(e),n.onConfirm);return na("RDM",e,t,{...n,aspect:o?Ie.Physical:void 0,onConfirm:l,jobPotencyModifiers:r=>{const d=[];return o||(r.hasResourceAvailable("EMBOLDEN")&&d.push(X.EmboldenMagic),r.hasResourceAvailable("MANAFICATION")&&d.push(X.Manafication)),d}})},vs=(e,t,n,o)=>ot("RDM",e,t,n,{aspect:o.isPhysical?Ie.Physical:void 0,jobPotencyModifiers:l=>!o.isPhysical&&l.hasResourceAvailable("EMBOLDEN")?[X.EmboldenMagic]:[],...o}),vb={newSkill:"SCORCH",condition:e=>e.getFinisherCounter()===1},Mb={newSkill:"RESOLUTION",condition:e=>e.getFinisherCounter()===2},Sh={newSkill:"GRAND_IMPACT",condition:e=>e.getFinisherCounter()<1&&e.hasResourceAvailable("GRAND_IMPACT_READY")},Xu=[{newSkill:"JOLT_II",condition:e=>e.getFinisherCounter()<1&&!e.hasResourceAvailable("GRAND_IMPACT_READY")},vb,Mb,Sh];za("JOLT_II",62,{replaceIf:Xu,autoUpgrade:{trait:"RED_MAGIC_MASTERY_III",otherSkill:"JOLT_III"},baseCastTime:2,baseManaCost:200,applicationDelay:.8,basePotency:280,validateAttempt:e=>e.getFinisherCounter()<1&&!e.hasResourceAvailable("GRAND_IMPACT_READY"),onConfirm:e=>e.gainColorMana({w:2,b:2})});za("JOLT_III",84,{replaceIf:Xu,autoDowngrade:{trait:"RED_MAGIC_MASTERY_III",otherSkill:"JOLT_II"},baseCastTime:2,baseManaCost:200,applicationDelay:.8,basePotency:360,validateAttempt:e=>e.getFinisherCounter()<1&&!e.hasResourceAvailable("GRAND_IMPACT_READY"),onConfirm:e=>e.gainColorMana({w:2,b:2})});const Lb=[["NEVER",300],["RED_MAGIC_MASTERY_II",340],["RED_MAGIC_MASTERY_III",380]];za("VERSTONE",30,{baseCastTime:2,baseManaCost:200,applicationDelay:.8,basePotency:Lb,validateAttempt:e=>e.hasResourceAvailable("VERSTONE_READY"),onConfirm:e=>{e.gainColorMana({w:5}),e.tryConsumeResource("VERSTONE_READY")},highlightIf:e=>e.hasResourceAvailable("VERSTONE_READY")});za("VERFIRE",26,{baseCastTime:2,baseManaCost:200,applicationDelay:.8,basePotency:Lb,validateAttempt:e=>e.hasResourceAvailable("VERFIRE_READY"),onConfirm:e=>{e.gainColorMana({b:5}),e.tryConsumeResource("VERFIRE_READY")},highlightIf:e=>e.hasResourceAvailable("VERFIRE_READY")});const iS={newSkill:"VERHOLY",condition:e=>e.hasThreeManaStacks()},oS={newSkill:"VERFLARE",condition:e=>e.hasThreeManaStacks()};za("VERAERO",10,{replaceIf:[iS],autoUpgrade:{trait:"RED_MAGIC_MASTERY_II",otherSkill:"VERAERO_III"},baseCastTime:5,baseManaCost:400,applicationDelay:.76,basePotency:360,validateAttempt:e=>!e.hasThreeManaStacks(),onConfirm:e=>{e.gainColorMana({w:6}),e.hasResourceAvailable("ACCELERATION")?e.gainStatus("VERSTONE_READY"):e.maybeGainVerproc("VERSTONE_READY")}});za("VERTHUNDER",4,{replaceIf:[oS],autoUpgrade:{trait:"RED_MAGIC_MASTERY_II",otherSkill:"VERTHUNDER_III"},baseCastTime:5,baseManaCost:400,applicationDelay:.76,basePotency:360,validateAttempt:e=>!e.hasThreeManaStacks(),onConfirm:e=>{e.gainColorMana({b:6}),e.hasResourceAvailable("ACCELERATION")?e.gainStatus("VERFIRE_READY"):e.maybeGainVerproc("VERFIRE_READY")}});const Hb=[["NEVER",380],["ENCHANTED_BLADE_MASTERY",440]];za("VERAERO_III",82,{replaceIf:[iS],autoDowngrade:{trait:"RED_MAGIC_MASTERY_II",otherSkill:"VERAERO"},baseCastTime:5,baseManaCost:400,applicationDelay:.76,basePotency:Hb,validateAttempt:e=>!e.hasThreeManaStacks(),onConfirm:e=>{e.gainColorMana({w:6}),e.hasResourceAvailable("ACCELERATION")?e.gainStatus("VERSTONE_READY"):e.maybeGainVerproc("VERSTONE_READY")}});za("VERTHUNDER_III",82,{replaceIf:[oS],autoDowngrade:{trait:"RED_MAGIC_MASTERY_II",otherSkill:"VERTHUNDER"},baseCastTime:5,baseManaCost:400,applicationDelay:.76,basePotency:Hb,validateAttempt:e=>!e.hasThreeManaStacks(),onConfirm:e=>{e.gainColorMana({b:6}),e.hasResourceAvailable("ACCELERATION")?e.gainStatus("VERFIRE_READY"):e.maybeGainVerproc("VERFIRE_READY")}});const Ub=[["NEVER",100],["RED_MAGIC_MASTERY",120],["RED_MAGIC_MASTERY_III",140]];za("VERAERO_II",22,{replaceIf:[iS],baseCastTime:2,baseManaCost:400,applicationDelay:.8,basePotency:Ub,falloff:0,validateAttempt:e=>!e.hasThreeManaStacks(),onConfirm:e=>e.gainColorMana({w:7})});za("VERTHUNDER_II",18,{replaceIf:[oS],baseCastTime:2,baseManaCost:400,falloff:0,applicationDelay:.8,basePotency:Ub,validateAttempt:e=>!e.hasThreeManaStacks(),onConfirm:e=>e.gainColorMana({b:7})});za("IMPACT",66,{replaceIf:[vb,Mb,Sh],baseCastTime:5,baseManaCost:400,falloff:0,applicationDelay:.76,basePotency:[["NEVER",200],["RED_MAGIC_MASTERY_III",210]],jobPotencyModifiers:e=>e.hasResourceAvailable("ACCELERATION")?[X.AccelerationImpact]:[],validateAttempt:e=>e.getFinisherCounter()<1&&!e.hasResourceAvailable("GRAND_IMPACT_READY"),onConfirm:e=>e.gainColorMana({w:3,b:3})});za("GRAND_IMPACT",96,{replaceIf:Xu,startOnHotbar:!1,baseCastTime:0,baseManaCost:0,basePotency:600,falloff:.55,applicationDelay:1.55,validateAttempt:Sh.condition,highlightIf:Sh.condition,onConfirm:e=>e.gainColorMana({w:3,b:3})});Ii("RIPOSTE",1,{replaceIf:[{newSkill:"ENCHANTED_RIPOSTE",condition:e=>e.colorManaExceeds(20)}],applicationDelay:.62,potency:130,recastTime:2.5,validateAttempt:e=>!e.colorManaExceeds(20)});Ii("ZWERCHHAU",35,{replaceIf:[{newSkill:"ENCHANTED_ZWERCHHAU",condition:e=>e.colorManaExceeds(15)}],applicationDelay:.62,potency:100,combo:{potency:150,resource:"RDM_MELEE_COUNTER",resourceValue:1},recastTime:2.5,validateAttempt:e=>!e.colorManaExceeds(15),highlightIf:e=>e.resources.get("RDM_MELEE_COUNTER").availableAmount()===1});Ii("REDOUBLEMENT",50,{replaceIf:[{newSkill:"ENCHANTED_REDOUBLEMENT",condition:e=>e.colorManaExceeds(15)}],applicationDelay:.62,potency:100,combo:{potency:230,resource:"RDM_MELEE_COUNTER",resourceValue:2},recastTime:2.5,validateAttempt:e=>!e.colorManaExceeds(15),highlightIf:e=>e.resources.get("RDM_MELEE_COUNTER").availableAmount()===2});Ii("ENCHANTED_RIPOSTE",50,{startOnHotbar:!1,replaceIf:[{newSkill:"RIPOSTE",condition:e=>!e.colorManaExceeds(20)}],applicationDelay:.62,potency:[["NEVER",220],["RED_MAGIC_MASTERY_III",280],["ENCHANTED_BLADE_MASTERY",340]],recastTime:1.5,validateAttempt:e=>e.colorManaExceeds(20),onConfirm:e=>e.consumeColorMana(20)});Ii("ENCHANTED_ZWERCHHAU",50,{startOnHotbar:!1,replaceIf:[{newSkill:"ZWERCHHAU",condition:e=>!e.colorManaExceeds(15)}],applicationDelay:.62,potency:[["NEVER",100],["RED_MAGIC_MASTERY_III",150],["ENCHANTED_BLADE_MASTERY",190]],combo:{potency:[["NEVER",290],["RED_MAGIC_MASTERY_III",340],["ENCHANTED_BLADE_MASTERY",380]],resource:"RDM_MELEE_COUNTER",resourceValue:1},recastTime:1.5,validateAttempt:e=>e.colorManaExceeds(15),onConfirm:e=>e.consumeColorMana(15),highlightIf:e=>e.resources.get("RDM_MELEE_COUNTER").availableAmount()===1});Ii("ENCHANTED_REDOUBLEMENT",50,{startOnHotbar:!1,replaceIf:[{newSkill:"REDOUBLEMENT",condition:e=>!e.colorManaExceeds(15)}],applicationDelay:.62,potency:[["NEVER",100],["RED_MAGIC_MASTERY_III",130],["ENCHANTED_BLADE_MASTERY",190]],combo:{potency:[["NEVER",470],["RED_MAGIC_MASTERY_III",500],["ENCHANTED_BLADE_MASTERY",560]],resource:"RDM_MELEE_COUNTER",resourceValue:2},recastTime:2.2,validateAttempt:e=>e.colorManaExceeds(15),onConfirm:e=>e.consumeColorMana(15),highlightIf:e=>e.resources.get("RDM_MELEE_COUNTER").availableAmount()===2});const Ih=e=>e.resources.get("WHITE_MANA").available(5)&&e.resources.get("BLACK_MANA").available(5);Ii("REPRISE",76,{replaceIf:[{newSkill:"ENCHANTED_REPRISE",condition:e=>Ih(e)}],applicationDelay:.62,potency:100,recastTime:2.5,validateAttempt:e=>!Ih(e)});Ii("ENCHANTED_REPRISE",76,{startOnHotbar:!1,replaceIf:[{newSkill:"REPRISE",condition:e=>!Ih(e)}],applicationDelay:.62,potency:[["NEVER",290],["RED_MAGIC_MASTERY_III",340],["ENCHANTED_BLADE_MASTERY",420]],recastTime:2.5,validateAttempt:e=>Ih(e),onConfirm:e=>{e.resources.get("WHITE_MANA").consume(5),e.resources.get("BLACK_MANA").consume(5)}});const Qi=[{newSkill:"MOULINET",condition:e=>e.resources.get("RDM_AOE_COUNTER").availableAmount()===0&&!e.colorManaExceeds(20)||!e.colorManaExceeds(15)},{newSkill:"ENCHANTED_MOULINET",condition:e=>e.colorManaExceeds(20)&&e.resources.get("RDM_AOE_COUNTER").availableAmount()===0},{newSkill:"ENCHANTED_MOULINET_II",condition:e=>e.colorManaExceeds(15)&&e.resources.get("RDM_AOE_COUNTER").availableAmount()===1},{newSkill:"ENCHANTED_MOULINET_III",condition:e=>e.colorManaExceeds(15)&&e.resources.get("RDM_AOE_COUNTER").availableAmount()===2}];Ii("MOULINET",52,{replaceIf:Qi,falloff:0,applicationDelay:.8,potency:60,recastTime:2.5,validateAttempt:Qi[0].condition});Ii("ENCHANTED_MOULINET",52,{startOnHotbar:!1,replaceIf:Qi,falloff:0,applicationDelay:.8,potency:130,recastTime:1.5,validateAttempt:Qi[1].condition,onConfirm:e=>e.consumeColorMana(20)});Ii("ENCHANTED_MOULINET_II",52,{startOnHotbar:!1,replaceIf:Qi,falloff:0,applicationDelay:.8,potency:140,recastTime:1.5,validateAttempt:Qi[2].condition,onConfirm:e=>e.consumeColorMana(15),highlightIf:Qi[2].condition});Ii("ENCHANTED_MOULINET_III",52,{startOnHotbar:!1,replaceIf:Qi,falloff:0,applicationDelay:.8,potency:150,recastTime:1.5,validateAttempt:Qi[3].condition,onConfirm:e=>e.consumeColorMana(15),highlightIf:Qi[3].condition});const kb=[["NEVER",600],["ENCHANTED_BLADE_MASTERY",650]];za("VERHOLY",70,{startOnHotbar:!1,baseCastTime:0,baseManaCost:400,falloff:.55,applicationDelay:1.43,basePotency:kb,validateAttempt:e=>e.hasThreeManaStacks(),highlightIf:e=>e.hasThreeManaStacks(),onConfirm:e=>{e.resources.get("WHITE_MANA").availableAmount()<e.resources.get("BLACK_MANA").availableAmount()?e.gainStatus("VERSTONE_READY"):e.maybeGainVerproc("VERSTONE_READY",.2),e.gainColorMana({w:11})}});za("VERFLARE",68,{startOnHotbar:!1,baseCastTime:0,baseManaCost:400,falloff:.55,applicationDelay:1.43,basePotency:kb,validateAttempt:e=>e.hasThreeManaStacks(),highlightIf:e=>e.hasThreeManaStacks(),onConfirm:e=>{e.resources.get("BLACK_MANA").availableAmount()<e.resources.get("WHITE_MANA").availableAmount()?e.gainStatus("VERFIRE_READY"):e.maybeGainVerproc("VERFIRE_READY",.2),e.gainColorMana({b:11})}});za("SCORCH",80,{startOnHotbar:!1,replaceIf:Xu,baseCastTime:0,baseManaCost:400,falloff:.55,applicationDelay:1.83,basePotency:[["NEVER",680],["ENCHANTED_BLADE_MASTERY",750]],validateAttempt:e=>e.getFinisherCounter()===1,onConfirm:e=>e.gainColorMana({w:4,b:4}),highlightIf:e=>e.getFinisherCounter()===1});za("RESOLUTION",90,{startOnHotbar:!1,replaceIf:Xu,baseCastTime:0,baseManaCost:400,falloff:.55,applicationDelay:1.56,basePotency:[["NEVER",750],["ENCHANTED_BLADE_MASTERY",850]],validateAttempt:e=>e.getFinisherCounter()===2,onConfirm:e=>e.gainColorMana({w:4,b:4}),highlightIf:e=>e.getFinisherCounter()===2});za("VERCURE",54,{baseCastTime:2,baseManaCost:500,applicationDelay:.8,basePotency:0});za("VERRAISE",64,{baseCastTime:10,baseManaCost:2400,applicationDelay:.81,basePotency:0});ze("RDM","EMBOLDEN",58,"cd_EMBOLDEN",{replaceIf:[{newSkill:"VICE_OF_THORNS",condition:e=>e.hasResourceAvailable("THORNED_FLOURISH")}],rscType:"EMBOLDEN",applicationDelay:.62,cooldown:120,onApplication:e=>{e.hasTraitUnlocked("ENHANCED_EMBOLDEN")&&e.gainStatus("THORNED_FLOURISH")}});ze("RDM","MANAFICATION",60,"cd_MANAFICATION",{replaceIf:[{newSkill:"PREFULGENCE",condition:e=>e.hasResourceAvailable("PREFULGENCE_READY")}],rscType:"MANAFICATION",requiresCombat:!0,applicationDelay:0,cooldown:110,onApplication:e=>{e.gainStatus("MAGICKED_SWORDPLAY",3),(e.hasResourceAvailable("RDM_MELEE_COUNTER")||e.hasResourceAvailable("RDM_FINISHER_COUNTER")||e.hasResourceAvailable("RDM_AOE_COUNTER"))&&N.reportComboBreak(),e.setComboState("RDM_MELEE_COUNTER",0),e.setComboState("RDM_FINISHER_COUNTER",0),e.setComboState("RDM_AOE_COUNTER",0)}});vs("CORPS_A_CORPS",6,"cd_CORPS_A_CORPS",{isPhysical:!0,applicationDelay:.62,potency:130,cooldown:35,maxCharges:2,animationLock:Vt});const xb=[["NEVER",130],["ENHANCED_DISPLACEMENT",180]];vs("ENGAGEMENT",40,"cd_DISPLACEMENT",{isPhysical:!0,applicationDelay:.62,potency:xb,cooldown:35,maxCharges:2});vs("DISPLACEMENT",40,"cd_DISPLACEMENT",{isPhysical:!0,applicationDelay:.62,potency:xb,cooldown:35,maxCharges:2,animationLock:Vt});vs("FLECHE",45,"cd_FLECHE",{isPhysical:!0,applicationDelay:1.16,potency:[["NEVER",460],["ENCHANTED_BLADE_MASTERY",480]],cooldown:25});vs("CONTRE_SIXTE",56,"cd_CONTRE_SIXTE",{isPhysical:!0,falloff:0,applicationDelay:1.16,potency:[["NEVER",380],["ENCHANTED_BLADE_MASTERY",420]],cooldown:35});ze("RDM","ACCELERATION",50,"cd_ACCELERATION",{rscType:"ACCELERATION",applicationDelay:0,cooldown:55,maxCharges:2,onApplication:e=>{e.hasTraitUnlocked("ENHANCED_ACCELERATION_II")&&(e.hasResourceAvailable("GRAND_IMPACT_READY")&&N.reportWarning({kind:"overwrite",rsc:"GRAND_IMPACT_READY"}),e.gainStatus("GRAND_IMPACT_READY"))}});ze("RDM","MAGICK_BARRIER",86,"cd_MAGICK_BARRIER",{rscType:"MAGICK_BARRIER",applicationDelay:0,cooldown:120});vs("VICE_OF_THORNS",92,"cd_VICE_OF_THORNS",{startOnHotbar:!1,falloff:.55,applicationDelay:.8,potency:900,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("THORNED_FLOURISH"),onConfirm:e=>e.tryConsumeResource("THORNED_FLOURISH"),highlightIf:e=>e.hasResourceAvailable("THORNED_FLOURISH")});vs("PREFULGENCE",100,"cd_PREFULGENCE",{startOnHotbar:!1,falloff:.55,applicationDelay:1.42,potency:1200,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("PREFULGENCE_READY"),onConfirm:e=>e.tryConsumeResource("PREFULGENCE_READY"),highlightIf:e=>e.hasResourceAvailable("PREFULGENCE_READY")});Object.keys(ST).forEach(e=>Ft(e,`RPR/${Ge[e].name}.png`));class jG extends Wt{jobSpecificOtherTargetedBuffViewProps(){return[this.makeCommonTimer("DEATHS_DESIGN",!1)]}jobSpecificSelfTargetedBuffViewProps(){return[...Object.keys(ST).filter(t=>t!=="DEATHS_DESIGN").map(t=>t==="SOULSOW"?this.makeCommonTimerless(t):this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){var T,S;const n=this.state.resources,o=n.get("SOUL").availableAmount(),l=n.get("SHROUD").availableAmount(),r=n.get("LEMURE_SHROUD").availableAmount(),d=n.get("VOID_SHROUD").availableAmount(),h=n.get("RPR_COMBO"),E=n.get("RPR_AOE_COMBO"),A=h.available(1)?(T=h.pendingChange)==null?void 0:T.timeTillEvent:E.available(1)?(S=E.pendingChange)==null?void 0:S.timeTillEvent:void 0,R=[{kind:"text",name:C({en:"Combo Timer",zh:"连击监控"}),text:(A==null?void 0:A.toFixed(3))??"N/A"},{kind:"bar",name:C({en:"Soul Gauge",zh:"灵魂量谱"}),color:o<50?t.rpr.soulGaugeLow:t.rpr.soulGaugeHigh,progress:o/100,valueString:Math.floor(o)+"/100"}];return this.state.hasTraitUnlocked("SHROUD_GAUGE")&&R.push({kind:"bar",name:C({en:"Shroud Gauge",zh:"魂衣量谱"}),color:l<50?t.rpr.shroudGaugeLow:t.rpr.shroudGaugeHigh,progress:l/100,valueString:Math.floor(l)+"/100"},{kind:"counter",name:C({en:"Lemure Shroud",zh:"夜游魂"}),color:t.rpr.lemureShroud,currentStacks:r,maxStacks:5}),this.state.hasTraitUnlocked("VOID_SOUL")&&R.push({kind:"counter",name:C({en:"Void Shroud",zh:"虚无魂"}),color:d<2?t.rpr.voidShroudLow:t.rpr.voidShroudHigh,currentStacks:d,maxStacks:5}),R}}function _t(e,t,n){Ye("RPR",e,t,n??{})}_t("SOUL",100);_t("SHROUD",100);_t("DEATHS_DESIGN",1,{});_t("SOUL_REAVER",2,{timeout:30});_t("ENHANCED_GIBBET",1,{timeout:60});_t("ENHANCED_GALLOWS",1,{timeout:60});_t("EXECUTIONER",2,{timeout:30});_t("ENSHROUDED",1,{timeout:30});_t("LEMURE_SHROUD",5,{timeout:30});_t("VOID_SHROUD",5);_t("OBLATIO",1,{timeout:30});_t("ENHANCED_VOID_REAPING",1,{timeout:30});_t("ENHANCED_CROSS_REAPING",1,{timeout:30});_t("IDEAL_HOST",1,{timeout:30});_t("PERFECTIO_OCCULTA",1,{timeout:30});_t("PERFECTIO_PARATA",1,{timeout:30});_t("ARCANE_CIRCLE",1,{timeout:20});_t("CIRCLE_OF_SACRIFICE",1,{timeout:5});_t("BLOODSOWN_CIRCLE",1,{timeout:6});_t("IMMORTAL_SACRIFICE",8,{timeout:30});_t("ARCANE_CREST",1,{timeout:5});_t("CREST_OF_TIME_BORROWED",1,{timeout:5});_t("CREST_OF_TIME_RETURNED",1,{timeout:15});_t("SOULSOW",1,{default:1});_t("THRESHOLD",1,{timeout:10});_t("ENHANCED_HARPE",1,{timeout:10});_t("HELLS_INGRESS_USED",1);_t("RPR_COMBO",2,{timeout:30});_t("RPR_AOE_COMBO",1,{timeout:30});class YG extends Xt{constructor(t){super(t);const n=this.hasTraitUnlocked("TEMPERED_SOUL")?2:1;this.cooldowns.set(new ke("cd_SOUL_SLICE",30,n,n)),this.registerRecurringEvents()}get statusPropsGenerator(){return new jG(this)}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("ARCANE_CIRCLE")&&t.addBuff(H.ArcaneCircle),this.hasResourceAvailable("DEATHS_DESIGN")&&t.addBuff(H.DeathsDesign)}refreshDeathsDesign(){const t=this.resources.get("DEATHS_DESIGN"),n=Math.min(this.resources.timeTillReady("DEATHS_DESIGN")+30,60);if(t.available(1)){t.overrideTimer(this,n);return}t.gain(1),this.resources.addResourceEvent({rscType:"DEATHS_DESIGN",name:"drop Death's Design",delay:n,fnOnRsc:o=>{o.consume(1)}})}setTimedResource(t,n){this.tryConsumeResource(t),this.resources.get(t).gain(n),this.enqueueResourceDrop(t)}processCombo(t){const n=this.resources.get("RPR_COMBO").availableAmount(),o=this.resources.get("RPR_AOE_COMBO").availableAmount(),[l,r]=new Map([["SLICE",[1,0]],["WAXING_SLICE",[n===1?2:0,0]],["INFERNAL_SLICE",[0,0]],["SPINNING_SCYTHE",[0,1]],["NIGHTMARE_SCYTHE",[0,0]]]).get(t)??[n,o];l!==n&&this.setComboState("RPR_COMBO",l),r!==o&&this.setComboState("RPR_AOE_COMBO",r)}processSoulGauge(t){const n=this.resources.get("SOUL");if(["SLICE","WAXING_SLICE","INFERNAL_SLICE","SPINNING_SCYTHE","NIGHTMARE_SCYTHE","HARPE","HARVEST_MOON"].includes(t)){n.gain(10);return}if(["SOUL_SLICE","SOUL_SCYTHE"].includes(t)){n.gain(50);return}if(["BLOOD_STALK","UNVEILED_GALLOWS","UNVEILED_GIBBET","GRIM_SWATHE","GLUTTONY"].includes(t)){n.consume(50);return}}processShroudGauge(t){const n=this.resources.get("SHROUD");if(["GALLOWS","GIBBET","EXECUTIONERS_GALLOWS","EXECUTIONERS_GIBBET","GUILLOTINE","EXECUTIONERS_GUILLOTINE"].includes(t)){n.gain(10);return}t==="ENSHROUD"&&!this.resources.get("IDEAL_HOST").available(1)&&n.consume(50)}processReaversExecutioner(t){const n=this.resources.get("SOUL_REAVER"),o=this.resources.get("EXECUTIONER");if(["GIBBET","GALLOWS","GUILLOTINE"].includes(t)){n.consume(1);return}if(["EXECUTIONERS_GIBBET","EXECUTIONERS_GALLOWS","EXECUTIONERS_GUILLOTINE"].includes(t)){o.consume(1);return}if(this.skillsList.get(t).cdName==="cd_GCD"&&(n.consume(n.availableAmount()),o.consume(o.availableAmount())),["BLOOD_STALK","UNVEILED_GALLOWS","UNVEILED_GIBBET","GRIM_SWATHE"].includes(t)){n.consume(n.availableAmount()),o.consume(o.availableAmount()),this.setTimedResource("SOUL_REAVER",1);return}if(t==="GLUTTONY"){if(n.consume(n.availableAmount()),o.consume(o.availableAmount()),this.hasTraitUnlocked("ENHANCED_GLUTTONY")){this.setTimedResource("EXECUTIONER",2);return}this.setTimedResource("SOUL_REAVER",2);return}}processGibbetGallows(t){const n=this.resources.get("SOUL_REAVER"),o=this.resources.get("EXECUTIONER");["GIBBET","GALLOWS","EXECUTIONERS_GIBBET","EXECUTIONERS_GALLOWS"].includes(t)||(n.consume(n.availableAmount()),o.consume(o.availableAmount()));const l=new Map([["GIBBET","ENHANCED_GIBBET"],["EXECUTIONERS_GIBBET","ENHANCED_GIBBET"],["GALLOWS","ENHANCED_GALLOWS"],["EXECUTIONERS_GALLOWS","ENHANCED_GALLOWS"]]),r=new Map([["GIBBET","ENHANCED_GALLOWS"],["EXECUTIONERS_GIBBET","ENHANCED_GALLOWS"],["GALLOWS","ENHANCED_GIBBET"],["EXECUTIONERS_GALLOWS","ENHANCED_GIBBET"]]),d=this.resources.get(l.get(t)),h=this.resources.get(r.get(t));d.consume(d.availableAmount()),h.consume(h.availableAmount()),h.gain(1)}processCircleOfSacrifice(t){if(!this.hasResourceAvailable("CIRCLE_OF_SACRIFICE"))return;Sl("RPR",t).potencyFn(this)>0&&(this.resources.get("IMMORTAL_SACRIFICE").availableAmount()===0?this.setTimedResource("IMMORTAL_SACRIFICE",1):this.resources.get("IMMORTAL_SACRIFICE").gain(1),this.tryConsumeResource("CIRCLE_OF_SACRIFICE",!0))}enterEnshroud(){this.hasResourceAvailable("IDEAL_HOST")&&this.resources.get("IDEAL_HOST").consume(1),this.hasTraitUnlocked("ENHANCED_ENSHROUD")&&this.setTimedResource("OBLATIO",1),this.setTimedResource("LEMURE_SHROUD",5),this.tryConsumeResource("PERFECTIO_PARATA",!0)}exitEnshroud(){this.tryConsumeResource("ENSHROUDED"),this.tryConsumeResource("OBLATIO"),this.tryConsumeResource("LEMURE_SHROUD"),this.tryConsumeResource("VOID_SHROUD"),this.tryConsumeResource("ENHANCED_CROSS_REAPING"),this.tryConsumeResource("ENHANCED_VOID_REAPING")}}const KG=new Set(["SHADOW_OF_DEATH","WHORL_OF_DEATH","HARVEST_MOON","HARPE","VOID_REAPING","CROSS_REAPING","GRIM_REAPING","LEMURES_SLICE","LEMURES_SCYTHE","SACRIFICIUM","COMMUNIO","ARCANE_CIRCLE","HELLS_EGRESS","HELLS_INGRESS","REGRESS","ARCANE_CREST","FEINT","LEG_SWEEP","BLOODBATH","TRUE_NORTH","ARMS_LENGTH","SECOND_WIND","SPRINT","TINCTURE"]),Jh=(e,t)=>n=>{const o=["GIBBET","GALLOWS","GUILLOTINE"].includes(t)?n.resources.get("SOUL_REAVER"):n.resources.get("EXECUTIONER");return n.resources.get(e).available(1)||o.available(1)&&!n.hasResourceAvailable("ENHANCED_GIBBET")&&!n.hasResourceAvailable("ENHANCED_GALLOWS")},lS=e=>e.hasResourceAvailable("SOUL_REAVER"),sS=e=>e.hasResourceAvailable("EXECUTIONER"),eo=e=>t=>t.resources.get("SOUL").availableAmount()>=e,rS=e=>KG.has(e),ef=e=>Ue(t=>t.processCombo(e),t=>t.processSoulGauge(e),t=>t.processShroudGauge(e),t=>t.processReaversExecutioner(e),t=>t.processCircleOfSacrifice(e)),cS=e=>{const t=[];return e.hasResourceAvailable("ARCANE_CIRCLE")&&t.push(X.ArcaneCircle),e.hasResourceAvailable("DEATHS_DESIGN")&&t.push(X.DeathsDesign),t},tf=(e,t,n)=>{const o=Ue(ef(e),n.onConfirm),l=ju(r=>!r.resources.get("ENSHROUDED").available(1)||rS(e),n.validateAttempt??(()=>!0));return Qn("RPR",e,t,{...n,recastTime:r=>r.config.adjustedGCD(n.recastTime),onConfirm:o,validateAttempt:l,isInstantFn:r=>!(e==="COMMUNIO"||e==="HARPE"&&!r.hasResourceAvailable("ENHANCED_HARPE")||e==="SOULSOW"&&r.isInCombat()),jobPotencyModifiers:cS})},ga=(e,t,n)=>{const o=Ue(ef(e),n.onConfirm),l=ju(r=>!r.resources.get("ENSHROUDED").available(1)||rS(e),n.validateAttempt??(()=>!0));return na("RPR",e,t,{...n,onConfirm:o,jobPotencyModifiers:r=>{const d=cS(r);if(["GIBBET","EXECUTIONERS_GIBBET"].includes(e)&&r.hasResourceAvailable("ENHANCED_GIBBET")&&d.push(X.EnhancedGibbetGallows),["GALLOWS","EXECUTIONERS_GALLOWS"].includes(e)&&r.hasResourceAvailable("ENHANCED_GALLOWS")&&d.push(X.EnhancedGibbetGallows),e==="VOID_REAPING"&&r.hasResourceAvailable("ENHANCED_VOID_REAPING")&&d.push(X.EnhancedReaping),e==="CROSS_REAPING"&&r.hasResourceAvailable("ENHANCED_CROSS_REAPING")&&d.push(X.EnhancedReaping),e==="PLENTIFUL_HARVEST"&&r.hasResourceAvailable("IMMORTAL_SACRIFICE"))for(let h=0;h<r.resources.get("IMMORTAL_SACRIFICE").availableAmount();h++)d.push(X.ImmortalSacrifice);return d},validateAttempt:l})},Pn=(e,t,n,o)=>{const l=Ue(ef(e),o.onConfirm),r=ju(d=>!d.resources.get("ENSHROUDED").available(1)||rS(e),o.validateAttempt??(()=>!0));return ot("RPR",e,t,n,{...o,onConfirm:l,validateAttempt:r,jobPotencyModifiers:cS})};ga("SHADOW_OF_DEATH",10,{potency:300,aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:1.15,onConfirm:e=>e.refreshDeathsDesign()});ga("SLICE",1,{potency:[["NEVER",260],["MELEE_MASTERY_II_RPR",320],["MELEE_MASTERY_III_RPR",460]],aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.49});ga("WAXING_SLICE",5,{potency:[["NEVER",100],["MELEE_MASTERY_II_RPR",160],["MELEE_MASTERY_III_RPR",260]],combo:{potency:[["NEVER",340],["MELEE_MASTERY_II_RPR",400],["MELEE_MASTERY_III_RPR",500]],resource:"RPR_COMBO",resourceValue:1},aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.58,highlightIf:e=>e.hasResourceExactly("RPR_COMBO",1)});ga("INFERNAL_SLICE",30,{potency:[["NEVER",100],["MELEE_MASTERY_II_RPR",180],["MELEE_MASTERY_III_RPR",280]],combo:{potency:[["NEVER",420],["MELEE_MASTERY_II_RPR",500],["MELEE_MASTERY_III_RPR",600]],resource:"RPR_COMBO",resourceValue:2},aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.54,highlightIf:e=>e.hasResourceExactly("RPR_COMBO",2)});ga("SOUL_SLICE",60,{potency:[["NEVER",460],["MELEE_MASTERY_III_RPR",520]],aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.99,secondaryCooldown:{cdName:"cd_SOUL_SLICE",cooldown:30,maxCharges:2}});ga("GIBBET",70,{replaceIf:[{newSkill:"VOID_REAPING",condition:e=>e.hasResourceAvailable("ENSHROUDED")},{newSkill:"EXECUTIONERS_GIBBET",condition:e=>e.hasResourceAvailable("EXECUTIONER")}],potency:[["NEVER",460],["MELEE_MASTERY_III_RPR",500]],positional:{potency:[["NEVER",520],["MELEE_MASTERY_III_RPR",560]],location:"flank"},aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.5,highlightIf:Jh("ENHANCED_GIBBET","GIBBET"),validateAttempt:lS,onConfirm:e=>{e.tryConsumeResource("ENHANCED_GIBBET"),e.setTimedResource("ENHANCED_GALLOWS",1)}});ga("GALLOWS",70,{replaceIf:[{newSkill:"CROSS_REAPING",condition:e=>e.hasResourceAvailable("ENSHROUDED")},{newSkill:"EXECUTIONERS_GALLOWS",condition:e=>e.resources.get("EXECUTIONER").available(1)}],potency:[["NEVER",460],["MELEE_MASTERY_III_RPR",500]],positional:{potency:[["NEVER",520],["MELEE_MASTERY_III_RPR",560]],location:"rear"},aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.53,highlightIf:Jh("ENHANCED_GALLOWS","GALLOWS"),validateAttempt:lS,onConfirm:e=>{e.tryConsumeResource("ENHANCED_GALLOWS"),e.setTimedResource("ENHANCED_GIBBET",1)}});ga("EXECUTIONERS_GIBBET",96,{startOnHotbar:!1,potency:700,positional:{potency:760,location:"flank"},aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.62,highlightIf:Jh("ENHANCED_GIBBET","EXECUTIONERS_GIBBET"),validateAttempt:sS,onConfirm:e=>{e.tryConsumeResource("ENHANCED_GIBBET"),e.setTimedResource("ENHANCED_GALLOWS",1)}});ga("EXECUTIONERS_GALLOWS",96,{startOnHotbar:!1,potency:700,positional:{potency:760,location:"flank"},aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.62,highlightIf:Jh("ENHANCED_GALLOWS","EXECUTIONERS_GALLOWS"),validateAttempt:sS,onConfirm:e=>{e.tryConsumeResource("ENHANCED_GALLOWS"),e.setTimedResource("ENHANCED_GIBBET",1)}});ga("PLENTIFUL_HARVEST",88,{potency:720,aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:.2,applicationDelay:1.16,highlightIf:e=>e.hasResourceAvailable("IMMORTAL_SACRIFICE",1),validateAttempt:e=>e.hasResourceAvailable("IMMORTAL_SACRIFICE",1)&&!e.hasResourceAvailable("BLOODSOWN_CIRCLE"),onConfirm:e=>{e.tryConsumeResource("IMMORTAL_SACRIFICE",!0),e.setTimedResource("IDEAL_HOST",1),e.setTimedResource("PERFECTIO_OCCULTA",1)}});tf("COMMUNIO",90,{replaceIf:[{condition:e=>e.hasResourceAvailable("PERFECTIO_PARATA"),newSkill:"PERFECTIO"}],potency:1100,aspect:Ie.Other,castTime:1.3,recastTime:2.5,falloff:.2,applicationDelay:1.16,validateAttempt:e=>e.hasResourceAvailable("ENSHROUDED"),highlightIf:e=>e.hasResourceAvailable("ENSHROUDED")&&e.resources.get("LEMURE_SHROUD").availableAmount()===1,onConfirm:e=>{e.tryConsumeResource("PERFECTIO_OCCULTA")&&e.setTimedResource("PERFECTIO_PARATA",1),e.exitEnshroud(),e.tryConsumeResource("ENHANCED_CROSS_REAPING"),e.tryConsumeResource("ENHANCED_VOID_REAPING")}});tf("HARPE",15,{potency:300,aspect:Ie.Other,castTime:1.3,recastTime:2.5,applicationDelay:.9,highlightIf:e=>e.hasResourceAvailable("ENHANCED_HARPE"),onConfirm:e=>e.tryConsumeResource("ENHANCED_HARPE")});tf("SOULSOW",82,{potency:0,replaceIf:[{condition:e=>e.hasResourceAvailable("SOULSOW"),newSkill:"HARVEST_MOON"}],startOnHotbar:!0,aspect:Ie.Other,castTime:5,recastTime:2.5,applicationDelay:0,onConfirm:e=>e.resources.get("SOULSOW").gain(1)});tf("HARVEST_MOON",82,{potency:[["NEVER",600],["MELEE_MASTERY_III_RPR",800]],startOnHotbar:!1,aspect:Ie.Other,castTime:0,recastTime:2.5,falloff:.4,applicationDelay:.9,validateAttempt:e=>e.hasResourceAvailable("SOULSOW"),highlightIf:e=>e.hasResourceAvailable("SOULSOW"),onConfirm:e=>e.resources.get("SOULSOW").consume(1)});Pn("GLUTTONY",76,"cd_GLUTTONY",{replaceIf:[{condition:e=>e.hasResourceAvailable("ENSHROUDED"),newSkill:"SACRIFICIUM"}],isPhysical:!1,potency:520,startOnHotbar:!0,falloff:.25,applicationDelay:1.06,cooldown:60,validateAttempt:eo(50),highlightIf:eo(50)});Pn("BLOOD_STALK",50,"cd_BLOOD_STALK",{replaceIf:[{newSkill:"LEMURES_SLICE",condition:e=>e.hasResourceAvailable("ENSHROUDED")},{newSkill:"UNVEILED_GIBBET",condition:e=>e.hasResourceAvailable("ENHANCED_GIBBET")},{newSkill:"UNVEILED_GALLOWS",condition:e=>e.hasResourceAvailable("ENHANCED_GALLOWS")}],isPhysical:!0,potency:340,startOnHotbar:!0,applicationDelay:.89,cooldown:1,validateAttempt:eo(50),highlightIf:eo(50)});Pn("GRIM_SWATHE",55,"cd_BLOOD_STALK",{replaceIf:[{condition:e=>e.hasResourceAvailable("ENSHROUDED"),newSkill:"LEMURES_SCYTHE"}],isPhysical:!0,potency:140,startOnHotbar:!0,falloff:0,applicationDelay:.58,cooldown:1,validateAttempt:eo(50),highlightIf:eo(50)});Pn("UNVEILED_GIBBET",70,"cd_BLOOD_STALK",{isPhysical:!0,potency:440,startOnHotbar:!1,applicationDelay:.54,cooldown:1,validateAttempt:eo(50),highlightIf:eo(50)});Pn("UNVEILED_GALLOWS",70,"cd_BLOOD_STALK",{isPhysical:!0,potency:440,startOnHotbar:!1,applicationDelay:.54,cooldown:1,validateAttempt:eo(50),highlightIf:eo(50)});Pn("LEMURES_SLICE",86,"cd_LEMURES_SLICE",{isPhysical:!0,potency:[["NEVER",240],["MELEE_MASTERY_III_RPR",280]],startOnHotbar:!1,applicationDelay:.7,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("VOID_SHROUD",2),highlightIf:e=>e.hasResourceAvailable("VOID_SHROUD",2),onConfirm:e=>{e.resources.get("VOID_SHROUD").consume(2)}});Pn("SACRIFICIUM",92,"cd_SACRIFICIUM",{isPhysical:!1,potency:600,startOnHotbar:!1,falloff:.2,applicationDelay:.76,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("OBLATIO"),highlightIf:e=>e.hasResourceAvailable("OBLATIO"),onConfirm:e=>e.tryConsumeResource("OBLATIO")});ze("RPR","ARCANE_CIRCLE",72,"cd_ARCANE_CIRCLE",{rscType:"ARCANE_CIRCLE",applicationDelay:.6,startOnHotbar:!0,maxCharges:1,potency:0,onApplication:e=>{e.hasTraitUnlocked("ENHANCED_ARCANE_CIRCLE")&&(e.setTimedResource("CIRCLE_OF_SACRIFICE",1),e.setTimedResource("BLOODSOWN_CIRCLE",1))},cooldown:120});ga("VOID_REAPING",80,{startOnHotbar:!1,potency:[["NEVER",460],["MELEE_MASTERY_III_RPR",540]],aspect:Ie.Physical,recastTime:1.5,applicationDelay:.53,highlightIf:e=>e.resources.get("LEMURE_SHROUD").availableAmount()>1&&!e.hasResourceAvailable("ENHANCED_CROSS_REAPING"),validateAttempt:e=>e.hasResourceAvailable("LEMURE_SHROUD"),onConfirm:e=>{e.tryConsumeResource("ENHANCED_VOID_REAPING"),e.setTimedResource("ENHANCED_CROSS_REAPING",1),e.resources.get("LEMURE_SHROUD").consume(1),e.resources.get("VOID_SHROUD").gain(1),e.resources.get("LEMURE_SHROUD").availableAmount()===0&&e.exitEnshroud()}});ga("CROSS_REAPING",80,{startOnHotbar:!1,potency:[["NEVER",460],["MELEE_MASTERY_III_RPR",540]],aspect:Ie.Physical,recastTime:1.5,applicationDelay:.53,highlightIf:e=>e.resources.get("LEMURE_SHROUD").availableAmount()>1&&!e.hasResourceAvailable("ENHANCED_VOID_REAPING"),validateAttempt:e=>e.hasResourceAvailable("LEMURE_SHROUD"),onConfirm:e=>{e.tryConsumeResource("ENHANCED_CROSS_REAPING"),e.setTimedResource("ENHANCED_VOID_REAPING",1),e.resources.get("LEMURE_SHROUD").consume(1),e.resources.get("VOID_SHROUD").gain(1),e.resources.get("LEMURE_SHROUD").availableAmount()===0&&e.exitEnshroud()}});ze("RPR","ENSHROUD",80,"cd_ENSHROUD",{rscType:"ENSHROUDED",highlightIf:e=>e.hasResourceAvailable("SHROUD",50)||e.hasResourceAvailable("IDEAL_HOST"),applicationDelay:0,startOnHotbar:!0,cooldown:5,validateAttempt:e=>e.hasResourceAvailable("SHROUD",50)||e.hasResourceAvailable("IDEAL_HOST"),onConfirm:Ue(ef("ENSHROUD"),e=>e.enterEnshroud())});ga("PERFECTIO",100,{potency:1300,aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:.2,applicationDelay:1.29,startOnHotbar:!1,highlightIf:e=>e.hasResourceAvailable("PERFECTIO_PARATA"),validateAttempt:e=>e.hasResourceAvailable("PERFECTIO_PARATA"),onConfirm:e=>{e.resources.get("PERFECTIO_PARATA").consume(1)}});Pn("REGRESS",74,"cd_BLOOD_STALK",{cooldown:1,animationLock:Vt,startOnHotbar:!1,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("THRESHOLD"),onConfirm:e=>e.resources.get("THRESHOLD").consume(1)});Pn("HELLS_INGRESS",20,"cd_INGRESS_EGRESS",{replaceIf:[{condition:e=>e.hasResourceAvailable("THRESHOLD")&&e.hasResourceAvailable("HELLS_INGRESS_USED"),newSkill:"REGRESS"}],cooldown:20,animationLock:Vt,onConfirm:e=>{e.resources.get("HELLS_INGRESS_USED").gain(1),e.hasTraitUnlocked("HELLSGATE")&&e.setTimedResource("THRESHOLD",1),e.setTimedResource("ENHANCED_HARPE",1)}});Pn("HELLS_EGRESS",20,"cd_INGRESS_EGRESS",{replaceIf:[{condition:e=>e.hasResourceAvailable("THRESHOLD")&&!e.hasResourceAvailable("HELLS_INGRESS_USED"),newSkill:"REGRESS"}],cooldown:20,animationLock:Vt,onConfirm:e=>{e.tryConsumeResource("HELLS_INGRESS_USED"),e.hasTraitUnlocked("HELLSGATE")&&e.setTimedResource("THRESHOLD",1),e.setTimedResource("ENHANCED_HARPE",1)}});Pn("ARCANE_CREST",40,"cd_ARCANE_CREST",{replaceIf:[{condition:e=>e.hasResourceAvailable("CREST_OF_TIME_BORROWED"),newSkill:"ARCANE_CREST_POP"}],cooldown:30,onConfirm:e=>e.setTimedResource("CREST_OF_TIME_BORROWED",1)});Pn("ARCANE_CREST_POP",40,"cd_ARCANE_CREST_POP",{cooldown:1,animationLock:Sn,startOnHotbar:!1,onConfirm:e=>{e.tryConsumeResource("CREST_OF_TIME_BORROWED"),e.setTimedResource("CREST_OF_TIME_RETURNED",1)},validateAttempt:e=>e.hasResourceAvailable("CREST_OF_TIME_BORROWED"),highlightIf:e=>e.hasResourceAvailable("CREST_OF_TIME_BORROWED")});ga("WHORL_OF_DEATH",35,{potency:100,aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:1.15,onConfirm:e=>e.refreshDeathsDesign()});ga("SPINNING_SCYTHE",25,{potency:140,aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.62});ga("NIGHTMARE_SCYTHE",45,{potency:120,combo:{potency:180,resource:"RPR_AOE_COMBO",resourceValue:1},aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.8,highlightIf:e=>e.hasResourceExactly("RPR_AOE_COMBO",1)});ga("SOUL_SCYTHE",65,{potency:180,aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.66,secondaryCooldown:{cdName:"cd_SOUL_SLICE",cooldown:30,maxCharges:2}});ga("EXECUTIONERS_GUILLOTINE",96,{startOnHotbar:!1,potency:260,aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.53,highlightIf:e=>e.hasResourceAvailable("EXECUTIONER"),validateAttempt:sS});ga("GRIM_REAPING",80,{startOnHotbar:!1,potency:200,recastTime:1.5,falloff:0,applicationDelay:.8,highlightIf:e=>e.resources.get("LEMURE_SHROUD").availableAmount()>1,validateAttempt:e=>e.hasResourceAvailable("LEMURE_SHROUD"),onConfirm:e=>{e.resources.get("LEMURE_SHROUD").consume(1),e.resources.get("VOID_SHROUD").gain(1),e.resources.get("LEMURE_SHROUD").availableAmount()===0&&e.exitEnshroud()},aspect:Ie.Physical});Pn("LEMURES_SCYTHE",86,"cd_LEMURES_SLICE",{isPhysical:!0,potency:100,falloff:0,applicationDelay:.66,cooldown:1,startOnHotbar:!1,validateAttempt:e=>e.hasResourceAvailable("VOID_SHROUD",2),highlightIf:e=>e.hasResourceAvailable("VOID_SHROUD",2),onConfirm:e=>{e.resources.get("VOID_SHROUD").consume(2)}});ga("GUILLOTINE",70,{replaceIf:[{newSkill:"GRIM_REAPING",condition:e=>e.hasResourceAvailable("ENSHROUDED")},{newSkill:"EXECUTIONERS_GUILLOTINE",condition:e=>e.resources.get("EXECUTIONER").available(1)}],potency:200,aspect:Ie.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.49,highlightIf:e=>e.hasResourceAvailable("SOUL_REAVER"),validateAttempt:lS});Pn("GAIN_SOUL_GAUGE",50,"cd_GAIN_SOUL_GAUGE",{applicationDelay:0,animationLock:Sn,cooldown:.01,onConfirm:e=>e.resources.get("SOUL").gain(10)});Object.keys(IT).forEach(e=>Ft(e,`SAM/${Ge[e].name}.png`));class VG extends Wt{jobSpecificOtherTargetedBuffViewProps(){return[this.makeCommonTimer("HIGANBANA_DOT",!1)]}jobSpecificSelfTargetedBuffViewProps(){return Object.keys(IT).filter(t=>t!=="HIGANBANA_DOT").map(t=>this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){const n=this.state.resources,o=n.get("KENKI").availableAmount(),l=n.get("MEDITATION").availableAmount();return[{kind:"sen",name:C({en:"sen",zh:"闪"}),hasSetsu:this.state.hasResourceAvailable("SETSU"),hasGetsu:this.state.hasResourceAvailable("GETSU"),hasKa:this.state.hasResourceAvailable("KA_SEN"),setsuColor:t.sam.setsu,getsuColor:t.sam.getsu,kaColor:t.sam.kaSen},{kind:"bar",name:C({en:"kenki",zh:"剑气"}),color:t.sam.kenki,progress:o/100,valueString:o.toFixed(0)},{kind:"counter",name:C({en:"meditation",zh:"剑压"}),color:t.sam.meditation,currentStacks:l,maxStacks:3}]}}const Na=(e,t,n)=>{Ye("SAM",e,t,n??{})};Na("MEIKYO_SHISUI",3,{timeout:20,warnOnTimeout:!0});Na("FUGETSU",1,{timeout:40});Na("FUKA",1,{timeout:40});Na("ZANSHIN_READY",1,{timeout:30});Na("TENDO",1,{timeout:30,warnOnTimeout:!0});Na("OGI_READY",1,{timeout:30});Na("TSUBAME_GAESHI_READY",1,{timeout:30,warnOnTimeout:!0});Na("THIRD_EYE",1,{timeout:4});Na("TENGENTSU",1,{timeout:4});Na("TENGENTSUS_FORESIGHT",1,{timeout:9});Na("ENHANCED_ENPI",1,{timeout:15});Na("MEDITATE",1,{timeout:15.2});Na("KENKI",100,{warnOnOvercap:!0});Na("SETSU",1,{warnOnOvercap:!0});Na("GETSU",1,{warnOnOvercap:!0});Na("KA_SEN",1,{warnOnOvercap:!0});Na("MEDITATION",3,{warnOnOvercap:!0});Na("HIGANBANA_DOT",1,{timeout:60});const Pb=["SAM_TWO_READY","SAM_TWO_AOE_READY","GEKKO_READY","KASHA_READY","KAESHI_OGI_READY"];Pb.forEach(e=>Na(e,1,{timeout:30}));Na("KAESHI_TRACKER",4,{timeout:30});class WG extends Xt{constructor(t){super(t);const n=this.hasTraitUnlocked("ENHANCED_HISSATSU")?60:120,o=this.hasTraitUnlocked("ENHANCED_MEIKYO_SHISUI")?2:1;[new ke("cd_MEIKYO_SHISUI",55,o,o),new ke("cd_SENEI_GUREN",n,1,1)].forEach(l=>this.cooldowns.set(l)),super.registerRecurringEvents([{reportName:je("HIGANBANA_DOT"),groupedEffects:[{effectName:"HIGANBANA_DOT",appliedBy:["HIGANBANA"]}]}])}get statusPropsGenerator(){return new VG(this)}inherentSpeedModifier(){return this.hasTraitUnlocked("ENHANCED_FUGETSU_AND_FUKA")?13:10}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("ENHANCED_ENPI")&&n.name==="ENPI"&&t.addBuff(H.EnhancedEnpi),this.hasResourceAvailable("FUGETSU")&&t.addBuff(H.Fugetsu)}jobSpecificAddSpeedBuffCovers(t,n){this.hasResourceAvailable("FUKA")&&n.cdName==="cd_GCD"&&t.addBuff(H.Fuka)}hitCombo(t){return super.hitCombo(t)||this.hasResourceAvailable("MEIKYO_SHISUI")}cancelChanneledSkills(){const t=this.findNextQueuedEventByTag(hn.MeditateTick);t&&(t.canceled=!0),this.tryConsumeResource("MEDITATE")}getFugetsuModifier(){return this.hasTraitUnlocked("ENHANCED_FUGETSU_AND_FUKA")?X.FugetsuEnhanced:X.FugetsuBase}getFukaModifier(){return this.hasResourceAvailable("FUKA")?this.inherentSpeedModifier():0}checkCombo(t){return this.hasResourceAvailable(t)||this.hasResourceAvailable("MEIKYO_SHISUI")}refreshBuff(t,n){this.addEvent(new be(`gain ${t}`,n,()=>{this.gainStatus(t)}))}progressActiveCombo(t){Pb.forEach(n=>{t.includes(n)||this.setComboState(n,0)}),t.forEach(n=>this.setComboState(n,1))}tryConsumeMeikyo(){this.tryConsumeResource("MEIKYO_SHISUI")}gainKenki(t){this.resources.get("KENKI").gain(t)}gainMeditation(){this.resources.get("MEDITATION").gain(1)}gainSen(t){this.resources.get(t).gain(1)}countSen(){return["GETSU","SETSU","KA_SEN"].reduce((t,n)=>this.hasResourceAvailable(n)?t+1:t,0)}consumeAllSen(){["GETSU","SETSU","KA_SEN"].forEach(t=>this.tryConsumeResource(t))}startMeditateTimer(){const t=n=>{const o=new be("meditate tick",3,()=>{n<5&&(this.isInCombat()&&(N.reportMeditateTick(this.time,"+kenki/meditation"),this.resources.get("KENKI").gain(10),this.resources.get("MEDITATION").gain(1)),this.addEvent(t(n+1)))});return o.addTag(hn.MeditateTick),o};this.addEvent(t(0))}}const wt=(e,t,n)=>{const o=r=>{const d=r.hasResourceAvailable("FUGETSU")?[r.getFugetsuModifier()]:[];return n.jobPotencyModifiers&&d.push(...n.jobPotencyModifiers(r)),d};let l=n.baseCastTime||0;return l&&(l=r=>r.hasTraitUnlocked("ENHANCED_IAIJUTSU")?n.baseCastTime||0:r.config.adjustedSksCastTime(1.8,r.getFukaModifier())),na("SAM",e,t,{...n,castTime:l,recastTime:r=>r.config.adjustedSksGCD(n.baseRecastTime??2.5,r.getFukaModifier()),potency:n.basePotency,jobPotencyModifiers:o,isInstantFn:r=>!(n.baseCastTime&&n.baseCastTime>0)})},Jn=(e,t,n,o)=>(o.potency&&!o.jobPotencyModifiers&&(o.jobPotencyModifiers=l=>l.hasResourceAvailable("FUGETSU")?[l.getFugetsuModifier()]:[]),ot("SAM",e,t,n,o));wt("ENPI",15,{applicationDelay:.71,basePotency:100,onConfirm:e=>{e.hasResourceAvailable("ENHANCED_ENPI")&&e.tryConsumeResource("ENHANCED_ENPI"),e.gainKenki(10)},jobPotencyModifiers:e=>e.hasResourceAvailable("ENHANCED_ENPI")?[e.hasTraitUnlocked("WAY_OF_THE_SAMURAI_III")?X.YatenpiEnhanced:X.YatenpiBase]:[],highlightIf:e=>e.hasResourceAvailable("ENHANCED_ENPI")});wt("HAKAZE",1,{autoUpgrade:{trait:"HAKAZE_MASTERY",otherSkill:"GYOFU"},applicationDelay:.85,basePotency:200,onConfirm:e=>{e.tryConsumeMeikyo(),e.gainKenki(5),e.progressActiveCombo(["SAM_TWO_READY"])}});wt("GYOFU",92,{autoDowngrade:{trait:"HAKAZE_MASTERY",otherSkill:"HAKAZE"},applicationDelay:.85,basePotency:240,onConfirm:e=>{e.tryConsumeMeikyo(),e.gainKenki(5),e.progressActiveCombo(["SAM_TWO_READY"])}});wt("YUKIKAZE",50,{applicationDelay:.85,basePotency:[["NEVER",100],["WAY_OF_THE_SAMURAI_II",110],["WAY_OF_THE_SAMURAI_III",160]],combo:{potency:[["NEVER",280],["WAY_OF_THE_SAMURAI_II",290],["WAY_OF_THE_SAMURAI_III",340]],resource:"SAM_TWO_READY",resourceValue:1},onConfirm:e=>{e.checkCombo("SAM_TWO_READY")&&(e.gainKenki(15),e.gainSen("SETSU")),e.tryConsumeMeikyo(),e.progressActiveCombo([])},highlightIf:e=>e.checkCombo("SAM_TWO_READY")});wt("JINPU",4,{applicationDelay:.62,basePotency:[["NEVER",120],["WAY_OF_THE_SAMURAI_III",140]],combo:{potency:[["NEVER",280],["WAY_OF_THE_SAMURAI_III",300]],resource:"SAM_TWO_READY",resourceValue:1},onConfirm:e=>{e.checkCombo("SAM_TWO_READY")?(e.gainKenki(5),e.refreshBuff("FUGETSU",.62),e.tryConsumeMeikyo(),e.progressActiveCombo(["GEKKO_READY"])):(e.tryConsumeMeikyo(),e.progressActiveCombo([]))},highlightIf:e=>e.checkCombo("SAM_TWO_READY")});wt("GEKKO",30,{applicationDelay:.76,basePotency:[["NEVER",100],["WAY_OF_THE_SAMURAI_II",110],["WAY_OF_THE_SAMURAI_III",160]],combo:{potency:[["NEVER",310],["WAY_OF_THE_SAMURAI_II",320],["WAY_OF_THE_SAMURAI_III",370]],resource:"GEKKO_READY",resourceValue:1},positional:{potency:[["NEVER",150],["WAY_OF_THE_SAMURAI_II",160],["WAY_OF_THE_SAMURAI_III",210]],comboPotency:[["NEVER",360],["WAY_OF_THE_SAMURAI_II",370],["WAY_OF_THE_SAMURAI_III",420]],location:"rear"},onConfirm:e=>{e.checkCombo("GEKKO_READY")&&(e.gainKenki(10),e.gainSen("GETSU")),e.hasResourceAvailable("MEIKYO_SHISUI")&&e.refreshBuff("FUGETSU",.76),e.tryConsumeMeikyo(),e.progressActiveCombo([])},highlightIf:e=>e.checkCombo("GEKKO_READY")});wt("SHIFU",18,{applicationDelay:.8,basePotency:[["NEVER",120],["WAY_OF_THE_SAMURAI_III",140]],combo:{potency:[["NEVER",280],["WAY_OF_THE_SAMURAI_III",300]],resource:"SAM_TWO_READY",resourceValue:1},onConfirm:e=>{e.checkCombo("SAM_TWO_READY")?(e.gainKenki(5),e.refreshBuff("FUKA",.8),e.tryConsumeMeikyo(),e.progressActiveCombo(["KASHA_READY"])):(e.tryConsumeMeikyo(),e.progressActiveCombo([]))},highlightIf:e=>e.checkCombo("SAM_TWO_READY")});wt("KASHA",40,{applicationDelay:.62,basePotency:[["NEVER",100],["WAY_OF_THE_SAMURAI_II",110],["WAY_OF_THE_SAMURAI_III",160]],combo:{potency:[["NEVER",310],["WAY_OF_THE_SAMURAI_II",320],["WAY_OF_THE_SAMURAI_III",370]],resource:"KASHA_READY",resourceValue:1},positional:{potency:[["NEVER",150],["WAY_OF_THE_SAMURAI_II",160],["WAY_OF_THE_SAMURAI_III",210]],comboPotency:[["NEVER",360],["WAY_OF_THE_SAMURAI_II",370],["WAY_OF_THE_SAMURAI_III",420]],location:"flank"},onConfirm:e=>{e.checkCombo("KASHA_READY")&&(e.gainKenki(10),e.gainSen("KA_SEN")),e.hasResourceAvailable("MEIKYO_SHISUI")&&e.refreshBuff("FUKA",.62),e.tryConsumeMeikyo(),e.progressActiveCombo([])},highlightIf:e=>e.checkCombo("KASHA_READY")});wt("FUGA",26,{autoUpgrade:{trait:"FUGA_MASTERY",otherSkill:"FUKO"},falloff:0,applicationDelay:.76,basePotency:90,onConfirm:e=>{e.gainKenki(5),e.progressActiveCombo(["SAM_TWO_AOE_READY"])}});wt("FUKO",86,{autoDowngrade:{trait:"FUGA_MASTERY",otherSkill:"FUGA"},falloff:0,applicationDelay:.76,basePotency:100,onConfirm:e=>{e.gainKenki(10),e.progressActiveCombo(["SAM_TWO_AOE_READY"])}});wt("MANGETSU",35,{falloff:0,applicationDelay:.62,basePotency:100,combo:{potency:120,resource:"SAM_TWO_AOE_READY",resourceValue:1},onConfirm:e=>{e.checkCombo("SAM_TWO_AOE_READY")&&(e.gainKenki(10),e.refreshBuff("FUGETSU",.62),e.gainSen("GETSU")),e.progressActiveCombo([])},highlightIf:e=>e.checkCombo("SAM_TWO_AOE_READY")});wt("OKA",35,{falloff:0,applicationDelay:.62,basePotency:100,combo:{potency:120,resource:"SAM_TWO_AOE_READY",resourceValue:1},onConfirm:e=>{e.checkCombo("SAM_TWO_AOE_READY")&&(e.gainKenki(10),e.refreshBuff("FUKA",.62),e.gainSen("KA_SEN")),e.progressActiveCombo([])},highlightIf:e=>e.checkCombo("SAM_TWO_AOE_READY")});const wb={newSkill:"HIGANBANA",condition:e=>e.countSen()===1},Gb={newSkill:"TENKA_GOKEN",condition:e=>!e.hasResourceAvailable("TENDO")&&e.countSen()===2},Bb={newSkill:"TENDO_GOKEN",condition:e=>e.hasResourceAvailable("TENDO")&&e.countSen()===2},Fb={newSkill:"MIDARE_SETSUGEKKA",condition:e=>!e.hasResourceAvailable("TENDO")&&e.countSen()===3},zb={newSkill:"TENDO_SETSUGEKKA",condition:e=>e.hasResourceAvailable("TENDO")&&e.countSen()===3},uc=[wb,Gb,Bb,Fb,zb];wt("IAIJUTSU",30,{replaceIf:uc,baseCastTime:1.3,basePotency:0,applicationDelay:0,validateAttempt:e=>!1});wt("HIGANBANA",30,{startOnHotbar:!1,replaceIf:uc,baseCastTime:1.3,basePotency:200,applicationDelay:.62,validateAttempt:wb.condition,onConfirm:(e,t)=>{const n=[];e.hasResourceAvailable("FUGETSU")&&n.push(e.getFugetsuModifier());const o=e.hasTraitUnlocked("WAY_OF_THE_SAMURAI_III")?50:45;e.addDoTPotencies({node:t,effectName:"HIGANBANA_DOT",skillName:"HIGANBANA",tickPotency:o,speedStat:"sks",modifiers:n}),e.consumeAllSen(),e.gainMeditation()},onApplication:(e,t)=>e.applyDoT("HIGANBANA_DOT",t)});const af=e=>t=>{t.consumeAllSen(),t.gainStatus("KAESHI_TRACKER",e),t.gainMeditation(),t.gainStatus("TSUBAME_GAESHI_READY"),t.tryConsumeResource("TENDO")};wt("TENKA_GOKEN",30,{startOnHotbar:!1,replaceIf:uc,baseCastTime:1.3,basePotency:300,falloff:0,applicationDelay:.62,validateAttempt:Gb.condition,onConfirm:af(1)});wt("TENDO_GOKEN",100,{startOnHotbar:!1,replaceIf:uc,baseCastTime:1.3,basePotency:410,falloff:0,applicationDelay:.36,validateAttempt:Bb.condition,onConfirm:af(2)});wt("MIDARE_SETSUGEKKA",30,{startOnHotbar:!1,replaceIf:uc,baseCastTime:1.3,basePotency:[["NEVER",620],["WAY_OF_THE_SAMURAI_III",640]],applicationDelay:.62,jobPotencyModifiers:e=>[X.AutoCrit],validateAttempt:Fb.condition,onConfirm:af(3)});wt("TENDO_SETSUGEKKA",100,{startOnHotbar:!1,replaceIf:uc,baseCastTime:1.3,basePotency:1100,applicationDelay:1.03,jobPotencyModifiers:e=>[X.AutoCrit],validateAttempt:zb.condition,onConfirm:af(4)});const FR={newSkill:"KAESHI_GOKEN",condition:e=>e.hasResourceExactly("KAESHI_TRACKER",1)},zR={newSkill:"TENDO_KAESHI_GOKEN",condition:e=>e.hasResourceExactly("KAESHI_TRACKER",2)},jR={newSkill:"KAESHI_SETSUGEKKA",condition:e=>e.hasResourceExactly("KAESHI_TRACKER",3)},YR={newSkill:"TENDO_KAESHI_SETSUGEKKA",condition:e=>e.hasResourceExactly("KAESHI_TRACKER",4)},qu=[FR,zR,jR,YR];wt("TSUBAME_GAESHI",74,{replaceIf:qu,basePotency:0,applicationDelay:0,validateAttempt:e=>!1});const nf=e=>{e.tryConsumeResource("KAESHI_TRACKER",!0),e.tryConsumeResource("TSUBAME_GAESHI_READY"),e.tryConsumeResource("KAESHI_OGI_READY")};wt("KAESHI_GOKEN",74,{startOnHotbar:!1,replaceIf:qu,basePotency:300,falloff:0,applicationDelay:.62,validateAttempt:FR.condition,onConfirm:nf,highlightIf:FR.condition});wt("TENDO_KAESHI_GOKEN",100,{startOnHotbar:!1,replaceIf:qu,basePotency:410,falloff:0,applicationDelay:.36,validateAttempt:zR.condition,onConfirm:nf,highlightIf:zR.condition});wt("KAESHI_SETSUGEKKA",74,{startOnHotbar:!1,replaceIf:qu,basePotency:[["NEVER",620],["WAY_OF_THE_SAMURAI_III",640]],applicationDelay:.62,jobPotencyModifiers:e=>[X.AutoCrit],validateAttempt:jR.condition,onConfirm:nf,highlightIf:jR.condition});wt("TENDO_KAESHI_SETSUGEKKA",74,{startOnHotbar:!1,replaceIf:qu,basePotency:1100,applicationDelay:1.03,jobPotencyModifiers:e=>[X.AutoCrit],validateAttempt:YR.condition,onConfirm:nf,highlightIf:YR.condition});wt("OGI_NAMIKIRI",90,{replaceIf:[{newSkill:"KAESHI_NAMIKIRI",condition:e=>e.hasResourceAvailable("KAESHI_OGI_READY")}],falloff:.4,applicationDelay:.49,basePotency:[["NEVER",860],["WAY_OF_THE_SAMURAI_III",1e3]],baseCastTime:1.3,jobPotencyModifiers:e=>[X.AutoCrit],validateAttempt:e=>e.hasResourceAvailable("OGI_READY"),onConfirm:e=>{e.tryConsumeResource("OGI_READY"),e.gainMeditation(),e.gainStatus("KAESHI_OGI_READY")},highlightIf:e=>e.hasResourceAvailable("OGI_READY")});wt("KAESHI_NAMIKIRI",90,{startOnHotbar:!1,falloff:.4,applicationDelay:.49,basePotency:[["NEVER",860],["WAY_OF_THE_SAMURAI_III",1e3]],jobPotencyModifiers:e=>[X.AutoCrit],validateAttempt:e=>e.hasResourceAvailable("KAESHI_OGI_READY"),onConfirm:e=>e.tryConsumeResource("KAESHI_OGI_READY"),highlightIf:e=>e.hasResourceAvailable("KAESHI_OGI_READY")});Jn("MEIKYO_SHISUI",50,"cd_MEIKYO_SHISUI",{cooldown:55,maxCharges:2,onConfirm:e=>{e.gainStatus("MEIKYO_SHISUI",3),e.hasTraitUnlocked("ENHANCED_MEIKYO_SHISUI_II")&&e.gainStatus("TENDO")}});Jn("IKISHOTEN",68,"cd_IKISHOTEN",{replaceIf:[{newSkill:"ZANSHIN",condition:e=>e.hasResourceAvailable("ZANSHIN_READY")}],cooldown:120,requiresCombat:!0,onConfirm:e=>{e.gainKenki(50),e.hasTraitUnlocked("ENHANCED_IKISHOTEN")&&e.gainStatus("OGI_READY"),e.hasTraitUnlocked("ENHANCED_IKISHOTEN_II")&&e.gainStatus("ZANSHIN_READY")}});Jn("HISSATSU_SHINTEN",52,"cd_SHINTEN",{cooldown:1,potency:250,validateAttempt:e=>e.resources.get("KENKI").available(25),onConfirm:e=>e.resources.get("KENKI").consume(25),highlightIf:e=>e.resources.get("KENKI").available(25)});Jn("HISSATSU_KYUTEN",62,"cd_KYUTEN",{cooldown:1,potency:100,falloff:0,validateAttempt:e=>e.resources.get("KENKI").available(25),onConfirm:e=>e.resources.get("KENKI").consume(25),highlightIf:e=>e.resources.get("KENKI").available(25)});Jn("HISSATSU_GYOTEN",54,"cd_GYOTEN",{cooldown:5,animationLock:Vt,potency:100,validateAttempt:e=>e.resources.get("KENKI").available(10),onConfirm:e=>e.resources.get("KENKI").consume(10),highlightIf:e=>e.resources.get("KENKI").available(10)});Jn("HISSATSU_YATEN",56,"cd_YATEN",{cooldown:10,animationLock:Vt,potency:100,validateAttempt:e=>e.resources.get("KENKI").available(10),onConfirm:e=>{e.resources.get("KENKI").consume(10),e.gainStatus("ENHANCED_ENPI")},highlightIf:e=>e.resources.get("KENKI").available(10)});Jn("HISSATSU_SENEI",72,"cd_SENEI_GUREN",{cooldown:60,potency:800,validateAttempt:e=>e.resources.get("KENKI").available(25),onConfirm:e=>e.resources.get("KENKI").consume(25),highlightIf:e=>e.resources.get("KENKI").available(25)});Jn("HISSATSU_GUREN",70,"cd_SENEI_GUREN",{cooldown:60,potency:400,falloff:0,validateAttempt:e=>e.resources.get("KENKI").available(25),onConfirm:e=>e.resources.get("KENKI").consume(25),highlightIf:e=>e.resources.get("KENKI").available(25)});Jn("HAGAKURE",68,"cd_HAGAKURE",{cooldown:5,validateAttempt:e=>e.countSen()>0,onConfirm:e=>{e.gainKenki(e.countSen()*10),e.consumeAllSen()},highlightIf:e=>e.countSen()===3});Jn("SHOHA",80,"cd_SHOHA",{cooldown:15,potency:[["NEVER",560],["WAY_OF_THE_SAMURAI_III",640]],falloff:.4,applicationDelay:.58,validateAttempt:e=>e.resources.get("MEDITATION").available(3),onConfirm:e=>e.tryConsumeResource("MEDITATION",!0),highlightIf:e=>e.resources.get("MEDITATION").available(3)});ze("SAM","THIRD_EYE",6,"cd_THIRD_EYE",{rscType:"THIRD_EYE",autoUpgrade:{trait:"THIRD_EYE_MASTERY",otherSkill:"TENGENTSU"},replaceIf:[{newSkill:"THIRD_EYE_POP",condition:e=>e.hasResourceAvailable("THIRD_EYE")}],cooldown:15,applicationDelay:0});ze("SAM","TENGENTSU",82,"cd_THIRD_EYE",{rscType:"TENGENTSU",autoDowngrade:{trait:"THIRD_EYE_MASTERY",otherSkill:"THIRD_EYE"},replaceIf:[{newSkill:"TENGENTSU_POP",condition:e=>e.hasResourceAvailable("TENGENTSU")}],cooldown:15,applicationDelay:0});Jn("THIRD_EYE_POP",6,"cd_THIRD_EYE_POP",{startOnHotbar:!1,applicationDelay:0,animationLock:Sn,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("THIRD_EYE"),onConfirm:e=>{e.tryConsumeResource("THIRD_EYE"),e.gainKenki(10)},highlightIf:e=>e.hasResourceAvailable("THIRD_EYE")});Jn("TENGENTSU_POP",82,"cd_THIRD_EYE_POP",{startOnHotbar:!1,applicationDelay:0,animationLock:Sn,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("TENGENTSU"),onConfirm:e=>{e.tryConsumeResource("TENGENTSU"),e.gainStatus("TENGENTSUS_FORESIGHT"),e.gainKenki(10)},highlightIf:e=>e.hasResourceAvailable("TENGENTSU")});Jn("ZANSHIN",96,"cd_ZANSHIN",{startOnHotbar:!1,cooldown:1,falloff:.4,applicationDelay:1.03,potency:940,validateAttempt:e=>e.hasResourceAvailable("ZANSHIN_READY")&&e.resources.get("KENKI").available(50),onConfirm:e=>{e.resources.get("KENKI").consume(50),e.tryConsumeResource("ZANSHIN_READY")},highlightIf:e=>e.hasResourceAvailable("ZANSHIN_READY")});ze("SAM","MEDITATE",60,"cd_MEDITATE",{rscType:"MEDITATE",cooldown:60,applicationDelay:.62,validateAttempt:e=>e.cooldowns.get("cd_GCD").stacksAvailable()>0,onConfirm:e=>{const t=e.config.adjustedSksGCD(2.5,e.getFukaModifier());e.cooldowns.get("cd_GCD").useStackWithRecast(e.config.getAfterTaxGCD(t))},onApplication:e=>e.startMeditateTimer()});Object.keys(gT).forEach(e=>Ft(e,`SMN/${Ge[e].name}.png`));class XG extends Wt{jobSpecificSelfTargetedBuffViewProps(){const t=["AETHERFLOW","IFRITS_FAVOR","TITANS_FAVOR","GARUDAS_FAVOR","CRIMSON_STRIKE_READY"];return[...Object.keys(gT).map(n=>t.includes(n)?this.makeCommonTimerless(n):this.makeCommonTimer(n))]}jobSpecificResourceViewProps(t){const n=this.state.resources,o=Math.max(n.timeTillReady("FIRE_ATTUNEMENT"),n.timeTillReady("EARTH_ATTUNEMENT"),n.timeTillReady("WIND_ATTUNEMENT")),l=n.get("ACTIVE_DEMI").availableAmount(),r=n.timeTillReady("ACTIVE_DEMI");n.get("RUBY_ARCANUM").available(1),n.get("TOPAZ_ARCANUM").available(1),n.get("EMERALD_ARCANUM").available(1);const d=l===KR.BAHAMUT?t.smn.bahamut:l===KR.PHOENIX?t.smn.phoenix:t.smn.solar,h=n.get("FIRE_ATTUNEMENT").available(1)?t.smn.ruby:n.get("EARTH_ATTUNEMENT").available(1)?t.smn.topaz:t.smn.emerald,E=this.state.cooldowns.get("cd_SUMMON_LOCKOUT"),A=E.timeTillNextStackAvailable();return[{kind:"counter",name:C({en:"aetherflow",zh:"以太超流"}),color:t.smn.aetherflow,currentStacks:n.get("AETHERFLOW").availableAmount(),maxStacks:2},{kind:"bar",name:C({en:"demi summon",zh:"亚灵神剩余时间"}),color:d,progress:r===0?0:1-r/15,valueString:r.toFixed(3)},{kind:"attunement",aetherName:C({en:"aether",zh:"宝石以太"}),attunementName:C({en:"attunement",zh:"宝石以太层数"}),ruby:n.get("RUBY_ARCANUM").available(1),topaz:n.get("TOPAZ_ARCANUM").available(1),emerald:n.get("EMERALD_ARCANUM").available(1),attunementCount:Math.max(n.get("FIRE_ATTUNEMENT").availableAmount(),n.get("EARTH_ATTUNEMENT").availableAmount(),n.get("WIND_ATTUNEMENT").availableAmount()),timeRemaining:o,rubyColor:t.smn.ruby,topazColor:t.smn.topaz,emeraldColor:t.smn.emerald},{kind:"bar",name:C({en:"summon lock",zh:"召唤剩余时间"}),color:h,progress:A>0?1-E.timeTillNextStackAvailable()/E.currentStackCd():0,valueString:A.toFixed(3)}]}}const Zt=(e,t,n)=>{Ye("SMN",e,t,n??{})};var KR=(e=>(e[e.NONE=0]="NONE",e[e.SOLAR=1]="SOLAR",e[e.BAHAMUT=2]="BAHAMUT",e[e.PHOENIX=3]="PHOENIX",e))(KR||{});const jb=15;Zt("AETHERFLOW",2,{warnOnOvercap:!0});Zt("RUBY_ARCANUM",1);Zt("TOPAZ_ARCANUM",1);Zt("EMERALD_ARCANUM",1);Zt("FIRE_ATTUNEMENT",2,{timeout:30});Zt("EARTH_ATTUNEMENT",4,{timeout:30});Zt("WIND_ATTUNEMENT",4,{timeout:30});Zt("CRIMSON_STRIKE_READY",1);Zt("EVERLASTING_FLIGHT",1,{timeout:21});Zt("FURTHER_RUIN",1,{timeout:60});Zt("GARUDAS_FAVOR",1);Zt("IFRITS_FAVOR",1);Zt("TITANS_FAVOR",1);Zt("RADIANT_AEGIS",1,{timeout:30});Zt("REFULGENT_LUX",1,{timeout:30});Zt("REKINDLE",1,{timeout:30});Zt("UNDYING_FLAME",1,{timeout:15});Zt("RUBYS_GLIMMER",1,{timeout:30,warnOnTimeout:!0});Zt("SEARING_LIGHT",1,{timeout:20});Zt("SLIPSTREAM",1,{timeout:15});Zt("ACTIVE_DEMI",3,{timeout:jb});Zt("NEXT_DEMI_CYCLE",3);Zt("DEMI_AUTO",4);const Jp=3.163,qG=new Map([["SUMMON_IFRIT_II",2.1],["SUMMON_GARUDA_II",2.1],["SUMMON_TITAN_II",2.1],["SUMMON_IFRIT",2.46],["SUMMON_GARUDA",2.1],["SUMMON_TITAN",2.46]]),eC=new Map([["SUMMON_IFRIT_II",1.96],["SUMMON_GARUDA_II",1.29],["SUMMON_TITAN_II",1.96],["SUMMON_IFRIT",.936],["SUMMON_GARUDA",.8],["SUMMON_TITAN",.8],["ENKINDLE_BAHAMUT",.894],["ENKINDLE_PHOENIX",1.026],["ENKINDLE_SOLAR_BAHAMUT",.846]]),ZG=new Map([["SUMMON_IFRIT_II",6.29],["SUMMON_GARUDA_II",6.29],["SUMMON_TITAN_II",6.29],["SUMMON_IFRIT",4.6],["SUMMON_GARUDA",4.3],["SUMMON_TITAN",4.6]]);class QG extends Xt{constructor(t){super(t);const n=this.hasTraitUnlocked("ENHANCED_SWIFTCAST")?40:60;this.cooldowns.set(new ke("cd_SWIFTCAST",n,1,1));const o=this.hasTraitUnlocked("ENHANCED_RADIANT_AEGIS")?2:1;this.cooldowns.set(new ke("cd_RADIANT_AEGIS",60,o,o)),this.cooldowns.set(new ke("cd_DEMI_SUMMON",this.config.adjustedGCD(60),1,1)),this.cooldowns.set(new ke("cd_SUMMON_LOCKOUT",5,1,1)),this.registerRecurringEvents([{groupedEffects:[{effectName:"SLIPSTREAM",appliedBy:["SLIPSTREAM"],isGroundTargeted:!0}]}],["SUMMON_BAHAMUT","SUMMON_PHOENIX","SUMMON_SOLAR_BAHAMUT"])}get statusPropsGenerator(){return new XG(this)}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("SEARING_LIGHT")&&t.addBuff(H.SearingLight)}get activeDemi(){return this.resources.get("ACTIVE_DEMI").availableAmount()}get nextDemi(){const t=this.resources.get("NEXT_DEMI_CYCLE").availableAmount();return this.hasTraitUnlocked("ENHANCED_SUMMON_BAHAMUT_II")?t===1?2:t===3?3:1:this.hasTraitUnlocked("ENHANCED_SUMMON_BAHAMUT")?t%2===0?2:3:2}get hasActivePet(){return this.activeDemi!==0||this.cooldowns.get("cd_SUMMON_LOCKOUT").stacksAvailable()===0}snapSearingAndTincture(t,n){const o=n.modifiers;this.hasResourceAvailable("SEARING_LIGHT")&&o.push(X.SearingLight),this.hasResourceAvailable("TINCTURE")&&(o.push(X.Tincture),t.addBuff(H.Tincture))}makePetPotency(t,n,o,l,r){const d=new ea({config:this.config,sourceTime:o,sourceSkill:n,aspect:Ie.Other,basePotency:l,snapshotTime:this.getDisplayTime(),description:"",targetCount:t,falloff:r}),h=[X.SmnPet];return d.modifiers=h,d}handleDemiAuto(){if(!this.hasResourceAvailable("DEMI_AUTO"))return;const t=4-this.resources.get("DEMI_AUTO").availableAmount();if(t<0)return;const n=this.resources.get("DEMI_AUTO").node;if(n!==void 0){const o=n.getDotPotencies("DEMI_AUTO")[t];this.snapSearingAndTincture(n,o),o.snapshotTime=this.getDisplayTime(),N.resolvePotency(o)}this.tryConsumeResource("DEMI_AUTO"),this.addEvent(new be("demi auto",Jp,()=>this.handleDemiAuto()))}startPetAutos(t,n){const o=this.resources.get("DEMI_AUTO"),l=this.activeDemi===1?160:150;o.gain(4),o.node=t;for(let r=0;r<4;r++)t.addDoTPotency(this.makePetPotency(1,n,this.getDisplayTime(),l),"DEMI_AUTO");this.addEvent(new be("first demi auto",Jp,()=>this.handleDemiAuto()))}queuePetDamageEvent(t,n,o,l,r,d){const h=this.getDisplayTime();this.addEvent(new be(o+" pet snapshot",r,()=>{const E=this.makePetPotency(t.targetCount,o,h,l,.6);t.addPotency(E),this.snapSearingAndTincture(t,E),this.jobSpecificAddDamageBuffCovers(t,Sl("SMN",n)),this.addEvent(new be(o+" application",d,()=>N.resolvePotency(E)))}))}queueEnkindle(t,n){let o,l;n==="ENKINDLE_BAHAMUT"?(o="AKH_MORN",l=1300):n==="ENKINDLE_PHOENIX"?(o="REVELATION",l=1300):(o="EXODUS",l=1500);const r=this.resources.get("ACTIVE_DEMI").pendingChange;console.assert(r),r&&r.timeTillEvent<2.5&&N.reportWarning({kind:"custom",en:"enkindle used near end of demi window may ghost"}),this.queuePetDamageEvent(t,n,o,l,0,eC.get(n))}queuePrimalSummon(t,n){let o=600;this.hasTraitUnlocked("ARCANE_MASTERY")?o=800:this.hasTraitUnlocked("ENKINDLE_II")&&(o=750);let l;n.includes("IFRIT")?l="INFERNO":n.includes("TITAN")?l="EARTHEN_FURY":l="AERIAL_BLAST",this.queuePetDamageEvent(t,n,l,o,qG.get(n),eC.get(n));const r=ZG.get(n);this.cooldowns.get("cd_SUMMON_LOCKOUT").useStackWithRecast(r)}}const tt=(e,t,n)=>{const o=n.baseCastTime??0,l=n.baseRecastTime??2.5,r=o>0?Ue(d=>d.tryConsumeResource("SWIFTCAST"),n.onConfirm):n.onConfirm;return Qn("SMN",e,t,{...n,castTime:d=>d.config.adjustedCastTime(o),recastTime:d=>l<=1.5?l:d.config.adjustedGCD(l),potency:n.basePotency,jobPotencyModifiers:d=>{const h=[];return n.isPetAttack&&h.push(X.SmnPet),d.hasResourceAvailable("SEARING_LIGHT")&&h.push(X.SearingLight),h},isInstantFn:d=>d.hasResourceAvailable("SWIFTCAST")||o===0,onConfirm:r})},oo=(e,t,n,o)=>ot("SMN",e,t,n,{...o,jobPotencyModifiers:l=>l.hasResourceAvailable("SEARING_LIGHT")?[X.SearingLight]:[]}),bs=[{newSkill:"RUIN_III",condition:e=>e.activeDemi===0},{newSkill:"ASTRAL_IMPULSE",condition:e=>e.activeDemi===2},{newSkill:"FOUNTAIN_OF_FIRE",condition:e=>e.activeDemi===3},{newSkill:"UMBRAL_IMPULSE",condition:e=>e.activeDemi===1}];tt("RUIN_III",54,{basePotency:[["NEVER",300],["RUIN_MASTERY_IV",310],["ARCANE_MASTERY",400]],baseCastTime:1.5,manaCost:300,replaceIf:bs,applicationDelay:.8});tt("ASTRAL_IMPULSE",58,{basePotency:[["NEVER",440],["ARCANE_MASTERY",500]],manaCost:300,replaceIf:bs,applicationDelay:.67,validateAttempt:bs[1].condition,startOnHotbar:!1});tt("FOUNTAIN_OF_FIRE",80,{basePotency:[["NEVER",540],["ARCANE_MASTERY",580]],manaCost:300,replaceIf:bs,applicationDelay:1.07,validateAttempt:bs[2].condition,startOnHotbar:!1});tt("UMBRAL_IMPULSE",100,{basePotency:620,manaCost:300,replaceIf:bs,applicationDelay:.8,validateAttempt:bs[3].condition,startOnHotbar:!1});const yl=[{newSkill:"OUTBURST",condition:e=>e.activeDemi===0},{newSkill:"ASTRAL_FLARE",condition:e=>e.activeDemi===2},{newSkill:"BRAND_OF_PURGATORY",condition:e=>e.activeDemi===3},{newSkill:"UMBRAL_FLARE",condition:e=>e.activeDemi===1}];tt("OUTBURST",26,{autoUpgrade:{trait:"OUTBURST_MASTERY",otherSkill:"TRI_DISASTER"},basePotency:100,baseCastTime:1.5,manaCost:300,replaceIf:yl,applicationDelay:.8,falloff:0});tt("TRI_DISASTER",74,{autoDowngrade:{trait:"OUTBURST_MASTERY",otherSkill:"OUTBURST"},basePotency:120,baseCastTime:1.5,manaCost:300,replaceIf:yl,applicationDelay:.8,falloff:0});tt("ASTRAL_FLARE",58,{basePotency:180,manaCost:300,replaceIf:yl,applicationDelay:.54,validateAttempt:yl[1].condition,falloff:0,startOnHotbar:!1});tt("BRAND_OF_PURGATORY",80,{basePotency:240,manaCost:300,replaceIf:yl,applicationDelay:.8,validateAttempt:yl[2].condition,falloff:0,startOnHotbar:!1});tt("UMBRAL_FLARE",100,{basePotency:280,manaCost:300,replaceIf:yl,applicationDelay:.53,validateAttempt:yl[2].condition,falloff:0,startOnHotbar:!1});const $G=[{newSkill:"RUBY_RUIN_III",condition:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT")},{newSkill:"TOPAZ_RUIN_III",condition:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT")},{newSkill:"EMERALD_RUIN_III",condition:e=>e.hasResourceAvailable("WIND_ATTUNEMENT")}];tt("GEMSHINE",6,{replaceIf:$G,applicationDelay:0,validateAttempt:e=>!1});tt("RUBY_RUIN_III",54,{autoUpgrade:{trait:"RUIN_MASTERY_III",otherSkill:"RUBY_RITE"},basePotency:410,baseCastTime:2.8,baseRecastTime:3,applicationDelay:.62,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("FIRE_ATTUNEMENT"),startOnHotbar:!1});tt("TOPAZ_RUIN_III",54,{autoUpgrade:{trait:"RUIN_MASTERY_III",otherSkill:"TOPAZ_RITE"},basePotency:300,applicationDelay:.62,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("EARTH_ATTUNEMENT"),startOnHotbar:!1});tt("EMERALD_RUIN_III",54,{autoUpgrade:{trait:"RUIN_MASTERY_III",otherSkill:"EMERALD_RITE"},baseRecastTime:1.5,basePotency:180,applicationDelay:.62,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("WIND_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("WIND_ATTUNEMENT"),startOnHotbar:!1});tt("RUBY_RITE",72,{autoDowngrade:{trait:"RUIN_MASTERY_III",otherSkill:"RUBY_RITE"},basePotency:[["NEVER",480],["RUIN_MASTERY_IV",510],["ARCANE_MASTERY",580]],baseCastTime:2.8,baseRecastTime:3,applicationDelay:.62,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("FIRE_ATTUNEMENT"),startOnHotbar:!1});tt("TOPAZ_RITE",72,{autoDowngrade:{trait:"RUIN_MASTERY_III",otherSkill:"TOPAZ_RUIN_III"},basePotency:[["NEVER",320],["RUIN_MASTERY_IV",330],["ARCANE_MASTERY",340]],applicationDelay:.62,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT"),onConfirm:e=>{e.tryConsumeResource("EARTH_ATTUNEMENT"),e.gainStatus("TITANS_FAVOR")},startOnHotbar:!1});tt("EMERALD_RITE",72,{autoDowngrade:{trait:"RUIN_MASTERY_III",otherSkill:"EMERALD_RUIN_III"},baseRecastTime:1.5,basePotency:[["NEVER",220],["RUIN_MASTERY_IV",230],["ARCANE_MASTERY",280]],applicationDelay:.62,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("WIND_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("WIND_ATTUNEMENT"),startOnHotbar:!1});const JG=[{newSkill:"RUBY_OUTBURST",condition:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT")},{newSkill:"TOPAZ_OUTBURST",condition:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT")},{newSkill:"EMERALD_OUTBURST",condition:e=>e.hasResourceAvailable("WIND_ATTUNEMENT")}];tt("PRECIOUS_BRILLIANCE",26,{replaceIf:JG,applicationDelay:0,validateAttempt:e=>!1});tt("RUBY_OUTBURST",26,{autoUpgrade:{trait:"OUTBURST_MASTERY",otherSkill:"RUBY_DISASTER"},basePotency:160,baseCastTime:2.8,baseRecastTime:3,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("FIRE_ATTUNEMENT"),falloff:0,startOnHotbar:!1});tt("TOPAZ_OUTBURST",26,{autoUpgrade:{trait:"OUTBURST_MASTERY",otherSkill:"TOPAZ_DISASTER"},basePotency:110,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("EARTH_ATTUNEMENT"),falloff:0,startOnHotbar:!1});tt("EMERALD_OUTBURST",26,{autoUpgrade:{trait:"OUTBURST_MASTERY",otherSkill:"EMERALD_DISASTER"},baseRecastTime:1.5,basePotency:70,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("WIND_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("WIND_ATTUNEMENT"),falloff:0,startOnHotbar:!1});tt("RUBY_DISASTER",74,{autoDowngrade:{trait:"OUTBURST_MASTERY",otherSkill:"RUBY_OUTBURST"},autoUpgrade:{trait:"OUTBURST_MASTERY_II",otherSkill:"RUBY_CATASTROPHE"},basePotency:190,baseCastTime:2.8,baseRecastTime:3,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("FIRE_ATTUNEMENT"),falloff:0,startOnHotbar:!1});tt("TOPAZ_DISASTER",74,{autoDowngrade:{trait:"OUTBURST_MASTERY",otherSkill:"TOPAZ_OUTBURST"},autoUpgrade:{trait:"OUTBURST_MASTERY_II",otherSkill:"TOPAZ_CATASTROPHE"},basePotency:130,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("EARTH_ATTUNEMENT"),falloff:0,startOnHotbar:!1});tt("EMERALD_DISASTER",74,{autoDowngrade:{trait:"OUTBURST_MASTERY",otherSkill:"EMERALD_OUTBURST"},autoUpgrade:{trait:"OUTBURST_MASTERY_II",otherSkill:"EMERALD_CATASTROPHE"},baseRecastTime:1.5,basePotency:90,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("WIND_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("WIND_ATTUNEMENT"),falloff:0,startOnHotbar:!1});tt("RUBY_CATASTROPHE",82,{autoDowngrade:{trait:"OUTBURST_MASTERY_II",otherSkill:"RUBY_DISASTER"},basePotency:210,baseCastTime:2.8,baseRecastTime:3,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("FIRE_ATTUNEMENT"),falloff:0,startOnHotbar:!1});tt("TOPAZ_CATASTROPHE",82,{autoDowngrade:{trait:"OUTBURST_MASTERY_II",otherSkill:"TOPAZ_DISASTER"},basePotency:140,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT"),onConfirm:e=>{e.tryConsumeResource("EARTH_ATTUNEMENT"),e.gainStatus("TITANS_FAVOR")},falloff:0,startOnHotbar:!1});tt("EMERALD_CATASTROPHE",82,{autoDowngrade:{trait:"OUTBURST_MASTERY_II",otherSkill:"EMERALD_DISASTER"},baseRecastTime:1.5,basePotency:100,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("WIND_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("WIND_ATTUNEMENT"),falloff:0,startOnHotbar:!1});const eB=[{newSkill:"SUMMON_BAHAMUT",condition:e=>e.nextDemi===2},{newSkill:"SUMMON_PHOENIX",condition:e=>e.nextDemi===3},{newSkill:"SUMMON_SOLAR_BAHAMUT",condition:e=>e.nextDemi===1}],tB={cdName:"cd_DEMI_SUMMON",cooldown:60,maxCharges:1};[{name:"SUMMON_BAHAMUT",autoName:"WYRMWAVE",level:70,activeValue:2},{name:"SUMMON_PHOENIX",autoName:"SCARLET_FLAME",level:80,activeValue:3},{name:"SUMMON_SOLAR_BAHAMUT",autoName:"LUXWAVE",level:100,activeValue:1}].forEach((e,t)=>tt(e.name,e.level,{applicationDelay:.76,replaceIf:eB,secondaryCooldown:tB,validateAttempt:n=>!n.hasActivePet&&n.nextDemi===e.activeValue,drawsAggro:!0,onConfirm:(n,o)=>{n.gainStatus("ACTIVE_DEMI",e.activeValue),n.startPetAutos(o,e.autoName),["RUBY_ARCANUM","TOPAZ_ARCANUM","EMERALD_ARCANUM"].forEach(l=>n.gainStatus(l,1)),["FIRE_ATTUNEMENT","EARTH_ATTUNEMENT","WIND_ATTUNEMENT"].forEach(l=>n.tryConsumeResource(l,!0)),n.tryConsumeResource("IFRITS_FAVOR"),n.tryConsumeResource("CRIMSON_STRIKE_READY"),n.tryConsumeResource("GARUDAS_FAVOR"),n.tryConsumeResource("TITANS_FAVOR"),e.name==="SUMMON_SOLAR_BAHAMUT"&&n.gainStatus("REFULGENT_LUX"),n.addEvent(new be("update next demi",jb,()=>{n.resources.get("NEXT_DEMI_CYCLE").gainWrapping(1)}))},onApplication:n=>{n.isInCombat()||n.resources.get("IN_COMBAT").gain(1)},startOnHotbar:t===0}));const _h=e=>!e.hasActivePet&&e.hasResourceAvailable("RUBY_ARCANUM"),gh=e=>!e.hasActivePet&&e.hasResourceAvailable("TOPAZ_ARCANUM"),Nh=e=>!e.hasActivePet&&e.hasResourceAvailable("EMERALD_ARCANUM"),Yb=e=>(t,n)=>{t.tryConsumeResource("RUBY_ARCANUM"),t.gainStatus("FIRE_ATTUNEMENT",2),t.queuePrimalSummon(n,e),t.tryConsumeResource("EARTH_ATTUNEMENT",!0),t.tryConsumeResource("WIND_ATTUNEMENT",!0),t.tryConsumeResource("TITANS_FAVOR"),t.tryConsumeResource("GARUDAS_FAVOR")},Kb=e=>(t,n)=>{t.tryConsumeResource("TOPAZ_ARCANUM"),t.gainStatus("EARTH_ATTUNEMENT",4),t.queuePrimalSummon(n,e),t.tryConsumeResource("FIRE_ATTUNEMENT",!0),t.tryConsumeResource("WIND_ATTUNEMENT",!0),t.tryConsumeResource("IFRITS_FAVOR"),t.tryConsumeResource("CRIMSON_STRIKE_READY"),t.tryConsumeResource("GARUDAS_FAVOR")},Vb=e=>(t,n)=>{t.tryConsumeResource("EMERALD_ARCANUM"),t.gainStatus("WIND_ATTUNEMENT",4),t.queuePrimalSummon(n,e),t.tryConsumeResource("FIRE_ATTUNEMENT",!0),t.tryConsumeResource("EARTH_ATTUNEMENT",!0),t.tryConsumeResource("IFRITS_FAVOR"),t.tryConsumeResource("CRIMSON_STRIKE_READY"),t.tryConsumeResource("TITANS_FAVOR")},dc=.5;tt("SUMMON_IFRIT",30,{autoUpgrade:{trait:"ENKINDLE_II",otherSkill:"SUMMON_IFRIT_II"},applicationDelay:0,highlightIf:_h,validateAttempt:_h,onConfirm:Yb("SUMMON_IFRIT"),falloff:dc});tt("SUMMON_TITAN",35,{autoUpgrade:{trait:"ENKINDLE_II",otherSkill:"SUMMON_TITAN_II"},applicationDelay:0,highlightIf:gh,validateAttempt:gh,onConfirm:Kb("SUMMON_TITAN"),falloff:dc});tt("SUMMON_GARUDA",45,{autoUpgrade:{trait:"ENKINDLE_II",otherSkill:"SUMMON_GARUDA_II"},applicationDelay:0,highlightIf:Nh,validateAttempt:Nh,onConfirm:Vb("SUMMON_GARUDA"),falloff:dc});tt("SUMMON_IFRIT_II",90,{autoDowngrade:{trait:"ENKINDLE_II",otherSkill:"SUMMON_IFRIT"},applicationDelay:0,highlightIf:_h,validateAttempt:_h,onConfirm:Ue(e=>e.gainStatus("IFRITS_FAVOR"),Yb("SUMMON_IFRIT_II")),falloff:dc});tt("SUMMON_TITAN_II",90,{autoDowngrade:{trait:"ENKINDLE_II",otherSkill:"SUMMON_TITAN"},applicationDelay:0,highlightIf:gh,validateAttempt:gh,onConfirm:Kb("SUMMON_TITAN_II"),falloff:dc});tt("SUMMON_GARUDA_II",90,{autoDowngrade:{trait:"ENKINDLE_II",otherSkill:"SUMMON_GARUDA"},applicationDelay:0,highlightIf:Nh,validateAttempt:Nh,onConfirm:Ue(e=>e.gainStatus("GARUDAS_FAVOR"),Vb("SUMMON_GARUDA_II")),falloff:dc});const Rn=[{newSkill:"DEATHFLARE",condition:e=>e.activeDemi===2},{newSkill:"REKINDLE",condition:e=>e.activeDemi===3},{newSkill:"SUNFLARE",condition:e=>e.activeDemi===1},{newSkill:"CRIMSON_CYCLONE",condition:e=>e.hasResourceAvailable("IFRITS_FAVOR")},{newSkill:"CRIMSON_STRIKE",condition:e=>e.hasResourceAvailable("CRIMSON_STRIKE_READY")},{newSkill:"MOUNTAIN_BUSTER",condition:e=>e.hasResourceAvailable("TITANS_FAVOR")},{newSkill:"SLIPSTREAM",condition:e=>e.hasResourceAvailable("GARUDAS_FAVOR")}];oo("ASTRAL_FLOW",60,"cd_ASTRAL_FLOW",{applicationDelay:0,cooldown:20,replaceIf:Rn,validateAttempt:e=>!1});oo("DEATHFLARE",60,"cd_ASTRAL_FLOW",{potency:500,applicationDelay:.8,cooldown:20,replaceIf:Rn,highlightIf:e=>!0,validateAttempt:Rn[0].condition,falloff:.5,startOnHotbar:!1});oo("REKINDLE",80,"cd_ASTRAL_FLOW",{applicationDelay:1.03,cooldown:20,replaceIf:Rn,highlightIf:e=>!0,validateAttempt:Rn[1].condition,onConfirm:e=>e.gainStatus("REKINDLE"),startOnHotbar:!1});oo("SUNFLARE",100,"cd_ASTRAL_FLOW",{potency:800,applicationDelay:.8,cooldown:20,replaceIf:Rn,highlightIf:e=>!0,validateAttempt:Rn[2].condition,falloff:.5,startOnHotbar:!1});tt("CRIMSON_CYCLONE",86,{basePotency:[["NEVER",430],["ARCANE_MASTERY",520]],applicationDelay:.8,replaceIf:Rn,highlightIf:e=>!0,validateAttempt:Rn[3].condition,onConfirm:e=>{e.tryConsumeResource("IFRITS_FAVOR"),e.gainStatus("CRIMSON_STRIKE_READY")},falloff:.6,startOnHotbar:!1});tt("CRIMSON_STRIKE",86,{basePotency:[["NEVER",430],["ARCANE_MASTERY",520]],applicationDelay:.76,replaceIf:Rn,highlightIf:e=>!0,validateAttempt:Rn[4].condition,onConfirm:e=>e.tryConsumeResource("CRIMSON_STRIKE_READY"),falloff:.6,startOnHotbar:!1});oo("MOUNTAIN_BUSTER",86,"cd_MOUNTAIN_BUSTER",{potency:[["NEVER",150],["ARCANE_MASTERY",160]],cooldown:1,applicationDelay:.76,replaceIf:Rn,highlightIf:e=>!0,validateAttempt:Rn[5].condition,onConfirm:e=>e.tryConsumeResource("TITANS_FAVOR"),falloff:.6,startOnHotbar:!1});tt("SLIPSTREAM",86,{baseCastTime:3,baseRecastTime:3.5,basePotency:[["NEVER",430],["ARCANE_MASTERY",520]],applicationDelay:1.02,replaceIf:Rn,highlightIf:e=>!0,validateAttempt:Rn[6].condition,onConfirm:(e,t)=>{e.tryConsumeResource("GARUDAS_FAVOR"),e.addDoTPotencies({node:t,effectName:"SLIPSTREAM",skillName:"SLIPSTREAM",tickPotency:30,speedStat:"sps"})},onApplication:(e,t)=>e.applyDoT("SLIPSTREAM",t),falloff:.6,startOnHotbar:!1});const aB=[{newSkill:"ENKINDLE_BAHAMUT",condition:e=>[0,2].includes(e.activeDemi)},{newSkill:"ENKINDLE_PHOENIX",condition:e=>e.activeDemi===3},{newSkill:"ENKINDLE_SOLAR_BAHAMUT",condition:e=>e.activeDemi===1}];[{name:"ENKINDLE_BAHAMUT",level:70,activeValue:2,falloff:.5},{name:"ENKINDLE_PHOENIX",level:80,activeValue:3,falloff:.5},{name:"ENKINDLE_SOLAR_BAHAMUT",level:100,activeValue:1,falloff:.5}].forEach((e,t)=>oo(e.name,e.level,"cd_ENKINDLE",{applicationDelay:0,cooldown:20,replaceIf:aB,validateAttempt:n=>n.activeDemi===e.activeValue,onConfirm:(n,o)=>n.queueEnkindle(o,e.name),startOnHotbar:t===0,falloff:e.falloff}));tt("RUIN_IV",62,{basePotency:[["NEVER",430],["ARCANE_MASTERY",520]],manaCost:400,applicationDelay:.8,falloff:.6,highlightIf:e=>e.hasResourceAvailable("FURTHER_RUIN"),validateAttempt:e=>e.hasResourceAvailable("FURTHER_RUIN"),onConfirm:e=>e.tryConsumeResource("FURTHER_RUIN")});[{name:"ENERGY_DRAIN",level:10,potency:200,applicationDelay:1.07},{name:"ENERGY_SIPHON",level:52,potency:100,applicationDelay:1.02,falloff:0}].forEach(e=>oo(e.name,e.level,"cd_ENERGY_DRAIN",{...e,cooldown:60,onConfirm:t=>{t.gainStatus("AETHERFLOW",2),t.gainStatus("FURTHER_RUIN")}}));[{name:"FESTER",level:10,potency:340,applicationDelay:.71,autoUpgrade:{trait:"ENHANCED_FESTER",otherSkill:"NECROTIZE"}},{name:"PAINFLARE",level:40,potency:150,applicationDelay:.44,falloff:0},{name:"NECROTIZE",level:92,potency:460,applicationDelay:.71,autoDowngrade:{trait:"ENHANCED_FESTER",otherSkill:"FESTER"}}].forEach(e=>oo(e.name,e.level,"cd_AETHERFLOW",{...e,cooldown:1,validateAttempt:t=>t.hasResourceAvailable("AETHERFLOW"),onConfirm:t=>t.tryConsumeResource("AETHERFLOW")}));ze("SMN","SEARING_LIGHT",66,"cd_SEARING_LIGHT",{rscType:"SEARING_LIGHT",applicationDelay:0,cooldown:120,onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_SEARING_LIGHT")&&e.gainStatus("RUBYS_GLIMMER")},replaceIf:[{newSkill:"SEARING_FLASH",condition:e=>e.hasResourceAvailable("RUBYS_GLIMMER")}]});oo("SEARING_FLASH",96,"cd_SEARING_FLASH",{potency:600,applicationDelay:.8,cooldown:1,falloff:0,startOnHotbar:!1,highlightIf:e=>e.hasResourceAvailable("RUBYS_GLIMMER"),validateAttempt:e=>e.hasResourceAvailable("RUBYS_GLIMMER"),onConfirm:e=>e.tryConsumeResource("RUBYS_GLIMMER")});ze("SMN","RADIANT_AEGIS",2,"cd_RADIANT_AEGIS",{rscType:"RADIANT_AEGIS",applicationDelay:.45,cooldown:60,maxCharges:2,validateAttempt:e=>!e.hasActivePet});oo("LUX_SOLARIS",100,"cd_LUX_SOLARIS",{applicationDelay:.62,cooldown:60,highlightIf:e=>e.hasResourceAvailable("REFULGENT_LUX"),validateAttempt:e=>e.hasResourceAvailable("REFULGENT_LUX"),onConfirm:e=>e.tryConsumeResource("REFULGENT_LUX")});tt("RESURRECTION",12,{baseCastTime:8,manaCost:2400,applicationDelay:1.11,basePotency:0});Object.keys(MC).forEach(e=>Ft(e,`SGE/${Ge[e].name}.png`));const nB=["EUKRASIAN_DOSIS","EUKRASIAN_DOSIS_II","EUKRASIAN_DOSIS_III","EUKRASIAN_DYSKRASIA"],iB=["EUKRASIAN_DIAGNOSIS","KRASIS","TAUROCHOLE","HAIMA","HAIMATINON","KARDION"],oB=["EUKRASIA","SOTERIA","ZOE","PHILOSOPHIA","KARDIA"],lB=["EUKRASIAN_PROGNOSIS","PANHAIMA","PANHAIMATINON","KERACHOLE","KERAKEIA","EUDAIMONIA","HOLOS","HOLOSAKOS"];class sB extends Wt{jobSpecificOtherTargetedBuffViewProps(){return[...nB,...iB].map(t=>t==="KARDION"?this.makeCommonTimerless(t,!1):this.makeCommonTimer(t,!1))}jobSpecificSelfTargetedBuffViewProps(){return[...lB,...oB].map(t=>t==="KARDIA"||t==="EUKRASIA"?this.makeCommonTimerless(t):this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){const n=this.state.resources.get("ADDERSGALL"),o=Kt("SGE","ADDERSGALL").maxTimeout,l=n.availableAmount()<n.maxValue?this.state.resources.timeTillReady("ADDERSGALL"):o,r=this.state.resources.get("ADDERSTING");return[{kind:"counter",name:C({en:Ge.ADDERSGALL.name,zh:Ge.ADDERSGALL.label.zh}),color:t.sge.addersgall,currentStacks:n.availableAmount(),maxStacks:n.maxValue},{kind:"bar",name:C({en:Ge.ADDERSGALL.name+" timer",zh:Ge.ADDERSGALL.label.zh+"计时器"}),color:t.sge.addersgall,progress:1-l/o,valueString:l.toFixed(3)},{kind:"counter",name:C({en:Ge.ADDERSTING.name,zh:Ge.ADDERSTING.label.zh}),color:t.sge.addersting,currentStacks:r.availableAmount(),maxStacks:r.maxValue}]}}const Dt=(e,t,n)=>{Ye("SGE",e,t,n??{})};Dt("ADDERSGALL",3,{default:3,timeout:20});Dt("ADDERSTING",3,{default:3});Dt("EUKRASIA",1);Dt("KARDIA",1,{default:1});Dt("KARDION",1,{default:1});Dt("EUKRASIAN_DIAGNOSIS",1,{timeout:30});Dt("DIFFERENTIAL_DIAGNOSIS",1,{timeout:30});Dt("EUKRASIAN_PROGNOSIS",1,{timeout:30});Dt("HAIMA",1,{timeout:15});Dt("HAIMATINON",5,{timeout:15});Dt("PANHAIMA",1,{timeout:15});Dt("PANHAIMATINON",5,{timeout:15});Dt("PHYSIS_II",1,{timeout:15});Dt("AUTOPHYSIS",1,{timeout:15});Dt("PHILOSOPHIA",1,{timeout:20});Dt("EUDAIMONIA",1,{timeout:20});Dt("HOLOS",1,{timeout:20});Dt("HOLOSAKOS",1,{timeout:30});Dt("SOTERIA",4,{timeout:15});Dt("ZOE",1,{timeout:30});Dt("KRASIS",1,{timeout:10});Dt("KERACHOLE",1,{timeout:15});Dt("KERAKEIA",1,{timeout:15});Dt("TAUROCHOLE",1,{timeout:15});Dt("EUKRASIAN_DOSIS",1,{timeout:30});Dt("EUKRASIAN_DOSIS_II",1,{timeout:30});Dt("EUKRASIAN_DOSIS_III",1,{timeout:30});Dt("EUKRASIAN_DYSKRASIA",1,{timeout:30});class rB extends Xt{constructor(t){if(super(t),this.hasTraitUnlocked("ENHANCED_SWIFTCAST")||this.cooldowns.set(new ke("cd_SWIFTCAST",60,1,1)),!this.hasTraitUnlocked("ENHANCED_PHYSIS_II")){const n=$i(this.job).get("AUTOPHYSIS");n.maxTimeout=10,$i(this.job).set("AUTOPHYSIS",n)}this.hasTraitUnlocked("ENHANCED_SOTERIA")||this.cooldowns.set(new ke("cd_SOTERIA",90,1,1)),this.hasTraitUnlocked("ENHANCED_ZOE")||this.cooldowns.set(new ke("cd_ZOE",120,1,1)),this.registerRecurringEvents([{reportName:C({en:"Eukrasian DoT"}),groupedEffects:[{effectName:"EUKRASIAN_DOSIS",appliedBy:["EUKRASIAN_DOSIS"]},{effectName:"EUKRASIAN_DOSIS_II",appliedBy:["EUKRASIAN_DOSIS_II"]},{effectName:"EUKRASIAN_DOSIS_III",appliedBy:["EUKRASIAN_DOSIS_III"]},{effectName:"EUKRASIAN_DYSKRASIA",appliedBy:["EUKRASIAN_DYSKRASIA"]}]},{isHealing:!0,groupedEffects:[{effectName:"PHYSIS_II",appliedBy:["PHYSIS_II"]}]},{isHealing:!0,groupedEffects:[{effectName:"KERAKEIA",appliedBy:["KERACHOLE"]}]}])}get statusPropsGenerator(){return new sB(this)}jobSpecificRegisterRecurringEvents(){const t=n=>{const o=Kt("SGE","ADDERSGALL");this.hasResourceAvailable("ADDERSGALL",o.maxValue)||this.resources.get("ADDERSGALL").gain(1),this.resources.addResourceEvent({rscType:"ADDERSGALL",name:"gain addersgall if not currently capped",delay:o.maxTimeout,fnOnRsc:t})};t(this.resources.get("ADDERSGALL"))}jobSpecificAddHealingBuffCovers(t,n){this.hasResourceAvailable("AUTOPHYSIS")&&t.addBuff(H.Autophysis),this.hasResourceAvailable("KRASIS")&&t.addBuff(H.Krasis),n.cdName==="cd_GCD"&&(this.hasResourceAvailable("ZOE")&&t.addBuff(H.Zoe),this.hasResourceAvailable("PHILOSOPHIA")&&t.addBuff(H.Philosophia))}consumeAddersgall(){const t=Kt("SGE","ADDERSGALL");this.hasResourceAvailable("ADDERSGALL",t.maxValue)&&this.resources.get("ADDERSGALL").overrideTimer(this,t.maxTimeout),this.tryConsumeResource("ADDERSGALL"),this.resources.get("MANA").gain(700)}addPepsisPotency(t,n){const o=new ea({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:"PEPSIS",aspect:Ie.Other,basePotency:t==="EUKRASIAN_DIAGNOSIS"?450:350,description:je(t),targetCount:t==="EUKRASIAN_DIAGNOSIS"?1:this.partySize,snapshotTime:this.getDisplayTime()});if(this.hasResourceAvailable("TINCTURE")&&o.modifiers.push(X.Tincture),this.hasResourceAvailable("AUTOPHYSIS")&&o.modifiers.push(X.Autophysis),this.hasResourceAvailable("KRASIS")){if(t==="EUKRASIAN_PROGNOSIS"){const l=new ea({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:"PEPSIS",aspect:Ie.Other,basePotency:o.base,description:je(t),targetCount:o.targetCount-1,snapshotTime:this.getDisplayTime()});n.addHoTPotency(l,"PEPSIS"),o.targetCount=1,o.description+=", "+je("KRASIS")}o.modifiers.push(X.Krasis)}n.addHoTPotency(o,"PEPSIS")}addHaimaExpirationPotency(t,n){if(!(t==="HAIMA"||t==="PANHAIMA"))return;const o=new ea({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t==="HAIMA"?"HAIMA":"PANHAIMA",aspect:Ie.Other,basePotency:t==="HAIMA"?150:100,description:"",targetCount:t==="HAIMA"?1:this.partySize,snapshotTime:this.getDisplayTime()});if(this.hasResourceAvailable("TINCTURE")&&o.modifiers.push(X.Tincture),this.hasResourceAvailable("AUTOPHYSIS")&&o.modifiers.push(X.Autophysis),this.hasResourceAvailable("KRASIS")){if(t==="PANHAIMA"){const l=new ea({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:"PANHAIMA",aspect:Ie.Other,basePotency:100,description:"",targetCount:this.partySize-1,snapshotTime:this.getDisplayTime()});n.addHoTPotency(l,t),o.targetCount=1}o.modifiers.push(X.Krasis)}n.addHoTPotency(o,t)}handleHaimaExpiration(t,n){if(!(t==="HAIMA"||t==="PANHAIMA"))return;const o=t==="HAIMA"?"HAIMATINON":"PANHAIMATINON",l=this.resources.get(o).availableAmount();l<=0||this.addEvent(new be(`${Ge[t].name} expiration heal`,.001,()=>{n.getHotPotencies(t).forEach(r=>{r.description=je(t)+" "+C({en:"expiration"})+" ("+l+" "+C({en:"stacks"})+")",t==="PANHAIMA"&&r.modifiers.includes(X.Krasis)&&(r.description+=", "+je("KRASIS")),r.base*=l,N.resolveHealingPotency(r)})}))}addHealingMagicPotencyModifiers(t){this.hasResourceAvailable("ZOE")&&t.push(X.Zoe),this.hasResourceAvailable("PHILOSOPHIA")&&t.push(X.Philosophia)}addHealingActionPotencyModifiers(t){this.hasResourceAvailable("AUTOPHYSIS")&&t.push(X.Autophysis),this.hasResourceAvailable("KRASIS")&&t.push(X.Krasis)}}const ra=(e,t,n)=>{const o=h=>h.config.adjustedCastTime(1.5),l=h=>h.config.adjustedGCD(2.5),r=h=>{if(!n.healingPotency)return[];const E=[];return h.addHealingMagicPotencyModifiers(E),h.addHealingActionPotencyModifiers(E),E},d=Ue(h=>{n.castTime!==0&&h.tryConsumeResource("SWIFTCAST")},(h,E)=>{if(!(h.hasResourceAvailable("KARDIA")&&E.getInitialPotency()))return;const A=new ea({config:h.config,sourceTime:h.getDisplayTime(),sourceSkill:e,aspect:Ie.Other,basePotency:h.hasTraitUnlocked("ENHANCED_HEALING_MAGIC")?170:130,description:je("KARDIA"),targetCount:1,snapshotTime:h.getDisplayTime()});h.hasResourceAvailable("TINCTURE")&&A.modifiers.push(X.Tincture),h.hasResourceAvailable("SOTERIA")&&A.modifiers.push(X.Soteria),h.addHealingActionPotencyModifiers(A.modifiers),E.addHoTPotency(A,"KARDION")},(h,E)=>{if(!h.hasResourceAvailable("EUDAIMONIA"))return;const A=new ea({config:h.config,sourceTime:h.getDisplayTime(),sourceSkill:e,aspect:Ie.Other,basePotency:150,description:je("EUDAIMONIA"),targetCount:h.partySize,snapshotTime:h.getDisplayTime()});h.hasResourceAvailable("TINCTURE")&&A.modifiers.push(X.Tincture),h.addHealingActionPotencyModifiers(A.modifiers),E.addHoTPotency(A,"EUDAIMONIA")},h=>{n.healingPotency&&h.tryConsumeResource("ZOE")},n.onConfirm);return Qn("SGE",e,t,{...n,castTime:n.castTime??o,recastTime:n.recastTime??l,isInstantFn:h=>h.hasResourceAvailable("SWIFTCAST"),jobHealingPotencyModifiers:r,onConfirm:d,onApplication:Ue((h,E)=>{const A=E.getHotPotencies("KARDION"),R=E.getHotPotencies("EUDAIMONIA");A.length>0&&(N.resolveHealingPotency(A[0]),h.tryConsumeResource("SOTERIA")),R.forEach(T=>{N.resolveHealingPotency(T)})},n.onApplication)})},Da=(e,t,n,o)=>ot("SGE",e,t,n,{...o,jobHealingPotencyModifiers:r=>{if(!o.healingPotency)return[];const d=[];return r.addHealingActionPotencyModifiers(d),d}}),uS=(e,t,n,o)=>ze("SGE",e,t,n,o);ra("EUKRASIA",30,{castTime:0,recastTime:1,applicationDelay:0,validateAttempt:e=>!e.hasResourceAvailable("EUKRASIA"),onConfirm:e=>e.gainStatus("EUKRASIA")});ra("DOSIS",1,{replaceIf:[{condition:e=>e.hasResourceAvailable("EUKRASIA"),newSkill:"EUKRASIAN_DOSIS"}],autoUpgrade:{trait:"OFFENSIVE_MAGIC_MASTERY",otherSkill:"DOSIS_II"},manaCost:300,potency:300,applicationDelay:.67});ra("DOSIS_II",72,{startOnHotbar:!1,replaceIf:[{condition:e=>e.hasResourceAvailable("EUKRASIA"),newSkill:"EUKRASIAN_DOSIS_II"}],autoUpgrade:{trait:"OFFENSIVE_MAGIC_MASTERY_II",otherSkill:"DOSIS_III"},manaCost:400,potency:320,applicationDelay:.67});const dS=[["NEVER",330],["MAGICK_MASTERY_HEALER",380]];ra("DOSIS_III",82,{startOnHotbar:!1,replaceIf:[{condition:e=>e.hasResourceAvailable("EUKRASIA"),newSkill:"EUKRASIAN_DOSIS_III"}],manaCost:400,potency:dS,applicationDelay:.67});ra("EUKRASIAN_DOSIS",30,{startOnHotbar:!1,manaCost:400,castTime:0,recastTime:1.5,applicationDelay:.76,drawsAggro:!0,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"EUKRASIAN_DOSIS",skillName:"EUKRASIAN_DOSIS",tickPotency:40,speedStat:"sps"}),e.tryConsumeResource("EUKRASIA")},onApplication:(e,t)=>{e.applyDoT("EUKRASIAN_DOSIS",t)}});ra("EUKRASIAN_DOSIS_II",72,{startOnHotbar:!1,manaCost:400,castTime:0,recastTime:1.5,applicationDelay:.76,drawsAggro:!0,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"EUKRASIAN_DOSIS_II",skillName:"EUKRASIAN_DOSIS_II",tickPotency:60,speedStat:"sps"}),e.tryConsumeResource("EUKRASIA")},onApplication:(e,t)=>{e.applyDoT("EUKRASIAN_DOSIS_II",t)}});ra("EUKRASIAN_DOSIS_III",82,{startOnHotbar:!1,manaCost:400,castTime:0,recastTime:1.5,applicationDelay:.76,drawsAggro:!0,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"EUKRASIAN_DOSIS_III",skillName:"EUKRASIAN_DOSIS_III",tickPotency:80,speedStat:"sps"}),e.tryConsumeResource("EUKRASIA")},onApplication:(e,t)=>{e.applyDoT("EUKRASIAN_DOSIS_III",t)}});ra("TOXIKON",66,{autoUpgrade:{trait:"OFFENSIVE_MAGIC_MASTERY_II",otherSkill:"TOXIKON_II"},potency:[["NEVER",240],["OFFENSIVE_MAGIC_MASTERY",300]],falloff:.5,applicationDelay:1.2,castTime:0,validateAttempt:e=>e.hasResourceAvailable("ADDERSTING"),onConfirm:e=>e.tryConsumeResource("ADDERSTING")});ra("TOXIKON_II",82,{startOnHotbar:!1,potency:dS,falloff:.5,applicationDelay:1.2,castTime:0,validateAttempt:e=>e.hasResourceAvailable("ADDERSTING"),onConfirm:e=>e.tryConsumeResource("ADDERSTING")});ra("PHLEGMA",26,{autoUpgrade:{trait:"OFFENSIVE_MAGIC_MASTERY",otherSkill:"PHLEGMA_II"},potency:400,falloff:.5,applicationDelay:.67,manaCost:400,castTime:0,secondaryCooldown:{cdName:"cd_PHLEGMA",maxCharges:2,cooldown:40}});ra("PHLEGMA_II",72,{startOnHotbar:!1,autoUpgrade:{trait:"OFFENSIVE_MAGIC_MASTERY_II",otherSkill:"PHLEGMA_III"},potency:490,falloff:.5,applicationDelay:.67,manaCost:400,castTime:0,secondaryCooldown:{cdName:"cd_PHLEGMA",maxCharges:2,cooldown:40}});ra("PHLEGMA_III",82,{startOnHotbar:!1,potency:600,falloff:.5,applicationDelay:.67,manaCost:400,castTime:0,secondaryCooldown:{cdName:"cd_PHLEGMA",maxCharges:2,cooldown:40}});Da("PSYCHE",92,"cd_PSYCHE",{potency:600,falloff:.5,applicationDelay:2.1,cooldown:60});ra("DYSKRASIA",46,{autoUpgrade:{trait:"OFFENSIVE_MAGIC_MASTERY_II",otherSkill:"DYSKRASIA_II"},potency:160,falloff:0,applicationDelay:.76,manaCost:400,castTime:0});ra("DYSKRASIA_II",82,{startOnHotbar:!1,replaceIf:[{condition:e=>e.hasResourceAvailable("EUKRASIA"),newSkill:"EUKRASIAN_DYSKRASIA"}],potency:170,falloff:0,applicationDelay:.76,manaCost:400,castTime:0});ra("EUKRASIAN_DYSKRASIA",82,{startOnHotbar:!1,falloff:0,applicationDelay:1.03,castTime:0,recastTime:1.5,drawsAggro:!0,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"EUKRASIAN_DYSKRASIA",skillName:"EUKRASIAN_DYSKRASIA",tickPotency:40,speedStat:"sps"}),e.tryConsumeResource("EUKRASIA")},onApplication:(e,t)=>{e.applyDoT("EUKRASIAN_DYSKRASIA",t)}});ra("DIAGNOSIS",2,{healingPotency:[["NEVER",400],["ENHANCED_HEALING_MAGIC",450]],applicationDelay:.58,replaceIf:[{condition:e=>e.hasResourceAvailable("EUKRASIA"),newSkill:"EUKRASIAN_DIAGNOSIS"}],manaCost:400});ra("EUKRASIAN_DIAGNOSIS",30,{startOnHotbar:!1,healingPotency:300,applicationDelay:.67,castTime:0,recastTime:1.5,manaCost:800,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:e=>e.tryConsumeResource("EUKRASIA"),onApplication:e=>e.gainStatus("EUKRASIAN_DIAGNOSIS")});Da("EUKRASIAN_DIAGNOSIS_POP",30,"cd_DIAGNOSIS_POP",{animationLock:Sn,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("EUKRASIAN_DIAGNOSIS"),onConfirm:e=>{e.tryConsumeResource("EUKRASIAN_DIAGNOSIS"),e.resources.get("ADDERSTING").gain(1)},highlightIf:e=>e.hasResourceAvailable("EUKRASIAN_DIAGNOSIS")});ra("PROGNOSIS",10,{healingPotency:300,aoeHeal:!0,applicationDelay:.58,replaceIf:[{condition:e=>e.hasResourceAvailable("EUKRASIA")&&e.hasTraitUnlocked("EUKRASIAN_PROGNOSIS_MASTERY"),newSkill:"EUKRASIAN_PROGNOSIS_II"},{condition:e=>e.hasResourceAvailable("EUKRASIA")&&!e.hasTraitUnlocked("EUKRASIAN_PROGNOSIS_MASTERY"),newSkill:"EUKRASIAN_PROGNOSIS"}],manaCost:700,castTime:e=>e.config.adjustedCastTime(2)});ra("EUKRASIAN_PROGNOSIS",30,{startOnHotbar:!1,autoUpgrade:{trait:"EUKRASIAN_PROGNOSIS_MASTERY",otherSkill:"EUKRASIAN_PROGNOSIS_II"},healingPotency:100,aoeHeal:!0,applicationDelay:.94,castTime:0,recastTime:1.5,manaCost:800,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:e=>e.tryConsumeResource("EUKRASIA"),onApplication:e=>e.gainStatus("EUKRASIAN_PROGNOSIS")});ra("EUKRASIAN_PROGNOSIS_II",96,{startOnHotbar:!1,healingPotency:100,aoeHeal:!0,applicationDelay:.94,castTime:0,recastTime:1.5,manaCost:800,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:e=>e.tryConsumeResource("EUKRASIA"),onApplication:e=>e.gainStatus("EUKRASIAN_PROGNOSIS")});Da("EUKRASIAN_PROGNOSIS_POP",30,"cd_PROGNOSIS_POP",{autoUpgrade:{trait:"EUKRASIAN_PROGNOSIS_MASTERY",otherSkill:"EUKRASIAN_PROGNOSIS_II_POP"},animationLock:Sn,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("EUKRASIAN_PROGNOSIS"),onConfirm:e=>{e.tryConsumeResource("EUKRASIAN_PROGNOSIS"),e.resources.get("ADDERSTING").gain(1)},highlightIf:e=>e.hasResourceAvailable("EUKRASIAN_PROGNOSIS")});Da("EUKRASIAN_PROGNOSIS_II_POP",30,"cd_PROGNOSIS_POP",{startOnHotbar:!1,animationLock:Sn,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("EUKRASIAN_PROGNOSIS"),onConfirm:e=>{e.tryConsumeResource("EUKRASIAN_PROGNOSIS"),e.resources.get("ADDERSTING").gain(1)},highlightIf:e=>e.hasResourceAvailable("EUKRASIAN_PROGNOSIS")});ra("PNEUMA",90,{potency:dS,falloff:.4,healingPotency:600,aoeHeal:!0,applicationDelay:.58,manaCost:700,secondaryCooldown:{cdName:"cd_PNEUMA",maxCharges:1,cooldown:120}});uS("ZOE",56,"cd_ZOE",{rscType:"ZOE",applicationDelay:0,cooldown:90});Da("PEPSIS",58,"cd_PEPSIS",{cooldown:30,applicationDelay:1.16,onConfirm:(e,t)=>{e.hasResourceAvailable("EUKRASIAN_DIAGNOSIS")&&(e.addPepsisPotency("EUKRASIAN_DIAGNOSIS",t),e.tryConsumeResource("EUKRASIAN_DIAGNOSIS")),e.hasResourceAvailable("EUKRASIAN_PROGNOSIS")&&(e.addPepsisPotency("EUKRASIAN_PROGNOSIS",t),e.tryConsumeResource("EUKRASIAN_PROGNOSIS"))},onApplication:(e,t)=>{t.getHotPotencies("PEPSIS").forEach(n=>{N.resolveHealingPotency(n)})}});uS("SOTERIA",35,"cd_SOTERIA",{rscType:"SOTERIA",applicationDelay:.8,cooldown:60});uS("KRASIS",86,"cd_KRASIS",{rscType:"KRASIS",applicationDelay:.76,cooldown:60});Da("HAIMA",70,"cd_HAIMA",{replaceIf:[{condition:e=>e.hasResourceAvailable("HAIMA"),newSkill:"HAIMA_POP"}],applicationDelay:.76,cooldown:120,onConfirm:(e,t)=>e.addHaimaExpirationPotency("HAIMA",t),onApplication:(e,t)=>{const n=Kt("SGE","HAIMATINON").maxValue;e.gainStatus("HAIMA"),e.gainStatus("HAIMATINON",n),e.addEvent(new be("Haima Expiration heal Check",Kt("SGE","HAIMA").maxTimeout-.001,()=>e.handleHaimaExpiration("HAIMA",t)))}});Da("HAIMA_POP",70,"cd_HAIMA_POP",{startOnHotbar:!1,animationLock:Sn,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("HAIMA"),highlightIf:e=>e.hasResourceAvailable("HAIMA"),onConfirm:e=>{e.hasResourceAvailable("HAIMATINON")?e.tryConsumeResource("HAIMATINON"):e.tryConsumeResource("HAIMA")}});Da("PHYSIS_II",60,"cd_PHYSIS",{aoeHeal:!0,applicationDelay:.85,cooldown:60,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"PHYSIS_II",effectName:"PHYSIS_II",speedStat:"sps",tickPotency:130})},onApplication:(e,t)=>{e.applyHoT("PHYSIS_II",t),e.gainStatus("AUTOPHYSIS")}});Da("PHILOSOPHIA",100,"cd_PHILOSOPHIA",{applicationDelay:1.83,cooldown:180,onApplication:e=>{e.gainStatus("PHILOSOPHIA"),e.gainStatus("EUDAIMONIA")}});Da("HOLOS",76,"cd_HOLOS",{applicationDelay:.62,cooldown:120,onApplication:e=>{e.gainStatus("HOLOS"),e.gainStatus("HOLOSAKOS")}});Da("PANHAIMA",80,"cd_PANHAIMA",{replaceIf:[{condition:e=>e.hasResourceAvailable("PANHAIMA"),newSkill:"PANHAIMA_POP"}],applicationDelay:.62,cooldown:120,onConfirm:(e,t)=>e.addHaimaExpirationPotency("PANHAIMA",t),onApplication:(e,t)=>{const n=Kt("SGE","PANHAIMATINON").maxValue;e.gainStatus("PANHAIMA"),e.gainStatus("PANHAIMATINON",n),e.addEvent(new be("Panhaima Expiration heal Check",Kt("SGE","PANHAIMA").maxTimeout-.001,()=>e.handleHaimaExpiration("PANHAIMA",t)))}});Da("PANHAIMA_POP",80,"cd_PANHAIMA_POP",{startOnHotbar:!1,animationLock:Sn,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("PANHAIMA"),highlightIf:e=>e.hasResourceAvailable("PANHAIMA"),onConfirm:e=>{e.hasResourceAvailable("PANHAIMATINON")?e.tryConsumeResource("PANHAIMATINON"):e.tryConsumeResource("PANHAIMA")}});Da("RHIZOMATA",74,"cd_RHIZOMATA",{cooldown:90,onConfirm:e=>e.resources.get("ADDERSGALL").gain(1)});Da("DRUOCHOLE",45,"cd_DRUOCHOLE",{cooldown:1,healingPotency:600,applicationDelay:.78,validateAttempt:e=>e.hasResourceAvailable("ADDERSGALL"),onConfirm:e=>e.consumeAddersgall()});Da("IXOCHOLE",52,"cd_IXOCHOLE",{cooldown:30,healingPotency:400,aoeHeal:!0,applicationDelay:.756,validateAttempt:e=>e.hasResourceAvailable("ADDERSGALL"),onConfirm:e=>e.consumeAddersgall()});Da("TAUROCHOLE",62,"cd_TAUROCHOLE",{cooldown:45,applicationDelay:.67,onConfirm:e=>e.consumeAddersgall(),onApplication:e=>e.gainStatus("TAUROCHOLE")});Da("KERACHOLE",50,"cd_KERACHOLE",{cooldown:30,aoeHeal:!0,applicationDelay:.81,validateAttempt:e=>e.hasResourceAvailable("ADDERSGALL"),onConfirm:(e,t)=>{e.consumeAddersgall(),e.addHoTPotencies({node:t,skillName:"KERACHOLE",effectName:"KERAKEIA",speedStat:"sps",tickPotency:100})},onApplication:(e,t)=>{e.gainStatus("KERACHOLE"),e.hasTraitUnlocked("ENHANCED_KERACHOLE")&&e.applyHoT("KERAKEIA",t)}});ra("EGEIRO",12,{applicationDelay:.58,manaCost:2400,castTime:8});Da("KARDIA",4,"cd_KARDIA",{applicationDelay:.62,cooldown:5,onApplication:e=>{e.gainStatus("KARDIA"),e.gainStatus("KARDION")}});Da("ICARUS",40,"cd_ICARUS",{cooldown:45,animationLock:Vt});Object.keys(pT).forEach(e=>Ft(e,`WAR/${Ge[e].name}.png`));class cB extends Wt{jobSpecificSelfTargetedBuffViewProps(){return Object.keys(pT).map(t=>this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){var E,A;const n=this.state.resources,o=n.get("BEAST_GAUGE").availableAmount(),l=n.get("STORM_COMBO"),r=n.get("TEMPEST_COMBO"),d=l.available(1)?(E=l.pendingChange)==null?void 0:E.timeTillEvent:r.available(1)?(A=r.pendingChange)==null?void 0:A.timeTillEvent:void 0;return[{kind:"text",name:C({en:"Combo Timer",zh:"连击监控"}),text:(d==null?void 0:d.toFixed(3))??"N/A"},{kind:"bar",name:C({en:"Beast Gauge",zh:"兽魂量谱"}),color:t.war.beastGauge,progress:o/100,valueString:o.toFixed(0)}]}}const Gt=(e,t,n)=>{Ye("WAR",e,t,n??{})};Gt("BEAST_GAUGE",100,{warnOnOvercap:!0});const ES=.74,Wb=1.16;Gt("SURGING_TEMPEST",1,{timeout:60});Gt("NASCENT_CHAOS",1,{timeout:30});Gt("INNER_RELEASE",3,{timeout:15+ES});Gt("INNER_STRENGTH",1,{timeout:15+ES});Gt("BURGEONING_FURY",3,{timeout:30});Gt("WRATHFUL",1,{timeout:30});Gt("PRIMAL_REND_READY",1,{timeout:30+ES,warnOnTimeout:!0});Gt("PRIMAL_RUINATION_READY",1,{timeout:20+Wb,warnOnTimeout:!0});Gt("THRILL_OF_BATTLE",1,{timeout:10});Gt("EQUILIBRIUM",1,{timeout:15});Gt("RAW_INTUITION",1,{timeout:6});Gt("BLOODWHETTING",1,{timeout:8});Gt("STEM_THE_FLOW",1,{timeout:4});Gt("STEM_THE_TIDE",1,{timeout:20});Gt("NASCENT_FLASH",1,{timeout:8});Gt("VENGEANCE",1,{timeout:15});Gt("DAMNATION",1,{timeout:15});Gt("PRIMEVAL_IMPULSE",1,{timeout:15});Gt("SHAKE_IT_OFF",1,{timeout:30});Gt("SHAKE_IT_OFF_OVER_TIME",1,{timeout:15});Gt("HOLMGANG",1,{timeout:10});Gt("DEFIANCE",1);Gt("STORM_COMBO",2,{timeout:30});Gt("TEMPEST_COMBO",1,{timeout:30});const uB=["HEAVY_SWING","MAIM","STORMS_EYE","STORMS_PATH"],Xb=["OVERPOWER","MYTHRIL_TEMPEST"],dB=[...uB,...Xb],tC=["FELL_CLEAVE","DECIMATE"],EB=["THRILL_OF_BATTLE","DAMNATION","BLOODWHETTING","VENGEANCE","RAW_INTUITION"];class hB extends Xt{constructor(t){super(t),this.hasTraitUnlocked("ENHANCED_ONSLAUGHT")&&this.cooldowns.set(new ke("cd_ONSLAUGHT",30,3,3)),this.registerRecurringEvents()}get statusPropsGenerator(){return new cB(this)}processComboStatus(t){if(!dB.includes(t))return;const n=Xb.includes(t),o=n?"TEMPEST_COMBO":"STORM_COMBO",l=n?"STORM_COMBO":"TEMPEST_COMBO";this.setComboState(l,0);const r=this.resources.get(o).availableAmount();let d=0;n?t==="OVERPOWER"&&(d=1):t==="HEAVY_SWING"?d=1:r===1&&t==="MAIM"&&(d=2),this.setComboState(o,d)}hasComboStatus(t,n){return this.hasResourceExactly(t,n)}gainBeastGauge(t){this.resources.get("BEAST_GAUGE").gain(t)}gainProc(t,n){const o=Kt("WAR",t).maxTimeout;this.hasResourceAvailable(t)?(t==="BURGEONING_FURY"&&this.resources.get(t).gain(1),this.resources.get(t).overrideTimer(this,o)):(this.resources.get(t).gain(n??1),o&&this.enqueueResourceDrop(t,o))}gainSurgingTempest(t){var r;const n=this.resources.get("SURGING_TEMPEST"),o=Kt("WAR","SURGING_TEMPEST").maxTimeout,l=(((r=n.pendingChange)==null?void 0:r.timeTillEvent)??0)+t;n.overrideTimer(this,l>=o?o:l)}gainSurgingTempestGCD(t,n,o){this.hasResourceAvailable("SURGING_TEMPEST")?this.addEvent(new be("surging tempest refresh",n,()=>{this.hasResourceAvailable("SURGING_TEMPEST")?this.gainSurgingTempest(t):(this.resources.get("SURGING_TEMPEST").gain(1),this.enqueueResourceDrop("SURGING_TEMPEST",t))})):(this.resources.get("SURGING_TEMPEST").gain(1),this.enqueueResourceDrop("SURGING_TEMPEST",t+o))}}const ei=(e,t,n)=>{const o=Ue(n.onConfirm,r=>r.processComboStatus(e),r=>{tC.includes(e)&&r.tryConsumeResource("INNER_RELEASE")&&r.hasTraitUnlocked("ENHANCED_INNER_RELEASE")&&(r.gainProc("BURGEONING_FURY"),r.hasResourceAvailable("BURGEONING_FURY",3)&&(r.gainProc("WRATHFUL"),r.tryConsumeResource("BURGEONING_FURY",!0)))}),l=n.jobPotencyModifiers??(r=>[]);return na("WAR",e,t,{...n,onConfirm:o,recastTime:r=>r.config.adjustedSksGCD(),jobPotencyModifiers:r=>{const d=l(r);return r.hasResourceAvailable("SURGING_TEMPEST")&&d.push(X.SurgingTempest),r.hasResourceAvailable("INNER_RELEASE")&&tC.includes(e)&&d.push(X.AutoCDH),d}})},Ec=(e,t,n,o)=>ot("WAR",e,t,n,{...o,jobPotencyModifiers:l=>{const r=[];return l.hasResourceAvailable("SURGING_TEMPEST")&&r.push(X.SurgingTempest),r}});ei("TOMAHAWK",15,{potency:150,applicationDelay:.71});ei("HEAVY_SWING",1,{potency:[["NEVER",150],["MELEE_MASTERY_TANK",200],["MELEE_MASTERY_II_TANK",240]],applicationDelay:.53});ei("MAIM",4,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",150],["MELEE_MASTERY_II_TANK",190]],combo:{potency:[["NEVER",250],["MELEE_MASTERY_TANK",300],["MELEE_MASTERY_II_TANK",340]],resource:"STORM_COMBO",resourceValue:1},applicationDelay:.62,onConfirm:e=>{e.hasComboStatus("STORM_COMBO",1)&&e.gainBeastGauge(10)},highlightIf:e=>e.hasComboStatus("STORM_COMBO",1)});ei("STORMS_PATH",26,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",160],["MELEE_MASTERY_II_TANK",220]],combo:{potency:[["NEVER",380],["MELEE_MASTERY_TANK",440],["MELEE_MASTERY_II_TANK",500]],resource:"STORM_COMBO",resourceValue:2},applicationDelay:1.52,onConfirm:e=>{e.hasComboStatus("STORM_COMBO",2)&&e.gainBeastGauge(20)},highlightIf:e=>e.hasComboStatus("STORM_COMBO",2)});ei("STORMS_EYE",50,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",160],["MELEE_MASTERY_II_TANK",220]],combo:{potency:[["NEVER",380],["MELEE_MASTERY_TANK",440],["MELEE_MASTERY_II_TANK",500]],resource:"STORM_COMBO",resourceValue:2},applicationDelay:1.65,onConfirm:e=>{e.hasComboStatus("STORM_COMBO",2)&&(e.gainBeastGauge(10),e.gainSurgingTempestGCD(30,1.65,1.7))},highlightIf:e=>e.hasComboStatus("STORM_COMBO",2)});ei("OVERPOWER",10,{potency:110,falloff:0,applicationDelay:.62});ei("MYTHRIL_TEMPEST",40,{potency:100,combo:{potency:140,resource:"TEMPEST_COMBO",resourceValue:1},falloff:0,applicationDelay:.49,onConfirm:e=>{e.hasComboStatus("TEMPEST_COMBO",1)&&(e.gainBeastGauge(20),e.gainSurgingTempestGCD(30,.49,.45))},highlightIf:e=>e.hasComboStatus("TEMPEST_COMBO",1)});function of(e){e.cooldowns.get("cd_INFURIATE").restore(5)}ei("FELL_CLEAVE",54,{potency:[["NEVER",520],["MELEE_MASTERY_II_TANK",580]],applicationDelay:.62,validateAttempt:e=>e.resources.get("BEAST_GAUGE").available(50)||e.resources.get("INNER_RELEASE").available(1),onConfirm:e=>{e.hasResourceAvailable("INNER_RELEASE")||e.resources.get("BEAST_GAUGE").consume(50),of(e)},replaceIf:[{newSkill:"INNER_CHAOS",condition:e=>e.hasResourceAvailable("NASCENT_CHAOS")}],highlightIf:e=>e.hasResourceAvailable("BEAST_GAUGE",50)||e.hasResourceAvailable("INNER_RELEASE")});ei("DECIMATE",60,{potency:180,falloff:0,applicationDelay:1.83,validateAttempt:e=>e.hasResourceAvailable("BEAST_GAUGE",50)||e.hasResourceAvailable("INNER_RELEASE"),onConfirm:e=>{e.hasResourceAvailable("INNER_RELEASE")||e.resources.get("BEAST_GAUGE").consume(50),of(e)},highlightIf:e=>e.hasResourceAvailable("BEAST_GAUGE",50)||e.hasResourceAvailable("INNER_RELEASE"),replaceIf:[{newSkill:"CHAOTIC_CYCLONE",condition:e=>e.hasResourceAvailable("NASCENT_CHAOS")}]});Ec("INNER_RELEASE",70,"cd_INNER_RELEASE",{applicationDelay:0,requiresCombat:!0,cooldown:60,maxCharges:1,onConfirm:e=>{e.gainProc("INNER_RELEASE",3),e.gainProc("INNER_STRENGTH"),e.hasResourceAvailable("SURGING_TEMPEST")&&e.gainSurgingTempest(10),e.config.level>=Rt.lvl90&&e.gainProc("PRIMAL_REND_READY")},replaceIf:[{newSkill:"PRIMAL_WRATH",condition:e=>e.hasResourceAvailable("WRATHFUL")}]});ei("PRIMAL_REND",90,{potency:700,applicationDelay:Wb,falloff:.5,animationLock:1.2,validateAttempt:e=>e.hasResourceAvailable("PRIMAL_REND_READY"),onConfirm:e=>{e.tryConsumeResource("PRIMAL_REND_READY"),e.hasTraitUnlocked("ENHANCED_PRIMAL_REND")&&e.gainProc("PRIMAL_RUINATION_READY")},highlightIf:e=>e.hasResourceAvailable("PRIMAL_REND_READY"),replaceIf:[{newSkill:"PRIMAL_RUINATION",condition:e=>e.hasResourceAvailable("PRIMAL_RUINATION_READY")}],jobPotencyModifiers:e=>[X.AutoCDH]});Ec("PRIMAL_WRATH",96,"cd_PRIMAL_WRATH",{startOnHotbar:!1,potency:700,falloff:.5,applicationDelay:1.15,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("WRATHFUL"),onConfirm:e=>e.tryConsumeResource("WRATHFUL"),highlightIf:e=>!0});ei("PRIMAL_RUINATION",100,{startOnHotbar:!1,potency:780,falloff:.5,applicationDelay:1.06,validateAttempt:e=>e.hasResourceAvailable("PRIMAL_RUINATION_READY"),onConfirm:e=>{e.tryConsumeResource("PRIMAL_RUINATION_READY")},highlightIf:e=>!0,jobPotencyModifiers:e=>[X.AutoCDH]});Ec("INFURIATE",50,"cd_INFURIATE",{applicationDelay:0,requiresCombat:!0,cooldown:60,maxCharges:2,onApplication:e=>{e.gainBeastGauge(50),e.hasTraitUnlocked("NASCENT_CHAOS")&&e.gainProc("NASCENT_CHAOS")}});ei("INNER_CHAOS",80,{startOnHotbar:!1,potency:660,applicationDelay:.94,validateAttempt:e=>e.hasResourceAvailable("BEAST_GAUGE",50)&&e.hasResourceAvailable("NASCENT_CHAOS"),onConfirm:e=>{e.tryConsumeResource("NASCENT_CHAOS"),e.resources.get("BEAST_GAUGE").consume(50),of(e)},highlightIf:e=>e.hasResourceAvailable("BEAST_GAUGE",50),jobPotencyModifiers:e=>[X.AutoCDH]});ei("CHAOTIC_CYCLONE",72,{startOnHotbar:!1,potency:200,falloff:0,applicationDelay:1.43,validateAttempt:e=>e.hasResourceAvailable("BEAST_GAUGE",50)&&e.hasResourceAvailable("NASCENT_CHAOS"),onConfirm:e=>{e.tryConsumeResource("NASCENT_CHAOS"),e.resources.get("BEAST_GAUGE").consume(50),of(e)},highlightIf:e=>e.hasResourceAvailable("BEAST_GAUGE",50),jobPotencyModifiers:e=>[X.AutoCDH]});Ec("ONSLAUGHT",62,"cd_ONSLAUGHT",{potency:150,applicationDelay:.63,cooldown:30,maxCharges:2,animationLock:Vt});Ec("UPHEAVAL",64,"cd_UPHEAVAL",{potency:420,applicationDelay:.62,cooldown:30});Ec("OROGENY",86,"cd_UPHEAVAL",{potency:150,falloff:0,applicationDelay:.62,cooldown:30});ze("WAR","VENGEANCE",38,"cd_VENGEANCE",{rscType:"VENGEANCE",autoUpgrade:{trait:"VENGEANCE_MASTERY",otherSkill:"DAMNATION"},cooldown:120,applicationDelay:.62});ze("WAR","DAMNATION",92,"cd_VENGEANCE",{rscType:"DAMNATION",autoDowngrade:{trait:"VENGEANCE_MASTERY",otherSkill:"VENGEANCE"},cooldown:120,applicationDelay:.62});ze("WAR","RAW_INTUITION",56,"cd_RAW_INTUITION",{rscType:"RAW_INTUITION",autoUpgrade:{trait:"RAW_INTUITION_MASTERY",otherSkill:"BLOODWHETTING"},cooldown:25,applicationDelay:.45});ze("WAR","BLOODWHETTING",82,"cd_RAW_INTUITION",{rscType:"BLOODWHETTING",autoDowngrade:{trait:"RAW_INTUITION_MASTERY",otherSkill:"RAW_INTUITION"},onApplication:e=>{e.gainProc("STEM_THE_FLOW"),e.gainProc("STEM_THE_TIDE")},cooldown:25,applicationDelay:.45});ot("WAR","NASCENT_FLASH",76,"cd_RAW_INTUITION",{onApplication:e=>{let t=6;e.hasTraitUnlocked("ENHANCED_NASCENT_FLASH")&&(t=8),e.resources.get("NASCENT_FLASH").gain(1),e.enqueueResourceDrop("NASCENT_FLASH",t)},cooldown:25,applicationDelay:.45});ze("WAR","HOLMGANG",45,"cd_HOLMGANG",{rscType:"HOLMGANG",cooldown:240,applicationDelay:.45});ze("WAR","THRILL_OF_BATTLE",30,"cd_THRILL_OF_BATTLE",{rscType:"THRILL_OF_BATTLE",cooldown:90,applicationDelay:.62});ot("WAR","EQUILIBRIUM",58,"cd_EQUILIBRIUM",{cooldown:60,applicationDelay:.62,onApplication:e=>{e.hasTraitUnlocked("ENHANCED_EQUILIBRIUM")&&e.gainProc("EQUILIBRIUM")}});ze("WAR","SHAKE_IT_OFF",68,"cd_SHAKE_IT_OFF",{rscType:"SHAKE_IT_OFF",cooldown:90,onApplication:(e,t)=>{let n=0;EB.forEach(o=>{e.tryConsumeResource(o)&&(n+=1)}),console.debug(`Shake It Off dispelled ${n} buffs`),e.gainProc("SHAKE_IT_OFF_OVER_TIME")},applicationDelay:0});ot("WAR","DEFIANCE",10,"cd_DEFIANCE",{cooldown:2,maxCharges:1,applicationDelay:0,validateAttempt:e=>!e.hasResourceAvailable("DEFIANCE"),onConfirm:e=>e.resources.get("DEFIANCE").gain(1),replaceIf:[{newSkill:"RELEASE_DEFIANCE",condition:e=>e.hasResourceAvailable("DEFIANCE")}],secondaryCooldown:{cdName:"cd_RELEASE_DEFIANCE",cooldown:1,maxCharges:1}});ot("WAR","RELEASE_DEFIANCE",10,"cd_RELEASE_DEFIANCE",{startOnHotbar:!1,cooldown:1,maxCharges:1,secondaryCooldown:{cdName:"cd_DEFIANCE",cooldown:2,maxCharges:1},applicationDelay:0,validateAttempt:e=>e.hasResourceAvailable("DEFIANCE"),onConfirm:e=>e.tryConsumeResource("DEFIANCE")});const qb=["CIRCLE_OF_SCORN_DOT"],fB=Object.keys(RT).filter(e=>!qb.includes(e));Object.keys(RT).forEach(e=>Ft(e,`PLD/${Ge[e].name}.png`));class AB extends Wt{jobSpecificOtherTargetedBuffViewProps(){return[...qb.map(t=>this.makeCommonTimer(t,!1))]}jobSpecificSelfTargetedBuffViewProps(){return fB.map(t=>this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){var T,S;const n=this.state.resources,o=n.get("PLD_COMBO_TRACKER"),l=n.get("PLD_AOE_COMBO_TRACKER"),r=n.get("OATH_GAUGE").availableAmount(),d=n.get("IRON_WILL").availableAmount(),h=o.available(1)?(T=o.pendingChange)==null?void 0:T.timeTillEvent:l.available(1)?(S=l.pendingChange)==null?void 0:S.timeTillEvent:void 0,E=this.state.findAutoAttackTimerInQueue();let A="";return this.state.hasResourceAvailable("STORED_AUTO")?A="stored":A=E!==-1?E.toFixed(3):"N/A",[{kind:"bar",name:C({en:"Auto Tracker"}),color:t.pld.ironWillColor,progress:E!==-1?(3-E)/3:0,valueString:A},{kind:"bar",name:C({en:"Combo Timer",zh:"连击监控"}),color:t.pld.pldComboTimer,progress:h?h/30:0,valueString:(h==null?void 0:h.toFixed(3))??"N/A"},{kind:"counter",name:C({en:"Iron Will",zh:"钢铁信念"}),color:t.pld.ironWillColor,currentStacks:d,maxStacks:1},{kind:"bar",name:C({en:"Oath Gauge",zh:"忠义值"}),color:t.pld.oathGaugeColor,progress:r/100,valueString:r.toFixed(0)}]}}const gt=(e,t,n)=>{Ye("PLD",e,t,n??{})};gt("FIGHT_OR_FLIGHT",1,{timeout:20});gt("IRON_WILL",1);gt("OATH_GAUGE",100);gt("SHELTRON",1,{timeout:6});gt("SENTINEL",1,{timeout:15});gt("CIRCLE_OF_SCORN_DOT",1,{timeout:15});gt("HALLOWED_GROUND",1,{timeout:10});gt("BULWARK",1,{timeout:10});gt("GORING_BLADE_READY",1,{timeout:30});gt("DIVINE_VEIL",1,{timeout:30});gt("ATONEMENT_READY",1,{timeout:30,warnOnTimeout:!0});gt("DIVINE_MIGHT",1,{timeout:30,warnOnTimeout:!0});gt("KNIGHTS_RESOLVE",1,{timeout:4});gt("KNIGHTS_BENEDICTION",1,{timeout:12});gt("REQUIESCAT",4,{timeout:30,warnOnTimeout:!0});gt("CONFITEOR_READY",1,{timeout:30,warnOnTimeout:!0});gt("PASSAGE_OF_ARMS",1,{timeout:18});gt("SUPPLICATION_READY",1,{timeout:30,warnOnTimeout:!0});gt("SEPULCHRE_READY",1,{timeout:30,warnOnTimeout:!0});gt("HOLY_SHELTRON",1,{timeout:8});gt("BLADE_OF_HONOR_READY",1,{timeout:30,warnOnTimeout:!0});gt("GUARDIAN",1,{timeout:15});gt("GUARDIANS_WILL",1,{timeout:15});gt("PLD_COMBO_TRACKER",2,{timeout:30});gt("PLD_CONFITEOR_COMBO_TRACKER",3,{timeout:30});gt("PLD_AOE_COMBO_TRACKER",1,{timeout:30});gt("INTERVENTION",1,{timeout:8});gt("ARMS_UP",1);gt("COVER",1,{timeout:12});const sR=new Map([["TOTAL_ECLIPSE",0],["PROMINENCE",1]]),rR=new Map([["FAST_BLADE",0],["RIOT_BLADE",1],["ROYAL_AUTHORITY",2]]),Zb=new Map([["CONFITEOR",0],["BLADE_OF_FAITH",1],["BLADE_OF_TRUTH",2],["BLADE_OF_VALOR",3]]),YE=["HOLY_SPIRIT","HOLY_CIRCLE"];class mB extends Xt{constructor(t){super(t),this.resources.get("OATH_GAUGE").gain(100),this.registerRecurringEvents([{groupedEffects:[{effectName:"CIRCLE_OF_SCORN_DOT",appliedBy:["CIRCLE_OF_SCORN"]}]}])}get statusPropsGenerator(){return new AB(this)}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("FIGHT_OR_FLIGHT")&&t.addBuff(H.FightOrFlight);const o=n.name;this.hasResourceAvailable("DIVINE_MIGHT")&&(o==="HOLY_SPIRIT"||o==="HOLY_CIRCLE")?t.addBuff(H.DivineMight):this.hasResourceAvailable("REQUIESCAT")&&(o==="HOLY_SPIRIT"||o==="HOLY_CIRCLE"||o==="CONFITEOR"||o==="BLADE_OF_FAITH"||o==="BLADE_OF_TRUTH"||o==="BLADE_OF_VALOR")&&t.addBuff(H.Requiescat)}cancelChanneledSkills(){this.tryConsumeResource("PASSAGE_OF_ARMS")}jobSpecificOnAutoAttack(){N.reportAutoTick(this.time,"auto"),this.resources.get("OATH_GAUGE").gain(5)}isSpellInstant(t){return t!=="CLEMENCY"?this.hasResourceAvailable("DIVINE_MIGHT")||this.hasResourceAvailable("REQUIESCAT"):this.hasResourceAvailable("REQUIESCAT")}captureSpellCastTime(t,n){return this.isSpellInstant(t)?0:this.config.adjustedCastTime(n)}tryConsumeRequiescat(t){(YE.includes(t)||Zb.has(t)||t==="CLEMENCY")&&this.tryConsumeResource("REQUIESCAT")}isHolySpiritCircleGoodForReq(){const t=this.resources.get("REQUIESCAT").availableAmount();return t===0||this.hasResourceAvailable("PLD_CONFITEOR_COMBO_TRACKER")||this.config.level>=90?!1:this.config.level>=80?!this.hasResourceAvailable("CONFITEOR_READY")||this.hasResourceAvailable("CONFITEOR_READY")&&t>1:!0}progressComboTracker(t,n,o){const l=this.resources.get(n).maxValue,r=o.get(t)??-1,d=this.resources.get(n).availableAmount();this.tryConsumeResource(n,!0),(r!==l&&r===d||r===0)&&(this.resources.get(n).gain(r+1),this.enqueueResourceDrop(n))}fixPLDPhysicalComboState(t){sR.has(t)?(this.tryConsumeResource("PLD_COMBO_TRACKER",!0),this.progressComboTracker(t,"PLD_AOE_COMBO_TRACKER",sR)):rR.has(t)&&(this.tryConsumeResource("PLD_AOE_COMBO_TRACKER",!0),this.progressComboTracker(t,"PLD_COMBO_TRACKER",rR)),(sR.has(t)||rR.has(t)||t==="SHIELD_BASH")&&this.tryConsumeResource("PLD_CONFITEOR_COMBO_TRACKER",!0)}getDelayedManaFromAction(t,n){this.addEvent(new be("get MP from "+n,this.skillsList.get(n).applicationDelay,()=>{this.resources.get("MANA").gain(t)}))}refreshBuff(t,n){this.addEvent(new be("gain buff",n,()=>{this.resources.get(t).gain(1),this.enqueueResourceDrop(t)}))}}const Gi=(e,t,n)=>{const o=Ue(n.onConfirm,l=>{e!=="SHIELD_LOB"&&e!=="SHIELD_BASH"&&e!=="GORING_BLADE"&&l.fixPLDPhysicalComboState(e)});return na("PLD",e,t,{...n,onConfirm:o,recastTime:l=>l.config.adjustedSksGCD(),jobPotencyModifiers:l=>l.hasResourceAvailable("FIGHT_OR_FLIGHT")?[X.FightOrFlight]:[]})},Ms=(e,t,n)=>{const o=Ue((l,r)=>{l.hasResourceAvailable("DIVINE_MIGHT")&&YE.includes(e)?l.tryConsumeResource("DIVINE_MIGHT"):l.tryConsumeRequiescat(e)},n.onConfirm);return Qn("PLD",e,t,{...n,castTime:l=>l.captureSpellCastTime(e,n.baseCastTime),recastTime:l=>l.config.adjustedGCD(),manaCost:n.baseManaCost??0,potency:n.basePotency,jobPotencyModifiers:l=>{const r=[];return YE.includes(e)&&l.hasResourceAvailable("DIVINE_MIGHT")?n.dmPotency&&r.push(tU(aa(l,n.dmPotency)-aa(l,n.basePotency))):(YE.includes(e)||Zb.has(e))&&l.hasResourceAvailable("REQUIESCAT")&&n.reqPotency&&r.push(eU(aa(l,n.reqPotency)-aa(l,n.basePotency))),e!=="CLEMENCY"&&l.hasResourceAvailable("FIGHT_OR_FLIGHT")&&r.push(X.FightOrFlight),n.jobPotencyModifiers&&r.push(...n.jobPotencyModifiers(l)),r},isInstantFn:l=>l.isSpellInstant(e),onConfirm:o})},ja=(e,t,n,o)=>ot("PLD",e,t,n,{...o,jobPotencyModifiers:l=>{const r=[];return l.hasResourceAvailable("FIGHT_OR_FLIGHT")&&r.push(X.FightOrFlight),r}}),Qb=(e,t,n,o)=>ze("PLD",e,t,n,{...o,rscType:o.rscType,cooldown:o.cooldown,applicationDelay:o.applicationDelay}),$b={newSkill:"ATONEMENT",condition:e=>e.hasResourceAvailable("ATONEMENT_READY")},Jb={newSkill:"SUPPLICATION",condition:e=>e.hasResourceAvailable("SUPPLICATION_READY")},eD={newSkill:"SEPULCHRE",condition:e=>e.hasResourceAvailable("SEPULCHRE_READY")},hS={newSkill:"CONFITEOR",condition:e=>e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").availableAmount()===0},Uu={newSkill:"BLADE_OF_FAITH",condition:e=>e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").availableAmount()===1},ku={newSkill:"BLADE_OF_TRUTH",condition:e=>e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").availableAmount()===2},xu={newSkill:"BLADE_OF_VALOR",condition:e=>e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").availableAmount()===3},VR={newSkill:"BLADE_OF_HONOR",condition:e=>e.hasResourceAvailable("BLADE_OF_HONOR_READY")},RB={newSkill:"IMPERATOR",condition:e=>!e.hasResourceAvailable("BLADE_OF_HONOR_READY")},TB={newSkill:"IRON_WILL",condition:e=>!e.hasResourceAvailable("IRON_WILL")},SB={newSkill:"RELEASE_IRON_WILL",condition:e=>e.hasResourceAvailable("IRON_WILL")};Gi("SHIELD_LOB",15,{potency:100,applicationDelay:.89,startsAuto:!1});Gi("FAST_BLADE",1,{potency:[["NEVER",150],["MELEE_MASTERY_TANK",200],["MELEE_MASTERY_II_TANK",220]],applicationDelay:.62});Gi("RIOT_BLADE",4,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",140],["MELEE_MASTERY_II_TANK",170]],combo:{potency:[["NEVER",260],["MELEE_MASTERY_TANK",300],["MELEE_MASTERY_II_TANK",330]],resource:"PLD_COMBO_TRACKER",resourceValue:1},highlightIf:e=>e.resources.get("PLD_COMBO_TRACKER").availableAmount()===1,applicationDelay:.76,onConfirm:e=>{e.resources.get("PLD_COMBO_TRACKER").availableAmount()===1&&e.getDelayedManaFromAction(1e3,"RIOT_BLADE")}});Gi("ROYAL_AUTHORITY",60,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",140],["MELEE_MASTERY_II_TANK",200]],combo:{potency:[["NEVER",360],["MELEE_MASTERY_TANK",400],["MELEE_MASTERY_II_TANK",460]],resource:"PLD_COMBO_TRACKER",resourceValue:2},highlightIf:e=>e.resources.get("PLD_COMBO_TRACKER").availableAmount()===2,applicationDelay:.62,onConfirm:e=>{e.resources.get("PLD_COMBO_TRACKER").availableAmount()===2&&(e.refreshBuff("DIVINE_MIGHT",0),e.hasTraitUnlocked("SWORD_OATH")&&(e.refreshBuff("ATONEMENT_READY",0),e.tryConsumeResource("SUPPLICATION_READY"),e.tryConsumeResource("SEPULCHRE_READY")))}});Gi("ATONEMENT",76,{replaceIf:[Jb,eD],potency:[["NEVER",360],["MELEE_MASTERY_TANK",400],["MELEE_MASTERY_II_TANK",460]],applicationDelay:1.26,validateAttempt:e=>e.hasResourceAvailable("ATONEMENT_READY"),highlightIf:e=>e.hasResourceAvailable("ATONEMENT_READY"),onConfirm:e=>{e.tryConsumeResource("ATONEMENT_READY"),e.refreshBuff("SUPPLICATION_READY",0),e.getDelayedManaFromAction(400,"ATONEMENT")}});Gi("SUPPLICATION",76,{startOnHotbar:!1,replaceIf:[$b,eD],potency:[["NEVER",380],["MELEE_MASTERY_TANK",420],["MELEE_MASTERY_II_TANK",500]],applicationDelay:1.16,validateAttempt:e=>e.hasResourceAvailable("SUPPLICATION_READY"),highlightIf:e=>e.hasResourceAvailable("SUPPLICATION_READY"),onConfirm:e=>{e.tryConsumeResource("SUPPLICATION_READY"),e.refreshBuff("SEPULCHRE_READY",0),e.getDelayedManaFromAction(400,"SUPPLICATION")}});Gi("SEPULCHRE",76,{startOnHotbar:!1,replaceIf:[$b,Jb],potency:[["NEVER",400],["MELEE_MASTERY_TANK",440],["MELEE_MASTERY_II_TANK",540]],applicationDelay:1.29,validateAttempt:e=>e.hasResourceAvailable("SEPULCHRE_READY"),highlightIf:e=>e.hasResourceAvailable("SEPULCHRE_READY"),onConfirm:e=>{e.tryConsumeResource("SEPULCHRE_READY"),e.getDelayedManaFromAction(400,"SEPULCHRE")}});Gi("TOTAL_ECLIPSE",6,{potency:120,applicationDelay:.76,falloff:0});Gi("PROMINENCE",40,{potency:100,combo:{potency:220,resource:"PLD_AOE_COMBO_TRACKER",resourceValue:1},applicationDelay:.62,falloff:0,highlightIf:e=>e.resources.get("PLD_AOE_COMBO_TRACKER").availableAmount()===1,onConfirm:e=>{e.resources.get("PLD_AOE_COMBO_TRACKER").availableAmount()===1&&e.hasTraitUnlocked("ENHANCED_PROMINENCE")&&(e.refreshBuff("DIVINE_MIGHT",0),e.getDelayedManaFromAction(500,"PROMINENCE"))}});Ms("HOLY_SPIRIT",64,{baseCastTime:1.5,applicationDelay:.76,baseManaCost:1e3,startsAuto:!1,basePotency:[["NEVER",300],["MELEE_MASTERY_TANK",350],["MELEE_MASTERY_II_TANK",400]],reqPotency:[["NEVER",600],["MELEE_MASTERY_TANK",650],["MELEE_MASTERY_II_TANK",700]],dmPotency:[["NEVER",400],["MELEE_MASTERY_TANK",450],["MELEE_MASTERY_II_TANK",500]],highlightIf:e=>e.hasResourceAvailable("DIVINE_MIGHT")||e.isHolySpiritCircleGoodForReq()});Ms("HOLY_CIRCLE",72,{baseCastTime:1.5,applicationDelay:.62,baseManaCost:1e3,basePotency:100,reqPotency:350,dmPotency:250,falloff:0,highlightIf:e=>e.hasResourceAvailable("DIVINE_MIGHT")||e.isHolySpiritCircleGoodForReq()});Gi("GORING_BLADE",54,{applicationDelay:.53,potency:700,validateAttempt:e=>e.hasResourceAvailable("GORING_BLADE_READY"),highlightIf:e=>e.hasResourceAvailable("GORING_BLADE_READY"),onConfirm:e=>{e.tryConsumeResource("GORING_BLADE_READY")}});Ms("CONFITEOR",80,{replaceIf:[Uu,ku,xu],baseCastTime:0,applicationDelay:.62,baseManaCost:1e3,startsAuto:!1,basePotency:[["NEVER",420],["MELEE_MASTERY_II_TANK",500]],reqPotency:[["NEVER",920],["MELEE_MASTERY_II_TANK",1e3]],falloff:.6,validateAttempt:e=>e.hasResourceAvailable("CONFITEOR_READY"),highlightIf:e=>e.hasResourceAvailable("CONFITEOR_READY"),onConfirm:e=>{e.tryConsumeResource("CONFITEOR_READY"),e.tryConsumeResource("PLD_CONFITEOR_COMBO_TRACKER",!0),e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").gain(1),e.enqueueResourceDrop("PLD_CONFITEOR_COMBO_TRACKER")}});Ms("BLADE_OF_FAITH",90,{replaceIf:[hS,ku,xu],startOnHotbar:!1,baseCastTime:0,baseManaCost:1e3,startsAuto:!1,applicationDelay:.62,basePotency:[["NEVER",220],["MELEE_MASTERY_II_TANK",260]],reqPotency:[["NEVER",720],["MELEE_MASTERY_II_TANK",760]],falloff:.6,validateAttempt:e=>Uu.condition(e),highlightIf:e=>Uu.condition(e),onConfirm:e=>{e.tryConsumeResource("PLD_CONFITEOR_COMBO_TRACKER",!0),e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").gain(2),e.enqueueResourceDrop("PLD_CONFITEOR_COMBO_TRACKER")}});Ms("BLADE_OF_TRUTH",90,{replaceIf:[hS,Uu,xu],startOnHotbar:!1,baseCastTime:0,baseManaCost:1e3,applicationDelay:.89,startsAuto:!1,basePotency:[["NEVER",320],["MELEE_MASTERY_II_TANK",380]],reqPotency:[["NEVER",820],["MELEE_MASTERY_II_TANK",880]],falloff:.6,validateAttempt:e=>ku.condition(e),highlightIf:e=>ku.condition(e),onConfirm:e=>{e.tryConsumeResource("PLD_CONFITEOR_COMBO_TRACKER",!0),e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").gain(3),e.enqueueResourceDrop("PLD_CONFITEOR_COMBO_TRACKER")}});Ms("BLADE_OF_VALOR",90,{replaceIf:[hS,Uu,ku],startOnHotbar:!1,baseCastTime:0,baseManaCost:1e3,applicationDelay:.89,startsAuto:!1,basePotency:[["NEVER",420],["MELEE_MASTERY_II_TANK",500]],reqPotency:[["NEVER",920],["MELEE_MASTERY_II_TANK",1e3]],falloff:.6,validateAttempt:e=>xu.condition(e),highlightIf:e=>xu.condition(e),onConfirm:e=>{e.tryConsumeResource("PLD_CONFITEOR_COMBO_TRACKER",!0),e.refreshBuff("BLADE_OF_HONOR_READY",0)}});ja("FIGHT_OR_FLIGHT",2,"cd_FIGHT_OR_FLIGHT",{applicationDelay:.62,cooldown:60,onConfirm:e=>{e.refreshBuff("GORING_BLADE_READY",0),e.refreshBuff("FIGHT_OR_FLIGHT",.62)}});ja("REQUIESCAT",68,"cd_REQUIESCAT",{autoUpgrade:{trait:"REQUIESCAT_MASTERY",otherSkill:"IMPERATOR"},applicationDelay:.62,cooldown:60,potency:320,onConfirm:e=>{e.resources.get("REQUIESCAT").gain(4),e.enqueueResourceDrop("REQUIESCAT",30),e.hasTraitUnlocked("ENHANCED_REQUIESCAT")&&e.refreshBuff("CONFITEOR_READY",0)}});ja("IMPERATOR",96,"cd_IMPERATOR",{autoDowngrade:{trait:"REQUIESCAT_MASTERY",otherSkill:"REQUIESCAT"},replaceIf:[VR],applicationDelay:1.29,cooldown:60,potency:580,falloff:.6,onConfirm:e=>{e.resources.get("REQUIESCAT").gain(4),e.enqueueResourceDrop("REQUIESCAT",30,4),e.hasTraitUnlocked("ENHANCED_REQUIESCAT")&&e.refreshBuff("CONFITEOR_READY",0)}});ja("BLADE_OF_HONOR",100,"cd_BLADE_OF_HONOR",{startOnHotbar:!1,cooldown:1,replaceIf:[RB],validateAttempt:VR.condition,highlightIf:VR.condition,applicationDelay:1.16,potency:1e3,startsAuto:!1,falloff:.5,onConfirm:e=>{e.tryConsumeResource("BLADE_OF_HONOR_READY")}});ja("SPIRITS_WITHIN",30,"cd_SPIRITS_WITHIN",{autoUpgrade:{trait:"SPIRITS_WITHIN_MASTERY",otherSkill:"EXPIACION"},applicationDelay:.89,cooldown:30,potency:270,onConfirm:e=>{e.getDelayedManaFromAction(500,"SPIRITS_WITHIN")}});ja("EXPIACION",86,"cd_EXPIACION",{autoDowngrade:{trait:"SPIRITS_WITHIN_MASTERY",otherSkill:"SPIRITS_WITHIN"},applicationDelay:.36,cooldown:30,potency:450,falloff:.6,onConfirm:e=>{e.getDelayedManaFromAction(500,"EXPIACION")}});ja("CIRCLE_OF_SCORN",50,"cd_CIRCLE_OF_SCORN",{applicationDelay:1.02,cooldown:30,potency:140,falloff:0,onConfirm:(e,t)=>{const n=[];e.hasResourceAvailable("FIGHT_OR_FLIGHT")&&n.push(X.FightOrFlight),e.addDoTPotencies({node:t,effectName:"CIRCLE_OF_SCORN_DOT",skillName:"CIRCLE_OF_SCORN",tickPotency:30,speedStat:"sks",modifiers:n}),e.addEvent(new be("apply CoS dot",1.02,()=>{e.applyDoT("CIRCLE_OF_SCORN_DOT",t)}))}});ja("INTERVENE",66,"cd_INTERVENE",{applicationDelay:.62,cooldown:30,potency:150,maxCharges:2,animationLock:Vt});Ms("CLEMENCY",58,{baseCastTime:1.5,applicationDelay:.62,baseManaCost:2e3,basePotency:0,highlightIf:e=>e.hasResourceAvailable("REQUIESCAT")});ja("SHELTRON",35,"cd_SHELTRON",{autoUpgrade:{trait:"SHELTRON_MASTERY",otherSkill:"HOLY_SHELTRON"},validateAttempt:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,highlightIf:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,applicationDelay:0,cooldown:5,onConfirm:e=>{e.resources.get("OATH_GAUGE").consume(50),e.refreshBuff("SHELTRON",0)}});ja("HOLY_SHELTRON",82,"cd_HOLY_SHELTRON",{autoDowngrade:{trait:"SHELTRON_MASTERY",otherSkill:"SHELTRON"},applicationDelay:0,cooldown:5,validateAttempt:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,highlightIf:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,onConfirm:e=>{e.refreshBuff("HOLY_SHELTRON",0),e.refreshBuff("KNIGHTS_RESOLVE",0),e.refreshBuff("KNIGHTS_BENEDICTION",0),e.resources.get("OATH_GAUGE").consume(50)}});ja("INTERVENTION",62,"cd_INTERVENTION",{applicationDelay:.8,cooldown:10,validateAttempt:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,highlightIf:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,onConfirm:e=>{e.resources.get("OATH_GAUGE").consume(50)}});Qb("HALLOWED_GROUND",50,"cd_HALLOWED_GROUND",{rscType:"HALLOWED_GROUND",applicationDelay:0,cooldown:420});Qb("BULWARK",52,"cd_BULWARK",{rscType:"BULWARK",applicationDelay:0,cooldown:90});ja("SENTINEL",38,"cd_SENTINEL",{autoUpgrade:{trait:"SENTINEL_MASTERY",otherSkill:"GUARDIAN"},applicationDelay:.53,cooldown:120,onConfirm:e=>{e.refreshBuff("SENTINEL",.53)}});ja("GUARDIAN",92,"cd_GUARDIAN",{autoDowngrade:{trait:"SENTINEL_MASTERY",otherSkill:"SENTINEL"},applicationDelay:.53,cooldown:120,onConfirm:e=>{e.refreshBuff("GUARDIAN",.53),e.refreshBuff("GUARDIANS_WILL",.53)}});ja("DIVINE_VEIL",56,"cd_DIVINE_VEIL",{applicationDelay:0,cooldown:90,onConfirm:e=>{e.refreshBuff("DIVINE_VEIL",0)}});ja("PASSAGE_OF_ARMS",70,"cd_PASSAGE_OF_ARMS",{applicationDelay:.62,cooldown:120,onConfirm:e=>{e.refreshBuff("PASSAGE_OF_ARMS",.62)}});ja("COVER",45,"cd_COVER",{applicationDelay:.62,cooldown:120,validateAttempt:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,highlightIf:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,onConfirm:e=>{e.resources.get("OATH_GAUGE").consume(50)}});ja("IRON_WILL",10,"cd_IRON_WILL",{applicationDelay:0,cooldown:2,validateAttempt:e=>!e.hasResourceAvailable("IRON_WILL"),onConfirm:e=>{e.resources.get("IRON_WILL").gain(1)},replaceIf:[SB],secondaryCooldown:{cdName:"cd_RELEASE_IRON_WILL",cooldown:1,maxCharges:1}});ja("RELEASE_IRON_WILL",10,"cd_RELEASE_IRON_WILL",{startOnHotbar:!1,replaceIf:[TB],applicationDelay:0,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("IRON_WILL"),onConfirm:e=>{e.tryConsumeResource("IRON_WILL")},secondaryCooldown:{cdName:"cd_IRON_WILL",cooldown:2,maxCharges:1}});Gi("SHIELD_BASH",10,{potency:100,applicationDelay:.45});Object.keys(dT).forEach(e=>Ft(e,`DRK/${Ge[e].name}.png`));const IB=Object.keys(dT);class _B extends Wt{jobSpecificOtherTargetedBuffViewProps(){return[]}jobSpecificSelfTargetedBuffViewProps(){return IB.map(t=>t==="GRIT"?this.makeCommonTimerless(t):this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){var T,S,I;const n=this.state.resources,o=n.get("DRK_COMBO_TRACKER"),l=n.get("DRK_AOE_COMBO_TRACKER"),r=n.get("BLOOD_GAUGE").availableAmount(),d=n.get("GRIT").availableAmount(),h=((T=n.get("DARKSIDE").pendingChange)==null?void 0:T.timeTillEvent)??0,E=n.get("DARK_ARTS").availableAmount(),A=o.available(1)?(S=o.pendingChange)==null?void 0:S.timeTillEvent:l.available(1)?(I=l.pendingChange)==null?void 0:I.timeTillEvent:void 0;return[{kind:"bar",name:C({en:"Combo Timer",zh:"连击监控"}),color:t.drk.drkComboTimer,progress:A?A/30:0,valueString:(A==null?void 0:A.toFixed(3))??"N/A"},{kind:"counter",name:je("GRIT"),color:t.drk.grit,currentStacks:d,maxStacks:1},{kind:"bar",name:je("DARKSIDE"),color:t.drk.darkside,progress:h?h/60:0,valueString:h.toFixed(3)},{kind:"counter",name:je("DARK_ARTS"),color:t.drk.darkarts,currentStacks:E,maxStacks:1},{kind:"bar",name:je("BLOOD_GAUGE"),color:t.drk.blood,progress:r/100,valueString:r.toFixed(0)}]}}const ca=(e,t,n)=>{Ye("DRK",e,t,n??{})};ca("DARKSIDE",1,{timeout:60});ca("BLOOD_GAUGE",100,{warnOnOvercap:!0});ca("SALTED_EARTH",1,{timeout:15});ca("GRIT",1);ca("SHADOW_WALL",1,{timeout:15});ca("DARK_MIND",1,{timeout:10});ca("LIVING_DEAD",1,{timeout:10});ca("WALKING_DEAD",1,{timeout:10});ca("UNDEAD_REBIRTH",1);ca("DARK_MISSIONARY",1,{timeout:15});ca("DELIRIUM",3,{timeout:15,warnOnTimeout:!0});ca("BLOOD_WEAPON",3,{timeout:15,warnOnTimeout:!0});ca("BLACKEST_NIGHT",1,{timeout:7,warnOnTimeout:!0});ca("SCORN",1,{timeout:30,warnOnTimeout:!0});ca("OBLATION",1,{timeout:10});ca("SHADOWED_VIGIL",1,{timeout:15});ca("VIGILANT",1,{timeout:20});ca("DARK_ARTS",1,{warnOnOvercap:!0});ca("DRK_COMBO_TRACKER",2,{timeout:30});ca("DRK_AOE_COMBO_TRACKER",1,{timeout:30});ca("DRK_DELIRIUM_COMBO_TRACKER",2,{timeout:30});const fS=6;ca("ESTEEM_TRACKER",fS);const gB=6.8,NB=2.18;class pB extends Xt{constructor(t){super(t),this.registerRecurringEvents([{groupedEffects:[{effectName:"SALTED_EARTH",appliedBy:["SALTED_EARTH"],isGroundTargeted:!0}]}],["LIVING_SHADOW"])}get statusPropsGenerator(){return new _B(this)}refreshDarkside(){var t;if(this.hasResourceAvailable("DARKSIDE")){const n=this.resources.get("DARKSIDE"),o=Kt("DRK","DARKSIDE").maxTimeout,l=(((t=n.pendingChange)==null?void 0:t.timeTillEvent)??0)+30;n.overrideTimer(this,Math.min(o,l))}else this.resources.get("DARKSIDE").gain(1),this.enqueueResourceDrop("DARKSIDE",30)}gainBloodGauge(t){this.resources.get("BLOOD_GAUGE").gain(t)}bloodWeaponConfirm(t){this.hasResourceAvailable("BLOOD_WEAPON")&&(this.tryConsumeResource("BLOOD_WEAPON"),this.gainBloodGauge(10),this.addEvent(new be("gain blood weapon mana",t,()=>{this.resources.get("MANA").gain(600)})))}processComboStatus(t){if(["DISESTEEM","UNMEND","BLOODSPILLER","QUIETUS"].includes(t))return;let n=[this.resources.get("DRK_COMBO_TRACKER").availableAmount(),this.resources.get("DRK_AOE_COMBO_TRACKER").availableAmount(),this.resources.get("DRK_DELIRIUM_COMBO_TRACKER").availableAmount()];t==="HARD_SLASH"?n=[1,0,0]:t==="SYPHON_STRIKE"?n=[n[0]===1?2:0,0,0]:t==="SOULEATER"?n=[0,0,0]:t==="IMPALEMENT"?n[2]=0:t==="SCARLET_DELIRIUM"?n[2]=1:t==="COMEUPPANCE"?n[2]=2:t==="TORCLEAVER"?n[2]=0:t==="UNLEASH"?n=[0,1,0]:t==="STALWART_SOUL"?n=[0,0,0]:n=[0,0,0],this.setComboState("DRK_COMBO_TRACKER",n[0]),this.setComboState("DRK_AOE_COMBO_TRACKER",n[1]),this.setComboState("DRK_DELIRIUM_COMBO_TRACKER",n[2])}handleEsteemAttack(){if(!this.hasResourceAvailable("ESTEEM_TRACKER"))return;const t=this.resources.get("ESTEEM_TRACKER").node;t!==void 0&&this.resolveEsteemPotency(t),this.resources.get("ESTEEM_TRACKER").consume(1),this.hasResourceAvailable("ESTEEM_TRACKER")&&this.addEvent(new be("esteem hit",NB,()=>this.handleEsteemAttack()))}resolveEsteemPotency(t){const n=this.resources.get("ESTEEM_TRACKER").availableAmount();if(n===0)return;const o=t.getDotPotencies("ESTEEM_TRACKER")[fS-n];o.modifiers.push(X.DrkPet),this.hasResourceAvailable("TINCTURE")&&o.modifiers.push(X.Tincture),o.snapshotTime=this.getDisplayTime(),N.resolvePotency(o)}}const kl=(e,t,n)=>na("DRK",e,t,{...n,onConfirm:Ue(n.onConfirm,o=>o.bloodWeaponConfirm(n.applicationDelay),o=>o.processComboStatus(e)),recastTime:o=>o.config.adjustedSksGCD(),jobPotencyModifiers:o=>o.hasResourceAvailable("DARKSIDE")?[X.Darkside]:[]}),AS=(e,t,n)=>Qn("DRK",e,t,{...n,onConfirm:Ue(n.onConfirm,o=>o.processComboStatus(e)),recastTime:o=>o.config.adjustedGCD(),jobPotencyModifiers:o=>o.hasResourceAvailable("DARKSIDE")?[X.Darkside]:[]}),gn=(e,t,n,o)=>ot("DRK",e,t,n,{...o,jobPotencyModifiers:l=>l.hasResourceAvailable("DARKSIDE")?[X.Darkside]:[]}),Ls=(e,t,n,o)=>ze("DRK",e,t,n,o);AS("UNMEND",15,{applicationDelay:.98,potency:150,onConfirm:e=>{if(e.hasTraitUnlocked("ENHANCED_UNMEND")){const t=e.cooldowns.get("cd_SHADOWSTRIDE").timeTillNextStackAvailable();e.cooldowns.get("cd_SHADOWSTRIDE").overrideTimeTillNextStack(Math.max(0,t-5))}}});kl("HARD_SLASH",1,{applicationDelay:.58,potency:[["NEVER",150],["MELEE_MASTERY_TANK",180],["MELEE_MASTERY_II_TANK",300]]});kl("SYPHON_STRIKE",2,{applicationDelay:.62,highlightIf:e=>e.hasResourceExactly("DRK_COMBO_TRACKER",1),potency:[["NEVER",100],["MELEE_MASTERY_TANK",120],["MELEE_MASTERY_II_TANK",240]],combo:{potency:[["NEVER",240],["MELEE_MASTERY_TANK",260],["MELEE_MASTERY_II_TANK",380]],resource:"DRK_COMBO_TRACKER",resourceValue:1},onConfirm:e=>{e.hasResourceExactly("DRK_COMBO_TRACKER",1)&&e.addEvent(new be("gain syphon strike mana",.62,()=>{e.resources.get("MANA").gain(600)}))}});kl("SOULEATER",26,{applicationDelay:.62,highlightIf:e=>e.hasResourceExactly("DRK_COMBO_TRACKER",2),potency:[["NEVER",100],["MELEE_MASTERY_TANK",140],["MELEE_MASTERY_II_TANK",260]],combo:{potency:[["NEVER",320],["MELEE_MASTERY_TANK",360],["MELEE_MASTERY_II_TANK",480]],resource:"DRK_COMBO_TRACKER",resourceValue:2},onConfirm:e=>{e.hasResourceAvailable("DRK_COMBO_TRACKER",2)&&e.gainBloodGauge(20)}});AS("UNLEASH",6,{applicationDelay:.71,potency:120,falloff:0});AS("STALWART_SOUL",40,{applicationDelay:.62,highlightIf:e=>e.hasResourceExactly("DRK_AOE_COMBO_TRACKER",1),potency:[["NEVER",100],["MELEE_MASTERY_II_TANK",120]],combo:{potency:[["NEVER",140],["MELEE_MASTERY_II_TANK",160]],resource:"DRK_AOE_COMBO_TRACKER",resourceValue:1},falloff:0,onConfirm:e=>{e.hasResourceExactly("DRK_AOE_COMBO_TRACKER",1)&&(e.gainBloodGauge(20),e.addEvent(new be("gain stalwart soul mana",.62,()=>{e.resources.get("MANA").gain(600)})))}});const lf=e=>{e.tryConsumeResource("DARK_ARTS"),e.refreshDarkside()},sf=e=>e.hasResourceAvailable("DARK_ARTS"),rf=e=>e.hasResourceAvailable("DARK_ARTS")?0:3e3;gn("EDGE_OF_DARKNESS",40,"cd_FLOOD_OF_DARKNESS",{applicationDelay:.62,autoUpgrade:{trait:"DAKRSIDE_MASTERY",otherSkill:"EDGE_OF_SHADOW"},cooldown:1,manaCost:rf,highlightIf:sf,potency:300,onConfirm:lf});gn("EDGE_OF_SHADOW",74,"cd_FLOOD_OF_DARKNESS",{applicationDelay:.62,autoDowngrade:{trait:"DAKRSIDE_MASTERY",otherSkill:"EDGE_OF_DARKNESS"},cooldown:1,manaCost:rf,highlightIf:sf,potency:460,onConfirm:lf});gn("FLOOD_OF_DARKNESS",30,"cd_FLOOD_OF_DARKNESS",{applicationDelay:.62,autoUpgrade:{trait:"DAKRSIDE_MASTERY",otherSkill:"FLOOD_OF_SHADOW"},cooldown:1,manaCost:rf,highlightIf:sf,potency:100,falloff:0,onConfirm:lf});gn("FLOOD_OF_SHADOW",74,"cd_FLOOD_OF_DARKNESS",{applicationDelay:.62,autoDowngrade:{trait:"DAKRSIDE_MASTERY",otherSkill:"FLOOD_OF_DARKNESS"},cooldown:1,manaCost:rf,highlightIf:sf,potency:160,falloff:0,onConfirm:lf});const ph=e=>e.hasResourceAvailable("BLOOD_GAUGE",50)||e.hasResourceAvailable("DELIRIUM"),KE=[{newSkill:"BLOODSPILLER",condition:e=>!e.hasTraitUnlocked("ENHANCED_DELIRIUM")||!e.hasResourceAvailable("DELIRIUM")},{newSkill:"SCARLET_DELIRIUM",condition:e=>e.hasTraitUnlocked("ENHANCED_DELIRIUM")&&e.hasResourceAvailable("DELIRIUM")&&e.hasResourceExactly("DRK_DELIRIUM_COMBO_TRACKER",0)},{newSkill:"COMEUPPANCE",condition:e=>e.hasTraitUnlocked("ENHANCED_DELIRIUM")&&e.hasResourceAvailable("DELIRIUM")&&e.hasResourceExactly("DRK_DELIRIUM_COMBO_TRACKER",1)},{newSkill:"TORCLEAVER",condition:e=>e.hasTraitUnlocked("ENHANCED_DELIRIUM")&&e.hasResourceAvailable("DELIRIUM")&&e.hasResourceExactly("DRK_DELIRIUM_COMBO_TRACKER",2)}];kl("BLOODSPILLER",62,{applicationDelay:.8,validateAttempt:ph,highlightIf:ph,replaceIf:KE,potency:[["NEVER",500],["MELEE_MASTERY_II_TANK",600]],onConfirm:e=>e.tryConsumeResource("DELIRIUM")||e.resources.get("BLOOD_GAUGE").consume(50)});const VE=e=>e.hasTraitUnlocked("ENHANCED_DELIRIUM")&&e.hasResourceAvailable("DELIRIUM");kl("QUIETUS",64,{applicationDelay:.76,validateAttempt:ph,highlightIf:ph,replaceIf:[{newSkill:"IMPALEMENT",condition:VE}],potency:[["NEVER",200],["MELEE_MASTERY_II_TANK",240]],falloff:0,onConfirm:e=>e.tryConsumeResource("DELIRIUM")||e.resources.get("BLOOD_GAUGE").consume(50)});[["SCARLET_DELIRIUM",.62,620],["COMEUPPANCE",.67,720],["TORCLEAVER",.62,820]].forEach((e,t)=>{const[n,o,l]=e;kl(n,96,{startOnHotbar:!1,applicationDelay:o,validateAttempt:KE[t+1].condition,highlightIf:KE[t+1].condition,replaceIf:KE,potency:l,onConfirm:r=>r.tryConsumeResource("DELIRIUM"),onApplication:r=>r.resources.get("MANA").gain(200)})});kl("IMPALEMENT",96,{startOnHotbar:!1,applicationDelay:.98,validateAttempt:VE,highlightIf:VE,replaceIf:[{newSkill:"QUIETUS",condition:e=>!VE(e)}],potency:300,falloff:0,onConfirm:e=>e.tryConsumeResource("DELIRIUM"),onApplication:e=>e.resources.get("MANA").gain(500)});const WR=e=>e.hasResourceAvailable("SCORN");kl("DISESTEEM",100,{startOnHotbar:!1,applicationDelay:1.65,validateAttempt:WR,highlightIf:WR,potency:1e3,falloff:.25,onConfirm:e=>e.tryConsumeResource("SCORN")});gn("DELIRIUM",68,"cd_DELIRIUM",{applicationDelay:0,cooldown:60,onConfirm:e=>{e.gainStatus("DELIRIUM",3),e.gainStatus("BLOOD_WEAPON",3)}});gn("CARVE_AND_SPIT",60,"cd_ABYSSAL_DRAIN",{applicationDelay:1.47,cooldown:60,potency:[["NEVER",510],["MELEE_MASTERY_II_TANK",540]],healingPotency:500,onApplication:e=>e.resources.get("MANA").gain(600)});gn("ABYSSAL_DRAIN",56,"cd_ABYSSAL_DRAIN",{applicationDelay:.98,cooldown:60,potency:240,healingPotency:500,onApplication:e=>e.resources.get("MANA").gain(600)});const tD=e=>e.resources.get("SALTED_EARTH").availableAmountIncludingDisabled()>0;gn("SALTED_EARTH",52,"cd_SALTED_EARTH",{applicationDelay:.76,cooldown:90,replaceIf:[{newSkill:"SALT_AND_DARKNESS",condition:tD}],onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"SALTED_EARTH",skillName:"SALTED_EARTH",tickPotency:50,speedStat:"sks"})},falloff:0,onApplication:(e,t)=>{e.applyDoT("SALTED_EARTH",t),e.gainStatus("SALTED_EARTH")}});gn("SALT_AND_DARKNESS",86,"cd_SALT_AND_DARKNESS",{startOnHotbar:!1,highlightIf:e=>!0,validateAttempt:tD,applicationDelay:.76,cooldown:20,potency:500,falloff:.25});gn("LIVING_SHADOW",80,"cd_LIVING_SHADOW",{applicationDelay:0,replaceIf:[{newSkill:"DISESTEEM",condition:e=>WR(e)}],cooldown:120,onConfirm:(e,t)=>{e.gainStatus("SCORN"),e.resources.get("ESTEEM_TRACKER").gain(fS);const n=e.hasTraitUnlocked("ENHANCED_LIVING_SHADOW")?420:340;[["ABYSSAL_DRAIN_PET",n,0],["SHADOWSTRIDE_PET",0,void 0],e.hasTraitUnlocked("ENHANCED_LIVING_SHADOW_II")?["SHADOWBRINGER_PET",570,.25]:["FLOOD_OF_SHADOW_PET",n,0],["EDGE_OF_SHADOW_PET",n,void 0],["BLOODSPILLER_PET",n,void 0],e.hasTraitUnlocked("ENHANCED_LIVING_SHADOW_III")?["DISESTEEM_PET",620,.25]:["CARVE_AND_SPIT_PET",n,void 0]].forEach(l=>{const[r,d,h]=l;t.addDoTPotency(new ea({config:e.config,sourceTime:e.getDisplayTime(),sourceSkill:r,aspect:Ie.Other,description:"",basePotency:d,snapshotTime:void 0,targetCount:t.targetCount,falloff:h}),"ESTEEM_TRACKER")}),e.resources.get("ESTEEM_TRACKER").node=t,e.addEvent(new be("initial esteem hit",gB,()=>e.handleEsteemAttack()))}});gn("SHADOWBRINGER",90,"cd_SHADOWBRINGER",{applicationDelay:.67,cooldown:60,potency:600,falloff:.25,maxCharges:2,validateAttempt:e=>e.hasResourceAvailable("DARKSIDE")});gn("SHADOWSTRIDE",54,"cd_SHADOWSTRIDE",{applicationDelay:.66,animationLock:Vt,cooldown:30,maxCharges:2});Ls("THE_BLACKEST_NIGHT",70,"cd_THE_BLACKEST_NIGHT",{rscType:"BLACKEST_NIGHT",manaCost:3e3,replaceIf:[{newSkill:"THE_BLACKEST_NIGHT_POP",condition:e=>e.hasResourceAvailable("BLACKEST_NIGHT")}],applicationDelay:.62,cooldown:15});gn("THE_BLACKEST_NIGHT_POP",70,"cd_THE_BLACKEST_NIGHT_POP",{startOnHotbar:!1,highlightIf:e=>!0,applicationDelay:0,animationLock:Sn,cooldown:1,onConfirm:e=>{e.gainStatus("DARK_ARTS"),e.tryConsumeResource("BLACKEST_NIGHT")}});Ls("SHADOW_WALL",38,"cd_SHADOW_WALL",{rscType:"SHADOW_WALL",autoUpgrade:{otherSkill:"SHADOWED_VIGIL",trait:"SHADOW_WALL_MASTERY"},applicationDelay:.62,cooldown:120});Ls("SHADOWED_VIGIL",92,"cd_SHADOW_WALL",{rscType:"SHADOWED_VIGIL",autoDowngrade:{otherSkill:"SHADOW_WALL",trait:"SHADOW_WALL_MASTERY"},applicationDelay:.62,cooldown:120,onApplication:e=>e.gainStatus("VIGILANT")});Ls("DARK_MIND",45,"cd_DARK_MIND",{rscType:"DARK_MIND",applicationDelay:.62,cooldown:60});Ls("LIVING_DEAD",50,"cd_LIVING_DEAD",{rscType:"LIVING_DEAD",applicationDelay:0,cooldown:300});Ls("DARK_MISSIONARY",66,"cd_DARK_MISSIONARY",{rscType:"DARK_MISSIONARY",applicationDelay:.62,cooldown:90});Ls("OBLATION",82,"cd_OBLATION",{rscType:"OBLATION",applicationDelay:0,maxCharges:2,cooldown:60});gn("GRIT",10,"cd_GRIT",{applicationDelay:0,cooldown:2,validateAttempt:e=>!e.hasResourceAvailable("GRIT"),onConfirm:e=>e.resources.get("GRIT").gain(1),replaceIf:[{newSkill:"RELEASE_GRIT",condition:e=>e.hasResourceAvailable("GRIT")}],secondaryCooldown:{cdName:"cd_RELEASE_GRIT",cooldown:1,maxCharges:1}});gn("RELEASE_GRIT",10,"cd_RELEASE_GRIT",{startOnHotbar:!1,replaceIf:[{newSkill:"GRIT",condition:e=>!e.hasResourceAvailable("GRIT")}],applicationDelay:0,cooldown:1,validateAttempt:e=>!e.hasResourceAvailable("GRIT"),onConfirm:e=>e.tryConsumeResource("GRIT"),secondaryCooldown:{cdName:"cd_GRIT",cooldown:2,maxCharges:1}});Object.keys(lT).forEach(e=>Ft(e,`AST/${Ge[e].name}.png`));const aD=["COMBUST_II","COMBUST_III"],CB=Object.keys(lT).filter(e=>!aD.includes(e));class OB extends Wt{jobSpecificOtherTargetedBuffViewProps(){return[...aD.map(t=>this.makeCommonTimer(t))]}jobSpecificSelfTargetedBuffViewProps(){return[...CB.map(t=>this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){return[{kind:"arcana",name:je("ARCANA"),currentArcanaColor:this.state.drawnAstral()?t.ast.astralCard:t.ast.umbralCard,activeSlots:["ARCANA_1","ARCANA_2","ARCANA_3","MINOR_ARCANA"].map(n=>this.state.hasResourceAvailable(n))}]}}const lt=(e,t,n)=>{Ye("AST",e,t,n??{})};lt("ARCANA",1);lt("MINOR_ARCANA",1,{default:1});lt("LIGHTSPEED",1,{timeout:15});lt("THE_BALANCE",1,{timeout:15});lt("THE_ARROW",1,{timeout:15});lt("THE_SPIRE",1,{timeout:30});lt("THE_SPEAR",1,{timeout:15});lt("THE_BOLE",1,{timeout:15});lt("THE_EWER",1,{timeout:15});lt("ASPECTED_BENEFIC",1,{timeout:15});lt("ASPECTED_HELIOS",1,{timeout:15});lt("SYNASTRY",1,{timeout:20});lt("DIVINATION",1,{timeout:20});lt("DIVINING",1,{timeout:30,warnOnTimeout:!0});lt("COLLECTIVE_UNCONSCIOUS",1,{timeout:18});lt("COLLECTIVE_UNCONSCIOUS_MIT",1,{timeout:5});lt("WHEEL_OF_FORTUNE",1,{timeout:15});lt("OPPOSITION",1,{timeout:15});lt("EARTHLY_DOMINANCE",1,{timeout:10});lt("GIANT_DOMINANCE",1,{timeout:10});lt("COMBUST_II",1,{timeout:30});lt("COMBUST_III",1,{timeout:30});lt("INTERSECTION",1,{timeout:30});lt("NEUTRAL_SECT",1,{timeout:20});lt("NEUTRAL_SECT_SHIELD",1,{timeout:30});lt("HOROSCOPE",1,{timeout:10});lt("HOROSCOPE_HELIOS",1,{timeout:30});lt("SUNTOUCHED",1,{timeout:30});lt("EXALTATION",1,{timeout:8});lt("MACROCOSMOS",1,{timeout:15});lt("HELIOS_CONJUNCTION",1,{timeout:15});lt("SUN_SIGN",1,{timeout:15});lt("ARCANA_1",1,{default:1});lt("ARCANA_2",1,{default:1});lt("ARCANA_3",1,{default:1});lt("NEXT_DRAW",1);class bB extends Xt{constructor(t){super(t);const n=this.hasTraitUnlocked("ENHANCED_ESSENTIAL_DIGNITY_II")?3:this.hasTraitUnlocked("ENHANCED_ESSENTIAL_DIGNITY")?2:1,o=this.hasTraitUnlocked("ENHANCED_CELESTIAL_INTERSECTION")?2:1;this.cooldowns.set(new ke("cd_ESSENTIAL_DIGNITY",40,n,n)),this.cooldowns.set(new ke("cd_CELESTIAL_INTERSECTION",30,o,o)),this.cooldowns.set(new ke("cd_SWIFTCAST",this.hasTraitUnlocked("ENHANCED_SWIFTCAST")?40:60,1,1)),this.registerRecurringEvents([{reportName:C({en:"Combust DoT",zh:"焚灼DoT"}),groupedEffects:[{effectName:"COMBUST_II",appliedBy:["COMBUST_II"]},{effectName:"COMBUST_III",appliedBy:["COMBUST_III"]}]},{isHealing:!0,groupedEffects:[{effectName:"WHEEL_OF_FORTUNE",appliedBy:["COLLECTIVE_UNCONSCIOUS"]}]},{isHealing:!0,groupedEffects:[{effectName:"OPPOSITION",appliedBy:["CELESTIAL_OPPOSITION"]}]},{isHealing:!0,groupedEffects:[{effectName:"ASPECTED_BENEFIC",appliedBy:["ASPECTED_BENEFIC"]}]},{isHealing:!0,groupedEffects:[{effectName:"ASPECTED_HELIOS",appliedBy:["ASPECTED_HELIOS"]},{effectName:"HELIOS_CONJUNCTION",appliedBy:["HELIOS_CONJUNCTION"]}]}])}drawnAstral(){return!this.hasResourceAvailable("NEXT_DRAW")}cancelChanneledSkills(){this.tryConsumeResource("COLLECTIVE_UNCONSCIOUS")}jobSpecificAddHealingBuffCovers(t,n){n.cdName==="cd_GCD"&&this.hasResourceAvailable("NEUTRAL_SECT")&&t.addBuff(H.NeutralSect),n.cdName==="cd_GCD"&&!n.aoeHeal&&this.hasResourceAvailable("SYNASTRY")&&t.addBuff(H.Synastry),this.hasResourceAvailable("THE_ARROW")&&t.addBuff(H.TheArrow)}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("DIVINATION")&&t.addBuff(H.Divination)}get statusPropsGenerator(){return new OB(this)}}const Nn=(e,t,n)=>{const o=r=>{if(!n.healingPotency)return[];const d=[];return r.hasResourceAvailable("SYNASTRY")&&!n.aoeHeal&&d.push(X.Synastry),r.hasResourceAvailable("NEUTRAL_SECT")&&d.push(X.NeutralSect),r.hasResourceAvailable("THE_ARROW")&&d.push(X.TheArrow),d},l=n.baseCastTime??0;return Qn("AST",e,t,{...n,jobHealingPotencyModifiers:o,jobPotencyModifiers:n.potency?r=>r.hasResourceAvailable("DIVINATION")?[X.Divination]:[]:void 0,castTime:r=>Math.max(0,r.config.adjustedCastTime(r.hasResourceAvailable("LIGHTSPEED")?l-2.5:l)),recastTime:r=>r.config.adjustedGCD(2.5),isInstantFn:r=>!n.baseCastTime||r.hasResourceAvailable("SWIFTCAST"),onConfirm:Ue(l?r=>r.tryConsumeResource("SWIFTCAST"):void 0,n.onConfirm)})},pn=(e,t,n,o)=>ot("AST",e,t,n,{...o,jobHealingPotencyModifiers:o.healingPotency?l=>{const r=[];return l.hasResourceAvailable("THE_ARROW")&&r.push(X.TheArrow),e==="STELLAR_DETONATION"&&r.push(X.AstPet),r}:void 0,jobPotencyModifiers:o.potency?l=>{const r=[];return l.hasResourceAvailable("DIVINATION")&&r.push(X.Divination),e==="STELLAR_DETONATION"&&r.push(X.AstPet),r}:void 0}),Hs=(e,t,n,o)=>ze("AST",e,t,n,{...o,jobHealingPotencyModifiers:l=>o.healingPotency&&l.hasResourceAvailable("THE_ARROW")?[X.TheArrow]:[],jobPotencyModifiers:o.potency?l=>l.hasResourceAvailable("DIVINATION")?[X.Divination]:[]:void 0});Nn("MALEFIC_III",64,{autoUpgrade:{otherSkill:"MALEFIC_IV",trait:"MALEFIC_MASTERY_III"},baseCastTime:1.5,applicationDelay:1.07,potency:190,manaCost:400});Nn("MALEFIC_IV",72,{autoDowngrade:{otherSkill:"MALEFIC_III",trait:"MALEFIC_MASTERY_III"},autoUpgrade:{otherSkill:"FALL_MALEFIC",trait:"MALEFIC_MASTERY_IV"},baseCastTime:1.5,applicationDelay:1.07,potency:230,manaCost:400});Nn("FALL_MALEFIC",82,{autoDowngrade:{otherSkill:"MALEFIC_IV",trait:"MALEFIC_MASTERY_IV"},baseCastTime:1.5,applicationDelay:1.07,potency:[["NEVER",250],["MAGICK_MASTERY_HEALER",270]],manaCost:400});Nn("COMBUST_II",46,{autoUpgrade:{otherSkill:"COMBUST_III",trait:"COMBUST_MASTERY_II"},applicationDelay:.62,manaCost:400,drawsAggro:!0,onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"COMBUST_II",skillName:"COMBUST_II",tickPotency:60,speedStat:"sps"})},onApplication:(e,t)=>e.applyDoT("COMBUST_II",t)});Nn("COMBUST_III",72,{autoDowngrade:{otherSkill:"COMBUST_II",trait:"COMBUST_MASTERY_II"},applicationDelay:.62,manaCost:400,drawsAggro:!0,onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"COMBUST_III",skillName:"COMBUST_III",tickPotency:e.hasTraitUnlocked("MAGICK_MASTERY_HEALER")?70:65,speedStat:"sps"})},onApplication:(e,t)=>e.applyDoT("COMBUST_III",t)});Nn("GRAVITY",45,{autoUpgrade:{otherSkill:"GRAVITY_II",trait:"GRAVITY_MASTERY"},baseCastTime:1.5,applicationDelay:1.16,potency:120,falloff:0,manaCost:400});Nn("GRAVITY_II",82,{autoDowngrade:{otherSkill:"GRAVITY",trait:"GRAVITY_MASTERY"},baseCastTime:1.5,applicationDelay:1.16,potency:[["NEVER",130],["MAGICK_MASTERY_HEALER",140]],falloff:0,manaCost:400});Nn("MACROCOSMOS",90,{applicationDelay:.75,secondaryCooldown:{cdName:"cd_MACROCOSMOS",cooldown:180,maxCharges:1},potency:[["NEVER",250],["MAGICK_MASTERY_HEALER",270]],falloff:.4,manaCost:600,replaceIf:[{newSkill:"MICROCOSMOS",condition:e=>e.hasResourceAvailable("MACROCOSMOS")}],onConfirm:e=>e.gainStatus("MACROCOSMOS")});pn("MICROCOSMOS",90,"cd_MICROCOSMOS",{startOnHotbar:!1,applicationDelay:.045,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("MACROCOSMOS"),onConfirm:e=>e.tryConsumeResource("MACROCOSMOS")});Nn("ASPECTED_BENEFIC",34,{applicationDelay:.98,healingPotency:[["NEVER",200],["ENHANCED_HEALING_MAGIC",250]],manaCost:400,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"ASPECTED_BENEFIC",effectName:"ASPECTED_BENEFIC",speedStat:"sps",tickPotency:e.hasTraitUnlocked("ENHANCED_HEALING_MAGIC")?250:200}),e.hasResourceAvailable("NEUTRAL_SECT")&&e.gainStatus("NEUTRAL_SECT_SHIELD")},onApplication:(e,t)=>{e.applyHoT("ASPECTED_BENEFIC",t),e.gainStatus("ASPECTED_BENEFIC")}});Nn("BENEFIC",2,{baseCastTime:1.5,applicationDelay:.98,healingPotency:[["NEVER",450],["ENHANCED_HEALING_MAGIC",500]],manaCost:400});Nn("BENEFIC_II",26,{baseCastTime:1.5,applicationDelay:1.07,healingPotency:[["NEVER",700],["ENHANCED_HEALING_MAGIC",800]],manaCost:700});Nn("ASPECTED_HELIOS",40,{autoUpgrade:{otherSkill:"HELIOS_CONJUNCTION",trait:"ASPECTED_HELIOS_MASTERY"},baseCastTime:1.5,applicationDelay:1.07,healingPotency:[["NEVER",200],["ENHANCED_HEALING_MAGIC",250]],aoeHeal:!0,manaCost:800,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"ASPECTED_HELIOS",effectName:"ASPECTED_HELIOS",speedStat:"sps",tickPotency:e.hasTraitUnlocked("ENHANCED_HEALING_MAGIC")?150:100}),e.tryConsumeResource("HOROSCOPE")&&e.gainStatus("HOROSCOPE_HELIOS"),e.hasResourceAvailable("NEUTRAL_SECT")&&e.gainStatus("NEUTRAL_SECT_SHIELD")},onApplication:(e,t)=>{e.applyHoT("ASPECTED_HELIOS",t),e.gainStatus("ASPECTED_HELIOS")}});Nn("HELIOS_CONJUNCTION",96,{autoDowngrade:{otherSkill:"ASPECTED_HELIOS",trait:"ASPECTED_HELIOS_MASTERY"},baseCastTime:1.5,applicationDelay:1.07,healingPotency:250,aoeHeal:!0,manaCost:800,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"HELIOS_CONJUNCTION",effectName:"HELIOS_CONJUNCTION",speedStat:"sps",tickPotency:175}),e.tryConsumeResource("HOROSCOPE")&&e.gainStatus("HOROSCOPE_HELIOS"),e.hasResourceAvailable("NEUTRAL_SECT")&&e.gainStatus("NEUTRAL_SECT_SHIELD")},onApplication:(e,t)=>{e.applyHoT("HELIOS_CONJUNCTION",t),e.gainStatus("HELIOS_CONJUNCTION")}});Nn("HELIOS",10,{baseCastTime:1.5,applicationDelay:1.07,healingPotency:[["NEVER",300],["ENHANCED_HEALING_MAGIC",400]],aoeHeal:!0,manaCost:700,onConfirm:e=>{e.tryConsumeResource("HOROSCOPE")&&e.gainStatus("HOROSCOPE_HELIOS")}});Nn("ASCEND",12,{baseCastTime:8,applicationDelay:1.07,manaCost:2400});const Zu=e=>e.drawnAstral(),Qu=e=>!e.drawnAstral(),nD=e=>{(e.hasResourceAvailable("ARCANA_1")||e.drawnAstral()&&e.hasResourceAvailable("MINOR_ARCANA"))&&N.reportWarning({kind:"custom",en:"damage card overwritten!",zh:"伤害卡被覆盖！"}),e.resources.get("NEXT_DRAW").gainWrapping(1),["MINOR_ARCANA","ARCANA_1","ARCANA_2","ARCANA_3"].forEach(t=>e.resources.get(t).gain(1))},iD=e=>e.resources.get("MANA").gain(2e3);pn("ASTRAL_DRAW",30,"cd_ASTRAL_DRAW",{replaceIf:[{newSkill:"UMBRAL_DRAW",condition:Zu}],applicationDelay:0,cooldown:55,validateAttempt:Qu,onConfirm:nD,onApplication:iD});pn("UMBRAL_DRAW",30,"cd_ASTRAL_DRAW",{startOnHotbar:!1,replaceIf:[{newSkill:"ASTRAL_DRAW",condition:Qu}],applicationDelay:0,cooldown:55,validateAttempt:Zu,onConfirm:nD,onApplication:iD});const mS=(e,t,n)=>{console.assert(n.length===3);const o=[{newSkill:n[0],condition:l=>!l.hasResourceAvailable(t)},{newSkill:n[1],condition:l=>Zu(l)&&l.hasResourceAvailable(t)},{newSkill:n[2],condition:l=>Qu(l)&&l.hasResourceAvailable(t)}];o.forEach(({newSkill:l,condition:r},d)=>{const h=o.slice();h.splice(d,1),pn(l,30,e,{startOnHotbar:d===0,replaceIf:h,applicationDelay:.62,cooldown:1,validateAttempt:d===0?()=>!1:r,onConfirm:d!==0?E=>E.tryConsumeResource(t):void 0,onApplication:d!==0?E=>E.gainStatus(l):void 0})})};mS("cd_PLAY_I","ARCANA_1",["PLAY_I","THE_BALANCE","THE_SPEAR"]);mS("cd_PLAY_II","ARCANA_2",["PLAY_II","THE_ARROW","THE_BOLE"]);mS("cd_PLAY_III","ARCANA_3",["PLAY_III","THE_SPIRE","THE_EWER"]);pn("MINOR_ARCANA",70,"cd_MINOR_ARCANA",{applicationDelay:0,replaceIf:[{newSkill:"LORD_OF_CROWNS",condition:e=>Zu(e)&&e.hasResourceAvailable("MINOR_ARCANA")},{newSkill:"LADY_OF_CROWNS",condition:e=>Qu(e)&&e.hasResourceAvailable("MINOR_ARCANA")}],cooldown:1,validateAttempt:()=>!1});pn("LORD_OF_CROWNS",70,"cd_MINOR_ARCANA",{startOnHotbar:!1,replaceIf:[{newSkill:"MINOR_ARCANA",condition:e=>!e.hasResourceAvailable("MINOR_ARCANA")},{newSkill:"LADY_OF_CROWNS",condition:e=>Qu(e)&&e.hasResourceAvailable("MINOR_ARCANA")}],applicationDelay:.62,cooldown:1,potency:400,falloff:0,onConfirm:e=>e.tryConsumeResource("MINOR_ARCANA")});pn("LADY_OF_CROWNS",70,"cd_MINOR_ARCANA",{startOnHotbar:!1,replaceIf:[{newSkill:"MINOR_ARCANA",condition:e=>!e.hasResourceAvailable("MINOR_ARCANA")},{newSkill:"LORD_OF_CROWNS",condition:e=>Zu(e)&&e.hasResourceAvailable("MINOR_ARCANA")}],applicationDelay:.62,cooldown:1,healingPotency:400,aoeHeal:!0,onConfirm:e=>e.tryConsumeResource("MINOR_ARCANA")});Hs("LIGHTSPEED",6,"cd_LIGHTSPEED",{rscType:"LIGHTSPEED",applicationDelay:0,cooldown:60,maxCharges:2});const oD=437,lD=1015;pn("EARTHLY_STAR",62,"cd_EARTHLY_STAR",{applicationDelay:0,cooldown:60,falloff:0,replaceIf:[{newSkill:"STELLAR_DETONATION",condition:e=>e.hasResourceAvailable("EARTHLY_DOMINANCE")||e.hasResourceAvailable("GIANT_DOMINANCE")}],onConfirm:(e,t)=>{e.gainStatus("EARTHLY_DOMINANCE"),e.resources.addResourceEvent({rscType:"EARTHLY_DOMINANCE",name:"expand earthly star",delay:10,fnOnRsc:()=>{e.gainStatus("GIANT_DOMINANCE"),e.resources.addResourceEvent({rscType:"GIANT_DOMINANCE",name:"auto-detonate earthly star",delay:10,fnOnRsc:()=>{const n=[],o=new ea({config:e.config,sourceTime:e.getDisplayTime(),sourceSkill:"STELLAR_DETONATION",aspect:Ie.Other,basePotency:oD,snapshotTime:e.getDisplayTime(),description:"",targetCount:t.targetCount,falloff:0});e.hasResourceAvailable("TINCTURE")&&n.push(X.Tincture),e.hasResourceAvailable("DIVINATION")&&n.push(X.Divination),o.modifiers=n,t.addPotency(o);const l=new ea({config:e.config,sourceTime:e.getDisplayTime(),sourceSkill:"STELLAR_DETONATION",aspect:Ie.Other,basePotency:lD,snapshotTime:e.getDisplayTime(),description:"",targetCount:t.healTargetCount,falloff:0});e.hasResourceAvailable("THE_ARROW"),t.addHealingPotency(l),N.resolvePotency(o),N.resolveHealingPotency(l)}})}})}});pn("STELLAR_DETONATION",62,"cd_STELLAR_DETONATION",{startOnHotbar:!1,applicationDelay:.53,cooldown:3,potency:e=>e.hasResourceAvailable("GIANT_DOMINANCE")?oD:290,falloff:0,healingPotency:e=>e.hasResourceAvailable("GIANT_DOMINANCE")?lD:762,aoeHeal:!0,onConfirm:e=>e.tryConsumeResource("EARTHLY_DOMINANCE")&&e.tryConsumeResource("GIANT_DOMINANCE")});Hs("DIVINATION",50,"cd_DIVINATION",{rscType:"DIVINATION",applicationDelay:.62,cooldown:120,replaceIf:[{newSkill:"ORACLE",condition:e=>e.hasResourceAvailable("DIVINING")}],onConfirm:e=>e.gainStatus("DIVINING")});pn("ORACLE",92,"cd_ORACLE",{startOnHotbar:!1,applicationDelay:1.74,cooldown:1,highlightIf:e=>e.hasResourceAvailable("DIVINING"),validateAttempt:e=>e.hasResourceAvailable("DIVINING"),onConfirm:e=>e.tryConsumeResource("DIVINING")});pn("ESSENTIAL_DIGNITY",15,"cd_ESSENTIAL_DIGNITY",{applicationDelay:.62,cooldown:40,maxCharges:3,healingPotency:400});Hs("SYNASTRY",50,"cd_SYNASTRY",{rscType:"SYNASTRY",applicationDelay:.62,cooldown:120});Hs("EXALTATION",86,"cd_EXALTATION",{rscType:"EXALTATION",applicationDelay:.71,cooldown:60});pn("COLLECTIVE_UNCONSCIOUS",58,"cd_COLLECTIVE_UNCONSCIOUS",{applicationDelay:.42,cooldown:60,onConfirm:(e,t)=>{e.gainStatus("COLLECTIVE_UNCONSCIOUS"),e.gainStatus("COLLECTIVE_UNCONSCIOUS_MIT"),e.addHoTPotencies({node:t,skillName:"COLLECTIVE_UNCONSCIOUS",effectName:"WHEEL_OF_FORTUNE",speedStat:"sps",tickPotency:100})},onApplication:e=>e.gainStatus("WHEEL_OF_FORTUNE")});pn("CELESTIAL_OPPOSITION",60,"cd_CELESTIAL_OPPOSITION",{applicationDelay:1.07,cooldown:60,healingPotency:200,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"CELESTIAL_OPPOSITION",effectName:"OPPOSITION",speedStat:"sps",tickPotency:100})},onApplication:e=>e.gainStatus("OPPOSITION")});pn("CELESTIAL_INTERSECTION",74,"cd_CELESTIAL_INTERSECTION",{applicationDelay:0,cooldown:30,maxCharges:1,healingPotency:200,aoeHeal:!0});Hs("HOROSCOPE",76,"cd_HOROSCOPE",{rscType:"HOROSCOPE",applicationDelay:0,cooldown:60,replaceIf:[{newSkill:"HOROSCOPE_RECAST",condition:e=>e.hasResourceAvailable("HOROSCOPE_HELIOS")||e.hasResourceAvailable("HOROSCOPE")}]});pn("HOROSCOPE_RECAST",76,"cd_HOROSCOPE_RECAST",{startOnHotbar:!1,applicationDelay:.62,cooldown:1,healingPotency:e=>e.hasResourceAvailable("HOROSCOPE_HELIOS")?400:200,aoeHeal:!0,validateAttempt:e=>e.hasResourceAvailable("HOROSCOPE_HELIOS")||e.hasResourceAvailable("HOROSCOPE"),onConfirm:e=>e.tryConsumeResource("HOROSCOPE_HELIOS")||e.tryConsumeResource("HOROSCOPE")});Hs("NEUTRAL_SECT",80,"cd_NEUTRAL_SECT",{rscType:"NEUTRAL_SECT",applicationDelay:.62,cooldown:120,replaceIf:[{newSkill:"SUN_SIGN",condition:e=>e.hasResourceAvailable("SUNTOUCHED")}],onConfirm:e=>e.gainStatus("SUNTOUCHED")});Hs("SUN_SIGN",100,"cd_SUN_SIGN",{startOnHotbar:!1,rscType:"SUN_SIGN",applicationDelay:1.47,cooldown:1,highlightIf:e=>e.hasResourceAvailable("SUNTOUCHED"),validateAttempt:e=>e.hasResourceAvailable("SUNTOUCHED"),onConfirm:e=>e.tryConsumeResource("SUNTOUCHED")});Object.keys(_T).forEach(e=>Ft(e,`SCH/${Ge[e].name}.png`));const sD=["BIO_II","BIOLYSIS","CHAIN_STRATAGEM","BANEFUL_IMPACTION"],DB=Object.keys(_T).filter(e=>!sD.includes(e));class yB extends Wt{jobSpecificOtherTargetedBuffViewProps(){return[...sD.map(t=>this.makeCommonTimer(t))]}jobSpecificSelfTargetedBuffViewProps(){return[...DB.map(t=>t==="FEY_UNION"?this.makeCommonTimerless(t):t==="SACRED_SOIL_ZONE"?this.makeToggleableTimer(t):this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){var d;const n=this.state.resources.get("SERAPH_SUMMON_TIMER"),o=n.available(1)?(d=n.pendingChange)==null?void 0:d.timeTillEvent:void 0,l=this.state.resources.get("FAERIE_GAUGE").availableAmount(),r=this.state.resources.get("AETHERFLOW").availableAmount();return[{kind:"text",name:je("SERAPH_SUMMON_TIMER"),text:(o==null?void 0:o.toFixed(3))??"N/A",color:o?t.sch.seraph:void 0},{kind:"bar",name:je("FAERIE_GAUGE"),color:t.sch.faerieGauge,progress:l/100,valueString:l.toFixed(0)},{kind:"counter",name:je("AETHERFLOW"),color:t.sch.aetherflow,currentStacks:r,maxStacks:3,valueString:r.toFixed(0)}]}}const Ht=(e,t,n)=>{Ye("SCH",e,t,n??{})};Ht("AETHERFLOW",3,{warnOnOvercap:!0});Ht("FAERIE_GAUGE",100);Ht("BIO_II",1,{timeout:30});Ht("CATALYZE",1,{timeout:30});Ht("GALVANIZE",1,{timeout:30});Ht("WHISPERING_DAWN",1,{timeout:21});Ht("ANGELS_WHISPER",1,{timeout:21});Ht("FEY_ILLUMINATION",1,{timeout:20});Ht("SERAPHIC_ILLUMINATION",1,{timeout:20});Ht("SACRED_SOIL_ZONE",1,{timeout:30});Ht("SACRED_SOIL_MIT",1,{timeout:4.96});Ht("EMERGENCY_TACTICS",1,{timeout:15});Ht("DISSIPATION",1,{timeout:30});Ht("EXCOGITATION",1,{timeout:45});Ht("CHAIN_STRATAGEM",1,{timeout:20});Ht("IMPACT_IMMINENT",1,{timeout:30,warnOnTimeout:!0});Ht("BIOLYSIS",1,{timeout:30});Ht("RECITATION",1,{timeout:15});Ht("FEY_UNION",1);Ht("SERAPHIC_VEIL",1,{timeout:30});Ht("PROTRACTION",1,{timeout:10});Ht("EXPEDIENCE",1,{timeout:10});Ht("DESPERATE_MEASURES",1,{timeout:20});Ht("BANEFUL_IMPACTION",1,{timeout:15});Ht("SERAPHISM",1,{timeout:20});Ht("SERAPHISM_REGEN",1,{timeout:5});Ht("SERAPH_SUMMON_TIMER",1,{timeout:22});const $u=.09,Ju=new Map([["FEY_BLESSING",.667],["WHISPERING_DAWN",1.156],["CONSOLATION",.889],["ANGELS_WHISPER",1.029],["AETHERPACT",.668],["FEY_ILLUMINATION",1.205]]);class vB extends Xt{constructor(n){super(n);Z(this,"nextEstimatedPetApplication");this.nextEstimatedPetApplication=void 0;const o=this.hasTraitUnlocked("ENHANCED_DEPLOYMENT_TACTICS")?90:120,l=this.hasTraitUnlocked("ENHANCED_RECITATION")?60:90;this.cooldowns.set(new ke("cd_DEPLOYMENT_TACTICS",o,1,1)),this.cooldowns.set(new ke("cd_RECITATION",l,1,1)),this.cooldowns.set(new ke("cd_SWIFTCAST",this.hasTraitUnlocked("ENHANCED_SWIFTCAST")?40:60,1,1)),this.registerRecurringEvents([{reportName:C({en:"Bio/Biolysis DoT",zh:"毒DoT"}),groupedEffects:[{effectName:"BIO_II",appliedBy:["BIO_II"]},{effectName:"BIOLYSIS",appliedBy:["BIOLYSIS"]}]},{groupedEffects:[{effectName:"BANEFUL_IMPACTION",appliedBy:["BANEFUL_IMPACTION"]}]},{isHealing:!0,groupedEffects:[{effectName:"WHISPERING_DAWN",appliedBy:["WHISPERING_DAWN"]},{effectName:"ANGELS_WHISPER",appliedBy:["WHISPERING_DAWN"]}]},{isHealing:!0,groupedEffects:[{effectName:"SACRED_SOIL_MIT",appliedBy:["SACRED_SOIL"],isGroundTargeted:!0}]},{isHealing:!0,groupedEffects:[{effectName:"SERAPHISM_REGEN",appliedBy:["SERAPHISM"]}]}])}jobSpecificAddHealingBuffCovers(n,o){o.cdName==="cd_GCD"&&((this.hasResourceAvailable("FEY_ILLUMINATION")||this.hasResourceAvailable("SERAPHIC_ILLUMINATION"))&&n.addBuff(H.FeyIllumination),this.hasResourceAvailable("DISSIPATION")&&n.addBuff(H.Dissipation)),this.hasResourceAvailable("PROTRACTION")&&n.addBuff(H.Protraction);const l=["ADLOQUIUM","SUCCOR","CONCITATION","EXCOGITATION","INDOMITABILITY"];this.hasResourceAvailable("RECITATION")&&l.includes(o.name)&&n.addBuff(H.Recitation)}jobSpecificAddDamageBuffCovers(n,o){this.hasResourceAvailable("CHAIN_STRATAGEM")&&n.addBuff(H.ChainStratagem)}jobSpecificRegisterRecurringEvents(){const n=()=>new be("sch special hot ticks",3,()=>{this.hasResourceAvailable("FEY_UNION")&&this.resources.get("FAERIE_GAUGE").available(10)&&this.resources.get("FAERIE_GAUGE").consume(10),this.resources.get("FAERIE_GAUGE").available(10)||this.tryConsumeResource("FEY_UNION"),this.hasResourceAvailable("SACRED_SOIL_ZONE")&&this.gainStatus("SACRED_SOIL_MIT"),this.hasResourceAvailable("SERAPHISM")&&this.gainStatus("SERAPHISM_REGEN"),this.addEvent(n())});this.addEvent(new be("begin sch special hot ticks",this.hotTickOffset,()=>this.addEvent(n())))}makePetPotency(n,o,l,r){const d=new ea({config:this.config,sourceTime:l,sourceSkill:o,aspect:Ie.Other,basePotency:r,snapshotTime:this.getDisplayTime(),description:"",targetCount:n,falloff:void 0}),h=[X.SchPet];return d.modifiers=h,d}queuePetAction(n,o,l,r,d,h){var R;const E=this.getDisplayTime();this.nextEstimatedPetApplication=E+r+d;const A=(R=this.resources.get("SERAPH_SUMMON_TIMER").pendingChange)==null?void 0:R.timeTillEvent;A!==void 0&&this.nextEstimatedPetApplication>A+E&&N.reportWarning({kind:"custom",en:`${xi(o)} is likely to ghost when seraph leaves!`}),this.addEvent(new be(l+" pet snapshot",r,()=>{const T=h(this);this.addEvent(new be(l+" application",d,()=>{T(this)}))}))}warnLastPetGhost(){this.nextEstimatedPetApplication!==void 0&&this.nextEstimatedPetApplication>this.getDisplayTime()&&N.reportWarning({kind:"custom",en:"previous pet command is likely to ghost!"})}hasRealFairy(){return!this.hasResourceAvailable("DISSIPATION")&&!this.hasResourceAvailable("SERAPH_SUMMON_TIMER")}maybeChainModifier(){return this.hasResourceAvailable("CHAIN_STRATAGEM")?[X.ChainStrat]:[]}maybeGainFaerieGauge(){this.hasResourceAvailable("DISSIPATION")||this.resources.get("FAERIE_GAUGE").gain(10)}addHealingMagicPotencyModifiers(n){(this.hasResourceAvailable("FEY_ILLUMINATION")||this.hasResourceAvailable("SERAPHIC_ILLUMINATION"))&&n.push(X.FeyIllum),this.hasResourceAvailable("DISSIPATION")&&n.push(X.Dissipation)}addHealingActionPotencyModifiers(n){this.hasResourceAvailable("PROTRACTION")&&n.push(X.Protraction)}get statusPropsGenerator(){return new yB(this)}}const Cn=(e,t,n)=>Qn("SCH",e,t,{...n,castTime:l=>l.config.adjustedCastTime(n.baseCastTime??0),recastTime:l=>l.config.adjustedGCD(2.5),isInstantFn:l=>!n.baseCastTime||l.hasResourceAvailable("SWIFTCAST"),jobPotencyModifiers:l=>l.maybeChainModifier(),jobHealingPotencyModifiers:l=>{if(!n.healingPotency)return[];const r=[];return l.addHealingMagicPotencyModifiers(r),l.addHealingActionPotencyModifiers(r),l.hasResourceAvailable("RECITATION")&&e!=="ACCESSION"&&e!=="MANIFESTATION"&&r.push(X.AutoCrit),r},onConfirm:Ue(n.baseCastTime?l=>l.tryConsumeResource("SWIFTCAST"):void 0,n.onConfirm)}),wn=(e,t,n,o)=>ot("SCH",e,t,n,{...o,jobPotencyModifiers:r=>r.maybeChainModifier(),jobHealingPotencyModifiers:r=>{if(!o.healingPotency)return[];const d=[];return r.addHealingActionPotencyModifiers(d),r.hasResourceAvailable("RECITATION")&&(e==="INDOMITABILITY"||e==="EXCOGITATION")&&d.push(X.AutoCrit),d}}),xl=(e,t,n,o)=>ze("SCH",e,t,n,o),rD=[{newSkill:"ADLOQUIUM",condition:e=>!e.hasResourceAvailable("SERAPHISM")},{newSkill:"MANIFESTATION",condition:e=>e.hasResourceAvailable("SERAPHISM")}],cD=[{newSkill:"CONCITATION",condition:e=>!e.hasResourceAvailable("SERAPHISM")},{newSkill:"ACCESSION",condition:e=>e.hasResourceAvailable("SERAPHISM")}];Cn("BROIL_II",64,{autoUpgrade:{otherSkill:"BROIL_III",trait:"BROIL_MASTERY_III"},applicationDelay:.8,baseCastTime:1.5,manaCost:400,potency:240});Cn("BROIL_III",72,{autoDowngrade:{otherSkill:"BROIL_II",trait:"BROIL_MASTERY_III"},autoUpgrade:{otherSkill:"BROIL_IV",trait:"BROIL_MASTERY_IV"},applicationDelay:.8,baseCastTime:1.5,manaCost:400,potency:255});Cn("BROIL_IV",82,{autoDowngrade:{otherSkill:"BROIL_III",trait:"BROIL_MASTERY_IV"},applicationDelay:.8,baseCastTime:1.5,manaCost:400,potency:[["NEVER",295],["TACTICIANS_MASTERY",320]]});Cn("BIO_II",26,{autoUpgrade:{otherSkill:"BIOLYSIS",trait:"CORRUPTION_MASTERY_II"},applicationDelay:1.15,baseCastTime:0,manaCost:300,drawsAggro:!0,onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"BIO_II",skillName:"BIO_II",tickPotency:40,speedStat:"sps",modifiers:e.maybeChainModifier()})},onApplication:(e,t)=>e.applyDoT("BIO_II",t)});Cn("BIOLYSIS",72,{autoDowngrade:{otherSkill:"BIO_II",trait:"CORRUPTION_MASTERY_II"},applicationDelay:.67,baseCastTime:0,manaCost:300,drawsAggro:!0,onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"BIOLYSIS",skillName:"BIOLYSIS",tickPotency:e.hasTraitUnlocked("TACTICIANS_MASTERY")?80:70,speedStat:"sps",modifiers:e.maybeChainModifier()})},onApplication:(e,t)=>e.applyDoT("BIOLYSIS",t)});Cn("RUIN_II",38,{applicationDelay:.94,potency:[["NEVER",200],["BROIL_MASTERY_IV",220]],baseCastTime:0,manaCost:400});Cn("ART_OF_WAR",46,{autoUpgrade:{otherSkill:"ART_OF_WAR_II",trait:"ART_OF_WAR_MASTERY"},applicationDelay:.67,baseCastTime:0,manaCost:400,potency:165,falloff:0});Cn("ART_OF_WAR_II",82,{autoDowngrade:{otherSkill:"ART_OF_WAR",trait:"ART_OF_WAR_MASTERY"},applicationDelay:.67,baseCastTime:0,manaCost:400,potency:180,falloff:0});xl("CHAIN_STRATAGEM",66,"cd_CHAIN_STRATAGEM",{replaceIf:[{newSkill:"BANEFUL_IMPACTION",condition:e=>e.hasResourceAvailable("IMPACT_IMMINENT")}],rscType:"CHAIN_STRATAGEM",applicationDelay:.8,cooldown:120,onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_CHAIN_STRATAGEM")&&e.gainStatus("IMPACT_IMMINENT")}});wn("BANEFUL_IMPACTION",92,"cd_BANEFUL_IMPACTION",{startOnHotbar:!1,applicationDelay:1.29,cooldown:1,falloff:0,highlightIf:e=>e.hasResourceAvailable("IMPACT_IMMINENT"),validateAttempt:e=>e.hasResourceAvailable("IMPACT_IMMINENT"),onConfirm:(e,t)=>{e.tryConsumeResource("IMPACT_IMMINENT"),e.addDoTPotencies({node:t,effectName:"BANEFUL_IMPACTION",skillName:"BANEFUL_IMPACTION",tickPotency:140,speedStat:"sps",modifiers:e.maybeChainModifier()})},onApplication:(e,t)=>e.applyDoT("BANEFUL_IMPACTION",t)});wn("ENERGY_DRAIN",45,"cd_ENERGY_DRAIN",{applicationDelay:1.07,cooldown:1,potency:100,validateAttempt:e=>e.hasResourceAvailable("AETHERFLOW"),onConfirm:e=>{e.maybeGainFaerieGauge(),e.tryConsumeResource("AETHERFLOW")}});Cn("ADLOQUIUM",30,{replaceIf:rD,applicationDelay:.98,baseCastTime:2,manaCost:900,healingPotency:300,onConfirm:e=>{const t=e.tryConsumeResource("EMERGENCY_TACTICS");t||e.gainStatus("GALVANIZE"),(e.tryConsumeResource("RECITATION")||e.triggersEffect(e.config.critRate))&&!t&&e.gainStatus("CATALYZE")}});const uD=e=>{e.tryConsumeResource("RECITATION"),e.tryConsumeResource("EMERGENCY_TACTICS")||e.gainStatus("GALVANIZE")};Cn("SUCCOR",35,{autoUpgrade:{otherSkill:"CONCITATION",trait:"SUCCOR_MASTERY"},applicationDelay:1.12,baseCastTime:2,manaCost:900,healingPotency:200,onConfirm:uD});Cn("CONCITATION",96,{autoDowngrade:{otherSkill:"CONCITATION",trait:"SUCCOR_MASTERY"},replaceIf:cD,applicationDelay:1.12,baseCastTime:2,manaCost:900,healingPotency:200,onConfirm:uD});Cn("PHYSICK",4,{applicationDelay:1.03,healingPotency:[["NEVER",400],["ENHANCED_HEALING_MAGIC",450]],baseCastTime:1.5,manaCost:300});Cn("RESURRECTION",12,{applicationDelay:.98,baseCastTime:8,manaCost:2400});wn("AETHERFLOW",45,"cd_AETHERFLOW",{applicationDelay:0,cooldown:60,requiresCombat:!0,onConfirm:e=>{e.resources.get("MANA").gain(2e3),e.resources.get("AETHERFLOW").gain(3)}});xl("DISSIPATION",60,"cd_DISSIPATION",{rscType:"DISSIPATION",applicationDelay:0,cooldown:180,requiresCombat:!0,validateAttempt:e=>!e.hasResourceAvailable("SERAPH_SUMMON_TIMER"),onConfirm:e=>{e.warnLastPetGhost(),e.resources.get("AETHERFLOW").gain(3),e.tryConsumeResource("SERAPHISM")}});wn("LUSTRATE",45,"cd_LUSTRATE",{applicationDelay:.62,cooldown:1,healingPotency:600,validateAttempt:e=>e.hasResourceAvailable("AETHERFLOW"),onConfirm:e=>{e.maybeGainFaerieGauge(),e.tryConsumeResource("AETHERFLOW")}});xl("SACRED_SOIL",50,"cd_SACRED_SOIL",{rscType:"SACRED_SOIL_ZONE",applicationDelay:.62,cooldown:30,validateAttempt:e=>e.hasResourceAvailable("AETHERFLOW"),onConfirm:(e,t)=>{e.maybeGainFaerieGauge(),e.tryConsumeResource("AETHERFLOW"),e.hasTraitUnlocked("ENHANCED_SACRED_SOIL")&&e.addHoTPotencies({node:t,skillName:"SACRED_SOIL",effectName:"SACRED_SOIL_MIT",speedStat:"sps",tickPotency:100},34.96+.62)},onApplication:(e,t)=>{e.hasTraitUnlocked("ENHANCED_SACRED_SOIL")&&(e.applyHoT("SACRED_SOIL_MIT",t,34.96),e.gainStatus("SACRED_SOIL_MIT"))}});xl("EXCOGITATION",62,"cd_EXCOGITATION",{rscType:"EXCOGITATION",applicationDelay:.8,cooldown:45,healingPotency:800,validateAttempt:e=>e.hasResourceAvailable("RECITATION")||e.hasResourceAvailable("AETHERFLOW"),onConfirm:e=>{e.maybeGainFaerieGauge(),e.tryConsumeResource("RECITATION")||e.tryConsumeResource("AETHERFLOW")}});wn("INDOMITABILITY",52,"cd_INDOMITABILITY",{applicationDelay:.62,cooldown:30,healingPotency:400,validateAttempt:e=>e.hasResourceAvailable("RECITATION")||e.hasResourceAvailable("AETHERFLOW"),onConfirm:e=>{e.maybeGainFaerieGauge(),e.tryConsumeResource("RECITATION")||e.tryConsumeResource("AETHERFLOW")}});wn("WHISPERING_DAWN",20,"cd_WHISPERING_DAWN",{applicationDelay:0,cooldown:60,validateAttempt:e=>!e.hasResourceAvailable("DISSIPATION"),onConfirm:(e,t)=>{e.tryConsumeResource("FEY_UNION");const n=e.hasResourceAvailable("SERAPH_SUMMON_TIMER")?"ANGELS_WHISPER":"WHISPERING_DAWN",o=l=>(l.addHoTPotencies({node:t,skillName:"WHISPERING_DAWN",effectName:n,speedStat:"sps",tickPotency:80}),r=>{r.applyHoT(n,t),t.getHotPotencies("WHISPERING_DAWN").forEach(d=>{d.modifiers.includes(X.SchPet)||d.modifiers.push(X.SchPet)}),r.gainStatus(n)});e.queuePetAction(t,"WHISPERING_DAWN",n,$u,Ju.get(n),o)}});wn("FEY_ILLUMINATION",40,"cd_FEY_ILLUMINATION",{applicationDelay:0,cooldown:120,validateAttempt:e=>!e.hasResourceAvailable("DISSIPATION"),onConfirm:(e,t)=>{e.tryConsumeResource("FEY_UNION");const n=e.hasResourceAvailable("SERAPH_SUMMON_TIMER")?"SERAPHIC_ILLUMINATION":"FEY_ILLUMINATION",o=l=>r=>r.gainStatus(n);e.queuePetAction(t,"FEY_ILLUMINATION","FEY_ILLUMINATION",$u,Ju.get("FEY_ILLUMINATION"),o)}});wn("DEPLOYMENT_TACTICS",56,"cd_DEPLOYMENT_TACTICS",{applicationDelay:.89,cooldown:120});xl("EMERGENCY_TACTICS",58,"cd_EMERGENCY_TACTICS",{rscType:"EMERGENCY_TACTICS",applicationDelay:0,cooldown:15});wn("AETHERPACT",70,"cd_AETHERPACT",{replaceIf:[{newSkill:"DISSOLVE_UNION",condition:e=>e.hasResourceAvailable("FEY_UNION")}],applicationDelay:0,cooldown:3,validateAttempt:e=>e.resources.get("FAERIE_GAUGE").available(10)&&e.hasRealFairy(),onConfirm:(e,t)=>{e.gainStatus("FEY_UNION");const n=o=>l=>l.gainStatus("FEY_UNION");e.queuePetAction(t,"AETHERPACT","AETHERPACT",$u,Ju.get("AETHERPACT"),n)}});wn("DISSOLVE_UNION",70,"cd_DISSOLVE_UNION",{startOnHotbar:!1,applicationDelay:0,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("FEY_UNION"),onConfirm:e=>e.tryConsumeResource("FEY_UNION")});xl("RECITATION",74,"cd_RECITATION",{rscType:"RECITATION",applicationDelay:0,cooldown:90});wn("FEY_BLESSING",76,"cd_FEY_BLESSING",{applicationDelay:0,cooldown:60,healingPotency:320,validateAttempt:e=>e.hasRealFairy(),onConfirm:(e,t)=>{e.tryConsumeResource("FEY_UNION");const n=o=>{const l=o.makePetPotency(t.healTargetCount,"FEY_BLESSING",o.getDisplayTime(),320);return o.addHealingActionPotencyModifiers(l.modifiers),r=>N.resolveHealingPotency(l)};e.queuePetAction(t,"FEY_BLESSING","FEY_BLESSING",$u,Ju.get("FEY_BLESSING"),n)}});wn("SUMMON_SERAPH",80,"cd_SUMMON_SERAPH",{replaceIf:[{newSkill:"CONSOLATION",condition:e=>e.hasResourceAvailable("SERAPH_SUMMON_TIMER")}],applicationDelay:0,cooldown:120,validateAttempt:e=>e.hasRealFairy(),onConfirm:e=>{e.warnLastPetGhost(),e.gainStatus("SERAPH_SUMMON_TIMER"),e.tryConsumeResource("FEY_UNION")}});wn("CONSOLATION",80,"cd_CONSOLATION",{startOnHotbar:!1,applicationDelay:0,cooldown:1,secondaryCooldown:{cdName:"cd_CONSOLATION_INTERNAL",cooldown:30,maxCharges:2},healingPotency:250,validateAttempt:e=>e.hasResourceAvailable("SERAPH_SUMMON_TIMER"),onConfirm:(e,t)=>{const n=o=>{const l=o.makePetPotency(t.healTargetCount,"CONSOLATION",o.getDisplayTime(),250);return r=>{r.gainStatus("SERAPHIC_VEIL"),N.resolveHealingPotency(l)}};e.queuePetAction(t,"CONSOLATION","CONSOLATION",$u,Ju.get("CONSOLATION"),n)}});xl("PROTRACTION",86,"cd_PROTRACTION",{rscType:"PROTRACTION",applicationDelay:.76,cooldown:60});wn("EXPEDIENT",90,"cd_EXPEDIENT",{applicationDelay:0,cooldown:120});xl("SERAPHISM",100,"cd_SERAPHISM",{rscType:"SERAPHISM",applicationDelay:0,cooldown:180,validateAttempt:e=>!e.hasResourceAvailable("DISSIPATION"),onConfirm:(e,t)=>{const n=e.cooldowns.get("cd_EMERGENCY_TACTICS");n.restore(15),e.cooldowns.set(new ke("cd_EMERGENCY_TACTICS",1,1,1)),e.addEvent(new be("restore etact cd",e.getStatusDuration("SERAPHISM"),()=>e.cooldowns.set(n))),e.addHoTPotencies({node:t,skillName:"SERAPHISM",effectName:"SERAPHISM_REGEN",speedStat:"sps",tickPotency:100},24.96)},onApplication:(e,t)=>{e.applyHoT("SERAPHISM_REGEN",t,24.96),e.gainStatus("SERAPHISM_REGEN")}});Cn("MANIFESTATION",100,{startOnHotbar:!1,replaceIf:rD,applicationDelay:1.16,healingPotency:360,baseCastTime:0,manaCost:900,validateAttempt:e=>e.hasResourceAvailable("SERAPHISM"),onConfirm:e=>{e.tryConsumeResource("EMERGENCY_TACTICS")||(e.gainStatus("GALVANIZE"),e.triggersEffect(e.config.critRate)&&e.gainStatus("CATALYZE"))}});Cn("ACCESSION",100,{startOnHotbar:!1,replaceIf:cD,applicationDelay:.98,healingPotency:240,baseCastTime:0,manaCost:900,validateAttempt:e=>e.hasResourceAvailable("SERAPHISM"),onConfirm:e=>!e.tryConsumeResource("EMERGENCY_TACTICS")&&e.gainStatus("GALVANIZE")});Object.keys(CT).forEach(e=>Ft(e,`WHM/${Ge[e].name}.png`));const dD=["AERO_II","DIA"],MB=Object.keys(CT).filter(e=>!dD.includes(e));class LB extends Wt{jobSpecificOtherTargetedBuffViewProps(){return[...dD.map(t=>this.makeCommonTimer(t))]}jobSpecificSelfTargetedBuffViewProps(){return[...MB.map(t=>this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){const n=this.state.resources,o=n.get("LILLIES"),l=n.get("LILY_TIMER").available(1)?n.timeTillReady("LILY_TIMER"):20,r=o.availableAmount(),d=n.get("BLOOD_LILY").availableAmount(),h=[{kind:"bar",name:je("LILY_TIMER"),color:t.whm.lily,progress:1-l/20,valueString:l.toFixed(3)},{kind:"counter",name:je("LILLIES"),color:t.whm.lily,currentStacks:r,maxStacks:3}];return this.state.hasTraitUnlocked("TRANSCENDENT_AFFLATUS")&&h.push({kind:"counter",name:je("BLOOD_LILY"),color:t.whm.blood,currentStacks:d,maxStacks:3}),h}}const ma=(e,t,n)=>{Ye("WHM",e,t,n??{})};ma("LILLIES",3);ma("LILY_TIMER",1);ma("BLOOD_LILY",3,{warnOnOvercap:!0});ma("FREECURE",1,{timeout:15});ma("PRESENCE_OF_MIND",1,{timeout:15});ma("SACRED_SIGHT",3,{timeout:30,warnOnTimeout:!0});ma("REGEN",1,{timeout:18});ma("AERO_II",1,{timeout:30});ma("MEDICA_II",1,{timeout:15});ma("ASYLUM",1,{timeout:24});ma("THIN_AIR",1,{timeout:12});ma("DIVINE_BENISON",1,{timeout:15});ma("CONFESSION",1,{timeout:10});ma("DIA",1,{timeout:30});ma("TEMPERANCE",1,{timeout:20});ma("DIVINE_GRACE",1,{timeout:30});ma("AQUAVEIL",1,{timeout:8});ma("LITURGY_OF_THE_BELL",5,{timeout:20});ma("MEDICA_III",1,{timeout:15});ma("DIVINE_CARESS",1,{timeout:10});ma("DIVINE_AURA",1,{timeout:15});class HB extends Xt{constructor(t){super(t);const n=this.hasTraitUnlocked("ENHANCED_DIVINE_BENISON")?2:1,o=this.hasTraitUnlocked("ENHANCED_TETRAGRAMMATON")?2:1;this.cooldowns.set(new ke("cd_DIVINE_BENISON",30,n,n)),this.cooldowns.set(new ke("cd_TETRAGRAMMATON",60,o,o)),this.cooldowns.set(new ke("cd_SWIFTCAST",this.hasTraitUnlocked("ENHANCED_SWIFTCAST")?40:60,1,1)),this.registerRecurringEvents([{reportName:C({en:"Dia/Aero DoT",zh:"天辉/烈风DoT"}),groupedEffects:[{effectName:"AERO_II",appliedBy:["AERO_II"]},{effectName:"DIA",appliedBy:["DIA"]}]},{isHealing:!0,groupedEffects:[{effectName:"DIVINE_AURA",appliedBy:["DIVINE_CARESS"]}]},{isHealing:!0,groupedEffects:[{effectName:"ASYLUM",appliedBy:["ASYLUM"]}]},{isHealing:!0,groupedEffects:[{effectName:"REGEN",appliedBy:["REGEN"]}]},{isHealing:!0,groupedEffects:[{effectName:"MEDICA_II",appliedBy:["MEDICA_II"]},{effectName:"MEDICA_III",appliedBy:["MEDICA_III"]}]}])}jobSpecificRegisterRecurringEvents(){(this.isInCombat()||this.hasResourceAvailable("LILY_TIMER"))&&!this.hasResourceAvailable("LILLIES",3)&&this.startLilyTimer()}jobSpecificAddHealingBuffCovers(t,n){this.hasTraitUnlocked("ENHANCED_ASYLUM")&&this.hasResourceAvailable("ASYLUM")&&t.addBuff(H.Asylum),this.hasResourceAvailable("TEMPERANCE")&&t.addBuff(H.Temperance),n.cdName==="cd_GCD"&&n.aoeHeal&&this.hasResourceAvailable("CONFESSION")&&t.addBuff(H.Confession)}recurringLilyGain(){this.resources.addResourceEvent({rscType:"LILY_TIMER",name:"gain lily",delay:20,fnOnRsc:()=>{this.resources.get("LILLIES").gain(1),this.hasResourceAvailable("LILLIES",3)?this.tryConsumeResource("LILY_TIMER"):this.recurringLilyGain()}})}startLilyTimer(){this.hasResourceAvailable("LILY_TIMER")||this.hasResourceAvailable("LILLIES",3)||(this.resources.get("LILY_TIMER").gain(1),this.recurringLilyGain())}addHealingActionPotencyModifiers(t){this.hasTraitUnlocked("ENHANCED_ASYLUM")&&this.hasResourceAvailable("ASYLUM")&&t.push(X.Asylum),this.hasResourceAvailable("TEMPERANCE")&&t.push(X.Temperance)}get statusPropsGenerator(){return new LB(this)}}const ya=(e,t,n)=>{const o=l=>{if(!n.healingPotency)return[];const r=[];return l.hasResourceAvailable("CONFESSION")&&n.aoeHeal&&r.push(X.Confession),l.addHealingActionPotencyModifiers(r),r};return Qn("WHM",e,t,{...n,castTime:l=>l.config.adjustedCastTime(n.baseCastTime??0,l.hasResourceAvailable("PRESENCE_OF_MIND")?20:0),recastTime:l=>l.config.adjustedGCD(2.5,l.hasResourceAvailable("PRESENCE_OF_MIND")?20:0),isInstantFn:l=>!n.baseCastTime||l.hasResourceAvailable("SWIFTCAST"),manaCost:n.manaCost?l=>l.hasResourceAvailable("THIN_AIR")?0:An(n.manaCost)(l):void 0,jobHealingPotencyModifiers:o,onConfirm:Ue(l=>l.tryConsumeResource("THIN_AIR"),n.baseCastTime?l=>l.tryConsumeResource("SWIFTCAST"):void 0,n.onConfirm),onApplication:Ue(n.potency||e=="AFFLATUS_SOLACE"||e=="AFFLATUS_RAPTURE"?l=>l.startLilyTimer():void 0,n.onApplication)})},Us=(e,t,n,o)=>ot("WHM",e,t,n,{...o,jobHealingPotencyModifiers:r=>{if(!o.healingPotency)return[];const d=[];return o.isPetHeal&&d.push(X.WhmPet),r.addHealingActionPotencyModifiers(d),d}}),Pl=(e,t,n,o)=>ze("WHM",e,t,n,{...o,jobHealingPotencyModifiers:r=>{if(!o.healingPotency)return[];const d=[];return r.addHealingActionPotencyModifiers(d),d}});ya("STONE_IV",64,{autoUpgrade:{otherSkill:"GLARE",trait:"STONE_MASTERY_IV"},applicationDelay:.8,baseCastTime:1.5,potency:260,manaCost:400});ya("GLARE",72,{autoDowngrade:{otherSkill:"STONE_IV",trait:"STONE_MASTERY_IV"},autoUpgrade:{otherSkill:"GLARE_III",trait:"GLARE_MASTERY"},applicationDelay:1.29,baseCastTime:1.5,potency:290,manaCost:400});ya("GLARE_III",82,{autoDowngrade:{otherSkill:"GLARE",trait:"GLARE_MASTERY"},applicationDelay:1.29,baseCastTime:1.5,potency:[["NEVER",310],["WHITE_MAGIC_MASTERY",340]],manaCost:400});ya("AERO_II",46,{autoUpgrade:{otherSkill:"DIA",trait:"AERO_MASTERY_II"},applicationDelay:1.15,potency:50,manaCost:200,onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"AERO_II",skillName:"AERO_II",tickPotency:50,speedStat:"sps"})},onApplication:(e,t)=>e.applyDoT("AERO_II",t)});ya("DIA",72,{autoDowngrade:{otherSkill:"AERO_II",trait:"AERO_MASTERY_II"},applicationDelay:1.29,potency:[["NEVER",65],["WHITE_MAGIC_MASTERY",85]],manaCost:400,onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"DIA",skillName:"DIA",tickPotency:e.hasTraitUnlocked("WHITE_MAGIC_MASTERY")?85:65,speedStat:"sps"})},onApplication:(e,t)=>e.applyDoT("DIA",t)});ya("HOLY",45,{autoUpgrade:{otherSkill:"HOLY_III",trait:"HOLY_MASTERY"},applicationDelay:2.13,potency:140,baseCastTime:1.5,falloff:0,manaCost:400});ya("HOLY_III",82,{autoDowngrade:{otherSkill:"HOLY",trait:"HOLY_MASTERY"},applicationDelay:2.13,potency:150,baseCastTime:1.5,falloff:0,manaCost:400});ya("AFFLATUS_MISERY",74,{applicationDelay:.58,potency:[["NEVER",1240],["WHITE_MAGIC_MASTERY",1360]],falloff:.5,manaCost:0,highlightIf:e=>e.hasResourceExactly("BLOOD_LILY",3),validateAttempt:e=>e.hasResourceExactly("BLOOD_LILY",3),onConfirm:e=>e.tryConsumeResource("BLOOD_LILY",!0)});ya("AFFLATUS_SOLACE",52,{applicationDelay:.53,healingPotency:[["NEVER",700],["ENHANCED_HEALING_MAGIC",800]],manaCost:0,validateAttempt:e=>e.hasResourceAvailable("LILLIES"),onConfirm:e=>{e.tryConsumeResource("LILLIES"),e.resources.get("BLOOD_LILY").gain(1)}});ya("AFFLATUS_RAPTURE",76,{applicationDelay:.58,healingPotency:[["NEVER",300],["ENHANCED_HEALING_MAGIC",400]],manaCost:0,aoeHeal:!0,validateAttempt:e=>e.hasResourceAvailable("LILLIES"),onConfirm:e=>{e.tryConsumeResource("LILLIES"),e.resources.get("BLOOD_LILY").gain(1)}});ya("REGEN",35,{applicationDelay:1.02,healingPotency:[["NEVER",200],["ENHANCED_HEALING_MAGIC",250]],manaCost:400,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"REGEN",effectName:"REGEN",speedStat:"sps",tickPotency:e.hasTraitUnlocked("ENHANCED_HEALING_MAGIC")?250:200})},onApplication:(e,t)=>{e.applyHoT("REGEN",t),e.gainStatus("REGEN")}});ya("CURE",2,{applicationDelay:1.03,healingPotency:[["NEVER",450],["ENHANCED_HEALING_MAGIC",500]],baseCastTime:1.5,manaCost:400,onConfirm:e=>e.maybeGainProc("FREECURE",.15)});ya("CURE_II",30,{applicationDelay:.98,healingPotency:[["NEVER",700],["ENHANCED_HEALING_MAGIC",800]],baseCastTime:2,manaCost:e=>e.hasResourceAvailable("FREECURE")?0:1e3,highlightIf:e=>e.hasResourceAvailable("FREECURE"),onConfirm:e=>e.tryConsumeResource("FREECURE")});ya("CURE_III",40,{applicationDelay:.98,healingPotency:[["NEVER",550],["ENHANCED_HEALING_MAGIC",600]],baseCastTime:2,manaCost:1500,aoeHeal:!0});ya("MEDICA",10,{applicationDelay:1.02,healingPotency:[["NEVER",300],["ENHANCED_HEALING_MAGIC",400]],baseCastTime:2,manaCost:900,aoeHeal:!0});ya("MEDICA_II",50,{autoUpgrade:{otherSkill:"MEDICA_III",trait:"MEDICA_MASTERY"},applicationDelay:.84,healingPotency:[["NEVER",200],["ENHANCED_HEALING_MAGIC",250]],baseCastTime:2,manaCost:1e3,aoeHeal:!0,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"MEDICA_II",effectName:"MEDICA_II",speedStat:"sps",tickPotency:e.hasTraitUnlocked("ENHANCED_HEALING_MAGIC")?150:100})},onApplication:(e,t)=>{e.applyHoT("MEDICA_II",t),e.gainStatus("MEDICA_II")}});ya("MEDICA_III",96,{autoDowngrade:{otherSkill:"MEDICA_II",trait:"MEDICA_MASTERY"},applicationDelay:.84,healingPotency:250,baseCastTime:2,manaCost:1e3,aoeHeal:!0,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"MEDICA_III",effectName:"MEDICA_III",speedStat:"sps",tickPotency:175})},onApplication:(e,t)=>{e.applyHoT("MEDICA_III",t),e.gainStatus("MEDICA_III")}});ya("RAISE",12,{baseCastTime:8,manaCost:2400,applicationDelay:1.16});Us("ASSIZE",56,"cd_ASSIZE",{applicationDelay:.67,cooldown:40,potency:400,falloff:0,healingPotency:400,onApplication:e=>e.resources.get("MANA").gain(500)});Pl("PRESENCE_OF_MIND",30,"cd_PRESENCE_OF_MIND",{rscType:"PRESENCE_OF_MIND",applicationDelay:.53,cooldown:120,replaceIf:[{newSkill:"GLARE_IV",condition:e=>e.hasResourceAvailable("SACRED_SIGHT")}],onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_PRESENCE_OF_MIND")&&e.gainStatus("SACRED_SIGHT",3)}});ya("GLARE_IV",92,{startOnHotbar:!1,applicationDelay:.85,potency:640,falloff:.4,manaCost:0,highlightIf:e=>e.hasResourceAvailable("SACRED_SIGHT"),validateAttempt:e=>e.hasResourceAvailable("SACRED_SIGHT"),onConfirm:e=>e.tryConsumeResource("SACRED_SIGHT")});Pl("THIN_AIR",58,"cd_THIN_AIR",{rscType:"THIN_AIR",applicationDelay:0,cooldown:60,maxCharges:2});Us("AETHERIAL_SHIFT",40,"cd_AETHERIAL_SHIFT",{applicationDelay:0,cooldown:60,animationLock:Vt});Pl("DIVINE_BENISON",66,"cd_DIVINE_BENISON",{rscType:"DIVINE_BENISON",applicationDelay:.8,cooldown:30,maxCharges:2});Pl("AQUAVEIL",86,"cd_AQUAVEIL",{rscType:"AQUAVEIL",applicationDelay:.62,cooldown:60});Us("TETRAGRAMMATON",60,"cd_TETRAGRAMMATON",{applicationDelay:.53,cooldown:60,maxCharges:2,healingPotency:700});Us("BENEDICTION",50,"cd_BENEDICTION",{applicationDelay:.62,cooldown:180});Us("ASYLUM",52,"cd_ASYLUM",{applicationDelay:.85,cooldown:90,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"ASYLUM",effectName:"ASYLUM",speedStat:"sps",tickPotency:100})},onApplication:e=>e.gainStatus("ASYLUM")});Pl("PLENARY_INDULGENCE",70,"cd_PLENARY_INDULGENCE",{rscType:"CONFESSION",applicationDelay:.8,cooldown:60});Pl("TEMPERANCE",80,"cd_TEMPERANCE",{rscType:"TEMPERANCE",applicationDelay:.62,cooldown:120,replaceIf:[{newSkill:"DIVINE_CARESS",condition:e=>e.hasResourceAvailable("DIVINE_GRACE")}],onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_TEMPERANCE")&&e.gainStatus("DIVINE_GRACE")}});Pl("LITURGY_OF_THE_BELL",90,"cd_LITURGY_OF_THE_BELL",{rscType:"LITURGY_OF_THE_BELL",applicationDelay:0,cooldown:180,replaceIf:[{newSkill:"LITURGY_POP",condition:e=>e.hasResourceAvailable("LITURGY_OF_THE_BELL")}]});Us("LITURGY_TRIGGER",90,"cd_LITURGY_TRIGGER",{applicationDelay:0,cooldown:1,isPetHeal:!0,healingPotency:425,animationLock:Sn,validateAttempt:e=>e.hasResourceAvailable("LITURGY_OF_THE_BELL"),highlightIf:e=>e.hasResourceAvailable("LITURGY_OF_THE_BELL"),onConfirm:e=>e.tryConsumeResource("LITURGY_OF_THE_BELL")});Us("LITURGY_POP",90,"cd_LITURGY_POP",{startOnHotbar:!1,applicationDelay:0,cooldown:1,isPetHeal:!0,healingPotency:e=>212*e.resources.get("LITURGY_OF_THE_BELL").availableAmount(),validateAttempt:e=>e.hasResourceAvailable("LITURGY_OF_THE_BELL"),highlightIf:e=>e.hasResourceAvailable("LITURGY_OF_THE_BELL"),onConfirm:e=>e.tryConsumeResource("LITURGY_OF_THE_BELL",!0)});Pl("DIVINE_CARESS",100,"cd_DIVINE_CARESS",{startOnHotbar:!1,rscType:"DIVINE_CARESS",applicationDelay:0,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("DIVINE_GRACE"),highlightIf:e=>e.hasResourceAvailable("DIVINE_GRACE"),onConfirm:e=>e.tryConsumeResource("DIVINE_GRACE"),onApplication:e=>{e.resources.addResourceEvent({rscType:"DIVINE_CARESS",name:"trigger divine aura on divine caress expiry",delay:10,fnOnRsc:()=>e.gainStatus("DIVINE_AURA")})}});Object.keys(AT).forEach(e=>Ft(e,`NIN/${Ge[e].name}.png`));const ED=["DOKUMORI","TRICK_ATTACK","KUNAIS_BANE"],UB=Object.keys(AT).filter(e=>!ED.includes(e));class kB extends Wt{jobSpecificOtherTargetedBuffViewProps(){return[...ED.map(t=>this.makeCommonTimer(t,!1))]}jobSpecificSelfTargetedBuffViewProps(){return UB.map(t=>t==="HIDDEN"?this.makeCommonTimerless(t):this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){var A,R;const n=this.state.resources,o=n.get("NIN_COMBO_TRACKER"),l=n.get("NIN_AOE_COMBO_TRACKER"),r=n.get("KAZEMATOI").availableAmount(),d=n.get("NINKI").availableAmount(),h=o.available(1)?(A=o.pendingChange)==null?void 0:A.timeTillEvent:l.available(1)?(R=l.pendingChange)==null?void 0:R.timeTillEvent:void 0;return[{kind:"bar",name:C({en:"Combo Timer",zh:"连击监控"}),color:t.nin.ninComboTimer,progress:h?h/30:0,valueString:(h==null?void 0:h.toFixed(3))??"N/A"},{kind:"counter",name:je("KAZEMATOI"),color:t.nin.kazematoi,currentStacks:r,maxStacks:5},{kind:"bar",name:je("NINKI"),color:t.nin.ninki,progress:d/100,valueString:d.toFixed(0)}]}}const ua=(e,t,n)=>{Ye("NIN",e,t,n??{})};ua("KAZEMATOI",5,{warnOnOvercap:!0});ua("NINKI",100,{warnOnOvercap:!0});ua("SHADE_SHIFT",1,{timeout:20});ua("MUDRA",1,{timeout:6});ua("HIDDEN",1);ua("TRICK_ATTACK",1,{timeout:15.77});ua("KASSATSU",1,{timeout:15,warnOnTimeout:!0});ua("DOKUMORI",1,{timeout:21});ua("TENRI_JINDO_READY",1,{timeout:30,warnOnTimeout:!0});ua("TEN_CHI_JIN",1,{timeout:6});ua("MEISUI",1,{timeout:30});ua("SHADOW_WALKER",1,{timeout:20});ua("BUNSHIN",5,{timeout:30,warnOnTimeout:!0});ua("PHANTOM_KAMAITACHI_READY",1,{timeout:45,warnOnTimeout:!0});ua("RAIJU_READY",3,{timeout:30,warnOnTimeout:!0});ua("KUNAIS_BANE",1,{timeout:16.25});ua("HIGI",1,{timeout:30});ua("DOTON",1,{timeout:18});ua("NIN_COMBO_TRACKER",2,{timeout:30});ua("NIN_AOE_COMBO_TRACKER",1,{timeout:30});ua("MUDRA_TRACKER",1e4);ua("BUNNY",1);const xB=["SPINNING_EDGE","GUST_SLASH","AEOLIAN_EDGE","ARMOR_CRUSH","THROWING_DAGGER","DEATH_BLOSSOM","HAKKE_MUJINSATSU","FORKED_RAIJU","FLEETING_RAIJU"];class PB extends Xt{constructor(t){super(t);const n=this.hasTraitUnlocked("ENHANCED_SHUKUCHI_II")?2:1;this.cooldowns.set(new ke("cd_SHUKUCHI",60,n,n)),this.registerRecurringEvents([{groupedEffects:[{effectName:"DOTON",appliedBy:["DOTON","DOTON_CHI"],isGroundTargeted:!0}]}])}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("DOKUMORI")&&t.addBuff(H.Dokumori),this.hasResourceAvailable("TRICK_ATTACK")&&t.addBuff(H.TrickAttack),this.hasResourceAvailable("KUNAIS_BANE")&&t.addBuff(H.KunaisBane),this.hasResourceAvailable("BUNSHIN")&&xB.includes(n.name)&&t.addBuff(H.Bunshin)}inherentSpeedModifier(){return 15}get statusPropsGenerator(){return new kB(this)}stackRaijuReady(){this.resources.get("RAIJU_READY").gain(1),this.enqueueResourceDrop("RAIJU_READY")}gainNinki(t){this.resources.get("NINKI").gain(t)}processComboStatus(t){if(["THROWING_DAGGER","FORKED_RAIJU","FLEETING_RAIJU","PHANTOM_KAMAITACHI"].includes(t))return;let n=[this.resources.get("NIN_COMBO_TRACKER").availableAmount(),this.resources.get("NIN_AOE_COMBO_TRACKER").availableAmount()];t==="SPINNING_EDGE"?n=[1,0]:t==="GUST_SLASH"&&n[0]===1?n=[2,0]:t==="DEATH_BLOSSOM"?n=[0,1]:n=[0,0],this.setComboState("NIN_COMBO_TRACKER",n[0]),this.setComboState("NIN_AOE_COMBO_TRACKER",n[1])}parseMudraTracker(){if(this.hasResourceAvailable("BUNNY"))return;const t=this.resources.get("MUDRA_TRACKER").availableAmount();if(t===0)return[];if(t<10)return console.assert(t<4,`mudra tracker value ${t} was invalid`),[t];if(t<100)return console.assert(t%10!==0,`mudra tracker value ${t} was invalid`),[Math.floor(t/10),t%10];if(t<1e3)return[Math.floor(t/100),Math.floor(t/10)%10,t%10]}isMudraTrackerIn(t){const n=this.parseMudraTracker();return n!==void 0&&t.some(o=>n.length===o.length&&n.every((l,r)=>o[r]===l))}clearMudraInfo(){this.tryConsumeResource("MUDRA"),this.tryConsumeResource("KASSATSU"),this.resources.get("MUDRA_TRACKER").overrideCurrentValue(0),this.resources.get("BUNNY").overrideCurrentValue(0)}pushMudra(t,n){const o=this.resources.get("MUDRA_TRACKER"),l=o.availableAmount();if(l===0&&!n&&(console.assert(this.resources.get("MUDRA_TRACKER").availableAmount()===0),console.assert(this.resources.get("BUNNY").availableAmount()===0),this.gainStatus("MUDRA"),this.resources.get("MUDRA").removeTimer(),this.resources.addResourceEvent({rscType:"MUDRA",name:"clear mudra tracker/bunny",delay:Kt("NIN","MUDRA").maxTimeout,fnOnRsc:()=>this.clearMudraInfo()})),l>1e3)return;const r=l*10+t;o.overrideCurrentValue(r),n&&r>100&&(this.tryConsumeResource("TEN_CHI_JIN"),this.clearMudraInfo())}}const aC=e=>!e.hasResourceAvailable("TEN_CHI_JIN"),RS=e=>{e.hasResourceAvailable("MUDRA")&&e.gainStatus("BUNNY")},TS=e=>e===void 0?aC:t=>aC(t)&&e(t),hc=(e,t)=>{e.hasResourceAvailable("DOKUMORI")&&t.push(X.Dokumori),e.hasResourceAvailable("TRICK_ATTACK")&&t.push(X.TrickAttack),e.hasResourceAvailable("KUNAIS_BANE")&&t.push(X.KunaisBane)},lo=(e,t,n)=>na("NIN",e,t,{...n,recastTime:o=>o.config.adjustedSksGCD(2.5,o.inherentSpeedModifier()),validateAttempt:TS(n.validateAttempt),onConfirm:Ue(RS,(o,l)=>{var r;return(r=n.onConfirm)==null?void 0:r.call(n,o,l)},o=>{e!=="PHANTOM_KAMAITACHI"&&o.tryConsumeResource("BUNSHIN")&&o.gainNinki(5)},["THROWING_DAGGER","PHANTOM_KAMAITACHI","FORKED_RAIJU","FLEETING_RAIJU"].includes(e)?void 0:o=>o.tryConsumeResource("RAIJU_READY",!0)&&N.reportWarning({kind:"overwrite",rsc:"RAIJU_READY"}),o=>o.processComboStatus(e)),jobPotencyModifiers:o=>{var r;const l=((r=n.jobPotencyModifiers)==null?void 0:r.call(n,o))??[];return o.hasResourceAvailable("BUNSHIN")&&e!=="PHANTOM_KAMAITACHI"&&(e==="DEATH_BLOSSOM"||e==="HAKKE_MUJINSATSU"?l.push(X.BunshinAOE):l.push(X.BunshinST)),hc(o,l),l}}),so=(e,t,n,o)=>ot("NIN",e,t,n,{...o,validateAttempt:TS(o.validateAttempt),onConfirm:Ue(RS,(l,r)=>{var d;return(d=o.onConfirm)==null?void 0:d.call(o,l,r)}),jobPotencyModifiers:l=>{var d;const r=((d=o.jobPotencyModifiers)==null?void 0:d.call(o,l))??[];return hc(l,r),r}}),ed=(e,t,n,o)=>ze("NIN",e,t,n,{...o,validateAttempt:TS(o.validateAttempt),onConfirm:Ue(RS,(l,r)=>{var d;return(d=o.onConfirm)==null?void 0:d.call(o,l,r)})});lo("THROWING_DAGGER",15,{applicationDelay:.62,potency:[["NEVER",120],["MELEE_MASTERY_II_NIN",200]],onConfirm:e=>e.gainNinki(5)});lo("SPINNING_EDGE",1,{applicationDelay:.4,potency:[["NEVER",180],["MELEE_MASTERY_II_NIN",220],["MELEE_MASTERY_III_NIN",300]],onConfirm:e=>e.gainNinki(5)});lo("GUST_SLASH",4,{applicationDelay:.4,potency:[["NEVER",100],["MELEE_MASTERY_NIN",120],["MELEE_MASTERY_II_NIN",160],["MELEE_MASTERY_III_NIN",240]],combo:{potency:[["NEVER",260],["MELEE_MASTERY_NIN",280],["MELEE_MASTERY_II_NIN",320],["MELEE_MASTERY_III_NIN",400]],resource:"NIN_COMBO_TRACKER",resourceValue:1},highlightIf:e=>e.hasResourceExactly("NIN_COMBO_TRACKER",1),onConfirm:e=>e.hasResourceExactly("NIN_COMBO_TRACKER",1)&&e.gainNinki(5)});const hD=e=>e.gainNinki(e.hasTraitUnlocked("SHUKIHO_III")?15:e.hasTraitUnlocked("SHUKIHO_II")?10:5);lo("AEOLIAN_EDGE",26,{applicationDelay:.54,potency:[["NEVER",100],["MELEE_MASTERY_NIN",140],["MELEE_MASTERY_III_NIN",220]],combo:{potency:[["NEVER",340],["MELEE_MASTERY_III_NIN",400]],resource:"NIN_COMBO_TRACKER",resourceValue:2},positional:{potency:[["NEVER",160],["MELEE_MASTERY_NIN",200],["MELEE_MASTERY_III_NIN",280]],comboPotency:[["NEVER",400],["MELEE_MASTERY_III_NIN",460]],location:"rear"},highlightIf:e=>e.hasResourceExactly("NIN_COMBO_TRACKER",2),onConfirm:hD,jobPotencyModifiers:e=>e.tryConsumeResource("KAZEMATOI")?[X.Kazematoi]:[]});lo("ARMOR_CRUSH",54,{applicationDelay:.62,potency:[["NEVER",100],["MELEE_MASTERY_NIN",140],["MELEE_MASTERY_III_NIN",240]],combo:{potency:[["NEVER",320],["MELEE_MASTERY_NIN",360],["MELEE_MASTERY_III_NIN",440]],resource:"NIN_COMBO_TRACKER",resourceValue:2},positional:{potency:[["NEVER",160],["MELEE_MASTERY_NIN",200],["MELEE_MASTERY_III_NIN",300]],comboPotency:[["NEVER",380],["MELEE_MASTERY_NIN",420],["MELEE_MASTERY_III_NIN",500]],location:"flank"},highlightIf:e=>e.hasResourceExactly("NIN_COMBO_TRACKER",2),onConfirm:Ue(e=>{e.hasResourceExactly("NIN_COMBO_TRACKER",2)&&e.resources.get("KAZEMATOI").gain(2)},hD)});lo("DEATH_BLOSSOM",38,{applicationDelay:.71,potency:100,falloff:0,onConfirm:e=>e.gainNinki(5)});lo("HAKKE_MUJINSATSU",52,{applicationDelay:.62,potency:100,combo:{potency:120,resource:"NIN_AOE_COMBO_TRACKER",resourceValue:1},falloff:0,highlightIf:e=>e.hasResourceExactly("NIN_AOE_COMBO_TRACKER",1),onConfirm:e=>e.hasResourceExactly("NIN_AOE_COMBO_TRACKER",1)&&e.gainNinki(5),jobPotencyModifiers:e=>e.hasResourceExactly("NIN_AOE_COMBO_TRACKER",1)&&e.hasResourceAvailable("DOTON")?[X.HollowNozuchi]:[]});const Br=e=>e.hasResourceAvailable("TEN_CHI_JIN")&&e.isMudraTrackerIn([[]]),fD=e=>e.hasResourceAvailable("TEN_CHI_JIN")&&e.isMudraTrackerIn([[2],[3]]),AD=e=>e.hasResourceAvailable("TEN_CHI_JIN")&&e.isMudraTrackerIn([[1],[3]]),mD=e=>e.hasResourceAvailable("TEN_CHI_JIN")&&e.isMudraTrackerIn([[1],[2]]),RD=e=>e.hasResourceAvailable("TEN_CHI_JIN")&&e.isMudraTrackerIn([[3,2],[2,3]]),TD=e=>e.hasResourceAvailable("TEN_CHI_JIN")&&e.isMudraTrackerIn([[1,3],[3,1]]),SD=e=>e.hasResourceAvailable("TEN_CHI_JIN")&&e.isMudraTrackerIn([[1,2],[2,1]]),ID=[{newSkill:"TEN",condition:e=>!e.hasResourceAvailable("TEN_CHI_JIN")},{newSkill:"FUMA_SHURIKEN_TEN",condition:Br},{newSkill:"KATON_TEN",condition:fD},{newSkill:"HUTON_TEN",condition:RD}],SS=[{newSkill:"CHI",condition:e=>!e.hasResourceAvailable("TEN_CHI_JIN")},{newSkill:"FUMA_SHURIKEN_CHI",condition:Br},{newSkill:"RAITON_CHI",condition:AD},{newSkill:"DOTON_CHI",condition:TD}],_D=[{newSkill:"JIN",condition:e=>!e.hasResourceAvailable("TEN_CHI_JIN")},{newSkill:"FUMA_SHURIKEN_JIN",condition:Br},{newSkill:"HYOTON_JIN",condition:mD},{newSkill:"SUITON_JIN",condition:SD}],gD=[["FUMA_SHURIKEN",30,.89,[["NEVER",450],["MELEE_MASTERY_III_NIN",500]],void 0],["KATON",35,.94,350,0],["RAITON",35,.71,[["NEVER",650],["MELEE_MASTERY_III_NIN",740]],void 0],["HYOTON",45,1.16,350,void 0],["HUTON",45,.98,240,0],["SUITON",45,.98,[["NEVER",500],["MELEE_MASTERY_III_NIN",580]],void 0],["GOKA_MEKKYAKU",76,.76,600,0],["HYOSHO_RANRYU",76,.62,1300,void 0]],wB=new Map(gD.map(([e,t,n,o,l])=>[e,[t,n,o,l]])),GB=[["FUMA_SHURIKEN_TEN",Br],["FUMA_SHURIKEN_CHI",Br],["FUMA_SHURIKEN_JIN",Br],["KATON_TEN",fD],["RAITON_CHI",AD],["HYOTON_JIN",mD],["HUTON_TEN",RD],["SUITON_JIN",SD]];GB.forEach(([e,t])=>{const[,n,o,l]=wB.get(e.substring(0,e.length-4)),r=e.substring(e.length-3);na("NIN",e,70,{startOnHotbar:!1,applicationDelay:n,recastTime:e==="HUTON_TEN"||e==="SUITON_JIN"?1.5:1,potency:o,falloff:l,replaceIf:r==="TEN"?ID:r==="CHI"?SS:_D,validateAttempt:t,jobPotencyModifiers:h=>{const E=[];return hc(h,E),e==="KATON"&&h.hasResourceAvailable("DOTON")&&E.push(X.HollowNozuchi),E},onConfirm:Ue(h=>h.pushMudra(r==="TEN"?1:r==="CHI"?2:3,!0),e==="RAITON_CHI"?h=>h.stackRaijuReady():e==="SUITON_JIN"||e==="HUTON_TEN"?h=>h.gainStatus("SHADOW_WALKER"):void 0)})});const ND=(e,t)=>{e.applyDoT("DOTON",t),e.gainStatus("DOTON")};na("NIN","DOTON_CHI",70,{startOnHotbar:!1,recastTime:1.5,replaceIf:SS,validateAttempt:TD,jobPotencyModifiers:e=>{const t=[];return hc(e,t),t},onConfirm:Ue((e,t)=>{e.addDoTPotencies({node:t,effectName:"DOTON",skillName:"DOTON",tickPotency:80,speedStat:"sks"})},e=>e.pushMudra(2,!0)),onApplication:ND});[["TEN",30,ID],["CHI",35,SS],["JIN",45,_D]].forEach(([e,t,n],o)=>{na("NIN",e,t,{recastTime:.5,animationLock:.5,replaceIf:n,secondaryCooldown:{cdName:"cd_MUDRA",cooldown:20,maxCharges:2},jobPotencyModifiers:l=>{const r=[];return hc(l,r),r},validateAttempt:l=>!l.hasResourceAvailable("TEN_CHI_JIN"),onConfirm:l=>l.pushMudra(o+1,!1)})});const BB=e=>e.hasTraitUnlocked("ENHANCED_KASSATSU")&&e.hasResourceAvailable("KASSATSU")&&e.isMudraTrackerIn([[2,1],[3,1]]),FB=e=>e.hasTraitUnlocked("ENHANCED_KASSATSU")&&e.hasResourceAvailable("KASSATSU")&&e.isMudraTrackerIn([[1,3],[2,3]]),zB=e=>e.hasResourceAvailable("MUDRA")&&e.isMudraTrackerIn([[1],[2],[3]]),jB=e=>(!e.hasTraitUnlocked("ENHANCED_KASSATSU")||!e.hasResourceAvailable("KASSATSU"))&&e.hasResourceAvailable("MUDRA")&&e.isMudraTrackerIn([[2,1],[3,1]]),YB=e=>e.hasResourceAvailable("MUDRA")&&e.isMudraTrackerIn([[1,2],[3,2]]),KB=e=>(!e.hasTraitUnlocked("ENHANCED_KASSATSU")||!e.hasResourceAvailable("KASSATSU"))&&e.hasResourceAvailable("MUDRA")&&e.isMudraTrackerIn([[1,3],[2,3]]),VB=e=>e.hasResourceAvailable("MUDRA")&&e.isMudraTrackerIn([[3,2,1],[2,3,1]]),WB=e=>e.hasResourceAvailable("MUDRA")&&e.isMudraTrackerIn([[1,3,2],[3,1,2]]),XB=e=>e.hasResourceAvailable("MUDRA")&&e.isMudraTrackerIn([[1,2,3],[2,1,3]]),qB=e=>e.hasResourceAvailable("MUDRA")&&(e.hasResourceAvailable("BUNNY")||!e.isMudraTrackerIn([[1],[2],[3],[2,1],[3,1],[1,2],[3,2],[1,3],[2,3],[3,2,1],[2,3,1],[1,3,2],[3,1,2],[1,2,3],[2,1,3]])),cf=[{newSkill:"GOKA_MEKKYAKU",condition:BB},{newSkill:"HYOSHO_RANRYU",condition:FB},{newSkill:"FUMA_SHURIKEN",condition:zB},{newSkill:"KATON",condition:jB},{newSkill:"RAITON",condition:YB},{newSkill:"HYOTON",condition:KB},{newSkill:"HUTON",condition:VB},{newSkill:"DOTON",condition:WB},{newSkill:"SUITON",condition:XB},{newSkill:"RABBIT_MEDIUM",condition:e=>e.hasResourceAvailable("MUDRA")&&(e.hasResourceAvailable("BUNNY")||qB(e))},{newSkill:"NINJUTSU",condition:e=>!e.hasResourceAvailable("MUDRA")}],uf=e=>cf.filter(t=>t.newSkill!==e);na("NIN","NINJUTSU",30,{recastTime:1.5,validateAttempt:e=>!1,replaceIf:uf("NINJUTSU")});na("NIN","RABBIT_MEDIUM",30,{startOnHotbar:!1,recastTime:1.5,replaceIf:uf("RABBIT_MEDIUM"),validateAttempt:cf.find(e=>e.newSkill==="RABBIT_MEDIUM").condition,onConfirm:e=>e.clearMudraInfo()});gD.forEach(([e,t,n,o,l])=>{na("NIN",e,t,{startOnHotbar:!1,applicationDelay:n,recastTime:r=>r.hasResourceAvailable("TEN_CHI_JIN")?1:1.5,potency:o,falloff:l,replaceIf:uf(e),validateAttempt:cf.find(r=>r.newSkill===e).condition,onConfirm:Ue(["KATON","RAITON","HYOTON"].includes(e)?r=>{r.cooldowns.get("cd_SHUKUCHI").timeTillNextStackAvailable()!==0&&r.cooldowns.get("cd_SHUKUCHI").restore(60)}:void 0,e==="RAITON"?r=>r.stackRaijuReady():e==="SUITON"||e==="HUTON"?r=>r.gainStatus("SHADOW_WALKER"):void 0,r=>r.clearMudraInfo()),jobPotencyModifiers:r=>{const d=[];return r.hasResourceAvailable("KASSATSU")&&d.push(X.Kassatsu),r.hasResourceAvailable("DOTON")&&["KATON","GOKA_MEKKYAKU"].includes(e)&&d.push(X.HollowNozuchi),hc(r,d),d}})});na("NIN","DOTON",45,{startOnHotbar:!1,recastTime:e=>e.hasResourceAvailable("TEN_CHI_JIN")?1:1.5,potency:0,falloff:0,replaceIf:uf("DOTON"),validateAttempt:cf.find(e=>e.newSkill==="DOTON").condition,onConfirm:Ue((e,t)=>{e.addDoTPotencies({node:t,effectName:"DOTON",skillName:"DOTON",tickPotency:80,speedStat:"sks"})},e=>e.clearMudraInfo()),onApplication:ND});const Ch=e=>e.hasResourceAvailable("RAIJU_READY"),pD=[["NEVER",560],["MELEE_MASTERY_III_NIN",700]];lo("FORKED_RAIJU",90,{applicationDelay:.62,potency:pD,animationLock:Vt,highlightIf:Ch,validateAttempt:Ch,onConfirm:e=>{e.gainNinki(5),e.tryConsumeResource("RAIJU_READY")}});lo("FLEETING_RAIJU",90,{applicationDelay:.76,potency:pD,highlightIf:Ch,validateAttempt:Ch,onConfirm:e=>{e.gainNinki(5),e.tryConsumeResource("RAIJU_READY")}});so("DOKUMORI",66,"cd_DOKUMORI",{applicationDelay:1.07,potency:400,falloff:0,cooldown:120,onConfirm:e=>{e.gainStatus("DOKUMORI"),e.gainNinki(40),e.hasTraitUnlocked("ENHANCED_DOKUMORI")&&e.gainStatus("HIGI")}});const Oh=e=>e.hasResourceAvailable("HIDDEN")||e.hasResourceAvailable("SHADOW_WALKER");so("TRICK_ATTACK",18,"cd_TRICK_ATTACK",{autoUpgrade:{trait:"TRICK_ATTACK_MASTERY",otherSkill:"KUNAIS_BANE"},applicationDelay:.8,potency:300,positional:{potency:400,location:"rear"},cooldown:60,highlightIf:Oh,validateAttempt:Oh,onConfirm:e=>{e.gainStatus("TRICK_ATTACK"),e.tryConsumeResource("SHADOW_WALKER")}});so("KUNAIS_BANE",92,"cd_TRICK_ATTACK",{autoDowngrade:{trait:"TRICK_ATTACK_MASTERY",otherSkill:"TRICK_ATTACK"},startOnHotbar:!1,applicationDelay:1.29,cooldown:60,potency:700,falloff:0,highlightIf:Oh,validateAttempt:Oh,onConfirm:e=>{e.gainStatus("KUNAIS_BANE"),e.tryConsumeResource("SHADOW_WALKER")}});so("DREAM_WITHIN_A_DREAM",56,"cd_DREAM_WITHIN_A_DREAM",{applicationDelay:.98,cooldown:60,potency:180*3});ed("KASSATSU",50,"cd_KASSATSU",{rscType:"KASSATSU",cooldown:60,applicationDelay:0,validateAttempt:e=>!e.hasResourceAvailable("TEN_CHI_JIN")});const to=e=>e.resources.get("NINKI").available(50),td=e=>e.resources.get("NINKI").consume(50);so("BHAVACAKRA",68,"cd_BHAVACAKRA",{applicationDelay:.62,cooldown:1,potency:[["NEVER",350],["MELEE_MASTERY_III_NIN",400]],highlightIf:to,validateAttempt:to,replaceIf:[{newSkill:"ZESHO_MEPPO",condition:e=>e.hasResourceAvailable("HIGI")}],onConfirm:Ue(td,e=>e.tryConsumeResource("MEISUI")),jobPotencyModifiers:e=>e.hasResourceAvailable("MEISUI")?[X.Meisui]:[]});so("ZESHO_MEPPO",96,"cd_BHAVACAKRA",{startOnHotbar:!1,applicationDelay:1.03,cooldown:1,potency:700,highlightIf:e=>e.hasResourceAvailable("HIGI")&&to(e),validateAttempt:e=>e.hasResourceAvailable("HIGI")&&to(e),replaceIf:[{newSkill:"BHAVACAKRA",condition:e=>!e.hasResourceAvailable("HIGI")}],onConfirm:Ue(td,e=>{e.tryConsumeResource("MEISUI"),e.tryConsumeResource("HIGI")}),jobPotencyModifiers:e=>e.hasResourceAvailable("MEISUI")?[X.Meisui]:[]});so("HELLFROG_MEDIUM",62,"cd_BHAVACAKRA",{applicationDelay:.8,cooldown:1,potency:250,falloff:0,highlightIf:to,validateAttempt:to,replaceIf:[{newSkill:"DEATHFROG_MEDIUM",condition:e=>e.hasResourceAvailable("HIGI")}],onConfirm:td});so("DEATHFROG_MEDIUM",96,"cd_BHAVACAKRA",{startOnHotbar:!1,applicationDelay:.8,cooldown:1,potency:400,falloff:0,highlightIf:e=>e.hasResourceAvailable("HIGI")&&to(e),validateAttempt:e=>e.hasResourceAvailable("HIGI")&&to(e),onConfirm:Ue(td,e=>e.tryConsumeResource("HIGI"))});ed("MEISUI",72,"cd_MEISUI",{rscType:"MEISUI",cooldown:120,applicationDelay:0,highlightIf:e=>e.hasResourceAvailable("SHADOW_WALKER"),validateAttempt:e=>e.hasResourceAvailable("SHADOW_WALKER"),onConfirm:e=>{e.tryConsumeResource("SHADOW_WALKER"),e.gainNinki(50)}});ed("BUNSHIN",80,"cd_BUNSHIN",{rscType:"BUNSHIN",cooldown:90,applicationDelay:0,replaceIf:[{newSkill:"PHANTOM_KAMAITACHI",condition:e=>e.hasResourceAvailable("PHANTOM_KAMAITACHI_READY")}],highlightIf:to,validateAttempt:to,onConfirm:Ue(td,e=>e.gainStatus("PHANTOM_KAMAITACHI_READY"))});lo("PHANTOM_KAMAITACHI",80,{startOnHotbar:!1,potency:700,falloff:0,applicationDelay:1.57,highlightIf:e=>e.hasResourceAvailable("PHANTOM_KAMAITACHI_READY"),validateAttempt:e=>e.hasResourceAvailable("PHANTOM_KAMAITACHI_READY"),onConfirm:e=>{e.tryConsumeResource("PHANTOM_KAMAITACHI_READY"),e.gainNinki(10)},jobPotencyModifiers:e=>e.hasResourceAvailable("DOTON")?[X.HollowNozuchi,X.NinPet]:[X.NinPet]});ed("TEN_CHI_JIN",70,"cd_TEN_CHI_JIN",{rscType:"TEN_CHI_JIN",applicationDelay:0,cooldown:120,replaceIf:[{newSkill:"TENRI_JINDO",condition:e=>e.hasResourceAvailable("TENRI_JINDO_READY")}],validateAttempt:e=>!e.hasResourceAvailable("KASSATSU"),onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_TEN_CHI_JIN")&&e.gainStatus("TENRI_JINDO_READY"),e.clearMudraInfo()}});so("TENRI_JINDO",100,"cd_TENRI_JINDO",{startOnHotbar:!1,applicationDelay:1.69,cooldown:1,potency:1100,falloff:0,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("TENRI_JINDO_READY"),onConfirm:e=>e.tryConsumeResource("TENRI_JINDO_READY")});so("SHUKUCHI",40,"cd_SHUKUCHI",{applicationDelay:0,cooldown:60,maxCharges:2,animationLock:Vt});ed("SHADE_SHIFT",2,"cd_SHADE_SHIFT",{rscType:"SHADE_SHIFT",applicationDelay:.4,cooldown:120});Object.keys(fT).forEach(e=>Ft(e,`MNK/${vC[e].name}.png`));function ZB(e){switch(e){case 1:return"opo";case 2:return"raptor";case 3:return"coeurl"}return null}function QB(e){switch(e){case"opo":return C({en:"o",zh:"魔猿"});case"raptor":return C({en:"r",zh:"盗龙"});case"coeurl":return C({en:"c",zh:"猛豹"})}return null}function nC(e){switch(e){case"lunar":return C({en:e,zh:"太阴"});case"solar":return C({en:e,zh:"太阳"})}return null}class $B extends Wt{jobSpecificSelfTargetedBuffViewProps(){return Object.keys(fT).map(t=>this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){var A;const n=this.state.resources,o=["BEAST_CHAKRA_1","BEAST_CHAKRA_2","BEAST_CHAKRA_3"].map(R=>n.get(R).availableAmount()).map(ZB),l=n.get("LUNAR_NADI").available(1),r=n.get("SOLAR_NADI").available(1),d=o.map(QB).filter(R=>R!==null).join("+"),h=[nC(l?"lunar":null),nC(r?"solar":null)].filter(R=>R!==null).join("+");return[{kind:"counter",name:je("OPO_OPOS_FURY"),color:t.mnk.opo,currentStacks:n.get("OPO_OPOS_FURY").availableAmount(),maxStacks:1},{kind:"counter",name:je("RAPTORS_FURY"),color:t.mnk.raptor,currentStacks:n.get("RAPTORS_FURY").availableAmount(),maxStacks:1},{kind:"counter",name:je("COEURLS_FURY"),color:t.mnk.coeurl,currentStacks:n.get("COEURLS_FURY").availableAmount(),maxStacks:2},{kind:"chakra",name:je("CHAKRA"),regularColor:t.mnk.chakra,overflowColor:t.mnk.extraChakra,value:n.get("CHAKRA").availableAmount(),wrapCount:5},{kind:"text",name:je("BEAST_CHAKRA_TIMER"),text:o.every(R=>R!==null)?(A=n.get("BEAST_CHAKRA_1").pendingChange)==null?void 0:A.timeTillEvent.toFixed(3):"n/a"},{kind:"beast",name:je("BEAST_CHAKRA"),label:d,chakras:o,opoColor:t.mnk.opo,raptorColor:t.mnk.raptor,coeurlColor:t.mnk.coeurl},{kind:"nadi",name:je("NADI"),label:h,lunar:l,solar:r,lunarColor:t.mnk.lunar,solarColor:t.mnk.solar}]}}const Ut=(e,t,n)=>{Ye("MNK",e,t,n??{})};Ut("CHAKRA",5,{default:5});Ut("BEAST_CHAKRA",1);Ut("NADI",1);Ut("OPO_OPOS_FURY",1,{warnOnOvercap:!0});Ut("RAPTORS_FURY",1,{warnOnOvercap:!0});Ut("COEURLS_FURY",2,{warnOnOvercap:!0});Ut("MANTRA",1,{timeout:15});Ut("OPO_OPO_FORM",1,{timeout:30});Ut("RAPTOR_FORM",1,{timeout:30});Ut("COEURL_FORM",1,{timeout:30});Ut("PERFECT_BALANCE",3,{timeout:20});Ut("FORMLESS_FIST",1,{timeout:30,default:1});Ut("RIDDLE_OF_EARTH",1,{timeout:10});Ut("EARTHS_RESOLVE",1,{timeout:15});Ut("EARTHS_RUMINATION",1,{timeout:30});Ut("RIDDLE_OF_FIRE",1,{timeout:20.72});Ut("FIRES_RUMINATION",1,{timeout:20,warnOnTimeout:!0});Ut("BROTHERHOOD",1,{timeout:20});Ut("MEDITATIVE_BROTHERHOOD",1,{timeout:20});Ut("RIDDLE_OF_WIND",1,{timeout:15.78});Ut("WINDS_RUMINATION",1,{timeout:15,warnOnTimeout:!0});Ut("SIX_SIDED_STAR",1,{timeout:5});const vl=["BEAST_CHAKRA_1","BEAST_CHAKRA_2","BEAST_CHAKRA_3"];Ut("BEAST_CHAKRA_1",3);Ut("BEAST_CHAKRA_2",3);Ut("BEAST_CHAKRA_3",3);Ut("LUNAR_NADI",1);Ut("SOLAR_NADI",1);class JB extends Xt{constructor(t){super(t);const n=this.hasTraitUnlocked("ENHANCED_THUNDERCLAP")?3:2;this.cooldowns.set(new ke("cd_THUNDERCLAP",30,n,n)),this.registerRecurringEvents()}getForm(){if(this.hasResourceAvailable("OPO_OPO_FORM"))return"opo";if(this.hasResourceAvailable("RAPTOR_FORM"))return"raptor";if(this.hasResourceAvailable("COEURL_FORM"))return"coeurl"}setForm(t){["OPO_OPO_FORM","RAPTOR_FORM","COEURL_FORM","FORMLESS_FIST"].forEach(o=>this.tryConsumeResource(o));const n=t==="opo"?"OPO_OPO_FORM":t==="raptor"?"RAPTOR_FORM":t==="coeurl"?"COEURL_FORM":"FORMLESS_FIST";this.gainStatus(n)}canDoForm(t){return this.hasResourceAvailable("PERFECT_BALANCE")||this.hasResourceAvailable("FORMLESS_FIST")||this.getForm()===t}gainChakra(){this.resources.get("CHAKRA").gain(1)}maybeGainChakra(t){if(this.hasResourceAvailable("MEDITATIVE_BROTHERHOOD"))for(let l=0;l<this.resources.get("PARTY_SIZE").availableAmount()-1;l++)this.triggersEffect(.2,!0)&&this.gainChakra();if(this.hasTraitUnlocked("ENHANCED_BROTHERHOOD")&&this.hasResourceAvailable("MEDITATIVE_BROTHERHOOD")){this.gainChakra();return}const n=t?1:this.config.critRate,o=this.triggersEffect(n,!0);if(t||o){const l=this.hasTraitUnlocked("DEEP_MEDITATION_II")?1:.8,r=this.triggersEffect(l);(l===1||r)&&this.gainChakra()}}consumeFiveChakra(){const t=this.resources.get("CHAKRA");t.consume(Math.min(t.availableAmount(),5))}startPB(){["OPO_OPO_FORM","RAPTOR_FORM","COEURL_FORM","FORMLESS_FIST"].forEach(t=>this.tryConsumeResource(t)),this.gainStatus("PERFECT_BALANCE")}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("RIDDLE_OF_FIRE")&&t.addBuff(H.RiddleOfFire),this.hasResourceAvailable("BROTHERHOOD")&&t.addBuff(H.Brotherhood)}inherentSpeedModifier(){return this.hasTraitUnlocked("ENHANCED_GREASED_LIGHTNING_III")?20:15}get statusPropsGenerator(){return new $B(this)}}const Ya=(e,t,n)=>{const o=n.form?l=>n.form.requiredForm===void 0||l.canDoForm(n.form.requiredForm):void 0;return na("MNK",e,t,{...n,positional:void 0,highlightIf:l=>{var r;return!o&&!n.ball&&!n.highlightIf?!1:((o==null?void 0:o(l))??!0)&&(n.ball?l.hasResourceAvailable(n.ball.rsc):!0)&&(((r=n.highlightIf)==null?void 0:r.call(n,l))??!0)},validateAttempt:l=>{var r;return((o==null?void 0:o(l))??!0)&&(((r=n.validateAttempt)==null?void 0:r.call(n,l))??!0)},recastTime:l=>l.config.adjustedSksGCD(n.recastTime??2.5,l.inherentSpeedModifier()),onConfirm:Ue(n.onConfirm,e!=="SIX_SIDED_STAR"&&n.potency?(l,r)=>{const d=r.getInitialPotency();d&&l.maybeGainChakra(d.modifiers.includes(X.AutoCrit))}:void 0,n.form?l=>{const r=n.form.nextForm;if(l.tryConsumeResource("PERFECT_BALANCE")){for(const h of vl)if(!l.hasResourceAvailable(h)){let E=3;r==="raptor"?E=1:r==="coeurl"&&(E=2),l.resources.get(h).gain(E),h==="BEAST_CHAKRA_3"&&vl.forEach(A=>l.enqueueResourceDrop(A,20));break}}else l.setForm(r)}:void 0,n.ball?l=>l.tryConsumeResource(n.ball.rsc):void 0),jobPotencyModifiers:l=>{var h;const r=((h=n.jobPotencyModifiers)==null?void 0:h.call(n,l))??[],d=n.positional&&l.hitPositional(n.positional.location);return l.hasResourceAvailable("BROTHERHOOD")&&r.push(X.Brotherhood),l.hasResourceAvailable("RIDDLE_OF_FIRE")&&r.push(X.RiddleOfFire),n.ball&&l.hasResourceAvailable(n.ball.rsc)?(r.push({kind:"adder",source:U.MNK_BALL,additiveAmount:aa(l,n.ball.potency)-aa(l,n.potency)}),n.positional&&d&&r.push($E(aa(l,n.positional.ballPotency)-aa(l,n.ball.potency)))):n.positional&&d&&r.push($E(aa(l,n.positional.potency)-aa(l,n.potency))),r}})},df=(e,t,n,o)=>ot("MNK",e,t,n,{...o}),fc=(e,t,n,o)=>ze("MNK",e,t,n,o);[["BOOTSHINE",1,1.11,[["NEVER",180],["MELEE_MASTERY_MNK",220]]],["LEAPING_OPO",92,.62,260]].forEach(([e,t,n,o],l)=>{Ya(e,t,{...l===0?{autoUpgrade:{otherSkill:"LEAPING_OPO",trait:"BEAST_CHAKRA_MASTERY"}}:{autoDowngrade:{otherSkill:"BOOTSHINE",trait:"BEAST_CHAKRA_MASTERY"}},form:{nextForm:"raptor"},ball:{potency:l===0?[["NEVER",380],["MELEE_MASTERY_MNK",420]]:460,rsc:"OPO_OPOS_FURY"},applicationDelay:n,potency:o,highlightIf:d=>d.canDoForm("opo"),jobPotencyModifiers:d=>d.hasResourceAvailable("OPO_OPOS_FURY")?[X.AutoCrit]:[]})});[["TRUE_STRIKE",4,.8,[["NEVER",260],["MELEE_MASTERY_MNK",300]]],["RISING_RAPTOR",92,.89,340]].forEach(([e,t,n,o],l)=>{Ya(e,t,{...l===0?{autoUpgrade:{otherSkill:"RISING_RAPTOR",trait:"BEAST_CHAKRA_MASTERY"}}:{autoDowngrade:{otherSkill:"TRUE_STRIKE",trait:"BEAST_CHAKRA_MASTERY"}},form:{requiredForm:"raptor",nextForm:"coeurl"},ball:{potency:l===0?[["NEVER",460],["MELEE_MASTERY_MNK",500]]:540,rsc:"RAPTORS_FURY"},applicationDelay:n,potency:o})});[["SNAP_PUNCH",6,.76,[["NEVER",230],["MELEE_MASTERY_MNK",270]]],["POUNCING_COEURL",92,1.02,310]].forEach(([e,t,n,o],l)=>{Ya(e,t,{...l===0?{autoUpgrade:{otherSkill:"POUNCING_COEURL",trait:"BEAST_CHAKRA_MASTERY"}}:{autoDowngrade:{otherSkill:"SNAP_PUNCH",trait:"BEAST_CHAKRA_MASTERY"}},form:{requiredForm:"coeurl",nextForm:"opo"},ball:{potency:l===0?[["NEVER",380],["MELEE_MASTERY_MNK",420]]:460,rsc:"COEURLS_FURY"},positional:{potency:l===0?[["NEVER",290],["MELEE_MASTERY_MNK",330]]:370,ballPotency:l===0?[["NEVER",440],["MELEE_MASTERY_MNK",480]]:520,location:"flank"},applicationDelay:n,potency:o})});Ya("DRAGON_KICK",50,{applicationDelay:1.29,potency:[["NEVER",240],["MELEE_MASTERY_MNK",280],["MELEE_MASTERY_II_MNK",320]],form:{nextForm:"raptor"},highlightIf:e=>e.canDoForm("opo")&&!e.hasResourceAvailable("OPO_OPOS_FURY"),onConfirm:e=>e.resources.get("OPO_OPOS_FURY").gain(1)});Ya("TWIN_SNAKES",18,{applicationDelay:.84,potency:[["NEVER",340],["MELEE_MASTERY_MNK",380],["MELEE_MASTERY_II_MNK",420]],form:{requiredForm:"raptor",nextForm:"coeurl"},highlightIf:e=>!e.hasResourceAvailable("RAPTORS_FURY"),onConfirm:e=>e.resources.get("RAPTORS_FURY").gain(1)});Ya("DEMOLISH",30,{applicationDelay:1.6,potency:[["NEVER",280],["MELEE_MASTERY_MNK",320],["MELEE_MASTERY_II_MNK",360]],form:{requiredForm:"coeurl",nextForm:"opo"},positional:{potency:[["NEVER",340],["MELEE_MASTERY_MNK",380],["MELEE_MASTERY_II_MNK",420]],location:"rear"},highlightIf:e=>!e.hasResourceAvailable("COEURLS_FURY"),onConfirm:e=>e.resources.get("COEURLS_FURY").gain(2)});[["ARM_OF_THE_DESTROYER",26,.54,110],["SHADOW_OF_THE_DESTROYER",82,.4,120]].forEach(([e,t,n,o],l)=>{Ya(e,t,{...l===0?{autoUpgrade:{otherSkill:"SHADOW_OF_THE_DESTROYER",trait:"ARM_OF_THE_DESTROYER_MASTERY"}}:{autoDowngrade:{otherSkill:"ARM_OF_THE_DESTROYER",trait:"ARM_OF_THE_DESTROYER_MASTERY"}},applicationDelay:n,potency:o,falloff:0,form:{nextForm:"raptor"},highlightIf:d=>d.canDoForm("opo"),jobPotencyModifiers:l===1?d=>d.hasResourceAvailable("OPO_OPO_FORM")?[X.AutoCrit]:[]:void 0})});Ya("ROCKBREAKER",30,{applicationDelay:.94,potency:150,falloff:0,form:{requiredForm:"raptor",nextForm:"coeurl"}});Ya("FOUR_POINT_FURY",45,{applicationDelay:.97,potency:140,falloff:0,form:{requiredForm:"coeurl",nextForm:"opo"}});const CD=e=>{const t=vl.map(n=>e.resources.get(n).availableAmount());return e.hasResourceAvailable("LUNAR_NADI")&&e.hasResourceAvailable("SOLAR_NADI")&&t.every(n=>n>0)},IS=e=>{const t=vl.map(l=>e.resources.get(l).availableAmount()),n=t[0];return n>0&&t[1]===n&&t[2]===n&&!(e.hasResourceAvailable("LUNAR_NADI")&&e.hasResourceAvailable("SOLAR_NADI"))},_S=e=>{const t=vl.map(o=>e.resources.get(o).availableAmount()),n=[!1,!1,!1];return t.forEach(o=>{console.assert(o<4,"beast chakra had invalid value"),o<4&&o>0&&(n[o-1]=!0)}),n.every(o=>o)&&t.every(o=>o>0)&&!(e.hasResourceAvailable("LUNAR_NADI")&&e.hasResourceAvailable("SOLAR_NADI"))},OD=e=>{const t=vl.map(n=>e.resources.get(n).availableAmount());return!IS(e)&&!_S(e)&&t.every(n=>n>0)&&!(e.hasResourceAvailable("LUNAR_NADI")&&e.hasResourceAvailable("SOLAR_NADI"))},e2=e=>!CD(e)&&!IS(e)&&!_S(e)&&!OD(e),ad=[{newSkill:"MASTERFUL_BLITZ",condition:e2},{newSkill:"ELIXIR_FIELD",condition:IS},{newSkill:"FLINT_STRIKE",condition:_S},{newSkill:"CELESTIAL_REVOLUTION",condition:OD},{newSkill:"TORNADO_KICK",condition:CD}],Ef=e=>{vl.forEach(t=>e.tryConsumeResource(t,!0)),e.setForm("formless")},bD=e=>t=>t.resources.get(e==="lunar"?"LUNAR_NADI":"SOLAR_NADI").gain(1);Ya("MASTERFUL_BLITZ",60,{applicationDelay:0,replaceIf:ad,validateAttempt:e=>!1});[["TORNADO_KICK",60,1.69,1200],["PHANTOM_RUSH",90,.4,1500]].forEach(([e,t,n,o],l)=>{Ya(e,t,{...l===0?{autoUpgrade:{otherSkill:"PHANTOM_RUSH",trait:"TORNADO_KICK_MASTERY"}}:{autoDowngrade:{otherSkill:"TORNADO_KICK",trait:"TORNADO_KICK_MASTERY"}},startOnHotbar:!1,applicationDelay:n,replaceIf:ad,highlightIf:d=>!0,potency:o,falloff:.35,onConfirm:Ue(Ef,d=>{d.tryConsumeResource("LUNAR_NADI"),d.tryConsumeResource("SOLAR_NADI")})})});[["ELIXIR_FIELD",60,1.07,800],["ELIXIR_BURST",92,1.42,900]].forEach(([e,t,n,o],l)=>{Ya(e,t,{...l===0?{autoUpgrade:{otherSkill:"ELIXIR_BURST",trait:"BEAST_CHAKRA_MASTERY"}}:{autoDowngrade:{otherSkill:"ELIXIR_FIELD",trait:"BEAST_CHAKRA_MASTERY"}},startOnHotbar:!1,applicationDelay:n,replaceIf:ad,highlightIf:d=>!0,potency:o,falloff:.35,onConfirm:Ue(Ef,bD("lunar"))})});Ya("CELESTIAL_REVOLUTION",60,{startOnHotbar:!1,applicationDelay:.89,replaceIf:ad,highlightIf:e=>!0,potency:600,onConfirm:Ue(Ef,e=>e.resources.get(e.hasResourceAvailable("LUNAR_NADI")?"SOLAR_NADI":"LUNAR_NADI").gain(1))});[["FLINT_STRIKE",60,.53,800],["RISING_PHOENIX",86,.76,900]].forEach(([e,t,n,o],l)=>{Ya(e,t,{...l===0?{autoUpgrade:{otherSkill:"RISING_PHOENIX",trait:"FLINT_STRIKE_MASTERY"}}:{autoDowngrade:{otherSkill:"FLINT_STRIKE",trait:"FLINT_STRIKE_MASTERY"}},startOnHotbar:!1,applicationDelay:n,replaceIf:ad,highlightIf:d=>!0,potency:o,falloff:.35,onConfirm:Ue(Ef,bD("solar"))})});Ya("SIX_SIDED_STAR",80,{recastTime:5,applicationDelay:.62,potency:[["NEVER",710],["MELEE_MASTERY_II_MNK",780]],onConfirm:e=>{e.tryConsumeResource("CHAKRA",!0),e.gainStatus("SIX_SIDED_STAR")},jobPotencyModifiers:e=>{const t=e.resources.get("CHAKRA").availableAmount();return t>0?[{kind:"adder",additiveAmount:80*t,source:U.SSS_CHAKRA}]:[]}});Ya("FORM_SHIFT",52,{applicationDelay:0,onConfirm:e=>e.setForm("formless")});function gS(e,t,n){return na("MNK",e,t,{autoUpgrade:n.autoUpgrade,autoDowngrade:n.autoDowngrade,recastTime:1,applicationDelay:0,replaceIf:[{newSkill:n.spender,condition:o=>o.resources.get("CHAKRA").available(5)}],validateAttempt:o=>!o.resources.get("CHAKRA").available(5),onConfirm:o=>o.resources.get("CHAKRA").gain(o.isInCombat()?1:5)})}gS("FORBIDDEN_MEDITATION",54,{spender:"THE_FORBIDDEN_CHAKRA"});gS("INSPIRITED_MEDITATION",40,{autoUpgrade:{otherSkill:"ENLIGHTENED_MEDITATION",trait:"HOWLING_FIST_MASTERY"},spender:"HOWLING_FIST"});gS("ENLIGHTENED_MEDITATION",74,{autoDowngrade:{otherSkill:"ENLIGHTENED_MEDITATION",trait:"HOWLING_FIST_MASTERY"},spender:"ENLIGHTENMENT"});[["HOWLING_FIST",40,1.16,100,"cd_THE_FORBIDDEN_CHAKRA"],["ENLIGHTENMENT",74,.76,160,"cd_ENLIGHTENMENT"]].forEach(([e,t,n,o,l],r)=>{df(e,t,l,{...r===0?{autoUpgrade:{otherSkill:"ENLIGHTENMENT",trait:"HOWLING_FIST_MASTERY"}}:{autoDowngrade:{otherSkill:"HOWLING_FIST",trait:"HOWLING_FIST_MASTERY"}},startOnHotbar:!1,applicationDelay:n,cooldown:1,potency:o,falloff:0,requiresCombat:!0,highlightIf:h=>h.resources.get("CHAKRA").available(5),validateAttempt:h=>h.resources.get("CHAKRA").available(5),onConfirm:h=>h.consumeFiveChakra()})});df("THE_FORBIDDEN_CHAKRA",54,"cd_THE_FORBIDDEN_CHAKRA",{startOnHotbar:!1,replaceIf:[{newSkill:"FORBIDDEN_MEDITATION",condition:e=>!e.resources.get("CHAKRA").available(5)}],applicationDelay:1.48,cooldown:1,potency:[["NEVER",310],["MELEE_MASTERY_MNK",400]],requiresCombat:!0,highlightIf:e=>e.resources.get("CHAKRA").available(5),validateAttempt:e=>e.resources.get("CHAKRA").available(5),onConfirm:e=>e.consumeFiveChakra()});fc("PERFECT_BALANCE",50,"cd_PERFECT_BALANCE",{rscType:"PERFECT_BALANCE",applicationDelay:0,cooldown:40,maxCharges:2,requiresCombat:!0,validateAttempt:e=>!vl.map(t=>e.hasResourceAvailable(t)).some(t=>t),onConfirm:e=>e.startPB()});fc("RIDDLE_OF_FIRE",68,"cd_RIDDLE_OF_FIRE",{rscType:"RIDDLE_OF_FIRE",applicationDelay:0,cooldown:60,replaceIf:[{newSkill:"FIRES_REPLY",condition:e=>e.hasResourceAvailable("FIRES_RUMINATION")}],onConfirm:e=>e.gainStatus("FIRES_RUMINATION")});fc("BROTHERHOOD",70,"cd_BROTHERHOOD",{rscType:"BROTHERHOOD",applicationDelay:.76,cooldown:120,onApplication:e=>{e.gainStatus("MEDITATIVE_BROTHERHOOD"),e.resources.set(new sn("CHAKRA",10,e.resources.get("CHAKRA").availableAmount())),e.addEvent(new be("restore BH max stacks",Kt("MNK","BROTHERHOOD").maxTimeout,()=>e.resources.set(new sn("CHAKRA",5,e.resources.get("CHAKRA").availableAmount()))))}});fc("RIDDLE_OF_WIND",72,"cd_RIDDLE_OF_WIND",{rscType:"RIDDLE_OF_WIND",applicationDelay:0,cooldown:90,replaceIf:[{newSkill:"WINDS_REPLY",condition:e=>e.hasResourceAvailable("WINDS_RUMINATION")}],onConfirm:e=>e.gainStatus("WINDS_RUMINATION")});df("THUNDERCLAP",35,"cd_THUNDERCLAP",{applicationDelay:0,cooldown:30,maxCharges:3,animationLock:Vt,drawsAggro:!0});fc("MANTRA",42,"cd_MANTRA",{rscType:"MANTRA",applicationDelay:1.5,cooldown:90});fc("RIDDLE_OF_EARTH",64,"cd_RIDDLE_OF_EARTH",{rscType:"RIDDLE_OF_EARTH",applicationDelay:0,cooldown:120,healingPotency:100,replaceIf:[{newSkill:"EARTHS_REPLY",condition:e=>e.hasResourceAvailable("EARTHS_RUMINATION")}],onConfirm:e=>e.gainStatus("EARTHS_RUMINATION")});df("EARTHS_REPLY",64,"cd_EARTHS_REPLY",{startOnHotbar:!1,applicationDelay:1.07,cooldown:1,healingPotency:300,highlightIf:e=>e.hasResourceAvailable("EARTHS_RUMINATION"),validateAttempt:e=>e.hasResourceAvailable("EARTHS_RUMINATION"),onConfirm:e=>e.tryConsumeResource("EARTHS_RUMINATION")});Ya("WINDS_REPLY",96,{startOnHotbar:!1,applicationDelay:1.2,potency:1040,falloff:.35,highlightIf:e=>e.hasResourceAvailable("WINDS_RUMINATION"),validateAttempt:e=>e.hasResourceAvailable("WINDS_RUMINATION"),onConfirm:e=>e.tryConsumeResource("WINDS_RUMINATION")});Ya("FIRES_REPLY",100,{startOnHotbar:!1,applicationDelay:1.42,potency:1400,falloff:.35,highlightIf:e=>e.hasResourceAvailable("FIRES_RUMINATION"),validateAttempt:e=>e.hasResourceAvailable("FIRES_RUMINATION"),onConfirm:e=>{e.tryConsumeResource("FIRES_RUMINATION"),e.setForm("formless")}});Object.keys(NT).forEach(e=>Ft(e,`VPR/${Ge[e].name}.png`));const t2=Object.keys(NT);class a2 extends Wt{jobSpecificOtherTargetedBuffViewProps(){return[]}jobSpecificSelfTargetedBuffViewProps(){return t2.map(t=>this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){var I,p;const n=this.state.resources,o=n.get("VPR_COMBO"),l=n.get("VPR_AOE_COMBO"),r=["HUNTERS_COIL_READY","SWIFTSKINS_COIL_READY","HUNTERS_DEN_READY","SWIFTSKINS_DEN_READY"],d=n.get("RATTLING_COIL").availableAmount(),h=n.get("SERPENT_OFFERINGS").availableAmount(),E=n.get("ANGUINE_TRIBUTE").availableAmount(),A=o.available(1)?(I=o.pendingChange)==null?void 0:I.timeTillEvent:l.available(1)?(p=l.pendingChange)==null?void 0:p.timeTillEvent:void 0,R=r.filter(_=>n.get(_).available(1)),T=R.length>0?Math.max(...R.map(_=>n.get(_).pendingChange.timeTillEvent)):void 0,S=[{kind:"bar",name:C({en:"Dual Wield Combo Timer",zh:"连击监控"}),color:t.vpr.vprComboTimer,progress:A?A/30:0,valueString:(A==null?void 0:A.toFixed(3))??"N/A"},{kind:"bar",name:C({en:"Twinblade Combo Timer",zh:"双牙连击监控"}),color:t.vpr.vprComboTimer,progress:T?T/30:0,valueString:(T==null?void 0:T.toFixed(3))??"N/A"},{kind:"counter",name:je("RATTLING_COIL"),color:t.vpr.rattlingCoil,currentStacks:d,maxStacks:n.get("RATTLING_COIL").maxValue}];return this.state.hasTraitUnlocked("SERPENTS_LINEAGE")&&S.push({kind:"bar",name:je("SERPENT_OFFERINGS"),color:h>=50?t.vpr.anguineTribute:t.vpr.serpentOfferings,progress:h/100,valueString:h.toFixed(0)},{kind:"counter",name:je("ANGUINE_TRIBUTE"),color:t.vpr.anguineTribute,currentStacks:E,maxStacks:n.get("ANGUINE_TRIBUTE").maxValue}),S}}const ut=(e,t,n)=>{Ye("VPR",e,t,n??{})};ut("RATTLING_COIL",3,{warnOnOvercap:!0});ut("SERPENT_OFFERINGS",100,{warnOnOvercap:!0});ut("ANGUINE_TRIBUTE",5,{timeout:30});ut("HUNTERS_INSTINCT",1,{timeout:40});ut("SWIFTSCALED",1,{timeout:40});ut("HONED_STEEL",1,{timeout:60});ut("HONED_REAVERS",1,{timeout:60});ut("FLANKSTUNG_VENOM",1,{timeout:60});ut("HINDSTUNG_VENOM",1,{timeout:60});ut("FLANKSBANE_VENOM",1,{timeout:60});ut("HINDSBANE_VENOM",1,{timeout:60});ut("GRIMSKINS_VENOM",1,{timeout:60});ut("GRIMHUNTERS_VENOM",1,{timeout:60});ut("HUNTERS_VENOM",1,{timeout:30});ut("SWIFTSKINS_VENOM",1,{timeout:30});ut("POISED_FOR_TWINFANG",1,{timeout:60});ut("POISED_FOR_TWINBLOOD",1,{timeout:60});ut("FELLHUNTERS_VENOM",1,{timeout:30});ut("FELLSKINS_VENOM",1,{timeout:30});ut("READY_TO_REAWAKEN",1,{timeout:30,warnOnTimeout:!0});ut("REAWAKENED",1,{timeout:30,warnOnTimeout:!0});ut("DEATH_RATTLE_READY",1);ut("COIL_OGCD_READY",2);ut("DEN_OGCD_READY",2);ut("UNCOILED_OGCD_READY",2);ut("HUNTERS_COIL_READY",1,{timeout:30,warnOnTimeout:!0});ut("HUNTERS_DEN_READY",1,{timeout:30,warnOnTimeout:!0});ut("SWIFTSKINS_COIL_READY",1,{timeout:30,warnOnTimeout:!0});ut("SWIFTSKINS_DEN_READY",1,{timeout:30,warnOnTimeout:!0});ut("LAST_LASH_READY",1);ut("LEGACY_READY",4);ut("VPR_COMBO",4,{timeout:30});ut("VPR_AOE_COMBO",2,{timeout:30});ut("REAWAKEN_COMBO",4);const DD=["DEATH_RATTLE_READY","LAST_LASH_READY","COIL_OGCD_READY","UNCOILED_OGCD_READY","HUNTERS_VENOM","SWIFTSKINS_VENOM","POISED_FOR_TWINFANG","POISED_FOR_TWINBLOOD","DEN_OGCD_READY","LEGACY_READY"],yD=["FLANKSBANE_VENOM","FLANKSTUNG_VENOM"],vD=["HINDSBANE_VENOM","HINDSTUNG_VENOM"],ic=[...yD,...vD];class n2 extends Xt{constructor(t){super(t);const n=this.hasTraitUnlocked("ENHANCED_SLITHER")?3:2;this.cooldowns.set(new ke("cd_SLITHER",30,n,n));const o=this.hasTraitUnlocked("ENHANCED_VIPERS_RATTLE")?3:2,l=this.hasTraitUnlocked("ENHANCED_SERPENTS_LINEAGE")?5:4;this.resources.set(new sn("RATTLING_COIL",o,0,!0)),this.resources.set(new sn("ANGUINE_TRIBUTE",l,0)),this.registerRecurringEvents()}inherentSpeedModifier(){return 15}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("HUNTERS_INSTINCT")&&t.addBuff(H.HuntersInstinct)}jobSpecificAddSpeedBuffCovers(t,n){this.hasResourceAvailable("SWIFTSCALED")&&n.cdName==="cd_GCD"&&t.addBuff(H.Swiftscaled)}get statusPropsGenerator(){return new a2(this)}getSwiftscaledModifier(){return this.hasResourceAvailable("SWIFTSCALED")?this.inherentSpeedModifier():0}isNoReawakenComboAt(t){return!this.hasResourceAvailable("REAWAKENED")&&this.hasResourceExactly("VPR_COMBO",t)}isNoReawakenAoeComboAt(t){return!this.hasResourceAvailable("REAWAKENED")&&this.hasResourceExactly("VPR_AOE_COMBO",t)}setLegacy(t){this.hasTraitUnlocked("SERPENTS_LEGACY")&&this.resources.get("LEGACY_READY").overrideCurrentValue(t)}gainOfferings(t){this.hasTraitUnlocked("SERPENTS_LINEAGE")&&this.resources.get("SERPENT_OFFERINGS").gain(t)}processCombo(t){if(t==="WRITHING_SNAP"||t==="UNCOILED_FURY")return;const o=["REAWAKEN","FIRST_GENERATION","SECOND_GENERATION","THIRD_GENERATION","FOURTH_GENERATION"].indexOf(t);if(o!==-1){this.setComboState("REAWAKEN_COMBO",(o+1)%5);return}const l=this.resources.get("VPR_COMBO").availableAmount(),r=this.resources.get("VPR_AOE_COMBO").availableAmount(),[d,h]=new Map([["STEEL_FANGS",[1,0]],["REAVING_FANGS",[1,0]],["HUNTERS_STING",[2,0]],["SWIFTSKINS_STING",[3,0]],["FLANKSTING_STRIKE",[0,0]],["FLANKSBANE_FANG",[0,0]],["HINDSTING_STRIKE",[0,0]],["HINDSBANE_FANG",[0,0]],["STEEL_MAW",[0,1]],["REAVING_MAW",[0,1]],["HUNTERS_BITE",[0,2]],["SWIFTSKINS_BITE",[0,2]],["JAGGED_MAW",[0,0]],["BLOODIED_MAW",[0,0]]]).get(t)??[l,r];d!==l&&this.setComboState("VPR_COMBO",d),h!==r&&this.setComboState("VPR_AOE_COMBO",h),this.setComboState("REAWAKEN_COMBO",0)}cancelVicewinderCombo(t){t!=="SWIFTSKINS_COIL"&&this.tryConsumeResource("HUNTERS_COIL_READY"),t!=="HUNTERS_COIL"&&this.tryConsumeResource("SWIFTSKINS_COIL_READY"),t!=="SWIFTSKINS_DEN"&&this.tryConsumeResource("HUNTERS_DEN_READY"),t!=="HUNTERS_DEN"&&this.tryConsumeResource("SWIFTSKINS_DEN_READY")}consumeAnguine(){this.tryConsumeResource("ANGUINE_TRIBUTE"),this.hasResourceAvailable("ANGUINE_TRIBUTE")||this.cancelReawaken()}cancelReawaken(){this.tryConsumeResource("LEGACY_READY",!0),this.tryConsumeResource("ANGUINE_TRIBUTE",!0),this.tryConsumeResource("REAWAKENED"),this.setComboState("REAWAKEN_COMBO",0)}applyExtendedStatus(t,n){ic.includes(t)&&ic.forEach(r=>r!==t&&this.tryConsumeResource(r));const o=this.resources.get(t),l=Kt("VPR",t);this.hasResourceAvailable(t)?l.maxTimeout>0&&o.overrideTimer(this,l.maxTimeout+n):(o.gain(1),l.maxTimeout>0&&this.enqueueResourceDrop(t,l.maxTimeout+n))}}const da=(e,t,n)=>{var l,r;const o=(r=(l=n.replaceIf)==null?void 0:l.find(d=>d.newSkill===e))==null?void 0:r.condition;return na("VPR",e,t,{...n,recastTime:d=>d.config.adjustedSksGCD(n.baseRecastTime??2.5,d.getSwiftscaledModifier()),validateAttempt:ju(n.validateAttempt,o),onConfirm:Ue(d=>{e!=="UNCOILED_FURY"&&e!=="WRITHING_SNAP"&&d.cancelVicewinderCombo(e),DD.forEach(h=>{d.tryConsumeResource(h,!0)&&N.reportWarning({kind:"overwrite",rsc:h})})},n.onConfirm,n.extendedStatus?d=>d.applyExtendedStatus(n.extendedStatus,n.applicationDelay):void 0,d=>d.processCombo(e)),jobPotencyModifiers:d=>{var E;const h=((E=n.jobPotencyModifiers)==null?void 0:E.call(n,d))??[];return d.hasResourceAvailable("HUNTERS_INSTINCT")&&h.push(X.HuntersInstinct),h}})},Bo=(e,t,n,o)=>ot("VPR",e,t,n,{...o,jobPotencyModifiers:l=>{var d;const r=((d=o.jobPotencyModifiers)==null?void 0:d.call(o,l))??[];return l.hasResourceAvailable("HUNTERS_INSTINCT")&&r.push(X.HuntersInstinct),r}}),MD={newSkill:"FIRST_GENERATION",condition:e=>e.hasResourceAvailable("REAWAKENED")},LD={newSkill:"SECOND_GENERATION",condition:e=>e.hasResourceAvailable("REAWAKENED")},oc=[MD];oc.push(...["STEEL_FANGS","HUNTERS_STING","FLANKSTING_STRIKE","HINDSTING_STRIKE"].map((e,t)=>({newSkill:e,condition:n=>n.isNoReawakenComboAt(t)})));const lc=[LD];lc.push(...["REAVING_FANGS","SWIFTSKINS_STING","FLANKSBANE_FANG","HINDSBANE_FANG"].map((e,t)=>({newSkill:e,condition:n=>n.isNoReawakenComboAt(t)})));const hf=[MD];hf.push(...["STEEL_MAW","HUNTERS_BITE","JAGGED_MAW"].map((e,t)=>({newSkill:e,condition:n=>n.isNoReawakenAoeComboAt(t)})));const ff=[LD];ff.push(...["REAVING_MAW","SWIFTSKINS_BITE","BLOODIED_MAW"].map((e,t)=>({newSkill:e,condition:n=>n.isNoReawakenAoeComboAt(t)})));const HD=[{newSkill:"HUNTERS_COIL",condition:e=>!e.hasResourceAvailable("REAWAKENED")},{newSkill:"THIRD_GENERATION",condition:e=>e.hasResourceAvailable("REAWAKENED")}],UD=[{newSkill:"SWIFTSKINS_COIL",condition:e=>!e.hasResourceAvailable("REAWAKENED")},{newSkill:"FOURTH_GENERATION",condition:e=>e.hasResourceAvailable("REAWAKENED")}],Af=[{newSkill:"SERPENTS_TAIL",condition:e=>!DD.some(t=>e.hasResourceAvailable(t))},{newSkill:"DEATH_RATTLE",condition:e=>e.hasResourceAvailable("DEATH_RATTLE_READY")},{newSkill:"LAST_LASH",condition:e=>e.hasResourceAvailable("LAST_LASH_READY")},{newSkill:"FIRST_LEGACY",condition:e=>e.hasResourceExactly("LEGACY_READY",1)},{newSkill:"SECOND_LEGACY",condition:e=>e.hasResourceExactly("LEGACY_READY",2)},{newSkill:"THIRD_LEGACY",condition:e=>e.hasResourceExactly("LEGACY_READY",3)},{newSkill:"FOURTH_LEGACY",condition:e=>e.hasResourceExactly("LEGACY_READY",4)}],kD=[{newSkill:"TWINFANG",condition:e=>!["COIL_OGCD_READY","UNCOILED_OGCD_READY","DEN_OGCD_READY"].some(t=>e.hasResourceAvailable(t))},{newSkill:"TWINFANG_BITE",condition:e=>e.hasResourceAvailable("COIL_OGCD_READY")},{newSkill:"TWINFANG_THRESH",condition:e=>e.hasResourceAvailable("DEN_OGCD_READY")},{newSkill:"UNCOILED_TWINFANG",condition:e=>e.hasResourceAvailable("UNCOILED_OGCD_READY")}],xD=[{newSkill:"TWINBLOOD",condition:e=>!["COIL_OGCD_READY","UNCOILED_OGCD_READY","DEN_OGCD_READY"].some(t=>e.hasResourceAvailable(t))},{newSkill:"TWINBLOOD_BITE",condition:e=>e.hasResourceAvailable("COIL_OGCD_READY")},{newSkill:"TWINBLOOD_THRESH",condition:e=>e.hasResourceAvailable("DEN_OGCD_READY")},{newSkill:"UNCOILED_TWINBLOOD",condition:e=>e.hasResourceAvailable("UNCOILED_OGCD_READY")}],PD=[{newSkill:"REAWAKEN",condition:e=>!e.hasResourceAvailable("ANGUINE_TRIBUTE")},{newSkill:"OUROBOROS",condition:e=>e.hasResourceAvailable("ANGUINE_TRIBUTE")}];da("WRITHING_SNAP",15,{applicationDelay:.488,potency:200});da("STEEL_FANGS",1,{replaceIf:oc,applicationDelay:1.158,potency:[["NEVER",180],["MELEE_MASTERY_VPR",200]],jobPotencyModifiers:e=>e.hasResourceAvailable("HONED_STEEL")?[X.HonedST]:[],highlightIf:e=>e.hasResourceAvailable("HONED_STEEL"),onConfirm:e=>e.tryConsumeResource("HONED_STEEL"),extendedStatus:"HONED_REAVERS"});da("REAVING_FANGS",10,{replaceIf:lc,applicationDelay:1.293,potency:[["NEVER",180],["MELEE_MASTERY_VPR",200]],jobPotencyModifiers:e=>e.hasResourceAvailable("HONED_REAVERS")?[X.HonedST]:[],highlightIf:e=>e.hasResourceAvailable("HONED_REAVERS"),onConfirm:e=>e.tryConsumeResource("HONED_REAVERS"),extendedStatus:"HONED_STEEL"});da("HUNTERS_STING",5,{startOnHotbar:!1,replaceIf:oc,applicationDelay:.89,potency:[["NEVER",240],["MELEE_MASTERY_VPR",300]],highlightIf:e=>!ic.some(t=>e.hasResourceAvailable(t))||yD.some(t=>e.hasResourceAvailable(t)),extendedStatus:"HUNTERS_INSTINCT"});da("SWIFTSKINS_STING",20,{startOnHotbar:!1,replaceIf:lc,applicationDelay:1.16,potency:[["NEVER",280],["MELEE_MASTERY_VPR",300]],highlightIf:e=>!ic.some(t=>e.hasResourceAvailable(t))||vD.some(t=>e.hasResourceAvailable(t)),extendedStatus:"SWIFTSCALED"});const i2=[["FLANKSTING_STRIKE",1.649,"flank","FLANKSTUNG_VENOM","HINDSTUNG_VENOM",oc],["FLANKSBANE_FANG",1.604,"flank","FLANKSBANE_VENOM","HINDSBANE_VENOM",lc],["HINDSTING_STRIKE",.98,"rear","HINDSTUNG_VENOM","FLANKSBANE_VENOM",oc],["HINDSBANE_FANG",1.203,"rear","HINDSBANE_VENOM","FLANKSTUNG_VENOM",lc]];i2.forEach(([e,t,n,o,l,r])=>{da(e,30,{startOnHotbar:!1,replaceIf:r,applicationDelay:t,potency:[["NEVER",320],["MELEE_MASTERY_II_VPR",340]],positional:{potency:[["NEVER",380],["MELEE_MASTERY_II_VPR",400]],location:n},jobPotencyModifiers:d=>d.hasResourceAvailable(o)?[X.VenomST]:[],highlightIf:d=>!ic.some(h=>d.hasResourceAvailable(h))||d.hasResourceAvailable(o),onConfirm:d=>{d.gainStatus("DEATH_RATTLE_READY"),d.resources.get("SERPENT_OFFERINGS").gain(10),ic.filter(h=>h!==o).some(h=>d.hasResourceAvailable(h))&&N.reportWarning({kind:"custom",en:"incorrect combo ender!"})},extendedStatus:l})});da("HUNTERS_COIL",65,{replaceIf:HD,applicationDelay:.982,potency:570,positional:{potency:620,location:"flank"},baseRecastTime:3,highlightIf:e=>e.hasResourceAvailable("HUNTERS_COIL_READY"),validateAttempt:e=>e.hasResourceAvailable("HUNTERS_COIL_READY"),onConfirm:e=>{e.gainOfferings(5),e.hasTraitUnlocked("VIPERS_BITE")&&(e.gainStatus("HUNTERS_VENOM"),e.gainStatus("COIL_OGCD_READY",2)),e.hasResourceAvailable("SWIFTSKINS_COIL_READY")&&e.gainStatus("SWIFTSKINS_COIL_READY")},extendedStatus:"HUNTERS_INSTINCT"});da("SWIFTSKINS_COIL",65,{replaceIf:UD,applicationDelay:1.473,potency:570,positional:{potency:620,location:"rear"},baseRecastTime:3,highlightIf:e=>e.hasResourceAvailable("SWIFTSKINS_COIL_READY"),validateAttempt:e=>e.hasResourceAvailable("SWIFTSKINS_COIL_READY"),onConfirm:e=>{e.gainOfferings(5),e.hasTraitUnlocked("VIPERS_BITE")&&(e.gainStatus("SWIFTSKINS_VENOM"),e.gainStatus("COIL_OGCD_READY",2)),e.hasResourceAvailable("HUNTERS_COIL_READY")&&e.gainStatus("HUNTERS_COIL_READY")},extendedStatus:"SWIFTSCALED"});da("REAWAKEN",90,{replaceIf:PD,applicationDelay:.625,potency:750,falloff:.65,baseRecastTime:2.2,highlightIf:e=>e.hasResourceAvailable("SERPENT_OFFERINGS",50)||e.hasResourceAvailable("READY_TO_REAWAKEN"),validateAttempt:e=>e.hasResourceAvailable("SERPENT_OFFERINGS",50)||e.hasResourceAvailable("READY_TO_REAWAKEN"),onConfirm:e=>{e.tryConsumeResource("READY_TO_REAWAKEN")||e.resources.get("SERPENT_OFFERINGS").consume(50),e.gainStatus("ANGUINE_TRIBUTE",e.resources.get("ANGUINE_TRIBUTE").maxValue),e.gainStatus("REAWAKENED"),e.resources.get("REAWAKENED").removeTimer(),e.resources.addResourceEvent({rscType:"REAWAKENED",name:"cancel reawaken",delay:Kt("VPR","REAWAKENED").maxTimeout,fnOnRsc:()=>e.cancelReawaken()})}});da("OUROBOROS",96,{startOnHotbar:!1,replaceIf:PD,applicationDelay:2.313,potency:1150,falloff:.65,baseRecastTime:3,highlightIf:e=>e.hasResourceExactly("ANGUINE_TRIBUTE",1),onConfirm:e=>e.cancelReawaken()});da("VICEWINDER",65,{applicationDelay:.581,potency:500,secondaryCooldown:{cdName:"cd_VICEWINDER",cooldown:40,maxCharges:2},baseRecastTime:3,validateAttempt:e=>!e.hasResourceAvailable("REAWAKENED")&&!e.hasResourceAvailable("HUNTERS_COIL_READY")&&!e.hasResourceAvailable("SWIFTSKINS_COIL_READY")&&!e.hasResourceAvailable("HUNTERS_DEN_READY")&&!e.hasResourceAvailable("SWIFTSKINS_DEN_READY"),onConfirm:e=>{e.hasTraitUnlocked("VIPERS_RATTLE")&&e.resources.get("RATTLING_COIL").gain(1),e.gainStatus("HUNTERS_COIL_READY"),e.gainStatus("SWIFTSKINS_COIL_READY")}});da("UNCOILED_FURY",82,{applicationDelay:.804,potency:680,falloff:.6,baseRecastTime:3.5,highlightIf:e=>e.hasResourceAvailable("RATTLING_COIL"),validateAttempt:e=>e.hasResourceAvailable("RATTLING_COIL"),onConfirm:e=>{e.tryConsumeResource("RATTLING_COIL"),e.hasTraitUnlocked("UNCOILED_FANGS")&&(e.gainStatus("POISED_FOR_TWINFANG"),e.gainStatus("UNCOILED_OGCD_READY",2))}});da("STEEL_MAW",25,{replaceIf:hf,applicationDelay:1.091,potency:100,falloff:0,jobPotencyModifiers:e=>e.hasResourceAvailable("HONED_STEEL")?[X.HonedAoE]:[],highlightIf:e=>e.hasResourceAvailable("HONED_STEEL"),onConfirm:e=>e.tryConsumeResource("HONED_STEEL"),extendedStatus:"HONED_REAVERS"});da("REAVING_MAW",35,{replaceIf:ff,applicationDelay:.908,potency:100,falloff:0,jobPotencyModifiers:e=>e.hasResourceAvailable("HONED_REAVERS")?[X.HonedAoE]:[],highlightIf:e=>e.hasResourceAvailable("HONED_REAVERS"),onConfirm:e=>e.tryConsumeResource("HONED_REAVERS"),extendedStatus:"HONED_STEEL"});da("HUNTERS_BITE",40,{startOnHotbar:!1,replaceIf:hf,applicationDelay:1.134,potency:130,falloff:0,highlightIf:e=>!0,extendedStatus:"HUNTERS_INSTINCT"});da("SWIFTSKINS_BITE",45,{startOnHotbar:!1,replaceIf:ff,applicationDelay:1.445,potency:130,falloff:0,highlightIf:e=>!0,extendedStatus:"SWIFTSCALED"});da("JAGGED_MAW",50,{startOnHotbar:!1,replaceIf:hf,applicationDelay:1.127,potency:140,falloff:0,jobPotencyModifiers:e=>e.hasResourceAvailable("GRIMSKINS_VENOM")?[X.VenomAoE]:[],highlightIf:e=>e.hasResourceAvailable("GRIMSKINS_VENOM")||!e.hasResourceAvailable("GRIMHUNTERS_VENOM"),onConfirm:e=>{e.gainStatus("LAST_LASH_READY"),e.resources.get("SERPENT_OFFERINGS").gain(10)},extendedStatus:"GRIMHUNTERS_VENOM"});da("BLOODIED_MAW",50,{startOnHotbar:!1,replaceIf:ff,applicationDelay:.866,potency:140,falloff:0,jobPotencyModifiers:e=>e.hasResourceAvailable("GRIMHUNTERS_VENOM")?[X.VenomAoE]:[],highlightIf:e=>e.hasResourceAvailable("GRIMHUNTERS_VENOM")||!e.hasResourceAvailable("GRIMSKINS_VENOM"),onConfirm:e=>{e.gainStatus("LAST_LASH_READY"),e.resources.get("SERPENT_OFFERINGS").gain(10)},extendedStatus:"GRIMSKINS_VENOM"});da("HUNTERS_DEN",70,{replaceIf:[{newSkill:"HUNTERS_DEN",condition:e=>!e.hasResourceAvailable("REAWAKENED")},{newSkill:"THIRD_GENERATION",condition:e=>e.hasResourceAvailable("REAWAKENED")}],applicationDelay:.569,potency:280,falloff:0,baseRecastTime:3,highlightIf:e=>e.hasResourceAvailable("HUNTERS_DEN_READY"),validateAttempt:e=>e.hasResourceAvailable("HUNTERS_DEN_READY"),onConfirm:e=>{e.gainOfferings(5),e.hasTraitUnlocked("VIPERS_THRESH")&&(e.gainStatus("FELLHUNTERS_VENOM"),e.gainStatus("DEN_OGCD_READY",2)),e.hasResourceAvailable("SWIFTSKINS_DEN_READY")&&e.gainStatus("SWIFTSKINS_DEN_READY")},extendedStatus:"HUNTERS_INSTINCT"});da("SWIFTSKINS_DEN",70,{replaceIf:[{newSkill:"SWIFTSKINS_DEN",condition:e=>!e.hasResourceAvailable("REAWAKENED")},{newSkill:"FOURTH_GENERATION",condition:e=>e.hasResourceAvailable("REAWAKENED")}],applicationDelay:.999,potency:280,falloff:0,baseRecastTime:3,highlightIf:e=>e.hasResourceAvailable("SWIFTSKINS_DEN_READY"),validateAttempt:e=>e.hasResourceAvailable("SWIFTSKINS_DEN_READY"),onConfirm:e=>{e.gainOfferings(5),e.hasTraitUnlocked("VIPERS_THRESH")&&(e.gainStatus("FELLSKINS_VENOM"),e.gainStatus("DEN_OGCD_READY",2)),e.hasResourceAvailable("HUNTERS_DEN_READY")&&e.gainStatus("HUNTERS_DEN_READY")},extendedStatus:"SWIFTSCALED"});da("VICEPIT",70,{applicationDelay:.827,potency:220,secondaryCooldown:{cdName:"cd_VICEWINDER",cooldown:40,maxCharges:2},falloff:0,baseRecastTime:3,validateAttempt:e=>!e.hasResourceAvailable("REAWAKENED")&&!e.hasResourceAvailable("HUNTERS_COIL_READY")&&!e.hasResourceAvailable("SWIFTSKINS_COIL_READY")&&!e.hasResourceAvailable("HUNTERS_DEN_READY")&&!e.hasResourceAvailable("SWIFTSKINS_DEN_READY"),onConfirm:e=>{e.hasTraitUnlocked("VIPERS_RATTLE")&&(N.timeline.duringUntargetable(e.getDisplayTime())||e.resources.get("RATTLING_COIL").gain(1)),e.gainStatus("HUNTERS_DEN_READY"),e.gainStatus("SWIFTSKINS_DEN_READY")}});Bo("SERPENTS_IRE",86,"cd_SERPENTS_IRE",{applicationDelay:0,cooldown:120,requiresCombat:!0,onConfirm:e=>{e.resources.get("RATTLING_COIL").gain(1),e.hasTraitUnlocked("SERPENTS_LINEAGE")&&e.gainStatus("READY_TO_REAWAKEN")}});Bo("SLITHER",40,"cd_SLITHER",{applicationDelay:0,cooldown:30,maxCharges:3,animationLock:Vt});Bo("SERPENTS_TAIL",55,"cd_SERPENTS_TAIL",{replaceIf:Af,applicationDelay:0,cooldown:1,validateAttempt:e=>!1});Bo("DEATH_RATTLE",55,"cd_SERPENTS_TAIL",{startOnHotbar:!1,replaceIf:Af,applicationDelay:1.697,cooldown:1,potency:280,highlightIf:e=>!0,onConfirm:e=>e.tryConsumeResource("DEATH_RATTLE_READY")});Bo("LAST_LASH",60,"cd_SERPENTS_TAIL",{startOnHotbar:!1,replaceIf:Af,applicationDelay:1.226,cooldown:1,potency:100,falloff:0,highlightIf:e=>!0,onConfirm:e=>e.tryConsumeResource("LAST_LASH_READY")});Bo("TWINFANG",75,"cd_TWINFANG",{replaceIf:kD,applicationDelay:0,cooldown:1,validateAttempt:e=>!1});Bo("TWINBLOOD",75,"cd_TWINBLOOD",{replaceIf:xD,applicationDelay:0,cooldown:1,validateAttempt:e=>!1});const o2=[["TWINFANG_BITE",75,"fang",.629,120,void 0,"COIL_OGCD_READY","HUNTERS_VENOM",X.VenomOGCDST,"SWIFTSKINS_VENOM"],["TWINBLOOD_BITE",75,"blood",.714,120,void 0,"COIL_OGCD_READY","SWIFTSKINS_VENOM",X.VenomOGCDST,"HUNTERS_VENOM"],["TWINFANG_THRESH",80,"fang",.666,50,0,"DEN_OGCD_READY","FELLHUNTERS_VENOM",X.VenomOGCDAoE,"FELLSKINS_VENOM"],["TWINBLOOD_THRESH",80,"blood",.764,50,0,"DEN_OGCD_READY","FELLSKINS_VENOM",X.VenomOGCDAoE,"FELLHUNTERS_VENOM"],["UNCOILED_TWINFANG",92,"fang",1.04,120,.6,"UNCOILED_OGCD_READY","POISED_FOR_TWINFANG",X.Poised,"POISED_FOR_TWINBLOOD"],["UNCOILED_TWINBLOOD",92,"blood",.977,120,.6,"UNCOILED_OGCD_READY","POISED_FOR_TWINBLOOD",X.Poised,"POISED_FOR_TWINFANG"]];o2.forEach(([e,t,n,o,l,r,d,h,E,A])=>{Bo(e,t,n==="fang"?"cd_TWINFANG":"cd_TWINBLOOD",{startOnHotbar:!1,replaceIf:n==="fang"?kD:xD,applicationDelay:o,cooldown:1,potency:l,falloff:r,highlightIf:R=>R.hasResourceAvailable(h),jobPotencyModifiers:R=>R.hasResourceAvailable(h)?[E]:[],onConfirm:R=>{R.tryConsumeResource(d),R.hasResourceAvailable(h)||N.reportWarning({kind:"custom",en:`unbuffed twin${n} ability!`}),R.tryConsumeResource(h)&&R.hasResourceAvailable(d)?R.gainStatus(A):R.tryConsumeResource(A)}})});const l2=[["FIRST_GENERATION",1.702,oc],["SECOND_GENERATION",1.473,lc],["THIRD_GENERATION",1.473,HD],["FOURTH_GENERATION",1.473,UD]];l2.forEach(([e,t,n],o)=>{da(e,90,{replaceIf:n,startOnHotbar:!1,applicationDelay:t,potency:420,falloff:.65,baseRecastTime:2,combo:{resource:"REAWAKEN_COMBO",resourceValue:o+1,potency:680},highlightIf:l=>l.hasResourceExactly("REAWAKEN_COMBO",o+1),onConfirm:l=>{l.setLegacy(o+1),l.consumeAnguine()}})});const s2=[["FIRST_LEGACY",1.289],["SECOND_LEGACY",1.065],["THIRD_LEGACY",1.19],["FOURTH_LEGACY",1.065]];s2.forEach(([e,t])=>{Bo(e,100,"cd_SERPENTS_TAIL",{startOnHotbar:!1,replaceIf:Af,applicationDelay:t,cooldown:1,potency:320,falloff:.65,highlightIf:n=>!0,onConfirm:n=>n.tryConsumeResource("LEGACY_READY",!0)})});const wD=["SONG_OF_TORMENT","NIGHTBLOOM","FEATHER_RAIN","MORTAL_FLAME","BREATH_OF_MAGIC","WANING_NOCTURNE","DIAMONDBACK","BRUSH_WITH_DEATH"],r2=Object.keys(OT).filter(e=>!wD.includes(e));Object.keys(OT).forEach(e=>Ft(e,`BLU/${Ge[e].name}.png`));class c2 extends Wt{jobSpecificOtherTargetedBuffViewProps(){return[...wD.map(t=>this.makeCommonTimer(t,!1))]}jobSpecificSelfTargetedBuffViewProps(){return r2.map(t=>this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){return[]}}const va=(e,t,n)=>{Ye("BLU",e,t,n??{})};va("NIGHTBLOOM",1,{timeout:60});va("SONG_OF_TORMENT",1,{timeout:30});va("FEATHER_RAIN",1,{timeout:6});va("WAXING_NOCTURNE",1,{timeout:15});va("WANING_NOCTURNE",1,{timeout:15});va("DIAMONDBACK",1,{timeout:10});va("BRISTLE",1,{timeout:30});va("WHISTLE",1,{timeout:30});va("TINGLE",1,{timeout:15});va("COLD_FOG",1,{timeout:5});va("TOUCH_OF_FROST",1,{timeout:15});va("PHANTOM_FLURRY",1,{timeout:5});va("APOKALYPSIS",1,{timeout:10});va("WINGED_REPROBATION",4);va("WINGED_REDEMPTION",1,{timeout:10});va("BREATH_OF_MAGIC",1,{timeout:60});va("MORTAL_FLAME",1,{timeout:900});va("SURPANAKHAS_FURY",4,{timeout:3});va("BRUSH_WITH_DEATH",1,{timeout:600});class u2 extends Xt{constructor(t){super(t),this.cooldowns.set(new ke("cd_SWIFTCAST",60,1,1)),this.registerRecurringEvents([{groupedEffects:[{effectName:"NIGHTBLOOM",appliedBy:["NIGHTBLOOM"]},{effectName:"SONG_OF_TORMENT",appliedBy:["SONG_OF_TORMENT"]}]},{groupedEffects:[{effectName:"FEATHER_RAIN",appliedBy:["FEATHER_RAIN"]}]},{groupedEffects:[{effectName:"BREATH_OF_MAGIC",appliedBy:["BREATH_OF_MAGIC"]}]},{groupedEffects:[{effectName:"MORTAL_FLAME",appliedBy:["MORTAL_FLAME"]}]},{groupedEffects:[{effectName:"PHANTOM_FLURRY",appliedBy:["PHANTOM_FLURRY"],isGroundTargeted:!0,exclude:!0},{effectName:"APOKALYPSIS",appliedBy:["APOKALYPSIS"],isGroundTargeted:!0,exclude:!0}]}])}get statusPropsGenerator(){return new c2(this)}refreshBuff(t,n){this.addEvent(new be("gain buff",n,()=>{if(this.resources.get(t).gain(1),this.enqueueResourceDrop(t),t==="WANING_NOCTURNE"||t==="DIAMONDBACK"){const o=Kt("BLU",t).maxTimeout,l=this.resources.get("NOT_ANIMATION_LOCKED").pendingChange;l!==void 0?this.resources.get("NOT_ANIMATION_LOCKED").overrideTimer(this,Math.max(o,l.timeTillEvent)):this.resources.takeResourceLock("NOT_ANIMATION_LOCKED",o)}}))}jobSpecificRegisterRecurringEvents(){const t=()=>{this.handleDoTTick("PHANTOM_FLURRY"),this.getDisplayTime()>=0&&N.reportDotTick(this.time,"PHANTOM_FLURRY"),this.addEvent(new be("kick tick",1,()=>{t()}))},n=()=>{this.handleDoTTick("APOKALYPSIS"),this.getDisplayTime()>=0&&N.reportDotTick(this.time,"APOKALYPSIS"),this.addEvent(new be("Apokalypsis tick",1,()=>{n()}))};let o=this.config.timeTillFirstManaTick+this.dotTickOffset;for(;o>1;)o--;this.addEvent(new be("initial kick tick",o,t));let l=this.config.timeTillFirstManaTick+this.dotTickOffset;for(;l>1;)l--;this.addEvent(new be("initial Apokalypsis tick",l,n))}cancelChanneledSkills(){this.tryConsumeResource("PHANTOM_FLURRY"),this.tryConsumeResource("APOKALYPSIS")}}const NS=e=>e.hasResourceAvailable("WANING_NOCTURNE")||e.hasResourceAvailable("DIAMONDBACK"),d2=e=>e.hasResourceAvailable("PHANTOM_FLURRY"),E2={newSkill:"END_PHANTOM_FLURRY",condition:e=>d2(e)},zt=(e,t,n)=>{const o=n.basePotency??Number,l=n.aspect??Ie.Other,r=n.baseCastTime??0,d=r>0?Ue(E=>E.tryConsumeResource("SWIFTCAST"),n.onConfirm):n.onConfirm,h=n.jobPotencyModifiers??(E=>[]);return Qn("BLU",e,t,{...n,aspect:l,castTime:E=>E.config.adjustedCastTime(r),potency:n.basePotency,validateAttempt:E=>{var A;return!NS(E)&&(((A=n.validateAttempt)==null?void 0:A.call(n,E))??!0)},jobPotencyModifiers:E=>{const A=h(E);return E.hasResourceAvailable("WAXING_NOCTURNE")&&A.push(X.MoonFlute),o!==0&&E.hasResourceAvailable("BRISTLE")&&A.push(X.Bristle)&&E.tryConsumeResource("BRISTLE"),l===Ie.Physical&&E.hasResourceAvailable("WHISTLE")&&A.push(X.Whistle)&&E.tryConsumeResource("WHISTLE"),l===Ie.Physical&&e!=="TRIPLE_TRIDENT"&&E.hasResourceAvailable("TINGLE")&&A.push(X.TingleA)&&E.tryConsumeResource("TINGLE"),e==="TRIPLE_TRIDENT"&&E.hasResourceAvailable("TINGLE")&&A.push(X.TingleB)&&E.tryConsumeResource("TINGLE"),e==="CONVICTION_MARCATO"&&E.hasResourceAvailable("WINGED_REDEMPTION")&&A.push(X.WingedRedemption)&&E.tryConsumeResource("WINGED_REDEMPTION"),e==="WINGED_REPROBATION"&&E.resources.get("WINGED_REPROBATION").availableAmount()===3&&A.push(X.WingedReprobation),A},isInstantFn:E=>E.hasResourceAvailable("SWIFTCAST")||r===0,onConfirm:d})},On=(e,t,n,o)=>ot("BLU",e,t,n,{jobPotencyModifiers:l=>{const r=[];return l.hasResourceAvailable("WAXING_NOCTURNE")&&r.push(X.MoonFlute),r},validateAttempt:l=>{var r;return!NS(l)&&(((r=o.validateAttempt)==null?void 0:r.call(o,l))??!0)},...o});zt("SONIC_BOOM",1,{basePotency:210,baseCastTime:1,manaCost:200,applicationDelay:.5});zt("SHARPENED_KNIFE",1,{aspect:Ie.Physical,basePotency:220,baseCastTime:1,manaCost:200,applicationDelay:.5});zt("GOBLIN_PUNCH",1,{aspect:Ie.Physical,basePotency:220,baseCastTime:0,manaCost:200,applicationDelay:.5});zt("REVENGE_BLAST",1,{aspect:Ie.Physical,basePotency:500,baseCastTime:2,manaCost:200,applicationDelay:.5});zt("WILD_RAGE",1,{aspect:Ie.Physical,basePotency:500,baseCastTime:5,manaCost:0,applicationDelay:.5});zt("CONVICTION_MARCATO",1,{basePotency:220,baseCastTime:2,manaCost:200,applicationDelay:.5});zt("WATER_CANNON",1,{basePotency:200,baseCastTime:2,manaCost:200,applicationDelay:.5});zt("HYDRO_PULL",1,{basePotency:220,baseCastTime:2,manaCost:200,applicationDelay:.5});zt("THE_ROSE_OF_DESTRUCTION",1,{basePotency:400,baseCastTime:2,manaCost:300,applicationDelay:.5,secondaryCooldown:{cdName:"cd_THE_ROSE_OF_DESTRUCTION",cooldown:30,maxCharges:1}});zt("MOON_FLUTE",1,{baseCastTime:2,manaCost:500,applicationDelay:.6,onConfirm:e=>{e.hasResourceAvailable("WAXING_NOCTURNE")||(e.refreshBuff("WAXING_NOCTURNE",.6),e.addEvent(new be("Waxing_Nocturne ended",15.6,()=>{e.hasResourceAvailable("WANING_NOCTURNE")||e.refreshBuff("WANING_NOCTURNE",0)})))}});zt("DIAMONDBACK",1,{baseCastTime:2,manaCost:3e3,applicationDelay:.6,onConfirm:e=>{e.hasResourceAvailable("WAXING_NOCTURNE")&&(e.tryConsumeResource("WAXING_NOCTURNE"),e.refreshBuff("WANING_NOCTURNE",0)),e.refreshBuff("DIAMONDBACK",.6)}});zt("MATRA_MAGIC",1,{basePotency:800,baseCastTime:2,manaCost:200,applicationDelay:.5,secondaryCooldown:{cdName:"cd_MATRA_MAGIC",cooldown:120,maxCharges:1}});zt("SONG_OF_TORMENT",1,{basePotency:50,baseCastTime:2,manaCost:400,applicationDelay:.5,onConfirm:(e,t)=>{const n=[];e.hasResourceAvailable("WAXING_NOCTURNE")&&n.push(X.MoonFlute),e.hasResourceAvailable("BRISTLE")&&n.push(X.Bristle),e.addDoTPotencies({node:t,effectName:"SONG_OF_TORMENT",skillName:"SONG_OF_TORMENT",tickPotency:50,speedStat:"sps",modifiers:n})},onApplication:(e,t)=>{e.applyDoT("SONG_OF_TORMENT",t)}});zt("BREATH_OF_MAGIC",1,{basePotency:0,baseCastTime:2,manaCost:300,applicationDelay:.5,onConfirm:(e,t)=>{const n=[];e.hasResourceAvailable("WAXING_NOCTURNE")&&n.push(X.MoonFlute),e.hasResourceAvailable("BRISTLE")&&n.push(X.Bristle),e.tryConsumeResource("BRISTLE"),e.addDoTPotencies({node:t,effectName:"BREATH_OF_MAGIC",skillName:"BREATH_OF_MAGIC",tickPotency:120,speedStat:"sps",modifiers:n})},onApplication:(e,t)=>{e.applyDoT("BREATH_OF_MAGIC",t)}});zt("MORTAL_FLAME",1,{basePotency:0,baseCastTime:2,manaCost:500,applicationDelay:.5,onConfirm:(e,t)=>{const n=[];e.hasResourceAvailable("WAXING_NOCTURNE")&&n.push(X.MoonFlute),e.hasResourceAvailable("BRISTLE")&&n.push(X.Bristle),e.tryConsumeResource("BRISTLE"),e.addDoTPotencies({node:t,effectName:"MORTAL_FLAME",skillName:"MORTAL_FLAME",tickPotency:40,speedStat:"sps",modifiers:n})},onApplication:(e,t)=>{e.applyDoT("MORTAL_FLAME",t)}});zt("WHISTLE",1,{baseCastTime:1,manaCost:200,applicationDelay:0,onConfirm:e=>{e.tryConsumeResource("BRISTLE"),e.refreshBuff("WHISTLE",0)}});zt("BRISTLE",1,{baseCastTime:1,manaCost:200,applicationDelay:0,onConfirm:e=>{e.tryConsumeResource("WHISTLE"),e.refreshBuff("BRISTLE",0)}});zt("FINAL_STING",1,{aspect:Ie.Physical,basePotency:2e3,baseCastTime:2,manaCost:0,applicationDelay:.5,validateAttempt:e=>!e.hasResourceAvailable("BRUSH_WITH_DEATH"),onConfirm:e=>{e.refreshBuff("BRUSH_WITH_DEATH",0)}});zt("TINGLE",1,{basePotency:100,baseCastTime:2,manaCost:200,applicationDelay:.5,onConfirm:e=>{e.refreshBuff("TINGLE",0)}});zt("TRIPLE_TRIDENT",1,{aspect:Ie.Physical,basePotency:450,baseCastTime:2,manaCost:300,applicationDelay:.5,secondaryCooldown:{cdName:"cd_TRIPLE_TRIDENT",cooldown:90,maxCharges:1}});const h2=e=>e.hasResourceAvailable("COLD_FOG"),f2=e=>e.hasResourceAvailable("TOUCH_OF_FROST"),A2=[{newSkill:"POP_COLD_FOG",condition:e=>h2(e)},{newSkill:"WHITE_DEATH",condition:e=>f2(e)}];zt("COLD_FOG",1,{replaceIf:A2,baseCastTime:2,cooldown:90,manaCost:300,applicationDelay:.5,secondaryCooldown:{cdName:"cd_COLD_FOG",cooldown:90,maxCharges:1},onConfirm:e=>{e.refreshBuff("COLD_FOG",0)}});zt("WHITE_DEATH",1,{startOnHotbar:!1,basePotency:400,baseCastTime:0,manaCost:0,applicationDelay:.5,validateAttempt:e=>!NS(e)&&e.hasResourceAvailable("TOUCH_OF_FROST")});On("POP_COLD_FOG",1,"cd_COLD_FOG_POP",{startOnHotbar:!1,applicationDelay:0,animationLock:Sn,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("COLD_FOG"),onConfirm:e=>{e.tryConsumeResource("COLD_FOG"),e.refreshBuff("TOUCH_OF_FROST",0)}});zt("END_PHANTOM_FLURRY",1,{startOnHotbar:!1,basePotency:600,baseCastTime:0,manaCost:0,applicationDelay:.5});zt("WINGED_REPROBATION",1,{aspect:Ie.Physical,basePotency:300,baseCastTime:1,manaCost:200,applicationDelay:.5,secondaryCooldown:{cdName:"cd_WINGED_REPROBATION",cooldown:90,maxCharges:1},onConfirm:e=>{e.resources.get("WINGED_REPROBATION").gain(1),e.resources.get("WINGED_REPROBATION").availableAmount()<=3&&e.cooldowns.get("cd_WINGED_REPROBATION").restore(90),e.resources.get("WINGED_REPROBATION").availableAmount()===4&&(e.tryConsumeResource("WINGED_REPROBATION",!0),e.refreshBuff("WINGED_REDEMPTION",0))}});On("ERUPTION",1,"cd_ERUPTION",{cooldown:30,manaCost:300,potency:300,applicationDelay:.62});On("FEATHER_RAIN",1,"cd_ERUPTION",{cooldown:30,manaCost:300,potency:220,applicationDelay:.62,onConfirm:(e,t)=>{const n=[];e.hasResourceAvailable("WAXING_NOCTURNE")&&n.push(X.MoonFlute),e.addDoTPotencies({node:t,effectName:"FEATHER_RAIN",skillName:"FEATHER_RAIN",tickPotency:40,speedStat:"sps",modifiers:n}),e.applyDoT("FEATHER_RAIN",t)}});On("MOUNTAIN_BUSTER",1,"cd_SHOCK_STRIKE",{cooldown:60,manaCost:400,potency:400,applicationDelay:.62});On("SHOCK_STRIKE",1,"cd_SHOCK_STRIKE",{cooldown:60,manaCost:400,potency:400,applicationDelay:.62});On("GLASS_DANCE",1,"cd_GLASS_DANCE",{cooldown:90,manaCost:500,potency:350,applicationDelay:.62});On("QUASAR",1,"cd_QUASAR",{cooldown:60,manaCost:300,potency:300,applicationDelay:.62});On("J_KICK",1,"cd_QUASAR",{cooldown:60,manaCost:300,potency:300,applicationDelay:1,animationLock:1});On("BOTH_ENDS",1,"cd_NIGHTBLOOM",{cooldown:120,manaCost:300,potency:600,applicationDelay:.62});On("SEA_SHANTY",1,"cd_SEA_SHANTY",{cooldown:120,manaCost:300,potency:500,applicationDelay:.62});On("BEING_MORTAL",1,"cd_BEING_MORTAL",{cooldown:120,manaCost:300,potency:800,applicationDelay:.62});On("APOKALYPSIS",1,"cd_BEING_MORTAL",{cooldown:120,manaCost:300,potency:0,applicationDelay:1.38,animationLock:1.38,onConfirm:(e,t)=>{const n=[];e.hasResourceAvailable("WAXING_NOCTURNE")&&n.push(X.MoonFlute),e.addDoTPotencies({node:t,effectName:"APOKALYPSIS",skillName:"APOKALYPSIS",tickPotency:100,tickFrequency:1,speedStat:"unscaled",modifiers:n})},onApplication:(e,t)=>{e.applyDoT("APOKALYPSIS",t)}});On("NIGHTBLOOM",1,"cd_NIGHTBLOOM",{cooldown:120,manaCost:300,potency:400,applicationDelay:.62,onConfirm:(e,t)=>{const n=[];e.hasResourceAvailable("WAXING_NOCTURNE")&&n.push(X.MoonFlute),e.addDoTPotencies({node:t,effectName:"NIGHTBLOOM",skillName:"NIGHTBLOOM",tickPotency:75,speedStat:"sps",modifiers:n})},onApplication:(e,t)=>{e.applyDoT("NIGHTBLOOM",t)}});On("PHANTOM_FLURRY",1,"cd_PHANTOM_FLURRY",{replaceIf:[E2],cooldown:120,manaCost:300,potency:0,applicationDelay:.5,onConfirm:(e,t)=>{const n=[];e.hasResourceAvailable("WAXING_NOCTURNE")&&n.push(X.MoonFlute),e.addDoTPotencies({node:t,effectName:"PHANTOM_FLURRY",skillName:"PHANTOM_FLURRY",tickPotency:200,tickFrequency:1,speedStat:"unscaled",modifiers:n})},onApplication:(e,t)=>{e.applyDoT("PHANTOM_FLURRY",t)}});On("SURPANAKHA",1,"cd_SURPANAKHA_LOCKOUT",{cooldown:1,manaCost:200,potency:e=>200*(1+.5*e.resources.get("SURPANAKHAS_FURY").availableAmount()),applicationDelay:.62,onApplication:e=>{e.resources.get("SURPANAKHAS_FURY").availableAmount()===3?e.tryConsumeResource("SURPANAKHAS_FURY",!0):e.refreshBuff("SURPANAKHAS_FURY",0)},secondaryCooldown:{cdName:"cd_SURPANAKHA",cooldown:30,maxCharges:4}});function Mr(e){switch(e.job){case"PLD":return new mB(e);case"WAR":return new hB(e);case"DRK":return new pB(e);case"GNB":return new uG(e);case"WHM":return new HB(e);case"SCH":return new vB(e);case"AST":return new bB(e);case"SGE":return new rB(e);case"MNK":return new JB(e);case"DRG":return new $w(e);case"NIN":return new PB(e);case"SAM":return new WG(e);case"RPR":return new YG(e);case"VPR":return new n2(e);case"BRD":return new Fw(e);case"MCH":return new IG(e);case"DNC":return new Vw(e);case"BLM":return new Pw(e);case"SMN":return new QG(e);case"RDM":return new zG(e);case"PCT":return new OG(e);case"BLU":return new u2(e)}return new Xt(e)}let GD=e=>{};function m2(e){return`
		.castTimeTable {
			border-collapse: collapse;
			width: 100%;
		}
		.castTimeTable th, .castTimeTable td {
			text-align: center;
			padding: 0.15em;
			border: 1px solid ${e};
			width: 33%
		}
	`}function R2(e){const t=Kt(e.job,e.override.type);let n;const o=je(e.override.type);if(t.isCoolDown)n=C({en:o+" full in "+e.override.timeTillFullOrDrop+"s",zh:`${o}将在${e.override.timeTillFullOrDrop}秒后转好`});else{n=o;const r=C({en:" (",zh:"（"}),d=C({en:") ",zh:"）"});(Ge[e.override.type].mayBeToggled??!1)&&(n+=r+(e.override.effectOrTimerEnabled?C({en:"enabled",zh:"生效中"}):C({en:"disabled",zh:"未生效"}))+d),t.maxValue>1&&(n+=C({en:` (amount: ${e.override.stacks})`,zh:`（数量：${e.override.stacks}）`})),t.maxTimeout>=0&&(e.override.type==="POLYGLOT"?e.override.timeTillFullOrDrop>0&&(n+=C({en:` next stack ready in ${e.override.timeTillFullOrDrop}s`,zh:`距下一层${e.override.timeTillFullOrDrop}秒`})):e.override.effectOrTimerEnabled&&(n+=C({en:` drops in ${e.override.timeTillFullOrDrop}s`,zh:`将在${e.override.timeTillFullOrDrop}秒后消失`})))}n+=" ";let l;if(e.deleteFn){const r=e.deleteFn;l=u.jsx(Cs,{content:"[x]",onClickFn:d=>{r(e.override.type)}})}return u.jsxs("div",{style:{marginTop:10,color:"mediumpurple"},children:[n,l]})}function T2(e){const t=_=>{const b=e.initialResourceOverrides.findIndex(v=>v.type===_);b!==-1&&(e.initialResourceOverrides.splice(b,1),e.setInitialResourceOverrides(e.initialResourceOverrides))},n=e.initialResourceOverrides.map((_,b)=>u.jsx(R2,{job:e.job,override:_,deleteFn:t},b)),o=new Set(e.initialResourceOverrides.map(_=>_.type)),l=$i(e.job),d=l.entries().flatMap(([_,b])=>o.has(_)?[]:[{rsc:_,isCoolDown:b.isCoolDown?1:0}]).toArray().sort((_,b)=>_.isCoolDown-b.isCoolDown).map((_,b)=>u.jsx("option",{value:_.rsc,children:je(_.rsc)},b)),h=e.selectedOverrideResource,E=l.get(h);let A,R=!0;if(E!==void 0){let _,b,v="-1",L,k="0",M;E.isCoolDown?(_=!0,b=!1,R=!1,v=e.overrideTimer,L=e.setOverrideTimer):(E.maxTimeout>=0?(_=!0,v=e.overrideTimer,L=e.setOverrideTimer):_=!1,E.maxValue>1||E.maxValue===E.defaultValue?(b=!0,k=e.overrideStacks,M=e.setOverrideStacks):b=!1,R=Ge[h].mayBeToggled??!1);const B=E.isCoolDown?C({en:"Time till full: ",zh:"距CD转好时间："}):C(h==="POLYGLOT"?{en:"Time till next stack: ",zh:"距下一层时间："}:{en:"Time till drop: ",zh:" 距状态消失时间："}),w=C({en:"enabled",zh:"生效中"});A=u.jsxs("div",{style:{margin:"6px 0"},children:[u.jsx("div",{hidden:!_,children:u.jsx(Aa,{description:B,defaultValue:v,onChange:L})}),u.jsx("div",{hidden:!b,children:u.jsx(Aa,{description:C({en:"Amount: ",zh:"数量："}),defaultValue:k,onChange:M})}),u.jsxs("div",{hidden:!R,children:[u.jsx("input",{style:{position:"relative",top:3,marginRight:5},type:"checkbox",checked:e.overrideEnabled,onChange:x=>e.setOverrideEnabled(x.target.checked)}),u.jsx("span",{children:w})]})]})}const T=O.useContext(Ga),S=Cl(T,"bgMediumContrast"),I=_=>{_.preventDefault();const b=e.selectedOverrideResource,v=$i(e.job).get(b);let L=parseFloat(e.overrideTimer);const k=parseInt(e.overrideStacks),M=e.overrideEnabled;if(b==="POLYGLOT"&&e.overrideTimer===""&&(L=0),isNaN(k)||isNaN(L)){window.alert("some inputs are not numbers!");return}let B;if(v.isCoolDown){const w=v.maxStacks*v.cdPerStack;if(L<0||L>w){window.alert("invalid input timeout (must be in range [0, "+w+"])");return}B={type:b,timeTillFullOrDrop:L,stacks:v.maxStacks>1?k:1,effectOrTimerEnabled:!0}}else{if((v.maxValue>1||v.maxValue===v.defaultValue)&&(k<0||k>v.maxValue)){window.alert("invalid input amount (must be in range [0, "+v.maxValue+"])");return}if(v.maxTimeout>=0&&(L<0||L>v.maxTimeout)){window.alert("invalid input timeout (must be in range [0, "+v.maxTimeout+"])");return}B={type:b,timeTillFullOrDrop:v.maxTimeout>=0?L:-1,stacks:v.maxValue>1||v.maxValue===v.defaultValue?k:1,effectOrTimerEnabled:R||M}}e.setInitialResourceOverrides([...e.initialResourceOverrides,B])},p=u.jsx("div",{children:u.jsxs("form",{onSubmit:_=>I(_),style:{marginTop:16,outline:"1px solid "+S,outlineOffset:6},children:[u.jsx("select",{value:e.selectedOverrideResource,onChange:_=>{_.target&&e.setSelectedOverrideResource(_.target.value)},children:d}),A,u.jsx("input",{type:"submit",value:C({en:"add override",zh:"应用此状态"})})]})});return u.jsx("div",{style:{marginTop:10},children:u.jsx(wr,{title:"overrideInitialResources",titleNode:u.jsxs("span",{children:[C({en:"Override initial resources",zh:"指定初始资源"})," ",u.jsx(We,{topic:"overrideInitialResources",content:C({en:u.jsxs("div",{children:[u.jsx("div",{className:"paragraph",style:{color:"orangered"},children:u.jsx("b",{children:"Can create invalid game states. Go over Instructions/Troubleshoot first and use carefully at your own risk!"})}),u.jsx("div",{className:"paragraph",children:"Also, currently thunder dot buff created this way doesn't actually tick. It just shows the remaining buff timer."}),u.jsx("div",{className:"paragraph",children:"I would recommend saving settings (stats, lines presets, timeline markers etc.) to files first, in case invalid game states really mess up the tool and a complete reset is required."})]}),zh:u.jsxs("div",{children:[u.jsx("div",{className:"paragraph",style:{color:"orangered"},children:u.jsx("b",{children:"错误的初始资源可能会导致非法游戏状态。请在阅读工具顶部的使用说明/常见问题后慎重使用，并优先自行排查问题！"})}),u.jsx("div",{className:"paragraph",children:"另：当前靠初始资源覆盖添加的雷dot只显示剩余时间，不会结算伤害。"}),u.jsx("div",{className:"paragraph",children:"使用此功能时，请最好先下载保存各项数据（面板数值，技能轴，时间轴预设等），以防造成未知错误后排轴器重置导致的数据丢失。"})]})})})]}),content:u.jsxs("div",{children:[u.jsx("button",{onClick:_=>{e.initialResourceOverrides.length>0&&e.setInitialResourceOverrides([]),_.preventDefault()},children:C({en:"clear all overrides",zh:"清除所有指定初始资源"})}),n,p]})})})}function S2(e){const t=N.game.lucidTickOffset.toFixed(3),n=C({en:"the random time offset of lucid dreaming ticks relative to mp ticks",zh:"醒梦buff期间，每次跳蓝后多久跳醒梦（由随机种子决定）"}),o=N.game.dotTickOffset.toFixed(3),l=C({en:"the random time offset of DoT ticks relative to mp ticks",zh:"雷DoT期间，每次跳蓝后多久跳雷（由随机种子决定）"}),r=N.gameConfig.procMode,d=N.gameConfig.initialResourceOverrides.length,h=N.gameConfig.legacy_casterTax,E=C({en:`WARNING: this record was created in an earlier version of XIV in the Shell and uses the deprecated caster tax of ${h}s instead of calculating from your FPS input below. Hover for details: `,zh:`警告：此时间轴文件创建于一个更早版本的排轴器，因此计算读条时间时使用的是当时手动输入的读条税${h}秒（现已过时），而非由下方的“帧率”和“读条时间修正”计算得来。更多信息：`}),A=Pt().warning,R=(I,p)=>{const _=jC[I];if(_.warningContent)return u.jsx("p",{style:{color:p},children:C(_.warningContent)})},T=C({en:u.jsxs("div",{children:[u.jsx("div",{className:"paragraph",children:"The caster tax config is now replaced by 0.1s + FPS tax and is more precise. You can read more about FPS tax in the Github repository wiki's implementation notes section."}),u.jsx("div",{className:"paragraph",style:{color:A},children:"You are strongly encouraged to create a new record (in another timeline slot or from 'apply and reset') and migrate your fight plan. Support for loading legacy files might drop in the future."})]}),zh:u.jsxs("div",{children:[u.jsx("div",{className:"paragraph",children:"现在的“读条税”由固定的0.1s加自动计算的帧率税构成，模拟结果也更精确。有关帧率税的更多信息详见 关于/实现细节。"}),u.jsx("div",{className:"paragraph",style:{color:A},children:"排轴器今后的更新可能会导致无法加载过时的文件，所以强烈建议将此时间轴迁移到一个新建的存档中（添加时间轴，或者应用并重置时间轴）。"})]})}),S=u.jsxs("p",{style:{color:A},children:[E,u.jsx(We,{topic:"legacy-caster-tax",content:T})]});return u.jsxs("div",{style:{textDecoration:e.dirty?"line-through":"none",marginLeft:5,paddingLeft:10,borderLeft:"1px solid "+Pt().bgHighContrast},children:[N.gameConfig.shellVersion<vo.FpsTax?S:void 0,R(ft[e.job].implementationLevel,A),["CASTER","HEALER"].includes(ft[e.job].role)&&u.jsxs("div",{children:[C({en:"Lucid tick offset ",zh:"醒梦&跳蓝时间差 "}),u.jsx(We,{topic:"lucidTickOffset",content:n}),": ",t]}),N.game.dotResources.length>0&&u.jsxs("div",{children:[C({en:"DoT tick offset ",zh:"跳雷&跳蓝时间差 "}),u.jsx(We,{topic:"dotTickOffset",content:l}),": ",o]}),e.job==="MNK"&&u.jsxs("div",{children:[C({en:"SSS GCD",zh:"六合星GCD"}),":"," ",N.gameConfig.adjustedSksGCD(5,N.game.inherentSpeedModifier()).toFixed(2)]}),u.jsxs("p",{children:[C({en:"Procs",zh:"随机数模式"}),": ",r]}),d>0&&u.jsx("p",{children:C({en:`${d} initial resource override(s)`,zh:`${d}项初始资源覆盖`})})]})}function I2(){const t=(()=>{const T=bt("playbackSettings");if(T)return JSON.parse(T)})(),[n,o]=O.useState((t==null?void 0:t.tickMode)??1),[l,r]=O.useState((t==null?void 0:t.timeScale)??di.Manual),d=(T,S)=>{const I=JSON.stringify({tickMode:S,timeScale:T});It("playbackSettings",I)},h=T=>{if(!T||!T.target||isNaN(parseInt(T.target.value)))return;r(parseInt(T.target.value));const S=parseInt(T.target.value);isNaN(S)||(N.setTimeControlSettings({tickMode:S,timeScale:n}),d(n,S))},E=T=>{const S=parseFloat(T);o(S),isNaN(S)||(N.setTimeControlSettings({tickMode:l,timeScale:S}),d(S,n))};O.useEffect(()=>{N.setTimeControlSettings({tickMode:l,timeScale:n})});const A={position:"relative",top:3,marginRight:"0.75em"},R={display:"inline-block",marginRight:"0.5em"};return u.jsxs("div",{children:[u.jsxs("p",{children:[u.jsxs("label",{style:R,children:[u.jsx("input",{style:A,type:"radio",onChange:h,value:di.RealTimeAutoPause,checked:l===di.RealTimeAutoPause,name:"tick mode"}),C({en:"real-time auto pause",zh:"实时(带自动暂停）"})]}),u.jsx(We,{topic:"ctrl-realTimeAutoPause",content:u.jsxs("div",{className:"toolTip",children:[C({en:u.jsx("div",{className:"paragraph",children:"*Recommended*"}),zh:u.jsx("div",{className:"paragraph",children:"*推荐设置*"})}),C({en:u.jsxs("div",{className:"paragraph",children:["- click to use a skill. if the skill is on cooldown, or you're in an animation lock, then the simulation will automatically skip ahead to when the skill can be used again",u.jsx("br",{}),"- animation locks and cast bars will play out in sped-up real time until done"]}),zh:u.jsx("div",{className:"paragraph",children:"- 点击图标使用技能; 战斗时间会按下方设置的倍速自动前进直到可释放下一个技能。如果点击的技能CD没有转好，模拟会自动地快进到它CD转好并重试。"})})]})}),u.jsx("br",{}),u.jsxs("label",{style:R,children:[u.jsx("input",{style:A,type:"radio",onChange:h,value:di.Manual,checked:l===di.Manual,name:"tick mode"}),C({en:"manual",zh:"手动"})]}),u.jsx(We,{topic:"ctrl-manual",content:u.jsx("div",{className:"toolTip",children:C({en:u.jsxs("div",{className:"paragraph",children:["- click to use a skill. if the skill is on cooldown, or you're in an animation lock, then the simulation will automatically skip ahead to when the skill can be used again",u.jsx("br",{}),"- animation locks and cast times are skipped immediately"]}),zh:u.jsx("div",{className:"paragraph",children:"- 点击图标使用技能; 战斗时间会自动快进至可释放下一个技能。如果点击的技能CD没有转好，模拟会自动地快进到它CD转好并重试。"})})})})]}),u.jsx(Aa,{defaultValue:`${n}`,description:u.jsxs("span",{children:[C({en:"time scale ",zh:"倍速 "}),u.jsx(We,{topic:"timeScale",content:u.jsx("div",{children:C({en:"rate at which game time advances automatically (aka when in real-time)",zh:"战斗时间自动前进的速度"})})}),":"," "]}),onChange:E})]})}function _2(e){const t=O.useContext(Ga),n=e.imported?Cl(t,"success"):Cl(t,"text");return u.jsx(Aa,{style:{color:n},defaultValue:e.initial,description:e.description,onChange:o=>{e.dispatch({[e.name]:o}),e.removeImportedField(e.name)}})}function g2(e){const t=Hi(O.useContext(Ga)),[n,o]=O.useState(""),{imported:l,setImported:r}=e,d=async A=>{A.preventDefault();const R=URL.parse(n),T=new Headers;try{if(R&&R.hostname==="etro.gg"){const S=R.pathname.split("/");if(S[1]!=="gearset"&&S.length!==3)throw new Error("Invalid etro gearset link (hover ? in URL input box for details)");T.append("Content-Type","application/json");const I=await fetch("https://etro.gg/api/gearsets/"+S[2],{method:"GET",headers:T});if(I.ok){const p=await I.json(),_=new Map(p.totalParams.map(B=>[B.name,B.value])),b=p.totalParams.length>0?p.totalParams[0].value:0;if(!(p.jobAbbrev in ft))throw new Error("Imported gearset was for a job ("+p.jobAbbrev+") that XIV in the Shell doesn't support");const v=Ot.getSubstatBase(parseFloat(p.level)).toString(),L=_.get("SPS")??v,k=_.get("SKS")??v,M=["job","level","criticalHit","directHit","determination","main"];_.has("SPS")&&M.push("spellSpeed"),_.has("SKS")&&M.push("skillSpeed"),_.has("PIE")&&M.push("piety"),_.has("TEN")&&M.push("tenacity"),_.has("Weapon Damage")&&M.push("wd"),e.dispatch({job:p.jobAbbrev,level:p.level,spellSpeed:L,skillSpeed:k,wd:_.get("Weapon Damage"),criticalHit:_.get("CRT"),directHit:_.get("DH"),determination:_.get("DET"),piety:_.get("PIE"),tenacity:_.get("TEN"),main:b}),e.setImportedFields(M),r(!0)}else throw console.error(I),new Error("etro load failed (please check your link)")}else if(R&&R.hostname==="xivgear.app"){const S=R.searchParams.get("page");if(!S)throw new Error("xivgear link must be to a specific set (hover ? in URL input box for details)");const I=S.startsWith("sl|")?S.substr(3):S;T.append("Content-Type","application/json");const p=await fetch("https://api.xivgear.app/fulldata/"+I,{method:"GET",headers:T});if(p.ok){const _=await p.json();if(!(_.job in ft))throw new Error("Imported gearset was for a job ("+_.job+") that XIV in the Shell doesn't support");const b=_.sets[0].computedStats,v=Math.max(...["strength","dexterity","intelligence","mind"].map(M=>b[M]??0)).toString(),L=Math.max(b.wdPhys??0,b.wdMag??0).toString(),k={job:_.job,level:_.level,spellSpeed:b.spellspeed,skillSpeed:b.skillspeed,criticalHit:b.crit,directHit:b.dhit,determination:b.determination,piety:b.piety,tenacity:b.tenacity,wd:L,main:v};e.dispatch(k),e.setImportedFields(Object.keys(k)),r(!0)}else throw console.error("xivgear load failed: "+p),new Error("xivgear load failed (please check your link)")}else throw new Error("Invalid gearset link (must be from etro.gg or xivgear.app)")}catch(S){console.error(S),window.alert(S.message)}},h=u.jsx("a",{href:"https://etro.gg",target:"_blank",rel:"noreferrer",children:"etro"}),E=u.jsx("a",{href:"https://xivgear.app",target:"_blank",rel:"noreferrer",children:"xivgear"});return u.jsxs("form",{onSubmit:d,children:[C({en:u.jsxs("span",{children:["Load stats from ",h,"/",E,":"," "]}),zh:u.jsxs("span",{children:["从",h,"或",E,"导入套装："]})}),u.jsx(We,{topic:"gearImport",content:u.jsxs(u.Fragment,{children:[u.jsx("p",{children:C({en:u.jsxs("span",{children:["Enter and ",u.jsx(bi,{text:"Load"})," a link to a gearset from xivgear.app or etro.gg, edit the rest of config, then"," ",u.jsx(bi,{text:"apply and reset"}),"."]}),zh:u.jsxs("span",{children:["输入xivgear.app或etro.gg的套装链接并",u.jsx(bi,{text:"加载"}),"，调整其余角色属性，然后",u.jsx(bi,{text:"应用并重置时间轴"}),"。"]})})}),u.jsx("p",{children:C({en:"etro: Copy/paste the link to the set (example: https://etro.gg/gearset/e13d5960-4794-4dc4-b273-24ecfed6745e)",zh:"etro：复制粘贴套装链接（例：https://etro.gg/gearset/e13d5960-4794-4dc4-b273-24ecfed6745e）"})}),u.jsx("p",{children:C({en:'xivgear: At the top of the page, click "Export" -> "Selected Set" -> "Link to This Set" -> "Generate" (example: https://xivgear.app/?page=sl%7C143f3245-c35b-4391-8b2b-db5cc1a8de9a)',zh:'xivgear：从页面顶端点击 "Export" -> "Selected Set" -> "Link to This Set" -> "Generate"（例：https://xivgear.app/?page=sl%7C143f3245-c35b-4391-8b2b-db5cc1a8de9a）'})})]})}),u.jsxs("div",{style:{position:"relative",marginTop:5},children:[u.jsx(Aa,{style:{display:"inline-block"},width:25,description:"",onChange:A=>o(A)}),u.jsx("span",{children:" "}),u.jsx("input",{style:{display:"inline-block"},type:"submit",value:C({en:"Load",zh:"加载"})}),u.jsx(QM,{style:{display:l?"inline":"none",color:t.success,position:"relative",top:4,marginLeft:8}})]})]})}function iC(e,t,n,o){const l=parseInt(n),r=parseInt(e),d=parseFloat(t);let h,E;if(isNaN(l)||isNaN(r)||isNaN(d)||r<Ot.getSubstatBase(l))h="n/a",E="n/a";else{const A=Ot.preTaxGcd(l,r,2.5,o);h=A.toFixed(2),E=Ot.afterFpsTax(d,A).toFixed(3)}return{gcdStr:h,taxedGcdStr:E}}function N2(e){const t=new Map(e.map(d=>[d.type,d]));if(t.has("ASTRAL_FIRE")&&t.has("UMBRAL_ICE")){const d=t.get("ASTRAL_FIRE").stacks,h=t.get("UMBRAL_ICE").stacks;if(d>0&&h>0)return window.alert("shouldn't have both AF and UI stacks"),!1}let n=0,o=0,l=0;if(t.has("ASTRAL_FIRE")&&(n=t.get("ASTRAL_FIRE").stacks),t.has("UMBRAL_ICE")&&(o=t.get("UMBRAL_ICE").stacks),t.has("UMBRAL_HEART")&&(l=t.get("UMBRAL_HEART").stacks),l>0&&n===0&&o===0)return window.alert("since there's at least one UH stack, there should also be Enochian and AF or UI"),!1;let r=!1;return(n>0||o>0||l>0)&&(r=!0),t.has("POLYGLOT")&&t.get("POLYGLOT").timeTillFullOrDrop>0&&!r?(window.alert("since a timer for polyglot is set (time till next stack > 0), there must also be AF/UI"),!1):!0}function p2(){const e=Hi(O.useContext(Ga)),[t,n]=O.useState(void 0),[o,l]=O.useState(vo.AllaganGcdFormula),[r,d]=O.useState([]),[h,E]=O.useState("0"),[A,R]=O.useState("0"),[T,S]=O.useState(!0),I=le=>{w(!0),d(le),b(le)},[p,_]=O.useState("NEVER"),b=le=>{const Ne=new Set(le.map(Xe=>Xe.type)),Le=$i(M.job).keys().find(Xe=>!Ne.has(Xe))??"NEVER";_(Le)},[v,L]=O.useState(!1);function k(le,Ne){var Xe,Ze;const Le={...le,...Ne};if(!Object.is(Le,le)){if(Le.dirty=Ne.dirty??!0,Ne.job!==void 0&&Ne.job!==le.job){const Qe=new vi(GR(Ne.job,parseInt(Ne.level??le.level))),Ke=Mr(Qe).inherentSpeedModifier();if(n(Ke),Ne.job===((Xe=N.record.config)==null?void 0:Xe.job))Object.assign(Le,N.gameConfig.serialized()),d(N.gameConfig.initialResourceOverrides);else{d([]);const At=((Ze=$i(Ne.job).keys().toArray())==null?void 0:Ze[0])??"NEVER";_(At),Object.assign(Le,Ew(Ne.job))}}if(Ne.level!==void 0&&Ne.level!==le.level){const Qe=new vi(GR(le.job,parseInt(Ne.level))),Ke=Mr(Qe).inherentSpeedModifier();n(Ke)}L(parseInt(Le.level)!==N.gameConfig.level||Le.job!==N.gameConfig.job)}return Le}const[M,B]=O.useReducer(k,{job:"BLM",level:`${Rt.lvl100}`,spellSpeed:"0",skillSpeed:"0",criticalHit:"0",directHit:"0",determination:"0",piety:"0",animationLock:"0",fps:"0",gcdSkillCorrection:"0",timeTillFirstManaTick:"0",countdown:"0",randomSeed:"",procMode:xn.RNG,tenacity:"0",wd:"0",main:"0",dirty:!1}),w=le=>B({dirty:le}),x=le=>Ne=>B({[le]:Ne}),[Q,oe]=O.useState(!1),he=Object.fromEntries(Object.keys(M).map(le=>[le,!1])),[ue,de]=O.useState(he),fe=le=>{de({...ue,...Object.fromEntries(le.map(Ne=>[Ne,!0]))})},$=le=>{de({...ue,[le]:!1})},ee=()=>{de(he),oe(!1)};O.useEffect(()=>{GD=le=>{l(le.shellVersion),I(le.initialResourceOverrides),B({...Object.fromEntries(Object.entries(le).flatMap(([Ne,Le])=>Ne!=="initialResourceOverrides"?[[Ne,Le.toString()]]:[]))}),w(!1),ee(),b(le.initialResourceOverrides)}});const Y=le=>ue[le]?e.success:e.text,P=u.jsxs("div",{style:{marginBottom:10},children:[u.jsx("span",{children:C({en:"job: ",zh:"职业："})}),u.jsx("select",{style:{outline:"none",color:Y("job")},value:M.job,onChange:le=>{$("job"),B({job:le.target.value})},children:Is.filter(le=>ft[le].implementationLevel!=="UNIMPLEMENTED").map(le=>{const Ne=ft[le].implementationLevel;return Ne!=="LIVE"?u.jsx("option",{value:le,children:le+` (${C(jC[Ne].label??{en:""})})`},le):u.jsx("option",{value:le,children:le},le)})})]}),{gcdStr:K,taxedGcdStr:W}=iC(M.spellSpeed,M.fps,M.level,t),{gcdStr:D,taxedGcdStr:j}=iC(M.skillSpeed,M.fps,M.level,t),F=o>=vo.FpsTax?e.text:e.warning,G=M.job,J=ft[G].role==="CASTER"||ft[G].role==="HEALER",Ee={en:J?"spell":"skill",zh:J?"咏":"技"},re=le=>Ot.preTaxGcd(parseFloat(M.level),parseFloat(J?M.spellSpeed:M.skillSpeed),le,t),Ae=le=>Ot.afterFpsTax(parseFloat(M.fps),re(le)),Re=u.jsxs("div",{children:[u.jsx("style",{children:m2(e.bgHighContrast)}),u.jsx("div",{style:{marginBottom:10},children:C({en:`Preview numbers based on your current ${Ee.en} speed and FPS input:`,zh:`根据当前输入的${Ee.zh}速和帧率，你将得到如下帧率税：`})}),u.jsx("table",{className:"castTimeTable",children:u.jsxs("tbody",{children:[u.jsxs("tr",{children:[u.jsx("th",{children:C({en:"GCD time",zh:"GCD时间"})}),u.jsx("th",{children:C({en:"After FPS tax",zh:"帧率税后"})})]}),[2.5,3,3.5,4].map((le,Ne)=>u.jsxs("tr",{children:[u.jsxs("td",{children:[re(le).toFixed(2)," (",le.toFixed(2)," ",C({en:"base",zh:"原始"}),")"]}),u.jsx("td",{children:Ae(le).toFixed(3)})]},"gcdPreview"+Ne.toString()))]})})]}),Ce=(le,Ne)=>{if(le.preventDefault(),!Ne&&v){console.error("attempted to apply w/o reset, but job or level changed");return}if(N2(r)){let Le=M.randomSeed;if(Le.length===0){for(let Ke=0;Ke<4;Ke++)Le+=Math.floor(Math.random()*10).toString();B({randomSeed:Le})}const Xe=["spellSpeed","skillSpeed","criticalHit","directHit","determination","animationLock","fps","gcdSkillCorrection","timeTillFirstManaTick","countdown","level","wd","main","tenacity"];if(Xe.map(Ke=>isNaN(parseFloat(M[Ke].toString()))).some(Ke=>Ke)){window.alert("Some config fields are not numbers!");return}if(!(M.job in ft)){window.alert("Invalid job: "+M.job);return}const Ze=N.gameConfig.serialized(),Qe=N.record.serialized();N.setConfigAndRestart({job:M.job,randomSeed:Le.trim(),procMode:M.procMode,initialResourceOverrides:r,...Object.fromEntries(Xe.map(Ke=>[Ke,parseFloat(M[Ke].toString())]))},Ne),N.undoStack.push(new sw(Ze,N.gameConfig.serialized(),Ne?Qe:void 0)),w(!1),L(!1),ee(),N.updateAllDisplay(),N.scrollToTime()}},_e=[["criticalHit",C({en:"crit: ",zh:"暴击："})],["directHit",C({en:"direct hit: ",zh:"直击："})],["determination",C({en:"determination: ",zh:"信念："})],["piety",C({en:"piety: ",zh:"信仰："})],["animationLock",C({en:"animation lock: ",zh:"能力技后摇："})]].map(([le,Ne])=>u.jsx(_2,{name:le,description:Ne,initial:M[le].toString(),dispatch:B,imported:ue[le],removeImportedField:Le=>$(Le)},le)),ge=u.jsxs("div",{style:{marginBottom:16},children:[u.jsxs("div",{children:[u.jsx("span",{children:C({en:"level: ",zh:"等级："})}),u.jsxs("select",{style:{outline:"none",color:Y("level")},value:M.level,onChange:le=>B({level:le.target.value}),children:[(M.level==="100"||G!=="BLU")&&u.jsx("option",{value:Rt.lvl100,children:"100"},Rt.lvl100),(M.level==="90"||G!=="BLU")&&u.jsx("option",{value:Rt.lvl90,children:"90"},Rt.lvl90),u.jsx("option",{value:Rt.lvl80,children:"80"},Rt.lvl80),u.jsx("option",{value:Rt.lvl70,children:"70"},Rt.lvl70)]})]}),u.jsxs("div",{children:[u.jsx(Aa,{style:{display:"inline-block",color:Y("spellSpeed")},defaultValue:M.spellSpeed,description:C({en:"spell speed: ",zh:"咏速："}),onChange:x("spellSpeed")}),u.jsxs("span",{children:[" ","(GCD: ",K," ",u.jsx(We,{topic:"gcdPreview",content:u.jsxs(u.Fragment,{children:[u.jsx("p",{children:C({en:"Preview of displayed GCD based on your spell speed.",zh:"当前咏速对应的游戏内显示的GCD."})}),u.jsx("p",{children:C({en:`Measured average GCD should be ${W} due to FPS tax.`,zh:`由于帧率税的影响，测量得到的平均GCD为${W}。`})})]})}),")"]})]}),u.jsxs("div",{children:[u.jsx(Aa,{style:{display:"inline-block",color:Y("skillSpeed")},defaultValue:M.skillSpeed,description:C({en:"skill speed: ",zh:"技速："}),onChange:x("skillSpeed")}),u.jsxs("span",{children:[" ","(GCD: ",D," ",u.jsx(We,{topic:"sksGcdPreview",content:u.jsxs(u.Fragment,{children:[u.jsx("p",{children:C({en:"Preview of displayed GCD based on your skill speed.",zh:"当前技速对应的游戏内显示的GCD."})}),u.jsx("p",{children:C({en:`Measured average GCD should be ${j} due to FPS tax.`,zh:`由于帧率税的影响，测量得到的平均GCD为${j}。`})})]})}),")"]})]}),_e,u.jsxs("div",{children:[u.jsx(Aa,{componentColor:F,style:{display:"inline-block"},defaultValue:M.fps,description:C({en:"FPS: ",zh:"帧率："}),onChange:x("fps")}),u.jsxs("span",{children:[" ","(",C({en:`${re(2.5).toFixed(2)}s w/ tax`,zh:`${re(2.5).toFixed(2)}s+帧率税`}),": ",Ae(2.5).toFixed(3)," ",u.jsx(We,{topic:"gcdTaxPreview",content:Re}),")"]})]}),u.jsx(Aa,{componentColor:F,defaultValue:M.gcdSkillCorrection,description:u.jsxs("span",{children:[C({en:"GCD correction",zh:"GCD时长修正"})," ",u.jsx(We,{topic:"cast-time-correction",content:C({en:"Leaving this at 0 will probably give you the most accurate simulation. But if you want to manually correct your GCD skill durations (including casts) for whatever reason, you can put a small number (can be negative)",zh:"正常情况下填0即能得到最精确的模拟结果。如果实在需要修正的话，这里输入的时长会被加到你的每个GCD技能（包括读条）耗时里（可以为负）"})}),":"," "]}),onChange:x("gcdSkillCorrection")}),u.jsx(Aa,{defaultValue:M.timeTillFirstManaTick,description:C({en:"time till first MP tick: ",zh:"距首次跳蓝时间："}),onChange:x("timeTillFirstManaTick")}),u.jsx(Aa,{defaultValue:M.countdown,description:u.jsxs("span",{children:[C({en:"countdown ",zh:"倒数时间 "}),u.jsx(We,{topic:"countdown",content:C({en:"can use a negative countdown to start from a specific time of fight",zh:"可以是负数，时间轴会从战斗中途某个时间开始显示"})}),":"," "]}),onChange:x("countdown")}),u.jsx(Aa,{defaultValue:M.randomSeed,description:u.jsxs("span",{children:[C({en:"random seed ",zh:"随机种子 "}),u.jsx(We,{topic:"randomSeed",content:C({en:"can be anything, or leave empty to get 4 random digits.",zh:"可以是任意字符串，或者留空，会获得4个随机数字"})}),":"," "]}),onChange:x("randomSeed")}),u.jsxs("div",{children:[u.jsxs("span",{children:[C({en:"proc mode ",zh:"随机BUFF获取 "}),u.jsx(We,{topic:"procMode",content:C({en:"Default RNG: 40% Firestarter",zh:"RNG会像游戏内一样，相应技能40%概率获得火苗，Always则每次都会触发火苗，Never则从不触发。"})}),":"," "]}),u.jsxs("select",{style:{outline:"none"},value:M.procMode,onChange:le=>B({procMode:le.target.value}),children:[u.jsx("option",{value:xn.RNG,children:"RNG"},xn.RNG),u.jsx("option",{value:xn.Never,children:"Never"},xn.Never),u.jsx("option",{value:xn.Always,children:"Always"},xn.Always)]})]}),u.jsx(T2,{job:M.job,initialResourceOverrides:r,overrideTimer:h,overrideStacks:A,overrideEnabled:T,setInitialResourceOverrides:I,selectedOverrideResource:p,setSelectedOverrideResource:_,setOverrideTimer:E,setOverrideStacks:R,setOverrideEnabled:S})]});return u.jsxs("div",{style:{marginBottom:20},children:[u.jsx(g2,{imported:Q,setImported:oe,setImportedFields:fe,dispatch:B}),u.jsx("br",{}),P,u.jsx(S2,{job:N.getActiveJob(),dirty:M.dirty}),ge,u.jsx("p",{style:{paddingBottom:5},children:C({en:"You can also import/export fights from/to local files at the bottom of the page.",zh:"页面底部有导入和导出战斗文件相关选项。"})}),u.jsx("div",{className:"invisibleScrollbar",style:{boxSizing:"border-box",width:"100%",position:"absolute",paddingRight:5,paddingLeft:5,bottom:0,left:0,overflowY:"scroll"},children:u.jsxs("div",{style:{width:"100%",boxSizing:"border-box",backgroundColor:e.background,borderTop:"1px solid "+e.bgMediumContrast,paddingTop:5,paddingBottom:5,display:"flex",flexDirection:"row",justifyContent:"space-between",gap:5},children:[u.jsxs("button",{onClick:le=>Ce(le,!1),style:{width:"100%",fontWeight:!v&&M.dirty?"bold":"normal",textDecoration:v?"line-through":void 0},disabled:v,children:[C({en:"apply",zh:"应用"}),v&&" ",v&&u.jsx(We,{topic:"applyWithoutReset",content:C({en:"Must reset timeline because job or level changed.",zh:"因为职业或等级有变化，必须重置时间轴。"})}),!v&&M.dirty?"*":""]}),u.jsxs("button",{onClick:le=>Ce(le,!0),style:{width:"100%",fontWeight:M.dirty?"bold":"normal"},children:[C({en:"apply and reset",zh:"应用并重置时间轴"}),M.dirty?"*":""]})]})})]})}function BD(e){let t=Is[0],n=0;return Is.forEach(o=>{const l=e.reduce((r,d)=>fU(o,d)?r+1:r,0);l>n&&(t=o,n=l)}),t}var pl,WE,FD;class C2{constructor(){Fe(this,pl);Z(this,"presetLines",[]);pe(this,pl,FD).call(this)}serialized(){return{fileType:Mi.SkillSequencePresets,presets:this.presetLines.map(({actions:t,job:n})=>t.serialized())}}deserializeAndAppend(t){for(const n of t.presets){const o=tc.deserialize(n.actions);o.name=n.name;const l=o.actions.flatMap(r=>r.info.type===Ve.Skill?[r.info.skillName]:[]);this.addLine(o,n.job??BD(l))}}getLinesForJob(t){return this.presetLines.flatMap(({actions:n,job:o})=>o===t?[n]:[])}addLine(t,n){this.presetLines.push({actions:t,job:n}),_l(),pe(this,pl,WE).call(this)}deleteLine(t){for(let n=0;n<this.presetLines.length;n++)if(this.presetLines[n].actions===t){this.presetLines.splice(n,1),_l(),pe(this,pl,WE).call(this);return}console.assert(!1)}deleteAllLines(){this.presetLines=[],_l(),pe(this,pl,WE).call(this)}}pl=new WeakSet,WE=function(){It("presetLines",JSON.stringify(this.serialized()))},FD=function(){const t=bt("presetLines");if(t!==null){const n=JSON.parse(t);return this.deserializeAndAppend(n),!0}return!1};const O2=new Set(["BLIZZARD","FIRE","BLIZZARD_II","FIRE_II","BLIZZARD_III","FIRE_III","FREEZE","FLARE","BLIZZARD_IV","FIRE_IV","DESPAIR","HIGH_FIRE_II","HIGH_BLIZZARD_II","FLARE_STAR"]),b2=new Set(["FOUL","XENOGLOSSY","PARADOX"]),hl=new Set([]),Qa=e=>N.getUntargetableMask()&&N.timeline.duringUntargetable(e),sc=(e,t)=>N.getUntargetableMask()?N.timeline.getTargetableDurationBetween(e,t):t-e;function us(e){return e.info.type===Ve.Skill&&N.game.dotSkills.includes(e.info.skillName)}function D2(e,t,n){console.assert(us(e),`${e.getNameForMessage()} is not registered as a dot skill`);const o=e.getInitialPotency(),l={castTime:e.tmp_startLockTime?e.tmp_startLockTime-N.gameConfig.countdown:0,applicationTime:e.applicationTime?e.applicationTime-N.gameConfig.countdown:0,displayedModifiers:[],gap:0,override:0,mainPotencyHit:!0,baseMainPotency:0,baseDotPotency:0,initialHitCalculationModifiers:[],tickCalculationModifiers:[],totalNumTicks:0,numHitTicks:0,potencyWithoutPot:0,potPotency:0,partyBuffPotency:0,targetCount:e.targetCount,mainHitFalloff:(o==null?void 0:o.falloff)??0};l.gap=e.getOverTimeGap(t,"damage"),l.override=e.getOverTimeOverrideAmount(t,"damage"),l.baseMainPotency=(o==null?void 0:o.base)??0,l.initialHitCalculationModifiers=(o==null?void 0:o.modifiers)??[],l.mainPotencyHit=e.hitBoss(Qa),l.tickCalculationModifiers=l.initialHitCalculationModifiers.filter(E=>E.source!==U.COMBO&&E.source!==U.POSITIONAL);for(let E=0;E<l.initialHitCalculationModifiers.length;E++){const A=l.initialHitCalculationModifiers[E].source;[U.ENO,U.FUGETSU,U.NO_MERCY,U.POWER_SURGE,U.LANCE_CHARGE,U.LIFE_OF_THE_DRAGON,U.BATTLE_LITANY,U.FIGHT_OR_FLIGHT,U.MOON_FLUTE,U.WHISTLE,U.BRISTLE,U.TINGLEA,U.TINGLEA].includes(A)&&l.displayedModifiers.push(A)}e.getDotPotencies(t).forEach((E,A)=>{E.hasResolved()&&(l.totalNumTicks++,l.baseDotPotency=E.base,E.hasHitBoss(Qa)&&l.numHitTicks++)});const r=e.getPotency({tincturePotencyMultiplier:1,includePartyBuffs:!1,untargetable:Qa,includeSplash:!0}).applied,d=e.getPotency({tincturePotencyMultiplier:N.getTincturePotencyMultiplier(),includePartyBuffs:!1,untargetable:Qa,includeSplash:!0}).applied,h=e.getPotency({tincturePotencyMultiplier:N.getTincturePotencyMultiplier(),includePartyBuffs:!0,untargetable:Qa,includeSplash:!0}).applied;return l.potencyWithoutPot=r,l.potPotency=d-r,l.partyBuffPotency=h-d,l}function y2(e){const t={basePotency:0,displayedModifiers:[],calculationModifiers:[],falloff:1,targetCount:1};if(e.info.type===Ve.Skill){const n=e.info.skillName,o=e.getInitialPotency();if(o)if(t.targetCount=e.targetCount,t.falloff=o.falloff??1,O2.has(n)){t.basePotency=o.base,t.calculationModifiers=o.modifiers;for(const l of o.modifiers){const r=l.source;if(r!==U.ENO&&r!==U.POT){t.displayedModifiers.push(r);break}}}else if(b2.has(n))for(const l of o.modifiers){const r=l.source;if(r===U.ENO){t.basePotency=o.base,t.displayedModifiers=[r],t.calculationModifiers=o.modifiers;break}}else if(us(e))t.basePotency=o.base,e.info.targetCount=o.targetCount;else{t.basePotency=o.base;for(const l of o.modifiers){const r=l.source;r!==U.POT&&r!==U.NO_CDH&&(t.displayedModifiers.push(r),t.calculationModifiers.push(l))}}return t}else return console.assert(!1),t}function v2(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function M2(e,t){const n=y2(t),o={mainTableIndex:-1,expandedNode:n};for(let l=0;l<e.length;l++)if(t.info.type===Ve.Skill&&t.info.skillName===e[l].skillName&&v2(n.displayedModifiers,e[l].displayedModifiers)&&t.targetCount===e[l].targetCount)return o.mainTableIndex=l,o;return o}function Ei(e){return!hl.has(e)}function L2(){return hl.size===0}function oC(e){e.include&&hl.has(e.skillNameOrDoT)?(hl.delete(e.skillNameOrDoT),e.skillNameOrDoT==="DoT"?N.game.dotSkills.forEach(t=>hl.delete(t)):N.game.dotSkills.includes(e.skillNameOrDoT)&&hl.delete("DoT")):(hl.add(e.skillNameOrDoT),e.skillNameOrDoT!=="DoT"&&N.game.dotSkills.includes(e.skillNameOrDoT)&&hl.add("DoT")),N.displayCurrentState(),N.updateStats()}function H2(e){const t={totalDuration:0,targetableDuration:0,potency:{applied:0,pending:0},gcdSkills:{applied:0,pending:0}},n=N.record.getFirstSelection(),o=N.record.getLastSelection();if(n&&o&&n.tmp_startLockTime!==void 0&&o.tmp_endLockTime!==void 0){t.totalDuration=o.tmp_endLockTime-n.tmp_startLockTime;const l=N.gameConfig.countdown;t.targetableDuration=sc(n.tmp_startLockTime-l,o.tmp_endLockTime-l)}return N.record.iterateSelected(l=>{if(l.info.type===Ve.Skill&&!(l.info.skillName in Lo)){const r=Ei(l.info.skillName);N.game.skillsList.get(l.info.skillName).cdName==="cd_GCD"&&r&&(l.hitBoss(Qa)?t.gcdSkills.applied++:l.resolved()||t.gcdSkills.pending++);const h=l.getPotency({tincturePotencyMultiplier:N.getTincturePotencyMultiplier(),untargetable:Qa,includePartyBuffs:!0,excludeDoT:us(l)&&!Ei("DoT"),includeSplash:!0});r&&(t.potency.applied+=h.applied,t.potency.pending+=h.snapshottedButPending)}}),t}function U2(e){let t=Iu.Normal;N.displayingUpToDateGameState||(t=Iu.Historical),N.record.getFirstSelection()&&(t=Iu.Selected);const n={applied:0,pending:0},o={applied:0,pending:0},l=[],r={totalPotencyWithoutPot:0,totalPotPotency:0,totalPartyBuffPotency:0},d=new Map,h=new Map,E=A=>{if(A.info.type===Ve.Skill){const R=A.info.skillName,T=Ei(R),S=R in Lo;N.game.skillsList.get(R).cdName==="cd_GCD"&&T&&(A.hitBoss(Qa)?o.applied++:A.resolved()||o.pending++);const p=A.getPotency({tincturePotencyMultiplier:N.getTincturePotencyMultiplier(),untargetable:Qa,includePartyBuffs:!0,includeSplash:!0,excludeDoT:us(A)&&!Ei("DoT")});if(T&&!S&&(n.applied+=p.applied,n.pending+=p.snapshottedButPending),A.resolved()){const _=M2(l,A);_.mainTableIndex<0&&(l.push({skillName:R,displayedModifiers:_.expandedNode.displayedModifiers,basePotency:S?0:_.expandedNode.basePotency,calculationModifiers:_.expandedNode.calculationModifiers,usageCount:0,hitCount:0,totalPotencyWithoutPot:0,showPotency:A.anyPotencies(),potPotency:0,potCount:0,partyBuffPotency:0,falloff:_.expandedNode.falloff,targetCount:_.expandedNode.targetCount}),_.mainTableIndex=l.length-1);const b=A.hitBoss(Qa);if(l[_.mainTableIndex].usageCount+=1,b&&(l[_.mainTableIndex].hitCount+=1),S)return;const v=A.getPotency({tincturePotencyMultiplier:1,untargetable:Qa,includePartyBuffs:!1,excludeDoT:us(A)&&!Ei("DoT"),includeSplash:!0}).applied,L=A.getPotency({tincturePotencyMultiplier:N.getTincturePotencyMultiplier(),untargetable:Qa,includePartyBuffs:!1,excludeDoT:us(A)&&!Ei("DoT"),includeSplash:!0}).applied,k=A.getPotency({tincturePotencyMultiplier:N.getTincturePotencyMultiplier(),untargetable:Qa,includePartyBuffs:!0,excludeDoT:us(A)&&!Ei("DoT"),includeSplash:!0}).applied;l[_.mainTableIndex].totalPotencyWithoutPot+=v,l[_.mainTableIndex].potPotency+=L-v,l[_.mainTableIndex].partyBuffPotency+=k-L,b&&A.hasBuff(H.Tincture)&&(l[_.mainTableIndex].potCount+=1);let M=h.get(R)??0;M+=k,h.set(R,M),T&&(r.totalPotencyWithoutPot+=v,r.totalPotPotency+=L-v,r.totalPartyBuffPotency+=k-L),A.getAllDotPotencies().forEach((B,w)=>{let x=d.get(w);const Q=N.game.excludedDoTs.includes(w);x||(x={tableRows:[],summary:{cumulativeGap:0,cumulativeOverride:0,timeSinceLastDoTDropped:0,totalTicks:0,maxTicks:N.getMaxTicks(N.game.time,w,Q),dotCoverageTimeFraction:N.getDotCoverageTimeFraction(N.game.getDisplayTime(),w),totalPotencyWithoutPot:0,totalPotPotency:0,totalPartyBuffPotency:0},lastDoT:void 0},d.set(w,x));const oe=D2(A,w,x.lastDoT);x.tableRows.push(oe),x.lastDoT=A,x.summary.cumulativeGap+=oe.gap,x.summary.cumulativeOverride+=oe.override,x.summary.totalTicks+=oe.numHitTicks,x.summary.totalPotencyWithoutPot+=oe.potencyWithoutPot,x.summary.totalPotPotency+=oe.potPotency,x.summary.totalPartyBuffPotency+=oe.partyBuffPotency})}}};return t===Iu.Selected?N.record.iterateSelected(E):N.record.iterateAll(E),d.forEach((A,R)=>{if(A.lastDoT){const T=A.lastDoT.applicationTime;console.assert(T!==void 0,`DoT node for ${R} was not resolved`);const S=T+N.game.getStatusDuration(R),I=sc(S,N.game.getDisplayTime()),p=N.game.getDisplayTime()-S;p>0&&(A.summary.cumulativeGap+=I,A.summary.timeSinceLastDoTDropped=p)}else{const T=sc(0,Math.max(0,N.game.getDisplayTime()));A.summary.cumulativeGap=T,A.summary.timeSinceLastDoTDropped=T}}),l.sort((A,R)=>{if(A.showPotency!==R.showPotency){const T=A.showPotency?1:0;return(R.showPotency?1:0)-T}else if(A.skillName!==R.skillName){const T=h.get(A.skillName)??0;return(h.get(R.skillName)??0)-T}else{if(A.targetCount!==R.targetCount)return R.targetCount-A.targetCount;if(A.displayedModifiers.length!==R.displayedModifiers.length)return R.displayedModifiers.length-A.displayedModifiers.length;for(let T=0;T<A.displayedModifiers.length;T++){const S=A.displayedModifiers[T]-R.displayedModifiers[T];if(S!==0)return S}return 0}}),{time:N.game.time,tinctureBuffPercentage:e.tinctureBuffPercentage,totalPotency:n,lastDamageApplicationTime:e.lastDamageApplicationTime,countdown:N.gameConfig.countdown,gcdSkills:o,mainTable:l,mainTableSummary:r,dotTables:d,mode:t}}var Iu=(e=>(e[e.Normal=0]="Normal",e[e.Historical=1]="Historical",e[e.Selected=2]="Selected",e))(Iu||{});let XR=e=>{},zD=e=>{};function lC(e){const t=cU(e.buff),n=iU(e.buff);return u.jsx("span",{style:{borderRadius:2,border:"1px solid "+n,fontSize:11,marginRight:4,padding:"1px 4px",background:n+"1f"},children:u.jsx("b",{style:{color:n},children:t})})}function cR(e){let t=e.basePotency,n=e.basePotency.toFixed(2)+C({en:"(base)",zh:"(基础威力)"});e.explainUntargetable&&(n+=C({en:"(untargetable)",zh:"(不可选中)"}));let o="";if(e.calc.forEach(l=>{l.kind==="adder"&&l.additiveAmount>0&&(t+=l.additiveAmount,o+=" + "+l.additiveAmount+"("+kN(l.source)+")")}),o&&(n="[ "+n+o+" ]"),e.calc.forEach(l=>{l.kind==="multiplier"&&l.potencyFactor!==1&&(t*=l.potencyFactor,n+=" × "+l.potencyFactor+"("+kN(l.source)+")")}),e.targetCount&&e.falloff!==void 0&&e.targetCount>1){const l=1+(1-e.falloff)*(e.targetCount-1);n=`[ ${n} ] x ${l}(${e.targetCount}${C({en:" targets",zh:"个目标"})})`,t*=l}return u.jsxs("span",{style:{textDecoration:e.includeInStats?"none":"line-through"},children:[t.toFixed(2)," ",u.jsx(We,{topic:e.helpTopic,content:n})]})}function k2(){const[e,t]=O.useState("8"),n=l=>{t(l);const r=parseFloat(l);isNaN(r)||(N.setTinctureBuffPercentage(r),It("tinctureBuffPercentage",l))};O.useEffect(()=>{const l=bt("tinctureBuffPercentage");l!==null&&n(l)},[]);const o=u.jsxs("span",{children:[C({en:"exclude damage when untargetable",zh:"Boss上天期间威力按0计算"})," ",u.jsx(We,{topic:"untargetableMask",content:u.jsxs("div",{children:[u.jsx("div",{className:"paragraph",children:C({en:"Having this checked will exclude damages from untargetable phases.",zh:"若勾选，统计将不包括Boss上天期间造成的伤害。"})}),u.jsx("div",{className:"paragraph",children:C({en:'You can mark up such phases using timeline markers of type "Untargetable".',zh:"可在下方用 “不可选中” 类型的时间轴标记来指定时间区间。"})}),u.jsx("div",{className:"paragraph",children:C({en:"This is just a statistics helper though. For example it doesn't prevent you from using skills when the boss is untargetable.",zh:"此功能只是一个统计用的工具，在标注了 “不可选中” 的时间里其实也能正常使用技能。"})})]})})]});return u.jsxs("div",{children:[u.jsx(Aa,{defaultValue:e,description:C({en:" tincture potency buff ",zh:"爆发药威力加成 "}),onChange:n,width:2,style:{display:"inline"}}),u.jsx("span",{children:"%"}),u.jsx(Tu,{uniqueName:"untargetableMask",label:o,onChange:l=>{N.setUntargetableMask(l)}})]})}const sC="0.375em 0.75em";class jD extends rn.Component{constructor(n){super(n);Z(this,"selected",{totalDuration:0,targetableDuration:0,potency:{applied:0,pending:0},gcdSkills:{applied:0,pending:0}});Z(this,"data",{time:0,tinctureBuffPercentage:0,countdown:0,totalPotency:{applied:0,pending:0},lastDamageApplicationTime:0,gcdSkills:{applied:0,pending:0},mainTable:[],mainTableSummary:{totalPotencyWithoutPot:0,totalPotPotency:0,totalPartyBuffPotency:0},dotTables:new Map,mode:0});XR=o=>{this.data={...this.data,...o},this.forceUpdate()},zD=o=>{this.selected={...this.selected,...o},this.forceUpdate()}}componentWillUnmount(){XR=n=>{}}render(){const n=Hi(this.context),o=L2(),l=C({en:": ",zh:"："}),r=C({en:" (",zh:"（"}),d=C({en:") ",zh:"）"}),h=o?"":C({en:" (checked only)",zh:"（勾选部分）"}),E=this.data.lastDamageApplicationTime-this.data.countdown,A=sc(0,E),R=this.data.lastDamageApplicationTime>-this.data.countdown,T=R?E.toFixed(3).toString():"N/A";let S=C({en:"Total potency",zh:"总威力"}),I=C({en:"Selected potency",zh:"选中威力"});if(this.data.tinctureBuffPercentage>0){const P=r+C({en:"pot +",zh:"爆发药 +"})+this.data.tinctureBuffPercentage+"%"+d;S+=P,I+=P}S+=h,I+=h,S+=l+this.data.totalPotency.applied.toFixed(2),I+=l+this.selected.potency.applied.toFixed(2),this.data.totalPotency.pending>0&&(S+=r+this.data.totalPotency.pending.toFixed(2)+C({en:" pending",zh:"未结算"})+d),this.selected.potency.pending>0&&(I+=r+this.selected.potency.pending.toFixed(2)+C({en:" pending",zh:"未结算"})+d);let p=C({en:"GCD skills",zh:"GCD技能"})+h+l+this.data.gcdSkills.applied,_=C({en:"Selected GCD skills",zh:"选中GCD技能"})+h+l+this.selected.gcdSkills.applied;this.data.gcdSkills.pending>0&&(p+=r+"+"+this.data.gcdSkills.pending+C({en:" not yet applied",zh:"未结算"})+d),this.selected.gcdSkills.pending>0&&(_+=r+"+"+this.selected.gcdSkills.pending+C({en:" not yet applied",zh:"未结算"})+d);const b=N.game.overTimeEffectGroups.filter(P=>P.reportName&&!P.isHealing).map(P=>{let K=P.reportName+C({en:" uptime",zh:"覆盖率"})+l,W=0,D=0,j=0;return P.groupedEffects.forEach(F=>{const G=this.data.dotTables.get(F.effectName);G&&(W+=G.summary.dotCoverageTimeFraction,D+=G.summary.totalTicks,j=Math.max(j,G.summary.maxTicks))}),K+=(W*100).toFixed(2)+"%",K+=r+C({en:"ticks",zh:"跳雷次数"})+l+D+"/"+j+d,u.jsx("div",{children:K},`dot-uptime-${P.reportName}`)});let v;const L=this.selected.targetableDuration>0;this.selected.totalDuration>0&&(v=u.jsxs("div",{style:{flex:1,color:n.accent},children:[u.jsxs("div",{children:[C({en:"Selected duration",zh:"选中时长"}),l,this.selected.totalDuration.toFixed(3)]}),u.jsx("div",{children:I}),u.jsxs("div",{children:[C({en:"Selected PPS",zh:"选中部分PPS"}),l,L?(this.selected.potency.applied/this.selected.targetableDuration).toFixed(2):"N/A"]}),u.jsx("div",{children:_})]}));const k=u.jsxs("div",{style:{display:"flex",marginBottom:10,flexDirection:"row"},children:[u.jsxs("div",{style:{flex:1},children:[u.jsxs("div",{style:{color:this.data.mode!==0?n.historical:n.text},children:[u.jsxs("div",{children:[C({en:"Last damage application time",zh:"最后伤害结算时间"}),l,T]}),u.jsx("div",{children:S}),u.jsxs("div",{children:["PPS"," ",u.jsx(We,{topic:"ppsNotes",content:u.jsxs("div",{className:"toolTip",children:[u.jsx("div",{className:"paragraph",children:C({en:"(total applied potency of checked skills) / (total targetable duration from 0s until last damage application time).",zh:"统计表中勾选技能的已结算总威力 / (从0s到最后伤害结算时间 - 不可选中总时长)。"})}),u.jsx("div",{className:"paragraph",children:C({en:"could be inaccurate if any damage happens before pull, or if some damage's not applied yet",zh:"如果有伤害在0s之前结算，或者当前有的伤害还未结算，那么此PPS可能会不准确"})})]})}),l,R?(this.data.totalPotency.applied/A).toFixed(2):"N/A"]}),u.jsx("div",{children:p}),b]}),u.jsxs("div",{style:{marginTop:10},children:[u.jsx(k2,{}),u.jsx(Nl,{fileFormat:Uo.Csv,getContentFn:()=>({body:N.getDamageLogCsv()}),filename:"damage-log",displayName:C({en:"download detailed damage log as CSV file",zh:"下载详细伤害结算记录（CSV格式）"})})]})]}),v]}),M=function(P){return{verticalAlign:"middle",boxSizing:"border-box",display:"inline-block",width:P+"%",padding:sC}},B=function(P){return N.game.dotSkills.includes(P)},w=function(P){return B(P)?!0:["AUTOMATON_QUEEN","WILDFIRE",...Object.keys(Lo)].includes(P)},x=function(P){const K=P.row.skillName===P.lastRowSkill,W=[];W.push(P.row.displayedModifiers.map((Ce,xe)=>u.jsx(lC,{buff:Ce},xe)));const D=Ei(P.row.skillName),j=[];!K&&P.row.basePotency>0&&!(P.row.skillName in Lo)&&j.push(u.jsx("input",{type:"checkbox",style:{position:"relative",top:2,marginRight:10},checked:D,onChange:()=>{oC({skillNameOrDoT:P.row.skillName,include:!D})}},"main")),!K&&B(P.row.skillName)&&j.push(u.jsx("input",{type:"checkbox",style:{position:"relative",top:2,marginRight:10},checked:Ei("DoT"),onChange:()=>{oC({skillNameOrDoT:"DoT",include:!Ei("DoT")})}},"dot"));let F;K||(F=u.jsxs("span",{children:[u.jsxs("span",{style:{textDecoration:D?"none":"line-through",color:D?n.text:n.bgHighContrast},children:[xi(P.row.skillName)," ",B(P.row.skillName)?u.jsx(We,{topic:"potencyStats-thunder",content:C({en:"See table below for details",zh:"详见下方统计表格"})}):void 0]}),B(P.row.skillName)?u.jsxs("span",{style:{textDecoration:Ei("DoT")?"none":"line-through",color:Ei("DoT")?n.text:n.bgHighContrast},children:[u.jsx("br",{}),C({en:"(DoT)",zh:"（DoT）"})," "]}):void 0]}));let G;P.row.targetCount&&P.row.basePotency>0&&(G=u.jsx("span",{style:{textDecoration:D?"none":"line-through"},children:P.row.targetCount}));let J;P.row.basePotency>0&&!w(P.row.skillName)&&(J=u.jsx(cR,{includeInStats:D,basePotency:P.row.basePotency,helpTopic:"mainTable-potencyCalc-"+P.key,calc:P.row.calculationModifiers,falloff:P.row.falloff,targetCount:P.row.targetCount}));const Ee=P.row.usageCount-P.row.hitCount,re=u.jsxs("span",{style:{textDecoration:D?"none":"line-through"},children:[P.row.hitCount,Ee>0?u.jsxs("span",{style:{color:n.timeline.untargetableDamageMark+"af"},children:[" ","+",Ee," ",u.jsx(We,{topic:"mainTable-numUntargetableUsages-"+P.key,content:C({en:"usage(s) when untargetable",zh:"Boss上天期间使用次数"})})]}):void 0]});let Ae;P.row.showPotency&&!(P.row.skillName in Lo)&&(Ae=u.jsxs("span",{style:{textDecoration:D?"none":"line-through"},children:[P.row.totalPotencyWithoutPot.toFixed(2),P.row.potPotency>0?u.jsxs("span",{style:{color:D?n.timeline.potCover:n.bgHighContrast},children:[" ","+",P.row.potPotency.toFixed(2),"(",C({en:"pot",zh:"爆发药"}),")(",P.row.potCount,")"]}):void 0,P.row.partyBuffPotency>0?u.jsxs("span",{style:{color:D?n.accent:n.bgHighContrast},children:[" ","+",P.row.partyBuffPotency.toFixed(2),"(",C({en:"party",zh:"团辅"}),")"]}):void 0]}));const Re={textAlign:"left",position:"relative",borderTop:K?"none":"1px solid "+n.bgMediumContrast};return D||(Re.color=n.bgHighContrast),u.jsxs("div",{style:Re,children:[u.jsx("div",{style:M(3),children:j}),u.jsx("div",{style:M(18),children:F}),u.jsx("div",{style:M(8),children:G}),u.jsx("div",{style:M(19),children:W}),u.jsx("div",{style:M(14),children:J}),u.jsx("div",{style:M(8),children:re}),u.jsx("div",{style:M(30),children:Ae})]},P.key)},Q=[];for(let P=0;P<this.data.mainTable.length;P++)Q.push(x({row:this.data.mainTable[P],key:P,lastRowSkill:P===0?void 0:this.data.mainTable[P-1].skillName}));const oe=function(P){const K=[];K.push(P.row.displayedModifiers.map((Re,Ce)=>u.jsx(lC,{buff:Re},Ce)));const W=P.row.gap.toFixed(3),D=P.row.gap>0?u.jsx("span",{children:W}):u.jsx("span",{}),j=P.row.override.toFixed(3),F=P.row.override>0?u.jsx("span",{children:j}):u.jsx("span",{}),G=u.jsx(cR,{basePotency:P.row.mainPotencyHit?P.row.baseMainPotency:0,includeInStats:!0,explainUntargetable:!P.row.mainPotencyHit,helpTopic:"thunderTable-main-"+P.key,calc:P.row.initialHitCalculationModifiers,targetCount:P.row.targetCount,falloff:P.row.mainHitFalloff}),J=u.jsx(cR,{basePotency:P.row.baseDotPotency,includeInStats:!0,helpTopic:"thunderTable-dot-"+P.key,calc:P.row.tickCalculationModifiers,targetCount:P.row.targetCount,falloff:0}),Ee=P.row.totalNumTicks-P.row.numHitTicks,re=u.jsxs("span",{children:[P.row.numHitTicks,Ee>0?u.jsxs("span",{style:{color:n.timeline.untargetableDamageMark+"af"},children:[" ","+",Ee," ",u.jsx(We,{topic:"thunderTable-numUntargetableTicks-"+P.key,content:C({en:"tick(s) when untargetable",zh:"Boss上天期间跳DoT次数"})})]}):void 0]}),Ae=u.jsxs("span",{children:[P.row.potencyWithoutPot.toFixed(2),P.row.potPotency>0?u.jsxs("span",{style:{color:n.timeline.potCover},children:[" ","+",P.row.potPotency.toFixed(2),"(",C({en:"pot",zh:"爆发药"}),")"]}):void 0,P.row.partyBuffPotency>0?u.jsxs("span",{style:{color:n.accent},children:[" ","+",P.row.partyBuffPotency.toFixed(2),"(",C({en:"party",zh:"团辅"}),")"]}):void 0]});return u.jsxs("div",{style:{textAlign:"left",position:"relative",borderTop:"1px solid "+n.bgMediumContrast},children:[u.jsx("div",{style:M(8),children:P.row.castTime.toFixed(3)}),u.jsx("div",{style:M(8),children:P.row.applicationTime.toFixed(3)}),u.jsx("div",{style:M(12),children:K}),u.jsx("div",{style:M(10),children:D}),u.jsx("div",{style:M(10),children:F}),u.jsx("div",{style:M(10),children:G}),u.jsx("div",{style:M(10),children:J}),u.jsx("div",{style:M(8),children:re}),u.jsx("div",{style:M(24),children:Ae})]},P.key)},he=[];this.data.dotTables.forEach((P,K)=>{const W=[];for(let D=0;D<P.tableRows.length;D++)W.push(oe({row:P.tableRows[D],key:D}));he.push({dotName:K,tableRows:W})});const ue={display:"inline-block",padding:sC};let de=C(o?{en:"Applied Skills",zh:"技能统计"}:{en:"Applied Skills (Checked Only)",zh:"技能统计（仅统计选中技能）"}),fe="";if(this.data.mode===1){const P=(this.data.time-this.data.countdown).toFixed(3)+"s",K=r+C({en:"up till "+P,zh:"截至"+P})+d;de+=K,fe=K}else if(this.data.mode===2){const P=r+C({en:"from selected skills",zh:"来自选中技能"})+d;de+=P,fe+=P}let $=n.text;this.data.mode===1?$=n.historical:this.data.mode===2&&($=n.accent);const ee=u.jsxs("div",{id:"damageTable",style:{position:"relative",margin:"0 auto",marginBottom:40,maxWidth:960},children:[u.jsx("div",{style:{...M(100),textAlign:"center",marginBottom:10},children:u.jsx("b",{style:{color:$},children:de})}),u.jsxs("div",{style:{outline:"1px solid "+n.bgMediumContrast},children:[u.jsxs("div",{children:[u.jsx("div",{style:{display:"inline-block",width:"21%"},children:u.jsx("span",{style:ue,children:u.jsx("b",{children:C({en:"skill",zh:"技能"})})})}),u.jsx("div",{style:{display:"inline-block",width:"27%"},children:u.jsx("span",{style:ue,children:u.jsx("b",{children:C({en:"targets",zh:"目标数"})})})}),u.jsx("div",{style:{display:"inline-block",width:"14%"},children:u.jsx("span",{style:ue,children:u.jsx("b",{children:C({en:"potency",zh:"单次威力"})})})}),u.jsx("div",{style:{display:"inline-block",width:"8%"},children:u.jsx("span",{style:ue,children:u.jsx("b",{children:C({en:"count",zh:"数量"})})})}),u.jsx("div",{style:{display:"inline-block",width:"30%"},children:u.jsx("span",{style:ue,children:u.jsx("b",{children:C({en:"total",zh:"总威力"})})})})]}),Q,u.jsxs("div",{style:{textAlign:"left",position:"relative",borderTop:"1px solid "+n.bgMediumContrast},children:[u.jsx("div",{style:M(70)}),u.jsx("div",{style:M(30),children:u.jsxs("span",{children:[this.data.mainTableSummary.totalPotencyWithoutPot.toFixed(2),this.data.mainTableSummary.totalPotPotency>0?u.jsxs("span",{style:{color:n.timeline.potCover},children:[" ","+",this.data.mainTableSummary.totalPotPotency.toFixed(2),C({en:" (pot +"+this.data.tinctureBuffPercentage+"%)",zh:"(爆发药 +"+this.data.tinctureBuffPercentage+"%)"})]}):void 0,this.data.mainTableSummary.totalPartyBuffPotency>0?u.jsxs("span",{style:{color:n.accent},children:[" ","+",this.data.mainTableSummary.totalPartyBuffPotency.toFixed(2),"(",C({en:"party",zh:"团辅"}),")"]}):void 0]})})]})]})]}),Y=he.map(P=>{var j;const K=P.tableRows,W=(j=this.data.dotTables.get(P.dotName))==null?void 0:j.summary;if(W===void 0)return u.jsx(u.Fragment,{});const D=je(P.dotName)+fe;return u.jsxs("div",{style:{position:"relative",margin:"0 auto",marginBottom:40,maxWidth:960},children:[u.jsx("div",{style:{...M(100),textAlign:"center",marginBottom:10},children:u.jsx("b",{style:{color:$},children:D})}),u.jsxs("div",{style:{outline:"1px solid "+n.bgMediumContrast},children:[u.jsxs("div",{children:[u.jsx("div",{style:{display:"inline-block",width:"8%"},children:u.jsx("span",{style:ue,children:u.jsx("b",{children:C({en:"cast time",zh:"读条时间"})})})}),u.jsx("div",{style:{display:"inline-block",width:"8%"},children:u.jsx("span",{style:ue,children:u.jsx("b",{children:C({en:"application time",zh:"结算时间"})})})}),u.jsx("div",{style:{display:"inline-block",width:"12%"},children:u.jsx("span",{style:ue})}),u.jsx("div",{style:{display:"inline-block",width:"10%"},children:u.jsxs("span",{style:ue,children:[u.jsxs("b",{children:[C({en:"gap",zh:"DoT间隙"})," "]}),u.jsx(We,{topic:"dot-gap-title",content:C({en:u.jsxs("div",{children:[u.jsx("div",{className:"paragraph",children:"DoT coverage time gap since pull or previous application"}),u.jsx("div",{className:"paragraph",children:"The last row also includes gap at the beginning and end of the fight"})]}),zh:u.jsx("div",{children:"雷DoT覆盖间隙，最后一行也包括战斗开始和结束时没有雷DoT的时间"})})})]})}),u.jsx("div",{style:{display:"inline-block",width:"10%"},children:u.jsxs("span",{style:ue,children:[u.jsxs("b",{children:[C({en:"override",zh:"DoT覆盖"})," "]}),u.jsx(We,{topic:"dot-override-title",content:C({en:u.jsx("div",{children:"Overridden DoT time from previous application"}),zh:u.jsx("div",{children:"提前覆盖雷DoT时长"})})})]})}),u.jsx("div",{style:{display:"inline-block",width:"10%"},children:u.jsx("span",{style:ue,children:u.jsx("b",{children:C({en:"initial",zh:"初始威力"})})})}),u.jsx("div",{style:{display:"inline-block",width:"10%"},children:u.jsx("span",{style:ue,children:u.jsx("b",{children:C({en:"DoT",zh:"DoT威力"})})})}),u.jsx("div",{style:{display:"inline-block",width:"8%"},children:u.jsx("span",{style:ue,children:u.jsx("b",{children:C({en:"ticks",zh:"跳雷次数"})})})}),u.jsx("div",{style:{display:"inline-block",width:"24%"},children:u.jsx("span",{style:ue,children:u.jsx("b",{children:C({en:"total",zh:"总威力"})})})})]}),K,u.jsxs("div",{style:{textAlign:"left",position:"relative",borderTop:"1px solid "+n.bgMediumContrast},children:[u.jsx("div",{style:M(28)}),u.jsx("div",{style:M(10),children:W.cumulativeGap.toFixed(3)}),u.jsx("div",{style:M(10),children:W.cumulativeOverride.toFixed(3)}),u.jsx("div",{style:M(20)}),u.jsx("div",{style:M(8),children:N.game.fullTimeDoTs.includes(P.dotName)?u.jsxs(u.Fragment,{children:[W.totalTicks,"/",W.maxTicks]}):u.jsx(u.Fragment,{children:W.totalTicks})}),u.jsxs("div",{style:M(24),children:[W.totalPotencyWithoutPot.toFixed(2),W.totalPotPotency>0?u.jsxs("span",{style:{color:n.timeline.potCover},children:[" ","+",W.totalPotPotency.toFixed(2),C({en:"(pot +"+this.data.tinctureBuffPercentage+"%)",zh:"(爆发药 +"+this.data.tinctureBuffPercentage+"%)"})]}):void 0,W.totalPartyBuffPotency>0?u.jsxs("span",{style:{color:n.accent},children:[" ","+",W.totalPartyBuffPotency.toFixed(2),"(",C({en:"party",zh:"团辅"}),")"]}):void 0]})]})]})]},`dot-table-${P.dotName}`)});return u.jsxs("div",{children:[k,u.jsxs("div",{children:[ee,Y]})]})}}Z(jD,"contextType",Ga);const nd=e=>{e.job==="RDM"&&e.tryConsumeResource("DUALCAST")&&N.reportWarning({kind:"custom",en:"dualcast dropped"})},Bi=e=>e.job!=="NIN"||!e.hasResourceAvailable("TEN_CHI_JIN"),Fi=e=>{e.job==="NIN"&&e.hasResourceAvailable("MUDRA")&&e.gainStatus("BUNNY")};ot(Tn,"INTERJECT",18,"cd_HEAD_GRAZE",{applicationDelay:0,cooldown:30,assetPath:"Role/Interject.png",startsAuto:!0});ot(Ll,"HEAD_GRAZE",24,"cd_HEAD_GRAZE",{applicationDelay:0,cooldown:30,assetPath:"Role/Head Graze.png"});Tn.forEach(e=>{Ye(e,"REPRISAL",1,{timeout:15})});ze(Tn,"REPRISAL",22,"cd_REPRISAL",{rscType:"REPRISAL",applicationDelay:.62,cooldown:60,duration:e=>e.hasTraitUnlocked("ENHANCED_REPRISAL")&&15||10,assetPath:"Role/Reprisal.png",startsAuto:!0});cn.forEach(e=>{Ye(e,"FEINT",1,{timeout:15})});ze(cn,"FEINT",22,"cd_FEINT",{rscType:"FEINT",applicationDelay:.537,cooldown:90,duration:e=>e.hasTraitUnlocked("ENHANCED_FEINT")&&15||10,assetPath:"Role/Feint.png",validateAttempt:Bi,onConfirm:Fi});[...rc,...Ti].forEach(e=>{Ye(e,"ADDLE",1,{timeout:15})});ze([...Ti,...rc],"ADDLE",8,"cd_ADDLE",{rscType:"ADDLE",applicationDelay:.621,cooldown:90,duration:e=>e.hasTraitUnlocked("ENHANCED_ADDLE")&&15||10,assetPath:"Role/Addle.png"});Tn.forEach(e=>{Ye(e,"RAMPART",1,{timeout:20})});ze(Tn,"RAMPART",8,"cd_RAMPART",{rscType:"RAMPART",applicationDelay:.62,cooldown:90,assetPath:"Role/Rampart.png"});cn.forEach(e=>{Ye(e,"TRUE_NORTH",1,{timeout:10})});ze(cn,"TRUE_NORTH",50,"cd_TRUE_NORTH",{rscType:"TRUE_NORTH",applicationDelay:0,cooldown:45,maxCharges:2,assetPath:"Role/True North.png",validateAttempt:Bi,onConfirm:Fi});[...Ri,...Ti,...rc].forEach(e=>{Ye(e,"SWIFTCAST",1,{timeout:10})});ze([...Ri,...Ti,...rc],"SWIFTCAST",18,"cd_SWIFTCAST",{rscType:"SWIFTCAST",applicationDelay:0,cooldown:40,assetPath:"Role/Swiftcast.png"});[...Ri,...Ti,...rc].forEach(e=>{Ye(e,"LUCID_DREAMING",1,{timeout:21})});ze([...Ri,...Ti,...rc],"LUCID_DREAMING",14,"cd_LUCID_DREAMING",{rscType:"LUCID_DREAMING",applicationDelay:.623,cooldown:60,assetPath:"Role/Lucid Dreaming.png",onApplication:(e,t)=>{const n=e.resources.get("LUCID_DREAMING");n.node=t,n.tickCount=0;const o=e.findNextQueuedEventByTag(hn.LucidTick);o&&o.addTag(hn.ManaGain)}});[...Tn,...cn,...Ll].forEach(e=>{Ye(e,"ARMS_LENGTH",1,{timeout:6.5})});ze([...Tn,...cn,...Ll],"ARMS_LENGTH",32,"cd_ARMS_LENGTH",{rscType:"ARMS_LENGTH",applicationDelay:.62,cooldown:120,assetPath:"Role/Arms Length.png",validateAttempt:Bi,onConfirm:Fi});[...Ri,...Ti].forEach(e=>{Ye(e,"SURECAST",1,{timeout:6.5})});ze([...Ri,...Ti],"SURECAST",44,"cd_SURECAST",{rscType:"SURECAST",applicationDelay:0,cooldown:120,assetPath:"Role/Surecast.png"});cn.forEach(e=>{Ye(e,"BLOODBATH",1,{timeout:20})});ze(cn,"BLOODBATH",8,"cd_BLOODBATH",{rscType:"BLOODBATH",applicationDelay:.625,cooldown:90,assetPath:"Role/Bloodbath.png",validateAttempt:Bi,onConfirm:Fi});ot([...cn,...Ll],"SECOND_WIND",12,"cd_SECOND_WIND",{healingPotency:600,applicationDelay:.625,cooldown:120,assetPath:"Role/Second Wind.png",validateAttempt:Bi,onConfirm:Fi});ot(Tn,"PROVOKE",15,"cd_PROVOKE",{applicationDelay:.62,cooldown:30,assetPath:"Role/Provoke.png",drawsAggro:!0,startsAuto:!0});ot(Tn,"SHIRK",48,"cd_SHIRK",{applicationDelay:0,cooldown:120,assetPath:"Role/Shirk.png"});ot(Tn,"LOW_BLOW",25,"cd_LOW_BLOW",{applicationDelay:.62,cooldown:25,assetPath:"Role/Low Blow.png",startsAuto:!0});Qn(Ri,"ESUNA",10,{manaCost:400,castTime:0,applicationDelay:1.14,assetPath:"Role/Esuna.png"});ot(Ri,"RESCUE",48,"cd_RESCUE",{applicationDelay:0,cooldown:120,assetPath:"Role/Rescue.png"});ot(cn,"LEG_SWEEP",10,"cd_LEG_SWEEP",{applicationDelay:.625,cooldown:40,assetPath:"Role/Leg Sweep.png",validateAttempt:Bi,onConfirm:Fi});ze(Is,"TINCTURE",1,"cd_TINCTURE",{rscType:"TINCTURE",applicationDelay:.64,cooldown:270,assetPath:"General/Tincture.png",validateAttempt:Bi,onConfirm:Ue(nd,Fi)});ze(Is,"SPRINT",1,"cd_SPRINT",{rscType:"SPRINT",applicationDelay:.133,cooldown:60,assetPath:"General/Sprint.png",validateAttempt:Bi,onConfirm:Ue(nd,Fi)});Tn.forEach(e=>{Ye(e,"SHIELD_WALL",1,{timeout:10}),Ye(e,"STRONGHOLD",1,{timeout:12})});const pS=e=>Object.keys(LC).forEach(t=>{t!=="UNKNOWN"&&e.tryConsumeResource(t)});In(Tn,"SHIELD_WALL","cd_LIMIT_BREAK_1",{tier:"1",applicationDelay:.45,animationLock:1.93,onApplication:e=>{pS(e),e.gainStatus("SHIELD_WALL")}});In(Tn,"STRONGHOLD","cd_LIMIT_BREAK_2",{tier:"2",applicationDelay:.89,animationLock:3.86,onApplication:e=>{pS(e),e.gainStatus("STRONGHOLD")}});Tn.forEach(e=>{const t=ft[e].limitBreak??"UNKNOWN",n=ft[e].limitBreakBuff??"UNKNOWN";Ye(e,n,1,{timeout:8}),In(e,t,"cd_LIMIT_BREAK_3",{tier:"3",applicationDelay:1.34,animationLock:3.86,onApplication:o=>{pS(o),o.gainStatus(n)}})});In(Ri,"HEALING_WIND","cd_LIMIT_BREAK_1",{tier:"1",castTime:2,healingPotency:25,applicationDelay:.76,animationLock:2.1});In(Ri,"BREATH_OF_THE_EARTH","cd_LIMIT_BREAK_2",{tier:"2",castTime:2,healingPotency:50,applicationDelay:.8,animationLock:5.13});Ri.forEach(e=>{const t=ft[e].limitBreak??"UNKNOWN";In(e,t,"cd_LIMIT_BREAK_3",{tier:"3",castTime:2,healingPotency:100,applicationDelay:.8,animationLock:8.1})});In(cn,"BRAVER","cd_LIMIT_BREAK_1",{tier:"1",castTime:2,applicationDelay:2.23,animationLock:3.86,potency:1e3,validateAttempt:Bi,onConfirm:Fi});In(cn,"BLADEDANCE","cd_LIMIT_BREAK_2",{tier:"2",castTime:3,applicationDelay:3.28,animationLock:3.86,potency:2200,validateAttempt:Bi,onConfirm:Fi});cn.forEach(e=>{const t=ft[e].limitBreak??"UNKNOWN";In(e,t,"cd_LIMIT_BREAK_3",{tier:"3",castTime:4.5,applicationDelay:2.26,animationLock:3.7,potency:3500,validateAttempt:Bi,onConfirm:Fi})});In(Ll,"BIGSHOT","cd_LIMIT_BREAK_1",{tier:"1",castTime:2,applicationDelay:2.23,animationLock:3.1,potency:540});In(Ll,"DESPERADO","cd_LIMIT_BREAK_2",{tier:"2",castTime:3,applicationDelay:2.49,animationLock:3.1,potency:1170});Ll.forEach(e=>{const t=ft[e].limitBreak??"UNKNOWN";In(e,t,"cd_LIMIT_BREAK_3",{tier:"3",castTime:4.5,applicationDelay:3.16,animationLock:3.7,potency:1890})});In(Ti,"SKYSHARD","cd_LIMIT_BREAK_1",{tier:"1",castTime:2,applicationDelay:1.64,animationLock:3.1,onConfirm:nd,potency:600});In(Ti,"STARSTORM","cd_LIMIT_BREAK_2",{tier:"2",castTime:3,applicationDelay:3.75,animationLock:5.1,onConfirm:nd,potency:1300});Ti.forEach(e=>{const t=ft[e].limitBreak??"UNKNOWN";In(e,t,"cd_LIMIT_BREAK_3",{tier:"3",castTime:4.5,applicationDelay:4.5,animationLock:8.1,onConfirm:e==="RDM"?nd:void 0,potency:2100})});const rC="stdtick";var qi,Es,Qr,ui,hs,Fu,Do,$r,zu,fs,As,ms,ba,Jr,Oi,Tl,ye,dl,YD,El,_u,qR,Xa,XE,KD,ZR,ls,QR;class x2{constructor(){Fe(this,ye);Z(this,"timeScale");Z(this,"shouldLoop");Z(this,"tickMode");Z(this,"timeline");Fe(this,qi);Z(this,"gameConfig");Z(this,"record");Z(this,"imageExportConfig");Z(this,"timelineDrawOptions",YP);Z(this,"queuedPastes");Z(this,"clipboardMode");Z(this,"game");Fe(this,Es,0);Fe(this,Qr,!0);Fe(this,ui);Fe(this,hs,[]);Fe(this,Fu,[]);Fe(this,Do,[]);Fe(this,$r,new Map);Fe(this,zu,new Map);Fe(this,fs,new Map);Fe(this,As,new Map);Z(this,"savedHistoricalGame");Z(this,"savedHistoricalRecord");Fe(this,ms,!1);Fe(this,ba,!1);Fe(this,Jr,!1);Fe(this,Oi,!1);Z(this,"displayingUpToDateGameState",!0);Fe(this,Tl,0);Z(this,"lastSkillTime",0);Z(this,"undoStack");this.timeScale=1,this.shouldLoop=!1,this.queuedPastes=0,this.tickMode=di.RealTimeAutoPause,this.timeline=new fP,this.timeline.reset(),Me(this,qi,new C2),this.gameConfig=new vi(kE),this.game=Mr(this.gameConfig),this.record=new po,this.record.config=this.gameConfig,this.imageExportConfig={wrapThresholdSeconds:JSON.parse(bt("img: wrapThresholdSeconds")??"0"),includeTime:JSON.parse(bt("img: includeTime")??"true")},this.clipboardMode=bt("radio: clipboardMode")??"plain",Me(this,ui,-this.gameConfig.countdown),this.savedHistoricalGame=this.game,this.savedHistoricalRecord=this.record,this.undoStack=new aw,pe(this,ye,El).call(this)}get inputLocked(){return this.shouldLoop||this.queuedPastes>0}updateStats(){pe(this,ye,_u).call(this),pe(this,ye,qR).call(this)}updateAllDisplay(t=this.game){GD(t.config.serialized()),this.updateStatusDisplay(t),this.updateSkillButtons(t),this.updateTimelineDisplay(),this.updateStats(),Dh(this.getActiveJob())}checkRecordValidity(t,n,o=!1){console.assert(t.config!==void 0);const l={isValid:!0,invalidActions:[],skillUseTimes:[],straightenedIfValid:void 0};if(n===void 0)return console.log("no edit happened"),l;pe(this,ye,El).call(this,!1);const r=t.config??this.gameConfig;this.game=Mr(r),this.record=new po,this.record.config=r,Me(this,ui,-r.countdown),pe(this,ye,dl).call(this,this.record.config);const d=pe(this,ye,ls).call(this,{line:t,replayMode:Oa.Edited,firstEditedNodeIndex:n,selectionStart:t.getFirstSelection(),selectionEnd:t.getLastSelection()});return this.record.selectionStartIndex=t.selectionStartIndex,this.record.selectionStartIndex=t.selectionStartIndex,l.isValid=d.invalidActions.length===0,l.invalidActions=d.invalidActions,l.skillUseTimes=d.skillUseTimes,d.success&&(l.straightenedIfValid=this.record),this.displayingUpToDateGameState=o,l}displayHistoricalState(t,n){const o=t+this.gameConfig.countdown,l=this.record.getFirstSelection()!==void 0;pe(this,ye,YD).call(this,()=>{const r=this.record;this.game=Mr(this.gameConfig),this.record=new po,this.record.config=this.gameConfig,Me(this,ui,-this.gameConfig.countdown),pe(this,ye,dl).call(this,this.record.config),pe(this,ye,ls).call(this,{line:r,replayMode:Oa.Exact,maxReplayTime:o,cutoffIndex:n}),this.timeline.updateElem({type:st.s_HistoricalCursor,time:this.game.time,displayTime:this.game.getDisplayTime(),enabled:!0}),this.updateStatusDisplay(this.game),this.updateSkillButtons(this.game),_l(),pe(this,ye,_u).call(this),this.timeline.drawElements()}),vh(!0),l&&pe(this,ye,_u).call(this,!0),pe(this,ye,qR).call(this)}displayCurrentState(){this.displayingUpToDateGameState=!0,this.timeline.updateElem({type:st.s_HistoricalCursor,enabled:!1,time:0,displayTime:0}),vh(!1),this.updateAllDisplay(this.game)}restart(){pe(this,ye,El).call(this),pe(this,ye,dl).call(this,this.gameConfig)}getPresetLines(){return ie(this,qi).getLinesForJob(this.getActiveJob())}serializedPresets(){return ie(this,qi).serialized()}addSelectionToPreset(t="(untitled)"){console.assert(this.record.getFirstSelection());const n=this.record.getSelected();n.name=t,ie(this,qi).addLine(n,this.getActiveJob())}appendFilePresets(t){ie(this,qi).deserializeAndAppend(t)}loadBattleRecordFromFile(t){t.config===void 0&&(window.alert("Error loading record: saved record had no config object"),console.error(t)),t.config.procMode===void 0&&(t.config.rngProcs!==void 0?t.config.procMode=t.config.rngProcs?xn.RNG:xn.Never:t.config.procMode=xn.RNG),t.config.fps===void 0&&(t.config.fps=kE.fps),t.config.gcdSkillCorrection===void 0&&(t.config.gcdSkillCorrection=kE.gcdSkillCorrection),t.config.level&&(t.config.level=parseInt(t.config.level)),t.config.skillSpeed===void 0&&(t.config.skillSpeed=Ot.getSubstatBase(t.config.level)),t.config.shellVersion===void 0&&(t.config.shellVersion=vo.Initial),t.config.job===void 0&&(t.config.job=BD(t.actions.flatMap(n=>n.skillName?[vT(n.skillName)]:[]))),cn.includes(t.config.job)||(t.config.initialResourceOverrides=t.config.initialResourceOverrides.filter(n=>![Ge.FLANK_POSITIONAL.name,Ge.REAR_POSITIONAL.name].includes(n.type))),Su(()=>{const n=new vi(t.config);this.gameConfig=n,this.record=new po,this.record.config=n,pe(this,ye,El).call(this),pe(this,ye,dl).call(this,this.gameConfig);const o=tc.deserialize(t.actions),l=pe(this,ye,ls).call(this,{line:o,replayMode:Oa.Exact});if(!l.success){let r=`Error loading record- 
`;if(l.invalidActions.length>0){const d=l.invalidActions[0].node;if(d.info.type===Ve.Skill){const h=d.info.skillName?xi(d.info.skillName):"(unknown)";r+=`Stopped here because the next action ${h} can't be added: `}else r+=`Stopped here because the next action ${d.info.type} can't be added: `}r+=l.invalidActions[0].reason,window.alert(r)}})}applyEditedRecord(){const t=this.record;this.record=new po,this.record.config=t.config,pe(this,ye,El).call(this),pe(this,ye,dl).call(this,this.gameConfig);const n=pe(this,ye,ls).call(this,{line:t,replayMode:Oa.Exact,removeTrailingIdleTime:!0});console.assert(n.success),t.selectionStartIndex!==void 0&&(this.record.selectSingle(t.selectionStartIndex),this.record.selectUntil(t.selectionEndIndex)),this.autoSave()}deleteSelectedSkills(){const t=this.record.selectionStartIndex;if(t!==void 0){this.record.deleteSelected();const n=on();t<this.record.length?(this.record.selectSingle(t),this.displayHistoricalState(n.skillUseTimes[t],t)):this.displayCurrentState(),this.autoSave()}}getTincturePotencyMultiplier(){return 1+ie(this,Es)*.01}setTinctureBuffPercentage(t){Me(this,Es,t),this.displayCurrentState(),wo()}setUntargetableMask(t){Me(this,Qr,t),this.displayCurrentState(),wo()}getUntargetableMask(){return ie(this,Qr)}getMaxTicks(t,n,o){let l=0;const r=[n];return o||r.push(rC),r.forEach(d=>{var h;(h=ie(this,$r).get(d))==null||h.forEach(E=>{!Qa(E-this.gameConfig.countdown)&&E<=t&&l++})}),l}getDotCoverageTimeFraction(t,n){return this.getOverTimeCoverageTimeFraction(t,n,ie(this,fs))}getHotCoverageTimeFraction(t,n){return this.getOverTimeCoverageTimeFraction(t,n,ie(this,As))}getOverTimeCoverageTimeFraction(t,n,o){if(t<=Sa.epsilon)return 0;const l=o.get(n);if(!l)return 0;let r=0;l.forEach(h=>{if(h.tStartDisplay<=t){const E=Math.max(0,h.tStartDisplay);let A=h.tEndDisplay!==void 0&&h.tEndDisplay<=t?h.tEndDisplay:t;A=Math.max(0,A),r+=sc(E,A)}});const d=sc(0,t);return r/d}setTimelineOptions(t){this.timelineDrawOptions={...this.timelineDrawOptions,...t},this.updateTimelineDisplay()}getTimelineRenderingProps(){var l,r;const t=this.record.getFirstSelection()!=null&&this.record.getLastSelection()!=null;let n=this.gameConfig.countdown;const o=this.timeline.getAllSlotsTimeInfo();return o!==null&&(n=Math.max(n,o.countdown)),{timelineWidth:this.timeline.getCanvasWidth(),timelineHeight:this.timeline.getCanvasHeight(),scale:this.timeline.scale,countdown:n,tincturePotencyMultiplier:this.getTincturePotencyMultiplier(),untargetableMask:ie(this,Qr),sharedElements:this.timeline.sharedElements,slots:this.timeline.slots,activeSlotIndex:this.timeline.activeSlotIndex,allMarkers:this.timeline.getAllMarkers(),untargetableMarkers:this.timeline.getUntargetableMarkers(),buffMarkers:this.timeline.getBuffMarkers(),showSelection:t,selectionStartDisplayTime:(((l=this.record.getFirstSelection())==null?void 0:l.tmp_startLockTime)??0)-this.gameConfig.countdown,selectionEndDisplayTime:(((r=this.record.getLastSelection())==null?void 0:r.tmp_endLockTime)??0)-this.gameConfig.countdown,drawOptions:this.timelineDrawOptions}}reportWarning(t){ie(this,ba)||this.timeline.addElement({type:st.WarningMark,warningType:t,time:this.game.time,displayTime:this.game.getDisplayTime()})}reportComboBreak(){this.reportWarning({kind:"combobreak"})}resolvePotency(t){this.resolveAnyPotency(t,st.DamageMark,ie(this,hs)),pe(this,ye,_u).call(this)}resolveHealingPotency(t){this.resolveAnyPotency(t,st.HealingMark,ie(this,Fu))}resolveOverTimePotency(t,n){n==="damage"?this.resolveAnyPotency(t,st.DamageMark,ie(this,hs)):this.resolveAnyPotency(t,st.HealingMark,ie(this,Fu))}resolveAnyPotency(t,n,o){t.resolve(this.game.getDisplayTime()),Me(this,ui,this.game.time),t.base===0&&(n=st.AggroMark);let l=!1;if(t.modifiers.forEach(r=>{r.source===U.POT&&(l=!0)}),!ie(this,ba)){let r="{skill}@"+t.sourceTime.toFixed(3);t.description.length>0&&(r+=" "+t.description);const d={potency:t,sourceDesc:r,sourceSkill:t.sourceSkill},h=this.timeline.tryGetElement(this.game.time,n);h?(h.potencyInfos.push(d),l&&!h.buffs.includes("TINCTURE")&&h.buffs.push("TINCTURE")):this.timeline.addElement({type:n,potencyInfos:[d],buffs:l?["TINCTURE"]:[],time:this.game.time,displayTime:this.game.getDisplayTime()}),o.push({time:this.game.getDisplayTime(),source:t.sourceSkill+"@"+t.sourceTime,potency:t.getAmount({tincturePotencyMultiplier:1,includePartyBuffs:!0,includeSplash:!0}),buffs:l?["TINCTURE"]:[]})}}reportLucidTick(t,n){ie(this,ba)||this.timeline.addElement({type:st.LucidMark,time:t,displayTime:this.game.getDisplayTime(),sourceDesc:n})}reportManaTick(t,n){ie(this,ba)||this.timeline.addElement({type:st.MPTickMark,time:t,displayTime:this.game.getDisplayTime(),sourceDesc:n})}reportMeditateTick(t,n){ie(this,ba)||this.timeline.addElement({type:st.MeditateTickMark,time:t,displayTime:this.game.getDisplayTime(),sourceDesc:n})}reportAutoTick(t,n){ie(this,ba)||this.timeline.addElement({type:st.AutoTickMark,time:t,displayTime:this.game.getDisplayTime(),sourceDesc:n})}reportDotTick(t,n){this.reportOverTimeTick(t,ie(this,$r),n)}reportHotTick(t,n){this.reportOverTimeTick(t,ie(this,zu),n)}reportOverTimeTick(t,n,o){if(!ie(this,ba)){const l=o??rC;let r=n.get(l);r||(r=[],n.set(l,r)),r.push(t),this.updateStats()}}reportDotStart(t,n){this.reportOverTimeStart(t,n,"damage")}reportHotStart(t,n){this.reportOverTimeStart(t,n,"healing")}reportOverTimeStart(t,n,o){if(!ie(this,ba)){const l=o==="damage"?ie(this,fs):ie(this,As);let r=l.get(n);r||(r=[],l.set(n,r));const d=r.length;console.assert(d===0||r[d-1].tEndDisplay!==void 0),r.push({tStartDisplay:t,tEndDisplay:void 0})}}reportDotDrop(t,n){this.reportOverTimeDrop(t,n,"damage")}reportHotDrop(t,n){this.reportOverTimeDrop(t,n,"healing")}reportOverTimeDrop(t,n,o){if(!ie(this,ba)){const r=(o==="damage"?ie(this,fs):ie(this,As)).get(n);if(console.assert(r,`Reported dropping ${n} when no coverage was detected`),!r)return;const d=r.length;console.assert(d>0&&r[d-1].tEndDisplay===void 0),r[d-1].tEndDisplay=t}}updateStatusDisplay(t){const n=t.resources.get("NOT_CASTER_TAXED"),o=t.resources.get("NOT_ANIMATION_LOCKED"),l=t.cooldowns.get("cd_GCD"),r={gcdReady:l.stacksAvailable()>0,gcd:l.currentStackCd(),timeTillGCDReady:t.cooldowns.timeTillAnyStackAvailable("cd_GCD"),castLocked:t.resources.timeTillReady("NOT_CASTER_TAXED")>0,castLockTotalDuration:n.pendingChange?n.pendingChange.delay:0,castLockCountdown:t.resources.timeTillReady("NOT_CASTER_TAXED"),animLocked:t.resources.timeTillReady("NOT_ANIMATION_LOCKED")>0,animLockTotalDuration:o.pendingChange?o.pendingChange.delay:0,animLockCountdown:t.resources.timeTillReady("NOT_ANIMATION_LOCKED"),canMove:t.resources.get("MOVEMENT").available(1)},d=t.statusPropsGenerator;GO(h=>({time:t.getDisplayTime(),resources:d.getAllResourceViewProps(h),resourceLocks:r,enemyBuffs:d.getAllOtherTargetedBuffViewProps(),selfBuffs:d.getAllSelfTargetedBuffViewProps(),level:t.config.level}),d.statusLayoutFn)}updateTimelineDisplay(){this.timeline.setTimeSegment(0,this.game.time),_l(),Hu(),ie(this,ba)||this.timeline.updateElem({type:st.s_Cursor,time:this.game.time,displayTime:this.game.getDisplayTime()}),this.timeline.drawElements()}updateSkillButtons(t){Q0(this.game.displayedSkills.getCurrentSkillNames(this.game).map(n=>t.getSkillAvailabilityStatus(n)))}setTimeControlSettings(t){this.timeScale=t.timeScale,this.tickMode=t.tickMode,this.shouldLoop=!1}setConfigAndRestart(t,n=!0){const o=this.gameConfig.job!==t.job,l=this.gameConfig.countdown,r=l<t.countdown;o&&!n&&(console.error("attempted to apply config without reset even though job changed; forcing reset"),n=!0),Su(()=>{this.gameConfig=new vi({...t,shellVersion:oT.version}),n?this.record=new po:r&&this.record.prependActionNode(br(-l)),this.record.config=this.gameConfig,pe(this,ye,El).call(this),pe(this,ye,dl).call(this,this.gameConfig),o&&Dh(t.job)}),this.autoSave()}getDisplayedGame(){return this.displayingUpToDateGameState?this.game:this.savedHistoricalGame}getActiveJob(){return this.game.job}getSkillInfo(t){return t.game.getSkillAvailabilityStatus(t.skillName)}autoSave(){const t=this.record.serialized();this.timeline.saveCurrentSlot(t,this.gameConfig.countdown,this.game.time)}tryAutoLoad(){const t=bt("gameRecord");t!==null&&(console.log("migrating existing record to slot 0"),It("gameRecord0",t),TR("gameRecord"));for(let l=0;l<yi;l++)this.timeline.loadSlot(l);this.timeline.slots.length>0||this.timeline.addSlot();const o=parseInt(bt("activeSlotIndex")??"0");this.setActiveSlot(o>=yi?0:o),this.undoStack.clear()}setActiveSlot(t){pe(this,ye,XE).call(this,{shouldLoop:!1}),Su(()=>{this.autoSave(),this.record.unselectAll(),this.timeline.loadSlot(t)||console.error(`failed to load timeline in cached active slot ${t}`)}),this.savedHistoricalGame=this.game,this.savedHistoricalRecord=this.record,this.displayCurrentState(),It("activeSlotIndex",t.toString())}cloneActiveSlot(){if(this.timeline.activeSlotIndex<0||this.timeline.activeSlotIndex>=this.timeline.slots.length){console.error("tried to clone slot with invalid activeSlotIndex "+this.timeline.activeSlotIndex);return}pe(this,ye,XE).call(this,{shouldLoop:!1}),Su(()=>{const t=this.record.serialized();this.timeline.addSlot(),this.loadBattleRecordFromFile(t),this.autoSave(),this.timeline.loadSlot(this.timeline.slots.length-1)}),this.displayCurrentState()}getDamageLogCsv(){const t=ie(this,hs).map(n=>{let o=!1;n.buffs.forEach(r=>{r==="TINCTURE"&&(o=!0)});let l=n.potency;return o&&(l*=this.getTincturePotencyMultiplier()),[n.time,n.source,l]});return[["time","damageSource","potency"]].concat(t)}getActionsLogCsv(){const t=ie(this,Do).map(n=>[n.time,n.action,n.isGCD,n.castTime]);return[["time","action","isGCD","castTime"]].concat(t)}getAmaSimCsv(){const t=_=>_===Pa.TINCTURE.name?"Grade 3 Gemdraught":_.endsWith("(Ten)")||_.endsWith("(Chi)")||_.endsWith("(Jin)")?_.substring(0,_.length-6):_.replace(" 2"," II").replace(" 3"," III").replace(" 4"," IV"),n=this.getActiveJob(),o=Tn.includes(n)||cn.includes(n),l=this.timeline.getBuffMarkers().map(_=>{const b=new Eh(_.description);let v=b.info.name;b.info.name===H.Card_TheSpear?v="The Spear":b.info.name===H.Card_TheBalance?v="The Balance":[H.RadiantFinale1,H.RadiantFinale2,H.RadiantFinale3].includes(b.info.name)&&(v="Radiant Finale");const L=b.info.name===H.Dokumori||b.info.name===H.ChainStratagem,k=()=>L?"Debuff Only":b.info.name===H.RadiantFinale1?'"1 Coda, Buff Only"':b.info.name===H.RadiantFinale2?'"2 Coda, Buff Only"':b.info.name===H.RadiantFinale3?'"3 Coda, Buff Only"':[H.ArmysPaeon,H.MagesBallad,H.WanderersMinuet,H.StandardFinish,H.TechnicalFinish].includes(b.info.name)?"Buff Only":b.info.name===H.Card_TheSpear?o?"Small":"Big":b.info.name===H.Card_TheBalance?o?"Big":"Small":"";return[_.time,v,b.info.job,k(),L?"Boss0":""]});let r=this.gameConfig.getOverrideStacks("MAGES_CODA")??0,d=this.gameConfig.getOverrideStacks("WANDERERS_CODA")??0,h=this.gameConfig.getOverrideStacks("ARMYS_CODA")??0,E=this.gameConfig.getOverrideStacks("RADIANT_CODA")??0;const A=ie(this,Do).filter(_=>!_.action.includes("Toggle buff")).map(_=>{let b="";if(_.isDamaging&&_.targetCount!==void 0){b='"';for(let k=0;k<_.targetCount;k++)k!==0&&(b+=", "),b+="Boss"+k.toString();b+='"'}let v="";const L=r+d+h;return _.action==="Mage's Ballad"?r=1:_.action==="The Wanderer's Minuet"?d=1:_.action==="Army's Paeon"?h=1:_.action==="Radiant Finale"?L>0&&(E=L,v=`${L} Coda`,r=0,d=0,h=0):_.action==="Radiant Encore"&&E>0&&(v=`${E} Encore`,E=0),[_.time,t(_.action),"",v,b]}),R=["use_strict_skill_naming = False"],T=!(o||Ll.includes(n)),S={[Rt.lvl70]:new Map([["WHM",162],["SCH",264],["AST",148],["SGE",177],["BLM",133],["SMN",264],["RDM",162],["PCT",148]]),[Rt.lvl80]:new Map([["WHM",189],["SCH",308],["AST",172],["SGE",206],["BLM",155],["SMN",308],["RDM",189],["PCT",172]]),[Rt.lvl90]:new Map([["WHM",216],["SCH",353],["AST",197],["SGE",236],["BLM",177],["SMN",353],["RDM",216],["PCT",197]]),[Rt.lvl100]:new Map([["WHM",244],["SCH",398],["AST",222],["SGE",266],["BLM",200],["SMN",398],["RDM",244],["PCT",222]])};let I={job_class:n,det_stat:this.gameConfig.determination,crit_stat:this.gameConfig.criticalHit,dh_stat:this.gameConfig.directHit,tenacity:this.gameConfig.tenacity,speed_stat:T?this.gameConfig.spellSpeed:this.gameConfig.skillSpeed,version:tL,level:this.gameConfig.level,wd:this.gameConfig.wd,main_stat:this.gameConfig.main};S[this.gameConfig.level].has(n)&&(I={...I,healer_or_caster_strength:S[this.gameConfig.level].get(n)}),R.push("stats = "+JSON.stringify(I));const p=this.timeline.getUntargetableMarkers().map(_=>`(${_.time}, ${_.time+_.duration}),`);return p.length>0&&R.push("downtime_windows = ("+p.join(" ")+")"),{meta:R,body:[["time","skill_name","job_class","skill_conditional","targets"]].concat(l,A)}}tryAddLine(t,n=Oa.SkillSequence){const o=N.record.length,l=pe(this,ye,ls).call(this,{line:t,replayMode:n});return l.success?(this.undoStack.push(new QT(t.actions,o,"preset")),this.autoSave(),on(),!0):(this.rewindUntilBefore(l.firstAddedIndex,!1),window.alert('Failed to add line "'+t.name+'" due to insufficient resources and/or stats mismatch.'),!1)}deleteLine(t){ie(this,qi).deleteLine(t)}deleteAllLines(){ie(this,qi).deleteAllLines()}reportInterruption(t){if(ie(this,Jr)||this.tickMode===di.RealTimeAutoPause&&this.shouldLoop){const n=t.failNode.getNameForMessage();window.alert("Cast interrupted! Resources for "+n+" are no longer available"),console.warn("failed: "+n);const o=this.game.time,l=this.shouldLoop;this.rewindUntilBefore(t.failIndex,!1),this.autoSave(),pe(this,ye,Xa).call(this,{deltaTime:o-this.game.time,waitKind:"duration"}),this.shouldLoop=l}else Me(this,ms,!0),ie(this,ba)||this.timeline.invalidateLastElement()}rewindUntilBefore(t,n){const o=this.record;this.record=new po,this.record.config=this.gameConfig,pe(this,ye,El).call(this),pe(this,ye,dl).call(this,this.gameConfig),t!==void 0&&(o.spliceUpTo(t),pe(this,ye,ls).call(this,{line:o,replayMode:Oa.Exact,removeTrailingIdleTime:n}))}removeTrailingIdleTime(){let t;for(let o=this.record.tailIndex;o>=0;o--)if(this.record.actions[o].info.type===Ve.Skill){t=o;break}const n=t===void 0?this.record.actions.slice():this.record.actions.slice(t+1);n.length>0&&this.undoStack.push(new vr((t??-1)+1,n,"delete")),t===void 0?this.rewindUntilBefore(0,!0):this.rewindUntilBefore(t+1,!0),on()}waitTillNextMpOrLucidTick(){const t=pe(this,ye,Xa).call(this,{deltaTime:this.game.timeTillNextMpGainEvent(),waitKind:"mp"});t!==void 0&&this.undoStack.push(new is(t,this.record.tailIndex)),on(),this.updateAllDisplay()}insertRecordNodes(t,n){this.record.insertActionNodes(t,n),this.autoSave();const o=on();let l;t.length>1?(l=Math.min(n,this.record.tailIndex),this.record.selectSingle(l),this.record.selectUntil(l+t.length-1)):(l=Math.min(n+1,this.record.tailIndex),this.record.selectSingle(l)),this.displayHistoricalState(o.skillUseTimes[l],l)}insertRecordNode(t,n){this.insertRecordNodes([t],n)}requestUseSkill(t,n=!1){if(Me(this,Jr,!0),!this.inputLocked)if(this.displayingUpToDateGameState)pe(this,ye,ZR).call(this,t.skillName,t.targetCount,this.tickMode,-1,!1,n).status.ready()&&(this.scrollToTime(this.game.time),this.autoSave(),this.tickMode!==di.RealTimeAutoPause&&on());else{const o=this.record.selectionStartIndex;if(o!==void 0){const l=kr(t.skillName,t.targetCount);this.insertRecordNode(l,o),n&&this.undoStack.push(new is(l,o))}}Me(this,Jr,!1)}requestToggleBuff(t,n=!1){if(!this.game.requestToggleBuff(t))return!1;const l=_R(t);return l.tmp_startLockTime=this.game.time,l.tmp_endLockTime=l.tmp_startLockTime,this.record.addActionNode(l),n&&this.undoStack.push(new is(l,this.record.tailIndex)),ie(this,Do).push({time:this.game.getDisplayTime(),action:"Toggle buff: "+Ge[t].name,isGCD:0,castTime:0,isDamaging:!1}),!0}scrollToTime(t){const n=t===void 0?this.game.time:t;setTimeout(()=>{ty(it.positionFromTimeAndScale(n,this.timeline.scale))},0)}step(t,n=!1){let o,l=this.record.length;this.displayingUpToDateGameState?(o=pe(this,ye,Xa).call(this,{deltaTime:t,waitKind:"duration"}),this.autoSave(),this.updateAllDisplay()):this.record.selectionStartIndex!==void 0&&(l=this.record.selectionStartIndex,o=Cu(t),this.insertRecordNode(o,l)),n&&o&&this.undoStack.push(new is(o,l))}stepUntil(t,n=!1){let o,l=this.record.length;this.displayingUpToDateGameState?(o=pe(this,ye,Xa).call(this,{deltaTime:t-this.game.getDisplayTime(),waitKind:"target"}),this.autoSave(),this.updateAllDisplay()):this.record.selectionStartIndex!==void 0&&(l=this.record.selectionStartIndex,o=br(t),this.insertRecordNode(o,l)),n&&o&&this.undoStack.push(new is(o,l))}handleKeyboardEvent(t){if(this.inputLocked)return;const n=t.ctrlKey||t.metaKey,o=N.record.selectionStartIndex,l=o!==void 0;let r=!1;this.displayingUpToDateGameState&&t.key==="u"&&(this.undoStack.doThenPush(new vr(this.record.tailIndex,[this.record.actions[this.record.tailIndex]],"delete")),r=!0),t.key==="z"&&n?(this.undoStack.undo(),r=!0):t.key==="Z"&&n||t.key==="y"&&n?(this.undoStack.redo(),r=!0):t.key==="Paste"||t.key==="v"&&n?(kO(),r=!0):t.key==="Copy"||t.key==="c"&&n?l&&(wR(),r=!0):(t.key==="Cut"||t.key==="x"&&n)&&l&&(wR(),N.undoStack.push(new vr(o,N.record.getSelected().actions,"delete")),N.deleteSelectedSkills(),r=!0),r&&t.preventDefault()}handleTimelineKeyboardEvent(t){var n,o;if(!this.inputLocked){const l=t.ctrlKey||t.metaKey,r=N.record.selectionStartIndex,d=N.record.selectionEndIndex,h=r!==void 0;let E=!1,A=!1;t.key==="Backspace"||t.key==="Delete"?h&&(N.undoStack.push(new vr(r,N.record.getSelected().actions,"delete")),N.deleteSelectedSkills()):t.key==="ArrowUp"?h?(t.shiftKey?N.timeline.resizeSelection(!0):N.timeline.onClickTimelineAction(r-1,!1),E=!0,t.preventDefault()):N.record.length>0&&(N.timeline.onClickTimelineAction(N.record.tailIndex,!1),E=!0,t.preventDefault()):t.key==="ArrowDown"?h?(t.shiftKey?N.timeline.resizeSelection(!1):N.timeline.onClickTimelineAction(d+1,!1),A=!0,t.preventDefault()):N.record.length>0&&(N.timeline.onClickTimelineAction(0,!1),A=!0,t.preventDefault()):t.key==="Home"?(N.timeline.onClickTimelineAction(0,t.shiftKey),E=!0):t.key==="End"?(N.timeline.onClickTimelineAction(N.record.tailIndex,t.shiftKey),A=!0):t.key==="Escape"?(N.record.unselectAll(),N.displayCurrentState()):t.key==="a"&&l&&(N.timeline.onClickTimelineAction(0,!1),N.timeline.onClickTimelineAction(N.record.tailIndex,!0),t.preventDefault()),E?(this.scrollToTime((n=this.record.selectionStart)==null?void 0:n.tmp_startLockTime),qT()):A&&(this.scrollToTime((o=this.record.selectionEnd)==null?void 0:o.tmp_startLockTime),yO())}}setImageExportConfig(t){this.imageExportConfig=t}}qi=new WeakMap,Es=new WeakMap,Qr=new WeakMap,ui=new WeakMap,hs=new WeakMap,Fu=new WeakMap,Do=new WeakMap,$r=new WeakMap,zu=new WeakMap,fs=new WeakMap,As=new WeakMap,ms=new WeakMap,ba=new WeakMap,Jr=new WeakMap,Oi=new WeakMap,Tl=new WeakMap,ye=new WeakSet,dl=function(t){const n=t.initialResourceOverrides;for(let o=0;o<n.length;o++)n[o].applyTo(this.game)},YD=function(t){const n=ie(this,ba);this.displayingUpToDateGameState=!1,Me(this,ba,!0);const o=this.game,l=this.record,r=ie(this,ui);t(),Me(this,ba,n),this.savedHistoricalGame=this.game,this.savedHistoricalRecord=this.record,this.game=o,this.record=l,Me(this,ui,r)},El=function(t=!0){this.game=Mr(this.gameConfig),pe(this,ye,XE).call(this,{shouldLoop:!1}),this.timeline.reset(),t&&this.record.unselectAll(),Me(this,ui,-this.gameConfig.countdown),Me(this,hs,[]),Me(this,Do,[]),Me(this,$r,new Map),Me(this,fs,new Map),Me(this,zu,new Map),Me(this,As,new Map),Me(this,ms,!1),this.displayingUpToDateGameState=!0},_u=function(t=!1){if(!ie(this,Oi)){let n=U2({tinctureBuffPercentage:ie(this,Es),lastDamageApplicationTime:ie(this,ui)});t&&(n={mainTable:n.mainTable,mainTableSummary:n.mainTableSummary,dotTables:n.dotTables,mode:n.mode}),XR(n)}},qR=function(){if(!ie(this,Oi)){const t=H2({tinctureBuffPercentage:ie(this,Es),lastDamageApplicationTime:ie(this,ui)});zD(t)}},Xa=function(t){const n=this.game.time,o=t.deltaTime+this.game.getDisplayTime();if(t.deltaTime>0){Me(this,Tl,t.deltaTime);const l=this.game.tick(t.deltaTime,t.prematureStopCondition?t.prematureStopCondition:()=>!1);let r;return t.waitKind==="duration"?r=Cu(l):t.waitKind==="target"?r=br(o):t.waitKind==="mp"&&(r=n0()),r!==void 0&&(r.tmp_startLockTime=n,r.tmp_endLockTime=t.deltaTime+n,this.record.addActionNode(r)),r}},XE=function(t){const n=t.shouldLoop;this.shouldLoop!==n&&(this.shouldLoop=n,this.shouldLoop&&pe(this,ye,QR).call(this,()=>this.shouldLoop))},KD=function(t){let n=this.game.timeTillAnySkillAvailable();t>=0&&(n=Math.min(t-this.game.time,n)),pe(this,ye,Xa).call(this,{deltaTime:n})},ZR=function(t,n,o=this.tickMode,l=-1,r=!0,d=!1){let h=this.game.getSkillAvailabilityStatus(t);const E=this.game.time,A=h.timeTillAvailable,R=pe(this,ye,Xa).call(this,{deltaTime:A});d&&R&&this.undoStack.push(new is(R,this.record.tailIndex)),t=a0(t,this.game),h=this.game.getSkillAvailabilityStatus(t);const T=kr(t,n);let S;if(h.status.ready())T.tmp_startLockTime=this.game.time,this.record.addActionNode(T),S=this.record.tailIndex,d&&T&&this.undoStack.push(new is(T,this.record.tailIndex)),this.game.useSkill(t,T,S),T.tmp_invalid_reasons=[],o===di.RealTimeAutoPause&&(this.shouldLoop=!0,pe(this,ye,QR).call(this,()=>this.game.timeTillAnySkillAvailable()>0,!0));else{if(!r){if(A>0){const p=Cu(A);p.tmp_startLockTime=E,p.tmp_endLockTime=this.game.time,this.record.addActionNode(p)}return h}this.record.addActionNode(T),S=this.record.tailIndex,this.game.useInvalidSkill(t,T),T.tmp_invalid_reasons=h.status.unavailableReasons}const I=this.game.timeTillAnySkillAvailable();if(T.tmp_startLockTime=this.game.time,T.tmp_endLockTime=this.game.time+I,!ie(this,ba)){this.lastSkillTime=this.game.time;const p=this.game.getSkillAvailabilityStatus(t,!0);let b=this.game.skillsList.get(t).cdName==="cd_GCD";const v=h.castTime>0&&!h.instantCast,L=v?h.castTime-vi.getSlidecastWindow(h.castTime):0;let k=p.cdRecastTime;t==="MEDITATE"&&(b=!0,k=this.game.getSkillAvailabilityStatus("YUKIKAZE").cdRecastTime),this.timeline.addElement({type:st.Skill,displayTime:this.game.getDisplayTime(),skillName:t,isGCD:b,isSpellCast:v,time:this.game.time,relativeSnapshotTime:L,lockDuration:I,recastDuration:k,node:T,actionIndex:S}),ie(this,Do).push({time:this.game.getDisplayTime(),action:Pa[t].name,isGCD:b?1:0,castTime:h.instantCast?0:h.castTime,targetCount:T.targetCount,isDamaging:T.anyPotencies()})}return o!==di.RealTimeAutoPause&&pe(this,ye,KD).call(this,l),ie(this,Oi)||Hu(),h},ls=function(t){const n=ie(this,Oi);Me(this,Oi,!0),t.removeTrailingIdleTime===void 0&&(t.removeTrailingIdleTime=!1);const o=t.maxReplayTime??-1;let l=t.replayMode;t.replayMode===Oa.Edited&&(l=Oa.Exact);const r=t.line,d=[],h=[];if(r.length===0)return Me(this,Oi,n),{success:!0,firstAddedIndex:void 0,invalidActions:d,skillUseTimes:h};let E=this.record.length,A;const R=t.cutoffIndex??r.actions.length,T=r.actions.slice();for(let p=0;p<R;p++){const _=T[p];t.replayMode===Oa.Edited&&l===Oa.Exact&&p===t.firstEditedNodeIndex&&(l=Oa.Edited);let b=0;if(_.info.type===Ve.Wait?b=_.info.waitDuration:_.info.type===Ve.JumpToTimestamp?b=_.info.targetTime-this.game.getDisplayTime():_.info.type===Ve.WaitForMP?b=this.game.timeTillNextMpGainEvent():_.info.type===Ve.Skill&&(b=this.game.getSkillAvailabilityStatus(_.info.skillName).timeTillAvailable),p>0){const L=T[p-1].legacyWaitDuration;if(L!==void 0&&Math.abs(L-ie(this,Tl))>Sa.epsilon){const k=L-ie(this,Tl);if(k>0&&_.info.type!==Ve.Wait){let M;if(_.info.type===Ve.Skill){const B=this.game.getSkillAvailabilityStatus(_.info.skillName).timeTillAvailable;Math.abs(B-k)>Sa.epsilon&&(M="duration")}M&&(pe(this,ye,Xa).call(this,{deltaTime:k,waitKind:M}),E++)}else _.info.type===Ve.Wait&&(b+=k)}}if(o>=0&&o-this.game.time<b&&l===Oa.Exact)return pe(this,ye,Xa).call(this,{deltaTime:o-this.game.time,waitKind:"duration"}),Me(this,Oi,!1),this.updateAllDisplay(),{success:!0,firstAddedIndex:A,invalidActions:d,skillUseTimes:h};if(h.push(this.game.getDisplayTime()),[Ve.Wait,Ve.JumpToTimestamp,Ve.WaitForMP].includes(_.info.type))if(b>=0)pe(this,ye,Xa).call(this,{deltaTime:b,waitKind:_.info.type===Ve.Wait?"duration":_.info.type===Ve.JumpToTimestamp?"target":"mp"});else{const v=pu();if(_.info.type===Ve.JumpToTimestamp){const L=br(_.info.targetTime);L.tmp_startLockTime=this.game.time,L.tmp_endLockTime=L.tmp_startLockTime,this.record.addActionNode(L)}else console.error("non-jump wait somehow failed: "+_.info.type);v.addUnavailableReason(Et.PastTargetTime),d.push({node:_,index:p,reason:v})}else if(_.info.type===Ve.Skill){let v=_.info.skillName;t.replayMode===Oa.SkillSequence&&(v=ec(this.game.job,v,this.gameConfig.level));const L=pe(this,ye,ZR).call(this,v,_.info.targetCount,di.Manual,o);h[h.length-1]=L.usedAt,L.status.ready()||d.push({node:_,index:p,reason:L.status.clone()}),ie(this,ms)&&(Me(this,ms,!1),this.shouldLoop||(L.status.addUnavailableReason(Et.CastCanceled),d.push({node:_,index:p,reason:L.status})))}else if(_.info.type===Ve.SetResourceEnabled&&(l===Oa.Exact||l===Oa.Edited)){const v=this.requestToggleBuff(_.info.buffName),L=l===Oa.Exact;if(v)pe(this,ye,Xa).call(this,{deltaTime:L?b:Math.min(b,this.game.timeTillAnySkillAvailable())});else{const k=pu();k.addUnavailableReason(Et.BuffNoLongerAvailable),d.push({node:_,index:p,reason:k})}}else if(_.info.type===Ve.Unknown){const{skillName:v,targetCount:L}=_.info,k=TU(v,L);this.record.addActionNode(k);const M=pu();M.addUnavailableReason(Et.UnknownSkill),d.push({node:_,index:p,reason:M}),k.tmp_invalid_reasons=M.unavailableReasons;const B=this.gameConfig.animationLock;ie(this,ba)||(this.lastSkillTime=this.game.time,this.timeline.addElement({type:st.Skill,displayTime:this.game.getDisplayTime(),skillName:v,isGCD:!1,isSpellCast:!1,time:this.game.time,relativeSnapshotTime:this.game.time,lockDuration:B,recastDuration:0,node:k,actionIndex:p}),ie(this,Do).push({time:this.game.getDisplayTime(),action:v,isGCD:0,castTime:0,targetCount:k.targetCount,isDamaging:!1})),pe(this,ye,Xa).call(this,{deltaTime:B})}else console.error("did not process ActionNode "+JSON.stringify(_.info));if(t.replayMode===Oa.Edited){const v=this.record.tailIndex;_===t.selectionStart&&v>=0?this.record.selectSingle(v):_===t.selectionEnd&&v>=0&&this.record.selectUntil(v)}this.record.length!==E&&A===void 0&&(A=this.record.tailIndex)}if(t.cutoffIndex!==void 0){const p=T[t.cutoffIndex].info;if(p.type===Ve.Skill){const _=this.game.getSkillAvailabilityStatus(p.skillName);pe(this,ye,Xa).call(this,{deltaTime:_.timeTillAvailable})}}const S=T[T.length-1],I=S.legacyWaitDuration;if(I!==void 0&&(S.info.type===Ve.Skill||S.info.type===Ve.SetResourceEnabled)&&Math.abs(I-ie(this,Tl))>Sa.epsilon){const p=I-ie(this,Tl);pe(this,ye,Xa).call(this,{deltaTime:p,waitKind:"duration"})}return Me(this,Oi,n),this.updateAllDisplay(),{success:!0,firstAddedIndex:A,invalidActions:d,skillUseTimes:h}},QR=function(t,n=!1){let o=0;const l=this,r=function(d){var A,R,T;o===0&&(o=d);const h=(d-o)/1e3*l.timeScale,E=l.game.timeTillAnySkillAvailable();E>=h?pe(A=l,ye,Xa).call(A,{deltaTime:h,prematureStopCondition:()=>!t()}):(pe(R=l,ye,Xa).call(R,{deltaTime:E,prematureStopCondition:()=>!t()}),pe(T=l,ye,Xa).call(T,{deltaTime:h-E,prematureStopCondition:()=>!t()})),l.updateAllDisplay(),o=d,t()?requestAnimationFrame(r):(l.shouldLoop=!1,l.autoSave(),yh(!1),n&&on())};yh(!0),requestAnimationFrame(r)};const N=new x2,ve=new Map;ve.set(H.LeyLines,"Buffs/BLM/Ley Lines.png");ve.set(H.Tincture,"Buffs/General/Tincture.png");ve.set(H.ArcaneCircle,"Buffs/RPR/Arcane Circle.png");ve.set(H.ArmysPaeon,"Buffs/BRD/Army's Paeon.png");ve.set(H.BattleLitany,"PartyBuffs/battle_litany.png");ve.set(H.BattleVoice,"Buffs/BRD/Battle Voice.png");ve.set(H.Brotherhood,"PartyBuffs/brotherhood.png");ve.set(H.Card_TheBalance,"PartyBuffs/the_balance.png");ve.set(H.Card_TheSpear,"PartyBuffs/the_spear.png");ve.set(H.ChainStratagem,"PartyBuffs/chain_stratagem.png");ve.set(H.Devilment,"Buffs/DNC/Devilment.png");ve.set(H.Divination,"PartyBuffs/divination.png");ve.set(H.Dokumori,"PartyBuffs/dokumori.png");ve.set(H.Embolden,"PartyBuffs/Embolden.png");ve.set(H.MagesBallad,"Buffs/BRD/Mage's Ballad.png");ve.set(H.RadiantFinale1,"Buffs/BRD/Radiant Finale.png");ve.set(H.RadiantFinale2,"Buffs/BRD/Radiant Finale.png");ve.set(H.RadiantFinale3,"Buffs/BRD/Radiant Finale.png");ve.set(H.SearingLight,"PartyBuffs/searing_light.png");ve.set(H.StandardFinish,"Buffs/DNC/Standard Finish.png");ve.set(H.StarryMuse,"Buffs/PCT/Starry Muse.png");ve.set(H.TechnicalFinish,"Buffs/DNC/Technical Finish.png");ve.set(H.WanderersMinuet,"Buffs/BRD/Wanderer's Minuet.png");ve.set(H.Manafication,"PartyBuffs/manafication.png");ve.set(H.Acceleration,"Buffs/RDM/Acceleration.png");ve.set(H.Fuka,"Buffs/SAM/Fuka.png");ve.set(H.Fugetsu,"Buffs/SAM/Fugetsu.png");ve.set(H.EnhancedEnpi,"Buffs/SAM/Enhanced Enpi.png");ve.set(H.DeathsDesign,"Buffs/RPR/Death's Design.png");ve.set(H.ArcaneCircle,"Buffs/RPR/Arcane Circle.png");ve.set(H.RagingStrikes,"Buffs/BRD/Raging Strikes.png");ve.set(H.Barrage,"Buffs/BRD/Barrage.png");ve.set(H.NoMercy,"Buffs/GNB/No Mercy.png");ve.set(H.EnhancedPiercingTalon,"Buffs/DRG/Enhanced Piercing Talon.png");ve.set(H.PowerSurge,"Buffs/DRG/Power Surge.png");ve.set(H.LanceCharge,"Buffs/DRG/Lance Charge.png");ve.set(H.LifeOfTheDragon,"Buffs/DRG/Life of the Dragon.png");ve.set(H.LifeSurge,"Buffs/DRG/Life Surge.png");ve.set(H.DivineMight,"Buffs/PLD/Divine Might.png");ve.set(H.Requiescat,"Buffs/PLD/Requiescat Zero.png");ve.set(H.FightOrFlight,"Buffs/PLD/Fight or Flight.png");ve.set(H.Zoe,"Buffs/SGE/Zoe.png");ve.set(H.Autophysis,"Buffs/SGE/Autophysis.png");ve.set(H.Krasis,"Buffs/SGE/Krasis.png");ve.set(H.Philosophia,"Buffs/SGE/Philosophia.png");ve.set(H.Soteria,"Buffs/SGE/Soteria.png");ve.set(H.TrickAttack,"Buffs/NIN/Trick Attack.png");ve.set(H.KunaisBane,"Buffs/NIN/Kunai's Bane.png");ve.set(H.Bunshin,"Buffs/NIN/Bunshin.png");ve.set(H.RiddleOfFire,"Buffs/MNK/Riddle of Fire.png");ve.set(H.NeutralSect,"Buffs/AST/Neutral Sect.png");ve.set(H.Synastry,"Buffs/AST/Synastry.png");ve.set(H.TheArrow,"Buffs/AST/The Arrow.png");ve.set(H.Confession,"Buffs/WHM/Confession.png");ve.set(H.Asylum,"Buffs/WHM/Asylum.png");ve.set(H.Temperance,"Buffs/WHM/Temperance.png");ve.set(H.HuntersInstinct,"Buffs/VPR/Hunter's Instinct.png");ve.set(H.Swiftscaled,"Buffs/VPR/Swiftscaled.png");ve.set(H.FeyIllumination,"Buffs/SCH/Fey Illumination.png");ve.set(H.Dissipation,"Buffs/SCH/Dissipation.png");ve.set(H.Protraction,"Buffs/SCH/Protraction.png");ve.set(H.Recitation,"Buffs/SCH/Recitation.png");const Ss=new Map;ve.forEach((e,t)=>{const n=new Image;n.src="assets/"+e,n.onload=function(){wo()},Ss.set(t,n)});const bh=400,Ln=28,VD=e=>{e.setDraggedSkillElem(void 0),N.record.unselectAll(),N.displayCurrentState(),e.setBgSelecting(!0)};function P2(e){const{ctx:t,lines:n,images:o,viewInfo:l}=e;let{mouseX:r,mouseY:d}=e;const{colors:h,visibleWidth:E}=l;if(!n.length)return;const A=14,R=24,T=8,S=4;t.font="12px monospace";let I=-1;n.forEach(M=>{I=Math.max(I,t.measureText(M).width)});let[p,_]=[I+2*T,A*n.length+2*S];o&&o.length>0&&(p=Math.max(p,T+o.length*(R+T)),_+=R+S);const b=4;d>=_+b?d=d-_-b:d=d+11+b,r-p/2>=0&&r+p/2<E?r=r-p/2:r-p/2<0?r=0:r=E-p,t.strokeStyle=h.bgHighContrast,t.lineWidth=1,t.fillStyle=h.tipBackground,t.fillRect(r,d,p,_),t.strokeRect(r,d,p,_),t.fillStyle=h.emphasis,t.textBaseline="top",t.textAlign="left";for(let M=0;M<n.length;M++)t.fillText(n[M],r+T,d+M*A+2+S);const L=r+T,k=d+n.length*A+2+S;if(o)for(let M=0;M<o.length;M++)o[M]&&t.drawImage(o[M],L+M*R,k,R*.75,R)}function w2(e){const{ctx:t,viewInfo:n,markerTracksTopY:o,markerTracksBottomY:l,timelineOrigin:r,trackBins:d,testInteraction:h}=e,E=n.colors,{countdown:A,scale:R}=n.renderingProps;t.lineCap="round",t.lineWidth=4,t.font="11px monospace",t.textAlign="left",d.forEach((T,S)=>{let I=l-(S+1)*Oe.trackHeight;S===gl&&(I=o);for(let p=0;p<T.length;p++){const _=T[p];let b=_.description;_.markerType===nn.Untargetable?b=C({en:"Untargetable",zh:"不可选中"}):_.markerType===nn.Buff&&(b=zC(_.description));const v=r+it.positionFromTimeAndScale(_.time+A,R),L=()=>{const k=N.timeline.deleteMarker(_);console.assert(k),N.updateStats(),LR(_)};if(_.duration>0){const k=it.positionFromTimeAndScale(_.duration,R);if(_.markerType===nn.Buff){t.fillStyle=_.color+E.timeline.markerAlpha,t.fillRect(v,I,k,Oe.trackHeight);const B=Ss.get(_.description);B&&t.drawImage(B,v,I,Oe.trackHeight*.75,Oe.trackHeight),t.fillStyle=E.emphasis,t.fillText(b,v+Oe.trackHeight*1.5,I+10)}else _.showText?(t.fillStyle=_.color+E.timeline.markerAlpha,t.fillRect(v,I,k,Oe.trackHeight),t.fillStyle=E.emphasis,t.fillText(b,v+Oe.trackHeight/2,I+10)):(t.strokeStyle=_.color,t.beginPath(),t.moveTo(v,I+Oe.trackHeight/2),t.lineTo(v+k,I+Oe.trackHeight/2),t.stroke());const M=_.time+" - "+parseFloat((_.time+_.duration).toFixed(3));h({x:v,y:I,w:Math.max(k,Oe.trackHeight),h:Oe.trackHeight},{hoverTip:[`[${M}] ${b}`],onMouseUp:L})}else t.fillStyle=_.color,t.beginPath(),t.ellipse(v,I+Oe.trackHeight/2,4,4,0,0,2*Math.PI),t.fill(),_.showText&&(t.fillStyle=E.emphasis,t.beginPath(),t.fillText(b,v+Oe.trackHeight/2,I+10)),h({x:v-Oe.trackHeight/2,y:I,w:Oe.trackHeight,h:Oe.trackHeight},{hoverTip:[`[${_.time}] ${b}`],onMouseUp:L})}})}function G2(e){const{ctx:t,viewInfo:n,timelineOriginX:o,timelineOriginY:l,elems:r,testInteraction:d}=e,h=n.colors,E=n.renderingProps.scale;t.lineWidth=1,t.strokeStyle=h.timeline.mpTickMark,t.beginPath(),r.forEach(A=>{const R=o+it.positionFromTimeAndScale(A.displayTime,E);t.moveTo(R,l),t.lineTo(R,l+Oe.renderSlotHeight()),d({x:R-2,y:l,w:4,h:Oe.renderSlotHeight()},{hoverTip:[`[${A.displayTime.toFixed(3)}] ${A.sourceDesc}`]})}),t.stroke()}function B2(e){const{ctx:t,viewInfo:n,timelineOriginX:o,timelineOriginY:l,elems:r,testInteraction:d}=e,h=n.colors,E=n.renderingProps.scale;t.lineWidth=1,t.strokeStyle=h.sam.meditation,t.beginPath(),r.forEach(A=>{const R=o+it.positionFromTimeAndScale(A.displayTime,E);t.moveTo(R,l),t.lineTo(R,l+Oe.renderSlotHeight()),d({x:R-2,y:l,w:4,h:Oe.renderSlotHeight()},{hoverTip:[`[${A.displayTime.toFixed(3)}] ${A.sourceDesc}`]})}),t.stroke()}function F2(e){const{ctx:t,viewInfo:n,timelineOriginX:o,timelineOriginY:l,elems:r,testInteraction:d}=e,h=n.colors,E=n.renderingProps.scale;t.lineWidth=1,t.strokeStyle=h.pld.ironWillColor,t.beginPath(),r.forEach(A=>{const R=o+it.positionFromTimeAndScale(A.displayTime,E);t.moveTo(R,l),t.lineTo(R,l+Oe.renderSlotHeight()),d({x:R-2,y:l,w:4,h:Oe.renderSlotHeight()},{hoverTip:[`[${A.displayTime.toFixed(3)}] ${A.sourceDesc}`]})}),t.stroke()}function z2(e){const{ctx:t,viewInfo:n,timelineOriginX:o,timelineOriginY:l,elems:r,testInteraction:d}=e,h=n.colors,E=n.renderingProps.scale;t.font="bold 10px monospace",r.forEach(A=>{const R=o+it.positionFromTimeAndScale(A.displayTime,E),T=12,S=l+T;t.beginPath(),t.textAlign="center",t.moveTo(R,S-T),t.lineTo(R-T/2,S),t.lineTo(R+T/2,S),t.fillStyle=h.timeline.warningMark,t.fill(),t.fillStyle="white",t.fillText("!",R,S-1);let I="["+A.displayTime.toFixed(3)+"] ";switch(A.warningType.kind){case"combobreak":I+=C({en:"broken combo!",zh:"连击被断！"}).toString();break;case"overcap":I+=je(A.warningType.rsc).toString()+C({en:" overcap!",zh:"溢出！"}).toString();break;case"overwrite":I+=je(A.warningType.rsc).toString()+C({en:" overwrite!",zh:"被覆盖！"}).toString();break;case"timeout":I+=je(A.warningType.rsc).toString()+C({en:" expired!",zh:"已过期！"});break;default:I+=C({en:A.warningType.en,zh:A.warningType.zh});break}d({x:R-T/2,y:S-T,w:T,h:T},{hoverTip:[I]})})}function uR(e){const{ctx:t,viewInfo:n,timelineOriginX:o,timelineOriginY:l,elems:r,testInteraction:d}=e,{colors:h,renderingProps:E}=n,A=E.scale;r.forEach(R=>{const T=R.type===st.DamageMark&&Qa(R.displayTime),S=o+it.positionFromTimeAndScale(R.displayTime,A);let I="["+R.displayTime.toFixed(3)+"] ";const p=C({en:"Untargetable",zh:"不可选中"});switch(R.type){case st.AggroMark:t.fillStyle=h.timeline.aggroMark,I+=C({en:"aggro"});break;case st.HealingMark:t.fillStyle=h.timeline.healingMark,I+=C({en:"healing potency",zh:"恢复威力"});break;default:t.fillStyle=T?h.timeline.untargetableDamageMark:h.timeline.damageMark,I+=C({en:"damage potency",zh:"伤害威力"})}t.beginPath(),R.type===st.AggroMark||R.type===st.DamageMark?(t.moveTo(S-3,l),t.lineTo(S+3,l),t.lineTo(S,l+6)):(t.moveTo(S-3,l+12),t.lineTo(S+3,l+12),t.lineTo(S,l+6)),t.fill();const _=R.buffs.filter(k=>k==="TINCTURE").length>0,b=[],v=[];R.potencyInfos.forEach(k=>{const M=k.sourceDesc.replace("{skill}",xi(k.sourceSkill));if(T)b.push(0 .toFixed(3)+" ("+M+")");else if(k.sourceSkill in Lo){const B=C({en:"LB"});b.push(B+" ("+M+")")}else{const B=k.potency.getAmount({tincturePotencyMultiplier:E.tincturePotencyMultiplier,includePartyBuffs:!0,includeSplash:!1});if(k.potency.targetCount>1){const w=B*(1-(k.potency.falloff??1)),x=k.potency.targetCount-1,Q=w.toFixed(2)+(x>1?` x ${x}`:""),oe=x>1?C({en:`${M}, ${x} additional targets`,zh:`${M}, ${x} 额外目标`}):C({en:`${M}, 1 additional target`,zh:`${M}, 1 额外目标`});b.push(B.toFixed(2)+" ("+C({en:`${M}, primary target`,zh:`${M}, 主要目标`})+")"),b.push(Q+` (${oe})`)}else b.push(B.toFixed(2)+" ("+M+")");_&&!v.includes(Ss.get(H.Tincture))&&v.push(Ss.get(H.Tincture)),k.potency.getPartyBuffs().forEach(w=>{const x=Ss.get(w);v.includes(x)||v.push()})}});const L=R.type===st.HealingMark?{x:S-3,y:l+6,w:6,h:6}:{x:S-3,y:l,w:6,h:6};d(L,{hoverTip:T?[I,...b,p]:[I,...b],hoverImages:v})})}function j2(e){const{ctx:t,viewInfo:n,timelineOriginX:o,timelineOriginY:l,elems:r,testInteraction:d}=e,h=n.colors,E=n.renderingProps.scale;t.fillStyle=h.timeline.lucidTickMark,r.forEach(A=>{const R=o+it.positionFromTimeAndScale(A.displayTime,E);t.beginPath(),t.moveTo(R-3,l),t.lineTo(R+3,l),t.lineTo(R,l+6),t.fill();const T=`[${A.displayTime.toFixed(3)}] ${A.sourceDesc.replace("{skill}",xi("LUCID_DREAMING"))}`;d({x:R-3,y:l,w:6,h:6},{hoverTip:[T]})})}function Y2(e){const{ctx:t,viewInfo:n,timelineOriginX:o,timelineOriginY:l,elems:r,interactive:d,testInteraction:h}=e,{colors:E,renderingProps:A}=n,R=A.scale,T=[],S=[],I=[],p=[],_=[],b=new Map([[H.Tincture,{color:E.timeline.potCover,showImage:!0}],[H.LeyLines,{color:E.timeline.llCover,showImage:!0}],[H.SearingLight,{color:E.smn.searing,showImage:!0}],[H.Hyperphantasia,{color:E.timeline.llCover,showImage:!1}],[H.StarryMuse,{color:E.timeline.buffCover,showImage:!0}],[H.Embolden,{color:E.rdm.emboldenBuff,showImage:!0}],[H.Manafication,{color:E.rdm.manaficBuff,showImage:!0}],[H.Acceleration,{color:E.rdm.accelBuff,showImage:!0}],[H.TechnicalFinish,{color:E.dnc.esprit,showImage:!0}],[H.Devilment,{color:E.dnc.feathers,showImage:!0}],[H.Fuka,{color:E.timeline.llCover,showImage:!0}],[H.Fugetsu,{color:E.sam.fugetsu,showImage:!0}],[H.NoMercy,{color:E.sam.fugetsu,showImage:!0}],[H.EnhancedPiercingTalon,{color:E.drg.enhancedPiercingTalon,showImage:!0}],[H.PowerSurge,{color:E.drg.powerSurge,showImage:!0}],[H.LifeSurge,{color:E.drg.lifeSurge,showImage:!0}],[H.LanceCharge,{color:E.drg.lanceCharge,showImage:!0}],[H.LifeOfTheDragon,{color:E.drg.lifeOfTheDragon,showImage:!0}],[H.BattleLitany,{color:E.drg.battleLitany,showImage:!0}],[H.DivineMight,{color:E.pld.divineMight,showImage:!0}],[H.Requiescat,{color:E.pld.requiescat,showImage:!0}],[H.FightOrFlight,{color:E.pld.fightOrFlight,showImage:!0}],[H.EnhancedEnpi,{color:E.rdm.accelBuff,showImage:!0}],[H.ArcaneCircle,{color:E.rpr.arcaneCircle,showImage:!0}],[H.DeathsDesign,{color:E.rpr.deathsDesign,showImage:!0}],[H.WanderersMinuet,{color:E.brd.wanderersCoda,showImage:!0}],[H.MagesBallad,{color:E.brd.magesCoda,showImage:!0}],[H.ArmysPaeon,{color:E.brd.armysCoda,showImage:!0}],[H.RagingStrikes,{color:E.brd.ragingStrikes,showImage:!0}],[H.Barrage,{color:E.brd.barrage,showImage:!0}],[H.BattleVoice,{color:E.brd.battleVoice,showImage:!0}],[H.RadiantFinale1,{color:E.brd.radiantFinale,showImage:!0}],[H.RadiantFinale2,{color:E.brd.radiantFinale,showImage:!0}],[H.RadiantFinale3,{color:E.brd.radiantFinale,showImage:!0}],[H.Zoe,{color:E.sge.zoe,showImage:!0}],[H.Autophysis,{color:E.sge.autophysis,showImage:!0}],[H.Krasis,{color:E.sge.krasis,showImage:!0}],[H.Soteria,{color:E.sge.soteria,showImage:!0}],[H.Philosophia,{color:E.sge.philosophia,showImage:!0}],[H.WaxingNocturne,{color:E.blu.moonflute,showImage:!0}],[H.Bristle,{color:E.blu.bristle,showImage:!0}],[H.Whistle,{color:E.blu.whistle,showImage:!0}],[H.TingleA,{color:E.blu.tinglea,showImage:!0}],[H.TingleB,{color:E.blu.tingleb,showImage:!0}],[H.Dokumori,{color:E.nin.dokumori,showImage:!0}],[H.TrickAttack,{color:E.nin.trick,showImage:!0}],[H.KunaisBane,{color:E.nin.trick,showImage:!0}],[H.Bunshin,{color:E.nin.bunshin,showImage:!0}],[H.RiddleOfFire,{color:E.mnk.riddleOfFire,showImage:!0}],[H.Brotherhood,{color:E.mnk.brotherhood,showImage:!0}],[H.Divination,{color:E.ast.div,showImage:!0}],[H.NeutralSect,{color:E.ast.neutral,showImage:!0}],[H.Synastry,{color:E.ast.synastry,showImage:!0}],[H.TheArrow,{color:E.ast.arrow,showImage:!0}],[H.Confession,{color:E.whm.confession,showImage:!0}],[H.Asylum,{color:E.whm.asylum,showImage:!0}],[H.Temperance,{color:E.whm.temperance,showImage:!0}],[H.HuntersInstinct,{color:E.vpr.huntersInstinct,showImage:!0}],[H.Swiftscaled,{color:E.vpr.swiftscaled,showImage:!0}],[H.ChainStratagem,{color:E.sch.chain,showImage:!0}],[H.FeyIllumination,{color:E.sch.feyIllumination,showImage:!0}],[H.Dissipation,{color:E.sch.dissipation,showImage:!0}],[H.Protraction,{color:E.sch.protraction,showImage:!0}],[H.Recitation,{color:E.sch.recitation,showImage:!0}]]),v=new Map;b.forEach((Q,oe)=>v.set(oe,[]));const L=[],k=[],M=[],B=l+Oe.skillButtonHeight/2;r.forEach(Q=>{const oe=Q,he=o+it.positionFromTimeAndScale(oe.displayTime,R),ue=oe.isGCD?B+Oe.skillButtonHeight/2:B,de=oe.node.targetCount;de>1&&T.push({count:de,x:he+Oe.skillButtonHeight/2,y:ue-5});const fe=2,$=it.positionFromTimeAndScale(oe.lockDuration,R);if(oe.isSpellCast?(I.push({x:he+fe,y:ue,w:$-fe,h:Oe.skillButtonHeight/2}),_.push(he+it.positionFromTimeAndScale(oe.relativeSnapshotTime,R))):S.push({x:he+fe,y:ue,w:$-fe,h:Oe.skillButtonHeight}),oe.isGCD){const K=it.positionFromTimeAndScale(oe.recastDuration,R);p.push({x:he+fe,y:ue+Oe.skillButtonHeight/2,w:K-fe,h:Oe.skillButtonHeight/2})}if(oe.skillName in Lo){const K=it.positionFromTimeAndScale(oe.recastDuration,R);S.push({x:he+fe,y:ue+Oe.skillButtonHeight/2,w:K-fe,h:Oe.skillButtonHeight/2})}oe.node.tmp_invalid_reasons.length>0&&k.push({x:he,y:l+Oe.slotPaddingTop,w:it.positionFromTimeAndScale(oe.isGCD?Math.max(oe.recastDuration,oe.lockDuration):oe.lockDuration,R),h:Oe.renderSlotHeight()-Oe.slotPaddingBottom-Oe.slotPaddingTop});let ee=0;v.forEach((K,W)=>{oe.node.hasBuff(W)&&(ee+=Y(ee,K))}),oe.node.hasPartyBuff()&&Y(ee,L);function Y(K,W){return A.drawOptions.drawBuffIndicators&&W.push({x:he,y:ue+Ln+K*4,w:Ln,h:4}),1}UR(oe.skillName)&&M.push({elem:Q,x:he,y:ue})}),t.font="13px monospace",t.fillStyle=E.text,t.textAlign="center",T.forEach(Q=>{t.fillText("x"+Q.count.toString(),Q.x,Q.y)});const w=Q=>{t.rect(Q.x,Q.y,Q.w,Q.h),d&&h(Q,{onMouseDown:VD})};t.fillStyle=E.timeline.castBar,t.beginPath(),I.forEach(w),t.fill(),t.lineWidth=1,t.strokeStyle="rgba(151, 85, 239, 0.4)",t.beginPath(),_.forEach(Q=>{t.moveTo(Q,B+Ln/2),t.lineTo(Q,B+Ln)}),t.stroke(),t.fillStyle=E.timeline.gcdBar,t.beginPath(),p.forEach(w),t.fill(),t.fillStyle=E.timeline.lockBar,t.beginPath(),S.forEach(w),t.fill(),v.forEach((Q,oe)=>{t.fillStyle=b.get(oe).color,t.beginPath(),Q.forEach(w),t.fill()}),t.fillStyle=E.timeline.buffCover,t.beginPath(),L.forEach(w),t.fill(),t.beginPath(),M.forEach(Q=>{t.drawImage(UR(Q.elem.skillName),Q.x,Q.y,Ln,Ln);const oe=Q.elem.node,he=[],ue=[],de=xi(Q.elem.skillName)+"@"+Q.elem.displayTime.toFixed(3);if(he.push(de),!((oe.maybeGetActionKey()??"NEVER")in Lo)){if(oe.getInitialPotency()){const $=oe.getPotency({tincturePotencyMultiplier:A.tincturePotencyMultiplier,includePartyBuffs:!0,includeSplash:!0,untargetable:Qa}).applied;he.push(C({en:"potency: ",zh:"威力："})+$.toFixed(2))}if(oe.getInitialHealingPotency()){const $=oe.getHealingPotency({tincturePotencyMultiplier:A.tincturePotencyMultiplier,includeSplash:!0,includePartyBuffs:!0,untargetable:Qa}).applied;he.push(C({en:"healing potency: "})+$.toFixed(2))}}let fe=0;oe.tmp_endLockTime!==void 0&&oe.tmp_startLockTime!==void 0&&(fe=oe.tmp_endLockTime-oe.tmp_startLockTime),he.push(C({en:"duration: ",zh:"耗时："})+fe.toFixed(3)),oe.tmp_invalid_reasons.length>0&&(he.push(""),he.push(C({en:"skill is invalid:",zh:"技能有问题："}).toString()),oe.tmp_invalid_reasons.forEach($=>he.push("- "+Ur($)))),b.forEach(($,ee)=>{$.showImage&&oe.hasBuff(ee)&&ue.push(Ss.get(ee))}),oe.getPartyBuffs().forEach($=>{const ee=Ss.get($);ee&&ue.push(ee)}),d?h({x:Q.x,y:Q.y,w:Ln,h:Ln},{hoverTip:he,onMouseUp:$=>{$.draggedSkillElem===void 0&&($.bgSelecting||(N.timeline.onClickTimelineAction(Q.elem.actionIndex,$.shiftKey),qT()))},onMouseDown:$=>{$.dragLock||$.setDraggedSkillElem(Q.elem)},pointerMouse:!0,hoverImages:ue}):h({x:Q.x,y:Q.y,w:Ln,h:Ln},{hoverTip:he,pointerMouse:!1,hoverImages:ue})});const x=t.globalAlpha;return t.fillStyle=E.timeline.invalidBg,t.globalAlpha=.2,t.beginPath(),k.forEach(Q=>{t.rect(Q.x,Q.y,Q.w,Q.h)}),t.fill(),t.globalAlpha=x,new Map(d?M.map(Q=>[Q.elem.actionIndex,{x:Q.x,y:Q.y,w:Ln,h:Ln}]):[])}function $R(e){const{ctx:t,color:n,x:o,y1:l,y2:r,y3:d,tip:h,width:E,testInteraction:A}=e;t.fillStyle=n,t.beginPath(),t.moveTo(o-3,0),t.lineTo(o+3,0),t.lineTo(o,6),t.fill(),t.lineWidth=1,t.strokeStyle=n,t.setLineDash([]),t.beginPath(),t.moveTo(o,0),t.lineTo(o,l),t.stroke(),t.strokeStyle=n+"9f",t.setLineDash([2,3]),t.beginPath(),t.moveTo(o,l),t.lineTo(o,r),t.stroke();const R=t.lineWidth;E!==void 0&&(t.lineWidth=E),t.strokeStyle=n,t.setLineDash([]),t.beginPath(),t.moveTo(o,r),t.lineTo(o,d),t.stroke(),t.lineWidth=R,t.strokeStyle=n+"9f",t.setLineDash([2,3]),t.beginPath(),t.moveTo(o,d),t.lineTo(o,bh),t.stroke(),h!==void 0&&(A==null||A({x:o-3,y:0,w:6,h:bh},{hoverTip:[h]})),t.setLineDash([])}function WD(e){const{ctx:t,viewInfo:n,originX:o,testInteraction:l}=e,r=e.ignoreVisibleX??!1,{colors:d,renderingProps:h,visibleWidth:E}=n,A=r?it.positionFromTimeAndScale(N.game.time+h.countdown,h.scale):E;t.fillStyle=d.timeline.ruler,t.fillRect(0,0,A,Oe.rulerHeight),l({x:Oe.leftBufferWidth,y:0,w:A-Oe.leftBufferWidth,h:Oe.rulerHeight},{hoverTip:p=>[(it.timeFromPositionAndScale(p.x-o,h.scale)-h.countdown).toFixed(3)],onMouseDown:p=>{const _=it.timeFromPositionAndScale(p.x-o,h.scale)-h.countdown;_<N.game.getDisplayTime()&&_>=-N.game.config.countdown?N.displayHistoricalState(_,void 0):N.displayCurrentState()}}),t.lineCap="butt",t.beginPath();const R=h.scale*100,T=h.countdown*R;t.lineWidth=1,t.strokeStyle=d.text,t.textBaseline="alphabetic",t.font="13px monospace",t.textAlign="center",t.fillStyle=d.text;const S=50,I=function(p,_,b){const v=p*R,L=o+v+T;L>=-50&&L<=A+S&&(t.moveTo(L,0),t.lineTo(L,_),b&&t.fillText(it.displayTime(v/R,0),L,23))};if(R>=6){for(let p=0;p*R<h.timelineWidth-T;p+=1)p%5!==0&&I(p,6,!1);for(let p=-1;p*R>=-T;p-=1)p%5!==0&&I(p,6,!1)}for(let p=0;p*R<h.timelineWidth-T;p+=5)I(p,10,!0);for(let p=-5;p*R>=-T;p-=5)I(p,10,!0);return t.stroke(),Oe.rulerHeight}function XD(e){const{ctx:t,viewInfo:n,originX:o,originY:l,testInteraction:r}=e,d=e.ignoreVisibleX??!1,{colors:h,renderingProps:E,visibleWidth:A}=n,R=d?it.positionFromTimeAndScale(N.game.time+E.countdown,E.scale):A,T=new Map;E.allMarkers.forEach(_=>{let b=T.get(_.track);b===void 0&&(b=[]),b.push(_),T.set(_.track,b)}),t.beginPath();let S=0,I=!1;for(const _ of T.keys())S=Math.max(S,_+1),_===gl&&(I=!0);I&&(S+=1);const p=l+S*Oe.trackHeight;t.fillStyle=h.timeline.tracks;for(let _=0;_<S;_+=2){const b=p-(_+1)*Oe.trackHeight;t.rect(0,b,R,Oe.trackHeight)}return t.fill(),w2({ctx:t,viewInfo:n,markerTracksTopY:l,markerTracksBottomY:p,timelineOrigin:o,trackBins:T,testInteraction:r}),S*Oe.trackHeight}function qD(e,t){e.fillStyle="rgba(147, 112, 219, 0.15)",e.fillRect(t.x,t.y,t.w,t.h),e.strokeStyle="rgba(147, 112, 219, 0.5)",e.lineWidth=1,e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(t.x,t.y+t.h),e.moveTo(t.x+t.w,t.y),e.lineTo(t.x+t.w,t.y+t.h),e.stroke()}function ZD(e){const{ctx:t,viewInfo:n,originX:o,originY:l,isImageExportMode:r,testInteraction:d}=e,{colors:h,renderingProps:E}=n,A=o+it.positionFromTimeAndScale(E.countdown,E.scale);let R=new Map;for(let I=0;I<E.slots.length;I++){const p=I===E.activeSlotIndex,_=new Map;if(r&&!p)continue;E.slots[I].elements.forEach(k=>{const M=_.get(k.type)??[];M.push(k),_.set(k.type,M)});let b=l+I*Oe.renderSlotHeight();r&&(b=l);const v={ctx:t,viewInfo:n,timelineOriginX:A,timelineOriginY:b,testInteraction:d};E.drawOptions.drawMPTickMarks&&G2({...v,elems:_.get(st.MPTickMark)??[]}),E.drawOptions.drawHealingMarks&&uR({...v,elems:_.get(st.HealingMark)??[]}),E.drawOptions.drawDamageMarks&&(uR({...v,elems:_.get(st.DamageMark)??[]}),uR({...v,elems:_.get(st.AggroMark)??[]})),E.drawOptions.drawMPTickMarks&&j2({...v,elems:_.get(st.LucidMark)??[]}),B2({...v,elems:_.get(st.MeditateTickMark)??[]}),F2({...v,elems:_.get(st.AutoTickMark)??[]}),z2({...v,elems:_.get(st.WarningMark)??[]});const L=Y2({...v,elems:_.get(st.Skill)??[],interactive:p});if(p&&(R=L),E.showSelection&&p&&!r){const k=A+it.positionFromTimeAndScale(E.selectionStartDisplayTime,E.scale),M=it.positionFromTimeAndScale(E.selectionEndDisplayTime-E.selectionStartDisplayTime,E.scale);qD(t,{x:k,y:b,w:M,h:Oe.renderSlotHeight()})}}const T=it.positionFromTimeAndScale(E.countdown,E.scale);let S=Oe.renderSlotHeight()*E.slots.length;if(E.slots.length<yi&&(S+=Oe.addSlotButtonHeight),t.fillStyle=h.timeline.countdown,t.fillRect(o-Oe.leftBufferWidth,l,T+Oe.leftBufferWidth,S),r)return new Map;for(let I=0;I<E.slots.length;I++){const _={x:0,y:l+I*Oe.renderSlotHeight()+1,w:14,h:Oe.renderSlotHeight()-2};if(t.fillStyle=I===E.activeSlotIndex?h.accent:h.bgMediumContrast,t.fillRect(_.x,_.y,_.w,_.h),d(_,{hoverTip:I===E.activeSlotIndex?void 0:[C({en:"set active",zh:"设为当前"})],onMouseUp:(b,v)=>{v&&N.undoStack.doThenPush(new nw(E.activeSlotIndex,I))},pointerMouse:!0}),E.slots.length>1&&I===E.activeSlotIndex){t.fillStyle=h.emphasis,t.font="bold 14px monospace",t.textAlign="center",t.fillText("×",_.x+_.w/2,_.y+_.h-4);const b={x:_.x,y:_.y+_.h-_.w,w:_.w,h:_.w};d(b,{hoverTip:[C({en:"delete",zh:"删除"})],onMouseUp:(v,L)=>{L&&N.undoStack.doThenPush(new iw(E.activeSlotIndex,N.record.serialized()))},pointerMouse:!0})}}return R}function K2(e){const{ctx:t,viewInfo:n,originX:o,timelineStartY:l,testInteraction:r}=e,{colors:d,renderingProps:h}=n,E=o+it.positionFromTimeAndScale(h.countdown,h.scale),A=Oe.renderSlotHeight(),R=l+h.activeSlotIndex*A,T=new Map;h.sharedElements.forEach(I=>{const p=T.get(I.type)??[];p.push(I),T.set(I.type,p)});const S={y1:l,y2:R,y3:R+A};(T.get(st.s_HistoricalCursor)??[]).forEach(I=>{const p=I;if(p.enabled){const _=E+it.positionFromTimeAndScale(I.displayTime,h.scale);$R({ctx:t,color:d.historical,x:_,...S,tip:C({en:"cursor: ",zh:"光标："})+p.displayTime.toFixed(3),testInteraction:r})}}),(T.get(st.s_Cursor)??[]).forEach(I=>{const p=I,_=E+it.positionFromTimeAndScale(p.displayTime,h.scale);$R({ctx:t,color:d.emphasis,x:_,...S,tip:C({en:"cursor: ",zh:"光标："})+p.displayTime.toFixed(3),testInteraction:r})})}function V2(e){const{ctx:t,viewInfo:n,timelineStartY:o,mouseX:l,mouseY:r,selectStartX:d,selectStartY:h,interactionInfo:E,dragTargetTime:A}=e,{bgSelecting:R,draggedSkillElem:T}=E,{colors:S,visibleLeft:I,renderingProps:p}=n;if(R){const L={x:Math.min(d,l),y:Math.min(h,r),w:Math.abs(d-l),h:Math.abs(h-r)};qD(t,L)}const b=-I+Oe.leftBufferWidth+it.positionFromTimeAndScale(p.countdown,p.scale);if(T){const L=t.globalAlpha;t.globalAlpha=.4,t.drawImage(UR(T.skillName),l,r,Ln,Ln),t.globalAlpha=L}const v=A;if(v!==null){const L=Oe.renderSlotHeight(),k=o+p.activeSlotIndex*L,M=b+it.positionFromTimeAndScale(v,p.scale);$R({ctx:t,color:S.dropTarget,x:M,y1:o,y2:k,y3:k+L,width:4})}}function W2(e){const{ctx:t,viewInfo:{colors:n,renderingProps:o},originY:l,testInteraction:r}=e;if(o.slots.length<yi){const E={x:4,y:l+2,w:192,h:Oe.addSlotButtonHeight-4};t.fillStyle=n.bgLowContrast,t.fillRect(E.x,E.y,E.w,E.h),t.strokeStyle=n.bgHighContrast,t.lineWidth=1,t.strokeRect(E.x,E.y,E.w,E.h),t.font="13px monospace",t.fillStyle=n.text,t.textAlign="center",t.fillText(C({en:"Add timeline slot",zh:"添加时间轴"}),E.x+E.w/2,E.y+E.h-4),r(E,{onMouseUp:(R,T)=>{T&&N.undoStack.doThenPush(new ow(o.activeSlotIndex))},pointerMouse:!0});const A={x:2*4+192,y:l+2,w:192,h:Oe.addSlotButtonHeight-4};return t.fillStyle=n.bgLowContrast,t.fillRect(A.x,A.y,A.w,A.h),t.strokeStyle=n.bgHighContrast,t.lineWidth=1,t.strokeRect(A.x,A.y,A.w,A.h),t.font="13px monospace",t.fillStyle=n.text,t.textAlign="center",t.fillText(C({en:"Clone timeline slot",zh:"复制时间轴"}),A.x+A.w/2,A.y+A.h-4),r(A,{onMouseUp:(R,T)=>{T&&N.undoStack.doThenPush(new lw(o.activeSlotIndex))},pointerMouse:!0}),Oe.addSlotButtonHeight}return 0}function QD(){let e=0,t=!1;for(const n of N.timeline.getAllMarkers()){const o=n.track;e=Math.max(e,o+1),o===gl&&(t=!0)}return t&&(e+=1),e*Oe.trackHeight}function $D(){return Oe.rulerHeight+QD()}function X2(e){const{ctx:t,viewInfo:n,testInteraction:o}=e,{renderingProps:l,colors:r,visibleLeft:d,visibleWidth:h}=n,E=-d+Oe.leftBufferWidth;let A=0;return t.fillStyle=r.background,t.fillRect(0,0,h+1,l.timelineHeight+1),o({x:0,y:0,w:h,h:bh},{onMouseDown:VD}),A+=WD({ctx:t,originX:E,viewInfo:n,testInteraction:o}),A+=QD(),ZD({ctx:t,viewInfo:n,originX:E,originY:A,isImageExportMode:!1,testInteraction:o})}function q2(e){const{ctx:t,viewInfo:n,testInteraction:o}=e,l=-n.visibleLeft+Oe.leftBufferWidth;XD({ctx:t,viewInfo:n,originX:l,originY:Oe.rulerHeight,testInteraction:o}),W2({ctx:t,viewInfo:n,originY:$D()+Oe.renderSlotHeight()*n.renderingProps.slots.length,testInteraction:o})}function cC(e){const{ctx:t,viewInfo:n,dragTargetTime:o,activeHoverTip:l,activeHoverImages:r,mouseX:d,mouseY:h,selectStartX:E,selectStartY:A,mouseInteractionInfo:R,testInteraction:T}=e,S=-n.visibleLeft+Oe.leftBufferWidth,I=$D();K2({ctx:t,viewInfo:n,originX:S,timelineStartY:I,testInteraction:T}),R&&V2({ctx:t,viewInfo:n,timelineStartY:I,mouseX:d,mouseY:h,selectStartX:E,selectStartY:A,interactionInfo:R,dragTargetTime:o}),l!==void 0&&P2({ctx:t,viewInfo:n,lines:l,images:r,mouseX:d,mouseY:h})}function uC(e,t){const n=e.x+e.w<t.x,o=e.x>t.x+t.w,l=e.y+e.h<t.y,r=e.y>t.y+t.h;return!(n||o||l||r)}function JD(e,t){const[n,o]=e;return n!==void 0&&o!==void 0&&n>t.x&&n<t.x+t.w&&o>t.y&&o<t.y+t.h}function dR(e,t,n){const o=ey(e,t,n);return o!==void 0?o[0]:void 0}function ey(e,t,n){for(const[o,l]of Array.from(n.entries()).reverse())if(JD([e,t],o))return[l,o]}function ER(){return{mouseDown:new Map,mouseUp:new Map,mouseHover:new Map,pointer:new Map}}function OE(e){["mouseDown","mouseHover","mouseUp","pointer"].forEach(t=>e[t].clear())}function Z2(e){const t=O.useRef(null),n=O.useRef(null),o=O.useRef(null),l=window.devicePixelRatio,r=e.visibleWidth*l,d=e.timelineHeight*l,h=O.useContext(Ga),E=O.useContext(mf),A=O.useContext(id),R=O.useRef([null,null]),T=O.useRef(0),S=O.useRef(0),I=O.useRef(void 0),p=O.useRef(void 0),_=O.useRef(0),b=O.useRef(0),v=O.useRef({}),L=O.useRef(new Map),k=O.useRef({live:ER(),interactive:ER(),lowUpdate:ER()});function M(K){const W=k.current;return new Map([...W.live[K],...W.interactive[K],...W.lowUpdate[K]])}const B=O.useRef(void 0),w=K=>{B.current=K},x=O.useRef(!1),Q=K=>{x.current=K},oe=K=>(W,D)=>{const{hoverTip:j,onMouseUp:F,onMouseDown:G,pointerMouse:J,hoverImages:Ee}=D,re=k.current[K];(j||Ee)&&re.mouseHover.set(W,{tip:j,images:Ee}),F&&re.mouseUp.set(W,F),G&&re.mouseDown.set(W,G),J!==void 0&&re.pointer.set(W,J)},he=K=>{const W=-e.visibleLeft-Oe.leftBufferWidth,D=e.visibleWidth-W;K.clearRect(W,0,D,bh)},ue=()=>{const K=v.current.tip,W={x:T.current,y:S.current,shiftKey:!1,dragLock:A.value,draggedSkillElem:B.current,bgSelecting:x.current,setDraggedSkillElem:w,setBgSelecting:Q};return{viewInfo:{renderingProps:N.getTimelineRenderingProps(),colors:Hi(h),visibleLeft:e.visibleLeft,visibleWidth:e.visibleWidth},dragTargetTime:E.dragTargetTime,mouseX:T.current,mouseY:S.current,selectStartX:_.current,selectStartY:b.current,activeHoverTip:K!==void 0?Array.isArray(K)?K:K(W):void 0,activeHoverImages:v.current.images,mouseInteractionInfo:W}},de=()=>{var W;const K=(W=n.current)==null?void 0:W.getContext("2d",{alpha:!0});K&&(K.scale(l,l),he(K),OE(k.current.interactive),cC({ctx:K,...ue(),testInteraction:oe("interactive")}),K.scale(1/l,1/l))},fe={onMouseMove:(K,W)=>{if(T.current=K,S.current=W,v.current=dR(K,W,M("mouseHover"))??{},x.current){const D={x:Math.min(_.current,K),y:Math.min(b.current,W),w:Math.abs(_.current-K),h:Math.abs(b.current-W)};let j=null,F=null;for(const[G,J]of L.current.entries())if(uC(J,D)){j=G,F=G;break}if(F!==null)for(const[G,J]of Array.from(L.current.entries()).reverse()){if(F>=G)break;if(uC(J,D)){F=G;break}}(j!==R.current[0]||F!==R.current[1])&&(R.current=[j,F],j!==null&&F!==null?(N.record.selectSingle(j),N.record.selectUntil(F)):N.record.unselectAll(),N.displayCurrentState())}if(B.current){N.record.isInSelection(B.current.actionIndex)||N.timeline.onClickTimelineAction(B.current.actionIndex,!1);const D=-e.visibleLeft+Oe.leftBufferWidth;let j=1/0,F=-1,G;const J=L.current,Ee=Array.from(J.entries());for(let le=0;le<Ee.length;le++){const[Ne,Le]=Ee[le],Xe=Math.abs(T.current-Le.x);if(G!==void 0&&Xe>G)break;Xe<j&&(j=Xe,F=Ne),G=Xe}let re=1/0;const Ae=N.getTimelineRenderingProps(),Re=Ae.sharedElements.filter(le=>le.type==st.s_Cursor);let Ce;const xe=Re[Re.length-1].displayTime+Ae.countdown;Re.length>0&&(Ce=D+it.positionFromTimeAndScale(xe,Ae.scale),re=Math.abs(T.current-Ce));let _e=null;const ge=Array.from(J.keys());Ce!==void 0&&re<j&&J.size>0&&F===ge[ge.length-1]&&(F=ge[ge.length-1]+1,_e=xe-Ae.countdown),F!==-1&&E.dragTargetIndex!==F&&(_e===null&&(F>0&&!B.current.isGCD?_e=N.record.actions[F-1].tmp_endLockTime??null:_e=N.record.actions[F].tmp_startLockTime??null,_e!==null&&(_e-=N.gameConfig.countdown)),E.setDragTarget(F,_e))}e.setPointerMouse(dR(K,W,M("pointer"))??!1),de()},onMouseEnter:()=>{},onMouseLeave:()=>{I.current=void 0,p.current=void 0,x.current=!1,(v.current.tip!==void 0||v.current.images!==void 0)&&(v.current={tip:void 0,images:void 0},de())},onMouseUp:(K,W,D)=>{if(T.current=W,S.current=D,B.current){const j=E.dragTargetIndex;E.setDragTarget(null,null),w(void 0);let F=!0;if(j!==null){const G=N.record.selectionStartIndex??0;let J=j-(G??0);if(J>0&&(J-=N.record.getSelectionLength()),J!==0){N.undoStack.push(new UE(G,N.record.getSelectionLength(),J)),N.record.moveSelected(J),N.autoSave();const Ee=on();wo();const re=N.record.selectionStartIndex;re!==void 0?N.displayHistoricalState(Ee.skillUseTimes[re],re):N.displayCurrentState(),F=!1}}F&&de()}if(!N.inputLocked){const j=ey(W,D,M("mouseUp"));if(j!==void 0){const[F,G]=j;F({x:W,y:D,shiftKey:K.shiftKey,dragLock:A.value,bgSelecting:x.current,setDraggedSkillElem:w,setBgSelecting:Q},JD([I.current,p.current],G))}}x.current=!1},onMouseDown:(K,W)=>{var D;if(I.current=K,p.current=W,T.current=K,S.current=W,!N.inputLocked){const j=M("mouseDown");_.current=K,b.current=W,(D=dR(K,W,j))==null||D({x:K,y:W,shiftKey:!1,dragLock:A.value,bgSelecting:x.current,setDraggedSkillElem:w,setBgSelecting:Q})}},onKeyDown:K=>{N.handleTimelineKeyboardEvent(K),N.inputLocked||K.key==="Escape"&&(E.setDragTarget(null,null),w(void 0))}};O.useEffect(()=>e.setCallbacks(fe),[E.dragTargetTime,A.value]);const $=()=>{const[K,W,D]=[t,n,o].map((j,F)=>{var G;return(G=j.current)==null?void 0:G.getContext("2d",{alpha:F!==0})});if(K&&W&&D){[K,W,D].forEach(F=>F.scale(l,l)),OE(k.current.live),OE(k.current.interactive),OE(k.current.lowUpdate),[W,D].forEach(F=>he(F));const j={renderingProps:N.getTimelineRenderingProps(),colors:Hi(h),visibleLeft:e.visibleLeft,visibleWidth:e.visibleWidth};L.current=X2({ctx:K,viewInfo:j,testInteraction:oe("live")}),cC({ctx:W,...ue(),testInteraction:oe("interactive")}),q2({ctx:D,viewInfo:j,testInteraction:oe("lowUpdate")}),[K,W,D].forEach(F=>F.scale(1/l,1/l))}};O.useEffect(de,[E.dragTargetTime]),O.useEffect(()=>{A.value||(de(),E.setDragTarget(null,null),w(void 0))},[A.value]),O.useEffect($,[T,S,e.version,l]),O.useEffect(()=>{$(),e.setCallbacks(fe)},[e.visibleLeft,e.visibleWidth]);const ee={width:e.visibleWidth,height:e.timelineHeight,position:"absolute",pointerEvents:"none",cursor:e.pointerMouse?"pointer":"default",left:0,top:0},Y=Math.ceil(r),P=Math.ceil(d);return u.jsxs("div",{style:{position:"relative"},children:[u.jsx("canvas",{ref:t,width:Y,height:P,tabIndex:0,style:{...ee,zIndex:0}}),u.jsx("canvas",{ref:o,width:Y,height:P,tabIndex:-1,style:{...ee,zIndex:1,backgroundColor:"transparent"}}),u.jsx("canvas",{ref:n,width:Y,height:P,tabIndex:-1,style:{...ee,zIndex:2,backgroundColor:"transparent"}})]})}function Q2(e,t){const n=N.getTimelineRenderingProps();let o=n.selectionStartDisplayTime,l=n.selectionEndDisplayTime;o===l&&(o=-n.countdown,l=N.game.time-n.countdown+4);const r=N.imageExportConfig;let d,h;r.wrapThresholdSeconds===0?(d=1,h=l-o):(d=Math.ceil((l-o)/r.wrapThresholdSeconds),h=r.wrapThresholdSeconds);const E=document.createElement("canvas"),A=document.createElement("canvas"),R=Oe.trackHeight/2,T=N.timeline,S=T.positionFromTime(n.countdown);E.width=T.positionFromTime(l)+S;let I=Oe.renderSlotHeight();e&&(I+=Oe.rulerHeight,I+=Oe.trackHeight*T.getNumMarkerTracks()),E.height=I;const p=E.getContext("2d",{willReadFrequently:!0}),_=0;p.fillStyle=t.background,p.fillRect(0,0,E.width,E.height);let b=0;const v={renderingProps:N.getTimelineRenderingProps(),colors:t,visibleLeft:0,visibleWidth:100};e&&(b+=WD({ctx:p,viewInfo:v,originX:0,ignoreVisibleX:!0,testInteraction:()=>{}}),b+=XD({ctx:p,viewInfo:v,originX:_,originY:b,ignoreVisibleX:!0,testInteraction:()=>{}})),ZD({ctx:p,viewInfo:v,isImageExportMode:!0,originX:_,originY:b,testInteraction:()=>{}});const L=T.positionFromTime(o)+S,k=T.positionFromTime(l)+S;A.height=(R+I)*(d-1)+I,A.width=d===1?k-L:T.positionFromTime(h);const M=A.getContext("2d");for(let B=0;B<d;B++){const w=T.positionFromTime(h);if(L>k)break;const x=Math.min(k-(L+B*w),w),Q=p.getImageData(L+B*w,0,x+1,E.height+1);M.putImageData(Q,0,B*(R+I)),B>0&&x<w&&(M.fillStyle=t.background,M.fillRect(x,B*(R+I),w-x,E.height+1))}return A}function $2(){const[e,t]=O.useState(N.imageExportConfig),n=(E,A)=>{const R=Object.assign({},e);R[E]=A,N.setImageExportConfig(R),t(R),It("img: "+E,JSON.stringify(A))},o={position:"relative",top:3,marginRight:"0.25em"},l=(E,A)=>u.jsxs("div",{style:{marginBottom:5},children:[u.jsx("input",{type:"checkbox",onClick:R=>n(E,R.currentTarget.checked),value:e[E]?"on":"off",style:o,defaultChecked:e[E]}),u.jsx("span",{children:C(A)})]}),r=E=>{Number.isNaN(parseFloat(E))||n("wrapThresholdSeconds",parseFloat(E))},d=u.jsxs(u.Fragment,{children:[u.jsx("div",{children:u.jsx(Aa,{defaultValue:e.wrapThresholdSeconds.toString(),description:u.jsxs("span",{children:[C({en:"seconds before wrapping ",zh:"每行秒数 "}),u.jsx(We,{topic:"png-wrap",content:C({en:"number of elapsed seconds, including the countdown, in each row in the image (set to 0 to never wrap)",zh:"从开始倒计时算起，每显示多少秒换一次行。如果填0则从不换行。"})}),":"," "]}),onChange:r,style:{margin:"10px 0"}})}),l("includeTime",{en:"include time and markers",zh:"显示时间刻度和时间轴标记"})]}),h=Pt();return u.jsxs("div",{children:[u.jsx("p",{children:C({en:u.jsx("span",{children:"export the selected part of the timeline as a png according to the current display settings, or the whole timeline if nothing is selected"}),zh:"根据当前显示设置将时间轴内选择部分导出为png，如果无选择将整个时间轴导出"})}),d,u.jsx("p",{children:u.jsx(Nl,{filename:"fight",fileFormat:Uo.Png,getContentFn:()=>Q2(e.includeTime,h),displayName:C({en:"export selection as png",zh:"将选择部分导出为png"})})})]})}function J2(){const e=d=>{d.fileType===Mi.Record?N.undoStack.doThenPush(new rw(N.record.serialized(),d)):d.fileType===Mi.MarkerTrackIndividual||d.fileType===Mi.MarkerTracksCombined?window.alert("wrong file type '"+d.fileType+`'; use the "Timeline markers" section instead if you meant import markers.`):window.alert("wrong file type '"+d.fileType+"'.")},t=C({en:"Export fight to file",zh:"导出战斗到文件"}),n=u.jsxs("div",{children:[u.jsx("p",{children:C({en:"for sharing and importing:",zh:"用于分享和导入："})}),u.jsx(Nl,{fileFormat:Uo.Json,getContentFn:()=>N.record.serialized(),filename:"fight",displayName:C({en:"txt format",zh:"txt格式"})}),u.jsx("p",{children:C({en:u.jsxs("span",{children:["for external tools such as excel and"," ",u.jsx("a",{href:"https://github.com/Tischel/BLMInTheShell",children:"Tischel's plugin"}),":"]}),zh:u.jsxs("span",{children:["用于excel，",u.jsx("a",{href:"https://github.com/Tischel/BLMInTheShell",children:"Tischel的插件"}),"等外部工具："]})})}),u.jsx(Nl,{fileFormat:Uo.Csv,getContentFn:()=>({body:N.getActionsLogCsv()}),filename:"fight",displayName:C({en:"csv format",zh:"csv格式"})}),u.jsx("p",{children:C({en:u.jsxs("span",{children:["for use with"," ",u.jsx("a",{href:"https://colab.research.google.com/github/zqsz-xiv/xivintheshell-ama-sim-notebook/blob/main/in_the_shell_with_ama_sim.ipynb",children:"Amarantine's combat simulator"}),":"]}),zh:u.jsxs("span",{children:["用于",u.jsx("a",{href:"https://github.com/Amarantine-xiv/Amas-FF14-Combat-Sim",children:"Amarantine的战斗模拟器"}),"："]})})}),u.jsx(Nl,{fileFormat:Uo.Csv,getContentFn:()=>N.getAmaSimCsv(),filename:"fight",displayName:C({en:"csv format",zh:"csv格式"})})]}),o=C({en:"Import fight from file",zh:"从文件导入战斗"}),l=u.jsx(Ah,{allowLoadFromUrl:!1,onLoadFn:e}),r=u.jsx(u.Fragment,{children:C({en:"Image Export",zh:"导出为图像"})});return u.jsx(XT,{contentHeight:CS,children:[{defaultSize:25,title:o,content:l},{defaultSize:30,title:t,content:n},{defaultSize:45,title:r,content:u.jsx($2,{})}]})}function eF(){const e=(d,h)=>u.jsxs("div",{style:{marginBottom:5},children:[u.jsx("b",{children:C(d)})," ",h]}),t=u.jsx(We,{topic:"settings-display",content:C({en:"Configure how elements are displayed in the visual timeline and image exports.",zh:"设置在时间轴上以及导出为图像时会显示的元素。"})}),n=u.jsx(We,{topic:"settings-copypaste",content:C({en:u.jsxs("div",{children:["Configure the format used when copying a sequence of skills from XIV in the Shell to paste in other applications.",u.jsx("br",{}),"Any of the provided formats can be pasted ",u.jsx("i",{children:"from"})," external applications to XIV in the Shell at any time, regardless of the value of this setting."]}),zh:u.jsxs("div",{children:["设置从时间轴编辑器复制技能到外部软件时使用的格式。",u.jsx("br",{}),"无论此处选择何种格式，编辑器都支持从外部软件粘贴以下所有格式的数据。"]})})}),o=u.jsx(We,{topic:"settings-copypaste-plain",content:C({en:u.jsxs("div",{children:["A comma-separated list of skill names.",u.jsx("br",{}),u.jsx("br",{}),"Example:",u.jsx("br",{}),u.jsx("span",{children:"Fire 3, Fire 4, Despair"})]}),zh:u.jsxs("div",{children:["以顿号分隔技能名称的列表。",u.jsx("br",{}),u.jsx("br",{}),"例：",u.jsx("br",{}),u.jsx("span",{children:"火3、火4、绝望"})]})})}),l=u.jsx(We,{topic:"settings-copypaste-plain",content:C({en:u.jsxs("div",{children:["A tab-separated list of usage timestamps, target counts, and skill names, for use with external spreadsheet applications.",u.jsx("br",{}),u.jsx("br",{}),"Example:",u.jsx("table",{children:u.jsxs("tbody",{children:[u.jsxs("tr",{children:[u.jsx("td",{children:"-3.500"}),u.jsx("td",{children:"1"}),u.jsx("td",{children:"Fire 3"})]}),u.jsxs("tr",{children:[u.jsx("td",{children:"0.042"}),u.jsx("td",{children:"1"}),u.jsx("td",{children:"Fire 4"})]}),u.jsxs("tr",{children:[u.jsx("td",{children:"2.500"}),u.jsx("td",{children:"1"}),u.jsx("td",{children:"Despair"})]})]})})]}),zh:u.jsxs("div",{children:["用制表符分隔的时间、击中目标数、技能名称的列表。可用于外部电子表格软件。",u.jsx("br",{}),u.jsx("br",{}),"例：",u.jsx("table",{children:u.jsxs("tbody",{children:[u.jsxs("tr",{children:[u.jsx("td",{children:"-3.500"}),u.jsx("td",{children:"1"}),u.jsx("td",{children:"火3"})]}),u.jsxs("tr",{children:[u.jsx("td",{children:"0.042"}),u.jsx("td",{children:"1"}),u.jsx("td",{children:"火4"})]}),u.jsxs("tr",{children:[u.jsx("td",{children:"2.500"}),u.jsx("td",{children:"1"}),u.jsx("td",{children:"绝望"})]})]})})]})})}),r=u.jsx(We,{topic:"settings-copypaste-discord",content:C({en:u.jsxs("div",{children:["A sequence of Discord emotes (only verified for BLM and PCT). Requires access to a server with appropriately-named emotes to use.",u.jsx("br",{}),u.jsx("br",{}),"Example:",u.jsx("br",{}),u.jsx("span",{children:":F3: :F4: :Despair:"})]}),zh:u.jsxs("div",{children:["Discord表情的列表（仅验证了黑魔和画家)。需要加入有所需的表情的Discord服务器才能使用。",u.jsx("br",{}),u.jsx("br",{}),"例：",u.jsx("br",{}),u.jsx("span",{children:":F3: :F4: :Despair:"})]})})});return u.jsxs("div",{children:[e({en:"Display settings",zh:"显示设置"},t),u.jsx(Tu,{uniqueName:"showDamageMarks",label:C({en:"show damage marks",zh:"显示伤害结算标记"}),onChange:d=>{N.setTimelineOptions({drawDamageMarks:d})}}),u.jsx(Tu,{uniqueName:"showHealingMarks",label:C({en:"show healing marks",zh:"显示恢复结算标记"}),onChange:d=>{N.setTimelineOptions({drawHealingMarks:d})}}),u.jsx(Tu,{uniqueName:"showMPAndLucidTickMarks",label:C({en:"show MP and lucid ticks",zh:"显示跳蓝和跳醒梦"}),onChange:d=>{N.setTimelineOptions({drawMPTickMarks:d})}}),u.jsx(Tu,{uniqueName:"showBuffIndicators",label:C({en:"show buff indicators",zh:"显示buff标记"}),onChange:d=>{N.setTimelineOptions({drawBuffIndicators:d})}}),u.jsx("br",{}),e({en:"Clipboard copy mode",zh:"剪贴板复制模式"},n),u.jsx(QP,{uniqueName:"clipboardMode",onChange:d=>N.clipboardMode=d,options:[["plain",u.jsxs("span",{children:[C({en:"plain text",zh:"纯文本"})," ",o]})],["tsv",u.jsxs("span",{children:[C({en:"tab-separated lines",zh:"制表符分隔列表"})," ",l]})],["discord",u.jsxs("span",{children:["discord",C({en:" emotes",zh:"表情"})," ",r]})]]})]})}let wo=()=>{},ty=e=>{};const ay="dragLock",tF=bt(ay),ny=tF==="true",id=O.createContext({value:ny,setter:e=>{}}),mf=O.createContext({dragTargetIndex:null,dragTargetTime:null,setDragTarget:(e,t)=>{}});function aF(){const e=O.useRef(null),[t,n]=O.useState(11),[o,l]=O.useState(300),[r,d]=O.useState(23),[h,E]=O.useState(66),[A,R]=O.useState(0),[T,S]=O.useState(!1),[I,p]=O.useState({onMouseMove:()=>{},onMouseEnter:()=>{},onMouseLeave:()=>{},onMouseUp:()=>{},onMouseDown:()=>{},onKeyDown:()=>{}}),_=()=>{e.current&&(d(e.current.scrollLeft),E(e.current.clientWidth))};wo=()=>{n(N.timeline.getCanvasWidth()),l(N.timeline.getCanvasHeight()),R(A+1)},ty=k=>{if(e.current!=null){const M=e.current.clientWidth;e.current.scrollLeft=k-M*.6}_()},O.useEffect(()=>{n(N.timeline.getCanvasWidth()),l(N.timeline.getCanvasHeight()),_()},[]);const b=u.jsx(Z2,{timelineHeight:o,visibleLeft:r,visibleWidth:h,version:A,pointerMouse:T,setCallbacks:p,setPointerMouse:S}),v=O.useContext(Ga),L=Cl(v,"bgMediumContrast");return u.jsxs("div",{style:{position:"relative"},children:[b,u.jsx("div",{tabIndex:0,className:"visibleScrollbar",style:{position:"relative",width:"100%",overflowX:"scroll",overflowY:"clip",outline:"1px solid "+L,cursor:T?"pointer":"default"},ref:e,onScroll:()=>{e.current&&(e.current.scrollLeft=Math.min(e.current.scrollWidth-e.current.clientWidth,e.current.scrollLeft),d(e.current.scrollLeft),E(e.current.clientWidth))},onMouseMove:k=>{if(e.current){const M=e.current.getBoundingClientRect(),B=k.clientX-M.left,w=k.clientY-M.top;I.onMouseMove(B,w)}},onMouseDown:k=>{if(e.current){const M=e.current.getBoundingClientRect(),B=k.clientX-M.left,w=k.clientY-M.top;I.onMouseDown(B,w)}},onMouseEnter:()=>I.onMouseEnter(),onMouseLeave:()=>I.onMouseLeave(),onMouseUp:k=>{if(e.current){const M=e.current.getBoundingClientRect(),B=k.clientX-M.left,w=k.clientY-M.top;I.onMouseUp(k,B,w)}},onKeyDown:k=>I.onKeyDown(k),children:u.jsx("div",{style:{position:"relative",backgroundColor:"transparent",width:t,height:o,pointerEvents:"none"}})})]})}const iy=320,CS=iy-40;function nF(){const{value:e,setter:t}=O.useContext(id),n=O.useContext(Ga),o=window.innerWidth>1024,l=window.innerWidth>800;return u.jsxs("div",{style:{position:"relative",margin:6},children:[u.jsx(NO,{uniqueName:"timeline",maxWidth:1440,content:[{titleNode:C({en:"Timeline markers",zh:"时间轴标记"}),contentNode:u.jsx(X0,{})},{titleNode:u.jsxs("div",{style:{position:"relative"},children:[C({en:"Timeline editor ",zh:"时间轴编辑器 "}),u.jsx(We,{topic:"timeline editor",content:u.jsxs("div",{children:[u.jsx("div",{className:"paragraph",style:{color:"orangered"},children:u.jsx("b",{children:C({en:"Has the bare minimum features but might still be buggy (let me know). Would recommend going over Instructions/Troubleshoot first, plus saving data to drive in case bugs mess up the entire tool",zh:"本编辑器仍在开发中，不过有最基本的各项功能，请务必向我们汇报任何发现的bug。"})})}),u.jsx("div",{className:"paragraph",children:C({en:"I hope it's otherwise self-explanatory. Note that edits made here are not saved until they're applied to the actual timeline.",zh:"使用前最好先阅读使用指南并时刻保存各项数据。"})})]})})]}),contentNode:u.jsx(ew,{})},{titleNode:C({en:"Import/Export",zh:"导入/导出"}),contentNode:u.jsx("div",{children:u.jsx(J2,{})})},{titleNode:C({en:"Settings",zh:"设置"}),contentNode:u.jsx(eF,{})}],collapsible:!0,scrollable:!1,height:iy,defaultSelectedIndex:void 0}),u.jsxs("div",{style:{position:"absolute",top:0,right:6,display:"flex",flexDirection:"row",gap:20},children:[o&&u.jsxs("div",{style:{height:yr,lineHeight:`${yr}px`,verticalAlign:"middle",cursor:"pointer",userSelect:"none"},onClick:r=>{r.preventDefault(),t(!e)},children:[C({en:"drag lock",zh:"拖动锁"})," ",u.jsx(We,{topic:"dragLock",content:C({en:u.jsx("div",{children:"When locked, disables click/drag to rearrange timeline skills."}),zh:u.jsx("div",{children:"锁定时，禁止用单击并拖动来改变技能轴。"})})})," ",u.jsx(Hr.Provider,{value:{color:e?Cl(n,"accent"):void 0,style:{width:12,height:12,verticalAlign:"baseline"}},children:e?u.jsx(JM,{}):u.jsx($M,{})})]}),l&&u.jsx(ZP,{uniqueName:"timelineDisplayScale",description:C({en:"horizontal scale ",zh:"水平缩放 "}),defaultValue:"0.4",style:{height:yr,lineHeight:`${yr}px`,verticalAlign:"middle"},onChange:r=>{N.timeline.setHorizontalScale(parseFloat(r)),N.scrollToTime()}})]})]})}function iF(){const[e,t]=O.useState(ny),[[n,o],l]=O.useState([null,null]),r=(d,h)=>{if(e)d=null,h=null;else{const E=N.record.selectionStartIndex??0;let A=(d??0)-(E??0);A>0&&(A-=N.record.getSelectionLength()),(A===0||d!==null&&N.record.isInSelection(d))&&(d=null,h=null)}(d!==n||h!==o)&&l([d,h])};return u.jsx("div",{style:{bottom:0,left:0,right:0,paddingLeft:0,paddingRight:0,borderTop:"2px solid "+Pt().bgHighContrast,flex:0},children:u.jsx(id.Provider,{value:{value:e,setter:d=>{It(ay,d.toString()),t(d)}},children:u.jsxs(mf.Provider,{value:{dragTargetIndex:n,dragTargetTime:o,setDragTarget:r},children:[u.jsx(aF,{}),u.jsx(nF,{})]})})})}const OS=O.createContext(void 0),bS=O.createContext(void 0);function oF(){const e=O.useContext(bS),t=O.useContext(OS);if(!(t===void 0&&e===void 0))return{...e,...t}}function ks(){const e=O.useContext(bS),t=O.useContext(OS);if(t===void 0)throw new Error("Base UI: DialogRootContext is missing. Dialog parts must be placed within <Dialog.Root>.");return{...e,...t}}function Ac(e){const t=typeof e.render=="string"?e.render:void 0,n=typeof e.render=="string"?void 0:e.render;return{renderElement:Vh(t,{className:e.className,render:n},{...e,props:e.extraProps})}}const lF={...Kh,...zT},sF=O.forwardRef(function(t,n){const{render:o,className:l,...r}=t,{open:d,nested:h,mounted:E,transitionStatus:A,backdropRef:R}=ks(),T=O.useMemo(()=>({open:d,transitionStatus:A}),[d,A]),S=cc(R,n),{renderElement:I}=Ac({render:o??"div",className:l,state:T,ref:S,extraProps:Go({role:"presentation",hidden:!E,style:{userSelect:"none",WebkitUserSelect:"none"}},r),customStyleHookMapping:lF});return h?null:I()});function rF(e){const{rootElementName:t=""}=e,[n,o]=O.useState(t.toUpperCase()),l=O.useCallback(r=>{o((r==null?void 0:r.tagName)??"")},[]);return{rootElementName:n,updateRootElementName:l}}const cF=O.createContext(void 0);function uF(e=!1){const t=O.useContext(cF);if(t===void 0&&!e)throw new Error("Base UI: CompositeRootContext is missing. Composite parts must be placed within <Composite.Root>.");return t}function oy(e={}){const{buttonRef:t,disabled:n=!1,focusableWhenDisabled:o,tabIndex:l,type:r="button",elementName:d}=e,h=O.useRef(null),{rootElementName:E,updateRootElementName:A}=rF({rootElementName:d}),R=uF(!0)!==void 0,T=mi(()=>{const b=h.current;return E==="BUTTON"||E==="INPUT"&&["button","submit","reset"].includes(b==null?void 0:b.type)}),S=mi(()=>{const b=h.current;return!!(E==="A"&&(b!=null&&b.href))}),I=cc(A,t,h),p=O.useMemo(()=>{const b={};return l!==void 0&&!R&&(b.tabIndex=l),E==="BUTTON"||E==="INPUT"?o||R?b["aria-disabled"]=n:R||(b.disabled=n):E!==""&&(E!=="A"?(b.role="button",R||(b.tabIndex=l??0)):l&&!R&&(b.tabIndex=l),n&&(b["aria-disabled"]=n,R||(b.tabIndex=o?l??0:-1))),b},[n,E,o,R,l]);return Ji(()=>{const b=h.current;b instanceof HTMLButtonElement&&R&&n&&p.disabled===void 0&&b.disabled&&(b.disabled=!1)},[n,p.disabled,R]),{getButtonProps:O.useCallback((b={})=>{const{onClick:v,onMouseDown:L,onKeyUp:k,onKeyDown:M,onPointerDown:B,...w}=b;return Go({type:E==="BUTTON"||E==="INPUT"?r:void 0,onClick(x){if(n){x.preventDefault();return}v==null||v(x)},onMouseDown(x){n||L==null||L(x)},onKeyDown(x){(n&&o&&x.key!=="Tab"||x.target===x.currentTarget&&!T()&&x.key===" ")&&x.preventDefault(),n||(MR(x),M==null||M(x)),!x.baseUIHandlerPrevented&&x.target===x.currentTarget&&!T()&&!S()&&x.key==="Enter"&&!n&&(v==null||v(x),x.preventDefault())},onKeyUp(x){n||(MR(x),k==null||k(x)),!x.baseUIHandlerPrevented&&x.target===x.currentTarget&&!T()&&!n&&x.key===" "&&(v==null||v(x))},onPointerDown(x){if(n){x.preventDefault();return}B==null||B(x)},ref:I},p,w)},[p,n,E,o,T,S,I,r]),buttonRef:I}}function dF(e){const{open:t,setOpen:n,rootRef:o,disabled:l}=e,r=mi(E=>{t&&n(!1,E.nativeEvent,"click")}),{getButtonProps:d}=oy({disabled:l,buttonRef:o});return{getRootProps:E=>Go({onClick:r},E,d)}}const EF=O.forwardRef(function(t,n){const{render:o,className:l,disabled:r=!1,...d}=t,{open:h,setOpen:E}=ks(),{getRootProps:A}=dF({disabled:r,open:h,setOpen:E,rootRef:n}),R=O.useMemo(()=>({disabled:r}),[r]),{renderElement:T}=Ac({render:o??"button",className:l,state:R,propGetter:A,extraProps:d});return T()});let dC=0;function hF(e,t="mui"){const[n,o]=O.useState(e),l=e||n;return O.useEffect(()=>{n==null&&(dC+=1,o(`${t}-${dC}`))},[n,t]),l}const fF={...Lh},EC=fF.useId;function AF(e,t){if(EC!==void 0){const n=EC();return e??`${t}-${n}`}return hF(e,t)}function ly(e){return AF(e,"base-ui")}const mF={},RF=O.forwardRef(function(t,n){const{render:o,className:l,id:r,...d}=t,{setDescriptionElementId:h}=ks(),E=ly(r);Ji(()=>(h(E),()=>{h(void 0)}),[E,h]);const A=O.useCallback((T={})=>Go({id:E},T),[E]),{renderElement:R}=Ac({propGetter:A,render:o??"p",className:l,state:mF,ref:n,extraProps:d});return R()});function TF(e){const{descriptionElementId:t,getPopupProps:n,initialFocus:o,modal:l,mounted:r,openMethod:d,ref:h,setPopupElement:E,titleElementId:A}=e,R=O.useRef(null),T=cc(h,R,E),S=O.useCallback(_=>_==="touch"?R:0,[]),I=O.useMemo(()=>o==null?S(d??""):typeof o=="function"?o(d??""):o,[S,o,d]);return{getRootProps:_=>Go({"aria-labelledby":A??void 0,"aria-describedby":t??void 0,"aria-modal":r&&l===!0?!0:void 0,role:"dialog",tabIndex:-1,...n(),ref:T,hidden:!r},_),resolvedInitialFocus:I}}let SF=function(e){return e.nestedDialogs="--nested-dialogs",e}({}),IF=function(e){return e[e.open=cs.open]="open",e[e.closed=cs.closed]="closed",e[e.startingStyle=cs.startingStyle]="startingStyle",e[e.endingStyle=cs.endingStyle]="endingStyle",e.nested="data-nested",e.nestedDialogOpen="data-nested-dialog-open",e}({});const _F=O.forwardRef(function(t,n){return u.jsx("div",{ref:n,role:"presentation","data-floating-ui-inert":!0,...t,style:{position:"fixed",inset:0,userSelect:"none",WebkitUserSelect:"none"}})}),sy=O.createContext(void 0);function gF(){const e=O.useContext(sy);if(e===void 0)throw new Error("Base UI: <Dialog.Portal> is missing.");return e}function NF(e){return F0(19)?e:e?"true":void 0}const pF={...Kh,...zT,nestedDialogOpen(e){return e?{[IF.nestedDialogOpen]:""}:null}},CF=O.forwardRef(function(t,n){const{className:o,finalFocus:l,initialFocus:r,render:d,...h}=t,{descriptionElementId:E,dismissible:A,floatingRootContext:R,getPopupProps:T,modal:S,mounted:I,nested:p,nestedOpenDialogCount:_,open:b,openMethod:v,popupRef:L,setPopupElement:k,titleElementId:M,transitionStatus:B,onOpenChangeComplete:w,internalBackdropRef:x}=ks();gF(),Yh({open:b,ref:L,onComplete(){b&&(w==null||w(!0))}});const Q=cc(n,L),{getRootProps:oe,resolvedInitialFocus:he}=TF({descriptionElementId:E,getPopupProps:T,initialFocus:r,modal:S,mounted:I,openMethod:v,ref:Q,setPopupElement:k,titleElementId:M}),ue=_>0,de=O.useMemo(()=>({open:b,nested:p,transitionStatus:B,nestedDialogOpen:ue}),[b,p,B,ue]),{renderElement:fe}=Ac({render:d??"div",className:o,state:de,propGetter:oe,extraProps:{...h,style:{...h.style,[SF.nestedDialogs]:_}},customStyleHookMapping:pF});return u.jsxs(O.Fragment,{children:[I&&S===!0&&u.jsx(_F,{ref:x,inert:NF(!b)}),u.jsx(hx,{context:R,disabled:!I,closeOnFocusOut:A,initialFocus:he,returnFocus:l,modal:S!==!1,children:fe()})]})});function OF(e){const{children:t,keepMounted:n=!1,container:o}=e,{mounted:l}=ks();return l||n?u.jsx(sy.Provider,{value:n,children:u.jsx(rx,{root:o,children:t})}):null}const bF=typeof document<"u"?rn.useLayoutEffect:()=>{};function JR(...e){return(...t)=>{for(let n of e)typeof n=="function"&&n(...t)}}function DS(e){var t;return typeof window<"u"&&window.navigator!=null?e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform):!1}function Rf(e){let t=null;return()=>(t==null&&(t=e()),t)}const DF=Rf(function(){return DS(/^Mac/i)}),yF=Rf(function(){return DS(/^iPhone/i)}),vF=Rf(function(){return DS(/^iPad/i)||DF()&&navigator.maxTouchPoints>1}),MF=Rf(function(){return yF()||vF()});function hC(e,t){if(!e)return!1;let n=window.getComputedStyle(e),o=/(auto|scroll)/.test(n.overflow+n.overflowX+n.overflowY);return o&&t&&(o=e.scrollHeight!==e.clientHeight||e.scrollWidth!==e.clientWidth),o}function ry(e,t){let n=e;for(hC(n,t)&&(n=n.parentElement);n&&!hC(n,t);)n=n.parentElement;return n||document.scrollingElement||document.documentElement}const hR=typeof document<"u"&&window.visualViewport,LF=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let bE=0,fR;function HF(e={}){let{isDisabled:t}=e;bF(()=>{if(!t)return bE++,bE===1&&(MF()?fR=kF():fR=UF()),()=>{bE--,bE===0&&fR()}},[t])}function UF(){return JR(Lr(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`),Lr(document.documentElement,"overflow","hidden"))}function kF(){let e,t,n=A=>{e=ry(A.target,!0),!(e===document.documentElement&&e===document.body)&&e instanceof HTMLElement&&window.getComputedStyle(e).overscrollBehavior==="auto"&&(t=Lr(e,"overscrollBehavior","contain"))},o=A=>{if(!e||e===document.documentElement||e===document.body){A.preventDefault();return}e.scrollHeight===e.clientHeight&&e.scrollWidth===e.clientWidth&&A.preventDefault()},l=()=>{t&&t()},r=A=>{let R=A.target;xF(R)&&(h(),R.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{R.style.transform="",hR&&(hR.height<window.innerHeight?requestAnimationFrame(()=>{fC(R)}):hR.addEventListener("resize",()=>fC(R),{once:!0}))}))},d=null,h=()=>{if(d)return;let A=()=>{window.scrollTo(0,0)},R=window.pageXOffset,T=window.pageYOffset;d=JR(Au(window,"scroll",A),Lr(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`),Lr(document.documentElement,"overflow","hidden"),Lr(document.body,"marginTop",`-${T}px`),()=>{window.scrollTo(R,T)}),window.scrollTo(0,0)},E=JR(Au(document,"touchstart",n,{passive:!1,capture:!0}),Au(document,"touchmove",o,{passive:!1,capture:!0}),Au(document,"touchend",l,{passive:!1,capture:!0}),Au(document,"focus",r,!0));return()=>{t==null||t(),d==null||d(),E()}}function Lr(e,t,n){let o=e.style[t];return e.style[t]=n,()=>{e.style[t]=o}}function Au(e,t,n,o){return e.addEventListener(t,n,o),()=>{e.removeEventListener(t,n,o)}}function fC(e){let t=document.scrollingElement||document.documentElement,n=e;for(;n&&n!==t;){let o=ry(n);if(o!==document.documentElement&&o!==document.body&&o!==n){let l=o.getBoundingClientRect().top,r=n.getBoundingClientRect().top;r>l+n.clientHeight&&(o.scrollTop+=r-l)}n=o.parentElement}}function xF(e){return e instanceof HTMLInputElement&&!LF.has(e.type)||e instanceof HTMLTextAreaElement||e instanceof HTMLElement&&e.isContentEditable}function PF(){if(typeof navigator>"u")return{platform:"",maxTouchPoints:-1};const e=navigator.userAgentData;return e!=null&&e.platform?{platform:e.platform,maxTouchPoints:navigator.maxTouchPoints}:{platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints}}function cy(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter:none")}function eT(){const e=PF();return e.platform==="MacIntel"&&e.maxTouchPoints>1?!0:/iP(hone|ad|od)|iOS/.test(e.platform)}function wF(){return/firefox/i.test(xT())}function od(e){return e&&e.ownerDocument||document}function uy(e){return od(e).defaultView||window}let AC={},mC={},RC="",gu=0,TC=()=>{};function GF(){return gu}function BF(){return typeof CSS<"u"&&typeof CSS.supports=="function"&&CSS.supports("height","1dvh")}function FF(e){if(typeof document>"u")return!1;const t=od(e);return uy(t).innerWidth-t.documentElement.clientWidth>0}function zF(e){var T;const t=od(e),n=t.documentElement,o=t.body,l=uy(n);let r=0,d=0,h=-1;if(cy()&&(((T=l.visualViewport)==null?void 0:T.scale)??1)!==1)return()=>{};function E(){var x;const S=l.getComputedStyle(n),I=l.getComputedStyle(o);r=n.scrollTop,d=n.scrollLeft,AC={overflowY:n.style.overflowY,overflowX:n.style.overflowX},RC=n.style.scrollBehavior,mC={position:o.style.position,height:o.style.height,width:o.style.width,boxSizing:o.style.boxSizing,overflowY:o.style.overflowY,overflowX:o.style.overflowX,scrollBehavior:o.style.scrollBehavior};const p=(x=S.scrollbarGutter)==null?void 0:x.includes("stable"),_=n.scrollHeight>n.clientHeight,b=n.scrollWidth>n.clientWidth,v=S.overflowY==="scroll"||I.overflowY==="scroll",L=S.overflowX==="scroll"||I.overflowX==="scroll",k=Math.max(0,l.innerWidth-n.clientWidth),M=Math.max(0,l.innerHeight-n.clientHeight);Object.assign(n.style,{overflowY:!p&&(_||v)?"scroll":"hidden",overflowX:!p&&(b||L)?"scroll":"hidden"});const B=parseFloat(I.marginTop)+parseFloat(I.marginBottom),w=parseFloat(I.marginLeft)+parseFloat(I.marginRight);Object.assign(o.style,{position:"relative",height:B||M?`calc(100dvh - ${B+M}px)`:"100dvh",width:w||k?`calc(100vw - ${w+k}px)`:"100vw",boxSizing:"border-box",overflow:"hidden",scrollBehavior:"unset"}),o.scrollTop=r,o.scrollLeft=d,n.setAttribute("data-base-ui-scroll-locked",""),n.style.scrollBehavior="unset"}function A(){Object.assign(n.style,AC),Object.assign(o.style,mC),n.scrollTop=r,n.scrollLeft=d,n.removeAttribute("data-base-ui-scroll-locked"),n.style.scrollBehavior=RC}function R(){A(),cancelAnimationFrame(h),h=requestAnimationFrame(E)}return E(),l.addEventListener("resize",R),()=>{cancelAnimationFrame(h),A(),l.removeEventListener("resize",R)}}function jF(e){const{enabled:t=!0,mounted:n,open:o,referenceElement:l}=e,r=O.useMemo(()=>t&&(eT()||!BF()||wF()&&!FF(l)),[t,l]);Ji(()=>{if(n&&!o&&cy()){const d=od(l),h=d.body.style.userSelect,E=d.body.style.webkitUserSelect;return d.body.style.userSelect="none",d.body.style.webkitUserSelect="none",()=>{d.body.style.userSelect=h,d.body.style.webkitUserSelect=E}}},[n,o,l]),HF({isDisabled:!r}),Ji(()=>{if(!(!t||r))return gu+=1,gu===1&&(TC=zF(l)),()=>{gu-=1,gu===0&&TC()}},[t,r,l])}function YF(e){const t=O.useRef(""),n=O.useCallback(l=>{l.defaultPrevented||(t.current=l.pointerType)},[]);return{onClick:O.useCallback(l=>{if(l.detail===0){e(l,"keyboard");return}"pointerType"in l&&e(l,l.pointerType),e(l,t.current),t.current=""},[e]),onPointerDown:n}}function KF(e){const[t,n]=O.useState(null);!e&&t!==null&&n(null);const o=O.useCallback((d,h)=>{e||n(h)},[e,n]),{onClick:l,onPointerDown:r}=YF(o);return O.useMemo(()=>({openMethod:t,triggerProps:{onClick:l,onPointerDown:r}}),[t,l,r])}function VF(e){const{enabled:t,setLock:n,popupRef:o}=e,l=mi(n),r=O.useRef(t);Ji(()=>{if(!eT()||(t&&(r.current=!0),!r.current))return;const E=od(o.current).documentElement;if(t){const A=E.scrollLeft,R=E.scrollTop;return()=>{GF()===0&&(E.scrollLeft=A,E.scrollTop=R)}}},[t,o]);const d=mi(h=>{if(!eT())return;const E=Di(h.nativeEvent);Fh(E)&&(l(!1),setTimeout(()=>l(!0)))});return O.useMemo(()=>({floating:{onFocus:d,onClick:d}}),[d])}function WF(e){const{defaultOpen:t,dismissible:n,modal:o,onNestedDialogClose:l,onNestedDialogOpen:r,onOpenChange:d,open:h,onOpenChangeComplete:E}=e,[A,R]=U0({controlled:h,default:t,name:"DialogRoot",state:"open"}),T=O.useRef(null),S=O.useRef(null),I=O.useRef(null),[p,_]=O.useState(void 0),[b,v]=O.useState(void 0),[L,k]=O.useState(null),[M,B]=O.useState(null),[w,x]=O.useState(!0),{mounted:Q,setMounted:oe,transitionStatus:he}=k0(A),ue=mi((_e,ge,le)=>{d==null||d(_e,ge,le),R(_e)}),de=mi(()=>{oe(!1),E==null||E(!1)});Yh({enabled:!e.actionsRef,open:A,ref:T,onComplete(){A||de()}}),O.useImperativeHandle(e.actionsRef,()=>({unmount:de}),[de]);const $=FT({elements:{reference:L,floating:M},open:A,onOpenChange:(_e,ge,le)=>{ue(_e,ge,P0(le))}}),[ee,Y]=O.useState(0),P=ee===0,K=Nx($),W=Ax($),D=L0($,{outsidePressEvent:"mousedown",outsidePress(_e){if(_e.button!==0)return!1;const ge=Di(_e);if(P&&n){const le=ge;return o?le?[I.current,S.current].includes(le):!1:!0}return!1},escapeKey:P}),j=A&&o===!0,F=j&&w,G=VF({enabled:j,setLock:x,popupRef:T});jF({enabled:F,mounted:Q,open:A,referenceElement:M});const{getReferenceProps:J,getFloatingProps:Ee}=H0([K,W,D,G]);O.useEffect(()=>(r&&A&&r(ee),l&&!A&&l(),()=>{l&&A&&l()}),[A,l,r,ee]);const re=O.useCallback(_e=>{Y(_e+1)},[]),Ae=O.useCallback(()=>{Y(0)},[]),{openMethod:Re,triggerProps:Ce}=KF(A),xe=O.useCallback((_e={})=>J(Go(Ce,_e)),[J,Ce]);return O.useMemo(()=>({modal:o,setOpen:ue,open:A,titleElementId:p,setTitleElementId:_,descriptionElementId:b,setDescriptionElementId:v,onNestedDialogOpen:re,onNestedDialogClose:Ae,nestedOpenDialogCount:ee,openMethod:Re,mounted:Q,transitionStatus:he,getTriggerProps:xe,getPopupProps:Ee,setTriggerElement:k,setPopupElement:B,popupRef:T,backdropRef:S,internalBackdropRef:I,floatingRootContext:$}),[o,ue,A,p,b,re,Ae,ee,Re,Q,he,xe,Ee,$])}const XF=function(t){const{children:n,defaultOpen:o=!1,dismissible:l=!0,modal:r=!0,onOpenChange:d,open:h,actionsRef:E,onOpenChangeComplete:A}=t,R=oF(),T=WF({open:h,defaultOpen:o,onOpenChange:d,modal:r,dismissible:l,actionsRef:E,onOpenChangeComplete:A,onNestedDialogClose:R==null?void 0:R.onNestedDialogClose,onNestedDialogOpen:R==null?void 0:R.onNestedDialogOpen}),S=!!R,I=O.useMemo(()=>({...T,nested:S,onOpenChangeComplete:A}),[T,S,A]),p=O.useMemo(()=>({dismissible:l}),[l]);return u.jsx(OS.Provider,{value:I,children:u.jsx(bS.Provider,{value:p,children:n})})},qF={},ZF=O.forwardRef(function(t,n){const{render:o,className:l,id:r,...d}=t,{setTitleElementId:h}=ks(),E=ly(r);Ji(()=>(h(E),()=>{h(void 0)}),[E,h]);const A=O.useCallback((T={})=>Go({id:E},T),[E]),{renderElement:R}=Ac({propGetter:A,render:o??"h2",className:l,state:qF,ref:n,extraProps:d});return R()}),QF=O.forwardRef(function(t,n){const{render:o,className:l,disabled:r=!1,...d}=t,{open:h,setTriggerElement:E,getTriggerProps:A}=ks(),R=O.useMemo(()=>({disabled:r,open:h}),[r,h]),T=cc(n,E),{getButtonProps:S}=oy({disabled:r,buttonRef:T}),{renderElement:I}=Ac({render:o??"button",className:l,state:R,propGetter:p=>S(A(p)),extraProps:d,customStyleHookMapping:G0});return I()}),kn=JSON.parse(`[{"date":"9/20/25","changes":["[!] Skills can now be inserted in the middle of a timeline.","[!] Pressing backspace/delete now deletes only the selected skills.","Using the up and down arrow keys changes the selected skills.","Most actions can now be undone/redone with ctrl/cmd+z and ctrl/cmd+y.","Actions can now be copy/pasted both within and outside the site (see \\"Settings\\" at the bottom of the page for details).","Adjusted the appearance of some website elements on Firefox."],"changes_zh":["[!]技能现在可以插入到时间轴的任意位置。","[!]按backspace或delete键现在只删除选中的技能。","按 ↑ 或 ↓ 键会移动选中的位置。","按ctrl/cmd+z和ctrl/cmd+y现在可以撤销/重做大多数的时间轴操作。","现在可以在时间轴编辑器内或其他软件里复制和粘贴技能（详见下方“设置”部分的说明）。","调整了一些网站元素在火狐浏览器上的显示效果。"],"level":"major"},{"date":"9/14/25","changes":["Fixed a bug where certain config stats couldn't be changed."]},{"date":"9/12/25","changes":["Added an \\"apply\\" button to the configuration section, which can be used to change configuration without resetting the timeline."],"changes_zh":["在属性设置中增加了“应用”按钮，改变属性设置后不用重置时间轴。"]},{"date":"9/8/25","changes":["Fixed a crash when loading xivgear/etro links from a job different from the active one.","Fixed an issue where speed effects and certain sps/sks values were displayed incorrectly at level 70 (this was only a cosmetic issue in the configuration panel).","Changing jobs now uses the last saved stats you set for that job.","Creating a new timeline with a different job will now use one of The Balance's best-in-slot gear sets for the current patch."]},{"date":"9/2/25","changes":["Added different tincture images for each job.","Timelines with invalid skill names can now be loaded."]},{"date":"9/1/25","changes":["Added DSR P2 markers from Caro."]},{"date":"8/28/25","changes":["[BRD] Fixed typos in the names of Apex Arrow, The Wanderer's Minuet, and Rain of Death.","[BRD] Export to Ama's combat sim now tracks codas for Radiant Finale and Radiant Encore.","Updated export to Ama's combat sim to include hard-coded STR stats for healer/caster auto-attacks."]},{"date":"8/19/25","changes":["[WHM] Fixed a bug where Lillies would continue to generate even when at full stacks.","Fixed a bug where clicking on the timeline ruler would not immediately display historical state."],"level":"minor"},{"date":"8/17/25","changes":["Changed timeline slot buttons to trigger only if the mouse was both pressed and released on top of them."],"level":"minor"},{"date":"8/11/25","changes":["Made some internal adjustments to the implementation of click/drag selection and skill arrangements.","[WAR] Fixed a bug where Decimate consumed 2 stacks of Inner Release, and failed to grant Burgeoning Fury.","[WAR] Fixed Storm's Eye using an incorrect application delay.","[WAR] Extended the duration of the Inner Release, Primal Rend Ready, and Primal Ruination buffs to match in-game behavior.","[NIN] Fixed a bug where using Gust Slash without an active combo incorrectly advanced combo state.","[NIN] Fixed a bug where damage from Doton ticks was not computed.","[NIN] Fixed a bug where using Katon under Ten Chi Jin did not trigger Hollow Nozuchi."],"level":"minor"},{"date":"8/10/25","changes":["[NIN] Fixed a bug where Ninjutsu abilities were not buffed by Kunai's Bane and Dokumori."],"level":"minor"},{"date":"8/8/25","changes":["Added quick links to our GitHub, Bluesky, and (new) developer blog.","Added Bluesky, the dev blog, and the legacy game version site to the links in the \\"about\\" section."],"level":"minor"},{"date":"8/4/25","changes":["Updated for patch 7.3."],"changes_zh":["更新至7.3版本。"],"level":"major"},{"date":"8/3/25","changes":["The active timeline slot is now saved across page reloads.","Click and drag to rearrange skills, both in the visual timeline and timeline editor table.","Click and drag on the background of the visual timeline to select multiple skills.","Use the \\"drag lock\\" switch to the right of the display settings tabs to disable click+drag behavior."],"changes_zh":["选定的时间轴现在会在重新加载后保存。","在时间轴可视化窗口和下方的“时间轴编辑器“内，可以点击并拖动来选择多个技能。","可以通过拖动选中技能以改变技能顺序。","“显示设置”右边的“拖动锁”可以禁用拖动功能。"],"level":"major"},{"date":"7/27/25","changes":["Updated FPS adjustment preview tooltip to use GCD time instead of cast times."]},{"date":"7/26/25","changes":["[WHM][AST][SCH] Fixed a bug where Swiftcast's cooldown was set to 40s below level 100."]},{"date":"7/25/25","changes":["[SCH] Initial SCH implementation. Thanks to Caro for help with numbers and some mechanics.","That's every job now in the shell! Stay tuned for more features and improvements to come."],"changes_zh":["【学者】加了初步的支持。谢谢Caro帮助找数字和介绍职业机制。","所有的职业现在都包括在排轴器里了！请期待更多的功能和更大的进步。"],"level":"major"},{"date":"7/22/25","changes":["[DNC] Fixed a bug where Fountain and Bladeshower could grant Silken Flow when used without combo."]},{"date":"7/20/25","changes":["[VPR] Added initial support for VPR. Thanks to Verra for help testing.","[BLU] Using an action while Waning Nocturne or Diamondback are active now uses the action as soon as the debuff expires."],"changes_zh":["【蝰蛇剑士】 加了初步的支持。谢谢Verra帮助测试。","【青魔】在有\\"狂战士化的副作用\\"或\\"超硬化\\"状态下使用技能，现在会自动地等到状态结束后再播放。"],"level":"major"},{"date":"7/15/25","changes":["Fixed \\"real-time auto pause\\" display.","[GNB] Fixed a bug where Fated Circle broke combos."],"changes_zh":["修复了\\"实时(带自动暂停）\\"显示。","【绝抢战士】修复了命运之环会打断连击的问题。"],"level":"minor"},{"date":"7/14/25","changes":["[BLU] Fixed a bug where Apokalypsis and Phantom Flurry's potencies were incorrect.","[BLU] Fixed a bug where Surpanakha's 30-second cooldown was not applied."],"changes_zh":["【青魔】修复了\\"启示录\\"和\\"鬼宿脚\\"威力的错误。","【青魔】修复了\\"穿甲散弹\\"没有用30秒CD的问题。"],"level":"minor"},{"date":"7/10/25","changes":["[MNK] Now begins encounters with Formless Fist active by default.","[DRG][NIN] Fixed a bug where using combo actions out of sequence granted combo potency bonus.","[AST] Fixed Macrocosmos/Microcosmos."],"changes_zh":["【武士】现在会从战斗开始有\\"无相身形\\"。","【龙骑士】【忍者】修复了用错误的连击技能会给连击威力增加的问题。","【占星术士】修复了大宇宙和小宇宙。"],"level":"minor"},{"date":"7/8/25","changes":["[AST] Added initial support for AST.","[WHM] Addd initial support for WHM.","[SAM][NIN][MNK] GCD calculations in the configuration panel now account for jobs' natural speed buffs."],"changes_zh":["【占星术士】 加了初步的支持。","【白魔】 加了初步的支持。","【武士】【忍者】【武僧】属性设置里的GCD现在会使用职业固有的复唱时间缩短。"],"level":"major"},{"date":"7/5/25","changes":["[MNK] Added initial support for MNK."],"changes_zh":["【武僧】 加了初步的支持。"],"level":"major"},{"date":"6/25/25","changes":["Fixed a bug where timestamps would not appear for wait events in the timeline editor.","Fixed a bug where selecting a skill in the visual canvas did not cause the editor table to scroll to its location."],"level":"minor"},{"date":"6/24/25","changes":["[NIN] Added initial support for NIN."],"changes_zh":["【忍者】 加了初步的支持。"],"level":"major"},{"date":"6/19/25","changes":["[DRK] Added initial support for DRK."],"changes_zh":["【暗黑骑士】 加了初步的暗黑骑士支持。"],"level":"major"},{"date":"6/18/25","changes":["Fixed a bug where the \\"wait until timestamp\\" events would change times unexpectedly."],"changes_zh":["修复了\\"快进至\\"时间会意外地改变目标时间的问题。"],"level":"minor"},{"date":"6/17/25","changes":["Fixed timestamps not appearing in the timeline editor when a new skill is added.","Fixed skill selections ending on \\"wait\\" events not rendering correctly in the graphical timeline.","Fixed skill tooltips in the graphical timeline not displaying AoE potency."],"changes_zh":["修复了新加的技能在时间轴编辑器里不显示出时间戳的问题。","修复了选择在\\"快进至\\"结束不正确地在图形时间轴内显示出的问题。","修复了在图形时间轴内的技能工具提示没显示aoe威力的问题。"],"level":"minor"},{"date":"6/16/25","changes":["[BLU] Added support for Blue Mage."],"changes_zh":["【青魔】增加青魔支持。"],"level":"minor"},{"date":"6/6/25","changes":["[GNB][SGE] Chinese localization."],"changes_zh":["【绝枪战士】【贤者】汉化。"],"level":"minor"},{"date":"6/3/25","changes":["Added the ability to save invalid timelines on the visual canvas. Changes in the timeline editor now reflect in the graphical timeline as well.","The \\"jump to timestamp\\" and \\"wait for MP tick\\" buttons will now always look for the specified timestamp/next MP tick, even when actions are shifted in the timeline editor.","Added a \\"Clone timeline slot\\" button.","See our \\"known bugs\\" page on GitHub for limitations: https://github.com/xivintheshell/xivintheshell/wiki/Known-Bugs"],"changes_zh":["增加了保存有问题的时间轴的功能。时间轴编辑器里的变化现在会在图形时间轴内显示出。","《快进至指定时间》和《快进到跳蓝》的按钮会在使用时间轴编辑器后坚持寻找设定的时间或下一个跳蓝。","增加了《复制时间轴》按钮。","如果想知道已知问题，请查看GitHub网页：https://github.com/xivintheshell/xivintheshell/wiki/Known-Bugs"],"level":"major"},{"date":"5/29/25","changes":["[PLD] Chinese localization adjustments.","[SMN] Chinese localization; fix summon lock bar not showing progress."],"changes_zh":["【骑士】汉化补充。","【召唤师】汉化实装；修复召唤剩余时间进度条不显示的问题。"],"level":"minor"},{"date":"5/28/25","changes":["[PLD] Chinese localization first draft."],"changes_zh":["【骑士】汉化初稿。"],"level":"minor"},{"date":"5/27/25","changes":["[BRD][MCH][SMN] Adjusted AoE potencies to reflect patch 7.25."],"changes_zh":["【吟游诗人】【机工士】【召唤师】调整多目标技能威力至7.25版本的数值。"],"level":"minor"},{"date":"5/26/25","changes":["Fixed a bug where damage log CSV export didn't work (thanks ryxiv)."],"level":"minor"},{"date":"5/23/25","changes":["Adjusted the calculations for the effect of crit/DH party buffs on auto-crit/DH hits, like PCT's Hammer combo.","Fixed a bug with export to Ama's combat sim where Chain Stratagem and Dokumori would not apply to the boss."],"changes_zh":["调整了暴击和直击团辅对必直暴的技能（比如：绘灵法师的重锤连击）的影响。","Fixed a bug with export to Ama's combat sim where Chain Stratagem and Dokumori would not apply to the boss."],"level":"minor"},{"date":"5/18/25","changes":["Updated the site to automatically use dark mode if your system is set to use it. Manually using the theme selector overrides this.","[GNB] Fixed a typo where \\"Lightning Shot\\" was incorrectly called \\"Lightning Shock.\\"","[GNB] Updated the application delay of Trajectory from 0.22 to 0.66 to match the current version of the game."],"level":"minor"},{"date":"5/17/25","changes":["We've made some big updates to the tools we use to build XIV in the Shell. The site should work the same as before, but if you notice anything broken or slow, please let us know posthaste.","We're planning on adding some large features in the near feature, so we've also made the changelog more prominent in anticipation. Please look forward to it."],"changes_zh":["我们对制造XIV in the Shell的软件工具做了大更新。网站的操作应该和以前一样、如果您发现有任何功能有破坏或变慢了，请尽快通知我们。","因为我们准备在不久的将来内对排轴器增加大功能，所以我们先把更新日志变得更加引人注意。更大的公告也会有像这样的中文翻译。敬请期待。"],"level":"major"},{"date":"5/10/25","changes":["[PLD] Added initial support for PLD"],"changes_zh":["【骑士】 加了初步的骑士支持。"],"level":"major"},{"date":"5/9/25","changes":["[RPR] Fixed a bug where Regress wasn't usable in enshroud","[RPR] Fixed a bug where Grim Swathe was replaced with Lemure's Slice instead of Lemure's Scythe","[RPR] Fixed a bug where Perfectio was usable in enshroud","[RPR] Fixed a bug where Executioner's Gibbet/Gallows weren't replaced with Void/Cross Reaping while in enshroud","[SMN] Fixed a bug where Slipstream's initial hit falloff was displayed incorrectly in the DoT table (thanks omor1)","[SMN] Fixed the potency of Mountain Buster (was incorrectly listed as 170 instead of 160, thanks omor1)"]},{"date":"5/2/25","changes":["Changed Ama's combat sim export to disable auto-attacks for healer/caster jobs."]},{"date":"4/28/25","changes":["Refactored cooldown logic. Changes should not affect end users, but let us know if anything is off.","Added a few missing translations"]},{"date":"4/21/25","changes":["Updated compatibility with Ama's combat sim for newly-supported jobs."]},{"date":"4/17/25","changes":["[RPR] Added a button to gain +10 Soul Gauge to simulate a target dying with Death's Design active","[BRD] Fixed a bug where Iron Jaws checked the dot status at application time instead of confirmation time (thanks Yumiya)","[BRD] Fixed a bug where Empyreal Arrow applied repertoire at application time instead of confirmation time (also thanks Yumiya)"]},{"date":"4/13/25","changes":["Added English-language markers for M8S"]},{"date":"4/7/25","changes":["Added English-language markers for M7S"]},{"date":"4/6/25","changes":["Added English-language markers for M5S + M6S"]},{"date":"3/29/25","changes":["[BLM] Removed \\"outdated\\" status"]},{"date":"3/26/25","changes":["Added user survey link"]},{"date":"3/24/25","changes":["We have updated the site in accordance with the 7.2 patch notes. Goodbye to the Enochian timer o7","[BLM] will remain in \\"outdated\\" status until we have a change to play with the changes in-game.","Since most jobs received only potency changes, your old 7.1 plans should work, but as usual, please let us know if anything seems incorrect."]},{"date":"3/20/25","changes":["[DNC] Fixed an issue where the icons for Finishing Move Ready and Last Dance Ready were swapped, and an issue where Last Dance Ready was not consumed by Last Dance (thank you bluke)"]},{"date":"3/16/25","changes":["Fixed an issue where resource toggles were shown in the timeline editor with their internal keys rather than localized text.","Fixed mistakes in DoT effect override calculations.","In anticipation of patch 7.2, we're working on some changes to make it easier to migrate timelines after site or game changes. The following things have changed:","- Single-clicking an action will now try to use it as soon as the current animation lock/skill cooldown is over (this used to require double-clicking). If the action cannot be used, a wait is automatically added to the timeilne.","- In \\"manual\\" control mode, you no longer need to press space to advance past an action's animation lock (it will now advance automatically when a skill is used).","- Displayed wait durations are now always calculated from the end of the previous animation lock. Any existing timelines will automatically be adjusted--the shown wait times may be different, but the times where actions are used will remain the same.","- Skill sequence presets now include wait durations. This lets you load/save sequences that use late weaves or wait for MP ticks (assuming ticks still line up correctly).","As a consequence of these changes, you actually might now be able to load BLM timelines from 7.05/7.0 that previously were broken as a result of Despair becoming instant. Despair will still be instant and other buff usage will be unchanged, but the time between abilities should be correct.","These changes are very large, and while we've tested to make sure they won't break your existing timelines, there might still be some bugs that slipped through the cracks. As always, please reach out to us if you encounter any problems."]},{"date":"3/1/25","changes":["Make it so that you can only delete the currently active slot, to hopefully reduce the chance of accidentally deleting a slot when switching"]},{"date":"2/26/25","changes":["Updated the GCD formula because the old formula may be off by 0.01s when there is haste buff. Thank you Yuyuka for spotting the error. Note: old timelines (including timelines in browser localStorage) aren't affected; only newly created timelines use the new formula."]},{"date":"2/22/25","changes":["Added Queen Eternal markers by 小盐"]},{"date":"2/21/25","changes":["[BRD][GNB][SMN] Removed testing tag"]},{"date":"2/20/25","changes":["[SGE] Initial implementation for SGE","- Some rough edges still exist around Krasis' healing potency modification and Eukrasian shield handling.","- Basic functionality should be reasonably complete.","[RDM] Fixed a bug where Manafication could be used before combat"]},{"date":"2/16/25","changes":["[SAM] Fixed Hagakure only being usable at 3 sen"]},{"date":"2/15/25","changes":["[BLM] Fixed Manafont CD at lvl80 and below: should be 120s"]},{"date":"2/13/25","changes":["Updated English FRU tracks to more accurately reflect downtime between phases. We previously used the \\"death\\" event in a log as the end of a phase, but it turns out this is inaccurate as the last damage application to the boss occurs ~2 seconds before its recorded death.","- P1 to P2 untargetable duration increased by 2 seconds","- P2 to intermission untargetable duration decreased to align with the \\"crystals become targetable\\" mark","- Intermission to P3 downtime increased to match Gaia's attack killing the crystal","In order to not break existing timelines, the preset EN full fight track now treats P1 as dying 2 seconds before the end of the enrage cast. The start times of all phases are unaffected."]},{"date":"2/4/25","changes":["[SAM] Fixed AoE combo actions not ending the combo","[DRG] Added initial support for DRG"]},{"date":"2/2/25","changes":["[BRD][DNC] Fixed bonuses given from certain crit/DH buffs not applying in total potency calculations"]},{"date":"2/1/25","changes":["[WAR][SAM][RPR][MCH][DNC] Implemented localization for some recently added jobs"]},{"date":"1/27/25","changes":["[SMN] Added initial support for SMN"]},{"date":"1/26/25","changes":["[WAR][GNB] Fixed missing icon for tank LB3s"]},{"date":"1/18/25","changes":["[GNB] Added initial support for GNB"]},{"date":"1/17/25","changes":["Added \\"move end of selection to start of selection\\" button to the timeline editor"]},{"date":"1/12/25","changes":["[RPR] Fixed a bug where oGCDs would improperly consume Reaver/Executioner stacks"]},{"date":"1/8/25","changes":["[WAR] Fixed surging tempest text not showing up in potency modifier tooltip","[MCH] Fixed Overheated potency modifier not being applied"]},{"date":"1/5/25","changes":["Fixed a bug where multi-target spells lost their target counts when using the timeline editor"]},{"date":"1/4/25","changes":["Added support for multi-target abilities"]},{"date":"1/3/25","changes":["[WAR][SAM][RPR] Removed testing tag"]},{"date":"1/1/25","changes":["Added combined English FRU tracks"]},{"date":"12/28/24","changes":["[PCT] Fixed warning for Palette Gauge overcap"]},{"date":"12/24/24","changes":["[MCH] Added support for Flamethrower"]},{"date":"12/22/24","changes":["[BRD] Added initial support for BRD","Overhaul DoT tracking to provide better usage statistics","[BLM] Added High Thunder II"]},{"date":"12/20/24","changes":["Fixed stats tables not including party buff potencies for most skills","Removed flank/rear positional resources for non-melee jobs"]},{"date":"12/19/24","changes":["[WAR] Adjusted animation lock of Primal Rend","Fixed Down for the Count timing in FRU P4 (thanks xi12570)"]},{"date":"12/16/24","changes":["Limit breaks for all jobs!","[MCH][DNC] Removed testing tag","Updated \\"About this tool\\" section","More underlying implementation changes","[PCT] Made Hammer combo expire with Hammer Time buff (changed in 7.1)"]},{"date":"12/13/24","changes":["Fixed sometimes unable to use skills in manual mode with double click","[RPR] Added timer for Immortal Sacrifice","[RPR] Removed enhanced reapings whenever shroud is exited","[RPR] Separated cooldowns of Sacrificium and Lemure's Slice","[RPR] Fixed sks scaling","[WAR] Added initial WAR support"]},{"date":"12/12/24","changes":["Updated English FRU tracks and added P4 + P5"]},{"date":"12/8/24","changes":["Updated Chinese FRU tracks to latest (12/8 ver)","Make stats tables only include selected skills when there is selection"]},{"date":"12/7/24","changes":["Updated positional buff icons","Misc cleanups and optimizations (hey devs: rerun npm install)","[BLM] Fixed Retrace button not changing back to LL if LL is disabled when the buff drops"]},{"date":"12/5/24","changes":["Updated Chinese FRU tracks to latest (12/2 version)","Additional Chinese localization changes (preset lines; initial resource overrides section; many resource names)","New skill icon progress bar visuals 🎉"]},{"date":"12/4/24","changes":["Added English FRU P3 tracks by Yara","[RDM] Fixed Swiftcast being consumed before Dualcast when both are active"]},{"date":"12/2/24","changes":["Added English FRU P2 tracks by Yara","Fixed a bug where 'Load tracks starting at timestamp' did not accept some time formats","[RDM] Removed the 'testing' label"]},{"date":"12/1/24","changes":["Updated full FRU tracks in Chinese by 盐宝 & czmm"]},{"date":"11/30/24","changes":["[MCH] Fixed Scattergun's heat generation (thanks Kairos)","[PCT] Fixed Monochrome Tones appearing when synced to level 80 and other internal trait logic (thanks misterperson)"]},{"date":"11/29/24","changes":["[MCH] Fixed bugs with MCH Overheat consumption on AoE abilities (thanks FloatingGhost)"]},{"date":"11/28/24","changes":["Added some Chinese tracks (M1S-M4S, FRU before P2.5)"]},{"date":"11/27/24","changes":["Added the ability to override stacks to 0 for 1-stack resources that start present by default","Added preliminary FRU P1 tracks by Yara"]},{"date":"11/26/24","changes":["Added the ability to load marker tracks starting from a particular timestamp"]},{"date":"11/25/24","changes":["[RPR] Added initial RPR support"]},{"date":"11/24/24","changes":["[MCH] Added initial MCH support"]},{"date":"11/21/24","changes":["[SAM] Fixed a bug where Fuka haste was doubly applied","[SAM] Added GCD under Fuka in playback control"]},{"date":"11/20/24","changes":["[DNC] Added initial DNC support","[SAM] Added initial SAM support (thank you Sterling Sylva for the initial work)","Added support for skill speed in addition to spell speed"]},{"date":"11/17/24","changes":["[RDM] Fix Manafication CD (thanks 云青渔语)","[all casters] Fix Surecast duration: previously 10s, now 6.5s (ty erii)"]},{"date":"11/16/24","changes":["Make DET use main stat formula and default to 440","Add hyperlinks for xivgear and etro"]},{"date":"11/15/24","changes":["(thank you Yuyuka for reporting a bunch of RDM bugs)","[RDM] Added some additional warnings on unintended buff drops, overwrites, and combo breaks","[RDM] Fixed the duration of the Acceleration buff","[RDM] Fixed the MP costs of Veraero II/Verthunder II","[RDM] Fixed Manafication failing to interrupt combos","[RDM] Fixed Manafication being usable out of combat","[RDM] Fixed Enchanted Reprise clearing mana stacks","[RDM] Made Prefulgence and Vice of Thorns into button replacements"]},{"date":"11/14/24","changes":["(thank you Wan Shott for reporting a bunch of RDM bugs)","[RDM] Fixed bugs where Verfire and Grand Impact didn't grant correct mana","[RDM] Fixed a bug where it was possible to use un-enchanted Moulinet under certain incorrect conditions","mark newly-implemented jobs as in testing and display a warning message when using those jobs"]},{"date":"11/13/24","changes":["Fixed a bug where party buff potencies were not displayed","[PCT] Fixed a bug where using two hammer combos within 30s of each other caused the combo to break","[RDM] Fixed a bug where level synced RDM still received Grand Impact Ready from Acceleration","[RDM] Fixed a bug where Acceleration did not always grant a Verstone/Verfire proc","[RDM] Fixed a bug where certain role buffs were not being displayed on the hotbar","[RDM] Fixed a bug where buffs were overlapping the hotbar","[RDM] Fixed a bug where Contre Sixte's cooldown was improperly affected by traits","Removed debug and implementation notes sections (see repository wiki for implementation notes)"]},{"date":"11/12/24","changes":["Initial XIV in the Shell! Supporting patch 7.1 BLM and PCT, plus preliminary RDM"]}]`);function AR(){return kn[0].date}function SC(e){const t=Pt();return u.jsxs("div",{className:"changelogGroup",children:[u.jsx("div",{children:e.date}),u.jsx("div",{children:C({en:u.jsx(u.Fragment,{children:e.changes.map((n,o)=>u.jsx("div",{className:"changelogLine",style:{color:n.substring(1,5)==="BETA"?t.warning:t.text},children:n},o))}),zh:e.changes_zh!==void 0?u.jsx(u.Fragment,{children:e.changes_zh.map((n,o)=>u.jsx("div",{className:"changelogLine",style:{color:n.substring(1,5)==="BETA"?t.warning:t.text},children:n},o))}):void 0})})]})}const $F=`
.Backdrop {
  position: fixed;
  inset: 0;
  background-color: black;
  transition: opacity 50ms cubic-bezier(0.45, 1.005, 0, 1.005);

  &[data-starting-style],
  &[data-ending-style] {
	opacity: 0;
  }
}

.Popup {
  box-sizing: border-box;
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 50vw;
  height: 70vh;
  max-height: 70vh;
  overflow-y: scroll;
  margin-top: -2rem;
  padding-left: 1.5rem;
  padding-right: 1.5rem;
  transition: all 50ms cubic-bezier(0.45, 1.005, 0, 1.005);

  font-family: monospace;
  font-size: 13px;

  &[data-starting-style],
  &[data-ending-style] {
	opacity: 0;
	transform: translate(-50%, -50%) scale(0.9);
  }
}

.changelogGroup {
	margin-top: 1em;
	margin-bottom: 1em;
}

.changelogLine {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
	margin-left: 0.5em;
}
`;function JF(){let e,t,n={};const o=O.useRef(5),[l,r]=O.useState(!1),[d,h]=O.useState(!1),E=O.useContext(Ga)==="Light",A=Pt();O.useEffect(()=>{let I=bt("changelogLastRead"),p=bt("changelogLastReadChangeCount");!iL&&(I===null||p===null)&&(I="5/10/25",p="1");const _=I===null||p===null||I===kn[0].date&&p===kn[0].changes.length.toString();if(r(_),I!==null&&p!==null){if(!_){let b=0,v=!1;for(;b<kn.length-1;b++){if(I===kn[b].date){p!==kn[b].changes.length.toString()&&b++;break}v=v||kn[b].level==="major"}h(v),o.current=b}}else It("changelogLastRead",kn[0].date),It("changelogLastReadChangeCount",kn[0].changes.length.toString())},[]);const R=I=>{I||(o.current=5,l||(It("changelogLastRead",kn[0].date),It("changelogLastReadChangeCount",kn[0].changes.length.toString())),r(!0))};if(l)e=C({en:"Changelog",zh:"更新日志",ja:"更新履歴"}),t="•";else{const I=Pt();e=C({en:"Changelog (new updates"+(d?"!!":"")+")",zh:"更新日志（有变"+(d?"！！":"")+"）"}),t="!",d?n={color:I.warning,fontWeight:"bold"}:n={fontWeight:"bold"}}const T=u.jsx("div",{className:"clickable",children:u.jsxs("span",{style:n,children:[u.jsxs("span",{children:[t," "]}),u.jsx("span",{className:"clickableLinkLike",children:e})]})}),S=u.jsx(eL,{className:"dialogExit",style:{color:A.bgHighContrast}});return u.jsxs(u.Fragment,{children:[u.jsx("style",{children:$F}),u.jsxs(XF,{onOpenChange:R,children:[u.jsx(QF,{render:T,nativeButton:!1}),u.jsxs(OF,{children:[u.jsx(sF,{className:"Backdrop",style:{opacity:E?.2:.7}}),u.jsxs(CF,{className:"Popup visibleScrollbar",id:"changelogPopup",style:{backgroundColor:A.background,border:"1px solid "+A.bgMediumContrast,color:A.text},children:[u.jsx(ZF,{render:u.jsx("h3",{children:e})}),u.jsx(EF,{render:S,nativeButton:!1}),u.jsx(RF,{className:"Description",render:u.jsx(e3,{hiddenStartIndex:o.current,newChanges:!l})})]})]})]})]})}function e3(e){const t=[],n=[];for(let A=0;A<e.hiddenStartIndex;A++)t.push(SC(kn[A]));for(let A=e.hiddenStartIndex;A<kn.length;A++)n.push(SC(kn[A]));const o=C({en:e.newChanges?"New Changes":"Recent Changes",zh:e.newChanges?"新的更新":"最近的更新"}),l=u.jsxs("div",{style:{marginTop:10,marginBottom:10},children:[u.jsx("span",{style:{marginTop:10,marginBottom:10},children:u.jsx("b",{children:o})}),u.jsx("div",{style:{margin:10,paddingLeft:6},children:t.map((A,R)=>u.jsx("div",{children:A},R))})]}),[r,d]=O.useState(!1),h=C({en:"Older Changes",zh:"之前的更新"}),E=u.jsxs("div",{style:{marginTop:10,marginBottom:10},children:[u.jsx(Cs,{content:u.jsxs("span",{children:[u.jsx("span",{children:r?"- ":"+ "}),u.jsx("b",{children:h})]}),onClickFn:()=>d(!r)}),u.jsx("div",{style:{position:"relative",display:r?"block":"none"},children:u.jsxs("div",{style:{margin:10,paddingLeft:6,marginBottom:20},children:[u.jsx("div",{children:n.map((A,R)=>u.jsx("div",{children:A},R))}),u.jsxs("div",{children:["For older changelog entries before the BLM/PCT in the Shell rejoining, see ",u.jsx("b",{children:"About this site/Changelog"})," on the old sites: ",u.jsx("a",{target:"_blank",rel:"noreferrer",href:"https://miyehn.me/ffxiv-blm-rotation/",children:"BLM in the Shell"}),", ",u.jsx("a",{target:"_blank",rel:"noreferrer",href:"https://picto.zqsz.me/",children:"PCT in the Shell"})]})]})})]});return u.jsxs("div",{children:[l,E]})}const mR=Nu?"https://beta.xivintheshell.com":"https://xivintheshell.com",qE="https://github.com/xivintheshell/xivintheshell",tT="https://bsky.app/profile/xivintheshell.com",aT="https://blog.xivintheshell.com",dy="https://discord.com/channels/277897135515762698/1307922201726685236",RR="https://discord.gg/thebalanceffxiv",t3=()=>u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"paragraph",children:C({en:u.jsxs(u.Fragment,{children:[u.jsx("span",{children:"This tool was initially Black Mage in the Shell, "}),u.jsxs("span",{children:["ideated by ",u.jsx("b",{children:"Eshiya (Galahad)"})," and developed by ",u.jsx("b",{children:"miyehn"})," specifically for BLM during Endwalker since around February 2022."," "]}),u.jsx("span",{children:"After Dawntrail's release, it was expanded to support other jobs and is now maintained by a small team of developers:"})]}),zh:u.jsxs(u.Fragment,{children:[u.jsx("span",{children:"本工具起初是由加拉哈德构想、由miyehn开发的黑魔排轴器，于2022年2月开工，陪黑魔们走过了大半段6.x时期。"}),u.jsx("span",{children:"7.0发售后，它被重构并逐渐开始支持更多职业，现在的排轴器由多名开发共同维护："})]})})}),C({en:u.jsxs("ul",{children:[u.jsxs("li",{children:["Tool design and core systems: ",u.jsx("b",{children:"shanzhe"}),", ",u.jsx("b",{children:"miyehn"}),", ",u.jsx("b",{children:"Turtle"}),","," ",u.jsx("b",{children:"Akairyu"})]}),u.jsxs("li",{children:["BLM: ",u.jsx("b",{children:"shanzhe"}),", ",u.jsx("b",{children:"Akairyu"}),", ",u.jsx("b",{children:"Turtle"}),", ",u.jsx("b",{children:"miyehn"})]}),u.jsxs("li",{children:["PCT, RDM, SMN, DRK, NIN, MNK, WHM, AST, SCH: ",u.jsx("b",{children:"shanzhe"})]}),u.jsxs("li",{children:["SAM: ",u.jsx("b",{children:"Sterling"}),", ",u.jsx("b",{children:"shanzhe"})]}),u.jsxs("li",{children:["DNC, MCH, BRD, SGE: ",u.jsx("b",{children:"Akairyu"})]}),u.jsxs("li",{children:["RPR: ",u.jsx("b",{children:"Honey B. Lovely's Favorite Bee"})]}),u.jsxs("li",{children:["WAR: ",u.jsx("b",{children:"misterperson"})]}),u.jsxs("li",{children:["GNB, DRG, PLD: ",u.jsx("b",{children:"Sterling"})]}),u.jsxs("li",{children:["BLU: ",u.jsx("b",{children:"小铅笔"})]}),u.jsxs("li",{children:["VPR: ",u.jsx("b",{children:"shanzhe"}),", ",u.jsx("b",{children:"misterperson"})]}),u.jsxs("li",{children:["Framework for adding new jobs: ",u.jsx("b",{children:"shanzhe"})]}),u.jsxs("li",{children:["Chinese localization: ",u.jsx("b",{children:"miyehn"}),", ",u.jsx("b",{children:"Eshiya"}),", ",u.jsx("b",{children:"Yuyuka"}),", ",u.jsx("b",{children:"shanzhe"}),","," ",u.jsx("b",{children:"小盐"}),", ",u.jsx("b",{children:"卿落青"}),", ",u.jsx("b",{children:"久逺"}),", ",u.jsx("b",{children:"大猫"}),", ",u.jsx("b",{children:"洛洛可"}),", ",u.jsx("b",{children:"青木柒"})]})]}),zh:u.jsxs("ul",{children:[u.jsxs("li",{children:["工具设计和核心系统：",u.jsx("b",{children:"shanzhe"}),"、",u.jsx("b",{children:"miyehn"}),"、",u.jsx("b",{children:"Turtle"}),"、",u.jsx("b",{children:"Akairyu"})]}),u.jsxs("li",{children:["黑魔：",u.jsx("b",{children:"shanzhe"}),"、",u.jsx("b",{children:"Akairyu"}),"、",u.jsx("b",{children:"Turtle"}),"、",u.jsx("b",{children:"miyehn"})]}),u.jsxs("li",{children:["绘灵魔、赤魔、召唤、暗黑骑士、忍者、武僧、白魔、占星术士、学者：",u.jsx("b",{children:"shanzhe"})]}),u.jsxs("li",{children:["武士：",u.jsx("b",{children:"Sterling"}),"、",u.jsx("b",{children:"shanzhe"})]}),u.jsxs("li",{children:["舞者、机工、吟游诗人、贤者：",u.jsx("b",{children:"Akairyu"})]}),u.jsxs("li",{children:["钐镰客：",u.jsx("b",{children:"Honey B. Lovely's Favorite Bee"})]}),u.jsxs("li",{children:["战士：",u.jsx("b",{children:"misterperson"})]}),u.jsxs("li",{children:["绝抢战士、龙骑士、骑士：",u.jsx("b",{children:"Sterling"})]}),u.jsxs("li",{children:["青魔：",u.jsx("b",{children:"小铅笔"})]}),u.jsxs("li",{children:["蝰蛇剑士：",u.jsx("b",{children:"shanzhe"}),"、",u.jsx("b",{children:"misterperson"})]}),u.jsxs("li",{children:["添加新职业的程序框架：",u.jsx("b",{children:"shanzhe"})]}),u.jsxs("li",{children:["中文本地化：",u.jsx("b",{children:"miyehn"}),"、",u.jsx("b",{children:"加拉哈德"}),"、",u.jsx("b",{children:"鱼卡"}),"、",u.jsx("b",{children:"shanzhe"}),"、",u.jsx("b",{children:"小盐"}),"、",u.jsx("b",{children:"卿落青"}),"、",u.jsx("b",{children:"久逺"}),"、",u.jsx("b",{children:"大猫"}),"、",u.jsx("b",{children:"洛洛可"}),"、",u.jsx("b",{children:"青木柒"})]})]})}),u.jsx("div",{className:"paragraph",children:C({en:"And many thanks to Yara, Spider, Santa, players in 不打冰三攻略组, kiyozero, czmm, and other players and groups who contributed feature suggestions, timeline markers, bug reports, etc.",zh:"同时，感谢Yara、Spider、Santa、不打冰三攻略组成员、kiyozero、czmm等，以体验反馈、报bug、时间轴标记等形式为这个工具作出过无私贡献的玩家们。"})}),C({en:u.jsxs("div",{className:"paragraph",children:["If you have questions or would like to provide feedback, you can message in"," ",u.jsx("a",{target:"_blank",href:dy,rel:"noreferrer",children:"this channel in The Balance"})," ",'(requires the "Misc. Support" role). In case of sending a bug report, attaching the fight record (download "fight.txt" from the bottom or name it anything else) would be very helpful.']}),zh:u.jsxs("div",{className:"paragraph",children:[u.jsx("span",{children:"如果遇到bug或者有任何工具相关的问题和建议，都欢迎反馈给我们，可请不打冰三攻略组的黑魔们或鱼卡转达，或加miyehn的QQ（870340705，加时请注明来意）。"}),u.jsx("span",{children:"如果是反馈bug，最好把能够复现bug的战斗记录文件（从下方下载的fight.txt）一起发过来。"})]}),ja:u.jsx("div",{className:"paragraph",children:"[outdated (ja)] 質問、バグ報告、機能提案などがある場合は、Discord（miyehn）またはメール（ellyn.waterford@gmail.com）でお問い合わせください。 バグ報告の場合は、右側からダウンロードした「fight.txt」を添付していただくと助かります。"})})]});function a3(e){const t={marginBottom:5},n=Pt(),o=e.job,l=d=>u.jsx(bi,{text:d}),r=l(navigator.platform.includes("Mac")?"cmd":"ctrl");return u.jsxs("div",{children:[u.jsx(JF,{}),u.jsx(wr,{defaultShow:!0,title:"instructions",titleNode:u.jsxs("span",{children:[C({en:"Instructions ",zh:"使用说明 ",ja:"説明 "}),u.jsx(We,{topic:"expandable",content:C({en:"click me to expand or collapse",zh:"点击展开/折叠",ja:"クリックして開閉する"})})]}),content:u.jsxs("div",{children:[u.jsx("div",{className:"paragraph",children:u.jsx("b",{children:C({en:"General Usage",zh:"基本用法",ja:"使い方"})})}),C({en:u.jsxs("ul",{children:[u.jsxs("li",{style:t,children:["Set your stats in ",u.jsx("b",{children:"Config"})," on the right, then"," ",l("apply and reset"),"."]}),u.jsx("li",{style:t,children:"Click on a skill to use it at the selected point in the timeline. The simulation will always jump to when the last animation lock ends and the skill's cooldown becomes available."}),u.jsxs("li",{style:t,children:["Press ",l("u")," to delete the last added action (effective when not running in real-time). Use ",r,"+",l("z"),"and ",r,"+",l("y")," to undo/redo."]}),u.jsx("li",{style:t,children:"Click on a buff applied to self to remove it. Clicking on certain ground-targeted buffs like BLM's Ley Lines, DRK's Salt and Darkness, and SCH's Sacred Soil temporarily disables their effects. Clicking again re-enables them."}),u.jsx("li",{style:t,children:'Click and drag in the visual timeline or use the "Timeline Editor" tab at the bottom of the page to re-arrange skills.'})]}),zh:u.jsxs("ul",{children:[u.jsxs("li",{style:t,children:["在右边",u.jsx("b",{children:"属性设置"}),"里输入装备数据，然后点击"," ",l("应用并重置时间轴")," 。"]}),u.jsx("li",{style:t,children:"单击使用技能，如果CD还没转好，会自动等到转好然后重试。"}),u.jsxs("li",{style:t,children:["按 ",l("u")," 删除最后一个技能（实时模式下此操作无效）。按"," ",r,"+",l("z")," 或 ",r,"+",l("y")," 可撤销或重做。"]}),u.jsx("li",{style:t,children:"左键单击可以移除自己身上的buff。地面区域类的buff，像“黑魔纹”（如暗黑骑士的”腐秽大地“和学者的”野战治疗阵“），在单击关闭后可以被再次点击开启。"}),u.jsx("li",{style:t,children:"在时间轴可视化窗口和下方的“时间轴编辑器“内，可以通过拖动选中技能以改变技能顺序。"})]}),ja:u.jsxs("ul",{children:[u.jsxs("li",{style:t,children:["右側にある",u.jsx("b",{children:"設定"}),"でステータスをセットしてから",u.jsx(bi,{text:"適用とリセット"}),"をクリックしてください。"]}),u.jsx("li",{style:t,children:"実行したいアクションをクリックしてください。リキャストが戻ってきていないアクションをクリックすると使用可能な時間まで待って再実行します。"}),u.jsxs("li",{style:t,children:[u.jsx(bi,{text:"u"}),"を押すと最後に追加されたアクションを削除できます。"]}),u.jsx("li",{style:t,children:"黒魔紋以外のバフをクリックすると削除できます。黒魔紋はバフの有効無効を切り替えられます。"})]})}),u.jsx("div",{className:"paragraph",children:u.jsx("b",{children:C({en:"Timeline",zh:"时间轴",ja:"タイムライン"})})}),C({en:u.jsxs("ul",{children:[u.jsxs("li",{style:t,children:["Holding ",l("shift")," lets you scroll horizontally."]}),u.jsxs("li",{style:t,children:["Click to select/unselect a single skill on the timeline."," ",l("shift"),"+click or click/drag to select a sequence of skills."]}),u.jsxs("li",{style:t,children:["Use ",l("backspace")," or ",l("delete")," to delete the selected skill(s)."]}),u.jsxs("li",{style:t,children:["Use ",r,"+",l("c")," and ",r,"+",l("v")," to copy/paste skills."]}),u.jsx("li",{style:t,children:"Click on the timeline's ruler-like header to view historical game states. Click on somewhere else on the timeline to return to the most recent game state."})]}),zh:u.jsxs("ul",{children:[u.jsxs("li",{style:t,children:["按住 ",l("shift")," 时滑动鼠标滚轮可以横向滚动时间线。"]}),u.jsxs("li",{style:t,children:["单击选中时间轴上的单个技能，再次单击取消选中。在时间轴上框选，或在选中一个技能时按住 shift 点击另一个技能，会选中期间的所有操作。 ",l("shift")," ","点击另一个技能，会选中期间的所有操作。"]}),u.jsxs("li",{style:t,children:["按 ",l("backspace")," 或 ",l("delete")," 删除选中技能。"]}),u.jsxs("li",{style:t,children:["按 ",r,"+",l("c")," 或 ",r,"+",l("v")," ","复制或粘贴技能。"]}),u.jsx("li",{style:t,children:"选中某技能或者刻度上的某时间时，可以看到相应时间的职业资源状态。点击时间轴空白处取消，并回到最新的资源状态。"})]}),ja:u.jsxs("ul",{children:[u.jsxs("li",{style:t,children:[u.jsx(bi,{text:"shift"}),"を押しながらスクロールすると横スクロールできます。"]}),u.jsxs("li",{style:t,children:["タイムライン上のアクションをクリックすると選択できます。",u.jsx(bi,{text:"shift"}),"を押しながらクリックすると複数選択できます。"]}),u.jsxs("li",{style:t,children:[u.jsx(bi,{text:"backspace"}),"か",u.jsx(bi,{text:"delete"}),"を押すと選択中のアクションとそれ以降のアクションを全て削除します。"]}),u.jsxs("li",{style:t,children:["タイムラインの経過時間が表示されているヘッダー部分をクリックするとメインコントロールの枠が",u.jsx("b",{style:{color:"darkorange"},children:"オレンジ"}),"になり、その瞬間の状態を確認できます。 その間はアクションを実行できません。他の場所をクリックするとキャンセルされ通常モードに戻ります。"]})]})}),C({en:u.jsxs("div",{className:"paragraph",children:[u.jsx("span",{style:{color:n.fileDownload,cursor:"pointer"},children:u.jsx("u",{children:"[these]"})})," ","are file download links. Click to download, or right click to choose save location."]}),zh:u.jsxs("div",{className:"paragraph",children:[u.jsx("span",{style:{color:n.fileDownload,cursor:"pointer"},children:u.jsx("u",{children:"[这样的按钮]"})})," ","是文件下载链接，可以点击直接下载也可以右键另存为。"]}),ja:u.jsxs("div",{className:"paragraph",children:[u.jsx("span",{style:{color:n.fileDownload,cursor:"pointer"},children:u.jsx("u",{children:"[このように表示されている部分]"})}),"はダウンロードリンクです。クリックしてダウンロードするか右クリックで場所を指定してダウンロードできます。"]})}),C({en:u.jsxs("div",{className:"paragraph",children:["You can save/load fight records at the bottom, under the"," ",u.jsx("b",{children:"Import/Export"})," tab. Most edits are also automatically saved in your browser cache, so it's generally okay to refresh the page and not worry about losing progress."]}),zh:u.jsxs("div",{className:"paragraph",children:["工具最下方的 ",u.jsx("b",{children:"导入/导出"})," ","区域有链接可以保存/加载战斗记录。大部分编辑也都会被保存在浏览器缓存，所以一般情况下刷新网页也不会丢失数据。"]})}),C({en:u.jsxs("div",{className:"paragraph",children:["Hover over ",u.jsx(We,{topic:"sampleTips",content:"sample tip"})," ","everywhere to see more tips."]}),zh:u.jsxs("div",{className:"paragraph",children:["鼠标悬浮在各处的 ",u.jsx(We,{topic:"sampleTips",content:"我是一个说明"})," ","上查看更多使用说明。"]}),ja:u.jsxs("div",{className:"paragraph",children:[u.jsx(We,{topic:"sampleTips",content:"サンプルのヘルプテキストです"}),"をホバーするとヘルプテキストを確認できます。"]})}),u.jsx("div",{className:"paragraph",style:{marginTop:16},children:u.jsx(wr,{title:"Troubleshoot",titleNode:C({en:u.jsx("b",{children:"troubleshoot"}),zh:u.jsx("b",{children:"常见问题"}),ja:u.jsx("b",{children:"トラブルシューティング"})}),content:u.jsxs(u.Fragment,{children:[C({en:u.jsxs("div",{children:[u.jsx("div",{className:"paragraph",children:"I can't guarantee that my updates are always backward compatible. If your fight record files aren't loading properly but you don't understand why, contact me and I'll try my best to help."}),u.jsxs("div",{className:"paragraph",children:["If the browser cache is somehow messed up (likely due to invalid game states), this is how to reset it:",u.jsx("br",{}),"Enter this tool from"," ",u.jsx("b",{children:mR+"?{command}"})," replacing"," ",u.jsx("b",{children:"{command}"})," with one of the following:",u.jsxs("ul",{children:[u.jsxs("li",{style:t,children:[u.jsx("b",{children:"resetResourceOverrides"}),": delete all resource overrides and all actions on the current timeline."]}),u.jsxs("li",{style:t,children:[u.jsx("b",{children:"resetAll"}),": delete all browser-cached settings."]})]})]})]}),zh:u.jsxs("div",{children:[u.jsx("div",{className:"paragraph",children:"我无法保证每次更新都能兼容已有的战斗记录文件。如果你的战斗记录无法被正常导入但你不清楚原因，可以联系我，我会尽力帮一起看。"}),u.jsxs("div",{className:"paragraph",children:["如果浏览器缓存因不明原因出问题（比如预设了刚打完绝望满蓝这样的“非法状态”），可尝试用以下方法重置浏览器缓存：",u.jsx("br",{}),"用以下链接进入本工具：",u.jsx("b",{children:mR+"?{command}"}),"，然后把",u.jsx("b",{children:"{command}"}),"替换成以下两个指令之一：",u.jsxs("ul",{children:[u.jsxs("li",{style:t,children:[u.jsx("b",{children:"resetResourceOverrides"}),": 删除当前时间线上的所有资源预设和技能"]}),u.jsxs("li",{style:t,children:[u.jsx("b",{children:"resetAll"}),": 删除所有本工具相关的浏览器缓存"]})]})]})]}),ja:u.jsxs("div",{children:[u.jsx("div",{className:"paragraph",children:"後方互換性があるとは限りません。保存したファイルが正しく読み込まれず、その理由がわからない場合はお問い合わせください。できる限りお手伝いします。"}),u.jsxs("div",{className:"paragraph",children:["ブラウザのキャッシュが何らかの理由で壊れている場合、次の方法でリセットできます。",u.jsx("br",{}),u.jsx("b",{children:mR+"?{command}"})," にアクセスし、",u.jsx("b",{children:"{command}"})," ","を以下のいずれかに置き換えます：",u.jsxs("ul",{children:[u.jsxs("li",{style:t,children:[u.jsx("b",{children:"resetResourceOverrides"}),": 全てのリソースとタイムライン上のアクションを上書きします。"]}),u.jsxs("li",{style:t,children:[u.jsx("b",{children:"resetAll"}),": 全てのブラウザキャッシュを削除します。"]})]})]})]})}),u.jsxs("div",{children:[C({en:"Or just: ",zh:"或者直接："}),u.jsx("button",{className:"dangerButton",onClick:()=>{DC(),window.location.reload()},children:C({en:"[DANGER!] clear browser cache and reload",zh:"[谨慎操作] 清除缓存并刷新",ja:"[キケン！] ブラウザキャッシュをクリアしてリロード"})})]})]})})})]})}),u.jsx(wr,{defaultShow:!1,title:"About this tool",titleNode:C({en:"About this tool",zh:"关于",ja:"このツールについて"}),content:u.jsxs("div",{children:[u.jsx("div",{className:"paragraph",children:C({en:"This is a FFXIV simulator & rotation planner.",zh:"是个FF14模拟器/排轴工具。",ja:"FF14のスキルローテーションシミュレーターです。"})}),t3(),u.jsx("div",{className:"paragraph",children:C({en:"Some links:",zh:"一些链接：",ja:"リンク集"})}),C({en:u.jsxs("ul",{children:[u.jsx("li",{children:u.jsx("a",{href:qE,children:"Github repository"})}),u.jsxs("li",{children:[u.jsx("a",{href:tT,children:"Bluesky account"})," and our"," ",u.jsx("a",{href:aT,children:"developer blog"})]}),u.jsxs("li",{children:[u.jsx("a",{href:"https://xivintheshell.github.io/legacy/",children:"XIV in the Shell (Legacy)"}),": a snapshot of this tool at the end of the previous major game patch (currently 7.25)."]}),u.jsxs("li",{children:[u.jsx("a",{href:"https://miyehn.me/ffxiv-blm-rotation-endwalker/",children:"Black Mage in the Shell (Endwalker)"}),": a snapshot of this tool at the end of Endwalker. It also contains some notable fight plans from Endwalker, as memoir."]}),u.jsxs("li",{children:[u.jsx("a",{href:"https://spide-r.github.io/ffxiv-blm-rotation/",children:"Black Mage in the Bozjan Shell"}),": a variation for Save the Queens areas, created by"," ",u.jsx("b",{children:"A'zhek Silvaire @ Zalera"})]}),u.jsx("li",{children:u.jsx("a",{href:"https://na.finalfantasyxiv.com/jobguide/battle/",children:"Official FFXIV job guides"})}),u.jsxs("li",{children:["The Balance's community"," ",u.jsx("a",{href:"https://www.thebalanceffxiv.com/",children:"job guides"})," and"," ",u.jsx("a",{href:RR,children:"Discord"})]})]}),zh:u.jsxs("ul",{children:[u.jsx("li",{children:u.jsx("a",{href:qE,children:"Github页面"})}),u.jsxs("li",{children:[u.jsx("a",{href:tT,children:"蓝天页面"}),"和我们的",u.jsx("a",{href:aT,children:"开发博客"}),"（英文）"]}),u.jsxs("li",{children:[u.jsx("a",{href:"https://xivintheshell.github.io/legacy/",children:"遗留版排轴器"}),"，最近的过去版本FF14排轴器（现在用7.25版本）。"]}),u.jsxs("li",{children:[u.jsx("a",{href:"https://miyehn.me/ffxiv-blm-rotation-endwalker/",children:"6.x版排轴器"}),"，历史版本黑魔排轴器。那里也公开展示着一些6.x时期的轴作为纪念。"]}),u.jsxs("li",{children:[u.jsx("a",{href:"https://spide-r.github.io/ffxiv-blm-rotation/",children:"博兹雅版排轴器（Black Mage in the Bozjan Shell）"}),": 本工具的博兹雅/天佑女王版。制作者："," ",u.jsx("b",{children:"A'zhek Silvaire @ Zalera"})]}),u.jsx("li",{children:u.jsx("a",{href:"https://na.finalfantasyxiv.com/jobguide/battle/",children:"官方各职业介绍（英文）"})}),u.jsxs("li",{children:["The Balance",u.jsxs("a",{href:"https://www.thebalanceffxiv.com/",children:[" ","玩家社区攻略（英文）"]}),"和 ",u.jsx("a",{href:RR,children:"Discord服务器"})]})]}),ja:u.jsx("ul",{children:u.jsxs(u.Fragment,{children:[u.jsx("li",{children:u.jsx("a",{href:qE,children:"Github repository"})}),u.jsxs("li",{children:[u.jsx("a",{href:"https://spide-r.github.io/ffxiv-blm-rotation/",children:"Black Mage in the Bozjan Shell"}),": 南方ボズヤ戦線向けのツール。作者：",u.jsx("b",{children:"A'zhek Silvaire @ Zalera"})]}),u.jsx("li",{children:u.jsx("a",{href:"https://na.finalfantasyxiv.com/jobguide/blackmage/",children:"Official FFXIV black mage job guide"})}),u.jsxs("li",{children:[u.jsxs("a",{target:"_blank",href:RR,rel:"noreferrer",children:[o," resources channel on The Balance"]})," ","（ぜひDiscordサーバーに参加してください。）"," "]})]})})})]})})]})}function n3(){const e=O.useContext(Ga),t=Cl(e,"text");return u.jsxs("div",{style:{display:"inline-block",fontSize:16},children:[u.jsx("style",{children:`
		.linkOption {
			display: inline-block;
			cursor: pointer;
			vertical-align: top;
			margin-top: 1px;
		}
		.linkOption:hover {
			border-bottom: 1px solid;
		}
		`}),u.jsxs("div",{style:{display:"inline-block"},children:[u.jsx(Hr.Provider,{value:{color:t,className:"linkOption"},children:u.jsx("a",{href:tT,title:C({en:"Bluesky",zh:"蓝天"}),children:u.jsx(XM,{})})}),"|",u.jsx(Hr.Provider,{value:{color:t,className:"linkOption"},children:u.jsx("a",{href:qE,title:C({en:"GitHub",zh:"GitHub"}),children:u.jsx(qM,{})})}),"|",u.jsx(Hr.Provider,{value:{color:t,className:"linkOption"},children:u.jsx("a",{href:aT,title:C({en:"Blog",zh:"博客"}),children:u.jsx(ZM,{})})})]})]})}var i3={};let Dh=e=>{},yh=e=>{},vh=e=>{};function o3(e){if(e==="resetAll")DC();else if(e==="resetResourceOverrides"){const t=bt("gameRecord");for(let n=0;n<yi;n++){let o=bt("gameRecord"+n.toString());if(n===0&&o===null&&t!==null&&(o=t),o!==null){const l=JSON.parse(o);console.log(l),l.config&&(l.config.initialResourceOverrides=[]),l.actions=[],It("gameRecord"+n.toString(),JSON.stringify(l))}}}else e!==void 0&&console.log("unrecognized command '"+e+"'")}function l3(e){return u.jsx("div",{style:{flex:3,height:e.height,marginLeft:6,position:"relative",verticalAlign:"top"},children:u.jsx(NO,{uniqueName:"mainConfig",content:[{titleNode:C({en:"Config",zh:"属性设置"}),contentNode:u.jsx(p2,{})},{titleNode:C({en:"Control",zh:"操作设置"}),contentNode:u.jsx(I2,{})}],collapsible:!1,scrollable:!0,height:e.height,defaultSelectedIndex:0})})}function IC(e){const t=e.color??Pt().accent;return u.jsx("div",{style:{display:e.hidden===!0?"none":"block",color:t,border:"1px solid "+t,borderRadius:4,padding:"10px 10px 0 10px"},children:e.children})}const _C=Nu?"[BETA] ":"";class s3 extends rn.Component{constructor(n){super(n);Z(this,"controlRegionRef");Z(this,"gameplayKeyCapture");Z(this,"setColorTheme");Z(this,"state");o3(n.command),this.state={job:N.getActiveJob(),hasFocus:!1,historical:!1,realTime:!1,controlRegionHeight:0,colorTheme:FC()},this.controlRegionRef=rn.createRef(),this.gameplayKeyCapture=o=>{N.handleKeyboardEvent(o)},Dh=o=>{this.setState({job:o});const l=document.querySelector("link[rel~='icon']");l&&(Nu?l.href="/favicons/beta.ico":o in ft?l.href="/favicons/"+o.toString().toLocaleLowerCase()+".ico":l.href=i3.PUBLIC_URL+"/favicon.ico");const r=document.getElementById("pageTitle");r&&(r.text=`${_C}XIV in the Shell (${o})`)},yh=o=>{this.setState({realTime:o})},vh=o=>{this.setState({historical:o})},this.setColorTheme=o=>{o!==this.state.colorTheme&&(N.updateAllDisplay(),this.setState({colorTheme:o}),It("colorTheme",o))}}componentDidMount(){N.tryAutoLoad(),N.updateAllDisplay(),this.controlRegionRef.current&&new ResizeObserver(()=>{var o;const n=((o=this.controlRegionRef.current)==null?void 0:o.clientHeight)??0;this.setState({controlRegionHeight:n})}).observe(this.controlRegionRef.current)}componentWillUnmount(){Dh=n=>{},yh=n=>{},vh=n=>{}}render(){const n=Hi(this.state.colorTheme),o={height:"100%",accentColor:n.accent,fontFamily:"monospace",fontSize:13,color:n.text,backgroundColor:n.background,display:"flex",flexDirection:"column"};let l;this.state.historical?l="2px solid "+n.historical:this.state.hasFocus?this.state.realTime?l="2px solid "+n.realTime:l="2px solid "+n.accent:l="1px solid "+n.bgMediumContrast;const r={marginBottom:"5px"},d=u.jsx("div",{style:{flex:7,display:"inline-block",position:"relative"},children:u.jsxs("div",{onFocus:()=>{this.setState({hasFocus:!0})},onBlur:()=>{this.setState({hasFocus:!1})},style:{display:"inline-block",padding:8,outline:l},tabIndex:-1,ref:this.controlRegionRef,children:[u.jsx(BO,{}),u.jsx($0,{})]})}),h=window.innerWidth>1024;return u.jsxs("div",{style:{position:"fixed",top:0,bottom:0,left:0,right:0,outline:"none"},tabIndex:-1,onKeyDown:this.gameplayKeyCapture,children:[u.jsx("style",{children:`
				@supports selector(::-webkit-scrollbar) {
					.visibleScrollbar::-webkit-scrollbar {
						appearance: none;
						background-color: ${n.bgLowContrast};
						height: 8px;
						width: 5px;
					}
					.visibleScrollbar::-webkit-scrollbar-thumb {
						background-color: ${n.bgHighContrast};
					}
					.invisibleScrollbar::-webkit-scrollbar {
						appearance: none;
						background-color: clear;
						height: 8px;
						width: 5px;
					}
					.invisibleScrollbar::-webkit-scrollbar-thumb {
						background-color: ${n.bgHighContrast};
					}
				}
				@supports not selector(::-webkit-scrollbar) {
					.visibleScrollbar {
						scrollbar-color: ${n.bgHighContrast} ${n.bgLowContrast};
						scrollbar-width: thin;
					}
					.invisibleScrollbar {
						scrollbar-width: none;
					}
				}
				a {
					color: ${n.accent};
				}
				b, h1, h2, h3, h4 {
					color: ${n.emphasis};
				}
				p {
					margin-block-start: 10px;
					margin-block-end: 10px;
				}
				p:first-child {
					margin-block-start: 0px;
				}
				::selection {
					background: rgba(147, 112, 219, 0.4);
				}
				option, select {
					color: ${n.text};
					background-color: ${n.background};
				}
				button, input[type="submit"], ::-webkit-file-upload-button {
					color: ${n.text};
					background-color: ${n.bgLowContrast};
					border: 1px solid ${n.bgHighContrast};
				}
				input[type="radio"] {
					appearance: none;
					width: 1em;
					height: 1em;
					border: 1px solid ${n.bgHighContrast};
					border-radius: 50%;
					background-clip: content-box;
					padding: 2px;
				}
				input[type="radio"]:checked {
					background-color: ${n.accent};
				}
				input[type="checkbox"] {
					appearance: none;
					width: 1em;
					height: 1em;
					border: 1px solid ${n.bgHighContrast};
					border-radius: 1px;
					background-clip: content-box;
					padding: 2px;
				}
				input[type="checkbox"]:checked:after {
					content: '\\2714';
					color: ${n.accent};
					position: absolute;
					font-size: 22px;
					top: -6px;
					left: -2px;
				}
				input[type="range"] {
					appearance: none;
					background-color: transparent;
					border: 1px solid ${n.bgHighContrast};
					vertical-align: middle;
					height: 0.9em;
					border-radius: 0.45em;
					overflow: hidden;
					padding: 0.05em;
				}
				input[type="range"]::-webkit-slider-thumb {
					appearance: none;
					background-color: ${n.accent};
					width: 0.8em;
					height: 0.8em;
					border-radius: 0.4em;
				}
				.help-tooltip {
				    color: ${n.text};
				    background-color: ${n.tipBackground};
				    opacity: 0.98;
				    max-width: 300px;
				    outline: 1px solid ${n.bgHighContrast};
				    transition: none;
				    font-size: 100%;
				    z-index: 10;
				}
				button:disabled {
					background-color: ${n.background};
				}
			`}),u.jsx(Ga.Provider,{value:this.state.colorTheme,children:u.jsxs("div",{style:o,id:"globalHelpTooltipAnchor",children:[u.jsx("div",{style:{flex:1,overflowY:"scroll",overscrollBehaviorY:"contain"},children:u.jsxs("div",{style:{position:"relative",maxWidth:1060,margin:"0 auto",marginTop:40,display:"grid"},children:[u.jsxs("div",{style:{position:"absolute",display:"flex",flexWrap:"wrap",justifySelf:"right",justifyContent:"space-between",alignItems:"flex-start",gap:"1.4em"},children:[h&&u.jsx(n3,{}),u.jsx(uU,{}),u.jsx(oU,{setColorTheme:this.setColorTheme})]}),u.jsxs("div",{children:[u.jsxs("h3",{style:{marginTop:0,marginBottom:6},children:[_C,"XIV in the Shell"]}),C({en:u.jsxs("div",{style:{marginBottom:16},children:["Last updated: ",AR()," (see ",u.jsx("b",{children:"Changelog"}),")"]}),zh:u.jsxs("div",{style:{marginBottom:16},children:["最近更新（月日年）：",AR(),"（详见",u.jsx("b",{children:"更新日志"}),"）"]}),ja:u.jsxs("div",{style:{marginBottom:16},children:["最終更新日：",lU(AR()),"（",u.jsx("b",{children:"更新履歴"}),"を参照）（",u.jsx("a",{href:"https://coda.io/d/_d-N3WFoMZ8e/Black-Mage-in-the-Shell_suRLF",children:"ロードマップ"}),"）"]})}),nL()?u.jsx("div",{style:{margin:"10px 0",padding:"10px",border:"1px solid "+n.warning,color:n.warning,borderRadius:4},children:C({en:u.jsxs("div",{children:["NOTE: Your browser cache contains data from BLM in the Shell before it's updated for Dawntrail. Visit the Endwalker archive at"," ",u.jsx("a",{style:{color:n.warning},href:"https://miyehn.me/ffxiv-blm-rotation-endwalker",children:"miyehn.me/ffxiv-blm-rotation-endwalker"})," ","to access and automatically re-save it. Once you do that, this notice will also go away."]}),zh:u.jsxs("div",{children:["提示：你的浏览器缓存里有排轴器更新到7.0前的数据，它们在这里已经不可用。请访问6.0历史版本（链接：",u.jsx("a",{style:{color:n.warning},href:"https://miyehn.me/ffxiv-blm-rotation-endwalker",children:"miyehn.me/ffxiv-blm-rotation-endwalker"}),"），数据会在那边被重新自动保存。访问过一次后，这个提示也会消失。"]})})}):void 0,Nu&&u.jsx(IC,{color:n.warning,children:C({en:u.jsxs("div",{style:{marginBottom:"10px"},children:[u.jsx("span",{children:u.jsx("b",{style:{color:n.warning},children:"You're currently using the BETA version of XIV in the Shell."})}),u.jsxs("ul",{children:[u.jsx("li",{style:r,children:"Things may break in unexpected ways at any time. Use at your own peril, and make sure to export in-progress files frequently."}),u.jsx("li",{style:r,children:"Application data is not shared with the main site. Anything you do here stays here. Files created on the BETA site may not work on the main site, but files made on the main site should be importable here (if they are not, please report this as a bug)."}),u.jsx("li",{style:r,children:"If the page becomes un-loadable, please contact us and tell us what your last actions on the site were, and we can help you debug what went wrong. You can also try resetting your browser's localStorage data for beta.xivintheshell.com."}),u.jsxs("li",{style:r,children:["To report an issue, you can contact us on Discord in The Balance (",u.jsx("a",{href:dy,children:"#xiv_in_the_shell_support"}),"), or file an issue on"," ",u.jsx("a",{href:"https://github.com/xivintheshell/xivintheshell/issues",children:"our GitHub"}),"."]})]})]}),zh:u.jsxs("div",{style:{marginBottom:"10px"},children:[u.jsx("span",{children:u.jsx("b",{style:{color:n.warning},children:"您正在使用《XIV in the Shell》的测试版（BETA）。"})}),u.jsxs("ul",{children:[u.jsx("li",{style:r,children:"此排轴器随时可能会意外崩溃。请自行承担使用风险、注意经常导出编辑中的文件。"}),u.jsx("li",{style:r,children:"BETA版与主排轴器网站不共享应用程序数据。在BETA网站上创建的文件不一定能在主网站上导入，但主网站上创建的文件应该能在这里导入（如果不能导入，请报告为bug）。"}),u.jsx("li",{style:r,children:"如果遇到网站无法加载的情况，请反馈给我们，并告诉我们出问题前您最后进行的操作，我们可以帮您排查问题。也可以自己尝试重置beta.xivintheshell.com的localStorage数据。"}),u.jsxs("li",{style:r,children:["如果想联系我们给反馈，可请不打冰三攻略组的黑魔们或鱼卡转达，或加miyehn的QQ（870340705，加时请注明来意），或直接到",u.jsx("a",{href:"https://github.com/xivintheshell/xivintheshell/issues",children:"GitHub"}),"仓库提issue。"]})]})]})})}),Nu&&u.jsx("div",{style:{margin:"10px"}}),u.jsx(a3,{job:this.state.job}),u.jsx(wr,{defaultShow:!0,title:"7-2-user-survey",titleNode:u.jsx("span",{children:C({en:"7.2 User Survey",zh:"7.2用户体验调查"})}),content:u.jsx(IC,{children:C({en:u.jsx(u.Fragment,{children:u.jsxs("p",{children:["Help us improve XIV in the Shell! Please take our user survey:"," ",u.jsx("b",{children:u.jsx("a",{target:"_blank",rel:"noreferrer",href:"https://forms.gle/eKVygxxZVd894323A",children:"https://forms.gle/eKVygxxZVd894323A"})})]})}),zh:u.jsx(u.Fragment,{children:u.jsxs("p",{children:["帮我们改进排轴器！请参加我们的用户体验调查："," ",u.jsx("b",{children:u.jsx("a",{target:"_blank",rel:"noreferrer",href:"https://www.wjx.cn/vm/mQ1gV2b.aspx",children:"https://www.wjx.cn/vm/mQ1gV2b.aspx"})})]})})})})})]}),u.jsxs("div",{style:{display:"flex",flexDirection:"row",position:"relative",marginBottom:"20px"},children:[d,u.jsx(l3,{height:this.state.controlRegionHeight})]}),u.jsx(EP,{}),u.jsx("hr",{style:{margin:"30px 0px",border:"none",borderTop:"1px solid "+n.bgHighContrast}}),u.jsx(jD,{})]})}),u.jsx(iF,{})]})})]})}}const r3=BM.createRoot(document.getElementById("root")),c3=new URLSearchParams(document.location.search),gC=Array.from(c3.keys());r3.render(u.jsx(s3,{command:gC.length>0?gC[0]:void 0}));
