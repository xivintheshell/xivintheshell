var m1=Object.defineProperty;var SN=e=>{throw TypeError(e)};var A1=(e,t,n)=>t in e?m1(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var re=(e,t,n)=>A1(e,typeof t!="symbol"?t+"":t,n),gR=(e,t,n)=>t.has(e)||SN("Cannot "+n);var te=(e,t,n)=>(gR(e,t,"read from private field"),n?n.call(e):t.get(e)),Fe=(e,t,n)=>t.has(e)?SN("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Le=(e,t,n,a)=>(gR(e,t,"write to private field"),a?a.call(e,n):t.set(e,n),n),Oe=(e,t,n)=>(gR(e,t,"access private method"),n);function R1(e,t){for(var n=0;n<t.length;n++){const a=t[n];if(typeof a!="string"&&!Array.isArray(a)){for(const s in a)if(s!=="default"&&!(s in e)){const c=Object.getOwnPropertyDescriptor(a,s);c&&Object.defineProperty(e,s,c.get?c:{enumerable:!0,get:()=>a[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function n(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerPolicy&&(c.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?c.credentials="include":s.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(s){if(s.ep)return;s.ep=!0;const c=n(s);fetch(s.href,c)}})();function QT(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function T1(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function a(){return this instanceof a?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(a){var s=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(n,a,s.get?s:{enumerable:!0,get:function(){return e[a]}})}),n}var IR={exports:{}},ju={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gN;function S1(){if(gN)return ju;gN=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(a,s,c){var d=null;if(c!==void 0&&(d=""+c),s.key!==void 0&&(d=""+s.key),"key"in s){c={};for(var f in s)f!=="key"&&(c[f]=s[f])}else c=s;return s=c.ref,{$$typeof:e,type:a,key:d,ref:s!==void 0?s:null,props:c}}return ju.Fragment=t,ju.jsx=n,ju.jsxs=n,ju}var IN;function g1(){return IN||(IN=1,IR.exports=S1()),IR.exports}var l=g1(),_R={exports:{}},zu={},pR={exports:{}},NR={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _N;function I1(){return _N||(_N=1,function(e){function t(M,Y){var ie=M.length;M.push(Y);e:for(;0<ie;){var le=ie-1>>>1,v=M[le];if(0<s(v,Y))M[le]=Y,M[ie]=v,ie=le;else break e}}function n(M){return M.length===0?null:M[0]}function a(M){if(M.length===0)return null;var Y=M[0],ie=M.pop();if(ie!==Y){M[0]=ie;e:for(var le=0,v=M.length,z=v>>>1;le<z;){var q=2*(le+1)-1,F=M[q],ae=q+1,K=M[ae];if(0>s(F,ie))ae<v&&0>s(K,F)?(M[le]=K,M[ae]=ie,le=ae):(M[le]=F,M[q]=ie,le=q);else if(ae<v&&0>s(K,ie))M[le]=K,M[ae]=ie,le=ae;else break e}}return Y}function s(M,Y){var ie=M.sortIndex-Y.sortIndex;return ie!==0?ie:M.id-Y.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;e.unstable_now=function(){return c.now()}}else{var d=Date,f=d.now();e.unstable_now=function(){return d.now()-f}}var h=[],m=[],R=1,T=null,S=3,g=!1,_=!1,I=!1,D=!1,O=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function H(M){for(var Y=n(m);Y!==null;){if(Y.callback===null)a(m);else if(Y.startTime<=M)a(m),Y.sortIndex=Y.expirationTime,t(h,Y);else break;Y=n(m)}}function G(M){if(I=!1,H(M),!_)if(n(h)!==null)_=!0,P||(P=!0,X());else{var Y=n(m);Y!==null&&ee(G,Y.startTime-M)}}var P=!1,L=-1,j=5,Z=-1;function J(){return D?!0:!(e.unstable_now()-Z<j)}function se(){if(D=!1,P){var M=e.unstable_now();Z=M;var Y=!0;try{e:{_=!1,I&&(I=!1,x(L),L=-1),g=!0;var ie=S;try{t:{for(H(M),T=n(h);T!==null&&!(T.expirationTime>M&&J());){var le=T.callback;if(typeof le=="function"){T.callback=null,S=T.priorityLevel;var v=le(T.expirationTime<=M);if(M=e.unstable_now(),typeof v=="function"){T.callback=v,H(M),Y=!0;break t}T===n(h)&&a(h),H(M)}else a(h);T=n(h)}if(T!==null)Y=!0;else{var z=n(m);z!==null&&ee(G,z.startTime-M),Y=!1}}break e}finally{T=null,S=ie,g=!1}Y=void 0}}finally{Y?X():P=!1}}}var X;if(typeof k=="function")X=function(){k(se)};else if(typeof MessageChannel<"u"){var Ae=new MessageChannel,W=Ae.port2;Ae.port1.onmessage=se,X=function(){W.postMessage(null)}}else X=function(){O(se,0)};function ee(M,Y){L=O(function(){M(e.unstable_now())},Y)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return S},e.unstable_next=function(M){switch(S){case 1:case 2:case 3:var Y=3;break;default:Y=S}var ie=S;S=Y;try{return M()}finally{S=ie}},e.unstable_requestPaint=function(){D=!0},e.unstable_runWithPriority=function(M,Y){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var ie=S;S=M;try{return Y()}finally{S=ie}},e.unstable_scheduleCallback=function(M,Y,ie){var le=e.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?le+ie:le):ie=le,M){case 1:var v=-1;break;case 2:v=250;break;case 5:v=1073741823;break;case 4:v=1e4;break;default:v=5e3}return v=ie+v,M={id:R++,callback:Y,priorityLevel:M,startTime:ie,expirationTime:v,sortIndex:-1},ie>le?(M.sortIndex=ie,t(m,M),n(h)===null&&M===n(m)&&(I?(x(L),L=-1):I=!0,ee(G,ie-le))):(M.sortIndex=v,t(h,M),_||g||(_=!0,P||(P=!0,X()))),M},e.unstable_shouldYield=J,e.unstable_wrapCallback=function(M){var Y=S;return function(){var ie=S;S=Y;try{return M.apply(this,arguments)}finally{S=ie}}}}(NR)),NR}var pN;function _1(){return pN||(pN=1,pR.exports=I1()),pR.exports}var CR={exports:{}},et={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NN;function p1(){if(NN)return et;NN=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),T=Symbol.iterator;function S(v){return v===null||typeof v!="object"?null:(v=T&&v[T]||v["@@iterator"],typeof v=="function"?v:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,I={};function D(v,z,q){this.props=v,this.context=z,this.refs=I,this.updater=q||g}D.prototype.isReactComponent={},D.prototype.setState=function(v,z){if(typeof v!="object"&&typeof v!="function"&&v!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,v,z,"setState")},D.prototype.forceUpdate=function(v){this.updater.enqueueForceUpdate(this,v,"forceUpdate")};function O(){}O.prototype=D.prototype;function x(v,z,q){this.props=v,this.context=z,this.refs=I,this.updater=q||g}var k=x.prototype=new O;k.constructor=x,_(k,D.prototype),k.isPureReactComponent=!0;var H=Array.isArray,G={H:null,A:null,T:null,S:null,V:null},P=Object.prototype.hasOwnProperty;function L(v,z,q,F,ae,K){return q=K.ref,{$$typeof:e,type:v,key:z,ref:q!==void 0?q:null,props:K}}function j(v,z){return L(v.type,z,void 0,void 0,void 0,v.props)}function Z(v){return typeof v=="object"&&v!==null&&v.$$typeof===e}function J(v){var z={"=":"=0",":":"=2"};return"$"+v.replace(/[=:]/g,function(q){return z[q]})}var se=/\/+/g;function X(v,z){return typeof v=="object"&&v!==null&&v.key!=null?J(""+v.key):z.toString(36)}function Ae(){}function W(v){switch(v.status){case"fulfilled":return v.value;case"rejected":throw v.reason;default:switch(typeof v.status=="string"?v.then(Ae,Ae):(v.status="pending",v.then(function(z){v.status==="pending"&&(v.status="fulfilled",v.value=z)},function(z){v.status==="pending"&&(v.status="rejected",v.reason=z)})),v.status){case"fulfilled":return v.value;case"rejected":throw v.reason}}throw v}function ee(v,z,q,F,ae){var K=typeof v;(K==="undefined"||K==="boolean")&&(v=null);var Q=!1;if(v===null)Q=!0;else switch(K){case"bigint":case"string":case"number":Q=!0;break;case"object":switch(v.$$typeof){case e:case t:Q=!0;break;case R:return Q=v._init,ee(Q(v._payload),z,q,F,ae)}}if(Q)return ae=ae(v),Q=F===""?"."+X(v,0):F,H(ae)?(q="",Q!=null&&(q=Q.replace(se,"$&/")+"/"),ee(ae,z,q,"",function(Ie){return Ie})):ae!=null&&(Z(ae)&&(ae=j(ae,q+(ae.key==null||v&&v.key===ae.key?"":(""+ae.key).replace(se,"$&/")+"/")+Q)),z.push(ae)),1;Q=0;var he=F===""?".":F+":";if(H(v))for(var me=0;me<v.length;me++)F=v[me],K=he+X(F,me),Q+=ee(F,z,q,K,ae);else if(me=S(v),typeof me=="function")for(v=me.call(v),me=0;!(F=v.next()).done;)F=F.value,K=he+X(F,me++),Q+=ee(F,z,q,K,ae);else if(K==="object"){if(typeof v.then=="function")return ee(W(v),z,q,F,ae);throw z=String(v),Error("Objects are not valid as a React child (found: "+(z==="[object Object]"?"object with keys {"+Object.keys(v).join(", ")+"}":z)+"). If you meant to render a collection of children, use an array instead.")}return Q}function M(v,z,q){if(v==null)return v;var F=[],ae=0;return ee(v,F,"","",function(K){return z.call(q,K,ae++)}),F}function Y(v){if(v._status===-1){var z=v._result;z=z(),z.then(function(q){(v._status===0||v._status===-1)&&(v._status=1,v._result=q)},function(q){(v._status===0||v._status===-1)&&(v._status=2,v._result=q)}),v._status===-1&&(v._status=0,v._result=z)}if(v._status===1)return v._result.default;throw v._result}var ie=typeof reportError=="function"?reportError:function(v){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof v=="object"&&v!==null&&typeof v.message=="string"?String(v.message):String(v),error:v});if(!window.dispatchEvent(z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",v);return}console.error(v)};function le(){}return et.Children={map:M,forEach:function(v,z,q){M(v,function(){z.apply(this,arguments)},q)},count:function(v){var z=0;return M(v,function(){z++}),z},toArray:function(v){return M(v,function(z){return z})||[]},only:function(v){if(!Z(v))throw Error("React.Children.only expected to receive a single React element child.");return v}},et.Component=D,et.Fragment=n,et.Profiler=s,et.PureComponent=x,et.StrictMode=a,et.Suspense=h,et.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=G,et.__COMPILER_RUNTIME={__proto__:null,c:function(v){return G.H.useMemoCache(v)}},et.cache=function(v){return function(){return v.apply(null,arguments)}},et.cloneElement=function(v,z,q){if(v==null)throw Error("The argument must be a React element, but you passed "+v+".");var F=_({},v.props),ae=v.key,K=void 0;if(z!=null)for(Q in z.ref!==void 0&&(K=void 0),z.key!==void 0&&(ae=""+z.key),z)!P.call(z,Q)||Q==="key"||Q==="__self"||Q==="__source"||Q==="ref"&&z.ref===void 0||(F[Q]=z[Q]);var Q=arguments.length-2;if(Q===1)F.children=q;else if(1<Q){for(var he=Array(Q),me=0;me<Q;me++)he[me]=arguments[me+2];F.children=he}return L(v.type,ae,void 0,void 0,K,F)},et.createContext=function(v){return v={$$typeof:d,_currentValue:v,_currentValue2:v,_threadCount:0,Provider:null,Consumer:null},v.Provider=v,v.Consumer={$$typeof:c,_context:v},v},et.createElement=function(v,z,q){var F,ae={},K=null;if(z!=null)for(F in z.key!==void 0&&(K=""+z.key),z)P.call(z,F)&&F!=="key"&&F!=="__self"&&F!=="__source"&&(ae[F]=z[F]);var Q=arguments.length-2;if(Q===1)ae.children=q;else if(1<Q){for(var he=Array(Q),me=0;me<Q;me++)he[me]=arguments[me+2];ae.children=he}if(v&&v.defaultProps)for(F in Q=v.defaultProps,Q)ae[F]===void 0&&(ae[F]=Q[F]);return L(v,K,void 0,void 0,null,ae)},et.createRef=function(){return{current:null}},et.forwardRef=function(v){return{$$typeof:f,render:v}},et.isValidElement=Z,et.lazy=function(v){return{$$typeof:R,_payload:{_status:-1,_result:v},_init:Y}},et.memo=function(v,z){return{$$typeof:m,type:v,compare:z===void 0?null:z}},et.startTransition=function(v){var z=G.T,q={};G.T=q;try{var F=v(),ae=G.S;ae!==null&&ae(q,F),typeof F=="object"&&F!==null&&typeof F.then=="function"&&F.then(le,ie)}catch(K){ie(K)}finally{G.T=z}},et.unstable_useCacheRefresh=function(){return G.H.useCacheRefresh()},et.use=function(v){return G.H.use(v)},et.useActionState=function(v,z,q){return G.H.useActionState(v,z,q)},et.useCallback=function(v,z){return G.H.useCallback(v,z)},et.useContext=function(v){return G.H.useContext(v)},et.useDebugValue=function(){},et.useDeferredValue=function(v,z){return G.H.useDeferredValue(v,z)},et.useEffect=function(v,z,q){var F=G.H;if(typeof q=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return F.useEffect(v,z)},et.useId=function(){return G.H.useId()},et.useImperativeHandle=function(v,z,q){return G.H.useImperativeHandle(v,z,q)},et.useInsertionEffect=function(v,z){return G.H.useInsertionEffect(v,z)},et.useLayoutEffect=function(v,z){return G.H.useLayoutEffect(v,z)},et.useMemo=function(v,z){return G.H.useMemo(v,z)},et.useOptimistic=function(v,z){return G.H.useOptimistic(v,z)},et.useReducer=function(v,z,q){return G.H.useReducer(v,z,q)},et.useRef=function(v){return G.H.useRef(v)},et.useState=function(v){return G.H.useState(v)},et.useSyncExternalStore=function(v,z,q){return G.H.useSyncExternalStore(v,z,q)},et.useTransition=function(){return G.H.useTransition()},et.version="19.1.0",et}var CN;function JT(){return CN||(CN=1,CR.exports=p1()),CR.exports}var bR={exports:{}},hi={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bN;function N1(){if(bN)return hi;bN=1;var e=JT();function t(h){var m="https://react.dev/errors/"+h;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var R=2;R<arguments.length;R++)m+="&args[]="+encodeURIComponent(arguments[R])}return"Minified React error #"+h+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var a={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function c(h,m,R){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:T==null?null:""+T,children:h,containerInfo:m,implementation:R}}var d=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(h,m){if(h==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return hi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,hi.createPortal=function(h,m){var R=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(t(299));return c(h,m,null,R)},hi.flushSync=function(h){var m=d.T,R=a.p;try{if(d.T=null,a.p=2,h)return h()}finally{d.T=m,a.p=R,a.d.f()}},hi.preconnect=function(h,m){typeof h=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,a.d.C(h,m))},hi.prefetchDNS=function(h){typeof h=="string"&&a.d.D(h)},hi.preinit=function(h,m){if(typeof h=="string"&&m&&typeof m.as=="string"){var R=m.as,T=f(R,m.crossOrigin),S=typeof m.integrity=="string"?m.integrity:void 0,g=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;R==="style"?a.d.S(h,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:T,integrity:S,fetchPriority:g}):R==="script"&&a.d.X(h,{crossOrigin:T,integrity:S,fetchPriority:g,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},hi.preinitModule=function(h,m){if(typeof h=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var R=f(m.as,m.crossOrigin);a.d.M(h,{crossOrigin:R,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&a.d.M(h)},hi.preload=function(h,m){if(typeof h=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var R=m.as,T=f(R,m.crossOrigin);a.d.L(h,R,{crossOrigin:T,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},hi.preloadModule=function(h,m){if(typeof h=="string")if(m){var R=f(m.as,m.crossOrigin);a.d.m(h,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:R,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else a.d.m(h)},hi.requestFormReset=function(h){a.d.r(h)},hi.unstable_batchedUpdates=function(h,m){return h(m)},hi.useFormState=function(h,m,R){return d.H.useFormState(h,m,R)},hi.useFormStatus=function(){return d.H.useHostTransitionStatus()},hi.version="19.1.0",hi}var ON;function Ob(){if(ON)return bR.exports;ON=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),bR.exports=N1(),bR.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DN;function C1(){if(DN)return zu;DN=1;var e=_1(),t=JT(),n=Ob();function a(i){var o="https://react.dev/errors/"+i;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)o+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function c(i){var o=i,r=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(r=o.return),i=o.return;while(i)}return o.tag===3?r:null}function d(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function f(i){if(c(i)!==i)throw Error(a(188))}function h(i){var o=i.alternate;if(!o){if(o=c(i),o===null)throw Error(a(188));return o!==i?null:i}for(var r=i,u=o;;){var E=r.return;if(E===null)break;var A=E.alternate;if(A===null){if(u=E.return,u!==null){r=u;continue}break}if(E.child===A.child){for(A=E.child;A;){if(A===r)return f(E),i;if(A===u)return f(E),o;A=A.sibling}throw Error(a(188))}if(r.return!==u.return)r=E,u=A;else{for(var b=!1,y=E.child;y;){if(y===r){b=!0,r=E,u=A;break}if(y===u){b=!0,u=E,r=A;break}y=y.sibling}if(!b){for(y=A.child;y;){if(y===r){b=!0,r=A,u=E;break}if(y===u){b=!0,u=A,r=E;break}y=y.sibling}if(!b)throw Error(a(189))}}if(r.alternate!==u)throw Error(a(190))}if(r.tag!==3)throw Error(a(188));return r.stateNode.current===r?i:o}function m(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i;for(i=i.child;i!==null;){if(o=m(i),o!==null)return o;i=i.sibling}return null}var R=Object.assign,T=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),x=Symbol.for("react.consumer"),k=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),Z=Symbol.for("react.activity"),J=Symbol.for("react.memo_cache_sentinel"),se=Symbol.iterator;function X(i){return i===null||typeof i!="object"?null:(i=se&&i[se]||i["@@iterator"],typeof i=="function"?i:null)}var Ae=Symbol.for("react.client.reference");function W(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===Ae?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case _:return"Fragment";case D:return"Profiler";case I:return"StrictMode";case G:return"Suspense";case P:return"SuspenseList";case Z:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case g:return"Portal";case k:return(i.displayName||"Context")+".Provider";case x:return(i._context.displayName||"Context")+".Consumer";case H:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case L:return o=i.displayName||null,o!==null?o:W(i.type)||"Memo";case j:o=i._payload,i=i._init;try{return W(i(o))}catch{}}return null}var ee=Array.isArray,M=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie={pending:!1,data:null,method:null,action:null},le=[],v=-1;function z(i){return{current:i}}function q(i){0>v||(i.current=le[v],le[v]=null,v--)}function F(i,o){v++,le[v]=i.current,i.current=o}var ae=z(null),K=z(null),Q=z(null),he=z(null);function me(i,o){switch(F(Q,o),F(K,i),F(ae,null),o.nodeType){case 9:case 11:i=(i=o.documentElement)&&(i=i.namespaceURI)?Wp(i):0;break;default:if(i=o.tagName,o=o.namespaceURI)o=Wp(o),i=Xp(o,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}q(ae),F(ae,i)}function Ie(){q(ae),q(K),q(Q)}function Me(i){i.memoizedState!==null&&F(he,i);var o=ae.current,r=Xp(o,i.type);o!==r&&(F(K,i),F(ae,r))}function pe(i){K.current===i&&(q(ae),q(K)),he.current===i&&(q(he),wu._currentValue=ie)}var ge=Object.prototype.hasOwnProperty,oe=e.unstable_scheduleCallback,Ce=e.unstable_cancelCallback,Te=e.unstable_shouldYield,be=e.unstable_requestPaint,ye=e.unstable_now,Ue=e.unstable_getCurrentPriorityLevel,$e=e.unstable_ImmediatePriority,Rt=e.unstable_UserBlockingPriority,zt=e.unstable_NormalPriority,os=e.unstable_LowPriority,hr=e.unstable_IdlePriority,Pd=e.log,Gd=e.unstable_setDisableYieldValue,Kc=null,Ki=null;function al(i){if(typeof Pd=="function"&&Gd(i),Ki&&typeof Ki.setStrictMode=="function")try{Ki.setStrictMode(Kc,i)}catch{}}var Vi=Math.clz32?Math.clz32:tM,Jv=Math.log,eM=Math.LN2;function tM(i){return i>>>=0,i===0?32:31-(Jv(i)/eM|0)|0}var Bd=256,Fd=4194304;function ls(i){var o=i&42;if(o!==0)return o;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function jd(i,o,r){var u=i.pendingLanes;if(u===0)return 0;var E=0,A=i.suspendedLanes,b=i.pingedLanes;i=i.warmLanes;var y=u&134217727;return y!==0?(u=y&~A,u!==0?E=ls(u):(b&=y,b!==0?E=ls(b):r||(r=y&~i,r!==0&&(E=ls(r))))):(y=u&~A,y!==0?E=ls(y):b!==0?E=ls(b):r||(r=u&~i,r!==0&&(E=ls(r)))),E===0?0:o!==0&&o!==E&&(o&A)===0&&(A=E&-E,r=o&-o,A>=r||A===32&&(r&4194048)!==0)?o:E}function Vc(i,o){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&o)===0}function nM(i,o){switch(i){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vg(){var i=Bd;return Bd<<=1,(Bd&4194048)===0&&(Bd=256),i}function Mg(){var i=Fd;return Fd<<=1,(Fd&62914560)===0&&(Fd=4194304),i}function cm(i){for(var o=[],r=0;31>r;r++)o.push(i);return o}function Wc(i,o){i.pendingLanes|=o,o!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function iM(i,o,r,u,E,A){var b=i.pendingLanes;i.pendingLanes=r,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=r,i.entangledLanes&=r,i.errorRecoveryDisabledLanes&=r,i.shellSuspendCounter=0;var y=i.entanglements,B=i.expirationTimes,de=i.hiddenUpdates;for(r=b&~r;0<r;){var Re=31-Vi(r),_e=1<<Re;y[Re]=0,B[Re]=-1;var fe=de[Re];if(fe!==null)for(de[Re]=null,Re=0;Re<fe.length;Re++){var Ee=fe[Re];Ee!==null&&(Ee.lane&=-536870913)}r&=~_e}u!==0&&Lg(i,u,0),A!==0&&E===0&&i.tag!==0&&(i.suspendedLanes|=A&~(b&~o))}function Lg(i,o,r){i.pendingLanes|=o,i.suspendedLanes&=~o;var u=31-Vi(o);i.entangledLanes|=o,i.entanglements[u]=i.entanglements[u]|1073741824|r&4194090}function xg(i,o){var r=i.entangledLanes|=o;for(i=i.entanglements;r;){var u=31-Vi(r),E=1<<u;E&o|i[u]&o&&(i[u]|=o),r&=~E}}function um(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function dm(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Hg(){var i=Y.p;return i!==0?i:(i=window.event,i===void 0?32:fN(i.type))}function aM(i,o){var r=Y.p;try{return Y.p=i,o()}finally{Y.p=r}}var ol=Math.random().toString(36).slice(2),ui="__reactFiber$"+ol,ki="__reactProps$"+ol,fr="__reactContainer$"+ol,hm="__reactEvents$"+ol,oM="__reactListeners$"+ol,lM="__reactHandles$"+ol,kg="__reactResources$"+ol,Xc="__reactMarker$"+ol;function fm(i){delete i[ui],delete i[ki],delete i[hm],delete i[oM],delete i[lM]}function Er(i){var o=i[ui];if(o)return o;for(var r=i.parentNode;r;){if(o=r[fr]||r[ui]){if(r=o.alternate,o.child!==null||r!==null&&r.child!==null)for(i=Qp(i);i!==null;){if(r=i[ui])return r;i=Qp(i)}return o}i=r,r=i.parentNode}return null}function mr(i){if(i=i[ui]||i[fr]){var o=i.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return i}return null}function qc(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i.stateNode;throw Error(a(33))}function Ar(i){var o=i[kg];return o||(o=i[kg]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Fn(i){i[Xc]=!0}var Ug=new Set,wg={};function ss(i,o){Rr(i,o),Rr(i+"Capture",o)}function Rr(i,o){for(wg[i]=o,i=0;i<o.length;i++)Ug.add(o[i])}var sM=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Pg={},Gg={};function rM(i){return ge.call(Gg,i)?!0:ge.call(Pg,i)?!1:sM.test(i)?Gg[i]=!0:(Pg[i]=!0,!1)}function zd(i,o,r){if(rM(o))if(r===null)i.removeAttribute(o);else{switch(typeof r){case"undefined":case"function":case"symbol":i.removeAttribute(o);return;case"boolean":var u=o.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(o);return}}i.setAttribute(o,""+r)}}function Yd(i,o,r){if(r===null)i.removeAttribute(o);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttribute(o,""+r)}}function Oo(i,o,r,u){if(u===null)i.removeAttribute(r);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttributeNS(o,r,""+u)}}var Em,Bg;function Tr(i){if(Em===void 0)try{throw Error()}catch(r){var o=r.stack.trim().match(/\n( *(at )?)/);Em=o&&o[1]||"",Bg=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Em+i+Bg}var mm=!1;function Am(i,o){if(!i||mm)return"";mm=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(o){var _e=function(){throw Error()};if(Object.defineProperty(_e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_e,[])}catch(Ee){var fe=Ee}Reflect.construct(i,[],_e)}else{try{_e.call()}catch(Ee){fe=Ee}i.call(_e.prototype)}}else{try{throw Error()}catch(Ee){fe=Ee}(_e=i())&&typeof _e.catch=="function"&&_e.catch(function(){})}}catch(Ee){if(Ee&&fe&&typeof Ee.stack=="string")return[Ee.stack,fe.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var A=u.DetermineComponentFrameRoot(),b=A[0],y=A[1];if(b&&y){var B=b.split(`
`),de=y.split(`
`);for(E=u=0;u<B.length&&!B[u].includes("DetermineComponentFrameRoot");)u++;for(;E<de.length&&!de[E].includes("DetermineComponentFrameRoot");)E++;if(u===B.length||E===de.length)for(u=B.length-1,E=de.length-1;1<=u&&0<=E&&B[u]!==de[E];)E--;for(;1<=u&&0<=E;u--,E--)if(B[u]!==de[E]){if(u!==1||E!==1)do if(u--,E--,0>E||B[u]!==de[E]){var Re=`
`+B[u].replace(" at new "," at ");return i.displayName&&Re.includes("<anonymous>")&&(Re=Re.replace("<anonymous>",i.displayName)),Re}while(1<=u&&0<=E);break}}}finally{mm=!1,Error.prepareStackTrace=r}return(r=i?i.displayName||i.name:"")?Tr(r):""}function cM(i){switch(i.tag){case 26:case 27:case 5:return Tr(i.type);case 16:return Tr("Lazy");case 13:return Tr("Suspense");case 19:return Tr("SuspenseList");case 0:case 15:return Am(i.type,!1);case 11:return Am(i.type.render,!1);case 1:return Am(i.type,!0);case 31:return Tr("Activity");default:return""}}function Fg(i){try{var o="";do o+=cM(i),i=i.return;while(i);return o}catch(r){return`
Error generating stack: `+r.message+`
`+r.stack}}function ca(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function jg(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function uM(i){var o=jg(i)?"checked":"value",r=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),u=""+i[o];if(!i.hasOwnProperty(o)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var E=r.get,A=r.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return E.call(this)},set:function(b){u=""+b,A.call(this,b)}}),Object.defineProperty(i,o,{enumerable:r.enumerable}),{getValue:function(){return u},setValue:function(b){u=""+b},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Kd(i){i._valueTracker||(i._valueTracker=uM(i))}function zg(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var r=o.getValue(),u="";return i&&(u=jg(i)?i.checked?"true":"false":i.value),i=u,i!==r?(o.setValue(i),!0):!1}function Vd(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var dM=/[\n"\\]/g;function ua(i){return i.replace(dM,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Rm(i,o,r,u,E,A,b,y){i.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?i.type=b:i.removeAttribute("type"),o!=null?b==="number"?(o===0&&i.value===""||i.value!=o)&&(i.value=""+ca(o)):i.value!==""+ca(o)&&(i.value=""+ca(o)):b!=="submit"&&b!=="reset"||i.removeAttribute("value"),o!=null?Tm(i,b,ca(o)):r!=null?Tm(i,b,ca(r)):u!=null&&i.removeAttribute("value"),E==null&&A!=null&&(i.defaultChecked=!!A),E!=null&&(i.checked=E&&typeof E!="function"&&typeof E!="symbol"),y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?i.name=""+ca(y):i.removeAttribute("name")}function Yg(i,o,r,u,E,A,b,y){if(A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(i.type=A),o!=null||r!=null){if(!(A!=="submit"&&A!=="reset"||o!=null))return;r=r!=null?""+ca(r):"",o=o!=null?""+ca(o):r,y||o===i.value||(i.value=o),i.defaultValue=o}u=u??E,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=y?i.checked:!!u,i.defaultChecked=!!u,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(i.name=b)}function Tm(i,o,r){o==="number"&&Vd(i.ownerDocument)===i||i.defaultValue===""+r||(i.defaultValue=""+r)}function Sr(i,o,r,u){if(i=i.options,o){o={};for(var E=0;E<r.length;E++)o["$"+r[E]]=!0;for(r=0;r<i.length;r++)E=o.hasOwnProperty("$"+i[r].value),i[r].selected!==E&&(i[r].selected=E),E&&u&&(i[r].defaultSelected=!0)}else{for(r=""+ca(r),o=null,E=0;E<i.length;E++){if(i[E].value===r){i[E].selected=!0,u&&(i[E].defaultSelected=!0);return}o!==null||i[E].disabled||(o=i[E])}o!==null&&(o.selected=!0)}}function Kg(i,o,r){if(o!=null&&(o=""+ca(o),o!==i.value&&(i.value=o),r==null)){i.defaultValue!==o&&(i.defaultValue=o);return}i.defaultValue=r!=null?""+ca(r):""}function Vg(i,o,r,u){if(o==null){if(u!=null){if(r!=null)throw Error(a(92));if(ee(u)){if(1<u.length)throw Error(a(93));u=u[0]}r=u}r==null&&(r=""),o=r}r=ca(o),i.defaultValue=r,u=i.textContent,u===r&&u!==""&&u!==null&&(i.value=u)}function gr(i,o){if(o){var r=i.firstChild;if(r&&r===i.lastChild&&r.nodeType===3){r.nodeValue=o;return}}i.textContent=o}var hM=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Wg(i,o,r){var u=o.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?u?i.setProperty(o,""):o==="float"?i.cssFloat="":i[o]="":u?i.setProperty(o,r):typeof r!="number"||r===0||hM.has(o)?o==="float"?i.cssFloat=r:i[o]=(""+r).trim():i[o]=r+"px"}function Xg(i,o,r){if(o!=null&&typeof o!="object")throw Error(a(62));if(i=i.style,r!=null){for(var u in r)!r.hasOwnProperty(u)||o!=null&&o.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var E in o)u=o[E],o.hasOwnProperty(E)&&r[E]!==u&&Wg(i,E,u)}else for(var A in o)o.hasOwnProperty(A)&&Wg(i,A,o[A])}function Sm(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fM=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),EM=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Wd(i){return EM.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var gm=null;function Im(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Ir=null,_r=null;function qg(i){var o=mr(i);if(o&&(i=o.stateNode)){var r=i[ki]||null;e:switch(i=o.stateNode,o.type){case"input":if(Rm(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),o=r.name,r.type==="radio"&&o!=null){for(r=i;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+ua(""+o)+'"][type="radio"]'),o=0;o<r.length;o++){var u=r[o];if(u!==i&&u.form===i.form){var E=u[ki]||null;if(!E)throw Error(a(90));Rm(u,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(o=0;o<r.length;o++)u=r[o],u.form===i.form&&zg(u)}break e;case"textarea":Kg(i,r.value,r.defaultValue);break e;case"select":o=r.value,o!=null&&Sr(i,!!r.multiple,o,!1)}}}var _m=!1;function Zg(i,o,r){if(_m)return i(o,r);_m=!0;try{var u=i(o);return u}finally{if(_m=!1,(Ir!==null||_r!==null)&&(Lh(),Ir&&(o=Ir,i=_r,_r=Ir=null,qg(o),i)))for(o=0;o<i.length;o++)qg(i[o])}}function Zc(i,o){var r=i.stateNode;if(r===null)return null;var u=r[ki]||null;if(u===null)return null;r=u[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break e;default:i=!1}if(i)return null;if(r&&typeof r!="function")throw Error(a(231,o,typeof r));return r}var Do=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),pm=!1;if(Do)try{var $c={};Object.defineProperty($c,"passive",{get:function(){pm=!0}}),window.addEventListener("test",$c,$c),window.removeEventListener("test",$c,$c)}catch{pm=!1}var ll=null,Nm=null,Xd=null;function $g(){if(Xd)return Xd;var i,o=Nm,r=o.length,u,E="value"in ll?ll.value:ll.textContent,A=E.length;for(i=0;i<r&&o[i]===E[i];i++);var b=r-i;for(u=1;u<=b&&o[r-u]===E[A-u];u++);return Xd=E.slice(i,1<u?1-u:void 0)}function qd(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Zd(){return!0}function Qg(){return!1}function Ui(i){function o(r,u,E,A,b){this._reactName=r,this._targetInst=E,this.type=u,this.nativeEvent=A,this.target=b,this.currentTarget=null;for(var y in i)i.hasOwnProperty(y)&&(r=i[y],this[y]=r?r(A):A[y]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?Zd:Qg,this.isPropagationStopped=Qg,this}return R(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Zd)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Zd)},persist:function(){},isPersistent:Zd}),o}var rs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$d=Ui(rs),Qc=R({},rs,{view:0,detail:0}),mM=Ui(Qc),Cm,bm,Jc,Qd=R({},Qc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dm,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Jc&&(Jc&&i.type==="mousemove"?(Cm=i.screenX-Jc.screenX,bm=i.screenY-Jc.screenY):bm=Cm=0,Jc=i),Cm)},movementY:function(i){return"movementY"in i?i.movementY:bm}}),Jg=Ui(Qd),AM=R({},Qd,{dataTransfer:0}),RM=Ui(AM),TM=R({},Qc,{relatedTarget:0}),Om=Ui(TM),SM=R({},rs,{animationName:0,elapsedTime:0,pseudoElement:0}),gM=Ui(SM),IM=R({},rs,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),_M=Ui(IM),pM=R({},rs,{data:0}),eI=Ui(pM),NM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},CM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function OM(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=bM[i])?!!o[i]:!1}function Dm(){return OM}var DM=R({},Qc,{key:function(i){if(i.key){var o=NM[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=qd(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?CM[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dm,charCode:function(i){return i.type==="keypress"?qd(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?qd(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),yM=Ui(DM),vM=R({},Qd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),tI=Ui(vM),MM=R({},Qc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dm}),LM=Ui(MM),xM=R({},rs,{propertyName:0,elapsedTime:0,pseudoElement:0}),HM=Ui(xM),kM=R({},Qd,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),UM=Ui(kM),wM=R({},rs,{newState:0,oldState:0}),PM=Ui(wM),GM=[9,13,27,32],ym=Do&&"CompositionEvent"in window,eu=null;Do&&"documentMode"in document&&(eu=document.documentMode);var BM=Do&&"TextEvent"in window&&!eu,nI=Do&&(!ym||eu&&8<eu&&11>=eu),iI=" ",aI=!1;function oI(i,o){switch(i){case"keyup":return GM.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lI(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var pr=!1;function FM(i,o){switch(i){case"compositionend":return lI(o);case"keypress":return o.which!==32?null:(aI=!0,iI);case"textInput":return i=o.data,i===iI&&aI?null:i;default:return null}}function jM(i,o){if(pr)return i==="compositionend"||!ym&&oI(i,o)?(i=$g(),Xd=Nm=ll=null,pr=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return nI&&o.locale!=="ko"?null:o.data;default:return null}}var zM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sI(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!zM[i.type]:o==="textarea"}function rI(i,o,r,u){Ir?_r?_r.push(u):_r=[u]:Ir=u,o=Ph(o,"onChange"),0<o.length&&(r=new $d("onChange","change",null,r,u),i.push({event:r,listeners:o}))}var tu=null,nu=null;function YM(i){jp(i,0)}function Jd(i){var o=qc(i);if(zg(o))return i}function cI(i,o){if(i==="change")return o}var uI=!1;if(Do){var vm;if(Do){var Mm="oninput"in document;if(!Mm){var dI=document.createElement("div");dI.setAttribute("oninput","return;"),Mm=typeof dI.oninput=="function"}vm=Mm}else vm=!1;uI=vm&&(!document.documentMode||9<document.documentMode)}function hI(){tu&&(tu.detachEvent("onpropertychange",fI),nu=tu=null)}function fI(i){if(i.propertyName==="value"&&Jd(nu)){var o=[];rI(o,nu,i,Im(i)),Zg(YM,o)}}function KM(i,o,r){i==="focusin"?(hI(),tu=o,nu=r,tu.attachEvent("onpropertychange",fI)):i==="focusout"&&hI()}function VM(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Jd(nu)}function WM(i,o){if(i==="click")return Jd(o)}function XM(i,o){if(i==="input"||i==="change")return Jd(o)}function qM(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var Wi=typeof Object.is=="function"?Object.is:qM;function iu(i,o){if(Wi(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var r=Object.keys(i),u=Object.keys(o);if(r.length!==u.length)return!1;for(u=0;u<r.length;u++){var E=r[u];if(!ge.call(o,E)||!Wi(i[E],o[E]))return!1}return!0}function EI(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function mI(i,o){var r=EI(i);i=0;for(var u;r;){if(r.nodeType===3){if(u=i+r.textContent.length,i<=o&&u>=o)return{node:r,offset:o-i};i=u}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=EI(r)}}function AI(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?AI(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function RI(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var o=Vd(i.document);o instanceof i.HTMLIFrameElement;){try{var r=typeof o.contentWindow.location.href=="string"}catch{r=!1}if(r)i=o.contentWindow;else break;o=Vd(i.document)}return o}function Lm(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}var ZM=Do&&"documentMode"in document&&11>=document.documentMode,Nr=null,xm=null,au=null,Hm=!1;function TI(i,o,r){var u=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Hm||Nr==null||Nr!==Vd(u)||(u=Nr,"selectionStart"in u&&Lm(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),au&&iu(au,u)||(au=u,u=Ph(xm,"onSelect"),0<u.length&&(o=new $d("onSelect","select",null,o,r),i.push({event:o,listeners:u}),o.target=Nr)))}function cs(i,o){var r={};return r[i.toLowerCase()]=o.toLowerCase(),r["Webkit"+i]="webkit"+o,r["Moz"+i]="moz"+o,r}var Cr={animationend:cs("Animation","AnimationEnd"),animationiteration:cs("Animation","AnimationIteration"),animationstart:cs("Animation","AnimationStart"),transitionrun:cs("Transition","TransitionRun"),transitionstart:cs("Transition","TransitionStart"),transitioncancel:cs("Transition","TransitionCancel"),transitionend:cs("Transition","TransitionEnd")},km={},SI={};Do&&(SI=document.createElement("div").style,"AnimationEvent"in window||(delete Cr.animationend.animation,delete Cr.animationiteration.animation,delete Cr.animationstart.animation),"TransitionEvent"in window||delete Cr.transitionend.transition);function us(i){if(km[i])return km[i];if(!Cr[i])return i;var o=Cr[i],r;for(r in o)if(o.hasOwnProperty(r)&&r in SI)return km[i]=o[r];return i}var gI=us("animationend"),II=us("animationiteration"),_I=us("animationstart"),$M=us("transitionrun"),QM=us("transitionstart"),JM=us("transitioncancel"),pI=us("transitionend"),NI=new Map,Um="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Um.push("scrollEnd");function Ua(i,o){NI.set(i,o),ss(o,[i])}var CI=new WeakMap;function da(i,o){if(typeof i=="object"&&i!==null){var r=CI.get(i);return r!==void 0?r:(o={value:i,source:o,stack:Fg(o)},CI.set(i,o),o)}return{value:i,source:o,stack:Fg(o)}}var ha=[],br=0,wm=0;function eh(){for(var i=br,o=wm=br=0;o<i;){var r=ha[o];ha[o++]=null;var u=ha[o];ha[o++]=null;var E=ha[o];ha[o++]=null;var A=ha[o];if(ha[o++]=null,u!==null&&E!==null){var b=u.pending;b===null?E.next=E:(E.next=b.next,b.next=E),u.pending=E}A!==0&&bI(r,E,A)}}function th(i,o,r,u){ha[br++]=i,ha[br++]=o,ha[br++]=r,ha[br++]=u,wm|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function Pm(i,o,r,u){return th(i,o,r,u),nh(i)}function Or(i,o){return th(i,null,null,o),nh(i)}function bI(i,o,r){i.lanes|=r;var u=i.alternate;u!==null&&(u.lanes|=r);for(var E=!1,A=i.return;A!==null;)A.childLanes|=r,u=A.alternate,u!==null&&(u.childLanes|=r),A.tag===22&&(i=A.stateNode,i===null||i._visibility&1||(E=!0)),i=A,A=A.return;return i.tag===3?(A=i.stateNode,E&&o!==null&&(E=31-Vi(r),i=A.hiddenUpdates,u=i[E],u===null?i[E]=[o]:u.push(o),o.lane=r|536870912),A):null}function nh(i){if(50<yu)throw yu=0,YA=null,Error(a(185));for(var o=i.return;o!==null;)i=o,o=i.return;return i.tag===3?i.stateNode:null}var Dr={};function eL(i,o,r,u){this.tag=i,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xi(i,o,r,u){return new eL(i,o,r,u)}function Gm(i){return i=i.prototype,!(!i||!i.isReactComponent)}function yo(i,o){var r=i.alternate;return r===null?(r=Xi(i.tag,o,i.key,i.mode),r.elementType=i.elementType,r.type=i.type,r.stateNode=i.stateNode,r.alternate=i,i.alternate=r):(r.pendingProps=o,r.type=i.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=i.flags&65011712,r.childLanes=i.childLanes,r.lanes=i.lanes,r.child=i.child,r.memoizedProps=i.memoizedProps,r.memoizedState=i.memoizedState,r.updateQueue=i.updateQueue,o=i.dependencies,r.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},r.sibling=i.sibling,r.index=i.index,r.ref=i.ref,r.refCleanup=i.refCleanup,r}function OI(i,o){i.flags&=65011714;var r=i.alternate;return r===null?(i.childLanes=0,i.lanes=o,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=r.childLanes,i.lanes=r.lanes,i.child=r.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=r.memoizedProps,i.memoizedState=r.memoizedState,i.updateQueue=r.updateQueue,i.type=r.type,o=r.dependencies,i.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),i}function ih(i,o,r,u,E,A){var b=0;if(u=i,typeof i=="function")Gm(i)&&(b=1);else if(typeof i=="string")b=n1(i,r,ae.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case Z:return i=Xi(31,r,o,E),i.elementType=Z,i.lanes=A,i;case _:return ds(r.children,E,A,o);case I:b=8,E|=24;break;case D:return i=Xi(12,r,o,E|2),i.elementType=D,i.lanes=A,i;case G:return i=Xi(13,r,o,E),i.elementType=G,i.lanes=A,i;case P:return i=Xi(19,r,o,E),i.elementType=P,i.lanes=A,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case O:case k:b=10;break e;case x:b=9;break e;case H:b=11;break e;case L:b=14;break e;case j:b=16,u=null;break e}b=29,r=Error(a(130,i===null?"null":typeof i,"")),u=null}return o=Xi(b,r,o,E),o.elementType=i,o.type=u,o.lanes=A,o}function ds(i,o,r,u){return i=Xi(7,i,u,o),i.lanes=r,i}function Bm(i,o,r){return i=Xi(6,i,null,o),i.lanes=r,i}function Fm(i,o,r){return o=Xi(4,i.children!==null?i.children:[],i.key,o),o.lanes=r,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}var yr=[],vr=0,ah=null,oh=0,fa=[],Ea=0,hs=null,vo=1,Mo="";function fs(i,o){yr[vr++]=oh,yr[vr++]=ah,ah=i,oh=o}function DI(i,o,r){fa[Ea++]=vo,fa[Ea++]=Mo,fa[Ea++]=hs,hs=i;var u=vo;i=Mo;var E=32-Vi(u)-1;u&=~(1<<E),r+=1;var A=32-Vi(o)+E;if(30<A){var b=E-E%5;A=(u&(1<<b)-1).toString(32),u>>=b,E-=b,vo=1<<32-Vi(o)+E|r<<E|u,Mo=A+i}else vo=1<<A|r<<E|u,Mo=i}function jm(i){i.return!==null&&(fs(i,1),DI(i,1,0))}function zm(i){for(;i===ah;)ah=yr[--vr],yr[vr]=null,oh=yr[--vr],yr[vr]=null;for(;i===hs;)hs=fa[--Ea],fa[Ea]=null,Mo=fa[--Ea],fa[Ea]=null,vo=fa[--Ea],fa[Ea]=null}var Ri=null,on=null,_t=!1,Es=null,to=!1,Ym=Error(a(519));function ms(i){var o=Error(a(418,""));throw su(da(o,i)),Ym}function yI(i){var o=i.stateNode,r=i.type,u=i.memoizedProps;switch(o[ui]=i,o[ki]=u,r){case"dialog":ut("cancel",o),ut("close",o);break;case"iframe":case"object":case"embed":ut("load",o);break;case"video":case"audio":for(r=0;r<Mu.length;r++)ut(Mu[r],o);break;case"source":ut("error",o);break;case"img":case"image":case"link":ut("error",o),ut("load",o);break;case"details":ut("toggle",o);break;case"input":ut("invalid",o),Yg(o,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),Kd(o);break;case"select":ut("invalid",o);break;case"textarea":ut("invalid",o),Vg(o,u.value,u.defaultValue,u.children),Kd(o)}r=u.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||o.textContent===""+r||u.suppressHydrationWarning===!0||Vp(o.textContent,r)?(u.popover!=null&&(ut("beforetoggle",o),ut("toggle",o)),u.onScroll!=null&&ut("scroll",o),u.onScrollEnd!=null&&ut("scrollend",o),u.onClick!=null&&(o.onclick=Gh),o=!0):o=!1,o||ms(i)}function vI(i){for(Ri=i.return;Ri;)switch(Ri.tag){case 5:case 13:to=!1;return;case 27:case 3:to=!0;return;default:Ri=Ri.return}}function ou(i){if(i!==Ri)return!1;if(!_t)return vI(i),_t=!0,!1;var o=i.tag,r;if((r=o!==3&&o!==27)&&((r=o===5)&&(r=i.type,r=!(r!=="form"&&r!=="button")||lR(i.type,i.memoizedProps)),r=!r),r&&on&&ms(i),vI(i),o===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(a(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8)if(r=i.data,r==="/$"){if(o===0){on=Pa(i.nextSibling);break e}o--}else r!=="$"&&r!=="$!"&&r!=="$?"||o++;i=i.nextSibling}on=null}}else o===27?(o=on,_l(i.type)?(i=uR,uR=null,on=i):on=o):on=Ri?Pa(i.stateNode.nextSibling):null;return!0}function lu(){on=Ri=null,_t=!1}function MI(){var i=Es;return i!==null&&(Gi===null?Gi=i:Gi.push.apply(Gi,i),Es=null),i}function su(i){Es===null?Es=[i]:Es.push(i)}var Km=z(null),As=null,Lo=null;function sl(i,o,r){F(Km,o._currentValue),o._currentValue=r}function xo(i){i._currentValue=Km.current,q(Km)}function Vm(i,o,r){for(;i!==null;){var u=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,u!==null&&(u.childLanes|=o)):u!==null&&(u.childLanes&o)!==o&&(u.childLanes|=o),i===r)break;i=i.return}}function Wm(i,o,r,u){var E=i.child;for(E!==null&&(E.return=i);E!==null;){var A=E.dependencies;if(A!==null){var b=E.child;A=A.firstContext;e:for(;A!==null;){var y=A;A=E;for(var B=0;B<o.length;B++)if(y.context===o[B]){A.lanes|=r,y=A.alternate,y!==null&&(y.lanes|=r),Vm(A.return,r,i),u||(b=null);break e}A=y.next}}else if(E.tag===18){if(b=E.return,b===null)throw Error(a(341));b.lanes|=r,A=b.alternate,A!==null&&(A.lanes|=r),Vm(b,r,i),b=null}else b=E.child;if(b!==null)b.return=E;else for(b=E;b!==null;){if(b===i){b=null;break}if(E=b.sibling,E!==null){E.return=b.return,b=E;break}b=b.return}E=b}}function ru(i,o,r,u){i=null;for(var E=o,A=!1;E!==null;){if(!A){if((E.flags&524288)!==0)A=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var b=E.alternate;if(b===null)throw Error(a(387));if(b=b.memoizedProps,b!==null){var y=E.type;Wi(E.pendingProps.value,b.value)||(i!==null?i.push(y):i=[y])}}else if(E===he.current){if(b=E.alternate,b===null)throw Error(a(387));b.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(i!==null?i.push(wu):i=[wu])}E=E.return}i!==null&&Wm(o,i,r,u),o.flags|=262144}function lh(i){for(i=i.firstContext;i!==null;){if(!Wi(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Rs(i){As=i,Lo=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function di(i){return LI(As,i)}function sh(i,o){return As===null&&Rs(i),LI(i,o)}function LI(i,o){var r=o._currentValue;if(o={context:o,memoizedValue:r,next:null},Lo===null){if(i===null)throw Error(a(308));Lo=o,i.dependencies={lanes:0,firstContext:o},i.flags|=524288}else Lo=Lo.next=o;return r}var tL=typeof AbortController<"u"?AbortController:function(){var i=[],o=this.signal={aborted:!1,addEventListener:function(r,u){i.push(u)}};this.abort=function(){o.aborted=!0,i.forEach(function(r){return r()})}},nL=e.unstable_scheduleCallback,iL=e.unstable_NormalPriority,xn={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Xm(){return{controller:new tL,data:new Map,refCount:0}}function cu(i){i.refCount--,i.refCount===0&&nL(iL,function(){i.controller.abort()})}var uu=null,qm=0,Mr=0,Lr=null;function aL(i,o){if(uu===null){var r=uu=[];qm=0,Mr=$A(),Lr={status:"pending",value:void 0,then:function(u){r.push(u)}}}return qm++,o.then(xI,xI),o}function xI(){if(--qm===0&&uu!==null){Lr!==null&&(Lr.status="fulfilled");var i=uu;uu=null,Mr=0,Lr=null;for(var o=0;o<i.length;o++)(0,i[o])()}}function oL(i,o){var r=[],u={status:"pending",value:null,reason:null,then:function(E){r.push(E)}};return i.then(function(){u.status="fulfilled",u.value=o;for(var E=0;E<r.length;E++)(0,r[E])(o)},function(E){for(u.status="rejected",u.reason=E,E=0;E<r.length;E++)(0,r[E])(void 0)}),u}var HI=M.S;M.S=function(i,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&aL(i,o),HI!==null&&HI(i,o)};var Ts=z(null);function Zm(){var i=Ts.current;return i!==null?i:Ft.pooledCache}function rh(i,o){o===null?F(Ts,Ts.current):F(Ts,o.pool)}function kI(){var i=Zm();return i===null?null:{parent:xn._currentValue,pool:i}}var du=Error(a(460)),UI=Error(a(474)),ch=Error(a(542)),$m={then:function(){}};function wI(i){return i=i.status,i==="fulfilled"||i==="rejected"}function uh(){}function PI(i,o,r){switch(r=i[r],r===void 0?i.push(o):r!==o&&(o.then(uh,uh),o=r),o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,BI(i),i;default:if(typeof o.status=="string")o.then(uh,uh);else{if(i=Ft,i!==null&&100<i.shellSuspendCounter)throw Error(a(482));i=o,i.status="pending",i.then(function(u){if(o.status==="pending"){var E=o;E.status="fulfilled",E.value=u}},function(u){if(o.status==="pending"){var E=o;E.status="rejected",E.reason=u}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,BI(i),i}throw hu=o,du}}var hu=null;function GI(){if(hu===null)throw Error(a(459));var i=hu;return hu=null,i}function BI(i){if(i===du||i===ch)throw Error(a(483))}var rl=!1;function Qm(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Jm(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function cl(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function ul(i,o,r){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(bt&2)!==0){var E=u.pending;return E===null?o.next=o:(o.next=E.next,E.next=o),u.pending=o,o=nh(i),bI(i,null,r),o}return th(i,u,o,r),nh(i)}function fu(i,o,r){if(o=o.updateQueue,o!==null&&(o=o.shared,(r&4194048)!==0)){var u=o.lanes;u&=i.pendingLanes,r|=u,o.lanes=r,xg(i,r)}}function eA(i,o){var r=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,r===u)){var E=null,A=null;if(r=r.firstBaseUpdate,r!==null){do{var b={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};A===null?E=A=b:A=A.next=b,r=r.next}while(r!==null);A===null?E=A=o:A=A.next=o}else E=A=o;r={baseState:u.baseState,firstBaseUpdate:E,lastBaseUpdate:A,shared:u.shared,callbacks:u.callbacks},i.updateQueue=r;return}i=r.lastBaseUpdate,i===null?r.firstBaseUpdate=o:i.next=o,r.lastBaseUpdate=o}var tA=!1;function Eu(){if(tA){var i=Lr;if(i!==null)throw i}}function mu(i,o,r,u){tA=!1;var E=i.updateQueue;rl=!1;var A=E.firstBaseUpdate,b=E.lastBaseUpdate,y=E.shared.pending;if(y!==null){E.shared.pending=null;var B=y,de=B.next;B.next=null,b===null?A=de:b.next=de,b=B;var Re=i.alternate;Re!==null&&(Re=Re.updateQueue,y=Re.lastBaseUpdate,y!==b&&(y===null?Re.firstBaseUpdate=de:y.next=de,Re.lastBaseUpdate=B))}if(A!==null){var _e=E.baseState;b=0,Re=de=B=null,y=A;do{var fe=y.lane&-536870913,Ee=fe!==y.lane;if(Ee?(Et&fe)===fe:(u&fe)===fe){fe!==0&&fe===Mr&&(tA=!0),Re!==null&&(Re=Re.next={lane:0,tag:y.tag,payload:y.payload,callback:null,next:null});e:{var We=i,Ye=y;fe=o;var xt=r;switch(Ye.tag){case 1:if(We=Ye.payload,typeof We=="function"){_e=We.call(xt,_e,fe);break e}_e=We;break e;case 3:We.flags=We.flags&-65537|128;case 0:if(We=Ye.payload,fe=typeof We=="function"?We.call(xt,_e,fe):We,fe==null)break e;_e=R({},_e,fe);break e;case 2:rl=!0}}fe=y.callback,fe!==null&&(i.flags|=64,Ee&&(i.flags|=8192),Ee=E.callbacks,Ee===null?E.callbacks=[fe]:Ee.push(fe))}else Ee={lane:fe,tag:y.tag,payload:y.payload,callback:y.callback,next:null},Re===null?(de=Re=Ee,B=_e):Re=Re.next=Ee,b|=fe;if(y=y.next,y===null){if(y=E.shared.pending,y===null)break;Ee=y,y=Ee.next,Ee.next=null,E.lastBaseUpdate=Ee,E.shared.pending=null}}while(!0);Re===null&&(B=_e),E.baseState=B,E.firstBaseUpdate=de,E.lastBaseUpdate=Re,A===null&&(E.shared.lanes=0),Tl|=b,i.lanes=b,i.memoizedState=_e}}function FI(i,o){if(typeof i!="function")throw Error(a(191,i));i.call(o)}function jI(i,o){var r=i.callbacks;if(r!==null)for(i.callbacks=null,i=0;i<r.length;i++)FI(r[i],o)}var xr=z(null),dh=z(0);function zI(i,o){i=Bo,F(dh,i),F(xr,o),Bo=i|o.baseLanes}function nA(){F(dh,Bo),F(xr,xr.current)}function iA(){Bo=dh.current,q(xr),q(dh)}var dl=0,it=null,Mt=null,Nn=null,hh=!1,Hr=!1,Ss=!1,fh=0,Au=0,kr=null,lL=0;function Sn(){throw Error(a(321))}function aA(i,o){if(o===null)return!1;for(var r=0;r<o.length&&r<i.length;r++)if(!Wi(i[r],o[r]))return!1;return!0}function oA(i,o,r,u,E,A){return dl=A,it=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,M.H=i===null||i.memoizedState===null?b_:O_,Ss=!1,A=r(u,E),Ss=!1,Hr&&(A=KI(o,r,u,E)),YI(i),A}function YI(i){M.H=Sh;var o=Mt!==null&&Mt.next!==null;if(dl=0,Nn=Mt=it=null,hh=!1,Au=0,kr=null,o)throw Error(a(300));i===null||jn||(i=i.dependencies,i!==null&&lh(i)&&(jn=!0))}function KI(i,o,r,u){it=i;var E=0;do{if(Hr&&(kr=null),Au=0,Hr=!1,25<=E)throw Error(a(301));if(E+=1,Nn=Mt=null,i.updateQueue!=null){var A=i.updateQueue;A.lastEffect=null,A.events=null,A.stores=null,A.memoCache!=null&&(A.memoCache.index=0)}M.H=fL,A=o(r,u)}while(Hr);return A}function sL(){var i=M.H,o=i.useState()[0];return o=typeof o.then=="function"?Ru(o):o,i=i.useState()[0],(Mt!==null?Mt.memoizedState:null)!==i&&(it.flags|=1024),o}function lA(){var i=fh!==0;return fh=0,i}function sA(i,o,r){o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~r}function rA(i){if(hh){for(i=i.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}hh=!1}dl=0,Nn=Mt=it=null,Hr=!1,Au=fh=0,kr=null}function wi(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nn===null?it.memoizedState=Nn=i:Nn=Nn.next=i,Nn}function Cn(){if(Mt===null){var i=it.alternate;i=i!==null?i.memoizedState:null}else i=Mt.next;var o=Nn===null?it.memoizedState:Nn.next;if(o!==null)Nn=o,Mt=i;else{if(i===null)throw it.alternate===null?Error(a(467)):Error(a(310));Mt=i,i={memoizedState:Mt.memoizedState,baseState:Mt.baseState,baseQueue:Mt.baseQueue,queue:Mt.queue,next:null},Nn===null?it.memoizedState=Nn=i:Nn=Nn.next=i}return Nn}function cA(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ru(i){var o=Au;return Au+=1,kr===null&&(kr=[]),i=PI(kr,i,o),o=it,(Nn===null?o.memoizedState:Nn.next)===null&&(o=o.alternate,M.H=o===null||o.memoizedState===null?b_:O_),i}function Eh(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Ru(i);if(i.$$typeof===k)return di(i)}throw Error(a(438,String(i)))}function uA(i){var o=null,r=it.updateQueue;if(r!==null&&(o=r.memoCache),o==null){var u=it.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(o={data:u.data.map(function(E){return E.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),r===null&&(r=cA(),it.updateQueue=r),r.memoCache=o,r=o.data[o.index],r===void 0)for(r=o.data[o.index]=Array(i),u=0;u<i;u++)r[u]=J;return o.index++,r}function Ho(i,o){return typeof o=="function"?o(i):o}function mh(i){var o=Cn();return dA(o,Mt,i)}function dA(i,o,r){var u=i.queue;if(u===null)throw Error(a(311));u.lastRenderedReducer=r;var E=i.baseQueue,A=u.pending;if(A!==null){if(E!==null){var b=E.next;E.next=A.next,A.next=b}o.baseQueue=E=A,u.pending=null}if(A=i.baseState,E===null)i.memoizedState=A;else{o=E.next;var y=b=null,B=null,de=o,Re=!1;do{var _e=de.lane&-536870913;if(_e!==de.lane?(Et&_e)===_e:(dl&_e)===_e){var fe=de.revertLane;if(fe===0)B!==null&&(B=B.next={lane:0,revertLane:0,action:de.action,hasEagerState:de.hasEagerState,eagerState:de.eagerState,next:null}),_e===Mr&&(Re=!0);else if((dl&fe)===fe){de=de.next,fe===Mr&&(Re=!0);continue}else _e={lane:0,revertLane:de.revertLane,action:de.action,hasEagerState:de.hasEagerState,eagerState:de.eagerState,next:null},B===null?(y=B=_e,b=A):B=B.next=_e,it.lanes|=fe,Tl|=fe;_e=de.action,Ss&&r(A,_e),A=de.hasEagerState?de.eagerState:r(A,_e)}else fe={lane:_e,revertLane:de.revertLane,action:de.action,hasEagerState:de.hasEagerState,eagerState:de.eagerState,next:null},B===null?(y=B=fe,b=A):B=B.next=fe,it.lanes|=_e,Tl|=_e;de=de.next}while(de!==null&&de!==o);if(B===null?b=A:B.next=y,!Wi(A,i.memoizedState)&&(jn=!0,Re&&(r=Lr,r!==null)))throw r;i.memoizedState=A,i.baseState=b,i.baseQueue=B,u.lastRenderedState=A}return E===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function hA(i){var o=Cn(),r=o.queue;if(r===null)throw Error(a(311));r.lastRenderedReducer=i;var u=r.dispatch,E=r.pending,A=o.memoizedState;if(E!==null){r.pending=null;var b=E=E.next;do A=i(A,b.action),b=b.next;while(b!==E);Wi(A,o.memoizedState)||(jn=!0),o.memoizedState=A,o.baseQueue===null&&(o.baseState=A),r.lastRenderedState=A}return[A,u]}function VI(i,o,r){var u=it,E=Cn(),A=_t;if(A){if(r===void 0)throw Error(a(407));r=r()}else r=o();var b=!Wi((Mt||E).memoizedState,r);b&&(E.memoizedState=r,jn=!0),E=E.queue;var y=qI.bind(null,u,E,i);if(Tu(2048,8,y,[i]),E.getSnapshot!==o||b||Nn!==null&&Nn.memoizedState.tag&1){if(u.flags|=2048,Ur(9,Ah(),XI.bind(null,u,E,r,o),null),Ft===null)throw Error(a(349));A||(dl&124)!==0||WI(u,o,r)}return r}function WI(i,o,r){i.flags|=16384,i={getSnapshot:o,value:r},o=it.updateQueue,o===null?(o=cA(),it.updateQueue=o,o.stores=[i]):(r=o.stores,r===null?o.stores=[i]:r.push(i))}function XI(i,o,r,u){o.value=r,o.getSnapshot=u,ZI(o)&&$I(i)}function qI(i,o,r){return r(function(){ZI(o)&&$I(i)})}function ZI(i){var o=i.getSnapshot;i=i.value;try{var r=o();return!Wi(i,r)}catch{return!0}}function $I(i){var o=Or(i,2);o!==null&&Ji(o,i,2)}function fA(i){var o=wi();if(typeof i=="function"){var r=i;if(i=r(),Ss){al(!0);try{r()}finally{al(!1)}}}return o.memoizedState=o.baseState=i,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ho,lastRenderedState:i},o}function QI(i,o,r,u){return i.baseState=r,dA(i,Mt,typeof u=="function"?u:Ho)}function rL(i,o,r,u,E){if(Th(i))throw Error(a(485));if(i=o.action,i!==null){var A={payload:E,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){A.listeners.push(b)}};M.T!==null?r(!0):A.isTransition=!1,u(A),r=o.pending,r===null?(A.next=o.pending=A,JI(o,A)):(A.next=r.next,o.pending=r.next=A)}}function JI(i,o){var r=o.action,u=o.payload,E=i.state;if(o.isTransition){var A=M.T,b={};M.T=b;try{var y=r(E,u),B=M.S;B!==null&&B(b,y),e_(i,o,y)}catch(de){EA(i,o,de)}finally{M.T=A}}else try{A=r(E,u),e_(i,o,A)}catch(de){EA(i,o,de)}}function e_(i,o,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(u){t_(i,o,u)},function(u){return EA(i,o,u)}):t_(i,o,r)}function t_(i,o,r){o.status="fulfilled",o.value=r,n_(o),i.state=r,o=i.pending,o!==null&&(r=o.next,r===o?i.pending=null:(r=r.next,o.next=r,JI(i,r)))}function EA(i,o,r){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do o.status="rejected",o.reason=r,n_(o),o=o.next;while(o!==u)}i.action=null}function n_(i){i=i.listeners;for(var o=0;o<i.length;o++)(0,i[o])()}function i_(i,o){return o}function a_(i,o){if(_t){var r=Ft.formState;if(r!==null){e:{var u=it;if(_t){if(on){t:{for(var E=on,A=to;E.nodeType!==8;){if(!A){E=null;break t}if(E=Pa(E.nextSibling),E===null){E=null;break t}}A=E.data,E=A==="F!"||A==="F"?E:null}if(E){on=Pa(E.nextSibling),u=E.data==="F!";break e}}ms(u)}u=!1}u&&(o=r[0])}}return r=wi(),r.memoizedState=r.baseState=o,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i_,lastRenderedState:o},r.queue=u,r=p_.bind(null,it,u),u.dispatch=r,u=fA(!1),A=SA.bind(null,it,!1,u.queue),u=wi(),E={state:o,dispatch:null,action:i,pending:null},u.queue=E,r=rL.bind(null,it,E,A,r),E.dispatch=r,u.memoizedState=i,[o,r,!1]}function o_(i){var o=Cn();return l_(o,Mt,i)}function l_(i,o,r){if(o=dA(i,o,i_)[0],i=mh(Ho)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var u=Ru(o)}catch(b){throw b===du?ch:b}else u=o;o=Cn();var E=o.queue,A=E.dispatch;return r!==o.memoizedState&&(it.flags|=2048,Ur(9,Ah(),cL.bind(null,E,r),null)),[u,A,i]}function cL(i,o){i.action=o}function s_(i){var o=Cn(),r=Mt;if(r!==null)return l_(o,r,i);Cn(),o=o.memoizedState,r=Cn();var u=r.queue.dispatch;return r.memoizedState=i,[o,u,!1]}function Ur(i,o,r,u){return i={tag:i,create:r,deps:u,inst:o,next:null},o=it.updateQueue,o===null&&(o=cA(),it.updateQueue=o),r=o.lastEffect,r===null?o.lastEffect=i.next=i:(u=r.next,r.next=i,i.next=u,o.lastEffect=i),i}function Ah(){return{destroy:void 0,resource:void 0}}function r_(){return Cn().memoizedState}function Rh(i,o,r,u){var E=wi();u=u===void 0?null:u,it.flags|=i,E.memoizedState=Ur(1|o,Ah(),r,u)}function Tu(i,o,r,u){var E=Cn();u=u===void 0?null:u;var A=E.memoizedState.inst;Mt!==null&&u!==null&&aA(u,Mt.memoizedState.deps)?E.memoizedState=Ur(o,A,r,u):(it.flags|=i,E.memoizedState=Ur(1|o,A,r,u))}function c_(i,o){Rh(8390656,8,i,o)}function u_(i,o){Tu(2048,8,i,o)}function d_(i,o){return Tu(4,2,i,o)}function h_(i,o){return Tu(4,4,i,o)}function f_(i,o){if(typeof o=="function"){i=i();var r=o(i);return function(){typeof r=="function"?r():o(null)}}if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function E_(i,o,r){r=r!=null?r.concat([i]):null,Tu(4,4,f_.bind(null,o,i),r)}function mA(){}function m_(i,o){var r=Cn();o=o===void 0?null:o;var u=r.memoizedState;return o!==null&&aA(o,u[1])?u[0]:(r.memoizedState=[i,o],i)}function A_(i,o){var r=Cn();o=o===void 0?null:o;var u=r.memoizedState;if(o!==null&&aA(o,u[1]))return u[0];if(u=i(),Ss){al(!0);try{i()}finally{al(!1)}}return r.memoizedState=[u,o],u}function AA(i,o,r){return r===void 0||(dl&1073741824)!==0?i.memoizedState=o:(i.memoizedState=r,i=Sp(),it.lanes|=i,Tl|=i,r)}function R_(i,o,r,u){return Wi(r,o)?r:xr.current!==null?(i=AA(i,r,u),Wi(i,o)||(jn=!0),i):(dl&42)===0?(jn=!0,i.memoizedState=r):(i=Sp(),it.lanes|=i,Tl|=i,o)}function T_(i,o,r,u,E){var A=Y.p;Y.p=A!==0&&8>A?A:8;var b=M.T,y={};M.T=y,SA(i,!1,o,r);try{var B=E(),de=M.S;if(de!==null&&de(y,B),B!==null&&typeof B=="object"&&typeof B.then=="function"){var Re=oL(B,u);Su(i,o,Re,Qi(i))}else Su(i,o,u,Qi(i))}catch(_e){Su(i,o,{then:function(){},status:"rejected",reason:_e},Qi())}finally{Y.p=A,M.T=b}}function uL(){}function RA(i,o,r,u){if(i.tag!==5)throw Error(a(476));var E=S_(i).queue;T_(i,E,o,ie,r===null?uL:function(){return g_(i),r(u)})}function S_(i){var o=i.memoizedState;if(o!==null)return o;o={memoizedState:ie,baseState:ie,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ho,lastRenderedState:ie},next:null};var r={};return o.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ho,lastRenderedState:r},next:null},i.memoizedState=o,i=i.alternate,i!==null&&(i.memoizedState=o),o}function g_(i){var o=S_(i).next.queue;Su(i,o,{},Qi())}function TA(){return di(wu)}function I_(){return Cn().memoizedState}function __(){return Cn().memoizedState}function dL(i){for(var o=i.return;o!==null;){switch(o.tag){case 24:case 3:var r=Qi();i=cl(r);var u=ul(o,i,r);u!==null&&(Ji(u,o,r),fu(u,o,r)),o={cache:Xm()},i.payload=o;return}o=o.return}}function hL(i,o,r){var u=Qi();r={lane:u,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null},Th(i)?N_(o,r):(r=Pm(i,o,r,u),r!==null&&(Ji(r,i,u),C_(r,o,u)))}function p_(i,o,r){var u=Qi();Su(i,o,r,u)}function Su(i,o,r,u){var E={lane:u,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null};if(Th(i))N_(o,E);else{var A=i.alternate;if(i.lanes===0&&(A===null||A.lanes===0)&&(A=o.lastRenderedReducer,A!==null))try{var b=o.lastRenderedState,y=A(b,r);if(E.hasEagerState=!0,E.eagerState=y,Wi(y,b))return th(i,o,E,0),Ft===null&&eh(),!1}catch{}finally{}if(r=Pm(i,o,E,u),r!==null)return Ji(r,i,u),C_(r,o,u),!0}return!1}function SA(i,o,r,u){if(u={lane:2,revertLane:$A(),action:u,hasEagerState:!1,eagerState:null,next:null},Th(i)){if(o)throw Error(a(479))}else o=Pm(i,r,u,2),o!==null&&Ji(o,i,2)}function Th(i){var o=i.alternate;return i===it||o!==null&&o===it}function N_(i,o){Hr=hh=!0;var r=i.pending;r===null?o.next=o:(o.next=r.next,r.next=o),i.pending=o}function C_(i,o,r){if((r&4194048)!==0){var u=o.lanes;u&=i.pendingLanes,r|=u,o.lanes=r,xg(i,r)}}var Sh={readContext:di,use:Eh,useCallback:Sn,useContext:Sn,useEffect:Sn,useImperativeHandle:Sn,useLayoutEffect:Sn,useInsertionEffect:Sn,useMemo:Sn,useReducer:Sn,useRef:Sn,useState:Sn,useDebugValue:Sn,useDeferredValue:Sn,useTransition:Sn,useSyncExternalStore:Sn,useId:Sn,useHostTransitionStatus:Sn,useFormState:Sn,useActionState:Sn,useOptimistic:Sn,useMemoCache:Sn,useCacheRefresh:Sn},b_={readContext:di,use:Eh,useCallback:function(i,o){return wi().memoizedState=[i,o===void 0?null:o],i},useContext:di,useEffect:c_,useImperativeHandle:function(i,o,r){r=r!=null?r.concat([i]):null,Rh(4194308,4,f_.bind(null,o,i),r)},useLayoutEffect:function(i,o){return Rh(4194308,4,i,o)},useInsertionEffect:function(i,o){Rh(4,2,i,o)},useMemo:function(i,o){var r=wi();o=o===void 0?null:o;var u=i();if(Ss){al(!0);try{i()}finally{al(!1)}}return r.memoizedState=[u,o],u},useReducer:function(i,o,r){var u=wi();if(r!==void 0){var E=r(o);if(Ss){al(!0);try{r(o)}finally{al(!1)}}}else E=o;return u.memoizedState=u.baseState=E,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:E},u.queue=i,i=i.dispatch=hL.bind(null,it,i),[u.memoizedState,i]},useRef:function(i){var o=wi();return i={current:i},o.memoizedState=i},useState:function(i){i=fA(i);var o=i.queue,r=p_.bind(null,it,o);return o.dispatch=r,[i.memoizedState,r]},useDebugValue:mA,useDeferredValue:function(i,o){var r=wi();return AA(r,i,o)},useTransition:function(){var i=fA(!1);return i=T_.bind(null,it,i.queue,!0,!1),wi().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,o,r){var u=it,E=wi();if(_t){if(r===void 0)throw Error(a(407));r=r()}else{if(r=o(),Ft===null)throw Error(a(349));(Et&124)!==0||WI(u,o,r)}E.memoizedState=r;var A={value:r,getSnapshot:o};return E.queue=A,c_(qI.bind(null,u,A,i),[i]),u.flags|=2048,Ur(9,Ah(),XI.bind(null,u,A,r,o),null),r},useId:function(){var i=wi(),o=Ft.identifierPrefix;if(_t){var r=Mo,u=vo;r=(u&~(1<<32-Vi(u)-1)).toString(32)+r,o=""+o+"R"+r,r=fh++,0<r&&(o+="H"+r.toString(32)),o+=""}else r=lL++,o=""+o+"r"+r.toString(32)+"";return i.memoizedState=o},useHostTransitionStatus:TA,useFormState:a_,useActionState:a_,useOptimistic:function(i){var o=wi();o.memoizedState=o.baseState=i;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=r,o=SA.bind(null,it,!0,r),r.dispatch=o,[i,o]},useMemoCache:uA,useCacheRefresh:function(){return wi().memoizedState=dL.bind(null,it)}},O_={readContext:di,use:Eh,useCallback:m_,useContext:di,useEffect:u_,useImperativeHandle:E_,useInsertionEffect:d_,useLayoutEffect:h_,useMemo:A_,useReducer:mh,useRef:r_,useState:function(){return mh(Ho)},useDebugValue:mA,useDeferredValue:function(i,o){var r=Cn();return R_(r,Mt.memoizedState,i,o)},useTransition:function(){var i=mh(Ho)[0],o=Cn().memoizedState;return[typeof i=="boolean"?i:Ru(i),o]},useSyncExternalStore:VI,useId:I_,useHostTransitionStatus:TA,useFormState:o_,useActionState:o_,useOptimistic:function(i,o){var r=Cn();return QI(r,Mt,i,o)},useMemoCache:uA,useCacheRefresh:__},fL={readContext:di,use:Eh,useCallback:m_,useContext:di,useEffect:u_,useImperativeHandle:E_,useInsertionEffect:d_,useLayoutEffect:h_,useMemo:A_,useReducer:hA,useRef:r_,useState:function(){return hA(Ho)},useDebugValue:mA,useDeferredValue:function(i,o){var r=Cn();return Mt===null?AA(r,i,o):R_(r,Mt.memoizedState,i,o)},useTransition:function(){var i=hA(Ho)[0],o=Cn().memoizedState;return[typeof i=="boolean"?i:Ru(i),o]},useSyncExternalStore:VI,useId:I_,useHostTransitionStatus:TA,useFormState:s_,useActionState:s_,useOptimistic:function(i,o){var r=Cn();return Mt!==null?QI(r,Mt,i,o):(r.baseState=i,[i,r.queue.dispatch])},useMemoCache:uA,useCacheRefresh:__},wr=null,gu=0;function gh(i){var o=gu;return gu+=1,wr===null&&(wr=[]),PI(wr,i,o)}function Iu(i,o){o=o.props.ref,i.ref=o!==void 0?o:null}function Ih(i,o){throw o.$$typeof===T?Error(a(525)):(i=Object.prototype.toString.call(o),Error(a(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i)))}function D_(i){var o=i._init;return o(i._payload)}function y_(i){function o(ne,V){if(i){var ce=ne.deletions;ce===null?(ne.deletions=[V],ne.flags|=16):ce.push(V)}}function r(ne,V){if(!i)return null;for(;V!==null;)o(ne,V),V=V.sibling;return null}function u(ne){for(var V=new Map;ne!==null;)ne.key!==null?V.set(ne.key,ne):V.set(ne.index,ne),ne=ne.sibling;return V}function E(ne,V){return ne=yo(ne,V),ne.index=0,ne.sibling=null,ne}function A(ne,V,ce){return ne.index=ce,i?(ce=ne.alternate,ce!==null?(ce=ce.index,ce<V?(ne.flags|=67108866,V):ce):(ne.flags|=67108866,V)):(ne.flags|=1048576,V)}function b(ne){return i&&ne.alternate===null&&(ne.flags|=67108866),ne}function y(ne,V,ce,Se){return V===null||V.tag!==6?(V=Bm(ce,ne.mode,Se),V.return=ne,V):(V=E(V,ce),V.return=ne,V)}function B(ne,V,ce,Se){var He=ce.type;return He===_?Re(ne,V,ce.props.children,Se,ce.key):V!==null&&(V.elementType===He||typeof He=="object"&&He!==null&&He.$$typeof===j&&D_(He)===V.type)?(V=E(V,ce.props),Iu(V,ce),V.return=ne,V):(V=ih(ce.type,ce.key,ce.props,null,ne.mode,Se),Iu(V,ce),V.return=ne,V)}function de(ne,V,ce,Se){return V===null||V.tag!==4||V.stateNode.containerInfo!==ce.containerInfo||V.stateNode.implementation!==ce.implementation?(V=Fm(ce,ne.mode,Se),V.return=ne,V):(V=E(V,ce.children||[]),V.return=ne,V)}function Re(ne,V,ce,Se,He){return V===null||V.tag!==7?(V=ds(ce,ne.mode,Se,He),V.return=ne,V):(V=E(V,ce),V.return=ne,V)}function _e(ne,V,ce){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=Bm(""+V,ne.mode,ce),V.return=ne,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case S:return ce=ih(V.type,V.key,V.props,null,ne.mode,ce),Iu(ce,V),ce.return=ne,ce;case g:return V=Fm(V,ne.mode,ce),V.return=ne,V;case j:var Se=V._init;return V=Se(V._payload),_e(ne,V,ce)}if(ee(V)||X(V))return V=ds(V,ne.mode,ce,null),V.return=ne,V;if(typeof V.then=="function")return _e(ne,gh(V),ce);if(V.$$typeof===k)return _e(ne,sh(ne,V),ce);Ih(ne,V)}return null}function fe(ne,V,ce,Se){var He=V!==null?V.key:null;if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return He!==null?null:y(ne,V,""+ce,Se);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case S:return ce.key===He?B(ne,V,ce,Se):null;case g:return ce.key===He?de(ne,V,ce,Se):null;case j:return He=ce._init,ce=He(ce._payload),fe(ne,V,ce,Se)}if(ee(ce)||X(ce))return He!==null?null:Re(ne,V,ce,Se,null);if(typeof ce.then=="function")return fe(ne,V,gh(ce),Se);if(ce.$$typeof===k)return fe(ne,V,sh(ne,ce),Se);Ih(ne,ce)}return null}function Ee(ne,V,ce,Se,He){if(typeof Se=="string"&&Se!==""||typeof Se=="number"||typeof Se=="bigint")return ne=ne.get(ce)||null,y(V,ne,""+Se,He);if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case S:return ne=ne.get(Se.key===null?ce:Se.key)||null,B(V,ne,Se,He);case g:return ne=ne.get(Se.key===null?ce:Se.key)||null,de(V,ne,Se,He);case j:var at=Se._init;return Se=at(Se._payload),Ee(ne,V,ce,Se,He)}if(ee(Se)||X(Se))return ne=ne.get(ce)||null,Re(V,ne,Se,He,null);if(typeof Se.then=="function")return Ee(ne,V,ce,gh(Se),He);if(Se.$$typeof===k)return Ee(ne,V,ce,sh(V,Se),He);Ih(V,Se)}return null}function We(ne,V,ce,Se){for(var He=null,at=null,Ge=V,Ve=V=0,Yn=null;Ge!==null&&Ve<ce.length;Ve++){Ge.index>Ve?(Yn=Ge,Ge=null):Yn=Ge.sibling;var It=fe(ne,Ge,ce[Ve],Se);if(It===null){Ge===null&&(Ge=Yn);break}i&&Ge&&It.alternate===null&&o(ne,Ge),V=A(It,V,Ve),at===null?He=It:at.sibling=It,at=It,Ge=Yn}if(Ve===ce.length)return r(ne,Ge),_t&&fs(ne,Ve),He;if(Ge===null){for(;Ve<ce.length;Ve++)Ge=_e(ne,ce[Ve],Se),Ge!==null&&(V=A(Ge,V,Ve),at===null?He=Ge:at.sibling=Ge,at=Ge);return _t&&fs(ne,Ve),He}for(Ge=u(Ge);Ve<ce.length;Ve++)Yn=Ee(Ge,ne,Ve,ce[Ve],Se),Yn!==null&&(i&&Yn.alternate!==null&&Ge.delete(Yn.key===null?Ve:Yn.key),V=A(Yn,V,Ve),at===null?He=Yn:at.sibling=Yn,at=Yn);return i&&Ge.forEach(function(Ol){return o(ne,Ol)}),_t&&fs(ne,Ve),He}function Ye(ne,V,ce,Se){if(ce==null)throw Error(a(151));for(var He=null,at=null,Ge=V,Ve=V=0,Yn=null,It=ce.next();Ge!==null&&!It.done;Ve++,It=ce.next()){Ge.index>Ve?(Yn=Ge,Ge=null):Yn=Ge.sibling;var Ol=fe(ne,Ge,It.value,Se);if(Ol===null){Ge===null&&(Ge=Yn);break}i&&Ge&&Ol.alternate===null&&o(ne,Ge),V=A(Ol,V,Ve),at===null?He=Ol:at.sibling=Ol,at=Ol,Ge=Yn}if(It.done)return r(ne,Ge),_t&&fs(ne,Ve),He;if(Ge===null){for(;!It.done;Ve++,It=ce.next())It=_e(ne,It.value,Se),It!==null&&(V=A(It,V,Ve),at===null?He=It:at.sibling=It,at=It);return _t&&fs(ne,Ve),He}for(Ge=u(Ge);!It.done;Ve++,It=ce.next())It=Ee(Ge,ne,Ve,It.value,Se),It!==null&&(i&&It.alternate!==null&&Ge.delete(It.key===null?Ve:It.key),V=A(It,V,Ve),at===null?He=It:at.sibling=It,at=It);return i&&Ge.forEach(function(E1){return o(ne,E1)}),_t&&fs(ne,Ve),He}function xt(ne,V,ce,Se){if(typeof ce=="object"&&ce!==null&&ce.type===_&&ce.key===null&&(ce=ce.props.children),typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case S:e:{for(var He=ce.key;V!==null;){if(V.key===He){if(He=ce.type,He===_){if(V.tag===7){r(ne,V.sibling),Se=E(V,ce.props.children),Se.return=ne,ne=Se;break e}}else if(V.elementType===He||typeof He=="object"&&He!==null&&He.$$typeof===j&&D_(He)===V.type){r(ne,V.sibling),Se=E(V,ce.props),Iu(Se,ce),Se.return=ne,ne=Se;break e}r(ne,V);break}else o(ne,V);V=V.sibling}ce.type===_?(Se=ds(ce.props.children,ne.mode,Se,ce.key),Se.return=ne,ne=Se):(Se=ih(ce.type,ce.key,ce.props,null,ne.mode,Se),Iu(Se,ce),Se.return=ne,ne=Se)}return b(ne);case g:e:{for(He=ce.key;V!==null;){if(V.key===He)if(V.tag===4&&V.stateNode.containerInfo===ce.containerInfo&&V.stateNode.implementation===ce.implementation){r(ne,V.sibling),Se=E(V,ce.children||[]),Se.return=ne,ne=Se;break e}else{r(ne,V);break}else o(ne,V);V=V.sibling}Se=Fm(ce,ne.mode,Se),Se.return=ne,ne=Se}return b(ne);case j:return He=ce._init,ce=He(ce._payload),xt(ne,V,ce,Se)}if(ee(ce))return We(ne,V,ce,Se);if(X(ce)){if(He=X(ce),typeof He!="function")throw Error(a(150));return ce=He.call(ce),Ye(ne,V,ce,Se)}if(typeof ce.then=="function")return xt(ne,V,gh(ce),Se);if(ce.$$typeof===k)return xt(ne,V,sh(ne,ce),Se);Ih(ne,ce)}return typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint"?(ce=""+ce,V!==null&&V.tag===6?(r(ne,V.sibling),Se=E(V,ce),Se.return=ne,ne=Se):(r(ne,V),Se=Bm(ce,ne.mode,Se),Se.return=ne,ne=Se),b(ne)):r(ne,V)}return function(ne,V,ce,Se){try{gu=0;var He=xt(ne,V,ce,Se);return wr=null,He}catch(Ge){if(Ge===du||Ge===ch)throw Ge;var at=Xi(29,Ge,null,ne.mode);return at.lanes=Se,at.return=ne,at}finally{}}}var Pr=y_(!0),v_=y_(!1),ma=z(null),no=null;function hl(i){var o=i.alternate;F(Hn,Hn.current&1),F(ma,i),no===null&&(o===null||xr.current!==null||o.memoizedState!==null)&&(no=i)}function M_(i){if(i.tag===22){if(F(Hn,Hn.current),F(ma,i),no===null){var o=i.alternate;o!==null&&o.memoizedState!==null&&(no=i)}}else fl()}function fl(){F(Hn,Hn.current),F(ma,ma.current)}function ko(i){q(ma),no===i&&(no=null),q(Hn)}var Hn=z(0);function _h(i){for(var o=i;o!==null;){if(o.tag===13){var r=o.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||cR(r)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function gA(i,o,r,u){o=i.memoizedState,r=r(u,o),r=r==null?o:R({},o,r),i.memoizedState=r,i.lanes===0&&(i.updateQueue.baseState=r)}var IA={enqueueSetState:function(i,o,r){i=i._reactInternals;var u=Qi(),E=cl(u);E.payload=o,r!=null&&(E.callback=r),o=ul(i,E,u),o!==null&&(Ji(o,i,u),fu(o,i,u))},enqueueReplaceState:function(i,o,r){i=i._reactInternals;var u=Qi(),E=cl(u);E.tag=1,E.payload=o,r!=null&&(E.callback=r),o=ul(i,E,u),o!==null&&(Ji(o,i,u),fu(o,i,u))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var r=Qi(),u=cl(r);u.tag=2,o!=null&&(u.callback=o),o=ul(i,u,r),o!==null&&(Ji(o,i,r),fu(o,i,r))}};function L_(i,o,r,u,E,A,b){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,A,b):o.prototype&&o.prototype.isPureReactComponent?!iu(r,u)||!iu(E,A):!0}function x_(i,o,r,u){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(r,u),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(r,u),o.state!==i&&IA.enqueueReplaceState(o,o.state,null)}function gs(i,o){var r=o;if("ref"in o){r={};for(var u in o)u!=="ref"&&(r[u]=o[u])}if(i=i.defaultProps){r===o&&(r=R({},r));for(var E in i)r[E]===void 0&&(r[E]=i[E])}return r}var ph=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function H_(i){ph(i)}function k_(i){console.error(i)}function U_(i){ph(i)}function Nh(i,o){try{var r=i.onUncaughtError;r(o.value,{componentStack:o.stack})}catch(u){setTimeout(function(){throw u})}}function w_(i,o,r){try{var u=i.onCaughtError;u(r.value,{componentStack:r.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function _A(i,o,r){return r=cl(r),r.tag=3,r.payload={element:null},r.callback=function(){Nh(i,o)},r}function P_(i){return i=cl(i),i.tag=3,i}function G_(i,o,r,u){var E=r.type.getDerivedStateFromError;if(typeof E=="function"){var A=u.value;i.payload=function(){return E(A)},i.callback=function(){w_(o,r,u)}}var b=r.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(i.callback=function(){w_(o,r,u),typeof E!="function"&&(Sl===null?Sl=new Set([this]):Sl.add(this));var y=u.stack;this.componentDidCatch(u.value,{componentStack:y!==null?y:""})})}function EL(i,o,r,u,E){if(r.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(o=r.alternate,o!==null&&ru(o,r,E,!0),r=ma.current,r!==null){switch(r.tag){case 13:return no===null?VA():r.alternate===null&&ln===0&&(ln=3),r.flags&=-257,r.flags|=65536,r.lanes=E,u===$m?r.flags|=16384:(o=r.updateQueue,o===null?r.updateQueue=new Set([u]):o.add(u),XA(i,u,E)),!1;case 22:return r.flags|=65536,u===$m?r.flags|=16384:(o=r.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([u])},r.updateQueue=o):(r=o.retryQueue,r===null?o.retryQueue=new Set([u]):r.add(u)),XA(i,u,E)),!1}throw Error(a(435,r.tag))}return XA(i,u,E),VA(),!1}if(_t)return o=ma.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=E,u!==Ym&&(i=Error(a(422),{cause:u}),su(da(i,r)))):(u!==Ym&&(o=Error(a(423),{cause:u}),su(da(o,r))),i=i.current.alternate,i.flags|=65536,E&=-E,i.lanes|=E,u=da(u,r),E=_A(i.stateNode,u,E),eA(i,E),ln!==4&&(ln=2)),!1;var A=Error(a(520),{cause:u});if(A=da(A,r),Du===null?Du=[A]:Du.push(A),ln!==4&&(ln=2),o===null)return!0;u=da(u,r),r=o;do{switch(r.tag){case 3:return r.flags|=65536,i=E&-E,r.lanes|=i,i=_A(r.stateNode,u,i),eA(r,i),!1;case 1:if(o=r.type,A=r.stateNode,(r.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(Sl===null||!Sl.has(A))))return r.flags|=65536,E&=-E,r.lanes|=E,E=P_(E),G_(E,i,r,u),eA(r,E),!1}r=r.return}while(r!==null);return!1}var B_=Error(a(461)),jn=!1;function $n(i,o,r,u){o.child=i===null?v_(o,null,r,u):Pr(o,i.child,r,u)}function F_(i,o,r,u,E){r=r.render;var A=o.ref;if("ref"in u){var b={};for(var y in u)y!=="ref"&&(b[y]=u[y])}else b=u;return Rs(o),u=oA(i,o,r,b,A,E),y=lA(),i!==null&&!jn?(sA(i,o,E),Uo(i,o,E)):(_t&&y&&jm(o),o.flags|=1,$n(i,o,u,E),o.child)}function j_(i,o,r,u,E){if(i===null){var A=r.type;return typeof A=="function"&&!Gm(A)&&A.defaultProps===void 0&&r.compare===null?(o.tag=15,o.type=A,z_(i,o,A,u,E)):(i=ih(r.type,null,u,o,o.mode,E),i.ref=o.ref,i.return=o,o.child=i)}if(A=i.child,!vA(i,E)){var b=A.memoizedProps;if(r=r.compare,r=r!==null?r:iu,r(b,u)&&i.ref===o.ref)return Uo(i,o,E)}return o.flags|=1,i=yo(A,u),i.ref=o.ref,i.return=o,o.child=i}function z_(i,o,r,u,E){if(i!==null){var A=i.memoizedProps;if(iu(A,u)&&i.ref===o.ref)if(jn=!1,o.pendingProps=u=A,vA(i,E))(i.flags&131072)!==0&&(jn=!0);else return o.lanes=i.lanes,Uo(i,o,E)}return pA(i,o,r,u,E)}function Y_(i,o,r){var u=o.pendingProps,E=u.children,A=i!==null?i.memoizedState:null;if(u.mode==="hidden"){if((o.flags&128)!==0){if(u=A!==null?A.baseLanes|r:r,i!==null){for(E=o.child=i.child,A=0;E!==null;)A=A|E.lanes|E.childLanes,E=E.sibling;o.childLanes=A&~u}else o.childLanes=0,o.child=null;return K_(i,o,u,r)}if((r&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},i!==null&&rh(o,A!==null?A.cachePool:null),A!==null?zI(o,A):nA(),M_(o);else return o.lanes=o.childLanes=536870912,K_(i,o,A!==null?A.baseLanes|r:r,r)}else A!==null?(rh(o,A.cachePool),zI(o,A),fl(),o.memoizedState=null):(i!==null&&rh(o,null),nA(),fl());return $n(i,o,E,r),o.child}function K_(i,o,r,u){var E=Zm();return E=E===null?null:{parent:xn._currentValue,pool:E},o.memoizedState={baseLanes:r,cachePool:E},i!==null&&rh(o,null),nA(),M_(o),i!==null&&ru(i,o,u,!0),null}function Ch(i,o){var r=o.ref;if(r===null)i!==null&&i.ref!==null&&(o.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(a(284));(i===null||i.ref!==r)&&(o.flags|=4194816)}}function pA(i,o,r,u,E){return Rs(o),r=oA(i,o,r,u,void 0,E),u=lA(),i!==null&&!jn?(sA(i,o,E),Uo(i,o,E)):(_t&&u&&jm(o),o.flags|=1,$n(i,o,r,E),o.child)}function V_(i,o,r,u,E,A){return Rs(o),o.updateQueue=null,r=KI(o,u,r,E),YI(i),u=lA(),i!==null&&!jn?(sA(i,o,A),Uo(i,o,A)):(_t&&u&&jm(o),o.flags|=1,$n(i,o,r,A),o.child)}function W_(i,o,r,u,E){if(Rs(o),o.stateNode===null){var A=Dr,b=r.contextType;typeof b=="object"&&b!==null&&(A=di(b)),A=new r(u,A),o.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,A.updater=IA,o.stateNode=A,A._reactInternals=o,A=o.stateNode,A.props=u,A.state=o.memoizedState,A.refs={},Qm(o),b=r.contextType,A.context=typeof b=="object"&&b!==null?di(b):Dr,A.state=o.memoizedState,b=r.getDerivedStateFromProps,typeof b=="function"&&(gA(o,r,b,u),A.state=o.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(b=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),b!==A.state&&IA.enqueueReplaceState(A,A.state,null),mu(o,u,A,E),Eu(),A.state=o.memoizedState),typeof A.componentDidMount=="function"&&(o.flags|=4194308),u=!0}else if(i===null){A=o.stateNode;var y=o.memoizedProps,B=gs(r,y);A.props=B;var de=A.context,Re=r.contextType;b=Dr,typeof Re=="object"&&Re!==null&&(b=di(Re));var _e=r.getDerivedStateFromProps;Re=typeof _e=="function"||typeof A.getSnapshotBeforeUpdate=="function",y=o.pendingProps!==y,Re||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(y||de!==b)&&x_(o,A,u,b),rl=!1;var fe=o.memoizedState;A.state=fe,mu(o,u,A,E),Eu(),de=o.memoizedState,y||fe!==de||rl?(typeof _e=="function"&&(gA(o,r,_e,u),de=o.memoizedState),(B=rl||L_(o,r,B,u,fe,de,b))?(Re||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(o.flags|=4194308)):(typeof A.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=u,o.memoizedState=de),A.props=u,A.state=de,A.context=b,u=B):(typeof A.componentDidMount=="function"&&(o.flags|=4194308),u=!1)}else{A=o.stateNode,Jm(i,o),b=o.memoizedProps,Re=gs(r,b),A.props=Re,_e=o.pendingProps,fe=A.context,de=r.contextType,B=Dr,typeof de=="object"&&de!==null&&(B=di(de)),y=r.getDerivedStateFromProps,(de=typeof y=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(b!==_e||fe!==B)&&x_(o,A,u,B),rl=!1,fe=o.memoizedState,A.state=fe,mu(o,u,A,E),Eu();var Ee=o.memoizedState;b!==_e||fe!==Ee||rl||i!==null&&i.dependencies!==null&&lh(i.dependencies)?(typeof y=="function"&&(gA(o,r,y,u),Ee=o.memoizedState),(Re=rl||L_(o,r,Re,u,fe,Ee,B)||i!==null&&i.dependencies!==null&&lh(i.dependencies))?(de||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(u,Ee,B),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(u,Ee,B)),typeof A.componentDidUpdate=="function"&&(o.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof A.componentDidUpdate!="function"||b===i.memoizedProps&&fe===i.memoizedState||(o.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||b===i.memoizedProps&&fe===i.memoizedState||(o.flags|=1024),o.memoizedProps=u,o.memoizedState=Ee),A.props=u,A.state=Ee,A.context=B,u=Re):(typeof A.componentDidUpdate!="function"||b===i.memoizedProps&&fe===i.memoizedState||(o.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||b===i.memoizedProps&&fe===i.memoizedState||(o.flags|=1024),u=!1)}return A=u,Ch(i,o),u=(o.flags&128)!==0,A||u?(A=o.stateNode,r=u&&typeof r.getDerivedStateFromError!="function"?null:A.render(),o.flags|=1,i!==null&&u?(o.child=Pr(o,i.child,null,E),o.child=Pr(o,null,r,E)):$n(i,o,r,E),o.memoizedState=A.state,i=o.child):i=Uo(i,o,E),i}function X_(i,o,r,u){return lu(),o.flags|=256,$n(i,o,r,u),o.child}var NA={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function CA(i){return{baseLanes:i,cachePool:kI()}}function bA(i,o,r){return i=i!==null?i.childLanes&~r:0,o&&(i|=Aa),i}function q_(i,o,r){var u=o.pendingProps,E=!1,A=(o.flags&128)!==0,b;if((b=A)||(b=i!==null&&i.memoizedState===null?!1:(Hn.current&2)!==0),b&&(E=!0,o.flags&=-129),b=(o.flags&32)!==0,o.flags&=-33,i===null){if(_t){if(E?hl(o):fl(),_t){var y=on,B;if(B=y){e:{for(B=y,y=to;B.nodeType!==8;){if(!y){y=null;break e}if(B=Pa(B.nextSibling),B===null){y=null;break e}}y=B}y!==null?(o.memoizedState={dehydrated:y,treeContext:hs!==null?{id:vo,overflow:Mo}:null,retryLane:536870912,hydrationErrors:null},B=Xi(18,null,null,0),B.stateNode=y,B.return=o,o.child=B,Ri=o,on=null,B=!0):B=!1}B||ms(o)}if(y=o.memoizedState,y!==null&&(y=y.dehydrated,y!==null))return cR(y)?o.lanes=32:o.lanes=536870912,null;ko(o)}return y=u.children,u=u.fallback,E?(fl(),E=o.mode,y=bh({mode:"hidden",children:y},E),u=ds(u,E,r,null),y.return=o,u.return=o,y.sibling=u,o.child=y,E=o.child,E.memoizedState=CA(r),E.childLanes=bA(i,b,r),o.memoizedState=NA,u):(hl(o),OA(o,y))}if(B=i.memoizedState,B!==null&&(y=B.dehydrated,y!==null)){if(A)o.flags&256?(hl(o),o.flags&=-257,o=DA(i,o,r)):o.memoizedState!==null?(fl(),o.child=i.child,o.flags|=128,o=null):(fl(),E=u.fallback,y=o.mode,u=bh({mode:"visible",children:u.children},y),E=ds(E,y,r,null),E.flags|=2,u.return=o,E.return=o,u.sibling=E,o.child=u,Pr(o,i.child,null,r),u=o.child,u.memoizedState=CA(r),u.childLanes=bA(i,b,r),o.memoizedState=NA,o=E);else if(hl(o),cR(y)){if(b=y.nextSibling&&y.nextSibling.dataset,b)var de=b.dgst;b=de,u=Error(a(419)),u.stack="",u.digest=b,su({value:u,source:null,stack:null}),o=DA(i,o,r)}else if(jn||ru(i,o,r,!1),b=(r&i.childLanes)!==0,jn||b){if(b=Ft,b!==null&&(u=r&-r,u=(u&42)!==0?1:um(u),u=(u&(b.suspendedLanes|r))!==0?0:u,u!==0&&u!==B.retryLane))throw B.retryLane=u,Or(i,u),Ji(b,i,u),B_;y.data==="$?"||VA(),o=DA(i,o,r)}else y.data==="$?"?(o.flags|=192,o.child=i.child,o=null):(i=B.treeContext,on=Pa(y.nextSibling),Ri=o,_t=!0,Es=null,to=!1,i!==null&&(fa[Ea++]=vo,fa[Ea++]=Mo,fa[Ea++]=hs,vo=i.id,Mo=i.overflow,hs=o),o=OA(o,u.children),o.flags|=4096);return o}return E?(fl(),E=u.fallback,y=o.mode,B=i.child,de=B.sibling,u=yo(B,{mode:"hidden",children:u.children}),u.subtreeFlags=B.subtreeFlags&65011712,de!==null?E=yo(de,E):(E=ds(E,y,r,null),E.flags|=2),E.return=o,u.return=o,u.sibling=E,o.child=u,u=E,E=o.child,y=i.child.memoizedState,y===null?y=CA(r):(B=y.cachePool,B!==null?(de=xn._currentValue,B=B.parent!==de?{parent:de,pool:de}:B):B=kI(),y={baseLanes:y.baseLanes|r,cachePool:B}),E.memoizedState=y,E.childLanes=bA(i,b,r),o.memoizedState=NA,u):(hl(o),r=i.child,i=r.sibling,r=yo(r,{mode:"visible",children:u.children}),r.return=o,r.sibling=null,i!==null&&(b=o.deletions,b===null?(o.deletions=[i],o.flags|=16):b.push(i)),o.child=r,o.memoizedState=null,r)}function OA(i,o){return o=bh({mode:"visible",children:o},i.mode),o.return=i,i.child=o}function bh(i,o){return i=Xi(22,i,null,o),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function DA(i,o,r){return Pr(o,i.child,null,r),i=OA(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function Z_(i,o,r){i.lanes|=o;var u=i.alternate;u!==null&&(u.lanes|=o),Vm(i.return,o,r)}function yA(i,o,r,u,E){var A=i.memoizedState;A===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:u,tail:r,tailMode:E}:(A.isBackwards=o,A.rendering=null,A.renderingStartTime=0,A.last=u,A.tail=r,A.tailMode=E)}function $_(i,o,r){var u=o.pendingProps,E=u.revealOrder,A=u.tail;if($n(i,o,u.children,r),u=Hn.current,(u&2)!==0)u=u&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Z_(i,r,o);else if(i.tag===19)Z_(i,r,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}u&=1}switch(F(Hn,u),E){case"forwards":for(r=o.child,E=null;r!==null;)i=r.alternate,i!==null&&_h(i)===null&&(E=r),r=r.sibling;r=E,r===null?(E=o.child,o.child=null):(E=r.sibling,r.sibling=null),yA(o,!1,E,r,A);break;case"backwards":for(r=null,E=o.child,o.child=null;E!==null;){if(i=E.alternate,i!==null&&_h(i)===null){o.child=E;break}i=E.sibling,E.sibling=r,r=E,E=i}yA(o,!0,r,null,A);break;case"together":yA(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Uo(i,o,r){if(i!==null&&(o.dependencies=i.dependencies),Tl|=o.lanes,(r&o.childLanes)===0)if(i!==null){if(ru(i,o,r,!1),(r&o.childLanes)===0)return null}else return null;if(i!==null&&o.child!==i.child)throw Error(a(153));if(o.child!==null){for(i=o.child,r=yo(i,i.pendingProps),o.child=r,r.return=o;i.sibling!==null;)i=i.sibling,r=r.sibling=yo(i,i.pendingProps),r.return=o;r.sibling=null}return o.child}function vA(i,o){return(i.lanes&o)!==0?!0:(i=i.dependencies,!!(i!==null&&lh(i)))}function mL(i,o,r){switch(o.tag){case 3:me(o,o.stateNode.containerInfo),sl(o,xn,i.memoizedState.cache),lu();break;case 27:case 5:Me(o);break;case 4:me(o,o.stateNode.containerInfo);break;case 10:sl(o,o.type,o.memoizedProps.value);break;case 13:var u=o.memoizedState;if(u!==null)return u.dehydrated!==null?(hl(o),o.flags|=128,null):(r&o.child.childLanes)!==0?q_(i,o,r):(hl(o),i=Uo(i,o,r),i!==null?i.sibling:null);hl(o);break;case 19:var E=(i.flags&128)!==0;if(u=(r&o.childLanes)!==0,u||(ru(i,o,r,!1),u=(r&o.childLanes)!==0),E){if(u)return $_(i,o,r);o.flags|=128}if(E=o.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),F(Hn,Hn.current),u)break;return null;case 22:case 23:return o.lanes=0,Y_(i,o,r);case 24:sl(o,xn,i.memoizedState.cache)}return Uo(i,o,r)}function Q_(i,o,r){if(i!==null)if(i.memoizedProps!==o.pendingProps)jn=!0;else{if(!vA(i,r)&&(o.flags&128)===0)return jn=!1,mL(i,o,r);jn=(i.flags&131072)!==0}else jn=!1,_t&&(o.flags&1048576)!==0&&DI(o,oh,o.index);switch(o.lanes=0,o.tag){case 16:e:{i=o.pendingProps;var u=o.elementType,E=u._init;if(u=E(u._payload),o.type=u,typeof u=="function")Gm(u)?(i=gs(u,i),o.tag=1,o=W_(null,o,u,i,r)):(o.tag=0,o=pA(null,o,u,i,r));else{if(u!=null){if(E=u.$$typeof,E===H){o.tag=11,o=F_(null,o,u,i,r);break e}else if(E===L){o.tag=14,o=j_(null,o,u,i,r);break e}}throw o=W(u)||u,Error(a(306,o,""))}}return o;case 0:return pA(i,o,o.type,o.pendingProps,r);case 1:return u=o.type,E=gs(u,o.pendingProps),W_(i,o,u,E,r);case 3:e:{if(me(o,o.stateNode.containerInfo),i===null)throw Error(a(387));u=o.pendingProps;var A=o.memoizedState;E=A.element,Jm(i,o),mu(o,u,null,r);var b=o.memoizedState;if(u=b.cache,sl(o,xn,u),u!==A.cache&&Wm(o,[xn],r,!0),Eu(),u=b.element,A.isDehydrated)if(A={element:u,isDehydrated:!1,cache:b.cache},o.updateQueue.baseState=A,o.memoizedState=A,o.flags&256){o=X_(i,o,u,r);break e}else if(u!==E){E=da(Error(a(424)),o),su(E),o=X_(i,o,u,r);break e}else{switch(i=o.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(on=Pa(i.firstChild),Ri=o,_t=!0,Es=null,to=!0,r=v_(o,null,u,r),o.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(lu(),u===E){o=Uo(i,o,r);break e}$n(i,o,u,r)}o=o.child}return o;case 26:return Ch(i,o),i===null?(r=nN(o.type,null,o.pendingProps,null))?o.memoizedState=r:_t||(r=o.type,i=o.pendingProps,u=Bh(Q.current).createElement(r),u[ui]=o,u[ki]=i,Jn(u,r,i),Fn(u),o.stateNode=u):o.memoizedState=nN(o.type,i.memoizedProps,o.pendingProps,i.memoizedState),null;case 27:return Me(o),i===null&&_t&&(u=o.stateNode=Jp(o.type,o.pendingProps,Q.current),Ri=o,to=!0,E=on,_l(o.type)?(uR=E,on=Pa(u.firstChild)):on=E),$n(i,o,o.pendingProps.children,r),Ch(i,o),i===null&&(o.flags|=4194304),o.child;case 5:return i===null&&_t&&((E=u=on)&&(u=zL(u,o.type,o.pendingProps,to),u!==null?(o.stateNode=u,Ri=o,on=Pa(u.firstChild),to=!1,E=!0):E=!1),E||ms(o)),Me(o),E=o.type,A=o.pendingProps,b=i!==null?i.memoizedProps:null,u=A.children,lR(E,A)?u=null:b!==null&&lR(E,b)&&(o.flags|=32),o.memoizedState!==null&&(E=oA(i,o,sL,null,null,r),wu._currentValue=E),Ch(i,o),$n(i,o,u,r),o.child;case 6:return i===null&&_t&&((i=r=on)&&(r=YL(r,o.pendingProps,to),r!==null?(o.stateNode=r,Ri=o,on=null,i=!0):i=!1),i||ms(o)),null;case 13:return q_(i,o,r);case 4:return me(o,o.stateNode.containerInfo),u=o.pendingProps,i===null?o.child=Pr(o,null,u,r):$n(i,o,u,r),o.child;case 11:return F_(i,o,o.type,o.pendingProps,r);case 7:return $n(i,o,o.pendingProps,r),o.child;case 8:return $n(i,o,o.pendingProps.children,r),o.child;case 12:return $n(i,o,o.pendingProps.children,r),o.child;case 10:return u=o.pendingProps,sl(o,o.type,u.value),$n(i,o,u.children,r),o.child;case 9:return E=o.type._context,u=o.pendingProps.children,Rs(o),E=di(E),u=u(E),o.flags|=1,$n(i,o,u,r),o.child;case 14:return j_(i,o,o.type,o.pendingProps,r);case 15:return z_(i,o,o.type,o.pendingProps,r);case 19:return $_(i,o,r);case 31:return u=o.pendingProps,r=o.mode,u={mode:u.mode,children:u.children},i===null?(r=bh(u,r),r.ref=o.ref,o.child=r,r.return=o,o=r):(r=yo(i.child,u),r.ref=o.ref,o.child=r,r.return=o,o=r),o;case 22:return Y_(i,o,r);case 24:return Rs(o),u=di(xn),i===null?(E=Zm(),E===null&&(E=Ft,A=Xm(),E.pooledCache=A,A.refCount++,A!==null&&(E.pooledCacheLanes|=r),E=A),o.memoizedState={parent:u,cache:E},Qm(o),sl(o,xn,E)):((i.lanes&r)!==0&&(Jm(i,o),mu(o,null,null,r),Eu()),E=i.memoizedState,A=o.memoizedState,E.parent!==u?(E={parent:u,cache:u},o.memoizedState=E,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=E),sl(o,xn,u)):(u=A.cache,sl(o,xn,u),u!==E.cache&&Wm(o,[xn],r,!0))),$n(i,o,o.pendingProps.children,r),o.child;case 29:throw o.pendingProps}throw Error(a(156,o.tag))}function wo(i){i.flags|=4}function J_(i,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!sN(o)){if(o=ma.current,o!==null&&((Et&4194048)===Et?no!==null:(Et&62914560)!==Et&&(Et&536870912)===0||o!==no))throw hu=$m,UI;i.flags|=8192}}function Oh(i,o){o!==null&&(i.flags|=4),i.flags&16384&&(o=i.tag!==22?Mg():536870912,i.lanes|=o,jr|=o)}function _u(i,o){if(!_t)switch(i.tailMode){case"hidden":o=i.tail;for(var r=null;o!==null;)o.alternate!==null&&(r=o),o=o.sibling;r===null?i.tail=null:r.sibling=null;break;case"collapsed":r=i.tail;for(var u=null;r!==null;)r.alternate!==null&&(u=r),r=r.sibling;u===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function $t(i){var o=i.alternate!==null&&i.alternate.child===i.child,r=0,u=0;if(o)for(var E=i.child;E!==null;)r|=E.lanes|E.childLanes,u|=E.subtreeFlags&65011712,u|=E.flags&65011712,E.return=i,E=E.sibling;else for(E=i.child;E!==null;)r|=E.lanes|E.childLanes,u|=E.subtreeFlags,u|=E.flags,E.return=i,E=E.sibling;return i.subtreeFlags|=u,i.childLanes=r,o}function AL(i,o,r){var u=o.pendingProps;switch(zm(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $t(o),null;case 1:return $t(o),null;case 3:return r=o.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),xo(xn),Ie(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(i===null||i.child===null)&&(ou(o)?wo(o):i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,MI())),$t(o),null;case 26:return r=o.memoizedState,i===null?(wo(o),r!==null?($t(o),J_(o,r)):($t(o),o.flags&=-16777217)):r?r!==i.memoizedState?(wo(o),$t(o),J_(o,r)):($t(o),o.flags&=-16777217):(i.memoizedProps!==u&&wo(o),$t(o),o.flags&=-16777217),null;case 27:pe(o),r=Q.current;var E=o.type;if(i!==null&&o.stateNode!=null)i.memoizedProps!==u&&wo(o);else{if(!u){if(o.stateNode===null)throw Error(a(166));return $t(o),null}i=ae.current,ou(o)?yI(o):(i=Jp(E,u,r),o.stateNode=i,wo(o))}return $t(o),null;case 5:if(pe(o),r=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==u&&wo(o);else{if(!u){if(o.stateNode===null)throw Error(a(166));return $t(o),null}if(i=ae.current,ou(o))yI(o);else{switch(E=Bh(Q.current),i){case 1:i=E.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:i=E.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":i=E.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":i=E.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":i=E.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof u.is=="string"?E.createElement("select",{is:u.is}):E.createElement("select"),u.multiple?i.multiple=!0:u.size&&(i.size=u.size);break;default:i=typeof u.is=="string"?E.createElement(r,{is:u.is}):E.createElement(r)}}i[ui]=o,i[ki]=u;e:for(E=o.child;E!==null;){if(E.tag===5||E.tag===6)i.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===o)break e;for(;E.sibling===null;){if(E.return===null||E.return===o)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}o.stateNode=i;e:switch(Jn(i,r,u),r){case"button":case"input":case"select":case"textarea":i=!!u.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&wo(o)}}return $t(o),o.flags&=-16777217,null;case 6:if(i&&o.stateNode!=null)i.memoizedProps!==u&&wo(o);else{if(typeof u!="string"&&o.stateNode===null)throw Error(a(166));if(i=Q.current,ou(o)){if(i=o.stateNode,r=o.memoizedProps,u=null,E=Ri,E!==null)switch(E.tag){case 27:case 5:u=E.memoizedProps}i[ui]=o,i=!!(i.nodeValue===r||u!==null&&u.suppressHydrationWarning===!0||Vp(i.nodeValue,r)),i||ms(o)}else i=Bh(i).createTextNode(u),i[ui]=o,o.stateNode=i}return $t(o),null;case 13:if(u=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(E=ou(o),u!==null&&u.dehydrated!==null){if(i===null){if(!E)throw Error(a(318));if(E=o.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(a(317));E[ui]=o}else lu(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;$t(o),E=!1}else E=MI(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=E),E=!0;if(!E)return o.flags&256?(ko(o),o):(ko(o),null)}if(ko(o),(o.flags&128)!==0)return o.lanes=r,o;if(r=u!==null,i=i!==null&&i.memoizedState!==null,r){u=o.child,E=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(E=u.alternate.memoizedState.cachePool.pool);var A=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(A=u.memoizedState.cachePool.pool),A!==E&&(u.flags|=2048)}return r!==i&&r&&(o.child.flags|=8192),Oh(o,o.updateQueue),$t(o),null;case 4:return Ie(),i===null&&tR(o.stateNode.containerInfo),$t(o),null;case 10:return xo(o.type),$t(o),null;case 19:if(q(Hn),E=o.memoizedState,E===null)return $t(o),null;if(u=(o.flags&128)!==0,A=E.rendering,A===null)if(u)_u(E,!1);else{if(ln!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(A=_h(i),A!==null){for(o.flags|=128,_u(E,!1),i=A.updateQueue,o.updateQueue=i,Oh(o,i),o.subtreeFlags=0,i=r,r=o.child;r!==null;)OI(r,i),r=r.sibling;return F(Hn,Hn.current&1|2),o.child}i=i.sibling}E.tail!==null&&ye()>vh&&(o.flags|=128,u=!0,_u(E,!1),o.lanes=4194304)}else{if(!u)if(i=_h(A),i!==null){if(o.flags|=128,u=!0,i=i.updateQueue,o.updateQueue=i,Oh(o,i),_u(E,!0),E.tail===null&&E.tailMode==="hidden"&&!A.alternate&&!_t)return $t(o),null}else 2*ye()-E.renderingStartTime>vh&&r!==536870912&&(o.flags|=128,u=!0,_u(E,!1),o.lanes=4194304);E.isBackwards?(A.sibling=o.child,o.child=A):(i=E.last,i!==null?i.sibling=A:o.child=A,E.last=A)}return E.tail!==null?(o=E.tail,E.rendering=o,E.tail=o.sibling,E.renderingStartTime=ye(),o.sibling=null,i=Hn.current,F(Hn,u?i&1|2:i&1),o):($t(o),null);case 22:case 23:return ko(o),iA(),u=o.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(o.flags|=8192):u&&(o.flags|=8192),u?(r&536870912)!==0&&(o.flags&128)===0&&($t(o),o.subtreeFlags&6&&(o.flags|=8192)):$t(o),r=o.updateQueue,r!==null&&Oh(o,r.retryQueue),r=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),u=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(u=o.memoizedState.cachePool.pool),u!==r&&(o.flags|=2048),i!==null&&q(Ts),null;case 24:return r=null,i!==null&&(r=i.memoizedState.cache),o.memoizedState.cache!==r&&(o.flags|=2048),xo(xn),$t(o),null;case 25:return null;case 30:return null}throw Error(a(156,o.tag))}function RL(i,o){switch(zm(o),o.tag){case 1:return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return xo(xn),Ie(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 26:case 27:case 5:return pe(o),null;case 13:if(ko(o),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(a(340));lu()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return q(Hn),null;case 4:return Ie(),null;case 10:return xo(o.type),null;case 22:case 23:return ko(o),iA(),i!==null&&q(Ts),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 24:return xo(xn),null;case 25:return null;default:return null}}function ep(i,o){switch(zm(o),o.tag){case 3:xo(xn),Ie();break;case 26:case 27:case 5:pe(o);break;case 4:Ie();break;case 13:ko(o);break;case 19:q(Hn);break;case 10:xo(o.type);break;case 22:case 23:ko(o),iA(),i!==null&&q(Ts);break;case 24:xo(xn)}}function pu(i,o){try{var r=o.updateQueue,u=r!==null?r.lastEffect:null;if(u!==null){var E=u.next;r=E;do{if((r.tag&i)===i){u=void 0;var A=r.create,b=r.inst;u=A(),b.destroy=u}r=r.next}while(r!==E)}}catch(y){Ut(o,o.return,y)}}function El(i,o,r){try{var u=o.updateQueue,E=u!==null?u.lastEffect:null;if(E!==null){var A=E.next;u=A;do{if((u.tag&i)===i){var b=u.inst,y=b.destroy;if(y!==void 0){b.destroy=void 0,E=o;var B=r,de=y;try{de()}catch(Re){Ut(E,B,Re)}}}u=u.next}while(u!==A)}}catch(Re){Ut(o,o.return,Re)}}function tp(i){var o=i.updateQueue;if(o!==null){var r=i.stateNode;try{jI(o,r)}catch(u){Ut(i,i.return,u)}}}function np(i,o,r){r.props=gs(i.type,i.memoizedProps),r.state=i.memoizedState;try{r.componentWillUnmount()}catch(u){Ut(i,o,u)}}function Nu(i,o){try{var r=i.ref;if(r!==null){switch(i.tag){case 26:case 27:case 5:var u=i.stateNode;break;case 30:u=i.stateNode;break;default:u=i.stateNode}typeof r=="function"?i.refCleanup=r(u):r.current=u}}catch(E){Ut(i,o,E)}}function io(i,o){var r=i.ref,u=i.refCleanup;if(r!==null)if(typeof u=="function")try{u()}catch(E){Ut(i,o,E)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(E){Ut(i,o,E)}else r.current=null}function ip(i){var o=i.type,r=i.memoizedProps,u=i.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":r.autoFocus&&u.focus();break e;case"img":r.src?u.src=r.src:r.srcSet&&(u.srcset=r.srcSet)}}catch(E){Ut(i,i.return,E)}}function MA(i,o,r){try{var u=i.stateNode;PL(u,i.type,r,o),u[ki]=o}catch(E){Ut(i,i.return,E)}}function ap(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&_l(i.type)||i.tag===4}function LA(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||ap(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&_l(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function xA(i,o,r){var u=i.tag;if(u===5||u===6)i=i.stateNode,o?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(i,o):(o=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.appendChild(i),r=r._reactRootContainer,r!=null||o.onclick!==null||(o.onclick=Gh));else if(u!==4&&(u===27&&_l(i.type)&&(r=i.stateNode,o=null),i=i.child,i!==null))for(xA(i,o,r),i=i.sibling;i!==null;)xA(i,o,r),i=i.sibling}function Dh(i,o,r){var u=i.tag;if(u===5||u===6)i=i.stateNode,o?r.insertBefore(i,o):r.appendChild(i);else if(u!==4&&(u===27&&_l(i.type)&&(r=i.stateNode),i=i.child,i!==null))for(Dh(i,o,r),i=i.sibling;i!==null;)Dh(i,o,r),i=i.sibling}function op(i){var o=i.stateNode,r=i.memoizedProps;try{for(var u=i.type,E=o.attributes;E.length;)o.removeAttributeNode(E[0]);Jn(o,u,r),o[ui]=i,o[ki]=r}catch(A){Ut(i,i.return,A)}}var Po=!1,gn=!1,HA=!1,lp=typeof WeakSet=="function"?WeakSet:Set,zn=null;function TL(i,o){if(i=i.containerInfo,aR=Vh,i=RI(i),Lm(i)){if("selectionStart"in i)var r={start:i.selectionStart,end:i.selectionEnd};else e:{r=(r=i.ownerDocument)&&r.defaultView||window;var u=r.getSelection&&r.getSelection();if(u&&u.rangeCount!==0){r=u.anchorNode;var E=u.anchorOffset,A=u.focusNode;u=u.focusOffset;try{r.nodeType,A.nodeType}catch{r=null;break e}var b=0,y=-1,B=-1,de=0,Re=0,_e=i,fe=null;t:for(;;){for(var Ee;_e!==r||E!==0&&_e.nodeType!==3||(y=b+E),_e!==A||u!==0&&_e.nodeType!==3||(B=b+u),_e.nodeType===3&&(b+=_e.nodeValue.length),(Ee=_e.firstChild)!==null;)fe=_e,_e=Ee;for(;;){if(_e===i)break t;if(fe===r&&++de===E&&(y=b),fe===A&&++Re===u&&(B=b),(Ee=_e.nextSibling)!==null)break;_e=fe,fe=_e.parentNode}_e=Ee}r=y===-1||B===-1?null:{start:y,end:B}}else r=null}r=r||{start:0,end:0}}else r=null;for(oR={focusedElem:i,selectionRange:r},Vh=!1,zn=o;zn!==null;)if(o=zn,i=o.child,(o.subtreeFlags&1024)!==0&&i!==null)i.return=o,zn=i;else for(;zn!==null;){switch(o=zn,A=o.alternate,i=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&A!==null){i=void 0,r=o,E=A.memoizedProps,A=A.memoizedState,u=r.stateNode;try{var We=gs(r.type,E,r.elementType===r.type);i=u.getSnapshotBeforeUpdate(We,A),u.__reactInternalSnapshotBeforeUpdate=i}catch(Ye){Ut(r,r.return,Ye)}}break;case 3:if((i&1024)!==0){if(i=o.stateNode.containerInfo,r=i.nodeType,r===9)rR(i);else if(r===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":rR(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(a(163))}if(i=o.sibling,i!==null){i.return=o.return,zn=i;break}zn=o.return}}function sp(i,o,r){var u=r.flags;switch(r.tag){case 0:case 11:case 15:ml(i,r),u&4&&pu(5,r);break;case 1:if(ml(i,r),u&4)if(i=r.stateNode,o===null)try{i.componentDidMount()}catch(b){Ut(r,r.return,b)}else{var E=gs(r.type,o.memoizedProps);o=o.memoizedState;try{i.componentDidUpdate(E,o,i.__reactInternalSnapshotBeforeUpdate)}catch(b){Ut(r,r.return,b)}}u&64&&tp(r),u&512&&Nu(r,r.return);break;case 3:if(ml(i,r),u&64&&(i=r.updateQueue,i!==null)){if(o=null,r.child!==null)switch(r.child.tag){case 27:case 5:o=r.child.stateNode;break;case 1:o=r.child.stateNode}try{jI(i,o)}catch(b){Ut(r,r.return,b)}}break;case 27:o===null&&u&4&&op(r);case 26:case 5:ml(i,r),o===null&&u&4&&ip(r),u&512&&Nu(r,r.return);break;case 12:ml(i,r);break;case 13:ml(i,r),u&4&&up(i,r),u&64&&(i=r.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(r=OL.bind(null,r),KL(i,r))));break;case 22:if(u=r.memoizedState!==null||Po,!u){o=o!==null&&o.memoizedState!==null||gn,E=Po;var A=gn;Po=u,(gn=o)&&!A?Al(i,r,(r.subtreeFlags&8772)!==0):ml(i,r),Po=E,gn=A}break;case 30:break;default:ml(i,r)}}function rp(i){var o=i.alternate;o!==null&&(i.alternate=null,rp(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&fm(o)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Wt=null,Pi=!1;function Go(i,o,r){for(r=r.child;r!==null;)cp(i,o,r),r=r.sibling}function cp(i,o,r){if(Ki&&typeof Ki.onCommitFiberUnmount=="function")try{Ki.onCommitFiberUnmount(Kc,r)}catch{}switch(r.tag){case 26:gn||io(r,o),Go(i,o,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:gn||io(r,o);var u=Wt,E=Pi;_l(r.type)&&(Wt=r.stateNode,Pi=!1),Go(i,o,r),xu(r.stateNode),Wt=u,Pi=E;break;case 5:gn||io(r,o);case 6:if(u=Wt,E=Pi,Wt=null,Go(i,o,r),Wt=u,Pi=E,Wt!==null)if(Pi)try{(Wt.nodeType===9?Wt.body:Wt.nodeName==="HTML"?Wt.ownerDocument.body:Wt).removeChild(r.stateNode)}catch(A){Ut(r,o,A)}else try{Wt.removeChild(r.stateNode)}catch(A){Ut(r,o,A)}break;case 18:Wt!==null&&(Pi?(i=Wt,$p(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,r.stateNode),Fu(i)):$p(Wt,r.stateNode));break;case 4:u=Wt,E=Pi,Wt=r.stateNode.containerInfo,Pi=!0,Go(i,o,r),Wt=u,Pi=E;break;case 0:case 11:case 14:case 15:gn||El(2,r,o),gn||El(4,r,o),Go(i,o,r);break;case 1:gn||(io(r,o),u=r.stateNode,typeof u.componentWillUnmount=="function"&&np(r,o,u)),Go(i,o,r);break;case 21:Go(i,o,r);break;case 22:gn=(u=gn)||r.memoizedState!==null,Go(i,o,r),gn=u;break;default:Go(i,o,r)}}function up(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Fu(i)}catch(r){Ut(o,o.return,r)}}function SL(i){switch(i.tag){case 13:case 19:var o=i.stateNode;return o===null&&(o=i.stateNode=new lp),o;case 22:return i=i.stateNode,o=i._retryCache,o===null&&(o=i._retryCache=new lp),o;default:throw Error(a(435,i.tag))}}function kA(i,o){var r=SL(i);o.forEach(function(u){var E=DL.bind(null,i,u);r.has(u)||(r.add(u),u.then(E,E))})}function qi(i,o){var r=o.deletions;if(r!==null)for(var u=0;u<r.length;u++){var E=r[u],A=i,b=o,y=b;e:for(;y!==null;){switch(y.tag){case 27:if(_l(y.type)){Wt=y.stateNode,Pi=!1;break e}break;case 5:Wt=y.stateNode,Pi=!1;break e;case 3:case 4:Wt=y.stateNode.containerInfo,Pi=!0;break e}y=y.return}if(Wt===null)throw Error(a(160));cp(A,b,E),Wt=null,Pi=!1,A=E.alternate,A!==null&&(A.return=null),E.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)dp(o,i),o=o.sibling}var wa=null;function dp(i,o){var r=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:qi(o,i),Zi(i),u&4&&(El(3,i,i.return),pu(3,i),El(5,i,i.return));break;case 1:qi(o,i),Zi(i),u&512&&(gn||r===null||io(r,r.return)),u&64&&Po&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(r=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=r===null?u:r.concat(u))));break;case 26:var E=wa;if(qi(o,i),Zi(i),u&512&&(gn||r===null||io(r,r.return)),u&4){var A=r!==null?r.memoizedState:null;if(u=i.memoizedState,r===null)if(u===null)if(i.stateNode===null){e:{u=i.type,r=i.memoizedProps,E=E.ownerDocument||E;t:switch(u){case"title":A=E.getElementsByTagName("title")[0],(!A||A[Xc]||A[ui]||A.namespaceURI==="http://www.w3.org/2000/svg"||A.hasAttribute("itemprop"))&&(A=E.createElement(u),E.head.insertBefore(A,E.querySelector("head > title"))),Jn(A,u,r),A[ui]=i,Fn(A),u=A;break e;case"link":var b=oN("link","href",E).get(u+(r.href||""));if(b){for(var y=0;y<b.length;y++)if(A=b[y],A.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&A.getAttribute("rel")===(r.rel==null?null:r.rel)&&A.getAttribute("title")===(r.title==null?null:r.title)&&A.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){b.splice(y,1);break t}}A=E.createElement(u),Jn(A,u,r),E.head.appendChild(A);break;case"meta":if(b=oN("meta","content",E).get(u+(r.content||""))){for(y=0;y<b.length;y++)if(A=b[y],A.getAttribute("content")===(r.content==null?null:""+r.content)&&A.getAttribute("name")===(r.name==null?null:r.name)&&A.getAttribute("property")===(r.property==null?null:r.property)&&A.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&A.getAttribute("charset")===(r.charSet==null?null:r.charSet)){b.splice(y,1);break t}}A=E.createElement(u),Jn(A,u,r),E.head.appendChild(A);break;default:throw Error(a(468,u))}A[ui]=i,Fn(A),u=A}i.stateNode=u}else lN(E,i.type,i.stateNode);else i.stateNode=aN(E,u,i.memoizedProps);else A!==u?(A===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):A.count--,u===null?lN(E,i.type,i.stateNode):aN(E,u,i.memoizedProps)):u===null&&i.stateNode!==null&&MA(i,i.memoizedProps,r.memoizedProps)}break;case 27:qi(o,i),Zi(i),u&512&&(gn||r===null||io(r,r.return)),r!==null&&u&4&&MA(i,i.memoizedProps,r.memoizedProps);break;case 5:if(qi(o,i),Zi(i),u&512&&(gn||r===null||io(r,r.return)),i.flags&32){E=i.stateNode;try{gr(E,"")}catch(Ee){Ut(i,i.return,Ee)}}u&4&&i.stateNode!=null&&(E=i.memoizedProps,MA(i,E,r!==null?r.memoizedProps:E)),u&1024&&(HA=!0);break;case 6:if(qi(o,i),Zi(i),u&4){if(i.stateNode===null)throw Error(a(162));u=i.memoizedProps,r=i.stateNode;try{r.nodeValue=u}catch(Ee){Ut(i,i.return,Ee)}}break;case 3:if(zh=null,E=wa,wa=Fh(o.containerInfo),qi(o,i),wa=E,Zi(i),u&4&&r!==null&&r.memoizedState.isDehydrated)try{Fu(o.containerInfo)}catch(Ee){Ut(i,i.return,Ee)}HA&&(HA=!1,hp(i));break;case 4:u=wa,wa=Fh(i.stateNode.containerInfo),qi(o,i),Zi(i),wa=u;break;case 12:qi(o,i),Zi(i);break;case 13:qi(o,i),Zi(i),i.child.flags&8192&&i.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(FA=ye()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,kA(i,u)));break;case 22:E=i.memoizedState!==null;var B=r!==null&&r.memoizedState!==null,de=Po,Re=gn;if(Po=de||E,gn=Re||B,qi(o,i),gn=Re,Po=de,Zi(i),u&8192)e:for(o=i.stateNode,o._visibility=E?o._visibility&-2:o._visibility|1,E&&(r===null||B||Po||gn||Is(i)),r=null,o=i;;){if(o.tag===5||o.tag===26){if(r===null){B=r=o;try{if(A=B.stateNode,E)b=A.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{y=B.stateNode;var _e=B.memoizedProps.style,fe=_e!=null&&_e.hasOwnProperty("display")?_e.display:null;y.style.display=fe==null||typeof fe=="boolean"?"":(""+fe).trim()}}catch(Ee){Ut(B,B.return,Ee)}}}else if(o.tag===6){if(r===null){B=o;try{B.stateNode.nodeValue=E?"":B.memoizedProps}catch(Ee){Ut(B,B.return,Ee)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===i)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break e;for(;o.sibling===null;){if(o.return===null||o.return===i)break e;r===o&&(r=null),o=o.return}r===o&&(r=null),o.sibling.return=o.return,o=o.sibling}u&4&&(u=i.updateQueue,u!==null&&(r=u.retryQueue,r!==null&&(u.retryQueue=null,kA(i,r))));break;case 19:qi(o,i),Zi(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,kA(i,u)));break;case 30:break;case 21:break;default:qi(o,i),Zi(i)}}function Zi(i){var o=i.flags;if(o&2){try{for(var r,u=i.return;u!==null;){if(ap(u)){r=u;break}u=u.return}if(r==null)throw Error(a(160));switch(r.tag){case 27:var E=r.stateNode,A=LA(i);Dh(i,A,E);break;case 5:var b=r.stateNode;r.flags&32&&(gr(b,""),r.flags&=-33);var y=LA(i);Dh(i,y,b);break;case 3:case 4:var B=r.stateNode.containerInfo,de=LA(i);xA(i,de,B);break;default:throw Error(a(161))}}catch(Re){Ut(i,i.return,Re)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function hp(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var o=i;hp(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),i=i.sibling}}function ml(i,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)sp(i,o.alternate,o),o=o.sibling}function Is(i){for(i=i.child;i!==null;){var o=i;switch(o.tag){case 0:case 11:case 14:case 15:El(4,o,o.return),Is(o);break;case 1:io(o,o.return);var r=o.stateNode;typeof r.componentWillUnmount=="function"&&np(o,o.return,r),Is(o);break;case 27:xu(o.stateNode);case 26:case 5:io(o,o.return),Is(o);break;case 22:o.memoizedState===null&&Is(o);break;case 30:Is(o);break;default:Is(o)}i=i.sibling}}function Al(i,o,r){for(r=r&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var u=o.alternate,E=i,A=o,b=A.flags;switch(A.tag){case 0:case 11:case 15:Al(E,A,r),pu(4,A);break;case 1:if(Al(E,A,r),u=A,E=u.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(de){Ut(u,u.return,de)}if(u=A,E=u.updateQueue,E!==null){var y=u.stateNode;try{var B=E.shared.hiddenCallbacks;if(B!==null)for(E.shared.hiddenCallbacks=null,E=0;E<B.length;E++)FI(B[E],y)}catch(de){Ut(u,u.return,de)}}r&&b&64&&tp(A),Nu(A,A.return);break;case 27:op(A);case 26:case 5:Al(E,A,r),r&&u===null&&b&4&&ip(A),Nu(A,A.return);break;case 12:Al(E,A,r);break;case 13:Al(E,A,r),r&&b&4&&up(E,A);break;case 22:A.memoizedState===null&&Al(E,A,r),Nu(A,A.return);break;case 30:break;default:Al(E,A,r)}o=o.sibling}}function UA(i,o){var r=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),i=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(i=o.memoizedState.cachePool.pool),i!==r&&(i!=null&&i.refCount++,r!=null&&cu(r))}function wA(i,o){i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&cu(i))}function ao(i,o,r,u){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)fp(i,o,r,u),o=o.sibling}function fp(i,o,r,u){var E=o.flags;switch(o.tag){case 0:case 11:case 15:ao(i,o,r,u),E&2048&&pu(9,o);break;case 1:ao(i,o,r,u);break;case 3:ao(i,o,r,u),E&2048&&(i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&cu(i)));break;case 12:if(E&2048){ao(i,o,r,u),i=o.stateNode;try{var A=o.memoizedProps,b=A.id,y=A.onPostCommit;typeof y=="function"&&y(b,o.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(B){Ut(o,o.return,B)}}else ao(i,o,r,u);break;case 13:ao(i,o,r,u);break;case 23:break;case 22:A=o.stateNode,b=o.alternate,o.memoizedState!==null?A._visibility&2?ao(i,o,r,u):Cu(i,o):A._visibility&2?ao(i,o,r,u):(A._visibility|=2,Gr(i,o,r,u,(o.subtreeFlags&10256)!==0)),E&2048&&UA(b,o);break;case 24:ao(i,o,r,u),E&2048&&wA(o.alternate,o);break;default:ao(i,o,r,u)}}function Gr(i,o,r,u,E){for(E=E&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var A=i,b=o,y=r,B=u,de=b.flags;switch(b.tag){case 0:case 11:case 15:Gr(A,b,y,B,E),pu(8,b);break;case 23:break;case 22:var Re=b.stateNode;b.memoizedState!==null?Re._visibility&2?Gr(A,b,y,B,E):Cu(A,b):(Re._visibility|=2,Gr(A,b,y,B,E)),E&&de&2048&&UA(b.alternate,b);break;case 24:Gr(A,b,y,B,E),E&&de&2048&&wA(b.alternate,b);break;default:Gr(A,b,y,B,E)}o=o.sibling}}function Cu(i,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var r=i,u=o,E=u.flags;switch(u.tag){case 22:Cu(r,u),E&2048&&UA(u.alternate,u);break;case 24:Cu(r,u),E&2048&&wA(u.alternate,u);break;default:Cu(r,u)}o=o.sibling}}var bu=8192;function Br(i){if(i.subtreeFlags&bu)for(i=i.child;i!==null;)Ep(i),i=i.sibling}function Ep(i){switch(i.tag){case 26:Br(i),i.flags&bu&&i.memoizedState!==null&&a1(wa,i.memoizedState,i.memoizedProps);break;case 5:Br(i);break;case 3:case 4:var o=wa;wa=Fh(i.stateNode.containerInfo),Br(i),wa=o;break;case 22:i.memoizedState===null&&(o=i.alternate,o!==null&&o.memoizedState!==null?(o=bu,bu=16777216,Br(i),bu=o):Br(i));break;default:Br(i)}}function mp(i){var o=i.alternate;if(o!==null&&(i=o.child,i!==null)){o.child=null;do o=i.sibling,i.sibling=null,i=o;while(i!==null)}}function Ou(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var r=0;r<o.length;r++){var u=o[r];zn=u,Rp(u,i)}mp(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Ap(i),i=i.sibling}function Ap(i){switch(i.tag){case 0:case 11:case 15:Ou(i),i.flags&2048&&El(9,i,i.return);break;case 3:Ou(i);break;case 12:Ou(i);break;case 22:var o=i.stateNode;i.memoizedState!==null&&o._visibility&2&&(i.return===null||i.return.tag!==13)?(o._visibility&=-3,yh(i)):Ou(i);break;default:Ou(i)}}function yh(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var r=0;r<o.length;r++){var u=o[r];zn=u,Rp(u,i)}mp(i)}for(i=i.child;i!==null;){switch(o=i,o.tag){case 0:case 11:case 15:El(8,o,o.return),yh(o);break;case 22:r=o.stateNode,r._visibility&2&&(r._visibility&=-3,yh(o));break;default:yh(o)}i=i.sibling}}function Rp(i,o){for(;zn!==null;){var r=zn;switch(r.tag){case 0:case 11:case 15:El(8,r,o);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var u=r.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:cu(r.memoizedState.cache)}if(u=r.child,u!==null)u.return=r,zn=u;else e:for(r=i;zn!==null;){u=zn;var E=u.sibling,A=u.return;if(rp(u),u===r){zn=null;break e}if(E!==null){E.return=A,zn=E;break e}zn=A}}}var gL={getCacheForType:function(i){var o=di(xn),r=o.data.get(i);return r===void 0&&(r=i(),o.data.set(i,r)),r}},IL=typeof WeakMap=="function"?WeakMap:Map,bt=0,Ft=null,ct=null,Et=0,Ot=0,$i=null,Rl=!1,Fr=!1,PA=!1,Bo=0,ln=0,Tl=0,_s=0,GA=0,Aa=0,jr=0,Du=null,Gi=null,BA=!1,FA=0,vh=1/0,Mh=null,Sl=null,Qn=0,gl=null,zr=null,Yr=0,jA=0,zA=null,Tp=null,yu=0,YA=null;function Qi(){if((bt&2)!==0&&Et!==0)return Et&-Et;if(M.T!==null){var i=Mr;return i!==0?i:$A()}return Hg()}function Sp(){Aa===0&&(Aa=(Et&536870912)===0||_t?vg():536870912);var i=ma.current;return i!==null&&(i.flags|=32),Aa}function Ji(i,o,r){(i===Ft&&(Ot===2||Ot===9)||i.cancelPendingCommit!==null)&&(Kr(i,0),Il(i,Et,Aa,!1)),Wc(i,r),((bt&2)===0||i!==Ft)&&(i===Ft&&((bt&2)===0&&(_s|=r),ln===4&&Il(i,Et,Aa,!1)),oo(i))}function gp(i,o,r){if((bt&6)!==0)throw Error(a(327));var u=!r&&(o&124)===0&&(o&i.expiredLanes)===0||Vc(i,o),E=u?NL(i,o):WA(i,o,!0),A=u;do{if(E===0){Fr&&!u&&Il(i,o,0,!1);break}else{if(r=i.current.alternate,A&&!_L(r)){E=WA(i,o,!1),A=!1;continue}if(E===2){if(A=o,i.errorRecoveryDisabledLanes&A)var b=0;else b=i.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){o=b;e:{var y=i;E=Du;var B=y.current.memoizedState.isDehydrated;if(B&&(Kr(y,b).flags|=256),b=WA(y,b,!1),b!==2){if(PA&&!B){y.errorRecoveryDisabledLanes|=A,_s|=A,E=4;break e}A=Gi,Gi=E,A!==null&&(Gi===null?Gi=A:Gi.push.apply(Gi,A))}E=b}if(A=!1,E!==2)continue}}if(E===1){Kr(i,0),Il(i,o,0,!0);break}e:{switch(u=i,A=E,A){case 0:case 1:throw Error(a(345));case 4:if((o&4194048)!==o)break;case 6:Il(u,o,Aa,!Rl);break e;case 2:Gi=null;break;case 3:case 5:break;default:throw Error(a(329))}if((o&62914560)===o&&(E=FA+300-ye(),10<E)){if(Il(u,o,Aa,!Rl),jd(u,0,!0)!==0)break e;u.timeoutHandle=qp(Ip.bind(null,u,r,Gi,Mh,BA,o,Aa,_s,jr,Rl,A,2,-0,0),E);break e}Ip(u,r,Gi,Mh,BA,o,Aa,_s,jr,Rl,A,0,-0,0)}}break}while(!0);oo(i)}function Ip(i,o,r,u,E,A,b,y,B,de,Re,_e,fe,Ee){if(i.timeoutHandle=-1,_e=o.subtreeFlags,(_e&8192||(_e&16785408)===16785408)&&(Uu={stylesheets:null,count:0,unsuspend:i1},Ep(o),_e=o1(),_e!==null)){i.cancelPendingCommit=_e(Dp.bind(null,i,o,A,r,u,E,b,y,B,Re,1,fe,Ee)),Il(i,A,b,!de);return}Dp(i,o,A,r,u,E,b,y,B)}function _L(i){for(var o=i;;){var r=o.tag;if((r===0||r===11||r===15)&&o.flags&16384&&(r=o.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var u=0;u<r.length;u++){var E=r[u],A=E.getSnapshot;E=E.value;try{if(!Wi(A(),E))return!1}catch{return!1}}if(r=o.child,o.subtreeFlags&16384&&r!==null)r.return=o,o=r;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Il(i,o,r,u){o&=~GA,o&=~_s,i.suspendedLanes|=o,i.pingedLanes&=~o,u&&(i.warmLanes|=o),u=i.expirationTimes;for(var E=o;0<E;){var A=31-Vi(E),b=1<<A;u[A]=-1,E&=~b}r!==0&&Lg(i,r,o)}function Lh(){return(bt&6)===0?(vu(0),!1):!0}function KA(){if(ct!==null){if(Ot===0)var i=ct.return;else i=ct,Lo=As=null,rA(i),wr=null,gu=0,i=ct;for(;i!==null;)ep(i.alternate,i),i=i.return;ct=null}}function Kr(i,o){var r=i.timeoutHandle;r!==-1&&(i.timeoutHandle=-1,BL(r)),r=i.cancelPendingCommit,r!==null&&(i.cancelPendingCommit=null,r()),KA(),Ft=i,ct=r=yo(i.current,null),Et=o,Ot=0,$i=null,Rl=!1,Fr=Vc(i,o),PA=!1,jr=Aa=GA=_s=Tl=ln=0,Gi=Du=null,BA=!1,(o&8)!==0&&(o|=o&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=o;0<u;){var E=31-Vi(u),A=1<<E;o|=i[E],u&=~A}return Bo=o,eh(),r}function _p(i,o){it=null,M.H=Sh,o===du||o===ch?(o=GI(),Ot=3):o===UI?(o=GI(),Ot=4):Ot=o===B_?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,$i=o,ct===null&&(ln=1,Nh(i,da(o,i.current)))}function pp(){var i=M.H;return M.H=Sh,i===null?Sh:i}function Np(){var i=M.A;return M.A=gL,i}function VA(){ln=4,Rl||(Et&4194048)!==Et&&ma.current!==null||(Fr=!0),(Tl&134217727)===0&&(_s&134217727)===0||Ft===null||Il(Ft,Et,Aa,!1)}function WA(i,o,r){var u=bt;bt|=2;var E=pp(),A=Np();(Ft!==i||Et!==o)&&(Mh=null,Kr(i,o)),o=!1;var b=ln;e:do try{if(Ot!==0&&ct!==null){var y=ct,B=$i;switch(Ot){case 8:KA(),b=6;break e;case 3:case 2:case 9:case 6:ma.current===null&&(o=!0);var de=Ot;if(Ot=0,$i=null,Vr(i,y,B,de),r&&Fr){b=0;break e}break;default:de=Ot,Ot=0,$i=null,Vr(i,y,B,de)}}pL(),b=ln;break}catch(Re){_p(i,Re)}while(!0);return o&&i.shellSuspendCounter++,Lo=As=null,bt=u,M.H=E,M.A=A,ct===null&&(Ft=null,Et=0,eh()),b}function pL(){for(;ct!==null;)Cp(ct)}function NL(i,o){var r=bt;bt|=2;var u=pp(),E=Np();Ft!==i||Et!==o?(Mh=null,vh=ye()+500,Kr(i,o)):Fr=Vc(i,o);e:do try{if(Ot!==0&&ct!==null){o=ct;var A=$i;t:switch(Ot){case 1:Ot=0,$i=null,Vr(i,o,A,1);break;case 2:case 9:if(wI(A)){Ot=0,$i=null,bp(o);break}o=function(){Ot!==2&&Ot!==9||Ft!==i||(Ot=7),oo(i)},A.then(o,o);break e;case 3:Ot=7;break e;case 4:Ot=5;break e;case 7:wI(A)?(Ot=0,$i=null,bp(o)):(Ot=0,$i=null,Vr(i,o,A,7));break;case 5:var b=null;switch(ct.tag){case 26:b=ct.memoizedState;case 5:case 27:var y=ct;if(!b||sN(b)){Ot=0,$i=null;var B=y.sibling;if(B!==null)ct=B;else{var de=y.return;de!==null?(ct=de,xh(de)):ct=null}break t}}Ot=0,$i=null,Vr(i,o,A,5);break;case 6:Ot=0,$i=null,Vr(i,o,A,6);break;case 8:KA(),ln=6;break e;default:throw Error(a(462))}}CL();break}catch(Re){_p(i,Re)}while(!0);return Lo=As=null,M.H=u,M.A=E,bt=r,ct!==null?0:(Ft=null,Et=0,eh(),ln)}function CL(){for(;ct!==null&&!Te();)Cp(ct)}function Cp(i){var o=Q_(i.alternate,i,Bo);i.memoizedProps=i.pendingProps,o===null?xh(i):ct=o}function bp(i){var o=i,r=o.alternate;switch(o.tag){case 15:case 0:o=V_(r,o,o.pendingProps,o.type,void 0,Et);break;case 11:o=V_(r,o,o.pendingProps,o.type.render,o.ref,Et);break;case 5:rA(o);default:ep(r,o),o=ct=OI(o,Bo),o=Q_(r,o,Bo)}i.memoizedProps=i.pendingProps,o===null?xh(i):ct=o}function Vr(i,o,r,u){Lo=As=null,rA(o),wr=null,gu=0;var E=o.return;try{if(EL(i,E,o,r,Et)){ln=1,Nh(i,da(r,i.current)),ct=null;return}}catch(A){if(E!==null)throw ct=E,A;ln=1,Nh(i,da(r,i.current)),ct=null;return}o.flags&32768?(_t||u===1?i=!0:Fr||(Et&536870912)!==0?i=!1:(Rl=i=!0,(u===2||u===9||u===3||u===6)&&(u=ma.current,u!==null&&u.tag===13&&(u.flags|=16384))),Op(o,i)):xh(o)}function xh(i){var o=i;do{if((o.flags&32768)!==0){Op(o,Rl);return}i=o.return;var r=AL(o.alternate,o,Bo);if(r!==null){ct=r;return}if(o=o.sibling,o!==null){ct=o;return}ct=o=i}while(o!==null);ln===0&&(ln=5)}function Op(i,o){do{var r=RL(i.alternate,i);if(r!==null){r.flags&=32767,ct=r;return}if(r=i.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!o&&(i=i.sibling,i!==null)){ct=i;return}ct=i=r}while(i!==null);ln=6,ct=null}function Dp(i,o,r,u,E,A,b,y,B){i.cancelPendingCommit=null;do Hh();while(Qn!==0);if((bt&6)!==0)throw Error(a(327));if(o!==null){if(o===i.current)throw Error(a(177));if(A=o.lanes|o.childLanes,A|=wm,iM(i,r,A,b,y,B),i===Ft&&(ct=Ft=null,Et=0),zr=o,gl=i,Yr=r,jA=A,zA=E,Tp=u,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,yL(zt,function(){return xp(),null})):(i.callbackNode=null,i.callbackPriority=0),u=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||u){u=M.T,M.T=null,E=Y.p,Y.p=2,b=bt,bt|=4;try{TL(i,o,r)}finally{bt=b,Y.p=E,M.T=u}}Qn=1,yp(),vp(),Mp()}}function yp(){if(Qn===1){Qn=0;var i=gl,o=zr,r=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||r){r=M.T,M.T=null;var u=Y.p;Y.p=2;var E=bt;bt|=4;try{dp(o,i);var A=oR,b=RI(i.containerInfo),y=A.focusedElem,B=A.selectionRange;if(b!==y&&y&&y.ownerDocument&&AI(y.ownerDocument.documentElement,y)){if(B!==null&&Lm(y)){var de=B.start,Re=B.end;if(Re===void 0&&(Re=de),"selectionStart"in y)y.selectionStart=de,y.selectionEnd=Math.min(Re,y.value.length);else{var _e=y.ownerDocument||document,fe=_e&&_e.defaultView||window;if(fe.getSelection){var Ee=fe.getSelection(),We=y.textContent.length,Ye=Math.min(B.start,We),xt=B.end===void 0?Ye:Math.min(B.end,We);!Ee.extend&&Ye>xt&&(b=xt,xt=Ye,Ye=b);var ne=mI(y,Ye),V=mI(y,xt);if(ne&&V&&(Ee.rangeCount!==1||Ee.anchorNode!==ne.node||Ee.anchorOffset!==ne.offset||Ee.focusNode!==V.node||Ee.focusOffset!==V.offset)){var ce=_e.createRange();ce.setStart(ne.node,ne.offset),Ee.removeAllRanges(),Ye>xt?(Ee.addRange(ce),Ee.extend(V.node,V.offset)):(ce.setEnd(V.node,V.offset),Ee.addRange(ce))}}}}for(_e=[],Ee=y;Ee=Ee.parentNode;)Ee.nodeType===1&&_e.push({element:Ee,left:Ee.scrollLeft,top:Ee.scrollTop});for(typeof y.focus=="function"&&y.focus(),y=0;y<_e.length;y++){var Se=_e[y];Se.element.scrollLeft=Se.left,Se.element.scrollTop=Se.top}}Vh=!!aR,oR=aR=null}finally{bt=E,Y.p=u,M.T=r}}i.current=o,Qn=2}}function vp(){if(Qn===2){Qn=0;var i=gl,o=zr,r=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||r){r=M.T,M.T=null;var u=Y.p;Y.p=2;var E=bt;bt|=4;try{sp(i,o.alternate,o)}finally{bt=E,Y.p=u,M.T=r}}Qn=3}}function Mp(){if(Qn===4||Qn===3){Qn=0,be();var i=gl,o=zr,r=Yr,u=Tp;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Qn=5:(Qn=0,zr=gl=null,Lp(i,i.pendingLanes));var E=i.pendingLanes;if(E===0&&(Sl=null),dm(r),o=o.stateNode,Ki&&typeof Ki.onCommitFiberRoot=="function")try{Ki.onCommitFiberRoot(Kc,o,void 0,(o.current.flags&128)===128)}catch{}if(u!==null){o=M.T,E=Y.p,Y.p=2,M.T=null;try{for(var A=i.onRecoverableError,b=0;b<u.length;b++){var y=u[b];A(y.value,{componentStack:y.stack})}}finally{M.T=o,Y.p=E}}(Yr&3)!==0&&Hh(),oo(i),E=i.pendingLanes,(r&4194090)!==0&&(E&42)!==0?i===YA?yu++:(yu=0,YA=i):yu=0,vu(0)}}function Lp(i,o){(i.pooledCacheLanes&=o)===0&&(o=i.pooledCache,o!=null&&(i.pooledCache=null,cu(o)))}function Hh(i){return yp(),vp(),Mp(),xp()}function xp(){if(Qn!==5)return!1;var i=gl,o=jA;jA=0;var r=dm(Yr),u=M.T,E=Y.p;try{Y.p=32>r?32:r,M.T=null,r=zA,zA=null;var A=gl,b=Yr;if(Qn=0,zr=gl=null,Yr=0,(bt&6)!==0)throw Error(a(331));var y=bt;if(bt|=4,Ap(A.current),fp(A,A.current,b,r),bt=y,vu(0,!1),Ki&&typeof Ki.onPostCommitFiberRoot=="function")try{Ki.onPostCommitFiberRoot(Kc,A)}catch{}return!0}finally{Y.p=E,M.T=u,Lp(i,o)}}function Hp(i,o,r){o=da(r,o),o=_A(i.stateNode,o,2),i=ul(i,o,2),i!==null&&(Wc(i,2),oo(i))}function Ut(i,o,r){if(i.tag===3)Hp(i,i,r);else for(;o!==null;){if(o.tag===3){Hp(o,i,r);break}else if(o.tag===1){var u=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Sl===null||!Sl.has(u))){i=da(r,i),r=P_(2),u=ul(o,r,2),u!==null&&(G_(r,u,o,i),Wc(u,2),oo(u));break}}o=o.return}}function XA(i,o,r){var u=i.pingCache;if(u===null){u=i.pingCache=new IL;var E=new Set;u.set(o,E)}else E=u.get(o),E===void 0&&(E=new Set,u.set(o,E));E.has(r)||(PA=!0,E.add(r),i=bL.bind(null,i,o,r),o.then(i,i))}function bL(i,o,r){var u=i.pingCache;u!==null&&u.delete(o),i.pingedLanes|=i.suspendedLanes&r,i.warmLanes&=~r,Ft===i&&(Et&r)===r&&(ln===4||ln===3&&(Et&62914560)===Et&&300>ye()-FA?(bt&2)===0&&Kr(i,0):GA|=r,jr===Et&&(jr=0)),oo(i)}function kp(i,o){o===0&&(o=Mg()),i=Or(i,o),i!==null&&(Wc(i,o),oo(i))}function OL(i){var o=i.memoizedState,r=0;o!==null&&(r=o.retryLane),kp(i,r)}function DL(i,o){var r=0;switch(i.tag){case 13:var u=i.stateNode,E=i.memoizedState;E!==null&&(r=E.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(a(314))}u!==null&&u.delete(o),kp(i,r)}function yL(i,o){return oe(i,o)}var kh=null,Wr=null,qA=!1,Uh=!1,ZA=!1,ps=0;function oo(i){i!==Wr&&i.next===null&&(Wr===null?kh=Wr=i:Wr=Wr.next=i),Uh=!0,qA||(qA=!0,ML())}function vu(i,o){if(!ZA&&Uh){ZA=!0;do for(var r=!1,u=kh;u!==null;){if(i!==0){var E=u.pendingLanes;if(E===0)var A=0;else{var b=u.suspendedLanes,y=u.pingedLanes;A=(1<<31-Vi(42|i)+1)-1,A&=E&~(b&~y),A=A&201326741?A&201326741|1:A?A|2:0}A!==0&&(r=!0,Gp(u,A))}else A=Et,A=jd(u,u===Ft?A:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(A&3)===0||Vc(u,A)||(r=!0,Gp(u,A));u=u.next}while(r);ZA=!1}}function vL(){Up()}function Up(){Uh=qA=!1;var i=0;ps!==0&&(GL()&&(i=ps),ps=0);for(var o=ye(),r=null,u=kh;u!==null;){var E=u.next,A=wp(u,o);A===0?(u.next=null,r===null?kh=E:r.next=E,E===null&&(Wr=r)):(r=u,(i!==0||(A&3)!==0)&&(Uh=!0)),u=E}vu(i)}function wp(i,o){for(var r=i.suspendedLanes,u=i.pingedLanes,E=i.expirationTimes,A=i.pendingLanes&-62914561;0<A;){var b=31-Vi(A),y=1<<b,B=E[b];B===-1?((y&r)===0||(y&u)!==0)&&(E[b]=nM(y,o)):B<=o&&(i.expiredLanes|=y),A&=~y}if(o=Ft,r=Et,r=jd(i,i===o?r:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u=i.callbackNode,r===0||i===o&&(Ot===2||Ot===9)||i.cancelPendingCommit!==null)return u!==null&&u!==null&&Ce(u),i.callbackNode=null,i.callbackPriority=0;if((r&3)===0||Vc(i,r)){if(o=r&-r,o===i.callbackPriority)return o;switch(u!==null&&Ce(u),dm(r)){case 2:case 8:r=Rt;break;case 32:r=zt;break;case 268435456:r=hr;break;default:r=zt}return u=Pp.bind(null,i),r=oe(r,u),i.callbackPriority=o,i.callbackNode=r,o}return u!==null&&u!==null&&Ce(u),i.callbackPriority=2,i.callbackNode=null,2}function Pp(i,o){if(Qn!==0&&Qn!==5)return i.callbackNode=null,i.callbackPriority=0,null;var r=i.callbackNode;if(Hh()&&i.callbackNode!==r)return null;var u=Et;return u=jd(i,i===Ft?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u===0?null:(gp(i,u,o),wp(i,ye()),i.callbackNode!=null&&i.callbackNode===r?Pp.bind(null,i):null)}function Gp(i,o){if(Hh())return null;gp(i,o,!0)}function ML(){FL(function(){(bt&6)!==0?oe($e,vL):Up()})}function $A(){return ps===0&&(ps=vg()),ps}function Bp(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Wd(""+i)}function Fp(i,o){var r=o.ownerDocument.createElement("input");return r.name=o.name,r.value=o.value,i.id&&r.setAttribute("form",i.id),o.parentNode.insertBefore(r,o),i=new FormData(i),r.parentNode.removeChild(r),i}function LL(i,o,r,u,E){if(o==="submit"&&r&&r.stateNode===E){var A=Bp((E[ki]||null).action),b=u.submitter;b&&(o=(o=b[ki]||null)?Bp(o.formAction):b.getAttribute("formAction"),o!==null&&(A=o,b=null));var y=new $d("action","action",null,u,E);i.push({event:y,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(ps!==0){var B=b?Fp(E,b):new FormData(E);RA(r,{pending:!0,data:B,method:E.method,action:A},null,B)}}else typeof A=="function"&&(y.preventDefault(),B=b?Fp(E,b):new FormData(E),RA(r,{pending:!0,data:B,method:E.method,action:A},A,B))},currentTarget:E}]})}}for(var QA=0;QA<Um.length;QA++){var JA=Um[QA],xL=JA.toLowerCase(),HL=JA[0].toUpperCase()+JA.slice(1);Ua(xL,"on"+HL)}Ua(gI,"onAnimationEnd"),Ua(II,"onAnimationIteration"),Ua(_I,"onAnimationStart"),Ua("dblclick","onDoubleClick"),Ua("focusin","onFocus"),Ua("focusout","onBlur"),Ua($M,"onTransitionRun"),Ua(QM,"onTransitionStart"),Ua(JM,"onTransitionCancel"),Ua(pI,"onTransitionEnd"),Rr("onMouseEnter",["mouseout","mouseover"]),Rr("onMouseLeave",["mouseout","mouseover"]),Rr("onPointerEnter",["pointerout","pointerover"]),Rr("onPointerLeave",["pointerout","pointerover"]),ss("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ss("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ss("onBeforeInput",["compositionend","keypress","textInput","paste"]),ss("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ss("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ss("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kL=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Mu));function jp(i,o){o=(o&4)!==0;for(var r=0;r<i.length;r++){var u=i[r],E=u.event;u=u.listeners;e:{var A=void 0;if(o)for(var b=u.length-1;0<=b;b--){var y=u[b],B=y.instance,de=y.currentTarget;if(y=y.listener,B!==A&&E.isPropagationStopped())break e;A=y,E.currentTarget=de;try{A(E)}catch(Re){ph(Re)}E.currentTarget=null,A=B}else for(b=0;b<u.length;b++){if(y=u[b],B=y.instance,de=y.currentTarget,y=y.listener,B!==A&&E.isPropagationStopped())break e;A=y,E.currentTarget=de;try{A(E)}catch(Re){ph(Re)}E.currentTarget=null,A=B}}}}function ut(i,o){var r=o[hm];r===void 0&&(r=o[hm]=new Set);var u=i+"__bubble";r.has(u)||(zp(o,i,2,!1),r.add(u))}function eR(i,o,r){var u=0;o&&(u|=4),zp(r,i,u,o)}var wh="_reactListening"+Math.random().toString(36).slice(2);function tR(i){if(!i[wh]){i[wh]=!0,Ug.forEach(function(r){r!=="selectionchange"&&(kL.has(r)||eR(r,!1,i),eR(r,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[wh]||(o[wh]=!0,eR("selectionchange",!1,o))}}function zp(i,o,r,u){switch(fN(o)){case 2:var E=r1;break;case 8:E=c1;break;default:E=mR}r=E.bind(null,o,r,i),E=void 0,!pm||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(E=!0),u?E!==void 0?i.addEventListener(o,r,{capture:!0,passive:E}):i.addEventListener(o,r,!0):E!==void 0?i.addEventListener(o,r,{passive:E}):i.addEventListener(o,r,!1)}function nR(i,o,r,u,E){var A=u;if((o&1)===0&&(o&2)===0&&u!==null)e:for(;;){if(u===null)return;var b=u.tag;if(b===3||b===4){var y=u.stateNode.containerInfo;if(y===E)break;if(b===4)for(b=u.return;b!==null;){var B=b.tag;if((B===3||B===4)&&b.stateNode.containerInfo===E)return;b=b.return}for(;y!==null;){if(b=Er(y),b===null)return;if(B=b.tag,B===5||B===6||B===26||B===27){u=A=b;continue e}y=y.parentNode}}u=u.return}Zg(function(){var de=A,Re=Im(r),_e=[];e:{var fe=NI.get(i);if(fe!==void 0){var Ee=$d,We=i;switch(i){case"keypress":if(qd(r)===0)break e;case"keydown":case"keyup":Ee=yM;break;case"focusin":We="focus",Ee=Om;break;case"focusout":We="blur",Ee=Om;break;case"beforeblur":case"afterblur":Ee=Om;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ee=Jg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ee=RM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ee=LM;break;case gI:case II:case _I:Ee=gM;break;case pI:Ee=HM;break;case"scroll":case"scrollend":Ee=mM;break;case"wheel":Ee=UM;break;case"copy":case"cut":case"paste":Ee=_M;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ee=tI;break;case"toggle":case"beforetoggle":Ee=PM}var Ye=(o&4)!==0,xt=!Ye&&(i==="scroll"||i==="scrollend"),ne=Ye?fe!==null?fe+"Capture":null:fe;Ye=[];for(var V=de,ce;V!==null;){var Se=V;if(ce=Se.stateNode,Se=Se.tag,Se!==5&&Se!==26&&Se!==27||ce===null||ne===null||(Se=Zc(V,ne),Se!=null&&Ye.push(Lu(V,Se,ce))),xt)break;V=V.return}0<Ye.length&&(fe=new Ee(fe,We,null,r,Re),_e.push({event:fe,listeners:Ye}))}}if((o&7)===0){e:{if(fe=i==="mouseover"||i==="pointerover",Ee=i==="mouseout"||i==="pointerout",fe&&r!==gm&&(We=r.relatedTarget||r.fromElement)&&(Er(We)||We[fr]))break e;if((Ee||fe)&&(fe=Re.window===Re?Re:(fe=Re.ownerDocument)?fe.defaultView||fe.parentWindow:window,Ee?(We=r.relatedTarget||r.toElement,Ee=de,We=We?Er(We):null,We!==null&&(xt=c(We),Ye=We.tag,We!==xt||Ye!==5&&Ye!==27&&Ye!==6)&&(We=null)):(Ee=null,We=de),Ee!==We)){if(Ye=Jg,Se="onMouseLeave",ne="onMouseEnter",V="mouse",(i==="pointerout"||i==="pointerover")&&(Ye=tI,Se="onPointerLeave",ne="onPointerEnter",V="pointer"),xt=Ee==null?fe:qc(Ee),ce=We==null?fe:qc(We),fe=new Ye(Se,V+"leave",Ee,r,Re),fe.target=xt,fe.relatedTarget=ce,Se=null,Er(Re)===de&&(Ye=new Ye(ne,V+"enter",We,r,Re),Ye.target=ce,Ye.relatedTarget=xt,Se=Ye),xt=Se,Ee&&We)t:{for(Ye=Ee,ne=We,V=0,ce=Ye;ce;ce=Xr(ce))V++;for(ce=0,Se=ne;Se;Se=Xr(Se))ce++;for(;0<V-ce;)Ye=Xr(Ye),V--;for(;0<ce-V;)ne=Xr(ne),ce--;for(;V--;){if(Ye===ne||ne!==null&&Ye===ne.alternate)break t;Ye=Xr(Ye),ne=Xr(ne)}Ye=null}else Ye=null;Ee!==null&&Yp(_e,fe,Ee,Ye,!1),We!==null&&xt!==null&&Yp(_e,xt,We,Ye,!0)}}e:{if(fe=de?qc(de):window,Ee=fe.nodeName&&fe.nodeName.toLowerCase(),Ee==="select"||Ee==="input"&&fe.type==="file")var He=cI;else if(sI(fe))if(uI)He=XM;else{He=VM;var at=KM}else Ee=fe.nodeName,!Ee||Ee.toLowerCase()!=="input"||fe.type!=="checkbox"&&fe.type!=="radio"?de&&Sm(de.elementType)&&(He=cI):He=WM;if(He&&(He=He(i,de))){rI(_e,He,r,Re);break e}at&&at(i,fe,de),i==="focusout"&&de&&fe.type==="number"&&de.memoizedProps.value!=null&&Tm(fe,"number",fe.value)}switch(at=de?qc(de):window,i){case"focusin":(sI(at)||at.contentEditable==="true")&&(Nr=at,xm=de,au=null);break;case"focusout":au=xm=Nr=null;break;case"mousedown":Hm=!0;break;case"contextmenu":case"mouseup":case"dragend":Hm=!1,TI(_e,r,Re);break;case"selectionchange":if(ZM)break;case"keydown":case"keyup":TI(_e,r,Re)}var Ge;if(ym)e:{switch(i){case"compositionstart":var Ve="onCompositionStart";break e;case"compositionend":Ve="onCompositionEnd";break e;case"compositionupdate":Ve="onCompositionUpdate";break e}Ve=void 0}else pr?oI(i,r)&&(Ve="onCompositionEnd"):i==="keydown"&&r.keyCode===229&&(Ve="onCompositionStart");Ve&&(nI&&r.locale!=="ko"&&(pr||Ve!=="onCompositionStart"?Ve==="onCompositionEnd"&&pr&&(Ge=$g()):(ll=Re,Nm="value"in ll?ll.value:ll.textContent,pr=!0)),at=Ph(de,Ve),0<at.length&&(Ve=new eI(Ve,i,null,r,Re),_e.push({event:Ve,listeners:at}),Ge?Ve.data=Ge:(Ge=lI(r),Ge!==null&&(Ve.data=Ge)))),(Ge=BM?FM(i,r):jM(i,r))&&(Ve=Ph(de,"onBeforeInput"),0<Ve.length&&(at=new eI("onBeforeInput","beforeinput",null,r,Re),_e.push({event:at,listeners:Ve}),at.data=Ge)),LL(_e,i,de,r,Re)}jp(_e,o)})}function Lu(i,o,r){return{instance:i,listener:o,currentTarget:r}}function Ph(i,o){for(var r=o+"Capture",u=[];i!==null;){var E=i,A=E.stateNode;if(E=E.tag,E!==5&&E!==26&&E!==27||A===null||(E=Zc(i,r),E!=null&&u.unshift(Lu(i,E,A)),E=Zc(i,o),E!=null&&u.push(Lu(i,E,A))),i.tag===3)return u;i=i.return}return[]}function Xr(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Yp(i,o,r,u,E){for(var A=o._reactName,b=[];r!==null&&r!==u;){var y=r,B=y.alternate,de=y.stateNode;if(y=y.tag,B!==null&&B===u)break;y!==5&&y!==26&&y!==27||de===null||(B=de,E?(de=Zc(r,A),de!=null&&b.unshift(Lu(r,de,B))):E||(de=Zc(r,A),de!=null&&b.push(Lu(r,de,B)))),r=r.return}b.length!==0&&i.push({event:o,listeners:b})}var UL=/\r\n?/g,wL=/\u0000|\uFFFD/g;function Kp(i){return(typeof i=="string"?i:""+i).replace(UL,`
`).replace(wL,"")}function Vp(i,o){return o=Kp(o),Kp(i)===o}function Gh(){}function Lt(i,o,r,u,E,A){switch(r){case"children":typeof u=="string"?o==="body"||o==="textarea"&&u===""||gr(i,u):(typeof u=="number"||typeof u=="bigint")&&o!=="body"&&gr(i,""+u);break;case"className":Yd(i,"class",u);break;case"tabIndex":Yd(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Yd(i,r,u);break;case"style":Xg(i,u,A);break;case"data":if(o!=="object"){Yd(i,"data",u);break}case"src":case"href":if(u===""&&(o!=="a"||r!=="href")){i.removeAttribute(r);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(r);break}u=Wd(""+u),i.setAttribute(r,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof A=="function"&&(r==="formAction"?(o!=="input"&&Lt(i,o,"name",E.name,E,null),Lt(i,o,"formEncType",E.formEncType,E,null),Lt(i,o,"formMethod",E.formMethod,E,null),Lt(i,o,"formTarget",E.formTarget,E,null)):(Lt(i,o,"encType",E.encType,E,null),Lt(i,o,"method",E.method,E,null),Lt(i,o,"target",E.target,E,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(r);break}u=Wd(""+u),i.setAttribute(r,u);break;case"onClick":u!=null&&(i.onclick=Gh);break;case"onScroll":u!=null&&ut("scroll",i);break;case"onScrollEnd":u!=null&&ut("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(a(61));if(r=u.__html,r!=null){if(E.children!=null)throw Error(a(60));i.innerHTML=r}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}r=Wd(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(r,""+u):i.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(r,""):i.removeAttribute(r);break;case"capture":case"download":u===!0?i.setAttribute(r,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(r,u):i.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(r,u):i.removeAttribute(r);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(r):i.setAttribute(r,u);break;case"popover":ut("beforetoggle",i),ut("toggle",i),zd(i,"popover",u);break;case"xlinkActuate":Oo(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Oo(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Oo(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Oo(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Oo(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Oo(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Oo(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Oo(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Oo(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":zd(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=fM.get(r)||r,zd(i,r,u))}}function iR(i,o,r,u,E,A){switch(r){case"style":Xg(i,u,A);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(a(61));if(r=u.__html,r!=null){if(E.children!=null)throw Error(a(60));i.innerHTML=r}}break;case"children":typeof u=="string"?gr(i,u):(typeof u=="number"||typeof u=="bigint")&&gr(i,""+u);break;case"onScroll":u!=null&&ut("scroll",i);break;case"onScrollEnd":u!=null&&ut("scrollend",i);break;case"onClick":u!=null&&(i.onclick=Gh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!wg.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(E=r.endsWith("Capture"),o=r.slice(2,E?r.length-7:void 0),A=i[ki]||null,A=A!=null?A[r]:null,typeof A=="function"&&i.removeEventListener(o,A,E),typeof u=="function")){typeof A!="function"&&A!==null&&(r in i?i[r]=null:i.hasAttribute(r)&&i.removeAttribute(r)),i.addEventListener(o,u,E);break e}r in i?i[r]=u:u===!0?i.setAttribute(r,""):zd(i,r,u)}}}function Jn(i,o,r){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ut("error",i),ut("load",i);var u=!1,E=!1,A;for(A in r)if(r.hasOwnProperty(A)){var b=r[A];if(b!=null)switch(A){case"src":u=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,o));default:Lt(i,o,A,b,r,null)}}E&&Lt(i,o,"srcSet",r.srcSet,r,null),u&&Lt(i,o,"src",r.src,r,null);return;case"input":ut("invalid",i);var y=A=b=E=null,B=null,de=null;for(u in r)if(r.hasOwnProperty(u)){var Re=r[u];if(Re!=null)switch(u){case"name":E=Re;break;case"type":b=Re;break;case"checked":B=Re;break;case"defaultChecked":de=Re;break;case"value":A=Re;break;case"defaultValue":y=Re;break;case"children":case"dangerouslySetInnerHTML":if(Re!=null)throw Error(a(137,o));break;default:Lt(i,o,u,Re,r,null)}}Yg(i,A,y,B,de,b,E,!1),Kd(i);return;case"select":ut("invalid",i),u=b=A=null;for(E in r)if(r.hasOwnProperty(E)&&(y=r[E],y!=null))switch(E){case"value":A=y;break;case"defaultValue":b=y;break;case"multiple":u=y;default:Lt(i,o,E,y,r,null)}o=A,r=b,i.multiple=!!u,o!=null?Sr(i,!!u,o,!1):r!=null&&Sr(i,!!u,r,!0);return;case"textarea":ut("invalid",i),A=E=u=null;for(b in r)if(r.hasOwnProperty(b)&&(y=r[b],y!=null))switch(b){case"value":u=y;break;case"defaultValue":E=y;break;case"children":A=y;break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(a(91));break;default:Lt(i,o,b,y,r,null)}Vg(i,u,E,A),Kd(i);return;case"option":for(B in r)if(r.hasOwnProperty(B)&&(u=r[B],u!=null))switch(B){case"selected":i.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Lt(i,o,B,u,r,null)}return;case"dialog":ut("beforetoggle",i),ut("toggle",i),ut("cancel",i),ut("close",i);break;case"iframe":case"object":ut("load",i);break;case"video":case"audio":for(u=0;u<Mu.length;u++)ut(Mu[u],i);break;case"image":ut("error",i),ut("load",i);break;case"details":ut("toggle",i);break;case"embed":case"source":case"link":ut("error",i),ut("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(de in r)if(r.hasOwnProperty(de)&&(u=r[de],u!=null))switch(de){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,o));default:Lt(i,o,de,u,r,null)}return;default:if(Sm(o)){for(Re in r)r.hasOwnProperty(Re)&&(u=r[Re],u!==void 0&&iR(i,o,Re,u,r,void 0));return}}for(y in r)r.hasOwnProperty(y)&&(u=r[y],u!=null&&Lt(i,o,y,u,r,null))}function PL(i,o,r,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,A=null,b=null,y=null,B=null,de=null,Re=null;for(Ee in r){var _e=r[Ee];if(r.hasOwnProperty(Ee)&&_e!=null)switch(Ee){case"checked":break;case"value":break;case"defaultValue":B=_e;default:u.hasOwnProperty(Ee)||Lt(i,o,Ee,null,u,_e)}}for(var fe in u){var Ee=u[fe];if(_e=r[fe],u.hasOwnProperty(fe)&&(Ee!=null||_e!=null))switch(fe){case"type":A=Ee;break;case"name":E=Ee;break;case"checked":de=Ee;break;case"defaultChecked":Re=Ee;break;case"value":b=Ee;break;case"defaultValue":y=Ee;break;case"children":case"dangerouslySetInnerHTML":if(Ee!=null)throw Error(a(137,o));break;default:Ee!==_e&&Lt(i,o,fe,Ee,u,_e)}}Rm(i,b,y,B,de,Re,A,E);return;case"select":Ee=b=y=fe=null;for(A in r)if(B=r[A],r.hasOwnProperty(A)&&B!=null)switch(A){case"value":break;case"multiple":Ee=B;default:u.hasOwnProperty(A)||Lt(i,o,A,null,u,B)}for(E in u)if(A=u[E],B=r[E],u.hasOwnProperty(E)&&(A!=null||B!=null))switch(E){case"value":fe=A;break;case"defaultValue":y=A;break;case"multiple":b=A;default:A!==B&&Lt(i,o,E,A,u,B)}o=y,r=b,u=Ee,fe!=null?Sr(i,!!r,fe,!1):!!u!=!!r&&(o!=null?Sr(i,!!r,o,!0):Sr(i,!!r,r?[]:"",!1));return;case"textarea":Ee=fe=null;for(y in r)if(E=r[y],r.hasOwnProperty(y)&&E!=null&&!u.hasOwnProperty(y))switch(y){case"value":break;case"children":break;default:Lt(i,o,y,null,u,E)}for(b in u)if(E=u[b],A=r[b],u.hasOwnProperty(b)&&(E!=null||A!=null))switch(b){case"value":fe=E;break;case"defaultValue":Ee=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(a(91));break;default:E!==A&&Lt(i,o,b,E,u,A)}Kg(i,fe,Ee);return;case"option":for(var We in r)if(fe=r[We],r.hasOwnProperty(We)&&fe!=null&&!u.hasOwnProperty(We))switch(We){case"selected":i.selected=!1;break;default:Lt(i,o,We,null,u,fe)}for(B in u)if(fe=u[B],Ee=r[B],u.hasOwnProperty(B)&&fe!==Ee&&(fe!=null||Ee!=null))switch(B){case"selected":i.selected=fe&&typeof fe!="function"&&typeof fe!="symbol";break;default:Lt(i,o,B,fe,u,Ee)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ye in r)fe=r[Ye],r.hasOwnProperty(Ye)&&fe!=null&&!u.hasOwnProperty(Ye)&&Lt(i,o,Ye,null,u,fe);for(de in u)if(fe=u[de],Ee=r[de],u.hasOwnProperty(de)&&fe!==Ee&&(fe!=null||Ee!=null))switch(de){case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(a(137,o));break;default:Lt(i,o,de,fe,u,Ee)}return;default:if(Sm(o)){for(var xt in r)fe=r[xt],r.hasOwnProperty(xt)&&fe!==void 0&&!u.hasOwnProperty(xt)&&iR(i,o,xt,void 0,u,fe);for(Re in u)fe=u[Re],Ee=r[Re],!u.hasOwnProperty(Re)||fe===Ee||fe===void 0&&Ee===void 0||iR(i,o,Re,fe,u,Ee);return}}for(var ne in r)fe=r[ne],r.hasOwnProperty(ne)&&fe!=null&&!u.hasOwnProperty(ne)&&Lt(i,o,ne,null,u,fe);for(_e in u)fe=u[_e],Ee=r[_e],!u.hasOwnProperty(_e)||fe===Ee||fe==null&&Ee==null||Lt(i,o,_e,fe,u,Ee)}var aR=null,oR=null;function Bh(i){return i.nodeType===9?i:i.ownerDocument}function Wp(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Xp(i,o){if(i===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&o==="foreignObject"?0:i}function lR(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var sR=null;function GL(){var i=window.event;return i&&i.type==="popstate"?i===sR?!1:(sR=i,!0):(sR=null,!1)}var qp=typeof setTimeout=="function"?setTimeout:void 0,BL=typeof clearTimeout=="function"?clearTimeout:void 0,Zp=typeof Promise=="function"?Promise:void 0,FL=typeof queueMicrotask=="function"?queueMicrotask:typeof Zp<"u"?function(i){return Zp.resolve(null).then(i).catch(jL)}:qp;function jL(i){setTimeout(function(){throw i})}function _l(i){return i==="head"}function $p(i,o){var r=o,u=0,E=0;do{var A=r.nextSibling;if(i.removeChild(r),A&&A.nodeType===8)if(r=A.data,r==="/$"){if(0<u&&8>u){r=u;var b=i.ownerDocument;if(r&1&&xu(b.documentElement),r&2&&xu(b.body),r&4)for(r=b.head,xu(r),b=r.firstChild;b;){var y=b.nextSibling,B=b.nodeName;b[Xc]||B==="SCRIPT"||B==="STYLE"||B==="LINK"&&b.rel.toLowerCase()==="stylesheet"||r.removeChild(b),b=y}}if(E===0){i.removeChild(A),Fu(o);return}E--}else r==="$"||r==="$?"||r==="$!"?E++:u=r.charCodeAt(0)-48;else u=0;r=A}while(r);Fu(o)}function rR(i){var o=i.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var r=o;switch(o=o.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":rR(r),fm(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}i.removeChild(r)}}function zL(i,o,r,u){for(;i.nodeType===1;){var E=r;if(i.nodeName.toLowerCase()!==o.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[Xc])switch(o){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(A=i.getAttribute("rel"),A==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(A!==E.rel||i.getAttribute("href")!==(E.href==null||E.href===""?null:E.href)||i.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||i.getAttribute("title")!==(E.title==null?null:E.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(A=i.getAttribute("src"),(A!==(E.src==null?null:E.src)||i.getAttribute("type")!==(E.type==null?null:E.type)||i.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&A&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(o==="input"&&i.type==="hidden"){var A=E.name==null?null:""+E.name;if(E.type==="hidden"&&i.getAttribute("name")===A)return i}else return i;if(i=Pa(i.nextSibling),i===null)break}return null}function YL(i,o,r){if(o==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!r||(i=Pa(i.nextSibling),i===null))return null;return i}function cR(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function KL(i,o){var r=i.ownerDocument;if(i.data!=="$?"||r.readyState==="complete")o();else{var u=function(){o(),r.removeEventListener("DOMContentLoaded",u)};r.addEventListener("DOMContentLoaded",u),i._reactRetry=u}}function Pa(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return i}var uR=null;function Qp(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var r=i.data;if(r==="$"||r==="$!"||r==="$?"){if(o===0)return i;o--}else r==="/$"&&o++}i=i.previousSibling}return null}function Jp(i,o,r){switch(o=Bh(r),i){case"html":if(i=o.documentElement,!i)throw Error(a(452));return i;case"head":if(i=o.head,!i)throw Error(a(453));return i;case"body":if(i=o.body,!i)throw Error(a(454));return i;default:throw Error(a(451))}}function xu(i){for(var o=i.attributes;o.length;)i.removeAttributeNode(o[0]);fm(i)}var Ra=new Map,eN=new Set;function Fh(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Fo=Y.d;Y.d={f:VL,r:WL,D:XL,C:qL,L:ZL,m:$L,X:JL,S:QL,M:e1};function VL(){var i=Fo.f(),o=Lh();return i||o}function WL(i){var o=mr(i);o!==null&&o.tag===5&&o.type==="form"?g_(o):Fo.r(i)}var qr=typeof document>"u"?null:document;function tN(i,o,r){var u=qr;if(u&&typeof o=="string"&&o){var E=ua(o);E='link[rel="'+i+'"][href="'+E+'"]',typeof r=="string"&&(E+='[crossorigin="'+r+'"]'),eN.has(E)||(eN.add(E),i={rel:i,crossOrigin:r,href:o},u.querySelector(E)===null&&(o=u.createElement("link"),Jn(o,"link",i),Fn(o),u.head.appendChild(o)))}}function XL(i){Fo.D(i),tN("dns-prefetch",i,null)}function qL(i,o){Fo.C(i,o),tN("preconnect",i,o)}function ZL(i,o,r){Fo.L(i,o,r);var u=qr;if(u&&i&&o){var E='link[rel="preload"][as="'+ua(o)+'"]';o==="image"&&r&&r.imageSrcSet?(E+='[imagesrcset="'+ua(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(E+='[imagesizes="'+ua(r.imageSizes)+'"]')):E+='[href="'+ua(i)+'"]';var A=E;switch(o){case"style":A=Zr(i);break;case"script":A=$r(i)}Ra.has(A)||(i=R({rel:"preload",href:o==="image"&&r&&r.imageSrcSet?void 0:i,as:o},r),Ra.set(A,i),u.querySelector(E)!==null||o==="style"&&u.querySelector(Hu(A))||o==="script"&&u.querySelector(ku(A))||(o=u.createElement("link"),Jn(o,"link",i),Fn(o),u.head.appendChild(o)))}}function $L(i,o){Fo.m(i,o);var r=qr;if(r&&i){var u=o&&typeof o.as=="string"?o.as:"script",E='link[rel="modulepreload"][as="'+ua(u)+'"][href="'+ua(i)+'"]',A=E;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":A=$r(i)}if(!Ra.has(A)&&(i=R({rel:"modulepreload",href:i},o),Ra.set(A,i),r.querySelector(E)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(ku(A)))return}u=r.createElement("link"),Jn(u,"link",i),Fn(u),r.head.appendChild(u)}}}function QL(i,o,r){Fo.S(i,o,r);var u=qr;if(u&&i){var E=Ar(u).hoistableStyles,A=Zr(i);o=o||"default";var b=E.get(A);if(!b){var y={loading:0,preload:null};if(b=u.querySelector(Hu(A)))y.loading=5;else{i=R({rel:"stylesheet",href:i,"data-precedence":o},r),(r=Ra.get(A))&&dR(i,r);var B=b=u.createElement("link");Fn(B),Jn(B,"link",i),B._p=new Promise(function(de,Re){B.onload=de,B.onerror=Re}),B.addEventListener("load",function(){y.loading|=1}),B.addEventListener("error",function(){y.loading|=2}),y.loading|=4,jh(b,o,u)}b={type:"stylesheet",instance:b,count:1,state:y},E.set(A,b)}}}function JL(i,o){Fo.X(i,o);var r=qr;if(r&&i){var u=Ar(r).hoistableScripts,E=$r(i),A=u.get(E);A||(A=r.querySelector(ku(E)),A||(i=R({src:i,async:!0},o),(o=Ra.get(E))&&hR(i,o),A=r.createElement("script"),Fn(A),Jn(A,"link",i),r.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},u.set(E,A))}}function e1(i,o){Fo.M(i,o);var r=qr;if(r&&i){var u=Ar(r).hoistableScripts,E=$r(i),A=u.get(E);A||(A=r.querySelector(ku(E)),A||(i=R({src:i,async:!0,type:"module"},o),(o=Ra.get(E))&&hR(i,o),A=r.createElement("script"),Fn(A),Jn(A,"link",i),r.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},u.set(E,A))}}function nN(i,o,r,u){var E=(E=Q.current)?Fh(E):null;if(!E)throw Error(a(446));switch(i){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(o=Zr(r.href),r=Ar(E).hoistableStyles,u=r.get(o),u||(u={type:"style",instance:null,count:0,state:null},r.set(o,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){i=Zr(r.href);var A=Ar(E).hoistableStyles,b=A.get(i);if(b||(E=E.ownerDocument||E,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},A.set(i,b),(A=E.querySelector(Hu(i)))&&!A._p&&(b.instance=A,b.state.loading=5),Ra.has(i)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Ra.set(i,r),A||t1(E,i,r,b.state))),o&&u===null)throw Error(a(528,""));return b}if(o&&u!==null)throw Error(a(529,""));return null;case"script":return o=r.async,r=r.src,typeof r=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=$r(r),r=Ar(E).hoistableScripts,u=r.get(o),u||(u={type:"script",instance:null,count:0,state:null},r.set(o,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,i))}}function Zr(i){return'href="'+ua(i)+'"'}function Hu(i){return'link[rel="stylesheet"]['+i+"]"}function iN(i){return R({},i,{"data-precedence":i.precedence,precedence:null})}function t1(i,o,r,u){i.querySelector('link[rel="preload"][as="style"]['+o+"]")?u.loading=1:(o=i.createElement("link"),u.preload=o,o.addEventListener("load",function(){return u.loading|=1}),o.addEventListener("error",function(){return u.loading|=2}),Jn(o,"link",r),Fn(o),i.head.appendChild(o))}function $r(i){return'[src="'+ua(i)+'"]'}function ku(i){return"script[async]"+i}function aN(i,o,r){if(o.count++,o.instance===null)switch(o.type){case"style":var u=i.querySelector('style[data-href~="'+ua(r.href)+'"]');if(u)return o.instance=u,Fn(u),u;var E=R({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),Fn(u),Jn(u,"style",E),jh(u,r.precedence,i),o.instance=u;case"stylesheet":E=Zr(r.href);var A=i.querySelector(Hu(E));if(A)return o.state.loading|=4,o.instance=A,Fn(A),A;u=iN(r),(E=Ra.get(E))&&dR(u,E),A=(i.ownerDocument||i).createElement("link"),Fn(A);var b=A;return b._p=new Promise(function(y,B){b.onload=y,b.onerror=B}),Jn(A,"link",u),o.state.loading|=4,jh(A,r.precedence,i),o.instance=A;case"script":return A=$r(r.src),(E=i.querySelector(ku(A)))?(o.instance=E,Fn(E),E):(u=r,(E=Ra.get(A))&&(u=R({},r),hR(u,E)),i=i.ownerDocument||i,E=i.createElement("script"),Fn(E),Jn(E,"link",u),i.head.appendChild(E),o.instance=E);case"void":return null;default:throw Error(a(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(u=o.instance,o.state.loading|=4,jh(u,r.precedence,i));return o.instance}function jh(i,o,r){for(var u=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=u.length?u[u.length-1]:null,A=E,b=0;b<u.length;b++){var y=u[b];if(y.dataset.precedence===o)A=y;else if(A!==E)break}A?A.parentNode.insertBefore(i,A.nextSibling):(o=r.nodeType===9?r.head:r,o.insertBefore(i,o.firstChild))}function dR(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.title==null&&(i.title=o.title)}function hR(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.integrity==null&&(i.integrity=o.integrity)}var zh=null;function oN(i,o,r){if(zh===null){var u=new Map,E=zh=new Map;E.set(r,u)}else E=zh,u=E.get(r),u||(u=new Map,E.set(r,u));if(u.has(i))return u;for(u.set(i,null),r=r.getElementsByTagName(i),E=0;E<r.length;E++){var A=r[E];if(!(A[Xc]||A[ui]||i==="link"&&A.getAttribute("rel")==="stylesheet")&&A.namespaceURI!=="http://www.w3.org/2000/svg"){var b=A.getAttribute(o)||"";b=i+b;var y=u.get(b);y?y.push(A):u.set(b,[A])}}return u}function lN(i,o,r){i=i.ownerDocument||i,i.head.insertBefore(r,o==="title"?i.querySelector("head > title"):null)}function n1(i,o,r){if(r===1||o.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return i=o.disabled,typeof o.precedence=="string"&&i==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function sN(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var Uu=null;function i1(){}function a1(i,o,r){if(Uu===null)throw Error(a(475));var u=Uu;if(o.type==="stylesheet"&&(typeof r.media!="string"||matchMedia(r.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var E=Zr(r.href),A=i.querySelector(Hu(E));if(A){i=A._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(u.count++,u=Yh.bind(u),i.then(u,u)),o.state.loading|=4,o.instance=A,Fn(A);return}A=i.ownerDocument||i,r=iN(r),(E=Ra.get(E))&&dR(r,E),A=A.createElement("link"),Fn(A);var b=A;b._p=new Promise(function(y,B){b.onload=y,b.onerror=B}),Jn(A,"link",r),o.instance=A}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(o,i),(i=o.state.preload)&&(o.state.loading&3)===0&&(u.count++,o=Yh.bind(u),i.addEventListener("load",o),i.addEventListener("error",o))}}function o1(){if(Uu===null)throw Error(a(475));var i=Uu;return i.stylesheets&&i.count===0&&fR(i,i.stylesheets),0<i.count?function(o){var r=setTimeout(function(){if(i.stylesheets&&fR(i,i.stylesheets),i.unsuspend){var u=i.unsuspend;i.unsuspend=null,u()}},6e4);return i.unsuspend=o,function(){i.unsuspend=null,clearTimeout(r)}}:null}function Yh(){if(this.count--,this.count===0){if(this.stylesheets)fR(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Kh=null;function fR(i,o){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Kh=new Map,o.forEach(l1,i),Kh=null,Yh.call(i))}function l1(i,o){if(!(o.state.loading&4)){var r=Kh.get(i);if(r)var u=r.get(null);else{r=new Map,Kh.set(i,r);for(var E=i.querySelectorAll("link[data-precedence],style[data-precedence]"),A=0;A<E.length;A++){var b=E[A];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(r.set(b.dataset.precedence,b),u=b)}u&&r.set(null,u)}E=o.instance,b=E.getAttribute("data-precedence"),A=r.get(b)||u,A===u&&r.set(null,E),r.set(b,E),this.count++,u=Yh.bind(this),E.addEventListener("load",u),E.addEventListener("error",u),A?A.parentNode.insertBefore(E,A.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(E,i.firstChild)),o.state.loading|=4}}var wu={$$typeof:k,Provider:null,Consumer:null,_currentValue:ie,_currentValue2:ie,_threadCount:0};function s1(i,o,r,u,E,A,b,y){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=cm(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cm(0),this.hiddenUpdates=cm(null),this.identifierPrefix=u,this.onUncaughtError=E,this.onCaughtError=A,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=y,this.incompleteTransitions=new Map}function rN(i,o,r,u,E,A,b,y,B,de,Re,_e){return i=new s1(i,o,r,b,y,B,de,_e),o=1,A===!0&&(o|=24),A=Xi(3,null,null,o),i.current=A,A.stateNode=i,o=Xm(),o.refCount++,i.pooledCache=o,o.refCount++,A.memoizedState={element:u,isDehydrated:r,cache:o},Qm(A),i}function cN(i){return i?(i=Dr,i):Dr}function uN(i,o,r,u,E,A){E=cN(E),u.context===null?u.context=E:u.pendingContext=E,u=cl(o),u.payload={element:r},A=A===void 0?null:A,A!==null&&(u.callback=A),r=ul(i,u,o),r!==null&&(Ji(r,i,o),fu(r,i,o))}function dN(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var r=i.retryLane;i.retryLane=r!==0&&r<o?r:o}}function ER(i,o){dN(i,o),(i=i.alternate)&&dN(i,o)}function hN(i){if(i.tag===13){var o=Or(i,67108864);o!==null&&Ji(o,i,67108864),ER(i,67108864)}}var Vh=!0;function r1(i,o,r,u){var E=M.T;M.T=null;var A=Y.p;try{Y.p=2,mR(i,o,r,u)}finally{Y.p=A,M.T=E}}function c1(i,o,r,u){var E=M.T;M.T=null;var A=Y.p;try{Y.p=8,mR(i,o,r,u)}finally{Y.p=A,M.T=E}}function mR(i,o,r,u){if(Vh){var E=AR(u);if(E===null)nR(i,o,u,Wh,r),EN(i,u);else if(d1(E,i,o,r,u))u.stopPropagation();else if(EN(i,u),o&4&&-1<u1.indexOf(i)){for(;E!==null;){var A=mr(E);if(A!==null)switch(A.tag){case 3:if(A=A.stateNode,A.current.memoizedState.isDehydrated){var b=ls(A.pendingLanes);if(b!==0){var y=A;for(y.pendingLanes|=2,y.entangledLanes|=2;b;){var B=1<<31-Vi(b);y.entanglements[1]|=B,b&=~B}oo(A),(bt&6)===0&&(vh=ye()+500,vu(0))}}break;case 13:y=Or(A,2),y!==null&&Ji(y,A,2),Lh(),ER(A,2)}if(A=AR(u),A===null&&nR(i,o,u,Wh,r),A===E)break;E=A}E!==null&&u.stopPropagation()}else nR(i,o,u,null,r)}}function AR(i){return i=Im(i),RR(i)}var Wh=null;function RR(i){if(Wh=null,i=Er(i),i!==null){var o=c(i);if(o===null)i=null;else{var r=o.tag;if(r===13){if(i=d(o),i!==null)return i;i=null}else if(r===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Wh=i,null}function fN(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ue()){case $e:return 2;case Rt:return 8;case zt:case os:return 32;case hr:return 268435456;default:return 32}default:return 32}}var TR=!1,pl=null,Nl=null,Cl=null,Pu=new Map,Gu=new Map,bl=[],u1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function EN(i,o){switch(i){case"focusin":case"focusout":pl=null;break;case"dragenter":case"dragleave":Nl=null;break;case"mouseover":case"mouseout":Cl=null;break;case"pointerover":case"pointerout":Pu.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gu.delete(o.pointerId)}}function Bu(i,o,r,u,E,A){return i===null||i.nativeEvent!==A?(i={blockedOn:o,domEventName:r,eventSystemFlags:u,nativeEvent:A,targetContainers:[E]},o!==null&&(o=mr(o),o!==null&&hN(o)),i):(i.eventSystemFlags|=u,o=i.targetContainers,E!==null&&o.indexOf(E)===-1&&o.push(E),i)}function d1(i,o,r,u,E){switch(o){case"focusin":return pl=Bu(pl,i,o,r,u,E),!0;case"dragenter":return Nl=Bu(Nl,i,o,r,u,E),!0;case"mouseover":return Cl=Bu(Cl,i,o,r,u,E),!0;case"pointerover":var A=E.pointerId;return Pu.set(A,Bu(Pu.get(A)||null,i,o,r,u,E)),!0;case"gotpointercapture":return A=E.pointerId,Gu.set(A,Bu(Gu.get(A)||null,i,o,r,u,E)),!0}return!1}function mN(i){var o=Er(i.target);if(o!==null){var r=c(o);if(r!==null){if(o=r.tag,o===13){if(o=d(r),o!==null){i.blockedOn=o,aM(i.priority,function(){if(r.tag===13){var u=Qi();u=um(u);var E=Or(r,u);E!==null&&Ji(E,r,u),ER(r,u)}});return}}else if(o===3&&r.stateNode.current.memoizedState.isDehydrated){i.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Xh(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var r=AR(i.nativeEvent);if(r===null){r=i.nativeEvent;var u=new r.constructor(r.type,r);gm=u,r.target.dispatchEvent(u),gm=null}else return o=mr(r),o!==null&&hN(o),i.blockedOn=r,!1;o.shift()}return!0}function AN(i,o,r){Xh(i)&&r.delete(o)}function h1(){TR=!1,pl!==null&&Xh(pl)&&(pl=null),Nl!==null&&Xh(Nl)&&(Nl=null),Cl!==null&&Xh(Cl)&&(Cl=null),Pu.forEach(AN),Gu.forEach(AN)}function qh(i,o){i.blockedOn===o&&(i.blockedOn=null,TR||(TR=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,h1)))}var Zh=null;function RN(i){Zh!==i&&(Zh=i,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Zh===i&&(Zh=null);for(var o=0;o<i.length;o+=3){var r=i[o],u=i[o+1],E=i[o+2];if(typeof u!="function"){if(RR(u||r)===null)continue;break}var A=mr(r);A!==null&&(i.splice(o,3),o-=3,RA(A,{pending:!0,data:E,method:r.method,action:u},u,E))}}))}function Fu(i){function o(B){return qh(B,i)}pl!==null&&qh(pl,i),Nl!==null&&qh(Nl,i),Cl!==null&&qh(Cl,i),Pu.forEach(o),Gu.forEach(o);for(var r=0;r<bl.length;r++){var u=bl[r];u.blockedOn===i&&(u.blockedOn=null)}for(;0<bl.length&&(r=bl[0],r.blockedOn===null);)mN(r),r.blockedOn===null&&bl.shift();if(r=(i.ownerDocument||i).$$reactFormReplay,r!=null)for(u=0;u<r.length;u+=3){var E=r[u],A=r[u+1],b=E[ki]||null;if(typeof A=="function")b||RN(r);else if(b){var y=null;if(A&&A.hasAttribute("formAction")){if(E=A,b=A[ki]||null)y=b.formAction;else if(RR(E)!==null)continue}else y=b.action;typeof y=="function"?r[u+1]=y:(r.splice(u,3),u-=3),RN(r)}}}function SR(i){this._internalRoot=i}$h.prototype.render=SR.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(a(409));var r=o.current,u=Qi();uN(r,u,i,o,null,null)},$h.prototype.unmount=SR.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;uN(i.current,2,null,i,null,null),Lh(),o[fr]=null}};function $h(i){this._internalRoot=i}$h.prototype.unstable_scheduleHydration=function(i){if(i){var o=Hg();i={blockedOn:null,target:i,priority:o};for(var r=0;r<bl.length&&o!==0&&o<bl[r].priority;r++);bl.splice(r,0,i),r===0&&mN(i)}};var TN=t.version;if(TN!=="19.1.0")throw Error(a(527,TN,"19.1.0"));Y.findDOMNode=function(i){var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(a(188)):(i=Object.keys(i).join(","),Error(a(268,i)));return i=h(o),i=i!==null?m(i):null,i=i===null?null:i.stateNode,i};var f1={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:M,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qh.isDisabled&&Qh.supportsFiber)try{Kc=Qh.inject(f1),Ki=Qh}catch{}}return zu.createRoot=function(i,o){if(!s(i))throw Error(a(299));var r=!1,u="",E=H_,A=k_,b=U_,y=null;return o!=null&&(o.unstable_strictMode===!0&&(r=!0),o.identifierPrefix!==void 0&&(u=o.identifierPrefix),o.onUncaughtError!==void 0&&(E=o.onUncaughtError),o.onCaughtError!==void 0&&(A=o.onCaughtError),o.onRecoverableError!==void 0&&(b=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(y=o.unstable_transitionCallbacks)),o=rN(i,1,!1,null,null,r,u,E,A,b,y,null),i[fr]=o.current,tR(i),new SR(o)},zu.hydrateRoot=function(i,o,r){if(!s(i))throw Error(a(299));var u=!1,E="",A=H_,b=k_,y=U_,B=null,de=null;return r!=null&&(r.unstable_strictMode===!0&&(u=!0),r.identifierPrefix!==void 0&&(E=r.identifierPrefix),r.onUncaughtError!==void 0&&(A=r.onUncaughtError),r.onCaughtError!==void 0&&(b=r.onCaughtError),r.onRecoverableError!==void 0&&(y=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(B=r.unstable_transitionCallbacks),r.formState!==void 0&&(de=r.formState)),o=rN(i,1,!0,o,r??null,u,E,A,b,y,B,de),o.context=cN(null),r=o.current,u=Qi(),u=um(u),E=cl(u),E.callback=null,ul(r,E,u),r=u,o.current.lanes=r,Wc(o,r),oo(o),i[fr]=o.current,tR(i),new $h(o)},zu.version="19.1.0",zu}var yN;function b1(){if(yN)return _R.exports;yN=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),_R.exports=C1(),_R.exports}var O1=b1(),C=JT();const _i=QT(C),TE=R1({__proto__:null,default:_i},[C]);var Db={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},ys=_i.createContext&&_i.createContext(Db),D1=["attr","size","title"];function y1(e,t){if(e==null)return{};var n=v1(e,t),a,s;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(s=0;s<c.length;s++)a=c[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function v1(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function kf(){return kf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},kf.apply(this,arguments)}function vN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Uf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vN(Object(n),!0).forEach(function(a){M1(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vN(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function M1(e,t,n){return t=L1(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L1(e){var t=x1(e,"string");return typeof t=="symbol"?t:t+""}function x1(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yb(e){return e&&e.map((t,n)=>_i.createElement(t.tag,Uf({key:n},t.attr),yb(t.child)))}function ya(e){return t=>_i.createElement(H1,kf({attr:Uf({},e.attr)},t),yb(e.child))}function H1(e){var t=n=>{var{attr:a,size:s,title:c}=e,d=y1(e,D1),f=s||n.size||"1em",h;return n.className&&(h=n.className),e.className&&(h=(h?h+" ":"")+e.className),_i.createElement("svg",kf({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,a,d,{className:h,style:Uf(Uf({color:e.color||n.color},n.style),e.style),height:f,width:f,xmlns:"http://www.w3.org/2000/svg"}),c&&_i.createElement("title",null,c),e.children)};return ys!==void 0?_i.createElement(ys.Consumer,null,n=>t(n)):t(Db)}function k1(e){return ya({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M407.8 294.7c-3.3-.4-6.7-.8-10-1.3c3.4 .4 6.7 .9 10 1.3zM288 227.1C261.9 176.4 190.9 81.9 124.9 35.3C61.6-9.4 37.5-1.7 21.6 5.5C3.3 13.8 0 41.9 0 58.4S9.1 194 15 213.9c19.5 65.7 89.1 87.9 153.2 80.7c3.3-.5 6.6-.9 10-1.4c-3.3 .5-6.6 1-10 1.4C74.3 308.6-9.1 342.8 100.3 464.5C220.6 589.1 265.1 437.8 288 361.1c22.9 76.7 49.2 222.5 185.6 103.4c102.4-103.4 28.1-156-65.8-169.9c-3.3-.4-6.7-.8-10-1.3c3.4 .4 6.7 .9 10 1.3c64.1 7.1 133.6-15.1 153.2-80.7C566.9 194 576 75 576 58.4s-3.3-44.7-21.6-52.9c-15.8-7.1-40-14.9-103.2 29.8C385.1 81.9 314.1 176.4 288 227.1z"},child:[]}]})(e)}function U1(e){return ya({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"},child:[]}]})(e)}function w1(e){return ya({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M192 32c0 17.7 14.3 32 32 32c123.7 0 224 100.3 224 224c0 17.7 14.3 32 32 32s32-14.3 32-32C512 128.9 383.1 0 224 0c-17.7 0-32 14.3-32 32zm0 96c0 17.7 14.3 32 32 32c70.7 0 128 57.3 128 128c0 17.7 14.3 32 32 32s32-14.3 32-32c0-106-86-192-192-192c-17.7 0-32 14.3-32 32zM96 144c0-26.5-21.5-48-48-48S0 117.5 0 144V368c0 79.5 64.5 144 144 144s144-64.5 144-144s-64.5-144-144-144H128v96h16c26.5 0 48 21.5 48 48s-21.5 48-48 48s-48-21.5-48-48V144z"},child:[]}]})(e)}function P1(e){return ya({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M249.6 471.5c10.8 3.8 22.4-4.1 22.4-15.5V78.6c0-4.2-1.6-8.4-5-11C247.4 52 202.4 32 144 32C93.5 32 46.3 45.3 18.1 56.1C6.8 60.5 0 71.7 0 83.8V454.1c0 11.9 12.8 20.2 24.1 16.5C55.6 460.1 105.5 448 144 448c33.9 0 79 14 105.6 23.5zm76.8 0C353 462 398.1 448 432 448c38.5 0 88.4 12.1 119.9 22.6c11.3 3.8 24.1-4.6 24.1-16.5V83.8c0-12.1-6.8-23.3-18.1-27.6C529.7 45.3 482.5 32 432 32c-58.4 0-103.4 20-123 35.6c-3.3 2.6-5 6.8-5 11V456c0 11.4 11.7 19.3 22.4 15.5z"},child:[]}]})(e)}function G1(e){return ya({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"},child:[]}]})(e)}function B1(e){return ya({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M352 144c0-44.2 35.8-80 80-80s80 35.8 80 80v48c0 17.7 14.3 32 32 32s32-14.3 32-32V144C576 64.5 511.5 0 432 0S288 64.5 288 144v48H64c-35.3 0-64 28.7-64 64V448c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V256c0-35.3-28.7-64-64-64H352V144z"},child:[]}]})(e)}function F1(e){return ya({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M144 144v48H304V144c0-44.2-35.8-80-80-80s-80 35.8-80 80zM80 192V144C80 64.5 144.5 0 224 0s144 64.5 144 144v48h16c35.3 0 64 28.7 64 64V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V256c0-35.3 28.7-64 64-64H80z"},child:[]}]})(e)}function vb(e){return ya({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"},child:[]}]})(e)}const j1="7.41",ja=16;var kn=(e=>(e.Exact="Exact",e.SkillSequence="SkillSequence",e.Edited="Edited",e))(kn||{}),pa=(e=>(e.Record="Record",e.SkillSequencePresets="SkillSequencePresets",e.MarkerTrackIndividual="MarkerTrackIndividual",e.MarkerTracksCombined="MarkerTracksCombined",e.MarkerTrackSet="MarkerTrackSet",e))(pa||{}),ga=(e=>(e[e.RealTime=0]="RealTime",e[e.RealTimeAutoPause=1]="RealTimeAutoPause",e[e.Manual=2]="Manual",e))(ga||{}),qo=(e=>(e[e.Initial=0]="Initial",e[e.FpsTax=1]="FpsTax",e[e.AllaganGcdFormula=2]="AllaganGcdFormula",e))(qo||{});const eS={version:2};let Mb=!1;function z1(){return Mb}const SE="DT",Ju=window.location.hostname.startsWith("beta"),Y1=localStorage.length===0;function pt(e){const t=localStorage.getItem(SE+"."+e);return localStorage.getItem(e)!==null&&(Mb=!0),t}function Ct(e,t){localStorage.setItem(SE+"."+e,t)}function dT(e){localStorage.removeItem(SE+"."+e)}function Lb(){Object.keys(localStorage).forEach(e=>{e.startsWith(SE+".")&&localStorage.removeItem(e)})}function xb(e,t){const n=e in OR?OR[e]:OR.NEVER;return t>=n.level}const ue=()=>e=>e,K1=ue()({BENEFIC:{id:3594,name:"Benefic",label:{zh:"",ja:""}},LIGHTSPEED:{id:3606,name:"Lightspeed",label:{zh:"",ja:""}},HELIOS:{id:3600,name:"Helios",label:{zh:"",ja:""}},ASCEND:{id:3603,name:"Ascend",label:{zh:"",ja:""}},ESSENTIAL_DIGNITY:{id:3614,name:"Essential Dignity",label:{zh:"",ja:""}},BENEFIC_II:{id:3610,name:"Benefic II",label:{zh:"",ja:""}},ASTRAL_DRAW:{id:37017,name:"Astral Draw",label:{zh:"",ja:""}},UMBRAL_DRAW:{id:37018,name:"Umbral Draw",label:{zh:"",ja:""}},PLAY_I:{id:37019,name:"Play I",label:{zh:"I",ja:"I"}},PLAY_II:{id:37020,name:"Play II",label:{zh:"II",ja:"II"}},PLAY_III:{id:37021,name:"Play III",label:{zh:"III",ja:"III"}},ASPECTED_BENEFIC:{id:3595,name:"Aspected Benefic",label:{zh:"",ja:""}},ASPECTED_HELIOS:{id:3601,name:"Aspected Helios",label:{zh:"",ja:""}},GRAVITY:{id:3615,name:"Gravity",label:{zh:"",ja:""}},COMBUST_II:{id:3608,name:"Combust II",label:{zh:"",ja:""}},SYNASTRY:{id:3612,name:"Synastry",label:{zh:"",ja:""}},DIVINATION:{id:16552,name:"Divination",label:{zh:"",ja:""}},COLLECTIVE_UNCONSCIOUS:{id:3613,name:"Collective Unconscious",label:{zh:"",ja:""}},CELESTIAL_OPPOSITION:{id:16553,name:"Celestial Opposition",label:{zh:"",ja:""}},EARTHLY_STAR:{id:7439,name:"Earthly Star",label:{zh:"",ja:""}},STELLAR_DETONATION:{id:8324,name:"Stellar Detonation",label:{zh:"",ja:""}},MALEFIC_III:{id:7442,name:"Malefic III",label:{zh:"",ja:""}},MINOR_ARCANA:{id:37022,name:"Minor Arcana",label:{zh:"",ja:""}},COMBUST_III:{id:16554,name:"Combust III",label:{zh:"",ja:""}},MALEFIC_IV:{id:16555,name:"Malefic IV",label:{zh:"",ja:""}},CELESTIAL_INTERSECTION:{id:16556,name:"Celestial Intersection",label:{zh:"",ja:""}},HOROSCOPE:{id:16557,name:"Horoscope",label:{zh:"",ja:""}},HOROSCOPE_RECAST:{id:16558,name:"Horoscope (Recast)",label:{zh:"",ja:""}},NEUTRAL_SECT:{id:16559,name:"Neutral Sect",label:{zh:"",ja:""}},FALL_MALEFIC:{id:25871,name:"Fall Malefic",label:{zh:"",ja:""}},GRAVITY_II:{id:25872,name:"Gravity II",label:{zh:"",ja:""}},EXALTATION:{id:25873,name:"Exaltation",label:{zh:"",ja:""}},MACROCOSMOS:{id:25874,name:"Macrocosmos",label:{zh:"",ja:""}},MICROCOSMOS:{id:25875,name:"Microcosmos",label:{zh:"",ja:""}},ORACLE:{id:37029,name:"Oracle",label:{zh:"",ja:""}},HELIOS_CONJUNCTION:{id:37030,name:"Helios Conjunction",label:{zh:"",ja:""}},SUN_SIGN:{id:37031,name:"Sun Sign",label:{zh:"",ja:""}},THE_BALANCE:{id:37023,name:"The Balance",label:{zh:"",ja:""}},THE_ARROW:{id:37024,name:"The Arrow",label:{zh:"",ja:""}},THE_SPIRE:{id:37025,name:"The Spire",label:{zh:"",ja:""}},THE_SPEAR:{id:37026,name:"The Spear",label:{zh:"",ja:""}},THE_BOLE:{id:37027,name:"The Bole",label:{zh:"",ja:""}},THE_EWER:{id:37028,name:"The Ewer",label:{zh:"",ja:""}},LORD_OF_CROWNS:{id:7444,name:"Lord of Crowns",label:{zh:"",ja:""}},LADY_OF_CROWNS:{id:7445,name:"Lady of Crowns",label:{zh:"",ja:""}}}),V1=ue()({cd_LIGHTSPEED:{name:"cd_Lightspeed"},cd_ESSENTIAL_DIGNITY:{name:"cd_EssentialDignity"},cd_ASTRAL_DRAW:{name:"cd_AstralDraw"},cd_PLAY_I:{name:"cd_PlayI"},cd_PLAY_II:{name:"cd_PlayII"},cd_PLAY_III:{name:"cd_PlayIII"},cd_SYNASTRY:{name:"cd_Synastry"},cd_DIVINATION:{name:"cd_Divination"},cd_COLLECTIVE_UNCONSCIOUS:{name:"cd_CollectiveUnconscious"},cd_CELESTIAL_OPPOSITION:{name:"cd_CelestialOpposition"},cd_EARTHLY_STAR:{name:"cd_EarthlyStar"},cd_STELLAR_DETONATION:{name:"cd_StellarDetonation"},cd_MINOR_ARCANA:{name:"cd_MinorArcana"},cd_CELESTIAL_INTERSECTION:{name:"cd_CelestialIntersection"},cd_HOROSCOPE:{name:"cd_Horoscope"},cd_HOROSCOPE_RECAST:{name:"cd_HoroscopeRecast"},cd_NEUTRAL_SECT:{name:"cd_NeutralSect"},cd_EXALTATION:{name:"cd_Exaltation"},cd_MACROCOSMOS:{name:"cd_Macrocosmos"},cd_MICROCOSMOS:{name:"cd_Microcosmos"},cd_ORACLE:{name:"cd_Oracle"},cd_SUN_SIGN:{name:"cd_SunSign"}}),W1=ue()({ARCANA:{name:"Arcana",label:{zh:""}},MINOR_ARCANA:{name:"Minor Arcana",label:{zh:""}}}),tS=ue()({LIGHTSPEED:{name:"Lightspeed",label:{zh:""}},THE_BALANCE:{name:"The Balance",label:{zh:""}},THE_ARROW:{name:"The Arrow",label:{zh:""}},THE_SPIRE:{name:"The Spire",label:{zh:""}},THE_SPEAR:{name:"The Spear",label:{zh:""}},THE_BOLE:{name:"The Bole",label:{zh:""}},THE_EWER:{name:"The Ewer",label:{zh:""}},ASPECTED_BENEFIC:{name:"Aspected Benefic",label:{zh:""}},ASPECTED_HELIOS:{name:"Aspected Helios",label:{zh:""}},SYNASTRY:{name:"Synastry",label:{zh:""}},DIVINATION:{name:"Divination",label:{zh:""}},DIVINING:{name:"Divining",label:{zh:""}},COLLECTIVE_UNCONSCIOUS:{name:"Collective Unconscious",label:{zh:""}},COLLECTIVE_UNCONSCIOUS_MIT:{name:"Collective Unconscious (Mitigation)",label:{zh:""}},WHEEL_OF_FORTUNE:{name:"Wheel of Fortune",label:{zh:""}},OPPOSITION:{name:"Opposition",label:{zh:""}},EARTHLY_DOMINANCE:{name:"Earthly Dominance",mayNotBeCanceled:!0,label:{zh:""}},GIANT_DOMINANCE:{name:"Giant Dominance",mayNotBeCanceled:!0,label:{zh:""}},COMBUST_II:{name:"Combust II",label:{zh:""}},COMBUST_III:{name:"Combust III",label:{zh:""}},INTERSECTION:{name:"Intersection",label:{zh:""}},HOROSCOPE:{name:"Horoscope",label:{zh:""}},HOROSCOPE_HELIOS:{name:"Horoscope Helios",label:{zh:""}},NEUTRAL_SECT:{name:"Neutral Sect",label:{zh:""}},NEUTRAL_SECT_SHIELD:{name:"Neutral Sect (Shield)",label:{zh:""}},SUNTOUCHED:{name:"Suntouched",label:{zh:""}},EXALTATION:{name:"Exaltation",label:{zh:""}},MACROCOSMOS:{name:"Macrocosmos",label:{zh:""}},HELIOS_CONJUNCTION:{name:"Helios Conjunction",label:{zh:""}},SUN_SIGN:{name:"Sun Sign",label:{zh:""}}}),X1=ue()({ARCANA_1:{name:"Arcana 1",label:{zh:"1"}},ARCANA_2:{name:"Arcana 2",label:{zh:"2"}},ARCANA_3:{name:"Arcana 3",label:{zh:"3"}},NEXT_DRAW:{name:"Next Draw",label:{zh:""}}}),q1=ue()({COMBUST_MASTERY_II:{name:"Combust Mastery II",level:72},MALEFIC_MASTERY_III:{name:"Malefic Mastery III",level:82},ENHANCED_ESSENTIAL_DIGNITY:{name:"Enhanced Essential Dignity",level:78},MALEFIC_MASTERY_IV:{name:"Malefic Mastery IV",level:82},GRAVITY_MASTERY:{name:"Gravity Mastery",level:82},ENHANCED_CELESTIAL_INTERSECTION:{name:"Enhanced Celestial Intersection",level:88},ENHANCED_DIVINATION:{name:"Enhanced Divination",level:92},ASPECTED_HELIOS_MASTERY:{name:"Aspected Helios Mastery",level:96},ENHANCED_ESSENTIAL_DIGNITY_II:{name:"Enhanced Essential Dignity_II",level:98},ENHANCED_NEUTRAL_SECT:{name:"Enhanced Neutral Sect",level:100}}),Z1={...W1,...tS,...X1},$1=ue()({BLIZZARD:{id:142,name:"Blizzard",label:{zh:"1",ja:""},discordEmote:"B1"},FIRE:{id:141,name:"Fire",label:{zh:"1",ja:""},discordEmote:"F1"},BLIZZARD_II:{id:25793,name:"Blizzard 2",label:{zh:"2",ja:""},discordEmote:"F2"},FIRE_II:{id:147,name:"Fire 2",label:{zh:"2",ja:""},discordEmote:"F2"},TRANSPOSE:{id:149,name:"Transpose",label:{zh:"",ja:""},discordEmote:"Transpose"},THUNDER_III:{id:153,name:"Thunder 3",label:{zh:"3",ja:""},discordEmote:"T3"},THUNDER_IV:{id:7420,name:"Thunder 4",label:{zh:""},discordEmote:"T4"},MANAWARD:{id:157,name:"Manaward",label:{zh:"",ja:""},discordEmote:"Manaward"},MANAFONT:{id:158,name:"Manafont",label:{zh:"",ja:""},discordEmote:"Manafont"},LEY_LINES:{id:3573,name:"Ley Lines",label:{zh:"",ja:""},discordEmote:"LL"},FIRE_III:{id:152,name:"Fire 3",label:{zh:"3",ja:""},discordEmote:"F3"},BLIZZARD_III:{id:154,name:"Blizzard 3",label:{zh:"3",ja:""},discordEmote:"B3"},FREEZE:{id:159,name:"Freeze",label:{zh:"",ja:""},discordEmote:"Freeze"},FLARE:{id:162,name:"Flare",label:{zh:"",ja:""},discordEmote:"Flare"},BLIZZARD_IV:{id:3576,name:"Blizzard 4",label:{zh:"4",ja:""},discordEmote:"B4"},FIRE_IV:{id:3577,name:"Fire 4",label:{zh:"4",ja:""},discordEmote:"F4"},BETWEEN_THE_LINES:{id:7419,name:"Between the Lines",label:{zh:"",ja:""},discordEmote:"BtL"},AETHERIAL_MANIPULATION:{id:155,name:"Aetherial Manipulation",label:{zh:"",ja:""},discordEmote:"AM"},TRIPLECAST:{id:7421,name:"Triplecast",label:{zh:"",ja:""},discordEmote:"Triple"},FOUL:{id:7422,name:"Foul",label:{zh:"",ja:""},discordEmote:"Foul"},DESPAIR:{id:16505,name:"Despair",label:{zh:"",ja:""},discordEmote:"Despair"},UMBRAL_SOUL:{id:16506,name:"Umbral Soul",label:{zh:"",ja:""},discordEmote:"Soul"},XENOGLOSSY:{id:16507,name:"Xenoglossy",label:{zh:"",ja:""},discordEmote:"Xeno"},HIGH_FIRE_II:{id:25794,name:"High Fire 2",label:{zh:"2",ja:""},discordEmote:"HF2"},HIGH_BLIZZARD_II:{id:25795,name:"High Blizzard 2",label:{zh:"2",ja:""},discordEmote:"HB2"},AMPLIFIER:{id:25796,name:"Amplifier",label:{zh:"",ja:""},discordEmote:"Amplifier"},PARADOX:{id:25797,name:"Paradox",label:{zh:"",ja:""},discordEmote:"Para"},HIGH_THUNDER:{id:36986,name:"High Thunder",label:{zh:"",ja:""},discordEmote:"HThunder"},HIGH_THUNDER_II:{id:36987,name:"High Thunder 2",label:{zh:""},discordEmote:"HThunder2"},FLARE_STAR:{id:36989,name:"Flare Star",label:{zh:"",ja:""},discordEmote:"FS"},RETRACE:{id:36988,name:"Retrace",label:{zh:"",ja:""}}}),Q1=ue()({cd_TRANSPOSE:{name:"cd_Transpose"},cd_LEY_LINES:{name:"cd_LeyLines"},cd_MANAWARD:{name:"cd_Manaward"},cd_BETWEEN_THE_LINES:{name:"cd_BetweenTheLines"},cd_AETHERIAL_MANIPULATION:{name:"cd_AetherialManipulation"},cd_TRIPLECAST:{name:"cd_Triplecast"},cd_MANAFONT:{name:"cd_Manafont"},cd_AMPLIFIER:{name:"cd_Amplifier"},cd_RETRACE:{name:"cd_Retrace"}}),J1=ue()({POLYGLOT:{name:"Polyglot",label:{zh:""}},ASTRAL_FIRE:{name:"Astral Fire",label:{zh:""}},UMBRAL_ICE:{name:"Umbral Ice",label:{zh:""}},UMBRAL_HEART:{name:"Umbral Heart",label:{zh:""}},ENOCHIAN:{name:"Enochian",label:{zh:""}},PARADOX:{name:"Paradox",label:{zh:""}},ASTRAL_SOUL:{name:"Astral Soul",label:{zh:""}}}),nS=ue()({LEY_LINES:{name:"Ley Lines",label:{zh:""},mayBeToggled:!0},TRIPLECAST:{name:"Triplecast",label:{zh:""},maximumStacks:3},FIRESTARTER:{name:"Firestarter",label:{zh:""}},THUNDERHEAD:{name:"Thunderhead",label:{zh:""}},THUNDER_III:{name:"Thunder III",label:{zh:""}},THUNDER_IV:{name:"Thunder IV",label:{zh:""}},HIGH_THUNDER:{name:"High Thunder",label:{zh:""}},HIGH_THUNDER_II:{name:"High Thunder II",label:{zh:""}},MANAWARD:{name:"Manaward",label:{zh:""}}}),ex=ue()({}),tx=ue()({ENHANCED_ENOCHIAN_II:{name:"Enhanced Enochian II",level:78},ENHANCED_POLYGLOT:{name:"Enhanced Polyglot",level:80},ENHANCED_FOUL:{name:"Enhanced Foul",level:80},ASPECT_MASTERY_IV:{name:"Aspect Mastery IV",level:82},ENHANCED_MANAFONT:{name:"Enhanced Manafont",level:84},ENHANCED_ENOCHIAN_III:{name:"Enhanced Enochian III",level:86},ASPECT_MASTERY_V:{name:"Aspect Mastery V",level:90},THUNDER_MASTERY_III:{name:"Thunder Mastery III",level:92},ENHANCED_LEYLINES:{name:"Enhanced Ley Lines",level:96},ENHANCED_ENOCHIAN_IV:{name:"Enhanced Enochian IV",level:96},ENHANCED_POLYGLOT_II:{name:"Enhanced Polyglot II",level:98},ENHANCED_ASTRAL_FIRE:{name:"Enhanced Astral Fire",level:100}}),nx={...J1,...nS,...ex},ix=ue()({HEAVY_SHOT:{id:97,name:"Heavy Shot",label:{zh:""}},QUICK_NOCK:{id:100,name:"Quick Nock",label:{zh:""}},BLOODLETTER:{id:110,name:"Bloodletter",label:{zh:""}},BARRAGE:{id:107,name:"Barrage",label:{zh:""}},RAGING_STRIKES:{id:101,name:"Raging Strikes",label:{zh:""}},REPELLING_SHOT:{id:112,name:"Repelling Shot",label:{zh:""}},WIDE_VOLLEY:{id:111,name:"Wide Volley",label:{zh:""}},MAGES_BALLAD:{id:114,name:"Mage's Ballad",label:{zh:""}},ARMYS_PAEON:{id:116,name:"Army's Paeon",label:{zh:""}},RAIN_OF_DEATH:{id:117,name:"Rain of Death",label:{zh:""}},BATTLE_VOICE:{id:118,name:"Battle Voice",label:{zh:""}},EMYPREAL_ARROW:{id:3558,name:"Empyreal Arrow",label:{zh:""}},WANDERERS_MINUET:{id:3559,name:"The Wanderer's Minuet",label:{zh:""}},IRON_JAWS:{id:3560,name:"Iron Jaws",label:{zh:""}},WARDENS_PAEAN:{id:3561,name:"Warden's Paean",label:{zh:""}},SIDEWINDER:{id:3562,name:"Sidewinder",label:{zh:""}},PITCH_PERFECT:{id:7404,name:"Pitch Perfect",label:{zh:""}},TROUBADOUR:{id:7405,name:"Troubadour",label:{zh:""}},CAUSTIC_BITE:{id:7406,name:"Caustic Bite",label:{zh:""}},STORMBITE:{id:7407,name:"Stormbite",label:{zh:""}},NATURES_MINNE:{id:7408,name:"Nature's Minne",label:{zh:""}},REFULGENT_ARROW:{id:7409,name:"Refulgent Arrow",label:{zh:""}},SHADOWBITE:{id:16494,name:"Shadowbite",label:{zh:""}},BURST_SHOT:{id:16495,name:"Burst Shot",label:{zh:""}},APEX_ARROW:{id:16496,name:"Apex Arrow",label:{zh:""}},LADONSBITE:{id:25783,name:"Ladonsbite",label:{zh:""}},BLAST_ARROW:{id:25784,name:"Blast Arrow",label:{zh:""}},RADIANT_FINALE:{id:25785,name:"Radiant Finale",label:{zh:""}},HEARTBREAK_SHOT:{id:36975,name:"Heartbreak Shot",label:{zh:""}},RESONANT_ARROW:{id:36976,name:"Resonant Arrow",label:{zh:""}},RADIANT_ENCORE:{id:36977,name:"Radiant Encore",label:{zh:""}}}),ax=ue()({cd_RAGING_STRIKES:{name:"cd_RagingStrikes"},cd_BARRAGE:{name:"cd_Barrage"},cd_EMPYREAL_ARROW:{name:"cd_EmpyrealArrow"},cd_HEARTBREAK_SHOT:{name:"cd_HeartbreakShot"},cd_SIDEWINDER:{name:"cd_Sidewinder"},cd_WANDERERS_MINUET:{name:"cd_WanderersMinuet"},cd_MAGES_BALLAD:{name:"cd_MagesBallad"},cd_ARMYS_PAEON:{name:"cd_ArmysPaeon"},cd_WARDENS_PAEAN:{name:"cd_WardensPaean"},cd_NATURES_MINNE:{name:"cd_NaturesMinne"},cd_REPELLING_SHOT:{name:"cd_RepellingShot"},cd_BATTLE_VOICE:{name:"cd_BattleVoice"},cd_RADIANT_FINALE:{name:"cd_RadiantFinale"},cd_TROUBADOUR:{name:"cd_Troubadour"},cd_PITCH_PERFECT:{name:"cd_PitchPerfect"}}),ox=ue()({SONG_TIMER:{name:"SongTimer",label:{zh:""}},SOUL_VOICE:{name:"Soul Voice",label:{zh:""}},PITCH_PERFECT:{name:"Pitch Perfect",label:{zh:""}},REPERTOIRE:{name:"Repertoire",label:{zh:""}},WANDERERS_CODA:{name:"Wanderer's Coda",label:{zh:""}},MAGES_CODA:{name:"Mage's Coda",label:{zh:""}},ARMYS_CODA:{name:"Army's Coda",label:{zh:""}}}),iS=ue()({HAWKS_EYE:{name:"Hawk's Eye",label:{zh:""}},RAGING_STRIKES:{name:"Raging Strikes",label:{zh:""}},BARRAGE:{name:"Barrage",label:{zh:""}},ARMYS_MUSE:{name:"Army's Muse",label:{zh:""}},ARMYS_ETHOS:{name:"Army's Ethos",label:{zh:""}},BLAST_ARROW_READY:{name:"Blast Arrow Ready",label:{zh:""}},RESONANT_ARROW_READY:{name:"Resonant Arrow Ready",label:{zh:""}},RADIANT_ENCORE_READY:{name:"Radiant Encore Ready",label:{zh:""}},CAUSTIC_BITE:{name:"Caustic Bite",label:{zh:""}},STORMBITE:{name:"Stormbite",label:{zh:""}},MAGES_BALLAD:{name:"Mage's Ballad",label:{zh:""}},ARMYS_PAEON:{name:"Army's Paeon",label:{zh:""}},WANDERERS_MINUET:{name:"Wanderer's Minuet",label:{zh:""}},BATTLE_VOICE:{name:"Battle Voice",label:{zh:""}},WARDENS_PAEAN:{name:"Warden's Paean",label:{zh:""}},TROUBADOUR:{name:"Troubadour",label:{zh:""}},NATURES_MINNE:{name:"Nature's Minne",label:{zh:""}},RADIANT_FINALE:{name:"Radiant Finale",label:{zh:""}}}),lx=ue()({RADIANT_CODA:{name:"Radiant Coda",label:{zh:""}},MUSE_REPERTOIRE:{name:"Muse Repertoire",label:{zh:""}},ETHOS_REPERTOIRE:{name:"Ethos Repertoire",label:{zh:""}}}),sx=ue()({WIDE_VOLLEY_MASTERY:{name:"Wide Volley Mastery",level:72},BITE_MASTERY_II:{name:"Bite Mastery II",level:76},HEAVY_SHOT_MASTERY:{name:"Heavy Shot Mastery",level:76},ENHANCED_ARMYS_PAEON:{name:"Enhanced Army's Paeon",level:78},SOUL_VOICE:{name:"Soul Voice",level:80},QUICK_NOCK_MASTERY:{name:"Quick Nock Mastery",level:82},ENHANCED_BLOODLETTER:{name:"Enhanced Bloodletter",level:84},ENHANCED_APEX_ARROW:{name:"Enhanced Apex Arrow",level:86},ENHANCED_TROUBADOUR:{name:"Enhanced Troubadour",level:88},MINSTRELS_CODA:{name:"Minstrel's Coda",level:90},BLOODLETTER_MASTERY:{name:"Bloodletter Mastery",level:92},RANGED_MASTERY:{name:"Ranged Mastery",level:94},ENHANCED_BARRAGE:{name:"Enhanced Barrage",level:96},ENHANCED_RADIANT_FINALE:{name:"Enhanced Radiant Finale",level:100}}),rx={...ox,...iS,...lx},cx=ue()({STANDARD_FINISH:{id:16003,name:"Standard Finish",label:{zh:""}},SINGLE_STANDARD_FINISH:{id:16191,name:"Single Standard Finish",label:{zh:""}},DOUBLE_STANDARD_FINISH:{id:16192,name:"Double Standard Finish",label:{zh:""}},FINISHING_MOVE:{id:36984,name:"Finishing Move",label:{zh:""}},LAST_DANCE:{id:36983,name:"Last Dance",label:{zh:""}},TECHNICAL_FINISH:{id:16004,name:"Technical Finish",label:{zh:""}},SINGLE_TECHNICAL_FINISH:{id:16193,name:"Single Technical Finish",label:{zh:""}},DOUBLE_TECHNICAL_FINISH:{id:16194,name:"Double Technical Finish",label:{zh:""}},TRIPLE_TECHNICAL_FINISH:{id:16195,name:"Triple Technical Finish",label:{zh:""}},QUADRUPLE_TECHNICAL_FINISH:{id:16196,name:"Quadruple Technical Finish",label:{zh:""}},TILLANA:{id:25790,name:"Tillana",label:{zh:""}},CASCADE:{id:15989,name:"Cascade",label:{zh:""}},FOUNTAIN:{id:15990,name:"Fountain",label:{zh:""}},REVERSE_CASCADE:{id:15991,name:"Reverse Cascade",label:{zh:""}},FOUNTAINFALL:{id:15992,name:"Fountainfall",label:{zh:""}},WINDMILL:{id:15993,name:"Windmill",label:{zh:""}},BLADESHOWER:{id:15994,name:"Bladeshower",label:{zh:""}},RISING_WINDMILL:{id:15995,name:"Rising Windmill",label:{zh:""}},BLOODSHOWER:{id:15996,name:"Bloodshower",label:{zh:""}},STANDARD_STEP:{id:15997,name:"Standard Step",label:{zh:""}},TECHNICAL_STEP:{id:15998,name:"Technical Step",label:{zh:""}},EMBOITE:{id:15999,name:"Emboite",label:{zh:""}},ENTRECHAT:{id:16e3,name:"Entrechat",label:{zh:""}},JETE:{id:16001,name:"Jete",label:{zh:""}},PIROUETTE:{id:16002,name:"Pirouette",label:{zh:""}},SABER_DANCE:{id:16005,name:"Saber Dance",label:{zh:""}},DANCE_OF_THE_DAWN:{id:36985,name:"Dance of the Dawn",label:{zh:""}},CLOSED_POSITION:{id:16006,name:"Closed Position",label:{zh:""}},FAN_DANCE:{id:16007,name:"Fan Dance",label:{zh:""}},FAN_DANCE_II:{id:16008,name:"Fan Dance II",label:{zh:""}},FAN_DANCE_III:{id:16009,name:"Fan Dance III",label:{zh:""}},FAN_DANCE_IV:{id:25791,name:"Fan Dance IV",label:{zh:""}},EN_AVANT:{id:16010,name:"En Avant",label:{zh:""}},DEVILMENT:{id:16011,name:"Devilment",label:{zh:""}},STARFALL_DANCE:{id:25792,name:"Starfall Dance",label:{zh:""}},SHIELD_SAMBA:{id:16012,name:"Shield Samba",label:{zh:""}},FLOURISH:{id:16013,name:"Flourish",label:{zh:""}},IMPROVISATION:{id:16014,name:"Improvisation",label:{zh:""}},IMPROVISED_FINISH:{id:25789,name:"Improvised Finish",label:{zh:""}},CURING_WALTZ:{id:16015,name:"Curing Waltz",label:{zh:""}},ENDING:{id:18073,name:"Ending",label:{zh:""}}}),ux=ue()({cd_STANDARD_STEP:{name:"cd_StandardStep"},cd_TECHNICAL_STEP:{name:"cd_TechnicalStep"},cd_CLOSED_POSITION:{name:"cd_ClosedPosition"},cd_FAN_DANCE:{name:"cd_FanDance"},cd_FAN_DANCE_II:{name:"cd_FanDanceII",label:{zh:"CD"}},cd_FAN_DANCE_III:{name:"cd_FanDanceIII",label:{zh:"CD"}},cd_FAN_DANCE_IV:{name:"cd_FanDanceIV",label:{zh:"CD"}},cd_EN_AVANT:{name:"cd_EnAvant"},cd_DEVILMENT:{name:"cd_Devilment"},cd_SHIELD_SAMBA:{name:"cd_ShieldSamba"},cd_FLOURISH:{name:"cd_Flourish"},cd_IMPROVISATION:{name:"cd_Improvisation"},cd_IMPROVISED_FINISH:{name:"cd_ImprovisedFinish"},cd_CURING_WALTZ:{name:"cd_CuringWaltz"},cd_ENDING:{name:"cd_Ending"}}),dx=ue()({ESPRIT_GAUGE:{name:"EspritGauge",label:{zh:""}},FEATHER_GAUGE:{name:"Feathers",label:{zh:""}},STANDARD_DANCE:{name:"Standard Dance",label:{zh:""}},TECHNICAL_DANCE:{name:"Technical Dance",label:{zh:""}}}),aS=ue()({SILKEN_SYMMETRY:{name:"Silken Symmetry",label:{zh:""}},SILKEN_FLOW:{name:"Silken Flow",label:{zh:""}},FLOURISHING_SYMMETRY:{name:"Flourishing Symmetry",label:{zh:""}},FLOURISHING_FLOW:{name:"Flourishing Flow",label:{zh:""}},THREEFOLD_FAN_DANCE:{name:"Threefold Fan Dance",label:{zh:""}},FOURFOLD_FAN_DANCE:{name:"Fourfold Fan Dance",label:{zh:""}},FINISHING_MOVE_READY:{name:"Finishing Move Ready",label:{zh:""}},FLOURISHING_STARFALL:{name:"Flourishing Starfall",label:{zh:""}},STANDARD_STEP:{name:"Standard Step",label:{zh:""},mayNotBeCanceled:!0},TECHNICAL_STEP:{name:"Technical Step",label:{zh:""},mayNotBeCanceled:!0},LAST_DANCE_READY:{name:"Last Dance Ready",label:{zh:""}},DANCE_OF_THE_DAWN_READY:{name:"Dance of the Dawn Ready",label:{zh:""}},FLOURISHING_FINISH:{name:"Flourishing Finish",label:{zh:""}},SHIELD_SAMBA:{name:"Shield Samba",label:{zh:""}},IMPROVISATION:{name:"Improvisation",label:{zh:""},mayNotBeCanceled:!0},RISING_RHYTHM:{name:"Rising Rhythm",label:{zh:""},maximumStacks:4},IMPROVISATION_REGEN:{name:"Improvisation Regen",label:{zh:""}},IMPROVISED_FINISH:{name:"Improvised Finish",label:{zh:""}},DEVILMENT:{name:"Devilment",label:{zh:""}},TECHNICAL_FINISH:{name:"Technical Finish",label:{zh:""}},ESPRIT:{name:"Esprit",label:{zh:""},mayNotBeCanceled:!0},STANDARD_FINISH:{name:"Standard Finish",label:{zh:""}},CLOSED_POSITION:{name:"Closed Position",label:{zh:""},mayNotBeCanceled:!0},DANCE_PARTNER:{name:"Dance Partner",label:{zh:""}},STANDARD_FINISH_PARTNER:{name:"Standard Finish Partner",label:{zh:"buff"}},ESPRIT_PARTNER:{name:"Esprit Partner",label:{zh:"buff"}},ESPRIT_TECHNICAL:{name:"Esprit Technical",label:{zh:"buff"}}}),hx=ue()({CASCADE_COMBO:{name:"CascadeCombo",label:{zh:""}},WINDMILL_COMBO:{name:"WindmillCombo",label:{zh:""}},STANDARD_BONUS:{name:"StandardBonus",label:{zh:""}},TECHNICAL_BONUS:{name:"TechnicalBonus",label:{zh:""}}}),fx=ue()({ESPRIT:{name:"Esprit",level:76},ENHANCED_EN_AVANT_II:{name:"Enhanced En Avant II",level:78},ENHANCED_TECHNICAL_FINISH:{name:"Enhanced Technical Finish",level:82},ENHANCED_ESPRIT:{name:"Enhanced Esprit",level:84},ENHANCED_FLOURISH:{name:"Enhanced Flourish",level:86},ENHANCED_SHIELD_SAMBA:{name:"Enhanced Shield Samba",level:88},ENHANCED_DEVILMENT:{name:"Enhanced Devilment",level:90},ENHANCED_STANDARD_FINISH:{name:"Enhanced Standard Finish",level:92},DYNAMIC_DANCER:{name:"Dynamic Dancer",level:94},ENHANCED_FLOURISH_II:{name:"Enhanced Flourish II",level:96},ENHANCED_TECHNICAL_FINISH_II:{name:"Enhanced Technical Finish II",level:100}}),Ex={...dx,...aS,...hx},mx=ue()({PIERCING_TALON:{id:90,name:"Piercing Talon",label:{zh:"Piercing Talon"}},TRUE_THRUST:{id:75,name:"True Thrust",label:{zh:""}},RAIDEN_THRUST:{id:16479,name:"Raiden Thrust",label:{zh:""}},DISEMBOWEL:{id:87,name:"Disembowel",label:{zh:""}},SPIRAL_BLOW:{id:36955,name:"Spiral Blow",label:{zh:""}},CHAOS_THRUST:{id:88,name:"Chaos Thrust",label:{zh:""}},CHAOTIC_SPRING:{id:25772,name:"Chaotic Spring",label:{zh:""}},WHEELING_THRUST:{id:3556,name:"Wheeling Thrust",label:{zh:""}},VORPAL_THRUST:{id:78,name:"Vorpal Thrust",label:{zh:""}},LANCE_BARRAGE:{id:36954,name:"Lance Barrage",label:{zh:""}},FULL_THRUST:{id:84,name:"Full Thrust",label:{zh:""}},HEAVENS_THRUST:{id:25771,name:"Heavens' Thrust",label:{zh:""}},FANG_AND_CLAW:{id:3554,name:"Fang and Claw",label:{zh:""}},DRAKESBANE:{id:36952,name:"Drakesbane",label:{zh:""}},DOOM_SPIKE:{id:86,name:"Doom Spike",label:{zh:""}},DRACONIAN_FURY:{id:25770,name:"Draconian Fury",label:{zh:""}},SONIC_THRUST:{id:7397,name:"Sonic Thrust",label:{zh:""}},COERTHAN_TORMENT:{id:16477,name:"Coerthan Torment",label:{zh:""}},LIFE_SURGE:{id:83,name:"Life Surge",label:{zh:""}},LANCE_CHARGE:{id:85,name:"Lance Charge",label:{zh:""}},JUMP:{id:92,name:"Jump",label:{zh:""}},HIGH_JUMP:{id:16478,name:"High Jump",label:{zh:""}},MIRAGE_DIVE:{id:7399,name:"Mirage Dive",label:{zh:""}},DRAGONFIRE_DIVE:{id:96,name:"Dragonfire Dive",label:{zh:""}},RISE_OF_THE_DRAGON:{id:36953,name:"Rise of the Dragon",label:{zh:""}},BATTLE_LITANY:{id:3557,name:"Battle Litany",label:{zh:""}},WYRMWIND_THRUST:{id:25773,name:"Wyrmwind Thrust",label:{zh:""}},GEIRSKOGUL:{id:3555,name:"Geirskogul",label:{zh:""}},NASTROND:{id:7400,name:"Nastrond",label:{zh:""}},STARDIVER:{id:16480,name:"Stardiver",label:{zh:""}},STARCROSS:{id:36956,name:"Starcross",label:{zh:""}},ELUSIVE_JUMP:{id:94,name:"Elusive Jump",label:{zh:""}},WINGED_GLIDE:{id:36951,name:"Winged Glide",label:{zh:""}}}),Ax=ue()({cd_LIFE_SURGE:{name:"cd_LifeSurge"},cd_LANCE_CHARGE:{name:"cd_LanceCharge"},cd_JUMP:{name:"cd_Jump"},cd_HIGH_JUMP:{name:"cd_HighJump"},cd_ELUSIVE_JUMP:{name:"cd_ElusiveJump"},cd_WINGED_GLIDE:{name:"cd_WingedGlide"},cd_DRAGONFIRE_DIVE:{name:"cd_DragonfireDive"},cd_BATTLE_LITANY:{name:"cd_BattleLitany"},cd_GEIRSKOGUL:{name:"cd_Geirskogul"},cd_MIRAGE_DIVE:{name:"cd_MirageDive"},cd_NASTROND:{name:"cd_Nastrond"},cd_STARDIVER:{name:"cd_Stardiver"},cd_WYRMWIND_THRUST:{name:"cd_WyrmwindThrust"},cd_RISE_OF_THE_DRAGON:{name:"cd_RiseOfTheDragon"},cd_STARCROSS:{name:"cd_Starcross"}}),Rx=ue()({LIFE_OF_THE_DRAGON:{name:"Life of the Dragon",label:{zh:""}},FIRSTMINDS_FOCUS:{name:"Firstminds' Focus",label:{zh:""}}}),oS=ue()({LIFE_SURGE:{name:"Life Surge",label:{zh:""}},ENHANCED_PIERCING_TALON:{name:"Enhanced Piercing Talon",label:{zh:""}},POWER_SURGE:{name:"Power Surge",label:{zh:""}},LANCE_CHARGE:{name:"Lance Charge",label:{zh:""}},DIVE_READY:{name:"Dive Ready",label:{zh:""}},CHAOS_THRUST_DOT:{name:"Chaos Thrust DoT",label:{zh:""}},CHAOTIC_SPRING_DOT:{name:"Chaotic Spring DoT",label:{zh:""}},DRAGONS_FLIGHT:{name:"Dragon's Flight",label:{zh:""}},BATTLE_LITANY:{name:"Battle Litany",label:{zh:""}},NASTROND_READY:{name:"Nastrond Ready",label:{zh:""}},DRACONIAN_FIRE:{name:"Draconian Fire",label:{zh:""}},STARCROSS_READY:{name:"Starcross Ready",label:{zh:""}}}),Tx=ue()({DRG_CHAOS_COMBO_TRACKER:{name:"DRG Chaos Combo",label:{zh:""}},DRG_HEAVENS_COMBO_TRACKER:{name:"DRG Heavens Combo",label:{zh:""}},DRG_AOE_COMBO_TRACKER:{name:"DRG AOE Combo",label:{zh:"AOE"}}}),Sx=ue()({JUMP_MASTERY:{name:"Jump Mastery",level:74},LANCE_MASTERY:{name:"Lance Mastery",level:76},ENHANCED_COERTHAN_TORMENT:{name:"Enhanced Coerthan Torment",level:82},ENHANCED_WINGED_GLIDE:{name:"Enhanced Winged Glide",level:84},LANCE_MASTERY_II:{name:"Lance Mastery II",level:86},ENHANCED_LIFE_SURGE:{name:"Enhanced Life Surge",level:88},LANCE_MASTERY_III:{name:"Lance Mastery III",level:90},ENHANCED_DRAGONFIRE_DIVE:{name:"Enhanced Dragonfire Dive",level:92},MELEE_MASTERY_DRG:{name:"Melee Mastery DRG",level:94},LANCE_MASTERY_IV:{name:"Lance Mastery IV",level:96},ENHANCED_STARDIVER:{name:"Enhanced Stardiver",level:100}}),gx={...Rx,...oS,...Tx},Ix=ue()({HARD_SLASH:{id:3617,name:"Hard Slash",label:{zh:""}},SYPHON_STRIKE:{id:3623,name:"Syphon Strike",label:{zh:""}},UNLEASH:{id:3621,name:"Unleash",label:{zh:""}},GRIT:{id:3629,name:"Grit",label:{zh:""}},RELEASE_GRIT:{id:32067,name:"Release Grit",label:{zh:""}},UNMEND:{id:3624,name:"Unmend",label:{zh:""}},SOULEATER:{id:3632,name:"Souleater",label:{zh:""}},FLOOD_OF_DARKNESS:{name:"Flood of Darkness",label:{zh:""}},BLOOD_WEAPON:{id:3625,name:"Blood Weapon",label:{zh:""}},SHADOW_WALL:{id:3636,name:"Shadow Wall",label:{zh:""}},STALWART_SOUL:{id:16468,name:"Stalwart Soul",label:{zh:""}},EDGE_OF_DARKNESS:{name:"Edge of Darkness",label:{zh:""}},DARK_MIND:{id:3634,name:"Dark Mind",label:{zh:""}},LIVING_DEAD:{id:3638,name:"Living Dead",label:{zh:""}},SALTED_EARTH:{id:3639,name:"Salted Earth",label:{zh:""}},SHADOWSTRIDE:{id:36926,name:"Shadowstride",label:{zh:""}},ABYSSAL_DRAIN:{id:3641,name:"Abyssal Drain",label:{zh:""}},CARVE_AND_SPIT:{id:3643,name:"Carve and Spit",label:{zh:""}},BLOODSPILLER:{id:7392,name:"Bloodspiller",label:{zh:""}},QUIETUS:{id:7391,name:"Quietus",label:{zh:""}},DARK_MISSIONARY:{id:16471,name:"Dark Missionary",label:{zh:""}},DELIRIUM:{id:7390,name:"Delirium",label:{zh:""}},THE_BLACKEST_NIGHT:{id:7393,name:"The Blackest Night",label:{zh:""}},THE_BLACKEST_NIGHT_POP:{name:"Pop The Blackest Night",label:{zh:""}},FLOOD_OF_SHADOW:{id:16469,name:"Flood of Shadow",label:{zh:""}},EDGE_OF_SHADOW:{id:16470,name:"Edge of Shadow",label:{zh:""}},LIVING_SHADOW:{id:16472,name:"Living Shadow",label:{zh:""}},OBLATION:{id:25754,name:"Oblation",label:{zh:""}},SALT_AND_DARKNESS:{id:25755,name:"Salt and Darkness",label:{zh:""}},SHADOWBRINGER:{id:25757,name:"Shadowbringer",label:{zh:""}},SHADOWED_VIGIL:{id:36927,name:"Shadowed Vigil",label:{zh:""}},SCARLET_DELIRIUM:{id:36928,name:"Scarlet Delirium",label:{zh:""}},COMEUPPANCE:{id:36929,name:"Comeuppance",label:{zh:""}},TORCLEAVER:{id:36930,name:"Torcleaver",label:{zh:""}},IMPALEMENT:{id:36931,name:"Impalement",label:{zh:""}},DISESTEEM:{id:36932,name:"Disesteem",label:{zh:""}},ABYSSAL_DRAIN_PET:{id:17904,name:"Abyssal Drain (Esteem)",label:{zh:""}},SHADOWSTRIDE_PET:{id:38512,name:"Shadowstride (Esteem)",label:{zh:""}},SHADOWBRINGER_PET:{id:25881,name:"Shadowbringer (Esteem)",label:{zh:""}},EDGE_OF_SHADOW_PET:{id:17908,name:"Edge of Shadow (Esteem)",label:{zh:""}},FLOOD_OF_SHADOW_PET:{name:"Flood of Shadow (Esteem)",label:{zh:""}},BLOODSPILLER_PET:{id:17909,name:"Bloodspiller (Esteem)",label:{zh:""}},CARVE_AND_SPIT_PET:{name:"Carve and Spit (Esteem)",label:{zh:""}},DISESTEEM_PET:{id:36933,name:"Disesteem (Esteem)",label:{zh:""}}}),_x=ue()({cd_GRIT:{name:"cd_Grit"},cd_RELEASE_GRIT:{name:"cd_ReleaseGrit"},cd_FLOOD_OF_DARKNESS:{name:"cd_FloodOfDarkness"},cd_SHADOW_WALL:{name:"cd_ShadowWall"},cd_DARK_MIND:{name:"cd_DarkMind"},cd_LIVING_DEAD:{name:"cd_LivingDead"},cd_SALTED_EARTH:{name:"cd_SaltedEarth"},cd_SHADOWSTRIDE:{name:"cd_Shadowstride"},cd_ABYSSAL_DRAIN:{name:"cd_AbyssalDrain"},cd_DARK_MISSIONARY:{name:"cd_DarkMissionary"},cd_DELIRIUM:{name:"cd_Delirium"},cd_THE_BLACKEST_NIGHT:{name:"cd_TheBlackestNight"},cd_THE_BLACKEST_NIGHT_POP:{name:"cd_TheBlackestNightPop"},cd_LIVING_SHADOW:{name:"cd_LivingShadow"},cd_OBLATION:{name:"cd_Oblation"},cd_SALT_AND_DARKNESS:{name:"cd_SaltAndDarkness"},cd_SHADOWBRINGER:{name:"cd_Shadowbringer"},cd_POP_TBN:{name:"cd_PopTBN"}}),px=ue()({DARKSIDE:{name:"Darkside",label:{zh:""}},BLOOD_GAUGE:{name:"Blood Gauge",label:{zh:""}}}),lS=ue()({SALTED_EARTH:{name:"Salted Earth",mayBeToggled:!0,label:{zh:""}},GRIT:{name:"Grit",label:{zh:""}},SHADOW_WALL:{name:"Shadow Wall",label:{zh:""}},DARK_MIND:{name:"Dark Mind",label:{zh:""}},LIVING_DEAD:{name:"Living Dead",label:{zh:""}},WALKING_DEAD:{name:"Walking Dead",label:{zh:""}},UNDEAD_REBIRTH:{name:"Undead Rebirth",label:{zh:""}},DARK_MISSIONARY:{name:"Dark Missionary",label:{zh:""}},DELIRIUM:{name:"Delirium",maximumStacks:3,label:{zh:""}},BLOOD_WEAPON:{name:"Blood Weapon",maximumStacks:3,label:{zh:""}},BLACKEST_NIGHT:{name:"Blackest Night",label:{zh:""}},SCORN:{name:"Scorn",label:{zh:""}},OBLATION:{name:"Oblation",label:{zh:""}},SHADOWED_VIGIL:{name:"Shadowed Vigil",label:{zh:""}},VIGILANT:{name:"Vigilant",label:{zh:""}}}),Nx=ue()({DRK_COMBO_TRACKER:{name:"DRK Combo",label:{zh:""}},DRK_AOE_COMBO_TRACKER:{name:"DRK AOE Combo",label:{zh:"AOE"}},DRK_DELIRIUM_COMBO_TRACKER:{name:"DRK Delirium Combo",label:{zh:""}},DARK_ARTS:{name:"Dark Arts",label:{zh:""}},ESTEEM_TRACKER:{name:"Esteem Attacks",label:{zh:""},isPetTracker:!0}}),Cx=ue()({DAKRSIDE_MASTERY:{name:"Darkside Mastery",level:74},ENHANCED_UNMEND:{name:"Enhanced Unmend",level:84},ENHANCED_LIVING_SHADOW:{name:"Enhanced Living Shadow",level:88},ENHANCED_LIVING_SHADOW_II:{name:"Enhanced Living Shadow II",level:90},SHADOW_WALL_MASTERY:{name:"Shadow Wall Mastery",level:92},ENHANCED_DELIRIUM:{name:"Enhanced Delirium",level:96},ENHANCED_LIVING_SHADOW_III:{name:"Enhanced Living Shadow III",level:100}}),bx={...px,...lS,...Nx},Ox=ue()({LIGHTNING_SHOT:{id:16143,name:"Lightning Shot",label:{zh:""}},KEEN_EDGE:{id:16137,name:"Keen Edge",label:{zh:""}},BRUTAL_SHELL:{id:16139,name:"Brutal Shell",label:{zh:""}},SOLID_BARREL:{id:16145,name:"Solid Barrel",label:{zh:""}},DEMON_SLICE:{id:16141,name:"Demon Slice",label:{zh:""}},DEMON_SLAUGHTER:{id:16149,name:"Demon Slaughter",label:{zh:""}},BURST_STRIKE:{id:16162,name:"Burst Strike",label:{zh:""}},FATED_CIRCLE:{id:16163,name:"Fated Circle",label:{zh:""}},BLOODFEST:{id:16164,name:"Bloodfest",label:{zh:""}},NO_MERCY:{id:16138,name:"No Mercy",label:{zh:""}},SONIC_BREAK:{id:16153,name:"Sonic Break",label:{zh:""}},GNASHING_FANG:{id:16146,name:"Gnashing Fang",label:{zh:""}},SAVAGE_CLAW:{id:16147,name:"Savage Claw",label:{zh:""}},WICKED_TALON:{id:16150,name:"Wicked Talon",label:{zh:""}},DOUBLE_DOWN:{id:25760,name:"Double Down",label:{zh:""}},REIGN_OF_BEASTS:{id:36937,name:"Reign of Beasts",label:{zh:""}},NOBLE_BLOOD:{id:36938,name:"Noble Blood",label:{zh:""}},LION_HEART:{id:36939,name:"Lion Heart",label:{zh:""}},CONTINUATION:{id:16155,name:"Continuation",label:{zh:""}},HYPERVELOCITY:{id:25759,name:"Hypervelocity",label:{zh:""}},FATED_BRAND:{id:36936,name:"Fated Brand",label:{zh:""}},JUGULAR_RIP:{id:16156,name:"Jugular Rip",label:{zh:""}},ABDOMEN_TEAR:{id:16157,name:"Abdomen Tear",label:{zh:""}},EYE_GOUGE:{id:16158,name:"Eye Gouge",label:{zh:""}},DANGER_ZONE:{id:16144,name:"Danger Zone",label:{zh:""}},BLASTING_ZONE:{id:16165,name:"Blasting Zone",label:{zh:""}},BOW_SHOCK:{id:16159,name:"Bow Shock",label:{zh:""}},TRAJECTORY:{id:36934,name:"Trajectory",label:{zh:""}},HEART_OF_STONE:{id:16161,name:"Heart of Stone",label:{zh:""}},HEART_OF_CORUNDUM:{id:25758,name:"Heart of Corundum",label:{zh:""}},SUPERBOLIDE:{id:16152,name:"Superbolide",label:{zh:""}},CAMOUFLAGE:{id:16140,name:"Camouflage",label:{zh:""}},NEBULA:{id:16148,name:"Nebula",label:{zh:""}},GREAT_NEBULA:{id:36935,name:"Great Nebula",label:{zh:""}},HEART_OF_LIGHT:{id:16160,name:"Heart of Light",label:{zh:""}},AURORA:{id:16151,name:"Aurora",label:{zh:""}},ROYAL_GUARD:{id:16142,name:"Royal Guard",label:{zh:""}},RELEASE_ROYAL_GUARD:{id:32068,name:"Release Royal Guard",label:{zh:""}}}),Dx=ue()({cd_NO_MERCY:{name:"cd_NoMercy"},cd_BLOODFEST:{name:"cd_Bloodfest"},cd_CAMOUFLAGE:{name:"cd_Camouflage"},cd_ROYAL_GUARD:{name:"cd_RoyalGuard"},cd_RELEASE_ROYAL_GUARD:{name:"cd_ReleaseRoyalGuard"},cd_DANGER_ZONE:{name:"cd_DangerZone"},cd_BLASTING_ZONE:{name:"cd_BlastingZone"},cd_NEBULA:{name:"cd_Nebula"},cd_GREAT_NEBULA:{name:"cd_GreatNebula"},cd_AURORA:{name:"cd_Aurora"},cd_SUPERBOLIDE:{name:"cd_Superbolide"},cd_TRAJECTORY:{name:"cd_Trajectory"},cd_GNASHING_FANG:{name:"cd_GnashingFang"},cd_BOW_SHOCK:{name:"cd_BowShock"},cd_HEART_OF_LIGHT:{name:"cd_HeartOfLight"},cd_HEART_OF_STONE:{name:"cd_HeartOfStone"},cd_HEART_OF_CORUNDUM:{name:"cd_HeartOfCorundum"},cd_DOUBLE_DOWN:{name:"cd_DoubleDown"},cd_CONTINUATION:{name:"cd_Continuation"},cd_HYPERVELOCITY:{name:"cd_Hypervelocity"},cd_FATED_BRAND:{name:"cd_FatedBrand"},cd_JUGULAR_RIP:{name:"cd_JugularRip"},cd_ABDOMEN_TEAR:{name:"cd_AbdomenTear"},cd_EYE_GOUGE:{name:"cd_EyeGouge"}}),yx=ue()({POWDER_GAUGE:{name:"Powder Gauge",label:{zh:""}}}),sS=ue()({NO_MERCY:{name:"No Mercy",label:{zh:""}},AURORA:{name:"Aurora",label:{zh:""}},BOW_SHOCK_DOT:{name:"Bow Shock DoT",label:{zh:""}},CAMOUFLAGE:{name:"Camouflage",label:{zh:""}},HEART_OF_CORUNDUM:{name:"Heart of Corundum",label:{zh:""}},CLARITY_OF_CORUNDUM:{name:"Clarity of Corundum",label:{zh:""}},CATHARSIS_OF_CORUNDUM:{name:"Catharsis of Corundum",label:{zh:""}},NEBULA:{name:"Nebula",label:{zh:""}},GREAT_NEBULA:{name:"Great Nebula",label:{zh:""}},HEART_OF_LIGHT:{name:"Heart of Light",label:{zh:""}},HEART_OF_STONE:{name:"Heart of Stone",label:{zh:""}},READY_TO_BLAST:{name:"Ready to Blast",label:{zh:""}},READY_TO_BREAK:{name:"Ready to Break",label:{zh:""}},READY_TO_GOUGE:{name:"Ready to Gouge",label:{zh:""}},READY_TO_RAZE:{name:"Ready to Raze",label:{zh:""}},READY_TO_REIGN:{name:"Ready to Reign",label:{zh:""}},READY_TO_RIP:{name:"Ready to Rip",label:{zh:""}},READY_TO_TEAR:{name:"Ready to Tear",label:{zh:""}},ROYAL_GUARD:{name:"Royal Guard",label:{zh:""}},SONIC_BREAK_DOT:{name:"Sonic Break DoT",label:{zh:""}},SUPERBOLIDE:{name:"Superbolide",label:{zh:""}},BRUTAL_SHELL:{name:"Brutal Shell",label:{zh:""}},BLOODFEST:{name:"Bloodfest",label:{zh:""}}}),vx=ue()({GNB_COMBO_TRACKER:{name:"GNB Combo",label:{zh:""}},GNB_AOE_COMBO_TRACKER:{name:"GNB AOE Combo",label:{zh:"AOE"}},GNB_GNASHING_COMBO_TRACKER:{name:"GNB Gnashing Combo",label:{zh:""}},GNB_REIGN_COMBO_TRACKER:{name:"GNB Reign Combo",label:{zh:""}}}),Mx=ue()({DANGER_ZONE_MASTERY:{name:"Danger Zone Mastery",level:80},HEART_OF_STONE_MASTERY:{name:"Heart Of Stone Mastery",level:82},ENHANCED_AURORA:{name:"Enhanced Aurora",level:84},ENHANCED_CONTINUATION:{name:"Enhanced Continuation",level:86},CARTRIDGE_CHARGE_II:{name:"Cartridge Charge II",level:88},NEBULA_MASTERY:{name:"Nebula Mastery",level:92},ENHANCED_CONTINUATION_II:{name:"Enhanced Continuation II",level:96},ENHANCED_BLOODFEST:{name:"Enhanced Bloodfest",level:100}}),Lx={...yx,...sS,...vx},xx=ue()({HEATED_SPLIT_SHOT:{id:7411,name:"Heated Split Shot",label:{zh:""}},HEATED_SLUG_SHOT:{id:7412,name:"Heated Slug Shot",label:{zh:""}},HEATED_CLEAN_SHOT:{id:7413,name:"Heated Clean Shot",label:{zh:""}},DRILL:{id:16498,name:"Drill",label:{zh:""}},HOT_SHOT:{id:2872,name:"Hot Shot",label:{zh:""}},AIR_ANCHOR:{id:16500,name:"Air Anchor",label:{zh:""}},CHAIN_SAW:{id:25788,name:"Chain Saw",label:{zh:""}},EXCAVATOR:{id:36981,name:"Excavator",label:{zh:""}},GAUSS_ROUND:{id:2874,name:"Gauss Round",label:{zh:""}},DOUBLE_CHECK:{id:36979,name:"Double Check",label:{zh:""}},RICOCHET:{id:2890,name:"Ricochet",label:{zh:""}},CHECKMATE:{id:36980,name:"Checkmate",label:{zh:""}},BLAZING_SHOT:{id:36978,name:"Blazing Shot",label:{zh:""}},WILDFIRE:{id:2878,name:"Wildfire",label:{zh:""}},DETONATOR:{id:16766,name:"Detonator",label:{zh:""}},HYPERCHARGE:{id:17209,name:"Hypercharge",label:{zh:""}},ROOK_AUTOTURRET:{id:2864,name:"Rook Autoturret",label:{zh:""}},ROOK_OVERDRIVE:{id:7415,name:"Rook Overdrive",label:{zh:""}},AUTOMATON_QUEEN:{id:16501,name:"Automaton Queen",label:{zh:""}},QUEEN_OVERDRIVE:{id:16502,name:"Queen Overdrive",label:{zh:""}},BARREL_STABILIZER:{id:7414,name:"Barrel Stabilizer",label:{zh:""}},REASSEMBLE:{id:2876,name:"Reassemble",label:{zh:""}},FULL_METAL_FIELD:{id:36982,name:"Full Metal Field",label:{zh:""}},SPREAD_SHOT:{id:2870,name:"Spread Shot",label:{zh:""}},SCATTERGUN:{id:25786,name:"Scattergun",label:{zh:""}},AUTO_CROSSBOW:{id:16497,name:"Auto Crossbow",label:{zh:""}},BIOBLASTER:{id:16499,name:"Bioblaster",label:{zh:""}},FLAMETHROWER:{id:7418,name:"Flamethrower",label:{zh:""}},DISMANTLE:{id:2887,name:"Dismantle",label:{zh:""}},TACTICIAN:{id:16889,name:"Tactician",label:{zh:""}},VOLLEY_FIRE:{id:2891,name:"Volley Fire",label:{zh:""}},ARM_PUNCH:{id:16504,name:"Arm Punch",label:{zh:""}},ROOK_OVERLOAD:{id:7416,name:"Rook Overload",label:{zh:""}},PILE_BUNKER:{id:16503,name:"Pile Bunker",label:{zh:""}},CROWNED_COLLIDER:{id:25787,name:"Crowned Collider",label:{zh:""}}}),Hx=ue()({cd_REASSEMBLE:{name:"cd_Reassemble"},cd_DRILL:{name:"cd_Drill"},cd_CHECKMATE:{name:"cd_Checkmate"},cd_DOUBLE_CHECK:{name:"cd_DoubleCheck"},cd_AIR_ANCHOR:{name:"cd_AirAnchor"},cd_CHAINSAW:{name:"cd_Chainsaw",label:{zh:"CD"}},cd_BARREL_STABILIZER:{name:"cd_BarrelStabilizer"},cd_WILDFIRE:{name:"cd_Wildfire"},cd_QUEEN:{name:"cd_Queen",label:{zh:"CD"}},cd_OVERDRIVE:{name:"cd_Overdrive",label:{zh:"CD/"}},cd_DISMANTLE:{name:"cd_Dismantle"},cd_TACTICIAN:{name:"cd_Tactician"},cd_HYPERCHARGE:{name:"cd_Hypercharge"},cd_DETONATOR:{name:"cd_Detonator"},cd_FLAMETHROWER:{name:"cd_Flamethrower"}}),kx=ue()({HEAT_GAUGE:{name:"Heat",label:{zh:""}},BATTERY_GAUGE:{name:"Battery",label:{zh:""}}}),rS=ue()({REASSEMBLED:{name:"Reassembled",label:{zh:""}},OVERHEATED:{name:"Overheated",label:{zh:""},maximumStacks:5},WILDFIRE:{name:"Wildfire",label:{zh:""}},WILDFIRE_SELF:{name:"Wildfire Self",label:{zh:""}},FLAMETHROWER:{name:"Flamethrower",label:{zh:""}},BIOBLASTER:{name:"Bioblaster",label:{zh:"dot"}},TACTICIAN:{name:"Tactician",label:{zh:"buff"}},HYPERCHARGED:{name:"Hypercharged",label:{zh:""}},EXCAVATOR_READY:{name:"Excavator Ready",label:{zh:""}},FULL_METAL_MACHINIST:{name:"Full Metal Machinist",label:{zh:""}}}),Ux=ue()({HEAT_COMBO:{name:"Heat Combo",label:{zh:""}},QUEEN:{name:"Queen",label:{zh:""},isPetTracker:!0},QUEEN_PUNCHES:{name:"QueenPunches",label:{zh:""}},QUEEN_FINISHERS:{name:"QueenFinishers",label:{zh:""}},BATTERY_BONUS:{name:"BatteryBonus",label:{zh:""}},WILDFIRE_HITS:{name:"WildfireHits",label:{zh:""}}}),wx=ue()({CHARGED_ACTION_MASTERY:{name:"Charged Action Mastery",level:74},HOT_SHOT_MASTERY:{name:"Hot Shot Mastery",level:76},ENHANCED_WILD_FIRE:{name:"Enhanced Wildfire",level:88},PROMOTION:{name:"Promotion",level:80},SPREAD_SHOT_MASTERY:{name:"Spread Shot Mastery",level:82},ENHANCED_REASSEMBLE:{name:"Enhanced Reassemble",level:84},MARKSMANS_MASTERY:{name:"Marksman's Mastery",level:84},QUEENS_GAMBIT:{name:"Queen's Gambit",level:86},ENHANCED_TACTICIAN:{name:"Enhanced Tactician",level:88},DOUBLE_BARREL_MASTERY:{name:"Double-Barrel Mastery",level:92},ENHANCED_MULTI_WEAPON:{name:"Enhanced Multiweapon",level:94},MARKSMANS_MASTERY_II:{name:"Marksman's Mastery II",level:94},ENHANCED_MULTI_WEAPON_II:{name:"Enhanced Multiweapon II",level:96},ENHANCED_BARREL_STABILIZER:{name:"Enhanced Barrel Stabilizer",level:100}}),Px={...kx,...rS,...Ux},Gx=ue()({BOOTSHINE:{id:53,name:"Bootshine",label:{zh:"",ja:""}},TRUE_STRIKE:{id:54,name:"True Strike",label:{zh:"",ja:""}},SNAP_PUNCH:{id:56,name:"Snap Punch",label:{zh:"",ja:""}},TWIN_SNAKES:{id:61,name:"Twin Snakes",label:{zh:"",ja:""}},ARM_OF_THE_DESTROYER:{id:62,name:"Arm of the Destroyer",label:{zh:"",ja:""}},DEMOLISH:{id:66,name:"Demolish",label:{zh:"",ja:""}},ROCKBREAKER:{id:70,name:"Rockbreaker",label:{zh:"",ja:""}},THUNDERCLAP:{id:25762,name:"Thunderclap",label:{zh:"",ja:""}},HOWLING_FIST:{id:25763,name:"Howling Fist",label:{zh:"",ja:""}},MANTRA:{id:65,name:"Mantra",label:{zh:"",ja:""}},FOUR_POINT_FURY:{id:16473,name:"Four-point Fury",label:{zh:"",ja:""}},DRAGON_KICK:{id:74,name:"Dragon Kick",label:{zh:"",ja:""}},PERFECT_BALANCE:{id:69,name:"Perfect Balance",label:{zh:"",ja:""}},FORM_SHIFT:{id:4262,name:"Form Shift",label:{zh:"",ja:""}},FORBIDDEN_MEDITATION:{id:36942,name:"Forbidden Meditation",label:{zh:"",ja:""}},THE_FORBIDDEN_CHAKRA:{id:3547,name:"The Forbidden Chakra",label:{zh:"",ja:""}},MASTERFUL_BLITZ:{id:25764,name:"Masterful Blitz",label:{zh:"",ja:""}},TORNADO_KICK:{id:3543,name:"Tornado Kick",label:{zh:"",ja:""}},ELIXIR_FIELD:{id:3545,name:"Elixir Field",label:{zh:"",ja:""}},CELESTIAL_REVOLUTION:{id:25765,name:"Celestial Revolution",label:{zh:"",ja:""}},FLINT_STRIKE:{id:25882,name:"Flint Strike",label:{zh:"",ja:""}},RIDDLE_OF_EARTH:{id:7394,name:"Riddle of Earth",label:{zh:"",ja:""}},EARTHS_REPLY:{id:36944,name:"Earth's Reply",label:{zh:"",ja:""}},RIDDLE_OF_FIRE:{id:7395,name:"Riddle of Fire",label:{zh:"",ja:""}},BROTHERHOOD:{id:7396,name:"Brotherhood",label:{zh:"",ja:""}},RIDDLE_OF_WIND:{id:25766,name:"Riddle of Wind",label:{zh:"",ja:""}},INSPIRITED_MEDITATION:{id:36941,name:"Inspirited Meditation",label:{zh:"",ja:""}},ENLIGHTENED_MEDITATION:{id:36943,name:"Enlightened Meditation",label:{zh:"",ja:""}},ENLIGHTENMENT:{id:16474,name:"Enlightenment",label:{zh:"",ja:""}},SIX_SIDED_STAR:{id:16476,name:"Six-sided Star",label:{zh:"",ja:""}},SHADOW_OF_THE_DESTROYER:{id:25767,name:"Shadow of the Destroyer",label:{zh:"",ja:""}},RISING_PHOENIX:{id:25768,name:"Rising Phoenix",label:{zh:"",ja:""}},PHANTOM_RUSH:{id:25769,name:"Phantom Rush",label:{zh:"",ja:""}},LEAPING_OPO:{id:36945,name:"Leaping Opo",label:{zh:"",ja:""}},RISING_RAPTOR:{id:36946,name:"Rising Raptor",label:{zh:"",ja:""}},POUNCING_COEURL:{id:36947,name:"Pouncing Coeurl",label:{zh:"",ja:""}},ELIXIR_BURST:{id:36948,name:"Elixir Burst",label:{zh:"",ja:""}},WINDS_REPLY:{id:36949,name:"Wind's Reply",label:{zh:"",ja:""}},FIRES_REPLY:{id:36950,name:"Fire's Reply",label:{zh:"",ja:""}}}),Bx=ue()({cd_THUNDERCLAP:{name:"cd_Thunderclap"},cd_MANTRA:{name:"cd_Mantra"},cd_PERFECT_BALANCE:{name:"cd_PerfectBalance"},cd_ENLIGHTENMENT:{name:"cd_Enlightenment"},cd_THE_FORBIDDEN_CHAKRA:{name:"cd_TheForbiddenChakra"},cd_RIDDLE_OF_EARTH:{name:"cd_RiddleOfEarth"},cd_EARTHS_REPLY:{name:"cd_EarthsReply"},cd_RIDDLE_OF_FIRE:{name:"cd_RiddleOfFire"},cd_BROTHERHOOD:{name:"cd_Brotherhood"},cd_RIDDLE_OF_WIND:{name:"cd_RiddleOfWind"}}),Fx=ue()({CHAKRA:{name:"Chakra",label:{zh:""}},BEAST_CHAKRA:{name:"Beast Chakra",label:{zh:""}},BEAST_CHAKRA_TIMER:{name:"Beast Timer",label:{zh:""}},NADI:{name:"Nadi",label:{zh:"/"}},LUNAR_NADI:{name:"Lunar Nadi",label:{zh:""}},SOLAR_NADI:{name:"Solar Nadi",label:{zh:""}},OPO_OPOS_FURY:{name:"Opo-opo's Fury",label:{zh:""}},RAPTORS_FURY:{name:"Raptor's Fury",label:{zh:""}},COEURLS_FURY:{name:"Coeurl's Fury",label:{zh:""}}}),cS=ue()({MANTRA:{name:"Mantra",label:{zh:""}},OPO_OPO_FORM:{name:"Opo-opo Form",label:{zh:""}},RAPTOR_FORM:{name:"Raptor Form",label:{zh:""}},COEURL_FORM:{name:"Coeurl Form",label:{zh:""}},PERFECT_BALANCE:{name:"Perfect Balance",maximumStacks:3,label:{zh:""}},FORMLESS_FIST:{name:"Formless Fist",label:{zh:""}},RIDDLE_OF_EARTH:{name:"Riddle of Earth",label:{zh:""}},EARTHS_RESOLVE:{name:"Earth's Resolve",label:{zh:""}},EARTHS_RUMINATION:{name:"Earth's Rumination",label:{zh:""}},RIDDLE_OF_FIRE:{name:"Riddle of Fire",label:{zh:""}},FIRES_RUMINATION:{name:"Fire's Rumination",label:{zh:""}},BROTHERHOOD:{name:"Brotherhood",label:{zh:""}},MEDITATIVE_BROTHERHOOD:{name:"Meditative Brotherhood",label:{zh:""}},RIDDLE_OF_WIND:{name:"Riddle of Wind",label:{zh:""}},WINDS_RUMINATION:{name:"Wind's Rumination",label:{zh:""}},SIX_SIDED_STAR:{name:"Six-sided Star",label:{zh:""}}}),jx=ue()({BEAST_CHAKRA_1:{name:"Beast Chakra 1",label:{zh:"1"}},BEAST_CHAKRA_2:{name:"Beast Chakra 2",label:{zh:"2"}},BEAST_CHAKRA_3:{name:"Beast Chakra 3",label:{zh:"3"}}}),zx=ue()({DEEP_MEDITATION_II:{name:"Deep Meditation II",level:74},HOWLING_FIST_MASTERY:{name:"Howling Fist Mastery",level:74},ENHANCED_GREASED_LIGHTNING_III:{name:"Enhanced Greased Lightning III",level:76},ARM_OF_THE_DESTROYER_MASTERY:{name:"Arm of the Destroyer Mastery",level:82},ENHANCED_THUNDERCLAP:{name:"Enhanced Thunderclap",level:84},MELEE_MASTERY_MNK:{name:"Melee Mastery MNK",level:84},FLINT_STRIKE_MASTERY:{name:"Flint Strike Mastery",level:86},ENHANCED_BROTHERHOOD:{name:"Enhanced Brotherhood",level:88},TORNADO_KICK_MASTERY:{name:"Tornado Kick Mastery",level:90},BEAST_CHAKRA_MASTERY:{name:"Beast Chakra Mastery",level:92},MELEE_MASTERY_II_MNK:{name:"Melee Mastery II MNK",level:94},ENHANCED_RIDDLE_OF_WIND:{name:"Enhanced Riddle of Wind",level:96},ENHANCED_RIDDLE_OF_FIRE:{name:"Enhanced Riddle of Fire",level:100}}),Hb={...Fx,...cS,...jx},Yx=ue()({SPINNING_EDGE:{id:2240,name:"Spinning Edge",label:{zh:""}},SHADE_SHIFT:{id:2241,name:"Shade Shift",label:{zh:""}},GUST_SLASH:{id:2242,name:"Gust Slash",label:{zh:""}},HIDE:{id:2245,name:"Hide",label:{zh:""}},THROWING_DAGGER:{id:2247,name:"Throwing Dagger",label:{zh:""}},TRICK_ATTACK:{id:2258,name:"Trick Attack",label:{zh:""}},AEOLIAN_EDGE:{id:2255,name:"Aeolian Edge",label:{zh:""}},TEN:{id:2259,name:"Ten",label:{zh:""}},NINJUTSU:{id:2260,name:"Ninjutsu",label:{zh:""}},CHI:{id:2261,name:"Chi",label:{zh:""}},DEATH_BLOSSOM:{id:2254,name:"Death Blossom",label:{zh:""}},SHUKUCHI:{id:2262,name:"Shukuchi",label:{zh:""}},JIN:{id:2263,name:"Jin",label:{zh:""}},KASSATSU:{id:2264,name:"Kassatsu",label:{zh:""}},HAKKE_MUJINSATSU:{id:16488,name:"Hakke Mujinsatsu",label:{zh:""}},ARMOR_CRUSH:{id:3563,name:"Armor Crush",label:{zh:""}},DREAM_WITHIN_A_DREAM:{id:3566,name:"Dream Within a Dream",label:{zh:""}},HELLFROG_MEDIUM:{id:7401,name:"Hellfrog Medium",label:{zh:""}},DOKUMORI:{id:36957,name:"Dokumori",label:{zh:""}},BHAVACAKRA:{id:7402,name:"Bhavacakra",label:{zh:""}},TEN_CHI_JIN:{id:7403,name:"Ten Chi Jin",label:{zh:""}},MEISUI:{id:16489,name:"Meisui",label:{zh:""}},BUNSHIN:{id:16493,name:"Bunshin",label:{zh:""}},PHANTOM_KAMAITACHI:{id:25774,name:"Phantom Kamaitachi",label:{zh:""}},FORKED_RAIJU:{id:25777,name:"Forked Raiju",label:{zh:""}},FLEETING_RAIJU:{id:25778,name:"Fleeting Raiju",label:{zh:""}},KUNAIS_BANE:{id:36958,name:"Kunai's Bane",label:{zh:""}},DEATHFROG_MEDIUM:{id:36959,name:"Deathfrog Medium",label:{zh:""}},ZESHO_MEPPO:{id:36960,name:"Zesho Meppo",label:{zh:""}},TENRI_JINDO:{id:36961,name:"Tenri Jindo",label:{zh:""}},KATON:{id:2266,name:"Katon",label:{zh:""}},RAITON:{id:2267,name:"Raiton",label:{zh:""}},HYOTON:{id:2268,name:"Hyoton",label:{zh:""}},HUTON:{id:2269,name:"Huton",label:{zh:""}},DOTON:{id:2270,name:"Doton",label:{zh:""}},SUITON:{id:2271,name:"Suiton",label:{zh:""}},GOKA_MEKKYAKU:{id:16491,name:"Goka Mekkyaku",label:{zh:""}},HYOSHO_RANRYU:{id:16492,name:"Hyosho Ranryu",label:{zh:""}},RABBIT_MEDIUM:{id:2272,name:"Rabbit Medium",label:{zh:""}},FUMA_SHURIKEN:{id:2265,name:"Fuma Shuriken",label:{zh:""}},FUMA_SHURIKEN_TEN:{id:18873,name:"Fuma Shuriken (Ten)",label:{zh:""}},FUMA_SHURIKEN_CHI:{id:18874,name:"Fuma Shuriken (Chi)",label:{zh:""}},FUMA_SHURIKEN_JIN:{id:18875,name:"Fuma Shuriken (Jin)",label:{zh:""}},KATON_TEN:{id:18876,name:"Katon (Ten)",label:{zh:""}},RAITON_CHI:{id:18877,name:"Raiton (Chi)",label:{zh:""}},HYOTON_JIN:{id:18878,name:"Hyoton (Jin)",label:{zh:""}},HUTON_TEN:{id:18879,name:"Huton (Ten)",label:{zh:""}},DOTON_CHI:{id:18880,name:"Doton (Chi)",label:{zh:""}},SUITON_JIN:{id:18881,name:"Suiton (Jin)",label:{zh:""}}}),Kx=ue()({cd_MUDRA_HACK:{name:"cd_MudraHack"},cd_MUDRA:{name:"cd_Mudra"},cd_SHADE_SHIFT:{name:"cd_Shadeshift"},cd_HIDE:{name:"cd_Hide"},cd_TRICK_ATTACK:{name:"cd_TrickAttack"},cd_SHUKUCHI:{name:"cd_Shukuchi"},cd_KASSATSU:{name:"cd_Kassatsu"},cd_DREAM_WITHIN_A_DREAM:{name:"cd_DREAM_WITHIN_A_DREAM"},cd_DOKUMORI:{name:"cd_Dokumori"},cd_TEN_CHI_JIN:{name:"cd_TenChiJin"},cd_MEISUI:{name:"cd_Meisui"},cd_BUNSHIN:{name:"cd_Bunshin"},cd_BHAVACAKRA:{name:"cd_Bhavacakra"},cd_TENRI_JINDO:{name:"cd_TenriJindo"}}),Vx=ue()({KAZEMATOI:{name:"Kazematoi",label:{zh:""}},NINKI:{name:"Ninki",label:{zh:""}}}),uS=ue()({MUDRA:{name:"Mudra",label:{zh:""}},SHADE_SHIFT:{name:"Shade Shift",label:{zh:""}},HIDDEN:{name:"Hidden",label:{zh:""}},TRICK_ATTACK:{name:"Trick Attack",label:{zh:""},specialDebuff:!0},KASSATSU:{name:"Kassatsu",label:{zh:""}},DOKUMORI:{name:"Dokumori",label:{zh:""},specialDebuff:!0},TENRI_JINDO_READY:{name:"Tenri Jindo Ready",label:{zh:""}},TEN_CHI_JIN:{name:"Ten Chi Jin",maximumStacks:3,label:{zh:""}},MEISUI:{name:"Meisui",label:{zh:""}},SHADOW_WALKER:{name:"Shadow Walker",label:{zh:""}},BUNSHIN:{name:"Bunshin",maximumStacks:5,label:{zh:""}},PHANTOM_KAMAITACHI_READY:{name:"Phantom Kamaitachi Ready",label:{zh:""}},RAIJU_READY:{name:"Raiju Ready",maximumStacks:3,label:{zh:""}},KUNAIS_BANE:{name:"Kunai's Bane",label:{zh:""},specialDebuff:!0},HIGI:{name:"Higi",label:{zh:""}},DOTON:{name:"Doton",mayBeToggled:!0,label:{zh:""}}}),Wx=ue()({NIN_COMBO_TRACKER:{name:"NIN Combo",label:{zh:""}},NIN_AOE_COMBO_TRACKER:{name:"NIN AOE Combo",label:{zh:"AOE"}},MUDRA_TRACKER:{name:"Mudra Tracker",label:{zh:""}},BUNNY:{name:"Bunny",label:{zh:""}}}),Xx=ue()({ENHANCED_SHUKUCHI_II:{name:"Enhanced Shukuchi II",level:74},MELEE_MASTERY_NIN:{name:"Melee Mastery NIN",level:74},ENHANCED_KASSATSU:{name:"Enhanced Kassatsu",level:76},SHUKIHO_II:{name:"Shukiho II",level:78},SHUKIHO_III:{name:"Shukiho III",level:84},MELEE_MASTERY_II_NIN:{name:"Melee Mastery II NIN",level:84},ENHANCED_MEISUI:{name:"Enhanced Meisui",level:88},ENHANCED_RAITON:{name:"Enhanced Raiton",level:90},TRICK_ATTACK_MASTERY:{name:"Trick Attack Mastery",level:92},MELEE_MASTERY_III_NIN:{name:"Melee Mastery III NIN",level:94},ENHANCED_DOKUMORI:{name:"Enhanced Dokumori",level:96},ENHANCED_TEN_CHI_JIN:{name:"Enhanced Ten Chi Jin",level:100}}),qx={...Vx,...uS,...Wx},Zx=ue()({FIRE_IN_RED:{id:34650,name:"Fire in Red",label:{zh:"",ja:""}},AERO_IN_GREEN:{id:34651,name:"Aero in Green",label:{zh:"",ja:""}},WATER_IN_BLUE:{id:34652,name:"Water in Blue",label:{zh:"",ja:""}},FIRE_II_IN_RED:{id:34656,name:"Fire II in Red",label:{zh:"",ja:""},discordEmote:"Fire2inRed"},AERO_II_IN_GREEN:{id:34657,name:"Aero II in Green",label:{zh:"",ja:""},discordEmote:"Aero2inGreen"},WATER_II_IN_BLUE:{id:34658,name:"Water II in Blue",label:{zh:"",ja:""},discordEmote:"Water2inBlue"},BLIZZARD_IN_CYAN:{id:34653,name:"Blizzard in Cyan",label:{zh:"",ja:""}},STONE_IN_YELLOW:{id:34654,name:"Stone in Yellow",label:{zh:"",ja:""}},THUNDER_IN_MAGENTA:{id:34655,name:"Thunder in Magenta",label:{zh:"",ja:""}},BLIZZARD_II_IN_CYAN:{id:34659,name:"Blizzard II in Cyan",label:{zh:"",ja:""},discordEmote:"Blizzard2inCyan"},STONE_II_IN_YELLOW:{id:34660,name:"Stone II in Yellow",label:{zh:"",ja:""},discordEmote:"Stone2inYellow"},THUNDER_II_IN_MAGENTA:{id:34661,name:"Thunder II in Magenta",label:{zh:"",ja:""},discordEmote:"Thunder2inMagenta"},HOLY_IN_WHITE:{id:34662,name:"Holy in White",label:{zh:"",ja:""}},COMET_IN_BLACK:{id:34663,name:"Comet in Black",label:{zh:"",ja:""}},RAINBOW_DRIP:{id:34688,name:"Rainbow Drip",label:{zh:"",ja:""}},STAR_PRISM:{id:34681,name:"Star Prism",label:{zh:"",ja:""}},TEMPERA_COAT:{id:34685,name:"Tempera Coat",label:{zh:"",ja:""}},TEMPERA_GRASSA:{id:34686,name:"Tempera Grassa",label:{zh:"",ja:""}},TEMPERA_COAT_POP:{name:"Pop Tempera Coat",label:{zh:"",ja:""}},TEMPERA_GRASSA_POP:{name:"Pop Tempera Grassa",label:{zh:"",ja:""}},SMUDGE:{id:34684,name:"Smudge",label:{zh:"",ja:""}},SUBTRACTIVE_PALETTE:{id:34683,name:"Subtractive Palette",label:{zh:"",ja:""}},CREATURE_MOTIF:{id:34689,name:"Creature Motif",label:{zh:"",ja:""}},POM_MOTIF:{id:34664,name:"Pom Motif",label:{zh:"",ja:""}},WING_MOTIF:{id:34665,name:"Wing Motif",label:{zh:"",ja:""}},CLAW_MOTIF:{id:34666,name:"Claw Motif",label:{zh:"",ja:""}},MAW_MOTIF:{id:34667,name:"Maw Motif",label:{zh:"",ja:""}},LIVING_MUSE:{id:35347,name:"Living Muse",label:{zh:"",ja:""}},POM_MUSE:{id:34670,name:"Pom Muse",label:{zh:"",ja:""}},WINGED_MUSE:{id:34671,name:"Winged Muse",label:{zh:"",ja:""}},CLAWED_MUSE:{id:34672,name:"Clawed Muse",label:{zh:"",ja:""}},FANGED_MUSE:{id:34673,name:"Fanged Muse",label:{zh:"",ja:""}},MOG_OF_THE_AGES:{id:34676,name:"Mog of the Ages",label:{zh:"",ja:""}},RETRIBUTION_OF_THE_MADEEN:{id:34677,name:"Retribution of the Madeen",label:{zh:"",ja:""}},WEAPON_MOTIF:{id:34690,name:"Weapon Motif",label:{zh:"",ja:""}},STEEL_MUSE:{id:35348,name:"Steel Muse",label:{zh:"",ja:""}},HAMMER_MOTIF:{id:34668,name:"Hammer Motif",label:{zh:"",ja:""}},STRIKING_MUSE:{id:34674,name:"Striking Muse",label:{zh:"",ja:""}},HAMMER_STAMP:{id:34678,name:"Hammer Stamp",label:{zh:"",ja:""}},HAMMER_BRUSH:{id:34679,name:"Hammer Brush",label:{zh:"",ja:""}},POLISHING_HAMMER:{id:34680,name:"Polishing Hammer",label:{zh:"",ja:""}},LANDSCAPE_MOTIF:{id:34691,name:"Landscape Motif",label:{zh:"",ja:""}},SCENIC_MUSE:{id:35349,name:"Scenic Muse",label:{zh:"",ja:""}},STARRY_SKY_MOTIF:{id:34669,name:"Starry Sky Motif",label:{zh:"",ja:""}},STARRY_MUSE:{id:34675,name:"Starry Muse",label:{zh:"",ja:""}}}),$x=ue()({cd_TEMPERA_COAT:{name:"cd_TemperaCoat"},cd_SMUDGE:{name:"cd_Smudge"},cd_LIVING_MUSE:{name:"cd_LivingMuse"},cd_PORTRAIT:{name:"cd_Portrait",label:{zh:"CD/"}},cd_STEEL_MUSE:{name:"cd_SteelMuse"},cd_SCENIC_MUSE:{name:"cd_ScenicMuse"},cd_SUBTRACTIVE:{name:"cd_Subtractive",label:{zh:"CD"}},cd_GRASSA:{name:"cd_Grassa",label:{zh:"CD"}},cd_TEMPERA_POP:{name:"cd_TemperaPop",label:{zh:"CD"}}}),Qx=ue()({PORTRAIT:{name:"Portrait",label:{zh:"//"}},DEPICTIONS:{name:"Depictions",label:{zh:"///"}},CREATURE_CANVAS:{name:"Creature Canvas",label:{zh:""}},WEAPON_CANVAS:{name:"Weapon Canvas",label:{zh:""}},LANDSCAPE_CANVAS:{name:"Landscape Canvas",label:{zh:""}},PALETTE_GAUGE:{name:"Palette Gauge",label:{zh:""}},PAINT:{name:"Paint",label:{zh:""}}}),dS=ue()({AETHERHUES:{name:"Aetherhues",label:{zh:""},mayNotBeCanceled:!0,maximumStacks:2},MONOCHROME_TONES:{name:"Monochrome Tones",label:{zh:""}},SUBTRACTIVE_PALETTE:{name:"Subtractive Palette",label:{zh:""},mayNotBeCanceled:!0,maximumStacks:3},HAMMER_TIME:{name:"Hammer Time",label:{zh:""},mayNotBeCanceled:!0,maximumStacks:3},INSPIRATION:{name:"Inspiration",label:{zh:""},mayBeToggled:!0},SUBTRACTIVE_SPECTRUM:{name:"Subtractive Spectrum",label:{zh:""}},HYPERPHANTASIA:{name:"Hyperphantasia",label:{zh:""},maximumStacks:5},RAINBOW_BRIGHT:{name:"Rainbow Bright",label:{zh:""}},STARSTRUCK:{name:"Starstruck",label:{zh:""}},STARRY_MUSE:{name:"Starry Muse",label:{zh:""}},TEMPERA_COAT:{name:"Tempera Coat",label:{zh:""}},TEMPERA_GRASSA:{name:"Tempera Grassa",label:{zh:""}},SMUDGE:{name:"Smudge",label:{zh:""}}}),Jx=ue()({HAMMER_COMBO:{name:"Hammer Combo Counter",label:{zh:""}}}),eH=ue()({PICTOMANCY_MASTERY_II:{name:"Pictomancy Mastery II",level:74},ENHANCED_ARTISTRY:{name:"Enhanced Artistry",level:80},ENHANCED_PICTOMANCY:{name:"Enhanced Pictomancy",level:82},ENHANCED_SMUDGE:{name:"Enhanced Smudge",level:84},PICTOMANCY_MASTERY_III:{name:"Pictomancy Mastery III",level:84},ENHANCED_PICTOMANCY_II:{name:"Enhanced Pictomancy II",level:86},ENHANCED_TEMPERA:{name:"Enhanced Tempera",level:88},ENHANCED_PALETTE:{name:"Enhanced Palette",level:90},ENHANCED_PICTOMANCY_III:{name:"Enhanced Pictomancy III",level:92},PICTOMANCY_MASTERY_IV:{name:"Pictomancy Mastery IV",level:94},ENHANCED_PICTOMANCY_IV:{name:"Enhanced Pictomancy IV",level:96},ENHANCED_PICTOMANCY_V:{name:"Enhanced Pictomancy V",level:100}}),tH={...Qx,...dS,...Jx},nH=ue()({FAST_BLADE:{id:9,name:"Fast Blade",label:{zh:""}},FIGHT_OR_FLIGHT:{id:20,name:"Fight or Flight",label:{zh:""}},RIOT_BLADE:{id:15,name:"Riot Blade",label:{zh:""}},TOTAL_ECLIPSE:{id:7381,name:"Total Eclipse",label:{zh:""}},SHIELD_BASH:{id:16,name:"Shield Bash",label:{zh:""}},IRON_WILL:{id:28,name:"Iron Will",label:{zh:""}},RELEASE_IRON_WILL:{id:32065,name:"Release Iron Will",label:{zh:""}},SHIELD_LOB:{id:24,name:"Shield Lob",label:{zh:""}},SPIRITS_WITHIN:{id:29,name:"Spirits Within",label:{zh:""}},SHELTRON:{id:3542,name:"Sheltron",label:{zh:""}},SENTINEL:{id:17,name:"Sentinel",label:{zh:""}},PROMINENCE:{id:16457,name:"Prominence",label:{zh:""}},COVER:{id:27,name:"Cover",label:{zh:""}},CIRCLE_OF_SCORN:{id:23,name:"Circle of Scorn",label:{zh:""}},HALLOWED_GROUND:{id:30,name:"Hallowed Ground",label:{zh:""}},BULWARK:{id:22,name:"Bulwark",label:{zh:""}},GORING_BLADE:{id:3538,name:"Goring Blade",label:{zh:""}},DIVINE_VEIL:{id:3540,name:"Divine Veil",label:{zh:""}},CLEMENCY:{id:3541,name:"Clemency",label:{zh:""}},ROYAL_AUTHORITY:{id:3539,name:"Royal Authority",label:{zh:""}},INTERVENTION:{id:7382,name:"Intervention",label:{zh:""}},HOLY_SPIRIT:{id:7384,name:"Holy Spirit",label:{zh:""}},INTERVENE:{id:16461,name:"Intervene",label:{zh:""}},REQUIESCAT:{id:7383,name:"Requiescat",label:{zh:""}},PASSAGE_OF_ARMS:{id:7385,name:"Passage of Arms",label:{zh:""}},HOLY_CIRCLE:{id:16458,name:"Holy Circle",label:{zh:""}},ATONEMENT:{id:16460,name:"Atonement",label:{zh:""}},SUPPLICATION:{id:36918,name:"Supplication",label:{zh:"2"}},SEPULCHRE:{id:36919,name:"Sepulchre",label:{zh:"3"}},CONFITEOR:{id:16459,name:"Confiteor",label:{zh:""}},HOLY_SHELTRON:{id:25746,name:"Holy Sheltron",label:{zh:""}},EXPIACION:{id:25747,name:"Expiacion",label:{zh:""}},BLADE_OF_FAITH:{id:25748,name:"Blade of Faith",label:{zh:"2"}},BLADE_OF_TRUTH:{id:25749,name:"Blade of Truth",label:{zh:"3"}},BLADE_OF_VALOR:{id:25750,name:"Blade of Valor",label:{zh:"4"}},GUARDIAN:{id:36920,name:"Guardian",label:{zh:""}},IMPERATOR:{id:36921,name:"Imperator",label:{zh:""}},BLADE_OF_HONOR:{id:36922,name:"Blade of Honor",label:{zh:""}}}),iH=ue()({cd_FIGHT_OR_FLIGHT:{name:"cd_FightOrFlight"},cd_IRON_WILL:{name:"cd_IronWill"},cd_RELEASE_IRON_WILL:{name:"cd_ReleaseIronWill"},cd_SPIRITS_WITHIN:{name:"cd_SpiritsWithin"},cd_SHELTRON:{name:"cd_Sheltron"},cd_SENTINEL:{name:"cd_Sentinel"},cd_COVER:{name:"cd_Cover"},cd_CIRCLE_OF_SCORN:{name:"cd_CircleOfScorn"},cd_HALLOWED_GROUND:{name:"cd_HallowedGround"},cd_BULWARK:{name:"cd_Bulwark"},cd_DIVINE_VEIL:{name:"cd_DivineVeil"},cd_INTERVENTION:{name:"cd_Intervention"},cd_INTERVENE:{name:"cd_Intervene"},cd_REQUIESCAT:{name:"cd_Requiescat"},cd_PASSAGE_OF_ARMS:{name:"cd_PassageOfArms"},cd_HOLY_SHELTRON:{name:"cd_HolySheltron"},cd_EXPIACION:{name:"cd_Expiacion"},cd_GUARDIAN:{name:"cd_Guardian"},cd_IMPERATOR:{name:"cd_Imperator"},cd_BLADE_OF_HONOR:{name:"cd_BladeOfHonor"}}),aH=ue()({OATH_GAUGE:{name:"Oath Gauge",label:{zh:""}}}),hS=ue()({FIGHT_OR_FLIGHT:{name:"Fight or Flight",label:{zh:""}},IRON_WILL:{name:"Iron Will",label:{zh:""}},CIRCLE_OF_SCORN_DOT:{name:"Circle of Scorn DoT",label:{zh:"DOT"}},SHELTRON:{name:"Sheltron",label:{zh:""}},SENTINEL:{name:"Sentinel",label:{zh:""}},COVER:{name:"Cover",label:{zh:""}},HALLOWED_GROUND:{name:"Hallowed Ground",label:{zh:""}},BULWARK:{name:"Bulwark",label:{zh:""}},GORING_BLADE_READY:{name:"Goring Blade Ready",label:{zh:""}},DIVINE_VEIL:{name:"Divine Veil",label:{zh:""}},ATONEMENT_READY:{name:"Atonement Ready",label:{zh:""}},DIVINE_MIGHT:{name:"Divine Might",label:{zh:""}},INTERVENTION:{name:"Intervention",label:{zh:""}},KNIGHTS_RESOLVE:{name:"Knight's Resolve",label:{zh:""}},KNIGHTS_BENEDICTION:{name:"Knight's Benediction",label:{zh:""}},REQUIESCAT:{name:"Requiescat",maximumStacks:4,label:{zh:""}},CONFITEOR_READY:{name:"Confiteor Ready",label:{zh:""}},PASSAGE_OF_ARMS:{name:"Passage of Arms",label:{zh:""}},ARMS_UP:{name:"Arms Up",label:{zh:""}},SUPPLICATION_READY:{name:"Supplication Ready",label:{zh:""}},SEPULCHRE_READY:{name:"Sepulchre Ready",label:{zh:""}},HOLY_SHELTRON:{name:"Holy Sheltron",label:{zh:""}},BLADE_OF_HONOR_READY:{name:"Blade of Honor Ready",label:{zh:""}},GUARDIAN:{name:"Guardian",label:{zh:""}},GUARDIANS_WILL:{name:"Guardian's Will",label:{zh:""}}}),oH=ue()({PLD_COMBO_TRACKER:{name:"PLD Combo Tracker",label:{zh:""}},PLD_CONFITEOR_COMBO_TRACKER:{name:"PLD Confiteor Combo Tracker",label:{zh:""}},PLD_AOE_COMBO_TRACKER:{name:"PLD AOE Combo Tracker",label:{zh:"AOE"}}}),lH=ue()({ENHANCED_PROMINENCE:{name:"Enhanced Prominence",level:72},ENHANCED_SHELTRON:{name:"Enhanced Sheltron",level:74},SWORD_OATH:{name:"Sword Oath",level:76},ENHANCED_REQUIESCAT:{name:"Enhanced Requiescat",level:80},SHELTRON_MASTERY:{name:"Sheltron Mastery",level:82},ENHANCED_INTERVENTION:{name:"Enhanced Intervention",level:82},DIVINE_MAGIC_MASTERY_II:{name:"Divine Magic Mastery II",level:84},SPIRITS_WITHIN_MASTERY:{name:"Spirits Within Mastery",level:86},ENHANCED_DIVINE_VEIL:{name:"Enhanced Divine Veil",level:88},SENTINEL_MASTERY:{name:"Sentinel Mastery",level:92},REQUIESCAT_MASTERY:{name:"Requiescat Mastery",level:96},ENHANCED_BLADE_OF_VALOR:{name:"Enhanced Blade of Valor",level:100}}),sH={...aH,...hS,...oH},rH=ue()({RIPOSTE:{id:7504,name:"Riposte",label:{zh:"",ja:""}},VERTHUNDER:{id:7505,name:"Verthunder",label:{zh:"",ja:""}},CORPS_A_CORPS:{id:7506,name:"Corps-a-corps",label:{zh:"",ja:""}},VERAERO:{id:7507,name:"Veraero",label:{zh:"",ja:""}},VERFIRE:{id:7510,name:"Verfire",label:{zh:"",ja:""}},VERSTONE:{id:7511,name:"Verstone",label:{zh:"",ja:""}},ZWERCHHAU:{id:7512,name:"Zwerchhau",label:{zh:"",ja:""}},DISPLACEMENT:{id:7515,name:"Displacement",label:{zh:"",ja:""}},FLECHE:{id:7517,name:"Fleche",label:{zh:"",ja:""}},REDOUBLEMENT:{id:7516,name:"Redoublement",label:{zh:"",ja:""}},ACCELERATION:{id:7518,name:"Acceleration",label:{zh:"",ja:""}},MOULINET:{id:7513,name:"Moulinet",label:{zh:"",ja:""}},VERCURE:{id:7514,name:"Vercure",label:{zh:"",ja:""}},CONTRE_SIXTE:{id:7519,name:"Contre Sixte",label:{zh:"",ja:""}},EMBOLDEN:{id:7520,name:"Embolden",label:{zh:"",ja:""}},MANAFICATION:{id:7521,name:"Manafication",label:{zh:"",ja:""}},JOLT_II:{id:7524,name:"Jolt II",label:{zh:"",ja:""}},VERRAISE:{id:7523,name:"Verraise",label:{zh:"",ja:""}},IMPACT:{id:16526,name:"Impact",label:{zh:"",ja:""}},VERFLARE:{id:7525,name:"Verflare",label:{zh:"",ja:""}},VERHOLY:{id:7526,name:"Verholy",label:{zh:"",ja:""}},ENCHANTED_RIPOSTE:{id:7527,name:"Enchanted Riposte",label:{zh:"",ja:""}},ENCHANTED_ZWERCHHAU:{id:7528,name:"Enchanted Zwerchhau",label:{zh:"",ja:""}},ENCHANTED_REDOUBLEMENT:{id:7529,name:"Enchanted Redoublement",label:{zh:"",ja:""}},ENCHANTED_MOULINET:{id:7530,name:"Enchanted Moulinet",label:{zh:"",ja:""}},VERTHUNDER_II:{id:16524,name:"Verthunder II",label:{zh:"",ja:""}},VERAERO_II:{id:16525,name:"Veraero II",label:{zh:"",ja:""}},ENGAGEMENT:{id:16527,name:"Engagement",label:{zh:"",ja:""}},ENCHANTED_REPRISE:{id:16528,name:"Enchanted Reprise",label:{zh:"",ja:""}},REPRISE:{id:16529,name:"Reprise",label:{zh:"",ja:""}},SCORCH:{id:16530,name:"Scorch",label:{zh:"",ja:""}},VERTHUNDER_III:{id:25855,name:"Verthunder III",label:{zh:"",ja:""}},VERAERO_III:{id:25856,name:"Veraero III",label:{zh:"",ja:""}},MAGICK_BARRIER:{id:25857,name:"Magick Barrier",label:{zh:"",ja:""}},RESOLUTION:{id:25858,name:"Resolution",label:{zh:"",ja:""}},ENCHANTED_MOULINET_II:{id:37002,name:"Enchanted Moulinet Deux",label:{zh:"",ja:""}},ENCHANTED_MOULINET_III:{id:37003,name:"Enchanted Moulinet Trois",label:{zh:"",ja:""}},JOLT_III:{id:37004,name:"Jolt III",label:{zh:"",ja:""}},VICE_OF_THORNS:{id:37005,name:"Vice of Thorns",label:{zh:"",ja:""}},GRAND_IMPACT:{id:37006,name:"Grand Impact",label:{zh:"",ja:""}},PREFULGENCE:{id:37007,name:"Prefulgence",label:{zh:"",ja:""}}}),cH=ue()({cd_CORPS_A_CORPS:{name:"cd_CorpsACorps"},cd_DISPLACEMENT:{name:"cd_Displacement"},cd_FLECHE:{name:"cd_Fleche"},cd_ACCELERATION:{name:"cd_Acceleration"},cd_CONTRE_SIXTE:{name:"cd_ContreSixte"},cd_EMBOLDEN:{name:"cd_Embolden"},cd_MANAFICATION:{name:"cd_Manafication"},cd_MAGICK_BARRIER:{name:"cd_MagickBarrier"},cd_VICE_OF_THORNS:{name:"cd_ViceOfThorns"},cd_PREFULGENCE:{name:"cd_Prefulgence"}}),uH=ue()({WHITE_MANA:{name:"White Mana",label:{zh:""}},BLACK_MANA:{name:"Black Mana",label:{zh:""}},MANA_STACKS:{name:"Mana Stacks",label:{zh:""}}}),fS=ue()({ACCELERATION:{name:"Acceleration",label:{zh:""}},DUALCAST:{name:"Dualcast",label:{zh:""}},EMBOLDEN:{name:"Embolden",label:{zh:""}},GRAND_IMPACT_READY:{name:"Grand Impact Ready",label:{zh:""}},MAGICK_BARRIER:{name:"Magick Barrier",label:{zh:""}},MAGICKED_SWORDPLAY:{name:"Magicked Swordplay",label:{zh:""},maximumStacks:3},MANAFICATION:{name:"Manafication",label:{zh:""}},PREFULGENCE_READY:{name:"Prefulgence Ready",label:{zh:""}},THORNED_FLOURISH:{name:"Thorned Flourish",label:{zh:""}},VERFIRE_READY:{name:"Verfire Ready",label:{zh:""}},VERSTONE_READY:{name:"Verstone Ready",label:{zh:""}}}),dH=ue()({RDM_MELEE_COUNTER:{name:"RDM Melee Combo",label:{zh:""}},RDM_FINISHER_COUNTER:{name:"RDM Finisher Combo",label:{zh:"/"}},RDM_AOE_COUNTER:{name:"RDM AoE Combo",label:{zh:"AOE"}}}),hH=ue()({ENHANCED_DISPLACEMENT:{name:"Enhanced Displacement",level:72},RED_MAGIC_MASTERY:{name:"Red Magic Mastery",level:74},RED_MAGIC_MASTERY_II:{name:"Red Magic Mastery II",level:82},RED_MAGIC_MASTERY_III:{name:"Red Magic Mastery III",level:84},ENHANCED_ACCELERATION:{name:"Enhanced Acceleration",level:88},ENHANCED_EMBOLDEN:{name:"Enhanced Embolden",level:92},ENCHANTED_BLADE_MASTERY:{name:"Enchanted Blade Mastery",level:94},ENHANCED_ACCELERATION_II:{name:"Enhanced Acceleration II",level:96},ENHANCED_MANAFICATION:{name:"Enhanced Manafication",level:100}}),fH={...uH,...fS,...dH},EH=ue()({SLICE:{id:24373,name:"Slice",label:{zh:""}},WAXING_SLICE:{id:24374,name:"Waxing Slice",label:{zh:""}},INFERNAL_SLICE:{id:24375,name:"Infernal Slice",label:{zh:""}},SHADOW_OF_DEATH:{id:24378,name:"Shadow of Death",label:{zh:""}},SOUL_SLICE:{id:24380,name:"Soul Slice",label:{zh:""}},GIBBET:{id:24382,name:"Gibbet",label:{zh:""}},GALLOWS:{id:24383,name:"Gallows",label:{zh:""}},EXECUTIONERS_GIBBET:{id:36970,name:"Executioner's Gibbet",label:{zh:""}},EXECUTIONERS_GALLOWS:{id:36971,name:"Executioner's Gallows",label:{zh:""}},VOID_REAPING:{id:24395,name:"Void Reaping",label:{zh:""}},CROSS_REAPING:{id:24396,name:"Cross Reaping",label:{zh:""}},PLENTIFUL_HARVEST:{id:24385,name:"Plentiful Harvest",label:{zh:""}},HARVEST_MOON:{id:24388,name:"Harvest Moon",label:{zh:""}},COMMUNIO:{id:24398,name:"Communio",label:{zh:""}},PERFECTIO:{id:36973,name:"Perfectio",label:{zh:""}},SOULSOW:{id:24387,name:"Soulsow",label:{zh:""}},HARPE:{id:24386,name:"Harpe",label:{zh:""}},BLOOD_STALK:{id:24389,name:"Blood Stalk",label:{zh:""}},UNVEILED_GIBBET:{id:24390,name:"Unveiled Gibbet",label:{zh:""}},UNVEILED_GALLOWS:{id:24391,name:"Unveiled Gallows",label:{zh:""}},LEMURES_SLICE:{id:24399,name:"Lemure's Slice",label:{zh:""}},SACRIFICIUM:{id:36969,name:"Sacrificium",label:{zh:""}},ARCANE_CIRCLE:{id:24405,name:"Arcane Circle",label:{zh:""}},GLUTTONY:{id:24393,name:"Gluttony",label:{zh:""}},ENSHROUD:{id:24394,name:"Enshroud",label:{zh:""}},SPINNING_SCYTHE:{id:24376,name:"Spinning Scythe",label:{zh:""}},NIGHTMARE_SCYTHE:{id:24377,name:"Nightmare Scythe",label:{zh:""}},WHORL_OF_DEATH:{id:24379,name:"Whorl of Death",label:{zh:""}},SOUL_SCYTHE:{id:24381,name:"Soul Scythe",label:{zh:""}},GUILLOTINE:{id:24384,name:"Guillotine",label:{zh:""}},EXECUTIONERS_GUILLOTINE:{id:36972,name:"Executioner's Guillotine",label:{zh:""}},GRIM_REAPING:{id:24397,name:"Grim Reaping",label:{zh:""}},GRIM_SWATHE:{id:24392,name:"Grim Swathe",label:{zh:""}},LEMURES_SCYTHE:{id:24400,name:"Lemure's Scythe",label:{zh:""}},ARCANE_CREST:{id:24404,name:"Arcane Crest",label:{zh:""}},ARCANE_CREST_POP:{name:"Pop Arcane Crest",label:{zh:""}},HELLS_INGRESS:{id:24401,name:"Hell's Ingress",label:{zh:""}},HELLS_EGRESS:{id:24402,name:"Hell's Egress",label:{zh:""}},REGRESS:{id:24403,name:"Regress",label:{zh:""}},GAIN_SOUL_GAUGE:{name:"+10 Soul Gauge",label:{zh:"+10"}}}),mH=ue()({cd_ARCANE_CIRCLE:{name:"cd_ArcaneCircle"},cd_GLUTTONY:{name:"cd_Gluttony"},cd_SOUL_SLICE:{name:"cd_SoulSlice"},cd_ENSHROUD:{name:"cd_Enshroud"},cd_INGRESS_EGRESS:{name:"cd_IngressEgress",label:{zh:"CD/"}},cd_ARCANE_CREST:{name:"cd_ArcaneCrest"},cd_ARCANE_CREST_POP:{name:"cd_ArcaneCrestPop"},cd_BLOOD_STALK:{name:"cd_BloodStalk"},cd_LEMURES_SLICE:{name:"cd_LemuresSlice"},cd_SACRIFICIUM:{name:"cd_Sacrificium"},cd_GAIN_SOUL_GAUGE:{name:"cd_GainSoulGauge"}}),AH=ue()({SOUL:{name:"Soul",label:{zh:""}},SHROUD:{name:"Shroud",label:{zh:""}},LEMURE_SHROUD:{name:"Lemure Shroud",label:{zh:""}},VOID_SHROUD:{name:"Void Shroud",label:{zh:""}}}),ES=ue()({DEATHS_DESIGN:{name:"Death's Design",label:{zh:""},specialDebuff:!0},SOUL_REAVER:{name:"Soul Reaver",label:{zh:""},maximumStacks:2},ENHANCED_GIBBET:{name:"Enhanced Gibbet",label:{zh:""}},ENHANCED_GALLOWS:{name:"Enhanced Gallows",label:{zh:""}},EXECUTIONER:{name:"Executioner",label:{zh:""},maximumStacks:2},ENSHROUDED:{name:"Enshrouded",label:{zh:""}},ENHANCED_VOID_REAPING:{name:"Enhanced Void Reaping",label:{zh:""}},ENHANCED_CROSS_REAPING:{name:"Enhanced Cross Reaping",label:{zh:""}},OBLATIO:{name:"Oblatio",label:{zh:""}},IDEAL_HOST:{name:"Ideal Host",label:{zh:""}},PERFECTIO_OCCULTA:{name:"Perfectio Occulta",label:{zh:""}},PERFECTIO_PARATA:{name:"Perfectio Parata",label:{zh:""}},ARCANE_CIRCLE:{name:"Arcane Circle",label:{zh:""}},CIRCLE_OF_SACRIFICE:{name:"Circle of Sacrifice",label:{zh:""}},BLOODSOWN_CIRCLE:{name:"Bloodsown Circle",label:{zh:""}},IMMORTAL_SACRIFICE:{name:"Immortal Sacrifice",label:{zh:""},maximumStacks:8},CREST_OF_TIME_BORROWED:{name:"Crest of Time Borrowed",label:{zh:""}},CREST_OF_TIME_RETURNED:{name:"Crest of Time Returned",label:{zh:""}},SOULSOW:{name:"Soulsow",label:{zh:""}},THRESHOLD:{name:"Threshold",label:{zh:""}},ENHANCED_HARPE:{name:"Enhanced Harpe",label:{zh:""}}}),RH=ue()({ARCANE_CREST:{name:"Arcane Crest",label:{zh:""}},HELLS_INGRESS_USED:{name:"Hell's Ingress Used",label:{zh:""}},RPR_COMBO:{name:"RPR Combo",label:{zh:""}},RPR_AOE_COMBO:{name:"RPR AoE Combo",label:{zh:"AOE"}}}),TH=ue()({HELLSGATE:{name:"Hellsgate",level:74},TEMPERED_SOUL:{name:"Tempered Soul",level:78},SHROUD_GAUGE:{name:"Shroud Gauge",level:80},ENHANCED_ARCANE_CREST:{name:"Enhanced Arcane Crest",level:84},MELEE_MASTERY_II_RPR:{name:"Melee Mastery II",level:84},VOID_SOUL:{name:"Void Soul",level:86},ENHANCED_ARCANE_CIRCLE:{name:"Enhanced Arcane Circle",level:88},ENHANCED_ENSHROUD:{name:"Enhanced Enshroud",level:92},MELEE_MASTERY_III_RPR:{name:"Melee Mastery III",level:94},ENHANCED_GLUTTONY:{name:"Enhanced Gluttony",level:96},ENHANCED_PLENTIFUL_HARVEST:{name:"Enhanced Plentiful Harvest",level:100}}),SH={...AH,...ES,...RH},gH=ue()({ENPI:{id:7486,name:"Enpi",label:{zh:""}},HAKAZE:{id:7477,name:"Hakaze",label:{zh:""}},GYOFU:{id:36963,name:"Gyofu",label:{zh:""}},YUKIKAZE:{id:7480,name:"Yukikaze",label:{zh:""}},JINPU:{id:7478,name:"Jinpu",label:{zh:""}},GEKKO:{id:7481,name:"Gekko",label:{zh:""}},SHIFU:{id:7479,name:"Shifu",label:{zh:""}},KASHA:{id:7482,name:"Kasha",label:{zh:""}},FUGA:{id:7483,name:"Fuga",label:{zh:""}},FUKO:{id:25780,name:"Fuko",label:{zh:""}},MANGETSU:{id:7484,name:"Mangetsu",label:{zh:""}},OKA:{id:7485,name:"Oka",label:{zh:""}},MEIKYO_SHISUI:{id:7499,name:"Meikyo Shisui",label:{zh:""}},IKISHOTEN:{id:16482,name:"Ikishoten",label:{zh:""}},HISSATSU_SHINTEN:{id:7490,name:"Hissatsu: Shinten",label:{zh:""}},HISSATSU_KYUTEN:{id:7491,name:"Hissatsu: Kyuten",label:{zh:""}},HISSATSU_GYOTEN:{id:7492,name:"Hissatsu: Gyoten",label:{zh:""}},HISSATSU_YATEN:{id:7493,name:"Hissatsu: Yaten",label:{zh:""}},HISSATSU_SENEI:{id:16481,name:"Hissatsu: Senei",label:{zh:""}},HISSATSU_GUREN:{id:7496,name:"Hissatsu: Guren",label:{zh:""}},HAGAKURE:{id:7495,name:"Hagakure",label:{zh:""}},IAIJUTSU:{id:7867,name:"Iaijutsu",label:{zh:""}},TSUBAME_GAESHI:{id:16483,name:"Tsubame-gaeshi",label:{zh:""}},SHOHA:{id:16487,name:"Shoha",label:{zh:""}},THIRD_EYE:{id:7498,name:"Third Eye",label:{zh:""}},TENGENTSU:{id:36962,name:"Tengentsu",label:{zh:""}},OGI_NAMIKIRI:{id:25781,name:"Ogi Namikiri",label:{zh:""}},KAESHI_NAMIKIRI:{id:25782,name:"Kaeshi: Namikiri",label:{zh:""}},ZANSHIN:{id:36964,name:"Zanshin",label:{zh:""}},MEDITATE:{id:7497,name:"Meditate",label:{zh:""}},HIGANBANA:{id:7489,name:"Higanbana",label:{zh:""}},TENKA_GOKEN:{id:7488,name:"Tenka Goken",label:{zh:""}},KAESHI_GOKEN:{id:16485,name:"Kaeshi: Goken",label:{zh:""}},TENDO_GOKEN:{id:36965,name:"Tendo Goken",label:{zh:""}},TENDO_KAESHI_GOKEN:{id:36967,name:"Tendo Kaeshi Goken",label:{zh:""}},MIDARE_SETSUGEKKA:{id:7487,name:"Midare Setsugekka",label:{zh:""}},KAESHI_SETSUGEKKA:{id:16486,name:"Kaeshi: Setsugekka",label:{zh:""}},TENDO_SETSUGEKKA:{id:36966,name:"Tendo Setsugekka",label:{zh:""}},TENDO_KAESHI_SETSUGEKKA:{id:36968,name:"Tendo Kaeshi Setsugekka",label:{zh:""}},THIRD_EYE_POP:{name:"Pop Third Eye",label:{zh:""}},TENGENTSU_POP:{name:"Pop Tengentsu",label:{zh:""}}}),IH=ue()({cd_YATEN:{name:"cd_Yaten",label:{zh:"CD"}},cd_GYOTEN:{name:"cd_Gyoten",label:{zh:"CD"}},cd_SENEI_GUREN:{name:"cd_Senei",label:{zh:"CD: /"}},cd_SHINTEN:{name:"cd_Shinten",label:{zh:"CD"}},cd_KYUTEN:{name:"cd_Kyuten",label:{zh:"CD"}},cd_MEDITATE:{name:"cd_Meditate"},cd_IKISHOTEN:{name:"cd_Ikishoten"},cd_ZANSHIN:{name:"cd_Zanshin"},cd_HAGAKURE:{name:"cd_Hagakure"},cd_SHOHA:{name:"cd_Shoha"},cd_MEIKYO_SHISUI:{name:"cd_MeikyoShisui"},cd_THIRD_EYE:{name:"cd_ThirdEye"},cd_THIRD_EYE_POP:{name:"cd_ThirdEyePop"}}),_H=ue()({KENKI:{name:"Kenki",label:{zh:""}},SETSU:{name:"Setsu",label:{zh:""}},GETSU:{name:"Getsu",label:{zh:""}},KA_SEN:{name:"Ka",label:{zh:""}},MEDITATION:{name:"Meditation",label:{zh:""}}}),mS=ue()({MEIKYO_SHISUI:{name:"Meikyo Shisui",label:{zh:""},maximumStacks:3},FUGETSU:{name:"Fugetsu",label:{zh:""}},FUKA:{name:"Fuka",label:{zh:""}},ZANSHIN_READY:{name:"Zanshin Ready",label:{zh:""}},TENDO:{name:"Tendo",label:{zh:""}},OGI_READY:{name:"Ogi Namikiri Ready",label:{zh:""}},TSUBAME_GAESHI_READY:{name:"Tsubame-gaeshi Ready",label:{zh:""}},THIRD_EYE:{name:"Third Eye",label:{zh:""}},TENGENTSU:{name:"Tengentsu",label:{zh:""}},TENGENTSUS_FORESIGHT:{name:"Tengentsu's Foresight",label:{zh:""}},MEDITATE:{name:"Meditate",label:{zh:""}},ENHANCED_ENPI:{name:"Enhanced Enpi",label:{zh:""}},HIGANBANA_DOT:{name:"HiganbanaDoT",label:{zh:"dot"}}}),pH=ue()({SAM_TWO_READY:{name:"SAMTwoReady",label:{zh:"2"}},SAM_TWO_AOE_READY:{name:"SAMTwoAoeReady",label:{zh:"AOE2"}},GEKKO_READY:{name:"GekkoReady",label:{zh:""}},KASHA_READY:{name:"KashaReady",label:{zh:""}},KAESHI_OGI_READY:{name:"KaeshiOgiReady",label:{zh:""}},KAESHI_TRACKER:{name:"KaeshiTracker",label:{zh:""}}}),NH=ue()({ENHANCED_IAIJUTSU:{name:"Enhanced Iaijutsu",level:74},ENHANCED_MEIKYO_SHISUI:{name:"Enhanced Meikyo Shisui",level:76},ENHANCED_FUGETSU_AND_FUKA:{name:"Enhanced Fugetsu and Fuka",level:78},THIRD_EYE_MASTERY:{name:"Third Eye Mastery",level:82},WAY_OF_THE_SAMURAI_II:{name:"Way of the Samurai II",level:84},FUGA_MASTERY:{name:"Fuga Mastery",level:86},ENHANCED_IKISHOTEN:{name:"Enhanced Ikishoten",level:90},HAKAZE_MASTERY:{name:"Hakaze Mastery",level:92},ENHANCED_HISSATSU:{name:"Enhanced Hissatsu",level:94},WAY_OF_THE_SAMURAI_III:{name:"Way of the Samurai III",level:94},ENHANCED_IKISHOTEN_II:{name:"Enhanced Ikishoten II",level:96},ENHANCED_MEIKYO_SHISUI_II:{name:"Enhanced Meikyo Shisui II",level:100}}),CH={..._H,...mS,...pH},AS=ue()({PHYSICK:{id:190,name:"Physick",label:{zh:"",ja:""}},SUMMON_EOS:{id:17215,name:"Summon Eos",label:{zh:"",ja:""}},RESURRECTION:{id:173,name:"Resurrection",label:{zh:"",ja:""}},WHISPERING_DAWN:{id:16537,name:"Whispering Dawn",label:{zh:"",ja:""}},BIO_II:{id:17865,name:"Bio II",label:{zh:"",ja:""}},ADLOQUIUM:{id:185,name:"Adloquium",label:{zh:"",ja:""}},SUCCOR:{id:186,name:"Succor",label:{zh:"",ja:""}},RUIN_II:{id:17870,name:"Ruin II",label:{zh:"",ja:""}},FEY_ILLUMINATION:{id:16538,name:"Fey Illumination",label:{zh:"",ja:""}},AETHERFLOW:{id:166,name:"Aetherflow",label:{zh:"",ja:""}},ENERGY_DRAIN:{id:167,name:"Energy Drain",label:{zh:"",ja:""}},LUSTRATE:{id:189,name:"Lustrate",label:{zh:"",ja:""}},ART_OF_WAR:{id:16539,name:"Art of War",label:{zh:"",ja:""}},SACRED_SOIL:{id:188,name:"Sacred Soil",label:{zh:"",ja:""}},INDOMITABILITY:{id:3583,name:"Indomitability",label:{zh:"",ja:""}},DEPLOYMENT_TACTICS:{id:3585,name:"Deployment Tactics",label:{zh:"",ja:""}},EMERGENCY_TACTICS:{id:3586,name:"Emergency Tactics",label:{zh:"",ja:""}},DISSIPATION:{id:3587,name:"Dissipation",label:{zh:"",ja:""}},EXCOGITATION:{id:7434,name:"Excogitation",label:{zh:"",ja:""}},BROIL_II:{id:7435,name:"Broil II",label:{zh:"",ja:""}},CHAIN_STRATAGEM:{id:7436,name:"Chain Stratagem",label:{zh:"",ja:""}},AETHERPACT:{id:7437,name:"Aetherpact",label:{zh:"",ja:""}},DISSOLVE_UNION:{id:7869,name:"Dissolve Union",label:{zh:"",ja:""}},BIOLYSIS:{id:16540,name:"Biolysis",label:{zh:"",ja:""}},BROIL_III:{id:16541,name:"Broil III",label:{zh:"",ja:""}},RECITATION:{id:16542,name:"Recitation",label:{zh:"",ja:""}},FEY_BLESSING:{id:16543,name:"Fey Blessing",label:{zh:"",ja:""}},SUMMON_SERAPH:{id:16545,name:"Summon Seraph",label:{zh:"",ja:""}},CONSOLATION:{id:16546,name:"Consolation",label:{zh:"",ja:""}},BROIL_IV:{id:25865,name:"Broil IV",label:{zh:"",ja:""}},ART_OF_WAR_II:{id:25866,name:"Art of War II",label:{zh:"",ja:""}},PROTRACTION:{id:25867,name:"Protraction",label:{zh:"",ja:""}},EXPEDIENT:{id:25868,name:"Expedient",label:{zh:"",ja:""}},BANEFUL_IMPACTION:{id:37012,name:"Baneful Impaction",label:{zh:"",ja:""}},CONCITATION:{id:37013,name:"Concitation",label:{zh:"",ja:""}},SERAPHISM:{id:37014,name:"Seraphism",label:{zh:"",ja:""}},MANIFESTATION:{id:37015,name:"Manifestation",label:{zh:"",ja:""}},ACCESSION:{id:37016,name:"Accession",label:{zh:"",ja:""}},ANGELS_WHISPER:{name:"Angel's Whisper",label:{zh:""}}}),bH=ue()({cd_WHISPERING_DAWN:{name:"cd_WhisperingDawn"},cd_FEY_ILLUMINATION:{name:"cd_FeyIllumination"},cd_AETHERFLOW:{name:"cd_Aetherflow"},cd_ENERGY_DRAIN:{name:"cd_EnergyDrain"},cd_LUSTRATE:{name:"cd_Lustrate"},cd_SACRED_SOIL:{name:"cd_SacredSoil"},cd_INDOMITABILITY:{name:"cd_Indomitability"},cd_DEPLOYMENT_TACTICS:{name:"cd_DeploymentTactics"},cd_EMERGENCY_TACTICS:{name:"cd_EmergencyTactics"},cd_DISSIPATION:{name:"cd_Dissipation"},cd_EXCOGITATION:{name:"cd_Excogitation"},cd_CHAIN_STRATAGEM:{name:"cd_ChainStratagem"},cd_AETHERPACT:{name:"cd_Aetherpact"},cd_DISSOLVE_UNION:{name:"cd_DissolveUnion"},cd_RECITATION:{name:"cd_Recitation"},cd_FEY_BLESSING:{name:"cd_FeyBlessing"},cd_SUMMON_SERAPH:{name:"cd_SummonSeraph"},cd_CONSOLATION:{name:"cd_Consolation"},cd_CONSOLATION_INTERNAL:{name:"cd_ConsolationInternal"},cd_PROTRACTION:{name:"cd_Protraction"},cd_EXPEDIENT:{name:"cd_Expedient"},cd_BANEFUL_IMPACTION:{name:"cd_BanefulImpaction"},cd_SERAPHISM:{name:"cd_Seraphism"}}),OH=ue()({AETHERFLOW:{name:"Aetherflow",maximumCharges:3,label:{zh:""}},FAERIE_GAUGE:{name:"Faerie Gauge",maximumStacks:100,label:{zh:""}}}),RS=ue()({BIO_II:{name:"Bio II",label:{zh:""}},CATALYZE:{name:"Catalyze",label:{zh:""}},GALVANIZE:{name:"Galvanize",label:{zh:""}},WHISPERING_DAWN:{name:"Whispering Dawn",label:{zh:""}},ANGELS_WHISPER:{name:"Angel's Whisper",label:{zh:""}},FEY_ILLUMINATION:{name:"Fey Illumination",label:{zh:""}},SERAPHIC_ILLUMINATION:{name:"Seraphic Illumination",label:{zh:""}},SACRED_SOIL_MIT:{name:"Sacred Soil (Mitigation)",label:{zh:"[]"},mayNotBeCanceled:!0},SACRED_SOIL_ZONE:{name:"Sacred Soil",label:{zh:""},mayBeToggled:!0},EMERGENCY_TACTICS:{name:"Emergency Tactics",label:{zh:""}},DISSIPATION:{name:"Dissipation",label:{zh:""},mayNotBeCanceled:!0},EXCOGITATION:{name:"Excogitation",label:{zh:""}},CHAIN_STRATAGEM:{name:"Chain Stratagem",label:{zh:""},specialDebuff:!0},IMPACT_IMMINENT:{name:"Impact Imminent",label:{zh:""}},BIOLYSIS:{name:"Biolysis",label:{zh:""}},RECITATION:{name:"Recitation",label:{zh:""}},FEY_UNION:{name:"Fey Union",label:{zh:""}},SERAPHIC_VEIL:{name:"Seraphic Veil",label:{zh:""}},PROTRACTION:{name:"Protraction",label:{zh:""}},EXPEDIENCE:{name:"Expedience",label:{zh:""}},DESPERATE_MEASURES:{name:"Desperate Measures",label:{zh:""}},BANEFUL_IMPACTION:{name:"Baneful Impaction",label:{zh:""}},SERAPHISM:{name:"Seraphism",label:{zh:""},mayNotBeCanceled:!0},SERAPHISM_REGEN:{name:"Seraphism (Regen)",label:{zh:"[]"}}}),DH=ue()({SERAPH_SUMMON_TIMER:{name:"Seraph Summon Timer",label:{zh:""}}}),yH=ue()({CORRUPTION_MASTERY_II:{name:"Corruption Mastery II",level:72},BROIL_MASTERY_III:{name:"Broil Mastery III",level:72},ENHANCED_SACRED_SOIL:{name:"Enhanced Sacred Soil",level:78},BROIL_MASTERY_IV:{name:"Broil Mastery IV",level:82},ART_OF_WAR_MASTERY:{name:"Art of War Mastery",level:82},ENHANCED_DEPLOYMENT_TACTICS:{name:"Enhanced Deployment Tactics",level:88},ENHANCED_CHAIN_STRATAGEM:{name:"Enhanced Chain Stratagem",level:92},TACTICIANS_MASTERY:{name:"Tactician's Mastery",level:94},SUCCOR_MASTERY:{name:"Succor Mastery",level:96},ENHANCED_RECITATION:{name:"Enhanced Recitation",level:98}}),vH={...OH,...RS,...DH},MH=ue()({DIAGNOSIS:{id:24284,name:"Diagnosis",label:{zh:""}},EUKRASIAN_DIAGNOSIS:{id:24291,name:"Eukrasian Diagnosis",label:{zh:""}},EUKRASIAN_DIAGNOSIS_POP:{name:"Pop Eukrasian Diagnosis",label:{zh:""}},HAIMA:{id:24305,name:"Haima",label:{zh:""}},HAIMA_POP:{name:"Pop Haima",label:{zh:""}},EGEIRO:{id:24287,name:"Egeiro",label:{zh:""}},PROGNOSIS:{id:24286,name:"Prognosis",label:{zh:""}},EUKRASIAN_PROGNOSIS:{id:24292,name:"Eukrasian Prognosis",label:{zh:""}},EUKRASIAN_PROGNOSIS_II:{id:37034,name:"Eukrasian Prognosis II",label:{zh:" II"}},EUKRASIAN_PROGNOSIS_POP:{name:"Pop Eukrasian Prognosis",label:{zh:""}},EUKRASIAN_PROGNOSIS_II_POP:{name:"Pop Eukrasian Prognosis II",label:{zh:" II "}},PANHAIMA:{id:24311,name:"Panhaima",label:{zh:""}},PANHAIMA_POP:{name:"Pop Panhaima",label:{zh:""}},PHYSIS_II:{id:24302,name:"Physis II",label:{zh:" II"}},HOLOS:{id:24310,name:"Holos",label:{zh:""}},PEPSIS:{id:24301,name:"Pepsis",label:{zh:""}},KARDIA:{id:24285,name:"Kardia",label:{zh:""}},EUKRASIA:{id:24290,name:"Eukrasia",label:{zh:""}},SOTERIA:{id:24294,name:"Soteria",label:{zh:""}},ICARUS:{id:24295,name:"Icarus",label:{zh:""}},ZOE:{id:24300,name:"Zoe",label:{zh:""}},KRASIS:{id:24317,name:"Krasis",label:{zh:""}},PHILOSOPHIA:{id:37035,name:"Philosophia",label:{zh:""}},RHIZOMATA:{id:24309,name:"Rhizomata",label:{zh:""}},DRUOCHOLE:{id:24296,name:"Druochole",label:{zh:""}},IXOCHOLE:{id:24299,name:"Ixochole",label:{zh:""}},KERACHOLE:{id:24298,name:"Kerachole",label:{zh:""}},TAUROCHOLE:{id:24303,name:"Taurochole",label:{zh:""}},DOSIS:{id:24283,name:"Dosis",label:{zh:""}},DOSIS_II:{id:24306,name:"Dosis II",label:{zh:" II"}},DOSIS_III:{id:24312,name:"Dosis III",label:{zh:" III"}},EUKRASIAN_DOSIS:{id:24293,name:"Eukrasian Dosis",label:{zh:""}},EUKRASIAN_DOSIS_II:{id:24308,name:"Eukrasian Dosis II",label:{zh:" II"}},EUKRASIAN_DOSIS_III:{id:24314,name:"Eukrasian Dosis III",label:{zh:" III"}},TOXIKON:{id:24304,name:"Toxikon",label:{zh:""}},TOXIKON_II:{id:24316,name:"Toxikon II",label:{zh:" II"}},DYSKRASIA:{id:24297,name:"Dyskrasia",label:{zh:""}},DYSKRASIA_II:{id:24315,name:"Dyskrasia II",label:{zh:" II"}},EUKRASIAN_DYSKRASIA:{id:37032,name:"Eukrasian Dyskrasia",label:{zh:""}},PHLEGMA:{id:24289,name:"Phlegma",label:{zh:""}},PHLEGMA_II:{id:24307,name:"Phlegma II",label:{zh:" II"}},PHLEGMA_III:{id:24313,name:"Phlegma III",label:{zh:" III"}},PSYCHE:{id:37033,name:"Psyche",label:{zh:""}},PNEUMA:{id:24318,name:"Pneuma",label:{zh:""}}}),LH=ue()({cd_HAIMA:{name:"cd_Haima"},cd_PANHAIMA:{name:"cd_PANHAIMA"},cd_PHYSIS:{name:"cd_PHYSIS",label:{zh:"CD"}},cd_HOLOS:{name:"cd_HOLOS"},cd_PEPSIS:{name:"cd_PEPSIS"},cd_KARDIA:{name:"cd_KARDIA"},cd_EUKRASIA:{name:"cd_EUKRASIA"},cd_SOTERIA:{name:"cd_SOTERIA"},cd_ICARUS:{name:"cd_ICARUS"},cd_ZOE:{name:"cd_ZOE"},cd_KRASIS:{name:"cd_KRASIS"},cd_PHILOSOPHIA:{name:"cd_PHILOSOPHIA"},cd_RHIZOMATA:{name:"cd_RHIZOMATA"},cd_DRUOCHOLE:{name:"cd_DRUOCHOLE"},cd_IXOCHOLE:{name:"cd_IXOCHOLE"},cd_KERACHOLE:{name:"cd_KERACHOLE"},cd_TAUROCHOLE:{name:"cd_TAUROCHOLE"},cd_PHLEGMA:{name:"cd_PHLEGMA"},cd_PSYCHE:{name:"cd_PSYCHE"},cd_PNEUMA:{name:"cd_PNEUMA"},cd_DIAGNOSIS_POP:{name:"cd_DIAGNOSIS_POP",label:{zh:"CD"}},cd_PROGNOSIS_POP:{name:"cd_PROGNOSIS_POP",label:{zh:"CD"}},cd_HAIMA_POP:{name:"cd_HAIMA_POP"},cd_PANHAIMA_POP:{name:"cd_PANHAIMA_POP"}}),xH=ue()({ADDERSGALL:{name:"Addersgall",label:{zh:""}},ADDERSTING:{name:"Addersting",label:{zh:""}}}),kb=ue()({EUKRASIA:{id:2606,name:"Eukrasia",label:{zh:""}},EUKRASIAN_DIAGNOSIS:{id:2607,name:"Eukrasian Diagnosis",label:{zh:""}},DIFFERENTIAL_DIAGNOSIS:{id:2608,name:"Differential Diagnosis",label:{zh:""}},HAIMA:{id:2612,name:"Haima",label:{zh:""},mayNotBeCanceled:!0},HAIMATINON:{id:2642,name:"Haimatinon",label:{zh:""},maximumStacks:5,mayNotBeCanceled:!0},EUKRASIAN_PROGNOSIS:{id:2609,name:"Eukrasian Prognosis",label:{zh:""}},PANHAIMA:{id:2613,name:"Panhaima",label:{zh:""},mayNotBeCanceled:!0},PANHAIMATINON:{id:2643,name:"Panhaimatinon",label:{zh:""},maximumStacks:5,mayNotBeCanceled:!0},PHYSIS_II:{id:2620,name:"Physis II",label:{zh:" II"}},AUTOPHYSIS:{id:2621,name:"Autophysis",label:{zh:""}},KARDIA:{id:2604,name:"Kardia",label:{zh:""}},KARDION:{id:2605,name:"Kardion",label:{zh:""}},PHILOSOPHIA:{id:3898,name:"Philosophia",label:{zh:""}},EUDAIMONIA:{id:3899,name:"Eudaimonia",label:{zh:""}},SOTERIA:{id:2610,name:"Soteria",label:{zh:""},maximumStacks:4},ZOE:{id:2611,name:"Zoe",label:{zh:""}},KRASIS:{id:2622,name:"Krasis",label:{zh:""}},KERACHOLE:{id:2618,name:"Kerachole",label:{zh:""}},KERAKEIA:{id:2938,name:"Kerakeia",label:{zh:"[]"}},TAUROCHOLE:{id:2619,name:"Taurochole",label:{zh:""}},EUKRASIAN_DOSIS:{id:2614,name:"Eukrasian Dosis",label:{zh:""}},EUKRASIAN_DOSIS_II:{id:2615,name:"Eukrasian Dosis II",label:{zh:" II"}},EUKRASIAN_DOSIS_III:{id:2616,name:"Eukrasian Dosis III",label:{zh:" III"}},EUKRASIAN_DYSKRASIA:{id:3897,name:"Eukrasian Dyskrasia",label:{zh:""}},PNEUMA:{id:2623,name:"Pneuma",label:{zh:""}},HOLOS:{id:3003,name:"Holos",label:{zh:""}},HOLOSAKOS:{id:3365,name:"Holosakos",label:{zh:""}}}),HH=ue()({PEPSIS:{name:"Pepsis",label:{zh:""}}}),kH=ue()({OFFENSIVE_MAGIC_MASTERY:{name:"Offensive Magic Mastery",level:72},OFFENSIVE_MAGIC_MASTERY_II:{name:"Offensive Magic Mastery II",level:82},ENHANCED_KERACHOLE:{name:"Enhanced Kerachole",level:78},ENHANCED_ZOE:{name:"Enhanced Zoe",level:88},ENHANCED_SOTERIA:{name:"Enhanced Soteria",level:94},EUKRASIAN_PROGNOSIS_MASTERY:{name:"Eukrasian Prognosis Mastery",level:96},ENHANCED_PHYSIS_II:{name:"Enhanced Physis II",level:98}}),UH={...xH,...kb,...HH},Ub=ue()({SUMMON_CARBUNCLE:{id:25798,name:"Summon Carbuncle",label:{zh:""}},RADIANT_AEGIS:{id:25799,name:"Radiant Aegis",label:{zh:""}},PHYSICK:{id:16230,name:"Physick",label:{zh:""}},GEMSHINE:{id:25883,name:"Gemshine",label:{zh:""}},FESTER:{id:181,name:"Fester",label:{zh:""}},ENERGY_DRAIN:{id:16508,name:"Energy Drain",label:{zh:""}},RESURRECTION:{id:173,name:"Resurrection",label:{zh:""}},OUTBURST:{id:16511,name:"Outburst",label:{zh:""}},PRECIOUS_BRILLIANCE:{id:25884,name:"Precious Brilliance",label:{zh:""}},RUBY_OUTBURST:{id:25814,name:"Ruby Outburst",label:{zh:""}},TOPAZ_OUTBURST:{id:25815,name:"Topaz Outburst",label:{zh:""}},EMERALD_OUTBURST:{id:25816,name:"Emerald Outburst",label:{zh:""}},SUMMON_IFRIT:{id:25805,name:"Summon Ifrit",label:{zh:""}},PAINFLARE:{id:3578,name:"Painflare",label:{zh:""}},SUMMON_TITAN:{id:25806,name:"Summon Titan",label:{zh:""}},SUMMON_GARUDA:{id:25807,name:"Summon Garuda",label:{zh:""}},ENERGY_SIPHON:{id:16510,name:"Energy Siphon",label:{zh:""}},RUBY_RUIN_III:{id:25817,name:"Ruby Ruin III",label:{zh:""}},TOPAZ_RUIN_III:{id:25818,name:"Topaz Ruin III",label:{zh:""}},EMERALD_RUIN_III:{id:25819,name:"Emerald Ruin III",label:{zh:""}},RUIN_III:{id:3579,name:"Ruin III",label:{zh:""}},ASTRAL_IMPULSE:{id:25820,name:"Astral Impulse",label:{zh:""}},ASTRAL_FLARE:{id:25821,name:"Astral Flare",label:{zh:""}},ASTRAL_FLOW:{id:25822,name:"Astral Flow",label:{zh:""}},DEATHFLARE:{id:3582,name:"Deathflare",label:{zh:""}},RUIN_IV:{id:7426,name:"Ruin IV",label:{zh:""}},SEARING_LIGHT:{id:25801,name:"Searing Light",label:{zh:""}},SUMMON_BAHAMUT:{id:7427,name:"Summon Bahamut",label:{zh:""}},ENKINDLE_BAHAMUT:{id:7429,name:"Enkindle Bahamut",label:{zh:""}},RUBY_RITE:{id:25823,name:"Ruby Rite",label:{zh:""}},TOPAZ_RITE:{id:25824,name:"Topaz Rite",label:{zh:""}},EMERALD_RITE:{id:25825,name:"Emerald Rite",label:{zh:""}},TRI_DISASTER:{id:25826,name:"Tri-disaster",label:{zh:""}},RUBY_DISASTER:{id:25827,name:"Ruby Disaster",label:{zh:""}},TOPAZ_DISASTER:{id:25828,name:"Topaz Disaster",label:{zh:""}},EMERALD_DISASTER:{id:25829,name:"Emerald Disaster",label:{zh:""}},SUMMON_PHOENIX:{id:25831,name:"Summon Phoenix",label:{zh:""}},FOUNTAIN_OF_FIRE:{id:16514,name:"Fountain of Fire",label:{zh:""}},BRAND_OF_PURGATORY:{id:16515,name:"Brand of Purgatory",label:{zh:""}},REKINDLE:{id:25830,name:"Rekindle",label:{zh:""}},ENKINDLE_PHOENIX:{id:16516,name:"Enkindle Phoenix",label:{zh:""}},RUBY_CATASTROPHE:{id:25832,name:"Ruby Catastrophe",label:{zh:""}},TOPAZ_CATASTROPHE:{id:25833,name:"Topaz Catastrophe",label:{zh:""}},EMERALD_CATASTROPHE:{id:25834,name:"Emerald Catastrophe",label:{zh:""}},CRIMSON_CYCLONE:{id:25835,name:"Crimson Cyclone",label:{zh:""}},CRIMSON_STRIKE:{id:25885,name:"Crimson Strike",label:{zh:""}},MOUNTAIN_BUSTER:{id:25836,name:"Mountain Buster",label:{zh:""}},SLIPSTREAM:{id:25837,name:"Slipstream",label:{zh:""}},SUMMON_IFRIT_II:{id:25838,name:"Summon Ifrit II",label:{zh:" II"}},SUMMON_TITAN_II:{id:25839,name:"Summon Titan II",label:{zh:" II"}},SUMMON_GARUDA_II:{id:25840,name:"Summon Garuda II",label:{zh:" II"}},NECROTIZE:{id:36990,name:"Necrotize",label:{zh:""}},SEARING_FLASH:{id:36991,name:"Searing Flash",label:{zh:""}},SUMMON_SOLAR_BAHAMUT:{id:36992,name:"Summon Solar Bahamut",label:{zh:""}},UMBRAL_IMPULSE:{id:36994,name:"Umbral Impulse",label:{zh:""}},UMBRAL_FLARE:{id:36995,name:"Umbral Flare",label:{zh:""}},SUNFLARE:{id:36996,name:"Sunflare",label:{zh:""}},ENKINDLE_SOLAR_BAHAMUT:{id:36998,name:"Enkindle Solar Bahamut",label:{zh:""}},LUX_SOLARIS:{id:36997,name:"Lux Solaris",label:{zh:""}},INFERNO:{id:25852,name:"Inferno",label:{zh:""}},EARTHEN_FURY:{id:25853,name:"Earthen Fury",label:{zh:""}},AERIAL_BLAST:{id:25854,name:"Aerial Blast",label:{zh:""}},WYRMWAVE:{id:7428,name:"Wyrmwave",label:{zh:""}},SCARLET_FLAME:{id:16519,name:"Scarlet Flame",label:{zh:""}},LUXWAVE:{id:36993,name:"Luxwave",label:{zh:""}},AKH_MORN:{id:7449,name:"Akh Morn",label:{zh:""}},REVELATION:{id:16518,name:"Revelation",label:{zh:""}},EXODUS:{id:36999,name:"Exodus",label:{zh:""}}}),wH=ue()({cd_RADIANT_AEGIS:{name:"cd_RADIANT_AEGIS"},cd_ASTRAL_FLOW:{name:"cd_ASTRAL_FLOW"},cd_ENKINDLE:{name:"cd_ENKINDLE",label:{zh:"CD//"}},cd_DEMI_SUMMON:{name:"cd_DEMI_SUMMON",label:{zh:"CD"}},cd_ENERGY_DRAIN:{name:"cd_ENERGY_DRAIN"},cd_AETHERFLOW:{name:"cd_AETHERFLOW",label:{zh:"CD"}},cd_SEARING_LIGHT:{name:"cd_SEARING_LIGHT"},cd_SEARING_FLASH:{name:"cd_SEARING_FLASH"},cd_LUX_SOLARIS:{name:"cd_LUX_SOLARIS"},cd_MOUNTAIN_BUSTER:{name:"cd_MOUNTAIN_BUSTER"},cd_SUMMON_LOCKOUT:{name:"cd_SUMMON_LOCKOUT"}}),PH=ue()({AETHERFLOW:{name:"Aetherflow",label:{zh:""}},RUBY_ARCANUM:{name:"Ruby Arcanum",label:{zh:""}},TOPAZ_ARCANUM:{name:"Topaz Arcanum",label:{zh:""}},EMERALD_ARCANUM:{name:"Emerald Arcanum",label:{zh:""}},FIRE_ATTUNEMENT:{name:"Fire Attunement",label:{zh:""}},EARTH_ATTUNEMENT:{name:"Earth Attunement",label:{zh:""}},WIND_ATTUNEMENT:{name:"Wind Attunement",label:{zh:""}},ACTIVE_DEMI:{name:"Active Demi",label:{zh:""}}}),TS=ue()({AETHERFLOW:{name:"Aetherflow",maximumStacks:2,label:{zh:""}},CRIMSON_STRIKE_READY:{name:"Crimson Strike Ready",label:{zh:""}},EVERLASTING_FLIGHT:{name:"Everlasting Flight",label:{zh:""}},FURTHER_RUIN:{name:"Further Ruin",label:{zh:""}},GARUDAS_FAVOR:{name:"Garuda's Favor",label:{zh:""}},IFRITS_FAVOR:{name:"Ifrit's Favor",label:{zh:""}},RADIANT_AEGIS:{name:"Radiant Aegis",label:{zh:""}},REFULGENT_LUX:{name:"Refulgent Lux",label:{zh:""}},REKINDLE:{name:"Rekindle",label:{zh:""}},RUBYS_GLIMMER:{name:"Ruby's Glimmer",label:{zh:""}},SEARING_LIGHT:{name:"Searing Light",label:{zh:""}},SLIPSTREAM:{name:"Slipstream",mayBeToggled:!0,label:{zh:""}},TITANS_FAVOR:{name:"Titan's Favor",label:{zh:""}},UNDYING_FLAME:{name:"Undying Flame",label:{zh:""}}}),GH=ue()({NEXT_DEMI_CYCLE:{name:"Next Demi Cycle",label:{zh:""}},DEMI_AUTO:{name:"Demi Auto-attack",label:{zh:""},isPetTracker:!0}}),BH=ue()({RUIN_MASTERY_III:{name:"Ruin Mastery III",level:72},OUTBURST_MASTERY:{name:"Outburst Mastery",level:74},ENHANCED_SUMMON_BAHAMUT:{name:"Enhanced Summon Bahamut",level:80},OUTBURST_MASTERY_II:{name:"Outburst Mastery II",level:82},RUIN_MASTERY_IV:{name:"Ruin Mastery IV",level:84},ELEMENTAL_MASTERY:{name:"Elemental Mastery",level:86},ENHANCED_RADIANT_AEGIS:{name:"Enhanced Radiant Aegis",level:88},ENKINDLE_II:{name:"Enkindle II",level:90},ENHANCED_FESTER:{name:"Enhanced Fester",level:92},ARCANE_MASTERY:{name:"Arcane Mastery",level:94},ENHANCED_SEARING_LIGHT:{name:"Enhanced Searing Light",level:96},ENHANCED_SUMMON_BAHAMUT_II:{name:"Enhanced Summon Bahamut II",level:100}}),FH={...PH,...TS,...GH},jH=ue()({STEEL_FANGS:{id:34606,name:"Steel Fangs",label:{zh:"",ja:""}},HUNTERS_STING:{id:34608,name:"Hunter's Sting",label:{zh:"",ja:""}},REAVING_FANGS:{id:34607,name:"Reaving Fangs",label:{zh:"",ja:""}},WRITHING_SNAP:{id:34632,name:"Writhing Snap",label:{zh:"",ja:""}},SWIFTSKINS_STING:{id:34609,name:"Swiftskin's Sting",label:{zh:"",ja:""}},STEEL_MAW:{id:34614,name:"Steel Maw",label:{zh:"",ja:""}},FLANKSTING_STRIKE:{id:34610,name:"Flanksting Strike",label:{zh:"",ja:""}},FLANKSBANE_FANG:{id:34611,name:"Flanksbane Fang",label:{zh:"",ja:""}},HINDSTING_STRIKE:{id:34612,name:"Hindsting Strike",label:{zh:"",ja:""}},HINDSBANE_FANG:{id:34613,name:"Hindsbane Fang",label:{zh:"",ja:""}},REAVING_MAW:{id:34615,name:"Reaving Maw",label:{zh:"",ja:""}},SLITHER:{id:34646,name:"Slither",label:{zh:"",ja:""}},HUNTERS_BITE:{id:34616,name:"Hunter's Bite",label:{zh:"",ja:""}},SWIFTSKINS_BITE:{id:34617,name:"Swiftskin's Bite",label:{zh:"",ja:""}},JAGGED_MAW:{id:34618,name:"Jagged Maw",label:{zh:"",ja:""}},BLOODIED_MAW:{id:34619,name:"Bloodied Maw",label:{zh:"",ja:""}},SERPENTS_TAIL:{id:35920,name:"Serpent's Tail",label:{zh:"",ja:""}},DEATH_RATTLE:{id:34634,name:"Death Rattle",label:{zh:"",ja:""}},LAST_LASH:{id:34635,name:"Last Lash",label:{zh:"",ja:""}},VICEWINDER:{id:34620,name:"Vicewinder",label:{zh:"",ja:""}},HUNTERS_COIL:{id:34621,name:"Hunter's Coil",label:{zh:"",ja:""}},SWIFTSKINS_COIL:{id:34622,name:"Swiftskin's Coil",label:{zh:"",ja:""}},VICEPIT:{id:34623,name:"Vicepit",label:{zh:"",ja:""}},HUNTERS_DEN:{id:34624,name:"Hunter's Den",label:{zh:"",ja:""}},SWIFTSKINS_DEN:{id:34625,name:"Swiftskin's Den",label:{zh:"",ja:""}},TWINFANG:{id:35921,name:"Twinfang",label:{zh:"",ja:""}},TWINBLOOD:{id:35922,name:"Twinblood",label:{zh:"",ja:""}},TWINFANG_BITE:{id:34636,name:"Twinfang Bite",label:{zh:"",ja:""}},TWINBLOOD_BITE:{id:34637,name:"Twinblood Bite",label:{zh:"",ja:""}},TWINFANG_THRESH:{id:34638,name:"Twinfang Thresh",label:{zh:"",ja:""}},TWINBLOOD_THRESH:{id:34639,name:"Twinblood Thresh",label:{zh:"",ja:""}},UNCOILED_FURY:{id:34633,name:"Uncoiled Fury",label:{zh:"",ja:""}},SERPENTS_IRE:{id:34647,name:"Serpent's Ire",label:{zh:"",ja:""}},REAWAKEN:{id:34626,name:"Reawaken",label:{zh:"",ja:""}},FIRST_GENERATION:{id:34627,name:"First Generation",label:{zh:"",ja:""}},SECOND_GENERATION:{id:34628,name:"Second Generation",label:{zh:"",ja:""}},THIRD_GENERATION:{id:34629,name:"Third Generation",label:{zh:"",ja:""}},FOURTH_GENERATION:{id:34630,name:"Fourth Generation",label:{zh:"",ja:""}},UNCOILED_TWINFANG:{id:34644,name:"Uncoiled Twinfang",label:{zh:"",ja:""}},UNCOILED_TWINBLOOD:{id:34645,name:"Uncoiled Twinblood",label:{zh:"",ja:""}},OUROBOROS:{id:34631,name:"Ouroboros",label:{zh:"",ja:""}},FIRST_LEGACY:{id:34640,name:"First Legacy",label:{zh:"",ja:""}},SECOND_LEGACY:{id:34641,name:"Second Legacy",label:{zh:"",ja:""}},THIRD_LEGACY:{id:34642,name:"Third Legacy",label:{zh:"",ja:""}},FOURTH_LEGACY:{id:34643,name:"Fourth Legacy",label:{zh:"",ja:""}}}),zH=ue()({cd_SERPENTS_IRE:{name:"cd_SerpentsIre"},cd_VICEWINDER:{name:"cd_Vicewinder"},cd_SLITHER:{name:"cd_Slither"},cd_SERPENTS_TAIL:{name:"cd_SerpentsTail"},cd_TWINFANG:{name:"cd_Twinfang"},cd_TWINBLOOD:{name:"cd_Twinblood"}}),YH=ue()({RATTLING_COIL:{name:"Rattling Coil",label:{zh:""}},SERPENT_OFFERINGS:{name:"Serpent Offerings",label:{zh:""}},ANGUINE_TRIBUTE:{name:"Anguine Tribute",label:{zh:""}}}),SS=ue()({HUNTERS_INSTINCT:{name:"Hunter's Instinct",label:{zh:""}},SWIFTSCALED:{name:"Swiftscaled",label:{zh:""}},HONED_STEEL:{name:"Honed Steel",label:{zh:""}},HONED_REAVERS:{name:"Honed Reavers",label:{zh:""}},FLANKSTUNG_VENOM:{name:"Flankstung Venom",label:{zh:""}},HINDSTUNG_VENOM:{name:"Hindstung Venom",label:{zh:""}},FLANKSBANE_VENOM:{name:"Flanksbane Venom",label:{zh:""}},HINDSBANE_VENOM:{name:"Hindsbane Venom",label:{zh:""}},GRIMSKINS_VENOM:{name:"Grimskin's Venom",label:{zh:""}},GRIMHUNTERS_VENOM:{name:"Grimhunter's Venom",label:{zh:""}},HUNTERS_VENOM:{name:"Hunter's Venom",label:{zh:""}},SWIFTSKINS_VENOM:{name:"Swiftskin's Venom",label:{zh:""}},POISED_FOR_TWINFANG:{name:"Poised for Twinfang",label:{zh:""}},POISED_FOR_TWINBLOOD:{name:"Poised for Twinblood",label:{zh:""}},FELLHUNTERS_VENOM:{name:"Fellhunter's Venom",label:{zh:""}},FELLSKINS_VENOM:{name:"Fellskin's Venom",label:{zh:""}},READY_TO_REAWAKEN:{name:"Ready to Reawaken",label:{zh:""}},REAWAKENED:{name:"Reawakened",label:{zh:""},mayNotBeCanceled:!0}}),KH=ue()({VPR_COMBO:{name:"VPR Combo"},DEATH_RATTLE_READY:{name:"Death Rattle Ready"},VPR_AOE_COMBO:{name:"VPR AoE Combo"},LAST_LASH_READY:{name:"Last Lash Ready"},HUNTERS_COIL_READY:{name:"Hunter's Coil Ready"},SWIFTSKINS_COIL_READY:{name:"Swiftskin's Coil Ready"},COIL_OGCD_READY:{name:"Coil oGCD Ready"},HUNTERS_DEN_READY:{name:"Hunter's Den Ready"},SWIFTSKINS_DEN_READY:{name:"Swiftskin's Den Ready"},DEN_OGCD_READY:{name:"Den oGCD Ready"},UNCOILED_OGCD_READY:{name:"Uncoiled oGCD Ready"},REAWAKEN_COMBO:{name:"Reawaken Combo"},LEGACY_READY:{name:"Legacy Ready"}}),VH=ue()({MELEE_MASTERY_VPR:{name:"Melee Mastery VPR",level:74},VIPERS_BITE:{name:"Viper's Bite",level:75},VIPERS_THRESH:{name:"Viper's Thresh",level:80},VIPERS_RATTLE:{name:"Viper's Rattle",level:82},ENHANCED_SLITHER:{name:"Enhanced Slither",level:84},MELEE_MASTERY_II_VPR:{name:"Melee Mastery II VPR",level:84},ENHANCED_VIPERS_RATTLE:{name:"Enhanced Viper's Rattle",level:88},SERPENTS_LINEAGE:{name:"Serpent's Lineage",level:90},UNCOILED_FANGS:{name:"Uncoiled Fangs",level:92},ENHANCED_SERPENTS_LINEAGE:{name:"Enhanced Serpent's Lineage",level:96},SERPENTS_LEGACY:{name:"Serpent's Legacy",level:100}}),WH={...YH,...SS,...KH},XH=ue()({HEAVY_SWING:{id:31,name:"Heavy Swing",label:{zh:""}},MAIM:{id:37,name:"Maim",label:{zh:""}},STORMS_PATH:{id:42,name:"Storm's Path",label:{zh:""}},STORMS_EYE:{id:45,name:"Storm's Eye",label:{zh:""}},FELL_CLEAVE:{id:3549,name:"Fell Cleave",label:{zh:""}},UPHEAVAL:{id:7387,name:"Upheaval",label:{zh:""}},ONSLAUGHT:{id:7386,name:"Onslaught",label:{zh:""}},TOMAHAWK:{id:46,name:"Tomahawk",label:{zh:""}},OVERPOWER:{id:41,name:"Overpower",label:{zh:""}},MYTHRIL_TEMPEST:{id:16462,name:"Mythril Tempest",label:{zh:""}},DECIMATE:{id:3550,name:"Decimate",label:{zh:""}},OROGENY:{id:25752,name:"Orogeny",label:{zh:""}},INNER_RELEASE:{id:7389,name:"Inner Release",label:{zh:""}},PRIMAL_WRATH:{id:36924,name:"Primal Wrath",label:{zh:""}},PRIMAL_REND:{id:25753,name:"Primal Rend",label:{zh:""}},PRIMAL_RUINATION:{id:36925,name:"Primal Ruination",label:{zh:""}},INFURIATE:{id:52,name:"Infuriate",label:{zh:""}},INNER_CHAOS:{id:16465,name:"Inner Chaos",label:{zh:""}},CHAOTIC_CYCLONE:{id:16463,name:"Chaotic Cyclone",label:{zh:""}},THRILL_OF_BATTLE:{id:40,name:"Thrill of Battle",label:{zh:""}},EQUILIBRIUM:{id:3552,name:"Equilibrium",label:{zh:""}},SHAKE_IT_OFF:{id:7388,name:"Shake It Off",label:{zh:""}},RAW_INTUITION:{id:3551,name:"Raw Intuition",label:{zh:""}},NASCENT_FLASH:{id:16464,name:"Nascent Flash",label:{zh:""}},BLOODWHETTING:{id:25751,name:"Bloodwhetting",label:{zh:""}},VENGEANCE:{id:44,name:"Vengeance",label:{zh:""}},DAMNATION:{id:36923,name:"Damnation",label:{zh:""}},HOLMGANG:{id:43,name:"Holmgang",label:{zh:""}},RETALIATION:{name:"Retaliation",label:{zh:""}},DEFIANCE:{id:48,name:"Defiance",label:{zh:""}},RELEASE_DEFIANCE:{id:32066,name:"Release Defiance",label:{zh:""}}}),qH=ue()({cd_INNER_RELEASE:{name:"cd_InnerRelease"},cd_PRIMAL_WRATH:{name:"cd_PrimalWrath"},cd_UPHEAVAL:{name:"cd_Upheaval"},cd_ONSLAUGHT:{name:"cd_Onslaught"},cd_INFURIATE:{name:"cd_Infuriate"},cd_VENGEANCE:{name:"cd_Vengeance"},cd_THRILL_OF_BATTLE:{name:"cd_ThrillOfBattle"},cd_RAW_INTUITION:{name:"cd_RawIntuition"},cd_EQUILIBRIUM:{name:"cd_Equilibrium"},cd_SHAKE_IT_OFF:{name:"cd_ShakeItOff"},cd_HOLMGANG:{name:"cd_Holmgang"},cd_RETALIATION:{name:"cd_Retaliation"},cd_DEFIANCE:{name:"cd_Defiance"},cd_RELEASE_DEFIANCE:{name:"cd_ReleaseDefiance"}}),ZH=ue()({BEAST_GAUGE:{name:"Beast Gauge",label:{zh:""}}}),gS=ue()({SURGING_TEMPEST:{name:"Surging Tempest",label:{zh:"buff"}},INNER_RELEASE:{name:"Inner Release",label:{zh:"buff"},maximumStacks:3},INNER_STRENGTH:{name:"Inner Strength",label:{zh:"buff"}},BURGEONING_FURY:{name:"Burgeoning Fury",label:{zh:"buff"},maximumStacks:3},WRATHFUL:{name:"Wrathful",label:{zh:""}},PRIMAL_REND_READY:{name:"Primal Rend Ready",label:{zh:""}},PRIMAL_RUINATION_READY:{name:"Primal Ruination Ready",label:{zh:""}},NASCENT_CHAOS:{name:"Nascent Chaos",label:{zh:"buff"}},NASCENT_FLASH:{name:"Nascent Flash",label:{zh:"buff"}},THRILL_OF_BATTLE:{name:"Thrill of Battle",label:{zh:""}},EQUILIBRIUM:{name:"Equilibrium",label:{zh:"hot"}},SHAKE_IT_OFF:{name:"Shake It Off",label:{zh:""}},SHAKE_IT_OFF_OVER_TIME:{name:"Shake It Off Over Time",label:{zh:"hot"}},RAW_INTUITION:{name:"Raw Intuition",label:{zh:"buff"}},STEM_THE_TIDE:{name:"Stem the Tide",label:{zh:"buff"}},STEM_THE_FLOW:{name:"Stem the Flow",label:{zh:"buff"}},BLOODWHETTING:{name:"Bloodwhetting",label:{zh:"buff"}},VENGEANCE:{name:"Vengeance",label:{zh:"30"}},DAMNATION:{name:"Damnation",label:{zh:"40"}},PRIMEVAL_IMPULSE:{name:"Primeval Impulse",label:{zh:"hot"}},HOLMGANG:{name:"Holmgang",label:{zh:"buff"}},DEFIANCE:{name:"Defiance",label:{zh:"buff"},mayNotBeCanceled:!0}}),$H=ue()({STORM_COMBO:{name:"Storm Combo",label:{zh:""}},TEMPEST_COMBO:{name:"Tempest Combo",label:{zh:"aoe"}}}),QH=ue()({NASCENT_CHAOS:{name:"Nascent Chaos",level:72},MASTERING_THE_BEAST:{name:"Mastering the Beast",level:74},ENHANCED_SHAKE_IT_OFF:{name:"Enhanced Shake It Off",level:76},ENHANCED_THRILL_OF_BATTLE:{name:"Enhanced Thrill of Battle",level:78},RAW_INTUITION_MASTERY:{name:"Raw Intuition Mastery",level:82},ENHANCED_NASCENT_FLASH:{name:"Enhanced Nascent Flash",level:82},ENHANCED_EQUILIBRIUM:{name:"Enhanced Equilibrium",level:84},ENHANCED_ONSLAUGHT:{name:"Enhanced Onslaught",level:88},VENGEANCE_MASTERY:{name:"Vengeance Mastery",level:92},ENHANCED_INNER_RELEASE:{name:"Enhanced Inner Release",level:96},ENHANCED_PRIMAL_REND:{name:"Enhanced Primal Rend",level:100}}),JH={...ZH,...gS,...$H},ek=ue()({CURE:{id:120,name:"Cure",label:{zh:"",ja:""}},MEDICA:{id:124,name:"Medica",label:{zh:"",ja:""}},RAISE:{id:125,name:"Raise",label:{zh:"",ja:""}},CURE_II:{id:135,name:"Cure II",label:{zh:"",ja:""}},PRESENCE_OF_MIND:{id:136,name:"Presence of Mind",label:{zh:"",ja:""}},REGEN:{id:137,name:"Regen",label:{zh:"",ja:""}},CURE_III:{id:131,name:"Cure III",label:{zh:"",ja:""}},AETHERIAL_SHIFT:{id:37008,name:"Aetherial Shift",label:{zh:"",ja:""}},HOLY:{id:139,name:"Holy",label:{zh:"",ja:""}},AERO_II:{id:132,name:"Aero II",label:{zh:"",ja:""}},MEDICA_II:{id:133,name:"Medica II",label:{zh:"",ja:""}},BENEDICTION:{id:140,name:"Benediction",label:{zh:"",ja:""}},AFFLATUS_SOLACE:{id:16531,name:"Afflatus Solace",label:{zh:"",ja:""}},ASYLUM:{id:3569,name:"Asylum",label:{zh:"",ja:""}},ASSIZE:{id:3571,name:"Assize",label:{zh:"",ja:""}},THIN_AIR:{id:7430,name:"Thin Air",label:{zh:"",ja:""}},TETRAGRAMMATON:{id:3570,name:"Tetragrammaton",label:{zh:"",ja:""}},STONE_IV:{id:7431,name:"Stone IV",label:{zh:"",ja:""}},DIVINE_BENISON:{id:7432,name:"Divine Benison",label:{zh:"",ja:""}},PLENARY_INDULGENCE:{id:7433,name:"Plenary Indulgence",label:{zh:"",ja:""}},DIA:{id:16532,name:"Dia",label:{zh:"",ja:""}},GLARE:{id:16533,name:"Glare",label:{zh:"",ja:""}},AFFLATUS_MISERY:{id:16535,name:"Afflatus Misery",label:{zh:"",ja:""}},AFFLATUS_RAPTURE:{id:16534,name:"Afflatus Rapture",label:{zh:"",ja:""}},TEMPERANCE:{id:16536,name:"Temperance",label:{zh:"",ja:""}},GLARE_III:{id:25859,name:"Glare III",label:{zh:"",ja:""}},HOLY_III:{id:25860,name:"Holy III",label:{zh:"",ja:""}},AQUAVEIL:{id:25861,name:"Aquaveil",label:{zh:"",ja:""}},LITURGY_OF_THE_BELL:{id:25862,name:"Liturgy of the Bell",label:{zh:"",ja:""}},LITURGY_POP:{name:"Pop Liturgy of the Bell",label:{zh:""}},LITURGY_TRIGGER:{name:"Trigger Liturgy of the Bell",label:{zh:""}},GLARE_IV:{id:37009,name:"Glare IV",label:{zh:"",ja:""}},MEDICA_III:{id:37010,name:"Medica III",label:{zh:"",ja:""}},DIVINE_CARESS:{id:37011,name:"Divine Caress",label:{zh:"",ja:""}}}),tk=ue()({cd_PRESENCE_OF_MIND:{name:"cd_PresenceOfMind"},cd_AETHERIAL_SHIFT:{name:"cd_AetherialShift"},cd_BENEDICTION:{name:"cd_Benediction"},cd_ASYLUM:{name:"cd_Asylum"},cd_ASSIZE:{name:"cd_Assize"},cd_THIN_AIR:{name:"cd_ThinAir"},cd_TETRAGRAMMATON:{name:"cd_Tetragrammaton"},cd_DIVINE_BENISON:{name:"cd_DivineBenison"},cd_PLENARY_INDULGENCE:{name:"cd_PlenaryIndulgence"},cd_TEMPERANCE:{name:"cd_Temperance"},cd_AQUAVEIL:{name:"cd_Aquaveil"},cd_LITURGY_OF_THE_BELL:{name:"cd_LiturgyOfTheBell"},cd_LITURGY_POP:{name:"cd_LiturgyPop"},cd_LITURGY_TRIGGER:{name:"cd_LiturgyTrigger"},cd_DIVINE_CARESS:{name:"cd_DivineCaress"}}),nk=ue()({LILLIES:{name:"Lillies",maximumCharges:3,label:{zh:""}},LILY_TIMER:{name:"Lily Timer",label:{zh:""}},BLOOD_LILY:{name:"Blood Lily",maximumCharges:3,label:{zh:""}}}),IS=ue()({FREECURE:{name:"Freecure",label:{zh:""}},PRESENCE_OF_MIND:{name:"Presence of Mind",label:{zh:""}},SACRED_SIGHT:{name:"Sacred Sight",maximumStacks:3,label:{zh:""}},REGEN:{name:"Regen",label:{zh:""}},AERO_II:{name:"Aero II",label:{zh:""}},MEDICA_II:{name:"Medica II",label:{zh:""}},ASYLUM:{name:"Asylum",mayBeToggled:!0,label:{zh:""}},THIN_AIR:{name:"Thin Air",label:{zh:""}},DIVINE_BENISON:{name:"Divine Benison",label:{zh:""}},CONFESSION:{name:"Confession",label:{zh:""}},DIA:{name:"Dia",label:{zh:""}},TEMPERANCE:{name:"Temperance",label:{zh:""}},DIVINE_GRACE:{name:"Divine Grace",label:{zh:""}},AQUAVEIL:{name:"Aquaveil",label:{zh:""}},LITURGY_OF_THE_BELL:{name:"Liturgy of the Bell",maximumStacks:5,mayNotBeCanceled:!0,label:{zh:""}},MEDICA_III:{name:"Medica III",label:{zh:""}},DIVINE_CARESS:{name:"Divine Caress",label:{zh:""}},DIVINE_AURA:{name:"Divine Aura",label:{zh:""}}}),ik=ue()({}),ak=ue()({AERO_MASTERY_II:{name:"Aero Mastery II",level:72},STONE_MASTERY_IV:{name:"Stone Mastery IV",level:72},TRANSCENDENT_AFFLATUS:{name:"Transcendent Afflatus",level:74},ENHANCED_ASYLUM:{name:"Enhanced Asylum",level:78},GLARE_MASTERY:{name:"Glare Mastery",level:82},HOLY_MASTERY:{name:"Holy Mastery",level:82},ENHANCED_DIVINE_BENISON:{name:"Enhanced Divine Benison",level:88},ENHANCED_PRESENCE_OF_MIND:{name:"Enhanced Presence of Mind",level:92},WHITE_MAGIC_MASTERY:{name:"White Magic Mastery",level:94},MEDICA_MASTERY:{name:"Medica Mastery",level:96},ENHANCED_TETRAGRAMMATON:{name:"Enhanced Tetragrammaton",level:98},ENHANCED_TEMPERANCE:{name:"Enhanced Temperance",level:100}}),ok={...nk,...IS,...ik},lk=ue()({WATER_CANNON:{name:"Water Cannon",label:{zh:"(2200)"},id:11385},SONIC_BOOM:{name:"Sonic Boom",label:{zh:"(1210)"},id:18308},SHARPENED_KNIFE:{name:"Sharpened Knife",label:{zh:"(1220)"},id:11400},HYDRO_PULL:{name:"Hydro Pull",label:{zh:"(2220)"},id:23282},MOON_FLUTE:{name:"Moon Flute",label:{zh:""},id:11415},DIAMONDBACK:{name:"Diamondback",label:{zh:""},id:11424},SONG_OF_TORMENT:{name:"Song of Torment",label:{zh:""},id:11386},WHISTLE:{name:"Whistle",label:{zh:""},id:18309},BRISTLE:{name:"Bristle",label:{zh:""},id:11393},TINGLE:{name:"Tingle",label:{zh:""},id:23265},FINAL_STING:{name:"Final Sting",label:{zh:""},id:11407},COLD_FOG:{name:"Cold Fog",label:{zh:""},id:23267},WHITE_DEATH:{name:"White Death",label:{zh:""},id:23268},POP_COLD_FOG:{name:"Pop Cold Fog",label:{zh:""}},PHANTOM_FLURRY:{name:"Phantom Flurry",label:{zh:""},id:23288},END_PHANTOM_FLURRY:{name:"End Phantom Flurry",label:{zh:""},id:23289},MATRA_MAGIC:{name:"Matra Magic",label:{zh:""},id:23285},WINGED_REPROBATION:{name:"Winged Reprobation",label:{zh:""},id:34576},CONVICTION_MARCATO:{name:"Conviction Marcato",label:{zh:""},id:34574},REVENGE_BLAST:{name:"Revenge Blast",label:{zh:""},id:18316},WILD_RAGE:{name:"Wild Rage",label:{zh:""},id:34568},GOBLIN_PUNCH:{name:"Goblin Punch",label:{zh:""},id:34563},THE_ROSE_OF_DESTRUCTION:{name:"The Rose of Destruction",label:{zh:""},id:23275},ERUPTION:{name:"Eruption",label:{zh:""},id:11427},FEATHER_RAIN:{name:"Feather Rain",label:{zh:""},id:11426},MOUNTAIN_BUSTER:{name:"Mountain Buster",label:{zh:""},id:11428},SHOCK_STRIKE:{name:"Shock Strike",label:{zh:""},id:11429},GLASS_DANCE:{name:"Glass Dance",label:{zh:""},id:11430},QUASAR:{name:"Quasar",label:{zh:""},id:18324},J_KICK:{name:"J Kick",label:{zh:""},id:18325},TRIPLE_TRIDENT:{name:"Triple Trident",label:{zh:""},id:23264},BOTH_ENDS:{name:"Both Ends",label:{zh:""},id:23287},NIGHTBLOOM:{name:"Nightbloom",label:{zh:""},id:23290},SEA_SHANTY:{name:"Sea Shanty",label:{zh:""},id:34580},APOKALYPSIS:{name:"Apokalypsis",label:{zh:""},id:34581},BEING_MORTAL:{name:"Being Mortal",label:{zh:""},id:34582},BREATH_OF_MAGIC:{name:"Breath of Magic",label:{zh:""},id:34567},MORTAL_FLAME:{name:"Mortal Flame",label:{zh:""},id:34579},SURPANAKHA:{name:"Surpanakha",label:{zh:""},id:18323}}),sk=ue()({cd_ERUPTION:{name:"cd_Eruption",label:{zh:"CD: /"}},cd_SHOCK_STRIKE:{name:"cd_Shock_Strike",label:{zh:"CD: /"}},cd_GLASS_DANCE:{name:"cd_Glass_Dance",label:{zh:"CD: "}},cd_SURPANAKHA:{name:"cd_Surpanakha",label:{zh:"CD: "}},cd_QUASAR:{name:"cd_Quasar",label:{zh:"CD: /"}},cd_NIGHTBLOOM:{name:"cd_Nightbloom",label:{zh:"CD: /"}},cd_SEA_SHANTY:{name:"cd_Sea_Shanty",label:{zh:"CD: "}},cd_BEING_MORTAL:{name:"cd_Being_Mortal",label:{zh:"CD: /"}},cd_COLD_FOG:{name:"cd_Cold_Fog",label:{zh:"CD: "}},cd_TRIPLE_TRIDENT:{name:"cd_Triple_Trident",label:{zh:"CD: "}},cd_PHANTOM_FLURRY:{name:"cd_Phantom_Flurry",label:{zh:"CD: "}},cd_COLD_FOG_POP:{name:"cd_Cold_Fog_Pop",label:{zh:"CD: "}},cd_MATRA_MAGIC:{name:"cd_Matra_Magic",label:{zh:"CD: "}},cd_WINGED_REPROBATION:{name:"cd_Winged_Reprobation",label:{zh:"CD: "}},cd_THE_ROSE_OF_DESTRUCTION:{name:"cd_The_Rose_of_Destruction",label:{zh:"CD: "}},cd_SURPANAKHA_LOCKOUT:{name:"cd_SurpanakhaLockout",label:{zh:"CD: "}}}),rk=ue()({}),_S=ue()({NIGHTBLOOM:{name:"Bleeding",label:{zh:""}},SONG_OF_TORMENT:{name:"Bleeding",label:{zh:""}},FEATHER_RAIN:{name:"Feather Rain",label:{zh:""}},WAXING_NOCTURNE:{name:"Waxing Nocturne",label:{zh:""}},WANING_NOCTURNE:{name:"Waning Nocturne",label:{zh:""}},WHISTLE:{name:"Whistle",label:{zh:""}},BRISTLE:{name:"Bristle",label:{zh:""}},TINGLE:{name:"Tingle",label:{zh:""}},COLD_FOG:{name:"Cold Fog",label:{zh:""}},TOUCH_OF_FROST:{name:"Touch of Frost",label:{zh:""}},PHANTOM_FLURRY:{name:"Phantom Flurry",label:{zh:""}},DIAMONDBACK:{name:"Diamondback",label:{zh:""}},APOKALYPSIS:{name:"Apokalypsis",label:{zh:""}},WINGED_REDEMPTION:{name:"Winged Redemption",label:{zh:""}},BREATH_OF_MAGIC:{name:"Breath of Magic",label:{zh:""}},MORTAL_FLAME:{name:"Mortal Flame",label:{zh:""}},WINGED_REPROBATION:{name:"Winged Reprobation",label:{zh:""},maximumStacks:4},SURPANAKHAS_FURY:{name:"Surpanakha's Fury",label:{zh:""},maximumStacks:4},BRUSH_WITH_DEATH:{name:"Brush with Death",label:{zh:""}}}),ck=ue()({SURPANAKHA_LOCKOUT:{name:"Supranakha Lockout",label:{zh:""}}}),uk=ue()({}),dk={...rk,..._S,...ck},hk=ue()({NEVER:{name:"NEVER"},TINCTURE:{name:"Tincture",label:{zh:"",ja:""}},SPRINT:{id:3,name:"Sprint",label:{zh:"",ja:""}}}),fk=ue()({NEVER:{name:"Never"},cd_GCD:{name:"cd_GCD",label:{zh:"GCD"}},cd_TINCTURE:{name:"cd_Tincture"},cd_SPRINT:{name:"cd_Sprint"}}),Ek=ue()({MANA:{name:"Mana",label:{zh:"MP"}}}),mk=ue()({TINCTURE:{name:"Tincture",label:{zh:""}},SPRINT:{name:"Sprint",label:{zh:""}}}),Ak=ue()({MOVEMENT:{name:"Movement"},NOT_ANIMATION_LOCKED:{name:"NotAnimationLocked"},NOT_CASTER_TAXED:{name:"NotCasterTaxed"},IN_COMBAT:{name:"InCombat",label:{zh:""}},AUTOS_ENGAGED:{name:"Autos Engaged"},STORED_AUTO:{name:"Stored Auto"},PARTY_SIZE:{name:"PartySize",label:{zh:""}},NEVER:{name:"Never"}}),Rk=ue()({NEVER:{name:"Never",level:1}}),Tk={...Ek,...mk,...Ak},Sk=ue()({LAST_BASTION:{id:199,name:"Last Bastion",label:{zh:""}},LAND_WAKER:{id:4240,name:"Land Waker",label:{zh:""}},DARK_FORCE:{id:4241,name:"Dark Force",label:{zh:""}},GUNMETAL_SOUL:{id:17105,name:"Gunmetal Soul",label:{zh:""}}}),gk=ue()({PULSE_OF_LIFE:{id:208,name:"Pulse of Life"},ANGEL_FEATHERS:{id:4247,name:"Angel Feathers"},ASTRAL_STASIS:{id:4248,name:"Astral Stasis"},TECHNE_MAKRE:{id:24859,name:"Techne Makre"}}),Ik=ue()({FINAL_HEAVEN:{id:202,name:"Final Heaven"},DRAGONSONG_DIVE:{id:4242,name:"Dragonsong Dive"},CHIMATSURI:{id:4243,name:"Chimatsuri"},DOOM_OF_THE_LIVING:{id:7861,name:"Doom of the Living"},THE_END:{id:24858,name:"The End"},WORLD_SWALLOWER:{id:34866,name:"World-swallower"}}),_k=ue()({SAGITTARIUS_ARROW:{id:4244,name:"Sagittarius Arrow"},SATELLITE_BEAM:{id:4245,name:"Satellite Beam"},CRIMSON_LOTUS:{id:17106,name:"Crimson Lotus"}}),pk=ue()({METEOR:{id:205,name:"Meteor"},TERAFLARE:{id:3009,name:"Teraflare"},VERMILLION_SCOURGE:{id:7862,name:"Vermillion Scourge"},CHROMATIC_FANTASY:{id:34867,name:"Chromatic Fantasy"}}),Nk=ue()({LAST_BASTION:{name:"Last Bastion",label:{zh:"LB3 buff"}},LAND_WAKER:{name:"Land Waker",label:{zh:"LB3 buff"}},DARK_FORCE:{name:"Dark Force",label:{zh:"LB3 buff"}},GUNMETAL_SOUL:{name:"Gunmetal Soul",label:{zh:"LB3 buff"}}}),Ck=ue()({cd_LIMIT_BREAK_1:{name:"cd_LIMIT_BREAK_1",label:{zh:"CDLB"}},cd_LIMIT_BREAK_2:{name:"cd_LIMIT_BREAK_2",label:{zh:"CDLB"}},cd_LIMIT_BREAK_3:{name:"cd_LIMIT_BREAK_3",label:{zh:"CDLB"}}}),bk=ue()({UNKNOWN:{name:"Unknown"},SHIELD_WALL:{id:197,name:"Shield Wall"},STRONGHOLD:{id:198,name:"Stronghold"},HEALING_WIND:{id:206,name:"Healing Wind"},BREATH_OF_THE_EARTH:{id:207,name:"Breath of the Earth"},BRAVER:{id:200,name:"Braver"},BLADEDANCE:{id:201,name:"Bladedance"},BIGSHOT:{id:4238,name:"Big Shot"},DESPERADO:{id:4239,name:"Desperado"},SKYSHARD:{id:203,name:"Skyshard"},STARSTORM:{id:204,name:"Starstorm"}}),wb=ue()({UNKNOWN:{name:"Unknown"},SHIELD_WALL:{name:"Shield Wall",label:{zh:"LB1 buff"}},STRONGHOLD:{name:"Stronghold",label:{zh:"LB2 buff"}}}),Ok={...Sk,...gk,...Ik,..._k,...pk},Zo={...bk,...Ok},Pb={...wb,...Nk},Dk=ue()({ARMS_LENGTH:{id:7548,name:"Arm's Length",label:{zh:""}},SECOND_WIND:{id:7541,name:"Second Wind",label:{zh:""}},HEAD_GRAZE:{id:7551,name:"Head Graze",label:{zh:""}},ESUNA:{id:7568,name:"Esuna",label:{zh:""}},RESCUE:{id:7571,name:"Rescue",label:{zh:""}},ADDLE:{id:7560,name:"Addle",label:{zh:"",ja:""},discordEmote:"Addle"},SWIFTCAST:{id:7561,name:"Swiftcast",label:{zh:"",ja:""}},LUCID_DREAMING:{id:7562,name:"Lucid Dreaming",label:{zh:"",ja:""},discordEmote:"Lucid"},SURECAST:{id:7559,name:"Surecast",label:{zh:"",ja:""},discordEmote:"Surecast"},FEINT:{id:7549,name:"Feint",label:{zh:""}},BLOODBATH:{id:7542,name:"Bloodbath",label:{zh:""}},TRUE_NORTH:{id:7546,name:"True North",label:{zh:""}},LEG_SWEEP:{id:7863,name:"Leg Sweep",label:{zh:""}},RAMPART:{id:7531,name:"Rampart",label:{zh:""}},REPRISAL:{id:7535,name:"Reprisal",label:{zh:""}},LOW_BLOW:{id:7540,name:"Low Blow",label:{zh:""}},INTERJECT:{id:7538,name:"Interject",label:{zh:""}},PROVOKE:{id:7533,name:"Provoke",label:{zh:""}},SHIRK:{id:7537,name:"Shirk",label:{zh:""}},FOOT_GRAZE:{id:7553,name:"Foot Graze",label:{zh:""}},LEG_GRAZE:{id:7554,name:"Leg Graze",label:{zh:""}}}),yk=ue()({cd_ADDLE:{name:"cd_Addle"},cd_SWIFTCAST:{name:"cd_Swiftcast"},cd_LUCID_DREAMING:{name:"cd_LucidDreaming"},cd_SURECAST:{name:"cd_Surecast"},cd_SECOND_WIND:{name:"cd_SecondWind"},cd_ARMS_LENGTH:{name:"cd_ArmsLength"},cd_RESCUE:{name:"cd_Rescue"},cd_FEINT:{name:"cd_Feint"},cd_TRUE_NORTH:{name:"cd_TrueNorth"},cd_BLOODBATH:{name:"cd_Bloodbath"},cd_LEG_SWEEP:{name:"cd_LegSweep"},cd_RAMPART:{name:"cd_Rampart"},cd_REPRISAL:{name:"cd_Reprisal"},cd_LOW_BLOW:{name:"cd_LowBlow"},cd_INTERJECT:{name:"cd_Interject"},cd_PROVOKE:{name:"cd_Provoke"},cd_SHIRK:{name:"cd_Shirk"},cd_HEAD_GRAZE:{name:"cd_HeadGraze"},cd_LEG_GRAZE:{name:"cd_LegGraze"},cd_FOOT_GRAZE:{name:"cd_FootGraze"}}),vk=ue()({ADDLE:{name:"Addle",label:{zh:""}},SWIFTCAST:{name:"Swiftcast",label:{zh:""}},LUCID_DREAMING:{name:"Lucid Dreaming",label:{zh:""}},SURECAST:{name:"Surecast",label:{zh:""}},ARMS_LENGTH:{name:"Arms Length",label:{zh:""}},FEINT:{name:"Feint",label:{zh:""}},TRUE_NORTH:{name:"True North",label:{zh:""}},BLOODBATH:{name:"Bloodbath",label:{zh:""}},RAMPART:{name:"Rampart",label:{zh:"buff"}},REPRISAL:{name:"Reprisal",label:{zh:"buff"}}}),Mk=ue()({REAR_POSITIONAL:{name:"Rear Positional",label:{zh:""},mayBeToggled:!0},FLANK_POSITIONAL:{name:"Flank Positional",label:{zh:""},mayBeToggled:!0},AUTOS_ENGAGED:{name:"Autos Engaged",mayBeToggled:!0}}),Lk=ue()({ENHANCED_SWIFTCAST:{name:"Enhanced Swiftcast",level:94},ENHANCED_ADDLE:{name:"Enhanced Addle",level:98},ENHANCED_HEALING_MAGIC:{name:"Enhanced Healing Magic",level:85},MAGICK_MASTERY_HEALER:{name:"Magick Mastery",level:94},ENHANCED_SECOND_WIND:{name:"Enhanced Second Wind",level:94},ENHANCED_FEINT:{name:"Enhanced Feint",level:98},MELEE_MASTERY_TANK:{name:"Melee Mastery",level:84},ENHANCED_RAMPART:{name:"Enhanced Rampart",level:94},MELEE_MASTERY_II_TANK:{name:"Melee Mastery II",level:94},ENHANCED_REPRISAL:{name:"Enhanced Reprisal",level:98}}),Gb={...vk,...Mk},bn={...hk,...Dk,...Zo,...nH,...XH,...Ix,...Ox,...ek,...AS,...K1,...MH,...Gx,...mx,...Yx,...gH,...EH,...jH,...ix,...xx,...cx,...$1,...Ub,...rH,...Zx,...lk},Gs={...fk,...yk,...Ck,...iH,...qH,..._x,...Dx,...tk,...bH,...V1,...LH,...Bx,...Ax,...Kx,...IH,...mH,...zH,...ax,...Hx,...ux,...Q1,...wH,...cH,...$x,...sk},Ke={...Tk,...Gb,...Pb,...sH,...JH,...bx,...Lx,...ok,...vH,...Z1,...UH,...Hb,...gx,...qx,...CH,...SH,...WH,...rx,...Px,...Ex,...nx,...FH,...fH,...tH,...dk},OR={...Rk,...Lk,...lH,...QH,...Cx,...Mx,...ak,...yH,...q1,...kH,...zx,...Sx,...Xx,...NH,...TH,...VH,...sx,...wx,...fx,...tx,...BH,...hH,...eH,...uk},_n={epsilon:1e-6};var ot=(e=>(e[e.lvl70=70]="lvl70",e[e.lvl80=80]="lvl80",e[e.lvl90=90]="lvl90",e[e.lvl100=100]="lvl100",e))(ot||{});const xk=.1;var Ne=(e=>(e.Fire="Fire",e.Ice="Ice",e.Lightning="Lightning",e.Wind="Wind",e.Earth="Earth",e.Physical="Physical",e.Other="Other",e))(Ne||{}),Si=(e=>(e.RNG="RNG",e.Never="Never",e.Always="Always",e))(Si||{}),gt=(e=>(e.Blocked="blocked by CD, animation lock or caster tax",e.SecondaryBlocked="blocked by secondary CD",e.NotEnoughMP="not enough MP",e.NotInCombat="not in combat (must wait for first damage application)",e.RequirementsNotMet="skill requirements not satisfied",e.SkillNotUnlocked="skill not unlocked at provided level",e.BuffNoLongerAvailable="buff no longer available",e.PastTargetTime="jump target time has already passed",e.CastCanceled="cast canceled (skill requirements no longer met at confirmation time)",e.UnknownSkill="unknown skill",e))(gt||{});function ed(){return{unavailableReasons:[],ready:function(){return this.unavailableReasons.length===0},toString:function(){return this.ready()?"ready":this.unavailableReasons.join("; ")},addUnavailableReason:function(e){this.unavailableReasons.includes(e)||this.unavailableReasons.push(e)},clone:function(){const e=ed();return this.unavailableReasons.forEach(t=>e.addUnavailableReason(t)),e}}}var U=(e=>(e.LeyLines="Ley Lines",e.Hyperphantasia="Hyperphantasia",e.Acceleration="Acceleration",e.Fuka="Fuka",e.Fugetsu="Fugetsu",e.EnhancedEnpi="Enhanced Enpi",e.NoMercy="No Mercy",e.PowerSurge="Power Surge",e.LanceCharge="Lance Charge",e.LifeOfTheDragon="Life Of The Dragon",e.EnhancedPiercingTalon="Enhanced Piercing Talon",e.LifeSurge="Life Surge",e.DivineMight="Divine Might",e.Requiescat="Requiescat",e.FightOrFlight="Fight Or Flight",e.Tincture="Tincture",e.ArcaneCircle="Arcane Circle",e.ArmysPaeon="Army's Paeon",e.BattleLitany="Battle Litany",e.BattleVoice="Battle Voice",e.Brotherhood="Brotherhood",e.Card_TheBalance="Card - The Balance",e.Card_TheSpear="Card - The Spear",e.ChainStratagem="Chain Stratagem",e.Devilment="Devilment",e.Divination="Divination",e.Dokumori="Dokumori",e.Embolden="Embolden",e.MagesBallad="Mage's Ballad",e.RadiantFinale1="Radiant Finale (1)",e.RadiantFinale2="Radiant Finale (2)",e.RadiantFinale3="Radiant Finale (3)",e.Barrage="Barrage",e.SearingLight="Searing Light",e.StandardFinish="Standard Finish",e.StarryMuse="Starry Muse",e.TechnicalFinish="Technical Finish",e.WanderersMinuet="The Wanderer's Minuet",e.RagingStrikes="Raging Strikes",e.DeathsDesign="Death's Design",e.Zoe="Zoe",e.Autophysis="Autophysis",e.Krasis="Krasis",e.Philosophia="Philosophia",e.Soteria="Soteria",e.WaxingNocturne="Waxing Nocturne",e.Whistle="Whistle",e.Bristle="Bristle",e.TingleA="TingleA",e.TingleB="TingleB",e.TrickAttack="Trick Attack",e.KunaisBane="Kunai's Bane",e.Bunshin="Bunshin",e.RiddleOfFire="Riddle of Fire",e.TheArrow="The Arrow",e.NeutralSect="Neutral Sect",e.Synastry="Synastry",e.Confession="Confession",e.Asylum="Asylum",e.Temperance="Temperance",e.HuntersInstinct="Hunter's Instinct",e.Swiftscaled="Swiftscaled",e.FeyIllumination="Fey Illumination",e.Dissipation="Dissipation",e.Protraction="Protraction",e.Recitation="Recitation",e))(U||{});function Hk(e){return ya({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93 6h-2.95a15.65 15.65 0 0 0-1.38-3.56A8.03 8.03 0 0 1 18.92 8zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56A7.987 7.987 0 0 1 5.08 16zm2.95-8H5.08a7.987 7.987 0 0 1 4.33-3.56A15.65 15.65 0 0 0 8.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2zm.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95a8.03 8.03 0 0 1-4.33 3.56zM16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.38z"},child:[]}]})(e)}function kk(e){return ya({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 3a9 9 0 1 0 9 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 0 1-4.4 2.26 5.403 5.403 0 0 1-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"},child:[]}]})(e)}function Uk(e){return ya({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58a.996.996 0 0 0-1.41 0 .996.996 0 0 0 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37a.996.996 0 0 0-1.41 0 .996.996 0 0 0 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0a.996.996 0 0 0 0-1.41l-1.06-1.06zm1.06-10.96a.996.996 0 0 0 0-1.41.996.996 0 0 0-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36a.996.996 0 0 0 0-1.41.996.996 0 0 0-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z"},child:[]}]})(e)}function DR(e,t){const n=Math.pow(10,t);return Math.floor(e*n)/n}var Wa,Bb,Fb,jb,hT;const zo=class zo{static getMainstatBase(t){switch(t){case ot.lvl70:return 292;case ot.lvl80:return 340;case ot.lvl90:return 390;case ot.lvl100:return 440}}static getSubstatBase(t){switch(t){case ot.lvl70:return 364;case ot.lvl80:return 380;case ot.lvl90:return 400;case ot.lvl100:return 420}}static getStatDiv(t){switch(t){case ot.lvl70:return 900;case ot.lvl80:return 1300;case ot.lvl90:return 1900;case ot.lvl100:return 2780}}static calculateDamage(t,n,a,s,c,d,f){var L,j,Z,J,se;let h=c;const m=d>=1?d:d<0?0:zo.criticalHitRate(t,n)+d,R=f>=1?f:f<0?0:Oe(L=zo,Wa,Fb).call(L,t,a)+f;if(m===0&&R===0)return h;const T=Oe(j=zo,Wa,Bb).call(j,t,n),S=1.25,g=m>=1&&R>=1,_=m>1?DR(1+(T-1)*(d-1),3):1,I=R>1?DR(1+(S-1)*(f-1),3):1,D=m>1?1:m,O=R>1?1:R;g?h*=DR(Oe(Z=zo,Wa,hT).call(Z,t,s)+Oe(J=zo,Wa,jb).call(J,t,a),3):h*=Oe(se=zo,Wa,hT).call(se,t,s);const x=h*_*T,k=h*I*S,H=x*I*S,G=D*O,P=1-D-O+G;return h*P+x*(D-G)+k*(O-G)+H*G}static criticalHitRate(t,n){const a=this.getSubstatBase(t),s=this.getStatDiv(t);return(Math.floor(200*(n-a)/s)+50)*.001}static overtimePotency(t,n,a){const s=this.getSubstatBase(t),c=this.getStatDiv(t),d=(1e3+Math.floor((n-s)*130/c))*.001;return a*d}static mpTick(t,n){const a=this.getMainstatBase(t),s=this.getStatDiv(t);return 200+Math.floor(150*(n-a)/s)}static preTaxGcd(t,n,a,s){const c=this.getSubstatBase(t),d=this.getStatDiv(t),f=Math.ceil((c-n)*130/d),h=Math.floor(a*(1e3+f));return Math.floor((100-(s??0))*h/1e3)/100}static preTaxGcdLegacy(t,n,a,s){const c=this.getSubstatBase(t),d=this.getStatDiv(t);return Math.floor(Math.floor(Math.floor((100-(s??0))*100/100)*Math.floor((2e3-Math.floor(130*(n-c)/d+1e3))*(1e3*a)/1e4)/100)*100/100)/100}static preTaxCastTime(t,n,a,s){const c=this.getSubstatBase(t),d=this.getStatDiv(t);return Math.floor(Math.floor(Math.floor((100-(s??0))*100/100)*Math.floor((2e3-Math.floor(130*(n-c)/d+1e3))*(1e3*a)/1e3)/100)*100/100)/1e3}static afterFpsTax(t,n){return Math.floor(n*t+1)/t}};Wa=new WeakSet,Bb=function(t,n){const a=this.getSubstatBase(t),s=this.getStatDiv(t);return(Math.floor(200*(n-a)/s)+1400)*.001},Fb=function(t,n){const a=this.getSubstatBase(t),s=this.getStatDiv(t);return Math.floor(550*(n-a)/s)*.001},jb=function(t,n){const a=this.getSubstatBase(t),s=this.getStatDiv(t);return Math.floor(140*(n-a)/s)*.001},hT=function(t,n){const a=this.getMainstatBase(t),s=this.getStatDiv(t);return Math.floor(1e3+140*(n-a)/s)*.001},Fe(zo,Wa);let Dt=zo;var w=(e=>(e[e.AF3=0]="AF3",e[e.AF2=1]="AF2",e[e.AF1=2]="AF1",e[e.UI3=3]="UI3",e[e.UI2=4]="UI2",e[e.UI1=5]="UI1",e[e.ENO=6]="ENO",e[e.STARRY=7]="STARRY",e[e.EMBOLDEN_M=8]="EMBOLDEN_M",e[e.ACCELERATION=9]="ACCELERATION",e[e.POT=10]="POT",e[e.COMBO=11]="COMBO",e[e.AUTO_CDH=12]="AUTO_CDH",e[e.NO_CDH=13]="NO_CDH",e[e.PARTY=14]="PARTY",e[e.STANDARD_SINGLE=15]="STANDARD_SINGLE",e[e.STANDARD_DOUBLE=16]="STANDARD_DOUBLE",e[e.TECHNICAL_SINGLE=17]="TECHNICAL_SINGLE",e[e.TECHNICAL_DOUBLE=18]="TECHNICAL_DOUBLE",e[e.TECHNICAL_TRIPLE=19]="TECHNICAL_TRIPLE",e[e.TECHNICAL_QUADRUPLE=20]="TECHNICAL_QUADRUPLE",e[e.DEVILMENT=21]="DEVILMENT",e[e.FUGETSU=22]="FUGETSU",e[e.AUTO_CRIT=23]="AUTO_CRIT",e[e.YATEN=24]="YATEN",e[e.POSITIONAL=25]="POSITIONAL",e[e.ARCANE_CIRCLE=26]="ARCANE_CIRCLE",e[e.DEATHSDESIGN=27]="DEATHSDESIGN",e[e.ENHANCED_GIBBET_GALLOWS=28]="ENHANCED_GIBBET_GALLOWS",e[e.ENHANCED_REAPING=29]="ENHANCED_REAPING",e[e.IMMORTAL_SACRIFICE=30]="IMMORTAL_SACRIFICE",e[e.OVERHEATED=31]="OVERHEATED",e[e.SURGING_TEMPEST=32]="SURGING_TEMPEST",e[e.RAGING_STRIKES=33]="RAGING_STRIKES",e[e.WANDERERS_MINUET=34]="WANDERERS_MINUET",e[e.MAGES_BALLAD=35]="MAGES_BALLAD",e[e.ARMYS_PAEON=36]="ARMYS_PAEON",e[e.BATTLE_VOICE=37]="BATTLE_VOICE",e[e.RADIANT_FINALE_ONE_CODA=38]="RADIANT_FINALE_ONE_CODA",e[e.RADIANT_FINALE_TWO_CODA=39]="RADIANT_FINALE_TWO_CODA",e[e.RADIANT_FINALE_THREE_CODA=40]="RADIANT_FINALE_THREE_CODA",e[e.BARRAGE=41]="BARRAGE",e[e.NO_MERCY=42]="NO_MERCY",e[e.SEARING_LIGHT=43]="SEARING_LIGHT",e[e.POWER_SURGE=44]="POWER_SURGE",e[e.ENHANCED_PIERCING_TALON=45]="ENHANCED_PIERCING_TALON",e[e.LANCE_CHARGE=46]="LANCE_CHARGE",e[e.LIFE_OF_THE_DRAGON=47]="LIFE_OF_THE_DRAGON",e[e.LIFE_SURGE=48]="LIFE_SURGE",e[e.BATTLE_LITANY=49]="BATTLE_LITANY",e[e.FIGHT_OR_FLIGHT=50]="FIGHT_OR_FLIGHT",e[e.DIVINE_MIGHT=51]="DIVINE_MIGHT",e[e.REQUIESCAT=52]="REQUIESCAT",e[e.PET=53]="PET",e[e.ZOE=54]="ZOE",e[e.SOTERIA=55]="SOTERIA",e[e.KRASIS=56]="KRASIS",e[e.AUTOPHYSIS=57]="AUTOPHYSIS",e[e.PHILOSOPHIA=58]="PHILOSOPHIA",e[e.MOON_FLUTE=59]="MOON_FLUTE",e[e.BRISTLE=60]="BRISTLE",e[e.WHISTLE=61]="WHISTLE",e[e.TINGLEA=62]="TINGLEA",e[e.TINGLEB=63]="TINGLEB",e[e.SURPANAKHA=64]="SURPANAKHA",e[e.WINGED_REPROBATION=65]="WINGED_REPROBATION",e[e.WINGED_REDEMPTION=66]="WINGED_REDEMPTION",e[e.DARKSIDE=67]="DARKSIDE",e[e.BUNSHIN=68]="BUNSHIN",e[e.KASSATSU=69]="KASSATSU",e[e.HOLLOW_NOZUCHI=70]="HOLLOW_NOZUCHI",e[e.KAZEMATOI=71]="KAZEMATOI",e[e.MEISUI=72]="MEISUI",e[e.DOKUMORI=73]="DOKUMORI",e[e.TRICK_ATTACK=74]="TRICK_ATTACK",e[e.KUNAIS_BANE=75]="KUNAIS_BANE",e[e.BROTHERHOOD=76]="BROTHERHOOD",e[e.RIDDLE_OF_FIRE=77]="RIDDLE_OF_FIRE",e[e.SSS_CHAKRA=78]="SSS_CHAKRA",e[e.MNK_BALL=79]="MNK_BALL",e[e.DIVINATION=80]="DIVINATION",e[e.NEUTRAL_SECT=81]="NEUTRAL_SECT",e[e.THE_ARROW=82]="THE_ARROW",e[e.SYNASTRY=83]="SYNASTRY",e[e.CONFESSION=84]="CONFESSION",e[e.ASYLUM=85]="ASYLUM",e[e.TEMPERANCE=86]="TEMPERANCE",e[e.EXTRA_BELL_STACKS=87]="EXTRA_BELL_STACKS",e[e.HUNTERS_INSTINCT=88]="HUNTERS_INSTINCT",e[e.HONED=89]="HONED",e[e.VENOM=90]="VENOM",e[e.POISED=91]="POISED",e[e.CHAIN_STRAT=92]="CHAIN_STRAT",e[e.FEY_ILLUMINATION=93]="FEY_ILLUMINATION",e[e.DISSIPATION=94]="DISSIPATION",e[e.PROTRACTION=95]="PROTRACTION",e))(w||{});const MN=1.1,yR=.9,$={Tincture:{kind:"multiplier",source:10,potencyFactor:1},AutoCrit:{kind:"critDirect",source:23,critBonus:1,dhBonus:0},AutoCDH:{kind:"critDirect",source:12,critBonus:1,dhBonus:1},NoCDH:{kind:"critDirect",source:13,critBonus:0,dhBonus:0},Starry:{kind:"multiplier",source:7,potencyFactor:1.05},EmboldenMagic:{kind:"multiplier",source:8,potencyFactor:1.1},AccelerationImpact:{kind:"adder",source:9,additiveAmount:50},SingleStandardFinish:{kind:"multiplier",source:15,potencyFactor:1.02},DoubleStandardFinish:{kind:"multiplier",source:16,potencyFactor:1.05},SingleTechnicalFinish:{kind:"multiplier",source:17,potencyFactor:1.01},TripleTechnicalFinish:{kind:"multiplier",source:19,potencyFactor:1.03},QuadrupleTechnicalFinish:{kind:"multiplier",source:20,potencyFactor:1.05},Devilment:{kind:"critDirect",source:21,critBonus:.2,dhBonus:.2},FugetsuBase:{kind:"multiplier",source:22,potencyFactor:1.1},FugetsuEnhanced:{kind:"multiplier",source:22,potencyFactor:1.13},YatenpiBase:{kind:"adder",source:24,additiveAmount:160},YatenpiEnhanced:{kind:"adder",source:24,additiveAmount:170},ArcaneCircle:{kind:"multiplier",source:26,potencyFactor:1.03},DeathsDesign:{kind:"multiplier",source:27,potencyFactor:1.1},EnhancedGibbetGallows:{kind:"adder",source:28,additiveAmount:60},EnhancedReaping:{kind:"adder",source:29,additiveAmount:60},ImmortalSacrifice:{kind:"adder",source:30,additiveAmount:40},Overheated:{kind:"adder",source:31,additiveAmount:20},SurgingTempest:{kind:"multiplier",source:32,potencyFactor:1.1},RagingStrikes:{kind:"multiplier",source:33,potencyFactor:1.15},MagesBallad:{kind:"multiplier",source:35,potencyFactor:1.01},ArmysPaeon:{kind:"critDirect",source:36,critBonus:0,dhBonus:.03},WanderersMinuet:{kind:"critDirect",source:34,critBonus:.02,dhBonus:0},BattleVoice:{kind:"critDirect",source:37,critBonus:0,dhBonus:.2},RadiantFinaleOneCoda:{kind:"multiplier",source:38,potencyFactor:1.02},RadiantFinaleTwoCoda:{kind:"multiplier",source:39,potencyFactor:1.04},RadiantFinaleThreeCoda:{kind:"multiplier",source:40,potencyFactor:1.06},BarrageRefulgent:{kind:"multiplier",source:41,potencyFactor:3},BarrageWideVolley:{kind:"adder",source:41,additiveAmount:80},BarrageShadowbite:{kind:"adder",source:41,additiveAmount:100},NoMercy:{kind:"multiplier",source:42,potencyFactor:1.2},SearingLight:{kind:"multiplier",source:43,potencyFactor:1.05},SmnPet:{kind:"multiplier",source:53,potencyFactor:.8},PowerSurge:{kind:"multiplier",source:44,potencyFactor:1.1},LanceCharge:{kind:"multiplier",source:46,potencyFactor:1.1},LifeOfTheDragon:{kind:"multiplier",source:47,potencyFactor:1.15},BattleLitany:{kind:"critDirect",source:49,critBonus:.1,dhBonus:0},EnhancedPiercingTalon:{kind:"adder",source:45,additiveAmount:150},LifeSurge:{kind:"critDirect",source:48,critBonus:1,dhBonus:0},FightOrFlight:{kind:"multiplier",source:50,potencyFactor:1.25},Zoe:{kind:"multiplier",source:54,potencyFactor:1.5},Soteria:{kind:"multiplier",source:55,potencyFactor:1.7},Krasis:{kind:"multiplier",source:56,potencyFactor:1.2},Autophysis:{kind:"multiplier",source:57,potencyFactor:1.1},Philosophia:{kind:"multiplier",source:58,potencyFactor:1.2},MoonFlute:{kind:"multiplier",source:59,potencyFactor:1.5},Whistle:{kind:"multiplier",source:61,potencyFactor:1.8},Bristle:{kind:"multiplier",source:60,potencyFactor:1.5},TingleA:{kind:"adder",source:62,additiveAmount:100},TingleB:{kind:"adder",source:63,additiveAmount:300},WingedReprobation:{kind:"adder",source:65,additiveAmount:100},WingedRedemption:{kind:"adder",source:66,additiveAmount:220},Darkside:{kind:"multiplier",source:67,potencyFactor:MN},DrkPet:{kind:"multiplier",source:53,potencyFactor:1.05*MN},BunshinST:{kind:"adder",source:68,additiveAmount:160*yR},BunshinAOE:{kind:"adder",source:68,additiveAmount:80*yR},NinPet:{kind:"multiplier",source:53,potencyFactor:yR},Kassatsu:{kind:"multiplier",source:69,potencyFactor:1.3},HollowNozuchi:{kind:"adder",source:70,additiveAmount:70},Kazematoi:{kind:"adder",source:71,additiveAmount:100},Meisui:{kind:"adder",source:72,additiveAmount:150},Dokumori:{kind:"multiplier",source:73,potencyFactor:1.05},TrickAttack:{kind:"multiplier",source:74,potencyFactor:1.1},KunaisBane:{kind:"multiplier",source:75,potencyFactor:1.1},Brotherhood:{kind:"multiplier",source:76,potencyFactor:1.05},RiddleOfFire:{kind:"multiplier",source:77,potencyFactor:1.15},Divination:{kind:"multiplier",source:80,potencyFactor:1.06},NeutralSect:{kind:"multiplier",source:81,potencyFactor:1.2},TheArrow:{kind:"multiplier",source:82,potencyFactor:1.1},Synastry:{kind:"multiplier",source:83,potencyFactor:1.4},AstPet:{kind:"multiplier",source:53,potencyFactor:.98},Confession:{kind:"adder",source:84,additiveAmount:200},Asylum:{kind:"multiplier",source:85,potencyFactor:1.1},Temperance:{kind:"multiplier",source:86,potencyFactor:1.2},WhmPet:{kind:"multiplier",source:53,potencyFactor:.96},HuntersInstinct:{kind:"multiplier",source:88,potencyFactor:1.1},HonedST:{kind:"adder",source:89,additiveAmount:100},HonedAoE:{kind:"adder",source:89,additiveAmount:20},VenomST:{kind:"adder",source:90,additiveAmount:100},VenomAoE:{kind:"adder",source:90,additiveAmount:40},VenomOGCDST:{kind:"adder",source:90,additiveAmount:50},VenomOGCDAoE:{kind:"adder",source:90,additiveAmount:30},Poised:{kind:"adder",source:91,additiveAmount:50},ChainStrat:{kind:"critDirect",source:92,critBonus:.1,dhBonus:0},SchPet:{kind:"multiplier",source:53,potencyFactor:.9},FeyIllum:{kind:"multiplier",source:93,potencyFactor:1.1},Dissipation:{kind:"multiplier",source:94,potencyFactor:1.2},Protraction:{kind:"multiplier",source:95,potencyFactor:1.1}};function wk(e){return{kind:"adder",source:11,additiveAmount:e}}function Pk(e){return{kind:"adder",source:52,additiveAmount:e}}function Gk(e){return{kind:"adder",source:51,additiveAmount:e}}function wf(e){return{kind:"adder",source:25,additiveAmount:e}}var so,kl,Ul,Ta,Xa,fT,zb,Yb,Kb;class sn{constructor(t){Fe(this,Xa);re(this,"config");re(this,"sourceTime");re(this,"sourceSkill");re(this,"aspect");re(this,"description");re(this,"base");Fe(this,so);Fe(this,kl);re(this,"falloff");re(this,"snapshotTime");re(this,"applicationTime");Fe(this,Ul,[]);Fe(this,Ta);var n;if(this.config=t.config,this.sourceTime=t.sourceTime,this.sourceSkill=t.sourceSkill,this.aspect=t.aspect,this.base=t.basePotency,this.snapshotTime=t.snapshotTime,this.description=t.description,t.targetList!==void 0&&t.healTargetCount!==void 0)throw new Error("targetList and healTargetCount cannot both be specified.");if(t.targetList===void 0&&t.healTargetCount===void 0)throw new Error("At least one of targetList or healTargetCount must be specified.");Le(this,so,t.targetList),Le(this,kl,t.healTargetCount??((n=te(this,so))==null?void 0:n.length)??0),this.falloff=t.falloff,Le(this,Ta,void 0)}hasTarget(t){return this.targetList.includes(t)}get targetList(){return te(this,so)??[]}tryRemoveTarget(t){var a;const n=((a=te(this,so))==null?void 0:a.indexOf(t))??-1;return n>-1?(te(this,so).splice(n,1),Le(this,kl,this.targetList.length),!0):!1}addTargetSpecificModifiers(t){te(this,Ta)===void 0&&Le(this,Ta,new Map),t.forEach((n,a)=>{const s=te(this,Ta).get(a);s?s.push(...n):te(this,Ta).set(a,[...n])})}get targetCount(){return te(this,kl)}get healTargetCount(){return console.assert(te(this,so)===void 0),te(this,kl)}set healTargetCount(t){console.assert(te(this,so)===void 0),Le(this,kl,t)}addModifiers(...t){te(this,Ul).push(...t)}getDisplayedModifiers(t){var n;if(t!==void 0){const a=new Set;return(n=te(this,Ta))==null||n.forEach((s,c)=>{t.includes(c)&&s.forEach(d=>a.add(d))}),[...te(this,Ul),...a]}return te(this,Ul)}getAmount(t){var c,d,f;const n=this.targetCount-(((c=te(this,Ta))==null?void 0:c.size)??0);let a=Oe(this,Xa,fT).call(this,t,this.targetList.length===0||!((d=te(this,Ta))!=null&&d.has(this.targetList[0])),n,te(this,Ul));if(this.targetList.length===0)return a;const s=this.targetList[0];return(f=te(this,Ta))==null||f.forEach((h,m)=>{a+=Oe(this,Xa,fT).call(this,t,m===s,1,[...te(this,Ul),...h])}),a}getPartyBuffs(t){return this.sourceSkill==="SALTED_EARTH"||this.sourceSkill==="SLIPSTREAM"||this.sourceSkill==="DOTON"?t?[...p.game.getPartyBuffs(t).keys()]:[]:this.snapshotTime?[...p.game.getPartyBuffs(this.snapshotTime).keys()]:[]}resolve(t){console.assert(this.snapshotTime!==void 0,`${this.sourceSkill} displayed at ${t} did not have snapshotTime`),console.assert(this.applicationTime===void 0,`${this.sourceSkill} displayed at ${t} was already resolved at ${this.applicationTime}`),this.applicationTime=t}hasResolved(){return this.applicationTime!==void 0}hasHitBoss(t){return this.applicationTime!==void 0&&!t(this.applicationTime)}hasSnapshotted(){return this.snapshotTime!==void 0}}so=new WeakMap,kl=new WeakMap,Ul=new WeakMap,Ta=new WeakMap,Xa=new WeakSet,fT=function(t,n,a,s){let c=1,d=0,f=0,h=0,m=!1,R=!1,T=!1;s.forEach(_=>{_.source===10?c*=t.tincturePotencyMultiplier:_.source===12?m=!0:_.source===23?R=!0:_.source===13?T=!0:_.kind==="critDirect"?(f+=_.critBonus,h+=_.dhBonus):_.kind==="multiplier"?c*=_.potencyFactor:_.kind==="adder"&&(d+=_.additiveAmount)}),console.assert(!(T&&(m||R)),"skills that can't CDH cannot be auto-crit or auto-CDH"),T&&(m=!1,R=!1),console.assert(!(m&&R),"cannot be both auto-crit and auto-CDH"),t.includePartyBuffs&&this.snapshotTime&&p.game.getPartyBuffs(this.snapshotTime).forEach(_=>{_.kind==="multiplier"?c*=_.potencyFactor:_.kind==="critDirect"&&(f+=_.critBonus,h+=_.dhBonus)});const S=this.base+d;let g=S*Oe(this,Xa,Kb).call(this,c,T?0:f,T?0:h);if(m?g*=Oe(this,Xa,zb).call(this,f,h):R?g*=Oe(this,Xa,Yb).call(this,f,h):T&&(g=S*c/Dt.calculateDamage(this.config.level,this.config.criticalHit,this.config.directHit,this.config.determination,c,0,0)),t.includeSplash){const _=n?1+(1-(this.falloff??1))*(a-1):(1-(this.falloff??1))*a;g*=_}return g},zb=function(t,n){const a=this.config.level,s=Dt.calculateDamage(a,p.gameConfig.criticalHit,p.gameConfig.directHit,p.gameConfig.determination,1,t,n);return Dt.calculateDamage(a,p.gameConfig.criticalHit,p.gameConfig.directHit,p.gameConfig.determination,1,1+t,1+n)/s},Yb=function(t,n){const a=this.config.level,s=Dt.calculateDamage(a,p.gameConfig.criticalHit,p.gameConfig.directHit,p.gameConfig.determination,1,t,n);return Dt.calculateDamage(a,p.gameConfig.criticalHit,p.gameConfig.directHit,p.gameConfig.determination,1,1+t,n)/s},Kb=function(t,n,a){const s=this.config.level,c=this.config.criticalHit,d=this.config.directHit,f=this.config.determination,h=Dt.calculateDamage(s,c,d,f,1,0,0);return Dt.calculateDamage(s,c,d,f,t,n,a)/h};var Tt=(e=>(e.Red="#f64141",e.Orange="#e89b5f",e.Yellow="#ffd535",e.Green="#50c53d",e.Cyan="#53e5e5",e.Blue="#217ff5",e.Purple="#9755ef",e.Pink="#ee79ee",e.Grey="#6f6f6f",e))(Tt||{});const Nt=()=>Ni(C.useContext(yn)),Ni=e=>e==="Dark"?Bk:Fk,Xl=(e,t)=>Ni(e)[t],Bk={accent:"mediumpurple",jobAccents:{BLM:"#9370db",BLU:"#9370db",PCT:"#e176c2",RDM:"#ff0000",DNC:"#e2b0af",SAM:"#f59542",MCH:"#6ee1d6",WAR:"#b10b0b",RPR:"#965a90",BRD:"#91ba5e",GNB:"#f6b26b",SMN:"#2D9B78",SGE:"#80a0f0"},editingValid:"#ffdc00",editingInvalid:"#ff0000",dropTarget:"#5579f1",realTime:"mediumseagreen",historical:"#ff8c00",fileDownload:"#798c3f",text:"#b0b0b0",emphasis:"#dadada",success:"mediumseagreen",warning:"#ff6224",background:"#1f1f21",tipBackground:"#2a2a2a",bgLowContrast:"#333",bgMediumContrast:"#393939",bgHighContrast:"#626262",timelineEditor:{headerFooter:"#424242",bgAlternateRow:"#282828"},resources:{gcdBar:"#5cab43",lockBar:"#737373",mana:"#62a5d2",manaTick:"#3d5c73",cdhTag:"#d55124",comboTag:"#5c8bad",petTag:"#eb9b5f"},blm:{enochian:"#b69241",astralFire:"#d55124",astralSoul:"#cb8046",umbralIce:"#509bd5",umbralHeart:"#8fced5",paradox:"#d953ee",polyTimer:"#594472",polyStacks:"#b138ee"},blu:{moonflute:"#b69241",whistle:"#b69241",bristle:"#b69241",tinglea:"#217ff5",tingleb:"#217ff5",surpanakha:"#b69241",wingedreprobation:"#ffd535"},pct:{creatureCanvas:"#a948e3",weaponCanvas:"#a53535",landscapeCanvas:"#2e51dd",paletteGauge:"#b69241",holyPaint:"#9bc6dd",cometPaint:"#7e19aa",starryBuff:"#509bd5"},rdm:{whiteMana:"#dddddd",blackMana:"#2a4bf5",manaStack:"#cb8046",emboldenBuff:"#de0202",accelBuff:"#f0d1e8"},dnc:{esprit:"#e2b0af",feathers:"#8DA147",emboite:"#bf615c",entrechat:"#3a8db7",jete:"#539350",pirouette:"#b0984e"},sam:{kenki:"#d55124",setsu:"#c7ffff",getsu:"#7987fc",kaSen:"#f8a2a6",meditation:"#ff853d",fugetsu:"#0f52ba",iai:"#89cfef"},mch:{heat:"#D35A10",battery:"#2C9FCB"},rpr:{soulGaugeLow:"#660929",soulGaugeHigh:"#e5004e",shroudGaugeLow:"#03706c",shroudGaugeHigh:"#00fcf3",lemureShroud:"#53ffff",voidShroudLow:"#5c125c",voidShroudHigh:"#ff04ff",deathsDesign:"#ab0009",arcaneCircle:"#ff94fd"},war:{beastGauge:"#ffba00"},brd:{soulVoice:"#5DBD99",pitchPerfect:"#9ac5f1",repertoire:"#e8c35a",wanderersCoda:"#add549",magesCoda:"#ffbcf8",armysCoda:"#eb9b5f",ragingStrikes:"#c04414",barrage:"#e6c65b",battleVoice:"#71bed1",radiantFinale:"#edcce7"},gnb:{},smn:{aetherflow:"#ffd4ff",bahamut:"#2D9B78",phoenix:"#d55124",solar:"#9bc6dd",ruby:"#e5004e",topaz:"#b0984e",emerald:"#539350",searing:"#2D9B78"},drg:{lifeSurge:"#ff6633",lanceCharge:"#d6002d",lifeOfTheDragon:"#0968af",battleLitany:"#33b8e3",powerSurge:"#59ed78",enhancedPiercingTalon:"#f4caa6",firstmindsFocusStacks:"#9926c8",lifeOfTheDragonBar:"#d74936",drgComboTimer:"#3d61ae"},sge:{addersgall:"#80a0f0",addersting:"#9e2dca",zoe:"cyan",autophysis:"lightblue",krasis:"teal",soteria:"green",philosophia:"lightgreen"},pld:{divineMight:"#ff6633",requiescat:"#d6002d",fightOrFlight:"#0968af",pldComboTimer:"#59ed78",ironWillColor:"#d74936",oathGaugeColor:"#3d61ae"},drk:{darkside:"#c000d1",blood:"#8803fc",darkarts:"#ffdf0d",drkComboTimer:"#cb8046",grit:"#82cad9"},nin:{ninComboTimer:"#8532a8",kazematoi:"#ab1fd1",meisui:"#559ef2",ninki:"#8532a8",bunshin:"#ed8021",kassatsu:"#fa9bd4",nozuchi:"#d6a440",dokumori:"#9a0ec4",trick:"#ffd454"},mnk:{opo:"#feabf7",raptor:"#c495fb",coeurl:"#00d9a5",lunar:"#a984f5",solar:"#c6c5c3",riddleOfFire:"#d98d58",brotherhood:"#da4c32",chakra:"#fffea5",extraChakra:"#fe9b28"},whm:{lily:"#d3ffff",blood:"#e08889",pom:"#9788e0",asylum:"#b5e075",confession:"#8df2e8",temperance:"#77f7b7"},ast:{div:"#ffd535",astralCard:"#52d3f7",umbralCard:"#f7b3ff",lord:"#de1200",lady:"#f8facd",neutral:"#354869",synastry:"#578a7e",arrow:"#1690a8"},vpr:{vprComboTimer:"#dea65d",rattlingCoil:"#f64141",serpentOfferings:"#f64141",anguineTribute:"#24e2ff",huntersInstinct:"#9e5a02",swiftscaled:"#ffe20a"},sch:{chain:"#6f6f6f",faerieGauge:"#96ffbd",aetherflow:"#acfff7",seraph:"#44b6fd",feyIllumination:"#2cc7b0",dissipation:"#c4c4c4",protraction:"#77c990",recitation:"#ffce1c"},timeline:{ruler:"#2d2d2d",tracks:"#242424",castBar:"#42364d",lockBar:"#696969",gcdBar:"#354931",invalidBg:"#f25449",llCover:"#5ea647",potCover:"#c4543a",buffCover:"#9370db",damageMark:"#ff0000",healingMark:"#2cda30",aggroMark:"#ff8000",untargetableDamageMark:"#7f7f7f",mpTickMark:"#32525e",warningMark:"#9d7103",lucidTickMark:"#56b3d5",countdown:"rgba(15, 15, 15, 0.4)",markerAlpha:"4f"}},Fk={accent:"mediumpurple",jobAccents:{BLM:"#9370db",BLU:"#9370db",PCT:"#f485d6",RDM:"#ff0000",DNC:"#e2b0af",SAM:"#f59542",MCH:"#6ee1d6",WAR:"#b10b0b",RPR:"#965a90",BRD:"#91ba5e",SMN:"#2D9B78",SGE:"#80a0f0"},editingValid:"#ffdc00",editingInvalid:"#ff0000",dropTarget:"#4665ff",realTime:"mediumseagreen",historical:"#ff8c00",fileDownload:"#798c3f",text:"#000000",emphasis:"#000000",success:"mediumseagreen",warning:"#ff4d07",background:"#ffffff",tipBackground:"#ffffff",bgLowContrast:"#efefef",bgMediumContrast:"lightgrey",bgHighContrast:"darkgrey",timelineEditor:{headerFooter:"#cacaca",bgAlternateRow:"#eeeeee"},resources:{gcdBar:"#8edc72",lockBar:"#cbcbcb",mana:"#8ACEEA",manaTick:"#C2EAFF",cdhTag:"#ff6633",comboTag:"#53a7c9",petTag:"#eb9b5f"},blm:{enochian:"#f5cf96",astralFire:"#ff6633",astralSoul:"#ffa641",umbralIce:"#66bbff",umbralHeart:"#95dae3",paradox:"#d953ee",polyTimer:"#d5bbf1",polyStacks:"#b138ee"},blu:{moonflute:"#b69241",whistle:"#b69241",bristle:"#b69241",tinglea:"#217ff5",tingleb:"#217ff5",surpanakha:"#b69241",wingedreprobation:"#ffd535"},pct:{creatureCanvas:"#b854e8",weaponCanvas:"#d54d48",landscapeCanvas:"#4568f6",paletteGauge:"#f5cf96",holyPaint:"#b7c9d5",cometPaint:"#9926c8",starryBuff:"#66bbff"},rdm:{whiteMana:"#fcd8d4",blackMana:"#467aeb",manaStack:"#9926c8",emboldenBuff:"#c91310",accelBuff:"#c973b4"},dnc:{esprit:"#e2b0af",feathers:"#8DA147",emboite:"#bf615c",entrechat:"#3a8db7",jete:"#539350",pirouette:"#b0984e"},sam:{kenki:"#d55124",setsu:"#addede",getsu:"#7987fc",kaSen:"#f8a2a6",meditation:"#ff853d",fugetsu:"#0f52ba",iai:"#89cfef"},mch:{heat:"#D35A10",battery:"#2C9FCB"},rpr:{soulGaugeLow:"#660929",soulGaugeHigh:"#e5004e",shroudGaugeLow:"#03706c",shroudGaugeHigh:"#00fcf3",lemureShroud:"#53ffff",voidShroudLow:"#5c125c",voidShroudHigh:"#ff04ff",deathsDesign:"#ab0009",arcaneCircle:"#ff94fd"},war:{beastGauge:"#e74a3c"},brd:{soulVoice:"#5DBD99",pitchPerfect:"#9ac5f1",repertoire:"#e8c35a",wanderersCoda:"#add549",magesCoda:"#ffbcf8",armysCoda:"#eb9b5f",ragingStrikes:"#c04414",barrage:"#e6c65b",battleVoice:"#71bed1",radiantFinale:"#edcce7"},gnb:{},smn:{aetherflow:"#ffd4ff",bahamut:"#2D9B78",phoenix:"#d55124",solar:"#9bc6dd",ruby:"#e5004e",topaz:"#b0984e",emerald:"#539350",searing:"#2D9B78"},drg:{lifeSurge:"#ff6633",lanceCharge:"#d6002d",lifeOfTheDragon:"#0968af",battleLitany:"#33b8e3",powerSurge:"#59ed78",enhancedPiercingTalon:"#f4caa6",firstmindsFocusStacks:"#9926c8",lifeOfTheDragonBar:"#d74936",drgComboTimer:"#3d61ae"},sge:{addersgall:"#80a0f0",addersting:"#9e2dca",zoe:"cyan",autophysis:"lightblue",krasis:"teal",soteria:"green",philosophia:"lightgreen"},pld:{divineMight:"#ff6633",requiescat:"#d6002d",fightOrFlight:"#0968af",pldComboTimer:"#59ed78",ironWillColor:"#d74936",oathGaugeColor:"#3d61ae"},drk:{darkside:"#c000d1",blood:"#8803fc",darkarts:"#ffdf0d",drkComboTimer:"#cb8046",grit:"#82cad9"},nin:{ninComboTimer:"#8532a8",kazematoi:"#ab1fd1",meisui:"#559ef2",ninki:"#8532a8",bunshin:"#ed8021",kassatsu:"#fa9bd4",nozuchi:"#d6a440",dokumori:"#7e03a3",trick:"#e6b525"},mnk:{opo:"#feabf7",raptor:"#c495fb",coeurl:"#00d9a5",lunar:"#a984f5",solar:"#c6c5c3",riddleOfFire:"#d98d58",brotherhood:"#da4c32",chakra:"#fee11c",extraChakra:"#fe9b28"},whm:{lily:"#a5d0e8",blood:"#ff5454",pom:"#9788e0",asylum:"#b5e075",confession:"#8df2e8",temperance:"#77f7b7"},ast:{div:"#ffd535",astralCard:"#52d3f7",umbralCard:"#f7b3ff",lord:"#de1200",lady:"#d3d672",neutral:"#354869",synastry:"#578a7e",arrow:"#1690a8"},vpr:{vprComboTimer:"#dea65d",rattlingCoil:"#f64141",serpentOfferings:"#f64141",anguineTribute:"#24e2ff",huntersInstinct:"#9e5a02",swiftscaled:"#ffe20a"},sch:{chain:"#6f6f6f",faerieGauge:"#96ffbd",aetherflow:"#79d9d0",seraph:"#3299d9",feyIllumination:"#2cc7b0",dissipation:"#c4c4c4",protraction:"#77c990",recitation:"#ffce1c"},timeline:{ruler:"#e9e9e9",tracks:"#f3f3f3",castBar:"#ecd6f3",lockBar:"#9d9d9d",gcdBar:"#ccefc6",invalidBg:"#c21104",llCover:"#87ec71",potCover:"#ff865c",buffCover:"#9370db",damageMark:"#ff0000",healingMark:"#2cda30",aggroMark:"#ff8000",untargetableDamageMark:"#7f7f7f",mpTickMark:"#b6dfea",warningMark:"#ffbb29",lucidTickMark:"#88cae0",countdown:"rgba(0, 0, 0, 0.1)",markerAlpha:"7f"}};function jk(e){const t=Nt(),n=new Map([[w.AF3,t.blm.astralFire],[w.AF2,t.blm.astralFire],[w.AF1,t.blm.astralFire],[w.UI3,t.blm.umbralIce],[w.UI2,t.blm.umbralIce],[w.UI1,t.blm.umbralIce],[w.ENO,t.blm.enochian],[w.AUTO_CDH,t.resources.cdhTag],[w.STARRY,t.pct.starryBuff],[w.EMBOLDEN_M,t.rdm.emboldenBuff],[w.ACCELERATION,t.rdm.accelBuff],[w.STANDARD_SINGLE,t.dnc.jete],[w.STANDARD_DOUBLE,t.dnc.jete],[w.TECHNICAL_SINGLE,t.dnc.esprit],[w.TECHNICAL_DOUBLE,t.dnc.esprit],[w.TECHNICAL_TRIPLE,t.dnc.esprit],[w.TECHNICAL_QUADRUPLE,t.dnc.esprit],[w.DEVILMENT,t.dnc.feathers],[w.OVERHEATED,"#ee79ee"],[w.COMBO,t.resources.comboTag],[w.FUGETSU,t.sam.fugetsu],[w.AUTO_CRIT,t.resources.cdhTag],[w.YATEN,t.pct.cometPaint],[w.POSITIONAL,"#50c53d"],[w.ARCANE_CIRCLE,"#ee79ee"],[w.DEATHSDESIGN,"#f64141"],[w.ENHANCED_GIBBET_GALLOWS,"#217ff5"],[w.ENHANCED_REAPING,"#9755ef"],[w.IMMORTAL_SACRIFICE,"#ee79ee"],[w.SURGING_TEMPEST,"#9755ef"],[w.BARRAGE,t.brd.barrage],[w.RAGING_STRIKES,t.brd.ragingStrikes],[w.BATTLE_VOICE,t.brd.battleVoice],[w.RADIANT_FINALE_THREE_CODA,t.brd.radiantFinale],[w.RADIANT_FINALE_TWO_CODA,t.brd.radiantFinale],[w.RADIANT_FINALE_ONE_CODA,t.brd.radiantFinale],[w.WANDERERS_MINUET,t.brd.wanderersCoda],[w.MAGES_BALLAD,t.brd.magesCoda],[w.ARMYS_PAEON,t.brd.armysCoda],[w.NO_MERCY,t.rdm.blackMana],[w.SEARING_LIGHT,t.smn.searing],[w.LIFE_SURGE,t.drg.lifeSurge],[w.LANCE_CHARGE,t.drg.lanceCharge],[w.LIFE_OF_THE_DRAGON,t.drg.lifeOfTheDragon],[w.BATTLE_LITANY,t.drg.battleLitany],[w.POWER_SURGE,t.drg.powerSurge],[w.ENHANCED_PIERCING_TALON,t.drg.enhancedPiercingTalon],[w.DIVINE_MIGHT,t.pld.divineMight],[w.REQUIESCAT,t.pld.requiescat],[w.FIGHT_OR_FLIGHT,t.pld.fightOrFlight],[w.PET,t.resources.petTag],[w.MOON_FLUTE,t.blu.moonflute],[w.WHISTLE,t.blu.whistle],[w.BRISTLE,t.blu.bristle],[w.TINGLEA,t.blu.tinglea],[w.TINGLEB,t.blu.tingleb],[w.SURPANAKHA,t.blu.surpanakha],[w.WINGED_REDEMPTION,t.blu.wingedreprobation],[w.WINGED_REPROBATION,t.blu.wingedreprobation],[w.DARKSIDE,t.drk.darkside],[w.BUNSHIN,t.nin.bunshin],[w.KASSATSU,t.nin.kassatsu],[w.HOLLOW_NOZUCHI,t.nin.nozuchi],[w.KAZEMATOI,t.nin.kazematoi],[w.MEISUI,t.nin.meisui],[w.DOKUMORI,t.nin.dokumori],[w.TRICK_ATTACK,t.nin.trick],[w.KUNAIS_BANE,t.nin.trick],[w.BROTHERHOOD,t.mnk.brotherhood],[w.RIDDLE_OF_FIRE,t.mnk.riddleOfFire],[w.MNK_BALL,t.mnk.opo],[w.SSS_CHAKRA,t.mnk.chakra],[w.DIVINATION,t.ast.div],[w.HUNTERS_INSTINCT,t.vpr.huntersInstinct],[w.HONED,t.vpr.vprComboTimer],[w.VENOM,t.vpr.vprComboTimer],[w.POISED,t.vpr.vprComboTimer],[w.CHAIN_STRAT,t.sch.chain],[w.NO_CDH,t.timeline.untargetableDamageMark]]);return console.assert(n.has(e),`modifier ${e} doesn't have a color!`),n.get(e)??t.text}function LN(e){const t=e.colorTheme==="Dark",n=t?l.jsx(kk,{}):l.jsx(Uk,{}),a=Nt(),s=C.useContext(yn),c=N({en:t?"Dark Mode":"Light Mode",zh:t?"":""});return l.jsx("div",{title:c,style:{display:"inline-block",cursor:"pointer",borderBottom:e.colorTheme===s?"none":"1px solid "+a.text,borderTop:e.colorTheme===s?"1px solid "+a.text:"none"},onClick:()=>e.setColorTheme(e.colorTheme),children:n})}const gE=()=>{var t;const e=pt("colorTheme");return e==="Light"||e==="Dark"?e:(t=window.matchMedia)!=null&&t.call(window,"(prefers-color-scheme: dark)").matches?"Dark":"Light"},yn=C.createContext(gE());function zk(e){return l.jsx("div",{style:{display:"inline-block"},children:l.jsxs("div",{style:{display:"inline-block",fontSize:16},children:[l.jsx(LN,{colorTheme:"Light",setColorTheme:e.setColorTheme}),"|",l.jsx(LN,{colorTheme:"Dark",setColorTheme:e.setColorTheme})]})})}class Pf{static getJob(t){return mt[t]}static getAction(t){return bn[t]}static findAction(t){return this.findByName(bn,t)}static findActionKey(t){return this.findKeyByName(bn,t)}static getResource(t){return Ke[t]}static findResource(t){return this.findByName(Ke,t)}static findResourceKey(t){return this.findKeyByName(Ke,t)}static getCooldown(t){return Gs[t]}static findCooldown(t){return this.findByName(Gs,t)}static findCooldownKey(t){return this.findKeyByName(Gs,t)}static findByName(t,n){return Object.values(t).find(a=>a.name===n)}static findKeyByName(t,n){const a=Object.entries(t).find(([s,c])=>c.name===n);if(a)return a[0]}}function Jh(e){const t=Va();return t==="zh"?e==="en"?"":e==="zh"?"":"":t==="ja"?e==="en"?"":e==="zh"?"":"":e.toString()}function N(e){const t=Va();return t==="zh"&&e.zh?e.zh:t==="ja"&&e.ja?e.ja:e.en}function Yk(e,t){{const[n,a,s]=e.split("/");return`20${s}${n}${a}`}}function Ku(e){switch(e){case"spellSpeed":return N({en:"spell speed: ",zh:""}).toString();case"skillSpeed":return N({en:"skill speed: ",zh:""}).toString();case"fps":return N({en:"FPS: ",zh:""}).toString();case"criticalHit":return N({en:"crit: ",zh:""}).toString();case"directHit":return N({en:"direct hit: ",zh:""}).toString();case"determination":return N({en:"determination: ",zh:""}).toString();case"piety":return N({en:"piety: ",zh:""}).toString();case"animationLock":return N({en:"animation lock: ",zh:""}).toString()}return e}function aa(e){if(e==="NEVER")return N({en:"unknown skill",zh:""}).toString();if(!(e in bn))return e;const t=Pf.getAction(e);return N({en:t.name,...t.label}).toString()}function Bs(e){if(e===void 0)return N({en:"reason unknown",zh:""}).toString();let t="";return e===gt.Blocked?t="CD":e===gt.SecondaryBlocked?t="CD":e===gt.NotEnoughMP?t="MP":e===gt.NotInCombat?t="":e===gt.RequirementsNotMet?t="":e===gt.SkillNotUnlocked?t="Lv":e===gt.BuffNoLongerAvailable?t="BUFF":e===gt.PastTargetTime?t="":e===gt.CastCanceled?t="":e===gt.UnknownSkill?t="":console.error("unlocalized reason: "+e),N({en:e,zh:t}).toString()}const Kk=new Map([[U.LeyLines,""],[U.Hyperphantasia,""],[U.Tincture,""],[U.ArcaneCircle,""],[U.ArmysPaeon,""],[U.BattleLitany,""],[U.BattleVoice,""],[U.Brotherhood,""],[U.Card_TheBalance,""],[U.Card_TheSpear,""],[U.ChainStratagem,""],[U.Devilment,""],[U.Divination,""],[U.Dokumori,""],[U.Embolden,""],[U.MagesBallad,""],[U.RadiantFinale1,"1"],[U.RadiantFinale2,"2"],[U.RadiantFinale3,"3"],[U.SearingLight,""],[U.StandardFinish,""],[U.StarryMuse,""],[U.TechnicalFinish,""],[U.WanderersMinuet,""]]),Vk=new Map([[U.LeyLines,""],[U.Tincture,""],[U.ArcaneCircle,""],[U.ArmysPaeon,""],[U.BattleLitany,""],[U.BattleVoice,""],[U.Brotherhood,""],[U.Card_TheBalance,""],[U.Card_TheSpear,""],[U.ChainStratagem,""],[U.Devilment,""],[U.Divination,""],[U.Dokumori,""],[U.Embolden,""],[U.MagesBallad,""],[U.RadiantFinale1,"1"],[U.RadiantFinale2,"2"],[U.RadiantFinale3,"3"],[U.SearingLight,""],[U.StandardFinish,""],[U.StarryMuse,""],[U.TechnicalFinish,""],[U.WanderersMinuet,""]]);function Vb(e){const t=Va();return t==="zh"?Kk.get(e)??e:t==="ja"?Vk.get(e)??e:e}function Qe(e){const t=Va();if(e in Gs){const a=Pf.getCooldown(e),s=N({en:a.name,...a.label}).toString();if(t!=="en"&&s===a.name){const c=e.slice(3),d=Object.keys(bn).find(f=>bn[f].name===c||f===c);if(d!==void 0)return"CD"+aa(d)}return s}const n=Pf.getResource(e);return N({en:n.name,...n.label}).toString()}const xN=new Map([[w.AF3,{en:"AF3",zh:""}],[w.AF2,{en:"AF2",zh:""}],[w.AF1,{en:"AF1",zh:""}],[w.UI3,{en:"UI3",zh:""}],[w.UI2,{en:"UI2",zh:""}],[w.UI1,{en:"UI1",zh:""}],[w.ENO,{en:"enochian",zh:""}],[w.POT,{en:"pot",zh:""}],[w.PARTY,{en:"party",zh:""}],[w.AUTO_CDH,{en:"auto crit/direct hit",zh:""}],[w.STARRY,{en:"starry muse",zh:""}],[w.EMBOLDEN_M,{en:"embolden",zh:""}],[w.ACCELERATION,{en:"acceleration",zh:""}],[w.STANDARD_SINGLE,{en:"single standard finish",zh:""}],[w.STANDARD_DOUBLE,{en:"double standard finish",zh:""}],[w.TECHNICAL_SINGLE,{en:"single technical finish",zh:""}],[w.TECHNICAL_DOUBLE,{en:"double technical finish",zh:""}],[w.TECHNICAL_TRIPLE,{en:"triple technical finish",zh:""}],[w.TECHNICAL_QUADRUPLE,{en:"quadruple technical finish",zh:""}],[w.DEVILMENT,{en:"devilment",zh:""}],[w.OVERHEATED,{en:"overheated",zh:""}],[w.COMBO,{en:"combo",zh:""}],[w.FUGETSU,{en:"fugetsu",zh:""}],[w.AUTO_CRIT,{en:"auto crit",zh:""}],[w.YATEN,{en:"yaten",zh:""}],[w.POSITIONAL,{en:"positional",zh:""}],[w.ARCANE_CIRCLE,{en:"arcane circle",zh:""}],[w.DEATHSDESIGN,{en:"death's design",zh:""}],[w.ENHANCED_GIBBET_GALLOWS,{en:"enhanced gibbet/gallows",zh:"/"}],[w.ENHANCED_REAPING,{en:"enhanced reaping",zh:"/"}],[w.IMMORTAL_SACRIFICE,{en:"immortal sacrifice"}],[w.BARRAGE,{en:"barrage"}],[w.RAGING_STRIKES,{en:"raging strikes"}],[w.BATTLE_VOICE,{en:"battle voice"}],[w.RADIANT_FINALE_THREE_CODA,{en:"three coda radiant finale"}],[w.RADIANT_FINALE_TWO_CODA,{en:"two coda radiant finale"}],[w.RADIANT_FINALE_ONE_CODA,{en:"one coda radiant finale"}],[w.WANDERERS_MINUET,{en:"wanderer's minuet"}],[w.MAGES_BALLAD,{en:"mage's ballad"}],[w.ARMYS_PAEON,{en:"army's paeon"}],[w.NO_MERCY,{en:"no mercy",zh:""}],[w.SEARING_LIGHT,{en:"searing light",zh:""}],[w.SURGING_TEMPEST,{en:"surging tempest",zh:""}],[w.POWER_SURGE,{en:"power surge"}],[w.LANCE_CHARGE,{en:"lance charge"}],[w.ENHANCED_PIERCING_TALON,{en:"enhanced piercing talon"}],[w.LIFE_OF_THE_DRAGON,{en:"life of the dragon"}],[w.LIFE_SURGE,{en:"life surge"}],[w.PET,{en:"pet modifier",zh:""}],[w.DIVINE_MIGHT,{en:"divine might",zh:""}],[w.REQUIESCAT,{en:"requiescat",zh:""}],[w.FIGHT_OR_FLIGHT,{en:"fight or flight",zh:""}],[w.WHISTLE,{en:"WH",zh:""}],[w.BRISTLE,{en:"BR",zh:""}],[w.MOON_FLUTE,{en:"MF",zh:""}],[w.TINGLEA,{en:"TING",zh:""}],[w.TINGLEB,{en:"TING",zh:""}],[w.WINGED_REPROBATION,{en:"WREP",zh:""}],[w.WINGED_REDEMPTION,{en:"WRED",zh:""}],[w.DARKSIDE,{en:"darkside",zh:""}],[w.BUNSHIN,{en:"bunshin",zh:""}],[w.KASSATSU,{en:"kassatsu",zh:""}],[w.HOLLOW_NOZUCHI,{en:"hollow nozuchi",zh:""}],[w.KAZEMATOI,{en:"kazematoi",zh:""}],[w.MEISUI,{en:"meisui",zh:""}],[w.DOKUMORI,{en:"dokumori",zh:""}],[w.TRICK_ATTACK,{en:"trick attack",zh:""}],[w.KUNAIS_BANE,{en:"kunai's bane",zh:""}],[w.BROTHERHOOD,{en:"brotherhood",zh:""}],[w.RIDDLE_OF_FIRE,{en:"riddle of fire",zh:""}],[w.MNK_BALL,{en:"ball",zh:""}],[w.SSS_CHAKRA,{en:"chakra",zh:""}],[w.DIVINATION,{en:"divination",zh:""}],[w.HUNTERS_INSTINCT,{en:"hunter's instinct",zh:""}],[w.HONED,{en:"honed"}],[w.VENOM,{en:"venom"}],[w.POISED,{en:"poised"}],[w.CHAIN_STRAT,{en:"chain stratagem",zh:""}],[w.NO_CDH,{en:"no crit/direct hit",zh:""}]]);function HN(e){return console.assert(xN.has(e),`modifier ${e} doesn't have a name!`),N(xN.get(e)??{en:"unknown"})}const kN=new Map([[w.AF3,{en:"AF3",zh:""}],[w.AF2,{en:"AF2",zh:""}],[w.AF1,{en:"AF1",zh:""}],[w.UI3,{en:"UI3",zh:""}],[w.UI2,{en:"UI2",zh:""}],[w.UI1,{en:"UI1",zh:""}],[w.ENO,{en:"ENO",zh:""}],[w.POT,{en:"pot",zh:""}],[w.PARTY,{en:"party",zh:""}],[w.AUTO_CDH,{en:"CDH",zh:""}],[w.STARRY,{en:"STARRY",zh:""}],[w.EMBOLDEN_M,{en:"MB",zh:""}],[w.ACCELERATION,{en:"ACC",zh:""}],[w.STANDARD_SINGLE,{en:"SSF",zh:""}],[w.STANDARD_DOUBLE,{en:"DSF",zh:""}],[w.TECHNICAL_SINGLE,{en:"STF",zh:""}],[w.TECHNICAL_DOUBLE,{en:"DTF",zh:""}],[w.TECHNICAL_TRIPLE,{en:"TTF",zh:""}],[w.TECHNICAL_QUADRUPLE,{en:"QTF",zh:""}],[w.DEVILMENT,{en:"DEV",zh:""}],[w.OVERHEATED,{en:"OVERHEATED",zh:""}],[w.COMBO,{en:"CMB",zh:""}],[w.FUGETSU,{en:"FGS",zh:""}],[w.AUTO_CRIT,{en:"CRIT",zh:""}],[w.YATEN,{en:"ENH",zh:""}],[w.POSITIONAL,{en:"PS",zh:""}],[w.ARCANE_CIRCLE,{en:"AC",zh:""}],[w.DEATHSDESIGN,{en:"DD",zh:""}],[w.ENHANCED_GIBBET_GALLOWS,{en:"E. GIB/GAL",zh:"/"}],[w.ENHANCED_REAPING,{en:"E. REAPING",zh:"/"}],[w.IMMORTAL_SACRIFICE,{en:"IMMORTAL SAC",zh:""}],[w.BARRAGE,{en:"BRG"}],[w.RAGING_STRIKES,{en:"RS"}],[w.BATTLE_VOICE,{en:"BV"}],[w.RADIANT_FINALE_THREE_CODA,{en:"RF3"}],[w.RADIANT_FINALE_TWO_CODA,{en:"RF2"}],[w.RADIANT_FINALE_ONE_CODA,{en:"RF1"}],[w.WANDERERS_MINUET,{en:"WM"}],[w.MAGES_BALLAD,{en:"MB"}],[w.ARMYS_PAEON,{en:"AP"}],[w.NO_MERCY,{en:"NM",zh:""}],[w.SEARING_LIGHT,{en:"SL",zh:""}],[w.SURGING_TEMPEST,{en:"SURGING",zh:""}],[w.POWER_SURGE,{en:"PWS"}],[w.LANCE_CHARGE,{en:"LC"}],[w.LIFE_OF_THE_DRAGON,{en:"LIFE"}],[w.ENHANCED_PIERCING_TALON,{en:"ENH"}],[w.LIFE_SURGE,{en:"LS"}],[w.BATTLE_LITANY,{en:"BL"}],[w.DIVINE_MIGHT,{en:"DM",zh:""}],[w.REQUIESCAT,{en:"REQ",zh:""}],[w.FIGHT_OR_FLIGHT,{en:"FOF",zh:""}],[w.PET,{en:"PET",zh:""}],[w.WHISTLE,{en:"WH",zh:""}],[w.BRISTLE,{en:"BR",zh:""}],[w.MOON_FLUTE,{en:"MF",zh:""}],[w.TINGLEA,{en:"TING",zh:""}],[w.TINGLEB,{en:"TING",zh:""}],[w.WINGED_REPROBATION,{en:"WREP",zh:""}],[w.WINGED_REDEMPTION,{en:"WRED",zh:""}],[w.DARKSIDE,{en:"DS",zh:""}],[w.BUNSHIN,{en:"BUN",zh:""}],[w.KASSATSU,{en:"KASS",zh:""}],[w.HOLLOW_NOZUCHI,{en:"NOZ",zh:""}],[w.KAZEMATOI,{en:"KAZ",zh:""}],[w.MEISUI,{en:"MEI",zh:""}],[w.DOKUMORI,{en:"DOKU",zh:""}],[w.TRICK_ATTACK,{en:"TRICK",zh:""}],[w.KUNAIS_BANE,{en:"KB",zh:""}],[w.BROTHERHOOD,{en:"BH",zh:""}],[w.RIDDLE_OF_FIRE,{en:"ROF",zh:""}],[w.MNK_BALL,{en:"BALL",zh:""}],[w.SSS_CHAKRA,{en:"CHAKRA",zh:""}],[w.DIVINATION,{en:"DIV",zh:""}],[w.HUNTERS_INSTINCT,{en:"HI",zh:""}],[w.HONED,{en:"HONED"}],[w.VENOM,{en:"VENOM"}],[w.POISED,{en:"POISED"}],[w.CHAIN_STRAT,{en:"CHAIN",zh:""}],[w.NO_CDH,{en:"NO CDH",zh:""}]]);function Wk(e){return console.assert(kN.has(e),`modifier ${e} doesn't have a tag name!`),N(kN.get(e)??{en:"unknown"})}const Wb=navigator.language==="zh-CN"||navigator.language==="zh"?"zh":"en";let Va=()=>pt("language")||Wb;function UN(e){let t="English";e.lang==="zh"&&(t=""),e.lang==="ja"&&(t="");const n=Nt();return l.jsx("div",{style:{display:"inline-block",cursor:"pointer",textDecoration:e.lang===Va()?"none":"underline",borderTop:e.lang===Va()?"1px solid "+n.text:"none"},onClick:()=>{e.setCurrentLanguage(e.lang)},children:t})}function Xk(){const e=pt("language"),t=e!==null&&["zh","ja","en"].includes(e)?e:Wb,[n,a]=C.useState(t),s=c=>{a(c),Ct("language",c)};return C.useEffect(()=>(Va=()=>n,()=>{Va=()=>n})),C.useEffect(()=>{p.updateAllDisplay()},[n]),l.jsxs("div",{style:{display:"inline-block"},children:[l.jsx("span",{style:{display:"inline-block",fontSize:17,position:"relative",marginRight:2},children:l.jsx(Hk,{})}),l.jsxs("div",{style:{display:"inline-block",fontSize:14,verticalAlign:"top"},children:[l.jsx(UN,{lang:"en",setCurrentLanguage:s}),"|",l.jsx(UN,{lang:"zh",setCurrentLanguage:s})]})]})}const Xb=ue()({UNIMPLEMENTED:{},OUTDATED:{label:{en:"Outdated",zh:""},warningContent:{en:"WARNING: This job recently had significant changes, and may not have been fully updated to reflect them. Exported plans may not load correctly following these changes, so be cautious about relying on them until the job has been fully updated.",zh:"bugtxt"}},TESTING:{label:{en:"Testing",zh:""},warningContent:{en:"WARNING: This job was recently added to XIV in the Shell and is still being tested. There may be bugs or changes in the near future, so make sure to frequently export and save timelines for this job to make sure you don't lose your work.",zh:"txt"}},LIVE:{}});ue()({TANK:{label:N({en:"Tank"})},HEALER:{label:N({en:"Healer"})},MELEE:{label:N({en:"Melee"})},RANGED:{label:N({en:"Ranged"})},CASTER:{label:N({en:"Caster"})},LIMITED:{label:N({en:"Limited"})}});const qb=ue()({PLD:{role:"TANK",implementationLevel:"TESTING",usesMp:!0,limitBreak:"LAST_BASTION",limitBreakBuff:"LAST_BASTION",mainStat:"strength",zh:""},WAR:{role:"TANK",implementationLevel:"LIVE",limitBreak:"LAND_WAKER",limitBreakBuff:"LAND_WAKER",mainStat:"strength",zh:""},DRK:{role:"TANK",implementationLevel:"LIVE",usesMp:!0,limitBreak:"DARK_FORCE",limitBreakBuff:"DARK_FORCE",mainStat:"strength",zh:""},GNB:{role:"TANK",implementationLevel:"LIVE",limitBreak:"GUNMETAL_SOUL",limitBreakBuff:"GUNMETAL_SOUL",mainStat:"strength",zh:""}}),pS=ue()({WHM:{role:"HEALER",implementationLevel:"TESTING",usesMp:!0,limitBreak:"PULSE_OF_LIFE",mainStat:"mind",zh:""},SCH:{role:"HEALER",implementationLevel:"TESTING",usesMp:!0,limitBreak:"ANGEL_FEATHERS",mainStat:"mind",zh:""},AST:{role:"HEALER",implementationLevel:"TESTING",usesMp:!0,limitBreak:"ASTRAL_STASIS",mainStat:"mind",zh:""},SGE:{role:"HEALER",implementationLevel:"TESTING",usesMp:!0,limitBreak:"TECHNE_MAKRE",mainStat:"mind",zh:""}}),Zb=ue()({MNK:{role:"MELEE",implementationLevel:"LIVE",limitBreak:"FINAL_HEAVEN",mainStat:"strength",zh:""},DRG:{role:"MELEE",implementationLevel:"LIVE",limitBreak:"DRAGONSONG_DIVE",mainStat:"strength",zh:""},NIN:{role:"MELEE",implementationLevel:"LIVE",limitBreak:"CHIMATSURI",mainStat:"dexterity",zh:""},SAM:{role:"MELEE",implementationLevel:"LIVE",limitBreak:"DOOM_OF_THE_LIVING",mainStat:"strength",zh:""},RPR:{role:"MELEE",implementationLevel:"LIVE",limitBreak:"THE_END",mainStat:"strength",zh:""},VPR:{role:"MELEE",implementationLevel:"LIVE",limitBreak:"WORLD_SWALLOWER",mainStat:"dexterity",zh:""}}),$b=ue()({BRD:{role:"RANGED",implementationLevel:"LIVE",limitBreak:"SAGITTARIUS_ARROW",mainStat:"dexterity",zh:""},MCH:{role:"RANGED",implementationLevel:"LIVE",limitBreak:"SATELLITE_BEAM",mainStat:"dexterity",zh:""},DNC:{role:"RANGED",implementationLevel:"LIVE",limitBreak:"CRIMSON_LOTUS",mainStat:"dexterity",zh:""}}),Qb=ue()({BLM:{role:"CASTER",implementationLevel:"LIVE",usesMp:!0,limitBreak:"METEOR",mainStat:"intelligence",zh:""},SMN:{role:"CASTER",implementationLevel:"LIVE",usesMp:!0,limitBreak:"TERAFLARE",mainStat:"intelligence",zh:""},RDM:{role:"CASTER",implementationLevel:"LIVE",usesMp:!0,limitBreak:"VERMILLION_SCOURGE",mainStat:"intelligence",zh:""},PCT:{role:"CASTER",implementationLevel:"LIVE",usesMp:!0,limitBreak:"CHROMATIC_FANTASY",mainStat:"intelligence",zh:""}}),Jb=ue()({BLU:{role:"LIMITED",implementationLevel:"TESTING",usesMp:!0,mainStat:"intelligence",zh:""}}),mt={...qb,...pS,...Zb,...$b,...Qb,...Jb,...ue()({NEVER:{role:"LIMITED",implementationLevel:"UNIMPLEMENTED",usesMp:!1,mainStat:"strength",zh:""}})},Jo=Object.keys(mt),bi=Object.keys(qb),va=Object.keys(pS),Ei=Object.keys(Zb),go=Object.keys($b),Ma=Object.keys(Qb),es=Object.keys(Jb);var Ti=(e=>(e[e.ManaGain=0]="ManaGain",e[e.MpTick=1]="MpTick",e[e.LucidTick=2]="LucidTick",e[e.MeditateTick=3]="MeditateTick",e[e.AutoTick=4]="AutoTick",e))(Ti||{}),xs;class xe{constructor(t,n,a){re(this,"name");Fe(this,xs);re(this,"timeTillEvent");re(this,"delay");re(this,"effectFn");re(this,"canceled");this.name=t,Le(this,xs,[]),this.timeTillEvent=n,this.delay=n,this.effectFn=a,this.canceled=!1}hasTag(t){for(let n=0;n<te(this,xs).length;n++)if(t===te(this,xs)[n])return!0;return!1}addTag(t){this.hasTag(t)||te(this,xs).push(t)}}xs=new WeakMap;class e0{constructor(t,n){re(this,"maxValue");re(this,"currentValue");this.maxValue=t,this.currentValue=n}availableAmount(){return this.currentValue}consume(t){this.currentValue<t-_n.epsilon&&console.warn(`invalid resource consumption: ${this.type}, ${this.currentValue} - ${t}`),this.currentValue=Math.max(this.currentValue-t,0)}gain(t){this.currentValue=Math.min(this.currentValue+t,this.maxValue)}overrideCurrentValue(t){(t<0||t>this.maxValue)&&console.warn(`invalid resource value override: ${this.type}, ${t} should be in [0, ${this.maxValue}]`),this.currentValue=t}}var md;class On extends e0{constructor(n,a,s,c=!1){super(a,s);re(this,"type");re(this,"enabled");re(this,"warnOnOvercap");re(this,"pendingChange");Fe(this,md);this.type=n,this.enabled=!0,this.warnOnOvercap=c}available(n){return this.availableAmount()+_n.epsilon>=n}availableAmountIncludingDisabled(){return this.currentValue}availableAmount(){return this.enabled?super.availableAmount():0}gain(n){this.warnOnOvercap&&this.currentValue+n>this.maxValue&&p.reportWarning({kind:"overcap",rsc:this.type}),super.gain(n)}gainWrapping(n){this.currentValue=(this.currentValue+n)%(this.maxValue+1)}overrideTimer(n,a){this.pendingChange?(n.addEvent(new xe("override "+this.pendingChange.name+" timer: "+a,0,()=>{this.pendingChange&&(this.pendingChange.timeTillEvent=a)})),this.pendingChange.timeTillEvent=a):console.error(`Failed to override non-pending resource timer for resource: ${this.type}`)}removeTimer(){this.pendingChange&&(this.pendingChange.canceled=!0,this.pendingChange=void 0)}getLastExpirationTime(){return te(this,md)}consume(n){super.consume(n),this.currentValue===0&&Le(this,md,p.game.getDisplayTime())}}md=new WeakMap;var Tc,wl,Ga;class ze extends e0{constructor(n,a,s,c){super(s,c);re(this,"type");Fe(this,Tc);Fe(this,wl);Fe(this,Ga);this.type=n,Le(this,Tc,a),Le(this,wl,a),Le(this,Ga,0)}currentStackCd(){return te(this,wl)}maxStacks(){return this.maxValue}useStack(){this.stacksAvailable()===this.maxStacks()&&Le(this,Ga,te(this,wl)),super.consume(1)}useStackWithRecast(n){console.assert(this.maxStacks()===1,"class CoolDown assumes special recasts are only available for skills with at most 1 stack"),Le(this,wl,n),this.useStack()}restore(n){for(;n>0&&super.availableAmount()<this.maxStacks();){const a=Math.min(te(this,Ga),n);Le(this,Ga,te(this,Ga)-a),te(this,Ga)<_n.epsilon&&(super.gain(1),Le(this,wl,te(this,Tc)),this.stacksAvailable()<this.maxStacks()&&Le(this,Ga,te(this,Ga)+te(this,Tc))),n-=a}}timeTillNextStackAvailable(){return te(this,Ga)}overrideTimeTillNextStack(n){Le(this,Ga,n)}stacksAvailable(){return super.availableAmount()}}Tc=new WeakMap,wl=new WeakMap,Ga=new WeakMap;var Pl;class qk{constructor(t){re(this,"game");Fe(this,Pl);this.game=t,Le(this,Pl,new Map)}forEach(t){te(this,Pl).forEach(t)}get(t){const n=te(this,Pl).get(t);return n||(console.assert(!1,`no cooldown for resource ${t}`),new ze("NEVER",0,0,0))}set(t){te(this,Pl).set(t.type,t)}tick(t){for(const n of te(this,Pl).values())n.restore(t)}timeTillNextStackAvailable(t){return this.get(t).timeTillNextStackAvailable()}timeTillAnyStackAvailable(t){const n=this.get(t);return n.stacksAvailable()>0?0:n.timeTillNextStackAvailable()}}Pl=new WeakMap;var Sc;class Zk{constructor(t){re(this,"game");Fe(this,Sc);this.game=t,Le(this,Sc,new Map)}get(t){const n=te(this,Sc).get(t);return n||(console.error(`could not find resource ${t}`),new On("NEVER",0,0))}set(t){te(this,Sc).set(t.type,t)}timeTillReady(t){const n=this.get(t);return n.pendingChange?n.pendingChange.timeTillEvent:0}addResourceEvent(t){const n=this.get(t.rscType),a=new xe(t.name,t.delay,()=>{n.pendingChange=void 0,t.fnOnRsc(n)});n.pendingChange=a,t.tags&&t.tags.forEach(s=>{a.addTag(s)}),this.game.addEvent(a)}takeResourceLock(t,n){this.get(t).consume(1),this.addResourceEvent({rscType:t,name:"[resource ready] "+t,delay:n,fnOnRsc:a=>{a.gain(1)}})}}Sc=new WeakMap;var Yo;class $k{constructor(t){re(this,"game");Fe(this,Yo);this.game=t,Le(this,Yo,Array(ja).fill(0).map(()=>new Map))}initialize(t){const n=jt(this.game.job,t);for(let a=0;a<ja;a++){const s=new On(t,n.maxValue,n.defaultValue,n.warnOnOvercap);s.tickCount=0,te(this,Yo)[a].set(t,s)}}hasAny(t){return te(this,Yo).some(n=>n.has(t))}hasAnyActive(t){return te(this,Yo).some(n=>{var a;return(a=n.get(t))==null?void 0:a.available(1)})}get(t,n){if(n<1||n>ja){console.error("targetNumber "+n+" is out of range");const s=new On("NEVER",0,0);return s.tickCount=0,s}const a=te(this,Yo)[n-1].get(t);if(a)return a;{console.error(`could not find debuff ${t}`);const s=new On("NEVER",0,0);return s.tickCount=0,s}}set(t,n){if(n<1||n>ja){console.error("targetNumber "+n+" is out of range");return}te(this,Yo)[n-1].set(t.type,t)}timeTillExpiry(t,n){if(n<1||n>ja)return console.error("targetNumber "+n+" is out of range"),0;const a=this.get(t,n);return a.pendingChange?a.pendingChange.timeTillEvent:0}addDebuffEvent(t){const n=this.get(t.rscType,t.targetNumber),a=new xe(t.name,t.delay,()=>{n.pendingChange=void 0,t.fnOnRsc(n)});n.pendingChange=a,t.tags&&t.tags.forEach(s=>{a.addTag(s)}),this.game.addEvent(a)}}Yo=new WeakMap;const Gf=new Map,t0=new Map,n0=new Map,i0=new Map;function wN(e){return t0.get(e.toLowerCase())??n0.get(e)??i0.get(e)}function jt(e,t){const n=Gf.get(e);return n.has(t)||console.error(`no resource info found for ${t}`),n.get(t)}function Ao(e){return Gf.has(e)||console.error("could not find resources for job "+e),Gf.get(e)}function Je(e,t,n,a){Ao(e).set(t,{isCoolDown:!1,defaultValue:a.default??0,maxValue:n,maxTimeout:a.timeout??-1,warnOnOvercap:a.warnOnOvercap??!1,warnOnTimeout:a.warnOnTimeout??!1});const s=Ke[t].label;t0.set(Ke[t].name.toLowerCase(),t),(s==null?void 0:s.zh)!==void 0&&n0.set(s.zh,t),(s==null?void 0:s.ja)!==void 0&&i0.set(s.ja,t)}Jo.forEach(e=>{Gf.set(e,new Map([["cd_GCD",{isCoolDown:!0,maxStacks:1,cdPerStack:2.5}]])),Je(e,"IN_COMBAT",1,{default:0}),Je(e,"MANA",1e4,{default:1e4}),Je(e,"TINCTURE",1,{timeout:30}),Je(e,"SPRINT",1,{timeout:10}),Je(e,"PARTY_SIZE",8,{default:8}),Je(e,"AUTOS_ENGAGED",1,{default:0}),Je(e,"STORED_AUTO",1,{default:0})});Ei.forEach(e=>{Je(e,"REAR_POSITIONAL",1,{default:1}),Je(e,"FLANK_POSITIONAL",1,{default:1})});function id(e,t,n,a=1){Ao(e).set(t,{isCoolDown:!0,cdPerStack:n,maxStacks:a})}class NS{constructor(t){re(this,"type");re(this,"timeTillFullOrDrop");re(this,"stacks");re(this,"effectOrTimerEnabled");this.type=t.type,this.timeTillFullOrDrop=t.timeTillFullOrDrop,this.stacks=t.stacks,this.effectOrTimerEnabled=t.effectOrTimerEnabled}equals(t){return this.type===t.type&&this.timeTillFullOrDrop===t.timeTillFullOrDrop&&this.stacks===t.stacks&&this.effectOrTimerEnabled===t.effectOrTimerEnabled}static fromGameState(t){const n=[];return t.cooldowns.forEach((a,s)=>{a.availableAmount(),n.push(new NS({type:s,timeTillFullOrDrop:a.maxValue-a.availableAmount(),stacks:0,effectOrTimerEnabled:!0}))}),n}applyTo(t){const n=Ao(t.job).get(this.type);if(!n){console.assert(!1,`can't apply override ${this.type} to job ${t.job}`);return}if(n.isCoolDown){const a=t.cooldowns.get(this.type),s=a.maxStacks()*a.currentStackCd()-this.timeTillFullOrDrop,c=Math.floor((s+_n.epsilon)/a.currentStackCd()),d=this.timeTillFullOrDrop%a.currentStackCd();a.overrideCurrentValue(c),a.overrideTimeTillNextStack(d)}else{const a=t.resources.get(this.type),s=c=>{a.removeTimer(),t.resources.addResourceEvent({rscType:a.type,name:"drop "+a.type,delay:c,fnOnRsc:d=>{a.type==="ENOCHIAN"?t.loseEnochian():d.consume(d.availableAmount())}})};if(a.type==="LEY_LINES")a.consume(a.availableAmount()),a.gain(1),s(this.timeTillFullOrDrop),a.enabled=this.effectOrTimerEnabled;else if(a.type==="POLYGLOT"){const c=this.stacks;a.consume(a.availableAmount()),a.gain(c);const d=this.timeTillFullOrDrop;d>0&&a.overrideTimer(t,d)}else{const c=this.stacks;a.consume(a.availableAmount()),a.gain(c);const d=this.timeTillFullOrDrop;c>0&&n.maxTimeout>=0&&s(d)}}}serialized(){return{type:this.type,timeTillFullOrDrop:this.timeTillFullOrDrop,stacks:this.stacks,effectOrTimerEnabled:this.effectOrTimerEnabled}}}const Jt=.8,si=.01;function ad(e,t){}function Pe(e,...t){return(n,a)=>{e!==void 0&&e(n,a);for(const s of t)s!==void 0&&s(n,a)}}function Id(e,...t){return n=>(e===void 0||e(n))&&t.every(a=>a===void 0||a(n))}const Vs=new Map,CS=new Map;Jo.forEach(e=>{Vs.set(e,new Map),CS.set(e,new Map)});const Bf=new Map,IE="General/Missing.png",qa=new Map;qa.set(AS.ENERGY_DRAIN.id,"ENERGY_DRAIN");qa.set(AS.PHYSICK.id,"PHYSICK");qa.set(Ub.MOUNTAIN_BUSTER.id,"MOUNTAIN_BUSTER");qa.set(45960,"ENCHANTED_RIPOSTE");qa.set(45961,"ENCHANTED_ZWERCHHAU");qa.set(45962,"ENCHANTED_REDOUBLEMENT");qa.set(18805,"TEN");qa.set(18806,"CHI");qa.set(18807,"JIN");const PN=new Set,ET=new Map,a0=new Map,o0=new Map,GN=new Map([["Lightning Shock","Lightning Shot"],["Wanderer's Minuet","The Wanderer's Minuet"],["Apex Arow","Apex Arrow"],["Storms Eye","Storm's Eye"],["Storms Path","Storm's Path"]]);function bS(e){return GN.has(e)&&(e=GN.get(e)),e=e.toLowerCase(),!ET.has(e)&&!PN.has(e)&&(console.error(`could not find skill with name: ${e}`),PN.add(e)),ET.get(e)}function Qk(e){return e in Ke?e:Pf.findResourceKey(e)}function ho(e,t){return Vs.get(e).get(t)}function l0(e){return Bf.get(e)??IE}function Jk(e,t){return Vs.get(e).has(t)}function _E(e,t,n){Vs.get(e).set(t,n),CS.get(e).set(bn[t].discordEmote??bn[t].name.replaceAll(" ",""),t),ET.set(bn[t].name.toLowerCase(),t);const a=bn[t].label;(a==null?void 0:a.zh)!==void 0&&a0.set(a.zh,t),(a==null?void 0:a.ja)!==void 0&&o0.set(a.ja,t),Bf.set(t,n.assetPath),bn[t].id!==void 0&&qa.set(bn[t].id,t)}function Ii(e,t){return e===void 0?n=>t||0:typeof e=="number"?n=>e:e}function eU(e){return console.assert(e.length>0,`invalid trait potency array: ${e}`),t=>{let n;const a=t.config.level;for(const[s,c]of e)t.hasTraitUnlocked(s)&&(n=c);return console.assert(n!==void 0,`no applicable potency at level ${a} found in array ${e}`),n||0}}function cn(e,t){return(Array.isArray(t)?eU(t):Ii(t,0))(e)}function OS(e,t){const n=bn[t].name;return`${e}/${n.replace(":","")}.png`}function oa(e,t,n,a){Array.isArray(e)||(e=[e]);const s=Pe((h,m)=>m.applicationTime=h.time,a.onApplication),c=Pe(h=>h.maybeCancelChanneledSkills(t),a.onExecute),d=h=>{const m=[];return a.potency&&(a.combo||a.positional)&&m.push(...h.computeComboAndPositionalModifiers(cn(h,a.potency),a.combo,a.positional)),a.jobPotencyModifiers&&m.push(...a.jobPotencyModifiers(h)),m},f={kind:"spell",name:t,assetPath:a.assetPath??(e.length===1?OS(e[0],t):IE),unlockLevel:n,autoUpgrade:a.autoUpgrade,autoDowngrade:a.autoDowngrade,cdName:"cd_GCD",secondaryCd:a.secondaryCooldown,aspect:a.aspect??Ne.Other,replaceIf:a.replaceIf??[],startOnHotbar:a.startOnHotbar??!0,highlightIf:a.highlightIf??(h=>!1),castTimeFn:Ii(a.castTime,0),recastTimeFn:Ii(a.recastTime,2.5),animationLockFn:h=>Ii(a.animationLock,h.config.animationLock)(h),manaCostFn:Ii(a.manaCost,0),potencyFn:h=>cn(h,a.potency),jobPotencyModifiers:d,jobTargetPotencyModifiers:a.jobTargetPotencyModifiers??(h=>new Map),drawsAggro:a.drawsAggro??!1,savesTargets:a.savesTargets??!1,falloff:a.falloff,healingPotencyFn:h=>cn(h,a.healingPotency),jobHealingPotencyModifiers:a.jobHealingPotencyModifiers??(h=>[]),aoeHeal:a.aoeHeal??!1,validateAttempt:a.validateAttempt??(h=>!0),isInstantFn:a.isInstantFn??(h=>!1),onExecute:c,onConfirm:a.onConfirm??ad,onApplication:s,applicationDelay:a.applicationDelay??0,startsAuto:a.startsAuto??!1};if(e.forEach(h=>_E(h,f.name,f)),a.secondaryCooldown!==void 0){const{cdName:h,cooldown:m,maxCharges:R}=a.secondaryCooldown;e.forEach(T=>id(T,h,m,R))}return f}function un(e,t,n,a){Array.isArray(e)||(e=[e]);const s=Pe((h,m)=>m.applicationTime=h.time,a.onApplication),c=Pe(h=>h.maybeCancelChanneledSkills(t),a.onExecute),d=h=>{const m=[];return a.potency&&(a.combo||a.positional)&&m.push(...h.computeComboAndPositionalModifiers(cn(h,a.potency),a.combo,a.positional)),a.jobPotencyModifiers&&m.push(...a.jobPotencyModifiers(h)),m},f={kind:"weaponskill",name:t,assetPath:a.assetPath??(e.length===1?OS(e[0],t):IE),unlockLevel:n,autoUpgrade:a.autoUpgrade,autoDowngrade:a.autoDowngrade,cdName:"cd_GCD",secondaryCd:a.secondaryCooldown,aspect:a.aspect??Ne.Other,replaceIf:a.replaceIf??[],startOnHotbar:a.startOnHotbar??!0,highlightIf:a.highlightIf??(h=>!1),castTimeFn:Ii(a.castTime,0),recastTimeFn:Ii(a.recastTime,2.5),animationLockFn:h=>Ii(a.animationLock,h.config.animationLock)(h),manaCostFn:Ii(a.manaCost,0),potencyFn:h=>cn(h,a.potency),jobPotencyModifiers:d,jobTargetPotencyModifiers:a.jobTargetPotencyModifiers??(h=>new Map),drawsAggro:a.drawsAggro??!1,savesTargets:a.savesTargets??!1,falloff:a.falloff,healingPotencyFn:h=>cn(h,a.healingPotency),jobHealingPotencyModifiers:a.jobHealingPotencyModifiers??(h=>[]),aoeHeal:a.aoeHeal??!1,validateAttempt:a.validateAttempt??(h=>!0),isInstantFn:a.isInstantFn??(h=>!0),onExecute:c,onConfirm:a.onConfirm??ad,onApplication:s,applicationDelay:a.applicationDelay??0,startsAuto:a.startsAuto??!0};if(e.forEach(h=>_E(h,f.name,f)),a.secondaryCooldown!==void 0){const{cdName:h,cooldown:m,maxCharges:R}=a.secondaryCooldown;e.forEach(T=>id(T,h,m,R))}return f}function st(e,t,n,a,s){Array.isArray(e)||(e=[e]);const c=Pe((m,R)=>R.applicationTime=m.time,s.onApplication),d=Pe(m=>m.maybeCancelChanneledSkills(t),s.onExecute),f=Id(m=>s.requiresCombat?m.isInCombat():!0,s.validateAttempt??(m=>!0)),h={kind:"ability",name:t,assetPath:s.assetPath??(e.length===1?OS(e[0],t):IE),requiresCombat:s.requiresCombat,unlockLevel:n,autoUpgrade:s.autoUpgrade,autoDowngrade:s.autoDowngrade,cdName:a,secondaryCd:s.secondaryCooldown,aspect:s.aspect??Ne.Other,replaceIf:s.replaceIf??[],startOnHotbar:s.startOnHotbar??!0,highlightIf:s.highlightIf??(m=>!1),animationLockFn:m=>Ii(s.animationLock,m.config.animationLock)(m),manaCostFn:Ii(s.manaCost,0),potencyFn:m=>cn(m,s.potency),jobPotencyModifiers:s.jobPotencyModifiers??(m=>[]),jobTargetPotencyModifiers:s.jobTargetPotencyModifiers??(m=>new Map),drawsAggro:s.drawsAggro??!1,savesTargets:s.savesTargets??!1,falloff:s.falloff,healingPotencyFn:m=>cn(m,s.healingPotency),jobHealingPotencyModifiers:s.jobHealingPotencyModifiers??(m=>[]),aoeHeal:s.aoeHeal??!1,applicationDelay:s.applicationDelay??0,validateAttempt:f,onExecute:d,onConfirm:s.onConfirm??ad,onApplication:c,startsAuto:s.startsAuto??!1};if(e.forEach(m=>_E(m,h.name,h)),s.cooldown!==void 0&&e.forEach(m=>id(m,a,s.cooldown,s.maxCharges??1)),s.secondaryCooldown!==void 0){const{cdName:m,cooldown:R,maxCharges:T}=s.secondaryCooldown;e.forEach(S=>id(S,m,R,T))}return h}function Ze(e,t,n,a,s){const c=Pe((d,f)=>{const h=d.resources.get(s.rscType),m=s.duration??jt(d.job,s.rscType).maxTimeout,R=typeof m=="number"?T=>m:m;h.gain(h.maxValue),d.enqueueResourceDrop(s.rscType,R(d))},s==null?void 0:s.onApplication);return st(e,t,n,a,{...s,onApplication:c})}function Oi(e,t,n,a){Array.isArray(e)||(e=[e]);const s="Limit Break "+a.tier,c=Pe(f=>f.maybeCancelChanneledSkills(t),a.onExecute),d={kind:"limitbreak",name:t,animationLockFn:f=>a.animationLock,assetPath:`General/${s}.png`,unlockLevel:1,autoUpgrade:void 0,autoDowngrade:void 0,cdName:n,secondaryCd:void 0,aspect:Ne.Other,replaceIf:[],startOnHotbar:!0,castTimeFn:Ii(a.castTime,0),highlightIf:f=>!1,manaCostFn:f=>0,potencyFn:Ii(a.potency,0),jobPotencyModifiers:f=>[],jobTargetPotencyModifiers:f=>new Map,healingPotencyFn:Ii(a.healingPotency,0),jobHealingPotencyModifiers:f=>[],aoeHeal:!1,drawsAggro:!1,savesTargets:!1,applicationDelay:a.applicationDelay??0,validateAttempt:a.validateAttempt??(f=>!0),onExecute:c,onConfirm:a.onConfirm??ad,onApplication:a.onApplication??ad,startsAuto:!1};return e.forEach(f=>_E(f,d.name,d)),e.forEach(f=>id(f,n,(a.castTime??0)+a.animationLock,1)),d}class tU{constructor(t){re(this,"job");this.job=t.job}get(t){const n=Vs.get(this.job).get(t);return n||(console.error(`creating placeholder skill ${t} for ${this.job}`),st([this.job],t,1,"NEVER",{validateAttempt:a=>!1}))}}function Mc(e,t,n){let a=ho(e,t);for(;a.autoUpgrade&&xb(a.autoUpgrade.trait,n);)a=ho(e,Mc(e,a.autoUpgrade.otherSkill,n));for(;a.autoDowngrade&&n<a.unlockLevel;)a=ho(e,Mc(e,a.autoDowngrade.otherSkill,n));return a.name}function s0(e,t){const n=ho(t.job,e);for(const a of n.replaceIf){if(a.newSkill===e)continue;const s=ho(t.job,a.newSkill);if(!s)throw new Error("couldn't find skill info for "+a.newSkill);if(t.config.level>=s.unlockLevel&&a.condition(t))return Mc(t.job,a.newSkill,t.config.level)}return Mc(t.job,n.name,t.config.level)}var gc;class nU{constructor(t,n){Fe(this,gc);Le(this,gc,[]),console.assert(Vs.has(t),`No skill map found for job: ${t}`);for(const s of Vs.get(t).values())s.name!=="NEVER"&&s.cdName!=="NEVER"&&n>=s.unlockLevel&&s.autoDowngrade===void 0&&s.startOnHotbar&&te(this,gc).push(Mc(t,s.name,n));let a=Bf.get("TINCTURE");switch(mt[t].role){case"TANK":case"MELEE":t==="NIN"||t==="VPR"?a="Role/Dexterity Tincture.png":a="Role/Strength Tincture.png";break;case"HEALER":a="Role/Mind Tincture.png";break;case"LIMITED":case"CASTER":a="Role/Intelligence Tincture.png";break;case"RANGED":a="Role/Dexterity Tincture.png";break}Bf.set("TINCTURE",a)}getCurrentSkillNames(t){return te(this,gc).map(n=>s0(n,t))}}gc=new WeakMap;var je=(e=>(e.Skill="Skill",e.Wait="Wait",e.JumpToTimestamp="JumpToTimestamp",e.WaitForMP="WaitForMP",e.SetResourceEnabled="SetResourceEnabled",e.Unknown="Unknown",e.Invalid="Invalid",e))(je||{});function jl(e,t){return new ia({type:"Skill",skillName:e,targetList:t??[1],healTargetCount:void 0})}function iU(e,t){return new ia({type:"Unknown",skillName:e,targetList:t??[1],healTargetCount:void 0})}function dc(e){return new ia({type:"Wait",waitDuration:e})}function Bl(e){return new ia({type:"JumpToTimestamp",targetTime:e})}function r0(){return new ia({type:"WaitForMP"})}function mT(e,t){return new ia({type:"SetResourceEnabled",buffName:e,targetNumber:t})}var Ic,Fi,Ba,Ko,ro,_c,pc,Nc,Cc;const Dg=class Dg{constructor(t,n){Fe(this,Ic);Fe(this,Fi);Fe(this,Ba);Fe(this,Ko);Fe(this,ro);re(this,"applicationTime");Fe(this,_c);Fe(this,pc);Fe(this,Nc);Fe(this,Cc);re(this,"info");re(this,"legacyWaitDuration");re(this,"tmp_startLockTime");re(this,"tmp_endLockTime");re(this,"tmp_invalid_reasons");this.info=t,Le(this,Ic,new Set),Le(this,Ba,new Map),Le(this,ro,new Map),Le(this,_c,new Map),Le(this,pc,new Map),Le(this,Nc,new Map),Le(this,Cc,new Map),this.legacyWaitDuration=n,this.tmp_invalid_reasons=[]}serialized(){return this.info.type==="Skill"?{type:"Skill",skillName:bn[this.info.skillName].name,targetList:this.info.targetList,healTargetCount:this.info.healTargetCount}:this.info.type==="SetResourceEnabled"?{type:"SetResourceEnabled",buffName:this.info.buffName.toString(),targetNumber:this.info.targetNumber}:this.info.type==="Unknown"?{type:"Skill",skillName:this.info.skillName,targetList:this.info.targetList,healTargetCount:this.info.healTargetCount}:this.info}toLocalizedString(){if(this.info.type==="Skill")return aa(this.info.skillName);if(this.info.type==="SetResourceEnabled")return N({en:"toggle ",zh:""}).toString()+Qe(this.info.buffName);if(this.info.type==="Wait"){const t=this.info.waitDuration.toFixed(3);return N({en:`wait ${t}`,zh:`${t}`}).toString()}else{if(this.info.type==="WaitForMP")return N({en:"wait MP",zh:""}).toString();if(this.info.type==="JumpToTimestamp"){const t=this.info.targetTime.toFixed(3);return N({en:`jump ${t}`,zh:`${t}`}).toString()}}return"(unknown)"}maybeGetActionKey(){return this.info.type==="Skill"?this.info.skillName:void 0}get targetList(){return this.info.type==="Skill"?this.info.targetList.slice():[]}set targetList(t){this.info.type==="Skill"&&(this.info.targetList=t)}get healTargetCount(){return this.info.type==="Skill"?this.info.healTargetCount??0:0}getNameForMessage(){return this.info.type==="Skill"?bn[this.info.skillName].name:this.info.type.toString()}getClone(){return new Dg(this.info,this.legacyWaitDuration)}addBuff(t){te(this,Ic).add(t)}hasBuff(t){return te(this,Ic).has(t)}hasPartyBuff(){var n;const t=(n=te(this,Fi))==null?void 0:n.snapshotTime;return t!==void 0&&p.game.getPartyBuffs(t).size>0}getPartyBuffs(){var n;const t=(n=te(this,Fi))==null?void 0:n.snapshotTime;return t?[...p.game.getPartyBuffs(t).keys()]:[]}forceOneTarget(){this.info.type==="Skill"&&(this.info.targetList=[this.info.targetList.length>0?this.info.targetList[0]:1])}setHealTargetCount(t){this.info.type==="Skill"&&(this.info.healTargetCount=t)}resolveAll(t){te(this,Fi)&&te(this,Fi).resolve(t),te(this,Ba).forEach(n=>{n.forEach(a=>{a.resolve(t)})})}resolved(){return this.applicationTime!==void 0}hitBoss(t){var n;return((n=te(this,Fi))==null?void 0:n.hasHitBoss(t))??!0}getPotency(t){const n={applied:0,snapshottedButPending:0};return te(this,Fi)&&this.recordPotency(t,te(this,Fi),n),t.excludeDoT||te(this,Ba).forEach(a=>{a.forEach(s=>{this.recordPotency(t,s,n)})}),n}getHealingPotency(t){const n={applied:0,snapshottedButPending:0};return te(this,Ko)&&this.recordPotency(t,te(this,Ko),n),t.excludeHoT||te(this,ro).forEach(a=>{a.forEach(s=>{this.recordPotency(t,s,n)})}),n}recordPotency(t,n,a){t.targetNumber!==void 0&&!n.hasTarget(t.targetNumber)||(n.hasHitBoss(t.untargetable)?a.applied+=n.getAmount(t):!n.hasResolved()&&n.hasSnapshotted()&&(a.snapshottedButPending+=n.getAmount(t)))}removeUnresolvedOvertimePotencies(t,n){(t==="damage"?te(this,Ba):te(this,ro)).forEach(s=>{for(let c=0;c<s.length;c++){const d=s[c];if(!d.hasResolved()&&(n!==void 0&&d.tryRemoveTarget(n),n===void 0||d.targetList.length===0)){s.splice(c);break}}})}anyPotencies(){return te(this,Fi)!==void 0||te(this,Ba).size>0}anyHealingPotencies(){return te(this,Ko)!==void 0||te(this,ro).size>0}getInitialPotency(){return te(this,Fi)}getInitialHealingPotency(){return te(this,Ko)}getAllDotPotencies(){return this.getAllOverTimePotencies("damage")}getAllHotPotencies(){return this.getAllOverTimePotencies("healing")}getAllOverTimePotencies(t){return t==="damage"?te(this,Ba):te(this,ro)}getDotPotencies(t){return this.getOverTimePotencies(t,"damage")}getHotPotencies(t){return this.getOverTimePotencies(t,"healing")}getOverTimePotencies(t,n){return n==="damage"?te(this,Ba).get(t)??[]:te(this,ro).get(t)??[]}addPotency(t){console.assert(!te(this,Fi),`ActionNode for ${this.getNameForMessage()} already had an initial potency`),Le(this,Fi,t)}addHealingPotency(t){console.assert(!te(this,Ko),`ActionNode for ${this.getNameForMessage()} already had an initial healing potency`),Le(this,Ko,t)}addDoTPotency(t,n){this.addOverTimePotency(t,n,"damage")}addHoTPotency(t,n){this.addOverTimePotency(t,n,"healing")}addOverTimePotency(t,n,a){const s=a==="damage"?te(this,Ba):te(this,ro),c=s.get(n)??[];c.length===0&&s.set(n,c),c.push(t)}setOverTimeGap(t,n,a,s){this.setOverTimeMappedAmount(t,n,a,a==="damage"?te(this,pc):te(this,Cc),s)}getOverTimeGap(t,n,a){return this.getOverTimeMappedAmount(t,n,n==="damage"?te(this,pc):te(this,Cc),a)}setOverTimeOverrideAmount(t,n,a,s){this.setOverTimeMappedAmount(t,n,a,a==="damage"?te(this,_c):te(this,Nc),s)}getOverTimeOverrideAmount(t,n,a){return this.getOverTimeMappedAmount(t,n,n==="damage"?te(this,_c):te(this,Nc),a)}setOverTimeMappedAmount(t,n,a,s,c){if(s.has(t)||s.set(t,new Map),c!==void 0)s.get(t).set(c,n);else{const d=this.getOverTimePotencies(t,a)[0].targetList;d==null||d.forEach(f=>s.get(t).set(f,n))}}getOverTimeMappedAmount(t,n,a,s){if(a.has(t)||a.set(t,new Map),s!==void 0)return a.get(t).get(s)??0;{const c=this.getOverTimePotencies(t,n)[0].targetList[0]??1;return a.get(t).get(c)??0}}};Ic=new WeakMap,Fi=new WeakMap,Ba=new WeakMap,Ko=new WeakMap,ro=new WeakMap,_c=new WeakMap,pc=new WeakMap,Nc=new WeakMap,Cc=new WeakMap;let ia=Dg;class Lc{constructor(){re(this,"actions");re(this,"name","(anonymous line)");this.actions=[]}get length(){return this.actions.length}get head(){return this.length>0?this.actions[0]:void 0}get tail(){return this.length>0?this.actions[this.actions.length-1]:void 0}get tailIndex(){return this.length-1}prependActionNode(t){console.assert(t!==void 0),this.actions.unshift(t)}insertActionNodes(t,n){t.length>0&&this.actions.splice(n,0,...t)}addActionNode(t){console.assert(t!==void 0),this.actions.push(t)}iterateAll(t){this.actions.forEach(n=>t(n))}serialized(){return{name:this.name,actions:this.actions.map(t=>t.serialized())}}exportCsv(){return[]}static deserialize(t){const n=t.map(s=>{if(s.type==="Skill"){const c=bS(s.skillName),d="waitDuration"in s?s.waitDuration:void 0,f=s.targetCount!==void 0?Array(s.targetCount).fill(0).map((h,m)=>m+1):s.targetList??[1];return new ia(c!==void 0?{type:"Skill",skillName:c,targetList:f,healTargetCount:s.healTargetCount}:{type:"Unknown",skillName:s.skillName,targetList:f,healTargetCount:s.healTargetCount},d)}else if(s.type==="SetResourceEnabled"){const c="waitDuration"in s?s.waitDuration:void 0;return new ia({type:"SetResourceEnabled",buffName:Qk(s.buffName),targetNumber:s.targetNumber??1},c)}else return s.type==="Wait"||s.type==="JumpToTimestamp"||s.type==="WaitForMP"?new ia(s):(window.alert("unparseable action: "+JSON.stringify(s)),new ia({type:"Invalid"}))}),a=new Lc;return a.actions=n,a}}var Ad,AT;const yg=class yg extends Lc{constructor(){super(...arguments);Fe(this,Ad);re(this,"selectionStartIndex");re(this,"selectionEndIndex");re(this,"startIsPivot",!0);re(this,"config")}get selectionStart(){return this.selectionStartIndex!==void 0?this.actions[this.selectionStartIndex]:void 0}get selectionEnd(){return this.selectionEndIndex!==void 0?this.actions[this.selectionEndIndex]:void 0}getFirstSelection(){return this.selectionStart&&console.assert(this.selectionEnd!==void 0),this.selectionStart}getLastSelection(){return this.selectionEnd&&console.assert(this.selectionStart!==void 0),this.selectionEnd}isInSelection(n){return this.selectionStartIndex!==void 0&&this.selectionEndIndex!==void 0&&n>=this.selectionStartIndex&&n<=this.selectionEndIndex}iterateSelected(n){if(!(this.selectionStartIndex===void 0||this.selectionEndIndex===void 0))for(let a=this.selectionStartIndex;a<=this.selectionEndIndex;a++)n(this.actions[a])}getSelected(){const n=new Lc;return this.selectionStartIndex!==void 0&&this.selectionEndIndex!==void 0&&(n.actions=this.actions.slice(this.selectionStartIndex,this.selectionEndIndex+1)),n}getSelectionLength(){return this.selectionStartIndex===void 0||this.selectionEndIndex===void 0?0:this.selectionEndIndex-this.selectionStartIndex+1}selectSingle(n){this.unselectAll(),this.selectionStartIndex=n,this.selectionEndIndex=n,this.startIsPivot=!0}unselectAll(){this.selectionStartIndex=void 0,this.selectionEndIndex=void 0,this.startIsPivot=!0}selectUntil(n){if(this.selectionStartIndex!==void 0&&this.selectionStartIndex===this.selectionEndIndex)this.selectionStartIndex<=n?(Oe(this,Ad,AT).call(this,this.selectionStartIndex,n),this.startIsPivot=!0):(Oe(this,Ad,AT).call(this,n,this.selectionStartIndex),this.startIsPivot=!1);else if(this.selectionStartIndex!==void 0&&this.selectionStartIndex!==this.selectionEndIndex){const a=this.startIsPivot?this.selectionStartIndex:this.selectionEndIndex;this.selectionStartIndex=a,this.selectionEndIndex=a,this.selectUntil(n)}}onClickNode(n,a){a&&this.selectionStartIndex!==void 0?this.selectUntil(n):this.selectionStartIndex===n&&this.selectionEndIndex===n?this.unselectAll():this.selectSingle(n)}moveSelected(n){if(n===0||this.selectionStartIndex===void 0||this.selectionEndIndex===void 0)return;const a=this.selectionStartIndex,s=this.getSelectionLength(),c=this.actions.splice(a,s);let d=a+n;return d=Math.max(d,0),d=Math.min(d,this.length),this.actions.splice(d,0,...c),this.selectionStartIndex=d,this.selectionEndIndex=d+s-1,d}deleteSelected(){if(this.selectionStartIndex===void 0||this.selectionEndIndex===void 0)return;const n=this.selectionStartIndex;return this.actions.splice(n,this.getSelectionLength()),this.unselectAll(),n}replaceNode(n,a){a>=0&&a<this.actions.length?this.actions[a]=n:console.error("invalid index for replaceNode",a)}serialized(){var a;console.assert(this.config);const n=super.serialized();return{name:n.name,fileType:pa.Record,config:(a=this.config)==null?void 0:a.serialized(),actions:n.actions}}spliceUpTo(n){const a=this.selectionStartIndex,s=this.selectionEndIndex;this.unselectAll(),n<this.length&&this.actions.splice(n,this.length-n),a!==void 0&&(this.selectSingle(a),this.selectUntil(s))}getCloneWithSharedConfig(){const n=new yg;return n.config=this.config,n.actions=this.actions.map(a=>a.getClone()),n.selectionStartIndex=this.selectionStartIndex,n.selectionEndIndex=this.selectionEndIndex,n}};Ad=new WeakSet,AT=function(n,a){this.unselectAll(),this.selectionStartIndex=n,this.selectionEndIndex=a};let jo=yg;function aU(e){return l.jsxs("div",{style:{marginBottom:5,cursor:"pointer"},onClick:()=>{e.state===0&&e.onChange(e.state,2),e.state===1&&(console.error("Target select radio must be in PRIMARY or NONE state, but was in TARGETED. Defaulting to PRIMARY."),e.onChange(e.state,2))},children:[l.jsx("input",{className:"shellCheckbox"+(e.state===2?" checkbox-star":""),style:{cursor:"pointer"},type:"radio",role:"radio","aria-checked":e.state===2,checked:!1,onChange:()=>{}}),l.jsx("span",{children:e.i===0?N({en:"Boss 1",zh:"Boss 1"}):e.i+1})]})}function oU(e){return l.jsxs("div",{style:{marginBottom:5,cursor:"pointer"},onClick:()=>{e.state===0&&e.onChange(e.state,2),e.state===2&&e.onChange(e.state,1),e.state===1&&e.onChange(e.state,0)},children:[l.jsx("input",{className:"shellCheckbox"+(e.state===2?" checkbox-star":""),style:{cursor:"pointer"},type:"checkbox",onChange:()=>{},checked:e.state===1}),l.jsx("span",{children:e.i===0?N({en:"Boss 1",zh:"Boss 1"}):e.i+1})]})}function c0(e){const t=e.primaryOnly?aU:oU,n=e.selected.map((a,s)=>l.jsx(t,{i:s,state:e.primary===s?2:a?1:0,onChange:(c,d)=>{var m,R,T,S;let f=e.selected.slice(),h=e.primary;if(d===0){if(f[s]=!1,f.filter(g=>g).length===0)return}else d===1?f[s]=!0:d===2&&c!==2&&(e.primaryOnly&&(f=Array(f.length).fill(!1)),f[s]=!0,(m=e.onPrimaryChange)==null||m.call(e,s),h=s);if(c===2&&d!==2){for(let g=0;g<f.length;g++)if(g!==s&&f[g]){(R=e.onPrimaryChange)==null||R.call(e,g),h=g;break}}(T=e.onSelectedChange)==null||T.call(e,f),(S=e.onAnySelectionChange)==null||S.call(e,h,f)}},s));return l.jsx("div",{style:{display:"grid",grid:"auto-flow / repeat(8, 1fr)",...e.style},children:n})}var vR={exports:{}},MR,BN;function lU(){if(BN)return MR;BN=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return MR=e,MR}var LR,FN;function sU(){if(FN)return LR;FN=1;var e=lU();function t(){}function n(){}return n.resetWarningCache=t,LR=function(){function a(d,f,h,m,R,T){if(T!==e){var S=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw S.name="Invariant Violation",S}}a.isRequired=a;function s(){return a}var c={array:a,bigint:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:s,element:a,elementType:a,instanceOf:s,node:a,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:n,resetWarningCache:t};return c.PropTypes=c,c},LR}var jN;function rU(){return jN||(jN=1,vR.exports=sU()()),vR.exports}var cU=rU();const xR=QT(cU),u0=C.createContext(void 0);function _d(){const e=C.useContext(u0);if(e===void 0)throw new Error("Base UI: TooltipRootContext is missing. Tooltip parts must be placed within <Tooltip.Root>.");return e}var pd=Ob();function pE(){return typeof window<"u"}function ts(e){return d0(e)?(e.nodeName||"").toLowerCase():"#document"}function pi(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Io(e){var t;return(t=(d0(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function d0(e){return pE()?e instanceof Node||e instanceof pi(e).Node:!1}function wt(e){return pE()?e instanceof Element||e instanceof pi(e).Element:!1}function Dn(e){return pE()?e instanceof HTMLElement||e instanceof pi(e).HTMLElement:!1}function Ff(e){return!pE()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof pi(e).ShadowRoot}function Nd(e){const{overflow:t,overflowX:n,overflowY:a,display:s}=Oa(e);return/auto|scroll|overlay|hidden|clip/.test(t+a+n)&&!["inline","contents"].includes(s)}function uU(e){return["table","td","th"].includes(ts(e))}function NE(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function DS(e){const t=CE(),n=wt(e)?Oa(e):e;return["transform","translate","scale","rotate","perspective"].some(a=>n[a]?n[a]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(a=>(n.willChange||"").includes(a))||["paint","layout","strict","content"].some(a=>(n.contain||"").includes(a))}function dU(e){let t=el(e);for(;Dn(t)&&!$o(t);){if(DS(t))return t;if(NE(t))return null;t=el(t)}return null}function CE(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function $o(e){return["html","body","#document"].includes(ts(e))}function Oa(e){return pi(e).getComputedStyle(e)}function bE(e){return wt(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function el(e){if(ts(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Ff(e)&&e.host||Io(e);return Ff(t)?t.host:t}function h0(e){const t=el(e);return $o(t)?e.ownerDocument?e.ownerDocument.body:e.body:Dn(t)&&Nd(t)?t:h0(t)}function zl(e,t,n){var a;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=h0(e),c=s===((a=e.ownerDocument)==null?void 0:a.body),d=pi(s);if(c){const f=RT(d);return t.concat(d,d.visualViewport||[],Nd(s)?s:[],f&&n?zl(f):[])}return t.concat(s,zl(s,[],n))}function RT(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}const hU=["top","right","bottom","left"],ql=Math.min,na=Math.max,jf=Math.round,ef=Math.floor,fo=e=>({x:e,y:e}),fU={left:"right",right:"left",bottom:"top",top:"bottom"},EU={start:"end",end:"start"};function TT(e,t,n){return na(e,ql(t,n))}function tl(e,t){return typeof e=="function"?e(t):e}function Na(e){return e.split("-")[0]}function Zl(e){return e.split("-")[1]}function yS(e){return e==="x"?"y":"x"}function vS(e){return e==="y"?"height":"width"}function $l(e){return["top","bottom"].includes(Na(e))?"y":"x"}function MS(e){return yS($l(e))}function mU(e,t,n){n===void 0&&(n=!1);const a=Zl(e),s=MS(e),c=vS(s);let d=s==="x"?a===(n?"end":"start")?"right":"left":a==="start"?"bottom":"top";return t.reference[c]>t.floating[c]&&(d=zf(d)),[d,zf(d)]}function AU(e){const t=zf(e);return[ST(e),t,ST(t)]}function ST(e){return e.replace(/start|end/g,t=>EU[t])}function RU(e,t,n){const a=["left","right"],s=["right","left"],c=["top","bottom"],d=["bottom","top"];switch(e){case"top":case"bottom":return n?t?s:a:t?a:s;case"left":case"right":return t?c:d;default:return[]}}function TU(e,t,n,a){const s=Zl(e);let c=RU(Na(e),n==="start",a);return s&&(c=c.map(d=>d+"-"+s),t&&(c=c.concat(c.map(ST)))),c}function zf(e){return e.replace(/left|right|bottom|top/g,t=>fU[t])}function SU(e){return{top:0,right:0,bottom:0,left:0,...e}}function f0(e){return typeof e!="number"?SU(e):{top:e,right:e,bottom:e,left:e}}function Yf(e){const{x:t,y:n,width:a,height:s}=e;return{width:a,height:s,top:n,left:t,right:t+a,bottom:n+s,x:t,y:n}}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var gU=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Kf=gU.join(","),E0=typeof Element>"u",xc=E0?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Vf=!E0&&Element.prototype.getRootNode?function(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}:function(e){return e==null?void 0:e.ownerDocument},Wf=function e(t,n){var a;n===void 0&&(n=!0);var s=t==null||(a=t.getAttribute)===null||a===void 0?void 0:a.call(t,"inert"),c=s===""||s==="true",d=c||n&&t&&e(t.parentNode);return d},IU=function(t){var n,a=t==null||(n=t.getAttribute)===null||n===void 0?void 0:n.call(t,"contenteditable");return a===""||a==="true"},m0=function(t,n,a){if(Wf(t))return[];var s=Array.prototype.slice.apply(t.querySelectorAll(Kf));return n&&xc.call(t,Kf)&&s.unshift(t),s=s.filter(a),s},A0=function e(t,n,a){for(var s=[],c=Array.from(t);c.length;){var d=c.shift();if(!Wf(d,!1))if(d.tagName==="SLOT"){var f=d.assignedElements(),h=f.length?f:d.children,m=e(h,!0,a);a.flatten?s.push.apply(s,m):s.push({scopeParent:d,candidates:m})}else{var R=xc.call(d,Kf);R&&a.filter(d)&&(n||!t.includes(d))&&s.push(d);var T=d.shadowRoot||typeof a.getShadowRoot=="function"&&a.getShadowRoot(d),S=!Wf(T,!1)&&(!a.shadowRootFilter||a.shadowRootFilter(d));if(T&&S){var g=e(T===!0?d.children:T.children,!0,a);a.flatten?s.push.apply(s,g):s.push({scopeParent:d,candidates:g})}else c.unshift.apply(c,d.children)}}return s},R0=function(t){return!isNaN(parseInt(t.getAttribute("tabindex"),10))},T0=function(t){if(!t)throw new Error("No node provided");return t.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||IU(t))&&!R0(t)?0:t.tabIndex},_U=function(t,n){var a=T0(t);return a<0&&n&&!R0(t)?0:a},pU=function(t,n){return t.tabIndex===n.tabIndex?t.documentOrder-n.documentOrder:t.tabIndex-n.tabIndex},S0=function(t){return t.tagName==="INPUT"},NU=function(t){return S0(t)&&t.type==="hidden"},CU=function(t){var n=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(a){return a.tagName==="SUMMARY"});return n},bU=function(t,n){for(var a=0;a<t.length;a++)if(t[a].checked&&t[a].form===n)return t[a]},OU=function(t){if(!t.name)return!0;var n=t.form||Vf(t),a=function(f){return n.querySelectorAll('input[type="radio"][name="'+f+'"]')},s;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")s=a(window.CSS.escape(t.name));else try{s=a(t.name)}catch(d){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",d.message),!1}var c=bU(s,t.form);return!c||c===t},DU=function(t){return S0(t)&&t.type==="radio"},yU=function(t){return DU(t)&&!OU(t)},vU=function(t){var n,a=t&&Vf(t),s=(n=a)===null||n===void 0?void 0:n.host,c=!1;if(a&&a!==t){var d,f,h;for(c=!!((d=s)!==null&&d!==void 0&&(f=d.ownerDocument)!==null&&f!==void 0&&f.contains(s)||t!=null&&(h=t.ownerDocument)!==null&&h!==void 0&&h.contains(t));!c&&s;){var m,R,T;a=Vf(s),s=(m=a)===null||m===void 0?void 0:m.host,c=!!((R=s)!==null&&R!==void 0&&(T=R.ownerDocument)!==null&&T!==void 0&&T.contains(s))}}return c},zN=function(t){var n=t.getBoundingClientRect(),a=n.width,s=n.height;return a===0&&s===0},MU=function(t,n){var a=n.displayCheck,s=n.getShadowRoot;if(getComputedStyle(t).visibility==="hidden")return!0;var c=xc.call(t,"details>summary:first-of-type"),d=c?t.parentElement:t;if(xc.call(d,"details:not([open]) *"))return!0;if(!a||a==="full"||a==="legacy-full"){if(typeof s=="function"){for(var f=t;t;){var h=t.parentElement,m=Vf(t);if(h&&!h.shadowRoot&&s(h)===!0)return zN(t);t.assignedSlot?t=t.assignedSlot:!h&&m!==t.ownerDocument?t=m.host:t=h}t=f}if(vU(t))return!t.getClientRects().length;if(a!=="legacy-full")return!0}else if(a==="non-zero-area")return zN(t);return!1},LU=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var n=t.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var a=0;a<n.children.length;a++){var s=n.children.item(a);if(s.tagName==="LEGEND")return xc.call(n,"fieldset[disabled] *")?!0:!s.contains(t)}return!0}n=n.parentElement}return!1},gT=function(t,n){return!(n.disabled||Wf(n)||NU(n)||MU(n,t)||CU(n)||LU(n))},IT=function(t,n){return!(yU(n)||T0(n)<0||!gT(t,n))},xU=function(t){var n=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},HU=function e(t){var n=[],a=[];return t.forEach(function(s,c){var d=!!s.scopeParent,f=d?s.scopeParent:s,h=_U(f,d),m=d?e(s.candidates):f;h===0?d?n.push.apply(n,m):n.push(f):a.push({documentOrder:c,tabIndex:h,item:s,isScope:d,content:m})}),a.sort(pU).reduce(function(s,c){return c.isScope?s.push.apply(s,c.content):s.push(c.content),s},[]).concat(n)},OE=function(t,n){n=n||{};var a;return n.getShadowRoot?a=A0([t],n.includeContainer,{filter:IT.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:xU}):a=m0(t,n.includeContainer,IT.bind(null,n)),HU(a)},kU=function(t,n){n=n||{};var a;return n.getShadowRoot?a=A0([t],n.includeContainer,{filter:gT.bind(null,n),flatten:!0,getShadowRoot:n.getShadowRoot}):a=m0(t,n.includeContainer,gT.bind(null,n)),a},g0=function(t,n){if(n=n||{},!t)throw new Error("No node provided");return xc.call(t,Kf)===!1?!1:IT(n,t)};function I0(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function LS(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:a}=t;return n+"/"+a}).join(" "):navigator.userAgent}function _0(){return/apple/i.test(navigator.vendor)}function _T(){const e=/android/i;return e.test(I0())||e.test(LS())}function UU(){return I0().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function p0(){return LS().includes("jsdom/")}const YN="data-floating-ui-focusable",wU="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function xl(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function ii(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&Ff(n)){let a=t;for(;a;){if(e===a)return!0;a=a.parentNode||a.host}}return!1}function za(e){return"composedPath"in e?e.composedPath()[0]:e.target}function HR(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function PU(e){return e.matches("html,body")}function fi(e){return(e==null?void 0:e.ownerDocument)||document}function DE(e){return Dn(e)&&e.matches(wU)}function KN(e){return e?e.getAttribute("role")==="combobox"&&DE(e):!1}function GU(e){if(!e||p0())return!0;try{return e.matches(":focus-visible")}catch{return!0}}function pT(e){return e?e.hasAttribute(YN)?e:e.querySelector("["+YN+"]")||e:null}function td(e,t,n){n===void 0&&(n=!0);let a=e.filter(c=>{var d;return c.parentId===t&&((d=c.context)==null?void 0:d.open)}),s=a;for(;s.length;)s=n?e.filter(c=>{var d;return(d=s)==null?void 0:d.some(f=>{var h;return c.parentId===f.id&&((h=c.context)==null?void 0:h.open)})}):e,a=a.concat(s);return a}function VN(e,t){var n;let a=[],s=(n=e.find(c=>c.id===t))==null?void 0:n.parentId;for(;s;){const c=e.find(d=>d.id===s);s=c==null?void 0:c.parentId,c&&(a=a.concat(c))}return a}function kR(e){e.preventDefault(),e.stopPropagation()}function BU(e){return"nativeEvent"in e}function FU(e){return e.mozInputSource===0&&e.isTrusted?!0:_T()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function jU(e){return p0()?!1:!_T()&&e.width===0&&e.height===0||_T()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function Hc(e,t){const n=["mouse","pen"];return t||n.push("",void 0),n.includes(e)}var Kn=typeof document<"u"?C.useLayoutEffect:C.useEffect;const zU={...TE};function vs(e){const t=C.useRef(e);return Kn(()=>{t.current=e}),t}const YU=zU.useInsertionEffect,KU=YU||(e=>e());function gi(e){const t=C.useRef(()=>{});return KU(()=>{t.current=e}),C.useCallback(function(){for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return t.current==null?void 0:t.current(...a)},[])}const Cd=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function N0(e,t){const n=OE(e,Cd()),a=n.length;if(a===0)return;const s=xl(fi(e)),c=n.indexOf(s),d=c===-1?t===1?0:a-1:c+t;return n[d]}function C0(e){return N0(fi(e).body,1)||e}function b0(e){return N0(fi(e).body,-1)||e}function nd(e,t){const n=t||e.currentTarget,a=e.relatedTarget;return!a||!ii(n,a)}function VU(e){OE(e,Cd()).forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")})}function WN(e){e.querySelectorAll("[data-tabindex]").forEach(n=>{const a=n.dataset.tabindex;delete n.dataset.tabindex,a?n.setAttribute("tabindex",a):n.removeAttribute("tabindex")})}function XN(e,t,n){let{reference:a,floating:s}=e;const c=$l(t),d=MS(t),f=vS(d),h=Na(t),m=c==="y",R=a.x+a.width/2-s.width/2,T=a.y+a.height/2-s.height/2,S=a[f]/2-s[f]/2;let g;switch(h){case"top":g={x:R,y:a.y-s.height};break;case"bottom":g={x:R,y:a.y+a.height};break;case"right":g={x:a.x+a.width,y:T};break;case"left":g={x:a.x-s.width,y:T};break;default:g={x:a.x,y:a.y}}switch(Zl(t)){case"start":g[d]-=S*(n&&m?-1:1);break;case"end":g[d]+=S*(n&&m?-1:1);break}return g}const WU=async(e,t,n)=>{const{placement:a="bottom",strategy:s="absolute",middleware:c=[],platform:d}=n,f=c.filter(Boolean),h=await(d.isRTL==null?void 0:d.isRTL(t));let m=await d.getElementRects({reference:e,floating:t,strategy:s}),{x:R,y:T}=XN(m,a,h),S=a,g={},_=0;for(let I=0;I<f.length;I++){const{name:D,fn:O}=f[I],{x,y:k,data:H,reset:G}=await O({x:R,y:T,initialPlacement:a,placement:S,strategy:s,middlewareData:g,rects:m,platform:d,elements:{reference:e,floating:t}});R=x??R,T=k??T,g={...g,[D]:{...g[D],...H}},G&&_<=50&&(_++,typeof G=="object"&&(G.placement&&(S=G.placement),G.rects&&(m=G.rects===!0?await d.getElementRects({reference:e,floating:t,strategy:s}):G.rects),{x:R,y:T}=XN(m,S,h)),I=-1)}return{x:R,y:T,placement:S,strategy:s,middlewareData:g}};async function od(e,t){var n;t===void 0&&(t={});const{x:a,y:s,platform:c,rects:d,elements:f,strategy:h}=e,{boundary:m="clippingAncestors",rootBoundary:R="viewport",elementContext:T="floating",altBoundary:S=!1,padding:g=0}=tl(t,e),_=f0(g),D=f[S?T==="floating"?"reference":"floating":T],O=Yf(await c.getClippingRect({element:(n=await(c.isElement==null?void 0:c.isElement(D)))==null||n?D:D.contextElement||await(c.getDocumentElement==null?void 0:c.getDocumentElement(f.floating)),boundary:m,rootBoundary:R,strategy:h})),x=T==="floating"?{x:a,y:s,width:d.floating.width,height:d.floating.height}:d.reference,k=await(c.getOffsetParent==null?void 0:c.getOffsetParent(f.floating)),H=await(c.isElement==null?void 0:c.isElement(k))?await(c.getScale==null?void 0:c.getScale(k))||{x:1,y:1}:{x:1,y:1},G=Yf(c.convertOffsetParentRelativeRectToViewportRelativeRect?await c.convertOffsetParentRelativeRectToViewportRelativeRect({elements:f,rect:x,offsetParent:k,strategy:h}):x);return{top:(O.top-G.top+_.top)/H.y,bottom:(G.bottom-O.bottom+_.bottom)/H.y,left:(O.left-G.left+_.left)/H.x,right:(G.right-O.right+_.right)/H.x}}const XU=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:a,placement:s,rects:c,platform:d,elements:f,middlewareData:h}=t,{element:m,padding:R=0}=tl(e,t)||{};if(m==null)return{};const T=f0(R),S={x:n,y:a},g=MS(s),_=vS(g),I=await d.getDimensions(m),D=g==="y",O=D?"top":"left",x=D?"bottom":"right",k=D?"clientHeight":"clientWidth",H=c.reference[_]+c.reference[g]-S[g]-c.floating[_],G=S[g]-c.reference[g],P=await(d.getOffsetParent==null?void 0:d.getOffsetParent(m));let L=P?P[k]:0;(!L||!await(d.isElement==null?void 0:d.isElement(P)))&&(L=f.floating[k]||c.floating[_]);const j=H/2-G/2,Z=L/2-I[_]/2-1,J=ql(T[O],Z),se=ql(T[x],Z),X=J,Ae=L-I[_]-se,W=L/2-I[_]/2+j,ee=TT(X,W,Ae),M=!h.arrow&&Zl(s)!=null&&W!==ee&&c.reference[_]/2-(W<X?J:se)-I[_]/2<0,Y=M?W<X?W-X:W-Ae:0;return{[g]:S[g]+Y,data:{[g]:ee,centerOffset:W-ee-Y,...M&&{alignmentOffset:Y}},reset:M}}}),qU=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,a;const{placement:s,middlewareData:c,rects:d,initialPlacement:f,platform:h,elements:m}=t,{mainAxis:R=!0,crossAxis:T=!0,fallbackPlacements:S,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:_="none",flipAlignment:I=!0,...D}=tl(e,t);if((n=c.arrow)!=null&&n.alignmentOffset)return{};const O=Na(s),x=$l(f),k=Na(f)===f,H=await(h.isRTL==null?void 0:h.isRTL(m.floating)),G=S||(k||!I?[zf(f)]:AU(f)),P=_!=="none";!S&&P&&G.push(...TU(f,I,_,H));const L=[f,...G],j=await od(t,D),Z=[];let J=((a=c.flip)==null?void 0:a.overflows)||[];if(R&&Z.push(j[O]),T){const W=mU(s,d,H);Z.push(j[W[0]],j[W[1]])}if(J=[...J,{placement:s,overflows:Z}],!Z.every(W=>W<=0)){var se,X;const W=(((se=c.flip)==null?void 0:se.index)||0)+1,ee=L[W];if(ee)return{data:{index:W,overflows:J},reset:{placement:ee}};let M=(X=J.filter(Y=>Y.overflows[0]<=0).sort((Y,ie)=>Y.overflows[1]-ie.overflows[1])[0])==null?void 0:X.placement;if(!M)switch(g){case"bestFit":{var Ae;const Y=(Ae=J.filter(ie=>{if(P){const le=$l(ie.placement);return le===x||le==="y"}return!0}).map(ie=>[ie.placement,ie.overflows.filter(le=>le>0).reduce((le,v)=>le+v,0)]).sort((ie,le)=>ie[1]-le[1])[0])==null?void 0:Ae[0];Y&&(M=Y);break}case"initialPlacement":M=f;break}if(s!==M)return{reset:{placement:M}}}return{}}}};function qN(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function ZN(e){return hU.some(t=>e[t]>=0)}const ZU=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:a="referenceHidden",...s}=tl(e,t);switch(a){case"referenceHidden":{const c=await od(t,{...s,elementContext:"reference"}),d=qN(c,n.reference);return{data:{referenceHiddenOffsets:d,referenceHidden:ZN(d)}}}case"escaped":{const c=await od(t,{...s,altBoundary:!0}),d=qN(c,n.floating);return{data:{escapedOffsets:d,escaped:ZN(d)}}}default:return{}}}}};async function $U(e,t){const{placement:n,platform:a,elements:s}=e,c=await(a.isRTL==null?void 0:a.isRTL(s.floating)),d=Na(n),f=Zl(n),h=$l(n)==="y",m=["left","top"].includes(d)?-1:1,R=c&&h?-1:1,T=tl(t,e);let{mainAxis:S,crossAxis:g,alignmentAxis:_}=typeof T=="number"?{mainAxis:T,crossAxis:0,alignmentAxis:null}:{mainAxis:T.mainAxis||0,crossAxis:T.crossAxis||0,alignmentAxis:T.alignmentAxis};return f&&typeof _=="number"&&(g=f==="end"?_*-1:_),h?{x:g*R,y:S*m}:{x:S*m,y:g*R}}const QU=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,a;const{x:s,y:c,placement:d,middlewareData:f}=t,h=await $U(t,e);return d===((n=f.offset)==null?void 0:n.placement)&&(a=f.arrow)!=null&&a.alignmentOffset?{}:{x:s+h.x,y:c+h.y,data:{...h,placement:d}}}}},JU=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:a,placement:s}=t,{mainAxis:c=!0,crossAxis:d=!1,limiter:f={fn:D=>{let{x:O,y:x}=D;return{x:O,y:x}}},...h}=tl(e,t),m={x:n,y:a},R=await od(t,h),T=$l(Na(s)),S=yS(T);let g=m[S],_=m[T];if(c){const D=S==="y"?"top":"left",O=S==="y"?"bottom":"right",x=g+R[D],k=g-R[O];g=TT(x,g,k)}if(d){const D=T==="y"?"top":"left",O=T==="y"?"bottom":"right",x=_+R[D],k=_-R[O];_=TT(x,_,k)}const I=f.fn({...t,[S]:g,[T]:_});return{...I,data:{x:I.x-n,y:I.y-a,enabled:{[S]:c,[T]:d}}}}}},ew=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:a,placement:s,rects:c,middlewareData:d}=t,{offset:f=0,mainAxis:h=!0,crossAxis:m=!0}=tl(e,t),R={x:n,y:a},T=$l(s),S=yS(T);let g=R[S],_=R[T];const I=tl(f,t),D=typeof I=="number"?{mainAxis:I,crossAxis:0}:{mainAxis:0,crossAxis:0,...I};if(h){const k=S==="y"?"height":"width",H=c.reference[S]-c.floating[k]+D.mainAxis,G=c.reference[S]+c.reference[k]-D.mainAxis;g<H?g=H:g>G&&(g=G)}if(m){var O,x;const k=S==="y"?"width":"height",H=["top","left"].includes(Na(s)),G=c.reference[T]-c.floating[k]+(H&&((O=d.offset)==null?void 0:O[T])||0)+(H?0:D.crossAxis),P=c.reference[T]+c.reference[k]+(H?0:((x=d.offset)==null?void 0:x[T])||0)-(H?D.crossAxis:0);_<G?_=G:_>P&&(_=P)}return{[S]:g,[T]:_}}}},tw=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,a;const{placement:s,rects:c,platform:d,elements:f}=t,{apply:h=()=>{},...m}=tl(e,t),R=await od(t,m),T=Na(s),S=Zl(s),g=$l(s)==="y",{width:_,height:I}=c.floating;let D,O;T==="top"||T==="bottom"?(D=T,O=S===(await(d.isRTL==null?void 0:d.isRTL(f.floating))?"start":"end")?"left":"right"):(O=T,D=S==="end"?"top":"bottom");const x=I-R.top-R.bottom,k=_-R.left-R.right,H=ql(I-R[D],x),G=ql(_-R[O],k),P=!t.middlewareData.shift;let L=H,j=G;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(j=k),(a=t.middlewareData.shift)!=null&&a.enabled.y&&(L=x),P&&!S){const J=na(R.left,0),se=na(R.right,0),X=na(R.top,0),Ae=na(R.bottom,0);g?j=_-2*(J!==0||se!==0?J+se:na(R.left,R.right)):L=I-2*(X!==0||Ae!==0?X+Ae:na(R.top,R.bottom))}await h({...t,availableWidth:j,availableHeight:L});const Z=await d.getDimensions(f.floating);return _!==Z.width||I!==Z.height?{reset:{rects:!0}}:{}}}};function O0(e){const t=Oa(e);let n=parseFloat(t.width)||0,a=parseFloat(t.height)||0;const s=Dn(e),c=s?e.offsetWidth:n,d=s?e.offsetHeight:a,f=jf(n)!==c||jf(a)!==d;return f&&(n=c,a=d),{width:n,height:a,$:f}}function xS(e){return wt(e)?e:e.contextElement}function hc(e){const t=xS(e);if(!Dn(t))return fo(1);const n=t.getBoundingClientRect(),{width:a,height:s,$:c}=O0(t);let d=(c?jf(n.width):n.width)/a,f=(c?jf(n.height):n.height)/s;return(!d||!Number.isFinite(d))&&(d=1),(!f||!Number.isFinite(f))&&(f=1),{x:d,y:f}}const nw=fo(0);function D0(e){const t=pi(e);return!CE()||!t.visualViewport?nw:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function iw(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==pi(e)?!1:t}function Ws(e,t,n,a){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),c=xS(e);let d=fo(1);t&&(a?wt(a)&&(d=hc(a)):d=hc(e));const f=iw(c,n,a)?D0(c):fo(0);let h=(s.left+f.x)/d.x,m=(s.top+f.y)/d.y,R=s.width/d.x,T=s.height/d.y;if(c){const S=pi(c),g=a&&wt(a)?pi(a):a;let _=S,I=RT(_);for(;I&&a&&g!==_;){const D=hc(I),O=I.getBoundingClientRect(),x=Oa(I),k=O.left+(I.clientLeft+parseFloat(x.paddingLeft))*D.x,H=O.top+(I.clientTop+parseFloat(x.paddingTop))*D.y;h*=D.x,m*=D.y,R*=D.x,T*=D.y,h+=k,m+=H,_=pi(I),I=RT(_)}}return Yf({width:R,height:T,x:h,y:m})}function HS(e,t){const n=bE(e).scrollLeft;return t?t.left+n:Ws(Io(e)).left+n}function y0(e,t,n){n===void 0&&(n=!1);const a=e.getBoundingClientRect(),s=a.left+t.scrollLeft-(n?0:HS(e,a)),c=a.top+t.scrollTop;return{x:s,y:c}}function aw(e){let{elements:t,rect:n,offsetParent:a,strategy:s}=e;const c=s==="fixed",d=Io(a),f=t?NE(t.floating):!1;if(a===d||f&&c)return n;let h={scrollLeft:0,scrollTop:0},m=fo(1);const R=fo(0),T=Dn(a);if((T||!T&&!c)&&((ts(a)!=="body"||Nd(d))&&(h=bE(a)),Dn(a))){const g=Ws(a);m=hc(a),R.x=g.x+a.clientLeft,R.y=g.y+a.clientTop}const S=d&&!T&&!c?y0(d,h,!0):fo(0);return{width:n.width*m.x,height:n.height*m.y,x:n.x*m.x-h.scrollLeft*m.x+R.x+S.x,y:n.y*m.y-h.scrollTop*m.y+R.y+S.y}}function ow(e){return Array.from(e.getClientRects())}function lw(e){const t=Io(e),n=bE(e),a=e.ownerDocument.body,s=na(t.scrollWidth,t.clientWidth,a.scrollWidth,a.clientWidth),c=na(t.scrollHeight,t.clientHeight,a.scrollHeight,a.clientHeight);let d=-n.scrollLeft+HS(e);const f=-n.scrollTop;return Oa(a).direction==="rtl"&&(d+=na(t.clientWidth,a.clientWidth)-s),{width:s,height:c,x:d,y:f}}function sw(e,t){const n=pi(e),a=Io(e),s=n.visualViewport;let c=a.clientWidth,d=a.clientHeight,f=0,h=0;if(s){c=s.width,d=s.height;const m=CE();(!m||m&&t==="fixed")&&(f=s.offsetLeft,h=s.offsetTop)}return{width:c,height:d,x:f,y:h}}function rw(e,t){const n=Ws(e,!0,t==="fixed"),a=n.top+e.clientTop,s=n.left+e.clientLeft,c=Dn(e)?hc(e):fo(1),d=e.clientWidth*c.x,f=e.clientHeight*c.y,h=s*c.x,m=a*c.y;return{width:d,height:f,x:h,y:m}}function $N(e,t,n){let a;if(t==="viewport")a=sw(e,n);else if(t==="document")a=lw(Io(e));else if(wt(t))a=rw(t,n);else{const s=D0(e);a={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return Yf(a)}function v0(e,t){const n=el(e);return n===t||!wt(n)||$o(n)?!1:Oa(n).position==="fixed"||v0(n,t)}function cw(e,t){const n=t.get(e);if(n)return n;let a=zl(e,[],!1).filter(f=>wt(f)&&ts(f)!=="body"),s=null;const c=Oa(e).position==="fixed";let d=c?el(e):e;for(;wt(d)&&!$o(d);){const f=Oa(d),h=DS(d);!h&&f.position==="fixed"&&(s=null),(c?!h&&!s:!h&&f.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||Nd(d)&&!h&&v0(e,d))?a=a.filter(R=>R!==d):s=f,d=el(d)}return t.set(e,a),a}function uw(e){let{element:t,boundary:n,rootBoundary:a,strategy:s}=e;const d=[...n==="clippingAncestors"?NE(t)?[]:cw(t,this._c):[].concat(n),a],f=d[0],h=d.reduce((m,R)=>{const T=$N(t,R,s);return m.top=na(T.top,m.top),m.right=ql(T.right,m.right),m.bottom=ql(T.bottom,m.bottom),m.left=na(T.left,m.left),m},$N(t,f,s));return{width:h.right-h.left,height:h.bottom-h.top,x:h.left,y:h.top}}function dw(e){const{width:t,height:n}=O0(e);return{width:t,height:n}}function hw(e,t,n){const a=Dn(t),s=Io(t),c=n==="fixed",d=Ws(e,!0,c,t);let f={scrollLeft:0,scrollTop:0};const h=fo(0);if(a||!a&&!c)if((ts(t)!=="body"||Nd(s))&&(f=bE(t)),a){const S=Ws(t,!0,c,t);h.x=S.x+t.clientLeft,h.y=S.y+t.clientTop}else s&&(h.x=HS(s));const m=s&&!a&&!c?y0(s,f):fo(0),R=d.left+f.scrollLeft-h.x-m.x,T=d.top+f.scrollTop-h.y-m.y;return{x:R,y:T,width:d.width,height:d.height}}function UR(e){return Oa(e).position==="static"}function QN(e,t){if(!Dn(e)||Oa(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Io(e)===n&&(n=n.ownerDocument.body),n}function M0(e,t){const n=pi(e);if(NE(e))return n;if(!Dn(e)){let s=el(e);for(;s&&!$o(s);){if(wt(s)&&!UR(s))return s;s=el(s)}return n}let a=QN(e,t);for(;a&&uU(a)&&UR(a);)a=QN(a,t);return a&&$o(a)&&UR(a)&&!DS(a)?n:a||dU(e)||n}const fw=async function(e){const t=this.getOffsetParent||M0,n=this.getDimensions,a=await n(e.floating);return{reference:hw(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:a.width,height:a.height}}};function Ew(e){return Oa(e).direction==="rtl"}const mw={convertOffsetParentRelativeRectToViewportRelativeRect:aw,getDocumentElement:Io,getClippingRect:uw,getOffsetParent:M0,getElementRects:fw,getClientRects:ow,getDimensions:dw,getScale:hc,isElement:wt,isRTL:Ew};function L0(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Aw(e,t){let n=null,a;const s=Io(e);function c(){var f;clearTimeout(a),(f=n)==null||f.disconnect(),n=null}function d(f,h){f===void 0&&(f=!1),h===void 0&&(h=1),c();const m=e.getBoundingClientRect(),{left:R,top:T,width:S,height:g}=m;if(f||t(),!S||!g)return;const _=ef(T),I=ef(s.clientWidth-(R+S)),D=ef(s.clientHeight-(T+g)),O=ef(R),k={rootMargin:-_+"px "+-I+"px "+-D+"px "+-O+"px",threshold:na(0,ql(1,h))||1};let H=!0;function G(P){const L=P[0].intersectionRatio;if(L!==h){if(!H)return d();L?d(!1,L):a=setTimeout(()=>{d(!1,1e-7)},1e3)}L===1&&!L0(m,e.getBoundingClientRect())&&d(),H=!1}try{n=new IntersectionObserver(G,{...k,root:s.ownerDocument})}catch{n=new IntersectionObserver(G,k)}n.observe(e)}return d(!0),c}function JN(e,t,n,a){a===void 0&&(a={});const{ancestorScroll:s=!0,ancestorResize:c=!0,elementResize:d=typeof ResizeObserver=="function",layoutShift:f=typeof IntersectionObserver=="function",animationFrame:h=!1}=a,m=xS(e),R=s||c?[...m?zl(m):[],...zl(t)]:[];R.forEach(O=>{s&&O.addEventListener("scroll",n,{passive:!0}),c&&O.addEventListener("resize",n)});const T=m&&f?Aw(m,n):null;let S=-1,g=null;d&&(g=new ResizeObserver(O=>{let[x]=O;x&&x.target===m&&g&&(g.unobserve(t),cancelAnimationFrame(S),S=requestAnimationFrame(()=>{var k;(k=g)==null||k.observe(t)})),n()}),m&&!h&&g.observe(m),g.observe(t));let _,I=h?Ws(e):null;h&&D();function D(){const O=Ws(e);I&&!L0(I,O)&&n(),I=O,_=requestAnimationFrame(D)}return n(),()=>{var O;R.forEach(x=>{s&&x.removeEventListener("scroll",n),c&&x.removeEventListener("resize",n)}),T==null||T(),(O=g)==null||O.disconnect(),g=null,h&&cancelAnimationFrame(_)}}const Rw=QU,Tw=JU,Sw=qU,gw=tw,Iw=ZU,eC=XU,_w=ew,pw=(e,t,n)=>{const a=new Map,s={platform:mw,...n},c={...s.platform,_c:a};return WU(e,t,{...s,platform:c})};var hf=typeof document<"u"?C.useLayoutEffect:C.useEffect;function Xf(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,a,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(a=n;a--!==0;)if(!Xf(e[a],t[a]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(a=n;a--!==0;)if(!{}.hasOwnProperty.call(t,s[a]))return!1;for(a=n;a--!==0;){const c=s[a];if(!(c==="_owner"&&e.$$typeof)&&!Xf(e[c],t[c]))return!1}return!0}return e!==e&&t!==t}function x0(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function tC(e,t){const n=x0(e);return Math.round(t*n)/n}function wR(e){const t=C.useRef(e);return hf(()=>{t.current=e}),t}function Nw(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:a=[],platform:s,elements:{reference:c,floating:d}={},transform:f=!0,whileElementsMounted:h,open:m}=e,[R,T]=C.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[S,g]=C.useState(a);Xf(S,a)||g(a);const[_,I]=C.useState(null),[D,O]=C.useState(null),x=C.useCallback(ie=>{ie!==P.current&&(P.current=ie,I(ie))},[]),k=C.useCallback(ie=>{ie!==L.current&&(L.current=ie,O(ie))},[]),H=c||_,G=d||D,P=C.useRef(null),L=C.useRef(null),j=C.useRef(R),Z=h!=null,J=wR(h),se=wR(s),X=wR(m),Ae=C.useCallback(()=>{if(!P.current||!L.current)return;const ie={placement:t,strategy:n,middleware:S};se.current&&(ie.platform=se.current),pw(P.current,L.current,ie).then(le=>{const v={...le,isPositioned:X.current!==!1};W.current&&!Xf(j.current,v)&&(j.current=v,pd.flushSync(()=>{T(v)}))})},[S,t,n,se,X]);hf(()=>{m===!1&&j.current.isPositioned&&(j.current.isPositioned=!1,T(ie=>({...ie,isPositioned:!1})))},[m]);const W=C.useRef(!1);hf(()=>(W.current=!0,()=>{W.current=!1}),[]),hf(()=>{if(H&&(P.current=H),G&&(L.current=G),H&&G){if(J.current)return J.current(H,G,Ae);Ae()}},[H,G,Ae,J,Z]);const ee=C.useMemo(()=>({reference:P,floating:L,setReference:x,setFloating:k}),[x,k]),M=C.useMemo(()=>({reference:H,floating:G}),[H,G]),Y=C.useMemo(()=>{const ie={position:n,left:0,top:0};if(!M.floating)return ie;const le=tC(M.floating,R.x),v=tC(M.floating,R.y);return f?{...ie,transform:"translate("+le+"px, "+v+"px)",...x0(M.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:le,top:v}},[n,f,M.floating,R.x,R.y]);return C.useMemo(()=>({...R,update:Ae,refs:ee,elements:M,floatingStyles:Y}),[R,Ae,ee,M,Y])}const Cw=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:a,padding:s}=typeof e=="function"?e(n):e;return a&&t(a)?a.current!=null?eC({element:a.current,padding:s}).fn(n):{}:a?eC({element:a,padding:s}).fn(n):{}}}},bw=(e,t)=>({...Rw(e),options:[e,t]}),Ow=(e,t)=>({...Tw(e),options:[e,t]}),Dw=(e,t)=>({..._w(e),options:[e,t]}),yw=(e,t)=>({...Sw(e),options:[e,t]}),vw=(e,t)=>({...gw(e),options:[e,t]}),Mw=(e,t)=>({...Iw(e),options:[e,t]}),Lw=(e,t)=>({...Cw(e),options:[e,t]}),xw="data-floating-ui-focusable",nC="active",iC="selected",Hw={...TE};let aC=!1,kw=0;const oC=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+kw++;function Uw(){const[e,t]=C.useState(()=>aC?oC():void 0);return Kn(()=>{e==null&&t(oC())},[]),C.useEffect(()=>{aC=!0},[]),e}const ww=Hw.useId,kS=ww||Uw;function Pw(){const e=new Map;return{emit(t,n){var a;(a=e.get(t))==null||a.forEach(s=>s(n))},on(t,n){e.has(t)||e.set(t,new Set),e.get(t).add(n)},off(t,n){var a;(a=e.get(t))==null||a.delete(n)}}}const Gw=C.createContext(null),Bw=C.createContext(null),US=()=>{var e;return((e=C.useContext(Gw))==null?void 0:e.id)||null},yE=()=>C.useContext(Bw);function Xs(e){return"data-floating-ui-"+e}function ea(e){e.current!==-1&&(clearTimeout(e.current),e.current=-1)}const lC=Xs("safe-polygon");function ff(e,t,n){if(n&&!Hc(n))return 0;if(typeof e=="number")return e;if(typeof e=="function"){const a=e();return typeof a=="number"?a:a==null?void 0:a[t]}return e==null?void 0:e[t]}function PR(e){return typeof e=="function"?e():e}function Fw(e,t){t===void 0&&(t={});const{open:n,onOpenChange:a,dataRef:s,events:c,elements:d}=e,{enabled:f=!0,delay:h=0,handleClose:m=null,mouseOnly:R=!1,restMs:T=0,move:S=!0}=t,g=yE(),_=US(),I=vs(m),D=vs(h),O=vs(n),x=vs(T),k=C.useRef(),H=C.useRef(-1),G=C.useRef(),P=C.useRef(-1),L=C.useRef(!0),j=C.useRef(!1),Z=C.useRef(()=>{}),J=C.useRef(!1),se=C.useCallback(()=>{var Y;const ie=(Y=s.current.openEvent)==null?void 0:Y.type;return(ie==null?void 0:ie.includes("mouse"))&&ie!=="mousedown"},[s]);C.useEffect(()=>{if(!f)return;function Y(ie){let{open:le}=ie;le||(ea(H),ea(P),L.current=!0,J.current=!1)}return c.on("openchange",Y),()=>{c.off("openchange",Y)}},[f,c]),C.useEffect(()=>{if(!f||!I.current||!n)return;function Y(le){se()&&a(!1,le,"hover")}const ie=fi(d.floating).documentElement;return ie.addEventListener("mouseleave",Y),()=>{ie.removeEventListener("mouseleave",Y)}},[d.floating,n,a,f,I,se]);const X=C.useCallback(function(Y,ie,le){ie===void 0&&(ie=!0),le===void 0&&(le="hover");const v=ff(D.current,"close",k.current);v&&!G.current?(ea(H),H.current=window.setTimeout(()=>a(!1,Y,le),v)):ie&&(ea(H),a(!1,Y,le))},[D,a]),Ae=gi(()=>{Z.current(),G.current=void 0}),W=gi(()=>{if(j.current){const Y=fi(d.floating).body;Y.style.pointerEvents="",Y.removeAttribute(lC),j.current=!1}}),ee=gi(()=>s.current.openEvent?["click","mousedown"].includes(s.current.openEvent.type):!1);C.useEffect(()=>{if(!f)return;function Y(q){if(ea(H),L.current=!1,R&&!Hc(k.current)||PR(x.current)>0&&!ff(D.current,"open"))return;const F=ff(D.current,"open",k.current);F?H.current=window.setTimeout(()=>{O.current||a(!0,q,"hover")},F):n||a(!0,q,"hover")}function ie(q){if(ee()){W();return}Z.current();const F=fi(d.floating);if(ea(P),J.current=!1,I.current&&s.current.floatingContext){n||ea(H),G.current=I.current({...s.current.floatingContext,tree:g,x:q.clientX,y:q.clientY,onClose(){W(),Ae(),ee()||X(q,!0,"safe-polygon")}});const K=G.current;F.addEventListener("mousemove",K),Z.current=()=>{F.removeEventListener("mousemove",K)};return}(k.current==="touch"?!ii(d.floating,q.relatedTarget):!0)&&X(q)}function le(q){ee()||s.current.floatingContext&&(I.current==null||I.current({...s.current.floatingContext,tree:g,x:q.clientX,y:q.clientY,onClose(){W(),Ae(),ee()||X(q)}})(q))}function v(){ea(H)}function z(q){ee()||X(q,!1)}if(wt(d.domReference)){const q=d.domReference,F=d.floating;return n&&q.addEventListener("mouseleave",le),S&&q.addEventListener("mousemove",Y,{once:!0}),q.addEventListener("mouseenter",Y),q.addEventListener("mouseleave",ie),F&&(F.addEventListener("mouseleave",le),F.addEventListener("mouseenter",v),F.addEventListener("mouseleave",z)),()=>{n&&q.removeEventListener("mouseleave",le),S&&q.removeEventListener("mousemove",Y),q.removeEventListener("mouseenter",Y),q.removeEventListener("mouseleave",ie),F&&(F.removeEventListener("mouseleave",le),F.removeEventListener("mouseenter",v),F.removeEventListener("mouseleave",z))}}},[d,f,e,R,S,X,Ae,W,a,n,O,g,D,I,s,ee,x]),Kn(()=>{var Y;if(f&&n&&(Y=I.current)!=null&&Y.__options.blockPointerEvents&&se()){j.current=!0;const le=d.floating;if(wt(d.domReference)&&le){var ie;const v=fi(d.floating).body;v.setAttribute(lC,"");const z=d.domReference,q=g==null||(ie=g.nodesRef.current.find(F=>F.id===_))==null||(ie=ie.context)==null?void 0:ie.elements.floating;return q&&(q.style.pointerEvents=""),v.style.pointerEvents="none",z.style.pointerEvents="auto",le.style.pointerEvents="auto",()=>{v.style.pointerEvents="",z.style.pointerEvents="",le.style.pointerEvents=""}}}},[f,n,_,d,g,I,se]),Kn(()=>{n||(k.current=void 0,J.current=!1,Ae(),W())},[n,Ae,W]),C.useEffect(()=>()=>{Ae(),ea(H),ea(P),W()},[f,d.domReference,Ae,W]);const M=C.useMemo(()=>{function Y(ie){k.current=ie.pointerType}return{onPointerDown:Y,onPointerEnter:Y,onMouseMove(ie){const{nativeEvent:le}=ie;function v(){!L.current&&!O.current&&a(!0,le,"hover")}R&&!Hc(k.current)||n||PR(x.current)===0||J.current&&ie.movementX**2+ie.movementY**2<2||(ea(P),k.current==="touch"?v():(J.current=!0,P.current=window.setTimeout(v,PR(x.current))))}}},[R,a,n,O,x]);return C.useMemo(()=>f?{reference:M}:{},[f,M])}const jw=C.createContext({hasProvider:!1,timeoutMs:0,delayRef:{current:0},initialDelayRef:{current:0},timeoutIdRef:{current:-1},currentIdRef:{current:null},currentContextRef:{current:null}});function zw(e,t){t===void 0&&(t={});const{open:n,onOpenChange:a,floatingId:s}=e,{enabled:c=!0}=t,d=C.useContext(jw),{currentIdRef:f,delayRef:h,timeoutMs:m,initialDelayRef:R,currentContextRef:T,hasProvider:S,timeoutIdRef:g}=d,[_,I]=C.useState(!1);return Kn(()=>{function D(){var O;I(!1),(O=T.current)==null||O.setIsInstantPhase(!1),f.current=null,T.current=null,h.current=R.current}if(c&&f.current&&!n&&f.current===s){if(I(!1),m)return g.current=window.setTimeout(D,m),()=>{clearTimeout(g.current)};D()}},[c,n,s,f,h,m,R,T,g]),Kn(()=>{if(!c||!n)return;const D=T.current,O=f.current;T.current={onOpenChange:a,setIsInstantPhase:I},f.current=s,h.current={open:0,close:ff(R.current,"close")},O!==null&&O!==s?(ea(g),I(!0),D==null||D.setIsInstantPhase(!0),D==null||D.onOpenChange(!1)):(I(!1),D==null||D.setIsInstantPhase(!1))},[c,n,s,a,f,h,m,R,T,g]),Kn(()=>()=>{T.current=null},[T]),C.useMemo(()=>({hasProvider:S,delayRef:h,isInstantPhase:_}),[S,h,_])}let sC=0;function Qr(e,t){t===void 0&&(t={});const{preventScroll:n=!1,cancelPrevious:a=!0,sync:s=!1}=t;a&&cancelAnimationFrame(sC);const c=()=>e==null?void 0:e.focus({preventScroll:n});s?c():sC=requestAnimationFrame(c)}function GR(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&Ff(n)){let a=t;for(;a;){if(e===a)return!0;a=a.parentNode||a.host}}return!1}function Yw(e){return"composedPath"in e?e.composedPath()[0]:e.target}function Kw(e){return(e==null?void 0:e.ownerDocument)||document}let Jr=new WeakMap,tf=new WeakSet,nf={},BR=0;const Vw=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,H0=e=>e&&(e.host||H0(e.parentNode)),Ww=(e,t)=>t.map(n=>{if(e.contains(n))return n;const a=H0(n);return e.contains(a)?a:null}).filter(n=>n!=null);function Xw(e,t,n,a){const s="data-floating-ui-inert",c=a?"inert":n?"aria-hidden":null,d=Ww(t,e),f=new Set,h=new Set(d),m=[];nf[s]||(nf[s]=new WeakMap);const R=nf[s];d.forEach(T),S(t),f.clear();function T(g){!g||f.has(g)||(f.add(g),g.parentNode&&T(g.parentNode))}function S(g){!g||h.has(g)||[].forEach.call(g.children,_=>{if(ts(_)!=="script")if(f.has(_))S(_);else{const I=c?_.getAttribute(c):null,D=I!==null&&I!=="false",O=Jr.get(_)||0,x=c?O+1:O,k=(R.get(_)||0)+1;Jr.set(_,x),R.set(_,k),m.push(_),x===1&&D&&tf.add(_),k===1&&_.setAttribute(s,""),!D&&c&&_.setAttribute(c,c==="inert"?"":"true")}})}return BR++,()=>{m.forEach(g=>{const _=Jr.get(g)||0,I=c?_-1:_,D=(R.get(g)||0)-1;Jr.set(g,I),R.set(g,D),I||(!tf.has(g)&&c&&g.removeAttribute(c),tf.delete(g)),D||g.removeAttribute(s)}),BR--,BR||(Jr=new WeakMap,Jr=new WeakMap,tf=new WeakSet,nf={})}}function rC(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);const a=Kw(e[0]).body;return Xw(e.concat(Array.from(a.querySelectorAll("[aria-live]"))),a,t,n)}const vE={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0},qf=C.forwardRef(function(t,n){const[a,s]=C.useState();Kn(()=>{_0()&&s("button")},[]);const c={ref:n,tabIndex:0,role:a,"aria-hidden":a?void 0:!0,[Xs("focus-guard")]:"",style:vE};return l.jsx("span",{...t,...c})}),k0=C.createContext(null),cC=Xs("portal");function U0(e){e===void 0&&(e={});const{id:t,root:n}=e,a=kS(),s=w0(),[c,d]=C.useState(null),f=C.useRef(null);return Kn(()=>()=>{c==null||c.remove(),queueMicrotask(()=>{f.current=null})},[c]),Kn(()=>{if(!a||f.current)return;const h=t?document.getElementById(t):null;if(!h)return;const m=document.createElement("div");m.id=a,m.setAttribute(cC,""),h.appendChild(m),f.current=m,d(m)},[t,a]),Kn(()=>{if(n===null||!a||f.current)return;let h=n||(s==null?void 0:s.portalNode);h&&!wt(h)&&(h=h.current),h=h||document.body;let m=null;t&&(m=document.createElement("div"),m.id=t,h.appendChild(m));const R=document.createElement("div");R.id=a,R.setAttribute(cC,""),h=m||h,h.appendChild(R),f.current=R,d(R)},[t,n,a,s]),c}function qw(e){const{children:t,id:n,root:a,preserveTabOrder:s=!0}=e,c=U0({id:n,root:a}),[d,f]=C.useState(null),h=C.useRef(null),m=C.useRef(null),R=C.useRef(null),T=C.useRef(null),S=d==null?void 0:d.modal,g=d==null?void 0:d.open,_=!!d&&!d.modal&&d.open&&s&&!!(a||c);return C.useEffect(()=>{if(!c||!s||S)return;function I(D){c&&nd(D)&&(D.type==="focusin"?WN:VU)(c)}return c.addEventListener("focusin",I,!0),c.addEventListener("focusout",I,!0),()=>{c.removeEventListener("focusin",I,!0),c.removeEventListener("focusout",I,!0)}},[c,s,S]),C.useEffect(()=>{c&&(g||WN(c))},[g,c]),l.jsxs(k0.Provider,{value:C.useMemo(()=>({preserveTabOrder:s,beforeOutsideRef:h,afterOutsideRef:m,beforeInsideRef:R,afterInsideRef:T,portalNode:c,setFocusManagerState:f}),[s,c]),children:[_&&c&&l.jsx(qf,{"data-type":"outside",ref:h,onFocus:I=>{if(nd(I,c)){var D;(D=R.current)==null||D.focus()}else{const O=d?d.domReference:null,x=b0(O);x==null||x.focus()}}}),_&&c&&l.jsx("span",{"aria-owns":c.id,style:vE}),c&&pd.createPortal(t,c),_&&c&&l.jsx(qf,{"data-type":"outside",ref:m,onFocus:I=>{if(nd(I,c)){var D;(D=T.current)==null||D.focus()}else{const O=d?d.domReference:null,x=C0(O);x==null||x.focus(),d!=null&&d.closeOnFocusOut&&(d==null||d.onOpenChange(!1,I.nativeEvent,"focus-out"))}}})]})}const w0=()=>C.useContext(k0);function uC(e){return C.useMemo(()=>t=>{e.forEach(n=>{n&&(n.current=t)})},e)}const Zw=20;let bs=[];function $w(e){bs=bs.filter(t=>t.isConnected),e&&ts(e)!=="body"&&(bs.push(e),bs.length>Zw&&(bs=bs.slice(-20)))}function dC(){return bs.slice().reverse().find(e=>e.isConnected)}function Qw(e){const t=Cd();return g0(e,t)?e:OE(e,t)[0]||e}function hC(e,t){var n;if(!t.current.includes("floating")&&!((n=e.getAttribute("role"))!=null&&n.includes("dialog")))return;const a=Cd(),c=kU(e,a).filter(f=>{const h=f.getAttribute("data-tabindex")||"";return g0(f,a)||f.hasAttribute("data-tabindex")&&!h.startsWith("-")}),d=e.getAttribute("tabindex");t.current.includes("floating")||c.length===0?d!=="0"&&e.setAttribute("tabindex","0"):(d!=="-1"||e.hasAttribute("data-tabindex")&&e.getAttribute("data-tabindex")!=="-1")&&(e.setAttribute("tabindex","-1"),e.setAttribute("data-tabindex","-1"))}const Jw=C.forwardRef(function(t,n){return l.jsx("button",{...t,type:"button",ref:n,tabIndex:-1,style:vE})});function eP(e){const{context:t,children:n,disabled:a=!1,order:s=["content"],guards:c=!0,initialFocus:d=0,returnFocus:f=!0,restoreFocus:h=!1,modal:m=!0,visuallyHiddenDismiss:R=!1,closeOnFocusOut:T=!0,outsideElementsInert:S=!1,getInsideElements:g=()=>[]}=e,{open:_,onOpenChange:I,events:D,dataRef:O,elements:{domReference:x,floating:k}}=t,H=gi(()=>{var pe;return(pe=O.current.floatingContext)==null?void 0:pe.nodeId}),G=gi(g),P=typeof d=="number"&&d<0,L=KN(x)&&P,j=Vw(),Z=j?c:!0,J=!Z||j&&S,se=vs(s),X=vs(d),Ae=vs(f),W=yE(),ee=w0(),M=C.useRef(null),Y=C.useRef(null),ie=C.useRef(!1),le=C.useRef(!1),v=C.useRef(-1),z=ee!=null,q=pT(k),F=gi(function(pe){return pe===void 0&&(pe=q),pe?OE(pe,Cd()):[]}),ae=gi(pe=>{const ge=F(pe);return se.current.map(oe=>x&&oe==="reference"?x:q&&oe==="floating"?q:ge).filter(Boolean).flat()});C.useEffect(()=>{if(a||!m)return;function pe(oe){if(oe.key==="Tab"){ii(q,xl(fi(q)))&&F().length===0&&!L&&kR(oe);const Ce=ae(),Te=za(oe);se.current[0]==="reference"&&Te===x&&(kR(oe),oe.shiftKey?Qr(Ce[Ce.length-1]):Qr(Ce[1])),se.current[1]==="floating"&&Te===q&&oe.shiftKey&&(kR(oe),Qr(Ce[0]))}}const ge=fi(q);return ge.addEventListener("keydown",pe),()=>{ge.removeEventListener("keydown",pe)}},[a,x,q,m,se,L,F,ae]),C.useEffect(()=>{if(a||!k)return;function pe(ge){const oe=za(ge),Te=F().indexOf(oe);Te!==-1&&(v.current=Te)}return k.addEventListener("focusin",pe),()=>{k.removeEventListener("focusin",pe)}},[a,k,F]),C.useEffect(()=>{if(a||!T)return;function pe(){le.current=!0,setTimeout(()=>{le.current=!1})}function ge(oe){const Ce=oe.relatedTarget,Te=oe.currentTarget;queueMicrotask(()=>{const be=H(),ye=!(ii(x,Ce)||ii(k,Ce)||ii(Ce,k)||ii(ee==null?void 0:ee.portalNode,Ce)||Ce!=null&&Ce.hasAttribute(Xs("focus-guard"))||W&&(td(W.nodesRef.current,be).find(Ue=>{var $e,Rt;return ii(($e=Ue.context)==null?void 0:$e.elements.floating,Ce)||ii((Rt=Ue.context)==null?void 0:Rt.elements.domReference,Ce)})||VN(W.nodesRef.current,be).find(Ue=>{var $e,Rt,zt;return[($e=Ue.context)==null?void 0:$e.elements.floating,pT((Rt=Ue.context)==null?void 0:Rt.elements.floating)].includes(Ce)||((zt=Ue.context)==null?void 0:zt.elements.domReference)===Ce})));if(Te===x&&q&&hC(q,se),h&&ye&&xl(fi(q))===fi(q).body){Dn(q)&&q.focus();const Ue=v.current,$e=F(),Rt=$e[Ue]||$e[$e.length-1]||q;Dn(Rt)&&Rt.focus()}(L||!m)&&Ce&&ye&&!le.current&&Ce!==dC()&&(ie.current=!0,I(!1,oe,"focus-out"))})}if(k&&Dn(x))return x.addEventListener("focusout",ge),x.addEventListener("pointerdown",pe),k.addEventListener("focusout",ge),()=>{x.removeEventListener("focusout",ge),x.removeEventListener("pointerdown",pe),k.removeEventListener("focusout",ge)}},[a,x,k,q,m,W,ee,I,T,h,F,L,H,se]);const K=C.useRef(null),Q=C.useRef(null),he=uC([K,ee==null?void 0:ee.beforeInsideRef]),me=uC([Q,ee==null?void 0:ee.afterInsideRef]);C.useEffect(()=>{var pe,ge;if(a||!k)return;const oe=Array.from((ee==null||(pe=ee.portalNode)==null?void 0:pe.querySelectorAll("["+Xs("portal")+"]"))||[]),Ce=W?VN(W.nodesRef.current,H()):[],Te=W&&!m?Ce.map($e=>{var Rt;return(Rt=$e.context)==null?void 0:Rt.elements.floating}):[],be=(ge=Ce.find($e=>{var Rt;return KN(((Rt=$e.context)==null?void 0:Rt.elements.domReference)||null)}))==null||(ge=ge.context)==null?void 0:ge.elements.domReference,ye=[k,be,...oe,...Te,...G(),M.current,Y.current,K.current,Q.current,ee==null?void 0:ee.beforeOutsideRef.current,ee==null?void 0:ee.afterOutsideRef.current,se.current.includes("reference")||L?x:null].filter($e=>$e!=null),Ue=m||L?rC(ye,!J,J):rC(ye);return()=>{Ue()}},[a,x,k,m,se,ee,L,Z,J,W,H,G]),Kn(()=>{if(a||!Dn(q))return;const pe=fi(q),ge=xl(pe);queueMicrotask(()=>{const oe=ae(q),Ce=X.current,Te=(typeof Ce=="number"?oe[Ce]:Ce.current)||q,be=ii(q,ge);!P&&!be&&_&&Qr(Te,{preventScroll:Te===q})})},[a,_,q,P,ae,X]),Kn(()=>{if(a||!q)return;let pe=!1;const ge=fi(q),oe=xl(ge);$w(oe);function Ce(ye){let{reason:Ue,event:$e,nested:Rt}=ye;if(["hover","safe-polygon"].includes(Ue)&&$e.type==="mouseleave"&&(ie.current=!0),Ue==="outside-press")if(Rt)ie.current=!1,pe=!0;else if(FU($e)||jU($e))ie.current=!1;else{let zt=!1;document.createElement("div").focus({get preventScroll(){return zt=!0,!1}}),zt?(ie.current=!1,pe=!0):ie.current=!0}}D.on("openchange",Ce);const Te=ge.createElement("span");Te.setAttribute("tabindex","-1"),Te.setAttribute("aria-hidden","true"),Object.assign(Te.style,vE),z&&x&&x.insertAdjacentElement("afterend",Te);function be(){if(typeof Ae.current=="boolean"){const ye=x||dC();return ye&&ye.isConnected?ye:Te}return Ae.current.current||Te}return()=>{D.off("openchange",Ce);const ye=xl(ge),Ue=ii(k,ye)||W&&td(W.nodesRef.current,H()).some(Rt=>{var zt;return ii((zt=Rt.context)==null?void 0:zt.elements.floating,ye)}),$e=be();queueMicrotask(()=>{const Rt=Qw($e);Ae.current&&!ie.current&&Dn(Rt)&&(!(Rt!==ye&&ye!==ge.body)||Ue)&&Rt.focus({preventScroll:pe}),Te.remove()})}},[a,k,q,Ae,O,D,W,z,x,H]),C.useEffect(()=>{queueMicrotask(()=>{ie.current=!1})},[a]),Kn(()=>{if(!a&&ee)return ee.setFocusManagerState({modal:m,closeOnFocusOut:T,open:_,onOpenChange:I,domReference:x}),()=>{ee.setFocusManagerState(null)}},[a,ee,m,_,I,T,x]),Kn(()=>{a||q&&hC(q,se)},[a,q,se]);function Ie(pe){return a||!R||!m?null:l.jsx(Jw,{ref:pe==="start"?M:Y,onClick:ge=>I(!1,ge.nativeEvent),children:typeof R=="string"?R:"Dismiss"})}const Me=!a&&Z&&(m?!L:!0)&&(z||m);return l.jsxs(l.Fragment,{children:[Me&&l.jsx(qf,{"data-type":"inside",ref:he,onFocus:pe=>{if(m){const oe=ae();Qr(s[0]==="reference"?oe[0]:oe[oe.length-1])}else if(ee!=null&&ee.preserveTabOrder&&ee.portalNode)if(ie.current=!1,nd(pe,ee.portalNode)){const oe=C0(x);oe==null||oe.focus()}else{var ge;(ge=ee.beforeOutsideRef.current)==null||ge.focus()}}}),!L&&Ie("start"),n,Ie("end"),Me&&l.jsx(qf,{"data-type":"inside",ref:me,onFocus:pe=>{if(m)Qr(ae()[0]);else if(ee!=null&&ee.preserveTabOrder&&ee.portalNode)if(T&&(ie.current=!0),nd(pe,ee.portalNode)){const oe=b0(x);oe==null||oe.focus()}else{var ge;(ge=ee.afterOutsideRef.current)==null||ge.focus()}}})]})}function fC(e){return Dn(e.target)&&e.target.tagName==="BUTTON"}function tP(e){return Dn(e.target)&&e.target.tagName==="A"}function EC(e){return DE(e)}function nP(e,t){t===void 0&&(t={});const{open:n,onOpenChange:a,dataRef:s,elements:{domReference:c}}=e,{enabled:d=!0,event:f="click",toggle:h=!0,ignoreMouse:m=!1,keyboardHandlers:R=!0,stickIfOpen:T=!0}=t,S=C.useRef(),g=C.useRef(!1),_=C.useMemo(()=>({onPointerDown(I){S.current=I.pointerType},onMouseDown(I){const D=S.current;I.button===0&&f!=="click"&&(Hc(D,!0)&&m||(n&&h&&(!(s.current.openEvent&&T)||s.current.openEvent.type==="mousedown")?a(!1,I.nativeEvent,"click"):(I.preventDefault(),a(!0,I.nativeEvent,"click"))))},onClick(I){const D=S.current;if(f==="mousedown"&&S.current){S.current=void 0;return}Hc(D,!0)&&m||(n&&h&&(!(s.current.openEvent&&T)||s.current.openEvent.type==="click")?a(!1,I.nativeEvent,"click"):a(!0,I.nativeEvent,"click"))},onKeyDown(I){S.current=void 0,!(I.defaultPrevented||!R||fC(I))&&(I.key===" "&&!EC(c)&&(I.preventDefault(),g.current=!0),!tP(I)&&I.key==="Enter"&&a(!(n&&h),I.nativeEvent,"click"))},onKeyUp(I){I.defaultPrevented||!R||fC(I)||EC(c)||I.key===" "&&g.current&&(g.current=!1,a(!(n&&h),I.nativeEvent,"click"))}}),[s,c,f,m,R,a,n,T,h]);return C.useMemo(()=>d?{reference:_}:{},[d,_])}function iP(e,t){let n=null,a=null,s=!1;return{contextElement:e||void 0,getBoundingClientRect(){var c;const d=(e==null?void 0:e.getBoundingClientRect())||{width:0,height:0,x:0,y:0},f=t.axis==="x"||t.axis==="both",h=t.axis==="y"||t.axis==="both",m=["mouseenter","mousemove"].includes(((c=t.dataRef.current.openEvent)==null?void 0:c.type)||"")&&t.pointerType!=="touch";let R=d.width,T=d.height,S=d.x,g=d.y;return n==null&&t.x&&f&&(n=d.x-t.x),a==null&&t.y&&h&&(a=d.y-t.y),S-=n||0,g-=a||0,R=0,T=0,!s||m?(R=t.axis==="y"?d.width:0,T=t.axis==="x"?d.height:0,S=f&&t.x!=null?t.x:S,g=h&&t.y!=null?t.y:g):s&&!m&&(T=t.axis==="x"?d.height:T,R=t.axis==="y"?d.width:R),s=!0,{width:R,height:T,x:S,y:g,top:g,right:S+R,bottom:g+T,left:S}}}}function mC(e){return e!=null&&e.clientX!=null}function aP(e,t){t===void 0&&(t={});const{open:n,dataRef:a,elements:{floating:s,domReference:c},refs:d}=e,{enabled:f=!0,axis:h="both",x:m=null,y:R=null}=t,T=C.useRef(!1),S=C.useRef(null),[g,_]=C.useState(),[I,D]=C.useState([]),O=gi((P,L)=>{T.current||a.current.openEvent&&!mC(a.current.openEvent)||d.setPositionReference(iP(c,{x:P,y:L,axis:h,dataRef:a,pointerType:g}))}),x=gi(P=>{m!=null||R!=null||(n?S.current||D([]):O(P.clientX,P.clientY))}),k=Hc(g)?s:n,H=C.useCallback(()=>{if(!k||!f||m!=null||R!=null)return;const P=pi(s);function L(j){const Z=za(j);ii(s,Z)?(P.removeEventListener("mousemove",L),S.current=null):O(j.clientX,j.clientY)}if(!a.current.openEvent||mC(a.current.openEvent)){P.addEventListener("mousemove",L);const j=()=>{P.removeEventListener("mousemove",L),S.current=null};return S.current=j,j}d.setPositionReference(c)},[k,f,m,R,s,a,d,c,O]);C.useEffect(()=>H(),[H,I]),C.useEffect(()=>{f&&!s&&(T.current=!1)},[f,s]),C.useEffect(()=>{!f&&n&&(T.current=!0)},[f,n]),Kn(()=>{f&&(m!=null||R!=null)&&(T.current=!1,O(m,R))},[f,m,R,O]);const G=C.useMemo(()=>{function P(L){let{pointerType:j}=L;_(j)}return{onPointerDown:P,onPointerEnter:P,onMouseMove:x,onMouseEnter:x}},[x]);return C.useMemo(()=>f?{reference:G}:{},[f,G])}const oP={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},lP={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},AC=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function P0(e,t){t===void 0&&(t={});const{open:n,onOpenChange:a,elements:s,dataRef:c}=e,{enabled:d=!0,escapeKey:f=!0,outsidePress:h=!0,outsidePressEvent:m="pointerdown",referencePress:R=!1,referencePressEvent:T="pointerdown",ancestorScroll:S=!1,bubbles:g,capture:_}=t,I=yE(),D=gi(typeof h=="function"?h:()=>!1),O=typeof h=="function"?D:h,x=C.useRef(!1),k=C.useRef(!1),{escapeKey:H,outsidePress:G}=AC(g),{escapeKey:P,outsidePress:L}=AC(_),j=C.useRef(!1),Z=gi(ee=>{var M;if(!n||!d||!f||ee.key!=="Escape"||j.current)return;const Y=(M=c.current.floatingContext)==null?void 0:M.nodeId,ie=I?td(I.nodesRef.current,Y):[];if(!H&&(ee.stopPropagation(),ie.length>0)){let le=!0;if(ie.forEach(v=>{var z;if((z=v.context)!=null&&z.open&&!v.context.dataRef.current.__escapeKeyBubbles){le=!1;return}}),!le)return}a(!1,BU(ee)?ee.nativeEvent:ee,"escape-key")}),J=gi(ee=>{var M;const Y=()=>{var ie;Z(ee),(ie=za(ee))==null||ie.removeEventListener("keydown",Y)};(M=za(ee))==null||M.addEventListener("keydown",Y)}),se=gi(ee=>{var M;const Y=x.current;x.current=!1;const ie=k.current;if(k.current=!1,m==="click"&&ie||Y||typeof O=="function"&&!O(ee))return;const le=za(ee),v="["+Xs("inert")+"]",z=fi(s.floating).querySelectorAll(v);let q=wt(le)?le:null;for(;q&&!$o(q);){const Q=el(q);if($o(Q)||!wt(Q))break;q=Q}if(z.length&&wt(le)&&!PU(le)&&!ii(le,s.floating)&&Array.from(z).every(Q=>!ii(q,Q)))return;if(Dn(le)&&W){const Q=$o(le),he=Oa(le),me=/auto|scroll/,Ie=Q||me.test(he.overflowX),Me=Q||me.test(he.overflowY),pe=Ie&&le.clientWidth>0&&le.scrollWidth>le.clientWidth,ge=Me&&le.clientHeight>0&&le.scrollHeight>le.clientHeight,oe=he.direction==="rtl",Ce=ge&&(oe?ee.offsetX<=le.offsetWidth-le.clientWidth:ee.offsetX>le.clientWidth),Te=pe&&ee.offsetY>le.clientHeight;if(Ce||Te)return}const F=(M=c.current.floatingContext)==null?void 0:M.nodeId,ae=I&&td(I.nodesRef.current,F).some(Q=>{var he;return HR(ee,(he=Q.context)==null?void 0:he.elements.floating)});if(HR(ee,s.floating)||HR(ee,s.domReference)||ae)return;const K=I?td(I.nodesRef.current,F):[];if(K.length>0){let Q=!0;if(K.forEach(he=>{var me;if((me=he.context)!=null&&me.open&&!he.context.dataRef.current.__outsidePressBubbles){Q=!1;return}}),!Q)return}a(!1,ee,"outside-press")}),X=gi(ee=>{var M;const Y=()=>{var ie;se(ee),(ie=za(ee))==null||ie.removeEventListener(m,Y)};(M=za(ee))==null||M.addEventListener(m,Y)});C.useEffect(()=>{if(!n||!d)return;c.current.__escapeKeyBubbles=H,c.current.__outsidePressBubbles=G;let ee=-1;function M(z){a(!1,z,"ancestor-scroll")}function Y(){window.clearTimeout(ee),j.current=!0}function ie(){ee=window.setTimeout(()=>{j.current=!1},CE()?5:0)}const le=fi(s.floating);f&&(le.addEventListener("keydown",P?J:Z,P),le.addEventListener("compositionstart",Y),le.addEventListener("compositionend",ie)),O&&le.addEventListener(m,L?X:se,L);let v=[];return S&&(wt(s.domReference)&&(v=zl(s.domReference)),wt(s.floating)&&(v=v.concat(zl(s.floating))),!wt(s.reference)&&s.reference&&s.reference.contextElement&&(v=v.concat(zl(s.reference.contextElement)))),v=v.filter(z=>{var q;return z!==((q=le.defaultView)==null?void 0:q.visualViewport)}),v.forEach(z=>{z.addEventListener("scroll",M,{passive:!0})}),()=>{f&&(le.removeEventListener("keydown",P?J:Z,P),le.removeEventListener("compositionstart",Y),le.removeEventListener("compositionend",ie)),O&&le.removeEventListener(m,L?X:se,L),v.forEach(z=>{z.removeEventListener("scroll",M)}),window.clearTimeout(ee)}},[c,s,f,O,m,n,a,S,d,H,G,Z,P,J,se,L,X]),C.useEffect(()=>{x.current=!1},[O,m]);const Ae=C.useMemo(()=>({onKeyDown:Z,...R&&{[oP[T]]:ee=>{a(!1,ee.nativeEvent,"reference-press")},...T!=="click"&&{onClick(ee){a(!1,ee.nativeEvent,"reference-press")}}}}),[Z,a,R,T]),W=C.useMemo(()=>({onKeyDown:Z,onMouseDown(){k.current=!0},onMouseUp(){k.current=!0},[lP[m]]:()=>{x.current=!0}}),[Z,m]);return C.useMemo(()=>d?{reference:Ae,floating:W}:{},[d,Ae,W])}function wS(e){const{open:t=!1,onOpenChange:n,elements:a}=e,s=kS(),c=C.useRef({}),[d]=C.useState(()=>Pw()),f=US()!=null,[h,m]=C.useState(a.reference),R=gi((g,_,I)=>{c.current.openEvent=g?_:void 0,d.emit("openchange",{open:g,event:_,reason:I,nested:f}),n==null||n(g,_,I)}),T=C.useMemo(()=>({setPositionReference:m}),[]),S=C.useMemo(()=>({reference:h||a.reference||null,floating:a.floating||null,domReference:a.reference}),[h,a.reference,a.floating]);return C.useMemo(()=>({dataRef:c,open:t,onOpenChange:R,elements:S,events:d,floatingId:s,refs:T}),[t,R,S,d,s,T])}function sP(e){e===void 0&&(e={});const{nodeId:t}=e,n=wS({...e,elements:{reference:null,floating:null,...e.elements}}),a=e.rootContext||n,s=a.elements,[c,d]=C.useState(null),[f,h]=C.useState(null),R=(s==null?void 0:s.domReference)||c,T=C.useRef(null),S=yE();Kn(()=>{R&&(T.current=R)},[R]);const g=Nw({...e,elements:{...s,...f&&{reference:f}}}),_=C.useCallback(k=>{const H=wt(k)?{getBoundingClientRect:()=>k.getBoundingClientRect(),getClientRects:()=>k.getClientRects(),contextElement:k}:k;h(H),g.refs.setReference(H)},[g.refs]),I=C.useCallback(k=>{(wt(k)||k===null)&&(T.current=k,d(k)),(wt(g.refs.reference.current)||g.refs.reference.current===null||k!==null&&!wt(k))&&g.refs.setReference(k)},[g.refs]),D=C.useMemo(()=>({...g.refs,setReference:I,setPositionReference:_,domReference:T}),[g.refs,I,_]),O=C.useMemo(()=>({...g.elements,domReference:R}),[g.elements,R]),x=C.useMemo(()=>({...g,...a,refs:D,elements:O,nodeId:t}),[g,D,O,t,a]);return Kn(()=>{a.dataRef.current.floatingContext=x;const k=S==null?void 0:S.nodesRef.current.find(H=>H.id===t);k&&(k.context=x)}),C.useMemo(()=>({...g,context:x,refs:D,elements:O}),[g,D,O,x])}function FR(){return UU()&&_0()}function rP(e,t){t===void 0&&(t={});const{open:n,onOpenChange:a,events:s,dataRef:c,elements:d}=e,{enabled:f=!0,visibleOnly:h=!0}=t,m=C.useRef(!1),R=C.useRef(-1),T=C.useRef(!0);C.useEffect(()=>{if(!f)return;const g=pi(d.domReference);function _(){!n&&Dn(d.domReference)&&d.domReference===xl(fi(d.domReference))&&(m.current=!0)}function I(){T.current=!0}function D(){T.current=!1}return g.addEventListener("blur",_),FR()&&(g.addEventListener("keydown",I,!0),g.addEventListener("pointerdown",D,!0)),()=>{g.removeEventListener("blur",_),FR()&&(g.removeEventListener("keydown",I,!0),g.removeEventListener("pointerdown",D,!0))}},[d.domReference,n,f]),C.useEffect(()=>{if(!f)return;function g(_){let{reason:I}=_;(I==="reference-press"||I==="escape-key")&&(m.current=!0)}return s.on("openchange",g),()=>{s.off("openchange",g)}},[s,f]),C.useEffect(()=>()=>{ea(R)},[]);const S=C.useMemo(()=>({onMouseLeave(){m.current=!1},onFocus(g){if(m.current)return;const _=za(g.nativeEvent);if(h&&wt(_)){if(FR()&&!g.relatedTarget){if(!T.current&&!DE(_))return}else if(!GU(_))return}a(!0,g.nativeEvent,"focus")},onBlur(g){m.current=!1;const _=g.relatedTarget,I=g.nativeEvent,D=wt(_)&&_.hasAttribute(Xs("focus-guard"))&&_.getAttribute("data-type")==="outside";R.current=window.setTimeout(()=>{var O;const x=xl(d.domReference?d.domReference.ownerDocument:document);!_&&x===d.domReference||ii((O=c.current.floatingContext)==null?void 0:O.refs.floating.current,x)||ii(d.domReference,x)||D||a(!1,I,"focus")})}}),[c,d.domReference,a,h]);return C.useMemo(()=>f?{reference:S}:{},[f,S])}function jR(e,t,n){const a=new Map,s=n==="item";let c=e;if(s&&e){const{[nC]:d,[iC]:f,...h}=e;c=h}return{...n==="floating"&&{tabIndex:-1,[xw]:""},...c,...t.map(d=>{const f=d?d[n]:null;return typeof f=="function"?e?f(e):null:f}).concat(e).reduce((d,f)=>(f&&Object.entries(f).forEach(h=>{let[m,R]=h;if(!(s&&[nC,iC].includes(m)))if(m.indexOf("on")===0){if(a.has(m)||a.set(m,[]),typeof R=="function"){var T;(T=a.get(m))==null||T.push(R),d[m]=function(){for(var S,g=arguments.length,_=new Array(g),I=0;I<g;I++)_[I]=arguments[I];return(S=a.get(m))==null?void 0:S.map(D=>D(..._)).find(D=>D!==void 0)}}}else d[m]=R}),d),{})}}function G0(e){e===void 0&&(e=[]);const t=e.map(f=>f==null?void 0:f.reference),n=e.map(f=>f==null?void 0:f.floating),a=e.map(f=>f==null?void 0:f.item),s=C.useCallback(f=>jR(f,e,"reference"),t),c=C.useCallback(f=>jR(f,e,"floating"),n),d=C.useCallback(f=>jR(f,e,"item"),a);return C.useMemo(()=>({getReferenceProps:s,getFloatingProps:c,getItemProps:d}),[s,c,d])}const cP=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function uP(e,t){var n,a;t===void 0&&(t={});const{open:s,elements:c,floatingId:d}=e,{enabled:f=!0,role:h="dialog"}=t,m=kS(),R=((n=c.domReference)==null?void 0:n.id)||m,T=C.useMemo(()=>{var x;return((x=pT(c.floating))==null?void 0:x.id)||d},[c.floating,d]),S=(a=cP.get(h))!=null?a:h,_=US()!=null,I=C.useMemo(()=>S==="tooltip"||h==="label"?{["aria-"+(h==="label"?"labelledby":"describedby")]:s?T:void 0}:{"aria-expanded":s?"true":"false","aria-haspopup":S==="alertdialog"?"dialog":S,"aria-controls":s?T:void 0,...S==="listbox"&&{role:"combobox"},...S==="menu"&&{id:R},...S==="menu"&&_&&{role:"menuitem"},...h==="select"&&{"aria-autocomplete":"none"},...h==="combobox"&&{"aria-autocomplete":"list"}},[S,T,_,s,R,h]),D=C.useMemo(()=>{const x={id:T,...S&&{role:S}};return S==="tooltip"||h==="label"?x:{...x,...S==="menu"&&{"aria-labelledby":R}}},[S,T,R,h]),O=C.useCallback(x=>{let{active:k,selected:H}=x;const G={role:"option",...k&&{id:T+"-fui-option"}};switch(h){case"select":return{...G,"aria-selected":k&&H};case"combobox":return{...G,"aria-selected":H}}return{}},[T,h]);return C.useMemo(()=>f?{reference:I,floating:D,item:O}:{},[f,I,D,O])}function dP(e,t,n){n===void 0&&(n=!0);let a=e.filter(c=>{var d;return c.parentId===t&&((d=c.context)==null?void 0:d.open)}),s=a;for(;s.length;)s=n?e.filter(c=>{var d;return(d=s)==null?void 0:d.some(f=>{var h;return c.parentId===f.id&&((h=c.context)==null?void 0:h.open)})}):e,a=a.concat(s);return a}function RC(e,t){const[n,a]=e;let s=!1;const c=t.length;for(let d=0,f=c-1;d<c;f=d++){const[h,m]=t[d]||[0,0],[R,T]=t[f]||[0,0];m>=a!=T>=a&&n<=(R-h)*(a-m)/(T-m)+h&&(s=!s)}return s}function hP(e,t){return e[0]>=t.x&&e[0]<=t.x+t.width&&e[1]>=t.y&&e[1]<=t.y+t.height}function fP(e){e===void 0&&(e={});const{buffer:t=.5,blockPointerEvents:n=!1,requireIntent:a=!0}=e;let s,c=!1,d=null,f=null,h=performance.now();function m(T,S){const g=performance.now(),_=g-h;if(d===null||f===null||_===0)return d=T,f=S,h=g,null;const I=T-d,D=S-f,x=Math.sqrt(I*I+D*D)/_;return d=T,f=S,h=g,x}const R=T=>{let{x:S,y:g,placement:_,elements:I,onClose:D,nodeId:O,tree:x}=T;return function(H){function G(){clearTimeout(s),D()}if(clearTimeout(s),!I.domReference||!I.floating||_==null||S==null||g==null)return;const{clientX:P,clientY:L}=H,j=[P,L],Z=Yw(H),J=H.type==="mouseleave",se=GR(I.floating,Z),X=GR(I.domReference,Z),Ae=I.domReference.getBoundingClientRect(),W=I.floating.getBoundingClientRect(),ee=_.split("-")[0],M=S>W.right-W.width/2,Y=g>W.bottom-W.height/2,ie=hP(j,Ae),le=W.width>Ae.width,v=W.height>Ae.height,z=(le?Ae:W).left,q=(le?Ae:W).right,F=(v?Ae:W).top,ae=(v?Ae:W).bottom;if(se&&(c=!0,!J))return;if(X&&(c=!1),X&&!J){c=!0;return}if(J&&wt(H.relatedTarget)&&GR(I.floating,H.relatedTarget)||x&&dP(x.nodesRef.current,O).some(he=>{let{context:me}=he;return me==null?void 0:me.open}))return;if(ee==="top"&&g>=Ae.bottom-1||ee==="bottom"&&g<=Ae.top+1||ee==="left"&&S>=Ae.right-1||ee==="right"&&S<=Ae.left+1)return G();let K=[];switch(ee){case"top":K=[[z,Ae.top+1],[z,W.bottom-1],[q,W.bottom-1],[q,Ae.top+1]];break;case"bottom":K=[[z,W.top+1],[z,Ae.bottom-1],[q,Ae.bottom-1],[q,W.top+1]];break;case"left":K=[[W.right-1,ae],[W.right-1,F],[Ae.left+1,F],[Ae.left+1,ae]];break;case"right":K=[[Ae.right-1,ae],[Ae.right-1,F],[W.left+1,F],[W.left+1,ae]];break}function Q(he){let[me,Ie]=he;switch(ee){case"top":{const Me=[le?me+t/2:M?me+t*4:me-t*4,Ie+t+1],pe=[le?me-t/2:M?me+t*4:me-t*4,Ie+t+1],ge=[[W.left,M||le?W.bottom-t:W.top],[W.right,M?le?W.bottom-t:W.top:W.bottom-t]];return[Me,pe,...ge]}case"bottom":{const Me=[le?me+t/2:M?me+t*4:me-t*4,Ie-t],pe=[le?me-t/2:M?me+t*4:me-t*4,Ie-t],ge=[[W.left,M||le?W.top+t:W.bottom],[W.right,M?le?W.top+t:W.bottom:W.top+t]];return[Me,pe,...ge]}case"left":{const Me=[me+t+1,v?Ie+t/2:Y?Ie+t*4:Ie-t*4],pe=[me+t+1,v?Ie-t/2:Y?Ie+t*4:Ie-t*4];return[...[[Y||v?W.right-t:W.left,W.top],[Y?v?W.right-t:W.left:W.right-t,W.bottom]],Me,pe]}case"right":{const Me=[me-t,v?Ie+t/2:Y?Ie+t*4:Ie-t*4],pe=[me-t,v?Ie-t/2:Y?Ie+t*4:Ie-t*4],ge=[[Y||v?W.left+t:W.right,W.top],[Y?v?W.left+t:W.right:W.left+t,W.bottom]];return[Me,pe,...ge]}}}if(!RC([P,L],K)){if(c&&!ie)return G();if(!J&&a){const he=m(H.clientX,H.clientY);if(he!==null&&he<.1)return G()}RC([P,L],Q([S,g]))?!c&&a&&(s=window.setTimeout(G,40)):G()}}};return R.__options={blockPointerEvents:n},R}function B0({controlled:e,default:t,name:n,state:a="value"}){const{current:s}=C.useRef(e!==void 0),[c,d]=C.useState(t),f=s?e:c,h=C.useCallback(m=>{s||d(m)},[]);return[f,h]}const Ro=typeof window<"u"?C.useLayoutEffect:C.useEffect;function F0(e){const[t,n]=C.useState(e?"idle":void 0),[a,s]=C.useState(e);return e&&!a&&(s(!0),n("starting")),!e&&a&&t!=="ending"&&n("ending"),!e&&!a&&t==="ending"&&n(void 0),Ro(()=>{if(!e)return;e&&a&&t!=="idle"&&n("starting");const c=requestAnimationFrame(()=>{n("idle")});return()=>{cancelAnimationFrame(c)}},[e,a,n,t]),C.useMemo(()=>({mounted:a,setMounted:s,transitionStatus:t}),[a,t])}function Da(e){const t=C.useRef(e);return Ro(()=>{t.current=e}),C.useCallback((...n)=>{var a;return(a=t.current)==null?void 0:a.call(t,...n)},[])}const j0=600;function z0(e){if(e)return{click:"click",hover:"hover",focus:"focus","focus-out":"focus-out","escape-key":"escape-key","outside-press":"outside-press","reference-press":"trigger-press","safe-polygon":"hover","ancestor-scroll":void 0,"list-navigation":void 0}[e]}function EP(e,t=!1){const n=C.useRef(-1),a=C.useRef(-1),s=Da(()=>{cancelAnimationFrame(n.current),clearTimeout(a.current)});return C.useEffect(()=>s,[s]),Da((c,d=null)=>{s();const f=e.current;f&&(typeof f.getAnimations!="function"||globalThis.BASE_UI_ANIMATIONS_DISABLED?c():n.current=requestAnimationFrame(()=>{function h(){f&&Promise.allSettled(f.getAnimations().map(m=>m.finished)).then(()=>{d!=null&&d.aborted||pd.flushSync(c)})}t?a.current=window.setTimeout(h):h()}))})}function NT(e){const t=C.useRef(e);return Ro(()=>{t.current=e}),t}function ME(e){const{enabled:t=!0,open:n,ref:a,onComplete:s}=e,c=NT(n),d=Da(s),f=EP(a,n);C.useEffect(()=>{t&&f(()=>{n===c.current&&d()})},[t,n,d,f,c])}const mP=C.createContext(void 0);function AP(){return C.useContext(mP)}function RP(e){const{open:t,onOpenChange:n,defaultOpen:a=!1,hoverable:s=!0,trackCursorAxis:c="none",delay:d,closeDelay:f,onOpenChangeComplete:h,disabled:m}=e,R=d??j0,T=f??0,[S,g]=C.useState(null),[_,I]=C.useState(null),[D,O]=C.useState(),x=C.useRef(null),[k,H]=B0({controlled:t,default:a,name:"Tooltip",state:"open"}),G=Da(n),P=C.useCallback((F,ae,K)=>{G(F,ae,K),H(F)},[G,H]);k&&m&&P(!1,void 0,void 0);const{mounted:L,setMounted:j,transitionStatus:Z}=F0(k),J=Da(()=>{j(!1),h==null||h(!1)});ME({enabled:!e.actionsRef,open:k,ref:x,onComplete(){k||J()}}),C.useImperativeHandle(e.actionsRef,()=>({unmount:J}),[J]);const se=wS({elements:{reference:S,floating:_},open:k,onOpenChange(F,ae,K){const Q=K==="hover"||K==="safe-polygon",he=F&&K==="focus",me=!F&&(K==="reference-press"||K==="escape-key");function Ie(){P(F,ae,z0(K))}Q?pd.flushSync(Ie):Ie(),he||me?O(he?"focus":"dismiss"):K==="hover"&&O(void 0)}}),X=AP(),{delayRef:Ae,isInstantPhase:W,hasProvider:ee}=zw(se),M=W?"delay":D,Y=Fw(se,{enabled:!m,mouseOnly:!0,move:!1,handleClose:s&&c!=="both"?fP():null,restMs(){const F=X==null?void 0:X.delay,ae=typeof Ae.current=="object"?Ae.current.open:void 0;let K=R;return ee&&(ae!==0?K=d??F??R:K=0),K},delay(){const F=typeof Ae.current=="object"?Ae.current.close:void 0;let ae=T;return f==null&&ee&&(ae=F),{close:ae}}}),ie=rP(se,{enabled:!m}),le=P0(se,{enabled:!m,referencePress:!0}),v=aP(se,{enabled:!m&&c!=="none",axis:c==="none"?void 0:c}),{getReferenceProps:z,getFloatingProps:q}=G0([Y,ie,le,v]);return C.useMemo(()=>({open:k,setOpen:P,mounted:L,setMounted:j,setTriggerElement:g,positionerElement:_,setPositionerElement:I,popupRef:x,getTriggerProps:z,getPopupProps:q,floatingRootContext:se,instantType:M,transitionStatus:Z,onOpenChangeComplete:h}),[L,k,j,_,P,z,q,se,M,Z,h])}const Y0=function(t){const{disabled:n=!1,defaultOpen:a=!1,onOpenChange:s,open:c,delay:d,closeDelay:f,hoverable:h=!0,trackCursorAxis:m="none",actionsRef:R,onOpenChangeComplete:T}=t,S=d??j0,g=f??0,_=RP({...t,defaultOpen:a,onOpenChange:s,open:c,hoverable:h,trackCursorAxis:m,delay:d,closeDelay:f,actionsRef:R,onOpenChangeComplete:T,disabled:n}),I=C.useMemo(()=>({..._,delay:S,closeDelay:g,trackCursorAxis:m}),[_,S,g,m]);return l.jsx(u0.Provider,{value:I,children:t.children})};let Zf=function(e){return e.startingStyle="data-starting-style",e.endingStyle="data-ending-style",e}({});const TP={[Zf.startingStyle]:""},SP={[Zf.endingStyle]:""},PS={transitionStatus(e){return e==="starting"?TP:e==="ending"?SP:null}};let Ms=function(e){return e.open="data-open",e.closed="data-closed",e[e.startingStyle=Zf.startingStyle]="startingStyle",e[e.endingStyle=Zf.endingStyle]="endingStyle",e.anchorHidden="data-anchor-hidden",e}({}),gP=function(e){return e.popupOpen="data-popup-open",e.pressed="data-pressed",e}({});const IP={[gP.popupOpen]:""},_P={[Ms.open]:""},pP={[Ms.closed]:""},NP={[Ms.anchorHidden]:""},K0={open(e){return e?IP:null}},LE={open(e){return e?_P:pP},anchorHidden(e){return e?NP:null}};function CP(e,t){let n={};return Object.entries(e).forEach(([a,s])=>{if(t!=null&&t.hasOwnProperty(a)){const c=t[a](s);c!=null&&(n={...n,...c});return}s===!0?n[`data-${a.toLowerCase()}`]="":s&&(n[`data-${a.toLowerCase()}`]=s.toString())}),n}function bP(e,t){return typeof e=="function"?e(t):e}function _o(...e){if(e.length===0)return{};if(e.length===1)return TC(e[0],{});let t=TC(e[0],{});for(let n=1;n<e.length;n+=1){const a=e[n];a&&(V0(a)?t=a(t):t=OP(t,a))}return t??{}}function TC(e,t){return V0(e)?e(t):e??{}}function OP(e,t){return t?e?Object.entries(t).reduce((n,[a,s])=>(DP(a,s)?n[a]=yP(e[a],s):a==="style"?n[a]=vP(e.style,s):a==="className"?n[a]=MP(e.className,s):n[a]=s,n),{...e}):t:e||{}}function DP(e,t){const n=e.charCodeAt(2);return e[0]==="o"&&e[1]==="n"&&n>=65&&n<=90&&typeof t=="function"}function V0(e){return typeof e=="function"}function yP(e,t){return n=>{if(LP(n)){const s=n;CT(s);const c=t(s);return s.baseUIHandlerPrevented||e==null||e(s),c}const a=t(n);return e==null||e(n),a}}function CT(e){return e.preventBaseUIHandler=()=>{e.baseUIHandlerPrevented=!0},e}function vP(e,t){if(t||e)return{...e,...t}}function MP(e,t){return t?e?t+" "+e:t:e}function LP(e){return e!=null&&typeof e=="object"&&"nativeEvent"in e}function xP(e,t,n){return typeof e=="function"?e(t,n):C.cloneElement(e,{..._o(t,e.props),ref:t.ref})}function Gc(...e){const t=C.useRef(void 0),n=C.useCallback(a=>{const s=e.map(c=>{if(c==null)return null;if(typeof c=="function"){const d=c,f=d(a);return typeof f=="function"?f:()=>{d(null)}}return c.current=a,()=>{c.current=null}});return()=>{s.forEach(c=>c==null?void 0:c())}},e);return C.useMemo(()=>e.every(a=>a==null)?null:a=>{t.current&&(t.current(),t.current=void 0),a!=null&&(t.current=n(a))},e)}const HP=parseInt(C.version,10);function W0(e){return HP>=e}function kP(e,...t){let n;return typeof e!="function"?n=W0(19)?e.props.ref:e.ref:n=null,Gc(n,...t)}function UP(e){return function(n){return e==="button"?l.jsx("button",{type:"button",...n}):e==="img"?l.jsx("img",{alt:"",...n}):l.jsx(e,{...n})}}const SC={};function xE(e,t,n={}){const{className:a,render:s}=t,{propGetter:c=O=>O,state:d=SC,ref:f,props:h,customStyleHookMapping:m,styleHooks:R=!0}=n,T=s||(typeof e=="string"?UP(e):e),S=bP(a,d),g=C.useMemo(()=>R?CP(d,m):SC,[d,m,R]),_=c({...g,...Array.isArray(h)?_o(...h):h});let I=[];f!==void 0&&(I=Array.isArray(f)?f:[f]);const D={..._,ref:kP(T,_.ref,...I)};return S!==void 0&&(D.className=S),()=>xP(T,D,d)}const wP=C.forwardRef(function(t,n){const{className:a,render:s,...c}=t,{open:d,setTriggerElement:f,getTriggerProps:h}=_d(),m=C.useMemo(()=>({open:d}),[d]);return xE("button",t,{state:m,ref:[n,f],props:[h,c],customStyleHookMapping:K0})()});xR.oneOfType([xR.func,xR.object]);const X0=C.createContext(void 0);function PP(){const e=C.useContext(X0);if(e===void 0)throw new Error("Base UI: <Tooltip.Portal> is missing.");return e}function GP(e){const t=U0({root:e.root});return t&&pd.createPortal(e.children,t)}function q0(e){const{children:t,keepMounted:n=!1,container:a}=e,{mounted:s}=_d();return s||n?l.jsx(X0.Provider,{value:n,children:l.jsx(GP,{root:a,children:t})}):null}const Z0=C.createContext(void 0);function BP(){const e=C.useContext(Z0);if(e===void 0)throw new Error("Base UI: TooltipPositionerContext is missing. TooltipPositioner parts must be placed within <Tooltip.Positioner>.");return e}const FP=C.createContext(void 0);function jP(e=!0){const t=C.useContext(FP);if(t===void 0&&!e)throw new Error("Base UI: DirectionContext is missing.");return(t==null?void 0:t.direction)??"ltr"}function gC(e,t,n){const a=e==="inline-start"||e==="inline-end";return{top:"top",right:a?n?"inline-start":"inline-end":"right",bottom:"bottom",left:a?n?"inline-end":"inline-start":"left"}[t]}function zP(e){var Me,pe;const{anchor:t,positionMethod:n="absolute",side:a="bottom",sideOffset:s=0,align:c="center",alignOffset:d=0,collisionBoundary:f,collisionPadding:h=5,sticky:m=!1,arrowPadding:R=5,keepMounted:T=!1,floatingRootContext:S,mounted:g,trackAnchor:_=!0,nodeId:I}=e,O=jP()==="rtl",x={top:"top",right:"right",bottom:"bottom",left:"left","inline-end":O?"left":"right","inline-start":O?"right":"left"}[a],k=c==="center"?x:`${x}-${c}`,H={boundary:f==="clipping-ancestors"?"clippingAncestors":f,padding:h},G=C.useRef(null),P=NT(s),L=NT(d),J=[bw(({rects:ge,placement:oe})=>{const Ce={side:gC(a,Na(oe),O),align:Zl(oe)||"center",anchor:{width:ge.reference.width,height:ge.reference.height},positioner:{width:ge.floating.width,height:ge.floating.height}},Te=typeof P.current=="function"?P.current(Ce):P.current,be=typeof L.current=="function"?L.current(Ce):L.current;return{mainAxis:Te,crossAxis:be,alignmentAxis:be}},[typeof s!="function"?s:0,typeof d!="function"?d:0,O,a])],se=yw(H),X=Ow({...H,crossAxis:m,limiter:m?void 0:Dw(()=>{if(!G.current)return{};const{height:ge}=G.current.getBoundingClientRect();return{offset:ge/2+(typeof h=="number"?h:0)}})});c!=="center"?J.push(se,X):J.push(X,se),J.push(vw({...H,apply({elements:{floating:ge},rects:{reference:oe},availableWidth:Ce,availableHeight:Te}){Object.entries({"--available-width":`${Ce}px`,"--available-height":`${Te}px`,"--anchor-width":`${oe.width}px`,"--anchor-height":`${oe.height}px`}).forEach(([be,ye])=>{ge.style.setProperty(be,ye)})}}),Lw(()=>({element:G.current||document.createElement("div"),padding:R}),[R]),Mw(),{name:"transformOrigin",fn({elements:ge,middlewareData:oe,placement:Ce}){var Pd,Gd;const Te=Na(Ce),be=G.current,ye=((Pd=oe.arrow)==null?void 0:Pd.x)??0,Ue=((Gd=oe.arrow)==null?void 0:Gd.y)??0,$e=(be==null?void 0:be.clientWidth)??0,Rt=(be==null?void 0:be.clientHeight)??0,zt=ye+$e/2,os=Ue+Rt/2,hr={top:`${zt}px calc(100% + ${s}px)`,bottom:`${zt}px ${-s}px`,left:`calc(100% + ${s}px) ${os}px`,right:`${-s}px ${os}px`}[Te];return ge.floating.style.setProperty("--transform-origin",hr),{}}});let Ae=S;!g&&S&&(Ae={...S,elements:{reference:null,floating:null,domReference:null}});const W=C.useMemo(()=>({elementResize:_&&typeof ResizeObserver<"u",layoutShift:_&&typeof IntersectionObserver<"u"}),[_]),{refs:ee,elements:M,floatingStyles:Y,middlewareData:ie,update:le,placement:v,context:z,isPositioned:q}=sP({rootContext:Ae,placement:k,middleware:J,strategy:n,whileElementsMounted:T?void 0:(...ge)=>JN(...ge,W),nodeId:I}),F=C.useRef(null);Ro(()=>{if(!g)return;const ge=typeof t=="function"?t():t;if(ge){const oe=IC(ge)?ge.current:ge;ee.setPositionReference(oe),F.current=oe}},[g,ee,t]),C.useEffect(()=>{g&&typeof t!="function"&&IC(t)&&t.current!==F.current&&(ee.setPositionReference(t.current),F.current=t.current)},[g,ee,t]),C.useEffect(()=>{if(T&&g&&M.domReference&&M.floating)return JN(M.domReference,M.floating,le,W)},[T,g,M,le,W]);const ae=Na(v),K=gC(a,ae,O),Q=Zl(v)||"center",he=!!((Me=ie.hide)!=null&&Me.referenceHidden),me=C.useMemo(()=>{var ge,oe;return{position:"absolute",top:(ge=ie.arrow)==null?void 0:ge.y,left:(oe=ie.arrow)==null?void 0:oe.x}},[ie.arrow]),Ie=((pe=ie.arrow)==null?void 0:pe.centerOffset)!==0;return C.useMemo(()=>({positionerStyles:Y,arrowStyles:me,arrowRef:G,arrowUncentered:Ie,side:K,align:Q,anchorHidden:he,refs:ee,context:z,isPositioned:q}),[Y,me,G,Ie,K,Q,he,ee,z,q])}function IC(e){return e!=null&&"current"in e}function YP(e){const{open:t,trackCursorAxis:n,mounted:a}=_d(),s=zP(e),c=C.useMemo(()=>{const d={};return(!t||n==="both")&&(d.pointerEvents="none"),{role:"presentation",hidden:!a,style:{...s.positionerStyles,...d}}},[t,n,a,s.positionerStyles]);return C.useMemo(()=>({props:c,...s}),[c,s])}const $0=C.forwardRef(function(t,n){const{render:a,className:s,anchor:c,positionMethod:d="absolute",side:f="top",align:h="center",sideOffset:m=0,alignOffset:R=0,collisionBoundary:T="clipping-ancestors",collisionPadding:S=5,arrowPadding:g=5,sticky:_=!1,trackAnchor:I=!0,...D}=t,{open:O,setPositionerElement:x,mounted:k,floatingRootContext:H}=_d(),G=PP(),P=YP({anchor:c,positionMethod:d,floatingRootContext:H,trackAnchor:I,mounted:k,side:f,sideOffset:m,align:h,alignOffset:R,collisionBoundary:T,collisionPadding:S,sticky:_,arrowPadding:g,keepMounted:G}),L=C.useMemo(()=>({open:O,side:P.side,align:P.align,anchorHidden:P.anchorHidden}),[O,P.side,P.align,P.anchorHidden]),j=C.useMemo(()=>({...L,arrowRef:P.arrowRef,arrowStyles:P.arrowStyles,arrowUncentered:P.arrowUncentered}),[L,P.arrowRef,P.arrowStyles,P.arrowUncentered]),Z=xE("div",t,{state:L,props:[P.props,D],ref:[n,x],customStyleHookMapping:LE});return l.jsx(Z0.Provider,{value:j,children:Z()})}),KP={...LE,...PS},Q0=C.forwardRef(function(t,n){const{className:a,render:s,...c}=t,{open:d,instantType:f,transitionStatus:h,getPopupProps:m,popupRef:R,onOpenChangeComplete:T}=_d(),{side:S,align:g}=BP();ME({open:d,ref:R,onComplete(){d&&(T==null||T(!0))}});const _=C.useMemo(()=>({open:d,side:S,align:g,instant:f,transitionStatus:h}),[d,S,g,f,h]);return xE("div",t,{state:_,ref:[n,R],props:[m,{style:h==="starting"?{transition:"none"}:{}},c],customStyleHookMapping:KP})()}),zR=new Map,J0="assets/Skills/General/Missing.png",bT=e=>{if(zR.has(e))return zR.get(e);const t=`assets/Skills/${l0(e)}`;if(t){const n=new Image;return n.src=t,n.onerror=a=>{n.src=J0,console.error("failed to load skill image: "+t),n.onerror=null},n.onload=()=>nl(),zR.set(e,n),n}};function eO(e){const t=`assets/Skills/${l0(e.skillName)}`,[n,a]=C.useState(!1);return l.jsx("img",{style:e.style,src:n?J0:t,onError:s=>a(!0),alt:e.skillName})}function VP(e={diameter:50,progress:.7,color:"rgba(0, 0, 0, 0.6)"}){const t=e.diameter/2,n=Math.PI*t,a=n*(1-e.progress),s=n-a,c=a+","+s,d=l.jsx("circle",{r:t/2,cx:20,cy:21,fill:"none",stroke:e.color,strokeWidth:t,strokeDasharray:c,strokeDashoffset:n/4+a}),f=t,h=l.jsx("circle",{r:t+f/2,cx:20,cy:21,fill:"none",stroke:e.color,strokeWidth:f});return l.jsxs("svg",{width:48,height:48,style:{position:"absolute",left:"50%",marginLeft:-20,pointerEvents:"none"},children:[d,h]})}function WP(e={diameter:50,progress:.7,color:"rgba(0, 0, 0, 0.5)"}){const t=e.diameter/2,n=2*Math.PI*t,a=n*e.progress,s=n-a,c=a+","+s,d=l.jsx("circle",{r:t,cx:20,cy:21,fill:"none",stroke:e.color,strokeWidth:2,strokeDashoffset:n/4,strokeDasharray:c});return l.jsx("svg",{width:48,height:48,style:{position:"absolute",left:"50%",marginLeft:-20,pointerEvents:"none"},children:d})}function XP(e={diameter:50,progress:.7,color:"rgba(0, 0, 0, 0.5)"}){const t=e.diameter/2,n=Math.PI*t*2,a=n*e.progress,s=n-a,c=a+","+s,d=2*Math.PI*e.progress,f="#ffffffef",h=l.jsx("circle",{r:t,cx:20,cy:21,fill:"none",stroke:f,strokeWidth:1,strokeDasharray:c,strokeDashoffset:n/4}),m=l.jsx("line",{x1:20,y1:21,x2:20,y2:21-t,stroke:f,strokeWidth:1}),R=l.jsx("line",{x1:20,y1:21,x2:20+t*Math.cos(d-Math.PI/2),y2:21+t*Math.sin(d-Math.PI/2),stroke:f,strokeWidth:1});return l.jsxs("svg",{width:48,height:48,style:{position:"absolute",left:"50%",marginLeft:-20,pointerEvents:"none"},children:[h,m,R]})}function qP(e){const[t,n]=C.useState(l.jsx("div",{})),a=C.useContext(yn),s=()=>{const P=p.getSkillInfo({game:p.getDisplayedGame(),skillName:e.skillName}),L=Ni(a),j=[];if(P.status.ready()){let X="ready ("+P.stacksAvailable,Ae=" ("+P.stacksAvailable;P.timeTillNextStackReady>0&&(X+=") (next stack ready in "+P.timeTillNextStackReady.toFixed(3),Ae+=") ("+P.timeTillNextStackReady.toFixed(3)+""),X+=")",Ae+=")",j.push(N({en:X,zh:Ae}))}else{if(P.status.unavailableReasons.includes(gt.RequirementsNotMet)&&j.push(Bs(gt.RequirementsNotMet)),P.status.unavailableReasons.includes(gt.NotEnoughMP)&&j.push(Bs(gt.NotEnoughMP)+N({en:" (needs "+P.capturedManaCost+")",zh:" "+P.capturedManaCost+""})),P.status.unavailableReasons.includes(gt.Blocked)){const X=Math.max(P.timeTillNextStackReady,P.timeTillSecondaryReady??0),Ae=N({en:"possibly ready in "+P.timeTillAvailable.toFixed(3),zh:""+P.timeTillAvailable.toFixed(3)+""}),W=N({en:" (next stack ready in "+X.toFixed(3)+")",zh:""+X.toFixed(3)+"CD"});j.push(l.jsxs(l.Fragment,{children:[Ae,P.stacksAvailable<P.maxStacks?W:void 0]}))}P.status.unavailableReasons.includes(gt.NotInCombat)&&j.push(Bs(gt.NotInCombat))}const Z=P.instantCast?0:P.castTime;let J="";P.status.ready()&&(J+=N({en:"cast: ",zh:""})+Z.toFixed(3),P.llCovered&&Z>_n.epsilon&&(J+=" (LL)"),J+=N({en:", cast+delay: ",zh:" +"})+P.timeTillDamageApplication.toFixed(3));const se=l.jsxs("div",{style:{color:p.displayingUpToDateGameState?L.text:L.historical},children:[l.jsx("div",{className:"paragraph",children:l.jsx("b",{children:aa(e.skillName)})}),l.jsx("div",{className:"paragraph",children:j.map((X,Ae)=>l.jsxs("span",{children:[X,l.jsx("br",{})]},Ae))}),l.jsx("div",{className:"paragraph",children:J})]});n(se)},c={width:48,height:48,verticalAlign:"top",position:"relative",display:"inline-block"},d={width:40,height:40,position:"absolute",top:2,left:"50%",marginLeft:-20};let f="transparent";e.readyAsideFromCd||(f="rgba(0, 0, 0, 0.6)");const h=p.getSkillInfo({game:p.getDisplayedGame(),skillName:e.skillName}),m=h.stacksAvailable,R=h.maxStacks;let T;const S=48,g=S/3+4;let _,I;if(m>0){_="0 0 2px rgba(255, 50, 0, 1), 0 0 3px rgba(255, 100, 0, 1), 0 0 5px rgba(255, 100, 0, 1)";const P=m===R?5:3;for(let L=0;L<P;L++)_+=", 0 0 10px black";I="white"}else _="0 0 4px black, 0 0 8px black",I="rgb(223,60,60)";R>1?T=l.jsx("div",{tabIndex:-1,style:{fontFamily:"Goldman Regular",color:I,fontSize:`${g}px`,textShadow:_,width:g,textAlign:"center",bottom:2,right:1,zIndex:3,position:"absolute"},children:m}):T=l.jsx(l.Fragment,{});const D=l.jsx(VP,{diameter:38,progress:e.cdProgress,color:e.ready?"rgba(0, 0, 0, 0)":"rgba(0, 0, 0, 0.6)"}),O=l.jsx(XP,{diameter:38,progress:e.cdProgress,color:e.ready?"rgba(0, 0, 0, 0)":"rgba(255, 255, 255, 1.0)"}),x=e.secondaryCdProgress&&l.jsx(WP,{diameter:32,progress:e.secondaryCdProgress,color:"rgba(250,186,47,255)"}),k=l.jsx("img",{hidden:!e.highlight,src:"/misc/proc.png",alt:"skill proc",style:{position:"absolute",width:44,height:44,top:0,left:2,zIndex:2}}),H=l.jsxs("div",{onMouseEnter:s,children:[l.jsxs("div",{style:c,children:[" ",l.jsx(eO,{style:d,skillName:e.skillName}),l.jsxs("div",{style:{position:"absolute",width:40,height:41,top:1,left:"50%",marginLeft:-20,borderRadius:3,overflow:"hidden",zIndex:1,background:f},children:[e.cdProgress>1-_n.epsilon||!e.readyAsideFromCd||D,e.cdProgress>1-_n.epsilon||O,!e.secondaryCdProgress||e.secondaryCdProgress>1-_n.epsilon||x]}),l.jsx("div",{style:{position:"absolute",width:S,height:S,background:"url('/misc/skillIcon_overlay.png') no-repeat"}})]}),k,T]}),G=l.jsx("span",{title:bn[e.skillName].name,className:"skillButton",children:l.jsx(Zs,{onClickFn:()=>{p.requestUseSkill({skillName:e.skillName,targetList:e.targetList},!0)},content:H})});return l.jsxs(Y0,{delay:0,hoverable:!1,children:[l.jsx(wP,{render:G}),l.jsx(q0,{container:document.getElementById("skillsWindowAnchor"),children:l.jsx($0,{sideOffset:3,side:"top",className:"tooltip-positioner",children:l.jsx(Q0,{className:"info-tooltip tooltip",children:t})})})]})}let tO=e=>{};function ZP(){const[e,t]=C.useState([]),[n,a]=C.useState("1"),[s,c]=C.useState("Now"),[d,f]=C.useState("0:00"),h=Array(ja).fill(!1);h[0]=!0;const[m,R]=C.useState(h),[T,S]=C.useState(0),g=()=>{const X=m.flatMap((Ae,W)=>Ae&&W!==T?[W+1]:[]);return X.splice(0,0,T+1),X},_=Nt();C.useEffect(()=>{tO=X=>t(X)},[]);const I=X=>{!X||!X.target||a(X.target.value)},D=X=>{X.preventDefault();const Ae=parseFloat(n);if(!isNaN(Ae))if(s==="Now")p.step(Ae,!0);else if(s==="LastSkill"){const W=p.game.time-p.lastSkillTime,ee=Ae-W;ee<=0?window.alert("Invalid input: trying to jump to "+Ae+"s since the last action, but "+W+"s has already elapsed."):p.step(ee,!0)}else console.assert(!1)},O=X=>{!X||!X.target||f(X.target.value)},x=X=>{X.preventDefault();const Ae=uo(d);isNaN(Ae)||(Ae>(p.displayingUpToDateGameState?p.game.getDisplayTime():p.savedHistoricalGame.getDisplayTime())?p.stepUntil(Ae,!0):window.alert("Can only jump to a time in the future!"))},k=X=>c(X.target.value),H=()=>p.removeTrailingIdleTime(),G=()=>p.waitTillNextMpOrLucidTick(),P=X=>{let Ae=m.reduce((M,Y)=>Y?M+1:M,0);const W=parseInt(X.target.value),ee=m.slice();if(W>0&&W<Ae){for(let M=ee.length-1;M>=0&&(M!==T&&ee[M]&&(ee[M]=!1,Ae--),Ae!==W);M--);R(ee)}else if(W>Ae){for(let M=0;M<ee.length&&(ee[M]||(ee[M]=!0,Ae++),W!==Ae);M++);R(ee)}},L=e.map((X,Ae)=>{const W=X.skillName,ee=X?!X.status.unavailableReasons.some(M=>M!==gt.Blocked):!1;return l.jsx(qP,{highlight:X?X.highlight:!1,skillName:W,ready:X?X.status.ready():!1,readyAsideFromCd:ee,cdProgress:X?1-X.timeTillNextStackReady/X.cdRecastTime:1,secondaryCdProgress:X&&X.secondaryCdRecastTime&&X.timeTillSecondaryReady?1-X.timeTillSecondaryReady/X.secondaryCdRecastTime:1,targetList:g()},Ae)}),j=l.jsx(qe,{topic:"waitUntilInputFormat",content:l.jsxs("div",{children:[l.jsx("div",{className:"paragraph",children:N({en:"Examples:",zh:""})}),l.jsxs("div",{className:"paragraph",children:["12 ",l.jsx("br",{}),"1.5 ",l.jsx("br",{}),"10:04.2 ",l.jsx("br",{}),"-0:03"]})]})}),Z={display:"inline-block",flex:"auto"},J={outline:"none",border:"none",borderBottom:"1px solid "+_.text,borderRadius:0,background:"transparent",color:_.text},se=l.jsx(qe,{topic:"targetCount",content:N({en:l.jsxs(l.Fragment,{children:[l.jsx("span",{children:"The number of targets hit by the next ability. Damage fall-off is automatically computed. If the number of targets set is more than the number of enemies the ability can hit, then the additional targets are ignored."}),l.jsx("br",{}),l.jsx("br",{}),l.jsxs("span",{children:["An ",l.jsx("span",{style:{color:_.timeline.aggroMark},children:"orange"})," star indicates which enemy is the primary target, and a"," ",l.jsx("span",{style:{color:_.accent},children:"purple"}),' checkmark indicates which enemies are additionally hit by the attack. Modifying the "# of targets" field will automatically change these boxes, and vice versa.'," "]}),l.jsx("br",{}),l.jsx("br",{}),l.jsxs("span",{children:["Exactly one primary target must be selected at all times. Clicking an un-selected enemy turns it into the primary target. When multiple enemies are selected, clicking on the primary target will demote it to a secondary target, and clicking on a secondary target will de-target it."," "]}),l.jsx("br",{}),l.jsx("br",{}),l.jsx("span",{children:"Damage calculations with party buff markers for enemy debuffs like Dokumori and Chain Stratagem may be inaccurate when multiple targets are selected."})]}),zh:l.jsxs("div",{children:[l.jsx("span",{children:"2"}),l.jsx("br",{}),l.jsx("br",{}),l.jsxs("span",{children:[l.jsx("span",{style:{color:_.timeline.aggroMark},children:""}),"",l.jsx("span",{style:{color:_.accent},children:""}),""]}),l.jsx("br",{}),l.jsx("br",{}),l.jsx("span",{children:""}),l.jsx("br",{}),l.jsx("br",{}),l.jsx("span",{children:""})]})})});return l.jsx("div",{className:"skillsWindow",id:"skillsWindowAnchor",children:l.jsxs("div",{className:"skillIcons",children:[l.jsx("style",{children:`
				.info-tooltip {
					color: ${_.text};
					background-color: ${_.tipBackground};
					opacity: 0.98;
					max-width: 300px;
					outline: 1px solid ${_.bgHighContrast};
					transition: none;
					font-size: 100%;
					z-index: 10;
				}
			`}),L,l.jsxs("div",{style:{margin:"10px 0"},children:[N({en:"# of targets hit",zh:""})," ",se,":"," ",l.jsx("input",{type:"number",min:1,max:ja,style:{width:30,...J},value:m.filter(X=>X).length,onChange:P}),l.jsx(c0,{style:{width:"75%",marginBlock:"5px"},selected:m,primary:T,primaryOnly:!1,onSelectedChange:R,onPrimaryChange:S}),l.jsxs("div",{style:{display:"flex",flexDirection:"row",marginBottom:6},children:[N({en:l.jsxs("form",{onSubmit:D,style:Z,children:["Wait until"," ",l.jsx("input",{type:"text",style:{width:40,...J},value:n,onChange:I})," ","second(s) since"," ",l.jsxs("select",{style:{display:"inline-block",outline:"none"},value:s,onChange:k,children:[l.jsx("option",{value:"Now",children:"now"}),l.jsx("option",{value:"LastSkill",children:"last action"})]})," ",l.jsx("input",{type:"submit",value:"GO"})]}),zh:l.jsxs("form",{onSubmit:D,style:Z,children:[""," ",l.jsxs("select",{style:{display:"inline-block",outline:"none"},value:s,onChange:k,children:[l.jsx("option",{value:"Now",children:""}),l.jsx("option",{value:"LastSkill",children:""})]})," ",""," ",l.jsx("input",{type:"text",style:{width:30,...J},value:n,onChange:I})," "," ",l.jsx("input",{type:"submit",value:"GO"})]}),ja:l.jsxs("form",{onSubmit:D,style:Z,children:[l.jsxs("select",{style:{display:"inline-block",outline:"none",marginRight:"4px"},value:s,onChange:k,children:[l.jsx("option",{value:"Now",children:""}),l.jsx("option",{value:"LastSkill",children:""})]}),"",l.jsx("input",{type:"text",style:{width:30,...J},value:n,onChange:I}),"",l.jsx("input",{type:"submit",value:"GO"})]})}),N({en:l.jsxs("form",{onSubmit:x,style:Z,children:["Wait until ",j," ",l.jsx("input",{type:"text",style:{width:60,...J},value:d,onChange:O}),l.jsx("input",{type:"submit",value:"GO"})]}),zh:l.jsxs("form",{onSubmit:x,style:Z,children:[" ",j," ",l.jsx("input",{type:"text",style:{width:60,...J},value:d,onChange:O}),l.jsx("input",{type:"submit",value:"GO"})]}),ja:l.jsxs("form",{onSubmit:x,style:Z,children:[" ",j," ",l.jsx("input",{type:"text",style:{width:60,...J},value:d,onChange:O}),l.jsx("input",{type:"submit",value:"GO"})]})})]}),l.jsx("button",{onClick:G,children:N({en:"Wait until MP tick / lucid tick",zh:"/"})}),l.jsx("span",{children:" "}),l.jsx("button",{onClick:H,children:N({en:"Remove trailing idle time",zh:""})})]})]})})}let Yl=()=>{};function $P(e){const[t,n]=C.useState("(untitled)"),a=s=>n(s);return l.jsxs("form",{children:[l.jsx(Xt,{style:{display:"inline-block",marginTop:"10px"},defaultValue:t,description:N({en:"name: ",zh:""}),width:30,onChange:a}),l.jsx("span",{children:" "}),l.jsx("button",{type:"submit",disabled:!e.enabled,onClick:s=>{p.addSelectionToPreset(t),s.preventDefault()},children:N({en:"add selection to preset",zh:""})})]})}function QP(e){const t=e.line,n=[];let a=0;const s={margin:"0 1px",width:"18px",verticalAlign:"middle"};for(const d of t.actions)if(d.info.type===je.Skill){const f=d.info.skillName;n.push(l.jsx(eO,{style:s,skillName:f},a)),a++}const c=l.jsxs("span",{children:[t.name," (",n,")"]});return l.jsxs("div",{style:{marginBottom:"8px"},children:[l.jsx(Zs,{content:c,onClickFn:()=>{const d=p.record.selectionStartIndex;p.displayingUpToDateGameState?(p.tryAddLine(t,kn.SkillSequence),p.updateAllDisplay(),p.scrollToTime()):d!==void 0&&p.undoStack.doThenPush(new WS(t.actions,d,"preset"))}}),l.jsx("span",{children:" "}),l.jsx(Zs,{content:"[x]",onClickFn:()=>{p.deleteLine(t)}})]})}function JP(){const e=C.useContext(yn),[,t]=C.useReducer(c=>c+1,0);C.useEffect(()=>(Yl=()=>t(),()=>{Yl=()=>{}}),[]);const n=p.record.getFirstSelection()!==void 0,a=Xl(e,"bgMediumContrast"),s=l.jsxs("div",{children:[l.jsx("button",{style:{marginBottom:10},onClick:()=>{p.deleteAllLines()},children:N({en:"clear all presets",zh:""})}),l.jsx(Jf,{allowLoadFromUrl:!1,defaultLoadUrl:"https://miyehn.me/ffxiv-blm-rotation/presets/lines/default.txt",onLoadFn:c=>{c.fileType===pa.SkillSequencePresets?p.appendFilePresets(c):window.alert("incorrect file type '"+c.fileType+"'")}}),l.jsxs("div",{style:{outline:"1px solid "+a,margin:"10px 0",padding:"10px"},children:[p.getPresetLines().map((c,d)=>l.jsx(QP,{line:c},d)),l.jsx($P,{enabled:n}),l.jsx("div",{style:{marginTop:16},children:l.jsx(Kl,{fileFormat:Qo.Json,getContentFn:()=>p.serializedPresets(),filename:"presets",displayName:N({en:"download presets to file",zh:""})})})]})]});return l.jsx(Vl,{title:N({en:"Skill sequence presets",zh:""}),content:s,defaultShow:!1})}const Ya=4;var ht=(e=>(e.s_Cursor="s_Cursor",e.s_HistoricalCursor="s_HistoricalCursor",e.DamageMark="DamageMark",e.HealingMark="HealingMark",e.AggroMark="AggroMark",e.LucidMark="LucidMark",e.MPTickMark="MPTickMark",e.MeditateTickMark="MeditateTickMark",e.AutoTickMark="AutoTickMark",e.Skill="Skill",e.Marker="Marker",e.WarningMark="WarningMark",e.Buff="Buff",e))(ht||{});const Eo=-1;var ni=(e=>(e.Info="Info",e.Untargetable="Untargetable",e.Buff="Buff",e))(ni||{});function eG(e){return e.type==="s_Cursor"||e.type==="s_HistoricalCursor"}var Yt,ji,Vo,Qt,nO,Ef,mf,OT,ac,iO,bb;let tG=(bb=class{constructor(){Fe(this,Qt);re(this,"scale");re(this,"startTime");re(this,"elapsedTime");re(this,"sharedElements");re(this,"slots");re(this,"activeSlotIndex");Fe(this,Yt);Fe(this,ji);Fe(this,Vo);this.scale=.25,this.startTime=0,this.elapsedTime=0,this.sharedElements=[],this.slots=[],this.activeSlotIndex=-1,Le(this,Yt,[]),Le(this,ji,[]),Le(this,Vo,[]),Oe(this,Qt,iO).call(this)}setTimeSegment(t,n){this.startTime=t,this.elapsedTime=n}addElement(t){eG(t)?this.sharedElements.push(t):(console.assert(this.slots.length>0),this.slots[this.activeSlotIndex].elements.push(t))}invalidateLastElement(){if(this.slots.length>0){const t=this.slots[this.activeSlotIndex].elements;for(let n=t.length-1;n>=0;n--){const a=t[n];if(a.type==="Skill"){a.node.tmp_invalid_reasons=[gt.CastCanceled];return}}}}tryGetElement(t,n){return this.slots[this.activeSlotIndex].elements.find(a=>a.time===t&&a.type===n)}getAllMarkers(){return te(this,Yt)}getUntargetableMarkers(){return te(this,ji)}getBuffMarkers(){return te(this,Vo)}addMarker(t){te(this,Yt).push(t),t.markerType==="Untargetable"?te(this,ji).push(t):t.markerType==="Buff"&&te(this,Vo).push(t),this.drawElements(),Oe(this,Qt,ac).call(this)}deleteMarker(t){let n=!1;for(let a=0;a<te(this,Yt).length;a++)t===te(this,Yt)[a]&&(te(this,Yt).splice(a,1),this.drawElements(),Oe(this,Qt,ac).call(this),n=!0);return Oe(this,Qt,Ef).call(this),Oe(this,Qt,mf).call(this),n}sortAndRemoveDuplicateMarkers(){te(this,Yt).sort((n,a)=>n.time-a.time);let t=0;for(let n=te(this,Yt).length-1;n>0;n--)Oe(this,Qt,nO).call(this,te(this,Yt)[n],te(this,Yt)[n-1])&&(te(this,Yt).splice(n,1),t++);return Oe(this,Qt,Ef).call(this),Oe(this,Qt,mf).call(this),Oe(this,Qt,ac).call(this),t}loadCombinedTracksPreset(t,n,a){if(t.fileType!==pa.MarkerTracksCombined){window.alert("wrong file type '"+t.fileType+"'");return}t.tracks.forEach(s=>{this.loadIndividualTrackPreset(s,s.track,n,a)})}loadIndividualTrackPreset(t,n,a,s){if(t.fileType!==pa.MarkerTrackIndividual){window.alert("wrong file type '"+t.fileType+"'");return}Oe(this,Qt,OT).call(this,t,n,a,s)}deleteAllMarkers(){const t=te(this,ji).length>0;Le(this,Yt,[]),Le(this,ji,[]),Le(this,Vo,[]),this.drawElements(),t&&wn(),Oe(this,Qt,ac).call(this)}addSlotAtIndex(t){if(t<0||t>this.slots.length||this.slots.length+1>Ya){console.error("attempted to add slot at invalid index",t);return}for(let n=Ya-1;n>=t;n--){let a=pt(`gameRecord${n}`);a!==null&&Ct(`gameRecord${n+1}`,a),a=pt(`gameTimeInfo${n}`),a!==null&&Ct(`gameTimeInfo${n+1}`,a)}this.slots.splice(t,0,{job:"BLM",elements:[]}),this.activeSlotIndex=t,p.setConfigAndRestart(p.gameConfig)}addSlot(){this.addSlotAtIndex(this.slots.length)}removeSlot(t){console.assert(t<this.slots.length);for(let n=t;n<Ya;n++){let a=pt("gameRecord"+(n+1).toString());a!==null&&Ct("gameRecord"+n.toString(),a),a=pt("gameTimeInfo"+(n+1).toString()),a!==null&&Ct("gameTimeInfo"+n.toString(),a)}this.slots.splice(t,1);for(let n=this.slots.length;n<Ya;n++)dT("gameRecord"+n.toString()),dT("gameTimeInfo"+n.toString());this.activeSlotIndex>=t&&(this.activeSlotIndex=Math.max(0,this.activeSlotIndex-1)),this.loadSlot(this.activeSlotIndex),Ct("activeSlotIndex",this.activeSlotIndex.toString())}saveCurrentSlot(t,n,a){Ct("gameRecord"+this.activeSlotIndex.toString(),JSON.stringify(t)),Ct("gameTimeInfo"+this.activeSlotIndex.toString(),JSON.stringify({countdown:n,elapsedTime:a})),p.gameConfig.savePartialConfig()}loadSlot(t){const n=pt("gameRecord"+t.toString());if(n!==null){for(this.activeSlotIndex=t;this.slots.length<=t;)this.slots.push({job:"BLM",elements:[]});const a=JSON.parse(n);return p.loadBattleRecordFromFile(a),this.slots[t].job=p.game.job,!0}else return!1}reset(){this.startTime=0,this.elapsedTime=0,this.slots.length>0&&(this.slots[this.activeSlotIndex].elements=[]),this.sharedElements=[],this.addElement({type:"s_Cursor",time:0,displayTime:0}),this.addElement({type:"s_HistoricalCursor",time:0,displayTime:0,enabled:!1})}updateElem(t){console.assert(t&&t.type.substring(0,2)==="s_");for(let n=0;n<this.sharedElements.length;n++)if(this.sharedElements[n].type===t.type){this.sharedElements[n]=t;return}console.assert(!1)}setHorizontalScale(t){this.scale=t,this.drawElements()}getAllSlotsTimeInfo(){let t=0,n=0,a=!1;for(let s=0;s<Ya;s++){const c=pt("gameTimeInfo"+s.toString());if(c!==null){const d=JSON.parse(c);t=Math.max(t,d.countdown),n=Math.max(n,d.elapsedTime),a=!0}}return a?{countdown:t,rightMostTime:n}:null}getCanvasWidth(){let t=Math.max(0,this.elapsedTime),n=p.gameConfig.countdown;const a=this.getAllSlotsTimeInfo();return a!==null&&(n=Math.max(n,a.countdown),t=Math.max(t,a.rightMostTime)),te(this,Yt).forEach(c=>{const d=c.time+c.duration;t=Math.max(t,d+n)}),Math.ceil((t+Math.max(0,n)+4)/8)*8*100*this.scale}getCanvasHeight(){const t=this.getNumMarkerTracks();return De.timelineCanvasHeight(t,this.slots.length)}positionFromTime(t){return t*this.scale*100}timeFromPosition(t){return t/(this.scale*100)}drawElements(){nl(),this.updateTimelineMarkers()}getTrackIndices(){return Array.from(new Set(te(this,Yt).map(t=>t.track))).sort()}updateTimelineMarkers(){nl()}onClickTimelineAction(t,n){if(t<0||t>=p.record.length)return;p.record.onClickNode(t,n),Yl(),rd();const a=p.record.selectionStartIndex;a!==void 0?p.displayHistoricalState(-1/0,a):p.displayHistoricalState(-1/0,t)}resizeSelection(t){const n=p.record.selectionStartIndex,a=p.record.selectionEndIndex;if(n!==void 0&&a!==void 0){const s=(p.record.startIsPivot?a:n)+(t?-1:1);s>=0&&s<p.record.length&&this.onClickTimelineAction(s,!0)}}getNumMarkerTracks(){let t=-1,n=!1;for(let a=0;a<te(this,Yt).length;a++)t=Math.max(t,te(this,Yt)[a].track),te(this,Yt)[a].track===Eo&&(n=!0);return n?t+2:t+1}duringUntargetable(t){for(let n=0;n<te(this,ji).length;n++){const a=te(this,ji)[n],s=a.time,c=a.time+a.duration;if(t>=s&&t<c)return!0}return!1}getTargetableDurationBetween(t,n){const a=function([d,f],[h,m]){const R=[];return d<h&&R.push([d,Math.min(f,h)]),m<f&&R.push([Math.max(m,d),f]),R};let s=[[t,n]];for(let d=0;d<te(this,ji).length;d++){const f=te(this,ji)[d],h=f.time,m=f.time+f.duration;let R=[];s.forEach(T=>{R=R.concat(a(T,[h,m]))}),s=R}let c=0;return s.forEach(d=>{c+=d[1]-d[0]}),c}serializedSeparateMarkerTracks(){const t=this.getNumMarkerTracks()-1,n=new Map;for(let s=Eo;s<t+1;s++)n.set(s,[]);te(this,Yt).forEach(s=>{const c=n.get(s.track);console.assert(c),c&&(c.push({time:s.time,markerType:s.markerType,duration:s.duration,description:s.description,color:s.color,showText:s.showText}),n.set(s.track,c))});const a=[];return n.forEach((s,c)=>{s.length>0&&a.push({fileType:pa.MarkerTrackIndividual,track:c,markers:s})}),a}serializedCombinedMarkerTracks(){const t=this.serializedSeparateMarkerTracks();return{fileType:pa.MarkerTracksCombined,tracks:t}}},Yt=new WeakMap,ji=new WeakMap,Vo=new WeakMap,Qt=new WeakSet,nO=function(t,n){const a=function(s,c){return Math.abs(s-c)<_n.epsilon};return!(t.markerType!==n.markerType||!a(t.time,n.time)||!a(t.duration,n.duration)||t.color!==n.color||t.track!==n.track||t.showText!==n.showText||t.description!==n.description)},Ef=function(){Le(this,ji,[]),te(this,Yt).forEach(t=>{t.markerType==="Untargetable"&&te(this,ji).push(t)}),wn()},mf=function(){Le(this,Vo,[]),te(this,Yt).forEach(t=>{t.markerType==="Buff"&&(t.description==="Wanderer's Minuet"&&(t.description=U.WanderersMinuet),te(this,Vo).push(t))})},OT=function(t,n,a,s){let c=t.markers.map(d=>({time:d.time+a,duration:d.duration,color:d.color,description:d.description,track:d.markerType==="Untargetable"?Eo:n,type:"Marker",markerType:d.markerType??"Info",showText:d.showText??!1}));s!==void 0&&(c=c.filter(d=>s===void 0||d.time<=s+_n.epsilon)),Le(this,Yt,te(this,Yt).concat(c)),Oe(this,Qt,Ef).call(this),Oe(this,Qt,mf).call(this),Oe(this,Qt,ac).call(this)},ac=function(){const t=this.serializedSeparateMarkerTracks();Ct("timelineMarkers",JSON.stringify(t))},iO=function(){const t=pt("timelineMarkers");t!==null&&JSON.parse(t).forEach(a=>{Oe(this,Qt,OT).call(this,a,a.track,0)})},bb);function nG(e){return ya({attr:{viewBox:"0 0 32 32"},child:[{tag:"path",attr:{d:"M 5 5 L 5 27 L 27 27 L 27 5 Z M 7 7 L 25 7 L 25 25 L 7 25 Z M 9 20 L 9 22 L 23 22 L 23 20 Z"},child:[]}]})(e)}const HE=C.createContext(null);HE.displayName="PanelGroupContext";const rn={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},GS=10,Fs=C.useLayoutEffect,_C=TE.useId,iG=typeof _C=="function"?_C:()=>null;let aG=0;function BS(e=null){const t=iG(),n=C.useRef(e||t||null);return n.current===null&&(n.current=""+aG++),e??n.current}function aO({children:e,className:t="",collapsedSize:n,collapsible:a,defaultSize:s,forwardedRef:c,id:d,maxSize:f,minSize:h,onCollapse:m,onExpand:R,onResize:T,order:S,style:g,tagName:_="div",...I}){const D=C.useContext(HE);if(D===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:O,expandPanel:x,getPanelSize:k,getPanelStyle:H,groupId:G,isPanelCollapsed:P,reevaluatePanelConstraints:L,registerPanel:j,resizePanel:Z,unregisterPanel:J}=D,se=BS(d),X=C.useRef({callbacks:{onCollapse:m,onExpand:R,onResize:T},constraints:{collapsedSize:n,collapsible:a,defaultSize:s,maxSize:f,minSize:h},id:se,idIsFromProps:d!==void 0,order:S});C.useRef({didLogMissingDefaultSizeWarning:!1}),Fs(()=>{const{callbacks:W,constraints:ee}=X.current,M={...ee};X.current.id=se,X.current.idIsFromProps=d!==void 0,X.current.order=S,W.onCollapse=m,W.onExpand=R,W.onResize=T,ee.collapsedSize=n,ee.collapsible=a,ee.defaultSize=s,ee.maxSize=f,ee.minSize=h,(M.collapsedSize!==ee.collapsedSize||M.collapsible!==ee.collapsible||M.maxSize!==ee.maxSize||M.minSize!==ee.minSize)&&L(X.current,M)}),Fs(()=>{const W=X.current;return j(W),()=>{J(W)}},[S,se,j,J]),C.useImperativeHandle(c,()=>({collapse:()=>{O(X.current)},expand:W=>{x(X.current,W)},getId(){return se},getSize(){return k(X.current)},isCollapsed(){return P(X.current)},isExpanded(){return!P(X.current)},resize:W=>{Z(X.current,W)}}),[O,x,k,P,se,Z]);const Ae=H(X.current,s);return C.createElement(_,{...I,children:e,className:t,id:se,style:{...Ae,...g},[rn.groupId]:G,[rn.panel]:"",[rn.panelCollapsible]:a||void 0,[rn.panelId]:se,[rn.panelSize]:parseFloat(""+Ae.flexGrow).toFixed(1)})}const oO=C.forwardRef((e,t)=>C.createElement(aO,{...e,forwardedRef:t}));aO.displayName="Panel";oO.displayName="forwardRef(Panel)";let DT=null,Af=-1,Hl=null;function oG(e,t){if(t){const n=(t&uO)!==0,a=(t&dO)!==0,s=(t&hO)!==0,c=(t&fO)!==0;if(n)return s?"se-resize":c?"ne-resize":"e-resize";if(a)return s?"sw-resize":c?"nw-resize":"w-resize";if(s)return"s-resize";if(c)return"n-resize"}switch(e){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function lG(){Hl!==null&&(document.head.removeChild(Hl),DT=null,Hl=null,Af=-1)}function YR(e,t){var n,a;const s=oG(e,t);if(DT!==s){if(DT=s,Hl===null&&(Hl=document.createElement("style"),document.head.appendChild(Hl)),Af>=0){var c;(c=Hl.sheet)===null||c===void 0||c.removeRule(Af)}Af=(n=(a=Hl.sheet)===null||a===void 0?void 0:a.insertRule(`*{cursor: ${s} !important;}`))!==null&&n!==void 0?n:-1}}function lO(e){return e.type==="keydown"}function sO(e){return e.type.startsWith("pointer")}function rO(e){return e.type.startsWith("mouse")}function kE(e){if(sO(e)){if(e.isPrimary)return{x:e.clientX,y:e.clientY}}else if(rO(e))return{x:e.clientX,y:e.clientY};return{x:1/0,y:1/0}}function sG(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function rG(e,t,n){return e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y}function cG(e,t){if(e===t)throw new Error("Cannot compare node with itself");const n={a:CC(e),b:CC(t)};let a;for(;n.a.at(-1)===n.b.at(-1);)e=n.a.pop(),t=n.b.pop(),a=e;nt(a,"Stacking order can only be calculated for elements with a common ancestor");const s={a:NC(pC(n.a)),b:NC(pC(n.b))};if(s.a===s.b){const c=a.childNodes,d={a:n.a.at(-1),b:n.b.at(-1)};let f=c.length;for(;f--;){const h=c[f];if(h===d.a)return 1;if(h===d.b)return-1}}return Math.sign(s.a-s.b)}const uG=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function dG(e){var t;const n=getComputedStyle((t=cO(e))!==null&&t!==void 0?t:e).display;return n==="flex"||n==="inline-flex"}function hG(e){const t=getComputedStyle(e);return!!(t.position==="fixed"||t.zIndex!=="auto"&&(t.position!=="static"||dG(e))||+t.opacity<1||"transform"in t&&t.transform!=="none"||"webkitTransform"in t&&t.webkitTransform!=="none"||"mixBlendMode"in t&&t.mixBlendMode!=="normal"||"filter"in t&&t.filter!=="none"||"webkitFilter"in t&&t.webkitFilter!=="none"||"isolation"in t&&t.isolation==="isolate"||uG.test(t.willChange)||t.webkitOverflowScrolling==="touch")}function pC(e){let t=e.length;for(;t--;){const n=e[t];if(nt(n,"Missing node"),hG(n))return n}return null}function NC(e){return e&&Number(getComputedStyle(e).zIndex)||0}function CC(e){const t=[];for(;e;)t.push(e),e=cO(e);return t}function cO(e){const{parentNode:t}=e;return t&&t instanceof ShadowRoot?t.host:t}const uO=1,dO=2,hO=4,fO=8,fG=sG()==="coarse";let Ka=[],fc=!1,Ds=new Map,UE=new Map;const ld=new Set;function EG(e,t,n,a,s){var c;const{ownerDocument:d}=t,f={direction:n,element:t,hitAreaMargins:a,setResizeHandlerState:s},h=(c=Ds.get(d))!==null&&c!==void 0?c:0;return Ds.set(d,h+1),ld.add(f),$f(),function(){var R;UE.delete(e),ld.delete(f);const T=(R=Ds.get(d))!==null&&R!==void 0?R:1;if(Ds.set(d,T-1),$f(),T===1&&Ds.delete(d),Ka.includes(f)){const S=Ka.indexOf(f);S>=0&&Ka.splice(S,1),jS(),s("up",!0,null)}}}function mG(e){const{target:t}=e,{x:n,y:a}=kE(e);fc=!0,FS({target:t,x:n,y:a}),$f(),Ka.length>0&&(Qf("down",e),e.preventDefault(),EO(t)||e.stopImmediatePropagation())}function KR(e){const{x:t,y:n}=kE(e);if(fc&&e.buttons===0&&(fc=!1,Qf("up",e)),!fc){const{target:a}=e;FS({target:a,x:t,y:n})}Qf("move",e),jS(),Ka.length>0&&e.preventDefault()}function VR(e){const{target:t}=e,{x:n,y:a}=kE(e);UE.clear(),fc=!1,Ka.length>0&&(e.preventDefault(),EO(t)||e.stopImmediatePropagation()),Qf("up",e),FS({target:t,x:n,y:a}),jS(),$f()}function EO(e){let t=e;for(;t;){if(t.hasAttribute(rn.resizeHandle))return!0;t=t.parentElement}return!1}function FS({target:e,x:t,y:n}){Ka.splice(0);let a=null;(e instanceof HTMLElement||e instanceof SVGElement)&&(a=e),ld.forEach(s=>{const{element:c,hitAreaMargins:d}=s,f=c.getBoundingClientRect(),{bottom:h,left:m,right:R,top:T}=f,S=fG?d.coarse:d.fine;if(t>=m-S&&t<=R+S&&n>=T-S&&n<=h+S){if(a!==null&&document.contains(a)&&c!==a&&!c.contains(a)&&!a.contains(c)&&cG(a,c)>0){let _=a,I=!1;for(;_&&!_.contains(c);){if(rG(_.getBoundingClientRect(),f)){I=!0;break}_=_.parentElement}if(I)return}Ka.push(s)}})}function WR(e,t){UE.set(e,t)}function jS(){let e=!1,t=!1;Ka.forEach(a=>{const{direction:s}=a;s==="horizontal"?e=!0:t=!0});let n=0;UE.forEach(a=>{n|=a}),e&&t?YR("intersection",n):e?YR("horizontal",n):t?YR("vertical",n):lG()}let XR=new AbortController;function $f(){XR.abort(),XR=new AbortController;const e={capture:!0,signal:XR.signal};ld.size&&(fc?(Ka.length>0&&Ds.forEach((t,n)=>{const{body:a}=n;t>0&&(a.addEventListener("contextmenu",VR,e),a.addEventListener("pointerleave",KR,e),a.addEventListener("pointermove",KR,e))}),window.addEventListener("pointerup",VR,e),window.addEventListener("pointercancel",VR,e)):Ds.forEach((t,n)=>{const{body:a}=n;t>0&&(a.addEventListener("pointerdown",mG,e),a.addEventListener("pointermove",KR,e))}))}function Qf(e,t){ld.forEach(n=>{const{setResizeHandlerState:a}=n,s=Ka.includes(n);a(e,s,t)})}function AG(){const[e,t]=C.useState(0);return C.useCallback(()=>t(n=>n+1),[])}function nt(e,t){if(!e)throw console.error(t),Error(t)}function qs(e,t,n=GS){return e.toFixed(n)===t.toFixed(n)?0:e>t?1:-1}function Xo(e,t,n=GS){return qs(e,t,n)===0}function ta(e,t,n){return qs(e,t,n)===0}function RG(e,t,n){if(e.length!==t.length)return!1;for(let a=0;a<e.length;a++){const s=e[a],c=t[a];if(!ta(s,c,n))return!1}return!0}function lc({panelConstraints:e,panelIndex:t,size:n}){const a=e[t];nt(a!=null,`Panel constraints not found for index ${t}`);let{collapsedSize:s=0,collapsible:c,maxSize:d=100,minSize:f=0}=a;if(qs(n,f)<0)if(c){const h=(s+f)/2;qs(n,h)<0?n=s:n=f}else n=f;return n=Math.min(d,n),n=parseFloat(n.toFixed(GS)),n}function Vu({delta:e,initialLayout:t,panelConstraints:n,pivotIndices:a,prevLayout:s,trigger:c}){if(ta(e,0))return t;const d=[...t],[f,h]=a;nt(f!=null,"Invalid first pivot index"),nt(h!=null,"Invalid second pivot index");let m=0;if(c==="keyboard"){{const T=e<0?h:f,S=n[T];nt(S,`Panel constraints not found for index ${T}`);const{collapsedSize:g=0,collapsible:_,minSize:I=0}=S;if(_){const D=t[T];if(nt(D!=null,`Previous layout not found for panel index ${T}`),ta(D,g)){const O=I-D;qs(O,Math.abs(e))>0&&(e=e<0?0-O:O)}}}{const T=e<0?f:h,S=n[T];nt(S,`No panel constraints found for index ${T}`);const{collapsedSize:g=0,collapsible:_,minSize:I=0}=S;if(_){const D=t[T];if(nt(D!=null,`Previous layout not found for panel index ${T}`),ta(D,I)){const O=D-g;qs(O,Math.abs(e))>0&&(e=e<0?0-O:O)}}}}{const T=e<0?1:-1;let S=e<0?h:f,g=0;for(;;){const I=t[S];nt(I!=null,`Previous layout not found for panel index ${S}`);const O=lc({panelConstraints:n,panelIndex:S,size:100})-I;if(g+=O,S+=T,S<0||S>=n.length)break}const _=Math.min(Math.abs(e),Math.abs(g));e=e<0?0-_:_}{let S=e<0?f:h;for(;S>=0&&S<n.length;){const g=Math.abs(e)-Math.abs(m),_=t[S];nt(_!=null,`Previous layout not found for panel index ${S}`);const I=_-g,D=lc({panelConstraints:n,panelIndex:S,size:I});if(!ta(_,D)&&(m+=_-D,d[S]=D,m.toPrecision(3).localeCompare(Math.abs(e).toPrecision(3),void 0,{numeric:!0})>=0))break;e<0?S--:S++}}if(RG(s,d))return s;{const T=e<0?h:f,S=t[T];nt(S!=null,`Previous layout not found for panel index ${T}`);const g=S+m,_=lc({panelConstraints:n,panelIndex:T,size:g});if(d[T]=_,!ta(_,g)){let I=g-_,O=e<0?h:f;for(;O>=0&&O<n.length;){const x=d[O];nt(x!=null,`Previous layout not found for panel index ${O}`);const k=x+I,H=lc({panelConstraints:n,panelIndex:O,size:k});if(ta(x,H)||(I-=H-x,d[O]=H),ta(I,0))break;e>0?O--:O++}}}const R=d.reduce((T,S)=>S+T,0);return ta(R,100)?d:s}function TG({layout:e,panelsArray:t,pivotIndices:n}){let a=0,s=100,c=0,d=0;const f=n[0];nt(f!=null,"No pivot index found"),t.forEach((T,S)=>{const{constraints:g}=T,{maxSize:_=100,minSize:I=0}=g;S===f?(a=I,s=_):(c+=I,d+=_)});const h=Math.min(s,100-c),m=Math.max(a,100-d),R=e[f];return{valueMax:h,valueMin:m,valueNow:R}}function sd(e,t=document){return Array.from(t.querySelectorAll(`[${rn.resizeHandleId}][data-panel-group-id="${e}"]`))}function mO(e,t,n=document){const s=sd(e,n).findIndex(c=>c.getAttribute(rn.resizeHandleId)===t);return s??null}function AO(e,t,n){const a=mO(e,t,n);return a!=null?[a,a+1]:[-1,-1]}function RO(e,t=document){var n;if(t instanceof HTMLElement&&(t==null||(n=t.dataset)===null||n===void 0?void 0:n.panelGroupId)==e)return t;const a=t.querySelector(`[data-panel-group][data-panel-group-id="${e}"]`);return a||null}function wE(e,t=document){const n=t.querySelector(`[${rn.resizeHandleId}="${e}"]`);return n||null}function SG(e,t,n,a=document){var s,c,d,f;const h=wE(t,a),m=sd(e,a),R=h?m.indexOf(h):-1,T=(s=(c=n[R])===null||c===void 0?void 0:c.id)!==null&&s!==void 0?s:null,S=(d=(f=n[R+1])===null||f===void 0?void 0:f.id)!==null&&d!==void 0?d:null;return[T,S]}function gG({committedValuesRef:e,eagerValuesRef:t,groupId:n,layout:a,panelDataArray:s,panelGroupElement:c,setLayout:d}){C.useRef({didWarnAboutMissingResizeHandle:!1}),Fs(()=>{if(!c)return;const f=sd(n,c);for(let h=0;h<s.length-1;h++){const{valueMax:m,valueMin:R,valueNow:T}=TG({layout:a,panelsArray:s,pivotIndices:[h,h+1]}),S=f[h];if(S!=null){const g=s[h];nt(g,`No panel data found for index "${h}"`),S.setAttribute("aria-controls",g.id),S.setAttribute("aria-valuemax",""+Math.round(m)),S.setAttribute("aria-valuemin",""+Math.round(R)),S.setAttribute("aria-valuenow",T!=null?""+Math.round(T):"")}}return()=>{f.forEach((h,m)=>{h.removeAttribute("aria-controls"),h.removeAttribute("aria-valuemax"),h.removeAttribute("aria-valuemin"),h.removeAttribute("aria-valuenow")})}},[n,a,s,c]),C.useEffect(()=>{if(!c)return;const f=t.current;nt(f,"Eager values not found");const{panelDataArray:h}=f,m=RO(n,c);nt(m!=null,`No group found for id "${n}"`);const R=sd(n,c);nt(R,`No resize handles found for group id "${n}"`);const T=R.map(S=>{const g=S.getAttribute(rn.resizeHandleId);nt(g,"Resize handle element has no handle id attribute");const[_,I]=SG(n,g,h,c);if(_==null||I==null)return()=>{};const D=O=>{if(!O.defaultPrevented)switch(O.key){case"Enter":{O.preventDefault();const x=h.findIndex(k=>k.id===_);if(x>=0){const k=h[x];nt(k,`No panel data found for index ${x}`);const H=a[x],{collapsedSize:G=0,collapsible:P,minSize:L=0}=k.constraints;if(H!=null&&P){const j=Vu({delta:ta(H,G)?L-G:G-H,initialLayout:a,panelConstraints:h.map(Z=>Z.constraints),pivotIndices:AO(n,g,c),prevLayout:a,trigger:"keyboard"});a!==j&&d(j)}}break}}};return S.addEventListener("keydown",D),()=>{S.removeEventListener("keydown",D)}});return()=>{T.forEach(S=>S())}},[c,e,t,n,a,s,d])}function bC(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function TO(e,t){const n=e==="horizontal",{x:a,y:s}=kE(t);return n?a:s}function IG(e,t,n,a,s){const c=n==="horizontal",d=wE(t,s);nt(d,`No resize handle element found for id "${t}"`);const f=d.getAttribute(rn.groupId);nt(f,"Resize handle element has no group id attribute");let{initialCursorPosition:h}=a;const m=TO(n,e),R=RO(f,s);nt(R,`No group element found for id "${f}"`);const T=R.getBoundingClientRect(),S=c?T.width:T.height;return(m-h)/S*100}function _G(e,t,n,a,s,c){if(lO(e)){const d=n==="horizontal";let f=0;e.shiftKey?f=100:s!=null?f=s:f=10;let h=0;switch(e.key){case"ArrowDown":h=d?0:f;break;case"ArrowLeft":h=d?-f:0;break;case"ArrowRight":h=d?f:0;break;case"ArrowUp":h=d?0:-f;break;case"End":h=100;break;case"Home":h=-100;break}return h}else return a==null?0:IG(e,t,n,a,c)}function pG({panelDataArray:e}){const t=Array(e.length),n=e.map(c=>c.constraints);let a=0,s=100;for(let c=0;c<e.length;c++){const d=n[c];nt(d,`Panel constraints not found for index ${c}`);const{defaultSize:f}=d;f!=null&&(a++,t[c]=f,s-=f)}for(let c=0;c<e.length;c++){const d=n[c];nt(d,`Panel constraints not found for index ${c}`);const{defaultSize:f}=d;if(f!=null)continue;const h=e.length-a,m=s/h;a++,t[c]=m,s-=m}return t}function ec(e,t,n){t.forEach((a,s)=>{const c=e[s];nt(c,`Panel data not found for index ${s}`);const{callbacks:d,constraints:f,id:h}=c,{collapsedSize:m=0,collapsible:R}=f,T=n[h];if(T==null||a!==T){n[h]=a;const{onCollapse:S,onExpand:g,onResize:_}=d;_&&_(a,T),R&&(S||g)&&(g&&(T==null||Xo(T,m))&&!Xo(a,m)&&g(),S&&(T==null||!Xo(T,m))&&Xo(a,m)&&S())}})}function af(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function NG({defaultSize:e,dragState:t,layout:n,panelData:a,panelIndex:s,precision:c=3}){const d=n[s];let f;return d==null?f=e!=null?e.toPrecision(c):"1":a.length===1?f="1":f=d.toPrecision(c),{flexBasis:0,flexGrow:f,flexShrink:1,overflow:"hidden",pointerEvents:t!==null?"none":void 0}}function CG(e,t=10){let n=null;return(...s)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{e(...s)},t)}}function OC(e){try{if(typeof localStorage<"u")e.getItem=t=>localStorage.getItem(t),e.setItem=(t,n)=>{localStorage.setItem(t,n)};else throw new Error("localStorage not supported in this environment")}catch(t){console.error(t),e.getItem=()=>null,e.setItem=()=>{}}}function SO(e){return`react-resizable-panels:${e}`}function gO(e){return e.map(t=>{const{constraints:n,id:a,idIsFromProps:s,order:c}=t;return s?a:c?`${c}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((t,n)=>t.localeCompare(n)).join(",")}function IO(e,t){try{const n=SO(e),a=t.getItem(n);if(a){const s=JSON.parse(a);if(typeof s=="object"&&s!=null)return s}}catch{}return null}function bG(e,t,n){var a,s;const c=(a=IO(e,n))!==null&&a!==void 0?a:{},d=gO(t);return(s=c[d])!==null&&s!==void 0?s:null}function OG(e,t,n,a,s){var c;const d=SO(e),f=gO(t),h=(c=IO(e,s))!==null&&c!==void 0?c:{};h[f]={expandToSizes:Object.fromEntries(n.entries()),layout:a};try{s.setItem(d,JSON.stringify(h))}catch(m){console.error(m)}}function DC({layout:e,panelConstraints:t}){const n=[...e],a=n.reduce((c,d)=>c+d,0);if(n.length!==t.length)throw Error(`Invalid ${t.length} panel layout: ${n.map(c=>`${c}%`).join(", ")}`);if(!ta(a,100)&&n.length>0)for(let c=0;c<t.length;c++){const d=n[c];nt(d!=null,`No layout data found for index ${c}`);const f=100/a*d;n[c]=f}let s=0;for(let c=0;c<t.length;c++){const d=n[c];nt(d!=null,`No layout data found for index ${c}`);const f=lc({panelConstraints:t,panelIndex:c,size:d});d!=f&&(s+=d-f,n[c]=f)}if(!ta(s,0))for(let c=0;c<t.length;c++){const d=n[c];nt(d!=null,`No layout data found for index ${c}`);const f=d+s,h=lc({panelConstraints:t,panelIndex:c,size:f});if(d!==h&&(s-=h-d,n[c]=h,ta(s,0)))break}return n}const DG=100,Wu={getItem:e=>(OC(Wu),Wu.getItem(e)),setItem:(e,t)=>{OC(Wu),Wu.setItem(e,t)}},yC={};function _O({autoSaveId:e=null,children:t,className:n="",direction:a,forwardedRef:s,id:c=null,onLayout:d=null,keyboardResizeBy:f=null,storage:h=Wu,style:m,tagName:R="div",...T}){const S=BS(c),g=C.useRef(null),[_,I]=C.useState(null),[D,O]=C.useState([]),x=AG(),k=C.useRef({}),H=C.useRef(new Map),G=C.useRef(0),P=C.useRef({autoSaveId:e,direction:a,dragState:_,id:S,keyboardResizeBy:f,onLayout:d,storage:h}),L=C.useRef({layout:D,panelDataArray:[],panelDataArrayChanged:!1});C.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),C.useImperativeHandle(s,()=>({getId:()=>P.current.id,getLayout:()=>{const{layout:F}=L.current;return F},setLayout:F=>{const{onLayout:ae}=P.current,{layout:K,panelDataArray:Q}=L.current,he=DC({layout:F,panelConstraints:Q.map(me=>me.constraints)});bC(K,he)||(O(he),L.current.layout=he,ae&&ae(he),ec(Q,he,k.current))}}),[]),Fs(()=>{P.current.autoSaveId=e,P.current.direction=a,P.current.dragState=_,P.current.id=S,P.current.onLayout=d,P.current.storage=h}),gG({committedValuesRef:P,eagerValuesRef:L,groupId:S,layout:D,panelDataArray:L.current.panelDataArray,setLayout:O,panelGroupElement:g.current}),C.useEffect(()=>{const{panelDataArray:F}=L.current;if(e){if(D.length===0||D.length!==F.length)return;let ae=yC[e];ae==null&&(ae=CG(OG,DG),yC[e]=ae);const K=[...F],Q=new Map(H.current);ae(e,K,Q,D,h)}},[e,D,h]),C.useEffect(()=>{});const j=C.useCallback(F=>{const{onLayout:ae}=P.current,{layout:K,panelDataArray:Q}=L.current;if(F.constraints.collapsible){const he=Q.map(pe=>pe.constraints),{collapsedSize:me=0,panelSize:Ie,pivotIndices:Me}=Ns(Q,F,K);if(nt(Ie!=null,`Panel size not found for panel "${F.id}"`),!Xo(Ie,me)){H.current.set(F.id,Ie);const ge=oc(Q,F)===Q.length-1?Ie-me:me-Ie,oe=Vu({delta:ge,initialLayout:K,panelConstraints:he,pivotIndices:Me,prevLayout:K,trigger:"imperative-api"});af(K,oe)||(O(oe),L.current.layout=oe,ae&&ae(oe),ec(Q,oe,k.current))}}},[]),Z=C.useCallback((F,ae)=>{const{onLayout:K}=P.current,{layout:Q,panelDataArray:he}=L.current;if(F.constraints.collapsible){const me=he.map(Ce=>Ce.constraints),{collapsedSize:Ie=0,panelSize:Me=0,minSize:pe=0,pivotIndices:ge}=Ns(he,F,Q),oe=ae??pe;if(Xo(Me,Ie)){const Ce=H.current.get(F.id),Te=Ce!=null&&Ce>=oe?Ce:oe,ye=oc(he,F)===he.length-1?Me-Te:Te-Me,Ue=Vu({delta:ye,initialLayout:Q,panelConstraints:me,pivotIndices:ge,prevLayout:Q,trigger:"imperative-api"});af(Q,Ue)||(O(Ue),L.current.layout=Ue,K&&K(Ue),ec(he,Ue,k.current))}}},[]),J=C.useCallback(F=>{const{layout:ae,panelDataArray:K}=L.current,{panelSize:Q}=Ns(K,F,ae);return nt(Q!=null,`Panel size not found for panel "${F.id}"`),Q},[]),se=C.useCallback((F,ae)=>{const{panelDataArray:K}=L.current,Q=oc(K,F);return NG({defaultSize:ae,dragState:_,layout:D,panelData:K,panelIndex:Q})},[_,D]),X=C.useCallback(F=>{const{layout:ae,panelDataArray:K}=L.current,{collapsedSize:Q=0,collapsible:he,panelSize:me}=Ns(K,F,ae);return nt(me!=null,`Panel size not found for panel "${F.id}"`),he===!0&&Xo(me,Q)},[]),Ae=C.useCallback(F=>{const{layout:ae,panelDataArray:K}=L.current,{collapsedSize:Q=0,collapsible:he,panelSize:me}=Ns(K,F,ae);return nt(me!=null,`Panel size not found for panel "${F.id}"`),!he||qs(me,Q)>0},[]),W=C.useCallback(F=>{const{panelDataArray:ae}=L.current;ae.push(F),ae.sort((K,Q)=>{const he=K.order,me=Q.order;return he==null&&me==null?0:he==null?-1:me==null?1:he-me}),L.current.panelDataArrayChanged=!0,x()},[x]);Fs(()=>{if(L.current.panelDataArrayChanged){L.current.panelDataArrayChanged=!1;const{autoSaveId:F,onLayout:ae,storage:K}=P.current,{layout:Q,panelDataArray:he}=L.current;let me=null;if(F){const Me=bG(F,he,K);Me&&(H.current=new Map(Object.entries(Me.expandToSizes)),me=Me.layout)}me==null&&(me=pG({panelDataArray:he}));const Ie=DC({layout:me,panelConstraints:he.map(Me=>Me.constraints)});bC(Q,Ie)||(O(Ie),L.current.layout=Ie,ae&&ae(Ie),ec(he,Ie,k.current))}}),Fs(()=>{const F=L.current;return()=>{F.layout=[]}},[]);const ee=C.useCallback(F=>{let ae=!1;const K=g.current;return K&&window.getComputedStyle(K,null).getPropertyValue("direction")==="rtl"&&(ae=!0),function(he){he.preventDefault();const me=g.current;if(!me)return()=>null;const{direction:Ie,dragState:Me,id:pe,keyboardResizeBy:ge,onLayout:oe}=P.current,{layout:Ce,panelDataArray:Te}=L.current,{initialLayout:be}=Me??{},ye=AO(pe,F,me);let Ue=_G(he,F,Ie,Me,ge,me);const $e=Ie==="horizontal";$e&&ae&&(Ue=-Ue);const Rt=Te.map(hr=>hr.constraints),zt=Vu({delta:Ue,initialLayout:be??Ce,panelConstraints:Rt,pivotIndices:ye,prevLayout:Ce,trigger:lO(he)?"keyboard":"mouse-or-touch"}),os=!af(Ce,zt);(sO(he)||rO(he))&&G.current!=Ue&&(G.current=Ue,!os&&Ue!==0?$e?WR(F,Ue<0?uO:dO):WR(F,Ue<0?hO:fO):WR(F,0)),os&&(O(zt),L.current.layout=zt,oe&&oe(zt),ec(Te,zt,k.current))}},[]),M=C.useCallback((F,ae)=>{const{onLayout:K}=P.current,{layout:Q,panelDataArray:he}=L.current,me=he.map(Ce=>Ce.constraints),{panelSize:Ie,pivotIndices:Me}=Ns(he,F,Q);nt(Ie!=null,`Panel size not found for panel "${F.id}"`);const ge=oc(he,F)===he.length-1?Ie-ae:ae-Ie,oe=Vu({delta:ge,initialLayout:Q,panelConstraints:me,pivotIndices:Me,prevLayout:Q,trigger:"imperative-api"});af(Q,oe)||(O(oe),L.current.layout=oe,K&&K(oe),ec(he,oe,k.current))},[]),Y=C.useCallback((F,ae)=>{const{layout:K,panelDataArray:Q}=L.current,{collapsedSize:he=0,collapsible:me}=ae,{collapsedSize:Ie=0,collapsible:Me,maxSize:pe=100,minSize:ge=0}=F.constraints,{panelSize:oe}=Ns(Q,F,K);oe!=null&&(me&&Me&&Xo(oe,he)?Xo(he,Ie)||M(F,Ie):oe<ge?M(F,ge):oe>pe&&M(F,pe))},[M]),ie=C.useCallback((F,ae)=>{const{direction:K}=P.current,{layout:Q}=L.current;if(!g.current)return;const he=wE(F,g.current);nt(he,`Drag handle element not found for id "${F}"`);const me=TO(K,ae);I({dragHandleId:F,dragHandleRect:he.getBoundingClientRect(),initialCursorPosition:me,initialLayout:Q})},[]),le=C.useCallback(()=>{I(null)},[]),v=C.useCallback(F=>{const{panelDataArray:ae}=L.current,K=oc(ae,F);K>=0&&(ae.splice(K,1),delete k.current[F.id],L.current.panelDataArrayChanged=!0,x())},[x]),z=C.useMemo(()=>({collapsePanel:j,direction:a,dragState:_,expandPanel:Z,getPanelSize:J,getPanelStyle:se,groupId:S,isPanelCollapsed:X,isPanelExpanded:Ae,reevaluatePanelConstraints:Y,registerPanel:W,registerResizeHandle:ee,resizePanel:M,startDragging:ie,stopDragging:le,unregisterPanel:v,panelGroupElement:g.current}),[j,_,a,Z,J,se,S,X,Ae,Y,W,ee,M,ie,le,v]),q={display:"flex",flexDirection:a==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return C.createElement(HE.Provider,{value:z},C.createElement(R,{...T,children:t,className:n,id:c,ref:g,style:{...q,...m},[rn.group]:"",[rn.groupDirection]:a,[rn.groupId]:S}))}const pO=C.forwardRef((e,t)=>C.createElement(_O,{...e,forwardedRef:t}));_O.displayName="PanelGroup";pO.displayName="forwardRef(PanelGroup)";function oc(e,t){return e.findIndex(n=>n===t||n.id===t.id)}function Ns(e,t,n){const a=oc(e,t),c=a===e.length-1?[a-1,a]:[a,a+1],d=n[a];return{...t.constraints,panelSize:d,pivotIndices:c}}function yG({disabled:e,handleId:t,resizeHandler:n,panelGroupElement:a}){C.useEffect(()=>{if(e||n==null||a==null)return;const s=wE(t,a);if(s==null)return;const c=d=>{if(!d.defaultPrevented)switch(d.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{d.preventDefault(),n(d);break}case"F6":{d.preventDefault();const f=s.getAttribute(rn.groupId);nt(f,`No group element found for id "${f}"`);const h=sd(f,a),m=mO(f,t,a);nt(m!==null,`No resize element found for id "${t}"`);const R=d.shiftKey?m>0?m-1:h.length-1:m+1<h.length?m+1:0;h[R].focus();break}}};return s.addEventListener("keydown",c),()=>{s.removeEventListener("keydown",c)}},[a,e,t,n])}function NO({children:e=null,className:t="",disabled:n=!1,hitAreaMargins:a,id:s,onBlur:c,onClick:d,onDragging:f,onFocus:h,onPointerDown:m,onPointerUp:R,style:T={},tabIndex:S=0,tagName:g="div",..._}){var I,D;const O=C.useRef(null),x=C.useRef({onClick:d,onDragging:f,onPointerDown:m,onPointerUp:R});C.useEffect(()=>{x.current.onClick=d,x.current.onDragging=f,x.current.onPointerDown=m,x.current.onPointerUp=R});const k=C.useContext(HE);if(k===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:H,groupId:G,registerResizeHandle:P,startDragging:L,stopDragging:j,panelGroupElement:Z}=k,J=BS(s),[se,X]=C.useState("inactive"),[Ae,W]=C.useState(!1),[ee,M]=C.useState(null),Y=C.useRef({state:se});Fs(()=>{Y.current.state=se}),C.useEffect(()=>{if(n)M(null);else{const z=P(J);M(()=>z)}},[n,J,P]);const ie=(I=a==null?void 0:a.coarse)!==null&&I!==void 0?I:15,le=(D=a==null?void 0:a.fine)!==null&&D!==void 0?D:5;C.useEffect(()=>{if(n||ee==null)return;const z=O.current;nt(z,"Element ref not attached");let q=!1;return EG(J,z,H,{coarse:ie,fine:le},(ae,K,Q)=>{if(!K){X("inactive");return}switch(ae){case"down":{X("drag"),q=!1,nt(Q,'Expected event to be defined for "down" action'),L(J,Q);const{onDragging:he,onPointerDown:me}=x.current;he==null||he(!0),me==null||me();break}case"move":{const{state:he}=Y.current;q=!0,he!=="drag"&&X("hover"),nt(Q,'Expected event to be defined for "move" action'),ee(Q);break}case"up":{X("hover"),j();const{onClick:he,onDragging:me,onPointerUp:Ie}=x.current;me==null||me(!1),Ie==null||Ie(),q||he==null||he();break}}})},[ie,H,n,le,P,J,ee,L,j]),yG({disabled:n,handleId:J,resizeHandler:ee,panelGroupElement:Z});const v={touchAction:"none",userSelect:"none"};return C.createElement(g,{..._,children:e,className:t,id:s,onBlur:()=>{W(!1),c==null||c()},onFocus:()=>{W(!0),h==null||h()},ref:O,role:"separator",style:{...v,...T},tabIndex:S,[rn.groupDirection]:H,[rn.groupId]:G,[rn.resizeHandle]:"",[rn.resizeHandleActive]:se==="drag"?"pointer":Ae?"keyboard":void 0,[rn.resizeHandleEnabled]:!n,[rn.resizeHandleId]:J,[rn.resizeHandleState]:se})}NO.displayName="PanelResizeHandle";const CO=navigator.userAgent.indexOf("Firefox")>=0,Ca="XIVShell Defaults, , sans-serif",vG=3,De={rulerHeight:30,trackHeight:14,slotPaddingTop:4,damageMarkerHeight:8,skillButtonHeight:28,buffCoverHeight:4,slotPaddingBottom:4,renderSlotHeight:()=>De.slotPaddingTop+De.damageMarkerHeight+De.skillButtonHeight*1.5+De.buffCoverHeight*vG+De.slotPaddingBottom,timelineCanvasHeight:(e,t)=>{let n=De.rulerHeight;return n+=De.trackHeight*e,n+=De.renderSlotHeight()*t,t<Ya&&(n+=De.addSlotButtonHeight),n},leftBufferWidth:20,addSlotButtonHeight:20},MG={drawMarkers:!0,drawDamageMarks:!0,drawHealingMarks:!0,drawMPTickMarks:!0,drawBuffIndicators:!0};function LG(e){const t=new Blob([JSON.stringify(e)],{type:"text/plain;charset=utf-8"});return window.URL.createObjectURL(t)}function xG(e){var a;let t="";(a=e.meta)==null||a.forEach(s=>{t+="#"+s.toString()+`
`}),e.body.forEach(s=>{for(let c=0;c<s.length;c++)t+=s[c].toString(),c<s.length-1&&(t+=",");t+=`
`});const n=new Blob([t],{type:"text/csv;charset=utf-8"});return window.URL.createObjectURL(n)}var Qo=(e=>(e.Json="JSON",e.Csv="CSV",e.Png="PNG",e))(Qo||{});function Kl(e){var c;const[t,n]=C.useState({jsonContent:{},csvContent:{body:[]},pngContent:void 0}),a=()=>{const d=e.getContentFn();e.fileFormat==="JSON"?n({jsonContent:d}):e.fileFormat==="CSV"?n({csvContent:d}):e.fileFormat==="PNG"?n({pngContent:d}):console.assert(!1)};let s="";return e.fileFormat==="JSON"?s=LG(t.jsonContent):e.fileFormat==="CSV"?s=xG(t.csvContent):e.fileFormat==="PNG"?s=((c=t.pngContent)==null?void 0:c.toDataURL())??"":console.assert(!1),l.jsx("a",{style:{color:Nt().fileDownload,marginRight:6},href:s,download:e.filename,onClick:()=>a(),onContextMenu:()=>a(),children:`[${e.displayName===void 0?"download":e.displayName}]`})}function HG(e,t=n=>{console.log(n)}){const n=new FileReader;n.onload=function(a){var d,f;const s=((f=(d=a.target)==null?void 0:d.result)==null?void 0:f.toString())??"";let c;try{c=JSON.parse(s)}catch(h){window.alert(N({en:"Parse error! Are you sure this is the correct file? This tool only reads text files in JSON format.",zh:"- JSON"})),console.error(h)}t(c)},n.readAsText(e,"UTF-8")}const tt={positionFromTimeAndScale:function(e,t){return e*t*100},timeFromPositionAndScale:function(e,t){return e/(t*100)},displayTime:function(e,t){const n=Math.abs(e),a=Math.floor(n/60),s=n-60*a;return(e<0?"-":"")+a.toString()+":"+(s+_n.epsilon<10?"0":"")+s.toFixed(t).toString()}},kG=function(e){console.log("[asyncFetch] some error occurred")},vC=new Map;function bO(e,t,n=kG){const a=vC.get(e);if(a){t(a);return}const s=new XMLHttpRequest;s.addEventListener("error",n),s.addEventListener("load",c=>{t(s.responseText),vC.set(e,s.responseText)}),s.open("GET",e),s.send()}function uo(e){const t=e.trim();let n=1;e[0]==="-"&&(n=-1,e=e.substring(1));const a=t.indexOf(":");if(a<0)return parseFloat(t);const s=parseInt(t.substring(0,a)),c=parseFloat(t.substring(a+1));return n*(s*60+c)}function Zs(e){return l.jsx("div",{className:"clickable",onClick:e.onClickFn,style:e.style,children:e.content})}function UG(e){const n={position:"relative",display:"inline-block",verticalAlign:"top",border:"1px solid "+Nt().bgHighContrast,borderRadius:4,height:8,top:e.offsetY,width:e.width},a={background:`${e.backgroundColor}`,height:"100%",borderRadius:"inherit",width:`${e.progress*100}%`};return l.jsx("div",{style:n,children:l.jsx("div",{style:a})})}const sc=26;function OO(e){const t=sc-2,[n,a]=_i.useState(void 0);C.useEffect(()=>{let h=e.defaultSelectedIndex;const m=pt("tabs: "+e.uniqueName);m!==null&&(m==="none"?h=void 0:h=parseInt(m)),a(h)},[e.defaultSelectedIndex,e.uniqueName]);const s=Nt(),c=function(h){const R="1px solid "+(h===n?s.bgHighContrast:s.bgMediumContrast),T="1px solid "+s.background;let S=R;(h===n||n===void 0)&&(S=T);const g=h===n?R:T;let _=T,I=T;return h===n?(_=R,I=R):h>0&&(n===void 0||n+1!==h)&&(_=R),{margin:0,display:"inline-block",boxSizing:"border-box",padding:"0 12px",borderBottom:S,borderTop:g,borderLeft:_,borderRight:I,lineHeight:`${t}px`,color:h===n?s.emphasis:s.text,cursor:e.collapsible||h!==n?"pointer":"default"}},d=[],f=[];for(let h=0;h<e.content.length;h++){const m=e.content[h],R=h===n;d.push(l.jsx("span",{style:c(h),onClick:()=>{let S=n;R?e.collapsible&&(S=void 0):S=h,a(S),Ct("tabs: "+e.uniqueName,S===void 0?"none":`${S}`)},children:m.titleNode},h));const T={display:R?"block":"none"};e.maxWidth!==void 0&&(T.maxWidth=e.maxWidth),f.push(l.jsx("div",{style:T,children:m.contentNode},h))}return e.collapsible&&n!==void 0&&d.push(l.jsx("span",{onClick:()=>{a(void 0),Ct("tabs: "+e.uniqueName,"none")},children:l.jsx(nG,{style:{marginLeft:16,fontSize:14,cursor:"pointer",position:"relative",top:3}})},d.length)),l.jsxs("div",{style:{position:"relative",...e.style},children:[l.jsx("div",{children:d}),l.jsx("div",{className:e.scrollable?"visibleScrollbar":void 0,style:{display:n===void 0?"none":"block",height:e.height-sc,boxSizing:"border-box",padding:`10px ${CO?15:5}px`,overflowY:e.scrollable?"scroll":"hidden"},children:f})]})}function zS(e){const t=Nt(),n=[];for(let a=0;a<e.children.length;a++){const s=e.children[a],c=a<e.children.length-1?e.children[a+1]:void 0;if(n.push(l.jsxs(oO,{className:s.showScrollbar?"visibleScrollbar":"invisibleScrollbar",defaultSize:s.defaultSize,minSize:s.minSize??20,style:{border:s.fullBorder===!0?`1px solid ${t.bgMediumContrast}`:void 0,boxSizing:"border-box",height:e.contentHeight,overflowY:"scroll"},children:[s.title?l.jsx("div",{style:{marginBottom:10},children:l.jsx("b",{children:s.title})}):void 0,s.content]},`column-${a}`)),a<e.children.length-1){const f=s.fullBorder===!0||c!==void 0&&c.fullBorder===!0?{margin:"0 5px"}:{borderLeft:"1px solid "+t.bgMediumContrast,margin:"0 15px 0 10px"};n.push(l.jsx(NO,{style:f},`divider-${a}`))}}return l.jsx(pO,{direction:"horizontal",children:n})}function Xt(e){var d;const t=f=>{e.onChange&&e.onChange(f.target.value)},n=Nt(),a=e.fullWidthInput?void 0:e.width??5,s={color:((d=e.style)==null?void 0:d.color)??e.componentColor??n.text,backgroundColor:"transparent",outline:"none",border:"none",borderBottom:"1px solid "+(e.componentColor??n.text),width:e.fullWidthInput?"100%":void 0},c=e.style??{};return l.jsxs("div",{style:{...c,color:e.componentColor},children:[l.jsx("span",{children:e.description}),l.jsx("input",{style:s,size:a,type:"text",value:e.defaultValue,onChange:t,onKeyDown:f=>f.stopPropagation(),autoFocus:e.autoFocus,placeholder:e.placeholder})]})}function wG(e){const t=e.description??"default description",[n,a]=C.useState(e.defaultValue??""),s=c=>{a(c.target.value),e.onChange&&e.onChange(c.target.value),Ct("slider: "+e.uniqueName,c.target.value)};return C.useEffect(()=>{let c=n;const d=pt("slider: "+e.uniqueName);d!==null&&(c=d,a(d)),e.onChange&&e.onChange(c)},[]),l.jsxs("div",{style:{display:"inline-block",...e.style},children:[l.jsx("span",{children:t??""}),l.jsx("input",{size:10,type:"range",value:n,min:.05,max:1,step:.025,onChange:s,style:{position:"relative",outline:"none"}})]})}function DO(e){const t=pt(`radio: ${e.uniqueName}`)??e.selected??e.options[0][0],[n,a]=C.useState(t);C.useEffect(()=>{e.selected!==void 0&&(a(e.selected),Ct(`radio: ${e.uniqueName}`,e.selected),e.onChange(e.selected))},[e.selected]);const s={position:"relative",top:3,marginRight:"0.25em"},c=e.options.map(([d,f])=>l.jsxs("div",{style:s,children:[l.jsx("input",{type:"radio",id:d,name:e.uniqueName,value:d,checked:n===d,onChange:()=>{a(d),Ct(`radio: ${e.uniqueName}`,d),e.onChange(d)}}),l.jsxs("label",{htmlFor:d,style:{verticalAlign:"top"},children:[" ",f]})]},d));return l.jsx("div",{style:e.containerStyle,children:c})}function Xu(e){const[t,n]=C.useState(!1);return C.useEffect(()=>{let a=e.defaultChecked??!0;const s=pt("checked: "+e.uniqueName);s!==null&&(a=parseInt(s)>0),n(a),e.onChange(a)},[]),l.jsxs("div",{style:{marginBottom:5},children:[l.jsx("input",{className:"shellCheckbox",type:"checkbox",onChange:a=>{const s=a.currentTarget.checked;n(s),Ct("checked: "+e.uniqueName,s?"1":"0"),e.onChange(s)},checked:t}),l.jsx("span",{children:e.label})]})}function Vl(e){const[t,n]=C.useState(e.defaultShow??!1),a=e.autoIndent??!0,s=()=>{const d=!t;n(d),e.onExpand&&d&&e.onExpand(),e.onCollapse&&!d&&e.onCollapse(),Ct("exp: "+e.title,(d?1:0).toString())};C.useEffect(()=>{const d=pt("exp: "+e.title);d!==null&&n(parseInt(d)===1)},[]);const c=a?{margin:10,paddingLeft:6,marginBottom:20}:{};return l.jsxs("div",{style:e.noMargin?{}:{marginTop:10,marginBottom:10},children:[l.jsx(Zs,{content:l.jsxs("span",{children:[l.jsx("span",{children:t?"- ":"+ "}),e.titleNode??e.title]}),onClickFn:s}),l.jsx("div",{style:{position:"relative",display:t?"block":"none",marginTop:e.titleBodyGap},children:l.jsx("div",{style:c,children:e.content})})]})}function Jf(e){const t=C.useRef(null);let n=e.defaultLoadUrl??"";const a=h=>{h.target&&(n=h.target.value)},s=()=>{const h=t.current;if(h&&h.files&&h.files.length>0){const m=h.files[0];HG(m,R=>e.onLoadFn(R)),h.value=""}},c=()=>{const h=function(m){console.log("some error occurred")};bO(n,m=>{try{const R=JSON.parse(m);e.onLoadFn(R)}catch{h()}},m=>{h()})},d=Nt(),f={color:d.text,background:"transparent",outline:"none",border:"none",borderBottom:"1px solid "+d.text,width:"30em"};return l.jsxs("div",{children:[l.jsxs("div",{children:[l.jsx("span",{children:e.label??N({en:"Load from file: ",zh:""})}),l.jsx("input",{style:{width:"110px",color:"transparent"},type:"file",ref:t,onChange:s})]}),e.allowLoadFromUrl?l.jsxs("form",{children:[l.jsx("span",{children:N({en:"Load from URL: ",zh:"URL"})}),l.jsx("input",{defaultValue:n,style:f,onChange:a}),l.jsx("span",{children:" "}),l.jsx("button",{type:"submit",onClick:h=>{c(),h.preventDefault()},children:N({en:"load",zh:""})})]}):void 0]})}function oi(e){const t=Nt();return l.jsx("span",{style:{fontSize:11,border:"1px solid "+t.bgHighContrast,borderRadius:2,padding:"1px 4px",background:t.bgLowContrast},children:e.text})}const PG=100;function qe(e){const n={display:"inline-block",position:"relative",width:12,height:12,lineHeight:1,cursor:"help",background:Nt().bgHighContrast,borderRadius:6,textAlign:"center",verticalAlign:"middle"},a=C.useRef(0),[s,c]=C.useState(!1);return l.jsxs(Y0,{delay:0,open:s,children:[l.jsx("span",{id:`help-${e.topic}`,className:"help-icon global-help-tooltip",style:n,"data-tooltip-offset":4,onMouseEnter:()=>{const d=Date.now();d-a.current>PG&&c(!0),a.current=d},onMouseLeave:()=>c(!1),children:l.jsx("span",{style:{position:"relative",top:-1,color:"white"},children:"?"})}),l.jsx(q0,{container:e.container??document.getElementById("globalHelpTooltipAnchor"),children:l.jsx($0,{className:"tooltip-positioner",anchor:document.getElementById(`help-${e.topic}`),children:l.jsx(Q0,{className:"help-tooltip tooltip",children:e.content})})})]})}const eE="3f";let rd=()=>{},wn=()=>({isValid:!1,invalidActions:[],skillUseTimes:[],straightenedIfValid:void 0}),qu=e=>{e()};const yO=C.createContext(e=>({drop:t=>{},setSelected:t=>{}})),js=e=>({borderColor:e.bgMediumContrast,borderWidth:"1px",borderStyle:"solid"}),Ec={width:"1.5%",textAlign:"right",paddingRight:"0.3em",paddingLeft:"0.3em"},Ml={width:"12%",textAlign:"right",paddingRight:"0.3em",paddingLeft:"0.3em"},vO={width:"86.5%",textAlign:"left",paddingLeft:"0.3em"},MO={width:"100%",height:"1.6em",scrollMarginTop:"2.1em",scrollMarginBottom:"0.5em",userSelect:"none",outline:"none"},LO=e=>({borderTopWidth:"4px",borderTopStyle:"solid",borderColor:e.dropTarget});function yT(e){return(e??0)+1}function GG(e){const t=Nt();let n=e.index%2===1?t.timelineEditor.bgAlternateRow:"transparent";e.isSelected&&(n="rgba(151,111,246,0.25)"),e.recordIsDirty&&e.isSelected&&(n=t.editingValid+eE);let a=N({en:"(other)",zh:""});if(e.node.info.type===je.Skill){const T=e.node.targetList,S=T.length;let g="";S>1?g=N({en:` (${S} targets)`,zh:`${S}`}).toString():S===1&&T[0]!==1&&(g=N({en:` (Boss ${T[0]})`,zh:` Boss ${T[0]}`}).toString()),a=e.node.info.skillName?aa(e.node.info.skillName)+g:N({en:"(unknown skill)",zh:""})}else if(e.node.info.type===je.Wait)a=N({en:"(wait for "+e.node.info.waitDuration.toFixed(3)+"s)",zh:""+e.node.info.waitDuration.toFixed(3)+""});else if(e.node.info.type===je.JumpToTimestamp)a=N({en:"(jump to time "+tt.displayTime(e.node.info.targetTime,3)+")",zh:" "+tt.displayTime(e.node.info.targetTime,3)+""});else if(e.node.info.type===je.WaitForMP)a=N({en:"(wait until MP/lucid tick)",zh:"/"});else if(e.node.info.type===je.SetResourceEnabled){const T=Qe(e.node.info.buffName);a=N({en:"(toggle resource: "+T+")",zh:"BUFF"+T+""})}else e.node.info.type===je.Unknown&&(a=e.node.info.skillName);const s=l.jsxs("td",{style:{...vO,...js(t)},children:[e.isInvalid?l.jsx("span",{style:{marginRight:6,padding:"0 4px",backgroundColor:t.editingInvalid+eE},children:""}):void 0,l.jsx("span",{children:a})]}),c=e.includeDetails?l.jsx("td",{style:{...Ec,...js(t)},children:yT(e.index)}):void 0,d=e.includeDetails?l.jsx("td",{style:{...Ml,...js(t)},children:tt.displayTime(e.usedAt,3)}):void 0,f=C.useContext(am),h=f.dragTargetIndex===e.index,m=C.useContext(wd),R=C.useContext(yO)(e.index);return l.jsxs("tr",{style:{...MO,background:n,...h?LO(t):{}},ref:e.refObj??null,draggable:!m.value,onDragStart:T=>{R.setSelected(!0),e.isSelected||p.timeline.onClickTimelineAction(e.index,!1)},onDragLeave:T=>{f.setDragTarget(null,null)},onDrop:T=>{R.drop(T),f.setDragTarget(null,null)},onDragOver:T=>{T.preventDefault();let S=e.usedAt;const g=e.index>0?p.record.actions[e.index-1]:void 0;(g==null?void 0:g.tmp_endLockTime)!==void 0&&e.node.info.type===je.Skill&&ho(p.game.job,e.node.info.skillName).cdName==="cd_GCD"&&(S=g.tmp_endLockTime-p.gameConfig.countdown),f.setDragTarget(e.index,S)},onClick:T=>{R.setSelected(!0),e.recordIsDirty?p.timeline.onClickTimelineAction(e.index,T.shiftKey):(p.timeline.onClickTimelineAction(e.index,T.shiftKey),e.node.tmp_startLockTime!==void 0&&p.scrollToTime(e.node.tmp_startLockTime))},tabIndex:-1,onKeyDown:e.onKeyDown,children:[c,d,s]})}let YS=()=>{},KS=()=>{};function BG(){var ae;const e=Nt(),t=C.useRef(null),n=C.useRef(null),[a,s]=C.useState(!1),[c,d]=C.useState(void 0),[f,h]=C.useState(void 0),[,m]=C.useReducer(K=>K+1,0),R=C.useRef(!1),T=(ae=p.record.getFirstSelection())==null?void 0:ae.targetList,S=T&&T.length>0?T[0]-1:void 0,g=Array(ja).fill(!1);T==null||T.forEach(K=>{g[K-1]=!0});const _=C.useRef(void 0);C.useEffect(()=>(rd=()=>{m()},wn=()=>{const K=p.checkRecordValidity(p.record,0,!0);return d(K),K},qu=K=>{a&&_.current&&(p.record=_.current,p.checkRecordValidity(p.record,0,!0)),K(),s(!1),_.current=p.record,d(p.checkRecordValidity(p.record,0,!0))},YS=()=>{setTimeout(()=>{var K;(K=t.current)==null||K.scrollIntoView({behavior:"smooth",block:"nearest"})},0)},KS=()=>{setTimeout(()=>{var K;(K=(p.record.getSelectionLength()===1?t:n).current)==null||K.scrollIntoView({behavior:"smooth",block:"nearest"})},0)},d(p.checkRecordValidity(p.record,0,!0)),()=>{rd=()=>{}}),[]);const I=c&&c.isValid,D=K=>{K&&_.current&&(p.record=_.current),s(!1),d(p.checkRecordValidity(p.record,0,!0)),h(void 0)},O=5,x=()=>l.jsx("button",{style:{display:"block",marginTop:10,marginLeft:O},onClick:K=>{R.current=!0,a||console.error("attempted to discard edits while timeline editor was not dirty"),D(!0)},children:N({en:"discard changes",zh:""})}),k=()=>(a||(_.current=p.record,p.record=p.record.getCloneWithSharedConfig(),s(!0)),p.record),H=(K,Q)=>{const he=K==null?void 0:K.node,me=K==null?void 0:K.index,Ie=K==null?void 0:K.reason,Me=Va()==="en",pe=(be,ye)=>Me?be:ye;let ge=pe("(unknown node)","");if(he)if(he.info.type===je.Wait)ge=pe("(Wait)","");else if(he.info.type===je.JumpToTimestamp)ge=pe("(Jump to time)","");else if(he.info.type===je.WaitForMP)ge=pe("(Wait for MP/lucid tick)","/");else if(he.info.type===je.SetResourceEnabled){const be=Qe(he.info.buffName);ge=pe("(Toggle resource "+be+")","BUFF "+be+"")}else he.info.type===je.Skill?ge=he.info.skillName?aa(he.info.skillName):pe("(unknown skill)",""):he.info.type===je.Unknown&&(ge=he.info.skillName);let oe;const Ce=me!==void 0?c==null?void 0:c.skillUseTimes[me]:void 0,Te=(Ie==null?void 0:Ie.unavailableReasons.map(Bs).join(pe("; ","")))??Bs(void 0);if(Q?oe=pe(`This sequence contains invalid actions! Check action #${yT(me)}: ${ge}`,`${yT(me)} ${ge}`):oe=pe(`This action is invalid! ${ge}`,` ${ge}`),Ce!==void 0){const be=tt.displayTime(Ce,3);oe+=` @ ${be}`+pe(".","")}return{en:l.jsxs(l.Fragment,{children:[oe,l.jsx("br",{}),l.jsx("br",{}),"Reason: ",Te]}),zh:l.jsxs(l.Fragment,{children:[oe,l.jsx("br",{}),l.jsx("br",{}),"",Te]})}},G={padding:"0.3em"},P=()=>{const K=p.record,Q=K.getSelectionLength();if(Q===0)return l.jsx("div",{style:G,children:N({en:"No actions selected.",zh:""})});if(Q===1){const he=K.selectionStartIndex,Ie=K.getFirstSelection().info;let Me=l.jsx(l.Fragment,{});const pe=tt.displayTime((c==null?void 0:c.skillUseTimes[he])??0,3);if(Ie.type===je.Skill){const ge=Ie.skillName,oe=ho(p.game.job,ge),Ce=(oe==null?void 0:oe.potencyFn(p.game))>0||(oe==null?void 0:oe.savesTargets)||p.game.dotSkills.includes(ge);Me=l.jsxs(l.Fragment,{children:[l.jsx("b",{children:aa(ge)})," @ ",pe,l.jsx("br",{}),Ce&&l.jsx(c0,{style:{marginBlock:"5px"},primaryOnly:oe.falloff===void 0&&!oe.savesTargets,selected:g,primary:S,onAnySelectionChange:(Te,be)=>Z(ye=>{const Ue=be.flatMap((Rt,zt)=>Rt&&zt!==Te?[zt+1]:[]);Ue.splice(0,0,Te+1);const $e=new zG(jl(ge,Ue),he);return p.undoStack.push($e),$e.redo(),he})})]})}else if(Ie.type===je.Wait){const ge=Ie.waitDuration.toFixed(3);Me=l.jsx(l.Fragment,{children:N({en:`wait for ${ge}s @ ${pe}`,zh:`${ge} @ ${pe}`})})}else if(Ie.type===je.JumpToTimestamp){const ge=tt.displayTime(Ie.targetTime,3);Me=l.jsx(l.Fragment,{children:N({en:`jump from time ${pe} to ${ge}`,zh:` ${pe}  ${ge}`})})}else if(Ie.type===je.WaitForMP)Me=l.jsx(l.Fragment,{children:N({en:`wait for MP/lucid tick @ ${pe}`,zh:`/ @ ${pe}`})});else if(Ie.type===je.SetResourceEnabled){const ge=Qe(Ie.buffName);Me=l.jsx(l.Fragment,{children:N({en:"toggle resource: ",zh:"BUFF"}).toString()+ge+(Ie.targetNumber!==void 0?N({en:`(Boss ${Ie.targetNumber})`,zh:`Boss ${Ie.targetNumber}`}):"")+" @ "+pe})}else Ie.type===je.Unknown&&(Me=l.jsx(l.Fragment,{children:"nodeInfo.skillName"}));return l.jsx("div",{style:G,children:Me})}else return l.jsx("div",{style:G,children:N({en:`${Q} actions selected.`,zh:`${Q}`})})},L=()=>{if(a)return l.jsxs("div",{children:[l.jsx("div",{style:{...G,backgroundColor:(I?e.editingValid:e.editingInvalid)+eE},children:N(I?{en:"This edited sequence is valid.",zh:""}:H(c==null?void 0:c.invalidActions[0],!0))}),l.jsx("button",{style:{display:"block",marginTop:10,marginLeft:O},onClick:K=>{R.current=!0,a?p.applyEditedRecord():console.error("attempted to apply edits while timeline editor was not dirty"),D(!1),p.displayCurrentState()},children:N({en:"apply changes to timeline and save",zh:""})}),x()]});if(I)return l.jsx("div",{style:G,children:N({en:"Timeline is up to date.",zh:""})});{const K=new Map;c==null||c.invalidActions.forEach(Me=>K.set(Me.index,Me));const Q=c==null?void 0:c.invalidActions[0];let he=Q,me=!0;const Ie=p.record;if(Q!==void 0&&Ie.selectionStartIndex!==void 0){const Me=c==null?void 0:c.invalidActions.find(ge=>Ie.isInSelection(ge.index)),pe=Ie.getSelectionLength();pe===1&&Me!==void 0?(he=K.get(Ie.selectionStartIndex),me=!1):pe>1&&Me!==void 0&&(he=Me)}return l.jsx("div",{children:l.jsx("div",{style:{...G,backgroundColor:e.editingInvalid+eE},children:N(H(he,me))})})}},j={display:"block",width:"100%",padding:3},Z=K=>{if(p.record.getFirstSelection()){R.current=!0;const Q=k();let he=f;const me=K(Q);me!==void 0&&(he===void 0?he=me:he=Math.min(me,he));const Ie=p.checkRecordValidity(Q,he);me!==void 0&&Ie.straightenedIfValid?(p.record=Ie.straightenedIfValid,h(void 0)):h(he),d(Ie),nl()}},J=p.undoStack.peekUndoMessage(),se=p.undoStack.peekRedoMessage(),X=l.jsxs("div",{style:{marginBottom:6,flex:1,display:"flex",flexDirection:"column",gap:10},children:[l.jsx("button",{style:j,onClick:K=>Z(Q=>(p.undoStack.push(new Rf(Q.selectionStartIndex,Q.getSelectionLength(),-1)),Q.moveSelected(-1))),children:N({en:"move up",zh:""})}),l.jsx("button",{style:j,onClick:K=>Z(Q=>(p.undoStack.push(new Rf(Q.selectionStartIndex,Q.getSelectionLength(),1)),Q.moveSelected(1))),children:N({en:"move down",zh:""})}),l.jsx("button",{style:j,onClick:K=>Z(Q=>(p.undoStack.push(new rc(Q.selectionStartIndex,Q.getSelected().actions,"delete")),Q.deleteSelected())),children:N({en:"delete selected",zh:""})}),l.jsx("button",{style:j,onClick:K=>{const Q=p.record.getSelectionLength();Q>1&&Z(he=>{const me=he.selectionStartIndex,Ie=he.selectionEndIndex;return p.undoStack.push(new Rf(Ie,1,-(Q-1))),he.selectSingle(Ie),he.moveSelected(-(Q-1)),he.selectSingle(me),he.selectUntil(Ie),he.selectionStartIndex})},children:N({en:l.jsxs(l.Fragment,{children:["move end of selection",l.jsx("br",{}),"to start of selection"]}),zh:l.jsxs(l.Fragment,{children:["",l.jsx("br",{}),""]})})}),l.jsx("hr",{style:{backgroundColor:e.bgLowContrast,height:2,marginTop:-2,marginBottom:-2,border:0,width:"100%"}}),l.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:6},children:[l.jsx("button",{style:j,onClick:vT,disabled:p.record.getSelectionLength()===0,children:N({en:"copy ",zh:""})}),l.jsx("button",{style:j,onClick:PO,children:N({en:"paste ",zh:""})})]}),l.jsxs("button",{style:j,onClick:()=>p.undoStack.undo(),disabled:J===void 0,children:[N({en:"undo ",zh:""}),N(J??{en:""})]}),l.jsxs("button",{style:j,onClick:()=>p.undoStack.redo(),disabled:se===void 0,children:[N({en:"redo ",zh:""}),N(se??{en:""})]})]}),Ae=K=>{const Q=p.record.selectionStartIndex;Q!==void 0&&(K.key==="Backspace"||K.key==="Delete"?Z(me=>(p.undoStack.push(new rc(Q,me.getSelected().actions,"delete")),me.deleteSelected())):(p.handleTimelineKeyboardEvent(K),K.key==="Escape"&&le.setDragTarget(null,null)))},W=!0,ee=[],M=new Set(c==null?void 0:c.invalidActions.map(K=>K.index));p.record.actions.forEach((K,Q)=>{const he=!a&&Q===p.record.selectionStartIndex,me=!a&&Q===p.record.selectionEndIndex;ee.push(l.jsx(GG,{index:Q,node:K,isSelected:p.record.isInSelection(Q),recordIsDirty:a,isInvalid:M.has(Q),usedAt:(c==null?void 0:c.skillUseTimes[Q])??0,includeDetails:W,onKeyDown:Ae,refObj:he?t:me?n:void 0},Q))});const Y=K=>({drop:Q=>{const he=p.record.selectionStartIndex??0;let me=K-(he??0);me>0&&(me-=p.record.getSelectionLength()),me!==0&&Z(Ie=>Ie.moveSelected(me))},setSelected:Q=>{R.current=Q}}),ie=C.useContext(wd),le=C.useContext(am),v=ee.length,z=Y(v),q=le.dragTargetIndex===v;v>0&&ee.push(l.jsxs("tr",{tabIndex:-1,style:{height:"0.8em",background:e.timelineEditor.headerFooter,userSelect:"none",...q?LO(e):{}},draggable:!ie.value,onDragStart:K=>K.preventDefault(),onDragLeave:K=>{le.setDragTarget(null,null)},onDrop:K=>{z.drop(K),le.setDragTarget(null,null)},onDragOver:K=>{K.preventDefault(),le.setDragTarget(v,p.game.getDisplayTime())},children:[l.jsx("td",{style:{border:"none"}}),l.jsx("td",{style:{border:"none"}}),l.jsx("td",{style:{border:"none"}})]},v));const F={backgroundColor:e.timelineEditor.headerFooter};return l.jsx("div",{onClick:K=>{!K.shiftKey&&!R.current&&(p.record.unselectAll(),p.displayCurrentState()),R.current=!1},children:l.jsx(zS,{contentHeight:bg,children:[{content:X,defaultSize:20},{content:l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:Ec.paddingLeft},children:[l.jsxs("table",{style:{position:"relative",width:"100%",borderCollapse:"collapse",borderColor:e.bgMediumContrast,borderWidth:"1px",borderStyle:"solid"},children:[l.jsx("thead",{children:l.jsxs("tr",{style:MO,children:[l.jsx("th",{className:"stickyTh",style:{...F,...Ec,...js(e)},children:"#"}),l.jsx("th",{className:"stickyTh",style:{...F,...Ml,...js(e)},children:N({en:"Time",zh:""})}),l.jsx("th",{className:"stickyTh",style:{...F,...vO,...js(e)},children:N({en:"Actions",zh:""})})]})}),l.jsx("tbody",{children:l.jsx(yO.Provider,{value:Y,children:ee})})]}),v===0&&l.jsx("span",{style:{paddingLeft:Ec.paddingLeft,fontStyle:"italic"},children:N({en:"No actions to display yet.",zh:""})})]}),defaultSize:40,fullBorder:!0,showScrollbar:!0},{content:l.jsxs("div",{style:{display:"flex 4 6",flexDirection:"column",height:"100%",width:"100%"},children:[l.jsx("div",{style:{height:"30%"},children:P()}),l.jsx("hr",{style:{marginLeft:"5px",border:"none",borderTop:"1px solid "+e.bgHighContrast}}),l.jsx("div",{style:{height:"60%"},children:L()})]}),defaultSize:40,fullBorder:!0}]})})}const FG=30;class jG{constructor(){re(this,"actions");re(this,"cursor");this.cursor=0,this.actions=[]}clear(){this.cursor=0,this.actions=[]}get length(){return this.actions.length}push(t){this.actions.splice(this.cursor,this.actions.length-this.cursor,t),this.actions.length>FG&&this.actions.shift(),this.cursor=this.actions.length}doThenPush(t){t.redo(),this.push(t)}emitLog(...t){}undo(){this.cursor>0?(this.actions[--this.cursor].undo(),this.emitLog("UNDO",this.actions[this.cursor])):this.emitLog("nothing to undo")}redo(){this.cursor<this.actions.length?(this.emitLog("REDO",this.actions[this.cursor]),this.actions[this.cursor++].redo()):this.emitLog("nothing to redo")}peekUndoMessage(){return this.cursor>0?this.actions[this.cursor-1].message:void 0}peekRedoMessage(){return this.cursor<this.actions.length?this.actions[this.cursor].message:void 0}}class La{constructor(t){re(this,"message");this.message=t}}function VS(e){return e>0?"actions":"action"}class Cs extends La{constructor(n,a){super({en:"add action",zh:""});re(this,"node");re(this,"index");this.node=n,this.index=a}undo(){p.record.selectSingle(this.index),p.deleteSelectedSkills()}redo(){p.insertRecordNode(this.node,this.index)}}class zG extends La{constructor(n,a){super({en:"edit action",zh:""});re(this,"oldNode");re(this,"newNode");re(this,"index");p.record.selectSingle(a),this.oldNode=p.record.getFirstSelection(),console.assert(this.oldNode!==void 0),this.newNode=n,this.index=a}undo(){p.record.replaceNode(this.oldNode,this.index),p.autoSave(),wn()}redo(){p.record.replaceNode(this.newNode,this.index),p.autoSave(),wn()}}class Rf extends La{constructor(n,a,s){super({en:`move ${a} ${VS(a)}`,zh:`${a}`});re(this,"startIndex");re(this,"selectCount");re(this,"offset");this.startIndex=n,this.selectCount=a,this.offset=s}undo(){p.record.selectSingle(this.startIndex+this.offset),p.record.selectUntil(this.startIndex+this.selectCount+this.offset-1),p.record.moveSelected(-this.offset),p.autoSave(),wn()}redo(){p.record.selectSingle(this.startIndex),p.record.selectUntil(this.startIndex+this.selectCount-1),p.record.moveSelected(this.offset),p.autoSave(),wn()}}class rc extends La{constructor(n,a,s){super({en:`${s} ${a.length} ${VS(a.length)}`,zh:`${s==="delete"?"":""}${a.length}`});re(this,"startIndex");re(this,"nodes");re(this,"source");this.startIndex=n,this.nodes=a,this.source=s}undo(){p.insertRecordNodes(this.nodes,this.startIndex)}redo(){p.record.selectSingle(this.startIndex),p.record.selectUntil(this.startIndex+this.nodes.length-1),p.deleteSelectedSkills(),wn()}}class WS extends La{constructor(n,a,s){super({en:s==="preset"?"add preset sequence":`paste ${n.length} ${VS(n.length)}`,zh:s==="preset"?"":`${n.length}`});re(this,"nodes");re(this,"index");re(this,"source");this.nodes=n,this.index=a,this.source=s}undo(){p.record.selectSingle(this.index),p.record.selectUntil(this.index+this.nodes.length-1),p.deleteSelectedSkills()}redo(){p.insertRecordNodes(this.nodes,this.index)}}class YG extends La{constructor(n,a,s,c){super({en:"import from fflogs",zh:"fflogs"});re(this,"nodes");re(this,"index");re(this,"oldConfig");re(this,"newConfig");this.nodes=n,this.index=a,this.oldConfig=s,this.newConfig=c}undo(){p.record.selectSingle(this.index),p.record.selectUntil(this.index+this.nodes.length-1),p.deleteSelectedSkills(),p.setConfigAndRestart(this.oldConfig,!1),p.updateAllDisplay(),p.scrollToTime()}redo(){p.insertRecordNodes(this.nodes,this.index),p.setConfigAndRestart(this.newConfig,!1),p.updateAllDisplay(),p.scrollToTime()}}class KG extends La{constructor(n,a){super({en:"change active slot",zh:""});re(this,"oldIndex");re(this,"newIndex");this.oldIndex=n,this.newIndex=a}undo(){p.setActiveSlot(this.oldIndex),p.displayCurrentState()}redo(){p.setActiveSlot(this.newIndex),p.displayCurrentState()}}class VG extends La{constructor(n,a){super({en:"delete slot",zh:""});re(this,"deleteIndex");re(this,"deletedRecord");this.deleteIndex=n,this.deletedRecord=a}undo(){p.timeline.addSlotAtIndex(this.deleteIndex),p.loadBattleRecordFromFile(this.deletedRecord),p.autoSave(),p.displayCurrentState()}redo(){p.timeline.removeSlot(this.deleteIndex),p.displayCurrentState()}}class WG extends La{constructor(n){super({en:"add slot",zh:""});re(this,"oldIndex");this.oldIndex=n}undo(){p.timeline.removeSlot(p.timeline.slots.length-1),p.setActiveSlot(this.oldIndex),p.displayCurrentState()}redo(){p.setActiveSlot(this.oldIndex),p.timeline.addSlot(),p.displayCurrentState()}}class XG extends La{constructor(n){super({en:"clone slot",zh:""});re(this,"sourceIndex");this.sourceIndex=n}undo(){p.timeline.removeSlot(p.timeline.slots.length-1),p.setActiveSlot(this.sourceIndex),p.displayCurrentState()}redo(){p.setActiveSlot(this.sourceIndex),p.cloneActiveSlot(),p.displayCurrentState()}}class qG extends La{constructor(n,a,s){super({en:"change config",zh:""});re(this,"oldConfig");re(this,"newConfig");re(this,"oldRecord");this.oldConfig=n,this.newConfig=a,s===void 0&&(n.job!==a.job||n.level!==a.level)&&console.error("config apply w/o reset but job or level changed"),this.oldRecord=s}undo(){this.oldRecord!==void 0?(p.loadBattleRecordFromFile(this.oldRecord),p.autoSave()):p.setConfigAndRestart(this.oldConfig,!1),p.updateAllDisplay(),p.scrollToTime()}redo(){p.setConfigAndRestart(this.newConfig,this.oldRecord!==void 0),p.updateAllDisplay(),p.scrollToTime()}}class ZG extends La{constructor(n,a){super({en:"import from file",zh:""});re(this,"oldRecord");re(this,"importedRecord");this.oldRecord=n,this.importedRecord=a}undo(){p.loadBattleRecordFromFile(this.oldRecord),p.autoSave(),p.displayCurrentState()}redo(){p.loadBattleRecordFromFile(this.importedRecord),p.autoSave(),p.displayCurrentState()}}let xO,HO=[];const kO="",UO=", ",qR=":";function $G(e){const t=p.record.getSelected().actions,n=p.record.selectionStartIndex;if(n===void 0)return"";let a="";if(e==="plain"){const s=[];t.forEach(d=>s.push(d.toLocalizedString()));const c=Va()==="zh"?kO:UO;a=s.join(c)}else if(e==="tsv"){const s=[],c=p.checkRecordValidity(p.record,0);t.forEach((d,f)=>s.push([c.skillUseTimes[f+n].toFixed(3),d.targetList.length,d.toLocalizedString()].join("	"))),a=s.join(`
`)}else if(e==="discord"){const s=[];t.forEach(c=>{if(c.info.type===je.Skill){const d=c.info.skillName;d==="TINCTURE"?s.push(":IntPot:"):d==="SWIFTCAST"?s.push(p.gameConfig.job==="BLM"?":Swift:":":Swiftcast:"):s.push(`:${bn[d].discordEmote??bn[d].name.replaceAll(" ","")}:`)}else s.push(c.toLocalizedString())}),a=s.join(" ")}else console.error("invalid clipboard mode",e);return xO=a,HO=t,a}function QG(e){return e==="."||e>="0"&&e<="9"}function wO(e,t){const n=e.toLowerCase(),a=t==null?void 0:t.toLowerCase();if(n==="wait mp"||e===""||n==="wait"&&a===" mp"||e===""&&(t==null?void 0:t.substring(3,5))==="")return r0();const s=e.split(" ");if(!(t!==void 0&&QG(t[0]))){if(s.length===2&&s[0]==="wait"){const c=uo(s[1]);return isNaN(c)?void 0:dc(c)}if(e.startsWith("")){const c=uo(e.substring(3));return isNaN(c)?void 0:dc(c)}if(s.length===2&&s[0]==="jump"){const c=uo(s[1]);return isNaN(c)?void 0:Bl(c)}if(e.startsWith("")){const c=uo(e.substring(2));return isNaN(c)?void 0:Bl(c)}if(s.length>=2&&s[0]==="toggle"){const c=wN(s.slice(1).join(" "));return c!==void 0?mT(c):void 0}if(e.startsWith("")){const c=wN(e.substring(2));return c!==void 0?mT(c):void 0}}}function MC(e,t=1){const n=wO(e,void 0);if(n!==void 0)return n;const a=bS(e)??a0.get(e)??o0.get(e);return a!==void 0?jl(a,Array(t).fill(0).map((s,c)=>c+1)):void 0}function JG(e){if(e===xO)return HO;const t=e.split(`
`),n=[];for(const a of t){const s=a.trimStart();if(a.includes("	")){const c=a.split("	");if(c.length>0){const d=c[c.length-1].trim();let f=1;if(c.length>1){const m=parseInt(c[c.length-2]);isNaN(m)||(f=m)}const h=MC(d,f);h!==void 0&&n.push(h)}}else if(s.length>2&&s[0]===qR){let c=!0,d="";for(let f=1;f<s.length;f++){const h=s[f];if(c&&(h===qR||h===" ")){const R=d.indexOf("~");if(R>0&&(d=d.substring(0,R)),d.toLowerCase().endsWith("_ogcd")&&(d=d.substring(0,d.length-5)),d.length!==0)if(d==="IntPot")n.push(jl("TINCTURE"));else if(d==="Swift"||d==="Swiftcast")n.push(jl("SWIFTCAST"));else{const T=CS.get(p.gameConfig.job).get(d);T!==void 0?n.push(jl(T)):console.error("unrecognized discord emote",d)}d="",c=!1;continue}if(h===qR&&d.length===0){c=!0,d="";continue}(d.length>0||h!==" ")&&(d+=h);const m=s.substring(f+1,f+4);if(!c){const R=wO(d,m);R!==void 0&&(n.push(R),d="")}}}else{let c=s.split(UO);c.length<2&&(c=s.split(kO)),c.forEach(d=>{if(d.length>0){const f=MC(d.trim());f!==void 0&&n.push(f)}})}}return n}function vT(){navigator.clipboard.writeText($G(p.clipboardMode))}function PO(){p.queuedPastes++,navigator.clipboard.readText().then(e=>{if(e.startsWith("https://")||e.startsWith("www.")||e.startsWith("cn."))return;const t=JG(e);if(t===void 0||t.length===0){console.error("failed to paste parsed clipboard contents:"),console.error(e);return}p.undoStack.doThenPush(new WS(t,p.record.selectionStartIndex??p.record.length,"paste"))}).finally(()=>{p.queuedPastes--,console.assert(p.queuedPastes>=0)})}class In{constructor(t,n,a,s,c,d,f){re(this,"name");re(this,"duration");re(this,"color");re(this,"damageFactor");re(this,"critBonus");re(this,"dhBonus");re(this,"job");this.name=t,this.duration=a,this.color=n,this.damageFactor=s,this.critBonus=c,this.dhBonus=d,this.job=f}}const XS=[new In(U.ArcaneCircle,Tt.Pink,20,1.03,0,0,"RPR"),new In(U.ArmysPaeon,Tt.Yellow,45,1,0,.03,"BRD"),new In(U.BattleLitany,Tt.Blue,20,1,.1,0,"DRG"),new In(U.BattleVoice,Tt.Orange,20,1,0,.2,"BRD"),new In(U.Brotherhood,Tt.Orange,20,1.05,0,0,"MNK"),new In(U.Card_TheBalance,Tt.Red,15,1.03,0,0,"AST"),new In(U.Card_TheSpear,Tt.Blue,15,1.06,0,0,"AST"),new In(U.ChainStratagem,Tt.Grey,20,1,.1,0,"SCH"),new In(U.Devilment,Tt.Green,20,1,.2,.2,"DNC"),new In(U.Divination,Tt.Yellow,20,1.06,0,0,"AST"),new In(U.Dokumori,Tt.Purple,21,1.05,0,0,"NIN"),new In(U.Embolden,Tt.Grey,20,1.05,0,0,"RDM"),new In(U.MagesBallad,Tt.Purple,45,1.01,0,0,"BRD"),new In(U.RadiantFinale1,Tt.Purple,20,1.02,0,0,"BRD"),new In(U.RadiantFinale2,Tt.Purple,20,1.04,0,0,"BRD"),new In(U.RadiantFinale3,Tt.Purple,20,1.06,0,0,"BRD"),new In(U.SearingLight,Tt.Blue,20,1.05,0,0,"SMN"),new In(U.StandardFinish,Tt.Yellow,60,1.05,0,0,"DNC"),new In(U.StarryMuse,Tt.Purple,20.5,1.05,0,0,"PCT"),new In(U.TechnicalFinish,Tt.Blue,20,1.05,0,0,"DNC"),new In(U.WanderersMinuet,Tt.Green,45,1,.02,0,"BRD")],GO=new Map;XS.forEach(e=>{GO.set(e.name,e)});let tE=class{constructor(t){re(this,"name");re(this,"info");this.name=t;let n=GO.get(t);n||(n=XS[0],console.error("Buff info not found!")),this.info=n}};const BO=152,of=5882,ti=5925,ZR={main:ti,spellSpeed:420,skillSpeed:420,criticalHit:3387,directHit:1935,determination:2407,piety:440,tenacity:420},nE={DRK:{main:of,spellSpeed:420,skillSpeed:420,criticalHit:3404,directHit:1068,determination:2883,piety:440,tenacity:794},GNB:{main:of,spellSpeed:420,skillSpeed:420,criticalHit:3404,directHit:1068,determination:2883,piety:440,tenacity:794},PLD:{main:of,spellSpeed:420,skillSpeed:420,criticalHit:3242,directHit:1230,determination:2883,piety:440,tenacity:794},WAR:{main:of,spellSpeed:420,skillSpeed:420,criticalHit:3404,directHit:1068,determination:2883,piety:440,tenacity:794},AST:{main:ti,spellSpeed:704,skillSpeed:420,criticalHit:3427,directHit:1230,determination:2510,piety:718,tenacity:420},SCH:{main:ti,spellSpeed:1221,skillSpeed:420,criticalHit:3484,directHit:852,determination:2314,piety:718,tenacity:420},SGE:{main:ti,spellSpeed:704,skillSpeed:420,criticalHit:3427,directHit:1230,determination:2510,piety:718,tenacity:420},WHM:{main:ti,spellSpeed:704,skillSpeed:420,criticalHit:3427,directHit:1230,determination:2510,piety:718,tenacity:420},DRG:{main:ti,spellSpeed:420,skillSpeed:420,criticalHit:3425,directHit:1996,determination:2308,piety:440,tenacity:420},MNK:{main:ti,spellSpeed:420,skillSpeed:968,criticalHit:3487,directHit:1685,determination:2009,piety:440,tenacity:420},NIN:{main:ti,spellSpeed:420,skillSpeed:420,criticalHit:3378,directHit:1981,determination:2370,piety:440,tenacity:420},RPR:{main:ti,spellSpeed:420,skillSpeed:474,criticalHit:3425,directHit:1942,determination:2308,piety:440,tenacity:420},SAM:{main:ti,spellSpeed:420,skillSpeed:690,criticalHit:3425,directHit:2045,determination:1989,piety:440,tenacity:420},VPR:{main:ti,spellSpeed:420,skillSpeed:420,criticalHit:3378,directHit:1981,determination:2370,piety:440,tenacity:420},DNC:ZR,BRD:ZR,MCH:ZR,BLM:{main:ti,spellSpeed:978,skillSpeed:420,criticalHit:3456,directHit:1764,determination:1951,piety:440,tenacity:420},RDM:{main:ti,spellSpeed:528,skillSpeed:420,criticalHit:3399,directHit:1872,determination:2350,piety:440,tenacity:420},SMN:{main:ti,spellSpeed:528,skillSpeed:420,criticalHit:3399,directHit:1872,determination:2350,piety:440,tenacity:420},PCT:{main:ti,spellSpeed:420,skillSpeed:420,criticalHit:3399,directHit:1764,determination:2566,piety:440,tenacity:420},BLU:{main:1701,spellSpeed:1573,skillSpeed:380,criticalHit:1343,directHit:785,determination:676,piety:340,tenacity:380},NEVER:{main:ti,spellSpeed:420,skillSpeed:420,criticalHit:420,directHit:420,determination:440,piety:440,tenacity:420}};function MT(e,t=ot.lvl100){return{job:e,shellVersion:eS.version,level:t??(e==="BLU"?ot.lvl80:ot.lvl100),...nE[e],wd:BO,countdown:5,randomSeed:"sup",fps:60,gcdSkillCorrection:0,animationLock:.7,timeTillFirstManaTick:1.2,procMode:Si.Never,initialResourceOverrides:[]}}function e2(e){const t=pt(`defaultPartialConfig: ${e}`);if(t===null)return nE[e];const n=JSON.parse(t);return Object.entries(nE[e]).forEach(([a,s])=>{n[a]===void 0&&(n[a]=s)}),n}const Tf=MT("BLM");class Ia{constructor(t){re(this,"job");re(this,"shellVersion",eS.version);re(this,"level");re(this,"wd");re(this,"main");re(this,"spellSpeed");re(this,"skillSpeed");re(this,"criticalHit");re(this,"directHit");re(this,"determination");re(this,"piety");re(this,"tenacity");re(this,"countdown");re(this,"randomSeed");re(this,"fps");re(this,"gcdSkillCorrection");re(this,"animationLock");re(this,"timeTillFirstManaTick");re(this,"procMode");re(this,"initialResourceOverrides");re(this,"legacy_casterTax");this.job=t.job,this.shellVersion=t.shellVersion;const n=Tf;this.level=t.level??n.level,this.spellSpeed=t.spellSpeed,this.skillSpeed=t.skillSpeed??n.skillSpeed,this.criticalHit=t.criticalHit??n.criticalHit,this.directHit=t.directHit??n.directHit,this.determination=t.determination??n.determination,this.piety=t.piety??n.piety,this.countdown=t.countdown,this.randomSeed=t.randomSeed,this.fps=t.fps,this.gcdSkillCorrection=t.gcdSkillCorrection,this.animationLock=t.animationLock,this.timeTillFirstManaTick=t.timeTillFirstManaTick,this.procMode=t.procMode,this.initialResourceOverrides=t.initialResourceOverrides.map(a=>{if(a.effectOrTimerEnabled===void 0&&(a.enabled===void 0?a.effectOrTimerEnabled=!0:a.effectOrTimerEnabled=a.enabled),!(a.type in Ke||a.type in Gs))if(a.type.toString()==="AstralFire")a.type="ASTRAL_FIRE";else if(a.type.toString()==="UmbralIce")a.type="UMBRAL_ICE";else if(a.type.toString()==="UmbralHeart")a.type="UMBRAL_HEART";else{let s=Object.keys(Ke).find(c=>Ke[c].name===a.type);s||(s=Object.keys(Gs).find(c=>Gs[c].name===a.type)),s&&(a.type=s)}return new NS(a)}),this.legacy_casterTax=(t==null?void 0:t.casterTax)??0,this.tenacity=(t==null?void 0:t.tenacity)??420,this.main=(t==null?void 0:t.main)??ti,this.wd=(t==null?void 0:t.wd)??BO}adjustedOvertimePotency(t,n){return Dt.overtimePotency(this.level,n==="sks"?this.skillSpeed:n==="sps"?this.spellSpeed:Dt.getSubstatBase(this.level),t)}adjustedGCD(t=2.5,n){return this.shellVersion>=qo.AllaganGcdFormula?Dt.preTaxGcd(this.level,this.spellSpeed,t,n):Dt.preTaxGcdLegacy(this.level,this.spellSpeed,t,n)}adjustedSksGCD(t=2.5,n){return this.shellVersion>=qo.AllaganGcdFormula?Dt.preTaxGcd(this.level,this.skillSpeed,t,n):Dt.preTaxGcdLegacy(this.level,this.skillSpeed,t,n)}adjustedCastTime(t,n){return Dt.preTaxCastTime(this.level,this.spellSpeed,t,n)}adjustedSksCastTime(t,n){return Dt.preTaxCastTime(this.level,this.skillSpeed,t,n)}getAfterTaxGCD(t){return this.shellVersion<qo.FpsTax?t:Dt.afterFpsTax(this.fps,t)+this.gcdSkillCorrection}getAfterTaxCastTime(t){return this.shellVersion<qo.FpsTax?this.legacy_casterTax+t:Dt.afterFpsTax(this.fps,t)+Dt.afterFpsTax(this.fps,xk)+this.gcdSkillCorrection}static getSlidecastWindow(t){return .5}get critRate(){return Dt.criticalHitRate(this.level,this.criticalHit)}getOverrideStacks(t){var n;return(n=this.initialResourceOverrides.find(a=>a.type===t))==null?void 0:n.stacks}savePartialConfig(){const t={};Object.keys(nE[this.job]).forEach(n=>{t[n]=this[n]}),Ct(`defaultPartialConfig: ${this.job}`,JSON.stringify(t))}serialized(){return{job:this.job,shellVersion:this.shellVersion,level:this.level,wd:this.wd,main:this.main,spellSpeed:this.spellSpeed,skillSpeed:this.skillSpeed,criticalHit:this.criticalHit,directHit:this.directHit,determination:this.determination,piety:this.piety,tenacity:this.tenacity,countdown:this.countdown,randomSeed:this.randomSeed,casterTax:this.legacy_casterTax,fps:this.fps,gcdSkillCorrection:this.gcdSkillCorrection,animationLock:this.animationLock,timeTillFirstManaTick:this.timeTillFirstManaTick,procMode:this.procMode,initialResourceOverrides:this.initialResourceOverrides.map(t=>t.serialized())}}}function t2(e){var n,a;const t=Nt();return l.jsx("div",{style:{top:1+(((n=e.offset)==null?void 0:n.y)??0),left:((a=e.offset)==null?void 0:a.x)??0,marginRight:8,position:"relative",width:16,height:16,borderRadius:8,display:"inline-block",border:"1px solid "+t.bgHighContrast,verticalAlign:"top"},children:e.color&&l.jsx("div",{style:{backgroundColor:`${e.color}`,position:"absolute",top:2,bottom:2,left:2,right:2,borderRadius:"inherit"}})})}function n2(e){var c,d;const t=Nt(),n=e.heightPx??30,a=e.widthPx??24;let s;return e.imgUrl?s=l.jsx("img",{src:e.imgUrl,alt:"resource img",style:{display:"block",margin:"2px auto",maxWidth:n-4,maxHeight:a-4}}):e.color&&(s=l.jsx("div",{style:{backgroundColor:e.color,position:"absolute",top:3,bottom:3,left:3,right:3}})),l.jsx("div",{style:{display:"inline-block",position:"relative",top:((c=e.offset)==null?void 0:c.y)??0,left:((d=e.offset)==null?void 0:d.x)??0,width:n,height:a,border:"1px solid "+t.bgHighContrast,marginRight:4},children:s})}function Sf(e={name:"placeholder",color:"#6cf",value:"0.34/1.00",progress:.34,width:100,hidden:!1}){return l.jsxs("div",{hidden:e.hidden,style:{marginBottom:4,lineHeight:"1.5em"},children:[l.jsx("div",{style:{display:"inline-block",height:"100%",width:108},children:e.name}),l.jsxs("div",{style:{width:200,display:"inline-block"},children:[l.jsx(UG,{backgroundColor:e.color,progress:e.progress,width:e.width,offsetY:4}),l.jsx("div",{style:{marginLeft:6,height:"100%",display:"inline-block"},children:e.value})]})]})}function lo(e){const t=e.containerType==="box"||e.items.some(a=>a.imgUrl!==void 0),n=e.items.map((a,s)=>e.containerType==="circle"&&a.imgUrl===void 0?l.jsx(t2,{color:a.color,offset:t?{x:0,y:3}:void 0},s):l.jsx(n2,{color:a.color,imgUrl:a.imgUrl,offset:t?{x:-2,y:0}:void 0,heightPx:a.boxHeightPx,widthPx:a.boxWidthPx},s));return t?l.jsxs("div",{style:{marginBottom:4},children:[l.jsx("div",{style:{display:"inline-block",position:"relative",verticalAlign:"top",top:6,width:108},children:e.name}),l.jsx("div",{style:{display:"inline-block"},children:n}),e.label?l.jsx("div",{style:{marginLeft:6,display:"inline-block",position:"relative",verticalAlign:"top",top:6},children:e.label}):void 0]}):l.jsxs("div",{style:{marginBottom:4,lineHeight:"1.5em"},children:[l.jsx("div",{style:{display:"inline-block",height:"100%",width:108},children:e.name}),l.jsxs("div",{style:{width:200,display:"inline-block"},children:[l.jsx("div",{style:{display:"inline-block"},children:n}),e.label?l.jsx("div",{style:{marginLeft:6,height:"100%",display:"inline-block"},children:e.label}):void 0]})]})}function LC(e){return l.jsxs("div",{className:e.className,style:{marginBottom:4,lineHeight:"1.5em"},children:[l.jsx("div",{style:{display:"inline-block",height:"100%",width:108},children:e.name}),l.jsx("div",{style:{width:200,display:"inline-block"},children:l.jsx("div",{style:{display:"inline-block",marginLeft:6,color:e.color},children:e.text})})]})}const $s=new Map;function qt(e,t){$s.set(e,`Buffs/${t}`);const n=Ke[e].maximumStacks??1;for(let a=2;a<=n;a++)$s.set(e+a,`Buffs/${t.replace(Ke[e].name,Ke[e].name+a)}`)}Object.keys(Gb).forEach(e=>{const t=Ke[e].name;$s.set(e,`Buffs/Role/${t}.png`)});Object.keys(Pb).forEach(e=>$s.set(e,"Buffs/Role/Tank Limit Break.png"));$s.set("SPRINT","Buffs/General/Sprint.png");$s.set("TINCTURE","Buffs/General/Tincture.png");function i2(e){let t=e.rscType;e.stacks>1&&(t+=e.stacks);let n;e.rscType==="AUTOS_ENGAGED"||e.rscType==="REAR_POSITIONAL"||e.rscType==="FLANK_POSITIONAL"?n={height:40}:n={height:40};const a=Ke[e.rscType].mayNotBeCanceled,s={display:"inline-block",verticalAlign:"top",filter:e.enabled?"none":"grayScale(100%)"},c=l.jsx("img",{style:n,src:"assets/"+$s.get(t),alt:e.rscType});return l.jsxs("div",{title:Qe(e.rscType),className:e.className+" buff "+e.rscType,children:[a?l.jsx("div",{style:s,children:c}):l.jsx(Zs,{content:c,style:s,onClickFn:()=>{(e.onSelf||e.targetNumber!==void 0)&&(p.requestToggleBuff(e.rscType,!0,e.targetNumber),p.updateStatusDisplay(p.game),p.updateSkillButtons(p.game),p.autoSave(),wn())}}),l.jsx("span",{className:"buff-label",style:{visibility:e.timeRemaining===void 0?"hidden":void 0},children:(e.timeRemaining??"0.000")+(e.targetNumber!==void 0?` ( ${e.targetNumber})`:"")})]})}function iE(e){const t=e.data,n=[];for(let s=0;s<t.length;s++)n.push(l.jsx(i2,{...t[s]},s));let a={height:54,textAlign:"right",lineHeight:"1em"};return e.style&&(a={...a,...e.style}),l.jsx("div",{style:a,children:n})}function FO(e){const t=Nt(),n=e.data,a=l.jsx(Sf,{name:"GCD",color:t.resources.gcdBar,progress:n.gcdReady?0:1-n.timeTillGCDReady/n.gcd,value:n.timeTillGCDReady.toFixed(3),width:100,hidden:n.gcdReady}),s=l.jsx(Sf,{name:"casting/taxed",color:n.canMove?t.resources.gcdBar:t.resources.lockBar,progress:n.castLocked?1-n.castLockCountdown/n.castLockTotalDuration:0,value:n.castLockCountdown.toFixed(3),width:100,hidden:!n.castLocked}),c=l.jsx(Sf,{name:"using skill",color:t.resources.lockBar,progress:n.animLocked?1-n.animLockCountdown/n.animLockTotalDuration:0,value:n.animLockCountdown.toFixed(3),width:100,hidden:!n.animLocked});return l.jsxs("div",{style:{position:"absolute"},children:[a,s,c]})}function jO(e){const t=e.data.resources.map((a,s)=>{switch(a.kind){case"bar":return l.jsx(Sf,{name:a.name,color:a.color,progress:a.progress,value:a.valueString,width:a.widthPx??100,hidden:a.hidden??!1},"resourceDisplay"+s);case"counter":{const c=[];for(let d=0;d<a.maxStacks;d++)c.push({color:d<a.currentStacks?a.color:void 0});return l.jsx(lo,{containerType:"circle",name:a.name,label:a.valueString??`${a.currentStacks}/${a.maxStacks}`,items:c},"resourceDisplay"+s)}case"paint":{const c=[];for(let f=0;f<a.maxStacks;f++){const h=a.hasComet&&f===a.currentStacks-1?a.cometColor:a.holyColor;c.push({color:f<a.currentStacks?h:void 0,imgUrl:void 0})}const d=`${a.currentStacks}/${a.maxStacks}`;return l.jsx(lo,{containerType:"circle",name:a.name,label:d,items:c},"resourceDisplay"+s)}case"dance":{const c=a.currentStacks,d=[a.emboiteColor,a.entrechatColor,a.jeteColor,a.pirouetteColor],f=[];for(let m=0;m<a.maxStacks;m++)f.push({color:m<c?d[m]:void 0});const h=`${c}/${a.maxStacks}`;return l.jsx(lo,{containerType:"circle",name:a.name,label:h,items:f},"resourceDisplay"+s)}case"sen":{const c=[{present:a.hasSetsu,color:a.setsuColor,name:"setsu"},{present:a.hasGetsu,color:a.getsuColor,name:"getsu"},{present:a.hasKa,color:a.kaColor,name:"ka"}],d=l.jsx(qe,{topic:"senExplanation",content:N({en:"from left to right: setsu (yukikaze), getsu (gekko/mangetsu), ka (kasha/oka)",zh:"//"})});return l.jsx(lo,{name:l.jsxs(l.Fragment,{children:[a.name," ",d]}),label:c.filter(f=>f.present).map(f=>f.name).join("+"),containerType:"circle",items:c.map(f=>({color:f.present?f.color:void 0}))},"resourceDisplay"+s)}case"coda":{const c=[{present:a.hasWanderers,color:a.wanderersColor},{present:a.hasMages,color:a.magesColor},{present:a.hasArmys,color:a.armysColor}],d=l.jsx(qe,{topic:"codaExplanation",content:N({en:"from left to right: wanderer's coda, mage's coda, army's coda"})});return l.jsx(lo,{name:l.jsxs(l.Fragment,{children:[a.name," ",d]}),containerType:"circle",items:c.map(f=>({color:f.present?f.color:void 0}))},"resourceDisplay"+s)}case"attunement":{const c=[{gem:a.ruby,color:a.rubyColor},{gem:a.topaz,color:a.topazColor},{gem:a.emerald,color:a.emeraldColor}];return l.jsxs("div",{children:[l.jsx(lo,{name:a.aetherName,containerType:"circle",items:c.map(d=>({color:d.gem?d.color:void 0}))}),l.jsx(LC,{name:a.attunementName,text:a.attunementCount.toString()+(a.attunementCount>0?` | ${a.timeRemaining.toFixed(3)}`:"")})]},"resourceDisplay"+s)}case"nadi":return l.jsx("div",{children:l.jsx(lo,{name:a.name,label:a.label,containerType:"circle",items:[{color:a.lunar?a.lunarColor:void 0},{color:a.solar?a.solarColor:void 0}]})},"resourceDisplay"+s);case"beast":{const c=new Array(3).map(d=>({color:void 0}));return a.chakras.map((d,f)=>{c[f]={color:d==="opo"?a.opoColor:d==="raptor"?a.raptorColor:d==="coeurl"?a.coeurlColor:void 0}}),l.jsx("div",{children:l.jsx(lo,{name:a.name,label:a.label,containerType:"circle",items:c})},"resourceDisplay"+s)}case"chakra":{const c=a.value>a.wrapCount,d=c?a.value%a.wrapCount:a.value,f=new Array(a.wrapCount);for(let h=0;h<a.wrapCount;h++)f[h]={color:c?h+1>d?a.regularColor:a.overflowColor:h+1>d?void 0:a.regularColor};return l.jsx("div",{children:l.jsx(lo,{name:a.name,label:a.label,containerType:"circle",items:f})},"resourceDisplay"+s)}case"arcana":{const c=a.activeSlots.map((d,f)=>{const h=f===a.activeSlots.length-1?18:20,m=f===a.activeSlots.length-1?16:20;return{color:d?a.currentArcanaColor:void 0,boxHeightPx:h,boxWidthPx:m}});return l.jsx("div",{children:l.jsx(lo,{name:a.name,containerType:"box",items:c})},"resourceDisplay"+s)}default:return l.jsx(LC,{name:a.name,text:a.text,color:a.color},"resourceDisplay"+s)}});let n={textAlign:"left",minHeight:"13.5em"};return e.style&&(n={...n,...e.style}),l.jsx("div",{style:n,children:t})}let zO=(e,t)=>{};class YO extends _i.Component{constructor(n){super(n);re(this,"state");this.state={time:0,resources:[],enemyBuffs:[],selfBuffs:[],level:100,layoutFn:a=>l.jsx("div",{})},zO=(a,s)=>{const c=a(Ni(this.context));this.setState({layoutFn:s,...c})}}componentDidMount(){p.updateStatusDisplay(p.game)}render(){return l.jsxs("div",{style:{position:"relative",textAlign:"left",margin:"8px 0"},children:[l.jsx("div",{style:{position:"absolute",top:-8,right:0,zIndex:1},children:l.jsx(qe,{topic:"mainControlRegion",content:l.jsx("div",{className:"toolTip",children:N({en:l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"paragraph",children:[l.jsx("span",{style:{color:"lightgray"},children:"grey"})," border: not focused"]}),l.jsxs("div",{className:"paragraph",children:[l.jsx("b",{style:{color:"mediumpurple"},children:"purple"})," border: up-to-date, receiving input"]}),l.jsxs("div",{className:"paragraph",children:[l.jsx("b",{style:{color:"mediumseagreen"},children:"green"})," border: real-time"]}),l.jsxs("div",{className:"paragraph",children:[l.jsx("b",{style:{color:"darkorange"},children:"orange"})," border: viewing historical state, receiving input"]})]}),zh:l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"paragraph",children:[l.jsx("span",{style:{color:"lightgray"},children:""}),""]}),l.jsxs("div",{className:"paragraph",children:[l.jsx("b",{style:{color:"mediumpurple"},children:""}),""]}),l.jsxs("div",{className:"paragraph",children:[l.jsx("b",{style:{color:"mediumseagreen"},children:""}),""]}),l.jsxs("div",{className:"paragraph",children:[l.jsx("b",{style:{color:"darkorange"},children:""}),""]})]}),ja:l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"paragraph",children:[l.jsx("span",{style:{color:"lightgray"},children:""})," : "]}),l.jsxs("div",{className:"paragraph",children:[l.jsx("b",{style:{color:"mediumpurple"},children:""})," : "]}),l.jsxs("div",{className:"paragraph",children:[l.jsx("b",{style:{color:"mediumseagreen"},children:""})," : "]}),l.jsxs("div",{className:"paragraph",children:[l.jsx("b",{style:{color:"darkorange"},children:""})," : "]})]})})})})}),this.state.layoutFn(this.state)]})}}re(YO,"contextType",yn);class en{constructor(t){re(this,"state");this.state=t}makeCommonTimer(t,n=!0){const a=this.state.resources.timeTillReady(t),s=this.state.resources.get(t);return{rscType:t,onSelf:n,enabled:s.enabled,stacks:s.availableAmount(),timeRemaining:a.toFixed(3),className:s.availableAmountIncludingDisabled()>0?"":"hidden"}}makeTargetedTimers(t){return Array(ja).fill(0).map((n,a)=>{const s=a+1,c=this.state.debuffs.timeTillExpiry(t,s),d=this.state.debuffs.get(t,s);return{rscType:t,onSelf:!1,targetNumber:s,enabled:d.enabled,stacks:d.availableAmount(),timeRemaining:c.toFixed(3),className:d.availableAmountIncludingDisabled()>0?"":"hidden"}})}makeToggleableTimer(t,n=!0){const a=this.state.resources.timeTillReady(t),s=this.state.resources.get(t);return{rscType:t,onSelf:n,enabled:s.enabled,stacks:s.availableAmount(),timeRemaining:a.toFixed(3),className:s.availableAmountIncludingDisabled()>0?"":"hidden"}}makeCommonTimerless(t,n=!0){return{rscType:t,onSelf:n,enabled:!0,stacks:this.state.resources.get(t).availableAmount(),className:this.state.hasResourceAvailable(t)?"":"hidden"}}makeToggleableTimerless(t,n=!0){const a=this.state.resources.get(t);return{rscType:t,onSelf:n,enabled:a.enabled,stacks:a.availableAmount(),className:a.availableAmountIncludingDisabled()>0?"":"hidden"}}jobSpecificOtherTargetedBuffViewProps(){return[]}getAllOtherTargetedBuffViewProps(){const t=this.state.job,n=[];return mt[t].role==="TANK"&&n.push(this.makeCommonTimer("REPRISAL",!1)),mt[t].role==="MELEE"&&n.push(this.makeCommonTimer("FEINT",!1)),mt[t].role==="CASTER"&&n.push(this.makeCommonTimer("ADDLE",!1)),[...this.jobSpecificOtherTargetedBuffViewProps(),...n]}jobSpecificSelfTargetedBuffViewProps(){return[]}getAllSelfTargetedBuffViewProps(){const t=this.state.job,n=this.state.resources,a=[];if(mt[t].role==="TANK"){a.push(...["RAMPART","SHIELD_WALL","STRONGHOLD"].map(c=>this.makeCommonTimer(c)));const s=mt[t].limitBreakBuff??"UNKNOWN";s&&a.push(this.makeCommonTimer(s))}return mt[t].role==="MELEE"&&a.push(...["TRUE_NORTH","BLOODBATH"].map(s=>this.makeCommonTimer(s))),["TANK","MELEE","RANGED"].includes(mt[t].role)&&a.push(this.makeCommonTimer("ARMS_LENGTH")),["HEALER","CASTER"].includes(mt[t].role)&&a.push(...["SWIFTCAST","LUCID_DREAMING","SURECAST"].map(s=>this.makeCommonTimer(s))),a.push(this.makeCommonTimer("TINCTURE"),this.makeCommonTimer("SPRINT")),mt[t].role==="MELEE"&&a.push(...["REAR_POSITIONAL","FLANK_POSITIONAL"].map(s=>({rscType:s,onSelf:!0,enabled:n.get(s).enabled,stacks:1,className:""}))),(mt[t].role==="TANK"||mt[t].role==="MELEE")&&a.push(...["AUTOS_ENGAGED"].map(s=>({rscType:s,onSelf:!0,enabled:n.get(s).available(1),stacks:1,className:""}))),[...this.jobSpecificSelfTargetedBuffViewProps(),...a]}jobSpecificResourceViewProps(t){return[]}getAllResourceViewProps(t){if(!mt[this.state.job].usesMp)return this.jobSpecificResourceViewProps(t);const n=this.state.resources,a=n.timeTillReady("MANA"),s=n.get("MANA").availableAmount();return[{kind:"bar",name:"MP",color:t.resources.mana,progress:s/1e4,valueString:Math.floor(s)+"/10000"},{kind:"bar",name:N({en:"MP tick",zh:"",ja:"MP"}),color:t.resources.manaTick,progress:1-a/3,valueString:(3-a).toFixed(3)+"/3"},...this.jobSpecificResourceViewProps(t)]}statusLayoutFn(t){return l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:{display:"inline-block",verticalAlign:"top",width:"50%",height:"100%"},children:[l.jsxs("span",{style:{display:"block",marginBottom:10},children:[N({en:"time: ",zh:"",ja:""}),`${tt.displayTime(t.time,3)} (${t.time.toFixed(3)})`]}),t.resources?l.jsx(jO,{data:{level:t.level,resources:t.resources}}):void 0]}),l.jsxs("div",{style:{position:"relative",display:"inline-block",float:"right",width:"50%"},children:[t.resourceLocks?l.jsx(FO,{data:t.resourceLocks}):void 0,l.jsx(iE,{data:t.enemyBuffs,style:{marginBottom:"3em"}}),l.jsx(iE,{data:t.selfBuffs})]})]})}}var gf={exports:{}},a2=gf.exports,xC;function o2(){return xC||(xC=1,function(e){(function(t,n,a){function s(h){var m=this,R=f();m.next=function(){var T=2091639*m.s0+m.c*23283064365386963e-26;return m.s0=m.s1,m.s1=m.s2,m.s2=T-(m.c=T|0)},m.c=1,m.s0=R(" "),m.s1=R(" "),m.s2=R(" "),m.s0-=R(h),m.s0<0&&(m.s0+=1),m.s1-=R(h),m.s1<0&&(m.s1+=1),m.s2-=R(h),m.s2<0&&(m.s2+=1),R=null}function c(h,m){return m.c=h.c,m.s0=h.s0,m.s1=h.s1,m.s2=h.s2,m}function d(h,m){var R=new s(h),T=m&&m.state,S=R.next;return S.int32=function(){return R.next()*4294967296|0},S.double=function(){return S()+(S()*2097152|0)*11102230246251565e-32},S.quick=S,T&&(typeof T=="object"&&c(T,R),S.state=function(){return c(R,{})}),S}function f(){var h=4022871197,m=function(R){R=String(R);for(var T=0;T<R.length;T++){h+=R.charCodeAt(T);var S=.02519603282416938*h;h=S>>>0,S-=h,S*=h,h=S>>>0,S-=h,h+=S*4294967296}return(h>>>0)*23283064365386963e-26};return m}n&&n.exports?n.exports=d:this.alea=d})(a2,e)}(gf)),gf.exports}var If={exports:{}},l2=If.exports,HC;function s2(){return HC||(HC=1,function(e){(function(t,n,a){function s(f){var h=this,m="";h.x=0,h.y=0,h.z=0,h.w=0,h.next=function(){var T=h.x^h.x<<11;return h.x=h.y,h.y=h.z,h.z=h.w,h.w^=h.w>>>19^T^T>>>8},f===(f|0)?h.x=f:m+=f;for(var R=0;R<m.length+64;R++)h.x^=m.charCodeAt(R)|0,h.next()}function c(f,h){return h.x=f.x,h.y=f.y,h.z=f.z,h.w=f.w,h}function d(f,h){var m=new s(f),R=h&&h.state,T=function(){return(m.next()>>>0)/4294967296};return T.double=function(){do var S=m.next()>>>11,g=(m.next()>>>0)/4294967296,_=(S+g)/(1<<21);while(_===0);return _},T.int32=m.next,T.quick=T,R&&(typeof R=="object"&&c(R,m),T.state=function(){return c(m,{})}),T}n&&n.exports?n.exports=d:this.xor128=d})(l2,e)}(If)),If.exports}var _f={exports:{}},r2=_f.exports,kC;function c2(){return kC||(kC=1,function(e){(function(t,n,a){function s(f){var h=this,m="";h.next=function(){var T=h.x^h.x>>>2;return h.x=h.y,h.y=h.z,h.z=h.w,h.w=h.v,(h.d=h.d+362437|0)+(h.v=h.v^h.v<<4^(T^T<<1))|0},h.x=0,h.y=0,h.z=0,h.w=0,h.v=0,f===(f|0)?h.x=f:m+=f;for(var R=0;R<m.length+64;R++)h.x^=m.charCodeAt(R)|0,R==m.length&&(h.d=h.x<<10^h.x>>>4),h.next()}function c(f,h){return h.x=f.x,h.y=f.y,h.z=f.z,h.w=f.w,h.v=f.v,h.d=f.d,h}function d(f,h){var m=new s(f),R=h&&h.state,T=function(){return(m.next()>>>0)/4294967296};return T.double=function(){do var S=m.next()>>>11,g=(m.next()>>>0)/4294967296,_=(S+g)/(1<<21);while(_===0);return _},T.int32=m.next,T.quick=T,R&&(typeof R=="object"&&c(R,m),T.state=function(){return c(m,{})}),T}n&&n.exports?n.exports=d:this.xorwow=d})(r2,e)}(_f)),_f.exports}var pf={exports:{}},u2=pf.exports,UC;function d2(){return UC||(UC=1,function(e){(function(t,n,a){function s(f){var h=this;h.next=function(){var R=h.x,T=h.i,S,g;return S=R[T],S^=S>>>7,g=S^S<<24,S=R[T+1&7],g^=S^S>>>10,S=R[T+3&7],g^=S^S>>>3,S=R[T+4&7],g^=S^S<<7,S=R[T+7&7],S=S^S<<13,g^=S^S<<9,R[T]=g,h.i=T+1&7,g};function m(R,T){var S,g=[];if(T===(T|0))g[0]=T;else for(T=""+T,S=0;S<T.length;++S)g[S&7]=g[S&7]<<15^T.charCodeAt(S)+g[S+1&7]<<13;for(;g.length<8;)g.push(0);for(S=0;S<8&&g[S]===0;++S);for(S==8?g[7]=-1:g[S],R.x=g,R.i=0,S=256;S>0;--S)R.next()}m(h,f)}function c(f,h){return h.x=f.x.slice(),h.i=f.i,h}function d(f,h){f==null&&(f=+new Date);var m=new s(f),R=h&&h.state,T=function(){return(m.next()>>>0)/4294967296};return T.double=function(){do var S=m.next()>>>11,g=(m.next()>>>0)/4294967296,_=(S+g)/(1<<21);while(_===0);return _},T.int32=m.next,T.quick=T,R&&(R.x&&c(R,m),T.state=function(){return c(m,{})}),T}n&&n.exports?n.exports=d:this.xorshift7=d})(u2,e)}(pf)),pf.exports}var Nf={exports:{}},h2=Nf.exports,wC;function f2(){return wC||(wC=1,function(e){(function(t,n,a){function s(f){var h=this;h.next=function(){var R=h.w,T=h.X,S=h.i,g,_;return h.w=R=R+1640531527|0,_=T[S+34&127],g=T[S=S+1&127],_^=_<<13,g^=g<<17,_^=_>>>15,g^=g>>>12,_=T[S]=_^g,h.i=S,_+(R^R>>>16)|0};function m(R,T){var S,g,_,I,D,O=[],x=128;for(T===(T|0)?(g=T,T=null):(T=T+"\0",g=0,x=Math.max(x,T.length)),_=0,I=-32;I<x;++I)T&&(g^=T.charCodeAt((I+32)%T.length)),I===0&&(D=g),g^=g<<10,g^=g>>>15,g^=g<<4,g^=g>>>13,I>=0&&(D=D+1640531527|0,S=O[I&127]^=g+D,_=S==0?_+1:0);for(_>=128&&(O[(T&&T.length||0)&127]=-1),_=127,I=4*128;I>0;--I)g=O[_+34&127],S=O[_=_+1&127],g^=g<<13,S^=S<<17,g^=g>>>15,S^=S>>>12,O[_]=g^S;R.w=D,R.X=O,R.i=_}m(h,f)}function c(f,h){return h.i=f.i,h.w=f.w,h.X=f.X.slice(),h}function d(f,h){f==null&&(f=+new Date);var m=new s(f),R=h&&h.state,T=function(){return(m.next()>>>0)/4294967296};return T.double=function(){do var S=m.next()>>>11,g=(m.next()>>>0)/4294967296,_=(S+g)/(1<<21);while(_===0);return _},T.int32=m.next,T.quick=T,R&&(R.X&&c(R,m),T.state=function(){return c(m,{})}),T}n&&n.exports?n.exports=d:this.xor4096=d})(h2,e)}(Nf)),Nf.exports}var Cf={exports:{}},E2=Cf.exports,PC;function m2(){return PC||(PC=1,function(e){(function(t,n,a){function s(f){var h=this,m="";h.next=function(){var T=h.b,S=h.c,g=h.d,_=h.a;return T=T<<25^T>>>7^S,S=S-g|0,g=g<<24^g>>>8^_,_=_-T|0,h.b=T=T<<20^T>>>12^S,h.c=S=S-g|0,h.d=g<<16^S>>>16^_,h.a=_-T|0},h.a=0,h.b=0,h.c=-1640531527,h.d=1367130551,f===Math.floor(f)?(h.a=f/4294967296|0,h.b=f|0):m+=f;for(var R=0;R<m.length+20;R++)h.b^=m.charCodeAt(R)|0,h.next()}function c(f,h){return h.a=f.a,h.b=f.b,h.c=f.c,h.d=f.d,h}function d(f,h){var m=new s(f),R=h&&h.state,T=function(){return(m.next()>>>0)/4294967296};return T.double=function(){do var S=m.next()>>>11,g=(m.next()>>>0)/4294967296,_=(S+g)/(1<<21);while(_===0);return _},T.int32=m.next,T.quick=T,R&&(typeof R=="object"&&c(R,m),T.state=function(){return c(m,{})}),T}n&&n.exports?n.exports=d:this.tychei=d})(E2,e)}(Cf)),Cf.exports}var bf={exports:{}};const A2={},R2=Object.freeze(Object.defineProperty({__proto__:null,default:A2},Symbol.toStringTag,{value:"Module"})),T2=T1(R2);var S2=bf.exports,GC;function g2(){return GC||(GC=1,function(e){(function(t,n,a){var s=256,c=6,d=52,f="random",h=a.pow(s,c),m=a.pow(2,d),R=m*2,T=s-1,S;function g(H,G,P){var L=[];G=G==!0?{entropy:!0}:G||{};var j=O(D(G.entropy?[H,k(n)]:H??x(),3),L),Z=new _(L),J=function(){for(var se=Z.g(c),X=h,Ae=0;se<m;)se=(se+Ae)*s,X*=s,Ae=Z.g(1);for(;se>=R;)se/=2,X/=2,Ae>>>=1;return(se+Ae)/X};return J.int32=function(){return Z.g(4)|0},J.quick=function(){return Z.g(4)/4294967296},J.double=J,O(k(Z.S),n),(G.pass||P||function(se,X,Ae,W){return W&&(W.S&&I(W,Z),se.state=function(){return I(Z,{})}),Ae?(a[f]=se,X):se})(J,j,"global"in G?G.global:this==a,G.state)}function _(H){var G,P=H.length,L=this,j=0,Z=L.i=L.j=0,J=L.S=[];for(P||(H=[P++]);j<s;)J[j]=j++;for(j=0;j<s;j++)J[j]=J[Z=T&Z+H[j%P]+(G=J[j])],J[Z]=G;(L.g=function(se){for(var X,Ae=0,W=L.i,ee=L.j,M=L.S;se--;)X=M[W=T&W+1],Ae=Ae*s+M[T&(M[W]=M[ee=T&ee+X])+(M[ee]=X)];return L.i=W,L.j=ee,Ae})(s)}function I(H,G){return G.i=H.i,G.j=H.j,G.S=H.S.slice(),G}function D(H,G){var P=[],L=typeof H,j;if(G&&L=="object")for(j in H)try{P.push(D(H[j],G-1))}catch{}return P.length?P:L=="string"?H:H+"\0"}function O(H,G){for(var P=H+"",L,j=0;j<P.length;)G[T&j]=T&(L^=G[T&j]*19)+P.charCodeAt(j++);return k(G)}function x(){try{var H;return S&&(H=S.randomBytes)?H=H(s):(H=new Uint8Array(s),(t.crypto||t.msCrypto).getRandomValues(H)),k(H)}catch{var G=t.navigator,P=G&&G.plugins;return[+new Date,t,P,t.screen,k(n)]}}function k(H){return String.fromCharCode.apply(0,H)}if(O(a.random(),n),e.exports){e.exports=g;try{S=T2}catch{}}else a["seed"+f]=g})(typeof self<"u"?self:S2,[],Math)}(bf)),bf.exports}var $R,BC;function I2(){if(BC)return $R;BC=1;var e=o2(),t=s2(),n=c2(),a=d2(),s=f2(),c=m2(),d=g2();return d.alea=e,d.xor128=t,d.xorwow=n,d.xorshift7=a,d.xor4096=s,d.tychei=c,$R=d,$R}var _2=I2();const FC=QT(_2);var bc,Oc,Rd,Td,RE,KO;class tn{constructor(t){Fe(this,RE);re(this,"config");re(this,"rng");re(this,"nonProcRng");re(this,"lucidTickOffset");re(this,"dotTickOffset");re(this,"hotTickOffset");re(this,"time");re(this,"resources");re(this,"debuffs");re(this,"cooldowns");re(this,"eventsQueue");re(this,"skillsList");re(this,"displayedSkills");re(this,"autoAttackDelay");re(this,"overTimeEffectGroups",[]);re(this,"dotResources",[]);re(this,"hotResources",[]);re(this,"excludedDoTs",[]);re(this,"excludedHoTs",[]);re(this,"fullTimeDoTs",[]);Fe(this,bc,[]);Fe(this,Oc,[]);re(this,"dotSkills",[]);re(this,"petSkills",[]);re(this,"hotSkills",[]);Fe(this,Rd,new Map);Fe(this,Td,new Map);re(this,"autoStartTimes");re(this,"autoStopTimes");this.config=t,this.rng=FC(t.randomSeed),this.nonProcRng=FC(t.randomSeed+"_nonProcs"),this.lucidTickOffset=this.nonProcRng()*3,this.dotTickOffset=this.nonProcRng()*3,this.hotTickOffset=this.nonProcRng()*3,this.time=0,this.resources=new Zk(this),this.debuffs=new $k(this),this.cooldowns=new qk(this),Ao(this.job).forEach((a,s)=>{a.isCoolDown?this.cooldowns.set(new ze(s,a.cdPerStack,a.maxStacks,a.maxStacks)):Ke[s].specialDebuff?this.debuffs.initialize(s):this.resources.set(new On(s,a.maxValue,a.defaultValue,a.warnOnOvercap))});let n=2.5;switch(mt[this.job].role){case"TANK":case"MELEE":case"RANGED":n=t.adjustedSksGCD();break;case"HEALER":case"CASTER":n=t.adjustedGCD();break}this.cooldowns.set(new ze("cd_GCD",t.getAfterTaxGCD(n),1,1)),this.resources.set(new On("MOVEMENT",1,1)),this.resources.set(new On("NOT_ANIMATION_LOCKED",1,1)),this.resources.set(new On("NOT_CASTER_TAXED",1,1)),this.resources.set(new On("IN_COMBAT",1,0)),this.cooldowns.set(new ze("NEVER",0,0,0)),this.eventsQueue=[],this.skillsList=new tU(this),this.displayedSkills=new nU(this.job,t.level),this.autoAttackDelay=2.5,this.autoStartTimes=[],this.autoStopTimes=[]}get statusPropsGenerator(){return new en(this)}get job(){return this.config.job}get partySize(){return this.resources.get("PARTY_SIZE").availableAmount()}registerRecurringEvents(t=[],n=[]){const a=this;{const f=()=>{const h=this.resources.get("MANA"),m=this.captureManaRegenAmount();h.gain(m);const R=h.availableAmount();p.reportManaTick(a.time,"+"+m+" (MP="+R+")"),this.resources.addResourceEvent({rscType:"MANA",name:"mana tick",delay:3,fnOnRsc:T=>{f()},tags:[Ti.MpTick,Ti.ManaGain]})};this.resources.addResourceEvent({rscType:"MANA",name:"initial mana tick",delay:this.config.timeTillFirstManaTick,fnOnRsc:f,tags:[Ti.MpTick,Ti.ManaGain]})}const s=()=>{const f=this.resources.get("LUCID_DREAMING");if(f.available(1)&&(f.tickCount++,!(this.job==="BLM"&&this.hasResourceAvailable("ASTRAL_FIRE")))){const m=this.resources.get("MANA");m.gain(550);let R="+550";if(console.assert(f.node!==void 0),f.node){let T="??";f.node.tmp_startLockTime&&(T=(f.node.tmp_startLockTime-this.config.countdown).toFixed(3)),R+=" {skill}@"+T,R+=" ("+f.tickCount+"/7)"}R+=" (MP="+m.availableAmount()+")",p.reportLucidTick(this.time,R)}const h=new xe("lucid tick",3,()=>{s()});h.addTag(Ti.LucidTick),f.available(1)&&f.pendingChange&&f.pendingChange.timeTillEvent>=3&&h.addTag(Ti.ManaGain),this.addEvent(h)};if([...va,...Ma].includes(this.job)){let f=this.config.timeTillFirstManaTick+this.lucidTickOffset;for(;f>3;)f-=3;const h=new xe("initial lucid tick",f,s);h.addTag(Ti.LucidTick),this.addEvent(h)}const c=()=>{this.dotResources.filter(f=>!this.excludedDoTs.includes(f)).forEach(f=>this.handleDoTTick(f)),this.getDisplayTime()>=0&&p.reportDotTick(this.time),this.addEvent(new xe("DoT tick",3,()=>{c()}))},d=()=>{this.hotResources.filter(f=>!this.excludedHoTs.includes(f)).forEach(f=>this.handleHoTTick(f)),this.getDisplayTime()>=0&&p.reportHotTick(this.time),this.addEvent(new xe("HoT tick",3,()=>{d()}))};if(t.forEach(f=>{f.groupedEffects.forEach(h=>{let m=this.dotResources,R=te(this,bc),T=te(this,Rd),S=this.excludedDoTs;f.isHealing&&(m=this.hotResources,R=te(this,Oc),T=te(this,Td),S=this.excludedHoTs),m.includes(h.effectName)?console.assert(!1,`${h.effectName} was registered as an over time effect multiple times for ${this.job}`):(!h.isGroundTargeted&&!f.isHealing&&this.debuffs.initialize(h.effectName),m.push(h.effectName),h.appliedBy.forEach(g=>{!f.isHealing&&!this.dotSkills.includes(g)&&this.dotSkills.push(g),f.isHealing&&!this.hotSkills.includes(g)&&this.hotSkills.push(g)}),T.set(h.effectName,f.groupedEffects.filter(g=>g!==h).map(g=>g.effectName)),h.isGroundTargeted&&!R.includes(h.effectName)&&R.push(h.effectName),h.exclude&&!S.includes(h.effectName)&&S.push(h.effectName),!f.isHealing&&f.reportName&&!this.fullTimeDoTs.includes(h.effectName)&&this.fullTimeDoTs.push(h.effectName))})}),n.forEach(f=>{this.dotSkills.push(f),f!=="WILDFIRE"&&this.petSkills.push(f)}),this.overTimeEffectGroups=t,this.dotResources.filter(f=>!this.excludedDoTs.includes(f)).length>0){let f=this.config.timeTillFirstManaTick+this.dotTickOffset;for(;f>3;)f-=3;this.addEvent(new xe("initial DoT tick",f,c))}if(this.hotResources.filter(f=>!this.excludedHoTs.includes(f)).length>0){let f=this.config.timeTillFirstManaTick+this.hotTickOffset;for(;f>3;)f-=3;this.addEvent(new xe("initial HoT tick",f,d))}this.jobSpecificRegisterRecurringEvents()}onResolveOverTimeTick(t,n){n==="damage"?this.jobSpecificOnResolveDotTick(t):this.jobSpecificOnResolveHotTick(t)}inherentSpeedModifier(){}jobSpecificRegisterRecurringEvents(){}jobSpecificOnResolveDotTick(t){}jobSpecificOnResolveHotTick(t){}jobSpecificAddDamageBuffCovers(t,n){}jobSpecificAddSpeedBuffCovers(t,n){}jobSpecificAddHealingBuffCovers(t,n){}maybeCancelChanneledSkills(t){const n=this.skillsList.get(t);n&&(n.animationLockFn(this)<=si||this.cancelChanneledSkills())}cancelChanneledSkills(){}jobSpecificOnAutoAttack(){}onAutoAttack(){this.jobSpecificOnAutoAttack()}getStatusDuration(t){return jt(this.job,t).maxTimeout}gainDebuff(t,n){n.forEach(a=>{const s=this.debuffs.get(t,a),c=jt(this.job,t);s.availableAmountIncludingDisabled()>0?s.overrideTimer(this,c.maxTimeout):(s.gain(1),this.debuffs.addDebuffEvent({rscType:t,targetNumber:a,name:`drop ${t} on target ${a}`,delay:c.maxTimeout,fnOnRsc:d=>d.consume(1)}))})}gainStatus(t,n=1){const a=this.resources.get(t),s=jt(this.job,t);this.hasResourceAvailable(t)?(s.warnOnOvercap&&n>=a.availableAmount()&&p.reportWarning({kind:"overcap",rsc:t}),s.maxTimeout>0&&a.overrideTimer(this,s.maxTimeout),a.availableAmount()!==n&&a.overrideCurrentValue(n)):(a.gain(n),s.maxTimeout>0&&this.enqueueResourceDrop(t))}maybeGainProc(t,n=.5,a=!1){this.triggersEffect(n,a)&&this.gainStatus(t)}triggersEffect(t,n=!1){if(this.config.procMode===Si.Never)return!1;const a=n?this.rng():void 0;return this.config.procMode===Si.Always?!0:(a??this.rng())<t}handleDoTTick(t){this.handleOverTimeTick(t,"damage")}handleHoTTick(t){this.handleOverTimeTick(t,"healing")}handleOverTimeTick(t,n){if(this.debuffs.hasAny(t)){for(let a=1;a<=ja;a++){const s=this.debuffs.get(t,a);s.availableAmountIncludingDisabled()>0&&s.node&&!s.enabled&&s.node.getOverTimePotencies(t,n)[s.tickCount].tryRemoveTarget(a)}for(let a=1;a<=ja;a++){const s=this.debuffs.get(t,a);if(s.availableAmountIncludingDisabled()>0){if(s.node&&s.enabled){const c=s.node.getOverTimePotencies(t,n)[s.tickCount];c!=null&&c.hasResolved()||p.resolveOverTimePotency(c,n),this.onResolveOverTimeTick(t,n)}s.tickCount++}else s.node&&(s.node.removeUnresolvedOvertimePotencies(n,a),s.node=void 0)}}else{const a=this.resources.get(t);if(a.availableAmountIncludingDisabled()>0){if(a.node&&a.enabled){const s=a.node.getOverTimePotencies(t,n)[a.tickCount];p.resolveOverTimePotency(s,n),this.onResolveOverTimeTick(t,n)}a.tickCount++}else a.node&&(a.node.removeUnresolvedOvertimePotencies(n),a.node=void 0)}}tick(t,n=()=>!1){let a=0;for(;a<t&&this.eventsQueue.length>0&&!n();){this.eventsQueue.sort((f,h)=>f.timeTillEvent-h.timeTillEvent);const s=Math.min(t-a,this.eventsQueue[0].timeTillEvent);a=Math.min(a+s,t),this.time+=s,this.cooldowns.tick(s);const c=[];for(let f=0;f<this.eventsQueue.length;f++)c.push(this.eventsQueue[f]);c.forEach(f=>{f.timeTillEvent-=s});let d=0;c.forEach(f=>{f.timeTillEvent<=_n.epsilon&&(f.canceled||f.effectFn(),d++)}),this.eventsQueue.splice(0,d)}return a}addEvent(t){this.eventsQueue.push(t)}getDisplayTime(){return this.time-this.config.countdown}captureManaRegenAmount(){return this.isInCombat()?this.job in pS?Dt.mpTick(this.config.level,this.config.piety):200:600}requestToggleBuff(t,n){if(this.debuffs.hasAny(t)){const s=this.debuffs.get(t,n??1);return s.available(1)?s.enabled=!1:s.enabled=!0,!0}if(t==="AUTOS_ENGAGED")return this.toggleAutosEngaged(),!0;const a=this.resources.get(t);if(Ke[t].mayBeToggled)return a.available(1)?(a.enabled=!1,!0):(a.enabled=!0,!0);if(Ke[t].mayNotBeCanceled)return!1;if(t==="MEDITATE"){const s=this.findNextQueuedEventByTag(Ti.MeditateTick);s&&(s.canceled=!0)}return t==="KARDIA"&&this.tryConsumeResource("KARDION"),(t==="TEN_CHI_JIN"||t==="MUDRA")&&(this.tryConsumeResource("MUDRA"),this.tryConsumeResource("KASSATSU"),this.resources.get("MUDRA_TRACKER").overrideCurrentValue(0),this.resources.get("BUNNY").overrideCurrentValue(0)),a.consume(a.availableAmount()),a.removeTimer(),!0}addRecurringAutoAttackEvent(t,n){const a=(s,c)=>{const d=new xe("aa tick",s,()=>{this.resources.get("AUTOS_ENGAGED").available(1)&&this.isInCombat()&&this.onAutoAttack(),this.addEvent(a(c,c))});return d.addTag(Ti.AutoTick),d};this.addEvent(a(t,n))}findAutoAttackTimerInQueue(){let t=-1;return this.eventsQueue.forEach(n=>{n.name==="aa tick"&&(t=n.timeTillEvent)}),t}startAutoAttackTimer(t,n,a){if(this.findAutoAttackTimerInQueue()!==-1)this.removeAutoAttackTimer();else if(this.resources.get("STORED_AUTO").available(1)){const f=new xe("stored auto",a||0,()=>{this.onAutoAttack()});this.addEvent(f)}this.tryConsumeResource("STORED_AUTO"),this.resources.get("AUTOS_ENGAGED").availableAmount()===0&&(this.resources.get("AUTOS_ENGAGED").gain(1),this.autoStartTimes.push(this.getDisplayTime()));const c=n||3;let d=0;t===-1?d=c:d=t??c,this.addRecurringAutoAttackEvent(d,c)}removeAutoAttackTimer(){let t=0;this.eventsQueue.forEach(n=>{n.name==="aa tick"&&this.eventsQueue.splice(t,1),t++})}toggleAutosEngaged(){const t=this.findAutoAttackTimerInQueue();if(this.resources.get("AUTOS_ENGAGED").availableAmount()===0)this.startAutoAttackTimer(t===-1?3:t);else if(this.resources.get("AUTOS_ENGAGED").consume(1),this.autoStopTimes.push(this.getDisplayTime()),t!==-1){this.removeAutoAttackTimer();const n=new xe("aa tick",t,()=>{this.resources.get("STORED_AUTO").available(0)&&this.resources.get("STORED_AUTO").gain(1)});this.addEvent(n)}}refreshAutoBasedOnSkill(t,n,a){const s=n!==0,c=this.resources.get("AUTOS_ENGAGED").available(1),d=this.autoAttackDelay,f=this.findAutoAttackTimerInQueue(),h=t.startsAuto;if(a){if(this.isInCombat()){if(s&&c){const m=n+(f===-1?d:f);this.startAutoAttackTimer(m,d,n)}else if(!s&&!c)h&&this.startAutoAttackTimer(f,d);else if(s&&!c){if(h){const m=n+(f===-1?d:f);this.startAutoAttackTimer(m,d,n)}else if(f>0){this.removeAutoAttackTimer();const m=new xe("aa tick",f+n,()=>{this.resources.get("STORED_AUTO").available(0)&&this.resources.get("STORED_AUTO").gain(1)});this.addEvent(m)}}}else if(h){const m=n+(f===-1?d:f);this.startAutoAttackTimer(m,d,n)}}else if(this.isInCombat()){if(s&&c){const m=this.findAutoAttackTimerInQueue(),R=n+(m===-1?d:m);this.startAutoAttackTimer(R)}else if(s&&!c&&f>0){this.removeAutoAttackTimer();const m=new xe("aa tick",f+n,()=>{this.resources.get("STORED_AUTO").available(0)&&this.resources.get("STORED_AUTO").gain(1)});this.addEvent(m)}}}useSpellOrWeaponskill(t,n,a){const s=this.cooldowns.get(t.cdName),d=!(this.job==="NIN"&&(this.hasResourceAvailable("MUDRA")||this.hasResourceAvailable("KASSATSU"))&&["TEN","CHI","JIN"].includes(t.name))&&t.secondaryCd?this.cooldowns.get(t.secondaryCd.cdName):void 0,f=t.castTimeFn(this),h=t.recastTimeFn(this);this.jobSpecificAddSpeedBuffCovers(n,t);const m=t.potencyFn(this);let R=n.getInitialPotency();const T=this.dotSkills.includes(t.name);!R&&(m>0||t.drawsAggro&&!this.isInCombat()||T)?(this.refreshAutoBasedOnSkill(t,f,!0),R=new sn({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t.name,aspect:t.aspect,basePotency:m,snapshotTime:void 0,description:"",targetList:n.targetList,falloff:t.falloff}),n.addPotency(R)):this.refreshAutoBasedOnSkill(t,f,!1);const S=t.healingPotencyFn(this);let g=n.getInitialHealingPotency();!g&&S>0&&(g=new sn({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t.name,aspect:t.aspect,basePotency:S,snapshotTime:void 0,description:"",healTargetCount:n.healTargetCount,falloff:0}),n.addHealingPotency(g));const _=()=>{const D=t.manaCostFn(this);D>this.resources.get("MANA").availableAmount()?p.reportInterruption({failNode:n,failIndex:a}):D>0&&this.resources.get("MANA").consume(D);const O=m>0||T;R&&(R.snapshotTime=this.getDisplayTime(),O&&(this.hasResourceAvailable("TINCTURE")&&R.addModifiers($.Tincture),R.addModifiers(...t.jobPotencyModifiers(this)),R.addTargetSpecificModifiers(t.jobTargetPotencyModifiers(this,n)))),O&&(this.hasResourceAvailable("TINCTURE")&&!n.hasBuff(U.Tincture)&&n.addBuff(U.Tincture),this.jobSpecificAddDamageBuffCovers(n,t));const x=S>0;if(g&&(g.snapshotTime=this.getDisplayTime(),this.hasResourceAvailable("TINCTURE")&&g.addModifiers($.Tincture),g.addModifiers(...t.jobHealingPotencyModifiers(this))),x&&(this.hasResourceAvailable("TINCTURE")&&!n.hasBuff(U.Tincture)&&n.addBuff(U.Tincture),this.jobSpecificAddHealingBuffCovers(n,t)),t.onConfirm(this,n),this.addEvent(new xe(t.name+" applied",t.applicationDelay,()=>{R&&(p.resolvePotency(R),this.hasResourceAvailable("IN_COMBAT")||this.resources.get("IN_COMBAT").gain(1)),g&&p.resolveHealingPotency(g),t.onApplication(this,n)})),R&&!this.hasResourceAvailable("IN_COMBAT")){const k=this.resources.timeTillReady("IN_COMBAT");(k===0||k>t.applicationDelay)&&this.resources.addResourceEvent({rscType:"IN_COMBAT",name:"begin combat if necessary",delay:t.applicationDelay,fnOnRsc:H=>{H.gain(1)}})}};if(f===0||t.isInstantFn(this))this.resources.takeResourceLock("NOT_ANIMATION_LOCKED",t.animationLockFn(this)),_();else{this.resources.takeResourceLock("MOVEMENT",f-Ia.getSlidecastWindow(f)),this.resources.takeResourceLock("NOT_CASTER_TAXED",this.config.getAfterTaxCastTime(f));const D=f-Ia.getSlidecastWindow(f);this.addEvent(new xe(t.name+" captured",D,()=>{t.validateAttempt(this)?_():p.reportInterruption({failNode:n,failIndex:a})}))}s.useStackWithRecast(this.config.getAfterTaxGCD(h)),d==null||d.useStack()}useAbility(t,n){console.assert(n);const a=this.cooldowns.get(t.cdName),s=t.secondaryCd?this.cooldowns.get(t.secondaryCd.cdName):void 0,c=t.potencyFn(this);let d;const f=this.dotSkills.includes(t.name);(c>0||t.drawsAggro||f)&&(d=new sn({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t.name,aspect:t.aspect,basePotency:c,snapshotTime:this.getDisplayTime(),description:"",targetList:n.targetList,falloff:t.falloff})),d&&(c>0||f)&&(this.hasResourceAvailable("TINCTURE")&&d.addModifiers($.Tincture),d.addModifiers(...t.jobPotencyModifiers(this)),d.addTargetSpecificModifiers(t.jobTargetPotencyModifiers(this,n)),n.addPotency(d));const h=this.resources.get("AUTOS_ENGAGED").available(1),m=this.autoAttackDelay,R=this.findAutoAttackTimerInQueue(),T=t.startsAuto||t.startsAuto!==!1&&d&&c>0;if(T)if(this.isInCombat())h||T&&this.startAutoAttackTimer(R,m);else{const I=R===-1?m:R;this.startAutoAttackTimer(I,m,void 0)}const S=t.healingPotencyFn(this);let g;S>0&&(g=new sn({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t.name,aspect:t.aspect,basePotency:S,snapshotTime:this.getDisplayTime(),description:"",healTargetCount:n.healTargetCount,falloff:0}),this.hasResourceAvailable("TINCTURE")&&g.addModifiers($.Tincture),g.addModifiers(...t.jobHealingPotencyModifiers(this)),n.addHealingPotency(g)),(c>0||f)&&!n.hasBuff(U.Tincture)&&(this.hasResourceAvailable("TINCTURE")&&n.addBuff(U.Tincture),this.jobSpecificAddDamageBuffCovers(n,t)),S>0&&(this.hasResourceAvailable("TINCTURE")&&!n.hasBuff(U.Tincture)&&n.addBuff(U.Tincture),this.jobSpecificAddHealingBuffCovers(n,t));const _=t.manaCostFn(this);if(_>0&&this.resources.get("MANA").consume(_),t.onConfirm(this,n),d&&!this.hasResourceAvailable("IN_COMBAT")){const I=this.resources.timeTillReady("IN_COMBAT");(I===0||I>t.applicationDelay)&&this.resources.addResourceEvent({rscType:"IN_COMBAT",name:"begin combat if necessary",delay:t.applicationDelay,fnOnRsc:D=>{D.gain(1)}})}t.applicationDelay>0?this.addEvent(new xe(t.name+" applied",t.applicationDelay,()=>{d&&p.resolvePotency(d),g&&p.resolveHealingPotency(g),t.onApplication(this,n)})):(d&&p.resolvePotency(d),g&&p.resolveHealingPotency(g),t.onApplication(this,n)),a.useStack(),s==null||s.useStack(),this.resources.takeResourceLock("NOT_ANIMATION_LOCKED",t.animationLockFn(this))}useLimitBreak(t,n,a){const s=this.cooldowns.get(t.cdName),c=t.castTimeFn(this),d=c>0?Ia.getSlidecastWindow(c):0,f=t.potencyFn(this);let h;f>0&&(h=new sn({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t.name,aspect:t.aspect,basePotency:f,snapshotTime:void 0,description:"",targetList:n.targetList,falloff:t.falloff}),n.addPotency(h));const m=t.healingPotencyFn(this);let R;m>0&&(R=new sn({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t.name,aspect:t.aspect,basePotency:m,snapshotTime:void 0,description:"",healTargetCount:n.healTargetCount,falloff:0}),n.addHealingPotency(R));const T=()=>{t.onConfirm(this,n),h&&(h.snapshotTime=this.getDisplayTime()),R&&(R.snapshotTime=this.getDisplayTime()),this.addEvent(new xe(t.name+" applied",t.applicationDelay,()=>{h&&p.resolvePotency(h),R&&p.resolveHealingPotency(R),t.onApplication(this,n)})),this.resources.takeResourceLock("NOT_ANIMATION_LOCKED",d+t.animationLockFn(this))};if(c===0)T();else{this.resources.takeResourceLock("MOVEMENT",c-d),this.resources.takeResourceLock("NOT_CASTER_TAXED",this.config.getAfterTaxCastTime(c));const g=c-d;this.addEvent(new xe(t.name+" captured",g,()=>{t.validateAttempt(this)?T():p.reportInterruption({failNode:n,failIndex:a})}))}s.useStack()}timeTillAnySkillAvailable(){const t=this.resources.timeTillReady("NOT_ANIMATION_LOCKED"),n=this.resources.timeTillReady("NOT_CASTER_TAXED");return Math.max(t,n)}findNextQueuedEventByTag(t){for(let n=0;n<this.eventsQueue.length;n++){const a=this.eventsQueue[n];if(a.hasTag(t))return a}}hasResourceAvailable(t,n){return this.resources.get(t).available(n??1)}hasResourceExactly(t,n){return this.resources.get(t).availableAmount()===n}hasDebuffActive(t,n){return this.debuffs.get(t,n).available(1)}hitPositional(t){return this.hasResourceAvailable("TRUE_NORTH")||t==="flank"&&this.hasResourceAvailable("FLANK_POSITIONAL")||t==="rear"&&this.hasResourceAvailable("REAR_POSITIONAL")}hitCombo(t){return this.hasResourceExactly(t.resource,t.resourceValue)}computeComboAndPositionalModifiers(t,n,a){const s=[];return n&&this.hitCombo(n)?(s.push(wk(cn(this,n.potency)-t)),a&&this.hitPositional(a.location)&&s.push(wf(cn(this,a.comboPotency)-cn(this,n.potency)))):a&&this.hitPositional(a.location)&&s.push(wf(cn(this,a.potency)-t)),s}enqueueResourceDrop(t,n,a){if(n===void 0){const c=jt(this.job,t);console.assert(c==null?void 0:c.maxTimeout,`could not find timeout declaration for resource ${t}`),n=c.maxTimeout}const s=(a===void 0?"drop all ":`drop ${a} `)+t;this.resources.get(t).removeTimer(),this.resources.addResourceEvent({rscType:t,name:s,delay:n,fnOnRsc:c=>{c.consume(a??c.availableAmountIncludingDisabled()),jt(this.job,c.type).warnOnTimeout&&p.reportWarning({kind:"timeout",rsc:c.type})}})}getOverriddenDots(t){return te(this,Rd).get(t)??[]}getOverriddenHots(t){return te(this,Td).get(t)??[]}applyDoT(t,n){this.applyOverTimeEffect(t,n,"damage")}applyHoT(t,n,a){this.applyOverTimeEffect(t,n,"healing",a)}applyOverTimeEffect(t,n,a,s){if(this.debuffs.hasAny(t)){if(a!=="damage"){console.error(`over time debuff ${t} must have kind="damage", instead got ${a}`);return}const m=s??this.getStatusDuration(t);n.targetList.forEach(R=>{const T=this.debuffs.get(t,R);let S;if(this.getOverriddenDots(t).forEach(_=>{if(!this.hasDebuffActive(_,R)){const I=this.debuffs.get(_,R).getLastExpirationTime();if(I){const D=this.getDisplayTime()-I;S=S===void 0?D:Math.min(S,D)}return}n.setOverTimeOverrideAmount(t,n.getOverTimeOverrideAmount(t,a,R)+this.debuffs.timeTillExpiry(_,R),a,R),p.reportOverTimeDrop(this.getDisplayTime(),_,a,[R]),S=0,this.tryRemoveDebuff(_,R)}),T.availableAmountIncludingDisabled()>0){if(T.node===void 0){console.error(`DoT debuff for ${t}, target ${R} has no node`);return}T.enabled=!0,T.node.removeUnresolvedOvertimePotencies(a),n.setOverTimeOverrideAmount(t,n.getOverTimeOverrideAmount(t,a,R)+this.debuffs.timeTillExpiry(t,R),a,R),T.overrideTimer(this,m)}else{const _=this.getDisplayTime()-(T.getLastExpirationTime()??0);S=S===void 0?_:Math.min(S,_),T.gain(1);const I=a==="damage"?" DoT":" HoT";p.reportOverTimeStart(this.getDisplayTime(),t,a,[R]),this.debuffs.addDebuffEvent({rscType:t,name:"drop "+t+I+" on "+R,targetNumber:R,delay:m,fnOnRsc:D=>{D.consume(1),p.reportOverTimeDrop(this.getDisplayTime(),t,a,[R])}})}n.setOverTimeGap(t,S??0,a,R),T.node=n,T.tickCount=0});return}const c=this.resources.get(t),d=s??this.getStatusDuration(t);let f;if((a==="damage"?this.getOverriddenDots(t):this.getOverriddenHots(t)).forEach(m=>{if(m!==t){if(!this.hasResourceAvailable(m)){const R=this.resources.get(m).getLastExpirationTime();if(R){const T=this.getDisplayTime()-R;f=f===void 0?T:Math.min(f,T)}return}n.setOverTimeOverrideAmount(t,n.getOverTimeOverrideAmount(t,a)+this.resources.timeTillReady(m),a),p.reportOverTimeDrop(this.getDisplayTime(),m,a,n.targetList),f=0,this.tryConsumeResource(m)}}),c.available(1))console.assert(c.node),c.node.removeUnresolvedOvertimePotencies(a),n.setOverTimeOverrideAmount(t,n.getOverTimeOverrideAmount(t,a)+this.resources.timeTillReady(t),a),c.overrideTimer(this,d);else{const m=this.getDisplayTime()-(c.getLastExpirationTime()??0);f=f===void 0?m:Math.min(f,m),c.gain(1);const R=a==="damage"?" DoT":" HoT";p.reportOverTimeStart(this.getDisplayTime(),t,a,n.targetList),this.resources.addResourceEvent({rscType:t,name:"drop "+t+R,delay:d,fnOnRsc:T=>{T.consume(1),p.reportOverTimeDrop(this.getDisplayTime(),t,a,n.targetList)}})}n.setOverTimeGap(t,f??0,a),c.node=n,c.tickCount=0,te(this,bc).includes(t)&&(this.handleDoTTick(t),p.reportDotTick(this.time,t)),te(this,Oc).includes(t)&&(this.handleHoTTick(t),p.reportHotTick(this.time,t))}addDoTPotencies(t){this.addOverTimePotencies(t,"damage")}addHoTPotencies(t,n){this.addOverTimePotencies(t,"healing",n)}addOverTimePotencies(t,n,a){const s=t.modifiers??[];this.hasResourceAvailable("TINCTURE")&&!s.includes($.Tincture)&&(s.push($.Tincture),t.node.addBuff(U.Tincture));const c=a??this.getStatusDuration(t.effectName),d=te(this,bc).includes(t.effectName)||te(this,Oc).includes(t.effectName),f=Math.ceil(c/(t.tickFrequency??3))+(d?1:0),h=n==="damage"?"DoT":"HoT";for(let m=0;m<f;m++){const R=new sn({config:p.record.config??p.gameConfig,sourceTime:this.getDisplayTime(),sourceSkill:t.skillName,aspect:t.aspect??Ne.Other,basePotency:this.config.adjustedOvertimePotency(t.tickPotency,t.speedStat),snapshotTime:this.getDisplayTime(),description:Qe(t.effectName)+` ${h} `+(m+1)+`/${f}`,targetList:n==="damage"?t.node.targetList:void 0,healTargetCount:n==="healing"?t.node.healTargetCount:void 0,falloff:0});R.addModifiers(...s),t.targetModifiers&&R.addTargetSpecificModifiers(t.targetModifiers),t.node.addOverTimePotency(R,t.effectName,n)}}refreshDoT(t,n=!1){this.refreshOverTimeEffect(t,"damage",n)}refreshHoT(t,n=!1){this.refreshOverTimeEffect(t,"healing",n)}refreshOverTimeEffect(t,n,a){!a&&!this.hasResourceAvailable(t.effectName)||(this.addOverTimePotencies(t,n),this.applyOverTimeEffect(t.effectName,t.node,n))}timeTillNextMpGainEvent(){const t=this.findNextQueuedEventByTag(Ti.ManaGain);return t?t.timeTillEvent:0}timeTillNextDamageEvent(){return this.resources.timeTillReady("IN_COMBAT")}getSkillAvailabilityStatus(t,n=!1){const a=this.skillsList.get(t);let s=Oe(this,RE,KO).call(this,a.name);const c=a.manaCostFn(this),d=this.job==="BLM"&&this.resources.get("LEY_LINES").available(1),f=a.kind==="weaponskill"||a.kind==="spell"||a.kind==="limitbreak"?a.castTimeFn(this):0,h=f===0||a.kind==="ability"||a.kind!=="limitbreak"&&a.kind!=="unknown"&&a.isInstantFn(this),m=this.resources.get("MANA").availableAmount(),R=s>_n.epsilon,T=c<=m,S=a.validateAttempt(this),g=this.config.level>=a.unlockLevel,_=this.job==="NIN"&&(this.hasResourceAvailable("MUDRA")||this.hasResourceAvailable("KASSATSU"))&&["TEN","CHI","JIN"].includes(a.name),I=ed();if(R&&I.addUnavailableReason(gt.Blocked),!_&&a.secondaryCd&&this.cooldowns.get(a.secondaryCd.cdName).stacksAvailable()===0&&I.addUnavailableReason(gt.SecondaryBlocked),g||I.addUnavailableReason(gt.SkillNotUnlocked),S||I.addUnavailableReason(gt.RequirementsNotMet),T||I.addUnavailableReason(gt.NotEnoughMP),a.name==="MEDITATE"&&(s>_n.epsilon||this.cooldowns.get("cd_GCD").timeTillNextStackAvailable()>_n.epsilon)){const X=I.unavailableReasons.indexOf(gt.RequirementsNotMet);X>=0&&I.unavailableReasons.splice(X,1),I.addUnavailableReason(gt.Blocked)}a.requiresCombat&&I.unavailableReasons.includes(gt.RequirementsNotMet)&&(I.addUnavailableReason(gt.NotInCombat),s=this.timeTillNextDamageEvent());let D=this.cooldowns.get(a.cdName);const O=!_&&a.secondaryCd?this.cooldowns.get(a.secondaryCd.cdName):void 0;let x=D.timeTillNextStackAvailable()%D.currentStackCd();const k=!_&&a.secondaryCd?this.cooldowns.timeTillNextStackAvailable(a.secondaryCd.cdName):void 0;let H=D.currentStackCd();if(t==="MEDITATE"&&x<_n.epsilon){const X=this.cooldowns.get("cd_GCD"),Ae=X.currentStackCd();X.timeTillNextStackAvailable()>x&&(D=X,H=Ae,x=X.timeTillNextStackAvailable(),s=x)}if(_){const X=this.cooldowns.get("cd_GCD"),Ae=X.currentStackCd();D=X,H=Ae,x=X.timeTillNextStackAvailable(),s=x}const G=D.stacksAvailable(),P=D.maxStacks(),L=(O==null?void 0:O.currentStackCd())??0;let j=0;I.ready()&&(a.kind==="spell"?j=(h?0:f-Ia.getSlidecastWindow(f))+a.applicationDelay:a.kind==="limitbreak"?j=f+a.applicationDelay:j=a.applicationDelay);const Z=(O==null?void 0:O.stacksAvailable())??0,J=(O==null?void 0:O.maxStacks())??0,se=a.highlightIf(this);return{skillName:a.name,status:I,stacksAvailable:J>0?Z:G,maxStacks:Math.max(P,J),castTime:f,instantCast:h,cdRecastTime:H,secondaryCdRecastTime:L,timeTillNextStackReady:x,timeTillSecondaryReady:k,timeTillAvailable:s,timeTillDamageApplication:j,capturedManaCost:c,highlight:se,llCovered:d,usedAt:this.getDisplayTime()}}useSkill(t,n,a){const s=this.skillsList.get(t);s.onExecute(this,n),s.falloff===void 0&&!s.savesTargets&&n.forceOneTarget(),s.aoeHeal&&n.setHealTargetCount(this.resources.get("PARTY_SIZE").availableAmount()),s.kind==="spell"||s.kind==="weaponskill"?this.useSpellOrWeaponskill(s,n,a):s.kind==="ability"?this.useAbility(s,n):s.kind==="limitbreak"&&this.useLimitBreak(s,n,a)}useInvalidSkill(t,n){const a=this.skillsList.get(t);if(a.falloff===void 0&&n.forceOneTarget(),a.aoeHeal&&n.setHealTargetCount(this.resources.get("PARTY_SIZE").availableAmount()),a.kind==="spell"||a.kind==="weaponskill"){const s=a.castTimeFn(this),c=a.recastTimeFn(this);s===0||a.isInstantFn(this)?this.resources.takeResourceLock("NOT_ANIMATION_LOCKED",a.animationLockFn(this)):this.resources.takeResourceLock("NOT_CASTER_TAXED",this.config.getAfterTaxCastTime(s)),this.cooldowns.get("cd_GCD").useStackWithRecast(this.config.getAfterTaxGCD(c))}else if(a.kind==="ability")this.resources.takeResourceLock("NOT_ANIMATION_LOCKED",a.animationLockFn(this));else if(a.kind==="limitbreak"){const s=a.castTimeFn(this),c=Ia.getSlidecastWindow(s);this.resources.takeResourceLock("NOT_ANIMATION_LOCKED",c+a.animationLockFn(this))}}getPartyBuffs(t){const n=new Map;return p.timeline.getBuffMarkers().filter(s=>s.time<=t&&s.time+s.duration>=t).forEach(s=>{const c=new tE(s.description);n.has(c.name)||(c.info.damageFactor===1?n.set(c.name,{kind:"critDirect",source:w.PARTY,buffType:c.name,critBonus:c.info.critBonus,dhBonus:c.info.dhBonus}):n.set(c.name,{kind:"multiplier",source:w.PARTY,buffType:c.name,potencyFactor:c.info.damageFactor}))}),n}tryConsumeResource(t,n=!1){const a=this.resources.get(t),s=n?a.availableAmount():1;return s>0&&a.available(s)?(a.consume(s),a.available(s)||a.removeTimer(),!0):!1}tryRemoveDebuff(t,n){const a=this.debuffs.get(t,n),s=a.availableAmount();return s>0?(a.consume(s),a.removeTimer(),!0):!1}setComboState(t,n){n===0?this.tryConsumeResource(t,!0):(this.resources.get(t).overrideCurrentValue(n),this.enqueueResourceDrop(t,30))}hasTraitUnlocked(t){return xb(t,this.config.level)}isInCombat(){return this.hasResourceAvailable("IN_COMBAT")}}bc=new WeakMap,Oc=new WeakMap,Rd=new WeakMap,Td=new WeakMap,RE=new WeakSet,KO=function(t){var d;const n=this.skillsList.get(t),s=this.job==="NIN"&&(this.hasResourceAvailable("MUDRA")||this.hasResourceAvailable("KASSATSU"))&&["TEN","CHI","JIN"].includes(n.name)||(d=n.secondaryCd)==null?void 0:d.cdName;let c=this.cooldowns.timeTillAnyStackAvailable(n.cdName);return s&&(c=Math.max(c,this.cooldowns.timeTillAnyStackAvailable(s))),Math.max(this.timeTillAnySkillAvailable(),c)};const VO=["THUNDER_III","THUNDER_IV","HIGH_THUNDER","HIGH_THUNDER_II"],p2=Object.keys(nS).filter(e=>!VO.includes(e));Object.keys(nS).forEach(e=>qt(e,`BLM/${Ke[e].name}.png`));class N2 extends en{jobSpecificOtherTargetedBuffViewProps(){return[...VO.flatMap(t=>this.makeTargetedTimers(t))]}jobSpecificSelfTargetedBuffViewProps(){return p2.map(t=>t==="LEY_LINES"?this.makeToggleableTimer(t):t==="THUNDERHEAD"||t==="FIRESTARTER"?this.makeCommonTimerless(t):this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){const n=this.state.resources.get("ENOCHIAN"),a=this.state.resources,s=this.state.getFireStacks(),c=this.state.getIceStacks(),d=a.get("UMBRAL_HEART").availableAmount(),f=a.get("PARADOX").availableAmount(),h=a.get("ASTRAL_SOUL").availableAmount(),m=n.available(1)?a.timeTillReady("POLYGLOT"):30,R=a.get("POLYGLOT").availableAmount(),T=this.state.hasTraitUnlocked("ENHANCED_POLYGLOT_II")&&3||this.state.hasTraitUnlocked("ENHANCED_POLYGLOT")&&2||1,S=[{kind:"counter",name:N({en:"AF/UI",zh:"",ja:"AF/UB"}),color:s>0?t.blm.astralFire:t.blm.umbralIce,currentStacks:s>0?s:c,maxStacks:3},{kind:"counter",name:N({en:"hearts",zh:"",ja:""}),color:t.blm.umbralHeart,currentStacks:d,maxStacks:3},{kind:"counter",name:N({en:"paradox",zh:"",ja:""}),color:t.blm.paradox,currentStacks:f,maxStacks:1}];return this.state.hasTraitUnlocked("ENHANCED_ASTRAL_FIRE")&&S.push({kind:"counter",name:N({en:"astral soul",zh:"",ja:""}),color:t.blm.astralSoul,currentStacks:h,maxStacks:6}),S.push({kind:"bar",name:N({en:"poly timer",zh:"",ja:""}),color:t.blm.polyTimer,progress:1-m/30,valueString:m.toFixed(3)},{kind:"counter",name:N({en:"poly stacks",zh:"",ja:""}),color:t.blm.polyStacks,currentStacks:R,maxStacks:T}),S}}const mi=(e,t,n)=>{Je("BLM",e,t,n??{})};mi("POLYGLOT",3,{timeout:30,warnOnOvercap:!0});mi("ASTRAL_FIRE",3);mi("UMBRAL_ICE",3);mi("UMBRAL_HEART",3);mi("ASTRAL_SOUL",6);mi("LEY_LINES",1,{timeout:20});mi("ENOCHIAN",1);mi("PARADOX",1);mi("FIRESTARTER",1);mi("THUNDERHEAD",1);mi("THUNDER_III",1,{timeout:27});mi("THUNDER_IV",1,{timeout:21});mi("HIGH_THUNDER",1,{timeout:30});mi("HIGH_THUNDER_II",1,{timeout:24});mi("MANAWARD",1,{timeout:20});mi("TRIPLECAST",3,{timeout:15.7});class C2 extends tn{constructor(n){super(n);re(this,"thunderTickOffset");n.initialResourceOverrides.some(f=>(f.type==="ASTRAL_FIRE"||f.type==="UMBRAL_ICE")&&f.stacks>0)&&this.gainStatus("ENOCHIAN"),this.thunderTickOffset=this.nonProcRng()*3;const s=this.hasTraitUnlocked("ENHANCED_POLYGLOT_II")&&3||this.hasTraitUnlocked("ENHANCED_POLYGLOT")&&2||1;this.resources.set(new On("POLYGLOT",s,0,!0));const c=this.hasTraitUnlocked("ENHANCED_MANAFONT")&&100||120,d=this.hasTraitUnlocked("ENHANCED_SWIFTCAST")&&40||60;[new ze("cd_MANAFONT",c,1,1),new ze("cd_SWIFTCAST",d,1,1)].forEach(f=>this.cooldowns.set(f)),this.registerRecurringEvents([{reportName:N({en:"Thunder DoT",zh:"DoT"}),groupedEffects:[{effectName:"HIGH_THUNDER",appliedBy:["HIGH_THUNDER"]},{effectName:"HIGH_THUNDER_II",appliedBy:["HIGH_THUNDER_II"]},{effectName:"THUNDER_III",appliedBy:["THUNDER_III"]},{effectName:"THUNDER_IV",appliedBy:["THUNDER_IV"]}]}])}get statusPropsGenerator(){return new N2(this)}jobSpecificRegisterRecurringEvents(){const n=a=>{this.hasEnochian()&&a.gain(1),this.resources.addResourceEvent({rscType:"POLYGLOT",name:"gain polyglot if currently has enochian",delay:30,fnOnRsc:n})};this.resources.addResourceEvent({rscType:"POLYGLOT",name:"gain polyglot if currently has enochian",delay:30,fnOnRsc:n})}jobSpecificAddSpeedBuffCovers(n,a){this.hasResourceAvailable("LEY_LINES")&&a.cdName==="cd_GCD"&&n.addBuff(U.LeyLines)}captureManaRegenAmount(){return this.getFireStacks()>0?0:200}getFireStacks(){return this.resources.get("ASTRAL_FIRE").availableAmount()}getIceStacks(){return this.resources.get("UMBRAL_ICE").availableAmount()}getUmbralHearts(){return this.resources.get("UMBRAL_HEART").availableAmount()}getMP(){return this.resources.get("MANA").availableAmount()}switchToAForUI(n,a){console.assert(a>0);const s=this.resources.get("ASTRAL_FIRE"),c=this.resources.get("UMBRAL_ICE"),d=this.resources.get("UMBRAL_HEART"),f=this.resources.get("PARADOX"),h=this.resources.get("ASTRAL_SOUL");n==="ASTRAL_FIRE"?(s.availableAmount()===0&&this.gainStatus("THUNDERHEAD"),s.gain(a),this.hasTraitUnlocked("ASPECT_MASTERY_V")&&c.available(3)&&d.available(3)&&f.gain(1),c.consume(c.availableAmount())):n==="UMBRAL_ICE"&&(c.availableAmount()===0&&this.gainStatus("THUNDERHEAD"),c.gain(a),this.hasTraitUnlocked("ASPECT_MASTERY_V")&&s.available(3)&&f.gain(1),s.consume(s.availableAmount()),h.consume(h.availableAmount()))}gainUmbralMana(n=0){let a=0;switch(this.resources.get("UMBRAL_ICE").availableAmount()){case 1:a=2500;break;case 2:a=5e3;break;case 3:a=1e4;break;default:a=0;break}this.addEvent(new xe("gain umbral mana",n,()=>{this.resources.get("MANA").gain(a)}))}captureManaCost(n,a,s){const c=this.getIceStacks(),d=this.getFireStacks(),f=this.getUmbralHearts();if(n==="PARADOX"&&this.getIceStacks()>0||n==="FIRE_III"&&this.hasResourceAvailable("FIRESTARTER"))return 0;let h=1;return a===Ne.Fire&&c>0||a===Ne.Ice&&(c>0||d>0)?h=0:a===Ne.Fire&&d>0&&f===0&&(h=2),s*h}captureSpellCastTimeAFUI(n,a){const s=this.config.adjustedCastTime(n,this.hasResourceAvailable("LEY_LINES")?15:void 0);let c=1;return(a===Ne.Fire&&this.getIceStacks()===3||a===Ne.Ice&&this.getFireStacks()===3)&&(c=.5),s*c}hasEnochian(){return this.hasResourceAvailable("ENOCHIAN")}startOrRefreshEnochian(){const n=this.resources.get("ENOCHIAN");n.available(1)||(this.resources.get("POLYGLOT").overrideTimer(this,30),n.gain(1))}loseEnochian(){["ENOCHIAN","ASTRAL_FIRE","UMBRAL_ICE","UMBRAL_HEART","PARADOX","ASTRAL_SOUL"].forEach(a=>this.tryConsumeResource(a,!0))}}const WO=e=>e.resources.get("LEY_LINES").availableAmountIncludingDisabled()>0,qS=e=>e.hasResourceAvailable("PARADOX"),XO=e=>e.hasTraitUnlocked("ENHANCED_ENOCHIAN_IV")&&1.27||e.hasTraitUnlocked("ENHANCED_ENOCHIAN_III")&&1.22||e.hasTraitUnlocked("ENHANCED_ENOCHIAN_II")&&1.15||1.1,dn=(e,t,n)=>{const a=n.aspect??Ne.Other,s=Pe((c,d)=>{n.baseCastTime===0||e==="DESPAIR"&&c.hasTraitUnlocked("ENHANCED_ASTRAL_FIRE")||e==="FOUL"&&c.hasTraitUnlocked("ENHANCED_FOUL")||e==="FIRE_III"&&c.hasResourceAvailable("FIRESTARTER")||c.tryConsumeResource("SWIFTCAST")||c.tryConsumeResource("TRIPLECAST")},(c,d)=>{c.getFireStacks()>0&&a===Ne.Fire&&!["DESPAIR","FLARE_STAR","FLARE"].includes(e)&&!(e==="FIRE_III"&&c.hasResourceAvailable("FIRESTARTER"))&&c.tryConsumeResource("UMBRAL_HEART"),a===Ne.Ice&&c.gainUmbralMana(n.applicationDelay)},n.onConfirm);return oa("BLM",e,t,{...n,aspect:a,castTime:c=>c.captureSpellCastTimeAFUI(n.baseCastTime,a),recastTime:c=>c.config.adjustedGCD(2.5,c.hasResourceAvailable("LEY_LINES")?15:0),manaCost:c=>c.captureManaCost(e,a,n.baseManaCost),potency:c=>n.basePotency,isInstantFn:c=>e==="DESPAIR"&&c.hasTraitUnlocked("ENHANCED_ASTRAL_FIRE")||e==="FOUL"&&c.hasTraitUnlocked("ENHANCED_FOUL")||e==="FIRE_III"&&c.hasResourceAvailable("FIRESTARTER")||c.hasResourceAvailable("SWIFTCAST")||c.hasResourceAvailable("TRIPLECAST"),onConfirm:s,jobPotencyModifiers:c=>{const d=[];if(c.hasResourceAvailable("ENOCHIAN")){const m=XO(c);d.push({kind:"multiplier",source:w.ENO,potencyFactor:m})}const f=c.getIceStacks(),h=c.getFireStacks();return f===1?a===Ne.Fire?d.push({kind:"multiplier",source:w.UI1,potencyFactor:.9}):a===Ne.Ice&&d.push({kind:"multiplier",source:w.UI1,potencyFactor:1}):f===2?a===Ne.Fire?d.push({kind:"multiplier",source:w.UI2,potencyFactor:.8}):a===Ne.Ice&&d.push({kind:"multiplier",source:w.UI2,potencyFactor:1}):f===3&&(a===Ne.Fire?d.push({kind:"multiplier",source:w.UI3,potencyFactor:.7}):a===Ne.Ice&&d.push({kind:"multiplier",source:w.UI3,potencyFactor:1})),h===1?a===Ne.Ice?d.push({kind:"multiplier",source:w.AF1,potencyFactor:.9}):a===Ne.Fire&&d.push({kind:"multiplier",source:w.AF1,potencyFactor:1.4}):h===2?a===Ne.Ice?d.push({kind:"multiplier",source:w.AF2,potencyFactor:.8}):a===Ne.Fire&&d.push({kind:"multiplier",source:w.AF2,potencyFactor:1.6}):h===3&&(a===Ne.Ice?d.push({kind:"multiplier",source:w.AF3,potencyFactor:.7}):a===Ne.Fire&&d.push({kind:"multiplier",source:w.AF3,potencyFactor:1.8})),d}})},tr=(e,t,n,a)=>st("BLM",e,t,n,a);dn("BLIZZARD",1,{aspect:Ne.Ice,baseCastTime:2,baseManaCost:400,basePotency:180,applicationDelay:.846,onConfirm:(e,t)=>{e.getFireStacks()===0?(e.switchToAForUI("UMBRAL_ICE",1),e.startOrRefreshEnochian()):(e.resources.get("ENOCHIAN").removeTimer(),e.loseEnochian())},replaceIf:[{newSkill:"PARADOX",condition:qS}]});dn("FIRE",2,{aspect:Ne.Fire,baseCastTime:2,baseManaCost:800,basePotency:180,applicationDelay:1.871,onConfirm:(e,t)=>{e.triggersEffect(.4,!0)&&e.gainStatus("FIRESTARTER"),e.getIceStacks()===0?(e.switchToAForUI("ASTRAL_FIRE",1),e.startOrRefreshEnochian()):(e.resources.get("ENOCHIAN").removeTimer(),e.loseEnochian())},replaceIf:[{newSkill:"PARADOX",condition:qS}]});tr("TRANSPOSE",4,"cd_TRANSPOSE",{applicationDelay:0,cooldown:5,validateAttempt:e=>e.getFireStacks()>0||e.getIceStacks()>0,onApplication:(e,t)=>{(e.getFireStacks()!==0||e.getIceStacks()!==0)&&(e.switchToAForUI(e.getFireStacks()>0?"UMBRAL_ICE":"ASTRAL_FIRE",1),e.startOrRefreshEnochian())}});const PE=(e,t)=>(n,a)=>{let s=0;switch(e){case"HIGH_THUNDER":s=60;break;case"THUNDER_III":s=50;break;case"THUNDER_IV":s=35;break;case"HIGH_THUNDER_II":s=40;break}const c=[];if(n.hasResourceAvailable("ENOCHIAN")){const d=XO(n);c.push({kind:"multiplier",source:w.ENO,potencyFactor:d})}console.assert(s>0,`${e} was applied as a Thunder DoT`),n.addDoTPotencies({node:a,effectName:t,skillName:e,tickPotency:s,speedStat:"sps",aspect:Ne.Lightning,modifiers:c}),n.tryConsumeResource("THUNDERHEAD")};dn("THUNDER_III",45,{aspect:Ne.Lightning,baseCastTime:0,baseManaCost:0,basePotency:120,applicationDelay:1.03,validateAttempt:e=>e.hasResourceAvailable("THUNDERHEAD"),onConfirm:PE("THUNDER_III","THUNDER_III"),onApplication:(e,t)=>e.applyDoT("THUNDER_III",t),autoUpgrade:{trait:"THUNDER_MASTERY_III",otherSkill:"HIGH_THUNDER"},highlightIf:e=>e.hasResourceAvailable("THUNDERHEAD")});Ze("BLM","MANAWARD",30,"cd_MANAWARD",{rscType:"MANAWARD",applicationDelay:1.114,cooldown:120});tr("MANAFONT",30,"cd_MANAFONT",{applicationDelay:.2,cooldown:100,validateAttempt:e=>e.getFireStacks()>0,onConfirm:(e,t)=>{e=e,e.resources.get("ASTRAL_FIRE").gain(3),e.resources.get("UMBRAL_HEART").gain(3),e.hasTraitUnlocked("ASPECT_MASTERY_V")&&e.resources.get("PARADOX").gain(1),e.gainStatus("THUNDERHEAD"),e.startOrRefreshEnochian()},onApplication:(e,t)=>{e.resources.get("MANA").gain(1e4)}});dn("FIRE_III",35,{aspect:Ne.Fire,baseCastTime:3.5,baseManaCost:2e3,basePotency:290,applicationDelay:1.292,onConfirm:(e,t)=>{e.tryConsumeResource("FIRESTARTER"),e.switchToAForUI("ASTRAL_FIRE",3),e.startOrRefreshEnochian()},highlightIf:e=>e.hasResourceAvailable("FIRESTARTER")});dn("BLIZZARD_III",35,{aspect:Ne.Ice,baseCastTime:3.5,baseManaCost:800,basePotency:290,applicationDelay:.89,onConfirm:(e,t)=>{e.switchToAForUI("UMBRAL_ICE",3),e.startOrRefreshEnochian()}});dn("FREEZE",40,{aspect:Ne.Ice,baseCastTime:2,baseManaCost:1e3,basePotency:120,applicationDelay:.664,falloff:0,validateAttempt:e=>e.getIceStacks()>0,onConfirm:(e,t)=>e.resources.get("UMBRAL_HEART").gain(3)});dn("FLARE",50,{aspect:Ne.Fire,baseCastTime:2,baseManaCost:0,basePotency:240,applicationDelay:1.157,falloff:.3,validateAttempt:e=>e.getFireStacks()>0&&e.getMP()>=800,onConfirm:(e,t)=>{const n=e.resources.get("UMBRAL_HEART"),a=e.resources.get("MANA"),s=n.available(1)?a.availableAmount()*.66:a.availableAmount();e.resources.get("MANA").consume(s),n.consume(n.availableAmount()),e.resources.get("ASTRAL_FIRE").gain(3),e.hasTraitUnlocked("ENHANCED_ASTRAL_FIRE")&&e.resources.get("ASTRAL_SOUL").gain(3),e.startOrRefreshEnochian()}});Ze("BLM","LEY_LINES",52,"cd_LEY_LINES",{rscType:"LEY_LINES",applicationDelay:.49,cooldown:120,maxCharges:2,validateAttempt:e=>!(e.resources.get("LEY_LINES").availableAmountIncludingDisabled()>0),onApplication:(e,t)=>{e.resources.get("LEY_LINES").enabled=!0},replaceIf:[{newSkill:"RETRACE",condition:WO}]});dn("BLIZZARD_IV",58,{aspect:Ne.Ice,baseCastTime:2,baseManaCost:800,basePotency:300,applicationDelay:1.156,validateAttempt:e=>e.getIceStacks()>0,onConfirm:(e,t)=>e.resources.get("UMBRAL_HEART").gain(3)});dn("FIRE_IV",60,{aspect:Ne.Fire,baseCastTime:2,baseManaCost:800,basePotency:300,applicationDelay:1.159,validateAttempt:e=>e.getFireStacks()>0,onConfirm:(e,t)=>{e.hasTraitUnlocked("ENHANCED_ASTRAL_FIRE")&&e.resources.get("ASTRAL_SOUL").gain(1)}});tr("BETWEEN_THE_LINES",62,"cd_BETWEEN_THE_LINES",{applicationDelay:0,cooldown:3,animationLock:Jt,validateAttempt:e=>e.resources.get("LEY_LINES").availableAmountIncludingDisabled()>0,onConfirm:(e,t)=>{e.resources.get("LEY_LINES").enabled=!0}});tr("AETHERIAL_MANIPULATION",50,"cd_AETHERIAL_MANIPULATION",{applicationDelay:0,cooldown:10,animationLock:Jt});tr("TRIPLECAST",66,"cd_TRIPLECAST",{applicationDelay:0,cooldown:60,maxCharges:2,onApplication:(e,t)=>e.gainStatus("TRIPLECAST",3)});dn("FOUL",70,{baseCastTime:2,baseManaCost:0,basePotency:600,falloff:.25,applicationDelay:1.158,validateAttempt:e=>e.hasResourceAvailable("POLYGLOT"),onConfirm:(e,t)=>e.resources.get("POLYGLOT").consume(1),highlightIf:e=>e.hasResourceAvailable("POLYGLOT")});dn("DESPAIR",72,{aspect:Ne.Fire,baseCastTime:2,baseManaCost:0,basePotency:350,applicationDelay:.556,validateAttempt:e=>e.getFireStacks()>0&&e.getMP()>=800,onConfirm:(e,t)=>{const n=e.resources.get("MANA"),a=n.availableAmount();console.assert(a>=800,`tried to confirm despair at ${a} MP`),n.consume(a),e.resources.get("ASTRAL_FIRE").gain(3),e.startOrRefreshEnochian()}});dn("UMBRAL_SOUL",35,{aspect:Ne.Ice,baseCastTime:0,baseManaCost:0,basePotency:0,applicationDelay:.633,validateAttempt:e=>e.getIceStacks()>0,onConfirm:(e,t)=>{e.resources.get("UMBRAL_ICE").gain(1),e.resources.get("UMBRAL_HEART").gain(1)}});dn("XENOGLOSSY",80,{baseCastTime:0,baseManaCost:0,basePotency:890,applicationDelay:.63,validateAttempt:e=>e.hasResourceAvailable("POLYGLOT"),onConfirm:(e,t)=>e.resources.get("POLYGLOT").consume(1),highlightIf:e=>e.hasResourceAvailable("POLYGLOT")});dn("FIRE_II",18,{aspect:Ne.Fire,baseCastTime:3,baseManaCost:1500,basePotency:80,falloff:0,applicationDelay:1.154,autoUpgrade:{trait:"ASPECT_MASTERY_IV",otherSkill:"HIGH_FIRE_II"},onConfirm:(e,t)=>{e.switchToAForUI("ASTRAL_FIRE",3),e.startOrRefreshEnochian()}});dn("BLIZZARD_II",12,{aspect:Ne.Ice,baseCastTime:3,baseManaCost:800,basePotency:80,falloff:0,applicationDelay:1.158,autoUpgrade:{trait:"ASPECT_MASTERY_IV",otherSkill:"HIGH_BLIZZARD_II"},onConfirm:(e,t)=>{e.switchToAForUI("UMBRAL_ICE",3),e.startOrRefreshEnochian()}});dn("HIGH_FIRE_II",82,{aspect:Ne.Fire,baseCastTime:3,baseManaCost:1500,basePotency:100,falloff:0,applicationDelay:1.154,autoDowngrade:{trait:"ASPECT_MASTERY_IV",otherSkill:"FIRE_II"},onConfirm:(e,t)=>{e.switchToAForUI("ASTRAL_FIRE",3),e.startOrRefreshEnochian()}});dn("HIGH_BLIZZARD_II",82,{aspect:Ne.Ice,baseCastTime:3,baseManaCost:800,basePotency:100,falloff:0,applicationDelay:1.158,autoDowngrade:{trait:"ASPECT_MASTERY_IV",otherSkill:"BLIZZARD_II"},onConfirm:(e,t)=>{e.switchToAForUI("UMBRAL_ICE",3),e.startOrRefreshEnochian()}});tr("AMPLIFIER",86,"cd_AMPLIFIER",{applicationDelay:0,cooldown:120,validateAttempt:e=>e.getFireStacks()>0||e.getIceStacks()>0,onApplication:(e,t)=>{e.resources.get("POLYGLOT").gain(1)}});dn("PARADOX",90,{baseCastTime:0,baseManaCost:1600,basePotency:540,applicationDelay:.624,validateAttempt:qS,onConfirm:(e,t)=>{e.resources.get("PARADOX").consume(1),e.getFireStacks()>0?e.gainStatus("FIRESTARTER"):e.getIceStacks()===0&&console.error("cannot cast Paradox outside of AF/UI")},replaceIf:[{newSkill:"BLIZZARD",condition:e=>!e.hasResourceAvailable("PARADOX")&&e.getIceStacks()>0},{newSkill:"FIRE",condition:e=>!e.hasResourceAvailable("PARADOX")&&e.getFireStacks()>0}],startOnHotbar:!1,highlightIf:e=>!0});dn("HIGH_THUNDER",92,{aspect:Ne.Lightning,baseCastTime:0,baseManaCost:0,basePotency:150,applicationDelay:.757,validateAttempt:e=>e.hasResourceAvailable("THUNDERHEAD"),onConfirm:PE("HIGH_THUNDER","HIGH_THUNDER"),onApplication:(e,t)=>e.applyDoT("HIGH_THUNDER",t),autoDowngrade:{trait:"THUNDER_MASTERY_III",otherSkill:"THUNDER_III"},highlightIf:e=>e.hasResourceAvailable("THUNDERHEAD")});dn("FLARE_STAR",100,{aspect:Ne.Fire,baseCastTime:2,baseManaCost:0,basePotency:500,falloff:.65,applicationDelay:.622,validateAttempt:e=>e.hasResourceAvailable("ASTRAL_SOUL",6),onConfirm:(e,t)=>e.tryConsumeResource("ASTRAL_SOUL",!0),highlightIf:e=>e.hasResourceAvailable("ASTRAL_SOUL",6)});dn("THUNDER_IV",64,{aspect:Ne.Lightning,baseCastTime:0,baseManaCost:0,basePotency:80,falloff:0,applicationDelay:1.16,validateAttempt:e=>e.hasResourceAvailable("THUNDERHEAD"),onConfirm:PE("THUNDER_IV","THUNDER_IV"),onApplication:(e,t)=>e.applyDoT("THUNDER_IV",t),autoUpgrade:{trait:"THUNDER_MASTERY_III",otherSkill:"HIGH_THUNDER_II"},highlightIf:e=>e.hasResourceAvailable("THUNDERHEAD")});dn("HIGH_THUNDER_II",92,{aspect:Ne.Lightning,baseCastTime:0,baseManaCost:0,basePotency:100,falloff:0,applicationDelay:.8,validateAttempt:e=>e.hasResourceAvailable("THUNDERHEAD"),onConfirm:PE("HIGH_THUNDER_II","HIGH_THUNDER_II"),onApplication:(e,t)=>e.applyDoT("HIGH_THUNDER_II",t),autoDowngrade:{trait:"THUNDER_MASTERY_III",otherSkill:"THUNDER_IV"},highlightIf:e=>e.hasResourceAvailable("THUNDERHEAD")});tr("RETRACE",96,"cd_RETRACE",{applicationDelay:0,cooldown:40,validateAttempt:WO,onConfirm:(e,t)=>{const n=e.resources.get("LEY_LINES");n.enabled=!0,console.assert(n.pendingChange!==void 0,"LL should def have a timer when Retrace is used"),n.pendingChange.timeTillEvent=Math.floor(n.pendingChange.timeTillEvent)+.5},startOnHotbar:!1});const qO=["CAUSTIC_BITE","STORMBITE"],b2=Object.keys(iS).filter(e=>!qO.includes(e));Object.keys(iS).forEach(e=>qt(e,`BRD/${Ke[e].name}.png`));class O2 extends en{jobSpecificOtherTargetedBuffViewProps(){return[...qO.flatMap(t=>this.makeTargetedTimers(t))]}jobSpecificSelfTargetedBuffViewProps(){return[...b2.map(t=>this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){const n=this.state.resources,a=n.get("PITCH_PERFECT"),s=n.get("REPERTOIRE"),c=[{kind:"counter",name:N({en:"Pitch Perfect"}),color:t.brd.pitchPerfect,currentStacks:a.availableAmount(),maxStacks:a.maxValue},{kind:"counter",name:N({en:"Paeon Repertoire"}),color:t.brd.repertoire,currentStacks:s.availableAmount(),maxStacks:s.maxValue}];if(this.state.hasTraitUnlocked("SOUL_VOICE")){const d=n.get("SOUL_VOICE");c.push({kind:"bar",name:N({en:"Soul Voice"}),color:t.brd.soulVoice,progress:d.availableAmount()/d.maxValue,valueString:d.availableAmount().toFixed(0)})}return this.state.hasTraitUnlocked("MINSTRELS_CODA")&&c.push({kind:"coda",name:N({en:"Coda"}),hasWanderers:this.state.hasResourceAvailable("WANDERERS_CODA"),hasMages:this.state.hasResourceAvailable("MAGES_CODA"),hasArmys:this.state.hasResourceAvailable("ARMYS_CODA"),wanderersColor:t.brd.wanderersCoda,magesColor:t.brd.magesCoda,armysColor:t.brd.armysCoda}),c}}const Pt=(e,t,n)=>{Je("BRD",e,t,n??{})};Pt("SOUL_VOICE",100,{warnOnOvercap:!0});Pt("PITCH_PERFECT",3);Pt("REPERTOIRE",4);Pt("WANDERERS_CODA",1,{warnOnOvercap:!0});Pt("MAGES_CODA",1,{warnOnOvercap:!0});Pt("ARMYS_CODA",1,{warnOnOvercap:!0});Pt("ETHOS_REPERTOIRE",4);Pt("MUSE_REPERTOIRE",4);Pt("HAWKS_EYE",1,{timeout:30});Pt("RAGING_STRIKES",1,{timeout:20});Pt("BARRAGE",1,{timeout:10});Pt("ARMYS_MUSE",4,{timeout:10});Pt("ARMYS_ETHOS",4,{timeout:30});Pt("BLAST_ARROW_READY",1,{timeout:10});Pt("RESONANT_ARROW_READY",1,{timeout:30});Pt("RADIANT_ENCORE_READY",1,{timeout:30});Pt("MAGES_BALLAD",1,{timeout:45});Pt("ARMYS_PAEON",1,{timeout:45});Pt("WANDERERS_MINUET",1,{timeout:45});Pt("BATTLE_VOICE",1,{timeout:20});Pt("WARDENS_PAEAN",1,{timeout:30});Pt("TROUBADOUR",1,{timeout:15});Pt("NATURES_MINNE",1,{timeout:15});Pt("RADIANT_FINALE",1,{timeout:20});Pt("RADIANT_CODA",3);Pt("CAUSTIC_BITE",1,{timeout:45});Pt("STORMBITE",1,{timeout:45});const jC=["WANDERERS_MINUET","MAGES_BALLAD","ARMYS_PAEON"],D2=["REFULGENT_ARROW","SHADOWBITE","WIDE_VOLLEY"];class y2 extends tn{constructor(t){super(t),this.hasTraitUnlocked("ENHANCED_BLOODLETTER")||this.cooldowns.set(new ze("cd_HEARTBREAK_SHOT",15,2,2)),this.hasTraitUnlocked("ENHANCED_TROUBADOUR")||this.cooldowns.set(new ze("cd_TROUBADOUR",120,1,1)),this.registerRecurringEvents([{reportName:Qe("STORMBITE"),groupedEffects:[{effectName:"STORMBITE",appliedBy:["STORMBITE","IRON_JAWS"]}]},{reportName:Qe("CAUSTIC_BITE"),groupedEffects:[{effectName:"CAUSTIC_BITE",appliedBy:["CAUSTIC_BITE","IRON_JAWS"]}]}])}get statusPropsGenerator(){return new O2(this)}jobSpecificAddDamageBuffCovers(t,n){switch(this.hasResourceAvailable("RAGING_STRIKES")&&t.addBuff(U.RagingStrikes),this.hasResourceAvailable("BATTLE_VOICE")&&t.addBuff(U.BattleVoice),this.resources.get("RADIANT_FINALE").availableAmount()){case 1:t.addBuff(U.RadiantFinale1);break;case 2:t.addBuff(U.RadiantFinale2);break;case 3:t.addBuff(U.RadiantFinale3);break}this.hasResourceAvailable("BARRAGE")&&D2.includes(n.name)&&t.addBuff(U.Barrage),this.hasResourceAvailable("WANDERERS_MINUET")?t.addBuff(U.WanderersMinuet):this.hasResourceAvailable("MAGES_BALLAD")?t.addBuff(U.MagesBallad):this.hasResourceAvailable("ARMYS_PAEON")&&t.addBuff(U.ArmysPaeon)}songTick(t){this.resourceIsSong(t)&&this.hasResourceAvailable(t)&&(this.triggersEffect(.8)&&this.gainRepertoireEffect(t),this.resources.timeTillReady(t)>3+_n.epsilon&&this.addEvent(new xe(`${t} tick`,3,()=>{this.songTick(t)})))}gainRepertoireEffect(t){if(t||(this.hasResourceAvailable("WANDERERS_MINUET")?t="WANDERERS_MINUET":this.hasResourceAvailable("MAGES_BALLAD")?t="MAGES_BALLAD":this.hasResourceAvailable("ARMYS_PAEON")&&(t="ARMYS_PAEON")),!!t&&this.resourceIsSong(t)){switch(t){case"WANDERERS_MINUET":this.resources.get("PITCH_PERFECT").gain(1);break;case"MAGES_BALLAD":this.cooldowns.get("cd_HEARTBREAK_SHOT").restore(7.5);break;case"ARMYS_PAEON":this.resources.get("REPERTOIRE").gain(1);break}this.hasTraitUnlocked("SOUL_VOICE")&&this.resources.get("SOUL_VOICE").gain(5)}}resourceIsSong(t){return jC.includes(t)}beginSong(t){if(this.resourceIsSong(t)){if(jC.forEach(n=>this.tryExpireSong(n)),t!=="ARMYS_PAEON"&&this.hasResourceAvailable("ARMYS_ETHOS")){const n=this.resources.get("ETHOS_REPERTOIRE").availableAmount();this.resources.get("MUSE_REPERTOIRE").gain(n),this.tryConsumeResource("ARMYS_ETHOS"),this.tryConsumeResource("ETHOS_REPERTOIRE",!0),this.gainStatus("ARMYS_MUSE")}if(this.hasTraitUnlocked("MINSTRELS_CODA")){const n=t==="WANDERERS_MINUET"?"WANDERERS_CODA":t==="MAGES_BALLAD"?"MAGES_CODA":"ARMYS_CODA";this.resources.get(n).gain(1)}this.resources.get(t).gain(1),this.resources.addResourceEvent({rscType:t,name:"drop "+t,delay:this.getStatusDuration(t),fnOnRsc:n=>this.tryExpireSong(t)}),this.addEvent(new xe(`${t} tick`,3,()=>{this.songTick(t)}))}}tryExpireSong(t){if(this.resourceIsSong(t)&&this.hasResourceAvailable(t)){switch(t){case"WANDERERS_MINUET":this.tryConsumeResource("PITCH_PERFECT",!0);break;case"ARMYS_PAEON":if(this.hasTraitUnlocked("ENHANCED_ARMYS_PAEON")){const n=this.resources.get("REPERTOIRE").availableAmount();n>0&&(this.resources.get("ETHOS_REPERTOIRE").gain(n),this.gainStatus("ARMYS_ETHOS")),this.tryConsumeResource("MUSE_REPERTOIRE",!0)}this.tryConsumeResource("REPERTOIRE",!0);break}this.tryConsumeResource(t)}}getCodaCount(){const t=this.resources.get("WANDERERS_CODA").availableAmount(),n=this.resources.get("MAGES_CODA").availableAmount(),a=this.resources.get("ARMYS_CODA").availableAmount();return t+n+a}getJobPotencyModifiers(t){const n=[];if([{rscType:"WANDERERS_MINUET",mod:$.WanderersMinuet},{rscType:"MAGES_BALLAD",mod:$.MagesBallad},{rscType:"ARMYS_PAEON",mod:$.ArmysPaeon},{rscType:"RAGING_STRIKES",mod:$.RagingStrikes},{rscType:"BATTLE_VOICE",mod:$.BattleVoice}].forEach(s=>{this.hasResourceAvailable(s.rscType)&&n.push(s.mod)}),this.hasResourceAvailable("RADIANT_FINALE")){const s=this.resources.get("RADIANT_CODA").availableAmount();s===3?n.push($.RadiantFinaleThreeCoda):s===2?n.push($.RadiantFinaleTwoCoda):s===1&&n.push($.RadiantFinaleOneCoda)}if(this.hasResourceAvailable("BARRAGE"))switch(t){case"REFULGENT_ARROW":n.push($.BarrageRefulgent);break;case"SHADOWBITE":n.push($.BarrageShadowbite);break;case"WIDE_VOLLEY":n.push($.BarrageWideVolley);break}return n}getSpeedModifier(t){if(t==="ARMYS_PAEON")return this.resources.get("REPERTOIRE").availableAmount()*4;if(t==="ARMYS_MUSE"){const n=this.resources.get("MUSE_REPERTOIRE").availableAmount();return n===4?12:n===3?4:n}return 0}}const la=(e,t,n)=>un("BRD",e,t,{...n,recastTime:a=>{let s;a.hasResourceAvailable("ARMYS_PAEON")?s="ARMYS_PAEON":a.hasResourceAvailable("ARMYS_MUSE")&&(s="ARMYS_MUSE");const c=a.getSpeedModifier(s);return a.config.adjustedSksGCD(2.5,c)},jobPotencyModifiers:a=>a.getJobPotencyModifiers(e)}),ns=(e,t,n,a)=>st("BRD",e,t,n,{...a,jobPotencyModifiers:s=>s.getJobPotencyModifiers(e)}),nr=(e,t,n,a)=>Ze("BRD",e,t,n,a);la("HEAVY_SHOT",1,{potency:160,applicationDelay:1.47,onApplication:e=>e.maybeGainProc("HAWKS_EYE",.2),autoUpgrade:{trait:"HEAVY_SHOT_MASTERY",otherSkill:"BURST_SHOT"}});la("BURST_SHOT",1,{startOnHotbar:!1,potency:[["NEVER",200],["RANGED_MASTERY",220]],applicationDelay:1.47,onApplication:e=>e.maybeGainProc("HAWKS_EYE",.35)});la("REFULGENT_ARROW",70,{potency:[["NEVER",260],["RANGED_MASTERY",280]],applicationDelay:1.47,onConfirm:e=>{e.hasResourceAvailable("BARRAGE")?e.tryConsumeResource("BARRAGE"):e.tryConsumeResource("HAWKS_EYE")},validateAttempt:e=>e.hasResourceAvailable("HAWKS_EYE")||e.hasResourceAvailable("BARRAGE"),highlightIf:e=>e.hasResourceAvailable("HAWKS_EYE")||e.hasResourceAvailable("BARRAGE")});const LT=[{skillName:"CAUSTIC_BITE",dotName:"CAUSTIC_BITE",initialPotency:150,tickPotency:20},{skillName:"STORMBITE",dotName:"STORMBITE",initialPotency:100,tickPotency:25}];LT.forEach(e=>{la(e.skillName,1,{potency:e.initialPotency,applicationDelay:1.29,onConfirm:(t,n)=>t.addDoTPotencies({node:n,effectName:e.dotName,skillName:e.skillName,tickPotency:e.tickPotency,speedStat:"sks",modifiers:t.getJobPotencyModifiers(e.skillName)}),onApplication:(t,n)=>{t.applyDoT(e.dotName,n),t.hasTraitUnlocked("BITE_MASTERY_II")&&t.maybeGainProc("HAWKS_EYE",.35)}})});la("IRON_JAWS",56,{potency:100,applicationDelay:.67,onConfirm:(e,t)=>{console.assert(t.targetList.length===1,"Iron Jaws must have exactly 1 target");const n=LT.map(a=>e.hasDebuffActive(a.dotName,t.targetList[0]));e.addEvent(new xe("iron jaws dot refresh",.67,()=>{LT.forEach((a,s)=>{e.refreshDoT({node:t,effectName:a.dotName,tickPotency:a.tickPotency,skillName:"IRON_JAWS",speedStat:"sks",modifiers:e.getJobPotencyModifiers("IRON_JAWS")},n[s])}),e.hasTraitUnlocked("BITE_MASTERY_II")&&e.maybeGainProc("HAWKS_EYE",.35)}))}});la("APEX_ARROW",80,{potency:e=>{const t=e.resources.get("SOUL_VOICE"),n=20,a=e.hasTraitUnlocked("RANGED_MASTERY")?140:100,s=e.hasTraitUnlocked("RANGED_MASTERY")?700:500,c=1*(t.availableAmount()-n)/(t.maxValue-n);return(s-a)*c+a},falloff:0,applicationDelay:1.07,onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_APEX_ARROW")&&e.resources.get("SOUL_VOICE").availableAmount()>=80&&e.gainStatus("BLAST_ARROW_READY"),e.tryConsumeResource("SOUL_VOICE",!0)},validateAttempt:e=>e.hasResourceAvailable("SOUL_VOICE",20),highlightIf:e=>e.hasResourceAvailable("SOUL_VOICE",80),replaceIf:[{newSkill:"BLAST_ARROW",condition:e=>e.hasResourceAvailable("BLAST_ARROW_READY")}]});la("BLAST_ARROW",86,{startOnHotbar:!1,potency:[["NEVER",600],["RANGED_MASTERY",700]],falloff:.5,applicationDelay:1.65,validateAttempt:e=>e.hasResourceAvailable("BLAST_ARROW_READY"),highlightIf:e=>e.hasResourceAvailable("BLAST_ARROW_READY"),onConfirm:e=>e.tryConsumeResource("BLAST_ARROW_READY")});ns("EMYPREAL_ARROW",54,"cd_EMPYREAL_ARROW",{potency:[["NEVER",240],["RANGED_MASTERY",260]],cooldown:15,applicationDelay:1.03,onConfirm:e=>e.gainRepertoireEffect()});ns("BLOODLETTER",12,"cd_HEARTBREAK_SHOT",{potency:130,cooldown:15,maxCharges:3,applicationDelay:1.65,autoUpgrade:{otherSkill:"HEARTBREAK_SHOT",trait:"BLOODLETTER_MASTERY"}});ns("HEARTBREAK_SHOT",92,"cd_HEARTBREAK_SHOT",{startOnHotbar:!1,potency:180,cooldown:15,maxCharges:3,applicationDelay:1.65});ns("SIDEWINDER",60,"cd_SIDEWINDER",{potency:[["NEVER",320],["RANGED_MASTERY",400]],cooldown:60,applicationDelay:.53});const v2=[{skillName:"WANDERERS_MINUET",song:"WANDERERS_MINUET",skillLevel:52,cdName:"cd_WANDERERS_MINUET",replaceIf:[{newSkill:"PITCH_PERFECT",condition:e=>e.hasResourceAvailable("WANDERERS_MINUET")}]},{skillName:"MAGES_BALLAD",song:"MAGES_BALLAD",skillLevel:30,cdName:"cd_MAGES_BALLAD"},{skillName:"ARMYS_PAEON",song:"ARMYS_PAEON",skillLevel:40,cdName:"cd_ARMYS_PAEON"}];v2.forEach(e=>{ns(e.skillName,e.skillLevel,e.cdName,{applicationDelay:0,requiresCombat:!0,cooldown:120,replaceIf:e.replaceIf,onConfirm:t=>t.beginSong(e.song)})});ns("PITCH_PERFECT",52,"cd_PITCH_PERFECT",{startOnHotbar:!1,applicationDelay:.8,cooldown:1,potency:e=>{const t=e.resources.get("PITCH_PERFECT").availableAmount();return t===3?360:t===2?220:100},falloff:.5,onConfirm:e=>e.tryConsumeResource("PITCH_PERFECT",!0),validateAttempt:e=>e.hasResourceAvailable("WANDERERS_MINUET")&&e.hasResourceAvailable("PITCH_PERFECT"),highlightIf:e=>e.hasResourceAvailable("WANDERERS_MINUET")&&e.hasResourceAvailable("PITCH_PERFECT")});nr("BARRAGE",38,"cd_BARRAGE",{rscType:"BARRAGE",applicationDelay:0,cooldown:120,onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_BARRAGE")&&e.gainStatus("RESONANT_ARROW_READY")},replaceIf:[{newSkill:"RESONANT_ARROW",condition:e=>e.hasResourceAvailable("RESONANT_ARROW_READY")}]});la("RESONANT_ARROW",96,{startOnHotbar:!1,potency:640,falloff:.5,applicationDelay:1.16,onConfirm:e=>e.tryConsumeResource("RESONANT_ARROW_READY"),validateAttempt:e=>e.hasResourceAvailable("RESONANT_ARROW_READY"),highlightIf:e=>e.hasResourceAvailable("RESONANT_ARROW_READY")});nr("RADIANT_FINALE",90,"cd_RADIANT_FINALE",{rscType:"RADIANT_FINALE",applicationDelay:.62,cooldown:110,onConfirm:e=>{const t=e.getCodaCount();e.resources.get("RADIANT_CODA").overrideCurrentValue(t),e.tryConsumeResource("WANDERERS_CODA"),e.tryConsumeResource("MAGES_CODA"),e.tryConsumeResource("ARMYS_CODA"),e.hasTraitUnlocked("ENHANCED_RADIANT_FINALE")&&e.gainStatus("RADIANT_ENCORE_READY")},validateAttempt:e=>e.getCodaCount()>0,replaceIf:[{newSkill:"RADIANT_ENCORE",condition:e=>e.hasResourceAvailable("RADIANT_ENCORE_READY")}]});la("RADIANT_ENCORE",100,{startOnHotbar:!1,potency:e=>{const t=e.resources.get("RADIANT_CODA").availableAmount();return t===3?1100:t===2?800:700},falloff:.5,applicationDelay:1.96,onConfirm:e=>e.tryConsumeResource("RADIANT_ENCORE_READY"),validateAttempt:e=>e.hasResourceAvailable("RADIANT_ENCORE_READY"),highlightIf:e=>e.hasResourceAvailable("RADIANT_ENCORE_READY")});nr("RAGING_STRIKES",4,"cd_RAGING_STRIKES",{rscType:"RAGING_STRIKES",applicationDelay:.53,cooldown:120});nr("BATTLE_VOICE",50,"cd_BATTLE_VOICE",{rscType:"BATTLE_VOICE",applicationDelay:.62,cooldown:120});la("QUICK_NOCK",18,{potency:110,applicationDelay:1.11,onApplication:e=>e.maybeGainProc("HAWKS_EYE",.2),falloff:0,autoUpgrade:{trait:"QUICK_NOCK_MASTERY",otherSkill:"LADONSBITE"}});la("LADONSBITE",82,{startOnHotbar:!1,potency:140,falloff:0,applicationDelay:1.11,onApplication:e=>e.maybeGainProc("HAWKS_EYE",.35)});la("WIDE_VOLLEY",18,{potency:140,falloff:0,applicationDelay:1.43,onConfirm:e=>{e.hasResourceAvailable("BARRAGE")?e.tryConsumeResource("BARRAGE"):e.tryConsumeResource("HAWKS_EYE")},validateAttempt:e=>e.hasResourceAvailable("HAWKS_EYE")||e.hasResourceAvailable("BARRAGE"),highlightIf:e=>e.hasResourceAvailable("HAWKS_EYE")||e.hasResourceAvailable("BARRAGE"),autoUpgrade:{trait:"WIDE_VOLLEY_MASTERY",otherSkill:"SHADOWBITE"}});la("SHADOWBITE",72,{startOnHotbar:!1,potency:200,falloff:0,applicationDelay:1.43,onConfirm:e=>{e.hasResourceAvailable("BARRAGE")?e.tryConsumeResource("BARRAGE"):e.tryConsumeResource("HAWKS_EYE")},validateAttempt:e=>e.hasResourceAvailable("HAWKS_EYE")||e.hasResourceAvailable("BARRAGE"),highlightIf:e=>e.hasResourceAvailable("HAWKS_EYE")||e.hasResourceAvailable("BARRAGE")});ns("RAIN_OF_DEATH",45,"cd_HEARTBREAK_SHOT",{potency:100,cooldown:15,maxCharges:3,falloff:0,applicationDelay:1.65});nr("WARDENS_PAEAN",35,"cd_WARDENS_PAEAN",{rscType:"WARDENS_PAEAN",cooldown:45,applicationDelay:.62});nr("NATURES_MINNE",35,"cd_NATURES_MINNE",{rscType:"NATURES_MINNE",cooldown:120,applicationDelay:.62});ns("REPELLING_SHOT",15,"cd_REPELLING_SHOT",{cooldown:30,animationLock:Jt});nr("TROUBADOUR",56,"cd_TROUBADOUR",{rscType:"TROUBADOUR",maxCharges:1,cooldown:90,applicationDelay:0});Object.keys(aS).filter(e=>!(e==="ESPRIT_PARTNER"||e==="STANDARD_FINISH_PARTNER")).forEach(e=>qt(e,`DNC/${Ke[e].name}.png`));qt("ESPRIT_PARTNER","DNC/Esprit.png");qt("STANDARD_FINISH_PARTNER","DNC/Standard Finish.png");const zC=["ESPRIT_TECHNICAL","ESPRIT_PARTNER","STANDARD_FINISH_PARTNER","DANCE_PARTNER"];class M2 extends en{jobSpecificOtherTargetedBuffViewProps(){return zC.map(t=>t==="DANCE_PARTNER"?this.makeCommonTimerless(t,!1):this.makeCommonTimer(t,!1))}jobSpecificSelfTargetedBuffViewProps(){return[...Object.keys(aS).filter(t=>!zC.includes(t)).map(t=>t==="CLOSED_POSITION"||t==="RISING_RHYTHM"?this.makeCommonTimerless(t):this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){const n=this.state.resources,a=n.get("FEATHER_GAUGE").availableAmount(),s=n.get("STANDARD_DANCE").availableAmount(),c=n.get("TECHNICAL_DANCE").availableAmount(),d=[];if(this.state.hasTraitUnlocked("ESPRIT")){const f=n.get("ESPRIT_GAUGE").availableAmount();d.push({kind:"bar",name:N({en:"Esprit",zh:""}),color:t.dnc.esprit,progress:f/100,valueString:f.toFixed(0)})}return d.push({kind:"counter",name:N({en:"Feathers",zh:""}),color:t.dnc.feathers,currentStacks:a,maxStacks:4},{kind:"dance",name:N({en:"Standard",zh:""}),maxStacks:2,currentStacks:s,emboiteColor:t.dnc.emboite,entrechatColor:t.dnc.entrechat,jeteColor:t.dnc.jete,pirouetteColor:t.dnc.pirouette},{kind:"dance",name:N({en:"Technical",zh:""}),maxStacks:4,currentStacks:c,emboiteColor:t.dnc.emboite,entrechatColor:t.dnc.entrechat,jeteColor:t.dnc.jete,pirouetteColor:t.dnc.pirouette}),d}statusLayoutFn(t){return l.jsxs("div",{children:[l.jsxs("div",{style:{display:"inline-block",verticalAlign:"top",width:"50%",height:"100%"},children:[l.jsxs("span",{style:{display:"block",marginBottom:10},children:[N({en:"time: ",zh:"",ja:""}),`${tt.displayTime(t.time,3)} (${t.time.toFixed(3)})`]}),t.resources?l.jsx(jO,{data:{level:t.level,resources:t.resources},style:{height:"17em"}}):void 0]}),l.jsxs("div",{style:{position:"relative",display:"inline-block",float:"right",width:"50%"},children:[t.resourceLocks?l.jsx(FO,{data:t.resourceLocks}):void 0,l.jsx(iE,{data:t.enemyBuffs,style:{marginTop:50,marginBottom:"2em"}}),l.jsx(iE,{data:t.selfBuffs,style:{position:"absolute",right:0,width:"200%"}})]})]})}}const ft=(e,t,n)=>{Je("DNC",e,t,n??{})};ft("ESPRIT_GAUGE",100,{warnOnOvercap:!0});ft("FEATHER_GAUGE",4,{warnOnOvercap:!0});ft("STANDARD_DANCE",2);ft("TECHNICAL_DANCE",4);ft("SILKEN_SYMMETRY",1,{timeout:30});ft("SILKEN_FLOW",1,{timeout:30});ft("FLOURISHING_SYMMETRY",1,{timeout:30});ft("FLOURISHING_FLOW",1,{timeout:30});ft("THREEFOLD_FAN_DANCE",1,{timeout:30,warnOnOvercap:!0});ft("FOURFOLD_FAN_DANCE",1,{timeout:30});ft("FINISHING_MOVE_READY",1,{timeout:30});ft("FLOURISHING_STARFALL",1,{timeout:20});ft("STANDARD_STEP",1,{timeout:15});ft("STANDARD_FINISH",1,{timeout:60});ft("STANDARD_BONUS",2,{timeout:60});ft("ESPRIT",1,{timeout:60});ft("TECHNICAL_STEP",1,{timeout:15});ft("TECHNICAL_FINISH",1,{timeout:20.5});ft("TECHNICAL_BONUS",4,{timeout:20.5});ft("LAST_DANCE_READY",1,{timeout:30});ft("DANCE_OF_THE_DAWN_READY",1,{timeout:30});ft("FLOURISHING_FINISH",1,{timeout:30});ft("CLOSED_POSITION",1,{default:1});ft("DEVILMENT",1,{timeout:20});ft("SHIELD_SAMBA",1,{timeout:15});ft("IMPROVISATION",1,{timeout:15});ft("RISING_RHYTHM",4,{timeout:15});ft("IMPROVISATION_REGEN",1,{timeout:15});ft("IMPROVISED_FINISH",1,{timeout:30});ft("DANCE_PARTNER",1,{default:1});ft("ESPRIT_PARTNER",1,{timeout:60});ft("STANDARD_FINISH_PARTNER",1,{timeout:60});ft("ESPRIT_TECHNICAL",1,{timeout:20});ft("CASCADE_COMBO",1,{timeout:30});ft("WINDMILL_COMBO",1,{timeout:30});const L2=["CASCADE","FOUNTAIN","WINDMILL","BLADESHOWER"],x2=["EMBOITE","ENTRECHAT","JETE","PIROUETTE"];class H2 extends tn{constructor(t){super(t),this.hasTraitUnlocked("ESPRIT")||this.resources.set(new On("ESPRIT_GAUGE",0,0,!0));const n=this.hasTraitUnlocked("ENHANCED_EN_AVANT_II")?3:2;this.cooldowns.set(new ze("cd_EN_AVANT",30,n,n));const a=this.hasTraitUnlocked("ENHANCED_SHIELD_SAMBA")?90:120;this.cooldowns.set(new ze("cd_SHIELD_SAMBA",a,1,1)),this.registerRecurringEvents()}get statusPropsGenerator(){return new M2(this)}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("TECHNICAL_FINISH")&&t.addBuff(U.TechnicalFinish),this.hasResourceAvailable("DEVILMENT")&&t.addBuff(U.Devilment)}cancelChanneledSkills(){this.tryConsumeResource("IMPROVISATION"),this.tryConsumeResource("RISING_RHYTHM",!0)}processComboStatus(t){if(!L2.includes(t))return;const n=t==="CASCADE",a=t==="WINDMILL";this.setComboState("CASCADE_COMBO",n?1:0),this.setComboState("WINDMILL_COMBO",a?1:0)}getCurrentDanceStatus(){const t=this.hasResourceAvailable("STANDARD_STEP")?"STANDARD_DANCE":"TECHNICAL_DANCE";return this.resources.get(t).availableAmount()}processDanceStatus(t){if(!x2.includes(t))return;const n=this.hasResourceAvailable("STANDARD_STEP")?"STANDARD_DANCE":"TECHNICAL_DANCE";let a=0;switch(t){case"ENTRECHAT":a=1;break;case"JETE":a=2;break;case"PIROUETTE":a=3;break}const s=this.resources.get(n);s.availableAmount()===a&&s.gain(1)}gainProc(t){this.gainStatus(t)}maybeGainProc(t,n=.5){super.maybeGainProc(t,n,!0)}gainProcIfCombo(t,n){this.triggersEffect(.5,!0)&&n&&this.gainProc(t)}gainResource(t,n){this.resources.get(t).gain(n)}maybeGainResource(t,n,a=.5){this.triggersEffect(a,!0)&&this.gainResource(t,n)}simulatePartyEspritGain(){if(this.hasResourceAvailable("ESPRIT_TECHNICAL")){for(let t=0;t<this.resources.get("PARTY_SIZE").availableAmount()-1;t++)this.maybeGainResource("ESPRIT_GAUGE",10,.2);return}this.hasResourceAvailable("ESPRIT_PARTNER")&&this.maybeGainResource("ESPRIT_GAUGE",10,.2)}applyStandardFinish(t){t!==0&&(this.gainProc("STANDARD_FINISH"),this.gainStatus("STANDARD_BONUS",t),this.hasResourceAvailable("DANCE_PARTNER")&&this.gainProc("STANDARD_FINISH_PARTNER"),this.hasTraitUnlocked("ESPRIT")&&(this.gainProc("ESPRIT"),this.hasResourceAvailable("DANCE_PARTNER")&&this.gainProc("ESPRIT_PARTNER")),this.hasTraitUnlocked("ENHANCED_STANDARD_FINISH")&&this.gainProc("LAST_DANCE_READY"))}}const hn=e=>e.hasResourceAvailable("STANDARD_STEP")||e.hasResourceAvailable("TECHNICAL_STEP"),ZO={newSkill:"EMBOITE",condition:e=>hn(e)},$O={newSkill:"ENTRECHAT",condition:e=>hn(e)},QO={newSkill:"JETE",condition:e=>hn(e)},JO={newSkill:"PIROUETTE",condition:e=>hn(e)},nn=(e,t,n)=>{const a=Pe(s=>{n.potency&&s.simulatePartyEspritGain()},n.onConfirm,s=>s.processComboStatus(e));return un("DNC",e,t,{...n,onConfirm:a,jobPotencyModifiers:s=>{const c=[];if(s.hasResourceAvailable("STANDARD_FINISH")){const d=s.resources.get("STANDARD_BONUS").availableAmount()===2?$.DoubleStandardFinish:$.SingleStandardFinish;c.push(d)}if(s.hasResourceAvailable("TECHNICAL_FINISH")){const d=s.resources.get("TECHNICAL_BONUS").availableAmount(),f=d===4?$.QuadrupleTechnicalFinish:d===3?$.TripleTechnicalFinish:$.SingleTechnicalFinish;c.push(f)}return s.hasResourceAvailable("DEVILMENT")&&c.push($.Devilment),e==="STARFALL_DANCE"&&c.push($.AutoCDH),c}})},Za=(e,t,n,a)=>st("DNC",e,t,n,{...a,onConfirm:a.onConfirm,jobPotencyModifiers:s=>{const c=[];if(s.hasResourceAvailable("STANDARD_FINISH")){const d=s.resources.get("STANDARD_BONUS").availableAmount()===2?$.DoubleStandardFinish:$.SingleStandardFinish;c.push(d)}if(s.hasResourceAvailable("TECHNICAL_FINISH")){const d=s.resources.get("TECHNICAL_BONUS").availableAmount(),f=d===4?$.QuadrupleTechnicalFinish:d===3?$.TripleTechnicalFinish:$.SingleTechnicalFinish;c.push(f)}return s.hasResourceAvailable("DEVILMENT")&&c.push($.Devilment),c}}),eD=(e,t,n,a)=>Ze("DNC",e,t,n,a);nn("EMBOITE",15,{startOnHotbar:!1,recastTime:1,onConfirm:e=>e.processDanceStatus("EMBOITE"),highlightIf:e=>hn(e)&&e.getCurrentDanceStatus()===0});nn("ENTRECHAT",15,{startOnHotbar:!1,recastTime:1,onConfirm:e=>e.processDanceStatus("ENTRECHAT"),highlightIf:e=>hn(e)&&e.getCurrentDanceStatus()===1});nn("JETE",15,{startOnHotbar:!1,recastTime:1,onConfirm:e=>e.processDanceStatus("JETE"),highlightIf:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===2});nn("PIROUETTE",15,{startOnHotbar:!1,recastTime:1,onConfirm:e=>e.processDanceStatus("PIROUETTE"),highlightIf:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===3});nn("CASCADE",1,{replaceIf:[ZO],potency:[["NEVER",200],["DYNAMIC_DANCER",220]],recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.8,onConfirm:e=>{e.maybeGainProc("SILKEN_SYMMETRY"),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",5)}});nn("FOUNTAIN",2,{replaceIf:[$O],potency:[["NEVER",100],["DYNAMIC_DANCER",120]],combo:{potency:[["NEVER",260],["DYNAMIC_DANCER",280]],resource:"CASCADE_COMBO",resourceValue:1},recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.98,onConfirm:e=>{e.gainProcIfCombo("SILKEN_FLOW",e.hasResourceExactly("CASCADE_COMBO",1)),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",5)},highlightIf:e=>e.resources.get("CASCADE_COMBO").availableAmount()===1});nn("REVERSE_CASCADE",20,{replaceIf:[QO],potency:[["NEVER",260],["DYNAMIC_DANCER",280]],recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("SILKEN_SYMMETRY")||e.hasResourceAvailable("FLOURISHING_SYMMETRY"),onConfirm:e=>{e.hasResourceAvailable("SILKEN_SYMMETRY")?e.tryConsumeResource("SILKEN_SYMMETRY"):e.tryConsumeResource("FLOURISHING_SYMMETRY"),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",10),e.maybeGainResource("FEATHER_GAUGE",1)},highlightIf:e=>e.hasResourceAvailable("SILKEN_SYMMETRY")||e.hasResourceAvailable("FLOURISHING_SYMMETRY")});nn("FOUNTAINFALL",40,{replaceIf:[JO],potency:[["NEVER",320],["DYNAMIC_DANCER",340]],recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:1.21,validateAttempt:e=>e.hasResourceAvailable("SILKEN_FLOW")||e.hasResourceAvailable("FLOURISHING_FLOW"),onConfirm:e=>{e.hasResourceAvailable("SILKEN_FLOW")?e.tryConsumeResource("SILKEN_FLOW"):e.tryConsumeResource("FLOURISHING_FLOW"),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",10),e.maybeGainResource("FEATHER_GAUGE",1)},highlightIf:e=>e.hasResourceAvailable("SILKEN_FLOW")||e.hasResourceAvailable("FLOURISHING_FLOW")});Za("FAN_DANCE",30,"cd_FAN_DANCE",{potency:[["NEVER",150],["DYNAMIC_DANCER",180]],cooldown:1,applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("FEATHER_GAUGE")&&!hn(e),highlightIf:e=>e.hasResourceAvailable("FEATHER_GAUGE"),onConfirm:e=>{e.tryConsumeResource("FEATHER_GAUGE"),e.maybeGainProc("THREEFOLD_FAN_DANCE")}});nn("SABER_DANCE",76,{replaceIf:[{newSkill:"DANCE_OF_THE_DAWN",condition:e=>e.hasResourceAvailable("DANCE_OF_THE_DAWN_READY")&&e.hasResourceAvailable("ESPRIT_GAUGE",50)}],potency:[["NEVER",500],["DYNAMIC_DANCER",540]],recastTime:e=>e.config.adjustedSksGCD(),falloff:.6,applicationDelay:.44,validateAttempt:e=>e.hasResourceAvailable("ESPRIT_GAUGE",50)&&!hn(e),highlightIf:e=>e.hasResourceAvailable("ESPRIT_GAUGE",50),onConfirm:e=>e.resources.get("ESPRIT_GAUGE").consume(50)});nn("DANCE_OF_THE_DAWN",100,{startOnHotbar:!1,potency:1e3,recastTime:e=>e.config.adjustedSksGCD(),falloff:.6,applicationDelay:.44,validateAttempt:e=>e.hasResourceAvailable("ESPRIT_GAUGE",50)&&!hn(e),highlightIf:e=>e.hasResourceAvailable("ESPRIT_GAUGE",50),onConfirm:e=>{e.resources.get("ESPRIT_GAUGE").consume(50),e.tryConsumeResource("DANCE_OF_THE_DAWN_READY")}});nn("LAST_DANCE",92,{potency:540,recastTime:e=>e.config.adjustedSksGCD(),falloff:.6,applicationDelay:1.26,validateAttempt:e=>e.hasResourceAvailable("LAST_DANCE_READY")&&!hn(e),highlightIf:e=>e.hasResourceAvailable("LAST_DANCE_READY"),onConfirm:e=>e.tryConsumeResource("LAST_DANCE_READY")});nn("STANDARD_STEP",15,{replaceIf:[{newSkill:"STANDARD_FINISH",condition:e=>e.hasResourceAvailable("STANDARD_STEP")&&e.getCurrentDanceStatus()===0},{newSkill:"SINGLE_STANDARD_FINISH",condition:e=>e.hasResourceAvailable("STANDARD_STEP")&&e.getCurrentDanceStatus()===1},{newSkill:"DOUBLE_STANDARD_FINISH",condition:e=>e.hasResourceAvailable("STANDARD_STEP")&&e.getCurrentDanceStatus()===2},{newSkill:"FINISHING_MOVE",condition:e=>e.hasResourceAvailable("FINISHING_MOVE_READY")}],validateAttempt:e=>!hn(e),onConfirm:e=>e.gainProc("STANDARD_STEP"),recastTime:1.5,secondaryCooldown:{cdName:"cd_STANDARD_STEP",cooldown:30,maxCharges:1}});nn("FINISHING_MOVE",96,{startOnHotbar:!1,potency:850,recastTime:e=>e.config.adjustedSksGCD(),falloff:.6,applicationDelay:2.05,onConfirm:e=>{e.applyStandardFinish(2),e.tryConsumeResource("FINISHING_MOVE_READY")},secondaryCooldown:{cdName:"cd_STANDARD_STEP",cooldown:30,maxCharges:1},validateAttempt:e=>e.hasResourceAvailable("FINISHING_MOVE_READY")&&!hn(e),highlightIf:e=>e.hasResourceAvailable("FINISHING_MOVE_READY")});const k2=[{skill:"STANDARD_FINISH",potency:360},{skill:"SINGLE_STANDARD_FINISH",potency:540},{skill:"DOUBLE_STANDARD_FINISH",potency:[["NEVER",800],["DYNAMIC_DANCER",850]]}];k2.forEach(e=>{nn(e.skill,15,{assetPath:"DNC/Standard Finish.png",startOnHotbar:!1,potency:e.potency,falloff:.6,applicationDelay:.54,onConfirm:t=>{const n=t.getCurrentDanceStatus();t.tryConsumeResource("STANDARD_STEP"),t.tryConsumeResource("STANDARD_DANCE",!0),n!==0&&t.applyStandardFinish(n)},recastTime:1.5,validateAttempt:t=>t.hasResourceAvailable("STANDARD_STEP"),highlightIf:t=>t.hasResourceAvailable("STANDARD_STEP")&&t.getCurrentDanceStatus()===2})});Za("FLOURISH",72,"cd_FLOURISH",{cooldown:60,requiresCombat:!0,validateAttempt:e=>!hn(e),onConfirm:e=>{e.gainProc("FLOURISHING_SYMMETRY"),e.gainProc("FLOURISHING_FLOW"),e.gainProc("THREEFOLD_FAN_DANCE"),e.hasTraitUnlocked("ENHANCED_FLOURISH")&&e.gainProc("FOURFOLD_FAN_DANCE"),e.hasTraitUnlocked("ENHANCED_FLOURISH_II")&&e.gainProc("FINISHING_MOVE_READY")}});Za("FAN_DANCE_III",66,"cd_FAN_DANCE_III",{potency:[["NEVER",200],["DYNAMIC_DANCER",220]],cooldown:1,falloff:.6,applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("THREEFOLD_FAN_DANCE")&&!hn(e),highlightIf:e=>e.hasResourceAvailable("THREEFOLD_FAN_DANCE"),onConfirm:e=>e.tryConsumeResource("THREEFOLD_FAN_DANCE")});Za("FAN_DANCE_IV",86,"cd_FAN_DANCE_IV",{potency:[["NEVER",300],["DYNAMIC_DANCER",460]],falloff:.6,cooldown:1,applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("FOURFOLD_FAN_DANCE")&&!hn(e),highlightIf:e=>e.hasResourceAvailable("FOURFOLD_FAN_DANCE"),onConfirm:e=>e.tryConsumeResource("FOURFOLD_FAN_DANCE")});nn("TECHNICAL_STEP",70,{replaceIf:[{newSkill:"TECHNICAL_FINISH",condition:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===0},{newSkill:"SINGLE_TECHNICAL_FINISH",condition:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===1},{newSkill:"DOUBLE_TECHNICAL_FINISH",condition:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===2},{newSkill:"TRIPLE_TECHNICAL_FINISH",condition:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===3},{newSkill:"QUADRUPLE_TECHNICAL_FINISH",condition:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===4},{newSkill:"TILLANA",condition:e=>e.hasResourceAvailable("FLOURISHING_FINISH")}],validateAttempt:e=>!hn(e),onConfirm:e=>e.gainProc("TECHNICAL_STEP"),recastTime:1.5,falloff:.75,secondaryCooldown:{cdName:"cd_TECHNICAL_STEP",cooldown:120,maxCharges:1}});nn("TILLANA",82,{startOnHotbar:!1,potency:600,recastTime:e=>e.config.adjustedSksGCD(),falloff:.6,applicationDelay:.84,onConfirm:e=>{e.gainResource("ESPRIT_GAUGE",50),e.tryConsumeResource("FLOURISHING_FINISH")},validateAttempt:e=>e.hasResourceAvailable("FLOURISHING_FINISH")&&!hn(e),highlightIf:e=>e.hasResourceAvailable("FLOURISHING_FINISH")});nn("TECHNICAL_FINISH",70,{startOnHotbar:!1,potency:350,applicationDelay:.54,onConfirm:e=>{e.tryConsumeResource("TECHNICAL_STEP"),e.tryConsumeResource("TECHNICAL_DANCE",!0)},recastTime:1.5,validateAttempt:e=>e.hasResourceAvailable("TECHNICAL_STEP")});const U2=[{skill:"TECHNICAL_FINISH",potency:350},{skill:"SINGLE_TECHNICAL_FINISH",potency:540},{skill:"DOUBLE_TECHNICAL_FINISH",potency:720},{skill:"TRIPLE_TECHNICAL_FINISH",potency:900},{skill:"QUADRUPLE_TECHNICAL_FINISH",potency:[["NEVER",1200],["DYNAMIC_DANCER",1300]]}];U2.forEach(e=>{nn(e.skill,70,{assetPath:"DNC/Technical Finish.png",startOnHotbar:!1,potency:e.potency,applicationDelay:.54,falloff:.6,onConfirm:t=>{const n=t.getCurrentDanceStatus();t.tryConsumeResource("TECHNICAL_STEP"),t.tryConsumeResource("TECHNICAL_DANCE",!0),n!==0&&(t.gainProc("TECHNICAL_FINISH"),t.hasTraitUnlocked("ESPRIT")&&t.gainProc("ESPRIT_TECHNICAL"),t.gainStatus("TECHNICAL_BONUS",n),t.hasTraitUnlocked("ENHANCED_TECHNICAL_FINISH")&&t.gainProc("FLOURISHING_FINISH"),t.hasTraitUnlocked("ENHANCED_TECHNICAL_FINISH_II")&&t.gainProc("DANCE_OF_THE_DAWN_READY"))},recastTime:1.5,validateAttempt:t=>t.hasResourceAvailable("TECHNICAL_STEP"),highlightIf:t=>t.hasResourceAvailable("TECHNICAL_STEP")&&t.getCurrentDanceStatus()===4})});eD("DEVILMENT",62,"cd_DEVILMENT",{replaceIf:[{newSkill:"STARFALL_DANCE",condition:e=>e.hasResourceAvailable("FLOURISHING_STARFALL")}],rscType:"DEVILMENT",applicationDelay:0,cooldown:120,validateAttempt:e=>!hn(e),onApplication:e=>{e.hasTraitUnlocked("ENHANCED_DEVILMENT")&&e.gainProc("FLOURISHING_STARFALL")}});nn("STARFALL_DANCE",90,{startOnHotbar:!1,potency:600,recastTime:e=>e.config.adjustedSksGCD(),falloff:.75,applicationDelay:.89,validateAttempt:e=>e.hasResourceAvailable("FLOURISHING_STARFALL")&&!hn(e),highlightIf:e=>e.hasResourceAvailable("FLOURISHING_STARFALL"),onConfirm:e=>e.tryConsumeResource("FLOURISHING_STARFALL")});nn("WINDMILL",15,{replaceIf:[ZO],potency:120,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.62,onConfirm:e=>{e.maybeGainProc("SILKEN_SYMMETRY"),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",5)}});nn("BLADESHOWER",25,{replaceIf:[$O],potency:100,recastTime:e=>e.config.adjustedSksGCD(),combo:{potency:160,resource:"WINDMILL_COMBO",resourceValue:1},falloff:0,applicationDelay:.62,onConfirm:e=>{e.gainProcIfCombo("SILKEN_FLOW",e.hasResourceExactly("WINDMILL_COMBO",1)),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",5)},highlightIf:e=>e.resources.get("WINDMILL_COMBO").availableAmount()===1});nn("RISING_WINDMILL",35,{replaceIf:[QO],potency:160,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("SILKEN_SYMMETRY")||e.hasResourceAvailable("FLOURISHING_SYMMETRY"),onConfirm:e=>{e.hasResourceAvailable("SILKEN_SYMMETRY")?e.tryConsumeResource("SILKEN_SYMMETRY"):e.tryConsumeResource("FLOURISHING_SYMMETRY"),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",10),e.maybeGainResource("FEATHER_GAUGE",1)},highlightIf:e=>e.hasResourceAvailable("SILKEN_SYMMETRY")||e.hasResourceAvailable("FLOURISHING_SYMMETRY")});nn("BLOODSHOWER",45,{replaceIf:[JO],potency:200,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("SILKEN_FLOW")||e.hasResourceAvailable("FLOURISHING_FLOW"),onConfirm:e=>{e.hasResourceAvailable("SILKEN_FLOW")?e.tryConsumeResource("SILKEN_FLOW"):e.tryConsumeResource("FLOURISHING_FLOW"),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",10),e.maybeGainResource("FEATHER_GAUGE",1)},highlightIf:e=>e.hasResourceAvailable("SILKEN_FLOW")||e.hasResourceAvailable("FLOURISHING_FLOW")});Za("FAN_DANCE_II",30,"cd_FAN_DANCE_II",{potency:100,cooldown:1,falloff:0,applicationDelay:.54,validateAttempt:e=>e.hasResourceAvailable("FEATHER_GAUGE")&&!hn(e),highlightIf:e=>e.hasResourceAvailable("FEATHER_GAUGE"),onConfirm:e=>{e.tryConsumeResource("FEATHER_GAUGE"),e.maybeGainProc("THREEFOLD_FAN_DANCE")}});Za("CURING_WALTZ",52,"cd_CURING_WALTZ",{cooldown:60,applicationDelay:.58});Za("IMPROVISATION",80,"cd_IMPROVISATION",{replaceIf:[{newSkill:"IMPROVISED_FINISH",condition:e=>e.hasResourceAvailable("IMPROVISATION")}],cooldown:120,applicationDelay:.89,validateAttempt:e=>!hn(e),onConfirm:e=>{e.gainProc("IMPROVISATION"),e.gainProc("IMPROVISATION_REGEN");const t=()=>{e.hasResourceAvailable("IMPROVISATION")&&(e.resources.get("RISING_RHYTHM").gain(1),e.gainProc("IMPROVISATION_REGEN"),e.resources.addResourceEvent({rscType:"RISING_RHYTHM",name:"rising rhythm tic",delay:3,fnOnRsc:n=>t()}))};e.resources.addResourceEvent({rscType:"RISING_RHYTHM",name:"rising rhythm tic",delay:3,fnOnRsc:n=>t()}),e.resources.addResourceEvent({rscType:"IMPROVISATION",name:"improvisation timeout",delay:jt("DNC","IMPROVISATION").maxTimeout,fnOnRsc:n=>{n.consume(1),e.tryConsumeResource("RISING_RHYTHM",!0)}})}});Za("IMPROVISED_FINISH",80,"cd_IMPROVISED_FINISH",{startOnHotbar:!1,cooldown:120,applicationDelay:.71,validateAttempt:e=>!hn(e),onConfirm:e=>e.gainProc("IMPROVISED_FINISH")});Za("EN_AVANT",50,"cd_EN_AVANT",{cooldown:30,maxCharges:3,animationLock:Jt});eD("SHIELD_SAMBA",56,"cd_SHIELD_SAMBA",{rscType:"SHIELD_SAMBA",maxCharges:1,cooldown:90,applicationDelay:0});Za("CLOSED_POSITION",60,"cd_CLOSED_POSITION",{replaceIf:[{newSkill:"ENDING",condition:e=>e.hasResourceAvailable("CLOSED_POSITION")}],cooldown:30,maxCharges:1,applicationDelay:0,onConfirm:e=>{e.resources.get("CLOSED_POSITION").gain(1),e.resources.get("DANCE_PARTNER").gain(1)},validateAttempt:e=>!e.hasResourceAvailable("CLOSED_POSITION"),secondaryCooldown:{cdName:"cd_ENDING",cooldown:1,maxCharges:1}});Za("ENDING",60,"cd_ENDING",{startOnHotbar:!1,cooldown:1,maxCharges:1,applicationDelay:0,onConfirm:e=>{e.tryConsumeResource("CLOSED_POSITION",!0),e.tryConsumeResource("DANCE_PARTNER",!0),e.tryConsumeResource("STANDARD_FINISH_PARTNER",!0),e.tryConsumeResource("ESPRIT_PARTNER",!0)},secondaryCooldown:{cdName:"cd_CLOSED_POSITION",cooldown:30,maxCharges:1}});const tD=["CHAOS_THRUST_DOT","CHAOTIC_SPRING_DOT"],w2=Object.keys(oS).filter(e=>!tD.includes(e));Object.keys(oS).forEach(e=>qt(e,`DRG/${Ke[e].name}.png`));class P2 extends en{jobSpecificOtherTargetedBuffViewProps(){return[...tD.flatMap(t=>this.makeTargetedTimers(t))]}jobSpecificSelfTargetedBuffViewProps(){return w2.map(t=>this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){var T,S,g,_;const n=this.state.resources,a=n.get("DRG_CHAOS_COMBO_TRACKER"),s=n.get("DRG_HEAVENS_COMBO_TRACKER"),c=n.get("DRG_AOE_COMBO_TRACKER"),d=n.get("FIRSTMINDS_FOCUS").availableAmount(),f=n.get("LIFE_OF_THE_DRAGON"),h=f.available(1)?(T=f.pendingChange)==null?void 0:T.timeTillEvent:void 0,m=a.available(1)?(S=a.pendingChange)==null?void 0:S.timeTillEvent:s.available(1)?(g=s.pendingChange)==null?void 0:g.timeTillEvent:c.available(1)?(_=c.pendingChange)==null?void 0:_.timeTillEvent:void 0;return[{kind:"bar",name:N({en:"Combo Timer",zh:""}),color:t.drg.drgComboTimer,progress:m?m/30:0,valueString:(m==null?void 0:m.toFixed(3))??"N/A"},{kind:"bar",name:N({en:"Life of the Dragon"}),color:t.drg.lifeOfTheDragonBar,progress:h?h/20:0,valueString:h?h.toFixed(3):"N/A"},{kind:"counter",name:N({en:"Firstmind's Focus"}),color:t.drg.firstmindsFocusStacks,currentStacks:d,maxStacks:2}]}}const ri=(e,t,n)=>{Je("DRG",e,t,n??{})};ri("POWER_SURGE",1,{timeout:30});ri("LIFE_SURGE",1,{timeout:5.52,warnOnTimeout:!0});ri("ENHANCED_PIERCING_TALON",1,{timeout:15.62});ri("LANCE_CHARGE",1,{timeout:20});ri("DIVE_READY",1,{timeout:15.46,warnOnTimeout:!0});ri("CHAOS_THRUST_DOT",1,{timeout:24});ri("BATTLE_LITANY",1,{timeout:20});ri("LIFE_OF_THE_DRAGON",1,{timeout:20});ri("NASTROND_READY",1,{timeout:20,warnOnTimeout:!0});ri("DRACONIAN_FIRE",1,{timeout:30});ri("CHAOTIC_SPRING_DOT",1,{timeout:24});ri("FIRSTMINDS_FOCUS",2,{warnOnOvercap:!0});ri("DRAGONS_FLIGHT",1,{timeout:30.79});ri("STARCROSS_READY",1,{timeout:20,warnOnTimeout:!0});ri("DRG_CHAOS_COMBO_TRACKER",4,{timeout:30});ri("DRG_HEAVENS_COMBO_TRACKER",4,{timeout:30});ri("DRG_AOE_COMBO_TRACKER",2,{timeout:30});const G2=["DOOM_SPIKE","SONIC_THRUST","COERTHAN_TORMENT","DRACONIAN_FURY"],YC=new Map([["DISEMBOWEL",1],["SPIRAL_BLOW",1],["CHAOS_THRUST",2],["CHAOTIC_SPRING",2],["WHEELING_THRUST",3]]),KC=new Map([["VORPAL_THRUST",1],["LANCE_BARRAGE",1],["FULL_THRUST",2],["HEAVENS_THRUST",2],["FANG_AND_CLAW",3]]);class B2 extends tn{constructor(t){super(t);const n=this.hasTraitUnlocked("ENHANCED_WINGED_GLIDE")?2:1,a=this.hasTraitUnlocked("ENHANCED_LIFE_SURGE")?2:1;[new ze("cd_WINGED_GLIDE",60,n,n),new ze("cd_LIFE_SURGE",40,a,a)].forEach(s=>this.cooldowns.set(s)),this.registerRecurringEvents([{groupedEffects:[{effectName:"CHAOS_THRUST_DOT",appliedBy:["CHAOS_THRUST"]}]},{groupedEffects:[{effectName:"CHAOTIC_SPRING_DOT",appliedBy:["CHAOTIC_SPRING"]}]}])}get statusPropsGenerator(){return new P2(this)}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("POWER_SURGE")&&t.addBuff(U.PowerSurge),this.hasResourceAvailable("LANCE_CHARGE")&&t.addBuff(U.LanceCharge),this.hasResourceAvailable("LIFE_OF_THE_DRAGON")&&t.addBuff(U.LifeOfTheDragon),this.hasResourceAvailable("BATTLE_LITANY")&&t.addBuff(U.BattleLitany),n.name==="PIERCING_TALON"&&this.hasResourceAvailable("ENHANCED_PIERCING_TALON")&&t.addBuff(U.EnhancedPiercingTalon),n.cdName==="cd_GCD"&&this.hasResourceAvailable("LIFE_SURGE")&&t.addBuff(U.LifeSurge)}pushUniversalModifiers(t){this.hasResourceAvailable("POWER_SURGE")&&t.push($.PowerSurge),this.hasResourceAvailable("LANCE_CHARGE")&&t.push($.LanceCharge),this.hasResourceAvailable("LIFE_OF_THE_DRAGON")&&t.push($.LifeOfTheDragon),this.hasResourceAvailable("BATTLE_LITANY")&&t.push($.BattleLitany)}fixDRGComboState(t){if(this.tryConsumeResource("DRACONIAN_FIRE",!0),G2.includes(t)){this.tryConsumeResource("DRG_CHAOS_COMBO_TRACKER",!0),this.tryConsumeResource("DRG_HEAVENS_COMBO_TRACKER",!0);let n=0;t==="DOOM_SPIKE"||t==="DRACONIAN_FURY"?n=1:t==="SONIC_THRUST"&&this.hasResourceExactly("DRG_AOE_COMBO_TRACKER",1)&&(n=2),this.setComboState("DRG_AOE_COMBO_TRACKER",n);return}if(this.tryConsumeResource("DRG_AOE_COMBO_TRACKER",!0),t==="TRUE_THRUST"||t==="RAIDEN_THRUST"){this.tryConsumeResource("DRG_CHAOS_COMBO_TRACKER",!0),this.tryConsumeResource("DRG_HEAVENS_COMBO_TRACKER",!0),this.setComboState("DRG_CHAOS_COMBO_TRACKER",1),this.setComboState("DRG_HEAVENS_COMBO_TRACKER",1);return}if(YC.has(t)){const n=YC.get(t);this.tryConsumeResource("DRG_HEAVENS_COMBO_TRACKER",!0),this.setComboState("DRG_CHAOS_COMBO_TRACKER",this.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",n)?n+1:0)}else if(KC.has(t)){const n=KC.get(t);this.tryConsumeResource("DRG_CHAOS_COMBO_TRACKER",!0),this.setComboState("DRG_HEAVENS_COMBO_TRACKER",this.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",n)?n+1:0)}else t==="DRAKESBANE"&&(this.tryConsumeResource("DRG_HEAVENS_COMBO_TRACKER",!0),this.tryConsumeResource("DRG_CHAOS_COMBO_TRACKER",!0))}checkCombo(t){return this.hasResourceAvailable(t)}gainScale(t){this.resources.get("FIRSTMINDS_FOCUS").gain(t)}refreshBuff(t,n){this.addEvent(new xe("gain buff",n,()=>{this.resources.get(t).gain(1),this.enqueueResourceDrop(t)}))}}const Vn=(e,t,n)=>{const a=Pe(n.onConfirm,s=>{e!=="PIERCING_TALON"&&s.fixDRGComboState(e),s.tryConsumeResource("LIFE_SURGE")});return un("DRG",e,t,{...n,onConfirm:a,recastTime:s=>s.config.adjustedSksGCD(),jobPotencyModifiers:s=>{var d;const c=((d=n.jobPotencyModifiers)==null?void 0:d.call(n,s))??[];return e==="PIERCING_TALON"&&s.hasResourceAvailable("ENHANCED_PIERCING_TALON")&&c.push($.EnhancedPiercingTalon),s.pushUniversalModifiers(c),s.hasResourceAvailable("LIFE_SURGE")&&c.push($.LifeSurge),c}})},xa=(e,t,n,a)=>st("DRG",e,t,n,{...a,onConfirm:a.onConfirm,jobPotencyModifiers:s=>{const c=[];return s.pushUniversalModifiers(c),c}}),F2={newSkill:"DRAKESBANE",condition:e=>e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",4)},j2={newSkill:"DRAKESBANE",condition:e=>e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",4)},z2={newSkill:"RAIDEN_THRUST",condition:e=>e.resources.get("DRACONIAN_FIRE").available(1)},Y2={newSkill:"TRUE_THRUST",condition:e=>!e.resources.get("DRACONIAN_FIRE").available(1)},K2={newSkill:"DRACONIAN_FURY",condition:e=>e.resources.get("DRACONIAN_FIRE").available(1)},V2={newSkill:"DOOM_SPIKE",condition:e=>!e.resources.get("DRACONIAN_FIRE").available(1)},W2={newSkill:"STARCROSS",condition:e=>e.hasResourceAvailable("STARCROSS_READY")&&e.hasResourceAvailable("LIFE_OF_THE_DRAGON")},X2={newSkill:"STARDIVER",condition:e=>!e.hasResourceAvailable("STARCROSS_READY")};Vn("PIERCING_TALON",15,{potency:[["NEVER",150],["LANCE_MASTERY",200]],applicationDelay:.85,onConfirm:e=>{e.tryConsumeResource("ENHANCED_PIERCING_TALON")},highlightIf:e=>e.hasResourceAvailable("ENHANCED_PIERCING_TALON"),startsAuto:!1});Vn("TRUE_THRUST",1,{replaceIf:[z2],potency:[["NEVER",200],["LANCE_MASTERY",230]],applicationDelay:.76});Vn("RAIDEN_THRUST",76,{startOnHotbar:!1,replaceIf:[Y2],potency:[["NEVER",280],["MELEE_MASTERY_DRG",320]],applicationDelay:.62,validateAttempt:e=>e.resources.get("DRACONIAN_FIRE").available(1),highlightIf:e=>e.resources.get("DRACONIAN_FIRE").available(1),onConfirm:e=>{e.hasTraitUnlocked("LANCE_MASTERY_III")&&e.gainScale(1)}});Vn("DISEMBOWEL",18,{autoUpgrade:{trait:"LANCE_MASTERY_IV",otherSkill:"SPIRAL_BLOW"},applicationDelay:1.65,potency:[["NEVER",100],["LANCE_MASTERY",140]],combo:{potency:[["NEVER",220],["LANCE_MASTERY",250]],resource:"DRG_CHAOS_COMBO_TRACKER",resourceValue:1},onConfirm:e=>{e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",1)&&(e.resources.get("POWER_SURGE").gain(1),e.enqueueResourceDrop("POWER_SURGE",31.63))},highlightIf:e=>e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",1)});Vn("SPIRAL_BLOW",96,{autoDowngrade:{trait:"LANCE_MASTERY_IV",otherSkill:"DISEMBOWEL"},applicationDelay:1.38,potency:140,combo:{potency:[["NEVER",300]],resource:"DRG_CHAOS_COMBO_TRACKER",resourceValue:1},onConfirm:e=>{e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",1)&&(e.resources.get("POWER_SURGE").gain(1),e.enqueueResourceDrop("POWER_SURGE",31.38))},highlightIf:e=>e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",1)});Vn("CHAOS_THRUST",50,{autoUpgrade:{trait:"LANCE_MASTERY_II",otherSkill:"CHAOTIC_SPRING"},applicationDelay:1.65,potency:100,combo:{potency:220,resource:"DRG_CHAOS_COMBO_TRACKER",resourceValue:2},positional:{potency:140,comboPotency:260,location:"rear"},onConfirm:(e,t)=>{if(e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",2)){const n=[];e.pushUniversalModifiers(n),e.addDoTPotencies({node:t,effectName:"CHAOS_THRUST_DOT",skillName:"CHAOS_THRUST",tickPotency:40,speedStat:"sks",modifiers:n}),e.addEvent(new xe("apply chaos thrust dot",1.65,()=>{e.applyDoT("CHAOS_THRUST_DOT",t)}))}},highlightIf:e=>e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",2)});Vn("CHAOTIC_SPRING",86,{autoDowngrade:{trait:"LANCE_MASTERY_II",otherSkill:"CHAOS_THRUST"},applicationDelay:.45,potency:140,combo:{potency:300,resource:"DRG_CHAOS_COMBO_TRACKER",resourceValue:2},positional:{potency:180,comboPotency:340,location:"rear"},onConfirm:(e,t)=>{if(e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",2)){const n=[];e.pushUniversalModifiers(n),e.addDoTPotencies({node:t,effectName:"CHAOTIC_SPRING_DOT",skillName:"CHAOTIC_SPRING",tickPotency:45,speedStat:"sks",modifiers:n}),e.addEvent(new xe("apply chaotic spring dot",.45,()=>{e.applyDoT("CHAOTIC_SPRING_DOT",t)}))}},highlightIf:e=>e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",2)});Vn("WHEELING_THRUST",58,{replaceIf:[F2],applicationDelay:.67,potency:[["NEVER",100],["MELEE_MASTERY_DRG",140]],combo:{potency:[["NEVER",260],["MELEE_MASTERY_DRG",300]],resource:"DRG_CHAOS_COMBO_TRACKER",resourceValue:3},positional:{potency:[["NEVER",140],["MELEE_MASTERY_DRG",180]],comboPotency:[["NEVER",300],["MELEE_MASTERY_DRG",340]],location:"rear"},highlightIf:e=>e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",3)});Vn("VORPAL_THRUST",4,{autoUpgrade:{trait:"LANCE_MASTERY_IV",otherSkill:"LANCE_BARRAGE"},applicationDelay:1.02,potency:[["NEVER",100],["LANCE_MASTERY",130]],combo:{potency:[["NEVER",250],["LANCE_MASTERY",280]],resource:"DRG_HEAVENS_COMBO_TRACKER",resourceValue:1},highlightIf:e=>e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",1)});Vn("LANCE_BARRAGE",96,{autoDowngrade:{trait:"LANCE_MASTERY_IV",otherSkill:"VORPAL_THRUST"},applicationDelay:.94,potency:130,combo:{potency:340,resource:"DRG_HEAVENS_COMBO_TRACKER",resourceValue:1},highlightIf:e=>e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",1)});Vn("FULL_THRUST",26,{autoUpgrade:{trait:"LANCE_MASTERY_II",otherSkill:"HEAVENS_THRUST"},applicationDelay:1.12,potency:100,combo:{potency:380,resource:"DRG_HEAVENS_COMBO_TRACKER",resourceValue:2},highlightIf:e=>e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",2)});Vn("HEAVENS_THRUST",86,{autoDowngrade:{trait:"LANCE_MASTERY_II",otherSkill:"FULL_THRUST"},applicationDelay:.71,potency:[["NEVER",100],["MELEE_MASTERY_DRG",160]],combo:{potency:[["NEVER",400],["MELEE_MASTERY_DRG",460]],resource:"DRG_HEAVENS_COMBO_TRACKER",resourceValue:2},highlightIf:e=>e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",2)});Vn("FANG_AND_CLAW",56,{replaceIf:[j2],applicationDelay:.62,potency:[["NEVER",100],["MELEE_MASTERY_DRG",140]],combo:{potency:[["NEVER",260],["MELEE_MASTERY_DRG",300]],resource:"DRG_HEAVENS_COMBO_TRACKER",resourceValue:3},positional:{potency:[["NEVER",140],["MELEE_MASTERY_DRG",180]],comboPotency:[["NEVER",300],["MELEE_MASTERY_DRG",340]],location:"flank"},highlightIf:e=>e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",3)});Vn("DRAKESBANE",64,{startOnHotbar:!1,applicationDelay:1,potency:[["NEVER",380],["LANCE_MASTERY_II",400],["MELEE_MASTERY_DRG",460]],validateAttempt:e=>e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",4)||e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",4),onConfirm:e=>{(e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",4)||e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",4))&&e.refreshBuff("DRACONIAN_FIRE",0)},highlightIf:e=>e.hasResourceExactly("DRG_CHAOS_COMBO_TRACKER",4)||e.hasResourceExactly("DRG_HEAVENS_COMBO_TRACKER",4)});Vn("DOOM_SPIKE",40,{replaceIf:[K2],potency:110,falloff:0,applicationDelay:1.29});Vn("DRACONIAN_FURY",82,{replaceIf:[V2],startOnHotbar:!1,potency:130,falloff:0,applicationDelay:.76,validateAttempt:e=>e.resources.get("DRACONIAN_FIRE").available(1),highlightIf:e=>e.resources.get("DRACONIAN_FIRE").available(1),onConfirm:e=>{e.hasTraitUnlocked("LANCE_MASTERY_III")&&e.gainScale(1)}});Vn("SONIC_THRUST",62,{applicationDelay:.8,potency:100,combo:{potency:120,resource:"DRG_AOE_COMBO_TRACKER",resourceValue:1},falloff:0,highlightIf:e=>e.hasResourceExactly("DRG_AOE_COMBO_TRACKER",1),onConfirm:e=>{e.hasResourceExactly("DRG_AOE_COMBO_TRACKER",1)&&(e.resources.get("POWER_SURGE").gain(1),e.enqueueResourceDrop("POWER_SURGE",30.79))}});Vn("COERTHAN_TORMENT",72,{applicationDelay:.49,potency:100,combo:{potency:150,resource:"DRG_AOE_COMBO_TRACKER",resourceValue:2},falloff:0,highlightIf:e=>e.hasResourceExactly("DRG_AOE_COMBO_TRACKER",2),onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_COERTHAN_TORMENT")&&e.hasResourceExactly("DRG_AOE_COMBO_TRACKER",2)&&e.refreshBuff("DRACONIAN_FIRE",0)}});Ze("DRG","LIFE_SURGE",6,"cd_LIFE_SURGE",{rscType:"LIFE_SURGE",applicationDelay:0,cooldown:40,maxCharges:2});xa("WYRMWIND_THRUST",90,"cd_WYRMWIND_THRUST",{applicationDelay:1.2,validateAttempt:e=>e.hasResourceExactly("FIRSTMINDS_FOCUS",2),highlightIf:e=>e.hasResourceExactly("FIRSTMINDS_FOCUS",2),potency:[["NEVER",420],["MELEE_MASTERY_DRG",440]],falloff:.5,cooldown:10,onConfirm:e=>{e.tryConsumeResource("FIRSTMINDS_FOCUS",!0)}});Ze("DRG","LANCE_CHARGE",30,"cd_LANCE_CHARGE",{rscType:"LANCE_CHARGE",applicationDelay:.62,cooldown:60});Ze("DRG","BATTLE_LITANY",52,"cd_BATTLE_LITANY",{rscType:"BATTLE_LITANY",applicationDelay:.62,cooldown:120});xa("GEIRSKOGUL",60,"cd_GEIRSKOGUL",{applicationDelay:.67,potency:[["NEVER",200],["LANCE_MASTERY_III",280]],falloff:.5,cooldown:60,onConfirm:e=>{e.refreshBuff("LIFE_OF_THE_DRAGON",0),e.refreshBuff("NASTROND_READY",0),e.addEvent(new xe("drop starcross when life drops",20,()=>{e.tryConsumeResource("STARCROSS_READY")}))}});xa("NASTROND",70,"cd_NASTROND",{applicationDelay:.76,potency:[["NEVER",600],["LANCE_MASTERY_III",720]],falloff:.5,cooldown:2,validateAttempt:e=>e.resources.get("LIFE_OF_THE_DRAGON").available(1)&&e.resources.get("NASTROND_READY").available(1),highlightIf:e=>e.resources.get("LIFE_OF_THE_DRAGON").available(1)&&e.resources.get("NASTROND_READY").available(1),onConfirm:e=>{e.tryConsumeResource("NASTROND_READY")}});xa("JUMP",30,"cd_JUMP",{autoUpgrade:{trait:"JUMP_MASTERY",otherSkill:"HIGH_JUMP"},applicationDelay:.49,animationLock:.8,potency:320,cooldown:30,onConfirm:e=>{e.refreshBuff("DIVE_READY",0)}});xa("HIGH_JUMP",74,"cd_HIGH_JUMP",{autoDowngrade:{trait:"JUMP_MASTERY",otherSkill:"JUMP"},applicationDelay:.49,animationLock:.8,potency:400,cooldown:30,onConfirm:e=>{e.refreshBuff("DIVE_READY",0)}});xa("MIRAGE_DIVE",68,"cd_MIRAGE_DIVE",{applicationDelay:.8,validateAttempt:e=>e.hasResourceAvailable("DIVE_READY"),highlightIf:e=>e.hasResourceAvailable("DIVE_READY"),potency:380,cooldown:1,onConfirm:e=>{e.tryConsumeResource("DIVE_READY")}});xa("DRAGONFIRE_DIVE",50,"cd_DRAGONFIRE_DIVE",{applicationDelay:.8,animationLock:.8,potency:500,falloff:.5,cooldown:120,onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_DRAGONFIRE_DIVE")&&e.refreshBuff("DRAGONS_FLIGHT",0)}});xa("RISE_OF_THE_DRAGON",92,"cd_RISE_OF_THE_DRAGON",{applicationDelay:1.16,potency:550,falloff:.5,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("DRAGONS_FLIGHT"),highlightIf:e=>e.hasResourceAvailable("DRAGONS_FLIGHT"),onConfirm:e=>{e.tryConsumeResource("DRAGONS_FLIGHT")}});xa("STARDIVER",80,"cd_STARDIVER",{replaceIf:[W2],applicationDelay:1.29,animationLock:1.5,potency:[["NEVER",720],["MELEE_MASTERY_DRG",840]],falloff:.4,cooldown:30,validateAttempt:e=>e.hasResourceAvailable("LIFE_OF_THE_DRAGON"),onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_STARDIVER")&&e.refreshBuff("STARCROSS_READY",0)}});xa("STARCROSS",100,"cd_STARCROSS",{startOnHotbar:!1,replaceIf:[X2],applicationDelay:.98,potency:1e3,falloff:.4,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("STARCROSS_READY")&&e.hasResourceAvailable("LIFE_OF_THE_DRAGON"),highlightIf:e=>e.hasResourceAvailable("STARCROSS_READY")&&e.hasResourceAvailable("LIFE_OF_THE_DRAGON"),onConfirm:e=>{e.tryConsumeResource("STARCROSS_READY")}});xa("ELUSIVE_JUMP",35,"cd_ELUSIVE_JUMP",{potency:0,applicationDelay:0,animationLock:1,cooldown:30,onConfirm:e=>{e.refreshBuff("ENHANCED_PIERCING_TALON",0)}});xa("WINGED_GLIDE",45,"cd_WINGED_GLIDE",{potency:0,applicationDelay:0,animationLock:Jt,cooldown:60,maxCharges:2});const nD=["SONIC_BREAK_DOT","BOW_SHOCK_DOT"],q2=Object.keys(sS).filter(e=>!nD.includes(e));Object.keys(sS).forEach(e=>qt(e,`GNB/${Ke[e].name}.png`));class Z2 extends en{jobSpecificOtherTargetedBuffViewProps(){return[...nD.flatMap(t=>this.makeTargetedTimers(t))]}jobSpecificSelfTargetedBuffViewProps(){return q2.map(t=>t==="ROYAL_GUARD"?this.makeCommonTimerless(t):this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){var R,T;const n=this.state.resources,a=n.get("GNB_COMBO_TRACKER"),s=n.get("GNB_AOE_COMBO_TRACKER"),c=n.get("POWDER_GAUGE").availableAmount(),d=n.get("ROYAL_GUARD").availableAmount(),f=a.available(1)?(R=a.pendingChange)==null?void 0:R.timeTillEvent:s.available(1)?(T=s.pendingChange)==null?void 0:T.timeTillEvent:void 0,h=n.get("BLOODFEST").available(1)?2:1;return[{kind:"bar",name:N({en:"Combo Timer",zh:""}),color:t.rdm.manaStack,progress:f?f/30:0,valueString:(f==null?void 0:f.toFixed(3))??"N/A"},{kind:"counter",name:N({en:"Royal Guard",zh:""}),color:t.rdm.manaStack,currentStacks:d,maxStacks:1},{kind:"counter",name:N({en:"Powder Gauge",zh:""}),color:t.rdm.manaStack,currentStacks:c,maxStacks:(this.state.hasTraitUnlocked("CARTRIDGE_CHARGE_II")?3:2)*h}]}}const Ht=(e,t,n)=>{Je("GNB",e,t,n??{})};Ht("POWDER_GAUGE",3,{warnOnOvercap:!0});Ht("ROYAL_GUARD",1);Ht("NO_MERCY",1,{timeout:20});Ht("AURORA",1,{timeout:18});Ht("BOW_SHOCK_DOT",1,{timeout:15});Ht("CAMOUFLAGE",1,{timeout:20});Ht("HEART_OF_CORUNDUM",1,{timeout:8});Ht("CLARITY_OF_CORUNDUM",1,{timeout:15});Ht("CATHARSIS_OF_CORUNDUM",1,{timeout:20});Ht("NEBULA",1,{timeout:15});Ht("GREAT_NEBULA",1,{timeout:15});Ht("HEART_OF_LIGHT",1,{timeout:15});Ht("HEART_OF_STONE",1,{timeout:8});Ht("READY_TO_BLAST",1,{timeout:10,warnOnTimeout:!0});Ht("READY_TO_BREAK",1,{timeout:30,warnOnTimeout:!0});Ht("READY_TO_GOUGE",1,{timeout:10,warnOnTimeout:!0});Ht("READY_TO_RAZE",1,{timeout:10,warnOnTimeout:!0});Ht("READY_TO_REIGN",1,{timeout:30,warnOnTimeout:!0});Ht("READY_TO_RIP",1,{timeout:10,warnOnTimeout:!0});Ht("READY_TO_TEAR",1,{timeout:10,warnOnTimeout:!0});Ht("SONIC_BREAK_DOT",1,{timeout:15});Ht("SUPERBOLIDE",1,{timeout:10});Ht("BRUTAL_SHELL",1,{timeout:30});Ht("GNB_COMBO_TRACKER",2,{timeout:30});Ht("GNB_AOE_COMBO_TRACKER",1,{timeout:30});Ht("GNB_GNASHING_COMBO_TRACKER",2,{timeout:30});Ht("GNB_REIGN_COMBO_TRACKER",2,{timeout:30});Ht("BLOODFEST",1,{timeout:30});const VC=["KEEN_EDGE","BRUTAL_SHELL","SOLID_BARREL"],$2=["DEMON_SLICE","DEMON_SLAUGHTER"],WC=["GNASHING_FANG","SAVAGE_CLAW","WICKED_TALON"],XC=["REIGN_OF_BEASTS","NOBLE_BLOOD","LION_HEART"];class Q2 extends tn{constructor(t){super(t);const n=this.hasTraitUnlocked("ENHANCED_AURORA")?2:1;[new ze("cd_AURORA",60,n,n)].forEach(s=>this.cooldowns.set(s)),this.cooldowns.set(new ze("cd_DOUBLE_DOWN",this.config.adjustedSksGCD(60),1,1));const a=this.hasTraitUnlocked("CARTRIDGE_CHARGE_II")?3:2;this.resources.set(new On("POWDER_GAUGE",a,0,!0)),this.registerRecurringEvents([{groupedEffects:[{effectName:"SONIC_BREAK_DOT",appliedBy:["SONIC_BREAK"]}]},{groupedEffects:[{effectName:"BOW_SHOCK_DOT",appliedBy:["BOW_SHOCK"]}]}])}get statusPropsGenerator(){return new Z2(this)}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("NO_MERCY")&&t.addBuff(U.NoMercy)}fixGNBComboState(t){if($2.includes(t)){this.tryConsumeResource("GNB_COMBO_TRACKER",!0),this.tryConsumeResource("GNB_REIGN_COMBO_TRACKER",!0),this.tryConsumeResource("GNB_GNASHING_COMBO_TRACKER",!0),this.tryConsumeResource("GNB_AOE_COMBO_TRACKER"),t==="DEMON_SLICE"&&this.setComboState("GNB_AOE_COMBO_TRACKER",1);return}let n="GNB_COMBO_TRACKER",a=-1;VC.includes(t)?(this.tryConsumeResource("GNB_AOE_COMBO_TRACKER",!0),this.tryConsumeResource("GNB_REIGN_COMBO_TRACKER",!0),this.tryConsumeResource("GNB_GNASHING_COMBO_TRACKER",!0),a=VC.indexOf(t)):WC.includes(t)?(this.tryConsumeResource("GNB_REIGN_COMBO_TRACKER",!0),n="GNB_GNASHING_COMBO_TRACKER",a=WC.indexOf(t)):XC.includes(t)&&(this.tryConsumeResource("GNB_GNASHING_COMBO_TRACKER",!0),n="GNB_REIGN_COMBO_TRACKER",a=XC.indexOf(t));let s=0;a===0?s=1:a===1&&this.hasResourceExactly(n,1)&&(s=2),this.setComboState(n,s)}gainCartridge(t){this.resources.get("POWDER_GAUGE").gain(t)}refreshBuff(t,n){this.addEvent(new xe("gain buff",n,()=>{this.resources.get(t).gain(1),this.enqueueResourceDrop(t)}))}}const Ai=(e,t,n)=>{const a=Pe(n.onConfirm,s=>{["SONIC_BREAK","BURST_STRIKE","FATED_CIRCLE","DOUBLE_DOWN","LIGHTNING_SHOT"].includes(e)||s.fixGNBComboState(e),s.tryConsumeResource("READY_TO_BLAST"),s.tryConsumeResource("READY_TO_RAZE"),s.tryConsumeResource("READY_TO_RIP"),s.tryConsumeResource("READY_TO_TEAR"),s.tryConsumeResource("READY_TO_GOUGE")});return un("GNB",e,t,{...n,onConfirm:a,recastTime:s=>s.config.adjustedSksGCD(),jobPotencyModifiers:s=>s.hasResourceAvailable("NO_MERCY")?[$.NoMercy]:[]})},fn=(e,t,n,a)=>st("GNB",e,t,n,{...a,jobPotencyModifiers:s=>s.hasResourceAvailable("NO_MERCY")?[$.NoMercy]:[]}),iD={newSkill:"GNASHING_FANG",condition:e=>e.resources.get("GNB_GNASHING_COMBO_TRACKER").availableAmount()===0},aD={newSkill:"SAVAGE_CLAW",condition:e=>e.resources.get("GNB_GNASHING_COMBO_TRACKER").availableAmount()===1},oD={newSkill:"WICKED_TALON",condition:e=>e.resources.get("GNB_GNASHING_COMBO_TRACKER").availableAmount()===2},lD={newSkill:"REIGN_OF_BEASTS",condition:e=>e.resources.get("GNB_REIGN_COMBO_TRACKER").availableAmount()===0},sD={newSkill:"NOBLE_BLOOD",condition:e=>e.resources.get("GNB_REIGN_COMBO_TRACKER").availableAmount()===1},rD={newSkill:"LION_HEART",condition:e=>e.resources.get("GNB_REIGN_COMBO_TRACKER").availableAmount()===2},J2={newSkill:"HYPERVELOCITY",condition:e=>e.hasResourceAvailable("READY_TO_BLAST")},eB={newSkill:"FATED_BRAND",condition:e=>e.hasResourceAvailable("READY_TO_RAZE")},tB={newSkill:"JUGULAR_RIP",condition:e=>e.hasResourceAvailable("READY_TO_RIP")},nB={newSkill:"ABDOMEN_TEAR",condition:e=>e.hasResourceAvailable("READY_TO_TEAR")},iB={newSkill:"EYE_GOUGE",condition:e=>e.hasResourceAvailable("READY_TO_GOUGE")},aB={newSkill:"ROYAL_GUARD",condition:e=>!e.hasResourceAvailable("ROYAL_GUARD")},oB={newSkill:"RELEASE_ROYAL_GUARD",condition:e=>e.hasResourceAvailable("ROYAL_GUARD")};Ai("LIGHTNING_SHOT",15,{potency:150,applicationDelay:.72,startsAuto:!1});Ai("KEEN_EDGE",1,{potency:[["NEVER",150],["MELEE_MASTERY_TANK",200],["MELEE_MASTERY_II_TANK",300]],applicationDelay:.89});Ai("BRUTAL_SHELL",4,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",160],["MELEE_MASTERY_II_TANK",240]],combo:{potency:[["NEVER",240],["MELEE_MASTERY_TANK",300],["MELEE_MASTERY_II_TANK",380]],resource:"GNB_COMBO_TRACKER",resourceValue:1},applicationDelay:1.07,onConfirm:e=>{e.hasResourceExactly("GNB_COMBO_TRACKER",1)&&e.refreshBuff("BRUTAL_SHELL",0)},highlightIf:e=>e.hasResourceExactly("GNB_COMBO_TRACKER",1)});Ai("SOLID_BARREL",26,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",140],["MELEE_MASTERY_II_TANK",240]],combo:{potency:[["NEVER",320],["MELEE_MASTERY_TANK",360],["MELEE_MASTERY_II_TANK",460]],resource:"GNB_COMBO_TRACKER",resourceValue:2},applicationDelay:1.07,onConfirm:e=>{e.hasResourceExactly("GNB_COMBO_TRACKER",2)&&e.gainCartridge(1)},highlightIf:e=>e.hasResourceExactly("GNB_COMBO_TRACKER",2)});Ai("DEMON_SLICE",10,{potency:100,falloff:0,applicationDelay:.62});Ai("DEMON_SLAUGHTER",40,{potency:100,combo:{potency:160,resource:"GNB_AOE_COMBO_TRACKER",resourceValue:1},falloff:0,applicationDelay:.62,onConfirm:e=>{e.hasResourceExactly("GNB_AOE_COMBO_TRACKER",1)&&e.gainCartridge(1)},highlightIf:e=>e.hasResourceExactly("GNB_AOE_COMBO_TRACKER",1)});Ai("BURST_STRIKE",30,{potency:[["NEVER",340],["MELEE_MASTERY_II_TANK",420]],applicationDelay:.71,validateAttempt:e=>e.hasResourceAvailable("POWDER_GAUGE"),onConfirm:e=>{e.tryConsumeResource("POWDER_GAUGE"),e.hasTraitUnlocked("ENHANCED_CONTINUATION")&&e.refreshBuff("READY_TO_BLAST",0)},highlightIf:e=>e.hasResourceAvailable("POWDER_GAUGE")});Ai("FATED_CIRCLE",72,{potency:300,falloff:0,applicationDelay:.54,validateAttempt:e=>e.hasResourceAvailable("POWDER_GAUGE"),onConfirm:e=>{e.tryConsumeResource("POWDER_GAUGE"),e.hasTraitUnlocked("ENHANCED_CONTINUATION_II")&&e.refreshBuff("READY_TO_RAZE",0)},highlightIf:e=>e.hasResourceAvailable("POWDER_GAUGE")});fn("BLOODFEST",76,"cd_BLOODFEST",{applicationDelay:0,cooldown:60,maxCharges:1,onConfirm:e=>{const t=e.hasTraitUnlocked("CARTRIDGE_CHARGE_II")?3:2;e.gainStatus("BLOODFEST"),e.resources.set(new On("POWDER_GAUGE",t*2,e.resources.get("POWDER_GAUGE").availableAmount(),!0)),e.addEvent(new xe("restore bloodfest max stacks",jt("GNB","BLOODFEST").maxTimeout,()=>{e.resources.get("POWDER_GAUGE").availableAmount()>t&&p.reportWarning({kind:"overcap",rsc:"POWDER_GAUGE"}),e.resources.set(new On("POWDER_GAUGE",t,Math.min(e.resources.get("POWDER_GAUGE").availableAmount(),t),!0))})),e.gainCartridge(t),e.hasTraitUnlocked("ENHANCED_BLOODFEST")&&e.refreshBuff("READY_TO_REIGN",0)}});fn("NO_MERCY",2,"cd_NO_MERCY",{applicationDelay:0,cooldown:60,maxCharges:1,onConfirm:e=>{e.refreshBuff("NO_MERCY",.62),e.refreshBuff("READY_TO_BREAK",0)}});Ai("SONIC_BREAK",54,{potency:340,applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("READY_TO_BREAK"),onConfirm:(e,t)=>{e.tryConsumeResource("READY_TO_BREAK");const n=[];e.hasResourceAvailable("NO_MERCY")&&n.push($.NoMercy),e.addDoTPotencies({node:t,effectName:"SONIC_BREAK_DOT",skillName:"SONIC_BREAK",tickPotency:120,speedStat:"sks",modifiers:n})},onApplication:(e,t)=>e.applyDoT("SONIC_BREAK_DOT",t),highlightIf:e=>e.hasResourceAvailable("READY_TO_BREAK")});Ai("GNASHING_FANG",60,{replaceIf:[aD,oD],potency:[["NEVER",330],["MELEE_MASTERY_II_TANK",440]],applicationDelay:.62,recastTime:e=>e.config.adjustedSksGCD(),validateAttempt:e=>e.hasResourceAvailable("POWDER_GAUGE"),onConfirm:e=>{e.refreshBuff("READY_TO_RIP",0),e.tryConsumeResource("POWDER_GAUGE")},highlightIf:e=>e.hasResourceAvailable("POWDER_GAUGE")&&!e.hasResourceAvailable("GNB_REIGN_COMBO_TRACKER"),secondaryCooldown:{cdName:"cd_GNASHING_FANG",cooldown:30,maxCharges:2}});Ai("SAVAGE_CLAW",60,{startOnHotbar:!1,replaceIf:[iD,oD],potency:[["NEVER",410],["MELEE_MASTERY_II_TANK",500]],applicationDelay:.62,validateAttempt:e=>e.hasResourceExactly("GNB_GNASHING_COMBO_TRACKER",1),onConfirm:e=>{e.refreshBuff("READY_TO_TEAR",0)},highlightIf:e=>e.hasResourceExactly("GNB_GNASHING_COMBO_TRACKER",1)});Ai("WICKED_TALON",60,{startOnHotbar:!1,replaceIf:[iD,aD],potency:[["NEVER",490],["MELEE_MASTERY_II_TANK",560]],applicationDelay:1.16,validateAttempt:e=>e.hasResourceExactly("GNB_GNASHING_COMBO_TRACKER",2),onConfirm:e=>{e.refreshBuff("READY_TO_GOUGE",0)},highlightIf:e=>e.hasResourceExactly("GNB_GNASHING_COMBO_TRACKER",2)});Ai("DOUBLE_DOWN",90,{potency:1e3,falloff:.15,applicationDelay:.72,recastTime:e=>e.config.adjustedSksGCD(),validateAttempt:e=>e.hasResourceAvailable("POWDER_GAUGE",2),onConfirm:e=>{e.resources.get("POWDER_GAUGE").consume(2)},highlightIf:e=>e.hasResourceAvailable("POWDER_GAUGE",2),secondaryCooldown:{cdName:"cd_DOUBLE_DOWN",cooldown:60,maxCharges:1}});Ai("REIGN_OF_BEASTS",100,{replaceIf:[sD,rD],potency:800,falloff:.6,applicationDelay:1.16,validateAttempt:e=>e.hasResourceAvailable("READY_TO_REIGN"),onConfirm:e=>{e.tryConsumeResource("READY_TO_REIGN")},highlightIf:e=>e.hasResourceAvailable("READY_TO_REIGN")});Ai("NOBLE_BLOOD",100,{startOnHotbar:!1,replaceIf:[lD,rD],potency:900,falloff:.6,applicationDelay:1.65,validateAttempt:e=>e.hasResourceExactly("GNB_REIGN_COMBO_TRACKER",1),highlightIf:e=>e.hasResourceExactly("GNB_REIGN_COMBO_TRACKER",1)});Ai("LION_HEART",100,{startOnHotbar:!1,replaceIf:[lD,sD],potency:1e3,falloff:.6,applicationDelay:1.79,validateAttempt:e=>e.hasResourceExactly("GNB_REIGN_COMBO_TRACKER",2),highlightIf:e=>e.hasResourceExactly("GNB_REIGN_COMBO_TRACKER",2)});fn("CONTINUATION",70,"cd_CONTINUATION",{replaceIf:[J2,eB,tB,nB,iB],applicationDelay:0,potency:0,cooldown:1,validateAttempt:e=>!1});fn("HYPERVELOCITY",86,"cd_HYPERVELOCITY",{startOnHotbar:!1,applicationDelay:.76,potency:[["NEVER",140],["MELEE_MASTERY_II_TANK",180]],cooldown:1,validateAttempt:e=>e.hasResourceAvailable("READY_TO_BLAST"),highlightIf:e=>e.hasResourceAvailable("READY_TO_BLAST"),onConfirm:e=>{e.tryConsumeResource("READY_TO_BLAST")}});fn("FATED_BRAND",96,"cd_FATED_BRAND",{startOnHotbar:!1,applicationDelay:1.16,potency:120,falloff:0,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("READY_TO_RAZE"),highlightIf:e=>e.hasResourceAvailable("READY_TO_RAZE"),onConfirm:e=>{e.tryConsumeResource("READY_TO_RAZE")}});fn("JUGULAR_RIP",70,"cd_JUGULAR_RIP",{startOnHotbar:!1,applicationDelay:.8,potency:[["NEVER",180],["MELEE_MASTERY_II_TANK",220]],cooldown:1,validateAttempt:e=>e.hasResourceAvailable("READY_TO_RIP"),highlightIf:e=>e.hasResourceAvailable("READY_TO_RIP"),onConfirm:e=>{e.tryConsumeResource("READY_TO_RIP")}});fn("ABDOMEN_TEAR",70,"cd_ABDOMEN_TEAR",{startOnHotbar:!1,applicationDelay:.76,potency:[["NEVER",220],["MELEE_MASTERY_II_TANK",260]],cooldown:1,validateAttempt:e=>e.hasResourceAvailable("READY_TO_TEAR"),highlightIf:e=>e.hasResourceAvailable("READY_TO_TEAR"),onConfirm:e=>{e.tryConsumeResource("READY_TO_TEAR")}});fn("EYE_GOUGE",70,"cd_EYE_GOUGE",{startOnHotbar:!1,applicationDelay:.98,potency:[["NEVER",260],["MELEE_MASTERY_II_TANK",300]],cooldown:1,validateAttempt:e=>e.hasResourceAvailable("READY_TO_GOUGE"),highlightIf:e=>e.hasResourceAvailable("READY_TO_GOUGE"),onConfirm:e=>{e.tryConsumeResource("READY_TO_GOUGE")}});fn("DANGER_ZONE",18,"cd_DANGER_ZONE",{autoUpgrade:{trait:"DANGER_ZONE_MASTERY",otherSkill:"BLASTING_ZONE"},applicationDelay:.62,potency:250,cooldown:30});fn("BLASTING_ZONE",80,"cd_BLASTING_ZONE",{startOnHotbar:!1,applicationDelay:.62,potency:800,cooldown:30});fn("BOW_SHOCK",62,"cd_BOW_SHOCK",{applicationDelay:.62,potency:150,falloff:0,cooldown:60,onConfirm:(e,t)=>{const n=[];e.hasResourceAvailable("NO_MERCY")&&n.push($.NoMercy),e.addDoTPotencies({node:t,effectName:"BOW_SHOCK_DOT",skillName:"BOW_SHOCK",tickPotency:60,speedStat:"sks",modifiers:n})},onApplication:(e,t)=>e.applyDoT("BOW_SHOCK_DOT",t)});fn("TRAJECTORY",56,"cd_TRAJECTORY",{animationLock:Jt,cooldown:30,maxCharges:2,applicationDelay:.66,drawsAggro:!0});fn("HEART_OF_STONE",68,"cd_HEART_OF_STONE",{autoUpgrade:{trait:"HEART_OF_STONE_MASTERY",otherSkill:"HEART_OF_CORUNDUM"},applicationDelay:.62,cooldown:25,onApplication:e=>{e.refreshBuff("HEART_OF_STONE",0)}});fn("HEART_OF_CORUNDUM",82,"cd_HEART_OF_CORUNDUM",{startOnHotbar:!1,applicationDelay:.62,cooldown:25,onApplication:e=>{e.refreshBuff("CATHARSIS_OF_CORUNDUM",0),e.refreshBuff("HEART_OF_CORUNDUM",0),e.refreshBuff("CLARITY_OF_CORUNDUM",0)}});fn("SUPERBOLIDE",50,"cd_SUPERBOLIDE",{applicationDelay:0,cooldown:360,onConfirm:e=>{e.refreshBuff("SUPERBOLIDE",0)}});fn("CAMOUFLAGE",6,"cd_CAMOUFLAGE",{applicationDelay:.62,cooldown:90,onConfirm:e=>{e.refreshBuff("CAMOUFLAGE",0)}});fn("NEBULA",38,"cd_NEBULA",{autoUpgrade:{trait:"NEBULA_MASTERY",otherSkill:"GREAT_NEBULA"},applicationDelay:.56,cooldown:120,onConfirm:e=>{e.refreshBuff("NEBULA",0)}});fn("GREAT_NEBULA",38,"cd_GREAT_NEBULA",{startOnHotbar:!1,applicationDelay:.56,cooldown:120,onConfirm:e=>{e.refreshBuff("GREAT_NEBULA",0)}});fn("HEART_OF_LIGHT",64,"cd_HEART_OF_LIGHT",{applicationDelay:.62,cooldown:60,onConfirm:e=>{e.refreshBuff("HEART_OF_LIGHT",0)}});fn("AURORA",45,"cd_AURORA",{applicationDelay:.62,cooldown:60,onConfirm:e=>{e.refreshBuff("AURORA",0)},maxCharges:2});fn("ROYAL_GUARD",10,"cd_ROYAL_GUARD",{applicationDelay:0,cooldown:2,validateAttempt:e=>!e.hasResourceAvailable("ROYAL_GUARD"),onConfirm:e=>{e.resources.get("ROYAL_GUARD").gain(1)},replaceIf:[oB],secondaryCooldown:{cdName:"cd_RELEASE_ROYAL_GUARD",cooldown:1,maxCharges:1}});fn("RELEASE_ROYAL_GUARD",10,"cd_RELEASE_ROYAL_GUARD",{startOnHotbar:!1,replaceIf:[aB],applicationDelay:0,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("ROYAL_GUARD"),onConfirm:e=>{e.tryConsumeResource("ROYAL_GUARD")},secondaryCooldown:{cdName:"cd_ROYAL_GUARD",cooldown:2,maxCharges:1}});Object.keys(rS).forEach(e=>qt(e,`MCH/${Ke[e].name}.png`));class lB extends en{jobSpecificOtherTargetedBuffViewProps(){return[this.makeCommonTimer("WILDFIRE",!1),...this.makeTargetedTimers("BIOBLASTER")]}jobSpecificSelfTargetedBuffViewProps(){return[...Object.keys(rS).filter(t=>!(t==="WILDFIRE"||t==="BIOBLASTER")).map(t=>this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){const n=this.state.resources,a=n.get("HEAT_GAUGE").availableAmount(),s=n.get("BATTERY_GAUGE").availableAmount(),c=n.get("QUEEN_PUNCHES"),d=n.get("QUEEN_FINISHERS"),f=c.availableAmount()+d.availableAmount(),h=c.maxValue+d.maxValue;return[{kind:"bar",name:N({en:"Heat",zh:""}),color:t.mch.heat,progress:a/100,valueString:a.toFixed(0)},{kind:"bar",name:N({en:"Battery",zh:""}),color:t.mch.battery,progress:s/100,valueString:s.toFixed(0)},{kind:"bar",name:N({en:"Queen Hits",zh:""}),color:t.mch.battery,progress:f/h,valueString:f.toFixed(0)}]}}const Wn=(e,t,n)=>{Je("MCH",e,t,n??{})};Wn("HEAT_GAUGE",100,{warnOnOvercap:!0});Wn("BATTERY_GAUGE",100,{warnOnOvercap:!0});Wn("REASSEMBLED",1,{timeout:5,warnOnTimeout:!0});Wn("OVERHEATED",5,{timeout:10,warnOnTimeout:!0});Wn("WILDFIRE",1,{timeout:10});Wn("WILDFIRE_SELF",1,{timeout:10});Wn("FLAMETHROWER",1,{timeout:10});Wn("BIOBLASTER",1,{timeout:15});Wn("TACTICIAN",1,{timeout:15});Wn("HYPERCHARGED",1,{timeout:30,warnOnTimeout:!0});Wn("EXCAVATOR_READY",1,{timeout:30,warnOnTimeout:!0});Wn("FULL_METAL_MACHINIST",1,{timeout:30,warnOnTimeout:!0});Wn("HEAT_COMBO",2,{timeout:30});Wn("QUEEN",7);Wn("QUEEN_PUNCHES",5);Wn("QUEEN_FINISHERS",2);Wn("WILDFIRE_HITS",6);Wn("BATTERY_BONUS",50);const sB=["HEATED_CLEAN_SHOT","HEATED_SLUG_SHOT","HEATED_SPLIT_SHOT","SPREAD_SHOT","SCATTERGUN"],qC=["CHAIN_SAW","EXCAVATOR","FULL_METAL_FIELD","SCATTERGUN","BIOBLASTER","SPREAD_SHOT"];class rB extends tn{constructor(n){super(n);re(this,"handleQueenPunch",()=>{if(!this.hasResourceAvailable("QUEEN_PUNCHES")){this.handleQueenFinisher();return}const n=this.resources.get("QUEEN").node;n!==void 0&&this.resolveQueenPotency(n),this.resources.get("QUEEN_PUNCHES").consume(1),this.hasResourceAvailable("QUEEN_PUNCHES")?this.addEvent(new xe("queen punch",1.56,()=>this.handleQueenPunch())):this.addEvent(new xe("queen finisher",1.56,()=>this.handleQueenFinisher()))});re(this,"handleQueenFinisher",()=>{if(!this.hasResourceAvailable("QUEEN_FINISHERS"))return;const n=this.resources.get("QUEEN").node;n!==void 0&&this.resolveQueenPotency(n),this.resources.get("QUEEN_FINISHERS").consume(1),this.hasResourceAvailable("QUEEN_FINISHERS")?this.addEvent(new xe("queen finisher",2,()=>this.handleQueenFinisher())):(this.tryConsumeResource("BATTERY_BONUS",!0),this.addEvent(new xe("expire queen",5,()=>{this.tryConsumeResource("QUEEN",!0)})))});this.cooldowns.set(new ze("cd_AIR_ANCHOR",this.config.adjustedSksGCD(40),1,1)),this.cooldowns.set(new ze("cd_CHAINSAW",this.config.adjustedSksGCD(60),1,1)),this.hasTraitUnlocked("QUEENS_GAMBIT")||(this.resources.set(new On("QUEEN_FINISHERS",1,0)),this.resources.set(new On("QUEEN",6,0))),this.hasTraitUnlocked("ENHANCED_REASSEMBLE")||this.cooldowns.set(new ze("cd_REASSEMBLE",55,1,1)),this.hasTraitUnlocked("ENHANCED_MULTI_WEAPON")||this.cooldowns.set(new ze("cd_DRILL",this.config.adjustedSksGCD(20),1,1)),this.hasTraitUnlocked("CHARGED_ACTION_MASTERY")||(this.cooldowns.set(new ze("cd_DOUBLE_CHECK",30,2,2)),this.cooldowns.set(new ze("cd_CHECKMATE",30,2,2))),this.hasTraitUnlocked("ENHANCED_TACTICIAN")||this.cooldowns.set(new ze("cd_TACTICIAN",120,1,1)),this.registerRecurringEvents([{groupedEffects:[{effectName:"BIOBLASTER",appliedBy:["BIOBLASTER"]}]},{groupedEffects:[{effectName:"FLAMETHROWER",appliedBy:["FLAMETHROWER"],isGroundTargeted:!0,exclude:!0}]}],["ROOK_AUTOTURRET","AUTOMATON_QUEEN","WILDFIRE"])}get statusPropsGenerator(){return new lB(this)}jobSpecificRegisterRecurringEvents(){const n=()=>{this.handleDoTTick("FLAMETHROWER"),this.getDisplayTime()>=0&&p.reportDotTick(this.time,"FLAMETHROWER"),this.addEvent(new xe("Flamethrower tick",1,()=>{n()}))};let a=this.config.timeTillFirstManaTick+this.dotTickOffset;for(;a>1;)a--;this.addEvent(new xe("initial Flamethrower tick",a,n))}cancelChanneledSkills(){this.tryConsumeResource("FLAMETHROWER")}processComboStatus(n){if(!sB.includes(n))return;const a=this.resources.get("HEAT_COMBO").availableAmount();let s=0;a===0&&n==="HEATED_SPLIT_SHOT"?s=1:a===1&&n==="HEATED_SLUG_SHOT"&&(s=2),this.setComboState("HEAT_COMBO",s)}gainResource(n,a){this.resources.get(n).gain(a)}resolveQueenPotency(n){const a=this.resources.get("QUEEN_PUNCHES").availableAmount()+this.resources.get("QUEEN_FINISHERS").availableAmount(),s=this.resources.get("QUEEN").availableAmount()-a;if(s<0)return;const c=n.getDotPotencies("QUEEN")[s];this.hasResourceAvailable("TINCTURE")&&c.addModifiers($.Tincture),c.snapshotTime=this.getDisplayTime(),p.resolvePotency(c)}calculateQueenPotency(n,a){const s=this.resources.get("BATTERY_BONUS").availableAmount(),c=(a-n)*(s/50);return Math.floor((n+c)*.89)}expireWildfire(){if(!this.hasResourceAvailable("WILDFIRE_HITS"))return;this.tryConsumeResource("WILDFIRE_SELF"),this.tryConsumeResource("WILDFIRE");const n=this.hasTraitUnlocked("ENHANCED_WILD_FIRE")?240:100,a=Math.min(this.resources.get("WILDFIRE_HITS").availableAmount(),6)*n,s=this.resources.get("WILDFIRE").node;if(s===void 0)return;const c=s.getDotPotencies("WILDFIRE")[0];c.base=a,p.resolvePotency(c),this.tryConsumeResource("WILDFIRE_HITS",!0)}}const Di=(e,t,n)=>{const a=Pe(n.onConfirm,s=>s.processComboStatus(e),s=>{e!=="FULL_METAL_FIELD"&&s.tryConsumeResource("REASSEMBLED")},s=>{s.hasResourceAvailable("WILDFIRE_SELF")&&s.resources.get("WILDFIRE_HITS").gain(1)},s=>{qC.includes(e)||s.tryConsumeResource("OVERHEATED")});return un("MCH",e,t,{...n,onConfirm:a,jobPotencyModifiers:s=>{const c=[];return(s.hasResourceAvailable("REASSEMBLED")||e==="FULL_METAL_FIELD")&&c.push($.AutoCDH),s.hasResourceAvailable("OVERHEATED")&&!qC.includes(e)&&c.push($.Overheated),c}})},po=(e,t,n,a)=>st("MCH",e,t,n,a),ZS=(e,t,n,a)=>{const s=Pe(a.onConfirm);return Ze("MCH",e,t,n,{...a,onConfirm:s})};Di("HEATED_SPLIT_SHOT",54,{potency:[["NEVER",180],["MARKSMANS_MASTERY",200],["MARKSMANS_MASTERY_II",220]],applicationDelay:.8,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.gainResource("HEAT_GAUGE",5)});Di("HEATED_SLUG_SHOT",60,{potency:[["NEVER",100],["MARKSMANS_MASTERY",120],["MARKSMANS_MASTERY_II",140]],combo:{potency:[["NEVER",280],["MARKSMANS_MASTERY",300],["MARKSMANS_MASTERY_II",320]],resource:"HEAT_COMBO",resourceValue:1},applicationDelay:.8,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.gainResource("HEAT_GAUGE",5),highlightIf:e=>e.hasResourceExactly("HEAT_COMBO",1)});Di("HEATED_CLEAN_SHOT",64,{potency:[["NEVER",100],["MARKSMANS_MASTERY",120],["MARKSMANS_MASTERY_II",160]],combo:{potency:[["NEVER",360],["MARKSMANS_MASTERY",380],["MARKSMANS_MASTERY_II",420]],resource:"HEAT_COMBO",resourceValue:2},applicationDelay:.8,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>{e.gainResource("HEAT_GAUGE",5),e.gainResource("BATTERY_GAUGE",10)},highlightIf:e=>e.hasResourceExactly("HEAT_COMBO",2)});ZS("REASSEMBLE",10,"cd_REASSEMBLE",{rscType:"REASSEMBLED",applicationDelay:0,cooldown:55,maxCharges:2});const GE=[["NEVER",620],["MARKSMANS_MASTERY_II",660]];Di("DRILL",58,{potency:GE,applicationDelay:1.15,recastTime:e=>e.config.adjustedSksGCD(),secondaryCooldown:{cdName:"cd_DRILL",cooldown:20,maxCharges:2}});Di("HOT_SHOT",4,{autoUpgrade:{trait:"HOT_SHOT_MASTERY",otherSkill:"AIR_ANCHOR"},potency:240,applicationDelay:1.15,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.gainResource("BATTERY_GAUGE",20),secondaryCooldown:{cdName:"cd_AIR_ANCHOR",cooldown:40,maxCharges:1}});Di("AIR_ANCHOR",76,{startOnHotbar:!1,potency:GE,applicationDelay:1.15,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.gainResource("BATTERY_GAUGE",20),secondaryCooldown:{cdName:"cd_AIR_ANCHOR",cooldown:40,maxCharges:1}});Di("CHAIN_SAW",90,{replaceIf:[{newSkill:"EXCAVATOR",condition:e=>e.hasResourceAvailable("EXCAVATOR_READY")}],potency:GE,falloff:.25,applicationDelay:1.03,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>{e.gainResource("BATTERY_GAUGE",20),e.hasTraitUnlocked("ENHANCED_MULTI_WEAPON_II")&&e.gainStatus("EXCAVATOR_READY")},secondaryCooldown:{cdName:"cd_CHAINSAW",cooldown:60,maxCharges:1}});Di("EXCAVATOR",90,{startOnHotbar:!1,potency:GE,falloff:.25,applicationDelay:1.07,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>{e.gainResource("BATTERY_GAUGE",20),e.tryConsumeResource("EXCAVATOR_READY")},validateAttempt:e=>e.hasResourceAvailable("EXCAVATOR_READY"),highlightIf:e=>e.hasResourceAvailable("EXCAVATOR_READY")});po("BARREL_STABILIZER",66,"cd_BARREL_STABILIZER",{replaceIf:[{newSkill:"FULL_METAL_FIELD",condition:e=>e.hasResourceAvailable("FULL_METAL_MACHINIST")}],applicationDelay:0,cooldown:120,maxCharges:1,requiresCombat:!0,onConfirm:e=>{e.gainStatus("HYPERCHARGED"),e.hasTraitUnlocked("ENHANCED_BARREL_STABILIZER")&&e.gainStatus("FULL_METAL_MACHINIST")}});Di("FULL_METAL_FIELD",100,{startOnHotbar:!1,potency:900,falloff:.25,applicationDelay:1.02,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.tryConsumeResource("FULL_METAL_MACHINIST"),validateAttempt:e=>e.hasResourceAvailable("FULL_METAL_MACHINIST"),highlightIf:e=>e.hasResourceAvailable("FULL_METAL_MACHINIST")});ZS("HYPERCHARGE",30,"cd_HYPERCHARGE",{rscType:"OVERHEATED",applicationDelay:0,cooldown:10,maxCharges:1,onConfirm:e=>{e.hasResourceAvailable("HYPERCHARGED")?e.tryConsumeResource("HYPERCHARGED"):e.resources.get("HEAT_GAUGE").consume(50)},validateAttempt:e=>e.hasResourceAvailable("HEAT_GAUGE",50)||e.hasResourceAvailable("HYPERCHARGED"),highlightIf:e=>e.hasResourceAvailable("HEAT_GAUGE",50)||e.hasResourceAvailable("HYPERCHARGED")});po("WILDFIRE",45,"cd_WILDFIRE",{replaceIf:[{newSkill:"DETONATOR",condition:e=>e.hasResourceAvailable("WILDFIRE_SELF")}],applicationDelay:.67,cooldown:120,maxCharges:1,onConfirm:(e,t)=>{e.gainStatus("WILDFIRE_SELF");const n=e.resources.get("WILDFIRE"),a=new sn({config:e.config,sourceTime:e.getDisplayTime(),sourceSkill:"WILDFIRE",aspect:Ne.Physical,basePotency:0,snapshotTime:e.getDisplayTime(),description:"wildfire",targetList:t.targetList});a.addModifiers($.NoCDH),e.hasResourceAvailable("TINCTURE")&&a.addModifiers($.Tincture),t.addDoTPotency(a,"WILDFIRE"),n.gain(1),n.node=t,e.resources.addResourceEvent({rscType:"WILDFIRE",name:"wildfire expiration",delay:jt("MCH","WILDFIRE").maxTimeout,fnOnRsc:s=>e.expireWildfire()})}});po("DETONATOR",45,"cd_DETONATOR",{startOnHotbar:!1,applicationDelay:.62,cooldown:1,maxCharges:1,onConfirm:e=>e.expireWildfire(),validateAttempt:e=>e.hasResourceAvailable("WILDFIRE_SELF")});Di("BLAZING_SHOT",68,{potency:[["NEVER",220],["MARKSMANS_MASTERY_II",240]],applicationDelay:.85,recastTime:1.5,onConfirm:e=>{e.cooldowns.get("cd_DOUBLE_CHECK").restore(15),e.cooldowns.get("cd_CHECKMATE").restore(15)},validateAttempt:e=>e.hasResourceAvailable("OVERHEATED"),highlightIf:e=>e.hasResourceAvailable("OVERHEATED")});po("GAUSS_ROUND",15,"cd_DOUBLE_CHECK",{autoUpgrade:{trait:"DOUBLE_BARREL_MASTERY",otherSkill:"DOUBLE_CHECK"},potency:130,applicationDelay:.71,cooldown:30,maxCharges:3});po("DOUBLE_CHECK",92,"cd_DOUBLE_CHECK",{startOnHotbar:!1,potency:180,falloff:.3,applicationDelay:.71,cooldown:30,maxCharges:3});po("RICOCHET",50,"cd_CHECKMATE",{autoUpgrade:{trait:"DOUBLE_BARREL_MASTERY",otherSkill:"CHECKMATE"},potency:130,falloff:.3,applicationDelay:.71,cooldown:30,maxCharges:3});po("CHECKMATE",92,"cd_CHECKMATE",{startOnHotbar:!1,potency:180,falloff:.3,applicationDelay:.71,cooldown:30,maxCharges:3});const cB=[{skillName:"ROOK_AUTOTURRET",skillLevel:40,autoUpgrade:{otherSkill:"AUTOMATON_QUEEN",trait:"PROMOTION"}},{skillName:"AUTOMATON_QUEEN",skillLevel:80,startOnHotbar:!1}];cB.forEach(e=>{po(e.skillName,e.skillLevel,"cd_QUEEN",{startOnHotbar:e.startOnHotbar,autoUpgrade:e.autoUpgrade,applicationDelay:0,cooldown:6,maxCharges:1,validateAttempt:t=>t.hasResourceAvailable("BATTERY_GAUGE",50)&&!t.hasResourceAvailable("QUEEN"),onConfirm:(t,n)=>{const a=t.resources.get("BATTERY_GAUGE").availableAmount();t.resources.get("BATTERY_BONUS").gain(a-50),t.tryConsumeResource("BATTERY_GAUGE",!0);const s=t.resources.get("QUEEN_PUNCHES");s.gain(5);const c=t.hasTraitUnlocked("QUEENS_GAMBIT")?2:1;t.resources.get("QUEEN_FINISHERS").gain(c),t.resources.get("QUEEN").gain(s.availableAmount()+c);let d="VOLLEY_FIRE",f=0;t.hasTraitUnlocked("PROMOTION")?(d="ARM_PUNCH",f=t.calculateQueenPotency(120,240)):f=t.calculateQueenPotency(35,75);for(let h=0;h<s.availableAmount();h++)n.addDoTPotency(new sn({config:t.config,sourceTime:t.getDisplayTime(),sourceSkill:d,aspect:Ne.Physical,description:"",basePotency:f,snapshotTime:void 0,targetList:n.targetList}),"QUEEN");d=t.hasTraitUnlocked("PROMOTION")?"PILE_BUNKER":"ROOK_OVERLOAD",d==="PILE_BUNKER"?f=t.calculateQueenPotency(340,680):f=t.calculateQueenPotency(160,320),n.addDoTPotency(new sn({config:t.config,sourceTime:t.getDisplayTime(),sourceSkill:d,aspect:Ne.Physical,description:"",basePotency:f,snapshotTime:void 0,targetList:n.targetList}),"QUEEN"),t.hasTraitUnlocked("QUEENS_GAMBIT")&&n.addDoTPotency(new sn({config:t.config,sourceTime:t.getDisplayTime(),sourceSkill:"CROWNED_COLLIDER",aspect:Ne.Physical,description:"",basePotency:t.calculateQueenPotency(390,780),snapshotTime:void 0,targetList:n.targetList}),"QUEEN"),t.resources.get("QUEEN").node=n,t.addEvent(new xe("initial queen punch",5.5,()=>t.handleQueenPunch()))}})});const uB=[{skillName:"ROOK_OVERDRIVE",skillLevel:40,autoUpgrade:{otherSkill:"QUEEN_OVERDRIVE",trait:"PROMOTION"}},{skillName:"QUEEN_OVERDRIVE",skillLevel:80,startOnHotbar:!1}];uB.forEach(e=>{po(e.skillName,e.skillLevel,"cd_OVERDRIVE",{startOnHotbar:e.startOnHotbar,autoUpgrade:e.autoUpgrade,applicationDelay:0,cooldown:15,maxCharges:1,validateAttempt:t=>t.hasResourceAvailable("QUEEN_PUNCHES"),onConfirm:t=>{t.tryConsumeResource("QUEEN_PUNCHES",!0)}})});Di("SPREAD_SHOT",18,{autoUpgrade:{trait:"SPREAD_SHOT_MASTERY",otherSkill:"SCATTERGUN"},potency:110,falloff:0,applicationDelay:.8,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.gainResource("HEAT_GAUGE",5)});Di("SCATTERGUN",82,{startOnHotbar:!1,potency:130,falloff:0,applicationDelay:1.15,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.gainResource("HEAT_GAUGE",10)});Di("BIOBLASTER",58,{potency:50,falloff:0,applicationDelay:.97,recastTime:e=>e.config.adjustedSksGCD(),secondaryCooldown:{cdName:"cd_DRILL",cooldown:20,maxCharges:2},onConfirm:(e,t)=>e.addDoTPotencies({node:t,effectName:"BIOBLASTER",skillName:"BIOBLASTER",tickPotency:50,speedStat:"sks"}),onApplication:(e,t)=>e.applyDoT("BIOBLASTER",t)});Di("AUTO_CROSSBOW",52,{potency:[["NEVER",140],["MARKSMANS_MASTERY_II",180]],falloff:0,applicationDelay:.89,recastTime:1.5,validateAttempt:e=>e.hasResourceAvailable("OVERHEATED"),highlightIf:e=>e.hasResourceAvailable("OVERHEATED")});Di("FLAMETHROWER",70,{applicationDelay:.89,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"FLAMETHROWER",skillName:"FLAMETHROWER",tickPotency:120,tickFrequency:1,speedStat:"sks"})},onApplication:(e,t)=>{e.applyDoT("FLAMETHROWER",t)},secondaryCooldown:{cdName:"cd_FLAMETHROWER",cooldown:60,maxCharges:1}});ZS("TACTICIAN",56,"cd_TACTICIAN",{rscType:"TACTICIAN",maxCharges:1,cooldown:90,applicationDelay:.62});po("DISMANTLE",62,"cd_DISMANTLE",{maxCharges:1,cooldown:120,applicationDelay:.62});Object.keys(dS).forEach(e=>qt(e,`PCT/${Ke[e].name}.png`));class dB extends en{jobSpecificSelfTargetedBuffViewProps(){return[...Object.keys(dS).map(t=>t==="MONOCHROME_TONES"||t==="SUBTRACTIVE_PALETTE"?this.makeCommonTimerless(t):t==="INSPIRATION"?this.makeToggleableTimerless(t):this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){const n=this.state.resources,a=n.get("PORTRAIT").availableAmount(),s=n.get("DEPICTIONS").availableAmount(),c=n.get("CREATURE_CANVAS").availableAmount(),d=n.get("WEAPON_CANVAS").availableAmount(),f=n.get("LANDSCAPE_CANVAS").availableAmount(),h=n.get("PALETTE_GAUGE").availableAmount(),m=n.get("PAINT").availableAmount(),R=n.get("MONOCHROME_TONES").available(1),T=[{kind:"text",name:N({en:"portrait",zh:""}),text:a===0?"/":N(a===1?{en:"moogle",zh:""}:{en:"madeen",zh:""})},{kind:"text",name:N({en:"depictions",zh:""}),text:s===0?"/":N(s===1?{en:"pom",zh:""}:s===2?{en:"wing",zh:""}:s===3?{en:"fang",zh:""}:{en:"maw",zh:""})},{kind:"counter",name:N({en:"creature",zh:""}),color:t.pct.creatureCanvas,currentStacks:c,maxStacks:1},{kind:"counter",name:N({en:"weapon",zh:""}),color:t.pct.weaponCanvas,currentStacks:d,maxStacks:1},{kind:"counter",name:N({en:"landscape",zh:""}),color:t.pct.landscapeCanvas,currentStacks:f,maxStacks:1},{kind:"bar",name:N({en:"palette gauge",zh:""}),color:t.pct.paletteGauge,progress:h/100,valueString:h.toFixed(0)}];return this.state.hasTraitUnlocked("ENHANCED_ARTISTRY")&&T.push({kind:"paint",name:N({en:"paint gauge",zh:""}),holyColor:t.pct.holyPaint,cometColor:t.pct.cometPaint,currentStacks:m,maxStacks:5,hasComet:this.state.hasTraitUnlocked("ENHANCED_PALETTE")&&R}),T}}const vn=(e,t,n)=>{Je("PCT",e,t,n??{})};vn("PORTRAIT",2);vn("DEPICTIONS",3);vn("CREATURE_CANVAS",1,{default:1});vn("WEAPON_CANVAS",1,{default:1});vn("LANDSCAPE_CANVAS",1,{default:1});vn("PALETTE_GAUGE",100,{warnOnOvercap:!0});vn("PAINT",5);vn("AETHERHUES",2,{timeout:30.8});vn("MONOCHROME_TONES",1);vn("SUBTRACTIVE_PALETTE",3);vn("HAMMER_TIME",3,{timeout:30});vn("INSPIRATION",1,{timeout:30});vn("SUBTRACTIVE_SPECTRUM",1,{timeout:30,warnOnTimeout:!0});vn("HYPERPHANTASIA",5,{timeout:30,warnOnTimeout:!0});vn("RAINBOW_BRIGHT",1,{timeout:30,warnOnTimeout:!0});vn("STARSTRUCK",1,{timeout:20,warnOnTimeout:!0});vn("STARRY_MUSE",1,{timeout:20.5});vn("TEMPERA_COAT",1,{timeout:10});vn("TEMPERA_GRASSA",1,{timeout:10});vn("SMUDGE",1,{timeout:5});const hB=["FIRE_IN_RED","FIRE_II_IN_RED","AERO_IN_GREEN","AERO_II_IN_GREEN","WATER_IN_BLUE","WATER_II_IN_BLUE","HOLY_IN_WHITE","BLIZZARD_IN_CYAN","BLIZZARD_II_IN_CYAN","STONE_IN_YELLOW","STONE_II_IN_YELLOW","THUNDER_IN_MAGENTA","THUNDER_II_IN_MAGENTA","COMET_IN_BLACK","STAR_PRISM"],ZC=["POM_MOTIF","WING_MOTIF","CLAW_MOTIF","MAW_MOTIF"],fB=["HAMMER_BRUSH","HAMMER_STAMP","POLISHING_HAMMER"];class EB extends tn{constructor(t){super(t);const n=this.hasTraitUnlocked("ENHANCED_SWIFTCAST")&&40||60;[new ze("cd_SWIFTCAST",n,1,1)].forEach(c=>this.cooldowns.set(c));const a=this.hasTraitUnlocked("ENHANCED_PICTOMANCY_IV")?3:2;this.cooldowns.set(new ze("cd_LIVING_MUSE",40,a,a));const s=this.hasTraitUnlocked("ENHANCED_PICTOMANCY_II")?2:1;this.cooldowns.set(new ze("cd_STEEL_MUSE",60,s,s)),this.registerRecurringEvents()}get statusPropsGenerator(){return new dB(this)}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("STARRY_MUSE")&&t.addBuff(U.StarryMuse)}jobSpecificAddSpeedBuffCovers(t,n){this.hasResourceAvailable("INSPIRATION")&&hB.includes(n.name)&&t.addBuff(U.Hyperphantasia)}captureSpellCastTime(t,n){return ZC.includes(t)?n:t==="RAINBOW_DRIP"?this.hasResourceAvailable("RAINBOW_BRIGHT")?0:this.config.adjustedCastTime(n):this.config.adjustedCastTime(n,this.hasResourceAvailable("INSPIRATION")?25:void 0)}captureSpellRecastTime(t,n){if(ZC.includes(t))return n;if(t==="RAINBOW_DRIP"){const a=this.config.adjustedGCD(n);return this.hasResourceAvailable("RAINBOW_BRIGHT")?a-3.5:a}return fB.includes(t)?this.config.adjustedGCD(n):this.config.adjustedGCD(n,this.hasResourceAvailable("INSPIRATION")?25:void 0)}getHammerStacks(){return this.resources.get("HAMMER_TIME").availableAmount()}doFiller(){this.cycleAetherhues(),this.tryConsumeHyperphantasia(),this.tryConsumeResource("SUBTRACTIVE_PALETTE")}cycleAetherhues(){const t=this.resources.get("AETHERHUES").availableAmount();this.tryConsumeResource("AETHERHUES",!0),t===2||(t===1?this.gainStatus("AETHERHUES",2):this.gainStatus("AETHERHUES",1))}tryConsumeHyperphantasia(){this.hasResourceAvailable("INSPIRATION")&&this.tryConsumeResource("HYPERPHANTASIA")&&!this.hasResourceAvailable("HYPERPHANTASIA")&&(this.tryConsumeResource("INSPIRATION"),this.hasTraitUnlocked("ENHANCED_PICTOMANCY_III")&&this.gainStatus("RAINBOW_BRIGHT"))}}const En=(e,t,n)=>{const a=n.baseRecastTime??2.5,s=Pe((c,d)=>{e==="RAINBOW_DRIP"&&c.hasResourceAvailable("RAINBOW_BRIGHT")||n.baseCastTime===0||c.tryConsumeResource("SWIFTCAST")},n.onConfirm);return oa("PCT",e,t,{...n,castTime:c=>c.captureSpellCastTime(e,n.baseCastTime),recastTime:c=>c.captureSpellRecastTime(e,a),manaCost:n.baseManaCost??0,potency:n.basePotency,jobPotencyModifiers:c=>{const d=[];return c.hasResourceAvailable("STARRY_MUSE")&&d.push($.Starry),n.jobPotencyModifiers&&d.push(...n.jobPotencyModifiers(c)),d},isInstantFn:c=>e==="RAINBOW_DRIP"&&c.hasResourceAvailable("RAINBOW_BRIGHT")||n.baseCastTime===0||c.hasResourceAvailable("SWIFTCAST"),onConfirm:s})},$a=(e,t,n,a)=>st("PCT",e,t,n,{...a,jobPotencyModifiers:s=>s.hasResourceAvailable("STARRY_MUSE")?[$.Starry]:[]}),cD={newSkill:"FIRE_IN_RED",condition:e=>!e.hasResourceAvailable("AETHERHUES")},uD={newSkill:"AERO_IN_GREEN",condition:e=>e.hasResourceExactly("AETHERHUES",1)},dD={newSkill:"WATER_IN_BLUE",condition:e=>e.hasResourceExactly("AETHERHUES",2)},hD={newSkill:"BLIZZARD_IN_CYAN",condition:e=>!e.hasResourceAvailable("AETHERHUES")},fD={newSkill:"STONE_IN_YELLOW",condition:e=>e.hasResourceExactly("AETHERHUES",1)},ED={newSkill:"THUNDER_IN_MAGENTA",condition:e=>e.hasResourceExactly("AETHERHUES",2)},mD={newSkill:"FIRE_II_IN_RED",condition:e=>!e.hasResourceAvailable("AETHERHUES")},AD={newSkill:"AERO_II_IN_GREEN",condition:e=>e.hasResourceExactly("AETHERHUES",1)},RD={newSkill:"WATER_II_IN_BLUE",condition:e=>e.hasResourceExactly("AETHERHUES",2)},TD={newSkill:"BLIZZARD_II_IN_CYAN",condition:e=>!e.hasResourceAvailable("AETHERHUES")},SD={newSkill:"STONE_II_IN_YELLOW",condition:e=>e.hasResourceExactly("AETHERHUES",1)},gD={newSkill:"THUNDER_II_IN_MAGENTA",condition:e=>e.hasResourceExactly("AETHERHUES",2)},$S=[cD,uD,dD],QS=[hD,fD,ED],JS=[mD,AD,RD],eg=[TD,SD,gD],mB={newSkill:"CREATURE_MOTIF",condition:e=>e.hasResourceAvailable("CREATURE_CANVAS")},ID={newSkill:"POM_MOTIF",condition:e=>!e.hasResourceAvailable("CREATURE_CANVAS")&&!e.hasResourceAvailable("DEPICTIONS")},_D={newSkill:"WING_MOTIF",condition:e=>!e.hasResourceAvailable("CREATURE_CANVAS")&&e.hasResourceExactly("DEPICTIONS",1)},pD={newSkill:"CLAW_MOTIF",condition:e=>!e.hasResourceAvailable("CREATURE_CANVAS")&&e.hasResourceExactly("DEPICTIONS",2)},ND={newSkill:"MAW_MOTIF",condition:e=>!e.hasResourceAvailable("CREATURE_CANVAS")&&e.hasResourceExactly("DEPICTIONS",3)},AB={newSkill:"LIVING_MUSE",condition:e=>!e.hasResourceAvailable("CREATURE_CANVAS")},CD={newSkill:"POM_MUSE",condition:e=>e.hasResourceAvailable("CREATURE_CANVAS")&&!e.hasResourceAvailable("DEPICTIONS")},bD={newSkill:"WINGED_MUSE",condition:e=>e.hasResourceAvailable("CREATURE_CANVAS")&&e.hasResourceExactly("DEPICTIONS",1)},OD={newSkill:"CLAWED_MUSE",condition:e=>e.hasResourceAvailable("CREATURE_CANVAS")&&e.hasResourceExactly("DEPICTIONS",2)},DD={newSkill:"FANGED_MUSE",condition:e=>e.hasResourceAvailable("CREATURE_CANVAS")&&e.hasResourceExactly("DEPICTIONS",3)},RB={newSkill:"MOG_OF_THE_AGES",condition:e=>e.resources.get("PORTRAIT").availableAmount()!==2},TB={newSkill:"RETRIBUTION_OF_THE_MADEEN",condition:e=>e.resources.get("PORTRAIT").availableAmount()===2},SB={newSkill:"WEAPON_MOTIF",condition:e=>e.hasResourceAvailable("WEAPON_CANVAS")},yD={newSkill:"HAMMER_MOTIF",condition:e=>!e.hasResourceAvailable("WEAPON_CANVAS")},gB={newSkill:"STEEL_MUSE",condition:e=>!e.hasResourceAvailable("WEAPON_CANVAS")},IB={newSkill:"STRIKING_MUSE",condition:e=>e.hasResourceAvailable("WEAPON_CANVAS")},_B={newSkill:"LANDSCAPE_MOTIF",condition:e=>e.hasResourceAvailable("LANDSCAPE_CANVAS")},vD={newSkill:"STARRY_SKY_MOTIF",condition:e=>!e.hasResourceAvailable("LANDSCAPE_CANVAS")},pB={newSkill:"SCENIC_MUSE",condition:e=>!e.hasResourceAvailable("LANDSCAPE_CANVAS")},MD={newSkill:"STARRY_MUSE",condition:e=>e.hasResourceAvailable("LANDSCAPE_CANVAS")};En("FIRE_IN_RED",1,{replaceIf:$S,baseCastTime:1.5,baseManaCost:300,basePotency:[["NEVER",310],["PICTOMANCY_MASTERY_II",380],["PICTOMANCY_MASTERY_III",420],["PICTOMANCY_MASTERY_IV",490]],applicationDelay:.84,validateAttempt:e=>cD.condition(e)&&!e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller()});En("AERO_IN_GREEN",5,{replaceIf:$S,startOnHotbar:!1,baseCastTime:1.5,baseManaCost:300,basePotency:[["NEVER",350],["PICTOMANCY_MASTERY_II",420],["PICTOMANCY_MASTERY_III",460],["PICTOMANCY_MASTERY_IV",530]],applicationDelay:.89,validateAttempt:e=>uD.condition(e)&&!e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller(),highlightIf:e=>!e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});En("WATER_IN_BLUE",15,{replaceIf:$S,startOnHotbar:!1,baseCastTime:1.5,baseManaCost:300,basePotency:[["NEVER",390],["PICTOMANCY_MASTERY_II",460],["PICTOMANCY_MASTERY_III",500],["PICTOMANCY_MASTERY_IV",570]],applicationDelay:.98,validateAttempt:e=>dD.condition(e)&&!e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>{e.doFiller(),e.resources.get("PALETTE_GAUGE").gain(25),e.hasTraitUnlocked("ENHANCED_ARTISTRY")&&e.resources.get("PAINT").gain(1)},highlightIf:e=>!e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});En("FIRE_II_IN_RED",25,{replaceIf:JS,baseCastTime:1.5,baseManaCost:300,basePotency:[["NEVER",120],["PICTOMANCY_MASTERY_II",150],["PICTOMANCY_MASTERY_IV",180]],falloff:0,applicationDelay:.84,validateAttempt:e=>mD.condition(e)&&!e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller()});En("AERO_II_IN_GREEN",35,{replaceIf:JS,startOnHotbar:!1,baseCastTime:1.5,baseManaCost:300,basePotency:[["NEVER",140],["PICTOMANCY_MASTERY_II",170],["PICTOMANCY_MASTERY_IV",200]],falloff:0,applicationDelay:.89,validateAttempt:e=>AD.condition(e)&&!e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller(),highlightIf:e=>!e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});En("WATER_II_IN_BLUE",45,{replaceIf:JS,startOnHotbar:!1,baseCastTime:1.5,baseManaCost:300,basePotency:[["NEVER",170],["PICTOMANCY_MASTERY_II",190],["PICTOMANCY_MASTERY_IV",220]],falloff:0,applicationDelay:.89,validateAttempt:e=>RD.condition(e)&&!e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>{e.doFiller(),e.resources.get("PALETTE_GAUGE").gain(25),e.hasTraitUnlocked("ENHANCED_ARTISTRY")&&e.resources.get("PAINT").gain(1)},highlightIf:e=>!e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});En("BLIZZARD_IN_CYAN",60,{replaceIf:QS,baseCastTime:2.3,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",560],["PICTOMANCY_MASTERY_II",680],["PICTOMANCY_MASTERY_III",750],["PICTOMANCY_MASTERY_IV",860]],applicationDelay:.75,validateAttempt:e=>hD.condition(e)&&e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller(),highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});En("STONE_IN_YELLOW",60,{replaceIf:QS,startOnHotbar:!1,baseCastTime:2.3,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",600],["PICTOMANCY_MASTERY_II",720],["PICTOMANCY_MASTERY_III",790],["PICTOMANCY_MASTERY_IV",900]],applicationDelay:.8,validateAttempt:e=>fD.condition(e)&&e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller(),highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});En("THUNDER_IN_MAGENTA",60,{replaceIf:QS,startOnHotbar:!1,baseCastTime:2.3,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",640],["PICTOMANCY_MASTERY_II",760],["PICTOMANCY_MASTERY_III",830],["PICTOMANCY_MASTERY_IV",940]],applicationDelay:.8,validateAttempt:e=>ED.condition(e)&&e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>{e.doFiller(),e.hasTraitUnlocked("ENHANCED_ARTISTRY")&&e.resources.get("PAINT").gain(1)},highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});En("BLIZZARD_II_IN_CYAN",60,{replaceIf:eg,baseCastTime:2.3,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",270],["PICTOMANCY_MASTERY_II",330],["PICTOMANCY_MASTERY_IV",360]],falloff:0,applicationDelay:.75,validateAttempt:e=>TD.condition(e)&&e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller(),highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});En("STONE_II_IN_YELLOW",60,{replaceIf:eg,startOnHotbar:!1,baseCastTime:2.3,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",290],["PICTOMANCY_MASTERY_II",350],["PICTOMANCY_MASTERY_IV",380]],falloff:0,applicationDelay:.8,validateAttempt:e=>SD.condition(e)&&e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller(),highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});En("THUNDER_II_IN_MAGENTA",60,{replaceIf:eg,startOnHotbar:!1,baseCastTime:2.3,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",310],["PICTOMANCY_MASTERY_II",370],["PICTOMANCY_MASTERY_IV",400]],falloff:0,applicationDelay:.8,validateAttempt:e=>gD.condition(e)&&e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>{e.doFiller(),e.hasTraitUnlocked("ENHANCED_ARTISTRY")&&e.resources.get("PAINT").gain(1)},highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});En("HOLY_IN_WHITE",80,{baseCastTime:0,baseManaCost:300,basePotency:[["NEVER",460],["PICTOMANCY_MASTERY_III",500],["PICTOMANCY_MASTERY_IV",570]],falloff:.65,applicationDelay:1.34,validateAttempt:e=>!e.hasResourceAvailable("MONOCHROME_TONES")&&e.hasResourceAvailable("PAINT"),onConfirm:e=>{e.tryConsumeResource("PAINT"),e.tryConsumeHyperphantasia()},highlightIf:e=>!e.hasResourceAvailable("MONOCHROME_TONES")&&e.hasResourceAvailable("PAINT")});En("COMET_IN_BLACK",90,{baseCastTime:0,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",830],["PICTOMANCY_MASTERY_IV",940]],falloff:.6,applicationDelay:1.87,validateAttempt:e=>e.hasResourceAvailable("MONOCHROME_TONES")&&e.hasResourceAvailable("PAINT"),onConfirm:e=>{e.tryConsumeResource("PAINT"),e.tryConsumeResource("MONOCHROME_TONES"),e.tryConsumeHyperphantasia()},highlightIf:e=>e.hasResourceAvailable("MONOCHROME_TONES")});En("RAINBOW_DRIP",92,{baseCastTime:4,baseRecastTime:6,baseManaCost:400,basePotency:1e3,applicationDelay:1.24,falloff:.85,onConfirm:e=>{e.resources.get("PAINT").gain(1),e.tryConsumeResource("RAINBOW_BRIGHT")},highlightIf:e=>e.hasResourceAvailable("RAINBOW_BRIGHT")});En("STAR_PRISM",100,{baseCastTime:0,baseManaCost:0,basePotency:1100,applicationDelay:1.25,falloff:.7,validateAttempt:e=>e.hasResourceAvailable("STARSTRUCK"),onConfirm:e=>{e.tryConsumeResource("STARSTRUCK"),e.tryConsumeHyperphantasia()},highlightIf:e=>e.hasResourceAvailable("STARSTRUCK")});$a("SUBTRACTIVE_PALETTE",60,"cd_SUBTRACTIVE",{cooldown:1,validateAttempt:e=>!e.hasResourceAvailable("SUBTRACTIVE_PALETTE")&&(e.hasResourceAvailable("SUBTRACTIVE_SPECTRUM")||e.hasResourceAvailable("PALETTE_GAUGE",50)),onConfirm:e=>{e.tryConsumeResource("SUBTRACTIVE_SPECTRUM")||e.resources.get("PALETTE_GAUGE").consume(50),e.hasResourceAvailable("MONOCHROME_TONES")&&p.reportWarning({kind:"custom",en:"comet overwrite!",zh:""}),e.hasTraitUnlocked("ENHANCED_PALETTE")&&e.gainStatus("MONOCHROME_TONES"),e.gainStatus("SUBTRACTIVE_PALETTE",3)},highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_SPECTRUM")||e.resources.get("PALETTE_GAUGE").available(50)});const NB=[mB,ID,_D,pD,ND],CB=[["CREATURE_MOTIF",30,e=>!1],["POM_MOTIF",30,ID.condition],["WING_MOTIF",30,_D.condition],["CLAW_MOTIF",96,pD.condition],["MAW_MOTIF",96,ND.condition]];CB.forEach(([e,t,n],a)=>En(e,t,{replaceIf:NB,startOnHotbar:a===0,baseCastTime:3,baseRecastTime:4,baseManaCost:0,applicationDelay:0,validateAttempt:n,onConfirm:s=>s.resources.get("CREATURE_CANVAS").gain(1)}));const bB=[AB,CD,bD,OD,DD],OB=[["LIVING_MUSE",30,0,0,e=>!1],["POM_MUSE",30,[["NEVER",700],["PICTOMANCY_MASTERY_III",800]],.62,CD.condition],["WINGED_MUSE",30,[["NEVER",700],["PICTOMANCY_MASTERY_III",800]],.98,bD.condition],["CLAWED_MUSE",96,800,.98,OD.condition],["FANGED_MUSE",96,800,1.16,DD.condition]];OB.forEach(([e,t,n,a,s],c)=>$a(e,t,"cd_LIVING_MUSE",{replaceIf:bB,startOnHotbar:c===0,potency:n,falloff:.7,applicationDelay:a,cooldown:40,validateAttempt:s,onConfirm:d=>{const f=d.resources.get("DEPICTIONS"),h=d.resources.get("PORTRAIT");d.tryConsumeResource("CREATURE_CANVAS"),f.gain(1),e==="WINGED_MUSE"&&(h.overrideCurrentValue(1),d.hasTraitUnlocked("ENHANCED_PICTOMANCY_IV")||f.overrideCurrentValue(0)),e==="FANGED_MUSE"&&(h.overrideCurrentValue(2),f.overrideCurrentValue(0))},maxCharges:3,highlightIf:d=>d.hasResourceAvailable("CREATURE_CANVAS")}));$a("MOG_OF_THE_AGES",30,"cd_PORTRAIT",{replaceIf:[TB],potency:[["NEVER",800],["PICTOMANCY_MASTERY_III",1e3]],falloff:.7,applicationDelay:1.15,validateAttempt:e=>e.hasResourceExactly("PORTRAIT",1),onConfirm:e=>e.tryConsumeResource("PORTRAIT"),cooldown:30,highlightIf:e=>e.hasResourceAvailable("PORTRAIT")});$a("RETRIBUTION_OF_THE_MADEEN",30,"cd_PORTRAIT",{replaceIf:[RB],startOnHotbar:!1,potency:1100,falloff:.7,applicationDelay:1.3,validateAttempt:e=>e.hasResourceExactly("PORTRAIT",2),onConfirm:e=>e.tryConsumeResource("PORTRAIT",!0),cooldown:30,highlightIf:e=>e.hasResourceAvailable("PORTRAIT")});En("WEAPON_MOTIF",50,{replaceIf:[yD],baseCastTime:3,baseRecastTime:4,baseManaCost:0,applicationDelay:0,validateAttempt:e=>!1});En("HAMMER_MOTIF",50,{replaceIf:[SB],startOnHotbar:!1,baseCastTime:3,baseRecastTime:4,baseManaCost:0,applicationDelay:0,validateAttempt:e=>yD.condition(e)&&!e.hasResourceAvailable("HAMMER_TIME"),onConfirm:e=>e.resources.get("WEAPON_CANVAS").gain(1)});$a("STEEL_MUSE",50,"cd_STEEL_MUSE",{replaceIf:[IB],cooldown:60,maxCharges:2,validateAttempt:e=>!1});$a("STRIKING_MUSE",50,"cd_STEEL_MUSE",{replaceIf:[gB],startOnHotbar:!1,requiresCombat:!0,cooldown:60,maxCharges:2,validateAttempt:e=>e.hasResourceAvailable("WEAPON_CANVAS"),onConfirm:e=>{e.tryConsumeResource("WEAPON_CANVAS"),e.gainStatus("HAMMER_TIME",3)},highlightIf:e=>e.hasResourceAvailable("WEAPON_CANVAS")});const $C=[{newSkill:"HAMMER_STAMP",condition:e=>!e.hasTraitUnlocked("ENHANCED_PICTOMANCY_II")||e.getHammerStacks()===3},{newSkill:"HAMMER_BRUSH",condition:e=>e.hasTraitUnlocked("ENHANCED_PICTOMANCY_II")&&e.getHammerStacks()===2},{newSkill:"POLISHING_HAMMER",condition:e=>e.hasTraitUnlocked("ENHANCED_PICTOMANCY_II")&&e.getHammerStacks()===1}],DB=[["HAMMER_STAMP",50,[["NEVER",420],["PICTOMANCY_MASTERY_II",500],["PICTOMANCY_MASTERY_III",540],["PICTOMANCY_MASTERY_IV",560]],1.38],["HAMMER_BRUSH",86,[["NEVER",560],["PICTOMANCY_MASTERY_IV",580]],1.25],["POLISHING_HAMMER",86,[["NEVER",580],["PICTOMANCY_MASTERY_IV",600]],2.1]];DB.forEach(([e,t,n,a],s)=>En(e,t,{replaceIf:$C,baseCastTime:0,startOnHotbar:s===0,basePotency:n,falloff:.7,applicationDelay:a,validateAttempt:c=>$C[s].condition(c)&&c.hasResourceAvailable("HAMMER_TIME"),onConfirm:c=>c.tryConsumeResource("HAMMER_TIME"),highlightIf:c=>c.hasResourceAvailable("HAMMER_TIME"),jobPotencyModifiers:c=>[$.AutoCDH]}));En("LANDSCAPE_MOTIF",70,{replaceIf:[vD],baseCastTime:3,baseRecastTime:4,baseManaCost:0,applicationDelay:0,validateAttempt:e=>!1});En("STARRY_SKY_MOTIF",70,{replaceIf:[_B],startOnHotbar:!1,baseCastTime:3,baseRecastTime:4,baseManaCost:0,applicationDelay:0,validateAttempt:e=>vD.condition(e)&&!e.hasResourceAvailable("STARRY_MUSE"),onConfirm:e=>e.resources.get("LANDSCAPE_CANVAS").gain(1)});$a("SCENIC_MUSE",70,"cd_SCENIC_MUSE",{replaceIf:[MD],applicationDelay:0,cooldown:120,validateAttempt:e=>!1});$a("STARRY_MUSE",70,"cd_SCENIC_MUSE",{replaceIf:[pB],startOnHotbar:!1,requiresCombat:!0,applicationDelay:0,cooldown:120,validateAttempt:e=>MD.condition(e),onConfirm:e=>{e.tryConsumeResource("LANDSCAPE_CANVAS"),e.hasTraitUnlocked("ENHANCED_PICTOMANCY")&&(e.gainStatus("HYPERPHANTASIA",5),e.gainStatus("INSPIRATION")),e.hasTraitUnlocked("ENHANCED_PICTOMANCY_V")&&e.gainStatus("STARSTRUCK"),e.gainStatus("STARRY_MUSE"),e.gainStatus("SUBTRACTIVE_SPECTRUM")},highlightIf:e=>e.hasResourceAvailable("LANDSCAPE_CANVAS")});Ze("PCT","TEMPERA_COAT",10,"cd_TEMPERA_COAT",{rscType:"TEMPERA_COAT",replaceIf:[{newSkill:"TEMPERA_COAT_POP",condition:e=>e.hasResourceAvailable("TEMPERA_COAT")}],applicationDelay:0,cooldown:120});$a("TEMPERA_GRASSA",88,"cd_GRASSA",{replaceIf:[{newSkill:"TEMPERA_GRASSA_POP",condition:e=>e.hasResourceAvailable("TEMPERA_GRASSA")}],applicationDelay:0,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("TEMPERA_COAT"),onConfirm:e=>{e.tryConsumeResource("TEMPERA_COAT"),e.gainStatus("TEMPERA_GRASSA")},highlightIf:e=>e.hasResourceAvailable("TEMPERA_COAT")});$a("TEMPERA_COAT_POP",10,"cd_TEMPERA_POP",{replaceIf:[{newSkill:"TEMPERA_GRASSA_POP",condition:e=>e.hasResourceAvailable("TEMPERA_GRASSA")}],startOnHotbar:!1,applicationDelay:0,animationLock:si,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("TEMPERA_COAT"),onConfirm:e=>{e.tryConsumeResource("TEMPERA_COAT");const t=e.cooldowns.get("cd_TEMPERA_COAT").timeTillNextStackAvailable();console.assert(t>0,"attempted to pop Tempera Coat when no timer for Tempera Coat CD was active"),e.cooldowns.get("cd_TEMPERA_COAT").overrideTimeTillNextStack(Math.max(0,t-60))},highlightIf:e=>e.hasResourceAvailable("TEMPERA_COAT")});$a("TEMPERA_GRASSA_POP",10,"cd_TEMPERA_POP",{replaceIf:[{newSkill:"TEMPERA_COAT_POP",condition:e=>e.hasResourceAvailable("TEMPERA_COAT")}],startOnHotbar:!1,applicationDelay:0,animationLock:si,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("TEMPERA_GRASSA"),onConfirm:e=>{e.tryConsumeResource("TEMPERA_GRASSA");const t=e.cooldowns.get("cd_TEMPERA_COAT").timeTillNextStackAvailable();console.assert(t>0,"attempted to pop Tempera Grassa when no timer for Tempera Coat CD was active"),e.cooldowns.get("cd_TEMPERA_COAT").overrideTimeTillNextStack(Math.max(0,t-30))},highlightIf:e=>e.hasResourceAvailable("TEMPERA_GRASSA")});Ze("PCT","SMUDGE",20,"cd_SMUDGE",{rscType:"SMUDGE",applicationDelay:0,cooldown:20,animationLock:Jt});Object.keys(fS).forEach(e=>qt(e,`RDM/${Ke[e].name}.png`));class yB extends en{jobSpecificSelfTargetedBuffViewProps(){return[...Object.keys(fS).map(t=>this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){const n=this.state.resources,a=n.get("WHITE_MANA").availableAmount(),s=n.get("BLACK_MANA").availableAmount(),c=n.get("MANA_STACKS").availableAmount();return[{kind:"bar",name:N({en:"white mana",zh:""}),color:t.rdm.whiteMana,progress:a/100,valueString:a.toFixed(0)},{kind:"bar",name:N({en:"black mana",zh:""}),color:t.rdm.blackMana,progress:s/100,valueString:s.toFixed(0)},{kind:"counter",name:N({en:"mana stacks",zh:""}),color:t.rdm.manaStack,currentStacks:c,maxStacks:3}]}}const ci=(e,t,n)=>{Je("RDM",e,t,n??{})};ci("WHITE_MANA",100);ci("BLACK_MANA",100);ci("MANA_STACKS",3);ci("ACCELERATION",1,{timeout:20});ci("DUALCAST",1,{timeout:15});ci("EMBOLDEN",1,{timeout:20});ci("GRAND_IMPACT_READY",1,{timeout:30,warnOnTimeout:!0});ci("MAGICK_BARRIER",1,{timeout:10});ci("MAGICKED_SWORDPLAY",3,{timeout:30,warnOnTimeout:!0});ci("MANAFICATION",1,{timeout:30});ci("PREFULGENCE_READY",1,{timeout:30,warnOnTimeout:!0});ci("THORNED_FLOURISH",1,{timeout:30,warnOnTimeout:!0});ci("VERFIRE_READY",1,{timeout:30});ci("VERSTONE_READY",1,{timeout:30});ci("RDM_MELEE_COUNTER",2,{timeout:30});ci("RDM_FINISHER_COUNTER",2,{timeout:30});ci("RDM_AOE_COUNTER",2,{timeout:30});const LD=["IMPACT","VERAERO","VERTHUNDER","VERAERO_III","VERTHUNDER_III"],xD=["VERHOLY","VERFLARE","SCORCH","RESOLUTION"];class vB extends tn{constructor(t){super(t);const n=this.hasTraitUnlocked("ENHANCED_SWIFTCAST")?40:60,a=this.hasTraitUnlocked("RED_MAGIC_MASTERY")?35:45;[new ze("cd_SWIFTCAST",n,1,1),new ze("cd_CONTRE_SIXTE",a,1,1)].forEach(c=>this.cooldowns.set(c));const s=this.hasTraitUnlocked("ENHANCED_ACCELERATION")?2:1;this.cooldowns.set(new ze("cd_ACCELERATION",55,s,s)),this.registerRecurringEvents()}get statusPropsGenerator(){return new yB(this)}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("EMBOLDEN")&&n.aspect!==Ne.Physical&&t.addBuff(U.Embolden),n.name==="IMPACT"&&this.hasResourceAvailable("ACCELERATION")&&t.addBuff(U.Acceleration)}hasThreeManaStacks(){return this.hasResourceAvailable("MANA_STACKS",3)}getFinisherCounter(){return this.resources.get("RDM_FINISHER_COUNTER").availableAmount()}processDualcastAndInstants(t){xD.includes(t)||t==="GRAND_IMPACT"&&this.tryConsumeResource("GRAND_IMPACT_READY")||LD.includes(t)&&this.tryConsumeResource("ACCELERATION")||this.tryConsumeResource("DUALCAST")||this.tryConsumeResource("SWIFTCAST")||this.gainStatus("DUALCAST")}gainColorMana(t){const n=this.resources.get("WHITE_MANA"),a=this.resources.get("BLACK_MANA");if(t.w){const s=a.availableAmount()-n.availableAmount()>30;n.gain(s?Math.floor(t.w/2):t.w)}if(t.b){const s=n.availableAmount()-a.availableAmount()>30;a.gain(s?Math.floor(t.b/2):t.b)}Math.abs(a.availableAmount()-n.availableAmount())>30&&p.reportWarning({kind:"custom",en:"mana difference became more than 30",zh:""})}colorManaExceeds(t){return this.hasResourceAvailable("MAGICKED_SWORDPLAY")||this.hasResourceAvailable("WHITE_MANA",t)&&this.hasResourceAvailable("BLACK_MANA",t)}consumeColorMana(t){this.hasResourceAvailable("MAGICKED_SWORDPLAY")?this.tryConsumeResource("MAGICKED_SWORDPLAY"):(this.resources.get("WHITE_MANA").consume(t),this.resources.get("BLACK_MANA").consume(t))}maybeGainVerproc(t,n=.5){this.maybeGainProc(t,n,!0)}processComboStatus(t){const n=this.resources.get("MANA_STACKS"),a=this.config.level>=80,s=this.config.level>=90,c=this.resources.get("RDM_MELEE_COUNTER").availableAmount(),d=this.resources.get("RDM_FINISHER_COUNTER").availableAmount(),f=this.resources.get("RDM_AOE_COUNTER").availableAmount(),h=c+d+f>0;let m;t==="ENCHANTED_RIPOSTE"||t==="RIPOSTE"?(h&&p.reportComboBreak(),m=[1,0,0],t==="ENCHANTED_RIPOSTE"&&n.gain(1)):t==="ENCHANTED_ZWERCHHAU"||t==="ZWERCHHAU"?(h&&c!==1&&p.reportComboBreak(),m=[c===1?2:0,0,0],t==="ENCHANTED_ZWERCHHAU"&&n.gain(1)):t==="ENCHANTED_REDOUBLEMENT"||t==="REDOUBLEMENT"?(h&&c!==2&&p.reportComboBreak(),m=[0,0,0],t==="ENCHANTED_REDOUBLEMENT"&&n.gain(1)):t==="VERHOLY"||t==="VERFLARE"?(m=[0,a?1:0,0],n.consume(3)):t==="SCORCH"?m=[0,s?2:0,0]:t==="RESOLUTION"?m=[0,0,0]:t==="ENCHANTED_MOULINET"?(c+d>0&&p.reportComboBreak(),m=[0,0,1],n.gain(1)):t==="ENCHANTED_MOULINET_II"?(m=[0,0,2],n.gain(1)):t==="ENCHANTED_MOULINET_III"?(m=[0,0,0],n.gain(1)):t==="ENCHANTED_REPRISE"?m=[c,d,f]:(h&&p.reportComboBreak(),m=[0,0,0],n.consume(n.availableAmount())),this.setComboState("RDM_MELEE_COUNTER",m[0]),this.setComboState("RDM_FINISHER_COUNTER",m[1]),this.setComboState("RDM_AOE_COUNTER",m[2])}}const Xn=(e,t,n)=>{const a=Pe(n.onConfirm,s=>s.processDualcastAndInstants(e),s=>s.processComboStatus(e));return oa("RDM",e,t,{...n,aspect:n.isPhysical?Ne.Physical:void 0,castTime:s=>s.config.adjustedCastTime(n.baseCastTime),recastTime:s=>s.config.adjustedGCD(),manaCost:n.baseManaCost??0,potency:n.basePotency,jobPotencyModifiers:s=>{const c=[];return s.hasResourceAvailable("EMBOLDEN")&&c.push($.EmboldenMagic),n.jobPotencyModifiers&&c.push(...n.jobPotencyModifiers(s)),c},isInstantFn:s=>xD.includes(e)||e==="GRAND_IMPACT"||LD.includes(e)&&s.hasResourceAvailable("ACCELERATION")||s.hasResourceAvailable("DUALCAST")||s.hasResourceAvailable("SWIFTCAST"),onConfirm:a})},Ha=(e,t,n)=>{const a=!e.toString().startsWith("ENCHANTED"),s=Pe(c=>c.processComboStatus(e),n.onConfirm);return un("RDM",e,t,{...n,aspect:a?Ne.Physical:void 0,onConfirm:s,jobPotencyModifiers:c=>{const d=[];return a||c.hasResourceAvailable("EMBOLDEN")&&d.push($.EmboldenMagic),d}})},ir=(e,t,n,a)=>st("RDM",e,t,n,{aspect:a.isPhysical?Ne.Physical:void 0,jobPotencyModifiers:s=>!a.isPhysical&&s.hasResourceAvailable("EMBOLDEN")?[$.EmboldenMagic]:[],...a}),HD={newSkill:"SCORCH",condition:e=>e.getFinisherCounter()===1},kD={newSkill:"RESOLUTION",condition:e=>e.getFinisherCounter()===2},aE={newSkill:"GRAND_IMPACT",condition:e=>e.getFinisherCounter()<1&&e.hasResourceAvailable("GRAND_IMPACT_READY")},bd=[{newSkill:"JOLT_II",condition:e=>e.getFinisherCounter()<1&&!e.hasResourceAvailable("GRAND_IMPACT_READY")},HD,kD,aE];Xn("JOLT_II",62,{replaceIf:bd,autoUpgrade:{trait:"RED_MAGIC_MASTERY_III",otherSkill:"JOLT_III"},baseCastTime:2,baseManaCost:200,applicationDelay:.8,basePotency:280,validateAttempt:e=>e.getFinisherCounter()<1&&!e.hasResourceAvailable("GRAND_IMPACT_READY"),onConfirm:e=>e.gainColorMana({w:2,b:2})});Xn("JOLT_III",84,{replaceIf:bd,autoDowngrade:{trait:"RED_MAGIC_MASTERY_III",otherSkill:"JOLT_II"},baseCastTime:2,baseManaCost:200,applicationDelay:.8,basePotency:360,validateAttempt:e=>e.getFinisherCounter()<1&&!e.hasResourceAvailable("GRAND_IMPACT_READY"),onConfirm:e=>e.gainColorMana({w:2,b:2})});const UD=[["NEVER",300],["RED_MAGIC_MASTERY_II",340],["RED_MAGIC_MASTERY_III",380]];Xn("VERSTONE",30,{baseCastTime:2,baseManaCost:200,applicationDelay:.8,basePotency:UD,validateAttempt:e=>e.hasResourceAvailable("VERSTONE_READY"),onConfirm:e=>{e.gainColorMana({w:5}),e.tryConsumeResource("VERSTONE_READY")},highlightIf:e=>e.hasResourceAvailable("VERSTONE_READY")});Xn("VERFIRE",26,{baseCastTime:2,baseManaCost:200,applicationDelay:.8,basePotency:UD,validateAttempt:e=>e.hasResourceAvailable("VERFIRE_READY"),onConfirm:e=>{e.gainColorMana({b:5}),e.tryConsumeResource("VERFIRE_READY")},highlightIf:e=>e.hasResourceAvailable("VERFIRE_READY")});const tg={newSkill:"VERHOLY",condition:e=>e.hasThreeManaStacks()},ng={newSkill:"VERFLARE",condition:e=>e.hasThreeManaStacks()};Xn("VERAERO",10,{replaceIf:[tg],autoUpgrade:{trait:"RED_MAGIC_MASTERY_II",otherSkill:"VERAERO_III"},baseCastTime:5,baseManaCost:400,applicationDelay:.76,basePotency:360,validateAttempt:e=>!e.hasThreeManaStacks(),onConfirm:e=>{e.gainColorMana({w:6}),e.hasResourceAvailable("ACCELERATION")?e.gainStatus("VERSTONE_READY"):e.maybeGainVerproc("VERSTONE_READY")}});Xn("VERTHUNDER",4,{replaceIf:[ng],autoUpgrade:{trait:"RED_MAGIC_MASTERY_II",otherSkill:"VERTHUNDER_III"},baseCastTime:5,baseManaCost:400,applicationDelay:.76,basePotency:360,validateAttempt:e=>!e.hasThreeManaStacks(),onConfirm:e=>{e.gainColorMana({b:6}),e.hasResourceAvailable("ACCELERATION")?e.gainStatus("VERFIRE_READY"):e.maybeGainVerproc("VERFIRE_READY")}});const wD=[["NEVER",380],["ENCHANTED_BLADE_MASTERY",440]];Xn("VERAERO_III",82,{replaceIf:[tg],autoDowngrade:{trait:"RED_MAGIC_MASTERY_II",otherSkill:"VERAERO"},baseCastTime:5,baseManaCost:400,applicationDelay:.76,basePotency:wD,validateAttempt:e=>!e.hasThreeManaStacks(),onConfirm:e=>{e.gainColorMana({w:6}),e.hasResourceAvailable("ACCELERATION")?e.gainStatus("VERSTONE_READY"):e.maybeGainVerproc("VERSTONE_READY")}});Xn("VERTHUNDER_III",82,{replaceIf:[ng],autoDowngrade:{trait:"RED_MAGIC_MASTERY_II",otherSkill:"VERTHUNDER"},baseCastTime:5,baseManaCost:400,applicationDelay:.76,basePotency:wD,validateAttempt:e=>!e.hasThreeManaStacks(),onConfirm:e=>{e.gainColorMana({b:6}),e.hasResourceAvailable("ACCELERATION")?e.gainStatus("VERFIRE_READY"):e.maybeGainVerproc("VERFIRE_READY")}});const PD=[["NEVER",100],["RED_MAGIC_MASTERY",120],["RED_MAGIC_MASTERY_III",140]];Xn("VERAERO_II",22,{replaceIf:[tg],baseCastTime:2,baseManaCost:400,applicationDelay:.8,basePotency:PD,falloff:0,validateAttempt:e=>!e.hasThreeManaStacks(),onConfirm:e=>e.gainColorMana({w:7})});Xn("VERTHUNDER_II",18,{replaceIf:[ng],baseCastTime:2,baseManaCost:400,falloff:0,applicationDelay:.8,basePotency:PD,validateAttempt:e=>!e.hasThreeManaStacks(),onConfirm:e=>e.gainColorMana({b:7})});Xn("IMPACT",66,{replaceIf:[HD,kD,aE],baseCastTime:5,baseManaCost:400,falloff:0,applicationDelay:.76,basePotency:[["NEVER",200],["RED_MAGIC_MASTERY_III",210]],jobPotencyModifiers:e=>e.hasResourceAvailable("ACCELERATION")?[$.AccelerationImpact]:[],validateAttempt:e=>e.getFinisherCounter()<1&&!e.hasResourceAvailable("GRAND_IMPACT_READY"),onConfirm:e=>e.gainColorMana({w:3,b:3})});Xn("GRAND_IMPACT",96,{replaceIf:bd,startOnHotbar:!1,baseCastTime:0,baseManaCost:0,basePotency:600,falloff:.55,applicationDelay:1.55,validateAttempt:aE.condition,highlightIf:aE.condition,onConfirm:e=>e.gainColorMana({w:3,b:3})});Ha("RIPOSTE",1,{replaceIf:[{newSkill:"ENCHANTED_RIPOSTE",condition:e=>e.colorManaExceeds(20)}],applicationDelay:.62,potency:130,recastTime:2.5,validateAttempt:e=>!e.colorManaExceeds(20)});Ha("ZWERCHHAU",35,{replaceIf:[{newSkill:"ENCHANTED_ZWERCHHAU",condition:e=>e.colorManaExceeds(15)}],applicationDelay:.62,potency:100,combo:{potency:150,resource:"RDM_MELEE_COUNTER",resourceValue:1},recastTime:2.5,validateAttempt:e=>!e.colorManaExceeds(15),highlightIf:e=>e.resources.get("RDM_MELEE_COUNTER").availableAmount()===1});Ha("REDOUBLEMENT",50,{replaceIf:[{newSkill:"ENCHANTED_REDOUBLEMENT",condition:e=>e.colorManaExceeds(15)}],applicationDelay:.62,potency:100,combo:{potency:230,resource:"RDM_MELEE_COUNTER",resourceValue:2},recastTime:2.5,validateAttempt:e=>!e.colorManaExceeds(15),highlightIf:e=>e.resources.get("RDM_MELEE_COUNTER").availableAmount()===2});Ha("ENCHANTED_RIPOSTE",50,{startOnHotbar:!1,replaceIf:[{newSkill:"RIPOSTE",condition:e=>!e.colorManaExceeds(20)}],applicationDelay:.62,potency:[["NEVER",220],["RED_MAGIC_MASTERY_III",280],["ENCHANTED_BLADE_MASTERY",340]],recastTime:1.5,validateAttempt:e=>e.colorManaExceeds(20),onConfirm:e=>e.consumeColorMana(20)});Ha("ENCHANTED_ZWERCHHAU",50,{startOnHotbar:!1,replaceIf:[{newSkill:"ZWERCHHAU",condition:e=>!e.colorManaExceeds(15)}],applicationDelay:.62,potency:[["NEVER",100],["RED_MAGIC_MASTERY_III",150],["ENCHANTED_BLADE_MASTERY",190]],combo:{potency:[["NEVER",290],["RED_MAGIC_MASTERY_III",340],["ENCHANTED_BLADE_MASTERY",380]],resource:"RDM_MELEE_COUNTER",resourceValue:1},recastTime:1.5,validateAttempt:e=>e.colorManaExceeds(15),onConfirm:e=>e.consumeColorMana(15),highlightIf:e=>e.resources.get("RDM_MELEE_COUNTER").availableAmount()===1});Ha("ENCHANTED_REDOUBLEMENT",50,{startOnHotbar:!1,replaceIf:[{newSkill:"REDOUBLEMENT",condition:e=>!e.colorManaExceeds(15)}],applicationDelay:.62,potency:[["NEVER",100],["RED_MAGIC_MASTERY_III",130],["ENCHANTED_BLADE_MASTERY",190]],combo:{potency:[["NEVER",470],["RED_MAGIC_MASTERY_III",500],["ENCHANTED_BLADE_MASTERY",560]],resource:"RDM_MELEE_COUNTER",resourceValue:2},recastTime:2.2,validateAttempt:e=>e.colorManaExceeds(15),onConfirm:e=>e.consumeColorMana(15),highlightIf:e=>e.resources.get("RDM_MELEE_COUNTER").availableAmount()===2});const oE=e=>e.resources.get("WHITE_MANA").available(5)&&e.resources.get("BLACK_MANA").available(5);Ha("REPRISE",76,{replaceIf:[{newSkill:"ENCHANTED_REPRISE",condition:e=>oE(e)}],applicationDelay:.62,potency:100,recastTime:2.5,validateAttempt:e=>!oE(e)});Ha("ENCHANTED_REPRISE",76,{startOnHotbar:!1,replaceIf:[{newSkill:"REPRISE",condition:e=>!oE(e)}],applicationDelay:.62,potency:[["NEVER",290],["RED_MAGIC_MASTERY_III",340],["ENCHANTED_BLADE_MASTERY",420]],recastTime:2.5,validateAttempt:e=>oE(e),onConfirm:e=>{e.resources.get("WHITE_MANA").consume(5),e.resources.get("BLACK_MANA").consume(5)}});const mo=[{newSkill:"MOULINET",condition:e=>e.resources.get("RDM_AOE_COUNTER").availableAmount()===0&&!e.colorManaExceeds(20)||!e.colorManaExceeds(15)},{newSkill:"ENCHANTED_MOULINET",condition:e=>e.colorManaExceeds(20)&&e.resources.get("RDM_AOE_COUNTER").availableAmount()===0},{newSkill:"ENCHANTED_MOULINET_II",condition:e=>e.colorManaExceeds(15)&&e.resources.get("RDM_AOE_COUNTER").availableAmount()===1},{newSkill:"ENCHANTED_MOULINET_III",condition:e=>e.colorManaExceeds(15)&&e.resources.get("RDM_AOE_COUNTER").availableAmount()===2}];Ha("MOULINET",52,{replaceIf:mo,falloff:0,applicationDelay:.8,potency:60,recastTime:2.5,validateAttempt:mo[0].condition});Ha("ENCHANTED_MOULINET",52,{startOnHotbar:!1,replaceIf:mo,falloff:0,applicationDelay:.8,potency:130,recastTime:1.5,validateAttempt:mo[1].condition,onConfirm:e=>e.consumeColorMana(20)});Ha("ENCHANTED_MOULINET_II",52,{startOnHotbar:!1,replaceIf:mo,falloff:0,applicationDelay:.8,potency:140,recastTime:1.5,validateAttempt:mo[2].condition,onConfirm:e=>e.consumeColorMana(15),highlightIf:mo[2].condition});Ha("ENCHANTED_MOULINET_III",52,{startOnHotbar:!1,replaceIf:mo,falloff:0,applicationDelay:.8,potency:150,recastTime:1.5,validateAttempt:mo[3].condition,onConfirm:e=>e.consumeColorMana(15),highlightIf:mo[3].condition});const GD=[["NEVER",600],["ENCHANTED_BLADE_MASTERY",650]];Xn("VERHOLY",70,{startOnHotbar:!1,baseCastTime:0,baseManaCost:400,falloff:.55,applicationDelay:1.43,basePotency:GD,validateAttempt:e=>e.hasThreeManaStacks(),highlightIf:e=>e.hasThreeManaStacks(),onConfirm:e=>{e.resources.get("WHITE_MANA").availableAmount()<e.resources.get("BLACK_MANA").availableAmount()?e.gainStatus("VERSTONE_READY"):e.maybeGainVerproc("VERSTONE_READY",.2),e.gainColorMana({w:11})}});Xn("VERFLARE",68,{startOnHotbar:!1,baseCastTime:0,baseManaCost:400,falloff:.55,applicationDelay:1.43,basePotency:GD,validateAttempt:e=>e.hasThreeManaStacks(),highlightIf:e=>e.hasThreeManaStacks(),onConfirm:e=>{e.resources.get("BLACK_MANA").availableAmount()<e.resources.get("WHITE_MANA").availableAmount()?e.gainStatus("VERFIRE_READY"):e.maybeGainVerproc("VERFIRE_READY",.2),e.gainColorMana({b:11})}});Xn("SCORCH",80,{startOnHotbar:!1,replaceIf:bd,baseCastTime:0,baseManaCost:400,falloff:.55,applicationDelay:1.83,basePotency:[["NEVER",680],["ENCHANTED_BLADE_MASTERY",750]],validateAttempt:e=>e.getFinisherCounter()===1,onConfirm:e=>e.gainColorMana({w:4,b:4}),highlightIf:e=>e.getFinisherCounter()===1});Xn("RESOLUTION",90,{startOnHotbar:!1,replaceIf:bd,baseCastTime:0,baseManaCost:400,falloff:.55,applicationDelay:1.56,basePotency:[["NEVER",750],["ENCHANTED_BLADE_MASTERY",850]],validateAttempt:e=>e.getFinisherCounter()===2,onConfirm:e=>e.gainColorMana({w:4,b:4}),highlightIf:e=>e.getFinisherCounter()===2});Xn("VERCURE",54,{baseCastTime:2,baseManaCost:500,applicationDelay:.8,basePotency:0});Xn("VERRAISE",64,{baseCastTime:10,baseManaCost:2400,applicationDelay:.81,basePotency:0});Ze("RDM","EMBOLDEN",58,"cd_EMBOLDEN",{replaceIf:[{newSkill:"VICE_OF_THORNS",condition:e=>e.hasResourceAvailable("THORNED_FLOURISH")}],rscType:"EMBOLDEN",applicationDelay:.62,cooldown:120,onApplication:e=>{e.hasTraitUnlocked("ENHANCED_EMBOLDEN")&&e.gainStatus("THORNED_FLOURISH")}});Ze("RDM","MANAFICATION",60,"cd_MANAFICATION",{replaceIf:[{newSkill:"PREFULGENCE",condition:e=>e.hasResourceAvailable("PREFULGENCE_READY")}],rscType:"MANAFICATION",requiresCombat:!0,applicationDelay:0,cooldown:110,onApplication:e=>{e.hasTraitUnlocked("ENHANCED_MANAFICATION")&&e.gainStatus("PREFULGENCE_READY"),e.gainStatus("MAGICKED_SWORDPLAY",3),(e.hasResourceAvailable("RDM_MELEE_COUNTER")||e.hasResourceAvailable("RDM_FINISHER_COUNTER")||e.hasResourceAvailable("RDM_AOE_COUNTER"))&&p.reportComboBreak(),e.setComboState("RDM_MELEE_COUNTER",0),e.setComboState("RDM_FINISHER_COUNTER",0),e.setComboState("RDM_AOE_COUNTER",0)}});ir("CORPS_A_CORPS",6,"cd_CORPS_A_CORPS",{isPhysical:!0,applicationDelay:.62,potency:130,cooldown:35,maxCharges:2,animationLock:Jt});const BD=[["NEVER",130],["ENHANCED_DISPLACEMENT",180]];ir("ENGAGEMENT",40,"cd_DISPLACEMENT",{isPhysical:!0,applicationDelay:.62,potency:BD,cooldown:35,maxCharges:2});ir("DISPLACEMENT",40,"cd_DISPLACEMENT",{isPhysical:!0,applicationDelay:.62,potency:BD,cooldown:35,maxCharges:2,animationLock:Jt});ir("FLECHE",45,"cd_FLECHE",{isPhysical:!0,applicationDelay:1.16,potency:[["NEVER",460],["ENCHANTED_BLADE_MASTERY",480]],cooldown:25});ir("CONTRE_SIXTE",56,"cd_CONTRE_SIXTE",{isPhysical:!0,falloff:0,applicationDelay:1.16,potency:[["NEVER",380],["ENCHANTED_BLADE_MASTERY",420]],cooldown:35});Ze("RDM","ACCELERATION",50,"cd_ACCELERATION",{rscType:"ACCELERATION",applicationDelay:0,cooldown:55,maxCharges:2,onApplication:e=>{e.hasTraitUnlocked("ENHANCED_ACCELERATION_II")&&(e.hasResourceAvailable("GRAND_IMPACT_READY")&&p.reportWarning({kind:"overwrite",rsc:"GRAND_IMPACT_READY"}),e.gainStatus("GRAND_IMPACT_READY"))}});Ze("RDM","MAGICK_BARRIER",86,"cd_MAGICK_BARRIER",{rscType:"MAGICK_BARRIER",applicationDelay:0,cooldown:120});ir("VICE_OF_THORNS",92,"cd_VICE_OF_THORNS",{startOnHotbar:!1,falloff:.55,applicationDelay:.8,potency:950,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("THORNED_FLOURISH"),onConfirm:e=>e.tryConsumeResource("THORNED_FLOURISH"),highlightIf:e=>e.hasResourceAvailable("THORNED_FLOURISH")});ir("PREFULGENCE",100,"cd_PREFULGENCE",{startOnHotbar:!1,falloff:.55,applicationDelay:1.42,potency:1200,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("PREFULGENCE_READY"),onConfirm:e=>e.tryConsumeResource("PREFULGENCE_READY"),highlightIf:e=>e.hasResourceAvailable("PREFULGENCE_READY")});Object.keys(ES).forEach(e=>qt(e,`RPR/${Ke[e].name}.png`));class MB extends en{jobSpecificOtherTargetedBuffViewProps(){return this.makeTargetedTimers("DEATHS_DESIGN")}jobSpecificSelfTargetedBuffViewProps(){return[...Object.keys(ES).filter(t=>t!=="DEATHS_DESIGN").map(t=>t==="SOULSOW"?this.makeCommonTimerless(t):this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){var T,S;const n=this.state.resources,a=n.get("SOUL").availableAmount(),s=n.get("SHROUD").availableAmount(),c=n.get("LEMURE_SHROUD").availableAmount(),d=n.get("VOID_SHROUD").availableAmount(),f=n.get("RPR_COMBO"),h=n.get("RPR_AOE_COMBO"),m=f.available(1)?(T=f.pendingChange)==null?void 0:T.timeTillEvent:h.available(1)?(S=h.pendingChange)==null?void 0:S.timeTillEvent:void 0,R=[{kind:"text",name:N({en:"Combo Timer",zh:""}),text:(m==null?void 0:m.toFixed(3))??"N/A"},{kind:"bar",name:N({en:"Soul Gauge",zh:""}),color:a<50?t.rpr.soulGaugeLow:t.rpr.soulGaugeHigh,progress:a/100,valueString:Math.floor(a)+"/100"}];return this.state.hasTraitUnlocked("SHROUD_GAUGE")&&R.push({kind:"bar",name:N({en:"Shroud Gauge",zh:""}),color:s<50?t.rpr.shroudGaugeLow:t.rpr.shroudGaugeHigh,progress:s/100,valueString:Math.floor(s)+"/100"},{kind:"counter",name:N({en:"Lemure Shroud",zh:""}),color:t.rpr.lemureShroud,currentStacks:c,maxStacks:5}),this.state.hasTraitUnlocked("VOID_SOUL")&&R.push({kind:"counter",name:N({en:"Void Shroud",zh:""}),color:d<2?t.rpr.voidShroudLow:t.rpr.voidShroudHigh,currentStacks:d,maxStacks:5}),R}}function yt(e,t,n){Je("RPR",e,t,n??{})}yt("SOUL",100);yt("SHROUD",100);yt("DEATHS_DESIGN",1,{});yt("SOUL_REAVER",2,{timeout:30});yt("ENHANCED_GIBBET",1,{timeout:60});yt("ENHANCED_GALLOWS",1,{timeout:60});yt("EXECUTIONER",2,{timeout:30});yt("ENSHROUDED",1,{timeout:30});yt("LEMURE_SHROUD",5,{timeout:30});yt("VOID_SHROUD",5);yt("OBLATIO",1,{timeout:30});yt("ENHANCED_VOID_REAPING",1,{timeout:30});yt("ENHANCED_CROSS_REAPING",1,{timeout:30});yt("IDEAL_HOST",1,{timeout:30});yt("PERFECTIO_OCCULTA",1,{timeout:30});yt("PERFECTIO_PARATA",1,{timeout:30});yt("ARCANE_CIRCLE",1,{timeout:20});yt("CIRCLE_OF_SACRIFICE",1,{timeout:5});yt("BLOODSOWN_CIRCLE",1,{timeout:6});yt("IMMORTAL_SACRIFICE",8,{timeout:30});yt("ARCANE_CREST",1,{timeout:5});yt("CREST_OF_TIME_BORROWED",1,{timeout:5});yt("CREST_OF_TIME_RETURNED",1,{timeout:15});yt("SOULSOW",1,{default:1});yt("THRESHOLD",1,{timeout:10});yt("ENHANCED_HARPE",1,{timeout:10});yt("HELLS_INGRESS_USED",1);yt("RPR_COMBO",2,{timeout:30});yt("RPR_AOE_COMBO",1,{timeout:30});class LB extends tn{constructor(t){super(t);const n=this.hasTraitUnlocked("TEMPERED_SOUL")?2:1;this.cooldowns.set(new ze("cd_SOUL_SLICE",30,n,n)),this.registerRecurringEvents()}get statusPropsGenerator(){return new MB(this)}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("ARCANE_CIRCLE")&&t.addBuff(U.ArcaneCircle),t.targetList.some(a=>this.hasDebuffActive("DEATHS_DESIGN",a))&&t.addBuff(U.DeathsDesign)}refreshDeathsDesign(t){const n=this.debuffs.get("DEATHS_DESIGN",t),a=Math.min(this.debuffs.timeTillExpiry("DEATHS_DESIGN",t)+30,60);if(n.available(1)){n.overrideTimer(this,a);return}n.gain(1),this.debuffs.addDebuffEvent({rscType:"DEATHS_DESIGN",name:"drop Death's Design on target "+t,targetNumber:t,delay:a,fnOnRsc:s=>{s.consume(1)}})}setTimedResource(t,n){this.tryConsumeResource(t),this.resources.get(t).gain(n),this.enqueueResourceDrop(t)}processCombo(t){const n=this.resources.get("RPR_COMBO").availableAmount(),a=this.resources.get("RPR_AOE_COMBO").availableAmount(),[s,c]=new Map([["SLICE",[1,0]],["WAXING_SLICE",[n===1?2:0,0]],["INFERNAL_SLICE",[0,0]],["SPINNING_SCYTHE",[0,1]],["NIGHTMARE_SCYTHE",[0,0]]]).get(t)??[n,a];s!==n&&this.setComboState("RPR_COMBO",s),c!==a&&this.setComboState("RPR_AOE_COMBO",c)}processSoulGauge(t){const n=this.resources.get("SOUL");if(["SLICE","WAXING_SLICE","INFERNAL_SLICE","SPINNING_SCYTHE","NIGHTMARE_SCYTHE","HARPE","HARVEST_MOON"].includes(t)){n.gain(10);return}if(["SOUL_SLICE","SOUL_SCYTHE"].includes(t)){n.gain(50);return}if(["BLOOD_STALK","UNVEILED_GALLOWS","UNVEILED_GIBBET","GRIM_SWATHE","GLUTTONY"].includes(t)){n.consume(50);return}}processShroudGauge(t){const n=this.resources.get("SHROUD");if(["GALLOWS","GIBBET","EXECUTIONERS_GALLOWS","EXECUTIONERS_GIBBET","GUILLOTINE","EXECUTIONERS_GUILLOTINE"].includes(t)){n.gain(10);return}t==="ENSHROUD"&&!this.resources.get("IDEAL_HOST").available(1)&&n.consume(50)}processReaversExecutioner(t){const n=this.resources.get("SOUL_REAVER"),a=this.resources.get("EXECUTIONER");if(["GIBBET","GALLOWS","GUILLOTINE"].includes(t)){n.consume(1);return}if(["EXECUTIONERS_GIBBET","EXECUTIONERS_GALLOWS","EXECUTIONERS_GUILLOTINE"].includes(t)){a.consume(1);return}if(this.skillsList.get(t).cdName==="cd_GCD"&&(n.consume(n.availableAmount()),a.consume(a.availableAmount())),["BLOOD_STALK","UNVEILED_GALLOWS","UNVEILED_GIBBET","GRIM_SWATHE"].includes(t)){n.consume(n.availableAmount()),a.consume(a.availableAmount()),this.setTimedResource("SOUL_REAVER",1);return}if(t==="GLUTTONY"){if(n.consume(n.availableAmount()),a.consume(a.availableAmount()),this.hasTraitUnlocked("ENHANCED_GLUTTONY")){this.setTimedResource("EXECUTIONER",2);return}this.setTimedResource("SOUL_REAVER",2);return}}processGibbetGallows(t){const n=this.resources.get("SOUL_REAVER"),a=this.resources.get("EXECUTIONER");["GIBBET","GALLOWS","EXECUTIONERS_GIBBET","EXECUTIONERS_GALLOWS"].includes(t)||(n.consume(n.availableAmount()),a.consume(a.availableAmount()));const s=new Map([["GIBBET","ENHANCED_GIBBET"],["EXECUTIONERS_GIBBET","ENHANCED_GIBBET"],["GALLOWS","ENHANCED_GALLOWS"],["EXECUTIONERS_GALLOWS","ENHANCED_GALLOWS"]]),c=new Map([["GIBBET","ENHANCED_GALLOWS"],["EXECUTIONERS_GIBBET","ENHANCED_GALLOWS"],["GALLOWS","ENHANCED_GIBBET"],["EXECUTIONERS_GALLOWS","ENHANCED_GIBBET"]]),d=this.resources.get(s.get(t)),f=this.resources.get(c.get(t));d.consume(d.availableAmount()),f.consume(f.availableAmount()),f.gain(1)}processCircleOfSacrifice(t){if(!this.hasResourceAvailable("CIRCLE_OF_SACRIFICE"))return;ho("RPR",t).potencyFn(this)>0&&(this.resources.get("IMMORTAL_SACRIFICE").availableAmount()===0?this.setTimedResource("IMMORTAL_SACRIFICE",1):this.resources.get("IMMORTAL_SACRIFICE").gain(1),this.tryConsumeResource("CIRCLE_OF_SACRIFICE",!0))}enterEnshroud(){this.hasResourceAvailable("IDEAL_HOST")&&this.resources.get("IDEAL_HOST").consume(1),this.hasTraitUnlocked("ENHANCED_ENSHROUD")&&this.setTimedResource("OBLATIO",1),this.setTimedResource("LEMURE_SHROUD",5),this.tryConsumeResource("PERFECTIO_PARATA",!0)}exitEnshroud(){this.tryConsumeResource("ENSHROUDED"),this.tryConsumeResource("OBLATIO"),this.tryConsumeResource("LEMURE_SHROUD"),this.tryConsumeResource("VOID_SHROUD"),this.tryConsumeResource("ENHANCED_CROSS_REAPING"),this.tryConsumeResource("ENHANCED_VOID_REAPING")}}const xB=new Set(["SHADOW_OF_DEATH","WHORL_OF_DEATH","HARVEST_MOON","HARPE","SOULSOW","VOID_REAPING","CROSS_REAPING","GRIM_REAPING","LEMURES_SLICE","LEMURES_SCYTHE","SACRIFICIUM","COMMUNIO","ARCANE_CIRCLE","HELLS_EGRESS","HELLS_INGRESS","REGRESS","ARCANE_CREST","FEINT","LEG_SWEEP","BLOODBATH","TRUE_NORTH","ARMS_LENGTH","SECOND_WIND","SPRINT","TINCTURE"]),BE=(e,t)=>n=>{const a=["GIBBET","GALLOWS","GUILLOTINE"].includes(t)?n.resources.get("SOUL_REAVER"):n.resources.get("EXECUTIONER");return n.resources.get(e).available(1)||a.available(1)&&!n.hasResourceAvailable("ENHANCED_GIBBET")&&!n.hasResourceAvailable("ENHANCED_GALLOWS")},ig=e=>e.hasResourceAvailable("SOUL_REAVER"),ag=e=>e.hasResourceAvailable("EXECUTIONER"),To=e=>t=>t.resources.get("SOUL").availableAmount()>=e,og=e=>xB.has(e),FE=e=>Pe(t=>t.processCombo(e),t=>t.processSoulGauge(e),t=>t.processShroudGauge(e),t=>t.processReaversExecutioner(e),t=>t.processCircleOfSacrifice(e)),lg=e=>{const t=[];return e.hasResourceAvailable("ARCANE_CIRCLE")&&t.push($.ArcaneCircle),t},sg=(e,t)=>{const n=new Map;return t.targetList.forEach(a=>{e.debuffs.get("DEATHS_DESIGN",a).available(1)&&n.set(a,[$.DeathsDesign])}),n},jE=(e,t,n)=>{const a=Pe(FE(e),n.onConfirm),s=Id(c=>!c.resources.get("ENSHROUDED").available(1)||og(e),n.validateAttempt??(()=>!0));return oa("RPR",e,t,{...n,recastTime:c=>c.config.adjustedGCD(n.recastTime),onConfirm:a,validateAttempt:s,isInstantFn:c=>!(e==="COMMUNIO"||e==="HARPE"&&!c.hasResourceAvailable("ENHANCED_HARPE")||e==="SOULSOW"&&c.isInCombat()),jobPotencyModifiers:lg,jobTargetPotencyModifiers:sg})},Mn=(e,t,n)=>{const a=Pe(FE(e),n.onConfirm),s=Id(c=>!c.resources.get("ENSHROUDED").available(1)||og(e),n.validateAttempt??(()=>!0));return un("RPR",e,t,{...n,onConfirm:a,jobPotencyModifiers:c=>{const d=lg(c);if(["GIBBET","EXECUTIONERS_GIBBET"].includes(e)&&c.hasResourceAvailable("ENHANCED_GIBBET")&&d.push($.EnhancedGibbetGallows),["GALLOWS","EXECUTIONERS_GALLOWS"].includes(e)&&c.hasResourceAvailable("ENHANCED_GALLOWS")&&d.push($.EnhancedGibbetGallows),e==="VOID_REAPING"&&c.hasResourceAvailable("ENHANCED_VOID_REAPING")&&d.push($.EnhancedReaping),e==="CROSS_REAPING"&&c.hasResourceAvailable("ENHANCED_CROSS_REAPING")&&d.push($.EnhancedReaping),e==="PLENTIFUL_HARVEST"&&c.hasResourceAvailable("IMMORTAL_SACRIFICE"))for(let f=0;f<c.resources.get("IMMORTAL_SACRIFICE").availableAmount();f++)d.push($.ImmortalSacrifice);return d},jobTargetPotencyModifiers:sg,validateAttempt:s})},Yi=(e,t,n,a)=>{const s=Pe(FE(e),a.onConfirm),c=Id(d=>!d.resources.get("ENSHROUDED").available(1)||og(e),a.validateAttempt??(()=>!0));return st("RPR",e,t,n,{...a,onConfirm:s,validateAttempt:c,jobPotencyModifiers:lg,jobTargetPotencyModifiers:sg})};Mn("SHADOW_OF_DEATH",10,{potency:300,aspect:Ne.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:1.15,onConfirm:(e,t)=>e.refreshDeathsDesign(t.targetList[0])});Mn("SLICE",1,{potency:[["NEVER",260],["MELEE_MASTERY_II_RPR",320],["MELEE_MASTERY_III_RPR",420]],aspect:Ne.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.49});Mn("WAXING_SLICE",5,{potency:[["NEVER",100],["MELEE_MASTERY_II_RPR",160],["MELEE_MASTERY_III_RPR",260]],combo:{potency:[["NEVER",340],["MELEE_MASTERY_II_RPR",400],["MELEE_MASTERY_III_RPR",500]],resource:"RPR_COMBO",resourceValue:1},aspect:Ne.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.58,highlightIf:e=>e.hasResourceExactly("RPR_COMBO",1)});Mn("INFERNAL_SLICE",30,{potency:[["NEVER",100],["MELEE_MASTERY_II_RPR",180],["MELEE_MASTERY_III_RPR",280]],combo:{potency:[["NEVER",420],["MELEE_MASTERY_II_RPR",500],["MELEE_MASTERY_III_RPR",600]],resource:"RPR_COMBO",resourceValue:2},aspect:Ne.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.54,highlightIf:e=>e.hasResourceExactly("RPR_COMBO",2)});Mn("SOUL_SLICE",60,{potency:[["NEVER",460],["MELEE_MASTERY_III_RPR",520]],aspect:Ne.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.99,secondaryCooldown:{cdName:"cd_SOUL_SLICE",cooldown:30,maxCharges:2}});Mn("GIBBET",70,{replaceIf:[{newSkill:"VOID_REAPING",condition:e=>e.hasResourceAvailable("ENSHROUDED")},{newSkill:"EXECUTIONERS_GIBBET",condition:e=>e.hasResourceAvailable("EXECUTIONER")}],potency:[["NEVER",460],["MELEE_MASTERY_III_RPR",500]],positional:{potency:[["NEVER",520],["MELEE_MASTERY_III_RPR",560]],location:"flank"},aspect:Ne.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.5,highlightIf:BE("ENHANCED_GIBBET","GIBBET"),validateAttempt:ig,onConfirm:e=>{e.tryConsumeResource("ENHANCED_GIBBET"),e.setTimedResource("ENHANCED_GALLOWS",1)}});Mn("GALLOWS",70,{replaceIf:[{newSkill:"CROSS_REAPING",condition:e=>e.hasResourceAvailable("ENSHROUDED")},{newSkill:"EXECUTIONERS_GALLOWS",condition:e=>e.resources.get("EXECUTIONER").available(1)}],potency:[["NEVER",460],["MELEE_MASTERY_III_RPR",500]],positional:{potency:[["NEVER",520],["MELEE_MASTERY_III_RPR",560]],location:"rear"},aspect:Ne.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.53,highlightIf:BE("ENHANCED_GALLOWS","GALLOWS"),validateAttempt:ig,onConfirm:e=>{e.tryConsumeResource("ENHANCED_GALLOWS"),e.setTimedResource("ENHANCED_GIBBET",1)}});Mn("EXECUTIONERS_GIBBET",96,{startOnHotbar:!1,potency:700,positional:{potency:760,location:"flank"},aspect:Ne.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.62,highlightIf:BE("ENHANCED_GIBBET","EXECUTIONERS_GIBBET"),validateAttempt:ag,onConfirm:e=>{e.tryConsumeResource("ENHANCED_GIBBET"),e.setTimedResource("ENHANCED_GALLOWS",1)}});Mn("EXECUTIONERS_GALLOWS",96,{startOnHotbar:!1,potency:700,positional:{potency:760,location:"flank"},aspect:Ne.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.62,highlightIf:BE("ENHANCED_GALLOWS","EXECUTIONERS_GALLOWS"),validateAttempt:ag,onConfirm:e=>{e.tryConsumeResource("ENHANCED_GALLOWS"),e.setTimedResource("ENHANCED_GIBBET",1)}});Mn("PLENTIFUL_HARVEST",88,{potency:720,aspect:Ne.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:.2,applicationDelay:1.16,highlightIf:e=>e.hasResourceAvailable("IMMORTAL_SACRIFICE",1),validateAttempt:e=>e.hasResourceAvailable("IMMORTAL_SACRIFICE",1)&&!e.hasResourceAvailable("BLOODSOWN_CIRCLE"),onConfirm:e=>{e.tryConsumeResource("IMMORTAL_SACRIFICE",!0),e.setTimedResource("IDEAL_HOST",1),e.hasTraitUnlocked("ENHANCED_PLENTIFUL_HARVEST")&&e.setTimedResource("PERFECTIO_OCCULTA",1)}});jE("COMMUNIO",90,{replaceIf:[{condition:e=>e.hasResourceAvailable("PERFECTIO_PARATA"),newSkill:"PERFECTIO"}],potency:1100,aspect:Ne.Other,castTime:1.3,recastTime:2.5,falloff:.2,applicationDelay:1.16,validateAttempt:e=>e.hasResourceAvailable("ENSHROUDED"),highlightIf:e=>e.hasResourceAvailable("ENSHROUDED")&&e.resources.get("LEMURE_SHROUD").availableAmount()===1,onConfirm:e=>{e.tryConsumeResource("PERFECTIO_OCCULTA")&&e.hasTraitUnlocked("ENHANCED_PLENTIFUL_HARVEST")&&e.setTimedResource("PERFECTIO_PARATA",1),e.exitEnshroud(),e.tryConsumeResource("ENHANCED_CROSS_REAPING"),e.tryConsumeResource("ENHANCED_VOID_REAPING")}});jE("HARPE",15,{potency:300,aspect:Ne.Other,castTime:1.3,recastTime:2.5,applicationDelay:.9,highlightIf:e=>e.hasResourceAvailable("ENHANCED_HARPE"),onConfirm:e=>e.tryConsumeResource("ENHANCED_HARPE"),startsAuto:!1});jE("SOULSOW",82,{potency:0,replaceIf:[{condition:e=>e.hasResourceAvailable("SOULSOW"),newSkill:"HARVEST_MOON"}],startOnHotbar:!0,aspect:Ne.Other,castTime:5,recastTime:2.5,applicationDelay:0,onConfirm:e=>e.resources.get("SOULSOW").gain(1)});jE("HARVEST_MOON",82,{potency:[["NEVER",600],["MELEE_MASTERY_III_RPR",800]],startOnHotbar:!1,aspect:Ne.Other,castTime:0,recastTime:2.5,falloff:.4,applicationDelay:.9,validateAttempt:e=>e.hasResourceAvailable("SOULSOW"),highlightIf:e=>e.hasResourceAvailable("SOULSOW"),onConfirm:e=>e.resources.get("SOULSOW").consume(1),startsAuto:!1});Yi("GLUTTONY",76,"cd_GLUTTONY",{replaceIf:[{condition:e=>e.hasResourceAvailable("ENSHROUDED"),newSkill:"SACRIFICIUM"}],isPhysical:!1,potency:520,startOnHotbar:!0,falloff:.25,applicationDelay:1.06,cooldown:60,validateAttempt:To(50),highlightIf:To(50)});Yi("BLOOD_STALK",50,"cd_BLOOD_STALK",{replaceIf:[{newSkill:"LEMURES_SLICE",condition:e=>e.hasResourceAvailable("ENSHROUDED")},{newSkill:"UNVEILED_GIBBET",condition:e=>e.hasResourceAvailable("ENHANCED_GIBBET")},{newSkill:"UNVEILED_GALLOWS",condition:e=>e.hasResourceAvailable("ENHANCED_GALLOWS")}],isPhysical:!0,potency:340,startOnHotbar:!0,applicationDelay:.89,cooldown:1,validateAttempt:To(50),highlightIf:To(50)});Yi("GRIM_SWATHE",55,"cd_BLOOD_STALK",{replaceIf:[{condition:e=>e.hasResourceAvailable("ENSHROUDED"),newSkill:"LEMURES_SCYTHE"}],isPhysical:!0,potency:140,startOnHotbar:!0,falloff:0,applicationDelay:.58,cooldown:1,validateAttempt:To(50),highlightIf:To(50)});Yi("UNVEILED_GIBBET",70,"cd_BLOOD_STALK",{isPhysical:!0,potency:440,startOnHotbar:!1,applicationDelay:.54,cooldown:1,validateAttempt:To(50),highlightIf:To(50)});Yi("UNVEILED_GALLOWS",70,"cd_BLOOD_STALK",{isPhysical:!0,potency:440,startOnHotbar:!1,applicationDelay:.54,cooldown:1,validateAttempt:To(50),highlightIf:To(50)});Yi("LEMURES_SLICE",86,"cd_LEMURES_SLICE",{isPhysical:!0,potency:[["NEVER",240],["MELEE_MASTERY_III_RPR",280]],startOnHotbar:!1,applicationDelay:.7,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("VOID_SHROUD",2),highlightIf:e=>e.hasResourceAvailable("VOID_SHROUD",2),onConfirm:e=>{e.resources.get("VOID_SHROUD").consume(2)}});Yi("SACRIFICIUM",92,"cd_SACRIFICIUM",{isPhysical:!1,potency:600,startOnHotbar:!1,falloff:.2,applicationDelay:.76,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("OBLATIO"),highlightIf:e=>e.hasResourceAvailable("OBLATIO"),onConfirm:e=>e.tryConsumeResource("OBLATIO")});Ze("RPR","ARCANE_CIRCLE",72,"cd_ARCANE_CIRCLE",{rscType:"ARCANE_CIRCLE",applicationDelay:.6,startOnHotbar:!0,maxCharges:1,potency:0,onApplication:e=>{e.hasTraitUnlocked("ENHANCED_ARCANE_CIRCLE")&&(e.setTimedResource("CIRCLE_OF_SACRIFICE",1),e.setTimedResource("BLOODSOWN_CIRCLE",1))},cooldown:120});Mn("VOID_REAPING",80,{startOnHotbar:!1,potency:[["NEVER",460],["MELEE_MASTERY_III_RPR",540]],aspect:Ne.Physical,recastTime:1.5,applicationDelay:.53,highlightIf:e=>e.resources.get("LEMURE_SHROUD").availableAmount()>1&&!e.hasResourceAvailable("ENHANCED_CROSS_REAPING"),validateAttempt:e=>e.hasResourceAvailable("LEMURE_SHROUD"),onConfirm:e=>{e.tryConsumeResource("ENHANCED_VOID_REAPING"),e.setTimedResource("ENHANCED_CROSS_REAPING",1),e.resources.get("LEMURE_SHROUD").consume(1),e.resources.get("VOID_SHROUD").gain(1),e.resources.get("LEMURE_SHROUD").availableAmount()===0&&e.exitEnshroud()}});Mn("CROSS_REAPING",80,{startOnHotbar:!1,potency:[["NEVER",460],["MELEE_MASTERY_III_RPR",540]],aspect:Ne.Physical,recastTime:1.5,applicationDelay:.53,highlightIf:e=>e.resources.get("LEMURE_SHROUD").availableAmount()>1&&!e.hasResourceAvailable("ENHANCED_VOID_REAPING"),validateAttempt:e=>e.hasResourceAvailable("LEMURE_SHROUD"),onConfirm:e=>{e.tryConsumeResource("ENHANCED_CROSS_REAPING"),e.setTimedResource("ENHANCED_VOID_REAPING",1),e.resources.get("LEMURE_SHROUD").consume(1),e.resources.get("VOID_SHROUD").gain(1),e.resources.get("LEMURE_SHROUD").availableAmount()===0&&e.exitEnshroud()}});Ze("RPR","ENSHROUD",80,"cd_ENSHROUD",{rscType:"ENSHROUDED",highlightIf:e=>e.hasResourceAvailable("SHROUD",50)||e.hasResourceAvailable("IDEAL_HOST"),applicationDelay:0,startOnHotbar:!0,cooldown:5,validateAttempt:e=>e.hasResourceAvailable("SHROUD",50)||e.hasResourceAvailable("IDEAL_HOST"),onConfirm:Pe(FE("ENSHROUD"),e=>e.enterEnshroud())});Mn("PERFECTIO",100,{potency:1300,aspect:Ne.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:.2,applicationDelay:1.29,startOnHotbar:!1,highlightIf:e=>e.hasResourceAvailable("PERFECTIO_PARATA"),validateAttempt:e=>e.hasResourceAvailable("PERFECTIO_PARATA"),onConfirm:e=>{e.resources.get("PERFECTIO_PARATA").consume(1)}});Yi("REGRESS",74,"cd_BLOOD_STALK",{cooldown:1,animationLock:Jt,startOnHotbar:!1,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("THRESHOLD"),onConfirm:e=>e.resources.get("THRESHOLD").consume(1)});Yi("HELLS_INGRESS",20,"cd_INGRESS_EGRESS",{replaceIf:[{condition:e=>e.hasResourceAvailable("THRESHOLD")&&e.hasResourceAvailable("HELLS_INGRESS_USED"),newSkill:"REGRESS"}],cooldown:20,animationLock:Jt,onConfirm:e=>{e.resources.get("HELLS_INGRESS_USED").gain(1),e.hasTraitUnlocked("HELLSGATE")&&e.setTimedResource("THRESHOLD",1),e.setTimedResource("ENHANCED_HARPE",1)}});Yi("HELLS_EGRESS",20,"cd_INGRESS_EGRESS",{replaceIf:[{condition:e=>e.hasResourceAvailable("THRESHOLD")&&!e.hasResourceAvailable("HELLS_INGRESS_USED"),newSkill:"REGRESS"}],cooldown:20,animationLock:Jt,onConfirm:e=>{e.tryConsumeResource("HELLS_INGRESS_USED"),e.hasTraitUnlocked("HELLSGATE")&&e.setTimedResource("THRESHOLD",1),e.setTimedResource("ENHANCED_HARPE",1)}});Yi("ARCANE_CREST",40,"cd_ARCANE_CREST",{replaceIf:[{condition:e=>e.hasResourceAvailable("CREST_OF_TIME_BORROWED"),newSkill:"ARCANE_CREST_POP"}],cooldown:30,onConfirm:e=>e.setTimedResource("CREST_OF_TIME_BORROWED",1)});Yi("ARCANE_CREST_POP",40,"cd_ARCANE_CREST_POP",{cooldown:1,animationLock:si,startOnHotbar:!1,onConfirm:e=>{e.tryConsumeResource("CREST_OF_TIME_BORROWED"),e.setTimedResource("CREST_OF_TIME_RETURNED",1)},validateAttempt:e=>e.hasResourceAvailable("CREST_OF_TIME_BORROWED"),highlightIf:e=>e.hasResourceAvailable("CREST_OF_TIME_BORROWED")});Mn("WHORL_OF_DEATH",35,{potency:100,aspect:Ne.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:1.15,onConfirm:(e,t)=>t.targetList.forEach(n=>e.refreshDeathsDesign(n))});Mn("SPINNING_SCYTHE",25,{potency:140,aspect:Ne.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.62});Mn("NIGHTMARE_SCYTHE",45,{potency:120,combo:{potency:180,resource:"RPR_AOE_COMBO",resourceValue:1},aspect:Ne.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.8,highlightIf:e=>e.hasResourceExactly("RPR_AOE_COMBO",1)});Mn("SOUL_SCYTHE",65,{potency:180,aspect:Ne.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.66,secondaryCooldown:{cdName:"cd_SOUL_SLICE",cooldown:30,maxCharges:2}});Mn("EXECUTIONERS_GUILLOTINE",96,{startOnHotbar:!1,potency:260,aspect:Ne.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.53,highlightIf:e=>e.hasResourceAvailable("EXECUTIONER"),validateAttempt:ag});Mn("GRIM_REAPING",80,{startOnHotbar:!1,potency:200,recastTime:1.5,falloff:0,applicationDelay:.8,highlightIf:e=>e.resources.get("LEMURE_SHROUD").availableAmount()>1,validateAttempt:e=>e.hasResourceAvailable("LEMURE_SHROUD"),onConfirm:e=>{e.resources.get("LEMURE_SHROUD").consume(1),e.resources.get("VOID_SHROUD").gain(1),e.resources.get("LEMURE_SHROUD").availableAmount()===0&&e.exitEnshroud()},aspect:Ne.Physical});Yi("LEMURES_SCYTHE",86,"cd_LEMURES_SLICE",{isPhysical:!0,potency:100,falloff:0,applicationDelay:.66,cooldown:1,startOnHotbar:!1,validateAttempt:e=>e.hasResourceAvailable("VOID_SHROUD",2),highlightIf:e=>e.hasResourceAvailable("VOID_SHROUD",2),onConfirm:e=>{e.resources.get("VOID_SHROUD").consume(2)}});Mn("GUILLOTINE",70,{replaceIf:[{newSkill:"GRIM_REAPING",condition:e=>e.hasResourceAvailable("ENSHROUDED")},{newSkill:"EXECUTIONERS_GUILLOTINE",condition:e=>e.resources.get("EXECUTIONER").available(1)}],potency:200,aspect:Ne.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.49,highlightIf:e=>e.hasResourceAvailable("SOUL_REAVER"),validateAttempt:ig});Yi("GAIN_SOUL_GAUGE",50,"cd_GAIN_SOUL_GAUGE",{applicationDelay:0,animationLock:si,cooldown:.01,onConfirm:e=>e.resources.get("SOUL").gain(10)});Object.keys(mS).forEach(e=>qt(e,`SAM/${Ke[e].name}.png`));class HB extends en{jobSpecificOtherTargetedBuffViewProps(){return this.makeTargetedTimers("HIGANBANA_DOT")}jobSpecificSelfTargetedBuffViewProps(){return Object.keys(mS).filter(t=>t!=="HIGANBANA_DOT").map(t=>this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){const n=this.state.resources,a=n.get("KENKI").availableAmount(),s=n.get("MEDITATION").availableAmount();return[{kind:"sen",name:N({en:"sen",zh:""}),hasSetsu:this.state.hasResourceAvailable("SETSU"),hasGetsu:this.state.hasResourceAvailable("GETSU"),hasKa:this.state.hasResourceAvailable("KA_SEN"),setsuColor:t.sam.setsu,getsuColor:t.sam.getsu,kaColor:t.sam.kaSen},{kind:"bar",name:N({en:"kenki",zh:""}),color:t.sam.kenki,progress:a/100,valueString:a.toFixed(0)},{kind:"counter",name:N({en:"meditation",zh:""}),color:t.sam.meditation,currentStacks:s,maxStacks:3}]}}const Ln=(e,t,n)=>{Je("SAM",e,t,n??{})};Ln("MEIKYO_SHISUI",3,{timeout:20,warnOnTimeout:!0});Ln("FUGETSU",1,{timeout:40});Ln("FUKA",1,{timeout:40});Ln("ZANSHIN_READY",1,{timeout:30});Ln("TENDO",1,{timeout:30,warnOnTimeout:!0});Ln("OGI_READY",1,{timeout:30});Ln("TSUBAME_GAESHI_READY",1,{timeout:30,warnOnTimeout:!0});Ln("THIRD_EYE",1,{timeout:4});Ln("TENGENTSU",1,{timeout:4});Ln("TENGENTSUS_FORESIGHT",1,{timeout:9});Ln("ENHANCED_ENPI",1,{timeout:15});Ln("MEDITATE",1,{timeout:15.2});Ln("KENKI",100,{warnOnOvercap:!0});Ln("SETSU",1,{warnOnOvercap:!0});Ln("GETSU",1,{warnOnOvercap:!0});Ln("KA_SEN",1,{warnOnOvercap:!0});Ln("MEDITATION",3,{warnOnOvercap:!0});Ln("HIGANBANA_DOT",1,{timeout:60});const FD=["SAM_TWO_READY","SAM_TWO_AOE_READY","GEKKO_READY","KASHA_READY","KAESHI_OGI_READY"];FD.forEach(e=>Ln(e,1,{timeout:30}));Ln("KAESHI_TRACKER",4,{timeout:30});class kB extends tn{constructor(t){super(t);const n=this.hasTraitUnlocked("ENHANCED_HISSATSU")?60:120,a=this.hasTraitUnlocked("ENHANCED_MEIKYO_SHISUI")?2:1;[new ze("cd_MEIKYO_SHISUI",55,a,a),new ze("cd_SENEI_GUREN",n,1,1)].forEach(s=>this.cooldowns.set(s)),super.registerRecurringEvents([{reportName:Qe("HIGANBANA_DOT"),groupedEffects:[{effectName:"HIGANBANA_DOT",appliedBy:["HIGANBANA"]}]}])}get statusPropsGenerator(){return new HB(this)}inherentSpeedModifier(){return this.hasTraitUnlocked("ENHANCED_FUGETSU_AND_FUKA")?13:10}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("ENHANCED_ENPI")&&n.name==="ENPI"&&t.addBuff(U.EnhancedEnpi),this.hasResourceAvailable("FUGETSU")&&t.addBuff(U.Fugetsu)}jobSpecificAddSpeedBuffCovers(t,n){this.hasResourceAvailable("FUKA")&&n.cdName==="cd_GCD"&&t.addBuff(U.Fuka)}hitCombo(t){return super.hitCombo(t)||this.hasResourceAvailable("MEIKYO_SHISUI")}cancelChanneledSkills(){const t=this.findNextQueuedEventByTag(Ti.MeditateTick);t&&(t.canceled=!0),this.tryConsumeResource("MEDITATE")}getFugetsuModifier(){return this.hasTraitUnlocked("ENHANCED_FUGETSU_AND_FUKA")?$.FugetsuEnhanced:$.FugetsuBase}getFukaModifier(){return this.hasResourceAvailable("FUKA")?this.inherentSpeedModifier():0}checkCombo(t){return this.hasResourceAvailable(t)||this.hasResourceAvailable("MEIKYO_SHISUI")}refreshBuff(t,n){this.addEvent(new xe(`gain ${t}`,n,()=>{this.gainStatus(t)}))}progressActiveCombo(t){FD.forEach(n=>{t.includes(n)||this.setComboState(n,0)}),t.forEach(n=>this.setComboState(n,1))}tryConsumeMeikyo(){this.tryConsumeResource("MEIKYO_SHISUI")}gainKenki(t){this.resources.get("KENKI").gain(t)}gainMeditation(){this.resources.get("MEDITATION").gain(1)}gainSen(t){this.resources.get(t).gain(1)}countSen(){return["GETSU","SETSU","KA_SEN"].reduce((t,n)=>this.hasResourceAvailable(n)?t+1:t,0)}consumeAllSen(){["GETSU","SETSU","KA_SEN"].forEach(t=>this.tryConsumeResource(t))}startMeditateTimer(){const t=n=>{const a=new xe("meditate tick",3,()=>{n<5&&(this.isInCombat()&&(p.reportMeditateTick(this.time,"+kenki/meditation"),this.resources.get("KENKI").gain(10),this.resources.get("MEDITATION").gain(1)),this.addEvent(t(n+1)))});return a.addTag(Ti.MeditateTick),a};this.addEvent(t(0))}}const Kt=(e,t,n)=>{const a=c=>{const d=c.hasResourceAvailable("FUGETSU")?[c.getFugetsuModifier()]:[];return n.jobPotencyModifiers&&d.push(...n.jobPotencyModifiers(c)),d};let s=n.baseCastTime||0;return s&&(s=c=>c.hasTraitUnlocked("ENHANCED_IAIJUTSU")?n.baseCastTime||0:c.config.adjustedSksCastTime(1.8,c.getFukaModifier())),un("SAM",e,t,{...n,castTime:s,recastTime:c=>c.config.adjustedSksGCD(n.baseRecastTime??2.5,c.getFukaModifier()),potency:n.basePotency,jobPotencyModifiers:a,isInstantFn:c=>!(n.baseCastTime&&n.baseCastTime>0)})},sa=(e,t,n,a)=>(a.potency&&!a.jobPotencyModifiers&&(a.jobPotencyModifiers=s=>s.hasResourceAvailable("FUGETSU")?[s.getFugetsuModifier()]:[]),st("SAM",e,t,n,a));Kt("ENPI",15,{applicationDelay:.71,basePotency:100,onConfirm:e=>{e.hasResourceAvailable("ENHANCED_ENPI")&&e.tryConsumeResource("ENHANCED_ENPI"),e.gainKenki(10)},jobPotencyModifiers:e=>e.hasResourceAvailable("ENHANCED_ENPI")?[e.hasTraitUnlocked("WAY_OF_THE_SAMURAI_III")?$.YatenpiEnhanced:$.YatenpiBase]:[],highlightIf:e=>e.hasResourceAvailable("ENHANCED_ENPI"),startsAuto:!1});Kt("HAKAZE",1,{autoUpgrade:{trait:"HAKAZE_MASTERY",otherSkill:"GYOFU"},applicationDelay:.85,basePotency:200,onConfirm:e=>{e.tryConsumeMeikyo(),e.gainKenki(5),e.progressActiveCombo(["SAM_TWO_READY"])}});Kt("GYOFU",92,{autoDowngrade:{trait:"HAKAZE_MASTERY",otherSkill:"HAKAZE"},applicationDelay:.85,basePotency:240,onConfirm:e=>{e.tryConsumeMeikyo(),e.gainKenki(5),e.progressActiveCombo(["SAM_TWO_READY"])}});Kt("YUKIKAZE",50,{applicationDelay:.85,basePotency:[["NEVER",100],["WAY_OF_THE_SAMURAI_II",110],["WAY_OF_THE_SAMURAI_III",160]],combo:{potency:[["NEVER",280],["WAY_OF_THE_SAMURAI_II",290],["WAY_OF_THE_SAMURAI_III",340]],resource:"SAM_TWO_READY",resourceValue:1},onConfirm:e=>{e.checkCombo("SAM_TWO_READY")&&(e.gainKenki(15),e.gainSen("SETSU")),e.tryConsumeMeikyo(),e.progressActiveCombo([])},highlightIf:e=>e.checkCombo("SAM_TWO_READY")});Kt("JINPU",4,{applicationDelay:.62,basePotency:[["NEVER",120],["WAY_OF_THE_SAMURAI_III",140]],combo:{potency:[["NEVER",280],["WAY_OF_THE_SAMURAI_III",300]],resource:"SAM_TWO_READY",resourceValue:1},onConfirm:e=>{e.checkCombo("SAM_TWO_READY")?(e.gainKenki(5),e.refreshBuff("FUGETSU",.62),e.tryConsumeMeikyo(),e.progressActiveCombo(["GEKKO_READY"])):(e.tryConsumeMeikyo(),e.progressActiveCombo([]))},highlightIf:e=>e.checkCombo("SAM_TWO_READY")});Kt("GEKKO",30,{applicationDelay:.76,basePotency:[["NEVER",100],["WAY_OF_THE_SAMURAI_II",110],["WAY_OF_THE_SAMURAI_III",160]],combo:{potency:[["NEVER",310],["WAY_OF_THE_SAMURAI_II",320],["WAY_OF_THE_SAMURAI_III",370]],resource:"GEKKO_READY",resourceValue:1},positional:{potency:[["NEVER",150],["WAY_OF_THE_SAMURAI_II",160],["WAY_OF_THE_SAMURAI_III",210]],comboPotency:[["NEVER",360],["WAY_OF_THE_SAMURAI_II",370],["WAY_OF_THE_SAMURAI_III",420]],location:"rear"},onConfirm:e=>{e.checkCombo("GEKKO_READY")&&(e.gainKenki(10),e.gainSen("GETSU")),e.hasResourceAvailable("MEIKYO_SHISUI")&&e.refreshBuff("FUGETSU",.76),e.tryConsumeMeikyo(),e.progressActiveCombo([])},highlightIf:e=>e.checkCombo("GEKKO_READY")});Kt("SHIFU",18,{applicationDelay:.8,basePotency:[["NEVER",120],["WAY_OF_THE_SAMURAI_III",140]],combo:{potency:[["NEVER",280],["WAY_OF_THE_SAMURAI_III",300]],resource:"SAM_TWO_READY",resourceValue:1},onConfirm:e=>{e.checkCombo("SAM_TWO_READY")?(e.gainKenki(5),e.refreshBuff("FUKA",.8),e.tryConsumeMeikyo(),e.progressActiveCombo(["KASHA_READY"])):(e.tryConsumeMeikyo(),e.progressActiveCombo([]))},highlightIf:e=>e.checkCombo("SAM_TWO_READY")});Kt("KASHA",40,{applicationDelay:.62,basePotency:[["NEVER",100],["WAY_OF_THE_SAMURAI_II",110],["WAY_OF_THE_SAMURAI_III",160]],combo:{potency:[["NEVER",310],["WAY_OF_THE_SAMURAI_II",320],["WAY_OF_THE_SAMURAI_III",370]],resource:"KASHA_READY",resourceValue:1},positional:{potency:[["NEVER",150],["WAY_OF_THE_SAMURAI_II",160],["WAY_OF_THE_SAMURAI_III",210]],comboPotency:[["NEVER",360],["WAY_OF_THE_SAMURAI_II",370],["WAY_OF_THE_SAMURAI_III",420]],location:"flank"},onConfirm:e=>{e.checkCombo("KASHA_READY")&&(e.gainKenki(10),e.gainSen("KA_SEN")),e.hasResourceAvailable("MEIKYO_SHISUI")&&e.refreshBuff("FUKA",.62),e.tryConsumeMeikyo(),e.progressActiveCombo([])},highlightIf:e=>e.checkCombo("KASHA_READY")});Kt("FUGA",26,{autoUpgrade:{trait:"FUGA_MASTERY",otherSkill:"FUKO"},falloff:0,applicationDelay:.76,basePotency:90,onConfirm:e=>{e.gainKenki(5),e.progressActiveCombo(["SAM_TWO_AOE_READY"])}});Kt("FUKO",86,{autoDowngrade:{trait:"FUGA_MASTERY",otherSkill:"FUGA"},falloff:0,applicationDelay:.76,basePotency:100,onConfirm:e=>{e.gainKenki(10),e.progressActiveCombo(["SAM_TWO_AOE_READY"])}});Kt("MANGETSU",35,{falloff:0,applicationDelay:.62,basePotency:100,combo:{potency:120,resource:"SAM_TWO_AOE_READY",resourceValue:1},onConfirm:e=>{e.checkCombo("SAM_TWO_AOE_READY")&&(e.gainKenki(10),e.refreshBuff("FUGETSU",.62),e.gainSen("GETSU")),e.progressActiveCombo([])},highlightIf:e=>e.checkCombo("SAM_TWO_AOE_READY")});Kt("OKA",35,{falloff:0,applicationDelay:.62,basePotency:100,combo:{potency:120,resource:"SAM_TWO_AOE_READY",resourceValue:1},onConfirm:e=>{e.checkCombo("SAM_TWO_AOE_READY")&&(e.gainKenki(10),e.refreshBuff("FUKA",.62),e.gainSen("KA_SEN")),e.progressActiveCombo([])},highlightIf:e=>e.checkCombo("SAM_TWO_AOE_READY")});const jD={newSkill:"HIGANBANA",condition:e=>e.countSen()===1},zD={newSkill:"TENKA_GOKEN",condition:e=>!e.hasResourceAvailable("TENDO")&&e.countSen()===2},YD={newSkill:"TENDO_GOKEN",condition:e=>e.hasResourceAvailable("TENDO")&&e.countSen()===2},KD={newSkill:"MIDARE_SETSUGEKKA",condition:e=>!e.hasResourceAvailable("TENDO")&&e.countSen()===3},VD={newSkill:"TENDO_SETSUGEKKA",condition:e=>e.hasResourceAvailable("TENDO")&&e.countSen()===3},Bc=[jD,zD,YD,KD,VD];Kt("IAIJUTSU",30,{replaceIf:Bc,baseCastTime:1.3,basePotency:0,applicationDelay:0,validateAttempt:e=>!1});Kt("HIGANBANA",30,{startOnHotbar:!1,replaceIf:Bc,baseCastTime:1.3,basePotency:200,applicationDelay:.62,validateAttempt:jD.condition,onConfirm:(e,t)=>{const n=[];e.hasResourceAvailable("FUGETSU")&&n.push(e.getFugetsuModifier());const a=e.hasTraitUnlocked("WAY_OF_THE_SAMURAI_III")?50:45;e.addDoTPotencies({node:t,effectName:"HIGANBANA_DOT",skillName:"HIGANBANA",tickPotency:a,speedStat:"sks",modifiers:n}),e.consumeAllSen(),e.gainMeditation()},onApplication:(e,t)=>e.applyDoT("HIGANBANA_DOT",t)});const zE=e=>t=>{t.consumeAllSen(),t.gainStatus("KAESHI_TRACKER",e),t.gainMeditation(),t.gainStatus("TSUBAME_GAESHI_READY"),t.tryConsumeResource("TENDO")};Kt("TENKA_GOKEN",30,{startOnHotbar:!1,replaceIf:Bc,baseCastTime:1.3,basePotency:300,falloff:0,applicationDelay:.62,validateAttempt:zD.condition,onConfirm:zE(1)});Kt("TENDO_GOKEN",100,{startOnHotbar:!1,replaceIf:Bc,baseCastTime:1.3,basePotency:410,falloff:0,applicationDelay:.36,validateAttempt:YD.condition,onConfirm:zE(2)});Kt("MIDARE_SETSUGEKKA",30,{startOnHotbar:!1,replaceIf:Bc,baseCastTime:1.3,basePotency:[["NEVER",620],["WAY_OF_THE_SAMURAI_III",640]],applicationDelay:.62,jobPotencyModifiers:e=>[$.AutoCrit],validateAttempt:KD.condition,onConfirm:zE(3)});Kt("TENDO_SETSUGEKKA",100,{startOnHotbar:!1,replaceIf:Bc,baseCastTime:1.3,basePotency:1100,applicationDelay:1.03,jobPotencyModifiers:e=>[$.AutoCrit],validateAttempt:VD.condition,onConfirm:zE(4)});const xT={newSkill:"KAESHI_GOKEN",condition:e=>e.hasResourceExactly("KAESHI_TRACKER",1)},HT={newSkill:"TENDO_KAESHI_GOKEN",condition:e=>e.hasResourceExactly("KAESHI_TRACKER",2)},kT={newSkill:"KAESHI_SETSUGEKKA",condition:e=>e.hasResourceExactly("KAESHI_TRACKER",3)},UT={newSkill:"TENDO_KAESHI_SETSUGEKKA",condition:e=>e.hasResourceExactly("KAESHI_TRACKER",4)},Od=[xT,HT,kT,UT];Kt("TSUBAME_GAESHI",74,{replaceIf:Od,basePotency:0,applicationDelay:0,validateAttempt:e=>!1});const YE=e=>{e.tryConsumeResource("KAESHI_TRACKER",!0),e.tryConsumeResource("TSUBAME_GAESHI_READY"),e.tryConsumeResource("KAESHI_OGI_READY")};Kt("KAESHI_GOKEN",74,{startOnHotbar:!1,replaceIf:Od,basePotency:300,falloff:0,applicationDelay:.62,validateAttempt:xT.condition,onConfirm:YE,highlightIf:xT.condition});Kt("TENDO_KAESHI_GOKEN",100,{startOnHotbar:!1,replaceIf:Od,basePotency:410,falloff:0,applicationDelay:.36,validateAttempt:HT.condition,onConfirm:YE,highlightIf:HT.condition});Kt("KAESHI_SETSUGEKKA",74,{startOnHotbar:!1,replaceIf:Od,basePotency:[["NEVER",620],["WAY_OF_THE_SAMURAI_III",640]],applicationDelay:.62,jobPotencyModifiers:e=>[$.AutoCrit],validateAttempt:kT.condition,onConfirm:YE,highlightIf:kT.condition});Kt("TENDO_KAESHI_SETSUGEKKA",74,{startOnHotbar:!1,replaceIf:Od,basePotency:1100,applicationDelay:1.03,jobPotencyModifiers:e=>[$.AutoCrit],validateAttempt:UT.condition,onConfirm:YE,highlightIf:UT.condition});Kt("OGI_NAMIKIRI",90,{replaceIf:[{newSkill:"KAESHI_NAMIKIRI",condition:e=>e.hasResourceAvailable("KAESHI_OGI_READY")}],falloff:.4,applicationDelay:.49,basePotency:[["NEVER",860],["WAY_OF_THE_SAMURAI_III",1e3]],baseCastTime:1.3,jobPotencyModifiers:e=>[$.AutoCrit],validateAttempt:e=>e.hasResourceAvailable("OGI_READY"),onConfirm:e=>{e.tryConsumeResource("OGI_READY"),e.gainMeditation(),e.gainStatus("KAESHI_OGI_READY")},highlightIf:e=>e.hasResourceAvailable("OGI_READY")});Kt("KAESHI_NAMIKIRI",90,{startOnHotbar:!1,falloff:.4,applicationDelay:.49,basePotency:[["NEVER",860],["WAY_OF_THE_SAMURAI_III",1e3]],jobPotencyModifiers:e=>[$.AutoCrit],validateAttempt:e=>e.hasResourceAvailable("KAESHI_OGI_READY"),onConfirm:e=>e.tryConsumeResource("KAESHI_OGI_READY"),highlightIf:e=>e.hasResourceAvailable("KAESHI_OGI_READY")});sa("MEIKYO_SHISUI",50,"cd_MEIKYO_SHISUI",{cooldown:55,maxCharges:2,onConfirm:e=>{e.gainStatus("MEIKYO_SHISUI",3),e.hasTraitUnlocked("ENHANCED_MEIKYO_SHISUI_II")&&e.gainStatus("TENDO")}});sa("IKISHOTEN",68,"cd_IKISHOTEN",{replaceIf:[{newSkill:"ZANSHIN",condition:e=>e.hasResourceAvailable("ZANSHIN_READY")}],cooldown:120,requiresCombat:!0,onConfirm:e=>{e.gainKenki(50),e.hasTraitUnlocked("ENHANCED_IKISHOTEN")&&e.gainStatus("OGI_READY"),e.hasTraitUnlocked("ENHANCED_IKISHOTEN_II")&&e.gainStatus("ZANSHIN_READY")}});sa("HISSATSU_SHINTEN",52,"cd_SHINTEN",{cooldown:1,applicationDelay:.62,potency:250,validateAttempt:e=>e.resources.get("KENKI").available(25),onConfirm:e=>e.resources.get("KENKI").consume(25),highlightIf:e=>e.resources.get("KENKI").available(25)});sa("HISSATSU_KYUTEN",62,"cd_KYUTEN",{cooldown:1,applicationDelay:.62,potency:100,falloff:0,validateAttempt:e=>e.resources.get("KENKI").available(25),onConfirm:e=>e.resources.get("KENKI").consume(25),highlightIf:e=>e.resources.get("KENKI").available(25)});sa("HISSATSU_GYOTEN",54,"cd_GYOTEN",{cooldown:5,applicationDelay:.49,animationLock:Jt,potency:100,validateAttempt:e=>e.resources.get("KENKI").available(10),onConfirm:e=>e.resources.get("KENKI").consume(10),highlightIf:e=>e.resources.get("KENKI").available(10)});sa("HISSATSU_YATEN",56,"cd_YATEN",{cooldown:10,applicationDelay:.45,animationLock:Jt,potency:100,validateAttempt:e=>e.resources.get("KENKI").available(10),onConfirm:e=>{e.resources.get("KENKI").consume(10),e.gainStatus("ENHANCED_ENPI")},highlightIf:e=>e.resources.get("KENKI").available(10)});sa("HISSATSU_SENEI",72,"cd_SENEI_GUREN",{cooldown:60,applicationDelay:.67,potency:800,validateAttempt:e=>e.resources.get("KENKI").available(25),onConfirm:e=>e.resources.get("KENKI").consume(25),highlightIf:e=>e.resources.get("KENKI").available(25)});sa("HISSATSU_GUREN",70,"cd_SENEI_GUREN",{cooldown:60,applicationDelay:.62,potency:400,falloff:0,validateAttempt:e=>e.resources.get("KENKI").available(25),onConfirm:e=>e.resources.get("KENKI").consume(25),highlightIf:e=>e.resources.get("KENKI").available(25)});sa("HAGAKURE",68,"cd_HAGAKURE",{cooldown:5,validateAttempt:e=>e.countSen()>0,onConfirm:e=>{e.gainKenki(e.countSen()*10),e.consumeAllSen()},highlightIf:e=>e.countSen()===3});sa("SHOHA",80,"cd_SHOHA",{cooldown:15,potency:[["NEVER",560],["WAY_OF_THE_SAMURAI_III",640]],falloff:.4,applicationDelay:.58,validateAttempt:e=>e.resources.get("MEDITATION").available(3),onConfirm:e=>e.tryConsumeResource("MEDITATION",!0),highlightIf:e=>e.resources.get("MEDITATION").available(3)});Ze("SAM","THIRD_EYE",6,"cd_THIRD_EYE",{rscType:"THIRD_EYE",autoUpgrade:{trait:"THIRD_EYE_MASTERY",otherSkill:"TENGENTSU"},replaceIf:[{newSkill:"THIRD_EYE_POP",condition:e=>e.hasResourceAvailable("THIRD_EYE")}],cooldown:15,applicationDelay:0});Ze("SAM","TENGENTSU",82,"cd_THIRD_EYE",{rscType:"TENGENTSU",autoDowngrade:{trait:"THIRD_EYE_MASTERY",otherSkill:"THIRD_EYE"},replaceIf:[{newSkill:"TENGENTSU_POP",condition:e=>e.hasResourceAvailable("TENGENTSU")}],cooldown:15,applicationDelay:0});sa("THIRD_EYE_POP",6,"cd_THIRD_EYE_POP",{startOnHotbar:!1,applicationDelay:0,animationLock:si,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("THIRD_EYE"),onConfirm:e=>{e.tryConsumeResource("THIRD_EYE"),e.gainKenki(10)},highlightIf:e=>e.hasResourceAvailable("THIRD_EYE")});sa("TENGENTSU_POP",82,"cd_THIRD_EYE_POP",{startOnHotbar:!1,applicationDelay:0,animationLock:si,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("TENGENTSU"),onConfirm:e=>{e.tryConsumeResource("TENGENTSU"),e.gainStatus("TENGENTSUS_FORESIGHT"),e.gainKenki(10)},highlightIf:e=>e.hasResourceAvailable("TENGENTSU")});sa("ZANSHIN",96,"cd_ZANSHIN",{startOnHotbar:!1,cooldown:1,falloff:.4,applicationDelay:1.03,potency:940,validateAttempt:e=>e.hasResourceAvailable("ZANSHIN_READY")&&e.resources.get("KENKI").available(50),onConfirm:e=>{e.resources.get("KENKI").consume(50),e.tryConsumeResource("ZANSHIN_READY")},highlightIf:e=>e.hasResourceAvailable("ZANSHIN_READY")});Ze("SAM","MEDITATE",60,"cd_MEDITATE",{rscType:"MEDITATE",cooldown:60,applicationDelay:.62,validateAttempt:e=>e.cooldowns.get("cd_GCD").stacksAvailable()>0,onConfirm:e=>{const t=e.config.adjustedSksGCD(2.5,e.getFukaModifier());e.cooldowns.get("cd_GCD").useStackWithRecast(e.config.getAfterTaxGCD(t))},onApplication:e=>e.startMeditateTimer()});Object.keys(TS).forEach(e=>qt(e,`SMN/${Ke[e].name}.png`));class UB extends en{jobSpecificSelfTargetedBuffViewProps(){const t=["AETHERFLOW","IFRITS_FAVOR","TITANS_FAVOR","GARUDAS_FAVOR","CRIMSON_STRIKE_READY"];return[...Object.keys(TS).map(n=>t.includes(n)?this.makeCommonTimerless(n):this.makeCommonTimer(n))]}jobSpecificResourceViewProps(t){const n=this.state.resources,a=Math.max(n.timeTillReady("FIRE_ATTUNEMENT"),n.timeTillReady("EARTH_ATTUNEMENT"),n.timeTillReady("WIND_ATTUNEMENT")),s=n.get("ACTIVE_DEMI").availableAmount(),c=n.timeTillReady("ACTIVE_DEMI");n.get("RUBY_ARCANUM").available(1),n.get("TOPAZ_ARCANUM").available(1),n.get("EMERALD_ARCANUM").available(1);const d=s===wT.BAHAMUT?t.smn.bahamut:s===wT.PHOENIX?t.smn.phoenix:t.smn.solar,f=n.get("FIRE_ATTUNEMENT").available(1)?t.smn.ruby:n.get("EARTH_ATTUNEMENT").available(1)?t.smn.topaz:t.smn.emerald,h=this.state.cooldowns.get("cd_SUMMON_LOCKOUT"),m=h.timeTillNextStackAvailable();return[{kind:"counter",name:N({en:"aetherflow",zh:""}),color:t.smn.aetherflow,currentStacks:n.get("AETHERFLOW").availableAmount(),maxStacks:2},{kind:"bar",name:N({en:"demi summon",zh:""}),color:d,progress:c===0?0:1-c/15,valueString:c.toFixed(3)},{kind:"attunement",aetherName:N({en:"aether",zh:""}),attunementName:N({en:"attunement",zh:""}),ruby:n.get("RUBY_ARCANUM").available(1),topaz:n.get("TOPAZ_ARCANUM").available(1),emerald:n.get("EMERALD_ARCANUM").available(1),attunementCount:Math.max(n.get("FIRE_ATTUNEMENT").availableAmount(),n.get("EARTH_ATTUNEMENT").availableAmount(),n.get("WIND_ATTUNEMENT").availableAmount()),timeRemaining:a,rubyColor:t.smn.ruby,topazColor:t.smn.topaz,emeraldColor:t.smn.emerald},{kind:"bar",name:N({en:"summon lock",zh:""}),color:f,progress:m>0?1-h.timeTillNextStackAvailable()/h.currentStackCd():0,valueString:m.toFixed(3)}]}}const an=(e,t,n)=>{Je("SMN",e,t,n??{})};var wT=(e=>(e[e.NONE=0]="NONE",e[e.SOLAR=1]="SOLAR",e[e.BAHAMUT=2]="BAHAMUT",e[e.PHOENIX=3]="PHOENIX",e))(wT||{});const WD=15;an("AETHERFLOW",2,{warnOnOvercap:!0});an("RUBY_ARCANUM",1);an("TOPAZ_ARCANUM",1);an("EMERALD_ARCANUM",1);an("FIRE_ATTUNEMENT",2,{timeout:30});an("EARTH_ATTUNEMENT",4,{timeout:30});an("WIND_ATTUNEMENT",4,{timeout:30});an("CRIMSON_STRIKE_READY",1);an("EVERLASTING_FLIGHT",1,{timeout:21});an("FURTHER_RUIN",1,{timeout:60});an("GARUDAS_FAVOR",1);an("IFRITS_FAVOR",1);an("TITANS_FAVOR",1);an("RADIANT_AEGIS",1,{timeout:30});an("REFULGENT_LUX",1,{timeout:30});an("REKINDLE",1,{timeout:30});an("UNDYING_FLAME",1,{timeout:15});an("RUBYS_GLIMMER",1,{timeout:30,warnOnTimeout:!0});an("SEARING_LIGHT",1,{timeout:20});an("SLIPSTREAM",1,{timeout:15});an("ACTIVE_DEMI",3,{timeout:WD});an("NEXT_DEMI_CYCLE",3);an("DEMI_AUTO",4);const QC=3.163,wB=new Map([["SUMMON_IFRIT_II",2.1],["SUMMON_GARUDA_II",2.1],["SUMMON_TITAN_II",2.1],["SUMMON_IFRIT",2.46],["SUMMON_GARUDA",2.1],["SUMMON_TITAN",2.46]]),JC=new Map([["SUMMON_IFRIT_II",1.96],["SUMMON_GARUDA_II",1.29],["SUMMON_TITAN_II",1.96],["SUMMON_IFRIT",.936],["SUMMON_GARUDA",.8],["SUMMON_TITAN",.8],["ENKINDLE_BAHAMUT",.894],["ENKINDLE_PHOENIX",1.026],["ENKINDLE_SOLAR_BAHAMUT",.846]]),PB=new Map([["SUMMON_IFRIT_II",6.29],["SUMMON_GARUDA_II",6.29],["SUMMON_TITAN_II",6.29],["SUMMON_IFRIT",4.6],["SUMMON_GARUDA",4.3],["SUMMON_TITAN",4.6]]);class GB extends tn{constructor(t){super(t);const n=this.hasTraitUnlocked("ENHANCED_SWIFTCAST")?40:60;this.cooldowns.set(new ze("cd_SWIFTCAST",n,1,1));const a=this.hasTraitUnlocked("ENHANCED_RADIANT_AEGIS")?2:1;this.cooldowns.set(new ze("cd_RADIANT_AEGIS",60,a,a)),this.cooldowns.set(new ze("cd_DEMI_SUMMON",this.config.adjustedGCD(60),1,1)),this.cooldowns.set(new ze("cd_SUMMON_LOCKOUT",5,1,1)),this.registerRecurringEvents([{groupedEffects:[{effectName:"SLIPSTREAM",appliedBy:["SLIPSTREAM"],isGroundTargeted:!0}]}],["SUMMON_BAHAMUT","SUMMON_PHOENIX","SUMMON_SOLAR_BAHAMUT"])}get statusPropsGenerator(){return new UB(this)}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("SEARING_LIGHT")&&t.addBuff(U.SearingLight)}get activeDemi(){return this.resources.get("ACTIVE_DEMI").availableAmount()}get nextDemi(){const t=this.resources.get("NEXT_DEMI_CYCLE").availableAmount();return this.hasTraitUnlocked("ENHANCED_SUMMON_BAHAMUT_II")?t===1?2:t===3?3:1:this.hasTraitUnlocked("ENHANCED_SUMMON_BAHAMUT")?t%2===0?2:3:2}get hasActivePet(){return this.activeDemi!==0||this.cooldowns.get("cd_SUMMON_LOCKOUT").stacksAvailable()===0}snapSearingAndTincture(t,n){this.hasResourceAvailable("SEARING_LIGHT")&&n.addModifiers($.SearingLight),this.hasResourceAvailable("TINCTURE")&&(n.addModifiers($.Tincture),t.addBuff(U.Tincture))}makePetPotency(t,n,a,s,c){const d=new sn({config:this.config,sourceTime:a,sourceSkill:n,aspect:Ne.Other,basePotency:s,snapshotTime:this.getDisplayTime(),description:"",targetList:t,falloff:c});return d.addModifiers($.SmnPet),d}handleDemiAuto(){if(!this.hasResourceAvailable("DEMI_AUTO"))return;const t=4-this.resources.get("DEMI_AUTO").availableAmount();if(t<0)return;const n=this.resources.get("DEMI_AUTO").node;if(n!==void 0){const a=n.getDotPotencies("DEMI_AUTO")[t];this.snapSearingAndTincture(n,a),a.snapshotTime=this.getDisplayTime(),p.resolvePotency(a)}this.tryConsumeResource("DEMI_AUTO"),this.addEvent(new xe("demi auto",QC,()=>this.handleDemiAuto()))}startPetAutos(t,n){const a=this.resources.get("DEMI_AUTO"),s=this.activeDemi===1?160:150;a.gain(4),a.node=t;for(let c=0;c<4;c++)t.addDoTPotency(this.makePetPotency(t.targetList,n,this.getDisplayTime(),s),"DEMI_AUTO");this.addEvent(new xe("first demi auto",QC,()=>this.handleDemiAuto()))}queuePetDamageEvent(t,n,a,s,c,d){const f=this.getDisplayTime();this.addEvent(new xe(a+" pet snapshot",c,()=>{const h=this.makePetPotency(t.targetList,a,f,s,.6);t.addPotency(h),this.snapSearingAndTincture(t,h),this.jobSpecificAddDamageBuffCovers(t,ho("SMN",n)),this.addEvent(new xe(a+" application",d,()=>p.resolvePotency(h)))}))}queueEnkindle(t,n){let a,s;n==="ENKINDLE_BAHAMUT"?(a="AKH_MORN",s=1300):n==="ENKINDLE_PHOENIX"?(a="REVELATION",s=1300):(a="EXODUS",s=1500);const c=this.resources.get("ACTIVE_DEMI").pendingChange;console.assert(c),c&&c.timeTillEvent<2.5&&p.reportWarning({kind:"custom",en:"enkindle used near end of demi window may ghost"}),this.queuePetDamageEvent(t,n,a,s,0,JC.get(n))}queuePrimalSummon(t,n){let a=600;this.hasTraitUnlocked("ARCANE_MASTERY")?a=800:this.hasTraitUnlocked("ENKINDLE_II")&&(a=750);let s;n.includes("IFRIT")?s="INFERNO":n.includes("TITAN")?s="EARTHEN_FURY":s="AERIAL_BLAST",this.queuePetDamageEvent(t,n,s,a,wB.get(n),JC.get(n));const c=PB.get(n);this.cooldowns.get("cd_SUMMON_LOCKOUT").useStackWithRecast(c)}}const rt=(e,t,n)=>{const a=n.baseCastTime??0,s=n.baseRecastTime??2.5,c=a>0?Pe(d=>d.tryConsumeResource("SWIFTCAST"),n.onConfirm):n.onConfirm;return oa("SMN",e,t,{...n,castTime:d=>d.config.adjustedCastTime(a),recastTime:d=>s<=1.5?s:d.config.adjustedGCD(s),potency:n.basePotency,jobPotencyModifiers:d=>{const f=[];return n.isPetAttack&&f.push($.SmnPet),d.hasResourceAvailable("SEARING_LIGHT")&&f.push($.SearingLight),f},isInstantFn:d=>d.hasResourceAvailable("SWIFTCAST")||a===0,onConfirm:c})},No=(e,t,n,a)=>st("SMN",e,t,n,{...a,jobPotencyModifiers:s=>s.hasResourceAvailable("SEARING_LIGHT")?[$.SearingLight]:[]}),Qs=[{newSkill:"RUIN_III",condition:e=>e.activeDemi===0},{newSkill:"ASTRAL_IMPULSE",condition:e=>e.activeDemi===2},{newSkill:"FOUNTAIN_OF_FIRE",condition:e=>e.activeDemi===3},{newSkill:"UMBRAL_IMPULSE",condition:e=>e.activeDemi===1}];rt("RUIN_III",54,{basePotency:[["NEVER",300],["RUIN_MASTERY_IV",310],["ARCANE_MASTERY",400]],baseCastTime:1.5,manaCost:300,replaceIf:Qs,applicationDelay:.8});rt("ASTRAL_IMPULSE",58,{basePotency:[["NEVER",440],["ARCANE_MASTERY",500]],manaCost:300,replaceIf:Qs,applicationDelay:.67,validateAttempt:Qs[1].condition,startOnHotbar:!1});rt("FOUNTAIN_OF_FIRE",80,{basePotency:[["NEVER",540],["ARCANE_MASTERY",580]],manaCost:300,replaceIf:Qs,applicationDelay:1.07,validateAttempt:Qs[2].condition,startOnHotbar:!1});rt("UMBRAL_IMPULSE",100,{basePotency:640,manaCost:300,replaceIf:Qs,applicationDelay:.8,validateAttempt:Qs[3].condition,startOnHotbar:!1});const Ql=[{newSkill:"OUTBURST",condition:e=>e.activeDemi===0},{newSkill:"ASTRAL_FLARE",condition:e=>e.activeDemi===2},{newSkill:"BRAND_OF_PURGATORY",condition:e=>e.activeDemi===3},{newSkill:"UMBRAL_FLARE",condition:e=>e.activeDemi===1}];rt("OUTBURST",26,{autoUpgrade:{trait:"OUTBURST_MASTERY",otherSkill:"TRI_DISASTER"},basePotency:100,baseCastTime:1.5,manaCost:300,replaceIf:Ql,applicationDelay:.8,falloff:0});rt("TRI_DISASTER",74,{autoDowngrade:{trait:"OUTBURST_MASTERY",otherSkill:"OUTBURST"},basePotency:120,baseCastTime:1.5,manaCost:300,replaceIf:Ql,applicationDelay:.8,falloff:0});rt("ASTRAL_FLARE",58,{basePotency:180,manaCost:300,replaceIf:Ql,applicationDelay:.54,validateAttempt:Ql[1].condition,falloff:0,startOnHotbar:!1});rt("BRAND_OF_PURGATORY",80,{basePotency:240,manaCost:300,replaceIf:Ql,applicationDelay:.8,validateAttempt:Ql[2].condition,falloff:0,startOnHotbar:!1});rt("UMBRAL_FLARE",100,{basePotency:300,manaCost:300,replaceIf:Ql,applicationDelay:.53,validateAttempt:Ql[2].condition,falloff:0,startOnHotbar:!1});const BB=[{newSkill:"RUBY_RUIN_III",condition:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT")},{newSkill:"TOPAZ_RUIN_III",condition:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT")},{newSkill:"EMERALD_RUIN_III",condition:e=>e.hasResourceAvailable("WIND_ATTUNEMENT")}];rt("GEMSHINE",6,{replaceIf:BB,applicationDelay:0,validateAttempt:e=>!1});rt("RUBY_RUIN_III",54,{autoUpgrade:{trait:"RUIN_MASTERY_III",otherSkill:"RUBY_RITE"},basePotency:410,baseCastTime:2.8,baseRecastTime:3,applicationDelay:.62,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("FIRE_ATTUNEMENT"),startOnHotbar:!1});rt("TOPAZ_RUIN_III",54,{autoUpgrade:{trait:"RUIN_MASTERY_III",otherSkill:"TOPAZ_RITE"},basePotency:300,applicationDelay:.62,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("EARTH_ATTUNEMENT"),startOnHotbar:!1});rt("EMERALD_RUIN_III",54,{autoUpgrade:{trait:"RUIN_MASTERY_III",otherSkill:"EMERALD_RITE"},baseRecastTime:1.5,basePotency:180,applicationDelay:.62,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("WIND_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("WIND_ATTUNEMENT"),startOnHotbar:!1});rt("RUBY_RITE",72,{autoDowngrade:{trait:"RUIN_MASTERY_III",otherSkill:"RUBY_RITE"},basePotency:[["NEVER",480],["RUIN_MASTERY_IV",510],["ARCANE_MASTERY",580]],baseCastTime:2.8,baseRecastTime:3,applicationDelay:.62,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("FIRE_ATTUNEMENT"),startOnHotbar:!1});rt("TOPAZ_RITE",72,{autoDowngrade:{trait:"RUIN_MASTERY_III",otherSkill:"TOPAZ_RUIN_III"},basePotency:[["NEVER",320],["RUIN_MASTERY_IV",330],["ARCANE_MASTERY",340]],applicationDelay:.62,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT"),onConfirm:e=>{e.tryConsumeResource("EARTH_ATTUNEMENT"),e.gainStatus("TITANS_FAVOR")},startOnHotbar:!1});rt("EMERALD_RITE",72,{autoDowngrade:{trait:"RUIN_MASTERY_III",otherSkill:"EMERALD_RUIN_III"},baseRecastTime:1.5,basePotency:[["NEVER",220],["RUIN_MASTERY_IV",230],["ARCANE_MASTERY",280]],applicationDelay:.62,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("WIND_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("WIND_ATTUNEMENT"),startOnHotbar:!1});const FB=[{newSkill:"RUBY_OUTBURST",condition:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT")},{newSkill:"TOPAZ_OUTBURST",condition:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT")},{newSkill:"EMERALD_OUTBURST",condition:e=>e.hasResourceAvailable("WIND_ATTUNEMENT")}];rt("PRECIOUS_BRILLIANCE",26,{replaceIf:FB,applicationDelay:0,validateAttempt:e=>!1});rt("RUBY_OUTBURST",26,{autoUpgrade:{trait:"OUTBURST_MASTERY",otherSkill:"RUBY_DISASTER"},basePotency:160,baseCastTime:2.8,baseRecastTime:3,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("FIRE_ATTUNEMENT"),falloff:0,startOnHotbar:!1});rt("TOPAZ_OUTBURST",26,{autoUpgrade:{trait:"OUTBURST_MASTERY",otherSkill:"TOPAZ_DISASTER"},basePotency:110,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("EARTH_ATTUNEMENT"),falloff:0,startOnHotbar:!1});rt("EMERALD_OUTBURST",26,{autoUpgrade:{trait:"OUTBURST_MASTERY",otherSkill:"EMERALD_DISASTER"},baseRecastTime:1.5,basePotency:70,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("WIND_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("WIND_ATTUNEMENT"),falloff:0,startOnHotbar:!1});rt("RUBY_DISASTER",74,{autoDowngrade:{trait:"OUTBURST_MASTERY",otherSkill:"RUBY_OUTBURST"},autoUpgrade:{trait:"OUTBURST_MASTERY_II",otherSkill:"RUBY_CATASTROPHE"},basePotency:190,baseCastTime:2.8,baseRecastTime:3,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("FIRE_ATTUNEMENT"),falloff:0,startOnHotbar:!1});rt("TOPAZ_DISASTER",74,{autoDowngrade:{trait:"OUTBURST_MASTERY",otherSkill:"TOPAZ_OUTBURST"},autoUpgrade:{trait:"OUTBURST_MASTERY_II",otherSkill:"TOPAZ_CATASTROPHE"},basePotency:130,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("EARTH_ATTUNEMENT"),falloff:0,startOnHotbar:!1});rt("EMERALD_DISASTER",74,{autoDowngrade:{trait:"OUTBURST_MASTERY",otherSkill:"EMERALD_OUTBURST"},autoUpgrade:{trait:"OUTBURST_MASTERY_II",otherSkill:"EMERALD_CATASTROPHE"},baseRecastTime:1.5,basePotency:90,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("WIND_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("WIND_ATTUNEMENT"),falloff:0,startOnHotbar:!1});rt("RUBY_CATASTROPHE",82,{autoDowngrade:{trait:"OUTBURST_MASTERY_II",otherSkill:"RUBY_DISASTER"},basePotency:210,baseCastTime:2.8,baseRecastTime:3,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("FIRE_ATTUNEMENT"),falloff:0,startOnHotbar:!1});rt("TOPAZ_CATASTROPHE",82,{autoDowngrade:{trait:"OUTBURST_MASTERY_II",otherSkill:"TOPAZ_DISASTER"},basePotency:140,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT"),onConfirm:e=>{e.tryConsumeResource("EARTH_ATTUNEMENT"),e.gainStatus("TITANS_FAVOR")},falloff:0,startOnHotbar:!1});rt("EMERALD_CATASTROPHE",82,{autoDowngrade:{trait:"OUTBURST_MASTERY_II",otherSkill:"EMERALD_DISASTER"},baseRecastTime:1.5,basePotency:100,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("WIND_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("WIND_ATTUNEMENT"),falloff:0,startOnHotbar:!1});const jB=[{newSkill:"SUMMON_BAHAMUT",condition:e=>e.nextDemi===2},{newSkill:"SUMMON_PHOENIX",condition:e=>e.nextDemi===3},{newSkill:"SUMMON_SOLAR_BAHAMUT",condition:e=>e.nextDemi===1}],zB={cdName:"cd_DEMI_SUMMON",cooldown:60,maxCharges:1};[{name:"SUMMON_BAHAMUT",autoName:"WYRMWAVE",level:70,activeValue:2},{name:"SUMMON_PHOENIX",autoName:"SCARLET_FLAME",level:80,activeValue:3},{name:"SUMMON_SOLAR_BAHAMUT",autoName:"LUXWAVE",level:100,activeValue:1}].forEach((e,t)=>rt(e.name,e.level,{applicationDelay:.76,replaceIf:jB,secondaryCooldown:zB,validateAttempt:n=>!n.hasActivePet&&n.nextDemi===e.activeValue,drawsAggro:!0,onConfirm:(n,a)=>{n.gainStatus("ACTIVE_DEMI",e.activeValue),n.startPetAutos(a,e.autoName),["RUBY_ARCANUM","TOPAZ_ARCANUM","EMERALD_ARCANUM"].forEach(s=>n.gainStatus(s,1)),["FIRE_ATTUNEMENT","EARTH_ATTUNEMENT","WIND_ATTUNEMENT"].forEach(s=>n.tryConsumeResource(s,!0)),n.tryConsumeResource("IFRITS_FAVOR"),n.tryConsumeResource("CRIMSON_STRIKE_READY"),n.tryConsumeResource("GARUDAS_FAVOR"),n.tryConsumeResource("TITANS_FAVOR"),e.name==="SUMMON_SOLAR_BAHAMUT"&&n.gainStatus("REFULGENT_LUX"),n.addEvent(new xe("update next demi",WD,()=>{n.resources.get("NEXT_DEMI_CYCLE").gainWrapping(1)}))},onApplication:n=>{n.isInCombat()||n.resources.get("IN_COMBAT").gain(1)},startOnHotbar:t===0}));const lE=e=>!e.hasActivePet&&e.hasResourceAvailable("RUBY_ARCANUM"),sE=e=>!e.hasActivePet&&e.hasResourceAvailable("TOPAZ_ARCANUM"),rE=e=>!e.hasActivePet&&e.hasResourceAvailable("EMERALD_ARCANUM"),XD=e=>(t,n)=>{t.tryConsumeResource("RUBY_ARCANUM"),t.gainStatus("FIRE_ATTUNEMENT",2),t.queuePrimalSummon(n,e),t.tryConsumeResource("EARTH_ATTUNEMENT",!0),t.tryConsumeResource("WIND_ATTUNEMENT",!0),t.tryConsumeResource("TITANS_FAVOR"),t.tryConsumeResource("GARUDAS_FAVOR")},qD=e=>(t,n)=>{t.tryConsumeResource("TOPAZ_ARCANUM"),t.gainStatus("EARTH_ATTUNEMENT",4),t.queuePrimalSummon(n,e),t.tryConsumeResource("FIRE_ATTUNEMENT",!0),t.tryConsumeResource("WIND_ATTUNEMENT",!0),t.tryConsumeResource("IFRITS_FAVOR"),t.tryConsumeResource("CRIMSON_STRIKE_READY"),t.tryConsumeResource("GARUDAS_FAVOR")},ZD=e=>(t,n)=>{t.tryConsumeResource("EMERALD_ARCANUM"),t.gainStatus("WIND_ATTUNEMENT",4),t.queuePrimalSummon(n,e),t.tryConsumeResource("FIRE_ATTUNEMENT",!0),t.tryConsumeResource("EARTH_ATTUNEMENT",!0),t.tryConsumeResource("IFRITS_FAVOR"),t.tryConsumeResource("CRIMSON_STRIKE_READY"),t.tryConsumeResource("TITANS_FAVOR")},Fc=.5;rt("SUMMON_IFRIT",30,{autoUpgrade:{trait:"ENKINDLE_II",otherSkill:"SUMMON_IFRIT_II"},applicationDelay:0,highlightIf:lE,validateAttempt:lE,onConfirm:XD("SUMMON_IFRIT"),falloff:Fc,savesTargets:!0});rt("SUMMON_TITAN",35,{autoUpgrade:{trait:"ENKINDLE_II",otherSkill:"SUMMON_TITAN_II"},applicationDelay:0,highlightIf:sE,validateAttempt:sE,onConfirm:qD("SUMMON_TITAN"),falloff:Fc,savesTargets:!0});rt("SUMMON_GARUDA",45,{autoUpgrade:{trait:"ENKINDLE_II",otherSkill:"SUMMON_GARUDA_II"},applicationDelay:0,highlightIf:rE,validateAttempt:rE,onConfirm:ZD("SUMMON_GARUDA"),falloff:Fc,savesTargets:!0});rt("SUMMON_IFRIT_II",90,{autoDowngrade:{trait:"ENKINDLE_II",otherSkill:"SUMMON_IFRIT"},applicationDelay:0,highlightIf:lE,validateAttempt:lE,onConfirm:Pe(e=>e.gainStatus("IFRITS_FAVOR"),XD("SUMMON_IFRIT_II")),falloff:Fc,savesTargets:!0});rt("SUMMON_TITAN_II",90,{autoDowngrade:{trait:"ENKINDLE_II",otherSkill:"SUMMON_TITAN"},applicationDelay:0,highlightIf:sE,validateAttempt:sE,onConfirm:qD("SUMMON_TITAN_II"),falloff:Fc,savesTargets:!0});rt("SUMMON_GARUDA_II",90,{autoDowngrade:{trait:"ENKINDLE_II",otherSkill:"SUMMON_GARUDA"},applicationDelay:0,highlightIf:rE,validateAttempt:rE,onConfirm:Pe(e=>e.gainStatus("GARUDAS_FAVOR"),ZD("SUMMON_GARUDA_II")),falloff:Fc,savesTargets:!0});const Ci=[{newSkill:"DEATHFLARE",condition:e=>e.activeDemi===2},{newSkill:"REKINDLE",condition:e=>e.activeDemi===3},{newSkill:"SUNFLARE",condition:e=>e.activeDemi===1},{newSkill:"CRIMSON_CYCLONE",condition:e=>e.hasResourceAvailable("IFRITS_FAVOR")},{newSkill:"CRIMSON_STRIKE",condition:e=>e.hasResourceAvailable("CRIMSON_STRIKE_READY")},{newSkill:"MOUNTAIN_BUSTER",condition:e=>e.hasResourceAvailable("TITANS_FAVOR")},{newSkill:"SLIPSTREAM",condition:e=>e.hasResourceAvailable("GARUDAS_FAVOR")}];No("ASTRAL_FLOW",60,"cd_ASTRAL_FLOW",{applicationDelay:0,cooldown:20,replaceIf:Ci,validateAttempt:e=>!1});No("DEATHFLARE",60,"cd_ASTRAL_FLOW",{potency:500,applicationDelay:.8,cooldown:20,replaceIf:Ci,highlightIf:e=>!0,validateAttempt:Ci[0].condition,falloff:.5,startOnHotbar:!1});No("REKINDLE",80,"cd_ASTRAL_FLOW",{applicationDelay:1.03,cooldown:20,replaceIf:Ci,highlightIf:e=>!0,validateAttempt:Ci[1].condition,onConfirm:e=>e.gainStatus("REKINDLE"),startOnHotbar:!1});No("SUNFLARE",100,"cd_ASTRAL_FLOW",{potency:1e3,applicationDelay:.8,cooldown:20,replaceIf:Ci,highlightIf:e=>!0,validateAttempt:Ci[2].condition,falloff:.5,startOnHotbar:!1});rt("CRIMSON_CYCLONE",86,{basePotency:[["NEVER",430],["ARCANE_MASTERY",520]],applicationDelay:.8,replaceIf:Ci,highlightIf:e=>!0,validateAttempt:Ci[3].condition,onConfirm:e=>{e.tryConsumeResource("IFRITS_FAVOR"),e.gainStatus("CRIMSON_STRIKE_READY")},falloff:.6,startOnHotbar:!1});rt("CRIMSON_STRIKE",86,{basePotency:[["NEVER",430],["ARCANE_MASTERY",520]],applicationDelay:.76,replaceIf:Ci,highlightIf:e=>!0,validateAttempt:Ci[4].condition,onConfirm:e=>e.tryConsumeResource("CRIMSON_STRIKE_READY"),falloff:.6,startOnHotbar:!1});No("MOUNTAIN_BUSTER",86,"cd_MOUNTAIN_BUSTER",{potency:[["NEVER",150],["ARCANE_MASTERY",160]],cooldown:1,applicationDelay:.76,replaceIf:Ci,highlightIf:e=>!0,validateAttempt:Ci[5].condition,onConfirm:e=>e.tryConsumeResource("TITANS_FAVOR"),falloff:.6,startOnHotbar:!1});rt("SLIPSTREAM",86,{baseCastTime:3,baseRecastTime:3.5,basePotency:[["NEVER",430],["ARCANE_MASTERY",520]],applicationDelay:1.02,replaceIf:Ci,highlightIf:e=>!0,validateAttempt:Ci[6].condition,onConfirm:(e,t)=>{e.tryConsumeResource("GARUDAS_FAVOR"),e.addDoTPotencies({node:t,effectName:"SLIPSTREAM",skillName:"SLIPSTREAM",tickPotency:30,speedStat:"sps"})},onApplication:(e,t)=>e.applyDoT("SLIPSTREAM",t),falloff:.6,startOnHotbar:!1});const YB=[{newSkill:"ENKINDLE_BAHAMUT",condition:e=>[0,2].includes(e.activeDemi)},{newSkill:"ENKINDLE_PHOENIX",condition:e=>e.activeDemi===3},{newSkill:"ENKINDLE_SOLAR_BAHAMUT",condition:e=>e.activeDemi===1}];[{name:"ENKINDLE_BAHAMUT",level:70,activeValue:2,falloff:.5},{name:"ENKINDLE_PHOENIX",level:80,activeValue:3,falloff:.5},{name:"ENKINDLE_SOLAR_BAHAMUT",level:100,activeValue:1,falloff:.5}].forEach((e,t)=>No(e.name,e.level,"cd_ENKINDLE",{applicationDelay:0,cooldown:20,replaceIf:YB,validateAttempt:n=>n.activeDemi===e.activeValue,onConfirm:(n,a)=>n.queueEnkindle(a,e.name),startOnHotbar:t===0,savesTargets:!0,falloff:e.falloff}));rt("RUIN_IV",62,{basePotency:[["NEVER",430],["ARCANE_MASTERY",520]],manaCost:400,applicationDelay:.8,falloff:.6,highlightIf:e=>e.hasResourceAvailable("FURTHER_RUIN"),validateAttempt:e=>e.hasResourceAvailable("FURTHER_RUIN"),onConfirm:e=>e.tryConsumeResource("FURTHER_RUIN")});[{name:"ENERGY_DRAIN",level:10,potency:200,applicationDelay:1.07},{name:"ENERGY_SIPHON",level:52,potency:100,applicationDelay:1.02,falloff:0}].forEach(e=>No(e.name,e.level,"cd_ENERGY_DRAIN",{...e,cooldown:60,onConfirm:t=>{t.gainStatus("AETHERFLOW",2),t.gainStatus("FURTHER_RUIN")}}));[{name:"FESTER",level:10,potency:340,applicationDelay:.71,autoUpgrade:{trait:"ENHANCED_FESTER",otherSkill:"NECROTIZE"}},{name:"PAINFLARE",level:40,potency:150,applicationDelay:.44,falloff:0},{name:"NECROTIZE",level:92,potency:460,applicationDelay:.71,autoDowngrade:{trait:"ENHANCED_FESTER",otherSkill:"FESTER"}}].forEach(e=>No(e.name,e.level,"cd_AETHERFLOW",{...e,cooldown:1,validateAttempt:t=>t.hasResourceAvailable("AETHERFLOW"),onConfirm:t=>t.tryConsumeResource("AETHERFLOW")}));Ze("SMN","SEARING_LIGHT",66,"cd_SEARING_LIGHT",{rscType:"SEARING_LIGHT",applicationDelay:0,cooldown:120,onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_SEARING_LIGHT")&&e.gainStatus("RUBYS_GLIMMER")},replaceIf:[{newSkill:"SEARING_FLASH",condition:e=>e.hasResourceAvailable("RUBYS_GLIMMER")}]});No("SEARING_FLASH",96,"cd_SEARING_FLASH",{potency:700,applicationDelay:.8,cooldown:1,falloff:0,startOnHotbar:!1,highlightIf:e=>e.hasResourceAvailable("RUBYS_GLIMMER"),validateAttempt:e=>e.hasResourceAvailable("RUBYS_GLIMMER"),onConfirm:e=>e.tryConsumeResource("RUBYS_GLIMMER")});Ze("SMN","RADIANT_AEGIS",2,"cd_RADIANT_AEGIS",{rscType:"RADIANT_AEGIS",applicationDelay:.45,cooldown:60,maxCharges:2,validateAttempt:e=>!e.hasActivePet});No("LUX_SOLARIS",100,"cd_LUX_SOLARIS",{applicationDelay:.62,cooldown:60,highlightIf:e=>e.hasResourceAvailable("REFULGENT_LUX"),validateAttempt:e=>e.hasResourceAvailable("REFULGENT_LUX"),onConfirm:e=>e.tryConsumeResource("REFULGENT_LUX")});rt("RESURRECTION",12,{baseCastTime:8,manaCost:2400,applicationDelay:1.11,basePotency:0});Object.keys(kb).forEach(e=>qt(e,`SGE/${Ke[e].name}.png`));const KB=["EUKRASIAN_DOSIS","EUKRASIAN_DOSIS_II","EUKRASIAN_DOSIS_III","EUKRASIAN_DYSKRASIA"],VB=["EUKRASIAN_DIAGNOSIS","KRASIS","TAUROCHOLE","HAIMA","HAIMATINON","KARDION"],WB=["EUKRASIA","SOTERIA","ZOE","PHILOSOPHIA","KARDIA"],XB=["EUKRASIAN_PROGNOSIS","PANHAIMA","PANHAIMATINON","KERACHOLE","KERAKEIA","EUDAIMONIA","HOLOS","HOLOSAKOS"];class qB extends en{jobSpecificOtherTargetedBuffViewProps(){return[...KB,...VB].flatMap(t=>t==="KARDION"?[this.makeCommonTimerless(t,!1)]:this.makeTargetedTimers(t))}jobSpecificSelfTargetedBuffViewProps(){return[...XB,...WB].map(t=>t==="KARDIA"||t==="EUKRASIA"?this.makeCommonTimerless(t):this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){const n=this.state.resources.get("ADDERSGALL"),a=jt("SGE","ADDERSGALL").maxTimeout,s=n.availableAmount()<n.maxValue?this.state.resources.timeTillReady("ADDERSGALL"):a,c=this.state.resources.get("ADDERSTING");return[{kind:"counter",name:N({en:Ke.ADDERSGALL.name,zh:Ke.ADDERSGALL.label.zh}),color:t.sge.addersgall,currentStacks:n.availableAmount(),maxStacks:n.maxValue},{kind:"bar",name:N({en:Ke.ADDERSGALL.name+" timer",zh:Ke.ADDERSGALL.label.zh+""}),color:t.sge.addersgall,progress:1-s/a,valueString:s.toFixed(3)},{kind:"counter",name:N({en:Ke.ADDERSTING.name,zh:Ke.ADDERSTING.label.zh}),color:t.sge.addersting,currentStacks:c.availableAmount(),maxStacks:c.maxValue}]}}const kt=(e,t,n)=>{Je("SGE",e,t,n??{})};kt("ADDERSGALL",3,{default:3,timeout:20});kt("ADDERSTING",3,{default:3});kt("EUKRASIA",1);kt("KARDIA",1,{default:1});kt("KARDION",1,{default:1});kt("EUKRASIAN_DIAGNOSIS",1,{timeout:30});kt("DIFFERENTIAL_DIAGNOSIS",1,{timeout:30});kt("EUKRASIAN_PROGNOSIS",1,{timeout:30});kt("HAIMA",1,{timeout:15});kt("HAIMATINON",5,{timeout:15});kt("PANHAIMA",1,{timeout:15});kt("PANHAIMATINON",5,{timeout:15});kt("PHYSIS_II",1,{timeout:15});kt("AUTOPHYSIS",1,{timeout:15});kt("PHILOSOPHIA",1,{timeout:20});kt("EUDAIMONIA",1,{timeout:20});kt("HOLOS",1,{timeout:20});kt("HOLOSAKOS",1,{timeout:30});kt("SOTERIA",4,{timeout:15});kt("ZOE",1,{timeout:30});kt("KRASIS",1,{timeout:10});kt("KERACHOLE",1,{timeout:15});kt("KERAKEIA",1,{timeout:15});kt("TAUROCHOLE",1,{timeout:15});kt("EUKRASIAN_DOSIS",1,{timeout:30});kt("EUKRASIAN_DOSIS_II",1,{timeout:30});kt("EUKRASIAN_DOSIS_III",1,{timeout:30});kt("EUKRASIAN_DYSKRASIA",1,{timeout:30});class ZB extends tn{constructor(t){if(super(t),this.hasTraitUnlocked("ENHANCED_SWIFTCAST")||this.cooldowns.set(new ze("cd_SWIFTCAST",60,1,1)),!this.hasTraitUnlocked("ENHANCED_PHYSIS_II")){const n=Ao(this.job).get("AUTOPHYSIS");n.maxTimeout=10,Ao(this.job).set("AUTOPHYSIS",n)}this.hasTraitUnlocked("ENHANCED_SOTERIA")||this.cooldowns.set(new ze("cd_SOTERIA",90,1,1)),this.hasTraitUnlocked("ENHANCED_ZOE")||this.cooldowns.set(new ze("cd_ZOE",120,1,1)),this.registerRecurringEvents([{reportName:N({en:"Eukrasian DoT"}),groupedEffects:[{effectName:"EUKRASIAN_DOSIS",appliedBy:["EUKRASIAN_DOSIS"]},{effectName:"EUKRASIAN_DOSIS_II",appliedBy:["EUKRASIAN_DOSIS_II"]},{effectName:"EUKRASIAN_DOSIS_III",appliedBy:["EUKRASIAN_DOSIS_III"]},{effectName:"EUKRASIAN_DYSKRASIA",appliedBy:["EUKRASIAN_DYSKRASIA"]}]},{isHealing:!0,groupedEffects:[{effectName:"PHYSIS_II",appliedBy:["PHYSIS_II"]}]},{isHealing:!0,groupedEffects:[{effectName:"KERAKEIA",appliedBy:["KERACHOLE"]}]}])}get statusPropsGenerator(){return new qB(this)}jobSpecificRegisterRecurringEvents(){const t=n=>{const a=jt("SGE","ADDERSGALL");this.hasResourceAvailable("ADDERSGALL",a.maxValue)||this.resources.get("ADDERSGALL").gain(1),this.resources.addResourceEvent({rscType:"ADDERSGALL",name:"gain addersgall if not currently capped",delay:a.maxTimeout,fnOnRsc:t})};t(this.resources.get("ADDERSGALL"))}jobSpecificAddHealingBuffCovers(t,n){this.hasResourceAvailable("AUTOPHYSIS")&&t.addBuff(U.Autophysis),this.hasResourceAvailable("KRASIS")&&t.addBuff(U.Krasis),n.cdName==="cd_GCD"&&(this.hasResourceAvailable("ZOE")&&t.addBuff(U.Zoe),this.hasResourceAvailable("PHILOSOPHIA")&&t.addBuff(U.Philosophia))}consumeAddersgall(){const t=jt("SGE","ADDERSGALL");this.hasResourceAvailable("ADDERSGALL",t.maxValue)&&this.resources.get("ADDERSGALL").overrideTimer(this,t.maxTimeout),this.tryConsumeResource("ADDERSGALL"),this.resources.get("MANA").gain(700)}addPepsisPotency(t,n){const a=new sn({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:"PEPSIS",aspect:Ne.Other,basePotency:t==="EUKRASIAN_DIAGNOSIS"?450:350,description:Qe(t),healTargetCount:t==="EUKRASIAN_DIAGNOSIS"?1:this.partySize,snapshotTime:this.getDisplayTime()});if(this.hasResourceAvailable("TINCTURE")&&a.addModifiers($.Tincture),this.hasResourceAvailable("AUTOPHYSIS")&&a.addModifiers($.Autophysis),this.hasResourceAvailable("KRASIS")){if(t==="EUKRASIAN_PROGNOSIS"){const s=new sn({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:"PEPSIS",aspect:Ne.Other,basePotency:a.base,description:Qe(t),healTargetCount:a.targetCount-1,snapshotTime:this.getDisplayTime()});n.addHoTPotency(s,"PEPSIS"),a.healTargetCount=1,a.description+=", "+Qe("KRASIS")}a.addModifiers($.Krasis)}n.addHoTPotency(a,"PEPSIS")}addHaimaExpirationPotency(t,n){if(!(t==="HAIMA"||t==="PANHAIMA"))return;const a=new sn({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t==="HAIMA"?"HAIMA":"PANHAIMA",aspect:Ne.Other,basePotency:t==="HAIMA"?150:100,description:"",healTargetCount:t==="HAIMA"?1:this.partySize,snapshotTime:this.getDisplayTime()});if(this.hasResourceAvailable("TINCTURE")&&a.addModifiers($.Tincture),this.hasResourceAvailable("AUTOPHYSIS")&&a.addModifiers($.Autophysis),this.hasResourceAvailable("KRASIS")){if(t==="PANHAIMA"){const s=new sn({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:"PANHAIMA",aspect:Ne.Other,basePotency:100,description:"",healTargetCount:this.partySize-1,snapshotTime:this.getDisplayTime()});n.addHoTPotency(s,t),a.healTargetCount=1}a.addModifiers($.Krasis)}n.addHoTPotency(a,t)}handleHaimaExpiration(t,n){if(!(t==="HAIMA"||t==="PANHAIMA"))return;const a=t==="HAIMA"?"HAIMATINON":"PANHAIMATINON",s=this.resources.get(a).availableAmount();s<=0||this.addEvent(new xe(`${Ke[t].name} expiration heal`,.001,()=>{n.getHotPotencies(t).forEach(c=>{c.description=Qe(t)+" "+N({en:"expiration"})+" ("+s+" "+N({en:"stacks"})+")",t==="PANHAIMA"&&c.getDisplayedModifiers().includes($.Krasis)&&(c.description+=", "+Qe("KRASIS")),c.base*=s,p.resolveHealingPotency(c)})}))}addHealingMagicPotencyModifiers(t){this.hasResourceAvailable("ZOE")&&t.push($.Zoe),this.hasResourceAvailable("PHILOSOPHIA")&&t.push($.Philosophia)}addHealingActionPotencyModifiers(t){this.hasResourceAvailable("AUTOPHYSIS")&&t.push($.Autophysis),this.hasResourceAvailable("KRASIS")&&t.push($.Krasis)}}const mn=(e,t,n)=>{const a=f=>f.config.adjustedCastTime(1.5),s=f=>f.config.adjustedGCD(2.5),c=f=>{if(!n.healingPotency)return[];const h=[];return f.addHealingMagicPotencyModifiers(h),f.addHealingActionPotencyModifiers(h),h},d=Pe(f=>{n.castTime!==0&&f.tryConsumeResource("SWIFTCAST")},(f,h)=>{if(!(f.hasResourceAvailable("KARDIA")&&h.getInitialPotency()))return;const m=new sn({config:f.config,sourceTime:f.getDisplayTime(),sourceSkill:e,aspect:Ne.Other,basePotency:f.hasTraitUnlocked("ENHANCED_HEALING_MAGIC")?170:130,description:Qe("KARDIA"),healTargetCount:1,snapshotTime:f.getDisplayTime()});f.hasResourceAvailable("TINCTURE")&&m.addModifiers($.Tincture),f.hasResourceAvailable("SOTERIA")&&m.addModifiers($.Soteria),f.addHealingActionPotencyModifiers(m.getDisplayedModifiers()),h.addHoTPotency(m,"KARDION")},(f,h)=>{if(!f.hasResourceAvailable("EUDAIMONIA"))return;const m=new sn({config:f.config,sourceTime:f.getDisplayTime(),sourceSkill:e,aspect:Ne.Other,basePotency:150,description:Qe("EUDAIMONIA"),healTargetCount:f.partySize,snapshotTime:f.getDisplayTime()});f.hasResourceAvailable("TINCTURE")&&m.addModifiers($.Tincture),f.addHealingActionPotencyModifiers(m.getDisplayedModifiers()),h.addHoTPotency(m,"EUDAIMONIA")},f=>{n.healingPotency&&f.tryConsumeResource("ZOE")},n.onConfirm);return oa("SGE",e,t,{...n,castTime:n.castTime??a,recastTime:n.recastTime??s,isInstantFn:f=>f.hasResourceAvailable("SWIFTCAST"),jobHealingPotencyModifiers:c,onConfirm:d,onApplication:Pe((f,h)=>{const m=h.getHotPotencies("KARDION"),R=h.getHotPotencies("EUDAIMONIA");m.length>0&&(p.resolveHealingPotency(m[0]),f.tryConsumeResource("SOTERIA")),R.forEach(T=>{p.resolveHealingPotency(T)})},n.onApplication)})},Pn=(e,t,n,a)=>st("SGE",e,t,n,{...a,jobHealingPotencyModifiers:c=>{if(!a.healingPotency)return[];const d=[];return c.addHealingActionPotencyModifiers(d),d}}),rg=(e,t,n,a)=>Ze("SGE",e,t,n,a);mn("EUKRASIA",30,{castTime:0,recastTime:1,applicationDelay:0,validateAttempt:e=>!e.hasResourceAvailable("EUKRASIA"),onConfirm:e=>e.gainStatus("EUKRASIA")});mn("DOSIS",1,{replaceIf:[{condition:e=>e.hasResourceAvailable("EUKRASIA"),newSkill:"EUKRASIAN_DOSIS"}],autoUpgrade:{trait:"OFFENSIVE_MAGIC_MASTERY",otherSkill:"DOSIS_II"},manaCost:300,potency:300,applicationDelay:.67});mn("DOSIS_II",72,{startOnHotbar:!1,replaceIf:[{condition:e=>e.hasResourceAvailable("EUKRASIA"),newSkill:"EUKRASIAN_DOSIS_II"}],autoUpgrade:{trait:"OFFENSIVE_MAGIC_MASTERY_II",otherSkill:"DOSIS_III"},manaCost:400,potency:320,applicationDelay:.67});const cg=[["NEVER",330],["MAGICK_MASTERY_HEALER",380]];mn("DOSIS_III",82,{startOnHotbar:!1,replaceIf:[{condition:e=>e.hasResourceAvailable("EUKRASIA"),newSkill:"EUKRASIAN_DOSIS_III"}],manaCost:400,potency:cg,applicationDelay:.67});mn("EUKRASIAN_DOSIS",30,{startOnHotbar:!1,manaCost:400,castTime:0,recastTime:1.5,applicationDelay:.76,drawsAggro:!0,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"EUKRASIAN_DOSIS",skillName:"EUKRASIAN_DOSIS",tickPotency:40,speedStat:"sps"}),e.tryConsumeResource("EUKRASIA")},onApplication:(e,t)=>{e.applyDoT("EUKRASIAN_DOSIS",t)}});mn("EUKRASIAN_DOSIS_II",72,{startOnHotbar:!1,manaCost:400,castTime:0,recastTime:1.5,applicationDelay:.76,drawsAggro:!0,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"EUKRASIAN_DOSIS_II",skillName:"EUKRASIAN_DOSIS_II",tickPotency:60,speedStat:"sps"}),e.tryConsumeResource("EUKRASIA")},onApplication:(e,t)=>{e.applyDoT("EUKRASIAN_DOSIS_II",t)}});mn("EUKRASIAN_DOSIS_III",82,{startOnHotbar:!1,manaCost:400,castTime:0,recastTime:1.5,applicationDelay:.76,drawsAggro:!0,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"EUKRASIAN_DOSIS_III",skillName:"EUKRASIAN_DOSIS_III",tickPotency:85,speedStat:"sps"}),e.tryConsumeResource("EUKRASIA")},onApplication:(e,t)=>{e.applyDoT("EUKRASIAN_DOSIS_III",t)}});mn("TOXIKON",66,{autoUpgrade:{trait:"OFFENSIVE_MAGIC_MASTERY_II",otherSkill:"TOXIKON_II"},potency:[["NEVER",240],["OFFENSIVE_MAGIC_MASTERY",300]],falloff:.5,applicationDelay:1.2,castTime:0,validateAttempt:e=>e.hasResourceAvailable("ADDERSTING"),onConfirm:e=>e.tryConsumeResource("ADDERSTING")});mn("TOXIKON_II",82,{startOnHotbar:!1,potency:cg,falloff:.5,applicationDelay:1.2,castTime:0,validateAttempt:e=>e.hasResourceAvailable("ADDERSTING"),onConfirm:e=>e.tryConsumeResource("ADDERSTING")});mn("PHLEGMA",26,{autoUpgrade:{trait:"OFFENSIVE_MAGIC_MASTERY",otherSkill:"PHLEGMA_II"},potency:400,falloff:.5,applicationDelay:.67,manaCost:400,castTime:0,secondaryCooldown:{cdName:"cd_PHLEGMA",maxCharges:2,cooldown:40}});mn("PHLEGMA_II",72,{startOnHotbar:!1,autoUpgrade:{trait:"OFFENSIVE_MAGIC_MASTERY_II",otherSkill:"PHLEGMA_III"},potency:490,falloff:.5,applicationDelay:.67,manaCost:400,castTime:0,secondaryCooldown:{cdName:"cd_PHLEGMA",maxCharges:2,cooldown:40}});mn("PHLEGMA_III",82,{startOnHotbar:!1,potency:600,falloff:.5,applicationDelay:.67,manaCost:400,castTime:0,secondaryCooldown:{cdName:"cd_PHLEGMA",maxCharges:2,cooldown:40}});Pn("PSYCHE",92,"cd_PSYCHE",{potency:600,falloff:.5,applicationDelay:2.1,cooldown:60});mn("DYSKRASIA",46,{autoUpgrade:{trait:"OFFENSIVE_MAGIC_MASTERY_II",otherSkill:"DYSKRASIA_II"},potency:160,falloff:0,applicationDelay:.76,manaCost:400,castTime:0});mn("DYSKRASIA_II",82,{startOnHotbar:!1,replaceIf:[{condition:e=>e.hasResourceAvailable("EUKRASIA"),newSkill:"EUKRASIAN_DYSKRASIA"}],potency:170,falloff:0,applicationDelay:.76,manaCost:400,castTime:0});mn("EUKRASIAN_DYSKRASIA",82,{startOnHotbar:!1,falloff:0,applicationDelay:1.03,castTime:0,recastTime:1.5,drawsAggro:!0,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"EUKRASIAN_DYSKRASIA",skillName:"EUKRASIAN_DYSKRASIA",tickPotency:40,speedStat:"sps"}),e.tryConsumeResource("EUKRASIA")},onApplication:(e,t)=>{e.applyDoT("EUKRASIAN_DYSKRASIA",t)}});mn("DIAGNOSIS",2,{healingPotency:[["NEVER",400],["ENHANCED_HEALING_MAGIC",450]],applicationDelay:.58,replaceIf:[{condition:e=>e.hasResourceAvailable("EUKRASIA"),newSkill:"EUKRASIAN_DIAGNOSIS"}],manaCost:400});mn("EUKRASIAN_DIAGNOSIS",30,{startOnHotbar:!1,healingPotency:300,applicationDelay:.67,castTime:0,recastTime:1.5,manaCost:800,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:e=>e.tryConsumeResource("EUKRASIA"),onApplication:e=>e.gainStatus("EUKRASIAN_DIAGNOSIS")});Pn("EUKRASIAN_DIAGNOSIS_POP",30,"cd_DIAGNOSIS_POP",{animationLock:si,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("EUKRASIAN_DIAGNOSIS"),onConfirm:e=>{e.tryConsumeResource("EUKRASIAN_DIAGNOSIS"),e.resources.get("ADDERSTING").gain(1)},highlightIf:e=>e.hasResourceAvailable("EUKRASIAN_DIAGNOSIS")});mn("PROGNOSIS",10,{healingPotency:300,aoeHeal:!0,applicationDelay:.58,replaceIf:[{condition:e=>e.hasResourceAvailable("EUKRASIA")&&e.hasTraitUnlocked("EUKRASIAN_PROGNOSIS_MASTERY"),newSkill:"EUKRASIAN_PROGNOSIS_II"},{condition:e=>e.hasResourceAvailable("EUKRASIA")&&!e.hasTraitUnlocked("EUKRASIAN_PROGNOSIS_MASTERY"),newSkill:"EUKRASIAN_PROGNOSIS"}],manaCost:700,castTime:e=>e.config.adjustedCastTime(2)});mn("EUKRASIAN_PROGNOSIS",30,{startOnHotbar:!1,autoUpgrade:{trait:"EUKRASIAN_PROGNOSIS_MASTERY",otherSkill:"EUKRASIAN_PROGNOSIS_II"},healingPotency:100,aoeHeal:!0,applicationDelay:.94,castTime:0,recastTime:1.5,manaCost:800,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:e=>e.tryConsumeResource("EUKRASIA"),onApplication:e=>e.gainStatus("EUKRASIAN_PROGNOSIS")});mn("EUKRASIAN_PROGNOSIS_II",96,{startOnHotbar:!1,healingPotency:100,aoeHeal:!0,applicationDelay:.94,castTime:0,recastTime:1.5,manaCost:800,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:e=>e.tryConsumeResource("EUKRASIA"),onApplication:e=>e.gainStatus("EUKRASIAN_PROGNOSIS")});Pn("EUKRASIAN_PROGNOSIS_POP",30,"cd_PROGNOSIS_POP",{autoUpgrade:{trait:"EUKRASIAN_PROGNOSIS_MASTERY",otherSkill:"EUKRASIAN_PROGNOSIS_II_POP"},animationLock:si,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("EUKRASIAN_PROGNOSIS"),onConfirm:e=>{e.tryConsumeResource("EUKRASIAN_PROGNOSIS"),e.resources.get("ADDERSTING").gain(1)},highlightIf:e=>e.hasResourceAvailable("EUKRASIAN_PROGNOSIS")});Pn("EUKRASIAN_PROGNOSIS_II_POP",30,"cd_PROGNOSIS_POP",{startOnHotbar:!1,animationLock:si,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("EUKRASIAN_PROGNOSIS"),onConfirm:e=>{e.tryConsumeResource("EUKRASIAN_PROGNOSIS"),e.resources.get("ADDERSTING").gain(1)},highlightIf:e=>e.hasResourceAvailable("EUKRASIAN_PROGNOSIS")});mn("PNEUMA",90,{potency:cg,falloff:.4,healingPotency:600,aoeHeal:!0,applicationDelay:.58,manaCost:700,secondaryCooldown:{cdName:"cd_PNEUMA",maxCharges:1,cooldown:120}});rg("ZOE",56,"cd_ZOE",{rscType:"ZOE",applicationDelay:0,cooldown:90});Pn("PEPSIS",58,"cd_PEPSIS",{cooldown:30,applicationDelay:1.16,onConfirm:(e,t)=>{e.hasResourceAvailable("EUKRASIAN_DIAGNOSIS")&&(e.addPepsisPotency("EUKRASIAN_DIAGNOSIS",t),e.tryConsumeResource("EUKRASIAN_DIAGNOSIS")),e.hasResourceAvailable("EUKRASIAN_PROGNOSIS")&&(e.addPepsisPotency("EUKRASIAN_PROGNOSIS",t),e.tryConsumeResource("EUKRASIAN_PROGNOSIS"))},onApplication:(e,t)=>{t.getHotPotencies("PEPSIS").forEach(n=>{p.resolveHealingPotency(n)})}});rg("SOTERIA",35,"cd_SOTERIA",{rscType:"SOTERIA",applicationDelay:.8,cooldown:60});rg("KRASIS",86,"cd_KRASIS",{rscType:"KRASIS",applicationDelay:.76,cooldown:60});Pn("HAIMA",70,"cd_HAIMA",{replaceIf:[{condition:e=>e.hasResourceAvailable("HAIMA"),newSkill:"HAIMA_POP"}],applicationDelay:.76,cooldown:120,onConfirm:(e,t)=>e.addHaimaExpirationPotency("HAIMA",t),onApplication:(e,t)=>{const n=jt("SGE","HAIMATINON").maxValue;e.gainStatus("HAIMA"),e.gainStatus("HAIMATINON",n),e.addEvent(new xe("Haima Expiration heal Check",jt("SGE","HAIMA").maxTimeout-.001,()=>e.handleHaimaExpiration("HAIMA",t)))}});Pn("HAIMA_POP",70,"cd_HAIMA_POP",{startOnHotbar:!1,animationLock:si,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("HAIMA"),highlightIf:e=>e.hasResourceAvailable("HAIMA"),onConfirm:e=>{e.hasResourceAvailable("HAIMATINON")?e.tryConsumeResource("HAIMATINON"):e.tryConsumeResource("HAIMA")}});Pn("PHYSIS_II",60,"cd_PHYSIS",{aoeHeal:!0,applicationDelay:.85,cooldown:60,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"PHYSIS_II",effectName:"PHYSIS_II",speedStat:"sps",tickPotency:130})},onApplication:(e,t)=>{e.applyHoT("PHYSIS_II",t),e.gainStatus("AUTOPHYSIS")}});Pn("PHILOSOPHIA",100,"cd_PHILOSOPHIA",{applicationDelay:1.83,cooldown:180,onApplication:e=>{e.gainStatus("PHILOSOPHIA"),e.gainStatus("EUDAIMONIA")}});Pn("HOLOS",76,"cd_HOLOS",{applicationDelay:.62,cooldown:120,onApplication:e=>{e.gainStatus("HOLOS"),e.gainStatus("HOLOSAKOS")}});Pn("PANHAIMA",80,"cd_PANHAIMA",{replaceIf:[{condition:e=>e.hasResourceAvailable("PANHAIMA"),newSkill:"PANHAIMA_POP"}],applicationDelay:.62,cooldown:120,onConfirm:(e,t)=>e.addHaimaExpirationPotency("PANHAIMA",t),onApplication:(e,t)=>{const n=jt("SGE","PANHAIMATINON").maxValue;e.gainStatus("PANHAIMA"),e.gainStatus("PANHAIMATINON",n),e.addEvent(new xe("Panhaima Expiration heal Check",jt("SGE","PANHAIMA").maxTimeout-.001,()=>e.handleHaimaExpiration("PANHAIMA",t)))}});Pn("PANHAIMA_POP",80,"cd_PANHAIMA_POP",{startOnHotbar:!1,animationLock:si,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("PANHAIMA"),highlightIf:e=>e.hasResourceAvailable("PANHAIMA"),onConfirm:e=>{e.hasResourceAvailable("PANHAIMATINON")?e.tryConsumeResource("PANHAIMATINON"):e.tryConsumeResource("PANHAIMA")}});Pn("RHIZOMATA",74,"cd_RHIZOMATA",{cooldown:90,onConfirm:e=>e.resources.get("ADDERSGALL").gain(1)});Pn("DRUOCHOLE",45,"cd_DRUOCHOLE",{cooldown:1,healingPotency:600,applicationDelay:.78,validateAttempt:e=>e.hasResourceAvailable("ADDERSGALL"),onConfirm:e=>e.consumeAddersgall()});Pn("IXOCHOLE",52,"cd_IXOCHOLE",{cooldown:30,healingPotency:400,aoeHeal:!0,applicationDelay:.756,validateAttempt:e=>e.hasResourceAvailable("ADDERSGALL"),onConfirm:e=>e.consumeAddersgall()});Pn("TAUROCHOLE",62,"cd_TAUROCHOLE",{cooldown:45,applicationDelay:.67,onConfirm:e=>e.consumeAddersgall(),onApplication:e=>e.gainStatus("TAUROCHOLE")});Pn("KERACHOLE",50,"cd_KERACHOLE",{cooldown:30,aoeHeal:!0,applicationDelay:.81,validateAttempt:e=>e.hasResourceAvailable("ADDERSGALL"),onConfirm:(e,t)=>{e.consumeAddersgall(),e.addHoTPotencies({node:t,skillName:"KERACHOLE",effectName:"KERAKEIA",speedStat:"sps",tickPotency:100})},onApplication:(e,t)=>{e.gainStatus("KERACHOLE"),e.hasTraitUnlocked("ENHANCED_KERACHOLE")&&e.applyHoT("KERAKEIA",t)}});mn("EGEIRO",12,{applicationDelay:.58,manaCost:2400,castTime:8});Pn("KARDIA",4,"cd_KARDIA",{applicationDelay:.62,cooldown:5,onApplication:e=>{e.gainStatus("KARDIA"),e.gainStatus("KARDION")}});Pn("ICARUS",40,"cd_ICARUS",{cooldown:45,animationLock:Jt});Object.keys(gS).forEach(e=>qt(e,`WAR/${Ke[e].name}.png`));class $B extends en{jobSpecificSelfTargetedBuffViewProps(){return Object.keys(gS).map(t=>this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){var h,m;const n=this.state.resources,a=n.get("BEAST_GAUGE").availableAmount(),s=n.get("STORM_COMBO"),c=n.get("TEMPEST_COMBO"),d=s.available(1)?(h=s.pendingChange)==null?void 0:h.timeTillEvent:c.available(1)?(m=c.pendingChange)==null?void 0:m.timeTillEvent:void 0;return[{kind:"text",name:N({en:"Combo Timer",zh:""}),text:(d==null?void 0:d.toFixed(3))??"N/A"},{kind:"bar",name:N({en:"Beast Gauge",zh:""}),color:t.war.beastGauge,progress:a/100,valueString:a.toFixed(0)}]}}const Vt=(e,t,n)=>{Je("WAR",e,t,n??{})};Vt("BEAST_GAUGE",100,{warnOnOvercap:!0});const ug=.74,$D=1.16;Vt("SURGING_TEMPEST",1,{timeout:60});Vt("NASCENT_CHAOS",1,{timeout:30});Vt("INNER_RELEASE",3,{timeout:15+ug});Vt("INNER_STRENGTH",1,{timeout:15+ug});Vt("BURGEONING_FURY",3,{timeout:30});Vt("WRATHFUL",1,{timeout:30});Vt("PRIMAL_REND_READY",1,{timeout:30+ug,warnOnTimeout:!0});Vt("PRIMAL_RUINATION_READY",1,{timeout:20+$D,warnOnTimeout:!0});Vt("THRILL_OF_BATTLE",1,{timeout:10});Vt("EQUILIBRIUM",1,{timeout:15});Vt("RAW_INTUITION",1,{timeout:6});Vt("BLOODWHETTING",1,{timeout:8});Vt("STEM_THE_FLOW",1,{timeout:4});Vt("STEM_THE_TIDE",1,{timeout:20});Vt("NASCENT_FLASH",1,{timeout:8});Vt("VENGEANCE",1,{timeout:15});Vt("DAMNATION",1,{timeout:15});Vt("PRIMEVAL_IMPULSE",1,{timeout:15});Vt("SHAKE_IT_OFF",1,{timeout:30});Vt("SHAKE_IT_OFF_OVER_TIME",1,{timeout:15});Vt("HOLMGANG",1,{timeout:10});Vt("DEFIANCE",1);Vt("STORM_COMBO",2,{timeout:30});Vt("TEMPEST_COMBO",1,{timeout:30});const QB=["HEAVY_SWING","MAIM","STORMS_EYE","STORMS_PATH"],QD=["OVERPOWER","MYTHRIL_TEMPEST"],JB=[...QB,...QD],eb=["FELL_CLEAVE","DECIMATE"],eF=["THRILL_OF_BATTLE","DAMNATION","BLOODWHETTING","VENGEANCE","RAW_INTUITION"];class tF extends tn{constructor(t){super(t),this.hasTraitUnlocked("ENHANCED_ONSLAUGHT")&&this.cooldowns.set(new ze("cd_ONSLAUGHT",30,3,3)),this.registerRecurringEvents()}get statusPropsGenerator(){return new $B(this)}processComboStatus(t){if(!JB.includes(t))return;const n=QD.includes(t),a=n?"TEMPEST_COMBO":"STORM_COMBO",s=n?"STORM_COMBO":"TEMPEST_COMBO";this.setComboState(s,0);const c=this.resources.get(a).availableAmount();let d=0;n?t==="OVERPOWER"&&(d=1):t==="HEAVY_SWING"?d=1:c===1&&t==="MAIM"&&(d=2),this.setComboState(a,d)}hasComboStatus(t,n){return this.hasResourceExactly(t,n)}gainBeastGauge(t){this.resources.get("BEAST_GAUGE").gain(t)}gainProc(t,n){const a=jt("WAR",t).maxTimeout;this.hasResourceAvailable(t)?(t==="BURGEONING_FURY"&&this.resources.get(t).gain(1),this.resources.get(t).overrideTimer(this,a)):(this.resources.get(t).gain(n??1),a&&this.enqueueResourceDrop(t,a))}gainSurgingTempest(t){var c;const n=this.resources.get("SURGING_TEMPEST"),a=jt("WAR","SURGING_TEMPEST").maxTimeout,s=(((c=n.pendingChange)==null?void 0:c.timeTillEvent)??0)+t;n.overrideTimer(this,s>=a?a:s)}gainSurgingTempestGCD(t,n,a){this.hasResourceAvailable("SURGING_TEMPEST")?this.addEvent(new xe("surging tempest refresh",n,()=>{this.hasResourceAvailable("SURGING_TEMPEST")?this.gainSurgingTempest(t):(this.resources.get("SURGING_TEMPEST").gain(1),this.enqueueResourceDrop("SURGING_TEMPEST",t))})):(this.resources.get("SURGING_TEMPEST").gain(1),this.enqueueResourceDrop("SURGING_TEMPEST",t+a))}}const ra=(e,t,n)=>{const a=Pe(n.onConfirm,c=>c.processComboStatus(e),c=>{eb.includes(e)&&c.tryConsumeResource("INNER_RELEASE")&&c.hasTraitUnlocked("ENHANCED_INNER_RELEASE")&&(c.gainProc("BURGEONING_FURY"),c.hasResourceAvailable("BURGEONING_FURY",3)&&(c.gainProc("WRATHFUL"),c.tryConsumeResource("BURGEONING_FURY",!0)))}),s=n.jobPotencyModifiers??(c=>[]);return un("WAR",e,t,{...n,onConfirm:a,recastTime:c=>c.config.adjustedSksGCD(),jobPotencyModifiers:c=>{const d=s(c);return c.hasResourceAvailable("SURGING_TEMPEST")&&d.push($.SurgingTempest),c.hasResourceAvailable("INNER_RELEASE")&&eb.includes(e)&&d.push($.AutoCDH),d}})},ar=(e,t,n,a)=>st("WAR",e,t,n,{...a,jobPotencyModifiers:s=>{const c=[];return s.hasResourceAvailable("SURGING_TEMPEST")&&c.push($.SurgingTempest),c}});ra("TOMAHAWK",15,{potency:150,applicationDelay:.71,startsAuto:!1});ra("HEAVY_SWING",1,{potency:[["NEVER",150],["MELEE_MASTERY_TANK",200],["MELEE_MASTERY_II_TANK",240]],applicationDelay:.53});ra("MAIM",4,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",150],["MELEE_MASTERY_II_TANK",190]],combo:{potency:[["NEVER",250],["MELEE_MASTERY_TANK",300],["MELEE_MASTERY_II_TANK",340]],resource:"STORM_COMBO",resourceValue:1},applicationDelay:.62,onConfirm:e=>{e.hasComboStatus("STORM_COMBO",1)&&e.gainBeastGauge(10)},highlightIf:e=>e.hasComboStatus("STORM_COMBO",1)});ra("STORMS_PATH",26,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",160],["MELEE_MASTERY_II_TANK",220]],combo:{potency:[["NEVER",380],["MELEE_MASTERY_TANK",440],["MELEE_MASTERY_II_TANK",500]],resource:"STORM_COMBO",resourceValue:2},applicationDelay:1.52,onConfirm:e=>{e.hasComboStatus("STORM_COMBO",2)&&e.gainBeastGauge(20)},highlightIf:e=>e.hasComboStatus("STORM_COMBO",2)});ra("STORMS_EYE",50,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",160],["MELEE_MASTERY_II_TANK",220]],combo:{potency:[["NEVER",380],["MELEE_MASTERY_TANK",440],["MELEE_MASTERY_II_TANK",500]],resource:"STORM_COMBO",resourceValue:2},applicationDelay:1.65,onConfirm:e=>{e.hasComboStatus("STORM_COMBO",2)&&(e.gainBeastGauge(10),e.gainSurgingTempestGCD(30,1.65,1.7))},highlightIf:e=>e.hasComboStatus("STORM_COMBO",2)});ra("OVERPOWER",10,{potency:110,falloff:0,applicationDelay:.62});ra("MYTHRIL_TEMPEST",40,{potency:100,combo:{potency:140,resource:"TEMPEST_COMBO",resourceValue:1},falloff:0,applicationDelay:.49,onConfirm:e=>{e.hasComboStatus("TEMPEST_COMBO",1)&&(e.gainBeastGauge(20),e.gainSurgingTempestGCD(30,.49,.45))},highlightIf:e=>e.hasComboStatus("TEMPEST_COMBO",1)});function KE(e){e.cooldowns.get("cd_INFURIATE").restore(5)}ra("FELL_CLEAVE",54,{potency:[["NEVER",520],["MELEE_MASTERY_II_TANK",580]],applicationDelay:.62,validateAttempt:e=>e.resources.get("BEAST_GAUGE").available(50)||e.resources.get("INNER_RELEASE").available(1),onConfirm:e=>{e.hasResourceAvailable("INNER_RELEASE")||e.resources.get("BEAST_GAUGE").consume(50),KE(e)},replaceIf:[{newSkill:"INNER_CHAOS",condition:e=>e.hasResourceAvailable("NASCENT_CHAOS")}],highlightIf:e=>e.hasResourceAvailable("BEAST_GAUGE",50)||e.hasResourceAvailable("INNER_RELEASE")});ra("DECIMATE",60,{potency:180,falloff:0,applicationDelay:1.83,validateAttempt:e=>e.hasResourceAvailable("BEAST_GAUGE",50)||e.hasResourceAvailable("INNER_RELEASE"),onConfirm:e=>{e.hasResourceAvailable("INNER_RELEASE")||e.resources.get("BEAST_GAUGE").consume(50),KE(e)},highlightIf:e=>e.hasResourceAvailable("BEAST_GAUGE",50)||e.hasResourceAvailable("INNER_RELEASE"),replaceIf:[{newSkill:"CHAOTIC_CYCLONE",condition:e=>e.hasResourceAvailable("NASCENT_CHAOS")}]});ar("INNER_RELEASE",70,"cd_INNER_RELEASE",{applicationDelay:0,cooldown:60,maxCharges:1,onConfirm:e=>{e.gainProc("INNER_RELEASE",3),e.gainProc("INNER_STRENGTH"),e.hasResourceAvailable("SURGING_TEMPEST")&&e.gainSurgingTempest(10),e.config.level>=ot.lvl90&&e.gainProc("PRIMAL_REND_READY")},replaceIf:[{newSkill:"PRIMAL_WRATH",condition:e=>e.hasResourceAvailable("WRATHFUL")}]});ra("PRIMAL_REND",90,{potency:700,applicationDelay:$D,falloff:.5,animationLock:1.2,validateAttempt:e=>e.hasResourceAvailable("PRIMAL_REND_READY"),onConfirm:e=>{e.tryConsumeResource("PRIMAL_REND_READY"),e.hasTraitUnlocked("ENHANCED_PRIMAL_REND")&&e.gainProc("PRIMAL_RUINATION_READY")},highlightIf:e=>e.hasResourceAvailable("PRIMAL_REND_READY"),replaceIf:[{newSkill:"PRIMAL_RUINATION",condition:e=>e.hasResourceAvailable("PRIMAL_RUINATION_READY")}],jobPotencyModifiers:e=>[$.AutoCDH]});ar("PRIMAL_WRATH",96,"cd_PRIMAL_WRATH",{startOnHotbar:!1,potency:700,falloff:.5,applicationDelay:1.15,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("WRATHFUL"),onConfirm:e=>e.tryConsumeResource("WRATHFUL"),highlightIf:e=>!0});ra("PRIMAL_RUINATION",100,{startOnHotbar:!1,potency:780,falloff:.5,applicationDelay:1.06,validateAttempt:e=>e.hasResourceAvailable("PRIMAL_RUINATION_READY"),onConfirm:e=>{e.tryConsumeResource("PRIMAL_RUINATION_READY")},highlightIf:e=>!0,jobPotencyModifiers:e=>[$.AutoCDH]});ar("INFURIATE",50,"cd_INFURIATE",{applicationDelay:0,requiresCombat:!0,cooldown:60,maxCharges:2,onApplication:e=>{e.gainBeastGauge(50),e.hasTraitUnlocked("NASCENT_CHAOS")&&e.gainProc("NASCENT_CHAOS")}});ra("INNER_CHAOS",80,{startOnHotbar:!1,potency:660,applicationDelay:.94,validateAttempt:e=>e.hasResourceAvailable("BEAST_GAUGE",50)&&e.hasResourceAvailable("NASCENT_CHAOS"),onConfirm:e=>{e.tryConsumeResource("NASCENT_CHAOS"),e.resources.get("BEAST_GAUGE").consume(50),KE(e)},highlightIf:e=>e.hasResourceAvailable("BEAST_GAUGE",50),jobPotencyModifiers:e=>[$.AutoCDH]});ra("CHAOTIC_CYCLONE",72,{startOnHotbar:!1,potency:200,falloff:0,applicationDelay:1.43,validateAttempt:e=>e.hasResourceAvailable("BEAST_GAUGE",50)&&e.hasResourceAvailable("NASCENT_CHAOS"),onConfirm:e=>{e.tryConsumeResource("NASCENT_CHAOS"),e.resources.get("BEAST_GAUGE").consume(50),KE(e)},highlightIf:e=>e.hasResourceAvailable("BEAST_GAUGE",50),jobPotencyModifiers:e=>[$.AutoCDH]});ar("ONSLAUGHT",62,"cd_ONSLAUGHT",{potency:150,applicationDelay:.63,cooldown:30,maxCharges:2,animationLock:Jt});ar("UPHEAVAL",64,"cd_UPHEAVAL",{potency:420,applicationDelay:.62,cooldown:30});ar("OROGENY",86,"cd_UPHEAVAL",{potency:150,falloff:0,applicationDelay:.62,cooldown:30});Ze("WAR","VENGEANCE",38,"cd_VENGEANCE",{rscType:"VENGEANCE",autoUpgrade:{trait:"VENGEANCE_MASTERY",otherSkill:"DAMNATION"},cooldown:120,applicationDelay:.62});Ze("WAR","DAMNATION",92,"cd_VENGEANCE",{rscType:"DAMNATION",autoDowngrade:{trait:"VENGEANCE_MASTERY",otherSkill:"VENGEANCE"},cooldown:120,applicationDelay:.62});ar("RETALIATION",38,"cd_RETALIATION",{highlightIf:e=>e.hasResourceAvailable("VENGEANCE")||e.hasResourceAvailable("DAMNATION"),validateAttempt:e=>e.hasResourceAvailable("VENGEANCE")||e.hasResourceAvailable("DAMNATION"),potency:55,applicationDelay:.534,animationLock:si,cooldown:si,startsAuto:!1});Ze("WAR","RAW_INTUITION",56,"cd_RAW_INTUITION",{rscType:"RAW_INTUITION",autoUpgrade:{trait:"RAW_INTUITION_MASTERY",otherSkill:"BLOODWHETTING"},cooldown:25,applicationDelay:.45});Ze("WAR","BLOODWHETTING",82,"cd_RAW_INTUITION",{rscType:"BLOODWHETTING",autoDowngrade:{trait:"RAW_INTUITION_MASTERY",otherSkill:"RAW_INTUITION"},onApplication:e=>{e.gainProc("STEM_THE_FLOW"),e.gainProc("STEM_THE_TIDE")},cooldown:25,applicationDelay:.45});st("WAR","NASCENT_FLASH",76,"cd_RAW_INTUITION",{onApplication:e=>{let t=6;e.hasTraitUnlocked("ENHANCED_NASCENT_FLASH")&&(t=8),e.resources.get("NASCENT_FLASH").gain(1),e.enqueueResourceDrop("NASCENT_FLASH",t)},cooldown:25,applicationDelay:.45});Ze("WAR","HOLMGANG",45,"cd_HOLMGANG",{rscType:"HOLMGANG",cooldown:240,applicationDelay:.45});Ze("WAR","THRILL_OF_BATTLE",30,"cd_THRILL_OF_BATTLE",{rscType:"THRILL_OF_BATTLE",cooldown:90,applicationDelay:.62});st("WAR","EQUILIBRIUM",58,"cd_EQUILIBRIUM",{cooldown:60,applicationDelay:.62,onApplication:e=>{e.hasTraitUnlocked("ENHANCED_EQUILIBRIUM")&&e.gainProc("EQUILIBRIUM")}});Ze("WAR","SHAKE_IT_OFF",68,"cd_SHAKE_IT_OFF",{rscType:"SHAKE_IT_OFF",cooldown:90,onApplication:(e,t)=>{let n=0;eF.forEach(a=>{e.tryConsumeResource(a)&&(n+=1)}),console.debug(`Shake It Off dispelled ${n} buffs`),e.gainProc("SHAKE_IT_OFF_OVER_TIME")},applicationDelay:0});st("WAR","DEFIANCE",10,"cd_DEFIANCE",{cooldown:2,maxCharges:1,applicationDelay:0,validateAttempt:e=>!e.hasResourceAvailable("DEFIANCE"),onConfirm:e=>e.resources.get("DEFIANCE").gain(1),replaceIf:[{newSkill:"RELEASE_DEFIANCE",condition:e=>e.hasResourceAvailable("DEFIANCE")}],secondaryCooldown:{cdName:"cd_RELEASE_DEFIANCE",cooldown:1,maxCharges:1}});st("WAR","RELEASE_DEFIANCE",10,"cd_RELEASE_DEFIANCE",{startOnHotbar:!1,cooldown:1,maxCharges:1,secondaryCooldown:{cdName:"cd_DEFIANCE",cooldown:2,maxCharges:1},applicationDelay:0,validateAttempt:e=>e.hasResourceAvailable("DEFIANCE"),onConfirm:e=>e.tryConsumeResource("DEFIANCE")});const JD=["CIRCLE_OF_SCORN_DOT"],nF=Object.keys(hS).filter(e=>!JD.includes(e));Object.keys(hS).forEach(e=>qt(e,`PLD/${Ke[e].name}.png`));class iF extends en{jobSpecificOtherTargetedBuffViewProps(){return[...JD.flatMap(t=>this.makeTargetedTimers(t))]}jobSpecificSelfTargetedBuffViewProps(){return nF.map(t=>this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){var T,S;const n=this.state.resources,a=n.get("PLD_COMBO_TRACKER"),s=n.get("PLD_AOE_COMBO_TRACKER"),c=n.get("OATH_GAUGE").availableAmount(),d=n.get("IRON_WILL").availableAmount(),f=a.available(1)?(T=a.pendingChange)==null?void 0:T.timeTillEvent:s.available(1)?(S=s.pendingChange)==null?void 0:S.timeTillEvent:void 0,h=this.state.findAutoAttackTimerInQueue();let m="";return this.state.hasResourceAvailable("STORED_AUTO")?m="stored":m=h!==-1?h.toFixed(3):"N/A",[{kind:"bar",name:N({en:"Auto Tracker"}),color:t.pld.ironWillColor,progress:h!==-1?(3-h)/3:0,valueString:m},{kind:"bar",name:N({en:"Combo Timer",zh:""}),color:t.pld.pldComboTimer,progress:f?f/30:0,valueString:(f==null?void 0:f.toFixed(3))??"N/A"},{kind:"counter",name:N({en:"Iron Will",zh:""}),color:t.pld.ironWillColor,currentStacks:d,maxStacks:1},{kind:"bar",name:N({en:"Oath Gauge",zh:""}),color:t.pld.oathGaugeColor,progress:c/100,valueString:c.toFixed(0)}]}}const vt=(e,t,n)=>{Je("PLD",e,t,n??{})};vt("FIGHT_OR_FLIGHT",1,{timeout:20});vt("IRON_WILL",1);vt("OATH_GAUGE",100);vt("SHELTRON",1,{timeout:6});vt("SENTINEL",1,{timeout:15});vt("CIRCLE_OF_SCORN_DOT",1,{timeout:15});vt("HALLOWED_GROUND",1,{timeout:10});vt("BULWARK",1,{timeout:10});vt("GORING_BLADE_READY",1,{timeout:30});vt("DIVINE_VEIL",1,{timeout:30});vt("ATONEMENT_READY",1,{timeout:30,warnOnTimeout:!0});vt("DIVINE_MIGHT",1,{timeout:30,warnOnTimeout:!0});vt("KNIGHTS_RESOLVE",1,{timeout:4});vt("KNIGHTS_BENEDICTION",1,{timeout:12});vt("REQUIESCAT",4,{timeout:30,warnOnTimeout:!0});vt("CONFITEOR_READY",1,{timeout:30,warnOnTimeout:!0});vt("PASSAGE_OF_ARMS",1,{timeout:18});vt("SUPPLICATION_READY",1,{timeout:30,warnOnTimeout:!0});vt("SEPULCHRE_READY",1,{timeout:30,warnOnTimeout:!0});vt("HOLY_SHELTRON",1,{timeout:8});vt("BLADE_OF_HONOR_READY",1,{timeout:30,warnOnTimeout:!0});vt("GUARDIAN",1,{timeout:15});vt("GUARDIANS_WILL",1,{timeout:15});vt("PLD_COMBO_TRACKER",2,{timeout:30});vt("PLD_CONFITEOR_COMBO_TRACKER",3,{timeout:30});vt("PLD_AOE_COMBO_TRACKER",1,{timeout:30});vt("INTERVENTION",1,{timeout:8});vt("ARMS_UP",1);vt("COVER",1,{timeout:12});const QR=new Map([["TOTAL_ECLIPSE",0],["PROMINENCE",1]]),JR=new Map([["FAST_BLADE",0],["RIOT_BLADE",1],["ROYAL_AUTHORITY",2]]),ey=new Map([["CONFITEOR",0],["BLADE_OF_FAITH",1],["BLADE_OF_TRUTH",2],["BLADE_OF_VALOR",3]]),Of=["HOLY_SPIRIT","HOLY_CIRCLE"];class aF extends tn{constructor(t){super(t),this.resources.get("OATH_GAUGE").gain(100),this.registerRecurringEvents([{groupedEffects:[{effectName:"CIRCLE_OF_SCORN_DOT",appliedBy:["CIRCLE_OF_SCORN"]}]}])}get statusPropsGenerator(){return new iF(this)}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("FIGHT_OR_FLIGHT")&&t.addBuff(U.FightOrFlight);const a=n.name;this.hasResourceAvailable("DIVINE_MIGHT")&&(a==="HOLY_SPIRIT"||a==="HOLY_CIRCLE")?t.addBuff(U.DivineMight):this.hasResourceAvailable("REQUIESCAT")&&(a==="HOLY_SPIRIT"||a==="HOLY_CIRCLE"||a==="CONFITEOR"||a==="BLADE_OF_FAITH"||a==="BLADE_OF_TRUTH"||a==="BLADE_OF_VALOR")&&t.addBuff(U.Requiescat)}cancelChanneledSkills(){this.tryConsumeResource("PASSAGE_OF_ARMS")}jobSpecificOnAutoAttack(){p.reportAutoTick(this.time,"auto"),this.resources.get("OATH_GAUGE").gain(5)}isSpellInstant(t){return t!=="CLEMENCY"?this.hasResourceAvailable("DIVINE_MIGHT")||this.hasResourceAvailable("REQUIESCAT"):this.hasResourceAvailable("REQUIESCAT")}captureSpellCastTime(t,n){return this.isSpellInstant(t)?0:this.config.adjustedCastTime(n)}tryConsumeRequiescat(t){(Of.includes(t)||ey.has(t)||t==="CLEMENCY")&&this.tryConsumeResource("REQUIESCAT")}isHolySpiritCircleGoodForReq(){const t=this.resources.get("REQUIESCAT").availableAmount();return t===0||this.hasResourceAvailable("PLD_CONFITEOR_COMBO_TRACKER")||this.config.level>=90?!1:this.config.level>=80?!this.hasResourceAvailable("CONFITEOR_READY")||this.hasResourceAvailable("CONFITEOR_READY")&&t>1:!0}progressComboTracker(t,n,a){const s=this.resources.get(n).maxValue,c=a.get(t)??-1,d=this.resources.get(n).availableAmount();this.tryConsumeResource(n,!0),(c!==s&&c===d||c===0)&&(this.resources.get(n).gain(c+1),this.enqueueResourceDrop(n))}fixPLDPhysicalComboState(t){QR.has(t)?(this.tryConsumeResource("PLD_COMBO_TRACKER",!0),this.progressComboTracker(t,"PLD_AOE_COMBO_TRACKER",QR)):JR.has(t)&&(this.tryConsumeResource("PLD_AOE_COMBO_TRACKER",!0),this.progressComboTracker(t,"PLD_COMBO_TRACKER",JR)),(QR.has(t)||JR.has(t)||t==="SHIELD_BASH")&&this.tryConsumeResource("PLD_CONFITEOR_COMBO_TRACKER",!0)}getDelayedManaFromAction(t,n){this.addEvent(new xe("get MP from "+n,this.skillsList.get(n).applicationDelay,()=>{this.resources.get("MANA").gain(t)}))}refreshBuff(t,n){this.addEvent(new xe("gain buff",n,()=>{this.resources.get(t).gain(1),this.enqueueResourceDrop(t)}))}}const Qa=(e,t,n)=>{const a=Pe(n.onConfirm,s=>{e!=="SHIELD_LOB"&&e!=="SHIELD_BASH"&&e!=="GORING_BLADE"&&s.fixPLDPhysicalComboState(e)});return un("PLD",e,t,{...n,onConfirm:a,recastTime:s=>s.config.adjustedSksGCD(),jobPotencyModifiers:s=>s.hasResourceAvailable("FIGHT_OR_FLIGHT")?[$.FightOrFlight]:[]})},or=(e,t,n)=>{const a=Pe((s,c)=>{s.hasResourceAvailable("DIVINE_MIGHT")&&Of.includes(e)?s.tryConsumeResource("DIVINE_MIGHT"):s.tryConsumeRequiescat(e)},n.onConfirm);return oa("PLD",e,t,{...n,castTime:s=>s.captureSpellCastTime(e,n.baseCastTime),recastTime:s=>s.config.adjustedGCD(),manaCost:n.baseManaCost??0,potency:n.basePotency,jobPotencyModifiers:s=>{const c=[];return Of.includes(e)&&s.hasResourceAvailable("DIVINE_MIGHT")?n.dmPotency&&c.push(Gk(cn(s,n.dmPotency)-cn(s,n.basePotency))):(Of.includes(e)||ey.has(e))&&s.hasResourceAvailable("REQUIESCAT")&&n.reqPotency&&c.push(Pk(cn(s,n.reqPotency)-cn(s,n.basePotency))),e!=="CLEMENCY"&&s.hasResourceAvailable("FIGHT_OR_FLIGHT")&&c.push($.FightOrFlight),n.jobPotencyModifiers&&c.push(...n.jobPotencyModifiers(s)),c},isInstantFn:s=>s.isSpellInstant(e),onConfirm:a})},qn=(e,t,n,a)=>st("PLD",e,t,n,{...a,jobPotencyModifiers:s=>{const c=[];return s.hasResourceAvailable("FIGHT_OR_FLIGHT")&&c.push($.FightOrFlight),c}}),ty=(e,t,n,a)=>Ze("PLD",e,t,n,{...a,rscType:a.rscType,cooldown:a.cooldown,applicationDelay:a.applicationDelay}),ny={newSkill:"ATONEMENT",condition:e=>e.hasResourceAvailable("ATONEMENT_READY")},iy={newSkill:"SUPPLICATION",condition:e=>e.hasResourceAvailable("SUPPLICATION_READY")},ay={newSkill:"SEPULCHRE",condition:e=>e.hasResourceAvailable("SEPULCHRE_READY")},dg={newSkill:"CONFITEOR",condition:e=>e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").availableAmount()===0},cd={newSkill:"BLADE_OF_FAITH",condition:e=>e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").availableAmount()===1},ud={newSkill:"BLADE_OF_TRUTH",condition:e=>e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").availableAmount()===2},dd={newSkill:"BLADE_OF_VALOR",condition:e=>e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").availableAmount()===3},PT={newSkill:"BLADE_OF_HONOR",condition:e=>e.hasResourceAvailable("BLADE_OF_HONOR_READY")},oF={newSkill:"IMPERATOR",condition:e=>!e.hasResourceAvailable("BLADE_OF_HONOR_READY")},lF={newSkill:"IRON_WILL",condition:e=>!e.hasResourceAvailable("IRON_WILL")},sF={newSkill:"RELEASE_IRON_WILL",condition:e=>e.hasResourceAvailable("IRON_WILL")};Qa("SHIELD_LOB",15,{potency:100,applicationDelay:.89,startsAuto:!1});Qa("FAST_BLADE",1,{potency:[["NEVER",150],["MELEE_MASTERY_TANK",200],["MELEE_MASTERY_II_TANK",220]],applicationDelay:.62});Qa("RIOT_BLADE",4,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",140],["MELEE_MASTERY_II_TANK",170]],combo:{potency:[["NEVER",260],["MELEE_MASTERY_TANK",300],["MELEE_MASTERY_II_TANK",330]],resource:"PLD_COMBO_TRACKER",resourceValue:1},highlightIf:e=>e.resources.get("PLD_COMBO_TRACKER").availableAmount()===1,applicationDelay:.76,onConfirm:e=>{e.resources.get("PLD_COMBO_TRACKER").availableAmount()===1&&e.getDelayedManaFromAction(1e3,"RIOT_BLADE")}});Qa("ROYAL_AUTHORITY",60,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",140],["MELEE_MASTERY_II_TANK",200]],combo:{potency:[["NEVER",360],["MELEE_MASTERY_TANK",400],["MELEE_MASTERY_II_TANK",460]],resource:"PLD_COMBO_TRACKER",resourceValue:2},highlightIf:e=>e.resources.get("PLD_COMBO_TRACKER").availableAmount()===2,applicationDelay:.62,onConfirm:e=>{e.resources.get("PLD_COMBO_TRACKER").availableAmount()===2&&(e.refreshBuff("DIVINE_MIGHT",0),e.hasTraitUnlocked("SWORD_OATH")&&(e.refreshBuff("ATONEMENT_READY",0),e.tryConsumeResource("SUPPLICATION_READY"),e.tryConsumeResource("SEPULCHRE_READY")))}});Qa("ATONEMENT",76,{replaceIf:[iy,ay],potency:[["NEVER",360],["MELEE_MASTERY_TANK",400],["MELEE_MASTERY_II_TANK",460]],applicationDelay:1.26,validateAttempt:e=>e.hasResourceAvailable("ATONEMENT_READY"),highlightIf:e=>e.hasResourceAvailable("ATONEMENT_READY"),onConfirm:e=>{e.tryConsumeResource("ATONEMENT_READY"),e.refreshBuff("SUPPLICATION_READY",0),e.getDelayedManaFromAction(400,"ATONEMENT")}});Qa("SUPPLICATION",76,{startOnHotbar:!1,replaceIf:[ny,ay],potency:[["NEVER",380],["MELEE_MASTERY_TANK",420],["MELEE_MASTERY_II_TANK",500]],applicationDelay:1.16,validateAttempt:e=>e.hasResourceAvailable("SUPPLICATION_READY"),highlightIf:e=>e.hasResourceAvailable("SUPPLICATION_READY"),onConfirm:e=>{e.tryConsumeResource("SUPPLICATION_READY"),e.refreshBuff("SEPULCHRE_READY",0),e.getDelayedManaFromAction(400,"SUPPLICATION")}});Qa("SEPULCHRE",76,{startOnHotbar:!1,replaceIf:[ny,iy],potency:[["NEVER",400],["MELEE_MASTERY_TANK",440],["MELEE_MASTERY_II_TANK",540]],applicationDelay:1.29,validateAttempt:e=>e.hasResourceAvailable("SEPULCHRE_READY"),highlightIf:e=>e.hasResourceAvailable("SEPULCHRE_READY"),onConfirm:e=>{e.tryConsumeResource("SEPULCHRE_READY"),e.getDelayedManaFromAction(400,"SEPULCHRE")}});Qa("TOTAL_ECLIPSE",6,{potency:120,applicationDelay:.76,falloff:0});Qa("PROMINENCE",40,{potency:100,combo:{potency:220,resource:"PLD_AOE_COMBO_TRACKER",resourceValue:1},applicationDelay:.62,falloff:0,highlightIf:e=>e.resources.get("PLD_AOE_COMBO_TRACKER").availableAmount()===1,onConfirm:e=>{e.resources.get("PLD_AOE_COMBO_TRACKER").availableAmount()===1&&e.hasTraitUnlocked("ENHANCED_PROMINENCE")&&(e.refreshBuff("DIVINE_MIGHT",0),e.getDelayedManaFromAction(500,"PROMINENCE"))}});or("HOLY_SPIRIT",64,{baseCastTime:1.5,applicationDelay:.76,baseManaCost:1e3,startsAuto:!1,basePotency:[["NEVER",300],["MELEE_MASTERY_TANK",350],["MELEE_MASTERY_II_TANK",400]],reqPotency:[["NEVER",600],["MELEE_MASTERY_TANK",650],["MELEE_MASTERY_II_TANK",700]],dmPotency:[["NEVER",400],["MELEE_MASTERY_TANK",450],["MELEE_MASTERY_II_TANK",500]],highlightIf:e=>e.hasResourceAvailable("DIVINE_MIGHT")||e.isHolySpiritCircleGoodForReq()});or("HOLY_CIRCLE",72,{baseCastTime:1.5,applicationDelay:.62,baseManaCost:1e3,basePotency:100,reqPotency:350,dmPotency:250,falloff:0,highlightIf:e=>e.hasResourceAvailable("DIVINE_MIGHT")||e.isHolySpiritCircleGoodForReq()});Qa("GORING_BLADE",54,{applicationDelay:.53,potency:700,validateAttempt:e=>e.hasResourceAvailable("GORING_BLADE_READY"),highlightIf:e=>e.hasResourceAvailable("GORING_BLADE_READY"),onConfirm:e=>{e.tryConsumeResource("GORING_BLADE_READY")}});or("CONFITEOR",80,{replaceIf:[cd,ud,dd],baseCastTime:0,applicationDelay:.62,baseManaCost:1e3,startsAuto:!1,basePotency:[["NEVER",420],["MELEE_MASTERY_II_TANK",500]],reqPotency:[["NEVER",920],["MELEE_MASTERY_II_TANK",1e3]],falloff:.6,validateAttempt:e=>e.hasResourceAvailable("CONFITEOR_READY"),highlightIf:e=>e.hasResourceAvailable("CONFITEOR_READY"),onConfirm:e=>{e.tryConsumeResource("CONFITEOR_READY"),e.tryConsumeResource("PLD_CONFITEOR_COMBO_TRACKER",!0),e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").gain(1),e.enqueueResourceDrop("PLD_CONFITEOR_COMBO_TRACKER")}});or("BLADE_OF_FAITH",90,{replaceIf:[dg,ud,dd],startOnHotbar:!1,baseCastTime:0,baseManaCost:1e3,startsAuto:!1,applicationDelay:.62,basePotency:[["NEVER",220],["MELEE_MASTERY_II_TANK",260]],reqPotency:[["NEVER",720],["MELEE_MASTERY_II_TANK",760]],falloff:.6,validateAttempt:e=>cd.condition(e),highlightIf:e=>cd.condition(e),onConfirm:e=>{e.tryConsumeResource("PLD_CONFITEOR_COMBO_TRACKER",!0),e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").gain(2),e.enqueueResourceDrop("PLD_CONFITEOR_COMBO_TRACKER")}});or("BLADE_OF_TRUTH",90,{replaceIf:[dg,cd,dd],startOnHotbar:!1,baseCastTime:0,baseManaCost:1e3,applicationDelay:.89,startsAuto:!1,basePotency:[["NEVER",320],["MELEE_MASTERY_II_TANK",380]],reqPotency:[["NEVER",820],["MELEE_MASTERY_II_TANK",880]],falloff:.6,validateAttempt:e=>ud.condition(e),highlightIf:e=>ud.condition(e),onConfirm:e=>{e.tryConsumeResource("PLD_CONFITEOR_COMBO_TRACKER",!0),e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").gain(3),e.enqueueResourceDrop("PLD_CONFITEOR_COMBO_TRACKER")}});or("BLADE_OF_VALOR",90,{replaceIf:[dg,cd,ud],startOnHotbar:!1,baseCastTime:0,baseManaCost:1e3,applicationDelay:.89,startsAuto:!1,basePotency:[["NEVER",420],["MELEE_MASTERY_II_TANK",500]],reqPotency:[["NEVER",920],["MELEE_MASTERY_II_TANK",1e3]],falloff:.6,validateAttempt:e=>dd.condition(e),highlightIf:e=>dd.condition(e),onConfirm:e=>{e.tryConsumeResource("PLD_CONFITEOR_COMBO_TRACKER",!0),e.refreshBuff("BLADE_OF_HONOR_READY",0)}});qn("FIGHT_OR_FLIGHT",2,"cd_FIGHT_OR_FLIGHT",{applicationDelay:.62,cooldown:60,onConfirm:e=>{e.refreshBuff("GORING_BLADE_READY",0),e.refreshBuff("FIGHT_OR_FLIGHT",.62)}});qn("REQUIESCAT",68,"cd_REQUIESCAT",{autoUpgrade:{trait:"REQUIESCAT_MASTERY",otherSkill:"IMPERATOR"},applicationDelay:.62,cooldown:60,potency:320,onConfirm:e=>{e.resources.get("REQUIESCAT").gain(4),e.enqueueResourceDrop("REQUIESCAT",30),e.hasTraitUnlocked("ENHANCED_REQUIESCAT")&&e.refreshBuff("CONFITEOR_READY",0)}});qn("IMPERATOR",96,"cd_IMPERATOR",{autoDowngrade:{trait:"REQUIESCAT_MASTERY",otherSkill:"REQUIESCAT"},replaceIf:[PT],applicationDelay:1.29,cooldown:60,potency:580,falloff:.6,onConfirm:e=>{e.resources.get("REQUIESCAT").gain(4),e.enqueueResourceDrop("REQUIESCAT",30,4),e.hasTraitUnlocked("ENHANCED_REQUIESCAT")&&e.refreshBuff("CONFITEOR_READY",0)}});qn("BLADE_OF_HONOR",100,"cd_BLADE_OF_HONOR",{startOnHotbar:!1,cooldown:1,replaceIf:[oF],validateAttempt:PT.condition,highlightIf:PT.condition,applicationDelay:1.16,potency:1e3,startsAuto:!1,falloff:.5,onConfirm:e=>{e.tryConsumeResource("BLADE_OF_HONOR_READY")}});qn("SPIRITS_WITHIN",30,"cd_SPIRITS_WITHIN",{autoUpgrade:{trait:"SPIRITS_WITHIN_MASTERY",otherSkill:"EXPIACION"},applicationDelay:.89,cooldown:30,potency:270,onConfirm:e=>{e.getDelayedManaFromAction(500,"SPIRITS_WITHIN")}});qn("EXPIACION",86,"cd_EXPIACION",{autoDowngrade:{trait:"SPIRITS_WITHIN_MASTERY",otherSkill:"SPIRITS_WITHIN"},applicationDelay:.36,cooldown:30,potency:450,falloff:.6,onConfirm:e=>{e.getDelayedManaFromAction(500,"EXPIACION")}});qn("CIRCLE_OF_SCORN",50,"cd_CIRCLE_OF_SCORN",{applicationDelay:1.02,cooldown:30,potency:140,falloff:0,onConfirm:(e,t)=>{const n=[];e.hasResourceAvailable("FIGHT_OR_FLIGHT")&&n.push($.FightOrFlight),e.addDoTPotencies({node:t,effectName:"CIRCLE_OF_SCORN_DOT",skillName:"CIRCLE_OF_SCORN",tickPotency:30,speedStat:"sks",modifiers:n}),e.addEvent(new xe("apply CoS dot",1.02,()=>{e.applyDoT("CIRCLE_OF_SCORN_DOT",t)}))}});qn("INTERVENE",66,"cd_INTERVENE",{applicationDelay:.62,cooldown:30,potency:150,maxCharges:2,animationLock:Jt});or("CLEMENCY",58,{baseCastTime:1.5,applicationDelay:.62,baseManaCost:2e3,basePotency:0,highlightIf:e=>e.hasResourceAvailable("REQUIESCAT")});qn("SHELTRON",35,"cd_SHELTRON",{autoUpgrade:{trait:"SHELTRON_MASTERY",otherSkill:"HOLY_SHELTRON"},validateAttempt:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,highlightIf:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,applicationDelay:0,cooldown:5,onConfirm:e=>{e.resources.get("OATH_GAUGE").consume(50),e.refreshBuff("SHELTRON",0)}});qn("HOLY_SHELTRON",82,"cd_HOLY_SHELTRON",{autoDowngrade:{trait:"SHELTRON_MASTERY",otherSkill:"SHELTRON"},applicationDelay:0,cooldown:5,validateAttempt:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,highlightIf:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,onConfirm:e=>{e.refreshBuff("HOLY_SHELTRON",0),e.refreshBuff("KNIGHTS_RESOLVE",0),e.refreshBuff("KNIGHTS_BENEDICTION",0),e.resources.get("OATH_GAUGE").consume(50)}});qn("INTERVENTION",62,"cd_INTERVENTION",{applicationDelay:.8,cooldown:10,validateAttempt:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,highlightIf:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,onConfirm:e=>{e.resources.get("OATH_GAUGE").consume(50)}});ty("HALLOWED_GROUND",50,"cd_HALLOWED_GROUND",{rscType:"HALLOWED_GROUND",applicationDelay:0,cooldown:420});ty("BULWARK",52,"cd_BULWARK",{rscType:"BULWARK",applicationDelay:0,cooldown:90});qn("SENTINEL",38,"cd_SENTINEL",{autoUpgrade:{trait:"SENTINEL_MASTERY",otherSkill:"GUARDIAN"},applicationDelay:.53,cooldown:120,onConfirm:e=>{e.refreshBuff("SENTINEL",.53)}});qn("GUARDIAN",92,"cd_GUARDIAN",{autoDowngrade:{trait:"SENTINEL_MASTERY",otherSkill:"SENTINEL"},applicationDelay:.53,cooldown:120,onConfirm:e=>{e.refreshBuff("GUARDIAN",.53),e.refreshBuff("GUARDIANS_WILL",.53)}});qn("DIVINE_VEIL",56,"cd_DIVINE_VEIL",{applicationDelay:0,cooldown:90,onConfirm:e=>{e.refreshBuff("DIVINE_VEIL",0)}});qn("PASSAGE_OF_ARMS",70,"cd_PASSAGE_OF_ARMS",{applicationDelay:.62,cooldown:120,onConfirm:e=>{e.refreshBuff("PASSAGE_OF_ARMS",.62)}});qn("COVER",45,"cd_COVER",{applicationDelay:.62,cooldown:120,validateAttempt:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,highlightIf:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,onConfirm:e=>{e.resources.get("OATH_GAUGE").consume(50)}});qn("IRON_WILL",10,"cd_IRON_WILL",{applicationDelay:0,cooldown:2,validateAttempt:e=>!e.hasResourceAvailable("IRON_WILL"),onConfirm:e=>{e.resources.get("IRON_WILL").gain(1)},replaceIf:[sF],secondaryCooldown:{cdName:"cd_RELEASE_IRON_WILL",cooldown:1,maxCharges:1}});qn("RELEASE_IRON_WILL",10,"cd_RELEASE_IRON_WILL",{startOnHotbar:!1,replaceIf:[lF],applicationDelay:0,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("IRON_WILL"),onConfirm:e=>{e.tryConsumeResource("IRON_WILL")},secondaryCooldown:{cdName:"cd_IRON_WILL",cooldown:2,maxCharges:1}});Qa("SHIELD_BASH",10,{potency:100,applicationDelay:.45});Object.keys(lS).forEach(e=>qt(e,`DRK/${Ke[e].name}.png`));const rF=Object.keys(lS);class cF extends en{jobSpecificOtherTargetedBuffViewProps(){return[]}jobSpecificSelfTargetedBuffViewProps(){return rF.map(t=>t==="GRIT"?this.makeCommonTimerless(t):this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){var T,S,g;const n=this.state.resources,a=n.get("DRK_COMBO_TRACKER"),s=n.get("DRK_AOE_COMBO_TRACKER"),c=n.get("BLOOD_GAUGE").availableAmount(),d=n.get("GRIT").availableAmount(),f=((T=n.get("DARKSIDE").pendingChange)==null?void 0:T.timeTillEvent)??0,h=n.get("DARK_ARTS").availableAmount(),m=a.available(1)?(S=a.pendingChange)==null?void 0:S.timeTillEvent:s.available(1)?(g=s.pendingChange)==null?void 0:g.timeTillEvent:void 0;return[{kind:"bar",name:N({en:"Combo Timer",zh:""}),color:t.drk.drkComboTimer,progress:m?m/30:0,valueString:(m==null?void 0:m.toFixed(3))??"N/A"},{kind:"counter",name:Qe("GRIT"),color:t.drk.grit,currentStacks:d,maxStacks:1},{kind:"bar",name:Qe("DARKSIDE"),color:t.drk.darkside,progress:f?f/60:0,valueString:f.toFixed(3)},{kind:"counter",name:Qe("DARK_ARTS"),color:t.drk.darkarts,currentStacks:h,maxStacks:1},{kind:"bar",name:Qe("BLOOD_GAUGE"),color:t.drk.blood,progress:c/100,valueString:c.toFixed(0)}]}}const An=(e,t,n)=>{Je("DRK",e,t,n??{})};An("DARKSIDE",1,{timeout:60});An("BLOOD_GAUGE",100,{warnOnOvercap:!0});An("SALTED_EARTH",1,{timeout:15});An("GRIT",1);An("SHADOW_WALL",1,{timeout:15});An("DARK_MIND",1,{timeout:10});An("LIVING_DEAD",1,{timeout:10});An("WALKING_DEAD",1,{timeout:10});An("UNDEAD_REBIRTH",1);An("DARK_MISSIONARY",1,{timeout:15});An("DELIRIUM",3,{timeout:15,warnOnTimeout:!0});An("BLOOD_WEAPON",3,{timeout:15,warnOnTimeout:!0});An("BLACKEST_NIGHT",1,{timeout:7,warnOnTimeout:!0});An("SCORN",1,{timeout:30,warnOnTimeout:!0});An("OBLATION",1,{timeout:10});An("SHADOWED_VIGIL",1,{timeout:15});An("VIGILANT",1,{timeout:20});An("DARK_ARTS",1,{warnOnOvercap:!0});An("DRK_COMBO_TRACKER",2,{timeout:30});An("DRK_AOE_COMBO_TRACKER",1,{timeout:30});An("DRK_DELIRIUM_COMBO_TRACKER",2,{timeout:30});const hg=6;An("ESTEEM_TRACKER",hg);const uF=6.8,dF=2.18;class hF extends tn{constructor(t){super(t),this.registerRecurringEvents([{groupedEffects:[{effectName:"SALTED_EARTH",appliedBy:["SALTED_EARTH"],isGroundTargeted:!0}]}],["LIVING_SHADOW"])}get statusPropsGenerator(){return new cF(this)}refreshDarkside(){var t;if(this.hasResourceAvailable("DARKSIDE")){const n=this.resources.get("DARKSIDE"),a=jt("DRK","DARKSIDE").maxTimeout,s=(((t=n.pendingChange)==null?void 0:t.timeTillEvent)??0)+30;n.overrideTimer(this,Math.min(a,s))}else this.resources.get("DARKSIDE").gain(1),this.enqueueResourceDrop("DARKSIDE",30)}gainBloodGauge(t){this.resources.get("BLOOD_GAUGE").gain(t)}bloodWeaponConfirm(t){this.hasResourceAvailable("BLOOD_WEAPON")&&(this.tryConsumeResource("BLOOD_WEAPON"),this.gainBloodGauge(10),this.addEvent(new xe("gain blood weapon mana",t,()=>{this.resources.get("MANA").gain(600)})))}processComboStatus(t){if(["DISESTEEM","UNMEND","BLOODSPILLER","QUIETUS"].includes(t))return;let n=[this.resources.get("DRK_COMBO_TRACKER").availableAmount(),this.resources.get("DRK_AOE_COMBO_TRACKER").availableAmount(),this.resources.get("DRK_DELIRIUM_COMBO_TRACKER").availableAmount()];t==="HARD_SLASH"?n=[1,0,0]:t==="SYPHON_STRIKE"?n=[n[0]===1?2:0,0,0]:t==="SOULEATER"?n=[0,0,0]:t==="IMPALEMENT"?n[2]=0:t==="SCARLET_DELIRIUM"?n[2]=1:t==="COMEUPPANCE"?n[2]=2:t==="TORCLEAVER"?n[2]=0:t==="UNLEASH"?n=[0,1,0]:t==="STALWART_SOUL"?n=[0,0,0]:n=[0,0,0],this.setComboState("DRK_COMBO_TRACKER",n[0]),this.setComboState("DRK_AOE_COMBO_TRACKER",n[1]),this.setComboState("DRK_DELIRIUM_COMBO_TRACKER",n[2])}handleEsteemAttack(){if(!this.hasResourceAvailable("ESTEEM_TRACKER"))return;const t=this.resources.get("ESTEEM_TRACKER").node;t!==void 0&&this.resolveEsteemPotency(t),this.resources.get("ESTEEM_TRACKER").consume(1),this.hasResourceAvailable("ESTEEM_TRACKER")&&this.addEvent(new xe("esteem hit",dF,()=>this.handleEsteemAttack()))}resolveEsteemPotency(t){const n=this.resources.get("ESTEEM_TRACKER").availableAmount();if(n===0)return;const a=t.getDotPotencies("ESTEEM_TRACKER")[hg-n];a.addModifiers($.DrkPet),this.hasResourceAvailable("TINCTURE")&&a.addModifiers($.Tincture),a.snapshotTime=this.getDisplayTime(),p.resolvePotency(a)}}const is=(e,t,n)=>un("DRK",e,t,{...n,onConfirm:Pe(n.onConfirm,a=>a.bloodWeaponConfirm(n.applicationDelay),a=>a.processComboStatus(e)),recastTime:a=>a.config.adjustedSksGCD(),jobPotencyModifiers:a=>a.hasResourceAvailable("DARKSIDE")?[$.Darkside]:[]}),fg=(e,t,n)=>oa("DRK",e,t,{...n,onConfirm:Pe(n.onConfirm,a=>a.bloodWeaponConfirm(n.applicationDelay),a=>a.processComboStatus(e)),recastTime:a=>a.config.adjustedGCD(),jobPotencyModifiers:a=>a.hasResourceAvailable("DARKSIDE")?[$.Darkside]:[]}),yi=(e,t,n,a)=>st("DRK",e,t,n,{...a,jobPotencyModifiers:s=>s.hasResourceAvailable("DARKSIDE")?[$.Darkside]:[]}),lr=(e,t,n,a)=>Ze("DRK",e,t,n,a);fg("UNMEND",15,{applicationDelay:.98,potency:150,startsAuto:!1,onConfirm:e=>{if(e.hasTraitUnlocked("ENHANCED_UNMEND")){const t=e.cooldowns.get("cd_SHADOWSTRIDE").timeTillNextStackAvailable();e.cooldowns.get("cd_SHADOWSTRIDE").overrideTimeTillNextStack(Math.max(0,t-5))}}});is("HARD_SLASH",1,{applicationDelay:.58,potency:[["NEVER",150],["MELEE_MASTERY_TANK",180],["MELEE_MASTERY_II_TANK",300]]});is("SYPHON_STRIKE",2,{applicationDelay:.62,highlightIf:e=>e.hasResourceExactly("DRK_COMBO_TRACKER",1),potency:[["NEVER",100],["MELEE_MASTERY_TANK",120],["MELEE_MASTERY_II_TANK",240]],combo:{potency:[["NEVER",240],["MELEE_MASTERY_TANK",260],["MELEE_MASTERY_II_TANK",380]],resource:"DRK_COMBO_TRACKER",resourceValue:1},onConfirm:e=>{e.hasResourceExactly("DRK_COMBO_TRACKER",1)&&e.addEvent(new xe("gain syphon strike mana",.62,()=>{e.resources.get("MANA").gain(600)}))}});is("SOULEATER",26,{applicationDelay:.62,highlightIf:e=>e.hasResourceExactly("DRK_COMBO_TRACKER",2),potency:[["NEVER",100],["MELEE_MASTERY_TANK",140],["MELEE_MASTERY_II_TANK",260]],combo:{potency:[["NEVER",320],["MELEE_MASTERY_TANK",360],["MELEE_MASTERY_II_TANK",480]],resource:"DRK_COMBO_TRACKER",resourceValue:2},onConfirm:e=>{e.hasResourceAvailable("DRK_COMBO_TRACKER",2)&&e.gainBloodGauge(20)}});fg("UNLEASH",6,{applicationDelay:.71,potency:120,falloff:0});fg("STALWART_SOUL",40,{applicationDelay:.62,highlightIf:e=>e.hasResourceExactly("DRK_AOE_COMBO_TRACKER",1),potency:[["NEVER",100],["MELEE_MASTERY_II_TANK",120]],combo:{potency:[["NEVER",140],["MELEE_MASTERY_II_TANK",160]],resource:"DRK_AOE_COMBO_TRACKER",resourceValue:1},falloff:0,onConfirm:e=>{e.hasResourceExactly("DRK_AOE_COMBO_TRACKER",1)&&(e.gainBloodGauge(20),e.addEvent(new xe("gain stalwart soul mana",.62,()=>{e.resources.get("MANA").gain(600)})))}});const VE=e=>{e.tryConsumeResource("DARK_ARTS"),e.refreshDarkside()},WE=e=>e.hasResourceAvailable("DARK_ARTS"),XE=e=>e.hasResourceAvailable("DARK_ARTS")?0:3e3;yi("EDGE_OF_DARKNESS",40,"cd_FLOOD_OF_DARKNESS",{applicationDelay:.62,autoUpgrade:{trait:"DAKRSIDE_MASTERY",otherSkill:"EDGE_OF_SHADOW"},cooldown:1,manaCost:XE,highlightIf:WE,potency:300,onConfirm:VE});yi("EDGE_OF_SHADOW",74,"cd_FLOOD_OF_DARKNESS",{applicationDelay:.62,autoDowngrade:{trait:"DAKRSIDE_MASTERY",otherSkill:"EDGE_OF_DARKNESS"},cooldown:1,manaCost:XE,highlightIf:WE,potency:460,onConfirm:VE});yi("FLOOD_OF_DARKNESS",30,"cd_FLOOD_OF_DARKNESS",{applicationDelay:.62,autoUpgrade:{trait:"DAKRSIDE_MASTERY",otherSkill:"FLOOD_OF_SHADOW"},cooldown:1,manaCost:XE,highlightIf:WE,potency:100,falloff:0,onConfirm:VE});yi("FLOOD_OF_SHADOW",74,"cd_FLOOD_OF_DARKNESS",{applicationDelay:.62,autoDowngrade:{trait:"DAKRSIDE_MASTERY",otherSkill:"FLOOD_OF_DARKNESS"},cooldown:1,manaCost:XE,highlightIf:WE,potency:160,falloff:0,onConfirm:VE});const cE=e=>e.hasResourceAvailable("BLOOD_GAUGE",50)||e.hasResourceAvailable("DELIRIUM"),Df=[{newSkill:"BLOODSPILLER",condition:e=>!e.hasTraitUnlocked("ENHANCED_DELIRIUM")||!e.hasResourceAvailable("DELIRIUM")},{newSkill:"SCARLET_DELIRIUM",condition:e=>e.hasTraitUnlocked("ENHANCED_DELIRIUM")&&e.hasResourceAvailable("DELIRIUM")&&e.hasResourceExactly("DRK_DELIRIUM_COMBO_TRACKER",0)},{newSkill:"COMEUPPANCE",condition:e=>e.hasTraitUnlocked("ENHANCED_DELIRIUM")&&e.hasResourceAvailable("DELIRIUM")&&e.hasResourceExactly("DRK_DELIRIUM_COMBO_TRACKER",1)},{newSkill:"TORCLEAVER",condition:e=>e.hasTraitUnlocked("ENHANCED_DELIRIUM")&&e.hasResourceAvailable("DELIRIUM")&&e.hasResourceExactly("DRK_DELIRIUM_COMBO_TRACKER",2)}];is("BLOODSPILLER",62,{applicationDelay:.8,validateAttempt:cE,highlightIf:cE,replaceIf:Df,potency:[["NEVER",500],["MELEE_MASTERY_II_TANK",600]],onConfirm:e=>e.tryConsumeResource("DELIRIUM")||e.resources.get("BLOOD_GAUGE").consume(50)});const yf=e=>e.hasTraitUnlocked("ENHANCED_DELIRIUM")&&e.hasResourceAvailable("DELIRIUM");is("QUIETUS",64,{applicationDelay:.76,validateAttempt:cE,highlightIf:cE,replaceIf:[{newSkill:"IMPALEMENT",condition:yf}],potency:[["NEVER",200],["MELEE_MASTERY_II_TANK",240]],falloff:0,onConfirm:e=>e.tryConsumeResource("DELIRIUM")||e.resources.get("BLOOD_GAUGE").consume(50)});[["SCARLET_DELIRIUM",.62,620],["COMEUPPANCE",.67,720],["TORCLEAVER",.62,820]].forEach((e,t)=>{const[n,a,s]=e;is(n,96,{startOnHotbar:!1,applicationDelay:a,validateAttempt:Df[t+1].condition,highlightIf:Df[t+1].condition,replaceIf:Df,potency:s,onConfirm:c=>c.tryConsumeResource("DELIRIUM"),onApplication:c=>c.resources.get("MANA").gain(200)})});is("IMPALEMENT",96,{startOnHotbar:!1,applicationDelay:.98,validateAttempt:yf,highlightIf:yf,replaceIf:[{newSkill:"QUIETUS",condition:e=>!yf(e)}],potency:300,falloff:0,onConfirm:e=>e.tryConsumeResource("DELIRIUM"),onApplication:e=>e.resources.get("MANA").gain(500)});const GT=e=>e.hasResourceAvailable("SCORN");is("DISESTEEM",100,{startOnHotbar:!1,applicationDelay:1.65,validateAttempt:GT,highlightIf:GT,potency:1e3,falloff:.25,onConfirm:e=>e.tryConsumeResource("SCORN")});yi("DELIRIUM",68,"cd_DELIRIUM",{applicationDelay:0,cooldown:60,onConfirm:e=>{e.gainStatus("DELIRIUM",3),e.gainStatus("BLOOD_WEAPON",3)}});yi("CARVE_AND_SPIT",60,"cd_ABYSSAL_DRAIN",{applicationDelay:1.47,cooldown:60,potency:[["NEVER",510],["MELEE_MASTERY_II_TANK",540]],healingPotency:500,onApplication:e=>e.resources.get("MANA").gain(600)});yi("ABYSSAL_DRAIN",56,"cd_ABYSSAL_DRAIN",{applicationDelay:.98,cooldown:60,potency:240,healingPotency:500,onApplication:e=>e.resources.get("MANA").gain(600)});const oy=e=>e.resources.get("SALTED_EARTH").availableAmountIncludingDisabled()>0;yi("SALTED_EARTH",52,"cd_SALTED_EARTH",{applicationDelay:.76,cooldown:90,replaceIf:[{newSkill:"SALT_AND_DARKNESS",condition:oy}],onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"SALTED_EARTH",skillName:"SALTED_EARTH",tickPotency:50,speedStat:"sks"})},falloff:0,onApplication:(e,t)=>{e.applyDoT("SALTED_EARTH",t),e.gainStatus("SALTED_EARTH")}});yi("SALT_AND_DARKNESS",86,"cd_SALT_AND_DARKNESS",{startOnHotbar:!1,highlightIf:e=>!0,validateAttempt:oy,applicationDelay:.76,cooldown:20,potency:500,falloff:.25});yi("LIVING_SHADOW",80,"cd_LIVING_SHADOW",{applicationDelay:0,replaceIf:[{newSkill:"DISESTEEM",condition:e=>GT(e)}],cooldown:120,onConfirm:(e,t)=>{e.hasTraitUnlocked("ENHANCED_LIVING_SHADOW_III")&&e.gainStatus("SCORN"),e.resources.get("ESTEEM_TRACKER").gain(hg);const n=e.hasTraitUnlocked("ENHANCED_LIVING_SHADOW")?420:340;[["ABYSSAL_DRAIN_PET",n,0],["SHADOWSTRIDE_PET",0,void 0],e.hasTraitUnlocked("ENHANCED_LIVING_SHADOW_II")?["SHADOWBRINGER_PET",570,.25]:["FLOOD_OF_SHADOW_PET",n,0],["EDGE_OF_SHADOW_PET",n,void 0],["BLOODSPILLER_PET",n,void 0],e.hasTraitUnlocked("ENHANCED_LIVING_SHADOW_III")?["DISESTEEM_PET",620,.25]:["CARVE_AND_SPIT_PET",n,void 0]].forEach(s=>{const[c,d,f]=s;t.addDoTPotency(new sn({config:e.config,sourceTime:e.getDisplayTime(),sourceSkill:c,aspect:Ne.Other,description:"",basePotency:d,snapshotTime:void 0,targetList:t.targetList,falloff:f}),"ESTEEM_TRACKER")}),e.resources.get("ESTEEM_TRACKER").node=t,e.addEvent(new xe("initial esteem hit",uF,()=>e.handleEsteemAttack()))}});yi("SHADOWBRINGER",90,"cd_SHADOWBRINGER",{applicationDelay:.67,cooldown:60,potency:600,falloff:.25,maxCharges:2,validateAttempt:e=>e.hasResourceAvailable("DARKSIDE")});yi("SHADOWSTRIDE",54,"cd_SHADOWSTRIDE",{applicationDelay:.66,animationLock:Jt,cooldown:30,maxCharges:2});lr("THE_BLACKEST_NIGHT",70,"cd_THE_BLACKEST_NIGHT",{rscType:"BLACKEST_NIGHT",manaCost:3e3,replaceIf:[{newSkill:"THE_BLACKEST_NIGHT_POP",condition:e=>e.hasResourceAvailable("BLACKEST_NIGHT")}],applicationDelay:.62,cooldown:15});yi("THE_BLACKEST_NIGHT_POP",70,"cd_THE_BLACKEST_NIGHT_POP",{startOnHotbar:!1,highlightIf:e=>!0,applicationDelay:0,animationLock:si,cooldown:1,onConfirm:e=>{e.gainStatus("DARK_ARTS"),e.tryConsumeResource("BLACKEST_NIGHT")}});lr("SHADOW_WALL",38,"cd_SHADOW_WALL",{rscType:"SHADOW_WALL",autoUpgrade:{otherSkill:"SHADOWED_VIGIL",trait:"SHADOW_WALL_MASTERY"},applicationDelay:.62,cooldown:120});lr("SHADOWED_VIGIL",92,"cd_SHADOW_WALL",{rscType:"SHADOWED_VIGIL",autoDowngrade:{otherSkill:"SHADOW_WALL",trait:"SHADOW_WALL_MASTERY"},applicationDelay:.62,cooldown:120,onApplication:e=>e.gainStatus("VIGILANT")});lr("DARK_MIND",45,"cd_DARK_MIND",{rscType:"DARK_MIND",applicationDelay:.62,cooldown:60});lr("LIVING_DEAD",50,"cd_LIVING_DEAD",{rscType:"LIVING_DEAD",applicationDelay:0,cooldown:300});lr("DARK_MISSIONARY",66,"cd_DARK_MISSIONARY",{rscType:"DARK_MISSIONARY",applicationDelay:.62,cooldown:90});lr("OBLATION",82,"cd_OBLATION",{rscType:"OBLATION",applicationDelay:0,maxCharges:2,cooldown:60});yi("GRIT",10,"cd_GRIT",{applicationDelay:0,cooldown:2,validateAttempt:e=>!e.hasResourceAvailable("GRIT"),onConfirm:e=>e.resources.get("GRIT").gain(1),replaceIf:[{newSkill:"RELEASE_GRIT",condition:e=>e.hasResourceAvailable("GRIT")}],secondaryCooldown:{cdName:"cd_RELEASE_GRIT",cooldown:1,maxCharges:1}});yi("RELEASE_GRIT",10,"cd_RELEASE_GRIT",{startOnHotbar:!1,replaceIf:[{newSkill:"GRIT",condition:e=>!e.hasResourceAvailable("GRIT")}],applicationDelay:0,cooldown:1,validateAttempt:e=>!e.hasResourceAvailable("GRIT"),onConfirm:e=>e.tryConsumeResource("GRIT"),secondaryCooldown:{cdName:"cd_GRIT",cooldown:2,maxCharges:1}});Object.keys(tS).forEach(e=>qt(e,`AST/${Ke[e].name}.png`));const ly=["COMBUST_II","COMBUST_III"],fF=Object.keys(tS).filter(e=>!ly.includes(e));class EF extends en{jobSpecificOtherTargetedBuffViewProps(){return[...ly.flatMap(t=>this.makeTargetedTimers(t))]}jobSpecificSelfTargetedBuffViewProps(){return[...fF.map(t=>this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){return[{kind:"arcana",name:Qe("ARCANA"),currentArcanaColor:this.state.drawnAstral()?t.ast.astralCard:t.ast.umbralCard,activeSlots:["ARCANA_1","ARCANA_2","ARCANA_3","MINOR_ARCANA"].map(n=>this.state.hasResourceAvailable(n))}]}}const dt=(e,t,n)=>{Je("AST",e,t,n??{})};dt("ARCANA",1);dt("MINOR_ARCANA",1,{default:1});dt("LIGHTSPEED",1,{timeout:15});dt("THE_BALANCE",1,{timeout:15});dt("THE_ARROW",1,{timeout:15});dt("THE_SPIRE",1,{timeout:30});dt("THE_SPEAR",1,{timeout:15});dt("THE_BOLE",1,{timeout:15});dt("THE_EWER",1,{timeout:15});dt("ASPECTED_BENEFIC",1,{timeout:15});dt("ASPECTED_HELIOS",1,{timeout:15});dt("SYNASTRY",1,{timeout:20});dt("DIVINATION",1,{timeout:20});dt("DIVINING",1,{timeout:30,warnOnTimeout:!0});dt("COLLECTIVE_UNCONSCIOUS",1,{timeout:18});dt("COLLECTIVE_UNCONSCIOUS_MIT",1,{timeout:10});dt("WHEEL_OF_FORTUNE",1,{timeout:15});dt("OPPOSITION",1,{timeout:15});dt("EARTHLY_DOMINANCE",1,{timeout:10});dt("GIANT_DOMINANCE",1,{timeout:10});dt("COMBUST_II",1,{timeout:30});dt("COMBUST_III",1,{timeout:30});dt("INTERSECTION",1,{timeout:30});dt("NEUTRAL_SECT",1,{timeout:20});dt("NEUTRAL_SECT_SHIELD",1,{timeout:30});dt("HOROSCOPE",1,{timeout:10});dt("HOROSCOPE_HELIOS",1,{timeout:30});dt("SUNTOUCHED",1,{timeout:30});dt("EXALTATION",1,{timeout:8});dt("MACROCOSMOS",1,{timeout:15});dt("HELIOS_CONJUNCTION",1,{timeout:15});dt("SUN_SIGN",1,{timeout:15});dt("ARCANA_1",1,{default:1});dt("ARCANA_2",1,{default:1});dt("ARCANA_3",1,{default:1});dt("NEXT_DRAW",1);class mF extends tn{constructor(t){super(t);const n=this.hasTraitUnlocked("ENHANCED_ESSENTIAL_DIGNITY_II")?3:this.hasTraitUnlocked("ENHANCED_ESSENTIAL_DIGNITY")?2:1,a=this.hasTraitUnlocked("ENHANCED_CELESTIAL_INTERSECTION")?2:1;this.cooldowns.set(new ze("cd_ESSENTIAL_DIGNITY",40,n,n)),this.cooldowns.set(new ze("cd_CELESTIAL_INTERSECTION",30,a,a)),this.cooldowns.set(new ze("cd_SWIFTCAST",this.hasTraitUnlocked("ENHANCED_SWIFTCAST")?40:60,1,1)),this.registerRecurringEvents([{reportName:N({en:"Combust DoT",zh:"DoT"}),groupedEffects:[{effectName:"COMBUST_II",appliedBy:["COMBUST_II"]},{effectName:"COMBUST_III",appliedBy:["COMBUST_III"]}]},{isHealing:!0,groupedEffects:[{effectName:"WHEEL_OF_FORTUNE",appliedBy:["COLLECTIVE_UNCONSCIOUS"]}]},{isHealing:!0,groupedEffects:[{effectName:"OPPOSITION",appliedBy:["CELESTIAL_OPPOSITION"]}]},{isHealing:!0,groupedEffects:[{effectName:"ASPECTED_BENEFIC",appliedBy:["ASPECTED_BENEFIC"]}]},{isHealing:!0,groupedEffects:[{effectName:"ASPECTED_HELIOS",appliedBy:["ASPECTED_HELIOS"]},{effectName:"HELIOS_CONJUNCTION",appliedBy:["HELIOS_CONJUNCTION"]}]}])}drawnAstral(){return!this.hasResourceAvailable("NEXT_DRAW")}cancelChanneledSkills(){this.tryConsumeResource("COLLECTIVE_UNCONSCIOUS")}jobSpecificAddHealingBuffCovers(t,n){n.cdName==="cd_GCD"&&this.hasResourceAvailable("NEUTRAL_SECT")&&t.addBuff(U.NeutralSect),n.cdName==="cd_GCD"&&!n.aoeHeal&&this.hasResourceAvailable("SYNASTRY")&&t.addBuff(U.Synastry),this.hasResourceAvailable("THE_ARROW")&&t.addBuff(U.TheArrow)}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("DIVINATION")&&t.addBuff(U.Divination)}get statusPropsGenerator(){return new EF(this)}}const vi=(e,t,n)=>{const a=c=>{if(!n.healingPotency)return[];const d=[];return c.hasResourceAvailable("SYNASTRY")&&!n.aoeHeal&&d.push($.Synastry),c.hasResourceAvailable("NEUTRAL_SECT")&&d.push($.NeutralSect),c.hasResourceAvailable("THE_ARROW")&&d.push($.TheArrow),d},s=n.baseCastTime??0;return oa("AST",e,t,{...n,jobHealingPotencyModifiers:a,jobPotencyModifiers:c=>c.hasResourceAvailable("DIVINATION")?[$.Divination]:[],castTime:c=>Math.max(0,c.config.adjustedCastTime(c.hasResourceAvailable("LIGHTSPEED")?s-2.5:s)),recastTime:c=>c.config.adjustedGCD(2.5),isInstantFn:c=>!n.baseCastTime||c.hasResourceAvailable("SWIFTCAST"),onConfirm:Pe(s?c=>c.tryConsumeResource("SWIFTCAST"):void 0,n.onConfirm)})},Mi=(e,t,n,a)=>st("AST",e,t,n,{...a,jobHealingPotencyModifiers:a.healingPotency?s=>{const c=[];return s.hasResourceAvailable("THE_ARROW")&&c.push($.TheArrow),e==="STELLAR_DETONATION"&&c.push($.AstPet),c}:void 0,jobPotencyModifiers:s=>{const c=[];return s.hasResourceAvailable("DIVINATION")&&c.push($.Divination),e==="STELLAR_DETONATION"&&c.push($.AstPet),c}}),sr=(e,t,n,a)=>Ze("AST",e,t,n,{...a,jobHealingPotencyModifiers:s=>a.healingPotency&&s.hasResourceAvailable("THE_ARROW")?[$.TheArrow]:[],jobPotencyModifiers:a.potency?s=>s.hasResourceAvailable("DIVINATION")?[$.Divination]:[]:void 0});vi("MALEFIC_III",64,{autoUpgrade:{otherSkill:"MALEFIC_IV",trait:"MALEFIC_MASTERY_III"},baseCastTime:1.5,applicationDelay:1.07,potency:190,manaCost:400});vi("MALEFIC_IV",72,{autoDowngrade:{otherSkill:"MALEFIC_III",trait:"MALEFIC_MASTERY_III"},autoUpgrade:{otherSkill:"FALL_MALEFIC",trait:"MALEFIC_MASTERY_IV"},baseCastTime:1.5,applicationDelay:1.07,potency:230,manaCost:400});vi("FALL_MALEFIC",82,{autoDowngrade:{otherSkill:"MALEFIC_IV",trait:"MALEFIC_MASTERY_IV"},baseCastTime:1.5,applicationDelay:1.07,potency:[["NEVER",250],["MAGICK_MASTERY_HEALER",270]],manaCost:400});vi("COMBUST_II",46,{autoUpgrade:{otherSkill:"COMBUST_III",trait:"COMBUST_MASTERY_II"},applicationDelay:.62,manaCost:400,drawsAggro:!0,onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"COMBUST_II",skillName:"COMBUST_II",tickPotency:60,speedStat:"sps"})},onApplication:(e,t)=>e.applyDoT("COMBUST_II",t)});vi("COMBUST_III",72,{autoDowngrade:{otherSkill:"COMBUST_II",trait:"COMBUST_MASTERY_II"},applicationDelay:.62,manaCost:400,drawsAggro:!0,onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"COMBUST_III",skillName:"COMBUST_III",tickPotency:e.hasTraitUnlocked("MAGICK_MASTERY_HEALER")?70:65,speedStat:"sps"})},onApplication:(e,t)=>e.applyDoT("COMBUST_III",t)});vi("GRAVITY",45,{autoUpgrade:{otherSkill:"GRAVITY_II",trait:"GRAVITY_MASTERY"},baseCastTime:1.5,applicationDelay:1.16,potency:120,falloff:0,manaCost:400});vi("GRAVITY_II",82,{autoDowngrade:{otherSkill:"GRAVITY",trait:"GRAVITY_MASTERY"},baseCastTime:1.5,applicationDelay:1.16,potency:[["NEVER",130],["MAGICK_MASTERY_HEALER",140]],falloff:0,manaCost:400});vi("MACROCOSMOS",90,{applicationDelay:.75,secondaryCooldown:{cdName:"cd_MACROCOSMOS",cooldown:180,maxCharges:1},potency:[["NEVER",250],["MAGICK_MASTERY_HEALER",270]],falloff:.4,manaCost:600,replaceIf:[{newSkill:"MICROCOSMOS",condition:e=>e.hasResourceAvailable("MACROCOSMOS")}],onConfirm:e=>e.gainStatus("MACROCOSMOS")});Mi("MICROCOSMOS",90,"cd_MICROCOSMOS",{startOnHotbar:!1,applicationDelay:.045,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("MACROCOSMOS"),onConfirm:e=>e.tryConsumeResource("MACROCOSMOS")});vi("ASPECTED_BENEFIC",34,{applicationDelay:.98,healingPotency:[["NEVER",200],["ENHANCED_HEALING_MAGIC",250]],manaCost:400,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"ASPECTED_BENEFIC",effectName:"ASPECTED_BENEFIC",speedStat:"sps",tickPotency:e.hasTraitUnlocked("ENHANCED_HEALING_MAGIC")?250:200}),e.hasResourceAvailable("NEUTRAL_SECT")&&e.gainStatus("NEUTRAL_SECT_SHIELD")},onApplication:(e,t)=>{e.applyHoT("ASPECTED_BENEFIC",t),e.gainStatus("ASPECTED_BENEFIC")}});vi("BENEFIC",2,{baseCastTime:1.5,applicationDelay:.98,healingPotency:[["NEVER",450],["ENHANCED_HEALING_MAGIC",500]],manaCost:400});vi("BENEFIC_II",26,{baseCastTime:1.5,applicationDelay:1.07,healingPotency:[["NEVER",700],["ENHANCED_HEALING_MAGIC",800]],manaCost:700});vi("ASPECTED_HELIOS",40,{autoUpgrade:{otherSkill:"HELIOS_CONJUNCTION",trait:"ASPECTED_HELIOS_MASTERY"},baseCastTime:1.5,applicationDelay:1.07,healingPotency:[["NEVER",200],["ENHANCED_HEALING_MAGIC",250]],aoeHeal:!0,manaCost:800,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"ASPECTED_HELIOS",effectName:"ASPECTED_HELIOS",speedStat:"sps",tickPotency:e.hasTraitUnlocked("ENHANCED_HEALING_MAGIC")?150:100}),e.tryConsumeResource("HOROSCOPE")&&e.gainStatus("HOROSCOPE_HELIOS"),e.hasResourceAvailable("NEUTRAL_SECT")&&e.gainStatus("NEUTRAL_SECT_SHIELD")},onApplication:(e,t)=>{e.applyHoT("ASPECTED_HELIOS",t),e.gainStatus("ASPECTED_HELIOS")}});vi("HELIOS_CONJUNCTION",96,{autoDowngrade:{otherSkill:"ASPECTED_HELIOS",trait:"ASPECTED_HELIOS_MASTERY"},baseCastTime:1.5,applicationDelay:1.07,healingPotency:250,aoeHeal:!0,manaCost:800,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"HELIOS_CONJUNCTION",effectName:"HELIOS_CONJUNCTION",speedStat:"sps",tickPotency:175}),e.tryConsumeResource("HOROSCOPE")&&e.gainStatus("HOROSCOPE_HELIOS"),e.hasResourceAvailable("NEUTRAL_SECT")&&e.gainStatus("NEUTRAL_SECT_SHIELD")},onApplication:(e,t)=>{e.applyHoT("HELIOS_CONJUNCTION",t),e.gainStatus("HELIOS_CONJUNCTION")}});vi("HELIOS",10,{baseCastTime:1.5,applicationDelay:1.07,healingPotency:[["NEVER",300],["ENHANCED_HEALING_MAGIC",400]],aoeHeal:!0,manaCost:700,onConfirm:e=>{e.tryConsumeResource("HOROSCOPE")&&e.gainStatus("HOROSCOPE_HELIOS")}});vi("ASCEND",12,{baseCastTime:8,applicationDelay:1.07,manaCost:2400});const Dd=e=>e.drawnAstral(),yd=e=>!e.drawnAstral(),sy=e=>{(e.hasResourceAvailable("ARCANA_1")||e.drawnAstral()&&e.hasResourceAvailable("MINOR_ARCANA"))&&p.reportWarning({kind:"custom",en:"damage card overwritten!",zh:""}),e.resources.get("NEXT_DRAW").gainWrapping(1),["MINOR_ARCANA","ARCANA_1","ARCANA_2","ARCANA_3"].forEach(t=>e.resources.get(t).gain(1))},ry=e=>e.resources.get("MANA").gain(2e3);Mi("ASTRAL_DRAW",30,"cd_ASTRAL_DRAW",{replaceIf:[{newSkill:"UMBRAL_DRAW",condition:Dd}],applicationDelay:0,cooldown:55,validateAttempt:yd,onConfirm:sy,onApplication:ry});Mi("UMBRAL_DRAW",30,"cd_ASTRAL_DRAW",{startOnHotbar:!1,replaceIf:[{newSkill:"ASTRAL_DRAW",condition:yd}],applicationDelay:0,cooldown:55,validateAttempt:Dd,onConfirm:sy,onApplication:ry});const Eg=(e,t,n)=>{console.assert(n.length===3);const a=[{newSkill:n[0],condition:s=>!s.hasResourceAvailable(t)},{newSkill:n[1],condition:s=>Dd(s)&&s.hasResourceAvailable(t)},{newSkill:n[2],condition:s=>yd(s)&&s.hasResourceAvailable(t)}];a.forEach(({newSkill:s,condition:c},d)=>{const f=a.slice();f.splice(d,1),Mi(s,30,e,{startOnHotbar:d===0,replaceIf:f,applicationDelay:.62,cooldown:1,validateAttempt:d===0?()=>!1:c,onConfirm:d!==0?h=>h.tryConsumeResource(t):void 0,onApplication:d!==0?h=>h.gainStatus(s):void 0})})};Eg("cd_PLAY_I","ARCANA_1",["PLAY_I","THE_BALANCE","THE_SPEAR"]);Eg("cd_PLAY_II","ARCANA_2",["PLAY_II","THE_ARROW","THE_BOLE"]);Eg("cd_PLAY_III","ARCANA_3",["PLAY_III","THE_SPIRE","THE_EWER"]);Mi("MINOR_ARCANA",70,"cd_MINOR_ARCANA",{applicationDelay:0,replaceIf:[{newSkill:"LORD_OF_CROWNS",condition:e=>Dd(e)&&e.hasResourceAvailable("MINOR_ARCANA")},{newSkill:"LADY_OF_CROWNS",condition:e=>yd(e)&&e.hasResourceAvailable("MINOR_ARCANA")}],cooldown:1,validateAttempt:()=>!1});Mi("LORD_OF_CROWNS",70,"cd_MINOR_ARCANA",{startOnHotbar:!1,replaceIf:[{newSkill:"MINOR_ARCANA",condition:e=>!e.hasResourceAvailable("MINOR_ARCANA")},{newSkill:"LADY_OF_CROWNS",condition:e=>yd(e)&&e.hasResourceAvailable("MINOR_ARCANA")}],applicationDelay:.62,cooldown:1,potency:400,falloff:0,onConfirm:e=>e.tryConsumeResource("MINOR_ARCANA")});Mi("LADY_OF_CROWNS",70,"cd_MINOR_ARCANA",{startOnHotbar:!1,replaceIf:[{newSkill:"MINOR_ARCANA",condition:e=>!e.hasResourceAvailable("MINOR_ARCANA")},{newSkill:"LORD_OF_CROWNS",condition:e=>Dd(e)&&e.hasResourceAvailable("MINOR_ARCANA")}],applicationDelay:.62,cooldown:1,healingPotency:400,aoeHeal:!0,onConfirm:e=>e.tryConsumeResource("MINOR_ARCANA")});sr("LIGHTSPEED",6,"cd_LIGHTSPEED",{rscType:"LIGHTSPEED",applicationDelay:0,cooldown:60,maxCharges:2});const cy=437,uy=1015;Mi("EARTHLY_STAR",62,"cd_EARTHLY_STAR",{applicationDelay:0,cooldown:60,falloff:0,savesTargets:!0,replaceIf:[{newSkill:"STELLAR_DETONATION",condition:e=>e.hasResourceAvailable("EARTHLY_DOMINANCE")||e.hasResourceAvailable("GIANT_DOMINANCE")}],onConfirm:(e,t)=>{e.gainStatus("EARTHLY_DOMINANCE"),e.resources.addResourceEvent({rscType:"EARTHLY_DOMINANCE",name:"expand earthly star",delay:10,fnOnRsc:()=>{e.gainStatus("GIANT_DOMINANCE"),e.resources.addResourceEvent({rscType:"GIANT_DOMINANCE",name:"auto-detonate earthly star",delay:10,fnOnRsc:()=>{const n=new sn({config:e.config,sourceTime:e.getDisplayTime(),sourceSkill:"STELLAR_DETONATION",aspect:Ne.Other,basePotency:cy,snapshotTime:e.getDisplayTime(),description:"",targetList:t.targetList,falloff:0});e.hasResourceAvailable("TINCTURE")&&n.addModifiers($.Tincture),e.hasResourceAvailable("DIVINATION")&&n.addModifiers($.Divination),n.addModifiers($.AstPet),t.addPotency(n);const a=new sn({config:e.config,sourceTime:e.getDisplayTime(),sourceSkill:"STELLAR_DETONATION",aspect:Ne.Other,basePotency:uy,snapshotTime:e.getDisplayTime(),description:"",healTargetCount:t.healTargetCount,falloff:0});e.hasResourceAvailable("THE_ARROW"),t.addHealingPotency(a),p.resolvePotency(n),p.resolveHealingPotency(a)}})}})}});Mi("STELLAR_DETONATION",62,"cd_STELLAR_DETONATION",{startOnHotbar:!1,applicationDelay:.53,cooldown:3,potency:e=>e.hasResourceAvailable("GIANT_DOMINANCE")?cy:290,falloff:0,healingPotency:e=>e.hasResourceAvailable("GIANT_DOMINANCE")?uy:762,aoeHeal:!0,validateAttempt:e=>e.hasResourceAvailable("EARTHLY_DOMINANCE")||e.hasResourceAvailable("GIANT_DOMINANCE"),onConfirm:e=>{e.tryConsumeResource("EARTHLY_DOMINANCE"),e.tryConsumeResource("GIANT_DOMINANCE")}});sr("DIVINATION",50,"cd_DIVINATION",{rscType:"DIVINATION",applicationDelay:.62,cooldown:120,replaceIf:[{newSkill:"ORACLE",condition:e=>e.hasResourceAvailable("DIVINING")}],onConfirm:e=>e.gainStatus("DIVINING")});Mi("ORACLE",92,"cd_ORACLE",{startOnHotbar:!1,applicationDelay:1.74,cooldown:1,potency:860,falloff:.5,highlightIf:e=>e.hasResourceAvailable("DIVINING"),validateAttempt:e=>e.hasResourceAvailable("DIVINING"),onConfirm:e=>e.tryConsumeResource("DIVINING")});Mi("ESSENTIAL_DIGNITY",15,"cd_ESSENTIAL_DIGNITY",{applicationDelay:.62,cooldown:40,maxCharges:3,healingPotency:400});sr("SYNASTRY",50,"cd_SYNASTRY",{rscType:"SYNASTRY",applicationDelay:.62,cooldown:120});sr("EXALTATION",86,"cd_EXALTATION",{rscType:"EXALTATION",applicationDelay:.71,cooldown:60});Mi("COLLECTIVE_UNCONSCIOUS",58,"cd_COLLECTIVE_UNCONSCIOUS",{applicationDelay:.42,cooldown:60,onConfirm:(e,t)=>{e.gainStatus("COLLECTIVE_UNCONSCIOUS"),e.gainStatus("COLLECTIVE_UNCONSCIOUS_MIT"),e.addHoTPotencies({node:t,skillName:"COLLECTIVE_UNCONSCIOUS",effectName:"WHEEL_OF_FORTUNE",speedStat:"sps",tickPotency:100})},onApplication:e=>e.gainStatus("WHEEL_OF_FORTUNE")});Mi("CELESTIAL_OPPOSITION",60,"cd_CELESTIAL_OPPOSITION",{applicationDelay:1.07,cooldown:60,healingPotency:200,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"CELESTIAL_OPPOSITION",effectName:"OPPOSITION",speedStat:"sps",tickPotency:100})},onApplication:e=>e.gainStatus("OPPOSITION")});Mi("CELESTIAL_INTERSECTION",74,"cd_CELESTIAL_INTERSECTION",{applicationDelay:0,cooldown:30,maxCharges:1,healingPotency:200,aoeHeal:!0});sr("HOROSCOPE",76,"cd_HOROSCOPE",{rscType:"HOROSCOPE",applicationDelay:0,cooldown:60,replaceIf:[{newSkill:"HOROSCOPE_RECAST",condition:e=>e.hasResourceAvailable("HOROSCOPE_HELIOS")||e.hasResourceAvailable("HOROSCOPE")}]});Mi("HOROSCOPE_RECAST",76,"cd_HOROSCOPE_RECAST",{startOnHotbar:!1,applicationDelay:.62,cooldown:1,healingPotency:e=>e.hasResourceAvailable("HOROSCOPE_HELIOS")?400:200,aoeHeal:!0,validateAttempt:e=>e.hasResourceAvailable("HOROSCOPE_HELIOS")||e.hasResourceAvailable("HOROSCOPE"),onConfirm:e=>e.tryConsumeResource("HOROSCOPE_HELIOS")||e.tryConsumeResource("HOROSCOPE")});sr("NEUTRAL_SECT",80,"cd_NEUTRAL_SECT",{rscType:"NEUTRAL_SECT",applicationDelay:.62,cooldown:120,replaceIf:[{newSkill:"SUN_SIGN",condition:e=>e.hasResourceAvailable("SUNTOUCHED")}],onConfirm:e=>e.gainStatus("SUNTOUCHED")});sr("SUN_SIGN",100,"cd_SUN_SIGN",{startOnHotbar:!1,rscType:"SUN_SIGN",applicationDelay:1.47,cooldown:1,highlightIf:e=>e.hasResourceAvailable("SUNTOUCHED"),validateAttempt:e=>e.hasResourceAvailable("SUNTOUCHED"),onConfirm:e=>e.tryConsumeResource("SUNTOUCHED")});Object.keys(RS).forEach(e=>qt(e,`SCH/${Ke[e].name}.png`));const dy=["BIO_II","BIOLYSIS","CHAIN_STRATAGEM","BANEFUL_IMPACTION"],AF=Object.keys(RS).filter(e=>!dy.includes(e));class RF extends en{jobSpecificOtherTargetedBuffViewProps(){return[...dy.flatMap(t=>this.makeTargetedTimers(t))]}jobSpecificSelfTargetedBuffViewProps(){return[...AF.map(t=>t==="FEY_UNION"?this.makeCommonTimerless(t):t==="SACRED_SOIL_ZONE"?this.makeToggleableTimer(t):this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){var d;const n=this.state.resources.get("SERAPH_SUMMON_TIMER"),a=n.available(1)?(d=n.pendingChange)==null?void 0:d.timeTillEvent:void 0,s=this.state.resources.get("FAERIE_GAUGE").availableAmount(),c=this.state.resources.get("AETHERFLOW").availableAmount();return[{kind:"text",name:Qe("SERAPH_SUMMON_TIMER"),text:(a==null?void 0:a.toFixed(3))??"N/A",color:a?t.sch.seraph:void 0},{kind:"bar",name:Qe("FAERIE_GAUGE"),color:t.sch.faerieGauge,progress:s/100,valueString:s.toFixed(0)},{kind:"counter",name:Qe("AETHERFLOW"),color:t.sch.aetherflow,currentStacks:c,maxStacks:3,valueString:c.toFixed(0)}]}}const Gt=(e,t,n)=>{Je("SCH",e,t,n??{})};Gt("AETHERFLOW",3,{warnOnOvercap:!0});Gt("FAERIE_GAUGE",100);Gt("BIO_II",1,{timeout:30});Gt("CATALYZE",1,{timeout:30});Gt("GALVANIZE",1,{timeout:30});Gt("WHISPERING_DAWN",1,{timeout:21});Gt("ANGELS_WHISPER",1,{timeout:21});Gt("FEY_ILLUMINATION",1,{timeout:20});Gt("SERAPHIC_ILLUMINATION",1,{timeout:20});Gt("SACRED_SOIL_ZONE",1,{timeout:15});Gt("SACRED_SOIL_MIT",1,{timeout:4.96});Gt("EMERGENCY_TACTICS",1,{timeout:15});Gt("DISSIPATION",1,{timeout:30});Gt("EXCOGITATION",1,{timeout:45});Gt("CHAIN_STRATAGEM",1,{timeout:20});Gt("IMPACT_IMMINENT",1,{timeout:30,warnOnTimeout:!0});Gt("BIOLYSIS",1,{timeout:30});Gt("RECITATION",1,{timeout:15});Gt("FEY_UNION",1);Gt("SERAPHIC_VEIL",1,{timeout:30});Gt("PROTRACTION",1,{timeout:10});Gt("EXPEDIENCE",1,{timeout:10});Gt("DESPERATE_MEASURES",1,{timeout:20});Gt("BANEFUL_IMPACTION",1,{timeout:15});Gt("SERAPHISM",1,{timeout:20});Gt("SERAPHISM_REGEN",1,{timeout:5});Gt("SERAPH_SUMMON_TIMER",1,{timeout:22});const vd=.09,Md=new Map([["FEY_BLESSING",.667],["WHISPERING_DAWN",1.156],["CONSOLATION",.889],["ANGELS_WHISPER",1.029],["AETHERPACT",.668],["FEY_ILLUMINATION",1.205]]);class TF extends tn{constructor(n){super(n);re(this,"nextEstimatedPetApplication");this.nextEstimatedPetApplication=void 0;const a=this.hasTraitUnlocked("ENHANCED_DEPLOYMENT_TACTICS")?90:120,s=this.hasTraitUnlocked("ENHANCED_RECITATION")?60:90;this.cooldowns.set(new ze("cd_DEPLOYMENT_TACTICS",a,1,1)),this.cooldowns.set(new ze("cd_RECITATION",s,1,1)),this.cooldowns.set(new ze("cd_SWIFTCAST",this.hasTraitUnlocked("ENHANCED_SWIFTCAST")?40:60,1,1)),this.registerRecurringEvents([{reportName:N({en:"Bio/Biolysis DoT",zh:"DoT"}),groupedEffects:[{effectName:"BIO_II",appliedBy:["BIO_II"]},{effectName:"BIOLYSIS",appliedBy:["BIOLYSIS"]}]},{groupedEffects:[{effectName:"BANEFUL_IMPACTION",appliedBy:["BANEFUL_IMPACTION"]}]},{isHealing:!0,groupedEffects:[{effectName:"WHISPERING_DAWN",appliedBy:["WHISPERING_DAWN"]},{effectName:"ANGELS_WHISPER",appliedBy:["WHISPERING_DAWN"]}]},{isHealing:!0,groupedEffects:[{effectName:"SACRED_SOIL_MIT",appliedBy:["SACRED_SOIL"],isGroundTargeted:!0}]},{isHealing:!0,groupedEffects:[{effectName:"SERAPHISM_REGEN",appliedBy:["SERAPHISM"]}]}])}jobSpecificAddHealingBuffCovers(n,a){a.cdName==="cd_GCD"&&((this.hasResourceAvailable("FEY_ILLUMINATION")||this.hasResourceAvailable("SERAPHIC_ILLUMINATION"))&&n.addBuff(U.FeyIllumination),this.hasResourceAvailable("DISSIPATION")&&n.addBuff(U.Dissipation)),this.hasResourceAvailable("PROTRACTION")&&n.addBuff(U.Protraction);const s=["ADLOQUIUM","SUCCOR","CONCITATION","EXCOGITATION","INDOMITABILITY"];this.hasResourceAvailable("RECITATION")&&s.includes(a.name)&&n.addBuff(U.Recitation)}jobSpecificAddDamageBuffCovers(n,a){n.targetList.some(s=>this.hasDebuffActive("CHAIN_STRATAGEM",s))&&n.addBuff(U.ChainStratagem)}jobSpecificRegisterRecurringEvents(){const n=()=>new xe("sch special hot ticks",3,()=>{this.hasResourceAvailable("FEY_UNION")&&this.resources.get("FAERIE_GAUGE").available(10)&&this.resources.get("FAERIE_GAUGE").consume(10),this.resources.get("FAERIE_GAUGE").available(10)||this.tryConsumeResource("FEY_UNION"),this.hasResourceAvailable("SACRED_SOIL_ZONE")&&this.gainStatus("SACRED_SOIL_MIT"),this.hasResourceAvailable("SERAPHISM")&&this.gainStatus("SERAPHISM_REGEN"),this.addEvent(n())});this.addEvent(new xe("begin sch special hot ticks",this.hotTickOffset,()=>this.addEvent(n())))}makePetPotency(n,a,s,c){const d=new sn({config:this.config,sourceTime:s,sourceSkill:a,aspect:Ne.Other,basePotency:c,snapshotTime:this.getDisplayTime(),description:"",healTargetCount:n,falloff:void 0});return d.addModifiers($.SchPet),d}queuePetAction(n,a,s,c,d,f){var R;const h=this.getDisplayTime();this.nextEstimatedPetApplication=h+c+d;const m=(R=this.resources.get("SERAPH_SUMMON_TIMER").pendingChange)==null?void 0:R.timeTillEvent;m!==void 0&&this.nextEstimatedPetApplication>m+h&&p.reportWarning({kind:"custom",en:`${aa(a)} is likely to ghost when seraph leaves!`}),this.addEvent(new xe(s+" pet snapshot",c,()=>{const T=f(this);this.addEvent(new xe(s+" application",d,()=>{T(this)}))}))}warnLastPetGhost(){this.nextEstimatedPetApplication!==void 0&&this.nextEstimatedPetApplication>this.getDisplayTime()&&p.reportWarning({kind:"custom",en:"previous pet command is likely to ghost!"})}hasRealFairy(){return!this.hasResourceAvailable("DISSIPATION")&&!this.hasResourceAvailable("SERAPH_SUMMON_TIMER")}maybeChainModifier(n){const a=new Map;return n.targetList.forEach(s=>{this.hasDebuffActive("CHAIN_STRATAGEM",s)&&a.set(s,[$.ChainStrat])}),a}maybeGainFaerieGauge(){this.hasResourceAvailable("DISSIPATION")||this.resources.get("FAERIE_GAUGE").gain(10)}addHealingMagicPotencyModifiers(n){(this.hasResourceAvailable("FEY_ILLUMINATION")||this.hasResourceAvailable("SERAPHIC_ILLUMINATION"))&&n.push($.FeyIllum),this.hasResourceAvailable("DISSIPATION")&&n.push($.Dissipation)}addHealingActionPotencyModifiers(n){this.hasResourceAvailable("PROTRACTION")&&n.push($.Protraction)}get statusPropsGenerator(){return new RF(this)}}const Li=(e,t,n)=>oa("SCH",e,t,{...n,castTime:s=>s.config.adjustedCastTime(n.baseCastTime??0),recastTime:s=>s.config.adjustedGCD(2.5),isInstantFn:s=>!n.baseCastTime||s.hasResourceAvailable("SWIFTCAST"),jobTargetPotencyModifiers:(s,c)=>s.maybeChainModifier(c),jobHealingPotencyModifiers:s=>{if(!n.healingPotency)return[];const c=[];return s.addHealingMagicPotencyModifiers(c),s.addHealingActionPotencyModifiers(c),s.hasResourceAvailable("RECITATION")&&e!=="ACCESSION"&&e!=="MANIFESTATION"&&c.push($.AutoCrit),c},onConfirm:Pe(n.baseCastTime?s=>s.tryConsumeResource("SWIFTCAST"):void 0,n.onConfirm)}),xi=(e,t,n,a)=>st("SCH",e,t,n,{...a,jobTargetPotencyModifiers:(c,d)=>c.maybeChainModifier(d),jobHealingPotencyModifiers:c=>{if(!a.healingPotency)return[];const d=[];return c.addHealingActionPotencyModifiers(d),c.hasResourceAvailable("RECITATION")&&(e==="INDOMITABILITY"||e==="EXCOGITATION")&&d.push($.AutoCrit),d}}),rr=(e,t,n,a)=>Ze("SCH",e,t,n,a),hy=[{newSkill:"ADLOQUIUM",condition:e=>!e.hasResourceAvailable("SERAPHISM")},{newSkill:"MANIFESTATION",condition:e=>e.hasResourceAvailable("SERAPHISM")}],fy=[{newSkill:"CONCITATION",condition:e=>!e.hasResourceAvailable("SERAPHISM")},{newSkill:"ACCESSION",condition:e=>e.hasResourceAvailable("SERAPHISM")}];Li("BROIL_II",64,{autoUpgrade:{otherSkill:"BROIL_III",trait:"BROIL_MASTERY_III"},applicationDelay:.8,baseCastTime:1.5,manaCost:400,potency:240});Li("BROIL_III",72,{autoDowngrade:{otherSkill:"BROIL_II",trait:"BROIL_MASTERY_III"},autoUpgrade:{otherSkill:"BROIL_IV",trait:"BROIL_MASTERY_IV"},applicationDelay:.8,baseCastTime:1.5,manaCost:400,potency:255});Li("BROIL_IV",82,{autoDowngrade:{otherSkill:"BROIL_III",trait:"BROIL_MASTERY_IV"},applicationDelay:.8,baseCastTime:1.5,manaCost:400,potency:[["NEVER",295],["TACTICIANS_MASTERY",320]]});Li("BIO_II",26,{autoUpgrade:{otherSkill:"BIOLYSIS",trait:"CORRUPTION_MASTERY_II"},applicationDelay:1.15,baseCastTime:0,manaCost:300,drawsAggro:!0,onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"BIO_II",skillName:"BIO_II",tickPotency:40,speedStat:"sps",targetModifiers:e.maybeChainModifier(t)})},onApplication:(e,t)=>e.applyDoT("BIO_II",t)});Li("BIOLYSIS",72,{autoDowngrade:{otherSkill:"BIO_II",trait:"CORRUPTION_MASTERY_II"},applicationDelay:.67,baseCastTime:0,manaCost:300,drawsAggro:!0,onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"BIOLYSIS",skillName:"BIOLYSIS",tickPotency:e.hasTraitUnlocked("TACTICIANS_MASTERY")?85:70,speedStat:"sps",targetModifiers:e.maybeChainModifier(t)})},onApplication:(e,t)=>e.applyDoT("BIOLYSIS",t)});Li("RUIN_II",38,{applicationDelay:.94,potency:[["NEVER",200],["BROIL_MASTERY_IV",220]],baseCastTime:0,manaCost:400});Li("ART_OF_WAR",46,{autoUpgrade:{otherSkill:"ART_OF_WAR_II",trait:"ART_OF_WAR_MASTERY"},applicationDelay:.67,baseCastTime:0,manaCost:400,potency:165,falloff:0});Li("ART_OF_WAR_II",82,{autoDowngrade:{otherSkill:"ART_OF_WAR",trait:"ART_OF_WAR_MASTERY"},applicationDelay:.67,baseCastTime:0,manaCost:400,potency:180,falloff:0});xi("CHAIN_STRATAGEM",66,"cd_CHAIN_STRATAGEM",{replaceIf:[{newSkill:"BANEFUL_IMPACTION",condition:e=>e.hasResourceAvailable("IMPACT_IMMINENT")}],applicationDelay:.8,cooldown:120,onConfirm:(e,t)=>{e.hasTraitUnlocked("ENHANCED_CHAIN_STRATAGEM")&&e.gainStatus("IMPACT_IMMINENT")},onApplication:(e,t)=>e.gainDebuff("CHAIN_STRATAGEM",[t.targetList[0]])});xi("BANEFUL_IMPACTION",92,"cd_BANEFUL_IMPACTION",{startOnHotbar:!1,applicationDelay:1.29,cooldown:1,falloff:0,highlightIf:e=>e.hasResourceAvailable("IMPACT_IMMINENT"),validateAttempt:e=>e.hasResourceAvailable("IMPACT_IMMINENT"),onConfirm:(e,t)=>{e.tryConsumeResource("IMPACT_IMMINENT"),e.addDoTPotencies({node:t,effectName:"BANEFUL_IMPACTION",skillName:"BANEFUL_IMPACTION",tickPotency:140,speedStat:"sps",targetModifiers:e.maybeChainModifier(t)})},onApplication:(e,t)=>e.applyDoT("BANEFUL_IMPACTION",t)});xi("ENERGY_DRAIN",45,"cd_ENERGY_DRAIN",{applicationDelay:1.07,cooldown:1,potency:100,validateAttempt:e=>e.hasResourceAvailable("AETHERFLOW"),onConfirm:e=>{e.maybeGainFaerieGauge(),e.tryConsumeResource("AETHERFLOW")}});const SF=900,Ey=900;Li("ADLOQUIUM",30,{replaceIf:hy,applicationDelay:.98,baseCastTime:2,manaCost:e=>e.hasResourceAvailable("RECITATION")?0:SF,healingPotency:300,onConfirm:e=>{const t=e.tryConsumeResource("EMERGENCY_TACTICS");t||e.gainStatus("GALVANIZE"),(e.tryConsumeResource("RECITATION")||e.triggersEffect(e.config.critRate))&&!t&&e.gainStatus("CATALYZE")}});const my=e=>{e.tryConsumeResource("EMERGENCY_TACTICS")||e.gainStatus("GALVANIZE")};Li("SUCCOR",35,{autoUpgrade:{otherSkill:"CONCITATION",trait:"SUCCOR_MASTERY"},applicationDelay:1.12,baseCastTime:2,manaCost:e=>e.hasResourceAvailable("RECITATION")?0:Ey,healingPotency:200,onConfirm:my});Li("CONCITATION",96,{autoDowngrade:{otherSkill:"CONCITATION",trait:"SUCCOR_MASTERY"},replaceIf:fy,applicationDelay:1.12,baseCastTime:2,manaCost:e=>e.hasResourceAvailable("RECITATION")?0:Ey,healingPotency:200,onConfirm:my});Li("PHYSICK",4,{applicationDelay:1.03,healingPotency:[["NEVER",400],["ENHANCED_HEALING_MAGIC",450]],baseCastTime:1.5,manaCost:300});Li("RESURRECTION",12,{applicationDelay:.98,baseCastTime:8,manaCost:2400});xi("AETHERFLOW",45,"cd_AETHERFLOW",{applicationDelay:0,cooldown:60,requiresCombat:!0,onConfirm:e=>{e.resources.get("MANA").gain(2e3),e.resources.get("AETHERFLOW").gain(3)}});rr("DISSIPATION",60,"cd_DISSIPATION",{rscType:"DISSIPATION",applicationDelay:0,cooldown:180,requiresCombat:!0,validateAttempt:e=>!e.hasResourceAvailable("SERAPH_SUMMON_TIMER"),onConfirm:e=>{e.warnLastPetGhost(),e.resources.get("AETHERFLOW").gain(3),e.tryConsumeResource("SERAPHISM")}});xi("LUSTRATE",45,"cd_LUSTRATE",{applicationDelay:.62,cooldown:1,healingPotency:600,validateAttempt:e=>e.hasResourceAvailable("AETHERFLOW"),onConfirm:e=>{e.maybeGainFaerieGauge(),e.tryConsumeResource("AETHERFLOW")}});rr("SACRED_SOIL",50,"cd_SACRED_SOIL",{rscType:"SACRED_SOIL_ZONE",applicationDelay:.62,cooldown:30,validateAttempt:e=>e.hasResourceAvailable("AETHERFLOW"),onConfirm:(e,t)=>{e.maybeGainFaerieGauge(),e.tryConsumeResource("AETHERFLOW"),e.hasTraitUnlocked("ENHANCED_SACRED_SOIL")&&e.addHoTPotencies({node:t,skillName:"SACRED_SOIL",effectName:"SACRED_SOIL_MIT",speedStat:"sps",tickPotency:100},34.96+.62)},onApplication:(e,t)=>{e.hasTraitUnlocked("ENHANCED_SACRED_SOIL")&&(e.applyHoT("SACRED_SOIL_MIT",t,34.96),e.gainStatus("SACRED_SOIL_MIT"))}});rr("EXCOGITATION",62,"cd_EXCOGITATION",{rscType:"EXCOGITATION",applicationDelay:.8,cooldown:45,healingPotency:800,validateAttempt:e=>e.hasResourceAvailable("RECITATION")||e.hasResourceAvailable("AETHERFLOW"),onConfirm:e=>{e.maybeGainFaerieGauge(),e.tryConsumeResource("RECITATION")||e.tryConsumeResource("AETHERFLOW")}});xi("INDOMITABILITY",52,"cd_INDOMITABILITY",{applicationDelay:.62,cooldown:30,healingPotency:400,validateAttempt:e=>e.hasResourceAvailable("RECITATION")||e.hasResourceAvailable("AETHERFLOW"),onConfirm:e=>{e.maybeGainFaerieGauge(),e.tryConsumeResource("RECITATION")||e.tryConsumeResource("AETHERFLOW")}});xi("WHISPERING_DAWN",20,"cd_WHISPERING_DAWN",{applicationDelay:0,cooldown:60,validateAttempt:e=>!e.hasResourceAvailable("DISSIPATION"),onConfirm:(e,t)=>{e.tryConsumeResource("FEY_UNION");const n=e.hasResourceAvailable("SERAPH_SUMMON_TIMER")?"ANGELS_WHISPER":"WHISPERING_DAWN",a=s=>(s.addHoTPotencies({node:t,skillName:"WHISPERING_DAWN",effectName:n,speedStat:"sps",tickPotency:80}),c=>{c.applyHoT(n,t),t.getHotPotencies("WHISPERING_DAWN").forEach(d=>{d.getDisplayedModifiers().includes($.SchPet)||d.addModifiers($.SchPet)}),c.gainStatus(n)});e.queuePetAction(t,"WHISPERING_DAWN",n,vd,Md.get(n),a)}});xi("FEY_ILLUMINATION",40,"cd_FEY_ILLUMINATION",{applicationDelay:0,cooldown:120,validateAttempt:e=>!e.hasResourceAvailable("DISSIPATION"),onConfirm:(e,t)=>{e.tryConsumeResource("FEY_UNION");const n=e.hasResourceAvailable("SERAPH_SUMMON_TIMER")?"SERAPHIC_ILLUMINATION":"FEY_ILLUMINATION",a=s=>c=>c.gainStatus(n);e.queuePetAction(t,"FEY_ILLUMINATION","FEY_ILLUMINATION",vd,Md.get("FEY_ILLUMINATION"),a)}});xi("DEPLOYMENT_TACTICS",56,"cd_DEPLOYMENT_TACTICS",{applicationDelay:.89,cooldown:120});rr("EMERGENCY_TACTICS",58,"cd_EMERGENCY_TACTICS",{rscType:"EMERGENCY_TACTICS",applicationDelay:0,cooldown:15});xi("AETHERPACT",70,"cd_AETHERPACT",{replaceIf:[{newSkill:"DISSOLVE_UNION",condition:e=>e.hasResourceAvailable("FEY_UNION")}],applicationDelay:0,cooldown:3,validateAttempt:e=>e.resources.get("FAERIE_GAUGE").available(10)&&e.hasRealFairy(),onConfirm:(e,t)=>{e.gainStatus("FEY_UNION");const n=a=>s=>s.gainStatus("FEY_UNION");e.queuePetAction(t,"AETHERPACT","AETHERPACT",vd,Md.get("AETHERPACT"),n)}});xi("DISSOLVE_UNION",70,"cd_DISSOLVE_UNION",{startOnHotbar:!1,applicationDelay:0,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("FEY_UNION"),onConfirm:e=>e.tryConsumeResource("FEY_UNION")});rr("RECITATION",74,"cd_RECITATION",{rscType:"RECITATION",applicationDelay:0,cooldown:90});xi("FEY_BLESSING",76,"cd_FEY_BLESSING",{applicationDelay:0,cooldown:60,healingPotency:320,validateAttempt:e=>e.hasRealFairy(),onConfirm:(e,t)=>{e.tryConsumeResource("FEY_UNION");const n=a=>{const s=a.makePetPotency(t.healTargetCount,"FEY_BLESSING",a.getDisplayTime(),320);return a.addHealingActionPotencyModifiers(s.getDisplayedModifiers()),c=>p.resolveHealingPotency(s)};e.queuePetAction(t,"FEY_BLESSING","FEY_BLESSING",vd,Md.get("FEY_BLESSING"),n)}});xi("SUMMON_SERAPH",80,"cd_SUMMON_SERAPH",{replaceIf:[{newSkill:"CONSOLATION",condition:e=>e.hasResourceAvailable("SERAPH_SUMMON_TIMER")}],applicationDelay:0,cooldown:120,validateAttempt:e=>e.hasRealFairy(),onConfirm:e=>{e.warnLastPetGhost(),e.gainStatus("SERAPH_SUMMON_TIMER"),e.tryConsumeResource("FEY_UNION")}});xi("CONSOLATION",80,"cd_CONSOLATION",{startOnHotbar:!1,applicationDelay:0,cooldown:1,secondaryCooldown:{cdName:"cd_CONSOLATION_INTERNAL",cooldown:30,maxCharges:2},healingPotency:250,validateAttempt:e=>e.hasResourceAvailable("SERAPH_SUMMON_TIMER"),onConfirm:(e,t)=>{const n=a=>{const s=a.makePetPotency(t.healTargetCount,"CONSOLATION",a.getDisplayTime(),250);return c=>{c.gainStatus("SERAPHIC_VEIL"),p.resolveHealingPotency(s)}};e.queuePetAction(t,"CONSOLATION","CONSOLATION",vd,Md.get("CONSOLATION"),n)}});rr("PROTRACTION",86,"cd_PROTRACTION",{rscType:"PROTRACTION",applicationDelay:.76,cooldown:60});xi("EXPEDIENT",90,"cd_EXPEDIENT",{applicationDelay:0,cooldown:120,onConfirm:e=>{e.gainStatus("EXPEDIENCE"),e.gainStatus("DESPERATE_MEASURES")}});rr("SERAPHISM",100,"cd_SERAPHISM",{requiresCombat:!0,rscType:"SERAPHISM",applicationDelay:0,cooldown:180,validateAttempt:e=>!e.hasResourceAvailable("DISSIPATION"),onConfirm:(e,t)=>{const n=e.cooldowns.get("cd_EMERGENCY_TACTICS");n.restore(15),e.cooldowns.set(new ze("cd_EMERGENCY_TACTICS",1,1,1)),e.addEvent(new xe("restore etact cd",e.getStatusDuration("SERAPHISM"),()=>e.cooldowns.set(n))),e.addHoTPotencies({node:t,skillName:"SERAPHISM",effectName:"SERAPHISM_REGEN",speedStat:"sps",tickPotency:100},24.96)},onApplication:(e,t)=>{e.applyHoT("SERAPHISM_REGEN",t,24.96),e.gainStatus("SERAPHISM_REGEN")}});Li("MANIFESTATION",100,{startOnHotbar:!1,replaceIf:hy,applicationDelay:1.16,healingPotency:360,baseCastTime:0,manaCost:900,validateAttempt:e=>e.hasResourceAvailable("SERAPHISM"),onConfirm:e=>{e.tryConsumeResource("EMERGENCY_TACTICS")||(e.gainStatus("GALVANIZE"),e.triggersEffect(e.config.critRate)&&e.gainStatus("CATALYZE"))}});Li("ACCESSION",100,{startOnHotbar:!1,replaceIf:fy,applicationDelay:.98,healingPotency:240,baseCastTime:0,manaCost:900,validateAttempt:e=>e.hasResourceAvailable("SERAPHISM"),onConfirm:e=>!e.tryConsumeResource("EMERGENCY_TACTICS")&&e.gainStatus("GALVANIZE")});Object.keys(IS).forEach(e=>qt(e,`WHM/${Ke[e].name}.png`));const Ay=["AERO_II","DIA"],gF=Object.keys(IS).filter(e=>!Ay.includes(e));class IF extends en{jobSpecificOtherTargetedBuffViewProps(){return[...Ay.flatMap(t=>this.makeTargetedTimers(t))]}jobSpecificSelfTargetedBuffViewProps(){return[...gF.map(t=>this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){const n=this.state.resources,a=n.get("LILLIES"),s=n.get("LILY_TIMER").available(1)?n.timeTillReady("LILY_TIMER"):20,c=a.availableAmount(),d=n.get("BLOOD_LILY").availableAmount(),f=[{kind:"bar",name:Qe("LILY_TIMER"),color:t.whm.lily,progress:1-s/20,valueString:s.toFixed(3)},{kind:"counter",name:Qe("LILLIES"),color:t.whm.lily,currentStacks:c,maxStacks:3}];return this.state.hasTraitUnlocked("TRANSCENDENT_AFFLATUS")&&f.push({kind:"counter",name:Qe("BLOOD_LILY"),color:t.whm.blood,currentStacks:d,maxStacks:3}),f}}const pn=(e,t,n)=>{Je("WHM",e,t,n??{})};pn("LILLIES",3,{default:3});pn("LILY_TIMER",1);pn("BLOOD_LILY",3,{default:3,warnOnOvercap:!0});pn("FREECURE",1,{timeout:15});pn("PRESENCE_OF_MIND",1,{timeout:15});pn("SACRED_SIGHT",3,{timeout:30,warnOnTimeout:!0});pn("REGEN",1,{timeout:18});pn("AERO_II",1,{timeout:30});pn("MEDICA_II",1,{timeout:15});pn("ASYLUM",1,{timeout:24});pn("THIN_AIR",1,{timeout:12});pn("DIVINE_BENISON",1,{timeout:15});pn("CONFESSION",1,{timeout:10});pn("DIA",1,{timeout:30});pn("TEMPERANCE",1,{timeout:20});pn("DIVINE_GRACE",1,{timeout:30});pn("AQUAVEIL",1,{timeout:8});pn("LITURGY_OF_THE_BELL",5,{timeout:20});pn("MEDICA_III",1,{timeout:15});pn("DIVINE_CARESS",1,{timeout:10});pn("DIVINE_AURA",1,{timeout:15});class _F extends tn{constructor(t){super(t);const n=this.hasTraitUnlocked("ENHANCED_DIVINE_BENISON")?2:1,a=this.hasTraitUnlocked("ENHANCED_TETRAGRAMMATON")?2:1;this.cooldowns.set(new ze("cd_DIVINE_BENISON",30,n,n)),this.cooldowns.set(new ze("cd_TETRAGRAMMATON",60,a,a)),this.cooldowns.set(new ze("cd_SWIFTCAST",this.hasTraitUnlocked("ENHANCED_SWIFTCAST")?40:60,1,1)),this.registerRecurringEvents([{reportName:N({en:"Dia/Aero DoT",zh:"/DoT"}),groupedEffects:[{effectName:"AERO_II",appliedBy:["AERO_II"]},{effectName:"DIA",appliedBy:["DIA"]}]},{isHealing:!0,groupedEffects:[{effectName:"DIVINE_AURA",appliedBy:["DIVINE_CARESS"]}]},{isHealing:!0,groupedEffects:[{effectName:"ASYLUM",appliedBy:["ASYLUM"]}]},{isHealing:!0,groupedEffects:[{effectName:"REGEN",appliedBy:["REGEN"]}]},{isHealing:!0,groupedEffects:[{effectName:"MEDICA_II",appliedBy:["MEDICA_II"]},{effectName:"MEDICA_III",appliedBy:["MEDICA_III"]}]}])}jobSpecificRegisterRecurringEvents(){(this.isInCombat()||this.hasResourceAvailable("LILY_TIMER"))&&!this.hasResourceAvailable("LILLIES",3)&&this.startLilyTimer()}jobSpecificAddHealingBuffCovers(t,n){this.hasTraitUnlocked("ENHANCED_ASYLUM")&&this.hasResourceAvailable("ASYLUM")&&t.addBuff(U.Asylum),this.hasResourceAvailable("TEMPERANCE")&&t.addBuff(U.Temperance),n.cdName==="cd_GCD"&&n.aoeHeal&&this.hasResourceAvailable("CONFESSION")&&t.addBuff(U.Confession)}recurringLilyGain(){this.resources.addResourceEvent({rscType:"LILY_TIMER",name:"gain lily",delay:20,fnOnRsc:()=>{this.resources.get("LILLIES").gain(1),this.hasResourceAvailable("LILLIES",3)?this.tryConsumeResource("LILY_TIMER"):this.recurringLilyGain()}})}startLilyTimer(){this.hasResourceAvailable("LILY_TIMER")||this.hasResourceAvailable("LILLIES",3)||(this.resources.get("LILY_TIMER").gain(1),this.recurringLilyGain())}addHealingActionPotencyModifiers(t){this.hasTraitUnlocked("ENHANCED_ASYLUM")&&this.hasResourceAvailable("ASYLUM")&&t.push($.Asylum),this.hasResourceAvailable("TEMPERANCE")&&t.push($.Temperance)}get statusPropsGenerator(){return new IF(this)}}const Gn=(e,t,n)=>{const a=s=>{if(!n.healingPotency)return[];const c=[];return s.hasResourceAvailable("CONFESSION")&&n.aoeHeal&&c.push($.Confession),s.addHealingActionPotencyModifiers(c),c};return oa("WHM",e,t,{...n,castTime:s=>s.config.adjustedCastTime(n.baseCastTime??0,s.hasResourceAvailable("PRESENCE_OF_MIND")?20:0),recastTime:s=>s.config.adjustedGCD(2.5,s.hasResourceAvailable("PRESENCE_OF_MIND")?20:0),isInstantFn:s=>!n.baseCastTime||s.hasResourceAvailable("SWIFTCAST"),manaCost:n.manaCost?s=>s.hasResourceAvailable("THIN_AIR")?0:Ii(n.manaCost)(s):void 0,jobHealingPotencyModifiers:a,onConfirm:Pe(s=>s.tryConsumeResource("THIN_AIR"),n.baseCastTime?s=>s.tryConsumeResource("SWIFTCAST"):void 0,n.onConfirm),onApplication:Pe(n.potency||e=="AFFLATUS_SOLACE"||e=="AFFLATUS_RAPTURE"?s=>s.startLilyTimer():void 0,n.onApplication)})},cr=(e,t,n,a)=>st("WHM",e,t,n,{...a,jobHealingPotencyModifiers:c=>{if(!a.healingPotency)return[];const d=[];return a.isPetHeal&&d.push($.WhmPet),c.addHealingActionPotencyModifiers(d),d}}),as=(e,t,n,a)=>Ze("WHM",e,t,n,{...a,jobHealingPotencyModifiers:c=>{if(!a.healingPotency)return[];const d=[];return c.addHealingActionPotencyModifiers(d),d}});Gn("STONE_IV",64,{autoUpgrade:{otherSkill:"GLARE",trait:"STONE_MASTERY_IV"},applicationDelay:.8,baseCastTime:1.5,potency:260,manaCost:400});Gn("GLARE",72,{autoDowngrade:{otherSkill:"STONE_IV",trait:"STONE_MASTERY_IV"},autoUpgrade:{otherSkill:"GLARE_III",trait:"GLARE_MASTERY"},applicationDelay:1.29,baseCastTime:1.5,potency:290,manaCost:400});Gn("GLARE_III",82,{autoDowngrade:{otherSkill:"GLARE",trait:"GLARE_MASTERY"},applicationDelay:1.29,baseCastTime:1.5,potency:[["NEVER",310],["WHITE_MAGIC_MASTERY",350]],manaCost:400});Gn("AERO_II",46,{autoUpgrade:{otherSkill:"DIA",trait:"AERO_MASTERY_II"},applicationDelay:1.15,potency:50,manaCost:200,onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"AERO_II",skillName:"AERO_II",tickPotency:50,speedStat:"sps"})},onApplication:(e,t)=>e.applyDoT("AERO_II",t)});Gn("DIA",72,{autoDowngrade:{otherSkill:"AERO_II",trait:"AERO_MASTERY_II"},applicationDelay:1.29,potency:[["NEVER",65],["WHITE_MAGIC_MASTERY",85]],manaCost:400,onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"DIA",skillName:"DIA",tickPotency:e.hasTraitUnlocked("WHITE_MAGIC_MASTERY")?85:65,speedStat:"sps"})},onApplication:(e,t)=>e.applyDoT("DIA",t)});Gn("HOLY",45,{autoUpgrade:{otherSkill:"HOLY_III",trait:"HOLY_MASTERY"},applicationDelay:2.13,potency:140,baseCastTime:1.5,falloff:0,manaCost:400});Gn("HOLY_III",82,{autoDowngrade:{otherSkill:"HOLY",trait:"HOLY_MASTERY"},applicationDelay:2.13,potency:150,baseCastTime:1.5,falloff:0,manaCost:400});Gn("AFFLATUS_MISERY",74,{applicationDelay:.58,potency:[["NEVER",1240],["WHITE_MAGIC_MASTERY",1400]],falloff:.5,manaCost:0,highlightIf:e=>e.hasResourceExactly("BLOOD_LILY",3),validateAttempt:e=>e.hasResourceExactly("BLOOD_LILY",3),onConfirm:e=>e.tryConsumeResource("BLOOD_LILY",!0)});Gn("AFFLATUS_SOLACE",52,{applicationDelay:.53,healingPotency:[["NEVER",700],["ENHANCED_HEALING_MAGIC",800]],manaCost:0,validateAttempt:e=>e.hasResourceAvailable("LILLIES"),onConfirm:e=>{e.tryConsumeResource("LILLIES"),e.resources.get("BLOOD_LILY").gain(1)}});Gn("AFFLATUS_RAPTURE",76,{applicationDelay:.58,healingPotency:[["NEVER",300],["ENHANCED_HEALING_MAGIC",400]],manaCost:0,aoeHeal:!0,validateAttempt:e=>e.hasResourceAvailable("LILLIES"),onConfirm:e=>{e.tryConsumeResource("LILLIES"),e.resources.get("BLOOD_LILY").gain(1)}});Gn("REGEN",35,{applicationDelay:1.02,healingPotency:[["NEVER",200],["ENHANCED_HEALING_MAGIC",250]],manaCost:400,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"REGEN",effectName:"REGEN",speedStat:"sps",tickPotency:e.hasTraitUnlocked("ENHANCED_HEALING_MAGIC")?250:200})},onApplication:(e,t)=>{e.applyHoT("REGEN",t),e.gainStatus("REGEN")}});Gn("CURE",2,{applicationDelay:1.03,healingPotency:[["NEVER",450],["ENHANCED_HEALING_MAGIC",500]],baseCastTime:1.5,manaCost:400,onConfirm:e=>e.maybeGainProc("FREECURE",.15)});Gn("CURE_II",30,{applicationDelay:.98,healingPotency:[["NEVER",700],["ENHANCED_HEALING_MAGIC",800]],baseCastTime:2,manaCost:e=>e.hasResourceAvailable("FREECURE")?0:1e3,highlightIf:e=>e.hasResourceAvailable("FREECURE"),onConfirm:e=>e.tryConsumeResource("FREECURE")});Gn("CURE_III",40,{applicationDelay:.98,healingPotency:[["NEVER",550],["ENHANCED_HEALING_MAGIC",600]],baseCastTime:2,manaCost:1500,aoeHeal:!0});Gn("MEDICA",10,{applicationDelay:1.02,healingPotency:[["NEVER",300],["ENHANCED_HEALING_MAGIC",400]],baseCastTime:2,manaCost:900,aoeHeal:!0});Gn("MEDICA_II",50,{autoUpgrade:{otherSkill:"MEDICA_III",trait:"MEDICA_MASTERY"},applicationDelay:.84,healingPotency:[["NEVER",200],["ENHANCED_HEALING_MAGIC",250]],baseCastTime:2,manaCost:1e3,aoeHeal:!0,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"MEDICA_II",effectName:"MEDICA_II",speedStat:"sps",tickPotency:e.hasTraitUnlocked("ENHANCED_HEALING_MAGIC")?150:100})},onApplication:(e,t)=>{e.applyHoT("MEDICA_II",t),e.gainStatus("MEDICA_II")}});Gn("MEDICA_III",96,{autoDowngrade:{otherSkill:"MEDICA_II",trait:"MEDICA_MASTERY"},applicationDelay:.84,healingPotency:250,baseCastTime:2,manaCost:1e3,aoeHeal:!0,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"MEDICA_III",effectName:"MEDICA_III",speedStat:"sps",tickPotency:175})},onApplication:(e,t)=>{e.applyHoT("MEDICA_III",t),e.gainStatus("MEDICA_III")}});Gn("RAISE",12,{baseCastTime:8,manaCost:2400,applicationDelay:1.16});cr("ASSIZE",56,"cd_ASSIZE",{applicationDelay:.67,cooldown:40,potency:400,falloff:0,healingPotency:400,onApplication:e=>e.resources.get("MANA").gain(500)});as("PRESENCE_OF_MIND",30,"cd_PRESENCE_OF_MIND",{rscType:"PRESENCE_OF_MIND",applicationDelay:.53,cooldown:120,replaceIf:[{newSkill:"GLARE_IV",condition:e=>e.hasResourceAvailable("SACRED_SIGHT")}],onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_PRESENCE_OF_MIND")&&e.gainStatus("SACRED_SIGHT",3)}});Gn("GLARE_IV",92,{startOnHotbar:!1,applicationDelay:.85,potency:640,falloff:.4,manaCost:0,highlightIf:e=>e.hasResourceAvailable("SACRED_SIGHT"),validateAttempt:e=>e.hasResourceAvailable("SACRED_SIGHT"),onConfirm:e=>e.tryConsumeResource("SACRED_SIGHT")});as("THIN_AIR",58,"cd_THIN_AIR",{rscType:"THIN_AIR",applicationDelay:0,cooldown:60,maxCharges:2});cr("AETHERIAL_SHIFT",40,"cd_AETHERIAL_SHIFT",{applicationDelay:0,cooldown:60,animationLock:Jt});as("DIVINE_BENISON",66,"cd_DIVINE_BENISON",{rscType:"DIVINE_BENISON",applicationDelay:.8,cooldown:30,maxCharges:2});as("AQUAVEIL",86,"cd_AQUAVEIL",{rscType:"AQUAVEIL",applicationDelay:.62,cooldown:60});cr("TETRAGRAMMATON",60,"cd_TETRAGRAMMATON",{applicationDelay:.53,cooldown:60,maxCharges:2,healingPotency:700});cr("BENEDICTION",50,"cd_BENEDICTION",{applicationDelay:.62,cooldown:180});cr("ASYLUM",52,"cd_ASYLUM",{applicationDelay:.85,cooldown:90,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"ASYLUM",effectName:"ASYLUM",speedStat:"sps",tickPotency:100})},onApplication:e=>e.gainStatus("ASYLUM")});as("PLENARY_INDULGENCE",70,"cd_PLENARY_INDULGENCE",{rscType:"CONFESSION",applicationDelay:.8,cooldown:60});as("TEMPERANCE",80,"cd_TEMPERANCE",{rscType:"TEMPERANCE",applicationDelay:.62,cooldown:120,replaceIf:[{newSkill:"DIVINE_CARESS",condition:e=>e.hasResourceAvailable("DIVINE_GRACE")}],onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_TEMPERANCE")&&e.gainStatus("DIVINE_GRACE")}});as("LITURGY_OF_THE_BELL",90,"cd_LITURGY_OF_THE_BELL",{rscType:"LITURGY_OF_THE_BELL",applicationDelay:0,cooldown:180,replaceIf:[{newSkill:"LITURGY_POP",condition:e=>e.hasResourceAvailable("LITURGY_OF_THE_BELL")}]});cr("LITURGY_TRIGGER",90,"cd_LITURGY_TRIGGER",{applicationDelay:0,cooldown:1,isPetHeal:!0,healingPotency:425,animationLock:si,validateAttempt:e=>e.hasResourceAvailable("LITURGY_OF_THE_BELL"),highlightIf:e=>e.hasResourceAvailable("LITURGY_OF_THE_BELL"),onConfirm:e=>e.tryConsumeResource("LITURGY_OF_THE_BELL")});cr("LITURGY_POP",90,"cd_LITURGY_POP",{startOnHotbar:!1,applicationDelay:0,cooldown:1,isPetHeal:!0,healingPotency:e=>212*e.resources.get("LITURGY_OF_THE_BELL").availableAmount(),validateAttempt:e=>e.hasResourceAvailable("LITURGY_OF_THE_BELL"),highlightIf:e=>e.hasResourceAvailable("LITURGY_OF_THE_BELL"),onConfirm:e=>e.tryConsumeResource("LITURGY_OF_THE_BELL",!0)});as("DIVINE_CARESS",100,"cd_DIVINE_CARESS",{startOnHotbar:!1,rscType:"DIVINE_CARESS",applicationDelay:0,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("DIVINE_GRACE"),highlightIf:e=>e.hasResourceAvailable("DIVINE_GRACE"),onConfirm:e=>e.tryConsumeResource("DIVINE_GRACE"),onApplication:e=>{e.resources.addResourceEvent({rscType:"DIVINE_CARESS",name:"trigger divine aura on divine caress expiry",delay:10,fnOnRsc:()=>e.gainStatus("DIVINE_AURA")})}});Object.keys(uS).forEach(e=>qt(e,`NIN/${Ke[e].name}.png`));const Ry=["DOKUMORI","TRICK_ATTACK","KUNAIS_BANE"],pF=Object.keys(uS).filter(e=>!Ry.includes(e));class NF extends en{jobSpecificOtherTargetedBuffViewProps(){return[...Ry.flatMap(t=>this.makeTargetedTimers(t))]}jobSpecificSelfTargetedBuffViewProps(){return pF.map(t=>t==="HIDDEN"?this.makeCommonTimerless(t):this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){var m,R;const n=this.state.resources,a=n.get("NIN_COMBO_TRACKER"),s=n.get("NIN_AOE_COMBO_TRACKER"),c=n.get("KAZEMATOI").availableAmount(),d=n.get("NINKI").availableAmount(),f=a.available(1)?(m=a.pendingChange)==null?void 0:m.timeTillEvent:s.available(1)?(R=s.pendingChange)==null?void 0:R.timeTillEvent:void 0;return[{kind:"bar",name:N({en:"Combo Timer",zh:""}),color:t.nin.ninComboTimer,progress:f?f/30:0,valueString:(f==null?void 0:f.toFixed(3))??"N/A"},{kind:"counter",name:Qe("KAZEMATOI"),color:t.nin.kazematoi,currentStacks:c,maxStacks:5},{kind:"bar",name:Qe("NINKI"),color:t.nin.ninki,progress:d/100,valueString:d.toFixed(0)}]}}const Rn=(e,t,n)=>{Je("NIN",e,t,n??{})};Rn("KAZEMATOI",5,{warnOnOvercap:!0});Rn("NINKI",100,{warnOnOvercap:!0});Rn("SHADE_SHIFT",1,{timeout:20});Rn("MUDRA",1,{timeout:6});Rn("HIDDEN",1);Rn("TRICK_ATTACK",1,{timeout:15.77});Rn("KASSATSU",1,{timeout:15,warnOnTimeout:!0});Rn("DOKUMORI",1,{timeout:21});Rn("TENRI_JINDO_READY",1,{timeout:30,warnOnTimeout:!0});Rn("TEN_CHI_JIN",1,{timeout:6});Rn("MEISUI",1,{timeout:30});Rn("SHADOW_WALKER",1,{timeout:20});Rn("BUNSHIN",5,{timeout:30,warnOnTimeout:!0});Rn("PHANTOM_KAMAITACHI_READY",1,{timeout:45,warnOnTimeout:!0});Rn("RAIJU_READY",3,{timeout:30,warnOnTimeout:!0});Rn("KUNAIS_BANE",1,{timeout:16.25});Rn("HIGI",1,{timeout:30});Rn("DOTON",1,{timeout:18});Rn("NIN_COMBO_TRACKER",2,{timeout:30});Rn("NIN_AOE_COMBO_TRACKER",1,{timeout:30});Rn("MUDRA_TRACKER",1e4);Rn("BUNNY",1);const CF=["SPINNING_EDGE","GUST_SLASH","AEOLIAN_EDGE","ARMOR_CRUSH","THROWING_DAGGER","DEATH_BLOSSOM","HAKKE_MUJINSATSU","FORKED_RAIJU","FLEETING_RAIJU"];class bF extends tn{constructor(t){super(t);const n=this.hasTraitUnlocked("ENHANCED_SHUKUCHI_II")?2:1;this.cooldowns.set(new ze("cd_SHUKUCHI",60,n,n)),this.registerRecurringEvents([{groupedEffects:[{effectName:"DOTON",appliedBy:["DOTON","DOTON_CHI"],isGroundTargeted:!0}]}])}jobSpecificAddDamageBuffCovers(t,n){t.targetList.forEach(a=>{this.hasDebuffActive("DOKUMORI",a)&&t.addBuff(U.Dokumori),this.hasDebuffActive("TRICK_ATTACK",a)&&t.addBuff(U.TrickAttack),this.hasDebuffActive("KUNAIS_BANE",a)&&t.addBuff(U.KunaisBane)}),this.hasResourceAvailable("BUNSHIN")&&CF.includes(n.name)&&t.addBuff(U.Bunshin)}inherentSpeedModifier(){return 15}get statusPropsGenerator(){return new NF(this)}stackRaijuReady(){this.resources.get("RAIJU_READY").gain(1),this.enqueueResourceDrop("RAIJU_READY")}gainNinki(t){this.resources.get("NINKI").gain(t)}processComboStatus(t){if(["THROWING_DAGGER","FORKED_RAIJU","FLEETING_RAIJU","PHANTOM_KAMAITACHI"].includes(t))return;let n=[this.resources.get("NIN_COMBO_TRACKER").availableAmount(),this.resources.get("NIN_AOE_COMBO_TRACKER").availableAmount()];t==="SPINNING_EDGE"?n=[1,0]:t==="GUST_SLASH"&&n[0]===1?n=[2,0]:t==="DEATH_BLOSSOM"?n=[0,1]:n=[0,0],this.setComboState("NIN_COMBO_TRACKER",n[0]),this.setComboState("NIN_AOE_COMBO_TRACKER",n[1])}parseMudraTracker(){if(this.hasResourceAvailable("BUNNY"))return;const t=this.resources.get("MUDRA_TRACKER").availableAmount();if(t===0)return[];if(t<10)return console.assert(t<4,`mudra tracker value ${t} was invalid`),[t];if(t<100)return console.assert(t%10!==0,`mudra tracker value ${t} was invalid`),[Math.floor(t/10),t%10];if(t<1e3)return[Math.floor(t/100),Math.floor(t/10)%10,t%10]}isMudraTrackerIn(t){const n=this.parseMudraTracker();return n!==void 0&&t.some(a=>n.length===a.length&&n.every((s,c)=>a[c]===s))}clearMudraInfo(){this.tryConsumeResource("MUDRA"),this.tryConsumeResource("KASSATSU"),this.resources.get("MUDRA_TRACKER").overrideCurrentValue(0),this.resources.get("BUNNY").overrideCurrentValue(0)}pushMudra(t,n){const a=this.resources.get("MUDRA_TRACKER"),s=a.availableAmount();if(s===0&&!n&&(console.assert(this.resources.get("MUDRA_TRACKER").availableAmount()===0),console.assert(this.resources.get("BUNNY").availableAmount()===0),this.gainStatus("MUDRA"),this.resources.get("MUDRA").removeTimer(),this.resources.addResourceEvent({rscType:"MUDRA",name:"clear mudra tracker/bunny",delay:jt("NIN","MUDRA").maxTimeout,fnOnRsc:()=>this.clearMudraInfo()})),s>1e3)return;const c=s*10+t;a.overrideCurrentValue(c),n&&c>100&&(this.tryConsumeResource("TEN_CHI_JIN"),this.clearMudraInfo())}}const tb=e=>!e.hasResourceAvailable("TEN_CHI_JIN"),mg=e=>{e.hasResourceAvailable("MUDRA")&&e.gainStatus("BUNNY")},Ag=e=>e===void 0?tb:t=>tb(t)&&e(t),jc=(e,t)=>{const n=new Map;return t.targetList.forEach(a=>{const s=[];e.hasDebuffActive("DOKUMORI",a)&&s.push($.Dokumori),e.hasDebuffActive("TRICK_ATTACK",a)&&s.push($.TrickAttack),e.hasDebuffActive("KUNAIS_BANE",a)&&s.push($.KunaisBane),s.length>0&&n.set(a,s)}),n},Co=(e,t,n)=>un("NIN",e,t,{...n,recastTime:a=>a.config.adjustedSksGCD(2.5,a.inherentSpeedModifier()),validateAttempt:Ag(n.validateAttempt),onConfirm:Pe(mg,(a,s)=>{var c;return(c=n.onConfirm)==null?void 0:c.call(n,a,s)},a=>{e!=="PHANTOM_KAMAITACHI"&&a.tryConsumeResource("BUNSHIN")&&a.gainNinki(5)},["THROWING_DAGGER","PHANTOM_KAMAITACHI","FORKED_RAIJU","FLEETING_RAIJU"].includes(e)?void 0:a=>a.tryConsumeResource("RAIJU_READY",!0)&&p.reportWarning({kind:"overwrite",rsc:"RAIJU_READY"}),a=>a.processComboStatus(e)),jobPotencyModifiers:a=>{var c;const s=((c=n.jobPotencyModifiers)==null?void 0:c.call(n,a))??[];return a.hasResourceAvailable("BUNSHIN")&&e!=="PHANTOM_KAMAITACHI"&&(e==="DEATH_BLOSSOM"||e==="HAKKE_MUJINSATSU"?s.push($.BunshinAOE):s.push($.BunshinST)),s},jobTargetPotencyModifiers:jc}),bo=(e,t,n,a)=>st("NIN",e,t,n,{...a,validateAttempt:Ag(a.validateAttempt),onConfirm:Pe(mg,(s,c)=>{var d;return(d=a.onConfirm)==null?void 0:d.call(a,s,c)}),jobTargetPotencyModifiers:jc}),Ld=(e,t,n,a)=>Ze("NIN",e,t,n,{...a,validateAttempt:Ag(a.validateAttempt),onConfirm:Pe(mg,(s,c)=>{var d;return(d=a.onConfirm)==null?void 0:d.call(a,s,c)})});Co("THROWING_DAGGER",15,{applicationDelay:.62,potency:[["NEVER",120],["MELEE_MASTERY_II_NIN",200]],onConfirm:e=>e.gainNinki(5),startsAuto:!1});Co("SPINNING_EDGE",1,{applicationDelay:.4,potency:[["NEVER",180],["MELEE_MASTERY_II_NIN",220],["MELEE_MASTERY_III_NIN",300]],onConfirm:e=>e.gainNinki(5)});Co("GUST_SLASH",4,{applicationDelay:.4,potency:[["NEVER",100],["MELEE_MASTERY_NIN",120],["MELEE_MASTERY_II_NIN",160],["MELEE_MASTERY_III_NIN",240]],combo:{potency:[["NEVER",260],["MELEE_MASTERY_NIN",280],["MELEE_MASTERY_II_NIN",320],["MELEE_MASTERY_III_NIN",400]],resource:"NIN_COMBO_TRACKER",resourceValue:1},highlightIf:e=>e.hasResourceExactly("NIN_COMBO_TRACKER",1),onConfirm:e=>e.hasResourceExactly("NIN_COMBO_TRACKER",1)&&e.gainNinki(5)});const Ty=e=>e.gainNinki(e.hasTraitUnlocked("SHUKIHO_III")?15:e.hasTraitUnlocked("SHUKIHO_II")?10:5);Co("AEOLIAN_EDGE",26,{applicationDelay:.54,potency:[["NEVER",100],["MELEE_MASTERY_NIN",140],["MELEE_MASTERY_III_NIN",220]],combo:{potency:[["NEVER",340],["MELEE_MASTERY_III_NIN",400]],resource:"NIN_COMBO_TRACKER",resourceValue:2},positional:{potency:[["NEVER",160],["MELEE_MASTERY_NIN",200],["MELEE_MASTERY_III_NIN",280]],comboPotency:[["NEVER",400],["MELEE_MASTERY_III_NIN",460]],location:"rear"},highlightIf:e=>e.hasResourceExactly("NIN_COMBO_TRACKER",2),onConfirm:Ty,jobPotencyModifiers:e=>e.tryConsumeResource("KAZEMATOI")?[$.Kazematoi]:[]});Co("ARMOR_CRUSH",54,{applicationDelay:.62,potency:[["NEVER",100],["MELEE_MASTERY_NIN",140],["MELEE_MASTERY_III_NIN",240]],combo:{potency:[["NEVER",320],["MELEE_MASTERY_NIN",360],["MELEE_MASTERY_III_NIN",440]],resource:"NIN_COMBO_TRACKER",resourceValue:2},positional:{potency:[["NEVER",160],["MELEE_MASTERY_NIN",200],["MELEE_MASTERY_III_NIN",300]],comboPotency:[["NEVER",380],["MELEE_MASTERY_NIN",420],["MELEE_MASTERY_III_NIN",500]],location:"flank"},highlightIf:e=>e.hasResourceExactly("NIN_COMBO_TRACKER",2),onConfirm:Pe(e=>{e.hasResourceExactly("NIN_COMBO_TRACKER",2)&&e.resources.get("KAZEMATOI").gain(2)},Ty)});Co("DEATH_BLOSSOM",38,{applicationDelay:.71,potency:100,falloff:0,onConfirm:e=>e.gainNinki(5)});Co("HAKKE_MUJINSATSU",52,{applicationDelay:.62,potency:100,combo:{potency:120,resource:"NIN_AOE_COMBO_TRACKER",resourceValue:1},falloff:0,highlightIf:e=>e.hasResourceExactly("NIN_AOE_COMBO_TRACKER",1),onConfirm:e=>e.hasResourceExactly("NIN_AOE_COMBO_TRACKER",1)&&e.gainNinki(5),jobPotencyModifiers:e=>e.hasResourceExactly("NIN_AOE_COMBO_TRACKER",1)&&e.hasResourceAvailable("DOTON")?[$.HollowNozuchi]:[]});const mc=e=>e.hasResourceAvailable("TEN_CHI_JIN")&&e.isMudraTrackerIn([[]]),Sy=e=>e.hasResourceAvailable("TEN_CHI_JIN")&&e.isMudraTrackerIn([[2],[3]]),gy=e=>e.hasResourceAvailable("TEN_CHI_JIN")&&e.isMudraTrackerIn([[1],[3]]),Iy=e=>e.hasResourceAvailable("TEN_CHI_JIN")&&e.isMudraTrackerIn([[1],[2]]),_y=e=>e.hasResourceAvailable("TEN_CHI_JIN")&&e.isMudraTrackerIn([[3,2],[2,3]]),py=e=>e.hasResourceAvailable("TEN_CHI_JIN")&&e.isMudraTrackerIn([[1,3],[3,1]]),Ny=e=>e.hasResourceAvailable("TEN_CHI_JIN")&&e.isMudraTrackerIn([[1,2],[2,1]]),Cy=[{newSkill:"TEN",condition:e=>!e.hasResourceAvailable("TEN_CHI_JIN")},{newSkill:"FUMA_SHURIKEN_TEN",condition:mc},{newSkill:"KATON_TEN",condition:Sy},{newSkill:"HUTON_TEN",condition:_y}],Rg=[{newSkill:"CHI",condition:e=>!e.hasResourceAvailable("TEN_CHI_JIN")},{newSkill:"FUMA_SHURIKEN_CHI",condition:mc},{newSkill:"RAITON_CHI",condition:gy},{newSkill:"DOTON_CHI",condition:py}],by=[{newSkill:"JIN",condition:e=>!e.hasResourceAvailable("TEN_CHI_JIN")},{newSkill:"FUMA_SHURIKEN_JIN",condition:mc},{newSkill:"HYOTON_JIN",condition:Iy},{newSkill:"SUITON_JIN",condition:Ny}],Oy=[["FUMA_SHURIKEN",30,.89,[["NEVER",450],["MELEE_MASTERY_III_NIN",500]],void 0],["KATON",35,.94,350,0],["RAITON",35,.71,[["NEVER",650],["MELEE_MASTERY_III_NIN",740]],void 0],["HYOTON",45,1.16,350,void 0],["HUTON",45,.98,240,0],["SUITON",45,.98,[["NEVER",500],["MELEE_MASTERY_III_NIN",580]],void 0],["GOKA_MEKKYAKU",76,.76,850,0],["HYOSHO_RANRYU",76,.62,1300,void 0]],OF=new Map(Oy.map(([e,t,n,a,s])=>[e,[t,n,a,s]])),DF=[["FUMA_SHURIKEN_TEN",mc],["FUMA_SHURIKEN_CHI",mc],["FUMA_SHURIKEN_JIN",mc],["KATON_TEN",Sy],["RAITON_CHI",gy],["HYOTON_JIN",Iy],["HUTON_TEN",_y],["SUITON_JIN",Ny]];DF.forEach(([e,t])=>{const[,n,a,s]=OF.get(e.substring(0,e.length-4)),c=e.substring(e.length-3);un("NIN",e,70,{startOnHotbar:!1,applicationDelay:n,recastTime:e==="HUTON_TEN"||e==="SUITON_JIN"?1.5:1,potency:a,falloff:s,replaceIf:c==="TEN"?Cy:c==="CHI"?Rg:by,validateAttempt:t,jobPotencyModifiers:f=>{const h=[];return e==="KATON"&&f.hasResourceAvailable("DOTON")&&h.push($.HollowNozuchi),h},jobTargetPotencyModifiers:jc,onConfirm:Pe(f=>f.pushMudra(c==="TEN"?1:c==="CHI"?2:3,!0),e==="RAITON_CHI"?f=>f.stackRaijuReady():e==="SUITON_JIN"||e==="HUTON_TEN"?f=>f.gainStatus("SHADOW_WALKER"):void 0),startsAuto:!1})});const Dy=(e,t)=>{e.applyDoT("DOTON",t),e.gainStatus("DOTON")};un("NIN","DOTON_CHI",70,{startOnHotbar:!1,recastTime:1.5,replaceIf:Rg,falloff:0,validateAttempt:py,jobTargetPotencyModifiers:jc,onConfirm:Pe((e,t)=>{e.addDoTPotencies({node:t,effectName:"DOTON",skillName:"DOTON",tickPotency:80,speedStat:"sks"})},e=>e.pushMudra(2,!0)),onApplication:Dy});[["TEN",30,Cy],["CHI",35,Rg],["JIN",45,by]].forEach(([e,t,n],a)=>{un("NIN",e,t,{recastTime:.5,animationLock:.5,replaceIf:n,secondaryCooldown:{cdName:"cd_MUDRA",cooldown:20,maxCharges:2},jobTargetPotencyModifiers:jc,validateAttempt:s=>!s.hasResourceAvailable("TEN_CHI_JIN"),onConfirm:s=>s.pushMudra(a+1,!1)})});const yF=e=>e.hasTraitUnlocked("ENHANCED_KASSATSU")&&e.hasResourceAvailable("KASSATSU")&&e.isMudraTrackerIn([[2,1],[3,1]]),vF=e=>e.hasTraitUnlocked("ENHANCED_KASSATSU")&&e.hasResourceAvailable("KASSATSU")&&e.isMudraTrackerIn([[1,3],[2,3]]),MF=e=>e.hasResourceAvailable("MUDRA")&&e.isMudraTrackerIn([[1],[2],[3]]),LF=e=>(!e.hasTraitUnlocked("ENHANCED_KASSATSU")||!e.hasResourceAvailable("KASSATSU"))&&e.hasResourceAvailable("MUDRA")&&e.isMudraTrackerIn([[2,1],[3,1]]),xF=e=>e.hasResourceAvailable("MUDRA")&&e.isMudraTrackerIn([[1,2],[3,2]]),HF=e=>(!e.hasTraitUnlocked("ENHANCED_KASSATSU")||!e.hasResourceAvailable("KASSATSU"))&&e.hasResourceAvailable("MUDRA")&&e.isMudraTrackerIn([[1,3],[2,3]]),kF=e=>e.hasResourceAvailable("MUDRA")&&e.isMudraTrackerIn([[3,2,1],[2,3,1]]),UF=e=>e.hasResourceAvailable("MUDRA")&&e.isMudraTrackerIn([[1,3,2],[3,1,2]]),wF=e=>e.hasResourceAvailable("MUDRA")&&e.isMudraTrackerIn([[1,2,3],[2,1,3]]),PF=e=>e.hasResourceAvailable("MUDRA")&&(e.hasResourceAvailable("BUNNY")||!e.isMudraTrackerIn([[1],[2],[3],[2,1],[3,1],[1,2],[3,2],[1,3],[2,3],[3,2,1],[2,3,1],[1,3,2],[3,1,2],[1,2,3],[2,1,3]])),qE=[{newSkill:"GOKA_MEKKYAKU",condition:yF},{newSkill:"HYOSHO_RANRYU",condition:vF},{newSkill:"FUMA_SHURIKEN",condition:MF},{newSkill:"KATON",condition:LF},{newSkill:"RAITON",condition:xF},{newSkill:"HYOTON",condition:HF},{newSkill:"HUTON",condition:kF},{newSkill:"DOTON",condition:UF},{newSkill:"SUITON",condition:wF},{newSkill:"RABBIT_MEDIUM",condition:e=>e.hasResourceAvailable("MUDRA")&&(e.hasResourceAvailable("BUNNY")||PF(e))},{newSkill:"NINJUTSU",condition:e=>!e.hasResourceAvailable("MUDRA")}],ZE=e=>qE.filter(t=>t.newSkill!==e);un("NIN","NINJUTSU",30,{recastTime:1.5,validateAttempt:e=>!1,replaceIf:ZE("NINJUTSU")});un("NIN","RABBIT_MEDIUM",30,{startOnHotbar:!1,recastTime:1.5,replaceIf:ZE("RABBIT_MEDIUM"),validateAttempt:qE.find(e=>e.newSkill==="RABBIT_MEDIUM").condition,onConfirm:e=>e.clearMudraInfo()});Oy.forEach(([e,t,n,a,s])=>{un("NIN",e,t,{startOnHotbar:!1,applicationDelay:n,recastTime:c=>c.hasResourceAvailable("TEN_CHI_JIN")?1:1.5,potency:a,falloff:s,replaceIf:ZE(e),validateAttempt:qE.find(c=>c.newSkill===e).condition,onConfirm:Pe(["KATON","RAITON","HYOTON"].includes(e)?c=>{c.cooldowns.get("cd_SHUKUCHI").timeTillNextStackAvailable()!==0&&c.cooldowns.get("cd_SHUKUCHI").restore(60)}:void 0,e==="RAITON"?c=>c.stackRaijuReady():e==="SUITON"||e==="HUTON"?c=>c.gainStatus("SHADOW_WALKER"):void 0,c=>c.clearMudraInfo()),jobPotencyModifiers:c=>{const d=[];return c.hasResourceAvailable("KASSATSU")&&d.push($.Kassatsu),c.hasResourceAvailable("DOTON")&&["KATON","GOKA_MEKKYAKU"].includes(e)&&d.push($.HollowNozuchi),d},jobTargetPotencyModifiers:jc,startsAuto:!1})});un("NIN","DOTON",45,{startOnHotbar:!1,recastTime:e=>e.hasResourceAvailable("TEN_CHI_JIN")?1:1.5,potency:0,falloff:0,replaceIf:ZE("DOTON"),validateAttempt:qE.find(e=>e.newSkill==="DOTON").condition,onConfirm:Pe((e,t)=>{e.addDoTPotencies({node:t,effectName:"DOTON",skillName:"DOTON",tickPotency:80,speedStat:"sks"})},e=>e.clearMudraInfo()),onApplication:Dy});const uE=e=>e.hasResourceAvailable("RAIJU_READY"),yy=[["NEVER",560],["MELEE_MASTERY_III_NIN",700]];Co("FORKED_RAIJU",90,{applicationDelay:.62,potency:yy,animationLock:Jt,highlightIf:uE,validateAttempt:uE,onConfirm:e=>{e.gainNinki(5),e.tryConsumeResource("RAIJU_READY")}});Co("FLEETING_RAIJU",90,{applicationDelay:.76,potency:yy,highlightIf:uE,validateAttempt:uE,onConfirm:e=>{e.gainNinki(5),e.tryConsumeResource("RAIJU_READY")}});bo("DOKUMORI",66,"cd_DOKUMORI",{applicationDelay:1.07,potency:400,falloff:0,cooldown:120,onConfirm:(e,t)=>{e.gainDebuff("DOKUMORI",t.targetList),e.gainNinki(40),e.hasTraitUnlocked("ENHANCED_DOKUMORI")&&e.gainStatus("HIGI")}});const dE=e=>e.hasResourceAvailable("HIDDEN")||e.hasResourceAvailable("SHADOW_WALKER");bo("TRICK_ATTACK",18,"cd_TRICK_ATTACK",{autoUpgrade:{trait:"TRICK_ATTACK_MASTERY",otherSkill:"KUNAIS_BANE"},applicationDelay:.8,potency:300,positional:{potency:400,location:"rear"},cooldown:60,highlightIf:dE,validateAttempt:dE,onConfirm:(e,t)=>{e.gainDebuff("TRICK_ATTACK",[t.targetList[0]]),e.tryConsumeResource("SHADOW_WALKER")}});bo("KUNAIS_BANE",92,"cd_TRICK_ATTACK",{autoDowngrade:{trait:"TRICK_ATTACK_MASTERY",otherSkill:"TRICK_ATTACK"},startOnHotbar:!1,applicationDelay:1.29,cooldown:60,potency:700,falloff:0,highlightIf:dE,validateAttempt:dE,onConfirm:(e,t)=>{e.gainDebuff("KUNAIS_BANE",t.targetList),e.tryConsumeResource("SHADOW_WALKER")}});bo("DREAM_WITHIN_A_DREAM",56,"cd_DREAM_WITHIN_A_DREAM",{applicationDelay:.98,cooldown:60,potency:180*3});Ld("KASSATSU",50,"cd_KASSATSU",{rscType:"KASSATSU",cooldown:60,applicationDelay:0,validateAttempt:e=>!e.hasResourceAvailable("TEN_CHI_JIN")});const So=e=>e.resources.get("NINKI").available(50),xd=e=>e.resources.get("NINKI").consume(50);bo("BHAVACAKRA",68,"cd_BHAVACAKRA",{applicationDelay:.62,cooldown:1,potency:[["NEVER",350],["MELEE_MASTERY_III_NIN",400]],highlightIf:So,validateAttempt:So,replaceIf:[{newSkill:"ZESHO_MEPPO",condition:e=>e.hasResourceAvailable("HIGI")}],onConfirm:Pe(xd,e=>e.tryConsumeResource("MEISUI")),jobPotencyModifiers:e=>e.hasResourceAvailable("MEISUI")?[$.Meisui]:[]});bo("ZESHO_MEPPO",96,"cd_BHAVACAKRA",{startOnHotbar:!1,applicationDelay:1.03,cooldown:1,potency:700,highlightIf:e=>e.hasResourceAvailable("HIGI")&&So(e),validateAttempt:e=>e.hasResourceAvailable("HIGI")&&So(e),replaceIf:[{newSkill:"BHAVACAKRA",condition:e=>!e.hasResourceAvailable("HIGI")}],onConfirm:Pe(xd,e=>{e.tryConsumeResource("MEISUI"),e.tryConsumeResource("HIGI")}),jobPotencyModifiers:e=>e.hasResourceAvailable("MEISUI")?[$.Meisui]:[]});bo("HELLFROG_MEDIUM",62,"cd_BHAVACAKRA",{applicationDelay:.8,cooldown:1,potency:250,falloff:0,highlightIf:So,validateAttempt:So,replaceIf:[{newSkill:"DEATHFROG_MEDIUM",condition:e=>e.hasResourceAvailable("HIGI")}],onConfirm:xd});bo("DEATHFROG_MEDIUM",96,"cd_BHAVACAKRA",{startOnHotbar:!1,applicationDelay:.8,cooldown:1,potency:400,falloff:0,highlightIf:e=>e.hasResourceAvailable("HIGI")&&So(e),validateAttempt:e=>e.hasResourceAvailable("HIGI")&&So(e),onConfirm:Pe(xd,e=>e.tryConsumeResource("HIGI"))});Ld("MEISUI",72,"cd_MEISUI",{rscType:"MEISUI",cooldown:120,applicationDelay:0,highlightIf:e=>e.hasResourceAvailable("SHADOW_WALKER"),validateAttempt:e=>e.hasResourceAvailable("SHADOW_WALKER"),onConfirm:e=>{e.tryConsumeResource("SHADOW_WALKER"),e.gainNinki(50)}});Ld("BUNSHIN",80,"cd_BUNSHIN",{rscType:"BUNSHIN",cooldown:90,applicationDelay:0,replaceIf:[{newSkill:"PHANTOM_KAMAITACHI",condition:e=>e.hasResourceAvailable("PHANTOM_KAMAITACHI_READY")}],highlightIf:So,validateAttempt:So,onConfirm:Pe(xd,e=>e.gainStatus("PHANTOM_KAMAITACHI_READY"))});Co("PHANTOM_KAMAITACHI",80,{startOnHotbar:!1,potency:700,falloff:0,applicationDelay:1.57,highlightIf:e=>e.hasResourceAvailable("PHANTOM_KAMAITACHI_READY"),validateAttempt:e=>e.hasResourceAvailable("PHANTOM_KAMAITACHI_READY"),onConfirm:e=>{e.tryConsumeResource("PHANTOM_KAMAITACHI_READY"),e.gainNinki(10)},jobPotencyModifiers:e=>e.hasResourceAvailable("DOTON")?[$.HollowNozuchi,$.NinPet]:[$.NinPet]});Ld("TEN_CHI_JIN",70,"cd_TEN_CHI_JIN",{rscType:"TEN_CHI_JIN",applicationDelay:0,cooldown:120,replaceIf:[{newSkill:"TENRI_JINDO",condition:e=>e.hasResourceAvailable("TENRI_JINDO_READY")}],validateAttempt:e=>!e.hasResourceAvailable("KASSATSU"),onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_TEN_CHI_JIN")&&e.gainStatus("TENRI_JINDO_READY"),e.clearMudraInfo()}});bo("TENRI_JINDO",100,"cd_TENRI_JINDO",{startOnHotbar:!1,applicationDelay:1.69,cooldown:1,potency:1100,falloff:0,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("TENRI_JINDO_READY"),onConfirm:e=>e.tryConsumeResource("TENRI_JINDO_READY")});bo("SHUKUCHI",40,"cd_SHUKUCHI",{applicationDelay:0,cooldown:60,maxCharges:2,animationLock:Jt});Ld("SHADE_SHIFT",2,"cd_SHADE_SHIFT",{rscType:"SHADE_SHIFT",applicationDelay:.4,cooldown:120});Object.keys(cS).forEach(e=>qt(e,`MNK/${Hb[e].name}.png`));function GF(e){switch(e){case 1:return"opo";case 2:return"raptor";case 3:return"coeurl"}return null}function BF(e){switch(e){case"opo":return N({en:"o",zh:""});case"raptor":return N({en:"r",zh:""});case"coeurl":return N({en:"c",zh:""})}return null}function nb(e){switch(e){case"lunar":return N({en:e,zh:""});case"solar":return N({en:e,zh:""})}return null}class FF extends en{jobSpecificSelfTargetedBuffViewProps(){return Object.keys(cS).map(t=>this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){var m;const n=this.state.resources,a=["BEAST_CHAKRA_1","BEAST_CHAKRA_2","BEAST_CHAKRA_3"].map(R=>n.get(R).availableAmount()).map(GF),s=n.get("LUNAR_NADI").available(1),c=n.get("SOLAR_NADI").available(1),d=a.map(BF).filter(R=>R!==null).join("+"),f=[nb(s?"lunar":null),nb(c?"solar":null)].filter(R=>R!==null).join("+");return[{kind:"counter",name:Qe("OPO_OPOS_FURY"),color:t.mnk.opo,currentStacks:n.get("OPO_OPOS_FURY").availableAmount(),maxStacks:1},{kind:"counter",name:Qe("RAPTORS_FURY"),color:t.mnk.raptor,currentStacks:n.get("RAPTORS_FURY").availableAmount(),maxStacks:1},{kind:"counter",name:Qe("COEURLS_FURY"),color:t.mnk.coeurl,currentStacks:n.get("COEURLS_FURY").availableAmount(),maxStacks:2},{kind:"chakra",name:Qe("CHAKRA"),regularColor:t.mnk.chakra,overflowColor:t.mnk.extraChakra,value:n.get("CHAKRA").availableAmount(),wrapCount:5},{kind:"text",name:Qe("BEAST_CHAKRA_TIMER"),text:a.every(R=>R!==null)?(m=n.get("BEAST_CHAKRA_1").pendingChange)==null?void 0:m.timeTillEvent.toFixed(3):"n/a"},{kind:"beast",name:Qe("BEAST_CHAKRA"),label:d,chakras:a,opoColor:t.mnk.opo,raptorColor:t.mnk.raptor,coeurlColor:t.mnk.coeurl},{kind:"nadi",name:Qe("NADI"),label:f,lunar:s,solar:c,lunarColor:t.mnk.lunar,solarColor:t.mnk.solar}]}}const Bt=(e,t,n)=>{Je("MNK",e,t,n??{})};Bt("CHAKRA",5,{default:5});Bt("BEAST_CHAKRA",1);Bt("NADI",1);Bt("OPO_OPOS_FURY",1,{warnOnOvercap:!0});Bt("RAPTORS_FURY",1,{warnOnOvercap:!0});Bt("COEURLS_FURY",2,{warnOnOvercap:!0});Bt("MANTRA",1,{timeout:15});Bt("OPO_OPO_FORM",1,{timeout:30});Bt("RAPTOR_FORM",1,{timeout:30});Bt("COEURL_FORM",1,{timeout:30});Bt("PERFECT_BALANCE",3,{timeout:20});Bt("FORMLESS_FIST",1,{timeout:30,default:1});Bt("RIDDLE_OF_EARTH",1,{timeout:10});Bt("EARTHS_RESOLVE",1,{timeout:15});Bt("EARTHS_RUMINATION",1,{timeout:30});Bt("RIDDLE_OF_FIRE",1,{timeout:20.72});Bt("FIRES_RUMINATION",1,{timeout:20,warnOnTimeout:!0});Bt("BROTHERHOOD",1,{timeout:20});Bt("MEDITATIVE_BROTHERHOOD",1,{timeout:20});Bt("RIDDLE_OF_WIND",1,{timeout:15.78});Bt("WINDS_RUMINATION",1,{timeout:15,warnOnTimeout:!0});Bt("SIX_SIDED_STAR",1,{timeout:5});const Jl=["BEAST_CHAKRA_1","BEAST_CHAKRA_2","BEAST_CHAKRA_3"];Bt("BEAST_CHAKRA_1",3);Bt("BEAST_CHAKRA_2",3);Bt("BEAST_CHAKRA_3",3);Bt("LUNAR_NADI",1);Bt("SOLAR_NADI",1);class jF extends tn{constructor(t){super(t);const n=this.hasTraitUnlocked("ENHANCED_THUNDERCLAP")?3:2;this.cooldowns.set(new ze("cd_THUNDERCLAP",30,n,n)),this.registerRecurringEvents()}getForm(){if(this.hasResourceAvailable("OPO_OPO_FORM"))return"opo";if(this.hasResourceAvailable("RAPTOR_FORM"))return"raptor";if(this.hasResourceAvailable("COEURL_FORM"))return"coeurl"}setForm(t){["OPO_OPO_FORM","RAPTOR_FORM","COEURL_FORM","FORMLESS_FIST"].forEach(a=>this.tryConsumeResource(a));const n=t==="opo"?"OPO_OPO_FORM":t==="raptor"?"RAPTOR_FORM":t==="coeurl"?"COEURL_FORM":"FORMLESS_FIST";this.gainStatus(n)}canDoForm(t){return this.hasResourceAvailable("PERFECT_BALANCE")||this.hasResourceAvailable("FORMLESS_FIST")||this.getForm()===t}gainChakra(){this.resources.get("CHAKRA").gain(1)}maybeGainChakra(t){if(this.hasResourceAvailable("MEDITATIVE_BROTHERHOOD"))for(let s=0;s<this.resources.get("PARTY_SIZE").availableAmount()-1;s++)this.triggersEffect(.2,!0)&&this.gainChakra();if(this.hasTraitUnlocked("ENHANCED_BROTHERHOOD")&&this.hasResourceAvailable("MEDITATIVE_BROTHERHOOD")){this.gainChakra();return}const n=t?1:this.config.critRate,a=this.triggersEffect(n,!0);if(t||a){const s=this.hasTraitUnlocked("DEEP_MEDITATION_II")?1:.8,c=this.triggersEffect(s);(s===1||c)&&this.gainChakra()}}consumeFiveChakra(){const t=this.resources.get("CHAKRA");t.consume(Math.min(t.availableAmount(),5))}startPB(){["OPO_OPO_FORM","RAPTOR_FORM","COEURL_FORM","FORMLESS_FIST"].forEach(t=>this.tryConsumeResource(t)),this.gainStatus("PERFECT_BALANCE")}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("RIDDLE_OF_FIRE")&&t.addBuff(U.RiddleOfFire),this.hasResourceAvailable("BROTHERHOOD")&&t.addBuff(U.Brotherhood)}inherentSpeedModifier(){return this.hasTraitUnlocked("ENHANCED_GREASED_LIGHTNING_III")?20:15}get statusPropsGenerator(){return new FF(this)}}const Zn=(e,t,n)=>{const a=n.form?s=>n.form.requiredForm===void 0||s.canDoForm(n.form.requiredForm):void 0;return un("MNK",e,t,{...n,positional:void 0,highlightIf:s=>{var c;return!a&&!n.ball&&!n.highlightIf?!1:((a==null?void 0:a(s))??!0)&&(n.ball?s.hasResourceAvailable(n.ball.rsc):!0)&&(((c=n.highlightIf)==null?void 0:c.call(n,s))??!0)},validateAttempt:s=>{var c;return((a==null?void 0:a(s))??!0)&&(((c=n.validateAttempt)==null?void 0:c.call(n,s))??!0)},recastTime:s=>s.config.adjustedSksGCD(n.recastTime??2.5,s.inherentSpeedModifier()),onConfirm:Pe(n.onConfirm,e!=="SIX_SIDED_STAR"&&n.potency?(s,c)=>{const d=c.getInitialPotency();d&&s.maybeGainChakra(d.getDisplayedModifiers().includes($.AutoCrit))}:void 0,n.form?s=>{const c=n.form.nextForm;if(s.tryConsumeResource("PERFECT_BALANCE")){for(const f of Jl)if(!s.hasResourceAvailable(f)){let h=3;c==="raptor"?h=1:c==="coeurl"&&(h=2),s.resources.get(f).gain(h),f==="BEAST_CHAKRA_3"&&Jl.forEach(m=>s.enqueueResourceDrop(m,20));break}}else s.setForm(c)}:void 0,n.ball?s=>s.tryConsumeResource(n.ball.rsc):void 0),jobPotencyModifiers:s=>{var f;const c=((f=n.jobPotencyModifiers)==null?void 0:f.call(n,s))??[],d=n.positional&&s.hitPositional(n.positional.location);return s.hasResourceAvailable("BROTHERHOOD")&&c.push($.Brotherhood),s.hasResourceAvailable("RIDDLE_OF_FIRE")&&c.push($.RiddleOfFire),n.ball&&s.hasResourceAvailable(n.ball.rsc)?(c.push({kind:"adder",source:w.MNK_BALL,additiveAmount:cn(s,n.ball.potency)-cn(s,n.potency)}),n.positional&&d&&c.push(wf(cn(s,n.positional.ballPotency)-cn(s,n.ball.potency)))):n.positional&&d&&c.push(wf(cn(s,n.positional.potency)-cn(s,n.potency))),c}})},$E=(e,t,n,a)=>st("MNK",e,t,n,{jobPotencyModifiers:s=>{var d;const c=((d=a.jobPotencyModifiers)==null?void 0:d.call(a,s))??[];return s.hasResourceAvailable("BROTHERHOOD")&&c.push($.Brotherhood),s.hasResourceAvailable("RIDDLE_OF_FIRE")&&c.push($.RiddleOfFire),c},...a}),zc=(e,t,n,a)=>Ze("MNK",e,t,n,a);[["BOOTSHINE",1,1.11,[["NEVER",180],["MELEE_MASTERY_MNK",220]]],["LEAPING_OPO",92,.62,260]].forEach(([e,t,n,a],s)=>{Zn(e,t,{...s===0?{autoUpgrade:{otherSkill:"LEAPING_OPO",trait:"BEAST_CHAKRA_MASTERY"}}:{autoDowngrade:{otherSkill:"BOOTSHINE",trait:"BEAST_CHAKRA_MASTERY"}},form:{nextForm:"raptor"},ball:{potency:s===0?[["NEVER",380],["MELEE_MASTERY_MNK",420]]:460,rsc:"OPO_OPOS_FURY"},applicationDelay:n,potency:a,highlightIf:d=>d.canDoForm("opo"),jobPotencyModifiers:d=>d.hasResourceAvailable("OPO_OPOS_FURY")?[$.AutoCrit]:[]})});[["TRUE_STRIKE",4,.8,[["NEVER",260],["MELEE_MASTERY_MNK",300]]],["RISING_RAPTOR",92,.89,340]].forEach(([e,t,n,a],s)=>{Zn(e,t,{...s===0?{autoUpgrade:{otherSkill:"RISING_RAPTOR",trait:"BEAST_CHAKRA_MASTERY"}}:{autoDowngrade:{otherSkill:"TRUE_STRIKE",trait:"BEAST_CHAKRA_MASTERY"}},form:{requiredForm:"raptor",nextForm:"coeurl"},ball:{potency:s===0?[["NEVER",460],["MELEE_MASTERY_MNK",500]]:540,rsc:"RAPTORS_FURY"},applicationDelay:n,potency:a})});[["SNAP_PUNCH",6,.76,[["NEVER",230],["MELEE_MASTERY_MNK",270]]],["POUNCING_COEURL",92,1.02,310]].forEach(([e,t,n,a],s)=>{Zn(e,t,{...s===0?{autoUpgrade:{otherSkill:"POUNCING_COEURL",trait:"BEAST_CHAKRA_MASTERY"}}:{autoDowngrade:{otherSkill:"SNAP_PUNCH",trait:"BEAST_CHAKRA_MASTERY"}},form:{requiredForm:"coeurl",nextForm:"opo"},ball:{potency:s===0?[["NEVER",380],["MELEE_MASTERY_MNK",420]]:460,rsc:"COEURLS_FURY"},positional:{potency:s===0?[["NEVER",290],["MELEE_MASTERY_MNK",330]]:370,ballPotency:s===0?[["NEVER",440],["MELEE_MASTERY_MNK",480]]:520,location:"flank"},applicationDelay:n,potency:a})});Zn("DRAGON_KICK",50,{applicationDelay:1.29,potency:[["NEVER",240],["MELEE_MASTERY_MNK",280],["MELEE_MASTERY_II_MNK",320]],form:{nextForm:"raptor"},highlightIf:e=>e.canDoForm("opo")&&!e.hasResourceAvailable("OPO_OPOS_FURY"),onConfirm:e=>e.resources.get("OPO_OPOS_FURY").gain(1)});Zn("TWIN_SNAKES",18,{applicationDelay:.84,potency:[["NEVER",340],["MELEE_MASTERY_MNK",380],["MELEE_MASTERY_II_MNK",420]],form:{requiredForm:"raptor",nextForm:"coeurl"},highlightIf:e=>!e.hasResourceAvailable("RAPTORS_FURY"),onConfirm:e=>e.resources.get("RAPTORS_FURY").gain(1)});Zn("DEMOLISH",30,{applicationDelay:1.6,potency:[["NEVER",280],["MELEE_MASTERY_MNK",320],["MELEE_MASTERY_II_MNK",360]],form:{requiredForm:"coeurl",nextForm:"opo"},positional:{potency:[["NEVER",340],["MELEE_MASTERY_MNK",380],["MELEE_MASTERY_II_MNK",420]],location:"rear"},highlightIf:e=>!e.hasResourceAvailable("COEURLS_FURY"),onConfirm:e=>e.resources.get("COEURLS_FURY").gain(2)});[["ARM_OF_THE_DESTROYER",26,.54,110],["SHADOW_OF_THE_DESTROYER",82,.4,120]].forEach(([e,t,n,a],s)=>{Zn(e,t,{...s===0?{autoUpgrade:{otherSkill:"SHADOW_OF_THE_DESTROYER",trait:"ARM_OF_THE_DESTROYER_MASTERY"}}:{autoDowngrade:{otherSkill:"ARM_OF_THE_DESTROYER",trait:"ARM_OF_THE_DESTROYER_MASTERY"}},applicationDelay:n,potency:a,falloff:0,form:{nextForm:"raptor"},highlightIf:d=>d.canDoForm("opo"),jobPotencyModifiers:s===1?d=>d.hasResourceAvailable("OPO_OPO_FORM")?[$.AutoCrit]:[]:void 0})});Zn("ROCKBREAKER",30,{applicationDelay:.94,potency:150,falloff:0,form:{requiredForm:"raptor",nextForm:"coeurl"}});Zn("FOUR_POINT_FURY",45,{applicationDelay:.97,potency:140,falloff:0,form:{requiredForm:"coeurl",nextForm:"opo"}});const vy=e=>{const t=Jl.map(n=>e.resources.get(n).availableAmount());return e.hasResourceAvailable("LUNAR_NADI")&&e.hasResourceAvailable("SOLAR_NADI")&&t.every(n=>n>0)},Tg=e=>{const t=Jl.map(s=>e.resources.get(s).availableAmount()),n=t[0];return n>0&&t[1]===n&&t[2]===n&&!(e.hasResourceAvailable("LUNAR_NADI")&&e.hasResourceAvailable("SOLAR_NADI"))},Sg=e=>{const t=Jl.map(a=>e.resources.get(a).availableAmount()),n=[!1,!1,!1];return t.forEach(a=>{console.assert(a<4,"beast chakra had invalid value"),a<4&&a>0&&(n[a-1]=!0)}),n.every(a=>a)&&t.every(a=>a>0)&&!(e.hasResourceAvailable("LUNAR_NADI")&&e.hasResourceAvailable("SOLAR_NADI"))},My=e=>{const t=Jl.map(n=>e.resources.get(n).availableAmount());return!Tg(e)&&!Sg(e)&&t.every(n=>n>0)&&!(e.hasResourceAvailable("LUNAR_NADI")&&e.hasResourceAvailable("SOLAR_NADI"))},zF=e=>!vy(e)&&!Tg(e)&&!Sg(e)&&!My(e),Hd=[{newSkill:"MASTERFUL_BLITZ",condition:zF},{newSkill:"ELIXIR_FIELD",condition:Tg},{newSkill:"FLINT_STRIKE",condition:Sg},{newSkill:"CELESTIAL_REVOLUTION",condition:My},{newSkill:"TORNADO_KICK",condition:vy}],QE=e=>{Jl.forEach(t=>e.tryConsumeResource(t,!0)),e.setForm("formless")},Ly=e=>t=>t.resources.get(e==="lunar"?"LUNAR_NADI":"SOLAR_NADI").gain(1);Zn("MASTERFUL_BLITZ",60,{applicationDelay:0,replaceIf:Hd,validateAttempt:e=>!1});[["TORNADO_KICK",60,1.69,1200],["PHANTOM_RUSH",90,.4,1500]].forEach(([e,t,n,a],s)=>{Zn(e,t,{...s===0?{autoUpgrade:{otherSkill:"PHANTOM_RUSH",trait:"TORNADO_KICK_MASTERY"}}:{autoDowngrade:{otherSkill:"TORNADO_KICK",trait:"TORNADO_KICK_MASTERY"}},startOnHotbar:!1,applicationDelay:n,replaceIf:Hd,highlightIf:d=>!0,potency:a,falloff:.35,onConfirm:Pe(QE,d=>{d.tryConsumeResource("LUNAR_NADI"),d.tryConsumeResource("SOLAR_NADI")})})});[["ELIXIR_FIELD",60,1.07,800],["ELIXIR_BURST",92,1.42,900]].forEach(([e,t,n,a],s)=>{Zn(e,t,{...s===0?{autoUpgrade:{otherSkill:"ELIXIR_BURST",trait:"BEAST_CHAKRA_MASTERY"}}:{autoDowngrade:{otherSkill:"ELIXIR_FIELD",trait:"BEAST_CHAKRA_MASTERY"}},startOnHotbar:!1,applicationDelay:n,replaceIf:Hd,highlightIf:d=>!0,potency:a,falloff:.35,onConfirm:Pe(QE,Ly("lunar"))})});Zn("CELESTIAL_REVOLUTION",60,{startOnHotbar:!1,applicationDelay:.89,replaceIf:Hd,highlightIf:e=>!0,potency:600,onConfirm:Pe(QE,e=>e.resources.get(e.hasResourceAvailable("LUNAR_NADI")?"SOLAR_NADI":"LUNAR_NADI").gain(1))});[["FLINT_STRIKE",60,.53,800],["RISING_PHOENIX",86,.76,900]].forEach(([e,t,n,a],s)=>{Zn(e,t,{...s===0?{autoUpgrade:{otherSkill:"RISING_PHOENIX",trait:"FLINT_STRIKE_MASTERY"}}:{autoDowngrade:{otherSkill:"FLINT_STRIKE",trait:"FLINT_STRIKE_MASTERY"}},startOnHotbar:!1,applicationDelay:n,replaceIf:Hd,highlightIf:d=>!0,potency:a,falloff:.35,onConfirm:Pe(QE,Ly("solar"))})});Zn("SIX_SIDED_STAR",80,{recastTime:5,applicationDelay:.62,potency:[["NEVER",710],["MELEE_MASTERY_II_MNK",780]],onConfirm:e=>{e.tryConsumeResource("CHAKRA",!0),e.gainStatus("SIX_SIDED_STAR")},jobPotencyModifiers:e=>{const t=e.resources.get("CHAKRA").availableAmount();return t>0?[{kind:"adder",additiveAmount:80*t,source:w.SSS_CHAKRA}]:[]}});Zn("FORM_SHIFT",52,{applicationDelay:0,onConfirm:e=>e.setForm("formless")});function gg(e,t,n){return un("MNK",e,t,{autoUpgrade:n.autoUpgrade,autoDowngrade:n.autoDowngrade,recastTime:1,applicationDelay:0,replaceIf:[{newSkill:n.spender,condition:a=>a.resources.get("CHAKRA").available(5)}],validateAttempt:a=>!a.resources.get("CHAKRA").available(5),onConfirm:a=>a.resources.get("CHAKRA").gain(a.isInCombat()?1:5)})}gg("FORBIDDEN_MEDITATION",54,{spender:"THE_FORBIDDEN_CHAKRA"});gg("INSPIRITED_MEDITATION",40,{autoUpgrade:{otherSkill:"ENLIGHTENED_MEDITATION",trait:"HOWLING_FIST_MASTERY"},spender:"HOWLING_FIST"});gg("ENLIGHTENED_MEDITATION",74,{autoDowngrade:{otherSkill:"ENLIGHTENED_MEDITATION",trait:"HOWLING_FIST_MASTERY"},spender:"ENLIGHTENMENT"});[["HOWLING_FIST",40,1.16,100,"cd_THE_FORBIDDEN_CHAKRA"],["ENLIGHTENMENT",74,.76,160,"cd_ENLIGHTENMENT"]].forEach(([e,t,n,a,s],c)=>{$E(e,t,s,{...c===0?{autoUpgrade:{otherSkill:"ENLIGHTENMENT",trait:"HOWLING_FIST_MASTERY"}}:{autoDowngrade:{otherSkill:"HOWLING_FIST",trait:"HOWLING_FIST_MASTERY"}},startOnHotbar:!1,applicationDelay:n,cooldown:1,potency:a,falloff:0,requiresCombat:!0,highlightIf:f=>f.resources.get("CHAKRA").available(5),validateAttempt:f=>f.resources.get("CHAKRA").available(5),onConfirm:f=>f.consumeFiveChakra()})});$E("THE_FORBIDDEN_CHAKRA",54,"cd_THE_FORBIDDEN_CHAKRA",{startOnHotbar:!1,replaceIf:[{newSkill:"FORBIDDEN_MEDITATION",condition:e=>!e.resources.get("CHAKRA").available(5)}],applicationDelay:1.48,cooldown:1,potency:[["NEVER",310],["MELEE_MASTERY_MNK",400]],requiresCombat:!0,highlightIf:e=>e.resources.get("CHAKRA").available(5),validateAttempt:e=>e.resources.get("CHAKRA").available(5),onConfirm:e=>e.consumeFiveChakra()});zc("PERFECT_BALANCE",50,"cd_PERFECT_BALANCE",{rscType:"PERFECT_BALANCE",applicationDelay:0,cooldown:40,maxCharges:2,requiresCombat:!0,validateAttempt:e=>!Jl.map(t=>e.hasResourceAvailable(t)).some(t=>t),onConfirm:e=>e.startPB()});zc("RIDDLE_OF_FIRE",68,"cd_RIDDLE_OF_FIRE",{rscType:"RIDDLE_OF_FIRE",applicationDelay:0,cooldown:60,replaceIf:[{newSkill:"FIRES_REPLY",condition:e=>e.hasResourceAvailable("FIRES_RUMINATION")}],onConfirm:e=>e.gainStatus("FIRES_RUMINATION")});zc("BROTHERHOOD",70,"cd_BROTHERHOOD",{rscType:"BROTHERHOOD",applicationDelay:.76,cooldown:120,onApplication:e=>{e.gainStatus("MEDITATIVE_BROTHERHOOD"),e.resources.set(new On("CHAKRA",10,e.resources.get("CHAKRA").availableAmount())),e.addEvent(new xe("restore BH max stacks",jt("MNK","BROTHERHOOD").maxTimeout,()=>e.resources.set(new On("CHAKRA",5,Math.min(e.resources.get("CHAKRA").availableAmount(),5)))))}});zc("RIDDLE_OF_WIND",72,"cd_RIDDLE_OF_WIND",{rscType:"RIDDLE_OF_WIND",applicationDelay:0,cooldown:90,replaceIf:[{newSkill:"WINDS_REPLY",condition:e=>e.hasResourceAvailable("WINDS_RUMINATION")}],onConfirm:e=>e.gainStatus("WINDS_RUMINATION")});$E("THUNDERCLAP",35,"cd_THUNDERCLAP",{applicationDelay:0,cooldown:30,maxCharges:3,animationLock:Jt,drawsAggro:!0});zc("MANTRA",42,"cd_MANTRA",{rscType:"MANTRA",applicationDelay:1.5,cooldown:90});zc("RIDDLE_OF_EARTH",64,"cd_RIDDLE_OF_EARTH",{rscType:"RIDDLE_OF_EARTH",applicationDelay:0,cooldown:120,healingPotency:100,replaceIf:[{newSkill:"EARTHS_REPLY",condition:e=>e.hasResourceAvailable("EARTHS_RUMINATION")}],onConfirm:e=>e.gainStatus("EARTHS_RUMINATION")});$E("EARTHS_REPLY",64,"cd_EARTHS_REPLY",{startOnHotbar:!1,applicationDelay:1.07,cooldown:1,healingPotency:300,highlightIf:e=>e.hasResourceAvailable("EARTHS_RUMINATION"),validateAttempt:e=>e.hasResourceAvailable("EARTHS_RUMINATION"),onConfirm:e=>e.tryConsumeResource("EARTHS_RUMINATION")});Zn("WINDS_REPLY",96,{startOnHotbar:!1,applicationDelay:1.2,potency:1040,falloff:.35,highlightIf:e=>e.hasResourceAvailable("WINDS_RUMINATION"),validateAttempt:e=>e.hasResourceAvailable("WINDS_RUMINATION"),onConfirm:e=>e.tryConsumeResource("WINDS_RUMINATION")});Zn("FIRES_REPLY",100,{startOnHotbar:!1,applicationDelay:1.42,potency:1400,falloff:.35,highlightIf:e=>e.hasResourceAvailable("FIRES_RUMINATION"),validateAttempt:e=>e.hasResourceAvailable("FIRES_RUMINATION"),onConfirm:e=>{e.tryConsumeResource("FIRES_RUMINATION"),e.setForm("formless")}});Object.keys(SS).forEach(e=>qt(e,`VPR/${Ke[e].name}.png`));const YF=Object.keys(SS);class KF extends en{jobSpecificOtherTargetedBuffViewProps(){return[]}jobSpecificSelfTargetedBuffViewProps(){return YF.map(t=>this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){var g,_;const n=this.state.resources,a=n.get("VPR_COMBO"),s=n.get("VPR_AOE_COMBO"),c=["HUNTERS_COIL_READY","SWIFTSKINS_COIL_READY","HUNTERS_DEN_READY","SWIFTSKINS_DEN_READY"],d=n.get("RATTLING_COIL").availableAmount(),f=n.get("SERPENT_OFFERINGS").availableAmount(),h=n.get("ANGUINE_TRIBUTE").availableAmount(),m=a.available(1)?(g=a.pendingChange)==null?void 0:g.timeTillEvent:s.available(1)?(_=s.pendingChange)==null?void 0:_.timeTillEvent:void 0,R=c.filter(I=>n.get(I).available(1)),T=R.length>0?Math.max(...R.map(I=>n.get(I).pendingChange.timeTillEvent)):void 0,S=[{kind:"bar",name:N({en:"Dual Wield Combo Timer",zh:""}),color:t.vpr.vprComboTimer,progress:m?m/30:0,valueString:(m==null?void 0:m.toFixed(3))??"N/A"},{kind:"bar",name:N({en:"Twinblade Combo Timer",zh:""}),color:t.vpr.vprComboTimer,progress:T?T/30:0,valueString:(T==null?void 0:T.toFixed(3))??"N/A"},{kind:"counter",name:Qe("RATTLING_COIL"),color:t.vpr.rattlingCoil,currentStacks:d,maxStacks:n.get("RATTLING_COIL").maxValue}];return this.state.hasTraitUnlocked("SERPENTS_LINEAGE")&&S.push({kind:"bar",name:Qe("SERPENT_OFFERINGS"),color:f>=50?t.vpr.anguineTribute:t.vpr.serpentOfferings,progress:f/100,valueString:f.toFixed(0)},{kind:"counter",name:Qe("ANGUINE_TRIBUTE"),color:t.vpr.anguineTribute,currentStacks:h,maxStacks:n.get("ANGUINE_TRIBUTE").maxValue}),S}}const At=(e,t,n)=>{Je("VPR",e,t,n??{})};At("RATTLING_COIL",3,{warnOnOvercap:!0});At("SERPENT_OFFERINGS",100,{warnOnOvercap:!0});At("ANGUINE_TRIBUTE",5,{timeout:30});At("HUNTERS_INSTINCT",1,{timeout:40});At("SWIFTSCALED",1,{timeout:40});At("HONED_STEEL",1,{timeout:60});At("HONED_REAVERS",1,{timeout:60});At("FLANKSTUNG_VENOM",1,{timeout:60});At("HINDSTUNG_VENOM",1,{timeout:60});At("FLANKSBANE_VENOM",1,{timeout:60});At("HINDSBANE_VENOM",1,{timeout:60});At("GRIMSKINS_VENOM",1,{timeout:60});At("GRIMHUNTERS_VENOM",1,{timeout:60});At("HUNTERS_VENOM",1,{timeout:30});At("SWIFTSKINS_VENOM",1,{timeout:30});At("POISED_FOR_TWINFANG",1,{timeout:60});At("POISED_FOR_TWINBLOOD",1,{timeout:60});At("FELLHUNTERS_VENOM",1,{timeout:30});At("FELLSKINS_VENOM",1,{timeout:30});At("READY_TO_REAWAKEN",1,{timeout:30,warnOnTimeout:!0});At("REAWAKENED",1,{timeout:30,warnOnTimeout:!0});At("DEATH_RATTLE_READY",1);At("COIL_OGCD_READY",2);At("DEN_OGCD_READY",2);At("UNCOILED_OGCD_READY",2);At("HUNTERS_COIL_READY",1,{timeout:30,warnOnTimeout:!0});At("HUNTERS_DEN_READY",1,{timeout:30,warnOnTimeout:!0});At("SWIFTSKINS_COIL_READY",1,{timeout:30,warnOnTimeout:!0});At("SWIFTSKINS_DEN_READY",1,{timeout:30,warnOnTimeout:!0});At("LAST_LASH_READY",1);At("LEGACY_READY",4);At("VPR_COMBO",4,{timeout:30});At("VPR_AOE_COMBO",2,{timeout:30});At("REAWAKEN_COMBO",4);const xy=["DEATH_RATTLE_READY","LAST_LASH_READY","COIL_OGCD_READY","UNCOILED_OGCD_READY","HUNTERS_VENOM","SWIFTSKINS_VENOM","POISED_FOR_TWINFANG","POISED_FOR_TWINBLOOD","DEN_OGCD_READY","LEGACY_READY"],Hy=["FLANKSBANE_VENOM","FLANKSTUNG_VENOM"],ky=["HINDSBANE_VENOM","HINDSTUNG_VENOM"],kc=[...Hy,...ky];class VF extends tn{constructor(t){super(t);const n=this.hasTraitUnlocked("ENHANCED_SLITHER")?3:2;this.cooldowns.set(new ze("cd_SLITHER",30,n,n));const a=this.hasTraitUnlocked("ENHANCED_VIPERS_RATTLE")?3:2,s=this.hasTraitUnlocked("ENHANCED_SERPENTS_LINEAGE")?5:4;this.resources.set(new On("RATTLING_COIL",a,0,!0)),this.resources.set(new On("ANGUINE_TRIBUTE",s,0)),this.registerRecurringEvents()}inherentSpeedModifier(){return 15}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("HUNTERS_INSTINCT")&&t.addBuff(U.HuntersInstinct)}jobSpecificAddSpeedBuffCovers(t,n){this.hasResourceAvailable("SWIFTSCALED")&&n.cdName==="cd_GCD"&&t.addBuff(U.Swiftscaled)}get statusPropsGenerator(){return new KF(this)}getSwiftscaledModifier(){return this.hasResourceAvailable("SWIFTSCALED")?this.inherentSpeedModifier():0}isNoReawakenComboAt(t){return!this.hasResourceAvailable("REAWAKENED")&&this.hasResourceExactly("VPR_COMBO",t)}isNoReawakenAoeComboAt(t){return!this.hasResourceAvailable("REAWAKENED")&&this.hasResourceExactly("VPR_AOE_COMBO",t)}setLegacy(t){this.hasTraitUnlocked("SERPENTS_LEGACY")&&this.resources.get("LEGACY_READY").overrideCurrentValue(t)}gainOfferings(t){this.hasTraitUnlocked("SERPENTS_LINEAGE")&&this.resources.get("SERPENT_OFFERINGS").gain(t)}processCombo(t){if(t==="WRITHING_SNAP"||t==="UNCOILED_FURY")return;const a=["REAWAKEN","FIRST_GENERATION","SECOND_GENERATION","THIRD_GENERATION","FOURTH_GENERATION"].indexOf(t);if(a!==-1){this.setComboState("REAWAKEN_COMBO",(a+1)%5);return}const s=this.resources.get("VPR_COMBO").availableAmount(),c=this.resources.get("VPR_AOE_COMBO").availableAmount(),[d,f]=new Map([["STEEL_FANGS",[1,0]],["REAVING_FANGS",[1,0]],["HUNTERS_STING",[2,0]],["SWIFTSKINS_STING",[3,0]],["FLANKSTING_STRIKE",[0,0]],["FLANKSBANE_FANG",[0,0]],["HINDSTING_STRIKE",[0,0]],["HINDSBANE_FANG",[0,0]],["STEEL_MAW",[0,1]],["REAVING_MAW",[0,1]],["HUNTERS_BITE",[0,2]],["SWIFTSKINS_BITE",[0,2]],["JAGGED_MAW",[0,0]],["BLOODIED_MAW",[0,0]]]).get(t)??[s,c];d!==s&&this.setComboState("VPR_COMBO",d),f!==c&&this.setComboState("VPR_AOE_COMBO",f),this.setComboState("REAWAKEN_COMBO",0)}cancelVicewinderCombo(t){t!=="SWIFTSKINS_COIL"&&this.tryConsumeResource("HUNTERS_COIL_READY"),t!=="HUNTERS_COIL"&&this.tryConsumeResource("SWIFTSKINS_COIL_READY"),t!=="SWIFTSKINS_DEN"&&this.tryConsumeResource("HUNTERS_DEN_READY"),t!=="HUNTERS_DEN"&&this.tryConsumeResource("SWIFTSKINS_DEN_READY")}consumeAnguine(){this.tryConsumeResource("ANGUINE_TRIBUTE"),this.hasResourceAvailable("ANGUINE_TRIBUTE")||this.cancelReawaken()}cancelReawaken(){this.tryConsumeResource("LEGACY_READY",!0),this.tryConsumeResource("ANGUINE_TRIBUTE",!0),this.tryConsumeResource("REAWAKENED"),this.setComboState("REAWAKEN_COMBO",0)}applyExtendedStatus(t,n){kc.includes(t)&&kc.forEach(c=>c!==t&&this.tryConsumeResource(c));const a=this.resources.get(t),s=jt("VPR",t);this.hasResourceAvailable(t)?s.maxTimeout>0&&a.overrideTimer(this,s.maxTimeout+n):(a.gain(1),s.maxTimeout>0&&this.enqueueResourceDrop(t,s.maxTimeout+n))}}const Tn=(e,t,n)=>{var s,c;const a=(c=(s=n.replaceIf)==null?void 0:s.find(d=>d.newSkill===e))==null?void 0:c.condition;return un("VPR",e,t,{...n,recastTime:d=>d.config.adjustedSksGCD(n.baseRecastTime??2.5,d.getSwiftscaledModifier()),validateAttempt:Id(n.validateAttempt,a),onConfirm:Pe(d=>{e!=="UNCOILED_FURY"&&e!=="WRITHING_SNAP"&&d.cancelVicewinderCombo(e),xy.forEach(f=>{d.tryConsumeResource(f,!0)&&p.reportWarning({kind:"overwrite",rsc:f})})},n.onConfirm,n.extendedStatus?d=>d.applyExtendedStatus(n.extendedStatus,n.applicationDelay):void 0,d=>d.processCombo(e)),jobPotencyModifiers:d=>{var h;const f=((h=n.jobPotencyModifiers)==null?void 0:h.call(n,d))??[];return d.hasResourceAvailable("HUNTERS_INSTINCT")&&f.push($.HuntersInstinct),f}})},il=(e,t,n,a)=>st("VPR",e,t,n,{...a,jobPotencyModifiers:s=>{var d;const c=((d=a.jobPotencyModifiers)==null?void 0:d.call(a,s))??[];return s.hasResourceAvailable("HUNTERS_INSTINCT")&&c.push($.HuntersInstinct),c}}),Uy={newSkill:"FIRST_GENERATION",condition:e=>e.hasResourceAvailable("REAWAKENED")},wy={newSkill:"SECOND_GENERATION",condition:e=>e.hasResourceAvailable("REAWAKENED")},Uc=[Uy];Uc.push(...["STEEL_FANGS","HUNTERS_STING","FLANKSTING_STRIKE","HINDSTING_STRIKE"].map((e,t)=>({newSkill:e,condition:n=>n.isNoReawakenComboAt(t)})));const wc=[wy];wc.push(...["REAVING_FANGS","SWIFTSKINS_STING","FLANKSBANE_FANG","HINDSBANE_FANG"].map((e,t)=>({newSkill:e,condition:n=>n.isNoReawakenComboAt(t)})));const JE=[Uy];JE.push(...["STEEL_MAW","HUNTERS_BITE","JAGGED_MAW"].map((e,t)=>({newSkill:e,condition:n=>n.isNoReawakenAoeComboAt(t)})));const em=[wy];em.push(...["REAVING_MAW","SWIFTSKINS_BITE","BLOODIED_MAW"].map((e,t)=>({newSkill:e,condition:n=>n.isNoReawakenAoeComboAt(t)})));const Py=[{newSkill:"HUNTERS_COIL",condition:e=>!e.hasResourceAvailable("REAWAKENED")},{newSkill:"THIRD_GENERATION",condition:e=>e.hasResourceAvailable("REAWAKENED")}],Gy=[{newSkill:"SWIFTSKINS_COIL",condition:e=>!e.hasResourceAvailable("REAWAKENED")},{newSkill:"FOURTH_GENERATION",condition:e=>e.hasResourceAvailable("REAWAKENED")}],tm=[{newSkill:"SERPENTS_TAIL",condition:e=>!xy.some(t=>e.hasResourceAvailable(t))},{newSkill:"DEATH_RATTLE",condition:e=>e.hasResourceAvailable("DEATH_RATTLE_READY")},{newSkill:"LAST_LASH",condition:e=>e.hasResourceAvailable("LAST_LASH_READY")},{newSkill:"FIRST_LEGACY",condition:e=>e.hasResourceExactly("LEGACY_READY",1)},{newSkill:"SECOND_LEGACY",condition:e=>e.hasResourceExactly("LEGACY_READY",2)},{newSkill:"THIRD_LEGACY",condition:e=>e.hasResourceExactly("LEGACY_READY",3)},{newSkill:"FOURTH_LEGACY",condition:e=>e.hasResourceExactly("LEGACY_READY",4)}],By=[{newSkill:"TWINFANG",condition:e=>!["COIL_OGCD_READY","UNCOILED_OGCD_READY","DEN_OGCD_READY"].some(t=>e.hasResourceAvailable(t))},{newSkill:"TWINFANG_BITE",condition:e=>e.hasResourceAvailable("COIL_OGCD_READY")},{newSkill:"TWINFANG_THRESH",condition:e=>e.hasResourceAvailable("DEN_OGCD_READY")},{newSkill:"UNCOILED_TWINFANG",condition:e=>e.hasResourceAvailable("UNCOILED_OGCD_READY")}],Fy=[{newSkill:"TWINBLOOD",condition:e=>!["COIL_OGCD_READY","UNCOILED_OGCD_READY","DEN_OGCD_READY"].some(t=>e.hasResourceAvailable(t))},{newSkill:"TWINBLOOD_BITE",condition:e=>e.hasResourceAvailable("COIL_OGCD_READY")},{newSkill:"TWINBLOOD_THRESH",condition:e=>e.hasResourceAvailable("DEN_OGCD_READY")},{newSkill:"UNCOILED_TWINBLOOD",condition:e=>e.hasResourceAvailable("UNCOILED_OGCD_READY")}],jy=[{newSkill:"REAWAKEN",condition:e=>!e.hasResourceAvailable("ANGUINE_TRIBUTE")},{newSkill:"OUROBOROS",condition:e=>e.hasResourceAvailable("ANGUINE_TRIBUTE")}];Tn("WRITHING_SNAP",15,{applicationDelay:.488,potency:200,startsAuto:!1});Tn("STEEL_FANGS",1,{replaceIf:Uc,applicationDelay:1.158,potency:[["NEVER",180],["MELEE_MASTERY_VPR",200]],jobPotencyModifiers:e=>e.hasResourceAvailable("HONED_STEEL")?[$.HonedST]:[],highlightIf:e=>e.hasResourceAvailable("HONED_STEEL"),onConfirm:e=>e.tryConsumeResource("HONED_STEEL"),extendedStatus:"HONED_REAVERS"});Tn("REAVING_FANGS",10,{replaceIf:wc,applicationDelay:1.293,potency:[["NEVER",180],["MELEE_MASTERY_VPR",200]],jobPotencyModifiers:e=>e.hasResourceAvailable("HONED_REAVERS")?[$.HonedST]:[],highlightIf:e=>e.hasResourceAvailable("HONED_REAVERS"),onConfirm:e=>e.tryConsumeResource("HONED_REAVERS"),extendedStatus:"HONED_STEEL"});Tn("HUNTERS_STING",5,{startOnHotbar:!1,replaceIf:Uc,applicationDelay:.89,potency:[["NEVER",240],["MELEE_MASTERY_VPR",300]],highlightIf:e=>!kc.some(t=>e.hasResourceAvailable(t))||Hy.some(t=>e.hasResourceAvailable(t)),extendedStatus:"HUNTERS_INSTINCT"});Tn("SWIFTSKINS_STING",20,{startOnHotbar:!1,replaceIf:wc,applicationDelay:1.16,potency:[["NEVER",280],["MELEE_MASTERY_VPR",300]],highlightIf:e=>!kc.some(t=>e.hasResourceAvailable(t))||ky.some(t=>e.hasResourceAvailable(t)),extendedStatus:"SWIFTSCALED"});const WF=[["FLANKSTING_STRIKE",1.649,"flank","FLANKSTUNG_VENOM","HINDSTUNG_VENOM",Uc],["FLANKSBANE_FANG",1.604,"flank","FLANKSBANE_VENOM","HINDSBANE_VENOM",wc],["HINDSTING_STRIKE",.98,"rear","HINDSTUNG_VENOM","FLANKSBANE_VENOM",Uc],["HINDSBANE_FANG",1.203,"rear","HINDSBANE_VENOM","FLANKSTUNG_VENOM",wc]];WF.forEach(([e,t,n,a,s,c])=>{Tn(e,30,{startOnHotbar:!1,replaceIf:c,applicationDelay:t,potency:[["NEVER",320],["MELEE_MASTERY_II_VPR",340]],positional:{potency:[["NEVER",380],["MELEE_MASTERY_II_VPR",400]],location:n},jobPotencyModifiers:d=>d.hasResourceAvailable(a)?[$.VenomST]:[],highlightIf:d=>!kc.some(f=>d.hasResourceAvailable(f))||d.hasResourceAvailable(a),onConfirm:d=>{d.gainStatus("DEATH_RATTLE_READY"),d.resources.get("SERPENT_OFFERINGS").gain(10),kc.filter(f=>f!==a).some(f=>d.hasResourceAvailable(f))&&p.reportWarning({kind:"custom",en:"incorrect combo ender!"})},extendedStatus:s})});Tn("HUNTERS_COIL",65,{replaceIf:Py,applicationDelay:.982,potency:570,positional:{potency:620,location:"flank"},baseRecastTime:3,highlightIf:e=>e.hasResourceAvailable("HUNTERS_COIL_READY"),validateAttempt:e=>e.hasResourceAvailable("HUNTERS_COIL_READY"),onConfirm:e=>{e.gainOfferings(5),e.hasTraitUnlocked("VIPERS_BITE")&&(e.gainStatus("HUNTERS_VENOM"),e.gainStatus("COIL_OGCD_READY",2)),e.hasResourceAvailable("SWIFTSKINS_COIL_READY")&&e.gainStatus("SWIFTSKINS_COIL_READY")},extendedStatus:"HUNTERS_INSTINCT"});Tn("SWIFTSKINS_COIL",65,{replaceIf:Gy,applicationDelay:1.473,potency:570,positional:{potency:620,location:"rear"},baseRecastTime:3,highlightIf:e=>e.hasResourceAvailable("SWIFTSKINS_COIL_READY"),validateAttempt:e=>e.hasResourceAvailable("SWIFTSKINS_COIL_READY"),onConfirm:e=>{e.gainOfferings(5),e.hasTraitUnlocked("VIPERS_BITE")&&(e.gainStatus("SWIFTSKINS_VENOM"),e.gainStatus("COIL_OGCD_READY",2)),e.hasResourceAvailable("HUNTERS_COIL_READY")&&e.gainStatus("HUNTERS_COIL_READY")},extendedStatus:"SWIFTSCALED"});Tn("REAWAKEN",90,{replaceIf:jy,applicationDelay:.625,potency:750,falloff:.8,baseRecastTime:2.2,highlightIf:e=>e.hasResourceAvailable("SERPENT_OFFERINGS",50)||e.hasResourceAvailable("READY_TO_REAWAKEN"),validateAttempt:e=>e.hasResourceAvailable("SERPENT_OFFERINGS",50)||e.hasResourceAvailable("READY_TO_REAWAKEN"),onConfirm:e=>{e.tryConsumeResource("READY_TO_REAWAKEN")||e.resources.get("SERPENT_OFFERINGS").consume(50),e.gainStatus("ANGUINE_TRIBUTE",e.resources.get("ANGUINE_TRIBUTE").maxValue),e.gainStatus("REAWAKENED"),e.resources.get("REAWAKENED").removeTimer(),e.resources.addResourceEvent({rscType:"REAWAKENED",name:"cancel reawaken",delay:jt("VPR","REAWAKENED").maxTimeout,fnOnRsc:()=>e.cancelReawaken()})}});Tn("OUROBOROS",96,{startOnHotbar:!1,replaceIf:jy,applicationDelay:2.313,potency:1150,falloff:.8,baseRecastTime:3,highlightIf:e=>e.hasResourceExactly("ANGUINE_TRIBUTE",1),onConfirm:e=>e.cancelReawaken()});Tn("VICEWINDER",65,{applicationDelay:.581,potency:500,secondaryCooldown:{cdName:"cd_VICEWINDER",cooldown:40,maxCharges:2},baseRecastTime:3,validateAttempt:e=>!e.hasResourceAvailable("REAWAKENED")&&!e.hasResourceAvailable("HUNTERS_COIL_READY")&&!e.hasResourceAvailable("SWIFTSKINS_COIL_READY")&&!e.hasResourceAvailable("HUNTERS_DEN_READY")&&!e.hasResourceAvailable("SWIFTSKINS_DEN_READY"),onConfirm:e=>{e.hasTraitUnlocked("VIPERS_RATTLE")&&e.resources.get("RATTLING_COIL").gain(1),e.gainStatus("HUNTERS_COIL_READY"),e.gainStatus("SWIFTSKINS_COIL_READY")}});Tn("UNCOILED_FURY",82,{applicationDelay:.804,potency:680,falloff:.75,baseRecastTime:3.5,highlightIf:e=>e.hasResourceAvailable("RATTLING_COIL"),validateAttempt:e=>e.hasResourceAvailable("RATTLING_COIL"),onConfirm:e=>{e.tryConsumeResource("RATTLING_COIL"),e.hasTraitUnlocked("UNCOILED_FANGS")&&(e.gainStatus("POISED_FOR_TWINFANG"),e.gainStatus("UNCOILED_OGCD_READY",2))},startsAuto:!1});Tn("STEEL_MAW",25,{replaceIf:JE,applicationDelay:1.091,potency:120,falloff:0,jobPotencyModifiers:e=>e.hasResourceAvailable("HONED_STEEL")?[$.HonedAoE]:[],highlightIf:e=>e.hasResourceAvailable("HONED_STEEL"),onConfirm:e=>e.tryConsumeResource("HONED_STEEL"),extendedStatus:"HONED_REAVERS"});Tn("REAVING_MAW",35,{replaceIf:em,applicationDelay:.908,potency:120,falloff:0,jobPotencyModifiers:e=>e.hasResourceAvailable("HONED_REAVERS")?[$.HonedAoE]:[],highlightIf:e=>e.hasResourceAvailable("HONED_REAVERS"),onConfirm:e=>e.tryConsumeResource("HONED_REAVERS"),extendedStatus:"HONED_STEEL"});Tn("HUNTERS_BITE",40,{startOnHotbar:!1,replaceIf:JE,applicationDelay:1.134,potency:180,falloff:0,highlightIf:e=>!0,extendedStatus:"HUNTERS_INSTINCT"});Tn("SWIFTSKINS_BITE",45,{startOnHotbar:!1,replaceIf:em,applicationDelay:1.445,potency:180,falloff:0,highlightIf:e=>!0,extendedStatus:"SWIFTSCALED"});Tn("JAGGED_MAW",50,{startOnHotbar:!1,replaceIf:JE,applicationDelay:1.127,potency:180,falloff:0,jobPotencyModifiers:e=>e.hasResourceAvailable("GRIMSKINS_VENOM")?[$.VenomAoE]:[],highlightIf:e=>e.hasResourceAvailable("GRIMSKINS_VENOM")||!e.hasResourceAvailable("GRIMHUNTERS_VENOM"),onConfirm:e=>{e.gainStatus("LAST_LASH_READY"),e.resources.get("SERPENT_OFFERINGS").gain(10)},extendedStatus:"GRIMHUNTERS_VENOM"});Tn("BLOODIED_MAW",50,{startOnHotbar:!1,replaceIf:em,applicationDelay:.866,potency:180,falloff:0,jobPotencyModifiers:e=>e.hasResourceAvailable("GRIMHUNTERS_VENOM")?[$.VenomAoE]:[],highlightIf:e=>e.hasResourceAvailable("GRIMHUNTERS_VENOM")||!e.hasResourceAvailable("GRIMSKINS_VENOM"),onConfirm:e=>{e.gainStatus("LAST_LASH_READY"),e.resources.get("SERPENT_OFFERINGS").gain(10)},extendedStatus:"GRIMSKINS_VENOM"});Tn("HUNTERS_DEN",70,{replaceIf:[{newSkill:"HUNTERS_DEN",condition:e=>!e.hasResourceAvailable("REAWAKENED")},{newSkill:"THIRD_GENERATION",condition:e=>e.hasResourceAvailable("REAWAKENED")}],applicationDelay:.569,potency:300,falloff:0,baseRecastTime:3,highlightIf:e=>e.hasResourceAvailable("HUNTERS_DEN_READY"),validateAttempt:e=>e.hasResourceAvailable("HUNTERS_DEN_READY"),onConfirm:e=>{e.gainOfferings(5),e.hasTraitUnlocked("VIPERS_THRESH")&&(e.gainStatus("FELLHUNTERS_VENOM"),e.gainStatus("DEN_OGCD_READY",2)),e.hasResourceAvailable("SWIFTSKINS_DEN_READY")&&e.gainStatus("SWIFTSKINS_DEN_READY")},extendedStatus:"HUNTERS_INSTINCT"});Tn("SWIFTSKINS_DEN",70,{replaceIf:[{newSkill:"SWIFTSKINS_DEN",condition:e=>!e.hasResourceAvailable("REAWAKENED")},{newSkill:"FOURTH_GENERATION",condition:e=>e.hasResourceAvailable("REAWAKENED")}],applicationDelay:.999,potency:300,falloff:0,baseRecastTime:3,highlightIf:e=>e.hasResourceAvailable("SWIFTSKINS_DEN_READY"),validateAttempt:e=>e.hasResourceAvailable("SWIFTSKINS_DEN_READY"),onConfirm:e=>{e.gainOfferings(5),e.hasTraitUnlocked("VIPERS_THRESH")&&(e.gainStatus("FELLSKINS_VENOM"),e.gainStatus("DEN_OGCD_READY",2)),e.hasResourceAvailable("HUNTERS_DEN_READY")&&e.gainStatus("HUNTERS_DEN_READY")},extendedStatus:"SWIFTSCALED"});Tn("VICEPIT",70,{applicationDelay:.827,potency:250,secondaryCooldown:{cdName:"cd_VICEWINDER",cooldown:40,maxCharges:2},falloff:0,baseRecastTime:3,validateAttempt:e=>!e.hasResourceAvailable("REAWAKENED")&&!e.hasResourceAvailable("HUNTERS_COIL_READY")&&!e.hasResourceAvailable("SWIFTSKINS_COIL_READY")&&!e.hasResourceAvailable("HUNTERS_DEN_READY")&&!e.hasResourceAvailable("SWIFTSKINS_DEN_READY"),onConfirm:e=>{e.hasTraitUnlocked("VIPERS_RATTLE")&&(p.timeline.duringUntargetable(e.getDisplayTime())||e.resources.get("RATTLING_COIL").gain(1)),e.gainStatus("HUNTERS_DEN_READY"),e.gainStatus("SWIFTSKINS_DEN_READY")}});il("SERPENTS_IRE",86,"cd_SERPENTS_IRE",{applicationDelay:0,cooldown:120,requiresCombat:!0,onConfirm:e=>{e.resources.get("RATTLING_COIL").gain(1),e.hasTraitUnlocked("SERPENTS_LINEAGE")&&e.gainStatus("READY_TO_REAWAKEN")}});il("SLITHER",40,"cd_SLITHER",{applicationDelay:0,cooldown:30,maxCharges:3,animationLock:Jt});il("SERPENTS_TAIL",55,"cd_SERPENTS_TAIL",{replaceIf:tm,applicationDelay:0,cooldown:1,validateAttempt:e=>!1});il("DEATH_RATTLE",55,"cd_SERPENTS_TAIL",{startOnHotbar:!1,replaceIf:tm,applicationDelay:1.697,cooldown:1,potency:280,highlightIf:e=>!0,onConfirm:e=>e.tryConsumeResource("DEATH_RATTLE_READY")});il("LAST_LASH",60,"cd_SERPENTS_TAIL",{startOnHotbar:!1,replaceIf:tm,applicationDelay:1.226,cooldown:1,potency:120,falloff:0,highlightIf:e=>!0,onConfirm:e=>e.tryConsumeResource("LAST_LASH_READY")});il("TWINFANG",75,"cd_TWINFANG",{replaceIf:By,applicationDelay:0,cooldown:1,validateAttempt:e=>!1});il("TWINBLOOD",75,"cd_TWINBLOOD",{replaceIf:Fy,applicationDelay:0,cooldown:1,validateAttempt:e=>!1});const XF=[["TWINFANG_BITE",75,"fang",.629,120,void 0,"COIL_OGCD_READY","HUNTERS_VENOM",$.VenomOGCDST,"SWIFTSKINS_VENOM"],["TWINBLOOD_BITE",75,"blood",.714,120,void 0,"COIL_OGCD_READY","SWIFTSKINS_VENOM",$.VenomOGCDST,"HUNTERS_VENOM"],["TWINFANG_THRESH",80,"fang",.666,50,0,"DEN_OGCD_READY","FELLHUNTERS_VENOM",$.VenomOGCDAoE,"FELLSKINS_VENOM"],["TWINBLOOD_THRESH",80,"blood",.764,50,0,"DEN_OGCD_READY","FELLSKINS_VENOM",$.VenomOGCDAoE,"FELLHUNTERS_VENOM"],["UNCOILED_TWINFANG",92,"fang",1.04,120,.75,"UNCOILED_OGCD_READY","POISED_FOR_TWINFANG",$.Poised,"POISED_FOR_TWINBLOOD"],["UNCOILED_TWINBLOOD",92,"blood",.977,120,.75,"UNCOILED_OGCD_READY","POISED_FOR_TWINBLOOD",$.Poised,"POISED_FOR_TWINFANG"]];XF.forEach(([e,t,n,a,s,c,d,f,h,m])=>{il(e,t,n==="fang"?"cd_TWINFANG":"cd_TWINBLOOD",{startOnHotbar:!1,replaceIf:n==="fang"?By:Fy,applicationDelay:a,cooldown:1,potency:s,falloff:c,highlightIf:R=>R.hasResourceAvailable(f),jobPotencyModifiers:R=>R.hasResourceAvailable(f)?[h]:[],onConfirm:R=>{R.tryConsumeResource(d),R.hasResourceAvailable(f)||p.reportWarning({kind:"custom",en:`unbuffed twin${n} ability!`}),R.tryConsumeResource(f)&&R.hasResourceAvailable(d)?R.gainStatus(m):R.tryConsumeResource(m)},startsAuto:!1})});const qF=[["FIRST_GENERATION",1.702,Uc],["SECOND_GENERATION",1.473,wc],["THIRD_GENERATION",1.473,Py],["FOURTH_GENERATION",1.473,Gy]];qF.forEach(([e,t,n],a)=>{Tn(e,90,{replaceIf:n,startOnHotbar:!1,applicationDelay:t,potency:420,falloff:.8,baseRecastTime:2,combo:{resource:"REAWAKEN_COMBO",resourceValue:a+1,potency:680},highlightIf:s=>s.hasResourceExactly("REAWAKEN_COMBO",a+1),onConfirm:s=>{s.setLegacy(a+1),s.consumeAnguine()}})});const ZF=[["FIRST_LEGACY",1.289],["SECOND_LEGACY",1.065],["THIRD_LEGACY",1.19],["FOURTH_LEGACY",1.065]];ZF.forEach(([e,t])=>{il(e,100,"cd_SERPENTS_TAIL",{startOnHotbar:!1,replaceIf:tm,applicationDelay:t,cooldown:1,potency:320,falloff:.8,highlightIf:n=>!0,onConfirm:n=>n.tryConsumeResource("LEGACY_READY",!0)})});const zy=["SONG_OF_TORMENT","NIGHTBLOOM","FEATHER_RAIN","MORTAL_FLAME","BREATH_OF_MAGIC","WANING_NOCTURNE","DIAMONDBACK","BRUSH_WITH_DEATH"],$F=Object.keys(_S).filter(e=>!zy.includes(e));Object.keys(_S).forEach(e=>qt(e,`BLU/${Ke[e].name}.png`));class QF extends en{jobSpecificOtherTargetedBuffViewProps(){return[...zy.map(t=>this.makeCommonTimer(t,!1))]}jobSpecificSelfTargetedBuffViewProps(){return $F.map(t=>this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){return[]}}const Bn=(e,t,n)=>{Je("BLU",e,t,n??{})};Bn("NIGHTBLOOM",1,{timeout:60});Bn("SONG_OF_TORMENT",1,{timeout:30});Bn("FEATHER_RAIN",1,{timeout:6});Bn("WAXING_NOCTURNE",1,{timeout:15});Bn("WANING_NOCTURNE",1,{timeout:15});Bn("DIAMONDBACK",1,{timeout:10});Bn("BRISTLE",1,{timeout:30});Bn("WHISTLE",1,{timeout:30});Bn("TINGLE",1,{timeout:15});Bn("COLD_FOG",1,{timeout:5});Bn("TOUCH_OF_FROST",1,{timeout:15});Bn("PHANTOM_FLURRY",1,{timeout:5});Bn("APOKALYPSIS",1,{timeout:10});Bn("WINGED_REPROBATION",4);Bn("WINGED_REDEMPTION",1,{timeout:10});Bn("BREATH_OF_MAGIC",1,{timeout:60});Bn("MORTAL_FLAME",1,{timeout:900});Bn("SURPANAKHAS_FURY",4,{timeout:3});Bn("BRUSH_WITH_DEATH",1,{timeout:600});class JF extends tn{constructor(t){super(t),this.cooldowns.set(new ze("cd_SWIFTCAST",60,1,1)),this.registerRecurringEvents([{groupedEffects:[{effectName:"NIGHTBLOOM",appliedBy:["NIGHTBLOOM"]},{effectName:"SONG_OF_TORMENT",appliedBy:["SONG_OF_TORMENT"]}]},{groupedEffects:[{effectName:"FEATHER_RAIN",appliedBy:["FEATHER_RAIN"]}]},{groupedEffects:[{effectName:"BREATH_OF_MAGIC",appliedBy:["BREATH_OF_MAGIC"]}]},{groupedEffects:[{effectName:"MORTAL_FLAME",appliedBy:["MORTAL_FLAME"]}]},{groupedEffects:[{effectName:"PHANTOM_FLURRY",appliedBy:["PHANTOM_FLURRY"],isGroundTargeted:!0,exclude:!0},{effectName:"APOKALYPSIS",appliedBy:["APOKALYPSIS"],isGroundTargeted:!0,exclude:!0}]}])}get statusPropsGenerator(){return new QF(this)}refreshBuff(t,n){this.addEvent(new xe("gain buff",n,()=>{if(this.resources.get(t).gain(1),this.enqueueResourceDrop(t),t==="WANING_NOCTURNE"||t==="DIAMONDBACK"){const a=jt("BLU",t).maxTimeout,s=this.resources.get("NOT_ANIMATION_LOCKED").pendingChange;s!==void 0?this.resources.get("NOT_ANIMATION_LOCKED").overrideTimer(this,Math.max(a,s.timeTillEvent)):this.resources.takeResourceLock("NOT_ANIMATION_LOCKED",a)}}))}jobSpecificRegisterRecurringEvents(){const t=()=>{this.handleDoTTick("PHANTOM_FLURRY"),this.getDisplayTime()>=0&&p.reportDotTick(this.time,"PHANTOM_FLURRY"),this.addEvent(new xe("kick tick",1,()=>{t()}))},n=()=>{this.handleDoTTick("APOKALYPSIS"),this.getDisplayTime()>=0&&p.reportDotTick(this.time,"APOKALYPSIS"),this.addEvent(new xe("Apokalypsis tick",1,()=>{n()}))};let a=this.config.timeTillFirstManaTick+this.dotTickOffset;for(;a>1;)a--;this.addEvent(new xe("initial kick tick",a,t));let s=this.config.timeTillFirstManaTick+this.dotTickOffset;for(;s>1;)s--;this.addEvent(new xe("initial Apokalypsis tick",s,n))}cancelChanneledSkills(){this.tryConsumeResource("PHANTOM_FLURRY"),this.tryConsumeResource("APOKALYPSIS")}}const Ig=e=>e.hasResourceAvailable("WANING_NOCTURNE")||e.hasResourceAvailable("DIAMONDBACK"),ej=e=>e.hasResourceAvailable("PHANTOM_FLURRY"),tj={newSkill:"END_PHANTOM_FLURRY",condition:e=>ej(e)},Zt=(e,t,n)=>{const a=n.basePotency??Number,s=n.aspect??Ne.Other,c=n.baseCastTime??0,d=n.jobPotencyModifiers??(f=>[]);return oa("BLU",e,t,{...n,aspect:s,castTime:f=>f.config.adjustedCastTime(c),potency:n.basePotency,validateAttempt:f=>{var h;return!Ig(f)&&(((h=n.validateAttempt)==null?void 0:h.call(n,f))??!0)},jobPotencyModifiers:f=>{const h=d(f);return f.hasResourceAvailable("WAXING_NOCTURNE")&&h.push($.MoonFlute),a!==0&&f.hasResourceAvailable("BRISTLE")&&h.push($.Bristle)&&f.tryConsumeResource("BRISTLE"),s===Ne.Physical&&f.hasResourceAvailable("WHISTLE")&&h.push($.Whistle)&&f.tryConsumeResource("WHISTLE"),s===Ne.Physical&&e!=="TRIPLE_TRIDENT"&&f.hasResourceAvailable("TINGLE")&&h.push($.TingleA)&&f.tryConsumeResource("TINGLE"),e==="TRIPLE_TRIDENT"&&f.hasResourceAvailable("TINGLE")&&h.push($.TingleB)&&f.tryConsumeResource("TINGLE"),e==="CONVICTION_MARCATO"&&f.hasResourceAvailable("WINGED_REDEMPTION")&&h.push($.WingedRedemption)&&f.tryConsumeResource("WINGED_REDEMPTION"),e==="WINGED_REPROBATION"&&f.resources.get("WINGED_REPROBATION").availableAmount()===3&&h.push($.WingedReprobation),h},isInstantFn:f=>f.hasResourceAvailable("SWIFTCAST")||c===0,onConfirm:Pe(f=>f.tryConsumeResource("SURPANAKHAS_FURY"),n.baseCastTime?f=>f.tryConsumeResource("SWIFTCAST"):void 0,n.onConfirm)})},Hi=(e,t,n,a)=>st("BLU",e,t,n,{jobPotencyModifiers:s=>{const c=[];return s.hasResourceAvailable("WAXING_NOCTURNE")&&c.push($.MoonFlute),c},validateAttempt:s=>{var c;return!Ig(s)&&(((c=a.validateAttempt)==null?void 0:c.call(a,s))??!0)},...a,onConfirm:Pe(s=>{e!=="SURPANAKHA"&&s.tryConsumeResource("SURPANAKHAS_FURY")},a.onConfirm)});Zt("SONIC_BOOM",1,{basePotency:210,baseCastTime:1,manaCost:200,applicationDelay:.5});Zt("SHARPENED_KNIFE",1,{aspect:Ne.Physical,basePotency:220,baseCastTime:1,manaCost:200,applicationDelay:.5});Zt("GOBLIN_PUNCH",1,{aspect:Ne.Physical,basePotency:220,baseCastTime:0,manaCost:200,applicationDelay:.5});Zt("REVENGE_BLAST",1,{aspect:Ne.Physical,basePotency:500,baseCastTime:2,manaCost:200,applicationDelay:.5});Zt("WILD_RAGE",1,{aspect:Ne.Physical,basePotency:500,baseCastTime:5,manaCost:0,applicationDelay:.5});Zt("CONVICTION_MARCATO",1,{basePotency:220,baseCastTime:2,manaCost:200,applicationDelay:.5});Zt("WATER_CANNON",1,{basePotency:200,baseCastTime:2,manaCost:200,applicationDelay:.5});Zt("HYDRO_PULL",1,{basePotency:220,baseCastTime:2,manaCost:200,applicationDelay:.5});Zt("THE_ROSE_OF_DESTRUCTION",1,{basePotency:400,baseCastTime:2,manaCost:300,applicationDelay:.5,secondaryCooldown:{cdName:"cd_THE_ROSE_OF_DESTRUCTION",cooldown:30,maxCharges:1}});Zt("MOON_FLUTE",1,{baseCastTime:2,manaCost:500,applicationDelay:.6,onConfirm:e=>{e.hasResourceAvailable("WAXING_NOCTURNE")||(e.refreshBuff("WAXING_NOCTURNE",.6),e.addEvent(new xe("Waxing_Nocturne ended",15.6,()=>{e.hasResourceAvailable("WANING_NOCTURNE")||e.refreshBuff("WANING_NOCTURNE",0)})))}});Zt("DIAMONDBACK",1,{baseCastTime:2,manaCost:3e3,applicationDelay:.6,onConfirm:e=>{e.hasResourceAvailable("WAXING_NOCTURNE")&&(e.tryConsumeResource("WAXING_NOCTURNE"),e.refreshBuff("WANING_NOCTURNE",0)),e.refreshBuff("DIAMONDBACK",.6)}});Zt("MATRA_MAGIC",1,{basePotency:800,baseCastTime:2,manaCost:200,applicationDelay:.5,secondaryCooldown:{cdName:"cd_MATRA_MAGIC",cooldown:120,maxCharges:1}});Zt("SONG_OF_TORMENT",1,{basePotency:50,baseCastTime:2,manaCost:400,applicationDelay:.5,onConfirm:(e,t)=>{const n=[];e.hasResourceAvailable("WAXING_NOCTURNE")&&n.push($.MoonFlute),e.hasResourceAvailable("BRISTLE")&&n.push($.Bristle),e.addDoTPotencies({node:t,effectName:"SONG_OF_TORMENT",skillName:"SONG_OF_TORMENT",tickPotency:50,speedStat:"sps",modifiers:n})},onApplication:(e,t)=>{e.applyDoT("SONG_OF_TORMENT",t)}});Zt("BREATH_OF_MAGIC",1,{basePotency:0,baseCastTime:2,manaCost:300,applicationDelay:.5,onConfirm:(e,t)=>{const n=[];e.hasResourceAvailable("WAXING_NOCTURNE")&&n.push($.MoonFlute),e.hasResourceAvailable("BRISTLE")&&n.push($.Bristle),e.tryConsumeResource("BRISTLE"),e.addDoTPotencies({node:t,effectName:"BREATH_OF_MAGIC",skillName:"BREATH_OF_MAGIC",tickPotency:120,speedStat:"sps",modifiers:n})},onApplication:(e,t)=>{e.applyDoT("BREATH_OF_MAGIC",t)}});Zt("MORTAL_FLAME",1,{basePotency:0,baseCastTime:2,manaCost:500,applicationDelay:.5,onConfirm:(e,t)=>{const n=[];e.hasResourceAvailable("WAXING_NOCTURNE")&&n.push($.MoonFlute),e.hasResourceAvailable("BRISTLE")&&n.push($.Bristle),e.tryConsumeResource("BRISTLE"),e.addDoTPotencies({node:t,effectName:"MORTAL_FLAME",skillName:"MORTAL_FLAME",tickPotency:40,speedStat:"sps",modifiers:n})},onApplication:(e,t)=>{e.applyDoT("MORTAL_FLAME",t)}});Zt("WHISTLE",1,{baseCastTime:1,manaCost:200,applicationDelay:0,onConfirm:e=>{e.tryConsumeResource("BRISTLE"),e.refreshBuff("WHISTLE",0)}});Zt("BRISTLE",1,{baseCastTime:1,manaCost:200,applicationDelay:0,onConfirm:e=>{e.tryConsumeResource("WHISTLE"),e.refreshBuff("BRISTLE",0)}});Zt("FINAL_STING",1,{aspect:Ne.Physical,basePotency:2e3,baseCastTime:2,manaCost:0,applicationDelay:.5,validateAttempt:e=>!e.hasResourceAvailable("BRUSH_WITH_DEATH"),onConfirm:e=>{e.refreshBuff("BRUSH_WITH_DEATH",0)}});Zt("TINGLE",1,{basePotency:100,baseCastTime:2,manaCost:200,applicationDelay:.5,onConfirm:e=>{e.refreshBuff("TINGLE",0)}});Zt("TRIPLE_TRIDENT",1,{aspect:Ne.Physical,basePotency:450,baseCastTime:2,manaCost:300,applicationDelay:.5,secondaryCooldown:{cdName:"cd_TRIPLE_TRIDENT",cooldown:90,maxCharges:1}});const nj=e=>e.hasResourceAvailable("COLD_FOG"),ij=e=>e.hasResourceAvailable("TOUCH_OF_FROST"),aj=[{newSkill:"POP_COLD_FOG",condition:e=>nj(e)},{newSkill:"WHITE_DEATH",condition:e=>ij(e)}];Zt("COLD_FOG",1,{replaceIf:aj,baseCastTime:2,cooldown:90,manaCost:300,applicationDelay:.5,secondaryCooldown:{cdName:"cd_COLD_FOG",cooldown:90,maxCharges:1},onConfirm:e=>{e.refreshBuff("COLD_FOG",0)}});Zt("WHITE_DEATH",1,{startOnHotbar:!1,basePotency:400,baseCastTime:0,manaCost:0,applicationDelay:.5,validateAttempt:e=>!Ig(e)&&e.hasResourceAvailable("TOUCH_OF_FROST")});Hi("POP_COLD_FOG",1,"cd_COLD_FOG_POP",{startOnHotbar:!1,applicationDelay:0,animationLock:si,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("COLD_FOG"),onConfirm:e=>{e.tryConsumeResource("COLD_FOG"),e.refreshBuff("TOUCH_OF_FROST",0)}});Zt("END_PHANTOM_FLURRY",1,{startOnHotbar:!1,basePotency:600,baseCastTime:0,manaCost:0,applicationDelay:.5,validateAttempt:e=>e.hasResourceAvailable("PHANTOM_FLURRY")});Zt("WINGED_REPROBATION",1,{aspect:Ne.Physical,basePotency:300,baseCastTime:1,manaCost:200,applicationDelay:.5,secondaryCooldown:{cdName:"cd_WINGED_REPROBATION",cooldown:90,maxCharges:1},onConfirm:e=>{e.resources.get("WINGED_REPROBATION").gain(1),e.resources.get("WINGED_REPROBATION").availableAmount()<=3&&e.cooldowns.get("cd_WINGED_REPROBATION").restore(90),e.resources.get("WINGED_REPROBATION").availableAmount()===4&&(e.tryConsumeResource("WINGED_REPROBATION",!0),e.refreshBuff("WINGED_REDEMPTION",0))}});Hi("ERUPTION",1,"cd_ERUPTION",{cooldown:30,manaCost:300,potency:300,applicationDelay:.62});Hi("FEATHER_RAIN",1,"cd_ERUPTION",{cooldown:30,manaCost:300,potency:220,applicationDelay:.62,onConfirm:(e,t)=>{const n=[];e.hasResourceAvailable("WAXING_NOCTURNE")&&n.push($.MoonFlute),e.addDoTPotencies({node:t,effectName:"FEATHER_RAIN",skillName:"FEATHER_RAIN",tickPotency:40,speedStat:"sps",modifiers:n}),e.applyDoT("FEATHER_RAIN",t)}});Hi("MOUNTAIN_BUSTER",1,"cd_SHOCK_STRIKE",{cooldown:60,manaCost:400,potency:400,applicationDelay:.62});Hi("SHOCK_STRIKE",1,"cd_SHOCK_STRIKE",{cooldown:60,manaCost:400,potency:400,applicationDelay:.62});Hi("GLASS_DANCE",1,"cd_GLASS_DANCE",{cooldown:90,manaCost:500,potency:350,applicationDelay:.62});Hi("QUASAR",1,"cd_QUASAR",{cooldown:60,manaCost:300,potency:300,applicationDelay:.62});Hi("J_KICK",1,"cd_QUASAR",{cooldown:60,manaCost:300,potency:300,applicationDelay:1,animationLock:1});Hi("BOTH_ENDS",1,"cd_NIGHTBLOOM",{cooldown:120,manaCost:300,potency:600,applicationDelay:.62});Hi("SEA_SHANTY",1,"cd_SEA_SHANTY",{cooldown:120,manaCost:300,potency:500,applicationDelay:.62});Hi("BEING_MORTAL",1,"cd_BEING_MORTAL",{cooldown:120,manaCost:300,potency:800,applicationDelay:.62});Hi("APOKALYPSIS",1,"cd_BEING_MORTAL",{cooldown:120,manaCost:300,potency:0,applicationDelay:1.38,animationLock:1.38,onConfirm:(e,t)=>{const n=[];e.hasResourceAvailable("WAXING_NOCTURNE")&&n.push($.MoonFlute),e.addDoTPotencies({node:t,effectName:"APOKALYPSIS",skillName:"APOKALYPSIS",tickPotency:140,tickFrequency:1,speedStat:"unscaled",modifiers:n})},onApplication:(e,t)=>{e.applyDoT("APOKALYPSIS",t)}});Hi("NIGHTBLOOM",1,"cd_NIGHTBLOOM",{cooldown:120,manaCost:300,potency:400,applicationDelay:.62,onConfirm:(e,t)=>{const n=[];e.hasResourceAvailable("WAXING_NOCTURNE")&&n.push($.MoonFlute),e.addDoTPotencies({node:t,effectName:"NIGHTBLOOM",skillName:"NIGHTBLOOM",tickPotency:75,speedStat:"sps",modifiers:n})},onApplication:(e,t)=>{e.applyDoT("NIGHTBLOOM",t)}});Hi("PHANTOM_FLURRY",1,"cd_PHANTOM_FLURRY",{replaceIf:[tj],cooldown:120,manaCost:300,potency:0,applicationDelay:.5,onConfirm:(e,t)=>{const n=[];e.hasResourceAvailable("WAXING_NOCTURNE")&&n.push($.MoonFlute),e.addDoTPotencies({node:t,effectName:"PHANTOM_FLURRY",skillName:"PHANTOM_FLURRY",tickPotency:200,tickFrequency:1,speedStat:"unscaled",modifiers:n})},onApplication:(e,t)=>{e.applyDoT("PHANTOM_FLURRY",t)}});Hi("SURPANAKHA",1,"cd_SURPANAKHA_LOCKOUT",{cooldown:1,manaCost:200,potency:e=>200*(1+.5*e.resources.get("SURPANAKHAS_FURY").availableAmount()),applicationDelay:.62,onApplication:e=>{e.resources.get("SURPANAKHAS_FURY").availableAmount()===3?e.tryConsumeResource("SURPANAKHAS_FURY",!0):e.refreshBuff("SURPANAKHAS_FURY",0)},secondaryCooldown:{cdName:"cd_SURPANAKHA",cooldown:30,maxCharges:4}});function cc(e){switch(e.job){case"PLD":return new aF(e);case"WAR":return new tF(e);case"DRK":return new hF(e);case"GNB":return new Q2(e);case"WHM":return new _F(e);case"SCH":return new TF(e);case"AST":return new mF(e);case"SGE":return new ZB(e);case"MNK":return new jF(e);case"DRG":return new B2(e);case"NIN":return new bF(e);case"SAM":return new kB(e);case"RPR":return new LB(e);case"VPR":return new VF(e);case"BRD":return new y2(e);case"MCH":return new rB(e);case"DNC":return new H2(e);case"BLM":return new C2(e);case"SMN":return new GB(e);case"RDM":return new vB(e);case"PCT":return new EB(e);case"BLU":return new JF(e)}return new tn(e)}let Yy=e=>{};function oj(e){return`
		.castTimeTable {
			border-collapse: collapse;
			width: 100%;
		}
		.castTimeTable th, .castTimeTable td {
			text-align: center;
			padding: 0.15em;
			border: 1px solid ${e};
			width: 33%
		}
	`}function lj(e){const t=jt(e.job,e.override.type);let n;const a=Qe(e.override.type);if(t.isCoolDown)n=N({en:a+" full in "+e.override.timeTillFullOrDrop+"s",zh:`${a}${e.override.timeTillFullOrDrop}`});else{n=a;const c=N({en:" (",zh:""}),d=N({en:") ",zh:""});(Ke[e.override.type].mayBeToggled??!1)&&(n+=c+(e.override.effectOrTimerEnabled?N({en:"enabled",zh:""}):N({en:"disabled",zh:""}))+d),t.maxValue>1&&(n+=N({en:` (amount: ${e.override.stacks})`,zh:`${e.override.stacks}`})),t.maxTimeout>=0&&(e.override.type==="POLYGLOT"?e.override.timeTillFullOrDrop>0&&(n+=N({en:` next stack ready in ${e.override.timeTillFullOrDrop}s`,zh:`${e.override.timeTillFullOrDrop}`})):e.override.effectOrTimerEnabled&&(n+=N({en:` drops in ${e.override.timeTillFullOrDrop}s`,zh:`${e.override.timeTillFullOrDrop}`})))}n+=" ";let s;if(e.deleteFn){const c=e.deleteFn;s=l.jsx(Zs,{content:"[x]",onClickFn:d=>{c(e.override.type)}})}return l.jsxs("div",{style:{marginTop:10,color:"mediumpurple"},children:[n,s]})}function sj(e){const t=I=>{const D=e.initialResourceOverrides.findIndex(O=>O.type===I);D!==-1&&(e.initialResourceOverrides.splice(D,1),e.setInitialResourceOverrides(e.initialResourceOverrides))},n=e.initialResourceOverrides.map((I,D)=>l.jsx(lj,{job:e.job,override:I,deleteFn:t},D)),a=new Set(e.initialResourceOverrides.map(I=>I.type)),s=Ao(e.job),d=s.entries().flatMap(([I,D])=>a.has(I)?[]:[{rsc:I,isCoolDown:D.isCoolDown?1:0}]).toArray().sort((I,D)=>I.isCoolDown-D.isCoolDown).map((I,D)=>l.jsx("option",{value:I.rsc,children:Qe(I.rsc)},D)),f=e.selectedOverrideResource,h=s.get(f);let m,R=!0;if(h!==void 0){let I,D,O="-1",x,k="0",H;h.isCoolDown?(I=!0,D=!1,R=!1,O=e.overrideTimer,x=e.setOverrideTimer):(h.maxTimeout>=0?(I=!0,O=e.overrideTimer,x=e.setOverrideTimer):I=!1,h.maxValue>1||h.maxValue===h.defaultValue?(D=!0,k=e.overrideStacks,H=e.setOverrideStacks):D=!1,R=Ke[f].mayBeToggled??!1);const G=h.isCoolDown?N({en:"Time till full: ",zh:"CD"}):N(f==="POLYGLOT"?{en:"Time till next stack: ",zh:""}:{en:"Time till drop: ",zh:" "}),P=N({en:"enabled",zh:""});m=l.jsxs("div",{style:{margin:"6px 0"},children:[l.jsx("div",{hidden:!I,children:l.jsx(Xt,{description:G,defaultValue:O,onChange:x})}),l.jsx("div",{hidden:!D,children:l.jsx(Xt,{description:N({en:"Amount: ",zh:""}),defaultValue:k,onChange:H})}),l.jsxs("div",{hidden:!R,children:[l.jsx("input",{style:{position:"relative",top:3,marginRight:5},type:"checkbox",checked:e.overrideEnabled,onChange:L=>e.setOverrideEnabled(L.target.checked)}),l.jsx("span",{children:P})]})]})}const T=C.useContext(yn),S=Xl(T,"bgMediumContrast"),g=I=>{I.preventDefault();const D=e.selectedOverrideResource,O=Ao(e.job).get(D);let x=parseFloat(e.overrideTimer);const k=parseInt(e.overrideStacks),H=e.overrideEnabled;if(D==="POLYGLOT"&&e.overrideTimer===""&&(x=0),isNaN(k)||isNaN(x)){window.alert("some inputs are not numbers!");return}let G;if(O.isCoolDown){const P=O.maxStacks*O.cdPerStack;if(x<0||x>P){window.alert("invalid input timeout (must be in range [0, "+P+"])");return}G={type:D,timeTillFullOrDrop:x,stacks:O.maxStacks>1?k:1,effectOrTimerEnabled:!0}}else{if((O.maxValue>1||O.maxValue===O.defaultValue)&&(k<0||k>O.maxValue)){window.alert("invalid input amount (must be in range [0, "+O.maxValue+"])");return}if(O.maxTimeout>=0&&(x<0||x>O.maxTimeout)){window.alert("invalid input timeout (must be in range [0, "+O.maxTimeout+"])");return}G={type:D,timeTillFullOrDrop:O.maxTimeout>=0?x:-1,stacks:O.maxValue>1||O.maxValue===O.defaultValue?k:1,effectOrTimerEnabled:R||H}}e.setInitialResourceOverrides([...e.initialResourceOverrides,G])},_=l.jsx("div",{children:l.jsxs("form",{onSubmit:I=>g(I),style:{marginTop:16,outline:"1px solid "+S,outlineOffset:6},children:[l.jsx("select",{value:e.selectedOverrideResource,onChange:I=>{I.target&&e.setSelectedOverrideResource(I.target.value)},children:d}),m,l.jsx("input",{type:"submit",value:N({en:"add override",zh:""})})]})});return l.jsx("div",{style:{marginTop:10},children:l.jsx(Vl,{title:"overrideInitialResources",titleNode:l.jsxs("span",{children:[N({en:"Override initial resources",zh:""})," ",l.jsx(qe,{topic:"overrideInitialResources",content:N({en:l.jsxs("div",{children:[l.jsx("div",{className:"paragraph",style:{color:"orangered"},children:l.jsx("b",{children:"Can create invalid game states. Go over Instructions/Troubleshoot first and use carefully at your own risk!"})}),l.jsx("div",{className:"paragraph",children:"Also, currently thunder dot buff created this way doesn't actually tick. It just shows the remaining buff timer."}),l.jsx("div",{className:"paragraph",children:"I would recommend saving settings (stats, lines presets, timeline markers etc.) to files first, in case invalid game states really mess up the tool and a complete reset is required."})]}),zh:l.jsxs("div",{children:[l.jsx("div",{className:"paragraph",style:{color:"orangered"},children:l.jsx("b",{children:"/"})}),l.jsx("div",{className:"paragraph",children:"dot"}),l.jsx("div",{className:"paragraph",children:""})]})})})]}),content:l.jsxs("div",{children:[l.jsx("button",{onClick:I=>{e.initialResourceOverrides.length>0&&e.setInitialResourceOverrides([]),I.preventDefault()},children:N({en:"clear all overrides",zh:""})}),n,_]})})})}function rj(e){const t=p.game.lucidTickOffset.toFixed(3),n=N({en:"the random time offset of lucid dreaming ticks relative to mp ticks",zh:"buff"}),a=p.game.dotTickOffset.toFixed(3),s=N({en:"the random time offset of DoT ticks relative to mp ticks",zh:"DoT"}),c=p.gameConfig.procMode,d=p.gameConfig.initialResourceOverrides.length,f=p.gameConfig.legacy_casterTax,h=N({en:`WARNING: this record was created in an earlier version of XIV in the Shell and uses the deprecated caster tax of ${f}s instead of calculating from your FPS input below. Hover for details: `,zh:`${f}`}),m=Nt().warning,R=(g,_)=>{const I=Xb[g];if(I.warningContent)return l.jsx("p",{style:{color:_},children:N(I.warningContent)})},T=N({en:l.jsxs("div",{children:[l.jsx("div",{className:"paragraph",children:"The caster tax config is now replaced by 0.1s + FPS tax and is more precise. You can read more about FPS tax in the Github repository wiki's implementation notes section."}),l.jsx("div",{className:"paragraph",style:{color:m},children:"You are strongly encouraged to create a new record (in another timeline slot or from 'apply and reset') and migrate your fight plan. Support for loading legacy files might drop in the future."})]}),zh:l.jsxs("div",{children:[l.jsx("div",{className:"paragraph",children:"0.1s /"}),l.jsx("div",{className:"paragraph",style:{color:m},children:""})]})}),S=l.jsxs("p",{style:{color:m},children:[h,l.jsx(qe,{topic:"legacy-caster-tax",content:T})]});return l.jsxs("div",{style:{textDecoration:e.dirty?"line-through":"none",marginLeft:5,paddingLeft:10,borderLeft:"1px solid "+Nt().bgHighContrast},children:[p.gameConfig.shellVersion<qo.FpsTax?S:void 0,R(mt[e.job].implementationLevel,m),["CASTER","HEALER"].includes(mt[e.job].role)&&l.jsxs("div",{children:[N({en:"Lucid tick offset ",zh:"& "}),l.jsx(qe,{topic:"lucidTickOffset",content:n}),": ",t]}),p.game.dotResources.length>0&&l.jsxs("div",{children:[N({en:"DoT tick offset ",zh:"& "}),l.jsx(qe,{topic:"dotTickOffset",content:s}),": ",a]}),e.job==="MNK"&&l.jsxs("div",{children:[N({en:"SSS GCD",zh:"GCD"}),":"," ",p.gameConfig.adjustedSksGCD(5,p.game.inherentSpeedModifier()).toFixed(2)]}),l.jsxs("p",{children:[N({en:"Procs",zh:""}),": ",c]}),d>0&&l.jsx("p",{children:N({en:`${d} initial resource override(s)`,zh:`${d}`})})]})}function cj(){const t=(()=>{const T=pt("playbackSettings");if(T)return JSON.parse(T)})(),[n,a]=C.useState((t==null?void 0:t.tickMode)??1),[s,c]=C.useState((t==null?void 0:t.timeScale)??ga.Manual),d=(T,S)=>{const g=JSON.stringify({tickMode:S,timeScale:T});Ct("playbackSettings",g)},f=T=>{if(!T||!T.target||isNaN(parseInt(T.target.value)))return;c(parseInt(T.target.value));const S=parseInt(T.target.value);isNaN(S)||(p.setTimeControlSettings({tickMode:S,timeScale:n}),d(n,S))},h=T=>{const S=parseFloat(T);a(S),isNaN(S)||(p.setTimeControlSettings({tickMode:s,timeScale:S}),d(S,n))};C.useEffect(()=>{p.setTimeControlSettings({tickMode:s,timeScale:n})});const m={position:"relative",top:3,marginRight:"0.75em"},R={display:"inline-block",marginRight:"0.5em"};return l.jsxs("div",{children:[l.jsxs("p",{children:[l.jsxs("label",{style:R,children:[l.jsx("input",{style:m,type:"radio",onChange:f,value:ga.RealTimeAutoPause,checked:s===ga.RealTimeAutoPause,name:"tick mode"}),N({en:"real-time auto pause",zh:"("})]}),l.jsx(qe,{topic:"ctrl-realTimeAutoPause",content:l.jsxs("div",{className:"toolTip",children:[N({en:l.jsx("div",{className:"paragraph",children:"*Recommended*"}),zh:l.jsx("div",{className:"paragraph",children:"**"})}),N({en:l.jsxs("div",{className:"paragraph",children:["- click to use a skill. if the skill is on cooldown, or you're in an animation lock, then the simulation will automatically skip ahead to when the skill can be used again",l.jsx("br",{}),"- animation locks and cast bars will play out in sped-up real time until done"]}),zh:l.jsx("div",{className:"paragraph",children:"- ; CDCD"})})]})}),l.jsx("br",{}),l.jsxs("label",{style:R,children:[l.jsx("input",{style:m,type:"radio",onChange:f,value:ga.Manual,checked:s===ga.Manual,name:"tick mode"}),N({en:"manual",zh:""})]}),l.jsx(qe,{topic:"ctrl-manual",content:l.jsx("div",{className:"toolTip",children:N({en:l.jsxs("div",{className:"paragraph",children:["- click to use a skill. if the skill is on cooldown, or you're in an animation lock, then the simulation will automatically skip ahead to when the skill can be used again",l.jsx("br",{}),"- animation locks and cast times are skipped immediately"]}),zh:l.jsx("div",{className:"paragraph",children:"- ; CDCD"})})})})]}),l.jsx(Xt,{defaultValue:`${n}`,description:l.jsxs("span",{children:[N({en:"time scale ",zh:" "}),l.jsx(qe,{topic:"timeScale",content:l.jsx("div",{children:N({en:"rate at which game time advances automatically (aka when in real-time)",zh:""})})}),":"," "]}),onChange:h})]})}function uj(e){const t=C.useContext(yn),n=e.imported?Xl(t,"success"):Xl(t,"text");return l.jsx(Xt,{style:{color:n},defaultValue:e.initial,description:e.description,onChange:a=>{e.dispatch({[e.name]:a}),e.removeImportedField(e.name)}})}function dj(e){const t=Ni(C.useContext(yn)),[n,a]=C.useState(""),{imported:s,setImported:c}=e,d=async R=>{R.preventDefault();const T=URL.parse(n),S=new Headers;try{if(T&&T.hostname==="etro.gg"){const g=T.pathname.split("/");if(g[1]!=="gearset"&&g.length!==3)throw new Error("Invalid etro gearset link (hover ? in URL input box for details)");S.append("Content-Type","application/json");const _=await fetch("https://etro.gg/api/gearsets/"+g[2],{method:"GET",headers:S});if(_.ok){const I=await _.json(),D=new Map(I.totalParams.map(P=>[P.name,P.value])),O=I.totalParams.length>0?I.totalParams[0].value:0;if(!(I.jobAbbrev in mt))throw new Error("Imported gearset was for a job ("+I.jobAbbrev+") that XIV in the Shell doesn't support");const x=Dt.getSubstatBase(parseFloat(I.level)).toString(),k=D.get("SPS")??x,H=D.get("SKS")??x,G=["job","level","criticalHit","directHit","determination","main"];D.has("SPS")&&G.push("spellSpeed"),D.has("SKS")&&G.push("skillSpeed"),D.has("PIE")&&G.push("piety"),D.has("TEN")&&G.push("tenacity"),D.has("Weapon Damage")&&G.push("wd"),e.dispatch({job:I.jobAbbrev,level:I.level,spellSpeed:k,skillSpeed:H,wd:D.get("Weapon Damage"),criticalHit:D.get("CRT"),directHit:D.get("DH"),determination:D.get("DET"),piety:D.get("PIE"),tenacity:D.get("TEN"),main:O}),e.setImportedFields(G),c(!0)}else throw console.error(_),new Error("etro load failed (please check your link)")}else if(T&&T.hostname==="xivgear.app"){const g=T.searchParams.get("page");if(!g)throw new Error("xivgear link must be to a specific set (hover ? in URL input box for details)");const _=g.startsWith("sl|")?g.substr(3):g;S.append("Content-Type","application/json");const I=await fetch("https://api.xivgear.app/fulldata/"+_,{method:"GET",headers:S});if(I.ok){const D=await I.json();if(!(D.job in mt))throw new Error("Imported gearset was for a job ("+D.job+") that XIV in the Shell doesn't support");const O=D.sets[0].computedStats,x=Math.max(...["strength","dexterity","intelligence","mind"].map(G=>O[G]??0)).toString(),k=Math.max(O.wdPhys??0,O.wdMag??0).toString(),H={job:D.job,level:D.level,spellSpeed:O.spellspeed,skillSpeed:O.skillspeed,criticalHit:O.crit,directHit:O.dhit,determination:O.determination,piety:O.piety,tenacity:O.tenacity,wd:k,main:x};e.dispatch(H),e.setImportedFields(Object.keys(H)),c(!0)}else throw console.error("xivgear load failed: "+I),new Error("xivgear load failed (please check your link)")}else{const g=n.split(/\s+/);if(g.length>1){const _={STR:"",DEX:"",INT:"",MND:"",VIT:"",CRT:"",DHT:"",DET:"",SKS:"",SPS:"",TEN:"",PIE:"",CMS:"",CRL:"",CP:"",GTH:"",PCP:"",GP:"",PDMG:"",MDMG:"",DLY:""},I=new Map;for(let x=0;x<g.length-1;x+=2)I.set(g[x],g[x+1]);const D=g[1],O={spellSpeed:I.get(_.SPS),skillSpeed:I.get(_.SKS),criticalHit:I.get(_.CRT),directHit:I.get(_.DHT),determination:I.get(_.DET),piety:I.get(_.PIE),tenacity:I.get(_.TEN),wd:I.get(_.PDMG)??I.get(_.MDMG),main:D};Object.keys(O).forEach(x=>{O[x]===void 0&&delete O[x]}),e.dispatch(O),e.setImportedFields(Object.keys(O)),c(!0)}else throw new Error("Invalid input (must be a link from etro.gg or xivgear.app, or an exported string copied from ffxiv-gearing)")}}catch(g){console.error(g),window.alert(g.message)}},f=l.jsx("a",{href:"https://etro.gg",target:"_blank",rel:"noreferrer",children:"etro"}),h=l.jsx("a",{href:"https://xivgear.app",target:"_blank",rel:"noreferrer",children:"xivgear"}),m=l.jsx("a",{href:"https://asvel.github.io/ffxiv-gearing/",target:"_blank",rel:"noreferrer",children:"ffxiv-gearing"});return l.jsxs("form",{onSubmit:d,children:[N({en:l.jsxs("span",{children:["Load stats from ",f,"/",h,"/",m,":"," "]}),zh:l.jsxs("span",{children:["",f,"",h,"",m,""]})}),l.jsx(qe,{topic:"gearImport",content:l.jsxs(l.Fragment,{children:[l.jsx("p",{children:N({en:l.jsxs("span",{children:["Enter and ",l.jsx(oi,{text:"Load"})," a link to a gearset from xivgear.app or etro.gg or attribute from ffxiv-gearing, edit the rest of config, then ",l.jsx(oi,{text:"apply and reset"}),"."]}),zh:l.jsxs("span",{children:["xivgear.appetro.ggffxiv-gearing",l.jsx(oi,{text:""}),"",l.jsx(oi,{text:""}),""]})})}),l.jsx("p",{children:N({en:"etro: Copy/paste the link to the set (example: https://etro.gg/gearset/e13d5960-4794-4dc4-b273-24ecfed6745e)",zh:"etrohttps://etro.gg/gearset/e13d5960-4794-4dc4-b273-24ecfed6745e"})}),l.jsx("p",{children:N({en:'xivgear: At the top of the page, click "Export" -> "Selected Set" -> "Link to This Set" -> "Generate" (example: https://xivgear.app/?page=sl%7C143f3245-c35b-4391-8b2b-db5cc1a8de9a)',zh:'xivgear "Export" -> "Selected Set" -> "Link to This Set" -> "Generate"https://xivgear.app/?page=sl%7C143f3245-c35b-4391-8b2b-db5cc1a8de9a'})}),l.jsx("p",{children:N({en:l.jsxs(l.Fragment,{children:["ffxiv-gearing: Click the three dots to the right of the race selector option at the bottom of the page, then click the",l.jsx(oi,{text:"Copy Gear Total Attribute Value"}),"option. Note that ffxiv-gearing does not export the gearset's job, so you will need to configure it manually. (example:  6450  3595  3174  1176  420  568  7513  158  2.80)"]}),zh:l.jsxs(l.Fragment,{children:["ffxiv-gearing",l.jsx(oi,{text:""}),"",l.jsx(oi,{text:""}),"ffxiv-gearing 6450  3595  3174  1176  420  568  7513  158  2.80"]})})})]})}),l.jsxs("div",{style:{position:"relative",marginTop:5},children:[l.jsx(Xt,{style:{display:"inline-block"},width:25,description:"",onChange:R=>a(R)}),l.jsx("span",{children:" "}),l.jsx("input",{style:{display:"inline-block"},type:"submit",value:N({en:"Load",zh:""})}),l.jsx(G1,{style:{display:s?"inline":"none",color:t.success,position:"relative",top:4,marginLeft:8}})]})]})}function ib(e,t,n,a){const s=parseInt(n),c=parseInt(e),d=parseFloat(t);let f,h;if(isNaN(s)||isNaN(c)||isNaN(d)||c<Dt.getSubstatBase(s))f="n/a",h="n/a";else{const m=Dt.preTaxGcd(s,c,2.5,a);f=m.toFixed(2),h=Dt.afterFpsTax(d,m).toFixed(3)}return{gcdStr:f,taxedGcdStr:h}}function hj(e){const t=new Map(e.map(d=>[d.type,d]));if(t.has("ASTRAL_FIRE")&&t.has("UMBRAL_ICE")){const d=t.get("ASTRAL_FIRE").stacks,f=t.get("UMBRAL_ICE").stacks;if(d>0&&f>0)return window.alert("shouldn't have both AF and UI stacks"),!1}let n=0,a=0,s=0;if(t.has("ASTRAL_FIRE")&&(n=t.get("ASTRAL_FIRE").stacks),t.has("UMBRAL_ICE")&&(a=t.get("UMBRAL_ICE").stacks),t.has("UMBRAL_HEART")&&(s=t.get("UMBRAL_HEART").stacks),s>0&&n===0&&a===0)return window.alert("since there's at least one UH stack, there should also be Enochian and AF or UI"),!1;let c=!1;return(n>0||a>0||s>0)&&(c=!0),t.has("POLYGLOT")&&t.get("POLYGLOT").timeTillFullOrDrop>0&&!c?(window.alert("since a timer for polyglot is set (time till next stack > 0), there must also be AF/UI"),!1):!0}function fj(){const e=Ni(C.useContext(yn)),[t,n]=C.useState(void 0),[a,s]=C.useState(qo.AllaganGcdFormula),[c,d]=C.useState([]),[f,h]=C.useState("0"),[m,R]=C.useState("0"),[T,S]=C.useState(!0),g=oe=>{P(!0),d(oe),D(oe)},[_,I]=C.useState("NEVER"),D=oe=>{const Ce=new Set(oe.map(be=>be.type)),Te=Ao(H.job).keys().find(be=>!Ce.has(be))??"NEVER";I(Te)},[O,x]=C.useState(!1);function k(oe,Ce){var be,ye;const Te={...oe,...Ce};if(!Object.is(Te,oe)){if(Te.dirty=Ce.dirty??!0,Ce.job!==void 0&&Ce.job!==oe.job){const Ue=new Ia(MT(Ce.job,parseInt(Ce.level??oe.level))),$e=cc(Ue).inherentSpeedModifier();if(n($e),Ce.job===((be=p.record.config)==null?void 0:be.job))Object.assign(Te,p.gameConfig.serialized()),d(p.gameConfig.initialResourceOverrides);else{d([]);const Rt=((ye=Ao(Ce.job).keys().toArray())==null?void 0:ye[0])??"NEVER";I(Rt),Object.assign(Te,e2(Ce.job))}}if(Ce.level!==void 0&&Ce.level!==oe.level){const Ue=new Ia(MT(oe.job,parseInt(Ce.level))),$e=cc(Ue).inherentSpeedModifier();n($e)}x(parseInt(Te.level)!==p.gameConfig.level||Te.job!==p.gameConfig.job)}return Te}const[H,G]=C.useReducer(k,{job:"BLM",level:`${ot.lvl100}`,spellSpeed:"0",skillSpeed:"0",criticalHit:"0",directHit:"0",determination:"0",piety:"0",animationLock:"0",fps:"0",gcdSkillCorrection:"0",timeTillFirstManaTick:"0",countdown:"0",randomSeed:"",procMode:Si.RNG,tenacity:"0",wd:"0",main:"0",dirty:!1}),P=oe=>G({dirty:oe}),L=oe=>Ce=>G({[oe]:Ce}),[j,Z]=C.useState(!1),J=Object.fromEntries(Object.keys(H).map(oe=>[oe,!1])),[se,X]=C.useState(J),Ae=oe=>{X({...se,...Object.fromEntries(oe.map(Ce=>[Ce,!0]))})},W=oe=>{X({...se,[oe]:!1})},ee=()=>{X(J),Z(!1)};C.useEffect(()=>{Yy=oe=>{s(oe.shellVersion),g(oe.initialResourceOverrides),G({...Object.fromEntries(Object.entries(oe).flatMap(([Ce,Te])=>Ce!=="initialResourceOverrides"?[[Ce,Te.toString()]]:[]))}),P(!1),ee(),D(oe.initialResourceOverrides)}});const M=oe=>se[oe]?e.success:e.text,Y=l.jsxs("div",{style:{marginBottom:10},children:[l.jsx("span",{children:N({en:"job: ",zh:""})}),l.jsx("select",{style:{outline:"none",color:M("job")},value:H.job,onChange:oe=>{W("job"),G({job:oe.target.value})},children:Jo.filter(oe=>mt[oe].implementationLevel!=="UNIMPLEMENTED").map(oe=>{const Ce=N({en:oe,zh:mt[oe].zh}),Te=mt[oe].implementationLevel;return Te!=="LIVE"?l.jsx("option",{value:oe,children:Ce+` (${N(Xb[Te].label??{en:""})})`},oe):l.jsx("option",{value:oe,children:Ce},oe)})})]}),{gcdStr:ie,taxedGcdStr:le}=ib(H.spellSpeed,H.fps,H.level,t),{gcdStr:v,taxedGcdStr:z}=ib(H.skillSpeed,H.fps,H.level,t),q=a>=qo.FpsTax?e.text:e.warning,F=H.job,ae=mt[F].role==="CASTER"||mt[F].role==="HEALER",K={en:ae?"spell":"skill",zh:ae?"":""},Q=oe=>Dt.preTaxGcd(parseFloat(H.level),parseFloat(ae?H.spellSpeed:H.skillSpeed),oe,t),he=oe=>Dt.afterFpsTax(parseFloat(H.fps),Q(oe)),me=l.jsxs("div",{children:[l.jsx("style",{children:oj(e.bgHighContrast)}),l.jsx("div",{style:{marginBottom:10},children:N({en:`Preview numbers based on your current ${K.en} speed and FPS input:`,zh:`${K.zh}`})}),l.jsx("table",{className:"castTimeTable",children:l.jsxs("tbody",{children:[l.jsxs("tr",{children:[l.jsx("th",{children:N({en:"GCD time",zh:"GCD"})}),l.jsx("th",{children:N({en:"After FPS tax",zh:""})})]}),[2.5,3,3.5,4].map((oe,Ce)=>l.jsxs("tr",{children:[l.jsxs("td",{children:[Q(oe).toFixed(2)," (",oe.toFixed(2)," ",N({en:"base",zh:""}),")"]}),l.jsx("td",{children:he(oe).toFixed(3)})]},"gcdPreview"+Ce.toString()))]})})]}),Ie=(oe,Ce)=>{if(oe.preventDefault(),!Ce&&O){console.error("attempted to apply w/o reset, but job or level changed");return}if(hj(c)){let Te=H.randomSeed;if(Te.length===0){for(let $e=0;$e<4;$e++)Te+=Math.floor(Math.random()*10).toString();G({randomSeed:Te})}const be=["spellSpeed","skillSpeed","criticalHit","directHit","determination","animationLock","fps","gcdSkillCorrection","timeTillFirstManaTick","countdown","level","wd","main","piety","tenacity"];if(be.map($e=>isNaN(parseFloat(H[$e].toString()))).some($e=>$e)){window.alert("Some config fields are not numbers!");return}if(!(H.job in mt)){window.alert("Invalid job: "+H.job);return}const ye=p.gameConfig.serialized(),Ue=p.record.serialized();p.setConfigAndRestart({job:H.job,randomSeed:Te.trim(),procMode:H.procMode,initialResourceOverrides:c,...Object.fromEntries(be.map($e=>[$e,parseFloat(H[$e].toString())]))},Ce),p.undoStack.push(new qG(ye,p.gameConfig.serialized(),Ce?Ue:void 0)),P(!1),x(!1),ee(),p.updateAllDisplay(),p.scrollToTime()}},pe=["criticalHit","directHit","determination","piety","animationLock"].map(oe=>l.jsx(uj,{name:oe,description:Ku(oe),initial:H[oe].toString(),dispatch:G,imported:se[oe],removeImportedField:Ce=>W(Ce)},oe)),ge=l.jsxs("div",{style:{marginBottom:16},children:[l.jsxs("div",{children:[l.jsx("span",{children:N({en:"level: ",zh:""})}),l.jsxs("select",{style:{outline:"none",color:M("level")},value:H.level,onChange:oe=>G({level:oe.target.value}),children:[(H.level==="100"||F!=="BLU")&&l.jsx("option",{value:ot.lvl100,children:"100"},ot.lvl100),(H.level==="90"||F!=="BLU")&&l.jsx("option",{value:ot.lvl90,children:"90"},ot.lvl90),l.jsx("option",{value:ot.lvl80,children:"80"},ot.lvl80),l.jsx("option",{value:ot.lvl70,children:"70"},ot.lvl70)]})]}),l.jsxs("div",{children:[l.jsx(Xt,{style:{display:"inline-block",color:M("spellSpeed")},defaultValue:H.spellSpeed,description:Ku("spellSpeed"),onChange:L("spellSpeed")}),l.jsxs("span",{children:[" ","(GCD: ",ie," ",l.jsx(qe,{topic:"gcdPreview",content:l.jsxs(l.Fragment,{children:[l.jsx("p",{children:N({en:"Preview of displayed GCD based on your spell speed.",zh:"GCD."})}),l.jsx("p",{children:N({en:`Measured average GCD should be ${le} due to FPS tax.`,zh:`GCD${le}`})})]})}),")"]})]}),l.jsxs("div",{children:[l.jsx(Xt,{style:{display:"inline-block",color:M("skillSpeed")},defaultValue:H.skillSpeed,description:Ku("skillSpeed"),onChange:L("skillSpeed")}),l.jsxs("span",{children:[" ","(GCD: ",v," ",l.jsx(qe,{topic:"sksGcdPreview",content:l.jsxs(l.Fragment,{children:[l.jsx("p",{children:N({en:"Preview of displayed GCD based on your skill speed.",zh:"GCD."})}),l.jsx("p",{children:N({en:`Measured average GCD should be ${z} due to FPS tax.`,zh:`GCD${z}`})})]})}),")"]})]}),pe,l.jsxs("div",{children:[l.jsx(Xt,{componentColor:q,style:{display:"inline-block"},defaultValue:H.fps,description:Ku("fps"),onChange:L("fps")}),l.jsxs("span",{children:[" ","(",N({en:`${Q(2.5).toFixed(2)}s w/ tax`,zh:`${Q(2.5).toFixed(2)}s+`}),": ",he(2.5).toFixed(3)," ",l.jsx(qe,{topic:"gcdTaxPreview",content:me}),")"]})]}),l.jsx(Xt,{componentColor:q,defaultValue:H.gcdSkillCorrection,description:l.jsxs("span",{children:[N({en:"GCD correction",zh:"GCD"})," ",l.jsx(qe,{topic:"cast-time-correction",content:N({en:"Leaving this at 0 will probably give you the most accurate simulation. But if you want to manually correct your GCD skill durations (including casts) for whatever reason, you can put a small number (can be negative)",zh:"0GCD"})}),":"," "]}),onChange:L("gcdSkillCorrection")}),l.jsx(Xt,{defaultValue:H.timeTillFirstManaTick,description:N({en:"time till first MP tick: ",zh:""}),onChange:L("timeTillFirstManaTick")}),l.jsx(Xt,{defaultValue:H.countdown,description:l.jsxs("span",{children:[N({en:"countdown ",zh:" "}),l.jsx(qe,{topic:"countdown",content:N({en:"can use a negative countdown to start from a specific time of fight",zh:""})}),":"," "]}),onChange:L("countdown")}),l.jsx(Xt,{defaultValue:H.randomSeed,description:l.jsxs("span",{children:[N({en:"random seed ",zh:" "}),l.jsx(qe,{topic:"randomSeed",content:N({en:"can be anything, or leave empty to get 4 random digits.",zh:"4"})}),":"," "]}),onChange:L("randomSeed")}),l.jsxs("div",{children:[l.jsxs("span",{children:[N({en:"proc mode ",zh:"BUFF "}),l.jsx(qe,{topic:"procMode",content:N({en:"Default RNG: 40% Firestarter",zh:"RNG40%AlwaysNever"})}),":"," "]}),l.jsxs("select",{style:{outline:"none"},value:H.procMode,onChange:oe=>G({procMode:oe.target.value}),children:[l.jsx("option",{value:Si.RNG,children:"RNG"},Si.RNG),l.jsx("option",{value:Si.Never,children:"Never"},Si.Never),l.jsx("option",{value:Si.Always,children:"Always"},Si.Always)]})]}),l.jsx(sj,{job:H.job,initialResourceOverrides:c,overrideTimer:f,overrideStacks:m,overrideEnabled:T,setInitialResourceOverrides:g,selectedOverrideResource:_,setSelectedOverrideResource:I,setOverrideTimer:h,setOverrideStacks:R,setOverrideEnabled:S})]});return l.jsxs("div",{style:{marginBottom:20},children:[l.jsx(dj,{imported:j,setImported:Z,setImportedFields:Ae,dispatch:G}),l.jsx("br",{}),Y,l.jsx(rj,{job:p.getActiveJob(),dirty:H.dirty}),ge,l.jsx("p",{style:{paddingBottom:5},children:N({en:"You can also import/export fights from/to local files at the bottom of the page.",zh:""})}),l.jsx("div",{className:"invisibleScrollbar",style:{boxSizing:"border-box",width:"100%",position:"absolute",paddingRight:5,paddingLeft:5,bottom:0,left:0,overflowY:"scroll"},children:l.jsxs("div",{style:{width:"100%",boxSizing:"border-box",backgroundColor:e.background,borderTop:"1px solid "+e.bgMediumContrast,paddingTop:5,paddingBottom:5,display:"flex",flexDirection:"row",justifyContent:"space-between",gap:5},children:[l.jsxs("button",{onClick:oe=>Ie(oe,!1),style:{width:"100%",fontWeight:!O&&H.dirty?"bold":"normal",textDecoration:O?"line-through":void 0},disabled:O,children:[N({en:"apply",zh:""}),O&&" ",O&&l.jsx(qe,{topic:"applyWithoutReset",content:N({en:"Must reset timeline because job or level changed.",zh:""})}),!O&&H.dirty?"*":""]}),l.jsxs("button",{onClick:oe=>Ie(oe,!0),style:{width:"100%",fontWeight:H.dirty?"bold":"normal"},children:[N({en:"apply and reset",zh:""}),H.dirty?"*":""]})]})})]})}function Ky(e){let t=Jo[0],n=0;return Jo.forEach(a=>{const s=e.reduce((c,d)=>Jk(a,d)?c+1:c,0);s>n&&(t=a,n=s)}),t}var Wl,vf,Vy;class Ej{constructor(){Fe(this,Wl);re(this,"presetLines",[]);Oe(this,Wl,Vy).call(this)}serialized(){return{fileType:pa.SkillSequencePresets,presets:this.presetLines.map(({actions:t,job:n})=>t.serialized())}}deserializeAndAppend(t){for(const n of t.presets){const a=Lc.deserialize(n.actions);a.name=n.name;const s=a.actions.flatMap(c=>c.info.type===je.Skill?[c.info.skillName]:[]);this.addLine(a,n.job??Ky(s))}}getLinesForJob(t){return this.presetLines.flatMap(({actions:n,job:a})=>a===t?[n]:[])}addLine(t,n){this.presetLines.push({actions:t,job:n}),Yl(),Oe(this,Wl,vf).call(this)}deleteLine(t){for(let n=0;n<this.presetLines.length;n++)if(this.presetLines[n].actions===t){this.presetLines.splice(n,1),Yl(),Oe(this,Wl,vf).call(this);return}console.assert(!1)}deleteAllLines(){this.presetLines=[],Yl(),Oe(this,Wl,vf).call(this)}}Wl=new WeakSet,vf=function(){Ct("presetLines",JSON.stringify(this.serialized()))},Vy=function(){const t=pt("presetLines");if(t!==null){const n=JSON.parse(t);return this.deserializeAndAppend(n),!0}return!1};const mj=new Set(["BLIZZARD","FIRE","BLIZZARD_II","FIRE_II","BLIZZARD_III","FIRE_III","FREEZE","FLARE","BLIZZARD_IV","FIRE_IV","DESPAIR","HIGH_FIRE_II","HIGH_BLIZZARD_II","FLARE_STAR"]),Aj=new Set(["FOUL","XENOGLOSSY","PARADOX"]),Ll=new Set([]),li=e=>p.getUntargetableMask()&&p.timeline.duringUntargetable(e),Pc=(e,t)=>p.getUntargetableMask()?p.timeline.getTargetableDurationBetween(e,t):t-e;function Ls(e){return e.info.type===je.Skill&&p.game.dotSkills.includes(e.info.skillName)}function Rj(e,t,n){console.assert(Ls(e),`${e.getNameForMessage()} is not registered as a dot skill`);const a=e.getInitialPotency(),s={castTime:e.tmp_startLockTime?e.tmp_startLockTime-p.gameConfig.countdown:0,applicationTime:e.applicationTime?e.applicationTime-p.gameConfig.countdown:0,displayedModifiers:[],gap:0,override:0,mainPotencyHit:!0,baseMainPotency:0,baseDotPotency:0,initialHitCalculationModifiers:[],tickCalculationModifiers:[],totalNumTicks:0,numHitTicks:0,potencyWithoutPot:0,potPotency:0,partyBuffPotency:0,mainHitFalloff:(a==null?void 0:a.falloff)??0};s.gap=e.getOverTimeGap(t,"damage",n),s.override=e.getOverTimeOverrideAmount(t,"damage",n),s.baseMainPotency=(a==null?void 0:a.base)??0,s.initialHitCalculationModifiers=(a==null?void 0:a.getDisplayedModifiers([n]))??[],s.mainPotencyHit=e.hitBoss(li),s.tickCalculationModifiers=s.initialHitCalculationModifiers.filter(h=>h.source!==w.COMBO&&h.source!==w.POSITIONAL),t==="WILDFIRE"&&s.displayedModifiers.push(w.NO_CDH);for(let h=0;h<s.initialHitCalculationModifiers.length;h++){const m=s.initialHitCalculationModifiers[h].source;[w.ENO,w.FUGETSU,w.NO_MERCY,w.POWER_SURGE,w.LANCE_CHARGE,w.LIFE_OF_THE_DRAGON,w.BATTLE_LITANY,w.FIGHT_OR_FLIGHT,w.MOON_FLUTE,w.WHISTLE,w.BRISTLE,w.TINGLEA,w.TINGLEB,w.DIVINATION,w.CHAIN_STRAT].includes(m)&&s.displayedModifiers.push(m)}e.getDotPotencies(t).forEach(h=>{h.hasResolved()&&h.hasTarget(n)&&(s.totalNumTicks++,s.baseDotPotency=h.base,h.hasHitBoss(li)&&s.numHitTicks++)});const c=e.getPotency({tincturePotencyMultiplier:1,includePartyBuffs:!1,untargetable:li,includeSplash:!1,targetNumber:n}).applied,d=e.getPotency({tincturePotencyMultiplier:p.getTincturePotencyMultiplier(),includePartyBuffs:!1,untargetable:li,includeSplash:!1,targetNumber:n}).applied,f=e.getPotency({tincturePotencyMultiplier:p.getTincturePotencyMultiplier(),includePartyBuffs:!0,untargetable:li,includeSplash:!1,targetNumber:n}).applied;return s.potencyWithoutPot=c,s.potPotency=d-c,s.partyBuffPotency=f-d,s}function Tj(e){const t={basePotency:0,displayedModifiers:[],calculationModifiers:[],falloff:1,targetList:[1]};if(e.info.type===je.Skill){const n=e.info.skillName,a=e.getInitialPotency(),s=a==null?void 0:a.getDisplayedModifiers(e.targetList);if(a)if(t.targetList=e.targetList,t.falloff=a.falloff??1,mj.has(n)){t.basePotency=a.base,t.calculationModifiers=s;for(const c of t.calculationModifiers){const d=c.source;if(d!==w.ENO&&d!==w.POT){t.displayedModifiers.push(d);break}}}else if(Aj.has(n))for(const c of a.getDisplayedModifiers(e.targetList)){const d=c.source;if(d===w.ENO){t.basePotency=a.base,t.displayedModifiers=[d],t.calculationModifiers=s;break}}else if(Ls(e))t.basePotency=a.base,e.info.targetList=a.targetList;else{t.basePotency=a.base;for(const c of s){const d=c.source;d!==w.POT&&(t.displayedModifiers.push(d),t.calculationModifiers.push(c))}}return t}else return console.assert(!1),t}function Sj(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function gj(e,t){const n=Tj(t),a={mainTableIndex:-1,expandedNode:n};for(let s=0;s<e.length;s++)if(t.info.type===je.Skill&&t.info.skillName===e[s].skillName&&Sj(n.displayedModifiers,e[s].displayedModifiers)&&t.targetList.length===e[s].targetCount)return a.mainTableIndex=s,a;return a}function _a(e){return!Ll.has(e)}function Ij(){return Ll.size===0}function ab(e){e.include&&Ll.has(e.skillNameOrDoT)?(Ll.delete(e.skillNameOrDoT),e.skillNameOrDoT==="DoT"?p.game.dotSkills.forEach(t=>Ll.delete(t)):p.game.dotSkills.includes(e.skillNameOrDoT)&&Ll.delete("DoT")):(Ll.add(e.skillNameOrDoT),e.skillNameOrDoT!=="DoT"&&p.game.dotSkills.includes(e.skillNameOrDoT)&&Ll.add("DoT")),p.displayCurrentState(),p.updateStats()}function _j(e){const t={totalDuration:0,targetableDuration:0,potency:{applied:0,pending:0},gcdSkills:{applied:0,pending:0}},n=p.record.getFirstSelection(),a=p.record.getLastSelection();if(n&&a&&n.tmp_startLockTime!==void 0&&a.tmp_endLockTime!==void 0){t.totalDuration=a.tmp_endLockTime-n.tmp_startLockTime;const s=p.gameConfig.countdown;t.targetableDuration=Pc(n.tmp_startLockTime-s,a.tmp_endLockTime-s)}return p.record.iterateSelected(s=>{if(s.info.type===je.Skill&&!(s.info.skillName in Zo)){const c=_a(s.info.skillName);p.game.skillsList.get(s.info.skillName).cdName==="cd_GCD"&&c&&(s.hitBoss(li)?t.gcdSkills.applied++:s.resolved()||t.gcdSkills.pending++);const f=s.getPotency({tincturePotencyMultiplier:p.getTincturePotencyMultiplier(),untargetable:li,includePartyBuffs:!0,excludeDoT:Ls(s)&&!_a("DoT"),includeSplash:!0});c&&(t.potency.applied+=f.applied,t.potency.pending+=f.snapshottedButPending)}}),t}function pj(e){let t=Zu.Normal;p.displayingUpToDateGameState||(t=Zu.Historical),p.record.getFirstSelection()&&(t=Zu.Selected);const n={applied:0,pending:0},a={applied:0,pending:0},s=[],c={totalPotencyWithoutPot:0,totalPotPotency:0,totalPartyBuffPotency:0},d=new Map,f=new Map,h=m=>{if(m.info.type===je.Skill){const R=m.info.skillName,T=_a(R),S=R in Zo;p.game.skillsList.get(R).cdName==="cd_GCD"&&T&&(m.hitBoss(li)?a.applied++:m.resolved()||a.pending++);const _=m.getPotency({tincturePotencyMultiplier:p.getTincturePotencyMultiplier(),untargetable:li,includePartyBuffs:!0,includeSplash:!0,excludeDoT:Ls(m)&&!_a("DoT")});if(T&&!S&&(n.applied+=_.applied,n.pending+=_.snapshottedButPending),m.resolved()){const I=gj(s,m);I.mainTableIndex<0&&(s.push({skillName:R,displayedModifiers:I.expandedNode.displayedModifiers,basePotency:S?0:I.expandedNode.basePotency,calculationModifiers:I.expandedNode.calculationModifiers,usageCount:0,hitCount:0,totalPotencyWithoutPot:0,showPotency:m.anyPotencies(),potPotency:0,potCount:0,partyBuffPotency:0,falloff:I.expandedNode.falloff,targetCount:I.expandedNode.targetList.length}),I.mainTableIndex=s.length-1);const D=m.hitBoss(li);if(s[I.mainTableIndex].usageCount+=1,D&&(s[I.mainTableIndex].hitCount+=1),S)return;const O=m.getPotency({tincturePotencyMultiplier:1,untargetable:li,includePartyBuffs:!1,excludeDoT:Ls(m)&&!_a("DoT"),includeSplash:!0}).applied,x=m.getPotency({tincturePotencyMultiplier:p.getTincturePotencyMultiplier(),untargetable:li,includePartyBuffs:!1,excludeDoT:Ls(m)&&!_a("DoT"),includeSplash:!0}).applied,k=m.getPotency({tincturePotencyMultiplier:p.getTincturePotencyMultiplier(),untargetable:li,includePartyBuffs:!0,excludeDoT:Ls(m)&&!_a("DoT"),includeSplash:!0}).applied;s[I.mainTableIndex].totalPotencyWithoutPot+=O,s[I.mainTableIndex].potPotency+=x-O,s[I.mainTableIndex].partyBuffPotency+=k-x,D&&m.hasBuff(U.Tincture)&&(s[I.mainTableIndex].potCount+=1);let H=f.get(R)??0;H+=k,f.set(R,H),T&&(c.totalPotencyWithoutPot+=O,c.totalPotPotency+=x-O,c.totalPartyBuffPotency+=k-x),m.getAllDotPotencies().forEach((G,P)=>{let L=d.get(P);L||(L=new Map,d.set(P,L));const j=p.game.excludedDoTs.includes(P);[...new Set(G.flatMap(J=>J.targetList))].sort().forEach(J=>{let se=L.get(J);se===void 0&&(se={tableRows:[],summary:{cumulativeGap:0,cumulativeOverride:0,timeSinceLastDoTDropped:0,totalTicks:0,maxTicks:p.getMaxTicks(p.game.time,P,j),dotCoverageTimeFraction:p.getDotCoverageTimeFraction(p.game.getDisplayTime(),P,J),totalPotencyWithoutPot:0,totalPotPotency:0,totalPartyBuffPotency:0},lastDoT:void 0},L.set(J,se));const X=Rj(m,P,J);se.tableRows.push(X),se.lastDoT=m,se.summary.cumulativeGap+=X.gap,se.summary.cumulativeOverride+=X.override,se.summary.totalTicks+=X.numHitTicks,se.summary.totalPotencyWithoutPot+=X.potencyWithoutPot,se.summary.totalPotPotency+=X.potPotency,se.summary.totalPartyBuffPotency+=X.partyBuffPotency})})}}};return t===Zu.Selected?p.record.iterateSelected(h):p.record.iterateAll(h),d.forEach((m,R)=>{m.forEach((T,S)=>{if(T.lastDoT){const g=T.lastDoT.applicationTime;console.assert(g!==void 0,`DoT node for ${R} was not resolved`);const _=g+p.game.getStatusDuration(R),I=Pc(_,p.game.getDisplayTime()),D=p.game.getDisplayTime()-_;D>0&&(T.summary.cumulativeGap+=I,T.summary.timeSinceLastDoTDropped=D)}else{const g=Pc(0,Math.max(0,p.game.getDisplayTime()));T.summary.cumulativeGap=g,T.summary.timeSinceLastDoTDropped=g}})}),s.sort((m,R)=>{if(m.showPotency!==R.showPotency){const T=m.showPotency?1:0;return(R.showPotency?1:0)-T}else if(m.skillName!==R.skillName){const T=f.get(m.skillName)??0,S=f.get(R.skillName)??0;return T===S?m.skillName.localeCompare(R.skillName):S-T}else{if(m.targetCount!==R.targetCount)return m.targetCount-R.targetCount;if(m.displayedModifiers.length!==R.displayedModifiers.length)return R.displayedModifiers.length-m.displayedModifiers.length;for(let T=0;T<m.displayedModifiers.length;T++){const S=m.displayedModifiers[T]-R.displayedModifiers[T];if(S!==0)return S}return 0}}),{time:p.game.time,tinctureBuffPercentage:e.tinctureBuffPercentage,totalPotency:n,lastDamageApplicationTime:e.lastDamageApplicationTime,countdown:p.gameConfig.countdown,gcdSkills:a,mainTable:s,mainTableSummary:c,dotTables:d,mode:t}}var Zu=(e=>(e[e.Normal=0]="Normal",e[e.Historical=1]="Historical",e[e.Selected=2]="Selected",e))(Zu||{});let BT=e=>{},Wy=e=>{};function Xy(e){const t=Wk(e.buff),n=jk(e.buff);return l.jsx("span",{style:{borderRadius:2,border:"1px solid "+n,fontSize:11,marginRight:4,padding:"1px 4px",background:n+"1f"},children:l.jsx("b",{style:{color:n},children:t})})}function FT(e){let t=e.basePotency,n=e.basePotency.toFixed(2)+N({en:"(base)",zh:"()"});e.explainUntargetable&&(n+=N({en:"(untargetable)",zh:"()"}));let a="";if(e.calc.forEach(s=>{s.kind==="adder"&&s.additiveAmount>0&&(t+=s.additiveAmount,a+=" + "+s.additiveAmount+"("+HN(s.source)+")")}),a&&(n="[ "+n+a+" ]"),e.calc.forEach(s=>{s.kind==="multiplier"&&s.potencyFactor!==1&&(t*=s.potencyFactor,n+="  "+s.potencyFactor+"("+HN(s.source)+")")}),e.targetCount&&e.falloff!==void 0&&e.targetCount>1){const s=1+(1-e.falloff)*(e.targetCount-1);n=`[ ${n} ]  ${s}(${e.targetCount}${N({en:" targets",zh:""})})`,t*=s}return l.jsxs("span",{style:{textDecoration:e.includeInStats?"none":"line-through"},children:[t.toFixed(2)," ",l.jsx(qe,{topic:e.helpTopic,content:n})]})}function Nj(){const[e,t]=C.useState("8"),n=s=>{t(s);const c=parseFloat(s);isNaN(c)||(p.setTinctureBuffPercentage(c),Ct("tinctureBuffPercentage",s))};C.useEffect(()=>{const s=pt("tinctureBuffPercentage");s!==null&&n(s)},[]);const a=l.jsxs("span",{children:[N({en:"exclude damage when untargetable",zh:"Boss0"})," ",l.jsx(qe,{topic:"untargetableMask",content:l.jsxs("div",{children:[l.jsx("div",{className:"paragraph",children:N({en:"Having this checked will exclude damages from untargetable phases.",zh:"Boss"})}),l.jsx("div",{className:"paragraph",children:N({en:'You can mark up such phases using timeline markers of type "Untargetable".',zh:"  "})}),l.jsx("div",{className:"paragraph",children:N({en:"This is just a statistics helper though. For example it doesn't prevent you from using skills when the boss is untargetable.",zh:"  "})})]})})]});return l.jsxs("div",{children:[l.jsx(Xt,{defaultValue:e,description:N({en:" tincture potency buff ",zh:" "}),onChange:n,width:2,style:{display:"inline"}}),l.jsx("span",{children:"%"}),l.jsx(Xu,{uniqueName:"untargetableMask",label:a,onChange:s=>{p.setUntargetableMask(s)}})]})}const qy="0.375em 0.75em",St=function(e){return{verticalAlign:"middle",boxSizing:"border-box",display:"inline-block",width:e+"%",padding:qy}};function Cj(e){const t=Nt(),n=e.row.displayedModifiers.map((S,g)=>l.jsx(Xy,{buff:S},g)),a=e.row.gap.toFixed(3),s=e.row.gap>0?l.jsx("span",{children:a}):l.jsx("span",{}),c=e.row.override.toFixed(3),d=e.row.override>0?l.jsx("span",{children:c}):l.jsx("span",{}),f=l.jsx(FT,{basePotency:e.row.mainPotencyHit?e.row.baseMainPotency:0,includeInStats:!0,explainUntargetable:!e.row.mainPotencyHit,helpTopic:e.name+"Table-main-"+e.targetNumber,calc:e.row.initialHitCalculationModifiers,targetCount:1,falloff:e.row.mainHitFalloff}),h=l.jsx(FT,{basePotency:e.row.baseDotPotency,includeInStats:!0,helpTopic:e.name+"Table-dot-"+e.targetNumber,calc:e.row.tickCalculationModifiers,targetCount:1,falloff:0}),m=e.row.totalNumTicks-e.row.numHitTicks,R=l.jsxs("span",{children:[e.row.numHitTicks,m>0?l.jsxs("span",{style:{color:t.timeline.untargetableDamageMark+"af"},children:[" ","+",m," ",l.jsx(qe,{topic:e.name+"Table-numUntargetableTicks-"+e.targetNumber,content:N({en:"tick(s) when untargetable",zh:"BossDoT"})})]}):void 0]}),T=l.jsxs("span",{children:[e.row.potencyWithoutPot.toFixed(2),e.row.potPotency>0?l.jsxs("span",{style:{color:t.timeline.potCover},children:[" ","+",e.row.potPotency.toFixed(2),"(",N({en:"pot",zh:""}),")"]}):void 0,e.row.partyBuffPotency>0?l.jsxs("span",{style:{color:t.accent},children:[" ","+",e.row.partyBuffPotency.toFixed(2),"(",N({en:"party",zh:""}),")"]}):void 0]});return l.jsx("div",{style:{textAlign:"left",position:"relative",borderTop:"1px solid "+t.bgMediumContrast},children:e.isPetTracker?l.jsxs(l.Fragment,{children:[l.jsx("div",{style:St(3)}),l.jsx("div",{style:St(12),children:e.row.castTime.toFixed(3)}),l.jsx("div",{style:St(27),children:n}),l.jsx("div",{style:St(20),children:h}),l.jsx("div",{style:St(8),children:R}),l.jsx("div",{style:St(30),children:T})]}):l.jsxs(l.Fragment,{children:[l.jsx("div",{style:St(8),children:e.row.castTime.toFixed(3)}),l.jsx("div",{style:St(8),children:e.row.applicationTime.toFixed(3)}),l.jsx("div",{style:St(12),children:n}),l.jsx("div",{style:St(10),children:s}),l.jsx("div",{style:St(10),children:d}),l.jsx("div",{style:St(10),children:f}),l.jsx("div",{style:St(10),children:h}),l.jsx("div",{style:St(8),children:R}),l.jsx("div",{style:St(24),children:T})]})})}function bj(e){const t=e.summary,n=e.headerCellStyle,a=`${Qe(e.dotName)}  Boss ${e.targetNumber} ${e.dotHeaderSuffix}`,s=Nt(),c=Ke[e.dotName].isPetTracker,d=e.tableRows.map((f,h)=>l.jsx(Cj,{name:e.dotName,targetNumber:e.targetNumber,row:f,isPetTracker:c},h));return l.jsxs("div",{style:{position:"relative",margin:"0 auto",marginBottom:40,maxWidth:960},children:[l.jsx("div",{style:{...St(100),textAlign:"center",marginBottom:10},children:l.jsx("b",{style:{color:s.text},children:a})}),l.jsxs("div",{style:{outline:"1px solid "+s.bgMediumContrast},children:[l.jsxs("div",{children:[c&&l.jsx("div",{style:{display:"inline-block",width:"3%"}}),l.jsx("div",{style:{display:"inline-block",width:c?"12%":"8%"},children:l.jsx("span",{style:n,children:l.jsx("b",{children:N({en:"cast time",zh:""})})})}),!c&&l.jsx("div",{style:{display:"inline-block",width:"8%"},children:l.jsx("span",{style:n,children:l.jsx("b",{children:N({en:"application time",zh:""})})})}),l.jsx("div",{style:{display:"inline-block",width:c?"27%":"12%"},children:l.jsx("span",{style:n})}),!c&&l.jsx("div",{style:{display:"inline-block",width:"10%"},children:l.jsxs("span",{style:n,children:[l.jsxs("b",{children:[N({en:"gap",zh:"DoT"})," "]}),l.jsx(qe,{topic:`dot-gap-title-${e.dotName}-${e.targetNumber}`,content:N({en:l.jsxs("div",{children:[l.jsx("div",{className:"paragraph",children:"DoT coverage time gap since pull or previous application"}),l.jsx("div",{className:"paragraph",children:"The last row also includes gap at the beginning and end of the fight"})]}),zh:l.jsx("div",{children:"DoTDoT"})})})]})}),!c&&l.jsx("div",{style:{display:"inline-block",width:"10%"},children:l.jsxs("span",{style:n,children:[l.jsxs("b",{children:[N({en:"override",zh:"DoT"})," "]}),l.jsx(qe,{topic:`dot-override-title-${e.dotName}-${e.targetNumber}`,content:N({en:l.jsx("div",{children:"Overridden DoT time from previous application"}),zh:l.jsx("div",{children:"DoT"})})})]})}),!c&&l.jsx("div",{style:{display:"inline-block",width:"10%"},children:l.jsx("span",{style:n,children:l.jsx("b",{children:N({en:"initial",zh:""})})})}),l.jsx("div",{style:{display:"inline-block",width:c?"20%":"10%"},children:l.jsx("span",{style:n,children:l.jsx("b",{children:N(c?{en:"last hit potency",zh:""}:{en:"DoT",zh:"DoT"})})})}),l.jsx("div",{style:{display:"inline-block",width:"8%"},children:l.jsx("span",{style:n,children:l.jsx("b",{children:N(c?{en:"hits",zh:""}:{en:"ticks",zh:"DoT"})})})}),l.jsx("div",{style:{display:"inline-block",width:c?"30%":"24%"},children:l.jsx("span",{style:n,children:l.jsx("b",{children:N({en:"total",zh:""})})})})]}),d,l.jsxs("div",{style:{textAlign:"left",position:"relative",borderTop:"1px solid "+s.bgMediumContrast},children:[c?l.jsx("div",{style:St(70)}):l.jsxs(l.Fragment,{children:[l.jsx("div",{style:St(28)}),l.jsx("div",{style:St(10),children:t.cumulativeGap.toFixed(3)}),l.jsx("div",{style:St(10),children:t.cumulativeOverride.toFixed(3)}),l.jsx("div",{style:St(20)}),l.jsx("div",{style:St(8),children:p.game.fullTimeDoTs.includes(e.dotName)?l.jsxs(l.Fragment,{children:[t.totalTicks,"/",t.maxTicks]}):l.jsx(l.Fragment,{children:t.totalTicks})})]}),l.jsxs("div",{style:St(24),children:[t.totalPotencyWithoutPot.toFixed(2),t.totalPotPotency>0?l.jsxs("span",{style:{color:s.timeline.potCover},children:[" ","+",t.totalPotPotency.toFixed(2),N({en:"(pot +"+e.tinctureBuffPercentage+"%)",zh:"( +"+e.tinctureBuffPercentage+"%)"})]}):void 0,t.totalPartyBuffPotency>0?l.jsxs("span",{style:{color:s.accent},children:[" ","+",t.totalPartyBuffPotency.toFixed(2),"(",N({en:"party",zh:""}),")"]}):void 0]})]})]})]})}class Zy extends _i.Component{constructor(n){super(n);re(this,"selected",{totalDuration:0,targetableDuration:0,potency:{applied:0,pending:0},gcdSkills:{applied:0,pending:0}});re(this,"data",{time:0,tinctureBuffPercentage:0,countdown:0,totalPotency:{applied:0,pending:0},lastDamageApplicationTime:0,gcdSkills:{applied:0,pending:0},mainTable:[],mainTableSummary:{totalPotencyWithoutPot:0,totalPotPotency:0,totalPartyBuffPotency:0},dotTables:new Map,mode:0});BT=a=>{this.data={...this.data,...a},this.forceUpdate()},Wy=a=>{this.selected={...this.selected,...a},this.forceUpdate()}}componentWillUnmount(){BT=n=>{}}render(){const n=Ni(this.context),a=Ij(),s=N({en:": ",zh:""}),c=N({en:" (",zh:""}),d=N({en:") ",zh:""}),f=a?"":N({en:" (checked only)",zh:""}),h=this.data.lastDamageApplicationTime-this.data.countdown,m=Pc(0,h),R=this.data.lastDamageApplicationTime>-this.data.countdown,T=R?h.toFixed(3).toString():"N/A";let S=N({en:"Total potency",zh:""}),g=N({en:"Selected potency",zh:""});if(this.data.tinctureBuffPercentage>0){const M=c+N({en:"pot +",zh:" +"})+this.data.tinctureBuffPercentage+"%"+d;S+=M,g+=M}S+=f,g+=f,S+=s+this.data.totalPotency.applied.toFixed(2),g+=s+this.selected.potency.applied.toFixed(2),this.data.totalPotency.pending>0&&(S+=c+this.data.totalPotency.pending.toFixed(2)+N({en:" pending",zh:""})+d),this.selected.potency.pending>0&&(g+=c+this.selected.potency.pending.toFixed(2)+N({en:" pending",zh:""})+d);let _=N({en:"GCD skills",zh:"GCD"})+f+s+this.data.gcdSkills.applied,I=N({en:"Selected GCD skills",zh:"GCD"})+f+s+this.selected.gcdSkills.applied;this.data.gcdSkills.pending>0&&(_+=c+"+"+this.data.gcdSkills.pending+N({en:" not yet applied",zh:""})+d),this.selected.gcdSkills.pending>0&&(I+=c+"+"+this.selected.gcdSkills.pending+N({en:" not yet applied",zh:""})+d);const D=p.game.overTimeEffectGroups.filter(M=>M.reportName&&!M.isHealing).map(M=>{const Y=new Map;M.groupedEffects.forEach(le=>{const v=this.data.dotTables.get(le.effectName);v&&v.forEach((z,q)=>{Y.has(q)||Y.set(q,{uptime:0,totalTicks:0,maxTicks:0});const F=Y.get(q);F.uptime+=z.summary.dotCoverageTimeFraction,F.totalTicks+=z.summary.totalTicks,F.maxTicks=Math.max(F.maxTicks,z.summary.maxTicks)})});const ie=[];return Y.forEach((le,v)=>{let z=M.reportName+N({en:` uptime (Boss ${v})`,zh:`Boss ${v}`})+s;const{uptime:q,totalTicks:F,maxTicks:ae}=le;z+=(q*100).toFixed(2)+"%",z+=c+N({en:"ticks",zh:"DoT"})+s+F+"/"+ae+d,ie.push(l.jsx("div",{children:z},`dot-uptime-${M.reportName}-${v}`))}),ie});let O;const x=this.selected.targetableDuration>0;this.selected.totalDuration>0&&(O=l.jsxs("div",{style:{flex:1,color:n.accent},children:[l.jsxs("div",{children:[N({en:"Selected duration",zh:""}),s,this.selected.totalDuration.toFixed(3)]}),l.jsx("div",{children:g}),l.jsxs("div",{children:[N({en:"Selected PPS",zh:"PPS"}),s,x?(this.selected.potency.applied/this.selected.targetableDuration).toFixed(2):"N/A"]}),l.jsx("div",{children:I})]}));const k=l.jsxs("div",{style:{display:"flex",marginBottom:10,flexDirection:"row"},children:[l.jsxs("div",{style:{flex:1},children:[l.jsxs("div",{style:{color:this.data.mode!==0?n.historical:n.text},children:[l.jsxs("div",{children:[N({en:"Last damage application time",zh:""}),s,T]}),l.jsx("div",{children:S}),l.jsxs("div",{children:["PPS"," ",l.jsx(qe,{topic:"ppsNotes",content:l.jsxs("div",{className:"toolTip",children:[l.jsx("div",{className:"paragraph",children:N({en:"(total applied potency of checked skills) / (total targetable duration from 0s until last damage application time).",zh:" / (0s - )"})}),l.jsx("div",{className:"paragraph",children:N({en:"could be inaccurate if any damage happens before pull, or if some damage's not applied yet",zh:"0sPPS"})})]})}),s,R?(this.data.totalPotency.applied/m).toFixed(2):"N/A"]}),l.jsx("div",{children:_}),D]}),l.jsxs("div",{style:{marginTop:10},children:[l.jsx(Nj,{}),l.jsx(Kl,{fileFormat:Qo.Csv,getContentFn:()=>({body:p.getDamageLogCsv()}),filename:"damage-log",displayName:N({en:"download detailed damage log as CSV file",zh:"CSV"})})]})]}),O]}),H=M=>p.game.dotSkills.includes(M),G=M=>p.game.petSkills.includes(M),P=function(M){return H(M)?!0:["AUTOMATON_QUEEN","WILDFIRE",...Object.keys(Zo)].includes(M)},L=function(M){const Y=M.row.skillName===M.lastRowSkill,ie=[];ie.push(M.row.displayedModifiers.map((me,Ie)=>l.jsx(Xy,{buff:me},Ie)));const le=_a(M.row.skillName),v=[];!Y&&M.row.basePotency>0&&!(M.row.skillName in Zo)&&v.push(l.jsx("input",{type:"checkbox",style:{position:"relative",top:2,marginRight:10},checked:le,onChange:()=>{ab({skillNameOrDoT:M.row.skillName,include:!le})}},"main")),!Y&&H(M.row.skillName)&&v.push(l.jsx("input",{type:"checkbox",style:{position:"relative",top:2,marginRight:10},checked:_a("DoT"),onChange:()=>{ab({skillNameOrDoT:"DoT",include:!_a("DoT")})}},"dot"));let z;Y||(z=l.jsxs("span",{children:[l.jsxs("span",{style:{textDecoration:le?"none":"line-through",color:le?n.text:n.bgHighContrast},children:[aa(M.row.skillName)," "]}),H(M.row.skillName)&&l.jsxs(l.Fragment,{children:[l.jsxs("span",{style:{textDecoration:_a("DoT")?"none":"line-through",color:_a("DoT")?n.text:n.bgHighContrast},children:[G(M.row.skillName)?N({en:"(pet)",zh:""}):N({en:"(DoT)",zh:"DoT"})," "]}),l.jsx(qe,{topic:`potencyStats-${M.row.skillName}`,content:N({en:"See table below for details",zh:""})})]})]}));let q;M.row.targetCount&&M.row.basePotency>0&&(q=l.jsx("span",{style:{textDecoration:le?"none":"line-through"},children:M.row.targetCount}));let F;M.row.basePotency>0&&!P(M.row.skillName)&&(F=l.jsx(FT,{includeInStats:le,basePotency:M.row.basePotency,helpTopic:"mainTable-potencyCalc-"+M.key,calc:M.row.calculationModifiers,falloff:M.row.falloff,targetCount:M.row.targetCount}));const ae=M.row.usageCount-M.row.hitCount,K=l.jsxs("span",{style:{textDecoration:le?"none":"line-through"},children:[M.row.hitCount,ae>0?l.jsxs("span",{style:{color:n.timeline.untargetableDamageMark+"af"},children:[" ","+",ae," ",l.jsx(qe,{topic:"mainTable-numUntargetableUsages-"+M.key,content:N({en:"usage(s) when untargetable",zh:"Boss"})})]}):void 0]});let Q;M.row.showPotency&&!(M.row.skillName in Zo)&&(Q=l.jsxs("span",{style:{textDecoration:le?"none":"line-through"},children:[M.row.totalPotencyWithoutPot.toFixed(2),M.row.potPotency>0?l.jsxs("span",{style:{color:le?n.timeline.potCover:n.bgHighContrast},children:[" ","+",M.row.potPotency.toFixed(2),"(",N({en:"pot",zh:""}),")(",M.row.potCount,")"]}):void 0,M.row.partyBuffPotency>0?l.jsxs("span",{style:{color:le?n.accent:n.bgHighContrast},children:[" ","+",M.row.partyBuffPotency.toFixed(2),"(",N({en:"party",zh:""}),")"]}):void 0]}));const he={textAlign:"left",position:"relative",borderTop:Y?"none":"1px solid "+n.bgMediumContrast};return le||(he.color=n.bgHighContrast),l.jsxs("div",{style:he,children:[l.jsx("div",{style:St(3),children:v}),l.jsx("div",{style:St(18),children:z}),l.jsx("div",{style:St(8),children:q}),l.jsx("div",{style:St(19),children:ie}),l.jsx("div",{style:St(14),children:F}),l.jsx("div",{style:St(8),children:K}),l.jsx("div",{style:St(30),children:Q})]},M.key)},j=[];for(let M=0;M<this.data.mainTable.length;M++)j.push(L({row:this.data.mainTable[M],key:M,lastRowSkill:M===0?void 0:this.data.mainTable[M-1].skillName}));const Z={display:"inline-block",padding:qy};let J=N(a?{en:"Applied Skills",zh:""}:{en:"Applied Skills (Checked Only)",zh:""}),se="";if(this.data.mode===1){const M=(this.data.time-this.data.countdown).toFixed(3)+"s",Y=c+N({en:"up till "+M,zh:""+M})+d;J+=Y,se=Y}else if(this.data.mode===2){const M=c+N({en:"from selected skills",zh:""})+d;J+=M,se+=M}let X=n.text;this.data.mode===1?X=n.historical:this.data.mode===2&&(X=n.accent);const Ae=l.jsxs("div",{id:"damageTable",style:{position:"relative",margin:"0 auto",marginBottom:40,maxWidth:960},children:[l.jsx("div",{style:{...St(100),textAlign:"center",marginBottom:10},children:l.jsx("b",{style:{color:X},children:J})}),l.jsxs("div",{style:{outline:"1px solid "+n.bgMediumContrast},children:[l.jsxs("div",{children:[l.jsx("div",{style:{display:"inline-block",width:"21%"},children:l.jsx("span",{style:Z,children:l.jsx("b",{children:N({en:"skill",zh:""})})})}),l.jsx("div",{style:{display:"inline-block",width:"27%"},children:l.jsx("span",{style:Z,children:l.jsx("b",{children:N({en:"targets",zh:""})})})}),l.jsx("div",{style:{display:"inline-block",width:"14%"},children:l.jsx("span",{style:Z,children:l.jsx("b",{children:N({en:"potency",zh:""})})})}),l.jsx("div",{style:{display:"inline-block",width:"8%"},children:l.jsx("span",{style:Z,children:l.jsx("b",{children:N({en:"count",zh:""})})})}),l.jsx("div",{style:{display:"inline-block",width:"30%"},children:l.jsx("span",{style:Z,children:l.jsx("b",{children:N({en:"total",zh:""})})})})]}),j,l.jsxs("div",{style:{textAlign:"left",position:"relative",borderTop:"1px solid "+n.bgMediumContrast},children:[l.jsx("div",{style:St(70)}),l.jsx("div",{style:St(30),children:l.jsxs("span",{children:[this.data.mainTableSummary.totalPotencyWithoutPot.toFixed(2),this.data.mainTableSummary.totalPotPotency>0?l.jsxs("span",{style:{color:n.timeline.potCover},children:[" ","+",this.data.mainTableSummary.totalPotPotency.toFixed(2),N({en:" (pot +"+this.data.tinctureBuffPercentage+"%)",zh:"( +"+this.data.tinctureBuffPercentage+"%)"})]}):void 0,this.data.mainTableSummary.totalPartyBuffPotency>0?l.jsxs("span",{style:{color:n.accent},children:[" ","+",this.data.mainTableSummary.totalPartyBuffPotency.toFixed(2),"(",N({en:"party",zh:""}),")"]}):void 0]})})]})]})]}),W=[];let ee=0;return this.data.dotTables.forEach((M,Y)=>{M.forEach((ie,le)=>{var z,q;const v=(q=(z=this.data.dotTables.get(Y))==null?void 0:z.get(le))==null?void 0:q.summary;v!==void 0&&W.push({targetNumber:le,dotName:Y,node:l.jsx(bj,{summary:v,tableRows:ie.tableRows,dotHeaderSuffix:se,dotName:Y,headerCellStyle:Z,targetNumber:le,tinctureBuffPercentage:this.data.tinctureBuffPercentage},ee++)})})}),W.sort((M,Y)=>{const ie=M.targetNumber-Y.targetNumber;return ie===0?M.dotName.localeCompare(Y.dotName):ie}),l.jsxs("div",{children:[k,l.jsxs("div",{children:[Ae,W.map(M=>M.node)]})]})}}re(Zy,"contextType",yn);const kd=e=>{e.job==="RDM"&&e.tryConsumeResource("DUALCAST")&&p.reportWarning({kind:"custom",en:"dualcast dropped"})},Ja=e=>e.job!=="NIN"||!e.hasResourceAvailable("TEN_CHI_JIN"),eo=e=>{e.job==="NIN"&&e.hasResourceAvailable("MUDRA")&&e.gainStatus("BUNNY")};st(bi,"INTERJECT",18,"cd_HEAD_GRAZE",{applicationDelay:0,cooldown:30,assetPath:"Role/Interject.png",startsAuto:!0});st(go,"HEAD_GRAZE",24,"cd_HEAD_GRAZE",{applicationDelay:0,cooldown:30,assetPath:"Role/Head Graze.png"});bi.forEach(e=>{Je(e,"REPRISAL",1,{timeout:15})});Ze(bi,"REPRISAL",22,"cd_REPRISAL",{rscType:"REPRISAL",applicationDelay:.62,cooldown:60,duration:e=>e.hasTraitUnlocked("ENHANCED_REPRISAL")&&15||10,assetPath:"Role/Reprisal.png",startsAuto:!0});Ei.forEach(e=>{Je(e,"FEINT",1,{timeout:15})});Ze(Ei,"FEINT",22,"cd_FEINT",{rscType:"FEINT",applicationDelay:.537,cooldown:90,duration:e=>e.hasTraitUnlocked("ENHANCED_FEINT")&&15||10,assetPath:"Role/Feint.png",validateAttempt:Ja,onConfirm:eo});[...es,...Ma].forEach(e=>{Je(e,"ADDLE",1,{timeout:15})});Ze([...Ma,...es],"ADDLE",8,"cd_ADDLE",{rscType:"ADDLE",applicationDelay:.621,cooldown:90,duration:e=>e.hasTraitUnlocked("ENHANCED_ADDLE")&&15||10,assetPath:"Role/Addle.png"});bi.forEach(e=>{Je(e,"RAMPART",1,{timeout:20})});Ze(bi,"RAMPART",8,"cd_RAMPART",{rscType:"RAMPART",applicationDelay:.62,cooldown:90,assetPath:"Role/Rampart.png"});Ei.forEach(e=>{Je(e,"TRUE_NORTH",1,{timeout:10})});Ze(Ei,"TRUE_NORTH",50,"cd_TRUE_NORTH",{rscType:"TRUE_NORTH",applicationDelay:0,cooldown:45,maxCharges:2,assetPath:"Role/True North.png",validateAttempt:Ja,onConfirm:eo});[...va,...Ma,...es].forEach(e=>{Je(e,"SWIFTCAST",1,{timeout:10})});Ze([...va,...Ma,...es],"SWIFTCAST",18,"cd_SWIFTCAST",{rscType:"SWIFTCAST",applicationDelay:0,cooldown:40,assetPath:"Role/Swiftcast.png"});[...va,...Ma,...es].forEach(e=>{Je(e,"LUCID_DREAMING",1,{timeout:21})});Ze([...va,...Ma,...es],"LUCID_DREAMING",14,"cd_LUCID_DREAMING",{rscType:"LUCID_DREAMING",applicationDelay:.623,cooldown:60,assetPath:"Role/Lucid Dreaming.png",onApplication:(e,t)=>{const n=e.resources.get("LUCID_DREAMING");n.node=t,n.tickCount=0;const a=e.findNextQueuedEventByTag(Ti.LucidTick);a&&a.addTag(Ti.ManaGain)}});[...bi,...Ei,...go].forEach(e=>{Je(e,"ARMS_LENGTH",1,{timeout:6.5})});Ze([...bi,...Ei,...go],"ARMS_LENGTH",32,"cd_ARMS_LENGTH",{rscType:"ARMS_LENGTH",applicationDelay:.62,cooldown:120,assetPath:"Role/Arms Length.png",validateAttempt:Ja,onConfirm:eo});[...va,...Ma,...es].forEach(e=>{Je(e,"SURECAST",1,{timeout:6.5})});Ze([...va,...Ma,...es],"SURECAST",44,"cd_SURECAST",{rscType:"SURECAST",applicationDelay:0,cooldown:120,assetPath:"Role/Surecast.png"});Ei.forEach(e=>{Je(e,"BLOODBATH",1,{timeout:20})});Ze(Ei,"BLOODBATH",8,"cd_BLOODBATH",{rscType:"BLOODBATH",applicationDelay:.625,cooldown:90,assetPath:"Role/Bloodbath.png",validateAttempt:Ja,onConfirm:eo});st([...Ei,...go],"SECOND_WIND",12,"cd_SECOND_WIND",{healingPotency:600,applicationDelay:.625,cooldown:120,assetPath:"Role/Second Wind.png",validateAttempt:Ja,onConfirm:eo});st(bi,"PROVOKE",15,"cd_PROVOKE",{applicationDelay:.62,cooldown:30,assetPath:"Role/Provoke.png",drawsAggro:!0,startsAuto:!0});st(bi,"SHIRK",48,"cd_SHIRK",{applicationDelay:0,cooldown:120,assetPath:"Role/Shirk.png"});st(bi,"LOW_BLOW",25,"cd_LOW_BLOW",{applicationDelay:.62,cooldown:25,assetPath:"Role/Low Blow.png",startsAuto:!0});oa(va,"ESUNA",10,{manaCost:400,castTime:0,applicationDelay:1.14,assetPath:"Role/Esuna.png"});st(va,"RESCUE",48,"cd_RESCUE",{applicationDelay:0,cooldown:120,assetPath:"Role/Rescue.png"});st(Ei,"LEG_SWEEP",10,"cd_LEG_SWEEP",{applicationDelay:.625,cooldown:40,assetPath:"Role/Leg Sweep.png",validateAttempt:Ja,onConfirm:eo});st(go,"LEG_GRAZE",6,"cd_LEG_GRAZE",{applicationDelay:0,cooldown:30,assetPath:"Role/Leg Graze.png"});st(go,"FOOT_GRAZE",10,"cd_FOOT_GRAZE",{applicationDelay:0,cooldown:30,assetPath:"Role/Foot Graze.png"});Ze(Jo,"TINCTURE",1,"cd_TINCTURE",{rscType:"TINCTURE",applicationDelay:.64,cooldown:270,assetPath:"General/Tincture.png",validateAttempt:Ja,onConfirm:Pe(kd,eo)});Ze(Jo,"SPRINT",1,"cd_SPRINT",{rscType:"SPRINT",applicationDelay:.133,cooldown:60,assetPath:"General/Sprint.png",validateAttempt:Ja,onConfirm:Pe(kd,eo)});bi.forEach(e=>{Je(e,"SHIELD_WALL",1,{timeout:10}),Je(e,"STRONGHOLD",1,{timeout:12})});const _g=e=>Object.keys(wb).forEach(t=>{t!=="UNKNOWN"&&e.tryConsumeResource(t)});Oi(bi,"SHIELD_WALL","cd_LIMIT_BREAK_1",{tier:"1",applicationDelay:.45,animationLock:1.93,onApplication:e=>{_g(e),e.gainStatus("SHIELD_WALL")}});Oi(bi,"STRONGHOLD","cd_LIMIT_BREAK_2",{tier:"2",applicationDelay:.89,animationLock:3.86,onApplication:e=>{_g(e),e.gainStatus("STRONGHOLD")}});bi.forEach(e=>{const t=mt[e].limitBreak??"UNKNOWN",n=mt[e].limitBreakBuff??"UNKNOWN";Je(e,n,1,{timeout:8}),Oi(e,t,"cd_LIMIT_BREAK_3",{tier:"3",applicationDelay:1.34,animationLock:3.86,onApplication:a=>{_g(a),a.gainStatus(n)}})});Oi(va,"HEALING_WIND","cd_LIMIT_BREAK_1",{tier:"1",castTime:2,healingPotency:25,applicationDelay:.76,animationLock:2.1});Oi(va,"BREATH_OF_THE_EARTH","cd_LIMIT_BREAK_2",{tier:"2",castTime:2,healingPotency:50,applicationDelay:.8,animationLock:5.13});va.forEach(e=>{const t=mt[e].limitBreak??"UNKNOWN";Oi(e,t,"cd_LIMIT_BREAK_3",{tier:"3",castTime:2,healingPotency:100,applicationDelay:.8,animationLock:8.1})});Oi(Ei,"BRAVER","cd_LIMIT_BREAK_1",{tier:"1",castTime:2,applicationDelay:2.23,animationLock:3.86,potency:1e3,validateAttempt:Ja,onConfirm:eo});Oi(Ei,"BLADEDANCE","cd_LIMIT_BREAK_2",{tier:"2",castTime:3,applicationDelay:3.28,animationLock:3.86,potency:2200,validateAttempt:Ja,onConfirm:eo});Ei.forEach(e=>{const t=mt[e].limitBreak??"UNKNOWN";Oi(e,t,"cd_LIMIT_BREAK_3",{tier:"3",castTime:4.5,applicationDelay:2.26,animationLock:3.7,potency:3500,validateAttempt:Ja,onConfirm:eo})});Oi(go,"BIGSHOT","cd_LIMIT_BREAK_1",{tier:"1",castTime:2,applicationDelay:2.23,animationLock:3.1,potency:540});Oi(go,"DESPERADO","cd_LIMIT_BREAK_2",{tier:"2",castTime:3,applicationDelay:2.49,animationLock:3.1,potency:1170});go.forEach(e=>{const t=mt[e].limitBreak??"UNKNOWN";Oi(e,t,"cd_LIMIT_BREAK_3",{tier:"3",castTime:4.5,applicationDelay:3.16,animationLock:3.7,potency:1890})});Oi(Ma,"SKYSHARD","cd_LIMIT_BREAK_1",{tier:"1",castTime:2,applicationDelay:1.64,animationLock:3.1,onConfirm:kd,potency:600});Oi(Ma,"STARSTORM","cd_LIMIT_BREAK_2",{tier:"2",castTime:3,applicationDelay:3.75,animationLock:5.1,onConfirm:kd,potency:1300});Ma.forEach(e=>{const t=mt[e].limitBreak??"UNKNOWN";Oi(e,t,"cd_LIMIT_BREAK_3",{tier:"3",castTime:4.5,applicationDelay:4.5,animationLock:8.1,onConfirm:e==="RDM"?kd:void 0,potency:2100})});const ob="stdtick";var co,Hs,Dc,Sa,ks,Sd,Wo,yc,gd,Us,ws,Ps,Un,vc,Fa,Gl,ke,yl,$y,vl,$u,jT,ei,Mf,Qy,zT,Os,YT;class Oj{constructor(){Fe(this,ke);re(this,"timeScale");re(this,"shouldLoop");re(this,"tickMode");re(this,"timeline");Fe(this,co);re(this,"gameConfig");re(this,"record");re(this,"imageExportConfig");re(this,"timelineDrawOptions",MG);re(this,"queuedPastes");re(this,"clipboardMode");re(this,"game");Fe(this,Hs,0);Fe(this,Dc,!0);Fe(this,Sa);Fe(this,ks,[]);Fe(this,Sd,[]);Fe(this,Wo,[]);Fe(this,yc,new Map);Fe(this,gd,new Map);Fe(this,Us,new Map);Fe(this,ws,new Map);re(this,"savedHistoricalGame");re(this,"savedHistoricalRecord");Fe(this,Ps,!1);Fe(this,Un,!1);Fe(this,vc,!1);Fe(this,Fa,!1);re(this,"displayingUpToDateGameState",!0);Fe(this,Gl,0);re(this,"lastSkillTime",0);re(this,"undoStack");this.timeScale=1,this.shouldLoop=!1,this.queuedPastes=0,this.tickMode=ga.RealTimeAutoPause,this.timeline=new tG,this.timeline.reset(),Le(this,co,new Ej),this.gameConfig=new Ia(Tf),this.game=cc(this.gameConfig),this.record=new jo,this.record.config=this.gameConfig,this.imageExportConfig={wrapThresholdSeconds:JSON.parse(pt("img: wrapThresholdSeconds")??"0"),includeTime:JSON.parse(pt("img: includeTime")??"true")},this.clipboardMode=pt("radio: clipboardMode")??"plain",Le(this,Sa,-this.gameConfig.countdown),this.savedHistoricalGame=this.game,this.savedHistoricalRecord=this.record,this.undoStack=new jG,Oe(this,ke,vl).call(this)}get inputLocked(){return this.shouldLoop||this.queuedPastes>0}updateStats(){Oe(this,ke,$u).call(this),Oe(this,ke,jT).call(this)}updateAllDisplay(t=this.game){Yy(t.config.serialized()),this.updateStatusDisplay(t),this.updateSkillButtons(t),this.updateTimelineDisplay(),this.updateStats(),EE(this.getActiveJob())}checkRecordValidity(t,n,a=!1){console.assert(t.config!==void 0);const s={isValid:!0,invalidActions:[],skillUseTimes:[],straightenedIfValid:void 0};if(n===void 0)return console.log("no edit happened"),s;Oe(this,ke,vl).call(this,!1);const c=t.config??this.gameConfig;this.game=cc(c),this.record=new jo,this.record.config=c,Le(this,Sa,-c.countdown),Oe(this,ke,yl).call(this,this.record.config);const d=Oe(this,ke,Os).call(this,{line:t,replayMode:kn.Edited,firstEditedNodeIndex:n,selectionStart:t.getFirstSelection(),selectionEnd:t.getLastSelection()});return this.record.selectionStartIndex=t.selectionStartIndex,this.record.selectionStartIndex=t.selectionStartIndex,s.isValid=d.invalidActions.length===0,s.invalidActions=d.invalidActions,s.skillUseTimes=d.skillUseTimes,d.success&&(s.straightenedIfValid=this.record),this.displayingUpToDateGameState=a,s}displayHistoricalState(t,n){const a=t+this.gameConfig.countdown,s=this.record.getFirstSelection()!==void 0;Oe(this,ke,$y).call(this,()=>{const c=this.record;this.game=cc(this.gameConfig),this.record=new jo,this.record.config=this.gameConfig,Le(this,Sa,-this.gameConfig.countdown),Oe(this,ke,yl).call(this,this.record.config),Oe(this,ke,Os).call(this,{line:c,replayMode:kn.Exact,maxReplayTime:a,cutoffIndex:n}),this.timeline.updateElem({type:ht.s_HistoricalCursor,time:this.game.time,displayTime:this.game.getDisplayTime(),enabled:!0}),this.updateStatusDisplay(this.game),this.updateSkillButtons(this.game),Yl(),Oe(this,ke,$u).call(this),this.timeline.drawElements()}),AE(!0),s&&Oe(this,ke,$u).call(this,!0),Oe(this,ke,jT).call(this)}displayCurrentState(){this.displayingUpToDateGameState=!0,this.timeline.updateElem({type:ht.s_HistoricalCursor,enabled:!1,time:0,displayTime:0}),AE(!1),this.updateAllDisplay(this.game)}restart(){Oe(this,ke,vl).call(this),Oe(this,ke,yl).call(this,this.gameConfig)}getPresetLines(){return te(this,co).getLinesForJob(this.getActiveJob())}serializedPresets(){return te(this,co).serialized()}addSelectionToPreset(t="(untitled)"){console.assert(this.record.getFirstSelection());const n=this.record.getSelected();n.name=t,te(this,co).addLine(n,this.getActiveJob())}appendFilePresets(t){te(this,co).deserializeAndAppend(t)}loadBattleRecordFromFile(t){t.config===void 0&&(window.alert("Error loading record: saved record had no config object"),console.error(t)),t.config.procMode===void 0&&(t.config.rngProcs!==void 0?t.config.procMode=t.config.rngProcs?Si.RNG:Si.Never:t.config.procMode=Si.RNG),t.config.fps===void 0&&(t.config.fps=Tf.fps),t.config.gcdSkillCorrection===void 0&&(t.config.gcdSkillCorrection=Tf.gcdSkillCorrection),t.config.level&&(t.config.level=parseInt(t.config.level)),t.config.skillSpeed===void 0&&(t.config.skillSpeed=Dt.getSubstatBase(t.config.level)),t.config.shellVersion===void 0&&(t.config.shellVersion=qo.Initial),t.config.job===void 0&&(t.config.job=Ky(t.actions.flatMap(n=>n.skillName?[bS(n.skillName)]:[]))),Ei.includes(t.config.job)||(t.config.initialResourceOverrides=t.config.initialResourceOverrides.filter(n=>![Ke.FLANK_POSITIONAL.name,Ke.REAR_POSITIONAL.name].includes(n.type))),qu(()=>{const n=new Ia(t.config);this.gameConfig=n,this.record=new jo,this.record.config=n,Oe(this,ke,vl).call(this),Oe(this,ke,yl).call(this,this.gameConfig);const a=Lc.deserialize(t.actions),s=Oe(this,ke,Os).call(this,{line:a,replayMode:kn.Exact});if(!s.success){let c=`Error loading record- 
`;if(s.invalidActions.length>0){const d=s.invalidActions[0].node;if(d.info.type===je.Skill){const f=d.info.skillName?aa(d.info.skillName):"(unknown)";c+=`Stopped here because the next action ${f} can't be added: `}else c+=`Stopped here because the next action ${d.info.type} can't be added: `}c+=s.invalidActions[0].reason,window.alert(c)}})}applyEditedRecord(){const t=this.record;this.record=new jo,this.record.config=t.config,Oe(this,ke,vl).call(this),Oe(this,ke,yl).call(this,this.gameConfig);const n=Oe(this,ke,Os).call(this,{line:t,replayMode:kn.Exact,removeTrailingIdleTime:!0});console.assert(n.success),t.selectionStartIndex!==void 0&&(this.record.selectSingle(t.selectionStartIndex),this.record.selectUntil(t.selectionEndIndex)),this.autoSave()}deleteSelectedSkills(){const t=this.record.selectionStartIndex;if(t!==void 0){this.record.deleteSelected();const n=wn();t<this.record.length?(this.record.selectSingle(t),this.displayHistoricalState(n.skillUseTimes[t],t)):this.displayCurrentState(),this.autoSave()}}getTincturePotencyMultiplier(){return 1+te(this,Hs)*.01}setTinctureBuffPercentage(t){Le(this,Hs,t),this.displayCurrentState(),nl()}setUntargetableMask(t){Le(this,Dc,t),this.displayCurrentState(),nl()}getUntargetableMask(){return te(this,Dc)}getMaxTicks(t,n,a){let s=0;const c=[n];return a||c.push(ob),c.forEach(d=>{var f;(f=te(this,yc).get(d))==null||f.forEach(h=>{!li(h-this.gameConfig.countdown)&&h<=t&&s++})}),s}getDotCoverageTimeFraction(t,n,a){return this.getOverTimeCoverageTimeFraction(t,n,te(this,Us),a)}getHotCoverageTimeFraction(t,n,a){return this.getOverTimeCoverageTimeFraction(t,n,te(this,ws),a)}getOverTimeCoverageTimeFraction(t,n,a,s){if(t<=_n.epsilon)return 0;const c=a.get(n);if(!c)return 0;c.has(s)||c.set(s,[]);let d=0;c.get(s).forEach(h=>{if(h.tStartDisplay<=t){const m=Math.max(0,h.tStartDisplay);let R=h.tEndDisplay!==void 0&&h.tEndDisplay<=t?h.tEndDisplay:t;R=Math.max(0,R),d+=Pc(m,R)}});const f=Pc(0,t);return d/f}setTimelineOptions(t){this.timelineDrawOptions={...this.timelineDrawOptions,...t},this.updateTimelineDisplay()}getTimelineRenderingProps(){var s,c;const t=this.record.getFirstSelection()!=null&&this.record.getLastSelection()!=null;let n=this.gameConfig.countdown;const a=this.timeline.getAllSlotsTimeInfo();return a!==null&&(n=Math.max(n,a.countdown)),{timelineWidth:this.timeline.getCanvasWidth(),timelineHeight:this.timeline.getCanvasHeight(),scale:this.timeline.scale,countdown:n,tincturePotencyMultiplier:this.getTincturePotencyMultiplier(),untargetableMask:te(this,Dc),sharedElements:this.timeline.sharedElements,slots:this.timeline.slots,activeSlotIndex:this.timeline.activeSlotIndex,allMarkers:this.timeline.getAllMarkers(),untargetableMarkers:this.timeline.getUntargetableMarkers(),buffMarkers:this.timeline.getBuffMarkers(),showSelection:t,selectionStartDisplayTime:(((s=this.record.getFirstSelection())==null?void 0:s.tmp_startLockTime)??0)-this.gameConfig.countdown,selectionEndDisplayTime:(((c=this.record.getLastSelection())==null?void 0:c.tmp_endLockTime)??0)-this.gameConfig.countdown,drawOptions:this.timelineDrawOptions}}reportWarning(t){te(this,Un)||this.timeline.addElement({type:ht.WarningMark,warningType:t,time:this.game.time,displayTime:this.game.getDisplayTime()})}reportComboBreak(){this.reportWarning({kind:"combobreak"})}resolvePotency(t){this.resolveAnyPotency(t,ht.DamageMark,te(this,ks)),Oe(this,ke,$u).call(this)}resolveHealingPotency(t){this.resolveAnyPotency(t,ht.HealingMark,te(this,Sd))}resolveOverTimePotency(t,n){n==="damage"?this.resolveAnyPotency(t,ht.DamageMark,te(this,ks),!1):this.resolveAnyPotency(t,ht.HealingMark,te(this,Sd))}resolveAnyPotency(t,n,a,s=!0){if(t===void 0)return;t.resolve(this.game.getDisplayTime()),Le(this,Sa,this.game.time),t.base===0&&(n=ht.AggroMark);const c=t.getDisplayedModifiers().some(d=>d.source===w.POT);if(!te(this,Un)){let d="{skill}@"+t.sourceTime.toFixed(3);t.description.length>0&&(d+=" "+t.description);const f={potency:t,sourceDesc:d,sourceSkill:t.sourceSkill},h=this.timeline.tryGetElement(this.game.time,n);h?(h.potencyInfos.push(f),c&&!h.buffs.includes("TINCTURE")&&h.buffs.push("TINCTURE")):this.timeline.addElement({type:n,potencyInfos:[f],buffs:c?["TINCTURE"]:[],time:this.game.time,displayTime:this.game.getDisplayTime()}),a.push({time:this.game.getDisplayTime(),source:t.sourceSkill+"@"+t.sourceTime,potency:t.getAmount({tincturePotencyMultiplier:1,includePartyBuffs:!0,includeSplash:s}),buffs:c?["TINCTURE"]:[]})}}reportLucidTick(t,n){te(this,Un)||this.timeline.addElement({type:ht.LucidMark,time:t,displayTime:this.game.getDisplayTime(),sourceDesc:n})}reportManaTick(t,n){te(this,Un)||this.timeline.addElement({type:ht.MPTickMark,time:t,displayTime:this.game.getDisplayTime(),sourceDesc:n})}reportMeditateTick(t,n){te(this,Un)||this.timeline.addElement({type:ht.MeditateTickMark,time:t,displayTime:this.game.getDisplayTime(),sourceDesc:n})}reportAutoTick(t,n){te(this,Un)||this.timeline.addElement({type:ht.AutoTickMark,time:t,displayTime:this.game.getDisplayTime(),sourceDesc:n})}reportDotTick(t,n){this.reportOverTimeTick(t,te(this,yc),n)}reportHotTick(t,n){this.reportOverTimeTick(t,te(this,gd),n)}reportOverTimeTick(t,n,a){if(!te(this,Un)){const s=a??ob;let c=n.get(s);c||(c=[],n.set(s,c)),c.push(t),this.updateStats()}}reportDotStart(t,n,a){this.reportOverTimeStart(t,n,"damage",a)}reportHotStart(t,n){this.reportOverTimeStart(t,n,"healing",[1])}reportOverTimeStart(t,n,a,s){if(!te(this,Un)){const c=a==="damage"?te(this,Us):te(this,ws);let d=c.get(n);d||(d=new Map,c.set(n,d)),s.forEach(f=>{let h=d.get(f);h||(h=[],d.set(f,h));const m=h.length;console.assert(m===0||h[m-1].tEndDisplay!==void 0),h.push({tStartDisplay:t,tEndDisplay:void 0})})}}reportDotDrop(t,n,a){this.reportOverTimeDrop(t,n,"damage",a)}reportHotDrop(t,n){this.reportOverTimeDrop(t,n,"healing",[1])}reportOverTimeDrop(t,n,a,s){if(!te(this,Un)){const c=a==="damage"?te(this,Us):te(this,ws);s.forEach(d=>{var m;const f=(m=c.get(n))==null?void 0:m.get(d);if(console.assert(f,`Reported dropping ${n} on target ${d} when no coverage was detected`),!f)return;const h=f.length;console.assert(h>0&&f[h-1].tEndDisplay===void 0),f[h-1].tEndDisplay=t})}}updateStatusDisplay(t){const n=t.resources.get("NOT_CASTER_TAXED"),a=t.resources.get("NOT_ANIMATION_LOCKED"),s=t.cooldowns.get("cd_GCD"),c={gcdReady:s.stacksAvailable()>0,gcd:s.currentStackCd(),timeTillGCDReady:t.cooldowns.timeTillAnyStackAvailable("cd_GCD"),castLocked:t.resources.timeTillReady("NOT_CASTER_TAXED")>0,castLockTotalDuration:n.pendingChange?n.pendingChange.delay:0,castLockCountdown:t.resources.timeTillReady("NOT_CASTER_TAXED"),animLocked:t.resources.timeTillReady("NOT_ANIMATION_LOCKED")>0,animLockTotalDuration:a.pendingChange?a.pendingChange.delay:0,animLockCountdown:t.resources.timeTillReady("NOT_ANIMATION_LOCKED"),canMove:t.resources.get("MOVEMENT").available(1)},d=t.statusPropsGenerator;zO(f=>({time:t.getDisplayTime(),resources:d.getAllResourceViewProps(f),resourceLocks:c,enemyBuffs:d.getAllOtherTargetedBuffViewProps(),selfBuffs:d.getAllSelfTargetedBuffViewProps(),level:t.config.level}),d.statusLayoutFn)}updateTimelineDisplay(){this.timeline.setTimeSegment(0,this.game.time),Yl(),rd(),te(this,Un)||this.timeline.updateElem({type:ht.s_Cursor,time:this.game.time,displayTime:this.game.getDisplayTime()}),this.timeline.drawElements()}updateSkillButtons(t){tO(this.game.displayedSkills.getCurrentSkillNames(this.game).map(n=>t.getSkillAvailabilityStatus(n)))}setTimeControlSettings(t){this.timeScale=t.timeScale,this.tickMode=t.tickMode,this.shouldLoop=!1}setConfigAndRestart(t,n=!0){const a=this.gameConfig.job!==t.job,s=this.gameConfig.countdown,c=s<t.countdown;a&&!n&&(console.error("attempted to apply config without reset even though job changed; forcing reset"),n=!0),qu(()=>{this.gameConfig=new Ia({...t,shellVersion:eS.version}),n?this.record=new jo:c&&this.record.prependActionNode(Bl(-s)),this.record.config=this.gameConfig,Oe(this,ke,vl).call(this),Oe(this,ke,yl).call(this,this.gameConfig),a&&EE(t.job)}),this.autoSave()}getDisplayedGame(){return this.displayingUpToDateGameState?this.game:this.savedHistoricalGame}getActiveJob(){return this.game.job}getSkillInfo(t){return t.game.getSkillAvailabilityStatus(t.skillName)}autoSave(){const t=this.record.serialized();this.timeline.saveCurrentSlot(t,this.gameConfig.countdown,this.game.time)}tryAutoLoad(){const t=pt("gameRecord");t!==null&&(console.log("migrating existing record to slot 0"),Ct("gameRecord0",t),dT("gameRecord"));for(let s=0;s<Ya;s++)this.timeline.loadSlot(s);this.timeline.slots.length>0||this.timeline.addSlot();const a=parseInt(pt("activeSlotIndex")??"0");this.setActiveSlot(a>=Ya?0:a),this.undoStack.clear()}setActiveSlot(t){Oe(this,ke,Mf).call(this,{shouldLoop:!1}),qu(()=>{this.autoSave(),this.record.unselectAll(),this.timeline.loadSlot(t)||console.error(`failed to load timeline in cached active slot ${t}`)}),this.savedHistoricalGame=this.game,this.savedHistoricalRecord=this.record,this.displayCurrentState(),Ct("activeSlotIndex",t.toString())}cloneActiveSlot(){if(this.timeline.activeSlotIndex<0||this.timeline.activeSlotIndex>=this.timeline.slots.length){console.error("tried to clone slot with invalid activeSlotIndex "+this.timeline.activeSlotIndex);return}Oe(this,ke,Mf).call(this,{shouldLoop:!1}),qu(()=>{const t=this.record.serialized();this.timeline.addSlot(),this.loadBattleRecordFromFile(t),this.autoSave(),this.timeline.loadSlot(this.timeline.slots.length-1)}),this.displayCurrentState()}getDamageLogCsv(){const t=te(this,ks).map(n=>{let a=!1;n.buffs.forEach(c=>{c==="TINCTURE"&&(a=!0)});let s=n.potency;return a&&(s*=this.getTincturePotencyMultiplier()),[n.time,n.source,s]});return[["time","damageSource","potency"]].concat(t)}getActionsLogCsv(){const t=te(this,Wo).map(n=>[n.time,n.action,n.isGCD,n.castTime]);return[["time","action","isGCD","castTime"]].concat(t)}getAmaSimCsv(){const t=O=>O===bn.TINCTURE.name?"Grade 4 Gemdraught":O.endsWith("(Ten)")||O.endsWith("(Chi)")||O.endsWith("(Jin)")?O.substring(0,O.length-6):O.replace(" 2"," II").replace(" 3"," III").replace(" 4"," IV"),n=this.getActiveJob(),a=bi.includes(n)||Ei.includes(n),s=this.timeline.getBuffMarkers().map(O=>{const x=new tE(O.description);let k=x.info.name;x.info.name===U.Card_TheSpear?k="The Spear":x.info.name===U.Card_TheBalance?k="The Balance":[U.RadiantFinale1,U.RadiantFinale2,U.RadiantFinale3].includes(x.info.name)&&(k="Radiant Finale");const H=x.info.name===U.Dokumori||x.info.name===U.ChainStratagem,G=()=>H?"Debuff Only":x.info.name===U.RadiantFinale1?'"1 Coda, Buff Only"':x.info.name===U.RadiantFinale2?'"2 Coda, Buff Only"':x.info.name===U.RadiantFinale3?'"3 Coda, Buff Only"':[U.ArmysPaeon,U.MagesBallad,U.WanderersMinuet,U.StandardFinish,U.TechnicalFinish].includes(x.info.name)?"Buff Only":x.info.name===U.Card_TheSpear?a?"Small":"Big":x.info.name===U.Card_TheBalance?a?"Big":"Small":"";return[O.time,k,x.info.job,G(),H?"Boss1":""]});let c=this.gameConfig.getOverrideStacks("MAGES_CODA")??0,d=this.gameConfig.getOverrideStacks("WANDERERS_CODA")??0,f=this.gameConfig.getOverrideStacks("ARMYS_CODA")??0,h=this.gameConfig.getOverrideStacks("RADIANT_CODA")??0;const m=te(this,Wo).filter(O=>!O.action.includes("Toggle buff")).map(O=>{let x="";O.isDamaging&&O.targetList!==void 0&&(x='"',x+=O.targetList.map(G=>`Boss${G}`).join(", "),x+='"');let k="";const H=c+d+f;return O.action==="Mage's Ballad"?c=1:O.action==="The Wanderer's Minuet"?d=1:O.action==="Army's Paeon"?f=1:O.action==="Radiant Finale"?H>0&&(h=H,k=`${H} Coda`,c=0,d=0,f=0):O.action==="Radiant Encore"&&h>0&&(k=`${h} Encore`,h=0),[O.time,t(O.action),"",k,x]}),R=["use_strict_skill_naming = False"],T=!(a||go.includes(n)),S={[ot.lvl70]:new Map([["WHM",162],["SCH",264],["AST",148],["SGE",177],["BLM",133],["SMN",264],["RDM",162],["PCT",148]]),[ot.lvl80]:new Map([["WHM",189],["SCH",308],["AST",172],["SGE",206],["BLM",155],["SMN",308],["RDM",189],["PCT",172]]),[ot.lvl90]:new Map([["WHM",216],["SCH",353],["AST",197],["SGE",236],["BLM",177],["SMN",353],["RDM",216],["PCT",197]]),[ot.lvl100]:new Map([["WHM",244],["SCH",398],["AST",222],["SGE",266],["BLM",200],["SMN",398],["RDM",244],["PCT",222]])};let g={job_class:n,det_stat:this.gameConfig.determination,crit_stat:this.gameConfig.criticalHit,dh_stat:this.gameConfig.directHit,tenacity:this.gameConfig.tenacity,speed_stat:T?this.gameConfig.spellSpeed:this.gameConfig.skillSpeed,version:j1,level:this.gameConfig.level,wd:this.gameConfig.wd,main_stat:this.gameConfig.main};S[this.gameConfig.level].has(n)&&(g={...g,healer_or_caster_strength:S[this.gameConfig.level].get(n)}),R.push("stats = "+JSON.stringify(g));const _=this.timeline.getUntargetableMarkers().map(O=>`(${O.time}, ${O.time+O.duration}),`);_.length>0&&(_.push(""),R.push("downtime_windows = ("+_.join(", ")+")"));const I=[];if(this.game.autoStartTimes.length>0&&this.game.autoStopTimes.length>0){let O=0,x=0;for(;O<this.game.autoStartTimes.length&&this.game.autoStopTimes[0]>this.game.autoStartTimes[O];)O++;for(;O<this.game.autoStartTimes.length&&x<this.game.autoStopTimes.length;){const k=this.game.autoStopTimes[x],H=this.game.autoStartTimes[O];I.push(`(${k}, ${H-k})`),O++,x++}x<this.game.autoStopTimes.length&&I.push(`(${this.game.autoStopTimes[x]}, ${this.game.getDisplayTime()})`)}I.length>0&&(I.push(""),R.push("auto_downtime_windows = ("+I.join(", ")+")"));const D=["time","skill_name","job_class","skill_conditional","targets"];return D.push("players_to_buff","overriding_skill_conditional_for_other_players"),s.forEach(O=>O.push("","")),m.forEach(O=>O.push("","")),{meta:R,body:[D].concat(s,m)}}tryAddLine(t,n=kn.SkillSequence){const a=p.record.length,s=Oe(this,ke,Os).call(this,{line:t,replayMode:n});return s.success?(this.undoStack.push(new WS(t.actions,a,"preset")),this.autoSave(),wn(),!0):(this.rewindUntilBefore(s.firstAddedIndex,!1),window.alert('Failed to add line "'+t.name+'" due to insufficient resources and/or stats mismatch.'),!1)}deleteLine(t){te(this,co).deleteLine(t)}deleteAllLines(){te(this,co).deleteAllLines()}reportInterruption(t){if(te(this,vc)||this.tickMode===ga.RealTimeAutoPause&&this.shouldLoop){const n=t.failNode.getNameForMessage();window.alert("Cast interrupted! Resources for "+n+" are no longer available"),console.warn("failed: "+n);const a=this.game.time,s=this.shouldLoop;this.rewindUntilBefore(t.failIndex,!1),this.autoSave(),Oe(this,ke,ei).call(this,{deltaTime:a-this.game.time,waitKind:"duration"}),this.shouldLoop=s}else Le(this,Ps,!0),te(this,Un)||this.timeline.invalidateLastElement()}rewindUntilBefore(t,n){const a=this.record;this.record=new jo,this.record.config=this.gameConfig,Oe(this,ke,vl).call(this),Oe(this,ke,yl).call(this,this.gameConfig),t!==void 0&&(a.spliceUpTo(t),Oe(this,ke,Os).call(this,{line:a,replayMode:kn.Exact,removeTrailingIdleTime:n}))}removeTrailingIdleTime(){let t;for(let a=this.record.tailIndex;a>=0;a--)if(this.record.actions[a].info.type===je.Skill){t=a;break}const n=t===void 0?this.record.actions.slice():this.record.actions.slice(t+1);n.length>0&&this.undoStack.push(new rc((t??-1)+1,n,"delete")),t===void 0?this.rewindUntilBefore(0,!0):this.rewindUntilBefore(t+1,!0),wn()}waitTillNextMpOrLucidTick(){const t=Oe(this,ke,ei).call(this,{deltaTime:this.game.timeTillNextMpGainEvent(),waitKind:"mp"});t!==void 0&&this.undoStack.push(new Cs(t,this.record.tailIndex)),wn(),this.updateAllDisplay()}insertRecordNodes(t,n){this.record.insertActionNodes(t,n),this.autoSave();const a=wn();let s;t.length>1?(s=Math.min(n,this.record.tailIndex),this.record.selectSingle(s),this.record.selectUntil(s+t.length-1)):(s=Math.min(n+1,this.record.tailIndex),this.record.selectSingle(s)),this.displayHistoricalState(a.skillUseTimes[s],s)}insertRecordNode(t,n){this.insertRecordNodes([t],n)}filterTargetList(t,n){const a=ho(p.game.job,n);return(a==null?void 0:a.potencyFn(p.game))===0&&!(a!=null&&a.savesTargets)&&!p.game.dotSkills.includes(n)?[]:t}requestUseSkill(t,n=!1){if(Le(this,vc,!0),!this.inputLocked)if(this.displayingUpToDateGameState)Oe(this,ke,zT).call(this,t.skillName,t.targetList,this.tickMode,-1,!1,n).status.ready()&&(this.scrollToTime(this.game.time),this.autoSave(),this.tickMode!==ga.RealTimeAutoPause&&wn());else{const a=this.record.selectionStartIndex;if(a!==void 0){const s=this.filterTargetList(t.targetList,t.skillName),c=jl(t.skillName,s);this.insertRecordNode(c,a),n&&this.undoStack.push(new Cs(c,a))}}Le(this,vc,!1)}requestToggleBuff(t,n=!1,a){if(!this.game.requestToggleBuff(t,a))return!1;const c=mT(t,a);return c.tmp_startLockTime=this.game.time,c.tmp_endLockTime=c.tmp_startLockTime,this.record.addActionNode(c),n&&this.undoStack.push(new Cs(c,this.record.tailIndex)),te(this,Wo).push({time:this.game.getDisplayTime(),action:"Toggle buff: "+Ke[t].name,isGCD:0,castTime:0,isDamaging:!1}),!0}scrollToTime(t){const n=t===void 0?this.game.time:t;setTimeout(()=>{vv(tt.positionFromTimeAndScale(n,this.timeline.scale))},0)}step(t,n=!1){let a,s=this.record.length;this.displayingUpToDateGameState?(a=Oe(this,ke,ei).call(this,{deltaTime:t,waitKind:"duration"}),this.autoSave(),this.updateAllDisplay()):this.record.selectionStartIndex!==void 0&&(s=this.record.selectionStartIndex,a=dc(t),this.insertRecordNode(a,s)),n&&a&&this.undoStack.push(new Cs(a,s))}stepUntil(t,n=!1){let a,s=this.record.length;this.displayingUpToDateGameState?(a=Oe(this,ke,ei).call(this,{deltaTime:t-this.game.getDisplayTime(),waitKind:"target"}),this.autoSave(),this.updateAllDisplay()):this.record.selectionStartIndex!==void 0&&(s=this.record.selectionStartIndex,a=Bl(t),this.insertRecordNode(a,s)),n&&a&&this.undoStack.push(new Cs(a,s))}handleKeyboardEvent(t){if(this.inputLocked)return;const n=t.ctrlKey||t.metaKey,a=p.record.selectionStartIndex,s=a!==void 0;let c=!1;this.displayingUpToDateGameState&&t.key==="u"&&(this.undoStack.doThenPush(new rc(this.record.tailIndex,[this.record.actions[this.record.tailIndex]],"delete")),c=!0),t.key==="z"&&n?(this.undoStack.undo(),c=!0):t.key==="Z"&&n||t.key==="y"&&n?(this.undoStack.redo(),c=!0):t.key==="Paste"||t.key==="v"&&n?(PO(),c=!0):t.key==="Copy"||t.key==="c"&&n?s&&(vT(),c=!0):(t.key==="Cut"||t.key==="x"&&n)&&s&&(vT(),p.undoStack.push(new rc(a,p.record.getSelected().actions,"delete")),p.deleteSelectedSkills(),c=!0),c&&t.preventDefault()}handleTimelineKeyboardEvent(t){var n,a;if(!this.inputLocked){const s=t.ctrlKey||t.metaKey,c=p.record.selectionStartIndex,d=p.record.selectionEndIndex,f=c!==void 0;let h=!1,m=!1;t.key==="Backspace"||t.key==="Delete"?f&&(p.undoStack.push(new rc(c,p.record.getSelected().actions,"delete")),p.deleteSelectedSkills()):t.key==="ArrowUp"?f?(t.shiftKey?p.timeline.resizeSelection(!0):p.timeline.onClickTimelineAction(c-1,!1),h=!0,t.preventDefault()):p.record.length>0&&(p.timeline.onClickTimelineAction(p.record.tailIndex,!1),h=!0,t.preventDefault()):t.key==="ArrowDown"?f?(t.shiftKey?p.timeline.resizeSelection(!1):p.timeline.onClickTimelineAction(d+1,!1),m=!0,t.preventDefault()):p.record.length>0&&(p.timeline.onClickTimelineAction(0,!1),m=!0,t.preventDefault()):t.key==="Home"?(p.timeline.onClickTimelineAction(0,t.shiftKey),h=!0):t.key==="End"?(p.timeline.onClickTimelineAction(p.record.tailIndex,t.shiftKey),m=!0):t.key==="Escape"?(p.record.unselectAll(),p.displayCurrentState()):t.key==="a"&&s&&(p.timeline.onClickTimelineAction(0,!1),p.timeline.onClickTimelineAction(p.record.tailIndex,!0),t.preventDefault()),h?(this.scrollToTime((n=this.record.selectionStart)==null?void 0:n.tmp_startLockTime),YS()):m&&(this.scrollToTime((a=this.record.selectionEnd)==null?void 0:a.tmp_startLockTime),KS())}}setImageExportConfig(t){this.imageExportConfig=t}}co=new WeakMap,Hs=new WeakMap,Dc=new WeakMap,Sa=new WeakMap,ks=new WeakMap,Sd=new WeakMap,Wo=new WeakMap,yc=new WeakMap,gd=new WeakMap,Us=new WeakMap,ws=new WeakMap,Ps=new WeakMap,Un=new WeakMap,vc=new WeakMap,Fa=new WeakMap,Gl=new WeakMap,ke=new WeakSet,yl=function(t){const n=t.initialResourceOverrides;for(let a=0;a<n.length;a++)n[a].applyTo(this.game)},$y=function(t){const n=te(this,Un);this.displayingUpToDateGameState=!1,Le(this,Un,!0);const a=this.game,s=this.record,c=te(this,Sa);t(),Le(this,Un,n),this.savedHistoricalGame=this.game,this.savedHistoricalRecord=this.record,this.game=a,this.record=s,Le(this,Sa,c)},vl=function(t=!0){this.game=cc(this.gameConfig),Oe(this,ke,Mf).call(this,{shouldLoop:!1}),this.timeline.reset(),t&&this.record.unselectAll(),Le(this,Sa,-this.gameConfig.countdown),Le(this,ks,[]),Le(this,Wo,[]),Le(this,yc,new Map),Le(this,Us,new Map),Le(this,gd,new Map),Le(this,ws,new Map),Le(this,Ps,!1),this.displayingUpToDateGameState=!0},$u=function(t=!1){if(!te(this,Fa)){let n=pj({tinctureBuffPercentage:te(this,Hs),lastDamageApplicationTime:te(this,Sa)});t&&(n={mainTable:n.mainTable,mainTableSummary:n.mainTableSummary,dotTables:n.dotTables,mode:n.mode}),BT(n)}},jT=function(){if(!te(this,Fa)){const t=_j({tinctureBuffPercentage:te(this,Hs),lastDamageApplicationTime:te(this,Sa)});Wy(t)}},ei=function(t){const n=this.game.time,a=t.deltaTime+this.game.getDisplayTime();if(t.deltaTime>0){Le(this,Gl,t.deltaTime);const s=this.game.tick(t.deltaTime,t.prematureStopCondition?t.prematureStopCondition:()=>!1);let c;return t.waitKind==="duration"?c=dc(s):t.waitKind==="target"?c=Bl(a):t.waitKind==="mp"&&(c=r0()),c!==void 0&&(c.tmp_startLockTime=n,c.tmp_endLockTime=t.deltaTime+n,this.record.addActionNode(c)),c}},Mf=function(t){const n=t.shouldLoop;this.shouldLoop!==n&&(this.shouldLoop=n,this.shouldLoop&&Oe(this,ke,YT).call(this,()=>this.shouldLoop))},Qy=function(t){let n=this.game.timeTillAnySkillAvailable();t>=0&&(n=Math.min(t-this.game.time,n)),Oe(this,ke,ei).call(this,{deltaTime:n})},zT=function(t,n,a=this.tickMode,s=-1,c=!0,d=!1){let f=this.game.getSkillAvailabilityStatus(t);const h=this.game.time,m=f.timeTillAvailable,R=Oe(this,ke,ei).call(this,{deltaTime:m});d&&R&&this.undoStack.push(new Cs(R,this.record.tailIndex)),t=s0(t,this.game),f=this.game.getSkillAvailabilityStatus(t),n=this.filterTargetList(n,t);const T=jl(t,n);let S;if(f.status.ready())T.tmp_startLockTime=this.game.time,this.record.addActionNode(T),S=this.record.tailIndex,d&&T&&this.undoStack.push(new Cs(T,this.record.tailIndex)),this.game.useSkill(t,T,S),T.tmp_invalid_reasons=[],a===ga.RealTimeAutoPause&&(this.shouldLoop=!0,Oe(this,ke,YT).call(this,()=>this.game.timeTillAnySkillAvailable()>0,!0));else{if(!c){if(m>0){const _=dc(m);_.tmp_startLockTime=h,_.tmp_endLockTime=this.game.time,this.record.addActionNode(_)}return f}this.record.addActionNode(T),S=this.record.tailIndex,this.game.useInvalidSkill(t,T),T.tmp_invalid_reasons=f.status.unavailableReasons}const g=this.game.timeTillAnySkillAvailable();if(T.tmp_startLockTime=this.game.time,T.tmp_endLockTime=this.game.time+g,!te(this,Un)){this.lastSkillTime=this.game.time;const _=this.game.getSkillAvailabilityStatus(t,!0);let D=this.game.skillsList.get(t).cdName==="cd_GCD";const O=f.castTime>0&&!f.instantCast,x=O?f.castTime-Ia.getSlidecastWindow(f.castTime):0;let k=_.cdRecastTime;t==="MEDITATE"&&(D=!0,k=this.game.getSkillAvailabilityStatus("YUKIKAZE").cdRecastTime),this.timeline.addElement({type:ht.Skill,displayTime:this.game.getDisplayTime(),skillName:t,isGCD:D,isSpellCast:O,time:this.game.time,relativeSnapshotTime:x,lockDuration:g,recastDuration:k,node:T,actionIndex:S}),te(this,Wo).push({time:this.game.getDisplayTime(),action:bn[t].name,isGCD:D?1:0,castTime:f.instantCast?0:f.castTime,targetList:T.targetList,isDamaging:T.anyPotencies()})}return a!==ga.RealTimeAutoPause&&Oe(this,ke,Qy).call(this,s),te(this,Fa)||rd(),f},Os=function(t){const n=te(this,Fa);Le(this,Fa,!0),t.removeTrailingIdleTime===void 0&&(t.removeTrailingIdleTime=!1);const a=t.maxReplayTime??-1;let s=t.replayMode;t.replayMode===kn.Edited&&(s=kn.Exact);const c=t.line,d=[],f=[];if(c.length===0)return Le(this,Fa,n),{success:!0,firstAddedIndex:void 0,invalidActions:d,skillUseTimes:f};let h=this.record.length,m;const R=t.cutoffIndex??c.actions.length,T=c.actions.slice();for(let _=0;_<R;_++){const I=T[_];t.replayMode===kn.Edited&&s===kn.Exact&&_===t.firstEditedNodeIndex&&(s=kn.Edited);let D=0;if(I.info.type===je.Wait?D=I.info.waitDuration:I.info.type===je.JumpToTimestamp?D=I.info.targetTime-this.game.getDisplayTime():I.info.type===je.WaitForMP?D=this.game.timeTillNextMpGainEvent():I.info.type===je.Skill&&(D=this.game.getSkillAvailabilityStatus(I.info.skillName).timeTillAvailable),_>0){const x=T[_-1].legacyWaitDuration;if(x!==void 0&&Math.abs(x-te(this,Gl))>_n.epsilon){const k=x-te(this,Gl);if(k>0&&I.info.type!==je.Wait){let H;if(I.info.type===je.Skill){const G=this.game.getSkillAvailabilityStatus(I.info.skillName).timeTillAvailable;Math.abs(G-k)>_n.epsilon&&(H="duration")}H&&(Oe(this,ke,ei).call(this,{deltaTime:k,waitKind:H}),h++)}else I.info.type===je.Wait&&(D+=k)}}if(a>=0&&a-this.game.time<D&&s===kn.Exact)return Oe(this,ke,ei).call(this,{deltaTime:a-this.game.time,waitKind:"duration"}),Le(this,Fa,!1),this.updateAllDisplay(),{success:!0,firstAddedIndex:m,invalidActions:d,skillUseTimes:f};if(f.push(this.game.getDisplayTime()),[je.Wait,je.JumpToTimestamp,je.WaitForMP].includes(I.info.type))if(D>=0)Oe(this,ke,ei).call(this,{deltaTime:D,waitKind:I.info.type===je.Wait?"duration":I.info.type===je.JumpToTimestamp?"target":"mp"});else{const O=ed();if(I.info.type===je.JumpToTimestamp){const x=Bl(I.info.targetTime);x.tmp_startLockTime=this.game.time,x.tmp_endLockTime=x.tmp_startLockTime,this.record.addActionNode(x)}else console.error("non-jump wait somehow failed: "+I.info.type);O.addUnavailableReason(gt.PastTargetTime),d.push({node:I,index:_,reason:O})}else if(I.info.type===je.Skill){let O=I.info.skillName;t.replayMode===kn.SkillSequence&&(O=Mc(this.game.job,O,this.gameConfig.level));const x=Oe(this,ke,zT).call(this,O,I.info.targetList,ga.Manual,a);f[f.length-1]=x.usedAt,x.status.ready()||d.push({node:I,index:_,reason:x.status.clone()}),te(this,Ps)&&(Le(this,Ps,!1),this.shouldLoop||(x.status.addUnavailableReason(gt.CastCanceled),d.push({node:I,index:_,reason:x.status})))}else if(I.info.type===je.SetResourceEnabled&&(s===kn.Exact||s===kn.Edited)){const O=this.requestToggleBuff(I.info.buffName,!1,I.info.targetNumber),x=s===kn.Exact;if(O)Oe(this,ke,ei).call(this,{deltaTime:x?D:Math.min(D,this.game.timeTillAnySkillAvailable())});else{const k=ed();k.addUnavailableReason(gt.BuffNoLongerAvailable),d.push({node:I,index:_,reason:k})}}else if(I.info.type===je.Unknown){const{skillName:O,targetList:x}=I.info,k=iU(O,x);this.record.addActionNode(k);const H=ed();H.addUnavailableReason(gt.UnknownSkill),d.push({node:I,index:_,reason:H}),k.tmp_invalid_reasons=H.unavailableReasons;const G=this.gameConfig.animationLock;te(this,Un)||(this.lastSkillTime=this.game.time,this.timeline.addElement({type:ht.Skill,displayTime:this.game.getDisplayTime(),skillName:O,isGCD:!1,isSpellCast:!1,time:this.game.time,relativeSnapshotTime:this.game.time,lockDuration:G,recastDuration:0,node:k,actionIndex:_}),te(this,Wo).push({time:this.game.getDisplayTime(),action:O,isGCD:0,castTime:0,targetList:k.targetList,isDamaging:!1})),Oe(this,ke,ei).call(this,{deltaTime:G})}else console.error("did not process ActionNode "+JSON.stringify(I.info));if(t.replayMode===kn.Edited){const O=this.record.tailIndex;I===t.selectionStart&&O>=0?this.record.selectSingle(O):I===t.selectionEnd&&O>=0&&this.record.selectUntil(O)}this.record.length!==h&&m===void 0&&(m=this.record.tailIndex)}if(t.cutoffIndex!==void 0){const _=T[t.cutoffIndex].info;if(_.type===je.Skill){const I=this.game.getSkillAvailabilityStatus(_.skillName);Oe(this,ke,ei).call(this,{deltaTime:I.timeTillAvailable})}}const S=T[T.length-1],g=S.legacyWaitDuration;if(g!==void 0&&(S.info.type===je.Skill||S.info.type===je.SetResourceEnabled)&&Math.abs(g-te(this,Gl))>_n.epsilon){const _=g-te(this,Gl);Oe(this,ke,ei).call(this,{deltaTime:_,waitKind:"duration"})}return Le(this,Fa,n),this.updateAllDisplay(),{success:!0,firstAddedIndex:m,invalidActions:d,skillUseTimes:f}},YT=function(t,n=!1){let a=0;const s=this,c=function(d){var m,R,T;a===0&&(a=d);const f=(d-a)/1e3*s.timeScale,h=s.game.timeTillAnySkillAvailable();h>=f?Oe(m=s,ke,ei).call(m,{deltaTime:f,prematureStopCondition:()=>!t()}):(Oe(R=s,ke,ei).call(R,{deltaTime:h,prematureStopCondition:()=>!t()}),Oe(T=s,ke,ei).call(T,{deltaTime:f-h,prematureStopCondition:()=>!t()})),s.updateAllDisplay(),a=d,t()?requestAnimationFrame(c):(s.shouldLoop=!1,s.autoSave(),mE(!1),n&&wn())};mE(!0),requestAnimationFrame(c)};const p=new Oj;function lf(e){const t=Va();return t==="en"?e==="fieldop"?"Field Operations":e==="dungeon"?"Dungeons":e==="ultimate"?"Ultimates":e[0].toUpperCase()+e.substring(1):t==="zh"?e==="savage"?"":e==="extreme"?"":e==="ultimate"?"":"":e}function Xe(e,t,n,a,s){return{name:typeof e=="string"?{en:e,zh:e}:e,fightKind:t,supportedLanguages:typeof n=="string"?[n]:n,authors:typeof a=="string"?[a]:a,phased:s??!1}}const eT=new Map([["m9s",Xe("M9S","savage","en","shanzhe")],["m9s_zh",Xe("M9S","savage","zh",["shanzhe",""])],["m10s",Xe("M10S","savage","en","shanzhe")],["m10s_zh",Xe("M10S","savage","zh",["shanzhe",""])],["m11s",Xe("M11S","savage","en","shanzhe")],["m11s_zh",Xe("M11S","savage","zh",["shanzhe",""])],["m12s_p1",Xe({en:"M12S P1",zh:"M12S"},"savage","en","shanzhe")],["m12s_p1_zh",Xe({en:"M12S P1",zh:"M12S"},"savage","zh",["shanzhe",""])],["m12s_p2",Xe({en:"M12S P2",zh:"M12S"},"savage","en","shanzhe")],["m12s_p2_zh",Xe({en:"M12S P2",zh:"M12S"},"savage","zh",["shanzhe",""])],["m5s",Xe("M5S","savage","en","shanzhe")],["m6s",Xe("M6S","savage","en","shanzhe")],["m7s",Xe("M7S","savage","en","shanzhe")],["m8s_full",Xe("M8S","savage","en","shanzhe",!0)],["final_verse_q40",Xe("The Final Verse Q40","dungeon","en","shanzhe")],["dsr_p2",Xe("DSR P2","ultimate","en","Caro")],["dsr_p6",Xe("DSR P6","ultimate","en","Tischel")],["dsr_p7",Xe("DSR P7","ultimate","en","Tischel")],["TOP_2023_04_02",Xe("TOP","ultimate","en","Santa")],["m2s",Xe("M2S","savage","en","shanzhe")],["m3s",Xe("M3S","savage","en","shanzhe")],["m4s",Xe("M4S","savage","en","shanzhe")],["m1s_zh",Xe("M1S","savage","zh","kiyozero")],["m2s_zh",Xe("M2S","savage","zh","kiyozero")],["m3s_zh",Xe("M3S","savage","zh","kiyozero")],["m4s_zh",Xe("M4S","savage","zh","kiyozero")],["fru_en_full",Xe({en:"FRU",zh:""},"ultimate","en",["Yara","shanzhe"],!0)],["fru_zh",Xe({en:"FRU",zh:""},"ultimate","zh",["","czmm"])],["queen_eternal",Xe({en:"Queen Eternal",zh:""},"extreme","zh","")],["p1s_aetherial_shackles_first",Xe("P1S Aetherial Shackles first","savage","en")],["p1s_shackles_of_time_first",Xe("P1S Shackles of Time first","savage","en")],["p2s",Xe("P2S","savage","en")],["p5s_zh",Xe("P5S","savage","zh","3")],["p6s_zh",Xe("P6S","savage","zh","3")],["p7s_zh",Xe("P7S","savage","zh","3")],["p8s_p1_snake_zh",Xe({en:"P8S P1 snake first",zh:"P8S"},"savage","zh","3")],["p8s_p1_beast_zh",Xe({en:"P8S P1 dog first",zh:"P8S"},"savage","zh","3")],["p8s_p2_zh",Xe({en:"P8S P2",zh:"P8S"},"savage","zh","3")],["p9s",Xe("P9S","savage","en","Lilian")],["p10s",Xe("P10S","savage","en","Tischel")],["p11s",Xe("P11S","savage","en","Lilian")],["p12s_p1",Xe("P12S P1","savage","en","Yara")],["p12s_p2",Xe("P12S P2","savage","en","Yara")],["p9s_zh",Xe("P9S","savage","zh","3")],["p10s_zh",Xe("P10S","savage","zh","3")],["p11s_zh",Xe("P11S","savage","zh","3")],["p12s_p1_zh",Xe("P12S","savage","zh","3")],["p12s_p2_zh",Xe("P12S","savage","zh","3")]]),Dj=["m9s","m10s","m11s","m12s_p1","m12s_p2","m9s_zh","m10s_zh","m11s_zh","m12s_p1_zh","m12s_p2_zh","final_verse_q40","fru_en_full","fru_zh"],yj=["dsr_p2","dsr_p6","dsr_p7","TOP_2023_04_02"],vj=new Map([["7.0-7.3",["m2s","m3s","m4s","m1s_zh","m2s_zh","m3s_zh","m4s_zh","fru_en_full","fru_zh","queen_eternal","m5s","m6s","m7s","m8s_full","final_verse_q40"]],["6.X",["p1s_aetherial_shackles_first","p1s_shackles_of_time_first","p2s","dsr_p2","dsr_p6","dsr_p7","p5s_zh","p6s_zh","p7s_zh","p8s_p1_snake_zh","p8s_p1_beast_zh","p8s_p2_zh","p9s","p9s_zh","TOP_2023_04_02","p9s","p10s","p11s","p12s_p1","p12s_p2","p9s_zh","p10s_zh","p11s_zh","p12s_p1_zh","p12s_p2_zh"]]]);let Jy=e=>{};const Lf="/presets/markers/",Ac=20,Rc=0,zs=5;function Mj(e){const t=Nt();return l.jsx("hr",{style:{marginTop:e.marginTop,marginBottom:e.marginBottom,border:"none",borderTop:"1px solid "+t.bgHighContrast}})}const KT=function(e,t){bO(e,n=>{try{const a=JSON.parse(n);t(a)}catch(a){console.log("Error fetching/parsing JSON "+e),console.error(a)}})},hd=C.createContext(""),Ys=C.createContext({trackIndices:[],setTrackIndices:()=>{}});function ev(e,t,n){let a=uo((n==null?void 0:n.globalOffset)??"");a=isNaN(a)?0:a;const s=uo((n==null?void 0:n.localOffset)??"");p.timeline.loadCombinedTracksPreset(e,a+(isNaN(s)?0:s),(n==null?void 0:n.cutoff)!==void 0?a+n.cutoff:void 0),t(p.timeline.getTrackIndices()),p.updateStats(),p.timeline.drawElements()}function tv(e){const t=C.useContext(hd),{setTrackIndices:n}=C.useContext(Ys);return l.jsx("button",{onClick:a=>KT(e.url,s=>ev(s,n,{globalOffset:t,localOffset:e.offsetStr})),children:e.displayName})}function nv(e,t){var n,a,s,c;return{en:(((n=e.authors)==null?void 0:n.length)??0)>0&&t?`${e.name.en} by ${(a=e.authors)==null?void 0:a.join(" & ")}`:e.name.en,zh:(((s=e.authors)==null?void 0:s.length)??0)>0&&t?`${e.name.zh} ${(c=e.authors)==null?void 0:c.join(" + ")} `:e.name.zh}}function Lj(e){return l.jsx("div",{style:{marginBlock:1},children:l.jsx(tv,{displayName:N(nv(e.meta,e.showAuthors)),url:Lf+e.fileName+".txt"})})}function xj(e){const t=C.useContext(hd),{setTrackIndices:n}=C.useContext(Ys),a=Ni(C.useContext(yn)),[s,c]=C.useState(new Map),[d,f]=C.useState(void 0);C.useEffect(()=>{KT(Lf+e.fileName+".txt",m=>{m.fileType!==pa.MarkerTrackSet?console.error(`while parsing ${e.fileName}, got invalid file type ${m.fileType}`):f(m.phasedTracks)})},[]);const h=l.jsx("div",{style:{display:"grid",gridTemplateColumns:"2fr 3fr",gap:zs},children:(d==null?void 0:d.map(({offset:m,label:R,fileName:T},S)=>{var _;let g=s.get(T);return g!=null&&g.length||(g=m.toString()),T===void 0&&console.error("missing fileName for phase",R,"of",e.fileName),l.jsxs(_i.Fragment,{children:[l.jsx("div",{style:{gridRow:S+1,gridColumn:1},children:l.jsx(Xt,{description:"@",defaultValue:((_=s.get(T))==null?void 0:_.toString())??"",onChange:I=>{const D=new Map(s);I===void 0?D.delete(T):D.set(T,I),c(D)},width:8,placeholder:m.toString()})}),l.jsx("div",{style:{gridRow:S+1,gridColumn:2},children:l.jsx(tv,{displayName:N(R),url:Lf+T,offsetStr:g})})]},S)}))??N({en:"loading phases...",zh:""})});return l.jsx("div",{style:{display:"flex",flexDirection:"column",marginBlock:zs,marginLeft:5,paddingLeft:10,borderLeft:"1px solid "+a.bgHighContrast,minWidth:240},children:l.jsx(Vl,{title:`trackPresets-phase-${e.fileName}`,titleNode:l.jsxs("div",{style:{display:"inline-flex",flexDirection:"row",gap:zs,alignItems:"baseline",marginBottom:4},children:[l.jsx("div",{children:N(nv(e.meta,e.showAuthors))}),l.jsx("span",{tabIndex:-1,children:" "}),l.jsx("div",{children:l.jsx("button",{onClick:m=>{m.stopPropagation();const R=new Map;d==null||d.forEach((T,S)=>{let g;for(let _=S+1;_<d.length;_++){const I=s.get(d[_].fileName);if(I){const D=uo(I);(g===void 0||D<g)&&(g=D)}}g!==void 0&&R.set(T.fileName,g)}),d==null||d.forEach(T=>KT(Lf+T.fileName,S=>{ev(S,n,{globalOffset:t,localOffset:s.get(T.fileName)??T.offset.toString(),cutoff:R.get(T.fileName)})}))},children:N({en:"Load all phases",zh:""})})})]}),noMargin:!0,autoIndent:!1,content:h})})}function tT(e){const t=new Map,n=c=>{const d=eT.get(c);if(!d){console.error("missing track metadata declaration for "+c);return}t.has(d.fightKind)||t.set(d.fightKind,new Map);const f=t.get(d.fightKind);d.supportedLanguages.forEach(h=>{var R,T;f.has(h)||f.set(h,{unphased:[],phased:[],commonAuthors:d.authors});const m=f.get(h);(d.phased?m.phased:m.unphased).push(c),((R=d.authors)==null?void 0:R.join("+"))!==((T=m.commonAuthors)==null?void 0:T.join("+"))&&(m.commonAuthors=void 0)})};e.trackList.map(n);const a={marginBlock:1},s=l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:zs,paddingInlineStart:6,marginInlineStart:10},children:t.entries().map(([c,d],f)=>d.entries().flatMap(([h,m])=>[l.jsxs("div",{children:[l.jsxs("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",gap:zs,alignItems:"baseline"},children:[N({en:m.commonAuthors?l.jsxs("p",{style:a,children:[lf(c)," (",Jh(h),") by"," ",m.commonAuthors.join(" & "),":"]}):l.jsxs("p",{style:a,children:[lf(c)," (",Jh(h),"):"]}),zh:m.commonAuthors?l.jsxs("p",{style:a,children:[lf(c),"",Jh(h),""," ",m.commonAuthors.join(" + "),""]}):l.jsxs("p",{style:a,children:[lf(c),"",Jh(h),""]})}),m.unphased.map((R,T)=>l.jsx(Lj,{meta:eT.get(R),fileName:R,showAuthors:!m.commonAuthors},T))]}),l.jsx("div",{children:m.phased.map((R,T)=>l.jsx(xj,{meta:eT.get(R),fileName:R,showAuthors:!m.commonAuthors},T))})]},`${f}-${h}`)]).toArray()).toArray()});return l.jsx(Vl,{title:`trackPresets-${e.label.en}`,titleNode:N(e.label),titleBodyGap:zs,defaultShow:e.defaultShow,autoIndent:!1,content:s})}function Hj(){const[e,t]=C.useState(ni.Info),[n,a]=C.useState(Tt.Blue),[s,c]=C.useState("0"),[d,f]=C.useState("1"),[h,m]=C.useState("0"),[R,T]=C.useState(""),[S,g]=C.useState(!1),[_,I]=C.useState(U.TechnicalFinish),D={display:"inline-block",marginRight:"1em",marginBottom:6},{setTrackIndices:O}=C.useContext(Ys);C.useEffect(()=>{Jy=j=>{t(j.markerType),c(j.time.toString()),f(j.duration.toString()),j.markerType===ni.Info?(a(j.color),c(j.time.toString()),f(j.duration.toString()),m(j.track.toString()),T(j.description),g(j.showText)):j.markerType===ni.Buff&&(m(j.track.toString()),I(j.description))};const L=pt("radio: markerType");L!==null&&(t(L),L===ni.Buff&&H(_))},[]);const x=(L,j)=>l.jsx("option",{value:L,children:j},L),k=l.jsxs("div",{children:[l.jsx(Xt,{defaultValue:R,description:N({en:"Description: ",zh:""}),width:40,onChange:T}),l.jsx(Xt,{defaultValue:h,description:N({en:"Track: ",zh:""}),width:4,style:D,onChange:m}),l.jsxs("div",{style:{display:"inline-block",marginTop:"4px"},children:[l.jsx("span",{children:N({en:"Color: ",zh:""})}),l.jsx("select",{style:{display:"inline-block",outline:"none"},value:n,onChange:L=>{L.target&&a(L.target.value)},children:[x(Tt.Red,N({en:"red",zh:""})),x(Tt.Orange,N({en:"orange",zh:""})),x(Tt.Yellow,N({en:"yellow",zh:""})),x(Tt.Green,N({en:"green",zh:""})),x(Tt.Cyan,N({en:"cyan",zh:""})),x(Tt.Blue,N({en:"blue",zh:""})),x(Tt.Purple,N({en:"purple",zh:""})),x(Tt.Pink,N({en:"pink",zh:""}))]}),l.jsx("div",{style:{background:n,marginLeft:"4px",display:"inline-block",verticalAlign:"middle",height:"1em",width:"4em"}})]}),l.jsxs("div",{style:{display:"inline-block",marginTop:"4px",marginLeft:"10px"},children:[l.jsx("input",{type:"checkbox",style:{position:"relative",top:3},checked:S,onChange:L=>{L.target&&g(L.target.checked)}}),l.jsx("span",{style:{marginLeft:4},children:N({en:"show text",zh:""})})]})]}),H=L=>{const j=new tE(L);f(j.info.duration.toString())},G=XS.map(L=>l.jsx("option",{value:L.name,children:Vb(L.name)},L.name)),P=l.jsxs("div",{children:[l.jsx("span",{children:N({en:"Buff: ",zh:""})}),l.jsx("select",{value:_,onChange:L=>{if(L.target){const j=L.target.value;I(j),H(j)}},children:G}),l.jsx("div",{style:{marginTop:5},children:l.jsx(Xt,{defaultValue:h,description:N({en:"Track: ",zh:""}),width:4,style:D,onChange:m})})]});return l.jsxs("div",{children:[l.jsx("p",{children:l.jsx("b",{children:N({en:"Add buffs/markers",zh:"buff"})})}),l.jsxs("form",{children:[l.jsxs("fieldset",{style:{display:"flex",alignItems:"baseline",paddingTop:0,paddingLeft:0,paddingBottom:0,marginLeft:0,marginBottom:10,border:0},children:[l.jsx("legend",{style:{float:"left",marginRight:"0.5rem",position:"relative",top:"1px"},children:N({en:"Type: ",zh:""})}),l.jsx(DO,{containerStyle:{display:"flex",flexDirection:"row",gap:"0.8rem"},uniqueName:"markerType",selected:e,onChange:L=>{t(L),L===ni.Buff&&H(_)},options:[[ni.Info,N({en:"Info",zh:""})],[ni.Buff,N({en:"Buff",zh:""})],[ni.Untargetable,N({en:"Untargetable",zh:""})]]})]}),l.jsx("span",{children:" "}),l.jsx(Xt,{defaultValue:s,description:N({en:"Time: ",zh:""}),width:8,style:D,onChange:c}),l.jsx(Xt,{defaultValue:d,description:N({en:"Duration: ",zh:""}),width:8,style:D,onChange:f}),e===ni.Info?k:void 0,e===ni.Buff?P:void 0,l.jsx("button",{type:"submit",style:{display:"block",marginTop:"0.5em"},onClick:L=>{const j={type:ht.Marker,markerType:e,time:uo(s),duration:parseFloat(d),color:n,track:parseInt(h),description:R,showText:S};let Z;if(e===ni.Untargetable&&(j.color=Tt.Grey,j.track=Eo,j.description="",j.showText=!0),e===ni.Buff){const J=new tE(_),se=parseFloat(d);!isNaN(se)&&se>J.info.duration&&(Z=N({en:`this buff can't last longer than ${J.info.duration}s`,zh:`${J.info.duration}`})),j.color=J.info.color,j.description=J.name,j.duration=se,j.showText=!0}if((isNaN(j.duration)||isNaN(j.time)||isNaN(j.track))&&(Z=N({en:"some input(s) are invalid",zh:""})),j.track!==Eo&&(j.track<Rc||j.track>Ac)&&(Z=N({en:`marker track number must be between ${Rc} and ${Ac}`,zh:`${Rc}${Ac}`})),Z){window.alert(Z),L.preventDefault();return}p.timeline.addMarker(j),p.updateStats(),O(p.timeline.getTrackIndices()),e===ni.Untargetable&&wn(),L.preventDefault()},children:N({en:"add marker",zh:""})})]})]})}function kj(){const{trackIndices:e,setTrackIndices:t}=C.useContext(Ys),n=parseInt(C.useContext(hd)),a=isNaN(n)?0:n,s=Ni(C.useContext(yn)),[c,d]=C.useState("0"),f=l.jsx("input",{style:{color:s.text,backgroundColor:"transparent",outline:"none",border:"none",borderBottom:"1px solid "+s.text},size:2,type:"text",value:c,onChange:T=>d(T.target.value)}),h=N({en:l.jsxs("span",{children:["Load into individual track ",f,": "]}),zh:l.jsxs("span",{children:["",f,""]})}),m=l.jsxs(l.Fragment,{children:[l.jsx(Jf,{allowLoadFromUrl:!1,defaultLoadUrl:"",label:N({en:"Load multiple tracks combined: ",zh:""}),onLoadFn:T=>{p.timeline.loadCombinedTracksPreset(T,a),p.updateStats(),t(p.timeline.getTrackIndices()),p.timeline.drawElements()}}),l.jsx("div",{className:"paragraph",children:l.jsx(Jf,{allowLoadFromUrl:!1,label:h,onLoadFn:T=>{const S=parseInt(c);if(isNaN(S)||S!==Eo&&(S<Rc||S>Ac)){window.alert(N({en:`marker track number must be between ${Rc} and ${Ac}`,zh:`${Rc}${Ac}`}));return}p.timeline.loadIndividualTrackPreset(T,S,a),p.updateStats(),t(p.timeline.getTrackIndices()),p.timeline.drawElements()}})})]}),R=l.jsxs(l.Fragment,{children:[l.jsx(Kl,{fileFormat:Qo.Json,getContentFn:()=>p.timeline.serializedCombinedMarkerTracks(),filename:"tracks_all",displayName:N({en:"all tracks combined",zh:""})},"combined"),e.map(T=>{let S=T.toString(),g=N({en:"track ",zh:""})+S;return T===Eo&&(S="untargetable",g=N({en:"track untargetable",zh:""})),l.jsx(Kl,{fileFormat:Qo.Json,getContentFn:()=>{const _=p.timeline.serializedSeparateMarkerTracks();for(let I=0;I<_.length;I++)if(_[I].track===T)return _[I];return console.assert(!1),[]},filename:"track_"+S,displayName:g},T)})]});return l.jsxs("div",{children:[l.jsxs("p",{children:[l.jsx("b",{children:N({en:"Load marker tracks from file",zh:""})})," ",l.jsx(qe,{topic:"load tracks",content:N({en:"when loading additional markers, current markers will not be deleted",zh:""})})]}),m,l.jsx("p",{style:{marginTop:16},children:l.jsx("b",{children:N({en:"Save marker tracks to file",zh:""})})}),R]})}function Uj(){const[e,t]=C.useState([]);C.useEffect(()=>{t(p.timeline.getTrackIndices())},[]);const[n,a]=C.useState(""),s=uo(n),c=l.jsx(Xt,{defaultValue:n,description:l.jsxs(l.Fragment,{children:[l.jsx("span",{style:{color:isNaN(s)||s===0?"":Tt.Purple},children:N({en:"Load tracks with time offset ",zh:" "})}),l.jsx(qe,{topic:"trackLoadOffset",content:N({en:l.jsxs("div",{children:[l.jsx("p",{children:"When specified, all imported and preset tracks will start from the specified timestamp. Use this to combine markers for multi-phase fights with varying kill times."}),l.jsx("p",{children:"Loading preset tracks that already have phase timestamps will add this start value on top of the phase-specific timing."})]}),zh:l.jsxs("div",{children:[l.jsx("p",{children:"P"}),l.jsx("p",{children:"P"})]})})}),":"]}),width:4,onChange:a}),d=l.jsxs(l.Fragment,{children:[l.jsx("p",{children:l.jsx("b",{children:N({en:"Remove buffs/markers",zh:"buff"})})}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"max-content max-content",columnGap:2,rowGap:zs,alignItems:"center"},children:[l.jsx("div",{children:l.jsx("button",{onClick:()=>{p.timeline.deleteAllMarkers(),p.updateStats(),t([])},children:N({en:"clear all markers",zh:""})})}),l.jsx("div",{children:l.jsx("button",{onClick:()=>{const f=p.timeline.sortAndRemoveDuplicateMarkers();f>0?alert("removed "+f+" duplicate markers"):alert("no duplicate markers found"),p.timeline.updateTimelineMarkers()},children:N({en:"remove duplicates",zh:""})})}),l.jsx("div",{style:{gridColumn:"1 / 3"},children:N({en:"click a marker in the timeline to delete it",zh:""})})]})]});return l.jsx(zS,{contentHeight:bg,children:[{defaultSize:35,content:l.jsxs(l.Fragment,{children:[l.jsx("p",{children:l.jsx("b",{children:N({en:"Presets",zh:""})})}),l.jsx("div",{children:c}),l.jsx(hd.Provider,{value:n,children:l.jsxs(Ys.Provider,{value:{trackIndices:e,setTrackIndices:t},children:[l.jsx(tT,{label:{en:"Current content",zh:""},trackList:Dj,defaultShow:!0}),l.jsx(tT,{label:{en:"Legacy ultimates",zh:""},trackList:yj,defaultShow:!0}),l.jsx("p",{children:l.jsx("b",{children:N({en:"Archive",zh:""})})}),Array.from(vj.entries().map(([f,h],m)=>l.jsx("div",{children:l.jsx(tT,{label:{en:f},trackList:h})},m)))]})})]})},{defaultSize:30,content:l.jsxs(l.Fragment,{children:[d,l.jsx(Mj,{marginTop:15,marginBottom:15}),l.jsx(Ys.Provider,{value:{trackIndices:e,setTrackIndices:t},children:l.jsx(Hj,{})})]})},{defaultSize:35,content:l.jsx(l.Fragment,{children:l.jsx(hd.Provider,{value:n,children:l.jsx(Ys.Provider,{value:{trackIndices:e,setTrackIndices:t},children:l.jsx(kj,{})})})})}]})}const we=new Map;we.set(U.LeyLines,"Buffs/BLM/Ley Lines.png");we.set(U.Tincture,"Buffs/General/Tincture.png");we.set(U.ArcaneCircle,"Buffs/RPR/Arcane Circle.png");we.set(U.ArmysPaeon,"Buffs/BRD/Army's Paeon.png");we.set(U.BattleLitany,"PartyBuffs/battle_litany.png");we.set(U.BattleVoice,"Buffs/BRD/Battle Voice.png");we.set(U.Brotherhood,"PartyBuffs/brotherhood.png");we.set(U.Card_TheBalance,"PartyBuffs/the_balance.png");we.set(U.Card_TheSpear,"PartyBuffs/the_spear.png");we.set(U.ChainStratagem,"PartyBuffs/chain_stratagem.png");we.set(U.Devilment,"Buffs/DNC/Devilment.png");we.set(U.Divination,"PartyBuffs/divination.png");we.set(U.Dokumori,"PartyBuffs/dokumori.png");we.set(U.Embolden,"PartyBuffs/Embolden.png");we.set(U.MagesBallad,"Buffs/BRD/Mage's Ballad.png");we.set(U.RadiantFinale1,"Buffs/BRD/Radiant Finale.png");we.set(U.RadiantFinale2,"Buffs/BRD/Radiant Finale.png");we.set(U.RadiantFinale3,"Buffs/BRD/Radiant Finale.png");we.set(U.SearingLight,"PartyBuffs/searing_light.png");we.set(U.StandardFinish,"Buffs/DNC/Standard Finish.png");we.set(U.StarryMuse,"Buffs/PCT/Starry Muse.png");we.set(U.TechnicalFinish,"Buffs/DNC/Technical Finish.png");we.set(U.WanderersMinuet,"Buffs/BRD/Wanderer's Minuet.png");we.set(U.Acceleration,"Buffs/RDM/Acceleration.png");we.set(U.Fuka,"Buffs/SAM/Fuka.png");we.set(U.Fugetsu,"Buffs/SAM/Fugetsu.png");we.set(U.EnhancedEnpi,"Buffs/SAM/Enhanced Enpi.png");we.set(U.DeathsDesign,"Buffs/RPR/Death's Design.png");we.set(U.ArcaneCircle,"Buffs/RPR/Arcane Circle.png");we.set(U.RagingStrikes,"Buffs/BRD/Raging Strikes.png");we.set(U.Barrage,"Buffs/BRD/Barrage.png");we.set(U.NoMercy,"Buffs/GNB/No Mercy.png");we.set(U.EnhancedPiercingTalon,"Buffs/DRG/Enhanced Piercing Talon.png");we.set(U.PowerSurge,"Buffs/DRG/Power Surge.png");we.set(U.LanceCharge,"Buffs/DRG/Lance Charge.png");we.set(U.LifeOfTheDragon,"Buffs/DRG/Life of the Dragon.png");we.set(U.LifeSurge,"Buffs/DRG/Life Surge.png");we.set(U.DivineMight,"Buffs/PLD/Divine Might.png");we.set(U.Requiescat,"Buffs/PLD/Requiescat Zero.png");we.set(U.FightOrFlight,"Buffs/PLD/Fight or Flight.png");we.set(U.Zoe,"Buffs/SGE/Zoe.png");we.set(U.Autophysis,"Buffs/SGE/Autophysis.png");we.set(U.Krasis,"Buffs/SGE/Krasis.png");we.set(U.Philosophia,"Buffs/SGE/Philosophia.png");we.set(U.Soteria,"Buffs/SGE/Soteria.png");we.set(U.TrickAttack,"Buffs/NIN/Trick Attack.png");we.set(U.KunaisBane,"Buffs/NIN/Kunai's Bane.png");we.set(U.Bunshin,"Buffs/NIN/Bunshin.png");we.set(U.RiddleOfFire,"Buffs/MNK/Riddle of Fire.png");we.set(U.NeutralSect,"Buffs/AST/Neutral Sect.png");we.set(U.Synastry,"Buffs/AST/Synastry.png");we.set(U.TheArrow,"Buffs/AST/The Arrow.png");we.set(U.Confession,"Buffs/WHM/Confession.png");we.set(U.Asylum,"Buffs/WHM/Asylum.png");we.set(U.Temperance,"Buffs/WHM/Temperance.png");we.set(U.HuntersInstinct,"Buffs/VPR/Hunter's Instinct.png");we.set(U.Swiftscaled,"Buffs/VPR/Swiftscaled.png");we.set(U.FeyIllumination,"Buffs/SCH/Fey Illumination.png");we.set(U.Dissipation,"Buffs/SCH/Dissipation.png");we.set(U.Protraction,"Buffs/SCH/Protraction.png");we.set(U.Recitation,"Buffs/SCH/Recitation.png");const Ks=new Map;we.forEach((e,t)=>{const n=new Image;n.src="assets/"+e,n.onload=function(){nl()},Ks.set(t,n)});const hE=400,Bi=28,iv=e=>{e.setDraggedSkillElem(void 0),p.record.unselectAll(),p.displayCurrentState(),e.setBgSelecting(!0)};function wj(e){const{ctx:t,lines:n,images:a,viewInfo:s}=e;let{mouseX:c,mouseY:d}=e;const{colors:f,visibleWidth:h,renderingProps:m}=s;if(!n.length)return;const R=14,T=24,S=8,g=4;t.font="12px "+Ca;let _=-1;n.forEach(P=>{_=Math.max(_,t.measureText(P).width)});let[I,D]=[_+2*S,R*n.length+2*g];a&&a.length>0&&(I=Math.max(I,S+a.length*(T+S)),D+=T+g);const O=4,x=11;let k=!1;d>=D+O?d=d-D-O:d+D<=m.timelineHeight?d=d+x+O:k=!0,k?(d=d-D/2,c=c+x+O):c-I/2>=0&&c+I/2<h?c=c-I/2:c-I/2<0?c=0:c=h-I,t.strokeStyle=f.bgHighContrast,t.lineWidth=1,t.fillStyle=f.tipBackground,t.fillRect(c,d,I,D),t.strokeRect(c,d,I,D),t.fillStyle=f.emphasis,t.textBaseline="top",t.textAlign="left";for(let P=0;P<n.length;P++)t.fillText(n[P],c+S,d+P*R+2+g);const H=c+S,G=d+n.length*R+2+g;if(a)for(let P=0;P<a.length;P++)a[P]&&t.drawImage(a[P],H+P*T,G,T*.75,T)}function Pj(e){const{ctx:t,viewInfo:n,markerTracksTopY:a,markerTracksBottomY:s,timelineOrigin:c,trackBins:d,testInteraction:f}=e,h=n.colors,{countdown:m,scale:R}=n.renderingProps;t.lineCap="round",t.lineWidth=4,t.font="11px "+Ca,t.textAlign="left",d.forEach((T,S)=>{let g=s-(S+1)*De.trackHeight;S===Eo&&(g=a);for(let _=0;_<T.length;_++){const I=T[_];let D=I.description;I.markerType===ni.Untargetable?D=N({en:"Untargetable",zh:""}):I.markerType===ni.Buff&&(D=Vb(I.description));const O=c+tt.positionFromTimeAndScale(I.time+m,R),x=()=>{const k=p.timeline.deleteMarker(I);console.assert(k),p.updateStats(),Jy(I)};if(I.duration>0){const k=tt.positionFromTimeAndScale(I.duration,R);if(I.markerType===ni.Buff){t.fillStyle=I.color+h.timeline.markerAlpha,t.fillRect(O,g,k,De.trackHeight);const G=Ks.get(I.description);G&&t.drawImage(G,O,g,De.trackHeight*.75,De.trackHeight),t.fillStyle=h.emphasis,t.fillText(D,O+De.trackHeight*1.5,g+10)}else I.showText?(t.fillStyle=I.color+h.timeline.markerAlpha,t.fillRect(O,g,k,De.trackHeight),t.fillStyle=h.emphasis,t.fillText(D,O+De.trackHeight/2,g+10)):(t.strokeStyle=I.color,t.beginPath(),t.moveTo(O,g+De.trackHeight/2),t.lineTo(O+k,g+De.trackHeight/2),t.stroke());const H=I.time+" - "+parseFloat((I.time+I.duration).toFixed(3));f({x:O,y:g,w:Math.max(k,De.trackHeight),h:De.trackHeight},{hoverTip:[`[${H}] ${D}`],onMouseUp:x})}else t.fillStyle=I.color,t.beginPath(),t.ellipse(O,g+De.trackHeight/2,4,4,0,0,2*Math.PI),t.fill(),I.showText&&(t.fillStyle=h.emphasis,t.beginPath(),t.fillText(D,O+De.trackHeight/2,g+10)),f({x:O-De.trackHeight/2,y:g,w:De.trackHeight,h:De.trackHeight},{hoverTip:[`[${I.time}] ${D}`],onMouseUp:x})}})}function Gj(e){const{ctx:t,viewInfo:n,timelineOriginX:a,timelineOriginY:s,elems:c,testInteraction:d}=e,f=n.colors,h=n.renderingProps.scale;t.lineWidth=1,t.strokeStyle=f.timeline.mpTickMark,t.beginPath(),c.forEach(m=>{const R=a+tt.positionFromTimeAndScale(m.displayTime,h);t.moveTo(R,s),t.lineTo(R,s+De.renderSlotHeight()),d({x:R-2,y:s,w:4,h:De.renderSlotHeight()},{hoverTip:[`[${m.displayTime.toFixed(3)}] ${m.sourceDesc}`]})}),t.stroke()}function Bj(e){const{ctx:t,viewInfo:n,timelineOriginX:a,timelineOriginY:s,elems:c,testInteraction:d}=e,f=n.colors,h=n.renderingProps.scale;t.lineWidth=1,t.strokeStyle=f.sam.meditation,t.beginPath(),c.forEach(m=>{const R=a+tt.positionFromTimeAndScale(m.displayTime,h);t.moveTo(R,s),t.lineTo(R,s+De.renderSlotHeight()),d({x:R-2,y:s,w:4,h:De.renderSlotHeight()},{hoverTip:[`[${m.displayTime.toFixed(3)}] ${m.sourceDesc}`]})}),t.stroke()}function Fj(e){const{ctx:t,viewInfo:n,timelineOriginX:a,timelineOriginY:s,elems:c,testInteraction:d}=e,f=n.colors,h=n.renderingProps.scale;t.lineWidth=1,t.strokeStyle=f.pld.ironWillColor,t.beginPath(),c.forEach(m=>{const R=a+tt.positionFromTimeAndScale(m.displayTime,h);t.moveTo(R,s),t.lineTo(R,s+De.renderSlotHeight()),d({x:R-2,y:s,w:4,h:De.renderSlotHeight()},{hoverTip:[`[${m.displayTime.toFixed(3)}] ${m.sourceDesc}`]})}),t.stroke()}function jj(e){const{ctx:t,viewInfo:n,timelineOriginX:a,timelineOriginY:s,elems:c,testInteraction:d}=e,f=n.colors,h=n.renderingProps.scale;t.font="bold 10px "+Ca,c.forEach(m=>{const R=a+tt.positionFromTimeAndScale(m.displayTime,h),T=12,S=s+T;t.beginPath(),t.textAlign="center",t.moveTo(R,S-T),t.lineTo(R-T/2,S),t.lineTo(R+T/2,S),t.fillStyle=f.timeline.warningMark,t.fill(),t.fillStyle="white",t.fillText("!",R,S-1);let g="["+m.displayTime.toFixed(3)+"] ";switch(m.warningType.kind){case"combobreak":g+=N({en:"broken combo!",zh:""}).toString();break;case"overcap":g+=Qe(m.warningType.rsc).toString()+N({en:" overcap!",zh:""}).toString();break;case"overwrite":g+=Qe(m.warningType.rsc).toString()+N({en:" overwrite!",zh:""}).toString();break;case"timeout":g+=Qe(m.warningType.rsc).toString()+N({en:" expired!",zh:""});break;default:g+=N({en:m.warningType.en,zh:m.warningType.zh});break}d({x:R-T/2,y:S-T,w:T,h:T},{hoverTip:[g]})})}function nT(e){const{ctx:t,viewInfo:n,timelineOriginX:a,timelineOriginY:s,elems:c,testInteraction:d}=e,{colors:f,renderingProps:h}=n,m=h.scale;c.forEach(R=>{const T=R.type===ht.DamageMark&&li(R.displayTime),S=a+tt.positionFromTimeAndScale(R.displayTime,m);let g="["+R.displayTime.toFixed(3)+"] ";const _=N({en:"Untargetable",zh:""});switch(R.type){case ht.AggroMark:t.fillStyle=f.timeline.aggroMark,g+=N({en:"aggro"});break;case ht.HealingMark:t.fillStyle=f.timeline.healingMark,g+=N({en:"healing potency",zh:""});break;default:t.fillStyle=T?f.timeline.untargetableDamageMark:f.timeline.damageMark,g+=N({en:"damage potency",zh:""})}t.beginPath(),R.type===ht.AggroMark||R.type===ht.DamageMark?(t.moveTo(S-3,s),t.lineTo(S+3,s),t.lineTo(S,s+6)):(t.moveTo(S-3,s+12),t.lineTo(S+3,s+12),t.lineTo(S,s+6)),t.fill();const I=R.buffs.filter(k=>k==="TINCTURE").length>0,D=[],O=[];R.potencyInfos.forEach(k=>{const H=k.sourceDesc.replace("{skill}",aa(k.sourceSkill));if(T)D.push(0 .toFixed(3)+" ("+H+")");else if(k.sourceSkill in Zo){const G=N({en:"LB"});D.push(G+" ("+H+")")}else{const G=k.potency.getAmount({tincturePotencyMultiplier:h.tincturePotencyMultiplier,includePartyBuffs:!0,includeSplash:!1});if(k.potency.targetCount>1){const P=G*(1-(k.potency.falloff??1)),L=k.potency.targetCount-1,j=P.toFixed(2)+(L>1?` x ${L}`:""),Z=L>1?N({en:`${H}, ${L} additional targets`,zh:`${H}, ${L} `}):N({en:`${H}, 1 additional target`,zh:`${H}, 1 `});D.push(G.toFixed(2)+" ("+N({en:`${H}, primary target`,zh:`${H}, `})+")"),D.push(j+` (${Z})`)}else D.push(G.toFixed(2)+" ("+H+")");I&&!O.includes(Ks.get(U.Tincture))&&O.push(Ks.get(U.Tincture)),k.potency.getPartyBuffs(R.displayTime).forEach(P=>{const L=Ks.get(P);O.includes(L)||O.push(L)})}});const x=R.type===ht.HealingMark?{x:S-3,y:s+6,w:6,h:6}:{x:S-3,y:s,w:6,h:6};d(x,{hoverTip:T?[g,...D,_]:[g,...D],hoverImages:O})})}function zj(e){const{ctx:t,viewInfo:n,timelineOriginX:a,timelineOriginY:s,elems:c,testInteraction:d}=e,f=n.colors,h=n.renderingProps.scale;t.fillStyle=f.timeline.lucidTickMark,c.forEach(m=>{const R=a+tt.positionFromTimeAndScale(m.displayTime,h);t.beginPath(),t.moveTo(R-3,s),t.lineTo(R+3,s),t.lineTo(R,s+6),t.fill();const T=`[${m.displayTime.toFixed(3)}] ${m.sourceDesc.replace("{skill}",aa("LUCID_DREAMING"))}`;d({x:R-3,y:s,w:6,h:6},{hoverTip:[T]})})}function Yj(e){const{ctx:t,viewInfo:n,timelineOriginX:a,timelineOriginY:s,elems:c,interactive:d,testInteraction:f}=e,{colors:h,renderingProps:m}=n,R=m.scale,T=[],S=[],g=[],_=[],I=[],D=[],O=new Map([[U.Tincture,{color:h.timeline.potCover,showImage:!0}],[U.LeyLines,{color:h.timeline.llCover,showImage:!0}],[U.SearingLight,{color:h.smn.searing,showImage:!0}],[U.Hyperphantasia,{color:h.timeline.llCover,showImage:!1}],[U.StarryMuse,{color:h.timeline.buffCover,showImage:!0}],[U.Embolden,{color:h.rdm.emboldenBuff,showImage:!0}],[U.Acceleration,{color:h.rdm.accelBuff,showImage:!0}],[U.TechnicalFinish,{color:h.dnc.esprit,showImage:!0}],[U.Devilment,{color:h.dnc.feathers,showImage:!0}],[U.Fuka,{color:h.timeline.llCover,showImage:!0}],[U.Fugetsu,{color:h.sam.fugetsu,showImage:!0}],[U.NoMercy,{color:h.sam.fugetsu,showImage:!0}],[U.EnhancedPiercingTalon,{color:h.drg.enhancedPiercingTalon,showImage:!0}],[U.PowerSurge,{color:h.drg.powerSurge,showImage:!0}],[U.LifeSurge,{color:h.drg.lifeSurge,showImage:!0}],[U.LanceCharge,{color:h.drg.lanceCharge,showImage:!0}],[U.LifeOfTheDragon,{color:h.drg.lifeOfTheDragon,showImage:!0}],[U.BattleLitany,{color:h.drg.battleLitany,showImage:!0}],[U.DivineMight,{color:h.pld.divineMight,showImage:!0}],[U.Requiescat,{color:h.pld.requiescat,showImage:!0}],[U.FightOrFlight,{color:h.pld.fightOrFlight,showImage:!0}],[U.EnhancedEnpi,{color:h.rdm.accelBuff,showImage:!0}],[U.ArcaneCircle,{color:h.rpr.arcaneCircle,showImage:!0}],[U.DeathsDesign,{color:h.rpr.deathsDesign,showImage:!0}],[U.WanderersMinuet,{color:h.brd.wanderersCoda,showImage:!0}],[U.MagesBallad,{color:h.brd.magesCoda,showImage:!0}],[U.ArmysPaeon,{color:h.brd.armysCoda,showImage:!0}],[U.RagingStrikes,{color:h.brd.ragingStrikes,showImage:!0}],[U.Barrage,{color:h.brd.barrage,showImage:!0}],[U.BattleVoice,{color:h.brd.battleVoice,showImage:!0}],[U.RadiantFinale1,{color:h.brd.radiantFinale,showImage:!0}],[U.RadiantFinale2,{color:h.brd.radiantFinale,showImage:!0}],[U.RadiantFinale3,{color:h.brd.radiantFinale,showImage:!0}],[U.Zoe,{color:h.sge.zoe,showImage:!0}],[U.Autophysis,{color:h.sge.autophysis,showImage:!0}],[U.Krasis,{color:h.sge.krasis,showImage:!0}],[U.Soteria,{color:h.sge.soteria,showImage:!0}],[U.Philosophia,{color:h.sge.philosophia,showImage:!0}],[U.WaxingNocturne,{color:h.blu.moonflute,showImage:!0}],[U.Bristle,{color:h.blu.bristle,showImage:!0}],[U.Whistle,{color:h.blu.whistle,showImage:!0}],[U.TingleA,{color:h.blu.tinglea,showImage:!0}],[U.TingleB,{color:h.blu.tingleb,showImage:!0}],[U.Dokumori,{color:h.nin.dokumori,showImage:!0}],[U.TrickAttack,{color:h.nin.trick,showImage:!0}],[U.KunaisBane,{color:h.nin.trick,showImage:!0}],[U.Bunshin,{color:h.nin.bunshin,showImage:!0}],[U.RiddleOfFire,{color:h.mnk.riddleOfFire,showImage:!0}],[U.Brotherhood,{color:h.mnk.brotherhood,showImage:!0}],[U.Divination,{color:h.ast.div,showImage:!0}],[U.NeutralSect,{color:h.ast.neutral,showImage:!0}],[U.Synastry,{color:h.ast.synastry,showImage:!0}],[U.TheArrow,{color:h.ast.arrow,showImage:!0}],[U.Confession,{color:h.whm.confession,showImage:!0}],[U.Asylum,{color:h.whm.asylum,showImage:!0}],[U.Temperance,{color:h.whm.temperance,showImage:!0}],[U.HuntersInstinct,{color:h.vpr.huntersInstinct,showImage:!0}],[U.Swiftscaled,{color:h.vpr.swiftscaled,showImage:!0}],[U.ChainStratagem,{color:h.sch.chain,showImage:!0}],[U.FeyIllumination,{color:h.sch.feyIllumination,showImage:!0}],[U.Dissipation,{color:h.sch.dissipation,showImage:!0}],[U.Protraction,{color:h.sch.protraction,showImage:!0}],[U.Recitation,{color:h.sch.recitation,showImage:!0}]]),x=new Map;O.forEach((Z,J)=>x.set(J,[]));const k=[],H=[],G=[],P=s+De.skillButtonHeight/2;c.forEach(Z=>{const J=Z,se=a+tt.positionFromTimeAndScale(J.displayTime,R),X=J.isGCD?P+De.skillButtonHeight/2:P,Ae=J.node.targetList;Ae.length>1?T.push({count:Ae.length,x:se+De.skillButtonHeight/2,y:X-5}):Ae.length===1&&Ae[0]!==1&&S.push({target:Ae[0],x:se+De.skillButtonHeight/2,y:X-3});const W=2,ee=tt.positionFromTimeAndScale(J.lockDuration,R);if(J.isSpellCast?(_.push({x:se+W,y:X,w:ee-W,h:De.skillButtonHeight/2}),D.push(se+tt.positionFromTimeAndScale(J.relativeSnapshotTime,R))):g.push({x:se+W,y:X,w:ee-W,h:De.skillButtonHeight}),J.isGCD){const le=tt.positionFromTimeAndScale(J.recastDuration,R);I.push({x:se+W,y:X+De.skillButtonHeight/2,w:le-W,h:De.skillButtonHeight/2})}if(J.skillName in Zo){const le=tt.positionFromTimeAndScale(J.recastDuration,R);g.push({x:se+W,y:X+De.skillButtonHeight/2,w:le-W,h:De.skillButtonHeight/2})}J.node.tmp_invalid_reasons.length>0&&H.push({x:se,y:s+De.slotPaddingTop,w:tt.positionFromTimeAndScale(J.isGCD?Math.max(J.recastDuration,J.lockDuration):J.lockDuration,R),h:De.renderSlotHeight()-De.slotPaddingBottom-De.slotPaddingTop});let M=0;x.forEach((le,v)=>{J.node.hasBuff(v)&&(M+=Y(M,le))}),J.node.hasPartyBuff()&&Y(M,k);function Y(le,v){return m.drawOptions.drawBuffIndicators&&v.push({x:se,y:X+Bi+le*4,w:Bi,h:4}),1}bT(J.skillName)&&G.push({elem:Z,x:se,y:X})}),t.font="13px "+Ca,t.fillStyle=h.text,t.textAlign="center",T.forEach(Z=>{t.fillText(""+Z.count.toString(),Z.x,Z.y)}),t.font="26px "+Ca,S.forEach(Z=>{t.fillText(String.fromCharCode(9312+Z.target-1),Z.x,Z.y)}),t.font="13px "+Ca;const L=Z=>{t.rect(Z.x,Z.y,Z.w,Z.h),d&&f(Z,{onMouseDown:iv})};t.fillStyle=h.timeline.castBar,t.beginPath(),_.forEach(L),t.fill(),t.lineWidth=1,t.strokeStyle="rgba(151, 85, 239, 0.4)",t.beginPath(),D.forEach(Z=>{t.moveTo(Z,P+Bi/2),t.lineTo(Z,P+Bi)}),t.stroke(),t.fillStyle=h.timeline.gcdBar,t.beginPath(),I.forEach(L),t.fill(),t.fillStyle=h.timeline.lockBar,t.beginPath(),g.forEach(L),t.fill(),x.forEach((Z,J)=>{t.fillStyle=O.get(J).color,t.beginPath(),Z.forEach(L),t.fill()}),t.fillStyle=h.timeline.buffCover,t.beginPath(),k.forEach(L),t.fill(),t.beginPath(),G.forEach(Z=>{t.drawImage(bT(Z.elem.skillName),Z.x,Z.y,Bi,Bi);const J=Z.elem.node,se=[],X=[],Ae=aa(Z.elem.skillName)+"@"+Z.elem.displayTime.toFixed(3);se.push(Ae);const W=J.targetList;if(W.length>0&&(W.length===1?se.push(N({en:"target: ",zh:""}).toString()+W[0]):se.push(N({en:"targets: ",zh:""}).toString()+J.targetList.join(" "))),!((J.maybeGetActionKey()??"NEVER")in Zo)){const M=J.getPotency({tincturePotencyMultiplier:m.tincturePotencyMultiplier,includePartyBuffs:!0,includeSplash:!0,untargetable:li}).applied;M&&se.push(N({en:"potency: ",zh:""})+M.toFixed(2));const Y=J.getHealingPotency({tincturePotencyMultiplier:m.tincturePotencyMultiplier,includeSplash:!0,includePartyBuffs:!0,untargetable:li}).applied;Y&&se.push(N({en:"healing potency: "})+Y.toFixed(2))}let ee=0;J.tmp_endLockTime!==void 0&&J.tmp_startLockTime!==void 0&&(ee=J.tmp_endLockTime-J.tmp_startLockTime),se.push(N({en:"duration: ",zh:""})+ee.toFixed(3)),J.tmp_invalid_reasons.length>0&&(se.push(""),se.push(N({en:"skill is invalid:",zh:""}).toString()),J.tmp_invalid_reasons.forEach(M=>se.push("- "+Bs(M)))),O.forEach((M,Y)=>{M.showImage&&J.hasBuff(Y)&&X.push(Ks.get(Y))}),J.getPartyBuffs().forEach(M=>{const Y=Ks.get(M);Y&&X.push(Y)}),d?f({x:Z.x,y:Z.y,w:Bi,h:Bi},{hoverTip:se,onMouseUp:M=>{if(M.draggedSkillElem===void 0&&!M.bgSelecting){const Y=p.record.selectionStartIndex,ie=p.record.selectionEndIndex;p.timeline.onClickTimelineAction(Z.elem.actionIndex,M.shiftKey);const le=p.record.selectionStartIndex,v=p.record.selectionEndIndex;le===Y&&v!==ie||le===ie&&(v??0)>(ie??0)?KS():YS()}},onMouseDown:M=>{M.dragLock||M.setDraggedSkillElem(Z.elem)},pointerMouse:!0,hoverImages:X}):f({x:Z.x,y:Z.y,w:Bi,h:Bi},{hoverTip:se,pointerMouse:!1,hoverImages:X})});const j=t.globalAlpha;return t.fillStyle=h.timeline.invalidBg,t.globalAlpha=.2,t.beginPath(),H.forEach(Z=>{t.rect(Z.x,Z.y,Z.w,Z.h)}),t.fill(),t.globalAlpha=j,new Map(d?G.map(Z=>[Z.elem.actionIndex,{x:Z.x,y:Z.y,w:Bi,h:Bi}]):[])}function VT(e){const{ctx:t,color:n,x:a,y1:s,y2:c,y3:d,tip:f,width:h,testInteraction:m}=e;t.fillStyle=n,t.beginPath(),t.moveTo(a-3,0),t.lineTo(a+3,0),t.lineTo(a,6),t.fill(),t.lineWidth=1,t.strokeStyle=n,t.setLineDash([]),t.beginPath(),t.moveTo(a,0),t.lineTo(a,s),t.stroke(),t.strokeStyle=n+"9f",t.setLineDash([2,3]),t.beginPath(),t.moveTo(a,s),t.lineTo(a,c),t.stroke();const R=t.lineWidth;h!==void 0&&(t.lineWidth=h),t.strokeStyle=n,t.setLineDash([]),t.beginPath(),t.moveTo(a,c),t.lineTo(a,d),t.stroke(),t.lineWidth=R,t.strokeStyle=n+"9f",t.setLineDash([2,3]),t.beginPath(),t.moveTo(a,d),t.lineTo(a,hE),t.stroke(),f!==void 0&&(m==null||m({x:a-3,y:0,w:6,h:hE},{hoverTip:[f]})),t.setLineDash([])}function av(e){const{ctx:t,viewInfo:n,originX:a,testInteraction:s}=e,c=e.ignoreVisibleX??!1,{colors:d,renderingProps:f,visibleWidth:h}=n,m=c?tt.positionFromTimeAndScale(p.game.time+f.countdown,f.scale):h;t.fillStyle=d.timeline.ruler,t.fillRect(0,0,m,De.rulerHeight),s({x:De.leftBufferWidth,y:0,w:m-De.leftBufferWidth,h:De.rulerHeight},{hoverTip:_=>[(tt.timeFromPositionAndScale(_.x-a,f.scale)-f.countdown).toFixed(3)],onMouseDown:_=>{const I=tt.timeFromPositionAndScale(_.x-a,f.scale)-f.countdown;I<p.game.getDisplayTime()&&I>=-p.game.config.countdown?p.displayHistoricalState(I,void 0):p.displayCurrentState()}}),t.lineCap="butt",t.beginPath();const R=f.scale*100,T=f.countdown*R;t.lineWidth=1,t.strokeStyle=d.text,t.textBaseline="alphabetic",t.font="13px "+Ca,t.textAlign="center",t.fillStyle=d.text;const S=50,g=function(_,I,D){const O=_*R,x=a+O+T;x>=-50&&x<=m+S&&(t.moveTo(x,0),t.lineTo(x,I),D&&t.fillText(tt.displayTime(O/R,0),x,23))};if(R>=6){for(let _=0;_*R<f.timelineWidth-T;_+=1)_%5!==0&&g(_,6,!1);for(let _=-1;_*R>=-T;_-=1)_%5!==0&&g(_,6,!1)}for(let _=0;_*R<f.timelineWidth-T;_+=5)g(_,10,!0);for(let _=-5;_*R>=-T;_-=5)g(_,10,!0);return t.stroke(),De.rulerHeight}function ov(e){const{ctx:t,viewInfo:n,originX:a,originY:s,testInteraction:c}=e,d=e.ignoreVisibleX??!1,{colors:f,renderingProps:h,visibleWidth:m}=n,R=d?tt.positionFromTimeAndScale(p.game.time+h.countdown,h.scale):m,T=new Map;h.allMarkers.forEach(I=>{let D=T.get(I.track);D===void 0&&(D=[]),D.push(I),T.set(I.track,D)}),t.beginPath();let S=0,g=!1;for(const I of T.keys())S=Math.max(S,I+1),I===Eo&&(g=!0);g&&(S+=1);const _=s+S*De.trackHeight;t.fillStyle=f.timeline.tracks;for(let I=0;I<S;I+=2){const D=_-(I+1)*De.trackHeight;t.rect(0,D,R,De.trackHeight)}return t.fill(),Pj({ctx:t,viewInfo:n,markerTracksTopY:s,markerTracksBottomY:_,timelineOrigin:a,trackBins:T,testInteraction:c}),S*De.trackHeight}function lv(e,t){e.fillStyle="rgba(147, 112, 219, 0.15)",e.fillRect(t.x,t.y,t.w,t.h),e.strokeStyle="rgba(147, 112, 219, 0.5)",e.lineWidth=1,e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(t.x,t.y+t.h),e.moveTo(t.x+t.w,t.y),e.lineTo(t.x+t.w,t.y+t.h),e.stroke()}function sv(e){const{ctx:t,viewInfo:n,originX:a,originY:s,isImageExportMode:c,testInteraction:d}=e,{colors:f,renderingProps:h}=n,m=a+tt.positionFromTimeAndScale(h.countdown,h.scale);let R=new Map;for(let g=0;g<h.slots.length;g++){const _=g===h.activeSlotIndex,I=new Map;if(c&&!_)continue;h.slots[g].elements.forEach(k=>{const H=I.get(k.type)??[];H.push(k),I.set(k.type,H)});let D=s+g*De.renderSlotHeight();c&&(D=s);const O={ctx:t,viewInfo:n,timelineOriginX:m,timelineOriginY:D,testInteraction:d};h.drawOptions.drawMPTickMarks&&Gj({...O,elems:I.get(ht.MPTickMark)??[]}),h.drawOptions.drawHealingMarks&&nT({...O,elems:I.get(ht.HealingMark)??[]}),h.drawOptions.drawDamageMarks&&(nT({...O,elems:I.get(ht.DamageMark)??[]}),nT({...O,elems:I.get(ht.AggroMark)??[]})),h.drawOptions.drawMPTickMarks&&zj({...O,elems:I.get(ht.LucidMark)??[]}),Bj({...O,elems:I.get(ht.MeditateTickMark)??[]}),Fj({...O,elems:I.get(ht.AutoTickMark)??[]}),jj({...O,elems:I.get(ht.WarningMark)??[]});const x=Yj({...O,elems:I.get(ht.Skill)??[],interactive:_});if(_&&(R=x),h.showSelection&&_&&!c){const k=m+tt.positionFromTimeAndScale(h.selectionStartDisplayTime,h.scale),H=tt.positionFromTimeAndScale(h.selectionEndDisplayTime-h.selectionStartDisplayTime,h.scale);lv(t,{x:k,y:D,w:H,h:De.renderSlotHeight()})}}const T=tt.positionFromTimeAndScale(h.countdown,h.scale);let S=De.renderSlotHeight()*h.slots.length;if(h.slots.length<Ya&&(S+=De.addSlotButtonHeight),t.fillStyle=f.timeline.countdown,t.fillRect(a-De.leftBufferWidth,s,T+De.leftBufferWidth,S),c)return new Map;for(let g=0;g<h.slots.length;g++){const I={x:0,y:s+g*De.renderSlotHeight()+1,w:14,h:De.renderSlotHeight()-2};if(t.fillStyle=g===h.activeSlotIndex?f.accent:f.bgMediumContrast,t.fillRect(I.x,I.y,I.w,I.h),d(I,{hoverTip:g===h.activeSlotIndex?void 0:[N({en:"set active",zh:""})],onMouseUp:(D,O)=>{O&&p.undoStack.doThenPush(new KG(h.activeSlotIndex,g))},pointerMouse:!0}),h.slots.length>1&&g===h.activeSlotIndex){t.fillStyle=f.emphasis,t.font="bold 14px "+Ca,t.textAlign="center",t.fillText("",I.x+I.w/2,I.y+I.h-4);const D={x:I.x,y:I.y+I.h-I.w,w:I.w,h:I.w};d(D,{hoverTip:[N({en:"delete",zh:""})],onMouseUp:(O,x)=>{x&&p.undoStack.doThenPush(new VG(h.activeSlotIndex,p.record.serialized()))},pointerMouse:!0})}}return R}function Kj(e){const{ctx:t,viewInfo:n,originX:a,timelineStartY:s,testInteraction:c}=e,{colors:d,renderingProps:f}=n,h=a+tt.positionFromTimeAndScale(f.countdown,f.scale),m=De.renderSlotHeight(),R=s+f.activeSlotIndex*m,T=new Map;f.sharedElements.forEach(g=>{const _=T.get(g.type)??[];_.push(g),T.set(g.type,_)});const S={y1:s,y2:R,y3:R+m};(T.get(ht.s_HistoricalCursor)??[]).forEach(g=>{const _=g;if(_.enabled){const I=h+tt.positionFromTimeAndScale(g.displayTime,f.scale);VT({ctx:t,color:d.historical,x:I,...S,tip:N({en:"cursor: ",zh:""})+_.displayTime.toFixed(3),testInteraction:c})}}),(T.get(ht.s_Cursor)??[]).forEach(g=>{const _=g,I=h+tt.positionFromTimeAndScale(_.displayTime,f.scale);VT({ctx:t,color:d.emphasis,x:I,...S,tip:N({en:"cursor: ",zh:""})+_.displayTime.toFixed(3),testInteraction:c})})}function Vj(e){const{ctx:t,viewInfo:n,timelineStartY:a,mouseX:s,mouseY:c,selectStartX:d,selectStartY:f,interactionInfo:h,dragTargetTime:m}=e,{bgSelecting:R,draggedSkillElem:T}=h,{colors:S,visibleLeft:g,renderingProps:_}=n;if(R){const x={x:Math.min(d,s),y:Math.min(f,c),w:Math.abs(d-s),h:Math.abs(f-c)};lv(t,x)}const D=-g+De.leftBufferWidth+tt.positionFromTimeAndScale(_.countdown,_.scale);if(T){const x=t.globalAlpha;t.globalAlpha=.4,t.drawImage(bT(T.skillName),s,c,Bi,Bi),t.globalAlpha=x}const O=m;if(O!==null){const x=De.renderSlotHeight(),k=a+_.activeSlotIndex*x,H=D+tt.positionFromTimeAndScale(O,_.scale);VT({ctx:t,color:S.dropTarget,x:H,y1:a,y2:k,y3:k+x,width:4})}}function Wj(e){const{ctx:t,viewInfo:{colors:n,renderingProps:a},originY:s,testInteraction:c}=e;if(a.slots.length<Ya){const h={x:4,y:s+2,w:192,h:De.addSlotButtonHeight-4};t.fillStyle=n.bgLowContrast,t.fillRect(h.x,h.y,h.w,h.h),t.strokeStyle=n.bgHighContrast,t.lineWidth=1,t.strokeRect(h.x,h.y,h.w,h.h),t.font="13px "+Ca,t.fillStyle=n.text,t.textAlign="center",t.fillText(N({en:"Add timeline slot",zh:""}),h.x+h.w/2,h.y+h.h-4),c(h,{onMouseUp:(R,T)=>{T&&p.undoStack.doThenPush(new WG(a.activeSlotIndex))},pointerMouse:!0});const m={x:2*4+192,y:s+2,w:192,h:De.addSlotButtonHeight-4};return t.fillStyle=n.bgLowContrast,t.fillRect(m.x,m.y,m.w,m.h),t.strokeStyle=n.bgHighContrast,t.lineWidth=1,t.strokeRect(m.x,m.y,m.w,m.h),t.font="13px "+Ca,t.fillStyle=n.text,t.textAlign="center",t.fillText(N({en:"Clone timeline slot",zh:""}),m.x+m.w/2,m.y+m.h-4),c(m,{onMouseUp:(R,T)=>{T&&p.undoStack.doThenPush(new XG(a.activeSlotIndex))},pointerMouse:!0}),De.addSlotButtonHeight}return 0}function rv(){let e=0,t=!1;for(const n of p.timeline.getAllMarkers()){const a=n.track;e=Math.max(e,a+1),a===Eo&&(t=!0)}return t&&(e+=1),e*De.trackHeight}function cv(){return De.rulerHeight+rv()}function Xj(e){const{ctx:t,viewInfo:n,testInteraction:a}=e,{renderingProps:s,colors:c,visibleLeft:d,visibleWidth:f}=n,h=-d+De.leftBufferWidth;let m=0;return t.fillStyle=c.background,t.fillRect(0,0,f+1,s.timelineHeight+1),a({x:0,y:0,w:f,h:hE},{onMouseDown:iv}),m+=av({ctx:t,originX:h,viewInfo:n,testInteraction:a}),m+=rv(),sv({ctx:t,viewInfo:n,originX:h,originY:m,isImageExportMode:!1,testInteraction:a})}function qj(e){const{ctx:t,viewInfo:n,testInteraction:a}=e,s=-n.visibleLeft+De.leftBufferWidth,c=ov({ctx:t,viewInfo:n,originX:s,originY:De.rulerHeight,testInteraction:a});return Wj({ctx:t,viewInfo:n,originY:cv()+De.renderSlotHeight()*n.renderingProps.slots.length,testInteraction:a}),c}function lb(e){const{ctx:t,viewInfo:n,dragTargetTime:a,activeHoverTip:s,activeHoverImages:c,mouseX:d,mouseY:f,selectStartX:h,selectStartY:m,mouseInteractionInfo:R,testInteraction:T}=e,S=-n.visibleLeft+De.leftBufferWidth,g=cv();Kj({ctx:t,viewInfo:n,originX:S,timelineStartY:g,testInteraction:T}),R&&Vj({ctx:t,viewInfo:n,timelineStartY:g,mouseX:d,mouseY:f,selectStartX:h,selectStartY:m,interactionInfo:R,dragTargetTime:a}),s!==void 0&&wj({ctx:t,viewInfo:n,lines:s,images:c,mouseX:d,mouseY:f})}function sb(e,t){const n=e.x+e.w<t.x,a=e.x>t.x+t.w,s=e.y+e.h<t.y,c=e.y>t.y+t.h;return!(n||a||s||c)}function uv(e,t){const[n,a]=e;return n!==void 0&&a!==void 0&&n>t.x&&n<t.x+t.w&&a>t.y&&a<t.y+t.h}function iT(e,t,n){const a=dv(e,t,n);return a!==void 0?a[0]:void 0}function dv(e,t,n){for(const[a,s]of Array.from(n.entries()).reverse())if(uv([e,t],a))return[s,a]}function aT(){return{mouseDown:new Map,mouseUp:new Map,mouseHover:new Map,pointer:new Map}}function sf(e){["mouseDown","mouseHover","mouseUp","pointer"].forEach(t=>e[t].clear())}function Zj(e){const t=C.useRef(null),n=C.useRef(null),a=C.useRef(null),s=window.devicePixelRatio,c=e.visibleWidth*s,d=e.timelineHeight*s,f=C.useContext(yn),h=C.useContext(am),m=C.useContext(wd),R=C.useRef([null,null]),T=C.useRef(0),S=C.useRef(0),g=C.useRef(void 0),_=C.useRef(void 0),I=C.useRef(0),D=C.useRef(0),O=C.useRef({}),[x,k]=C.useState(0),H=C.useRef(new Map),G=C.useRef({live:aT(),interactive:aT(),lowUpdate:aT()});function P(v){const z=G.current;return new Map([...z.live[v],...z.interactive[v],...z.lowUpdate[v]])}const L=C.useRef(void 0),j=v=>{L.current=v},Z=C.useRef(!1),J=v=>{Z.current=v},se=v=>(z,q)=>{const{hoverTip:F,onMouseUp:ae,onMouseDown:K,pointerMouse:Q,hoverImages:he}=q,me=G.current[v];(F||he)&&me.mouseHover.set(z,{tip:F,images:he}),ae&&me.mouseUp.set(z,ae),K&&me.mouseDown.set(z,K),Q!==void 0&&me.pointer.set(z,Q)},X=v=>{const z=-e.visibleLeft-De.leftBufferWidth,q=e.visibleWidth-z;v.clearRect(z,0,q,hE+x)},Ae=()=>{const v=O.current.tip,z={x:T.current,y:S.current,shiftKey:!1,dragLock:m.value,draggedSkillElem:L.current,bgSelecting:Z.current,setDraggedSkillElem:j,setBgSelecting:J};return{viewInfo:{renderingProps:p.getTimelineRenderingProps(),colors:Ni(f),visibleLeft:e.visibleLeft,visibleWidth:e.visibleWidth},dragTargetTime:h.dragTargetTime,mouseX:T.current,mouseY:S.current,selectStartX:I.current,selectStartY:D.current,activeHoverTip:v!==void 0?Array.isArray(v)?v:v(z):void 0,activeHoverImages:O.current.images,mouseInteractionInfo:z}},W=()=>{var z;const v=(z=n.current)==null?void 0:z.getContext("2d",{alpha:!0});v&&(v.scale(s,s),X(v),sf(G.current.interactive),lb({ctx:v,...Ae(),testInteraction:se("interactive")}),v.scale(1/s,1/s))},ee={onMouseMove:(v,z)=>{if(T.current=v,S.current=z,O.current=iT(v,z,P("mouseHover"))??{},Z.current){const q={x:Math.min(I.current,v),y:Math.min(D.current,z),w:Math.abs(I.current-v),h:Math.abs(D.current-z)};let F=null,ae=null;for(const[K,Q]of H.current.entries())if(sb(Q,q)){F=K,ae=K;break}if(ae!==null)for(const[K,Q]of Array.from(H.current.entries()).reverse()){if(ae>=K)break;if(sb(Q,q)){ae=K;break}}(F!==R.current[0]||ae!==R.current[1])&&(R.current=[F,ae],F!==null&&ae!==null?(p.record.selectSingle(F),p.record.selectUntil(ae)):p.record.unselectAll(),p.displayCurrentState())}if(L.current){p.record.isInSelection(L.current.actionIndex)||p.timeline.onClickTimelineAction(L.current.actionIndex,!1);const q=-e.visibleLeft+De.leftBufferWidth;let F=1/0,ae=-1,K;const Q=H.current,he=Array.from(Q.entries());for(let Te=0;Te<he.length;Te++){const[be,ye]=he[Te],Ue=Math.abs(T.current-ye.x);if(K!==void 0&&Ue>K)break;Ue<F&&(F=Ue,ae=be),K=Ue}let me=1/0;const Ie=p.getTimelineRenderingProps(),Me=Ie.sharedElements.filter(Te=>Te.type==ht.s_Cursor);let pe;const ge=Me[Me.length-1].displayTime+Ie.countdown;Me.length>0&&(pe=q+tt.positionFromTimeAndScale(ge,Ie.scale),me=Math.abs(T.current-pe));let oe=null;const Ce=Array.from(Q.keys());pe!==void 0&&me<F&&Q.size>0&&ae===Ce[Ce.length-1]&&(ae=Ce[Ce.length-1]+1,oe=ge-Ie.countdown),ae!==-1&&h.dragTargetIndex!==ae&&(oe===null&&(ae>0&&!L.current.isGCD?oe=p.record.actions[ae-1].tmp_endLockTime??null:oe=p.record.actions[ae].tmp_startLockTime??null,oe!==null&&(oe-=p.gameConfig.countdown)),h.setDragTarget(ae,oe))}e.setPointerMouse(iT(v,z,P("pointer"))??!1),W()},onMouseEnter:()=>{},onMouseLeave:()=>{g.current=void 0,_.current=void 0,Z.current=!1,(O.current.tip!==void 0||O.current.images!==void 0)&&(O.current={tip:void 0,images:void 0},W())},onMouseUp:(v,z,q)=>{if(T.current=z,S.current=q,L.current){const F=h.dragTargetIndex;h.setDragTarget(null,null),j(void 0);let ae=!0;if(F!==null){const K=p.record.selectionStartIndex??0;let Q=F-(K??0);if(Q>0&&(Q-=p.record.getSelectionLength()),Q!==0){p.undoStack.push(new Rf(K,p.record.getSelectionLength(),Q)),p.record.moveSelected(Q),p.autoSave();const he=wn();nl();const me=p.record.selectionStartIndex;me!==void 0?p.displayHistoricalState(he.skillUseTimes[me],me):p.displayCurrentState(),ae=!1}}ae&&W()}if(!p.inputLocked){const F=dv(z,q,P("mouseUp"));if(F!==void 0){const[ae,K]=F;ae({x:z,y:q,shiftKey:v.shiftKey,dragLock:m.value,bgSelecting:Z.current,setDraggedSkillElem:j,setBgSelecting:J},uv([g.current,_.current],K))}}Z.current=!1},onMouseDown:(v,z)=>{var q;if(g.current=v,_.current=z,T.current=v,S.current=z,!p.inputLocked){const F=P("mouseDown");I.current=v,D.current=z,(q=iT(v,z,F))==null||q({x:v,y:z,shiftKey:!1,dragLock:m.value,bgSelecting:Z.current,setDraggedSkillElem:j,setBgSelecting:J})}},onKeyDown:v=>{p.handleTimelineKeyboardEvent(v),p.inputLocked||v.key==="Escape"&&(h.setDragTarget(null,null),j(void 0))}};C.useEffect(()=>e.setCallbacks(ee),[h.dragTargetTime,m.value]);const M=()=>{const[v,z,q]=[t,n,a].map((F,ae)=>{var K;return(K=F.current)==null?void 0:K.getContext("2d",{alpha:ae!==0})});if(v&&z&&q){[v,z,q].forEach(ae=>ae.scale(s,s)),sf(G.current.live),sf(G.current.interactive),sf(G.current.lowUpdate),[z,q].forEach(ae=>X(ae));const F={renderingProps:p.getTimelineRenderingProps(),colors:Ni(f),visibleLeft:e.visibleLeft,visibleWidth:e.visibleWidth};H.current=Xj({ctx:v,viewInfo:F,testInteraction:se("live")}),lb({ctx:z,...Ae(),testInteraction:se("interactive")}),k(qj({ctx:q,viewInfo:F,testInteraction:se("lowUpdate")})),[v,z,q].forEach(ae=>ae.scale(1/s,1/s))}};C.useEffect(W,[h.dragTargetTime]),C.useEffect(()=>{m.value||(W(),h.setDragTarget(null,null),j(void 0))},[m.value]),C.useEffect(M,[T,S,e.version,s]),C.useEffect(()=>{M(),e.setCallbacks(ee)},[e.visibleLeft,e.visibleWidth]);const Y={width:e.visibleWidth,height:e.timelineHeight,position:"absolute",pointerEvents:"none",cursor:e.pointerMouse?"pointer":"default",left:0,top:0},ie=Math.ceil(c),le=Math.ceil(d);return l.jsxs("div",{style:{position:"relative"},children:[l.jsx("canvas",{ref:t,width:ie,height:le,tabIndex:0,style:{...Y,zIndex:0}}),l.jsx("canvas",{ref:a,width:ie,height:le,tabIndex:-1,style:{...Y,zIndex:1,backgroundColor:"transparent"}}),l.jsx("canvas",{ref:n,width:ie,height:le,tabIndex:-1,style:{...Y,zIndex:2,backgroundColor:"transparent"}})]})}const pg=C.createContext(void 0),Ng=C.createContext(void 0);function $j(){const e=C.useContext(Ng),t=C.useContext(pg);if(!(t===void 0&&e===void 0))return{...e,...t}}function ur(){const e=C.useContext(Ng),t=C.useContext(pg);if(t===void 0)throw new Error("Base UI: DialogRootContext is missing. Dialog parts must be placed within <Dialog.Root>.");return{...e,...t}}function dr(e){const t=typeof e.render=="string"?e.render:void 0,n=typeof e.render=="string"?void 0:e.render;return{renderElement:xE(t,{className:e.className,render:n},{...e,props:e.extraProps})}}const Qj={...LE,...PS},hv=C.forwardRef(function(t,n){const{render:a,className:s,...c}=t,{open:d,nested:f,mounted:h,transitionStatus:m,backdropRef:R}=ur(),T=C.useMemo(()=>({open:d,transitionStatus:m}),[d,m]),S=Gc(R,n),{renderElement:g}=dr({render:a??"div",className:s,state:T,ref:S,extraProps:_o({role:"presentation",hidden:!h,style:{userSelect:"none",WebkitUserSelect:"none"}},c),customStyleHookMapping:Qj});return f?null:g()});function Jj(e){const{rootElementName:t=""}=e,[n,a]=C.useState(t.toUpperCase()),s=C.useCallback(c=>{a((c==null?void 0:c.tagName)??"")},[]);return{rootElementName:n,updateRootElementName:s}}const e3=C.createContext(void 0);function t3(e=!1){const t=C.useContext(e3);if(t===void 0&&!e)throw new Error("Base UI: CompositeRootContext is missing. Composite parts must be placed within <Composite.Root>.");return t}function fv(e={}){const{buttonRef:t,disabled:n=!1,focusableWhenDisabled:a,tabIndex:s,type:c="button",elementName:d}=e,f=C.useRef(null),{rootElementName:h,updateRootElementName:m}=Jj({rootElementName:d}),R=t3(!0)!==void 0,T=Da(()=>{const D=f.current;return h==="BUTTON"||h==="INPUT"&&["button","submit","reset"].includes(D==null?void 0:D.type)}),S=Da(()=>{const D=f.current;return!!(h==="A"&&(D!=null&&D.href))}),g=Gc(m,t,f),_=C.useMemo(()=>{const D={};return s!==void 0&&!R&&(D.tabIndex=s),h==="BUTTON"||h==="INPUT"?a||R?D["aria-disabled"]=n:R||(D.disabled=n):h!==""&&(h!=="A"?(D.role="button",R||(D.tabIndex=s??0)):s&&!R&&(D.tabIndex=s),n&&(D["aria-disabled"]=n,R||(D.tabIndex=a?s??0:-1))),D},[n,h,a,R,s]);return Ro(()=>{const D=f.current;D instanceof HTMLButtonElement&&R&&n&&_.disabled===void 0&&D.disabled&&(D.disabled=!1)},[n,_.disabled,R]),{getButtonProps:C.useCallback((D={})=>{const{onClick:O,onMouseDown:x,onKeyUp:k,onKeyDown:H,onPointerDown:G,...P}=D;return _o({type:h==="BUTTON"||h==="INPUT"?c:void 0,onClick(L){if(n){L.preventDefault();return}O==null||O(L)},onMouseDown(L){n||x==null||x(L)},onKeyDown(L){(n&&a&&L.key!=="Tab"||L.target===L.currentTarget&&!T()&&L.key===" ")&&L.preventDefault(),n||(CT(L),H==null||H(L)),!L.baseUIHandlerPrevented&&L.target===L.currentTarget&&!T()&&!S()&&L.key==="Enter"&&!n&&(O==null||O(L),L.preventDefault())},onKeyUp(L){n||(CT(L),k==null||k(L)),!L.baseUIHandlerPrevented&&L.target===L.currentTarget&&!T()&&!n&&L.key===" "&&(O==null||O(L))},onPointerDown(L){if(n){L.preventDefault();return}G==null||G(L)},ref:g},_,P)},[_,n,h,a,T,S,g,c]),buttonRef:g}}function n3(e){const{open:t,setOpen:n,rootRef:a,disabled:s}=e,c=Da(h=>{t&&n(!1,h.nativeEvent,"click")}),{getButtonProps:d}=fv({disabled:s,buttonRef:a});return{getRootProps:h=>_o({onClick:c},h,d)}}const Ev=C.forwardRef(function(t,n){const{render:a,className:s,disabled:c=!1,...d}=t,{open:f,setOpen:h}=ur(),{getRootProps:m}=n3({disabled:c,open:f,setOpen:h,rootRef:n}),R=C.useMemo(()=>({disabled:c}),[c]),{renderElement:T}=dr({render:a??"button",className:s,state:R,propGetter:m,extraProps:d});return T()});let rb=0;function i3(e,t="mui"){const[n,a]=C.useState(e),s=e||n;return C.useEffect(()=>{n==null&&(rb+=1,a(`${t}-${rb}`))},[n,t]),s}const a3={...TE},cb=a3.useId;function o3(e,t){if(cb!==void 0){const n=cb();return e??`${t}-${n}`}return i3(e,t)}function mv(e){return o3(e,"base-ui")}const l3={},Av=C.forwardRef(function(t,n){const{render:a,className:s,id:c,...d}=t,{setDescriptionElementId:f}=ur(),h=mv(c);Ro(()=>(f(h),()=>{f(void 0)}),[h,f]);const m=C.useCallback((T={})=>_o({id:h},T),[h]),{renderElement:R}=dr({propGetter:m,render:a??"p",className:s,state:l3,ref:n,extraProps:d});return R()});function s3(e){const{descriptionElementId:t,getPopupProps:n,initialFocus:a,modal:s,mounted:c,openMethod:d,ref:f,setPopupElement:h,titleElementId:m}=e,R=C.useRef(null),T=Gc(f,R,h),S=C.useCallback(I=>I==="touch"?R:0,[]),g=C.useMemo(()=>a==null?S(d??""):typeof a=="function"?a(d??""):a,[S,a,d]);return{getRootProps:I=>_o({"aria-labelledby":m??void 0,"aria-describedby":t??void 0,"aria-modal":c&&s===!0?!0:void 0,role:"dialog",tabIndex:-1,...n(),ref:T,hidden:!c},I),resolvedInitialFocus:g}}let r3=function(e){return e.nestedDialogs="--nested-dialogs",e}({}),c3=function(e){return e[e.open=Ms.open]="open",e[e.closed=Ms.closed]="closed",e[e.startingStyle=Ms.startingStyle]="startingStyle",e[e.endingStyle=Ms.endingStyle]="endingStyle",e.nested="data-nested",e.nestedDialogOpen="data-nested-dialog-open",e}({});const u3=C.forwardRef(function(t,n){return l.jsx("div",{ref:n,role:"presentation","data-floating-ui-inert":!0,...t,style:{position:"fixed",inset:0,userSelect:"none",WebkitUserSelect:"none"}})}),Rv=C.createContext(void 0);function d3(){const e=C.useContext(Rv);if(e===void 0)throw new Error("Base UI: <Dialog.Portal> is missing.");return e}function h3(e){return W0(19)?e:e?"true":void 0}const f3={...LE,...PS,nestedDialogOpen(e){return e?{[c3.nestedDialogOpen]:""}:null}},Tv=C.forwardRef(function(t,n){const{className:a,finalFocus:s,initialFocus:c,render:d,...f}=t,{descriptionElementId:h,dismissible:m,floatingRootContext:R,getPopupProps:T,modal:S,mounted:g,nested:_,nestedOpenDialogCount:I,open:D,openMethod:O,popupRef:x,setPopupElement:k,titleElementId:H,transitionStatus:G,onOpenChangeComplete:P,internalBackdropRef:L}=ur();d3(),ME({open:D,ref:x,onComplete(){D&&(P==null||P(!0))}});const j=Gc(n,x),{getRootProps:Z,resolvedInitialFocus:J}=s3({descriptionElementId:h,getPopupProps:T,initialFocus:c,modal:S,mounted:g,openMethod:O,ref:j,setPopupElement:k,titleElementId:H}),se=I>0,X=C.useMemo(()=>({open:D,nested:_,transitionStatus:G,nestedDialogOpen:se}),[D,_,G,se]),{renderElement:Ae}=dr({render:d??"div",className:a,state:X,propGetter:Z,extraProps:{...f,style:{...f.style,[r3.nestedDialogs]:I}},customStyleHookMapping:f3});return l.jsxs(C.Fragment,{children:[g&&S===!0&&l.jsx(u3,{ref:L,inert:h3(!D)}),l.jsx(eP,{context:R,disabled:!g,closeOnFocusOut:m,initialFocus:J,returnFocus:s,modal:S!==!1,children:Ae()})]})});function Sv(e){const{children:t,keepMounted:n=!1,container:a}=e,{mounted:s}=ur();return s||n?l.jsx(Rv.Provider,{value:n,children:l.jsx(qw,{root:a,children:t})}):null}const E3=typeof document<"u"?_i.useLayoutEffect:()=>{};function WT(...e){return(...t)=>{for(let n of e)typeof n=="function"&&n(...t)}}function Cg(e){var t;return typeof window<"u"&&window.navigator!=null?e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform):!1}function nm(e){let t=null;return()=>(t==null&&(t=e()),t)}const m3=nm(function(){return Cg(/^Mac/i)}),A3=nm(function(){return Cg(/^iPhone/i)}),R3=nm(function(){return Cg(/^iPad/i)||m3()&&navigator.maxTouchPoints>1}),T3=nm(function(){return A3()||R3()});function ub(e,t){if(!e)return!1;let n=window.getComputedStyle(e),a=/(auto|scroll)/.test(n.overflow+n.overflowX+n.overflowY);return a&&t&&(a=e.scrollHeight!==e.clientHeight||e.scrollWidth!==e.clientWidth),a}function gv(e,t){let n=e;for(ub(n,t)&&(n=n.parentElement);n&&!ub(n,t);)n=n.parentElement;return n||document.scrollingElement||document.documentElement}const oT=typeof document<"u"&&window.visualViewport,S3=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let rf=0,lT;function g3(e={}){let{isDisabled:t}=e;E3(()=>{if(!t)return rf++,rf===1&&(T3()?lT=_3():lT=I3()),()=>{rf--,rf===0&&lT()}},[t])}function I3(){return WT(uc(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`),uc(document.documentElement,"overflow","hidden"))}function _3(){let e,t,n=m=>{e=gv(m.target,!0),!(e===document.documentElement&&e===document.body)&&e instanceof HTMLElement&&window.getComputedStyle(e).overscrollBehavior==="auto"&&(t=uc(e,"overscrollBehavior","contain"))},a=m=>{if(!e||e===document.documentElement||e===document.body){m.preventDefault();return}e.scrollHeight===e.clientHeight&&e.scrollWidth===e.clientWidth&&m.preventDefault()},s=()=>{t&&t()},c=m=>{let R=m.target;p3(R)&&(f(),R.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{R.style.transform="",oT&&(oT.height<window.innerHeight?requestAnimationFrame(()=>{db(R)}):oT.addEventListener("resize",()=>db(R),{once:!0}))}))},d=null,f=()=>{if(d)return;let m=()=>{window.scrollTo(0,0)},R=window.pageXOffset,T=window.pageYOffset;d=WT(Yu(window,"scroll",m),uc(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`),uc(document.documentElement,"overflow","hidden"),uc(document.body,"marginTop",`-${T}px`),()=>{window.scrollTo(R,T)}),window.scrollTo(0,0)},h=WT(Yu(document,"touchstart",n,{passive:!1,capture:!0}),Yu(document,"touchmove",a,{passive:!1,capture:!0}),Yu(document,"touchend",s,{passive:!1,capture:!0}),Yu(document,"focus",c,!0));return()=>{t==null||t(),d==null||d(),h()}}function uc(e,t,n){let a=e.style[t];return e.style[t]=n,()=>{e.style[t]=a}}function Yu(e,t,n,a){return e.addEventListener(t,n,a),()=>{e.removeEventListener(t,n,a)}}function db(e){let t=document.scrollingElement||document.documentElement,n=e;for(;n&&n!==t;){let a=gv(n);if(a!==document.documentElement&&a!==document.body&&a!==n){let s=a.getBoundingClientRect().top,c=n.getBoundingClientRect().top;c>s+n.clientHeight&&(a.scrollTop+=c-s)}n=a.parentElement}}function p3(e){return e instanceof HTMLInputElement&&!S3.has(e.type)||e instanceof HTMLTextAreaElement||e instanceof HTMLElement&&e.isContentEditable}function N3(){if(typeof navigator>"u")return{platform:"",maxTouchPoints:-1};const e=navigator.userAgentData;return e!=null&&e.platform?{platform:e.platform,maxTouchPoints:navigator.maxTouchPoints}:{platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints}}function Iv(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter:none")}function XT(){const e=N3();return e.platform==="MacIntel"&&e.maxTouchPoints>1?!0:/iP(hone|ad|od)|iOS/.test(e.platform)}function C3(){return/firefox/i.test(LS())}function Ud(e){return e&&e.ownerDocument||document}function _v(e){return Ud(e).defaultView||window}let hb={},fb={},Eb="",Qu=0,mb=()=>{};function b3(){return Qu}function O3(){return typeof CSS<"u"&&typeof CSS.supports=="function"&&CSS.supports("height","1dvh")}function D3(e){if(typeof document>"u")return!1;const t=Ud(e);return _v(t).innerWidth-t.documentElement.clientWidth>0}function y3(e){var T;const t=Ud(e),n=t.documentElement,a=t.body,s=_v(n);let c=0,d=0,f=-1;if(Iv()&&(((T=s.visualViewport)==null?void 0:T.scale)??1)!==1)return()=>{};function h(){var L;const S=s.getComputedStyle(n),g=s.getComputedStyle(a);c=n.scrollTop,d=n.scrollLeft,hb={overflowY:n.style.overflowY,overflowX:n.style.overflowX},Eb=n.style.scrollBehavior,fb={position:a.style.position,height:a.style.height,width:a.style.width,boxSizing:a.style.boxSizing,overflowY:a.style.overflowY,overflowX:a.style.overflowX,scrollBehavior:a.style.scrollBehavior};const _=(L=S.scrollbarGutter)==null?void 0:L.includes("stable"),I=n.scrollHeight>n.clientHeight,D=n.scrollWidth>n.clientWidth,O=S.overflowY==="scroll"||g.overflowY==="scroll",x=S.overflowX==="scroll"||g.overflowX==="scroll",k=Math.max(0,s.innerWidth-n.clientWidth),H=Math.max(0,s.innerHeight-n.clientHeight);Object.assign(n.style,{overflowY:!_&&(I||O)?"scroll":"hidden",overflowX:!_&&(D||x)?"scroll":"hidden"});const G=parseFloat(g.marginTop)+parseFloat(g.marginBottom),P=parseFloat(g.marginLeft)+parseFloat(g.marginRight);Object.assign(a.style,{position:"relative",height:G||H?`calc(100dvh - ${G+H}px)`:"100dvh",width:P||k?`calc(100vw - ${P+k}px)`:"100vw",boxSizing:"border-box",overflow:"hidden",scrollBehavior:"unset"}),a.scrollTop=c,a.scrollLeft=d,n.setAttribute("data-base-ui-scroll-locked",""),n.style.scrollBehavior="unset"}function m(){Object.assign(n.style,hb),Object.assign(a.style,fb),n.scrollTop=c,n.scrollLeft=d,n.removeAttribute("data-base-ui-scroll-locked"),n.style.scrollBehavior=Eb}function R(){m(),cancelAnimationFrame(f),f=requestAnimationFrame(h)}return h(),s.addEventListener("resize",R),()=>{cancelAnimationFrame(f),m(),s.removeEventListener("resize",R)}}function v3(e){const{enabled:t=!0,mounted:n,open:a,referenceElement:s}=e,c=C.useMemo(()=>t&&(XT()||!O3()||C3()&&!D3(s)),[t,s]);Ro(()=>{if(n&&!a&&Iv()){const d=Ud(s),f=d.body.style.userSelect,h=d.body.style.webkitUserSelect;return d.body.style.userSelect="none",d.body.style.webkitUserSelect="none",()=>{d.body.style.userSelect=f,d.body.style.webkitUserSelect=h}}},[n,a,s]),g3({isDisabled:!c}),Ro(()=>{if(!(!t||c))return Qu+=1,Qu===1&&(mb=y3(s)),()=>{Qu-=1,Qu===0&&mb()}},[t,c,s])}function M3(e){const t=C.useRef(""),n=C.useCallback(s=>{s.defaultPrevented||(t.current=s.pointerType)},[]);return{onClick:C.useCallback(s=>{if(s.detail===0){e(s,"keyboard");return}"pointerType"in s&&e(s,s.pointerType),e(s,t.current),t.current=""},[e]),onPointerDown:n}}function L3(e){const[t,n]=C.useState(null);!e&&t!==null&&n(null);const a=C.useCallback((d,f)=>{e||n(f)},[e,n]),{onClick:s,onPointerDown:c}=M3(a);return C.useMemo(()=>({openMethod:t,triggerProps:{onClick:s,onPointerDown:c}}),[t,s,c])}function x3(e){const{enabled:t,setLock:n,popupRef:a}=e,s=Da(n),c=C.useRef(t);Ro(()=>{if(!XT()||(t&&(c.current=!0),!c.current))return;const h=Ud(a.current).documentElement;if(t){const m=h.scrollLeft,R=h.scrollTop;return()=>{b3()===0&&(h.scrollLeft=m,h.scrollTop=R)}}},[t,a]);const d=Da(f=>{if(!XT())return;const h=za(f.nativeEvent);DE(h)&&(s(!1),setTimeout(()=>s(!0)))});return C.useMemo(()=>({floating:{onFocus:d,onClick:d}}),[d])}function H3(e){const{defaultOpen:t,dismissible:n,modal:a,onNestedDialogClose:s,onNestedDialogOpen:c,onOpenChange:d,open:f,onOpenChangeComplete:h}=e,[m,R]=B0({controlled:f,default:t,name:"DialogRoot",state:"open"}),T=C.useRef(null),S=C.useRef(null),g=C.useRef(null),[_,I]=C.useState(void 0),[D,O]=C.useState(void 0),[x,k]=C.useState(null),[H,G]=C.useState(null),[P,L]=C.useState(!0),{mounted:j,setMounted:Z,transitionStatus:J}=F0(m),se=Da((pe,ge,oe)=>{d==null||d(pe,ge,oe),R(pe)}),X=Da(()=>{Z(!1),h==null||h(!1)});ME({enabled:!e.actionsRef,open:m,ref:T,onComplete(){m||X()}}),C.useImperativeHandle(e.actionsRef,()=>({unmount:X}),[X]);const W=wS({elements:{reference:x,floating:H},open:m,onOpenChange:(pe,ge,oe)=>{se(pe,ge,z0(oe))}}),[ee,M]=C.useState(0),Y=ee===0,ie=uP(W),le=nP(W),v=P0(W,{outsidePressEvent:"mousedown",outsidePress(pe){if(pe.button!==0)return!1;const ge=za(pe);if(Y&&n){const oe=ge;return a?oe?[g.current,S.current].includes(oe):!1:!0}return!1},escapeKey:Y}),z=m&&a===!0,q=z&&P,F=x3({enabled:z,setLock:L,popupRef:T});v3({enabled:q,mounted:j,open:m,referenceElement:H});const{getReferenceProps:ae,getFloatingProps:K}=G0([ie,le,v,F]);C.useEffect(()=>(c&&m&&c(ee),s&&!m&&s(),()=>{s&&m&&s()}),[m,s,c,ee]);const Q=C.useCallback(pe=>{M(pe+1)},[]),he=C.useCallback(()=>{M(0)},[]),{openMethod:me,triggerProps:Ie}=L3(m),Me=C.useCallback((pe={})=>ae(_o(Ie,pe)),[ae,Ie]);return C.useMemo(()=>({modal:a,setOpen:se,open:m,titleElementId:_,setTitleElementId:I,descriptionElementId:D,setDescriptionElementId:O,onNestedDialogOpen:Q,onNestedDialogClose:he,nestedOpenDialogCount:ee,openMethod:me,mounted:j,transitionStatus:J,getTriggerProps:Me,getPopupProps:K,setTriggerElement:k,setPopupElement:G,popupRef:T,backdropRef:S,internalBackdropRef:g,floatingRootContext:W}),[a,se,m,_,D,Q,he,ee,me,j,J,Me,K,W])}const pv=function(t){const{children:n,defaultOpen:a=!1,dismissible:s=!0,modal:c=!0,onOpenChange:d,open:f,actionsRef:h,onOpenChangeComplete:m}=t,R=$j(),T=H3({open:f,defaultOpen:a,onOpenChange:d,modal:c,dismissible:s,actionsRef:h,onOpenChangeComplete:m,onNestedDialogClose:R==null?void 0:R.onNestedDialogClose,onNestedDialogOpen:R==null?void 0:R.onNestedDialogOpen}),S=!!R,g=C.useMemo(()=>({...T,nested:S,onOpenChangeComplete:m}),[T,S,m]),_=C.useMemo(()=>({dismissible:s}),[s]);return l.jsx(pg.Provider,{value:g,children:l.jsx(Ng.Provider,{value:_,children:n})})},k3={},Nv=C.forwardRef(function(t,n){const{render:a,className:s,id:c,...d}=t,{setTitleElementId:f}=ur(),h=mv(c);Ro(()=>(f(h),()=>{f(void 0)}),[h,f]);const m=C.useCallback((T={})=>_o({id:h},T),[h]),{renderElement:R}=dr({propGetter:m,render:a??"h2",className:s,state:k3,ref:n,extraProps:d});return R()}),Cv=C.forwardRef(function(t,n){const{render:a,className:s,disabled:c=!1,...d}=t,{open:f,setTriggerElement:h,getTriggerProps:m}=ur(),R=C.useMemo(()=>({disabled:c,open:f}),[c,f]),T=Gc(n,h),{getButtonProps:S}=fv({disabled:c,buttonRef:T}),{renderElement:g}=dr({render:a??"button",className:s,state:R,propGetter:_=>S(m(_)),extraProps:d,customStyleHookMapping:K0});return g()}),bv=window.location.hostname==="xivintheshell.com"?"a023d800-1740-426a-8134-915efc395aa3":window.location.hostname==="beta.xivintheshell.com"?"a0281008-3d39-4afc-81b4-a8ddbf7cbd44":window.location.host==="localhost:3000"?"a028101a-803b-4ad4-99b6-bacb8484e214":window.location.host==="localhost:4173"?"a0281237-7471-47d4-b33c-52a6cbaed4c1":"",U3="https://www.fflogs.com/oauth/authorize",w3="https://www.fflogs.com/oauth/token";function P3(){const e=new Uint8Array(64);return window.crypto.getRandomValues(e),Array.from(e,t=>t.toString(16).padStart(2,"0")).join("")}async function G3(e){const n=new TextEncoder().encode(e),a=await window.crypto.subtle.digest("SHA-256",n);return btoa(String.fromCharCode(...new Uint8Array(a))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}const fE="pkceCodeVerifier",fd="pkceStateBlob";async function Ab(){const e=P3(),t=await G3(e),n=window.crypto.randomUUID();localStorage.getItem(fE)===null&&window.localStorage.setItem(fE,e),window.localStorage.getItem(fd)===null&&window.localStorage.setItem(fd,n);const a=new URLSearchParams({client_id:bv,code_challenge:t,code_challenge_method:"S256",state:n,redirect_uri:window.location.origin,response_type:"code"});window.location.href=`${U3}?${a.toString()}`}function xf(){window.localStorage.removeItem(fE),window.localStorage.removeItem(fd)}var Hf=(e=>(e[e.UNAUTHORIZED=0]="UNAUTHORIZED",e[e.NO_PKCE_VERIFIER=1]="NO_PKCE_VERIFIER",e[e.BAD_PKCE_STATE=2]="BAD_PKCE_STATE",e[e.SUCCESS=3]="SUCCESS",e[e.FAILURE=4]="FAILURE",e))(Hf||{});async function Rb(){const e=new URLSearchParams(window.location.search);window.history.replaceState({},"",window.location.pathname);const t=e.get("code"),n=window.localStorage.getItem(fE),a=window.localStorage.getItem(fd);if(!t)return 0;if(!n)return console.error("PKCE verifier could not be retrieved"),xf(),1;e.get("state")!==a&&(console.error("PKCE response did not have expected state; force setting new value"),console.log("expected:",a),console.log("actual:",e.get("state")),window.localStorage.setItem(fd,e.get("state")));const s=new URLSearchParams({client_id:bv,code_verifier:n,redirect_uri:window.location.origin,grant_type:"authorization_code",code:t});try{const c=await fetch(w3,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:s.toString()});if(c.ok){const d=await c.json();return window.sessionStorage.setItem("fflogsAuthToken",d.access_token),console.log("saved auth tokens to sessionStorage"),3}else return console.log("PKCE response was not ok; clearing intermediate state"),console.error(c),xf(),4}catch(c){return console.log("PKCE exchange failed; clearing intermediate state"),console.error(c),xf(),4}}function B3(e){const t=URL.parse(e.replace("#","?"));if(t===null)return{apiBaseUrl:"",reportCode:"",error:{en:"invalid URL",zh:""}};if(t.hostname!=="www.fflogs.com"&&t.hostname!=="cn.fflogs.com")return{apiBaseUrl:"",reportCode:"",error:{en:"must be a link to www.fflogs.com or cn.fflogs.com",zh:"www.fflogs.comcn.fflogs.com"}};const n=t.pathname.split("/").filter(m=>m.length>0);if(n.length!==2)return console.error("parsed link parts:",n),{apiBaseUrl:"",reportCode:"",error:{en:"link must contain a single report",zh:""}};console.assert(n.length>0);const a=n[n.length-1],s=t.searchParams,c=parseInt(s.get("fight")??"NaN"),d=isNaN(c)?void 0:c,f=parseInt(s.get("source")??"NaN"),h=isNaN(f)?void 0:f;return{apiBaseUrl:`https://${t.hostname}/api/v2/user/`,reportCode:a,fightID:d,playerID:h}}const Ov=new Map([["Paladin","PLD"],["Warrior","WAR"],["DarkKnight","DRK"],["Gunbreaker","GNB"],["WhiteMage","WHM"],["Scholar","SCH"],["Astrologian","AST"],["Sage","SGE"],["Monk","MNK"],["Dragoon","DRG"],["Ninja","NIN"],["Viper","VPR"],["Samurai","SAM"],["Reaper","RPR"],["Bard","BRD"],["Machinist","MCH"],["Dancer","DNC"],["BlackMage","BLM"],["Summoner","SMN"],["RedMage","RDM"],["Pictomancer","PCT"],["BlueMage","BLU"]]),Tb=new Set([7,8,33218,34682]),Dl={TEMPERA_COAT:1003686,TEMPERA_GRASSA:1003687,BLACKEST_NIGHT:1001178,TENGENTSU:1003853,THIRD_EYE:1001232,CREST_OF_TIME_BORROWED:1002596,COLD_FOG:1002493},F3=new Map([["TEMPERA_COAT_POP","TEMPERA_COAT"],["TEMPERA_GRASSA_POP","TEMPERA_GRASSA"],["THE_BLACKEST_NIGHT_POP","THE_BLACKEST_NIGHT"],["TENGENTSU_POP","TENGENTSU"],["THIRD_EYE_POP","THIRD_EYE"],["ARCANE_CREST_POP","ARCANE_CREST"],["POP_COLD_FOG","COLD_FOG"]]),j3=`
query ListReportFights($reportCode: String) {
	reportData {
		report(code: $reportCode) {
			fights {
				bossPercentage
				encounterID
				id
				name
				kill
				startTime
			}
			startTime
		}
	}
}`,z3=`
query ListReportFightIDs($reportCode: String) {
	reportData {
		report(code: $reportCode) {
			fights {
				id
			}
		}
	}
}`,Y3=`
query ListFightPlayers($reportCode: String, $fightID: Int) {
	reportData {
		report(code: $reportCode) {
			fights(fightIDs: [$fightID]) {
				bossPercentage
				encounterID
				id
				name
				kill
				startTime
			}
			startTime
			playerDetails(fightIDs: [$fightID])
		}
	}
}`,K3=`
query GetPlayerEvents($reportCode: String, $fightID: Int, $playerID: Int) {
	reportData {
		report(code: $reportCode) {
			events(sourceID: $playerID, fightIDs: [$fightID]) {
				data
				nextPageTimestamp
			}
			fights(fightIDs: [$fightID]) {
				name
				combatTime
				startTime
				endTime
			}
			playerDetails(fightIDs: [$fightID])
		}
	}
}`;async function im(e,t,n){const a={method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${window.sessionStorage.getItem("fflogsAuthToken")}`},body:JSON.stringify({query:t,variables:n})};return fetch(e,a).then(s=>s.json()).then(s=>{if(s.error!==void 0)throw new Error(s.error);if(s.errors!==void 0)throw new Error(s.errors);return s.data})}const Sb=new Map;function Dv(e,t){const n=t.bossPercentage===null?N({en:"(trash)",zh:""}).toString():t.bossPercentage.toFixed(1)+"%";return{label:{en:`${t.name} - ${t.kill?"kill":n}`,zh:`${t.name} - ${t.kill?"":n}`},id:t.id,unixStartTime:e+t.startTime}}async function V3(e,t){const n=Sb.get(t);if(n!==void 0)return n;const a=await im(e,j3,{reportCode:t}),s=a.reportData.report.startTime,c=a.reportData.report.fights.map(d=>Dv(s,d));return Sb.set(t,c),c}async function W3(e,t){const a=(await im(e,z3,{reportCode:t})).reportData.report.fights.map(s=>s.id);return Math.max(...a)}function yv(e){return`${e.name??N({en:"(name unknown)",zh:""})} @ ${e.server??N({en:"(world unknown)",zh:""})}`}const cf=new Map;async function gb(e,t,n){var h;const a=(h=cf.get(t))==null?void 0:h.get(n);if(a!==void 0)return a;const s=await im(e,Y3,{reportCode:t,fightID:n}),c=Object.values(s.reportData.report.playerDetails.data.playerDetails).flat().map(m=>({id:m.id,name:yv(m),job:Ov.get(m.type)??"???"})),d=s.reportData.report.startTime,f=Dv(d,s.reportData.report.fights[0]);return cf.has(t)?cf.get(t).set(n,[f,c]):cf.set(t,new Map([[n,[f,c]]])),c.sort((m,R)=>{const T=Jo.indexOf(m.job)-Jo.indexOf(R.job);return T===0?m.name.localeCompare(R.name):T}),[f,c]}const tc=new Map;async function Ib(e){var H,G,P;const t=(G=(H=tc.get(e.reportCode))==null?void 0:H.get(e.fightID))==null?void 0:G.get(e.playerID);if(t!==void 0)return console.log("query cache hit for",e),t;const n=await im(e.apiBaseUrl,K3,e),a=Object.values(n.reportData.report.playerDetails.data.playerDetails).flat().filter(L=>L.id===e.playerID)[0],s=Ov.get(a.type),c=yv(a);let d,f;const h=n.reportData.report.fights[0],m=[],R=[],T=[],S=new Set,g=new Map;let _;const I=new Map,D=new Map,O=new Map;for(let L of n.reportData.report.events.data)if(L.sourceID===e.playerID)if(L.type==="cast"&&!Tb.has(L.abilityGameID))_!==void 0&&(_.abilityGameID===L.abilityGameID&&(I.set(_.timestamp,L.timestamp),L=_),_=void 0),m.push(L),R.push(L.timestamp);else if(L.type==="begincast"&&!Tb.has(L.abilityGameID))_=L;else if(L.type==="calculateddamage"){let j=g.get(L.timestamp);j===void 0&&(j=[],g.set(L.timestamp,j)),j.push(L),S.has(L.targetID)||(T.push(L.targetID),S.add(L.targetID))}else if(L.type==="combatantinfo")d=L.level,f={main:L[mt[s].mainStat],spellSpeed:L.spellSpeed,skillSpeed:L.skillSpeed,criticalHit:L.criticalHit,directHit:L.directHit,determination:L.determination,piety:L.piety,tenacity:L.tenacity};else if(L.type==="removebuff"){let j;const Z=L.timestamp,J=L.abilityGameID;s==="PCT"&&L.targetID===e.playerID?J===Dl.TEMPERA_COAT?j="TEMPERA_COAT_POP":J===Dl.TEMPERA_GRASSA&&(j="TEMPERA_GRASSA_POP"):s==="DRK"?J===Dl.BLACKEST_NIGHT&&(j="THE_BLACKEST_NIGHT_POP"):s==="SAM"&&L.targetID===e.playerID?J===Dl.TENGENTSU?j="TENGENTSU_POP":J===Dl.THIRD_EYE&&(j="THIRD_EYE_POP"):s==="RPR"&&L.targetID===e.playerID?J===Dl.CREST_OF_TIME_BORROWED&&(j="ARCANE_CREST_POP"):s==="BLU"&&L.targetID===e.playerID&&J===Dl.COLD_FOG&&(j="POP_COLD_FOG"),j!==void 0&&(D.has(j)?D.get(j).add(Z):D.set(j,new Set([Z])))}else L.type==="applybuff"&&L.targetID===e.playerID&&s==="PCT"&&L.abilityGameID===Dl.TEMPERA_GRASSA&&(O.has("TEMPERA_GRASSA")||O.set("TEMPERA_GRASSA",new Set),O.get("TEMPERA_GRASSA").add(L.timestamp));(P=O.get("TEMPERA_GRASSA"))==null||P.forEach(L=>{var j;return(j=D.get("TEMPERA_COAT_POP"))==null?void 0:j.delete(L)});const x=m.map(L=>{var X,Ae;const j=L.abilityGameID,Z=qa.get(j)??(j>34e6?"TINCTURE":"NEVER");Z==="NEVER"&&console.error("unknown action id",j);let J=((X=g.get(L.timestamp))==null?void 0:X.filter(W=>W.abilityGameID===j))??[];if(J.length===0){const W=I.get(L.timestamp);W!==void 0&&(J=((Ae=g.get(W))==null?void 0:Ae.filter(ee=>ee.abilityGameID===j))??[])}let se=[1];if(J.length>0){let W=J[0].targetID,ee=J[0].unmitigatedAmount;const M=new Set([W]);for(let Y=1;Y<J.length;Y++){const ie=J[Y];ie.unmitigatedAmount>ee&&(W=ie.targetID,ee=ie.unmitigatedAmount),M.add(ie.targetID)}M.delete(W),se=Array.from(M),se.splice(0,0,W),se=se.map(Y=>T.indexOf(Y)+1)}return{type:je.Skill,skillName:Z,targetList:se,healTargetCount:void 0}}),k={playerName:c,job:s,level:d,statsInLog:f!==void 0&&Object.values(f).every(L=>L!==void 0),inferredConfig:f,buffRemovalActions:Array.from(D.entries().flatMap(([L,j])=>j.entries().map(([Z])=>({popKey:L,applyKey:F3.get(L),timestamp:Z})))).sort((L,j)=>L.timestamp-j.timestamp),actions:x,timestamps:R,combatStartTime:h.endTime-h.combatTime};return tc.has(e.reportCode)?tc.get(e.reportCode).has(e.fightID)?tc.get(e.reportCode).get(e.fightID).set(e.playerID,k):tc.get(e.reportCode).set(e.fightID,new Map([[e.playerID,k]])):tc.set(e.reportCode,new Map([[e.fightID,new Map([[e.playerID,k]])]])),k}const uf={width:"100%",height:"1.6em",outline:"none"};function*X3(e,t){const n=p.gameConfig.serialized(),a={...n,procMode:Si.Always,job:e.job,initialResourceOverrides:e.job===n.job?n.initialResourceOverrides:[]};for(const[O,x]of Object.entries(e.inferredConfig??{}))typeof x=="number"&&(a[O]=x);e.level!==void 0&&(a.level=e.level),p.setConfigAndRestart(a,t||a.job!==n.job||n.procMode!==a.procMode);const s=p.record.length,c=e.actions;if(console.assert(c.length===e.timestamps.length),c.length===0)return yield{processed:0,total:0,deltas:[],spilledDeltas:0},[];const d=c.map(O=>new ia(O)),h=(e.timestamps[0]-e.combatStartTime)/1e3,m=p.game.getSkillAvailabilityStatus(c[0].skillName).castTime,R=m>0?h-m+Ia.getSlidecastWindow(m):h;d.unshift(Bl(R)),console.log("initial jump time:",h),-R>p.gameConfig.countdown&&p.setConfigAndRestart({...a,countdown:-Math.floor(R)}),p.insertRecordNodes(d,s);const T={processed:1,total:c.length,deltas:[],spilledDeltas:0};let S=1;const g=p.gameConfig.countdown,_=e.buffRemovalActions[Symbol.iterator]();let I=_.next();for(let O=1;O<c.length;O++){const x=c[O],k=s+O+S,H=p.record.actions[k],G=(e.timestamps[O]-e.combatStartTime)/1e3,P=x.skillName;console.assert(H.info.type===je.Skill&&H.tmp_startLockTime);const L=H.tmp_startLockTime-g,j=p.record.actions[k-1],Z=j.tmp_endLockTime-g;if(!I.done){const{popKey:X,applyKey:Ae,timestamp:W}=I.value,ee=(W-e.combatStartTime)/1e3;let M;if(Z>ee?j.info.type===je.Skill&&j.info.skillName===Ae?M=k:M=k-1:G>ee&&(M=k),M!==void 0){p.insertRecordNode(jl(X),M),I=_.next(),O--,S++;continue}}const J=G-L,se=.05;if(J>3.5)p.insertRecordNode(Bl(G),k),S++;else if(J>se){const X=G-Z;console.assert(X>0),p.insertRecordNode(dc(X),k),S++}else J<-.05&&(T.deltas.length>=10?T.spilledDeltas++:T.deltas.push({skill:P,logTime:G,simTime:L}));T.processed++,yield T}const D=p.record.actions.slice(s);return console.log(`inserted ${S} non-skill nodes`),p.undoStack.push(new YG(D,s,n,a)),p.autoSave(),p.record.unselectAll(),wn().invalidActions}const nc={textAlign:"left",paddingLeft:"0.3em"},q3=["spellSpeed","skillSpeed","criticalHit","directHit","determination","piety","fps"];function Z3(e){var a;const t=Nt(),n=p.gameConfig[e.field];return l.jsx(Xt,{style:{display:"inline-block",color:t.text},defaultValue:((a=e.inferredStateValue)==null?void 0:a.toString())??"",description:Ku(e.field),onChange:s=>{s.length===0&&e.setValue(void 0);const c=parseInt(s);isNaN(c)||e.setValue(c)},placeholder:n.toString()})}function $3(){const[e,t]=C.useState(new URLSearchParams(window.location.search).has("code")),n={},a=C.useContext(yn)==="Light",s=Nt(),[c,d]=C.useState(!0),f=C.useRef(null),[h,m]=C.useState(""),[R,T]=C.useState(0),S=Te=>{R===8&&(_(null),d(!0),D([])),Te!==6&&Te!==7&&L(void 0),Te!==4&&Te!==5&&(k.current=[],G.current=[],H.current=void 0),[2,4,5].includes(Te)||(x.current=void 0),T(Te)},[g,_]=C.useState(null),[I,D]=C.useState([]),O=Te=>{(Te||R!==7)&&(!Te&&R===8&&S(2),t(Te))};C.useEffect(()=>{if(!new URLSearchParams(window.location.search).has("code")&&window.sessionStorage.getItem("fflogsAuthToken")!==null){S(2),console.log("already authorized to fflogs");return}S(1);async function Te(){let be=0;try{const ye=await Rb();if(ye===Hf.SUCCESS)be=2;else if(e&&ye===Hf.UNAUTHORIZED){await Ab();const Ue=await Rb();console.log(Ue),Ue===Hf.SUCCESS&&(be=2)}}catch(ye){console.log("Error during automatic FFLogs authentication"),console.error(ye)}S(be)}Te()},[]);const x=C.useRef(void 0),k=C.useRef([]),H=C.useRef(void 0),G=C.useRef([]),[P,L]=C.useState(void 0),j={color:s.emphasis,backgroundColor:s.accent},Z=l.jsx("button",{onClick:()=>S(2),children:N({en:"cancel",zh:""})}),J=l.jsxs("div",{className:"importPage",children:[l.jsx("div",{children:l.jsx("button",{onClick:()=>{Ab(),S(1)},children:N({en:"click here to authorize your fflogs account",zh:"fflogs"})})}),l.jsx("span",{children:N({en:"(will redirect to www.fflogs.com)",zh:"www.fflogs.com"})})]}),se=l.jsx("div",{className:"importPage",children:l.jsx("p",{children:N({en:"verifying authorization...",zh:"..."})})}),X=l.jsxs(l.Fragment,{children:[l.jsx("div",{children:l.jsx("b",{children:N({en:"Limitations",zh:""})})}),l.jsxs("div",{children:[N({en:"Log import is currently subject to the following limitations:",zh:"logs"}),l.jsxs("ul",{children:[l.jsx("li",{children:N({en:"FFLogs only records combat stats for the creator of the log, so stats must be manually entered for other players.",zh:"FFLogs"})}),l.jsx("li",{children:N({en:"FFLogs cannot record actions that were performed before combat began. Pre-pull actions must be entered manually before import.",zh:"FFLogslogs"})}),l.jsx("li",{children:N({en:"Manual buff click-offs, and buff toggles from entering/leaving a zone (for example: leaving Ley Lines or Sacred Soil) are not currently processed by XIV in the Shell.",zh:"XIV in the Shellbuff/buff"})}),l.jsx("li",{children:N({en:"The offset of MP and Lucid Dreaming ticks are not currently synchronized in XIV in the Shell.",zh:"XIV in the Shelllogs"})}),l.jsx("li",{children:N({en:"XIV in the Shell does not reflect job gauge updates that are affected by random factors, or by whether an enemy is hit or killed.",zh:"XIV in the Shell//"})})]}),N({en:"These may change in future updates.",zh:""})]})]}),Ae=R!==2||!h,W=l.jsxs("div",{className:"importPage",children:[l.jsxs("form",{onSubmit:async Te=>{if(Te.preventDefault(),R===2)try{const be=B3(h);if(be.error)throw new Error(N(be.error).toString());if(S(3),new URL(h).searchParams.get("fight")==="last"){console.log("querying last fight ID");const ye=await W3(be.apiBaseUrl,be.reportCode);be.fightID=ye}if(x.current=be,be.fightID===void 0){const ye=await V3(be.apiBaseUrl,be.reportCode);k.current=ye,console.log("choosing from",ye.length,"fights"),S(4)}else if(be.playerID===void 0){const ye=await gb(be.apiBaseUrl,be.reportCode,be.fightID);k.current=[],[H.current,G.current]=ye,console.log("choosing from",G.current.length,"players"),S(5)}else{const ye=await Ib({apiBaseUrl:be.apiBaseUrl,reportCode:be.reportCode,fightID:be.fightID,playerID:be.playerID});L(ye),console.log(`preparing to import ${ye.actions.length} skills`),S(6)}}catch(be){console.error(be),window.alert(be),S(2)}},children:[l.jsx(Xt,{description:l.jsx("div",{children:N({en:"enter an FFLogs report link",zh:"FFLogs"})}),style:{width:"100%"},onChange:m,defaultValue:h,fullWidthInput:!0,autoFocus:!0}),l.jsxs("div",{className:"buttonHolder",style:{marginTop:10},children:[l.jsx("button",{style:Ae?{}:j,type:"submit",disabled:Ae,children:N({en:"import",zh:""})}),l.jsx("button",{type:"button",onClick:()=>S(0),children:N({en:"back to authorization",zh:""})})]})]}),l.jsx("hr",{}),X]}),ee=l.jsx("div",{className:"importPage",children:l.jsx("p",{children:N({en:"retrieving log...",zh:"logs"})})}),M=C.useRef(!1),Y=l.jsxs("div",{className:"importPage",children:[l.jsx("b",{children:N({en:"Choose a fight",zh:""})}),l.jsx("ul",{children:k.current.map((Te,be)=>l.jsx("li",{onClick:()=>{if(M.current)return;const ye=x.current;if(ye===void 0){console.error("log info was undefined in fight choice state"),S(2);return}M.current=!0,gb(ye.apiBaseUrl,ye.reportCode,Te.id).then(Ue=>{[H.current,G.current]=Ue,ye.fightID=Te.id,console.log("choosing from",G.current.length,"players"),S(5)}).catch(Ue=>{console.error(Ue),window.alert(Ue),S(2)}).finally(()=>{M.current=!1})},children:l.jsxs("span",{className:"clickableLinkLike",children:[new Date(Te.unixStartTime).toLocaleString()," - ",N(Te.label)]})},be))}),l.jsx("div",{children:Z})]}),ie=l.jsxs("div",{className:"importPage",children:[H.current&&l.jsxs("span",{children:[new Date(H.current.unixStartTime).toLocaleString()," - ",N(H.current.label)]}),l.jsx("b",{children:N({en:"Choose a player",zh:""})}),l.jsx("ul",{children:G.current.map((Te,be)=>l.jsx("li",{onClick:()=>{if(M.current)return;const ye=x.current;if(ye===void 0){console.error("log info was undefined in player choice state"),S(2);return}if(ye.fightID===void 0){console.error("fight ID was undefined in player choice state"),S(2);return}M.current=!0,Ib({apiBaseUrl:ye.apiBaseUrl,reportCode:ye.reportCode,fightID:ye.fightID,playerID:Te.id}).then(Ue=>{L(Ue),console.log(`preparing to import ${Ue.actions.length} skills`),S(6)}).catch(Ue=>{console.error(Ue),window.alert(Ue),S(2)}).finally(()=>{M.current=!1})},children:l.jsxs("span",{className:"clickableLinkLike",children:[Te.job," - ",Te.name]})},be))}),k.current.length===0?l.jsx("div",{children:Z}):l.jsx("div",{children:l.jsx("button",{onClick:()=>{S(4),G.current=[]},children:N({en:"back to fight selection",zh:""})})})]}),le=()=>p.gameConfig.job!==(P==null?void 0:P.job),v=l.jsx(qe,{container:f,topic:"fflogsConfigReset",content:N({en:l.jsxs("div",{children:['FFLogs only records exact combat stats for the player that created the log. All other stats must be entered manually. Any configuration not specified in this dialog, including initial resource overrides, will use the values set in the main "Config" panel.',l.jsx("br",{}),'After a log import, the "proc mode" field is set to "Always". You can manually adjust this later.']})})}),z=l.jsx(qe,{container:f,topic:"fflogsConfigResetActive",content:N({en:l.jsxs("div",{children:[l.jsx("i",{children:"Actions in the current timeline will be cleared and replaced with those imported from the log."}),l.jsx("br",{}),"FFLogs does not record actions performed before combat begins. To add pre-pull actions, manually insert them after importing, or add them beforehand and uncheck this option."]}),zh:l.jsxs("div",{children:[l.jsx("i",{children:"logs"}),l.jsx("br",{}),"FFLogslogs"]})})}),q=l.jsx(qe,{container:f,topic:"fflogsConfigResetActive",content:N({en:l.jsx("span",{children:l.jsx("i",{children:"Actions imported from the log will be added to the end of the existing timeline."})}),zh:l.jsx("span",{children:l.jsx("i",{children:"logs"})})})}),F=l.jsxs("div",{className:"importPage",children:[N({en:l.jsxs("p",{children:["Reading ",(P==null?void 0:P.actions.length)??0," skills for"," ",l.jsx("b",{children:P==null?void 0:P.playerName})]}),zh:l.jsxs("p",{children:["",l.jsx("b",{children:P==null?void 0:P.playerName}),"",(P==null?void 0:P.actions.length)??0,""]})}),l.jsxs("div",{children:[P!=null&&P.statsInLog?N({en:"Using stats found in log. Please adjust as needed.",zh:"logs"}):N({en:"Exact stats not found in log; using values in current game config. Please enter manually or adjust with the Config pane after import. ",zh:"Logs"}),v]}),l.jsx("hr",{}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:5},children:[l.jsxs("div",{children:[l.jsx("span",{children:N({en:"job: ",zh:""})}),(P==null?void 0:P.job)??p.game.job]}),P&&l.jsxs("div",{children:[l.jsx("span",{children:N({en:"level: ",zh:""})}),l.jsxs("select",{style:{outline:"none",color:s.text},value:P.level,onChange:Te=>L({...P,level:parseInt(Te.target.value)}),children:[l.jsx("option",{value:ot.lvl100,children:"100"},ot.lvl100),l.jsx("option",{value:ot.lvl90,children:"90"},ot.lvl90),l.jsx("option",{value:ot.lvl80,children:"80"},ot.lvl80),l.jsx("option",{value:ot.lvl70,children:"70"},ot.lvl70)]})]})]}),l.jsx("div",{style:{display:"flex",gap:5,flexDirection:"column"},children:q3.map(Te=>{var be;return l.jsx("div",{children:l.jsx(Z3,{field:Te,inferredStateValue:(be=P==null?void 0:P.inferredConfig)==null?void 0:be[Te],setValue:ye=>{(P==null?void 0:P.inferredConfig)!==void 0&&L({...P,inferredConfig:{...P.inferredConfig,[Te]:ye}})}})},Te)})}),l.jsx("hr",{}),le()?l.jsx("div",{children:l.jsx("span",{children:N({en:"Imported actions will replace the current timeline.",zh:""})})}):l.jsxs("div",{children:[l.jsx("input",{className:"shellCheckbox",type:"checkbox",onChange:Te=>{d(Te.currentTarget.checked)},checked:c}),l.jsxs("span",{children:[N({en:"Reset timeline on import",zh:""})," "]}),c?z:q]}),l.jsxs("div",{className:"buttonHolder",children:[l.jsx("button",{style:j,onClick:()=>{if(P){S(7);const Te=X3(P,c||le());setTimeout(()=>{let be=Te.next();for(;!be.done;)_({...be.value}),be=Te.next();D(be.value),S(8)},0)}else console.error("intermediate state was undefined when confirming import"),S(2),O(!1)},children:N({en:"go",zh:""})}),Z]})]}),ae={position:"relative",width:"100%",borderCollapse:"collapse",borderColor:s.bgMediumContrast,borderWidth:"1px",borderStyle:"solid"},K={backgroundColor:s.timelineEditor.headerFooter,...js(s)},Q=Te=>Te%2===1?s.timelineEditor.bgAlternateRow:"transparent",he=g!=null&&g.deltas.length?l.jsxs(l.Fragment,{children:[l.jsx("hr",{}),l.jsx("div",{children:N({en:"Some simulated actions had timestamps in XIV in the Shell different from the recorded values in FFLogs. Minor differences are normal, but if you see a very large discrepancy, this means there's either a bug in XIV in the Shell, or the configured spell speed/skill speed/fps was incorrect.",zh:"XIV in the Shell/logsXIV in the Shellbug//"})}),l.jsxs("table",{style:ae,children:[l.jsx("thead",{children:l.jsxs("tr",{style:uf,children:[l.jsx("th",{style:{...K,...nc,width:"35%"},children:N({en:"skill",zh:""})}),l.jsx("th",{style:{...K,...Ml},children:N({en:"log time",zh:""})}),l.jsx("th",{style:{...K,...Ml},children:N({en:"shell time",zh:""})}),l.jsx("th",{style:{...K,...Ml},children:N({en:"difference",zh:""})})]})}),l.jsx("tbody",{children:g.deltas.map((Te,be)=>l.jsxs("tr",{style:{...uf,background:Q(be)},children:[l.jsx("td",{style:{...nc,width:"35%"},children:aa(Te.skill)}),l.jsx("td",{style:Ml,children:tt.displayTime(Te.logTime,3)}),l.jsx("td",{style:Ml,children:tt.displayTime(Te.simTime,3)}),l.jsx("td",{style:Ml,children:tt.displayTime(Te.logTime-Te.simTime,3)})]},be))})]}),g.spilledDeltas?l.jsx("span",{children:N({en:`...and ${g.spilledDeltas} more`,zh:`${g.spilledDeltas}`})}):void 0]}):l.jsx(l.Fragment,{}),me=l.jsxs("div",{className:"importPage",children:[l.jsx("div",{children:N({en:"processing actions (this may take a moment)...",zh:""})}),g&&l.jsxs("div",{children:[l.jsxs("span",{children:[g.processed," / ",g.total]}),l.jsx("br",{}),he]})]}),Ie=I.length>0?l.jsxs(l.Fragment,{children:[N({en:`The imported timeline produced ${I.length} invalid action${I.length===1?"":"s"}:`,zh:`${I.length}`}),l.jsxs("table",{style:ae,children:[l.jsx("thead",{children:l.jsxs("tr",{style:uf,children:[l.jsx("th",{style:{...K,...Ec},children:"#"}),l.jsx("th",{style:{...K,...nc},children:N({en:"action",zh:""})}),l.jsx("th",{style:{...K,...nc},children:N({en:"reason",zh:""})})]})}),l.jsx("tbody",{children:I.slice(0,10).map((Te,be)=>l.jsxs("tr",{style:{...uf,background:Q(be)},children:[l.jsx("td",{style:Ec,children:Te.index}),l.jsx("td",{style:nc,children:Te.node.toLocalizedString()}),l.jsx("td",{style:nc,children:Te.reason.unavailableReasons.map(Bs).join(N({en:"; ",zh:""}).toString())})]},be))})]}),I.length>10?l.jsx("span",{children:N({en:`...and ${I.length-10} more`,zh:`...${I.length-10}`})}):void 0]}):void 0,Me=l.jsxs("div",{className:"importPage",children:[l.jsxs("p",{children:[l.jsx("b",{children:N({en:"Import successful!",zh:""})}),N({en:" You may now close this dialog.",zh:""})]}),he,l.jsx("br",{}),Ie,l.jsx("br",{}),l.jsx("div",{children:l.jsx("button",{onClick:()=>O(!1),children:N({en:"finish",zh:""})})})]}),pe=R===0?J:R===1?se:R===2?W:R===3?ee:R===4?Y:R===5?ie:R===6?F:R===7?me:R===8?Me:l.jsxs("div",{children:["Bad state: ",R,". Please contact us with a bug report."]}),ge=l.jsxs("div",{ref:f,children:[l.jsx("style",{children:`
			button {
				min-width: 35%;
			}
			.buttonHolder {
				width: 100%;
				display: flex;
				flex-direction: column;
				gap: 0.8em;
				align-items: start;
			}
		`}),pe]}),oe=l.jsx("div",{className:"clickable",children:l.jsx("span",{style:n,children:l.jsx("span",{className:"clickableLinkLike",children:N({en:"Click to open dialog",zh:""})})})}),Ce=l.jsx(vb,{className:"dialogExit",style:{color:s.bgHighContrast}});return l.jsxs(pv,{open:e,onOpenChange:O,children:[l.jsx(Cv,{render:oe,nativeButton:!1}),l.jsxs(Sv,{children:[l.jsx(hv,{className:"Backdrop",style:{opacity:a?.2:.7}}),l.jsxs(Tv,{className:"Popup visibleScrollbar",id:"dialogPopup",style:{backgroundColor:s.background,border:"1px solid "+s.bgMediumContrast,color:s.text},children:[l.jsx(Nv,{render:l.jsx("h3",{children:N({en:"Import from FFLogs",zh:"FFLogs"})})}),l.jsx(Ev,{render:Ce,nativeButton:!1}),l.jsx(Av,{className:"Description",render:ge})]})]})]})}function Q3(e,t){const n=p.getTimelineRenderingProps();let a=n.selectionStartDisplayTime,s=n.selectionEndDisplayTime;a===s&&(a=-n.countdown,s=p.game.time-n.countdown+4);const c=p.imageExportConfig;let d,f;c.wrapThresholdSeconds===0?(d=1,f=s-a):(d=Math.ceil((s-a)/c.wrapThresholdSeconds),f=c.wrapThresholdSeconds);const h=document.createElement("canvas"),m=document.createElement("canvas"),R=De.trackHeight/2,T=p.timeline,S=T.positionFromTime(n.countdown);h.width=T.positionFromTime(s)+S;let g=De.renderSlotHeight();e&&(g+=De.rulerHeight,g+=De.trackHeight*T.getNumMarkerTracks()),h.height=g;const _=h.getContext("2d",{willReadFrequently:!0}),I=0;_.fillStyle=t.background,_.fillRect(0,0,h.width,h.height);let D=0;const O={renderingProps:p.getTimelineRenderingProps(),colors:t,visibleLeft:0,visibleWidth:100};e&&(D+=av({ctx:_,viewInfo:O,originX:0,ignoreVisibleX:!0,testInteraction:()=>{}}),D+=ov({ctx:_,viewInfo:O,originX:I,originY:D,ignoreVisibleX:!0,testInteraction:()=>{}})),sv({ctx:_,viewInfo:O,isImageExportMode:!0,originX:I,originY:D,testInteraction:()=>{}});const x=T.positionFromTime(a)+S,k=T.positionFromTime(s)+S;m.height=(R+g)*(d-1)+g,m.width=d===1?k-x:T.positionFromTime(f);const H=m.getContext("2d");for(let G=0;G<d;G++){const P=T.positionFromTime(f);if(x>k)break;const L=Math.min(k-(x+G*P),P),j=_.getImageData(x+G*P,0,L+1,h.height+1);H.putImageData(j,0,G*(R+g)),G>0&&L<P&&(H.fillStyle=t.background,H.fillRect(L,G*(R+g),P-L,h.height+1))}return m}function J3(){const[e,t]=C.useState(p.imageExportConfig),n=(h,m)=>{const R=Object.assign({},e);R[h]=m,p.setImageExportConfig(R),t(R),Ct("img: "+h,JSON.stringify(m))},a={position:"relative",top:3,marginRight:"0.25em"},s=(h,m)=>l.jsxs("div",{style:{marginBottom:5},children:[l.jsx("input",{type:"checkbox",onClick:R=>n(h,R.currentTarget.checked),value:e[h]?"on":"off",style:a,defaultChecked:e[h]}),l.jsx("span",{children:N(m)})]}),c=h=>{Number.isNaN(parseFloat(h))||n("wrapThresholdSeconds",parseFloat(h))},d=l.jsxs(l.Fragment,{children:[l.jsx("div",{children:l.jsx(Xt,{defaultValue:e.wrapThresholdSeconds.toString(),description:l.jsxs("span",{children:[N({en:"seconds before wrapping ",zh:" "}),l.jsx(qe,{topic:"png-wrap",content:N({en:"number of elapsed seconds, including the countdown, in each row in the image (set to 0 to never wrap)",zh:"0"})}),":"," "]}),onChange:c,style:{margin:"10px 0"}})}),s("includeTime",{en:"include time and markers",zh:""})]}),f=Nt();return l.jsxs("div",{children:[l.jsx("p",{children:N({en:l.jsx("span",{children:"export the selected part of the timeline as a png according to the current display settings, or the whole timeline if nothing is selected"}),zh:"png"})}),d,l.jsx("p",{children:l.jsx(Kl,{filename:"fight",fileFormat:Qo.Png,getContentFn:()=>Q3(e.includeTime,f),displayName:N({en:"export selection as png",zh:"png"})})})]})}function ez(){const e=C.useContext(yn),t=f=>{f.fileType===pa.Record?p.undoStack.doThenPush(new ZG(p.record.serialized(),f)):f.fileType===pa.MarkerTrackIndividual||f.fileType===pa.MarkerTracksCombined?window.alert("wrong file type '"+f.fileType+`'; use the "Timeline markers" section instead if you meant import markers.`):window.alert("wrong file type '"+f.fileType+"'.")},n=N({en:"Export fight to file",zh:""}),a=l.jsxs("div",{children:[l.jsx("p",{children:N({en:"for sharing and importing:",zh:""})}),l.jsx(Kl,{fileFormat:Qo.Json,getContentFn:()=>p.record.serialized(),filename:"fight",displayName:N({en:"txt format",zh:"txt"})}),l.jsx("p",{children:N({en:l.jsxs("span",{children:["for external tools such as excel and"," ",l.jsx("a",{href:"https://github.com/Tischel/BLMInTheShell",children:"Tischel's plugin"}),":"]}),zh:l.jsxs("span",{children:["excel",l.jsx("a",{href:"https://github.com/Tischel/BLMInTheShell",children:"Tischel"}),""]})})}),l.jsx(Kl,{fileFormat:Qo.Csv,getContentFn:()=>({body:p.getActionsLogCsv()}),filename:"fight",displayName:N({en:"csv format",zh:"csv"})}),l.jsx("p",{children:N({en:l.jsxs("span",{children:["for use with"," ",l.jsx("a",{href:"https://colab.research.google.com/github/zqsz-xiv/xivintheshell-ama-sim-notebook/blob/main/in_the_shell_with_ama_sim.ipynb",children:"Amarantine's combat simulator"}),":"]}),zh:l.jsxs("span",{children:["",l.jsx("a",{href:"https://github.com/Amarantine-xiv/Amas-FF14-Combat-Sim",children:"Amarantine"}),""]})})}),l.jsx(Kl,{fileFormat:Qo.Csv,getContentFn:()=>p.getAmaSimCsv(),filename:"fight",displayName:N({en:"csv format",zh:"csv"})})]}),s=N({en:"Import fight from file",zh:""}),c=l.jsxs(l.Fragment,{children:[l.jsx(Jf,{allowLoadFromUrl:!1,onLoadFn:t}),l.jsx("hr",{style:{marginTop:15,border:"none",borderTop:"1px solid "+Xl(e,"bgHighContrast")}}),l.jsx("div",{style:{marginTop:15,marginBottom:10},children:l.jsx("b",{children:N({en:"Import fight from FFLogs",zh:"FFLogs"})})}),l.jsx($3,{})]}),d=l.jsx(l.Fragment,{children:N({en:"Image Export",zh:""})});return l.jsx(zS,{contentHeight:bg,children:[{defaultSize:25,title:s,content:c},{defaultSize:30,title:n,content:a},{defaultSize:45,title:d,content:l.jsx(J3,{})}]})}function tz(){const e=(d,f)=>l.jsxs("div",{style:{marginBottom:5},children:[l.jsx("b",{children:N(d)})," ",f]}),t=l.jsx(qe,{topic:"settings-display",content:N({en:"Configure how elements are displayed in the visual timeline and image exports.",zh:""})}),n=l.jsx(qe,{topic:"settings-copypaste",content:N({en:l.jsxs("div",{children:["Configure the format used when copying a sequence of skills from XIV in the Shell to paste in other applications.",l.jsx("br",{}),"Any of the provided formats can be pasted ",l.jsx("i",{children:"from"})," external applications to XIV in the Shell at any time, regardless of the value of this setting."]}),zh:l.jsxs("div",{children:["",l.jsx("br",{}),""]})})}),a=l.jsx(qe,{topic:"settings-copypaste-plain",content:N({en:l.jsxs("div",{children:["A comma-separated list of skill names.",l.jsx("br",{}),l.jsx("br",{}),"Example:",l.jsx("br",{}),l.jsx("span",{children:"Fire 3, Fire 4, Despair"})]}),zh:l.jsxs("div",{children:["",l.jsx("br",{}),l.jsx("br",{}),"",l.jsx("br",{}),l.jsx("span",{children:"34"})]})})}),s=l.jsx(qe,{topic:"settings-copypaste-plain",content:N({en:l.jsxs("div",{children:["A tab-separated list of usage timestamps, target counts, and skill names, for use with external spreadsheet applications.",l.jsx("br",{}),l.jsx("br",{}),"Example:",l.jsx("table",{children:l.jsxs("tbody",{children:[l.jsxs("tr",{children:[l.jsx("td",{children:"-3.500"}),l.jsx("td",{children:"1"}),l.jsx("td",{children:"Fire 3"})]}),l.jsxs("tr",{children:[l.jsx("td",{children:"0.042"}),l.jsx("td",{children:"1"}),l.jsx("td",{children:"Fire 4"})]}),l.jsxs("tr",{children:[l.jsx("td",{children:"2.500"}),l.jsx("td",{children:"1"}),l.jsx("td",{children:"Despair"})]})]})})]}),zh:l.jsxs("div",{children:["",l.jsx("br",{}),l.jsx("br",{}),"",l.jsx("table",{children:l.jsxs("tbody",{children:[l.jsxs("tr",{children:[l.jsx("td",{children:"-3.500"}),l.jsx("td",{children:"1"}),l.jsx("td",{children:"3"})]}),l.jsxs("tr",{children:[l.jsx("td",{children:"0.042"}),l.jsx("td",{children:"1"}),l.jsx("td",{children:"4"})]}),l.jsxs("tr",{children:[l.jsx("td",{children:"2.500"}),l.jsx("td",{children:"1"}),l.jsx("td",{children:""})]})]})})]})})}),c=l.jsx(qe,{topic:"settings-copypaste-discord",content:N({en:l.jsxs("div",{children:["A sequence of Discord emotes (only verified for BLM and PCT). Requires access to a server with appropriately-named emotes to use.",l.jsx("br",{}),l.jsx("br",{}),"Example:",l.jsx("br",{}),l.jsx("span",{children:":F3: :F4: :Despair:"})]}),zh:l.jsxs("div",{children:["Discord)Discord",l.jsx("br",{}),l.jsx("br",{}),"",l.jsx("br",{}),l.jsx("span",{children:":F3: :F4: :Despair:"})]})})});return l.jsxs("div",{children:[e({en:"Display settings",zh:""},t),l.jsx(Xu,{uniqueName:"showDamageMarks",label:N({en:"show damage marks",zh:""}),onChange:d=>{p.setTimelineOptions({drawDamageMarks:d})}}),l.jsx(Xu,{uniqueName:"showHealingMarks",label:N({en:"show healing marks",zh:""}),onChange:d=>{p.setTimelineOptions({drawHealingMarks:d})}}),l.jsx(Xu,{uniqueName:"showMPAndLucidTickMarks",label:N({en:"show MP and lucid ticks",zh:""}),onChange:d=>{p.setTimelineOptions({drawMPTickMarks:d})}}),l.jsx(Xu,{uniqueName:"showBuffIndicators",label:N({en:"show buff indicators",zh:"buff"}),onChange:d=>{p.setTimelineOptions({drawBuffIndicators:d})}}),l.jsx("br",{}),e({en:"Clipboard copy mode",zh:""},n),l.jsx(DO,{uniqueName:"clipboardMode",onChange:d=>p.clipboardMode=d,options:[["plain",l.jsxs("span",{children:[N({en:"plain text",zh:""})," ",a]})],["tsv",l.jsxs("span",{children:[N({en:"tab-separated lines",zh:""})," ",s]})],["discord",l.jsxs("span",{children:["discord",N({en:" emotes",zh:""})," ",c]})]]})]})}let nl=()=>{},vv=e=>{};const Mv="dragLock",nz=pt(Mv),Lv=nz==="true",wd=C.createContext({value:Lv,setter:e=>{}}),am=C.createContext({dragTargetIndex:null,dragTargetTime:null,setDragTarget:(e,t)=>{}});function iz(){const e=C.useRef(null),[t,n]=C.useState(11),[a,s]=C.useState(300),[c,d]=C.useState(23),[f,h]=C.useState(66),[m,R]=C.useState(0),[T,S]=C.useState(!1),[g,_]=C.useState({onMouseMove:()=>{},onMouseEnter:()=>{},onMouseLeave:()=>{},onMouseUp:()=>{},onMouseDown:()=>{},onKeyDown:()=>{}}),I=()=>{e.current&&(d(e.current.scrollLeft),h(e.current.clientWidth))};nl=()=>{n(p.timeline.getCanvasWidth()),s(p.timeline.getCanvasHeight()),R(m+1)},vv=H=>{if(e.current!=null){const G=e.current.clientWidth;e.current.scrollLeft=H-G*.6}I()},C.useEffect(()=>{n(p.timeline.getCanvasWidth()),s(p.timeline.getCanvasHeight()),I()},[]);const D=l.jsx(Zj,{timelineHeight:a,visibleLeft:c,visibleWidth:f,version:m,pointerMouse:T,setCallbacks:_,setPointerMouse:S}),O=C.useContext(yn),x=Xl(O,"bgMediumContrast"),k=CO?l.jsx("div",{style:{height:8},tabIndex:-1}):void 0;return l.jsxs("div",{style:{position:"relative"},children:[D,l.jsxs("div",{tabIndex:0,className:"visibleScrollbar",style:{position:"relative",width:"100%",overflowX:"scroll",overflowY:"clip",outline:"1px solid "+x,cursor:T?"pointer":"default"},ref:e,onScroll:()=>{e.current&&(e.current.scrollLeft=Math.min(e.current.scrollWidth-e.current.clientWidth,e.current.scrollLeft),d(e.current.scrollLeft),h(e.current.clientWidth))},onMouseMove:H=>{if(e.current){const G=e.current.getBoundingClientRect(),P=H.clientX-G.left,L=H.clientY-G.top;g.onMouseMove(P,L)}},onMouseDown:H=>{if(e.current){const G=e.current.getBoundingClientRect(),P=H.clientX-G.left,L=H.clientY-G.top;g.onMouseDown(P,L)}},onMouseEnter:()=>g.onMouseEnter(),onMouseLeave:()=>g.onMouseLeave(),onMouseUp:H=>{if(e.current){const G=e.current.getBoundingClientRect(),P=H.clientX-G.left,L=H.clientY-G.top;g.onMouseUp(H,P,L)}},onKeyDown:H=>g.onKeyDown(H),children:[l.jsx("div",{style:{position:"relative",backgroundColor:"transparent",width:t,height:a,pointerEvents:"none"}}),k]})]})}const xv=320,bg=xv-40;function az(){const{value:e,setter:t}=C.useContext(wd),n=C.useContext(yn),a=window.innerWidth>1024,s=window.innerWidth>800;return l.jsxs("div",{style:{position:"relative",margin:6},children:[l.jsx(OO,{uniqueName:"timeline",maxWidth:1440,content:[{titleNode:N({en:"Timeline markers",zh:""}),contentNode:l.jsx(Uj,{})},{titleNode:l.jsxs("div",{style:{position:"relative"},children:[N({en:"Timeline editor ",zh:" "}),l.jsx(qe,{topic:"timeline editor",content:l.jsx("div",{children:l.jsx("div",{className:"paragraph",children:N({en:'Table view for editing the current timeline. Changes made here are not saved until the "apply changes" button is pressed.',zh:""})})})})]}),contentNode:l.jsx(BG,{})},{titleNode:N({en:"Import/Export",zh:"/"}),contentNode:l.jsx("div",{children:l.jsx(ez,{})})},{titleNode:N({en:"Settings",zh:""}),contentNode:l.jsx(tz,{})}],collapsible:!0,scrollable:!1,height:xv,defaultSelectedIndex:void 0}),l.jsxs("div",{style:{position:"absolute",top:0,right:6,display:"flex",flexDirection:"row",gap:20},children:[a&&l.jsxs("div",{style:{height:sc,lineHeight:`${sc}px`,verticalAlign:"middle",cursor:"pointer",userSelect:"none"},onClick:c=>{c.preventDefault(),t(!e)},children:[N({en:"drag lock",zh:""})," ",l.jsx(qe,{topic:"dragLock",content:N({en:l.jsx("div",{children:"When locked, disables click/drag to rearrange timeline skills."}),zh:l.jsx("div",{children:""})})})," ",l.jsx(ys.Provider,{value:{color:e?Xl(n,"accent"):void 0,style:{width:12,height:12,verticalAlign:"baseline"}},children:e?l.jsx(F1,{}):l.jsx(B1,{})})]}),s&&l.jsx(wG,{uniqueName:"timelineDisplayScale",description:N({en:"horizontal scale ",zh:" "}),defaultValue:"0.4",style:{height:sc,lineHeight:`${sc}px`,verticalAlign:"middle"},onChange:c=>{p.timeline.setHorizontalScale(parseFloat(c)),p.scrollToTime()}})]})]})}function oz(){const[e,t]=C.useState(Lv),[[n,a],s]=C.useState([null,null]),c=(d,f)=>{if(e)d=null,f=null;else{const h=p.record.selectionStartIndex??0;let m=(d??0)-(h??0);m>0&&(m-=p.record.getSelectionLength()),(m===0||d!==null&&p.record.isInSelection(d))&&(d=null,f=null)}(d!==n||f!==a)&&s([d,f])};return l.jsx("div",{style:{bottom:0,left:0,right:0,paddingLeft:0,paddingRight:0,borderTop:"2px solid "+Nt().bgHighContrast,flex:0},children:l.jsx(wd.Provider,{value:{value:e,setter:d=>{Ct(Mv,d.toString()),t(d)}},children:l.jsxs(am.Provider,{value:{dragTargetIndex:n,dragTargetTime:a,setDragTarget:c},children:[l.jsx(iz,{}),l.jsx(az,{})]})})})}const zi=JSON.parse(`[{"date":"2/25/26","changes":["[DRK] Fixed a bug where Blood Weapon did not trigger on spells."]},{"date":"2/22/26","changes":["Fixed a bug where clicking an element in the visual timeline would sometimes not scroll the Timeline Editor table far enough."]},{"date":"2/15/26","changes":["[WAR] Added a \\"Retaliation\\" skill to simulate taking damage while Damnation or Vengeance is active.","Abilities usable at range no longer automatically re-enable auto-attacks on melee and tank jobs (this does not currently affect damage calculations).","Added auto-attack downtime windows to Ama's combat sim export.","[MCH] Fixed a bug where the Wildfire debuff would not appear.","[MCH][SMN][DRK] Removed unnecessary columns in display of damage breakdown from pets.","While importing from FFLogs, players will now be listed according to the order of their jobs."]},{"date":"2/13/26","changes":["[BRD][MCH][DNC] Added Leg Graze and Foot Graze for compatibility with FFLogs import.","Fixed a bug where importing certain logs for jobs with DoT effects would crash the page."]},{"date":"2/8/26","changes":["Added the ability to import gearsets from ffxiv-gearing.","[BRD][DRG] Added Chinese translations."],"changes_zh":["ffxiv-gearing"," "]},{"date":"2/7/26","changes":["Added the ability to choose specific targets for damaging skills. Please see the \\"# of targets hit\\" help item for details.","Abilities imported from FFLogs now correctly track the number of targets hit."],"changes_zh":[""," FFLogs "],"level":"major"},{"date":"2/3/26","changes":["[DRG] Fixed a bug where Mirage Dive was not recognized by FFLogs imports."],"changes_zh":[" FFLogs "]},{"date":"1/28/26","changes":["[GNB] Fixed a bug where overcapping on cartridges after using Bloodfest did not raise a warning."]},{"date":"1/26/26","changes":["Updated for patch 7.41."],"changes_zh":["7.41"]},{"date":"1/25/26","changes":["[NIN] Fixed a bug where Mudras were sometimes not visible after FFLogs import."]},{"date":"1/24/26","changes":["[AST] Fixed a bug where Oracle's potency was missing."],"changes_zh":[""]},{"date":"1/23/26","changes":["[RPR] Fixed a bug where Soulsow could not be cast during Enshroud.","[MNK] Fixed a bug where Chakra spenders did not receive the effects of Brotherhood and Riddle of Fire."],"changes_zh":["","buff"]},{"date":"1/22/26","changes":["Added Chinese-language M9S, M10S, and M12S P2 tracks (translated by yuyuka)."],"changes_zh":[" M9SM10SM12S   "],"level":"major"},{"date":"1/20/26","changes":["Added Chinese-language M11S and M12S P1 tracks (translated by yuyuka)."],"changes_zh":[" M11S  M12S   "]},{"date":"1/19/26","changes":["Added a user manual. You can find it at xivintheshell.com/manual, in the intro section, or in the links at the top right of the page."],"changes_zh":[" xivintheshell.com/manual"],"level":"major"},{"date":"1/17/26","changes":["Fixed a bug where the piety stat could not be configured."]},{"date":"1/15/26","changes":["Added English-language M12S P1 tracks. All Arcadion Heavyweight fights now have tracks. Happy planning!"]},{"date":"1/14/26","changes":["Added English-language M11S tracks.","Added English-language M12S P2 tracks."]},{"date":"1/13/26","changes":["Added Vamp Stomp floor bat explosion timings to M9S tracks.","Added English-language M10S tracks."]},{"date":"1/12/26","changes":["Added English-language M9S tracks.","[RPR] Fixed a bug where Slice had incorrect potency."]},{"date":"1/11/26","changes":["[SCH] Fixed a bug where using Adloquium, Succor, or Concitation under the effect of Recitation consumed MP.","[BLU] Enabled FFLogs import.","Fixed a bug where importing an FFLogs report link with a fight ID would sometimes not pick the specified fight.","Removed marker presets for M5S-M8S from current content. These can still be found in the \\"archive\\" section of marker presets.","Limited the maximum marker track number to 20."]},{"date":"1/5/26","changes":["[NIN] Fixed a bug where using Doton under the effect of Ten Chi Jin did not apply AoE damage.","New developer blog post (English only): https://blog.xivintheshell.com/posts/the-night-before-heavyweight/"]},{"date":"1/2/26","changes":["[MCH] Adjusted the potency of Wildfire to reflect its inability to CDH.","[SCH][AST] Fixed a bug where DoT effects with no on-hit potency did not receive the player's own Chain Stratagem or Divination buffs.","[DRK] Fixed a bug where Living Shadow granted Scorn below level 100."]},{"date":"12/31/25","changes":["Fixed a visual bug where deleting a marker did not set the correct marker type in the marker creation menu.","[SCH] Fixed a bug where Sacred Soil incorrectly had a 30-second duration.","[SCH] Fixed a bug where Expedient did not grant buffs."]},{"date":"12/30/25","changes":["Changed font specification to improve display on computers with Chinese browser/OS.","Updated the site to automatically use Chinese if your browser is set to use it. Manually using the language selector overrides this.","[BLM] Fixed a bug where overriding the initial AF/UI state gave an extra Polyglot stack."],"changes_zh":["/","",".",""]},{"date":"12/29/25","changes":["[SAM] Added missing application delay values for Hissatsu: Shinten, Kyuten, Gyoten, Yaten, Senei, and Guren.","Updated export to Ama's combat sim to use Grade 4 Gemdraughts for potions.","Added support QQ group to Introductions section."],"changes_zh":["QQ","changelog"]},{"date":"12/26/25","changes":["[AST] Fixed a bug where Stellar Detonation could be repeatedly cast.","[AST] Fixed a bug where automatically-detonated Earthly Star did not receive a pet potency modifier."]},{"date":"12/22/25","changes":["[WAR] Fixed Inner Release being unusable before combat."]},{"date":"12/21/25","changes":["Fixed a bug where importing from FFLogs while resource overrides were active for a different job would crash the site.","[SMN] Fixed a bug where SMN logs could not be imported."]},{"date":"12/19/25","changes":["[RDM] Fixed log imports with Enchanted melee combo actions under the effect of Manafication.","Fixed a bug where importing from FFLogs would sometimes crash the site.","[BRD] Fixed a bug where auto-attacks appeared as an action in log import."]},{"date":"12/16/25","changes":["Updated for patch 7.4."],"changes_zh":["7.4"],"level":"major"},{"date":"12/14/25","changes":["Fixed a bug where the graphical timeline did not render properly when fight markers were loaded and all timeline slots were filled."]},{"date":"12/10/25","changes":["Adjusted the layout of marker presets and input."],"changes_zh":[""]},{"date":"12/7/25","changes":["Adjusted the appearance of scroll bars in Firefox."]},{"date":"11/15/25","changes":["Consumables like Pilgrim's Potions and Super-Ethers in FFLogs imports now display as unknown skills instead of Tinctures."]},{"date":"11/11/25","changes":["Fixed a bug where timeline skill tooltips would be acidentally cut off.","[SCH] Fixed a bug where Energy Drain and Physick were not recognized during log import."],"changes_zh":["","log"]},{"date":"11/7/25","changes":["Added the ability to import fights from FFLogs! You can find it in the Import/Export tab at the bottom of the page.","[WAR] Fixed a typo in the name of Storm's Path and Storm's Eye"],"changes_zh":["FFLogs/"],"level":"major"},{"date":"10/13/25","changes":["Added tracks for The Final Verse (Quantum) Q40."],"level":"minor"},{"date":"9/29/25","changes":["Updated the text of the timeline editor help tooltip.","New developer blog post (English only): https://blog.xivintheshell.com/posts/progressive-ux-improvements/"],"changes_zh":[""],"level":"minor"},{"date":"9/20/25","changes":["[!] Skills can now be inserted in the middle of a timeline.","[!] Pressing backspace/delete now deletes only the selected skills.","Using the up and down arrow keys changes the selected skills.","Most actions can now be undone/redone with ctrl/cmd+z and ctrl/cmd+y.","Actions can now be copy/pasted both within and outside the site (see \\"Settings\\" at the bottom of the page for details).","Adjusted the appearance of some website elements on Firefox."],"changes_zh":["[!]","[!]backspacedelete","    ","ctrl/cmd+zctrl/cmd+y/","",""],"level":"major"},{"date":"9/14/25","changes":["Fixed a bug where certain config stats couldn't be changed."]},{"date":"9/12/25","changes":["Added an \\"apply\\" button to the configuration section, which can be used to change configuration without resetting the timeline."],"changes_zh":[""]},{"date":"9/8/25","changes":["Fixed a crash when loading xivgear/etro links from a job different from the active one.","Fixed an issue where speed effects and certain sps/sks values were displayed incorrectly at level 70 (this was only a cosmetic issue in the configuration panel).","Changing jobs now uses the last saved stats you set for that job.","Creating a new timeline with a different job will now use one of The Balance's best-in-slot gear sets for the current patch."]},{"date":"9/2/25","changes":["Added different tincture images for each job.","Timelines with invalid skill names can now be loaded."]},{"date":"9/1/25","changes":["Added DSR P2 markers from Caro."]},{"date":"8/28/25","changes":["[BRD] Fixed typos in the names of Apex Arrow, The Wanderer's Minuet, and Rain of Death.","[BRD] Export to Ama's combat sim now tracks codas for Radiant Finale and Radiant Encore.","Updated export to Ama's combat sim to include hard-coded STR stats for healer/caster auto-attacks."]},{"date":"8/19/25","changes":["[WHM] Fixed a bug where Lillies would continue to generate even when at full stacks.","Fixed a bug where clicking on the timeline ruler would not immediately display historical state."],"level":"minor"},{"date":"8/17/25","changes":["Changed timeline slot buttons to trigger only if the mouse was both pressed and released on top of them."],"level":"minor"},{"date":"8/11/25","changes":["Made some internal adjustments to the implementation of click/drag selection and skill arrangements.","[WAR] Fixed a bug where Decimate consumed 2 stacks of Inner Release, and failed to grant Burgeoning Fury.","[WAR] Fixed Storm's Eye using an incorrect application delay.","[WAR] Extended the duration of the Inner Release, Primal Rend Ready, and Primal Ruination buffs to match in-game behavior.","[NIN] Fixed a bug where using Gust Slash without an active combo incorrectly advanced combo state.","[NIN] Fixed a bug where damage from Doton ticks was not computed.","[NIN] Fixed a bug where using Katon under Ten Chi Jin did not trigger Hollow Nozuchi."],"level":"minor"},{"date":"8/10/25","changes":["[NIN] Fixed a bug where Ninjutsu abilities were not buffed by Kunai's Bane and Dokumori."],"level":"minor"},{"date":"8/8/25","changes":["Added quick links to our GitHub, Bluesky, and (new) developer blog.","Added Bluesky, the dev blog, and the legacy game version site to the links in the \\"about\\" section."],"level":"minor"},{"date":"8/4/25","changes":["Updated for patch 7.3."],"changes_zh":["7.3"],"level":"major"},{"date":"8/3/25","changes":["The active timeline slot is now saved across page reloads.","Click and drag to rearrange skills, both in the visual timeline and timeline editor table.","Click and drag on the background of the visual timeline to select multiple skills.","Use the \\"drag lock\\" switch to the right of the display settings tabs to disable click+drag behavior."],"changes_zh":["","","",""],"level":"major"},{"date":"7/27/25","changes":["Updated FPS adjustment preview tooltip to use GCD time instead of cast times."]},{"date":"7/26/25","changes":["[WHM][AST][SCH] Fixed a bug where Swiftcast's cooldown was set to 40s below level 100."]},{"date":"7/25/25","changes":["[SCH] Initial SCH implementation. Thanks to Caro for help with numbers and some mechanics.","That's every job now in the shell! Stay tuned for more features and improvements to come."],"changes_zh":["Caro",""],"level":"major"},{"date":"7/22/25","changes":["[DNC] Fixed a bug where Fountain and Bladeshower could grant Silken Flow when used without combo."]},{"date":"7/20/25","changes":["[VPR] Added initial support for VPR. Thanks to Verra for help testing.","[BLU] Using an action while Waning Nocturne or Diamondback are active now uses the action as soon as the debuff expires."],"changes_zh":[" Verra","\\"\\"\\"\\""],"level":"major"},{"date":"7/15/25","changes":["Fixed \\"real-time auto pause\\" display.","[GNB] Fixed a bug where Fated Circle broke combos."],"changes_zh":["\\"(\\"",""],"level":"minor"},{"date":"7/14/25","changes":["[BLU] Fixed a bug where Apokalypsis and Phantom Flurry's potencies were incorrect.","[BLU] Fixed a bug where Surpanakha's 30-second cooldown was not applied."],"changes_zh":["\\"\\"\\"\\"","\\"\\"30CD"],"level":"minor"},{"date":"7/10/25","changes":["[MNK] Now begins encounters with Formless Fist active by default.","[DRG][NIN] Fixed a bug where using combo actions out of sequence granted combo potency bonus.","[AST] Fixed Macrocosmos/Microcosmos."],"changes_zh":["\\"\\"","",""],"level":"minor"},{"date":"7/8/25","changes":["[AST] Added initial support for AST.","[WHM] Addd initial support for WHM.","[SAM][NIN][MNK] GCD calculations in the configuration panel now account for jobs' natural speed buffs."],"changes_zh":[" "," ","GCD"],"level":"major"},{"date":"7/5/25","changes":["[MNK] Added initial support for MNK."],"changes_zh":[" "],"level":"major"},{"date":"6/25/25","changes":["Fixed a bug where timestamps would not appear for wait events in the timeline editor.","Fixed a bug where selecting a skill in the visual canvas did not cause the editor table to scroll to its location."],"level":"minor"},{"date":"6/24/25","changes":["[NIN] Added initial support for NIN."],"changes_zh":[" "],"level":"major"},{"date":"6/19/25","changes":["[DRK] Added initial support for DRK."],"changes_zh":[" "],"level":"major"},{"date":"6/18/25","changes":["Fixed a bug where the \\"wait until timestamp\\" events would change times unexpectedly."],"changes_zh":["\\"\\""],"level":"minor"},{"date":"6/17/25","changes":["Fixed timestamps not appearing in the timeline editor when a new skill is added.","Fixed skill selections ending on \\"wait\\" events not rendering correctly in the graphical timeline.","Fixed skill tooltips in the graphical timeline not displaying AoE potency."],"changes_zh":["","\\"\\"","aoe"],"level":"minor"},{"date":"6/16/25","changes":["[BLU] Added support for Blue Mage."],"changes_zh":[""],"level":"minor"},{"date":"6/6/25","changes":["[GNB][SGE] Chinese localization."],"changes_zh":[""],"level":"minor"},{"date":"6/3/25","changes":["Added the ability to save invalid timelines on the visual canvas. Changes in the timeline editor now reflect in the graphical timeline as well.","The \\"jump to timestamp\\" and \\"wait for MP tick\\" buttons will now always look for the specified timestamp/next MP tick, even when actions are shifted in the timeline editor.","Added a \\"Clone timeline slot\\" button.","See our \\"known bugs\\" page on GitHub for limitations: https://github.com/xivintheshell/xivintheshell/wiki/Known-Bugs"],"changes_zh":["","","","GitHubhttps://github.com/xivintheshell/xivintheshell/wiki/Known-Bugs"],"level":"major"},{"date":"5/29/25","changes":["[PLD] Chinese localization adjustments.","[SMN] Chinese localization; fix summon lock bar not showing progress."],"changes_zh":["",""],"level":"minor"},{"date":"5/28/25","changes":["[PLD] Chinese localization first draft."],"changes_zh":[""],"level":"minor"},{"date":"5/27/25","changes":["[BRD][MCH][SMN] Adjusted AoE potencies to reflect patch 7.25."],"changes_zh":["7.25"],"level":"minor"},{"date":"5/26/25","changes":["Fixed a bug where damage log CSV export didn't work (thanks ryxiv)."],"level":"minor"},{"date":"5/23/25","changes":["Adjusted the calculations for the effect of crit/DH party buffs on auto-crit/DH hits, like PCT's Hammer combo.","Fixed a bug with export to Ama's combat sim where Chain Stratagem and Dokumori would not apply to the boss."],"changes_zh":["","Fixed a bug with export to Ama's combat sim where Chain Stratagem and Dokumori would not apply to the boss."],"level":"minor"},{"date":"5/18/25","changes":["Updated the site to automatically use dark mode if your system is set to use it. Manually using the theme selector overrides this.","[GNB] Fixed a typo where \\"Lightning Shot\\" was incorrectly called \\"Lightning Shock.\\"","[GNB] Updated the application delay of Trajectory from 0.22 to 0.66 to match the current version of the game."],"level":"minor"},{"date":"5/17/25","changes":["We've made some big updates to the tools we use to build XIV in the Shell. The site should work the same as before, but if you notice anything broken or slow, please let us know posthaste.","We're planning on adding some large features in the near feature, so we've also made the changelog more prominent in anticipation. Please look forward to it."],"changes_zh":["XIV in the Shell",""],"level":"major"},{"date":"5/10/25","changes":["[PLD] Added initial support for PLD"],"changes_zh":[" "],"level":"major"},{"date":"5/9/25","changes":["[RPR] Fixed a bug where Regress wasn't usable in enshroud","[RPR] Fixed a bug where Grim Swathe was replaced with Lemure's Slice instead of Lemure's Scythe","[RPR] Fixed a bug where Perfectio was usable in enshroud","[RPR] Fixed a bug where Executioner's Gibbet/Gallows weren't replaced with Void/Cross Reaping while in enshroud","[SMN] Fixed a bug where Slipstream's initial hit falloff was displayed incorrectly in the DoT table (thanks omor1)","[SMN] Fixed the potency of Mountain Buster (was incorrectly listed as 170 instead of 160, thanks omor1)"]},{"date":"5/2/25","changes":["Changed Ama's combat sim export to disable auto-attacks for healer/caster jobs."]},{"date":"4/28/25","changes":["Refactored cooldown logic. Changes should not affect end users, but let us know if anything is off.","Added a few missing translations"]},{"date":"4/21/25","changes":["Updated compatibility with Ama's combat sim for newly-supported jobs."]},{"date":"4/17/25","changes":["[RPR] Added a button to gain +10 Soul Gauge to simulate a target dying with Death's Design active","[BRD] Fixed a bug where Iron Jaws checked the dot status at application time instead of confirmation time (thanks Yumiya)","[BRD] Fixed a bug where Empyreal Arrow applied repertoire at application time instead of confirmation time (also thanks Yumiya)"]},{"date":"4/13/25","changes":["Added English-language markers for M8S"]},{"date":"4/7/25","changes":["Added English-language markers for M7S"]},{"date":"4/6/25","changes":["Added English-language markers for M5S + M6S"]},{"date":"3/29/25","changes":["[BLM] Removed \\"outdated\\" status"]},{"date":"3/26/25","changes":["Added user survey link"]},{"date":"3/24/25","changes":["We have updated the site in accordance with the 7.2 patch notes. Goodbye to the Enochian timer o7","[BLM] will remain in \\"outdated\\" status until we have a change to play with the changes in-game.","Since most jobs received only potency changes, your old 7.1 plans should work, but as usual, please let us know if anything seems incorrect."]},{"date":"3/20/25","changes":["[DNC] Fixed an issue where the icons for Finishing Move Ready and Last Dance Ready were swapped, and an issue where Last Dance Ready was not consumed by Last Dance (thank you bluke)"]},{"date":"3/16/25","changes":["Fixed an issue where resource toggles were shown in the timeline editor with their internal keys rather than localized text.","Fixed mistakes in DoT effect override calculations.","In anticipation of patch 7.2, we're working on some changes to make it easier to migrate timelines after site or game changes. The following things have changed:","- Single-clicking an action will now try to use it as soon as the current animation lock/skill cooldown is over (this used to require double-clicking). If the action cannot be used, a wait is automatically added to the timeilne.","- In \\"manual\\" control mode, you no longer need to press space to advance past an action's animation lock (it will now advance automatically when a skill is used).","- Displayed wait durations are now always calculated from the end of the previous animation lock. Any existing timelines will automatically be adjusted--the shown wait times may be different, but the times where actions are used will remain the same.","- Skill sequence presets now include wait durations. This lets you load/save sequences that use late weaves or wait for MP ticks (assuming ticks still line up correctly).","As a consequence of these changes, you actually might now be able to load BLM timelines from 7.05/7.0 that previously were broken as a result of Despair becoming instant. Despair will still be instant and other buff usage will be unchanged, but the time between abilities should be correct.","These changes are very large, and while we've tested to make sure they won't break your existing timelines, there might still be some bugs that slipped through the cracks. As always, please reach out to us if you encounter any problems."]},{"date":"3/1/25","changes":["Make it so that you can only delete the currently active slot, to hopefully reduce the chance of accidentally deleting a slot when switching"]},{"date":"2/26/25","changes":["Updated the GCD formula because the old formula may be off by 0.01s when there is haste buff. Thank you Yuyuka for spotting the error. Note: old timelines (including timelines in browser localStorage) aren't affected; only newly created timelines use the new formula."]},{"date":"2/22/25","changes":["Added Queen Eternal markers by "]},{"date":"2/21/25","changes":["[BRD][GNB][SMN] Removed testing tag"]},{"date":"2/20/25","changes":["[SGE] Initial implementation for SGE","- Some rough edges still exist around Krasis' healing potency modification and Eukrasian shield handling.","- Basic functionality should be reasonably complete.","[RDM] Fixed a bug where Manafication could be used before combat"]},{"date":"2/16/25","changes":["[SAM] Fixed Hagakure only being usable at 3 sen"]},{"date":"2/15/25","changes":["[BLM] Fixed Manafont CD at lvl80 and below: should be 120s"]},{"date":"2/13/25","changes":["Updated English FRU tracks to more accurately reflect downtime between phases. We previously used the \\"death\\" event in a log as the end of a phase, but it turns out this is inaccurate as the last damage application to the boss occurs ~2 seconds before its recorded death.","- P1 to P2 untargetable duration increased by 2 seconds","- P2 to intermission untargetable duration decreased to align with the \\"crystals become targetable\\" mark","- Intermission to P3 downtime increased to match Gaia's attack killing the crystal","In order to not break existing timelines, the preset EN full fight track now treats P1 as dying 2 seconds before the end of the enrage cast. The start times of all phases are unaffected."]},{"date":"2/4/25","changes":["[SAM] Fixed AoE combo actions not ending the combo","[DRG] Added initial support for DRG"]},{"date":"2/2/25","changes":["[BRD][DNC] Fixed bonuses given from certain crit/DH buffs not applying in total potency calculations"]},{"date":"2/1/25","changes":["[WAR][SAM][RPR][MCH][DNC] Implemented localization for some recently added jobs"]},{"date":"1/27/25","changes":["[SMN] Added initial support for SMN"]},{"date":"1/26/25","changes":["[WAR][GNB] Fixed missing icon for tank LB3s"]},{"date":"1/18/25","changes":["[GNB] Added initial support for GNB"]},{"date":"1/17/25","changes":["Added \\"move end of selection to start of selection\\" button to the timeline editor"]},{"date":"1/12/25","changes":["[RPR] Fixed a bug where oGCDs would improperly consume Reaver/Executioner stacks"]},{"date":"1/8/25","changes":["[WAR] Fixed surging tempest text not showing up in potency modifier tooltip","[MCH] Fixed Overheated potency modifier not being applied"]},{"date":"1/5/25","changes":["Fixed a bug where multi-target spells lost their target counts when using the timeline editor"]},{"date":"1/4/25","changes":["Added support for multi-target abilities"]},{"date":"1/3/25","changes":["[WAR][SAM][RPR] Removed testing tag"]},{"date":"1/1/25","changes":["Added combined English FRU tracks"]},{"date":"12/28/24","changes":["[PCT] Fixed warning for Palette Gauge overcap"]},{"date":"12/24/24","changes":["[MCH] Added support for Flamethrower"]},{"date":"12/22/24","changes":["[BRD] Added initial support for BRD","Overhaul DoT tracking to provide better usage statistics","[BLM] Added High Thunder II"]},{"date":"12/20/24","changes":["Fixed stats tables not including party buff potencies for most skills","Removed flank/rear positional resources for non-melee jobs"]},{"date":"12/19/24","changes":["[WAR] Adjusted animation lock of Primal Rend","Fixed Down for the Count timing in FRU P4 (thanks xi12570)"]},{"date":"12/16/24","changes":["Limit breaks for all jobs!","[MCH][DNC] Removed testing tag","Updated \\"About this tool\\" section","More underlying implementation changes","[PCT] Made Hammer combo expire with Hammer Time buff (changed in 7.1)"]},{"date":"12/13/24","changes":["Fixed sometimes unable to use skills in manual mode with double click","[RPR] Added timer for Immortal Sacrifice","[RPR] Removed enhanced reapings whenever shroud is exited","[RPR] Separated cooldowns of Sacrificium and Lemure's Slice","[RPR] Fixed sks scaling","[WAR] Added initial WAR support"]},{"date":"12/12/24","changes":["Updated English FRU tracks and added P4 + P5"]},{"date":"12/8/24","changes":["Updated Chinese FRU tracks to latest (12/8 ver)","Make stats tables only include selected skills when there is selection"]},{"date":"12/7/24","changes":["Updated positional buff icons","Misc cleanups and optimizations (hey devs: rerun npm install)","[BLM] Fixed Retrace button not changing back to LL if LL is disabled when the buff drops"]},{"date":"12/5/24","changes":["Updated Chinese FRU tracks to latest (12/2 version)","Additional Chinese localization changes (preset lines; initial resource overrides section; many resource names)","New skill icon progress bar visuals "]},{"date":"12/4/24","changes":["Added English FRU P3 tracks by Yara","[RDM] Fixed Swiftcast being consumed before Dualcast when both are active"]},{"date":"12/2/24","changes":["Added English FRU P2 tracks by Yara","Fixed a bug where 'Load tracks starting at timestamp' did not accept some time formats","[RDM] Removed the 'testing' label"]},{"date":"12/1/24","changes":["Updated full FRU tracks in Chinese by  & czmm"]},{"date":"11/30/24","changes":["[MCH] Fixed Scattergun's heat generation (thanks Kairos)","[PCT] Fixed Monochrome Tones appearing when synced to level 80 and other internal trait logic (thanks misterperson)"]},{"date":"11/29/24","changes":["[MCH] Fixed bugs with MCH Overheat consumption on AoE abilities (thanks FloatingGhost)"]},{"date":"11/28/24","changes":["Added some Chinese tracks (M1S-M4S, FRU before P2.5)"]},{"date":"11/27/24","changes":["Added the ability to override stacks to 0 for 1-stack resources that start present by default","Added preliminary FRU P1 tracks by Yara"]},{"date":"11/26/24","changes":["Added the ability to load marker tracks starting from a particular timestamp"]},{"date":"11/25/24","changes":["[RPR] Added initial RPR support"]},{"date":"11/24/24","changes":["[MCH] Added initial MCH support"]},{"date":"11/21/24","changes":["[SAM] Fixed a bug where Fuka haste was doubly applied","[SAM] Added GCD under Fuka in playback control"]},{"date":"11/20/24","changes":["[DNC] Added initial DNC support","[SAM] Added initial SAM support (thank you Sterling Sylva for the initial work)","Added support for skill speed in addition to spell speed"]},{"date":"11/17/24","changes":["[RDM] Fix Manafication CD (thanks )","[all casters] Fix Surecast duration: previously 10s, now 6.5s (ty erii)"]},{"date":"11/16/24","changes":["Make DET use main stat formula and default to 440","Add hyperlinks for xivgear and etro"]},{"date":"11/15/24","changes":["(thank you Yuyuka for reporting a bunch of RDM bugs)","[RDM] Added some additional warnings on unintended buff drops, overwrites, and combo breaks","[RDM] Fixed the duration of the Acceleration buff","[RDM] Fixed the MP costs of Veraero II/Verthunder II","[RDM] Fixed Manafication failing to interrupt combos","[RDM] Fixed Manafication being usable out of combat","[RDM] Fixed Enchanted Reprise clearing mana stacks","[RDM] Made Prefulgence and Vice of Thorns into button replacements"]},{"date":"11/14/24","changes":["(thank you Wan Shott for reporting a bunch of RDM bugs)","[RDM] Fixed bugs where Verfire and Grand Impact didn't grant correct mana","[RDM] Fixed a bug where it was possible to use un-enchanted Moulinet under certain incorrect conditions","mark newly-implemented jobs as in testing and display a warning message when using those jobs"]},{"date":"11/13/24","changes":["Fixed a bug where party buff potencies were not displayed","[PCT] Fixed a bug where using two hammer combos within 30s of each other caused the combo to break","[RDM] Fixed a bug where level synced RDM still received Grand Impact Ready from Acceleration","[RDM] Fixed a bug where Acceleration did not always grant a Verstone/Verfire proc","[RDM] Fixed a bug where certain role buffs were not being displayed on the hotbar","[RDM] Fixed a bug where buffs were overlapping the hotbar","[RDM] Fixed a bug where Contre Sixte's cooldown was improperly affected by traits","Removed debug and implementation notes sections (see repository wiki for implementation notes)"]},{"date":"11/12/24","changes":["Initial XIV in the Shell! Supporting patch 7.1 BLM and PCT, plus preliminary RDM"]}]`);function sT(){return zi[0].date}function _b(e){const t=Nt();return l.jsxs("div",{className:"changelogGroup",children:[l.jsx("div",{children:e.date}),l.jsx("div",{children:N({en:l.jsx(l.Fragment,{children:e.changes.map((n,a)=>l.jsx("div",{className:"changelogLine",style:{color:n.substring(1,5)==="BETA"?t.warning:t.text},children:n},a))}),zh:e.changes_zh!==void 0?l.jsx(l.Fragment,{children:e.changes_zh.map((n,a)=>l.jsx("div",{className:"changelogLine",style:{color:n.substring(1,5)==="BETA"?t.warning:t.text},children:n},a))}):void 0})})]})}const lz=`
.changelogGroup {
	margin-top: 1em;
	margin-bottom: 1em;
}

.changelogLine {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
	margin-left: 0.5em;
}
`;function sz(){let e,t,n={};const a=C.useRef(5),[s,c]=C.useState(!1),[d,f]=C.useState(!1),h=C.useContext(yn)==="Light",m=Nt();C.useEffect(()=>{let g=pt("changelogLastRead"),_=pt("changelogLastReadChangeCount");!Y1&&(g===null||_===null)&&(g="5/10/25",_="1");const I=g===null||_===null||g===zi[0].date&&_===zi[0].changes.length.toString();if(c(I),g!==null&&_!==null){if(!I){let D=0,O=!1;for(;D<zi.length-1;D++){if(g===zi[D].date){_!==zi[D].changes.length.toString()&&D++;break}O=O||zi[D].level==="major"}f(O),a.current=D}}else Ct("changelogLastRead",zi[0].date),Ct("changelogLastReadChangeCount",zi[0].changes.length.toString())},[]);const R=g=>{g||(a.current=5,s||(Ct("changelogLastRead",zi[0].date),Ct("changelogLastReadChangeCount",zi[0].changes.length.toString())),c(!0))};if(s)e=N({en:"Changelog",zh:"",ja:""}),t="";else{const g=Nt();e=N({en:"Changelog (new updates"+(d?"!!":"")+")",zh:""+(d?"":"")+""}),t="!",d?n={color:g.warning,fontWeight:"bold"}:n={fontWeight:"bold"}}const T=l.jsx("div",{className:"clickable",children:l.jsxs("span",{style:n,children:[l.jsxs("span",{children:[t," "]}),l.jsx("span",{className:"clickableLinkLike",children:e})]})}),S=l.jsx(vb,{className:"dialogExit",style:{color:m.bgHighContrast}});return l.jsxs(l.Fragment,{children:[l.jsx("style",{children:lz}),l.jsxs(pv,{onOpenChange:R,children:[l.jsx(Cv,{render:T,nativeButton:!1}),l.jsxs(Sv,{children:[l.jsx(hv,{className:"Backdrop",style:{opacity:h?.2:.7}}),l.jsxs(Tv,{className:"Popup visibleScrollbar",id:"changelogPopup",style:{backgroundColor:m.background,border:"1px solid "+m.bgMediumContrast,color:m.text},children:[l.jsx(Nv,{render:l.jsx("h3",{children:e})}),l.jsx(Ev,{render:S,nativeButton:!1}),l.jsx(Av,{className:"Description",render:l.jsx(rz,{hiddenStartIndex:a.current,newChanges:!s})})]})]})]})]})}function rz(e){const t=[],n=[];for(let m=0;m<e.hiddenStartIndex;m++)t.push(_b(zi[m]));for(let m=e.hiddenStartIndex;m<zi.length;m++)n.push(_b(zi[m]));const a=N({en:e.newChanges?"New Changes":"Recent Changes",zh:e.newChanges?"":""}),s=l.jsxs("div",{style:{marginTop:10,marginBottom:10},children:[l.jsx("span",{style:{marginTop:10,marginBottom:10},children:l.jsx("b",{children:a})}),l.jsx("div",{style:{margin:10,paddingLeft:6},children:t.map((m,R)=>l.jsx("div",{children:m},R))})]}),[c,d]=C.useState(!1),f=N({en:"Older Changes",zh:""}),h=l.jsxs("div",{style:{marginTop:10,marginBottom:10},children:[l.jsx(Zs,{content:l.jsxs("span",{children:[l.jsx("span",{children:c?"- ":"+ "}),l.jsx("b",{children:f})]}),onClickFn:()=>d(!c)}),l.jsx("div",{style:{position:"relative",display:c?"block":"none"},children:l.jsxs("div",{style:{margin:10,paddingLeft:6,marginBottom:20},children:[l.jsx("div",{children:n.map((m,R)=>l.jsx("div",{children:m},R))}),l.jsxs("div",{children:["For older changelog entries before the BLM/PCT in the Shell rejoining, see",l.jsx("b",{children:"About this site/Changelog"})," on the old sites:",l.jsx("a",{target:"_blank",rel:"noreferrer",href:"https://miyehn.me/ffxiv-blm-rotation/",children:"BLM in the Shell"}),",",l.jsx("a",{target:"_blank",rel:"noreferrer",href:"https://picto.zqsz.me/",children:"PCT in the Shell"})]})]})})]});return l.jsxs("div",{children:[s,h]})}const rT=Ju?"https://beta.xivintheshell.com":"https://xivintheshell.com",ba="https://github.com/xivintheshell/xivintheshell",Js="https://bsky.app/profile/xivintheshell.com",Ed="https://blog.xivintheshell.com",er="https://discord.com/channels/277897135515762698/1307922201726685236",qT="913451994",cT="https://discord.gg/thebalanceffxiv",cz=()=>l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"paragraph",children:N({en:l.jsxs(l.Fragment,{children:[l.jsx("span",{children:"This tool was initially Black Mage in the Shell, "}),l.jsxs("span",{children:["ideated by ",l.jsx("b",{children:"Eshiya (Galahad)"})," and developed by ",l.jsx("b",{children:"miyehn"})," specifically for BLM during Endwalker since around February 2022."," "]}),l.jsx("span",{children:"After Dawntrail's release, it was expanded to support other jobs and is now maintained by a small team of developers:"})]}),zh:l.jsxs(l.Fragment,{children:[l.jsx("span",{children:"miyehn202226.x"}),l.jsx("span",{children:"7.0"})]})})}),N({en:l.jsxs("ul",{children:[l.jsxs("li",{children:["Tool design and core systems: ",l.jsx("b",{children:"shanzhe"}),", ",l.jsx("b",{children:"miyehn"}),", ",l.jsx("b",{children:"Turtle"}),","," ",l.jsx("b",{children:"Akairyu"})]}),l.jsxs("li",{children:["BLM: ",l.jsx("b",{children:"shanzhe"}),", ",l.jsx("b",{children:"Akairyu"}),", ",l.jsx("b",{children:"Turtle"}),", ",l.jsx("b",{children:"miyehn"})]}),l.jsxs("li",{children:["PCT, RDM, SMN, DRK, NIN, MNK, WHM, AST, SCH: ",l.jsx("b",{children:"shanzhe"})]}),l.jsxs("li",{children:["SAM: ",l.jsx("b",{children:"Sterling"}),", ",l.jsx("b",{children:"shanzhe"})]}),l.jsxs("li",{children:["DNC, MCH, BRD, SGE: ",l.jsx("b",{children:"Akairyu"})]}),l.jsxs("li",{children:["RPR: ",l.jsx("b",{children:"Honey B. Lovely's Favorite Bee"})]}),l.jsxs("li",{children:["WAR: ",l.jsx("b",{children:"misterperson"})]}),l.jsxs("li",{children:["GNB, DRG, PLD: ",l.jsx("b",{children:"Sterling"})]}),l.jsxs("li",{children:["BLU: ",l.jsx("b",{children:""})]}),l.jsxs("li",{children:["VPR: ",l.jsx("b",{children:"shanzhe"}),", ",l.jsx("b",{children:"misterperson"})]}),l.jsxs("li",{children:["Framework for adding new jobs: ",l.jsx("b",{children:"shanzhe"})]}),l.jsxs("li",{children:["Chinese localization: ",l.jsx("b",{children:"miyehn"}),", ",l.jsx("b",{children:"Eshiya"}),", ",l.jsx("b",{children:"Yuyuka"}),", ",l.jsx("b",{children:"shanzhe"}),","," ",l.jsx("b",{children:""}),", ",l.jsx("b",{children:""}),", ",l.jsx("b",{children:""}),", ",l.jsx("b",{children:""}),", ",l.jsx("b",{children:""}),", ",l.jsx("b",{children:""})]})]}),zh:l.jsxs("ul",{children:[l.jsxs("li",{children:["",l.jsx("b",{children:"shanzhe"}),"",l.jsx("b",{children:"miyehn"}),"",l.jsx("b",{children:"Turtle"}),"",l.jsx("b",{children:"Akairyu"})]}),l.jsxs("li",{children:["",l.jsx("b",{children:"shanzhe"}),"",l.jsx("b",{children:"Akairyu"}),"",l.jsx("b",{children:"Turtle"}),"",l.jsx("b",{children:"miyehn"})]}),l.jsxs("li",{children:["",l.jsx("b",{children:"shanzhe"})]}),l.jsxs("li",{children:["",l.jsx("b",{children:"Sterling"}),"",l.jsx("b",{children:"shanzhe"})]}),l.jsxs("li",{children:["",l.jsx("b",{children:"Akairyu"})]}),l.jsxs("li",{children:["",l.jsx("b",{children:"Honey B. Lovely's Favorite Bee"})]}),l.jsxs("li",{children:["",l.jsx("b",{children:"misterperson"})]}),l.jsxs("li",{children:["",l.jsx("b",{children:"Sterling"})]}),l.jsxs("li",{children:["",l.jsx("b",{children:""})]}),l.jsxs("li",{children:["",l.jsx("b",{children:"shanzhe"}),"",l.jsx("b",{children:"misterperson"})]}),l.jsxs("li",{children:["",l.jsx("b",{children:"shanzhe"})]}),l.jsxs("li",{children:["",l.jsx("b",{children:"miyehn"}),"",l.jsx("b",{children:""}),"",l.jsx("b",{children:""}),"",l.jsx("b",{children:"shanzhe"}),"",l.jsx("b",{children:""}),"",l.jsx("b",{children:""}),"",l.jsx("b",{children:""}),"",l.jsx("b",{children:""}),"",l.jsx("b",{children:""}),"",l.jsx("b",{children:""})]})]})}),l.jsx("div",{className:"paragraph",children:N({en:"And many thanks to Yara, Spider, Santa, players in , kiyozero, czmm, and other players and groups who contributed feature suggestions, timeline markers, bug reports, etc.",zh:"YaraSpiderSantakiyozeroczmmbug"})}),N({en:l.jsxs("div",{className:"paragraph",children:["If you have questions or would like to provide feedback, you can message in"," ",l.jsx("a",{target:"_blank",href:er,rel:"noreferrer",children:"this channel in The Balance"})," ",'(requires the "Misc. Support" role), or join QQ group ',qT,' where you can use Chinese. In case of sending a bug report, attaching the fight record (download "fight.txt" from the bottom or name it anything else) would be very helpful.']}),zh:l.jsxs("div",{className:"paragraph",children:[l.jsxs("span",{children:["bugQQ:"," ",qT," Discord The Balance ",l.jsx("a",{target:"_blank",href:er,rel:"noreferrer",children:""}),' "Misc. Support" role ']}),l.jsx("span",{children:"bugbugfight.txt"})]}),ja:l.jsx("div",{className:"paragraph",children:"[outdated (ja)] Discordmiyehnellyn.waterford@gmail.com fight.txt"})})]});function uz(e){const t={marginBottom:5},n=Nt(),a=e.job,s=d=>l.jsx(oi,{text:d}),c=s(navigator.platform.includes("Mac")?"cmd":"ctrl");return l.jsxs("div",{children:[l.jsx(sz,{}),l.jsx(Vl,{defaultShow:!0,title:"instructions",titleNode:l.jsxs("span",{children:[N({en:"Instructions ",zh:" ",ja:" "}),l.jsx(qe,{topic:"expandable",content:N({en:"click me to expand or collapse",zh:"/",ja:""})})]}),content:l.jsxs("div",{children:[l.jsx("div",{className:"paragraph",children:l.jsx("b",{children:N({en:"General Usage",zh:"",ja:""})})}),N({en:l.jsxs("ul",{children:[l.jsxs("li",{style:t,children:["Set your stats in ",l.jsx("b",{children:"Config"})," on the right, then"," ",s("apply and reset"),"."]}),l.jsx("li",{style:t,children:"Click on a skill to use it at the selected point in the timeline. The simulation will always jump to when the last animation lock ends and the skill's cooldown becomes available."}),l.jsxs("li",{style:t,children:["Press ",s("u")," to delete the last added action (effective when not running in real-time). Use ",c,"+",s("z"),"and ",c,"+",s("y")," to undo/redo."]}),l.jsx("li",{style:t,children:"Click on a buff applied to self to remove it. Clicking on certain ground-targeted buffs like BLM's Ley Lines, DRK's Salt and Darkness, and SCH's Sacred Soil temporarily disables their effects. Clicking again re-enables them."}),l.jsx("li",{style:t,children:'Click and drag in the visual timeline or use the "Timeline Editor" tab at the bottom of the page to re-arrange skills.'})]}),zh:l.jsxs("ul",{children:[l.jsxs("li",{style:t,children:["",l.jsx("b",{children:""}),""," ",s("")," "]}),l.jsx("li",{style:t,children:"CD"}),l.jsxs("li",{style:t,children:[" ",s("u")," "," ",c,"+",s("z"),"  ",c,"+",s("y")," "]}),l.jsx("li",{style:t,children:"buffbuff"}),l.jsx("li",{style:t,children:""})]}),ja:l.jsxs("ul",{children:[l.jsxs("li",{style:t,children:["",l.jsx("b",{children:""}),"",l.jsx(oi,{text:""}),""]}),l.jsx("li",{style:t,children:""}),l.jsxs("li",{style:t,children:[l.jsx(oi,{text:"u"}),""]}),l.jsx("li",{style:t,children:""})]})}),l.jsx("div",{className:"paragraph",children:l.jsx("b",{children:N({en:"Timeline",zh:"",ja:""})})}),N({en:l.jsxs("ul",{children:[l.jsxs("li",{style:t,children:["Holding ",s("shift")," lets you scroll horizontally."]}),l.jsxs("li",{style:t,children:["Click to select/unselect a single skill on the timeline."," ",s("shift"),"+click or click/drag to select a sequence of skills."]}),l.jsxs("li",{style:t,children:["Use ",s("backspace")," or ",s("delete")," to delete the selected skill(s)."]}),l.jsxs("li",{style:t,children:["Use ",c,"+",s("c")," and ",c,"+",s("v")," to copy/paste skills."]}),l.jsx("li",{style:t,children:"Click on the timeline's ruler-like header to view historical game states. Click on somewhere else on the timeline to return to the most recent game state."})]}),zh:l.jsxs("ul",{children:[l.jsxs("li",{style:t,children:[" ",s("shift")," "]}),l.jsxs("li",{style:t,children:[" shift  ",s("shift")," ",""]}),l.jsxs("li",{style:t,children:[" ",s("backspace"),"  ",s("delete")," "]}),l.jsxs("li",{style:t,children:[" ",c,"+",s("c"),"  ",c,"+",s("v")," ",""]}),l.jsx("li",{style:t,children:""})]}),ja:l.jsxs("ul",{children:[l.jsxs("li",{style:t,children:[l.jsx(oi,{text:"shift"}),""]}),l.jsxs("li",{style:t,children:["",l.jsx(oi,{text:"shift"}),""]}),l.jsxs("li",{style:t,children:[l.jsx(oi,{text:"backspace"}),"",l.jsx(oi,{text:"delete"}),""]}),l.jsxs("li",{style:t,children:["",l.jsx("b",{style:{color:"darkorange"},children:""})," "]})]})}),N({en:l.jsxs("div",{className:"paragraph",children:[l.jsx("span",{style:{color:n.fileDownload,cursor:"pointer"},children:l.jsx("u",{children:"[these]"})})," ","are file download links. Click to download, or right click to choose save location."]}),zh:l.jsxs("div",{className:"paragraph",children:[l.jsx("span",{style:{color:n.fileDownload,cursor:"pointer"},children:l.jsx("u",{children:"[]"})})," ",""]}),ja:l.jsxs("div",{className:"paragraph",children:[l.jsx("span",{style:{color:n.fileDownload,cursor:"pointer"},children:l.jsx("u",{children:"[]"})}),""]})}),N({en:l.jsxs("div",{className:"paragraph",children:["You can save/load fight records at the bottom, under the"," ",l.jsx("b",{children:"Import/Export"})," tab. Most edits are also automatically saved in your browser cache, so it's generally okay to refresh the page and not worry about losing progress."]}),zh:l.jsxs("div",{className:"paragraph",children:[" ",l.jsx("b",{children:"/"})," ","/"]})}),N({en:l.jsxs("div",{className:"paragraph",children:["Hover over ",l.jsx(qe,{topic:"sampleTips",content:"sample tip"})," ","everywhere to see more tips."]}),zh:l.jsxs("div",{className:"paragraph",children:[" ",l.jsx(qe,{topic:"sampleTips",content:""})," ",""]}),ja:l.jsxs("div",{className:"paragraph",children:[l.jsx(qe,{topic:"sampleTips",content:""}),""]})}),N({en:l.jsxs("div",{className:"paragraph",children:["For more detailed instructions, please refer to our"," ",l.jsx("a",{href:"/manual",children:"user manual"}),"."]}),zh:l.jsxs("div",{className:"paragraph",children:["",l.jsx("a",{href:"/manual",children:""}),""]})}),l.jsx("div",{className:"paragraph",style:{marginTop:16},children:l.jsx(Vl,{title:"Troubleshoot",titleNode:N({en:l.jsx("b",{children:"troubleshoot"}),zh:l.jsx("b",{children:""}),ja:l.jsx("b",{children:""})}),content:l.jsxs(l.Fragment,{children:[N({en:l.jsxs("div",{children:[l.jsx("div",{className:"paragraph",children:"I can't guarantee that my updates are always backward compatible. If your fight record files aren't loading properly but you don't understand why, contact me and I'll try my best to help."}),l.jsxs("div",{className:"paragraph",children:["If the browser cache is somehow messed up (likely due to invalid game states), this is how to reset it:",l.jsx("br",{}),"Enter this tool from"," ",l.jsx("b",{children:rT+"?{command}"})," replacing"," ",l.jsx("b",{children:"{command}"})," with one of the following:",l.jsxs("ul",{children:[l.jsxs("li",{style:t,children:[l.jsx("b",{children:"resetResourceOverrides"}),": delete all resource overrides and all actions on the current timeline."]}),l.jsxs("li",{style:t,children:[l.jsx("b",{children:"resetAll"}),": delete all browser-cached settings."]})]})]})]}),zh:l.jsxs("div",{children:[l.jsx("div",{className:"paragraph",children:""}),l.jsxs("div",{className:"paragraph",children:["",l.jsx("br",{}),"",l.jsx("b",{children:rT+"?{command}"}),"",l.jsx("b",{children:"{command}"}),"",l.jsxs("ul",{children:[l.jsxs("li",{style:t,children:[l.jsx("b",{children:"resetResourceOverrides"}),": "]}),l.jsxs("li",{style:t,children:[l.jsx("b",{children:"resetAll"}),": "]})]})]})]}),ja:l.jsxs("div",{children:[l.jsx("div",{className:"paragraph",children:""}),l.jsxs("div",{className:"paragraph",children:["",l.jsx("br",{}),l.jsx("b",{children:rT+"?{command}"})," ",l.jsx("b",{children:"{command}"})," ","",l.jsxs("ul",{children:[l.jsxs("li",{style:t,children:[l.jsx("b",{children:"resetResourceOverrides"}),": "]}),l.jsxs("li",{style:t,children:[l.jsx("b",{children:"resetAll"}),": "]})]})]})]})}),l.jsxs("div",{children:[N({en:"Or just: ",zh:""}),l.jsx("button",{className:"dangerButton",onClick:()=>{Lb(),window.location.reload()},children:N({en:"[DANGER!] clear browser cache and reload",zh:"[] ",ja:"[] "})})]})]})})})]})}),l.jsx(Vl,{defaultShow:!1,title:"About this tool",titleNode:N({en:"About this tool",zh:"",ja:""}),content:l.jsxs("div",{children:[l.jsx("div",{className:"paragraph",children:N({en:"This is a FFXIV simulator & rotation planner.",zh:"FF14/",ja:"FF14"})}),cz(),l.jsx("div",{className:"paragraph",children:N({en:"Some links:",zh:"",ja:""})}),N({en:l.jsxs("ul",{children:[l.jsx("li",{children:l.jsx("a",{href:ba,children:"Github repository"})}),l.jsxs("li",{children:[l.jsx("a",{href:Js,children:"Bluesky account"})," and our"," ",l.jsx("a",{href:Ed,children:"developer blog"})]}),l.jsxs("li",{children:[l.jsx("a",{href:"https://xivintheshell.github.io/legacy/",children:"XIV in the Shell (Legacy)"}),": a snapshot of this tool at the end of the previous major game patch (currently 7.25)."]}),l.jsxs("li",{children:[l.jsx("a",{href:"https://miyehn.me/ffxiv-blm-rotation-endwalker/",children:"Black Mage in the Shell (Endwalker)"}),": a snapshot of this tool at the end of Endwalker. It also contains some notable fight plans from Endwalker, as memoir."]}),l.jsxs("li",{children:[l.jsx("a",{href:"https://spide-r.github.io/ffxiv-blm-rotation/",children:"Black Mage in the Bozjan Shell"}),": a variation for Save the Queens areas, created by"," ",l.jsx("b",{children:"A'zhek Silvaire @ Zalera"})]}),l.jsx("li",{children:l.jsx("a",{href:"https://na.finalfantasyxiv.com/jobguide/battle/",children:"Official FFXIV job guides"})}),l.jsxs("li",{children:["The Balance's community"," ",l.jsx("a",{href:"https://www.thebalanceffxiv.com/",children:"job guides"})," and"," ",l.jsx("a",{href:cT,children:"Discord"})]})]}),zh:l.jsxs("ul",{children:[l.jsx("li",{children:l.jsx("a",{href:ba,children:"Github"})}),l.jsxs("li",{children:[l.jsx("a",{href:Js,children:""}),"",l.jsx("a",{href:Ed,children:""}),""]}),l.jsxs("li",{children:[l.jsx("a",{href:"https://xivintheshell.github.io/legacy/",children:""}),"FF147.25"]}),l.jsxs("li",{children:[l.jsx("a",{href:"https://miyehn.me/ffxiv-blm-rotation-endwalker/",children:"6.x"}),"6.x"]}),l.jsxs("li",{children:[l.jsx("a",{href:"https://spide-r.github.io/ffxiv-blm-rotation/",children:"Black Mage in the Bozjan Shell"}),": /"," ",l.jsx("b",{children:"A'zhek Silvaire @ Zalera"})]}),l.jsx("li",{children:l.jsx("a",{href:"https://na.finalfantasyxiv.com/jobguide/battle/",children:""})}),l.jsxs("li",{children:["The Balance",l.jsxs("a",{href:"https://www.thebalanceffxiv.com/",children:[" ",""]})," ",l.jsx("a",{href:cT,children:"Discord"})]})]}),ja:l.jsx("ul",{children:l.jsxs(l.Fragment,{children:[l.jsx("li",{children:l.jsx("a",{href:ba,children:"Github repository"})}),l.jsxs("li",{children:[l.jsx("a",{href:"https://spide-r.github.io/ffxiv-blm-rotation/",children:"Black Mage in the Bozjan Shell"}),": ",l.jsx("b",{children:"A'zhek Silvaire @ Zalera"})]}),l.jsx("li",{children:l.jsx("a",{href:"https://na.finalfantasyxiv.com/jobguide/blackmage/",children:"Official FFXIV black mage job guide"})}),l.jsxs("li",{children:[l.jsxs("a",{target:"_blank",href:cT,rel:"noreferrer",children:[a," resources channel on The Balance"]})," ","Discord"," "]})]})})})]})})]})}function dz(){const e=C.useContext(yn),t=Xl(e,"text");return l.jsxs("div",{style:{display:"inline-block",fontSize:16},children:[l.jsx("style",{children:`
		.linkOption {
			display: inline-block;
			cursor: pointer;
			vertical-align: top;
			margin-top: 1px;
		}
		.linkOption:hover {
			border-bottom: 1px solid;
		}
		`}),l.jsxs("div",{style:{display:"inline-block"},children:[l.jsx(ys.Provider,{value:{color:t,className:"linkOption"},children:l.jsx("a",{href:Js,title:N({en:"Bluesky",zh:""}),children:l.jsx(k1,{})})}),"|",l.jsx(ys.Provider,{value:{color:t,className:"linkOption"},children:l.jsx("a",{href:ba,title:N({en:"GitHub",zh:"GitHub"}),children:l.jsx(U1,{})})}),"|",l.jsx(ys.Provider,{value:{color:t,className:"linkOption"},children:l.jsx("a",{href:Ed,title:N({en:"Blog",zh:""}),children:l.jsx(w1,{})})}),"|",l.jsx(ys.Provider,{value:{color:t,className:"linkOption"},children:l.jsx("a",{href:"/manual",title:N({en:"User Manual",zh:""}),children:l.jsx(P1,{})})})]})]})}var hz={};let EE=e=>{},mE=e=>{},AE=e=>{};function fz(e){if(e==="resetAll")Lb();else if(e==="resetResourceOverrides"){const t=pt("gameRecord");for(let n=0;n<Ya;n++){let a=pt("gameRecord"+n.toString());if(n===0&&a===null&&t!==null&&(a=t),a!==null){const s=JSON.parse(a);console.log(s),s.config&&(s.config.initialResourceOverrides=[]),s.actions=[],Ct("gameRecord"+n.toString(),JSON.stringify(s))}}}else e==="code"?console.log("FFLogs authorization triggered."):e==="resetFFLogsAuth"?(console.log("Reset FFLogs PKCE authorization state and session token."),window.sessionStorage.removeItem("fflogsAuthToken"),xf()):e!==void 0&&console.log("unrecognized command '"+e+"'")}function Ez(e){return l.jsx("div",{style:{flex:3,height:e.height,marginLeft:6,position:"relative",verticalAlign:"top"},children:l.jsx(OO,{uniqueName:"mainConfig",content:[{titleNode:N({en:"Config",zh:""}),contentNode:l.jsx(fj,{})},{titleNode:N({en:"Control",zh:""}),contentNode:l.jsx(cj,{})}],collapsible:!1,scrollable:!0,height:e.height,defaultSelectedIndex:0})})}function pb(e){const t=e.color??Nt().accent;return l.jsx("div",{style:{display:e.hidden===!0?"none":"block",color:t,border:"1px solid "+t,borderRadius:4,padding:"10px 10px 0 10px"},children:e.children})}const Nb=Ju?"[BETA] ":"";class mz extends _i.Component{constructor(n){super(n);re(this,"controlRegionRef");re(this,"gameplayKeyCapture");re(this,"setColorTheme");re(this,"state");fz(n.command),this.state={job:p.getActiveJob(),hasFocus:!1,historical:!1,realTime:!1,controlRegionHeight:0,colorTheme:gE()},this.controlRegionRef=_i.createRef(),this.gameplayKeyCapture=a=>{p.handleKeyboardEvent(a)},EE=a=>{this.setState({job:a});const s=document.querySelector("link[rel~='icon']");s&&(Ju?s.href="/favicons/beta.ico":a in mt?s.href="/favicons/"+a.toString().toLocaleLowerCase()+".ico":s.href=hz.PUBLIC_URL+"/favicon.ico");const c=document.getElementById("pageTitle");c&&(c.text=`${Nb}XIV in the Shell (${a})`)},mE=a=>{this.setState({realTime:a})},AE=a=>{this.setState({historical:a})},this.setColorTheme=a=>{a!==this.state.colorTheme&&(p.updateAllDisplay(),this.setState({colorTheme:a}),Ct("colorTheme",a))}}componentDidMount(){p.tryAutoLoad(),p.updateAllDisplay(),this.controlRegionRef.current&&new ResizeObserver(()=>{var a;const n=((a=this.controlRegionRef.current)==null?void 0:a.clientHeight)??0;this.setState({controlRegionHeight:n})}).observe(this.controlRegionRef.current)}componentWillUnmount(){EE=n=>{},mE=n=>{},AE=n=>{}}render(){const n=Ni(this.state.colorTheme),a={height:"100%",accentColor:n.accent,fontFamily:Ca,fontSize:13,color:n.text,backgroundColor:n.background,display:"flex",flexDirection:"column"};let s;this.state.historical?s="2px solid "+n.historical:this.state.hasFocus?this.state.realTime?s="2px solid "+n.realTime:s="2px solid "+n.accent:s="1px solid "+n.bgMediumContrast;const c={marginBottom:"5px"},d=l.jsx("div",{style:{flex:7,display:"inline-block",position:"relative"},children:l.jsxs("div",{onFocus:()=>{this.setState({hasFocus:!0})},onBlur:()=>{this.setState({hasFocus:!1})},style:{display:"inline-block",padding:8,outline:s},tabIndex:-1,ref:this.controlRegionRef,children:[l.jsx(YO,{}),l.jsx(ZP,{})]})}),f=window.innerWidth>1024;return l.jsxs("div",{style:{position:"fixed",top:0,bottom:0,left:0,right:0,outline:"none"},tabIndex:-1,onKeyDown:this.gameplayKeyCapture,children:[l.jsx("style",{children:`
				@supports selector(::-webkit-scrollbar) {
					.visibleScrollbar::-webkit-scrollbar {
						appearance: none;
						background-color: ${n.bgLowContrast};
						height: 8px;
						width: 5px;
					}
					.visibleScrollbar::-webkit-scrollbar-thumb {
						background-color: ${n.bgHighContrast};
					}
					.invisibleScrollbar::-webkit-scrollbar {
						appearance: none;
						background-color: clear;
						height: 8px;
						width: 5px;
					}
					.invisibleScrollbar::-webkit-scrollbar-thumb {
						background-color: ${n.bgHighContrast};
					}
				}
				@supports not selector(::-webkit-scrollbar) {
					.visibleScrollbar {
						scrollbar-color: ${n.bgHighContrast} ${n.bgLowContrast};
						scrollbar-width: auto;
					}
					.invisibleScrollbar {
						scrollbar-width: none;
					}
				}
				a {
					color: ${n.accent};
				}
				b, h1, h2, h3, h4 {
					color: ${n.emphasis};
				}
				p {
					margin-block-start: 10px;
					margin-block-end: 10px;
				}
				p:first-child {
					margin-block-start: 0px;
				}
				::selection {
					background: rgba(147, 112, 219, 0.4);
				}
				option, select {
					color: ${n.text};
					background-color: ${n.background};
				}
				button, input[type="submit"], ::-webkit-file-upload-button {
					color: ${n.text};
					background-color: ${n.bgLowContrast};
					border: 1px solid ${n.bgHighContrast};
				}
				input[type="radio"] {
					appearance: none;
					width: 1em;
					height: 1em;
					border: 1px solid ${n.bgHighContrast};
					border-radius: 50%;
					background-clip: content-box;
					padding: 2px;
				}
				input[type="radio"]:checked {
					background-color: ${n.accent};
				}
				input[type="checkbox"] {
					appearance: none;
					width: 1em;
					height: 1em;
					border: 1px solid ${n.bgHighContrast};
					border-radius: 1px;
					background-clip: content-box;
					padding: 2px;
				}
				input[type="checkbox"]:checked:after {
					content: '\\2714';
					color: ${n.accent};
					position: absolute;
					font-size: 22px;
					top: -6px;
					left: -2px;
				}
				.checkbox-star:before {
					content: "\\2605";
					color: ${n.timeline.aggroMark};
					position: absolute;
					font-size: 22px;
					top: -7px;
					left: -3px;
					visibility: visible;
				}
				input[type="range"] {
					appearance: none;
					background-color: transparent;
					border: 1px solid ${n.bgHighContrast};
					vertical-align: middle;
					height: 0.9em;
					border-radius: 0.45em;
					overflow: hidden;
					padding: 0.05em;
				}
				input[type="range"]::-webkit-slider-thumb {
					appearance: none;
					background-color: ${n.accent};
					width: 0.8em;
					height: 0.8em;
					border-radius: 0.4em;
				}
				.help-tooltip {
					color: ${n.text};
					background-color: ${n.tipBackground};
					opacity: 0.98;
					max-width: 300px;
					outline: 1px solid ${n.bgHighContrast};
					transition: none;
					font-size: 100%;
					z-index: 10;
				}
				button:disabled {
					background-color: ${n.background};
				}
			`}),l.jsx(yn.Provider,{value:this.state.colorTheme,children:l.jsxs("div",{style:a,id:"globalHelpTooltipAnchor",children:[l.jsx("div",{style:{flex:1,overflowY:"scroll",overscrollBehaviorY:"contain"},children:l.jsxs("div",{style:{position:"relative",maxWidth:1060,margin:"0 auto",marginTop:40,display:"grid"},children:[l.jsxs("div",{style:{position:"absolute",display:"flex",flexWrap:"wrap",justifySelf:"right",justifyContent:"space-between",alignItems:"flex-start",gap:"1.4em"},children:[f&&l.jsx(dz,{}),l.jsx(Xk,{}),l.jsx(zk,{setColorTheme:this.setColorTheme})]}),l.jsxs("div",{children:[l.jsxs("h3",{style:{marginTop:0,marginBottom:6},children:[Nb,"XIV in the Shell"]}),N({en:l.jsxs("div",{style:{marginBottom:16},children:["Last updated: ",sT()," (see ",l.jsx("b",{children:"Changelog"}),")"]}),zh:l.jsxs("div",{style:{marginBottom:16},children:["",sT(),"",l.jsx("b",{children:""}),""]}),ja:l.jsxs("div",{style:{marginBottom:16},children:["",Yk(sT()),"",l.jsx("b",{children:""}),"",l.jsx("a",{href:"https://coda.io/d/_d-N3WFoMZ8e/Black-Mage-in-the-Shell_suRLF",children:""}),""]})}),z1()?l.jsx("div",{style:{margin:"10px 0",padding:"10px",border:"1px solid "+n.warning,color:n.warning,borderRadius:4},children:N({en:l.jsxs("div",{children:["NOTE: Your browser cache contains data from BLM in the Shell before it's updated for Dawntrail. Visit the Endwalker archive at"," ",l.jsx("a",{style:{color:n.warning},href:"https://miyehn.me/ffxiv-blm-rotation-endwalker",children:"miyehn.me/ffxiv-blm-rotation-endwalker"})," ","to access and automatically re-save it. Once you do that, this notice will also go away."]}),zh:l.jsxs("div",{children:["7.06.0",l.jsx("a",{style:{color:n.warning},href:"https://miyehn.me/ffxiv-blm-rotation-endwalker",children:"miyehn.me/ffxiv-blm-rotation-endwalker"}),""]})})}):void 0,Ju&&l.jsx(pb,{color:n.warning,children:N({en:l.jsxs("div",{style:{marginBottom:"10px"},children:[l.jsx("span",{children:l.jsx("b",{style:{color:n.warning},children:"You're currently using the BETA version of XIV in the Shell."})}),l.jsxs("ul",{children:[l.jsx("li",{style:c,children:"Things may break in unexpected ways at any time. Use at your own peril, and make sure to export in-progress files frequently."}),l.jsx("li",{style:c,children:"Application data is not shared with the main site. Anything you do here stays here. Files created on the BETA site may not work on the main site, but files made on the main site should be importable here (if they are not, please report this as a bug)."}),l.jsx("li",{style:c,children:"If the page becomes un-loadable, please contact us and tell us what your last actions on the site were, and we can help you debug what went wrong. You can also try resetting your browser's localStorage data for beta.xivintheshell.com."}),l.jsxs("li",{style:c,children:["To report an issue, you can contact us on Discord in The Balance (",l.jsx("a",{href:er,children:"#xiv_in_the_shell_support"}),"), or file an issue on"," ",l.jsx("a",{href:"https://github.com/xivintheshell/xivintheshell/issues",children:"our GitHub"}),"."]})]})]}),zh:l.jsxs("div",{style:{marginBottom:"10px"},children:[l.jsx("span",{children:l.jsx("b",{style:{color:n.warning},children:"XIV in the ShellBETA"})}),l.jsxs("ul",{children:[l.jsx("li",{style:c,children:""}),l.jsx("li",{style:c,children:"BETABETAbug"}),l.jsx("li",{style:c,children:"beta.xivintheshell.comlocalStorage"}),l.jsxs("li",{style:c,children:["miyehnQQ870340705",l.jsx("a",{href:"https://github.com/xivintheshell/xivintheshell/issues",children:"GitHub"}),"issue"]})]})]})})}),Ju&&l.jsx("div",{style:{margin:"10px"}}),l.jsx(uz,{job:this.state.job}),l.jsx(Vl,{defaultShow:!0,title:"7-2-user-survey",titleNode:l.jsx("span",{children:N({en:"7.2 User Survey",zh:"7.2"})}),content:l.jsx(pb,{children:N({en:l.jsx(l.Fragment,{children:l.jsxs("p",{children:["Help us improve XIV in the Shell! Please take our user survey:"," ",l.jsx("b",{children:l.jsx("a",{target:"_blank",rel:"noreferrer",href:"https://forms.gle/eKVygxxZVd894323A",children:"https://forms.gle/eKVygxxZVd894323A"})})]})}),zh:l.jsx(l.Fragment,{children:l.jsxs("p",{children:[""," ",l.jsx("b",{children:l.jsx("a",{target:"_blank",rel:"noreferrer",href:"https://www.wjx.cn/vm/mQ1gV2b.aspx",children:"https://www.wjx.cn/vm/mQ1gV2b.aspx"})})]})})})})})]}),l.jsxs("div",{style:{display:"flex",flexDirection:"row",position:"relative",marginBottom:"20px"},children:[d,l.jsx(Ez,{height:this.state.controlRegionHeight})]}),l.jsx(JP,{}),l.jsx("hr",{style:{margin:"30px 0px",border:"none",borderTop:"1px solid "+n.bgHighContrast}}),l.jsx(Zy,{})]})}),l.jsx(oz,{})]})})]})}}const Az=C.forwardRef(function(t,n){const{className:a,render:s,orientation:c="horizontal",...d}=t,f=C.useMemo(()=>({orientation:c}),[c]),h=C.useCallback((R={})=>_o({"aria-orientation":c},R),[c]),{renderElement:m}=dr({propGetter:h,render:s??"div",className:a,state:f,extraProps:{role:"separator",...d},ref:n});return m()}),Rz="https://support.na.square-enix.com/rule.php?id=5382&la=1&tag=authc",om="https://www.thebalanceffxiv.com/",lm="https://www.icy-veins.com/ffxiv/",Hv="https://www.fflogs.com/",Tz="https://blog.xivintheshell.com/posts/what-is-xiv-in-the-shell/",kv="https://etro.gg/",Og="https://xivgear.app/",Yc="https://github.com/Amarantine-xiv/Amas-FF14-Combat-Sim_source",Uv="https://xivanalysis.com/",wv="https://xivraider.com/",Sz="https://na.finalfantasyxiv.com/jobguide/battle/",gz="https://ffxiv.consolegameswiki.com/wiki/FF14_Wiki",Pv="http://xivapi.com",Gv="https://arcanedisgea.github.io/xiv-id/",Bv="https://www.akhmorning.com/allagan-studies/",Fv="https://discord.com/channels/277897135515762698/1199477934075953242",jv="https://docs.google.com/document/d/1c1a16tUifUN09KoCgNx1EyOsk1HLYGm-b-q7lz6W8C4/edit",zv="https://docs.google.com/document/d/1c1a16tUifUN09KoCgNx1EyOsk1HLYGm-b-q7lz6W8C4/edit",Yv="https://docs.google.com/document/d/13ggP7PoOs-ic6ve_Huo4A2-3Mx7ozeRPXzC7N_edgHU/edit#heading=h.d8b4r5is0qbm",Kv="https://www.bilibili.com/read/cv29822181/?jump_opus=1",Vv="https://docs.google.com/document/d/1zxUd7vFfs24cGteOeCnEsoCzfDxIvKNROIvDUqG-6no/edit",sm="https://github.com/Tischel/BLMInTheShell",Wv="https://github.com/xivintheshell/xivintheshell/blob/main/scripts/csv2track.py",Xv="https://github.com/xivintheshell/xivintheshell/wiki/Creating-timeline-tracks",qv="https://colab.research.google.com/drive/1XiVqn-W5teCaXGMtLoq3Zqx5zrk50Fh3?usp=sharing",Zv="https://github.com/leifengsang/XivInTheShellMarkerGen",Iz="https://en.wikipedia.org/wiki/Random_seed",_z="https://www.bilibili.com/video/BV1SGvZBAEsm/",pz="https://actff1.web.sdo.com/project/20190917jobguid/index.html#/index",Nz="https://ff14.huijiwiki.com/wiki/%E9%A6%96%E9%A1%B5",Cz="https://bbs.nga.cn/read.php?tid=19736925",bz="https://asvel.github.io/ffxiv-gearing/",Oz=gE(),ZT=()=>l.jsx(Az,{orientation:"vertical",style:{width:"1px",backgroundColor:Ni(Oz).text}}),$v={marginLeft:"2em",marginTop:"-0.2em",marginBottom:"1em",display:"flex",gap:"0.5rem"};function Dz(){return l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:$v,children:[l.jsx("div",{children:l.jsx("i",{children:"by Shanzhe Qi @ Seraph"})}),l.jsx(ZT,{}),l.jsx("div",{children:"last updated 9 February 2026"})]}),l.jsxs("p",{className:"no-indent",children:["Welcome to ",l.jsx("i",{children:"XIV in the Shell"}),", a rotation planner tool for ",l.jsx("i",{children:"Final Fantasy XIV"}),"! This page walks you through how to make the most of our timeline creation and manipulation features to improve your gameplay. Use the navigation bar on the right to find help for a specific feature."]}),l.jsxs("p",{children:["This manual only covers how to use this tool for planning, not how to choose what abilities to use in your rotation. For resources for learning and optimizing your job, please refer to other sites like ",l.jsx("a",{href:om,children:"The Balance"})," and"," ",l.jsx("a",{href:lm,children:"Icy Veins"}),". Further information about jobs and FFXIV's combat system can be found in the ",l.jsx("a",{href:"#additional-resources",children:"Additional Resources"})," ","section of this page."]}),l.jsxs("p",{children:["For feedback or questions about this page, please reach out to us on"," ",l.jsx("a",{href:ba,children:"GitHub"})," on Discord through our"," ",l.jsx("a",{href:er,children:"support channel in The Balance"}),", or on"," ",l.jsx("a",{href:Js,children:"Bluesky"}),"."]}),l.jsxs("p",{children:["This manual page can always be found at ",l.jsx("a",{href:"/manual",children:"xivintheshell.com/manual"})," ","or ",l.jsx("a",{href:"/manual_en",children:"xivintheshell.com/manual_en"}),"."]}),l.jsxs("p",{children:["FINAL FANTASY is a registered trademark of Square Enix Holdings Co., Ltd. Game ability and status images are  SQUARE ENIX, and used for non-commercial purposes in compliance with the ",l.jsx("a",{href:Rz,children:"Final Fantasy XIV Materials Usage License"}),"."]})]})}function yz(){return l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:$v,children:[l.jsx("i",{children:"Shanzhe Qi @ Seraph"})," ",l.jsx(ZT,{})," ",l.jsx("i",{children:"ai"})," ",l.jsx(ZT,{})," ","202629"]}),l.jsxs("p",{children:[" XIV in the ShellXIV",l.jsx("a",{href:_z,children:""}),""]}),l.jsxs("p",{children:[""," ",l.jsx("a",{href:om,children:"The Balance"}),"",l.jsx("a",{href:lm,children:"Icy Veins"})," ","XIV"]}),l.jsxs("p",{children:["",l.jsx("a",{href:ba,children:"GitHub"})," XIV in the ShellQQ",qT,"",l.jsx("a",{href:er,children:"The Balance Discord"}),""," ",l.jsx("a",{href:Js,children:"Bluesky"}),""]}),l.jsxs("p",{children:["",l.jsx("a",{href:"/manual",children:"xivintheshell.com/manual"}),"",l.jsx("a",{href:"/manual_zh",children:"xivintheshell.com/manual_zh"}),""]}),l.jsx("p",{children:"FINAL FANTASY  Square Enix Holdings Co., Ltd.  SQUARE ENIXXIV "})]})}const ve=e=>l.jsx(oi,{text:e});function vz(){return l.jsxs(l.Fragment,{children:[l.jsx(ka,{id:"overview",label:l.jsx(l.Fragment,{children:"Overview"})}),l.jsx(Be,{id:"what-is-xivintheshell",label:l.jsxs(l.Fragment,{children:["What is ",l.jsx("i",{children:"XIV in the Shell"}),"?"]})}),l.jsxs("p",{children:["I answered this question in more detail in our ",l.jsx("a",{href:Tz,children:"first blog post"}),", but Ive copied the important parts here."]}),l.jsx("p",{children:l.jsxs("b",{children:[l.jsx("i",{children:"XIV in the Shell"})," (",l.jsx("a",{href:"/",children:"https://xivintheshell.com"}),") is a web-based FFXIV rotation planner and job simulator."]})}),l.jsx("p",{children:"Thats it! Most high-end raids in FFXIV have very predictable timelines, and the mechanics of each fight force players to react differently to maintain a coherent rotation. Melees may need to disengage, casters may need to save resources for extended movement, and parties may adjust buff window timings in unconventional ways. Our tool lets you compare a DPS timeline against a fight's mechanic timeline and party buff windows, and makes precise planning accessible in a way that traditional spreadsheet-based tools do not."}),l.jsx("p",{children:"Making rotational adaptations on the fly is a valuable skill for raiders to have, but planning while outside instance is useful all the same. Even outside hardcore optimization environments, there are a myriad of reasons to create rotation plans for a fight:"}),l.jsxs("ul",{children:[l.jsx("li",{children:"Theorycrafting sequences for your job"}),l.jsx("li",{children:"Getting more comfortable in fights you haven't yet cleared"}),l.jsx("li",{children:"Getting more comfortable in fights you've already cleared"}),l.jsx("li",{children:"Improving your understanding of a job's fundamentals"}),l.jsx("li",{children:"Moving the colored number on your FFLogs profile up"})]}),l.jsx("p",{children:"Rotation planning can also just be plain fun for its own sake. The interaction between fight mechanics and job kits is a challenging puzzle to solve, and discovering creative solutions then executing them well in-game is a uniquely rewarding experience."}),l.jsx(Be,{id:"features",label:"Features"}),l.jsxs("p",{children:[l.jsx("i",{children:"XIV in the Shell"})," provides the following capabilities:"]}),l.jsxs("ul",{children:[l.jsx("li",{children:"Rotation visualization in both a graphical timeline and spreadsheet-like table"}),l.jsx("li",{children:"Full simulation of cooldowns, buffs, MP, and job gauge resources"}),l.jsx("li",{children:"Customizable starting resources for planning specific phases"}),l.jsxs("li",{children:["Combat stat configuration and import from ",l.jsx("a",{href:kv,children:"etro"}),"/",l.jsx("a",{href:Og,children:"XivGear"})]}),l.jsx("li",{children:"Rotation import from FFLogs"}),l.jsx("li",{children:"Preset fight timelines for most high-end difficulty encounters"}),l.jsx("li",{children:"Rotations and fight markers shareable as text files"}),l.jsx("li",{children:"Customizable buff timings and timeline markers"}),l.jsx("li",{children:"Customizable macros for sequences of multiple skills"}),l.jsx("li",{children:"Potency calculation with party buffs and potion usage"}),l.jsxs("li",{children:["Compatibility with ",l.jsx("a",{href:Yc,children:"Amarantine's combat simulator"})," for more advanced DPS simulation"]}),l.jsx("li",{children:"Import/export from plain text, spreadsheets, and Discord emotes"})]}),l.jsx(Be,{id:"quickstart",label:"Quick Start"}),l.jsx("p",{children:"To get started with making a timeline:"}),l.jsxs("ol",{children:[l.jsx("li",{children:'Choose your job and combat stats from the "config" panel to the right of the skill hotbar, then click "apply and reset."'}),l.jsx("p",{children:'[optional] Load fight markers for a specific encounter from the "Timeline markers" tab at the bottom of the page.'}),l.jsx("li",{children:"Input skills by clicking on their icon in the skill hotbar. The simulation will automatically advance to the end of its animation lock or cast time. Clicking a skill will attempt to use it as soon as its cooldown and the current animation lock/GCD timer allows."}),l.jsxs("li",{children:["Rearrange skills by clicking/dragging in the graphical timeline, and hit"," ",ve("Delete")," to remove selected skills."]}),l.jsx("p",{children:"For more details on how to use or configure specific features, please refer to the corresponding section in the navigation bar on the right."})]}),l.jsx(Be,{id:"shortcuts",label:"Keyboard Shortcuts"}),l.jsxs("p",{children:["The following keyboard shortcuts are available anywhere on the site, except when editing a text/number input field (replace ",ve("ctrl")," with ",ve("cmd")," for Mac users):"]}),l.jsxs("ul",{children:[l.jsxs("li",{children:[ve("u")," Delete the last action in the active timeline."]}),l.jsxs("li",{children:[ve("ctrl"),"+",ve("z")," Undo last action."]}),l.jsxs("li",{children:[ve("ctrl"),"+",ve("y")," OR ",ve("ctrl"),"+",ve("shift"),"+",ve("z")," Redo last action."]}),l.jsxs("li",{children:[ve("ctrl"),"+",ve("c")," Copy selected skills to clipboard. The format can be changed in the Settings tab at the bottom of the page."]}),l.jsxs("li",{children:[ve("ctrl"),"+",ve("x")," Cut selected skills to clipboard."]}),l.jsxs("li",{children:[ve("ctrl"),"+",ve("v")," Paste skills from the clipboard."]})]}),l.jsxs("ul",{children:[l.jsx("p",{children:'The following shortcuts are available when interacting with the graphical timeline and the "Timeline editor" table:'}),l.jsxs("li",{children:[ve("Backspace")," OR ",ve("Delete")," Delete the selected skills from the timeline. Subsequent actions are rearranged to be used as soon as possible."]}),l.jsxs("li",{children:[ve("")," Select the previous action in the timeline. If no actions are currently selected, select the last action in the timeline."]}),l.jsxs("li",{children:[ve("")," Select the next action in the timeline. If no actions are currently selected, select the first action in the timeline."]}),l.jsxs("li",{children:[ve("Home")," Select the first action in the timeline."]}),l.jsxs("li",{children:[ve("End")," Select the last action in the timeline."]}),l.jsxs("li",{children:[ve("Shift"),"+",ve("")," / ",ve("Shift"),"+",ve("")," / ",ve("Shift"),"+",ve("Home")," /"," ",ve("Shift"),"+",ve("End")," Extend the selection window to the previous/next/first/last action."]}),l.jsxs("li",{children:[ve("Escape")," Deselect all actions."]}),l.jsxs("li",{children:[ve("ctrl"),"+",ve("a")," Select all actions."]})]}),l.jsx(Be,{id:"update-policy",label:"Update Policy"}),l.jsxs("p",{children:[l.jsx("i",{children:"XIV in the Shell"})," frequently receives updates to improve user experience and accuracy of its simulations. We make our best effort to ensure our updates do not break saved timelines whenever possible, but cannot always guarantee this, whether due to developer error or in-game changes. Please export your timelines often to reduce the risk of losing work."]}),l.jsxs("p",{children:["Potencies and job mechanics in ",l.jsx("i",{children:"XIV in the Shell"})," reflect those in the latest global server version of FFXIV. We try to make updates available within a few days of each patch release, but may be slower depending on the developers' availability."]}),l.jsx(Be,{id:"technical-details",label:"Quick Technical Details"}),l.jsxs("p",{children:[l.jsx("i",{children:"XIV in the Shell"})," is a client-only single page application. All data is stored within your web browser's localStorage module, so clearing your browsing data for"," ",l.jsx("a",{href:"/",children:"xivintheshell.com"})," will permanently delete all of your saved rotations and markers. This also means that if you lose any data, we (the developers) are unable to recover it for you, because it never leaves the confines of your browser unless you explicitly send us your exported files through some other platform. It is highly unlikely that we will ever maintain a server of any kind, so as to keep development/maintenance costs minimal and reduce the likelihood of site downtime."]}),l.jsxs("p",{children:["This site is made in Typescript with Vite + React, and hosted with GitHub Pages. You can find our source code on GitHub at ",l.jsx("a",{href:ba,children:ba}),". Contributions, bug reports, and feature requests are welcome!"]}),l.jsx(Be,{id:"troubleshooting",label:"Troubleshooting"}),l.jsx("p",{children:"In very rare cases, you may encounter a bug that completely breaks the website, causing it to render nothing but a white screen. If this happens, please raise a bug report with us on GitHub or Discord, and describe the most recent actions you took before the site crashed."}),l.jsx("p",{children:"If you're unable to communicate with us, you may attempt to fix the issue yourself by visiting one of the following links:"}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"xivintheshell.com?resetResourceOverrides"})," Deletes all resource overrides and clears all actions in your saved timelines."]}),l.jsxs("li",{children:[l.jsx("b",{children:"xivintheshell.com?resetAll"})," Deletes all your saved data in"," ",l.jsx("i",{children:"XIV in the Shell"}),"."]}),l.jsxs("li",{children:[l.jsx("b",{children:"xivintheshell.com?resetFFLogsAuth"})," Resets data related to FFLogs authorization."]})]}),l.jsx("p",{children:"If all these steps fail, please clear your browsing data for xivintheshell.com through your web browser's settings. Once again: remember to frequently download and save your timelines, should the worst come to pass!"})]})}function Mz(){return l.jsxs(l.Fragment,{children:[l.jsx(ka,{id:"overview",label:l.jsx(l.Fragment,{children:""})}),l.jsx(Be,{id:"what-is-xivintheshell",label:l.jsx(l.Fragment,{children:"XIV in the Shell "})}),l.jsxs("p",{children:["XIV in the Shell",l.jsx("a",{href:"/",children:"https://xivintheshell.com"}),"XIV"]}),l.jsx("p",{children:"XIV"}),l.jsx("p",{children:""}),l.jsxs("ul",{children:[l.jsx("li",{children:""}),l.jsx("li",{children:""}),l.jsx("li",{children:""}),l.jsx("li",{children:""}),l.jsx("li",{children:" FFLogs "})]}),l.jsx("p",{children:""}),l.jsx(Be,{id:"features",label:""}),l.jsx("p",{children:"XIV in the Shell "}),l.jsxs("ul",{children:[l.jsx("li",{children:""}),l.jsx("li",{children:"CDBuff"}),l.jsx("li",{children:""}),l.jsxs("li",{children:[" ",l.jsx("a",{href:kv,children:"etro"}),"/",l.jsx("a",{href:Og,children:"XivGear"})," ",""]}),l.jsx("li",{children:" FFLogs "}),l.jsx("li",{children:""}),l.jsx("li",{children:""}),l.jsx("li",{children:""}),l.jsx("li",{children:""}),l.jsx("li",{children:""}),l.jsxs("li",{children:["",l.jsx("a",{href:Yc,children:"Amarantine"})," DPS "]}),l.jsx("li",{children:"Discord /"})]}),l.jsx(Be,{id:"quickstart",label:""}),l.jsx("p",{children:""}),l.jsxs("ol",{children:[l.jsx("li",{children:""}),l.jsx("p",{children:""}),l.jsx("li",{children:""}),l.jsxs("li",{children:[" ",ve("Delete")," "]}),l.jsx("p",{children:""})]}),l.jsx(Be,{id:"shortcuts",label:""}),l.jsxs("p",{children:["T/Mac  ",ve("ctrl")," "," ",ve("cmd"),""]}),l.jsxs("ul",{children:[l.jsxs("li",{children:[ve("u")," "]}),l.jsxs("li",{children:[ve("ctrl"),"+",ve("z")," "]}),l.jsxs("li",{children:[ve("ctrl"),"+",ve("y"),"  ",ve("ctrl"),"+",ve("shift"),"+",ve("z")," "]}),l.jsxs("li",{children:[ve("ctrl"),"+",ve("c")," "]}),l.jsxs("li",{children:[ve("ctrl"),"+",ve("x")," "]}),l.jsxs("li",{children:[ve("ctrl"),"+",ve("v")," "]})]}),l.jsxs("ul",{children:[l.jsx("p",{children:""}),l.jsxs("li",{children:[ve("Backspace"),"  ",ve("Delete")," "]}),l.jsxs("li",{children:[ve("")," "]}),l.jsxs("li",{children:[ve("")," "]}),l.jsxs("li",{children:[ve("Home")," "]}),l.jsxs("li",{children:[ve("End")," "]}),l.jsxs("li",{children:[ve("Shift"),"+",ve("")," / ",ve("Shift"),"+",ve("")," / ",ve("Shift"),"+",ve("Home")," /"," ",ve("Shift"),"+",ve("End")," ///"]}),l.jsxs("li",{children:[ve("Escape")," "]}),l.jsxs("li",{children:[ve("ctrl"),"+",ve("a")," "]})]}),l.jsx(Be,{id:"update-policy",label:""}),l.jsx("p",{children:"XIV in the Shell "}),l.jsx(Be,{id:"technical-details",label:""}),l.jsx("p",{children:"XIV in the Shell  xivintheshell.com /"}),l.jsxs("p",{children:[" TypeScript + Vite + React  GitHub Pages"," ",l.jsx("a",{href:ba,children:ba})," Bug "]}),l.jsx(Be,{id:"troubleshooting",label:""}),l.jsx("p",{children:" Bug GitHubQQ Discord "}),l.jsx("p",{children:""}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"xivintheshell.com?resetResourceOverrides"})," ",""]}),l.jsxs("li",{children:[l.jsx("b",{children:"xivintheshell.com?resetAll"}),"  XIV in the Shell "]}),l.jsxs("li",{children:[l.jsx("b",{children:"xivintheshell.com?resetFFLogsAuth"}),"  FFLogs "]})]}),l.jsx("p",{children:" xivintheshell.com"})]})}const ai=e=>l.jsx(oi,{text:e});function Lz(){return l.jsxs(l.Fragment,{children:[l.jsx(ka,{id:"timeline-creation",label:"Timeline Creation and Editing"}),l.jsx(Be,{id:"setup-config",label:"Setup and Configuration"}),l.jsx("p",{children:'The "Config" panel to the right of the skill input area lets you adjust combat statistics and other simulation settings.'}),l.jsx(lt,{id:1,name:"config"}),l.jsxs("ol",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"Etro/XivGear import"})," Import a gearset from an etro or XivGear link."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Job selector"})," Set the job of the active timeline slot. Combat stats will use a default value for the job, or the most recently-used configuration for that job. Resource overrides are cleared when the job changes."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Information area"})," Summarizes the randomly generated offset of Lucid Dreaming ticks (healers/casters only), DoT ticks, initial resource overrides, and random procs."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Level selector and combat stats"})," Adjust the job level and combat stats. Critical hit, direct hit, and determination are used to estimate the effects of critical hit buffs like SCH's Chain Stratagem and DNC's Devilment, and potency for abilities that always crit or crit-direct hit."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Animation lock"})," Adjust the amount of time an ability's animation takes, preventing you from using other abilities. This should very roughly be 0.6 + 2  (your ping). Certain abilities, such as movement skills and DRG's jumps, have separate animation locks that cannot be configured."]}),l.jsxs("li",{children:[l.jsx("b",{children:"FPS"})," Adjust the estimated FPS of your game client. FFXIV only accepts ability inputs when a new frame is rendered, which can accumulate over time to create delays on GCD actions over the course of a fight. To ignore the effects of FPS, set this value to 9999."]}),l.jsxs("li",{children:[l.jsx("b",{children:"GCD correction"})," Adjust the duration of GCDs and cast times. This should generally be left at 0, but you can use this to shorten or lengthen these durations if you believe the FPS correction formula is inaccurate."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Time till first MP tick"}),' Adjust the amount of time until the first MP tick (also known as the "actor tick") occurs, relative to the start of the simulation. Mostly relevant only for BLM.']}),l.jsxs("li",{children:[l.jsx("b",{children:"Countdown"})," Adjust the amount of time available pre-pull. Setting this to a negative value begins the simulation after the fight has begun."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Random seed and proc mode"})," A ",l.jsx("a",{href:Iz,children:"random seed"})," ",`used to determine the occurrence of random events, such as RDM's Verstone Ready and DNC's Feather gauge. The proc mode setting can be set to "RNG" to use this seed, "Never" to prevent all random events from occurring, or "Always" to make random events occur whenever possible.`]})]}),l.jsx(lt,{id:2,name:"resource_overrides"}),l.jsxs("ol",{start:11,children:[l.jsxs("li",{children:[l.jsx("b",{children:"Override initial resources"})," Specify the initial values of job gauges, status effects, and cooldowns. This is useful for planning specific phases of long fights in isolation, or for encounters that allow you to prepare resources in advance."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Apply/apply and reset"}),' Pressing "apply" confirms any configuration changes, applying them to the current timeline. "Apply and reset" applies the configuration changes to the current timeline, and clears its previously-saved actions.']})]}),l.jsx(lt,{id:3,name:"control"}),l.jsx("p",{children:'The "Control" panel contains simulation settings.'}),l.jsx("p",{children:'When "real-time auto pause" mode is enabled, using an action will simulate its animation lock and cast time in real time, pausing when the next action can be performed. Adjusting the "time scale" field advances through time more quickly.'}),l.jsx("p",{children:'When "manual" mode is enabled, animation locks and cast times are immediately skipped after using an action.'}),l.jsx(Be,{id:"adding-skills",label:"Adding Skills, Time Delays, and Waits"}),l.jsx(lt,{id:4,name:"hotbar"}),l.jsxs("p",{children:["Click on a skill's icon in the hotbar ",l.jsx("b",{children:"(1)"})," to add it. It will be inserted at the location of the cursor in the timeline. If action(s) are currently selected, attempting to add a new skill will place it before the selection. Attempting to use a skill will automatically wait for the duration of the skill's cooldown, as well as the current animation lock and/or GCD before activating it."]}),l.jsxs("p",{children:['To configure the number of targets hit by an AoE ability, adjust the "# of targets hit" field ',l.jsx("b",{children:"(2)"}),'. This will affect all subsequent AoE ability inputs, and is ignored for abilities that can only hit a single target. To configure the number of targets hit by an AoE ability, adjust the "# of targets hit" field ',l.jsx("b",{children:"(2)"}),', or manually select which targets to hit through the selector checkboxes below. This will affect all subsequent AoE ability inputs, and is ignored for abilities that can only hit a single target. An orange star  indicates which enemy is the primary target of the ability, and will receive the most damage: if an ability is used that can only hit a single target, then this is the enemy that will be hit. A purple checkmark  indicates a secondary target that will be additionally hit by splash damage. Modifying the checkboxes will automatically modify the "targets hit" field, and vice versa.']}),l.jsx("p",{children:"When multiple targets are selected, clicking on the current primary target will demote it to a secondary target, and clicking on a secondary target will de-target it. Clicking on an unselected enemy will turn that enemy into the new primary target. Exactly one enemy must be selected as the primary target at all times."}),l.jsxs("p",{children:['To wait a specified duration after the end of the current animation lock, use the "wait until _ second(s) since" input ',l.jsx("b",{children:"(3)"}),'. This is useful for simulating deliberate "late weaves" with a duration of 0.6s-1.0s, depending on your needs.']}),l.jsxs("p",{children:['To jump to a specific timestamp in a fight (such as the beginning of a mechanic or the end of a downtime phase), use the "Wait until _" input ',l.jsx("b",{children:"(4)"}),". This input will always end at the specified timestamp, even if surrounding skills are rearranged."]}),l.jsxs("p",{children:['To wait until the next MP tick or Lucid Dreaming tick, press the "Wait until MP tick / lucid tick" button ',l.jsx("b",{children:"(5)"}),". This will always wait until the next tick occurs, even if surrounding skills are rearranged."]}),l.jsxs("p",{children:['To delete all wait events at the end of the timeline, use the "Remove trailing idle time" button ',l.jsx("b",{children:"(6)"}),"."]}),l.jsxs("p",{children:["To remove a buff or debuff before its natural expiration time, click its icon in the status section ",l.jsx("b",{children:"(7)"}),". Ground-based abilities such as BLM's Ley Lines, SCH's Sacred Soil, and DRK's Salted Earth, can be temporarily disabled, then later re-enabled, by clicking on them here."]}),l.jsx(Be,{id:"positionals",label:"Positionals and Auto-Attacks"}),l.jsx(lt,{id:5,name:"positional"}),l.jsxs("p",{children:['Melee jobs have a pair of "Rear Positional" ',l.jsx("b",{children:"(1)"}),' and "Flank Positional" ',l.jsx("b",{children:"(2)"})," ",'buffs. Abilities with bonuses for landing positional hits will receive bonuses when the appropriate buff is active. Click the appropriate buff icon to toggle it. The "True North" buff will grant all positional bonuses, overriding the effect of these buffs.']}),l.jsxs("p",{children:['Melee and tank jobs have an additional "auto-attacks engaged" buff ',l.jsx("b",{children:"(3)"}),". This is currently only used on PLD to compute Oath Gauge generation, and can be temporarily disabled to simulate disengagements. Using a melee-range weaponskill or ability will automatically re-enable auto-attacks."]}),l.jsx("p",{children:"Potency computation for auto-attacks is not currently supported, and will be added at a later date."}),l.jsx(Be,{id:"skill-sequence-presets",label:"Skill Sequence Presets"}),l.jsx(lt,{id:"6",name:"presets"}),l.jsx("p",{children:'Below the skill input window is the "skill sequence presets" menu. Here, you can add sequences of multiple skills that can later be added in bulk to the timeline by clicking on the preset entry.'}),l.jsx("p",{children:"Skills that replace other buttons, such as GNB's Gnashing Fang combo + Continuation and PCT's Red/Green/Blue combo, will automatically transform into the appropriate action when loaded from a preset."}),l.jsx(Be,{id:"timeline-visualization",label:"Timeline Visualization"}),l.jsx("p",{children:"The graphical timeline displays visual information about skill usages and animation locks."}),l.jsx(lt,{id:"7",name:"timelines"}),l.jsxs("ol",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"Time ruler"})," Displays timestamp information."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Skill icons"})," A skill icon image represents the usage of a skill (image width not to scale with animation lock time). Mousing over an icon will display a tooltip with its snapshot time, potency, animation lock/cast time, and active damage/haste effects.",l.jsxs("ol",{type:"a",children:[l.jsxs("li",{children:[l.jsx("b",{children:"Cast bars"})," A purple bar represents a cast time, during which other abilities cannot be used. The vertical line in the middle of the bar represents the cast's snapshot time (also known as the slidecast window)."]}),l.jsxs("li",{children:[l.jsx("b",{children:"GCD bars"})," A green bar represents a GCD recast lock."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Animation lock bars"})," (not visible in screenshot) A grey bar represents an animation lock. These are only visible at higher horizontal scale levels, or for abilities with exceptionally long animation locks."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Buff underlines"})," The colored bars beneath a skill icon summarize the haste and amplification buffs that the ability snapshots."]})]})]}),l.jsxs("li",{children:[l.jsx("b",{children:"Damage ticks"})," A red triangle represents the application timing of a damage event. Mousing over a damage tick shows its exact timestamp, potency, and snapshotted buffs."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Heal ticks"})," A green triangle represents the application timing of a heal event. Similar to damage events, mousing over a heal tick will show its timestamp and potency."]}),l.jsxs("li",{children:[l.jsx("b",{children:"MP ticks"}),' A vertical blue line in the background of the timeline represents the timing of a natural MP tick, also known as the "actor tick." These ticks occur every three seconds, and timing of the first tick can be adjusted in the configuration panel.',l.jsx("ol",{type:"a",children:l.jsxs("li",{children:[l.jsx("b",{children:"Lucid Dreaming ticks"})," A light blue triangle represents the timing of a Lucid Dreaming MP tick. These ticks occur every three seconds (independent of the standard actor tick), and the timing of the first tick is randomly generated for each timeline."]})})]}),l.jsxs("li",{children:[l.jsx("b",{children:"Auto-attacks"})," A vertical orange line represents the occurrence of an auto-attack. This is currently only used for PLD to determine Oath Gauge generation."]})]}),l.jsx("p",{children:'If you wish to hide some of these elements, you may do so by unchecking the relevant options in the "Settings" tab at the bottom of the page.'}),l.jsx(Be,{id:"editing-timelines",label:"Editing Timelines"}),l.jsx(lt,{id:"8a",name:"editor"}),l.jsxs("p",{children:["Click on a skill icon in the graphical timeline ",l.jsx("b",{children:"(1)"}),' or a row in the "Timeline editor" tab ',l.jsx("b",{children:"(2)"})," to select it. Use ",ai("Shift")," + click, or click and drag on the background of the graphical timeline to select a sequence of skills. While skill(s) are selected, use ",ai("Backspace")," or ",ai("Delete")," to delete them."]}),l.jsxs("p",{children:["When the timeline extends beyond the bounds of the screen, use ",ai("Shift"),' + scroll wheel while your cursor is within the timeline area to scroll through it. You can also adjust the "horizontal scale" slider ',l.jsx("b",{children:"(3)"})," to increase or decrease the number of visible skills."]}),l.jsxs("p",{children:['While skill(s) in the timeline are selected, click and drag their icons in the graphical timeline to rearrange them. While dragging, a blue line will appear indicating the time at which the simulator will try to use the skill. Click the "drag lock" setting'," ",l.jsx("b",{children:"(4)"})," to toggle this behavior to prevent accidental edits. All editing actions can also be undone and redone with ",ai("ctrl"),"+",ai("z")," and ",ai("ctrl"),"+",ai("y"),", respectively. See ",l.jsx("a",{href:"#shortcuts",children:"keyboard shortcuts"})," for additional navigation shortcuts."]}),l.jsxs("p",{children:['Use the "Add timeline slot" button ',l.jsx("b",{children:"(5)"}),' to, you guessed it, add an additional timeline. Use the "Clone timeline slot" button ',l.jsx("b",{children:"(6)"})," to replicate the currently-selected timeline. Up to four timelines can be stored at once."]}),l.jsxs("p",{children:[`Click on the handle next to a timeline to set it as active. Clicking the small "x" at the bottom of the active timeline's handle `,l.jsx("b",{children:"(7)"})," will delete it."]}),l.jsx(Be,{id:"timeline-editor-table",label:"The Timeline Editor Table"}),l.jsx(lt,{id:"8b",name:"editor"}),l.jsxs("p",{children:['The "Timeline editor" tab at the bottom of the page provides a compact view of the skills used in the active timeline. Any edits made in this table must be confirmed or discarded with the "apply changes to timeline and save" / "discard changes" buttons on the right ',l.jsx("b",{children:"(1)"}),". If edits would cause a timeline to be invalid (that is, its activation conditions are no longer met), then the offending skill will be highlighted in red, and the first invalid skill will be described in the box to the right of the table."]}),l.jsxs("p",{children:["The enemy selector checkboxes ",l.jsx("b",{children:"(2)"})," modify which enemies are targeted by the selected ability. This behaves the same as the enemy selector in the skill input area (described in ",l.jsx("a",{href:"#adding-skills",children:'"Adding Skills"'}),"), except single-target abilities will automatically target only a single enemy."]}),l.jsxs("p",{children:["Clicking a row in the editor table ",l.jsx("b",{children:"(3)"})," selects it. Shift + click allows selecting a range of rows. Dragging and dropping the selected actions will reorder them."]}),l.jsxs("p",{children:['The "move up" and "move down" buttons ',l.jsx("b",{children:"(4)"}),' move the selected actions up or down in the timeline. The "delete selected" button ',l.jsx("b",{children:"(5)"}),' deletes selected actions. The "move end of selection to start of selection" button ',l.jsx("b",{children:"(6)"})," moves the last selected skill ahead of the first selected skill."]}),l.jsxs("p",{children:['"Copy" and "paste" ',l.jsx("b",{children:"(7)"})," copy or paste selected actions to/from the clipboard."]}),l.jsxs("p",{children:['The "undo" and "redo" buttons ',l.jsx("b",{children:"(8)"})," undo or redo the last timeline manipulation action, including those done outside the timeline editor. Undo history is lost upon reloading the page."]})]})}function xz(){return l.jsxs(l.Fragment,{children:[l.jsx(ka,{id:"timeline-creation",label:""}),l.jsx(Be,{id:"setup-config",label:""}),l.jsx("p",{children:""}),l.jsx(lt,{id:1,name:"config"}),l.jsxs("ol",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"Etro / XivGear "}),"  etro  XivGear "]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," ",""]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," ","/DoT"]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," ","/"]}),l.jsxs("li",{children:[l.jsx("b",{children:""}),"   0.6 s + 2  "]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," ","FFXIVGCD 9999"]}),l.jsxs("li",{children:[l.jsx("b",{children:"GCD"}),"  GCD/0"]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," "]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," "]}),l.jsxs("li",{children:[l.jsx("b",{children:"BUFF"})," ","BUFFRNGNeverAlways"]})]}),l.jsx(lt,{id:2,name:"resource_overrides"}),l.jsxs("ol",{start:11,children:[l.jsxs("li",{children:[l.jsx("b",{children:""})," ","BUFFCD"]}),l.jsxs("li",{children:[l.jsx("b",{children:"/"})," ",""]})]}),l.jsx(lt,{id:3,name:"control"}),l.jsx("p",{children:""}),l.jsx("p",{children:"/"}),l.jsx("p",{children:""}),l.jsx(Be,{id:"adding-skills",label:""}),l.jsx(lt,{id:"4",name:"hotbar"}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(1)"})," ",""]}),l.jsxs("p",{children:["AoE ",l.jsx("b",{children:"(2)"})," "," AoE "]}),l.jsx("p",{children:" AoE "}),l.jsxs("p",{children:["____ ",l.jsx("b",{children:"(3)"})," ","GCD0.6s~1.0s"]}),l.jsxs("p",{children:[":"," ",l.jsx("b",{children:"(4)"}),""]}),l.jsxs("p",{children:["/ ",l.jsx("b",{children:"(5)"})," ",""]}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(6)"})," "]}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(7)"}),"  Buff/Debuff Buff/Debuff"]}),l.jsx(Be,{id:"positionals",label:"A"}),l.jsx(lt,{id:"5",name:"positional"}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(1)"}),"  ",l.jsx("b",{children:"(2)"})," ",""]}),l.jsxs("p",{children:["A ",l.jsx("b",{children:"(3)"})," ","AAA"]}),l.jsx(Be,{id:"skill-sequence-presets",label:""}),l.jsx(lt,{id:"6",name:"presets"}),l.jsx("p",{children:""}),l.jsx("p",{children:"//"}),l.jsx(Be,{id:"timeline-visualization",label:""}),l.jsx("p",{children:"/"}),l.jsx(lt,{id:"7",name:"timelines"}),l.jsxs("ol",{children:[l.jsxs("li",{children:[l.jsx("b",{children:""})," "]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," ","//Buff",l.jsxs("ol",{type:"a",children:[l.jsxs("li",{children:[l.jsx("b",{children:""})," ",""]}),l.jsxs("li",{children:[l.jsx("b",{children:"GCD "})," GCD"]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," "]}),l.jsxs("li",{children:[l.jsx("b",{children:"Buff "})," / Buff"]})]})]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," ","Buff"]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," ","Buff"]}),l.jsxs("li",{children:[l.jsx("b",{children:""}),"  3 ",l.jsx("ol",{type:"a",children:l.jsxs("li",{children:[l.jsx("b",{children:""})," ","3"]})})]}),l.jsxs("li",{children:[l.jsx("b",{children:"A"})," "]})]}),l.jsx("p",{children:"A"}),l.jsx(Be,{id:"editing-timelines",label:""}),l.jsx(lt,{id:"8a",name:"editor"}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(1)"}),"  ",l.jsx("b",{children:"(2)"})," ","",ai("Shift"),"+"," ",ai("Backspace"),"  ",ai("Delete")," "]}),l.jsxs("p",{children:[" ",ai("Shift"),"+ ",l.jsx("b",{children:"(3)"})," "]}),l.jsxs("p",{children:[""," ",l.jsx("b",{children:"(4)"})," "]}),l.jsxs("p",{children:[" ",ai("ctrl"),"+",ai("z")," / ",ai("ctrl"),"+",ai("y")," ","",l.jsx("a",{href:"#shortcuts",children:""}),""]}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(5)"}),"  ",l.jsx("b",{children:"(6)"})," "," 4 "]}),l.jsxs("p",{children:['"" ',l.jsx("b",{children:"(7)"})," ",""]}),l.jsx(Be,{id:"timeline-editor-table",label:""}),l.jsx(lt,{id:"8b",name:"editor"}),l.jsxs("p",{children:[""," ",l.jsx("b",{children:"(1)"})," ",""]}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(2)"})," ","",l.jsx("a",{href:"#adding-skills",children:'""'}),""]}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(3)"})," ",ai("Shift"),"+"]}),l.jsxs("p",{children:['"/" ',l.jsx("b",{children:"(4)"}),"  ",l.jsx("b",{children:"(5)"})," "," ",l.jsx("b",{children:"(6)"})," ",""]}),l.jsxs("p",{children:['"/" ',l.jsx("b",{children:"(7)"})," "]}),l.jsxs("p",{children:['"/" ',l.jsx("b",{children:"(8)"})," ",""]})]})}function Hz(){const e=C.useRef(null);return l.jsxs(l.Fragment,{children:[l.jsx(ka,{id:"timeline-analysis",label:"Timeline Analysis"}),l.jsx(Be,{id:"damage-table",label:"Potency, PPS, and the Damage Table"}),l.jsx(lt,{id:"9",name:"potency"}),l.jsxs("ol",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"Summary statistics"})," The top section summarizes the total potency, potency per second (PPS), number of GCD skills applied, and damage over time (DoT) coverage for the current timeline. When a skill or sequence of skills is selected, these values are updated to reflect the selected range.",l.jsxs("ul",{children:[l.jsx("li",{children:'If an ability has been used but its damage application delay has not yet passed in the simulation, its potency will be described as "pending." To include it in the total potency and PPS calculations, add a "wait" event at the end of your timeline, or use an additional skill.'}),l.jsx("li",{children:"PPS is calculated as damage applied starting from time 0 until the end of the final recorded damage application event. This differs from convention for many jobs, which may calculate time from the start of the first GCD until the end of the cast/recast time of the final GCD."}),l.jsx("li",{children:"Potencies are calculated from the values given in ability tooltips, accounting for bonuses from active status buffs (such as DNC's Technical Step and DRG's Lance Charge + Battle Litany) and job gauge buffs (such as BLM's Enochian and DRG's Life of the Dragon). Because of differences in damage calculation multipliers and other combat stats, potencies in timelines of different jobs (or the same job with different GCD speeds) generally cannot be meaningfully compared with each other without the aid of external potency-to-damage conversion tools."})]})]}),l.jsxs("li",{children:[l.jsx("b",{children:"Tincture potency configuration"})," Potions/tinctures/gemdraughts increase the strength of damaging actions by temporarily boosting the character's main combat stat (STR/DEX/MND/INT). Because ",l.jsx("i",{children:"XIV in the Shell"})," simulates only potencies rather than calculating the full damage formula, we approximate tinctures as an 8% buff to skill potencies. If you need a different approximation value, you may configure it here."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Exclude damage when untargetable"}),' When checked, damage application events and DoT ticks that occur during an "Untargetable" marker are automatically excluded from calculations.']}),l.jsxs("li",{ref:e,children:[l.jsx("b",{children:"Potency table"})," Displays the number of times each ability was cast under different sets of self-applied buffs. Hovering the"," ",l.jsx(qe,{topic:"manual-sample-help",content:"potency explanation",container:e})," ","tooltip next to a potency value displays the effect of each buff on a skill's potency. When a skill or sequence of skills is selected, these values are updated to reflect the selected range.",l.jsx("ul",{children:l.jsx("li",{children:'The effect of party buffs added through markers, as well as estimated potency boosts from tinctures, are not visible in this breakdown, and only appear in the purple value in the "total" column.'})})]})]}),l.jsx(Be,{id:"dot-breakdown",label:"DoT Breakdown"}),l.jsx(lt,{id:"10",name:"thunder"}),l.jsx("p",{children:"Every used DoT ability has a separate table detailing the timing of its usage. The offset at which DoT effects tick is randomly generated for each timeline."}),l.jsxs("ol",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"Cast time and application time"})," The snapshot of the ability, and the time at which the DoT effect was applied."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Gap and override"})," The gap (duration where the DoT debuff was not applied) and override (duration remaining on the previous DoT debuff) for this application of the DoT. The total gap and override are displayed at the bottom of this column."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Initial and DoT"})," The on-hit and per-tick potencies of the DoT, including the effect of self-applied buffs."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Ticks"})," The number of ticks triggered from this DoT application. The total number of hit ticks and the total possible number of ticks, are displayed at the bottom of this column."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Total"})," The total potency from this DoT application, including both the initial hit and subsequent ticks. Similar to the general potency table, the effects of party buff markers and tinctures are displayed here."]})]}),l.jsx("p",{children:`Jobs that attack with summoned pets (DRK's Living Shadow, MCH's Automaton Queen, and SMN's Demi-summons) also have potencies displayed in a DoT table. The per-tick "DoT" column for pets is unreliable, but the total potency column and buff snapshots are correct. This will be updated to be clearer some time in the future.`})]})}function kz(){const e=C.useRef(null);return l.jsxs(l.Fragment,{children:[l.jsx(ka,{id:"timeline-analysis",label:""}),l.jsx(Be,{id:"damage-table",label:"PPS"}),l.jsx(lt,{id:"9",name:"potency"}),l.jsxs("ol",{children:[l.jsxs("li",{children:[l.jsx("b",{children:""})," PPSGCD DoT ",l.jsxs("ul",{children:[l.jsx("li",{children:""}),l.jsx("li",{children:"PPS  0 GCD GCD"}),l.jsx("li",{children:'/""'})]})]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," /// XIV in the Shell  8% "]}),l.jsxs("li",{children:[l.jsx("b",{children:"Boss0"})," ","DoT"]}),l.jsxs("li",{ref:e,children:[l.jsx("b",{children:""})," Buff"," ",l.jsx(qe,{topic:"manual-sample-help",content:"",container:e})," ","Buff",l.jsx("ul",{children:l.jsx("li",{children:""})})]})]}),l.jsx(Be,{id:"dot-breakdown",label:"DoT "}),l.jsx(lt,{id:"10",name:"thunder"}),l.jsx("p",{children:"DoTDoT "}),l.jsxs("ol",{children:[l.jsxs("li",{children:[l.jsx("b",{children:""})," DoT"]}),l.jsxs("li",{children:[l.jsx("b",{children:"DoTDoT"})," ","DoTDoTDoTDoTDoTDoT"]}),l.jsxs("li",{children:[l.jsx("b",{children:"DoT"})," ","DoTBuff"]}),l.jsxs("li",{children:[l.jsx("b",{children:"DoT"})," ","DoT"]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," ","DoT"]})]}),l.jsx("p",{children:"DoTBuff"})]})}function Uz(){return l.jsxs(l.Fragment,{children:[l.jsx(ka,{id:"fight-markers",label:"Fight and Buff Markers"}),l.jsx(Be,{id:"loading-presets",label:"Loading Preset Fight Markers"}),l.jsx(lt,{id:"11",name:"markers"}),l.jsxs("p",{children:[l.jsx("i",{children:"XIV in the Shell"})," provides preset timeline markers for on-content savage and ultimate fights, as well as a variety of other high-end content. These tracks are created by developers and community members, and illustrate precise timings for mechanics, downtimes, and incoming damage."]}),l.jsxs("p",{children:["Clicking the button with the name of a fight ",l.jsx("b",{children:"(1)"})," adds its markers to the graphical timeline. Clicking the name of tracks for certain fights with phases"," ",l.jsx("b",{children:"(2)"})," may also have separate tracks for each phase, explained in more detail in the next section."]}),l.jsx("p",{children:"Presets are split into three categories:"}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"Current content"})," The most recent tier of Savage-difficulty raid encounters, along with the current expansion's Ultimate encounters. This may also contain tracks for certain other high-end content, including Extreme trials, Criterion dungeons, and Quantum bosses."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Legacy ultimates"})," Full encounters or select phases of Ultimate encounters from previous expansions."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Archive"})," Older Savage tiers and other encounters from previous expansions."]})]}),l.jsxs("p",{children:['To load tracks beginning from a certain timestamp, adjust the value in the "Load tracks with time offset" field ',l.jsx("b",{children:"(3)"}),", which adds the specified difference in seconds to all markers (for example, a value of 4 would delay all markers by 4 seconds, and a value of -4 would move all markers forward by 4 seconds). This offset is applied on top of individual phase offsets."]}),l.jsxs("p",{children:['Use the "clear all markers" button ',l.jsx("b",{children:"(4)"}),' to clear all markers. Use "remove duplicates" ',l.jsx("b",{children:"(5)"})," to remove all extra copies of identical markers (same text, timestamp, track number, etc.), which may occur if a fight preset is loaded multiple times by mistake."]}),l.jsx(Be,{id:"loading-presets-phases",label:"Loading Preset Markers for Fights With Phases"}),l.jsx(lt,{id:"12",name:"phase_load"}),l.jsxs("p",{children:["If a preset track supports separate phases, click its name ",l.jsx("b",{children:"(1)"})," to expand/collapse timing information for its phases."]}),l.jsxs("p",{children:['The "Load all phases" button ',l.jsx("b",{children:"(2)"})," loads markers for all phases. The default timestamp for the start of a phase is shown next to each field ",l.jsx("b",{children:"(3)"}),". These should be adjusted to account for different kill or push timings. Clicking the name of a particular phase ",l.jsx("b",{children:"(4)"})," loads that phase's markers to the timeline; to create a timeline beginning from the start of a particular phase, set its offset to 0 before loading."]}),l.jsx("p",{children:'The default phase transition timings in presets usually assume the previous phase lasted as long as possible. The beginning of a phase follows the definition provided by FFLogs, which is either the end of a "Down for the Count" debuff, or a boss becoming targetable. You can find these timings for a particular FFLogs report with the `type="targetabilityupdate"` filter, as shown below.'}),l.jsx("img",{src:"assets/ManualScreenshots/targetabilityupdate.png"}),l.jsx("p",{children:"Presets take time to create, and the languages in which they are available depend on the work of the community members that create them. If you're interested in submitting markers for a fight, please reach out to us!"}),l.jsx(Be,{id:"adding-custom-markers",label:"Adding Party Buffs and Custom Markers"}),l.jsx(lt,{id:"13a",name:"pct_opener"}),l.jsxs("p",{children:[`In addition to the site's built-in presets, you can add your own markers in the "Add buffs/markers" section `,l.jsx("b",{children:"(1)"}),". Markers are split into three distinct categories:"]}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"Info"})," markers represent generic information about a timeline. This includes events like enemy cast bars, boss movements, and mechanic resolution timings."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Buff"})," markers represent raid buffs granted by party members. All buffs will automatically use their default in-game durations (which can be adjusted to account for edge cases like varying propagation timings or Dance Partner swaps), and their potency boosts are automatically applied to the damage table. You can see which abilities snapshot party buffs and self-applied buffs by a colored underline in the graphical timeline, or by hovering the skill image icon."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Untargetable"}),' markers represent periods of time where all enemies are immune to damage, and cannot be targeted. Damage application events that would "ghost" by a boss becoming untargetable and DoT ticks that occur during an untargetable period are not added to potency totals.']})]}),l.jsxs("p",{children:["Each marker has a track number ",l.jsx("b",{children:"(2)"})," that determines where it is visible in the timeline, where 0 is the bottom-most marker line, and increasing numbers stack on the lines above."]}),l.jsxs("p",{children:["Clicking on a marker in the timeline ",l.jsx("b",{children:"(3)"}),' will remove it, and restore its properties to the "Add buffs/markers" menu for further editing.']}),l.jsx(Be,{id:"exporting-markers",label:"Exporting Markers"}),l.jsx(lt,{id:"13b",name:"pct_opener"}),l.jsxs("p",{children:['Marker tracks can be exported and shared with other users in the "Save marker tracks to file" menu ',l.jsx("b",{children:"(1)"}),'. Click the "all tracks combined" link ',l.jsx("b",{children:"(2)"}),' to download a single file containing all markers, which can then be imported through the "Load multiple tracks combined" option ',l.jsx("b",{children:"(3)"}),". Clicking a link corresponding to a single track ",l.jsx("b",{children:"(4)"}),' will export all markers with that track number, which can then be imported with the "Load into individual track" option ',l.jsx("b",{children:"(5)"}),"."]}),l.jsx(Be,{id:"creating-markers-from-logs",label:"Creating Marker Tracks From Logs"}),l.jsx("p",{children:"A single encounter can have a very large number of events that you may wish to encode within a marker track file. In these cases, you will most likely find it easier to produce markers in bulk from an FFLogs report."}),l.jsxs("p",{children:[l.jsx("i",{children:"XIV in the Shell"})," developers use a custom"," ",l.jsx("a",{href:Wv,children:"Python script"})," to generate track files from CSV files exported from FFLogs. See ",l.jsx("a",{href:Xv,children:"this page"})," for detailed usage instructions. If you're unwilling or unable to run the Python script on your own computer, you may also run it directly in your web browser through our"," ",l.jsx("a",{href:qv,children:"Colab notebook"}),"."]}),l.jsxs("p",{children:["To retrieve markers directly from a report using the FFLogs API, you may also use leifengsang's ",l.jsx("a",{href:Zv,children:"XivInTheShellMarkerGen"})," Python script (instructions in Chinese). This script reads a user-provided configuration file with names of enemy cast and damage events, and produces a track file directly from a report ID."]})]})}function wz(){return l.jsxs(l.Fragment,{children:[l.jsx(ka,{id:"fight-markers",label:""}),l.jsx(Be,{id:"loading-presets",label:""}),l.jsx(lt,{id:"11",name:"markers"}),l.jsx("p",{children:"XIV in the Shell "}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(1)"})," "," ",l.jsx("b",{children:"(2)"})," /"]}),l.jsx("p",{children:""}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("b",{children:""})," ",""]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," "]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," "]})]}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(3)"})," ",""]}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(4)"}),"  ",l.jsx("b",{children:"(5)"})," ",""]}),l.jsx(Be,{id:"loading-presets-phases",label:""}),l.jsx(lt,{id:"12",name:"phase_load"}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(1)"})," /"]}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(2)"})," "," ",l.jsx("b",{children:"(3)"})," 0 ",l.jsx("b",{children:"(5)"})," ",""]}),l.jsx("p",{children:' FFLogs BOSSLogs FFLogs  Filter Expression type="targetabilityupdate" '}),l.jsx("img",{src:"assets/ManualScreenshots/targetabilityupdate.png"}),l.jsx("p",{children:""}),l.jsx(Be,{id:"adding-custom-markers",label:""}),l.jsx(lt,{id:"13a",name:"pct_opener"}),l.jsxs("p",{children:["Buff ",l.jsx("b",{children:"(1)"})," ",""]}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("b",{children:""})," Boss "]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," ",""]}),l.jsxs("li",{children:[l.jsx("b",{children:""}),"  Boss  DoT "]})]}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(2)"})," 0 "]}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(3)"})," ","Buff"]}),l.jsx(Be,{id:"exporting-markers",label:""}),l.jsx(lt,{id:"13b",name:"pct_opener"}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(1)"}),"  ",l.jsx("b",{children:"(2)"})," "," ",l.jsx("b",{children:"(3)"})," "]}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(4)"})," _"," ",l.jsx("b",{children:"(4)"})," "]}),l.jsx(Be,{id:"creating-markers-from-logs",label:"Logs"}),l.jsx("p",{children:" FFLogs "}),l.jsxs("p",{children:["XIV in the Shell ",l.jsx("a",{href:Wv,children:"Python"})," FFLogs  CSV ",l.jsx("a",{href:Xv,children:""}),""," ",l.jsx("a",{href:qv,children:"Colab notebook"})," "]}),l.jsxs("p",{children:[" ",l.jsx("a",{href:Zv,children:"XivInTheShellMarkerGen"})," Python  FFLogs API  ID gui"]})]})}const Fl=e=>l.jsx(oi,{text:e});function Pz(){return l.jsxs(l.Fragment,{children:[l.jsx(ka,{id:"import-export",label:"Import and Export"}),l.jsx(Be,{id:"exporting-text",label:"Exporting to a Text File"}),l.jsx(lt,{id:"14",name:"importexport"}),l.jsxs("p",{children:['You can download the active timeline as a text file from the "Import/Export" menu, by clicking the "txt format" link ',l.jsx("b",{children:"(1)"}),'. This file can then be shared and imported through the "Load from file" menu ',l.jsx("b",{children:"(2)"}),". We recommend you export your plans frequently to avoid accidentally losing progress."]}),l.jsx(Be,{id:"importing-fflogs",label:"Importing From FFLogs"}),l.jsx("p",{children:'Fight plans can be imported directly from FFLogs reports from the "Import fight from FFLogs" menu. This will open a dialog to begin the first step of the log import process.'}),l.jsxs("ol",{children:[l.jsxs("li",{children:["Click the button to allow ",l.jsx("i",{children:"XIV in the Shell"})," to read FFLogs reports on your behalf."]}),l.jsxs("li",{children:["Paste a log report URL. The link may contain a full report, a specific fight number, and/or a specific player number.",l.jsxs("ol",{type:"a",children:[l.jsx("li",{children:"If the URL did not specify a single fight, click the desired pull from the list of fights."}),l.jsx("li",{children:"After choosing a specific fight and a player was not specified in the URL, click the desired player name from the list of players."})]})]}),l.jsx("li",{children:"Enter the combat stats of the selected player. Due to limitations with FFLogs, all stats for players other than the creator of the log must be entered manually or estimated, and will use the values of the most recently-created timeline for that job by default."}),l.jsxs("li",{children:['After pressing "go," ',l.jsx("i",{children:"XIV in the Shell"}),' will import the list of actions from the log to the active timeline slot, automatically inserting "wait" and "delay" events as appropriate. You will see a table summarizing the differences between simulated timestamps and those recorded in the log, as well as a list of actions that the simulation believes did not meet their activation requirements. After closing the dialog, you may edit the configuration and timeline actions as needed to make the timeline valid.']})]}),l.jsx(Be,{id:"text-copy-paste",label:"Text Copy/Paste"}),l.jsxs("p",{children:[l.jsx("i",{children:"XIV in the Shell"})," allows copy/pasting sequences of actions with ",Fl("ctrl"),"+",Fl("c")," and ",Fl("ctrl"),"+",Fl("v"),". Three different formats are supported:"]}),l.jsx("p",{children:l.jsx("i",{children:"Example sequence: Fire III, Fire IV, Despair"})}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"Plain text"})," A comma-separated list of actions names.",l.jsx("p",{className:"no-indent",children:l.jsx("i",{children:"Example:"})}),l.jsx("p",{children:"Fire 3, Fire 4, Despair"})]}),l.jsxs("li",{children:[l.jsx("b",{children:"Tab-separated lines"})," A tab-separated list of usage timestamps, target counts, and skill names, compatible with external spreadsheet applications.",l.jsx("p",{className:"no-indent",children:l.jsx("i",{children:"Example:"})}),l.jsx("table",{style:{marginLeft:"1.5rem"},children:l.jsxs("tbody",{children:[l.jsxs("tr",{children:[l.jsx("td",{children:"-3.500"}),l.jsx("td",{children:"1"}),l.jsx("td",{children:"Fire 3"})]}),l.jsxs("tr",{children:[l.jsx("td",{children:"0.042"}),l.jsx("td",{children:"1"}),l.jsx("td",{children:"Fire 4"})]}),l.jsxs("tr",{children:[l.jsx("td",{children:"2.500"}),l.jsx("td",{children:"1"}),l.jsx("td",{children:"despair"})]})]})})]}),l.jsxs("li",{children:[l.jsx("b",{children:"Discord emotes"})," A sequence of Discord emotes (only verified for BLM and PCT).",l.jsx("p",{className:"no-indent",children:l.jsx("i",{children:"Example:"})}),l.jsx("p",{children:":F3: :F4: :Despair:"})]})]}),l.jsxs("p",{children:["The format copied to the clipboard from ",l.jsx("i",{children:"XIV in the Shell"}),' is determined by the "Clipboard copy mode" found in the "Settings" tab at the bottom of the page. Pasting from any of these three formats is always valid, regardless of the value of this setting.']}),l.jsx(Be,{id:"exporting-images",label:"Exporting an Image"}),l.jsx(lt,{id:"18b",name:"importexport"}),l.jsxs("p",{children:["Besides using your computer's built-in screenshot functionality, you may also use"," ",l.jsx("i",{children:"XIV in the Shell"}),`'s "Image Export" feature to download a timeline as a PNG image.`]}),l.jsxs("p",{children:['To export the selected portion of a timeline as an image, press the "export selection as png" link ',l.jsx("b",{children:"(1)"}),". If no actions are selected, the entirety of the active timeline is selected."]}),l.jsxs("p",{children:['To split the exported image across multiple lines, set the "seconds before wrapping" field ',l.jsx("b",{children:"(2)"})," to a non-zero value. Each row in the image will contain at most the specified number of seconds."]}),l.jsx("p",{children:'To omit the time ruler and fight markers from export, uncheck the "include time and markers" setting. Timeline elements in the export are also affected by the display settings configured in the "Settings" tab.'}),l.jsx(Be,{id:"exporting-damage-logs",label:"Exporting Damage Logs"}),l.jsx(lt,{id:"17",name:"damageexport"}),l.jsxs("p",{children:['You can export a detailed log of all damage events by clicking the "downloaded detailed damage log as CSV file" button ',l.jsx("b",{children:"(1)"})," above the site's potency summary table. The output contains 3 columns:"]}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"time"})," The decimal timestamp, in seconds, at which the damage event occurred."]}),l.jsxs("li",{children:[l.jsx("b",{children:"damageSource"})," The name and usage time of the ability that caused this damage event."]}),l.jsxs("li",{children:[l.jsx("b",{children:"potency"})," The total potency (including buffs and modifiers) of this damage event."]})]}),l.jsx(Be,{id:"exporting-for-external-tools",label:"Exporting for External Tools"}),l.jsx(lt,{id:"18b",name:"importexport"}),l.jsxs("p",{children:[`Use the "excel / Tischel's plugin csv format" download link `,l.jsx("b",{children:"(1)"})," to generate a file compatible with external tools, like spreadsheet software or Tischel's"," ",l.jsx("a",{href:sm,children:"BLM in the Shell Plugin"}),". The exported CSV will contain the following columns:"]}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"time"})," The decimal timestamp, in seconds, at which the action was used."]}),l.jsxs("li",{children:[l.jsx("b",{children:"action"})," The name of the action used."]}),l.jsxs("li",{children:[l.jsx("b",{children:"isGCD"})," 1 if the action is a GCD ability, 0 if not."]}),l.jsxs("li",{children:[l.jsx("b",{children:"castTime"})," The duration, in seconds, of this action's cast time. 0 If the action did not have a cast time."]})]}),l.jsx(Be,{id:"exporting-for-combat-sim",label:"Exporting to Amarantine's Combat Simulator"}),l.jsxs("p",{children:[l.jsx("a",{href:Yc,children:"Amarantine's Combat Simulator"})," provides powerful DPS simulation and kill time estimation capabilities. ",l.jsx("i",{children:"XIV in the Shell"})," can be used to generate and edit timelines that are compatible with this simulator, and both tools are used by many speedkill teams as part of their planning process."]}),l.jsxs("p",{children:[`To download a CSV file compatible with Ama's Combat Sim, use the "Amarantine's combat simulator csv format" download link `,l.jsx("b",{children:"(2)"}),". The generated CSV file will also contain metadata headers describing the configured combat stats, external party buff timeline markers, and untargetable downtime windows."]}),l.jsxs("p",{children:["Note that if the configured combat stats were originally imported from XivGear or etro, stats in the gearset that cannot be directly configured within ",l.jsx("i",{children:"XIV in the Shell"})," ","(WD, STR/DEX/MND/INT, and TEN) will also be included in the export file for simulation purposes."]})]})}function Gz(){return l.jsxs(l.Fragment,{children:[l.jsx(ka,{id:"import-export",label:""}),l.jsx(Be,{id:"exporting-text",label:""}),l.jsx(lt,{id:"14",name:"importexport"}),l.jsxs("p",{children:['"/""txt " ',l.jsx("b",{children:"(1)"}),"txt ",l.jsx("b",{children:"(2)"})," ",""]}),l.jsx(Be,{id:"importing-fflogs",label:" FFLogs "}),l.jsx("p",{children:'" FFLogs "'}),l.jsxs("ol",{children:[l.jsx("li",{children:" XIV in the Shell  FFLogs "}),l.jsxs("li",{children:["FFLogs/",l.jsxs("ol",{type:"a",children:[l.jsx("li",{children:""}),l.jsx("li",{children:""})]})]}),l.jsx("li",{children:" FFLogs "}),l.jsx("li",{children:"XIV in the Shell "})]}),l.jsx(Be,{id:"text-copy-paste",label:"/"}),l.jsxs("p",{children:["XIV in the Shell  ",Fl("ctrl"),"+",Fl("c")," / ",Fl("ctrl"),"+",Fl("v")," ",""]}),l.jsx("p",{children:l.jsx("i",{children:""})}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("b",{children:""})," ","",l.jsx("p",{className:"no-indent",children:l.jsx("i",{children:""})}),l.jsx("p",{children:""})]}),l.jsxs("li",{children:[l.jsx("b",{children:""})," ",l.jsx("p",{className:"no-indent",children:l.jsx("i",{children:""})}),l.jsx("table",{style:{marginLeft:"1.5rem"},children:l.jsxs("tbody",{children:[l.jsxs("tr",{children:[l.jsx("td",{children:"-3.500"}),l.jsx("td",{children:"1"}),l.jsx("td",{children:""})]}),l.jsxs("tr",{children:[l.jsx("td",{children:"0.042"}),l.jsx("td",{children:"1"}),l.jsx("td",{children:""})]}),l.jsxs("tr",{children:[l.jsx("td",{children:"2.500"}),l.jsx("td",{children:"1"}),l.jsx("td",{children:""})]})]})})]}),l.jsxs("li",{children:[l.jsx("b",{children:"Discord "})," Discord / ",l.jsx("p",{className:"no-indent",children:l.jsx("i",{children:""})}),l.jsx("p",{children:":F3: :F4: :Despair:"})]})]}),l.jsx("p",{children:""}),l.jsx(Be,{id:"exporting-images",label:""}),l.jsx(lt,{id:"18b",name:"importexport"}),l.jsx("p",{children:" PNG"}),l.jsxs("p",{children:['" png" ',l.jsx("b",{children:"(1)"})," ",""]}),l.jsxs("p",{children:[" ",l.jsx("b",{children:"(2)"})," "]}),l.jsx("p",{children:""}),l.jsx(Be,{id:"exporting-damage-logs",label:""}),l.jsx(lt,{id:"17",name:"damageexport"}),l.jsxs("p",{children:['"CSV" ',l.jsx("b",{children:"(1)"})," ",""]}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"time"})," "]}),l.jsxs("li",{children:[l.jsx("b",{children:"damageSource"})," "]}),l.jsxs("li",{children:[l.jsx("b",{children:"potency"})," Buff"]})]}),l.jsx(Be,{id:"exporting-for-external-tools",label:""}),l.jsx(lt,{id:"18a",name:"importexport"}),l.jsxs("p",{children:['"excel / Tischel CSV " ',l.jsx("b",{children:"(1)"}),"  Tischel "," ",l.jsx("a",{href:sm,children:"BLM in the Shell Plugin"})," "]}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("b",{children:"time"})," "]}),l.jsxs("li",{children:[l.jsx("b",{children:"action"})," "]}),l.jsxs("li",{children:[l.jsx("b",{children:"isGCD"})," 1GCD 0 "]}),l.jsxs("li",{children:[l.jsx("b",{children:"castTime"})," 0"]})]}),l.jsx(Be,{id:"exporting-for-combat-sim",label:"Amarantine"}),l.jsxs("p",{children:[l.jsx("a",{href:Yc,children:"Amarantine"})," DPS XIV in the Shell "]}),l.jsxs("p",{children:[' Amarantine CSV "Amarantine CSV " ',l.jsx("b",{children:"(2)"}),""]}),l.jsx("p",{children:" CSV "}),l.jsx("p",{children:" XivGear  etro  XIV in the Shell "})]})}function Bz(){return l.jsxs(l.Fragment,{children:[l.jsx(ka,{id:"additional-resources",label:"Additional Resources"}),l.jsxs("p",{className:"no-indent",children:[l.jsx("i",{children:"XIV in the Shell"}),": ",l.jsx("a",{href:ba,children:"GitHub"})," - ",l.jsx("a",{href:Ed,children:"Blog"})," -"," ",l.jsx("a",{href:Js,children:"Bluesky"})," -"," ",l.jsx("a",{href:er,children:"Discord channel in The Balance"})," -"," ",l.jsx("a",{href:sm,children:"Tischel's BLM in the Shell Dalamud Plugin"})]}),l.jsxs("p",{className:"no-indent",children:["Game assets and information:"," ",l.jsx("a",{href:Sz,children:"Official FFXIV PvE job guide"})," -"," ",l.jsx("a",{href:gz,children:"FFXIV Community Wiki"})," - ",l.jsx("a",{href:Pv,children:"XIVAPI"})," -"," ",l.jsx("a",{href:Gv,children:"XIV-ID"})]}),l.jsxs("p",{className:"no-indent",children:["Job gameplay: ",l.jsx("a",{href:om,children:"The Balance"})," -"," ",l.jsx("a",{href:lm,children:"Icy Veins"})," - ",l.jsx("a",{href:Hv,children:"FFLogs"})]}),l.jsxs("p",{className:"no-indent",children:["Game formulas, mechanics, and other cursed knowledge:"," ",l.jsx("a",{href:Bv,children:"Allagan Studies"})," -"," ",l.jsx("a",{href:Fv,children:"#battle_system_discussion in The Balance"})," - Savage Speedkill Memorandum [",l.jsx("a",{href:jv,children:"JP"}),"][",l.jsx("a",{href:zv,children:"EN"}),"] -"," ",l.jsx("a",{href:Yv,children:"Game's Haunted"})," - FPS tax research [",l.jsx("a",{href:Kv,children:"CN"}),"][",l.jsx("a",{href:Vv,children:"EN"}),"]"]}),l.jsxs("p",{className:"no-indent",children:["Other FFXIV community tools: ",l.jsx("a",{href:Uv,children:"xivanalysis"})," -"," ",l.jsx("a",{href:Og,children:"XivGear"})," - ",l.jsx("a",{href:wv,children:"XIV Raider"})," and"," ",l.jsx("a",{href:Yc,children:"Ama's Combat Sim"})]})]})}function Fz(){return l.jsxs(l.Fragment,{children:[l.jsx(ka,{id:"additional-resources",label:""}),l.jsxs("p",{className:"no-indent",children:[l.jsx("i",{children:"XIV in the Shell"}),": ",l.jsx("a",{href:ba,children:"GitHub"})," - ",l.jsx("a",{href:Ed,children:"Blog"})," -"," ",l.jsx("a",{href:Js,children:"Bluesky"})," - ",l.jsx("a",{href:er,children:"Discord"})," -"," ",l.jsx("a",{href:sm,children:"TischelBLM in the Shell"})]}),l.jsxs("p",{className:"no-indent",children:[": ",l.jsx("a",{href:pz,children:"XIV"})," -"," ",l.jsx("a",{href:Nz,children:"XIVwiki"})," - ",l.jsx("a",{href:Pv,children:"XIVAPI"})," -"," ",l.jsx("a",{href:Gv,children:"XIV-ID"})]}),l.jsxs("p",{className:"no-indent",children:[": ",l.jsx("a",{href:om,children:"The Balance"})," -"," ",l.jsx("a",{href:lm,children:"Icy Veins"})," - ",l.jsx("a",{href:Hv,children:"FFLogs"})]}),l.jsxs("p",{className:"no-indent",children:[": ",l.jsx("a",{href:Bv,children:"Allagan Studies"})," -"," ",l.jsx("a",{href:Cz,children:" "})," -"," ",l.jsx("a",{href:Fv,children:"The Balance"})," -  [",l.jsx("a",{href:jv,children:""}),"][",l.jsx("a",{href:zv,children:""}),"] -"," ",l.jsx("a",{href:Yv,children:"Game's Haunted"})," -  [",l.jsx("a",{href:Kv,children:""}),"][",l.jsx("a",{href:Vv,children:""}),"]"]}),l.jsxs("p",{className:"no-indent",children:[": ",l.jsx("a",{href:Uv,children:"xivanalysis"})," -"," ",l.jsx("a",{href:bz,children:"14"})," - ",l.jsx("a",{href:wv,children:"XIV Raider"})," "," ",l.jsx("a",{href:Yc,children:"Ama"})]})]})}const $T=gE(),rm=C.createContext({items:[],addItem:()=>{}});function jz(e){const t=C.useContext(rm);return l.jsxs("nav",{style:{float:"right",zIndex:1,maxWidth:"18%"},children:[l.jsx("p",{className:"no-indent",style:{paddingLeft:"0.8rem"},children:e.language==="zh"?"":"Navigation"}),l.jsxs("ul",{style:{listStyleType:"none",paddingLeft:"0.8rem",marginTop:"0.3rem"},children:[l.jsx("li",{style:{paddingBlockEnd:"0.15rem"},children:l.jsx("a",{href:"#top",children:e.language==="zh"?"":"back to top"})}),t.items.map(({id:n,label:a,indentLevel:s})=>l.jsx("li",{style:{paddingLeft:s>0?`${s*1.5}em`:void 0,paddingBlock:"0.15rem"},children:l.jsx("a",{href:"#"+n,children:a})},n))]})]})}function ka(e){const t=C.useContext(rm);return C.useEffect(()=>t.addItem({id:e.id,label:e.label,indentLevel:0}),[]),l.jsxs(l.Fragment,{children:[l.jsx("h2",{id:e.id,children:e.label}),e.content]})}function Be(e){const t=C.useContext(rm);return C.useEffect(()=>t.addItem({id:e.id,label:e.label,indentLevel:1}),[]),l.jsxs(l.Fragment,{children:[l.jsx("h3",{id:e.id,children:e.label}),e.content]})}const Qv=C.createContext("en");function lt(e){const t=C.useContext(Qv),n=`${e.id}_${$T==="Dark"?"D":"L"}_${t==="zh"?"Z":"E"}_${e.name}.jpg`;return l.jsx("img",{src:`assets/ManualScreenshots/${n}`,alt:e.alt})}function uT(e){const t=Ni($T),n=l.jsx("style",{children:`
		@supports selector(::-webkit-scrollbar) {
			.visibleScrollbar::-webkit-scrollbar {
				appearance: none;
				background-color: ${t.bgLowContrast};
				height: 8px;
				width: 10px;
			}
			.visibleScrollbar::-webkit-scrollbar-thumb {
				background-color: ${t.bgHighContrast};
			}
		}
		@supports not selector(::-webkit-scrollbar) {
			.visibleScrollbar {
				scrollbar-color: ${t.bgHighContrast} ${t.bgLowContrast};
			}
		}
		a {
			color: ${t.accent};
		}
		b, h1, h2, h3, h4 {
			color: ${t.emphasis};
			margin-bottom: 0.2em;
		}
		p {
			margin-block-start: 0.2em;
			margin-block-end: 0.2em;
			text-indent: 2em;
		}
		.no-indent {
			text-indent: 0;
		}
		p:first-child {
			margin-block-start: 0px;
		}
		.help-tooltip {
			color: ${t.text};
			background-color: ${t.tipBackground};
			opacity: 0.98;
			max-width: 300px;
			outline: 1px solid ${t.bgHighContrast};
			transition: none;
			font-size: 100%;
			z-index: 10;
		}
		button:disabled {
			background-color: ${t.background};
		}
		img {
			width: 80%;
			max-width: fit-content;
			border: 2px dashed ${Ni($T).bgMediumContrast};
			align-self: center;
			margin: 5px;
		}
		ul {
			margin-block: 0;
		}
		ol {
			margin-block: 0;
		}
	`}),a=C.useRef(null);C.useEffect(()=>{var h;(h=a.current)==null||h.focus();const f=window.location.hash.slice(1);f&&a.current&&setTimeout(()=>{const R=document.getElementById(f);if(R&&a.current){const T=a.current.getBoundingClientRect(),S=R.getBoundingClientRect(),g=a.current.scrollTop,_=S.top-T.top+g;a.current.scrollTo({top:_-20,behavior:"smooth"})}},100)},[]);const[s,c]=C.useState([]),d=C.useCallback(({id:f,label:h,indentLevel:m})=>{c(R=>R.find(T=>T.id===f)?R:[...R,{id:f,label:h,indentLevel:m}])},[]);return l.jsxs("div",{ref:a,className:"visibleScrollbar",style:{position:"fixed",top:0,bottom:0,left:0,right:0,outline:"none",accentColor:t.accent,fontFamily:Ca,fontSize:14,color:t.text,backgroundColor:t.background,height:"100%",overflow:"auto"},tabIndex:-1,children:[n,l.jsxs(rm.Provider,{value:{items:s,addItem:d},children:[window.innerWidth>1024&&l.jsx("div",{id:"nav-container",style:{position:"sticky",top:"1rem",marginInline:"1rem"},children:l.jsx(jz,{language:e.language})}),l.jsx(Qv.Provider,{value:e.language??"en",children:l.jsx("div",{style:{marginLeft:"1em",marginRight:"1em",paddingRight:"1em",marginBottom:"1em",display:"flex",flexDirection:"column"},tabIndex:-1,children:e.language==="zh"?Yz():zz()})})]})]})}function zz(){return l.jsxs(l.Fragment,{children:[l.jsx("h1",{id:"top",children:"XIV in the Shell User Manual"}),l.jsx(Dz,{}),l.jsx(vz,{}),l.jsx(Lz,{}),l.jsx(Hz,{}),l.jsx(Uz,{}),l.jsx(Pz,{}),l.jsx(Bz,{})]})}function Yz(){return l.jsxs(l.Fragment,{children:[l.jsx("h1",{id:"top",children:"XIV in the Shell "}),l.jsx(yz,{}),l.jsx(Mz,{}),l.jsx(xz,{}),l.jsx(kz,{}),l.jsx(wz,{}),l.jsx(Gz,{}),l.jsx(Fz,{})]})}const df=O1.createRoot(document.getElementById("root")),Kz=new URLSearchParams(document.location.search),Cb=Array.from(Kz.keys()),ic=window.location.pathname;ic==="/manual"||ic==="/manual/"?df.render(l.jsx(uT,{language:pt("language")??void 0})):ic==="/manual_en"||ic==="/manual_en/"?df.render(l.jsx(uT,{language:"en"})):ic==="/manual_zh"||ic==="/manual_zh/"?df.render(l.jsx(uT,{language:"zh"})):df.render(l.jsx(mz,{command:Cb.length>0?Cb[0]:void 0}));
