var Sy=Object.defineProperty;var mp=e=>{throw TypeError(e)};var gy=(e,t,n)=>t in e?Sy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var j=(e,t,n)=>gy(e,typeof t!="symbol"?t+"":t,n),wA=(e,t,n)=>t.has(e)||mp("Cannot "+n);var te=(e,t,n)=>(wA(e,t,"read from private field"),n?n.call(e):t.get(e)),Pe=(e,t,n)=>t.has(e)?mp("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Me=(e,t,n,l)=>(wA(e,t,"write to private field"),l?l.call(e,n):t.set(e,n),n),_e=(e,t,n)=>(wA(e,t,"access private method"),n);function _y(e,t){for(var n=0;n<t.length;n++){const l=t[n];if(typeof l!="string"&&!Array.isArray(l)){for(const s in l)if(s!=="default"&&!(s in e)){const c=Object.getOwnPropertyDescriptor(l,s);c&&Object.defineProperty(e,s,c.get?c:{enumerable:!0,get:()=>l[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&l(d)}).observe(document,{childList:!0,subtree:!0});function n(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerPolicy&&(c.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?c.credentials="include":s.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function l(s){if(s.ep)return;s.ep=!0;const c=n(s);fetch(s.href,c)}})();function uR(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function py(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function l(){return this instanceof l?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(l){var s=Object.getOwnPropertyDescriptor(e,l);Object.defineProperty(n,l,s.get?s:{enumerable:!0,get:function(){return e[l]}})}),n}var BA={exports:{}},Yc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rp;function Iy(){if(Rp)return Yc;Rp=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(l,s,c){var d=null;if(c!==void 0&&(d=""+c),s.key!==void 0&&(d=""+s.key),"key"in s){c={};for(var f in s)f!=="key"&&(c[f]=s[f])}else c=s;return s=c.ref,{$$typeof:e,type:l,key:d,ref:s!==void 0?s:null,props:c}}return Yc.Fragment=t,Yc.jsx=n,Yc.jsxs=n,Yc}var Tp;function Ny(){return Tp||(Tp=1,BA.exports=Iy()),BA.exports}var u=Ny(),FA={exports:{}},Kc={},zA={exports:{}},jA={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sp;function Cy(){return Sp||(Sp=1,function(e){function t(w,L){var W=w.length;w.push(L);e:for(;0<W;){var le=W-1>>>1,D=w[le];if(0<s(D,L))w[le]=L,w[W]=D,W=le;else break e}}function n(w){return w.length===0?null:w[0]}function l(w){if(w.length===0)return null;var L=w[0],W=w.pop();if(W!==L){w[0]=W;e:for(var le=0,D=w.length,X=D>>>1;le<X;){var Z=2*(le+1)-1,Y=w[Z],ce=Z+1,me=w[ce];if(0>s(Y,W))ce<D&&0>s(me,Y)?(w[le]=me,w[ce]=W,le=ce):(w[le]=Y,w[Z]=W,le=Z);else if(ce<D&&0>s(me,W))w[le]=me,w[ce]=W,le=ce;else break e}}return L}function s(w,L){var W=w.sortIndex-L.sortIndex;return W!==0?W:w.id-L.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;e.unstable_now=function(){return c.now()}}else{var d=Date,f=d.now();e.unstable_now=function(){return d.now()-f}}var E=[],A=[],R=1,T=null,S=3,g=!1,I=!1,b=!1,y=!1,M=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;function H(w){for(var L=n(A);L!==null;){if(L.callback===null)l(A);else if(L.startTime<=w)l(A),L.sortIndex=L.expirationTime,t(E,L);else break;L=n(A)}}function K(w){if(b=!1,H(w),!I)if(n(E)!==null)I=!0,F||(F=!0,de());else{var L=n(A);L!==null&&J(K,L.startTime-w)}}var F=!1,x=-1,re=5,ie=-1;function se(){return y?!0:!(e.unstable_now()-ie<re)}function oe(){if(y=!1,F){var w=e.unstable_now();ie=w;var L=!0;try{e:{I=!1,b&&(b=!1,v(x),x=-1),g=!0;var W=S;try{t:{for(H(w),T=n(E);T!==null&&!(T.expirationTime>w&&se());){var le=T.callback;if(typeof le=="function"){T.callback=null,S=T.priorityLevel;var D=le(T.expirationTime<=w);if(w=e.unstable_now(),typeof D=="function"){T.callback=D,H(w),L=!0;break t}T===n(E)&&l(E),H(w)}else l(E);T=n(E)}if(T!==null)L=!0;else{var X=n(A);X!==null&&J(K,X.startTime-w),L=!1}}break e}finally{T=null,S=W,g=!1}L=void 0}}finally{L?de():F=!1}}}var de;if(typeof U=="function")de=function(){U(oe)};else if(typeof MessageChannel<"u"){var Ae=new MessageChannel,ee=Ae.port2;Ae.port1.onmessage=oe,de=function(){ee.postMessage(null)}}else de=function(){M(oe,0)};function J(w,L){x=M(function(){w(e.unstable_now())},L)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(w){w.callback=null},e.unstable_forceFrameRate=function(w){0>w||125<w?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):re=0<w?Math.floor(1e3/w):5},e.unstable_getCurrentPriorityLevel=function(){return S},e.unstable_next=function(w){switch(S){case 1:case 2:case 3:var L=3;break;default:L=S}var W=S;S=L;try{return w()}finally{S=W}},e.unstable_requestPaint=function(){y=!0},e.unstable_runWithPriority=function(w,L){switch(w){case 1:case 2:case 3:case 4:case 5:break;default:w=3}var W=S;S=w;try{return L()}finally{S=W}},e.unstable_scheduleCallback=function(w,L,W){var le=e.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?le+W:le):W=le,w){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=W+D,w={id:R++,callback:L,priorityLevel:w,startTime:W,expirationTime:D,sortIndex:-1},W>le?(w.sortIndex=W,t(A,w),n(E)===null&&w===n(A)&&(b?(v(x),x=-1):b=!0,J(K,W-le))):(w.sortIndex=D,t(E,w),I||g||(I=!0,F||(F=!0,de()))),w},e.unstable_shouldYield=se,e.unstable_wrapCallback=function(w){var L=S;return function(){var W=S;S=L;try{return w.apply(this,arguments)}finally{S=W}}}}(jA)),jA}var gp;function by(){return gp||(gp=1,zA.exports=Cy()),zA.exports}var YA={exports:{}},Ye={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _p;function Oy(){if(_p)return Ye;_p=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),A=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),T=Symbol.iterator;function S(D){return D===null||typeof D!="object"?null:(D=T&&D[T]||D["@@iterator"],typeof D=="function"?D:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I=Object.assign,b={};function y(D,X,Z){this.props=D,this.context=X,this.refs=b,this.updater=Z||g}y.prototype.isReactComponent={},y.prototype.setState=function(D,X){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,X,"setState")},y.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function M(){}M.prototype=y.prototype;function v(D,X,Z){this.props=D,this.context=X,this.refs=b,this.updater=Z||g}var U=v.prototype=new M;U.constructor=v,I(U,y.prototype),U.isPureReactComponent=!0;var H=Array.isArray,K={H:null,A:null,T:null,S:null,V:null},F=Object.prototype.hasOwnProperty;function x(D,X,Z,Y,ce,me){return Z=me.ref,{$$typeof:e,type:D,key:X,ref:Z!==void 0?Z:null,props:me}}function re(D,X){return x(D.type,X,void 0,void 0,void 0,D.props)}function ie(D){return typeof D=="object"&&D!==null&&D.$$typeof===e}function se(D){var X={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(Z){return X[Z]})}var oe=/\/+/g;function de(D,X){return typeof D=="object"&&D!==null&&D.key!=null?se(""+D.key):X.toString(36)}function Ae(){}function ee(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(Ae,Ae):(D.status="pending",D.then(function(X){D.status==="pending"&&(D.status="fulfilled",D.value=X)},function(X){D.status==="pending"&&(D.status="rejected",D.reason=X)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function J(D,X,Z,Y,ce){var me=typeof D;(me==="undefined"||me==="boolean")&&(D=null);var he=!1;if(D===null)he=!0;else switch(me){case"bigint":case"string":case"number":he=!0;break;case"object":switch(D.$$typeof){case e:case t:he=!0;break;case R:return he=D._init,J(he(D._payload),X,Z,Y,ce)}}if(he)return ce=ce(D),he=Y===""?"."+de(D,0):Y,H(ce)?(Z="",he!=null&&(Z=he.replace(oe,"$&/")+"/"),J(ce,X,Z,"",function(Oe){return Oe})):ce!=null&&(ie(ce)&&(ce=re(ce,Z+(ce.key==null||D&&D.key===ce.key?"":(""+ce.key).replace(oe,"$&/")+"/")+he)),X.push(ce)),1;he=0;var Se=Y===""?".":Y+":";if(H(D))for(var Te=0;Te<D.length;Te++)Y=D[Te],me=Se+de(Y,Te),he+=J(Y,X,Z,me,ce);else if(Te=S(D),typeof Te=="function")for(D=Te.call(D),Te=0;!(Y=D.next()).done;)Y=Y.value,me=Se+de(Y,Te++),he+=J(Y,X,Z,me,ce);else if(me==="object"){if(typeof D.then=="function")return J(ee(D),X,Z,Y,ce);throw X=String(D),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return he}function w(D,X,Z){if(D==null)return D;var Y=[],ce=0;return J(D,Y,"","",function(me){return X.call(Z,me,ce++)}),Y}function L(D){if(D._status===-1){var X=D._result;X=X(),X.then(function(Z){(D._status===0||D._status===-1)&&(D._status=1,D._result=Z)},function(Z){(D._status===0||D._status===-1)&&(D._status=2,D._result=Z)}),D._status===-1&&(D._status=0,D._result=X)}if(D._status===1)return D._result.default;throw D._result}var W=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)};function le(){}return Ye.Children={map:w,forEach:function(D,X,Z){w(D,function(){X.apply(this,arguments)},Z)},count:function(D){var X=0;return w(D,function(){X++}),X},toArray:function(D){return w(D,function(X){return X})||[]},only:function(D){if(!ie(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},Ye.Component=y,Ye.Fragment=n,Ye.Profiler=s,Ye.PureComponent=v,Ye.StrictMode=l,Ye.Suspense=E,Ye.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=K,Ye.__COMPILER_RUNTIME={__proto__:null,c:function(D){return K.H.useMemoCache(D)}},Ye.cache=function(D){return function(){return D.apply(null,arguments)}},Ye.cloneElement=function(D,X,Z){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var Y=I({},D.props),ce=D.key,me=void 0;if(X!=null)for(he in X.ref!==void 0&&(me=void 0),X.key!==void 0&&(ce=""+X.key),X)!F.call(X,he)||he==="key"||he==="__self"||he==="__source"||he==="ref"&&X.ref===void 0||(Y[he]=X[he]);var he=arguments.length-2;if(he===1)Y.children=Z;else if(1<he){for(var Se=Array(he),Te=0;Te<he;Te++)Se[Te]=arguments[Te+2];Y.children=Se}return x(D.type,ce,void 0,void 0,me,Y)},Ye.createContext=function(D){return D={$$typeof:d,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:c,_context:D},D},Ye.createElement=function(D,X,Z){var Y,ce={},me=null;if(X!=null)for(Y in X.key!==void 0&&(me=""+X.key),X)F.call(X,Y)&&Y!=="key"&&Y!=="__self"&&Y!=="__source"&&(ce[Y]=X[Y]);var he=arguments.length-2;if(he===1)ce.children=Z;else if(1<he){for(var Se=Array(he),Te=0;Te<he;Te++)Se[Te]=arguments[Te+2];ce.children=Se}if(D&&D.defaultProps)for(Y in he=D.defaultProps,he)ce[Y]===void 0&&(ce[Y]=he[Y]);return x(D,me,void 0,void 0,null,ce)},Ye.createRef=function(){return{current:null}},Ye.forwardRef=function(D){return{$$typeof:f,render:D}},Ye.isValidElement=ie,Ye.lazy=function(D){return{$$typeof:R,_payload:{_status:-1,_result:D},_init:L}},Ye.memo=function(D,X){return{$$typeof:A,type:D,compare:X===void 0?null:X}},Ye.startTransition=function(D){var X=K.T,Z={};K.T=Z;try{var Y=D(),ce=K.S;ce!==null&&ce(Z,Y),typeof Y=="object"&&Y!==null&&typeof Y.then=="function"&&Y.then(le,W)}catch(me){W(me)}finally{K.T=X}},Ye.unstable_useCacheRefresh=function(){return K.H.useCacheRefresh()},Ye.use=function(D){return K.H.use(D)},Ye.useActionState=function(D,X,Z){return K.H.useActionState(D,X,Z)},Ye.useCallback=function(D,X){return K.H.useCallback(D,X)},Ye.useContext=function(D){return K.H.useContext(D)},Ye.useDebugValue=function(){},Ye.useDeferredValue=function(D,X){return K.H.useDeferredValue(D,X)},Ye.useEffect=function(D,X,Z){var Y=K.H;if(typeof Z=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Y.useEffect(D,X)},Ye.useId=function(){return K.H.useId()},Ye.useImperativeHandle=function(D,X,Z){return K.H.useImperativeHandle(D,X,Z)},Ye.useInsertionEffect=function(D,X){return K.H.useInsertionEffect(D,X)},Ye.useLayoutEffect=function(D,X){return K.H.useLayoutEffect(D,X)},Ye.useMemo=function(D,X){return K.H.useMemo(D,X)},Ye.useOptimistic=function(D,X){return K.H.useOptimistic(D,X)},Ye.useReducer=function(D,X,Z){return K.H.useReducer(D,X,Z)},Ye.useRef=function(D){return K.H.useRef(D)},Ye.useState=function(D){return K.H.useState(D)},Ye.useSyncExternalStore=function(D,X,Z){return K.H.useSyncExternalStore(D,X,Z)},Ye.useTransition=function(){return K.H.useTransition()},Ye.version="19.1.0",Ye}var pp;function dR(){return pp||(pp=1,YA.exports=Oy()),YA.exports}var KA={exports:{}},$a={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ip;function Dy(){if(Ip)return $a;Ip=1;var e=dR();function t(E){var A="https://react.dev/errors/"+E;if(1<arguments.length){A+="?args[]="+encodeURIComponent(arguments[1]);for(var R=2;R<arguments.length;R++)A+="&args[]="+encodeURIComponent(arguments[R])}return"Minified React error #"+E+"; visit "+A+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var l={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function c(E,A,R){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:T==null?null:""+T,children:E,containerInfo:A,implementation:R}}var d=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(E,A){if(E==="font")return"";if(typeof A=="string")return A==="use-credentials"?A:""}return $a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=l,$a.createPortal=function(E,A){var R=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!A||A.nodeType!==1&&A.nodeType!==9&&A.nodeType!==11)throw Error(t(299));return c(E,A,null,R)},$a.flushSync=function(E){var A=d.T,R=l.p;try{if(d.T=null,l.p=2,E)return E()}finally{d.T=A,l.p=R,l.d.f()}},$a.preconnect=function(E,A){typeof E=="string"&&(A?(A=A.crossOrigin,A=typeof A=="string"?A==="use-credentials"?A:"":void 0):A=null,l.d.C(E,A))},$a.prefetchDNS=function(E){typeof E=="string"&&l.d.D(E)},$a.preinit=function(E,A){if(typeof E=="string"&&A&&typeof A.as=="string"){var R=A.as,T=f(R,A.crossOrigin),S=typeof A.integrity=="string"?A.integrity:void 0,g=typeof A.fetchPriority=="string"?A.fetchPriority:void 0;R==="style"?l.d.S(E,typeof A.precedence=="string"?A.precedence:void 0,{crossOrigin:T,integrity:S,fetchPriority:g}):R==="script"&&l.d.X(E,{crossOrigin:T,integrity:S,fetchPriority:g,nonce:typeof A.nonce=="string"?A.nonce:void 0})}},$a.preinitModule=function(E,A){if(typeof E=="string")if(typeof A=="object"&&A!==null){if(A.as==null||A.as==="script"){var R=f(A.as,A.crossOrigin);l.d.M(E,{crossOrigin:R,integrity:typeof A.integrity=="string"?A.integrity:void 0,nonce:typeof A.nonce=="string"?A.nonce:void 0})}}else A==null&&l.d.M(E)},$a.preload=function(E,A){if(typeof E=="string"&&typeof A=="object"&&A!==null&&typeof A.as=="string"){var R=A.as,T=f(R,A.crossOrigin);l.d.L(E,R,{crossOrigin:T,integrity:typeof A.integrity=="string"?A.integrity:void 0,nonce:typeof A.nonce=="string"?A.nonce:void 0,type:typeof A.type=="string"?A.type:void 0,fetchPriority:typeof A.fetchPriority=="string"?A.fetchPriority:void 0,referrerPolicy:typeof A.referrerPolicy=="string"?A.referrerPolicy:void 0,imageSrcSet:typeof A.imageSrcSet=="string"?A.imageSrcSet:void 0,imageSizes:typeof A.imageSizes=="string"?A.imageSizes:void 0,media:typeof A.media=="string"?A.media:void 0})}},$a.preloadModule=function(E,A){if(typeof E=="string")if(A){var R=f(A.as,A.crossOrigin);l.d.m(E,{as:typeof A.as=="string"&&A.as!=="script"?A.as:void 0,crossOrigin:R,integrity:typeof A.integrity=="string"?A.integrity:void 0})}else l.d.m(E)},$a.requestFormReset=function(E){l.d.r(E)},$a.unstable_batchedUpdates=function(E,A){return E(A)},$a.useFormState=function(E,A,R){return d.H.useFormState(E,A,R)},$a.useFormStatus=function(){return d.H.useHostTransitionStatus()},$a.version="19.1.0",$a}var Np;function RN(){if(Np)return KA.exports;Np=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),KA.exports=Dy(),KA.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cp;function yy(){if(Cp)return Kc;Cp=1;var e=by(),t=dR(),n=RN();function l(a){var i="https://react.dev/errors/"+a;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+a+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function c(a){var i=a,o=a;if(a.alternate)for(;i.return;)i=i.return;else{a=i;do i=a,(i.flags&4098)!==0&&(o=i.return),a=i.return;while(a)}return i.tag===3?o:null}function d(a){if(a.tag===13){var i=a.memoizedState;if(i===null&&(a=a.alternate,a!==null&&(i=a.memoizedState)),i!==null)return i.dehydrated}return null}function f(a){if(c(a)!==a)throw Error(l(188))}function E(a){var i=a.alternate;if(!i){if(i=c(a),i===null)throw Error(l(188));return i!==a?null:a}for(var o=a,r=i;;){var h=o.return;if(h===null)break;var m=h.alternate;if(m===null){if(r=h.return,r!==null){o=r;continue}break}if(h.child===m.child){for(m=h.child;m;){if(m===o)return f(h),a;if(m===r)return f(h),i;m=m.sibling}throw Error(l(188))}if(o.return!==r.return)o=h,r=m;else{for(var _=!1,N=h.child;N;){if(N===o){_=!0,o=h,r=m;break}if(N===r){_=!0,r=h,o=m;break}N=N.sibling}if(!_){for(N=m.child;N;){if(N===o){_=!0,o=m,r=h;break}if(N===r){_=!0,r=m,o=h;break}N=N.sibling}if(!_)throw Error(l(189))}}if(o.alternate!==r)throw Error(l(190))}if(o.tag!==3)throw Error(l(188));return o.stateNode.current===o?a:i}function A(a){var i=a.tag;if(i===5||i===26||i===27||i===6)return a;for(a=a.child;a!==null;){if(i=A(a),i!==null)return i;a=a.sibling}return null}var R=Object.assign,T=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),v=Symbol.for("react.consumer"),U=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),re=Symbol.for("react.lazy"),ie=Symbol.for("react.activity"),se=Symbol.for("react.memo_cache_sentinel"),oe=Symbol.iterator;function de(a){return a===null||typeof a!="object"?null:(a=oe&&a[oe]||a["@@iterator"],typeof a=="function"?a:null)}var Ae=Symbol.for("react.client.reference");function ee(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===Ae?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case I:return"Fragment";case y:return"Profiler";case b:return"StrictMode";case K:return"Suspense";case F:return"SuspenseList";case ie:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case g:return"Portal";case U:return(a.displayName||"Context")+".Provider";case v:return(a._context.displayName||"Context")+".Consumer";case H:var i=a.render;return a=a.displayName,a||(a=i.displayName||i.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case x:return i=a.displayName||null,i!==null?i:ee(a.type)||"Memo";case re:i=a._payload,a=a._init;try{return ee(a(i))}catch{}}return null}var J=Array.isArray,w=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W={pending:!1,data:null,method:null,action:null},le=[],D=-1;function X(a){return{current:a}}function Z(a){0>D||(a.current=le[D],le[D]=null,D--)}function Y(a,i){D++,le[D]=a.current,a.current=i}var ce=X(null),me=X(null),he=X(null),Se=X(null);function Te(a,i){switch(Y(he,i),Y(me,a),Y(ce,null),i.nodeType){case 9:case 11:a=(a=i.documentElement)&&(a=a.namespaceURI)?Y_(a):0;break;default:if(a=i.tagName,i=i.namespaceURI)i=Y_(i),a=K_(i,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}Z(ce),Y(ce,a)}function Oe(){Z(ce),Z(me),Z(he)}function Be(a){a.memoizedState!==null&&Y(Se,a);var i=ce.current,o=K_(i,a.type);i!==o&&(Y(me,a),Y(ce,o))}function be(a){me.current===a&&(Z(ce),Z(me)),Se.current===a&&(Z(Se),wc._currentValue=W)}var Ne=Object.prototype.hasOwnProperty,Ie=e.unstable_scheduleCallback,xe=e.unstable_cancelCallback,nt=e.unstable_shouldYield,yt=e.unstable_requestPaint,it=e.unstable_now,st=e.unstable_getCurrentPriorityLevel,Tt=e.unstable_ImmediatePriority,St=e.unstable_UserBlockingPriority,Qt=e.unstable_NormalPriority,Ro=e.unstable_LowPriority,As=e.unstable_IdlePriority,vu=e.log,Mu=e.unstable_setDisableYieldValue,Wr=null,Dn=null;function _l(a){if(typeof vu=="function"&&Mu(a),Dn&&typeof Dn.setStrictMode=="function")try{Dn.setStrictMode(Wr,a)}catch{}}var yn=Math.clz32?Math.clz32:lO,nO=Math.log,iO=Math.LN2;function lO(a){return a>>>=0,a===0?32:31-(nO(a)/iO|0)|0}var Lu=256,Hu=4194304;function To(a){var i=a&42;if(i!==0)return i;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function xu(a,i,o){var r=a.pendingLanes;if(r===0)return 0;var h=0,m=a.suspendedLanes,_=a.pingedLanes;a=a.warmLanes;var N=r&134217727;return N!==0?(r=N&~m,r!==0?h=To(r):(_&=N,_!==0?h=To(_):o||(o=N&~a,o!==0&&(h=To(o))))):(N=r&~m,N!==0?h=To(N):_!==0?h=To(_):o||(o=r&~a,o!==0&&(h=To(o)))),h===0?0:i!==0&&i!==h&&(i&m)===0&&(m=h&-h,o=i&-i,m>=o||m===32&&(o&4194048)!==0)?i:h}function qr(a,i){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&i)===0}function oO(a,i){switch(a){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function OT(){var a=Lu;return Lu<<=1,(Lu&4194048)===0&&(Lu=256),a}function DT(){var a=Hu;return Hu<<=1,(Hu&62914560)===0&&(Hu=4194304),a}function Dh(a){for(var i=[],o=0;31>o;o++)i.push(a);return i}function Xr(a,i){a.pendingLanes|=i,i!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function sO(a,i,o,r,h,m){var _=a.pendingLanes;a.pendingLanes=o,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=o,a.entangledLanes&=o,a.errorRecoveryDisabledLanes&=o,a.shellSuspendCounter=0;var N=a.entanglements,k=a.expirationTimes,Q=a.hiddenUpdates;for(o=_&~o;0<o;){var fe=31-yn(o),Re=1<<fe;N[fe]=0,k[fe]=-1;var ae=Q[fe];if(ae!==null)for(Q[fe]=null,fe=0;fe<ae.length;fe++){var ne=ae[fe];ne!==null&&(ne.lane&=-536870913)}o&=~Re}r!==0&&yT(a,r,0),m!==0&&h===0&&a.tag!==0&&(a.suspendedLanes|=m&~(_&~i))}function yT(a,i,o){a.pendingLanes|=i,a.suspendedLanes&=~i;var r=31-yn(i);a.entangledLanes|=i,a.entanglements[r]=a.entanglements[r]|1073741824|o&4194090}function vT(a,i){var o=a.entangledLanes|=i;for(a=a.entanglements;o;){var r=31-yn(o),h=1<<r;h&i|a[r]&i&&(a[r]|=i),o&=~h}}function yh(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function vh(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function MT(){var a=L.p;return a!==0?a:(a=window.event,a===void 0?32:up(a.type))}function rO(a,i){var o=L.p;try{return L.p=a,i()}finally{L.p=o}}var pl=Math.random().toString(36).slice(2),Za="__reactFiber$"+pl,Rn="__reactProps$"+pl,ms="__reactContainer$"+pl,Mh="__reactEvents$"+pl,cO="__reactListeners$"+pl,uO="__reactHandles$"+pl,LT="__reactResources$"+pl,Zr="__reactMarker$"+pl;function Lh(a){delete a[Za],delete a[Rn],delete a[Mh],delete a[cO],delete a[uO]}function Rs(a){var i=a[Za];if(i)return i;for(var o=a.parentNode;o;){if(i=o[ms]||o[Za]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(a=X_(a);a!==null;){if(o=a[Za])return o;a=X_(a)}return i}a=o,o=a.parentNode}return null}function Ts(a){if(a=a[Za]||a[ms]){var i=a.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return a}return null}function Qr(a){var i=a.tag;if(i===5||i===26||i===27||i===6)return a.stateNode;throw Error(l(33))}function Ss(a){var i=a[LT];return i||(i=a[LT]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Oa(a){a[Zr]=!0}var HT=new Set,xT={};function So(a,i){gs(a,i),gs(a+"Capture",i)}function gs(a,i){for(xT[a]=i,a=0;a<i.length;a++)HT.add(i[a])}var dO=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),UT={},kT={};function fO(a){return Ne.call(kT,a)?!0:Ne.call(UT,a)?!1:dO.test(a)?kT[a]=!0:(UT[a]=!0,!1)}function Uu(a,i,o){if(fO(i))if(o===null)a.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":a.removeAttribute(i);return;case"boolean":var r=i.toLowerCase().slice(0,5);if(r!=="data-"&&r!=="aria-"){a.removeAttribute(i);return}}a.setAttribute(i,""+o)}}function ku(a,i,o){if(o===null)a.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(i);return}a.setAttribute(i,""+o)}}function Ki(a,i,o,r){if(r===null)a.removeAttribute(o);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(o);return}a.setAttributeNS(i,o,""+r)}}var Hh,PT;function _s(a){if(Hh===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);Hh=i&&i[1]||"",PT=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Hh+a+PT}var xh=!1;function Uh(a,i){if(!a||xh)return"";xh=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(i){var Re=function(){throw Error()};if(Object.defineProperty(Re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Re,[])}catch(ne){var ae=ne}Reflect.construct(a,[],Re)}else{try{Re.call()}catch(ne){ae=ne}a.call(Re.prototype)}}else{try{throw Error()}catch(ne){ae=ne}(Re=a())&&typeof Re.catch=="function"&&Re.catch(function(){})}}catch(ne){if(ne&&ae&&typeof ne.stack=="string")return[ne.stack,ae.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=r.DetermineComponentFrameRoot(),_=m[0],N=m[1];if(_&&N){var k=_.split(`
`),Q=N.split(`
`);for(h=r=0;r<k.length&&!k[r].includes("DetermineComponentFrameRoot");)r++;for(;h<Q.length&&!Q[h].includes("DetermineComponentFrameRoot");)h++;if(r===k.length||h===Q.length)for(r=k.length-1,h=Q.length-1;1<=r&&0<=h&&k[r]!==Q[h];)h--;for(;1<=r&&0<=h;r--,h--)if(k[r]!==Q[h]){if(r!==1||h!==1)do if(r--,h--,0>h||k[r]!==Q[h]){var fe=`
`+k[r].replace(" at new "," at ");return a.displayName&&fe.includes("<anonymous>")&&(fe=fe.replace("<anonymous>",a.displayName)),fe}while(1<=r&&0<=h);break}}}finally{xh=!1,Error.prepareStackTrace=o}return(o=a?a.displayName||a.name:"")?_s(o):""}function hO(a){switch(a.tag){case 26:case 27:case 5:return _s(a.type);case 16:return _s("Lazy");case 13:return _s("Suspense");case 19:return _s("SuspenseList");case 0:case 15:return Uh(a.type,!1);case 11:return Uh(a.type.render,!1);case 1:return Uh(a.type,!0);case 31:return _s("Activity");default:return""}}function GT(a){try{var i="";do i+=hO(a),a=a.return;while(a);return i}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function Xn(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function wT(a){var i=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function EO(a){var i=wT(a)?"checked":"value",o=Object.getOwnPropertyDescriptor(a.constructor.prototype,i),r=""+a[i];if(!a.hasOwnProperty(i)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,m=o.set;return Object.defineProperty(a,i,{configurable:!0,get:function(){return h.call(this)},set:function(_){r=""+_,m.call(this,_)}}),Object.defineProperty(a,i,{enumerable:o.enumerable}),{getValue:function(){return r},setValue:function(_){r=""+_},stopTracking:function(){a._valueTracker=null,delete a[i]}}}}function Pu(a){a._valueTracker||(a._valueTracker=EO(a))}function BT(a){if(!a)return!1;var i=a._valueTracker;if(!i)return!0;var o=i.getValue(),r="";return a&&(r=wT(a)?a.checked?"true":"false":a.value),a=r,a!==o?(i.setValue(a),!0):!1}function Gu(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var AO=/[\n"\\]/g;function Zn(a){return a.replace(AO,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function kh(a,i,o,r,h,m,_,N){a.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?a.type=_:a.removeAttribute("type"),i!=null?_==="number"?(i===0&&a.value===""||a.value!=i)&&(a.value=""+Xn(i)):a.value!==""+Xn(i)&&(a.value=""+Xn(i)):_!=="submit"&&_!=="reset"||a.removeAttribute("value"),i!=null?Ph(a,_,Xn(i)):o!=null?Ph(a,_,Xn(o)):r!=null&&a.removeAttribute("value"),h==null&&m!=null&&(a.defaultChecked=!!m),h!=null&&(a.checked=h&&typeof h!="function"&&typeof h!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?a.name=""+Xn(N):a.removeAttribute("name")}function FT(a,i,o,r,h,m,_,N){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(a.type=m),i!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||i!=null))return;o=o!=null?""+Xn(o):"",i=i!=null?""+Xn(i):o,N||i===a.value||(a.value=i),a.defaultValue=i}r=r??h,r=typeof r!="function"&&typeof r!="symbol"&&!!r,a.checked=N?a.checked:!!r,a.defaultChecked=!!r,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(a.name=_)}function Ph(a,i,o){i==="number"&&Gu(a.ownerDocument)===a||a.defaultValue===""+o||(a.defaultValue=""+o)}function ps(a,i,o,r){if(a=a.options,i){i={};for(var h=0;h<o.length;h++)i["$"+o[h]]=!0;for(o=0;o<a.length;o++)h=i.hasOwnProperty("$"+a[o].value),a[o].selected!==h&&(a[o].selected=h),h&&r&&(a[o].defaultSelected=!0)}else{for(o=""+Xn(o),i=null,h=0;h<a.length;h++){if(a[h].value===o){a[h].selected=!0,r&&(a[h].defaultSelected=!0);return}i!==null||a[h].disabled||(i=a[h])}i!==null&&(i.selected=!0)}}function zT(a,i,o){if(i!=null&&(i=""+Xn(i),i!==a.value&&(a.value=i),o==null)){a.defaultValue!==i&&(a.defaultValue=i);return}a.defaultValue=o!=null?""+Xn(o):""}function jT(a,i,o,r){if(i==null){if(r!=null){if(o!=null)throw Error(l(92));if(J(r)){if(1<r.length)throw Error(l(93));r=r[0]}o=r}o==null&&(o=""),i=o}o=Xn(i),a.defaultValue=o,r=a.textContent,r===o&&r!==""&&r!==null&&(a.value=r)}function Is(a,i){if(i){var o=a.firstChild;if(o&&o===a.lastChild&&o.nodeType===3){o.nodeValue=i;return}}a.textContent=i}var mO=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function YT(a,i,o){var r=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?r?a.setProperty(i,""):i==="float"?a.cssFloat="":a[i]="":r?a.setProperty(i,o):typeof o!="number"||o===0||mO.has(i)?i==="float"?a.cssFloat=o:a[i]=(""+o).trim():a[i]=o+"px"}function KT(a,i,o){if(i!=null&&typeof i!="object")throw Error(l(62));if(a=a.style,o!=null){for(var r in o)!o.hasOwnProperty(r)||i!=null&&i.hasOwnProperty(r)||(r.indexOf("--")===0?a.setProperty(r,""):r==="float"?a.cssFloat="":a[r]="");for(var h in i)r=i[h],i.hasOwnProperty(h)&&o[h]!==r&&YT(a,h,r)}else for(var m in i)i.hasOwnProperty(m)&&YT(a,m,i[m])}function Gh(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var RO=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),TO=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function wu(a){return TO.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var wh=null;function Bh(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Ns=null,Cs=null;function VT(a){var i=Ts(a);if(i&&(a=i.stateNode)){var o=a[Rn]||null;e:switch(a=i.stateNode,i.type){case"input":if(kh(a,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=a;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Zn(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var r=o[i];if(r!==a&&r.form===a.form){var h=r[Rn]||null;if(!h)throw Error(l(90));kh(r,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<o.length;i++)r=o[i],r.form===a.form&&BT(r)}break e;case"textarea":zT(a,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&ps(a,!!o.multiple,i,!1)}}}var Fh=!1;function WT(a,i,o){if(Fh)return a(i,o);Fh=!0;try{var r=a(i);return r}finally{if(Fh=!1,(Ns!==null||Cs!==null)&&(Nd(),Ns&&(i=Ns,a=Cs,Cs=Ns=null,VT(i),a)))for(i=0;i<a.length;i++)VT(a[i])}}function $r(a,i){var o=a.stateNode;if(o===null)return null;var r=o[Rn]||null;if(r===null)return null;o=r[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(a=a.type,r=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!r;break e;default:a=!1}if(a)return null;if(o&&typeof o!="function")throw Error(l(231,i,typeof o));return o}var Vi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zh=!1;if(Vi)try{var Jr={};Object.defineProperty(Jr,"passive",{get:function(){zh=!0}}),window.addEventListener("test",Jr,Jr),window.removeEventListener("test",Jr,Jr)}catch{zh=!1}var Il=null,jh=null,Bu=null;function qT(){if(Bu)return Bu;var a,i=jh,o=i.length,r,h="value"in Il?Il.value:Il.textContent,m=h.length;for(a=0;a<o&&i[a]===h[a];a++);var _=o-a;for(r=1;r<=_&&i[o-r]===h[m-r];r++);return Bu=h.slice(a,1<r?1-r:void 0)}function Fu(a){var i=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&i===13&&(a=13)):a=i,a===10&&(a=13),32<=a||a===13?a:0}function zu(){return!0}function XT(){return!1}function Tn(a){function i(o,r,h,m,_){this._reactName=o,this._targetInst=h,this.type=r,this.nativeEvent=m,this.target=_,this.currentTarget=null;for(var N in a)a.hasOwnProperty(N)&&(o=a[N],this[N]=o?o(m):m[N]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?zu:XT,this.isPropagationStopped=XT,this}return R(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=zu)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=zu)},persist:function(){},isPersistent:zu}),i}var go={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ju=Tn(go),ec=R({},go,{view:0,detail:0}),SO=Tn(ec),Yh,Kh,tc,Yu=R({},ec,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wh,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==tc&&(tc&&a.type==="mousemove"?(Yh=a.screenX-tc.screenX,Kh=a.screenY-tc.screenY):Kh=Yh=0,tc=a),Yh)},movementY:function(a){return"movementY"in a?a.movementY:Kh}}),ZT=Tn(Yu),gO=R({},Yu,{dataTransfer:0}),_O=Tn(gO),pO=R({},ec,{relatedTarget:0}),Vh=Tn(pO),IO=R({},go,{animationName:0,elapsedTime:0,pseudoElement:0}),NO=Tn(IO),CO=R({},go,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),bO=Tn(CO),OO=R({},go,{data:0}),QT=Tn(OO),DO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function MO(a){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(a):(a=vO[a])?!!i[a]:!1}function Wh(){return MO}var LO=R({},ec,{key:function(a){if(a.key){var i=DO[a.key]||a.key;if(i!=="Unidentified")return i}return a.type==="keypress"?(a=Fu(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?yO[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wh,charCode:function(a){return a.type==="keypress"?Fu(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Fu(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),HO=Tn(LO),xO=R({},Yu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$T=Tn(xO),UO=R({},ec,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wh}),kO=Tn(UO),PO=R({},go,{propertyName:0,elapsedTime:0,pseudoElement:0}),GO=Tn(PO),wO=R({},Yu,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),BO=Tn(wO),FO=R({},go,{newState:0,oldState:0}),zO=Tn(FO),jO=[9,13,27,32],qh=Vi&&"CompositionEvent"in window,ac=null;Vi&&"documentMode"in document&&(ac=document.documentMode);var YO=Vi&&"TextEvent"in window&&!ac,JT=Vi&&(!qh||ac&&8<ac&&11>=ac),eS=" ",tS=!1;function aS(a,i){switch(a){case"keyup":return jO.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nS(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var bs=!1;function KO(a,i){switch(a){case"compositionend":return nS(i);case"keypress":return i.which!==32?null:(tS=!0,eS);case"textInput":return a=i.data,a===eS&&tS?null:a;default:return null}}function VO(a,i){if(bs)return a==="compositionend"||!qh&&aS(a,i)?(a=qT(),Bu=jh=Il=null,bs=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return JT&&i.locale!=="ko"?null:i.data;default:return null}}var WO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function iS(a){var i=a&&a.nodeName&&a.nodeName.toLowerCase();return i==="input"?!!WO[a.type]:i==="textarea"}function lS(a,i,o,r){Ns?Cs?Cs.push(r):Cs=[r]:Ns=r,i=vd(i,"onChange"),0<i.length&&(o=new ju("onChange","change",null,o,r),a.push({event:o,listeners:i}))}var nc=null,ic=null;function qO(a){w_(a,0)}function Ku(a){var i=Qr(a);if(BT(i))return a}function oS(a,i){if(a==="change")return i}var sS=!1;if(Vi){var Xh;if(Vi){var Zh="oninput"in document;if(!Zh){var rS=document.createElement("div");rS.setAttribute("oninput","return;"),Zh=typeof rS.oninput=="function"}Xh=Zh}else Xh=!1;sS=Xh&&(!document.documentMode||9<document.documentMode)}function cS(){nc&&(nc.detachEvent("onpropertychange",uS),ic=nc=null)}function uS(a){if(a.propertyName==="value"&&Ku(ic)){var i=[];lS(i,ic,a,Bh(a)),WT(qO,i)}}function XO(a,i,o){a==="focusin"?(cS(),nc=i,ic=o,nc.attachEvent("onpropertychange",uS)):a==="focusout"&&cS()}function ZO(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Ku(ic)}function QO(a,i){if(a==="click")return Ku(i)}function $O(a,i){if(a==="input"||a==="change")return Ku(i)}function JO(a,i){return a===i&&(a!==0||1/a===1/i)||a!==a&&i!==i}var vn=typeof Object.is=="function"?Object.is:JO;function lc(a,i){if(vn(a,i))return!0;if(typeof a!="object"||a===null||typeof i!="object"||i===null)return!1;var o=Object.keys(a),r=Object.keys(i);if(o.length!==r.length)return!1;for(r=0;r<o.length;r++){var h=o[r];if(!Ne.call(i,h)||!vn(a[h],i[h]))return!1}return!0}function dS(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function fS(a,i){var o=dS(a);a=0;for(var r;o;){if(o.nodeType===3){if(r=a+o.textContent.length,a<=i&&r>=i)return{node:o,offset:i-a};a=r}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=dS(o)}}function hS(a,i){return a&&i?a===i?!0:a&&a.nodeType===3?!1:i&&i.nodeType===3?hS(a,i.parentNode):"contains"in a?a.contains(i):a.compareDocumentPosition?!!(a.compareDocumentPosition(i)&16):!1:!1}function ES(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var i=Gu(a.document);i instanceof a.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)a=i.contentWindow;else break;i=Gu(a.document)}return i}function Qh(a){var i=a&&a.nodeName&&a.nodeName.toLowerCase();return i&&(i==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||i==="textarea"||a.contentEditable==="true")}var eD=Vi&&"documentMode"in document&&11>=document.documentMode,Os=null,$h=null,oc=null,Jh=!1;function AS(a,i,o){var r=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Jh||Os==null||Os!==Gu(r)||(r=Os,"selectionStart"in r&&Qh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),oc&&lc(oc,r)||(oc=r,r=vd($h,"onSelect"),0<r.length&&(i=new ju("onSelect","select",null,i,o),a.push({event:i,listeners:r}),i.target=Os)))}function _o(a,i){var o={};return o[a.toLowerCase()]=i.toLowerCase(),o["Webkit"+a]="webkit"+i,o["Moz"+a]="moz"+i,o}var Ds={animationend:_o("Animation","AnimationEnd"),animationiteration:_o("Animation","AnimationIteration"),animationstart:_o("Animation","AnimationStart"),transitionrun:_o("Transition","TransitionRun"),transitionstart:_o("Transition","TransitionStart"),transitioncancel:_o("Transition","TransitionCancel"),transitionend:_o("Transition","TransitionEnd")},eE={},mS={};Vi&&(mS=document.createElement("div").style,"AnimationEvent"in window||(delete Ds.animationend.animation,delete Ds.animationiteration.animation,delete Ds.animationstart.animation),"TransitionEvent"in window||delete Ds.transitionend.transition);function po(a){if(eE[a])return eE[a];if(!Ds[a])return a;var i=Ds[a],o;for(o in i)if(i.hasOwnProperty(o)&&o in mS)return eE[a]=i[o];return a}var RS=po("animationend"),TS=po("animationiteration"),SS=po("animationstart"),tD=po("transitionrun"),aD=po("transitionstart"),nD=po("transitioncancel"),gS=po("transitionend"),_S=new Map,tE="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");tE.push("scrollEnd");function hi(a,i){_S.set(a,i),So(i,[a])}var pS=new WeakMap;function Qn(a,i){if(typeof a=="object"&&a!==null){var o=pS.get(a);return o!==void 0?o:(i={value:a,source:i,stack:GT(i)},pS.set(a,i),i)}return{value:a,source:i,stack:GT(i)}}var $n=[],ys=0,aE=0;function Vu(){for(var a=ys,i=aE=ys=0;i<a;){var o=$n[i];$n[i++]=null;var r=$n[i];$n[i++]=null;var h=$n[i];$n[i++]=null;var m=$n[i];if($n[i++]=null,r!==null&&h!==null){var _=r.pending;_===null?h.next=h:(h.next=_.next,_.next=h),r.pending=h}m!==0&&IS(o,h,m)}}function Wu(a,i,o,r){$n[ys++]=a,$n[ys++]=i,$n[ys++]=o,$n[ys++]=r,aE|=r,a.lanes|=r,a=a.alternate,a!==null&&(a.lanes|=r)}function nE(a,i,o,r){return Wu(a,i,o,r),qu(a)}function vs(a,i){return Wu(a,null,null,i),qu(a)}function IS(a,i,o){a.lanes|=o;var r=a.alternate;r!==null&&(r.lanes|=o);for(var h=!1,m=a.return;m!==null;)m.childLanes|=o,r=m.alternate,r!==null&&(r.childLanes|=o),m.tag===22&&(a=m.stateNode,a===null||a._visibility&1||(h=!0)),a=m,m=m.return;return a.tag===3?(m=a.stateNode,h&&i!==null&&(h=31-yn(o),a=m.hiddenUpdates,r=a[h],r===null?a[h]=[i]:r.push(i),i.lane=o|536870912),m):null}function qu(a){if(50<Mc)throw Mc=0,cA=null,Error(l(185));for(var i=a.return;i!==null;)a=i,i=a.return;return a.tag===3?a.stateNode:null}var Ms={};function iD(a,i,o,r){this.tag=a,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mn(a,i,o,r){return new iD(a,i,o,r)}function iE(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Wi(a,i){var o=a.alternate;return o===null?(o=Mn(a.tag,i,a.key,a.mode),o.elementType=a.elementType,o.type=a.type,o.stateNode=a.stateNode,o.alternate=a,a.alternate=o):(o.pendingProps=i,o.type=a.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=a.flags&65011712,o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,i=a.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=a.sibling,o.index=a.index,o.ref=a.ref,o.refCleanup=a.refCleanup,o}function NS(a,i){a.flags&=65011714;var o=a.alternate;return o===null?(a.childLanes=0,a.lanes=i,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,i=o.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),a}function Xu(a,i,o,r,h,m){var _=0;if(r=a,typeof a=="function")iE(a)&&(_=1);else if(typeof a=="string")_=oy(a,o,ce.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case ie:return a=Mn(31,o,i,h),a.elementType=ie,a.lanes=m,a;case I:return Io(o.children,h,m,i);case b:_=8,h|=24;break;case y:return a=Mn(12,o,i,h|2),a.elementType=y,a.lanes=m,a;case K:return a=Mn(13,o,i,h),a.elementType=K,a.lanes=m,a;case F:return a=Mn(19,o,i,h),a.elementType=F,a.lanes=m,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case M:case U:_=10;break e;case v:_=9;break e;case H:_=11;break e;case x:_=14;break e;case re:_=16,r=null;break e}_=29,o=Error(l(130,a===null?"null":typeof a,"")),r=null}return i=Mn(_,o,i,h),i.elementType=a,i.type=r,i.lanes=m,i}function Io(a,i,o,r){return a=Mn(7,a,r,i),a.lanes=o,a}function lE(a,i,o){return a=Mn(6,a,null,i),a.lanes=o,a}function oE(a,i,o){return i=Mn(4,a.children!==null?a.children:[],a.key,i),i.lanes=o,i.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},i}var Ls=[],Hs=0,Zu=null,Qu=0,Jn=[],ei=0,No=null,qi=1,Xi="";function Co(a,i){Ls[Hs++]=Qu,Ls[Hs++]=Zu,Zu=a,Qu=i}function CS(a,i,o){Jn[ei++]=qi,Jn[ei++]=Xi,Jn[ei++]=No,No=a;var r=qi;a=Xi;var h=32-yn(r)-1;r&=~(1<<h),o+=1;var m=32-yn(i)+h;if(30<m){var _=h-h%5;m=(r&(1<<_)-1).toString(32),r>>=_,h-=_,qi=1<<32-yn(i)+h|o<<h|r,Xi=m+a}else qi=1<<m|o<<h|r,Xi=a}function sE(a){a.return!==null&&(Co(a,1),CS(a,1,0))}function rE(a){for(;a===Zu;)Zu=Ls[--Hs],Ls[Hs]=null,Qu=Ls[--Hs],Ls[Hs]=null;for(;a===No;)No=Jn[--ei],Jn[ei]=null,Xi=Jn[--ei],Jn[ei]=null,qi=Jn[--ei],Jn[ei]=null}var ln=null,$t=null,ht=!1,bo=null,Di=!1,cE=Error(l(519));function Oo(a){var i=Error(l(418,""));throw cc(Qn(i,a)),cE}function bS(a){var i=a.stateNode,o=a.type,r=a.memoizedProps;switch(i[Za]=a,i[Rn]=r,o){case"dialog":tt("cancel",i),tt("close",i);break;case"iframe":case"object":case"embed":tt("load",i);break;case"video":case"audio":for(o=0;o<Hc.length;o++)tt(Hc[o],i);break;case"source":tt("error",i);break;case"img":case"image":case"link":tt("error",i),tt("load",i);break;case"details":tt("toggle",i);break;case"input":tt("invalid",i),FT(i,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),Pu(i);break;case"select":tt("invalid",i);break;case"textarea":tt("invalid",i),jT(i,r.value,r.defaultValue,r.children),Pu(i)}o=r.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||r.suppressHydrationWarning===!0||j_(i.textContent,o)?(r.popover!=null&&(tt("beforetoggle",i),tt("toggle",i)),r.onScroll!=null&&tt("scroll",i),r.onScrollEnd!=null&&tt("scrollend",i),r.onClick!=null&&(i.onclick=Md),i=!0):i=!1,i||Oo(a)}function OS(a){for(ln=a.return;ln;)switch(ln.tag){case 5:case 13:Di=!1;return;case 27:case 3:Di=!0;return;default:ln=ln.return}}function sc(a){if(a!==ln)return!1;if(!ht)return OS(a),ht=!0,!1;var i=a.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=a.type,o=!(o!=="form"&&o!=="button")||CA(a.type,a.memoizedProps)),o=!o),o&&$t&&Oo(a),OS(a),i===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(l(317));e:{for(a=a.nextSibling,i=0;a;){if(a.nodeType===8)if(o=a.data,o==="/$"){if(i===0){$t=Ai(a.nextSibling);break e}i--}else o!=="$"&&o!=="$!"&&o!=="$?"||i++;a=a.nextSibling}$t=null}}else i===27?(i=$t,wl(a.type)?(a=yA,yA=null,$t=a):$t=i):$t=ln?Ai(a.stateNode.nextSibling):null;return!0}function rc(){$t=ln=null,ht=!1}function DS(){var a=bo;return a!==null&&(_n===null?_n=a:_n.push.apply(_n,a),bo=null),a}function cc(a){bo===null?bo=[a]:bo.push(a)}var uE=X(null),Do=null,Zi=null;function Nl(a,i,o){Y(uE,i._currentValue),i._currentValue=o}function Qi(a){a._currentValue=uE.current,Z(uE)}function dE(a,i,o){for(;a!==null;){var r=a.alternate;if((a.childLanes&i)!==i?(a.childLanes|=i,r!==null&&(r.childLanes|=i)):r!==null&&(r.childLanes&i)!==i&&(r.childLanes|=i),a===o)break;a=a.return}}function fE(a,i,o,r){var h=a.child;for(h!==null&&(h.return=a);h!==null;){var m=h.dependencies;if(m!==null){var _=h.child;m=m.firstContext;e:for(;m!==null;){var N=m;m=h;for(var k=0;k<i.length;k++)if(N.context===i[k]){m.lanes|=o,N=m.alternate,N!==null&&(N.lanes|=o),dE(m.return,o,a),r||(_=null);break e}m=N.next}}else if(h.tag===18){if(_=h.return,_===null)throw Error(l(341));_.lanes|=o,m=_.alternate,m!==null&&(m.lanes|=o),dE(_,o,a),_=null}else _=h.child;if(_!==null)_.return=h;else for(_=h;_!==null;){if(_===a){_=null;break}if(h=_.sibling,h!==null){h.return=_.return,_=h;break}_=_.return}h=_}}function uc(a,i,o,r){a=null;for(var h=i,m=!1;h!==null;){if(!m){if((h.flags&524288)!==0)m=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var _=h.alternate;if(_===null)throw Error(l(387));if(_=_.memoizedProps,_!==null){var N=h.type;vn(h.pendingProps.value,_.value)||(a!==null?a.push(N):a=[N])}}else if(h===Se.current){if(_=h.alternate,_===null)throw Error(l(387));_.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(a!==null?a.push(wc):a=[wc])}h=h.return}a!==null&&fE(i,a,o,r),i.flags|=262144}function $u(a){for(a=a.firstContext;a!==null;){if(!vn(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function yo(a){Do=a,Zi=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function Qa(a){return yS(Do,a)}function Ju(a,i){return Do===null&&yo(a),yS(a,i)}function yS(a,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},Zi===null){if(a===null)throw Error(l(308));Zi=i,a.dependencies={lanes:0,firstContext:i},a.flags|=524288}else Zi=Zi.next=i;return o}var lD=typeof AbortController<"u"?AbortController:function(){var a=[],i=this.signal={aborted:!1,addEventListener:function(o,r){a.push(r)}};this.abort=function(){i.aborted=!0,a.forEach(function(o){return o()})}},oD=e.unstable_scheduleCallback,sD=e.unstable_NormalPriority,_a={$$typeof:U,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function hE(){return{controller:new lD,data:new Map,refCount:0}}function dc(a){a.refCount--,a.refCount===0&&oD(sD,function(){a.controller.abort()})}var fc=null,EE=0,xs=0,Us=null;function rD(a,i){if(fc===null){var o=fc=[];EE=0,xs=mA(),Us={status:"pending",value:void 0,then:function(r){o.push(r)}}}return EE++,i.then(vS,vS),i}function vS(){if(--EE===0&&fc!==null){Us!==null&&(Us.status="fulfilled");var a=fc;fc=null,xs=0,Us=null;for(var i=0;i<a.length;i++)(0,a[i])()}}function cD(a,i){var o=[],r={status:"pending",value:null,reason:null,then:function(h){o.push(h)}};return a.then(function(){r.status="fulfilled",r.value=i;for(var h=0;h<o.length;h++)(0,o[h])(i)},function(h){for(r.status="rejected",r.reason=h,h=0;h<o.length;h++)(0,o[h])(void 0)}),r}var MS=w.S;w.S=function(a,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&rD(a,i),MS!==null&&MS(a,i)};var vo=X(null);function AE(){var a=vo.current;return a!==null?a:xt.pooledCache}function ed(a,i){i===null?Y(vo,vo.current):Y(vo,i.pool)}function LS(){var a=AE();return a===null?null:{parent:_a._currentValue,pool:a}}var hc=Error(l(460)),HS=Error(l(474)),td=Error(l(542)),mE={then:function(){}};function xS(a){return a=a.status,a==="fulfilled"||a==="rejected"}function ad(){}function US(a,i,o){switch(o=a[o],o===void 0?a.push(i):o!==i&&(i.then(ad,ad),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw a=i.reason,PS(a),a;default:if(typeof i.status=="string")i.then(ad,ad);else{if(a=xt,a!==null&&100<a.shellSuspendCounter)throw Error(l(482));a=i,a.status="pending",a.then(function(r){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=r}},function(r){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=r}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw a=i.reason,PS(a),a}throw Ec=i,hc}}var Ec=null;function kS(){if(Ec===null)throw Error(l(459));var a=Ec;return Ec=null,a}function PS(a){if(a===hc||a===td)throw Error(l(483))}var Cl=!1;function RE(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function TE(a,i){a=a.updateQueue,i.updateQueue===a&&(i.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function bl(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function Ol(a,i,o){var r=a.updateQueue;if(r===null)return null;if(r=r.shared,(gt&2)!==0){var h=r.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),r.pending=i,i=qu(a),IS(a,null,o),i}return Wu(a,r,i,o),qu(a)}function Ac(a,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var r=i.lanes;r&=a.pendingLanes,o|=r,i.lanes=o,vT(a,o)}}function SE(a,i){var o=a.updateQueue,r=a.alternate;if(r!==null&&(r=r.updateQueue,o===r)){var h=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var _={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?h=m=_:m=m.next=_,o=o.next}while(o!==null);m===null?h=m=i:m=m.next=i}else h=m=i;o={baseState:r.baseState,firstBaseUpdate:h,lastBaseUpdate:m,shared:r.shared,callbacks:r.callbacks},a.updateQueue=o;return}a=o.lastBaseUpdate,a===null?o.firstBaseUpdate=i:a.next=i,o.lastBaseUpdate=i}var gE=!1;function mc(){if(gE){var a=Us;if(a!==null)throw a}}function Rc(a,i,o,r){gE=!1;var h=a.updateQueue;Cl=!1;var m=h.firstBaseUpdate,_=h.lastBaseUpdate,N=h.shared.pending;if(N!==null){h.shared.pending=null;var k=N,Q=k.next;k.next=null,_===null?m=Q:_.next=Q,_=k;var fe=a.alternate;fe!==null&&(fe=fe.updateQueue,N=fe.lastBaseUpdate,N!==_&&(N===null?fe.firstBaseUpdate=Q:N.next=Q,fe.lastBaseUpdate=k))}if(m!==null){var Re=h.baseState;_=0,fe=Q=k=null,N=m;do{var ae=N.lane&-536870913,ne=ae!==N.lane;if(ne?(rt&ae)===ae:(r&ae)===ae){ae!==0&&ae===xs&&(gE=!0),fe!==null&&(fe=fe.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});e:{var Ge=a,Ue=N;ae=i;var bt=o;switch(Ue.tag){case 1:if(Ge=Ue.payload,typeof Ge=="function"){Re=Ge.call(bt,Re,ae);break e}Re=Ge;break e;case 3:Ge.flags=Ge.flags&-65537|128;case 0:if(Ge=Ue.payload,ae=typeof Ge=="function"?Ge.call(bt,Re,ae):Ge,ae==null)break e;Re=R({},Re,ae);break e;case 2:Cl=!0}}ae=N.callback,ae!==null&&(a.flags|=64,ne&&(a.flags|=8192),ne=h.callbacks,ne===null?h.callbacks=[ae]:ne.push(ae))}else ne={lane:ae,tag:N.tag,payload:N.payload,callback:N.callback,next:null},fe===null?(Q=fe=ne,k=Re):fe=fe.next=ne,_|=ae;if(N=N.next,N===null){if(N=h.shared.pending,N===null)break;ne=N,N=ne.next,ne.next=null,h.lastBaseUpdate=ne,h.shared.pending=null}}while(!0);fe===null&&(k=Re),h.baseState=k,h.firstBaseUpdate=Q,h.lastBaseUpdate=fe,m===null&&(h.shared.lanes=0),Ul|=_,a.lanes=_,a.memoizedState=Re}}function GS(a,i){if(typeof a!="function")throw Error(l(191,a));a.call(i)}function wS(a,i){var o=a.callbacks;if(o!==null)for(a.callbacks=null,a=0;a<o.length;a++)GS(o[a],i)}var ks=X(null),nd=X(0);function BS(a,i){a=il,Y(nd,a),Y(ks,i),il=a|i.baseLanes}function _E(){Y(nd,il),Y(ks,ks.current)}function pE(){il=nd.current,Z(ks),Z(nd)}var Dl=0,qe=null,Nt=null,Ea=null,id=!1,Ps=!1,Mo=!1,ld=0,Tc=0,Gs=null,uD=0;function ca(){throw Error(l(321))}function IE(a,i){if(i===null)return!1;for(var o=0;o<i.length&&o<a.length;o++)if(!vn(a[o],i[o]))return!1;return!0}function NE(a,i,o,r,h,m){return Dl=m,qe=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,w.H=a===null||a.memoizedState===null?Ig:Ng,Mo=!1,m=o(r,h),Mo=!1,Ps&&(m=zS(i,o,r,h)),FS(a),m}function FS(a){w.H=dd;var i=Nt!==null&&Nt.next!==null;if(Dl=0,Ea=Nt=qe=null,id=!1,Tc=0,Gs=null,i)throw Error(l(300));a===null||Da||(a=a.dependencies,a!==null&&$u(a)&&(Da=!0))}function zS(a,i,o,r){qe=a;var h=0;do{if(Ps&&(Gs=null),Tc=0,Ps=!1,25<=h)throw Error(l(301));if(h+=1,Ea=Nt=null,a.updateQueue!=null){var m=a.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}w.H=RD,m=i(o,r)}while(Ps);return m}function dD(){var a=w.H,i=a.useState()[0];return i=typeof i.then=="function"?Sc(i):i,a=a.useState()[0],(Nt!==null?Nt.memoizedState:null)!==a&&(qe.flags|=1024),i}function CE(){var a=ld!==0;return ld=0,a}function bE(a,i,o){i.updateQueue=a.updateQueue,i.flags&=-2053,a.lanes&=~o}function OE(a){if(id){for(a=a.memoizedState;a!==null;){var i=a.queue;i!==null&&(i.pending=null),a=a.next}id=!1}Dl=0,Ea=Nt=qe=null,Ps=!1,Tc=ld=0,Gs=null}function Sn(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ea===null?qe.memoizedState=Ea=a:Ea=Ea.next=a,Ea}function Aa(){if(Nt===null){var a=qe.alternate;a=a!==null?a.memoizedState:null}else a=Nt.next;var i=Ea===null?qe.memoizedState:Ea.next;if(i!==null)Ea=i,Nt=a;else{if(a===null)throw qe.alternate===null?Error(l(467)):Error(l(310));Nt=a,a={memoizedState:Nt.memoizedState,baseState:Nt.baseState,baseQueue:Nt.baseQueue,queue:Nt.queue,next:null},Ea===null?qe.memoizedState=Ea=a:Ea=Ea.next=a}return Ea}function DE(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Sc(a){var i=Tc;return Tc+=1,Gs===null&&(Gs=[]),a=US(Gs,a,i),i=qe,(Ea===null?i.memoizedState:Ea.next)===null&&(i=i.alternate,w.H=i===null||i.memoizedState===null?Ig:Ng),a}function od(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Sc(a);if(a.$$typeof===U)return Qa(a)}throw Error(l(438,String(a)))}function yE(a){var i=null,o=qe.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var r=qe.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(i={data:r.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=DE(),qe.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(a),r=0;r<a;r++)o[r]=se;return i.index++,o}function $i(a,i){return typeof i=="function"?i(a):i}function sd(a){var i=Aa();return vE(i,Nt,a)}function vE(a,i,o){var r=a.queue;if(r===null)throw Error(l(311));r.lastRenderedReducer=o;var h=a.baseQueue,m=r.pending;if(m!==null){if(h!==null){var _=h.next;h.next=m.next,m.next=_}i.baseQueue=h=m,r.pending=null}if(m=a.baseState,h===null)a.memoizedState=m;else{i=h.next;var N=_=null,k=null,Q=i,fe=!1;do{var Re=Q.lane&-536870913;if(Re!==Q.lane?(rt&Re)===Re:(Dl&Re)===Re){var ae=Q.revertLane;if(ae===0)k!==null&&(k=k.next={lane:0,revertLane:0,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),Re===xs&&(fe=!0);else if((Dl&ae)===ae){Q=Q.next,ae===xs&&(fe=!0);continue}else Re={lane:0,revertLane:Q.revertLane,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},k===null?(N=k=Re,_=m):k=k.next=Re,qe.lanes|=ae,Ul|=ae;Re=Q.action,Mo&&o(m,Re),m=Q.hasEagerState?Q.eagerState:o(m,Re)}else ae={lane:Re,revertLane:Q.revertLane,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},k===null?(N=k=ae,_=m):k=k.next=ae,qe.lanes|=Re,Ul|=Re;Q=Q.next}while(Q!==null&&Q!==i);if(k===null?_=m:k.next=N,!vn(m,a.memoizedState)&&(Da=!0,fe&&(o=Us,o!==null)))throw o;a.memoizedState=m,a.baseState=_,a.baseQueue=k,r.lastRenderedState=m}return h===null&&(r.lanes=0),[a.memoizedState,r.dispatch]}function ME(a){var i=Aa(),o=i.queue;if(o===null)throw Error(l(311));o.lastRenderedReducer=a;var r=o.dispatch,h=o.pending,m=i.memoizedState;if(h!==null){o.pending=null;var _=h=h.next;do m=a(m,_.action),_=_.next;while(_!==h);vn(m,i.memoizedState)||(Da=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),o.lastRenderedState=m}return[m,r]}function jS(a,i,o){var r=qe,h=Aa(),m=ht;if(m){if(o===void 0)throw Error(l(407));o=o()}else o=i();var _=!vn((Nt||h).memoizedState,o);_&&(h.memoizedState=o,Da=!0),h=h.queue;var N=VS.bind(null,r,h,a);if(gc(2048,8,N,[a]),h.getSnapshot!==i||_||Ea!==null&&Ea.memoizedState.tag&1){if(r.flags|=2048,ws(9,rd(),KS.bind(null,r,h,o,i),null),xt===null)throw Error(l(349));m||(Dl&124)!==0||YS(r,i,o)}return o}function YS(a,i,o){a.flags|=16384,a={getSnapshot:i,value:o},i=qe.updateQueue,i===null?(i=DE(),qe.updateQueue=i,i.stores=[a]):(o=i.stores,o===null?i.stores=[a]:o.push(a))}function KS(a,i,o,r){i.value=o,i.getSnapshot=r,WS(i)&&qS(a)}function VS(a,i,o){return o(function(){WS(i)&&qS(a)})}function WS(a){var i=a.getSnapshot;a=a.value;try{var o=i();return!vn(a,o)}catch{return!0}}function qS(a){var i=vs(a,2);i!==null&&kn(i,a,2)}function LE(a){var i=Sn();if(typeof a=="function"){var o=a;if(a=o(),Mo){_l(!0);try{o()}finally{_l(!1)}}}return i.memoizedState=i.baseState=a,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$i,lastRenderedState:a},i}function XS(a,i,o,r){return a.baseState=o,vE(a,Nt,typeof r=="function"?r:$i)}function fD(a,i,o,r,h){if(ud(a))throw Error(l(485));if(a=i.action,a!==null){var m={payload:h,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){m.listeners.push(_)}};w.T!==null?o(!0):m.isTransition=!1,r(m),o=i.pending,o===null?(m.next=i.pending=m,ZS(i,m)):(m.next=o.next,i.pending=o.next=m)}}function ZS(a,i){var o=i.action,r=i.payload,h=a.state;if(i.isTransition){var m=w.T,_={};w.T=_;try{var N=o(h,r),k=w.S;k!==null&&k(_,N),QS(a,i,N)}catch(Q){HE(a,i,Q)}finally{w.T=m}}else try{m=o(h,r),QS(a,i,m)}catch(Q){HE(a,i,Q)}}function QS(a,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(r){$S(a,i,r)},function(r){return HE(a,i,r)}):$S(a,i,o)}function $S(a,i,o){i.status="fulfilled",i.value=o,JS(i),a.state=o,i=a.pending,i!==null&&(o=i.next,o===i?a.pending=null:(o=o.next,i.next=o,ZS(a,o)))}function HE(a,i,o){var r=a.pending;if(a.pending=null,r!==null){r=r.next;do i.status="rejected",i.reason=o,JS(i),i=i.next;while(i!==r)}a.action=null}function JS(a){a=a.listeners;for(var i=0;i<a.length;i++)(0,a[i])()}function eg(a,i){return i}function tg(a,i){if(ht){var o=xt.formState;if(o!==null){e:{var r=qe;if(ht){if($t){t:{for(var h=$t,m=Di;h.nodeType!==8;){if(!m){h=null;break t}if(h=Ai(h.nextSibling),h===null){h=null;break t}}m=h.data,h=m==="F!"||m==="F"?h:null}if(h){$t=Ai(h.nextSibling),r=h.data==="F!";break e}}Oo(r)}r=!1}r&&(i=o[0])}}return o=Sn(),o.memoizedState=o.baseState=i,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:eg,lastRenderedState:i},o.queue=r,o=gg.bind(null,qe,r),r.dispatch=o,r=LE(!1),m=GE.bind(null,qe,!1,r.queue),r=Sn(),h={state:i,dispatch:null,action:a,pending:null},r.queue=h,o=fD.bind(null,qe,h,m,o),h.dispatch=o,r.memoizedState=a,[i,o,!1]}function ag(a){var i=Aa();return ng(i,Nt,a)}function ng(a,i,o){if(i=vE(a,i,eg)[0],a=sd($i)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var r=Sc(i)}catch(_){throw _===hc?td:_}else r=i;i=Aa();var h=i.queue,m=h.dispatch;return o!==i.memoizedState&&(qe.flags|=2048,ws(9,rd(),hD.bind(null,h,o),null)),[r,m,a]}function hD(a,i){a.action=i}function ig(a){var i=Aa(),o=Nt;if(o!==null)return ng(i,o,a);Aa(),i=i.memoizedState,o=Aa();var r=o.queue.dispatch;return o.memoizedState=a,[i,r,!1]}function ws(a,i,o,r){return a={tag:a,create:o,deps:r,inst:i,next:null},i=qe.updateQueue,i===null&&(i=DE(),qe.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=a.next=a:(r=o.next,o.next=a,a.next=r,i.lastEffect=a),a}function rd(){return{destroy:void 0,resource:void 0}}function lg(){return Aa().memoizedState}function cd(a,i,o,r){var h=Sn();r=r===void 0?null:r,qe.flags|=a,h.memoizedState=ws(1|i,rd(),o,r)}function gc(a,i,o,r){var h=Aa();r=r===void 0?null:r;var m=h.memoizedState.inst;Nt!==null&&r!==null&&IE(r,Nt.memoizedState.deps)?h.memoizedState=ws(i,m,o,r):(qe.flags|=a,h.memoizedState=ws(1|i,m,o,r))}function og(a,i){cd(8390656,8,a,i)}function sg(a,i){gc(2048,8,a,i)}function rg(a,i){return gc(4,2,a,i)}function cg(a,i){return gc(4,4,a,i)}function ug(a,i){if(typeof i=="function"){a=a();var o=i(a);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return a=a(),i.current=a,function(){i.current=null}}function dg(a,i,o){o=o!=null?o.concat([a]):null,gc(4,4,ug.bind(null,i,a),o)}function xE(){}function fg(a,i){var o=Aa();i=i===void 0?null:i;var r=o.memoizedState;return i!==null&&IE(i,r[1])?r[0]:(o.memoizedState=[a,i],a)}function hg(a,i){var o=Aa();i=i===void 0?null:i;var r=o.memoizedState;if(i!==null&&IE(i,r[1]))return r[0];if(r=a(),Mo){_l(!0);try{a()}finally{_l(!1)}}return o.memoizedState=[r,i],r}function UE(a,i,o){return o===void 0||(Dl&1073741824)!==0?a.memoizedState=i:(a.memoizedState=o,a=m_(),qe.lanes|=a,Ul|=a,o)}function Eg(a,i,o,r){return vn(o,i)?o:ks.current!==null?(a=UE(a,o,r),vn(a,i)||(Da=!0),a):(Dl&42)===0?(Da=!0,a.memoizedState=o):(a=m_(),qe.lanes|=a,Ul|=a,i)}function Ag(a,i,o,r,h){var m=L.p;L.p=m!==0&&8>m?m:8;var _=w.T,N={};w.T=N,GE(a,!1,i,o);try{var k=h(),Q=w.S;if(Q!==null&&Q(N,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var fe=cD(k,r);_c(a,i,fe,Un(a))}else _c(a,i,r,Un(a))}catch(Re){_c(a,i,{then:function(){},status:"rejected",reason:Re},Un())}finally{L.p=m,w.T=_}}function ED(){}function kE(a,i,o,r){if(a.tag!==5)throw Error(l(476));var h=mg(a).queue;Ag(a,h,i,W,o===null?ED:function(){return Rg(a),o(r)})}function mg(a){var i=a.memoizedState;if(i!==null)return i;i={memoizedState:W,baseState:W,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$i,lastRenderedState:W},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$i,lastRenderedState:o},next:null},a.memoizedState=i,a=a.alternate,a!==null&&(a.memoizedState=i),i}function Rg(a){var i=mg(a).next.queue;_c(a,i,{},Un())}function PE(){return Qa(wc)}function Tg(){return Aa().memoizedState}function Sg(){return Aa().memoizedState}function AD(a){for(var i=a.return;i!==null;){switch(i.tag){case 24:case 3:var o=Un();a=bl(o);var r=Ol(i,a,o);r!==null&&(kn(r,i,o),Ac(r,i,o)),i={cache:hE()},a.payload=i;return}i=i.return}}function mD(a,i,o){var r=Un();o={lane:r,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},ud(a)?_g(i,o):(o=nE(a,i,o,r),o!==null&&(kn(o,a,r),pg(o,i,r)))}function gg(a,i,o){var r=Un();_c(a,i,o,r)}function _c(a,i,o,r){var h={lane:r,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(ud(a))_g(i,h);else{var m=a.alternate;if(a.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var _=i.lastRenderedState,N=m(_,o);if(h.hasEagerState=!0,h.eagerState=N,vn(N,_))return Wu(a,i,h,0),xt===null&&Vu(),!1}catch{}finally{}if(o=nE(a,i,h,r),o!==null)return kn(o,a,r),pg(o,i,r),!0}return!1}function GE(a,i,o,r){if(r={lane:2,revertLane:mA(),action:r,hasEagerState:!1,eagerState:null,next:null},ud(a)){if(i)throw Error(l(479))}else i=nE(a,o,r,2),i!==null&&kn(i,a,2)}function ud(a){var i=a.alternate;return a===qe||i!==null&&i===qe}function _g(a,i){Ps=id=!0;var o=a.pending;o===null?i.next=i:(i.next=o.next,o.next=i),a.pending=i}function pg(a,i,o){if((o&4194048)!==0){var r=i.lanes;r&=a.pendingLanes,o|=r,i.lanes=o,vT(a,o)}}var dd={readContext:Qa,use:od,useCallback:ca,useContext:ca,useEffect:ca,useImperativeHandle:ca,useLayoutEffect:ca,useInsertionEffect:ca,useMemo:ca,useReducer:ca,useRef:ca,useState:ca,useDebugValue:ca,useDeferredValue:ca,useTransition:ca,useSyncExternalStore:ca,useId:ca,useHostTransitionStatus:ca,useFormState:ca,useActionState:ca,useOptimistic:ca,useMemoCache:ca,useCacheRefresh:ca},Ig={readContext:Qa,use:od,useCallback:function(a,i){return Sn().memoizedState=[a,i===void 0?null:i],a},useContext:Qa,useEffect:og,useImperativeHandle:function(a,i,o){o=o!=null?o.concat([a]):null,cd(4194308,4,ug.bind(null,i,a),o)},useLayoutEffect:function(a,i){return cd(4194308,4,a,i)},useInsertionEffect:function(a,i){cd(4,2,a,i)},useMemo:function(a,i){var o=Sn();i=i===void 0?null:i;var r=a();if(Mo){_l(!0);try{a()}finally{_l(!1)}}return o.memoizedState=[r,i],r},useReducer:function(a,i,o){var r=Sn();if(o!==void 0){var h=o(i);if(Mo){_l(!0);try{o(i)}finally{_l(!1)}}}else h=i;return r.memoizedState=r.baseState=h,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:h},r.queue=a,a=a.dispatch=mD.bind(null,qe,a),[r.memoizedState,a]},useRef:function(a){var i=Sn();return a={current:a},i.memoizedState=a},useState:function(a){a=LE(a);var i=a.queue,o=gg.bind(null,qe,i);return i.dispatch=o,[a.memoizedState,o]},useDebugValue:xE,useDeferredValue:function(a,i){var o=Sn();return UE(o,a,i)},useTransition:function(){var a=LE(!1);return a=Ag.bind(null,qe,a.queue,!0,!1),Sn().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,i,o){var r=qe,h=Sn();if(ht){if(o===void 0)throw Error(l(407));o=o()}else{if(o=i(),xt===null)throw Error(l(349));(rt&124)!==0||YS(r,i,o)}h.memoizedState=o;var m={value:o,getSnapshot:i};return h.queue=m,og(VS.bind(null,r,m,a),[a]),r.flags|=2048,ws(9,rd(),KS.bind(null,r,m,o,i),null),o},useId:function(){var a=Sn(),i=xt.identifierPrefix;if(ht){var o=Xi,r=qi;o=(r&~(1<<32-yn(r)-1)).toString(32)+o,i="«"+i+"R"+o,o=ld++,0<o&&(i+="H"+o.toString(32)),i+="»"}else o=uD++,i="«"+i+"r"+o.toString(32)+"»";return a.memoizedState=i},useHostTransitionStatus:PE,useFormState:tg,useActionState:tg,useOptimistic:function(a){var i=Sn();i.memoizedState=i.baseState=a;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=GE.bind(null,qe,!0,o),o.dispatch=i,[a,i]},useMemoCache:yE,useCacheRefresh:function(){return Sn().memoizedState=AD.bind(null,qe)}},Ng={readContext:Qa,use:od,useCallback:fg,useContext:Qa,useEffect:sg,useImperativeHandle:dg,useInsertionEffect:rg,useLayoutEffect:cg,useMemo:hg,useReducer:sd,useRef:lg,useState:function(){return sd($i)},useDebugValue:xE,useDeferredValue:function(a,i){var o=Aa();return Eg(o,Nt.memoizedState,a,i)},useTransition:function(){var a=sd($i)[0],i=Aa().memoizedState;return[typeof a=="boolean"?a:Sc(a),i]},useSyncExternalStore:jS,useId:Tg,useHostTransitionStatus:PE,useFormState:ag,useActionState:ag,useOptimistic:function(a,i){var o=Aa();return XS(o,Nt,a,i)},useMemoCache:yE,useCacheRefresh:Sg},RD={readContext:Qa,use:od,useCallback:fg,useContext:Qa,useEffect:sg,useImperativeHandle:dg,useInsertionEffect:rg,useLayoutEffect:cg,useMemo:hg,useReducer:ME,useRef:lg,useState:function(){return ME($i)},useDebugValue:xE,useDeferredValue:function(a,i){var o=Aa();return Nt===null?UE(o,a,i):Eg(o,Nt.memoizedState,a,i)},useTransition:function(){var a=ME($i)[0],i=Aa().memoizedState;return[typeof a=="boolean"?a:Sc(a),i]},useSyncExternalStore:jS,useId:Tg,useHostTransitionStatus:PE,useFormState:ig,useActionState:ig,useOptimistic:function(a,i){var o=Aa();return Nt!==null?XS(o,Nt,a,i):(o.baseState=a,[a,o.queue.dispatch])},useMemoCache:yE,useCacheRefresh:Sg},Bs=null,pc=0;function fd(a){var i=pc;return pc+=1,Bs===null&&(Bs=[]),US(Bs,a,i)}function Ic(a,i){i=i.props.ref,a.ref=i!==void 0?i:null}function hd(a,i){throw i.$$typeof===T?Error(l(525)):(a=Object.prototype.toString.call(i),Error(l(31,a==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":a)))}function Cg(a){var i=a._init;return i(a._payload)}function bg(a){function i(V,z){if(a){var q=V.deletions;q===null?(V.deletions=[z],V.flags|=16):q.push(z)}}function o(V,z){if(!a)return null;for(;z!==null;)i(V,z),z=z.sibling;return null}function r(V){for(var z=new Map;V!==null;)V.key!==null?z.set(V.key,V):z.set(V.index,V),V=V.sibling;return z}function h(V,z){return V=Wi(V,z),V.index=0,V.sibling=null,V}function m(V,z,q){return V.index=q,a?(q=V.alternate,q!==null?(q=q.index,q<z?(V.flags|=67108866,z):q):(V.flags|=67108866,z)):(V.flags|=1048576,z)}function _(V){return a&&V.alternate===null&&(V.flags|=67108866),V}function N(V,z,q,Ee){return z===null||z.tag!==6?(z=lE(q,V.mode,Ee),z.return=V,z):(z=h(z,q),z.return=V,z)}function k(V,z,q,Ee){var ve=q.type;return ve===I?fe(V,z,q.props.children,Ee,q.key):z!==null&&(z.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===re&&Cg(ve)===z.type)?(z=h(z,q.props),Ic(z,q),z.return=V,z):(z=Xu(q.type,q.key,q.props,null,V.mode,Ee),Ic(z,q),z.return=V,z)}function Q(V,z,q,Ee){return z===null||z.tag!==4||z.stateNode.containerInfo!==q.containerInfo||z.stateNode.implementation!==q.implementation?(z=oE(q,V.mode,Ee),z.return=V,z):(z=h(z,q.children||[]),z.return=V,z)}function fe(V,z,q,Ee,ve){return z===null||z.tag!==7?(z=Io(q,V.mode,Ee,ve),z.return=V,z):(z=h(z,q),z.return=V,z)}function Re(V,z,q){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=lE(""+z,V.mode,q),z.return=V,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case S:return q=Xu(z.type,z.key,z.props,null,V.mode,q),Ic(q,z),q.return=V,q;case g:return z=oE(z,V.mode,q),z.return=V,z;case re:var Ee=z._init;return z=Ee(z._payload),Re(V,z,q)}if(J(z)||de(z))return z=Io(z,V.mode,q,null),z.return=V,z;if(typeof z.then=="function")return Re(V,fd(z),q);if(z.$$typeof===U)return Re(V,Ju(V,z),q);hd(V,z)}return null}function ae(V,z,q,Ee){var ve=z!==null?z.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return ve!==null?null:N(V,z,""+q,Ee);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case S:return q.key===ve?k(V,z,q,Ee):null;case g:return q.key===ve?Q(V,z,q,Ee):null;case re:return ve=q._init,q=ve(q._payload),ae(V,z,q,Ee)}if(J(q)||de(q))return ve!==null?null:fe(V,z,q,Ee,null);if(typeof q.then=="function")return ae(V,z,fd(q),Ee);if(q.$$typeof===U)return ae(V,z,Ju(V,q),Ee);hd(V,q)}return null}function ne(V,z,q,Ee,ve){if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number"||typeof Ee=="bigint")return V=V.get(q)||null,N(z,V,""+Ee,ve);if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case S:return V=V.get(Ee.key===null?q:Ee.key)||null,k(z,V,Ee,ve);case g:return V=V.get(Ee.key===null?q:Ee.key)||null,Q(z,V,Ee,ve);case re:var Ze=Ee._init;return Ee=Ze(Ee._payload),ne(V,z,q,Ee,ve)}if(J(Ee)||de(Ee))return V=V.get(q)||null,fe(z,V,Ee,ve,null);if(typeof Ee.then=="function")return ne(V,z,q,fd(Ee),ve);if(Ee.$$typeof===U)return ne(V,z,q,Ju(z,Ee),ve);hd(z,Ee)}return null}function Ge(V,z,q,Ee){for(var ve=null,Ze=null,He=z,ke=z=0,va=null;He!==null&&ke<q.length;ke++){He.index>ke?(va=He,He=null):va=He.sibling;var dt=ae(V,He,q[ke],Ee);if(dt===null){He===null&&(He=va);break}a&&He&&dt.alternate===null&&i(V,He),z=m(dt,z,ke),Ze===null?ve=dt:Ze.sibling=dt,Ze=dt,He=va}if(ke===q.length)return o(V,He),ht&&Co(V,ke),ve;if(He===null){for(;ke<q.length;ke++)He=Re(V,q[ke],Ee),He!==null&&(z=m(He,z,ke),Ze===null?ve=He:Ze.sibling=He,Ze=He);return ht&&Co(V,ke),ve}for(He=r(He);ke<q.length;ke++)va=ne(He,V,ke,q[ke],Ee),va!==null&&(a&&va.alternate!==null&&He.delete(va.key===null?ke:va.key),z=m(va,z,ke),Ze===null?ve=va:Ze.sibling=va,Ze=va);return a&&He.forEach(function(Yl){return i(V,Yl)}),ht&&Co(V,ke),ve}function Ue(V,z,q,Ee){if(q==null)throw Error(l(151));for(var ve=null,Ze=null,He=z,ke=z=0,va=null,dt=q.next();He!==null&&!dt.done;ke++,dt=q.next()){He.index>ke?(va=He,He=null):va=He.sibling;var Yl=ae(V,He,dt.value,Ee);if(Yl===null){He===null&&(He=va);break}a&&He&&Yl.alternate===null&&i(V,He),z=m(Yl,z,ke),Ze===null?ve=Yl:Ze.sibling=Yl,Ze=Yl,He=va}if(dt.done)return o(V,He),ht&&Co(V,ke),ve;if(He===null){for(;!dt.done;ke++,dt=q.next())dt=Re(V,dt.value,Ee),dt!==null&&(z=m(dt,z,ke),Ze===null?ve=dt:Ze.sibling=dt,Ze=dt);return ht&&Co(V,ke),ve}for(He=r(He);!dt.done;ke++,dt=q.next())dt=ne(He,V,ke,dt.value,Ee),dt!==null&&(a&&dt.alternate!==null&&He.delete(dt.key===null?ke:dt.key),z=m(dt,z,ke),Ze===null?ve=dt:Ze.sibling=dt,Ze=dt);return a&&He.forEach(function(Ty){return i(V,Ty)}),ht&&Co(V,ke),ve}function bt(V,z,q,Ee){if(typeof q=="object"&&q!==null&&q.type===I&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case S:e:{for(var ve=q.key;z!==null;){if(z.key===ve){if(ve=q.type,ve===I){if(z.tag===7){o(V,z.sibling),Ee=h(z,q.props.children),Ee.return=V,V=Ee;break e}}else if(z.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===re&&Cg(ve)===z.type){o(V,z.sibling),Ee=h(z,q.props),Ic(Ee,q),Ee.return=V,V=Ee;break e}o(V,z);break}else i(V,z);z=z.sibling}q.type===I?(Ee=Io(q.props.children,V.mode,Ee,q.key),Ee.return=V,V=Ee):(Ee=Xu(q.type,q.key,q.props,null,V.mode,Ee),Ic(Ee,q),Ee.return=V,V=Ee)}return _(V);case g:e:{for(ve=q.key;z!==null;){if(z.key===ve)if(z.tag===4&&z.stateNode.containerInfo===q.containerInfo&&z.stateNode.implementation===q.implementation){o(V,z.sibling),Ee=h(z,q.children||[]),Ee.return=V,V=Ee;break e}else{o(V,z);break}else i(V,z);z=z.sibling}Ee=oE(q,V.mode,Ee),Ee.return=V,V=Ee}return _(V);case re:return ve=q._init,q=ve(q._payload),bt(V,z,q,Ee)}if(J(q))return Ge(V,z,q,Ee);if(de(q)){if(ve=de(q),typeof ve!="function")throw Error(l(150));return q=ve.call(q),Ue(V,z,q,Ee)}if(typeof q.then=="function")return bt(V,z,fd(q),Ee);if(q.$$typeof===U)return bt(V,z,Ju(V,q),Ee);hd(V,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,z!==null&&z.tag===6?(o(V,z.sibling),Ee=h(z,q),Ee.return=V,V=Ee):(o(V,z),Ee=lE(q,V.mode,Ee),Ee.return=V,V=Ee),_(V)):o(V,z)}return function(V,z,q,Ee){try{pc=0;var ve=bt(V,z,q,Ee);return Bs=null,ve}catch(He){if(He===hc||He===td)throw He;var Ze=Mn(29,He,null,V.mode);return Ze.lanes=Ee,Ze.return=V,Ze}finally{}}}var Fs=bg(!0),Og=bg(!1),ti=X(null),yi=null;function yl(a){var i=a.alternate;Y(pa,pa.current&1),Y(ti,a),yi===null&&(i===null||ks.current!==null||i.memoizedState!==null)&&(yi=a)}function Dg(a){if(a.tag===22){if(Y(pa,pa.current),Y(ti,a),yi===null){var i=a.alternate;i!==null&&i.memoizedState!==null&&(yi=a)}}else vl()}function vl(){Y(pa,pa.current),Y(ti,ti.current)}function Ji(a){Z(ti),yi===a&&(yi=null),Z(pa)}var pa=X(0);function Ed(a){for(var i=a;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||DA(o)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break;for(;i.sibling===null;){if(i.return===null||i.return===a)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function wE(a,i,o,r){i=a.memoizedState,o=o(r,i),o=o==null?i:R({},i,o),a.memoizedState=o,a.lanes===0&&(a.updateQueue.baseState=o)}var BE={enqueueSetState:function(a,i,o){a=a._reactInternals;var r=Un(),h=bl(r);h.payload=i,o!=null&&(h.callback=o),i=Ol(a,h,r),i!==null&&(kn(i,a,r),Ac(i,a,r))},enqueueReplaceState:function(a,i,o){a=a._reactInternals;var r=Un(),h=bl(r);h.tag=1,h.payload=i,o!=null&&(h.callback=o),i=Ol(a,h,r),i!==null&&(kn(i,a,r),Ac(i,a,r))},enqueueForceUpdate:function(a,i){a=a._reactInternals;var o=Un(),r=bl(o);r.tag=2,i!=null&&(r.callback=i),i=Ol(a,r,o),i!==null&&(kn(i,a,o),Ac(i,a,o))}};function yg(a,i,o,r,h,m,_){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(r,m,_):i.prototype&&i.prototype.isPureReactComponent?!lc(o,r)||!lc(h,m):!0}function vg(a,i,o,r){a=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,r),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,r),i.state!==a&&BE.enqueueReplaceState(i,i.state,null)}function Lo(a,i){var o=i;if("ref"in i){o={};for(var r in i)r!=="ref"&&(o[r]=i[r])}if(a=a.defaultProps){o===i&&(o=R({},o));for(var h in a)o[h]===void 0&&(o[h]=a[h])}return o}var Ad=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function Mg(a){Ad(a)}function Lg(a){console.error(a)}function Hg(a){Ad(a)}function md(a,i){try{var o=a.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(r){setTimeout(function(){throw r})}}function xg(a,i,o){try{var r=a.onCaughtError;r(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function FE(a,i,o){return o=bl(o),o.tag=3,o.payload={element:null},o.callback=function(){md(a,i)},o}function Ug(a){return a=bl(a),a.tag=3,a}function kg(a,i,o,r){var h=o.type.getDerivedStateFromError;if(typeof h=="function"){var m=r.value;a.payload=function(){return h(m)},a.callback=function(){xg(i,o,r)}}var _=o.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(a.callback=function(){xg(i,o,r),typeof h!="function"&&(kl===null?kl=new Set([this]):kl.add(this));var N=r.stack;this.componentDidCatch(r.value,{componentStack:N!==null?N:""})})}function TD(a,i,o,r,h){if(o.flags|=32768,r!==null&&typeof r=="object"&&typeof r.then=="function"){if(i=o.alternate,i!==null&&uc(i,o,h,!0),o=ti.current,o!==null){switch(o.tag){case 13:return yi===null?dA():o.alternate===null&&Jt===0&&(Jt=3),o.flags&=-257,o.flags|=65536,o.lanes=h,r===mE?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([r]):i.add(r),hA(a,r,h)),!1;case 22:return o.flags|=65536,r===mE?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([r])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([r]):o.add(r)),hA(a,r,h)),!1}throw Error(l(435,o.tag))}return hA(a,r,h),dA(),!1}if(ht)return i=ti.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,r!==cE&&(a=Error(l(422),{cause:r}),cc(Qn(a,o)))):(r!==cE&&(i=Error(l(423),{cause:r}),cc(Qn(i,o))),a=a.current.alternate,a.flags|=65536,h&=-h,a.lanes|=h,r=Qn(r,o),h=FE(a.stateNode,r,h),SE(a,h),Jt!==4&&(Jt=2)),!1;var m=Error(l(520),{cause:r});if(m=Qn(m,o),vc===null?vc=[m]:vc.push(m),Jt!==4&&(Jt=2),i===null)return!0;r=Qn(r,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,a=h&-h,o.lanes|=a,a=FE(o.stateNode,r,a),SE(o,a),!1;case 1:if(i=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(kl===null||!kl.has(m))))return o.flags|=65536,h&=-h,o.lanes|=h,h=Ug(h),kg(h,a,o,r),SE(o,h),!1}o=o.return}while(o!==null);return!1}var Pg=Error(l(461)),Da=!1;function Ba(a,i,o,r){i.child=a===null?Og(i,null,o,r):Fs(i,a.child,o,r)}function Gg(a,i,o,r,h){o=o.render;var m=i.ref;if("ref"in r){var _={};for(var N in r)N!=="ref"&&(_[N]=r[N])}else _=r;return yo(i),r=NE(a,i,o,_,m,h),N=CE(),a!==null&&!Da?(bE(a,i,h),el(a,i,h)):(ht&&N&&sE(i),i.flags|=1,Ba(a,i,r,h),i.child)}function wg(a,i,o,r,h){if(a===null){var m=o.type;return typeof m=="function"&&!iE(m)&&m.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=m,Bg(a,i,m,r,h)):(a=Xu(o.type,null,r,i,i.mode,h),a.ref=i.ref,a.return=i,i.child=a)}if(m=a.child,!XE(a,h)){var _=m.memoizedProps;if(o=o.compare,o=o!==null?o:lc,o(_,r)&&a.ref===i.ref)return el(a,i,h)}return i.flags|=1,a=Wi(m,r),a.ref=i.ref,a.return=i,i.child=a}function Bg(a,i,o,r,h){if(a!==null){var m=a.memoizedProps;if(lc(m,r)&&a.ref===i.ref)if(Da=!1,i.pendingProps=r=m,XE(a,h))(a.flags&131072)!==0&&(Da=!0);else return i.lanes=a.lanes,el(a,i,h)}return zE(a,i,o,r,h)}function Fg(a,i,o){var r=i.pendingProps,h=r.children,m=a!==null?a.memoizedState:null;if(r.mode==="hidden"){if((i.flags&128)!==0){if(r=m!==null?m.baseLanes|o:o,a!==null){for(h=i.child=a.child,m=0;h!==null;)m=m|h.lanes|h.childLanes,h=h.sibling;i.childLanes=m&~r}else i.childLanes=0,i.child=null;return zg(a,i,r,o)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},a!==null&&ed(i,m!==null?m.cachePool:null),m!==null?BS(i,m):_E(),Dg(i);else return i.lanes=i.childLanes=536870912,zg(a,i,m!==null?m.baseLanes|o:o,o)}else m!==null?(ed(i,m.cachePool),BS(i,m),vl(),i.memoizedState=null):(a!==null&&ed(i,null),_E(),vl());return Ba(a,i,h,o),i.child}function zg(a,i,o,r){var h=AE();return h=h===null?null:{parent:_a._currentValue,pool:h},i.memoizedState={baseLanes:o,cachePool:h},a!==null&&ed(i,null),_E(),Dg(i),a!==null&&uc(a,i,r,!0),null}function Rd(a,i){var o=i.ref;if(o===null)a!==null&&a.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(l(284));(a===null||a.ref!==o)&&(i.flags|=4194816)}}function zE(a,i,o,r,h){return yo(i),o=NE(a,i,o,r,void 0,h),r=CE(),a!==null&&!Da?(bE(a,i,h),el(a,i,h)):(ht&&r&&sE(i),i.flags|=1,Ba(a,i,o,h),i.child)}function jg(a,i,o,r,h,m){return yo(i),i.updateQueue=null,o=zS(i,r,o,h),FS(a),r=CE(),a!==null&&!Da?(bE(a,i,m),el(a,i,m)):(ht&&r&&sE(i),i.flags|=1,Ba(a,i,o,m),i.child)}function Yg(a,i,o,r,h){if(yo(i),i.stateNode===null){var m=Ms,_=o.contextType;typeof _=="object"&&_!==null&&(m=Qa(_)),m=new o(r,m),i.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=BE,i.stateNode=m,m._reactInternals=i,m=i.stateNode,m.props=r,m.state=i.memoizedState,m.refs={},RE(i),_=o.contextType,m.context=typeof _=="object"&&_!==null?Qa(_):Ms,m.state=i.memoizedState,_=o.getDerivedStateFromProps,typeof _=="function"&&(wE(i,o,_,r),m.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(_=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),_!==m.state&&BE.enqueueReplaceState(m,m.state,null),Rc(i,r,m,h),mc(),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308),r=!0}else if(a===null){m=i.stateNode;var N=i.memoizedProps,k=Lo(o,N);m.props=k;var Q=m.context,fe=o.contextType;_=Ms,typeof fe=="object"&&fe!==null&&(_=Qa(fe));var Re=o.getDerivedStateFromProps;fe=typeof Re=="function"||typeof m.getSnapshotBeforeUpdate=="function",N=i.pendingProps!==N,fe||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(N||Q!==_)&&vg(i,m,r,_),Cl=!1;var ae=i.memoizedState;m.state=ae,Rc(i,r,m,h),mc(),Q=i.memoizedState,N||ae!==Q||Cl?(typeof Re=="function"&&(wE(i,o,Re,r),Q=i.memoizedState),(k=Cl||yg(i,o,k,r,ae,Q,_))?(fe||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(i.flags|=4194308)):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=r,i.memoizedState=Q),m.props=r,m.state=Q,m.context=_,r=k):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),r=!1)}else{m=i.stateNode,TE(a,i),_=i.memoizedProps,fe=Lo(o,_),m.props=fe,Re=i.pendingProps,ae=m.context,Q=o.contextType,k=Ms,typeof Q=="object"&&Q!==null&&(k=Qa(Q)),N=o.getDerivedStateFromProps,(Q=typeof N=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_!==Re||ae!==k)&&vg(i,m,r,k),Cl=!1,ae=i.memoizedState,m.state=ae,Rc(i,r,m,h),mc();var ne=i.memoizedState;_!==Re||ae!==ne||Cl||a!==null&&a.dependencies!==null&&$u(a.dependencies)?(typeof N=="function"&&(wE(i,o,N,r),ne=i.memoizedState),(fe=Cl||yg(i,o,fe,r,ae,ne,k)||a!==null&&a.dependencies!==null&&$u(a.dependencies))?(Q||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(r,ne,k),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(r,ne,k)),typeof m.componentDidUpdate=="function"&&(i.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof m.componentDidUpdate!="function"||_===a.memoizedProps&&ae===a.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===a.memoizedProps&&ae===a.memoizedState||(i.flags|=1024),i.memoizedProps=r,i.memoizedState=ne),m.props=r,m.state=ne,m.context=k,r=fe):(typeof m.componentDidUpdate!="function"||_===a.memoizedProps&&ae===a.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===a.memoizedProps&&ae===a.memoizedState||(i.flags|=1024),r=!1)}return m=r,Rd(a,i),r=(i.flags&128)!==0,m||r?(m=i.stateNode,o=r&&typeof o.getDerivedStateFromError!="function"?null:m.render(),i.flags|=1,a!==null&&r?(i.child=Fs(i,a.child,null,h),i.child=Fs(i,null,o,h)):Ba(a,i,o,h),i.memoizedState=m.state,a=i.child):a=el(a,i,h),a}function Kg(a,i,o,r){return rc(),i.flags|=256,Ba(a,i,o,r),i.child}var jE={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function YE(a){return{baseLanes:a,cachePool:LS()}}function KE(a,i,o){return a=a!==null?a.childLanes&~o:0,i&&(a|=ai),a}function Vg(a,i,o){var r=i.pendingProps,h=!1,m=(i.flags&128)!==0,_;if((_=m)||(_=a!==null&&a.memoizedState===null?!1:(pa.current&2)!==0),_&&(h=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,a===null){if(ht){if(h?yl(i):vl(),ht){var N=$t,k;if(k=N){e:{for(k=N,N=Di;k.nodeType!==8;){if(!N){N=null;break e}if(k=Ai(k.nextSibling),k===null){N=null;break e}}N=k}N!==null?(i.memoizedState={dehydrated:N,treeContext:No!==null?{id:qi,overflow:Xi}:null,retryLane:536870912,hydrationErrors:null},k=Mn(18,null,null,0),k.stateNode=N,k.return=i,i.child=k,ln=i,$t=null,k=!0):k=!1}k||Oo(i)}if(N=i.memoizedState,N!==null&&(N=N.dehydrated,N!==null))return DA(N)?i.lanes=32:i.lanes=536870912,null;Ji(i)}return N=r.children,r=r.fallback,h?(vl(),h=i.mode,N=Td({mode:"hidden",children:N},h),r=Io(r,h,o,null),N.return=i,r.return=i,N.sibling=r,i.child=N,h=i.child,h.memoizedState=YE(o),h.childLanes=KE(a,_,o),i.memoizedState=jE,r):(yl(i),VE(i,N))}if(k=a.memoizedState,k!==null&&(N=k.dehydrated,N!==null)){if(m)i.flags&256?(yl(i),i.flags&=-257,i=WE(a,i,o)):i.memoizedState!==null?(vl(),i.child=a.child,i.flags|=128,i=null):(vl(),h=r.fallback,N=i.mode,r=Td({mode:"visible",children:r.children},N),h=Io(h,N,o,null),h.flags|=2,r.return=i,h.return=i,r.sibling=h,i.child=r,Fs(i,a.child,null,o),r=i.child,r.memoizedState=YE(o),r.childLanes=KE(a,_,o),i.memoizedState=jE,i=h);else if(yl(i),DA(N)){if(_=N.nextSibling&&N.nextSibling.dataset,_)var Q=_.dgst;_=Q,r=Error(l(419)),r.stack="",r.digest=_,cc({value:r,source:null,stack:null}),i=WE(a,i,o)}else if(Da||uc(a,i,o,!1),_=(o&a.childLanes)!==0,Da||_){if(_=xt,_!==null&&(r=o&-o,r=(r&42)!==0?1:yh(r),r=(r&(_.suspendedLanes|o))!==0?0:r,r!==0&&r!==k.retryLane))throw k.retryLane=r,vs(a,r),kn(_,a,r),Pg;N.data==="$?"||dA(),i=WE(a,i,o)}else N.data==="$?"?(i.flags|=192,i.child=a.child,i=null):(a=k.treeContext,$t=Ai(N.nextSibling),ln=i,ht=!0,bo=null,Di=!1,a!==null&&(Jn[ei++]=qi,Jn[ei++]=Xi,Jn[ei++]=No,qi=a.id,Xi=a.overflow,No=i),i=VE(i,r.children),i.flags|=4096);return i}return h?(vl(),h=r.fallback,N=i.mode,k=a.child,Q=k.sibling,r=Wi(k,{mode:"hidden",children:r.children}),r.subtreeFlags=k.subtreeFlags&65011712,Q!==null?h=Wi(Q,h):(h=Io(h,N,o,null),h.flags|=2),h.return=i,r.return=i,r.sibling=h,i.child=r,r=h,h=i.child,N=a.child.memoizedState,N===null?N=YE(o):(k=N.cachePool,k!==null?(Q=_a._currentValue,k=k.parent!==Q?{parent:Q,pool:Q}:k):k=LS(),N={baseLanes:N.baseLanes|o,cachePool:k}),h.memoizedState=N,h.childLanes=KE(a,_,o),i.memoizedState=jE,r):(yl(i),o=a.child,a=o.sibling,o=Wi(o,{mode:"visible",children:r.children}),o.return=i,o.sibling=null,a!==null&&(_=i.deletions,_===null?(i.deletions=[a],i.flags|=16):_.push(a)),i.child=o,i.memoizedState=null,o)}function VE(a,i){return i=Td({mode:"visible",children:i},a.mode),i.return=a,a.child=i}function Td(a,i){return a=Mn(22,a,null,i),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function WE(a,i,o){return Fs(i,a.child,null,o),a=VE(i,i.pendingProps.children),a.flags|=2,i.memoizedState=null,a}function Wg(a,i,o){a.lanes|=i;var r=a.alternate;r!==null&&(r.lanes|=i),dE(a.return,i,o)}function qE(a,i,o,r,h){var m=a.memoizedState;m===null?a.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:r,tail:o,tailMode:h}:(m.isBackwards=i,m.rendering=null,m.renderingStartTime=0,m.last=r,m.tail=o,m.tailMode=h)}function qg(a,i,o){var r=i.pendingProps,h=r.revealOrder,m=r.tail;if(Ba(a,i,r.children,o),r=pa.current,(r&2)!==0)r=r&1|2,i.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=i.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&Wg(a,o,i);else if(a.tag===19)Wg(a,o,i);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break e;for(;a.sibling===null;){if(a.return===null||a.return===i)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}r&=1}switch(Y(pa,r),h){case"forwards":for(o=i.child,h=null;o!==null;)a=o.alternate,a!==null&&Ed(a)===null&&(h=o),o=o.sibling;o=h,o===null?(h=i.child,i.child=null):(h=o.sibling,o.sibling=null),qE(i,!1,h,o,m);break;case"backwards":for(o=null,h=i.child,i.child=null;h!==null;){if(a=h.alternate,a!==null&&Ed(a)===null){i.child=h;break}a=h.sibling,h.sibling=o,o=h,h=a}qE(i,!0,o,null,m);break;case"together":qE(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function el(a,i,o){if(a!==null&&(i.dependencies=a.dependencies),Ul|=i.lanes,(o&i.childLanes)===0)if(a!==null){if(uc(a,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(a!==null&&i.child!==a.child)throw Error(l(153));if(i.child!==null){for(a=i.child,o=Wi(a,a.pendingProps),i.child=o,o.return=i;a.sibling!==null;)a=a.sibling,o=o.sibling=Wi(a,a.pendingProps),o.return=i;o.sibling=null}return i.child}function XE(a,i){return(a.lanes&i)!==0?!0:(a=a.dependencies,!!(a!==null&&$u(a)))}function SD(a,i,o){switch(i.tag){case 3:Te(i,i.stateNode.containerInfo),Nl(i,_a,a.memoizedState.cache),rc();break;case 27:case 5:Be(i);break;case 4:Te(i,i.stateNode.containerInfo);break;case 10:Nl(i,i.type,i.memoizedProps.value);break;case 13:var r=i.memoizedState;if(r!==null)return r.dehydrated!==null?(yl(i),i.flags|=128,null):(o&i.child.childLanes)!==0?Vg(a,i,o):(yl(i),a=el(a,i,o),a!==null?a.sibling:null);yl(i);break;case 19:var h=(a.flags&128)!==0;if(r=(o&i.childLanes)!==0,r||(uc(a,i,o,!1),r=(o&i.childLanes)!==0),h){if(r)return qg(a,i,o);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),Y(pa,pa.current),r)break;return null;case 22:case 23:return i.lanes=0,Fg(a,i,o);case 24:Nl(i,_a,a.memoizedState.cache)}return el(a,i,o)}function Xg(a,i,o){if(a!==null)if(a.memoizedProps!==i.pendingProps)Da=!0;else{if(!XE(a,o)&&(i.flags&128)===0)return Da=!1,SD(a,i,o);Da=(a.flags&131072)!==0}else Da=!1,ht&&(i.flags&1048576)!==0&&CS(i,Qu,i.index);switch(i.lanes=0,i.tag){case 16:e:{a=i.pendingProps;var r=i.elementType,h=r._init;if(r=h(r._payload),i.type=r,typeof r=="function")iE(r)?(a=Lo(r,a),i.tag=1,i=Yg(null,i,r,a,o)):(i.tag=0,i=zE(null,i,r,a,o));else{if(r!=null){if(h=r.$$typeof,h===H){i.tag=11,i=Gg(null,i,r,a,o);break e}else if(h===x){i.tag=14,i=wg(null,i,r,a,o);break e}}throw i=ee(r)||r,Error(l(306,i,""))}}return i;case 0:return zE(a,i,i.type,i.pendingProps,o);case 1:return r=i.type,h=Lo(r,i.pendingProps),Yg(a,i,r,h,o);case 3:e:{if(Te(i,i.stateNode.containerInfo),a===null)throw Error(l(387));r=i.pendingProps;var m=i.memoizedState;h=m.element,TE(a,i),Rc(i,r,null,o);var _=i.memoizedState;if(r=_.cache,Nl(i,_a,r),r!==m.cache&&fE(i,[_a],o,!0),mc(),r=_.element,m.isDehydrated)if(m={element:r,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){i=Kg(a,i,r,o);break e}else if(r!==h){h=Qn(Error(l(424)),i),cc(h),i=Kg(a,i,r,o);break e}else{switch(a=i.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for($t=Ai(a.firstChild),ln=i,ht=!0,bo=null,Di=!0,o=Og(i,null,r,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(rc(),r===h){i=el(a,i,o);break e}Ba(a,i,r,o)}i=i.child}return i;case 26:return Rd(a,i),a===null?(o=J_(i.type,null,i.pendingProps,null))?i.memoizedState=o:ht||(o=i.type,a=i.pendingProps,r=Ld(he.current).createElement(o),r[Za]=i,r[Rn]=a,za(r,o,a),Oa(r),i.stateNode=r):i.memoizedState=J_(i.type,a.memoizedProps,i.pendingProps,a.memoizedState),null;case 27:return Be(i),a===null&&ht&&(r=i.stateNode=Z_(i.type,i.pendingProps,he.current),ln=i,Di=!0,h=$t,wl(i.type)?(yA=h,$t=Ai(r.firstChild)):$t=h),Ba(a,i,i.pendingProps.children,o),Rd(a,i),a===null&&(i.flags|=4194304),i.child;case 5:return a===null&&ht&&((h=r=$t)&&(r=WD(r,i.type,i.pendingProps,Di),r!==null?(i.stateNode=r,ln=i,$t=Ai(r.firstChild),Di=!1,h=!0):h=!1),h||Oo(i)),Be(i),h=i.type,m=i.pendingProps,_=a!==null?a.memoizedProps:null,r=m.children,CA(h,m)?r=null:_!==null&&CA(h,_)&&(i.flags|=32),i.memoizedState!==null&&(h=NE(a,i,dD,null,null,o),wc._currentValue=h),Rd(a,i),Ba(a,i,r,o),i.child;case 6:return a===null&&ht&&((a=o=$t)&&(o=qD(o,i.pendingProps,Di),o!==null?(i.stateNode=o,ln=i,$t=null,a=!0):a=!1),a||Oo(i)),null;case 13:return Vg(a,i,o);case 4:return Te(i,i.stateNode.containerInfo),r=i.pendingProps,a===null?i.child=Fs(i,null,r,o):Ba(a,i,r,o),i.child;case 11:return Gg(a,i,i.type,i.pendingProps,o);case 7:return Ba(a,i,i.pendingProps,o),i.child;case 8:return Ba(a,i,i.pendingProps.children,o),i.child;case 12:return Ba(a,i,i.pendingProps.children,o),i.child;case 10:return r=i.pendingProps,Nl(i,i.type,r.value),Ba(a,i,r.children,o),i.child;case 9:return h=i.type._context,r=i.pendingProps.children,yo(i),h=Qa(h),r=r(h),i.flags|=1,Ba(a,i,r,o),i.child;case 14:return wg(a,i,i.type,i.pendingProps,o);case 15:return Bg(a,i,i.type,i.pendingProps,o);case 19:return qg(a,i,o);case 31:return r=i.pendingProps,o=i.mode,r={mode:r.mode,children:r.children},a===null?(o=Td(r,o),o.ref=i.ref,i.child=o,o.return=i,i=o):(o=Wi(a.child,r),o.ref=i.ref,i.child=o,o.return=i,i=o),i;case 22:return Fg(a,i,o);case 24:return yo(i),r=Qa(_a),a===null?(h=AE(),h===null&&(h=xt,m=hE(),h.pooledCache=m,m.refCount++,m!==null&&(h.pooledCacheLanes|=o),h=m),i.memoizedState={parent:r,cache:h},RE(i),Nl(i,_a,h)):((a.lanes&o)!==0&&(TE(a,i),Rc(i,null,null,o),mc()),h=a.memoizedState,m=i.memoizedState,h.parent!==r?(h={parent:r,cache:r},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),Nl(i,_a,r)):(r=m.cache,Nl(i,_a,r),r!==h.cache&&fE(i,[_a],o,!0))),Ba(a,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(l(156,i.tag))}function tl(a){a.flags|=4}function Zg(a,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!ip(i)){if(i=ti.current,i!==null&&((rt&4194048)===rt?yi!==null:(rt&62914560)!==rt&&(rt&536870912)===0||i!==yi))throw Ec=mE,HS;a.flags|=8192}}function Sd(a,i){i!==null&&(a.flags|=4),a.flags&16384&&(i=a.tag!==22?DT():536870912,a.lanes|=i,Ks|=i)}function Nc(a,i){if(!ht)switch(a.tailMode){case"hidden":i=a.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?a.tail=null:o.sibling=null;break;case"collapsed":o=a.tail;for(var r=null;o!==null;)o.alternate!==null&&(r=o),o=o.sibling;r===null?i||a.tail===null?a.tail=null:a.tail.sibling=null:r.sibling=null}}function Yt(a){var i=a.alternate!==null&&a.alternate.child===a.child,o=0,r=0;if(i)for(var h=a.child;h!==null;)o|=h.lanes|h.childLanes,r|=h.subtreeFlags&65011712,r|=h.flags&65011712,h.return=a,h=h.sibling;else for(h=a.child;h!==null;)o|=h.lanes|h.childLanes,r|=h.subtreeFlags,r|=h.flags,h.return=a,h=h.sibling;return a.subtreeFlags|=r,a.childLanes=o,i}function gD(a,i,o){var r=i.pendingProps;switch(rE(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yt(i),null;case 1:return Yt(i),null;case 3:return o=i.stateNode,r=null,a!==null&&(r=a.memoizedState.cache),i.memoizedState.cache!==r&&(i.flags|=2048),Qi(_a),Oe(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(a===null||a.child===null)&&(sc(i)?tl(i):a===null||a.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,DS())),Yt(i),null;case 26:return o=i.memoizedState,a===null?(tl(i),o!==null?(Yt(i),Zg(i,o)):(Yt(i),i.flags&=-16777217)):o?o!==a.memoizedState?(tl(i),Yt(i),Zg(i,o)):(Yt(i),i.flags&=-16777217):(a.memoizedProps!==r&&tl(i),Yt(i),i.flags&=-16777217),null;case 27:be(i),o=he.current;var h=i.type;if(a!==null&&i.stateNode!=null)a.memoizedProps!==r&&tl(i);else{if(!r){if(i.stateNode===null)throw Error(l(166));return Yt(i),null}a=ce.current,sc(i)?bS(i):(a=Z_(h,r,o),i.stateNode=a,tl(i))}return Yt(i),null;case 5:if(be(i),o=i.type,a!==null&&i.stateNode!=null)a.memoizedProps!==r&&tl(i);else{if(!r){if(i.stateNode===null)throw Error(l(166));return Yt(i),null}if(a=ce.current,sc(i))bS(i);else{switch(h=Ld(he.current),a){case 1:a=h.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:a=h.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":a=h.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":a=h.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":a=h.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof r.is=="string"?h.createElement("select",{is:r.is}):h.createElement("select"),r.multiple?a.multiple=!0:r.size&&(a.size=r.size);break;default:a=typeof r.is=="string"?h.createElement(o,{is:r.is}):h.createElement(o)}}a[Za]=i,a[Rn]=r;e:for(h=i.child;h!==null;){if(h.tag===5||h.tag===6)a.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===i)break e;for(;h.sibling===null;){if(h.return===null||h.return===i)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}i.stateNode=a;e:switch(za(a,o,r),o){case"button":case"input":case"select":case"textarea":a=!!r.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&tl(i)}}return Yt(i),i.flags&=-16777217,null;case 6:if(a&&i.stateNode!=null)a.memoizedProps!==r&&tl(i);else{if(typeof r!="string"&&i.stateNode===null)throw Error(l(166));if(a=he.current,sc(i)){if(a=i.stateNode,o=i.memoizedProps,r=null,h=ln,h!==null)switch(h.tag){case 27:case 5:r=h.memoizedProps}a[Za]=i,a=!!(a.nodeValue===o||r!==null&&r.suppressHydrationWarning===!0||j_(a.nodeValue,o)),a||Oo(i)}else a=Ld(a).createTextNode(r),a[Za]=i,i.stateNode=a}return Yt(i),null;case 13:if(r=i.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(h=sc(i),r!==null&&r.dehydrated!==null){if(a===null){if(!h)throw Error(l(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(l(317));h[Za]=i}else rc(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Yt(i),h=!1}else h=DS(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(Ji(i),i):(Ji(i),null)}if(Ji(i),(i.flags&128)!==0)return i.lanes=o,i;if(o=r!==null,a=a!==null&&a.memoizedState!==null,o){r=i.child,h=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(h=r.alternate.memoizedState.cachePool.pool);var m=null;r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(m=r.memoizedState.cachePool.pool),m!==h&&(r.flags|=2048)}return o!==a&&o&&(i.child.flags|=8192),Sd(i,i.updateQueue),Yt(i),null;case 4:return Oe(),a===null&&gA(i.stateNode.containerInfo),Yt(i),null;case 10:return Qi(i.type),Yt(i),null;case 19:if(Z(pa),h=i.memoizedState,h===null)return Yt(i),null;if(r=(i.flags&128)!==0,m=h.rendering,m===null)if(r)Nc(h,!1);else{if(Jt!==0||a!==null&&(a.flags&128)!==0)for(a=i.child;a!==null;){if(m=Ed(a),m!==null){for(i.flags|=128,Nc(h,!1),a=m.updateQueue,i.updateQueue=a,Sd(i,a),i.subtreeFlags=0,a=o,o=i.child;o!==null;)NS(o,a),o=o.sibling;return Y(pa,pa.current&1|2),i.child}a=a.sibling}h.tail!==null&&it()>pd&&(i.flags|=128,r=!0,Nc(h,!1),i.lanes=4194304)}else{if(!r)if(a=Ed(m),a!==null){if(i.flags|=128,r=!0,a=a.updateQueue,i.updateQueue=a,Sd(i,a),Nc(h,!0),h.tail===null&&h.tailMode==="hidden"&&!m.alternate&&!ht)return Yt(i),null}else 2*it()-h.renderingStartTime>pd&&o!==536870912&&(i.flags|=128,r=!0,Nc(h,!1),i.lanes=4194304);h.isBackwards?(m.sibling=i.child,i.child=m):(a=h.last,a!==null?a.sibling=m:i.child=m,h.last=m)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=it(),i.sibling=null,a=pa.current,Y(pa,r?a&1|2:a&1),i):(Yt(i),null);case 22:case 23:return Ji(i),pE(),r=i.memoizedState!==null,a!==null?a.memoizedState!==null!==r&&(i.flags|=8192):r&&(i.flags|=8192),r?(o&536870912)!==0&&(i.flags&128)===0&&(Yt(i),i.subtreeFlags&6&&(i.flags|=8192)):Yt(i),o=i.updateQueue,o!==null&&Sd(i,o.retryQueue),o=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(o=a.memoizedState.cachePool.pool),r=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==o&&(i.flags|=2048),a!==null&&Z(vo),null;case 24:return o=null,a!==null&&(o=a.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),Qi(_a),Yt(i),null;case 25:return null;case 30:return null}throw Error(l(156,i.tag))}function _D(a,i){switch(rE(i),i.tag){case 1:return a=i.flags,a&65536?(i.flags=a&-65537|128,i):null;case 3:return Qi(_a),Oe(),a=i.flags,(a&65536)!==0&&(a&128)===0?(i.flags=a&-65537|128,i):null;case 26:case 27:case 5:return be(i),null;case 13:if(Ji(i),a=i.memoizedState,a!==null&&a.dehydrated!==null){if(i.alternate===null)throw Error(l(340));rc()}return a=i.flags,a&65536?(i.flags=a&-65537|128,i):null;case 19:return Z(pa),null;case 4:return Oe(),null;case 10:return Qi(i.type),null;case 22:case 23:return Ji(i),pE(),a!==null&&Z(vo),a=i.flags,a&65536?(i.flags=a&-65537|128,i):null;case 24:return Qi(_a),null;case 25:return null;default:return null}}function Qg(a,i){switch(rE(i),i.tag){case 3:Qi(_a),Oe();break;case 26:case 27:case 5:be(i);break;case 4:Oe();break;case 13:Ji(i);break;case 19:Z(pa);break;case 10:Qi(i.type);break;case 22:case 23:Ji(i),pE(),a!==null&&Z(vo);break;case 24:Qi(_a)}}function Cc(a,i){try{var o=i.updateQueue,r=o!==null?o.lastEffect:null;if(r!==null){var h=r.next;o=h;do{if((o.tag&a)===a){r=void 0;var m=o.create,_=o.inst;r=m(),_.destroy=r}o=o.next}while(o!==h)}}catch(N){vt(i,i.return,N)}}function Ml(a,i,o){try{var r=i.updateQueue,h=r!==null?r.lastEffect:null;if(h!==null){var m=h.next;r=m;do{if((r.tag&a)===a){var _=r.inst,N=_.destroy;if(N!==void 0){_.destroy=void 0,h=i;var k=o,Q=N;try{Q()}catch(fe){vt(h,k,fe)}}}r=r.next}while(r!==m)}}catch(fe){vt(i,i.return,fe)}}function $g(a){var i=a.updateQueue;if(i!==null){var o=a.stateNode;try{wS(i,o)}catch(r){vt(a,a.return,r)}}}function Jg(a,i,o){o.props=Lo(a.type,a.memoizedProps),o.state=a.memoizedState;try{o.componentWillUnmount()}catch(r){vt(a,i,r)}}function bc(a,i){try{var o=a.ref;if(o!==null){switch(a.tag){case 26:case 27:case 5:var r=a.stateNode;break;case 30:r=a.stateNode;break;default:r=a.stateNode}typeof o=="function"?a.refCleanup=o(r):o.current=r}}catch(h){vt(a,i,h)}}function vi(a,i){var o=a.ref,r=a.refCleanup;if(o!==null)if(typeof r=="function")try{r()}catch(h){vt(a,i,h)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(h){vt(a,i,h)}else o.current=null}function e_(a){var i=a.type,o=a.memoizedProps,r=a.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&r.focus();break e;case"img":o.src?r.src=o.src:o.srcSet&&(r.srcset=o.srcSet)}}catch(h){vt(a,a.return,h)}}function ZE(a,i,o){try{var r=a.stateNode;zD(r,a.type,o,i),r[Rn]=i}catch(h){vt(a,a.return,h)}}function t_(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&wl(a.type)||a.tag===4}function QE(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||t_(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&wl(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function $E(a,i,o){var r=a.tag;if(r===5||r===6)a=a.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(a,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(a),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=Md));else if(r!==4&&(r===27&&wl(a.type)&&(o=a.stateNode,i=null),a=a.child,a!==null))for($E(a,i,o),a=a.sibling;a!==null;)$E(a,i,o),a=a.sibling}function gd(a,i,o){var r=a.tag;if(r===5||r===6)a=a.stateNode,i?o.insertBefore(a,i):o.appendChild(a);else if(r!==4&&(r===27&&wl(a.type)&&(o=a.stateNode),a=a.child,a!==null))for(gd(a,i,o),a=a.sibling;a!==null;)gd(a,i,o),a=a.sibling}function a_(a){var i=a.stateNode,o=a.memoizedProps;try{for(var r=a.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);za(i,r,o),i[Za]=a,i[Rn]=o}catch(m){vt(a,a.return,m)}}var al=!1,ua=!1,JE=!1,n_=typeof WeakSet=="function"?WeakSet:Set,ya=null;function pD(a,i){if(a=a.containerInfo,IA=Gd,a=ES(a),Qh(a)){if("selectionStart"in a)var o={start:a.selectionStart,end:a.selectionEnd};else e:{o=(o=a.ownerDocument)&&o.defaultView||window;var r=o.getSelection&&o.getSelection();if(r&&r.rangeCount!==0){o=r.anchorNode;var h=r.anchorOffset,m=r.focusNode;r=r.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var _=0,N=-1,k=-1,Q=0,fe=0,Re=a,ae=null;t:for(;;){for(var ne;Re!==o||h!==0&&Re.nodeType!==3||(N=_+h),Re!==m||r!==0&&Re.nodeType!==3||(k=_+r),Re.nodeType===3&&(_+=Re.nodeValue.length),(ne=Re.firstChild)!==null;)ae=Re,Re=ne;for(;;){if(Re===a)break t;if(ae===o&&++Q===h&&(N=_),ae===m&&++fe===r&&(k=_),(ne=Re.nextSibling)!==null)break;Re=ae,ae=Re.parentNode}Re=ne}o=N===-1||k===-1?null:{start:N,end:k}}else o=null}o=o||{start:0,end:0}}else o=null;for(NA={focusedElem:a,selectionRange:o},Gd=!1,ya=i;ya!==null;)if(i=ya,a=i.child,(i.subtreeFlags&1024)!==0&&a!==null)a.return=i,ya=a;else for(;ya!==null;){switch(i=ya,m=i.alternate,a=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&m!==null){a=void 0,o=i,h=m.memoizedProps,m=m.memoizedState,r=o.stateNode;try{var Ge=Lo(o.type,h,o.elementType===o.type);a=r.getSnapshotBeforeUpdate(Ge,m),r.__reactInternalSnapshotBeforeUpdate=a}catch(Ue){vt(o,o.return,Ue)}}break;case 3:if((a&1024)!==0){if(a=i.stateNode.containerInfo,o=a.nodeType,o===9)OA(a);else if(o===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":OA(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(l(163))}if(a=i.sibling,a!==null){a.return=i.return,ya=a;break}ya=i.return}}function i_(a,i,o){var r=o.flags;switch(o.tag){case 0:case 11:case 15:Ll(a,o),r&4&&Cc(5,o);break;case 1:if(Ll(a,o),r&4)if(a=o.stateNode,i===null)try{a.componentDidMount()}catch(_){vt(o,o.return,_)}else{var h=Lo(o.type,i.memoizedProps);i=i.memoizedState;try{a.componentDidUpdate(h,i,a.__reactInternalSnapshotBeforeUpdate)}catch(_){vt(o,o.return,_)}}r&64&&$g(o),r&512&&bc(o,o.return);break;case 3:if(Ll(a,o),r&64&&(a=o.updateQueue,a!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{wS(a,i)}catch(_){vt(o,o.return,_)}}break;case 27:i===null&&r&4&&a_(o);case 26:case 5:Ll(a,o),i===null&&r&4&&e_(o),r&512&&bc(o,o.return);break;case 12:Ll(a,o);break;case 13:Ll(a,o),r&4&&s_(a,o),r&64&&(a=o.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(o=MD.bind(null,o),XD(a,o))));break;case 22:if(r=o.memoizedState!==null||al,!r){i=i!==null&&i.memoizedState!==null||ua,h=al;var m=ua;al=r,(ua=i)&&!m?Hl(a,o,(o.subtreeFlags&8772)!==0):Ll(a,o),al=h,ua=m}break;case 30:break;default:Ll(a,o)}}function l_(a){var i=a.alternate;i!==null&&(a.alternate=null,l_(i)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(i=a.stateNode,i!==null&&Lh(i)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var zt=null,gn=!1;function nl(a,i,o){for(o=o.child;o!==null;)o_(a,i,o),o=o.sibling}function o_(a,i,o){if(Dn&&typeof Dn.onCommitFiberUnmount=="function")try{Dn.onCommitFiberUnmount(Wr,o)}catch{}switch(o.tag){case 26:ua||vi(o,i),nl(a,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:ua||vi(o,i);var r=zt,h=gn;wl(o.type)&&(zt=o.stateNode,gn=!1),nl(a,i,o),Uc(o.stateNode),zt=r,gn=h;break;case 5:ua||vi(o,i);case 6:if(r=zt,h=gn,zt=null,nl(a,i,o),zt=r,gn=h,zt!==null)if(gn)try{(zt.nodeType===9?zt.body:zt.nodeName==="HTML"?zt.ownerDocument.body:zt).removeChild(o.stateNode)}catch(m){vt(o,i,m)}else try{zt.removeChild(o.stateNode)}catch(m){vt(o,i,m)}break;case 18:zt!==null&&(gn?(a=zt,q_(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,o.stateNode),jc(a)):q_(zt,o.stateNode));break;case 4:r=zt,h=gn,zt=o.stateNode.containerInfo,gn=!0,nl(a,i,o),zt=r,gn=h;break;case 0:case 11:case 14:case 15:ua||Ml(2,o,i),ua||Ml(4,o,i),nl(a,i,o);break;case 1:ua||(vi(o,i),r=o.stateNode,typeof r.componentWillUnmount=="function"&&Jg(o,i,r)),nl(a,i,o);break;case 21:nl(a,i,o);break;case 22:ua=(r=ua)||o.memoizedState!==null,nl(a,i,o),ua=r;break;default:nl(a,i,o)}}function s_(a,i){if(i.memoizedState===null&&(a=i.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{jc(a)}catch(o){vt(i,i.return,o)}}function ID(a){switch(a.tag){case 13:case 19:var i=a.stateNode;return i===null&&(i=a.stateNode=new n_),i;case 22:return a=a.stateNode,i=a._retryCache,i===null&&(i=a._retryCache=new n_),i;default:throw Error(l(435,a.tag))}}function eA(a,i){var o=ID(a);i.forEach(function(r){var h=LD.bind(null,a,r);o.has(r)||(o.add(r),r.then(h,h))})}function Ln(a,i){var o=i.deletions;if(o!==null)for(var r=0;r<o.length;r++){var h=o[r],m=a,_=i,N=_;e:for(;N!==null;){switch(N.tag){case 27:if(wl(N.type)){zt=N.stateNode,gn=!1;break e}break;case 5:zt=N.stateNode,gn=!1;break e;case 3:case 4:zt=N.stateNode.containerInfo,gn=!0;break e}N=N.return}if(zt===null)throw Error(l(160));o_(m,_,h),zt=null,gn=!1,m=h.alternate,m!==null&&(m.return=null),h.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)r_(i,a),i=i.sibling}var Ei=null;function r_(a,i){var o=a.alternate,r=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Ln(i,a),Hn(a),r&4&&(Ml(3,a,a.return),Cc(3,a),Ml(5,a,a.return));break;case 1:Ln(i,a),Hn(a),r&512&&(ua||o===null||vi(o,o.return)),r&64&&al&&(a=a.updateQueue,a!==null&&(r=a.callbacks,r!==null&&(o=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=o===null?r:o.concat(r))));break;case 26:var h=Ei;if(Ln(i,a),Hn(a),r&512&&(ua||o===null||vi(o,o.return)),r&4){var m=o!==null?o.memoizedState:null;if(r=a.memoizedState,o===null)if(r===null)if(a.stateNode===null){e:{r=a.type,o=a.memoizedProps,h=h.ownerDocument||h;t:switch(r){case"title":m=h.getElementsByTagName("title")[0],(!m||m[Zr]||m[Za]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=h.createElement(r),h.head.insertBefore(m,h.querySelector("head > title"))),za(m,r,o),m[Za]=a,Oa(m),r=m;break e;case"link":var _=ap("link","href",h).get(r+(o.href||""));if(_){for(var N=0;N<_.length;N++)if(m=_[N],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){_.splice(N,1);break t}}m=h.createElement(r),za(m,r,o),h.head.appendChild(m);break;case"meta":if(_=ap("meta","content",h).get(r+(o.content||""))){for(N=0;N<_.length;N++)if(m=_[N],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){_.splice(N,1);break t}}m=h.createElement(r),za(m,r,o),h.head.appendChild(m);break;default:throw Error(l(468,r))}m[Za]=a,Oa(m),r=m}a.stateNode=r}else np(h,a.type,a.stateNode);else a.stateNode=tp(h,r,a.memoizedProps);else m!==r?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,r===null?np(h,a.type,a.stateNode):tp(h,r,a.memoizedProps)):r===null&&a.stateNode!==null&&ZE(a,a.memoizedProps,o.memoizedProps)}break;case 27:Ln(i,a),Hn(a),r&512&&(ua||o===null||vi(o,o.return)),o!==null&&r&4&&ZE(a,a.memoizedProps,o.memoizedProps);break;case 5:if(Ln(i,a),Hn(a),r&512&&(ua||o===null||vi(o,o.return)),a.flags&32){h=a.stateNode;try{Is(h,"")}catch(ne){vt(a,a.return,ne)}}r&4&&a.stateNode!=null&&(h=a.memoizedProps,ZE(a,h,o!==null?o.memoizedProps:h)),r&1024&&(JE=!0);break;case 6:if(Ln(i,a),Hn(a),r&4){if(a.stateNode===null)throw Error(l(162));r=a.memoizedProps,o=a.stateNode;try{o.nodeValue=r}catch(ne){vt(a,a.return,ne)}}break;case 3:if(Ud=null,h=Ei,Ei=Hd(i.containerInfo),Ln(i,a),Ei=h,Hn(a),r&4&&o!==null&&o.memoizedState.isDehydrated)try{jc(i.containerInfo)}catch(ne){vt(a,a.return,ne)}JE&&(JE=!1,c_(a));break;case 4:r=Ei,Ei=Hd(a.stateNode.containerInfo),Ln(i,a),Hn(a),Ei=r;break;case 12:Ln(i,a),Hn(a);break;case 13:Ln(i,a),Hn(a),a.child.flags&8192&&a.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(oA=it()),r&4&&(r=a.updateQueue,r!==null&&(a.updateQueue=null,eA(a,r)));break;case 22:h=a.memoizedState!==null;var k=o!==null&&o.memoizedState!==null,Q=al,fe=ua;if(al=Q||h,ua=fe||k,Ln(i,a),ua=fe,al=Q,Hn(a),r&8192)e:for(i=a.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(o===null||k||al||ua||Ho(a)),o=null,i=a;;){if(i.tag===5||i.tag===26){if(o===null){k=o=i;try{if(m=k.stateNode,h)_=m.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{N=k.stateNode;var Re=k.memoizedProps.style,ae=Re!=null&&Re.hasOwnProperty("display")?Re.display:null;N.style.display=ae==null||typeof ae=="boolean"?"":(""+ae).trim()}}catch(ne){vt(k,k.return,ne)}}}else if(i.tag===6){if(o===null){k=i;try{k.stateNode.nodeValue=h?"":k.memoizedProps}catch(ne){vt(k,k.return,ne)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===a)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}r&4&&(r=a.updateQueue,r!==null&&(o=r.retryQueue,o!==null&&(r.retryQueue=null,eA(a,o))));break;case 19:Ln(i,a),Hn(a),r&4&&(r=a.updateQueue,r!==null&&(a.updateQueue=null,eA(a,r)));break;case 30:break;case 21:break;default:Ln(i,a),Hn(a)}}function Hn(a){var i=a.flags;if(i&2){try{for(var o,r=a.return;r!==null;){if(t_(r)){o=r;break}r=r.return}if(o==null)throw Error(l(160));switch(o.tag){case 27:var h=o.stateNode,m=QE(a);gd(a,m,h);break;case 5:var _=o.stateNode;o.flags&32&&(Is(_,""),o.flags&=-33);var N=QE(a);gd(a,N,_);break;case 3:case 4:var k=o.stateNode.containerInfo,Q=QE(a);$E(a,Q,k);break;default:throw Error(l(161))}}catch(fe){vt(a,a.return,fe)}a.flags&=-3}i&4096&&(a.flags&=-4097)}function c_(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var i=a;c_(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),a=a.sibling}}function Ll(a,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)i_(a,i.alternate,i),i=i.sibling}function Ho(a){for(a=a.child;a!==null;){var i=a;switch(i.tag){case 0:case 11:case 14:case 15:Ml(4,i,i.return),Ho(i);break;case 1:vi(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&Jg(i,i.return,o),Ho(i);break;case 27:Uc(i.stateNode);case 26:case 5:vi(i,i.return),Ho(i);break;case 22:i.memoizedState===null&&Ho(i);break;case 30:Ho(i);break;default:Ho(i)}a=a.sibling}}function Hl(a,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var r=i.alternate,h=a,m=i,_=m.flags;switch(m.tag){case 0:case 11:case 15:Hl(h,m,o),Cc(4,m);break;case 1:if(Hl(h,m,o),r=m,h=r.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(Q){vt(r,r.return,Q)}if(r=m,h=r.updateQueue,h!==null){var N=r.stateNode;try{var k=h.shared.hiddenCallbacks;if(k!==null)for(h.shared.hiddenCallbacks=null,h=0;h<k.length;h++)GS(k[h],N)}catch(Q){vt(r,r.return,Q)}}o&&_&64&&$g(m),bc(m,m.return);break;case 27:a_(m);case 26:case 5:Hl(h,m,o),o&&r===null&&_&4&&e_(m),bc(m,m.return);break;case 12:Hl(h,m,o);break;case 13:Hl(h,m,o),o&&_&4&&s_(h,m);break;case 22:m.memoizedState===null&&Hl(h,m,o),bc(m,m.return);break;case 30:break;default:Hl(h,m,o)}i=i.sibling}}function tA(a,i){var o=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(o=a.memoizedState.cachePool.pool),a=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),a!==o&&(a!=null&&a.refCount++,o!=null&&dc(o))}function aA(a,i){a=null,i.alternate!==null&&(a=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==a&&(i.refCount++,a!=null&&dc(a))}function Mi(a,i,o,r){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)u_(a,i,o,r),i=i.sibling}function u_(a,i,o,r){var h=i.flags;switch(i.tag){case 0:case 11:case 15:Mi(a,i,o,r),h&2048&&Cc(9,i);break;case 1:Mi(a,i,o,r);break;case 3:Mi(a,i,o,r),h&2048&&(a=null,i.alternate!==null&&(a=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==a&&(i.refCount++,a!=null&&dc(a)));break;case 12:if(h&2048){Mi(a,i,o,r),a=i.stateNode;try{var m=i.memoizedProps,_=m.id,N=m.onPostCommit;typeof N=="function"&&N(_,i.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(k){vt(i,i.return,k)}}else Mi(a,i,o,r);break;case 13:Mi(a,i,o,r);break;case 23:break;case 22:m=i.stateNode,_=i.alternate,i.memoizedState!==null?m._visibility&2?Mi(a,i,o,r):Oc(a,i):m._visibility&2?Mi(a,i,o,r):(m._visibility|=2,zs(a,i,o,r,(i.subtreeFlags&10256)!==0)),h&2048&&tA(_,i);break;case 24:Mi(a,i,o,r),h&2048&&aA(i.alternate,i);break;default:Mi(a,i,o,r)}}function zs(a,i,o,r,h){for(h=h&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var m=a,_=i,N=o,k=r,Q=_.flags;switch(_.tag){case 0:case 11:case 15:zs(m,_,N,k,h),Cc(8,_);break;case 23:break;case 22:var fe=_.stateNode;_.memoizedState!==null?fe._visibility&2?zs(m,_,N,k,h):Oc(m,_):(fe._visibility|=2,zs(m,_,N,k,h)),h&&Q&2048&&tA(_.alternate,_);break;case 24:zs(m,_,N,k,h),h&&Q&2048&&aA(_.alternate,_);break;default:zs(m,_,N,k,h)}i=i.sibling}}function Oc(a,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=a,r=i,h=r.flags;switch(r.tag){case 22:Oc(o,r),h&2048&&tA(r.alternate,r);break;case 24:Oc(o,r),h&2048&&aA(r.alternate,r);break;default:Oc(o,r)}i=i.sibling}}var Dc=8192;function js(a){if(a.subtreeFlags&Dc)for(a=a.child;a!==null;)d_(a),a=a.sibling}function d_(a){switch(a.tag){case 26:js(a),a.flags&Dc&&a.memoizedState!==null&&ry(Ei,a.memoizedState,a.memoizedProps);break;case 5:js(a);break;case 3:case 4:var i=Ei;Ei=Hd(a.stateNode.containerInfo),js(a),Ei=i;break;case 22:a.memoizedState===null&&(i=a.alternate,i!==null&&i.memoizedState!==null?(i=Dc,Dc=16777216,js(a),Dc=i):js(a));break;default:js(a)}}function f_(a){var i=a.alternate;if(i!==null&&(a=i.child,a!==null)){i.child=null;do i=a.sibling,a.sibling=null,a=i;while(a!==null)}}function yc(a){var i=a.deletions;if((a.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var r=i[o];ya=r,E_(r,a)}f_(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)h_(a),a=a.sibling}function h_(a){switch(a.tag){case 0:case 11:case 15:yc(a),a.flags&2048&&Ml(9,a,a.return);break;case 3:yc(a);break;case 12:yc(a);break;case 22:var i=a.stateNode;a.memoizedState!==null&&i._visibility&2&&(a.return===null||a.return.tag!==13)?(i._visibility&=-3,_d(a)):yc(a);break;default:yc(a)}}function _d(a){var i=a.deletions;if((a.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var r=i[o];ya=r,E_(r,a)}f_(a)}for(a=a.child;a!==null;){switch(i=a,i.tag){case 0:case 11:case 15:Ml(8,i,i.return),_d(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,_d(i));break;default:_d(i)}a=a.sibling}}function E_(a,i){for(;ya!==null;){var o=ya;switch(o.tag){case 0:case 11:case 15:Ml(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var r=o.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:dc(o.memoizedState.cache)}if(r=o.child,r!==null)r.return=o,ya=r;else e:for(o=a;ya!==null;){r=ya;var h=r.sibling,m=r.return;if(l_(r),r===o){ya=null;break e}if(h!==null){h.return=m,ya=h;break e}ya=m}}}var ND={getCacheForType:function(a){var i=Qa(_a),o=i.data.get(a);return o===void 0&&(o=a(),i.data.set(a,o)),o}},CD=typeof WeakMap=="function"?WeakMap:Map,gt=0,xt=null,et=null,rt=0,_t=0,xn=null,xl=!1,Ys=!1,nA=!1,il=0,Jt=0,Ul=0,xo=0,iA=0,ai=0,Ks=0,vc=null,_n=null,lA=!1,oA=0,pd=1/0,Id=null,kl=null,Fa=0,Pl=null,Vs=null,Ws=0,sA=0,rA=null,A_=null,Mc=0,cA=null;function Un(){if((gt&2)!==0&&rt!==0)return rt&-rt;if(w.T!==null){var a=xs;return a!==0?a:mA()}return MT()}function m_(){ai===0&&(ai=(rt&536870912)===0||ht?OT():536870912);var a=ti.current;return a!==null&&(a.flags|=32),ai}function kn(a,i,o){(a===xt&&(_t===2||_t===9)||a.cancelPendingCommit!==null)&&(qs(a,0),Gl(a,rt,ai,!1)),Xr(a,o),((gt&2)===0||a!==xt)&&(a===xt&&((gt&2)===0&&(xo|=o),Jt===4&&Gl(a,rt,ai,!1)),Li(a))}function R_(a,i,o){if((gt&6)!==0)throw Error(l(327));var r=!o&&(i&124)===0&&(i&a.expiredLanes)===0||qr(a,i),h=r?DD(a,i):fA(a,i,!0),m=r;do{if(h===0){Ys&&!r&&Gl(a,i,0,!1);break}else{if(o=a.current.alternate,m&&!bD(o)){h=fA(a,i,!1),m=!1;continue}if(h===2){if(m=i,a.errorRecoveryDisabledLanes&m)var _=0;else _=a.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;e:{var N=a;h=vc;var k=N.current.memoizedState.isDehydrated;if(k&&(qs(N,_).flags|=256),_=fA(N,_,!1),_!==2){if(nA&&!k){N.errorRecoveryDisabledLanes|=m,xo|=m,h=4;break e}m=_n,_n=h,m!==null&&(_n===null?_n=m:_n.push.apply(_n,m))}h=_}if(m=!1,h!==2)continue}}if(h===1){qs(a,0),Gl(a,i,0,!0);break}e:{switch(r=a,m=h,m){case 0:case 1:throw Error(l(345));case 4:if((i&4194048)!==i)break;case 6:Gl(r,i,ai,!xl);break e;case 2:_n=null;break;case 3:case 5:break;default:throw Error(l(329))}if((i&62914560)===i&&(h=oA+300-it(),10<h)){if(Gl(r,i,ai,!xl),xu(r,0,!0)!==0)break e;r.timeoutHandle=V_(T_.bind(null,r,o,_n,Id,lA,i,ai,xo,Ks,xl,m,2,-0,0),h);break e}T_(r,o,_n,Id,lA,i,ai,xo,Ks,xl,m,0,-0,0)}}break}while(!0);Li(a)}function T_(a,i,o,r,h,m,_,N,k,Q,fe,Re,ae,ne){if(a.timeoutHandle=-1,Re=i.subtreeFlags,(Re&8192||(Re&16785408)===16785408)&&(Gc={stylesheets:null,count:0,unsuspend:sy},d_(i),Re=cy(),Re!==null)){a.cancelPendingCommit=Re(C_.bind(null,a,i,m,o,r,h,_,N,k,fe,1,ae,ne)),Gl(a,m,_,!Q);return}C_(a,i,m,o,r,h,_,N,k)}function bD(a){for(var i=a;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var r=0;r<o.length;r++){var h=o[r],m=h.getSnapshot;h=h.value;try{if(!vn(m(),h))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===a)break;for(;i.sibling===null;){if(i.return===null||i.return===a)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Gl(a,i,o,r){i&=~iA,i&=~xo,a.suspendedLanes|=i,a.pingedLanes&=~i,r&&(a.warmLanes|=i),r=a.expirationTimes;for(var h=i;0<h;){var m=31-yn(h),_=1<<m;r[m]=-1,h&=~_}o!==0&&yT(a,o,i)}function Nd(){return(gt&6)===0?(Lc(0),!1):!0}function uA(){if(et!==null){if(_t===0)var a=et.return;else a=et,Zi=Do=null,OE(a),Bs=null,pc=0,a=et;for(;a!==null;)Qg(a.alternate,a),a=a.return;et=null}}function qs(a,i){var o=a.timeoutHandle;o!==-1&&(a.timeoutHandle=-1,YD(o)),o=a.cancelPendingCommit,o!==null&&(a.cancelPendingCommit=null,o()),uA(),xt=a,et=o=Wi(a.current,null),rt=i,_t=0,xn=null,xl=!1,Ys=qr(a,i),nA=!1,Ks=ai=iA=xo=Ul=Jt=0,_n=vc=null,lA=!1,(i&8)!==0&&(i|=i&32);var r=a.entangledLanes;if(r!==0)for(a=a.entanglements,r&=i;0<r;){var h=31-yn(r),m=1<<h;i|=a[h],r&=~m}return il=i,Vu(),o}function S_(a,i){qe=null,w.H=dd,i===hc||i===td?(i=kS(),_t=3):i===HS?(i=kS(),_t=4):_t=i===Pg?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,xn=i,et===null&&(Jt=1,md(a,Qn(i,a.current)))}function g_(){var a=w.H;return w.H=dd,a===null?dd:a}function __(){var a=w.A;return w.A=ND,a}function dA(){Jt=4,xl||(rt&4194048)!==rt&&ti.current!==null||(Ys=!0),(Ul&134217727)===0&&(xo&134217727)===0||xt===null||Gl(xt,rt,ai,!1)}function fA(a,i,o){var r=gt;gt|=2;var h=g_(),m=__();(xt!==a||rt!==i)&&(Id=null,qs(a,i)),i=!1;var _=Jt;e:do try{if(_t!==0&&et!==null){var N=et,k=xn;switch(_t){case 8:uA(),_=6;break e;case 3:case 2:case 9:case 6:ti.current===null&&(i=!0);var Q=_t;if(_t=0,xn=null,Xs(a,N,k,Q),o&&Ys){_=0;break e}break;default:Q=_t,_t=0,xn=null,Xs(a,N,k,Q)}}OD(),_=Jt;break}catch(fe){S_(a,fe)}while(!0);return i&&a.shellSuspendCounter++,Zi=Do=null,gt=r,w.H=h,w.A=m,et===null&&(xt=null,rt=0,Vu()),_}function OD(){for(;et!==null;)p_(et)}function DD(a,i){var o=gt;gt|=2;var r=g_(),h=__();xt!==a||rt!==i?(Id=null,pd=it()+500,qs(a,i)):Ys=qr(a,i);e:do try{if(_t!==0&&et!==null){i=et;var m=xn;t:switch(_t){case 1:_t=0,xn=null,Xs(a,i,m,1);break;case 2:case 9:if(xS(m)){_t=0,xn=null,I_(i);break}i=function(){_t!==2&&_t!==9||xt!==a||(_t=7),Li(a)},m.then(i,i);break e;case 3:_t=7;break e;case 4:_t=5;break e;case 7:xS(m)?(_t=0,xn=null,I_(i)):(_t=0,xn=null,Xs(a,i,m,7));break;case 5:var _=null;switch(et.tag){case 26:_=et.memoizedState;case 5:case 27:var N=et;if(!_||ip(_)){_t=0,xn=null;var k=N.sibling;if(k!==null)et=k;else{var Q=N.return;Q!==null?(et=Q,Cd(Q)):et=null}break t}}_t=0,xn=null,Xs(a,i,m,5);break;case 6:_t=0,xn=null,Xs(a,i,m,6);break;case 8:uA(),Jt=6;break e;default:throw Error(l(462))}}yD();break}catch(fe){S_(a,fe)}while(!0);return Zi=Do=null,w.H=r,w.A=h,gt=o,et!==null?0:(xt=null,rt=0,Vu(),Jt)}function yD(){for(;et!==null&&!nt();)p_(et)}function p_(a){var i=Xg(a.alternate,a,il);a.memoizedProps=a.pendingProps,i===null?Cd(a):et=i}function I_(a){var i=a,o=i.alternate;switch(i.tag){case 15:case 0:i=jg(o,i,i.pendingProps,i.type,void 0,rt);break;case 11:i=jg(o,i,i.pendingProps,i.type.render,i.ref,rt);break;case 5:OE(i);default:Qg(o,i),i=et=NS(i,il),i=Xg(o,i,il)}a.memoizedProps=a.pendingProps,i===null?Cd(a):et=i}function Xs(a,i,o,r){Zi=Do=null,OE(i),Bs=null,pc=0;var h=i.return;try{if(TD(a,h,i,o,rt)){Jt=1,md(a,Qn(o,a.current)),et=null;return}}catch(m){if(h!==null)throw et=h,m;Jt=1,md(a,Qn(o,a.current)),et=null;return}i.flags&32768?(ht||r===1?a=!0:Ys||(rt&536870912)!==0?a=!1:(xl=a=!0,(r===2||r===9||r===3||r===6)&&(r=ti.current,r!==null&&r.tag===13&&(r.flags|=16384))),N_(i,a)):Cd(i)}function Cd(a){var i=a;do{if((i.flags&32768)!==0){N_(i,xl);return}a=i.return;var o=gD(i.alternate,i,il);if(o!==null){et=o;return}if(i=i.sibling,i!==null){et=i;return}et=i=a}while(i!==null);Jt===0&&(Jt=5)}function N_(a,i){do{var o=_D(a.alternate,a);if(o!==null){o.flags&=32767,et=o;return}if(o=a.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(a=a.sibling,a!==null)){et=a;return}et=a=o}while(a!==null);Jt=6,et=null}function C_(a,i,o,r,h,m,_,N,k){a.cancelPendingCommit=null;do bd();while(Fa!==0);if((gt&6)!==0)throw Error(l(327));if(i!==null){if(i===a.current)throw Error(l(177));if(m=i.lanes|i.childLanes,m|=aE,sO(a,o,m,_,N,k),a===xt&&(et=xt=null,rt=0),Vs=i,Pl=a,Ws=o,sA=m,rA=h,A_=r,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,HD(Qt,function(){return v_(),null})):(a.callbackNode=null,a.callbackPriority=0),r=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||r){r=w.T,w.T=null,h=L.p,L.p=2,_=gt,gt|=4;try{pD(a,i,o)}finally{gt=_,L.p=h,w.T=r}}Fa=1,b_(),O_(),D_()}}function b_(){if(Fa===1){Fa=0;var a=Pl,i=Vs,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=w.T,w.T=null;var r=L.p;L.p=2;var h=gt;gt|=4;try{r_(i,a);var m=NA,_=ES(a.containerInfo),N=m.focusedElem,k=m.selectionRange;if(_!==N&&N&&N.ownerDocument&&hS(N.ownerDocument.documentElement,N)){if(k!==null&&Qh(N)){var Q=k.start,fe=k.end;if(fe===void 0&&(fe=Q),"selectionStart"in N)N.selectionStart=Q,N.selectionEnd=Math.min(fe,N.value.length);else{var Re=N.ownerDocument||document,ae=Re&&Re.defaultView||window;if(ae.getSelection){var ne=ae.getSelection(),Ge=N.textContent.length,Ue=Math.min(k.start,Ge),bt=k.end===void 0?Ue:Math.min(k.end,Ge);!ne.extend&&Ue>bt&&(_=bt,bt=Ue,Ue=_);var V=fS(N,Ue),z=fS(N,bt);if(V&&z&&(ne.rangeCount!==1||ne.anchorNode!==V.node||ne.anchorOffset!==V.offset||ne.focusNode!==z.node||ne.focusOffset!==z.offset)){var q=Re.createRange();q.setStart(V.node,V.offset),ne.removeAllRanges(),Ue>bt?(ne.addRange(q),ne.extend(z.node,z.offset)):(q.setEnd(z.node,z.offset),ne.addRange(q))}}}}for(Re=[],ne=N;ne=ne.parentNode;)ne.nodeType===1&&Re.push({element:ne,left:ne.scrollLeft,top:ne.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<Re.length;N++){var Ee=Re[N];Ee.element.scrollLeft=Ee.left,Ee.element.scrollTop=Ee.top}}Gd=!!IA,NA=IA=null}finally{gt=h,L.p=r,w.T=o}}a.current=i,Fa=2}}function O_(){if(Fa===2){Fa=0;var a=Pl,i=Vs,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=w.T,w.T=null;var r=L.p;L.p=2;var h=gt;gt|=4;try{i_(a,i.alternate,i)}finally{gt=h,L.p=r,w.T=o}}Fa=3}}function D_(){if(Fa===4||Fa===3){Fa=0,yt();var a=Pl,i=Vs,o=Ws,r=A_;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Fa=5:(Fa=0,Vs=Pl=null,y_(a,a.pendingLanes));var h=a.pendingLanes;if(h===0&&(kl=null),vh(o),i=i.stateNode,Dn&&typeof Dn.onCommitFiberRoot=="function")try{Dn.onCommitFiberRoot(Wr,i,void 0,(i.current.flags&128)===128)}catch{}if(r!==null){i=w.T,h=L.p,L.p=2,w.T=null;try{for(var m=a.onRecoverableError,_=0;_<r.length;_++){var N=r[_];m(N.value,{componentStack:N.stack})}}finally{w.T=i,L.p=h}}(Ws&3)!==0&&bd(),Li(a),h=a.pendingLanes,(o&4194090)!==0&&(h&42)!==0?a===cA?Mc++:(Mc=0,cA=a):Mc=0,Lc(0)}}function y_(a,i){(a.pooledCacheLanes&=i)===0&&(i=a.pooledCache,i!=null&&(a.pooledCache=null,dc(i)))}function bd(a){return b_(),O_(),D_(),v_()}function v_(){if(Fa!==5)return!1;var a=Pl,i=sA;sA=0;var o=vh(Ws),r=w.T,h=L.p;try{L.p=32>o?32:o,w.T=null,o=rA,rA=null;var m=Pl,_=Ws;if(Fa=0,Vs=Pl=null,Ws=0,(gt&6)!==0)throw Error(l(331));var N=gt;if(gt|=4,h_(m.current),u_(m,m.current,_,o),gt=N,Lc(0,!1),Dn&&typeof Dn.onPostCommitFiberRoot=="function")try{Dn.onPostCommitFiberRoot(Wr,m)}catch{}return!0}finally{L.p=h,w.T=r,y_(a,i)}}function M_(a,i,o){i=Qn(o,i),i=FE(a.stateNode,i,2),a=Ol(a,i,2),a!==null&&(Xr(a,2),Li(a))}function vt(a,i,o){if(a.tag===3)M_(a,a,o);else for(;i!==null;){if(i.tag===3){M_(i,a,o);break}else if(i.tag===1){var r=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(kl===null||!kl.has(r))){a=Qn(o,a),o=Ug(2),r=Ol(i,o,2),r!==null&&(kg(o,r,i,a),Xr(r,2),Li(r));break}}i=i.return}}function hA(a,i,o){var r=a.pingCache;if(r===null){r=a.pingCache=new CD;var h=new Set;r.set(i,h)}else h=r.get(i),h===void 0&&(h=new Set,r.set(i,h));h.has(o)||(nA=!0,h.add(o),a=vD.bind(null,a,i,o),i.then(a,a))}function vD(a,i,o){var r=a.pingCache;r!==null&&r.delete(i),a.pingedLanes|=a.suspendedLanes&o,a.warmLanes&=~o,xt===a&&(rt&o)===o&&(Jt===4||Jt===3&&(rt&62914560)===rt&&300>it()-oA?(gt&2)===0&&qs(a,0):iA|=o,Ks===rt&&(Ks=0)),Li(a)}function L_(a,i){i===0&&(i=DT()),a=vs(a,i),a!==null&&(Xr(a,i),Li(a))}function MD(a){var i=a.memoizedState,o=0;i!==null&&(o=i.retryLane),L_(a,o)}function LD(a,i){var o=0;switch(a.tag){case 13:var r=a.stateNode,h=a.memoizedState;h!==null&&(o=h.retryLane);break;case 19:r=a.stateNode;break;case 22:r=a.stateNode._retryCache;break;default:throw Error(l(314))}r!==null&&r.delete(i),L_(a,o)}function HD(a,i){return Ie(a,i)}var Od=null,Zs=null,EA=!1,Dd=!1,AA=!1,Uo=0;function Li(a){a!==Zs&&a.next===null&&(Zs===null?Od=Zs=a:Zs=Zs.next=a),Dd=!0,EA||(EA=!0,UD())}function Lc(a,i){if(!AA&&Dd){AA=!0;do for(var o=!1,r=Od;r!==null;){if(a!==0){var h=r.pendingLanes;if(h===0)var m=0;else{var _=r.suspendedLanes,N=r.pingedLanes;m=(1<<31-yn(42|a)+1)-1,m&=h&~(_&~N),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,k_(r,m))}else m=rt,m=xu(r,r===xt?m:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),(m&3)===0||qr(r,m)||(o=!0,k_(r,m));r=r.next}while(o);AA=!1}}function xD(){H_()}function H_(){Dd=EA=!1;var a=0;Uo!==0&&(jD()&&(a=Uo),Uo=0);for(var i=it(),o=null,r=Od;r!==null;){var h=r.next,m=x_(r,i);m===0?(r.next=null,o===null?Od=h:o.next=h,h===null&&(Zs=o)):(o=r,(a!==0||(m&3)!==0)&&(Dd=!0)),r=h}Lc(a)}function x_(a,i){for(var o=a.suspendedLanes,r=a.pingedLanes,h=a.expirationTimes,m=a.pendingLanes&-62914561;0<m;){var _=31-yn(m),N=1<<_,k=h[_];k===-1?((N&o)===0||(N&r)!==0)&&(h[_]=oO(N,i)):k<=i&&(a.expiredLanes|=N),m&=~N}if(i=xt,o=rt,o=xu(a,a===i?o:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),r=a.callbackNode,o===0||a===i&&(_t===2||_t===9)||a.cancelPendingCommit!==null)return r!==null&&r!==null&&xe(r),a.callbackNode=null,a.callbackPriority=0;if((o&3)===0||qr(a,o)){if(i=o&-o,i===a.callbackPriority)return i;switch(r!==null&&xe(r),vh(o)){case 2:case 8:o=St;break;case 32:o=Qt;break;case 268435456:o=As;break;default:o=Qt}return r=U_.bind(null,a),o=Ie(o,r),a.callbackPriority=i,a.callbackNode=o,i}return r!==null&&r!==null&&xe(r),a.callbackPriority=2,a.callbackNode=null,2}function U_(a,i){if(Fa!==0&&Fa!==5)return a.callbackNode=null,a.callbackPriority=0,null;var o=a.callbackNode;if(bd()&&a.callbackNode!==o)return null;var r=rt;return r=xu(a,a===xt?r:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),r===0?null:(R_(a,r,i),x_(a,it()),a.callbackNode!=null&&a.callbackNode===o?U_.bind(null,a):null)}function k_(a,i){if(bd())return null;R_(a,i,!0)}function UD(){KD(function(){(gt&6)!==0?Ie(Tt,xD):H_()})}function mA(){return Uo===0&&(Uo=OT()),Uo}function P_(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:wu(""+a)}function G_(a,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,a.id&&o.setAttribute("form",a.id),i.parentNode.insertBefore(o,i),a=new FormData(a),o.parentNode.removeChild(o),a}function kD(a,i,o,r,h){if(i==="submit"&&o&&o.stateNode===h){var m=P_((h[Rn]||null).action),_=r.submitter;_&&(i=(i=_[Rn]||null)?P_(i.formAction):_.getAttribute("formAction"),i!==null&&(m=i,_=null));var N=new ju("action","action",null,r,h);a.push({event:N,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(Uo!==0){var k=_?G_(h,_):new FormData(h);kE(o,{pending:!0,data:k,method:h.method,action:m},null,k)}}else typeof m=="function"&&(N.preventDefault(),k=_?G_(h,_):new FormData(h),kE(o,{pending:!0,data:k,method:h.method,action:m},m,k))},currentTarget:h}]})}}for(var RA=0;RA<tE.length;RA++){var TA=tE[RA],PD=TA.toLowerCase(),GD=TA[0].toUpperCase()+TA.slice(1);hi(PD,"on"+GD)}hi(RS,"onAnimationEnd"),hi(TS,"onAnimationIteration"),hi(SS,"onAnimationStart"),hi("dblclick","onDoubleClick"),hi("focusin","onFocus"),hi("focusout","onBlur"),hi(tD,"onTransitionRun"),hi(aD,"onTransitionStart"),hi(nD,"onTransitionCancel"),hi(gS,"onTransitionEnd"),gs("onMouseEnter",["mouseout","mouseover"]),gs("onMouseLeave",["mouseout","mouseover"]),gs("onPointerEnter",["pointerout","pointerover"]),gs("onPointerLeave",["pointerout","pointerover"]),So("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),So("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),So("onBeforeInput",["compositionend","keypress","textInput","paste"]),So("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),So("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),So("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wD=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Hc));function w_(a,i){i=(i&4)!==0;for(var o=0;o<a.length;o++){var r=a[o],h=r.event;r=r.listeners;e:{var m=void 0;if(i)for(var _=r.length-1;0<=_;_--){var N=r[_],k=N.instance,Q=N.currentTarget;if(N=N.listener,k!==m&&h.isPropagationStopped())break e;m=N,h.currentTarget=Q;try{m(h)}catch(fe){Ad(fe)}h.currentTarget=null,m=k}else for(_=0;_<r.length;_++){if(N=r[_],k=N.instance,Q=N.currentTarget,N=N.listener,k!==m&&h.isPropagationStopped())break e;m=N,h.currentTarget=Q;try{m(h)}catch(fe){Ad(fe)}h.currentTarget=null,m=k}}}}function tt(a,i){var o=i[Mh];o===void 0&&(o=i[Mh]=new Set);var r=a+"__bubble";o.has(r)||(B_(i,a,2,!1),o.add(r))}function SA(a,i,o){var r=0;i&&(r|=4),B_(o,a,r,i)}var yd="_reactListening"+Math.random().toString(36).slice(2);function gA(a){if(!a[yd]){a[yd]=!0,HT.forEach(function(o){o!=="selectionchange"&&(wD.has(o)||SA(o,!1,a),SA(o,!0,a))});var i=a.nodeType===9?a:a.ownerDocument;i===null||i[yd]||(i[yd]=!0,SA("selectionchange",!1,i))}}function B_(a,i,o,r){switch(up(i)){case 2:var h=fy;break;case 8:h=hy;break;default:h=xA}o=h.bind(null,i,o,a),h=void 0,!zh||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),r?h!==void 0?a.addEventListener(i,o,{capture:!0,passive:h}):a.addEventListener(i,o,!0):h!==void 0?a.addEventListener(i,o,{passive:h}):a.addEventListener(i,o,!1)}function _A(a,i,o,r,h){var m=r;if((i&1)===0&&(i&2)===0&&r!==null)e:for(;;){if(r===null)return;var _=r.tag;if(_===3||_===4){var N=r.stateNode.containerInfo;if(N===h)break;if(_===4)for(_=r.return;_!==null;){var k=_.tag;if((k===3||k===4)&&_.stateNode.containerInfo===h)return;_=_.return}for(;N!==null;){if(_=Rs(N),_===null)return;if(k=_.tag,k===5||k===6||k===26||k===27){r=m=_;continue e}N=N.parentNode}}r=r.return}WT(function(){var Q=m,fe=Bh(o),Re=[];e:{var ae=_S.get(a);if(ae!==void 0){var ne=ju,Ge=a;switch(a){case"keypress":if(Fu(o)===0)break e;case"keydown":case"keyup":ne=HO;break;case"focusin":Ge="focus",ne=Vh;break;case"focusout":Ge="blur",ne=Vh;break;case"beforeblur":case"afterblur":ne=Vh;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=ZT;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=_O;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=kO;break;case RS:case TS:case SS:ne=NO;break;case gS:ne=GO;break;case"scroll":case"scrollend":ne=SO;break;case"wheel":ne=BO;break;case"copy":case"cut":case"paste":ne=bO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=$T;break;case"toggle":case"beforetoggle":ne=zO}var Ue=(i&4)!==0,bt=!Ue&&(a==="scroll"||a==="scrollend"),V=Ue?ae!==null?ae+"Capture":null:ae;Ue=[];for(var z=Q,q;z!==null;){var Ee=z;if(q=Ee.stateNode,Ee=Ee.tag,Ee!==5&&Ee!==26&&Ee!==27||q===null||V===null||(Ee=$r(z,V),Ee!=null&&Ue.push(xc(z,Ee,q))),bt)break;z=z.return}0<Ue.length&&(ae=new ne(ae,Ge,null,o,fe),Re.push({event:ae,listeners:Ue}))}}if((i&7)===0){e:{if(ae=a==="mouseover"||a==="pointerover",ne=a==="mouseout"||a==="pointerout",ae&&o!==wh&&(Ge=o.relatedTarget||o.fromElement)&&(Rs(Ge)||Ge[ms]))break e;if((ne||ae)&&(ae=fe.window===fe?fe:(ae=fe.ownerDocument)?ae.defaultView||ae.parentWindow:window,ne?(Ge=o.relatedTarget||o.toElement,ne=Q,Ge=Ge?Rs(Ge):null,Ge!==null&&(bt=c(Ge),Ue=Ge.tag,Ge!==bt||Ue!==5&&Ue!==27&&Ue!==6)&&(Ge=null)):(ne=null,Ge=Q),ne!==Ge)){if(Ue=ZT,Ee="onMouseLeave",V="onMouseEnter",z="mouse",(a==="pointerout"||a==="pointerover")&&(Ue=$T,Ee="onPointerLeave",V="onPointerEnter",z="pointer"),bt=ne==null?ae:Qr(ne),q=Ge==null?ae:Qr(Ge),ae=new Ue(Ee,z+"leave",ne,o,fe),ae.target=bt,ae.relatedTarget=q,Ee=null,Rs(fe)===Q&&(Ue=new Ue(V,z+"enter",Ge,o,fe),Ue.target=q,Ue.relatedTarget=bt,Ee=Ue),bt=Ee,ne&&Ge)t:{for(Ue=ne,V=Ge,z=0,q=Ue;q;q=Qs(q))z++;for(q=0,Ee=V;Ee;Ee=Qs(Ee))q++;for(;0<z-q;)Ue=Qs(Ue),z--;for(;0<q-z;)V=Qs(V),q--;for(;z--;){if(Ue===V||V!==null&&Ue===V.alternate)break t;Ue=Qs(Ue),V=Qs(V)}Ue=null}else Ue=null;ne!==null&&F_(Re,ae,ne,Ue,!1),Ge!==null&&bt!==null&&F_(Re,bt,Ge,Ue,!0)}}e:{if(ae=Q?Qr(Q):window,ne=ae.nodeName&&ae.nodeName.toLowerCase(),ne==="select"||ne==="input"&&ae.type==="file")var ve=oS;else if(iS(ae))if(sS)ve=$O;else{ve=ZO;var Ze=XO}else ne=ae.nodeName,!ne||ne.toLowerCase()!=="input"||ae.type!=="checkbox"&&ae.type!=="radio"?Q&&Gh(Q.elementType)&&(ve=oS):ve=QO;if(ve&&(ve=ve(a,Q))){lS(Re,ve,o,fe);break e}Ze&&Ze(a,ae,Q),a==="focusout"&&Q&&ae.type==="number"&&Q.memoizedProps.value!=null&&Ph(ae,"number",ae.value)}switch(Ze=Q?Qr(Q):window,a){case"focusin":(iS(Ze)||Ze.contentEditable==="true")&&(Os=Ze,$h=Q,oc=null);break;case"focusout":oc=$h=Os=null;break;case"mousedown":Jh=!0;break;case"contextmenu":case"mouseup":case"dragend":Jh=!1,AS(Re,o,fe);break;case"selectionchange":if(eD)break;case"keydown":case"keyup":AS(Re,o,fe)}var He;if(qh)e:{switch(a){case"compositionstart":var ke="onCompositionStart";break e;case"compositionend":ke="onCompositionEnd";break e;case"compositionupdate":ke="onCompositionUpdate";break e}ke=void 0}else bs?aS(a,o)&&(ke="onCompositionEnd"):a==="keydown"&&o.keyCode===229&&(ke="onCompositionStart");ke&&(JT&&o.locale!=="ko"&&(bs||ke!=="onCompositionStart"?ke==="onCompositionEnd"&&bs&&(He=qT()):(Il=fe,jh="value"in Il?Il.value:Il.textContent,bs=!0)),Ze=vd(Q,ke),0<Ze.length&&(ke=new QT(ke,a,null,o,fe),Re.push({event:ke,listeners:Ze}),He?ke.data=He:(He=nS(o),He!==null&&(ke.data=He)))),(He=YO?KO(a,o):VO(a,o))&&(ke=vd(Q,"onBeforeInput"),0<ke.length&&(Ze=new QT("onBeforeInput","beforeinput",null,o,fe),Re.push({event:Ze,listeners:ke}),Ze.data=He)),kD(Re,a,Q,o,fe)}w_(Re,i)})}function xc(a,i,o){return{instance:a,listener:i,currentTarget:o}}function vd(a,i){for(var o=i+"Capture",r=[];a!==null;){var h=a,m=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||m===null||(h=$r(a,o),h!=null&&r.unshift(xc(a,h,m)),h=$r(a,i),h!=null&&r.push(xc(a,h,m))),a.tag===3)return r;a=a.return}return[]}function Qs(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function F_(a,i,o,r,h){for(var m=i._reactName,_=[];o!==null&&o!==r;){var N=o,k=N.alternate,Q=N.stateNode;if(N=N.tag,k!==null&&k===r)break;N!==5&&N!==26&&N!==27||Q===null||(k=Q,h?(Q=$r(o,m),Q!=null&&_.unshift(xc(o,Q,k))):h||(Q=$r(o,m),Q!=null&&_.push(xc(o,Q,k)))),o=o.return}_.length!==0&&a.push({event:i,listeners:_})}var BD=/\r\n?/g,FD=/\u0000|\uFFFD/g;function z_(a){return(typeof a=="string"?a:""+a).replace(BD,`
`).replace(FD,"")}function j_(a,i){return i=z_(i),z_(a)===i}function Md(){}function Ct(a,i,o,r,h,m){switch(o){case"children":typeof r=="string"?i==="body"||i==="textarea"&&r===""||Is(a,r):(typeof r=="number"||typeof r=="bigint")&&i!=="body"&&Is(a,""+r);break;case"className":ku(a,"class",r);break;case"tabIndex":ku(a,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":ku(a,o,r);break;case"style":KT(a,r,m);break;case"data":if(i!=="object"){ku(a,"data",r);break}case"src":case"href":if(r===""&&(i!=="a"||o!=="href")){a.removeAttribute(o);break}if(r==null||typeof r=="function"||typeof r=="symbol"||typeof r=="boolean"){a.removeAttribute(o);break}r=wu(""+r),a.setAttribute(o,r);break;case"action":case"formAction":if(typeof r=="function"){a.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(i!=="input"&&Ct(a,i,"name",h.name,h,null),Ct(a,i,"formEncType",h.formEncType,h,null),Ct(a,i,"formMethod",h.formMethod,h,null),Ct(a,i,"formTarget",h.formTarget,h,null)):(Ct(a,i,"encType",h.encType,h,null),Ct(a,i,"method",h.method,h,null),Ct(a,i,"target",h.target,h,null)));if(r==null||typeof r=="symbol"||typeof r=="boolean"){a.removeAttribute(o);break}r=wu(""+r),a.setAttribute(o,r);break;case"onClick":r!=null&&(a.onclick=Md);break;case"onScroll":r!=null&&tt("scroll",a);break;case"onScrollEnd":r!=null&&tt("scrollend",a);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(l(61));if(o=r.__html,o!=null){if(h.children!=null)throw Error(l(60));a.innerHTML=o}}break;case"multiple":a.multiple=r&&typeof r!="function"&&typeof r!="symbol";break;case"muted":a.muted=r&&typeof r!="function"&&typeof r!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(r==null||typeof r=="function"||typeof r=="boolean"||typeof r=="symbol"){a.removeAttribute("xlink:href");break}o=wu(""+r),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":r!=null&&typeof r!="function"&&typeof r!="symbol"?a.setAttribute(o,""+r):a.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&typeof r!="function"&&typeof r!="symbol"?a.setAttribute(o,""):a.removeAttribute(o);break;case"capture":case"download":r===!0?a.setAttribute(o,""):r!==!1&&r!=null&&typeof r!="function"&&typeof r!="symbol"?a.setAttribute(o,r):a.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":r!=null&&typeof r!="function"&&typeof r!="symbol"&&!isNaN(r)&&1<=r?a.setAttribute(o,r):a.removeAttribute(o);break;case"rowSpan":case"start":r==null||typeof r=="function"||typeof r=="symbol"||isNaN(r)?a.removeAttribute(o):a.setAttribute(o,r);break;case"popover":tt("beforetoggle",a),tt("toggle",a),Uu(a,"popover",r);break;case"xlinkActuate":Ki(a,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":Ki(a,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":Ki(a,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":Ki(a,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":Ki(a,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":Ki(a,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":Ki(a,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":Ki(a,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":Ki(a,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":Uu(a,"is",r);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=RO.get(o)||o,Uu(a,o,r))}}function pA(a,i,o,r,h,m){switch(o){case"style":KT(a,r,m);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(l(61));if(o=r.__html,o!=null){if(h.children!=null)throw Error(l(60));a.innerHTML=o}}break;case"children":typeof r=="string"?Is(a,r):(typeof r=="number"||typeof r=="bigint")&&Is(a,""+r);break;case"onScroll":r!=null&&tt("scroll",a);break;case"onScrollEnd":r!=null&&tt("scrollend",a);break;case"onClick":r!=null&&(a.onclick=Md);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!xT.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(h=o.endsWith("Capture"),i=o.slice(2,h?o.length-7:void 0),m=a[Rn]||null,m=m!=null?m[o]:null,typeof m=="function"&&a.removeEventListener(i,m,h),typeof r=="function")){typeof m!="function"&&m!==null&&(o in a?a[o]=null:a.hasAttribute(o)&&a.removeAttribute(o)),a.addEventListener(i,r,h);break e}o in a?a[o]=r:r===!0?a.setAttribute(o,""):Uu(a,o,r)}}}function za(a,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":tt("error",a),tt("load",a);var r=!1,h=!1,m;for(m in o)if(o.hasOwnProperty(m)){var _=o[m];if(_!=null)switch(m){case"src":r=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(l(137,i));default:Ct(a,i,m,_,o,null)}}h&&Ct(a,i,"srcSet",o.srcSet,o,null),r&&Ct(a,i,"src",o.src,o,null);return;case"input":tt("invalid",a);var N=m=_=h=null,k=null,Q=null;for(r in o)if(o.hasOwnProperty(r)){var fe=o[r];if(fe!=null)switch(r){case"name":h=fe;break;case"type":_=fe;break;case"checked":k=fe;break;case"defaultChecked":Q=fe;break;case"value":m=fe;break;case"defaultValue":N=fe;break;case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(l(137,i));break;default:Ct(a,i,r,fe,o,null)}}FT(a,m,N,k,Q,_,h,!1),Pu(a);return;case"select":tt("invalid",a),r=_=m=null;for(h in o)if(o.hasOwnProperty(h)&&(N=o[h],N!=null))switch(h){case"value":m=N;break;case"defaultValue":_=N;break;case"multiple":r=N;default:Ct(a,i,h,N,o,null)}i=m,o=_,a.multiple=!!r,i!=null?ps(a,!!r,i,!1):o!=null&&ps(a,!!r,o,!0);return;case"textarea":tt("invalid",a),m=h=r=null;for(_ in o)if(o.hasOwnProperty(_)&&(N=o[_],N!=null))switch(_){case"value":r=N;break;case"defaultValue":h=N;break;case"children":m=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(l(91));break;default:Ct(a,i,_,N,o,null)}jT(a,r,h,m),Pu(a);return;case"option":for(k in o)if(o.hasOwnProperty(k)&&(r=o[k],r!=null))switch(k){case"selected":a.selected=r&&typeof r!="function"&&typeof r!="symbol";break;default:Ct(a,i,k,r,o,null)}return;case"dialog":tt("beforetoggle",a),tt("toggle",a),tt("cancel",a),tt("close",a);break;case"iframe":case"object":tt("load",a);break;case"video":case"audio":for(r=0;r<Hc.length;r++)tt(Hc[r],a);break;case"image":tt("error",a),tt("load",a);break;case"details":tt("toggle",a);break;case"embed":case"source":case"link":tt("error",a),tt("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in o)if(o.hasOwnProperty(Q)&&(r=o[Q],r!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(l(137,i));default:Ct(a,i,Q,r,o,null)}return;default:if(Gh(i)){for(fe in o)o.hasOwnProperty(fe)&&(r=o[fe],r!==void 0&&pA(a,i,fe,r,o,void 0));return}}for(N in o)o.hasOwnProperty(N)&&(r=o[N],r!=null&&Ct(a,i,N,r,o,null))}function zD(a,i,o,r){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,m=null,_=null,N=null,k=null,Q=null,fe=null;for(ne in o){var Re=o[ne];if(o.hasOwnProperty(ne)&&Re!=null)switch(ne){case"checked":break;case"value":break;case"defaultValue":k=Re;default:r.hasOwnProperty(ne)||Ct(a,i,ne,null,r,Re)}}for(var ae in r){var ne=r[ae];if(Re=o[ae],r.hasOwnProperty(ae)&&(ne!=null||Re!=null))switch(ae){case"type":m=ne;break;case"name":h=ne;break;case"checked":Q=ne;break;case"defaultChecked":fe=ne;break;case"value":_=ne;break;case"defaultValue":N=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(l(137,i));break;default:ne!==Re&&Ct(a,i,ae,ne,r,Re)}}kh(a,_,N,k,Q,fe,m,h);return;case"select":ne=_=N=ae=null;for(m in o)if(k=o[m],o.hasOwnProperty(m)&&k!=null)switch(m){case"value":break;case"multiple":ne=k;default:r.hasOwnProperty(m)||Ct(a,i,m,null,r,k)}for(h in r)if(m=r[h],k=o[h],r.hasOwnProperty(h)&&(m!=null||k!=null))switch(h){case"value":ae=m;break;case"defaultValue":N=m;break;case"multiple":_=m;default:m!==k&&Ct(a,i,h,m,r,k)}i=N,o=_,r=ne,ae!=null?ps(a,!!o,ae,!1):!!r!=!!o&&(i!=null?ps(a,!!o,i,!0):ps(a,!!o,o?[]:"",!1));return;case"textarea":ne=ae=null;for(N in o)if(h=o[N],o.hasOwnProperty(N)&&h!=null&&!r.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:Ct(a,i,N,null,r,h)}for(_ in r)if(h=r[_],m=o[_],r.hasOwnProperty(_)&&(h!=null||m!=null))switch(_){case"value":ae=h;break;case"defaultValue":ne=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(l(91));break;default:h!==m&&Ct(a,i,_,h,r,m)}zT(a,ae,ne);return;case"option":for(var Ge in o)if(ae=o[Ge],o.hasOwnProperty(Ge)&&ae!=null&&!r.hasOwnProperty(Ge))switch(Ge){case"selected":a.selected=!1;break;default:Ct(a,i,Ge,null,r,ae)}for(k in r)if(ae=r[k],ne=o[k],r.hasOwnProperty(k)&&ae!==ne&&(ae!=null||ne!=null))switch(k){case"selected":a.selected=ae&&typeof ae!="function"&&typeof ae!="symbol";break;default:Ct(a,i,k,ae,r,ne)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ue in o)ae=o[Ue],o.hasOwnProperty(Ue)&&ae!=null&&!r.hasOwnProperty(Ue)&&Ct(a,i,Ue,null,r,ae);for(Q in r)if(ae=r[Q],ne=o[Q],r.hasOwnProperty(Q)&&ae!==ne&&(ae!=null||ne!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(l(137,i));break;default:Ct(a,i,Q,ae,r,ne)}return;default:if(Gh(i)){for(var bt in o)ae=o[bt],o.hasOwnProperty(bt)&&ae!==void 0&&!r.hasOwnProperty(bt)&&pA(a,i,bt,void 0,r,ae);for(fe in r)ae=r[fe],ne=o[fe],!r.hasOwnProperty(fe)||ae===ne||ae===void 0&&ne===void 0||pA(a,i,fe,ae,r,ne);return}}for(var V in o)ae=o[V],o.hasOwnProperty(V)&&ae!=null&&!r.hasOwnProperty(V)&&Ct(a,i,V,null,r,ae);for(Re in r)ae=r[Re],ne=o[Re],!r.hasOwnProperty(Re)||ae===ne||ae==null&&ne==null||Ct(a,i,Re,ae,r,ne)}var IA=null,NA=null;function Ld(a){return a.nodeType===9?a:a.ownerDocument}function Y_(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function K_(a,i){if(a===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&i==="foreignObject"?0:a}function CA(a,i){return a==="textarea"||a==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var bA=null;function jD(){var a=window.event;return a&&a.type==="popstate"?a===bA?!1:(bA=a,!0):(bA=null,!1)}var V_=typeof setTimeout=="function"?setTimeout:void 0,YD=typeof clearTimeout=="function"?clearTimeout:void 0,W_=typeof Promise=="function"?Promise:void 0,KD=typeof queueMicrotask=="function"?queueMicrotask:typeof W_<"u"?function(a){return W_.resolve(null).then(a).catch(VD)}:V_;function VD(a){setTimeout(function(){throw a})}function wl(a){return a==="head"}function q_(a,i){var o=i,r=0,h=0;do{var m=o.nextSibling;if(a.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"){if(0<r&&8>r){o=r;var _=a.ownerDocument;if(o&1&&Uc(_.documentElement),o&2&&Uc(_.body),o&4)for(o=_.head,Uc(o),_=o.firstChild;_;){var N=_.nextSibling,k=_.nodeName;_[Zr]||k==="SCRIPT"||k==="STYLE"||k==="LINK"&&_.rel.toLowerCase()==="stylesheet"||o.removeChild(_),_=N}}if(h===0){a.removeChild(m),jc(i);return}h--}else o==="$"||o==="$?"||o==="$!"?h++:r=o.charCodeAt(0)-48;else r=0;o=m}while(o);jc(i)}function OA(a){var i=a.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":OA(o),Lh(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}a.removeChild(o)}}function WD(a,i,o,r){for(;a.nodeType===1;){var h=o;if(a.nodeName.toLowerCase()!==i.toLowerCase()){if(!r&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(r){if(!a[Zr])switch(i){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(m=a.getAttribute("rel"),m==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(m!==h.rel||a.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||a.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||a.getAttribute("title")!==(h.title==null?null:h.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(m=a.getAttribute("src"),(m!==(h.src==null?null:h.src)||a.getAttribute("type")!==(h.type==null?null:h.type)||a.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&m&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(i==="input"&&a.type==="hidden"){var m=h.name==null?null:""+h.name;if(h.type==="hidden"&&a.getAttribute("name")===m)return a}else return a;if(a=Ai(a.nextSibling),a===null)break}return null}function qD(a,i,o){if(i==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!o||(a=Ai(a.nextSibling),a===null))return null;return a}function DA(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function XD(a,i){var o=a.ownerDocument;if(a.data!=="$?"||o.readyState==="complete")i();else{var r=function(){i(),o.removeEventListener("DOMContentLoaded",r)};o.addEventListener("DOMContentLoaded",r),a._reactRetry=r}}function Ai(a){for(;a!=null;a=a.nextSibling){var i=a.nodeType;if(i===1||i===3)break;if(i===8){if(i=a.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return a}var yA=null;function X_(a){a=a.previousSibling;for(var i=0;a;){if(a.nodeType===8){var o=a.data;if(o==="$"||o==="$!"||o==="$?"){if(i===0)return a;i--}else o==="/$"&&i++}a=a.previousSibling}return null}function Z_(a,i,o){switch(i=Ld(o),a){case"html":if(a=i.documentElement,!a)throw Error(l(452));return a;case"head":if(a=i.head,!a)throw Error(l(453));return a;case"body":if(a=i.body,!a)throw Error(l(454));return a;default:throw Error(l(451))}}function Uc(a){for(var i=a.attributes;i.length;)a.removeAttributeNode(i[0]);Lh(a)}var ni=new Map,Q_=new Set;function Hd(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var ll=L.d;L.d={f:ZD,r:QD,D:$D,C:JD,L:ey,m:ty,X:ny,S:ay,M:iy};function ZD(){var a=ll.f(),i=Nd();return a||i}function QD(a){var i=Ts(a);i!==null&&i.tag===5&&i.type==="form"?Rg(i):ll.r(a)}var $s=typeof document>"u"?null:document;function $_(a,i,o){var r=$s;if(r&&typeof i=="string"&&i){var h=Zn(i);h='link[rel="'+a+'"][href="'+h+'"]',typeof o=="string"&&(h+='[crossorigin="'+o+'"]'),Q_.has(h)||(Q_.add(h),a={rel:a,crossOrigin:o,href:i},r.querySelector(h)===null&&(i=r.createElement("link"),za(i,"link",a),Oa(i),r.head.appendChild(i)))}}function $D(a){ll.D(a),$_("dns-prefetch",a,null)}function JD(a,i){ll.C(a,i),$_("preconnect",a,i)}function ey(a,i,o){ll.L(a,i,o);var r=$s;if(r&&a&&i){var h='link[rel="preload"][as="'+Zn(i)+'"]';i==="image"&&o&&o.imageSrcSet?(h+='[imagesrcset="'+Zn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(h+='[imagesizes="'+Zn(o.imageSizes)+'"]')):h+='[href="'+Zn(a)+'"]';var m=h;switch(i){case"style":m=Js(a);break;case"script":m=er(a)}ni.has(m)||(a=R({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:a,as:i},o),ni.set(m,a),r.querySelector(h)!==null||i==="style"&&r.querySelector(kc(m))||i==="script"&&r.querySelector(Pc(m))||(i=r.createElement("link"),za(i,"link",a),Oa(i),r.head.appendChild(i)))}}function ty(a,i){ll.m(a,i);var o=$s;if(o&&a){var r=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+Zn(r)+'"][href="'+Zn(a)+'"]',m=h;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=er(a)}if(!ni.has(m)&&(a=R({rel:"modulepreload",href:a},i),ni.set(m,a),o.querySelector(h)===null)){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Pc(m)))return}r=o.createElement("link"),za(r,"link",a),Oa(r),o.head.appendChild(r)}}}function ay(a,i,o){ll.S(a,i,o);var r=$s;if(r&&a){var h=Ss(r).hoistableStyles,m=Js(a);i=i||"default";var _=h.get(m);if(!_){var N={loading:0,preload:null};if(_=r.querySelector(kc(m)))N.loading=5;else{a=R({rel:"stylesheet",href:a,"data-precedence":i},o),(o=ni.get(m))&&vA(a,o);var k=_=r.createElement("link");Oa(k),za(k,"link",a),k._p=new Promise(function(Q,fe){k.onload=Q,k.onerror=fe}),k.addEventListener("load",function(){N.loading|=1}),k.addEventListener("error",function(){N.loading|=2}),N.loading|=4,xd(_,i,r)}_={type:"stylesheet",instance:_,count:1,state:N},h.set(m,_)}}}function ny(a,i){ll.X(a,i);var o=$s;if(o&&a){var r=Ss(o).hoistableScripts,h=er(a),m=r.get(h);m||(m=o.querySelector(Pc(h)),m||(a=R({src:a,async:!0},i),(i=ni.get(h))&&MA(a,i),m=o.createElement("script"),Oa(m),za(m,"link",a),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},r.set(h,m))}}function iy(a,i){ll.M(a,i);var o=$s;if(o&&a){var r=Ss(o).hoistableScripts,h=er(a),m=r.get(h);m||(m=o.querySelector(Pc(h)),m||(a=R({src:a,async:!0,type:"module"},i),(i=ni.get(h))&&MA(a,i),m=o.createElement("script"),Oa(m),za(m,"link",a),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},r.set(h,m))}}function J_(a,i,o,r){var h=(h=he.current)?Hd(h):null;if(!h)throw Error(l(446));switch(a){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=Js(o.href),o=Ss(h).hoistableStyles,r=o.get(i),r||(r={type:"style",instance:null,count:0,state:null},o.set(i,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){a=Js(o.href);var m=Ss(h).hoistableStyles,_=m.get(a);if(_||(h=h.ownerDocument||h,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(a,_),(m=h.querySelector(kc(a)))&&!m._p&&(_.instance=m,_.state.loading=5),ni.has(a)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},ni.set(a,o),m||ly(h,a,o,_.state))),i&&r===null)throw Error(l(528,""));return _}if(i&&r!==null)throw Error(l(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=er(o),o=Ss(h).hoistableScripts,r=o.get(i),r||(r={type:"script",instance:null,count:0,state:null},o.set(i,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(l(444,a))}}function Js(a){return'href="'+Zn(a)+'"'}function kc(a){return'link[rel="stylesheet"]['+a+"]"}function ep(a){return R({},a,{"data-precedence":a.precedence,precedence:null})}function ly(a,i,o,r){a.querySelector('link[rel="preload"][as="style"]['+i+"]")?r.loading=1:(i=a.createElement("link"),r.preload=i,i.addEventListener("load",function(){return r.loading|=1}),i.addEventListener("error",function(){return r.loading|=2}),za(i,"link",o),Oa(i),a.head.appendChild(i))}function er(a){return'[src="'+Zn(a)+'"]'}function Pc(a){return"script[async]"+a}function tp(a,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var r=a.querySelector('style[data-href~="'+Zn(o.href)+'"]');if(r)return i.instance=r,Oa(r),r;var h=R({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return r=(a.ownerDocument||a).createElement("style"),Oa(r),za(r,"style",h),xd(r,o.precedence,a),i.instance=r;case"stylesheet":h=Js(o.href);var m=a.querySelector(kc(h));if(m)return i.state.loading|=4,i.instance=m,Oa(m),m;r=ep(o),(h=ni.get(h))&&vA(r,h),m=(a.ownerDocument||a).createElement("link"),Oa(m);var _=m;return _._p=new Promise(function(N,k){_.onload=N,_.onerror=k}),za(m,"link",r),i.state.loading|=4,xd(m,o.precedence,a),i.instance=m;case"script":return m=er(o.src),(h=a.querySelector(Pc(m)))?(i.instance=h,Oa(h),h):(r=o,(h=ni.get(m))&&(r=R({},o),MA(r,h)),a=a.ownerDocument||a,h=a.createElement("script"),Oa(h),za(h,"link",r),a.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(l(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(r=i.instance,i.state.loading|=4,xd(r,o.precedence,a));return i.instance}function xd(a,i,o){for(var r=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=r.length?r[r.length-1]:null,m=h,_=0;_<r.length;_++){var N=r[_];if(N.dataset.precedence===i)m=N;else if(m!==h)break}m?m.parentNode.insertBefore(a,m.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(a,i.firstChild))}function vA(a,i){a.crossOrigin==null&&(a.crossOrigin=i.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=i.referrerPolicy),a.title==null&&(a.title=i.title)}function MA(a,i){a.crossOrigin==null&&(a.crossOrigin=i.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=i.referrerPolicy),a.integrity==null&&(a.integrity=i.integrity)}var Ud=null;function ap(a,i,o){if(Ud===null){var r=new Map,h=Ud=new Map;h.set(o,r)}else h=Ud,r=h.get(o),r||(r=new Map,h.set(o,r));if(r.has(a))return r;for(r.set(a,null),o=o.getElementsByTagName(a),h=0;h<o.length;h++){var m=o[h];if(!(m[Zr]||m[Za]||a==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var _=m.getAttribute(i)||"";_=a+_;var N=r.get(_);N?N.push(m):r.set(_,[m])}}return r}function np(a,i,o){a=a.ownerDocument||a,a.head.insertBefore(o,i==="title"?a.querySelector("head > title"):null)}function oy(a,i,o){if(o===1||i.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return a=i.disabled,typeof i.precedence=="string"&&a==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function ip(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var Gc=null;function sy(){}function ry(a,i,o){if(Gc===null)throw Error(l(475));var r=Gc;if(i.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var h=Js(o.href),m=a.querySelector(kc(h));if(m){a=m._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(r.count++,r=kd.bind(r),a.then(r,r)),i.state.loading|=4,i.instance=m,Oa(m);return}m=a.ownerDocument||a,o=ep(o),(h=ni.get(h))&&vA(o,h),m=m.createElement("link"),Oa(m);var _=m;_._p=new Promise(function(N,k){_.onload=N,_.onerror=k}),za(m,"link",o),i.instance=m}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(i,a),(a=i.state.preload)&&(i.state.loading&3)===0&&(r.count++,i=kd.bind(r),a.addEventListener("load",i),a.addEventListener("error",i))}}function cy(){if(Gc===null)throw Error(l(475));var a=Gc;return a.stylesheets&&a.count===0&&LA(a,a.stylesheets),0<a.count?function(i){var o=setTimeout(function(){if(a.stylesheets&&LA(a,a.stylesheets),a.unsuspend){var r=a.unsuspend;a.unsuspend=null,r()}},6e4);return a.unsuspend=i,function(){a.unsuspend=null,clearTimeout(o)}}:null}function kd(){if(this.count--,this.count===0){if(this.stylesheets)LA(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var Pd=null;function LA(a,i){a.stylesheets=null,a.unsuspend!==null&&(a.count++,Pd=new Map,i.forEach(uy,a),Pd=null,kd.call(a))}function uy(a,i){if(!(i.state.loading&4)){var o=Pd.get(a);if(o)var r=o.get(null);else{o=new Map,Pd.set(a,o);for(var h=a.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<h.length;m++){var _=h[m];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(o.set(_.dataset.precedence,_),r=_)}r&&o.set(null,r)}h=i.instance,_=h.getAttribute("data-precedence"),m=o.get(_)||r,m===r&&o.set(null,h),o.set(_,h),this.count++,r=kd.bind(this),h.addEventListener("load",r),h.addEventListener("error",r),m?m.parentNode.insertBefore(h,m.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(h,a.firstChild)),i.state.loading|=4}}var wc={$$typeof:U,Provider:null,Consumer:null,_currentValue:W,_currentValue2:W,_threadCount:0};function dy(a,i,o,r,h,m,_,N){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Dh(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dh(0),this.hiddenUpdates=Dh(null),this.identifierPrefix=r,this.onUncaughtError=h,this.onCaughtError=m,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function lp(a,i,o,r,h,m,_,N,k,Q,fe,Re){return a=new dy(a,i,o,_,N,k,Q,Re),i=1,m===!0&&(i|=24),m=Mn(3,null,null,i),a.current=m,m.stateNode=a,i=hE(),i.refCount++,a.pooledCache=i,i.refCount++,m.memoizedState={element:r,isDehydrated:o,cache:i},RE(m),a}function op(a){return a?(a=Ms,a):Ms}function sp(a,i,o,r,h,m){h=op(h),r.context===null?r.context=h:r.pendingContext=h,r=bl(i),r.payload={element:o},m=m===void 0?null:m,m!==null&&(r.callback=m),o=Ol(a,r,i),o!==null&&(kn(o,a,i),Ac(o,a,i))}function rp(a,i){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var o=a.retryLane;a.retryLane=o!==0&&o<i?o:i}}function HA(a,i){rp(a,i),(a=a.alternate)&&rp(a,i)}function cp(a){if(a.tag===13){var i=vs(a,67108864);i!==null&&kn(i,a,67108864),HA(a,67108864)}}var Gd=!0;function fy(a,i,o,r){var h=w.T;w.T=null;var m=L.p;try{L.p=2,xA(a,i,o,r)}finally{L.p=m,w.T=h}}function hy(a,i,o,r){var h=w.T;w.T=null;var m=L.p;try{L.p=8,xA(a,i,o,r)}finally{L.p=m,w.T=h}}function xA(a,i,o,r){if(Gd){var h=UA(r);if(h===null)_A(a,i,r,wd,o),dp(a,r);else if(Ay(h,a,i,o,r))r.stopPropagation();else if(dp(a,r),i&4&&-1<Ey.indexOf(a)){for(;h!==null;){var m=Ts(h);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var _=To(m.pendingLanes);if(_!==0){var N=m;for(N.pendingLanes|=2,N.entangledLanes|=2;_;){var k=1<<31-yn(_);N.entanglements[1]|=k,_&=~k}Li(m),(gt&6)===0&&(pd=it()+500,Lc(0))}}break;case 13:N=vs(m,2),N!==null&&kn(N,m,2),Nd(),HA(m,2)}if(m=UA(r),m===null&&_A(a,i,r,wd,o),m===h)break;h=m}h!==null&&r.stopPropagation()}else _A(a,i,r,null,o)}}function UA(a){return a=Bh(a),kA(a)}var wd=null;function kA(a){if(wd=null,a=Rs(a),a!==null){var i=c(a);if(i===null)a=null;else{var o=i.tag;if(o===13){if(a=d(i),a!==null)return a;a=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;a=null}else i!==a&&(a=null)}}return wd=a,null}function up(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(st()){case Tt:return 2;case St:return 8;case Qt:case Ro:return 32;case As:return 268435456;default:return 32}default:return 32}}var PA=!1,Bl=null,Fl=null,zl=null,Bc=new Map,Fc=new Map,jl=[],Ey="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function dp(a,i){switch(a){case"focusin":case"focusout":Bl=null;break;case"dragenter":case"dragleave":Fl=null;break;case"mouseover":case"mouseout":zl=null;break;case"pointerover":case"pointerout":Bc.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fc.delete(i.pointerId)}}function zc(a,i,o,r,h,m){return a===null||a.nativeEvent!==m?(a={blockedOn:i,domEventName:o,eventSystemFlags:r,nativeEvent:m,targetContainers:[h]},i!==null&&(i=Ts(i),i!==null&&cp(i)),a):(a.eventSystemFlags|=r,i=a.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),a)}function Ay(a,i,o,r,h){switch(i){case"focusin":return Bl=zc(Bl,a,i,o,r,h),!0;case"dragenter":return Fl=zc(Fl,a,i,o,r,h),!0;case"mouseover":return zl=zc(zl,a,i,o,r,h),!0;case"pointerover":var m=h.pointerId;return Bc.set(m,zc(Bc.get(m)||null,a,i,o,r,h)),!0;case"gotpointercapture":return m=h.pointerId,Fc.set(m,zc(Fc.get(m)||null,a,i,o,r,h)),!0}return!1}function fp(a){var i=Rs(a.target);if(i!==null){var o=c(i);if(o!==null){if(i=o.tag,i===13){if(i=d(o),i!==null){a.blockedOn=i,rO(a.priority,function(){if(o.tag===13){var r=Un();r=yh(r);var h=vs(o,r);h!==null&&kn(h,o,r),HA(o,r)}});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){a.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Bd(a){if(a.blockedOn!==null)return!1;for(var i=a.targetContainers;0<i.length;){var o=UA(a.nativeEvent);if(o===null){o=a.nativeEvent;var r=new o.constructor(o.type,o);wh=r,o.target.dispatchEvent(r),wh=null}else return i=Ts(o),i!==null&&cp(i),a.blockedOn=o,!1;i.shift()}return!0}function hp(a,i,o){Bd(a)&&o.delete(i)}function my(){PA=!1,Bl!==null&&Bd(Bl)&&(Bl=null),Fl!==null&&Bd(Fl)&&(Fl=null),zl!==null&&Bd(zl)&&(zl=null),Bc.forEach(hp),Fc.forEach(hp)}function Fd(a,i){a.blockedOn===i&&(a.blockedOn=null,PA||(PA=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,my)))}var zd=null;function Ep(a){zd!==a&&(zd=a,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){zd===a&&(zd=null);for(var i=0;i<a.length;i+=3){var o=a[i],r=a[i+1],h=a[i+2];if(typeof r!="function"){if(kA(r||o)===null)continue;break}var m=Ts(o);m!==null&&(a.splice(i,3),i-=3,kE(m,{pending:!0,data:h,method:o.method,action:r},r,h))}}))}function jc(a){function i(k){return Fd(k,a)}Bl!==null&&Fd(Bl,a),Fl!==null&&Fd(Fl,a),zl!==null&&Fd(zl,a),Bc.forEach(i),Fc.forEach(i);for(var o=0;o<jl.length;o++){var r=jl[o];r.blockedOn===a&&(r.blockedOn=null)}for(;0<jl.length&&(o=jl[0],o.blockedOn===null);)fp(o),o.blockedOn===null&&jl.shift();if(o=(a.ownerDocument||a).$$reactFormReplay,o!=null)for(r=0;r<o.length;r+=3){var h=o[r],m=o[r+1],_=h[Rn]||null;if(typeof m=="function")_||Ep(o);else if(_){var N=null;if(m&&m.hasAttribute("formAction")){if(h=m,_=m[Rn]||null)N=_.formAction;else if(kA(h)!==null)continue}else N=_.action;typeof N=="function"?o[r+1]=N:(o.splice(r,3),r-=3),Ep(o)}}}function GA(a){this._internalRoot=a}jd.prototype.render=GA.prototype.render=function(a){var i=this._internalRoot;if(i===null)throw Error(l(409));var o=i.current,r=Un();sp(o,r,a,i,null,null)},jd.prototype.unmount=GA.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var i=a.containerInfo;sp(a.current,2,null,a,null,null),Nd(),i[ms]=null}};function jd(a){this._internalRoot=a}jd.prototype.unstable_scheduleHydration=function(a){if(a){var i=MT();a={blockedOn:null,target:a,priority:i};for(var o=0;o<jl.length&&i!==0&&i<jl[o].priority;o++);jl.splice(o,0,a),o===0&&fp(a)}};var Ap=t.version;if(Ap!=="19.1.0")throw Error(l(527,Ap,"19.1.0"));L.findDOMNode=function(a){var i=a._reactInternals;if(i===void 0)throw typeof a.render=="function"?Error(l(188)):(a=Object.keys(a).join(","),Error(l(268,a)));return a=E(i),a=a!==null?A(a):null,a=a===null?null:a.stateNode,a};var Ry={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:w,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yd.isDisabled&&Yd.supportsFiber)try{Wr=Yd.inject(Ry),Dn=Yd}catch{}}return Kc.createRoot=function(a,i){if(!s(a))throw Error(l(299));var o=!1,r="",h=Mg,m=Lg,_=Hg,N=null;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(r=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(m=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(N=i.unstable_transitionCallbacks)),i=lp(a,1,!1,null,null,o,r,h,m,_,N,null),a[ms]=i.current,gA(a),new GA(i)},Kc.hydrateRoot=function(a,i,o){if(!s(a))throw Error(l(299));var r=!1,h="",m=Mg,_=Lg,N=Hg,k=null,Q=null;return o!=null&&(o.unstable_strictMode===!0&&(r=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(N=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(k=o.unstable_transitionCallbacks),o.formState!==void 0&&(Q=o.formState)),i=lp(a,1,!0,i,o??null,r,h,m,_,N,k,Q),i.context=op(null),o=i.current,r=Un(),r=yh(r),h=bl(r),h.callback=null,Ol(o,h,r),o=r,i.current.lanes=o,Xr(i,o),Li(i),a[ms]=i.current,gA(a),new jd(i)},Kc.version="19.1.0",Kc}var bp;function vy(){if(bp)return FA.exports;bp=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),FA.exports=yy(),FA.exports}var My=vy(),C=dR();const mt=uR(C),Zf=_y({__proto__:null,default:mt},[C]),Ly="7.25",Hy=16;var Ia=(e=>(e.Exact="Exact",e.SkillSequence="SkillSequence",e.Edited="Edited",e))(Ia||{}),_i=(e=>(e.Record="Record",e.SkillSequencePresets="SkillSequencePresets",e.MarkerTrackIndividual="MarkerTrackIndividual",e.MarkerTracksCombined="MarkerTracksCombined",e))(_i||{}),wn=(e=>(e[e.RealTime=0]="RealTime",e[e.RealTimeAutoPause=1]="RealTimeAutoPause",e[e.Manual=2]="Manual",e))(wn||{}),eo=(e=>(e[e.Initial=0]="Initial",e[e.FpsTax=1]="FpsTax",e[e.AllaganGcdFormula=2]="AllaganGcdFormula",e))(eo||{});const Qf={version:2};let TN=!1;function xy(){return TN}const $f="DT",tu=window.location.hostname.startsWith("beta"),Uy=localStorage.length===0;function ha(e){let t=localStorage.getItem($f+"."+e);return localStorage.getItem(e)!==null&&(TN=!0),t}function aa(e,t){localStorage.setItem($f+"."+e,t)}function bm(e){localStorage.removeItem($f+"."+e)}function SN(){Object.keys(localStorage).forEach(e=>{e.startsWith($f+".")&&localStorage.removeItem(e)})}const ma={epsilon:1e-6};var wt=(e=>(e[e.lvl70=70]="lvl70",e[e.lvl80=80]="lvl80",e[e.lvl90=90]="lvl90",e[e.lvl100=100]="lvl100",e))(wt||{});const gN=.1;var ge=(e=>(e.Fire="Fire",e.Ice="Ice",e.Lightning="Lightning",e.Physical="Physical",e.Other="Other",e))(ge||{}),Kt=(e=>(e.RNG="RNG",e.Never="Never",e.Always="Always",e))(Kt||{}),Et=(e=>(e.Blocked="blocked by CD, animation lock or caster tax",e.SecondaryBlocked="blocked by secondary CD",e.NotEnoughMP="not enough MP",e.NotInCombat="not in combat (must wait for first damage application)",e.RequirementsNotMet="skill requirements not satisfied",e.SkillNotUnlocked="skill not unlocked at provided level",e.BuffNoLongerAvailable="buff no longer available",e.PastTargetTime="jump target time has already passed",e.CastCanceled="cast canceled (skill requirements no longer met at confirmation time)",e))(Et||{});function Rf(){return{unavailableReasons:[],ready:function(){return this.unavailableReasons.length===0},toString:function(){return this.ready()?"ready":this.unavailableReasons.join("; ")},addUnavailableReason:function(e){this.unavailableReasons.includes(e)||this.unavailableReasons.push(e)},clone:function(){const e=Rf();return this.unavailableReasons.forEach(t=>e.addUnavailableReason(t)),e}}}var P=(e=>(e.LeyLines="Ley Lines",e.Hyperphantasia="Hyperphantasia",e.Manafication="Manafication",e.Acceleration="Acceleration",e.Fuka="Fuka",e.Fugetsu="Fugetsu",e.EnhancedEnpi="Enhanced Enpi",e.NoMercy="No Mercy",e.PowerSurge="Power Surge",e.LanceCharge="Lance Charge",e.LifeOfTheDragon="Life Of The Dragon",e.EnhancedPiercingTalon="Enhanced Piercing Talon",e.LifeSurge="Life Surge",e.DivineMight="Divine Might",e.Requiescat="Requiescat",e.FightOrFlight="Fight Or Flight",e.Tincture="Tincture",e.ArcaneCircle="Arcane Circle",e.ArmysPaeon="Army's Paeon",e.BattleLitany="Battle Litany",e.BattleVoice="Battle Voice",e.Brotherhood="Brotherhood",e.Card_TheBalance="Card - The Balance",e.Card_TheSpear="Card - The Spear",e.ChainStratagem="Chain Stratagem",e.Devilment="Devilment",e.Divination="Divination",e.Dokumori="Dokumori",e.Embolden="Embolden",e.MagesBallad="Mage's Ballad",e.RadiantFinale1="Radiant Finale (1)",e.RadiantFinale2="Radiant Finale (2)",e.RadiantFinale3="Radiant Finale (3)",e.Barrage="Barrage",e.SearingLight="Searing Light",e.StandardFinish="Standard Finish",e.StarryMuse="Starry Muse",e.TechnicalFinish="Technical Finish",e.WanderersMinuet="The Wanderer's Minuet",e.RagingStrikes="Raging Strikes",e.DeathsDesign="Death's Design",e.Zoe="Zoe",e.Autophysis="Autophysis",e.Krasis="Krasis",e.Philosophia="Philosophia",e.Soteria="Soteria",e.WaxingNocturne="Waxing Nocturne",e.Whistle="Whistle",e.Bristle="Bristle",e.TingleA="TingleA",e.TingleB="TingleB",e))(P||{}),Fe=(e=>(e.PolyglotOvercap="polyglot overcap",e.CometOverwrite="comet overwrite",e.PaletteOvercap="palette gauge overcap",e.DualcastEaten="dualcast dropped",e.ImbalancedMana="mana difference became more than 30",e.ComboBreak="broken combo",e.GIOverwrite="Grand Impact Ready overwrite",e.GIDrop="Grand Impact expired",e.ViceOfThornsDrop="Vice of Thorns expired",e.PrefulgenceDrop="Prefulgence expired",e.ManaficDrop="Manafication stacks expired",e.MagickedSwordplayDrop="Magicked Swordplay stacks expired",e.EspritOvercap="esprit gauge overcap",e.FeatherOvercap="feather gauge overcap",e.FanThreeOverwrite="overwrote fan dance 3",e.HeatOvercap="heat gauge overcap",e.BatteryOvercap="battery gauge overcap",e.KenkiOvercap="kenki overcap",e.MeditationOvercap="meditation stack overcap",e.SenOvercap="sen overcap",e.BeastGaugeOvercap="Beast Gauge overcap",e.InnerReleaseDrop="Inner Release expired",e.NascentChaosDrop="Nascent Chaos expired",e.SoulVoiceOvercap="soul voice overcap",e.CodaOvercap="coda overcap",e.CartridgeOvercap="cartridge overcap",e.ScaleOvercap="firstminds' focus overcap",e.LateEnkindle="enkindle used near end of demi window may ghost",e.RubysGlimmerDrop="Ruby's Glimmer expired",e.AetherflowOvercap="aetherflow overcap",e.BloodGaugeOvercap="blood gauge overcap",e.DarkArtsOvercap="dark arts overcap",e))(Fe||{}),_N={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Op=mt.createContext&&mt.createContext(_N),ky=["attr","size","title"];function Py(e,t){if(e==null)return{};var n=Gy(e,t),l,s;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(s=0;s<c.length;s++)l=c[s],!(t.indexOf(l)>=0)&&Object.prototype.propertyIsEnumerable.call(e,l)&&(n[l]=e[l])}return n}function Gy(e,t){if(e==null)return{};var n={};for(var l in e)if(Object.prototype.hasOwnProperty.call(e,l)){if(t.indexOf(l)>=0)continue;n[l]=e[l]}return n}function Tf(){return Tf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},Tf.apply(this,arguments)}function Dp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,l)}return n}function Sf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Dp(Object(n),!0).forEach(function(l){wy(e,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dp(Object(n)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(n,l))})}return e}function wy(e,t,n){return t=By(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function By(e){var t=Fy(e,"string");return typeof t=="symbol"?t:t+""}function Fy(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var l=n.call(e,t);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pN(e){return e&&e.map((t,n)=>mt.createElement(t.tag,Sf({key:n},t.attr),pN(t.child)))}function Pr(e){return t=>mt.createElement(zy,Tf({attr:Sf({},e.attr)},t),pN(e.child))}function zy(e){var t=n=>{var{attr:l,size:s,title:c}=e,d=Py(e,ky),f=s||n.size||"1em",E;return n.className&&(E=n.className),e.className&&(E=(E?E+" ":"")+e.className),mt.createElement("svg",Tf({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,l,d,{className:E,style:Sf(Sf({color:e.color||n.color},n.style),e.style),height:f,width:f,xmlns:"http://www.w3.org/2000/svg"}),c&&mt.createElement("title",null,c),e.children)};return Op!==void 0?mt.createElement(Op.Consumer,null,n=>t(n)):t(_N)}function jy(e){return Pr({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93 6h-2.95a15.65 15.65 0 0 0-1.38-3.56A8.03 8.03 0 0 1 18.92 8zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56A7.987 7.987 0 0 1 5.08 16zm2.95-8H5.08a7.987 7.987 0 0 1 4.33-3.56A15.65 15.65 0 0 0 8.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2zm.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95a8.03 8.03 0 0 1-4.33 3.56zM16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.38z"},child:[]}]})(e)}function Yy(e){return Pr({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 3a9 9 0 1 0 9 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 0 1-4.4 2.26 5.403 5.403 0 0 1-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"},child:[]}]})(e)}function Ky(e){return Pr({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58a.996.996 0 0 0-1.41 0 .996.996 0 0 0 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37a.996.996 0 0 0-1.41 0 .996.996 0 0 0 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0a.996.996 0 0 0 0-1.41l-1.06-1.06zm1.06-10.96a.996.996 0 0 0 0-1.41.996.996 0 0 0-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36a.996.996 0 0 0 0-1.41.996.996 0 0 0-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z"},child:[]}]})(e)}function VA(e,t){const n=Math.pow(10,t);return Math.floor(e*n)/n}var Cn,Om,IN,NN,CN,Dm;const mi=class mi{static getMainstatBase(t){switch(t){case wt.lvl70:return 292;case wt.lvl80:return 340;case wt.lvl90:return 390;case wt.lvl100:return 440}}static getSubstatBase(t){switch(t){case wt.lvl70:return 364;case wt.lvl80:return 380;case wt.lvl90:return 400;case wt.lvl100:return 420}}static getStatDiv(t){switch(t){case wt.lvl70:return 900;case wt.lvl80:return 1300;case wt.lvl90:return 1900;case wt.lvl100:return 2780}}static calculateDamage(t,n,l,s,c,d,f){var x,re,ie,se,oe,de,Ae;let E=c;const A=d>=1?d:d<0?0:_e(x=mi,Cn,Om).call(x,t,n)+d,R=f>=1?f:f<0?0:_e(re=mi,Cn,NN).call(re,t,l)+f;if(A===0&&R===0)return E;const T=_e(ie=mi,Cn,IN).call(ie,t,n);_e(se=mi,Cn,Om).call(se,t,mi.getSubstatBase(t));const S=1.25,g=A>=1&&R>=1,I=A>1?VA(1+(T-1)*(d-1),3):1,b=R>1?VA(1+(S-1)*(f-1),3):1,y=A>1?1:A,M=R>1?1:R;g?E*=VA(_e(oe=mi,Cn,Dm).call(oe,t,s)+_e(de=mi,Cn,CN).call(de,t,l),3):E*=_e(Ae=mi,Cn,Dm).call(Ae,t,s);const v=E*I*T,U=E*b*S,H=v*b*S,K=y*M,F=1-y-M+K;return E*F+v*(y-K)+U*(M-K)+H*K}static overtimePotency(t,n,l){const s=this.getSubstatBase(t),c=this.getStatDiv(t),d=(1e3+Math.floor((n-s)*130/c))*.001;return l*d}static mpTick(t,n){const l=this.getMainstatBase(t),s=this.getStatDiv(t);return 200+Math.floor(150*(n-l)/s)}static preTaxGcd(t,n,l,s){const c=this.getSubstatBase(t),d=this.getStatDiv(t);let f=Math.ceil((c-n)*130/d),E=Math.floor(l*(1e3+f));return Math.floor((100-(s??0))*E/1e3)/100}static preTaxGcdLegacy(t,n,l,s){const c=this.getSubstatBase(t),d=this.getStatDiv(t);return Math.floor(Math.floor(Math.floor((100-(s??0))*100/100)*Math.floor((2e3-Math.floor(130*(n-c)/d+1e3))*(1e3*l)/1e4)/100)*100/100)/100}static preTaxCastTime(t,n,l,s){const c=this.getSubstatBase(t),d=this.getStatDiv(t);return Math.floor(Math.floor(Math.floor((100-(s??0))*100/100)*Math.floor((2e3-Math.floor(130*(n-c)/d+1e3))*(1e3*l)/1e3)/100)*100/100)/1e3}static afterFpsTax(t,n){return Math.floor(n*t+1)/t}};Cn=new WeakSet,Om=function(t,n){const l=this.getSubstatBase(t),s=this.getStatDiv(t);return(Math.floor(200*(n-l)/s)+50)*.001},IN=function(t,n){const l=this.getSubstatBase(t),s=this.getStatDiv(t);return(Math.floor(200*(n-l)/s)+1400)*.001},NN=function(t,n){const l=this.getSubstatBase(t),s=this.getStatDiv(t);return Math.floor(550*(n-l)/s)*.001},CN=function(t,n){const l=this.getSubstatBase(t),s=this.getStatDiv(t);return Math.floor(140*(n-l)/s)*.001},Dm=function(t,n){const l=this.getMainstatBase(t),s=this.getStatDiv(t);return Math.floor(1e3+140*(n-l)/s)*.001},Pe(mi,Cn);let At=mi;var G=(e=>(e[e.AF3=0]="AF3",e[e.AF2=1]="AF2",e[e.AF1=2]="AF1",e[e.UI3=3]="UI3",e[e.UI2=4]="UI2",e[e.UI1=5]="UI1",e[e.ENO=6]="ENO",e[e.STARRY=7]="STARRY",e[e.EMBOLDEN_M=8]="EMBOLDEN_M",e[e.MANAFIC=9]="MANAFIC",e[e.ACCELERATION=10]="ACCELERATION",e[e.POT=11]="POT",e[e.COMBO=12]="COMBO",e[e.AUTO_CDH=13]="AUTO_CDH",e[e.NO_CDH=14]="NO_CDH",e[e.PARTY=15]="PARTY",e[e.STANDARD_SINGLE=16]="STANDARD_SINGLE",e[e.STANDARD_DOUBLE=17]="STANDARD_DOUBLE",e[e.TECHNICAL_SINGLE=18]="TECHNICAL_SINGLE",e[e.TECHNICAL_DOUBLE=19]="TECHNICAL_DOUBLE",e[e.TECHNICAL_TRIPLE=20]="TECHNICAL_TRIPLE",e[e.TECHNICAL_QUADRUPLE=21]="TECHNICAL_QUADRUPLE",e[e.DEVILMENT=22]="DEVILMENT",e[e.FUGETSU=23]="FUGETSU",e[e.AUTO_CRIT=24]="AUTO_CRIT",e[e.YATEN=25]="YATEN",e[e.POSITIONAL=26]="POSITIONAL",e[e.ARCANE_CIRCLE=27]="ARCANE_CIRCLE",e[e.DEATHSDESIGN=28]="DEATHSDESIGN",e[e.ENHANCED_GIBBET_GALLOWS=29]="ENHANCED_GIBBET_GALLOWS",e[e.ENHANCED_REAPING=30]="ENHANCED_REAPING",e[e.IMMORTAL_SACRIFICE=31]="IMMORTAL_SACRIFICE",e[e.OVERHEATED=32]="OVERHEATED",e[e.SURGING_TEMPEST=33]="SURGING_TEMPEST",e[e.RAGING_STRIKES=34]="RAGING_STRIKES",e[e.WANDERERS_MINUET=35]="WANDERERS_MINUET",e[e.MAGES_BALLAD=36]="MAGES_BALLAD",e[e.ARMYS_PAEON=37]="ARMYS_PAEON",e[e.BATTLE_VOICE=38]="BATTLE_VOICE",e[e.RADIANT_FINALE_ONE_CODA=39]="RADIANT_FINALE_ONE_CODA",e[e.RADIANT_FINALE_TWO_CODA=40]="RADIANT_FINALE_TWO_CODA",e[e.RADIANT_FINALE_THREE_CODA=41]="RADIANT_FINALE_THREE_CODA",e[e.BARRAGE=42]="BARRAGE",e[e.NO_MERCY=43]="NO_MERCY",e[e.SEARING_LIGHT=44]="SEARING_LIGHT",e[e.POWER_SURGE=45]="POWER_SURGE",e[e.ENHANCED_PIERCING_TALON=46]="ENHANCED_PIERCING_TALON",e[e.LANCE_CHARGE=47]="LANCE_CHARGE",e[e.LIFE_OF_THE_DRAGON=48]="LIFE_OF_THE_DRAGON",e[e.LIFE_SURGE=49]="LIFE_SURGE",e[e.BATTLE_LITANY=50]="BATTLE_LITANY",e[e.FIGHT_OR_FLIGHT=51]="FIGHT_OR_FLIGHT",e[e.DIVINE_MIGHT=52]="DIVINE_MIGHT",e[e.REQUIESCAT=53]="REQUIESCAT",e[e.PET=54]="PET",e[e.ZOE=55]="ZOE",e[e.SOTERIA=56]="SOTERIA",e[e.KRASIS=57]="KRASIS",e[e.AUTOPHYSIS=58]="AUTOPHYSIS",e[e.PHILOSOPHIA=59]="PHILOSOPHIA",e[e.MOON_FLUTE=60]="MOON_FLUTE",e[e.BRISTLE=61]="BRISTLE",e[e.WHISTLE=62]="WHISTLE",e[e.TINGLEA=63]="TINGLEA",e[e.TINGLEB=64]="TINGLEB",e[e.SURPANAKHA=65]="SURPANAKHA",e[e.WINGED_REPROBATION=66]="WINGED_REPROBATION",e[e.WINGED_REDEMPTION=67]="WINGED_REDEMPTION",e[e.DARKSIDE=68]="DARKSIDE",e))(G||{});const ue={Tincture:{kind:"multiplier",source:11,potencyFactor:1},AutoCrit:{kind:"critDirect",source:24,critBonus:1,dhBonus:0},AutoCDH:{kind:"critDirect",source:13,critBonus:1,dhBonus:1},NoCDH:{kind:"critDirect",source:14,critBonus:0,dhBonus:0},Starry:{kind:"multiplier",source:7,potencyFactor:1.05},EmboldenMagic:{kind:"multiplier",source:8,potencyFactor:1.05},AccelerationImpact:{kind:"adder",source:10,additiveAmount:50},Manafication:{kind:"multiplier",source:9,potencyFactor:1.05},SingleStandardFinish:{kind:"multiplier",source:16,potencyFactor:1.02},DoubleStandardFinish:{kind:"multiplier",source:17,potencyFactor:1.05},SingleTechnicalFinish:{kind:"multiplier",source:18,potencyFactor:1.01},TripleTechnicalFinish:{kind:"multiplier",source:20,potencyFactor:1.03},QuadrupleTechnicalFinish:{kind:"multiplier",source:21,potencyFactor:1.05},Devilment:{kind:"critDirect",source:22,critBonus:.2,dhBonus:.2},FugetsuBase:{kind:"multiplier",source:23,potencyFactor:1.1},FugetsuEnhanced:{kind:"multiplier",source:23,potencyFactor:1.13},YatenpiBase:{kind:"adder",source:25,additiveAmount:160},YatenpiEnhanced:{kind:"adder",source:25,additiveAmount:170},ArcaneCircle:{kind:"multiplier",source:27,potencyFactor:1.03},DeathsDesign:{kind:"multiplier",source:28,potencyFactor:1.1},EnhancedGibbetGallows:{kind:"adder",source:29,additiveAmount:60},EnhancedReaping:{kind:"adder",source:30,additiveAmount:60},ImmortalSacrifice:{kind:"adder",source:31,additiveAmount:40},Overheated:{kind:"adder",source:32,additiveAmount:20},SurgingTempest:{kind:"multiplier",source:33,potencyFactor:1.1},RagingStrikes:{kind:"multiplier",source:34,potencyFactor:1.15},MagesBallad:{kind:"multiplier",source:36,potencyFactor:1.01},ArmysPaeon:{kind:"critDirect",source:37,critBonus:0,dhBonus:.03},WanderersMinuet:{kind:"critDirect",source:35,critBonus:.02,dhBonus:0},BattleVoice:{kind:"critDirect",source:38,critBonus:0,dhBonus:.2},RadiantFinaleOneCoda:{kind:"multiplier",source:39,potencyFactor:1.02},RadiantFinaleTwoCoda:{kind:"multiplier",source:40,potencyFactor:1.04},RadiantFinaleThreeCoda:{kind:"multiplier",source:41,potencyFactor:1.06},BarrageRefulgent:{kind:"multiplier",source:42,potencyFactor:3},BarrageWideVolley:{kind:"adder",source:42,additiveAmount:80},BarrageShadowbite:{kind:"adder",source:42,additiveAmount:100},NoMercy:{kind:"multiplier",source:43,potencyFactor:1.2},SearingLight:{kind:"multiplier",source:44,potencyFactor:1.05},SmnPet:{kind:"multiplier",source:54,potencyFactor:.8},PowerSurge:{kind:"multiplier",source:45,potencyFactor:1.1},LanceCharge:{kind:"multiplier",source:47,potencyFactor:1.1},LifeOfTheDragon:{kind:"multiplier",source:48,potencyFactor:1.15},BattleLitany:{kind:"critDirect",source:50,critBonus:.1,dhBonus:0},EnhancedPiercingTalon:{kind:"adder",source:46,additiveAmount:150},LifeSurge:{kind:"critDirect",source:49,critBonus:1,dhBonus:0},FightOrFlight:{kind:"multiplier",source:51,potencyFactor:1.25},Zoe:{kind:"multiplier",source:55,potencyFactor:1.5},Soteria:{kind:"multiplier",source:56,potencyFactor:1.7},Krasis:{kind:"multiplier",source:57,potencyFactor:1.2},Autophysis:{kind:"multiplier",source:58,potencyFactor:1.1},Philosophia:{kind:"multiplier",source:59,potencyFactor:1.2},MoonFlute:{kind:"multiplier",source:60,potencyFactor:1.5},Whistle:{kind:"multiplier",source:62,potencyFactor:1.8},Bristle:{kind:"multiplier",source:61,potencyFactor:1.5},TingleA:{kind:"adder",source:63,additiveAmount:100},TingleB:{kind:"adder",source:64,additiveAmount:300},WingedReprobation:{kind:"adder",source:66,additiveAmount:100},WingedRedemption:{kind:"adder",source:67,additiveAmount:220},Darkside:{kind:"multiplier",source:68,potencyFactor:1.1},DrkPet:{kind:"multiplier",source:54,potencyFactor:1.05*1.1}};function Bi(e){return{kind:"adder",source:12,additiveAmount:e}}function Vy(e){return{kind:"adder",source:53,additiveAmount:e}}function Wy(e){return{kind:"adder",source:52,additiveAmount:e}}function ou(e){return{kind:"adder",source:26,additiveAmount:e}}var fo,bN,ON,DN;class Na{constructor(t){Pe(this,fo);j(this,"config");j(this,"sourceTime");j(this,"sourceSkill");j(this,"aspect");j(this,"description");j(this,"base");j(this,"targetCount");j(this,"falloff");j(this,"snapshotTime");j(this,"applicationTime");j(this,"modifiers",[]);this.config=t.config,this.sourceTime=t.sourceTime,this.sourceSkill=t.sourceSkill,this.aspect=t.aspect,this.base=t.basePotency,this.snapshotTime=t.snapshotTime,this.description=t.description,this.targetCount=t.targetCount,this.falloff=t.falloff}getAmount(t){let n=1,l=0,s=0,c=0,d=!1,f=!1,E=!1;this.modifiers.forEach(T=>{T.source===11?n*=t.tincturePotencyMultiplier:T.source===13?d=!0:T.source===24?f=!0:T.source===14?E=!0:T.kind==="critDirect"?(s+=T.critBonus,c+=T.dhBonus):T.kind==="multiplier"?n*=T.potencyFactor:T.kind==="adder"&&(l+=T.additiveAmount)}),console.assert(!(E&&(d||f)),"skills that can't CDH cannot be auto-crit or auto-CDH"),E&&(d=!1,f=!1),console.assert(!(d&&f),"cannot be both auto-crit and auto-CDH"),t.includePartyBuffs&&this.snapshotTime&&O.game.getPartyBuffs(this.snapshotTime).forEach(T=>{T.kind==="multiplier"?n*=T.potencyFactor:T.kind==="critDirect"&&(s+=T.critBonus,c+=T.dhBonus)});let R=(this.base+l)*_e(this,fo,DN).call(this,n,E?0:s,E?0:c);if(d?R*=_e(this,fo,bN).call(this,s,c):f&&(R*=_e(this,fo,ON).call(this,s,c)),t.includeSplash){const T=1+(1-(this.falloff??1))*(this.targetCount-1);R*=T}return R}getPartyBuffs(){return this.snapshotTime?[...O.game.getPartyBuffs(this.snapshotTime).keys()]:[]}resolve(t){console.assert(this.snapshotTime!==void 0,`${this.sourceSkill} displayed at ${t} did not have snapshotTime`),console.assert(this.applicationTime===void 0,`${this.sourceSkill} displayed at ${t} was already resolved at ${this.applicationTime}`),this.applicationTime=t}hasResolved(){return this.applicationTime!==void 0}hasHitBoss(t){return this.applicationTime!==void 0&&!t(this.applicationTime)}hasSnapshotted(){return this.snapshotTime!==void 0}}fo=new WeakSet,bN=function(t,n){const l=this.config.level,s=At.calculateDamage(l,O.gameConfig.criticalHit,O.gameConfig.directHit,O.gameConfig.determination,1,t,n);return At.calculateDamage(l,O.gameConfig.criticalHit,O.gameConfig.directHit,O.gameConfig.determination,1,1+t,1+n)/s},ON=function(t,n){const l=this.config.level,s=At.calculateDamage(l,O.gameConfig.criticalHit,O.gameConfig.directHit,O.gameConfig.determination,1,t,n);return At.calculateDamage(l,O.gameConfig.criticalHit,O.gameConfig.directHit,O.gameConfig.determination,1,1+t,n)/s},DN=function(t,n,l){const s=this.config.level,c=this.config.criticalHit,d=this.config.directHit,f=this.config.determination,E=At.calculateDamage(s,c,d,f,1,0,0);return At.calculateDamage(s,c,d,f,t,n,l)/E};var ct=(e=>(e.Red="#f64141",e.Orange="#e89b5f",e.Yellow="#ffd535",e.Green="#50c53d",e.Cyan="#53e5e5",e.Blue="#217ff5",e.Purple="#9755ef",e.Pink="#ee79ee",e.Grey="#6f6f6f",e))(ct||{});let kt=()=>ki(C.useContext(jn));const ki=e=>e==="Dark"?qy:Xy,Jf=(e,t)=>ki(e)[t],qy={accent:"mediumpurple",jobAccents:{BLM:"#9370db",BLU:"#9370db",PCT:"#e176c2",RDM:"#ff0000",DNC:"#e2b0af",SAM:"#f59542",MCH:"#6ee1d6",WAR:"#b10b0b",RPR:"#965a90",BRD:"#91ba5e",GNB:"#f6b26b",SMN:"#2D9B78",SGE:"#80a0f0"},editingValid:"#ffdc00",editingInvalid:"#ff0000",realTime:"mediumseagreen",historical:"#ff8c00",fileDownload:"#798c3f",text:"#b0b0b0",emphasis:"#dadada",success:"mediumseagreen",warning:"#ff6224",background:"#1f1f21",tipBackground:"#2a2a2a",bgLowContrast:"#333",bgMediumContrast:"#393939",bgHighContrast:"#626262",resources:{gcdBar:"#5cab43",lockBar:"#737373",mana:"#62a5d2",manaTick:"#3d5c73",cdhTag:"#d55124",comboTag:"#5c8bad",petTag:"#eb9b5f"},blm:{enochian:"#b69241",astralFire:"#d55124",astralSoul:"#cb8046",umbralIce:"#509bd5",umbralHeart:"#8fced5",paradox:"#d953ee",polyTimer:"#594472",polyStacks:"#b138ee"},blu:{moonflute:"#b69241",whistle:"#b69241",bristle:"#b69241",tinglea:"#217ff5",tingleb:"#217ff5",surpanakha:"#b69241",wingedreprobation:"#ffd535"},pct:{creatureCanvas:"#a948e3",weaponCanvas:"#a53535",landscapeCanvas:"#2e51dd",paletteGauge:"#b69241",holyPaint:"#9bc6dd",cometPaint:"#7e19aa",starryBuff:"#509bd5"},rdm:{whiteMana:"#dddddd",blackMana:"#2a4bf5",manaStack:"#cb8046",emboldenBuff:"#de0202",manaficBuff:"#c169c2",accelBuff:"#f0d1e8"},dnc:{esprit:"#e2b0af",feathers:"#8DA147",emboite:"#bf615c",entrechat:"#3a8db7",jete:"#539350",pirouette:"#b0984e"},sam:{kenki:"#d55124",setsu:"#c7ffff",getsu:"#7987fc",kaSen:"#f8a2a6",meditation:"#ff853d",fugetsu:"#0f52ba",iai:"#89cfef"},mch:{heat:"#D35A10",battery:"#2C9FCB"},rpr:{soulGaugeLow:"#660929",soulGaugeHigh:"#e5004e",shroudGaugeLow:"#03706c",shroudGaugeHigh:"#00fcf3",lemureShroud:"#53ffff",voidShroudLow:"#5c125c",voidShroudHigh:"#ff04ff",deathsDesign:"#ab0009",arcaneCircle:"#ff94fd"},war:{beastGauge:"#ffba00"},brd:{soulVoice:"#5DBD99",pitchPerfect:"#9ac5f1",repertoire:"#e8c35a",wanderersCoda:"#add549",magesCoda:"#ffbcf8",armysCoda:"#eb9b5f",ragingStrikes:"#c04414",barrage:"#e6c65b",battleVoice:"#71bed1",radiantFinale:"#edcce7"},gnb:{},smn:{aetherflow:"#ffd4ff",bahamut:"#2D9B78",phoenix:"#d55124",solar:"#9bc6dd",ruby:"#e5004e",topaz:"#b0984e",emerald:"#539350",searing:"#2D9B78"},drg:{lifeSurge:"#ff6633",lanceCharge:"#d6002d",lifeOfTheDragon:"#0968af",battleLitany:"#33b8e3",powerSurge:"#59ed78",enhancedPiercingTalon:"#f4caa6",firstmindsFocusStacks:"#9926c8",lifeOfTheDragonBar:"#d74936",drgComboTimer:"#3d61ae"},sge:{addersgall:"#80a0f0",addersting:"#9e2dca",zoe:"cyan",autophysis:"lightblue",krasis:"teal",soteria:"green",philosophia:"lightgreen"},pld:{divineMight:"#ff6633",requiescat:"#d6002d",fightOrFlight:"#0968af",pldComboTimer:"#59ed78",ironWillColor:"#d74936",oathGaugeColor:"#3d61ae"},drk:{darkside:"#c000d1",blood:"#8803fc",darkarts:"#ffdf0d",drkComboTimer:"#cb8046",grit:"#82cad9"},timeline:{ruler:"#2d2d2d",tracks:"#242424",castBar:"#42364d",lockBar:"#696969",gcdBar:"#354931",invalidBg:"#f25449",llCover:"#5ea647",potCover:"#c4543a",buffCover:"#9370db",damageMark:"#ff0000",healingMark:"#2cda30",aggroMark:"#ff8000",untargetableDamageMark:"#7f7f7f",mpTickMark:"#32525e",warningMark:"#9d7103",lucidTickMark:"#56b3d5",countdown:"rgba(15, 15, 15, 0.4)",markerAlpha:"4f"}},Xy={accent:"mediumpurple",jobAccents:{BLM:"#9370db",BLU:"#9370db",PCT:"#f485d6",RDM:"#ff0000",DNC:"#e2b0af",SAM:"#f59542",MCH:"#6ee1d6",WAR:"#b10b0b",RPR:"#965a90",BRD:"#91ba5e",SMN:"#2D9B78",SGE:"#80a0f0"},editingValid:"#ffdc00",editingInvalid:"#ff0000",realTime:"mediumseagreen",historical:"#ff8c00",fileDownload:"#798c3f",text:"#000000",emphasis:"#000000",success:"mediumseagreen",warning:"#ff4d07",background:"#ffffff",tipBackground:"#ffffff",bgLowContrast:"#efefef",bgMediumContrast:"lightgrey",bgHighContrast:"darkgrey",resources:{gcdBar:"#8edc72",lockBar:"#cbcbcb",mana:"#8ACEEA",manaTick:"#C2EAFF",cdhTag:"#ff6633",comboTag:"#53a7c9",petTag:"#eb9b5f"},blm:{enochian:"#f5cf96",astralFire:"#ff6633",astralSoul:"#ffa641",umbralIce:"#66bbff",umbralHeart:"#95dae3",paradox:"#d953ee",polyTimer:"#d5bbf1",polyStacks:"#b138ee"},blu:{moonflute:"#b69241",whistle:"#b69241",bristle:"#b69241",tinglea:"#217ff5",tingleb:"#217ff5",surpanakha:"#b69241",wingedreprobation:"#ffd535"},pct:{creatureCanvas:"#b854e8",weaponCanvas:"#d54d48",landscapeCanvas:"#4568f6",paletteGauge:"#f5cf96",holyPaint:"#b7c9d5",cometPaint:"#9926c8",starryBuff:"#66bbff"},rdm:{whiteMana:"#fcd8d4",blackMana:"#467aeb",manaStack:"#9926c8",emboldenBuff:"#c91310",manaficBuff:"#530954",accelBuff:"#c973b4"},dnc:{esprit:"#e2b0af",feathers:"#8DA147",emboite:"#bf615c",entrechat:"#3a8db7",jete:"#539350",pirouette:"#b0984e"},sam:{kenki:"#d55124",setsu:"#addede",getsu:"#7987fc",kaSen:"#f8a2a6",meditation:"#ff853d",fugetsu:"#0f52ba",iai:"#89cfef"},mch:{heat:"#D35A10",battery:"#2C9FCB"},rpr:{soulGaugeLow:"#660929",soulGaugeHigh:"#e5004e",shroudGaugeLow:"#03706c",shroudGaugeHigh:"#00fcf3",lemureShroud:"#53ffff",voidShroudLow:"#5c125c",voidShroudHigh:"#ff04ff",deathsDesign:"#ab0009",arcaneCircle:"#ff94fd"},war:{beastGauge:"#e74a3c"},brd:{soulVoice:"#5DBD99",pitchPerfect:"#9ac5f1",repertoire:"#e8c35a",wanderersCoda:"#add549",magesCoda:"#ffbcf8",armysCoda:"#eb9b5f",ragingStrikes:"#c04414",barrage:"#e6c65b",battleVoice:"#71bed1",radiantFinale:"#edcce7"},gnb:{},smn:{aetherflow:"#ffd4ff",bahamut:"#2D9B78",phoenix:"#d55124",solar:"#9bc6dd",ruby:"#e5004e",topaz:"#b0984e",emerald:"#539350",searing:"#2D9B78"},drg:{lifeSurge:"#ff6633",lanceCharge:"#d6002d",lifeOfTheDragon:"#0968af",battleLitany:"#33b8e3",powerSurge:"#59ed78",enhancedPiercingTalon:"#f4caa6",firstmindsFocusStacks:"#9926c8",lifeOfTheDragonBar:"#d74936",drgComboTimer:"#3d61ae"},sge:{addersgall:"#80a0f0",addersting:"#9e2dca",zoe:"cyan",autophysis:"lightblue",krasis:"teal",soteria:"green",philosophia:"lightgreen"},pld:{divineMight:"#ff6633",requiescat:"#d6002d",fightOrFlight:"#0968af",pldComboTimer:"#59ed78",ironWillColor:"#d74936",oathGaugeColor:"#3d61ae"},drk:{darkside:"#c000d1",blood:"#8803fc",darkarts:"#ffdf0d",drkComboTimer:"#cb8046",grit:"#82cad9"},timeline:{ruler:"#e9e9e9",tracks:"#f3f3f3",castBar:"#ecd6f3",lockBar:"#9d9d9d",gcdBar:"#ccefc6",invalidBg:"#c21104",llCover:"#87ec71",potCover:"#ff865c",buffCover:"#9370db",damageMark:"#ff0000",healingMark:"#2cda30",aggroMark:"#ff8000",untargetableDamageMark:"#7f7f7f",mpTickMark:"#b6dfea",warningMark:"#ffbb29",lucidTickMark:"#88cae0",countdown:"rgba(0, 0, 0, 0.1)",markerAlpha:"7f"}};function Zy(e){let t=kt(),n=new Map([[G.AF3,t.blm.astralFire],[G.AF2,t.blm.astralFire],[G.AF1,t.blm.astralFire],[G.UI3,t.blm.umbralIce],[G.UI2,t.blm.umbralIce],[G.UI1,t.blm.umbralIce],[G.ENO,t.blm.enochian],[G.AUTO_CDH,t.resources.cdhTag],[G.STARRY,t.pct.starryBuff],[G.EMBOLDEN_M,t.rdm.emboldenBuff],[G.MANAFIC,t.rdm.manaficBuff],[G.ACCELERATION,t.rdm.accelBuff],[G.STANDARD_SINGLE,t.dnc.jete],[G.STANDARD_DOUBLE,t.dnc.jete],[G.TECHNICAL_SINGLE,t.dnc.esprit],[G.TECHNICAL_DOUBLE,t.dnc.esprit],[G.TECHNICAL_TRIPLE,t.dnc.esprit],[G.TECHNICAL_QUADRUPLE,t.dnc.esprit],[G.DEVILMENT,t.dnc.feathers],[G.OVERHEATED,"#ee79ee"],[G.COMBO,t.resources.comboTag],[G.FUGETSU,t.sam.fugetsu],[G.AUTO_CRIT,t.resources.cdhTag],[G.YATEN,t.pct.cometPaint],[G.POSITIONAL,"#50c53d"],[G.ARCANE_CIRCLE,"#ee79ee"],[G.DEATHSDESIGN,"#f64141"],[G.ENHANCED_GIBBET_GALLOWS,"#217ff5"],[G.ENHANCED_REAPING,"#9755ef"],[G.IMMORTAL_SACRIFICE,"#ee79ee"],[G.SURGING_TEMPEST,"#9755ef"],[G.BARRAGE,t.brd.barrage],[G.RAGING_STRIKES,t.brd.ragingStrikes],[G.BATTLE_VOICE,t.brd.battleVoice],[G.RADIANT_FINALE_THREE_CODA,t.brd.radiantFinale],[G.RADIANT_FINALE_TWO_CODA,t.brd.radiantFinale],[G.RADIANT_FINALE_ONE_CODA,t.brd.radiantFinale],[G.WANDERERS_MINUET,t.brd.wanderersCoda],[G.MAGES_BALLAD,t.brd.magesCoda],[G.ARMYS_PAEON,t.brd.armysCoda],[G.NO_MERCY,t.rdm.blackMana],[G.SEARING_LIGHT,t.smn.searing],[G.LIFE_SURGE,t.drg.lifeSurge],[G.LANCE_CHARGE,t.drg.lanceCharge],[G.LIFE_OF_THE_DRAGON,t.drg.lifeOfTheDragon],[G.BATTLE_LITANY,t.drg.battleLitany],[G.POWER_SURGE,t.drg.powerSurge],[G.ENHANCED_PIERCING_TALON,t.drg.enhancedPiercingTalon],[G.DIVINE_MIGHT,t.pld.divineMight],[G.REQUIESCAT,t.pld.requiescat],[G.FIGHT_OR_FLIGHT,t.pld.fightOrFlight],[G.PET,t.resources.petTag],[G.MOON_FLUTE,t.blu.moonflute],[G.WHISTLE,t.blu.whistle],[G.BRISTLE,t.blu.bristle],[G.TINGLEA,t.blu.tinglea],[G.TINGLEB,t.blu.tingleb],[G.SURPANAKHA,t.blu.surpanakha],[G.WINGED_REDEMPTION,t.blu.wingedreprobation],[G.WINGED_REPROBATION,t.blu.wingedreprobation],[G.DARKSIDE,t.drk.darkside]]);return console.assert(n.has(e),`modifier ${e} doesn't have a color!`),n.get(e)??t.text}function yp(e){let t=u.jsx(Ky,{});const n=kt(),l=C.useContext(jn);return e.colorTheme==="Dark"&&(t=u.jsx(Yy,{})),u.jsx("div",{style:{display:"inline-block",cursor:"pointer",verticalAlign:"middle",borderBottom:e.colorTheme===l?"none":"1px solid "+n.text,borderTop:e.colorTheme===l?"1px solid "+n.text:"none"},onClick:()=>e.setColorTheme(e.colorTheme),children:t})}const yN=()=>{var t;const e=ha("colorTheme");return e==="Light"||e==="Dark"?e:(t=window.matchMedia)!=null&&t.call(window,"(prefers-color-scheme: dark)").matches?"Dark":"Light"},jn=C.createContext(yN());function Qy(e){return u.jsx("div",{style:{display:"inline-block",position:"absolute",right:10},children:u.jsxs("div",{style:{display:"inline-block",fontSize:16,position:"relative"},children:[u.jsx(yp,{colorTheme:"Light",setColorTheme:e.setColorTheme}),"|",u.jsx(yp,{colorTheme:"Dark",setColorTheme:e.setColorTheme})]})})}function vN(e,t){let n=e in WA?WA[e]:WA.NEVER;return t>=n.level}const $=()=>e=>e,$y=$()({}),Jy=$()({}),ev=$()({}),tv=$()({}),av=$()({}),nv=$()({}),iv={...ev,...tv,...av},lv=$()({BLIZZARD:{id:142,name:"Blizzard",label:{zh:"冰1",ja:"ブリザド"}},FIRE:{id:141,name:"Fire",label:{zh:"火1",ja:"ファイア"}},BLIZZARD_II:{id:25793,name:"Blizzard 2",label:{zh:"冰2",ja:"ブリザラ"}},FIRE_II:{id:147,name:"Fire 2",label:{zh:"火2",ja:"ファイラ"}},TRANSPOSE:{id:149,name:"Transpose",label:{zh:"星灵移位",ja:"トランス"}},THUNDER_III:{id:153,name:"Thunder 3",label:{zh:"雷3",ja:"サンダガ"}},THUNDER_IV:{id:7420,name:"Thunder 4",label:{zh:"霹雷"}},MANAWARD:{id:157,name:"Manaward",label:{zh:"魔罩",ja:"マバリア"}},MANAFONT:{id:158,name:"Manafont",label:{zh:"魔泉",ja:"マナフォント"}},LEY_LINES:{id:3573,name:"Ley Lines",label:{zh:"黑魔纹",ja:"黒魔紋"}},FIRE_III:{id:152,name:"Fire 3",label:{zh:"火3",ja:"ファイガ"}},BLIZZARD_III:{id:154,name:"Blizzard 3",label:{zh:"冰3",ja:"ブリザガ"}},FREEZE:{id:159,name:"Freeze",label:{zh:"玄冰",ja:"フリーズ"}},FLARE:{id:162,name:"Flare",label:{zh:"核爆",ja:"フレア"}},BLIZZARD_IV:{id:3576,name:"Blizzard 4",label:{zh:"冰4",ja:"ブリザジャ"}},FIRE_IV:{id:3577,name:"Fire 4",label:{zh:"火4",ja:"ファイジャ"}},BETWEEN_THE_LINES:{id:7419,name:"Between the Lines",label:{zh:"魔纹步",ja:"ラインズステップ"}},AETHERIAL_MANIPULATION:{id:155,name:"Aetherial Manipulation",label:{zh:"以太步",ja:"エーテリアルテップ"}},TRIPLECAST:{id:7421,name:"Triplecast",label:{zh:"三连咏唱",ja:"三連魔"}},FOUL:{id:7422,name:"Foul",label:{zh:"秽浊",ja:"ファウル"}},DESPAIR:{id:16505,name:"Despair",label:{zh:"绝望",ja:"デスペア"}},UMBRAL_SOUL:{id:16506,name:"Umbral Soul",label:{zh:"灵极魂",ja:"アンブラルソウル"}},XENOGLOSSY:{id:16507,name:"Xenoglossy",label:{zh:"异言",ja:"ゼノグロシー"}},HIGH_FIRE_II:{id:25794,name:"High Fire 2",label:{zh:"高火2",ja:"ハイファイラ"}},HIGH_BLIZZARD_II:{id:25795,name:"High Blizzard 2",label:{zh:"高冰冻2",ja:"ハイブリザラ"}},AMPLIFIER:{id:25796,name:"Amplifier",label:{zh:"详述",ja:"アンプリファイア"}},PARADOX:{id:25797,name:"Paradox",label:{zh:"悖论",ja:"パラドックス"}},HIGH_THUNDER:{id:36986,name:"High Thunder",label:{zh:"高闪雷",ja:"ハイサンダー"}},HIGH_THUNDER_II:{id:36987,name:"High Thunder 2",label:{zh:"高震雷"}},FLARE_STAR:{id:36989,name:"Flare Star",label:{zh:"耀星",ja:"フレアスター"}},RETRACE:{id:36988,name:"Retrace",label:{zh:"魔纹重置",ja:"魔紋再設置"}}}),ov=$()({cd_TRANSPOSE:{name:"cd_Transpose"},cd_LEY_LINES:{name:"cd_LeyLines"},cd_MANAWARD:{name:"cd_Manaward"},cd_BETWEEN_THE_LINES:{name:"cd_BetweenTheLines"},cd_AETHERIAL_MANIPULATION:{name:"cd_AetherialManipulation"},cd_TRIPLECAST:{name:"cd_Triplecast"},cd_MANAFONT:{name:"cd_Manafont"},cd_AMPLIFIER:{name:"cd_Amplifier"},cd_RETRACE:{name:"cd_Retrace"}}),sv=$()({POLYGLOT:{name:"Polyglot",label:{zh:"通晓"}},ASTRAL_FIRE:{name:"Astral Fire",label:{zh:"星极火"}},UMBRAL_ICE:{name:"Umbral Ice",label:{zh:"灵极冰"}},UMBRAL_HEART:{name:"Umbral Heart",label:{zh:"冰针"}},ENOCHIAN:{name:"Enochian",label:{zh:"天语"}},PARADOX:{name:"Paradox",label:{zh:"悖论"}},ASTRAL_SOUL:{name:"Astral Soul",label:{zh:"星极魂"}}}),fR=$()({LEY_LINES:{name:"Ley Lines",label:{zh:"黑魔纹"},mayBeToggled:!0},TRIPLECAST:{name:"Triplecast",label:{zh:"三重咏唱"},maximumStacks:3},FIRESTARTER:{name:"Firestarter",label:{zh:"火苗"}},THUNDERHEAD:{name:"Thunderhead",label:{zh:"雷砧"}},THUNDER_III:{name:"Thunder III",label:{zh:"暴雷"}},THUNDER_IV:{name:"Thunder IV",label:{zh:"霹雷"}},HIGH_THUNDER:{name:"High Thunder",label:{zh:"高闪雷"}},HIGH_THUNDER_II:{name:"High Thunder II",label:{zh:"高震雷"}},MANAWARD:{name:"Manaward",label:{zh:"魔纹罩"}}}),rv=$()({}),cv=$()({ENHANCED_ENOCHIAN_II:{name:"Enhanced Enochian II",level:78},ENHANCED_POLYGLOT:{name:"Enhanced Polyglot",level:80},ENHANCED_FOUL:{name:"Enhanced Foul",level:80},ASPECT_MASTERY_IV:{name:"Aspect Mastery IV",level:82},ENHANCED_MANAFONT:{name:"Enhanced Manafont",level:84},ENHANCED_ENOCHIAN_III:{name:"Enhanced Enochian III",level:86},ASPECT_MASTERY_V:{name:"Aspect Mastery V",level:90},THUNDER_MASTERY_III:{name:"Thunder Mastery III",level:92},ENHANCED_LEYLINES:{name:"Enhanced Ley Lines",level:96},ENHANCED_ENOCHIAN_IV:{name:"Enhanced Enochian IV",level:96},ENHANCED_POLYGLOT_II:{name:"Enhanced Polyglot II",level:98},ENHANCED_ASTRAL_FIRE:{name:"Enhanced Astral Fire",level:100}}),uv={...sv,...fR,...rv},dv=$()({HEAVY_SHOT:{id:97,name:"Heavy Shot"},QUICK_NOCK:{id:100,name:"Quick Nock"},BLOODLETTER:{id:110,name:"Bloodletter"},BARRAGE:{id:107,name:"Barrage"},RAGING_STRIKES:{id:101,name:"Raging Strikes"},REPELLING_SHOT:{id:112,name:"Repelling Shot"},WIDE_VOLLEY:{id:111,name:"Wide Volley"},MAGES_BALLAD:{id:114,name:"Mage's Ballad"},ARMYS_PAEON:{id:116,name:"Army's Paeon"},RAIN_OF_DEATH:{id:117,name:"Rain Of Death"},BATTLE_VOICE:{id:118,name:"Battle Voice"},EMYPREAL_ARROW:{id:3558,name:"Empyreal Arrow"},WANDERERS_MINUET:{id:3559,name:"Wanderer's Minuet"},IRON_JAWS:{id:3560,name:"Iron Jaws"},WARDENS_PAEAN:{id:3561,name:"Warden's Paean"},SIDEWINDER:{id:3562,name:"Sidewinder"},PITCH_PERFECT:{id:7404,name:"Pitch Perfect"},TROUBADOUR:{id:7405,name:"Troubadour"},CAUSTIC_BITE:{id:7406,name:"Caustic Bite"},STORMBITE:{id:7407,name:"Stormbite"},NATURES_MINNE:{id:7408,name:"Nature's Minne"},REFULGENT_ARROW:{id:7409,name:"Refulgent Arrow"},SHADOWBITE:{id:16494,name:"Shadowbite"},BURST_SHOT:{id:16495,name:"Burst Shot"},APEX_ARROW:{id:16496,name:"Apex Arow"},LADONSBITE:{id:25783,name:"Ladonsbite"},BLAST_ARROW:{id:25784,name:"Blast Arrow"},RADIANT_FINALE:{id:25785,name:"Radiant Finale"},HEARTBREAK_SHOT:{id:36975,name:"Heartbreak Shot"},RESONANT_ARROW:{id:36976,name:"Resonant Arrow"},RADIANT_ENCORE:{id:36977,name:"Radiant Encore"}}),fv=$()({cd_RAGING_STRIKES:{name:"cd_RagingStrikes"},cd_BARRAGE:{name:"cd_Barrage"},cd_EMPYREAL_ARROW:{name:"cd_EmpyrealArrow"},cd_HEARTBREAK_SHOT:{name:"cd_HeartbreakShot"},cd_SIDEWINDER:{name:"cd_Sidewinder"},cd_WANDERERS_MINUET:{name:"cd_WanderersMinuet"},cd_MAGES_BALLAD:{name:"cd_MagesBallad"},cd_ARMYS_PAEON:{name:"cd_ArmysPaeon"},cd_WARDENS_PAEAN:{name:"cd_WardensPaean"},cd_NATURES_MINNE:{name:"cd_NaturesMinne"},cd_REPELLING_SHOT:{name:"cd_RepellingShot"},cd_BATTLE_VOICE:{name:"cd_BattleVoice"},cd_RADIANT_FINALE:{name:"cd_RadiantFinale"},cd_TROUBADOUR:{name:"cd_Troubadour"},cd_PITCH_PERFECT:{name:"cd_PitchPerfect"}}),hv=$()({SONG_TIMER:{name:"SongTimer"},SOUL_VOICE:{name:"Soul Voice"},PITCH_PERFECT:{name:"Pitch Perfect"},REPERTOIRE:{name:"Repertoire"},WANDERERS_CODA:{name:"Wanderer's Coda"},MAGES_CODA:{name:"Mage's Coda"},ARMYS_CODA:{name:"Army's Coda"}}),hR=$()({HAWKS_EYE:{name:"Hawk's Eye"},RAGING_STRIKES:{name:"Raging Strikes"},BARRAGE:{name:"Barrage"},ARMYS_MUSE:{name:"Army's Muse"},ARMYS_ETHOS:{name:"Army's Ethos"},BLAST_ARROW_READY:{name:"Blast Arrow Ready"},RESONANT_ARROW_READY:{name:"Resonant Arrow Ready"},RADIANT_ENCORE_READY:{name:"Radiant Encore Ready"},CAUSTIC_BITE:{name:"Caustic Bite"},STORMBITE:{name:"Stormbite"},MAGES_BALLAD:{name:"Mage's Ballad"},ARMYS_PAEON:{name:"Army's Paeon"},WANDERERS_MINUET:{name:"Wanderer's Minuet"},BATTLE_VOICE:{name:"Battle Voice"},WARDENS_PAEAN:{name:"Warden's Paean"},TROUBADOUR:{name:"Troubadour"},NATURES_MINNE:{name:"Nature's Minne"},RADIANT_FINALE:{name:"Radiant Finale"}}),Ev=$()({RADIANT_CODA:{name:"Radiant Coda"},MUSE_REPERTOIRE:{name:"Muse Repertoire"},ETHOS_REPERTOIRE:{name:"Ethos Repertoire"}}),Av=$()({WIDE_VOLLEY_MASTERY:{name:"Wide Volley Mastery",level:72},BITE_MASTERY_II:{name:"Bite Mastery II",level:76},HEAVY_SHOT_MASTERY:{name:"Heavy Shot Mastery",level:76},ENHANCED_ARMYS_PAEON:{name:"Enhanced Army's Paeon",level:78},SOUL_VOICE:{name:"Soul Voice",level:80},QUICK_NOCK_MASTERY:{name:"Quick Nock Mastery",level:82},ENHANCED_BLOODLETTER:{name:"Enhanced Bloodletter",level:84},ENHANCED_APEX_ARROW:{name:"Enhanced Apex Arrow",level:86},ENHANCED_TROUBADOUR:{name:"Enhanced Troubadour",level:88},MINSTRELS_CODA:{name:"Minstrel's Coda",level:90},BLOODLETTER_MASTERY:{name:"Bloodletter Mastery",level:92},RANGED_MASTERY:{name:"Ranged Mastery",level:94},ENHANCED_BARRAGE:{name:"Enhanced Barrage",level:96},ENHANCED_RADIANT_FINALE:{name:"Enhanced Radiant Finale",level:100}}),mv={...hv,...hR,...Ev},Rv=$()({STANDARD_FINISH:{id:16003,name:"Standard Finish",label:{zh:"标准舞步结束"}},SINGLE_STANDARD_FINISH:{id:16191,name:"Single Standard Finish",label:{zh:"单色标准舞步结束"}},DOUBLE_STANDARD_FINISH:{id:16192,name:"Double Standard Finish",label:{zh:"双色标准舞步结束"}},FINISHING_MOVE:{id:36984,name:"Finishing Move",label:{zh:"结束动作"}},LAST_DANCE:{id:36983,name:"Last Dance",label:{zh:"落幕舞"}},TECHNICAL_FINISH:{id:16004,name:"Technical Finish",label:{zh:"技巧舞步结束"}},SINGLE_TECHNICAL_FINISH:{id:16193,name:"Single Technical Finish",label:{zh:"单色技巧舞步结束"}},DOUBLE_TECHNICAL_FINISH:{id:16194,name:"Double Technical Finish",label:{zh:"双色技巧舞步结束"}},TRIPLE_TECHNICAL_FINISH:{id:16195,name:"Triple Technical Finish",label:{zh:"三色技巧舞步结束"}},QUADRUPLE_TECHNICAL_FINISH:{id:16196,name:"Quadruple Technical Finish",label:{zh:"四色技巧舞步结束"}},TILLANA:{id:25790,name:"Tillana",label:{zh:"提拉纳"}},CASCADE:{id:15989,name:"Cascade",label:{zh:"瀑泻"}},FOUNTAIN:{id:15990,name:"Fountain",label:{zh:"喷泉"}},REVERSE_CASCADE:{id:15991,name:"Reverse Cascade",label:{zh:"逆瀑泻"}},FOUNTAINFALL:{id:15992,name:"Fountainfall",label:{zh:"坠喷泉"}},WINDMILL:{id:15993,name:"Windmill",label:{zh:"风车"}},BLADESHOWER:{id:15994,name:"Bladeshower",label:{zh:"落刃雨"}},RISING_WINDMILL:{id:15995,name:"Rising Windmill",label:{zh:"升风车"}},BLOODSHOWER:{id:15996,name:"Bloodshower",label:{zh:"落血雨"}},STANDARD_STEP:{id:15997,name:"Standard Step",label:{zh:"标准舞步"}},TECHNICAL_STEP:{id:15998,name:"Technical Step",label:{zh:"技巧舞步"}},EMBOITE:{id:15999,name:"Emboite",label:{zh:"蔷薇曲舞步"}},ENTRECHAT:{id:16e3,name:"Entrechat",label:{zh:"小鸟交叠跳"}},JETE:{id:16001,name:"Jete",label:{zh:"绿叶小踢腿"}},PIROUETTE:{id:16002,name:"Pirouette",label:{zh:"金冠趾尖转"}},SABER_DANCE:{id:16005,name:"Saber Dance",label:{zh:"剑舞"}},DANCE_OF_THE_DAWN:{id:36985,name:"Dance of the Dawn",label:{zh:"拂晓舞"}},CLOSED_POSITION:{id:16006,name:"Closed Position",label:{zh:"闭式舞姿"}},FAN_DANCE:{id:16007,name:"Fan Dance",label:{zh:"扇舞·序"}},FAN_DANCE_II:{id:16008,name:"Fan Dance II",label:{zh:"扇舞·破"}},FAN_DANCE_III:{id:16009,name:"Fan Dance III",label:{zh:"扇舞·急"}},FAN_DANCE_IV:{id:25791,name:"Fan Dance IV",label:{zh:"扇舞·终"}},EN_AVANT:{id:16010,name:"En Avant",label:{zh:"前冲步"}},DEVILMENT:{id:16011,name:"Devilment",label:{zh:"进攻之探戈"}},STARFALL_DANCE:{id:25792,name:"Starfall Dance",label:{zh:"流星舞"}},SHIELD_SAMBA:{id:16012,name:"Shield Samba",label:{zh:"防守之桑巴"}},FLOURISH:{id:16013,name:"Flourish",label:{zh:"百花争艳"}},IMPROVISATION:{id:16014,name:"Improvisation",label:{zh:"即兴表演"}},IMPROVISED_FINISH:{id:25789,name:"Improvised Finish",label:{zh:"即兴表演结束"}},CURING_WALTZ:{id:16015,name:"Curing Waltz",label:{zh:"治疗之华尔兹"}},ENDING:{id:18073,name:"Ending",label:{zh:"解除闭式舞姿"}}}),Tv=$()({cd_STANDARD_STEP:{name:"cd_StandardStep"},cd_TECHNICAL_STEP:{name:"cd_TechnicalStep"},cd_CLOSED_POSITION:{name:"cd_ClosedPosition"},cd_FAN_DANCE:{name:"cd_FanDance"},cd_FAN_DANCE_II:{name:"cd_FanDanceII",label:{zh:"CD：扇舞·破"}},cd_FAN_DANCE_III:{name:"cd_FanDanceIII",label:{zh:"CD：扇舞·急"}},cd_FAN_DANCE_IV:{name:"cd_FanDanceIV",label:{zh:"CD：扇舞·终"}},cd_EN_AVANT:{name:"cd_EnAvant"},cd_DEVILMENT:{name:"cd_Devilment"},cd_SHIELD_SAMBA:{name:"cd_ShieldSamba"},cd_FLOURISH:{name:"cd_Flourish"},cd_IMPROVISATION:{name:"cd_Improvisation"},cd_IMPROVISED_FINISH:{name:"cd_ImprovisedFinish"},cd_CURING_WALTZ:{name:"cd_CuringWaltz"},cd_ENDING:{name:"cd_Ending"}}),Sv=$()({ESPRIT_GAUGE:{name:"EspritGauge",label:{zh:"伶俐量值"}},FEATHER_GAUGE:{name:"Feathers",label:{zh:"幻扇"}},STANDARD_DANCE:{name:"Standard Dance",label:{zh:"标准舞步"}},TECHNICAL_DANCE:{name:"Technical Dance",label:{zh:"技巧舞步"}}}),ER=$()({SILKEN_SYMMETRY:{name:"Silken Symmetry",label:{zh:"对称投掷"}},SILKEN_FLOW:{name:"Silken Flow",label:{zh:"非对称投掷"}},FLOURISHING_SYMMETRY:{name:"Flourishing Symmetry",label:{zh:"对称投掷·百花争艳"}},FLOURISHING_FLOW:{name:"Flourishing Flow",label:{zh:"非对称投掷·百花争艳"}},THREEFOLD_FAN_DANCE:{name:"Threefold Fan Dance",label:{zh:"扇舞·急预备"}},FOURFOLD_FAN_DANCE:{name:"Fourfold Fan Dance",label:{zh:"扇舞·终预备"}},FINISHING_MOVE_READY:{name:"Finishing Move Ready",label:{zh:"结束动作预备"}},FLOURISHING_STARFALL:{name:"Flourishing Starfall",label:{zh:"流星舞预备"}},STANDARD_STEP:{name:"Standard Step",label:{zh:"标准舞步"},mayNotBeCanceled:!0},TECHNICAL_STEP:{name:"Technical Step",label:{zh:"技巧舞步"},mayNotBeCanceled:!0},LAST_DANCE_READY:{name:"Last Dance Ready",label:{zh:"落幕舞预备"}},DANCE_OF_THE_DAWN_READY:{name:"Dance of the Dawn Ready",label:{zh:"拂晓舞预备"}},FLOURISHING_FINISH:{name:"Flourishing Finish",label:{zh:"提拉纳预备"}},SHIELD_SAMBA:{name:"Shield Samba",label:{zh:"防守之桑巴"}},IMPROVISATION:{name:"Improvisation",label:{zh:"即兴表演"},mayNotBeCanceled:!0},RISING_RHYTHM:{name:"Rising Rhythm",label:{zh:"舞动的热情"},maximumStacks:4},IMPROVISATION_REGEN:{name:"Improvisation Regen",label:{zh:"享受即兴表演"}},IMPROVISED_FINISH:{name:"Improvised Finish",label:{zh:"即兴表演结束"}},DEVILMENT:{name:"Devilment",label:{zh:"进攻之探戈"}},TECHNICAL_FINISH:{name:"Technical Finish",label:{zh:"技巧舞步结束"}},ESPRIT:{name:"Esprit",label:{zh:"伶俐"},mayNotBeCanceled:!0},STANDARD_FINISH:{name:"Standard Finish",label:{zh:"标准舞步结束"}},CLOSED_POSITION:{name:"Closed Position",label:{zh:"闭式舞姿"},mayNotBeCanceled:!0},DANCE_PARTNER:{name:"Dance Partner",label:{zh:"舞伴"}},STANDARD_FINISH_PARTNER:{name:"Standard Finish Partner",label:{zh:"舞伴小舞buff"}},ESPRIT_PARTNER:{name:"Esprit Partner",label:{zh:"舞伴伶俐buff"}},ESPRIT_TECHNICAL:{name:"Esprit Technical",label:{zh:"大舞伶俐buff"}}}),gv=$()({CASCADE_COMBO:{name:"CascadeCombo",label:{zh:"瀑泻连击"}},WINDMILL_COMBO:{name:"WindmillCombo",label:{zh:"风车连击"}},STANDARD_BONUS:{name:"StandardBonus",label:{zh:"小舞连击"}},TECHNICAL_BONUS:{name:"TechnicalBonus",label:{zh:"大舞连击"}}}),_v=$()({ESPRIT:{name:"Esprit",level:76},ENHANCED_EN_AVANT_II:{name:"Enhanced En Avant II",level:78},ENHANCED_TECHNICAL_FINISH:{name:"Enhanced Technical Finish",level:82},ENHANCED_ESPRIT:{name:"Enhanced Esprit",level:84},ENHANCED_FLOURISH:{name:"Enhanced Flourish",level:86},ENHANCED_SHIELD_SAMBA:{name:"Enhanced Shield Samba",level:88},ENHANCED_DEVILMENT:{name:"Enhanced Devilment",level:90},ENHANCED_STANDARD_FINISH:{name:"Enhanced Standard Finish",level:92},DYNAMIC_DANCER:{name:"Dynamic Dancer",level:94},ENHANCED_FLOURISH_II:{name:"Enhanced Flourish II",level:96},ENHANCED_TECHNICAL_FINISH_II:{name:"Enhanced Technical Finish II",level:100}}),pv={...Sv,...ER,...gv},Iv=$()({PIERCING_TALON:{id:90,name:"Piercing Talon"},TRUE_THRUST:{id:75,name:"True Thrust"},RAIDEN_THRUST:{id:16479,name:"Raiden Thrust"},DISEMBOWEL:{id:87,name:"Disembowel"},SPIRAL_BLOW:{id:36955,name:"Spiral Blow"},CHAOS_THRUST:{id:88,name:"Chaos Thrust"},CHAOTIC_SPRING:{id:25772,name:"Chaotic Spring"},WHEELING_THRUST:{id:3556,name:"Wheeling Thrust"},VORPAL_THRUST:{id:78,name:"Vorpal Thrust"},LANCE_BARRAGE:{id:36954,name:"Lance Barrage"},FULL_THRUST:{id:84,name:"Full Thrust"},HEAVENS_THRUST:{id:25771,name:"Heavens' Thrust"},FANG_AND_CLAW:{id:3554,name:"Fang and Claw"},DRAKESBANE:{id:36952,name:"Drakesbane"},DOOM_SPIKE:{id:86,name:"Doom Spike"},DRACONIAN_FURY:{id:25770,name:"Draconian Fury"},SONIC_THRUST:{id:7397,name:"Sonic Thrust"},COERTHAN_TORMENT:{id:16477,name:"Coerthan Torment"},LIFE_SURGE:{id:83,name:"Life Surge"},LANCE_CHARGE:{id:85,name:"Lance Charge"},JUMP:{id:92,name:"Jump"},HIGH_JUMP:{id:16478,name:"High Jump"},MIRAGE_DIVE:{id:7339,name:"Mirage Dive"},DRAGONFIRE_DIVE:{id:96,name:"Dragonfire Dive"},RISE_OF_THE_DRAGON:{id:36953,name:"Rise of the Dragon"},BATTLE_LITANY:{id:3557,name:"Battle Litany"},WYRMWIND_THRUST:{id:25773,name:"Wyrmwind Thrust"},GEIRSKOGUL:{id:3555,name:"Geirskogul"},NASTROND:{id:7400,name:"Nastrond"},STARDIVER:{id:16480,name:"Stardiver"},STARCROSS:{id:36956,name:"Starcross"},ELUSIVE_JUMP:{id:94,name:"Elusive Jump"},WINGED_GLIDE:{id:36951,name:"Winged Glide"}}),Nv=$()({cd_LIFE_SURGE:{name:"cd_LifeSurge"},cd_LANCE_CHARGE:{name:"cd_LanceCharge"},cd_JUMP:{name:"cd_Jump"},cd_HIGH_JUMP:{name:"cd_HighJump"},cd_ELUSIVE_JUMP:{name:"cd_ElusiveJump"},cd_WINGED_GLIDE:{name:"cd_WingedGlide"},cd_DRAGONFIRE_DIVE:{name:"cd_DragonfireDive"},cd_BATTLE_LITANY:{name:"cd_BattleLitany"},cd_GEIRSKOGUL:{name:"cd_Geirskogul"},cd_MIRAGE_DIVE:{name:"cd_MirageDive"},cd_NASTROND:{name:"cd_Nastrond"},cd_STARDIVER:{name:"cd_Stardiver"},cd_WYRMWIND_THRUST:{name:"cd_WyrmwindThrust"},cd_RISE_OF_THE_DRAGON:{name:"cd_RiseOfTheDragon"},cd_STARCROSS:{name:"cd_Starcross"}}),Cv=$()({LIFE_OF_THE_DRAGON:{name:"Life of the Dragon"},FIRSTMINDS_FOCUS:{name:"Firstminds' Focus"}}),AR=$()({LIFE_SURGE:{name:"Life Surge"},ENHANCED_PIERCING_TALON:{name:"Enhanced Piercing Talon"},POWER_SURGE:{name:"Power Surge"},LANCE_CHARGE:{name:"Lance Charge"},DIVE_READY:{name:"Dive Ready"},CHAOS_THRUST_DOT:{name:"Chaos Thrust DoT"},CHAOTIC_SPRING_DOT:{name:"Chaotic Spring DoT"},DRAGONS_FLIGHT:{name:"Dragon's Flight"},BATTLE_LITANY:{name:"Battle Litany"},NASTROND_READY:{name:"Nastrond Ready"},DRACONIAN_FIRE:{name:"Draconian Fire"},STARCROSS_READY:{name:"Starcross Ready"}}),bv=$()({DRG_CHAOS_COMBO_TRACKER:{name:"DRG Chaos Combo"},DRG_HEAVENS_COMBO_TRACKER:{name:"DRG Heavens Combo"},DRG_AOE_COMBO_TRACKER:{name:"DRG AOE Combo"}}),Ov=$()({JUMP_MASTERY:{name:"Jump Mastery",level:74},LANCE_MASTERY:{name:"Lance Mastery",level:76},ENHANCED_COERTHAN_TORMENT:{name:"Enhanced Coerthan Torment",level:82},ENHANCED_WINGED_GLIDE:{name:"Enhanced Winged Glide",level:84},LANCE_MASTERY_II:{name:"Lance Mastery II",level:86},ENHANCED_LIFE_SURGE:{name:"Enhanced Life Surge",level:88},LANCE_MASTERY_III:{name:"Lance Mastery III",level:90},ENHANCED_DRAGONFIRE_DIVE:{name:"Enhanced Dragonfire Dive",level:92},MELEE_MASTERY_DRG:{name:"Melee Mastery DRG",level:94},LANCE_MASTERY_IV:{name:"Lance Mastery IV",level:96},ENHANCED_STARDIVER:{name:"Enhanced Stardiver",level:100}}),Dv={...Cv,...AR,...bv},yv=$()({HARD_SLASH:{id:3617,name:"Hard Slash",label:{zh:"重斩"}},SYPHON_STRIKE:{id:3623,name:"Syphon Strike",label:{zh:"吸收斩"}},UNLEASH:{id:3621,name:"Unleash",label:{zh:"释放"}},GRIT:{id:3629,name:"Grit",label:{zh:"深恶痛绝"}},RELEASE_GRIT:{id:32067,name:"Release Grit",label:{zh:"解除深恶痛绝"}},UNMEND:{id:3624,name:"Unmend",label:{zh:"伤残"}},SOULEATER:{id:3632,name:"Souleater",label:{zh:"噬魂斩"}},FLOOD_OF_DARKNESS:{name:"Flood of Darkness",label:{zh:"暗黑波动"}},BLOOD_WEAPON:{id:3625,name:"Blood Weapon",label:{zh:"嗜血"}},SHADOW_WALL:{id:3636,name:"Shadow Wall",label:{zh:"暗影墙"}},STALWART_SOUL:{id:16468,name:"Stalwart Soul",label:{zh:"刚魂"}},EDGE_OF_DARKNESS:{name:"Edge of Darkness",label:{zh:"暗黑锋"}},DARK_MIND:{id:3634,name:"Dark Mind",label:{zh:"弃明投暗"}},LIVING_DEAD:{id:3638,name:"Living Dead",label:{zh:"行尸走肉"}},SALTED_EARTH:{id:3639,name:"Salted Earth",label:{zh:"腐秽大地"}},SHADOWSTRIDE:{id:36926,name:"Shadowstride",label:{zh:"暗影步"}},ABYSSAL_DRAIN:{id:3641,name:"Abyssal Drain",label:{zh:"吸血深渊"}},CARVE_AND_SPIT:{id:3643,name:"Carve and Spit",label:{zh:"精雕怒斩"}},BLOODSPILLER:{id:7392,name:"Bloodspiller",label:{zh:"血溅"}},QUIETUS:{id:7391,name:"Quietus",label:{zh:"寂灭"}},DARK_MISSIONARY:{id:16471,name:"Dark Missionary",label:{zh:"暗黑布道"}},DELIRIUM:{id:7390,name:"Delirium",label:{zh:"血乱"}},THE_BLACKEST_NIGHT:{id:7393,name:"The Blackest Night",label:{zh:"至黑之夜"}},THE_BLACKEST_NIGHT_POP:{name:"Pop The Blackest Night",label:{zh:"至黑之夜破盾"}},FLOOD_OF_SHADOW:{id:16469,name:"Flood of Shadow",label:{zh:"暗影波动"}},EDGE_OF_SHADOW:{id:16470,name:"Edge of Shadow",label:{zh:"暗影锋"}},LIVING_SHADOW:{id:16472,name:"Living Shadow",label:{zh:"掠影示现"}},OBLATION:{id:25754,name:"Oblation",label:{zh:"献奉"}},SALT_AND_DARKNESS:{id:25755,name:"Salt and Darkness",label:{zh:"腐秽黑暗"}},SHADOWBRINGER:{id:25757,name:"Shadowbringer",label:{zh:"暗影使者"}},SHADOWED_VIGIL:{id:36927,name:"Shadowed Vigil",label:{zh:"暗影卫"}},SCARLET_DELIRIUM:{id:36928,name:"Scarlet Delirium",label:{zh:"血红乱"}},COMEUPPANCE:{id:36929,name:"Comeuppance",label:{zh:"报应"}},TORCLEAVER:{id:36930,name:"Torcleaver",label:{zh:"戮山"}},IMPALEMENT:{id:36931,name:"Impalement",label:{zh:"刺穿"}},DISESTEEM:{id:36932,name:"Disesteem",label:{zh:"掠影的蔑视"}},ABYSSAL_DRAIN_PET:{id:17904,name:"Abyssal Drain (Esteem)",label:{zh:"吸血深渊（掠影）"}},SHADOWSTRIDE_PET:{id:38512,name:"Shadowstride (Esteem)",label:{zh:"暗影步（掠影）"}},SHADOWBRINGER_PET:{id:25881,name:"Shadowbringer (Esteem)",label:{zh:"暗影使者（掠影）"}},EDGE_OF_SHADOW_PET:{id:17908,name:"Edge of Shadow (Esteem)",label:{zh:"暗影锋（掠影）"}},FLOOD_OF_SHADOW_PET:{name:"Flood of Shadow (Esteem)",label:{zh:"暗影波动（掠影）"}},BLOODSPILLER_PET:{id:17909,name:"Bloodspiller (Esteem)",label:{zh:"血溅（掠影）"}},CARVE_AND_SPIT_PET:{name:"Carve and Spit (Esteem)",label:{zh:"精雕怒斩（掠影）"}},DISESTEEM_PET:{id:36933,name:"Disesteem (Esteem)",label:{zh:"掠影的蔑视（掠影）"}}}),vv=$()({cd_GRIT:{name:"cd_Grit"},cd_RELEASE_GRIT:{name:"cd_ReleaseGrit"},cd_FLOOD_OF_DARKNESS:{name:"cd_FloodOfDarkness"},cd_SHADOW_WALL:{name:"cd_ShadowWall"},cd_DARK_MIND:{name:"cd_DarkMind"},cd_LIVING_DEAD:{name:"cd_LivingDead"},cd_SALTED_EARTH:{name:"cd_SaltedEarth"},cd_SHADOWSTRIDE:{name:"cd_Shadowstride"},cd_ABYSSAL_DRAIN:{name:"cd_AbyssalDrain"},cd_DARK_MISSIONARY:{name:"cd_DarkMissionary"},cd_DELIRIUM:{name:"cd_Delirium"},cd_THE_BLACKEST_NIGHT:{name:"cd_TheBlackestNight"},cd_THE_BLACKEST_NIGHT_POP:{name:"cd_TheBlackestNightPop"},cd_LIVING_SHADOW:{name:"cd_LivingShadow"},cd_OBLATION:{name:"cd_Oblation"},cd_SALT_AND_DARKNESS:{name:"cd_SaltAndDarkness"},cd_SHADOWBRINGER:{name:"cd_Shadowbringer"},cd_POP_TBN:{name:"cd_PopTBN"}}),Mv=$()({DARKSIDE:{name:"Darkside",label:{zh:"暗黑"}},BLOOD_GAUGE:{name:"Blood Gauge",label:{zh:"暗血"}}}),mR=$()({SALTED_EARTH:{name:"Salted Earth",mayBeToggled:!0,label:{zh:"腐秽大地"}},GRIT:{name:"Grit",label:{zh:"深恶痛绝"}},SHADOW_WALL:{name:"Shadow Wall",label:{zh:"暗影墙"}},DARK_MIND:{name:"Dark Mind",label:{zh:"弃明投暗"}},LIVING_DEAD:{name:"Living Dead",label:{zh:"行尸走肉"}},WALKING_DEAD:{name:"Walking Dead",label:{zh:"死而不僵"}},UNDEAD_REBIRTH:{name:"Undead Rebirth",label:{zh:"出死入生"}},DARK_MISSIONARY:{name:"Dark Missionary",label:{zh:"暗黑布道"}},DELIRIUM:{name:"Delirium",maximumStacks:3,label:{zh:"血乱"}},BLOOD_WEAPON:{name:"Blood Weapon",maximumStacks:3,label:{zh:"嗜血"}},BLACKEST_NIGHT:{name:"Blackest Night",label:{zh:"至黑之夜"}},SCORN:{name:"Scorn",label:{zh:"掠影的蔑视预备"}},OBLATION:{name:"Oblation",label:{zh:"献奉"}},SHADOWED_VIGIL:{name:"Shadowed Vigil",label:{zh:"暗影卫"}},VIGILANT:{name:"Vigilant",label:{zh:"影卫"}}}),Lv=$()({DRK_COMBO_TRACKER:{name:"DRK Combo",label:{zh:"重斩连连击状态"}},DRK_AOE_COMBO_TRACKER:{name:"DRK AOE Combo",label:{zh:"AOE连连击状态"}},DRK_DELIRIUM_COMBO_TRACKER:{name:"DRK Delirium Combo",label:{zh:"血红乱连连击状态"}},DARK_ARTS:{name:"Dark Arts",label:{zh:"暗技"}},ESTEEM_TRACKER:{name:"Esteem Attacks",label:{zh:"掠影攻击"}}}),Hv=$()({DAKRSIDE_MASTERY:{name:"Darkside Mastery",level:74},ENHANCED_UNMEND:{name:"Enhanced Unmend",level:84},ENHANCED_LIVING_SHADOW:{name:"Enhanced Living Shadow",level:88},ENHANCED_LIVING_SHADOW_II:{name:"Enhanced Living Shadow II",level:90},SHADOW_WALL_MASTERY:{name:"Shadow Wall Mastery",level:92},ENHANCED_DELIRIUM:{name:"Enhanced Delirium",level:96},ENHANCED_LIVING_SHADOW_III:{name:"Enhanced Living Shadow III",level:100}}),xv={...Mv,...mR,...Lv},Uv=$()({LIGHTNING_SHOT:{id:16143,name:"Lightning Shot",label:{zh:"闪雷弹"}},KEEN_EDGE:{id:16137,name:"Keen Edge",label:{zh:"利刃斩"}},BRUTAL_SHELL:{id:16139,name:"Brutal Shell",label:{zh:"残暴弹"}},SOLID_BARREL:{id:16145,name:"Solid Barrel",label:{zh:"迅连斩"}},DEMON_SLICE:{id:16141,name:"Demon Slice",label:{zh:"恶魔切"}},DEMON_SLAUGHTER:{id:16149,name:"Demon Slaughter",label:{zh:"恶魔杀"}},BURST_STRIKE:{id:16162,name:"Burst Strike",label:{zh:"爆发击"}},FATED_CIRCLE:{id:16163,name:"Fated Circle",label:{zh:"命运之环"}},BLOODFEST:{id:16164,name:"Bloodfest",label:{zh:"血壤"}},NO_MERCY:{id:16138,name:"No Mercy",label:{zh:"无情"}},SONIC_BREAK:{id:16153,name:"Sonic Break",label:{zh:"音速破"}},GNASHING_FANG:{id:16146,name:"Gnashing Fang",label:{zh:"烈牙"}},SAVAGE_CLAW:{id:16147,name:"Savage Claw",label:{zh:"猛兽爪"}},WICKED_TALON:{id:16150,name:"Wicked Talon",label:{zh:"凶禽爪"}},DOUBLE_DOWN:{id:25760,name:"Double Down",label:{zh:"倍攻"}},REIGN_OF_BEASTS:{id:36937,name:"Reign of Beasts",label:{zh:"崛起之心"}},NOBLE_BLOOD:{id:36938,name:"Noble Blood",label:{zh:"支配之心"}},LION_HEART:{id:36939,name:"Lion Heart",label:{zh:"终结之心"}},CONTINUATION:{id:16155,name:"Continuation",label:{zh:"续剑"}},HYPERVELOCITY:{id:25759,name:"Hypervelocity",label:{zh:"超高速"}},FATED_BRAND:{id:36936,name:"Fated Brand",label:{zh:"命运之印"}},JUGULAR_RIP:{id:16156,name:"Jugular Rip",label:{zh:"撕喉"}},ABDOMEN_TEAR:{id:16157,name:"Abdomen Tear",label:{zh:"裂膛"}},EYE_GOUGE:{id:16158,name:"Eye Gouge",label:{zh:"穿目"}},DANGER_ZONE:{id:16144,name:"Danger Zone",label:{zh:"危险领域"}},BLASTING_ZONE:{id:16165,name:"Blasting Zone",label:{zh:"爆破领域"}},BOW_SHOCK:{id:16159,name:"Bow Shock",label:{zh:"弓形冲波"}},TRAJECTORY:{id:36934,name:"Trajectory",label:{zh:"弹道"}},HEART_OF_STONE:{id:16161,name:"Heart of Stone",label:{zh:"石之心"}},HEART_OF_CORUNDUM:{id:25758,name:"Heart of Corundum",label:{zh:"刚玉之心"}},SUPERBOLIDE:{id:16152,name:"Superbolide",label:{zh:"超火流星"}},CAMOUFLAGE:{id:16140,name:"Camouflage",label:{zh:"伪装"}},NEBULA:{id:16148,name:"Nebula",label:{zh:"星云"}},GREAT_NEBULA:{id:36935,name:"Great Nebula",label:{zh:"大星云"}},HEART_OF_LIGHT:{id:16160,name:"Heart of Light",label:{zh:"光之心"}},AURORA:{id:16151,name:"Aurora",label:{zh:"极光"}},ROYAL_GUARD:{id:16142,name:"Royal Guard",label:{zh:"王室亲卫"}},RELEASE_ROYAL_GUARD:{id:32068,name:"Release Royal Guard",label:{zh:"解除王室亲卫"}}}),kv=$()({cd_NO_MERCY:{name:"cd_NoMercy"},cd_BLOODFEST:{name:"cd_Bloodfest"},cd_CAMOUFLAGE:{name:"cd_Camouflage"},cd_ROYAL_GUARD:{name:"cd_RoyalGuard"},cd_RELEASE_ROYAL_GUARD:{name:"cd_ReleaseRoyalGuard"},cd_DANGER_ZONE:{name:"cd_DangerZone"},cd_BLASTING_ZONE:{name:"cd_BlastingZone"},cd_NEBULA:{name:"cd_Nebula"},cd_GREAT_NEBULA:{name:"cd_GreatNebula"},cd_AURORA:{name:"cd_Aurora"},cd_SUPERBOLIDE:{name:"cd_Superbolide"},cd_TRAJECTORY:{name:"cd_Trajectory"},cd_GNASHING_FANG:{name:"cd_GnashingFang"},cd_BOW_SHOCK:{name:"cd_BowShock"},cd_HEART_OF_LIGHT:{name:"cd_HeartOfLight"},cd_HEART_OF_STONE:{name:"cd_HeartOfStone"},cd_HEART_OF_CORUNDUM:{name:"cd_HeartOfCorundum"},cd_DOUBLE_DOWN:{name:"cd_DoubleDown"},cd_CONTINUATION:{name:"cd_Continuation"},cd_HYPERVELOCITY:{name:"cd_Hypervelocity"},cd_FATED_BRAND:{name:"cd_FatedBrand"},cd_JUGULAR_RIP:{name:"cd_JugularRip"},cd_ABDOMEN_TEAR:{name:"cd_AbdomenTear"},cd_EYE_GOUGE:{name:"cd_EyeGouge"}}),Pv=$()({POWDER_GAUGE:{name:"Powder Gauge",label:{zh:"晶壤"}}}),RR=$()({NO_MERCY:{name:"No Mercy",label:{zh:"无情"}},AURORA:{name:"Aurora",label:{zh:"极光"}},BOW_SHOCK_DOT:{name:"Bow Shock DoT",label:{zh:"弓形冲波"}},CAMOUFLAGE:{name:"Camouflage",label:{zh:"伪装"}},HEART_OF_CORUNDUM:{name:"Heart of Corundum",label:{zh:"刚玉之心"}},CLARITY_OF_CORUNDUM:{name:"Clarity of Corundum",label:{zh:"刚玉之清"}},CATHARSIS_OF_CORUNDUM:{name:"Catharsis of Corundum",label:{zh:"刚玉之净"}},NEBULA:{name:"Nebula",label:{zh:"星云"}},GREAT_NEBULA:{name:"Great Nebula",label:{zh:"大星云"}},HEART_OF_LIGHT:{name:"Heart of Light",label:{zh:"光之心"}},HEART_OF_STONE:{name:"Heart of Stone",label:{zh:"石之心"}},READY_TO_BLAST:{name:"Ready to Blast",label:{zh:"超高速预备"}},READY_TO_BREAK:{name:"Ready to Break",label:{zh:"音速破预备"}},READY_TO_GOUGE:{name:"Ready to Gouge",label:{zh:"穿目预备"}},READY_TO_RAZE:{name:"Ready to Raze",label:{zh:"命运之印预备"}},READY_TO_REIGN:{name:"Ready to Reign",label:{zh:"心有灵狮"}},READY_TO_RIP:{name:"Ready to Rip",label:{zh:"撕喉预备"}},READY_TO_TEAR:{name:"Ready to Tear",label:{zh:"裂膛预备"}},ROYAL_GUARD:{name:"Royal Guard",label:{zh:"王室亲卫"}},SONIC_BREAK_DOT:{name:"Sonic Break DoT",label:{zh:"音速破"}},SUPERBOLIDE:{name:"Superbolide",label:{zh:"超火流星"}},BRUTAL_SHELL:{name:"Brutal Shell",label:{zh:"残暴弹"}}}),Gv=$()({GNB_COMBO_TRACKER:{name:"GNB Combo",label:{zh:"常规连"}},GNB_AOE_COMBO_TRACKER:{name:"GNB AOE Combo",label:{zh:"AOE连"}},GNB_GNASHING_COMBO_TRACKER:{name:"GNB Gnashing Combo",label:{zh:"续剑连"}},GNB_REIGN_COMBO_TRACKER:{name:"GNB Reign Combo",label:{zh:"狮心连"}}}),wv=$()({DANGER_ZONE_MASTERY:{name:"Danger Zone Mastery",level:80},HEART_OF_STONE_MASTERY:{name:"Heart Of Stone Mastery",level:82},ENHANCED_AURORA:{name:"Enhanced Aurora",level:84},ENHANCED_CONTINUATION:{name:"Enhanced Continuation",level:86},CARTRIDGE_CHARGE_II:{name:"Cartridge Charge II",level:88},NEBULA_MASTERY:{name:"Nebula Mastery",level:92},ENHANCED_CONTINUATION_II:{name:"Enhanced Continuation II",level:96},ENHANCED_BLOODFEST:{name:"Enhanced Bloodfest",level:100}}),Bv={...Pv,...RR,...Gv},Fv=$()({HEATED_SPLIT_SHOT:{id:7411,name:"Heated Split Shot",label:{zh:"热分裂弹"}},HEATED_SLUG_SHOT:{id:7412,name:"Heated Slug Shot",label:{zh:"热独头弹"}},HEATED_CLEAN_SHOT:{id:7413,name:"Heated Clean Shot",label:{zh:"热狙击弹"}},DRILL:{id:16498,name:"Drill",label:{zh:"钻头"}},HOT_SHOT:{id:2872,name:"Hot Shot",label:{zh:"热弹"}},AIR_ANCHOR:{id:16500,name:"Air Anchor",label:{zh:"空气锚"}},CHAIN_SAW:{id:25788,name:"Chain Saw",label:{zh:"回转飞锯"}},EXCAVATOR:{id:36981,name:"Excavator",label:{zh:"掘地飞轮"}},GAUSS_ROUND:{id:2874,name:"Gauss Round",label:{zh:"虹吸弹"}},DOUBLE_CHECK:{id:36979,name:"Double Check",label:{zh:"双将"}},RICOCHET:{id:2890,name:"Ricochet",label:{zh:"弹射"}},CHECKMATE:{id:36980,name:"Checkmate",label:{zh:"将死"}},BLAZING_SHOT:{id:36978,name:"Blazing Shot",label:{zh:"烈焰弹"}},WILDFIRE:{id:2878,name:"Wildfire",label:{zh:"野火"}},DETONATOR:{id:16766,name:"Detonator",label:{zh:"引爆装置"}},HYPERCHARGE:{id:17209,name:"Hypercharge",label:{zh:"超荷"}},ROOK_AUTOTURRET:{id:2864,name:"Rook Autoturret",label:{zh:"车式浮空炮塔"}},ROOK_OVERDRIVE:{id:7415,name:"Rook Overdrive",label:{zh:"超档车式炮塔"}},AUTOMATON_QUEEN:{id:16501,name:"Automaton Queen",label:{zh:"后式自走人偶"}},QUEEN_OVERDRIVE:{id:16502,name:"Queen Overdrive",label:{zh:"超档后式人偶"}},BARREL_STABILIZER:{id:7414,name:"Barrel Stabilizer",label:{zh:"枪管加热"}},REASSEMBLE:{id:2876,name:"Reassemble",label:{zh:"整备"}},FULL_METAL_FIELD:{id:36982,name:"Full Metal Field",label:{zh:"全金属爆发"}},SPREAD_SHOT:{id:2870,name:"Spread Shot",label:{zh:"散射"}},SCATTERGUN:{id:25786,name:"Scattergun",label:{zh:"霰弹枪"}},AUTO_CROSSBOW:{id:16497,name:"Auto Crossbow",label:{zh:"自动弩"}},BIOBLASTER:{id:16499,name:"Bioblaster",label:{zh:"毒菌冲击"}},FLAMETHROWER:{id:7418,name:"Flamethrower",label:{zh:"火焰喷射器"}},DISMANTLE:{id:2887,name:"Dismantle",label:{zh:"武装解除"}},TACTICIAN:{id:16889,name:"Tactician",label:{zh:"策动"}},VOLLEY_FIRE:{id:2891,name:"Volley Fire",label:{zh:"齐射"}},ARM_PUNCH:{id:16504,name:"Arm Punch",label:{zh:"铁臂拳"}},ROOK_OVERLOAD:{id:7416,name:"Rook Overload",label:{zh:"超负荷车式炮塔"}},PILE_BUNKER:{id:16503,name:"Pile Bunker",label:{zh:"打桩枪"}},CROWNED_COLLIDER:{id:25787,name:"Crowned Collider",label:{zh:"王室对撞机"}}}),zv=$()({cd_REASSEMBLE:{name:"cd_Reassemble"},cd_DRILL:{name:"cd_Drill"},cd_CHECKMATE:{name:"cd_Checkmate"},cd_DOUBLE_CHECK:{name:"cd_DoubleCheck"},cd_AIR_ANCHOR:{name:"cd_AirAnchor"},cd_CHAINSAW:{name:"cd_Chainsaw",label:{zh:"CD：回转飞锯"}},cd_BARREL_STABILIZER:{name:"cd_BarrelStabilizer"},cd_WILDFIRE:{name:"cd_Wildfire"},cd_QUEEN:{name:"cd_Queen",label:{zh:"CD：后式自走人偶"}},cd_OVERDRIVE:{name:"cd_Overdrive",label:{zh:"CD：超档车式炮塔/超档后式人偶"}},cd_DISMANTLE:{name:"cd_Dismantle"},cd_TACTICIAN:{name:"cd_Tactician"},cd_HYPERCHARGE:{name:"cd_Hypercharge"},cd_DETONATOR:{name:"cd_Detonator"},cd_FLAMETHROWER:{name:"cd_Flamethrower"}}),jv=$()({HEAT_GAUGE:{name:"Heat",label:{zh:"枪管热度"}},BATTERY_GAUGE:{name:"Battery",label:{zh:"电能"}}}),TR=$()({REASSEMBLED:{name:"Reassembled",label:{zh:"整备预备"}},OVERHEATED:{name:"Overheated",label:{zh:"过热状态"},maximumStacks:5},WILDFIRE:{name:"Wildfire",label:{zh:"野火（敌）"}},WILDFIRE_SELF:{name:"Wildfire Self",label:{zh:"野火（我）"}},FLAMETHROWER:{name:"Flamethrower",label:{zh:"火焰喷射器持续中"}},BIOBLASTER:{name:"Bioblaster",label:{zh:"毒菌冲击dot"}},TACTICIAN:{name:"Tactician",label:{zh:"策动buff"}},HYPERCHARGED:{name:"Hypercharged",label:{zh:"超荷预备"}},EXCAVATOR_READY:{name:"Excavator Ready",label:{zh:"掘地飞轮预备"}},FULL_METAL_MACHINIST:{name:"Full Metal Machinist",label:{zh:"全金属爆发预备"}}}),Yv=$()({HEAT_COMBO:{name:"Heat Combo",label:{zh:"热连击"}},QUEEN:{name:"Queen",label:{zh:"人偶预备"}},QUEEN_PUNCHES:{name:"QueenPunches",label:{zh:"人偶铁壁拳"}},QUEEN_FINISHERS:{name:"QueenFinishers",label:{zh:"人偶离场"}},BATTERY_BONUS:{name:"BatteryBonus",label:{zh:"额外电量"}},WILDFIRE_HITS:{name:"WildfireHits",label:{zh:"野火命中"}}}),Kv=$()({CHARGED_ACTION_MASTERY:{name:"Charged Action Mastery",level:74},HOT_SHOT_MASTERY:{name:"Hot Shot Mastery",level:76},ENHANCED_WILD_FIRE:{name:"Enhanced Wildfire",level:88},PROMOTION:{name:"Promotion",level:80},SPREAD_SHOT_MASTERY:{name:"Spread Shot Mastery",level:82},ENHANCED_REASSEMBLE:{name:"Enhanced Reassemble",level:84},MARKSMANS_MASTERY:{name:"Marksman's Mastery",level:84},QUEENS_GAMBIT:{name:"Queen's Gambit",level:86},ENHANCED_TACTICIAN:{name:"Enhanced Tactician",level:88},DOUBLE_BARREL_MASTERY:{name:"Double-Barrel Mastery",level:92},ENHANCED_MULTI_WEAPON:{name:"Enhanced Multiweapon",level:94},MARKSMANS_MASTERY_II:{name:"Marksman's Mastery II",level:94},ENHANCED_MULTI_WEAPON_II:{name:"Enhanced Multiweapon II",level:96},ENHANCED_BARREL_STABILIZER:{name:"Enhanced Barrel Stabilizer",level:100}}),Vv={...jv,...TR,...Yv},Wv=$()({}),qv=$()({}),Xv=$()({}),Zv=$()({}),Qv=$()({}),$v=$()({}),Jv={...Xv,...Zv,...Qv},eM=$()({}),tM=$()({}),aM=$()({}),nM=$()({}),iM=$()({}),lM=$()({}),oM={...aM,...nM,...iM},sM=$()({FIRE_IN_RED:{id:34650,name:"Fire in Red",label:{zh:"火炎之红",ja:"レッドファイア"}},AERO_IN_GREEN:{id:34651,name:"Aero in Green",label:{zh:"疾风之绿",ja:"グリーンエアロ"}},WATER_IN_BLUE:{id:34652,name:"Water in Blue",label:{zh:"流水之蓝",ja:"ブルーウォータ"}},FIRE_II_IN_RED:{id:34656,name:"Fire II in Red",label:{zh:"烈炎之红",ja:"レッドファイラ"}},AERO_II_IN_GREEN:{id:34657,name:"Aero II in Green",label:{zh:"烈风之绿",ja:"グリーンエアロラ"}},WATER_II_IN_BLUE:{id:34658,name:"Water II in Blue",label:{zh:"激水之蓝",ja:"ブルーウォタラ"}},BLIZZARD_IN_CYAN:{id:34653,name:"Blizzard in Cyan",label:{zh:"冰结之蓝青",ja:"シアンブリザド"}},STONE_IN_YELLOW:{id:34654,name:"Stone in Yellow",label:{zh:"飞石之纯黄",ja:"イエローストーン"}},THUNDER_IN_MAGENTA:{id:34655,name:"Thunder in Magenta",label:{zh:"闪雷之品红",ja:"マゼンタサンダー"}},BLIZZARD_II_IN_CYAN:{id:34659,name:"Blizzard II in Cyan",label:{zh:"冰冻之蓝青",ja:"イエローストンラ"}},STONE_II_IN_YELLOW:{id:34660,name:"Stone II in Yellow",label:{zh:"坚石之纯黄",ja:"マゼンタサンダラ"}},THUNDER_II_IN_MAGENTA:{id:34661,name:"Thunder II in Magenta",label:{zh:"震雷之品红",ja:""}},HOLY_IN_WHITE:{id:34662,name:"Holy in White",label:{zh:"神圣之白",ja:"ホワイトホーリー"}},COMET_IN_BLACK:{id:34663,name:"Comet in Black",label:{zh:"彗星之黑",ja:"ブラックコメット"}},RAINBOW_DRIP:{id:34688,name:"Rainbow Drip",label:{zh:"彩虹点滴",ja:"レインボードリップ"}},STAR_PRISM:{id:34681,name:"Star Prism",label:{zh:"天星棱光",ja:"スタープリズム"}},TEMPERA_COAT:{id:34685,name:"Tempera Coat",label:{zh:"坦培拉涂层",ja:"テンペラコート"}},TEMPERA_GRASSA:{id:34686,name:"Tempera Grassa",label:{zh:"油性坦培拉涂层",ja:"テンペラグラッサ"}},TEMPERA_COAT_POP:{name:"Pop Tempera Coat",label:{zh:"坦培拉涂层破盾",ja:"テンペラコート【ブレイク】"}},TEMPERA_GRASSA_POP:{name:"Pop Tempera Grassa",label:{zh:"油性坦培拉涂层破盾",ja:"テンペラグラッサ【ブレイク】"}},SMUDGE:{id:34684,name:"Smudge",label:{zh:"速涂",ja:"スマッジ"}},SUBTRACTIVE_PALETTE:{id:34683,name:"Subtractive Palette",label:{zh:"减色混合",ja:"サブトラクティブパレット"}},CREATURE_MOTIF:{id:34689,name:"Creature Motif",label:{zh:"动物彩绘",ja:"ピクトアニマル"}},POM_MOTIF:{id:34664,name:"Pom Motif",label:{zh:"绒球彩绘",ja:"ピクトアニマル"}},WING_MOTIF:{id:34665,name:"Wing Motif",label:{zh:"翅膀彩绘",ja:"ピクトスケープ"}},CLAW_MOTIF:{id:34666,name:"Claw Motif",label:{zh:"兽爪彩绘",ja:"ピクトクロー"}},MAW_MOTIF:{id:34667,name:"Maw Motif",label:{zh:"尖牙彩绘",ja:"ピクトファング"}},LIVING_MUSE:{id:35347,name:"Living Muse",label:{zh:"动物构想",ja:"イマジンアニマル"}},POM_MUSE:{id:34670,name:"Pom Muse",label:{zh:"绒球构想",ja:"ピクトポンポン"}},WINGED_MUSE:{id:34671,name:"Winged Muse",label:{zh:"翅膀构想",ja:"ピクトウィング"}},CLAWED_MUSE:{id:34672,name:"Clawed Muse",label:{zh:"兽爪构想",ja:"イマジンクロー"}},FANGED_MUSE:{id:34673,name:"Fanged Muse",label:{zh:"尖牙构想",ja:"イマジンファング"}},MOG_OF_THE_AGES:{id:34676,name:"Mog of the Ages",label:{zh:"莫古力激流",ja:"モーグリストリーム"}},RETRIBUTION_OF_THE_MADEEN:{id:34677,name:"Retribution of the Madeen",label:{zh:"马蒂恩惩罚",ja:"マディーンレトリビューション"}},WEAPON_MOTIF:{id:34690,name:"Weapon Motif",label:{zh:"武器彩绘",ja:"ピクトウェポン"}},STEEL_MUSE:{id:35348,name:"Steel Muse",label:{zh:"武器构想",ja:"イマジンウェポン"}},HAMMER_MOTIF:{id:34668,name:"Hammer Motif",label:{zh:"重锤彩绘",ja:"ピクトハンマー"}},STRIKING_MUSE:{id:34674,name:"Striking Muse",label:{zh:"重锤构想",ja:"イマジンハンマー"}},HAMMER_STAMP:{id:34678,name:"Hammer Stamp",label:{zh:"重锤敲章",ja:"ハンマースタンプ"}},HAMMER_BRUSH:{id:34679,name:"Hammer Brush",label:{zh:"重锤掠刷",ja:"ハンマーブラッシュ"}},POLISHING_HAMMER:{id:34680,name:"Polishing Hammer",label:{zh:"重锤抛光",ja:"ハンマーポリッシュ"}},LANDSCAPE_MOTIF:{id:34691,name:"Landscape Motif",label:{zh:"风景彩绘",ja:"ピクトスケープ"}},SCENIC_MUSE:{id:35349,name:"Scenic Muse",label:{zh:"风景构想",ja:"イマジンスケープ"}},STARRY_SKY_MOTIF:{id:34669,name:"Starry Sky Motif",label:{zh:"星空彩绘",ja:"ピクトスカイ"}},STARRY_MUSE:{id:34675,name:"Starry Muse",label:{zh:"星空构想",ja:"イマジンスカイ"}}}),rM=$()({cd_TEMPERA_COAT:{name:"cd_TemperaCoat"},cd_SMUDGE:{name:"cd_Smudge"},cd_LIVING_MUSE:{name:"cd_LivingMuse"},cd_PORTRAIT:{name:"cd_Portrait",label:{zh:"CD：莫古力激流/马蒂恩惩罚"}},cd_STEEL_MUSE:{name:"cd_SteelMuse"},cd_SCENIC_MUSE:{name:"cd_ScenicMuse"},cd_SUBTRACTIVE:{name:"cd_Subtractive",label:{zh:"CD：减色混合"}},cd_GRASSA:{name:"cd_Grassa",label:{zh:"CD：油性坦培拉涂层"}},cd_TEMPERA_POP:{name:"cd_TemperaPop",label:{zh:"CD：坦培拉涂层破盾"}}}),cM=$()({PORTRAIT:{name:"Portrait",label:{zh:"肖像标识（无/莫古力/马蒂恩）"}},DEPICTIONS:{name:"Depictions",label:{zh:"动物标识（绒球/翅膀/兽爪/尖牙）"}},CREATURE_CANVAS:{name:"Creature Canvas",label:{zh:"动物画"}},WEAPON_CANVAS:{name:"Weapon Canvas",label:{zh:"武器画"}},LANDSCAPE_CANVAS:{name:"Landscape Canvas",label:{zh:"风景画"}},PALETTE_GAUGE:{name:"Palette Gauge",label:{zh:"调色量谱"}},PAINT:{name:"Paint",label:{zh:"颜料量谱"}}}),SR=$()({AETHERHUES:{name:"Aetherhues",label:{zh:"以太色调"},mayNotBeCanceled:!0,maximumStacks:2},MONOCHROME_TONES:{name:"Monochrome Tones",label:{zh:"色调反转"}},SUBTRACTIVE_PALETTE:{name:"Subtractive Palette",label:{zh:"减色混合"},mayNotBeCanceled:!0,maximumStacks:3},HAMMER_TIME:{name:"Hammer Time",label:{zh:"重锤连击"},mayNotBeCanceled:!0,maximumStacks:3},INSPIRATION:{name:"Inspiration",label:{zh:"绘画装置"},mayBeToggled:!0},SUBTRACTIVE_SPECTRUM:{name:"Subtractive Spectrum",label:{zh:"减色混合预备"}},HYPERPHANTASIA:{name:"Hyperphantasia",label:{zh:"绘灵幻景"},maximumStacks:5},RAINBOW_BRIGHT:{name:"Rainbow Bright",label:{zh:"彩虹点滴效果提高"}},STARSTRUCK:{name:"Starstruck",label:{zh:"天星棱光预备"}},STARRY_MUSE:{name:"Starry Muse",label:{zh:"星空构想"}},TEMPERA_COAT:{name:"Tempera Coat",label:{zh:"坦培拉涂层"}},TEMPERA_GRASSA:{name:"Tempera Grassa",label:{zh:"油性坦培拉涂层"}},SMUDGE:{name:"Smudge",label:{zh:"速涂"}}}),uM=$()({HAMMER_COMBO:{name:"Hammer Combo Counter",label:{zh:"重锤连击数"}}}),dM=$()({PICTOMANCY_MASTERY_II:{name:"Pictomancy Mastery II",level:74},ENHANCED_ARTISTRY:{name:"Enhanced Artistry",level:80},ENHANCED_PICTOMANCY:{name:"Enhanced Pictomancy",level:82},ENHANCED_SMUDGE:{name:"Enhanced Smudge",level:84},PICTOMANCY_MASTERY_III:{name:"Pictomancy Mastery III",level:84},ENHANCED_PICTOMANCY_II:{name:"Enhanced Pictomancy II",level:86},ENHANCED_TEMPERA:{name:"Enhanced Tempera",level:88},ENHANCED_PALETTE:{name:"Enhanced Palette",level:90},ENHANCED_PICTOMANCY_III:{name:"Enhanced Pictomancy III",level:92},PICTOMANCY_MASTERY_IV:{name:"Pictomancy Mastery IV",level:94},ENHANCED_PICTOMANCY_IV:{name:"Enhanced Pictomancy IV",level:96},ENHANCED_PICTOMANCY_V:{name:"Enhanced Pictomancy V",level:100}}),fM={...cM,...SR,...uM},hM=$()({FAST_BLADE:{id:9,name:"Fast Blade",label:{zh:"先锋剑"}},FIGHT_OR_FLIGHT:{id:20,name:"Fight or Flight",label:{zh:"战逃反应"}},RIOT_BLADE:{id:15,name:"Riot Blade",label:{zh:"暴乱剑"}},TOTAL_ECLIPSE:{id:7381,name:"Total Eclipse",label:{zh:"全蚀斩"}},SHIELD_BASH:{id:16,name:"Shield Bash",label:{zh:"盾牌猛击"}},IRON_WILL:{id:28,name:"Iron Will",label:{zh:"钢铁信念"}},RELEASE_IRON_WILL:{id:32065,name:"Release Iron Will",label:{zh:"解除钢铁信念"}},SHIELD_LOB:{id:24,name:"Shield Lob",label:{zh:"投盾"}},SPIRITS_WITHIN:{id:29,name:"Spirits Within",label:{zh:"深奥之灵"}},SHELTRON:{id:3542,name:"Sheltron",label:{zh:"盾阵"}},SENTINEL:{id:17,name:"Sentinel",label:{zh:"预警"}},PROMINENCE:{id:16457,name:"Prominence",label:{zh:"日珥斩"}},COVER:{id:27,name:"Cover",label:{zh:"保护"}},CIRCLE_OF_SCORN:{id:23,name:"Circle of Scorn",label:{zh:"厄运流转"}},HALLOWED_GROUND:{id:30,name:"Hallowed Ground",label:{zh:"神圣领域"}},BULWARK:{id:22,name:"Bulwark",label:{zh:"壁垒"}},GORING_BLADE:{id:3538,name:"Goring Blade",label:{zh:"沥血剑"}},DIVINE_VEIL:{id:3540,name:"Divine Veil",label:{zh:"圣光幕帘"}},CLEMENCY:{id:3541,name:"Clemency",label:{zh:"深仁厚泽"}},ROYAL_AUTHORITY:{id:3539,name:"Royal Authority",label:{zh:"王权剑"}},INTERVENTION:{id:7382,name:"Intervention",label:{zh:"干预"}},HOLY_SPIRIT:{id:7384,name:"Holy Spirit",label:{zh:"圣灵"}},INTERVENE:{id:16461,name:"Intervene",label:{zh:"调停"}},REQUIESCAT:{id:7383,name:"Requiescat",label:{zh:"安魂祈祷"}},PASSAGE_OF_ARMS:{id:7385,name:"Passage of Arms",label:{zh:"武装戍卫"}},HOLY_CIRCLE:{id:16458,name:"Holy Circle",label:{zh:"圣环"}},ATONEMENT:{id:16460,name:"Atonement",label:{zh:"赎罪剑"}},SUPPLICATION:{id:36918,name:"Supplication",label:{zh:"祈告剑（赎罪连2）"}},SEPULCHRE:{id:36919,name:"Sepulchre",label:{zh:"葬送剑（赎罪连3）"}},CONFITEOR:{id:16459,name:"Confiteor",label:{zh:"悔罪"}},HOLY_SHELTRON:{id:25746,name:"Holy Sheltron",label:{zh:"圣盾阵"}},EXPIACION:{id:25747,name:"Expiacion",label:{zh:"偿赎剑"}},BLADE_OF_FAITH:{id:25748,name:"Blade of Faith",label:{zh:"信念之剑（悔罪连2）"}},BLADE_OF_TRUTH:{id:25749,name:"Blade of Truth",label:{zh:"真理之剑（悔罪连3）"}},BLADE_OF_VALOR:{id:25750,name:"Blade of Valor",label:{zh:"英勇之剑（悔罪连4）"}},GUARDIAN:{id:36920,name:"Guardian",label:{zh:"极致防御"}},IMPERATOR:{id:36921,name:"Imperator",label:{zh:"绝对统治"}},BLADE_OF_HONOR:{id:36922,name:"Blade of Honor",label:{zh:"荣耀之剑"}}}),EM=$()({cd_FIGHT_OR_FLIGHT:{name:"cd_FightOrFlight"},cd_IRON_WILL:{name:"cd_IronWill"},cd_RELEASE_IRON_WILL:{name:"cd_ReleaseIronWill"},cd_SPIRITS_WITHIN:{name:"cd_SpiritsWithin"},cd_SHELTRON:{name:"cd_Sheltron"},cd_SENTINEL:{name:"cd_Sentinel"},cd_COVER:{name:"cd_Cover"},cd_CIRCLE_OF_SCORN:{name:"cd_CircleOfScorn"},cd_HALLOWED_GROUND:{name:"cd_HallowedGround"},cd_BULWARK:{name:"cd_Bulwark"},cd_DIVINE_VEIL:{name:"cd_DivineVeil"},cd_INTERVENTION:{name:"cd_Intervention"},cd_INTERVENE:{name:"cd_Intervene"},cd_REQUIESCAT:{name:"cd_Requiescat"},cd_PASSAGE_OF_ARMS:{name:"cd_PassageOfArms"},cd_HOLY_SHELTRON:{name:"cd_HolySheltron"},cd_EXPIACION:{name:"cd_Expiacion"},cd_GUARDIAN:{name:"cd_Guardian"},cd_IMPERATOR:{name:"cd_Imperator"},cd_BLADE_OF_HONOR:{name:"cd_BladeOfHonor"}}),AM=$()({OATH_GAUGE:{name:"Oath Gauge",label:{zh:"忠义值"}}}),gR=$()({FIGHT_OR_FLIGHT:{name:"Fight or Flight",label:{zh:"战逃反应"}},IRON_WILL:{name:"Iron Will",label:{zh:"钢铁信念"}},CIRCLE_OF_SCORN_DOT:{name:"Circle of Scorn DoT",label:{zh:"厄运流转DOT"}},SHELTRON:{name:"Sheltron",label:{zh:"盾阵"}},SENTINEL:{name:"Sentinel",label:{zh:"预警"}},COVER:{name:"Cover",label:{zh:"保护"}},HALLOWED_GROUND:{name:"Hallowed Ground",label:{zh:"神圣领域"}},BULWARK:{name:"Bulwark",label:{zh:"壁垒"}},GORING_BLADE_READY:{name:"Goring Blade Ready",label:{zh:"沥血剑预备"}},DIVINE_VEIL:{name:"Divine Veil",label:{zh:"圣光幕帘"}},ATONEMENT_READY:{name:"Atonement Ready",label:{zh:"赎罪剑预备"}},DIVINE_MIGHT:{name:"Divine Might",label:{zh:"神圣魔法效果提高"}},INTERVENTION:{name:"Intervention",label:{zh:"干预"}},KNIGHTS_RESOLVE:{name:"Knight's Resolve",label:{zh:"骑士的坚守"}},KNIGHTS_BENEDICTION:{name:"Knight's Benediction",label:{zh:"骑士的加护"}},REQUIESCAT:{name:"Requiescat",maximumStacks:4,label:{zh:"安魂祈祷"}},CONFITEOR_READY:{name:"Confiteor Ready",label:{zh:"悔罪预备"}},PASSAGE_OF_ARMS:{name:"Passage of Arms",label:{zh:"武装戍卫"}},ARMS_UP:{name:"Arms Up",label:{zh:"武装"}},SUPPLICATION_READY:{name:"Supplication Ready",label:{zh:"祈告剑预备"}},SEPULCHRE_READY:{name:"Sepulchre Ready",label:{zh:"葬送剑预备"}},HOLY_SHELTRON:{name:"Holy Sheltron",label:{zh:"圣盾阵"}},BLADE_OF_HONOR_READY:{name:"Blade of Honor Ready",label:{zh:"荣耀之剑预备"}},GUARDIAN:{name:"Guardian",label:{zh:"极致防御"}},GUARDIANS_WILL:{name:"Guardian's Will",label:{zh:"极致护盾"}}}),mM=$()({PLD_COMBO_TRACKER:{name:"PLD Combo Tracker",label:{zh:"王权连连击状态"}},PLD_CONFITEOR_COMBO_TRACKER:{name:"PLD Confiteor Combo Tracker",label:{zh:"悔罪连连击状态"}},PLD_AOE_COMBO_TRACKER:{name:"PLD AOE Combo Tracker",label:{zh:"AOE连连击状态"}}}),RM=$()({ENHANCED_PROMINENCE:{name:"Enhanced Prominence",level:72},ENHANCED_SHELTRON:{name:"Enhanced Sheltron",level:74},SWORD_OATH:{name:"Sword Oath",level:76},ENHANCED_REQUIESCAT:{name:"Enhanced Requiescat",level:80},SHELTRON_MASTERY:{name:"Sheltron Mastery",level:82},ENHANCED_INTERVENTION:{name:"Enhanced Intervention",level:82},DIVINE_MAGIC_MASTERY_II:{name:"Divine Magic Mastery II",level:84},SPIRITS_WITHIN_MASTERY:{name:"Spirits Within Mastery",level:86},ENHANCED_DIVINE_VEIL:{name:"Enhanced Divine Veil",level:88},SENTINEL_MASTERY:{name:"Sentinel Mastery",level:92},REQUIESCAT_MASTERY:{name:"Requiescat Mastery",level:96},ENHANCED_BLADE_OF_VALOR:{name:"Enhanced Blade of Valor",level:100}}),TM={...AM,...gR,...mM},SM=$()({RIPOSTE:{id:7504,name:"Riposte",label:{zh:"回刺",ja:""}},VERTHUNDER:{id:7505,name:"Verthunder",label:{zh:"赤闪雷",ja:""}},CORPS_A_CORPS:{id:7506,name:"Corps-a-corps",label:{zh:"短兵相接",ja:""}},VERAERO:{id:7507,name:"Veraero",label:{zh:"赤疾风",ja:""}},VERFIRE:{id:7510,name:"Verfire",label:{zh:"赤火炎",ja:""}},VERSTONE:{id:7511,name:"Verstone",label:{zh:"赤飞石",ja:""}},ZWERCHHAU:{id:7512,name:"Zwerchhau",label:{zh:"交击斩",ja:""}},DISPLACEMENT:{id:7515,name:"Displacement",label:{zh:"移转",ja:""}},FLECHE:{id:7517,name:"Fleche",label:{zh:"飞刺",ja:""}},REDOUBLEMENT:{id:7516,name:"Redoublement",label:{zh:"连攻",ja:""}},ACCELERATION:{id:7518,name:"Acceleration",label:{zh:"促进",ja:""}},MOULINET:{id:7513,name:"Moulinet",label:{zh:"划圆斩",ja:""}},VERCURE:{id:7514,name:"Vercure",label:{zh:"赤治疗",ja:""}},CONTRE_SIXTE:{id:7519,name:"Contre Sixte",label:{zh:"六分反击",ja:""}},EMBOLDEN:{id:7520,name:"Embolden",label:{zh:"鼓励",ja:""}},MANAFICATION:{id:7521,name:"Manafication",label:{zh:"魔元化",ja:""}},JOLT_II:{id:7524,name:"Jolt II",label:{zh:"震荡",ja:""}},VERRAISE:{id:7523,name:"Verraise",label:{zh:"赤复活",ja:""}},IMPACT:{id:16526,name:"Impact",label:{zh:"冲击",ja:""}},VERFLARE:{id:7525,name:"Verflare",label:{zh:"赤核爆",ja:""}},VERHOLY:{id:7526,name:"Verholy",label:{zh:"赤神圣",ja:""}},ENCHANTED_RIPOSTE:{id:7527,name:"Enchanted Riposte",label:{zh:"魔回刺",ja:""}},ENCHANTED_ZWERCHHAU:{id:7528,name:"Enchanted Zwerchhau",label:{zh:"魔交击斩",ja:""}},ENCHANTED_REDOUBLEMENT:{id:7529,name:"Enchanted Redoublement",label:{zh:"魔连攻",ja:""}},ENCHANTED_MOULINET:{id:7530,name:"Enchanted Moulinet",label:{zh:"魔划圆斩",ja:""}},VERTHUNDER_II:{id:16524,name:"Verthunder II",label:{zh:"赤震雷",ja:""}},VERAERO_II:{id:16525,name:"Veraero II",label:{zh:"赤烈风",ja:""}},ENGAGEMENT:{id:16527,name:"Engagement",label:{zh:"交剑",ja:""}},ENCHANTED_REPRISE:{id:16528,name:"Enchanted Reprise",label:{zh:"魔续斩",ja:""}},REPRISE:{id:16529,name:"Reprise",label:{zh:"续斩",ja:""}},SCORCH:{id:16530,name:"Scorch",label:{zh:"焦热",ja:""}},VERTHUNDER_III:{id:25855,name:"Verthunder III",label:{zh:"赤暴雷",ja:""}},VERAERO_III:{id:25856,name:"Veraero III",label:{zh:"赤疾风",ja:""}},MAGICK_BARRIER:{id:25857,name:"Magick Barrier",label:{zh:"抗死",ja:""}},RESOLUTION:{id:25858,name:"Resolution",label:{zh:"决断",ja:""}},ENCHANTED_MOULINET_II:{id:37002,name:"Enchanted Moulinet Deux",label:{zh:"魔划圆斩·二段",ja:""}},ENCHANTED_MOULINET_III:{id:37003,name:"Enchanted Moulinet Trois",label:{zh:"魔划圆斩·三段",ja:""}},JOLT_III:{id:37004,name:"Jolt III",label:{zh:"激荡",ja:""}},VICE_OF_THORNS:{id:37005,name:"Vice of Thorns",label:{zh:"荆棘回环",ja:""}},GRAND_IMPACT:{id:37006,name:"Grand Impact",label:{zh:"显贵冲击",ja:""}},PREFULGENCE:{id:37007,name:"Prefulgence",label:{zh:"光芒四射",ja:""}}}),gM=$()({cd_CORPS_A_CORPS:{name:"cd_CorpsACorps"},cd_DISPLACEMENT:{name:"cd_Displacement"},cd_FLECHE:{name:"cd_Fleche"},cd_ACCELERATION:{name:"cd_Acceleration"},cd_CONTRE_SIXTE:{name:"cd_ContreSixte"},cd_EMBOLDEN:{name:"cd_Embolden"},cd_MANAFICATION:{name:"cd_Manafication"},cd_MAGICK_BARRIER:{name:"cd_MagickBarrier"},cd_VICE_OF_THORNS:{name:"cd_ViceOfThorns"},cd_PREFULGENCE:{name:"cd_Prefulgence"}}),_M=$()({WHITE_MANA:{name:"White Mana",label:{zh:"白魔元"}},BLACK_MANA:{name:"Black Mana",label:{zh:"黑魔元"}},MANA_STACKS:{name:"Mana Stacks",label:{zh:"魔元集"}}}),_R=$()({ACCELERATION:{name:"Acceleration",label:{zh:"促进"}},DUALCAST:{name:"Dualcast",label:{zh:"连续咏唱"}},EMBOLDEN:{name:"Embolden",label:{zh:"鼓励"}},GRAND_IMPACT_READY:{name:"Grand Impact Ready",label:{zh:"显贵冲击预备"}},MAGICK_BARRIER:{name:"Magick Barrier",label:{zh:"抗死"}},MAGICKED_SWORDPLAY:{name:"Magicked Swordplay",label:{zh:"魔法剑术"},maximumStacks:3},MANAFICATION:{name:"Manafication",label:{zh:"魔元化"},maximumStacks:6},PREFULGENCE_READY:{name:"Prefulgence Ready",label:{zh:"光芒四射预备"}},THORNED_FLOURISH:{name:"Thorned Flourish",label:{zh:"荆棘环绕预备"}},VERFIRE_READY:{name:"Verfire Ready",label:{zh:"赤火炎预备"}},VERSTONE_READY:{name:"Verstone Ready",label:{zh:"赤飞石预备"}}}),pM=$()({RDM_MELEE_COUNTER:{name:"RDM Melee Combo",label:{zh:"赤魔近战连"}},RDM_FINISHER_COUNTER:{name:"RDM Finisher Combo",label:{zh:"赤核爆/赤神圣连击"}},RDM_AOE_COUNTER:{name:"RDM AoE Combo",label:{zh:"赤魔AOE连"}}}),IM=$()({ENHANCED_DISPLACEMENT:{name:"Enhanced Displacement",level:72},RED_MAGIC_MASTERY:{name:"Red Magic Mastery",level:74},ENHANCED_MANAFICATION:{name:"Enhanced Manafication",level:78},RED_MAGIC_MASTERY_II:{name:"Red Magic Mastery II",level:82},RED_MAGIC_MASTERY_III:{name:"Red Magic Mastery III",level:84},ENHANCED_ACCELERATION:{name:"Enhanced Acceleration",level:88},ENHANCED_MANAFICATION_II:{name:"Enhanced Manafication II",level:90},ENHANCED_EMBOLDEN:{name:"Enhanced Embolden",level:92},ENCHANTED_BLADE_MASTERY:{name:"Enchanted Blade Mastery",level:94},ENHANCED_ACCELERATION_II:{name:"Enhanced Acceleration II",level:96},ENHANCED_MANAFICATION_III:{name:"Enhanced Manafication III",level:100}}),NM={..._M,..._R,...pM},CM=$()({SLICE:{id:24373,name:"Slice",label:{zh:"切割"}},WAXING_SLICE:{id:24374,name:"Waxing Slice",label:{zh:"增盈切割"}},INFERNAL_SLICE:{id:24375,name:"Infernal Slice",label:{zh:"地狱切割"}},SHADOW_OF_DEATH:{id:24378,name:"Shadow of Death",label:{zh:"死亡之影"}},SOUL_SLICE:{id:24380,name:"Soul Slice",label:{zh:"灵魂切割"}},GIBBET:{id:24382,name:"Gibbet",label:{zh:"绞决"}},GALLOWS:{id:24383,name:"Gallows",label:{zh:"缢杀"}},EXECUTIONERS_GIBBET:{id:36970,name:"Executioner's Gibbet",label:{zh:"绞决处刑"}},EXECUTIONERS_GALLOWS:{id:36971,name:"Executioner's Gallows",label:{zh:"缢杀处刑"}},VOID_REAPING:{id:24395,name:"Void Reaping",label:{zh:"虚无收割"}},CROSS_REAPING:{id:24396,name:"Cross Reaping",label:{zh:"交错收割"}},PLENTIFUL_HARVEST:{id:24385,name:"Plentiful Harvest",label:{zh:"阴冷收割"}},HARVEST_MOON:{id:24388,name:"Harvest Moon",label:{zh:"收获月"}},COMMUNIO:{id:24398,name:"Communio",label:{zh:"团契"}},PERFECTIO:{id:36973,name:"Perfectio",label:{zh:"完人"}},SOULSOW:{id:24387,name:"Soulsow",label:{zh:"播魂种"}},HARPE:{id:24386,name:"Harpe",label:{zh:"勾刃"}},BLOOD_STALK:{id:24389,name:"Blood Stalk",label:{zh:"隐匿挥割"}},UNVEILED_GIBBET:{id:24390,name:"Unveiled Gibbet",label:{zh:"绞决爪"}},UNVEILED_GALLOWS:{id:24391,name:"Unveiled Gallows",label:{zh:"缢杀爪"}},LEMURES_SLICE:{id:24399,name:"Lemure's Slice",label:{zh:"夜游魂切割"}},SACRIFICIUM:{id:36969,name:"Sacrificium",label:{zh:"祭牲"}},ARCANE_CIRCLE:{id:24405,name:"Arcane Circle",label:{zh:"神秘环"}},GLUTTONY:{id:24393,name:"Gluttony",label:{zh:"暴食"}},ENSHROUD:{id:24394,name:"Enshroud",label:{zh:"夜游魂衣"}},SPINNING_SCYTHE:{id:24376,name:"Spinning Scythe",label:{zh:"旋转钐割"}},NIGHTMARE_SCYTHE:{id:24377,name:"Nightmare Scythe",label:{zh:"噩梦钐割"}},WHORL_OF_DEATH:{id:24379,name:"Whorl of Death",label:{zh:"死亡之涡"}},SOUL_SCYTHE:{id:24381,name:"Soul Scythe",label:{zh:"灵魂钐割"}},GUILLOTINE:{id:24384,name:"Guillotine",label:{zh:"断首"}},EXECUTIONERS_GUILLOTINE:{id:36972,name:"Executioner's Guillotine",label:{zh:"断首处刑"}},GRIM_REAPING:{id:24397,name:"Grim Reaping",label:{zh:"阴冷收割"}},GRIM_SWATHE:{id:24392,name:"Grim Swathe",label:{zh:"束缚挥割"}},LEMURES_SCYTHE:{id:24400,name:"Lemure's Scythe",label:{zh:"夜游魂钐割"}},ARCANE_CREST:{id:24404,name:"Arcane Crest",label:{zh:"神秘纹"}},ARCANE_CREST_POP:{name:"Pop Arcane Crest",label:{zh:"神秘纹破裂"}},HELLS_INGRESS:{id:24401,name:"Hell's Ingress",label:{zh:"地狱入境"}},HELLS_EGRESS:{id:24402,name:"Hell's Egress",label:{zh:"地狱出境"}},REGRESS:{id:24403,name:"Regress",label:{zh:"回退"}},GAIN_SOUL_GAUGE:{name:"+10 Soul Gauge",label:{zh:"灵魂量谱+10"}}}),bM=$()({cd_ARCANE_CIRCLE:{name:"cd_ArcaneCircle"},cd_GLUTTONY:{name:"cd_Gluttony"},cd_SOUL_SLICE:{name:"cd_SoulSlice"},cd_ENSHROUD:{name:"cd_Enshroud"},cd_INGRESS_EGRESS:{name:"cd_IngressEgress",label:{zh:"CD：地狱入境/地狱出境"}},cd_ARCANE_CREST:{name:"cd_ArcaneCrest"},cd_ARCANE_CREST_POP:{name:"cd_ArcaneCrestPop"},cd_BLOOD_STALK:{name:"cd_BloodStalk"},cd_LEMURES_SLICE:{name:"cd_LemuresSlice"},cd_SACRIFICIUM:{name:"cd_Sacrificium"},cd_GAIN_SOUL_GAUGE:{name:"cd_GainSoulGauge"}}),OM=$()({SOUL:{name:"Soul",label:{zh:"灵魂"}},SHROUD:{name:"Shroud",label:{zh:"魂衣"}},LEMURE_SHROUD:{name:"Lemure Shroud",label:{zh:"夜游魂"}},VOID_SHROUD:{name:"Void Shroud",label:{zh:"虚无魂"}}}),pR=$()({DEATHS_DESIGN:{name:"Death's Design",label:{zh:"死亡烙印"}},SOUL_REAVER:{name:"Soul Reaver",label:{zh:"妖异之镰"},maximumStacks:2},ENHANCED_GIBBET:{name:"Enhanced Gibbet",label:{zh:"绞决效果提高"}},ENHANCED_GALLOWS:{name:"Enhanced Gallows",label:{zh:"缢杀效果提高"}},EXECUTIONER:{name:"Executioner",label:{zh:"处刑人"},maximumStacks:2},ENSHROUDED:{name:"Enshrouded",label:{zh:"夜游魂衣"}},ENHANCED_VOID_REAPING:{name:"Enhanced Void Reaping",label:{zh:"虚无收割效果提高"}},ENHANCED_CROSS_REAPING:{name:"Enhanced Cross Reaping",label:{zh:"交错收割效果提高"}},OBLATIO:{name:"Oblatio",label:{zh:"祭牲预备"}},IDEAL_HOST:{name:"Ideal Host",label:{zh:"夜游魂衣预备"}},PERFECTIO_OCCULTA:{name:"Perfectio Occulta",label:{zh:"补完"}},PERFECTIO_PARATA:{name:"Perfectio Parata",label:{zh:"完人预备"}},ARCANE_CIRCLE:{name:"Arcane Circle",label:{zh:"神秘环"}},CIRCLE_OF_SACRIFICE:{name:"Circle of Sacrifice",label:{zh:"祭祀环"}},BLOODSOWN_CIRCLE:{name:"Bloodsown Circle",label:{zh:"死亡祭祀"}},IMMORTAL_SACRIFICE:{name:"Immortal Sacrifice",label:{zh:"死亡祭品"},maximumStacks:8},CREST_OF_TIME_BORROWED:{name:"Crest of Time Borrowed",label:{zh:"守护纹"}},CREST_OF_TIME_RETURNED:{name:"Crest of Time Returned",label:{zh:"活性纹"}},SOULSOW:{name:"Soulsow",label:{zh:"播魂种"}},THRESHOLD:{name:"Threshold",label:{zh:"回退预备"}},ENHANCED_HARPE:{name:"Enhanced Harpe",label:{zh:"勾刃效果提高"}}}),DM=$()({ARCANE_CREST:{name:"Arcane Crest",label:{zh:"神秘纹"}},HELLS_INGRESS_USED:{name:"Hell's Ingress Used",label:{zh:"地狱入境已使用"}},RPR_COMBO:{name:"RPR Combo",label:{zh:"单体连击"}},RPR_AOE_COMBO:{name:"RPR AoE Combo",label:{zh:"AOE连击"}}}),yM=$()({HELLSGATE:{name:"Hellsgate",level:74},TEMPERED_SOUL:{name:"Tempered Soul",level:78},SHROUD_GAUGE:{name:"Shroud Gauge",level:80},ENHANCED_ARCANE_CREST:{name:"Enhanced Arcane Crest",level:84},MELEE_MASTERY_II_RPR:{name:"Melee Mastery II",level:84},VOID_SOUL:{name:"Void Soul",level:86},ENHANCED_ARCANE_CIRCLE:{name:"Enhanced Arcane Circle",level:88},ENHANCED_ENSHROUD:{name:"Enhanced Enshroud",level:92},MELEE_MASTERY_III_RPR:{name:"Melee Mastery III",level:94},ENHANCED_GLUTTONY:{name:"Enhanced Gluttony",level:96},ENHANCED_PLENTIFUL_HARVEST:{name:"Enhanced Plentiful Harvest",level:100}}),vM={...OM,...pR,...DM},MM=$()({ENPI:{id:7486,name:"Enpi",label:{zh:"燕飞"}},HAKAZE:{id:7477,name:"Hakaze",label:{zh:"刃风"}},GYOFU:{id:36963,name:"Gyofu",label:{zh:"晓风"}},YUKIKAZE:{id:7480,name:"Yukikaze",label:{zh:"雪风"}},JINPU:{id:7478,name:"Jinpu",label:{zh:"阵风"}},GEKKO:{id:7481,name:"Gekko",label:{zh:"月光"}},SHIFU:{id:7479,name:"Shifu",label:{zh:"士风"}},KASHA:{id:7482,name:"Kasha",label:{zh:"花车"}},FUGA:{id:7483,name:"Fuga",label:{zh:"风雅"}},FUKO:{id:25780,name:"Fuko",label:{zh:"风光"}},MANGETSU:{id:7484,name:"Mangetsu",label:{zh:"满月"}},OKA:{id:7485,name:"Oka",label:{zh:"樱花"}},MEIKYO_SHISUI:{id:7499,name:"Meikyo Shisui",label:{zh:"明镜止水"}},IKISHOTEN:{id:16482,name:"Ikishoten",label:{zh:"意气冲天"}},HISSATSU_SHINTEN:{id:7490,name:"Hissatsu: Shinten",label:{zh:"必杀剑·震天"}},HISSATSU_KYUTEN:{id:7491,name:"Hissatsu: Kyuten",label:{zh:"必杀剑·九天"}},HISSATSU_GYOTEN:{id:7492,name:"Hissatsu: Gyoten",label:{zh:"必杀剑·晓天"}},HISSATSU_YATEN:{id:7493,name:"Hissatsu: Yaten",label:{zh:"必杀剑·夜天"}},HISSATSU_SENEI:{id:16481,name:"Hissatsu: Senei",label:{zh:"必杀剑·闪影"}},HISSATSU_GUREN:{id:7496,name:"Hissatsu: Guren",label:{zh:"必杀剑·红莲"}},HAGAKURE:{id:7495,name:"Hagakure",label:{zh:"叶隐"}},IAIJUTSU:{id:7867,name:"Iaijutsu",label:{zh:"居合术"}},TSUBAME_GAESHI:{id:16483,name:"Tsubame-gaeshi",label:{zh:"燕回返"}},SHOHA:{id:16487,name:"Shoha",label:{zh:"照破"}},THIRD_EYE:{id:7498,name:"Third Eye",label:{zh:"心眼"}},TENGENTSU:{id:36962,name:"Tengentsu",label:{zh:"天眼通"}},OGI_NAMIKIRI:{id:25781,name:"Ogi Namikiri",label:{zh:"奥义斩浪"}},KAESHI_NAMIKIRI:{id:25782,name:"Kaeshi: Namikiri",label:{zh:"回返斩浪"}},ZANSHIN:{id:36964,name:"Zanshin",label:{zh:"残心"}},MEDITATE:{id:7497,name:"Meditate",label:{zh:"默想"}},HIGANBANA:{id:7489,name:"Higanbana",label:{zh:"彼岸花"}},TENKA_GOKEN:{id:7488,name:"Tenka Goken",label:{zh:"天下五剑"}},KAESHI_GOKEN:{id:16485,name:"Kaeshi: Goken",label:{zh:"回返五剑"}},TENDO_GOKEN:{id:36965,name:"Tendo Goken",label:{zh:"天道五剑"}},TENDO_KAESHI_GOKEN:{id:36967,name:"Tendo Kaeshi Goken",label:{zh:"天道回返五剑"}},MIDARE_SETSUGEKKA:{id:7487,name:"Midare Setsugekka",label:{zh:"纷乱雪月花"}},KAESHI_SETSUGEKKA:{id:16486,name:"Kaeshi: Setsugekka",label:{zh:"回返雪月花"}},TENDO_SETSUGEKKA:{id:36966,name:"Tendo Setsugekka",label:{zh:"天道雪月花"}},TENDO_KAESHI_SETSUGEKKA:{id:36968,name:"Tendo Kaeshi Setsugekka",label:{zh:"天道回返雪月花"}},THIRD_EYE_POP:{name:"Pop Third Eye",label:{zh:"心眼触发"}},TENGENTSU_POP:{name:"Pop Tengentsu",label:{zh:"天眼通触发"}}}),LM=$()({cd_YATEN:{name:"cd_Yaten",label:{zh:"CD：夜天"}},cd_GYOTEN:{name:"cd_Gyoten",label:{zh:"CD：晓天"}},cd_SENEI_GUREN:{name:"cd_Senei",label:{zh:"CD: 闪影/红莲"}},cd_SHINTEN:{name:"cd_Shinten",label:{zh:"CD：震天"}},cd_KYUTEN:{name:"cd_Kyuten",label:{zh:"CD：九天"}},cd_MEDITATE:{name:"cd_Meditate"},cd_IKISHOTEN:{name:"cd_Ikishoten"},cd_ZANSHIN:{name:"cd_Zanshin"},cd_HAGAKURE:{name:"cd_Hagakure"},cd_SHOHA:{name:"cd_Shoha"},cd_MEIKYO_SHISUI:{name:"cd_MeikyoShisui"},cd_THIRD_EYE:{name:"cd_ThirdEye"},cd_THIRD_EYE_POP:{name:"cd_ThirdEyePop"}}),HM=$()({KENKI:{name:"Kenki",label:{zh:"剑气"}},SETSU:{name:"Setsu",label:{zh:"雪闪"}},GETSU:{name:"Getsu",label:{zh:"月闪"}},KA_SEN:{name:"Ka",label:{zh:"花闪"}},MEDITATION:{name:"Meditation",label:{zh:"默想"}}}),IR=$()({MEIKYO_SHISUI:{name:"Meikyo Shisui",label:{zh:"明镜止水"},maximumStacks:3},FUGETSU:{name:"Fugetsu",label:{zh:"风月"}},FUKA:{name:"Fuka",label:{zh:"风花"}},ZANSHIN_READY:{name:"Zanshin Ready",label:{zh:"残心预备"}},TENDO:{name:"Tendo",label:{zh:"天道"}},OGI_READY:{name:"Ogi Namikiri Ready",label:{zh:"奥义斩浪预备"}},TSUBAME_GAESHI_READY:{name:"Tsubame-gaeshi Ready",label:{zh:"燕回返预备"}},THIRD_EYE:{name:"Third Eye",label:{zh:"心眼"}},TENGENTSU:{name:"Tengentsu",label:{zh:"天眼通"}},TENGENTSUS_FORESIGHT:{name:"Tengentsu's Foresight",label:{zh:"通天眼"}},MEDITATE:{name:"Meditate",label:{zh:"默想"}},ENHANCED_ENPI:{name:"Enhanced Enpi",label:{zh:"燕飞效果提高"}},HIGANBANA_DOT:{name:"HiganbanaDoT",label:{zh:"彼岸花dot"}}}),xM=$()({SAM_TWO_READY:{name:"SAMTwoReady",label:{zh:"连击2预备"}},SAM_TWO_AOE_READY:{name:"SAMTwoAoeReady",label:{zh:"AOE2预备"}},GEKKO_READY:{name:"GekkoReady",label:{zh:"月光预备"}},KASHA_READY:{name:"KashaReady",label:{zh:"花车预备"}},KAESHI_OGI_READY:{name:"KaeshiOgiReady",label:{zh:"回返斩浪预备"}},KAESHI_TRACKER:{name:"KaeshiTracker",label:{zh:"回返状态"}}}),UM=$()({ENHANCED_IAIJUTSU:{name:"Enhanced Iaijutsu",level:74},ENHANCED_MEIKYO_SHISUI:{name:"Enhanced Meikyo Shisui",level:76},ENHANCED_FUGETSU_AND_FUKA:{name:"Enhanced Fugetsu and Fuka",level:78},THIRD_EYE_MASTERY:{name:"Third Eye Mastery",level:82},WAY_OF_THE_SAMURAI_II:{name:"Way of the Samurai II",level:84},FUGA_MASTERY:{name:"Fuga Mastery",level:86},ENHANCED_IKISHOTEN:{name:"Enhanced Ikishoten",level:90},HAKAZE_MASTERY:{name:"Hakaze Mastery",level:92},ENHANCED_HISSATSU:{name:"Enhanced Hissatsu",level:94},WAY_OF_THE_SAMURAI_III:{name:"Way of the Samurai III",level:94},ENHANCED_IKISHOTEN_II:{name:"Enhanced Ikishoten II",level:96},ENHANCED_MEIKYO_SHISUI_II:{name:"Enhanced Meikyo Shisui II",level:100}}),kM={...HM,...IR,...xM},PM=$()({}),GM=$()({}),wM=$()({}),BM=$()({}),FM=$()({}),zM=$()({}),jM={...wM,...BM,...FM},YM=$()({DIAGNOSIS:{id:24284,name:"Diagnosis",label:{zh:"诊断"}},EUKRASIAN_DIAGNOSIS:{id:24291,name:"Eukrasian Diagnosis",label:{zh:"均衡诊断"}},EUKRASIAN_DIAGNOSIS_POP:{name:"Pop Eukrasian Diagnosis",label:{zh:"均衡诊断破盾"}},HAIMA:{id:24305,name:"Haima",label:{zh:"输血"}},HAIMA_POP:{name:"Pop Haima",label:{zh:"输血破盾"}},EGEIRO:{id:24287,name:"Egeiro",label:{zh:"复苏"}},PROGNOSIS:{id:24286,name:"Prognosis",label:{zh:"预后"}},EUKRASIAN_PROGNOSIS:{id:24292,name:"Eukrasian Prognosis",label:{zh:"均衡预后"}},EUKRASIAN_PROGNOSIS_II:{id:37034,name:"Eukrasian Prognosis II",label:{zh:"均衡预后 II"}},EUKRASIAN_PROGNOSIS_POP:{name:"Pop Eukrasian Prognosis",label:{zh:"均衡预后破盾"}},EUKRASIAN_PROGNOSIS_II_POP:{name:"Pop Eukrasian Prognosis II",label:{zh:"均衡预后 II 破盾"}},PANHAIMA:{id:24311,name:"Panhaima",label:{zh:"泛输血"}},PANHAIMA_POP:{name:"Pop Panhaima",label:{zh:"泛输血破盾"}},PHYSIS_II:{id:24302,name:"Physis II",label:{zh:"自生 II"}},HOLOS:{id:24310,name:"Holos",label:{zh:"整体论"}},PEPSIS:{id:24301,name:"Pepsis",label:{zh:"消化"}},KARDIA:{id:24285,name:"Kardia",label:{zh:"心关"}},EUKRASIA:{id:24290,name:"Eukrasia",label:{zh:"均衡"}},SOTERIA:{id:24294,name:"Soteria",label:{zh:"拯救"}},ICARUS:{id:24295,name:"Icarus",label:{zh:"神翼"}},ZOE:{id:24300,name:"Zoe",label:{zh:"活化"}},KRASIS:{id:24317,name:"Krasis",label:{zh:"混合"}},PHILOSOPHIA:{id:37035,name:"Philosophia",label:{zh:"智慧之爱"}},RHIZOMATA:{id:24309,name:"Rhizomata",label:{zh:"根素"}},DRUOCHOLE:{id:24296,name:"Druochole",label:{zh:"灵橡清汁"}},IXOCHOLE:{id:24299,name:"Ixochole",label:{zh:"寄生清汁"}},KERACHOLE:{id:24298,name:"Kerachole",label:{zh:"坚角清汁"}},TAUROCHOLE:{id:24303,name:"Taurochole",label:{zh:"白牛清汁"}},DOSIS:{id:24283,name:"Dosis",label:{zh:"注药"}},DOSIS_II:{id:24306,name:"Dosis II",label:{zh:"注药 II"}},DOSIS_III:{id:24312,name:"Dosis III",label:{zh:"注药 III"}},EUKRASIAN_DOSIS:{id:24293,name:"Eukrasian Dosis",label:{zh:"均衡注药"}},EUKRASIAN_DOSIS_II:{id:24308,name:"Eukrasian Dosis II",label:{zh:"均衡注药 II"}},EUKRASIAN_DOSIS_III:{id:24314,name:"Eukrasian Dosis III",label:{zh:"均衡注药 III"}},TOXIKON:{id:24304,name:"Toxikon",label:{zh:"箭毒"}},TOXIKON_II:{id:24316,name:"Toxikon II",label:{zh:"箭毒 II"}},DYSKRASIA:{id:24297,name:"Dyskrasia",label:{zh:"失衡"}},DYSKRASIA_II:{id:24315,name:"Dyskrasia II",label:{zh:"失衡 II"}},EUKRASIAN_DYSKRASIA:{id:37032,name:"Eukrasian Dyskrasia",label:{zh:"均衡失衡"}},PHLEGMA:{id:24289,name:"Phlegma",label:{zh:"发炎"}},PHLEGMA_II:{id:24307,name:"Phlegma II",label:{zh:"发炎 II"}},PHLEGMA_III:{id:24313,name:"Phlegma III",label:{zh:"发炎 III"}},PSYCHE:{id:37033,name:"Psyche",label:{zh:"心神风息"}},PNEUMA:{id:24318,name:"Pneuma",label:{zh:"魂灵风息"}}}),KM=$()({cd_HAIMA:{name:"cd_Haima"},cd_PANHAIMA:{name:"cd_PANHAIMA"},cd_PHYSIS:{name:"cd_PHYSIS",label:{zh:"CD：自生"}},cd_HOLOS:{name:"cd_HOLOS"},cd_PEPSIS:{name:"cd_PEPSIS"},cd_KARDIA:{name:"cd_KARDIA"},cd_EUKRASIA:{name:"cd_EUKRASIA"},cd_SOTERIA:{name:"cd_SOTERIA"},cd_ICARUS:{name:"cd_ICARUS"},cd_ZOE:{name:"cd_ZOE"},cd_KRASIS:{name:"cd_KRASIS"},cd_PHILOSOPHIA:{name:"cd_PHILOSOPHIA"},cd_RHIZOMATA:{name:"cd_RHIZOMATA"},cd_DRUOCHOLE:{name:"cd_DRUOCHOLE"},cd_IXOCHOLE:{name:"cd_IXOCHOLE"},cd_KERACHOLE:{name:"cd_KERACHOLE"},cd_TAUROCHOLE:{name:"cd_TAUROCHOLE"},cd_PHLEGMA:{name:"cd_PHLEGMA"},cd_PSYCHE:{name:"cd_PSYCHE"},cd_PNEUMA:{name:"cd_PNEUMA"},cd_DIAGNOSIS_POP:{name:"cd_DIAGNOSIS_POP",label:{zh:"CD：均衡诊断破盾"}},cd_PROGNOSIS_POP:{name:"cd_PROGNOSIS_POP",label:{zh:"CD：均衡预后破盾"}},cd_HAIMA_POP:{name:"cd_HAIMA_POP"},cd_PANHAIMA_POP:{name:"cd_PANHAIMA_POP"}}),VM=$()({ADDERSGALL:{name:"Addersgall",label:{zh:"蛇胆"}},ADDERSTING:{name:"Addersting",label:{zh:"蛇刺"}}}),MN=$()({EUKRASIA:{id:2606,name:"Eukrasia",label:{zh:"均衡"}},EUKRASIAN_DIAGNOSIS:{id:2607,name:"Eukrasian Diagnosis",label:{zh:"均衡诊断"}},DIFFERENTIAL_DIAGNOSIS:{id:2608,name:"Differential Diagnosis",label:{zh:"齐衡诊断"}},HAIMA:{id:2612,name:"Haima",label:{zh:"输血"},mayNotBeCanceled:!0},HAIMATINON:{id:2642,name:"Haimatinon",label:{zh:"血印"},maximumStacks:5,mayNotBeCanceled:!0},EUKRASIAN_PROGNOSIS:{id:2609,name:"Eukrasian Prognosis",label:{zh:"均衡预后"}},PANHAIMA:{id:2613,name:"Panhaima",label:{zh:"泛输血"},mayNotBeCanceled:!0},PANHAIMATINON:{id:2643,name:"Panhaimatinon",label:{zh:"泛血印"},maximumStacks:5,mayNotBeCanceled:!0},PHYSIS_II:{id:2620,name:"Physis II",label:{zh:"自生 II"}},AUTOPHYSIS:{id:2621,name:"Autophysis",label:{zh:"催进"}},KARDIA:{id:2604,name:"Kardia",label:{zh:"心关"}},KARDION:{id:2605,name:"Kardion",label:{zh:"关心"}},PHILOSOPHIA:{id:3898,name:"Philosophia",label:{zh:"智慧之爱"}},EUDAIMONIA:{id:3899,name:"Eudaimonia",label:{zh:"幸福"}},SOTERIA:{id:2610,name:"Soteria",label:{zh:"拯救"},maximumStacks:4},ZOE:{id:2611,name:"Zoe",label:{zh:"活化"}},KRASIS:{id:2622,name:"Krasis",label:{zh:"混合"}},KERACHOLE:{id:2618,name:"Kerachole",label:{zh:"坚角清汁"}},KERAKEIA:{id:2938,name:"Kerakeia",label:{zh:"坚角清汁[回]"}},TAUROCHOLE:{id:2619,name:"Taurochole",label:{zh:"白牛清汁"}},EUKRASIAN_DOSIS:{id:2614,name:"Eukrasian Dosis",label:{zh:"均衡注药"}},EUKRASIAN_DOSIS_II:{id:2615,name:"Eukrasian Dosis II",label:{zh:"均衡注药 II"}},EUKRASIAN_DOSIS_III:{id:2616,name:"Eukrasian Dosis III",label:{zh:"均衡注药 III"}},EUKRASIAN_DYSKRASIA:{id:3897,name:"Eukrasian Dyskrasia",label:{zh:"均衡失衡"}},PNEUMA:{id:2623,name:"Pneuma",label:{zh:"魂灵风息"}},HOLOS:{id:3003,name:"Holos",label:{zh:"整体论"}},HOLOSAKOS:{id:3365,name:"Holosakos",label:{zh:"整体盾"}}}),WM=$()({PEPSIS:{name:"Pepsis",label:{zh:"消化"}}}),qM=$()({OFFENSIVE_MAGIC_MASTERY:{name:"Offensive Magic Mastery",level:72},OFFENSIVE_MAGIC_MASTERY_II:{name:"Offensive Magic Mastery II",level:82},ENHANCED_KERACHOLE:{name:"Enhanced Kerachole",level:78},ENHANCED_HEALING_MAGIC:{name:"Enhanced Healing Magic",level:85},ENHANCED_ZOE:{name:"Enhanced Zoe",level:88},ENHANCED_SOTERIA:{name:"Enhanced Soteria",level:94},EUKRASIAN_PROGNOSIS_MASTERY:{name:"Eukrasian Prognosis Mastery",level:96},ENHANCED_PHYSIS_II:{name:"Enhanced Physis II",level:98}}),XM={...VM,...MN,...WM},ZM=$()({SUMMON_CARBUNCLE:{id:25798,name:"Summon Carbuncle",label:{zh:"宝石兽召唤"}},RADIANT_AEGIS:{id:25799,name:"Radiant Aegis",label:{zh:"守护之光"}},PHYSICK:{id:16230,name:"Physick",label:{zh:"医术"}},GEMSHINE:{id:25883,name:"Gemshine",label:{zh:"宝石耀"}},FESTER:{id:181,name:"Fester",label:{zh:"溃烂爆发"}},ENERGY_DRAIN:{id:16508,name:"Energy Drain",label:{zh:"能量吸收"}},RESURRECTION:{id:173,name:"Resurrection",label:{zh:"复生"}},OUTBURST:{id:16511,name:"Outburst",label:{zh:"迸裂"}},PRECIOUS_BRILLIANCE:{id:25884,name:"Precious Brilliance",label:{zh:"宝石辉"}},RUBY_OUTBURST:{id:25814,name:"Ruby Outburst",label:{zh:"红宝石迸裂"}},TOPAZ_OUTBURST:{id:25815,name:"Topaz Outburst",label:{zh:"黄宝石迸裂"}},EMERALD_OUTBURST:{id:25816,name:"Emerald Outburst",label:{zh:"绿宝石迸裂"}},SUMMON_IFRIT:{id:25805,name:"Summon Ifrit",label:{zh:"火神召唤"}},PAINFLARE:{id:3578,name:"Painflare",label:{zh:"痛苦核爆"}},SUMMON_TITAN:{id:25806,name:"Summon Titan",label:{zh:"土神召唤"}},SUMMON_GARUDA:{id:25807,name:"Summon Garuda",label:{zh:"风神召唤"}},ENERGY_SIPHON:{id:16510,name:"Energy Siphon",label:{zh:"能量抽取"}},RUBY_RUIN_III:{id:25817,name:"Ruby Ruin III",label:{zh:"红宝石毁荡"}},TOPAZ_RUIN_III:{id:25818,name:"Topaz Ruin III",label:{zh:"黄宝石毁荡"}},EMERALD_RUIN_III:{id:25819,name:"Emerald Ruin III",label:{zh:"绿宝石毁荡"}},RUIN_III:{id:3579,name:"Ruin III",label:{zh:"毁荡"}},ASTRAL_IMPULSE:{id:25820,name:"Astral Impulse",label:{zh:"星极脉冲"}},ASTRAL_FLARE:{id:25821,name:"Astral Flare",label:{zh:"星极核爆"}},ASTRAL_FLOW:{id:25822,name:"Astral Flow",label:{zh:"星极超流"}},DEATHFLARE:{id:3582,name:"Deathflare",label:{zh:"死星核爆"}},RUIN_IV:{id:7426,name:"Ruin IV",label:{zh:"毁绝"}},SEARING_LIGHT:{id:25801,name:"Searing Light",label:{zh:"灼热之光"}},SUMMON_BAHAMUT:{id:7427,name:"Summon Bahamut",label:{zh:"龙神召唤"}},ENKINDLE_BAHAMUT:{id:7429,name:"Enkindle Bahamut",label:{zh:"龙神迸发"}},RUBY_RITE:{id:25823,name:"Ruby Rite",label:{zh:"红宝石之仪"}},TOPAZ_RITE:{id:25824,name:"Topaz Rite",label:{zh:"黄宝石之仪"}},EMERALD_RITE:{id:25825,name:"Emerald Rite",label:{zh:"绿宝石之仪"}},TRI_DISASTER:{id:25826,name:"Tri-disaster",label:{zh:"三重灾祸"}},RUBY_DISASTER:{id:25827,name:"Ruby Disaster",label:{zh:"红宝石灾祸"}},TOPAZ_DISASTER:{id:25828,name:"Topaz Disaster",label:{zh:"黄宝石灾祸"}},EMERALD_DISASTER:{id:25829,name:"Emerald Disaster",label:{zh:"绿宝石灾祸"}},SUMMON_PHOENIX:{id:25831,name:"Summon Phoenix",label:{zh:"不死鸟召唤"}},FOUNTAIN_OF_FIRE:{id:16514,name:"Fountain of Fire",label:{zh:"灵泉之炎"}},BRAND_OF_PURGATORY:{id:16515,name:"Brand of Purgatory",label:{zh:"炼狱之炎"}},REKINDLE:{id:25830,name:"Rekindle",label:{zh:"苏生之炎"}},ENKINDLE_PHOENIX:{id:16516,name:"Enkindle Phoenix",label:{zh:"不死鸟迸发"}},RUBY_CATASTROPHE:{id:25832,name:"Ruby Catastrophe",label:{zh:"红宝石灾变"}},TOPAZ_CATASTROPHE:{id:25833,name:"Topaz Catastrophe",label:{zh:"黄宝石灾变"}},EMERALD_CATASTROPHE:{id:25834,name:"Emerald Catastrophe",label:{zh:"绿宝石灾变"}},CRIMSON_CYCLONE:{id:25835,name:"Crimson Cyclone",label:{zh:"深红旋风"}},CRIMSON_STRIKE:{id:25885,name:"Crimson Strike",label:{zh:"深红强袭"}},MOUNTAIN_BUSTER:{id:25836,name:"Mountain Buster",label:{zh:"山崩"}},SLIPSTREAM:{id:25837,name:"Slipstream",label:{zh:"螺旋气流"}},SUMMON_IFRIT_II:{id:25838,name:"Summon Ifrit II",label:{zh:"火神召唤 II"}},SUMMON_TITAN_II:{id:25839,name:"Summon Titan II",label:{zh:"土神召唤 II"}},SUMMON_GARUDA_II:{id:25840,name:"Summon Garuda II",label:{zh:"风神召唤 II"}},NECROTIZE:{id:36990,name:"Necrotize",label:{zh:"坏死爆发"}},SEARING_FLASH:{id:36991,name:"Searing Flash",label:{zh:"灼热之闪"}},SUMMON_SOLAR_BAHAMUT:{id:36992,name:"Summon Solar Bahamut",label:{zh:"烈日龙神召唤"}},UMBRAL_IMPULSE:{id:36994,name:"Umbral Impulse",label:{zh:"灵极脉冲"}},UMBRAL_FLARE:{id:36995,name:"Umbral Flare",label:{zh:"灵极核爆"}},SUNFLARE:{id:36996,name:"Sunflare",label:{zh:"烈日核爆"}},ENKINDLE_SOLAR_BAHAMUT:{id:36998,name:"Enkindle Solar Bahamut",label:{zh:"烈日龙神迸发"}},LUX_SOLARIS:{id:36997,name:"Lux Solaris",label:{zh:"日光普照"}},INFERNO:{id:25852,name:"Inferno",label:{zh:"地狱之火炎"}},EARTHEN_FURY:{id:25853,name:"Earthen Fury",label:{zh:"大地之怒"}},AERIAL_BLAST:{id:25854,name:"Aerial Blast",label:{zh:"大气爆发"}},WYRMWAVE:{id:7428,name:"Wyrmwave",label:{zh:"真龙波"}},SCARLET_FLAME:{id:16519,name:"Scarlet Flame",label:{zh:"赤焰"}},LUXWAVE:{id:36993,name:"Luxwave",label:{zh:"光芒"}},AKH_MORN:{id:7449,name:"Akh Morn",label:{zh:"死亡轮回"}},REVELATION:{id:16518,name:"Revelation",label:{zh:"天启"}},EXODUS:{id:36999,name:"Exodus",label:{zh:"众生离绝"}}}),QM=$()({cd_RADIANT_AEGIS:{name:"cd_RADIANT_AEGIS"},cd_ASTRAL_FLOW:{name:"cd_ASTRAL_FLOW"},cd_ENKINDLE:{name:"cd_ENKINDLE",label:{zh:"CD：龙神/烈日龙神/不死鸟迸发"}},cd_DEMI_SUMMON:{name:"cd_DEMI_SUMMON",label:{zh:"CD：亚灵神召唤"}},cd_ENERGY_DRAIN:{name:"cd_ENERGY_DRAIN"},cd_AETHERFLOW:{name:"cd_AETHERFLOW",label:{zh:"CD：以太超流"}},cd_SEARING_LIGHT:{name:"cd_SEARING_LIGHT"},cd_SEARING_FLASH:{name:"cd_SEARING_FLASH"},cd_LUX_SOLARIS:{name:"cd_LUX_SOLARIS"},cd_MOUNTAIN_BUSTER:{name:"cd_MOUNTAIN_BUSTER"},cd_SUMMON_LOCKOUT:{name:"cd_SUMMON_LOCKOUT"}}),$M=$()({AETHERFLOW:{name:"Aetherflow",label:{zh:"以太超流"}},RUBY_ARCANUM:{name:"Ruby Arcanum",label:{zh:"红宝石的奥秘"}},TOPAZ_ARCANUM:{name:"Topaz Arcanum",label:{zh:"黄宝石的奥秘"}},EMERALD_ARCANUM:{name:"Emerald Arcanum",label:{zh:"绿宝石的奥秘"}},FIRE_ATTUNEMENT:{name:"Fire Attunement",label:{zh:"火属性以太"}},EARTH_ATTUNEMENT:{name:"Earth Attunement",label:{zh:"土属性以太"}},WIND_ATTUNEMENT:{name:"Wind Attunement",label:{zh:"风属性以太"}},ACTIVE_DEMI:{name:"Active Demi",label:{zh:"同调量谱"}}}),NR=$()({AETHERFLOW:{name:"Aetherflow",maximumStacks:2,label:{zh:"以太超流"}},CRIMSON_STRIKE_READY:{name:"Crimson Strike Ready",label:{zh:"深红强袭预备"}},EVERLASTING_FLIGHT:{name:"Everlasting Flight",label:{zh:"不死鸟之翼"}},FURTHER_RUIN:{name:"Further Ruin",label:{zh:"毁绝预备"}},GARUDAS_FAVOR:{name:"Garuda's Favor",label:{zh:"螺旋气流预备"}},IFRITS_FAVOR:{name:"Ifrit's Favor",label:{zh:"深红旋风预备"}},RADIANT_AEGIS:{name:"Radiant Aegis",label:{zh:"守护之光"}},REFULGENT_LUX:{name:"Refulgent Lux",label:{zh:"日光普照预备"}},REKINDLE:{name:"Rekindle",label:{zh:"苏生之炎"}},RUBYS_GLIMMER:{name:"Ruby's Glimmer",label:{zh:"灼热之闪预备"}},SEARING_LIGHT:{name:"Searing Light",label:{zh:"灼热之光"}},SLIPSTREAM:{name:"Slipstream",mayBeToggled:!0,label:{zh:"螺旋气流"}},TITANS_FAVOR:{name:"Titan's Favor",label:{zh:"山崩预备"}},UNDYING_FLAME:{name:"Undying Flame",label:{zh:"苏生之炎"}}}),JM=$()({NEXT_DEMI_CYCLE:{name:"Next Demi Cycle",label:{zh:"亚灵神循环"}},DEMI_AUTO:{name:"Demi Auto-attack",label:{zh:"亚灵神自动攻击"}}}),eL=$()({RUIN_MASTERY_III:{name:"Ruin Mastery III",level:72},OUTBURST_MASTERY:{name:"Outburst Mastery",level:74},ENHANCED_SUMMON_BAHAMUT:{name:"Enhanced Summon Bahamut",level:80},OUTBURST_MASTERY_II:{name:"Outburst Mastery II",level:82},RUIN_MASTERY_IV:{name:"Ruin Mastery IV",level:84},ELEMENTAL_MASTERY:{name:"Elemental Mastery",level:86},ENHANCED_RADIANT_AEGIS:{name:"Enhanced Radiant Aegis",level:88},ENKINDLE_II:{name:"Enkindle II",level:90},ENHANCED_FESTER:{name:"Enhanced Fester",level:92},ARCANE_MASTERY:{name:"Arcane Mastery",level:94},ENHANCED_SEARING_LIGHT:{name:"Enhanced Searing Light",level:96},ENHANCED_SUMMON_BAHAMUT_II:{name:"Enhanced Summon Bahamut II",level:100}}),tL={...$M,...NR,...JM},aL=$()({}),nL=$()({}),iL=$()({}),lL=$()({}),oL=$()({}),sL=$()({}),rL={...iL,...lL,...oL},cL=$()({HEAVY_SWING:{id:31,name:"Heavy Swing",label:{zh:"重劈"}},MAIM:{id:37,name:"Maim",label:{zh:"凶残裂"}},STORMS_PATH:{id:42,name:"Storms Path",label:{zh:"暴风斩"}},STORMS_EYE:{id:45,name:"Storms Eye",label:{zh:"暴风碎"}},FELL_CLEAVE:{id:3549,name:"Fell Cleave",label:{zh:"裂石飞环"}},UPHEAVAL:{id:7387,name:"Upheaval",label:{zh:"动乱"}},ONSLAUGHT:{id:7386,name:"Onslaught",label:{zh:"猛攻"}},TOMAHAWK:{id:46,name:"Tomahawk",label:{zh:"飞斧"}},OVERPOWER:{id:41,name:"Overpower",label:{zh:"超压斧"}},MYTHRIL_TEMPEST:{id:16462,name:"Mythril Tempest",label:{zh:"秘银暴风"}},DECIMATE:{id:3550,name:"Decimate",label:{zh:"地毁人亡"}},OROGENY:{id:25752,name:"Orogeny",label:{zh:"群山隆起"}},INNER_RELEASE:{id:7389,name:"Inner Release",label:{zh:"原初的解放"}},PRIMAL_WRATH:{id:36924,name:"Primal Wrath",label:{zh:"原初的怒震"}},PRIMAL_REND:{id:25753,name:"Primal Rend",label:{zh:"蛮荒崩裂"}},PRIMAL_RUINATION:{id:36925,name:"Primal Ruination",label:{zh:"尽毁"}},INFURIATE:{id:52,name:"Infuriate",label:{zh:"战嚎"}},INNER_CHAOS:{id:16465,name:"Inner Chaos",label:{zh:"狂魂"}},CHAOTIC_CYCLONE:{id:16463,name:"Chaotic Cyclone",label:{zh:"混沌旋风"}},THRILL_OF_BATTLE:{id:40,name:"Thrill of Battle",label:{zh:"战栗"}},EQUILIBRIUM:{id:3552,name:"Equilibrium",label:{zh:"泰然自若"}},SHAKE_IT_OFF:{id:7388,name:"Shake It Off",label:{zh:"摆脱"}},RAW_INTUITION:{id:3551,name:"Raw Intuition",label:{zh:"原初的直觉"}},NASCENT_FLASH:{id:16464,name:"Nascent Flash",label:{zh:"原初的勇猛"}},BLOODWHETTING:{id:25751,name:"Bloodwhetting",label:{zh:"原初的血气"}},VENGEANCE:{id:44,name:"Vengeance",label:{zh:"复仇"}},DAMNATION:{id:36923,name:"Damnation",label:{zh:"戮罪"}},HOLMGANG:{id:43,name:"Holmgang",label:{zh:"死斗"}},DEFIANCE:{id:48,name:"Defiance",label:{zh:"守护"}},RELEASE_DEFIANCE:{id:32066,name:"Release Defiance",label:{zh:"取消守护"}}}),uL=$()({cd_INNER_RELEASE:{name:"cd_InnerRelease"},cd_PRIMAL_WRATH:{name:"cd_PrimalWrath"},cd_UPHEAVAL:{name:"cd_Upheaval"},cd_ONSLAUGHT:{name:"cd_Onslaught"},cd_INFURIATE:{name:"cd_Infuriate"},cd_VENGEANCE:{name:"cd_Vengeance"},cd_THRILL_OF_BATTLE:{name:"cd_ThrillOfBattle"},cd_RAW_INTUITION:{name:"cd_RawIntuition"},cd_EQUILIBRIUM:{name:"cd_Equilibrium"},cd_SHAKE_IT_OFF:{name:"cd_ShakeItOff"},cd_HOLMGANG:{name:"cd_Holmgang"},cd_DEFIANCE:{name:"cd_Defiance"},cd_RELEASE_DEFIANCE:{name:"cd_ReleaseDefiance"}}),dL=$()({BEAST_GAUGE:{name:"Beast Gauge",label:{zh:"兽魂量谱"}}}),CR=$()({SURGING_TEMPEST:{name:"Surging Tempest",label:{zh:"战场风暴buff"}},INNER_RELEASE:{name:"Inner Release",label:{zh:"原初的解放buff"},maximumStacks:3},INNER_STRENGTH:{name:"Inner Strength",label:{zh:"原初的觉悟buff"}},BURGEONING_FURY:{name:"Burgeoning Fury",label:{zh:"原初的搏动buff"},maximumStacks:3},WRATHFUL:{name:"Wrathful",label:{zh:"原初的怒震预备"}},PRIMAL_REND_READY:{name:"Primal Rend Ready",label:{zh:"蛮荒崩裂预备"}},PRIMAL_RUINATION_READY:{name:"Primal Ruination Ready",label:{zh:"尽毁预备"}},NASCENT_CHAOS:{name:"Nascent Chaos",label:{zh:"原初的混沌buff"}},NASCENT_FLASH:{name:"Nascent Flash",label:{zh:"原初的勇猛buff（给队友）"}},THRILL_OF_BATTLE:{name:"Thrill of Battle",label:{zh:"战栗"}},EQUILIBRIUM:{name:"Equilibrium",label:{zh:"泰然自若的hot"}},SHAKE_IT_OFF:{name:"Shake It Off",label:{zh:"摆脱的盾"}},SHAKE_IT_OFF_OVER_TIME:{name:"Shake It Off Over Time",label:{zh:"摆脱的hot"}},RAW_INTUITION:{name:"Raw Intuition",label:{zh:"原初的直觉buff"}},STEM_THE_TIDE:{name:"Stem the Tide",label:{zh:"原初的血烟（挡伤害buff）"}},STEM_THE_FLOW:{name:"Stem the Flow",label:{zh:"原初的勇猛buff（给队友）"}},BLOODWHETTING:{name:"Bloodwhetting",label:{zh:"原初的血气（吸血buff）"}},VENGEANCE:{name:"Vengeance",label:{zh:"复仇减伤30"}},DAMNATION:{name:"Damnation",label:{zh:"戮罪减伤40"}},PRIMEVAL_IMPULSE:{name:"Primeval Impulse",label:{zh:"讨罪hot"}},HOLMGANG:{name:"Holmgang",label:{zh:"死斗buff"}},DEFIANCE:{name:"Defiance",label:{zh:"盾姿buff"},mayNotBeCanceled:!0}}),fL=$()({STORM_COMBO:{name:"Storm Combo",label:{zh:"单体连击"}},TEMPEST_COMBO:{name:"Tempest Combo",label:{zh:"aoe连击"}}}),hL=$()({NASCENT_CHAOS:{name:"Nascent Chaos",level:72},MASTERING_THE_BEAST:{name:"Mastering the Beast",level:74},ENHANCED_SHAKE_IT_OFF:{name:"Enhanced Shake It Off",level:76},ENHANCED_THRILL_OF_BATTLE:{name:"Enhanced Thrill of Battle",level:78},RAW_INTUITION_MASTERY:{name:"Raw Intuition Mastery",level:82},ENHANCED_NASCENT_FLASH:{name:"Enhanced Nascent Flash",level:82},ENHANCED_EQUILIBRIUM:{name:"Enhanced Equilibrium",level:84},ENHANCED_ONSLAUGHT:{name:"Enhanced Onslaught",level:88},VENGEANCE_MASTERY:{name:"Vengeance Mastery",level:92},ENHANCED_INNER_RELEASE:{name:"Enhanced Inner Release",level:96},ENHANCED_PRIMAL_REND:{name:"Enhanced Primal Rend",level:100}}),EL={...dL,...CR,...fL},AL=$()({}),mL=$()({}),RL=$()({}),TL=$()({}),SL=$()({}),gL=$()({}),_L={...RL,...TL,...SL},pL=$()({WATER_CANNON:{name:"Water Cannon",label:{zh:"水泡(2秒200)"}},SONIC_BOOM:{name:"Sonic Boom",label:{zh:"音爆(1秒210)"}},SHARPENED_KNIFE:{name:"Sharpened Knife",label:{zh:"锋利菜刀(1秒220)"}},HYDRO_PULL:{name:"Hydro Pull",label:{zh:"水力吸引(2秒220)"}},MOON_FLUTE:{name:"Moon Flute",label:{zh:"月之笛"}},DIAMONDBACK:{name:"Diamondback",label:{zh:"超硬化"}},SONG_OF_TORMENT:{name:"Song of Torment",label:{zh:"苦闷之歌"}},WHISTLE:{name:"Whistle",label:{zh:"口笛"}},BRISTLE:{name:"Bristle",label:{zh:"蓄力"}},TINGLE:{name:"Tingle",label:{zh:"哔哩哔哩"}},FINAL_STING:{name:"Final Sting",label:{zh:"终极针"}},COLD_FOG:{name:"Cold Fog",label:{zh:"彻骨雾寒"}},WHITE_DEATH:{name:"White Death",label:{zh:"冰雾"}},POP_COLD_FOG:{name:"Pop Cold Fog",label:{zh:"冰雾触发"}},PHANTOM_FLURRY:{name:"Phantom Flurry",label:{zh:"鬼宿脚"}},END_PHANTOM_FLURRY:{name:"End Phantom Flurry",label:{zh:"鬼宿脚"}},MATRA_MAGIC:{name:"Matra Magic",label:{zh:"魔术"}},WINGED_REPROBATION:{name:"Winged Reprobation",label:{zh:"断罪飞翔"}},CONVICTION_MARCATO:{name:"Conviction Marcato",label:{zh:"加强信音"}},REVENGE_BLAST:{name:"Revenge Blast",label:{zh:"复仇冲击"}},WILD_RAGE:{name:"Wild Rage",label:{zh:"兽魂的愤怒"}},GOBLIN_PUNCH:{name:"Goblin Punch",label:{zh:"哥布林乱拳"}},THE_ROSE_OF_DESTRUCTION:{name:"The Rose of Destruction",label:{zh:"斗灵弹"}},ERUPTION:{name:"Eruption",label:{zh:"地火喷发"}},FEATHER_RAIN:{name:"Feather Rain",label:{zh:"飞翎雨"}},MOUNTAIN_BUSTER:{name:"Mountain Buster",label:{zh:"山崩"}},SHOCK_STRIKE:{name:"Shock Strike",label:{zh:"轰雷"}},GLASS_DANCE:{name:"Glass Dance",label:{zh:"冰雪乱舞"}},QUASAR:{name:"Quasar",label:{zh:"类星体"}},J_KICK:{name:"J Kick",label:{zh:"正义飞踢"}},TRIPLE_TRIDENT:{name:"Triple Trident",label:{zh:"渔叉三段"}},BOTH_ENDS:{name:"Both Ends",label:{zh:"如意大旋风"}},NIGHTBLOOM:{name:"Nightbloom",label:{zh:"月下彼岸花"}},SEA_SHANTY:{name:"Sea Shanty",label:{zh:"咕噜咕噜"}},APOKALYPSIS:{name:"Apokalypsis",label:{zh:"启示录"}},BEING_MORTAL:{name:"Being Mortal",label:{zh:"终有一死"}},BREATH_OF_MAGIC:{name:"Breath of Magic",label:{zh:"魔法吐息"}},MORTAL_FLAME:{name:"Mortal Flame",label:{zh:"必灭之炎"}},SURPANAKHA:{name:"Surpanakha",label:{zh:"穿甲散弹"}}}),IL=$()({cd_ERUPTION:{name:"cd_Eruption",label:{zh:"CD: 地火/飞翎雨"}},cd_SHOCK_STRIKE:{name:"cd_Shock_Strike",label:{zh:"CD: 轰雷/地裂"}},cd_GLASS_DANCE:{name:"cd_Glass_Dance",label:{zh:"CD: 冰雪乱舞"}},cd_SURPANAKHA:{name:"cd_Surpanakha",label:{zh:"CD: 穿甲散弹"}},cd_QUASAR:{name:"cd_Quasar",label:{zh:"CD: 类星体/飞踢"}},cd_NIGHTBLOOM:{name:"cd_Nightbloom",label:{zh:"CD: 大旋风/彼岸花"}},cd_SEA_SHANTY:{name:"cd_Sea_Shanty",label:{zh:"CD: 咕噜咕噜"}},cd_BEING_MORTAL:{name:"cd_Being_Mortal",label:{zh:"CD: 启示录/终有一死"}},cd_COLD_FOG:{name:"cd_Cold_Fog",label:{zh:"CD: 彻骨雾寒"}},cd_TRIPLE_TRIDENT:{name:"cd_Triple_Trident",label:{zh:"CD: 渔叉三段"}},cd_PHANTOM_FLURRY:{name:"cd_Phantom_Flurry",label:{zh:"CD: 鬼宿脚"}},cd_COLD_FOG_POP:{name:"cd_Cold_Fog_Pop",label:{zh:"CD: 彻骨雾寒触发"}},cd_MATRA_MAGIC:{name:"cd_Matra_Magic",label:{zh:"CD: 魔术"}},cd_WINGED_REPROBATION:{name:"cd_Winged_Reprobation",label:{zh:"CD: 断罪飞翔"}},cd_THE_ROSE_OF_DESTRUCTION:{name:"cd_The_Rose_of_Destruction",label:{zh:"CD: 斗灵弹"}},cd_SURPANAKHA_LOCKOUT:{name:"cd_SurpanakhaLockout",label:{zh:"CD: 穿甲散弹"}}}),NL=$()({}),bR=$()({NIGHTBLOOM:{name:"Bleeding",label:{zh:"出血（彼岸花）"}},SONG_OF_TORMENT:{name:"Bleeding",label:{zh:"出血（苦闷）"}},FEATHER_RAIN:{name:"Feather Rain",label:{zh:"裂伤"}},WAXING_NOCTURNE:{name:"Waxing Nocturne",label:{zh:"狂战士化"}},WANING_NOCTURNE:{name:"Waning Nocturne",label:{zh:"狂战士化的副作用"}},WHISTLE:{name:"Whistle",label:{zh:"口笛"}},BRISTLE:{name:"Bristle",label:{zh:"蓄力"}},TINGLE:{name:"Tingle",label:{zh:"哔哩哔哩"}},COLD_FOG:{name:"Cold Fog",label:{zh:"彻骨雾寒"}},TOUCH_OF_FROST:{name:"Touch of Frost",label:{zh:"冰雾"}},PHANTOM_FLURRY:{name:"Phantom Flurry",label:{zh:"鬼宿脚"}},DIAMONDBACK:{name:"Diamondback",label:{zh:"超硬化"}},APOKALYPSIS:{name:"Apokalypsis",label:{zh:"启示录"}},WINGED_REDEMPTION:{name:"Winged Redemption",label:{zh:"完美神的祝福"}},BREATH_OF_MAGIC:{name:"Breath of Magic",label:{zh:"魔法吐息"}},MORTAL_FLAME:{name:"Mortal Flame",label:{zh:"必灭之炎"}},WINGED_REPROBATION:{name:"Winged Reprobation",label:{zh:"断罪飞翔"},maximumStacks:4},SURPANAKHAS_FURY:{name:"Surpanakha's Fury",label:{zh:"穿甲散弹"},maximumStacks:4},BRUSH_WITH_DEATH:{name:"Brush with Death",label:{zh:"意志薄弱"}}}),CL=$()({SURPANAKHA_LOCKOUT:{name:"Supranakha Lockout",label:{zh:"断罪飞翔"}}}),bL=$()({}),OL={...NL,...bR,...CL},DL=$()({NEVER:{name:"Never"},TINCTURE:{name:"Tincture",label:{zh:"爆发药",ja:"薬"}},SPRINT:{name:"Sprint",label:{zh:"疾跑",ja:"スプリント"}}}),yL=$()({NEVER:{name:"Never"},cd_GCD:{name:"cd_GCD",label:{zh:"GCD"}},cd_TINCTURE:{name:"cd_Tincture"},cd_SPRINT:{name:"cd_Sprint"}}),vL=$()({MANA:{name:"Mana",label:{zh:"MP"}}}),ML=$()({TINCTURE:{name:"Tincture",label:{zh:"爆发药"}},SPRINT:{name:"Sprint",label:{zh:"疾跑"}}}),LL=$()({MOVEMENT:{name:"Movement"},NOT_ANIMATION_LOCKED:{name:"NotAnimationLocked"},NOT_CASTER_TAXED:{name:"NotCasterTaxed"},IN_COMBAT:{name:"InCombat",label:{zh:"战斗中"}},AUTOS_ENGAGED:{name:"Autos Engaged"},STORED_AUTO:{name:"Stored Auto"},PARTY_SIZE:{name:"PartySize",label:{zh:"小队人数"}},NEVER:{name:"Never"}}),HL=$()({NEVER:{name:"Never",level:1}}),xL={...vL,...ML,...LL},UL=$()({LAST_BASTION:{name:"Last Bastion",label:{zh:"终极堡垒"}},LAND_WAKER:{name:"Land Waker",label:{zh:"原初大地"}},DARK_FORCE:{name:"Dark Force",label:{zh:"暗黑之力"}},GUNMETAL_SOUL:{name:"Gunmetal Soul",label:{zh:"灵魂之青"}}}),kL=$()({PULSE_OF_LIFE:{name:"Pulse of Life"},ANGEL_FEATHERS:{name:"Angel Feathers"},ASTRAL_STASIS:{name:"Astral Stasis"},TECHNE_MAKRE:{name:"Techne Makre"}}),PL=$()({FINAL_HEAVEN:{name:"Final Heaven"},DRAGONSONG_DIVE:{name:"Dragonsong Dive"},CHIMATSURI:{name:"Chimatsuri"},DOOM_OF_THE_LIVING:{name:"Doom of the Living"},THE_END:{name:"The End"},WORLD_SWALLOWER:{name:"World-swallower"}}),GL=$()({SAGITTARIUS_ARROW:{name:"Sagittarius Arrow"},SATELLITE_BEAM:{name:"Satellite Beam"},CRIMSON_LOTUS:{name:"Crimson Lotus"}}),wL=$()({METEOR:{name:"Meteor"},TERAFLARE:{name:"Teraflare"},VERMILLION_SCOURGE:{name:"Vermillion Scourge"},CHROMATIC_FANTASY:{name:"Chromatic Fantasy"}}),BL=$()({LAST_BASTION:{name:"Last Bastion",label:{zh:"终极堡垒（骑士LB3 buff）"}},LAND_WAKER:{name:"Land Waker",label:{zh:"原初大地（战士LB3 buff）"}},DARK_FORCE:{name:"Dark Force",label:{zh:"暗黑之力（黑骑LB3 buff）"}},GUNMETAL_SOUL:{name:"Gunmetal Soul",label:{zh:"灵魂之青（绝枪LB3 buff）"}}}),FL=$()({cd_LIMIT_BREAK_1:{name:"cd_LIMIT_BREAK_1",label:{zh:"CD：一段LB"}},cd_LIMIT_BREAK_2:{name:"cd_LIMIT_BREAK_2",label:{zh:"CD：二段LB"}},cd_LIMIT_BREAK_3:{name:"cd_LIMIT_BREAK_3",label:{zh:"CD：三段LB"}}}),zL=$()({UNKNOWN:{name:"Unknown"},SHIELD_WALL:{name:"Shield Wall"},STRONGHOLD:{name:"Stronghold"},HEALING_WIND:{name:"Healing Wind"},BREATH_OF_THE_EARTH:{name:"Breath of the Earth"},BRAVER:{name:"Braver"},BLADEDANCE:{name:"Bladedance"},BIGSHOT:{name:"Big Shot"},DESPERADO:{name:"Desperado"},SKYSHARD:{name:"Skyshard"},STARSTORM:{name:"Starstorm"}}),LN=$()({UNKNOWN:{name:"Unknown"},SHIELD_WALL:{name:"Shield Wall",label:{zh:"铜墙铁盾（防护LB1 buff）"}},STRONGHOLD:{name:"Stronghold",label:{zh:"坚守要塞（防护LB2 buff）"}}}),jL={...UL,...kL,...PL,...GL,...wL},hl={...zL,...jL},HN={...LN,...BL},YL=$()({ARMS_LENGTH:{name:"Arm's Length",label:{zh:"亲疏自行"}},SECOND_WIND:{name:"Second Wind",label:{zh:"内丹"}},HEAD_GRAZE:{name:"Head Graze",label:{zh:"伤头"}},ESUNA:{name:"Esuna",label:{zh:"康复"}},RESCUE:{name:"Rescue",label:{zh:"营救"}},ADDLE:{name:"Addle",label:{zh:"病毒",ja:"アドル"}},SWIFTCAST:{name:"Swiftcast",label:{zh:"即刻咏唱",ja:"迅速魔"}},LUCID_DREAMING:{name:"Lucid Dreaming",label:{zh:"醒梦",ja:"ルーシッドドリーム"}},SURECAST:{name:"Surecast",label:{zh:"沉稳咏唱",ja:"堅実魔"}},FEINT:{name:"Feint",label:{zh:"牵制"}},BLOODBATH:{name:"Bloodbath",label:{zh:"浴血"}},TRUE_NORTH:{name:"True North",label:{zh:"真北"}},LEG_SWEEP:{name:"Leg Sweep",label:{zh:"扫腿"}},RAMPART:{name:"Rampart",label:{zh:"铁壁"}},REPRISAL:{name:"Reprisal",label:{zh:"雪仇"}},LOW_BLOW:{name:"Low Blow",label:{zh:"下踢"}},INTERJECT:{name:"Interject",label:{zh:"插言"}},PROVOKE:{name:"Provoke",label:{zh:"挑衅"}},SHIRK:{name:"Shirk",label:{zh:"退避"}}}),KL=$()({cd_ADDLE:{name:"cd_Addle"},cd_SWIFTCAST:{name:"cd_Swiftcast"},cd_LUCID_DREAMING:{name:"cd_LucidDreaming"},cd_SURECAST:{name:"cd_Surecast"},cd_SECOND_WIND:{name:"cd_SecondWind"},cd_ARMS_LENGTH:{name:"cd_ArmsLength"},cd_RESCUE:{name:"cd_Rescue"},cd_FEINT:{name:"cd_Feint"},cd_TRUE_NORTH:{name:"cd_TrueNorth"},cd_BLOODBATH:{name:"cd_Bloodbath"},cd_LEG_SWEEP:{name:"cd_LegSweep"},cd_RAMPART:{name:"cd_Rampart"},cd_REPRISAL:{name:"cd_Reprisal"},cd_LOW_BLOW:{name:"cd_LowBlow"},cd_INTERJECT:{name:"cd_Interject"},cd_PROVOKE:{name:"cd_Provoke"},cd_SHIRK:{name:"cd_Shirk"},cd_HEAD_GRAZE:{name:"cd_HeadGraze"}}),VL=$()({ADDLE:{name:"Addle",label:{zh:"昏乱"}},SWIFTCAST:{name:"Swiftcast",label:{zh:"即刻咏唱"}},LUCID_DREAMING:{name:"Lucid Dreaming",label:{zh:"醒梦"}},SURECAST:{name:"Surecast",label:{zh:"沉稳咏唱"}},ARMS_LENGTH:{name:"Arms Length",label:{zh:"亲疏自行"}},FEINT:{name:"Feint",label:{zh:"牵制"}},TRUE_NORTH:{name:"True North",label:{zh:"真北"}},BLOODBATH:{name:"Bloodbath",label:{zh:"浴血"}},RAMPART:{name:"Rampart",label:{zh:"铁壁buff"}},REPRISAL:{name:"Reprisal",label:{zh:"雪仇buff"}}}),WL=$()({REAR_POSITIONAL:{name:"Rear Positional",label:{zh:"身位加成（后）"},mayBeToggled:!0},FLANK_POSITIONAL:{name:"Flank Positional",label:{zh:"身位加成（侧）"},mayBeToggled:!0},AUTOS_ENGAGED:{name:"Autos Engaged",mayBeToggled:!0}}),qL=$()({ENHANCED_SWIFTCAST:{name:"Enhanced Swiftcast",level:94},ENHANCED_ADDLE:{name:"Enhanced Addle",level:98},MAGICK_MASTERY_HEALER:{name:"Magick_Mastery",level:94},ENHANCED_SECOND_WIND:{name:"Enhanced Second Wind",level:94},ENHANCED_FEINT:{name:"Enhanced Feint",level:98},MELEE_MASTERY_TANK:{name:"Melee Mastery",level:84},ENHANCED_RAMPART:{name:"Enhanced Rampart",level:94},MELEE_MASTERY_II_TANK:{name:"Melee Mastery II",level:94},ENHANCED_REPRISAL:{name:"Enhanced Reprisal",level:98}}),xN={...VL,...WL},si={...DL,...YL,...hl,...hM,...cL,...yv,...Uv,...AL,...PM,...$y,...YM,...Wv,...Iv,...eM,...MM,...CM,...aL,...dv,...Fv,...Rv,...lv,...ZM,...SM,...sM,...pL},Xo={...yL,...KL,...FL,...EM,...uL,...vv,...kv,...mL,...GM,...Jy,...KM,...qv,...Nv,...tM,...LM,...bM,...nL,...fv,...zv,...Tv,...ov,...QM,...gM,...rM,...IL},Xe={...xL,...xN,...HN,...TM,...EL,...xv,...Bv,..._L,...jM,...iv,...XM,...Jv,...Dv,...oM,...kM,...vM,...rL,...mv,...Vv,...pv,...uv,...tL,...NM,...fM,...OL},WA={...HL,...qL,...RM,...hL,...Hv,...wv,...gL,...zM,...nv,...qM,...$v,...Ov,...lM,...UM,...yM,...sL,...Av,...Kv,..._v,...cv,...eL,...IM,...dM,...bL};class gf{static getJob(t){return Ot[t]}static getAction(t){return si[t]}static findAction(t){return this.findByName(si,t)}static findActionKey(t){return this.findKeyByName(si,t)}static getResource(t){return Xe[t]}static findResource(t){return this.findByName(Xe,t)}static findResourceKey(t){return this.findKeyByName(Xe,t)}static getCooldown(t){return Xo[t]}static findCooldown(t){return this.findByName(Xo,t)}static findCooldownKey(t){return this.findKeyByName(Xo,t)}static findByName(t,n){return Object.values(t).find(l=>l.name===n)}static findKeyByName(t,n){const l=Object.entries(t).find(([s,c])=>c.name===n);if(l)return l[0]}}function p(e){let t=lo();return t==="zh"&&e.zh?e.zh:t==="ja"&&e.ja?e.ja:e.en}function XL(e,t){{let[n,l,s]=e.split("/");return`20${s}年${n}月${l}日`}}function Sl(e){if(e==="NEVER")return p({en:"unknown skill",zh:"未知技能"}).toString();const t=gf.getAction(e);return p({en:t.name,...t.label}).toString()}function dr(e){if(e===void 0)return p({en:"reason unknown",zh:"未知的理由"}).toString();let t="（未知的理由）";return e===Et.Blocked?t="在CD，能力技后摇，或读条税中":e===Et.SecondaryBlocked?t="在次要的CD中":e===Et.NotEnoughMP?t="MP不足":e===Et.NotInCombat?t="不在战斗中（需先等第一次伤害结算）":e===Et.RequirementsNotMet?t="未满足释放条件":e===Et.SkillNotUnlocked?t="Lv比此技能的习得条件低":e===Et.BuffNoLongerAvailable?t="BUFF以结束":e===Et.PastTargetTime?t="跳时间的目标已经过去了":e===Et.CastCanceled?t="咏唱被中断（确定时不再满足播放条件）":console.error("unlocalized reason: "+e),p({en:e,zh:t}).toString()}const ZL=new Map([[P.LeyLines,"黑魔纹"],[P.Hyperphantasia,"绘灵幻景"],[P.Tincture,"爆发药"],[P.ArcaneCircle,"神秘纹"],[P.ArmysPaeon,"军神的赞美歌歌"],[P.BattleLitany,"战斗连祷"],[P.BattleVoice,"战斗之声"],[P.Brotherhood,"义结金兰"],[P.Card_TheBalance,"太阳神之衡"],[P.Card_TheSpear,"战斗神之枪"],[P.ChainStratagem,"连环计"],[P.Devilment,"进攻之探戈"],[P.Divination,"占卜"],[P.Dokumori,"介毒之术"],[P.Embolden,"鼓励"],[P.MagesBallad,"贤者的叙事谣"],[P.RadiantFinale1,"光明神的最终乐章1"],[P.RadiantFinale2,"光明神的最终乐章2"],[P.RadiantFinale3,"光明神的最终乐章3"],[P.SearingLight,"灼热之光"],[P.StandardFinish,"标准舞步结束"],[P.StarryMuse,"星空构想"],[P.TechnicalFinish,"技巧舞步结束"],[P.WanderersMinuet,"放浪神的小步舞曲"]]),QL=new Map([[P.LeyLines,"黒魔紋"],[P.Tincture,"薬"],[P.ArcaneCircle,"アルケインサークル"],[P.ArmysPaeon,"軍神のパイオン"],[P.BattleLitany,"バトルリタニー"],[P.BattleVoice,"バトルボイス"],[P.Brotherhood,"桃園結義"],[P.Card_TheBalance,"アーゼマの均衡"],[P.Card_TheSpear,"ハルオーネの槍"],[P.ChainStratagem,"連環計"],[P.Devilment,"攻めのタンゴ"],[P.Divination,"ディヴィネーション"],[P.Dokumori,"毒盛の術"],[P.Embolden,"エンボルデン"],[P.MagesBallad,"賢人のバラード"],[P.RadiantFinale1,"光神のフィナーレ1"],[P.RadiantFinale2,"光神のフィナーレ2"],[P.RadiantFinale3,"光神のフィナーレ3"],[P.SearingLight,"シアリングライト"],[P.StandardFinish,"スタンダードフィニッシュ"],[P.StarryMuse,"イマジンスカイ"],[P.TechnicalFinish,"テクニカルフィニッシュ"],[P.WanderersMinuet,"旅神のメヌエット"]]);function UN(e){let t=lo();return t==="zh"?ZL.get(e)??e:t==="ja"?QL.get(e)??e:e}function Wa(e){const t=lo();if(e in Xo){const l=gf.getCooldown(e),s=p({en:l.name,...l.label}).toString();if(t!=="en"&&s===l.name){const c=e.slice(3),d=Object.keys(si).find(f=>si[f].name===c||f===c);if(d!==void 0)return"CD："+Sl(d)}return s}const n=gf.getResource(e);return p({en:n.name,...n.label}).toString()}const vp=new Map([[G.AF3,{en:"AF3",zh:"三层火"}],[G.AF2,{en:"AF2",zh:"二层火"}],[G.AF1,{en:"AF1",zh:"一层火"}],[G.UI3,{en:"UI3",zh:"三层冰"}],[G.UI2,{en:"UI2",zh:"二层冰"}],[G.UI1,{en:"UI1",zh:"一层冰"}],[G.ENO,{en:"enochian",zh:"天语"}],[G.POT,{en:"pot",zh:"爆发药"}],[G.PARTY,{en:"party",zh:"团辅"}],[G.AUTO_CDH,{en:"auto crit/direct hit",zh:"必直暴"}],[G.STARRY,{en:"starry muse",zh:"星空构想"}],[G.EMBOLDEN_M,{en:"embolden",zh:"鼓励"}],[G.MANAFIC,{en:"manafication",zh:"魔元化"}],[G.ACCELERATION,{en:"acceleration",zh:"促进"}],[G.STANDARD_SINGLE,{en:"single standard finish",zh:"单色小舞"}],[G.STANDARD_DOUBLE,{en:"double standard finish",zh:"双色小舞"}],[G.TECHNICAL_SINGLE,{en:"single technical finish",zh:"单色大舞"}],[G.TECHNICAL_DOUBLE,{en:"double technical finish",zh:"双色大舞"}],[G.TECHNICAL_TRIPLE,{en:"triple technical finish",zh:"三色大舞"}],[G.TECHNICAL_QUADRUPLE,{en:"quadruple technical finish",zh:"四色大舞"}],[G.DEVILMENT,{en:"devilment",zh:"探戈"}],[G.OVERHEATED,{en:"overheated",zh:"过热"}],[G.COMBO,{en:"combo",zh:"连击"}],[G.FUGETSU,{en:"fugetsu",zh:"风月"}],[G.AUTO_CRIT,{en:"auto crit",zh:"必暴"}],[G.YATEN,{en:"yaten",zh:"强化夜天"}],[G.POSITIONAL,{en:"positional",zh:"身位"}],[G.ARCANE_CIRCLE,{en:"arcane circle",zh:"神秘环"}],[G.DEATHSDESIGN,{en:"death's design",zh:"死亡烙印"}],[G.ENHANCED_GIBBET_GALLOWS,{en:"enhanced gibbet/gallows",zh:"绞决/缢杀效果提高"}],[G.ENHANCED_REAPING,{en:"enhanced reaping",zh:"虚无/交错收割效果提高"}],[G.IMMORTAL_SACRIFICE,{en:"immortal sacrifice"}],[G.BARRAGE,{en:"barrage"}],[G.RAGING_STRIKES,{en:"raging strikes"}],[G.BATTLE_VOICE,{en:"battle voice"}],[G.RADIANT_FINALE_THREE_CODA,{en:"three coda radiant finale"}],[G.RADIANT_FINALE_TWO_CODA,{en:"two coda radiant finale"}],[G.RADIANT_FINALE_ONE_CODA,{en:"one coda radiant finale"}],[G.WANDERERS_MINUET,{en:"wanderer's minuet"}],[G.MAGES_BALLAD,{en:"mage's ballad"}],[G.ARMYS_PAEON,{en:"army's paeon"}],[G.NO_MERCY,{en:"no mercy",zh:"无情"}],[G.SEARING_LIGHT,{en:"searing light",zh:"灼热之光"}],[G.SURGING_TEMPEST,{en:"surging tempest",zh:"战场风暴"}],[G.POWER_SURGE,{en:"power surge"}],[G.LANCE_CHARGE,{en:"lance charge"}],[G.ENHANCED_PIERCING_TALON,{en:"enhanced piercing talon"}],[G.LIFE_OF_THE_DRAGON,{en:"life of the dragon"}],[G.LIFE_SURGE,{en:"life surge"}],[G.PET,{en:"pet modifier",zh:"召唤物加成"}],[G.DIVINE_MIGHT,{en:"divine might",zh:"神圣魔法效果提高"}],[G.REQUIESCAT,{en:"requiescat",zh:"安魂祈祷"}],[G.FIGHT_OR_FLIGHT,{en:"fight or flight",zh:"战逃反应"}],[G.WHISTLE,{en:"WH",zh:"口笛"}],[G.BRISTLE,{en:"BR",zh:"蓄力"}],[G.MOON_FLUTE,{en:"MF",zh:"月笛"}],[G.TINGLEA,{en:"TING",zh:"哔哩哔哩"}],[G.TINGLEB,{en:"TING",zh:"哔哩哔哩"}],[G.WINGED_REPROBATION,{en:"WREP",zh:"断罪飞翔"}],[G.WINGED_REDEMPTION,{en:"WRED",zh:"完美神的祝福"}],[G.DARKSIDE,{en:"darkside",zh:"暗黑"}]]);function Mp(e){return console.assert(vp.has(e),`modifier ${e} doesn't have a name!`),p(vp.get(e)??{en:"unknown"})}const Lp=new Map([[G.AF3,{en:"AF3",zh:"三层火"}],[G.AF2,{en:"AF2",zh:"二层火"}],[G.AF1,{en:"AF1",zh:"一层火"}],[G.UI3,{en:"UI3",zh:"三层冰"}],[G.UI2,{en:"UI2",zh:"二层冰"}],[G.UI1,{en:"UI1",zh:"一层冰"}],[G.ENO,{en:"ENO",zh:"天语"}],[G.POT,{en:"pot",zh:"爆发药"}],[G.PARTY,{en:"party",zh:"团辅"}],[G.AUTO_CDH,{en:"CDH",zh:"必直暴"}],[G.STARRY,{en:"STARRY",zh:"星空"}],[G.EMBOLDEN_M,{en:"MB",zh:"鼓励"}],[G.MANAFIC,{en:"MF",zh:"魔元化"}],[G.ACCELERATION,{en:"ACC",zh:"促进"}],[G.STANDARD_SINGLE,{en:"SSF",zh:"单色小舞"}],[G.STANDARD_DOUBLE,{en:"DSF",zh:"双色小舞"}],[G.TECHNICAL_SINGLE,{en:"STF",zh:"单色大舞"}],[G.TECHNICAL_DOUBLE,{en:"DTF",zh:"双色大舞"}],[G.TECHNICAL_TRIPLE,{en:"TTF",zh:"三色大舞"}],[G.TECHNICAL_QUADRUPLE,{en:"QTF",zh:"四色大舞"}],[G.DEVILMENT,{en:"DEV",zh:"探戈"}],[G.OVERHEATED,{en:"OVERHEATED",zh:"过热"}],[G.COMBO,{en:"CMB",zh:"连击"}],[G.FUGETSU,{en:"FGS",zh:"风月"}],[G.AUTO_CRIT,{en:"CRIT",zh:"必暴"}],[G.YATEN,{en:"ENH",zh:"强化夜天"}],[G.POSITIONAL,{en:"PS",zh:"身位"}],[G.ARCANE_CIRCLE,{en:"AC",zh:"神秘环"}],[G.DEATHSDESIGN,{en:"DD",zh:"死亡烙印"}],[G.ENHANCED_GIBBET_GALLOWS,{en:"E. GIB/GAL",zh:"绞决/缢杀↑"}],[G.ENHANCED_REAPING,{en:"E. REAPING",zh:"虚无/交错收割↑"}],[G.IMMORTAL_SACRIFICE,{en:"IMMORTAL SAC",zh:"死亡祭品"}],[G.BARRAGE,{en:"BRG"}],[G.RAGING_STRIKES,{en:"RS"}],[G.BATTLE_VOICE,{en:"BV"}],[G.RADIANT_FINALE_THREE_CODA,{en:"RF3"}],[G.RADIANT_FINALE_TWO_CODA,{en:"RF2"}],[G.RADIANT_FINALE_ONE_CODA,{en:"RF1"}],[G.WANDERERS_MINUET,{en:"WM"}],[G.MAGES_BALLAD,{en:"MB"}],[G.ARMYS_PAEON,{en:"AP"}],[G.NO_MERCY,{en:"NM",zh:"无情"}],[G.SEARING_LIGHT,{en:"SL",zh:"灼热"}],[G.SURGING_TEMPEST,{en:"SURGING",zh:"战场风暴"}],[G.POWER_SURGE,{en:"PWS"}],[G.LANCE_CHARGE,{en:"LC"}],[G.LIFE_OF_THE_DRAGON,{en:"LIFE"}],[G.ENHANCED_PIERCING_TALON,{en:"ENH"}],[G.LIFE_SURGE,{en:"LS"}],[G.BATTLE_LITANY,{en:"BL"}],[G.DIVINE_MIGHT,{en:"DM",zh:"强化圣灵"}],[G.REQUIESCAT,{en:"REQ",zh:"安魂"}],[G.FIGHT_OR_FLIGHT,{en:"FOF",zh:"战逃"}],[G.PET,{en:"PET",zh:"召唤物"}],[G.WHISTLE,{en:"WH",zh:"口笛"}],[G.BRISTLE,{en:"BR",zh:"蓄力"}],[G.MOON_FLUTE,{en:"MF",zh:"月笛"}],[G.TINGLEA,{en:"TING",zh:"哔哩哔哩"}],[G.TINGLEB,{en:"TING",zh:"哔哩哔哩"}],[G.WINGED_REPROBATION,{en:"WREP",zh:"断罪飞翔"}],[G.WINGED_REDEMPTION,{en:"WRED",zh:"完美神的祝福"}],[G.DARKSIDE,{en:"DS",zh:"暗黑"}]]);function $L(e){return console.assert(Lp.has(e),`modifier ${e} doesn't have a tag name!`),p(Lp.get(e)??{en:"unknown"})}let lo=()=>"en",ym=e=>{};function Hp(e){let t="English";e.lang==="zh"&&(t="中文"),e.lang==="ja"&&(t="日本語");let n=kt();return u.jsx("div",{style:{display:"inline-block",cursor:"pointer",verticalAlign:"middle",textDecoration:e.lang===lo()?"none":"underline",borderTop:e.lang===lo()?"1px solid "+n.text:"none"},onClick:()=>{ym(e.lang)},children:t})}class JL extends mt.Component{constructor(n){super(n);j(this,"state");let l="en",s=ha("language");(s==="zh"||s==="ja")&&(l=s),this.state={lang:l}}componentDidMount(){lo=()=>this.state.lang,ym=n=>{this.setState({lang:n}),aa("language",n)}}componentDidUpdate(n,l,s){l.lang!==this.state.lang&&O.updateAllDisplay()}componentWillUnmount(){lo=()=>"en",ym=n=>{}}render(){return u.jsxs("div",{style:{display:"inline-block",position:"absolute",right:68},children:[u.jsx("span",{style:{display:"inline-block",fontSize:17,position:"relative",marginRight:2},children:u.jsx(jy,{})}),u.jsxs("div",{style:{display:"inline-block",fontSize:14,position:"relative",top:-4},children:[u.jsx(Hp,{lang:"en"}),"|",u.jsx(Hp,{lang:"zh"})]})]})}}const kN=$()({UNIMPLEMENTED:{},OUTDATED:{label:{en:"Outdated",zh:"待更新"},warningContent:{en:"WARNING: This job recently had significant changes, and may not have been fully updated to reflect them. Exported plans may not load correctly following these changes, so be cautious about relying on them until the job has been fully updated.",zh:"警告：此职业最近经历的技改还未被完整实现到排轴器中。当前排轴器的此职业可能有bug，或在近期经历更新，所以暂时不要太依赖txt，记得勤在别处保存排轴进度。"}},TESTING:{label:{en:"Testing",zh:"测试中"},warningContent:{en:"WARNING: This job was recently added to XIV in the Shell and is still being tested. There may be bugs or changes in the near future, so make sure to frequently export and save timelines for this job to make sure you don't lose your work.",zh:"警告：此职业刚被实现没多久，可能还不是很稳定，目前暂时不要太依赖txt文件，记得勤在别处保存进度。"}},LIVE:{}});$()({TANK:{label:p({en:"Tank"})},HEALER:{label:p({en:"Healer"})},MELEE:{label:p({en:"Melee"})},RANGED:{label:p({en:"Ranged"})},CASTER:{label:p({en:"Caster"})},LIMITED:{label:p({en:"Limited"})}});const PN=$()({PLD:{role:"TANK",implementationLevel:"TESTING",usesMp:!0,limitBreak:"LAST_BASTION",limitBreakBuff:"LAST_BASTION"},WAR:{role:"TANK",implementationLevel:"LIVE",limitBreak:"LAND_WAKER",limitBreakBuff:"LAND_WAKER"},DRK:{role:"TANK",implementationLevel:"TESTING",usesMp:!0,limitBreak:"DARK_FORCE",limitBreakBuff:"DARK_FORCE"},GNB:{role:"TANK",implementationLevel:"LIVE",limitBreak:"GUNMETAL_SOUL",limitBreakBuff:"GUNMETAL_SOUL"}}),OR=$()({WHM:{role:"HEALER",implementationLevel:"UNIMPLEMENTED",usesMp:!0,limitBreak:"PULSE_OF_LIFE"},SCH:{role:"HEALER",implementationLevel:"UNIMPLEMENTED",usesMp:!0,limitBreak:"ANGEL_FEATHERS"},AST:{role:"HEALER",implementationLevel:"UNIMPLEMENTED",usesMp:!0,limitBreak:"ASTRAL_STASIS"},SGE:{role:"HEALER",implementationLevel:"TESTING",usesMp:!0,limitBreak:"TECHNE_MAKRE"}}),GN=$()({MNK:{role:"MELEE",implementationLevel:"UNIMPLEMENTED",limitBreak:"FINAL_HEAVEN"},DRG:{role:"MELEE",implementationLevel:"LIVE",limitBreak:"DRAGONSONG_DIVE"},NIN:{role:"MELEE",implementationLevel:"UNIMPLEMENTED",limitBreak:"CHIMATSURI"},SAM:{role:"MELEE",implementationLevel:"LIVE",limitBreak:"DOOM_OF_THE_LIVING"},RPR:{role:"MELEE",implementationLevel:"LIVE",limitBreak:"THE_END"},VPR:{role:"MELEE",implementationLevel:"UNIMPLEMENTED",limitBreak:"WORLD_SWALLOWER"}}),wN=$()({BRD:{role:"RANGED",implementationLevel:"LIVE",limitBreak:"SAGITTARIUS_ARROW"},MCH:{role:"RANGED",implementationLevel:"LIVE",limitBreak:"SATELLITE_BEAM"},DNC:{role:"RANGED",implementationLevel:"LIVE",limitBreak:"CRIMSON_LOTUS"}}),BN=$()({BLM:{role:"CASTER",implementationLevel:"LIVE",usesMp:!0,limitBreak:"METEOR"},SMN:{role:"CASTER",implementationLevel:"LIVE",usesMp:!0,limitBreak:"TERAFLARE"},RDM:{role:"CASTER",implementationLevel:"LIVE",usesMp:!0,limitBreak:"VERMILLION_SCOURGE"},PCT:{role:"CASTER",implementationLevel:"LIVE",usesMp:!0,limitBreak:"CHROMATIC_FANTASY"}}),FN=$()({BLU:{role:"LIMITED",implementationLevel:"TESTING",usesMp:!0}}),Ot={...PN,...OR,...GN,...wN,...BN,...FN},oo=Object.keys(Ot),dn=Object.keys(PN),Yn=Object.keys(OR),tn=Object.keys(GN),ho=Object.keys(wN),Kn=Object.keys(BN),Gr=Object.keys(FN);var sn=(e=>(e[e.ManaGain=0]="ManaGain",e[e.MpTick=1]="MpTick",e[e.LucidTick=2]="LucidTick",e[e.MeditateTick=3]="MeditateTick",e[e.AutoTick=4]="AutoTick",e))(sn||{}),jo;class Le{constructor(t,n,l){j(this,"name");Pe(this,jo);j(this,"timeTillEvent");j(this,"delay");j(this,"effectFn");j(this,"canceled");this.name=t,Me(this,jo,[]),this.timeTillEvent=n,this.delay=n,this.effectFn=l,this.canceled=!1}hasTag(t){for(let n=0;n<te(this,jo).length;n++)if(t===te(this,jo)[n])return!0;return!1}addTag(t){this.hasTag(t)||te(this,jo).push(t)}}jo=new WeakMap;class zN{constructor(t,n){j(this,"maxValue");j(this,"currentValue");this.maxValue=t,this.currentValue=n}availableAmount(){return this.currentValue}consume(t){this.currentValue<t-ma.epsilon&&console.warn(`invalid resource consumption: ${this.type}, ${this.currentValue} - ${t}`),this.currentValue=Math.max(this.currentValue-t,0)}gain(t){this.currentValue=Math.min(this.currentValue+t,this.maxValue)}overrideCurrentValue(t){(t<0||t>this.maxValue)&&console.warn(`invalid resource value override: ${this.type}, ${t} should be in [0, ${this.maxValue}]`),this.currentValue=t}}var Tu;class li extends zN{constructor(n,l,s){super(l,s);j(this,"type");j(this,"enabled");j(this,"pendingChange");Pe(this,Tu);this.type=n,this.enabled=!0}available(n){return this.availableAmount()+ma.epsilon>=n}availableAmountIncludingDisabled(){return this.currentValue}availableAmount(){return this.enabled?super.availableAmount():0}gainWrapping(n){this.currentValue=(this.currentValue+n)%(this.maxValue+1)}overrideTimer(n,l){this.pendingChange?(n.addEvent(new Le("override "+this.pendingChange.name+" timer: "+l,0,()=>{this.pendingChange&&(this.pendingChange.timeTillEvent=l)})),this.pendingChange.timeTillEvent=l):console.error(`Failed to override non-pending resource timer for resource: ${this.type}`)}removeTimer(){this.pendingChange&&(this.pendingChange.canceled=!0,this.pendingChange=void 0)}getLastExpirationTime(){return te(this,Tu)}consume(n){super.consume(n),this.currentValue===0&&Me(this,Tu,O.game.getDisplayTime())}}Tu=new WeakMap;var mr,Zl,Ri;class Ke extends zN{constructor(n,l,s,c){super(s,c);j(this,"type");Pe(this,mr);Pe(this,Zl);Pe(this,Ri);this.type=n,Me(this,mr,l),Me(this,Zl,l),Me(this,Ri,0)}currentStackCd(){return te(this,Zl)}maxStacks(){return this.maxValue}useStack(){this.stacksAvailable()===this.maxStacks()&&Me(this,Ri,te(this,Zl)),super.consume(1)}useStackWithRecast(n){console.assert(this.maxStacks()===1,"class CoolDown assumes special recasts are only available for skills with at most 1 stack"),Me(this,Zl,n),this.useStack()}restore(n){for(;n>0&&super.availableAmount()<this.maxStacks();){let l=Math.min(te(this,Ri),n);Me(this,Ri,te(this,Ri)-l),te(this,Ri)<ma.epsilon&&(super.gain(1),Me(this,Zl,te(this,mr)),this.stacksAvailable()<this.maxStacks()&&Me(this,Ri,te(this,Ri)+te(this,mr))),n-=l}}timeTillNextStackAvailable(){return te(this,Ri)}overrideTimeTillNextStack(n){Me(this,Ri,n)}stacksAvailable(){return super.availableAmount()}}mr=new WeakMap,Zl=new WeakMap,Ri=new WeakMap;var Ql;class e1{constructor(t){j(this,"game");Pe(this,Ql);this.game=t,Me(this,Ql,new Map)}forEach(t){te(this,Ql).forEach(t)}get(t){let n=te(this,Ql).get(t);return n||(console.assert(!1,`no cooldown for resource ${t}`),new Ke("NEVER",0,0,0))}set(t){te(this,Ql).set(t.type,t)}tick(t){for(const n of te(this,Ql).values())n.restore(t)}timeTillNextStackAvailable(t){return this.get(t).timeTillNextStackAvailable()}timeTillAnyStackAvailable(t){let n=this.get(t);return n.stacksAvailable()>0?0:n.timeTillNextStackAvailable()}}Ql=new WeakMap;var Rr;class t1{constructor(t){j(this,"game");Pe(this,Rr);this.game=t,Me(this,Rr,new Map)}get(t){let n=te(this,Rr).get(t);return n||(console.error(`could not find resource ${t}`),new li("NEVER",0,0))}set(t){te(this,Rr).set(t.type,t)}timeTillReady(t){let n=this.get(t);return n.pendingChange?n.pendingChange.timeTillEvent:0}addResourceEvent(t){let n=this.get(t.rscType),l=new Le(t.name,t.delay,()=>{n.pendingChange=void 0,t.fnOnRsc(n)});n.pendingChange=l,t.tags&&t.tags.forEach(s=>{l.addTag(s)}),this.game.addEvent(l)}takeResourceLock(t,n){this.get(t).consume(1),this.addResourceEvent({rscType:t,name:"[resource ready] "+t,delay:n,fnOnRsc:l=>{l.gain(1)}})}}Rr=new WeakMap;const _f=new Map;function Ut(e,t){const n=_f.get(e);return n.has(t)||console.error(`no resource info found for ${t}`),n.get(t)}function El(e){return _f.has(e)||console.error("could not find resources for job "+e),_f.get(e)}function $e(e,t,n,l){El(e).set(t,{isCoolDown:!1,defaultValue:l.default??0,maxValue:n,maxTimeout:l.timeout??-1,warningOnTimeout:l.warningOnTimeout})}oo.forEach(e=>{_f.set(e,new Map([["cd_GCD",{isCoolDown:!0,maxStacks:1,cdPerStack:2.5}]])),$e(e,"IN_COMBAT",1,{default:0}),$e(e,"MANA",1e4,{default:1e4}),$e(e,"TINCTURE",1,{timeout:30}),$e(e,"SPRINT",1,{timeout:10}),$e(e,"PARTY_SIZE",8,{default:8}),$e(e,"AUTOS_ENGAGED",1,{default:0}),$e(e,"STORED_AUTO",1,{default:0})});tn.forEach(e=>{$e(e,"REAR_POSITIONAL",1,{default:1}),$e(e,"FLANK_POSITIONAL",1,{default:1})});function su(e,t,n,l=1){El(e).set(t,{isCoolDown:!0,cdPerStack:n,maxStacks:l})}class DR{constructor(t){j(this,"type");j(this,"timeTillFullOrDrop");j(this,"stacks");j(this,"effectOrTimerEnabled");this.type=t.type,this.timeTillFullOrDrop=t.timeTillFullOrDrop,this.stacks=t.stacks,this.effectOrTimerEnabled=t.effectOrTimerEnabled}equals(t){return this.type===t.type&&this.timeTillFullOrDrop===t.timeTillFullOrDrop&&this.stacks===t.stacks&&this.effectOrTimerEnabled===t.effectOrTimerEnabled}static fromGameState(t){let n=[];return t.cooldowns.forEach((l,s)=>{l.availableAmount(),n.push(new DR({type:s,timeTillFullOrDrop:l.maxValue-l.availableAmount(),stacks:0,effectOrTimerEnabled:!0}))}),n}applyTo(t){let n=El(t.job).get(this.type);if(!n){console.assert(!1,`can't apply override ${this.type} to job ${t.job}`);return}if(n.isCoolDown){let l=t.cooldowns.get(this.type),s=l.maxStacks()*l.currentStackCd()-this.timeTillFullOrDrop,c=Math.floor((s+ma.epsilon)/l.currentStackCd()),d=this.timeTillFullOrDrop%l.currentStackCd();l.overrideCurrentValue(c),l.overrideTimeTillNextStack(d)}else{let l=t.resources.get(this.type),s=c=>{l.removeTimer(),t.resources.addResourceEvent({rscType:l.type,name:"drop "+l.type,delay:c,fnOnRsc:d=>{l.type==="ENOCHIAN"?t.loseEnochian():d.consume(d.availableAmount())}})};if(l.type==="LEY_LINES")l.consume(l.availableAmount()),l.gain(1),s(this.timeTillFullOrDrop),l.enabled=this.effectOrTimerEnabled;else if(l.type==="POLYGLOT"){let c=this.stacks;l.consume(l.availableAmount()),l.gain(c);let d=this.timeTillFullOrDrop;d>0&&l.overrideTimer(t,d)}else{let c=this.stacks;l.consume(l.availableAmount()),l.gain(c);let d=this.timeTillFullOrDrop;c>0&&n.maxTimeout>=0&&s(d)}}}serialized(){return{type:this.type,timeTillFullOrDrop:this.timeTillFullOrDrop,stacks:this.stacks,effectOrTimerEnabled:this.effectOrTimerEnabled}}}const xa=.8,bn=.01;function ze(e,t){}function lt(e,...t){return(n,l)=>{e(n,l);for(const s of t)s(n,l)}}function eh(e,...t){return n=>e(n)&&t.every(l=>l(n))}const as=new Map,jN=new Map,vm=new Map;function YN(e){return e==="Lightning Shock"&&(e="Lightning Shot"),e=e.toLowerCase(),vm.has(e)||console.error("cannot find skill: "+e),vm.get(e)}function a1(e){return e in Xe?e:gf.findResourceKey(e)}function Zo(e,t){return as.get(e).get(t)}function KN(e){return jN.get(e)}function n1(e,t){return as.get(e).has(t)}function th(e,t,n){as.get(e).set(t,n),vm.set(si[t].name.toLowerCase(),t),jN.set(t,n.assetPath)}oo.forEach(e=>as.set(e,new Map));function Nn(e,t){return e===void 0?n=>t||0:typeof e=="number"?n=>e:e}function i1(e){return console.assert(e.length>0,`invalid trait potency array: ${e}`),t=>{let n;const l=t.config.level;for(const[s,c]of e)t.hasTraitUnlocked(s)&&(n=c);return console.assert(n!==void 0,`no applicable potency at level ${l} found in array ${e}`),n||0}}function We(e,t){return(Array.isArray(t)?i1(t):Nn(t,0))(e)}function yR(e,t){const n=si[t].name;return`${e}/${n.replace(":","")}.png`}function Fi(e,t,n,l){Array.isArray(e)||(e=[e]);const s=lt((f,E)=>E.applicationTime=f.time,l.onApplication??ze),c=lt(f=>f.maybeCancelChanneledSkills(t),l.onExecute??ze),d={kind:"spell",name:t,assetPath:l.assetPath??(e.length===1?yR(e[0],t):"General/Missing.png"),unlockLevel:n,autoUpgrade:l.autoUpgrade,autoDowngrade:l.autoDowngrade,cdName:"cd_GCD",secondaryCd:l.secondaryCooldown,aspect:l.aspect??ge.Other,replaceIf:l.replaceIf??[],startOnHotbar:l.startOnHotbar??!0,highlightIf:l.highlightIf??(f=>!1),castTimeFn:Nn(l.castTime,0),recastTimeFn:Nn(l.recastTime,2.5),animationLockFn:f=>Nn(l.animationLock,f.config.animationLock)(f),manaCostFn:Nn(l.manaCost,0),potencyFn:f=>We(f,l.potency),jobPotencyModifiers:l.jobPotencyModifiers??(f=>[]),drawsAggro:l.drawsAggro??!1,falloff:l.falloff,healingPotencyFn:f=>We(f,l.healingPotency),jobHealingPotencyModifiers:l.jobHealingPotencyModifiers??(f=>[]),aoeHeal:l.aoeHeal??!1,validateAttempt:l.validateAttempt??(f=>!0),isInstantFn:l.isInstantFn??(f=>!1),onExecute:c,onConfirm:l.onConfirm??ze,onApplication:s,applicationDelay:l.applicationDelay??0,startsAuto:l.startsAuto??!1};if(e.forEach(f=>th(f,d.name,d)),l.secondaryCooldown!==void 0){const{cdName:f,cooldown:E,maxCharges:A}=l.secondaryCooldown;e.forEach(R=>su(R,f,E,A))}return d}function Ni(e,t,n,l){Array.isArray(e)||(e=[e]);const s=lt((f,E)=>E.applicationTime=f.time,l.onApplication??ze),c=lt(f=>f.maybeCancelChanneledSkills(t),l.onExecute??ze),d={kind:"weaponskill",name:t,assetPath:l.assetPath??(e.length===1?yR(e[0],t):"General/Missing.png"),unlockLevel:n,autoUpgrade:l.autoUpgrade,autoDowngrade:l.autoDowngrade,cdName:"cd_GCD",secondaryCd:l.secondaryCooldown,aspect:l.aspect??ge.Other,replaceIf:l.replaceIf??[],startOnHotbar:l.startOnHotbar??!0,highlightIf:l.highlightIf??(f=>!1),castTimeFn:Nn(l.castTime,0),recastTimeFn:Nn(l.recastTime,2.5),animationLockFn:f=>Nn(l.animationLock,f.config.animationLock)(f),manaCostFn:Nn(l.manaCost,0),potencyFn:f=>We(f,l.potency),jobPotencyModifiers:l.jobPotencyModifiers??(f=>[]),drawsAggro:l.drawsAggro??!1,falloff:l.falloff,healingPotencyFn:f=>We(f,l.healingPotency),jobHealingPotencyModifiers:l.jobHealingPotencyModifiers??(f=>[]),aoeHeal:l.aoeHeal??!1,validateAttempt:l.validateAttempt??(f=>!0),isInstantFn:l.isInstantFn??(f=>!0),onExecute:c,onConfirm:l.onConfirm??ze,onApplication:s,applicationDelay:l.applicationDelay??0,startsAuto:l.startsAuto??!0};if(e.forEach(f=>th(f,d.name,d)),l.secondaryCooldown!==void 0){const{cdName:f,cooldown:E,maxCharges:A}=l.secondaryCooldown;e.forEach(R=>su(R,f,E,A))}return d}function Rt(e,t,n,l,s){Array.isArray(e)||(e=[e]);const c=lt((A,R)=>R.applicationTime=A.time,s.onApplication??ze),d=lt(A=>A.maybeCancelChanneledSkills(t),s.onExecute??ze),f=eh(A=>s.requiresCombat?A.isInCombat():!0,s.validateAttempt??(A=>!0)),E={kind:"ability",name:t,assetPath:s.assetPath??(e.length===1?yR(e[0],t):"General/Missing.png"),requiresCombat:s.requiresCombat,unlockLevel:n,autoUpgrade:s.autoUpgrade,autoDowngrade:s.autoDowngrade,cdName:l,secondaryCd:s.secondaryCooldown,aspect:s.aspect??ge.Other,replaceIf:s.replaceIf??[],startOnHotbar:s.startOnHotbar??!0,highlightIf:s.highlightIf??(A=>!1),animationLockFn:A=>Nn(s.animationLock,A.config.animationLock)(A),manaCostFn:Nn(s.manaCost,0),potencyFn:A=>We(A,s.potency),jobPotencyModifiers:s.jobPotencyModifiers??(A=>[]),drawsAggro:s.drawsAggro??!1,falloff:s.falloff,healingPotencyFn:A=>We(A,s.healingPotency),jobHealingPotencyModifiers:s.jobHealingPotencyModifiers??(A=>[]),aoeHeal:s.aoeHeal??!1,applicationDelay:s.applicationDelay??0,validateAttempt:f,onExecute:d,onConfirm:s.onConfirm??ze,onApplication:c,startsAuto:s.startsAuto??!1};if(e.forEach(A=>th(A,E.name,E)),s.cooldown!==void 0&&e.forEach(A=>su(A,l,s.cooldown,s.maxCharges??1)),s.secondaryCooldown!==void 0){const{cdName:A,cooldown:R,maxCharges:T}=s.secondaryCooldown;e.forEach(S=>su(S,A,R,T))}return E}function je(e,t,n,l,s){const c=lt((d,f)=>{const E=d.resources.get(s.rscType),A=s.duration??Ut(d.job,s.rscType).maxTimeout,R=typeof A=="number"?T=>A:A;E.gain(E.maxValue),d.enqueueResourceDrop(s.rscType,R(d))},(s==null?void 0:s.onApplication)??ze);return Rt(e,t,n,l,{...s,onApplication:c})}function fn(e,t,n,l){Array.isArray(e)||(e=[e]);const s="Limit Break "+l.tier,c=lt(f=>f.maybeCancelChanneledSkills(t),l.onExecute??ze),d={kind:"limitbreak",name:t,animationLockFn:f=>l.animationLock,assetPath:`General/${s}.png`,unlockLevel:1,autoUpgrade:void 0,autoDowngrade:void 0,cdName:n,secondaryCd:void 0,aspect:ge.Other,replaceIf:[],startOnHotbar:!0,castTimeFn:Nn(l.castTime,0),highlightIf:f=>!1,manaCostFn:f=>0,potencyFn:Nn(l.potency,0),jobPotencyModifiers:f=>[],healingPotencyFn:Nn(l.healingPotency,0),jobHealingPotencyModifiers:f=>[],aoeHeal:!1,drawsAggro:!1,applicationDelay:l.applicationDelay??0,validateAttempt:f=>!0,onExecute:c,onConfirm:l.onConfirm??ze,onApplication:l.onApplication??ze,startsAuto:!1};return e.forEach(f=>th(f,d.name,d)),e.forEach(f=>su(f,n,(l.castTime??0)+l.animationLock,1)),d}const l1=Rt(oo,"NEVER",1,"NEVER",{validateAttempt:e=>!1});class o1{constructor(t){j(this,"job");this.job=t.job}get(t){let n=as.get(this.job).get(t);return n||(console.error(`could not find skill with key: ${t}`),l1)}}function yr(e,t,n){let l=Zo(e,t);for(;l.autoUpgrade&&vN(l.autoUpgrade.trait,n);)l=Zo(e,yr(e,l.autoUpgrade.otherSkill,n));for(;l.autoDowngrade&&n<l.unlockLevel;)l=Zo(e,yr(e,l.autoDowngrade.otherSkill,n));return l.name}function VN(e,t){const n=Zo(t.job,e);for(const l of n.replaceIf){l.newSkill===e&&console.error(`Skill ${e} tried to replace itself with the same skill`);const s=Zo(t.job,l.newSkill);if(!s)throw new Error("couldn't find skill info for "+l.newSkill);if(t.config.level>=s.unlockLevel&&l.condition(t))return yr(t.job,l.newSkill,t.config.level)}return yr(t.job,n.name,t.config.level)}var Tr;class s1{constructor(t,n){Pe(this,Tr);Me(this,Tr,[]),console.assert(as.has(t),`No skill map found for job: ${t}`);for(const l of as.get(t).values())l.name!=="NEVER"&&n>=l.unlockLevel&&l.autoDowngrade===void 0&&l.startOnHotbar&&te(this,Tr).push(yr(t,l.name,n))}getCurrentSkillNames(t){return te(this,Tr).map(n=>VN(n,t))}}Tr=new WeakMap;class da{constructor(t,n,l,s,c,d,f){j(this,"name");j(this,"duration");j(this,"color");j(this,"damageFactor");j(this,"critBonus");j(this,"dhBonus");j(this,"job");this.name=t,this.duration=l,this.color=n,this.damageFactor=s,this.critBonus=c,this.dhBonus=d,this.job=f}}const vR=[new da(P.ArcaneCircle,ct.Pink,20,1.03,0,0,"RPR"),new da(P.ArmysPaeon,ct.Yellow,45,1,0,.03,"BRD"),new da(P.BattleLitany,ct.Blue,20,1,.1,0,"DRG"),new da(P.BattleVoice,ct.Orange,20,1,0,.2,"BRD"),new da(P.Brotherhood,ct.Orange,20,1.05,0,0,"MNK"),new da(P.Card_TheBalance,ct.Red,15,1.03,0,0,"AST"),new da(P.Card_TheSpear,ct.Blue,15,1.06,0,0,"AST"),new da(P.ChainStratagem,ct.Grey,20,1,.1,0,"SCH"),new da(P.Devilment,ct.Green,20,1,.2,.2,"DNC"),new da(P.Divination,ct.Yellow,20,1.06,0,0,"AST"),new da(P.Dokumori,ct.Purple,20,1.05,0,0,"NIN"),new da(P.Embolden,ct.Grey,20,1.05,0,0,"RDM"),new da(P.MagesBallad,ct.Purple,45,1.01,0,0,"BRD"),new da(P.RadiantFinale1,ct.Purple,20,1.02,0,0,"BRD"),new da(P.RadiantFinale2,ct.Purple,20,1.04,0,0,"BRD"),new da(P.RadiantFinale3,ct.Purple,20,1.06,0,0,"BRD"),new da(P.SearingLight,ct.Blue,20,1.05,0,0,"SMN"),new da(P.StandardFinish,ct.Yellow,60,1.05,0,0,"DNC"),new da(P.StarryMuse,ct.Purple,20.5,1.05,0,0,"PCT"),new da(P.TechnicalFinish,ct.Blue,20,1.05,0,0,"DNC"),new da(P.WanderersMinuet,ct.Green,45,1,.02,0,"BRD")],WN=new Map;vR.forEach(e=>{WN.set(e.name,e)});let pf=class{constructor(t){j(this,"name");j(this,"info");this.name=t;let n=WN.get(t);n||(n=vR[0],console.error("Buff info not found!")),this.info=n}};const r1={job:"BLM",shellVersion:Qf.version,level:wt.lvl100,spellSpeed:1532,skillSpeed:420,criticalHit:420,directHit:420,determination:440,piety:440,countdown:5,randomSeed:"sup",fps:60,gcdSkillCorrection:0,animationLock:.7,timeTillFirstManaTick:1.2,procMode:Kt.Never,initialResourceOverrides:[]};wt.lvl100,Kt.Never;const sl=r1;class ul{constructor(t){j(this,"job");j(this,"shellVersion",Qf.version);j(this,"level");j(this,"spellSpeed");j(this,"skillSpeed");j(this,"criticalHit");j(this,"directHit");j(this,"determination");j(this,"piety");j(this,"countdown");j(this,"randomSeed");j(this,"fps");j(this,"gcdSkillCorrection");j(this,"animationLock");j(this,"timeTillFirstManaTick");j(this,"procMode");j(this,"initialResourceOverrides");j(this,"legacy_casterTax");this.job=t.job,this.shellVersion=t.shellVersion,this.level=t.level??sl.level,this.spellSpeed=t.spellSpeed,this.skillSpeed=t.skillSpeed??sl.skillSpeed,this.criticalHit=t.criticalHit??sl.criticalHit,this.directHit=t.directHit??sl.directHit,this.determination=t.determination??sl.determination,this.piety=t.piety??sl.piety,this.countdown=t.countdown,this.randomSeed=t.randomSeed,this.fps=t.fps,this.gcdSkillCorrection=t.gcdSkillCorrection,this.animationLock=t.animationLock,this.timeTillFirstManaTick=t.timeTillFirstManaTick,this.procMode=t.procMode,this.initialResourceOverrides=t.initialResourceOverrides.map(n=>{if(n.effectOrTimerEnabled===void 0&&(n.enabled===void 0?n.effectOrTimerEnabled=!0:n.effectOrTimerEnabled=n.enabled),!(n.type in Xe||n.type in Xo))if(n.type.toString()==="AstralFire")n.type="ASTRAL_FIRE";else if(n.type.toString()==="UmbralIce")n.type="UMBRAL_ICE";else if(n.type.toString()==="UmbralHeart")n.type="UMBRAL_HEART";else{let l=Object.keys(Xe).find(s=>Xe[s].name===n.type);l||(l=Object.keys(Xo).find(s=>Xo[s].name===n.type)),l&&(n.type=l)}return new DR(n)}),this.legacy_casterTax=(t==null?void 0:t.casterTax)??0}adjustedOvertimePotency(t,n){return At.overtimePotency(this.level,n==="sks"?this.skillSpeed:n==="sps"?this.spellSpeed:0,t)}adjustedGCD(t=2.5,n){return this.shellVersion>=eo.AllaganGcdFormula?At.preTaxGcd(this.level,this.spellSpeed,t,n):At.preTaxGcdLegacy(this.level,this.spellSpeed,t,n)}adjustedSksGCD(t=2.5,n){return this.shellVersion>=eo.AllaganGcdFormula?At.preTaxGcd(this.level,this.skillSpeed,t,n):At.preTaxGcdLegacy(this.level,this.skillSpeed,t,n)}adjustedCastTime(t,n){return At.preTaxCastTime(this.level,this.spellSpeed,t,n)}adjustedSksCastTime(t,n){return At.preTaxCastTime(this.level,this.skillSpeed,t,n)}getAfterTaxGCD(t){return this.shellVersion<eo.FpsTax?t:At.afterFpsTax(this.fps,t)+this.gcdSkillCorrection}getAfterTaxCastTime(t){return this.shellVersion<eo.FpsTax?this.legacy_casterTax+t:At.afterFpsTax(this.fps,t)+At.afterFpsTax(this.fps,gN)+this.gcdSkillCorrection}static getSlidecastWindow(t){return .5}serialized(){return{job:this.job,shellVersion:this.shellVersion,level:this.level,spellSpeed:this.spellSpeed,skillSpeed:this.skillSpeed,criticalHit:this.criticalHit,directHit:this.directHit,determination:this.determination,piety:this.piety,countdown:this.countdown,randomSeed:this.randomSeed,casterTax:this.legacy_casterTax,fps:this.fps,gcdSkillCorrection:this.gcdSkillCorrection,animationLock:this.animationLock,timeTillFirstManaTick:this.timeTillFirstManaTick,procMode:this.procMode,initialResourceOverrides:this.initialResourceOverrides.map(t=>t.serialized())}}}var qA={exports:{}},XA,xp;function c1(){if(xp)return XA;xp=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return XA=e,XA}var ZA,Up;function u1(){if(Up)return ZA;Up=1;var e=c1();function t(){}function n(){}return n.resetWarningCache=t,ZA=function(){function l(d,f,E,A,R,T){if(T!==e){var S=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw S.name="Invariant Violation",S}}l.isRequired=l;function s(){return l}var c={array:l,bigint:l,bool:l,func:l,number:l,object:l,string:l,symbol:l,any:l,arrayOf:s,element:l,elementType:l,instanceOf:s,node:l,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:n,resetWarningCache:t};return c.PropTypes=c,c},ZA}var kp;function d1(){return kp||(kp=1,qA.exports=u1()()),qA.exports}var f1=d1();const QA=uR(f1),qN=C.createContext(void 0);function Nu(){const e=C.useContext(qN);if(e===void 0)throw new Error("Base UI: TooltipRootContext is missing. Tooltip parts must be placed within <Tooltip.Root>.");return e}var Cu=RN();function ah(){return typeof window<"u"}function Eo(e){return XN(e)?(e.nodeName||"").toLowerCase():"#document"}function cn(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function zi(e){var t;return(t=(XN(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function XN(e){return ah()?e instanceof Node||e instanceof cn(e).Node:!1}function Mt(e){return ah()?e instanceof Element||e instanceof cn(e).Element:!1}function Ra(e){return ah()?e instanceof HTMLElement||e instanceof cn(e).HTMLElement:!1}function If(e){return!ah()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof cn(e).ShadowRoot}function bu(e){const{overflow:t,overflowX:n,overflowY:l,display:s}=ci(e);return/auto|scroll|overlay|hidden|clip/.test(t+l+n)&&!["inline","contents"].includes(s)}function h1(e){return["table","td","th"].includes(Eo(e))}function nh(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function MR(e){const t=ih(),n=Mt(e)?ci(e):e;return["transform","translate","scale","rotate","perspective"].some(l=>n[l]?n[l]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(l=>(n.willChange||"").includes(l))||["paint","layout","strict","content"].some(l=>(n.contain||"").includes(l))}function E1(e){let t=Rl(e);for(;Ra(t)&&!Al(t);){if(MR(t))return t;if(nh(t))return null;t=Rl(t)}return null}function ih(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Al(e){return["html","body","#document"].includes(Eo(e))}function ci(e){return cn(e).getComputedStyle(e)}function lh(e){return Mt(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Rl(e){if(Eo(e)==="html")return e;const t=e.assignedSlot||e.parentNode||If(e)&&e.host||zi(e);return If(t)?t.host:t}function ZN(e){const t=Rl(e);return Al(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ra(t)&&bu(t)?t:ZN(t)}function to(e,t,n){var l;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=ZN(e),c=s===((l=e.ownerDocument)==null?void 0:l.body),d=cn(s);if(c){const f=Mm(d);return t.concat(d,d.visualViewport||[],bu(s)?s:[],f&&n?to(f):[])}return t.concat(s,to(s,[],n))}function Mm(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}const A1=["top","right","bottom","left"],so=Math.min,Fn=Math.max,Nf=Math.round,Kd=Math.floor,Ui=e=>({x:e,y:e}),m1={left:"right",right:"left",bottom:"top",top:"bottom"},R1={start:"end",end:"start"};function Lm(e,t,n){return Fn(e,so(t,n))}function Tl(e,t){return typeof e=="function"?e(t):e}function ri(e){return e.split("-")[0]}function ro(e){return e.split("-")[1]}function LR(e){return e==="x"?"y":"x"}function HR(e){return e==="y"?"height":"width"}function co(e){return["top","bottom"].includes(ri(e))?"y":"x"}function xR(e){return LR(co(e))}function T1(e,t,n){n===void 0&&(n=!1);const l=ro(e),s=xR(e),c=HR(s);let d=s==="x"?l===(n?"end":"start")?"right":"left":l==="start"?"bottom":"top";return t.reference[c]>t.floating[c]&&(d=Cf(d)),[d,Cf(d)]}function S1(e){const t=Cf(e);return[Hm(e),t,Hm(t)]}function Hm(e){return e.replace(/start|end/g,t=>R1[t])}function g1(e,t,n){const l=["left","right"],s=["right","left"],c=["top","bottom"],d=["bottom","top"];switch(e){case"top":case"bottom":return n?t?s:l:t?l:s;case"left":case"right":return t?c:d;default:return[]}}function _1(e,t,n,l){const s=ro(e);let c=g1(ri(e),n==="start",l);return s&&(c=c.map(d=>d+"-"+s),t&&(c=c.concat(c.map(Hm)))),c}function Cf(e){return e.replace(/left|right|bottom|top/g,t=>m1[t])}function p1(e){return{top:0,right:0,bottom:0,left:0,...e}}function QN(e){return typeof e!="number"?p1(e):{top:e,right:e,bottom:e,left:e}}function bf(e){const{x:t,y:n,width:l,height:s}=e;return{width:l,height:s,top:n,left:t,right:t+l,bottom:n+s,x:t,y:n}}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var I1=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Of=I1.join(","),$N=typeof Element>"u",vr=$N?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Df=!$N&&Element.prototype.getRootNode?function(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}:function(e){return e==null?void 0:e.ownerDocument},yf=function e(t,n){var l;n===void 0&&(n=!0);var s=t==null||(l=t.getAttribute)===null||l===void 0?void 0:l.call(t,"inert"),c=s===""||s==="true",d=c||n&&t&&e(t.parentNode);return d},N1=function(t){var n,l=t==null||(n=t.getAttribute)===null||n===void 0?void 0:n.call(t,"contenteditable");return l===""||l==="true"},JN=function(t,n,l){if(yf(t))return[];var s=Array.prototype.slice.apply(t.querySelectorAll(Of));return n&&vr.call(t,Of)&&s.unshift(t),s=s.filter(l),s},e0=function e(t,n,l){for(var s=[],c=Array.from(t);c.length;){var d=c.shift();if(!yf(d,!1))if(d.tagName==="SLOT"){var f=d.assignedElements(),E=f.length?f:d.children,A=e(E,!0,l);l.flatten?s.push.apply(s,A):s.push({scopeParent:d,candidates:A})}else{var R=vr.call(d,Of);R&&l.filter(d)&&(n||!t.includes(d))&&s.push(d);var T=d.shadowRoot||typeof l.getShadowRoot=="function"&&l.getShadowRoot(d),S=!yf(T,!1)&&(!l.shadowRootFilter||l.shadowRootFilter(d));if(T&&S){var g=e(T===!0?d.children:T.children,!0,l);l.flatten?s.push.apply(s,g):s.push({scopeParent:d,candidates:g})}else c.unshift.apply(c,d.children)}}return s},t0=function(t){return!isNaN(parseInt(t.getAttribute("tabindex"),10))},a0=function(t){if(!t)throw new Error("No node provided");return t.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||N1(t))&&!t0(t)?0:t.tabIndex},C1=function(t,n){var l=a0(t);return l<0&&n&&!t0(t)?0:l},b1=function(t,n){return t.tabIndex===n.tabIndex?t.documentOrder-n.documentOrder:t.tabIndex-n.tabIndex},n0=function(t){return t.tagName==="INPUT"},O1=function(t){return n0(t)&&t.type==="hidden"},D1=function(t){var n=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(l){return l.tagName==="SUMMARY"});return n},y1=function(t,n){for(var l=0;l<t.length;l++)if(t[l].checked&&t[l].form===n)return t[l]},v1=function(t){if(!t.name)return!0;var n=t.form||Df(t),l=function(f){return n.querySelectorAll('input[type="radio"][name="'+f+'"]')},s;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")s=l(window.CSS.escape(t.name));else try{s=l(t.name)}catch(d){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",d.message),!1}var c=y1(s,t.form);return!c||c===t},M1=function(t){return n0(t)&&t.type==="radio"},L1=function(t){return M1(t)&&!v1(t)},H1=function(t){var n,l=t&&Df(t),s=(n=l)===null||n===void 0?void 0:n.host,c=!1;if(l&&l!==t){var d,f,E;for(c=!!((d=s)!==null&&d!==void 0&&(f=d.ownerDocument)!==null&&f!==void 0&&f.contains(s)||t!=null&&(E=t.ownerDocument)!==null&&E!==void 0&&E.contains(t));!c&&s;){var A,R,T;l=Df(s),s=(A=l)===null||A===void 0?void 0:A.host,c=!!((R=s)!==null&&R!==void 0&&(T=R.ownerDocument)!==null&&T!==void 0&&T.contains(s))}}return c},Pp=function(t){var n=t.getBoundingClientRect(),l=n.width,s=n.height;return l===0&&s===0},x1=function(t,n){var l=n.displayCheck,s=n.getShadowRoot;if(getComputedStyle(t).visibility==="hidden")return!0;var c=vr.call(t,"details>summary:first-of-type"),d=c?t.parentElement:t;if(vr.call(d,"details:not([open]) *"))return!0;if(!l||l==="full"||l==="legacy-full"){if(typeof s=="function"){for(var f=t;t;){var E=t.parentElement,A=Df(t);if(E&&!E.shadowRoot&&s(E)===!0)return Pp(t);t.assignedSlot?t=t.assignedSlot:!E&&A!==t.ownerDocument?t=A.host:t=E}t=f}if(H1(t))return!t.getClientRects().length;if(l!=="legacy-full")return!0}else if(l==="non-zero-area")return Pp(t);return!1},U1=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var n=t.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var l=0;l<n.children.length;l++){var s=n.children.item(l);if(s.tagName==="LEGEND")return vr.call(n,"fieldset[disabled] *")?!0:!s.contains(t)}return!0}n=n.parentElement}return!1},xm=function(t,n){return!(n.disabled||yf(n)||O1(n)||x1(n,t)||D1(n)||U1(n))},Um=function(t,n){return!(L1(n)||a0(n)<0||!xm(t,n))},k1=function(t){var n=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},P1=function e(t){var n=[],l=[];return t.forEach(function(s,c){var d=!!s.scopeParent,f=d?s.scopeParent:s,E=C1(f,d),A=d?e(s.candidates):f;E===0?d?n.push.apply(n,A):n.push(f):l.push({documentOrder:c,tabIndex:E,item:s,isScope:d,content:A})}),l.sort(b1).reduce(function(s,c){return c.isScope?s.push.apply(s,c.content):s.push(c.content),s},[]).concat(n)},oh=function(t,n){n=n||{};var l;return n.getShadowRoot?l=e0([t],n.includeContainer,{filter:Um.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:k1}):l=JN(t,n.includeContainer,Um.bind(null,n)),P1(l)},G1=function(t,n){n=n||{};var l;return n.getShadowRoot?l=e0([t],n.includeContainer,{filter:xm.bind(null,n),flatten:!0,getShadowRoot:n.getShadowRoot}):l=JN(t,n.includeContainer,xm.bind(null,n)),l},i0=function(t,n){if(n=n||{},!t)throw new Error("No node provided");return vr.call(t,Of)===!1?!1:Um(n,t)};function l0(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function UR(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:l}=t;return n+"/"+l}).join(" "):navigator.userAgent}function o0(){return/apple/i.test(navigator.vendor)}function km(){const e=/android/i;return e.test(l0())||e.test(UR())}function w1(){return l0().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function s0(){return UR().includes("jsdom/")}const Gp="data-floating-ui-focusable",B1="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function ql(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function Ka(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&If(n)){let l=t;for(;l;){if(e===l)return!0;l=l.parentNode||l.host}}return!1}function gi(e){return"composedPath"in e?e.composedPath()[0]:e.target}function $A(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function F1(e){return e.matches("html,body")}function en(e){return(e==null?void 0:e.ownerDocument)||document}function sh(e){return Ra(e)&&e.matches(B1)}function wp(e){return e?e.getAttribute("role")==="combobox"&&sh(e):!1}function z1(e){if(!e||s0())return!0;try{return e.matches(":focus-visible")}catch{return!0}}function Pm(e){return e?e.hasAttribute(Gp)?e:e.querySelector("["+Gp+"]")||e:null}function au(e,t,n){n===void 0&&(n=!0);let l=e.filter(c=>{var d;return c.parentId===t&&((d=c.context)==null?void 0:d.open)}),s=l;for(;s.length;)s=n?e.filter(c=>{var d;return(d=s)==null?void 0:d.some(f=>{var E;return c.parentId===f.id&&((E=c.context)==null?void 0:E.open)})}):e,l=l.concat(s);return l}function Bp(e,t){var n;let l=[],s=(n=e.find(c=>c.id===t))==null?void 0:n.parentId;for(;s;){const c=e.find(d=>d.id===s);s=c==null?void 0:c.parentId,c&&(l=l.concat(c))}return l}function JA(e){e.preventDefault(),e.stopPropagation()}function j1(e){return"nativeEvent"in e}function Y1(e){return e.mozInputSource===0&&e.isTrusted?!0:km()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function K1(e){return s0()?!1:!km()&&e.width===0&&e.height===0||km()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function Mr(e,t){const n=["mouse","pen"];return t||n.push("",void 0),n.includes(e)}var Ha=typeof document<"u"?C.useLayoutEffect:C.useEffect;const V1={...Zf};function Bo(e){const t=C.useRef(e);return Ha(()=>{t.current=e}),t}const W1=V1.useInsertionEffect,q1=W1||(e=>e());function rn(e){const t=C.useRef(()=>{});return q1(()=>{t.current=e}),C.useCallback(function(){for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return t.current==null?void 0:t.current(...l)},[])}const Ou=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function r0(e,t){const n=oh(e,Ou()),l=n.length;if(l===0)return;const s=ql(en(e)),c=n.indexOf(s),d=c===-1?t===1?0:l-1:c+t;return n[d]}function c0(e){return r0(en(e).body,1)||e}function u0(e){return r0(en(e).body,-1)||e}function nu(e,t){const n=t||e.currentTarget,l=e.relatedTarget;return!l||!Ka(n,l)}function X1(e){oh(e,Ou()).forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")})}function Fp(e){e.querySelectorAll("[data-tabindex]").forEach(n=>{const l=n.dataset.tabindex;delete n.dataset.tabindex,l?n.setAttribute("tabindex",l):n.removeAttribute("tabindex")})}function zp(e,t,n){let{reference:l,floating:s}=e;const c=co(t),d=xR(t),f=HR(d),E=ri(t),A=c==="y",R=l.x+l.width/2-s.width/2,T=l.y+l.height/2-s.height/2,S=l[f]/2-s[f]/2;let g;switch(E){case"top":g={x:R,y:l.y-s.height};break;case"bottom":g={x:R,y:l.y+l.height};break;case"right":g={x:l.x+l.width,y:T};break;case"left":g={x:l.x-s.width,y:T};break;default:g={x:l.x,y:l.y}}switch(ro(t)){case"start":g[d]-=S*(n&&A?-1:1);break;case"end":g[d]+=S*(n&&A?-1:1);break}return g}const Z1=async(e,t,n)=>{const{placement:l="bottom",strategy:s="absolute",middleware:c=[],platform:d}=n,f=c.filter(Boolean),E=await(d.isRTL==null?void 0:d.isRTL(t));let A=await d.getElementRects({reference:e,floating:t,strategy:s}),{x:R,y:T}=zp(A,l,E),S=l,g={},I=0;for(let b=0;b<f.length;b++){const{name:y,fn:M}=f[b],{x:v,y:U,data:H,reset:K}=await M({x:R,y:T,initialPlacement:l,placement:S,strategy:s,middlewareData:g,rects:A,platform:d,elements:{reference:e,floating:t}});R=v??R,T=U??T,g={...g,[y]:{...g[y],...H}},K&&I<=50&&(I++,typeof K=="object"&&(K.placement&&(S=K.placement),K.rects&&(A=K.rects===!0?await d.getElementRects({reference:e,floating:t,strategy:s}):K.rects),{x:R,y:T}=zp(A,S,E)),b=-1)}return{x:R,y:T,placement:S,strategy:s,middlewareData:g}};async function ru(e,t){var n;t===void 0&&(t={});const{x:l,y:s,platform:c,rects:d,elements:f,strategy:E}=e,{boundary:A="clippingAncestors",rootBoundary:R="viewport",elementContext:T="floating",altBoundary:S=!1,padding:g=0}=Tl(t,e),I=QN(g),y=f[S?T==="floating"?"reference":"floating":T],M=bf(await c.getClippingRect({element:(n=await(c.isElement==null?void 0:c.isElement(y)))==null||n?y:y.contextElement||await(c.getDocumentElement==null?void 0:c.getDocumentElement(f.floating)),boundary:A,rootBoundary:R,strategy:E})),v=T==="floating"?{x:l,y:s,width:d.floating.width,height:d.floating.height}:d.reference,U=await(c.getOffsetParent==null?void 0:c.getOffsetParent(f.floating)),H=await(c.isElement==null?void 0:c.isElement(U))?await(c.getScale==null?void 0:c.getScale(U))||{x:1,y:1}:{x:1,y:1},K=bf(c.convertOffsetParentRelativeRectToViewportRelativeRect?await c.convertOffsetParentRelativeRectToViewportRelativeRect({elements:f,rect:v,offsetParent:U,strategy:E}):v);return{top:(M.top-K.top+I.top)/H.y,bottom:(K.bottom-M.bottom+I.bottom)/H.y,left:(M.left-K.left+I.left)/H.x,right:(K.right-M.right+I.right)/H.x}}const Q1=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:l,placement:s,rects:c,platform:d,elements:f,middlewareData:E}=t,{element:A,padding:R=0}=Tl(e,t)||{};if(A==null)return{};const T=QN(R),S={x:n,y:l},g=xR(s),I=HR(g),b=await d.getDimensions(A),y=g==="y",M=y?"top":"left",v=y?"bottom":"right",U=y?"clientHeight":"clientWidth",H=c.reference[I]+c.reference[g]-S[g]-c.floating[I],K=S[g]-c.reference[g],F=await(d.getOffsetParent==null?void 0:d.getOffsetParent(A));let x=F?F[U]:0;(!x||!await(d.isElement==null?void 0:d.isElement(F)))&&(x=f.floating[U]||c.floating[I]);const re=H/2-K/2,ie=x/2-b[I]/2-1,se=so(T[M],ie),oe=so(T[v],ie),de=se,Ae=x-b[I]-oe,ee=x/2-b[I]/2+re,J=Lm(de,ee,Ae),w=!E.arrow&&ro(s)!=null&&ee!==J&&c.reference[I]/2-(ee<de?se:oe)-b[I]/2<0,L=w?ee<de?ee-de:ee-Ae:0;return{[g]:S[g]+L,data:{[g]:J,centerOffset:ee-J-L,...w&&{alignmentOffset:L}},reset:w}}}),$1=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,l;const{placement:s,middlewareData:c,rects:d,initialPlacement:f,platform:E,elements:A}=t,{mainAxis:R=!0,crossAxis:T=!0,fallbackPlacements:S,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:I="none",flipAlignment:b=!0,...y}=Tl(e,t);if((n=c.arrow)!=null&&n.alignmentOffset)return{};const M=ri(s),v=co(f),U=ri(f)===f,H=await(E.isRTL==null?void 0:E.isRTL(A.floating)),K=S||(U||!b?[Cf(f)]:S1(f)),F=I!=="none";!S&&F&&K.push(..._1(f,b,I,H));const x=[f,...K],re=await ru(t,y),ie=[];let se=((l=c.flip)==null?void 0:l.overflows)||[];if(R&&ie.push(re[M]),T){const ee=T1(s,d,H);ie.push(re[ee[0]],re[ee[1]])}if(se=[...se,{placement:s,overflows:ie}],!ie.every(ee=>ee<=0)){var oe,de;const ee=(((oe=c.flip)==null?void 0:oe.index)||0)+1,J=x[ee];if(J)return{data:{index:ee,overflows:se},reset:{placement:J}};let w=(de=se.filter(L=>L.overflows[0]<=0).sort((L,W)=>L.overflows[1]-W.overflows[1])[0])==null?void 0:de.placement;if(!w)switch(g){case"bestFit":{var Ae;const L=(Ae=se.filter(W=>{if(F){const le=co(W.placement);return le===v||le==="y"}return!0}).map(W=>[W.placement,W.overflows.filter(le=>le>0).reduce((le,D)=>le+D,0)]).sort((W,le)=>W[1]-le[1])[0])==null?void 0:Ae[0];L&&(w=L);break}case"initialPlacement":w=f;break}if(s!==w)return{reset:{placement:w}}}return{}}}};function jp(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Yp(e){return A1.some(t=>e[t]>=0)}const J1=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:l="referenceHidden",...s}=Tl(e,t);switch(l){case"referenceHidden":{const c=await ru(t,{...s,elementContext:"reference"}),d=jp(c,n.reference);return{data:{referenceHiddenOffsets:d,referenceHidden:Yp(d)}}}case"escaped":{const c=await ru(t,{...s,altBoundary:!0}),d=jp(c,n.floating);return{data:{escapedOffsets:d,escaped:Yp(d)}}}default:return{}}}}};async function eH(e,t){const{placement:n,platform:l,elements:s}=e,c=await(l.isRTL==null?void 0:l.isRTL(s.floating)),d=ri(n),f=ro(n),E=co(n)==="y",A=["left","top"].includes(d)?-1:1,R=c&&E?-1:1,T=Tl(t,e);let{mainAxis:S,crossAxis:g,alignmentAxis:I}=typeof T=="number"?{mainAxis:T,crossAxis:0,alignmentAxis:null}:{mainAxis:T.mainAxis||0,crossAxis:T.crossAxis||0,alignmentAxis:T.alignmentAxis};return f&&typeof I=="number"&&(g=f==="end"?I*-1:I),E?{x:g*R,y:S*A}:{x:S*A,y:g*R}}const tH=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,l;const{x:s,y:c,placement:d,middlewareData:f}=t,E=await eH(t,e);return d===((n=f.offset)==null?void 0:n.placement)&&(l=f.arrow)!=null&&l.alignmentOffset?{}:{x:s+E.x,y:c+E.y,data:{...E,placement:d}}}}},aH=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:l,placement:s}=t,{mainAxis:c=!0,crossAxis:d=!1,limiter:f={fn:y=>{let{x:M,y:v}=y;return{x:M,y:v}}},...E}=Tl(e,t),A={x:n,y:l},R=await ru(t,E),T=co(ri(s)),S=LR(T);let g=A[S],I=A[T];if(c){const y=S==="y"?"top":"left",M=S==="y"?"bottom":"right",v=g+R[y],U=g-R[M];g=Lm(v,g,U)}if(d){const y=T==="y"?"top":"left",M=T==="y"?"bottom":"right",v=I+R[y],U=I-R[M];I=Lm(v,I,U)}const b=f.fn({...t,[S]:g,[T]:I});return{...b,data:{x:b.x-n,y:b.y-l,enabled:{[S]:c,[T]:d}}}}}},nH=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:l,placement:s,rects:c,middlewareData:d}=t,{offset:f=0,mainAxis:E=!0,crossAxis:A=!0}=Tl(e,t),R={x:n,y:l},T=co(s),S=LR(T);let g=R[S],I=R[T];const b=Tl(f,t),y=typeof b=="number"?{mainAxis:b,crossAxis:0}:{mainAxis:0,crossAxis:0,...b};if(E){const U=S==="y"?"height":"width",H=c.reference[S]-c.floating[U]+y.mainAxis,K=c.reference[S]+c.reference[U]-y.mainAxis;g<H?g=H:g>K&&(g=K)}if(A){var M,v;const U=S==="y"?"width":"height",H=["top","left"].includes(ri(s)),K=c.reference[T]-c.floating[U]+(H&&((M=d.offset)==null?void 0:M[T])||0)+(H?0:y.crossAxis),F=c.reference[T]+c.reference[U]+(H?0:((v=d.offset)==null?void 0:v[T])||0)-(H?y.crossAxis:0);I<K?I=K:I>F&&(I=F)}return{[S]:g,[T]:I}}}},iH=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,l;const{placement:s,rects:c,platform:d,elements:f}=t,{apply:E=()=>{},...A}=Tl(e,t),R=await ru(t,A),T=ri(s),S=ro(s),g=co(s)==="y",{width:I,height:b}=c.floating;let y,M;T==="top"||T==="bottom"?(y=T,M=S===(await(d.isRTL==null?void 0:d.isRTL(f.floating))?"start":"end")?"left":"right"):(M=T,y=S==="end"?"top":"bottom");const v=b-R.top-R.bottom,U=I-R.left-R.right,H=so(b-R[y],v),K=so(I-R[M],U),F=!t.middlewareData.shift;let x=H,re=K;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(re=U),(l=t.middlewareData.shift)!=null&&l.enabled.y&&(x=v),F&&!S){const se=Fn(R.left,0),oe=Fn(R.right,0),de=Fn(R.top,0),Ae=Fn(R.bottom,0);g?re=I-2*(se!==0||oe!==0?se+oe:Fn(R.left,R.right)):x=b-2*(de!==0||Ae!==0?de+Ae:Fn(R.top,R.bottom))}await E({...t,availableWidth:re,availableHeight:x});const ie=await d.getDimensions(f.floating);return I!==ie.width||b!==ie.height?{reset:{rects:!0}}:{}}}};function d0(e){const t=ci(e);let n=parseFloat(t.width)||0,l=parseFloat(t.height)||0;const s=Ra(e),c=s?e.offsetWidth:n,d=s?e.offsetHeight:l,f=Nf(n)!==c||Nf(l)!==d;return f&&(n=c,l=d),{width:n,height:l,$:f}}function kR(e){return Mt(e)?e:e.contextElement}function fr(e){const t=kR(e);if(!Ra(t))return Ui(1);const n=t.getBoundingClientRect(),{width:l,height:s,$:c}=d0(t);let d=(c?Nf(n.width):n.width)/l,f=(c?Nf(n.height):n.height)/s;return(!d||!Number.isFinite(d))&&(d=1),(!f||!Number.isFinite(f))&&(f=1),{x:d,y:f}}const lH=Ui(0);function f0(e){const t=cn(e);return!ih()||!t.visualViewport?lH:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function oH(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==cn(e)?!1:t}function ns(e,t,n,l){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),c=kR(e);let d=Ui(1);t&&(l?Mt(l)&&(d=fr(l)):d=fr(e));const f=oH(c,n,l)?f0(c):Ui(0);let E=(s.left+f.x)/d.x,A=(s.top+f.y)/d.y,R=s.width/d.x,T=s.height/d.y;if(c){const S=cn(c),g=l&&Mt(l)?cn(l):l;let I=S,b=Mm(I);for(;b&&l&&g!==I;){const y=fr(b),M=b.getBoundingClientRect(),v=ci(b),U=M.left+(b.clientLeft+parseFloat(v.paddingLeft))*y.x,H=M.top+(b.clientTop+parseFloat(v.paddingTop))*y.y;E*=y.x,A*=y.y,R*=y.x,T*=y.y,E+=U,A+=H,I=cn(b),b=Mm(I)}}return bf({width:R,height:T,x:E,y:A})}function PR(e,t){const n=lh(e).scrollLeft;return t?t.left+n:ns(zi(e)).left+n}function h0(e,t,n){n===void 0&&(n=!1);const l=e.getBoundingClientRect(),s=l.left+t.scrollLeft-(n?0:PR(e,l)),c=l.top+t.scrollTop;return{x:s,y:c}}function sH(e){let{elements:t,rect:n,offsetParent:l,strategy:s}=e;const c=s==="fixed",d=zi(l),f=t?nh(t.floating):!1;if(l===d||f&&c)return n;let E={scrollLeft:0,scrollTop:0},A=Ui(1);const R=Ui(0),T=Ra(l);if((T||!T&&!c)&&((Eo(l)!=="body"||bu(d))&&(E=lh(l)),Ra(l))){const g=ns(l);A=fr(l),R.x=g.x+l.clientLeft,R.y=g.y+l.clientTop}const S=d&&!T&&!c?h0(d,E,!0):Ui(0);return{width:n.width*A.x,height:n.height*A.y,x:n.x*A.x-E.scrollLeft*A.x+R.x+S.x,y:n.y*A.y-E.scrollTop*A.y+R.y+S.y}}function rH(e){return Array.from(e.getClientRects())}function cH(e){const t=zi(e),n=lh(e),l=e.ownerDocument.body,s=Fn(t.scrollWidth,t.clientWidth,l.scrollWidth,l.clientWidth),c=Fn(t.scrollHeight,t.clientHeight,l.scrollHeight,l.clientHeight);let d=-n.scrollLeft+PR(e);const f=-n.scrollTop;return ci(l).direction==="rtl"&&(d+=Fn(t.clientWidth,l.clientWidth)-s),{width:s,height:c,x:d,y:f}}function uH(e,t){const n=cn(e),l=zi(e),s=n.visualViewport;let c=l.clientWidth,d=l.clientHeight,f=0,E=0;if(s){c=s.width,d=s.height;const A=ih();(!A||A&&t==="fixed")&&(f=s.offsetLeft,E=s.offsetTop)}return{width:c,height:d,x:f,y:E}}function dH(e,t){const n=ns(e,!0,t==="fixed"),l=n.top+e.clientTop,s=n.left+e.clientLeft,c=Ra(e)?fr(e):Ui(1),d=e.clientWidth*c.x,f=e.clientHeight*c.y,E=s*c.x,A=l*c.y;return{width:d,height:f,x:E,y:A}}function Kp(e,t,n){let l;if(t==="viewport")l=uH(e,n);else if(t==="document")l=cH(zi(e));else if(Mt(t))l=dH(t,n);else{const s=f0(e);l={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return bf(l)}function E0(e,t){const n=Rl(e);return n===t||!Mt(n)||Al(n)?!1:ci(n).position==="fixed"||E0(n,t)}function fH(e,t){const n=t.get(e);if(n)return n;let l=to(e,[],!1).filter(f=>Mt(f)&&Eo(f)!=="body"),s=null;const c=ci(e).position==="fixed";let d=c?Rl(e):e;for(;Mt(d)&&!Al(d);){const f=ci(d),E=MR(d);!E&&f.position==="fixed"&&(s=null),(c?!E&&!s:!E&&f.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||bu(d)&&!E&&E0(e,d))?l=l.filter(R=>R!==d):s=f,d=Rl(d)}return t.set(e,l),l}function hH(e){let{element:t,boundary:n,rootBoundary:l,strategy:s}=e;const d=[...n==="clippingAncestors"?nh(t)?[]:fH(t,this._c):[].concat(n),l],f=d[0],E=d.reduce((A,R)=>{const T=Kp(t,R,s);return A.top=Fn(T.top,A.top),A.right=so(T.right,A.right),A.bottom=so(T.bottom,A.bottom),A.left=Fn(T.left,A.left),A},Kp(t,f,s));return{width:E.right-E.left,height:E.bottom-E.top,x:E.left,y:E.top}}function EH(e){const{width:t,height:n}=d0(e);return{width:t,height:n}}function AH(e,t,n){const l=Ra(t),s=zi(t),c=n==="fixed",d=ns(e,!0,c,t);let f={scrollLeft:0,scrollTop:0};const E=Ui(0);if(l||!l&&!c)if((Eo(t)!=="body"||bu(s))&&(f=lh(t)),l){const S=ns(t,!0,c,t);E.x=S.x+t.clientLeft,E.y=S.y+t.clientTop}else s&&(E.x=PR(s));const A=s&&!l&&!c?h0(s,f):Ui(0),R=d.left+f.scrollLeft-E.x-A.x,T=d.top+f.scrollTop-E.y-A.y;return{x:R,y:T,width:d.width,height:d.height}}function em(e){return ci(e).position==="static"}function Vp(e,t){if(!Ra(e)||ci(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return zi(e)===n&&(n=n.ownerDocument.body),n}function A0(e,t){const n=cn(e);if(nh(e))return n;if(!Ra(e)){let s=Rl(e);for(;s&&!Al(s);){if(Mt(s)&&!em(s))return s;s=Rl(s)}return n}let l=Vp(e,t);for(;l&&h1(l)&&em(l);)l=Vp(l,t);return l&&Al(l)&&em(l)&&!MR(l)?n:l||E1(e)||n}const mH=async function(e){const t=this.getOffsetParent||A0,n=this.getDimensions,l=await n(e.floating);return{reference:AH(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:l.width,height:l.height}}};function RH(e){return ci(e).direction==="rtl"}const TH={convertOffsetParentRelativeRectToViewportRelativeRect:sH,getDocumentElement:zi,getClippingRect:hH,getOffsetParent:A0,getElementRects:mH,getClientRects:rH,getDimensions:EH,getScale:fr,isElement:Mt,isRTL:RH};function m0(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function SH(e,t){let n=null,l;const s=zi(e);function c(){var f;clearTimeout(l),(f=n)==null||f.disconnect(),n=null}function d(f,E){f===void 0&&(f=!1),E===void 0&&(E=1),c();const A=e.getBoundingClientRect(),{left:R,top:T,width:S,height:g}=A;if(f||t(),!S||!g)return;const I=Kd(T),b=Kd(s.clientWidth-(R+S)),y=Kd(s.clientHeight-(T+g)),M=Kd(R),U={rootMargin:-I+"px "+-b+"px "+-y+"px "+-M+"px",threshold:Fn(0,so(1,E))||1};let H=!0;function K(F){const x=F[0].intersectionRatio;if(x!==E){if(!H)return d();x?d(!1,x):l=setTimeout(()=>{d(!1,1e-7)},1e3)}x===1&&!m0(A,e.getBoundingClientRect())&&d(),H=!1}try{n=new IntersectionObserver(K,{...U,root:s.ownerDocument})}catch{n=new IntersectionObserver(K,U)}n.observe(e)}return d(!0),c}function Wp(e,t,n,l){l===void 0&&(l={});const{ancestorScroll:s=!0,ancestorResize:c=!0,elementResize:d=typeof ResizeObserver=="function",layoutShift:f=typeof IntersectionObserver=="function",animationFrame:E=!1}=l,A=kR(e),R=s||c?[...A?to(A):[],...to(t)]:[];R.forEach(M=>{s&&M.addEventListener("scroll",n,{passive:!0}),c&&M.addEventListener("resize",n)});const T=A&&f?SH(A,n):null;let S=-1,g=null;d&&(g=new ResizeObserver(M=>{let[v]=M;v&&v.target===A&&g&&(g.unobserve(t),cancelAnimationFrame(S),S=requestAnimationFrame(()=>{var U;(U=g)==null||U.observe(t)})),n()}),A&&!E&&g.observe(A),g.observe(t));let I,b=E?ns(e):null;E&&y();function y(){const M=ns(e);b&&!m0(b,M)&&n(),b=M,I=requestAnimationFrame(y)}return n(),()=>{var M;R.forEach(v=>{s&&v.removeEventListener("scroll",n),c&&v.removeEventListener("resize",n)}),T==null||T(),(M=g)==null||M.disconnect(),g=null,E&&cancelAnimationFrame(I)}}const gH=tH,_H=aH,pH=$1,IH=iH,NH=J1,qp=Q1,CH=nH,bH=(e,t,n)=>{const l=new Map,s={platform:TH,...n},c={...s.platform,_c:l};return Z1(e,t,{...s,platform:c})};var Qd=typeof document<"u"?C.useLayoutEffect:C.useEffect;function vf(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,l,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(l=n;l--!==0;)if(!vf(e[l],t[l]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(l=n;l--!==0;)if(!{}.hasOwnProperty.call(t,s[l]))return!1;for(l=n;l--!==0;){const c=s[l];if(!(c==="_owner"&&e.$$typeof)&&!vf(e[c],t[c]))return!1}return!0}return e!==e&&t!==t}function R0(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Xp(e,t){const n=R0(e);return Math.round(t*n)/n}function tm(e){const t=C.useRef(e);return Qd(()=>{t.current=e}),t}function OH(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:l=[],platform:s,elements:{reference:c,floating:d}={},transform:f=!0,whileElementsMounted:E,open:A}=e,[R,T]=C.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[S,g]=C.useState(l);vf(S,l)||g(l);const[I,b]=C.useState(null),[y,M]=C.useState(null),v=C.useCallback(W=>{W!==F.current&&(F.current=W,b(W))},[]),U=C.useCallback(W=>{W!==x.current&&(x.current=W,M(W))},[]),H=c||I,K=d||y,F=C.useRef(null),x=C.useRef(null),re=C.useRef(R),ie=E!=null,se=tm(E),oe=tm(s),de=tm(A),Ae=C.useCallback(()=>{if(!F.current||!x.current)return;const W={placement:t,strategy:n,middleware:S};oe.current&&(W.platform=oe.current),bH(F.current,x.current,W).then(le=>{const D={...le,isPositioned:de.current!==!1};ee.current&&!vf(re.current,D)&&(re.current=D,Cu.flushSync(()=>{T(D)}))})},[S,t,n,oe,de]);Qd(()=>{A===!1&&re.current.isPositioned&&(re.current.isPositioned=!1,T(W=>({...W,isPositioned:!1})))},[A]);const ee=C.useRef(!1);Qd(()=>(ee.current=!0,()=>{ee.current=!1}),[]),Qd(()=>{if(H&&(F.current=H),K&&(x.current=K),H&&K){if(se.current)return se.current(H,K,Ae);Ae()}},[H,K,Ae,se,ie]);const J=C.useMemo(()=>({reference:F,floating:x,setReference:v,setFloating:U}),[v,U]),w=C.useMemo(()=>({reference:H,floating:K}),[H,K]),L=C.useMemo(()=>{const W={position:n,left:0,top:0};if(!w.floating)return W;const le=Xp(w.floating,R.x),D=Xp(w.floating,R.y);return f?{...W,transform:"translate("+le+"px, "+D+"px)",...R0(w.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:le,top:D}},[n,f,w.floating,R.x,R.y]);return C.useMemo(()=>({...R,update:Ae,refs:J,elements:w,floatingStyles:L}),[R,Ae,J,w,L])}const DH=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:l,padding:s}=typeof e=="function"?e(n):e;return l&&t(l)?l.current!=null?qp({element:l.current,padding:s}).fn(n):{}:l?qp({element:l,padding:s}).fn(n):{}}}},yH=(e,t)=>({...gH(e),options:[e,t]}),vH=(e,t)=>({..._H(e),options:[e,t]}),MH=(e,t)=>({...CH(e),options:[e,t]}),LH=(e,t)=>({...pH(e),options:[e,t]}),HH=(e,t)=>({...IH(e),options:[e,t]}),xH=(e,t)=>({...NH(e),options:[e,t]}),UH=(e,t)=>({...DH(e),options:[e,t]}),kH="data-floating-ui-focusable",Zp="active",Qp="selected",PH={...Zf};let $p=!1,GH=0;const Jp=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+GH++;function wH(){const[e,t]=C.useState(()=>$p?Jp():void 0);return Ha(()=>{e==null&&t(Jp())},[]),C.useEffect(()=>{$p=!0},[]),e}const BH=PH.useId,GR=BH||wH;function FH(){const e=new Map;return{emit(t,n){var l;(l=e.get(t))==null||l.forEach(s=>s(n))},on(t,n){e.has(t)||e.set(t,new Set),e.get(t).add(n)},off(t,n){var l;(l=e.get(t))==null||l.delete(n)}}}const zH=C.createContext(null),jH=C.createContext(null),wR=()=>{var e;return((e=C.useContext(zH))==null?void 0:e.id)||null},rh=()=>C.useContext(jH);function is(e){return"data-floating-ui-"+e}function Pn(e){e.current!==-1&&(clearTimeout(e.current),e.current=-1)}const eI=is("safe-polygon");function $d(e,t,n){if(n&&!Mr(n))return 0;if(typeof e=="number")return e;if(typeof e=="function"){const l=e();return typeof l=="number"?l:l==null?void 0:l[t]}return e==null?void 0:e[t]}function am(e){return typeof e=="function"?e():e}function YH(e,t){t===void 0&&(t={});const{open:n,onOpenChange:l,dataRef:s,events:c,elements:d}=e,{enabled:f=!0,delay:E=0,handleClose:A=null,mouseOnly:R=!1,restMs:T=0,move:S=!0}=t,g=rh(),I=wR(),b=Bo(A),y=Bo(E),M=Bo(n),v=Bo(T),U=C.useRef(),H=C.useRef(-1),K=C.useRef(),F=C.useRef(-1),x=C.useRef(!0),re=C.useRef(!1),ie=C.useRef(()=>{}),se=C.useRef(!1),oe=C.useCallback(()=>{var L;const W=(L=s.current.openEvent)==null?void 0:L.type;return(W==null?void 0:W.includes("mouse"))&&W!=="mousedown"},[s]);C.useEffect(()=>{if(!f)return;function L(W){let{open:le}=W;le||(Pn(H),Pn(F),x.current=!0,se.current=!1)}return c.on("openchange",L),()=>{c.off("openchange",L)}},[f,c]),C.useEffect(()=>{if(!f||!b.current||!n)return;function L(le){oe()&&l(!1,le,"hover")}const W=en(d.floating).documentElement;return W.addEventListener("mouseleave",L),()=>{W.removeEventListener("mouseleave",L)}},[d.floating,n,l,f,b,oe]);const de=C.useCallback(function(L,W,le){W===void 0&&(W=!0),le===void 0&&(le="hover");const D=$d(y.current,"close",U.current);D&&!K.current?(Pn(H),H.current=window.setTimeout(()=>l(!1,L,le),D)):W&&(Pn(H),l(!1,L,le))},[y,l]),Ae=rn(()=>{ie.current(),K.current=void 0}),ee=rn(()=>{if(re.current){const L=en(d.floating).body;L.style.pointerEvents="",L.removeAttribute(eI),re.current=!1}}),J=rn(()=>s.current.openEvent?["click","mousedown"].includes(s.current.openEvent.type):!1);C.useEffect(()=>{if(!f)return;function L(Z){if(Pn(H),x.current=!1,R&&!Mr(U.current)||am(v.current)>0&&!$d(y.current,"open"))return;const Y=$d(y.current,"open",U.current);Y?H.current=window.setTimeout(()=>{M.current||l(!0,Z,"hover")},Y):n||l(!0,Z,"hover")}function W(Z){if(J()){ee();return}ie.current();const Y=en(d.floating);if(Pn(F),se.current=!1,b.current&&s.current.floatingContext){n||Pn(H),K.current=b.current({...s.current.floatingContext,tree:g,x:Z.clientX,y:Z.clientY,onClose(){ee(),Ae(),J()||de(Z,!0,"safe-polygon")}});const me=K.current;Y.addEventListener("mousemove",me),ie.current=()=>{Y.removeEventListener("mousemove",me)};return}(U.current==="touch"?!Ka(d.floating,Z.relatedTarget):!0)&&de(Z)}function le(Z){J()||s.current.floatingContext&&(b.current==null||b.current({...s.current.floatingContext,tree:g,x:Z.clientX,y:Z.clientY,onClose(){ee(),Ae(),J()||de(Z)}})(Z))}function D(){Pn(H)}function X(Z){J()||de(Z,!1)}if(Mt(d.domReference)){const Z=d.domReference,Y=d.floating;return n&&Z.addEventListener("mouseleave",le),S&&Z.addEventListener("mousemove",L,{once:!0}),Z.addEventListener("mouseenter",L),Z.addEventListener("mouseleave",W),Y&&(Y.addEventListener("mouseleave",le),Y.addEventListener("mouseenter",D),Y.addEventListener("mouseleave",X)),()=>{n&&Z.removeEventListener("mouseleave",le),S&&Z.removeEventListener("mousemove",L),Z.removeEventListener("mouseenter",L),Z.removeEventListener("mouseleave",W),Y&&(Y.removeEventListener("mouseleave",le),Y.removeEventListener("mouseenter",D),Y.removeEventListener("mouseleave",X))}}},[d,f,e,R,S,de,Ae,ee,l,n,M,g,y,b,s,J,v]),Ha(()=>{var L;if(f&&n&&(L=b.current)!=null&&L.__options.blockPointerEvents&&oe()){re.current=!0;const le=d.floating;if(Mt(d.domReference)&&le){var W;const D=en(d.floating).body;D.setAttribute(eI,"");const X=d.domReference,Z=g==null||(W=g.nodesRef.current.find(Y=>Y.id===I))==null||(W=W.context)==null?void 0:W.elements.floating;return Z&&(Z.style.pointerEvents=""),D.style.pointerEvents="none",X.style.pointerEvents="auto",le.style.pointerEvents="auto",()=>{D.style.pointerEvents="",X.style.pointerEvents="",le.style.pointerEvents=""}}}},[f,n,I,d,g,b,oe]),Ha(()=>{n||(U.current=void 0,se.current=!1,Ae(),ee())},[n,Ae,ee]),C.useEffect(()=>()=>{Ae(),Pn(H),Pn(F),ee()},[f,d.domReference,Ae,ee]);const w=C.useMemo(()=>{function L(W){U.current=W.pointerType}return{onPointerDown:L,onPointerEnter:L,onMouseMove(W){const{nativeEvent:le}=W;function D(){!x.current&&!M.current&&l(!0,le,"hover")}R&&!Mr(U.current)||n||am(v.current)===0||se.current&&W.movementX**2+W.movementY**2<2||(Pn(F),U.current==="touch"?D():(se.current=!0,F.current=window.setTimeout(D,am(v.current))))}}},[R,l,n,M,v]);return C.useMemo(()=>f?{reference:w}:{},[f,w])}const KH=C.createContext({hasProvider:!1,timeoutMs:0,delayRef:{current:0},initialDelayRef:{current:0},timeoutIdRef:{current:-1},currentIdRef:{current:null},currentContextRef:{current:null}});function VH(e,t){t===void 0&&(t={});const{open:n,onOpenChange:l,floatingId:s}=e,{enabled:c=!0}=t,d=C.useContext(KH),{currentIdRef:f,delayRef:E,timeoutMs:A,initialDelayRef:R,currentContextRef:T,hasProvider:S,timeoutIdRef:g}=d,[I,b]=C.useState(!1);return Ha(()=>{function y(){var M;b(!1),(M=T.current)==null||M.setIsInstantPhase(!1),f.current=null,T.current=null,E.current=R.current}if(c&&f.current&&!n&&f.current===s){if(b(!1),A)return g.current=window.setTimeout(y,A),()=>{clearTimeout(g.current)};y()}},[c,n,s,f,E,A,R,T,g]),Ha(()=>{if(!c||!n)return;const y=T.current,M=f.current;T.current={onOpenChange:l,setIsInstantPhase:b},f.current=s,E.current={open:0,close:$d(R.current,"close")},M!==null&&M!==s?(Pn(g),b(!0),y==null||y.setIsInstantPhase(!0),y==null||y.onOpenChange(!1)):(b(!1),y==null||y.setIsInstantPhase(!1))},[c,n,s,l,f,E,A,R,T,g]),Ha(()=>()=>{T.current=null},[T]),C.useMemo(()=>({hasProvider:S,delayRef:E,isInstantPhase:I}),[S,E,I])}let tI=0;function tr(e,t){t===void 0&&(t={});const{preventScroll:n=!1,cancelPrevious:l=!0,sync:s=!1}=t;l&&cancelAnimationFrame(tI);const c=()=>e==null?void 0:e.focus({preventScroll:n});s?c():tI=requestAnimationFrame(c)}function nm(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&If(n)){let l=t;for(;l;){if(e===l)return!0;l=l.parentNode||l.host}}return!1}function WH(e){return"composedPath"in e?e.composedPath()[0]:e.target}function qH(e){return(e==null?void 0:e.ownerDocument)||document}let ar=new WeakMap,Vd=new WeakSet,Wd={},im=0;const XH=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,T0=e=>e&&(e.host||T0(e.parentNode)),ZH=(e,t)=>t.map(n=>{if(e.contains(n))return n;const l=T0(n);return e.contains(l)?l:null}).filter(n=>n!=null);function QH(e,t,n,l){const s="data-floating-ui-inert",c=l?"inert":n?"aria-hidden":null,d=ZH(t,e),f=new Set,E=new Set(d),A=[];Wd[s]||(Wd[s]=new WeakMap);const R=Wd[s];d.forEach(T),S(t),f.clear();function T(g){!g||f.has(g)||(f.add(g),g.parentNode&&T(g.parentNode))}function S(g){!g||E.has(g)||[].forEach.call(g.children,I=>{if(Eo(I)!=="script")if(f.has(I))S(I);else{const b=c?I.getAttribute(c):null,y=b!==null&&b!=="false",M=ar.get(I)||0,v=c?M+1:M,U=(R.get(I)||0)+1;ar.set(I,v),R.set(I,U),A.push(I),v===1&&y&&Vd.add(I),U===1&&I.setAttribute(s,""),!y&&c&&I.setAttribute(c,c==="inert"?"":"true")}})}return im++,()=>{A.forEach(g=>{const I=ar.get(g)||0,b=c?I-1:I,y=(R.get(g)||0)-1;ar.set(g,b),R.set(g,y),b||(!Vd.has(g)&&c&&g.removeAttribute(c),Vd.delete(g)),y||g.removeAttribute(s)}),im--,im||(ar=new WeakMap,ar=new WeakMap,Vd=new WeakSet,Wd={})}}function aI(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);const l=qH(e[0]).body;return QH(e.concat(Array.from(l.querySelectorAll("[aria-live]"))),l,t,n)}const ch={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0},Mf=C.forwardRef(function(t,n){const[l,s]=C.useState();Ha(()=>{o0()&&s("button")},[]);const c={ref:n,tabIndex:0,role:l,"aria-hidden":l?void 0:!0,[is("focus-guard")]:"",style:ch};return u.jsx("span",{...t,...c})}),S0=C.createContext(null),nI=is("portal");function g0(e){e===void 0&&(e={});const{id:t,root:n}=e,l=GR(),s=_0(),[c,d]=C.useState(null),f=C.useRef(null);return Ha(()=>()=>{c==null||c.remove(),queueMicrotask(()=>{f.current=null})},[c]),Ha(()=>{if(!l||f.current)return;const E=t?document.getElementById(t):null;if(!E)return;const A=document.createElement("div");A.id=l,A.setAttribute(nI,""),E.appendChild(A),f.current=A,d(A)},[t,l]),Ha(()=>{if(n===null||!l||f.current)return;let E=n||(s==null?void 0:s.portalNode);E&&!Mt(E)&&(E=E.current),E=E||document.body;let A=null;t&&(A=document.createElement("div"),A.id=t,E.appendChild(A));const R=document.createElement("div");R.id=l,R.setAttribute(nI,""),E=A||E,E.appendChild(R),f.current=R,d(R)},[t,n,l,s]),c}function $H(e){const{children:t,id:n,root:l,preserveTabOrder:s=!0}=e,c=g0({id:n,root:l}),[d,f]=C.useState(null),E=C.useRef(null),A=C.useRef(null),R=C.useRef(null),T=C.useRef(null),S=d==null?void 0:d.modal,g=d==null?void 0:d.open,I=!!d&&!d.modal&&d.open&&s&&!!(l||c);return C.useEffect(()=>{if(!c||!s||S)return;function b(y){c&&nu(y)&&(y.type==="focusin"?Fp:X1)(c)}return c.addEventListener("focusin",b,!0),c.addEventListener("focusout",b,!0),()=>{c.removeEventListener("focusin",b,!0),c.removeEventListener("focusout",b,!0)}},[c,s,S]),C.useEffect(()=>{c&&(g||Fp(c))},[g,c]),u.jsxs(S0.Provider,{value:C.useMemo(()=>({preserveTabOrder:s,beforeOutsideRef:E,afterOutsideRef:A,beforeInsideRef:R,afterInsideRef:T,portalNode:c,setFocusManagerState:f}),[s,c]),children:[I&&c&&u.jsx(Mf,{"data-type":"outside",ref:E,onFocus:b=>{if(nu(b,c)){var y;(y=R.current)==null||y.focus()}else{const M=d?d.domReference:null,v=u0(M);v==null||v.focus()}}}),I&&c&&u.jsx("span",{"aria-owns":c.id,style:ch}),c&&Cu.createPortal(t,c),I&&c&&u.jsx(Mf,{"data-type":"outside",ref:A,onFocus:b=>{if(nu(b,c)){var y;(y=T.current)==null||y.focus()}else{const M=d?d.domReference:null,v=c0(M);v==null||v.focus(),d!=null&&d.closeOnFocusOut&&(d==null||d.onOpenChange(!1,b.nativeEvent,"focus-out"))}}})]})}const _0=()=>C.useContext(S0);function iI(e){return C.useMemo(()=>t=>{e.forEach(n=>{n&&(n.current=t)})},e)}const JH=20;let Po=[];function ex(e){Po=Po.filter(t=>t.isConnected),e&&Eo(e)!=="body"&&(Po.push(e),Po.length>JH&&(Po=Po.slice(-20)))}function lI(){return Po.slice().reverse().find(e=>e.isConnected)}function tx(e){const t=Ou();return i0(e,t)?e:oh(e,t)[0]||e}function oI(e,t){var n;if(!t.current.includes("floating")&&!((n=e.getAttribute("role"))!=null&&n.includes("dialog")))return;const l=Ou(),c=G1(e,l).filter(f=>{const E=f.getAttribute("data-tabindex")||"";return i0(f,l)||f.hasAttribute("data-tabindex")&&!E.startsWith("-")}),d=e.getAttribute("tabindex");t.current.includes("floating")||c.length===0?d!=="0"&&e.setAttribute("tabindex","0"):(d!=="-1"||e.hasAttribute("data-tabindex")&&e.getAttribute("data-tabindex")!=="-1")&&(e.setAttribute("tabindex","-1"),e.setAttribute("data-tabindex","-1"))}const ax=C.forwardRef(function(t,n){return u.jsx("button",{...t,type:"button",ref:n,tabIndex:-1,style:ch})});function nx(e){const{context:t,children:n,disabled:l=!1,order:s=["content"],guards:c=!0,initialFocus:d=0,returnFocus:f=!0,restoreFocus:E=!1,modal:A=!0,visuallyHiddenDismiss:R=!1,closeOnFocusOut:T=!0,outsideElementsInert:S=!1,getInsideElements:g=()=>[]}=e,{open:I,onOpenChange:b,events:y,dataRef:M,elements:{domReference:v,floating:U}}=t,H=rn(()=>{var be;return(be=M.current.floatingContext)==null?void 0:be.nodeId}),K=rn(g),F=typeof d=="number"&&d<0,x=wp(v)&&F,re=XH(),ie=re?c:!0,se=!ie||re&&S,oe=Bo(s),de=Bo(d),Ae=Bo(f),ee=rh(),J=_0(),w=C.useRef(null),L=C.useRef(null),W=C.useRef(!1),le=C.useRef(!1),D=C.useRef(-1),X=J!=null,Z=Pm(U),Y=rn(function(be){return be===void 0&&(be=Z),be?oh(be,Ou()):[]}),ce=rn(be=>{const Ne=Y(be);return oe.current.map(Ie=>v&&Ie==="reference"?v:Z&&Ie==="floating"?Z:Ne).filter(Boolean).flat()});C.useEffect(()=>{if(l||!A)return;function be(Ie){if(Ie.key==="Tab"){Ka(Z,ql(en(Z)))&&Y().length===0&&!x&&JA(Ie);const xe=ce(),nt=gi(Ie);oe.current[0]==="reference"&&nt===v&&(JA(Ie),Ie.shiftKey?tr(xe[xe.length-1]):tr(xe[1])),oe.current[1]==="floating"&&nt===Z&&Ie.shiftKey&&(JA(Ie),tr(xe[0]))}}const Ne=en(Z);return Ne.addEventListener("keydown",be),()=>{Ne.removeEventListener("keydown",be)}},[l,v,Z,A,oe,x,Y,ce]),C.useEffect(()=>{if(l||!U)return;function be(Ne){const Ie=gi(Ne),nt=Y().indexOf(Ie);nt!==-1&&(D.current=nt)}return U.addEventListener("focusin",be),()=>{U.removeEventListener("focusin",be)}},[l,U,Y]),C.useEffect(()=>{if(l||!T)return;function be(){le.current=!0,setTimeout(()=>{le.current=!1})}function Ne(Ie){const xe=Ie.relatedTarget,nt=Ie.currentTarget;queueMicrotask(()=>{const yt=H(),it=!(Ka(v,xe)||Ka(U,xe)||Ka(xe,U)||Ka(J==null?void 0:J.portalNode,xe)||xe!=null&&xe.hasAttribute(is("focus-guard"))||ee&&(au(ee.nodesRef.current,yt).find(st=>{var Tt,St;return Ka((Tt=st.context)==null?void 0:Tt.elements.floating,xe)||Ka((St=st.context)==null?void 0:St.elements.domReference,xe)})||Bp(ee.nodesRef.current,yt).find(st=>{var Tt,St,Qt;return[(Tt=st.context)==null?void 0:Tt.elements.floating,Pm((St=st.context)==null?void 0:St.elements.floating)].includes(xe)||((Qt=st.context)==null?void 0:Qt.elements.domReference)===xe})));if(nt===v&&Z&&oI(Z,oe),E&&it&&ql(en(Z))===en(Z).body){Ra(Z)&&Z.focus();const st=D.current,Tt=Y(),St=Tt[st]||Tt[Tt.length-1]||Z;Ra(St)&&St.focus()}(x||!A)&&xe&&it&&!le.current&&xe!==lI()&&(W.current=!0,b(!1,Ie,"focus-out"))})}if(U&&Ra(v))return v.addEventListener("focusout",Ne),v.addEventListener("pointerdown",be),U.addEventListener("focusout",Ne),()=>{v.removeEventListener("focusout",Ne),v.removeEventListener("pointerdown",be),U.removeEventListener("focusout",Ne)}},[l,v,U,Z,A,ee,J,b,T,E,Y,x,H,oe]);const me=C.useRef(null),he=C.useRef(null),Se=iI([me,J==null?void 0:J.beforeInsideRef]),Te=iI([he,J==null?void 0:J.afterInsideRef]);C.useEffect(()=>{var be,Ne;if(l||!U)return;const Ie=Array.from((J==null||(be=J.portalNode)==null?void 0:be.querySelectorAll("["+is("portal")+"]"))||[]),xe=ee?Bp(ee.nodesRef.current,H()):[],nt=ee&&!A?xe.map(Tt=>{var St;return(St=Tt.context)==null?void 0:St.elements.floating}):[],yt=(Ne=xe.find(Tt=>{var St;return wp(((St=Tt.context)==null?void 0:St.elements.domReference)||null)}))==null||(Ne=Ne.context)==null?void 0:Ne.elements.domReference,it=[U,yt,...Ie,...nt,...K(),w.current,L.current,me.current,he.current,J==null?void 0:J.beforeOutsideRef.current,J==null?void 0:J.afterOutsideRef.current,oe.current.includes("reference")||x?v:null].filter(Tt=>Tt!=null),st=A||x?aI(it,!se,se):aI(it);return()=>{st()}},[l,v,U,A,oe,J,x,ie,se,ee,H,K]),Ha(()=>{if(l||!Ra(Z))return;const be=en(Z),Ne=ql(be);queueMicrotask(()=>{const Ie=ce(Z),xe=de.current,nt=(typeof xe=="number"?Ie[xe]:xe.current)||Z,yt=Ka(Z,Ne);!F&&!yt&&I&&tr(nt,{preventScroll:nt===Z})})},[l,I,Z,F,ce,de]),Ha(()=>{if(l||!Z)return;let be=!1;const Ne=en(Z),Ie=ql(Ne);ex(Ie);function xe(it){let{reason:st,event:Tt,nested:St}=it;if(["hover","safe-polygon"].includes(st)&&Tt.type==="mouseleave"&&(W.current=!0),st==="outside-press")if(St)W.current=!1,be=!0;else if(Y1(Tt)||K1(Tt))W.current=!1;else{let Qt=!1;document.createElement("div").focus({get preventScroll(){return Qt=!0,!1}}),Qt?(W.current=!1,be=!0):W.current=!0}}y.on("openchange",xe);const nt=Ne.createElement("span");nt.setAttribute("tabindex","-1"),nt.setAttribute("aria-hidden","true"),Object.assign(nt.style,ch),X&&v&&v.insertAdjacentElement("afterend",nt);function yt(){if(typeof Ae.current=="boolean"){const it=v||lI();return it&&it.isConnected?it:nt}return Ae.current.current||nt}return()=>{y.off("openchange",xe);const it=ql(Ne),st=Ka(U,it)||ee&&au(ee.nodesRef.current,H()).some(St=>{var Qt;return Ka((Qt=St.context)==null?void 0:Qt.elements.floating,it)}),Tt=yt();queueMicrotask(()=>{const St=tx(Tt);Ae.current&&!W.current&&Ra(St)&&(!(St!==it&&it!==Ne.body)||st)&&St.focus({preventScroll:be}),nt.remove()})}},[l,U,Z,Ae,M,y,ee,X,v,H]),C.useEffect(()=>{queueMicrotask(()=>{W.current=!1})},[l]),Ha(()=>{if(!l&&J)return J.setFocusManagerState({modal:A,closeOnFocusOut:T,open:I,onOpenChange:b,domReference:v}),()=>{J.setFocusManagerState(null)}},[l,J,A,I,b,T,v]),Ha(()=>{l||Z&&oI(Z,oe)},[l,Z,oe]);function Oe(be){return l||!R||!A?null:u.jsx(ax,{ref:be==="start"?w:L,onClick:Ne=>b(!1,Ne.nativeEvent),children:typeof R=="string"?R:"Dismiss"})}const Be=!l&&ie&&(A?!x:!0)&&(X||A);return u.jsxs(u.Fragment,{children:[Be&&u.jsx(Mf,{"data-type":"inside",ref:Se,onFocus:be=>{if(A){const Ie=ce();tr(s[0]==="reference"?Ie[0]:Ie[Ie.length-1])}else if(J!=null&&J.preserveTabOrder&&J.portalNode)if(W.current=!1,nu(be,J.portalNode)){const Ie=c0(v);Ie==null||Ie.focus()}else{var Ne;(Ne=J.beforeOutsideRef.current)==null||Ne.focus()}}}),!x&&Oe("start"),n,Oe("end"),Be&&u.jsx(Mf,{"data-type":"inside",ref:Te,onFocus:be=>{if(A)tr(ce()[0]);else if(J!=null&&J.preserveTabOrder&&J.portalNode)if(T&&(W.current=!0),nu(be,J.portalNode)){const Ie=u0(v);Ie==null||Ie.focus()}else{var Ne;(Ne=J.afterOutsideRef.current)==null||Ne.focus()}}})]})}function sI(e){return Ra(e.target)&&e.target.tagName==="BUTTON"}function ix(e){return Ra(e.target)&&e.target.tagName==="A"}function rI(e){return sh(e)}function lx(e,t){t===void 0&&(t={});const{open:n,onOpenChange:l,dataRef:s,elements:{domReference:c}}=e,{enabled:d=!0,event:f="click",toggle:E=!0,ignoreMouse:A=!1,keyboardHandlers:R=!0,stickIfOpen:T=!0}=t,S=C.useRef(),g=C.useRef(!1),I=C.useMemo(()=>({onPointerDown(b){S.current=b.pointerType},onMouseDown(b){const y=S.current;b.button===0&&f!=="click"&&(Mr(y,!0)&&A||(n&&E&&(!(s.current.openEvent&&T)||s.current.openEvent.type==="mousedown")?l(!1,b.nativeEvent,"click"):(b.preventDefault(),l(!0,b.nativeEvent,"click"))))},onClick(b){const y=S.current;if(f==="mousedown"&&S.current){S.current=void 0;return}Mr(y,!0)&&A||(n&&E&&(!(s.current.openEvent&&T)||s.current.openEvent.type==="click")?l(!1,b.nativeEvent,"click"):l(!0,b.nativeEvent,"click"))},onKeyDown(b){S.current=void 0,!(b.defaultPrevented||!R||sI(b))&&(b.key===" "&&!rI(c)&&(b.preventDefault(),g.current=!0),!ix(b)&&b.key==="Enter"&&l(!(n&&E),b.nativeEvent,"click"))},onKeyUp(b){b.defaultPrevented||!R||sI(b)||rI(c)||b.key===" "&&g.current&&(g.current=!1,l(!(n&&E),b.nativeEvent,"click"))}}),[s,c,f,A,R,l,n,T,E]);return C.useMemo(()=>d?{reference:I}:{},[d,I])}function ox(e,t){let n=null,l=null,s=!1;return{contextElement:e||void 0,getBoundingClientRect(){var c;const d=(e==null?void 0:e.getBoundingClientRect())||{width:0,height:0,x:0,y:0},f=t.axis==="x"||t.axis==="both",E=t.axis==="y"||t.axis==="both",A=["mouseenter","mousemove"].includes(((c=t.dataRef.current.openEvent)==null?void 0:c.type)||"")&&t.pointerType!=="touch";let R=d.width,T=d.height,S=d.x,g=d.y;return n==null&&t.x&&f&&(n=d.x-t.x),l==null&&t.y&&E&&(l=d.y-t.y),S-=n||0,g-=l||0,R=0,T=0,!s||A?(R=t.axis==="y"?d.width:0,T=t.axis==="x"?d.height:0,S=f&&t.x!=null?t.x:S,g=E&&t.y!=null?t.y:g):s&&!A&&(T=t.axis==="x"?d.height:T,R=t.axis==="y"?d.width:R),s=!0,{width:R,height:T,x:S,y:g,top:g,right:S+R,bottom:g+T,left:S}}}}function cI(e){return e!=null&&e.clientX!=null}function sx(e,t){t===void 0&&(t={});const{open:n,dataRef:l,elements:{floating:s,domReference:c},refs:d}=e,{enabled:f=!0,axis:E="both",x:A=null,y:R=null}=t,T=C.useRef(!1),S=C.useRef(null),[g,I]=C.useState(),[b,y]=C.useState([]),M=rn((F,x)=>{T.current||l.current.openEvent&&!cI(l.current.openEvent)||d.setPositionReference(ox(c,{x:F,y:x,axis:E,dataRef:l,pointerType:g}))}),v=rn(F=>{A!=null||R!=null||(n?S.current||y([]):M(F.clientX,F.clientY))}),U=Mr(g)?s:n,H=C.useCallback(()=>{if(!U||!f||A!=null||R!=null)return;const F=cn(s);function x(re){const ie=gi(re);Ka(s,ie)?(F.removeEventListener("mousemove",x),S.current=null):M(re.clientX,re.clientY)}if(!l.current.openEvent||cI(l.current.openEvent)){F.addEventListener("mousemove",x);const re=()=>{F.removeEventListener("mousemove",x),S.current=null};return S.current=re,re}d.setPositionReference(c)},[U,f,A,R,s,l,d,c,M]);C.useEffect(()=>H(),[H,b]),C.useEffect(()=>{f&&!s&&(T.current=!1)},[f,s]),C.useEffect(()=>{!f&&n&&(T.current=!0)},[f,n]),Ha(()=>{f&&(A!=null||R!=null)&&(T.current=!1,M(A,R))},[f,A,R,M]);const K=C.useMemo(()=>{function F(x){let{pointerType:re}=x;I(re)}return{onPointerDown:F,onPointerEnter:F,onMouseMove:v,onMouseEnter:v}},[v]);return C.useMemo(()=>f?{reference:K}:{},[f,K])}const rx={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},cx={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},uI=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function p0(e,t){t===void 0&&(t={});const{open:n,onOpenChange:l,elements:s,dataRef:c}=e,{enabled:d=!0,escapeKey:f=!0,outsidePress:E=!0,outsidePressEvent:A="pointerdown",referencePress:R=!1,referencePressEvent:T="pointerdown",ancestorScroll:S=!1,bubbles:g,capture:I}=t,b=rh(),y=rn(typeof E=="function"?E:()=>!1),M=typeof E=="function"?y:E,v=C.useRef(!1),U=C.useRef(!1),{escapeKey:H,outsidePress:K}=uI(g),{escapeKey:F,outsidePress:x}=uI(I),re=C.useRef(!1),ie=rn(J=>{var w;if(!n||!d||!f||J.key!=="Escape"||re.current)return;const L=(w=c.current.floatingContext)==null?void 0:w.nodeId,W=b?au(b.nodesRef.current,L):[];if(!H&&(J.stopPropagation(),W.length>0)){let le=!0;if(W.forEach(D=>{var X;if((X=D.context)!=null&&X.open&&!D.context.dataRef.current.__escapeKeyBubbles){le=!1;return}}),!le)return}l(!1,j1(J)?J.nativeEvent:J,"escape-key")}),se=rn(J=>{var w;const L=()=>{var W;ie(J),(W=gi(J))==null||W.removeEventListener("keydown",L)};(w=gi(J))==null||w.addEventListener("keydown",L)}),oe=rn(J=>{var w;const L=v.current;v.current=!1;const W=U.current;if(U.current=!1,A==="click"&&W||L||typeof M=="function"&&!M(J))return;const le=gi(J),D="["+is("inert")+"]",X=en(s.floating).querySelectorAll(D);let Z=Mt(le)?le:null;for(;Z&&!Al(Z);){const he=Rl(Z);if(Al(he)||!Mt(he))break;Z=he}if(X.length&&Mt(le)&&!F1(le)&&!Ka(le,s.floating)&&Array.from(X).every(he=>!Ka(Z,he)))return;if(Ra(le)&&ee){const he=Al(le),Se=ci(le),Te=/auto|scroll/,Oe=he||Te.test(Se.overflowX),Be=he||Te.test(Se.overflowY),be=Oe&&le.clientWidth>0&&le.scrollWidth>le.clientWidth,Ne=Be&&le.clientHeight>0&&le.scrollHeight>le.clientHeight,Ie=Se.direction==="rtl",xe=Ne&&(Ie?J.offsetX<=le.offsetWidth-le.clientWidth:J.offsetX>le.clientWidth),nt=be&&J.offsetY>le.clientHeight;if(xe||nt)return}const Y=(w=c.current.floatingContext)==null?void 0:w.nodeId,ce=b&&au(b.nodesRef.current,Y).some(he=>{var Se;return $A(J,(Se=he.context)==null?void 0:Se.elements.floating)});if($A(J,s.floating)||$A(J,s.domReference)||ce)return;const me=b?au(b.nodesRef.current,Y):[];if(me.length>0){let he=!0;if(me.forEach(Se=>{var Te;if((Te=Se.context)!=null&&Te.open&&!Se.context.dataRef.current.__outsidePressBubbles){he=!1;return}}),!he)return}l(!1,J,"outside-press")}),de=rn(J=>{var w;const L=()=>{var W;oe(J),(W=gi(J))==null||W.removeEventListener(A,L)};(w=gi(J))==null||w.addEventListener(A,L)});C.useEffect(()=>{if(!n||!d)return;c.current.__escapeKeyBubbles=H,c.current.__outsidePressBubbles=K;let J=-1;function w(X){l(!1,X,"ancestor-scroll")}function L(){window.clearTimeout(J),re.current=!0}function W(){J=window.setTimeout(()=>{re.current=!1},ih()?5:0)}const le=en(s.floating);f&&(le.addEventListener("keydown",F?se:ie,F),le.addEventListener("compositionstart",L),le.addEventListener("compositionend",W)),M&&le.addEventListener(A,x?de:oe,x);let D=[];return S&&(Mt(s.domReference)&&(D=to(s.domReference)),Mt(s.floating)&&(D=D.concat(to(s.floating))),!Mt(s.reference)&&s.reference&&s.reference.contextElement&&(D=D.concat(to(s.reference.contextElement)))),D=D.filter(X=>{var Z;return X!==((Z=le.defaultView)==null?void 0:Z.visualViewport)}),D.forEach(X=>{X.addEventListener("scroll",w,{passive:!0})}),()=>{f&&(le.removeEventListener("keydown",F?se:ie,F),le.removeEventListener("compositionstart",L),le.removeEventListener("compositionend",W)),M&&le.removeEventListener(A,x?de:oe,x),D.forEach(X=>{X.removeEventListener("scroll",w)}),window.clearTimeout(J)}},[c,s,f,M,A,n,l,S,d,H,K,ie,F,se,oe,x,de]),C.useEffect(()=>{v.current=!1},[M,A]);const Ae=C.useMemo(()=>({onKeyDown:ie,...R&&{[rx[T]]:J=>{l(!1,J.nativeEvent,"reference-press")},...T!=="click"&&{onClick(J){l(!1,J.nativeEvent,"reference-press")}}}}),[ie,l,R,T]),ee=C.useMemo(()=>({onKeyDown:ie,onMouseDown(){U.current=!0},onMouseUp(){U.current=!0},[cx[A]]:()=>{v.current=!0}}),[ie,A]);return C.useMemo(()=>d?{reference:Ae,floating:ee}:{},[d,Ae,ee])}function BR(e){const{open:t=!1,onOpenChange:n,elements:l}=e,s=GR(),c=C.useRef({}),[d]=C.useState(()=>FH()),f=wR()!=null,[E,A]=C.useState(l.reference),R=rn((g,I,b)=>{c.current.openEvent=g?I:void 0,d.emit("openchange",{open:g,event:I,reason:b,nested:f}),n==null||n(g,I,b)}),T=C.useMemo(()=>({setPositionReference:A}),[]),S=C.useMemo(()=>({reference:E||l.reference||null,floating:l.floating||null,domReference:l.reference}),[E,l.reference,l.floating]);return C.useMemo(()=>({dataRef:c,open:t,onOpenChange:R,elements:S,events:d,floatingId:s,refs:T}),[t,R,S,d,s,T])}function ux(e){e===void 0&&(e={});const{nodeId:t}=e,n=BR({...e,elements:{reference:null,floating:null,...e.elements}}),l=e.rootContext||n,s=l.elements,[c,d]=C.useState(null),[f,E]=C.useState(null),R=(s==null?void 0:s.domReference)||c,T=C.useRef(null),S=rh();Ha(()=>{R&&(T.current=R)},[R]);const g=OH({...e,elements:{...s,...f&&{reference:f}}}),I=C.useCallback(U=>{const H=Mt(U)?{getBoundingClientRect:()=>U.getBoundingClientRect(),getClientRects:()=>U.getClientRects(),contextElement:U}:U;E(H),g.refs.setReference(H)},[g.refs]),b=C.useCallback(U=>{(Mt(U)||U===null)&&(T.current=U,d(U)),(Mt(g.refs.reference.current)||g.refs.reference.current===null||U!==null&&!Mt(U))&&g.refs.setReference(U)},[g.refs]),y=C.useMemo(()=>({...g.refs,setReference:b,setPositionReference:I,domReference:T}),[g.refs,b,I]),M=C.useMemo(()=>({...g.elements,domReference:R}),[g.elements,R]),v=C.useMemo(()=>({...g,...l,refs:y,elements:M,nodeId:t}),[g,y,M,t,l]);return Ha(()=>{l.dataRef.current.floatingContext=v;const U=S==null?void 0:S.nodesRef.current.find(H=>H.id===t);U&&(U.context=v)}),C.useMemo(()=>({...g,context:v,refs:y,elements:M}),[g,y,M,v])}function lm(){return w1()&&o0()}function dx(e,t){t===void 0&&(t={});const{open:n,onOpenChange:l,events:s,dataRef:c,elements:d}=e,{enabled:f=!0,visibleOnly:E=!0}=t,A=C.useRef(!1),R=C.useRef(-1),T=C.useRef(!0);C.useEffect(()=>{if(!f)return;const g=cn(d.domReference);function I(){!n&&Ra(d.domReference)&&d.domReference===ql(en(d.domReference))&&(A.current=!0)}function b(){T.current=!0}function y(){T.current=!1}return g.addEventListener("blur",I),lm()&&(g.addEventListener("keydown",b,!0),g.addEventListener("pointerdown",y,!0)),()=>{g.removeEventListener("blur",I),lm()&&(g.removeEventListener("keydown",b,!0),g.removeEventListener("pointerdown",y,!0))}},[d.domReference,n,f]),C.useEffect(()=>{if(!f)return;function g(I){let{reason:b}=I;(b==="reference-press"||b==="escape-key")&&(A.current=!0)}return s.on("openchange",g),()=>{s.off("openchange",g)}},[s,f]),C.useEffect(()=>()=>{Pn(R)},[]);const S=C.useMemo(()=>({onMouseLeave(){A.current=!1},onFocus(g){if(A.current)return;const I=gi(g.nativeEvent);if(E&&Mt(I)){if(lm()&&!g.relatedTarget){if(!T.current&&!sh(I))return}else if(!z1(I))return}l(!0,g.nativeEvent,"focus")},onBlur(g){A.current=!1;const I=g.relatedTarget,b=g.nativeEvent,y=Mt(I)&&I.hasAttribute(is("focus-guard"))&&I.getAttribute("data-type")==="outside";R.current=window.setTimeout(()=>{var M;const v=ql(d.domReference?d.domReference.ownerDocument:document);!I&&v===d.domReference||Ka((M=c.current.floatingContext)==null?void 0:M.refs.floating.current,v)||Ka(d.domReference,v)||y||l(!1,b,"focus")})}}),[c,d.domReference,l,E]);return C.useMemo(()=>f?{reference:S}:{},[f,S])}function om(e,t,n){const l=new Map,s=n==="item";let c=e;if(s&&e){const{[Zp]:d,[Qp]:f,...E}=e;c=E}return{...n==="floating"&&{tabIndex:-1,[kH]:""},...c,...t.map(d=>{const f=d?d[n]:null;return typeof f=="function"?e?f(e):null:f}).concat(e).reduce((d,f)=>(f&&Object.entries(f).forEach(E=>{let[A,R]=E;if(!(s&&[Zp,Qp].includes(A)))if(A.indexOf("on")===0){if(l.has(A)||l.set(A,[]),typeof R=="function"){var T;(T=l.get(A))==null||T.push(R),d[A]=function(){for(var S,g=arguments.length,I=new Array(g),b=0;b<g;b++)I[b]=arguments[b];return(S=l.get(A))==null?void 0:S.map(y=>y(...I)).find(y=>y!==void 0)}}}else d[A]=R}),d),{})}}function I0(e){e===void 0&&(e=[]);const t=e.map(f=>f==null?void 0:f.reference),n=e.map(f=>f==null?void 0:f.floating),l=e.map(f=>f==null?void 0:f.item),s=C.useCallback(f=>om(f,e,"reference"),t),c=C.useCallback(f=>om(f,e,"floating"),n),d=C.useCallback(f=>om(f,e,"item"),l);return C.useMemo(()=>({getReferenceProps:s,getFloatingProps:c,getItemProps:d}),[s,c,d])}const fx=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function hx(e,t){var n,l;t===void 0&&(t={});const{open:s,elements:c,floatingId:d}=e,{enabled:f=!0,role:E="dialog"}=t,A=GR(),R=((n=c.domReference)==null?void 0:n.id)||A,T=C.useMemo(()=>{var v;return((v=Pm(c.floating))==null?void 0:v.id)||d},[c.floating,d]),S=(l=fx.get(E))!=null?l:E,I=wR()!=null,b=C.useMemo(()=>S==="tooltip"||E==="label"?{["aria-"+(E==="label"?"labelledby":"describedby")]:s?T:void 0}:{"aria-expanded":s?"true":"false","aria-haspopup":S==="alertdialog"?"dialog":S,"aria-controls":s?T:void 0,...S==="listbox"&&{role:"combobox"},...S==="menu"&&{id:R},...S==="menu"&&I&&{role:"menuitem"},...E==="select"&&{"aria-autocomplete":"none"},...E==="combobox"&&{"aria-autocomplete":"list"}},[S,T,I,s,R,E]),y=C.useMemo(()=>{const v={id:T,...S&&{role:S}};return S==="tooltip"||E==="label"?v:{...v,...S==="menu"&&{"aria-labelledby":R}}},[S,T,R,E]),M=C.useCallback(v=>{let{active:U,selected:H}=v;const K={role:"option",...U&&{id:T+"-fui-option"}};switch(E){case"select":return{...K,"aria-selected":U&&H};case"combobox":return{...K,"aria-selected":H}}return{}},[T,E]);return C.useMemo(()=>f?{reference:b,floating:y,item:M}:{},[f,b,y,M])}function Ex(e,t,n){n===void 0&&(n=!0);let l=e.filter(c=>{var d;return c.parentId===t&&((d=c.context)==null?void 0:d.open)}),s=l;for(;s.length;)s=n?e.filter(c=>{var d;return(d=s)==null?void 0:d.some(f=>{var E;return c.parentId===f.id&&((E=c.context)==null?void 0:E.open)})}):e,l=l.concat(s);return l}function dI(e,t){const[n,l]=e;let s=!1;const c=t.length;for(let d=0,f=c-1;d<c;f=d++){const[E,A]=t[d]||[0,0],[R,T]=t[f]||[0,0];A>=l!=T>=l&&n<=(R-E)*(l-A)/(T-A)+E&&(s=!s)}return s}function Ax(e,t){return e[0]>=t.x&&e[0]<=t.x+t.width&&e[1]>=t.y&&e[1]<=t.y+t.height}function mx(e){e===void 0&&(e={});const{buffer:t=.5,blockPointerEvents:n=!1,requireIntent:l=!0}=e;let s,c=!1,d=null,f=null,E=performance.now();function A(T,S){const g=performance.now(),I=g-E;if(d===null||f===null||I===0)return d=T,f=S,E=g,null;const b=T-d,y=S-f,v=Math.sqrt(b*b+y*y)/I;return d=T,f=S,E=g,v}const R=T=>{let{x:S,y:g,placement:I,elements:b,onClose:y,nodeId:M,tree:v}=T;return function(H){function K(){clearTimeout(s),y()}if(clearTimeout(s),!b.domReference||!b.floating||I==null||S==null||g==null)return;const{clientX:F,clientY:x}=H,re=[F,x],ie=WH(H),se=H.type==="mouseleave",oe=nm(b.floating,ie),de=nm(b.domReference,ie),Ae=b.domReference.getBoundingClientRect(),ee=b.floating.getBoundingClientRect(),J=I.split("-")[0],w=S>ee.right-ee.width/2,L=g>ee.bottom-ee.height/2,W=Ax(re,Ae),le=ee.width>Ae.width,D=ee.height>Ae.height,X=(le?Ae:ee).left,Z=(le?Ae:ee).right,Y=(D?Ae:ee).top,ce=(D?Ae:ee).bottom;if(oe&&(c=!0,!se))return;if(de&&(c=!1),de&&!se){c=!0;return}if(se&&Mt(H.relatedTarget)&&nm(b.floating,H.relatedTarget)||v&&Ex(v.nodesRef.current,M).some(Se=>{let{context:Te}=Se;return Te==null?void 0:Te.open}))return;if(J==="top"&&g>=Ae.bottom-1||J==="bottom"&&g<=Ae.top+1||J==="left"&&S>=Ae.right-1||J==="right"&&S<=Ae.left+1)return K();let me=[];switch(J){case"top":me=[[X,Ae.top+1],[X,ee.bottom-1],[Z,ee.bottom-1],[Z,Ae.top+1]];break;case"bottom":me=[[X,ee.top+1],[X,Ae.bottom-1],[Z,Ae.bottom-1],[Z,ee.top+1]];break;case"left":me=[[ee.right-1,ce],[ee.right-1,Y],[Ae.left+1,Y],[Ae.left+1,ce]];break;case"right":me=[[Ae.right-1,ce],[Ae.right-1,Y],[ee.left+1,Y],[ee.left+1,ce]];break}function he(Se){let[Te,Oe]=Se;switch(J){case"top":{const Be=[le?Te+t/2:w?Te+t*4:Te-t*4,Oe+t+1],be=[le?Te-t/2:w?Te+t*4:Te-t*4,Oe+t+1],Ne=[[ee.left,w||le?ee.bottom-t:ee.top],[ee.right,w?le?ee.bottom-t:ee.top:ee.bottom-t]];return[Be,be,...Ne]}case"bottom":{const Be=[le?Te+t/2:w?Te+t*4:Te-t*4,Oe-t],be=[le?Te-t/2:w?Te+t*4:Te-t*4,Oe-t],Ne=[[ee.left,w||le?ee.top+t:ee.bottom],[ee.right,w?le?ee.top+t:ee.bottom:ee.top+t]];return[Be,be,...Ne]}case"left":{const Be=[Te+t+1,D?Oe+t/2:L?Oe+t*4:Oe-t*4],be=[Te+t+1,D?Oe-t/2:L?Oe+t*4:Oe-t*4];return[...[[L||D?ee.right-t:ee.left,ee.top],[L?D?ee.right-t:ee.left:ee.right-t,ee.bottom]],Be,be]}case"right":{const Be=[Te-t,D?Oe+t/2:L?Oe+t*4:Oe-t*4],be=[Te-t,D?Oe-t/2:L?Oe+t*4:Oe-t*4],Ne=[[L||D?ee.left+t:ee.right,ee.top],[L?D?ee.left+t:ee.right:ee.left+t,ee.bottom]];return[Be,be,...Ne]}}}if(!dI([F,x],me)){if(c&&!W)return K();if(!se&&l){const Se=A(H.clientX,H.clientY);if(Se!==null&&Se<.1)return K()}dI([F,x],he([S,g]))?!c&&l&&(s=window.setTimeout(K,40)):K()}}};return R.__options={blockPointerEvents:n},R}function N0({controlled:e,default:t,name:n,state:l="value"}){const{current:s}=C.useRef(e!==void 0),[c,d]=C.useState(t),f=s?e:c,E=C.useCallback(A=>{s||d(A)},[]);return[f,E]}const Pi=typeof window<"u"?C.useLayoutEffect:C.useEffect;function C0(e){const[t,n]=C.useState(e?"idle":void 0),[l,s]=C.useState(e);return e&&!l&&(s(!0),n("starting")),!e&&l&&t!=="ending"&&n("ending"),!e&&!l&&t==="ending"&&n(void 0),Pi(()=>{if(!e)return;e&&l&&t!=="idle"&&n("starting");const c=requestAnimationFrame(()=>{n("idle")});return()=>{cancelAnimationFrame(c)}},[e,l,n,t]),C.useMemo(()=>({mounted:l,setMounted:s,transitionStatus:t}),[l,t])}function ui(e){const t=C.useRef(e);return Pi(()=>{t.current=e}),C.useCallback((...n)=>{var l;return(l=t.current)==null?void 0:l.call(t,...n)},[])}const b0=600;function O0(e){if(e)return{click:"click",hover:"hover",focus:"focus","focus-out":"focus-out","escape-key":"escape-key","outside-press":"outside-press","reference-press":"trigger-press","safe-polygon":"hover","ancestor-scroll":void 0,"list-navigation":void 0}[e]}function Rx(e,t=!1){const n=C.useRef(-1),l=C.useRef(-1),s=ui(()=>{cancelAnimationFrame(n.current),clearTimeout(l.current)});return C.useEffect(()=>s,[s]),ui((c,d=null)=>{s();const f=e.current;f&&(typeof f.getAnimations!="function"||globalThis.BASE_UI_ANIMATIONS_DISABLED?c():n.current=requestAnimationFrame(()=>{function E(){f&&Promise.allSettled(f.getAnimations().map(A=>A.finished)).then(()=>{d!=null&&d.aborted||Cu.flushSync(c)})}t?l.current=window.setTimeout(E):E()}))})}function Gm(e){const t=C.useRef(e);return Pi(()=>{t.current=e}),t}function uh(e){const{enabled:t=!0,open:n,ref:l,onComplete:s}=e,c=Gm(n),d=ui(s),f=Rx(l,n);C.useEffect(()=>{t&&f(()=>{n===c.current&&d()})},[t,n,d,f,c])}const Tx=C.createContext(void 0);function Sx(){return C.useContext(Tx)}function gx(e){const{open:t,onOpenChange:n,defaultOpen:l=!1,hoverable:s=!0,trackCursorAxis:c="none",delay:d,closeDelay:f,onOpenChangeComplete:E,disabled:A}=e,R=d??b0,T=f??0,[S,g]=C.useState(null),[I,b]=C.useState(null),[y,M]=C.useState(),v=C.useRef(null),[U,H]=N0({controlled:t,default:l,name:"Tooltip",state:"open"}),K=ui(n),F=C.useCallback((Y,ce,me)=>{K(Y,ce,me),H(Y)},[K,H]);U&&A&&F(!1,void 0,void 0);const{mounted:x,setMounted:re,transitionStatus:ie}=C0(U),se=ui(()=>{re(!1),E==null||E(!1)});uh({enabled:!e.actionsRef,open:U,ref:v,onComplete(){U||se()}}),C.useImperativeHandle(e.actionsRef,()=>({unmount:se}),[se]);const oe=BR({elements:{reference:S,floating:I},open:U,onOpenChange(Y,ce,me){const he=me==="hover"||me==="safe-polygon",Se=Y&&me==="focus",Te=!Y&&(me==="reference-press"||me==="escape-key");function Oe(){F(Y,ce,O0(me))}he?Cu.flushSync(Oe):Oe(),Se||Te?M(Se?"focus":"dismiss"):me==="hover"&&M(void 0)}}),de=Sx(),{delayRef:Ae,isInstantPhase:ee,hasProvider:J}=VH(oe),w=ee?"delay":y,L=YH(oe,{enabled:!A,mouseOnly:!0,move:!1,handleClose:s&&c!=="both"?mx():null,restMs(){const Y=de==null?void 0:de.delay,ce=typeof Ae.current=="object"?Ae.current.open:void 0;let me=R;return J&&(ce!==0?me=d??Y??R:me=0),me},delay(){const Y=typeof Ae.current=="object"?Ae.current.close:void 0;let ce=T;return f==null&&J&&(ce=Y),{close:ce}}}),W=dx(oe,{enabled:!A}),le=p0(oe,{enabled:!A,referencePress:!0}),D=sx(oe,{enabled:!A&&c!=="none",axis:c==="none"?void 0:c}),{getReferenceProps:X,getFloatingProps:Z}=I0([L,W,le,D]);return C.useMemo(()=>({open:U,setOpen:F,mounted:x,setMounted:re,setTriggerElement:g,positionerElement:I,setPositionerElement:b,popupRef:v,getTriggerProps:X,getPopupProps:Z,floatingRootContext:oe,instantType:w,transitionStatus:ie,onOpenChangeComplete:E}),[x,U,re,I,F,X,Z,oe,w,ie,E])}const D0=function(t){const{disabled:n=!1,defaultOpen:l=!1,onOpenChange:s,open:c,delay:d,closeDelay:f,hoverable:E=!0,trackCursorAxis:A="none",actionsRef:R,onOpenChangeComplete:T}=t,S=d??b0,g=f??0,I=gx({...t,defaultOpen:l,onOpenChange:s,open:c,hoverable:E,trackCursorAxis:A,delay:d,closeDelay:f,actionsRef:R,onOpenChangeComplete:T,disabled:n}),b=C.useMemo(()=>({...I,delay:S,closeDelay:g,trackCursorAxis:A}),[I,S,g,A]);return u.jsx(qN.Provider,{value:b,children:t.children})};let Lf=function(e){return e.startingStyle="data-starting-style",e.endingStyle="data-ending-style",e}({});const _x={[Lf.startingStyle]:""},px={[Lf.endingStyle]:""},FR={transitionStatus(e){return e==="starting"?_x:e==="ending"?px:null}};let Fo=function(e){return e.open="data-open",e.closed="data-closed",e[e.startingStyle=Lf.startingStyle]="startingStyle",e[e.endingStyle=Lf.endingStyle]="endingStyle",e.anchorHidden="data-anchor-hidden",e}({}),Ix=function(e){return e.popupOpen="data-popup-open",e.pressed="data-pressed",e}({});const Nx={[Ix.popupOpen]:""},Cx={[Fo.open]:""},bx={[Fo.closed]:""},Ox={[Fo.anchorHidden]:""},y0={open(e){return e?Nx:null}},dh={open(e){return e?Cx:bx},anchorHidden(e){return e?Ox:null}};function Dx(e,t){let n={};return Object.entries(e).forEach(([l,s])=>{if(t!=null&&t.hasOwnProperty(l)){const c=t[l](s);c!=null&&(n={...n,...c});return}s===!0?n[`data-${l.toLowerCase()}`]="":s&&(n[`data-${l.toLowerCase()}`]=s.toString())}),n}function yx(e,t){return typeof e=="function"?e(t):e}function gl(...e){if(e.length===0)return{};if(e.length===1)return fI(e[0],{});let t=fI(e[0],{});for(let n=1;n<e.length;n+=1){const l=e[n];l&&(v0(l)?t=l(t):t=vx(t,l))}return t??{}}function fI(e,t){return v0(e)?e(t):e??{}}function vx(e,t){return t?e?Object.entries(t).reduce((n,[l,s])=>(Mx(l,s)?n[l]=Lx(e[l],s):l==="style"?n[l]=Hx(e.style,s):l==="className"?n[l]=xx(e.className,s):n[l]=s,n),{...e}):t:e||{}}function Mx(e,t){const n=e.charCodeAt(2);return e[0]==="o"&&e[1]==="n"&&n>=65&&n<=90&&typeof t=="function"}function v0(e){return typeof e=="function"}function Lx(e,t){return n=>{if(Ux(n)){const s=n;wm(s);const c=t(s);return s.baseUIHandlerPrevented||e==null||e(s),c}const l=t(n);return e==null||e(n),l}}function wm(e){return e.preventBaseUIHandler=()=>{e.baseUIHandlerPrevented=!0},e}function Hx(e,t){if(t||e)return{...e,...t}}function xx(e,t){return t?e?t+" "+e:t:e}function Ux(e){return e!=null&&typeof e=="object"&&"nativeEvent"in e}function kx(e,t,n){return typeof e=="function"?e(t,n):C.cloneElement(e,{...gl(t,e.props),ref:t.ref})}function wr(...e){const t=C.useRef(void 0),n=C.useCallback(l=>{const s=e.map(c=>{if(c==null)return null;if(typeof c=="function"){const d=c,f=d(l);return typeof f=="function"?f:()=>{d(null)}}return c.current=l,()=>{c.current=null}});return()=>{s.forEach(c=>c==null?void 0:c())}},e);return C.useMemo(()=>e.every(l=>l==null)?null:l=>{t.current&&(t.current(),t.current=void 0),l!=null&&(t.current=n(l))},e)}const Px=parseInt(C.version,10);function M0(e){return Px>=e}function Gx(e,...t){let n;return typeof e!="function"?n=M0(19)?e.props.ref:e.ref:n=null,wr(n,...t)}function wx(e){return function(n){return e==="button"?u.jsx("button",{type:"button",...n}):e==="img"?u.jsx("img",{alt:"",...n}):u.jsx(e,{...n})}}const hI={};function fh(e,t,n={}){const{className:l,render:s}=t,{propGetter:c=M=>M,state:d=hI,ref:f,props:E,customStyleHookMapping:A,styleHooks:R=!0}=n,T=s||(typeof e=="string"?wx(e):e),S=yx(l,d),g=C.useMemo(()=>R?Dx(d,A):hI,[d,A,R]),I=c({...g,...Array.isArray(E)?gl(...E):E});let b=[];f!==void 0&&(b=Array.isArray(f)?f:[f]);const y={...I,ref:Gx(T,I.ref,...b)};return S!==void 0&&(y.className=S),()=>kx(T,y,d)}const Bx=C.forwardRef(function(t,n){const{className:l,render:s,...c}=t,{open:d,setTriggerElement:f,getTriggerProps:E}=Nu(),A=C.useMemo(()=>({open:d}),[d]);return fh("button",t,{state:A,ref:[n,f],props:[E,c],customStyleHookMapping:y0})()});QA.oneOfType([QA.func,QA.object]);const L0=C.createContext(void 0);function Fx(){const e=C.useContext(L0);if(e===void 0)throw new Error("Base UI: <Tooltip.Portal> is missing.");return e}function zx(e){const t=g0({root:e.root});return t&&Cu.createPortal(e.children,t)}function H0(e){const{children:t,keepMounted:n=!1,container:l}=e,{mounted:s}=Nu();return s||n?u.jsx(L0.Provider,{value:n,children:u.jsx(zx,{root:l,children:t})}):null}const x0=C.createContext(void 0);function jx(){const e=C.useContext(x0);if(e===void 0)throw new Error("Base UI: TooltipPositionerContext is missing. TooltipPositioner parts must be placed within <Tooltip.Positioner>.");return e}const Yx=C.createContext(void 0);function Kx(e=!0){const t=C.useContext(Yx);if(t===void 0&&!e)throw new Error("Base UI: DirectionContext is missing.");return(t==null?void 0:t.direction)??"ltr"}function EI(e,t,n){const l=e==="inline-start"||e==="inline-end";return{top:"top",right:l?n?"inline-start":"inline-end":"right",bottom:"bottom",left:l?n?"inline-end":"inline-start":"left"}[t]}function Vx(e){var Be,be;const{anchor:t,positionMethod:n="absolute",side:l="bottom",sideOffset:s=0,align:c="center",alignOffset:d=0,collisionBoundary:f,collisionPadding:E=5,sticky:A=!1,arrowPadding:R=5,keepMounted:T=!1,floatingRootContext:S,mounted:g,trackAnchor:I=!0,nodeId:b}=e,M=Kx()==="rtl",v={top:"top",right:"right",bottom:"bottom",left:"left","inline-end":M?"left":"right","inline-start":M?"right":"left"}[l],U=c==="center"?v:`${v}-${c}`,H={boundary:f==="clipping-ancestors"?"clippingAncestors":f,padding:E},K=C.useRef(null),F=Gm(s),x=Gm(d),se=[yH(({rects:Ne,placement:Ie})=>{const xe={side:EI(l,ri(Ie),M),align:ro(Ie)||"center",anchor:{width:Ne.reference.width,height:Ne.reference.height},positioner:{width:Ne.floating.width,height:Ne.floating.height}},nt=typeof F.current=="function"?F.current(xe):F.current,yt=typeof x.current=="function"?x.current(xe):x.current;return{mainAxis:nt,crossAxis:yt,alignmentAxis:yt}},[typeof s!="function"?s:0,typeof d!="function"?d:0,M,l])],oe=LH(H),de=vH({...H,crossAxis:A,limiter:A?void 0:MH(()=>{if(!K.current)return{};const{height:Ne}=K.current.getBoundingClientRect();return{offset:Ne/2+(typeof E=="number"?E:0)}})});c!=="center"?se.push(oe,de):se.push(de,oe),se.push(HH({...H,apply({elements:{floating:Ne},rects:{reference:Ie},availableWidth:xe,availableHeight:nt}){Object.entries({"--available-width":`${xe}px`,"--available-height":`${nt}px`,"--anchor-width":`${Ie.width}px`,"--anchor-height":`${Ie.height}px`}).forEach(([yt,it])=>{Ne.style.setProperty(yt,it)})}}),UH(()=>({element:K.current||document.createElement("div"),padding:R}),[R]),xH(),{name:"transformOrigin",fn({elements:Ne,middlewareData:Ie,placement:xe}){var vu,Mu;const nt=ri(xe),yt=K.current,it=((vu=Ie.arrow)==null?void 0:vu.x)??0,st=((Mu=Ie.arrow)==null?void 0:Mu.y)??0,Tt=(yt==null?void 0:yt.clientWidth)??0,St=(yt==null?void 0:yt.clientHeight)??0,Qt=it+Tt/2,Ro=st+St/2,As={top:`${Qt}px calc(100% + ${s}px)`,bottom:`${Qt}px ${-s}px`,left:`calc(100% + ${s}px) ${Ro}px`,right:`${-s}px ${Ro}px`}[nt];return Ne.floating.style.setProperty("--transform-origin",As),{}}});let Ae=S;!g&&S&&(Ae={...S,elements:{reference:null,floating:null,domReference:null}});const ee=C.useMemo(()=>({elementResize:I&&typeof ResizeObserver<"u",layoutShift:I&&typeof IntersectionObserver<"u"}),[I]),{refs:J,elements:w,floatingStyles:L,middlewareData:W,update:le,placement:D,context:X,isPositioned:Z}=ux({rootContext:Ae,placement:U,middleware:se,strategy:n,whileElementsMounted:T?void 0:(...Ne)=>Wp(...Ne,ee),nodeId:b}),Y=C.useRef(null);Pi(()=>{if(!g)return;const Ne=typeof t=="function"?t():t;if(Ne){const Ie=AI(Ne)?Ne.current:Ne;J.setPositionReference(Ie),Y.current=Ie}},[g,J,t]),C.useEffect(()=>{g&&typeof t!="function"&&AI(t)&&t.current!==Y.current&&(J.setPositionReference(t.current),Y.current=t.current)},[g,J,t]),C.useEffect(()=>{if(T&&g&&w.domReference&&w.floating)return Wp(w.domReference,w.floating,le,ee)},[T,g,w,le,ee]);const ce=ri(D),me=EI(l,ce,M),he=ro(D)||"center",Se=!!((Be=W.hide)!=null&&Be.referenceHidden),Te=C.useMemo(()=>{var Ne,Ie;return{position:"absolute",top:(Ne=W.arrow)==null?void 0:Ne.y,left:(Ie=W.arrow)==null?void 0:Ie.x}},[W.arrow]),Oe=((be=W.arrow)==null?void 0:be.centerOffset)!==0;return C.useMemo(()=>({positionerStyles:L,arrowStyles:Te,arrowRef:K,arrowUncentered:Oe,side:me,align:he,anchorHidden:Se,refs:J,context:X,isPositioned:Z}),[L,Te,K,Oe,me,he,Se,J,X,Z])}function AI(e){return e!=null&&"current"in e}function Wx(e){const{open:t,trackCursorAxis:n,mounted:l}=Nu(),s=Vx(e),c=C.useMemo(()=>{const d={};return(!t||n==="both")&&(d.pointerEvents="none"),{role:"presentation",hidden:!l,style:{...s.positionerStyles,...d}}},[t,n,l,s.positionerStyles]);return C.useMemo(()=>({props:c,...s}),[c,s])}const U0=C.forwardRef(function(t,n){const{render:l,className:s,anchor:c,positionMethod:d="absolute",side:f="top",align:E="center",sideOffset:A=0,alignOffset:R=0,collisionBoundary:T="clipping-ancestors",collisionPadding:S=5,arrowPadding:g=5,sticky:I=!1,trackAnchor:b=!0,...y}=t,{open:M,setPositionerElement:v,mounted:U,floatingRootContext:H}=Nu(),K=Fx(),F=Wx({anchor:c,positionMethod:d,floatingRootContext:H,trackAnchor:b,mounted:U,side:f,sideOffset:A,align:E,alignOffset:R,collisionBoundary:T,collisionPadding:S,sticky:I,arrowPadding:g,keepMounted:K}),x=C.useMemo(()=>({open:M,side:F.side,align:F.align,anchorHidden:F.anchorHidden}),[M,F.side,F.align,F.anchorHidden]),re=C.useMemo(()=>({...x,arrowRef:F.arrowRef,arrowStyles:F.arrowStyles,arrowUncentered:F.arrowUncentered}),[x,F.arrowRef,F.arrowStyles,F.arrowUncentered]),ie=fh("div",t,{state:x,props:[F.props,y],ref:[n,v],customStyleHookMapping:dh});return u.jsx(x0.Provider,{value:re,children:ie()})}),qx={...dh,...FR},k0=C.forwardRef(function(t,n){const{className:l,render:s,...c}=t,{open:d,instantType:f,transitionStatus:E,getPopupProps:A,popupRef:R,onOpenChangeComplete:T}=Nu(),{side:S,align:g}=jx();uh({open:d,ref:R,onComplete(){d&&(T==null||T(!0))}});const I=C.useMemo(()=>({open:d,side:S,align:g,instant:f,transitionStatus:E}),[d,S,g,f,E]);return fh("div",t,{state:I,ref:[n,R],props:[A,{style:E==="starting"?{transition:"none"}:{}},c],customStyleHookMapping:qx})()});let Bm=e=>{},Fm=e=>{};const ja="/presets/markers/";let Xx=function(e,t){gC(e,n=>{try{let l=JSON.parse(n);t(l)}catch{console.log("parse error")}})};function Ya(e){let t={marginRight:4};const n=iu(e.offsetStr);return u.jsx("button",{style:t,onClick:()=>{Xx(e.url,l=>{O.timeline.loadCombinedTracksPreset(l,isNaN(n)?0:n),O.updateStats(),O.timeline.drawElements()})},children:e.displayName})}class P0 extends mt.Component{constructor(n){super(n);j(this,"state");j(this,"onColorChange");j(this,"onShowTextChange");j(this,"onEnterBuffEdit");j(this,"setOffset");j(this,"setTime");j(this,"setDuration");j(this,"setTrack");j(this,"setDescription");j(this,"setBuff");j(this,"setLoadTrackDest");Bm=l=>{l.markerType===on.Info?this.setState({nextMarkerType:l.markerType,nextMarkerColor:l.color,nextMarkerTime:l.time.toString(),nextMarkerDuration:l.duration.toString(),nextMarkerTrack:l.track.toString(),nextMarkerDescription:l.description,nextMarkerShowText:l.showText}):l.markerType===on.Untargetable?this.setState({nextMarkerType:l.markerType,nextMarkerTime:l.time.toString(),nextMarkerDuration:l.duration.toString()}):this.setState({nextMarkerType:l.markerType,nextMarkerTrack:l.track.toString(),nextMarkerTime:l.time.toString(),nextMarkerDuration:l.duration.toString(),nextMarkerBuff:l.description})},this.onColorChange=l=>{l.target&&this.setState({nextMarkerColor:l.target.value})},this.onShowTextChange=l=>{l.target&&this.setState({nextMarkerShowText:l.target.checked})},this.onEnterBuffEdit=l=>{const s=new pf(l);this.setState({nextMarkerDuration:s.info.duration})},this.state={nextMarkerType:on.Info,nextMarkerColor:ct.Blue,nextMarkerTime:"0",nextMarkerDuration:"1",nextMarkerTrack:"0",nextMarkerDescription:"",nextMarkerShowText:!1,nextMarkerBuff:P.TechnicalFinish,loadTrackDest:"0",offsetStr:"",trackBins:new Map},this.setTime=l=>{this.setState({nextMarkerTime:l})},this.setDuration=l=>{this.setState({nextMarkerDuration:l})},this.setTrack=l=>{this.setState({nextMarkerTrack:l})},this.setDescription=l=>{this.setState({nextMarkerDescription:l})},this.setBuff=l=>{this.setState({nextMarkerBuff:l})},this.setLoadTrackDest=l=>{this.setState({loadTrackDest:l})},this.setOffset=l=>this.setState({offsetStr:l}),Fm=l=>{this.setState({trackBins:l})}}componentWillUnmount(){Fm=n=>{},Bm=n=>{}}render(){let n={display:"inline-block",marginRight:"1em",marginBottom:6},l=function(F,x){return u.jsx("option",{value:F,children:x},F)};const s="When specified, all imported and preset tracks will start from the specified timestamp. Use this to combine markers for multi-phase fights with varying kill times.",c="不为空时，下方所有导入的时间轴文件和预设都将从这个时间点开始。可以用此功能自行组合不同P的时间轴文件。",d=iu(this.state.offsetStr),f=u.jsx(Gt,{defaultValue:this.state.offsetStr,description:u.jsxs(u.Fragment,{children:[u.jsx("span",{style:{color:isNaN(d)||d===0?"":ct.Purple},children:p({en:"Load tracks starting at timestamp ",zh:"载入文件到此时间点 "})}),u.jsx(at,{topic:"trackLoadOffset",content:p({en:s,zh:c})}),":"]}),width:4,style:{...n,marginTop:16},onChange:this.setOffset});let E=[];this.state.trackBins.forEach((F,x)=>{E.push(x)}),E.sort();let A=[];A.push(u.jsx(no,{fileFormat:ml.Json,getContentFn:()=>O.timeline.serializedCombinedMarkerTracks(),filename:"tracks_all",displayName:p({en:"all tracks combined",zh:"所有轨道"})},"combined")),E.forEach(F=>{let x=F>=0?F.toString():"untargetable",re=p({en:"track ",zh:"轨"})+F.toString();F===Qo&&(re=p({en:"track untargetable",zh:"不可选中标记轨"})),A.push(u.jsx(no,{fileFormat:ml.Json,getContentFn:()=>{let ie=O.timeline.serializedSeparateMarkerTracks();for(let se=0;se<ie.length;se++)if(ie[se].track===F)return ie[se];return console.assert(!1),[]},filename:"track_"+x,displayName:re},F))});let R={marginRight:4},T=u.jsxs("div",{children:[u.jsx(Gt,{defaultValue:this.state.nextMarkerDescription,description:p({en:"Description: ",zh:"描述："}),width:40,onChange:this.setDescription}),u.jsx(Gt,{defaultValue:this.state.nextMarkerTrack,description:p({en:"Track: ",zh:"轨道序号："}),width:4,style:n,onChange:this.setTrack}),u.jsxs("div",{style:{display:"inline-block",marginTop:"4px"},children:[u.jsx("span",{children:p({en:"Color: ",zh:"颜色："})}),u.jsx("select",{style:{display:"inline-block",outline:"none"},value:this.state.nextMarkerColor,onChange:this.onColorChange,children:[l(ct.Red,p({en:"red",zh:"红"})),l(ct.Orange,p({en:"orange",zh:"橙"})),l(ct.Yellow,p({en:"yellow",zh:"黄"})),l(ct.Green,p({en:"green",zh:"绿"})),l(ct.Cyan,p({en:"cyan",zh:"青"})),l(ct.Blue,p({en:"blue",zh:"蓝"})),l(ct.Purple,p({en:"purple",zh:"紫"})),l(ct.Pink,p({en:"pink",zh:"粉"}))]}),u.jsx("div",{style:{background:this.state.nextMarkerColor,marginLeft:"4px",display:"inline-block",verticalAlign:"middle",height:"1em",width:"4em"}})]}),u.jsxs("div",{style:{display:"inline-block",marginTop:"4px",marginLeft:"10px"},children:[u.jsx("input",{type:"checkbox",style:{position:"relative",top:3},checked:this.state.nextMarkerShowText,onChange:this.onShowTextChange}),u.jsx("span",{style:{marginLeft:4},children:p({en:"show text",zh:"显示文字描述"})})]})]}),S=[];vR.forEach(F=>{const x=O.getActiveJob();!(x==="PCT"&&F.name===P.StarryMuse)&&!(x==="RDM"&&F.name===P.Embolden)&&!(x==="DNC"&&(F.name===P.TechnicalFinish||F.name===P.Devilment))&&S.push(u.jsx("option",{value:F.name,children:UN(F.name)},F.name))});let g=u.jsxs("div",{children:[u.jsx("span",{children:p({en:"Buff: ",zh:"团辅："})}),u.jsx("select",{value:this.state.nextMarkerBuff,onChange:F=>{if(F.target){const x=F.target.value;this.setBuff(x),this.onEnterBuffEdit(x)}},children:S}),u.jsx("div",{style:{marginTop:5},children:u.jsx(Gt,{defaultValue:this.state.nextMarkerTrack,description:p({en:"Track: ",zh:"轨道序号："}),width:4,style:n,onChange:this.setTrack})})]}),I=u.jsxs(u.Fragment,{children:[u.jsx("button",{style:R,onClick:()=>{O.timeline.deleteAllMarkers(),O.updateStats()},children:p({en:"clear all markers",zh:"清空当前"})}),u.jsx("button",{style:R,onClick:()=>{let F=O.timeline.sortAndRemoveDuplicateMarkers();F>0?alert("removed "+F+" duplicate markers"):alert("no duplicate markers found"),O.timeline.updateTimelineMarkers()},children:p({en:"remove duplicates",zh:"删除重复标记"})}),u.jsx("span",{children:p({en:", click to delete single markers",zh:"，可点击删除单个标记"})})]}),b=Jf(this.context,"text"),y=u.jsx("input",{style:{color:b,backgroundColor:"transparent",outline:"none",border:"none",borderBottom:"1px solid "+b},size:2,type:"text",value:this.state.loadTrackDest,onChange:F=>{this.setState({loadTrackDest:F.target.value})}}),M=p({en:u.jsxs("span",{children:["Load into individual track ",y,": "]}),zh:u.jsxs("span",{children:["载入第",y,"轨："]})});const v=iu(this.state.offsetStr);let U=u.jsxs(u.Fragment,{children:[u.jsx(Pf,{allowLoadFromUrl:!1,defaultLoadUrl:"",label:p({en:"Load multiple tracks combined: ",zh:"载入多轨文件："}),onLoadFn:F=>{O.timeline.loadCombinedTracksPreset(F,isNaN(v)?0:v),O.updateStats(),O.timeline.drawElements()}}),u.jsx("div",{className:"paragraph",children:u.jsx(Pf,{allowLoadFromUrl:!1,label:M,onLoadFn:F=>{let x=parseInt(this.state.loadTrackDest);if(isNaN(x)){window.alert("invalid track destination");return}O.timeline.loadIndividualTrackPreset(F,x,isNaN(v)?0:v),O.updateStats(),O.timeline.drawElements()}})})]}),H=u.jsxs("form",{children:[u.jsx("span",{children:p({en:"Type: ",zh:"类型："})}),u.jsxs("select",{value:this.state.nextMarkerType,onChange:F=>{if(F.target){const x=F.target.value;this.setState({nextMarkerType:x}),x===on.Buff&&this.onEnterBuffEdit(this.state.nextMarkerBuff)}},children:[u.jsx("option",{value:on.Info,children:p({en:"Info",zh:"备注信息"})}),u.jsx("option",{value:on.Untargetable,children:p({en:"Untargetable",zh:"不可选中"})}),u.jsx("option",{value:on.Buff,children:p({en:"Buff",zh:"团辅"})})]}),u.jsx("span",{children:" "}),u.jsx(Gt,{defaultValue:this.state.nextMarkerTime,description:p({en:"Time: ",zh:"时间："}),width:8,style:n,onChange:this.setTime}),u.jsx(Gt,{defaultValue:this.state.nextMarkerDuration,description:p({en:"Duration: ",zh:"持续时长："}),width:8,style:n,onChange:this.setDuration}),this.state.nextMarkerType===on.Info?T:void 0,this.state.nextMarkerType===on.Buff?g:void 0,u.jsx("button",{type:"submit",style:{display:"block",marginTop:"0.5em"},onClick:F=>{let x={type:ut.Marker,markerType:this.state.nextMarkerType,time:iu(this.state.nextMarkerTime),duration:parseFloat(this.state.nextMarkerDuration),color:this.state.nextMarkerColor,track:parseInt(this.state.nextMarkerTrack),description:this.state.nextMarkerDescription,showText:this.state.nextMarkerShowText},re;if(this.state.nextMarkerType===on.Untargetable&&(x.color=ct.Grey,x.track=Qo,x.description="",x.showText=!0),this.state.nextMarkerType===on.Buff){const ie=new pf(this.state.nextMarkerBuff),se=parseFloat(this.state.nextMarkerDuration);!isNaN(se)&&se>ie.info.duration&&(re=p({en:`this buff can't last longer than ${ie.info.duration}s`,zh:`此团辅持续时间不能超过${ie.info.duration}秒`})),x.color=ie.info.color,x.description=ie.name,x.duration=se,x.showText=!0}if((isNaN(x.duration)||isNaN(x.time)||isNaN(x.track))&&(re=p({en:"some input(s) are invalid",zh:"部分输入格式不对"})),re){window.alert(re),F.preventDefault();return}O.timeline.addMarker(x),O.updateStats(),F.preventDefault()},children:p({en:"add marker",zh:"添加标记"})})]}),K=u.jsxs("div",{style:{},children:[u.jsxs("p",{children:[u.jsx("span",{children:p({en:"Current tier (en) by shanzhe: ",zh:"当前版本（英文，来自shanzhe）："})}),u.jsx(Ya,{displayName:"M5S",url:ja+"m5s.txt",offsetStr:this.state.offsetStr}),u.jsx(Ya,{displayName:"M6S",url:ja+"m6s.txt",offsetStr:this.state.offsetStr}),u.jsx(Ya,{displayName:"M7S",url:ja+"m7s.txt",offsetStr:this.state.offsetStr}),u.jsx(Ya,{displayName:"M8S full",url:ja+"m8s_full.txt",offsetStr:this.state.offsetStr}),u.jsx(Ya,{displayName:"M8S P1 to adds",url:ja+"m8s_p1_through_adds.txt",offsetStr:this.state.offsetStr}),u.jsx(Ya,{displayName:"M8S P1 post-adds",url:ja+"m8s_p1_post_adds.txt",offsetStr:this.state.offsetStr}),u.jsx(Ya,{displayName:"M8S P2",url:ja+"m8s_p2.txt",offsetStr:this.state.offsetStr})]}),u.jsxs("p",{children:[u.jsx("span",{children:p({en:"EX trial: ",zh:"极神："})}),u.jsx(Ya,{displayName:p({en:"Queen Eternal (en + zh) by 小盐",zh:"永恒女王（英+中，来自小盐）"}),url:ja+"queen_eternal.txt",offsetStr:this.state.offsetStr})]}),u.jsxs("p",{children:[u.jsx("span",{children:p({en:"FRU (en) by Yara & shanzhe: ",zh:"绝伊甸（英文，来自Yara+shanzhe）："})}),u.jsx(Ya,{displayName:p({en:"P1",zh:"P1"}),url:ja+"fru_p1.txt",offsetStr:this.state.offsetStr}),u.jsx(Ya,{displayName:p({en:"P2 + intermission",zh:"P2"}),url:ja+"fru_p2.txt",offsetStr:this.state.offsetStr}),u.jsx(Ya,{displayName:p({en:"P3 + P4",zh:"P3 + P4"}),url:ja+"fru_p3_p4.txt",offsetStr:this.state.offsetStr}),u.jsx(Ya,{displayName:p({en:"P5",zh:"P5"}),url:ja+"fru_p5.txt",offsetStr:this.state.offsetStr}),u.jsx(Ya,{displayName:p({en:"full fight",zh:"完整"}),url:ja+"fru_en_full.txt",offsetStr:this.state.offsetStr})]}),u.jsxs("p",{children:[u.jsx("span",{children:p({en:"FRU (zh) by 小盐 & czmm: ",zh:"绝伊甸（中文，来自小盐+czmm）："})}),u.jsx(Ya,{displayName:p({en:"full (12/8/24 ver)",zh:"完整（12/8/24版）"}),url:ja+"fru_zh.txt",offsetStr:this.state.offsetStr})]}),u.jsxs("p",{children:[u.jsx("span",{children:p({en:"Legacy ultimates: ",zh:"过去绝本（英文）："})}),u.jsx(Ya,{displayName:"DSR P6 by Tischel",url:ja+"dsr_p6.txt",offsetStr:this.state.offsetStr}),u.jsx(Ya,{displayName:"DSR P7 by Santa",url:ja+"dsr_p7.txt",offsetStr:this.state.offsetStr}),u.jsx(Ya,{displayName:"TOP by Santa",url:ja+"TOP_2023_04_02.track",offsetStr:this.state.offsetStr})]})]});return u.jsx(u.Fragment,{children:u.jsx(VR,{contentHeight:_T,children:[{defaultSize:50,content:u.jsxs(u.Fragment,{children:[I,u.jsx("br",{}),f,u.jsx("p",{children:u.jsx("b",{children:p({en:"Presets",zh:"预设文件"})})}),K,u.jsxs("p",{style:{marginTop:16},children:[u.jsx("b",{children:p({en:"Load from file",zh:"从文件导入"})})," ",u.jsx(at,{topic:"load tracks",content:p({en:"when loading additional markers, current markers will not be deleted",zh:"载入新的标记时，时间轴上的已有标记不会被删除"})})]}),U,u.jsx("p",{style:{marginTop:16},children:u.jsx("b",{children:p({en:"Save marker tracks to file",zh:"保存标记到文件"})})}),A]})},{defaultSize:50,content:u.jsxs(u.Fragment,{children:[u.jsx("p",{children:u.jsx("b",{children:p({en:"Create marker",zh:"添加标记"})})}),H]})}]})})}}j(P0,"contextType",jn);const sm=new Map,G0="assets/Skills/General/Missing.png",mI=e=>{if(sm.has(e))return sm.get(e);const t=`assets/Skills/${KN(e)}`;if(t){let n=new Image;return n.src=t,n.onerror=l=>{n.src=G0,console.error("failed to load skill image: "+t),n.onerror=null},n.onload=()=>wi(),sm.set(e,n),n}};function w0(e){const t=`assets/Skills/${KN(e.skillName)}`,[n,l]=C.useState(!1);return u.jsx("img",{style:e.style,src:n?G0:t,onError:s=>l(!0),alt:e.skillName})}function Zx(e={diameter:50,progress:.7,color:"rgba(0, 0, 0, 0.6)"}){const t=e.diameter/2,n=Math.PI*t,l=n*(1-e.progress),s=n-l,c=l+","+s,d=u.jsx("circle",{r:t/2,cx:20,cy:21,fill:"none",stroke:e.color,strokeWidth:t,strokeDasharray:c,strokeDashoffset:n/4+l}),f=t;let E=u.jsx("circle",{r:t+f/2,cx:20,cy:21,fill:"none",stroke:e.color,strokeWidth:f});return u.jsxs("svg",{width:48,height:48,style:{position:"absolute",left:"50%",marginLeft:-20,pointerEvents:"none"},children:[d,E]})}function Qx(e={diameter:50,progress:.7,color:"rgba(0, 0, 0, 0.5)"}){const t=e.diameter/2,n=2*Math.PI*t,l=n*e.progress,s=n-l,c=l+","+s,d=u.jsx("circle",{r:t,cx:20,cy:21,fill:"none",stroke:e.color,strokeWidth:2,strokeDashoffset:n/4,strokeDasharray:c});return u.jsx("svg",{width:48,height:48,style:{position:"absolute",left:"50%",marginLeft:-20,pointerEvents:"none"},children:d})}function $x(e={diameter:50,progress:.7,color:"rgba(0, 0, 0, 0.5)"}){const t=e.diameter/2,n=Math.PI*t*2,l=n*e.progress,s=n-l,c=l+","+s,d=2*Math.PI*e.progress,f="#ffffffef",E=u.jsx("circle",{r:t,cx:20,cy:21,fill:"none",stroke:f,strokeWidth:1,strokeDasharray:c,strokeDashoffset:n/4}),A=u.jsx("line",{x1:20,y1:21,x2:20,y2:21-t,stroke:f,strokeWidth:1}),R=u.jsx("line",{x1:20,y1:21,x2:20+t*Math.cos(d-Math.PI/2),y2:21+t*Math.sin(d-Math.PI/2),stroke:f,strokeWidth:1});return u.jsxs("svg",{width:48,height:48,style:{position:"absolute",left:"50%",marginLeft:-20,pointerEvents:"none"},children:[E,A,R]})}class B0 extends mt.Component{constructor(n){super(n);j(this,"props");j(this,"state");j(this,"handleMouseEnter");this.props=n,this.state={skillDescription:u.jsx("div",{})},this.handleMouseEnter=()=>{let l=O.getSkillInfo({game:O.getDisplayedGame(),skillName:this.props.skillName}),s=ki(this.context),c=[];if(l.status.ready()){let A="ready ("+l.stacksAvailable,R="可释放 ("+l.stacksAvailable;l.timeTillNextStackReady>0&&(A+=") (next stack ready in "+l.timeTillNextStackReady.toFixed(3),R+=") (下一层"+l.timeTillNextStackReady.toFixed(3)+"秒后转好"),A+=")",R+=")",c.push(p({en:A,zh:R}))}else{if(l.status.unavailableReasons.includes(Et.RequirementsNotMet)&&c.push(dr(Et.RequirementsNotMet)),l.status.unavailableReasons.includes(Et.NotEnoughMP)&&c.push(dr(Et.NotEnoughMP)+p({en:" (needs "+l.capturedManaCost+")",zh:" （需"+l.capturedManaCost+"）"})),l.status.unavailableReasons.includes(Et.Blocked)){const A=Math.max(l.timeTillNextStackReady,l.timeTillSecondaryReady??0),R=p({en:"possibly ready in "+l.timeTillAvailable.toFixed(3),zh:"预计"+l.timeTillAvailable.toFixed(3)+"秒后可释放"}),T=p({en:" (next stack ready in "+A.toFixed(3)+")",zh:"（"+A.toFixed(3)+"秒后转好下一层CD）"});c.push(u.jsxs(u.Fragment,{children:[R,l.stacksAvailable<l.maxStacks?T:void 0]}))}l.status.unavailableReasons.includes(Et.NotInCombat)&&c.push(dr(Et.NotInCombat))}let d=l.instantCast?0:l.castTime,f="";l.status.ready()&&(f+=p({en:"cast: ",zh:"读条："})+d.toFixed(3),l.llCovered&&d>ma.epsilon&&(f+=" (LL)"),f+=p({en:", cast+delay: ",zh:" 读条+生效延迟："})+l.timeTillDamageApplication.toFixed(3));let E=u.jsxs("div",{style:{color:O.displayingUpToDateGameState?s.text:s.historical},children:[u.jsx("div",{className:"paragraph",children:u.jsx("b",{children:Sl(this.props.skillName)})}),u.jsx("div",{className:"paragraph",children:c.map((A,R)=>u.jsxs("span",{children:[A,u.jsx("br",{})]},R))}),u.jsx("div",{className:"paragraph",children:f})]});this.setState({skillDescription:E})}}render(){let n={width:48,height:48,verticalAlign:"top",position:"relative",display:"inline-block"},l={width:40,height:40,position:"absolute",top:2,left:"50%",marginLeft:-20},s="transparent";this.props.readyAsideFromCd||(s="rgba(0, 0, 0, 0.6)");const c=O.getSkillInfo({game:O.getDisplayedGame(),skillName:this.props.skillName}),d=c.stacksAvailable,f=c.maxStacks;let E;const A=48,R=A/3+4;let T,S;if(d>0){T="0 0 2px rgba(255, 50, 0, 1), 0 0 3px rgba(255, 100, 0, 1), 0 0 5px rgba(255, 100, 0, 1)";const U=d===f?5:3;for(let H=0;H<U;H++)T+=", 0 0 10px black";S="white"}else T="0 0 4px black, 0 0 8px black",S="rgb(223,60,60)";f>1?E=u.jsx("div",{tabIndex:-1,style:{fontFamily:"Goldman Regular",color:S,fontSize:`${R}px`,textShadow:T,width:R,textAlign:"center",bottom:2,right:1,zIndex:3,position:"absolute"},children:d}):E=u.jsx(u.Fragment,{});const g=u.jsx(Zx,{diameter:38,progress:this.props.cdProgress,color:this.props.ready?"rgba(0, 0, 0, 0)":"rgba(0, 0, 0, 0.6)"}),I=u.jsx($x,{diameter:38,progress:this.props.cdProgress,color:this.props.ready?"rgba(0, 0, 0, 0)":"rgba(255, 255, 255, 1.0)"}),b=this.props.secondaryCdProgress&&u.jsx(Qx,{diameter:32,progress:this.props.secondaryCdProgress,color:"rgba(250,186,47,255)"}),y=u.jsx("img",{hidden:!this.props.highlight,src:"/misc/proc.png",alt:"skill proc",style:{position:"absolute",width:44,height:44,top:0,left:2,zIndex:2}});let M=u.jsxs("div",{onMouseEnter:this.handleMouseEnter,children:[u.jsxs("div",{style:n,children:[" ",u.jsx(w0,{style:l,skillName:this.props.skillName}),u.jsxs("div",{style:{position:"absolute",width:40,height:41,top:1,left:"50%",marginLeft:-20,borderRadius:3,overflow:"hidden",zIndex:1,background:s},children:[this.props.cdProgress>1-ma.epsilon||!this.props.readyAsideFromCd||g,this.props.cdProgress>1-ma.epsilon||I,!this.props.secondaryCdProgress||this.props.secondaryCdProgress>1-ma.epsilon||b]}),u.jsx("div",{style:{position:"absolute",width:A,height:A,background:"url('/misc/skillIcon_overlay.png') no-repeat"}})]}),y,E]});const v=u.jsx("span",{title:si[this.props.skillName].name,className:"skillButton",children:u.jsx(os,{onClickFn:O.displayingUpToDateGameState?()=>{O.requestUseSkill({skillName:this.props.skillName,targetCount:this.props.targetCount}),O.updateAllDisplay()}:void 0,content:M,style:O.displayingUpToDateGameState?{}:{cursor:"not-allowed"}})});return u.jsxs(D0,{delay:0,hoverable:!1,children:[u.jsx(Bx,{render:v}),u.jsx(H0,{container:document.getElementById("skillsWindowAnchor"),children:u.jsx(U0,{sideOffset:3,side:"top",className:"tooltip-positioner",children:u.jsx(k0,{className:"info-tooltip tooltip",children:this.state.skillDescription})})})]})}}j(B0,"contextType",jn);let F0=e=>{};class z0 extends mt.Component{constructor(n){super(n);j(this,"state");j(this,"onWaitTimeChange");j(this,"onWaitTimeSubmit");j(this,"onWaitUntilChange");j(this,"onWaitUntilSubmit");j(this,"onWaitSinceChange");j(this,"onTargetCountChange");j(this,"onRemoveTrailingIdleTime");j(this,"onWaitTillNextMpOrLucidTick");F0=l=>{this.setState({statusList:l})},this.onWaitTimeChange=l=>{!l||!l.target||this.setState({waitTime:l.target.value})},this.onWaitTimeSubmit=l=>{let s=parseFloat(this.state.waitTime);if(!isNaN(s)){if(this.state.waitSince==="Now")O.step(s);else if(this.state.waitSince==="LastSkill"){let c=O.game.time-O.lastSkillTime,d=s-c;d<=0?window.alert("Invalid input: trying to jump to "+s+"s since the last action, but "+c+"s has already elapsed."):O.step(d)}else console.assert(!1);O.autoSave()}l.preventDefault()},this.onWaitUntilChange=l=>{!l||!l.target||this.setState({waitUntil:l.target.value})},this.onWaitUntilSubmit=l=>{const s=iu(this.state.waitUntil);isNaN(s)||(s>O.game.getDisplayTime()?(O.stepUntil(s),O.autoSave()):window.alert("Can only jump to a time in the future!")),l.preventDefault()},this.onWaitSinceChange=l=>{this.setState({waitSince:l.target.value})},this.onTargetCountChange=l=>{this.setState({targetCount:parseInt(l.target.value)})},this.onRemoveTrailingIdleTime=()=>{O.removeTrailingIdleTime()},this.onWaitTillNextMpOrLucidTick=()=>{O.waitTillNextMpOrLucidTick()},this.state={statusList:[],waitTime:"1",waitSince:"Now",waitUntil:"0:00",targetCount:1}}render(){let n=[];for(let E=0;E<this.state.statusList.length;E++){let A=this.state.statusList[E].skillName,R=this.state.statusList[E];const T=R?!R.status.unavailableReasons.some(g=>g!==Et.Blocked):!1;let S=u.jsx(B0,{highlight:R?R.highlight:!1,skillName:A,ready:R?R.status.ready():!1,readyAsideFromCd:T,cdProgress:R?1-R.timeTillNextStackReady/R.cdRecastTime:1,secondaryCdProgress:R&&R.secondaryCdRecastTime&&R.timeTillSecondaryReady?1-R.timeTillSecondaryReady/R.secondaryCdRecastTime:1,targetCount:this.state.targetCount},E);n.push(S)}let l=u.jsx(at,{topic:"waitUntilInputFormat",content:u.jsxs("div",{children:[u.jsx("div",{className:"paragraph",children:p({en:"Examples:",zh:"时间格式举例："})}),u.jsxs("div",{className:"paragraph",children:["12 ",u.jsx("br",{}),"1.5 ",u.jsx("br",{}),"10:04.2 ",u.jsx("br",{}),"-0:03"]})]})}),s={display:"inline-block",flex:"auto"},c=ki(this.context),d={outline:"none",border:"none",borderBottom:"1px solid "+c.text,borderRadius:0,background:"transparent",color:c.text};const f=u.jsx(at,{topic:"targetCount",content:p({en:u.jsxs(u.Fragment,{children:[u.jsx("span",{children:"The number of targets hit by the next ability. Damage fall-off is automatically computed. If the number of targets set is more than the number of enemies the ability can hit, then the additional targets are ignored."}),u.jsx("br",{}),u.jsx("br",{}),u.jsx("span",{children:"Buff calculations for enemy debuffs like Dokumori and Chain Stratagem may be inaccurate when multiple targets are selected."})]}),zh:u.jsxs("div",{children:[u.jsx("span",{children:"下一个技能击中的目标数。会自动计算对主目标之外敌人的伤害衰减。如果在此设置的敌人数量超过技能的生效敌人数上限（例：给对单技能设置2或更多目标数），多余的目标会被忽略。"}),u.jsx("br",{}),u.jsx("br",{}),u.jsx("span",{children:"注：介毒之术、连环计等作用于目标的团辅可能会使多目标技能威力计算出现误差。"})]})})});return u.jsx("div",{className:"skillsWindow",id:"skillsWindowAnchor",children:u.jsxs("div",{className:"skillIcons",children:[u.jsx("style",{children:`
					.info-tooltip {
						color: ${c.text};
						background-color: ${c.tipBackground};
						opacity: 0.98;
						max-width: 300px;
						outline: 1px solid ${c.bgHighContrast};
						transition: none;
						font-size: 100%;
						z-index: 10;
					}
				`}),n,u.jsxs("div",{style:{margin:"10px 0"},children:[p({en:"# of targets hit",zh:"击中目标数"})," ",f,":"," ",u.jsx("input",{type:"number",min:1,max:Hy,style:{width:30,...d},value:this.state.targetCount,onChange:this.onTargetCountChange}),u.jsxs("div",{style:{display:"flex",flexDirection:"row",marginBottom:6},children:[p({en:u.jsxs("form",{onSubmit:this.onWaitTimeSubmit,style:s,children:["Wait until"," ",u.jsx("input",{type:"text",style:{width:40,...d},value:this.state.waitTime,onChange:this.onWaitTimeChange})," ","second(s) since"," ",u.jsxs("select",{style:{display:"inline-block",outline:"none"},value:this.state.waitSince,onChange:this.onWaitSinceChange,children:[u.jsx("option",{value:"Now",children:"now"}),u.jsx("option",{value:"LastSkill",children:"last action"})]})," ",u.jsx("input",{type:"submit",disabled:!O.displayingUpToDateGameState,value:"GO"})]}),zh:u.jsxs("form",{onSubmit:this.onWaitTimeSubmit,style:s,children:["快进至"," ",u.jsxs("select",{style:{display:"inline-block",outline:"none"},value:this.state.waitSince,onChange:this.onWaitSinceChange,children:[u.jsx("option",{value:"Now",children:"当前"}),u.jsx("option",{value:"LastSkill",children:"上次操作"})]})," ","后的"," ",u.jsx("input",{type:"text",style:{width:30,...d},value:this.state.waitTime,onChange:this.onWaitTimeChange})," ","秒"," ",u.jsx("input",{type:"submit",disabled:!O.displayingUpToDateGameState,value:"GO"})]}),ja:u.jsxs("form",{onSubmit:this.onWaitTimeSubmit,style:s,children:[u.jsxs("select",{style:{display:"inline-block",outline:"none",marginRight:"4px"},value:this.state.waitSince,onChange:this.onWaitSinceChange,children:[u.jsx("option",{value:"Now",children:"現在のカーソルの位置"}),u.jsx("option",{value:"LastSkill",children:"最後のアクション"})]}),"から",u.jsx("input",{type:"text",style:{width:30,...d},value:this.state.waitTime,onChange:this.onWaitTimeChange}),"秒進む",u.jsx("input",{type:"submit",disabled:!O.displayingUpToDateGameState,value:"GO"})]})}),p({en:u.jsxs("form",{onSubmit:this.onWaitUntilSubmit,style:s,children:["Wait until ",l," ",u.jsx("input",{type:"text",style:{width:60,...d},value:this.state.waitUntil,onChange:this.onWaitUntilChange}),u.jsx("input",{type:"submit",disabled:!O.displayingUpToDateGameState,value:"GO"})]}),zh:u.jsxs("form",{onSubmit:this.onWaitUntilSubmit,style:s,children:["快进至指定时间 ",l," ",u.jsx("input",{type:"text",style:{width:60,...d},value:this.state.waitUntil,onChange:this.onWaitUntilChange}),u.jsx("input",{type:"submit",disabled:!O.displayingUpToDateGameState,value:"GO"})]}),ja:u.jsxs("form",{onSubmit:this.onWaitUntilSubmit,style:s,children:["指定した時間まで進む ",l," ",u.jsx("input",{type:"text",style:{width:60,...d},value:this.state.waitUntil,onChange:this.onWaitUntilChange}),u.jsx("input",{type:"submit",disabled:!O.displayingUpToDateGameState,value:"GO"})]})})]}),u.jsx("button",{onClick:this.onWaitTillNextMpOrLucidTick,children:p({en:"Wait until MP tick / lucid tick",zh:"快进至跳蓝/跳醒梦"})}),u.jsx("span",{children:" "}),u.jsx("button",{onClick:this.onRemoveTrailingIdleTime,children:p({en:"Remove trailing idle time",zh:"去除时间轴末尾的发呆时间"})})]})]})})}}j(z0,"contextType",jn);var Qe=(e=>(e.Skill="Skill",e.Wait="Wait",e.JumpToTimestamp="JumpToTimestamp",e.WaitForMP="WaitForMP",e.SetResourceEnabled="SetResourceEnabled",e.Invalid="Invalid",e))(Qe||{});function Jx(e,t){return new pi({type:"Skill",skillName:e,targetCount:t??1,healTargetCount:void 0})}function RI(e){return new pi({type:"Wait",waitDuration:e})}function TI(e){return new pi({type:"JumpToTimestamp",targetTime:e})}function eU(){return new pi({type:"WaitForMP"})}function tU(e){return new pi({type:"SetResourceEnabled",buffName:e})}var Sr,pn,Ti,rl,Hi,gr,_r,pr,Ir;const CT=class CT{constructor(t,n){Pe(this,Sr);Pe(this,pn);Pe(this,Ti);Pe(this,rl);Pe(this,Hi);j(this,"applicationTime");Pe(this,gr);Pe(this,_r);Pe(this,pr);Pe(this,Ir);j(this,"info");j(this,"legacyWaitDuration");j(this,"tmp_startLockTime");j(this,"tmp_endLockTime");j(this,"tmp_invalid_reasons");this.info=t,Me(this,Sr,new Set),Me(this,Ti,new Map),Me(this,Hi,new Map),Me(this,gr,new Map),Me(this,_r,new Map),Me(this,pr,new Map),Me(this,Ir,new Map),this.legacyWaitDuration=n,this.tmp_invalid_reasons=[]}serialized(){return this.info.type==="Skill"?{type:"Skill",skillName:si[this.info.skillName].name,targetCount:this.info.targetCount,healTargetCount:this.info.healTargetCount}:this.info.type==="SetResourceEnabled"?{type:"SetResourceEnabled",buffName:this.info.buffName.toString()}:this.info}maybeGetActionKey(){return this.info.type==="Skill"?this.info.skillName:void 0}get targetCount(){return this.info.type==="Skill"?this.info.targetCount:0}get healTargetCount(){return this.info.type==="Skill"?this.info.healTargetCount??0:0}getNameForMessage(){return this.info.type==="Skill"?si[this.info.skillName].name:this.info.type.toString()}getClone(){return new CT(this.info,this.legacyWaitDuration)}addBuff(t){te(this,Sr).add(t)}hasBuff(t){return te(this,Sr).has(t)}hasPartyBuff(){var n;const t=(n=te(this,pn))==null?void 0:n.snapshotTime;return t!==void 0&&O.game.getPartyBuffs(t).size>0}getPartyBuffs(){var n;const t=(n=te(this,pn))==null?void 0:n.snapshotTime;return t?[...O.game.getPartyBuffs(t).keys()]:[]}setTargetCount(t){this.info.type==="Skill"&&(this.info.targetCount=t)}setHealTargetCount(t){this.info.type==="Skill"&&(this.info.healTargetCount=t)}resolveAll(t){te(this,pn)&&te(this,pn).resolve(t),te(this,Ti).forEach(n=>{n.forEach(l=>{l.resolve(t)})})}resolved(){return this.applicationTime!==void 0}hitBoss(t){var n;return((n=te(this,pn))==null?void 0:n.hasHitBoss(t))??!0}getPotency(t){let n={applied:0,snapshottedButPending:0};return te(this,pn)&&this.recordPotency(t,te(this,pn),n),t.excludeDoT||te(this,Ti).forEach(l=>{l.forEach(s=>{this.recordPotency(t,s,n)})}),n}getHealingPotency(t){let n={applied:0,snapshottedButPending:0};return te(this,rl)&&this.recordPotency(t,te(this,rl),n),t.excludeHoT||te(this,Hi).forEach(l=>{l.forEach(s=>{this.recordPotency(t,s,n)})}),n}recordPotency(t,n,l){n.hasHitBoss(t.untargetable)?l.applied+=n.getAmount(t):!n.hasResolved()&&n.hasSnapshotted()&&(l.snapshottedButPending+=n.getAmount(t))}removeUnresolvedOvertimePotencies(t){(t==="damage"?te(this,Ti):te(this,Hi)).forEach(l=>{const s=l.findIndex(c=>!c.hasResolved());s<0||l.splice(s)})}anyPotencies(){return te(this,pn)!==void 0||te(this,Ti).size>0}anyHealingPotencies(){return te(this,rl)!==void 0||te(this,Hi).size>0}getInitialPotency(){return te(this,pn)}getInitialHealingPotency(){return te(this,rl)}getAllDotPotencies(){return this.getAllOverTimePotencies("damage")}getAllHotPotencies(){return this.getAllOverTimePotencies("healing")}getAllOverTimePotencies(t){return t==="damage"?te(this,Ti):te(this,Hi)}getDotPotencies(t){return this.getOverTimePotencies(t,"damage")}getHotPotencies(t){return this.getOverTimePotencies(t,"healing")}getOverTimePotencies(t,n){return n==="damage"?te(this,Ti).get(t)??[]:te(this,Hi).get(t)??[]}addPotency(t){console.assert(!te(this,pn),`ActionNode for ${this.getNameForMessage()} already had an initial potency`),Me(this,pn,t)}addHealingPotency(t){console.assert(!te(this,rl),`ActionNode for ${this.getNameForMessage()} already had an initial healing potency`),Me(this,rl,t)}addDoTPotency(t,n){this.addOverTimePotency(t,n,"damage")}addHoTPotency(t,n){this.addOverTimePotency(t,n,"healing")}addOverTimePotency(t,n,l){const s=l==="damage"?te(this,Ti):te(this,Hi),c=s.get(n)??[];c.length===0&&s.set(n,c),c.push(t)}setOverTimeGap(t,n,l){this.setOverTimeMappedAmount(t,n,l==="damage"?te(this,_r):te(this,Ir))}getOverTimeGap(t,n){return this.getOverTimeMappedAmount(t,n==="damage"?te(this,_r):te(this,Ir))}setOverTimeOverrideAmount(t,n,l){this.setOverTimeMappedAmount(t,n,l==="damage"?te(this,gr):te(this,pr))}getOverTimeOverrideAmount(t,n){return this.getOverTimeMappedAmount(t,n==="damage"?te(this,gr):te(this,pr))}setOverTimeMappedAmount(t,n,l){l.set(t,n)}getOverTimeMappedAmount(t,n){return n.get(t)??0}};Sr=new WeakMap,pn=new WeakMap,Ti=new WeakMap,rl=new WeakMap,Hi=new WeakMap,gr=new WeakMap,_r=new WeakMap,pr=new WeakMap,Ir=new WeakMap;let pi=CT;class Lr{constructor(){j(this,"actions");j(this,"name","(anonymous line)");this.actions=[]}get length(){return this.actions.length}get head(){return this.length>0?this.actions[0]:void 0}get tail(){return this.length>0?this.actions[this.actions.length-1]:void 0}get tailIndex(){return this.length-1}addActionNode(t){console.assert(t),this.actions.push(t)}iterateAll(t){this.actions.forEach(n=>t(n))}serialized(){return{name:this.name,actions:this.actions.map(t=>t.serialized())}}exportCsv(){return[]}static deserialize(t){const n=t.map(s=>{if(s.type==="Skill"){const c=YN(s.skillName),d="waitDuration"in s?s.waitDuration:void 0;return new pi({type:"Skill",skillName:c,targetCount:s.targetCount,healTargetCount:s.healTargetCount},d)}else if(s.type==="SetResourceEnabled"){const c="waitDuration"in s?s.waitDuration:void 0;return new pi({type:"SetResourceEnabled",buffName:a1(s.buffName)},c)}else return["Wait","JumpToTimestamp","WaitForMP"].includes(s.type)?new pi(s):(window.alert("unparseable action: "+JSON.stringify(s)),new pi({type:"Invalid"}))}),l=new Lr;return l.actions=n,l}}var Su,zm;const bT=class bT extends Lr{constructor(){super(...arguments);Pe(this,Su);j(this,"selectionStartIndex");j(this,"selectionEndIndex");j(this,"startIsPivot",!0);j(this,"config")}get selectionStart(){return this.selectionStartIndex!==void 0?this.actions[this.selectionStartIndex]:void 0}get selectionEnd(){return this.selectionEndIndex!==void 0?this.actions[this.selectionEndIndex]:void 0}getFirstSelection(){return this.selectionStart&&console.assert(this.selectionEnd!==void 0),this.selectionStart}getLastSelection(){return this.selectionEnd&&console.assert(this.selectionStart!==void 0),this.selectionEnd}isInSelection(n){return this.selectionStartIndex!==void 0&&this.selectionEndIndex!==void 0&&n>=this.selectionStartIndex&&n<=this.selectionEndIndex}iterateSelected(n){if(!(this.selectionStartIndex===void 0||this.selectionEndIndex===void 0))for(let l=this.selectionStartIndex;l<=this.selectionEndIndex;l++)n(this.actions[l])}getSelected(){const n=new Lr;return this.selectionStartIndex!==void 0&&this.selectionEndIndex!==void 0&&(n.actions=this.actions.slice(this.selectionStartIndex,this.selectionEndIndex+1)),n}getSelectionLength(){return this.selectionStartIndex===void 0||this.selectionEndIndex===void 0?0:this.selectionEndIndex-this.selectionStartIndex+1}selectSingle(n){this.unselectAll(),this.selectionStartIndex=n,this.selectionEndIndex=n,this.startIsPivot=!0}unselectAll(){this.selectionStartIndex=void 0,this.selectionEndIndex=void 0,this.startIsPivot=!0}selectUntil(n){if(this.selectionStartIndex!==void 0&&this.selectionStartIndex===this.selectionEndIndex)this.selectionStartIndex<=n?(_e(this,Su,zm).call(this,this.selectionStartIndex,n),this.startIsPivot=!0):(_e(this,Su,zm).call(this,n,this.selectionStartIndex),this.startIsPivot=!1);else if(this.selectionStartIndex!==void 0&&this.selectionStartIndex!==this.selectionEndIndex){const l=this.startIsPivot?this.selectionStartIndex:this.selectionEndIndex;this.selectionStartIndex=l,this.selectionEndIndex=l,this.selectUntil(n)}}onClickNode(n,l){l?this.selectUntil(n):this.selectionStartIndex===n&&this.selectionEndIndex===n?this.unselectAll():this.selectSingle(n)}moveSelected(n){if(n===0||this.selectionStartIndex===void 0||this.selectionEndIndex===void 0)return;const l=this.selectionStartIndex,s=this.getSelectionLength(),c=this.actions.splice(l,s);let d=l+n;return d=Math.max(d,0),d=Math.min(d,this.length),this.actions.splice(d,0,...c),this.selectionStartIndex=d,this.selectionEndIndex=d+s-1,d}deleteSelected(){if(this.selectionStartIndex===void 0||this.selectionEndIndex===void 0)return;const n=this.selectionStartIndex;return this.actions.splice(n,this.getSelectionLength()),this.unselectAll(),n}serialized(){var l;console.assert(this.config);let n=super.serialized();return{name:n.name,fileType:_i.Record,config:(l=this.config)==null?void 0:l.serialized(),actions:n.actions}}spliceUpTo(n){const l=this.selectionStartIndex,s=this.selectionEndIndex;this.unselectAll(),n<this.length&&this.actions.splice(n,this.length-n),l!==void 0&&(this.selectSingle(l),this.selectUntil(s))}getCloneWithSharedConfig(){let n=new bT;return n.config=this.config,n.actions=this.actions.map(l=>l.getClone()),n.selectionStartIndex=this.selectionStartIndex,n.selectionEndIndex=this.selectionEndIndex,n}};Su=new WeakSet,zm=function(n,l){this.unselectAll(),this.selectionStartIndex=n,this.selectionEndIndex=l};let ol=bT,ao=()=>{};class aU extends mt.Component{constructor(n){super(n);j(this,"props");j(this,"state");j(this,"onChange");this.props=n,this.onChange=l=>{this.setState({filename:l})},this.state={filename:"(untitled)"}}render(){return u.jsxs("form",{children:[u.jsx(Gt,{style:{display:"inline-block",marginTop:"10px"},defaultValue:this.state.filename,description:p({en:"name: ",zh:"预设名："}),width:30,onChange:this.onChange}),u.jsx("span",{children:" "}),u.jsx("button",{type:"submit",disabled:!this.props.enabled,onClick:n=>{O.addSelectionToPreset(this.state.filename),n.preventDefault()},children:p({en:"add selection to preset",zh:"将选中的技能保存为预设"})})]})}}function nU(e){let t=e.line,n=[],l=0,s={margin:"0 1px",width:"18px",verticalAlign:"middle"};for(const f of t.actions)if(f.info.type===Qe.Skill){const E=f.info.skillName;n.push(u.jsx(w0,{style:s,skillName:E},l)),l++}let c=u.jsxs("span",{children:[t.name," (",n,")"]}),d=O.displayingUpToDateGameState?{}:{cursor:"not-allowed"};return u.jsxs("div",{style:{marginBottom:"8px"},children:[u.jsx(os,{content:c,style:d,onClickFn:O.displayingUpToDateGameState?()=>{O.tryAddLine(t,Ia.SkillSequence),O.updateAllDisplay(),O.scrollToTime()}:void 0}),u.jsx("span",{children:" "}),u.jsx(os,{content:"[x]",onClickFn:()=>{O.deleteLine(t)}})]})}class j0 extends mt.Component{constructor(t){super(t),ao=this.unboundUpdatePresetsView.bind(this)}componentWillUnmount(){ao=()=>{}}unboundUpdatePresetsView(){this.forceUpdate()}render(){let t=O&&O.record&&O.record.getFirstSelection()!==void 0;const n=Jf(this.context,"bgMediumContrast");let l=u.jsxs("div",{children:[u.jsx("button",{style:{marginBottom:10},onClick:()=>{O.deleteAllLines()},children:p({en:"clear all presets",zh:"重置所有预设"})}),u.jsx(Pf,{allowLoadFromUrl:!1,defaultLoadUrl:"https://miyehn.me/ffxiv-blm-rotation/presets/lines/default.txt",onLoadFn:s=>{s.fileType===_i.SkillSequencePresets?O.appendFilePresets(s):window.alert("incorrect file type '"+s.fileType+"'")}}),u.jsxs("div",{style:{outline:"1px solid "+n,margin:"10px 0",padding:"10px"},children:[O.getPresetLines().map((s,c)=>u.jsx(nU,{line:s},c)),u.jsx(aU,{enabled:t}),u.jsx("div",{style:{marginTop:16},children:u.jsx(no,{fileFormat:ml.Json,getContentFn:()=>O.serializedPresets(),filename:"presets",displayName:p({en:"download presets to file",zh:"将当前预设下载为文件"})})})]})]});return u.jsx(Jo,{title:p({en:"Skill sequence presets",zh:"技能序列预设"}),content:l,defaultShow:!1})}}j(j0,"contextType",jn);const Hf="3f";let cu=()=>{},Jd=()=>{},Wc=e=>{e()},Y0=!1;function qc(e){Y0=e}const hr=e=>({borderColor:e.bgMediumContrast,borderWidth:"1px",borderStyle:"solid"}),K0={width:"1.5%",textAlign:"right",paddingRight:"0.3em",paddingLeft:"0.3em"},V0={width:"12%",textAlign:"right",paddingRight:"0.3em",paddingLeft:"0.3em"},W0={width:"86.5%",textAlign:"left",paddingLeft:"0.3em"},q0={height:"1.6em",userSelect:"none"};function jm(e){return(e??0)+1}function iU(e){const t=kt();let n=e.index%2===1?t.bgLowContrast:"transparent";e.isSelected&&(n="rgba(151,111,246,0.25)"),e.recordIsDirty&&e.isSelected&&(n=t.editingValid+Hf);let l=p({en:"(other)",zh:"（其它）"});if(e.node.info.type===Qe.Skill){const f=e.node.info.targetCount>1?p({en:` (${e.node.info.targetCount} targets)`,zh:`（${e.node.info.targetCount}个目标）`}):"";l=e.node.info.skillName?Sl(e.node.info.skillName)+f:p({en:"(unknown skill)",zh:"未知技能"})}else if(e.node.info.type===Qe.Wait)l=p({en:"(wait for "+e.node.info.waitDuration.toFixed(3)+"s)",zh:"（等"+e.node.info.waitDuration.toFixed(3)+"秒）"});else if(e.node.info.type===Qe.JumpToTimestamp)l=p({en:"(jump to time "+ft.displayTime(e.node.info.targetTime,3)+")",zh:"（跳到时间 "+ft.displayTime(e.node.info.targetTime,3)+"）"});else if(e.node.info.type===Qe.WaitForMP)l=p({en:"(wait until MP/lucid tick)",zh:"（快进至跳蓝/跳醒梦）"});else if(e.node.info.type===Qe.SetResourceEnabled){const f=Wa(e.node.info.buffName);l=p({en:"(toggle resource: "+f+")",zh:"（开关或去除BUFF："+f+"）"})}const s=u.jsxs("td",{style:{...W0,...hr(t)},children:[e.isInvalid?u.jsx("span",{style:{marginRight:6,padding:"0 4px",backgroundColor:t.editingInvalid+Hf},children:"→"}):void 0,u.jsx("span",{children:l})]}),c=e.includeDetails?u.jsx("td",{style:{...K0,...hr(t)},children:jm(e.index)}):void 0,d=e.includeDetails?u.jsx("td",{style:{...V0,...hr(t)},children:ft.displayTime(e.usedAt,3)}):void 0;return u.jsxs("tr",{style:{...q0,background:n},ref:e.refObj??null,onClick:f=>{qc(!0),e.recordIsDirty?O.timeline.onClickTimelineAction(e.index,f.shiftKey):(O.timeline.onClickTimelineAction(e.index,f.shiftKey),e.node.tmp_startLockTime&&O.scrollToTime(e.node.tmp_startLockTime))},children:[c,d,s]})}let X0=()=>{};function lU(){const e=kt(),t=mt.createRef(),[n,l]=C.useState(!1),[s,c]=C.useState(void 0),[d,f]=C.useState(void 0),[,E]=C.useReducer(ie=>ie+1,0),A=C.useRef(void 0);C.useEffect(()=>(cu=()=>{E()},Jd=()=>{c(O.checkRecordValidity(O.record,0,!0))},Wc=ie=>{n&&A.current&&(O.record=A.current,O.checkRecordValidity(O.record,0,!0)),ie(),l(!1),A.current=O.record,c(O.checkRecordValidity(O.record,0,!0))},X0=()=>{setTimeout(()=>{t.current&&t.current.scrollIntoView({behavior:"smooth",block:"nearest"})},0)},c(O.checkRecordValidity(O.record,0,!0)),()=>{cu=()=>{}}),[]);const R=s&&s.isValid,T=ie=>{ie&&A.current&&(O.record=A.current),l(!1),c(O.checkRecordValidity(O.record,0,!0)),f(void 0)},S=5,g=()=>u.jsx("button",{style:{display:"block",marginTop:10,marginLeft:S},onClick:ie=>{qc(!0),n||console.error("attempted to discard edits while timeline editor was not dirty"),T(!0)},children:p({en:"discard changes",zh:"放弃更改"})}),I=()=>(n||(A.current=O.record,O.record=O.record.getCloneWithSharedConfig(),l(!0)),O.record),b=(ie,se)=>{const oe=ie==null?void 0:ie.node,de=ie==null?void 0:ie.index,Ae=ie==null?void 0:ie.reason,ee=lo()==="en",J=(D,X)=>ee?D:X;let w=J("(unknown node)","（未知节点）");if(oe)if(oe.info.type===Qe.Wait)w=J("(Wait)","（等待）");else if(oe.info.type===Qe.JumpToTimestamp)w=J("(Jump to time)","（跳到时间）");else if(oe.info.type===Qe.WaitForMP)w=J("(Wait for MP/lucid tick)","（快进到挑篮/跳星梦）");else if(oe.info.type===Qe.SetResourceEnabled){const D=Wa(oe.info.buffName);w=J("(Toggle resource "+D+")","（开关或去除BUFF： "+D+"）")}else oe.info.type===Qe.Skill&&(w=oe.info.skillName?Sl(oe.info.skillName):J("(unknown skill)","（未知技能）"));let L;const W=de!==void 0?s==null?void 0:s.skillUseTimes[de]:void 0,le=(Ae==null?void 0:Ae.unavailableReasons.map(dr).join(J("; ","、")))??dr(void 0);if(se?L=J(`This sequence contains invalid actions! Check action #${jm(de)}: ${w}`,`此时间轴包含有问题的技能！请检查在第${jm(de)}位的技能： ${w}`):L=J(`This action is invalid! ${w}`,`此技能有问题！ ${w}`),W!==void 0){const D=ft.displayTime(W,3);L+=` @ ${D}`+J(".","。")}return{en:u.jsxs(u.Fragment,{children:[L,u.jsx("br",{}),u.jsx("br",{}),"Reason: ",le]}),zh:u.jsxs(u.Fragment,{children:[L,u.jsx("br",{}),u.jsx("br",{}),"理由：",le]})}},y={padding:"0.3em"},M=()=>{if(n)return u.jsxs("div",{children:[u.jsx("div",{style:{...y,backgroundColor:(R?e.editingValid:e.editingInvalid)+Hf},children:p(R?{en:"This edited sequence is valid.",zh:"此编辑可被应用。"}:b(s==null?void 0:s.invalidActions[0],!0))}),u.jsx("button",{style:{display:"block",marginTop:10,marginLeft:S},onClick:ie=>{qc(!0),n?O.applyEditedRecord():console.error("attempted to apply edits while timeline editor was not dirty"),T(!1),O.displayCurrentState()},children:p({en:"apply changes to timeline and save",zh:"应用并保存编辑。"})}),g()]});if(R)return u.jsx("div",{style:y,children:p({en:"Timeline is up to date.",zh:"时间轴已与编辑器同步。"})});{const ie=new Map;s==null||s.invalidActions.forEach(ee=>ie.set(ee.index,ee));const se=s==null?void 0:s.invalidActions[0];let oe=se,de=!0;const Ae=O.record;if(se!==void 0&&Ae.selectionStartIndex!==void 0){const ee=s==null?void 0:s.invalidActions.find(w=>Ae.isInSelection(w.index)),J=Ae.getSelectionLength();J===1&&ee!==void 0?(oe=ie.get(Ae.selectionStartIndex),de=!1):J>1&&ee!==void 0&&(oe=ee)}return u.jsx("div",{children:u.jsx("div",{style:{...y,backgroundColor:e.editingInvalid+Hf},children:p(b(oe,de))})})}};let v={display:"block",width:"100%",marginBottom:10,padding:3};const U=ie=>{if(O.record.getFirstSelection()){qc(!0);const se=I();let oe=d;const de=ie(se);de!==void 0&&(oe===void 0?oe=de:oe=Math.min(de,oe));const Ae=O.checkRecordValidity(se,oe);de!==void 0&&Ae.straightenedIfValid?(O.record=Ae.straightenedIfValid,f(void 0)):f(oe),c(Ae),wi()}},H=u.jsxs("div",{style:{marginBottom:6,flex:1},children:[u.jsx("button",{style:v,onClick:ie=>U(se=>se.moveSelected(-1)),children:p({en:"move up",zh:"上移"})}),u.jsx("button",{style:v,onClick:ie=>U(se=>se.moveSelected(1)),children:p({en:"move down",zh:"下移"})}),u.jsx("button",{style:v,onClick:ie=>U(se=>se.deleteSelected()),children:p({en:"delete selected",zh:"删除所选"})}),u.jsx("button",{style:v,onClick:ie=>U(se=>{const oe=se.getSelectionLength();if(oe>1){const de=se.selectionStartIndex,Ae=se.selectionEndIndex;return se.selectSingle(Ae),se.moveSelected(-(oe-1)),se.selectSingle(de),se.selectUntil(Ae),se.selectionStartIndex}}),children:p({en:u.jsxs(u.Fragment,{children:["move end of selection",u.jsx("br",{}),"to start of selection"]}),zh:u.jsxs(u.Fragment,{children:["将选中的最后一个技能节点",u.jsx("br",{}),"移到选区最前"]})})})]}),K=!0,F=[],x=new Set(s==null?void 0:s.invalidActions.map(ie=>ie.index));O.record.actions.forEach((ie,se)=>{const oe=!n&&se===O.record.selectionStartIndex;F.push(u.jsx(iU,{index:se,node:ie,isSelected:O.record.isInSelection(se),recordIsDirty:n,isInvalid:x.has(se),usedAt:(s==null?void 0:s.skillUseTimes[se])??0,includeDetails:K,refObj:oe?t:void 0},se))});const re={backgroundColor:e.bgHighContrast};return u.jsx("div",{onClick:ie=>{!ie.shiftKey&&!Y0&&(O.record.unselectAll(),O.displayCurrentState()),qc(!1)},children:u.jsx(VR,{contentHeight:_T,children:[{content:H,defaultSize:20},{content:u.jsxs("table",{style:{borderCollapse:"collapse",borderColor:e.bgMediumContrast,borderWidth:"1px",borderStyle:"solid"},children:[u.jsx("thead",{children:u.jsxs("tr",{style:q0,children:[u.jsx("th",{className:"stickyTh",style:{...re,...K0,...hr(e)},children:"#"}),u.jsx("th",{className:"stickyTh",style:{...re,...V0,...hr(e)},children:p({en:"Time",zh:"时间"})}),u.jsx("th",{className:"stickyTh",style:{...re,...W0,...hr(e)},children:p({en:"Actions",zh:"技能"})})]})}),u.jsx("tbody",{children:F})]}),defaultSize:40,fullBorder:!0},{content:M(),defaultSize:40,fullBorder:!0}]})})}const fl=4;var ut=(e=>(e.s_Cursor="s_Cursor",e.s_ViewOnlyCursor="s_ViewOnlyCursor",e.DamageMark="DamageMark",e.HealingMark="HealingMark",e.AggroMark="AggroMark",e.LucidMark="LucidMark",e.MPTickMark="MPTickMark",e.MeditateTickMark="MeditateTickMark",e.AutoTickMark="AutoTickMark",e.Skill="Skill",e.Marker="Marker",e.WarningMark="WarningMark",e.Buff="Buff",e))(ut||{});const Qo=-1;var on=(e=>(e.Info="Info",e.Untargetable="Untargetable",e.Buff="Buff",e))(on||{});function oU(e){return e.type==="s_Cursor"||e.type==="s_ViewOnlyCursor"}var Pt,Gn,cl,Vt,Z0,ef,tf,Ym,or,Q0,mN;let sU=(mN=class{constructor(){Pe(this,Vt);j(this,"scale");j(this,"startTime");j(this,"elapsedTime");j(this,"sharedElements");j(this,"slots");j(this,"activeSlotIndex");Pe(this,Pt);Pe(this,Gn);Pe(this,cl);this.scale=.25,this.startTime=0,this.elapsedTime=0,this.sharedElements=[],this.slots=[],this.activeSlotIndex=-1,Me(this,Pt,[]),Me(this,Gn,[]),Me(this,cl,[]),_e(this,Vt,Q0).call(this)}setTimeSegment(t,n){this.startTime=t,this.elapsedTime=n}addElement(t){oU(t)?this.sharedElements.push(t):(console.assert(this.slots.length>0),this.slots[this.activeSlotIndex].elements.push(t))}invalidateLastElement(){if(this.slots.length>0){const t=this.slots[this.activeSlotIndex].elements;for(let n=t.length-1;n>=0;n--){const l=t[n];if(l.type==="Skill"){l.node.tmp_invalid_reasons=[Et.CastCanceled];return}}}}tryGetElement(t,n){return this.slots[this.activeSlotIndex].elements.find(l=>l.time===t&&l.type===n)}getAllMarkers(){return te(this,Pt)}getUntargetableMarkers(){return te(this,Gn)}getBuffMarkers(){return te(this,cl)}addMarker(t){te(this,Pt).push(t),t.markerType==="Untargetable"?te(this,Gn).push(t):t.markerType==="Buff"&&te(this,cl).push(t),this.drawElements(),_e(this,Vt,or).call(this)}deleteMarker(t){let n=!1;for(let l=0;l<te(this,Pt).length;l++)t===te(this,Pt)[l]&&(te(this,Pt).splice(l,1),this.drawElements(),_e(this,Vt,or).call(this),n=!0);return _e(this,Vt,ef).call(this),_e(this,Vt,tf).call(this),n}sortAndRemoveDuplicateMarkers(){te(this,Pt).sort((n,l)=>n.time-l.time);let t=0;for(let n=te(this,Pt).length-1;n>0;n--)_e(this,Vt,Z0).call(this,te(this,Pt)[n],te(this,Pt)[n-1])&&(te(this,Pt).splice(n,1),t++);return _e(this,Vt,ef).call(this),_e(this,Vt,tf).call(this),_e(this,Vt,or).call(this),t}loadCombinedTracksPreset(t,n){if(t.fileType!==_i.MarkerTracksCombined){window.alert("wrong file type '"+t.fileType+"'");return}t.tracks.forEach(l=>{this.loadIndividualTrackPreset(l,l.track,n)})}loadIndividualTrackPreset(t,n,l){if(t.fileType!==_i.MarkerTrackIndividual){window.alert("wrong file type '"+t.fileType+"'");return}_e(this,Vt,Ym).call(this,t,n,l)}deleteAllMarkers(){Me(this,Pt,[]),Me(this,Gn,[]),Me(this,cl,[]),this.drawElements(),_e(this,Vt,or).call(this)}addSlot(){this.slots.push({job:"BLM",elements:[]}),console.assert(this.slots.length<=fl),this.activeSlotIndex=this.slots.length-1,O.setConfigAndRestart(O.gameConfig)}removeSlot(t){console.assert(t<this.slots.length);for(let n=t;n<fl;n++){let l=ha("gameRecord"+(n+1).toString());l!==null&&aa("gameRecord"+n.toString(),l),l=ha("gameTimeInfo"+(n+1).toString()),l!==null&&aa("gameTimeInfo"+n.toString(),l)}this.slots.splice(t,1);for(let n=this.slots.length;n<fl;n++)bm("gameRecord"+n.toString()),bm("gameTimeInfo"+n.toString());this.activeSlotIndex>=t&&(this.activeSlotIndex=Math.max(0,this.activeSlotIndex-1)),this.loadSlot(this.activeSlotIndex)}saveCurrentSlot(t,n,l){aa("gameRecord"+this.activeSlotIndex.toString(),JSON.stringify(t)),aa("gameTimeInfo"+this.activeSlotIndex.toString(),JSON.stringify({countdown:n,elapsedTime:l}))}loadSlot(t){let n=ha("gameRecord"+t.toString());if(n!==null){for(this.activeSlotIndex=t;this.slots.length<=t;)this.slots.push({job:"BLM",elements:[]});let l=JSON.parse(n);return O.loadBattleRecordFromFile(l),this.slots[t].job=O.game.job,!0}else return!1}reset(){this.startTime=0,this.elapsedTime=0,this.slots.length>0&&(this.slots[this.activeSlotIndex].elements=[]),this.sharedElements=[],this.addElement({type:"s_Cursor",time:0,displayTime:0}),this.addElement({type:"s_ViewOnlyCursor",time:0,displayTime:0,enabled:!1})}updateElem(t){console.assert(t&&t.type.substring(0,2)==="s_");for(let n=0;n<this.sharedElements.length;n++)if(this.sharedElements[n].type===t.type){this.sharedElements[n]=t;return}console.assert(!1)}setHorizontalScale(t){this.scale=t,this.drawElements()}getAllSlotsTimeInfo(){let t=0,n=0,l=!1;for(let s=0;s<fl;s++){let c=ha("gameTimeInfo"+s.toString());if(c!==null){let d=JSON.parse(c);t=Math.max(t,d.countdown),n=Math.max(n,d.elapsedTime),l=!0}}return l?{countdown:t,rightMostTime:n}:null}getCanvasWidth(){let t=Math.max(0,this.elapsedTime),n=O.gameConfig.countdown,l=this.getAllSlotsTimeInfo();return l!==null&&(n=Math.max(n,l.countdown),t=Math.max(t,l.rightMostTime)),te(this,Pt).forEach(c=>{let d=c.time+c.duration;t=Math.max(t,d+n)}),Math.ceil((t+Math.max(0,n)+4)/8)*8*100*this.scale}getCanvasHeight(){let t=this.getNumMarkerTracks();return Ce.timelineCanvasHeight(t,this.slots.length)}positionFromTime(t){return t*this.scale*100}timeFromPosition(t){return t/(this.scale*100)}drawElements(){wi(),this.updateTimelineMarkers()}updateTimelineMarkers(){wi();let t=new Map;te(this,Pt).forEach(n=>{let l=t.get(n.track);l===void 0&&(l=[]),l.push(n),t.set(n.track,l)}),Fm(t)}onClickTimelineAction(t,n){O.record.onClickNode(t,n),ao(),cu();let l=O.record.selectionStartIndex;l!==void 0?O.displayHistoricalState(-1/0,l):O.displayHistoricalState(-1/0,t)}getNumMarkerTracks(){let t=-1,n=!1;for(let l=0;l<te(this,Pt).length;l++)t=Math.max(t,te(this,Pt)[l].track),te(this,Pt)[l].track===Qo&&(n=!0);return n?t+2:t+1}duringUntargetable(t){for(let n=0;n<te(this,Gn).length;n++){let l=te(this,Gn)[n],s=l.time,c=l.time+l.duration;if(t>=s&&t<c)return!0}return!1}getTargetableDurationBetween(t,n){let l=function([d,f],[E,A]){let R=[];return d<E&&R.push([d,Math.min(f,E)]),A<f&&R.push([Math.max(A,d),f]),R},s=[[t,n]];for(let d=0;d<te(this,Gn).length;d++){let f=te(this,Gn)[d],E=f.time,A=f.time+f.duration,R=[];s.forEach(T=>{R=R.concat(l(T,[E,A]))}),s=R}let c=0;return s.forEach(d=>{c+=d[1]-d[0]}),c}serializedSeparateMarkerTracks(){let t=this.getNumMarkerTracks()-1,n=new Map;for(let s=Qo;s<t+1;s++)n.set(s,[]);te(this,Pt).forEach(s=>{let c=n.get(s.track);console.assert(c),c&&(c.push({time:s.time,markerType:s.markerType,duration:s.duration,description:s.description,color:s.color,showText:s.showText}),n.set(s.track,c))});let l=[];return n.forEach((s,c)=>{s.length>0&&l.push({fileType:_i.MarkerTrackIndividual,track:c,markers:s})}),l}serializedCombinedMarkerTracks(){let t=this.serializedSeparateMarkerTracks();return{fileType:_i.MarkerTracksCombined,tracks:t}}},Pt=new WeakMap,Gn=new WeakMap,cl=new WeakMap,Vt=new WeakSet,Z0=function(t,n){let l=function(s,c){return Math.abs(s-c)<ma.epsilon};return!(t.markerType!==n.markerType||!l(t.time,n.time)||!l(t.duration,n.duration)||t.color!==n.color||t.track!==n.track||t.showText!==n.showText||t.description!==n.description)},ef=function(){Me(this,Gn,[]),te(this,Pt).forEach(t=>{t.markerType==="Untargetable"&&te(this,Gn).push(t)})},tf=function(){Me(this,cl,[]),te(this,Pt).forEach(t=>{t.markerType==="Buff"&&(t.description==="Wanderer's Minuet"&&(t.description=P.WanderersMinuet),te(this,cl).push(t))})},Ym=function(t,n,l){let s=t.markers.map(c=>({time:c.time+l,duration:c.duration,color:c.color,description:c.description,track:c.markerType==="Untargetable"?Qo:n,type:"Marker",markerType:c.markerType??"Info",showText:c.showText??!1}));Me(this,Pt,te(this,Pt).concat(s)),_e(this,Vt,ef).call(this),_e(this,Vt,tf).call(this),_e(this,Vt,or).call(this)},or=function(){let t=this.serializedSeparateMarkerTracks();aa("timelineMarkers",JSON.stringify(t))},Q0=function(){let t=ha("timelineMarkers");t!==null&&JSON.parse(t).forEach(l=>{_e(this,Vt,Ym).call(this,l,l.track,0)})},mN);function rU(e){return Pr({attr:{viewBox:"0 0 32 32"},child:[{tag:"path",attr:{d:"M 5 5 L 5 27 L 27 27 L 27 5 Z M 7 7 L 25 7 L 25 25 L 7 25 Z M 9 20 L 9 22 L 23 22 L 23 20 Z"},child:[]}]})(e)}const hh=C.createContext(null);hh.displayName="PanelGroupContext";const ea={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},zR=10,$o=C.useLayoutEffect,SI=Zf.useId,cU=typeof SI=="function"?SI:()=>null;let uU=0;function jR(e=null){const t=cU(),n=C.useRef(e||t||null);return n.current===null&&(n.current=""+uU++),e??n.current}function $0({children:e,className:t="",collapsedSize:n,collapsible:l,defaultSize:s,forwardedRef:c,id:d,maxSize:f,minSize:E,onCollapse:A,onExpand:R,onResize:T,order:S,style:g,tagName:I="div",...b}){const y=C.useContext(hh);if(y===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:M,expandPanel:v,getPanelSize:U,getPanelStyle:H,groupId:K,isPanelCollapsed:F,reevaluatePanelConstraints:x,registerPanel:re,resizePanel:ie,unregisterPanel:se}=y,oe=jR(d),de=C.useRef({callbacks:{onCollapse:A,onExpand:R,onResize:T},constraints:{collapsedSize:n,collapsible:l,defaultSize:s,maxSize:f,minSize:E},id:oe,idIsFromProps:d!==void 0,order:S});C.useRef({didLogMissingDefaultSizeWarning:!1}),$o(()=>{const{callbacks:ee,constraints:J}=de.current,w={...J};de.current.id=oe,de.current.idIsFromProps=d!==void 0,de.current.order=S,ee.onCollapse=A,ee.onExpand=R,ee.onResize=T,J.collapsedSize=n,J.collapsible=l,J.defaultSize=s,J.maxSize=f,J.minSize=E,(w.collapsedSize!==J.collapsedSize||w.collapsible!==J.collapsible||w.maxSize!==J.maxSize||w.minSize!==J.minSize)&&x(de.current,w)}),$o(()=>{const ee=de.current;return re(ee),()=>{se(ee)}},[S,oe,re,se]),C.useImperativeHandle(c,()=>({collapse:()=>{M(de.current)},expand:ee=>{v(de.current,ee)},getId(){return oe},getSize(){return U(de.current)},isCollapsed(){return F(de.current)},isExpanded(){return!F(de.current)},resize:ee=>{ie(de.current,ee)}}),[M,v,U,F,oe,ie]);const Ae=H(de.current,s);return C.createElement(I,{...b,children:e,className:t,id:oe,style:{...Ae,...g},[ea.groupId]:K,[ea.panel]:"",[ea.panelCollapsible]:l||void 0,[ea.panelId]:oe,[ea.panelSize]:parseFloat(""+Ae.flexGrow).toFixed(1)})}const J0=C.forwardRef((e,t)=>C.createElement($0,{...e,forwardedRef:t}));$0.displayName="Panel";J0.displayName="forwardRef(Panel)";let Km=null,af=-1,Xl=null;function dU(e,t){if(t){const n=(t&iC)!==0,l=(t&lC)!==0,s=(t&oC)!==0,c=(t&sC)!==0;if(n)return s?"se-resize":c?"ne-resize":"e-resize";if(l)return s?"sw-resize":c?"nw-resize":"w-resize";if(s)return"s-resize";if(c)return"n-resize"}switch(e){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function fU(){Xl!==null&&(document.head.removeChild(Xl),Km=null,Xl=null,af=-1)}function rm(e,t){var n,l;const s=dU(e,t);if(Km!==s){if(Km=s,Xl===null&&(Xl=document.createElement("style"),document.head.appendChild(Xl)),af>=0){var c;(c=Xl.sheet)===null||c===void 0||c.removeRule(af)}af=(n=(l=Xl.sheet)===null||l===void 0?void 0:l.insertRule(`*{cursor: ${s} !important;}`))!==null&&n!==void 0?n:-1}}function eC(e){return e.type==="keydown"}function tC(e){return e.type.startsWith("pointer")}function aC(e){return e.type.startsWith("mouse")}function Eh(e){if(tC(e)){if(e.isPrimary)return{x:e.clientX,y:e.clientY}}else if(aC(e))return{x:e.clientX,y:e.clientY};return{x:1/0,y:1/0}}function hU(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function EU(e,t,n){return e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y}function AU(e,t){if(e===t)throw new Error("Cannot compare node with itself");const n={a:pI(e),b:pI(t)};let l;for(;n.a.at(-1)===n.b.at(-1);)e=n.a.pop(),t=n.b.pop(),l=e;Ve(l,"Stacking order can only be calculated for elements with a common ancestor");const s={a:_I(gI(n.a)),b:_I(gI(n.b))};if(s.a===s.b){const c=l.childNodes,d={a:n.a.at(-1),b:n.b.at(-1)};let f=c.length;for(;f--;){const E=c[f];if(E===d.a)return 1;if(E===d.b)return-1}}return Math.sign(s.a-s.b)}const mU=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function RU(e){var t;const n=getComputedStyle((t=nC(e))!==null&&t!==void 0?t:e).display;return n==="flex"||n==="inline-flex"}function TU(e){const t=getComputedStyle(e);return!!(t.position==="fixed"||t.zIndex!=="auto"&&(t.position!=="static"||RU(e))||+t.opacity<1||"transform"in t&&t.transform!=="none"||"webkitTransform"in t&&t.webkitTransform!=="none"||"mixBlendMode"in t&&t.mixBlendMode!=="normal"||"filter"in t&&t.filter!=="none"||"webkitFilter"in t&&t.webkitFilter!=="none"||"isolation"in t&&t.isolation==="isolate"||mU.test(t.willChange)||t.webkitOverflowScrolling==="touch")}function gI(e){let t=e.length;for(;t--;){const n=e[t];if(Ve(n,"Missing node"),TU(n))return n}return null}function _I(e){return e&&Number(getComputedStyle(e).zIndex)||0}function pI(e){const t=[];for(;e;)t.push(e),e=nC(e);return t}function nC(e){const{parentNode:t}=e;return t&&t instanceof ShadowRoot?t.host:t}const iC=1,lC=2,oC=4,sC=8,SU=hU()==="coarse";let Ii=[],Er=!1,wo=new Map,Ah=new Map;const uu=new Set;function gU(e,t,n,l,s){var c;const{ownerDocument:d}=t,f={direction:n,element:t,hitAreaMargins:l,setResizeHandlerState:s},E=(c=wo.get(d))!==null&&c!==void 0?c:0;return wo.set(d,E+1),uu.add(f),xf(),function(){var R;Ah.delete(e),uu.delete(f);const T=(R=wo.get(d))!==null&&R!==void 0?R:1;if(wo.set(d,T-1),xf(),T===1&&wo.delete(d),Ii.includes(f)){const S=Ii.indexOf(f);S>=0&&Ii.splice(S,1),KR(),s("up",!0,null)}}}function _U(e){const{target:t}=e,{x:n,y:l}=Eh(e);Er=!0,YR({target:t,x:n,y:l}),xf(),Ii.length>0&&(Uf("down",e),e.preventDefault(),rC(t)||e.stopImmediatePropagation())}function cm(e){const{x:t,y:n}=Eh(e);if(Er&&e.buttons===0&&(Er=!1,Uf("up",e)),!Er){const{target:l}=e;YR({target:l,x:t,y:n})}Uf("move",e),KR(),Ii.length>0&&e.preventDefault()}function um(e){const{target:t}=e,{x:n,y:l}=Eh(e);Ah.clear(),Er=!1,Ii.length>0&&(e.preventDefault(),rC(t)||e.stopImmediatePropagation()),Uf("up",e),YR({target:t,x:n,y:l}),KR(),xf()}function rC(e){let t=e;for(;t;){if(t.hasAttribute(ea.resizeHandle))return!0;t=t.parentElement}return!1}function YR({target:e,x:t,y:n}){Ii.splice(0);let l=null;(e instanceof HTMLElement||e instanceof SVGElement)&&(l=e),uu.forEach(s=>{const{element:c,hitAreaMargins:d}=s,f=c.getBoundingClientRect(),{bottom:E,left:A,right:R,top:T}=f,S=SU?d.coarse:d.fine;if(t>=A-S&&t<=R+S&&n>=T-S&&n<=E+S){if(l!==null&&document.contains(l)&&c!==l&&!c.contains(l)&&!l.contains(c)&&AU(l,c)>0){let I=l,b=!1;for(;I&&!I.contains(c);){if(EU(I.getBoundingClientRect(),f)){b=!0;break}I=I.parentElement}if(b)return}Ii.push(s)}})}function dm(e,t){Ah.set(e,t)}function KR(){let e=!1,t=!1;Ii.forEach(l=>{const{direction:s}=l;s==="horizontal"?e=!0:t=!0});let n=0;Ah.forEach(l=>{n|=l}),e&&t?rm("intersection",n):e?rm("horizontal",n):t?rm("vertical",n):fU()}let fm=new AbortController;function xf(){fm.abort(),fm=new AbortController;const e={capture:!0,signal:fm.signal};uu.size&&(Er?(Ii.length>0&&wo.forEach((t,n)=>{const{body:l}=n;t>0&&(l.addEventListener("contextmenu",um,e),l.addEventListener("pointerleave",cm,e),l.addEventListener("pointermove",cm,e))}),window.addEventListener("pointerup",um,e),window.addEventListener("pointercancel",um,e)):wo.forEach((t,n)=>{const{body:l}=n;t>0&&(l.addEventListener("pointerdown",_U,e),l.addEventListener("pointermove",cm,e))}))}function Uf(e,t){uu.forEach(n=>{const{setResizeHandlerState:l}=n,s=Ii.includes(n);l(e,s,t)})}function pU(){const[e,t]=C.useState(0);return C.useCallback(()=>t(n=>n+1),[])}function Ve(e,t){if(!e)throw console.error(t),Error(t)}function ls(e,t,n=zR){return e.toFixed(n)===t.toFixed(n)?0:e>t?1:-1}function dl(e,t,n=zR){return ls(e,t,n)===0}function Bn(e,t,n){return ls(e,t,n)===0}function IU(e,t,n){if(e.length!==t.length)return!1;for(let l=0;l<e.length;l++){const s=e[l],c=t[l];if(!Bn(s,c,n))return!1}return!0}function cr({panelConstraints:e,panelIndex:t,size:n}){const l=e[t];Ve(l!=null,`Panel constraints not found for index ${t}`);let{collapsedSize:s=0,collapsible:c,maxSize:d=100,minSize:f=0}=l;if(ls(n,f)<0)if(c){const E=(s+f)/2;ls(n,E)<0?n=s:n=f}else n=f;return n=Math.min(d,n),n=parseFloat(n.toFixed(zR)),n}function Xc({delta:e,initialLayout:t,panelConstraints:n,pivotIndices:l,prevLayout:s,trigger:c}){if(Bn(e,0))return t;const d=[...t],[f,E]=l;Ve(f!=null,"Invalid first pivot index"),Ve(E!=null,"Invalid second pivot index");let A=0;if(c==="keyboard"){{const T=e<0?E:f,S=n[T];Ve(S,`Panel constraints not found for index ${T}`);const{collapsedSize:g=0,collapsible:I,minSize:b=0}=S;if(I){const y=t[T];if(Ve(y!=null,`Previous layout not found for panel index ${T}`),Bn(y,g)){const M=b-y;ls(M,Math.abs(e))>0&&(e=e<0?0-M:M)}}}{const T=e<0?f:E,S=n[T];Ve(S,`No panel constraints found for index ${T}`);const{collapsedSize:g=0,collapsible:I,minSize:b=0}=S;if(I){const y=t[T];if(Ve(y!=null,`Previous layout not found for panel index ${T}`),Bn(y,b)){const M=y-g;ls(M,Math.abs(e))>0&&(e=e<0?0-M:M)}}}}{const T=e<0?1:-1;let S=e<0?E:f,g=0;for(;;){const b=t[S];Ve(b!=null,`Previous layout not found for panel index ${S}`);const M=cr({panelConstraints:n,panelIndex:S,size:100})-b;if(g+=M,S+=T,S<0||S>=n.length)break}const I=Math.min(Math.abs(e),Math.abs(g));e=e<0?0-I:I}{let S=e<0?f:E;for(;S>=0&&S<n.length;){const g=Math.abs(e)-Math.abs(A),I=t[S];Ve(I!=null,`Previous layout not found for panel index ${S}`);const b=I-g,y=cr({panelConstraints:n,panelIndex:S,size:b});if(!Bn(I,y)&&(A+=I-y,d[S]=y,A.toPrecision(3).localeCompare(Math.abs(e).toPrecision(3),void 0,{numeric:!0})>=0))break;e<0?S--:S++}}if(IU(s,d))return s;{const T=e<0?E:f,S=t[T];Ve(S!=null,`Previous layout not found for panel index ${T}`);const g=S+A,I=cr({panelConstraints:n,panelIndex:T,size:g});if(d[T]=I,!Bn(I,g)){let b=g-I,M=e<0?E:f;for(;M>=0&&M<n.length;){const v=d[M];Ve(v!=null,`Previous layout not found for panel index ${M}`);const U=v+b,H=cr({panelConstraints:n,panelIndex:M,size:U});if(Bn(v,H)||(b-=H-v,d[M]=H),Bn(b,0))break;e>0?M--:M++}}}const R=d.reduce((T,S)=>S+T,0);return Bn(R,100)?d:s}function NU({layout:e,panelsArray:t,pivotIndices:n}){let l=0,s=100,c=0,d=0;const f=n[0];Ve(f!=null,"No pivot index found"),t.forEach((T,S)=>{const{constraints:g}=T,{maxSize:I=100,minSize:b=0}=g;S===f?(l=b,s=I):(c+=b,d+=I)});const E=Math.min(s,100-c),A=Math.max(l,100-d),R=e[f];return{valueMax:E,valueMin:A,valueNow:R}}function du(e,t=document){return Array.from(t.querySelectorAll(`[${ea.resizeHandleId}][data-panel-group-id="${e}"]`))}function cC(e,t,n=document){const s=du(e,n).findIndex(c=>c.getAttribute(ea.resizeHandleId)===t);return s??null}function uC(e,t,n){const l=cC(e,t,n);return l!=null?[l,l+1]:[-1,-1]}function dC(e,t=document){var n;if(t instanceof HTMLElement&&(t==null||(n=t.dataset)===null||n===void 0?void 0:n.panelGroupId)==e)return t;const l=t.querySelector(`[data-panel-group][data-panel-group-id="${e}"]`);return l||null}function mh(e,t=document){const n=t.querySelector(`[${ea.resizeHandleId}="${e}"]`);return n||null}function CU(e,t,n,l=document){var s,c,d,f;const E=mh(t,l),A=du(e,l),R=E?A.indexOf(E):-1,T=(s=(c=n[R])===null||c===void 0?void 0:c.id)!==null&&s!==void 0?s:null,S=(d=(f=n[R+1])===null||f===void 0?void 0:f.id)!==null&&d!==void 0?d:null;return[T,S]}function bU({committedValuesRef:e,eagerValuesRef:t,groupId:n,layout:l,panelDataArray:s,panelGroupElement:c,setLayout:d}){C.useRef({didWarnAboutMissingResizeHandle:!1}),$o(()=>{if(!c)return;const f=du(n,c);for(let E=0;E<s.length-1;E++){const{valueMax:A,valueMin:R,valueNow:T}=NU({layout:l,panelsArray:s,pivotIndices:[E,E+1]}),S=f[E];if(S!=null){const g=s[E];Ve(g,`No panel data found for index "${E}"`),S.setAttribute("aria-controls",g.id),S.setAttribute("aria-valuemax",""+Math.round(A)),S.setAttribute("aria-valuemin",""+Math.round(R)),S.setAttribute("aria-valuenow",T!=null?""+Math.round(T):"")}}return()=>{f.forEach((E,A)=>{E.removeAttribute("aria-controls"),E.removeAttribute("aria-valuemax"),E.removeAttribute("aria-valuemin"),E.removeAttribute("aria-valuenow")})}},[n,l,s,c]),C.useEffect(()=>{if(!c)return;const f=t.current;Ve(f,"Eager values not found");const{panelDataArray:E}=f,A=dC(n,c);Ve(A!=null,`No group found for id "${n}"`);const R=du(n,c);Ve(R,`No resize handles found for group id "${n}"`);const T=R.map(S=>{const g=S.getAttribute(ea.resizeHandleId);Ve(g,"Resize handle element has no handle id attribute");const[I,b]=CU(n,g,E,c);if(I==null||b==null)return()=>{};const y=M=>{if(!M.defaultPrevented)switch(M.key){case"Enter":{M.preventDefault();const v=E.findIndex(U=>U.id===I);if(v>=0){const U=E[v];Ve(U,`No panel data found for index ${v}`);const H=l[v],{collapsedSize:K=0,collapsible:F,minSize:x=0}=U.constraints;if(H!=null&&F){const re=Xc({delta:Bn(H,K)?x-K:K-H,initialLayout:l,panelConstraints:E.map(ie=>ie.constraints),pivotIndices:uC(n,g,c),prevLayout:l,trigger:"keyboard"});l!==re&&d(re)}}break}}};return S.addEventListener("keydown",y),()=>{S.removeEventListener("keydown",y)}});return()=>{T.forEach(S=>S())}},[c,e,t,n,l,s,d])}function II(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function fC(e,t){const n=e==="horizontal",{x:l,y:s}=Eh(t);return n?l:s}function OU(e,t,n,l,s){const c=n==="horizontal",d=mh(t,s);Ve(d,`No resize handle element found for id "${t}"`);const f=d.getAttribute(ea.groupId);Ve(f,"Resize handle element has no group id attribute");let{initialCursorPosition:E}=l;const A=fC(n,e),R=dC(f,s);Ve(R,`No group element found for id "${f}"`);const T=R.getBoundingClientRect(),S=c?T.width:T.height;return(A-E)/S*100}function DU(e,t,n,l,s,c){if(eC(e)){const d=n==="horizontal";let f=0;e.shiftKey?f=100:s!=null?f=s:f=10;let E=0;switch(e.key){case"ArrowDown":E=d?0:f;break;case"ArrowLeft":E=d?-f:0;break;case"ArrowRight":E=d?f:0;break;case"ArrowUp":E=d?0:-f;break;case"End":E=100;break;case"Home":E=-100;break}return E}else return l==null?0:OU(e,t,n,l,c)}function yU({panelDataArray:e}){const t=Array(e.length),n=e.map(c=>c.constraints);let l=0,s=100;for(let c=0;c<e.length;c++){const d=n[c];Ve(d,`Panel constraints not found for index ${c}`);const{defaultSize:f}=d;f!=null&&(l++,t[c]=f,s-=f)}for(let c=0;c<e.length;c++){const d=n[c];Ve(d,`Panel constraints not found for index ${c}`);const{defaultSize:f}=d;if(f!=null)continue;const E=e.length-l,A=s/E;l++,t[c]=A,s-=A}return t}function nr(e,t,n){t.forEach((l,s)=>{const c=e[s];Ve(c,`Panel data not found for index ${s}`);const{callbacks:d,constraints:f,id:E}=c,{collapsedSize:A=0,collapsible:R}=f,T=n[E];if(T==null||l!==T){n[E]=l;const{onCollapse:S,onExpand:g,onResize:I}=d;I&&I(l,T),R&&(S||g)&&(g&&(T==null||dl(T,A))&&!dl(l,A)&&g(),S&&(T==null||!dl(T,A))&&dl(l,A)&&S())}})}function qd(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function vU({defaultSize:e,dragState:t,layout:n,panelData:l,panelIndex:s,precision:c=3}){const d=n[s];let f;return d==null?f=e!=null?e.toPrecision(c):"1":l.length===1?f="1":f=d.toPrecision(c),{flexBasis:0,flexGrow:f,flexShrink:1,overflow:"hidden",pointerEvents:t!==null?"none":void 0}}function MU(e,t=10){let n=null;return(...s)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{e(...s)},t)}}function NI(e){try{if(typeof localStorage<"u")e.getItem=t=>localStorage.getItem(t),e.setItem=(t,n)=>{localStorage.setItem(t,n)};else throw new Error("localStorage not supported in this environment")}catch(t){console.error(t),e.getItem=()=>null,e.setItem=()=>{}}}function hC(e){return`react-resizable-panels:${e}`}function EC(e){return e.map(t=>{const{constraints:n,id:l,idIsFromProps:s,order:c}=t;return s?l:c?`${c}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((t,n)=>t.localeCompare(n)).join(",")}function AC(e,t){try{const n=hC(e),l=t.getItem(n);if(l){const s=JSON.parse(l);if(typeof s=="object"&&s!=null)return s}}catch{}return null}function LU(e,t,n){var l,s;const c=(l=AC(e,n))!==null&&l!==void 0?l:{},d=EC(t);return(s=c[d])!==null&&s!==void 0?s:null}function HU(e,t,n,l,s){var c;const d=hC(e),f=EC(t),E=(c=AC(e,s))!==null&&c!==void 0?c:{};E[f]={expandToSizes:Object.fromEntries(n.entries()),layout:l};try{s.setItem(d,JSON.stringify(E))}catch(A){console.error(A)}}function CI({layout:e,panelConstraints:t}){const n=[...e],l=n.reduce((c,d)=>c+d,0);if(n.length!==t.length)throw Error(`Invalid ${t.length} panel layout: ${n.map(c=>`${c}%`).join(", ")}`);if(!Bn(l,100)&&n.length>0)for(let c=0;c<t.length;c++){const d=n[c];Ve(d!=null,`No layout data found for index ${c}`);const f=100/l*d;n[c]=f}let s=0;for(let c=0;c<t.length;c++){const d=n[c];Ve(d!=null,`No layout data found for index ${c}`);const f=cr({panelConstraints:t,panelIndex:c,size:d});d!=f&&(s+=d-f,n[c]=f)}if(!Bn(s,0))for(let c=0;c<t.length;c++){const d=n[c];Ve(d!=null,`No layout data found for index ${c}`);const f=d+s,E=cr({panelConstraints:t,panelIndex:c,size:f});if(d!==E&&(s-=E-d,n[c]=E,Bn(s,0)))break}return n}const xU=100,Zc={getItem:e=>(NI(Zc),Zc.getItem(e)),setItem:(e,t)=>{NI(Zc),Zc.setItem(e,t)}},bI={};function mC({autoSaveId:e=null,children:t,className:n="",direction:l,forwardedRef:s,id:c=null,onLayout:d=null,keyboardResizeBy:f=null,storage:E=Zc,style:A,tagName:R="div",...T}){const S=jR(c),g=C.useRef(null),[I,b]=C.useState(null),[y,M]=C.useState([]),v=pU(),U=C.useRef({}),H=C.useRef(new Map),K=C.useRef(0),F=C.useRef({autoSaveId:e,direction:l,dragState:I,id:S,keyboardResizeBy:f,onLayout:d,storage:E}),x=C.useRef({layout:y,panelDataArray:[],panelDataArrayChanged:!1});C.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),C.useImperativeHandle(s,()=>({getId:()=>F.current.id,getLayout:()=>{const{layout:Y}=x.current;return Y},setLayout:Y=>{const{onLayout:ce}=F.current,{layout:me,panelDataArray:he}=x.current,Se=CI({layout:Y,panelConstraints:he.map(Te=>Te.constraints)});II(me,Se)||(M(Se),x.current.layout=Se,ce&&ce(Se),nr(he,Se,U.current))}}),[]),$o(()=>{F.current.autoSaveId=e,F.current.direction=l,F.current.dragState=I,F.current.id=S,F.current.onLayout=d,F.current.storage=E}),bU({committedValuesRef:F,eagerValuesRef:x,groupId:S,layout:y,panelDataArray:x.current.panelDataArray,setLayout:M,panelGroupElement:g.current}),C.useEffect(()=>{const{panelDataArray:Y}=x.current;if(e){if(y.length===0||y.length!==Y.length)return;let ce=bI[e];ce==null&&(ce=MU(HU,xU),bI[e]=ce);const me=[...Y],he=new Map(H.current);ce(e,me,he,y,E)}},[e,y,E]),C.useEffect(()=>{});const re=C.useCallback(Y=>{const{onLayout:ce}=F.current,{layout:me,panelDataArray:he}=x.current;if(Y.constraints.collapsible){const Se=he.map(be=>be.constraints),{collapsedSize:Te=0,panelSize:Oe,pivotIndices:Be}=ko(he,Y,me);if(Ve(Oe!=null,`Panel size not found for panel "${Y.id}"`),!dl(Oe,Te)){H.current.set(Y.id,Oe);const Ne=sr(he,Y)===he.length-1?Oe-Te:Te-Oe,Ie=Xc({delta:Ne,initialLayout:me,panelConstraints:Se,pivotIndices:Be,prevLayout:me,trigger:"imperative-api"});qd(me,Ie)||(M(Ie),x.current.layout=Ie,ce&&ce(Ie),nr(he,Ie,U.current))}}},[]),ie=C.useCallback((Y,ce)=>{const{onLayout:me}=F.current,{layout:he,panelDataArray:Se}=x.current;if(Y.constraints.collapsible){const Te=Se.map(xe=>xe.constraints),{collapsedSize:Oe=0,panelSize:Be=0,minSize:be=0,pivotIndices:Ne}=ko(Se,Y,he),Ie=ce??be;if(dl(Be,Oe)){const xe=H.current.get(Y.id),nt=xe!=null&&xe>=Ie?xe:Ie,it=sr(Se,Y)===Se.length-1?Be-nt:nt-Be,st=Xc({delta:it,initialLayout:he,panelConstraints:Te,pivotIndices:Ne,prevLayout:he,trigger:"imperative-api"});qd(he,st)||(M(st),x.current.layout=st,me&&me(st),nr(Se,st,U.current))}}},[]),se=C.useCallback(Y=>{const{layout:ce,panelDataArray:me}=x.current,{panelSize:he}=ko(me,Y,ce);return Ve(he!=null,`Panel size not found for panel "${Y.id}"`),he},[]),oe=C.useCallback((Y,ce)=>{const{panelDataArray:me}=x.current,he=sr(me,Y);return vU({defaultSize:ce,dragState:I,layout:y,panelData:me,panelIndex:he})},[I,y]),de=C.useCallback(Y=>{const{layout:ce,panelDataArray:me}=x.current,{collapsedSize:he=0,collapsible:Se,panelSize:Te}=ko(me,Y,ce);return Ve(Te!=null,`Panel size not found for panel "${Y.id}"`),Se===!0&&dl(Te,he)},[]),Ae=C.useCallback(Y=>{const{layout:ce,panelDataArray:me}=x.current,{collapsedSize:he=0,collapsible:Se,panelSize:Te}=ko(me,Y,ce);return Ve(Te!=null,`Panel size not found for panel "${Y.id}"`),!Se||ls(Te,he)>0},[]),ee=C.useCallback(Y=>{const{panelDataArray:ce}=x.current;ce.push(Y),ce.sort((me,he)=>{const Se=me.order,Te=he.order;return Se==null&&Te==null?0:Se==null?-1:Te==null?1:Se-Te}),x.current.panelDataArrayChanged=!0,v()},[v]);$o(()=>{if(x.current.panelDataArrayChanged){x.current.panelDataArrayChanged=!1;const{autoSaveId:Y,onLayout:ce,storage:me}=F.current,{layout:he,panelDataArray:Se}=x.current;let Te=null;if(Y){const Be=LU(Y,Se,me);Be&&(H.current=new Map(Object.entries(Be.expandToSizes)),Te=Be.layout)}Te==null&&(Te=yU({panelDataArray:Se}));const Oe=CI({layout:Te,panelConstraints:Se.map(Be=>Be.constraints)});II(he,Oe)||(M(Oe),x.current.layout=Oe,ce&&ce(Oe),nr(Se,Oe,U.current))}}),$o(()=>{const Y=x.current;return()=>{Y.layout=[]}},[]);const J=C.useCallback(Y=>{let ce=!1;const me=g.current;return me&&window.getComputedStyle(me,null).getPropertyValue("direction")==="rtl"&&(ce=!0),function(Se){Se.preventDefault();const Te=g.current;if(!Te)return()=>null;const{direction:Oe,dragState:Be,id:be,keyboardResizeBy:Ne,onLayout:Ie}=F.current,{layout:xe,panelDataArray:nt}=x.current,{initialLayout:yt}=Be??{},it=uC(be,Y,Te);let st=DU(Se,Y,Oe,Be,Ne,Te);const Tt=Oe==="horizontal";Tt&&ce&&(st=-st);const St=nt.map(As=>As.constraints),Qt=Xc({delta:st,initialLayout:yt??xe,panelConstraints:St,pivotIndices:it,prevLayout:xe,trigger:eC(Se)?"keyboard":"mouse-or-touch"}),Ro=!qd(xe,Qt);(tC(Se)||aC(Se))&&K.current!=st&&(K.current=st,!Ro&&st!==0?Tt?dm(Y,st<0?iC:lC):dm(Y,st<0?oC:sC):dm(Y,0)),Ro&&(M(Qt),x.current.layout=Qt,Ie&&Ie(Qt),nr(nt,Qt,U.current))}},[]),w=C.useCallback((Y,ce)=>{const{onLayout:me}=F.current,{layout:he,panelDataArray:Se}=x.current,Te=Se.map(xe=>xe.constraints),{panelSize:Oe,pivotIndices:Be}=ko(Se,Y,he);Ve(Oe!=null,`Panel size not found for panel "${Y.id}"`);const Ne=sr(Se,Y)===Se.length-1?Oe-ce:ce-Oe,Ie=Xc({delta:Ne,initialLayout:he,panelConstraints:Te,pivotIndices:Be,prevLayout:he,trigger:"imperative-api"});qd(he,Ie)||(M(Ie),x.current.layout=Ie,me&&me(Ie),nr(Se,Ie,U.current))},[]),L=C.useCallback((Y,ce)=>{const{layout:me,panelDataArray:he}=x.current,{collapsedSize:Se=0,collapsible:Te}=ce,{collapsedSize:Oe=0,collapsible:Be,maxSize:be=100,minSize:Ne=0}=Y.constraints,{panelSize:Ie}=ko(he,Y,me);Ie!=null&&(Te&&Be&&dl(Ie,Se)?dl(Se,Oe)||w(Y,Oe):Ie<Ne?w(Y,Ne):Ie>be&&w(Y,be))},[w]),W=C.useCallback((Y,ce)=>{const{direction:me}=F.current,{layout:he}=x.current;if(!g.current)return;const Se=mh(Y,g.current);Ve(Se,`Drag handle element not found for id "${Y}"`);const Te=fC(me,ce);b({dragHandleId:Y,dragHandleRect:Se.getBoundingClientRect(),initialCursorPosition:Te,initialLayout:he})},[]),le=C.useCallback(()=>{b(null)},[]),D=C.useCallback(Y=>{const{panelDataArray:ce}=x.current,me=sr(ce,Y);me>=0&&(ce.splice(me,1),delete U.current[Y.id],x.current.panelDataArrayChanged=!0,v())},[v]),X=C.useMemo(()=>({collapsePanel:re,direction:l,dragState:I,expandPanel:ie,getPanelSize:se,getPanelStyle:oe,groupId:S,isPanelCollapsed:de,isPanelExpanded:Ae,reevaluatePanelConstraints:L,registerPanel:ee,registerResizeHandle:J,resizePanel:w,startDragging:W,stopDragging:le,unregisterPanel:D,panelGroupElement:g.current}),[re,I,l,ie,se,oe,S,de,Ae,L,ee,J,w,W,le,D]),Z={display:"flex",flexDirection:l==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return C.createElement(hh.Provider,{value:X},C.createElement(R,{...T,children:t,className:n,id:c,ref:g,style:{...Z,...A},[ea.group]:"",[ea.groupDirection]:l,[ea.groupId]:S}))}const RC=C.forwardRef((e,t)=>C.createElement(mC,{...e,forwardedRef:t}));mC.displayName="PanelGroup";RC.displayName="forwardRef(PanelGroup)";function sr(e,t){return e.findIndex(n=>n===t||n.id===t.id)}function ko(e,t,n){const l=sr(e,t),c=l===e.length-1?[l-1,l]:[l,l+1],d=n[l];return{...t.constraints,panelSize:d,pivotIndices:c}}function UU({disabled:e,handleId:t,resizeHandler:n,panelGroupElement:l}){C.useEffect(()=>{if(e||n==null||l==null)return;const s=mh(t,l);if(s==null)return;const c=d=>{if(!d.defaultPrevented)switch(d.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{d.preventDefault(),n(d);break}case"F6":{d.preventDefault();const f=s.getAttribute(ea.groupId);Ve(f,`No group element found for id "${f}"`);const E=du(f,l),A=cC(f,t,l);Ve(A!==null,`No resize element found for id "${t}"`);const R=d.shiftKey?A>0?A-1:E.length-1:A+1<E.length?A+1:0;E[R].focus();break}}};return s.addEventListener("keydown",c),()=>{s.removeEventListener("keydown",c)}},[l,e,t,n])}function TC({children:e=null,className:t="",disabled:n=!1,hitAreaMargins:l,id:s,onBlur:c,onClick:d,onDragging:f,onFocus:E,onPointerDown:A,onPointerUp:R,style:T={},tabIndex:S=0,tagName:g="div",...I}){var b,y;const M=C.useRef(null),v=C.useRef({onClick:d,onDragging:f,onPointerDown:A,onPointerUp:R});C.useEffect(()=>{v.current.onClick=d,v.current.onDragging=f,v.current.onPointerDown=A,v.current.onPointerUp=R});const U=C.useContext(hh);if(U===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:H,groupId:K,registerResizeHandle:F,startDragging:x,stopDragging:re,panelGroupElement:ie}=U,se=jR(s),[oe,de]=C.useState("inactive"),[Ae,ee]=C.useState(!1),[J,w]=C.useState(null),L=C.useRef({state:oe});$o(()=>{L.current.state=oe}),C.useEffect(()=>{if(n)w(null);else{const X=F(se);w(()=>X)}},[n,se,F]);const W=(b=l==null?void 0:l.coarse)!==null&&b!==void 0?b:15,le=(y=l==null?void 0:l.fine)!==null&&y!==void 0?y:5;C.useEffect(()=>{if(n||J==null)return;const X=M.current;Ve(X,"Element ref not attached");let Z=!1;return gU(se,X,H,{coarse:W,fine:le},(ce,me,he)=>{if(!me){de("inactive");return}switch(ce){case"down":{de("drag"),Z=!1,Ve(he,'Expected event to be defined for "down" action'),x(se,he);const{onDragging:Se,onPointerDown:Te}=v.current;Se==null||Se(!0),Te==null||Te();break}case"move":{const{state:Se}=L.current;Z=!0,Se!=="drag"&&de("hover"),Ve(he,'Expected event to be defined for "move" action'),J(he);break}case"up":{de("hover"),re();const{onClick:Se,onDragging:Te,onPointerUp:Oe}=v.current;Te==null||Te(!1),Oe==null||Oe(),Z||Se==null||Se();break}}})},[W,H,n,le,F,se,J,x,re]),UU({disabled:n,handleId:se,resizeHandler:J,panelGroupElement:ie});const D={touchAction:"none",userSelect:"none"};return C.createElement(g,{...I,children:e,className:t,id:s,onBlur:()=>{ee(!1),c==null||c()},onFocus:()=>{ee(!0),E==null||E()},ref:M,role:"separator",style:{...D,...T},tabIndex:S,[ea.groupDirection]:H,[ea.groupId]:K,[ea.resizeHandle]:"",[ea.resizeHandleActive]:oe==="drag"?"pointer":Ae?"keyboard":void 0,[ea.resizeHandleEnabled]:!n,[ea.resizeHandleId]:se,[ea.resizeHandleState]:oe})}TC.displayName="PanelResizeHandle";const kU=3,Ce={rulerHeight:30,trackHeight:14,slotPaddingTop:4,damageMarkerHeight:8,skillButtonHeight:28,buffCoverHeight:4,slotPaddingBottom:4,renderSlotHeight:()=>Ce.slotPaddingTop+Ce.damageMarkerHeight+Ce.skillButtonHeight*1.5+Ce.buffCoverHeight*kU+Ce.slotPaddingBottom,timelineCanvasHeight:(e,t)=>{let n=Ce.rulerHeight;return n+=Ce.trackHeight*e,n+=Ce.renderSlotHeight()*t,t<fl&&(n+=Ce.addSlotButtonHeight),n},leftBufferWidth:20,addSlotButtonHeight:20},SC={drawMarkers:!0,drawDamageMarks:!0,drawHealingMarks:!0,drawMPTickMarks:!0,drawBuffIndicators:!0};function PU(e){let t=new Blob([JSON.stringify(e)],{type:"text/plain;charset=utf-8"});return window.URL.createObjectURL(t)}function GU(e){var l;let t="";(l=e.meta)==null||l.forEach(s=>{t+="#"+s.toString()+`
`}),e.body.forEach(s=>{for(let c=0;c<s.length;c++)t+=s[c].toString(),c<s.length-1&&(t+=",");t+=`
`});let n=new Blob([t],{type:"text/csv;charset=utf-8"});return window.URL.createObjectURL(n)}var ml=(e=>(e.Json="JSON",e.Csv="CSV",e.Png="PNG",e))(ml||{});function no(e){var c;const[t,n]=C.useState({jsonContent:{},csvContent:{body:[]},pngContent:void 0}),l=()=>{let d=e.getContentFn();e.fileFormat==="JSON"?n({jsonContent:d}):e.fileFormat==="CSV"?n({csvContent:d}):e.fileFormat==="PNG"?n({pngContent:d}):console.assert(!1)};let s="";return e.fileFormat==="JSON"?s=PU(t.jsonContent):e.fileFormat==="CSV"?s=GU(t.csvContent):e.fileFormat==="PNG"?s=((c=t.pngContent)==null?void 0:c.toDataURL())??"":console.assert(!1),u.jsx("a",{style:{color:kt().fileDownload,marginRight:6},href:s,download:e.filename,onClick:()=>l(),onContextMenu:()=>l(),children:`[${e.displayName===void 0?"download":e.displayName}]`})}function wU(e,t=n=>{console.log(n)}){let n=new FileReader;n.onload=function(l){var d,f;let s=((f=(d=l.target)==null?void 0:d.result)==null?void 0:f.toString())??"",c;try{c=JSON.parse(s)}catch{window.alert(p({en:"Parse error! Are you sure this is the correct file? This tool only reads text files in JSON format.",zh:"解析出错- 你确定文件没选错吗？本工具只读取JSON格式的文本文件"}))}t(c)},n.readAsText(e,"UTF-8")}const ft={positionFromTimeAndScale:function(e,t){return e*t*100},timeFromPositionAndScale:function(e,t){return e/(t*100)},displayTime:function(e,t){let n=Math.abs(e),l=Math.floor(n/60),s=n-60*l;return(e<0?"-":"")+l.toString()+":"+(s+ma.epsilon<10?"0":"")+s.toFixed(t).toString()}};let BU=function(e){console.log("[asyncFetch] some error occurred")},OI=new Map;function gC(e,t,n=BU){let l=OI.get(e);if(l){t(l);return}const s=new XMLHttpRequest;s.addEventListener("error",n),s.addEventListener("load",c=>{t(s.responseText),OI.set(e,s.responseText)}),s.open("GET",e),s.send()}function iu(e){let t=e.trim(),n=1;e[0]==="-"&&(n=-1,e=e.substring(1));let l=t.indexOf(":");if(l<0)return parseFloat(t);let s=parseInt(t.substring(0,l)),c=parseFloat(t.substring(l+1));return n*(s*60+c)}function os(e){return u.jsx("div",{className:"clickable",onClick:e.onClickFn,style:e.style,children:e.content})}function FU(e){const n={position:"relative",display:"inline-block",verticalAlign:"top",border:"1px solid "+kt().bgHighContrast,borderRadius:4,height:8,top:e.offsetY,width:e.width},l={background:`${e.backgroundColor}`,height:"100%",borderRadius:"inherit",width:`${e.progress*100}%`};return u.jsx("div",{style:n,children:u.jsx("div",{style:l})})}const kf=26;function _C(e){const t=kf-2,[n,l]=mt.useState(void 0);C.useEffect(()=>{let A=e.defaultSelectedIndex,R=ha("tabs: "+e.uniqueName);R!==null&&(R==="none"?A=void 0:A=parseInt(R)),l(A)},[e.defaultSelectedIndex,e.uniqueName]);const s=kt(),c=function(A){const T="1px solid "+(A===n?s.bgHighContrast:s.bgMediumContrast),S="1px solid "+s.background;let g=T;(A===n||n===void 0)&&(g=S);let I=A===n?T:S,b=S,y=S;return A===n?(b=T,y=T):A>0&&(n===void 0||n+1!==A)&&(b=T),{margin:0,display:"inline-block",boxSizing:"border-box",padding:"0 12px",borderBottom:g,borderTop:I,borderLeft:b,borderRight:y,lineHeight:`${t}px`,color:A===n?s.emphasis:s.text,cursor:e.collapsible||A!==n?"pointer":"default"}},d=[];let f=[];for(let A=0;A<e.content.length;A++){const R=e.content[A],T=A===n;d.push(u.jsx("span",{style:c(A),onClick:()=>{let g=n;T?e.collapsible&&(g=void 0):g=A,l(g),aa("tabs: "+e.uniqueName,g===void 0?"none":`${g}`)},children:R.titleNode},A));const S={display:T?"block":"none"};e.maxWidth!==void 0&&(S.maxWidth=e.maxWidth),f.push(u.jsx("div",{style:S,children:R.contentNode},A))}e.collapsible&&n!==void 0&&d.push(u.jsx("span",{onClick:()=>{l(void 0),aa("tabs: "+e.uniqueName,"none")},children:u.jsx(rU,{style:{marginLeft:16,fontSize:14,cursor:"pointer",position:"relative",top:3}})},d.length));const E=navigator.userAgent.indexOf("Firefox")>=0;return u.jsxs("div",{style:{position:"relative",...e.style},children:[u.jsx("div",{children:d}),u.jsx("div",{className:e.scrollable?"visibleScrollbar":void 0,style:{display:n===void 0?"none":"block",height:e.height-kf,boxSizing:"border-box",padding:`10px ${E?15:5}px`,overflowY:e.scrollable?"scroll":"hidden"},children:f})]})}function VR(e){let t=kt(),n=[];for(let l=0;l<e.children.length;l++){const s=e.children[l],c=l<e.children.length-1?e.children[l+1]:void 0;if(n.push(u.jsxs(J0,{className:"invisibleScrollbar",defaultSize:s.defaultSize,minSize:s.minSize??20,style:{border:s.fullBorder===!0?`1px solid ${t.bgMediumContrast}`:void 0,boxSizing:"border-box",height:e.contentHeight,overflowY:"scroll"},children:[s.title?u.jsx("div",{style:{marginBottom:10},children:u.jsx("b",{children:s.title})}):void 0,s.content]},`column-${l}`)),l<e.children.length-1){const f=s.fullBorder===!0||c!==void 0&&c.fullBorder===!0?{margin:"0 5px"}:{borderLeft:"1px solid "+t.bgMediumContrast,margin:"0 15px 0 10px"};n.push(u.jsx(TC,{style:f},`divider-${l}`))}}return u.jsx(RC,{direction:"horizontal",children:n})}function Gt(e){var d;const t=f=>{e.onChange&&e.onChange(f.target.value)},n=kt(),l=e.width??5;let s={color:((d=e.style)==null?void 0:d.color)??e.componentColor??n.text,backgroundColor:"transparent",outline:"none",border:"none",borderBottom:"1px solid "+(e.componentColor??n.text)},c=e.style??{};return u.jsxs("div",{style:{...c,color:e.componentColor},children:[u.jsx("span",{children:e.description}),u.jsx("input",{style:s,size:l,type:"text",value:e.defaultValue,onChange:t})]})}class zU extends mt.Component{constructor(n){super(n);j(this,"props",{uniqueName:"anonSlider",defaultValue:"default slider value",description:"default description"});j(this,"state");j(this,"onChange");this.props=n,this.state={value:n.defaultValue??""},this.onChange=l=>{this.setState({value:l.target.value}),this.props.onChange&&this.props.onChange(l.target.value),aa("slider: "+this.props.uniqueName,l.target.value)}}componentDidMount(){let n=this.state.value,l=ha("slider: "+this.props.uniqueName);l!==null&&(n=l,this.setState({value:n})),this.props.onChange&&this.props.onChange(n)}render(){return u.jsxs("div",{style:{display:"inline-block",...this.props.style},children:[u.jsx("span",{children:this.props.description??""}),u.jsx("input",{size:10,type:"range",value:this.state.value,min:.05,max:1,step:.025,onChange:this.onChange,style:{position:"relative",outline:"none"}})]})}}function Qc(e){const[t,n]=C.useState(!1);C.useEffect(()=>{let s=e.defaultChecked??!0,c=ha("checked: "+e.uniqueName);c!==null&&(s=parseInt(c)>0),n(s),e.onChange(s)},[]);const l={position:"relative",top:3,marginRight:"0.25em"};return u.jsxs("div",{style:{marginBottom:5},children:[u.jsx("input",{type:"checkbox",onChange:s=>{let c=s.currentTarget.checked;n(c),aa("checked: "+e.uniqueName,c?"1":"0"),e.onChange(c)},checked:t,style:l}),u.jsx("span",{children:e.label})]})}class dB extends mt.Component{constructor(n){super(n);j(this,"myRef");this.myRef=mt.createRef()}scroll(){this.myRef.current&&this.myRef.current.scrollIntoView({behavior:"smooth"})}render(){return this.scroll(),u.jsx("div",{ref:this.myRef})}}class Jo extends mt.Component{constructor(n){super(n);j(this,"props",{title:"(expand me)"});j(this,"state",{show:!1});j(this,"autoIndent",!0);j(this,"onClick");this.props=n,n.autoIndent===!1&&(this.autoIndent=!1),this.onClick=()=>{let c=!this.state.show;this.setState({show:c}),this.props.onExpand&&c&&this.props.onExpand(),this.props.onCollapse&&!c&&this.props.onCollapse(),aa("exp: "+n.title,(c?1:0).toString())};let l=ha("exp: "+n.title),s=n.defaultShow??!1;l!==null&&(s=parseInt(l)===1),this.state={show:s}}render(){let n=this.autoIndent?{margin:10,paddingLeft:6,marginBottom:20}:{};return u.jsxs("div",{style:this.props.noMargin?{}:{marginTop:10,marginBottom:10},children:[u.jsx(os,{content:u.jsxs("span",{children:[u.jsx("span",{children:this.state.show?"- ":"+ "}),this.props.titleNode?this.props.titleNode:this.props.title]}),onClickFn:this.onClick}),u.jsx("div",{style:{position:"relative",display:this.state.show?"block":"none"},children:u.jsx("div",{style:n,children:this.props.content})})]})}}function Pf(e){const t=mt.createRef();let n=e.defaultLoadUrl??"";const l=E=>{E.target&&(n=E.target.value)},s=()=>{let E=t.current;if(E&&E.files&&E.files.length>0){let A=E.files[0];wU(A,R=>e.onLoadFn(R)),E.value=""}},c=()=>{let E=function(A){console.log("some error occurred")};gC(n,A=>{try{let R=JSON.parse(A);e.onLoadFn(R)}catch{E()}},A=>{E()})};let d=kt(),f={color:d.text,background:"transparent",outline:"none",border:"none",borderBottom:"1px solid "+d.text,width:"30em"};return u.jsxs("div",{children:[u.jsxs("div",{children:[u.jsx("span",{children:e.label??p({en:"Load from file: ",zh:"从文件导入："})}),u.jsx("input",{style:{width:"110px",color:"transparent"},type:"file",ref:t,onChange:s})]}),e.allowLoadFromUrl?u.jsxs("form",{children:[u.jsx("span",{children:p({en:"Load from URL: ",zh:"从URL导入："})}),u.jsx("input",{defaultValue:n,style:f,onChange:l}),u.jsx("span",{children:" "}),u.jsx("button",{type:"submit",onClick:E=>{c(),E.preventDefault()},children:p({en:"load",zh:"加载"})})]}):void 0]})}function fa(e){let t=kt();return u.jsx("span",{style:{fontSize:11,border:"1px solid "+t.bgHighContrast,borderRadius:2,padding:"1px 4px",background:t.bgLowContrast},children:e.text})}const jU=100;function at(e){let n={display:"inline-block",position:"relative",width:12,height:12,lineHeight:1,cursor:"help",background:kt().bgHighContrast,borderRadius:6,textAlign:"center",verticalAlign:"middle"};const l=C.useRef(0),[s,c]=C.useState(!1);return u.jsxs(D0,{delay:0,open:s,children:[u.jsx("span",{id:`help-${e.topic}`,className:"help-icon global-help-tooltip",style:n,"data-tooltip-offset":4,onMouseEnter:()=>{const d=Date.now();d-l.current>jU&&c(!0),l.current=d},onMouseLeave:()=>c(!1),children:u.jsx("span",{style:{position:"relative",top:-1,color:"white"},children:"?"})}),u.jsx(H0,{container:document.getElementById("globalHelpTooltipAnchor"),children:u.jsx(U0,{className:"tooltip-positioner",anchor:document.getElementById(`help-${e.topic}`),children:u.jsx(k0,{className:"help-tooltip tooltip",children:e.content})})})]})}function YU(e){var n,l;let t=kt();return u.jsx("div",{style:{top:1+(((n=e.offset)==null?void 0:n.y)??0),left:((l=e.offset)==null?void 0:l.x)??0,marginRight:8,position:"relative",width:16,height:16,borderRadius:8,display:"inline-block",border:"1px solid "+t.bgHighContrast,verticalAlign:"top"},children:e.color&&u.jsx("div",{style:{backgroundColor:`${e.color}`,position:"absolute",top:2,bottom:2,left:2,right:2,borderRadius:"inherit"}})})}function KU(e){var c,d;let t=kt();const n=30,l=24;let s;return e.imgUrl?s=u.jsx("img",{src:e.imgUrl,alt:"resource img",style:{display:"block",margin:"2px auto",maxWidth:n-4,maxHeight:l-4}}):e.color&&(s=u.jsx("div",{style:{backgroundColor:e.color,position:"absolute",top:3,bottom:3,left:3,right:3}})),u.jsx("div",{style:{display:"inline-block",position:"relative",top:((c=e.offset)==null?void 0:c.y)??0,left:((d=e.offset)==null?void 0:d.x)??0,width:n,height:l,border:"1px solid "+t.bgHighContrast,marginRight:4},children:s})}function nf(e={name:"placeholder",color:"#6cf",value:"0.34/1.00",progress:.34,width:100,hidden:!1}){return u.jsxs("div",{hidden:e.hidden,style:{marginBottom:4,lineHeight:"1.5em"},children:[u.jsx("div",{style:{display:"inline-block",height:"100%",width:108},children:e.name}),u.jsxs("div",{style:{width:200,display:"inline-block"},children:[u.jsx(FU,{backgroundColor:e.color,progress:e.progress,width:e.width,offsetY:4}),u.jsx("div",{style:{marginLeft:6,height:"100%",display:"inline-block"},children:e.value})]})]})}function ir(e){const t=e.containerType==="box"||e.items.some(l=>l.imgUrl!==void 0),n=e.items.map((l,s)=>e.containerType==="circle"&&l.imgUrl===void 0?u.jsx(YU,{color:l.color,offset:t?{x:0,y:3}:void 0},s):u.jsx(KU,{color:l.color,imgUrl:l.imgUrl,offset:t?{x:-2,y:0}:void 0},s));return t?u.jsxs("div",{style:{marginBottom:4},children:[u.jsx("div",{style:{display:"inline-block",position:"relative",verticalAlign:"top",top:6,width:108},children:e.name}),u.jsx("div",{style:{display:"inline-block"},children:n}),e.label?u.jsx("div",{style:{marginLeft:6,display:"inline-block",position:"relative",verticalAlign:"top",top:6},children:e.label}):void 0]}):u.jsxs("div",{style:{marginBottom:4,lineHeight:"1.5em"},children:[u.jsx("div",{style:{display:"inline-block",height:"100%",width:108},children:e.name}),u.jsxs("div",{style:{width:200,display:"inline-block"},children:[u.jsx("div",{style:{display:"inline-block"},children:n}),e.label?u.jsx("div",{style:{marginLeft:6,height:"100%",display:"inline-block"},children:e.label}):void 0]})]})}function DI(e){return u.jsxs("div",{className:e.className,style:{marginBottom:4,lineHeight:"1.5em"},children:[u.jsx("div",{style:{display:"inline-block",height:"100%",width:108},children:e.name}),u.jsx("div",{style:{width:200,display:"inline-block"},children:u.jsx("div",{style:{display:"inline-block",marginLeft:6},children:e.text})})]})}const ss=new Map;function Ua(e,t){ss.set(e,`Buffs/${t}`);const n=Xe[e].maximumStacks??1;for(let l=2;l<=n;l++)ss.set(e+l,`Buffs/${t.replace(Xe[e].name,Xe[e].name+l)}`)}Object.keys(xN).forEach(e=>{const t=Xe[e].name;ss.set(e,`Buffs/Role/${t}.png`)});Object.keys(HN).forEach(e=>ss.set(e,"Buffs/Role/Tank Limit Break.png"));ss.set("SPRINT","Buffs/General/Sprint.png");ss.set("TINCTURE","Buffs/General/Tincture.png");function VU(e){let t=e.rscType;e.stacks>1&&(t+=e.stacks);let n;return e.rscType==="AUTOS_ENGAGED"||e.rscType==="REAR_POSITIONAL"||e.rscType==="FLANK_POSITIONAL"?n={height:40}:n={height:40},u.jsxs("div",{title:Wa(e.rscType),className:e.className+" buff "+e.rscType,children:[u.jsx(os,{content:u.jsx("img",{style:n,src:"assets/"+ss.get(t),alt:e.rscType}),style:{display:"inline-block",verticalAlign:"top",filter:e.enabled?"none":"grayScale(100%)"},onClickFn:()=>{e.onSelf&&(O.requestToggleBuff(e.rscType),O.updateStatusDisplay(O.game),O.updateSkillButtons(O.game),O.autoSave())}}),u.jsx("span",{className:"buff-label",style:{visibility:e.timeRemaining===void 0?"hidden":void 0},children:e.timeRemaining??"0.000"})]})}function Gf(e){const t=e.data;let n=[];for(let s=0;s<t.length;s++)n.push(u.jsx(VU,{...t[s]},s));let l={height:54,textAlign:"right",lineHeight:"1em"};return e.style&&(l={...l,...e.style}),u.jsx("div",{style:l,children:n})}function pC(e){let t=kt(),n=e.data,l=u.jsx(nf,{name:"GCD",color:t.resources.gcdBar,progress:n.gcdReady?0:1-n.timeTillGCDReady/n.gcd,value:n.timeTillGCDReady.toFixed(3),width:100,hidden:n.gcdReady}),s=u.jsx(nf,{name:"casting/taxed",color:n.canMove?t.resources.gcdBar:t.resources.lockBar,progress:n.castLocked?1-n.castLockCountdown/n.castLockTotalDuration:0,value:n.castLockCountdown.toFixed(3),width:100,hidden:!n.castLocked}),c=u.jsx(nf,{name:"using skill",color:t.resources.lockBar,progress:n.animLocked?1-n.animLockCountdown/n.animLockTotalDuration:0,value:n.animLockCountdown.toFixed(3),width:100,hidden:!n.animLocked});return u.jsxs("div",{style:{position:"absolute"},children:[l,s,c]})}function IC(e){const t=e.data.resources.map((l,s)=>{switch(l.kind){case"bar":return u.jsx(nf,{name:l.name,color:l.color,progress:l.progress,value:l.valueString,width:l.widthPx??100,hidden:l.hidden??!1},"resourceDisplay"+s);case"counter":{let c=[];for(let d=0;d<l.maxStacks;d++)c.push({color:d<l.currentStacks?l.color:void 0});return u.jsx(ir,{containerType:"circle",name:l.name,label:l.valueString??`${l.currentStacks}/${l.maxStacks}`,items:c},"resourceDisplay"+s)}case"paint":{let c=[];for(let f=0;f<l.maxStacks;f++){const E=l.hasComet&&f===l.currentStacks-1?l.cometColor:l.holyColor;c.push({color:f<l.currentStacks?E:void 0,imgUrl:void 0})}let d=`${l.currentStacks}/${l.maxStacks}`;return u.jsx(ir,{containerType:"circle",name:l.name,label:d,items:c},"resourceDisplay"+s)}case"dance":{const c=l.currentStacks;let d=[l.emboiteColor,l.entrechatColor,l.jeteColor,l.pirouetteColor],f=[];for(let A=0;A<l.maxStacks;A++)f.push({color:A<c?d[A]:void 0});let E=`${c}/${l.maxStacks}`;return u.jsx(ir,{containerType:"circle",name:l.name,label:E,items:f},"resourceDisplay"+s)}case"sen":{const c=[{present:l.hasSetsu,color:l.setsuColor,name:"setsu"},{present:l.hasGetsu,color:l.getsuColor,name:"getsu"},{present:l.hasKa,color:l.kaColor,name:"ka"}],d=u.jsx(at,{topic:"senExplanation",content:p({en:"from left to right: setsu (yukikaze), getsu (gekko/mangetsu), ka (kasha/oka)",zh:"从左到右：雪闪（雪风），月闪（月光/满月），花闪（花车/樱花）"})});return u.jsx(ir,{name:u.jsxs(u.Fragment,{children:[l.name," ",d]}),label:c.filter(f=>f.present).map(f=>f.name).join("+"),containerType:"circle",items:c.map(f=>({color:f.present?f.color:void 0}))},"resourceDisplay"+s)}case"coda":{const c=[{present:l.hasWanderers,color:l.wanderersColor},{present:l.hasMages,color:l.magesColor},{present:l.hasArmys,color:l.armysColor}],d=u.jsx(at,{topic:"codaExplanation",content:p({en:"from left to right: wanderer's coda, mage's coda, army's coda"})});return u.jsx(ir,{name:u.jsxs(u.Fragment,{children:[l.name," ",d]}),containerType:"circle",items:c.map(f=>({color:f.present?f.color:void 0}))},"resourceDisplay"+s)}case"attunement":{const c=[{gem:l.ruby,color:l.rubyColor},{gem:l.topaz,color:l.topazColor},{gem:l.emerald,color:l.emeraldColor}];return u.jsxs("div",{children:[u.jsx(ir,{name:l.aetherName,containerType:"circle",items:c.map(d=>({color:d.gem?d.color:void 0}))}),u.jsx(DI,{name:l.attunementName,text:l.attunementCount.toString()+(l.attunementCount>0?` | ${l.timeRemaining.toFixed(3)}`:"")})]},"resourceDisplay"+s)}default:return u.jsx(DI,{name:l.name,text:l.text},"resourceDisplay"+s)}});let n={textAlign:"left",minHeight:"13.5em"};return e.style&&(n={...n,...e.style}),u.jsx("div",{style:n,children:t})}let NC=(e,t)=>{};class CC extends mt.Component{constructor(n){super(n);j(this,"state");this.state={time:0,resources:[],enemyBuffs:[],selfBuffs:[],level:100,layoutFn:l=>u.jsx("div",{})},NC=(l,s)=>{const c=l(ki(this.context));this.setState({layoutFn:s,...c})}}componentDidMount(){O.updateStatusDisplay(O.game)}render(){return ki(this.context),u.jsxs("div",{style:{position:"relative",textAlign:"left",margin:"8px 0"},children:[u.jsx("div",{style:{position:"absolute",top:-8,right:0,zIndex:1},children:u.jsx(at,{topic:"mainControlRegion",content:u.jsx("div",{className:"toolTip",children:p({en:u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"paragraph",children:[u.jsx("span",{style:{color:"lightgray"},children:"grey"})," border: not focused"]}),u.jsxs("div",{className:"paragraph",children:[u.jsx("b",{style:{color:"mediumpurple"},children:"purple"})," border: receiving input"]}),u.jsxs("div",{className:"paragraph",children:[u.jsx("b",{style:{color:"mediumseagreen"},children:"green"})," border: real-time"]}),u.jsxs("div",{className:"paragraph",children:[u.jsx("b",{style:{color:"darkorange"},children:"orange"})," border: viewing historical state, not receiving input"]})]}),zh:u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"paragraph",children:[u.jsx("span",{style:{color:"lightgray"},children:"灰色"}),"边框：未选中"]}),u.jsxs("div",{className:"paragraph",children:[u.jsx("b",{style:{color:"mediumpurple"},children:"紫色"}),"边框：正在接收输入"]}),u.jsxs("div",{className:"paragraph",children:[u.jsx("b",{style:{color:"mediumseagreen"},children:"绿色"}),"边框：正在进行实时动作"]}),u.jsxs("div",{className:"paragraph",children:[u.jsx("b",{style:{color:"darkorange"},children:"橙色"}),"边框：正在查看历史状态，未接收输入"]})]}),ja:u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"paragraph",children:[u.jsx("span",{style:{color:"lightgray"},children:"グレー"})," : 未選択"]}),u.jsxs("div",{className:"paragraph",children:[u.jsx("b",{style:{color:"mediumpurple"},children:"紫"})," : 入力可"]}),u.jsxs("div",{className:"paragraph",children:[u.jsx("b",{style:{color:"mediumseagreen"},children:"緑"})," : リアルタイム"]}),u.jsxs("div",{className:"paragraph",children:[u.jsx("b",{style:{color:"darkorange"},children:"オレンジ"})," : 任意の時点の状態を確認中。入力不可"]})]})})})})}),this.state.layoutFn(this.state)]})}}j(CC,"contextType",jn);class Wt{constructor(t){j(this,"state");this.state=t}makeCommonTimer(t,n=!0){const l=this.state.resources.timeTillReady(t),s=this.state.resources.get(t);return{rscType:t,onSelf:n,enabled:s.enabled,stacks:s.availableAmount(),timeRemaining:l.toFixed(3),className:s.availableAmountIncludingDisabled()>0?"":"hidden"}}makeToggleableTimer(t,n=!0){const l=this.state.resources.timeTillReady(t),s=this.state.resources.get(t);return{rscType:t,onSelf:n,enabled:s.enabled,stacks:s.availableAmount(),timeRemaining:l.toFixed(3),className:s.availableAmountIncludingDisabled()>0?"":"hidden"}}makeCommonTimerless(t,n=!0){return{rscType:t,onSelf:n,enabled:!0,stacks:this.state.resources.get(t).availableAmount(),className:this.state.hasResourceAvailable(t)?"":"hidden"}}jobSpecificOtherTargetedBuffViewProps(){return[]}getAllOtherTargetedBuffViewProps(){const t=this.state.job,n=[];return Ot[t].role==="TANK"&&n.push(this.makeCommonTimer("REPRISAL",!1)),Ot[t].role==="MELEE"&&n.push(this.makeCommonTimer("FEINT",!1)),Ot[t].role==="CASTER"&&n.push(this.makeCommonTimer("ADDLE",!1)),[...this.jobSpecificOtherTargetedBuffViewProps(),...n]}jobSpecificSelfTargetedBuffViewProps(){return[]}getAllSelfTargetedBuffViewProps(){const t=this.state.job,n=this.state.resources,l=[];if(Ot[t].role==="TANK"){l.push(...["RAMPART","SHIELD_WALL","STRONGHOLD"].map(c=>this.makeCommonTimer(c)));const s=Ot[t].limitBreakBuff??"UNKNOWN";s&&l.push(this.makeCommonTimer(s))}return Ot[t].role==="MELEE"&&l.push(...["TRUE_NORTH","BLOODBATH"].map(s=>this.makeCommonTimer(s))),["TANK","MELEE","RANGED"].includes(Ot[t].role)&&l.push(this.makeCommonTimer("ARMS_LENGTH")),["HEALER","CASTER"].includes(Ot[t].role)&&l.push(...["SWIFTCAST","LUCID_DREAMING","SURECAST"].map(s=>this.makeCommonTimer(s))),l.push(this.makeCommonTimer("TINCTURE"),this.makeCommonTimer("SPRINT")),Ot[t].role==="MELEE"&&l.push(...["REAR_POSITIONAL","FLANK_POSITIONAL"].map(s=>({rscType:s,onSelf:!0,enabled:n.get(s).enabled,stacks:1,className:""}))),(Ot[t].role==="TANK"||Ot[t].role==="MELEE")&&l.push(...["AUTOS_ENGAGED"].map(s=>({rscType:s,onSelf:!0,enabled:n.get(s).available(1),stacks:1,className:""}))),[...this.jobSpecificSelfTargetedBuffViewProps(),...l]}jobSpecificResourceViewProps(t){return[]}getAllResourceViewProps(t){if(!Ot[this.state.job].usesMp)return this.jobSpecificResourceViewProps(t);const n=this.state.resources,l=n.timeTillReady("MANA"),s=n.get("MANA").availableAmount();return[{kind:"bar",name:"MP",color:t.resources.mana,progress:s/1e4,valueString:Math.floor(s)+"/10000"},{kind:"bar",name:p({en:"MP tick",zh:"跳蓝时间",ja:"MPティック"}),color:t.resources.manaTick,progress:1-l/3,valueString:(3-l).toFixed(3)+"/3"},...this.jobSpecificResourceViewProps(t)]}statusLayoutFn(t){return u.jsxs(u.Fragment,{children:[u.jsxs("div",{style:{display:"inline-block",verticalAlign:"top",width:"50%",height:"100%"},children:[u.jsxs("span",{style:{display:"block",marginBottom:10},children:[p({en:"time: ",zh:"战斗时间：",ja:"経過時間："}),`${ft.displayTime(t.time,3)} (${t.time.toFixed(3)})`]}),t.resources?u.jsx(IC,{data:{level:t.level,resources:t.resources}}):void 0]}),u.jsxs("div",{style:{position:"relative",display:"inline-block",float:"right",width:"50%"},children:[t.resourceLocks?u.jsx(pC,{data:t.resourceLocks}):void 0,u.jsx(Gf,{data:t.enemyBuffs,style:{marginBottom:"3em"}}),u.jsx(Gf,{data:t.selfBuffs})]})]})}}function WU(e){return Pr({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"},child:[]}]})(e)}function qU(e){return Pr({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"},child:[]}]})(e)}let Vm=e=>{};function bC(e){return`
		table {
			border-collapse: collapse;
			width: 100%;
		}
		th, td {
			text-align: center;
			padding: 0.15em;
			border: 1px solid ${e};
			width: 33%
		}
	`}function lr(e,t,n,l){let s=parseFloat(n),c=parseFloat(l);if(isNaN(s)||isNaN(c))return"n/a";let d=At.preTaxCastTime(e,s,t);return(At.afterFpsTax(c,d)-d+At.afterFpsTax(c,gN)).toFixed(3)}function XU(e){let t=Ut(e.job,e.override.type),n;const l=Wa(e.override.type);if(t.isCoolDown)n=p({en:l+" full in "+e.override.timeTillFullOrDrop+"s",zh:`${l}将在${e.override.timeTillFullOrDrop}秒后转好`});else{n=l;const c=p({en:" (",zh:"（"}),d=p({en:") ",zh:"）"});e.override.type==="LEY_LINES"&&(n+=c+(e.override.effectOrTimerEnabled?p({en:"enabled",zh:"生效中"}):p({en:"disabled",zh:"未生效"}))+d),t.maxValue>1&&(n+=p({en:` (amount: ${e.override.stacks})`,zh:`（数量：${e.override.stacks}）`})),t.maxTimeout>=0&&(e.override.type==="POLYGLOT"?e.override.timeTillFullOrDrop>0&&(n+=p({en:` next stack ready in ${e.override.timeTillFullOrDrop}s`,zh:`距下一层${e.override.timeTillFullOrDrop}秒`})):e.override.effectOrTimerEnabled&&(n+=p({en:` drops in ${e.override.timeTillFullOrDrop}s`,zh:`将在${e.override.timeTillFullOrDrop}秒后消失`})))}n+=" ";let s;if(e.deleteFn){const c=e.deleteFn;s=u.jsx(os,{content:"[x]",onClickFn:d=>{c(e.override.type)}})}return u.jsxs("div",{style:{marginTop:10,color:"mediumpurple"},children:[n,s]})}let Wm=()=>{};function ZU(e){const[,t]=C.useReducer(v=>v+1,0);C.useEffect(()=>(Wm=t,()=>{Wm=()=>{}}),[]);let n=p({en:"Unlike GCDs that have 2 digits of precision, cast times have 3. See About this tool/Implementation notes.",zh:"不同于GCD那样精确到小数点后2位，咏唱时间会精确到小数点后3位。详见 关于/实现细节"}),l=v=>O.gameConfig.adjustedCastTime(v).toFixed(3),s=v=>{let U=O.gameConfig.adjustedCastTime(v);return O.gameConfig.getAfterTaxCastTime(U).toFixed(3)},c=u.jsxs("div",{children:[u.jsx("style",{children:bC(kt().bgHighContrast)}),u.jsx("table",{children:u.jsxs("tbody",{children:[u.jsxs("tr",{children:[u.jsx("th",{children:p({en:"Base",zh:"基准"})}),u.jsx("th",{children:p({en:"Pre-tax",zh:"税前"})}),u.jsx("th",{children:p({en:"After-tax",zh:"税后"})})]}),u.jsxs("tr",{children:[u.jsx("td",{children:"2.5"}),u.jsx("td",{children:l(2.5)}),u.jsx("td",{children:s(2.5)})]}),u.jsxs("tr",{children:[u.jsx("td",{children:"2.8"}),u.jsx("td",{children:l(2.8)}),u.jsx("td",{children:s(2.8)})]}),u.jsxs("tr",{children:[u.jsx("td",{children:"3.0"}),u.jsx("td",{children:l(3)}),u.jsx("td",{children:s(3)})]}),u.jsxs("tr",{children:[u.jsx("td",{children:"3.5"}),u.jsx("td",{children:l(3.5)}),u.jsx("td",{children:s(3.5)})]}),u.jsxs("tr",{children:[u.jsx("td",{children:"4.0"}),u.jsx("td",{children:l(4)}),u.jsx("td",{children:s(4)})]})]})})]}),d=O.game.lucidTickOffset.toFixed(3),f=p({en:"the random time offset of lucid dreaming ticks relative to mp ticks",zh:"醒梦buff期间，每次跳蓝后多久跳醒梦（由随机种子决定）"});const E=O.game.dotTickOffset.toFixed(3);let A=p({en:"the random time offset of DoT ticks relative to mp ticks",zh:"雷DoT期间，每次跳蓝后多久跳雷（由随机种子决定）"}),R=O.gameConfig.procMode,T=O.gameConfig.initialResourceOverrides.length;const S=O.gameConfig.legacy_casterTax;let g=p({en:`WARNING: this record was created in an earlier version of XIV in the Shell and uses the deprecated caster tax of ${S}s instead of calculating from your FPS input below. Hover for details: `,zh:`警告：此时间轴文件创建于一个更早版本的排轴器，因此计算读条时间时使用的是当时手动输入的读条税${S}秒（现已过时），而非由下方的“帧率”和“读条时间修正”计算得来。更多信息：`}),I=kt().warning,b=(v,U)=>{const H=kN[v];if(H.warningContent)return u.jsx("p",{style:{color:U},children:p(H.warningContent)})},y=p({en:u.jsxs("div",{children:[u.jsx("div",{className:"paragraph",children:"The caster tax config is now replaced by 0.1s + FPS tax and is more precise. You can read more about FPS tax in the Github repository wiki's implementation notes section."}),u.jsx("div",{className:"paragraph",style:{color:I},children:"You are strongly encouraged to create a new record (in another timeline slot or from 'apply and reset') and migrate your fight plan. Support for loading legacy files might drop in the future."})]}),zh:u.jsxs("div",{children:[u.jsx("div",{className:"paragraph",children:"现在的“读条税”由固定的0.1s加自动计算的帧率税构成，模拟结果也更精确。有关帧率税的更多信息详见 关于/实现细节。"}),u.jsx("div",{className:"paragraph",style:{color:I},children:"排轴器今后的更新可能会导致无法加载过时的文件，所以强烈建议将此时间轴迁移到一个新建的存档中（添加时间轴，或者应用并重置时间轴）。"})]})}),M=u.jsxs("p",{style:{color:I},children:[g,u.jsx(at,{topic:"legacy-caster-tax",content:y})]});return u.jsxs("div",{style:{textDecoration:e.dirty?"line-through":"none",marginLeft:5,paddingLeft:10,borderLeft:"1px solid "+kt().bgHighContrast},children:[O.gameConfig.shellVersion<eo.FpsTax?M:void 0,b(Ot[e.job].implementationLevel,I),[...Kn,...Yn].includes(e.job)&&u.jsxs("div",{children:[p({en:"Lucid tick offset ",zh:"醒梦&跳蓝时间差 "}),u.jsx(at,{topic:"lucidTickOffset",content:f}),": ",d]}),O.game.dotResources.length>0&&u.jsxs("div",{children:[p({en:"DoT tick offset ",zh:"跳雷&跳蓝时间差 "}),u.jsx(at,{topic:"dotTickOffset",content:A}),": ",E]}),e.job==="SAM"&&u.jsx(u.Fragment,{children:u.jsxs("div",{children:[p({en:"Fuka GCD",zh:"风花GCD"}),":"," ",O.gameConfig.adjustedSksGCD(2.5,O.game.getFukaModifier()).toFixed(2)]})}),e.job==="BLM"?u.jsx(Jo,{title:"castTimesTable",titleNode:u.jsxs("span",{style:{textDecoration:e.dirty?"line-through":"none"},children:[p({en:"Cast times table",zh:"咏唱时间表"})," ",u.jsx(at,{topic:"castTimesTable",content:n})]}),defaultShow:!1,content:c}):void 0,u.jsxs("p",{children:[p({en:"Procs",zh:"随机数模式"}),": ",R]}),T>0&&u.jsx("p",{children:p({en:`${T} initial resource override(s)`,zh:`${T}项初始资源覆盖`})})]})}class QU extends mt.Component{constructor(n){super(n);j(this,"state");j(this,"setTickMode");j(this,"setTimeScale");j(this,"loadSettings");j(this,"saveSettings");this.saveSettings=s=>{let c=JSON.stringify({tickMode:s.tickMode,timeScale:s.timeScale});aa("playbackSettings",c)},this.loadSettings=()=>{let s=ha("playbackSettings");if(s)return JSON.parse(s)},this.setTickMode=s=>{if(!s||!s.target||isNaN(parseInt(s.target.value)))return;this.setState({tickMode:parseInt(s.target.value)});let c=parseInt(s.target.value);isNaN(c)||(O.setTimeControlSettings({tickMode:c,timeScale:this.state.timeScale}),this.saveSettings({tickMode:c,timeScale:this.state.timeScale}))},this.setTimeScale=s=>{this.setState({timeScale:s});let c=parseFloat(s);isNaN(c)||(O.setTimeControlSettings({tickMode:this.state.tickMode,timeScale:c}),this.saveSettings({tickMode:this.state.tickMode,timeScale:c}))};let l=this.loadSettings();l?this.state={tickMode:l.tickMode,timeScale:l.timeScale}:this.state={tickMode:1,timeScale:2}}componentDidMount(){O.setTimeControlSettings({tickMode:this.state.tickMode,timeScale:this.state.timeScale})}render(){let n={position:"relative",top:3,marginRight:"0.75em"},l={display:"inline-block",marginRight:"0.5em"};return u.jsxs("div",{children:[u.jsxs("p",{children:[u.jsxs("label",{style:l,children:[u.jsx("input",{style:n,type:"radio",onChange:this.setTickMode,value:wn.RealTimeAutoPause,checked:this.state.tickMode===wn.RealTimeAutoPause,name:"tick mode"}),p({en:"real-time auto pause",zh:"实时(带自动暂停）"})]}),u.jsx(at,{topic:"ctrl-realTimeAutoPause",content:u.jsxs("div",{className:"toolTip",children:[p({en:u.jsx("div",{className:"paragraph",children:"*Recommended*"}),zh:u.jsx("div",{className:"paragraph",children:"*推荐设置*"})}),p({en:u.jsxs("div",{className:"paragraph",children:["- click to use a skill. if the skill is on cooldown, or you're in an animation lock, then the simulation will automatically skip ahead to when the skill can be used again",u.jsx("br",{}),"- animation locks and cast bars will play out in sped-up real time until done"]}),zh:u.jsx("div",{className:"paragraph",children:"- 点击图标使用技能; 战斗时间会按下方设置的倍速自动前进直到可释放下一个技能。如果点击的技能CD没有转好，模拟会自动地快进到它CD转好并重试。"})})]})}),u.jsx("br",{}),u.jsxs("label",{style:l,children:[u.jsx("input",{style:n,type:"radio",onChange:this.setTickMode,value:wn.Manual,checked:this.state.tickMode===wn.Manual,name:"tick mode"}),p({en:"manual",zh:"手动"})]}),u.jsx(at,{topic:"ctrl-manual",content:u.jsx("div",{className:"toolTip",children:p({en:u.jsxs("div",{className:"paragraph",children:["- click to use a skill. if the skill is on cooldown, or you're in an animation lock, then the simulation will automatically skip ahead to when the skill can be used again",u.jsx("br",{}),"- animation locks and cast times are skipped immediately"]}),zh:u.jsx("div",{className:"paragraph",children:"- 点击图标使用技能; 战斗时间会自动快进至可释放下一个技能。如果点击的技能CD没有转好，模拟会自动地快进到它CD转好并重试。"})})})})]}),u.jsx(Gt,{defaultValue:`${this.state.timeScale}`,description:u.jsxs("span",{children:[p({en:"time scale ",zh:"倍速 "}),u.jsx(at,{topic:"timeScale",content:u.jsx("div",{children:p({en:"rate at which game time advances automatically (aka when in real-time)",zh:"战斗时间自动前进的速度"})})}),":"," "]}),onChange:this.setTimeScale})]})}}var zn,qm,DC,yC,vC,MC;class OC extends mt.Component{constructor(n){super(n);Pe(this,zn);j(this,"state");j(this,"updateTaxPreview");j(this,"updateSksTaxPreview");j(this,"handleSubmit");j(this,"setJob");j(this,"importGear");j(this,"setGearImportLink");j(this,"setSpellSpeed");j(this,"setSkillSpeed");j(this,"setLevel");j(this,"setCriticalHit");j(this,"setDirectHit");j(this,"setDetermination");j(this,"setPiety");j(this,"setAnimationLock");j(this,"setFps");j(this,"setGcdSkillCorrection");j(this,"setTimeTillFirstManaTick");j(this,"setCountdown");j(this,"setRandomSeed");j(this,"setProcMode");j(this,"setOverrideTimer");j(this,"setOverrideStacks");j(this,"setOverrideEnabled");j(this,"deleteResourceOverride");j(this,"removeImportedField");this.state={job:"BLM",shellVersion:Qf.version,gearImportLink:"",imported:!1,importedFields:[],level:`${wt.lvl100}`,spellSpeed:"0",skillSpeed:"0",criticalHit:"0",directHit:"0",determination:"0",piety:"0",animationLock:"0",fps:"0",gcdSkillCorrection:"0",timeTillFirstManaTick:"0",countdown:"0",randomSeed:"",procMode:Kt.RNG,initialResourceOverrides:[],selectedOverrideResource:"MANA",overrideTimer:"0",overrideStacks:"0",overrideEnabled:!0,dirty:!1,b1TaxPreview:"n/a",gcdPreview:"n/a",taxedGcdPreview:"n/a",sksGcdPreview:"n/a",taxedSksGcdPreview:"n/a"},this.updateTaxPreview=(l,s,c)=>{let d=lr(parseFloat(c),2.5,l,s);const{gcdStr:f,taxedGcdStr:E}=this.getTaxPreview(l,s,c);this.setState({b1TaxPreview:d,gcdPreview:f,taxedGcdPreview:E})},this.updateSksTaxPreview=(l,s,c)=>{const{gcdStr:d,taxedGcdStr:f}=this.getTaxPreview(l,s,c);this.setState({sksGcdPreview:d,taxedSksGcdPreview:f})},this.handleSubmit=l=>{if(_e(this,zn,DC).call(this)){let s=this.state.randomSeed;if(s.length===0){for(let d=0;d<4;d++)s+=Math.floor(Math.random()*10).toString();this.setState({randomSeed:s})}let c={...this.state,randomSeed:s};this.setConfigAndRestart(c),this.setState({dirty:!1,imported:!1,importedFields:[]}),O.scrollToTime()}l.preventDefault()},this.setJob=l=>{l.target.value!==this.state.job&&this.setState({initialResourceOverrides:[],dirty:!0}),this.setState({job:l.target.value,dirty:!0}),this.removeImportedField("job"),this.updateTaxPreview(this.state.spellSpeed,this.state.fps,this.state.level),this.updateSksTaxPreview(this.state.skillSpeed,this.state.fps,this.state.level)},this.setGearImportLink=l=>{this.setState({gearImportLink:l.target.value})},this.importGear=async l=>{l.preventDefault();const s=URL.parse(this.state.gearImportLink),c=new Headers;try{if(s&&s.hostname==="etro.gg"){const d=s.pathname.split("/");if(d[1]!=="gearset"&&d.length!==3)throw new Error("Invalid etro gearset link (hover ? in URL input box for details)");c.append("Content-Type","application/json");const f=await fetch("https://etro.gg/api/gearsets/"+d[2],{method:"GET",headers:c});if(f.ok){const E=await f.json(),A=new Map(E.totalParams.map(I=>[I.name,I.value]));if(!(E.jobAbbrev in Ot))throw new Error("Imported gearset was for a job ("+E.jobAbbrev+") that XIV in the Shell doesn't support");const R=At.getSubstatBase(parseFloat(E.level)).toString(),T=A.get("SPS")??R,S=A.get("SKS")??R,g=["job","level","criticalHit","directHit","determination"];A.has("SPS")&&g.push("spellSpeed"),A.has("SKS")&&g.push("skillSpeed"),A.has("PIE")&&g.push("piety"),this.setState({job:E.jobAbbrev,level:E.level,spellSpeed:T,skillSpeed:S,criticalHit:A.get("CRT"),directHit:A.get("DH"),determination:A.get("DET"),piety:A.get("PIE"),imported:!0,importedFields:g,dirty:!0}),this.updateTaxPreview(T,this.state.fps,E.level),this.updateSksTaxPreview(S,this.state.fps,E.level)}else throw console.error(f),new Error("etro load failed (please check your link)")}else if(s&&s.hostname==="xivgear.app"){const d=s.searchParams.get("page");if(!d)throw new Error("xivgear link must be to a specific set (hover ? in URL input box for details)");const f=d.startsWith("sl|")?d.substr(3):d;c.append("Content-Type","application/json");const E=await fetch("https://api.xivgear.app/fulldata/"+f,{method:"GET",headers:c});if(E.ok){const A=await E.json();if(!(A.job in Ot))throw new Error("Imported gearset was for a job ("+A.job+") that XIV in the Shell doesn't support");const R=A.sets[0].computedStats;this.setState({job:A.job,level:A.level,spellSpeed:R.spellspeed,skillSpeed:R.skillspeed,criticalHit:R.crit,directHit:R.dhit,determination:R.determination,piety:R.piety,imported:!0,importedFields:["job","level","spellSpeed","skillSpeed","criticalHit","directHit","determination","piety"],dirty:!0}),this.updateTaxPreview(R.spellspeed.toString(),this.state.fps,A.level)}else throw console.error("xivgear load failed: "+E),new Error("xivgear load failed (please check your link)")}else throw new Error("Invalid gearset link (must be from etro.gg or xivgear.app)")}catch(d){console.error(d),window.alert(d.message)}},this.setSpellSpeed=l=>{this.setState({spellSpeed:l,dirty:!0}),this.removeImportedField("spellSpeed"),this.updateTaxPreview(l,this.state.fps,this.state.level)},this.setSkillSpeed=l=>{this.setState({skillSpeed:l,dirty:!0}),this.removeImportedField("skillSpeed"),this.updateSksTaxPreview(l,this.state.fps,this.state.level)},this.setLevel=l=>{this.setState({level:l.target.value,dirty:!0}),this.removeImportedField("level"),this.updateTaxPreview(this.state.spellSpeed,this.state.fps,l.target.value),this.updateSksTaxPreview(this.state.skillSpeed,this.state.fps,this.state.level)},this.setCriticalHit=l=>{this.setState({criticalHit:l,dirty:!0}),this.removeImportedField("criticalHit")},this.setDirectHit=l=>{this.setState({directHit:l,dirty:!0}),this.removeImportedField("directHit")},this.setDetermination=l=>{this.setState({determination:l,dirty:!0}),this.removeImportedField("determination")},this.setPiety=l=>{this.setState({piety:l,dirty:!0}),this.removeImportedField("piety")},this.setAnimationLock=l=>{this.setState({animationLock:l,dirty:!0})},this.setFps=l=>{this.setState({fps:l,dirty:!0}),this.updateTaxPreview(this.state.spellSpeed,l,this.state.level)},this.setGcdSkillCorrection=l=>{this.setState({gcdSkillCorrection:l,dirty:!0})},this.setTimeTillFirstManaTick=l=>{this.setState({timeTillFirstManaTick:l,dirty:!0})},this.setCountdown=l=>{this.setState({countdown:l,dirty:!0})},this.setRandomSeed=l=>{this.setState({randomSeed:l,dirty:!0})},this.setProcMode=l=>{this.setState({procMode:l.target.value,dirty:!0})},this.setOverrideTimer=l=>{this.setState({overrideTimer:l})},this.setOverrideStacks=l=>{this.setState({overrideStacks:l})},this.setOverrideEnabled=l=>{this.setState({overrideEnabled:l.target.checked})},this.deleteResourceOverride=l=>{let s=this.state.initialResourceOverrides;for(let c=0;c<s.length;c++)if(s[c].type===l){s.splice(c,1);break}this.setState({initialResourceOverrides:s,dirty:!0})},this.removeImportedField=l=>{const s=this.state.importedFields.indexOf(l);if(s>=0){const c=this.state.importedFields;c.splice(s,1),this.setState({importedFields:c})}}}getTaxPreview(n,l,s){let c=parseFloat(s),d=parseFloat(n),f=parseFloat(l),E,A;if(isNaN(c)||isNaN(d)||isNaN(f)||d<400)E="n/a",A="n/a";else{let R=At.preTaxGcd(c,d,2.5);E=R.toFixed(2),A=At.afterFpsTax(f,R).toFixed(3)}return{gcdStr:E,taxedGcdStr:A}}componentDidMount(){Vm=n=>{this.setState(n);let l=At.preTaxGcd(n.level,n.spellSpeed,2.5),s=At.preTaxGcd(n.level,n.skillSpeed,2.5);this.setState({dirty:!1,imported:!1,importedFields:[],b1TaxPreview:lr(n.level,2.5,`${n.spellSpeed}`,`${n.fps}`),gcdPreview:l.toFixed(2),taxedGcdPreview:At.afterFpsTax(n.fps,l).toFixed(3),sksGcdPreview:s.toFixed(2),sksTaxedGcdPreview:At.afterFpsTax(n.fps,s).toFixed(3),selectedOverrideResource:_e(this,zn,qm).call(this,n.initialResourceOverrides)}),Wm()}}setConfigAndRestart(n){if(isNaN(parseFloat(n.spellSpeed))||isNaN(parseFloat(n.skillSpeed))||isNaN(parseFloat(n.criticalHit))||isNaN(parseFloat(n.directHit))||isNaN(parseFloat(n.determination))||isNaN(parseFloat(n.animationLock))||isNaN(parseFloat(n.fps))||isNaN(parseFloat(n.gcdSkillCorrection))||isNaN(parseFloat(n.timeTillFirstManaTick))||isNaN(parseFloat(n.countdown))||isNaN(parseFloat(n.level))){window.alert("Some config fields are not numbers!");return}if(n.initialResourceOverrides===void 0&&(n.initialResourceOverrides=[]),!(n.job in Ot)){window.alert("Invalid job: "+n.job);return}O.setConfigAndRestart({job:n.job,level:parseFloat(n.level),spellSpeed:parseFloat(n.spellSpeed),skillSpeed:parseFloat(n.skillSpeed),criticalHit:parseFloat(n.criticalHit),directHit:parseFloat(n.directHit),determination:parseFloat(n.determination),piety:parseFloat(n.piety),animationLock:parseFloat(n.animationLock),fps:parseFloat(n.fps),gcdSkillCorrection:parseFloat(n.gcdSkillCorrection),timeTillFirstManaTick:parseFloat(n.timeTillFirstManaTick),countdown:parseFloat(n.countdown),randomSeed:n.randomSeed.trim(),procMode:n.procMode,initialResourceOverrides:n.initialResourceOverrides}),O.updateAllDisplay()}componentWillUnmount(){Vm=n=>{}}render(){let n=ki(this.context),l=this.state.shellVersion>=eo.FpsTax?n.text:n.warning,s=parseFloat(this.state.level),c=u.jsxs("div",{children:[u.jsx("style",{children:bC(n.bgHighContrast)}),u.jsx("div",{style:{marginBottom:10},children:p({en:"Preview numbers based on your current spell speed and FPS input:",zh:"根据当前输入的咏速和帧率，你将得到如下读条+帧率税："})}),u.jsx("table",{children:u.jsxs("tbody",{children:[u.jsxs("tr",{children:[u.jsx("th",{children:p({en:"Base cast time",zh:"基础读条时间"})}),u.jsx("th",{children:p({en:"Caster + FPS tax",zh:"读条税+帧率税"})})]}),u.jsxs("tr",{children:[u.jsx("td",{children:"2.5"}),u.jsx("td",{children:this.state.b1TaxPreview})]}),u.jsxs("tr",{children:[u.jsx("td",{children:"2.8"}),u.jsx("td",{children:lr(s,2.8,this.state.spellSpeed,this.state.fps)})]}),u.jsxs("tr",{children:[u.jsx("td",{children:"3.0"}),u.jsx("td",{children:lr(s,3,this.state.spellSpeed,this.state.fps)})]}),u.jsxs("tr",{children:[u.jsx("td",{children:"3.5"}),u.jsx("td",{children:lr(s,3.5,this.state.spellSpeed,this.state.fps)})]}),u.jsxs("tr",{children:[u.jsx("td",{children:"4.0"}),u.jsx("td",{children:lr(s,4,this.state.spellSpeed,this.state.fps)})]})]})})]});const d=u.jsx("a",{href:"https://etro.gg",target:"_blank",rel:"noreferrer",children:"etro"}),f=u.jsx("a",{href:"https://xivgear.app",target:"_blank",rel:"noreferrer",children:"xivgear"}),E=u.jsxs("form",{onSubmit:this.importGear,children:[p({en:u.jsxs("span",{children:["Load stats from ",d,"/",f,":"," "]}),zh:u.jsxs("span",{children:["从",d,"或",f,"导入套装："]})}),u.jsx(at,{topic:"gearImport",content:u.jsxs(u.Fragment,{children:[u.jsx("p",{children:p({en:u.jsxs("span",{children:["Enter and ",u.jsx(fa,{text:"Load"})," a link to a gearset from xivgear.app or etro.gg, edit the rest of config, then"," ",u.jsx(fa,{text:"apply and reset"}),"."]}),zh:u.jsxs("span",{children:["输入xivgear.app或etro.gg的套装链接并",u.jsx(fa,{text:"加载"}),"，调整其余角色属性，然后",u.jsx(fa,{text:"应用并重置时间轴"}),"。"]})})}),u.jsx("p",{children:p({en:"etro: Copy/paste the link to the set (example: https://etro.gg/gearset/e13d5960-4794-4dc4-b273-24ecfed6745e)",zh:"etro：复制粘贴套装链接（例：https://etro.gg/gearset/e13d5960-4794-4dc4-b273-24ecfed6745e）"})}),u.jsx("p",{children:p({en:'xivgear: At the top of the page, click "Export" -> "Selected Set" -> "Link to This Set" -> "Generate" (example: https://xivgear.app/?page=sl%7C143f3245-c35b-4391-8b2b-db5cc1a8de9a)',zh:'xivgear：从页面顶端点击 "Export" -> "Selected Set" -> "Link to This Set" -> "Generate"（例：https://xivgear.app/?page=sl%7C143f3245-c35b-4391-8b2b-db5cc1a8de9a）'})})]})}),u.jsxs("div",{style:{position:"relative",marginTop:5},children:[u.jsx(Gt,{style:{display:"inline-block"},width:25,description:"",onChange:S=>{this.setState({gearImportLink:S})}}),u.jsx("span",{children:" "}),u.jsx("input",{style:{display:"inline-block"},type:"submit",value:p({en:"Load",zh:"加载"})}),u.jsx(WU,{style:{display:this.state.imported?"inline":"none",color:n.success,position:"relative",top:4,marginLeft:8}})]})]});let A=S=>this.state.importedFields.indexOf(S)>-1?n.success:n.text,R=u.jsxs("div",{style:{marginBottom:10},children:[u.jsx("span",{children:p({en:"job: ",zh:"职业："})}),u.jsx("select",{style:{outline:"none",color:A("job")},value:this.state.job,onChange:this.setJob,children:oo.filter(S=>Ot[S].implementationLevel!=="UNIMPLEMENTED").map(S=>{const g=Ot[S].implementationLevel;return g!=="LIVE"?u.jsx("option",{value:S,children:S+` (${p(kN[g].label??{en:""})})`},S):u.jsx("option",{value:S,children:S},S)})})]}),T=u.jsxs("div",{style:{marginBottom:16},children:[u.jsxs("div",{children:[u.jsx("span",{children:p({en:"level: ",zh:"等级："})}),u.jsxs("select",{style:{outline:"none",color:A("level")},value:this.state.level,onChange:this.setLevel,children:[u.jsx("option",{value:wt.lvl100,children:"100"},wt.lvl100),u.jsx("option",{value:wt.lvl90,children:"90"},wt.lvl90),u.jsx("option",{value:wt.lvl80,children:"80"},wt.lvl80),u.jsx("option",{value:wt.lvl70,children:"70"},wt.lvl70)]})]}),u.jsxs("div",{children:[u.jsx(Gt,{style:{display:"inline-block",color:A("spellSpeed")},defaultValue:this.state.spellSpeed,description:p({en:"spell speed: ",zh:"咏速："}),onChange:this.setSpellSpeed}),u.jsxs("span",{children:[" ","(GCD: ",this.state.gcdPreview," ",u.jsx(at,{topic:"gcdPreview",content:u.jsxs(u.Fragment,{children:[u.jsx("p",{children:p({en:"Preview of displayed GCD based on your spell speed.",zh:"当前咏速对应的游戏内显示的GCD."})}),u.jsx("p",{children:p({en:`Measured average GCD should be ${this.state.taxedGcdPreview} due to FPS tax`,zh:`由于帧率税的影响，测量得到的平均GCD为${this.state.taxedGcdPreview}`})})]})}),")"]})]}),u.jsxs("div",{children:[u.jsx(Gt,{style:{display:"inline-block",color:A("skillSpeed")},defaultValue:this.state.skillSpeed,description:p({en:"skill speed: ",zh:"技速："}),onChange:this.setSkillSpeed}),u.jsxs("span",{children:[" ","(GCD: ",this.state.sksGcdPreview," ",u.jsx(at,{topic:"sksGcdPreview",content:u.jsxs(u.Fragment,{children:[u.jsx("p",{children:p({en:"Preview of displayed GCD based on your skill speed.",zh:"当前技速对应的游戏内显示的GCD."})}),u.jsx("p",{children:p({en:`Measured average GCD should be ${this.state.taxedSksGcdPreview} due to FPS tax`,zh:`由于帧率税的影响，测量得到的平均GCD为${this.state.taxedSksGcdPreview}`})})]})}),")"]})]}),u.jsx(Gt,{style:{color:A("criticalHit")},defaultValue:this.state.criticalHit,description:p({en:"crit: ",zh:"暴击："}),onChange:this.setCriticalHit}),u.jsx(Gt,{style:{color:A("directHit")},defaultValue:this.state.directHit,description:p({en:"direct hit: ",zh:"直击："}),onChange:this.setDirectHit}),u.jsx(Gt,{style:{color:A("determination")},defaultValue:this.state.determination,description:p({en:"determination: ",zh:"信念："}),onChange:this.setDetermination}),u.jsx(Gt,{style:{color:A("piety")},defaultValue:this.state.piety,description:p({en:"piety: ",zh:"信仰："}),onChange:this.setPiety}),u.jsx(Gt,{defaultValue:this.state.animationLock,description:p({en:"animation lock: ",zh:"能力技后摇："}),onChange:this.setAnimationLock}),u.jsxs("div",{children:[u.jsx(Gt,{componentColor:l,style:{display:"inline-block"},defaultValue:this.state.fps,description:p({en:"FPS: ",zh:"帧率："}),onChange:this.setFps}),u.jsxs("span",{children:[" ","(",p({en:"2.5s total tax",zh:"2.5s读条+帧率税"}),":"," ",this.state.b1TaxPreview," ",u.jsx(at,{topic:"b1TaxPreview",content:c}),")"]})]}),u.jsx(Gt,{componentColor:l,defaultValue:this.state.gcdSkillCorrection,description:u.jsxs("span",{children:[p({en:"GCD correction",zh:"GCD时长修正"})," ",u.jsx(at,{topic:"cast-time-correction",content:p({en:"Leaving this at 0 will probably give you the most accurate simulation. But if you want to manually correct your GCD skill durations (including casts) for whatever reason, you can put a small number (can be negative)",zh:"正常情况下填0即能得到最精确的模拟结果。如果实在需要修正的话，这里输入的时长会被加到你的每个GCD技能（包括读条）耗时里（可以为负）"})}),":"," "]}),onChange:this.setGcdSkillCorrection}),u.jsx(Gt,{defaultValue:this.state.timeTillFirstManaTick,description:p({en:"time till first MP tick: ",zh:"距首次跳蓝时间："}),onChange:this.setTimeTillFirstManaTick}),u.jsx(Gt,{defaultValue:this.state.countdown,description:u.jsxs("span",{children:[p({en:"countdown ",zh:"倒数时间 "}),u.jsx(at,{topic:"countdown",content:p({en:"can use a negative countdown to start from a specific time of fight",zh:"可以是负数，时间轴会从战斗中途某个时间开始显示"})}),":"," "]}),onChange:this.setCountdown}),u.jsx(Gt,{defaultValue:this.state.randomSeed,description:u.jsxs("span",{children:[p({en:"random seed ",zh:"随机种子 "}),u.jsx(at,{topic:"randomSeed",content:p({en:"can be anything, or leave empty to get 4 random digits.",zh:"可以是任意字符串，或者留空，会获得4个随机数字"})}),":"," "]}),onChange:this.setRandomSeed}),u.jsxs("div",{children:[u.jsxs("span",{children:[p({en:"proc mode ",zh:"随机BUFF获取 "}),u.jsx(at,{topic:"procMode",content:p({en:"Default RNG: 40% Firestarter",zh:"RNG会像游戏内一样，相应技能40%概率获得火苗，Always则每次都会触发火苗，Never则从不触发。"})}),":"," "]}),u.jsxs("select",{style:{outline:"none"},value:this.state.procMode,onChange:this.setProcMode,children:[u.jsx("option",{value:Kt.RNG,children:"RNG"},Kt.RNG),u.jsx("option",{value:Kt.Never,children:"Never"},Kt.Never),u.jsx("option",{value:Kt.Always,children:"Always"},Kt.Always)]})]}),_e(this,zn,MC).call(this),u.jsxs("button",{onClick:this.handleSubmit,style:{width:"100%",fontWeight:this.state.dirty?"bold":"normal"},children:[p({en:"apply and reset",zh:"应用并重置时间轴"}),this.state.dirty?"*":""]})]});return u.jsxs("div",{style:{marginBottom:20},children:[E,u.jsx("br",{}),R,u.jsx(ZU,{job:O.getActiveJob(),dirty:this.state.dirty}),T,u.jsx("p",{children:p({en:"You can also import/export fights from/to local files at the bottom of the page.",zh:"页面底部有导入和导出战斗文件相关选项。"})})]})}}zn=new WeakSet,qm=function(n){let l="aba aba",s=new Set;n.forEach(c=>{s.add(c.type)});for(let c of El(this.state.job).keys())if(!s.has(c)){l=c;break}return l},DC=function(){let n=new Map;if(this.state.initialResourceOverrides.forEach(f=>{n.set(f.type,f)}),n.has("ASTRAL_FIRE")&&n.has("UMBRAL_ICE")){let f=n.get("ASTRAL_FIRE").stacks,E=n.get("UMBRAL_ICE").stacks;if(f>0&&E>0)return window.alert("shouldn't have both AF and UI stacks"),!1}let l=0,s=0,c=0;if(n.has("ASTRAL_FIRE")&&(l=n.get("ASTRAL_FIRE").stacks),n.has("UMBRAL_ICE")&&(s=n.get("UMBRAL_ICE").stacks),n.has("UMBRAL_HEART")&&(c=n.get("UMBRAL_HEART").stacks),c>0&&l===0&&s===0)return window.alert("since there's at least one UH stack, there should also be Enochian and AF or UI"),!1;let d=!1;return(l>0||s>0||c>0)&&(d=!0),n.has("POLYGLOT")&&n.get("POLYGLOT").timeTillFullOrDrop>0&&!d?(window.alert("since a timer for polyglot is set (time till next stack > 0), there must also be AF/UI"),!1):!0},yC=function(){let n=this.state.selectedOverrideResource,l=El(this.state.job).get(n),s=parseFloat(this.state.overrideTimer),c=parseInt(this.state.overrideStacks),d=this.state.overrideEnabled;if(n==="POLYGLOT"&&this.state.overrideTimer===""&&(s=0),isNaN(c)||isNaN(s)){window.alert("some inputs are not numbers!");return}let f;if(l.isCoolDown){let A=l.maxStacks*l.cdPerStack;if(s<0||s>A){window.alert("invalid input timeout (must be in range [0, "+A+"])");return}f={type:n,timeTillFullOrDrop:s,stacks:l.maxStacks>1?c:1,effectOrTimerEnabled:!0}}else{if((l.maxValue>1||l.maxValue===l.defaultValue)&&n!=="PARADOX"&&(c<0||c>l.maxValue)){window.alert("invalid input amount (must be in range [0, "+l.maxValue+"])");return}if(l.maxTimeout>=0&&(s<0||s>l.maxTimeout)){window.alert("invalid input timeout (must be in range [0, "+l.maxTimeout+"])");return}f={type:n,timeTillFullOrDrop:l.maxTimeout>=0?s:-1,stacks:l.maxValue>1||l.maxValue===l.defaultValue?c:1,effectOrTimerEnabled:n==="LEY_LINES"?d:!0}}let E=this.state.initialResourceOverrides;E.push(f),this.setState({initialResourceOverrides:E,dirty:!0})},vC=function(){const n=El(this.state.job);let l=new Set;this.state.initialResourceOverrides.forEach(R=>{l.add(R.type)});const s=[];for(let R of n.keys())l.has(R)||s.push({rsc:R,isCoolDown:n.get(R).isCoolDown?1:0});let c=s.sort((R,T)=>R.isCoolDown-T.isCoolDown).map((R,T)=>u.jsx("option",{value:R.rsc,children:Wa(R.rsc)},T)),d=this.state.selectedOverrideResource,f=n.get(d),E;if(f!==void 0){let R,T,S,g="-1",I,b="0",y;f.isCoolDown?(R=!0,T=!1,S=!1,g=this.state.overrideTimer,I=this.setOverrideTimer):(f.maxTimeout>=0?(R=!0,g=this.state.overrideTimer,I=this.setOverrideTimer):R=!1,f.maxValue>1||f.maxValue===f.defaultValue?(T=!0,b=this.state.overrideStacks,y=this.setOverrideStacks):T=!1,S=d==="LEY_LINES");let M;f.isCoolDown?M=p({en:"Time till full: ",zh:"距CD转好时间："}):d==="POLYGLOT"?M=p({en:"Time till next stack: ",zh:"距下一层时间："}):M=p({en:"Time till drop: ",zh:" 距状态消失时间："});let v=p({en:"enabled",zh:"生效中"});E=u.jsxs("div",{style:{margin:"6px 0"},children:[u.jsx("div",{hidden:!R,children:u.jsx(Gt,{description:M,defaultValue:g,onChange:I})}),u.jsx("div",{hidden:!T,children:u.jsx(Gt,{description:p({en:"Amount: ",zh:"数量："}),defaultValue:b,onChange:y})}),u.jsxs("div",{hidden:!S,children:[u.jsx("input",{style:{position:"relative",top:3,marginRight:5},type:"checkbox",checked:this.state.overrideEnabled,onChange:this.setOverrideEnabled}),u.jsx("span",{children:v})]})]})}const A=Jf(this.context,"bgMediumContrast");return u.jsx("div",{children:u.jsxs("form",{onSubmit:R=>{_e(this,zn,yC).call(this),this.setState({selectedOverrideResource:_e(this,zn,qm).call(this,this.state.initialResourceOverrides)}),R.preventDefault()},style:{marginTop:16,outline:"1px solid "+A,outlineOffset:6},children:[u.jsx("select",{value:this.state.selectedOverrideResource,onChange:R=>{R.target&&this.setState({selectedOverrideResource:R.target.value,overrideEnabled:R.target.value==="LEY_LINES"?this.state.overrideEnabled:!0})},children:c}),E,u.jsx("input",{type:"submit",value:p({en:"add override",zh:"应用此状态"})})]})})},MC=function(){let n=[];for(let l=0;l<this.state.initialResourceOverrides.length;l++){let s=this.state.initialResourceOverrides[l];n.push(u.jsx(XU,{job:this.state.job,override:s,deleteFn:this.deleteResourceOverride},l))}return u.jsx("div",{style:{marginTop:10},children:u.jsx(Jo,{title:"overrideInitialResources",titleNode:u.jsxs("span",{children:[p({en:"Override initial resources",zh:"指定初始资源"})," ",u.jsx(at,{topic:"overrideInitialResources",content:p({en:u.jsxs("div",{children:[u.jsx("div",{className:"paragraph",style:{color:"orangered"},children:u.jsx("b",{children:"Can create invalid game states. Go over Instructions/Troubleshoot first and use carefully at your own risk!"})}),u.jsx("div",{className:"paragraph",children:"Also, currently thunder dot buff created this way doesn't actually tick. It just shows the remaining buff timer."}),u.jsx("div",{className:"paragraph",children:"I would recommend saving settings (stats, lines presets, timeline markers etc.) to files first, in case invalid game states really mess up the tool and a complete reset is required."})]}),zh:u.jsxs("div",{children:[u.jsx("div",{className:"paragraph",style:{color:"orangered"},children:u.jsx("b",{children:"错误的初始资源可能会导致非法游戏状态。请在阅读工具顶部的使用说明/常见问题后慎重使用，并优先自行排查问题！"})}),u.jsx("div",{className:"paragraph",children:"另：当前靠初始资源覆盖添加的雷dot只显示剩余时间，不会结算伤害。"}),u.jsx("div",{className:"paragraph",children:"使用此功能时，请最好先下载保存各项数据（面板数值，技能轴，时间轴预设等），以防造成未知错误后排轴器重置导致的数据丢失。"})]})})})]}),content:u.jsxs("div",{children:[u.jsx("button",{onClick:l=>{this.setState({initialResourceOverrides:[],dirty:!0}),l.preventDefault()},children:p({en:"clear all overrides",zh:"清除所有指定初始资源"})}),n,_e(this,zn,vC).call(this)]})})})},j(OC,"contextType",jn);function LC(e){let t=oo[0],n=0;return oo.forEach(l=>{const s=e.reduce((c,d)=>n1(l,d)?c+1:c,0);s>n&&(t=l,n=s)}),t}var io,lf,HC;class $U{constructor(){Pe(this,io);j(this,"presetLines",[]);_e(this,io,HC).call(this)}serialized(){return{fileType:_i.SkillSequencePresets,presets:this.presetLines.map(({actions:t,job:n})=>t.serialized())}}deserializeAndAppend(t){for(let n of t.presets){const l=Lr.deserialize(n.actions);l.name=n.name;const s=l.actions.flatMap(c=>c.info.type===Qe.Skill?[c.info.skillName]:[]);this.addLine(l,n.job??LC(s))}}getLinesForJob(t){return this.presetLines.flatMap(({actions:n,job:l})=>l===t?[n]:[])}addLine(t,n){this.presetLines.push({actions:t,job:n}),ao(),_e(this,io,lf).call(this)}deleteLine(t){for(let n=0;n<this.presetLines.length;n++)if(this.presetLines[n].actions===t){this.presetLines.splice(n,1),ao(),_e(this,io,lf).call(this);return}console.assert(!1)}deleteAllLines(){this.presetLines=[],ao(),_e(this,io,lf).call(this)}}io=new WeakSet,lf=function(){aa("presetLines",JSON.stringify(this.serialized()))},HC=function(){let t=ha("presetLines");if(t!==null){let n=JSON.parse(t);return this.deserializeAndAppend(n),!0}return!1};const JU=new Set(["BLIZZARD","FIRE","BLIZZARD_II","FIRE_II","BLIZZARD_III","FIRE_III","FREEZE","FLARE","BLIZZARD_IV","FIRE_IV","DESPAIR","HIGH_FIRE_II","HIGH_BLIZZARD_II","FLARE_STAR"]),ek=new Set(["FOUL","XENOGLOSSY","PARADOX"]),Wl=new Set([]),Va=e=>O.getUntargetableMask()&&O.timeline.duringUntargetable(e),Hr=(e,t)=>O.getUntargetableMask()?O.timeline.getTargetableDurationBetween(e,t):t-e;function zo(e){return e.info.type===Qe.Skill&&O.game.dotSkills.includes(e.info.skillName)}function tk(e,t,n){console.assert(zo(e),`${e.getNameForMessage()} is not registered as a dot skill`);let l=e.getInitialPotency(),s={castTime:e.tmp_startLockTime?e.tmp_startLockTime-O.gameConfig.countdown:0,applicationTime:e.applicationTime?e.applicationTime-O.gameConfig.countdown:0,displayedModifiers:[],gap:0,override:0,mainPotencyHit:!0,baseMainPotency:0,baseDotPotency:0,initialHitCalculationModifiers:[],tickCalculationModifiers:[],totalNumTicks:0,numHitTicks:0,potencyWithoutPot:0,potPotency:0,partyBuffPotency:0,targetCount:e.targetCount,mainHitFalloff:(l==null?void 0:l.falloff)??0};s.gap=e.getOverTimeGap(t,"damage"),s.override=e.getOverTimeOverrideAmount(t,"damage"),s.baseMainPotency=(l==null?void 0:l.base)??0,s.initialHitCalculationModifiers=(l==null?void 0:l.modifiers)??[],s.mainPotencyHit=e.hitBoss(Va),s.tickCalculationModifiers=s.initialHitCalculationModifiers.filter(E=>E.source!==G.COMBO&&E.source!==G.POSITIONAL);for(let E=0;E<s.initialHitCalculationModifiers.length;E++){const A=s.initialHitCalculationModifiers[E].source;[G.ENO,G.FUGETSU,G.NO_MERCY,G.POWER_SURGE,G.LANCE_CHARGE,G.LIFE_OF_THE_DRAGON,G.BATTLE_LITANY,G.FIGHT_OR_FLIGHT,G.MOON_FLUTE,G.WHISTLE,G.BRISTLE,G.TINGLEA,G.TINGLEA].includes(A)&&s.displayedModifiers.push(A)}e.getDotPotencies(t).forEach((E,A)=>{E.hasResolved()&&(s.totalNumTicks++,s.baseDotPotency=E.base,E.hasHitBoss(Va)&&s.numHitTicks++)});let c=e.getPotency({tincturePotencyMultiplier:1,includePartyBuffs:!1,untargetable:Va,includeSplash:!0}).applied,d=e.getPotency({tincturePotencyMultiplier:O.getTincturePotencyMultiplier(),includePartyBuffs:!1,untargetable:Va,includeSplash:!0}).applied,f=e.getPotency({tincturePotencyMultiplier:O.getTincturePotencyMultiplier(),includePartyBuffs:!0,untargetable:Va,includeSplash:!0}).applied;return s.potencyWithoutPot=c,s.potPotency=d-c,s.partyBuffPotency=f-d,s}function ak(e){let t={basePotency:0,displayedModifiers:[],calculationModifiers:[],falloff:1,targetCount:1};if(e.info.type===Qe.Skill){const n=e.info.skillName,l=e.getInitialPotency();if(l)if(t.targetCount=e.targetCount,t.falloff=l.falloff??1,JU.has(n)){t.basePotency=l.base,t.calculationModifiers=l.modifiers;for(const s of l.modifiers){const c=s.source;if(c!==G.ENO&&c!==G.POT){t.displayedModifiers.push(c);break}}}else if(ek.has(n))for(const s of l.modifiers){const c=s.source;if(c===G.ENO){t.basePotency=l.base,t.displayedModifiers=[c],t.calculationModifiers=l.modifiers;break}}else if(zo(e))t.basePotency=l.base,e.info.targetCount=l.targetCount;else{t.basePotency=l.base;for(const s of l.modifiers){const c=s.source;c!==G.POT&&c!==G.NO_CDH&&(t.displayedModifiers.push(c),t.calculationModifiers.push(s))}}return t}else return console.assert(!1),t}function nk(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function ik(e,t){let n=ak(t),l={mainTableIndex:-1,expandedNode:n};for(let s=0;s<e.length;s++)if(t.info.type===Qe.Skill&&t.info.skillName===e[s].skillName&&nk(n.displayedModifiers,e[s].displayedModifiers)&&t.targetCount===e[s].targetCount)return l.mainTableIndex=s,l;return l}function oi(e){return!Wl.has(e)}function lk(){return Wl.size===0}function yI(e){e.include&&Wl.has(e.skillNameOrDoT)?(Wl.delete(e.skillNameOrDoT),e.skillNameOrDoT==="DoT"?O.game.dotSkills.forEach(t=>Wl.delete(t)):O.game.dotSkills.includes(e.skillNameOrDoT)&&Wl.delete("DoT")):(Wl.add(e.skillNameOrDoT),e.skillNameOrDoT!=="DoT"&&O.game.dotSkills.includes(e.skillNameOrDoT)&&Wl.add("DoT")),O.displayCurrentState(),O.updateStats()}function ok(e){let t={totalDuration:0,targetableDuration:0,potency:{applied:0,pending:0},gcdSkills:{applied:0,pending:0}},n=O.record.getFirstSelection(),l=O.record.getLastSelection();if(n&&l&&n.tmp_startLockTime!==void 0&&l.tmp_endLockTime!==void 0){t.totalDuration=l.tmp_endLockTime-n.tmp_startLockTime;let s=O.gameConfig.countdown;t.targetableDuration=Hr(n.tmp_startLockTime-s,l.tmp_endLockTime-s)}return O.record.iterateSelected(s=>{if(s.info.type===Qe.Skill&&!(s.info.skillName in hl)){const c=oi(s.info.skillName);O.game.skillsList.get(s.info.skillName).cdName==="cd_GCD"&&c&&(s.hitBoss(Va)?t.gcdSkills.applied++:s.resolved()||t.gcdSkills.pending++);let f=s.getPotency({tincturePotencyMultiplier:O.getTincturePotencyMultiplier(),untargetable:Va,includePartyBuffs:!0,excludeDoT:zo(s)&&!oi("DoT"),includeSplash:!0});c&&(t.potency.applied+=f.applied,t.potency.pending+=f.snapshottedButPending)}}),t}function sk(e){let t=$c.Normal;O.displayingUpToDateGameState||(t=$c.Historical),O.record.getFirstSelection()&&(t=$c.Selected);let n={applied:0,pending:0},l={applied:0,pending:0},s=[],c={totalPotencyWithoutPot:0,totalPotPotency:0,totalPartyBuffPotency:0};const d=new Map;let f=new Map;const E=A=>{if(A.info.type===Qe.Skill){const R=A.info.skillName,T=oi(R),S=R in hl;O.game.skillsList.get(R).cdName==="cd_GCD"&&T&&(A.hitBoss(Va)?l.applied++:A.resolved()||l.pending++);let I=A.getPotency({tincturePotencyMultiplier:O.getTincturePotencyMultiplier(),untargetable:Va,includePartyBuffs:!0,includeSplash:!0,excludeDoT:zo(A)&&!oi("DoT")});if(T&&!S&&(n.applied+=I.applied,n.pending+=I.snapshottedButPending),A.resolved()){let b=ik(s,A);b.mainTableIndex<0&&(s.push({skillName:R,displayedModifiers:b.expandedNode.displayedModifiers,basePotency:S?0:b.expandedNode.basePotency,calculationModifiers:b.expandedNode.calculationModifiers,usageCount:0,hitCount:0,totalPotencyWithoutPot:0,showPotency:A.anyPotencies(),potPotency:0,potCount:0,partyBuffPotency:0,falloff:b.expandedNode.falloff,targetCount:b.expandedNode.targetCount}),b.mainTableIndex=s.length-1);const y=A.hitBoss(Va);if(s[b.mainTableIndex].usageCount+=1,y&&(s[b.mainTableIndex].hitCount+=1),S)return;let M=A.getPotency({tincturePotencyMultiplier:1,untargetable:Va,includePartyBuffs:!1,excludeDoT:zo(A)&&!oi("DoT"),includeSplash:!0}).applied,v=A.getPotency({tincturePotencyMultiplier:O.getTincturePotencyMultiplier(),untargetable:Va,includePartyBuffs:!1,excludeDoT:zo(A)&&!oi("DoT"),includeSplash:!0}).applied,U=A.getPotency({tincturePotencyMultiplier:O.getTincturePotencyMultiplier(),untargetable:Va,includePartyBuffs:!0,excludeDoT:zo(A)&&!oi("DoT"),includeSplash:!0}).applied;s[b.mainTableIndex].totalPotencyWithoutPot+=M,s[b.mainTableIndex].potPotency+=v-M,s[b.mainTableIndex].partyBuffPotency+=U-v,y&&A.hasBuff(P.Tincture)&&(s[b.mainTableIndex].potCount+=1);let H=f.get(R)??0;H+=U,f.set(R,H),T&&(c.totalPotencyWithoutPot+=M,c.totalPotPotency+=v-M,c.totalPartyBuffPotency+=U-v),A.getAllDotPotencies().forEach((K,F)=>{let x=d.get(F);const re=O.game.excludedDoTs.includes(F);x||(x={tableRows:[],summary:{cumulativeGap:0,cumulativeOverride:0,timeSinceLastDoTDropped:0,totalTicks:0,maxTicks:O.getMaxTicks(O.game.time,F,re),dotCoverageTimeFraction:O.getDotCoverageTimeFraction(O.game.getDisplayTime(),F),totalPotencyWithoutPot:0,totalPotPotency:0,totalPartyBuffPotency:0},lastDoT:void 0},d.set(F,x));let ie=tk(A,F,x.lastDoT);x.tableRows.push(ie),x.lastDoT=A,x.summary.cumulativeGap+=ie.gap,x.summary.cumulativeOverride+=ie.override,x.summary.totalTicks+=ie.numHitTicks,x.summary.totalPotencyWithoutPot+=ie.potencyWithoutPot,x.summary.totalPotPotency+=ie.potPotency,x.summary.totalPartyBuffPotency+=ie.partyBuffPotency})}}};return t===$c.Selected?O.record.iterateSelected(E):O.record.iterateAll(E),d.forEach((A,R)=>{if(A.lastDoT){const T=A.lastDoT.applicationTime;console.assert(T!==void 0,`DoT node for ${R} was not resolved`);let S=T+O.game.getStatusDuration(R),g=Hr(S,O.game.getDisplayTime()),I=O.game.getDisplayTime()-S;I>0&&(A.summary.cumulativeGap+=g,A.summary.timeSinceLastDoTDropped=I)}else{let T=Hr(0,Math.max(0,O.game.getDisplayTime()));A.summary.cumulativeGap=T,A.summary.timeSinceLastDoTDropped=T}}),s.sort((A,R)=>{if(A.showPotency!==R.showPotency){let T=A.showPotency?1:0;return(R.showPotency?1:0)-T}else if(A.skillName!==R.skillName){let T=f.get(A.skillName)??0;return(f.get(R.skillName)??0)-T}else{if(A.targetCount!==R.targetCount)return R.targetCount-A.targetCount;if(A.displayedModifiers.length!==R.displayedModifiers.length)return R.displayedModifiers.length-A.displayedModifiers.length;for(let T=0;T<A.displayedModifiers.length;T++){let S=A.displayedModifiers[T]-R.displayedModifiers[T];if(S!==0)return S}return 0}}),{time:O.game.time,tinctureBuffPercentage:e.tinctureBuffPercentage,totalPotency:n,lastDamageApplicationTime:e.lastDamageApplicationTime,countdown:O.gameConfig.countdown,gcdSkills:l,mainTable:s,mainTableSummary:c,dotTables:d,mode:t}}var $c=(e=>(e[e.Normal=0]="Normal",e[e.Historical=1]="Historical",e[e.Selected=2]="Selected",e))($c||{});let Xm=e=>{},xC=e=>{};function vI(e){let t=$L(e.buff),n=Zy(e.buff);return u.jsx("span",{style:{borderRadius:2,border:"1px solid "+n,fontSize:11,marginRight:4,padding:"1px 4px",background:n+"1f"},children:u.jsx("b",{style:{color:n},children:t})})}function hm(e){let t=e.basePotency,n=e.basePotency.toFixed(2)+p({en:"(base)",zh:"(基础威力)"});e.explainUntargetable&&(n+=p({en:"(untargetable)",zh:"(不可选中)"}));let l="";if(e.calc.forEach(s=>{s.kind==="adder"&&s.additiveAmount>0&&(t+=s.additiveAmount,l+=" + "+s.additiveAmount+"("+Mp(s.source)+")")}),l&&(n="[ "+n+l+" ]"),e.calc.forEach(s=>{s.kind==="multiplier"&&s.potencyFactor!==1&&(t*=s.potencyFactor,n+=" × "+s.potencyFactor+"("+Mp(s.source)+")")}),e.targetCount&&e.falloff!==void 0&&e.targetCount>1){const s=1+(1-e.falloff)*(e.targetCount-1);n=`[ ${n} ] x ${s}(${e.targetCount}${p({en:" targets",zh:"个目标"})})`,t*=s}return u.jsxs("span",{style:{textDecoration:e.includeInStats?"none":"line-through"},children:[t.toFixed(2)," ",u.jsx(at,{topic:e.helpTopic,content:n})]})}function rk(){const[e,t]=C.useState("8"),n=s=>{t(s);const c=parseFloat(s);isNaN(c)||(O.setTinctureBuffPercentage(c),aa("tinctureBuffPercentage",s))};C.useEffect(()=>{const s=ha("tinctureBuffPercentage");s!==null&&n(s)},[]);const l=u.jsxs("span",{children:[p({en:"exclude damage when untargetable",zh:"Boss上天期间威力按0计算"})," ",u.jsx(at,{topic:"untargetableMask",content:u.jsxs("div",{children:[u.jsx("div",{className:"paragraph",children:p({en:"Having this checked will exclude damages from untargetable phases.",zh:"若勾选，统计将不包括Boss上天期间造成的伤害。"})}),u.jsx("div",{className:"paragraph",children:p({en:'You can mark up such phases using timeline markers of type "Untargetable".',zh:"可在下方用 “不可选中” 类型的时间轴标记来指定时间区间。"})}),u.jsx("div",{className:"paragraph",children:p({en:"This is just a statistics helper though. For example it doesn't prevent you from using skills when the boss is untargetable.",zh:"此功能只是一个统计用的工具，在标注了 “不可选中” 的时间里其实也能正常使用技能。"})})]})})]});return u.jsxs("div",{children:[u.jsx(Gt,{defaultValue:e,description:p({en:" tincture potency buff ",zh:"爆发药威力加成 "}),onChange:n,width:2,style:{display:"inline"}}),u.jsx("span",{children:"%"}),u.jsx(Qc,{uniqueName:"untargetableMask",label:l,onChange:s=>{O.setUntargetableMask(s)}})]})}const MI="0.375em 0.75em";class UC extends mt.Component{constructor(n){super(n);j(this,"selected",{totalDuration:0,targetableDuration:0,potency:{applied:0,pending:0},gcdSkills:{applied:0,pending:0}});j(this,"data",{time:0,tinctureBuffPercentage:0,countdown:0,totalPotency:{applied:0,pending:0},lastDamageApplicationTime:0,gcdSkills:{applied:0,pending:0},mainTable:[],mainTableSummary:{totalPotencyWithoutPot:0,totalPotPotency:0,totalPartyBuffPotency:0},dotTables:new Map,mode:0});Xm=l=>{this.data={...this.data,...l},this.forceUpdate()},xC=l=>{this.selected={...this.selected,...l},this.forceUpdate()}}componentWillUnmount(){Xm=n=>{}}render(){let n=ki(this.context);const l=lk(),s=p({en:": ",zh:"："}),c=p({en:" (",zh:"（"}),d=p({en:") ",zh:"）"}),f=l?"":p({en:" (checked only)",zh:"（勾选部分）"});let E=this.data.lastDamageApplicationTime-this.data.countdown,A=Hr(0,E),R=this.data.lastDamageApplicationTime>-this.data.countdown,T=R?E.toFixed(3).toString():"N/A",S=p({en:"Total potency",zh:"总威力"}),g=p({en:"Selected potency",zh:"选中威力"});if(this.data.tinctureBuffPercentage>0){let L=c+p({en:"pot +",zh:"爆发药 +"})+this.data.tinctureBuffPercentage+"%"+d;S+=L,g+=L}S+=f,g+=f,S+=s+this.data.totalPotency.applied.toFixed(2),g+=s+this.selected.potency.applied.toFixed(2),this.data.totalPotency.pending>0&&(S+=c+this.data.totalPotency.pending.toFixed(2)+p({en:" pending",zh:"未结算"})+d),this.selected.potency.pending>0&&(g+=c+this.selected.potency.pending.toFixed(2)+p({en:" pending",zh:"未结算"})+d);let I=p({en:"GCD skills",zh:"GCD技能"})+f+s+this.data.gcdSkills.applied,b=p({en:"Selected GCD skills",zh:"选中GCD技能"})+f+s+this.selected.gcdSkills.applied;this.data.gcdSkills.pending>0&&(I+=c+"+"+this.data.gcdSkills.pending+p({en:" not yet applied",zh:"未结算"})+d),this.selected.gcdSkills.pending>0&&(b+=c+"+"+this.selected.gcdSkills.pending+p({en:" not yet applied",zh:"未结算"})+d);const y=O.game.overTimeEffectGroups.filter(L=>L.reportName&&!L.isHealing).map(L=>{let W=L.reportName+p({en:" uptime",zh:"覆盖率"})+s,le=0,D=0,X=0;return L.groupedEffects.forEach(Z=>{const Y=this.data.dotTables.get(Z.effectName);Y&&(le+=Y.summary.dotCoverageTimeFraction,D+=Y.summary.totalTicks,X=Math.max(X,Y.summary.maxTicks))}),W+=(le*100).toFixed(2)+"%",W+=c+p({en:"ticks",zh:"跳雷次数"})+s+D+"/"+X+d,u.jsx("div",{children:W},`dot-uptime-${L.reportName}`)});let M,v=this.selected.targetableDuration>0;this.selected.totalDuration>0&&(M=u.jsxs("div",{style:{flex:1,color:n.accent},children:[u.jsxs("div",{children:[p({en:"Selected duration",zh:"选中时长"}),s,this.selected.totalDuration.toFixed(3)]}),u.jsx("div",{children:g}),u.jsxs("div",{children:[p({en:"Selected PPS",zh:"选中部分PPS"}),s,v?(this.selected.potency.applied/this.selected.targetableDuration).toFixed(2):"N/A"]}),u.jsx("div",{children:b})]}));let U=u.jsxs("div",{style:{display:"flex",marginBottom:10,flexDirection:"row"},children:[u.jsxs("div",{style:{flex:1},children:[u.jsxs("div",{style:{color:this.data.mode!==0?n.historical:n.text},children:[u.jsxs("div",{children:[p({en:"Last damage application time",zh:"最后伤害结算时间"}),s,T]}),u.jsx("div",{children:S}),u.jsxs("div",{children:["PPS"," ",u.jsx(at,{topic:"ppsNotes",content:u.jsxs("div",{className:"toolTip",children:[u.jsx("div",{className:"paragraph",children:p({en:"(total applied potency of checked skills) / (total targetable duration from 0s until last damage application time).",zh:"统计表中勾选技能的已结算总威力 / (从0s到最后伤害结算时间 - 不可选中总时长)。"})}),u.jsx("div",{className:"paragraph",children:p({en:"could be inaccurate if any damage happens before pull, or if some damage's not applied yet",zh:"如果有伤害在0s之前结算，或者当前有的伤害还未结算，那么此PPS可能会不准确"})})]})}),s,R?(this.data.totalPotency.applied/A).toFixed(2):"N/A"]}),u.jsx("div",{children:I}),y]}),u.jsxs("div",{style:{marginTop:10},children:[u.jsx(rk,{}),u.jsx(no,{fileFormat:ml.Csv,getContentFn:()=>({body:O.getDamageLogCsv()}),filename:"damage-log",displayName:p({en:"download detailed damage log as CSV file",zh:"下载详细伤害结算记录（CSV格式）"})})]})]}),M]}),H=function(L){return{verticalAlign:"middle",boxSizing:"border-box",display:"inline-block",width:L+"%",padding:MI}},K=function(L){return O.game.dotSkills.includes(L)},F=function(L){return K(L)?!0:["AUTOMATON_QUEEN","WILDFIRE",...Object.keys(hl)].includes(L)},x=function(L){const W=L.row.skillName===L.lastRowSkill;let le=[];le.push(L.row.displayedModifiers.map((Oe,Be)=>u.jsx(vI,{buff:Oe},Be)));const D=oi(L.row.skillName);let X=[];!W&&L.row.basePotency>0&&!(L.row.skillName in hl)&&X.push(u.jsx("input",{type:"checkbox",style:{position:"relative",top:2,marginRight:10},checked:D,onChange:()=>{yI({skillNameOrDoT:L.row.skillName,include:!D})}},"main")),!W&&K(L.row.skillName)&&X.push(u.jsx("input",{type:"checkbox",style:{position:"relative",top:2,marginRight:10},checked:oi("DoT"),onChange:()=>{yI({skillNameOrDoT:"DoT",include:!oi("DoT")})}},"dot"));let Z;W||(Z=u.jsxs("span",{children:[u.jsxs("span",{style:{textDecoration:D?"none":"line-through",color:D?n.text:n.bgHighContrast},children:[Sl(L.row.skillName)," ",K(L.row.skillName)?u.jsx(at,{topic:"potencyStats-thunder",content:p({en:"See table below for details",zh:"详见下方统计表格"})}):void 0]}),K(L.row.skillName)?u.jsxs("span",{style:{textDecoration:oi("DoT")?"none":"line-through",color:oi("DoT")?n.text:n.bgHighContrast},children:[u.jsx("br",{}),p({en:"(DoT)",zh:"（DoT）"})," "]}):void 0]}));let Y;L.row.targetCount&&L.row.basePotency>0&&(Y=u.jsx("span",{style:{textDecoration:D?"none":"line-through"},children:L.row.targetCount}));let ce;L.row.basePotency>0&&!F(L.row.skillName)&&(ce=u.jsx(hm,{includeInStats:D,basePotency:L.row.basePotency,helpTopic:"mainTable-potencyCalc-"+L.key,calc:L.row.calculationModifiers,falloff:L.row.falloff,targetCount:L.row.targetCount}));let me=L.row.usageCount-L.row.hitCount,he=u.jsxs("span",{style:{textDecoration:D?"none":"line-through"},children:[L.row.hitCount,me>0?u.jsxs("span",{style:{color:n.timeline.untargetableDamageMark+"af"},children:[" ","+",me," ",u.jsx(at,{topic:"mainTable-numUntargetableUsages-"+L.key,content:p({en:"usage(s) when untargetable",zh:"Boss上天期间使用次数"})})]}):void 0]}),Se;L.row.showPotency&&!(L.row.skillName in hl)&&(Se=u.jsxs("span",{style:{textDecoration:D?"none":"line-through"},children:[L.row.totalPotencyWithoutPot.toFixed(2),L.row.potPotency>0?u.jsxs("span",{style:{color:D?n.timeline.potCover:n.bgHighContrast},children:[" ","+",L.row.potPotency.toFixed(2),"(",p({en:"pot",zh:"爆发药"}),")(",L.row.potCount,")"]}):void 0,L.row.partyBuffPotency>0?u.jsxs("span",{style:{color:D?n.accent:n.bgHighContrast},children:[" ","+",L.row.partyBuffPotency.toFixed(2),"(",p({en:"party",zh:"团辅"}),")"]}):void 0]}));let Te={textAlign:"left",position:"relative",borderTop:W?"none":"1px solid "+n.bgMediumContrast};return D||(Te.color=n.bgHighContrast),u.jsxs("div",{style:Te,children:[u.jsx("div",{style:H(3),children:X}),u.jsx("div",{style:H(18),children:Z}),u.jsx("div",{style:H(8),children:Y}),u.jsx("div",{style:H(19),children:le}),u.jsx("div",{style:H(14),children:ce}),u.jsx("div",{style:H(8),children:he}),u.jsx("div",{style:H(30),children:Se})]},L.key)},re=[];for(let L=0;L<this.data.mainTable.length;L++)re.push(x({row:this.data.mainTable[L],key:L,lastRowSkill:L===0?void 0:this.data.mainTable[L-1].skillName}));let ie=function(L){let W=[];W.push(L.row.displayedModifiers.map((Te,Oe)=>u.jsx(vI,{buff:Te},Oe)));let le=L.row.gap.toFixed(3),D=L.row.gap>0?u.jsx("span",{children:le}):u.jsx("span",{}),X=L.row.override.toFixed(3),Z=L.row.override>0?u.jsx("span",{children:X}):u.jsx("span",{}),Y=u.jsx(hm,{basePotency:L.row.mainPotencyHit?L.row.baseMainPotency:0,includeInStats:!0,explainUntargetable:!L.row.mainPotencyHit,helpTopic:"thunderTable-main-"+L.key,calc:L.row.initialHitCalculationModifiers,targetCount:L.row.targetCount,falloff:L.row.mainHitFalloff}),ce=u.jsx(hm,{basePotency:L.row.baseDotPotency,includeInStats:!0,helpTopic:"thunderTable-dot-"+L.key,calc:L.row.tickCalculationModifiers,targetCount:L.row.targetCount,falloff:0}),me=L.row.totalNumTicks-L.row.numHitTicks,he=u.jsxs("span",{children:[L.row.numHitTicks,me>0?u.jsxs("span",{style:{color:n.timeline.untargetableDamageMark+"af"},children:[" ","+",me," ",u.jsx(at,{topic:"thunderTable-numUntargetableTicks-"+L.key,content:p({en:"tick(s) when untargetable",zh:"Boss上天期间跳DoT次数"})})]}):void 0]}),Se=u.jsxs("span",{children:[L.row.potencyWithoutPot.toFixed(2),L.row.potPotency>0?u.jsxs("span",{style:{color:n.timeline.potCover},children:[" ","+",L.row.potPotency.toFixed(2),"(",p({en:"pot",zh:"爆发药"}),")"]}):void 0,L.row.partyBuffPotency>0?u.jsxs("span",{style:{color:n.accent},children:[" ","+",L.row.partyBuffPotency.toFixed(2),"(",p({en:"party",zh:"团辅"}),")"]}):void 0]});return u.jsxs("div",{style:{textAlign:"left",position:"relative",borderTop:"1px solid "+n.bgMediumContrast},children:[u.jsx("div",{style:H(8),children:L.row.castTime.toFixed(3)}),u.jsx("div",{style:H(8),children:L.row.applicationTime.toFixed(3)}),u.jsx("div",{style:H(12),children:W}),u.jsx("div",{style:H(10),children:D}),u.jsx("div",{style:H(10),children:Z}),u.jsx("div",{style:H(10),children:Y}),u.jsx("div",{style:H(10),children:ce}),u.jsx("div",{style:H(8),children:he}),u.jsx("div",{style:H(24),children:Se})]},L.key)};const se=[];this.data.dotTables.forEach((L,W)=>{const le=[];for(let D=0;D<L.tableRows.length;D++)le.push(ie({row:L.tableRows[D],key:D}));se.push({dotName:W,tableRows:le})});let oe={display:"inline-block",padding:MI},de=p(l?{en:"Applied Skills",zh:"技能统计"}:{en:"Applied Skills (Checked Only)",zh:"技能统计（仅统计选中技能）"}),Ae="";if(this.data.mode===1){let L=(this.data.time-this.data.countdown).toFixed(3)+"s",W=c+p({en:"up till "+L,zh:"截至"+L})+d;de+=W,Ae=W}else if(this.data.mode===2){const L=c+p({en:"from selected skills",zh:"来自选中技能"})+d;de+=L,Ae+=L}let ee=n.text;this.data.mode===1?ee=n.historical:this.data.mode===2&&(ee=n.accent);let J=u.jsxs("div",{id:"damageTable",style:{position:"relative",margin:"0 auto",marginBottom:40,maxWidth:960},children:[u.jsx("div",{style:{...H(100),textAlign:"center",marginBottom:10},children:u.jsx("b",{style:{color:ee},children:de})}),u.jsxs("div",{style:{outline:"1px solid "+n.bgMediumContrast},children:[u.jsxs("div",{children:[u.jsx("div",{style:{display:"inline-block",width:"21%"},children:u.jsx("span",{style:oe,children:u.jsx("b",{children:p({en:"skill",zh:"技能"})})})}),u.jsx("div",{style:{display:"inline-block",width:"27%"},children:u.jsx("span",{style:oe,children:u.jsx("b",{children:p({en:"targets",zh:"目标数"})})})}),u.jsx("div",{style:{display:"inline-block",width:"14%"},children:u.jsx("span",{style:oe,children:u.jsx("b",{children:p({en:"potency",zh:"单次威力"})})})}),u.jsx("div",{style:{display:"inline-block",width:"8%"},children:u.jsx("span",{style:oe,children:u.jsx("b",{children:p({en:"count",zh:"数量"})})})}),u.jsx("div",{style:{display:"inline-block",width:"30%"},children:u.jsx("span",{style:oe,children:u.jsx("b",{children:p({en:"total",zh:"总威力"})})})})]}),re,u.jsxs("div",{style:{textAlign:"left",position:"relative",borderTop:"1px solid "+n.bgMediumContrast},children:[u.jsx("div",{style:H(70)}),u.jsx("div",{style:H(30),children:u.jsxs("span",{children:[this.data.mainTableSummary.totalPotencyWithoutPot.toFixed(2),this.data.mainTableSummary.totalPotPotency>0?u.jsxs("span",{style:{color:n.timeline.potCover},children:[" ","+",this.data.mainTableSummary.totalPotPotency.toFixed(2),p({en:" (pot +"+this.data.tinctureBuffPercentage+"%)",zh:"(爆发药 +"+this.data.tinctureBuffPercentage+"%)"})]}):void 0,this.data.mainTableSummary.totalPartyBuffPotency>0?u.jsxs("span",{style:{color:n.accent},children:[" ","+",this.data.mainTableSummary.totalPartyBuffPotency.toFixed(2),"(",p({en:"party",zh:"团辅"}),")"]}):void 0]})})]})]})]}),w=se.map(L=>{var X;const W=L.tableRows,le=(X=this.data.dotTables.get(L.dotName))==null?void 0:X.summary;if(le===void 0)return u.jsx(u.Fragment,{});const D=Wa(L.dotName)+Ae;return u.jsxs("div",{style:{position:"relative",margin:"0 auto",marginBottom:40,maxWidth:960},children:[u.jsx("div",{style:{...H(100),textAlign:"center",marginBottom:10},children:u.jsx("b",{style:{color:ee},children:D})}),u.jsxs("div",{style:{outline:"1px solid "+n.bgMediumContrast},children:[u.jsxs("div",{children:[u.jsx("div",{style:{display:"inline-block",width:"8%"},children:u.jsx("span",{style:oe,children:u.jsx("b",{children:p({en:"cast time",zh:"读条时间"})})})}),u.jsx("div",{style:{display:"inline-block",width:"8%"},children:u.jsx("span",{style:oe,children:u.jsx("b",{children:p({en:"application time",zh:"结算时间"})})})}),u.jsx("div",{style:{display:"inline-block",width:"12%"},children:u.jsx("span",{style:oe})}),u.jsx("div",{style:{display:"inline-block",width:"10%"},children:u.jsxs("span",{style:oe,children:[u.jsxs("b",{children:[p({en:"gap",zh:"DoT间隙"})," "]}),u.jsx(at,{topic:"dot-gap-title",content:p({en:u.jsxs("div",{children:[u.jsx("div",{className:"paragraph",children:"DoT coverage time gap since pull or previous application"}),u.jsx("div",{className:"paragraph",children:"The last row also includes gap at the beginning and end of the fight"})]}),zh:u.jsx("div",{children:"雷DoT覆盖间隙，最后一行也包括战斗开始和结束时没有雷DoT的时间"})})})]})}),u.jsx("div",{style:{display:"inline-block",width:"10%"},children:u.jsxs("span",{style:oe,children:[u.jsxs("b",{children:[p({en:"override",zh:"DoT覆盖"})," "]}),u.jsx(at,{topic:"dot-override-title",content:p({en:u.jsx("div",{children:"Overridden DoT time from previous application"}),zh:u.jsx("div",{children:"提前覆盖雷DoT时长"})})})]})}),u.jsx("div",{style:{display:"inline-block",width:"10%"},children:u.jsx("span",{style:oe,children:u.jsx("b",{children:p({en:"initial",zh:"初始威力"})})})}),u.jsx("div",{style:{display:"inline-block",width:"10%"},children:u.jsx("span",{style:oe,children:u.jsx("b",{children:p({en:"DoT",zh:"DoT威力"})})})}),u.jsx("div",{style:{display:"inline-block",width:"8%"},children:u.jsx("span",{style:oe,children:u.jsx("b",{children:p({en:"ticks",zh:"跳雷次数"})})})}),u.jsx("div",{style:{display:"inline-block",width:"24%"},children:u.jsx("span",{style:oe,children:u.jsx("b",{children:p({en:"total",zh:"总威力"})})})})]}),W,u.jsxs("div",{style:{textAlign:"left",position:"relative",borderTop:"1px solid "+n.bgMediumContrast},children:[u.jsx("div",{style:H(28)}),u.jsx("div",{style:H(10),children:le.cumulativeGap.toFixed(3)}),u.jsx("div",{style:H(10),children:le.cumulativeOverride.toFixed(3)}),u.jsx("div",{style:H(20)}),u.jsx("div",{style:H(8),children:O.game.fullTimeDoTs.includes(L.dotName)?u.jsxs(u.Fragment,{children:[le.totalTicks,"/",le.maxTicks]}):u.jsx(u.Fragment,{children:le.totalTicks})}),u.jsxs("div",{style:H(24),children:[le.totalPotencyWithoutPot.toFixed(2),le.totalPotPotency>0?u.jsxs("span",{style:{color:n.timeline.potCover},children:[" ","+",le.totalPotPotency.toFixed(2),p({en:"(pot +"+this.data.tinctureBuffPercentage+"%)",zh:"(爆发药 +"+this.data.tinctureBuffPercentage+"%)"})]}):void 0,le.totalPartyBuffPotency>0?u.jsxs("span",{style:{color:n.accent},children:[" ","+",le.totalPartyBuffPotency.toFixed(2),"(",p({en:"party",zh:"团辅"}),")"]}):void 0]})]})]})]},`dot-table-${L.dotName}`)});return u.jsxs("div",{children:[U,u.jsxs("div",{children:[J,w]})]})}}j(UC,"contextType",jn);var of={exports:{}},ck=of.exports,LI;function uk(){return LI||(LI=1,function(e){(function(t,n,l){function s(E){var A=this,R=f();A.next=function(){var T=2091639*A.s0+A.c*23283064365386963e-26;return A.s0=A.s1,A.s1=A.s2,A.s2=T-(A.c=T|0)},A.c=1,A.s0=R(" "),A.s1=R(" "),A.s2=R(" "),A.s0-=R(E),A.s0<0&&(A.s0+=1),A.s1-=R(E),A.s1<0&&(A.s1+=1),A.s2-=R(E),A.s2<0&&(A.s2+=1),R=null}function c(E,A){return A.c=E.c,A.s0=E.s0,A.s1=E.s1,A.s2=E.s2,A}function d(E,A){var R=new s(E),T=A&&A.state,S=R.next;return S.int32=function(){return R.next()*4294967296|0},S.double=function(){return S()+(S()*2097152|0)*11102230246251565e-32},S.quick=S,T&&(typeof T=="object"&&c(T,R),S.state=function(){return c(R,{})}),S}function f(){var E=4022871197,A=function(R){R=String(R);for(var T=0;T<R.length;T++){E+=R.charCodeAt(T);var S=.02519603282416938*E;E=S>>>0,S-=E,S*=E,E=S>>>0,S-=E,E+=S*4294967296}return(E>>>0)*23283064365386963e-26};return A}n&&n.exports?n.exports=d:this.alea=d})(ck,e)}(of)),of.exports}var sf={exports:{}},dk=sf.exports,HI;function fk(){return HI||(HI=1,function(e){(function(t,n,l){function s(f){var E=this,A="";E.x=0,E.y=0,E.z=0,E.w=0,E.next=function(){var T=E.x^E.x<<11;return E.x=E.y,E.y=E.z,E.z=E.w,E.w^=E.w>>>19^T^T>>>8},f===(f|0)?E.x=f:A+=f;for(var R=0;R<A.length+64;R++)E.x^=A.charCodeAt(R)|0,E.next()}function c(f,E){return E.x=f.x,E.y=f.y,E.z=f.z,E.w=f.w,E}function d(f,E){var A=new s(f),R=E&&E.state,T=function(){return(A.next()>>>0)/4294967296};return T.double=function(){do var S=A.next()>>>11,g=(A.next()>>>0)/4294967296,I=(S+g)/(1<<21);while(I===0);return I},T.int32=A.next,T.quick=T,R&&(typeof R=="object"&&c(R,A),T.state=function(){return c(A,{})}),T}n&&n.exports?n.exports=d:this.xor128=d})(dk,e)}(sf)),sf.exports}var rf={exports:{}},hk=rf.exports,xI;function Ek(){return xI||(xI=1,function(e){(function(t,n,l){function s(f){var E=this,A="";E.next=function(){var T=E.x^E.x>>>2;return E.x=E.y,E.y=E.z,E.z=E.w,E.w=E.v,(E.d=E.d+362437|0)+(E.v=E.v^E.v<<4^(T^T<<1))|0},E.x=0,E.y=0,E.z=0,E.w=0,E.v=0,f===(f|0)?E.x=f:A+=f;for(var R=0;R<A.length+64;R++)E.x^=A.charCodeAt(R)|0,R==A.length&&(E.d=E.x<<10^E.x>>>4),E.next()}function c(f,E){return E.x=f.x,E.y=f.y,E.z=f.z,E.w=f.w,E.v=f.v,E.d=f.d,E}function d(f,E){var A=new s(f),R=E&&E.state,T=function(){return(A.next()>>>0)/4294967296};return T.double=function(){do var S=A.next()>>>11,g=(A.next()>>>0)/4294967296,I=(S+g)/(1<<21);while(I===0);return I},T.int32=A.next,T.quick=T,R&&(typeof R=="object"&&c(R,A),T.state=function(){return c(A,{})}),T}n&&n.exports?n.exports=d:this.xorwow=d})(hk,e)}(rf)),rf.exports}var cf={exports:{}},Ak=cf.exports,UI;function mk(){return UI||(UI=1,function(e){(function(t,n,l){function s(f){var E=this;E.next=function(){var R=E.x,T=E.i,S,g;return S=R[T],S^=S>>>7,g=S^S<<24,S=R[T+1&7],g^=S^S>>>10,S=R[T+3&7],g^=S^S>>>3,S=R[T+4&7],g^=S^S<<7,S=R[T+7&7],S=S^S<<13,g^=S^S<<9,R[T]=g,E.i=T+1&7,g};function A(R,T){var S,g=[];if(T===(T|0))g[0]=T;else for(T=""+T,S=0;S<T.length;++S)g[S&7]=g[S&7]<<15^T.charCodeAt(S)+g[S+1&7]<<13;for(;g.length<8;)g.push(0);for(S=0;S<8&&g[S]===0;++S);for(S==8?g[7]=-1:g[S],R.x=g,R.i=0,S=256;S>0;--S)R.next()}A(E,f)}function c(f,E){return E.x=f.x.slice(),E.i=f.i,E}function d(f,E){f==null&&(f=+new Date);var A=new s(f),R=E&&E.state,T=function(){return(A.next()>>>0)/4294967296};return T.double=function(){do var S=A.next()>>>11,g=(A.next()>>>0)/4294967296,I=(S+g)/(1<<21);while(I===0);return I},T.int32=A.next,T.quick=T,R&&(R.x&&c(R,A),T.state=function(){return c(A,{})}),T}n&&n.exports?n.exports=d:this.xorshift7=d})(Ak,e)}(cf)),cf.exports}var uf={exports:{}},Rk=uf.exports,kI;function Tk(){return kI||(kI=1,function(e){(function(t,n,l){function s(f){var E=this;E.next=function(){var R=E.w,T=E.X,S=E.i,g,I;return E.w=R=R+1640531527|0,I=T[S+34&127],g=T[S=S+1&127],I^=I<<13,g^=g<<17,I^=I>>>15,g^=g>>>12,I=T[S]=I^g,E.i=S,I+(R^R>>>16)|0};function A(R,T){var S,g,I,b,y,M=[],v=128;for(T===(T|0)?(g=T,T=null):(T=T+"\0",g=0,v=Math.max(v,T.length)),I=0,b=-32;b<v;++b)T&&(g^=T.charCodeAt((b+32)%T.length)),b===0&&(y=g),g^=g<<10,g^=g>>>15,g^=g<<4,g^=g>>>13,b>=0&&(y=y+1640531527|0,S=M[b&127]^=g+y,I=S==0?I+1:0);for(I>=128&&(M[(T&&T.length||0)&127]=-1),I=127,b=4*128;b>0;--b)g=M[I+34&127],S=M[I=I+1&127],g^=g<<13,S^=S<<17,g^=g>>>15,S^=S>>>12,M[I]=g^S;R.w=y,R.X=M,R.i=I}A(E,f)}function c(f,E){return E.i=f.i,E.w=f.w,E.X=f.X.slice(),E}function d(f,E){f==null&&(f=+new Date);var A=new s(f),R=E&&E.state,T=function(){return(A.next()>>>0)/4294967296};return T.double=function(){do var S=A.next()>>>11,g=(A.next()>>>0)/4294967296,I=(S+g)/(1<<21);while(I===0);return I},T.int32=A.next,T.quick=T,R&&(R.X&&c(R,A),T.state=function(){return c(A,{})}),T}n&&n.exports?n.exports=d:this.xor4096=d})(Rk,e)}(uf)),uf.exports}var df={exports:{}},Sk=df.exports,PI;function gk(){return PI||(PI=1,function(e){(function(t,n,l){function s(f){var E=this,A="";E.next=function(){var T=E.b,S=E.c,g=E.d,I=E.a;return T=T<<25^T>>>7^S,S=S-g|0,g=g<<24^g>>>8^I,I=I-T|0,E.b=T=T<<20^T>>>12^S,E.c=S=S-g|0,E.d=g<<16^S>>>16^I,E.a=I-T|0},E.a=0,E.b=0,E.c=-1640531527,E.d=1367130551,f===Math.floor(f)?(E.a=f/4294967296|0,E.b=f|0):A+=f;for(var R=0;R<A.length+20;R++)E.b^=A.charCodeAt(R)|0,E.next()}function c(f,E){return E.a=f.a,E.b=f.b,E.c=f.c,E.d=f.d,E}function d(f,E){var A=new s(f),R=E&&E.state,T=function(){return(A.next()>>>0)/4294967296};return T.double=function(){do var S=A.next()>>>11,g=(A.next()>>>0)/4294967296,I=(S+g)/(1<<21);while(I===0);return I},T.int32=A.next,T.quick=T,R&&(typeof R=="object"&&c(R,A),T.state=function(){return c(A,{})}),T}n&&n.exports?n.exports=d:this.tychei=d})(Sk,e)}(df)),df.exports}var ff={exports:{}};const _k={},pk=Object.freeze(Object.defineProperty({__proto__:null,default:_k},Symbol.toStringTag,{value:"Module"})),Ik=py(pk);var Nk=ff.exports,GI;function Ck(){return GI||(GI=1,function(e){(function(t,n,l){var s=256,c=6,d=52,f="random",E=l.pow(s,c),A=l.pow(2,d),R=A*2,T=s-1,S;function g(H,K,F){var x=[];K=K==!0?{entropy:!0}:K||{};var re=M(y(K.entropy?[H,U(n)]:H??v(),3),x),ie=new I(x),se=function(){for(var oe=ie.g(c),de=E,Ae=0;oe<A;)oe=(oe+Ae)*s,de*=s,Ae=ie.g(1);for(;oe>=R;)oe/=2,de/=2,Ae>>>=1;return(oe+Ae)/de};return se.int32=function(){return ie.g(4)|0},se.quick=function(){return ie.g(4)/4294967296},se.double=se,M(U(ie.S),n),(K.pass||F||function(oe,de,Ae,ee){return ee&&(ee.S&&b(ee,ie),oe.state=function(){return b(ie,{})}),Ae?(l[f]=oe,de):oe})(se,re,"global"in K?K.global:this==l,K.state)}function I(H){var K,F=H.length,x=this,re=0,ie=x.i=x.j=0,se=x.S=[];for(F||(H=[F++]);re<s;)se[re]=re++;for(re=0;re<s;re++)se[re]=se[ie=T&ie+H[re%F]+(K=se[re])],se[ie]=K;(x.g=function(oe){for(var de,Ae=0,ee=x.i,J=x.j,w=x.S;oe--;)de=w[ee=T&ee+1],Ae=Ae*s+w[T&(w[ee]=w[J=T&J+de])+(w[J]=de)];return x.i=ee,x.j=J,Ae})(s)}function b(H,K){return K.i=H.i,K.j=H.j,K.S=H.S.slice(),K}function y(H,K){var F=[],x=typeof H,re;if(K&&x=="object")for(re in H)try{F.push(y(H[re],K-1))}catch{}return F.length?F:x=="string"?H:H+"\0"}function M(H,K){for(var F=H+"",x,re=0;re<F.length;)K[T&re]=T&(x^=K[T&re]*19)+F.charCodeAt(re++);return U(K)}function v(){try{var H;return S&&(H=S.randomBytes)?H=H(s):(H=new Uint8Array(s),(t.crypto||t.msCrypto).getRandomValues(H)),U(H)}catch{var K=t.navigator,F=K&&K.plugins;return[+new Date,t,F,t.screen,U(n)]}}function U(H){return String.fromCharCode.apply(0,H)}if(M(l.random(),n),e.exports){e.exports=g;try{S=Ik}catch{}}else l["seed"+f]=g})(typeof self<"u"?self:Nk,[],Math)}(ff)),ff.exports}var Em,wI;function bk(){if(wI)return Em;wI=1;var e=uk(),t=fk(),n=Ek(),l=mk(),s=Tk(),c=gk(),d=Ck();return d.alea=e,d.xor128=t,d.xorwow=n,d.xorshift7=l,d.xor4096=s,d.tychei=c,Em=d,Em}var Ok=bk();const BI=uR(Ok);var Nr,Cr,gu,_u,Xf,kC;class qt{constructor(t){Pe(this,Xf);j(this,"config");j(this,"rng");j(this,"nonProcRng");j(this,"lucidTickOffset");j(this,"dotTickOffset");j(this,"hotTickOffset");j(this,"time");j(this,"resources");j(this,"cooldowns");j(this,"eventsQueue");j(this,"skillsList");j(this,"displayedSkills");j(this,"autoAttackDelay");j(this,"overTimeEffectGroups",[]);j(this,"dotResources",[]);j(this,"hotResources",[]);j(this,"excludedDoTs",[]);j(this,"excludedHoTs",[]);j(this,"fullTimeDoTs",[]);Pe(this,Nr,[]);Pe(this,Cr,[]);j(this,"dotSkills",[]);j(this,"hotSkills",[]);Pe(this,gu,new Map);Pe(this,_u,new Map);this.config=t,this.rng=BI(t.randomSeed),this.nonProcRng=BI(t.randomSeed+"_nonProcs"),this.lucidTickOffset=this.nonProcRng()*3,this.dotTickOffset=this.nonProcRng()*3,this.hotTickOffset=this.nonProcRng()*3,this.time=0,this.resources=new t1(this),this.cooldowns=new e1(this),El(this.job).forEach((l,s)=>{l.isCoolDown?this.cooldowns.set(new Ke(s,l.cdPerStack,l.maxStacks,l.maxStacks)):this.resources.set(new li(s,l.maxValue,l.defaultValue))});let n=2.5;switch(Ot[this.job].role){case"TANK":case"MELEE":case"RANGED":n=t.adjustedSksGCD();break;case"HEALER":case"CASTER":n=t.adjustedGCD();break}this.cooldowns.set(new Ke("cd_GCD",t.getAfterTaxGCD(n),1,1)),this.resources.set(new li("MOVEMENT",1,1)),this.resources.set(new li("NOT_ANIMATION_LOCKED",1,1)),this.resources.set(new li("NOT_CASTER_TAXED",1,1)),this.resources.set(new li("IN_COMBAT",1,0)),this.cooldowns.set(new Ke("NEVER",0,0,0)),this.eventsQueue=[],this.skillsList=new o1(this),this.displayedSkills=new s1(this.job,t.level),this.autoAttackDelay=2.5}get statusPropsGenerator(){return new Wt(this)}get job(){return this.config.job}get partySize(){return this.resources.get("PARTY_SIZE").availableAmount()}registerRecurringEvents(t=[],n=[]){let l=this;{let f=()=>{let E=this.resources.get("MANA"),A=this.captureManaRegenAmount();E.gain(A);let R=E.availableAmount();O.reportManaTick(l.time,"+"+A+" (MP="+R+")"),this.resources.addResourceEvent({rscType:"MANA",name:"mana tick",delay:3,fnOnRsc:T=>{f()},tags:[sn.MpTick,sn.ManaGain]})};this.resources.addResourceEvent({rscType:"MANA",name:"initial mana tick",delay:this.config.timeTillFirstManaTick,fnOnRsc:f,tags:[sn.MpTick,sn.ManaGain]})}let s=()=>{let f=this.resources.get("LUCID_DREAMING");if(f.available(1)&&(f.tickCount++,!(this.isBLMState()&&this.getFireStacks()>0))){let A=this.resources.get("MANA");A.gain(550);let R="+550";if(console.assert(f.node!==void 0),f.node){let T="??";f.node.tmp_startLockTime&&(T=(f.node.tmp_startLockTime-this.config.countdown).toFixed(3)),R+=" {skill}@"+T,R+=" ("+f.tickCount+"/7)"}R+=" (MP="+A.availableAmount()+")",O.reportLucidTick(this.time,R)}let E=new Le("lucid tick",3,()=>{s()});E.addTag(sn.LucidTick),f.available(1)&&f.pendingChange&&f.pendingChange.timeTillEvent>=3&&E.addTag(sn.ManaGain),this.addEvent(E)};if([...Yn,...Kn].includes(this.job)){let f=this.config.timeTillFirstManaTick+this.lucidTickOffset;for(;f>3;)f-=3;let E=new Le("initial lucid tick",f,s);E.addTag(sn.LucidTick),this.addEvent(E)}let c=()=>{this.dotResources.filter(f=>!this.excludedDoTs.includes(f)).forEach(f=>this.handleDoTTick(f)),this.getDisplayTime()>=0&&O.reportDotTick(this.time),this.addEvent(new Le("DoT tick",3,()=>{c()}))},d=()=>{this.hotResources.filter(f=>!this.excludedHoTs.includes(f)).forEach(f=>this.handleHoTTick(f)),this.getDisplayTime()>=0&&O.reportHotTick(this.time),this.addEvent(new Le("HoT tick",3,()=>{d()}))};if(t.forEach(f=>{f.groupedEffects.forEach(E=>{let A=this.dotResources,R=te(this,Nr),T=te(this,gu),S=this.excludedDoTs;f.isHealing&&(A=this.hotResources,R=te(this,Cr),T=te(this,_u),S=this.excludedHoTs),A.includes(E.effectName)?console.assert(!1,`${E.effectName} was registered as an over time effect multiple times for ${this.job}`):(A.push(E.effectName),E.appliedBy.forEach(g=>{!f.isHealing&&!this.dotSkills.includes(g)&&this.dotSkills.push(g),f.isHealing&&!this.hotSkills.includes(g)&&this.hotSkills.push(g)}),T.set(E.effectName,f.groupedEffects.filter(g=>g!==E).map(g=>g.effectName)),E.isGroundTargeted&&!R.includes(E.effectName)&&R.push(E.effectName),E.exclude&&!S.includes(E.effectName)&&S.push(E.effectName),!f.isHealing&&f.reportName&&!this.fullTimeDoTs.includes(E.effectName)&&this.fullTimeDoTs.push(E.effectName))})}),n.forEach(f=>this.dotSkills.push(f)),this.overTimeEffectGroups=t,this.dotResources.filter(f=>!this.excludedDoTs.includes(f)).length>0){let f=this.config.timeTillFirstManaTick+this.dotTickOffset;for(;f>3;)f-=3;this.addEvent(new Le("initial DoT tick",f,c))}if(this.hotResources.filter(f=>!this.excludedHoTs.includes(f)).length>0){let f=this.config.timeTillFirstManaTick+this.hotTickOffset;for(;f>3;)f-=3;this.addEvent(new Le("initial HoT tick",f,d))}this.jobSpecificRegisterRecurringEvents()}onResolveOverTimeTick(t,n){n==="damage"?this.jobSpecificOnResolveDotTick(t):this.jobSpecificOnResolveHotTick(t)}jobSpecificRegisterRecurringEvents(){}jobSpecificOnResolveDotTick(t){}jobSpecificOnResolveHotTick(t){}jobSpecificAddDamageBuffCovers(t,n){}jobSpecificAddSpeedBuffCovers(t,n){}jobSpecificAddHealingBuffCovers(t,n){}maybeCancelChanneledSkills(t){const n=this.skillsList.get(t);n&&(n.animationLockFn(this)<=bn||this.cancelChanneledSkills())}cancelChanneledSkills(){}jobSpecificOnAutoAttack(){}onAutoAttack(){this.jobSpecificOnAutoAttack()}getStatusDuration(t){return Ut(this.job,t).maxTimeout}gainStatus(t,n=1){const l=this.resources.get(t),s=Ut(this.job,t);this.hasResourceAvailable(t)?(s.maxTimeout>0&&l.overrideTimer(this,s.maxTimeout),l.availableAmount()!==n&&l.overrideCurrentValue(n)):(l.gain(n),s.maxTimeout>0&&this.enqueueResourceDrop(t))}maybeGainProc(t,n=.5){this.triggersEffect(n)&&this.gainStatus(t)}triggersEffect(t){return this.config.procMode===Kt.Never?!1:this.config.procMode===Kt.Always?!0:this.rng()<t}handleDoTTick(t){this.handleOverTimeTick(t,"damage")}handleHoTTick(t){this.handleOverTimeTick(t,"healing")}handleOverTimeTick(t,n){const l=this.resources.get(t);if(l.availableAmountIncludingDisabled()>0){if(l.node&&l.enabled){const s=l.node.getOverTimePotencies(t,n)[l.tickCount];O.resolveOverTimePotency(s,n),this.onResolveOverTimeTick(t,n)}l.tickCount++}else l.node&&(l.node.removeUnresolvedOvertimePotencies(n),l.node=void 0)}tick(t,n=()=>!1){let l=0;for(;l<t&&this.eventsQueue.length>0&&!n();){this.eventsQueue.sort((f,E)=>f.timeTillEvent-E.timeTillEvent);let s=Math.min(t-l,this.eventsQueue[0].timeTillEvent);l=Math.min(l+s,t),this.time+=s,this.cooldowns.tick(s);const c=[];for(let f=0;f<this.eventsQueue.length;f++)c.push(this.eventsQueue[f]);c.forEach(f=>{f.timeTillEvent-=s});let d=0;c.forEach(f=>{f.timeTillEvent<=ma.epsilon&&(f.canceled||f.effectFn(),d++)}),this.eventsQueue.splice(0,d)}return l}addEvent(t){this.eventsQueue.push(t)}getDisplayTime(){return this.time-this.config.countdown}captureManaRegenAmount(){return this.isInCombat()?this.job in OR?At.mpTick(this.config.level,this.config.piety):200:600}requestToggleBuff(t){let n=this.resources.get(t);if(t==="AUTOS_ENGAGED")return this.toggleAutosEngaged(),!0;if(Xe[t].mayBeToggled)return n.available(1)?(n.enabled=!1,!0):(n.enabled=!0,!0);if(Xe[t].mayNotBeCanceled)return!0;if(t==="MEDITATE"){const l=this.findNextQueuedEventByTag(sn.MeditateTick);l&&(l.canceled=!0)}return t==="KARDIA"&&this.tryConsumeResource("KARDION"),n.consume(n.availableAmount()),n.removeTimer(),!0}addRecurringAutoAttackEvent(t,n){const l=(s,c)=>{const d=new Le("aa tick",s,()=>{this.resources.get("AUTOS_ENGAGED").available(1)&&this.isInCombat()&&this.onAutoAttack(),this.addEvent(l(c,c))});return d.addTag(sn.AutoTick),d};this.addEvent(l(t,n))}findAutoAttackTimerInQueue(){let t=-1;return this.eventsQueue.forEach(n=>{n.name==="aa tick"&&(t=n.timeTillEvent)}),t}startAutoAttackTimer(t,n,l){if(this.findAutoAttackTimerInQueue()!==-1)this.removeAutoAttackTimer();else if(this.resources.get("STORED_AUTO").available(1)){const f=new Le("stored auto",l||0,()=>{this.onAutoAttack()});this.addEvent(f)}this.tryConsumeResource("STORED_AUTO"),this.resources.get("AUTOS_ENGAGED").availableAmount()===0&&this.resources.get("AUTOS_ENGAGED").gain(1);const c=n||3;let d=0;t===-1?d=c:d=t??c,this.addRecurringAutoAttackEvent(d,c)}removeAutoAttackTimer(){let t=0;this.eventsQueue.forEach(n=>{n.name==="aa tick"&&this.eventsQueue.splice(t,1),t++})}toggleAutosEngaged(){const t=this.findAutoAttackTimerInQueue();if(this.resources.get("AUTOS_ENGAGED").availableAmount()===0)this.startAutoAttackTimer(t===-1?3:t);else if(this.resources.get("AUTOS_ENGAGED").consume(1),t!==-1){this.removeAutoAttackTimer();const n=new Le("aa tick",t,()=>{this.resources.get("STORED_AUTO").available(0)&&this.resources.get("STORED_AUTO").gain(1)});this.addEvent(n)}}refreshAutoBasedOnSkill(t,n,l){const s=n!==0,c=this.resources.get("AUTOS_ENGAGED").available(1),d=this.autoAttackDelay,f=this.findAutoAttackTimerInQueue(),E=t.startsAuto;if(l){if(this.isInCombat()){if(s&&c){const A=n+(f===-1?d:f);this.startAutoAttackTimer(A,d,n)}else if(!s&&!c)E&&this.startAutoAttackTimer(f,d);else if(s&&!c){if(E){const A=n+(f===-1?d:f);this.startAutoAttackTimer(A,d,n)}else if(f>0){this.removeAutoAttackTimer();const A=new Le("aa tick",f+n,()=>{this.resources.get("STORED_AUTO").available(0)&&this.resources.get("STORED_AUTO").gain(1)});this.addEvent(A)}}}else if(E){const A=n+(f===-1?d:f);this.startAutoAttackTimer(A,d,n)}}else if(this.isInCombat()){if(s&&c){const A=this.findAutoAttackTimerInQueue(),R=n+(A===-1?d:A);this.startAutoAttackTimer(R)}else if(s&&!c&&f>0){this.removeAutoAttackTimer();const A=new Le("aa tick",f+n,()=>{this.resources.get("STORED_AUTO").available(0)&&this.resources.get("STORED_AUTO").gain(1)});this.addEvent(A)}}}useSpellOrWeaponskill(t,n,l){const s=this.cooldowns.get(t.cdName),c=t.secondaryCd?this.cooldowns.get(t.secondaryCd.cdName):void 0;let d=t.castTimeFn(this);const f=t.recastTimeFn(this);this.jobSpecificAddSpeedBuffCovers(n,t);const E=t.potencyFn(this);let A=n.getInitialPotency();!A&&(E>0||t.drawsAggro&&!this.isInCombat())?(this.refreshAutoBasedOnSkill(t,d,!0),A=new Na({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t.name,aspect:t.aspect,basePotency:E,snapshotTime:void 0,description:"",targetCount:n.targetCount,falloff:t.falloff}),n.addPotency(A)):this.refreshAutoBasedOnSkill(t,d,!1);const R=t.healingPotencyFn(this);let T=n.getInitialHealingPotency();!T&&R>0&&(T=new Na({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t.name,aspect:t.aspect,basePotency:R,snapshotTime:void 0,description:"",targetCount:n.healTargetCount,falloff:0}),n.addHealingPotency(T));const S=()=>{let I=t.manaCostFn(this);I>this.resources.get("MANA").availableAmount()?O.reportInterruption({failNode:n,failIndex:l}):I>0&&this.resources.get("MANA").consume(I);const b=E>0;if(A&&(A.snapshotTime=this.getDisplayTime(),b)){const M=[];this.hasResourceAvailable("TINCTURE")&&M.push(ue.Tincture),M.push(...t.jobPotencyModifiers(this)),A.modifiers=M}b&&(this.hasResourceAvailable("TINCTURE")&&!n.hasBuff(P.Tincture)&&n.addBuff(P.Tincture),this.jobSpecificAddDamageBuffCovers(n,t));const y=R>0;if(T){T.snapshotTime=this.getDisplayTime();const M=[];this.hasResourceAvailable("TINCTURE")&&M.push(ue.Tincture),M.push(...t.jobHealingPotencyModifiers(this)),T.modifiers=M}if(y&&(this.hasResourceAvailable("TINCTURE")&&!n.hasBuff(P.Tincture)&&n.addBuff(P.Tincture),this.jobSpecificAddHealingBuffCovers(n,t)),t.onConfirm(this,n),this.addEvent(new Le(t.name+" applied",t.applicationDelay,()=>{A&&(O.resolvePotency(A),this.hasResourceAvailable("IN_COMBAT")||this.resources.get("IN_COMBAT").gain(1)),T&&O.resolveHealingPotency(T),t.onApplication(this,n)})),A&&!this.hasResourceAvailable("IN_COMBAT")){const M=this.resources.timeTillReady("IN_COMBAT");(M===0||M>t.applicationDelay)&&this.resources.addResourceEvent({rscType:"IN_COMBAT",name:"begin combat if necessary",delay:t.applicationDelay,fnOnRsc:v=>{v.gain(1)}})}};if(d===0||t.isInstantFn(this))this.resources.takeResourceLock("NOT_ANIMATION_LOCKED",t.animationLockFn(this)),S();else{this.resources.takeResourceLock("MOVEMENT",d-ul.getSlidecastWindow(d)),this.resources.takeResourceLock("NOT_CASTER_TAXED",this.config.getAfterTaxCastTime(d));const I=d-ul.getSlidecastWindow(d);this.addEvent(new Le(t.name+" captured",I,()=>{t.validateAttempt(this)?S():O.reportInterruption({failNode:n,failIndex:l})}))}s.useStackWithRecast(this.config.getAfterTaxGCD(f)),c&&c.useStack()}useAbility(t,n){console.assert(n);let l=this.cooldowns.get(t.cdName);const s=t.potencyFn(this);let c;if((s>0||t.drawsAggro)&&(c=new Na({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t.name,aspect:t.aspect,basePotency:s,snapshotTime:this.getDisplayTime(),description:"",targetCount:n.targetCount,falloff:t.falloff})),c&&s>0){const g=[];this.hasResourceAvailable("TINCTURE")&&g.push(ue.Tincture),g.push(...t.jobPotencyModifiers(this)),c.modifiers=g,n.addPotency(c)}const d=this.resources.get("AUTOS_ENGAGED").available(1),f=this.autoAttackDelay,E=this.findAutoAttackTimerInQueue(),A=t.startsAuto||c&&s>0;if(A)if(this.isInCombat())d||A&&this.startAutoAttackTimer(E,f);else{const g=E===-1?f:E;this.startAutoAttackTimer(g,f,void 0)}const R=t.healingPotencyFn(this);let T;if(R>0){T=new Na({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t.name,aspect:t.aspect,basePotency:R,snapshotTime:this.getDisplayTime(),description:"",targetCount:n.healTargetCount,falloff:0});const g=[];this.hasResourceAvailable("TINCTURE")&&g.push(ue.Tincture),g.push(...t.jobHealingPotencyModifiers(this)),T.modifiers=g,n.addHealingPotency(T)}s>0&&!n.hasBuff(P.Tincture)&&(this.hasResourceAvailable("TINCTURE")&&n.addBuff(P.Tincture),this.jobSpecificAddDamageBuffCovers(n,t)),R>0&&(this.hasResourceAvailable("TINCTURE")&&!n.hasBuff(P.Tincture)&&n.addBuff(P.Tincture),this.jobSpecificAddHealingBuffCovers(n,t));const S=t.manaCostFn(this);if(S>0&&this.resources.get("MANA").consume(S),t.onConfirm(this,n),c&&!this.hasResourceAvailable("IN_COMBAT")){const g=this.resources.timeTillReady("IN_COMBAT");(g===0||g>t.applicationDelay)&&this.resources.addResourceEvent({rscType:"IN_COMBAT",name:"begin combat if necessary",delay:t.applicationDelay,fnOnRsc:I=>{I.gain(1)}})}t.applicationDelay>0?this.addEvent(new Le(t.name+" applied",t.applicationDelay,()=>{c&&O.resolvePotency(c),T&&O.resolveHealingPotency(T),t.onApplication(this,n)})):(c&&O.resolvePotency(c),T&&O.resolveHealingPotency(T),t.onApplication(this,n)),l.useStack(),this.resources.takeResourceLock("NOT_ANIMATION_LOCKED",t.animationLockFn(this))}useLimitBreak(t,n,l){const s=this.cooldowns.get(t.cdName),c=t.castTimeFn(this),d=c>0?ul.getSlidecastWindow(c):0,f=t.potencyFn(this);let E;f>0&&(E=new Na({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t.name,aspect:t.aspect,basePotency:f,snapshotTime:void 0,description:"",targetCount:n.targetCount,falloff:t.falloff}),n.addPotency(E));const A=t.healingPotencyFn(this);let R;A>0&&(R=new Na({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t.name,aspect:t.aspect,basePotency:A,snapshotTime:void 0,description:"",targetCount:n.healTargetCount,falloff:0}),n.addHealingPotency(R));const T=()=>{t.onConfirm(this,n),E&&(E.snapshotTime=this.getDisplayTime()),R&&(R.snapshotTime=this.getDisplayTime()),this.addEvent(new Le(t.name+" applied",t.applicationDelay,()=>{E&&O.resolvePotency(E),R&&O.resolveHealingPotency(R),t.onApplication(this,n)})),this.resources.takeResourceLock("NOT_ANIMATION_LOCKED",d+t.animationLockFn(this))};if(c===0)T();else{this.resources.takeResourceLock("MOVEMENT",c-d),this.resources.takeResourceLock("NOT_CASTER_TAXED",this.config.getAfterTaxCastTime(c));const g=c-d;this.addEvent(new Le(t.name+" captured",g,()=>{t.validateAttempt(this)?T():O.reportInterruption({failNode:n,failIndex:l})}))}s.useStack()}timeTillAnySkillAvailable(){let t=this.resources.timeTillReady("NOT_ANIMATION_LOCKED"),n=this.resources.timeTillReady("NOT_CASTER_TAXED");return Math.max(t,n)}findNextQueuedEventByTag(t){for(let n=0;n<this.eventsQueue.length;n++){let l=this.eventsQueue[n];if(l.hasTag(t))return l}}hasResourceAvailable(t,n){return this.resources.get(t).available(n??1)}hasResourceExactly(t,n){return this.resources.get(t).availableAmount()===n}enqueueResourceDrop(t,n,l){if(n===void 0){const c=Ut(this.job,t);console.assert(c==null?void 0:c.maxTimeout,`could not find timeout declaration for resource ${t}`),n=c.maxTimeout}const s=(l===void 0?"drop all ":`drop ${l} `)+t;this.resources.get(t).removeTimer(),this.resources.addResourceEvent({rscType:t,name:s,delay:n,fnOnRsc:c=>{c.consume(l??c.availableAmountIncludingDisabled());const d=Ut(this.job,c.type);d.warningOnTimeout&&O.reportWarning(d.warningOnTimeout)}})}getOverriddenDots(t){return te(this,gu).get(t)??[]}getOverriddenHots(t){return te(this,_u).get(t)??[]}applyDoT(t,n){this.applyOverTimeEffect(t,n,"damage")}applyHoT(t,n){this.applyOverTimeEffect(t,n,"healing")}applyOverTimeEffect(t,n,l){const s=this.resources.get(t),c=Ut(this.config.job,t).maxTimeout;let d;if((l==="damage"?this.getOverriddenDots(t):this.getOverriddenHots(t)).forEach(E=>{if(E!==t){if(!this.hasResourceAvailable(E)){const A=this.resources.get(E).getLastExpirationTime();if(A){const R=this.getDisplayTime()-A;d=d===void 0?R:Math.min(d,R)}return}n.setOverTimeOverrideAmount(t,n.getOverTimeOverrideAmount(t,l)+this.resources.timeTillReady(E),l),O.reportOverTimeDrop(this.getDisplayTime(),E,l),d=0,this.tryConsumeResource(E)}}),s.available(1))console.assert(s.node),s.node.removeUnresolvedOvertimePotencies(l),n.setOverTimeOverrideAmount(t,n.getOverTimeOverrideAmount(t,l)+this.resources.timeTillReady(t),l),s.overrideTimer(this,c);else{const E=this.getDisplayTime()-(s.getLastExpirationTime()??0);d=d===void 0?E:Math.min(d,E),s.gain(1);const A=l==="damage"?" DoT":" HoT";O.reportOverTimeStart(this.getDisplayTime(),t,l),this.resources.addResourceEvent({rscType:t,name:"drop "+t+A,delay:c,fnOnRsc:R=>{R.consume(1),O.reportOverTimeDrop(this.getDisplayTime(),t,l)}})}n.setOverTimeGap(t,d??0,l),s.node=n,s.tickCount=0,te(this,Nr).includes(t)&&(this.handleDoTTick(t),O.reportDotTick(this.time,t)),te(this,Cr).includes(t)&&(this.handleHoTTick(t),O.reportHotTick(this.time,t))}addDoTPotencies(t){this.addOverTimePotencies(t,"damage")}addHoTPotencies(t){this.addOverTimePotencies(t,"healing")}addOverTimePotencies(t,n){const l=t.modifiers??[];this.hasResourceAvailable("TINCTURE")&&!l.includes(ue.Tincture)&&(l.push(ue.Tincture),t.node.addBuff(P.Tincture));const s=Ut(this.config.job,t.effectName).maxTimeout,c=te(this,Nr).includes(t.effectName)||te(this,Cr).includes(t.effectName),d=s/(t.tickFrequency??3)+(c?1:0),f=n==="damage"?"DoT":"HoT",E=n==="damage"?t.node.targetCount:t.node.healTargetCount;for(let A=0;A<d;A++){let R=new Na({config:O.record.config??O.gameConfig,sourceTime:this.getDisplayTime(),sourceSkill:t.skillName,aspect:t.aspect??ge.Other,basePotency:this.config.adjustedOvertimePotency(t.tickPotency,t.speedStat),snapshotTime:this.getDisplayTime(),description:Wa(t.effectName)+` ${f} `+(A+1)+`/${d}`,targetCount:E,falloff:0});R.modifiers=l,t.node.addOverTimePotency(R,t.effectName,n)}}refreshDot(t,n=!1){this.refreshOverTimeEffect(t,"damage",n)}refreshHot(t){this.refreshOverTimeEffect(t,"healing",!1)}refreshOverTimeEffect(t,n,l){!l&&!this.hasResourceAvailable(t.effectName)||(this.addOverTimePotencies(t,n),this.applyOverTimeEffect(t.effectName,t.node,n))}timeTillNextMpGainEvent(){let t=this.findNextQueuedEventByTag(sn.ManaGain);return t?t.timeTillEvent:0}timeTillNextDamageEvent(){return this.resources.timeTillReady("IN_COMBAT")}getSkillAvailabilityStatus(t,n=!1){let l=this.skillsList.get(t),s=_e(this,Xf,kC).call(this,l.name),c=l.manaCostFn(this),d=this.job==="BLM"&&this.resources.get("LEY_LINES").available(1),f=l.kind==="weaponskill"||l.kind==="spell"||l.kind==="limitbreak"?l.castTimeFn(this):0,E=f===0||l.kind==="ability"||l.kind!=="limitbreak"&&l.isInstantFn(this),A=this.resources.get("MANA").availableAmount(),R=s>ma.epsilon,T=c<=A,S=l.validateAttempt(this),g=this.config.level>=l.unlockLevel,I=Rf();if(R&&I.addUnavailableReason(Et.Blocked),l.secondaryCd&&this.cooldowns.get(l.secondaryCd.cdName).stacksAvailable()===0&&I.addUnavailableReason(Et.SecondaryBlocked),g||I.addUnavailableReason(Et.SkillNotUnlocked),S||I.addUnavailableReason(Et.RequirementsNotMet),T||I.addUnavailableReason(Et.NotEnoughMP),l.name==="MEDITATE"&&(s>ma.epsilon||this.cooldowns.get("cd_GCD").timeTillNextStackAvailable()>ma.epsilon)){const oe=I.unavailableReasons.indexOf(Et.RequirementsNotMet);oe>=0&&I.unavailableReasons.splice(oe,1),I.addUnavailableReason(Et.Blocked)}l.requiresCombat&&I.unavailableReasons.includes(Et.RequirementsNotMet)&&(I.addUnavailableReason(Et.NotInCombat),s=this.timeTillNextDamageEvent());let b=this.cooldowns.get(l.cdName);const y=l.secondaryCd?this.cooldowns.get(l.secondaryCd.cdName):void 0;let M=b.timeTillNextStackAvailable()%b.currentStackCd();const v=l.secondaryCd?this.cooldowns.timeTillNextStackAvailable(l.secondaryCd.cdName):void 0;let U=b.currentStackCd();if(t==="MEDITATE"&&M<ma.epsilon){const oe=this.cooldowns.get("cd_GCD"),de=oe.currentStackCd();oe.timeTillNextStackAvailable()>M&&(b=oe,U=de,M=oe.timeTillNextStackAvailable(),s=M)}const H=b.stacksAvailable(),K=b.maxStacks();let F=(y==null?void 0:y.currentStackCd())??0,x=0;I.ready()&&(l.kind==="spell"?x=(E?0:f-ul.getSlidecastWindow(f))+l.applicationDelay:l.kind==="limitbreak"?x=f+l.applicationDelay:x=l.applicationDelay);const re=(y==null?void 0:y.stacksAvailable())??0,ie=(y==null?void 0:y.maxStacks())??0,se=l.highlightIf(this);return{skillName:l.name,status:I,stacksAvailable:ie>0?re:H,maxStacks:Math.max(K,ie),castTime:f,instantCast:E,cdRecastTime:U,secondaryCdRecastTime:F,timeTillNextStackReady:M,timeTillSecondaryReady:v,timeTillAvailable:s,timeTillDamageApplication:x,capturedManaCost:c,highlight:se,llCovered:d,usedAt:this.getDisplayTime()}}useSkill(t,n,l){const s=this.skillsList.get(t);s.onExecute(this,n),s.falloff===void 0&&n.setTargetCount(1),s.aoeHeal&&n.setHealTargetCount(this.resources.get("PARTY_SIZE").availableAmount()),s.kind==="spell"||s.kind==="weaponskill"?this.useSpellOrWeaponskill(s,n,l):s.kind==="ability"?this.useAbility(s,n):s.kind==="limitbreak"&&this.useLimitBreak(s,n,l)}useInvalidSkill(t,n){const l=this.skillsList.get(t);if(l.falloff===void 0&&n.setTargetCount(1),l.aoeHeal&&n.setHealTargetCount(this.resources.get("PARTY_SIZE").availableAmount()),l.kind==="spell"||l.kind==="weaponskill"){const s=l.castTimeFn(this),c=l.recastTimeFn(this);s===0||l.isInstantFn(this)?this.resources.takeResourceLock("NOT_ANIMATION_LOCKED",l.animationLockFn(this)):this.resources.takeResourceLock("NOT_CASTER_TAXED",this.config.getAfterTaxCastTime(s)),this.cooldowns.get("cd_GCD").useStackWithRecast(this.config.getAfterTaxGCD(c))}else if(l.kind==="ability")this.resources.takeResourceLock("NOT_ANIMATION_LOCKED",l.animationLockFn(this));else if(l.kind==="limitbreak"){const s=l.castTimeFn(this),c=ul.getSlidecastWindow(s);this.resources.takeResourceLock("NOT_ANIMATION_LOCKED",c+l.animationLockFn(this))}}getPartyBuffs(t){const n=new Map;return O.timeline.getBuffMarkers().filter(s=>s.time<=t&&s.time+s.duration>=t).forEach(s=>{const c=new pf(s.description);n.has(c.name)||(c.info.damageFactor===1?n.set(c.name,{kind:"critDirect",source:G.PARTY,buffType:c.name,critBonus:c.info.critBonus,dhBonus:c.info.dhBonus}):n.set(c.name,{kind:"multiplier",source:G.PARTY,buffType:c.name,potencyFactor:c.info.damageFactor}))}),n}tryConsumeResource(t,n=!1){const l=this.resources.get(t),s=n?l.availableAmount():1;return l.available(s)?(l.consume(s),l.available(s)||l.removeTimer(),!0):!1}setComboState(t,n){n===0?this.tryConsumeResource(t,!0):(this.resources.get(t).overrideCurrentValue(n),this.enqueueResourceDrop(t,30))}hasTraitUnlocked(t){return vN(t,this.config.level)}isInCombat(){return this.hasResourceAvailable("IN_COMBAT")}isBLMState(){return this.job==="BLM"}}Nr=new WeakMap,Cr=new WeakMap,gu=new WeakMap,_u=new WeakMap,Xf=new WeakSet,kC=function(t){var d;let n=this.skillsList.get(t),l=n.cdName;const s=(d=n.secondaryCd)==null?void 0:d.cdName;let c=this.cooldowns.timeTillAnyStackAvailable(l);return s&&(c=Math.max(c,this.cooldowns.timeTillAnyStackAvailable(s))),Math.max(this.timeTillAnySkillAvailable(),c)};const PC=["THUNDER_III","THUNDER_IV","HIGH_THUNDER","HIGH_THUNDER_II"],Dk=Object.keys(fR).filter(e=>!PC.includes(e));Object.keys(fR).forEach(e=>Ua(e,`BLM/${Xe[e].name}.png`));class yk extends Wt{jobSpecificOtherTargetedBuffViewProps(){return[...PC.map(t=>this.makeCommonTimer(t,!1))]}jobSpecificSelfTargetedBuffViewProps(){return Dk.map(t=>t==="LEY_LINES"?this.makeToggleableTimer(t):t==="THUNDERHEAD"||t==="FIRESTARTER"?this.makeCommonTimerless(t):this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){let n=this.state.resources.get("ENOCHIAN");const l=this.state.resources,s=this.state.getFireStacks(),c=this.state.getIceStacks(),d=l.get("UMBRAL_HEART").availableAmount(),f=l.get("PARADOX").availableAmount(),E=l.get("ASTRAL_SOUL").availableAmount(),A=n.available(1)?l.timeTillReady("POLYGLOT"):30,R=l.get("POLYGLOT").availableAmount(),T=this.state.hasTraitUnlocked("ENHANCED_POLYGLOT_II")&&3||this.state.hasTraitUnlocked("ENHANCED_POLYGLOT")&&2||1,S=[{kind:"counter",name:p({en:"AF/UI",zh:"冰火层数",ja:"AF/UB"}),color:s>0?t.blm.astralFire:t.blm.umbralIce,currentStacks:s>0?s:c,maxStacks:3},{kind:"counter",name:p({en:"hearts",zh:"冰针",ja:"アンブラルハート"}),color:t.blm.umbralHeart,currentStacks:d,maxStacks:3},{kind:"counter",name:p({en:"paradox",zh:"悖论",ja:"パラドックス"}),color:t.blm.paradox,currentStacks:f,maxStacks:1}];return this.state.hasTraitUnlocked("ENHANCED_ASTRAL_FIRE")&&S.push({kind:"counter",name:p({en:"astral soul",zh:"星极魂",ja:"アストラルソウル"}),color:t.blm.astralSoul,currentStacks:E,maxStacks:6}),S.push({kind:"bar",name:p({en:"poly timer",zh:"通晓计时",ja:"エノキ継続時間"}),color:t.blm.polyTimer,progress:1-A/30,valueString:A.toFixed(3)},{kind:"counter",name:p({en:"poly stacks",zh:"通晓层数",ja:"ポリグロット"}),color:t.blm.polyStacks,currentStacks:R,maxStacks:T}),S}}const an=(e,t,n)=>{$e("BLM",e,t,n??{})};an("POLYGLOT",3,{timeout:30});an("ASTRAL_FIRE",3);an("UMBRAL_ICE",3);an("UMBRAL_HEART",3);an("ASTRAL_SOUL",6);an("LEY_LINES",1,{timeout:20});an("ENOCHIAN",1);an("PARADOX",1);an("FIRESTARTER",1);an("THUNDERHEAD",1);an("THUNDER_III",1,{timeout:27});an("THUNDER_IV",1,{timeout:21});an("HIGH_THUNDER",1,{timeout:30});an("HIGH_THUNDER_II",1,{timeout:24});an("MANAWARD",1,{timeout:20});an("TRIPLECAST",3,{timeout:15.7});class vk extends qt{constructor(n){super(n);j(this,"thunderTickOffset");n.initialResourceOverrides.some(f=>(f.type==="ASTRAL_FIRE"||f.type==="UMBRAL_ICE")&&f.stacks>0)&&this.gainStatus("ENOCHIAN"),this.thunderTickOffset=this.nonProcRng()*3;const s=this.hasTraitUnlocked("ENHANCED_POLYGLOT_II")&&3||this.hasTraitUnlocked("ENHANCED_POLYGLOT")&&2||1;this.resources.set(new li("POLYGLOT",s,0));const c=this.hasTraitUnlocked("ENHANCED_MANAFONT")&&100||120,d=this.hasTraitUnlocked("ENHANCED_SWIFTCAST")&&40||60;[new Ke("cd_MANAFONT",c,1,1),new Ke("cd_SWIFTCAST",d,1,1)].forEach(f=>this.cooldowns.set(f)),this.registerRecurringEvents([{reportName:p({en:"Thunder DoT",zh:"雷DoT"}),groupedEffects:[{effectName:"HIGH_THUNDER",appliedBy:["HIGH_THUNDER"]},{effectName:"HIGH_THUNDER_II",appliedBy:["HIGH_THUNDER_II"]},{effectName:"THUNDER_III",appliedBy:["THUNDER_III"]},{effectName:"THUNDER_IV",appliedBy:["THUNDER_IV"]}]}])}get statusPropsGenerator(){return new yk(this)}jobSpecificRegisterRecurringEvents(){let n=l=>{this.hasEnochian()&&(l.availableAmount()===l.maxValue&&O.reportWarning(Fe.PolyglotOvercap),l.gain(1)),this.resources.addResourceEvent({rscType:"POLYGLOT",name:"gain polyglot if currently has enochian",delay:30,fnOnRsc:n})};n(this.resources.get("POLYGLOT"))}jobSpecificAddSpeedBuffCovers(n,l){this.hasResourceAvailable("LEY_LINES")&&l.cdName==="cd_GCD"&&n.addBuff(P.LeyLines)}captureManaRegenAmount(){return this.getFireStacks()>0?0:200}getFireStacks(){return this.resources.get("ASTRAL_FIRE").availableAmount()}getIceStacks(){return this.resources.get("UMBRAL_ICE").availableAmount()}getUmbralHearts(){return this.resources.get("UMBRAL_HEART").availableAmount()}getMP(){return this.resources.get("MANA").availableAmount()}gainThunderhead(){this.resources.get("THUNDERHEAD").gain(1)}switchToAForUI(n,l){console.assert(l>0);let s=this.resources.get("ASTRAL_FIRE"),c=this.resources.get("UMBRAL_ICE"),d=this.resources.get("UMBRAL_HEART"),f=this.resources.get("PARADOX"),E=this.resources.get("ASTRAL_SOUL");n==="ASTRAL_FIRE"?(s.availableAmount()===0&&this.gainThunderhead(),s.gain(l),this.hasTraitUnlocked("ASPECT_MASTERY_V")&&c.available(3)&&d.available(3)&&f.gain(1),c.consume(c.availableAmount())):n==="UMBRAL_ICE"&&(c.availableAmount()===0&&this.gainThunderhead(),c.gain(l),this.hasTraitUnlocked("ASPECT_MASTERY_V")&&s.available(3)&&f.gain(1),s.consume(s.availableAmount()),E.consume(E.availableAmount()))}gainUmbralMana(n=0){let l=0;switch(this.resources.get("UMBRAL_ICE").availableAmount()){case 1:l=2500;break;case 2:l=5e3;break;case 3:l=1e4;break;default:l=0;break}this.addEvent(new Le("gain umbral mana",n,()=>{this.resources.get("MANA").gain(l)}))}captureManaCost(n,l,s){const c=this.getIceStacks(),d=this.getFireStacks(),f=this.getUmbralHearts();if(n==="PARADOX"&&this.getIceStacks()>0||n==="FIRE_III"&&this.hasResourceAvailable("FIRESTARTER"))return 0;let E=1;return l===ge.Fire&&c>0||l===ge.Ice&&(c>0||d>0)?E=0:l===ge.Fire&&d>0&&f===0&&(E=2),s*E}captureSpellCastTimeAFUI(n,l){const s=this.config.adjustedCastTime(n,this.hasResourceAvailable("LEY_LINES")?15:void 0);let c=1;return(l===ge.Fire&&this.getIceStacks()===3||l===ge.Ice&&this.getFireStacks()===3)&&(c=.5),s*c}hasEnochian(){return this.hasResourceAvailable("ENOCHIAN")}startOrRefreshEnochian(){let n=this.resources.get("ENOCHIAN");n.available(1)||(this.resources.get("POLYGLOT").overrideTimer(this,30),n.gain(1))}loseEnochian(){this.resources.get("ENOCHIAN").consume(1);let n=this.resources.get("ASTRAL_FIRE"),l=this.resources.get("UMBRAL_ICE"),s=this.resources.get("UMBRAL_HEART"),c=this.resources.get("PARADOX"),d=this.resources.get("ASTRAL_SOUL");n.consume(n.availableAmount()),l.consume(l.availableAmount()),s.consume(s.availableAmount()),c.consume(c.availableAmount()),d.consume(d.availableAmount())}}const GC=e=>e.resources.get("LEY_LINES").availableAmountIncludingDisabled()>0,WR=e=>e.hasResourceAvailable("PARADOX"),wC=e=>e.hasTraitUnlocked("ENHANCED_ENOCHIAN_IV")&&1.27||e.hasTraitUnlocked("ENHANCED_ENOCHIAN_III")&&1.22||e.hasTraitUnlocked("ENHANCED_ENOCHIAN_II")&&1.15||1.1,na=(e,t,n)=>{const l=n.aspect??ge.Other;let s=lt((d,f)=>{n.baseCastTime===0||e==="DESPAIR"&&d.hasTraitUnlocked("ENHANCED_ASTRAL_FIRE")||e==="FOUL"&&d.hasTraitUnlocked("ENHANCED_FOUL")||e==="FIRE_III"&&d.hasResourceAvailable("FIRESTARTER")||d.tryConsumeResource("SWIFTCAST")||d.tryConsumeResource("TRIPLECAST")},(d,f)=>{d.getFireStacks()>0&&l===ge.Fire&&!["DESPAIR","FLARE_STAR","FLARE"].includes(e)&&!(e==="FIRE_III"&&d.hasResourceAvailable("FIRESTARTER"))&&d.tryConsumeResource("UMBRAL_HEART"),l===ge.Ice&&d.gainUmbralMana(n.applicationDelay)},n.onConfirm??ze);const c=n.onApplication??ze;return Fi("BLM",e,t,{...n,aspect:l,castTime:d=>d.captureSpellCastTimeAFUI(n.baseCastTime,l),recastTime:d=>d.config.adjustedGCD(2.5,d.hasResourceAvailable("LEY_LINES")?15:0),manaCost:d=>d.captureManaCost(e,l,n.baseManaCost),potency:d=>n.basePotency,isInstantFn:d=>e==="DESPAIR"&&d.hasTraitUnlocked("ENHANCED_ASTRAL_FIRE")||e==="FOUL"&&d.hasTraitUnlocked("ENHANCED_FOUL")||e==="FIRE_III"&&d.hasResourceAvailable("FIRESTARTER")||d.hasResourceAvailable("SWIFTCAST")||d.hasResourceAvailable("TRIPLECAST"),onConfirm:s,onApplication:c,jobPotencyModifiers:d=>{const f=[];if(d.hasResourceAvailable("ENOCHIAN")){const R=wC(d);f.push({kind:"multiplier",source:G.ENO,potencyFactor:R})}const E=d.getIceStacks(),A=d.getFireStacks();return E===1?l===ge.Fire?f.push({kind:"multiplier",source:G.UI1,potencyFactor:.9}):l===ge.Ice&&f.push({kind:"multiplier",source:G.UI1,potencyFactor:1}):E===2?l===ge.Fire?f.push({kind:"multiplier",source:G.UI2,potencyFactor:.8}):l===ge.Ice&&f.push({kind:"multiplier",source:G.UI2,potencyFactor:1}):E===3&&(l===ge.Fire?f.push({kind:"multiplier",source:G.UI3,potencyFactor:.7}):l===ge.Ice&&f.push({kind:"multiplier",source:G.UI3,potencyFactor:1})),A===1?l===ge.Ice?f.push({kind:"multiplier",source:G.AF1,potencyFactor:.9}):l===ge.Fire&&f.push({kind:"multiplier",source:G.AF1,potencyFactor:1.4}):A===2?l===ge.Ice?f.push({kind:"multiplier",source:G.AF2,potencyFactor:.8}):l===ge.Fire&&f.push({kind:"multiplier",source:G.AF2,potencyFactor:1.6}):A===3&&(l===ge.Ice?f.push({kind:"multiplier",source:G.AF3,potencyFactor:.7}):l===ge.Fire&&f.push({kind:"multiplier",source:G.AF3,potencyFactor:1.8})),f}})},cs=(e,t,n,l)=>Rt("BLM",e,t,n,l);na("BLIZZARD",1,{aspect:ge.Ice,baseCastTime:2,baseManaCost:400,basePotency:180,applicationDelay:.846,onConfirm:(e,t)=>{e.getFireStacks()===0?(e.switchToAForUI("UMBRAL_ICE",1),e.startOrRefreshEnochian()):(e.resources.get("ENOCHIAN").removeTimer(),e.loseEnochian())},replaceIf:[{newSkill:"PARADOX",condition:WR}]});const BC=e=>{e.resources.get("FIRESTARTER").gain(1)},Mk=e=>{let t=e.rng();(e.config.procMode===Kt.Always||e.config.procMode===Kt.RNG&&t<.4)&&BC(e)};na("FIRE",2,{aspect:ge.Fire,baseCastTime:2,baseManaCost:800,basePotency:180,applicationDelay:1.871,onConfirm:(e,t)=>{Mk(e),e.getIceStacks()===0?(e.switchToAForUI("ASTRAL_FIRE",1),e.startOrRefreshEnochian()):(e.resources.get("ENOCHIAN").removeTimer(),e.loseEnochian())},replaceIf:[{newSkill:"PARADOX",condition:WR}]});cs("TRANSPOSE",4,"cd_TRANSPOSE",{applicationDelay:0,cooldown:5,validateAttempt:e=>e.getFireStacks()>0||e.getIceStacks()>0,onApplication:(e,t)=>{(e.getFireStacks()!==0||e.getIceStacks()!==0)&&(e.switchToAForUI(e.getFireStacks()>0?"UMBRAL_ICE":"ASTRAL_FIRE",1),e.startOrRefreshEnochian())}});const Rh=(e,t)=>(n,l)=>{let s=0;switch(e){case"HIGH_THUNDER":s=60;break;case"THUNDER_III":s=50;break;case"THUNDER_IV":s=35;break;case"HIGH_THUNDER_II":s=40;break}const c=[];if(n.hasResourceAvailable("ENOCHIAN")){const f=wC(n);c.push({kind:"multiplier",source:G.ENO,potencyFactor:f})}console.assert(s>0,`${e} was applied as a Thunder DoT`),n.addDoTPotencies({node:l,effectName:t,skillName:e,tickPotency:s,speedStat:"sps",aspect:ge.Lightning,modifiers:c});let d=n.resources.get("THUNDERHEAD");d.consume(1),d.removeTimer()};na("THUNDER_III",45,{aspect:ge.Lightning,baseCastTime:0,baseManaCost:0,basePotency:120,applicationDelay:1.03,validateAttempt:e=>e.hasResourceAvailable("THUNDERHEAD"),onConfirm:Rh("THUNDER_III","THUNDER_III"),onApplication:(e,t)=>e.applyDoT("THUNDER_III",t),autoUpgrade:{trait:"THUNDER_MASTERY_III",otherSkill:"HIGH_THUNDER"},highlightIf:e=>e.hasResourceAvailable("THUNDERHEAD")});je("BLM","MANAWARD",30,"cd_MANAWARD",{rscType:"MANAWARD",applicationDelay:1.114,cooldown:120});cs("MANAFONT",30,"cd_MANAFONT",{applicationDelay:.2,cooldown:100,validateAttempt:e=>e.getFireStacks()>0,onConfirm:(e,t)=>{e=e,e.resources.get("ASTRAL_FIRE").gain(3),e.resources.get("UMBRAL_HEART").gain(3),e.hasTraitUnlocked("ASPECT_MASTERY_V")&&e.resources.get("PARADOX").gain(1),e.gainThunderhead(),e.startOrRefreshEnochian()},onApplication:(e,t)=>{e.resources.get("MANA").gain(1e4)}});na("FIRE_III",35,{aspect:ge.Fire,baseCastTime:3.5,baseManaCost:2e3,basePotency:290,applicationDelay:1.292,onConfirm:(e,t)=>{e.tryConsumeResource("FIRESTARTER"),e.switchToAForUI("ASTRAL_FIRE",3),e.startOrRefreshEnochian()},highlightIf:e=>e.hasResourceAvailable("FIRESTARTER")});na("BLIZZARD_III",35,{aspect:ge.Ice,baseCastTime:3.5,baseManaCost:800,basePotency:290,applicationDelay:.89,onConfirm:(e,t)=>{e.switchToAForUI("UMBRAL_ICE",3),e.startOrRefreshEnochian()}});na("FREEZE",40,{aspect:ge.Ice,baseCastTime:2,baseManaCost:1e3,basePotency:120,applicationDelay:.664,falloff:0,validateAttempt:e=>e.getIceStacks()>0,onConfirm:(e,t)=>e.resources.get("UMBRAL_HEART").gain(3)});na("FLARE",50,{aspect:ge.Fire,baseCastTime:2,baseManaCost:0,basePotency:240,applicationDelay:1.157,falloff:.3,validateAttempt:e=>e.getFireStacks()>0&&e.getMP()>=800,onConfirm:(e,t)=>{let n=e.resources.get("UMBRAL_HEART"),l=e.resources.get("MANA"),s=n.available(1)?l.availableAmount()*.66:l.availableAmount();e.resources.get("MANA").consume(s),n.consume(n.availableAmount()),e.resources.get("ASTRAL_FIRE").gain(3),e.hasTraitUnlocked("ENHANCED_ASTRAL_FIRE")&&e.resources.get("ASTRAL_SOUL").gain(3),e.startOrRefreshEnochian()}});je("BLM","LEY_LINES",52,"cd_LEY_LINES",{rscType:"LEY_LINES",applicationDelay:.49,cooldown:120,maxCharges:2,validateAttempt:e=>!(e.resources.get("LEY_LINES").availableAmountIncludingDisabled()>0),onApplication:(e,t)=>{e.resources.get("LEY_LINES").enabled=!0},replaceIf:[{newSkill:"RETRACE",condition:GC}]});na("BLIZZARD_IV",58,{aspect:ge.Ice,baseCastTime:2,baseManaCost:800,basePotency:300,applicationDelay:1.156,validateAttempt:e=>e.getIceStacks()>0,onConfirm:(e,t)=>e.resources.get("UMBRAL_HEART").gain(3)});na("FIRE_IV",60,{aspect:ge.Fire,baseCastTime:2,baseManaCost:800,basePotency:300,applicationDelay:1.159,validateAttempt:e=>e.getFireStacks()>0,onConfirm:(e,t)=>{e.hasTraitUnlocked("ENHANCED_ASTRAL_FIRE")&&e.resources.get("ASTRAL_SOUL").gain(1)}});cs("BETWEEN_THE_LINES",62,"cd_BETWEEN_THE_LINES",{applicationDelay:0,cooldown:3,animationLock:xa,validateAttempt:e=>e.resources.get("LEY_LINES").availableAmountIncludingDisabled()>0,onConfirm:(e,t)=>{e.resources.get("LEY_LINES").enabled=!0}});cs("AETHERIAL_MANIPULATION",50,"cd_AETHERIAL_MANIPULATION",{applicationDelay:0,cooldown:10,animationLock:xa});cs("TRIPLECAST",66,"cd_TRIPLECAST",{applicationDelay:0,cooldown:60,maxCharges:2,onApplication:(e,t)=>{const n=e.resources.get("TRIPLECAST");n.pendingChange&&n.removeTimer(),n.gain(3),e.enqueueResourceDrop("TRIPLECAST")}});na("FOUL",70,{baseCastTime:2,baseManaCost:0,basePotency:600,falloff:.25,applicationDelay:1.158,validateAttempt:e=>e.hasResourceAvailable("POLYGLOT"),onConfirm:(e,t)=>e.resources.get("POLYGLOT").consume(1),highlightIf:e=>e.hasResourceAvailable("POLYGLOT")});na("DESPAIR",72,{aspect:ge.Fire,baseCastTime:2,baseManaCost:0,basePotency:350,applicationDelay:.556,validateAttempt:e=>e.getFireStacks()>0&&e.getMP()>=800,onConfirm:(e,t)=>{const n=e.resources.get("MANA"),l=n.availableAmount();console.assert(l>=800,`tried to confirm despair at ${l} MP`),n.consume(l),e.resources.get("ASTRAL_FIRE").gain(3),e.startOrRefreshEnochian()}});na("UMBRAL_SOUL",35,{aspect:ge.Ice,baseCastTime:0,baseManaCost:0,basePotency:0,applicationDelay:.633,validateAttempt:e=>e.getIceStacks()>0,onConfirm:(e,t)=>{e.resources.get("UMBRAL_ICE").gain(1),e.resources.get("UMBRAL_HEART").gain(1)}});na("XENOGLOSSY",80,{baseCastTime:0,baseManaCost:0,basePotency:890,applicationDelay:.63,validateAttempt:e=>e.hasResourceAvailable("POLYGLOT"),onConfirm:(e,t)=>e.resources.get("POLYGLOT").consume(1),highlightIf:e=>e.hasResourceAvailable("POLYGLOT")});na("FIRE_II",18,{aspect:ge.Fire,baseCastTime:3,baseManaCost:1500,basePotency:80,falloff:0,applicationDelay:1.154,autoUpgrade:{trait:"ASPECT_MASTERY_IV",otherSkill:"HIGH_FIRE_II"},onConfirm:(e,t)=>{e.switchToAForUI("ASTRAL_FIRE",3),e.startOrRefreshEnochian()}});na("BLIZZARD_II",12,{aspect:ge.Ice,baseCastTime:3,baseManaCost:800,basePotency:80,falloff:0,applicationDelay:1.158,autoUpgrade:{trait:"ASPECT_MASTERY_IV",otherSkill:"HIGH_BLIZZARD_II"},onConfirm:(e,t)=>{e.switchToAForUI("UMBRAL_ICE",3),e.startOrRefreshEnochian()}});na("HIGH_FIRE_II",82,{aspect:ge.Fire,baseCastTime:3,baseManaCost:1500,basePotency:100,falloff:0,applicationDelay:1.154,autoDowngrade:{trait:"ASPECT_MASTERY_IV",otherSkill:"FIRE_II"},onConfirm:(e,t)=>{e.switchToAForUI("ASTRAL_FIRE",3),e.startOrRefreshEnochian()}});na("HIGH_BLIZZARD_II",82,{aspect:ge.Ice,baseCastTime:3,baseManaCost:800,basePotency:100,falloff:0,applicationDelay:1.158,autoDowngrade:{trait:"ASPECT_MASTERY_IV",otherSkill:"BLIZZARD_II"},onConfirm:(e,t)=>{e.switchToAForUI("UMBRAL_ICE",3),e.startOrRefreshEnochian()}});cs("AMPLIFIER",86,"cd_AMPLIFIER",{applicationDelay:0,cooldown:120,validateAttempt:e=>e.getFireStacks()>0||e.getIceStacks()>0,onApplication:(e,t)=>{let n=e.resources.get("POLYGLOT");n.available(n.maxValue)&&O.reportWarning(Fe.PolyglotOvercap),n.gain(1)}});na("PARADOX",90,{baseCastTime:0,baseManaCost:1600,basePotency:540,applicationDelay:.624,validateAttempt:WR,onConfirm:(e,t)=>{e.resources.get("PARADOX").consume(1),e.getFireStacks()>0?BC(e):e.getIceStacks()===0&&console.error("cannot cast Paradox outside of AF/UI")},replaceIf:[{newSkill:"BLIZZARD",condition:e=>!e.hasResourceAvailable("PARADOX")&&e.getIceStacks()>0},{newSkill:"FIRE",condition:e=>!e.hasResourceAvailable("PARADOX")&&e.getFireStacks()>0}],startOnHotbar:!1,highlightIf:e=>!0});na("HIGH_THUNDER",92,{aspect:ge.Lightning,baseCastTime:0,baseManaCost:0,basePotency:150,applicationDelay:.757,validateAttempt:e=>e.hasResourceAvailable("THUNDERHEAD"),onConfirm:Rh("HIGH_THUNDER","HIGH_THUNDER"),onApplication:(e,t)=>e.applyDoT("HIGH_THUNDER",t),autoDowngrade:{trait:"THUNDER_MASTERY_III",otherSkill:"THUNDER_III"},highlightIf:e=>e.hasResourceAvailable("THUNDERHEAD")});na("FLARE_STAR",100,{aspect:ge.Fire,baseCastTime:2,baseManaCost:0,basePotency:500,falloff:.65,applicationDelay:.622,validateAttempt:e=>e.hasResourceAvailable("ASTRAL_SOUL",6),onConfirm:(e,t)=>e.resources.get("ASTRAL_SOUL").consume(6),highlightIf:e=>e.resources.get("ASTRAL_SOUL").available(6)});na("THUNDER_IV",64,{aspect:ge.Lightning,baseCastTime:0,baseManaCost:0,basePotency:80,falloff:0,applicationDelay:1.16,validateAttempt:e=>e.hasResourceAvailable("THUNDERHEAD"),onConfirm:Rh("THUNDER_IV","THUNDER_IV"),onApplication:(e,t)=>e.applyDoT("THUNDER_IV",t),autoUpgrade:{trait:"THUNDER_MASTERY_III",otherSkill:"HIGH_THUNDER_II"},highlightIf:e=>e.hasResourceAvailable("THUNDERHEAD")});na("HIGH_THUNDER_II",92,{aspect:ge.Lightning,baseCastTime:0,baseManaCost:0,basePotency:100,falloff:0,applicationDelay:.8,validateAttempt:e=>e.hasResourceAvailable("THUNDERHEAD"),onConfirm:Rh("HIGH_THUNDER_II","HIGH_THUNDER_II"),onApplication:(e,t)=>e.applyDoT("HIGH_THUNDER_II",t),autoDowngrade:{trait:"THUNDER_MASTERY_III",otherSkill:"THUNDER_IV"},highlightIf:e=>e.hasResourceAvailable("THUNDERHEAD")});cs("RETRACE",96,"cd_RETRACE",{applicationDelay:0,cooldown:40,validateAttempt:GC,onConfirm:(e,t)=>{let n=e.resources.get("LEY_LINES");n.enabled=!0,console.assert(n.pendingChange!==void 0,"LL should def have a timer when Retrace is used"),n.pendingChange.timeTillEvent=Math.floor(n.pendingChange.timeTillEvent)+.5},startOnHotbar:!1});const FC=["CAUSTIC_BITE","STORMBITE"],Lk=Object.keys(hR).filter(e=>!FC.includes(e));Object.keys(hR).forEach(e=>Ua(e,`BRD/${Xe[e].name}.png`));class Hk extends Wt{jobSpecificOtherTargetedBuffViewProps(){return[...FC.map(t=>this.makeCommonTimer(t,!1))]}jobSpecificSelfTargetedBuffViewProps(){return[...Lk.map(t=>this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){const n=this.state.resources,l=n.get("PITCH_PERFECT"),s=n.get("REPERTOIRE"),c=[{kind:"counter",name:p({en:"Pitch Perfect"}),color:t.brd.pitchPerfect,currentStacks:l.availableAmount(),maxStacks:l.maxValue},{kind:"counter",name:p({en:"Paeon Repertoire"}),color:t.brd.repertoire,currentStacks:s.availableAmount(),maxStacks:s.maxValue}];if(this.state.hasTraitUnlocked("SOUL_VOICE")){const d=n.get("SOUL_VOICE");c.push({kind:"bar",name:p({en:"Soul Voice"}),color:t.brd.soulVoice,progress:d.availableAmount()/d.maxValue,valueString:d.availableAmount().toFixed(0)})}return this.state.hasTraitUnlocked("MINSTRELS_CODA")&&c.push({kind:"coda",name:p({en:"Coda"}),hasWanderers:this.state.hasResourceAvailable("WANDERERS_CODA"),hasMages:this.state.hasResourceAvailable("MAGES_CODA"),hasArmys:this.state.hasResourceAvailable("ARMYS_CODA"),wanderersColor:t.brd.wanderersCoda,magesColor:t.brd.magesCoda,armysColor:t.brd.armysCoda}),c}}const Lt=(e,t,n)=>{$e("BRD",e,t,n??{})};Lt("SOUL_VOICE",100);Lt("PITCH_PERFECT",3);Lt("REPERTOIRE",4);Lt("WANDERERS_CODA",1);Lt("MAGES_CODA",1);Lt("ARMYS_CODA",1);Lt("ETHOS_REPERTOIRE",4);Lt("MUSE_REPERTOIRE",4);Lt("HAWKS_EYE",1,{timeout:30});Lt("RAGING_STRIKES",1,{timeout:20});Lt("BARRAGE",1,{timeout:10});Lt("ARMYS_MUSE",4,{timeout:10});Lt("ARMYS_ETHOS",4,{timeout:30});Lt("BLAST_ARROW_READY",1,{timeout:10});Lt("RESONANT_ARROW_READY",1,{timeout:30});Lt("RADIANT_ENCORE_READY",1,{timeout:30});Lt("MAGES_BALLAD",1,{timeout:45});Lt("ARMYS_PAEON",1,{timeout:45});Lt("WANDERERS_MINUET",1,{timeout:45});Lt("BATTLE_VOICE",1,{timeout:20});Lt("WARDENS_PAEAN",1,{timeout:30});Lt("TROUBADOUR",1,{timeout:15});Lt("NATURES_MINNE",1,{timeout:15});Lt("RADIANT_FINALE",1,{timeout:20});Lt("RADIANT_CODA",3);Lt("CAUSTIC_BITE",1,{timeout:45});Lt("STORMBITE",1,{timeout:45});const FI=["WANDERERS_MINUET","MAGES_BALLAD","ARMYS_PAEON"],xk=["REFULGENT_ARROW","SHADOWBITE","WIDE_VOLLEY"];class Uk extends qt{constructor(t){super(t),this.hasTraitUnlocked("ENHANCED_BLOODLETTER")||this.cooldowns.set(new Ke("cd_HEARTBREAK_SHOT",15,2,2)),this.hasTraitUnlocked("ENHANCED_TROUBADOUR")||this.cooldowns.set(new Ke("cd_TROUBADOUR",120,1,1)),this.registerRecurringEvents([{reportName:Wa("STORMBITE"),groupedEffects:[{effectName:"STORMBITE",appliedBy:["STORMBITE","IRON_JAWS"]}]},{reportName:Wa("CAUSTIC_BITE"),groupedEffects:[{effectName:"CAUSTIC_BITE",appliedBy:["CAUSTIC_BITE","IRON_JAWS"]}]}])}get statusPropsGenerator(){return new Hk(this)}jobSpecificAddDamageBuffCovers(t,n){switch(this.hasResourceAvailable("RAGING_STRIKES")&&t.addBuff(P.RagingStrikes),this.hasResourceAvailable("BATTLE_VOICE")&&t.addBuff(P.BattleVoice),this.resources.get("RADIANT_FINALE").availableAmount()){case 1:t.addBuff(P.RadiantFinale1);break;case 2:t.addBuff(P.RadiantFinale2);break;case 3:t.addBuff(P.RadiantFinale3);break}this.hasResourceAvailable("BARRAGE")&&xk.includes(n.name)&&t.addBuff(P.Barrage),this.hasResourceAvailable("WANDERERS_MINUET")?t.addBuff(P.WanderersMinuet):this.hasResourceAvailable("MAGES_BALLAD")?t.addBuff(P.MagesBallad):this.hasResourceAvailable("ARMYS_PAEON")&&t.addBuff(P.ArmysPaeon)}songTick(t){this.resourceIsSong(t)&&this.hasResourceAvailable(t)&&(this.triggersEffect(.8)&&this.gainRepertoireEffect(t),this.resources.timeTillReady(t)>3+ma.epsilon&&this.addEvent(new Le(`${t} tick`,3,()=>{this.songTick(t)})))}gainRepertoireEffect(t){if(t||(this.hasResourceAvailable("WANDERERS_MINUET")?t="WANDERERS_MINUET":this.hasResourceAvailable("MAGES_BALLAD")?t="MAGES_BALLAD":this.hasResourceAvailable("ARMYS_PAEON")&&(t="ARMYS_PAEON")),!!t&&this.resourceIsSong(t)){switch(t){case"WANDERERS_MINUET":this.resources.get("PITCH_PERFECT").gain(1);break;case"MAGES_BALLAD":this.cooldowns.get("cd_HEARTBREAK_SHOT").restore(7.5);break;case"ARMYS_PAEON":this.resources.get("REPERTOIRE").gain(1);break}this.hasTraitUnlocked("SOUL_VOICE")&&(this.hasResourceAvailable("SOUL_VOICE",100)&&O.reportWarning(Fe.SoulVoiceOvercap),this.resources.get("SOUL_VOICE").gain(5))}}resourceIsSong(t){return FI.includes(t)}beginSong(t){if(this.resourceIsSong(t)){if(FI.forEach(n=>this.tryExpireSong(n)),t!=="ARMYS_PAEON"&&this.hasResourceAvailable("ARMYS_ETHOS")){const n=this.resources.get("ETHOS_REPERTOIRE").availableAmount();this.resources.get("MUSE_REPERTOIRE").gain(n),this.tryConsumeResource("ARMYS_ETHOS"),this.tryConsumeResource("ETHOS_REPERTOIRE",!0),this.gainStatus("ARMYS_MUSE")}if(this.hasTraitUnlocked("MINSTRELS_CODA")){const n=t==="WANDERERS_MINUET"?"WANDERERS_CODA":t==="MAGES_BALLAD"?"MAGES_CODA":"ARMYS_CODA";this.hasResourceAvailable(n)&&O.reportWarning(Fe.CodaOvercap),this.resources.get(n).gain(1)}this.resources.get(t).gain(1),this.resources.addResourceEvent({rscType:t,name:"drop "+t,delay:this.getStatusDuration(t),fnOnRsc:n=>this.tryExpireSong(t)}),this.addEvent(new Le(`${t} tick`,3,()=>{this.songTick(t)}))}}tryExpireSong(t){if(this.resourceIsSong(t)&&this.hasResourceAvailable(t)){switch(t){case"WANDERERS_MINUET":this.tryConsumeResource("PITCH_PERFECT",!0);break;case"ARMYS_PAEON":if(this.hasTraitUnlocked("ENHANCED_ARMYS_PAEON")){const n=this.resources.get("REPERTOIRE").availableAmount();n>0&&(this.resources.get("ETHOS_REPERTOIRE").gain(n),this.gainStatus("ARMYS_ETHOS")),this.tryConsumeResource("MUSE_REPERTOIRE",!0)}this.tryConsumeResource("REPERTOIRE",!0);break}this.tryConsumeResource(t)}}getCodaCount(){const t=this.resources.get("WANDERERS_CODA").availableAmount(),n=this.resources.get("MAGES_CODA").availableAmount(),l=this.resources.get("ARMYS_CODA").availableAmount();return t+n+l}getJobPotencyModifiers(t){const n=[];if([{rscType:"WANDERERS_MINUET",mod:ue.WanderersMinuet},{rscType:"MAGES_BALLAD",mod:ue.MagesBallad},{rscType:"ARMYS_PAEON",mod:ue.ArmysPaeon},{rscType:"RAGING_STRIKES",mod:ue.RagingStrikes},{rscType:"BATTLE_VOICE",mod:ue.BattleVoice}].forEach(s=>{this.hasResourceAvailable(s.rscType)&&n.push(s.mod)}),this.hasResourceAvailable("RADIANT_FINALE")){const s=this.resources.get("RADIANT_CODA").availableAmount();s===3?n.push(ue.RadiantFinaleThreeCoda):s===2?n.push(ue.RadiantFinaleTwoCoda):s===1&&n.push(ue.RadiantFinaleOneCoda)}if(this.hasResourceAvailable("BARRAGE"))switch(t){case"REFULGENT_ARROW":n.push(ue.BarrageRefulgent);break;case"SHADOWBITE":n.push(ue.BarrageShadowbite);break;case"WIDE_VOLLEY":n.push(ue.BarrageWideVolley);break}return n}getSpeedModifier(t){if(t==="ARMYS_PAEON")return this.resources.get("REPERTOIRE").availableAmount()*4;if(t==="ARMYS_MUSE"){const n=this.resources.get("MUSE_REPERTOIRE").availableAmount();return n===4?12:n===3?4:n}return 0}}const Vn=(e,t,n)=>Ni("BRD",e,t,{...n,recastTime:l=>{let s;l.hasResourceAvailable("ARMYS_PAEON")?s="ARMYS_PAEON":l.hasResourceAvailable("ARMYS_MUSE")&&(s="ARMYS_MUSE");const c=l.getSpeedModifier(s);return l.config.adjustedSksGCD(2.5,c)},jobPotencyModifiers:l=>l.getJobPotencyModifiers(e)}),Ao=(e,t,n,l)=>Rt("BRD",e,t,n,{...l,jobPotencyModifiers:s=>s.getJobPotencyModifiers(e)}),us=(e,t,n,l)=>je("BRD",e,t,n,{...l});Vn("HEAVY_SHOT",1,{potency:160,applicationDelay:1.47,onApplication:e=>e.maybeGainProc("HAWKS_EYE",.2),autoUpgrade:{trait:"HEAVY_SHOT_MASTERY",otherSkill:"BURST_SHOT"}});Vn("BURST_SHOT",1,{startOnHotbar:!1,potency:[["NEVER",200],["RANGED_MASTERY",220]],applicationDelay:1.47,onApplication:e=>e.maybeGainProc("HAWKS_EYE",.35)});Vn("REFULGENT_ARROW",70,{potency:[["NEVER",260],["RANGED_MASTERY",280]],applicationDelay:1.47,onConfirm:e=>{e.hasResourceAvailable("BARRAGE")?e.tryConsumeResource("BARRAGE"):e.tryConsumeResource("HAWKS_EYE")},validateAttempt:e=>e.hasResourceAvailable("HAWKS_EYE")||e.hasResourceAvailable("BARRAGE"),highlightIf:e=>e.hasResourceAvailable("HAWKS_EYE")||e.hasResourceAvailable("BARRAGE")});const Zm=[{skillName:"CAUSTIC_BITE",dotName:"CAUSTIC_BITE",initialPotency:150,tickPotency:20},{skillName:"STORMBITE",dotName:"STORMBITE",initialPotency:100,tickPotency:25}];Zm.forEach(e=>{Vn(e.skillName,1,{potency:e.initialPotency,applicationDelay:1.29,onConfirm:(t,n)=>t.addDoTPotencies({node:n,effectName:e.dotName,skillName:e.skillName,tickPotency:e.tickPotency,speedStat:"sks",modifiers:t.getJobPotencyModifiers(e.skillName)}),onApplication:(t,n)=>{t.applyDoT(e.dotName,n),t.hasTraitUnlocked("BITE_MASTERY_II")&&t.maybeGainProc("HAWKS_EYE",.35)}})});Vn("IRON_JAWS",56,{potency:100,applicationDelay:.67,onConfirm:(e,t)=>{const n=Zm.map(l=>e.hasResourceAvailable(l.dotName));e.addEvent(new Le("iron jaws dot refresh",.67,()=>{Zm.forEach((l,s)=>{e.refreshDot({node:t,effectName:l.dotName,tickPotency:l.tickPotency,skillName:"IRON_JAWS",speedStat:"sks",modifiers:e.getJobPotencyModifiers("IRON_JAWS")},n[s])}),e.hasTraitUnlocked("BITE_MASTERY_II")&&e.maybeGainProc("HAWKS_EYE",.35)}))}});Vn("APEX_ARROW",80,{potency:e=>{const t=e.resources.get("SOUL_VOICE"),n=20,l=e.hasTraitUnlocked("RANGED_MASTERY")?120:100,s=e.hasTraitUnlocked("RANGED_MASTERY")?600:500,c=1*(t.availableAmount()-n)/(t.maxValue-n);return(s-l)*c+l},falloff:0,applicationDelay:1.07,onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_APEX_ARROW")&&e.resources.get("SOUL_VOICE").availableAmount()>=80&&e.gainStatus("BLAST_ARROW_READY"),e.tryConsumeResource("SOUL_VOICE",!0)},validateAttempt:e=>e.hasResourceAvailable("SOUL_VOICE",20),highlightIf:e=>e.hasResourceAvailable("SOUL_VOICE",80),replaceIf:[{newSkill:"BLAST_ARROW",condition:e=>e.hasResourceAvailable("BLAST_ARROW_READY")}]});Vn("BLAST_ARROW",86,{startOnHotbar:!1,potency:600,falloff:.5,applicationDelay:1.65,validateAttempt:e=>e.hasResourceAvailable("BLAST_ARROW_READY"),highlightIf:e=>e.hasResourceAvailable("BLAST_ARROW_READY"),onConfirm:e=>e.tryConsumeResource("BLAST_ARROW_READY")});Ao("EMYPREAL_ARROW",54,"cd_EMPYREAL_ARROW",{potency:[["NEVER",240],["RANGED_MASTERY",260]],cooldown:15,applicationDelay:1.03,onConfirm:e=>e.gainRepertoireEffect()});Ao("BLOODLETTER",12,"cd_HEARTBREAK_SHOT",{potency:130,cooldown:15,maxCharges:3,applicationDelay:1.65,autoUpgrade:{otherSkill:"HEARTBREAK_SHOT",trait:"BLOODLETTER_MASTERY"}});Ao("HEARTBREAK_SHOT",92,"cd_HEARTBREAK_SHOT",{startOnHotbar:!1,potency:180,cooldown:15,maxCharges:3,applicationDelay:1.65});Ao("SIDEWINDER",60,"cd_SIDEWINDER",{potency:[["NEVER",320],["RANGED_MASTERY",400]],cooldown:60,applicationDelay:.53});const kk=[{skillName:"WANDERERS_MINUET",song:"WANDERERS_MINUET",skillLevel:52,cdName:"cd_WANDERERS_MINUET",replaceIf:[{newSkill:"PITCH_PERFECT",condition:e=>e.hasResourceAvailable("WANDERERS_MINUET")}]},{skillName:"MAGES_BALLAD",song:"MAGES_BALLAD",skillLevel:30,cdName:"cd_MAGES_BALLAD"},{skillName:"ARMYS_PAEON",song:"ARMYS_PAEON",skillLevel:40,cdName:"cd_ARMYS_PAEON"}];kk.forEach(e=>{Ao(e.skillName,e.skillLevel,e.cdName,{applicationDelay:0,requiresCombat:!0,cooldown:120,replaceIf:e.replaceIf,onConfirm:t=>t.beginSong(e.song)})});Ao("PITCH_PERFECT",52,"cd_PITCH_PERFECT",{startOnHotbar:!1,applicationDelay:.8,cooldown:1,potency:e=>{const t=e.resources.get("PITCH_PERFECT").availableAmount();return t===3?360:t===2?220:100},falloff:.5,onConfirm:e=>e.tryConsumeResource("PITCH_PERFECT",!0),validateAttempt:e=>e.hasResourceAvailable("WANDERERS_MINUET")&&e.hasResourceAvailable("PITCH_PERFECT"),highlightIf:e=>e.hasResourceAvailable("WANDERERS_MINUET")&&e.hasResourceAvailable("PITCH_PERFECT")});us("BARRAGE",38,"cd_BARRAGE",{rscType:"BARRAGE",applicationDelay:0,cooldown:120,onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_BARRAGE")&&e.gainStatus("RESONANT_ARROW_READY")},replaceIf:[{newSkill:"RESONANT_ARROW",condition:e=>e.hasResourceAvailable("RESONANT_ARROW_READY")}]});Vn("RESONANT_ARROW",96,{startOnHotbar:!1,potency:600,falloff:.5,applicationDelay:1.16,onConfirm:e=>e.tryConsumeResource("RESONANT_ARROW_READY"),validateAttempt:e=>e.hasResourceAvailable("RESONANT_ARROW_READY"),highlightIf:e=>e.hasResourceAvailable("RESONANT_ARROW_READY")});us("RADIANT_FINALE",90,"cd_RADIANT_FINALE",{rscType:"RADIANT_FINALE",applicationDelay:.62,cooldown:110,onConfirm:e=>{const t=e.getCodaCount();e.resources.get("RADIANT_CODA").overrideCurrentValue(t),e.tryConsumeResource("WANDERERS_CODA"),e.tryConsumeResource("MAGES_CODA"),e.tryConsumeResource("ARMYS_CODA"),e.hasTraitUnlocked("ENHANCED_RADIANT_FINALE")&&e.gainStatus("RADIANT_ENCORE_READY")},validateAttempt:e=>e.getCodaCount()>0,replaceIf:[{newSkill:"RADIANT_ENCORE",condition:e=>e.hasResourceAvailable("RADIANT_ENCORE_READY")}]});Vn("RADIANT_ENCORE",100,{startOnHotbar:!1,potency:e=>{const t=e.resources.get("RADIANT_CODA").availableAmount();return t===3?900:t===2?600:500},falloff:.5,applicationDelay:1.96,onConfirm:e=>e.tryConsumeResource("RADIANT_ENCORE_READY"),validateAttempt:e=>e.hasResourceAvailable("RADIANT_ENCORE_READY"),highlightIf:e=>e.hasResourceAvailable("RADIANT_ENCORE_READY")});us("RAGING_STRIKES",4,"cd_RAGING_STRIKES",{rscType:"RAGING_STRIKES",applicationDelay:.53,cooldown:120});us("BATTLE_VOICE",50,"cd_BATTLE_VOICE",{rscType:"BATTLE_VOICE",applicationDelay:.62,cooldown:120});Vn("QUICK_NOCK",18,{potency:110,applicationDelay:1.11,onApplication:e=>e.maybeGainProc("HAWKS_EYE",.2),falloff:0,autoUpgrade:{trait:"QUICK_NOCK_MASTERY",otherSkill:"LADONSBITE"}});Vn("LADONSBITE",82,{startOnHotbar:!1,potency:140,falloff:0,applicationDelay:1.11,onApplication:e=>e.maybeGainProc("HAWKS_EYE",.35)});Vn("WIDE_VOLLEY",18,{potency:140,falloff:0,applicationDelay:1.43,onConfirm:e=>{e.hasResourceAvailable("BARRAGE")?e.tryConsumeResource("BARRAGE"):e.tryConsumeResource("HAWKS_EYE")},validateAttempt:e=>e.hasResourceAvailable("HAWKS_EYE")||e.hasResourceAvailable("BARRAGE"),highlightIf:e=>e.hasResourceAvailable("HAWKS_EYE")||e.hasResourceAvailable("BARRAGE"),autoUpgrade:{trait:"WIDE_VOLLEY_MASTERY",otherSkill:"SHADOWBITE"}});Vn("SHADOWBITE",72,{startOnHotbar:!1,potency:200,falloff:0,applicationDelay:1.43,onConfirm:e=>{e.hasResourceAvailable("BARRAGE")?e.tryConsumeResource("BARRAGE"):e.tryConsumeResource("HAWKS_EYE")},validateAttempt:e=>e.hasResourceAvailable("HAWKS_EYE")||e.hasResourceAvailable("BARRAGE"),highlightIf:e=>e.hasResourceAvailable("HAWKS_EYE")||e.hasResourceAvailable("BARRAGE")});Ao("RAIN_OF_DEATH",45,"cd_HEARTBREAK_SHOT",{potency:100,cooldown:15,maxCharges:3,falloff:0,applicationDelay:1.65});us("WARDENS_PAEAN",35,"cd_WARDENS_PAEAN",{rscType:"WARDENS_PAEAN",cooldown:45,applicationDelay:.62});us("NATURES_MINNE",35,"cd_NATURES_MINNE",{rscType:"NATURES_MINNE",cooldown:120,applicationDelay:.62});Ao("REPELLING_SHOT",15,"cd_REPELLING_SHOT",{cooldown:30,animationLock:xa});us("TROUBADOUR",56,"cd_TROUBADOUR",{rscType:"TROUBADOUR",maxCharges:1,cooldown:90,applicationDelay:0});Object.keys(ER).filter(e=>!(e==="ESPRIT_PARTNER"||e==="STANDARD_FINISH_PARTNER")).forEach(e=>Ua(e,`DNC/${Xe[e].name}.png`));Ua("ESPRIT_PARTNER","DNC/Esprit.png");Ua("STANDARD_FINISH_PARTNER","DNC/Standard Finish.png");const zI=["ESPRIT_TECHNICAL","ESPRIT_PARTNER","STANDARD_FINISH_PARTNER","DANCE_PARTNER"];class Pk extends Wt{jobSpecificOtherTargetedBuffViewProps(){return zI.map(t=>t==="DANCE_PARTNER"?this.makeCommonTimerless(t,!1):this.makeCommonTimer(t,!1))}jobSpecificSelfTargetedBuffViewProps(){return[...Object.keys(ER).filter(t=>!zI.includes(t)).map(t=>t==="CLOSED_POSITION"||t==="RISING_RHYTHM"?this.makeCommonTimerless(t):this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){const n=this.state.resources,l=n.get("FEATHER_GAUGE").availableAmount(),s=n.get("STANDARD_DANCE").availableAmount(),c=n.get("TECHNICAL_DANCE").availableAmount(),d=[];if(this.state.hasTraitUnlocked("ESPRIT")){const f=n.get("ESPRIT_GAUGE").availableAmount();d.push({kind:"bar",name:p({en:"Esprit",zh:"伶俐"}),color:t.dnc.esprit,progress:f/100,valueString:f.toFixed(0)})}return d.push({kind:"counter",name:p({en:"Feathers",zh:"幻扇"}),color:t.dnc.feathers,currentStacks:l,maxStacks:4},{kind:"dance",name:p({en:"Standard",zh:"标准舞步计数"}),maxStacks:2,currentStacks:s,emboiteColor:t.dnc.emboite,entrechatColor:t.dnc.entrechat,jeteColor:t.dnc.jete,pirouetteColor:t.dnc.pirouette},{kind:"dance",name:p({en:"Technical",zh:"技巧舞步计数"}),maxStacks:4,currentStacks:c,emboiteColor:t.dnc.emboite,entrechatColor:t.dnc.entrechat,jeteColor:t.dnc.jete,pirouetteColor:t.dnc.pirouette}),d}statusLayoutFn(t){return u.jsxs("div",{children:[u.jsxs("div",{style:{display:"inline-block",verticalAlign:"top",width:"50%",height:"100%"},children:[u.jsxs("span",{style:{display:"block",marginBottom:10},children:[p({en:"time: ",zh:"战斗时间：",ja:"経過時間："}),`${ft.displayTime(t.time,3)} (${t.time.toFixed(3)})`]}),t.resources?u.jsx(IC,{data:{level:t.level,resources:t.resources},style:{height:"17em"}}):void 0]}),u.jsxs("div",{style:{position:"relative",display:"inline-block",float:"right",width:"50%"},children:[t.resourceLocks?u.jsx(pC,{data:t.resourceLocks}):void 0,u.jsx(Gf,{data:t.enemyBuffs,style:{marginTop:50,marginBottom:"2em"}}),u.jsx(Gf,{data:t.selfBuffs,style:{position:"absolute",right:0,width:"200%"}})]})]})}}const ot=(e,t,n)=>{$e("DNC",e,t,n??{})};ot("ESPRIT_GAUGE",100);ot("FEATHER_GAUGE",4);ot("STANDARD_DANCE",2);ot("TECHNICAL_DANCE",4);ot("SILKEN_SYMMETRY",1,{timeout:30});ot("SILKEN_FLOW",1,{timeout:30});ot("FLOURISHING_SYMMETRY",1,{timeout:30});ot("FLOURISHING_FLOW",1,{timeout:30});ot("THREEFOLD_FAN_DANCE",1,{timeout:30});ot("FOURFOLD_FAN_DANCE",1,{timeout:30});ot("FINISHING_MOVE_READY",1,{timeout:30});ot("FLOURISHING_STARFALL",1,{timeout:20});ot("STANDARD_STEP",1,{timeout:15});ot("STANDARD_FINISH",1,{timeout:60});ot("STANDARD_BONUS",2,{timeout:60});ot("ESPRIT",1,{timeout:60});ot("TECHNICAL_STEP",1,{timeout:15});ot("TECHNICAL_FINISH",1,{timeout:20.5});ot("TECHNICAL_BONUS",4,{timeout:20.5});ot("LAST_DANCE_READY",1,{timeout:30});ot("DANCE_OF_THE_DAWN_READY",1,{timeout:30});ot("FLOURISHING_FINISH",1,{timeout:30});ot("CLOSED_POSITION",1,{default:1});ot("DEVILMENT",1,{timeout:20});ot("SHIELD_SAMBA",1,{timeout:15});ot("IMPROVISATION",1,{timeout:15});ot("RISING_RHYTHM",4,{timeout:15});ot("IMPROVISATION_REGEN",1,{timeout:15});ot("IMPROVISED_FINISH",1,{timeout:30});ot("DANCE_PARTNER",1,{default:1});ot("ESPRIT_PARTNER",1,{timeout:60});ot("STANDARD_FINISH_PARTNER",1,{timeout:60});ot("ESPRIT_TECHNICAL",1,{timeout:20});ot("CASCADE_COMBO",1,{timeout:30});ot("WINDMILL_COMBO",1,{timeout:30});const Gk=["CASCADE","FOUNTAIN","WINDMILL","BLADESHOWER"],wk=["EMBOITE","ENTRECHAT","JETE","PIROUETTE"];class Bk extends qt{constructor(t){super(t),this.hasTraitUnlocked("ESPRIT")||this.resources.set(new li("ESPRIT_GAUGE",0,0));const n=this.hasTraitUnlocked("ENHANCED_EN_AVANT_II")?3:2;this.cooldowns.set(new Ke("cd_EN_AVANT",30,n,n));const l=this.hasTraitUnlocked("ENHANCED_SHIELD_SAMBA")?90:120;this.cooldowns.set(new Ke("cd_SHIELD_SAMBA",l,1,1)),this.registerRecurringEvents()}get statusPropsGenerator(){return new Pk(this)}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("TECHNICAL_FINISH")&&t.addBuff(P.TechnicalFinish),this.hasResourceAvailable("DEVILMENT")&&t.addBuff(P.Devilment)}cancelChanneledSkills(){this.tryConsumeResource("IMPROVISATION"),this.tryConsumeResource("RISING_RHYTHM",!0)}processComboStatus(t){if(!Gk.includes(t))return;const n=t==="CASCADE",l=t==="WINDMILL";this.setComboState("CASCADE_COMBO",n?1:0),this.setComboState("WINDMILL_COMBO",l?1:0)}getCurrentDanceStatus(){const t=this.hasResourceAvailable("STANDARD_STEP")?"STANDARD_DANCE":"TECHNICAL_DANCE";return this.resources.get(t).availableAmount()}processDanceStatus(t){if(!wk.includes(t))return;const n=this.hasResourceAvailable("STANDARD_STEP")?"STANDARD_DANCE":"TECHNICAL_DANCE";let l=0;switch(t){case"ENTRECHAT":l=1;break;case"JETE":l=2;break;case"PIROUETTE":l=3;break}const s=this.resources.get(n);s.availableAmount()===l&&s.gain(1)}gainProc(t){const n=Ut("DNC",t).maxTimeout;this.resources.get(t).available(1)?(t==="THREEFOLD_FAN_DANCE"&&O.reportWarning(Fe.FanThreeOverwrite),this.resources.get(t).overrideTimer(this,n)):(this.resources.get(t).gain(1),this.enqueueResourceDrop(t,n))}maybeGainProc(t,n=.5){if(this.config.procMode===Kt.Never)return;let l=this.rng();(this.config.procMode===Kt.Always||l<n)&&this.gainProc(t)}gainResource(t,n){const l=this.resources.get(t);l.availableAmount()+n>l.maxValue&&O.reportWarning(t==="ESPRIT_GAUGE"?Fe.EspritOvercap:Fe.FeatherOvercap),this.resources.get(t).gain(n)}maybeGainResource(t,n,l=.5){if(this.config.procMode===Kt.Never)return;let s=this.rng();(this.config.procMode===Kt.Always||s<l)&&this.gainResource(t,n)}simulatePartyEspritGain(){if(this.hasResourceAvailable("ESPRIT_TECHNICAL")){for(let t=0;t<this.resources.get("PARTY_SIZE").availableAmount()-1;t++)this.maybeGainResource("ESPRIT_GAUGE",10,.2);return}this.hasResourceAvailable("ESPRIT_PARTNER")&&this.maybeGainResource("ESPRIT_GAUGE",10,.2)}applyStandardFinish(t){if(t===0)return;this.gainProc("STANDARD_FINISH"),this.tryConsumeResource("STANDARD_BONUS",!0),this.resources.get("STANDARD_BONUS").gain(t);const n=Ut("DNC","STANDARD_FINISH").maxTimeout;this.enqueueResourceDrop("STANDARD_BONUS",n,t),this.hasResourceAvailable("DANCE_PARTNER")&&this.gainProc("STANDARD_FINISH_PARTNER"),this.hasTraitUnlocked("ESPRIT")&&(this.gainProc("ESPRIT"),this.hasResourceAvailable("DANCE_PARTNER")&&this.gainProc("ESPRIT_PARTNER")),this.hasTraitUnlocked("ENHANCED_STANDARD_FINISH")&&this.gainProc("LAST_DANCE_READY")}}const ia=e=>e.hasResourceAvailable("STANDARD_STEP")||e.hasResourceAvailable("TECHNICAL_STEP"),zC={newSkill:"EMBOITE",condition:e=>ia(e)},jC={newSkill:"ENTRECHAT",condition:e=>ia(e)},YC={newSkill:"JETE",condition:e=>ia(e)},KC={newSkill:"PIROUETTE",condition:e=>ia(e)},Xt=(e,t,n)=>{const l=lt(s=>{n.potency&&s.simulatePartyEspritGain()},n.onConfirm??ze,s=>s.processComboStatus(e));return Ni("DNC",e,t,{...n,onConfirm:l,jobPotencyModifiers:s=>{const c=[];if(n.combo&&s.resources.get(n.combo.resource).availableAmount()===n.combo.resourceValue&&c.push(Bi(We(s,n.combo.potency)-We(s,n.potency))),s.hasResourceAvailable("STANDARD_FINISH")){const d=s.resources.get("STANDARD_BONUS").availableAmount()===2?ue.DoubleStandardFinish:ue.SingleStandardFinish;c.push(d)}if(s.hasResourceAvailable("TECHNICAL_FINISH")){const d=s.resources.get("TECHNICAL_BONUS").availableAmount(),f=d===4?ue.QuadrupleTechnicalFinish:d===3?ue.TripleTechnicalFinish:ue.SingleTechnicalFinish;c.push(f)}return s.hasResourceAvailable("DEVILMENT")&&c.push(ue.Devilment),e==="STARFALL_DANCE"&&c.push(ue.AutoCDH),c}})},Ci=(e,t,n,l)=>Rt("DNC",e,t,n,{...l,onConfirm:l.onConfirm,jobPotencyModifiers:s=>{const c=[];if(s.hasResourceAvailable("STANDARD_FINISH")){const d=s.resources.get("STANDARD_BONUS").availableAmount()===2?ue.DoubleStandardFinish:ue.SingleStandardFinish;c.push(d)}if(s.hasResourceAvailable("TECHNICAL_FINISH")){const d=s.resources.get("TECHNICAL_BONUS").availableAmount(),f=d===4?ue.QuadrupleTechnicalFinish:d===3?ue.TripleTechnicalFinish:ue.SingleTechnicalFinish;c.push(f)}return s.hasResourceAvailable("DEVILMENT")&&c.push(ue.Devilment),c}}),VC=(e,t,n,l)=>je("DNC",e,t,n,{...l});Xt("EMBOITE",15,{startOnHotbar:!1,recastTime:1,onConfirm:e=>e.processDanceStatus("EMBOITE"),highlightIf:e=>ia(e)&&e.getCurrentDanceStatus()===0});Xt("ENTRECHAT",15,{startOnHotbar:!1,recastTime:1,onConfirm:e=>e.processDanceStatus("ENTRECHAT"),highlightIf:e=>ia(e)&&e.getCurrentDanceStatus()===1});Xt("JETE",15,{startOnHotbar:!1,recastTime:1,onConfirm:e=>e.processDanceStatus("JETE"),highlightIf:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===2});Xt("PIROUETTE",15,{startOnHotbar:!1,recastTime:1,onConfirm:e=>e.processDanceStatus("PIROUETTE"),highlightIf:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===3});Xt("CASCADE",1,{replaceIf:[zC],potency:[["NEVER",200],["DYNAMIC_DANCER",220]],recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.8,onConfirm:e=>{e.maybeGainProc("SILKEN_SYMMETRY"),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",5)}});Xt("FOUNTAIN",2,{replaceIf:[jC],potency:[["NEVER",100],["DYNAMIC_DANCER",120]],combo:{potency:[["NEVER",260],["DYNAMIC_DANCER",280]],resource:"CASCADE_COMBO",resourceValue:1},recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.98,onConfirm:e=>{e.maybeGainProc("SILKEN_FLOW"),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",5)},highlightIf:e=>e.resources.get("CASCADE_COMBO").availableAmount()===1});Xt("REVERSE_CASCADE",20,{replaceIf:[YC],potency:[["NEVER",260],["DYNAMIC_DANCER",280]],recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("SILKEN_SYMMETRY")||e.hasResourceAvailable("FLOURISHING_SYMMETRY"),onConfirm:e=>{e.hasResourceAvailable("SILKEN_SYMMETRY")?e.tryConsumeResource("SILKEN_SYMMETRY"):e.tryConsumeResource("FLOURISHING_SYMMETRY"),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",10),e.maybeGainResource("FEATHER_GAUGE",1)},highlightIf:e=>e.hasResourceAvailable("SILKEN_SYMMETRY")||e.hasResourceAvailable("FLOURISHING_SYMMETRY")});Xt("FOUNTAINFALL",40,{replaceIf:[KC],potency:[["NEVER",320],["DYNAMIC_DANCER",340]],recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:1.21,validateAttempt:e=>e.hasResourceAvailable("SILKEN_FLOW")||e.hasResourceAvailable("FLOURISHING_FLOW"),onConfirm:e=>{e.hasResourceAvailable("SILKEN_FLOW")?e.tryConsumeResource("SILKEN_FLOW"):e.tryConsumeResource("FLOURISHING_FLOW"),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",10),e.maybeGainResource("FEATHER_GAUGE",1)},highlightIf:e=>e.hasResourceAvailable("SILKEN_FLOW")||e.hasResourceAvailable("FLOURISHING_FLOW")});Ci("FAN_DANCE",30,"cd_FAN_DANCE",{potency:[["NEVER",150],["DYNAMIC_DANCER",180]],cooldown:1,applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("FEATHER_GAUGE")&&!ia(e),highlightIf:e=>e.hasResourceAvailable("FEATHER_GAUGE"),onConfirm:e=>{e.tryConsumeResource("FEATHER_GAUGE"),e.maybeGainProc("THREEFOLD_FAN_DANCE")}});Xt("SABER_DANCE",76,{replaceIf:[{newSkill:"DANCE_OF_THE_DAWN",condition:e=>e.hasResourceAvailable("DANCE_OF_THE_DAWN_READY")&&e.hasResourceAvailable("ESPRIT_GAUGE",50)}],potency:[["NEVER",500],["DYNAMIC_DANCER",520]],recastTime:e=>e.config.adjustedSksGCD(),falloff:.6,applicationDelay:.44,validateAttempt:e=>e.hasResourceAvailable("ESPRIT_GAUGE",50)&&!ia(e),highlightIf:e=>e.hasResourceAvailable("ESPRIT_GAUGE",50),onConfirm:e=>e.resources.get("ESPRIT_GAUGE").consume(50)});Xt("DANCE_OF_THE_DAWN",100,{startOnHotbar:!1,potency:1e3,recastTime:e=>e.config.adjustedSksGCD(),falloff:.6,applicationDelay:.44,validateAttempt:e=>e.hasResourceAvailable("ESPRIT_GAUGE",50)&&!ia(e),highlightIf:e=>e.hasResourceAvailable("ESPRIT_GAUGE",50),onConfirm:e=>{e.resources.get("ESPRIT_GAUGE").consume(50),e.tryConsumeResource("DANCE_OF_THE_DAWN_READY")}});Xt("LAST_DANCE",92,{potency:520,recastTime:e=>e.config.adjustedSksGCD(),falloff:.6,applicationDelay:1.26,validateAttempt:e=>e.hasResourceAvailable("LAST_DANCE_READY")&&!ia(e),highlightIf:e=>e.hasResourceAvailable("LAST_DANCE_READY"),onConfirm:e=>e.tryConsumeResource("LAST_DANCE_READY")});Xt("STANDARD_STEP",15,{replaceIf:[{newSkill:"STANDARD_FINISH",condition:e=>e.hasResourceAvailable("STANDARD_STEP")&&e.getCurrentDanceStatus()===0},{newSkill:"SINGLE_STANDARD_FINISH",condition:e=>e.hasResourceAvailable("STANDARD_STEP")&&e.getCurrentDanceStatus()===1},{newSkill:"DOUBLE_STANDARD_FINISH",condition:e=>e.hasResourceAvailable("STANDARD_STEP")&&e.getCurrentDanceStatus()===2},{newSkill:"FINISHING_MOVE",condition:e=>e.hasResourceAvailable("FINISHING_MOVE_READY")}],validateAttempt:e=>!ia(e),onConfirm:e=>e.gainProc("STANDARD_STEP"),recastTime:1.5,secondaryCooldown:{cdName:"cd_STANDARD_STEP",cooldown:30,maxCharges:1}});Xt("FINISHING_MOVE",96,{startOnHotbar:!1,potency:850,recastTime:e=>e.config.adjustedSksGCD(),falloff:.6,applicationDelay:2.05,onConfirm:e=>{e.applyStandardFinish(2),e.tryConsumeResource("FINISHING_MOVE_READY")},secondaryCooldown:{cdName:"cd_STANDARD_STEP",cooldown:30,maxCharges:1},validateAttempt:e=>e.hasResourceAvailable("FINISHING_MOVE_READY")&&!ia(e),highlightIf:e=>e.hasResourceAvailable("FINISHING_MOVE_READY")});const Fk=[{skill:"STANDARD_FINISH",potency:360},{skill:"SINGLE_STANDARD_FINISH",potency:540},{skill:"DOUBLE_STANDARD_FINISH",potency:[["NEVER",800],["DYNAMIC_DANCER",850]]}];Fk.forEach(e=>{Xt(e.skill,15,{assetPath:"DNC/Standard Finish.png",startOnHotbar:!1,potency:e.potency,falloff:.6,applicationDelay:.54,onConfirm:t=>{const n=t.getCurrentDanceStatus();t.tryConsumeResource("STANDARD_STEP"),t.tryConsumeResource("STANDARD_DANCE",!0),n!==0&&t.applyStandardFinish(n)},recastTime:1.5,validateAttempt:t=>t.hasResourceAvailable("STANDARD_STEP"),highlightIf:t=>t.hasResourceAvailable("STANDARD_STEP")&&t.getCurrentDanceStatus()===2})});Ci("FLOURISH",72,"cd_FLOURISH",{cooldown:60,requiresCombat:!0,validateAttempt:e=>!ia(e),onConfirm:e=>{e.gainProc("FLOURISHING_SYMMETRY"),e.gainProc("FLOURISHING_FLOW"),e.gainProc("THREEFOLD_FAN_DANCE"),e.hasTraitUnlocked("ENHANCED_FLOURISH")&&e.gainProc("FOURFOLD_FAN_DANCE"),e.hasTraitUnlocked("ENHANCED_FLOURISH_II")&&e.gainProc("FINISHING_MOVE_READY")}});Ci("FAN_DANCE_III",66,"cd_FAN_DANCE_III",{potency:[["NEVER",200],["DYNAMIC_DANCER",220]],cooldown:1,falloff:.6,applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("THREEFOLD_FAN_DANCE")&&!ia(e),highlightIf:e=>e.hasResourceAvailable("THREEFOLD_FAN_DANCE"),onConfirm:e=>e.tryConsumeResource("THREEFOLD_FAN_DANCE")});Ci("FAN_DANCE_IV",86,"cd_FAN_DANCE_IV",{potency:[["NEVER",300],["DYNAMIC_DANCER",420]],falloff:.6,cooldown:1,applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("FOURFOLD_FAN_DANCE")&&!ia(e),highlightIf:e=>e.hasResourceAvailable("FOURFOLD_FAN_DANCE"),onConfirm:e=>e.tryConsumeResource("FOURFOLD_FAN_DANCE")});Xt("TECHNICAL_STEP",70,{replaceIf:[{newSkill:"TECHNICAL_FINISH",condition:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===0},{newSkill:"SINGLE_TECHNICAL_FINISH",condition:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===1},{newSkill:"DOUBLE_TECHNICAL_FINISH",condition:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===2},{newSkill:"TRIPLE_TECHNICAL_FINISH",condition:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===3},{newSkill:"QUADRUPLE_TECHNICAL_FINISH",condition:e=>e.hasResourceAvailable("TECHNICAL_STEP")&&e.getCurrentDanceStatus()===4},{newSkill:"TILLANA",condition:e=>e.hasResourceAvailable("FLOURISHING_FINISH")}],validateAttempt:e=>!ia(e),onConfirm:e=>e.gainProc("TECHNICAL_STEP"),recastTime:1.5,falloff:.75,secondaryCooldown:{cdName:"cd_TECHNICAL_STEP",cooldown:120,maxCharges:1}});Xt("TILLANA",82,{startOnHotbar:!1,potency:600,recastTime:e=>e.config.adjustedSksGCD(),falloff:.6,applicationDelay:.84,onConfirm:e=>{e.gainResource("ESPRIT_GAUGE",50),e.tryConsumeResource("FLOURISHING_FINISH")},validateAttempt:e=>e.hasResourceAvailable("FLOURISHING_FINISH")&&!ia(e),highlightIf:e=>e.hasResourceAvailable("FLOURISHING_FINISH")});Xt("TECHNICAL_FINISH",70,{startOnHotbar:!1,potency:350,applicationDelay:.54,onConfirm:e=>{e.tryConsumeResource("TECHNICAL_STEP"),e.tryConsumeResource("TECHNICAL_DANCE",!0)},recastTime:1.5,validateAttempt:e=>e.hasResourceAvailable("TECHNICAL_STEP")});const zk=[{skill:"TECHNICAL_FINISH",potency:350},{skill:"SINGLE_TECHNICAL_FINISH",potency:540},{skill:"DOUBLE_TECHNICAL_FINISH",potency:720},{skill:"TRIPLE_TECHNICAL_FINISH",potency:900},{skill:"QUADRUPLE_TECHNICAL_FINISH",potency:[["NEVER",1200],["DYNAMIC_DANCER",1300]]}];zk.forEach(e=>{Xt(e.skill,70,{assetPath:"DNC/Technical Finish.png",startOnHotbar:!1,potency:e.potency,applicationDelay:.54,falloff:.6,onConfirm:t=>{const n=t.getCurrentDanceStatus();if(t.tryConsumeResource("TECHNICAL_STEP"),t.tryConsumeResource("TECHNICAL_DANCE",!0),n===0)return;t.gainProc("TECHNICAL_FINISH"),t.hasTraitUnlocked("ESPRIT")&&t.gainProc("ESPRIT_TECHNICAL"),t.resources.get("TECHNICAL_BONUS").gain(n);const l=Ut("DNC","TECHNICAL_FINISH").maxTimeout;t.enqueueResourceDrop("TECHNICAL_BONUS",l,n),t.hasTraitUnlocked("ENHANCED_TECHNICAL_FINISH")&&t.gainProc("FLOURISHING_FINISH"),t.hasTraitUnlocked("ENHANCED_TECHNICAL_FINISH_II")&&t.gainProc("DANCE_OF_THE_DAWN_READY")},recastTime:1.5,validateAttempt:t=>t.hasResourceAvailable("TECHNICAL_STEP"),highlightIf:t=>t.hasResourceAvailable("TECHNICAL_STEP")&&t.getCurrentDanceStatus()===4})});VC("DEVILMENT",62,"cd_DEVILMENT",{replaceIf:[{newSkill:"STARFALL_DANCE",condition:e=>e.hasResourceAvailable("FLOURISHING_STARFALL")}],rscType:"DEVILMENT",applicationDelay:0,cooldown:120,validateAttempt:e=>!ia(e),onApplication:e=>{e.hasTraitUnlocked("ENHANCED_DEVILMENT")&&e.gainProc("FLOURISHING_STARFALL")}});Xt("STARFALL_DANCE",90,{startOnHotbar:!1,potency:600,recastTime:e=>e.config.adjustedSksGCD(),falloff:.75,applicationDelay:.89,validateAttempt:e=>e.hasResourceAvailable("FLOURISHING_STARFALL")&&!ia(e),highlightIf:e=>e.hasResourceAvailable("FLOURISHING_STARFALL"),onConfirm:e=>e.tryConsumeResource("FLOURISHING_STARFALL")});Xt("WINDMILL",15,{replaceIf:[zC],potency:120,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.62,onConfirm:e=>{e.maybeGainProc("SILKEN_SYMMETRY"),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",5)}});Xt("BLADESHOWER",25,{replaceIf:[jC],potency:100,recastTime:e=>e.config.adjustedSksGCD(),combo:{potency:160,resource:"WINDMILL_COMBO",resourceValue:1},falloff:0,applicationDelay:.62,onConfirm:e=>{e.maybeGainProc("SILKEN_FLOW"),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",5)},highlightIf:e=>e.resources.get("WINDMILL_COMBO").availableAmount()===1});Xt("RISING_WINDMILL",35,{replaceIf:[YC],potency:160,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("SILKEN_SYMMETRY")||e.hasResourceAvailable("FLOURISHING_SYMMETRY"),onConfirm:e=>{e.hasResourceAvailable("SILKEN_SYMMETRY")?e.tryConsumeResource("SILKEN_SYMMETRY"):e.tryConsumeResource("FLOURISHING_SYMMETRY"),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",10),e.maybeGainResource("FEATHER_GAUGE",1)},highlightIf:e=>e.hasResourceAvailable("SILKEN_SYMMETRY")||e.hasResourceAvailable("FLOURISHING_SYMMETRY")});Xt("BLOODSHOWER",45,{replaceIf:[KC],potency:200,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("SILKEN_FLOW")||e.hasResourceAvailable("FLOURISHING_FLOW"),onConfirm:e=>{e.hasResourceAvailable("SILKEN_FLOW")?e.tryConsumeResource("SILKEN_FLOW"):e.tryConsumeResource("FLOURISHING_FLOW"),e.hasTraitUnlocked("ESPRIT")&&e.gainResource("ESPRIT_GAUGE",10),e.maybeGainResource("FEATHER_GAUGE",1)},highlightIf:e=>e.hasResourceAvailable("SILKEN_FLOW")||e.hasResourceAvailable("FLOURISHING_FLOW")});Ci("FAN_DANCE_II",30,"cd_FAN_DANCE_II",{potency:100,cooldown:1,falloff:0,applicationDelay:.54,validateAttempt:e=>e.hasResourceAvailable("FEATHER_GAUGE")&&!ia(e),highlightIf:e=>e.hasResourceAvailable("FEATHER_GAUGE"),onConfirm:e=>{e.tryConsumeResource("FEATHER_GAUGE"),e.maybeGainProc("THREEFOLD_FAN_DANCE")}});Ci("CURING_WALTZ",52,"cd_CURING_WALTZ",{cooldown:60,applicationDelay:.58});Ci("IMPROVISATION",80,"cd_IMPROVISATION",{replaceIf:[{newSkill:"IMPROVISED_FINISH",condition:e=>e.hasResourceAvailable("IMPROVISATION")}],cooldown:120,applicationDelay:.89,validateAttempt:e=>!ia(e),onConfirm:e=>{e.gainProc("IMPROVISATION"),e.gainProc("IMPROVISATION_REGEN");let t=()=>{e.hasResourceAvailable("IMPROVISATION")&&(e.resources.get("RISING_RHYTHM").gain(1),e.gainProc("IMPROVISATION_REGEN"),e.resources.addResourceEvent({rscType:"RISING_RHYTHM",name:"rising rhythm tic",delay:3,fnOnRsc:n=>t()}))};e.resources.addResourceEvent({rscType:"RISING_RHYTHM",name:"rising rhythm tic",delay:3,fnOnRsc:n=>t()}),e.resources.addResourceEvent({rscType:"IMPROVISATION",name:"improvisation timeout",delay:Ut("DNC","IMPROVISATION").maxTimeout,fnOnRsc:n=>{n.consume(1),e.tryConsumeResource("RISING_RHYTHM",!0)}})}});Ci("IMPROVISED_FINISH",80,"cd_IMPROVISED_FINISH",{startOnHotbar:!1,cooldown:120,applicationDelay:.71,validateAttempt:e=>!ia(e),onConfirm:e=>e.gainProc("IMPROVISED_FINISH")});Ci("EN_AVANT",50,"cd_EN_AVANT",{cooldown:30,maxCharges:3,animationLock:xa});VC("SHIELD_SAMBA",56,"cd_SHIELD_SAMBA",{rscType:"SHIELD_SAMBA",maxCharges:1,cooldown:90,applicationDelay:0});Ci("CLOSED_POSITION",60,"cd_CLOSED_POSITION",{replaceIf:[{newSkill:"ENDING",condition:e=>e.hasResourceAvailable("CLOSED_POSITION")}],cooldown:30,maxCharges:1,applicationDelay:0,onConfirm:e=>{e.resources.get("CLOSED_POSITION").gain(1),e.resources.get("DANCE_PARTNER").gain(1)},validateAttempt:e=>!e.hasResourceAvailable("CLOSED_POSITION"),secondaryCooldown:{cdName:"cd_ENDING",cooldown:1,maxCharges:1}});Ci("ENDING",60,"cd_ENDING",{startOnHotbar:!1,cooldown:1,maxCharges:1,applicationDelay:0,onConfirm:e=>{e.tryConsumeResource("CLOSED_POSITION",!0),e.tryConsumeResource("DANCE_PARTNER",!0),e.tryConsumeResource("STANDARD_FINISH_PARTNER",!0),e.tryConsumeResource("ESPRIT_PARTNER",!0)},secondaryCooldown:{cdName:"cd_CLOSED_POSITION",cooldown:30,maxCharges:1}});const WC=["CHAOS_THRUST_DOT","CHAOTIC_SPRING_DOT"],jk=Object.keys(AR).filter(e=>!WC.includes(e));Object.keys(AR).forEach(e=>Ua(e,`DRG/${Xe[e].name}.png`));class Yk extends Wt{jobSpecificOtherTargetedBuffViewProps(){return[...WC.map(t=>this.makeCommonTimer(t,!1))]}jobSpecificSelfTargetedBuffViewProps(){return jk.map(t=>this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){var T,S,g,I;const n=this.state.resources,l=n.get("DRG_CHAOS_COMBO_TRACKER"),s=n.get("DRG_HEAVENS_COMBO_TRACKER"),c=n.get("DRG_AOE_COMBO_TRACKER"),d=n.get("FIRSTMINDS_FOCUS").availableAmount(),f=n.get("LIFE_OF_THE_DRAGON"),E=f.available(1)?(T=f.pendingChange)==null?void 0:T.timeTillEvent:void 0,A=l.available(1)?(S=l.pendingChange)==null?void 0:S.timeTillEvent:s.available(1)?(g=s.pendingChange)==null?void 0:g.timeTillEvent:c.available(1)?(I=c.pendingChange)==null?void 0:I.timeTillEvent:void 0;return[{kind:"bar",name:p({en:"Combo Timer",zh:"连击监控"}),color:t.drg.drgComboTimer,progress:A?A/30:0,valueString:(A==null?void 0:A.toFixed(3))??"N/A"},{kind:"bar",name:p({en:"Life of the Dragon"}),color:t.drg.lifeOfTheDragonBar,progress:E?E/20:0,valueString:E?E.toFixed(3):"N/A"},{kind:"counter",name:p({en:"Firstmind's Focus"}),color:t.drg.firstmindsFocusStacks,currentStacks:d,maxStacks:2}]}}const qa=(e,t,n)=>{$e("DRG",e,t,n??{})};qa("POWER_SURGE",1,{timeout:30});qa("LIFE_SURGE",1,{timeout:5.52});qa("ENHANCED_PIERCING_TALON",1,{timeout:15.62});qa("LANCE_CHARGE",1,{timeout:20});qa("DIVE_READY",1,{timeout:15.46});qa("CHAOS_THRUST_DOT",1,{timeout:24});qa("BATTLE_LITANY",1,{timeout:20});qa("LIFE_OF_THE_DRAGON",1,{timeout:20});qa("NASTROND_READY",1,{timeout:20});qa("DRACONIAN_FIRE",1,{timeout:30});qa("CHAOTIC_SPRING_DOT",1,{timeout:24});qa("FIRSTMINDS_FOCUS",2);qa("DRAGONS_FLIGHT",1,{timeout:30.79});qa("STARCROSS_READY",1,{timeout:20});qa("DRG_CHAOS_COMBO_TRACKER",4,{timeout:30});qa("DRG_HEAVENS_COMBO_TRACKER",4,{timeout:30});qa("DRG_AOE_COMBO_TRACKER",2,{timeout:30});const Kk=["DOOM_SPIKE","SONIC_THRUST","COERTHAN_TORMENT","DRACONIAN_FURY"],jI=new Map([["DISEMBOWEL",1],["SPIRAL_BLOW",1],["CHAOS_THRUST",2],["CHAOTIC_SPRING",2],["WHEELING_THRUST",3]]),YI=new Map([["VORPAL_THRUST",1],["LANCE_BARRAGE",1],["FULL_THRUST",2],["HEAVENS_THRUST",2],["FANG_AND_CLAW",3]]);class Vk extends qt{constructor(t){super(t);const n=this.hasTraitUnlocked("ENHANCED_WINGED_GLIDE")?2:1,l=this.hasTraitUnlocked("ENHANCED_LIFE_SURGE")?2:1;[new Ke("cd_WINGED_GLIDE",60,n,n),new Ke("cd_LIFE_SURGE",40,l,l)].forEach(s=>this.cooldowns.set(s)),this.registerRecurringEvents([{groupedEffects:[{effectName:"CHAOS_THRUST_DOT",appliedBy:["CHAOS_THRUST"]}]},{groupedEffects:[{effectName:"CHAOTIC_SPRING_DOT",appliedBy:["CHAOTIC_SPRING"]}]}])}get statusPropsGenerator(){return new Yk(this)}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("POWER_SURGE")&&t.addBuff(P.PowerSurge),this.hasResourceAvailable("LANCE_CHARGE")&&t.addBuff(P.LanceCharge),this.hasResourceAvailable("LIFE_OF_THE_DRAGON")&&t.addBuff(P.LifeOfTheDragon),this.hasResourceAvailable("BATTLE_LITANY")&&t.addBuff(P.BattleLitany),n.name==="PIERCING_TALON"&&this.hasResourceAvailable("ENHANCED_PIERCING_TALON")&&t.addBuff(P.EnhancedPiercingTalon),n.cdName==="cd_GCD"&&this.hasResourceAvailable("LIFE_SURGE")&&t.addBuff(P.LifeSurge)}pushUniversalModifiers(t){this.hasResourceAvailable("POWER_SURGE")&&t.push(ue.PowerSurge),this.hasResourceAvailable("LANCE_CHARGE")&&t.push(ue.LanceCharge),this.hasResourceAvailable("LIFE_OF_THE_DRAGON")&&t.push(ue.LifeOfTheDragon),this.hasResourceAvailable("BATTLE_LITANY")&&t.push(ue.BattleLitany)}fixDRGComboState(t){this.tryConsumeResource("DRACONIAN_FIRE",!0);let n="DRG_AOE_COMBO_TRACKER";if(Kk.includes(t)){this.tryConsumeResource("DRG_CHAOS_COMBO_TRACKER",!0),this.tryConsumeResource("DRG_HEAVENS_COMBO_TRACKER",!0),t==="DOOM_SPIKE"||t==="DRACONIAN_FURY"?(this.tryConsumeResource(n,!0),this.resources.get(n).gain(1),this.enqueueResourceDrop(n)):t==="SONIC_THRUST"?this.resources.get(n).availableAmount()===1?(this.resources.get(n).gain(1),this.enqueueResourceDrop(n)):this.tryConsumeResource(n,!0):t==="COERTHAN_TORMENT"&&this.tryConsumeResource(n,!0);return}if(this.tryConsumeResource("DRG_AOE_COMBO_TRACKER",!0),t==="TRUE_THRUST"||t==="RAIDEN_THRUST"){this.tryConsumeResource("DRG_CHAOS_COMBO_TRACKER",!0),this.tryConsumeResource("DRG_HEAVENS_COMBO_TRACKER",!0),this.resources.get("DRG_CHAOS_COMBO_TRACKER").gain(1),this.enqueueResourceDrop("DRG_CHAOS_COMBO_TRACKER"),this.resources.get("DRG_HEAVENS_COMBO_TRACKER").gain(1),this.enqueueResourceDrop("DRG_HEAVENS_COMBO_TRACKER");return}let l=-1;if(jI.has(t))this.tryConsumeResource("DRG_HEAVENS_COMBO_TRACKER",!0),n="DRG_CHAOS_COMBO_TRACKER",l=jI.get(t)??-1;else if(YI.has(t))this.tryConsumeResource("DRG_CHAOS_COMBO_TRACKER",!0),n="DRG_HEAVENS_COMBO_TRACKER",l=YI.get(t)??-1;else if(t==="DRAKESBANE"){this.tryConsumeResource("DRG_HEAVENS_COMBO_TRACKER",!0),this.tryConsumeResource("DRG_CHAOS_COMBO_TRACKER",!0);return}this.resources.get(n).availableAmount()===l?(this.resources.get(n).gain(1),this.enqueueResourceDrop(n)):this.tryConsumeResource(n,!0)}checkCombo(t){return this.hasResourceAvailable(t)}gainScale(t){this.resources.get("FIRSTMINDS_FOCUS").availableAmount()+t>2&&O.reportWarning(Fe.ScaleOvercap),this.resources.get("FIRSTMINDS_FOCUS").gain(t)}refreshBuff(t,n){this.addEvent(new Le("gain buff",n,()=>{this.resources.get(t).gain(1),this.enqueueResourceDrop(t)}))}}const ka=(e,t,n)=>{const l=lt(n.onConfirm??ze,d=>{e!=="PIERCING_TALON"&&d.fixDRGComboState(e),d.tryConsumeResource("LIFE_SURGE")}),s=n.onApplication??ze,c=n.jobPotencyModifiers??(d=>[]);return Ni("DRG",e,t,{...n,onConfirm:l,onApplication:s,recastTime:d=>d.config.adjustedSksGCD(),jobPotencyModifiers:d=>{const f=c(d),E=n.positional&&(d.hasResourceAvailable("TRUE_NORTH")||n.positional.location==="flank"&&d.hasResourceAvailable("FLANK_POSITIONAL")||n.positional.location==="rear"&&d.hasResourceAvailable("REAR_POSITIONAL"));return n.combo&&d.checkCombo(n.combo.resource)?(f.push(Bi(We(d,n.combo.potency)-We(d,n.potency))),n.positional&&E&&f.push(ou(We(d,n.positional.comboPotency)-We(d,n.combo.potency)))):n.positional&&E&&f.push(ou(We(d,n.positional.potency)-We(d,n.potency))),e==="PIERCING_TALON"&&d.hasResourceAvailable("ENHANCED_PIERCING_TALON")&&f.push(ue.EnhancedPiercingTalon),d.pushUniversalModifiers(f),d.hasResourceAvailable("LIFE_SURGE")&&f.push(ue.LifeSurge),f}})},di=(e,t,n,l)=>Rt("DRG",e,t,n,{...l,onConfirm:l.onConfirm,jobPotencyModifiers:s=>{const c=[];return s.pushUniversalModifiers(c),c}}),Wk={newSkill:"DRAKESBANE",condition:e=>e.resources.get("DRG_HEAVENS_COMBO_TRACKER").availableAmount()===4},qk={newSkill:"DRAKESBANE",condition:e=>e.resources.get("DRG_CHAOS_COMBO_TRACKER").availableAmount()===4},Xk={newSkill:"RAIDEN_THRUST",condition:e=>e.resources.get("DRACONIAN_FIRE").available(1)},Zk={newSkill:"TRUE_THRUST",condition:e=>!e.resources.get("DRACONIAN_FIRE").available(1)},Qk={newSkill:"DRACONIAN_FURY",condition:e=>e.resources.get("DRACONIAN_FIRE").available(1)},$k={newSkill:"DOOM_SPIKE",condition:e=>!e.resources.get("DRACONIAN_FIRE").available(1)},Jk={newSkill:"STARCROSS",condition:e=>e.hasResourceAvailable("STARCROSS_READY")&&e.hasResourceAvailable("LIFE_OF_THE_DRAGON")},eP={newSkill:"STARDIVER",condition:e=>!e.hasResourceAvailable("STARCROSS_READY")};ka("PIERCING_TALON",15,{potency:[["NEVER",150],["LANCE_MASTERY",200]],applicationDelay:.85,onConfirm:e=>{e.tryConsumeResource("ENHANCED_PIERCING_TALON")},highlightIf:e=>e.hasResourceAvailable("ENHANCED_PIERCING_TALON")});ka("TRUE_THRUST",1,{replaceIf:[Xk],potency:[["NEVER",200],["LANCE_MASTERY",230]],applicationDelay:.76});ka("RAIDEN_THRUST",76,{startOnHotbar:!1,replaceIf:[Zk],potency:[["NEVER",280],["MELEE_MASTERY_DRG",320]],applicationDelay:.62,validateAttempt:e=>e.resources.get("DRACONIAN_FIRE").available(1),highlightIf:e=>e.resources.get("DRACONIAN_FIRE").available(1),onConfirm:e=>{e.hasTraitUnlocked("LANCE_MASTERY_III")&&e.gainScale(1)}});ka("DISEMBOWEL",18,{autoUpgrade:{trait:"LANCE_MASTERY_IV",otherSkill:"SPIRAL_BLOW"},applicationDelay:1.65,potency:[["NEVER",100],["LANCE_MASTERY",140]],combo:{potency:[["NEVER",220],["LANCE_MASTERY",250]],resource:"DRG_CHAOS_COMBO_TRACKER",resourceValue:1},onConfirm:e=>{e.resources.get("DRG_CHAOS_COMBO_TRACKER").availableAmount()===1&&(e.resources.get("POWER_SURGE").gain(1),e.enqueueResourceDrop("POWER_SURGE",31.63))},highlightIf:e=>e.resources.get("DRG_CHAOS_COMBO_TRACKER").availableAmount()===1});ka("SPIRAL_BLOW",96,{autoDowngrade:{trait:"LANCE_MASTERY_IV",otherSkill:"DISEMBOWEL"},applicationDelay:1.38,potency:140,combo:{potency:[["NEVER",300]],resource:"DRG_CHAOS_COMBO_TRACKER",resourceValue:1},onConfirm:e=>{e.resources.get("DRG_CHAOS_COMBO_TRACKER").availableAmount()===1&&(e.resources.get("POWER_SURGE").gain(1),e.enqueueResourceDrop("POWER_SURGE",31.38))},highlightIf:e=>e.resources.get("DRG_CHAOS_COMBO_TRACKER").availableAmount()===1});ka("CHAOS_THRUST",50,{autoUpgrade:{trait:"LANCE_MASTERY_II",otherSkill:"CHAOTIC_SPRING"},applicationDelay:1.65,potency:100,combo:{potency:220,resource:"DRG_CHAOS_COMBO_TRACKER",resourceValue:2},positional:{potency:140,comboPotency:260,location:"rear"},onConfirm:(e,t)=>{if(e.resources.get("DRG_CHAOS_COMBO_TRACKER").availableAmount()===2){const n=[];e.pushUniversalModifiers(n),e.addDoTPotencies({node:t,effectName:"CHAOS_THRUST_DOT",skillName:"CHAOS_THRUST",tickPotency:40,speedStat:"sks",modifiers:n}),e.addEvent(new Le("apply chaos thrust dot",1.65,()=>{e.applyDoT("CHAOS_THRUST_DOT",t)}))}},highlightIf:e=>e.resources.get("DRG_CHAOS_COMBO_TRACKER").availableAmount()===2});ka("CHAOTIC_SPRING",86,{autoDowngrade:{trait:"LANCE_MASTERY_II",otherSkill:"CHAOS_THRUST"},applicationDelay:.45,potency:140,combo:{potency:300,resource:"DRG_CHAOS_COMBO_TRACKER",resourceValue:2},positional:{potency:180,comboPotency:340,location:"rear"},onConfirm:(e,t)=>{if(e.resources.get("DRG_CHAOS_COMBO_TRACKER").availableAmount()===2){const n=[];e.pushUniversalModifiers(n),e.addDoTPotencies({node:t,effectName:"CHAOTIC_SPRING_DOT",skillName:"CHAOTIC_SPRING",tickPotency:45,speedStat:"sks",modifiers:n}),e.addEvent(new Le("apply chaotic spring dot",.45,()=>{e.applyDoT("CHAOTIC_SPRING_DOT",t)}))}},highlightIf:e=>e.resources.get("DRG_CHAOS_COMBO_TRACKER").availableAmount()===2});ka("WHEELING_THRUST",58,{replaceIf:[Wk],applicationDelay:.67,potency:[["NEVER",100],["MELEE_MASTERY_DRG",140]],combo:{potency:[["NEVER",260],["MELEE_MASTERY_DRG",300]],resource:"DRG_CHAOS_COMBO_TRACKER",resourceValue:3},positional:{potency:[["NEVER",140],["MELEE_MASTERY_DRG",180]],comboPotency:[["NEVER",300],["MELEE_MASTERY_DRG",340]],location:"rear"},highlightIf:e=>e.resources.get("DRG_CHAOS_COMBO_TRACKER").availableAmount()===3});ka("VORPAL_THRUST",4,{autoUpgrade:{trait:"LANCE_MASTERY_IV",otherSkill:"LANCE_BARRAGE"},applicationDelay:1.02,potency:[["NEVER",100],["LANCE_MASTERY",130]],combo:{potency:[["NEVER",250],["LANCE_MASTERY",280]],resource:"DRG_HEAVENS_COMBO_TRACKER",resourceValue:1},highlightIf:e=>e.resources.get("DRG_HEAVENS_COMBO_TRACKER").availableAmount()===1});ka("LANCE_BARRAGE",96,{autoDowngrade:{trait:"LANCE_MASTERY_IV",otherSkill:"VORPAL_THRUST"},applicationDelay:.94,potency:130,combo:{potency:340,resource:"DRG_HEAVENS_COMBO_TRACKER",resourceValue:1},highlightIf:e=>e.resources.get("DRG_HEAVENS_COMBO_TRACKER").availableAmount()===1});ka("FULL_THRUST",26,{autoUpgrade:{trait:"LANCE_MASTERY_II",otherSkill:"HEAVENS_THRUST"},applicationDelay:1.12,potency:100,combo:{potency:380,resource:"DRG_HEAVENS_COMBO_TRACKER",resourceValue:2},highlightIf:e=>e.resources.get("DRG_HEAVENS_COMBO_TRACKER").availableAmount()===2});ka("HEAVENS_THRUST",86,{autoDowngrade:{trait:"LANCE_MASTERY_II",otherSkill:"FULL_THRUST"},applicationDelay:.71,potency:[["NEVER",100],["MELEE_MASTERY_DRG",160]],combo:{potency:[["NEVER",400],["MELEE_MASTERY_DRG",460]],resource:"DRG_HEAVENS_COMBO_TRACKER",resourceValue:2},highlightIf:e=>e.resources.get("DRG_HEAVENS_COMBO_TRACKER").availableAmount()===2});ka("FANG_AND_CLAW",56,{replaceIf:[qk],applicationDelay:.62,potency:[["NEVER",100],["MELEE_MASTERY_DRG",140]],combo:{potency:[["NEVER",260],["MELEE_MASTERY_DRG",300]],resource:"DRG_HEAVENS_COMBO_TRACKER",resourceValue:3},positional:{potency:[["NEVER",140],["MELEE_MASTERY_DRG",180]],comboPotency:[["NEVER",300],["MELEE_MASTERY_DRG",340]],location:"flank"},highlightIf:e=>e.resources.get("DRG_HEAVENS_COMBO_TRACKER").availableAmount()===3});ka("DRAKESBANE",64,{startOnHotbar:!1,applicationDelay:1,potency:[["NEVER",380],["LANCE_MASTERY_II",400],["MELEE_MASTERY_DRG",460]],validateAttempt:e=>e.resources.get("DRG_CHAOS_COMBO_TRACKER").availableAmount()===4||e.resources.get("DRG_HEAVENS_COMBO_TRACKER").availableAmount()===4,onConfirm:e=>{(e.resources.get("DRG_CHAOS_COMBO_TRACKER").availableAmount()===4||e.resources.get("DRG_HEAVENS_COMBO_TRACKER").availableAmount()===4)&&e.refreshBuff("DRACONIAN_FIRE",0)},highlightIf:e=>e.resources.get("DRG_CHAOS_COMBO_TRACKER").availableAmount()===4||e.resources.get("DRG_HEAVENS_COMBO_TRACKER").availableAmount()===4});ka("DOOM_SPIKE",40,{replaceIf:[Qk],potency:110,falloff:0,applicationDelay:1.29});ka("DRACONIAN_FURY",82,{replaceIf:[$k],startOnHotbar:!1,potency:130,falloff:0,applicationDelay:.76,validateAttempt:e=>e.resources.get("DRACONIAN_FIRE").available(1),highlightIf:e=>e.resources.get("DRACONIAN_FIRE").available(1),onConfirm:e=>{e.hasTraitUnlocked("LANCE_MASTERY_III")&&e.gainScale(1)}});ka("SONIC_THRUST",62,{applicationDelay:.8,potency:100,combo:{potency:120,resource:"DRG_AOE_COMBO_TRACKER",resourceValue:1},falloff:0,highlightIf:e=>e.resources.get("DRG_AOE_COMBO_TRACKER").availableAmount()===1,onConfirm:e=>{e.resources.get("DRG_AOE_COMBO_TRACKER").availableAmount()===1&&(e.resources.get("POWER_SURGE").gain(1),e.enqueueResourceDrop("POWER_SURGE",30.79))}});ka("COERTHAN_TORMENT",72,{applicationDelay:.49,potency:100,combo:{potency:150,resource:"DRG_AOE_COMBO_TRACKER",resourceValue:2},falloff:0,highlightIf:e=>e.resources.get("DRG_AOE_COMBO_TRACKER").availableAmount()===2,onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_COERTHAN_TORMENT")&&e.resources.get("DRG_AOE_COMBO_TRACKER").availableAmount()===2&&e.refreshBuff("DRACONIAN_FIRE",0)}});je("DRG","LIFE_SURGE",6,"cd_LIFE_SURGE",{rscType:"LIFE_SURGE",applicationDelay:0,cooldown:40,maxCharges:2});di("WYRMWIND_THRUST",90,"cd_WYRMWIND_THRUST",{applicationDelay:1.2,validateAttempt:e=>e.resources.get("FIRSTMINDS_FOCUS").availableAmount()===2,highlightIf:e=>e.resources.get("FIRSTMINDS_FOCUS").availableAmount()===2,potency:[["NEVER",420],["MELEE_MASTERY_DRG",440]],falloff:.5,cooldown:10,onConfirm:e=>{e.tryConsumeResource("FIRSTMINDS_FOCUS",!0)}});je("DRG","LANCE_CHARGE",30,"cd_LANCE_CHARGE",{rscType:"LANCE_CHARGE",applicationDelay:.62,cooldown:60});je("DRG","BATTLE_LITANY",52,"cd_BATTLE_LITANY",{rscType:"BATTLE_LITANY",applicationDelay:.62,cooldown:120});di("GEIRSKOGUL",60,"cd_GEIRSKOGUL",{applicationDelay:.67,potency:[["NEVER",200],["LANCE_MASTERY_III",280]],falloff:.5,cooldown:60,onConfirm:e=>{e.refreshBuff("LIFE_OF_THE_DRAGON",0),e.refreshBuff("NASTROND_READY",0),e.addEvent(new Le("drop starcross when life drops",20,()=>{e.tryConsumeResource("STARCROSS_READY")}))}});di("NASTROND",70,"cd_NASTROND",{applicationDelay:.76,potency:[["NEVER",600],["LANCE_MASTERY_III",720]],falloff:.5,cooldown:2,validateAttempt:e=>e.resources.get("LIFE_OF_THE_DRAGON").available(1)&&e.resources.get("NASTROND_READY").available(1),highlightIf:e=>e.resources.get("LIFE_OF_THE_DRAGON").available(1)&&e.resources.get("NASTROND_READY").available(1),onConfirm:e=>{e.tryConsumeResource("NASTROND_READY")}});di("JUMP",30,"cd_JUMP",{autoUpgrade:{trait:"JUMP_MASTERY",otherSkill:"HIGH_JUMP"},applicationDelay:.49,animationLock:.8,potency:320,cooldown:30,onConfirm:e=>{e.refreshBuff("DIVE_READY",0)}});di("HIGH_JUMP",74,"cd_HIGH_JUMP",{autoDowngrade:{trait:"JUMP_MASTERY",otherSkill:"JUMP"},applicationDelay:.49,animationLock:.8,potency:400,cooldown:30,onConfirm:e=>{e.refreshBuff("DIVE_READY",0)}});di("MIRAGE_DIVE",68,"cd_MIRAGE_DIVE",{applicationDelay:.8,validateAttempt:e=>e.hasResourceAvailable("DIVE_READY"),highlightIf:e=>e.hasResourceAvailable("DIVE_READY"),potency:380,cooldown:1,onConfirm:e=>{e.tryConsumeResource("DIVE_READY")}});di("DRAGONFIRE_DIVE",50,"cd_DRAGONFIRE_DIVE",{applicationDelay:.8,animationLock:.8,potency:500,falloff:.5,cooldown:120,onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_DRAGONFIRE_DIVE")&&e.refreshBuff("DRAGONS_FLIGHT",0)}});di("RISE_OF_THE_DRAGON",92,"cd_RISE_OF_THE_DRAGON",{applicationDelay:1.16,potency:550,falloff:.5,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("DRAGONS_FLIGHT"),highlightIf:e=>e.hasResourceAvailable("DRAGONS_FLIGHT"),onConfirm:e=>{e.tryConsumeResource("DRAGONS_FLIGHT")}});di("STARDIVER",80,"cd_STARDIVER",{replaceIf:[Jk],applicationDelay:1.29,animationLock:1.5,potency:[["NEVER",720],["MELEE_MASTERY_DRG",840]],falloff:.5,cooldown:30,validateAttempt:e=>e.hasResourceAvailable("LIFE_OF_THE_DRAGON"),onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_STARDIVER")&&e.refreshBuff("STARCROSS_READY",0)}});di("STARCROSS",100,"cd_STARCROSS",{startOnHotbar:!1,replaceIf:[eP],applicationDelay:.98,potency:1e3,falloff:.5,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("STARCROSS_READY")&&e.hasResourceAvailable("LIFE_OF_THE_DRAGON"),highlightIf:e=>e.hasResourceAvailable("STARCROSS_READY")&&e.hasResourceAvailable("LIFE_OF_THE_DRAGON"),onConfirm:e=>{e.tryConsumeResource("STARCROSS_READY")}});di("ELUSIVE_JUMP",35,"cd_ELUSIVE_JUMP",{potency:0,applicationDelay:0,animationLock:1,cooldown:30,onConfirm:e=>{e.refreshBuff("ENHANCED_PIERCING_TALON",0)}});di("WINGED_GLIDE",45,"cd_WINGED_GLIDE",{potency:0,applicationDelay:0,animationLock:xa,cooldown:60,maxCharges:2});const qC=["SONIC_BREAK_DOT","BOW_SHOCK_DOT"],tP=Object.keys(RR).filter(e=>!qC.includes(e));Object.keys(RR).forEach(e=>Ua(e,`GNB/${Xe[e].name}.png`));class aP extends Wt{jobSpecificOtherTargetedBuffViewProps(){return[...qC.map(t=>this.makeCommonTimer(t,!1))]}jobSpecificSelfTargetedBuffViewProps(){return tP.map(t=>t==="ROYAL_GUARD"?this.makeCommonTimerless(t):this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){var A,R;const n=this.state.resources,l=n.get("GNB_COMBO_TRACKER"),s=n.get("GNB_AOE_COMBO_TRACKER"),c=n.get("POWDER_GAUGE").availableAmount(),d=n.get("ROYAL_GUARD").availableAmount(),f=l.available(1)?(A=l.pendingChange)==null?void 0:A.timeTillEvent:s.available(1)?(R=s.pendingChange)==null?void 0:R.timeTillEvent:void 0;return[{kind:"bar",name:p({en:"Combo Timer",zh:"连击监控"}),color:t.rdm.manaStack,progress:f?f/30:0,valueString:(f==null?void 0:f.toFixed(3))??"N/A"},{kind:"counter",name:p({en:"Royal Guard",zh:"王室亲卫"}),color:t.rdm.manaStack,currentStacks:d,maxStacks:1},{kind:"counter",name:p({en:"Powder Gauge",zh:"晶壤"}),color:t.rdm.manaStack,currentStacks:c,maxStacks:this.state.hasTraitUnlocked("CARTRIDGE_CHARGE_II")?3:2}]}}const Ht=(e,t,n)=>{$e("GNB",e,t,n??{})};Ht("POWDER_GAUGE",3);Ht("ROYAL_GUARD",1);Ht("NO_MERCY",1,{timeout:20});Ht("AURORA",1,{timeout:18});Ht("BOW_SHOCK_DOT",1,{timeout:15});Ht("CAMOUFLAGE",1,{timeout:20});Ht("HEART_OF_CORUNDUM",1,{timeout:8});Ht("CLARITY_OF_CORUNDUM",1,{timeout:15});Ht("CATHARSIS_OF_CORUNDUM",1,{timeout:20});Ht("NEBULA",1,{timeout:15});Ht("GREAT_NEBULA",1,{timeout:15});Ht("HEART_OF_LIGHT",1,{timeout:15});Ht("HEART_OF_STONE",1,{timeout:8});Ht("READY_TO_BLAST",1,{timeout:10});Ht("READY_TO_BREAK",1,{timeout:30});Ht("READY_TO_GOUGE",1,{timeout:10});Ht("READY_TO_RAZE",1,{timeout:10});Ht("READY_TO_REIGN",1,{timeout:30});Ht("READY_TO_RIP",1,{timeout:10});Ht("READY_TO_TEAR",1,{timeout:10});Ht("SONIC_BREAK_DOT",1,{timeout:30});Ht("SUPERBOLIDE",1,{timeout:10});Ht("BRUTAL_SHELL",1,{timeout:30});Ht("GNB_COMBO_TRACKER",2,{timeout:30});Ht("GNB_AOE_COMBO_TRACKER",1,{timeout:30});Ht("GNB_GNASHING_COMBO_TRACKER",2,{timeout:30});Ht("GNB_REIGN_COMBO_TRACKER",2,{timeout:30});const KI=["KEEN_EDGE","BRUTAL_SHELL","SOLID_BARREL"],nP=["DEMON_SLICE","DEMON_SLAUGHTER"],VI=["GNASHING_FANG","SAVAGE_CLAW","WICKED_TALON"],WI=["REIGN_OF_BEASTS","NOBLE_BLOOD","LION_HEART"];class iP extends qt{constructor(t){super(t);const n=this.hasTraitUnlocked("ENHANCED_AURORA")?2:1;[new Ke("cd_AURORA",60,n,n)].forEach(s=>this.cooldowns.set(s)),this.cooldowns.set(new Ke("cd_DOUBLE_DOWN",this.config.adjustedSksGCD(60),1,1)),this.cooldowns.set(new Ke("cd_GNASHING_FANG",this.config.adjustedSksGCD(30),1,1));const l=this.hasTraitUnlocked("CARTRIDGE_CHARGE_II")?3:2;this.resources.set(new li("POWDER_GAUGE",l,0)),this.registerRecurringEvents([{groupedEffects:[{effectName:"SONIC_BREAK_DOT",appliedBy:["SONIC_BREAK"]}]},{groupedEffects:[{effectName:"BOW_SHOCK_DOT",appliedBy:["BOW_SHOCK"]}]}])}get statusPropsGenerator(){return new aP(this)}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("NO_MERCY")&&t.addBuff(P.NoMercy)}fixGNBComboState(t){if(nP.includes(t)){this.tryConsumeResource("GNB_COMBO_TRACKER",!0),this.tryConsumeResource("GNB_REIGN_COMBO_TRACKER",!0),this.tryConsumeResource("GNB_GNASHING_COMBO_TRACKER",!0),this.tryConsumeResource("GNB_AOE_COMBO_TRACKER"),t==="DEMON_SLICE"&&(this.resources.get("GNB_AOE_COMBO_TRACKER").gain(1),this.enqueueResourceDrop("GNB_AOE_COMBO_TRACKER"));return}let n="GNB_COMBO_TRACKER",l=-1;KI.includes(t)?(this.tryConsumeResource("GNB_AOE_COMBO_TRACKER",!0),this.tryConsumeResource("GNB_REIGN_COMBO_TRACKER",!0),this.tryConsumeResource("GNB_GNASHING_COMBO_TRACKER",!0),l=KI.indexOf(t)):VI.includes(t)?(this.tryConsumeResource("GNB_REIGN_COMBO_TRACKER",!0),n="GNB_GNASHING_COMBO_TRACKER",l=VI.indexOf(t)):WI.includes(t)&&(this.tryConsumeResource("GNB_GNASHING_COMBO_TRACKER",!0),n="GNB_REIGN_COMBO_TRACKER",l=WI.indexOf(t)),l===0?(this.tryConsumeResource(n,!0),this.resources.get(n).gain(1),this.enqueueResourceDrop(n)):l===1?this.resources.get(n).availableAmount()===1?(this.resources.get(n).gain(1),this.enqueueResourceDrop(n)):this.tryConsumeResource(n,!0):l===2&&this.tryConsumeResource(n,!0)}gainCartridge(t){const n=this.hasTraitUnlocked("CARTRIDGE_CHARGE_II")?3:2;this.resources.get("POWDER_GAUGE").availableAmount()+t>n&&O.reportWarning(Fe.CartridgeOvercap),this.resources.get("POWDER_GAUGE").gain(t)}refreshBuff(t,n){this.addEvent(new Le("gain buff",n,()=>{this.resources.get(t).gain(1),this.enqueueResourceDrop(t)}))}}const nn=(e,t,n)=>{const l=lt(n.onConfirm??ze,d=>{e!=="SONIC_BREAK"&&d.fixGNBComboState(e),d.tryConsumeResource("READY_TO_BLAST"),d.tryConsumeResource("READY_TO_RAZE"),d.tryConsumeResource("READY_TO_RIP"),d.tryConsumeResource("READY_TO_TEAR"),d.tryConsumeResource("READY_TO_GOUGE")}),s=n.onApplication??ze,c=n.jobPotencyModifiers??(d=>[]);return Ni("GNB",e,t,{...n,onConfirm:l,onApplication:s,recastTime:d=>d.config.adjustedSksGCD(),jobPotencyModifiers:d=>{const f=c(d);return n.combo&&d.resources.get(n.combo.resource).availableAmount()===n.combo.resourceValue&&f.push(Bi(We(d,n.combo.potency)-We(d,n.potency))),d.hasResourceAvailable("NO_MERCY")&&f.push(ue.NoMercy),f}})},la=(e,t,n,l)=>Rt("GNB",e,t,n,{...l,onConfirm:l.onConfirm,jobPotencyModifiers:s=>{const c=[];return s.hasResourceAvailable("NO_MERCY")&&c.push(ue.NoMercy),c}}),XC={newSkill:"GNASHING_FANG",condition:e=>e.resources.get("GNB_GNASHING_COMBO_TRACKER").availableAmount()===0},ZC={newSkill:"SAVAGE_CLAW",condition:e=>e.resources.get("GNB_GNASHING_COMBO_TRACKER").availableAmount()===1},QC={newSkill:"WICKED_TALON",condition:e=>e.resources.get("GNB_GNASHING_COMBO_TRACKER").availableAmount()===2},$C={newSkill:"REIGN_OF_BEASTS",condition:e=>e.resources.get("GNB_REIGN_COMBO_TRACKER").availableAmount()===0},JC={newSkill:"NOBLE_BLOOD",condition:e=>e.resources.get("GNB_REIGN_COMBO_TRACKER").availableAmount()===1},eb={newSkill:"LION_HEART",condition:e=>e.resources.get("GNB_REIGN_COMBO_TRACKER").availableAmount()===2},lP={newSkill:"HYPERVELOCITY",condition:e=>e.hasResourceAvailable("READY_TO_BLAST")},oP={newSkill:"FATED_BRAND",condition:e=>e.hasResourceAvailable("READY_TO_RAZE")},sP={newSkill:"JUGULAR_RIP",condition:e=>e.hasResourceAvailable("READY_TO_RIP")},rP={newSkill:"ABDOMEN_TEAR",condition:e=>e.hasResourceAvailable("READY_TO_TEAR")},cP={newSkill:"EYE_GOUGE",condition:e=>e.hasResourceAvailable("READY_TO_GOUGE")},uP={newSkill:"ROYAL_GUARD",condition:e=>!e.hasResourceAvailable("ROYAL_GUARD")},dP={newSkill:"RELEASE_ROYAL_GUARD",condition:e=>e.hasResourceAvailable("ROYAL_GUARD")};nn("LIGHTNING_SHOT",15,{potency:150,applicationDelay:.72});nn("KEEN_EDGE",1,{potency:[["NEVER",150],["MELEE_MASTERY_TANK",200],["MELEE_MASTERY_II_TANK",300]],applicationDelay:.89});nn("BRUTAL_SHELL",4,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",160],["MELEE_MASTERY_II_TANK",240]],combo:{potency:[["NEVER",240],["MELEE_MASTERY_TANK",300],["MELEE_MASTERY_II_TANK",380]],resource:"GNB_COMBO_TRACKER",resourceValue:1},applicationDelay:1.07,onConfirm:e=>{e.resources.get("GNB_COMBO_TRACKER").availableAmount()===1&&e.refreshBuff("BRUTAL_SHELL",0)},highlightIf:e=>e.resources.get("GNB_COMBO_TRACKER").availableAmount()===1});nn("SOLID_BARREL",26,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",140],["MELEE_MASTERY_II_TANK",240]],combo:{potency:[["NEVER",320],["MELEE_MASTERY_TANK",360],["MELEE_MASTERY_II_TANK",460]],resource:"GNB_COMBO_TRACKER",resourceValue:2},applicationDelay:1.07,onConfirm:e=>{e.resources.get("GNB_COMBO_TRACKER").availableAmount()===2&&e.gainCartridge(1)},highlightIf:e=>e.resources.get("GNB_COMBO_TRACKER").availableAmount()===2});nn("DEMON_SLICE",10,{potency:100,falloff:0,applicationDelay:.62});nn("DEMON_SLAUGHTER",40,{potency:100,combo:{potency:160,resource:"GNB_AOE_COMBO_TRACKER",resourceValue:1},falloff:0,applicationDelay:.62,onConfirm:e=>{e.resources.get("GNB_AOE_COMBO_TRACKER").availableAmount()===1&&e.gainCartridge(1)},highlightIf:e=>e.resources.get("GNB_AOE_COMBO_TRACKER").availableAmount()===1});nn("BURST_STRIKE",30,{potency:[["NEVER",400],["MELEE_MASTERY_II_TANK",460]],applicationDelay:.71,validateAttempt:e=>e.hasResourceAvailable("POWDER_GAUGE"),onConfirm:e=>{e.tryConsumeResource("POWDER_GAUGE"),e.hasTraitUnlocked("ENHANCED_CONTINUATION")&&e.refreshBuff("READY_TO_BLAST",0)},highlightIf:e=>e.hasResourceAvailable("POWDER_GAUGE")});nn("FATED_CIRCLE",72,{potency:300,falloff:0,applicationDelay:.54,validateAttempt:e=>e.hasResourceAvailable("POWDER_GAUGE"),onConfirm:e=>{e.tryConsumeResource("POWDER_GAUGE"),e.hasTraitUnlocked("ENHANCED_CONTINUATION_II")&&e.refreshBuff("READY_TO_RAZE",0)},highlightIf:e=>e.hasResourceAvailable("POWDER_GAUGE")});la("BLOODFEST",76,"cd_BLOODFEST",{applicationDelay:0,cooldown:120,maxCharges:1,onConfirm:e=>{const t=e.hasTraitUnlocked("CARTRIDGE_CHARGE_II")?3:2;e.gainCartridge(t),e.hasTraitUnlocked("ENHANCED_BLOODFEST")&&e.refreshBuff("READY_TO_REIGN",0)}});la("NO_MERCY",2,"cd_NO_MERCY",{applicationDelay:0,cooldown:60,maxCharges:1,onConfirm:e=>{e.refreshBuff("NO_MERCY",.62),e.refreshBuff("READY_TO_BREAK",0)}});nn("SONIC_BREAK",54,{potency:300,applicationDelay:.62,validateAttempt:e=>e.hasResourceAvailable("READY_TO_BREAK"),onConfirm:(e,t)=>{e.tryConsumeResource("READY_TO_BREAK");const n=[];e.hasResourceAvailable("NO_MERCY")&&n.push(ue.NoMercy),e.addDoTPotencies({node:t,effectName:"SONIC_BREAK_DOT",skillName:"SONIC_BREAK",tickPotency:60,speedStat:"sks",modifiers:n})},onApplication:(e,t)=>e.applyDoT("SONIC_BREAK_DOT",t),highlightIf:e=>e.hasResourceAvailable("READY_TO_BREAK")});nn("GNASHING_FANG",60,{replaceIf:[ZC,QC],potency:[["NEVER",380],["MELEE_MASTERY_II_TANK",500]],applicationDelay:.62,recastTime:e=>e.config.adjustedSksGCD(),validateAttempt:e=>e.hasResourceAvailable("POWDER_GAUGE"),onConfirm:e=>{e.refreshBuff("READY_TO_RIP",0),e.tryConsumeResource("POWDER_GAUGE")},highlightIf:e=>e.hasResourceAvailable("POWDER_GAUGE")&&!e.hasResourceAvailable("GNB_REIGN_COMBO_TRACKER"),secondaryCooldown:{cdName:"cd_GNASHING_FANG",cooldown:30,maxCharges:1}});nn("SAVAGE_CLAW",60,{startOnHotbar:!1,replaceIf:[XC,QC],potency:[["NEVER",460],["MELEE_MASTERY_II_TANK",560]],applicationDelay:.62,validateAttempt:e=>e.resources.get("GNB_GNASHING_COMBO_TRACKER").availableAmount()===1,onConfirm:e=>{e.refreshBuff("READY_TO_TEAR",0)},highlightIf:e=>e.resources.get("GNB_GNASHING_COMBO_TRACKER").availableAmount()===1});nn("WICKED_TALON",60,{startOnHotbar:!1,replaceIf:[XC,ZC],potency:[["NEVER",540],["MELEE_MASTERY_II_TANK",620]],applicationDelay:1.16,validateAttempt:e=>e.resources.get("GNB_GNASHING_COMBO_TRACKER").availableAmount()===2,onConfirm:e=>{e.refreshBuff("READY_TO_GOUGE",0)},highlightIf:e=>e.resources.get("GNB_GNASHING_COMBO_TRACKER").availableAmount()===2});nn("DOUBLE_DOWN",90,{potency:1200,falloff:.15,applicationDelay:.72,recastTime:e=>e.config.adjustedSksGCD(),validateAttempt:e=>e.hasResourceAvailable("POWDER_GAUGE"),onConfirm:e=>{e.tryConsumeResource("POWDER_GAUGE")},highlightIf:e=>e.hasResourceAvailable("POWDER_GAUGE"),secondaryCooldown:{cdName:"cd_DOUBLE_DOWN",cooldown:60,maxCharges:1}});nn("REIGN_OF_BEASTS",100,{replaceIf:[JC,eb],potency:1e3,falloff:.6,applicationDelay:1.16,validateAttempt:e=>e.hasResourceAvailable("READY_TO_REIGN"),onConfirm:e=>{e.tryConsumeResource("READY_TO_REIGN")},highlightIf:e=>e.hasResourceAvailable("READY_TO_REIGN")});nn("NOBLE_BLOOD",100,{startOnHotbar:!1,replaceIf:[$C,eb],potency:1100,falloff:.6,applicationDelay:1.65,validateAttempt:e=>e.resources.get("GNB_REIGN_COMBO_TRACKER").availableAmount()===1,highlightIf:e=>e.resources.get("GNB_REIGN_COMBO_TRACKER").availableAmount()===1});nn("LION_HEART",100,{startOnHotbar:!1,replaceIf:[$C,JC],potency:1200,falloff:.6,applicationDelay:1.79,validateAttempt:e=>e.resources.get("GNB_REIGN_COMBO_TRACKER").availableAmount()===2,highlightIf:e=>e.resources.get("GNB_REIGN_COMBO_TRACKER").availableAmount()===2});la("CONTINUATION",70,"cd_CONTINUATION",{replaceIf:[lP,oP,sP,rP,cP],applicationDelay:0,potency:0,cooldown:1,validateAttempt:e=>!1});la("HYPERVELOCITY",86,"cd_HYPERVELOCITY",{startOnHotbar:!1,applicationDelay:.76,potency:200,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("READY_TO_BLAST"),highlightIf:e=>e.hasResourceAvailable("READY_TO_BLAST"),onConfirm:e=>{e.tryConsumeResource("READY_TO_BLAST")}});la("FATED_BRAND",96,"cd_FATED_BRAND",{startOnHotbar:!1,applicationDelay:1.16,potency:120,falloff:0,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("READY_TO_RAZE"),highlightIf:e=>e.hasResourceAvailable("READY_TO_RAZE"),onConfirm:e=>{e.tryConsumeResource("READY_TO_RAZE")}});la("JUGULAR_RIP",70,"cd_JUGULAR_RIP",{startOnHotbar:!1,applicationDelay:.8,potency:240,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("READY_TO_RIP"),highlightIf:e=>e.hasResourceAvailable("READY_TO_RIP"),onConfirm:e=>{e.tryConsumeResource("READY_TO_RIP")}});la("ABDOMEN_TEAR",70,"cd_ABDOMEN_TEAR",{startOnHotbar:!1,applicationDelay:.76,potency:280,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("READY_TO_TEAR"),highlightIf:e=>e.hasResourceAvailable("READY_TO_TEAR"),onConfirm:e=>{e.tryConsumeResource("READY_TO_TEAR")}});la("EYE_GOUGE",70,"cd_EYE_GOUGE",{startOnHotbar:!1,applicationDelay:.98,potency:320,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("READY_TO_GOUGE"),highlightIf:e=>e.hasResourceAvailable("READY_TO_GOUGE"),onConfirm:e=>{e.tryConsumeResource("READY_TO_GOUGE")}});la("DANGER_ZONE",18,"cd_DANGER_ZONE",{autoUpgrade:{trait:"DANGER_ZONE_MASTERY",otherSkill:"BLASTING_ZONE"},applicationDelay:.62,potency:250,cooldown:30});la("BLASTING_ZONE",80,"cd_BLASTING_ZONE",{startOnHotbar:!1,applicationDelay:.62,potency:800,cooldown:30});la("BOW_SHOCK",62,"cd_BOW_SHOCK",{applicationDelay:.62,potency:150,falloff:0,cooldown:60,onConfirm:(e,t)=>{const n=[];e.hasResourceAvailable("NO_MERCY")&&n.push(ue.NoMercy),e.addDoTPotencies({node:t,effectName:"BOW_SHOCK_DOT",skillName:"BOW_SHOCK",tickPotency:60,speedStat:"sks",modifiers:n})},onApplication:(e,t)=>e.applyDoT("BOW_SHOCK_DOT",t)});la("TRAJECTORY",56,"cd_TRAJECTORY",{animationLock:xa,cooldown:30,maxCharges:2,applicationDelay:.66,drawsAggro:!0});la("HEART_OF_STONE",68,"cd_HEART_OF_STONE",{autoUpgrade:{trait:"HEART_OF_STONE_MASTERY",otherSkill:"HEART_OF_CORUNDUM"},applicationDelay:.62,cooldown:25,onApplication:e=>{e.refreshBuff("HEART_OF_STONE",0)}});la("HEART_OF_CORUNDUM",82,"cd_HEART_OF_CORUNDUM",{startOnHotbar:!1,applicationDelay:.62,cooldown:25,onApplication:e=>{e.refreshBuff("CATHARSIS_OF_CORUNDUM",0),e.refreshBuff("HEART_OF_CORUNDUM",0),e.refreshBuff("CLARITY_OF_CORUNDUM",0)}});la("SUPERBOLIDE",50,"cd_SUPERBOLIDE",{applicationDelay:0,cooldown:360,onConfirm:e=>{e.refreshBuff("SUPERBOLIDE",0)}});la("CAMOUFLAGE",6,"cd_CAMOUFLAGE",{applicationDelay:.62,cooldown:90,onConfirm:e=>{e.refreshBuff("CAMOUFLAGE",0)}});la("NEBULA",38,"cd_NEBULA",{autoUpgrade:{trait:"NEBULA_MASTERY",otherSkill:"GREAT_NEBULA"},applicationDelay:.56,cooldown:120,onConfirm:e=>{e.refreshBuff("NEBULA",0)}});la("GREAT_NEBULA",38,"cd_GREAT_NEBULA",{startOnHotbar:!1,applicationDelay:.56,cooldown:120,onConfirm:e=>{e.refreshBuff("GREAT_NEBULA",0)}});la("HEART_OF_LIGHT",64,"cd_HEART_OF_LIGHT",{applicationDelay:.62,cooldown:60,onConfirm:e=>{e.refreshBuff("HEART_OF_LIGHT",0)}});la("AURORA",45,"cd_AURORA",{applicationDelay:.62,cooldown:60,onConfirm:e=>{e.refreshBuff("AURORA",0)},maxCharges:2});la("ROYAL_GUARD",10,"cd_ROYAL_GUARD",{applicationDelay:0,cooldown:2,validateAttempt:e=>!e.hasResourceAvailable("ROYAL_GUARD"),onConfirm:e=>{e.resources.get("ROYAL_GUARD").gain(1)},replaceIf:[dP],secondaryCooldown:{cdName:"cd_RELEASE_ROYAL_GUARD",cooldown:1,maxCharges:1}});la("RELEASE_ROYAL_GUARD",10,"cd_RELEASE_ROYAL_GUARD",{startOnHotbar:!1,replaceIf:[uP],applicationDelay:0,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("ROYAL_GUARD"),onConfirm:e=>{e.tryConsumeResource("ROYAL_GUARD")},secondaryCooldown:{cdName:"cd_ROYAL_GUARD",cooldown:2,maxCharges:1}});Object.keys(TR).forEach(e=>Ua(e,`MCH/${Xe[e].name}.png`));class fP extends Wt{jobSpecificOtherTargetedBuffViewProps(){return[...["WILDFIRE","BIOBLASTER"].map(t=>this.makeCommonTimer(t,!1))]}jobSpecificSelfTargetedBuffViewProps(){return[...Object.keys(TR).filter(t=>!(t==="WILDFIRE"||t==="BIOBLASTER")).map(t=>this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){const n=this.state.resources,l=n.get("HEAT_GAUGE").availableAmount(),s=n.get("BATTERY_GAUGE").availableAmount(),c=n.get("QUEEN_PUNCHES"),d=n.get("QUEEN_FINISHERS"),f=c.availableAmount()+d.availableAmount(),E=c.maxValue+d.maxValue;return[{kind:"bar",name:p({en:"Heat",zh:"枪管热度"}),color:t.mch.heat,progress:l/100,valueString:l.toFixed(0)},{kind:"bar",name:p({en:"Battery",zh:"电量"}),color:t.mch.battery,progress:s/100,valueString:s.toFixed(0)},{kind:"bar",name:p({en:"Queen Hits",zh:"人偶攻击命中"}),color:t.mch.battery,progress:f/E,valueString:f.toFixed(0)}]}}const Pa=(e,t,n)=>{$e("MCH",e,t,n??{})};Pa("HEAT_GAUGE",100);Pa("BATTERY_GAUGE",100);Pa("REASSEMBLED",1,{timeout:5});Pa("OVERHEATED",5,{timeout:10});Pa("WILDFIRE",1,{timeout:10});Pa("WILDFIRE_SELF",1,{timeout:10});Pa("FLAMETHROWER",1,{timeout:10});Pa("BIOBLASTER",1,{timeout:15});Pa("TACTICIAN",1,{timeout:15});Pa("HYPERCHARGED",1,{timeout:30});Pa("EXCAVATOR_READY",1,{timeout:30});Pa("FULL_METAL_MACHINIST",1,{timeout:30});Pa("HEAT_COMBO",2,{timeout:30});Pa("QUEEN",7);Pa("QUEEN_PUNCHES",5);Pa("QUEEN_FINISHERS",2);Pa("WILDFIRE_HITS",6);Pa("BATTERY_BONUS",50);const hP=["HEATED_CLEAN_SHOT","HEATED_SLUG_SHOT","HEATED_SPLIT_SHOT","SPREAD_SHOT","SCATTERGUN"],qI=["CHAIN_SAW","EXCAVATOR","FULL_METAL_FIELD","SCATTERGUN","BIOBLASTER","SPREAD_SHOT"];class EP extends qt{constructor(n){super(n);j(this,"handleQueenPunch",()=>{if(!this.hasResourceAvailable("QUEEN_PUNCHES")){this.handleQueenFinisher();return}const n=this.resources.get("QUEEN").node;n!==void 0&&this.resolveQueenPotency(n),this.resources.get("QUEEN_PUNCHES").consume(1),this.hasResourceAvailable("QUEEN_PUNCHES")?this.addEvent(new Le("queen punch",1.56,()=>this.handleQueenPunch())):this.addEvent(new Le("queen finisher",1.56,()=>this.handleQueenFinisher()))});j(this,"handleQueenFinisher",()=>{if(!this.hasResourceAvailable("QUEEN_FINISHERS"))return;const n=this.resources.get("QUEEN").node;n!==void 0&&this.resolveQueenPotency(n),this.resources.get("QUEEN_FINISHERS").consume(1),this.hasResourceAvailable("QUEEN_FINISHERS")?this.addEvent(new Le("queen finisher",2,()=>this.handleQueenFinisher())):(this.tryConsumeResource("BATTERY_BONUS",!0),this.addEvent(new Le("expire queen",5,()=>{this.tryConsumeResource("QUEEN",!0)})))});this.cooldowns.set(new Ke("cd_AIR_ANCHOR",this.config.adjustedSksGCD(40),1,1)),this.cooldowns.set(new Ke("cd_CHAINSAW",this.config.adjustedSksGCD(60),1,1)),this.hasTraitUnlocked("QUEENS_GAMBIT")||(this.resources.set(new li("QUEEN_FINISHERS",1,0)),this.resources.set(new li("QUEEN",6,0))),this.hasTraitUnlocked("ENHANCED_REASSEMBLE")||this.cooldowns.set(new Ke("cd_REASSEMBLE",55,1,1)),this.hasTraitUnlocked("ENHANCED_MULTI_WEAPON")||this.cooldowns.set(new Ke("cd_DRILL",this.config.adjustedSksGCD(20),1,1)),this.hasTraitUnlocked("CHARGED_ACTION_MASTERY")||(this.cooldowns.set(new Ke("cd_DOUBLE_CHECK",30,2,2)),this.cooldowns.set(new Ke("cd_CHECKMATE",30,2,2))),this.hasTraitUnlocked("ENHANCED_TACTICIAN")||this.cooldowns.set(new Ke("cd_TACTICIAN",120,1,1)),this.registerRecurringEvents([{groupedEffects:[{effectName:"BIOBLASTER",appliedBy:["BIOBLASTER"]}]},{groupedEffects:[{effectName:"FLAMETHROWER",appliedBy:["FLAMETHROWER"],isGroundTargeted:!0,exclude:!0}]}],["ROOK_AUTOTURRET","AUTOMATON_QUEEN","WILDFIRE"])}get statusPropsGenerator(){return new fP(this)}jobSpecificRegisterRecurringEvents(){let n=()=>{this.handleDoTTick("FLAMETHROWER"),this.getDisplayTime()>=0&&O.reportDotTick(this.time,"FLAMETHROWER"),this.addEvent(new Le("Flamethrower tick",1,()=>{n()}))},l=this.config.timeTillFirstManaTick+this.dotTickOffset;for(;l>1;)l--;this.addEvent(new Le("initial Flamethrower tick",l,n))}cancelChanneledSkills(){this.tryConsumeResource("FLAMETHROWER")}processComboStatus(n){if(!hP.includes(n))return;const l=this.resources.get("HEAT_COMBO").availableAmount();let s=0;l===0&&n==="HEATED_SPLIT_SHOT"?s=1:l===1&&n==="HEATED_SLUG_SHOT"&&(s=2),this.setComboState("HEAT_COMBO",s)}gainResource(n,l){const s=this.resources.get(n);s.availableAmount()+l>s.maxValue&&O.reportWarning(n==="HEAT_GAUGE"?Fe.HeatOvercap:Fe.BatteryOvercap),this.resources.get(n).gain(l)}resolveQueenPotency(n){const l=this.resources.get("QUEEN_PUNCHES").availableAmount()+this.resources.get("QUEEN_FINISHERS").availableAmount(),s=this.resources.get("QUEEN").availableAmount()-l;if(s<0)return;const c=n.getDotPotencies("QUEEN")[s];this.hasResourceAvailable("TINCTURE")&&c.modifiers.push(ue.Tincture),c.snapshotTime=this.getDisplayTime(),O.resolvePotency(c)}calculateQueenPotency(n,l){const s=this.resources.get("BATTERY_BONUS").availableAmount(),c=(l-n)*(s/50);return Math.floor((n+c)*.89)}expireWildfire(){if(!this.hasResourceAvailable("WILDFIRE_HITS"))return;this.tryConsumeResource("WILDFIRE_SELF"),this.tryConsumeResource("WILDFIRE");const n=this.hasTraitUnlocked("ENHANCED_WILD_FIRE")?240:100,l=Math.min(this.resources.get("WILDFIRE_HITS").availableAmount(),6)*n,s=this.resources.get("WILDFIRE").node;if(s===void 0)return;const c=s.getDotPotencies("WILDFIRE")[0];c.base=l,O.resolvePotency(c),this.tryConsumeResource("WILDFIRE_HITS",!0)}}const hn=(e,t,n)=>{const l=lt(n.onConfirm??ze,c=>c.processComboStatus(e),c=>{e!=="FULL_METAL_FIELD"&&c.tryConsumeResource("REASSEMBLED")},c=>{c.hasResourceAvailable("WILDFIRE_SELF")&&c.resources.get("WILDFIRE_HITS").gain(1)},c=>{qI.includes(e)||c.tryConsumeResource("OVERHEATED")}),s=n.onApplication??ze;return Ni("MCH",e,t,{...n,onConfirm:l,onApplication:s,jobPotencyModifiers:c=>{const d=[];return n.combo&&c.resources.get(n.combo.resource).availableAmount()===n.combo.resourceValue&&d.push(Bi(We(c,n.combo.potency)-We(c,n.potency))),(c.hasResourceAvailable("REASSEMBLED")||e==="FULL_METAL_FIELD")&&d.push(ue.AutoCDH),c.hasResourceAvailable("OVERHEATED")&&!qI.includes(e)&&d.push(ue.Overheated),d}})},ji=(e,t,n,l)=>{const s=lt(l.onConfirm??ze);return Rt("MCH",e,t,n,{...l,onConfirm:s,jobPotencyModifiers:c=>[]})},qR=(e,t,n,l)=>{const s=lt(l.onConfirm??ze);return je("MCH",e,t,n,{...l,onConfirm:s})};hn("HEATED_SPLIT_SHOT",54,{potency:[["NEVER",180],["MARKSMANS_MASTERY",200],["MARKSMANS_MASTERY_II",220]],applicationDelay:.8,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.gainResource("HEAT_GAUGE",5)});hn("HEATED_SLUG_SHOT",60,{potency:[["NEVER",100],["MARKSMANS_MASTERY",120],["MARKSMANS_MASTERY_II",140]],combo:{potency:[["NEVER",280],["MARKSMANS_MASTERY",300],["MARKSMANS_MASTERY_II",320]],resource:"HEAT_COMBO",resourceValue:1},applicationDelay:.8,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.gainResource("HEAT_GAUGE",5),highlightIf:e=>e.resources.get("HEAT_COMBO").availableAmount()===1});hn("HEATED_CLEAN_SHOT",64,{potency:[["NEVER",100],["MARKSMANS_MASTERY",120],["MARKSMANS_MASTERY_II",160]],combo:{potency:[["NEVER",360],["MARKSMANS_MASTERY",380],["MARKSMANS_MASTERY_II",420]],resource:"HEAT_COMBO",resourceValue:2},applicationDelay:.8,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>{e.gainResource("HEAT_GAUGE",5),e.gainResource("BATTERY_GAUGE",10)},highlightIf:e=>e.resources.get("HEAT_COMBO").availableAmount()===2});qR("REASSEMBLE",10,"cd_REASSEMBLE",{rscType:"REASSEMBLED",applicationDelay:0,cooldown:55,maxCharges:2});hn("DRILL",58,{potency:600,applicationDelay:1.15,recastTime:e=>e.config.adjustedSksGCD(),secondaryCooldown:{cdName:"cd_DRILL",cooldown:20,maxCharges:2}});hn("HOT_SHOT",4,{autoUpgrade:{trait:"HOT_SHOT_MASTERY",otherSkill:"AIR_ANCHOR"},potency:240,applicationDelay:1.15,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.gainResource("BATTERY_GAUGE",20),secondaryCooldown:{cdName:"cd_AIR_ANCHOR",cooldown:40,maxCharges:1}});hn("AIR_ANCHOR",76,{startOnHotbar:!1,potency:600,applicationDelay:1.15,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.gainResource("BATTERY_GAUGE",20),secondaryCooldown:{cdName:"cd_AIR_ANCHOR",cooldown:40,maxCharges:1}});hn("CHAIN_SAW",90,{replaceIf:[{newSkill:"EXCAVATOR",condition:e=>e.hasResourceAvailable("EXCAVATOR_READY")}],potency:600,falloff:.35,applicationDelay:1.03,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>{e.gainResource("BATTERY_GAUGE",20),e.hasTraitUnlocked("ENHANCED_MULTI_WEAPON_II")&&e.gainStatus("EXCAVATOR_READY")},secondaryCooldown:{cdName:"cd_CHAINSAW",cooldown:60,maxCharges:1}});hn("EXCAVATOR",90,{startOnHotbar:!1,potency:600,falloff:.35,applicationDelay:1.07,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>{e.gainResource("BATTERY_GAUGE",20),e.tryConsumeResource("EXCAVATOR_READY")},validateAttempt:e=>e.hasResourceAvailable("EXCAVATOR_READY"),highlightIf:e=>e.hasResourceAvailable("EXCAVATOR_READY")});ji("BARREL_STABILIZER",66,"cd_BARREL_STABILIZER",{replaceIf:[{newSkill:"FULL_METAL_FIELD",condition:e=>e.hasResourceAvailable("FULL_METAL_MACHINIST")}],applicationDelay:0,cooldown:120,maxCharges:1,requiresCombat:!0,onConfirm:e=>{e.gainStatus("HYPERCHARGED"),e.hasTraitUnlocked("ENHANCED_BARREL_STABILIZER")&&e.gainStatus("FULL_METAL_MACHINIST")}});hn("FULL_METAL_FIELD",100,{startOnHotbar:!1,potency:900,falloff:.3,applicationDelay:1.02,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.tryConsumeResource("FULL_METAL_MACHINIST"),validateAttempt:e=>e.hasResourceAvailable("FULL_METAL_MACHINIST"),highlightIf:e=>e.hasResourceAvailable("FULL_METAL_MACHINIST")});qR("HYPERCHARGE",30,"cd_HYPERCHARGE",{rscType:"OVERHEATED",applicationDelay:0,cooldown:10,maxCharges:1,onConfirm:e=>{e.hasResourceAvailable("HYPERCHARGED")?e.tryConsumeResource("HYPERCHARGED"):e.resources.get("HEAT_GAUGE").consume(50)},validateAttempt:e=>e.hasResourceAvailable("HEAT_GAUGE",50)||e.hasResourceAvailable("HYPERCHARGED"),highlightIf:e=>e.hasResourceAvailable("HEAT_GAUGE",50)||e.hasResourceAvailable("HYPERCHARGED")});ji("WILDFIRE",45,"cd_WILDFIRE",{replaceIf:[{newSkill:"DETONATOR",condition:e=>e.hasResourceAvailable("WILDFIRE_SELF")}],applicationDelay:.67,cooldown:120,maxCharges:1,onConfirm:(e,t)=>{e.gainStatus("WILDFIRE_SELF");const n=e.resources.get("WILDFIRE"),l=new Na({config:e.config,sourceTime:e.getDisplayTime(),sourceSkill:"WILDFIRE",aspect:ge.Physical,basePotency:0,snapshotTime:e.getDisplayTime(),description:"wildfire",targetCount:1});l.modifiers=[ue.NoCDH],e.hasResourceAvailable("TINCTURE")&&l.modifiers.push(ue.Tincture),t.addDoTPotency(l,"WILDFIRE"),n.gain(1),n.node=t,e.resources.addResourceEvent({rscType:"WILDFIRE",name:"wildfire expiration",delay:Ut("MCH","WILDFIRE").maxTimeout,fnOnRsc:s=>e.expireWildfire()})}});ji("DETONATOR",45,"cd_DETONATOR",{startOnHotbar:!1,applicationDelay:.62,cooldown:1,maxCharges:1,onConfirm:e=>e.expireWildfire(),validateAttempt:e=>e.hasResourceAvailable("WILDFIRE_SELF")});hn("BLAZING_SHOT",68,{potency:[["NEVER",220],["MARKSMANS_MASTERY_II",240]],applicationDelay:.85,recastTime:1.5,onConfirm:e=>{e.cooldowns.get("cd_DOUBLE_CHECK").restore(15),e.cooldowns.get("cd_CHECKMATE").restore(15)},validateAttempt:e=>e.hasResourceAvailable("OVERHEATED"),highlightIf:e=>e.hasResourceAvailable("OVERHEATED")});ji("GAUSS_ROUND",15,"cd_DOUBLE_CHECK",{autoUpgrade:{trait:"DOUBLE_BARREL_MASTERY",otherSkill:"DOUBLE_CHECK"},potency:130,applicationDelay:.71,cooldown:30,maxCharges:3});ji("DOUBLE_CHECK",92,"cd_DOUBLE_CHECK",{startOnHotbar:!1,potency:170,falloff:.3,applicationDelay:.71,cooldown:30,maxCharges:3});ji("RICOCHET",50,"cd_CHECKMATE",{autoUpgrade:{trait:"DOUBLE_BARREL_MASTERY",otherSkill:"CHECKMATE"},potency:130,falloff:.3,applicationDelay:.71,cooldown:30,maxCharges:3});ji("CHECKMATE",92,"cd_CHECKMATE",{startOnHotbar:!1,potency:170,falloff:.3,applicationDelay:.71,cooldown:30,maxCharges:3});const AP=[{skillName:"ROOK_AUTOTURRET",skillLevel:40,autoUpgrade:{otherSkill:"AUTOMATON_QUEEN",trait:"PROMOTION"}},{skillName:"AUTOMATON_QUEEN",skillLevel:80,startOnHotbar:!1}];AP.forEach(e=>{ji(e.skillName,e.skillLevel,"cd_QUEEN",{startOnHotbar:e.startOnHotbar,autoUpgrade:e.autoUpgrade,applicationDelay:0,cooldown:6,maxCharges:1,validateAttempt:t=>t.hasResourceAvailable("BATTERY_GAUGE",50)&&!t.hasResourceAvailable("QUEEN"),onConfirm:(t,n)=>{const l=t.resources.get("BATTERY_GAUGE").availableAmount();t.resources.get("BATTERY_BONUS").gain(l-50),t.tryConsumeResource("BATTERY_GAUGE",!0);const s=t.resources.get("QUEEN_PUNCHES");s.gain(5);const c=t.hasTraitUnlocked("QUEENS_GAMBIT")?2:1;t.resources.get("QUEEN_FINISHERS").gain(c),t.resources.get("QUEEN").gain(s.availableAmount()+c);let d="VOLLEY_FIRE",f=0;t.hasTraitUnlocked("PROMOTION")?(d="ARM_PUNCH",f=t.calculateQueenPotency(120,240)):f=t.calculateQueenPotency(35,75);for(let E=0;E<s.availableAmount();E++)n.addDoTPotency(new Na({config:t.config,sourceTime:t.getDisplayTime(),sourceSkill:d,aspect:ge.Physical,description:"",basePotency:f,snapshotTime:void 0,targetCount:n.targetCount}),"QUEEN");d=t.hasTraitUnlocked("PROMOTION")?"PILE_BUNKER":"ROOK_OVERLOAD",d==="PILE_BUNKER"?f=t.calculateQueenPotency(340,680):f=t.calculateQueenPotency(160,320),n.addDoTPotency(new Na({config:t.config,sourceTime:t.getDisplayTime(),sourceSkill:d,aspect:ge.Physical,description:"",basePotency:f,snapshotTime:void 0,targetCount:n.targetCount}),"QUEEN"),t.hasTraitUnlocked("QUEENS_GAMBIT")&&n.addDoTPotency(new Na({config:t.config,sourceTime:t.getDisplayTime(),sourceSkill:"CROWNED_COLLIDER",aspect:ge.Physical,description:"",basePotency:t.calculateQueenPotency(390,780),snapshotTime:void 0,targetCount:n.targetCount}),"QUEEN"),t.resources.get("QUEEN").node=n,t.addEvent(new Le("initial queen punch",5.5,()=>t.handleQueenPunch()))}})});const mP=[{skillName:"ROOK_OVERDRIVE",skillLevel:40,autoUpgrade:{otherSkill:"QUEEN_OVERDRIVE",trait:"PROMOTION"}},{skillName:"QUEEN_OVERDRIVE",skillLevel:80,startOnHotbar:!1}];mP.forEach(e=>{ji(e.skillName,e.skillLevel,"cd_OVERDRIVE",{startOnHotbar:e.startOnHotbar,autoUpgrade:e.autoUpgrade,applicationDelay:0,cooldown:15,maxCharges:1,validateAttempt:t=>t.hasResourceAvailable("QUEEN_PUNCHES"),onConfirm:t=>{t.tryConsumeResource("QUEEN_PUNCHES",!0)}})});hn("SPREAD_SHOT",18,{autoUpgrade:{trait:"SPREAD_SHOT_MASTERY",otherSkill:"SCATTERGUN"},potency:110,falloff:0,applicationDelay:.8,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.gainResource("HEAT_GAUGE",5)});hn("SCATTERGUN",82,{startOnHotbar:!1,potency:130,falloff:0,applicationDelay:1.15,recastTime:e=>e.config.adjustedSksGCD(),onConfirm:e=>e.gainResource("HEAT_GAUGE",10)});hn("BIOBLASTER",58,{potency:50,falloff:0,applicationDelay:.97,recastTime:e=>e.config.adjustedSksGCD(),secondaryCooldown:{cdName:"cd_DRILL",cooldown:20,maxCharges:2},onConfirm:(e,t)=>e.addDoTPotencies({node:t,effectName:"BIOBLASTER",skillName:"BIOBLASTER",tickPotency:50,speedStat:"sks"}),onApplication:(e,t)=>e.applyDoT("BIOBLASTER",t)});hn("AUTO_CROSSBOW",52,{potency:[["NEVER",140],["MARKSMANS_MASTERY_II",160]],falloff:0,applicationDelay:.89,recastTime:1.5,validateAttempt:e=>e.hasResourceAvailable("OVERHEATED"),highlightIf:e=>e.hasResourceAvailable("OVERHEATED")});hn("FLAMETHROWER",70,{applicationDelay:.89,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"FLAMETHROWER",skillName:"FLAMETHROWER",tickPotency:100,tickFrequency:1,speedStat:"sks"})},onApplication:(e,t)=>{e.applyDoT("FLAMETHROWER",t)},secondaryCooldown:{cdName:"cd_FLAMETHROWER",cooldown:60,maxCharges:1}});qR("TACTICIAN",56,"cd_TACTICIAN",{rscType:"TACTICIAN",maxCharges:1,cooldown:90,applicationDelay:.62});ji("DISMANTLE",62,"cd_DISMANTLE",{maxCharges:1,cooldown:120,applicationDelay:.62});Object.keys(SR).forEach(e=>Ua(e,`PCT/${Xe[e].name}.png`));class RP extends Wt{jobSpecificSelfTargetedBuffViewProps(){return[...Object.keys(SR).map(t=>t==="MONOCHROME_TONES"||t==="SUBTRACTIVE_PALETTE"?this.makeCommonTimerless(t):t==="INSPIRATION"?this.makeToggleableTimer(t):this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){const n=this.state.resources,l=n.get("PORTRAIT").availableAmount(),s=n.get("DEPICTIONS").availableAmount(),c=n.get("CREATURE_CANVAS").availableAmount(),d=n.get("WEAPON_CANVAS").availableAmount(),f=n.get("LANDSCAPE_CANVAS").availableAmount(),E=n.get("PALETTE_GAUGE").availableAmount(),A=n.get("PAINT").availableAmount(),R=n.get("MONOCHROME_TONES").available(1),T=[{kind:"text",name:p({en:"portrait",zh:"肖像标识"}),text:l===0?"/":p(l===1?{en:"moogle",zh:"莫古力"}:{en:"madeen",zh:"马蒂恩"})},{kind:"text",name:p({en:"depictions",zh:"动物标识"}),text:s===0?"/":p(s===1?{en:"pom",zh:"绒球"}:s===2?{en:"wing",zh:"翅膀"}:s===3?{en:"fang",zh:"兽爪"}:{en:"maw",zh:"尖牙"})},{kind:"counter",name:p({en:"creature",zh:"动物"}),color:t.pct.creatureCanvas,currentStacks:c,maxStacks:1},{kind:"counter",name:p({en:"weapon",zh:"武器"}),color:t.pct.weaponCanvas,currentStacks:d,maxStacks:1},{kind:"counter",name:p({en:"landscape",zh:"风景"}),color:t.pct.landscapeCanvas,currentStacks:f,maxStacks:1},{kind:"bar",name:p({en:"palette gauge",zh:"调色量谱"}),color:t.pct.paletteGauge,progress:E/100,valueString:E.toFixed(0)}];return this.state.hasTraitUnlocked("ENHANCED_ARTISTRY")&&T.push({kind:"paint",name:p({en:"paint gauge",zh:"颜料量谱"}),holyColor:t.pct.holyPaint,cometColor:t.pct.cometPaint,currentStacks:A,maxStacks:5,hasComet:this.state.hasTraitUnlocked("ENHANCED_PALETTE")&&R}),T}}const Ta=(e,t,n)=>{$e("PCT",e,t,n??{})};Ta("PORTRAIT",2);Ta("DEPICTIONS",3);Ta("CREATURE_CANVAS",1,{default:1});Ta("WEAPON_CANVAS",1,{default:1});Ta("LANDSCAPE_CANVAS",1,{default:1});Ta("PALETTE_GAUGE",100);Ta("PAINT",5);Ta("AETHERHUES",2,{timeout:30.8});Ta("MONOCHROME_TONES",1);Ta("SUBTRACTIVE_PALETTE",3);Ta("HAMMER_TIME",3,{timeout:30});Ta("INSPIRATION",1);Ta("SUBTRACTIVE_SPECTRUM",1,{timeout:30});Ta("HYPERPHANTASIA",5,{timeout:30});Ta("RAINBOW_BRIGHT",1,{timeout:30});Ta("STARSTRUCK",1,{timeout:20});Ta("STARRY_MUSE",1,{timeout:20.5});Ta("TEMPERA_COAT",1,{timeout:10});Ta("TEMPERA_GRASSA",1,{timeout:10});Ta("SMUDGE",1,{timeout:5});const TP=["FIRE_IN_RED","FIRE_II_IN_RED","AERO_IN_GREEN","AERO_II_IN_GREEN","WATER_IN_BLUE","WATER_II_IN_BLUE","HOLY_IN_WHITE","BLIZZARD_IN_CYAN","BLIZZARD_II_IN_CYAN","STONE_IN_YELLOW","STONE_II_IN_YELLOW","THUNDER_IN_MAGENTA","THUNDER_II_IN_MAGENTA","COMET_IN_BLACK","STAR_PRISM"],XI=["POM_MOTIF","WING_MOTIF","CLAW_MOTIF","MAW_MOTIF"],SP=["HAMMER_BRUSH","HAMMER_STAMP","POLISHING_HAMMER"];class gP extends qt{constructor(t){super(t);const n=this.hasTraitUnlocked("ENHANCED_SWIFTCAST")&&40||60;[new Ke("cd_SWIFTCAST",n,1,1)].forEach(c=>this.cooldowns.set(c));const l=this.hasTraitUnlocked("ENHANCED_PICTOMANCY_IV")?3:2;this.cooldowns.set(new Ke("cd_LIVING_MUSE",40,l,l));const s=this.hasTraitUnlocked("ENHANCED_PICTOMANCY_II")?2:1;this.cooldowns.set(new Ke("cd_STEEL_MUSE",60,s,s)),this.registerRecurringEvents()}get statusPropsGenerator(){return new RP(this)}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("STARRY_MUSE")&&t.addBuff(P.StarryMuse)}jobSpecificAddSpeedBuffCovers(t,n){this.hasResourceAvailable("INSPIRATION")&&TP.includes(n.name)&&t.addBuff(P.Hyperphantasia)}captureSpellCastTime(t,n){return XI.includes(t)?n:t==="RAINBOW_DRIP"?this.hasResourceAvailable("RAINBOW_BRIGHT")?0:this.config.adjustedCastTime(n):this.config.adjustedCastTime(n,this.hasResourceAvailable("INSPIRATION")?25:void 0)}captureSpellRecastTime(t,n){if(XI.includes(t))return n;if(t==="RAINBOW_DRIP"){let l=this.config.adjustedGCD(n);return this.hasResourceAvailable("RAINBOW_BRIGHT")?l-3.5:l}return SP.includes(t)?this.config.adjustedGCD(n):this.config.adjustedGCD(n,this.hasResourceAvailable("INSPIRATION")?25:void 0)}getHammerStacks(){return this.resources.get("HAMMER_TIME").availableAmount()}doFiller(){this.cycleAetherhues(),this.tryConsumeHyperphantasia(),this.tryConsumeResource("SUBTRACTIVE_PALETTE")}cycleAetherhues(){const t=this.resources.get("AETHERHUES"),n=Ut("PCT","AETHERHUES").maxTimeout;t.available(2)&&t.pendingChange?(t.overrideCurrentValue(0),t.removeTimer()):t.available(1)&&t.pendingChange?(t.overrideTimer(this,n),t.gain(1)):(t.gain(1),this.resources.addResourceEvent({rscType:"AETHERHUES",name:"reset aetherhues status",delay:n,fnOnRsc:l=>this.resources.get("AETHERHUES").overrideCurrentValue(0)}))}tryConsumeHyperphantasia(){let t=this.resources.get("HYPERPHANTASIA"),n=this.resources.get("INSPIRATION");n.available(1)&&t.available(1)&&t.pendingChange&&(t.consume(1),t.availableAmount()===0&&(n.consume(1),t.removeTimer(),n.removeTimer(),this.hasTraitUnlocked("ENHANCED_PICTOMANCY_III")&&(this.resources.get("RAINBOW_BRIGHT").gain(1),this.enqueueResourceDrop("RAINBOW_BRIGHT"))))}}const oa=(e,t,n)=>{const l=n.baseRecastTime??2.5;let s=lt((d,f)=>{e==="RAINBOW_DRIP"&&d.hasResourceAvailable("RAINBOW_BRIGHT")||e==="STAR_PRISM"||e==="HOLY_IN_WHITE"||e==="COMET_IN_BLACK"||e==="HAMMER_STAMP"||e==="HAMMER_BRUSH"||e==="POLISHING_HAMMER"||d.tryConsumeResource("SWIFTCAST")},n.onConfirm??ze);const c=n.onApplication??ze;return Fi("PCT",e,t,{replaceIf:n.replaceIf,startOnHotbar:n.startOnHotbar,highlightIf:n.highlightIf,castTime:d=>d.captureSpellCastTime(e,n.baseCastTime),recastTime:d=>d.captureSpellRecastTime(e,l),manaCost:n.baseManaCost??0,potency:n.basePotency,jobPotencyModifiers:d=>{const f=[];return d.hasResourceAvailable("STARRY_MUSE")&&f.push(ue.Starry),n.jobPotencyModifiers&&f.push(...n.jobPotencyModifiers(d)),f},falloff:n.falloff,validateAttempt:n.validateAttempt,applicationDelay:n.applicationDelay,isInstantFn:d=>e==="RAINBOW_DRIP"&&d.hasResourceAvailable("RAINBOW_BRIGHT")||e==="STAR_PRISM"||e==="HOLY_IN_WHITE"||e==="COMET_IN_BLACK"||e==="HAMMER_STAMP"||e==="HAMMER_BRUSH"||e==="POLISHING_HAMMER"||d.hasResourceAvailable("SWIFTCAST"),onConfirm:s,onApplication:c})},bi=(e,t,n,l)=>Rt("PCT",e,t,n,{jobPotencyModifiers:s=>s.hasResourceAvailable("STARRY_MUSE")?[ue.Starry]:[],...l}),XR={newSkill:"FIRE_IN_RED",condition:e=>!e.hasResourceAvailable("AETHERHUES")},ZR={newSkill:"AERO_IN_GREEN",condition:e=>e.resources.get("AETHERHUES").availableAmount()===1},QR={newSkill:"WATER_IN_BLUE",condition:e=>e.resources.get("AETHERHUES").availableAmount()===2},$R={newSkill:"BLIZZARD_IN_CYAN",condition:e=>!e.hasResourceAvailable("AETHERHUES")},JR={newSkill:"STONE_IN_YELLOW",condition:e=>e.resources.get("AETHERHUES").availableAmount()===1},eT={newSkill:"THUNDER_IN_MAGENTA",condition:e=>e.resources.get("AETHERHUES").availableAmount()===2},tT={newSkill:"FIRE_II_IN_RED",condition:e=>!e.hasResourceAvailable("AETHERHUES")},aT={newSkill:"AERO_II_IN_GREEN",condition:e=>e.resources.get("AETHERHUES").availableAmount()===1},nT={newSkill:"WATER_II_IN_BLUE",condition:e=>e.resources.get("AETHERHUES").availableAmount()===2},iT={newSkill:"BLIZZARD_II_IN_CYAN",condition:e=>!e.hasResourceAvailable("AETHERHUES")},lT={newSkill:"STONE_II_IN_YELLOW",condition:e=>e.resources.get("AETHERHUES").availableAmount()===1},oT={newSkill:"THUNDER_II_IN_MAGENTA",condition:e=>e.resources.get("AETHERHUES").availableAmount()===2},_P={newSkill:"CREATURE_MOTIF",condition:e=>e.hasResourceAvailable("CREATURE_CANVAS")},tb={newSkill:"POM_MOTIF",condition:e=>!e.hasResourceAvailable("CREATURE_CANVAS")&&e.resources.get("DEPICTIONS").availableAmount()===0},ab={newSkill:"WING_MOTIF",condition:e=>!e.hasResourceAvailable("CREATURE_CANVAS")&&e.resources.get("DEPICTIONS").availableAmount()===1},nb={newSkill:"CLAW_MOTIF",condition:e=>!e.hasResourceAvailable("CREATURE_CANVAS")&&e.resources.get("DEPICTIONS").availableAmount()===2},ib={newSkill:"MAW_MOTIF",condition:e=>!e.hasResourceAvailable("CREATURE_CANVAS")&&e.resources.get("DEPICTIONS").availableAmount()===3},pP={newSkill:"LIVING_MUSE",condition:e=>!e.hasResourceAvailable("CREATURE_CANVAS")},lb={newSkill:"POM_MUSE",condition:e=>e.hasResourceAvailable("CREATURE_CANVAS")&&e.resources.get("DEPICTIONS").availableAmount()===0},ob={newSkill:"WINGED_MUSE",condition:e=>e.hasResourceAvailable("CREATURE_CANVAS")&&e.resources.get("DEPICTIONS").availableAmount()===1},sb={newSkill:"CLAWED_MUSE",condition:e=>e.hasResourceAvailable("CREATURE_CANVAS")&&e.resources.get("DEPICTIONS").availableAmount()===2},rb={newSkill:"FANGED_MUSE",condition:e=>e.hasResourceAvailable("CREATURE_CANVAS")&&e.resources.get("DEPICTIONS").availableAmount()===3},IP={newSkill:"MOG_OF_THE_AGES",condition:e=>e.resources.get("PORTRAIT").availableAmount()!==2},NP={newSkill:"RETRIBUTION_OF_THE_MADEEN",condition:e=>e.resources.get("PORTRAIT").availableAmount()===2},CP={newSkill:"WEAPON_MOTIF",condition:e=>e.hasResourceAvailable("WEAPON_CANVAS")},cb={newSkill:"HAMMER_MOTIF",condition:e=>!e.hasResourceAvailable("WEAPON_CANVAS")},bP={newSkill:"STEEL_MUSE",condition:e=>!e.hasResourceAvailable("WEAPON_CANVAS")},OP={newSkill:"STRIKING_MUSE",condition:e=>e.hasResourceAvailable("WEAPON_CANVAS")},DP={newSkill:"LANDSCAPE_MOTIF",condition:e=>e.hasResourceAvailable("LANDSCAPE_CANVAS")},ub={newSkill:"STARRY_SKY_MOTIF",condition:e=>!e.hasResourceAvailable("LANDSCAPE_CANVAS")},yP={newSkill:"SCENIC_MUSE",condition:e=>!e.hasResourceAvailable("LANDSCAPE_CANVAS")},db={newSkill:"STARRY_MUSE",condition:e=>e.hasResourceAvailable("LANDSCAPE_CANVAS")};oa("FIRE_IN_RED",1,{replaceIf:[ZR,QR],baseCastTime:1.5,baseManaCost:300,basePotency:[["NEVER",330],["PICTOMANCY_MASTERY_II",400],["PICTOMANCY_MASTERY_III",450],["PICTOMANCY_MASTERY_IV",520]],applicationDelay:.84,validateAttempt:e=>XR.condition(e)&&!e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller()});oa("AERO_IN_GREEN",5,{replaceIf:[XR,QR],startOnHotbar:!1,baseCastTime:1.5,baseManaCost:300,basePotency:[["NEVER",370],["PICTOMANCY_MASTERY_II",440],["PICTOMANCY_MASTERY_III",490],["PICTOMANCY_MASTERY_IV",560]],applicationDelay:.89,validateAttempt:e=>ZR.condition(e)&&!e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller(),highlightIf:e=>!e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});oa("WATER_IN_BLUE",15,{replaceIf:[XR,ZR],startOnHotbar:!1,baseCastTime:1.5,baseManaCost:300,basePotency:[["NEVER",410],["PICTOMANCY_MASTERY_II",480],["PICTOMANCY_MASTERY_III",530],["PICTOMANCY_MASTERY_IV",600]],applicationDelay:.98,validateAttempt:e=>QR.condition(e)&&!e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>{e.doFiller();const t=e.resources.get("PALETTE_GAUGE");t.available(100)&&O.reportWarning(Fe.PaletteOvercap),t.gain(25),e.hasTraitUnlocked("ENHANCED_ARTISTRY")&&e.resources.get("PAINT").gain(1)},highlightIf:e=>!e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});oa("FIRE_II_IN_RED",25,{replaceIf:[aT,nT],baseCastTime:1.5,baseManaCost:300,basePotency:[["NEVER",120],["PICTOMANCY_MASTERY_II",150],["PICTOMANCY_MASTERY_IV",180]],falloff:0,applicationDelay:.84,validateAttempt:e=>tT.condition(e)&&!e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller()});oa("AERO_II_IN_GREEN",35,{replaceIf:[tT,nT],startOnHotbar:!1,baseCastTime:1.5,baseManaCost:300,basePotency:[["NEVER",140],["PICTOMANCY_MASTERY_II",170],["PICTOMANCY_MASTERY_IV",200]],falloff:0,applicationDelay:.89,validateAttempt:e=>aT.condition(e)&&!e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller(),highlightIf:e=>!e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});oa("WATER_II_IN_BLUE",45,{replaceIf:[tT,aT],startOnHotbar:!1,baseCastTime:1.5,baseManaCost:300,basePotency:[["NEVER",170],["PICTOMANCY_MASTERY_II",190],["PICTOMANCY_MASTERY_IV",220]],falloff:0,applicationDelay:.89,validateAttempt:e=>nT.condition(e)&&!e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>{e.doFiller();const t=e.resources.get("PALETTE_GAUGE");t.available(100)&&O.reportWarning(Fe.PaletteOvercap),t.gain(25),e.hasTraitUnlocked("ENHANCED_ARTISTRY")&&e.resources.get("PAINT").gain(1)},highlightIf:e=>!e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});oa("BLIZZARD_IN_CYAN",60,{replaceIf:[JR,eT],baseCastTime:2.3,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",590],["PICTOMANCY_MASTERY_II",710],["PICTOMANCY_MASTERY_III",790],["PICTOMANCY_MASTERY_IV",900]],applicationDelay:.75,validateAttempt:e=>$R.condition(e)&&e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller(),highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});oa("STONE_IN_YELLOW",60,{replaceIf:[$R,eT],startOnHotbar:!1,baseCastTime:2.3,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",630],["PICTOMANCY_MASTERY_II",750],["PICTOMANCY_MASTERY_III",830],["PICTOMANCY_MASTERY_IV",940]],applicationDelay:.8,validateAttempt:e=>JR.condition(e)&&e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller(),highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});oa("THUNDER_IN_MAGENTA",60,{replaceIf:[$R,JR],startOnHotbar:!1,baseCastTime:2.3,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",670],["PICTOMANCY_MASTERY_II",790],["PICTOMANCY_MASTERY_III",870],["PICTOMANCY_MASTERY_IV",980]],applicationDelay:.8,validateAttempt:e=>eT.condition(e)&&e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>{e.doFiller(),e.hasTraitUnlocked("ENHANCED_ARTISTRY")&&e.resources.get("PAINT").gain(1)},highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});oa("BLIZZARD_II_IN_CYAN",60,{replaceIf:[lT,oT],baseCastTime:2.3,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",270],["PICTOMANCY_MASTERY_II",330],["PICTOMANCY_MASTERY_IV",360]],falloff:0,applicationDelay:.75,validateAttempt:e=>iT.condition(e)&&e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller(),highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});oa("STONE_II_IN_YELLOW",60,{replaceIf:[iT,oT],startOnHotbar:!1,baseCastTime:2.3,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",290],["PICTOMANCY_MASTERY_II",350],["PICTOMANCY_MASTERY_IV",380]],falloff:0,applicationDelay:.8,validateAttempt:e=>lT.condition(e)&&e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>e.doFiller(),highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});oa("THUNDER_II_IN_MAGENTA",60,{replaceIf:[iT,lT],startOnHotbar:!1,baseCastTime:2.3,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",310],["PICTOMANCY_MASTERY_II",370],["PICTOMANCY_MASTERY_IV",400]],falloff:0,applicationDelay:.8,validateAttempt:e=>oT.condition(e)&&e.hasResourceAvailable("SUBTRACTIVE_PALETTE"),onConfirm:e=>{e.doFiller(),e.hasTraitUnlocked("ENHANCED_ARTISTRY")&&e.resources.get("PAINT").gain(1)},highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_PALETTE")});oa("HOLY_IN_WHITE",80,{baseCastTime:0,baseManaCost:300,basePotency:[["NEVER",480],["PICTOMANCY_MASTERY_III",530],["PICTOMANCY_MASTERY_IV",600]],falloff:.65,applicationDelay:1.34,validateAttempt:e=>!e.hasResourceAvailable("MONOCHROME_TONES")&&e.hasResourceAvailable("PAINT"),onConfirm:e=>{e.tryConsumeResource("PAINT"),e.tryConsumeHyperphantasia()},highlightIf:e=>!e.hasResourceAvailable("MONOCHROME_TONES")&&e.hasResourceAvailable("PAINT")});oa("COMET_IN_BLACK",90,{baseCastTime:0,baseRecastTime:3.3,baseManaCost:400,basePotency:[["NEVER",870],["PICTOMANCY_MASTERY_IV",980]],falloff:.6,applicationDelay:1.87,validateAttempt:e=>e.hasResourceAvailable("MONOCHROME_TONES")&&e.hasResourceAvailable("PAINT"),onConfirm:e=>{e.tryConsumeResource("PAINT"),e.tryConsumeResource("MONOCHROME_TONES"),e.tryConsumeHyperphantasia()},highlightIf:e=>e.hasResourceAvailable("MONOCHROME_TONES")});oa("RAINBOW_DRIP",92,{baseCastTime:4,baseRecastTime:6,baseManaCost:400,basePotency:1e3,applicationDelay:1.24,falloff:.85,onConfirm:e=>{e.resources.get("PAINT").gain(1),e.tryConsumeResource("RAINBOW_BRIGHT")},highlightIf:e=>e.hasResourceAvailable("RAINBOW_BRIGHT")});oa("STAR_PRISM",100,{baseCastTime:0,baseManaCost:0,basePotency:1100,applicationDelay:1.25,falloff:.7,validateAttempt:e=>e.hasResourceAvailable("STARSTRUCK"),onConfirm:e=>{e.tryConsumeResource("STARSTRUCK"),e.tryConsumeHyperphantasia()},highlightIf:e=>e.hasResourceAvailable("STARSTRUCK")});bi("SUBTRACTIVE_PALETTE",60,"cd_SUBTRACTIVE",{cooldown:1,validateAttempt:e=>!e.hasResourceAvailable("SUBTRACTIVE_PALETTE")&&(e.hasResourceAvailable("SUBTRACTIVE_SPECTRUM")||e.hasResourceAvailable("PALETTE_GAUGE",50)),onConfirm:e=>{e.tryConsumeResource("SUBTRACTIVE_SPECTRUM")||e.resources.get("PALETTE_GAUGE").consume(50),e.hasResourceAvailable("MONOCHROME_TONES")&&O.reportWarning(Fe.CometOverwrite),e.hasTraitUnlocked("ENHANCED_PALETTE")&&e.resources.get("MONOCHROME_TONES").gain(1),e.resources.get("SUBTRACTIVE_PALETTE").gain(3)},highlightIf:e=>e.hasResourceAvailable("SUBTRACTIVE_SPECTRUM")||e.resources.get("PALETTE_GAUGE").available(50)});const ZI=[_P,tb,ab,nb,ib],vP=[["CREATURE_MOTIF",30,e=>!1],["POM_MOTIF",30,tb.condition],["WING_MOTIF",30,ab.condition],["CLAW_MOTIF",96,nb.condition],["MAW_MOTIF",96,ib.condition]];vP.forEach(([e,t,n],l)=>oa(e,t,{replaceIf:ZI.slice(0,l).concat(ZI.slice(l+1)),startOnHotbar:l===0,baseCastTime:3,baseRecastTime:4,baseManaCost:0,applicationDelay:0,validateAttempt:n,onConfirm:s=>s.resources.get("CREATURE_CANVAS").gain(1)}));const QI=[pP,lb,ob,sb,rb],MP=[["LIVING_MUSE",30,0,0,e=>!1],["POM_MUSE",30,[["NEVER",700],["PICTOMANCY_MASTERY_III",800]],.62,lb.condition],["WINGED_MUSE",30,[["NEVER",700],["PICTOMANCY_MASTERY_III",800]],.98,ob.condition],["CLAWED_MUSE",96,800,.98,sb.condition],["FANGED_MUSE",96,800,1.16,rb.condition]];MP.forEach(([e,t,n,l,s],c)=>bi(e,t,"cd_LIVING_MUSE",{replaceIf:QI.slice(0,c).concat(QI.slice(c+1)),startOnHotbar:c===0,potency:n,falloff:.7,applicationDelay:l,cooldown:40,validateAttempt:s,onConfirm:d=>{let f=d.resources.get("DEPICTIONS"),E=d.resources.get("PORTRAIT");d.tryConsumeResource("CREATURE_CANVAS"),f.gain(1),e==="WINGED_MUSE"&&(E.overrideCurrentValue(1),d.hasTraitUnlocked("ENHANCED_PICTOMANCY_IV")||f.overrideCurrentValue(0)),e==="FANGED_MUSE"&&(E.overrideCurrentValue(2),f.overrideCurrentValue(0))},maxCharges:3,highlightIf:d=>d.hasResourceAvailable("CREATURE_CANVAS")}));bi("MOG_OF_THE_AGES",30,"cd_PORTRAIT",{replaceIf:[NP],potency:[["NEVER",800],["PICTOMANCY_MASTERY_III",1e3]],falloff:.7,applicationDelay:1.15,validateAttempt:e=>e.resources.get("PORTRAIT").availableAmount()===1,onConfirm:e=>e.tryConsumeResource("PORTRAIT"),cooldown:30,highlightIf:e=>e.hasResourceAvailable("PORTRAIT")});bi("RETRIBUTION_OF_THE_MADEEN",30,"cd_PORTRAIT",{replaceIf:[IP],startOnHotbar:!1,potency:1100,falloff:.7,applicationDelay:1.3,validateAttempt:e=>e.resources.get("PORTRAIT").availableAmount()===2,onConfirm:e=>e.resources.get("PORTRAIT").overrideCurrentValue(0),cooldown:30,highlightIf:e=>e.hasResourceAvailable("PORTRAIT")});oa("WEAPON_MOTIF",50,{replaceIf:[cb],baseCastTime:3,baseRecastTime:4,baseManaCost:0,applicationDelay:0,validateAttempt:e=>!1});oa("HAMMER_MOTIF",50,{replaceIf:[CP],startOnHotbar:!1,baseCastTime:3,baseRecastTime:4,baseManaCost:0,applicationDelay:0,validateAttempt:e=>cb.condition(e)&&!e.hasResourceAvailable("HAMMER_TIME"),onConfirm:e=>e.resources.get("WEAPON_CANVAS").gain(1)});bi("STEEL_MUSE",50,"cd_STEEL_MUSE",{replaceIf:[OP],cooldown:60,maxCharges:2,validateAttempt:e=>!1});bi("STRIKING_MUSE",50,"cd_STEEL_MUSE",{replaceIf:[bP],startOnHotbar:!1,requiresCombat:!0,cooldown:60,maxCharges:2,validateAttempt:e=>e.hasResourceAvailable("WEAPON_CANVAS"),onConfirm:e=>{e.tryConsumeResource("WEAPON_CANVAS"),e.resources.get("HAMMER_TIME").gain(3),e.enqueueResourceDrop("HAMMER_TIME")},highlightIf:e=>e.hasResourceAvailable("WEAPON_CANVAS")});const Am=[{newSkill:"HAMMER_STAMP",condition:e=>!e.hasTraitUnlocked("ENHANCED_PICTOMANCY_II")||e.getHammerStacks()===3},{newSkill:"HAMMER_BRUSH",condition:e=>e.hasTraitUnlocked("ENHANCED_PICTOMANCY_II")&&e.getHammerStacks()===2},{newSkill:"POLISHING_HAMMER",condition:e=>e.hasTraitUnlocked("ENHANCED_PICTOMANCY_II")&&e.getHammerStacks()===1}],LP=[["HAMMER_STAMP",50,[["NEVER",350],["PICTOMANCY_MASTERY_II",420],["PICTOMANCY_MASTERY_III",460],["PICTOMANCY_MASTERY_IV",480]],1.38],["HAMMER_BRUSH",86,[["NEVER",500],["PICTOMANCY_MASTERY_IV",520]],1.25],["POLISHING_HAMMER",86,[["NEVER",540],["PICTOMANCY_MASTERY_IV",560]],2.1]];LP.forEach(([e,t,n,l],s)=>oa(e,t,{replaceIf:Am.slice(0,s).concat(Am.slice(s+1)),baseCastTime:0,startOnHotbar:s===0,basePotency:n,falloff:.7,applicationDelay:l,validateAttempt:c=>Am[s].condition(c)&&c.hasResourceAvailable("HAMMER_TIME"),onConfirm:c=>c.tryConsumeResource("HAMMER_TIME"),highlightIf:c=>c.hasResourceAvailable("HAMMER_TIME"),jobPotencyModifiers:c=>[ue.AutoCDH]}));oa("LANDSCAPE_MOTIF",70,{replaceIf:[ub],baseCastTime:3,baseRecastTime:4,baseManaCost:0,applicationDelay:0,validateAttempt:e=>!1});oa("STARRY_SKY_MOTIF",70,{replaceIf:[DP],startOnHotbar:!1,baseCastTime:3,baseRecastTime:4,baseManaCost:0,applicationDelay:0,validateAttempt:e=>ub.condition(e)&&!e.hasResourceAvailable("STARRY_MUSE"),onConfirm:e=>e.resources.get("LANDSCAPE_CANVAS").gain(1)});bi("SCENIC_MUSE",70,"cd_SCENIC_MUSE",{replaceIf:[db],applicationDelay:0,cooldown:120,validateAttempt:e=>!1});bi("STARRY_MUSE",70,"cd_SCENIC_MUSE",{replaceIf:[yP],startOnHotbar:!1,requiresCombat:!0,applicationDelay:0,cooldown:120,validateAttempt:e=>db.condition(e),onConfirm:e=>{if(e.tryConsumeResource("LANDSCAPE_CANVAS"),e.resources.get("STARRY_MUSE").gain(1),e.hasTraitUnlocked("ENHANCED_PICTOMANCY")){e.resources.get("HYPERPHANTASIA").gain(5),e.resources.get("INSPIRATION").gain(1);const t=Ut("PCT","HYPERPHANTASIA").maxTimeout;e.enqueueResourceDrop("HYPERPHANTASIA",t),e.enqueueResourceDrop("INSPIRATION",t)}e.hasTraitUnlocked("ENHANCED_PICTOMANCY_V")&&(e.resources.get("STARSTRUCK").gain(1),e.enqueueResourceDrop("STARSTRUCK")),e.resources.get("SUBTRACTIVE_SPECTRUM").gain(1),e.enqueueResourceDrop("STARRY_MUSE"),e.enqueueResourceDrop("SUBTRACTIVE_SPECTRUM")},highlightIf:e=>e.hasResourceAvailable("LANDSCAPE_CANVAS")});je("PCT","TEMPERA_COAT",10,"cd_TEMPERA_COAT",{rscType:"TEMPERA_COAT",replaceIf:[{newSkill:"TEMPERA_COAT_POP",condition:e=>e.hasResourceAvailable("TEMPERA_COAT")}],applicationDelay:0,cooldown:120});bi("TEMPERA_GRASSA",88,"cd_GRASSA",{replaceIf:[{newSkill:"TEMPERA_GRASSA_POP",condition:e=>e.hasResourceAvailable("TEMPERA_GRASSA")}],applicationDelay:0,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("TEMPERA_COAT"),onConfirm:e=>{e.tryConsumeResource("TEMPERA_COAT"),e.resources.get("TEMPERA_GRASSA").gain(1),e.enqueueResourceDrop("TEMPERA_GRASSA")},highlightIf:e=>e.hasResourceAvailable("TEMPERA_COAT")});bi("TEMPERA_COAT_POP",10,"cd_TEMPERA_POP",{replaceIf:[{newSkill:"TEMPERA_GRASSA_POP",condition:e=>e.hasResourceAvailable("TEMPERA_GRASSA")}],startOnHotbar:!1,applicationDelay:0,animationLock:bn,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("TEMPERA_COAT"),onConfirm:e=>{e.tryConsumeResource("TEMPERA_COAT");let t=e.cooldowns.get("cd_TEMPERA_COAT").timeTillNextStackAvailable();console.assert(t>0,"attempted to pop Tempera Coat when no timer for Tempera Coat CD was active"),e.cooldowns.get("cd_TEMPERA_COAT").overrideTimeTillNextStack(Math.max(0,t-60))},highlightIf:e=>e.hasResourceAvailable("TEMPERA_COAT")});bi("TEMPERA_GRASSA_POP",10,"cd_TEMPERA_POP",{replaceIf:[{newSkill:"TEMPERA_COAT_POP",condition:e=>e.hasResourceAvailable("TEMPERA_COAT")}],startOnHotbar:!1,applicationDelay:0,animationLock:bn,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("TEMPERA_GRASSA"),onConfirm:e=>{e.tryConsumeResource("TEMPERA_GRASSA");let t=e.cooldowns.get("cd_TEMPERA_COAT").timeTillNextStackAvailable();console.assert(t>0,"attempted to pop Tempera Grassa when no timer for Tempera Coat CD was active"),e.cooldowns.get("cd_TEMPERA_COAT").overrideTimeTillNextStack(Math.max(0,t-30))},highlightIf:e=>e.hasResourceAvailable("TEMPERA_GRASSA")});je("PCT","SMUDGE",20,"cd_SMUDGE",{rscType:"SMUDGE",applicationDelay:0,cooldown:20,animationLock:xa});Object.keys(_R).forEach(e=>Ua(e,`RDM/${Xe[e].name}.png`));class HP extends Wt{jobSpecificSelfTargetedBuffViewProps(){return[...Object.keys(_R).map(t=>this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){const n=this.state.resources,l=n.get("WHITE_MANA").availableAmount(),s=n.get("BLACK_MANA").availableAmount(),c=n.get("MANA_STACKS").availableAmount();return[{kind:"bar",name:p({en:"white mana",zh:"白魔元"}),color:t.rdm.whiteMana,progress:l/100,valueString:l.toFixed(0)},{kind:"bar",name:p({en:"black mana",zh:"黑魔元"}),color:t.rdm.blackMana,progress:s/100,valueString:s.toFixed(0)},{kind:"counter",name:p({en:"mana stacks",zh:"魔元集"}),color:t.rdm.manaStack,currentStacks:c,maxStacks:3}]}}const Xa=(e,t,n)=>{$e("RDM",e,t,n??{})};Xa("WHITE_MANA",100);Xa("BLACK_MANA",100);Xa("MANA_STACKS",3);Xa("ACCELERATION",1,{timeout:20});Xa("DUALCAST",1,{timeout:15});Xa("EMBOLDEN",1,{timeout:20});Xa("GRAND_IMPACT_READY",1,{timeout:30,warningOnTimeout:Fe.GIDrop});Xa("MAGICK_BARRIER",1,{timeout:10});Xa("MAGICKED_SWORDPLAY",3,{timeout:30,warningOnTimeout:Fe.MagickedSwordplayDrop});Xa("MANAFICATION",6,{timeout:30,warningOnTimeout:Fe.ManaficDrop});Xa("PREFULGENCE_READY",1,{timeout:30,warningOnTimeout:Fe.PrefulgenceDrop});Xa("THORNED_FLOURISH",1,{timeout:30,warningOnTimeout:Fe.ViceOfThornsDrop});Xa("VERFIRE_READY",1,{timeout:30});Xa("VERSTONE_READY",1,{timeout:30});Xa("RDM_MELEE_COUNTER",2,{timeout:30});Xa("RDM_FINISHER_COUNTER",2,{timeout:30});Xa("RDM_AOE_COUNTER",2,{timeout:30});const fb=["IMPACT","VERAERO","VERTHUNDER","VERAERO_III","VERTHUNDER_III"],hb=["VERHOLY","VERFLARE","SCORCH","RESOLUTION"];class xP extends qt{constructor(t){super(t);const n=this.hasTraitUnlocked("ENHANCED_SWIFTCAST")?40:60,l=this.hasTraitUnlocked("RED_MAGIC_MASTERY")?35:45,s=this.hasTraitUnlocked("ENHANCED_MANAFICATION")?110:120;[new Ke("cd_SWIFTCAST",n,1,1),new Ke("cd_CONTRE_SIXTE",l,1,1),new Ke("cd_MANAFICATION",s,1,1)].forEach(f=>this.cooldowns.set(f));const c=this.hasTraitUnlocked("ENHANCED_ACCELERATION")?2:1;this.cooldowns.set(new Ke("cd_ACCELERATION",55,c,c));const d=this.hasTraitUnlocked("ENHANCED_MANAFICATION_II")?6:this.hasTraitUnlocked("ENHANCED_MANAFICATION")?5:4;this.resources.set(new li("MANAFICATION",d,0)),this.registerRecurringEvents()}get statusPropsGenerator(){return new HP(this)}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("EMBOLDEN")&&n.aspect!==ge.Physical&&t.addBuff(P.Embolden),(this.hasResourceAvailable("MANAFICATION")&&n.kind==="spell"||n.kind==="weaponskill")&&t.addBuff(P.Manafication),n.name==="IMPACT"&&this.hasResourceAvailable("ACCELERATION")&&t.addBuff(P.Acceleration)}hasThreeManaStacks(){return this.hasResourceAvailable("MANA_STACKS",3)}getFinisherCounter(){return this.resources.get("RDM_FINISHER_COUNTER").availableAmount()}processDualcastAndInstants(t){hb.includes(t)||t==="GRAND_IMPACT"&&this.tryConsumeResource("GRAND_IMPACT_READY")||fb.includes(t)&&this.tryConsumeResource("ACCELERATION")||this.tryConsumeResource("DUALCAST")||this.tryConsumeResource("SWIFTCAST")||(this.resources.get("DUALCAST").gain(1),this.enqueueResourceDrop("DUALCAST"))}gainColorMana(t){const n=this.resources.get("WHITE_MANA"),l=this.resources.get("BLACK_MANA");if(t.w){const s=l.availableAmount()-n.availableAmount()>30;n.gain(s?Math.floor(t.w/2):t.w)}if(t.b){const s=n.availableAmount()-l.availableAmount()>30;l.gain(s?Math.floor(t.b/2):t.b)}Math.abs(l.availableAmount()-n.availableAmount())>30&&O.reportWarning(Fe.ImbalancedMana)}colorManaExceeds(t){return this.hasResourceAvailable("MAGICKED_SWORDPLAY")||this.hasResourceAvailable("WHITE_MANA",t)&&this.hasResourceAvailable("BLACK_MANA",t)}consumeColorMana(t){this.hasResourceAvailable("MAGICKED_SWORDPLAY")?this.tryConsumeResource("MAGICKED_SWORDPLAY"):(this.resources.get("WHITE_MANA").consume(t),this.resources.get("BLACK_MANA").consume(t))}gainVerproc(t){let n=Ut("RDM",t).maxTimeout;this.resources.get(t).available(1)?this.resources.get(t).overrideTimer(this,n):(this.resources.get(t).gain(1),this.enqueueResourceDrop(t,n))}maybeGainVerproc(t,n=.5){let l=this.rng();(this.config.procMode===Kt.Always||this.config.procMode===Kt.RNG&&l<n)&&this.gainVerproc(t)}processComboStatus(t){const n=this.resources.get("MANA_STACKS"),l=this.config.level>=80,s=this.config.level>=90,c=this.resources.get("RDM_MELEE_COUNTER").availableAmount(),d=this.resources.get("RDM_FINISHER_COUNTER").availableAmount(),f=this.resources.get("RDM_AOE_COUNTER").availableAmount(),E=c+d+f>0;let A;t==="ENCHANTED_RIPOSTE"||t==="RIPOSTE"?(E&&O.reportWarning(Fe.ComboBreak),A=[1,0,0],t==="ENCHANTED_RIPOSTE"&&n.gain(1)):t==="ENCHANTED_ZWERCHHAU"||t==="ZWERCHHAU"?(E&&c!==1&&O.reportWarning(Fe.ComboBreak),A=[c===1?2:0,0,0],t==="ENCHANTED_ZWERCHHAU"&&n.gain(1)):t==="ENCHANTED_REDOUBLEMENT"||t==="REDOUBLEMENT"?(E&&c!==2&&O.reportWarning(Fe.ComboBreak),A=[0,0,0],t==="ENCHANTED_REDOUBLEMENT"&&n.gain(1)):t==="VERHOLY"||t==="VERFLARE"?(A=[0,l?1:0,0],n.consume(3)):t==="SCORCH"?A=[0,s?2:0,0]:t==="RESOLUTION"?A=[0,0,0]:t==="ENCHANTED_MOULINET"?(c+d>0&&O.reportWarning(Fe.ComboBreak),A=[0,0,1],n.gain(1)):t==="ENCHANTED_MOULINET_II"?(A=[0,0,2],n.gain(1)):t==="ENCHANTED_MOULINET_III"?(A=[0,0,0],n.gain(1)):t==="ENCHANTED_REPRISE"?A=[c,d,f]:(E&&O.reportWarning(Fe.ComboBreak),A=[0,0,0],n.consume(n.availableAmount())),this.setComboState("RDM_MELEE_COUNTER",A[0]),this.setComboState("RDM_FINISHER_COUNTER",A[1]),this.setComboState("RDM_AOE_COUNTER",A[2])}processManafic(){this.tryConsumeResource("MANAFICATION")&&!this.hasResourceAvailable("MANAFICATION")&&this.hasTraitUnlocked("ENHANCED_MANAFICATION_III")&&(this.resources.get("PREFULGENCE_READY").gain(1),this.enqueueResourceDrop("PREFULGENCE_READY"))}}const Ga=(e,t,n)=>{const l=lt(s=>s.processManafic(),n.onConfirm??ze,s=>s.processDualcastAndInstants(e),s=>s.processComboStatus(e));return Fi("RDM",e,t,{...n,aspect:n.isPhysical?ge.Physical:void 0,castTime:s=>s.config.adjustedCastTime(n.baseCastTime),recastTime:s=>s.config.adjustedGCD(),manaCost:n.baseManaCost??0,potency:n.basePotency,jobPotencyModifiers:s=>{const c=[];return s.hasResourceAvailable("EMBOLDEN")&&c.push(ue.EmboldenMagic),s.hasResourceAvailable("MANAFICATION")&&c.push(ue.Manafication),n.jobPotencyModifiers&&c.push(...n.jobPotencyModifiers(s)),c},isInstantFn:s=>hb.includes(e)||e==="GRAND_IMPACT"||fb.includes(e)&&s.hasResourceAvailable("ACCELERATION")||s.hasResourceAvailable("DUALCAST")||s.hasResourceAvailable("SWIFTCAST"),onConfirm:l})},fi=(e,t,n)=>{const l=!e.toString().startsWith("ENCHANTED"),s=lt(c=>c.processManafic(),c=>c.processComboStatus(e),n.onConfirm??ze);return Ni("RDM",e,t,{...n,aspect:l?ge.Physical:void 0,onConfirm:s,jobPotencyModifiers:c=>{const d=[];return n.combo&&c.resources.get(n.combo.resource).availableAmount()===n.combo.resourceValue&&d.push(Bi(We(c,n.combo.potency)-We(c,n.potency))),l||(c.hasResourceAvailable("EMBOLDEN")&&d.push(ue.EmboldenMagic),c.hasResourceAvailable("MANAFICATION")&&d.push(ue.Manafication)),d}})},ds=(e,t,n,l)=>Rt("RDM",e,t,n,{aspect:l.isPhysical?ge.Physical:void 0,jobPotencyModifiers:s=>!l.isPhysical&&s.hasResourceAvailable("EMBOLDEN")?[ue.EmboldenMagic]:[],...l}),sT={newSkill:"SCORCH",condition:e=>e.getFinisherCounter()===1},rT={newSkill:"RESOLUTION",condition:e=>e.getFinisherCounter()===2},fu={newSkill:"GRAND_IMPACT",condition:e=>e.getFinisherCounter()<1&&e.hasResourceAvailable("GRAND_IMPACT_READY")};Ga("JOLT_II",62,{replaceIf:[sT,rT,fu],autoUpgrade:{trait:"RED_MAGIC_MASTERY_III",otherSkill:"JOLT_III"},baseCastTime:2,baseManaCost:200,applicationDelay:.8,basePotency:280,validateAttempt:e=>e.getFinisherCounter()<1&&!e.hasResourceAvailable("GRAND_IMPACT_READY"),onConfirm:e=>e.gainColorMana({w:2,b:2})});Ga("JOLT_III",84,{replaceIf:[sT,rT,fu],autoDowngrade:{trait:"RED_MAGIC_MASTERY_III",otherSkill:"JOLT_II"},baseCastTime:2,baseManaCost:200,applicationDelay:.8,basePotency:360,validateAttempt:e=>e.getFinisherCounter()<1&&!e.hasResourceAvailable("GRAND_IMPACT_READY"),onConfirm:e=>e.gainColorMana({w:2,b:2})});const Eb=[["NEVER",300],["RED_MAGIC_MASTERY_II",340],["RED_MAGIC_MASTERY_III",380]];Ga("VERSTONE",30,{baseCastTime:2,baseManaCost:200,applicationDelay:.8,basePotency:Eb,validateAttempt:e=>e.hasResourceAvailable("VERSTONE_READY"),onConfirm:e=>{e.gainColorMana({w:5}),e.tryConsumeResource("VERSTONE_READY")},highlightIf:e=>e.hasResourceAvailable("VERSTONE_READY")});Ga("VERFIRE",26,{baseCastTime:2,baseManaCost:200,applicationDelay:.8,basePotency:Eb,validateAttempt:e=>e.hasResourceAvailable("VERFIRE_READY"),onConfirm:e=>{e.gainColorMana({b:5}),e.tryConsumeResource("VERFIRE_READY")},highlightIf:e=>e.hasResourceAvailable("VERFIRE_READY")});const cT={newSkill:"VERHOLY",condition:e=>e.hasThreeManaStacks()},uT={newSkill:"VERFLARE",condition:e=>e.hasThreeManaStacks()};Ga("VERAERO",10,{replaceIf:[cT],autoUpgrade:{trait:"RED_MAGIC_MASTERY_II",otherSkill:"VERAERO_III"},baseCastTime:5,baseManaCost:400,applicationDelay:.76,basePotency:360,validateAttempt:e=>!e.hasThreeManaStacks(),onConfirm:e=>{e.gainColorMana({w:6}),e.hasResourceAvailable("ACCELERATION")?e.gainVerproc("VERSTONE_READY"):e.maybeGainVerproc("VERSTONE_READY")}});Ga("VERTHUNDER",4,{replaceIf:[uT],autoUpgrade:{trait:"RED_MAGIC_MASTERY_II",otherSkill:"VERTHUNDER_III"},baseCastTime:5,baseManaCost:400,applicationDelay:.76,basePotency:360,validateAttempt:e=>!e.hasThreeManaStacks(),onConfirm:e=>{e.gainColorMana({b:6}),e.hasResourceAvailable("ACCELERATION")?e.gainVerproc("VERFIRE_READY"):e.maybeGainVerproc("VERFIRE_READY")}});const Ab=[["NEVER",380],["ENCHANTED_BLADE_MASTERY",440]];Ga("VERAERO_III",82,{replaceIf:[cT],autoDowngrade:{trait:"RED_MAGIC_MASTERY_II",otherSkill:"VERAERO"},baseCastTime:5,baseManaCost:400,applicationDelay:.76,basePotency:Ab,validateAttempt:e=>!e.hasThreeManaStacks(),onConfirm:e=>{e.gainColorMana({w:6}),e.hasResourceAvailable("ACCELERATION")?e.gainVerproc("VERSTONE_READY"):e.maybeGainVerproc("VERSTONE_READY")}});Ga("VERTHUNDER_III",82,{replaceIf:[uT],autoDowngrade:{trait:"RED_MAGIC_MASTERY_II",otherSkill:"VERTHUNDER"},baseCastTime:5,baseManaCost:400,applicationDelay:.76,basePotency:Ab,validateAttempt:e=>!e.hasThreeManaStacks(),onConfirm:e=>{e.gainColorMana({b:6}),e.hasResourceAvailable("ACCELERATION")?e.gainVerproc("VERFIRE_READY"):e.maybeGainVerproc("VERFIRE_READY")}});const mb=[["NEVER",100],["RED_MAGIC_MASTERY",120],["RED_MAGIC_MASTERY_III",140]];Ga("VERAERO_II",22,{replaceIf:[cT],baseCastTime:2,baseManaCost:400,applicationDelay:.8,basePotency:mb,falloff:0,validateAttempt:e=>!e.hasThreeManaStacks(),onConfirm:e=>e.gainColorMana({w:7})});Ga("VERTHUNDER_II",18,{replaceIf:[uT],baseCastTime:2,baseManaCost:400,falloff:0,applicationDelay:.8,basePotency:mb,validateAttempt:e=>!e.hasThreeManaStacks(),onConfirm:e=>e.gainColorMana({b:7})});Ga("IMPACT",66,{replaceIf:[sT,rT,fu],baseCastTime:5,baseManaCost:400,falloff:0,applicationDelay:.76,basePotency:[["NEVER",200],["RED_MAGIC_MASTERY_III",210]],jobPotencyModifiers:e=>e.hasResourceAvailable("ACCELERATION")?[ue.AccelerationImpact]:[],validateAttempt:e=>e.getFinisherCounter()<1&&!e.hasResourceAvailable("GRAND_IMPACT_READY"),onConfirm:e=>e.gainColorMana({w:3,b:3})});Ga("GRAND_IMPACT",96,{startOnHotbar:!1,baseCastTime:0,baseManaCost:0,basePotency:600,falloff:.6,applicationDelay:1.55,validateAttempt:fu.condition,highlightIf:fu.condition,onConfirm:e=>e.gainColorMana({w:3,b:3})});fi("RIPOSTE",1,{replaceIf:[{newSkill:"ENCHANTED_RIPOSTE",condition:e=>e.colorManaExceeds(20)}],applicationDelay:.62,potency:130,recastTime:2.5,validateAttempt:e=>!e.colorManaExceeds(20)});fi("ZWERCHHAU",35,{replaceIf:[{newSkill:"ENCHANTED_ZWERCHHAU",condition:e=>e.colorManaExceeds(15)}],applicationDelay:.62,potency:100,combo:{potency:150,resource:"RDM_MELEE_COUNTER",resourceValue:1},recastTime:2.5,validateAttempt:e=>!e.colorManaExceeds(15),highlightIf:e=>e.resources.get("RDM_MELEE_COUNTER").availableAmount()===1});fi("REDOUBLEMENT",50,{replaceIf:[{newSkill:"ENCHANTED_REDOUBLEMENT",condition:e=>e.colorManaExceeds(15)}],applicationDelay:.62,potency:100,combo:{potency:230,resource:"RDM_MELEE_COUNTER",resourceValue:2},recastTime:2.5,validateAttempt:e=>!e.colorManaExceeds(15),highlightIf:e=>e.resources.get("RDM_MELEE_COUNTER").availableAmount()===2});fi("ENCHANTED_RIPOSTE",50,{startOnHotbar:!1,replaceIf:[{newSkill:"RIPOSTE",condition:e=>!e.colorManaExceeds(20)}],applicationDelay:.62,potency:[["NEVER",220],["RED_MAGIC_MASTERY_III",280],["ENCHANTED_BLADE_MASTERY",300]],recastTime:1.5,validateAttempt:e=>e.colorManaExceeds(20),onConfirm:e=>e.consumeColorMana(20)});fi("ENCHANTED_ZWERCHHAU",50,{startOnHotbar:!1,replaceIf:[{newSkill:"ZWERCHHAU",condition:e=>!e.colorManaExceeds(15)}],applicationDelay:.62,potency:[["NEVER",100],["RED_MAGIC_MASTERY_III",150],["ENCHANTED_BLADE_MASTERY",170]],combo:{potency:[["NEVER",290],["RED_MAGIC_MASTERY_III",340],["ENCHANTED_BLADE_MASTERY",360]],resource:"RDM_MELEE_COUNTER",resourceValue:1},recastTime:1.5,validateAttempt:e=>e.colorManaExceeds(15),onConfirm:e=>e.consumeColorMana(15),highlightIf:e=>e.resources.get("RDM_MELEE_COUNTER").availableAmount()===1});fi("ENCHANTED_REDOUBLEMENT",50,{startOnHotbar:!1,replaceIf:[{newSkill:"REDOUBLEMENT",condition:e=>!e.colorManaExceeds(15)}],applicationDelay:.62,potency:[["NEVER",100],["RED_MAGIC_MASTERY_III",130],["ENCHANTED_BLADE_MASTERY",170]],combo:{potency:[["NEVER",470],["RED_MAGIC_MASTERY_III",500],["ENCHANTED_BLADE_MASTERY",530]],resource:"RDM_MELEE_COUNTER",resourceValue:2},recastTime:2.2,validateAttempt:e=>e.colorManaExceeds(15),onConfirm:e=>e.consumeColorMana(15),highlightIf:e=>e.resources.get("RDM_MELEE_COUNTER").availableAmount()===2});const wf=e=>e.resources.get("WHITE_MANA").available(5)&&e.resources.get("BLACK_MANA").available(5);fi("REPRISE",76,{replaceIf:[{newSkill:"ENCHANTED_REPRISE",condition:e=>wf(e)}],applicationDelay:.62,potency:100,recastTime:2.5,validateAttempt:e=>!wf(e)});fi("ENCHANTED_REPRISE",76,{startOnHotbar:!1,replaceIf:[{newSkill:"REPRISE",condition:e=>!wf(e)}],applicationDelay:.62,potency:[["NEVER",290],["RED_MAGIC_MASTERY_III",340],["ENCHANTED_BLADE_MASTERY",420]],recastTime:2.5,validateAttempt:e=>wf(e),onConfirm:e=>{e.resources.get("WHITE_MANA").consume(5),e.resources.get("BLACK_MANA").consume(5)}});const La=[{newSkill:"MOULINET",condition:e=>e.resources.get("RDM_AOE_COUNTER").availableAmount()===0&&!e.colorManaExceeds(20)||!e.colorManaExceeds(15)},{newSkill:"ENCHANTED_MOULINET",condition:e=>e.colorManaExceeds(20)&&e.resources.get("RDM_AOE_COUNTER").availableAmount()===0},{newSkill:"ENCHANTED_MOULINET_II",condition:e=>e.colorManaExceeds(15)&&e.resources.get("RDM_AOE_COUNTER").availableAmount()===1},{newSkill:"ENCHANTED_MOULINET_III",condition:e=>e.colorManaExceeds(15)&&e.resources.get("RDM_AOE_COUNTER").availableAmount()===2}];fi("MOULINET",52,{replaceIf:[La[1],La[2],La[3]],falloff:0,applicationDelay:.8,potency:60,recastTime:2.5,validateAttempt:La[0].condition});fi("ENCHANTED_MOULINET",52,{startOnHotbar:!1,replaceIf:[La[0],La[2],La[3]],falloff:0,applicationDelay:.8,potency:130,recastTime:1.5,validateAttempt:La[1].condition,onConfirm:e=>e.consumeColorMana(20)});fi("ENCHANTED_MOULINET_II",52,{startOnHotbar:!1,replaceIf:[La[0],La[1],La[3]],falloff:0,applicationDelay:.8,potency:140,recastTime:1.5,validateAttempt:La[2].condition,onConfirm:e=>e.consumeColorMana(15),highlightIf:La[2].condition});fi("ENCHANTED_MOULINET_III",52,{startOnHotbar:!1,replaceIf:[La[0],La[1],La[2]],falloff:0,applicationDelay:.8,potency:150,recastTime:1.5,validateAttempt:La[3].condition,onConfirm:e=>e.consumeColorMana(15),highlightIf:La[3].condition});const Rb=[["NEVER",600],["ENCHANTED_BLADE_MASTERY",650]];Ga("VERHOLY",70,{startOnHotbar:!1,baseCastTime:0,baseManaCost:400,falloff:.6,applicationDelay:1.43,basePotency:Rb,validateAttempt:e=>e.hasThreeManaStacks(),highlightIf:e=>e.hasThreeManaStacks(),onConfirm:e=>{e.resources.get("WHITE_MANA").availableAmount()<e.resources.get("BLACK_MANA").availableAmount()?e.gainVerproc("VERSTONE_READY"):e.maybeGainVerproc("VERSTONE_READY",.2),e.gainColorMana({w:11})}});Ga("VERFLARE",68,{startOnHotbar:!1,baseCastTime:0,baseManaCost:400,falloff:.6,applicationDelay:1.43,basePotency:Rb,validateAttempt:e=>e.hasThreeManaStacks(),highlightIf:e=>e.hasThreeManaStacks(),onConfirm:e=>{e.resources.get("BLACK_MANA").availableAmount()<e.resources.get("WHITE_MANA").availableAmount()?e.gainVerproc("VERFIRE_READY"):e.maybeGainVerproc("VERFIRE_READY",.2),e.gainColorMana({b:11})}});Ga("SCORCH",80,{startOnHotbar:!1,baseCastTime:0,baseManaCost:400,falloff:.6,applicationDelay:1.83,basePotency:[["NEVER",680],["ENCHANTED_BLADE_MASTERY",750]],validateAttempt:e=>e.getFinisherCounter()===1,onConfirm:e=>e.gainColorMana({w:4,b:4}),highlightIf:e=>e.getFinisherCounter()===1});Ga("RESOLUTION",90,{startOnHotbar:!1,baseCastTime:0,baseManaCost:400,falloff:.6,applicationDelay:1.56,basePotency:[["NEVER",750],["ENCHANTED_BLADE_MASTERY",850]],validateAttempt:e=>e.getFinisherCounter()===2,onConfirm:e=>e.gainColorMana({w:4,b:4}),highlightIf:e=>e.getFinisherCounter()===2});Ga("VERCURE",54,{baseCastTime:2,baseManaCost:500,applicationDelay:.8,basePotency:0});Ga("VERRAISE",64,{baseCastTime:10,baseManaCost:2400,applicationDelay:.81,basePotency:0});je("RDM","EMBOLDEN",58,"cd_EMBOLDEN",{replaceIf:[{newSkill:"VICE_OF_THORNS",condition:e=>e.hasResourceAvailable("THORNED_FLOURISH")}],rscType:"EMBOLDEN",applicationDelay:.62,cooldown:120,onApplication:e=>{e.hasTraitUnlocked("ENHANCED_EMBOLDEN")&&(e.resources.get("THORNED_FLOURISH").gain(1),e.enqueueResourceDrop("THORNED_FLOURISH"))}});je("RDM","MANAFICATION",60,"cd_MANAFICATION",{replaceIf:[{newSkill:"PREFULGENCE",condition:e=>e.hasResourceAvailable("PREFULGENCE_READY")}],rscType:"MANAFICATION",requiresCombat:!0,applicationDelay:0,cooldown:110,onApplication:e=>{e.resources.get("MAGICKED_SWORDPLAY").gain(3),e.enqueueResourceDrop("MAGICKED_SWORDPLAY"),(e.hasResourceAvailable("RDM_MELEE_COUNTER")||e.hasResourceAvailable("RDM_FINISHER_COUNTER")||e.hasResourceAvailable("RDM_AOE_COUNTER"))&&O.reportWarning(Fe.ComboBreak),e.setComboState("RDM_MELEE_COUNTER",0),e.setComboState("RDM_FINISHER_COUNTER",0),e.setComboState("RDM_AOE_COUNTER",0)}});ds("CORPS_A_CORPS",6,"cd_CORPS_A_CORPS",{isPhysical:!0,applicationDelay:.62,potency:130,cooldown:35,maxCharges:2,animationLock:xa});const Tb=[["NEVER",130],["ENHANCED_DISPLACEMENT",180]];ds("ENGAGEMENT",40,"cd_DISPLACEMENT",{isPhysical:!0,applicationDelay:.62,potency:Tb,cooldown:35,maxCharges:2});ds("DISPLACEMENT",40,"cd_DISPLACEMENT",{isPhysical:!0,applicationDelay:.62,potency:Tb,cooldown:35,maxCharges:2,animationLock:xa});ds("FLECHE",45,"cd_FLECHE",{isPhysical:!0,applicationDelay:1.16,potency:[["NEVER",460],["ENCHANTED_BLADE_MASTERY",480]],cooldown:25});ds("CONTRE_SIXTE",56,"cd_CONTRE_SIXTE",{isPhysical:!0,falloff:0,applicationDelay:1.16,potency:[["NEVER",380],["ENCHANTED_BLADE_MASTERY",420]],cooldown:35});je("RDM","ACCELERATION",50,"cd_ACCELERATION",{rscType:"ACCELERATION",applicationDelay:0,cooldown:55,maxCharges:2,onApplication:e=>{e.hasTraitUnlocked("ENHANCED_ACCELERATION_II")&&(e.hasResourceAvailable("GRAND_IMPACT_READY")&&O.reportWarning(Fe.GIOverwrite),e.resources.get("GRAND_IMPACT_READY").gain(1),e.enqueueResourceDrop("GRAND_IMPACT_READY"))}});je("RDM","MAGICK_BARRIER",86,"cd_MAGICK_BARRIER",{rscType:"MAGICK_BARRIER",applicationDelay:0,cooldown:120});ds("VICE_OF_THORNS",92,"cd_VICE_OF_THORNS",{startOnHotbar:!1,falloff:.6,applicationDelay:.8,potency:800,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("THORNED_FLOURISH"),onConfirm:e=>e.tryConsumeResource("THORNED_FLOURISH"),highlightIf:e=>e.hasResourceAvailable("THORNED_FLOURISH")});ds("PREFULGENCE",100,"cd_PREFULGENCE",{startOnHotbar:!1,falloff:.6,applicationDelay:1.42,potency:1e3,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("PREFULGENCE_READY"),onConfirm:e=>e.tryConsumeResource("PREFULGENCE_READY"),highlightIf:e=>e.hasResourceAvailable("PREFULGENCE_READY")});Object.keys(pR).forEach(e=>Ua(e,`RPR/${Xe[e].name}.png`));class UP extends Wt{jobSpecificOtherTargetedBuffViewProps(){return[this.makeCommonTimer("DEATHS_DESIGN",!1)]}jobSpecificSelfTargetedBuffViewProps(){return[...Object.keys(pR).filter(t=>t!=="DEATHS_DESIGN").map(t=>t==="SOULSOW"?this.makeCommonTimerless(t):this.makeCommonTimer(t))]}jobSpecificResourceViewProps(t){var T,S;const n=this.state.resources,l=n.get("SOUL").availableAmount(),s=n.get("SHROUD").availableAmount(),c=n.get("LEMURE_SHROUD").availableAmount(),d=n.get("VOID_SHROUD").availableAmount(),f=n.get("RPR_COMBO"),E=n.get("RPR_AOE_COMBO"),A=f.available(1)?(T=f.pendingChange)==null?void 0:T.timeTillEvent:E.available(1)?(S=E.pendingChange)==null?void 0:S.timeTillEvent:void 0,R=[{kind:"text",name:p({en:"Combo Timer",zh:"连击监控"}),text:(A==null?void 0:A.toFixed(3))??"N/A"},{kind:"bar",name:p({en:"Soul Gauge",zh:"灵魂量谱"}),color:l<50?t.rpr.soulGaugeLow:t.rpr.soulGaugeHigh,progress:l/100,valueString:Math.floor(l)+"/100"}];return this.state.hasTraitUnlocked("SHROUD_GAUGE")&&R.push({kind:"bar",name:p({en:"Shroud Gauge",zh:"魂衣量谱"}),color:s<50?t.rpr.shroudGaugeLow:t.rpr.shroudGaugeHigh,progress:s/100,valueString:Math.floor(s)+"/100"},{kind:"counter",name:p({en:"Lemure Shroud",zh:"夜游魂"}),color:t.rpr.lemureShroud,currentStacks:c,maxStacks:5}),this.state.hasTraitUnlocked("VOID_SOUL")&&R.push({kind:"counter",name:p({en:"Void Shroud",zh:"虚无魂"}),color:d<2?t.rpr.voidShroudLow:t.rpr.voidShroudHigh,currentStacks:d,maxStacks:5}),R}}function pt(e,t,n){$e("RPR",e,t,n??{})}pt("SOUL",100);pt("SHROUD",100);pt("DEATHS_DESIGN",1,{});pt("SOUL_REAVER",2,{timeout:30});pt("ENHANCED_GIBBET",1,{timeout:60});pt("ENHANCED_GALLOWS",1,{timeout:60});pt("EXECUTIONER",2,{timeout:30});pt("ENSHROUDED",1,{timeout:30});pt("LEMURE_SHROUD",5,{timeout:30});pt("VOID_SHROUD",5);pt("OBLATIO",1,{timeout:30});pt("ENHANCED_VOID_REAPING",1,{timeout:30});pt("ENHANCED_CROSS_REAPING",1,{timeout:30});pt("IDEAL_HOST",1,{timeout:30});pt("PERFECTIO_OCCULTA",1,{timeout:30});pt("PERFECTIO_PARATA",1,{timeout:30});pt("ARCANE_CIRCLE",1,{timeout:20});pt("CIRCLE_OF_SACRIFICE",1,{timeout:5});pt("BLOODSOWN_CIRCLE",1,{timeout:6});pt("IMMORTAL_SACRIFICE",8,{timeout:30});pt("ARCANE_CREST",1,{timeout:5});pt("CREST_OF_TIME_BORROWED",1,{timeout:5});pt("CREST_OF_TIME_RETURNED",1,{timeout:15});pt("SOULSOW",1,{default:1});pt("THRESHOLD",1,{timeout:10});pt("ENHANCED_HARPE",1,{timeout:10});pt("HELLS_INGRESS_USED",1);pt("RPR_COMBO",2,{timeout:30});pt("RPR_AOE_COMBO",1,{timeout:30});class kP extends qt{constructor(t){super(t);const n=this.hasTraitUnlocked("TEMPERED_SOUL")?2:1;this.cooldowns.set(new Ke("cd_SOUL_SLICE",30,n,n)),this.registerRecurringEvents()}get statusPropsGenerator(){return new UP(this)}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("ARCANE_CIRCLE")&&t.addBuff(P.ArcaneCircle),this.hasResourceAvailable("DEATHS_DESIGN")&&t.addBuff(P.DeathsDesign)}refreshDeathsDesign(){const t=this.resources.get("DEATHS_DESIGN"),n=Math.min(this.resources.timeTillReady("DEATHS_DESIGN")+30,60);if(t.available(1)){t.overrideTimer(this,n);return}t.gain(1),this.resources.addResourceEvent({rscType:"DEATHS_DESIGN",name:"drop Death's Design",delay:n,fnOnRsc:l=>{l.consume(1)}})}setTimedResource(t,n){this.tryConsumeResource(t),this.resources.get(t).gain(n),this.enqueueResourceDrop(t)}processCombo(t){const n=this.resources.get("RPR_COMBO").availableAmount(),l=this.resources.get("RPR_AOE_COMBO").availableAmount();let[s,c]=new Map([["SLICE",[1,0]],["WAXING_SLICE",[n===1?2:0,0]],["INFERNAL_SLICE",[0,0]],["SPINNING_SCYTHE",[0,1]],["NIGHTMARE_SCYTHE",[0,0]]]).get(t)??[n,l];s!==n&&this.setComboState("RPR_COMBO",s),c!==l&&this.setComboState("RPR_AOE_COMBO",c)}processSoulGauge(t){const n=this.resources.get("SOUL");if(["SLICE","WAXING_SLICE","INFERNAL_SLICE","SPINNING_SCYTHE","NIGHTMARE_SCYTHE","HARPE","HARVEST_MOON"].includes(t)){n.gain(10);return}if(["SOUL_SLICE","SOUL_SCYTHE"].includes(t)){n.gain(50);return}if(["BLOOD_STALK","UNVEILED_GALLOWS","UNVEILED_GIBBET","GRIM_SWATHE","GLUTTONY"].includes(t)){n.consume(50);return}}processShroudGauge(t){const n=this.resources.get("SHROUD");if(["GALLOWS","GIBBET","EXECUTIONERS_GALLOWS","EXECUTIONERS_GIBBET","GUILLOTINE","EXECUTIONERS_GUILLOTINE"].includes(t)){n.gain(10);return}t==="ENSHROUD"&&!this.resources.get("IDEAL_HOST").available(1)&&n.consume(50)}processReaversExecutioner(t){const n=this.resources.get("SOUL_REAVER"),l=this.resources.get("EXECUTIONER");if(["GIBBET","GALLOWS","GUILLOTINE"].includes(t)){n.consume(1);return}if(["EXECUTIONERS_GIBBET","EXECUTIONERS_GALLOWS","EXECUTIONERS_GUILLOTINE"].includes(t)){l.consume(1);return}if(this.skillsList.get(t).cdName==="cd_GCD"&&(n.consume(n.availableAmount()),l.consume(l.availableAmount())),["BLOOD_STALK","UNVEILED_GALLOWS","UNVEILED_GIBBET","GRIM_SWATHE"].includes(t)){n.consume(n.availableAmount()),l.consume(l.availableAmount()),this.setTimedResource("SOUL_REAVER",1);return}if(t==="GLUTTONY"){if(n.consume(n.availableAmount()),l.consume(l.availableAmount()),this.hasTraitUnlocked("ENHANCED_GLUTTONY")){this.setTimedResource("EXECUTIONER",2);return}this.setTimedResource("SOUL_REAVER",2);return}}processGibbetGallows(t){const n=this.resources.get("SOUL_REAVER"),l=this.resources.get("EXECUTIONER");["GIBBET","GALLOWS","EXECUTIONERS_GIBBET","EXECUTIONERS_GALLOWS"].includes(t)||(n.consume(n.availableAmount()),l.consume(l.availableAmount()));const s=new Map([["GIBBET","ENHANCED_GIBBET"],["EXECUTIONERS_GIBBET","ENHANCED_GIBBET"],["GALLOWS","ENHANCED_GALLOWS"],["EXECUTIONERS_GALLOWS","ENHANCED_GALLOWS"]]),c=new Map([["GIBBET","ENHANCED_GALLOWS"],["EXECUTIONERS_GIBBET","ENHANCED_GALLOWS"],["GALLOWS","ENHANCED_GIBBET"],["EXECUTIONERS_GALLOWS","ENHANCED_GIBBET"]]),d=this.resources.get(s.get(t)),f=this.resources.get(c.get(t));d.consume(d.availableAmount()),f.consume(f.availableAmount()),f.gain(1)}processCircleOfSacrifice(t){if(!this.hasResourceAvailable("CIRCLE_OF_SACRIFICE"))return;Zo("RPR",t).potencyFn(this)>0&&(this.resources.get("IMMORTAL_SACRIFICE").availableAmount()===0?this.setTimedResource("IMMORTAL_SACRIFICE",1):this.resources.get("IMMORTAL_SACRIFICE").gain(1),this.tryConsumeResource("CIRCLE_OF_SACRIFICE",!0))}enterEnshroud(){this.hasResourceAvailable("IDEAL_HOST")&&this.resources.get("IDEAL_HOST").consume(1),this.hasTraitUnlocked("ENHANCED_ENSHROUD")&&this.setTimedResource("OBLATIO",1),this.setTimedResource("LEMURE_SHROUD",5),this.tryConsumeResource("PERFECTIO_PARATA",!0)}exitEnshroud(){this.tryConsumeResource("ENSHROUDED"),this.tryConsumeResource("OBLATIO"),this.tryConsumeResource("LEMURE_SHROUD"),this.tryConsumeResource("VOID_SHROUD"),this.tryConsumeResource("ENHANCED_CROSS_REAPING"),this.tryConsumeResource("ENHANCED_VOID_REAPING")}}const PP=new Set(["SHADOW_OF_DEATH","WHORL_OF_DEATH","HARVEST_MOON","HARPE","VOID_REAPING","CROSS_REAPING","GRIM_REAPING","LEMURES_SLICE","LEMURES_SCYTHE","SACRIFICIUM","COMMUNIO","ARCANE_CIRCLE","HELLS_EGRESS","HELLS_INGRESS","REGRESS","ARCANE_CREST","FEINT","LEG_SWEEP","BLOODBATH","TRUE_NORTH","ARMS_LENGTH","SECOND_WIND","SPRINT","TINCTURE"]),Th=(e,t)=>n=>{const l=["GIBBET","GALLOWS","GUILLOTINE"].includes(t)?n.resources.get("SOUL_REAVER"):n.resources.get("EXECUTIONER");return n.resources.get(e).available(1)||l.available(1)&&!n.hasResourceAvailable("ENHANCED_GIBBET")&&!n.hasResourceAvailable("ENHANCED_GALLOWS")},dT=e=>e.hasResourceAvailable("SOUL_REAVER"),fT=e=>e.hasResourceAvailable("EXECUTIONER"),Gi=e=>t=>t.resources.get("SOUL").availableAmount()>=e,hT=e=>PP.has(e),Sh=e=>lt(t=>t.processCombo(e),t=>t.processSoulGauge(e),t=>t.processShroudGauge(e),t=>t.processReaversExecutioner(e),t=>t.processCircleOfSacrifice(e)),ET=e=>{const t=[];return e.hasResourceAvailable("ARCANE_CIRCLE")&&t.push(ue.ArcaneCircle),e.hasResourceAvailable("DEATHS_DESIGN")&&t.push(ue.DeathsDesign),t},gh=(e,t,n)=>{const l=lt(Sh(e),n.onConfirm??ze),s=eh(c=>!c.resources.get("ENSHROUDED").available(1)||hT(e),n.validateAttempt??(()=>!0));return Fi("RPR",e,t,{...n,recastTime:c=>c.config.adjustedGCD(n.recastTime),onConfirm:l,validateAttempt:s,isInstantFn:c=>!(e==="COMMUNIO"||e==="HARPE"&&!c.hasResourceAvailable("ENHANCED_HARPE")||e==="SOULSOW"&&c.isInCombat()),jobPotencyModifiers:ET})},Sa=(e,t,n)=>{const l=lt(Sh(e),n.onConfirm??ze),s=eh(c=>!c.resources.get("ENSHROUDED").available(1)||hT(e),n.validateAttempt??(()=>!0));return Ni("RPR",e,t,{...n,onConfirm:l,jobPotencyModifiers:c=>{const d=ET(c);if(n.combo&&c.resources.get(n.combo.resource).availableAmount()===n.combo.resourceValue&&d.push(Bi(We(c,n.combo.potency)-We(c,n.potency))),n.positional&&(c.hasResourceAvailable("TRUE_NORTH")||n.positional.location==="flank"&&c.hasResourceAvailable("FLANK_POSITIONAL")||n.positional.location==="rear"&&c.hasResourceAvailable("REAR_POSITIONAL"))&&d.push(ou(We(c,n.positional.potency)-We(c,n.potency))),["GIBBET","EXECUTIONERS_GIBBET"].includes(e)&&c.hasResourceAvailable("ENHANCED_GIBBET")&&d.push(ue.EnhancedGibbetGallows),["GALLOWS","EXECUTIONERS_GALLOWS"].includes(e)&&c.hasResourceAvailable("ENHANCED_GALLOWS")&&d.push(ue.EnhancedGibbetGallows),e==="VOID_REAPING"&&c.hasResourceAvailable("ENHANCED_VOID_REAPING")&&d.push(ue.EnhancedReaping),e==="CROSS_REAPING"&&c.hasResourceAvailable("ENHANCED_CROSS_REAPING")&&d.push(ue.EnhancedReaping),e==="PLENTIFUL_HARVEST"&&c.hasResourceAvailable("IMMORTAL_SACRIFICE"))for(let f=0;f<c.resources.get("IMMORTAL_SACRIFICE").availableAmount();f++)d.push(ue.ImmortalSacrifice);return d},validateAttempt:s})},On=(e,t,n,l)=>{const s=lt(Sh(e),l.onConfirm??ze),c=eh(d=>!d.resources.get("ENSHROUDED").available(1)||hT(e),l.validateAttempt??(()=>!0));return Rt("RPR",e,t,n,{...l,onConfirm:s,validateAttempt:c,jobPotencyModifiers:ET})};Sa("SHADOW_OF_DEATH",10,{potency:300,aspect:ge.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:1.15,onConfirm:e=>e.refreshDeathsDesign()});Sa("SLICE",1,{potency:[["NEVER",260],["MELEE_MASTERY_II_RPR",320],["MELEE_MASTERY_III_RPR",460]],aspect:ge.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.49});Sa("WAXING_SLICE",5,{potency:[["NEVER",100],["MELEE_MASTERY_II_RPR",160],["MELEE_MASTERY_III_RPR",260]],combo:{potency:[["NEVER",340],["MELEE_MASTERY_II_RPR",400],["MELEE_MASTERY_III_RPR",500]],resource:"RPR_COMBO",resourceValue:1},aspect:ge.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.58,highlightIf:function(e){return e.resources.get("RPR_COMBO").availableAmount()===1}});Sa("INFERNAL_SLICE",30,{potency:[["NEVER",100],["MELEE_MASTERY_II_RPR",180],["MELEE_MASTERY_III_RPR",280]],combo:{potency:[["NEVER",420],["MELEE_MASTERY_II_RPR",500],["MELEE_MASTERY_III_RPR",600]],resource:"RPR_COMBO",resourceValue:2},aspect:ge.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.54,highlightIf:function(e){return e.resources.get("RPR_COMBO").availableAmount()===2}});Sa("SOUL_SLICE",60,{potency:[["NEVER",460],["MELEE_MASTERY_III_RPR",520]],aspect:ge.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.99,secondaryCooldown:{cdName:"cd_SOUL_SLICE",cooldown:30,maxCharges:2}});Sa("GIBBET",70,{replaceIf:[{newSkill:"VOID_REAPING",condition:e=>e.hasResourceAvailable("ENSHROUDED")},{newSkill:"EXECUTIONERS_GIBBET",condition:e=>e.hasResourceAvailable("EXECUTIONER")}],potency:[["NEVER",460],["MELEE_MASTERY_III_RPR",500]],positional:{potency:[["NEVER",520],["MELEE_MASTERY_III_RPR",560]],location:"flank"},aspect:ge.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.5,highlightIf:Th("ENHANCED_GIBBET","GIBBET"),validateAttempt:dT,onConfirm:e=>{e.tryConsumeResource("ENHANCED_GIBBET"),e.setTimedResource("ENHANCED_GALLOWS",1)}});Sa("GALLOWS",70,{replaceIf:[{newSkill:"CROSS_REAPING",condition:e=>e.hasResourceAvailable("ENSHROUDED")},{newSkill:"EXECUTIONERS_GALLOWS",condition:e=>e.resources.get("EXECUTIONER").available(1)}],potency:[["NEVER",460],["MELEE_MASTERY_III_RPR",500]],positional:{potency:[["NEVER",520],["MELEE_MASTERY_III_RPR",560]],location:"rear"},aspect:ge.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.53,highlightIf:Th("ENHANCED_GALLOWS","GALLOWS"),validateAttempt:dT,onConfirm:e=>{e.tryConsumeResource("ENHANCED_GALLOWS"),e.setTimedResource("ENHANCED_GIBBET",1)}});Sa("EXECUTIONERS_GIBBET",96,{startOnHotbar:!1,potency:700,positional:{potency:760,location:"flank"},aspect:ge.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.62,highlightIf:Th("ENHANCED_GIBBET","EXECUTIONERS_GIBBET"),validateAttempt:fT,onConfirm:e=>{e.tryConsumeResource("ENHANCED_GIBBET"),e.setTimedResource("ENHANCED_GALLOWS",1)}});Sa("EXECUTIONERS_GALLOWS",96,{startOnHotbar:!1,potency:700,positional:{potency:760,location:"flank"},aspect:ge.Physical,recastTime:e=>e.config.adjustedSksGCD(),applicationDelay:.62,highlightIf:Th("ENHANCED_GALLOWS","EXECUTIONERS_GALLOWS"),validateAttempt:fT,onConfirm:e=>{e.tryConsumeResource("ENHANCED_GALLOWS"),e.setTimedResource("ENHANCED_GIBBET",1)}});Sa("PLENTIFUL_HARVEST",88,{potency:720,aspect:ge.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:.4,applicationDelay:1.16,highlightIf:e=>e.hasResourceAvailable("IMMORTAL_SACRIFICE",1),validateAttempt:e=>e.hasResourceAvailable("IMMORTAL_SACRIFICE",1)&&!e.hasResourceAvailable("BLOODSOWN_CIRCLE"),onConfirm:e=>{e.resources.get("IMMORTAL_SACRIFICE").consume(e.resources.get("IMMORTAL_SACRIFICE").availableAmount()),e.setTimedResource("IDEAL_HOST",1),e.setTimedResource("PERFECTIO_OCCULTA",1)}});gh("COMMUNIO",90,{replaceIf:[{condition:e=>e.hasResourceAvailable("PERFECTIO_PARATA"),newSkill:"PERFECTIO"}],potency:1100,aspect:ge.Other,castTime:1.3,recastTime:2.5,falloff:.4,applicationDelay:1.16,validateAttempt:e=>e.hasResourceAvailable("ENSHROUDED"),highlightIf:e=>e.hasResourceAvailable("ENSHROUDED")&&e.resources.get("LEMURE_SHROUD").availableAmount()===1,onConfirm:e=>{e.hasResourceAvailable("PERFECTIO_OCCULTA")&&(e.resources.get("PERFECTIO_OCCULTA").consume(1),e.setTimedResource("PERFECTIO_PARATA",1)),e.exitEnshroud(),e.tryConsumeResource("ENHANCED_CROSS_REAPING"),e.tryConsumeResource("ENHANCED_VOID_REAPING")}});gh("HARPE",15,{potency:300,aspect:ge.Other,castTime:1.3,recastTime:2.5,applicationDelay:.9,highlightIf:e=>e.hasResourceAvailable("ENHANCED_HARPE"),onConfirm:e=>e.tryConsumeResource("ENHANCED_HARPE")});gh("SOULSOW",82,{potency:0,replaceIf:[{condition:e=>e.hasResourceAvailable("SOULSOW"),newSkill:"HARVEST_MOON"}],startOnHotbar:!0,aspect:ge.Other,castTime:5,recastTime:2.5,applicationDelay:0,onConfirm:e=>e.resources.get("SOULSOW").gain(1)});gh("HARVEST_MOON",82,{potency:[["NEVER",600],["MELEE_MASTERY_III_RPR",800]],startOnHotbar:!1,aspect:ge.Other,castTime:0,recastTime:2.5,falloff:.4,applicationDelay:.9,validateAttempt:e=>e.hasResourceAvailable("SOULSOW"),highlightIf:e=>e.hasResourceAvailable("SOULSOW"),onConfirm:e=>e.resources.get("SOULSOW").consume(1)});On("GLUTTONY",76,"cd_GLUTTONY",{replaceIf:[{condition:e=>e.hasResourceAvailable("ENSHROUDED"),newSkill:"SACRIFICIUM"}],isPhysical:!1,potency:520,startOnHotbar:!0,falloff:.25,applicationDelay:1.06,cooldown:60,validateAttempt:Gi(50),highlightIf:Gi(50)});On("BLOOD_STALK",50,"cd_BLOOD_STALK",{replaceIf:[{newSkill:"LEMURES_SLICE",condition:e=>e.hasResourceAvailable("ENSHROUDED")},{newSkill:"UNVEILED_GIBBET",condition:e=>e.hasResourceAvailable("ENHANCED_GIBBET")},{newSkill:"UNVEILED_GALLOWS",condition:e=>e.hasResourceAvailable("ENHANCED_GALLOWS")}],isPhysical:!0,potency:340,startOnHotbar:!0,applicationDelay:.89,cooldown:1,validateAttempt:Gi(50),highlightIf:Gi(50)});On("GRIM_SWATHE",55,"cd_BLOOD_STALK",{replaceIf:[{condition:e=>e.hasResourceAvailable("ENSHROUDED"),newSkill:"LEMURES_SCYTHE"}],isPhysical:!0,potency:140,startOnHotbar:!0,falloff:0,applicationDelay:.58,cooldown:1,validateAttempt:Gi(50),highlightIf:Gi(50)});On("UNVEILED_GIBBET",70,"cd_BLOOD_STALK",{isPhysical:!0,potency:440,startOnHotbar:!1,applicationDelay:.54,cooldown:1,validateAttempt:Gi(50),highlightIf:Gi(50)});On("UNVEILED_GALLOWS",70,"cd_BLOOD_STALK",{isPhysical:!0,potency:440,startOnHotbar:!1,applicationDelay:.54,cooldown:1,validateAttempt:Gi(50),highlightIf:Gi(50)});On("LEMURES_SLICE",86,"cd_LEMURES_SLICE",{isPhysical:!0,potency:[["NEVER",240],["MELEE_MASTERY_III_RPR",280]],startOnHotbar:!1,applicationDelay:.7,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("VOID_SHROUD",2),highlightIf:e=>e.hasResourceAvailable("VOID_SHROUD",2),onConfirm:e=>{e.resources.get("VOID_SHROUD").consume(2)}});On("SACRIFICIUM",92,"cd_SACRIFICIUM",{isPhysical:!1,potency:600,startOnHotbar:!1,falloff:.4,applicationDelay:.76,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("OBLATIO"),highlightIf:e=>e.hasResourceAvailable("OBLATIO"),onConfirm:e=>e.resources.get("OBLATIO").consume(1)});je("RPR","ARCANE_CIRCLE",72,"cd_ARCANE_CIRCLE",{rscType:"ARCANE_CIRCLE",applicationDelay:.6,startOnHotbar:!0,maxCharges:1,potency:0,onApplication:e=>{e.hasTraitUnlocked("ENHANCED_ARCANE_CIRCLE")&&(e.setTimedResource("CIRCLE_OF_SACRIFICE",1),e.setTimedResource("BLOODSOWN_CIRCLE",1))},cooldown:120});Sa("VOID_REAPING",80,{startOnHotbar:!1,potency:[["NEVER",460],["MELEE_MASTERY_III_RPR",540]],aspect:ge.Physical,recastTime:1.5,applicationDelay:.53,highlightIf:e=>e.resources.get("LEMURE_SHROUD").availableAmount()>1&&!e.hasResourceAvailable("ENHANCED_CROSS_REAPING"),validateAttempt:e=>e.hasResourceAvailable("LEMURE_SHROUD"),onConfirm:e=>{e.tryConsumeResource("ENHANCED_VOID_REAPING"),e.setTimedResource("ENHANCED_CROSS_REAPING",1),e.resources.get("LEMURE_SHROUD").consume(1),e.resources.get("VOID_SHROUD").gain(1),e.resources.get("LEMURE_SHROUD").availableAmount()===0&&e.exitEnshroud()}});Sa("CROSS_REAPING",80,{startOnHotbar:!1,potency:[["NEVER",460],["MELEE_MASTERY_III_RPR",540]],aspect:ge.Physical,recastTime:1.5,applicationDelay:.53,highlightIf:e=>e.resources.get("LEMURE_SHROUD").availableAmount()>1&&!e.hasResourceAvailable("ENHANCED_VOID_REAPING"),validateAttempt:e=>e.hasResourceAvailable("LEMURE_SHROUD"),onConfirm:e=>{e.tryConsumeResource("ENHANCED_CROSS_REAPING"),e.setTimedResource("ENHANCED_VOID_REAPING",1),e.resources.get("LEMURE_SHROUD").consume(1),e.resources.get("VOID_SHROUD").gain(1),e.resources.get("LEMURE_SHROUD").availableAmount()===0&&e.exitEnshroud()}});je("RPR","ENSHROUD",80,"cd_ENSHROUD",{rscType:"ENSHROUDED",highlightIf:e=>e.hasResourceAvailable("SHROUD",50)||e.hasResourceAvailable("IDEAL_HOST"),applicationDelay:0,startOnHotbar:!0,cooldown:15,validateAttempt:e=>e.hasResourceAvailable("SHROUD",50)||e.hasResourceAvailable("IDEAL_HOST"),onConfirm:lt(Sh("ENSHROUD"),e=>{e.enterEnshroud()})});Sa("PERFECTIO",100,{potency:1300,aspect:ge.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:.4,applicationDelay:1.29,startOnHotbar:!1,highlightIf:e=>e.hasResourceAvailable("PERFECTIO_PARATA"),validateAttempt:e=>e.hasResourceAvailable("PERFECTIO_PARATA"),onConfirm:e=>{e.resources.get("PERFECTIO_PARATA").consume(1)}});On("REGRESS",74,"cd_BLOOD_STALK",{cooldown:1,animationLock:xa,startOnHotbar:!1,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("THRESHOLD"),onConfirm:e=>e.resources.get("THRESHOLD").consume(1)});On("HELLS_INGRESS",20,"cd_INGRESS_EGRESS",{replaceIf:[{condition:e=>e.hasResourceAvailable("THRESHOLD")&&e.hasResourceAvailable("HELLS_INGRESS_USED"),newSkill:"REGRESS"}],cooldown:20,animationLock:xa,onConfirm:e=>{e.resources.get("HELLS_INGRESS_USED").gain(1),e.hasTraitUnlocked("HELLSGATE")&&e.setTimedResource("THRESHOLD",1),e.setTimedResource("ENHANCED_HARPE",1)}});On("HELLS_EGRESS",20,"cd_INGRESS_EGRESS",{replaceIf:[{condition:e=>e.hasResourceAvailable("THRESHOLD")&&!e.hasResourceAvailable("HELLS_INGRESS_USED"),newSkill:"REGRESS"}],cooldown:20,animationLock:xa,onConfirm:e=>{e.tryConsumeResource("HELLS_INGRESS_USED"),e.hasTraitUnlocked("HELLSGATE")&&e.setTimedResource("THRESHOLD",1),e.setTimedResource("ENHANCED_HARPE",1)}});On("ARCANE_CREST",40,"cd_ARCANE_CREST",{replaceIf:[{condition:e=>e.hasResourceAvailable("CREST_OF_TIME_BORROWED"),newSkill:"ARCANE_CREST_POP"}],cooldown:30,onConfirm:e=>e.setTimedResource("CREST_OF_TIME_BORROWED",1)});On("ARCANE_CREST_POP",40,"cd_ARCANE_CREST_POP",{cooldown:1,animationLock:bn,startOnHotbar:!1,onConfirm:e=>{e.resources.get("CREST_OF_TIME_BORROWED").consume(1),e.setTimedResource("CREST_OF_TIME_RETURNED",1)},validateAttempt:e=>e.hasResourceAvailable("CREST_OF_TIME_BORROWED"),highlightIf:e=>e.hasResourceAvailable("CREST_OF_TIME_BORROWED")});Sa("WHORL_OF_DEATH",35,{potency:100,aspect:ge.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:1.15,onConfirm:e=>e.refreshDeathsDesign()});Sa("SPINNING_SCYTHE",25,{potency:140,aspect:ge.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.62});Sa("NIGHTMARE_SCYTHE",45,{potency:120,combo:{potency:180,resource:"RPR_AOE_COMBO",resourceValue:1},aspect:ge.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.8,highlightIf:function(e){return e.resources.get("RPR_AOE_COMBO").availableAmount()===1}});Sa("SOUL_SCYTHE",65,{potency:180,aspect:ge.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.66,secondaryCooldown:{cdName:"cd_SOUL_SLICE",cooldown:30,maxCharges:2}});Sa("EXECUTIONERS_GUILLOTINE",96,{startOnHotbar:!1,potency:260,aspect:ge.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.53,highlightIf:e=>e.hasResourceAvailable("EXECUTIONER"),validateAttempt:fT});Sa("GRIM_REAPING",80,{startOnHotbar:!1,potency:200,recastTime:1.5,falloff:0,applicationDelay:.8,highlightIf:e=>e.resources.get("LEMURE_SHROUD").availableAmount()>1,validateAttempt:e=>e.hasResourceAvailable("LEMURE_SHROUD"),onConfirm:e=>{e.resources.get("LEMURE_SHROUD").consume(1),e.resources.get("VOID_SHROUD").gain(1),e.resources.get("LEMURE_SHROUD").availableAmount()===0&&e.exitEnshroud()},aspect:ge.Physical});On("LEMURES_SCYTHE",86,"cd_LEMURES_SLICE",{isPhysical:!0,potency:100,falloff:0,applicationDelay:.66,cooldown:1,startOnHotbar:!1,validateAttempt:e=>e.hasResourceAvailable("VOID_SHROUD",2),highlightIf:e=>e.hasResourceAvailable("VOID_SHROUD",2),onConfirm:e=>{e.resources.get("VOID_SHROUD").consume(2)}});Sa("GUILLOTINE",70,{replaceIf:[{newSkill:"GRIM_REAPING",condition:e=>e.hasResourceAvailable("ENSHROUDED")},{newSkill:"EXECUTIONERS_GUILLOTINE",condition:e=>e.resources.get("EXECUTIONER").available(1)}],potency:200,aspect:ge.Physical,recastTime:e=>e.config.adjustedSksGCD(),falloff:0,applicationDelay:.49,highlightIf:e=>e.hasResourceAvailable("SOUL_REAVER"),validateAttempt:dT});On("GAIN_SOUL_GAUGE",50,"cd_GAIN_SOUL_GAUGE",{applicationDelay:0,animationLock:bn,cooldown:.01,onConfirm:e=>e.resources.get("SOUL").gain(10)});Object.keys(IR).forEach(e=>Ua(e,`SAM/${Xe[e].name}.png`));class GP extends Wt{jobSpecificOtherTargetedBuffViewProps(){return[this.makeCommonTimer("HIGANBANA_DOT",!1)]}jobSpecificSelfTargetedBuffViewProps(){return Object.keys(IR).filter(t=>t!=="HIGANBANA_DOT").map(t=>this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){const n=this.state.resources,l=n.get("KENKI").availableAmount(),s=n.get("MEDITATION").availableAmount();return[{kind:"sen",name:p({en:"sen",zh:"闪"}),hasSetsu:this.state.hasResourceAvailable("SETSU"),hasGetsu:this.state.hasResourceAvailable("GETSU"),hasKa:this.state.hasResourceAvailable("KA_SEN"),setsuColor:t.sam.setsu,getsuColor:t.sam.getsu,kaColor:t.sam.kaSen},{kind:"bar",name:p({en:"kenki",zh:"剑气"}),color:t.sam.kenki,progress:l/100,valueString:l.toFixed(0)},{kind:"counter",name:p({en:"meditation",zh:"剑压"}),color:t.sam.meditation,currentStacks:s,maxStacks:3}]}}const ga=(e,t,n)=>{$e("SAM",e,t,n??{})};ga("MEIKYO_SHISUI",3,{timeout:20});ga("FUGETSU",1,{timeout:40});ga("FUKA",1,{timeout:40});ga("ZANSHIN_READY",1,{timeout:30});ga("TENDO",1,{timeout:30});ga("OGI_READY",1,{timeout:30});ga("TSUBAME_GAESHI_READY",1,{timeout:30});ga("THIRD_EYE",1,{timeout:4});ga("TENGENTSU",1,{timeout:4});ga("TENGENTSUS_FORESIGHT",1,{timeout:9});ga("ENHANCED_ENPI",1,{timeout:15});ga("MEDITATE",1,{timeout:15.2});ga("KENKI",100);ga("SETSU",1);ga("GETSU",1);ga("KA_SEN",1);ga("MEDITATION",3);ga("HIGANBANA_DOT",1,{timeout:60});const Sb=["SAM_TWO_READY","SAM_TWO_AOE_READY","GEKKO_READY","KASHA_READY","KAESHI_OGI_READY"];Sb.forEach(e=>ga(e,1,{timeout:30}));ga("KAESHI_TRACKER",4,{timeout:30});class wP extends qt{constructor(t){super(t);const n=this.hasTraitUnlocked("ENHANCED_HISSATSU")?60:120,l=this.hasTraitUnlocked("ENHANCED_MEIKYO_SHISUI")?2:1;[new Ke("cd_MEIKYO_SHISUI",55,l,l),new Ke("cd_SENEI_GUREN",n,1,1)].forEach(s=>this.cooldowns.set(s)),super.registerRecurringEvents([{reportName:Wa("HIGANBANA_DOT"),groupedEffects:[{effectName:"HIGANBANA_DOT",appliedBy:["HIGANBANA"]}]}])}get statusPropsGenerator(){return new GP(this)}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("ENHANCED_ENPI")&&n.name==="ENPI"&&t.addBuff(P.EnhancedEnpi),this.hasResourceAvailable("FUGETSU")&&t.addBuff(P.Fugetsu)}jobSpecificAddSpeedBuffCovers(t,n){this.hasResourceAvailable("FUKA")&&n.cdName==="cd_GCD"&&t.addBuff(P.Fuka)}cancelChanneledSkills(){const t=this.findNextQueuedEventByTag(sn.MeditateTick);t&&(t.canceled=!0),this.tryConsumeResource("MEDITATE")}getFugetsuModifier(){return this.hasTraitUnlocked("ENHANCED_FUGETSU_AND_FUKA")?ue.FugetsuEnhanced:ue.FugetsuBase}getFukaModifier(){return this.hasResourceAvailable("FUKA")?this.hasTraitUnlocked("ENHANCED_FUGETSU_AND_FUKA")?13:10:0}checkCombo(t){return this.hasResourceAvailable(t)||this.hasResourceAvailable("MEIKYO_SHISUI")}refreshBuff(t,n){this.addEvent(new Le("gain fugetsu",n,()=>{this.resources.get(t).gain(1),this.enqueueResourceDrop(t)}))}progressActiveCombo(t){Sb.forEach(n=>{t.includes(n)||this.setComboState(n,0)}),t.forEach(n=>this.setComboState(n,1))}tryConsumeMeikyo(){this.tryConsumeResource("MEIKYO_SHISUI")}gainKenki(t){this.resources.get("KENKI").availableAmount()+t>100&&O.reportWarning(Fe.KenkiOvercap),this.resources.get("KENKI").gain(t)}gainMeditation(){this.resources.get("MEDITATION").availableAmount()===3&&O.reportWarning(Fe.MeditationOvercap),this.resources.get("MEDITATION").gain(1)}gainSen(t){const n=this.resources.get(t);n.available(1)&&O.reportWarning(Fe.SenOvercap),n.gain(1)}countSen(){return["GETSU","SETSU","KA_SEN"].reduce((t,n)=>this.hasResourceAvailable(n)?t+1:t,0)}consumeAllSen(){this.resources.get("SETSU").available(1)&&this.resources.get("SETSU").consume(1),this.resources.get("GETSU").available(1)&&this.resources.get("GETSU").consume(1),this.resources.get("KA_SEN").available(1)&&this.resources.get("KA_SEN").consume(1)}startMeditateTimer(){const t=n=>{const l=new Le("meditate tick",3,()=>{n<5&&(this.isInCombat()&&(O.reportMeditateTick(this.time,"+kenki/meditation"),this.resources.get("KENKI").gain(10),this.resources.get("MEDITATION").gain(1)),this.addEvent(t(n+1)))});return l.addTag(sn.MeditateTick),l};this.addEvent(t(0))}}const Bt=(e,t,n)=>{const l=n.onApplication??ze,s=d=>{const f=d.hasResourceAvailable("FUGETSU")?[d.getFugetsuModifier()]:[];n.jobPotencyModifiers&&f.push(...n.jobPotencyModifiers(d));const E=n.positional&&(d.hasResourceAvailable("TRUE_NORTH")||n.positional.location==="flank"&&d.hasResourceAvailable("FLANK_POSITIONAL")||n.positional.location==="rear"&&d.hasResourceAvailable("REAR_POSITIONAL"));return n.combo&&d.checkCombo(n.combo.resource)?(f.push(Bi(We(d,n.combo.potency)-We(d,n.basePotency))),n.positional&&E&&f.push(ou(We(d,n.positional.comboPotency)-We(d,n.combo.potency)))):n.positional&&E&&f.push(ou(We(d,n.positional.potency)-We(d,n.basePotency))),f};let c=n.baseCastTime||0;return c&&(c=d=>d.hasTraitUnlocked("ENHANCED_IAIJUTSU")?n.baseCastTime||0:d.config.adjustedSksCastTime(1.8,d.getFukaModifier())),Ni("SAM",e,t,{replaceIf:n.replaceIf,startOnHotbar:n.startOnHotbar,highlightIf:n.highlightIf,autoUpgrade:n.autoUpgrade,autoDowngrade:n.autoDowngrade,castTime:c,recastTime:d=>d.config.adjustedSksGCD(n.baseRecastTime??2.5,d.getFukaModifier()),potency:n.basePotency,validateAttempt:n.validateAttempt,jobPotencyModifiers:s,applicationDelay:n.applicationDelay,isInstantFn:d=>!(n.baseCastTime&&n.baseCastTime>0),onConfirm:n.onConfirm,onApplication:l})},Wn=(e,t,n,l)=>(l.potency&&!l.jobPotencyModifiers&&(l.jobPotencyModifiers=s=>s.hasResourceAvailable("FUGETSU")?[s.getFugetsuModifier()]:[]),Rt("SAM",e,t,n,l));Bt("ENPI",15,{applicationDelay:.71,basePotency:100,onConfirm:e=>{e.hasResourceAvailable("ENHANCED_ENPI")&&e.tryConsumeResource("ENHANCED_ENPI"),e.gainKenki(10)},jobPotencyModifiers:e=>e.hasResourceAvailable("ENHANCED_ENPI")?[e.hasTraitUnlocked("WAY_OF_THE_SAMURAI_III")?ue.YatenpiEnhanced:ue.YatenpiBase]:[],highlightIf:e=>e.hasResourceAvailable("ENHANCED_ENPI")});Bt("HAKAZE",1,{autoUpgrade:{trait:"HAKAZE_MASTERY",otherSkill:"GYOFU"},applicationDelay:.85,basePotency:200,onConfirm:e=>{e.tryConsumeMeikyo(),e.gainKenki(5),e.progressActiveCombo(["SAM_TWO_READY"])}});Bt("GYOFU",92,{autoDowngrade:{trait:"HAKAZE_MASTERY",otherSkill:"HAKAZE"},applicationDelay:.85,basePotency:240,onConfirm:e=>{e.tryConsumeMeikyo(),e.gainKenki(5),e.progressActiveCombo(["SAM_TWO_READY"])}});Bt("YUKIKAZE",50,{applicationDelay:.85,basePotency:[["NEVER",100],["WAY_OF_THE_SAMURAI_II",110],["WAY_OF_THE_SAMURAI_III",160]],combo:{potency:[["NEVER",280],["WAY_OF_THE_SAMURAI_II",290],["WAY_OF_THE_SAMURAI_III",340]],resource:"SAM_TWO_READY"},onConfirm:e=>{e.checkCombo("SAM_TWO_READY")&&(e.gainKenki(15),e.gainSen("SETSU")),e.tryConsumeMeikyo(),e.progressActiveCombo([])},highlightIf:e=>e.checkCombo("SAM_TWO_READY")});Bt("JINPU",4,{applicationDelay:.62,basePotency:[["NEVER",120],["WAY_OF_THE_SAMURAI_III",140]],combo:{potency:[["NEVER",280],["WAY_OF_THE_SAMURAI_III",300]],resource:"SAM_TWO_READY"},onConfirm:e=>{e.checkCombo("SAM_TWO_READY")?(e.gainKenki(5),e.refreshBuff("FUGETSU",.62),e.tryConsumeMeikyo(),e.progressActiveCombo(["GEKKO_READY"])):(e.tryConsumeMeikyo(),e.progressActiveCombo([]))},highlightIf:e=>e.checkCombo("SAM_TWO_READY")});Bt("GEKKO",30,{applicationDelay:.76,basePotency:[["NEVER",100],["WAY_OF_THE_SAMURAI_II",110],["WAY_OF_THE_SAMURAI_III",160]],combo:{potency:[["NEVER",310],["WAY_OF_THE_SAMURAI_II",320],["WAY_OF_THE_SAMURAI_III",370]],resource:"GEKKO_READY"},positional:{potency:[["NEVER",150],["WAY_OF_THE_SAMURAI_II",160],["WAY_OF_THE_SAMURAI_III",210]],comboPotency:[["NEVER",360],["WAY_OF_THE_SAMURAI_II",370],["WAY_OF_THE_SAMURAI_III",420]],location:"rear"},onConfirm:e=>{e.checkCombo("GEKKO_READY")&&(e.gainKenki(10),e.gainSen("GETSU")),e.hasResourceAvailable("MEIKYO_SHISUI")&&e.refreshBuff("FUGETSU",.76),e.tryConsumeMeikyo(),e.progressActiveCombo([])},highlightIf:e=>e.checkCombo("GEKKO_READY")});Bt("SHIFU",18,{applicationDelay:.8,basePotency:[["NEVER",120],["WAY_OF_THE_SAMURAI_III",140]],combo:{potency:[["NEVER",280],["WAY_OF_THE_SAMURAI_III",300]],resource:"SAM_TWO_READY"},onConfirm:e=>{e.checkCombo("SAM_TWO_READY")?(e.gainKenki(5),e.refreshBuff("FUKA",.8),e.tryConsumeMeikyo(),e.progressActiveCombo(["KASHA_READY"])):(e.tryConsumeMeikyo(),e.progressActiveCombo([]))},highlightIf:e=>e.checkCombo("SAM_TWO_READY")});Bt("KASHA",40,{applicationDelay:.62,basePotency:[["NEVER",100],["WAY_OF_THE_SAMURAI_II",110],["WAY_OF_THE_SAMURAI_III",160]],combo:{potency:[["NEVER",310],["WAY_OF_THE_SAMURAI_II",320],["WAY_OF_THE_SAMURAI_III",370]],resource:"KASHA_READY"},positional:{potency:[["NEVER",150],["WAY_OF_THE_SAMURAI_II",160],["WAY_OF_THE_SAMURAI_III",210]],comboPotency:[["NEVER",360],["WAY_OF_THE_SAMURAI_II",370],["WAY_OF_THE_SAMURAI_III",420]],location:"flank"},onConfirm:e=>{e.checkCombo("KASHA_READY")&&(e.gainKenki(10),e.gainSen("KA_SEN")),e.hasResourceAvailable("MEIKYO_SHISUI")&&e.refreshBuff("FUKA",.62),e.tryConsumeMeikyo(),e.progressActiveCombo([])},highlightIf:e=>e.checkCombo("KASHA_READY")});Bt("FUGA",26,{autoUpgrade:{trait:"FUGA_MASTERY",otherSkill:"FUKO"},falloff:0,applicationDelay:.76,basePotency:90,onConfirm:e=>{e.gainKenki(5),e.progressActiveCombo(["SAM_TWO_AOE_READY"])}});Bt("FUKO",86,{autoDowngrade:{trait:"FUGA_MASTERY",otherSkill:"FUGA"},falloff:0,applicationDelay:.76,basePotency:100,onConfirm:e=>{e.gainKenki(10),e.progressActiveCombo(["SAM_TWO_AOE_READY"])}});Bt("MANGETSU",35,{falloff:0,applicationDelay:.62,basePotency:100,combo:{potency:120,resource:"SAM_TWO_AOE_READY"},onConfirm:e=>{e.checkCombo("SAM_TWO_AOE_READY")&&(e.gainKenki(10),e.refreshBuff("FUGETSU",.62),e.gainSen("GETSU")),e.progressActiveCombo([])},highlightIf:e=>e.checkCombo("SAM_TWO_AOE_READY")});Bt("OKA",35,{falloff:0,applicationDelay:.62,basePotency:100,combo:{potency:120,resource:"SAM_TWO_AOE_READY"},onConfirm:e=>{e.checkCombo("SAM_TWO_AOE_READY")&&(e.gainKenki(10),e.refreshBuff("FUKA",.62),e.gainSen("KA_SEN")),e.progressActiveCombo([])},highlightIf:e=>e.checkCombo("SAM_TWO_AOE_READY")});const Br={newSkill:"HIGANBANA",condition:e=>e.countSen()===1},Fr={newSkill:"TENKA_GOKEN",condition:e=>!e.hasResourceAvailable("TENDO")&&e.countSen()===2},zr={newSkill:"TENDO_GOKEN",condition:e=>e.hasResourceAvailable("TENDO")&&e.countSen()===2},jr={newSkill:"MIDARE_SETSUGEKKA",condition:e=>!e.hasResourceAvailable("TENDO")&&e.countSen()===3},Yr={newSkill:"TENDO_SETSUGEKKA",condition:e=>e.hasResourceAvailable("TENDO")&&e.countSen()===3};Bt("IAIJUTSU",30,{replaceIf:[Br,Fr,zr,jr,Yr],baseCastTime:1.3,basePotency:0,applicationDelay:0,validateAttempt:e=>!1});Bt("HIGANBANA",30,{startOnHotbar:!1,replaceIf:[Fr,zr,jr,Yr],baseCastTime:1.3,basePotency:200,applicationDelay:.62,validateAttempt:Br.condition,onConfirm:(e,t)=>{const n=[];e.hasResourceAvailable("FUGETSU")&&n.push(e.getFugetsuModifier());const l=e.hasTraitUnlocked("WAY_OF_THE_SAMURAI_III")?50:45;e.addDoTPotencies({node:t,effectName:"HIGANBANA_DOT",skillName:"HIGANBANA",tickPotency:l,speedStat:"sks",modifiers:n}),e.consumeAllSen(),e.gainMeditation()},onApplication:(e,t)=>e.applyDoT("HIGANBANA_DOT",t)});const _h=e=>t=>{t.consumeAllSen(),t.resources.get("KAESHI_TRACKER").overrideCurrentValue(e),t.enqueueResourceDrop("KAESHI_TRACKER"),t.gainMeditation(),t.resources.get("TSUBAME_GAESHI_READY").gain(1),t.enqueueResourceDrop("TSUBAME_GAESHI_READY"),t.tryConsumeResource("TENDO")};Bt("TENKA_GOKEN",30,{startOnHotbar:!1,replaceIf:[Br,zr,jr,Yr],baseCastTime:1.3,basePotency:300,falloff:0,applicationDelay:.62,validateAttempt:Fr.condition,onConfirm:_h(1)});Bt("TENDO_GOKEN",100,{startOnHotbar:!1,replaceIf:[Br,Fr,jr,Yr],baseCastTime:1.3,basePotency:410,falloff:0,applicationDelay:.36,validateAttempt:zr.condition,onConfirm:_h(2)});Bt("MIDARE_SETSUGEKKA",30,{startOnHotbar:!1,replaceIf:[Br,Fr,zr,Yr],baseCastTime:1.3,basePotency:[["NEVER",620],["WAY_OF_THE_SAMURAI_III",640]],applicationDelay:.62,jobPotencyModifiers:e=>[ue.AutoCrit],validateAttempt:jr.condition,onConfirm:_h(3)});Bt("TENDO_SETSUGEKKA",100,{startOnHotbar:!1,replaceIf:[Br,Fr,zr,jr],baseCastTime:1.3,basePotency:1100,applicationDelay:1.03,jobPotencyModifiers:e=>[ue.AutoCrit],validateAttempt:Yr.condition,onConfirm:_h(4)});const hu={newSkill:"KAESHI_GOKEN",condition:e=>e.resources.get("KAESHI_TRACKER").availableAmount()===1},es={newSkill:"TENDO_KAESHI_GOKEN",condition:e=>e.resources.get("KAESHI_TRACKER").availableAmount()===2},xr={newSkill:"KAESHI_SETSUGEKKA",condition:e=>e.resources.get("KAESHI_TRACKER").availableAmount()===3},Ur={newSkill:"TENDO_KAESHI_SETSUGEKKA",condition:e=>e.resources.get("KAESHI_TRACKER").availableAmount()===4};Bt("TSUBAME_GAESHI",74,{replaceIf:[hu,es,xr,Ur],basePotency:0,applicationDelay:0,validateAttempt:e=>!1});const ph=e=>{e.tryConsumeResource("KAESHI_TRACKER",!0),e.tryConsumeResource("TSUBAME_GAESHI_READY"),e.tryConsumeResource("KAESHI_OGI_READY")};Bt("KAESHI_GOKEN",74,{startOnHotbar:!1,replaceIf:[es,xr,Ur],basePotency:300,falloff:0,applicationDelay:.62,validateAttempt:hu.condition,onConfirm:ph,highlightIf:hu.condition});Bt("TENDO_KAESHI_GOKEN",100,{startOnHotbar:!1,replaceIf:[es,xr,Ur],basePotency:410,falloff:0,applicationDelay:.36,validateAttempt:es.condition,onConfirm:ph,highlightIf:es.condition});Bt("KAESHI_SETSUGEKKA",74,{startOnHotbar:!1,replaceIf:[hu,es,Ur],basePotency:[["NEVER",620],["WAY_OF_THE_SAMURAI_III",640]],applicationDelay:.62,jobPotencyModifiers:e=>[ue.AutoCrit],validateAttempt:xr.condition,onConfirm:ph,highlightIf:xr.condition});Bt("TENDO_KAESHI_SETSUGEKKA",74,{startOnHotbar:!1,replaceIf:[hu,es,xr],basePotency:1100,applicationDelay:1.03,jobPotencyModifiers:e=>[ue.AutoCrit],validateAttempt:Ur.condition,onConfirm:ph,highlightIf:Ur.condition});Bt("OGI_NAMIKIRI",90,{replaceIf:[{newSkill:"KAESHI_NAMIKIRI",condition:e=>e.hasResourceAvailable("KAESHI_OGI_READY")}],falloff:.5,applicationDelay:.49,basePotency:[["NEVER",860],["WAY_OF_THE_SAMURAI_III",1e3]],baseCastTime:1.3,jobPotencyModifiers:e=>[ue.AutoCrit],validateAttempt:e=>e.hasResourceAvailable("OGI_READY"),onConfirm:e=>{e.tryConsumeResource("OGI_READY"),e.gainMeditation(),e.resources.get("KAESHI_OGI_READY").gain(1),e.enqueueResourceDrop("KAESHI_OGI_READY")},highlightIf:e=>e.hasResourceAvailable("OGI_READY")});Bt("KAESHI_NAMIKIRI",90,{startOnHotbar:!1,falloff:.5,applicationDelay:.49,basePotency:[["NEVER",860],["WAY_OF_THE_SAMURAI_III",1e3]],jobPotencyModifiers:e=>[ue.AutoCrit],validateAttempt:e=>e.hasResourceAvailable("KAESHI_OGI_READY"),onConfirm:e=>e.tryConsumeResource("KAESHI_OGI_READY"),highlightIf:e=>e.hasResourceAvailable("KAESHI_OGI_READY")});Wn("MEIKYO_SHISUI",50,"cd_MEIKYO_SHISUI",{cooldown:55,maxCharges:2,onConfirm:e=>{e.resources.get("MEIKYO_SHISUI").gain(3),e.enqueueResourceDrop("MEIKYO_SHISUI"),e.hasTraitUnlocked("ENHANCED_MEIKYO_SHISUI_II")&&(e.resources.get("TENDO").gain(1),e.enqueueResourceDrop("TENDO"))}});Wn("IKISHOTEN",68,"cd_IKISHOTEN",{replaceIf:[{newSkill:"ZANSHIN",condition:e=>e.hasResourceAvailable("ZANSHIN_READY")}],cooldown:120,requiresCombat:!0,onConfirm:e=>{e.gainKenki(50),e.hasTraitUnlocked("ENHANCED_IKISHOTEN")&&(e.resources.get("OGI_READY").gain(1),e.enqueueResourceDrop("OGI_READY")),e.hasTraitUnlocked("ENHANCED_IKISHOTEN_II")&&(e.resources.get("ZANSHIN_READY").gain(1),e.enqueueResourceDrop("ZANSHIN_READY"))}});Wn("HISSATSU_SHINTEN",52,"cd_SHINTEN",{cooldown:1,potency:250,validateAttempt:e=>e.resources.get("KENKI").available(25),onConfirm:e=>e.resources.get("KENKI").consume(25),highlightIf:e=>e.resources.get("KENKI").available(25)});Wn("HISSATSU_KYUTEN",62,"cd_KYUTEN",{cooldown:1,potency:100,falloff:0,validateAttempt:e=>e.resources.get("KENKI").available(25),onConfirm:e=>e.resources.get("KENKI").consume(25),highlightIf:e=>e.resources.get("KENKI").available(25)});Wn("HISSATSU_GYOTEN",54,"cd_GYOTEN",{cooldown:5,animationLock:xa,potency:100,validateAttempt:e=>e.resources.get("KENKI").available(10),onConfirm:e=>e.resources.get("KENKI").consume(10),highlightIf:e=>e.resources.get("KENKI").available(10)});Wn("HISSATSU_YATEN",56,"cd_YATEN",{cooldown:10,animationLock:xa,potency:100,validateAttempt:e=>e.resources.get("KENKI").available(10),onConfirm:e=>{e.resources.get("KENKI").consume(10),e.resources.get("ENHANCED_ENPI").gain(1),e.enqueueResourceDrop("ENHANCED_ENPI")},highlightIf:e=>e.resources.get("KENKI").available(10)});Wn("HISSATSU_SENEI",72,"cd_SENEI_GUREN",{cooldown:60,potency:800,validateAttempt:e=>e.resources.get("KENKI").available(25),onConfirm:e=>e.resources.get("KENKI").consume(25),highlightIf:e=>e.resources.get("KENKI").available(25)});Wn("HISSATSU_GUREN",70,"cd_SENEI_GUREN",{cooldown:60,potency:400,falloff:.25,validateAttempt:e=>e.resources.get("KENKI").available(25),onConfirm:e=>e.resources.get("KENKI").consume(25),highlightIf:e=>e.resources.get("KENKI").available(25)});Wn("HAGAKURE",68,"cd_HAGAKURE",{cooldown:5,validateAttempt:e=>e.countSen()>0,onConfirm:e=>{e.gainKenki(e.countSen()*10),e.consumeAllSen()},highlightIf:e=>e.countSen()===3});Wn("SHOHA",80,"cd_SHOHA",{cooldown:15,potency:[["NEVER",560],["WAY_OF_THE_SAMURAI_III",640]],falloff:.5,applicationDelay:.58,validateAttempt:e=>e.resources.get("MEDITATION").available(3),onConfirm:e=>e.tryConsumeResource("MEDITATION",!0),highlightIf:e=>e.resources.get("MEDITATION").available(3)});je("SAM","THIRD_EYE",6,"cd_THIRD_EYE",{rscType:"THIRD_EYE",autoUpgrade:{trait:"THIRD_EYE_MASTERY",otherSkill:"TENGENTSU"},replaceIf:[{newSkill:"THIRD_EYE_POP",condition:e=>e.hasResourceAvailable("THIRD_EYE")}],cooldown:15,applicationDelay:0});je("SAM","TENGENTSU",82,"cd_THIRD_EYE",{rscType:"TENGENTSU",autoDowngrade:{trait:"THIRD_EYE_MASTERY",otherSkill:"THIRD_EYE"},replaceIf:[{newSkill:"TENGENTSU_POP",condition:e=>e.hasResourceAvailable("TENGENTSU")}],cooldown:15,applicationDelay:0});Wn("THIRD_EYE_POP",6,"cd_THIRD_EYE_POP",{startOnHotbar:!1,applicationDelay:0,animationLock:bn,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("THIRD_EYE"),onConfirm:e=>{e.tryConsumeResource("THIRD_EYE"),e.gainKenki(10)},highlightIf:e=>e.hasResourceAvailable("THIRD_EYE")});Wn("TENGENTSU_POP",82,"cd_THIRD_EYE_POP",{startOnHotbar:!1,applicationDelay:0,animationLock:bn,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("TENGENTSU"),onConfirm:e=>{e.tryConsumeResource("TENGENTSU"),e.resources.get("TENGENTSUS_FORESIGHT").gain(1),e.enqueueResourceDrop("TENGENTSUS_FORESIGHT"),e.gainKenki(10)},highlightIf:e=>e.hasResourceAvailable("TENGENTSU")});Wn("ZANSHIN",96,"cd_ZANSHIN",{startOnHotbar:!1,cooldown:1,falloff:.5,applicationDelay:1.03,potency:940,validateAttempt:e=>e.hasResourceAvailable("ZANSHIN_READY")&&e.resources.get("KENKI").available(50),onConfirm:e=>{e.resources.get("KENKI").consume(50),e.tryConsumeResource("ZANSHIN_READY")},highlightIf:e=>e.hasResourceAvailable("ZANSHIN_READY")});je("SAM","MEDITATE",60,"cd_MEDITATE",{rscType:"MEDITATE",cooldown:60,applicationDelay:.62,validateAttempt:e=>e.cooldowns.get("cd_GCD").stacksAvailable()>0,onConfirm:e=>{const t=e.config.adjustedSksGCD(2.5,e.getFukaModifier());e.cooldowns.get("cd_GCD").useStackWithRecast(e.config.getAfterTaxGCD(t))},onApplication:e=>e.startMeditateTimer()});Object.keys(NR).forEach(e=>Ua(e,`SMN/${Xe[e].name}.png`));class BP extends Wt{jobSpecificSelfTargetedBuffViewProps(){const t=["AETHERFLOW","IFRITS_FAVOR","TITANS_FAVOR","GARUDAS_FAVOR","CRIMSON_STRIKE_READY"];return[...Object.keys(NR).map(n=>t.includes(n)?this.makeCommonTimerless(n):this.makeCommonTimer(n))]}jobSpecificResourceViewProps(t){const n=this.state.resources,l=Math.max(n.timeTillReady("FIRE_ATTUNEMENT"),n.timeTillReady("EARTH_ATTUNEMENT"),n.timeTillReady("WIND_ATTUNEMENT")),s=n.get("ACTIVE_DEMI").availableAmount(),c=n.timeTillReady("ACTIVE_DEMI");n.get("RUBY_ARCANUM").available(1),n.get("TOPAZ_ARCANUM").available(1),n.get("EMERALD_ARCANUM").available(1);const d=s===Qm.BAHAMUT?t.smn.bahamut:s===Qm.PHOENIX?t.smn.phoenix:t.smn.solar,f=n.get("FIRE_ATTUNEMENT").available(1)?t.smn.ruby:n.get("EARTH_ATTUNEMENT").available(1)?t.smn.topaz:t.smn.emerald,E=this.state.cooldowns.get("cd_SUMMON_LOCKOUT"),A=E.timeTillNextStackAvailable();return[{kind:"counter",name:p({en:"aetherflow",zh:"以太超流"}),color:t.smn.aetherflow,currentStacks:n.get("AETHERFLOW").availableAmount(),maxStacks:2},{kind:"bar",name:p({en:"demi summon",zh:"亚灵神剩余时间"}),color:d,progress:c===0?0:1-c/15,valueString:c.toFixed(3)},{kind:"attunement",aetherName:p({en:"aether",zh:"宝石以太"}),attunementName:p({en:"attunement",zh:"宝石以太层数"}),ruby:n.get("RUBY_ARCANUM").available(1),topaz:n.get("TOPAZ_ARCANUM").available(1),emerald:n.get("EMERALD_ARCANUM").available(1),attunementCount:Math.max(n.get("FIRE_ATTUNEMENT").availableAmount(),n.get("EARTH_ATTUNEMENT").availableAmount(),n.get("WIND_ATTUNEMENT").availableAmount()),timeRemaining:l,rubyColor:t.smn.ruby,topazColor:t.smn.topaz,emeraldColor:t.smn.emerald},{kind:"bar",name:p({en:"summon lock",zh:"召唤剩余时间"}),color:f,progress:A>0?1-E.timeTillNextStackAvailable()/E.currentStackCd():0,valueString:A.toFixed(3)}]}}const Zt=(e,t,n)=>{$e("SMN",e,t,n??{})};var Qm=(e=>(e[e.NONE=0]="NONE",e[e.SOLAR=1]="SOLAR",e[e.BAHAMUT=2]="BAHAMUT",e[e.PHOENIX=3]="PHOENIX",e))(Qm||{});const gb=15;Zt("AETHERFLOW",2);Zt("RUBY_ARCANUM",1);Zt("TOPAZ_ARCANUM",1);Zt("EMERALD_ARCANUM",1);Zt("FIRE_ATTUNEMENT",2,{timeout:30});Zt("EARTH_ATTUNEMENT",4,{timeout:30});Zt("WIND_ATTUNEMENT",4,{timeout:30});Zt("CRIMSON_STRIKE_READY",1);Zt("EVERLASTING_FLIGHT",1,{timeout:21});Zt("FURTHER_RUIN",1,{timeout:60});Zt("GARUDAS_FAVOR",1);Zt("IFRITS_FAVOR",1);Zt("TITANS_FAVOR",1);Zt("RADIANT_AEGIS",1,{timeout:30});Zt("REFULGENT_LUX",1,{timeout:30});Zt("REKINDLE",1,{timeout:30});Zt("UNDYING_FLAME",1,{timeout:15});Zt("RUBYS_GLIMMER",1,{timeout:30,warningOnTimeout:Fe.RubysGlimmerDrop});Zt("SEARING_LIGHT",1,{timeout:20});Zt("SLIPSTREAM",1,{timeout:15});Zt("ACTIVE_DEMI",3,{timeout:gb});Zt("NEXT_DEMI_CYCLE",3);Zt("DEMI_AUTO",4);const $I=3.163,FP=new Map([["SUMMON_IFRIT_II",2.1],["SUMMON_GARUDA_II",2.1],["SUMMON_TITAN_II",2.1],["SUMMON_IFRIT",2.46],["SUMMON_GARUDA",2.1],["SUMMON_TITAN",2.46]]),JI=new Map([["SUMMON_IFRIT_II",1.96],["SUMMON_GARUDA_II",1.29],["SUMMON_TITAN_II",1.96],["SUMMON_IFRIT",.936],["SUMMON_GARUDA",.8],["SUMMON_TITAN",.8],["ENKINDLE_BAHAMUT",.894],["ENKINDLE_PHOENIX",1.026],["ENKINDLE_SOLAR_BAHAMUT",.846]]),zP=new Map([["SUMMON_IFRIT_II",6.29],["SUMMON_GARUDA_II",6.29],["SUMMON_TITAN_II",6.29],["SUMMON_IFRIT",4.6],["SUMMON_GARUDA",4.3],["SUMMON_TITAN",4.6]]);class jP extends qt{constructor(t){super(t);const n=this.hasTraitUnlocked("ENHANCED_SWIFTCAST")?40:60;this.cooldowns.set(new Ke("cd_SWIFTCAST",n,1,1));const l=this.hasTraitUnlocked("ENHANCED_RADIANT_AEGIS")?2:1;this.cooldowns.set(new Ke("cd_RADIANT_AEGIS",60,l,l)),this.cooldowns.set(new Ke("cd_DEMI_SUMMON",this.config.adjustedGCD(60),1,1)),this.cooldowns.set(new Ke("cd_SUMMON_LOCKOUT",5,1,1)),this.registerRecurringEvents([{groupedEffects:[{effectName:"SLIPSTREAM",appliedBy:["SLIPSTREAM"],isGroundTargeted:!0}]}],["SUMMON_BAHAMUT","SUMMON_PHOENIX","SUMMON_SOLAR_BAHAMUT"])}get statusPropsGenerator(){return new BP(this)}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("SEARING_LIGHT")&&t.addBuff(P.SearingLight)}get activeDemi(){return this.resources.get("ACTIVE_DEMI").availableAmount()}get nextDemi(){const t=this.resources.get("NEXT_DEMI_CYCLE").availableAmount();return this.hasTraitUnlocked("ENHANCED_SUMMON_BAHAMUT_II")?t===1?2:t===3?3:1:this.hasTraitUnlocked("ENHANCED_SUMMON_BAHAMUT")?t%2===0?2:3:2}get hasActivePet(){return this.activeDemi!==0||this.cooldowns.get("cd_SUMMON_LOCKOUT").stacksAvailable()===0}snapSearingAndTincture(t,n){const l=n.modifiers;this.hasResourceAvailable("SEARING_LIGHT")&&l.push(ue.SearingLight),this.hasResourceAvailable("TINCTURE")&&(l.push(ue.Tincture),t.addBuff(P.Tincture))}makePetPotency(t,n,l,s,c){const d=new Na({config:this.config,sourceTime:l,sourceSkill:n,aspect:ge.Other,basePotency:s,snapshotTime:this.getDisplayTime(),description:"",targetCount:t,falloff:c}),f=[ue.SmnPet];return d.modifiers=f,d}handleDemiAuto(){if(!this.hasResourceAvailable("DEMI_AUTO"))return;const t=4-this.resources.get("DEMI_AUTO").availableAmount();if(t<0)return;const n=this.resources.get("DEMI_AUTO").node;if(n!==void 0){const l=n.getDotPotencies("DEMI_AUTO")[t];this.snapSearingAndTincture(n,l),l.snapshotTime=this.getDisplayTime(),O.resolvePotency(l)}this.tryConsumeResource("DEMI_AUTO"),this.addEvent(new Le("demi auto",$I,()=>this.handleDemiAuto()))}startPetAutos(t,n){const l=this.resources.get("DEMI_AUTO"),s=this.activeDemi===1?160:150;l.gain(4),l.node=t;for(let c=0;c<4;c++)t.addDoTPotency(this.makePetPotency(1,n,this.getDisplayTime(),s),"DEMI_AUTO");this.addEvent(new Le("first demi auto",$I,()=>this.handleDemiAuto()))}queuePetDamageEvent(t,n,l,s,c,d){const f=this.getDisplayTime();this.addEvent(new Le(l+" pet snapshot",c,()=>{const E=this.makePetPotency(t.targetCount,l,f,s,.6);t.addPotency(E),this.snapSearingAndTincture(t,E),this.jobSpecificAddDamageBuffCovers(t,Zo("SMN",n)),this.addEvent(new Le(l+" application",d,()=>O.resolvePotency(E)))}))}queueEnkindle(t,n){let l,s;n==="ENKINDLE_BAHAMUT"?(l="AKH_MORN",s=1300):n==="ENKINDLE_PHOENIX"?(l="REVELATION",s=1300):(l="EXODUS",s=1500);const c=this.resources.get("ACTIVE_DEMI").pendingChange;console.assert(c),c&&c.timeTillEvent<2.5&&O.reportWarning(Fe.LateEnkindle),this.queuePetDamageEvent(t,n,l,s,0,JI.get(n))}queuePrimalSummon(t,n){let l=600;this.hasTraitUnlocked("ARCANE_MASTERY")?l=800:this.hasTraitUnlocked("ENKINDLE_II")&&(l=750);let s;n.includes("IFRIT")?s="INFERNO":n.includes("TITAN")?s="EARTHEN_FURY":s="AERIAL_BLAST",this.queuePetDamageEvent(t,n,s,l,FP.get(n),JI.get(n));const c=zP.get(n);this.cooldowns.get("cd_SUMMON_LOCKOUT").useStackWithRecast(c)}}const Je=(e,t,n)=>{const l=n.baseCastTime??0,s=n.baseRecastTime??2.5,c=l>0?lt(d=>d.tryConsumeResource("SWIFTCAST"),n.onConfirm??ze):n.onConfirm;return Fi("SMN",e,t,{...n,castTime:d=>d.config.adjustedCastTime(l),recastTime:d=>s<=1.5?s:d.config.adjustedGCD(s),potency:n.basePotency,jobPotencyModifiers:d=>{const f=[];return n.isPetAttack&&f.push(ue.SmnPet),d.hasResourceAvailable("SEARING_LIGHT")&&f.push(ue.SearingLight),f},isInstantFn:d=>d.hasResourceAvailable("SWIFTCAST")||l===0,onConfirm:c})},Yi=(e,t,n,l)=>Rt("SMN",e,t,n,{jobPotencyModifiers:s=>s.hasResourceAvailable("SEARING_LIGHT")?[ue.SearingLight]:[],...l});function En(e,t){const n=e.slice();return n.splice(t,1),n}const rs=[{newSkill:"ASTRAL_IMPULSE",condition:e=>e.activeDemi===2},{newSkill:"FOUNTAIN_OF_FIRE",condition:e=>e.activeDemi===3},{newSkill:"UMBRAL_IMPULSE",condition:e=>e.activeDemi===1}];Je("RUIN_III",54,{basePotency:[["NEVER",300],["RUIN_MASTERY_IV",310],["ARCANE_MASTERY",360]],baseCastTime:1.5,manaCost:300,replaceIf:rs,applicationDelay:.8});Je("ASTRAL_IMPULSE",58,{basePotency:[["NEVER",440],["ARCANE_MASTERY",500]],manaCost:300,replaceIf:En(rs,0),applicationDelay:.67,validateAttempt:rs[0].condition,startOnHotbar:!1});Je("FOUNTAIN_OF_FIRE",80,{basePotency:[["NEVER",540],["ARCANE_MASTERY",580]],manaCost:300,replaceIf:En(rs,1),applicationDelay:1.07,validateAttempt:rs[1].condition,startOnHotbar:!1});Je("UMBRAL_IMPULSE",100,{basePotency:620,manaCost:300,replaceIf:En(rs,2),applicationDelay:.8,validateAttempt:rs[2].condition,startOnHotbar:!1});const uo=[{newSkill:"ASTRAL_FLARE",condition:e=>e.activeDemi===2},{newSkill:"BRAND_OF_PURGATORY",condition:e=>e.activeDemi===3},{newSkill:"UMBRAL_FLARE",condition:e=>e.activeDemi===1}];Je("OUTBURST",26,{autoUpgrade:{trait:"OUTBURST_MASTERY",otherSkill:"TRI_DISASTER"},basePotency:100,baseCastTime:1.5,manaCost:300,replaceIf:uo,applicationDelay:.8,falloff:0});Je("TRI_DISASTER",74,{autoDowngrade:{trait:"OUTBURST_MASTERY",otherSkill:"OUTBURST"},basePotency:120,baseCastTime:1.5,manaCost:300,replaceIf:uo,applicationDelay:.8,falloff:0});Je("ASTRAL_FLARE",58,{basePotency:180,manaCost:300,replaceIf:En(uo,0),applicationDelay:.54,validateAttempt:uo[0].condition,falloff:0,startOnHotbar:!1});Je("BRAND_OF_PURGATORY",80,{basePotency:240,manaCost:300,replaceIf:En(uo,1),applicationDelay:.8,validateAttempt:uo[1].condition,falloff:0,startOnHotbar:!1});Je("UMBRAL_FLARE",100,{basePotency:280,manaCost:300,replaceIf:En(uo,2),applicationDelay:.53,validateAttempt:uo[2].condition,falloff:0,startOnHotbar:!1});const YP=[{newSkill:"RUBY_RUIN_III",condition:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT")},{newSkill:"TOPAZ_RUIN_III",condition:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT")},{newSkill:"EMERALD_RUIN_III",condition:e=>e.hasResourceAvailable("WIND_ATTUNEMENT")}];Je("GEMSHINE",6,{replaceIf:YP,applicationDelay:0,validateAttempt:e=>!1});Je("RUBY_RUIN_III",54,{autoUpgrade:{trait:"RUIN_MASTERY_III",otherSkill:"RUBY_RITE"},basePotency:410,baseCastTime:2.8,baseRecastTime:3,applicationDelay:.62,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("FIRE_ATTUNEMENT"),startOnHotbar:!1});Je("TOPAZ_RUIN_III",54,{autoUpgrade:{trait:"RUIN_MASTERY_III",otherSkill:"TOPAZ_RITE"},basePotency:300,applicationDelay:.62,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("EARTH_ATTUNEMENT"),startOnHotbar:!1});Je("EMERALD_RUIN_III",54,{autoUpgrade:{trait:"RUIN_MASTERY_III",otherSkill:"EMERALD_RITE"},baseRecastTime:1.5,basePotency:180,applicationDelay:.62,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("WIND_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("WIND_ATTUNEMENT"),startOnHotbar:!1});Je("RUBY_RITE",72,{autoDowngrade:{trait:"RUIN_MASTERY_III",otherSkill:"RUBY_RITE"},basePotency:[["NEVER",480],["RUIN_MASTERY_IV",510],["ARCANE_MASTERY",540]],baseCastTime:2.8,baseRecastTime:3,applicationDelay:.62,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("FIRE_ATTUNEMENT"),startOnHotbar:!1});Je("TOPAZ_RITE",72,{autoDowngrade:{trait:"RUIN_MASTERY_III",otherSkill:"TOPAZ_RUIN_III"},basePotency:[["NEVER",320],["RUIN_MASTERY_IV",330],["ARCANE_MASTERY",340]],applicationDelay:.62,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT"),onConfirm:e=>{e.tryConsumeResource("EARTH_ATTUNEMENT"),e.gainStatus("TITANS_FAVOR")},startOnHotbar:!1});Je("EMERALD_RITE",72,{autoDowngrade:{trait:"RUIN_MASTERY_III",otherSkill:"EMERALD_RUIN_III"},baseRecastTime:1.5,basePotency:[["NEVER",220],["RUIN_MASTERY_IV",230],["ARCANE_MASTERY",240]],applicationDelay:.62,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("WIND_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("WIND_ATTUNEMENT"),startOnHotbar:!1});const KP=[{newSkill:"RUBY_OUTBURST",condition:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT")},{newSkill:"TOPAZ_OUTBURST",condition:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT")},{newSkill:"EMERALD_OUTBURST",condition:e=>e.hasResourceAvailable("WIND_ATTUNEMENT")}];Je("PRECIOUS_BRILLIANCE",26,{replaceIf:KP,applicationDelay:0,validateAttempt:e=>!1});Je("RUBY_OUTBURST",26,{autoUpgrade:{trait:"OUTBURST_MASTERY",otherSkill:"RUBY_DISASTER"},basePotency:160,baseCastTime:2.8,baseRecastTime:3,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("FIRE_ATTUNEMENT"),falloff:0,startOnHotbar:!1});Je("TOPAZ_OUTBURST",26,{autoUpgrade:{trait:"OUTBURST_MASTERY",otherSkill:"TOPAZ_DISASTER"},basePotency:110,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("EARTH_ATTUNEMENT"),falloff:0,startOnHotbar:!1});Je("EMERALD_OUTBURST",26,{autoUpgrade:{trait:"OUTBURST_MASTERY",otherSkill:"EMERALD_DISASTER"},baseRecastTime:1.5,basePotency:70,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("WIND_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("WIND_ATTUNEMENT"),falloff:0,startOnHotbar:!1});Je("RUBY_DISASTER",74,{autoDowngrade:{trait:"OUTBURST_MASTERY",otherSkill:"RUBY_OUTBURST"},autoUpgrade:{trait:"OUTBURST_MASTERY_II",otherSkill:"RUBY_CATASTROPHE"},basePotency:190,baseCastTime:2.8,baseRecastTime:3,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("FIRE_ATTUNEMENT"),falloff:0,startOnHotbar:!1});Je("TOPAZ_DISASTER",74,{autoDowngrade:{trait:"OUTBURST_MASTERY",otherSkill:"TOPAZ_OUTBURST"},autoUpgrade:{trait:"OUTBURST_MASTERY_II",otherSkill:"TOPAZ_CATASTROPHE"},basePotency:130,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("EARTH_ATTUNEMENT"),falloff:0,startOnHotbar:!1});Je("EMERALD_DISASTER",74,{autoDowngrade:{trait:"OUTBURST_MASTERY",otherSkill:"EMERALD_OUTBURST"},autoUpgrade:{trait:"OUTBURST_MASTERY_II",otherSkill:"EMERALD_CATASTROPHE"},baseRecastTime:1.5,basePotency:90,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("WIND_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("WIND_ATTUNEMENT"),falloff:0,startOnHotbar:!1});Je("RUBY_CATASTROPHE",82,{autoDowngrade:{trait:"OUTBURST_MASTERY_II",otherSkill:"RUBY_DISASTER"},basePotency:210,baseCastTime:2.8,baseRecastTime:3,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("FIRE_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("FIRE_ATTUNEMENT"),falloff:0,startOnHotbar:!1});Je("TOPAZ_CATASTROPHE",82,{autoDowngrade:{trait:"OUTBURST_MASTERY_II",otherSkill:"TOPAZ_DISASTER"},basePotency:140,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("EARTH_ATTUNEMENT"),onConfirm:e=>{e.tryConsumeResource("EARTH_ATTUNEMENT"),e.gainStatus("TITANS_FAVOR")},falloff:0,startOnHotbar:!1});Je("EMERALD_CATASTROPHE",82,{autoDowngrade:{trait:"OUTBURST_MASTERY_II",otherSkill:"EMERALD_DISASTER"},baseRecastTime:1.5,basePotency:100,applicationDelay:.53,highlightIf:e=>!0,validateAttempt:e=>e.hasResourceAvailable("WIND_ATTUNEMENT"),onConfirm:e=>e.tryConsumeResource("WIND_ATTUNEMENT"),falloff:0,startOnHotbar:!1});const VP=[{newSkill:"SUMMON_BAHAMUT",condition:e=>e.nextDemi===2},{newSkill:"SUMMON_PHOENIX",condition:e=>e.nextDemi===3},{newSkill:"SUMMON_SOLAR_BAHAMUT",condition:e=>e.nextDemi===1}],WP={cdName:"cd_DEMI_SUMMON",cooldown:60,maxCharges:1};[{name:"SUMMON_BAHAMUT",autoName:"WYRMWAVE",level:70,activeValue:2},{name:"SUMMON_PHOENIX",autoName:"SCARLET_FLAME",level:80,activeValue:3},{name:"SUMMON_SOLAR_BAHAMUT",autoName:"LUXWAVE",level:100,activeValue:1}].forEach((e,t)=>Je(e.name,e.level,{applicationDelay:.76,replaceIf:En(VP,t),secondaryCooldown:WP,validateAttempt:n=>!n.hasActivePet&&n.nextDemi===e.activeValue,drawsAggro:!0,onConfirm:(n,l)=>{n.gainStatus("ACTIVE_DEMI",e.activeValue),n.startPetAutos(l,e.autoName),["RUBY_ARCANUM","TOPAZ_ARCANUM","EMERALD_ARCANUM"].forEach(s=>n.gainStatus(s,1)),["FIRE_ATTUNEMENT","EARTH_ATTUNEMENT","WIND_ATTUNEMENT"].forEach(s=>n.tryConsumeResource(s,!0)),n.tryConsumeResource("IFRITS_FAVOR"),n.tryConsumeResource("CRIMSON_STRIKE_READY"),n.tryConsumeResource("GARUDAS_FAVOR"),n.tryConsumeResource("TITANS_FAVOR"),e.name==="SUMMON_SOLAR_BAHAMUT"&&n.gainStatus("REFULGENT_LUX"),n.addEvent(new Le("update next demi",gb,()=>{n.resources.get("NEXT_DEMI_CYCLE").gainWrapping(1)}))},onApplication:n=>{n.isInCombat()||n.resources.get("IN_COMBAT").gain(1)},startOnHotbar:t===0}));const Bf=e=>!e.hasActivePet&&e.hasResourceAvailable("RUBY_ARCANUM"),Ff=e=>!e.hasActivePet&&e.hasResourceAvailable("TOPAZ_ARCANUM"),zf=e=>!e.hasActivePet&&e.hasResourceAvailable("EMERALD_ARCANUM"),_b=e=>(t,n)=>{t.tryConsumeResource("RUBY_ARCANUM"),t.gainStatus("FIRE_ATTUNEMENT",2),t.queuePrimalSummon(n,e),t.tryConsumeResource("EARTH_ATTUNEMENT",!0),t.tryConsumeResource("WIND_ATTUNEMENT",!0),t.tryConsumeResource("TITANS_FAVOR"),t.tryConsumeResource("GARUDAS_FAVOR")},pb=e=>(t,n)=>{t.tryConsumeResource("TOPAZ_ARCANUM"),t.gainStatus("EARTH_ATTUNEMENT",4),t.queuePrimalSummon(n,e),t.tryConsumeResource("FIRE_ATTUNEMENT",!0),t.tryConsumeResource("WIND_ATTUNEMENT",!0),t.tryConsumeResource("IFRITS_FAVOR"),t.tryConsumeResource("CRIMSON_STRIKE_READY"),t.tryConsumeResource("GARUDAS_FAVOR")},Ib=e=>(t,n)=>{t.tryConsumeResource("EMERALD_ARCANUM"),t.gainStatus("WIND_ATTUNEMENT",4),t.queuePrimalSummon(n,e),t.tryConsumeResource("FIRE_ATTUNEMENT",!0),t.tryConsumeResource("EARTH_ATTUNEMENT",!0),t.tryConsumeResource("IFRITS_FAVOR"),t.tryConsumeResource("CRIMSON_STRIKE_READY"),t.tryConsumeResource("TITANS_FAVOR")};Je("SUMMON_IFRIT",30,{autoUpgrade:{trait:"ENKINDLE_II",otherSkill:"SUMMON_IFRIT_II"},applicationDelay:0,highlightIf:Bf,validateAttempt:Bf,onConfirm:_b("SUMMON_IFRIT"),falloff:.6});Je("SUMMON_TITAN",35,{autoUpgrade:{trait:"ENKINDLE_II",otherSkill:"SUMMON_TITAN_II"},applicationDelay:0,highlightIf:Ff,validateAttempt:Ff,onConfirm:pb("SUMMON_TITAN"),falloff:.6});Je("SUMMON_GARUDA",45,{autoUpgrade:{trait:"ENKINDLE_II",otherSkill:"SUMMON_GARUDA_II"},applicationDelay:0,highlightIf:zf,validateAttempt:zf,onConfirm:Ib("SUMMON_GARUDA"),falloff:.6});Je("SUMMON_IFRIT_II",90,{autoDowngrade:{trait:"ENKINDLE_II",otherSkill:"SUMMON_IFRIT"},applicationDelay:0,highlightIf:Bf,validateAttempt:Bf,onConfirm:lt(e=>e.gainStatus("IFRITS_FAVOR"),_b("SUMMON_IFRIT_II")),falloff:.6});Je("SUMMON_TITAN_II",90,{autoDowngrade:{trait:"ENKINDLE_II",otherSkill:"SUMMON_TITAN"},applicationDelay:0,highlightIf:Ff,validateAttempt:Ff,onConfirm:pb("SUMMON_TITAN_II"),falloff:.6});Je("SUMMON_GARUDA_II",90,{autoDowngrade:{trait:"ENKINDLE_II",otherSkill:"SUMMON_GARUDA"},applicationDelay:0,highlightIf:zf,validateAttempt:zf,onConfirm:lt(e=>e.gainStatus("GARUDAS_FAVOR"),Ib("SUMMON_GARUDA_II")),falloff:.6});const un=[{newSkill:"DEATHFLARE",condition:e=>e.activeDemi===2},{newSkill:"REKINDLE",condition:e=>e.activeDemi===3},{newSkill:"SUNFLARE",condition:e=>e.activeDemi===1},{newSkill:"CRIMSON_CYCLONE",condition:e=>e.hasResourceAvailable("IFRITS_FAVOR")},{newSkill:"CRIMSON_STRIKE",condition:e=>e.hasResourceAvailable("CRIMSON_STRIKE_READY")},{newSkill:"MOUNTAIN_BUSTER",condition:e=>e.hasResourceAvailable("TITANS_FAVOR")},{newSkill:"SLIPSTREAM",condition:e=>e.hasResourceAvailable("GARUDAS_FAVOR")}];Yi("ASTRAL_FLOW",60,"cd_ASTRAL_FLOW",{applicationDelay:0,cooldown:20,replaceIf:un,validateAttempt:e=>!1});Yi("DEATHFLARE",60,"cd_ASTRAL_FLOW",{potency:500,applicationDelay:.8,cooldown:20,replaceIf:En(un,0),highlightIf:e=>!0,validateAttempt:un[0].condition,falloff:.5,startOnHotbar:!1});Yi("REKINDLE",80,"cd_ASTRAL_FLOW",{applicationDelay:1.03,cooldown:20,replaceIf:En(un,1),highlightIf:e=>!0,validateAttempt:un[1].condition,onConfirm:e=>e.gainStatus("REKINDLE"),startOnHotbar:!1});Yi("SUNFLARE",100,"cd_ASTRAL_FLOW",{potency:800,applicationDelay:.8,cooldown:20,replaceIf:En(un,2),highlightIf:e=>!0,validateAttempt:un[2].condition,falloff:.5,startOnHotbar:!1});Je("CRIMSON_CYCLONE",86,{basePotency:[["NEVER",430],["ARCANE_MASTERY",490]],applicationDelay:.8,replaceIf:En(un,3),highlightIf:e=>!0,validateAttempt:un[3].condition,onConfirm:e=>{e.tryConsumeResource("IFRITS_FAVOR"),e.gainStatus("CRIMSON_STRIKE_READY")},falloff:.65,startOnHotbar:!1});Je("CRIMSON_STRIKE",86,{basePotency:[["NEVER",430],["ARCANE_MASTERY",490]],applicationDelay:.76,replaceIf:En(un,4),highlightIf:e=>!0,validateAttempt:un[4].condition,onConfirm:e=>e.tryConsumeResource("CRIMSON_STRIKE_READY"),falloff:.65,startOnHotbar:!1});Yi("MOUNTAIN_BUSTER",86,"cd_MOUNTAIN_BUSTER",{potency:[["NEVER",150],["ARCANE_MASTERY",160]],cooldown:1,applicationDelay:.76,replaceIf:En(un,5),highlightIf:e=>!0,validateAttempt:un[5].condition,onConfirm:e=>e.tryConsumeResource("TITANS_FAVOR"),falloff:.7,startOnHotbar:!1});Je("SLIPSTREAM",86,{baseCastTime:3,baseRecastTime:3.5,basePotency:[["NEVER",430],["ARCANE_MASTERY",490]],applicationDelay:1.02,replaceIf:En(un,6),highlightIf:e=>!0,validateAttempt:un[6].condition,onConfirm:(e,t)=>{e.tryConsumeResource("GARUDAS_FAVOR"),e.addDoTPotencies({node:t,effectName:"SLIPSTREAM",skillName:"SLIPSTREAM",tickPotency:30,speedStat:"sps"})},onApplication:(e,t)=>e.applyDoT("SLIPSTREAM",t),falloff:.65,startOnHotbar:!1});const qP=[{newSkill:"ENKINDLE_BAHAMUT",condition:e=>[0,2].includes(e.activeDemi)},{newSkill:"ENKINDLE_PHOENIX",condition:e=>e.activeDemi===3},{newSkill:"ENKINDLE_SOLAR_BAHAMUT",condition:e=>e.activeDemi===1}];[{name:"ENKINDLE_BAHAMUT",level:70,activeValue:2,falloff:.5},{name:"ENKINDLE_PHOENIX",level:80,activeValue:3,falloff:.5},{name:"ENKINDLE_SOLAR_BAHAMUT",level:100,activeValue:1,falloff:.5}].forEach((e,t)=>Yi(e.name,e.level,"cd_ENKINDLE",{applicationDelay:0,cooldown:20,replaceIf:En(qP,t),validateAttempt:n=>n.activeDemi===e.activeValue,onConfirm:(n,l)=>n.queueEnkindle(l,e.name),startOnHotbar:t===0,falloff:e.falloff}));Je("RUIN_IV",62,{basePotency:[["NEVER",430],["ARCANE_MASTERY",490]],manaCost:400,applicationDelay:.8,falloff:.6,highlightIf:e=>e.hasResourceAvailable("FURTHER_RUIN"),validateAttempt:e=>e.hasResourceAvailable("FURTHER_RUIN"),onConfirm:e=>e.tryConsumeResource("FURTHER_RUIN")});[{name:"ENERGY_DRAIN",level:10,potency:200,applicationDelay:1.07},{name:"ENERGY_SIPHON",level:52,potency:100,applicationDelay:1.02,falloff:0}].forEach(e=>Yi(e.name,e.level,"cd_ENERGY_DRAIN",{...e,cooldown:60,onConfirm:t=>{t.resources.get("AETHERFLOW").available(1)&&O.reportWarning(Fe.AetherflowOvercap),t.gainStatus("AETHERFLOW",2),t.gainStatus("FURTHER_RUIN")}}));[{name:"FESTER",level:10,potency:340,applicationDelay:.71,autoUpgrade:{trait:"ENHANCED_FESTER",otherSkill:"NECROTIZE"}},{name:"PAINFLARE",level:40,potency:150,applicationDelay:.44,falloff:0},{name:"NECROTIZE",level:92,potency:460,applicationDelay:.71,autoDowngrade:{trait:"ENHANCED_FESTER",otherSkill:"FESTER"}}].forEach(e=>Yi(e.name,e.level,"cd_AETHERFLOW",{...e,cooldown:1,validateAttempt:t=>t.hasResourceAvailable("AETHERFLOW"),onConfirm:t=>t.tryConsumeResource("AETHERFLOW")}));je("SMN","SEARING_LIGHT",66,"cd_SEARING_LIGHT",{rscType:"SEARING_LIGHT",applicationDelay:0,cooldown:120,onConfirm:e=>{e.hasTraitUnlocked("ENHANCED_SEARING_LIGHT")&&e.gainStatus("RUBYS_GLIMMER")},replaceIf:[{newSkill:"SEARING_FLASH",condition:e=>e.hasResourceAvailable("RUBYS_GLIMMER")}]});Yi("SEARING_FLASH",96,"cd_SEARING_FLASH",{potency:600,applicationDelay:.8,cooldown:1,falloff:0,startOnHotbar:!1,highlightIf:e=>e.hasResourceAvailable("RUBYS_GLIMMER"),validateAttempt:e=>e.hasResourceAvailable("RUBYS_GLIMMER"),onConfirm:e=>e.tryConsumeResource("RUBYS_GLIMMER")});je("SMN","RADIANT_AEGIS",2,"cd_RADIANT_AEGIS",{rscType:"RADIANT_AEGIS",applicationDelay:.45,cooldown:60,maxCharges:2,validateAttempt:e=>!e.hasActivePet});Yi("LUX_SOLARIS",100,"cd_LUX_SOLARIS",{applicationDelay:.62,cooldown:60,highlightIf:e=>e.hasResourceAvailable("REFULGENT_LUX"),validateAttempt:e=>e.hasResourceAvailable("REFULGENT_LUX"),onConfirm:e=>e.tryConsumeResource("REFULGENT_LUX")});Je("RESURRECTION",12,{baseCastTime:8,manaCost:2400,applicationDelay:1.11,basePotency:0});Object.keys(MN).forEach(e=>Ua(e,`SGE/${Xe[e].name}.png`));const XP=["EUKRASIAN_DOSIS","EUKRASIAN_DOSIS_II","EUKRASIAN_DOSIS_III","EUKRASIAN_DYSKRASIA"],ZP=["EUKRASIAN_DIAGNOSIS","KRASIS","TAUROCHOLE","HAIMA","HAIMATINON","KARDION"],QP=["EUKRASIA","SOTERIA","ZOE","PHILOSOPHIA","KARDIA"],$P=["EUKRASIAN_PROGNOSIS","PANHAIMA","PANHAIMATINON","KERACHOLE","KERAKEIA","EUDAIMONIA","HOLOS","HOLOSAKOS"];class JP extends Wt{jobSpecificOtherTargetedBuffViewProps(){return[...XP,...ZP].map(t=>t==="KARDION"?this.makeCommonTimerless(t,!1):this.makeCommonTimer(t,!1))}jobSpecificSelfTargetedBuffViewProps(){return[...$P,...QP].map(t=>t==="KARDIA"||t==="EUKRASIA"?this.makeCommonTimerless(t):this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){const n=this.state.resources.get("ADDERSGALL"),l=Ut("SGE","ADDERSGALL").maxTimeout,s=n.availableAmount()<n.maxValue?this.state.resources.timeTillReady("ADDERSGALL"):l,c=this.state.resources.get("ADDERSTING");return[{kind:"counter",name:p({en:Xe.ADDERSGALL.name,zh:Xe.ADDERSGALL.label.zh}),color:t.sge.addersgall,currentStacks:n.availableAmount(),maxStacks:n.maxValue},{kind:"bar",name:p({en:Xe.ADDERSGALL.name+" timer",zh:Xe.ADDERSGALL.label.zh+"计时器"}),color:t.sge.addersgall,progress:1-s/l,valueString:s.toFixed(3)},{kind:"counter",name:p({en:Xe.ADDERSTING.name,zh:Xe.ADDERSTING.label.zh}),color:t.sge.addersting,currentStacks:c.availableAmount(),maxStacks:c.maxValue}]}}const Dt=(e,t,n)=>{$e("SGE",e,t,n??{})};Dt("ADDERSGALL",3,{default:3,timeout:20});Dt("ADDERSTING",3,{default:3});Dt("EUKRASIA",1);Dt("KARDIA",1,{default:1});Dt("KARDION",1,{default:1});Dt("EUKRASIAN_DIAGNOSIS",1,{timeout:30});Dt("DIFFERENTIAL_DIAGNOSIS",1,{timeout:30});Dt("EUKRASIAN_PROGNOSIS",1,{timeout:30});Dt("HAIMA",1,{timeout:15});Dt("HAIMATINON",5,{timeout:15});Dt("PANHAIMA",1,{timeout:15});Dt("PANHAIMATINON",5,{timeout:15});Dt("PHYSIS_II",1,{timeout:15});Dt("AUTOPHYSIS",1,{timeout:15});Dt("PHILOSOPHIA",1,{timeout:20});Dt("EUDAIMONIA",1,{timeout:20});Dt("HOLOS",1,{timeout:20});Dt("HOLOSAKOS",1,{timeout:30});Dt("SOTERIA",4,{timeout:15});Dt("ZOE",1,{timeout:30});Dt("KRASIS",1,{timeout:10});Dt("KERACHOLE",1,{timeout:15});Dt("KERAKEIA",1,{timeout:15});Dt("TAUROCHOLE",1,{timeout:15});Dt("EUKRASIAN_DOSIS",1,{timeout:30});Dt("EUKRASIAN_DOSIS_II",1,{timeout:30});Dt("EUKRASIAN_DOSIS_III",1,{timeout:30});Dt("EUKRASIAN_DYSKRASIA",1,{timeout:30});class eG extends qt{constructor(t){if(super(t),this.hasTraitUnlocked("ENHANCED_SWIFTCAST")||this.cooldowns.set(new Ke("cd_SWIFTCAST",60,1,1)),!this.hasTraitUnlocked("ENHANCED_PHYSIS_II")){const n=El(this.job).get("AUTOPHYSIS");n.maxTimeout=10,El(this.job).set("AUTOPHYSIS",n)}this.hasTraitUnlocked("ENHANCED_SOTERIA")||this.cooldowns.set(new Ke("cd_SOTERIA",90,1,1)),this.hasTraitUnlocked("ENHANCED_ZOE")||this.cooldowns.set(new Ke("cd_ZOE",120,1,1)),this.registerRecurringEvents([{reportName:p({en:"Eukrasian DoT"}),groupedEffects:[{effectName:"EUKRASIAN_DOSIS",appliedBy:["EUKRASIAN_DOSIS"]},{effectName:"EUKRASIAN_DOSIS_II",appliedBy:["EUKRASIAN_DOSIS_II"]},{effectName:"EUKRASIAN_DOSIS_III",appliedBy:["EUKRASIAN_DOSIS_III"]},{effectName:"EUKRASIAN_DYSKRASIA",appliedBy:["EUKRASIAN_DYSKRASIA"]}]},{isHealing:!0,groupedEffects:[{effectName:"PHYSIS_II",appliedBy:["PHYSIS_II"]}]},{isHealing:!0,groupedEffects:[{effectName:"KERAKEIA",appliedBy:["KERACHOLE"]}]}])}get statusPropsGenerator(){return new JP(this)}jobSpecificRegisterRecurringEvents(){let t=n=>{const l=Ut("SGE","ADDERSGALL");this.hasResourceAvailable("ADDERSGALL",l.maxValue)||this.resources.get("ADDERSGALL").gain(1),this.resources.addResourceEvent({rscType:"ADDERSGALL",name:"gain addersgall if not currently capped",delay:l.maxTimeout,fnOnRsc:t})};t(this.resources.get("ADDERSGALL"))}jobSpecificAddHealingBuffCovers(t,n){this.hasResourceAvailable("AUTOPHYSIS")&&t.addBuff(P.Autophysis),this.hasResourceAvailable("KRASIS")&&t.addBuff(P.Krasis),n.cdName==="cd_GCD"&&(this.hasResourceAvailable("ZOE")&&t.addBuff(P.Zoe),this.hasResourceAvailable("PHILOSOPHIA")&&t.addBuff(P.Philosophia))}consumeAddersgall(){const t=Ut("SGE","ADDERSGALL");this.hasResourceAvailable("ADDERSGALL",t.maxValue)&&this.resources.get("ADDERSGALL").overrideTimer(this,t.maxTimeout),this.tryConsumeResource("ADDERSGALL"),this.resources.get("MANA").gain(700)}addPepsisPotency(t,n){const l=new Na({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:"PEPSIS",aspect:ge.Other,basePotency:t==="EUKRASIAN_DIAGNOSIS"?450:350,description:Wa(t),targetCount:t==="EUKRASIAN_DIAGNOSIS"?1:this.partySize,snapshotTime:this.getDisplayTime()});if(this.hasResourceAvailable("TINCTURE")&&l.modifiers.push(ue.Tincture),this.hasResourceAvailable("AUTOPHYSIS")&&l.modifiers.push(ue.Autophysis),this.hasResourceAvailable("KRASIS")){if(t==="EUKRASIAN_PROGNOSIS"){const s=new Na({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:"PEPSIS",aspect:ge.Other,basePotency:l.base,description:Wa(t),targetCount:l.targetCount-1,snapshotTime:this.getDisplayTime()});n.addHoTPotency(s,"PEPSIS"),l.targetCount=1,l.description+=", "+Wa("KRASIS")}l.modifiers.push(ue.Krasis)}n.addHoTPotency(l,"PEPSIS")}addHaimaExpirationPotency(t,n){if(!(t==="HAIMA"||t==="PANHAIMA"))return;const l=new Na({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:t==="HAIMA"?"HAIMA":"PANHAIMA",aspect:ge.Other,basePotency:t==="HAIMA"?150:100,description:"",targetCount:t==="HAIMA"?1:this.partySize,snapshotTime:this.getDisplayTime()});if(this.hasResourceAvailable("TINCTURE")&&l.modifiers.push(ue.Tincture),this.hasResourceAvailable("AUTOPHYSIS")&&l.modifiers.push(ue.Autophysis),this.hasResourceAvailable("KRASIS")){if(t==="PANHAIMA"){const s=new Na({config:this.config,sourceTime:this.getDisplayTime(),sourceSkill:"PANHAIMA",aspect:ge.Other,basePotency:100,description:"",targetCount:this.partySize-1,snapshotTime:this.getDisplayTime()});n.addHoTPotency(s,t),l.targetCount=1}l.modifiers.push(ue.Krasis)}n.addHoTPotency(l,t)}handleHaimaExpiration(t,n){if(!(t==="HAIMA"||t==="PANHAIMA"))return;const l=t==="HAIMA"?"HAIMATINON":"PANHAIMATINON",s=this.resources.get(l).availableAmount();s<=0||this.addEvent(new Le(`${Xe[t].name} expiration heal`,.001,()=>{n.getHotPotencies(t).forEach(c=>{c.description=Wa(t)+" "+p({en:"expiration"})+" ("+s+" "+p({en:"stacks"})+")",t==="PANHAIMA"&&c.modifiers.includes(ue.Krasis)&&(c.description+=", "+Wa("KRASIS")),c.base*=s,O.resolveHealingPotency(c)})}))}addHealingMagicPotencyModifiers(t){this.hasResourceAvailable("ZOE")&&t.push(ue.Zoe),this.hasResourceAvailable("PHILOSOPHIA")&&t.push(ue.Philosophia)}addHealingActionPotencyModifiers(t){this.hasResourceAvailable("AUTOPHYSIS")&&t.push(ue.Autophysis),this.hasResourceAvailable("KRASIS")&&t.push(ue.Krasis)}}const sa=(e,t,n)=>{const l=f=>f.config.adjustedCastTime(1.5),s=f=>f.config.adjustedGCD(2.5),c=f=>{if(!n.healingPotency)return[];const E=[];return f.addHealingMagicPotencyModifiers(E),f.addHealingActionPotencyModifiers(E),E},d=lt(f=>{n.castTime!==0&&f.tryConsumeResource("SWIFTCAST")},(f,E)=>{if(!(f.hasResourceAvailable("KARDIA")&&E.getInitialPotency()))return;const A=new Na({config:f.config,sourceTime:f.getDisplayTime(),sourceSkill:e,aspect:ge.Other,basePotency:f.hasTraitUnlocked("ENHANCED_HEALING_MAGIC")?170:130,description:Wa("KARDIA"),targetCount:1,snapshotTime:f.getDisplayTime()});f.hasResourceAvailable("TINCTURE")&&A.modifiers.push(ue.Tincture),f.hasResourceAvailable("SOTERIA")&&A.modifiers.push(ue.Soteria),f.addHealingActionPotencyModifiers(A.modifiers),E.addHoTPotency(A,"KARDION")},(f,E)=>{if(!f.hasResourceAvailable("EUDAIMONIA"))return;const A=new Na({config:f.config,sourceTime:f.getDisplayTime(),sourceSkill:e,aspect:ge.Other,basePotency:150,description:Wa("EUDAIMONIA"),targetCount:f.partySize,snapshotTime:f.getDisplayTime()});f.hasResourceAvailable("TINCTURE")&&A.modifiers.push(ue.Tincture),f.addHealingActionPotencyModifiers(A.modifiers),E.addHoTPotency(A,"EUDAIMONIA")},f=>{n.healingPotency&&f.tryConsumeResource("ZOE")},n.onConfirm??ze);return Fi("SGE",e,t,{...n,castTime:n.castTime??l,recastTime:n.recastTime??s,isInstantFn:f=>f.hasResourceAvailable("SWIFTCAST"),jobHealingPotencyModifiers:c,onConfirm:d,onApplication:lt((f,E)=>{const A=E.getHotPotencies("KARDION"),R=E.getHotPotencies("EUDAIMONIA");A.length>0&&(O.resolveHealingPotency(A[0]),f.tryConsumeResource("SOTERIA")),R.forEach(T=>{O.resolveHealingPotency(T)})},n.onApplication??ze)})},Ca=(e,t,n,l)=>Rt("SGE",e,t,n,{...l,jobHealingPotencyModifiers:c=>{if(!l.healingPotency)return[];const d=[];return c.addHealingActionPotencyModifiers(d),d}}),AT=(e,t,n,l)=>je("SGE",e,t,n,l);sa("EUKRASIA",30,{castTime:0,recastTime:1,applicationDelay:0,validateAttempt:e=>!e.hasResourceAvailable("EUKRASIA"),onConfirm:e=>e.gainStatus("EUKRASIA")});sa("DOSIS",1,{replaceIf:[{condition:e=>e.hasResourceAvailable("EUKRASIA"),newSkill:"EUKRASIAN_DOSIS"}],autoUpgrade:{trait:"OFFENSIVE_MAGIC_MASTERY",otherSkill:"DOSIS_II"},manaCost:300,potency:300,applicationDelay:.67});sa("DOSIS_II",72,{startOnHotbar:!1,replaceIf:[{condition:e=>e.hasResourceAvailable("EUKRASIA"),newSkill:"EUKRASIAN_DOSIS_II"}],autoUpgrade:{trait:"OFFENSIVE_MAGIC_MASTERY_II",otherSkill:"DOSIS_III"},manaCost:400,potency:320,applicationDelay:.67});sa("DOSIS_III",82,{startOnHotbar:!1,replaceIf:[{condition:e=>e.hasResourceAvailable("EUKRASIA"),newSkill:"EUKRASIAN_DOSIS_III"}],manaCost:400,potency:[["NEVER",330],["MAGICK_MASTERY_HEALER",370]],applicationDelay:.67});sa("EUKRASIAN_DOSIS",30,{startOnHotbar:!1,manaCost:400,castTime:0,recastTime:1.5,applicationDelay:.76,drawsAggro:!0,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"EUKRASIAN_DOSIS",skillName:"EUKRASIAN_DOSIS",tickPotency:40,speedStat:"sps"}),e.tryConsumeResource("EUKRASIA")},onApplication:(e,t)=>{e.applyDoT("EUKRASIAN_DOSIS",t)}});sa("EUKRASIAN_DOSIS_II",72,{startOnHotbar:!1,manaCost:400,castTime:0,recastTime:1.5,applicationDelay:.76,drawsAggro:!0,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"EUKRASIAN_DOSIS_II",skillName:"EUKRASIAN_DOSIS_II",tickPotency:60,speedStat:"sps"}),e.tryConsumeResource("EUKRASIA")},onApplication:(e,t)=>{e.applyDoT("EUKRASIAN_DOSIS_II",t)}});sa("EUKRASIAN_DOSIS_III",82,{startOnHotbar:!1,manaCost:400,castTime:0,recastTime:1.5,applicationDelay:.76,drawsAggro:!0,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"EUKRASIAN_DOSIS_III",skillName:"EUKRASIAN_DOSIS_III",tickPotency:80,speedStat:"sps"}),e.tryConsumeResource("EUKRASIA")},onApplication:(e,t)=>{e.applyDoT("EUKRASIAN_DOSIS_III",t)}});sa("TOXIKON",66,{autoUpgrade:{trait:"OFFENSIVE_MAGIC_MASTERY_II",otherSkill:"TOXIKON_II"},potency:[["NEVER",240],["OFFENSIVE_MAGIC_MASTERY",300]],falloff:.5,applicationDelay:1.2,castTime:0,validateAttempt:e=>e.hasResourceAvailable("ADDERSTING"),onConfirm:e=>e.tryConsumeResource("ADDERSTING")});sa("TOXIKON_II",82,{startOnHotbar:!1,potency:[["NEVER",330],["MAGICK_MASTERY_HEALER",370]],falloff:.5,applicationDelay:1.2,castTime:0,validateAttempt:e=>e.hasResourceAvailable("ADDERSTING"),onConfirm:e=>e.tryConsumeResource("ADDERSTING")});sa("PHLEGMA",26,{autoUpgrade:{trait:"OFFENSIVE_MAGIC_MASTERY",otherSkill:"PHLEGMA_II"},potency:400,falloff:.5,applicationDelay:.67,manaCost:400,castTime:0,secondaryCooldown:{cdName:"cd_PHLEGMA",maxCharges:2,cooldown:40}});sa("PHLEGMA_II",72,{startOnHotbar:!1,autoUpgrade:{trait:"OFFENSIVE_MAGIC_MASTERY_II",otherSkill:"PHLEGMA_III"},potency:490,falloff:.5,applicationDelay:.67,manaCost:400,castTime:0,secondaryCooldown:{cdName:"cd_PHLEGMA",maxCharges:2,cooldown:40}});sa("PHLEGMA_III",82,{startOnHotbar:!1,potency:600,falloff:.5,applicationDelay:.67,manaCost:400,castTime:0,secondaryCooldown:{cdName:"cd_PHLEGMA",maxCharges:2,cooldown:40}});Ca("PSYCHE",92,"cd_PSYCHE",{potency:600,falloff:.5,applicationDelay:2.1,cooldown:60});sa("DYSKRASIA",46,{autoUpgrade:{trait:"OFFENSIVE_MAGIC_MASTERY_II",otherSkill:"DYSKRASIA_II"},potency:160,falloff:0,applicationDelay:.76,manaCost:400,castTime:0});sa("DYSKRASIA_II",82,{startOnHotbar:!1,replaceIf:[{condition:e=>e.hasResourceAvailable("EUKRASIA"),newSkill:"EUKRASIAN_DYSKRASIA"}],potency:170,falloff:0,applicationDelay:.76,manaCost:400,castTime:0});sa("EUKRASIAN_DYSKRASIA",82,{startOnHotbar:!1,falloff:0,applicationDelay:1.03,castTime:0,recastTime:1.5,drawsAggro:!0,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"EUKRASIAN_DYSKRASIA",skillName:"EUKRASIAN_DYSKRASIA",tickPotency:40,speedStat:"sps"}),e.tryConsumeResource("EUKRASIA")},onApplication:(e,t)=>{e.applyDoT("EUKRASIAN_DYSKRASIA",t)}});sa("DIAGNOSIS",2,{healingPotency:[["NEVER",400],["ENHANCED_HEALING_MAGIC",450]],applicationDelay:.58,replaceIf:[{condition:e=>e.hasResourceAvailable("EUKRASIA"),newSkill:"EUKRASIAN_DIAGNOSIS"}],manaCost:400});sa("EUKRASIAN_DIAGNOSIS",30,{startOnHotbar:!1,healingPotency:300,applicationDelay:.67,castTime:0,recastTime:1.5,manaCost:800,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:e=>e.tryConsumeResource("EUKRASIA"),onApplication:e=>e.gainStatus("EUKRASIAN_DIAGNOSIS")});Ca("EUKRASIAN_DIAGNOSIS_POP",30,"cd_DIAGNOSIS_POP",{animationLock:bn,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("EUKRASIAN_DIAGNOSIS"),onConfirm:e=>{e.tryConsumeResource("EUKRASIAN_DIAGNOSIS"),e.resources.get("ADDERSTING").gain(1)},highlightIf:e=>e.hasResourceAvailable("EUKRASIAN_DIAGNOSIS")});sa("PROGNOSIS",10,{healingPotency:300,aoeHeal:!0,applicationDelay:.58,replaceIf:[{condition:e=>e.hasResourceAvailable("EUKRASIA")&&e.hasTraitUnlocked("EUKRASIAN_PROGNOSIS_MASTERY"),newSkill:"EUKRASIAN_PROGNOSIS_II"},{condition:e=>e.hasResourceAvailable("EUKRASIA")&&!e.hasTraitUnlocked("EUKRASIAN_PROGNOSIS_MASTERY"),newSkill:"EUKRASIAN_PROGNOSIS"}],manaCost:700,castTime:e=>e.config.adjustedCastTime(2)});sa("EUKRASIAN_PROGNOSIS",30,{startOnHotbar:!1,autoUpgrade:{trait:"EUKRASIAN_PROGNOSIS_MASTERY",otherSkill:"EUKRASIAN_PROGNOSIS_II"},healingPotency:100,aoeHeal:!0,applicationDelay:.94,castTime:0,recastTime:1.5,manaCost:800,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:e=>e.tryConsumeResource("EUKRASIA"),onApplication:e=>e.gainStatus("EUKRASIAN_PROGNOSIS")});sa("EUKRASIAN_PROGNOSIS_II",96,{startOnHotbar:!1,healingPotency:100,aoeHeal:!0,applicationDelay:.94,castTime:0,recastTime:1.5,manaCost:800,validateAttempt:e=>e.hasResourceAvailable("EUKRASIA"),highlightIf:e=>e.hasResourceAvailable("EUKRASIA"),onConfirm:e=>e.tryConsumeResource("EUKRASIA"),onApplication:e=>e.gainStatus("EUKRASIAN_PROGNOSIS")});Ca("EUKRASIAN_PROGNOSIS_POP",30,"cd_PROGNOSIS_POP",{autoUpgrade:{trait:"EUKRASIAN_PROGNOSIS_MASTERY",otherSkill:"EUKRASIAN_PROGNOSIS_II_POP"},animationLock:bn,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("EUKRASIAN_PROGNOSIS"),onConfirm:e=>{e.tryConsumeResource("EUKRASIAN_PROGNOSIS"),e.resources.get("ADDERSTING").gain(1)},highlightIf:e=>e.hasResourceAvailable("EUKRASIAN_PROGNOSIS")});Ca("EUKRASIAN_PROGNOSIS_II_POP",30,"cd_PROGNOSIS_POP",{startOnHotbar:!1,animationLock:bn,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("EUKRASIAN_PROGNOSIS"),onConfirm:e=>{e.tryConsumeResource("EUKRASIAN_PROGNOSIS"),e.resources.get("ADDERSTING").gain(1)},highlightIf:e=>e.hasResourceAvailable("EUKRASIAN_PROGNOSIS")});sa("PNEUMA",90,{potency:[["NEVER",330],["MAGICK_MASTERY_HEALER",370]],falloff:.4,healingPotency:600,aoeHeal:!0,applicationDelay:.58,manaCost:700,secondaryCooldown:{cdName:"cd_PNEUMA",maxCharges:1,cooldown:120}});AT("ZOE",56,"cd_ZOE",{rscType:"ZOE",applicationDelay:0,cooldown:90});Ca("PEPSIS",58,"cd_PEPSIS",{cooldown:30,applicationDelay:1.16,onConfirm:(e,t)=>{e.hasResourceAvailable("EUKRASIAN_DIAGNOSIS")&&(e.addPepsisPotency("EUKRASIAN_DIAGNOSIS",t),e.tryConsumeResource("EUKRASIAN_DIAGNOSIS")),e.hasResourceAvailable("EUKRASIAN_PROGNOSIS")&&(e.addPepsisPotency("EUKRASIAN_PROGNOSIS",t),e.tryConsumeResource("EUKRASIAN_PROGNOSIS"))},onApplication:(e,t)=>{t.getHotPotencies("PEPSIS").forEach(n=>{O.resolveHealingPotency(n)})}});AT("SOTERIA",35,"cd_SOTERIA",{rscType:"SOTERIA",applicationDelay:.8,cooldown:60});AT("KRASIS",86,"cd_KRASIS",{rscType:"KRASIS",applicationDelay:.76,cooldown:60});Ca("HAIMA",70,"cd_HAIMA",{replaceIf:[{condition:e=>e.hasResourceAvailable("HAIMA"),newSkill:"HAIMA_POP"}],applicationDelay:.76,cooldown:120,onConfirm:(e,t)=>e.addHaimaExpirationPotency("HAIMA",t),onApplication:(e,t)=>{const n=Ut("SGE","HAIMATINON").maxValue;e.gainStatus("HAIMA"),e.gainStatus("HAIMATINON",n),e.addEvent(new Le("Haima Expiration heal Check",Ut("SGE","HAIMA").maxTimeout-.001,()=>e.handleHaimaExpiration("HAIMA",t)))}});Ca("HAIMA_POP",70,"cd_HAIMA_POP",{startOnHotbar:!1,animationLock:bn,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("HAIMA"),highlightIf:e=>e.hasResourceAvailable("HAIMA"),onConfirm:e=>{e.hasResourceAvailable("HAIMATINON")?e.tryConsumeResource("HAIMATINON"):e.tryConsumeResource("HAIMA")}});Ca("PHYSIS_II",60,"cd_PHYSIS",{aoeHeal:!0,applicationDelay:.85,cooldown:60,onConfirm:(e,t)=>{e.addHoTPotencies({node:t,skillName:"PHYSIS_II",effectName:"PHYSIS_II",speedStat:"sps",tickPotency:130})},onApplication:(e,t)=>{e.applyHoT("PHYSIS_II",t),e.gainStatus("AUTOPHYSIS")}});Ca("PHILOSOPHIA",100,"cd_PHILOSOPHIA",{applicationDelay:1.83,cooldown:180,onApplication:e=>{e.gainStatus("PHILOSOPHIA"),e.gainStatus("EUDAIMONIA")}});Ca("HOLOS",76,"cd_HOLOS",{applicationDelay:.62,cooldown:120,onApplication:e=>{e.gainStatus("HOLOS"),e.gainStatus("HOLOSAKOS")}});Ca("PANHAIMA",80,"cd_PANHAIMA",{replaceIf:[{condition:e=>e.hasResourceAvailable("PANHAIMA"),newSkill:"PANHAIMA_POP"}],applicationDelay:.62,cooldown:120,onConfirm:(e,t)=>e.addHaimaExpirationPotency("PANHAIMA",t),onApplication:(e,t)=>{const n=Ut("SGE","PANHAIMATINON").maxValue;e.gainStatus("PANHAIMA"),e.gainStatus("PANHAIMATINON",n),e.addEvent(new Le("Panhaima Expiration heal Check",Ut("SGE","PANHAIMA").maxTimeout-.001,()=>e.handleHaimaExpiration("PANHAIMA",t)))}});Ca("PANHAIMA_POP",80,"cd_PANHAIMA_POP",{startOnHotbar:!1,animationLock:bn,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("PANHAIMA"),highlightIf:e=>e.hasResourceAvailable("PANHAIMA"),onConfirm:e=>{e.hasResourceAvailable("PANHAIMATINON")?e.tryConsumeResource("PANHAIMATINON"):e.tryConsumeResource("PANHAIMA")}});Ca("RHIZOMATA",74,"cd_RHIZOMATA",{cooldown:90,onConfirm:e=>e.resources.get("ADDERSGALL").gain(1)});Ca("DRUOCHOLE",45,"cd_DRUOCHOLE",{cooldown:1,healingPotency:600,applicationDelay:.78,validateAttempt:e=>e.hasResourceAvailable("ADDERSGALL"),onConfirm:e=>e.consumeAddersgall()});Ca("IXOCHOLE",52,"cd_IXOCHOLE",{cooldown:30,healingPotency:400,aoeHeal:!0,applicationDelay:.756,validateAttempt:e=>e.hasResourceAvailable("ADDERSGALL"),onConfirm:e=>e.consumeAddersgall()});Ca("TAUROCHOLE",62,"cd_TAUROCHOLE",{cooldown:45,applicationDelay:.67,onConfirm:e=>e.consumeAddersgall(),onApplication:e=>e.gainStatus("TAUROCHOLE")});Ca("KERACHOLE",50,"cd_KERACHOLE",{cooldown:30,aoeHeal:!0,applicationDelay:.81,validateAttempt:e=>e.hasResourceAvailable("ADDERSGALL"),onConfirm:(e,t)=>{e.consumeAddersgall(),e.addHoTPotencies({node:t,skillName:"KERACHOLE",effectName:"KERAKEIA",speedStat:"sps",tickPotency:100})},onApplication:(e,t)=>{e.gainStatus("KERACHOLE"),e.hasTraitUnlocked("ENHANCED_KERACHOLE")&&e.applyHoT("KERAKEIA",t)}});sa("EGEIRO",12,{applicationDelay:.58,manaCost:2400,castTime:8});Ca("KARDIA",4,"cd_KARDIA",{applicationDelay:.62,cooldown:5,onApplication:e=>{e.gainStatus("KARDIA"),e.gainStatus("KARDION")}});Ca("ICARUS",40,"cd_ICARUS",{cooldown:45,animationLock:xa});Object.keys(CR).forEach(e=>Ua(e,`WAR/${Xe[e].name}.png`));class tG extends Wt{jobSpecificSelfTargetedBuffViewProps(){return Object.keys(CR).map(t=>this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){var E,A;const n=this.state.resources,l=n.get("BEAST_GAUGE").availableAmount(),s=n.get("STORM_COMBO"),c=n.get("TEMPEST_COMBO"),d=s.available(1)?(E=s.pendingChange)==null?void 0:E.timeTillEvent:c.available(1)?(A=c.pendingChange)==null?void 0:A.timeTillEvent:void 0;return[{kind:"text",name:p({en:"Combo Timer",zh:"连击监控"}),text:(d==null?void 0:d.toFixed(3))??"N/A"},{kind:"bar",name:p({en:"Beast Gauge",zh:"兽魂量谱"}),color:t.war.beastGauge,progress:l/100,valueString:l.toFixed(0)}]}}const Ft=(e,t,n)=>{$e("WAR",e,t,n??{})};Ft("BEAST_GAUGE",100);Ft("SURGING_TEMPEST",1,{timeout:60});Ft("NASCENT_CHAOS",1,{timeout:30});Ft("INNER_RELEASE",3,{timeout:15});Ft("INNER_STRENGTH",1,{timeout:15});Ft("BURGEONING_FURY",3,{timeout:30});Ft("WRATHFUL",1,{timeout:30});Ft("PRIMAL_REND_READY",1,{timeout:30});Ft("PRIMAL_RUINATION_READY",1,{timeout:20});Ft("THRILL_OF_BATTLE",1,{timeout:10});Ft("EQUILIBRIUM",1,{timeout:15});Ft("RAW_INTUITION",1,{timeout:6});Ft("BLOODWHETTING",1,{timeout:8});Ft("STEM_THE_FLOW",1,{timeout:4});Ft("STEM_THE_TIDE",1,{timeout:20});Ft("NASCENT_FLASH",1,{timeout:8});Ft("VENGEANCE",1,{timeout:15});Ft("DAMNATION",1,{timeout:15});Ft("PRIMEVAL_IMPULSE",1,{timeout:15});Ft("SHAKE_IT_OFF",1,{timeout:30});Ft("SHAKE_IT_OFF_OVER_TIME",1,{timeout:15});Ft("HOLMGANG",1,{timeout:10});Ft("DEFIANCE",1);Ft("STORM_COMBO",2,{timeout:30});Ft("TEMPEST_COMBO",1,{timeout:30});const aG=["HEAVY_SWING","MAIM","STORMS_EYE","STORMS_PATH"],Nb=["OVERPOWER","MYTHRIL_TEMPEST"],nG=[...aG,...Nb],eN=["FELL_CLEAVE","DECIMATE"],iG=["THRILL_OF_BATTLE","DAMNATION","BLOODWHETTING","VENGEANCE","RAW_INTUITION"];class lG extends qt{constructor(t){super(t),this.hasTraitUnlocked("ENHANCED_ONSLAUGHT")&&this.cooldowns.set(new Ke("cd_ONSLAUGHT",30,3,3)),this.registerRecurringEvents()}get statusPropsGenerator(){return new tG(this)}processComboStatus(t){if(!nG.includes(t))return;const n=Nb.includes(t),l=n?"TEMPEST_COMBO":"STORM_COMBO",s=n?"STORM_COMBO":"TEMPEST_COMBO";this.setComboState(s,0);let c=this.resources.get(l).availableAmount(),d=0;n?t==="OVERPOWER"&&(d=1):t==="HEAVY_SWING"?d=1:c===1&&t==="MAIM"&&(d=2),this.setComboState(l,d)}hasComboStatus(t,n){return this.resources.get(t).availableAmount()===n}gainBeastGauge(t){const n=this.resources.get("BEAST_GAUGE");n.availableAmount()+t>n.maxValue&&O.reportWarning(Fe.BeastGaugeOvercap),n.gain(t)}gainProc(t,n){const l=Ut("WAR",t).maxTimeout;this.hasResourceAvailable(t)?(t==="BURGEONING_FURY"&&this.resources.get(t).gain(1),this.resources.get(t).overrideTimer(this,l)):(this.resources.get(t).gain(n??1),l&&this.enqueueResourceDrop(t,l))}gainSurgingTempest(t){var c;const n=this.resources.get("SURGING_TEMPEST"),l=Ut("WAR","SURGING_TEMPEST").maxTimeout,s=(((c=n.pendingChange)==null?void 0:c.timeTillEvent)??0)+t;n.overrideTimer(this,s>=l?l:s)}gainSurgingTempestGCD(t,n,l){this.hasResourceAvailable("SURGING_TEMPEST")?this.addEvent(new Le("surging tempest refresh",n,()=>{this.hasResourceAvailable("SURGING_TEMPEST")?this.gainSurgingTempest(t):(this.resources.get("SURGING_TEMPEST").gain(1),this.enqueueResourceDrop("SURGING_TEMPEST",t))})):(this.resources.get("SURGING_TEMPEST").gain(1),this.enqueueResourceDrop("SURGING_TEMPEST",t+l))}}const qn=(e,t,n)=>{const l=lt(n.onConfirm??ze,d=>d.processComboStatus(e),d=>{eN.includes(e)&&d.tryConsumeResource("INNER_RELEASE")&&d.hasTraitUnlocked("ENHANCED_INNER_RELEASE")&&(d.gainProc("BURGEONING_FURY"),d.hasResourceAvailable("BURGEONING_FURY",3)&&(d.gainProc("WRATHFUL"),d.tryConsumeResource("BURGEONING_FURY",!0)))}),s=n.onApplication??ze,c=n.jobPotencyModifiers??(d=>[]);return Ni("WAR",e,t,{...n,onConfirm:l,onApplication:s,recastTime:d=>d.config.adjustedSksGCD(),jobPotencyModifiers:d=>{const f=c(d);return n.combo&&d.hasComboStatus(n.combo.resource,n.combo.resourceValue)&&f.push(Bi(We(d,n.combo.potency)-We(d,n.potency))),d.hasResourceAvailable("SURGING_TEMPEST")&&f.push(ue.SurgingTempest),d.hasResourceAvailable("INNER_RELEASE")&&eN.includes(e)&&f.push(ue.AutoCDH),f}})},Kr=(e,t,n,l)=>Rt("WAR",e,t,n,{...l,onConfirm:l.onConfirm,jobPotencyModifiers:s=>{const c=[];return s.hasResourceAvailable("SURGING_TEMPEST")&&c.push(ue.SurgingTempest),c}});qn("TOMAHAWK",15,{potency:150,applicationDelay:.71});qn("HEAVY_SWING",1,{potency:[["NEVER",150],["MELEE_MASTERY_TANK",200],["MELEE_MASTERY_II_TANK",240]],applicationDelay:.53});qn("MAIM",4,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",150],["MELEE_MASTERY_II_TANK",190]],combo:{potency:[["NEVER",250],["MELEE_MASTERY_TANK",300],["MELEE_MASTERY_II_TANK",340]],resource:"STORM_COMBO",resourceValue:1},applicationDelay:.62,onConfirm:e=>{e.hasComboStatus("STORM_COMBO",1)&&e.gainBeastGauge(10)},highlightIf:e=>e.hasComboStatus("STORM_COMBO",1)});qn("STORMS_PATH",26,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",160],["MELEE_MASTERY_II_TANK",220]],combo:{potency:[["NEVER",380],["MELEE_MASTERY_TANK",440],["MELEE_MASTERY_II_TANK",500]],resource:"STORM_COMBO",resourceValue:2},applicationDelay:1.52,onConfirm:e=>{e.hasComboStatus("STORM_COMBO",2)&&e.gainBeastGauge(20)},highlightIf:e=>e.hasComboStatus("STORM_COMBO",2)});qn("STORMS_EYE",50,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",160],["MELEE_MASTERY_II_TANK",220]],combo:{potency:[["NEVER",380],["MELEE_MASTERY_TANK",440],["MELEE_MASTERY_II_TANK",500]],resource:"STORM_COMBO",resourceValue:2},applicationDelay:.62,onConfirm:e=>{e.hasComboStatus("STORM_COMBO",2)&&(e.gainBeastGauge(10),e.gainSurgingTempestGCD(30,.62,1.7))},highlightIf:e=>e.hasComboStatus("STORM_COMBO",2)});qn("OVERPOWER",10,{potency:110,falloff:0,applicationDelay:.62});qn("MYTHRIL_TEMPEST",40,{potency:100,combo:{potency:140,resource:"TEMPEST_COMBO",resourceValue:1},falloff:0,applicationDelay:.49,onConfirm:e=>{e.hasComboStatus("TEMPEST_COMBO",1)&&(e.gainBeastGauge(20),e.gainSurgingTempestGCD(30,.49,.45))},highlightIf:e=>e.hasComboStatus("TEMPEST_COMBO",1)});function Ih(e){e.cooldowns.get("cd_INFURIATE").restore(5)}qn("FELL_CLEAVE",54,{potency:[["NEVER",520],["MELEE_MASTERY_II_TANK",580]],applicationDelay:.62,validateAttempt:e=>e.resources.get("BEAST_GAUGE").available(50)||e.resources.get("INNER_RELEASE").available(1),onConfirm:e=>{e.hasResourceAvailable("INNER_RELEASE")||e.resources.get("BEAST_GAUGE").consume(50),Ih(e)},replaceIf:[{newSkill:"INNER_CHAOS",condition:e=>e.hasResourceAvailable("NASCENT_CHAOS")}],highlightIf:e=>e.hasResourceAvailable("BEAST_GAUGE",50)||e.hasResourceAvailable("INNER_RELEASE")});qn("DECIMATE",60,{potency:180,falloff:0,applicationDelay:1.83,validateAttempt:e=>e.hasResourceAvailable("BEAST_GAUGE",50)||e.hasResourceAvailable("INNER_RELEASE"),onConfirm:e=>{e.tryConsumeResource("INNER_RELEASE")||e.resources.get("BEAST_GAUGE").consume(50),Ih(e)},highlightIf:e=>e.hasResourceAvailable("BEAST_GAUGE",50)||e.hasResourceAvailable("INNER_RELEASE"),replaceIf:[{newSkill:"CHAOTIC_CYCLONE",condition:e=>e.hasResourceAvailable("NASCENT_CHAOS")}]});Kr("INNER_RELEASE",70,"cd_INNER_RELEASE",{applicationDelay:0,requiresCombat:!0,cooldown:60,maxCharges:1,onConfirm:e=>{e.gainProc("INNER_RELEASE",3),e.gainProc("INNER_STRENGTH"),e.hasResourceAvailable("SURGING_TEMPEST")&&e.gainSurgingTempest(10),e.config.level>=wt.lvl90&&e.gainProc("PRIMAL_REND_READY")},replaceIf:[{newSkill:"PRIMAL_WRATH",condition:e=>e.hasResourceAvailable("WRATHFUL")}]});qn("PRIMAL_REND",90,{potency:700,applicationDelay:1.16,falloff:.5,animationLock:1.2,validateAttempt:e=>e.hasResourceAvailable("PRIMAL_REND_READY"),onConfirm:e=>{e.tryConsumeResource("PRIMAL_REND_READY"),e.hasTraitUnlocked("ENHANCED_PRIMAL_REND")&&e.gainProc("PRIMAL_RUINATION_READY")},highlightIf:e=>e.hasResourceAvailable("PRIMAL_REND_READY"),replaceIf:[{newSkill:"PRIMAL_RUINATION",condition:e=>e.hasResourceAvailable("PRIMAL_RUINATION_READY")}],jobPotencyModifiers:e=>[ue.AutoCDH]});Kr("PRIMAL_WRATH",96,"cd_PRIMAL_WRATH",{startOnHotbar:!1,potency:700,falloff:.5,applicationDelay:1.15,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("WRATHFUL"),onConfirm:e=>e.tryConsumeResource("WRATHFUL"),highlightIf:e=>!0});qn("PRIMAL_RUINATION",100,{startOnHotbar:!1,potency:780,falloff:.5,applicationDelay:1.06,validateAttempt:e=>e.hasResourceAvailable("PRIMAL_RUINATION_READY"),onConfirm:e=>{e.tryConsumeResource("PRIMAL_RUINATION_READY")},highlightIf:e=>!0,jobPotencyModifiers:e=>[ue.AutoCDH]});Kr("INFURIATE",50,"cd_INFURIATE",{applicationDelay:0,requiresCombat:!0,cooldown:60,maxCharges:2,onApplication:e=>{e.gainBeastGauge(50),e.hasTraitUnlocked("NASCENT_CHAOS")&&e.gainProc("NASCENT_CHAOS")}});qn("INNER_CHAOS",80,{startOnHotbar:!1,potency:660,applicationDelay:.94,validateAttempt:e=>e.hasResourceAvailable("BEAST_GAUGE",50)&&e.hasResourceAvailable("NASCENT_CHAOS"),onConfirm:e=>{e.tryConsumeResource("NASCENT_CHAOS"),e.resources.get("BEAST_GAUGE").consume(50),Ih(e)},highlightIf:e=>e.hasResourceAvailable("BEAST_GAUGE",50),jobPotencyModifiers:e=>[ue.AutoCDH]});qn("CHAOTIC_CYCLONE",72,{startOnHotbar:!1,potency:200,falloff:0,applicationDelay:1.43,validateAttempt:e=>e.hasResourceAvailable("BEAST_GAUGE",50)&&e.hasResourceAvailable("NASCENT_CHAOS"),onConfirm:e=>{e.tryConsumeResource("NASCENT_CHAOS"),e.resources.get("BEAST_GAUGE").consume(50),Ih(e)},highlightIf:e=>e.hasResourceAvailable("BEAST_GAUGE",50),jobPotencyModifiers:e=>[ue.AutoCDH]});Kr("ONSLAUGHT",62,"cd_ONSLAUGHT",{potency:150,applicationDelay:.63,cooldown:30,maxCharges:2,animationLock:xa});Kr("UPHEAVAL",64,"cd_UPHEAVAL",{potency:420,applicationDelay:.62,cooldown:30});Kr("OROGENY",86,"cd_UPHEAVAL",{potency:150,falloff:0,applicationDelay:.62,cooldown:30});je("WAR","VENGEANCE",38,"cd_VENGEANCE",{rscType:"VENGEANCE",autoUpgrade:{trait:"VENGEANCE_MASTERY",otherSkill:"DAMNATION"},cooldown:120,applicationDelay:.62});je("WAR","DAMNATION",92,"cd_VENGEANCE",{rscType:"DAMNATION",autoDowngrade:{trait:"VENGEANCE_MASTERY",otherSkill:"VENGEANCE"},cooldown:120,applicationDelay:.62});je("WAR","RAW_INTUITION",56,"cd_RAW_INTUITION",{rscType:"RAW_INTUITION",autoUpgrade:{trait:"RAW_INTUITION_MASTERY",otherSkill:"BLOODWHETTING"},cooldown:25,applicationDelay:.45});je("WAR","BLOODWHETTING",82,"cd_RAW_INTUITION",{rscType:"BLOODWHETTING",autoDowngrade:{trait:"RAW_INTUITION_MASTERY",otherSkill:"RAW_INTUITION"},onApplication:e=>{e.gainProc("STEM_THE_FLOW"),e.gainProc("STEM_THE_TIDE")},cooldown:25,applicationDelay:.45});Rt("WAR","NASCENT_FLASH",76,"cd_RAW_INTUITION",{onApplication:e=>{let t=6;e.hasTraitUnlocked("ENHANCED_NASCENT_FLASH")&&(t=8),e.resources.get("NASCENT_FLASH").gain(1),e.enqueueResourceDrop("NASCENT_FLASH",t)},cooldown:25,applicationDelay:.45});je("WAR","HOLMGANG",45,"cd_HOLMGANG",{rscType:"HOLMGANG",cooldown:240,applicationDelay:.45});je("WAR","THRILL_OF_BATTLE",30,"cd_THRILL_OF_BATTLE",{rscType:"THRILL_OF_BATTLE",cooldown:90,applicationDelay:.62});Rt("WAR","EQUILIBRIUM",58,"cd_EQUILIBRIUM",{cooldown:60,applicationDelay:.62,onApplication:e=>{e.hasTraitUnlocked("ENHANCED_EQUILIBRIUM")&&e.gainProc("EQUILIBRIUM")}});je("WAR","SHAKE_IT_OFF",68,"cd_SHAKE_IT_OFF",{rscType:"SHAKE_IT_OFF",cooldown:90,onApplication:(e,t)=>{let n=0;iG.forEach(l=>{e.tryConsumeResource(l)&&(n+=1)}),console.debug(`Shake It Off dispelled ${n} buffs`),e.gainProc("SHAKE_IT_OFF_OVER_TIME")},applicationDelay:0});Rt("WAR","DEFIANCE",10,"cd_DEFIANCE",{cooldown:2,maxCharges:1,applicationDelay:0,validateAttempt:e=>!e.hasResourceAvailable("DEFIANCE"),onConfirm:e=>e.resources.get("DEFIANCE").gain(1),replaceIf:[{newSkill:"RELEASE_DEFIANCE",condition:e=>e.hasResourceAvailable("DEFIANCE")}],secondaryCooldown:{cdName:"cd_RELEASE_DEFIANCE",cooldown:1,maxCharges:1}});Rt("WAR","RELEASE_DEFIANCE",10,"cd_RELEASE_DEFIANCE",{startOnHotbar:!1,cooldown:1,maxCharges:1,secondaryCooldown:{cdName:"cd_DEFIANCE",cooldown:2,maxCharges:1},applicationDelay:0,validateAttempt:e=>e.hasResourceAvailable("DEFIANCE"),onConfirm:e=>e.tryConsumeResource("DEFIANCE")});const Cb=["CIRCLE_OF_SCORN_DOT"],oG=Object.keys(gR).filter(e=>!Cb.includes(e));Object.keys(gR).forEach(e=>Ua(e,`PLD/${Xe[e].name}.png`));class sG extends Wt{jobSpecificOtherTargetedBuffViewProps(){return[...Cb.map(t=>this.makeCommonTimer(t,!1))]}jobSpecificSelfTargetedBuffViewProps(){return oG.map(t=>this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){var T,S;const n=this.state.resources,l=n.get("PLD_COMBO_TRACKER"),s=n.get("PLD_AOE_COMBO_TRACKER"),c=n.get("OATH_GAUGE").availableAmount(),d=n.get("IRON_WILL").availableAmount(),f=l.available(1)?(T=l.pendingChange)==null?void 0:T.timeTillEvent:s.available(1)?(S=s.pendingChange)==null?void 0:S.timeTillEvent:void 0,E=this.state.findAutoAttackTimerInQueue();let A="";return this.state.hasResourceAvailable("STORED_AUTO")?A="stored":A=E!==-1?E.toFixed(3):"N/A",[{kind:"bar",name:p({en:"Auto Tracker"}),color:t.pld.ironWillColor,progress:E!==-1?(3-E)/3:0,valueString:A},{kind:"bar",name:p({en:"Combo Timer",zh:"连击监控"}),color:t.pld.pldComboTimer,progress:f?f/30:0,valueString:(f==null?void 0:f.toFixed(3))??"N/A"},{kind:"counter",name:p({en:"Iron Will",zh:"钢铁信念"}),color:t.pld.ironWillColor,currentStacks:d,maxStacks:1},{kind:"bar",name:p({en:"Oath Gauge",zh:"忠义值"}),color:t.pld.oathGaugeColor,progress:c/100,valueString:c.toFixed(0)}]}}const It=(e,t,n)=>{$e("PLD",e,t,n??{})};It("FIGHT_OR_FLIGHT",1,{timeout:20});It("IRON_WILL",1);It("OATH_GAUGE",100);It("SHELTRON",1,{timeout:6});It("SENTINEL",1,{timeout:15});It("CIRCLE_OF_SCORN_DOT",1,{timeout:15});It("HALLOWED_GROUND",1,{timeout:10});It("BULWARK",1,{timeout:10});It("GORING_BLADE_READY",1,{timeout:30});It("DIVINE_VEIL",1,{timeout:30});It("ATONEMENT_READY",1,{timeout:30});It("DIVINE_MIGHT",1,{timeout:30});It("KNIGHTS_RESOLVE",1,{timeout:4});It("KNIGHTS_BENEDICTION",1,{timeout:12});It("REQUIESCAT",4,{timeout:30});It("CONFITEOR_READY",1,{timeout:30});It("PASSAGE_OF_ARMS",1,{timeout:18});It("SUPPLICATION_READY",1,{timeout:30});It("SEPULCHRE_READY",1,{timeout:30});It("HOLY_SHELTRON",1,{timeout:8});It("BLADE_OF_HONOR_READY",1,{timeout:30});It("GUARDIAN",1,{timeout:15});It("GUARDIANS_WILL",1,{timeout:15});It("PLD_COMBO_TRACKER",2,{timeout:30});It("PLD_CONFITEOR_COMBO_TRACKER",3,{timeout:30});It("PLD_AOE_COMBO_TRACKER",1,{timeout:30});It("INTERVENTION",1,{timeout:8});It("ARMS_UP",1);It("COVER",1,{timeout:12});const mm=new Map([["TOTAL_ECLIPSE",0],["PROMINENCE",1]]),Rm=new Map([["FAST_BLADE",0],["RIOT_BLADE",1],["ROYAL_AUTHORITY",2]]),bb=new Map([["CONFITEOR",0],["BLADE_OF_FAITH",1],["BLADE_OF_TRUTH",2],["BLADE_OF_VALOR",3]]),hf=["HOLY_SPIRIT","HOLY_CIRCLE"];class rG extends qt{constructor(t){super(t),this.resources.get("OATH_GAUGE").gain(100),this.registerRecurringEvents([{groupedEffects:[{effectName:"CIRCLE_OF_SCORN_DOT",appliedBy:["CIRCLE_OF_SCORN"]}]}])}get statusPropsGenerator(){return new sG(this)}jobSpecificAddDamageBuffCovers(t,n){this.hasResourceAvailable("FIGHT_OR_FLIGHT")&&t.addBuff(P.FightOrFlight);const l=n.name;this.hasResourceAvailable("DIVINE_MIGHT")&&(l==="HOLY_SPIRIT"||l==="HOLY_CIRCLE")?t.addBuff(P.DivineMight):this.hasResourceAvailable("REQUIESCAT")&&(l==="HOLY_SPIRIT"||l==="HOLY_CIRCLE"||l==="CONFITEOR"||l==="BLADE_OF_FAITH"||l==="BLADE_OF_TRUTH"||l==="BLADE_OF_VALOR")&&t.addBuff(P.Requiescat)}cancelChanneledSkills(){this.tryConsumeResource("PASSAGE_OF_ARMS")}jobSpecificOnAutoAttack(){O.reportAutoTick(this.time,"auto"),this.resources.get("OATH_GAUGE").gain(5)}isSpellInstant(t){return t!=="CLEMENCY"?this.hasResourceAvailable("DIVINE_MIGHT")||this.hasResourceAvailable("REQUIESCAT"):this.hasResourceAvailable("REQUIESCAT")}captureSpellCastTime(t,n){return this.isSpellInstant(t)?0:this.config.adjustedCastTime(n)}tryConsumeRequiescat(t){(hf.includes(t)||bb.has(t)||t==="CLEMENCY")&&this.tryConsumeResource("REQUIESCAT")}isHolySpiritCircleGoodForReq(){const t=this.resources.get("REQUIESCAT").availableAmount();return t===0||this.hasResourceAvailable("PLD_CONFITEOR_COMBO_TRACKER")||this.config.level>=90?!1:this.config.level>=80?!this.hasResourceAvailable("CONFITEOR_READY")||this.hasResourceAvailable("CONFITEOR_READY")&&t>1:!0}progressComboTracker(t,n,l){const s=this.resources.get(n).maxValue,c=l.get(t)??-1,d=this.resources.get(n).availableAmount();this.tryConsumeResource(n,!0),(c!==s&&c===d||c===0)&&(this.resources.get(n).gain(c+1),this.enqueueResourceDrop(n))}fixPLDPhysicalComboState(t){mm.has(t)?(this.tryConsumeResource("PLD_COMBO_TRACKER",!0),this.progressComboTracker(t,"PLD_AOE_COMBO_TRACKER",mm)):Rm.has(t)&&(this.tryConsumeResource("PLD_AOE_COMBO_TRACKER",!0),this.progressComboTracker(t,"PLD_COMBO_TRACKER",Rm)),(mm.has(t)||Rm.has(t)||t==="SHIELD_BASH")&&this.tryConsumeResource("PLD_CONFITEOR_COMBO_TRACKER",!0)}getDelayedManaFromAction(t,n){this.addEvent(new Le("get MP from "+n,this.skillsList.get(n).applicationDelay,()=>{this.resources.get("MANA").gain(t)}))}refreshBuff(t,n){this.addEvent(new Le("gain buff",n,()=>{this.resources.get(t).gain(1),this.enqueueResourceDrop(t)}))}}const Oi=(e,t,n)=>{const l=lt(n.onConfirm??ze,d=>{e!=="SHIELD_LOB"&&e!=="SHIELD_BASH"&&e!=="GORING_BLADE"&&d.fixPLDPhysicalComboState(e)}),s=n.onApplication??ze,c=n.jobPotencyModifiers??(d=>[]);return Ni("PLD",e,t,{...n,onConfirm:l,onApplication:s,startsAuto:n.startsAuto,recastTime:d=>d.config.adjustedSksGCD(),jobPotencyModifiers:d=>{const f=c(d);return n.combo&&d.resources.get(n.combo.resource).availableAmount()===n.combo.resourceValue&&f.push(Bi(We(d,n.combo.potency)-We(d,n.potency))),d.hasResourceAvailable("FIGHT_OR_FLIGHT")&&f.push(ue.FightOrFlight),f}})},fs=(e,t,n)=>{let l=lt((d,f)=>{d.hasResourceAvailable("DIVINE_MIGHT")&&hf.includes(e)?d.tryConsumeResource("DIVINE_MIGHT"):d.tryConsumeRequiescat(e)},n.onConfirm??ze);const s=n.onApplication??ze;let c=lt((d,f)=>{},n.onExecute??ze);return Fi("PLD",e,t,{replaceIf:n.replaceIf,startOnHotbar:n.startOnHotbar,highlightIf:n.highlightIf,castTime:d=>d.captureSpellCastTime(e,n.baseCastTime),recastTime:d=>d.config.adjustedGCD(),manaCost:n.baseManaCost??0,potency:n.basePotency,jobPotencyModifiers:d=>{const f=[];return hf.includes(e)&&d.hasResourceAvailable("DIVINE_MIGHT")?n.dmPotency&&f.push(Wy(We(d,n.dmPotency)-We(d,n.basePotency))):(hf.includes(e)||bb.has(e))&&d.hasResourceAvailable("REQUIESCAT")&&n.reqPotency&&f.push(Vy(We(d,n.reqPotency)-We(d,n.basePotency))),e!=="CLEMENCY"&&d.hasResourceAvailable("FIGHT_OR_FLIGHT")&&f.push(ue.FightOrFlight),n.jobPotencyModifiers&&f.push(...n.jobPotencyModifiers(d)),f},falloff:n.falloff,validateAttempt:n.validateAttempt,applicationDelay:n.applicationDelay,isInstantFn:d=>d.isSpellInstant(e),onConfirm:l,onApplication:s,onExecute:c,startsAuto:n.startsAuto})},wa=(e,t,n,l)=>Rt("PLD",e,t,n,{...l,onConfirm:l.onConfirm,startsAuto:l.startsAuto,jobPotencyModifiers:s=>{const c=[];return s.hasResourceAvailable("FIGHT_OR_FLIGHT")&&c.push(ue.FightOrFlight),c}}),Ob=(e,t,n,l)=>je("PLD",e,t,n,{...l,rscType:l.rscType,cooldown:l.cooldown,applicationDelay:l.applicationDelay}),Db={newSkill:"ATONEMENT",condition:e=>e.hasResourceAvailable("ATONEMENT_READY")},yb={newSkill:"SUPPLICATION",condition:e=>e.hasResourceAvailable("SUPPLICATION_READY")},vb={newSkill:"SEPULCHRE",condition:e=>e.hasResourceAvailable("SEPULCHRE_READY")},mT={newSkill:"CONFITEOR",condition:e=>e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").availableAmount()===0},Eu={newSkill:"BLADE_OF_FAITH",condition:e=>e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").availableAmount()===1},Au={newSkill:"BLADE_OF_TRUTH",condition:e=>e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").availableAmount()===2},mu={newSkill:"BLADE_OF_VALOR",condition:e=>e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").availableAmount()===3},$m={newSkill:"BLADE_OF_HONOR",condition:e=>e.hasResourceAvailable("BLADE_OF_HONOR_READY")},cG={newSkill:"IMPERATOR",condition:e=>!e.hasResourceAvailable("BLADE_OF_HONOR_READY")},uG={newSkill:"IRON_WILL",condition:e=>!e.hasResourceAvailable("IRON_WILL")},dG={newSkill:"RELEASE_IRON_WILL",condition:e=>e.hasResourceAvailable("IRON_WILL")};Oi("SHIELD_LOB",15,{potency:100,applicationDelay:.89,startsAuto:!1});Oi("FAST_BLADE",1,{potency:[["NEVER",150],["MELEE_MASTERY_TANK",200],["MELEE_MASTERY_II_TANK",220]],applicationDelay:.62});Oi("RIOT_BLADE",4,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",140],["MELEE_MASTERY_II_TANK",170]],combo:{potency:[["NEVER",260],["MELEE_MASTERY_TANK",300],["MELEE_MASTERY_II_TANK",330]],resource:"PLD_COMBO_TRACKER",resourceValue:1},highlightIf:e=>e.resources.get("PLD_COMBO_TRACKER").availableAmount()===1,applicationDelay:.76,onConfirm:e=>{e.resources.get("PLD_COMBO_TRACKER").availableAmount()===1&&e.getDelayedManaFromAction(1e3,"RIOT_BLADE")}});Oi("ROYAL_AUTHORITY",60,{potency:[["NEVER",100],["MELEE_MASTERY_TANK",140],["MELEE_MASTERY_II_TANK",200]],combo:{potency:[["NEVER",360],["MELEE_MASTERY_TANK",400],["MELEE_MASTERY_II_TANK",460]],resource:"PLD_COMBO_TRACKER",resourceValue:2},highlightIf:e=>e.resources.get("PLD_COMBO_TRACKER").availableAmount()===2,applicationDelay:.62,onConfirm:e=>{e.resources.get("PLD_COMBO_TRACKER").availableAmount()===2&&(e.refreshBuff("DIVINE_MIGHT",0),e.hasTraitUnlocked("SWORD_OATH")&&(e.refreshBuff("ATONEMENT_READY",0),e.tryConsumeResource("SUPPLICATION_READY"),e.tryConsumeResource("SEPULCHRE_READY")))}});Oi("ATONEMENT",76,{replaceIf:[yb,vb],potency:[["NEVER",360],["MELEE_MASTERY_TANK",400],["MELEE_MASTERY_II_TANK",460]],applicationDelay:1.26,validateAttempt:e=>e.hasResourceAvailable("ATONEMENT_READY"),highlightIf:e=>e.hasResourceAvailable("ATONEMENT_READY"),onConfirm:e=>{e.tryConsumeResource("ATONEMENT_READY"),e.refreshBuff("SUPPLICATION_READY",0),e.getDelayedManaFromAction(400,"ATONEMENT")}});Oi("SUPPLICATION",76,{startOnHotbar:!1,replaceIf:[Db,vb],potency:[["NEVER",380],["MELEE_MASTERY_TANK",420],["MELEE_MASTERY_II_TANK",500]],applicationDelay:1.16,validateAttempt:e=>e.hasResourceAvailable("SUPPLICATION_READY"),highlightIf:e=>e.hasResourceAvailable("SUPPLICATION_READY"),onConfirm:e=>{e.tryConsumeResource("SUPPLICATION_READY"),e.refreshBuff("SEPULCHRE_READY",0),e.getDelayedManaFromAction(400,"SUPPLICATION")}});Oi("SEPULCHRE",76,{startOnHotbar:!1,replaceIf:[Db,yb],potency:[["NEVER",400],["MELEE_MASTERY_TANK",440],["MELEE_MASTERY_II_TANK",540]],applicationDelay:1.29,validateAttempt:e=>e.hasResourceAvailable("SEPULCHRE_READY"),highlightIf:e=>e.hasResourceAvailable("SEPULCHRE_READY"),onConfirm:e=>{e.tryConsumeResource("SEPULCHRE_READY"),e.getDelayedManaFromAction(400,"SEPULCHRE")}});Oi("TOTAL_ECLIPSE",6,{potency:120,applicationDelay:.76,falloff:0});Oi("PROMINENCE",40,{potency:100,combo:{potency:220,resource:"PLD_AOE_COMBO_TRACKER",resourceValue:1},applicationDelay:.62,falloff:0,highlightIf:e=>e.resources.get("PLD_AOE_COMBO_TRACKER").availableAmount()===1,onConfirm:e=>{e.resources.get("PLD_AOE_COMBO_TRACKER").availableAmount()===1&&e.hasTraitUnlocked("ENHANCED_PROMINENCE")&&(e.refreshBuff("DIVINE_MIGHT",0),e.getDelayedManaFromAction(500,"PROMINENCE"))}});fs("HOLY_SPIRIT",64,{baseCastTime:1.5,applicationDelay:.76,baseManaCost:1e3,startsAuto:!1,basePotency:[["NEVER",300],["MELEE_MASTERY_TANK",350],["MELEE_MASTERY_II_TANK",400]],reqPotency:[["NEVER",600],["MELEE_MASTERY_TANK",650],["MELEE_MASTERY_II_TANK",700]],dmPotency:[["NEVER",400],["MELEE_MASTERY_TANK",450],["MELEE_MASTERY_II_TANK",500]],highlightIf:e=>e.hasResourceAvailable("DIVINE_MIGHT")||e.isHolySpiritCircleGoodForReq()});fs("HOLY_CIRCLE",72,{baseCastTime:1.5,applicationDelay:.62,baseManaCost:1e3,basePotency:100,reqPotency:350,dmPotency:250,falloff:0,highlightIf:e=>e.hasResourceAvailable("DIVINE_MIGHT")||e.isHolySpiritCircleGoodForReq()});Oi("GORING_BLADE",54,{applicationDelay:.53,potency:700,validateAttempt:e=>e.hasResourceAvailable("GORING_BLADE_READY"),highlightIf:e=>e.hasResourceAvailable("GORING_BLADE_READY"),onConfirm:e=>{e.tryConsumeResource("GORING_BLADE_READY")}});fs("CONFITEOR",80,{replaceIf:[Eu,Au,mu],baseCastTime:0,applicationDelay:.62,baseManaCost:1e3,startsAuto:!1,basePotency:[["NEVER",420],["MELEE_MASTERY_II_TANK",500]],reqPotency:[["NEVER",920],["MELEE_MASTERY_II_TANK",1e3]],falloff:.6,validateAttempt:e=>e.hasResourceAvailable("CONFITEOR_READY"),highlightIf:e=>e.hasResourceAvailable("CONFITEOR_READY"),onConfirm:e=>{e.tryConsumeResource("CONFITEOR_READY"),e.tryConsumeResource("PLD_CONFITEOR_COMBO_TRACKER",!0),e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").gain(1),e.enqueueResourceDrop("PLD_CONFITEOR_COMBO_TRACKER")}});fs("BLADE_OF_FAITH",90,{replaceIf:[mT,Au,mu],startOnHotbar:!1,baseCastTime:0,baseManaCost:1e3,startsAuto:!1,applicationDelay:.62,basePotency:[["NEVER",220],["MELEE_MASTERY_II_TANK",260]],reqPotency:[["NEVER",720],["MELEE_MASTERY_II_TANK",760]],falloff:.6,validateAttempt:e=>Eu.condition(e),highlightIf:e=>Eu.condition(e),onConfirm:e=>{e.tryConsumeResource("PLD_CONFITEOR_COMBO_TRACKER",!0),e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").gain(2),e.enqueueResourceDrop("PLD_CONFITEOR_COMBO_TRACKER")}});fs("BLADE_OF_TRUTH",90,{replaceIf:[mT,Eu,mu],startOnHotbar:!1,baseCastTime:0,baseManaCost:1e3,applicationDelay:.89,startsAuto:!1,basePotency:[["NEVER",320],["MELEE_MASTERY_II_TANK",380]],reqPotency:[["NEVER",820],["MELEE_MASTERY_II_TANK",880]],falloff:.6,validateAttempt:e=>Au.condition(e),highlightIf:e=>Au.condition(e),onConfirm:e=>{e.tryConsumeResource("PLD_CONFITEOR_COMBO_TRACKER",!0),e.resources.get("PLD_CONFITEOR_COMBO_TRACKER").gain(3),e.enqueueResourceDrop("PLD_CONFITEOR_COMBO_TRACKER")}});fs("BLADE_OF_VALOR",90,{replaceIf:[mT,Eu,Au],startOnHotbar:!1,baseCastTime:0,baseManaCost:1e3,applicationDelay:.89,startsAuto:!1,basePotency:[["NEVER",420],["MELEE_MASTERY_II_TANK",500]],reqPotency:[["NEVER",920],["MELEE_MASTERY_II_TANK",1e3]],falloff:.6,validateAttempt:e=>mu.condition(e),highlightIf:e=>mu.condition(e),onConfirm:e=>{e.tryConsumeResource("PLD_CONFITEOR_COMBO_TRACKER",!0),e.refreshBuff("BLADE_OF_HONOR_READY",0)}});wa("FIGHT_OR_FLIGHT",2,"cd_FIGHT_OR_FLIGHT",{applicationDelay:.62,cooldown:60,onConfirm:e=>{e.refreshBuff("GORING_BLADE_READY",0),e.refreshBuff("FIGHT_OR_FLIGHT",.62)}});wa("REQUIESCAT",68,"cd_REQUIESCAT",{autoUpgrade:{trait:"REQUIESCAT_MASTERY",otherSkill:"IMPERATOR"},applicationDelay:.62,cooldown:60,potency:320,onConfirm:e=>{e.resources.get("REQUIESCAT").gain(4),e.enqueueResourceDrop("REQUIESCAT",30),e.hasTraitUnlocked("ENHANCED_REQUIESCAT")&&e.refreshBuff("CONFITEOR_READY",0)}});wa("IMPERATOR",96,"cd_IMPERATOR",{autoDowngrade:{trait:"REQUIESCAT_MASTERY",otherSkill:"REQUIESCAT"},replaceIf:[$m],applicationDelay:1.29,cooldown:60,potency:580,falloff:.6,onConfirm:e=>{e.resources.get("REQUIESCAT").gain(4),e.enqueueResourceDrop("REQUIESCAT",30,4),e.hasTraitUnlocked("ENHANCED_REQUIESCAT")&&e.refreshBuff("CONFITEOR_READY",0)}});wa("BLADE_OF_HONOR",100,"cd_BLADE_OF_HONOR",{startOnHotbar:!1,cooldown:1,replaceIf:[cG],validateAttempt:$m.condition,highlightIf:$m.condition,applicationDelay:1.16,potency:1e3,startsAuto:!1,falloff:.5,onConfirm:e=>{e.tryConsumeResource("BLADE_OF_HONOR_READY")}});wa("SPIRITS_WITHIN",30,"cd_SPIRITS_WITHIN",{autoUpgrade:{trait:"SPIRITS_WITHIN_MASTERY",otherSkill:"EXPIACION"},applicationDelay:.89,cooldown:30,potency:270,onConfirm:e=>{e.getDelayedManaFromAction(500,"SPIRITS_WITHIN")}});wa("EXPIACION",86,"cd_EXPIACION",{autoDowngrade:{trait:"SPIRITS_WITHIN_MASTERY",otherSkill:"SPIRITS_WITHIN"},applicationDelay:.36,cooldown:30,potency:450,falloff:.6,onConfirm:e=>{e.getDelayedManaFromAction(500,"EXPIACION")}});wa("CIRCLE_OF_SCORN",50,"cd_CIRCLE_OF_SCORN",{applicationDelay:1.02,cooldown:30,potency:140,falloff:0,onConfirm:(e,t)=>{const n=[];e.hasResourceAvailable("FIGHT_OR_FLIGHT")&&n.push(ue.FightOrFlight),e.addDoTPotencies({node:t,effectName:"CIRCLE_OF_SCORN_DOT",skillName:"CIRCLE_OF_SCORN",tickPotency:30,speedStat:"sks",modifiers:n}),e.addEvent(new Le("apply CoS dot",1.02,()=>{e.applyDoT("CIRCLE_OF_SCORN_DOT",t)}))}});wa("INTERVENE",66,"cd_INTERVENE",{applicationDelay:.62,cooldown:30,potency:150,maxCharges:2,animationLock:xa});fs("CLEMENCY",58,{baseCastTime:1.5,applicationDelay:.62,baseManaCost:2e3,basePotency:0,highlightIf:e=>e.hasResourceAvailable("REQUIESCAT")});wa("SHELTRON",35,"cd_SHELTRON",{autoUpgrade:{trait:"SHELTRON_MASTERY",otherSkill:"HOLY_SHELTRON"},validateAttempt:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,highlightIf:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,applicationDelay:0,cooldown:5,onConfirm:e=>{e.resources.get("OATH_GAUGE").consume(50),e.refreshBuff("SHELTRON",0)}});wa("HOLY_SHELTRON",82,"cd_HOLY_SHELTRON",{autoDowngrade:{trait:"SHELTRON_MASTERY",otherSkill:"SHELTRON"},applicationDelay:0,cooldown:5,validateAttempt:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,highlightIf:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,onConfirm:e=>{e.refreshBuff("HOLY_SHELTRON",0),e.refreshBuff("KNIGHTS_RESOLVE",0),e.refreshBuff("KNIGHTS_BENEDICTION",0),e.resources.get("OATH_GAUGE").consume(50)}});wa("INTERVENTION",62,"cd_INTERVENTION",{applicationDelay:.8,cooldown:10,validateAttempt:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,highlightIf:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,onConfirm:e=>{e.resources.get("OATH_GAUGE").consume(50)}});Ob("HALLOWED_GROUND",50,"cd_HALLOWED_GROUND",{rscType:"HALLOWED_GROUND",applicationDelay:0,cooldown:420});Ob("BULWARK",52,"cd_BULWARK",{rscType:"BULWARK",applicationDelay:0,cooldown:90});wa("SENTINEL",38,"cd_SENTINEL",{autoUpgrade:{trait:"SENTINEL_MASTERY",otherSkill:"GUARDIAN"},applicationDelay:.53,cooldown:120,onConfirm:e=>{e.refreshBuff("SENTINEL",.53)}});wa("GUARDIAN",92,"cd_GUARDIAN",{autoDowngrade:{trait:"SENTINEL_MASTERY",otherSkill:"SENTINEL"},applicationDelay:.53,cooldown:120,onConfirm:e=>{e.refreshBuff("GUARDIAN",.53),e.refreshBuff("GUARDIANS_WILL",.53)}});wa("DIVINE_VEIL",56,"cd_DIVINE_VEIL",{applicationDelay:0,cooldown:90,onConfirm:e=>{e.refreshBuff("DIVINE_VEIL",0)}});wa("PASSAGE_OF_ARMS",70,"cd_PASSAGE_OF_ARMS",{applicationDelay:.62,cooldown:120,onConfirm:e=>{e.refreshBuff("PASSAGE_OF_ARMS",.62)}});wa("COVER",45,"cd_COVER",{applicationDelay:.62,cooldown:120,validateAttempt:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,highlightIf:e=>e.resources.get("OATH_GAUGE").availableAmount()>=50,onConfirm:e=>{e.resources.get("OATH_GAUGE").consume(50)}});wa("IRON_WILL",10,"cd_IRON_WILL",{applicationDelay:0,cooldown:2,validateAttempt:e=>!e.hasResourceAvailable("IRON_WILL"),onConfirm:e=>{e.resources.get("IRON_WILL").gain(1)},replaceIf:[dG],secondaryCooldown:{cdName:"cd_RELEASE_IRON_WILL",cooldown:1,maxCharges:1}});wa("RELEASE_IRON_WILL",10,"cd_RELEASE_IRON_WILL",{startOnHotbar:!1,replaceIf:[uG],applicationDelay:0,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("IRON_WILL"),onConfirm:e=>{e.tryConsumeResource("IRON_WILL")},secondaryCooldown:{cdName:"cd_IRON_WILL",cooldown:2,maxCharges:1}});Oi("SHIELD_BASH",10,{potency:100,applicationDelay:.45});Object.keys(mR).forEach(e=>Ua(e,`DRK/${Xe[e].name}.png`));const fG=Object.keys(mR);class hG extends Wt{jobSpecificOtherTargetedBuffViewProps(){return[]}jobSpecificSelfTargetedBuffViewProps(){return fG.map(t=>t==="GRIT"?this.makeCommonTimerless(t):this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){var T,S,g;const n=this.state.resources,l=n.get("DRK_COMBO_TRACKER"),s=n.get("DRK_AOE_COMBO_TRACKER"),c=n.get("BLOOD_GAUGE").availableAmount(),d=n.get("GRIT").availableAmount(),f=((T=n.get("DARKSIDE").pendingChange)==null?void 0:T.timeTillEvent)??0,E=n.get("DARK_ARTS").availableAmount(),A=l.available(1)?(S=l.pendingChange)==null?void 0:S.timeTillEvent:s.available(1)?(g=s.pendingChange)==null?void 0:g.timeTillEvent:void 0;return[{kind:"bar",name:p({en:"Combo Timer",zh:"连击监控"}),color:t.drk.drkComboTimer,progress:A?A/30:0,valueString:(A==null?void 0:A.toFixed(3))??"N/A"},{kind:"counter",name:p({en:"Grit"}),color:t.drk.grit,currentStacks:d,maxStacks:1},{kind:"bar",name:p({en:"Darkside"}),color:t.drk.darkside,progress:f?f/60:0,valueString:f.toFixed(3)},{kind:"counter",name:p({en:"Dark Arts"}),color:t.drk.darkarts,currentStacks:E,maxStacks:1},{kind:"bar",name:p({en:"Blood Gauge"}),color:t.drk.blood,progress:c/100,valueString:c.toFixed(0)}]}}const ra=(e,t,n)=>{$e("DRK",e,t,n??{})};ra("DARKSIDE",1,{timeout:60});ra("BLOOD_GAUGE",100);ra("SALTED_EARTH",1,{timeout:15});ra("GRIT",1);ra("SHADOW_WALL",1,{timeout:15});ra("DARK_MIND",1,{timeout:10});ra("LIVING_DEAD",1,{timeout:10});ra("WALKING_DEAD",1,{timeout:10});ra("UNDEAD_REBIRTH",1);ra("DARK_MISSIONARY",1,{timeout:15});ra("DELIRIUM",3,{timeout:15});ra("BLOOD_WEAPON",3,{timeout:15});ra("BLACKEST_NIGHT",1,{timeout:7});ra("SCORN",1,{timeout:30});ra("OBLATION",1,{timeout:10});ra("SHADOWED_VIGIL",1,{timeout:15});ra("VIGILANT",1,{timeout:20});ra("DARK_ARTS",1);ra("DRK_COMBO_TRACKER",2,{timeout:30});ra("DRK_AOE_COMBO_TRACKER",1,{timeout:30});ra("DRK_DELIRIUM_COMBO_TRACKER",2,{timeout:30});const RT=6;ra("ESTEEM_TRACKER",RT);const EG=6.8,AG=2.18;class mG extends qt{constructor(t){super(t),this.registerRecurringEvents([{groupedEffects:[{effectName:"SALTED_EARTH",appliedBy:["SALTED_EARTH"],isGroundTargeted:!0}]}],["LIVING_SHADOW"])}get statusPropsGenerator(){return new hG(this)}refreshDarkside(){var t;if(this.hasResourceAvailable("DARKSIDE")){const n=this.resources.get("DARKSIDE"),l=Ut("DRK","DARKSIDE").maxTimeout,s=(((t=n.pendingChange)==null?void 0:t.timeTillEvent)??0)+30;n.overrideTimer(this,Math.min(l,s))}else this.resources.get("DARKSIDE").gain(1),this.enqueueResourceDrop("DARKSIDE",30)}gainBloodGauge(t){const n=this.resources.get("BLOOD_GAUGE");n.availableAmount()+t>100&&O.reportWarning(Fe.BloodGaugeOvercap),n.gain(t)}bloodWeaponConfirm(t){this.hasResourceAvailable("BLOOD_WEAPON")&&(this.tryConsumeResource("BLOOD_WEAPON"),this.gainBloodGauge(10),this.addEvent(new Le("gain blood weapon mana",t,()=>{this.resources.get("MANA").gain(600)})))}processComboStatus(t){if(["DISESTEEM","UNMEND","BLOODSPILLER","QUIETUS"].includes(t))return;let n=[this.resources.get("DRK_COMBO_TRACKER").availableAmount(),this.resources.get("DRK_AOE_COMBO_TRACKER").availableAmount(),this.resources.get("DRK_DELIRIUM_COMBO_TRACKER").availableAmount()];t==="HARD_SLASH"?n=[1,0,0]:t==="SYPHON_STRIKE"?n=[n[0]===1?2:0,0,0]:t==="SOULEATER"?n=[0,0,0]:t==="IMPALEMENT"?n[2]=0:t==="SCARLET_DELIRIUM"?n[2]=1:t==="COMEUPPANCE"?n[2]=2:t==="TORCLEAVER"?n[2]=0:t==="UNLEASH"?n=[0,1,0]:t==="STALWART_SOUL"?n=[0,0,0]:n=[0,0,0],this.setComboState("DRK_COMBO_TRACKER",n[0]),this.setComboState("DRK_AOE_COMBO_TRACKER",n[1]),this.setComboState("DRK_DELIRIUM_COMBO_TRACKER",n[2])}handleEsteemAttack(){if(!this.hasResourceAvailable("ESTEEM_TRACKER"))return;const t=this.resources.get("ESTEEM_TRACKER").node;t!==void 0&&this.resolveEsteemPotency(t),this.resources.get("ESTEEM_TRACKER").consume(1),this.hasResourceAvailable("ESTEEM_TRACKER")&&this.addEvent(new Le("esteem hit",AG,()=>this.handleEsteemAttack()))}resolveEsteemPotency(t){const n=this.resources.get("ESTEEM_TRACKER").availableAmount();if(n===0)return;const l=t.getDotPotencies("ESTEEM_TRACKER")[RT-n];l.modifiers.push(ue.DrkPet),this.hasResourceAvailable("TINCTURE")&&l.modifiers.push(ue.Tincture),l.snapshotTime=this.getDisplayTime(),O.resolvePotency(l)}}const Mb=(e,t)=>{const n=[];return t.hasResourceAvailable("DARKSIDE")&&n.push(ue.Darkside),e.combo&&t.resources.get(e.combo.resource).availableAmount()===e.combo.resourceValue&&n.push(Bi(We(t,e.combo.potency)-We(t,e.potency))),n},mo=(e,t,n)=>Ni("DRK",e,t,{...n,onConfirm:lt(n.onConfirm??ze,l=>l.bloodWeaponConfirm(n.applicationDelay),l=>l.processComboStatus(e)),recastTime:l=>l.config.adjustedSksGCD(),jobPotencyModifiers:l=>Mb(n,l)}),TT=(e,t,n)=>Fi("DRK",e,t,{...n,onConfirm:lt(n.onConfirm??ze,l=>l.processComboStatus(e)),recastTime:l=>l.config.adjustedGCD(),jobPotencyModifiers:l=>Mb(n,l)}),An=(e,t,n,l)=>Rt("DRK",e,t,n,{...l,jobPotencyModifiers:s=>s.hasResourceAvailable("DARKSIDE")?[ue.Darkside]:[]}),hs=(e,t,n,l)=>je("DRK",e,t,n,l);TT("UNMEND",15,{applicationDelay:.98,potency:150,onConfirm:e=>{if(e.hasTraitUnlocked("ENHANCED_UNMEND")){let t=e.cooldowns.get("cd_SHADOWSTRIDE").timeTillNextStackAvailable();e.cooldowns.get("cd_SHADOWSTRIDE").overrideTimeTillNextStack(Math.max(0,t-5))}}});mo("HARD_SLASH",1,{applicationDelay:.58,potency:[["NEVER",150],["MELEE_MASTERY_TANK",180],["MELEE_MASTERY_II_TANK",300]]});mo("SYPHON_STRIKE",2,{applicationDelay:.62,highlightIf:e=>e.hasResourceExactly("DRK_COMBO_TRACKER",1),potency:[["NEVER",100],["MELEE_MASTERY_TANK",120],["MELEE_MASTERY_II_TANK",240]],combo:{potency:[["NEVER",240],["MELEE_MASTERY_TANK",260],["MELEE_MASTERY_II_TANK",380]],resource:"DRK_COMBO_TRACKER",resourceValue:1},onConfirm:e=>{e.hasResourceExactly("DRK_COMBO_TRACKER",1)&&e.addEvent(new Le("gain syphon strike mana",.62,()=>{e.resources.get("MANA").gain(600)}))}});mo("SOULEATER",26,{applicationDelay:.62,highlightIf:e=>e.hasResourceExactly("DRK_COMBO_TRACKER",2),potency:[["NEVER",100],["MELEE_MASTERY_TANK",140],["MELEE_MASTERY_II_TANK",260]],combo:{potency:[["NEVER",320],["MELEE_MASTERY_TANK",360],["MELEE_MASTERY_II_TANK",480]],resource:"DRK_COMBO_TRACKER",resourceValue:2},onConfirm:e=>{e.hasResourceAvailable("DRK_COMBO_TRACKER",2)&&e.gainBloodGauge(20)}});TT("UNLEASH",6,{applicationDelay:.71,potency:120,falloff:0});TT("STALWART_SOUL",40,{applicationDelay:.62,highlightIf:e=>e.hasResourceExactly("DRK_AOE_COMBO_TRACKER",1),potency:[["NEVER",100],["MELEE_MASTERY_II_TANK",120]],combo:{potency:[["NEVER",140],["MELEE_MASTERY_II_TANK",160]],resource:"DRK_AOE_COMBO_TRACKER",resourceValue:1},falloff:0,onConfirm:e=>{e.hasResourceExactly("DRK_AOE_COMBO_TRACKER",1)&&(e.gainBloodGauge(20),e.addEvent(new Le("gain stalwart soul mana",.62,()=>{e.resources.get("MANA").gain(600)})))}});const Nh=e=>{e.tryConsumeResource("DARK_ARTS"),e.refreshDarkside()},Ch=e=>e.hasResourceAvailable("DARK_ARTS"),bh=e=>e.hasResourceAvailable("DARK_ARTS")?0:3e3;An("EDGE_OF_DARKNESS",40,"cd_FLOOD_OF_DARKNESS",{applicationDelay:.62,autoUpgrade:{trait:"DAKRSIDE_MASTERY",otherSkill:"EDGE_OF_SHADOW"},cooldown:1,manaCost:bh,highlightIf:Ch,potency:300,onConfirm:Nh});An("EDGE_OF_SHADOW",74,"cd_FLOOD_OF_DARKNESS",{applicationDelay:.62,autoDowngrade:{trait:"DAKRSIDE_MASTERY",otherSkill:"EDGE_OF_DARKNESS"},cooldown:1,manaCost:bh,highlightIf:Ch,potency:460,onConfirm:Nh});An("FLOOD_OF_DARKNESS",30,"cd_FLOOD_OF_DARKNESS",{applicationDelay:.62,autoUpgrade:{trait:"DAKRSIDE_MASTERY",otherSkill:"FLOOD_OF_SHADOW"},cooldown:1,manaCost:bh,highlightIf:Ch,potency:100,falloff:0,onConfirm:Nh});An("FLOOD_OF_SHADOW",74,"cd_FLOOD_OF_DARKNESS",{applicationDelay:.62,autoDowngrade:{trait:"DAKRSIDE_MASTERY",otherSkill:"FLOOD_OF_DARKNESS"},cooldown:1,manaCost:bh,highlightIf:Ch,potency:160,falloff:0,onConfirm:Nh});const jf=e=>e.hasResourceAvailable("BLOOD_GAUGE",50)||e.hasResourceAvailable("DELIRIUM"),Ef=[{newSkill:"BLOODSPILLER",condition:e=>!e.hasTraitUnlocked("ENHANCED_DELIRIUM")||!e.hasResourceAvailable("DELIRIUM")},{newSkill:"SCARLET_DELIRIUM",condition:e=>e.hasTraitUnlocked("ENHANCED_DELIRIUM")&&e.hasResourceAvailable("DELIRIUM")&&e.hasResourceExactly("DRK_DELIRIUM_COMBO_TRACKER",0)},{newSkill:"COMEUPPANCE",condition:e=>e.hasTraitUnlocked("ENHANCED_DELIRIUM")&&e.hasResourceAvailable("DELIRIUM")&&e.hasResourceExactly("DRK_DELIRIUM_COMBO_TRACKER",1)},{newSkill:"TORCLEAVER",condition:e=>e.hasTraitUnlocked("ENHANCED_DELIRIUM")&&e.hasResourceAvailable("DELIRIUM")&&e.hasResourceExactly("DRK_DELIRIUM_COMBO_TRACKER",2)}];mo("BLOODSPILLER",62,{applicationDelay:.8,validateAttempt:jf,highlightIf:jf,replaceIf:Ef.filter(e=>e.newSkill!=="BLOODSPILLER"),potency:[["NEVER",500],["MELEE_MASTERY_II_TANK",600]],onConfirm:e=>e.tryConsumeResource("DELIRIUM")||e.resources.get("BLOOD_GAUGE").consume(50)});const Af=e=>e.hasTraitUnlocked("ENHANCED_DELIRIUM")&&e.hasResourceAvailable("DELIRIUM");mo("QUIETUS",64,{applicationDelay:.76,validateAttempt:jf,highlightIf:jf,replaceIf:[{newSkill:"IMPALEMENT",condition:Af}],potency:[["NEVER",200],["MELEE_MASTERY_II_TANK",240]],falloff:0,onConfirm:e=>e.tryConsumeResource("DELIRIUM")||e.resources.get("BLOOD_GAUGE").consume(50)});[["SCARLET_DELIRIUM",.62,620],["COMEUPPANCE",.67,720],["TORCLEAVER",.62,820]].forEach((e,t)=>{const[n,l,s]=e;mo(n,96,{startOnHotbar:!1,applicationDelay:l,validateAttempt:Ef[t+1].condition,highlightIf:Ef[t+1].condition,replaceIf:Ef.filter(c=>c.newSkill!==n),potency:s,onConfirm:c=>c.tryConsumeResource("DELIRIUM"),onApplication:c=>c.resources.get("MANA").gain(200)})});mo("IMPALEMENT",96,{startOnHotbar:!1,applicationDelay:.98,validateAttempt:Af,highlightIf:Af,replaceIf:[{newSkill:"QUIETUS",condition:e=>!Af(e)}],potency:300,falloff:0,onConfirm:e=>e.tryConsumeResource("DELIRIUM"),onApplication:e=>e.resources.get("MANA").gain(500)});const Jm=e=>e.hasResourceAvailable("SCORN");mo("DISESTEEM",100,{startOnHotbar:!1,applicationDelay:1.65,validateAttempt:Jm,highlightIf:Jm,potency:1e3,falloff:.25,onConfirm:e=>e.tryConsumeResource("SCORN")});An("DELIRIUM",68,"cd_DELIRIUM",{applicationDelay:0,cooldown:60,onConfirm:e=>{e.gainStatus("DELIRIUM",3),e.gainStatus("BLOOD_WEAPON",3)}});An("CARVE_AND_SPIT",60,"cd_ABYSSAL_DRAIN",{applicationDelay:1.47,cooldown:60,potency:[["NEVER",510],["MELEE_MASTERY_II_TANK",540]],healingPotency:500,onApplication:e=>e.resources.get("MANA").gain(600)});An("ABYSSAL_DRAIN",56,"cd_ABYSSAL_DRAIN",{applicationDelay:.98,cooldown:60,potency:240,healingPotency:500,onApplication:e=>e.resources.get("MANA").gain(600)});const Lb=e=>e.resources.get("SALTED_EARTH").availableAmountIncludingDisabled()>0;An("SALTED_EARTH",52,"cd_SALTED_EARTH",{applicationDelay:.76,cooldown:90,replaceIf:[{newSkill:"SALT_AND_DARKNESS",condition:Lb}],onConfirm:(e,t)=>{e.addDoTPotencies({node:t,effectName:"SALTED_EARTH",skillName:"SALTED_EARTH",tickPotency:50,speedStat:"sks"})},falloff:0,onApplication:(e,t)=>{e.applyDoT("SALTED_EARTH",t),e.gainStatus("SALTED_EARTH")}});An("SALT_AND_DARKNESS",86,"cd_SALT_AND_DARKNESS",{startOnHotbar:!1,highlightIf:e=>!0,validateAttempt:Lb,applicationDelay:.76,cooldown:20,potency:500,falloff:.25});An("LIVING_SHADOW",80,"cd_LIVING_SHADOW",{applicationDelay:0,replaceIf:[{newSkill:"DISESTEEM",condition:e=>Jm(e)}],cooldown:120,onConfirm:(e,t)=>{e.gainStatus("SCORN"),e.resources.get("ESTEEM_TRACKER").gain(RT);const n=e.hasTraitUnlocked("ENHANCED_LIVING_SHADOW")?420:340;[["ABYSSAL_DRAIN_PET",n,0],["SHADOWSTRIDE_PET",0,void 0],e.hasTraitUnlocked("ENHANCED_LIVING_SHADOW_II")?["SHADOWBRINGER_PET",570,.25]:["FLOOD_OF_SHADOW_PET",n,0],["EDGE_OF_SHADOW_PET",n,void 0],["BLOODSPILLER_PET",n,void 0],e.hasTraitUnlocked("ENHANCED_LIVING_SHADOW_III")?["DISESTEEM_PET",620,.25]:["CARVE_AND_SPIT_PET",n,void 0]].forEach(s=>{const[c,d,f]=s;t.addDoTPotency(new Na({config:e.config,sourceTime:e.getDisplayTime(),sourceSkill:c,aspect:ge.Other,description:"",basePotency:d,snapshotTime:void 0,targetCount:t.targetCount,falloff:f}),"ESTEEM_TRACKER")}),e.resources.get("ESTEEM_TRACKER").node=t,e.addEvent(new Le("initial esteem hit",EG,()=>e.handleEsteemAttack()))}});An("SHADOWBRINGER",90,"cd_SHADOWBRINGER",{applicationDelay:.67,cooldown:60,potency:600,falloff:.25,maxCharges:2,validateAttempt:e=>e.hasResourceAvailable("DARKSIDE")});An("SHADOWSTRIDE",54,"cd_SHADOWSTRIDE",{applicationDelay:.66,animationLock:xa,cooldown:30,maxCharges:2});hs("THE_BLACKEST_NIGHT",70,"cd_THE_BLACKEST_NIGHT",{rscType:"BLACKEST_NIGHT",manaCost:3e3,replaceIf:[{newSkill:"THE_BLACKEST_NIGHT_POP",condition:e=>e.hasResourceAvailable("BLACKEST_NIGHT")}],applicationDelay:.62,cooldown:15});An("THE_BLACKEST_NIGHT_POP",70,"cd_THE_BLACKEST_NIGHT_POP",{startOnHotbar:!1,highlightIf:e=>!0,applicationDelay:0,animationLock:bn,cooldown:1,onConfirm:e=>{e.hasResourceAvailable("DARK_ARTS")&&O.reportWarning(Fe.DarkArtsOvercap),e.gainStatus("DARK_ARTS"),e.tryConsumeResource("BLACKEST_NIGHT")}});hs("SHADOW_WALL",38,"cd_SHADOW_WALL",{rscType:"SHADOW_WALL",autoUpgrade:{otherSkill:"SHADOWED_VIGIL",trait:"SHADOW_WALL_MASTERY"},applicationDelay:.62,cooldown:120});hs("SHADOWED_VIGIL",92,"cd_SHADOW_WALL",{rscType:"SHADOWED_VIGIL",autoDowngrade:{otherSkill:"SHADOW_WALL",trait:"SHADOW_WALL_MASTERY"},applicationDelay:.62,cooldown:120,onApplication:e=>e.gainStatus("VIGILANT")});hs("DARK_MIND",45,"cd_DARK_MIND",{rscType:"DARK_MIND",applicationDelay:.62,cooldown:60});hs("LIVING_DEAD",50,"cd_LIVING_DEAD",{rscType:"LIVING_DEAD",applicationDelay:0,cooldown:300});hs("DARK_MISSIONARY",66,"cd_DARK_MISSIONARY",{rscType:"DARK_MISSIONARY",applicationDelay:.62,cooldown:90});hs("OBLATION",82,"cd_OBLATION",{rscType:"OBLATION",applicationDelay:0,maxCharges:2,cooldown:60});An("GRIT",10,"cd_GRIT",{applicationDelay:0,cooldown:2,validateAttempt:e=>!e.hasResourceAvailable("GRIT"),onConfirm:e=>e.resources.get("GRIT").gain(1),replaceIf:[{newSkill:"RELEASE_GRIT",condition:e=>e.hasResourceAvailable("GRIT")}],secondaryCooldown:{cdName:"cd_RELEASE_GRIT",cooldown:1,maxCharges:1}});An("RELEASE_GRIT",10,"cd_RELEASE_GRIT",{startOnHotbar:!1,replaceIf:[{newSkill:"GRIT",condition:e=>!e.hasResourceAvailable("GRIT")}],applicationDelay:0,cooldown:1,validateAttempt:e=>!e.hasResourceAvailable("GRIT"),onConfirm:e=>e.tryConsumeResource("GRIT"),secondaryCooldown:{cdName:"cd_GRIT",cooldown:2,maxCharges:1}});class RG extends Wt{jobSpecificOtherTargetedBuffViewProps(){return[]}jobSpecificSelfTargetedBuffViewProps(){return[]}jobSpecificResourceViewProps(){return[]}}class TG extends qt{constructor(t){super(t),this.registerRecurringEvents()}get statusPropsGenerator(){return new RG(this)}}class SG extends Wt{jobSpecificOtherTargetedBuffViewProps(){return[]}jobSpecificSelfTargetedBuffViewProps(){return[]}jobSpecificResourceViewProps(){return[]}}class gG extends qt{constructor(t){super(t),this.registerRecurringEvents()}get statusPropsGenerator(){return new SG(this)}}class _G extends Wt{jobSpecificOtherTargetedBuffViewProps(){return[]}jobSpecificSelfTargetedBuffViewProps(){return[]}jobSpecificResourceViewProps(){return[]}}class pG extends qt{constructor(t){super(t),this.registerRecurringEvents()}get statusPropsGenerator(){return new _G(this)}}class IG extends Wt{jobSpecificOtherTargetedBuffViewProps(){return[]}jobSpecificSelfTargetedBuffViewProps(){return[]}jobSpecificResourceViewProps(){return[]}}class NG extends qt{constructor(t){super(t),this.registerRecurringEvents()}get statusPropsGenerator(){return new IG(this)}}class CG extends Wt{jobSpecificOtherTargetedBuffViewProps(){return[]}jobSpecificSelfTargetedBuffViewProps(){return[]}jobSpecificResourceViewProps(){return[]}}class bG extends qt{constructor(t){super(t),this.registerRecurringEvents()}get statusPropsGenerator(){return new CG(this)}}class OG extends Wt{jobSpecificOtherTargetedBuffViewProps(){return[]}jobSpecificSelfTargetedBuffViewProps(){return[]}jobSpecificResourceViewProps(){return[]}}class DG extends qt{constructor(t){super(t),this.registerRecurringEvents()}get statusPropsGenerator(){return new OG(this)}}const Hb=["SONG_OF_TORMENT","NIGHTBLOOM","FEATHER_RAIN","MORTAL_FLAME","BREATH_OF_MAGIC","WANING_NOCTURNE","DIAMONDBACK","BRUSH_WITH_DEATH"],yG=Object.keys(bR).filter(e=>!Hb.includes(e));Object.keys(bR).forEach(e=>Ua(e,`BLU/${Xe[e].name}.png`));class vG extends Wt{jobSpecificOtherTargetedBuffViewProps(){return[...Hb.map(t=>this.makeCommonTimer(t,!1))]}jobSpecificSelfTargetedBuffViewProps(){return yG.map(t=>this.makeCommonTimer(t))}jobSpecificResourceViewProps(t){return[]}}const ba=(e,t,n)=>{$e("BLU",e,t,n??{})};ba("NIGHTBLOOM",1,{timeout:60});ba("SONG_OF_TORMENT",1,{timeout:30});ba("FEATHER_RAIN",1,{timeout:6});ba("WAXING_NOCTURNE",1,{timeout:15});ba("WANING_NOCTURNE",1,{timeout:15});ba("DIAMONDBACK",1,{timeout:10});ba("BRISTLE",1,{timeout:30});ba("WHISTLE",1,{timeout:30});ba("TINGLE",1,{timeout:15});ba("COLD_FOG",1,{timeout:5});ba("TOUCH_OF_FROST",1,{timeout:15});ba("PHANTOM_FLURRY",1,{timeout:5});ba("APOKALYPSIS",1,{timeout:10});ba("WINGED_REPROBATION",4);ba("WINGED_REDEMPTION",1,{timeout:10});ba("BREATH_OF_MAGIC",1,{timeout:60});ba("MORTAL_FLAME",1,{timeout:900});ba("SURPANAKHAS_FURY",4,{timeout:3});ba("BRUSH_WITH_DEATH",1,{timeout:600});class MG extends qt{constructor(t){super(t),this.cooldowns.set(new Ke("cd_SWIFTCAST",60,1,1)),this.registerRecurringEvents([{groupedEffects:[{effectName:"NIGHTBLOOM",appliedBy:["NIGHTBLOOM"]},{effectName:"SONG_OF_TORMENT",appliedBy:["SONG_OF_TORMENT"]}]},{groupedEffects:[{effectName:"FEATHER_RAIN",appliedBy:["FEATHER_RAIN"]}]},{groupedEffects:[{effectName:"BREATH_OF_MAGIC",appliedBy:["BREATH_OF_MAGIC"]}]},{groupedEffects:[{effectName:"MORTAL_FLAME",appliedBy:["MORTAL_FLAME"]}]},{groupedEffects:[{effectName:"PHANTOM_FLURRY",appliedBy:["PHANTOM_FLURRY"],isGroundTargeted:!0,exclude:!0},{effectName:"APOKALYPSIS",appliedBy:["APOKALYPSIS"],isGroundTargeted:!0,exclude:!0}]}])}get statusPropsGenerator(){return new vG(this)}refreshBuff(t,n){this.addEvent(new Le("gain buff",n,()=>{this.resources.get(t).gain(1),this.enqueueResourceDrop(t)}))}jobSpecificRegisterRecurringEvents(){let t=()=>{this.handleDoTTick("PHANTOM_FLURRY"),this.getDisplayTime()>=0&&O.reportDotTick(this.time,"PHANTOM_FLURRY"),this.addEvent(new Le("kick tick",1,()=>{t()}))},n=()=>{this.handleDoTTick("APOKALYPSIS"),this.getDisplayTime()>=0&&O.reportDotTick(this.time,"APOKALYPSIS"),this.addEvent(new Le("Apokalypsis tick",1,()=>{n()}))},l=this.config.timeTillFirstManaTick+this.dotTickOffset;for(;l>1;)l--;this.addEvent(new Le("initial kick tick",l,t));let s=this.config.timeTillFirstManaTick+this.dotTickOffset;for(;s>1;)s--;this.addEvent(new Le("initial Apokalypsis tick",s,n))}cancelChanneledSkills(){this.tryConsumeResource("PHANTOM_FLURRY"),this.tryConsumeResource("APOKALYPSIS")}}const ST=e=>e.hasResourceAvailable("WANING_NOCTURNE")||e.hasResourceAvailable("DIAMONDBACK"),LG=e=>e.hasResourceAvailable("PHANTOM_FLURRY"),HG={newSkill:"END_PHANTOM_FLURRY",condition:e=>LG(e)},jt=(e,t,n)=>{const l=n.basePotency??Number,s=n.aspect??ge.Other,c=n.baseCastTime??0;n.baseRecastTime;const d=c>0?lt(E=>E.tryConsumeResource("SWIFTCAST"),n.onConfirm??ze):n.onConfirm,f=n.jobPotencyModifiers??(E=>[]);return Fi("BLU",e,t,{...n,aspect:s,castTime:E=>E.config.adjustedCastTime(c),potency:n.basePotency,validateAttempt:E=>{var A;return!ST(E)&&(((A=n.validateAttempt)==null?void 0:A.call(n,E))??!0)},jobPotencyModifiers:E=>{const A=f(E);return E.hasResourceAvailable("WAXING_NOCTURNE")&&A.push(ue.MoonFlute),l!==0&&E.hasResourceAvailable("BRISTLE")&&A.push(ue.Bristle)&&E.tryConsumeResource("BRISTLE"),s===ge.Physical&&E.hasResourceAvailable("WHISTLE")&&A.push(ue.Whistle)&&E.tryConsumeResource("WHISTLE"),s===ge.Physical&&e!=="TRIPLE_TRIDENT"&&E.hasResourceAvailable("TINGLE")&&A.push(ue.TingleA)&&E.tryConsumeResource("TINGLE"),e==="TRIPLE_TRIDENT"&&E.hasResourceAvailable("TINGLE")&&A.push(ue.TingleB)&&E.tryConsumeResource("TINGLE"),e==="CONVICTION_MARCATO"&&E.hasResourceAvailable("WINGED_REDEMPTION")&&A.push(ue.WingedRedemption)&&E.tryConsumeResource("WINGED_REDEMPTION"),e==="WINGED_REPROBATION"&&E.resources.get("WINGED_REPROBATION").availableAmount()===3&&A.push(ue.WingedReprobation),A},isInstantFn:E=>E.hasResourceAvailable("SWIFTCAST")||c===0,onConfirm:d})},mn=(e,t,n,l)=>Rt("BLU",e,t,n,{jobPotencyModifiers:s=>{const c=[];return s.hasResourceAvailable("WAXING_NOCTURNE")&&c.push(ue.MoonFlute),c},validateAttempt:s=>{var c;return!ST(s)&&(((c=l.validateAttempt)==null?void 0:c.call(l,s))??!0)},...l});jt("SONIC_BOOM",1,{basePotency:210,baseCastTime:1,manaCost:200,applicationDelay:.5});jt("SHARPENED_KNIFE",1,{aspect:ge.Physical,basePotency:220,baseCastTime:1,manaCost:200,applicationDelay:.5});jt("GOBLIN_PUNCH",1,{aspect:ge.Physical,basePotency:220,baseCastTime:0,manaCost:200,applicationDelay:.5});jt("REVENGE_BLAST",1,{aspect:ge.Physical,basePotency:500,baseCastTime:2,manaCost:200,applicationDelay:.5});jt("WILD_RAGE",1,{aspect:ge.Physical,basePotency:500,baseCastTime:5,manaCost:0,applicationDelay:.5});jt("CONVICTION_MARCATO",1,{basePotency:220,baseCastTime:2,manaCost:200,applicationDelay:.5});jt("WATER_CANNON",1,{basePotency:200,baseCastTime:2,manaCost:200,applicationDelay:.5});jt("HYDRO_PULL",1,{basePotency:220,baseCastTime:2,manaCost:200,applicationDelay:.5});jt("THE_ROSE_OF_DESTRUCTION",1,{basePotency:400,baseCastTime:2,manaCost:300,applicationDelay:.5,secondaryCooldown:{cdName:"cd_THE_ROSE_OF_DESTRUCTION",cooldown:30,maxCharges:1}});jt("MOON_FLUTE",1,{baseCastTime:2,manaCost:500,applicationDelay:.6,onConfirm:e=>{e.hasResourceAvailable("WAXING_NOCTURNE")||(e.refreshBuff("WAXING_NOCTURNE",.6),e.addEvent(new Le("Waxing_Nocturne ended",15.6,()=>{e.hasResourceAvailable("DIAMONDBACK")||e.refreshBuff("WANING_NOCTURNE",0)})))}});jt("DIAMONDBACK",1,{baseCastTime:2,manaCost:3e3,applicationDelay:.6,onConfirm:e=>{e.hasResourceAvailable("WAXING_NOCTURNE")&&(e.tryConsumeResource("WAXING_NOCTURNE"),e.refreshBuff("WANING_NOCTURNE",0)),e.refreshBuff("DIAMONDBACK",.6)}});jt("MATRA_MAGIC",1,{basePotency:800,baseCastTime:2,manaCost:200,applicationDelay:.5,secondaryCooldown:{cdName:"cd_MATRA_MAGIC",cooldown:120,maxCharges:1}});jt("SONG_OF_TORMENT",1,{basePotency:50,baseCastTime:2,manaCost:400,applicationDelay:.5,onConfirm:(e,t)=>{const n=[];e.hasResourceAvailable("WAXING_NOCTURNE")&&n.push(ue.MoonFlute),e.hasResourceAvailable("BRISTLE")&&n.push(ue.Bristle),e.addDoTPotencies({node:t,effectName:"SONG_OF_TORMENT",skillName:"SONG_OF_TORMENT",tickPotency:50,speedStat:"sps",modifiers:n})},onApplication:(e,t)=>{e.applyDoT("SONG_OF_TORMENT",t)}});jt("BREATH_OF_MAGIC",1,{basePotency:0,baseCastTime:2,manaCost:300,applicationDelay:.5,onConfirm:(e,t)=>{const n=[];e.hasResourceAvailable("WAXING_NOCTURNE")&&n.push(ue.MoonFlute),e.hasResourceAvailable("BRISTLE")&&n.push(ue.Bristle),e.tryConsumeResource("BRISTLE"),e.addDoTPotencies({node:t,effectName:"BREATH_OF_MAGIC",skillName:"BREATH_OF_MAGIC",tickPotency:120,speedStat:"sps",modifiers:n})},onApplication:(e,t)=>{e.applyDoT("BREATH_OF_MAGIC",t)}});jt("MORTAL_FLAME",1,{basePotency:0,baseCastTime:2,manaCost:500,applicationDelay:.5,onConfirm:(e,t)=>{const n=[];e.hasResourceAvailable("WAXING_NOCTURNE")&&n.push(ue.MoonFlute),e.hasResourceAvailable("BRISTLE")&&n.push(ue.Bristle),e.tryConsumeResource("BRISTLE"),e.addDoTPotencies({node:t,effectName:"MORTAL_FLAME",skillName:"MORTAL_FLAME",tickPotency:40,speedStat:"sps",modifiers:n})},onApplication:(e,t)=>{e.applyDoT("MORTAL_FLAME",t)}});jt("WHISTLE",1,{baseCastTime:1,manaCost:200,applicationDelay:0,onConfirm:e=>{e.tryConsumeResource("BRISTLE"),e.refreshBuff("WHISTLE",0)}});jt("BRISTLE",1,{baseCastTime:1,manaCost:200,applicationDelay:0,onConfirm:e=>{e.tryConsumeResource("WHISTLE"),e.refreshBuff("BRISTLE",0)}});jt("FINAL_STING",1,{basePotency:2e3,baseCastTime:2,manaCost:0,applicationDelay:.5,validateAttempt:e=>!e.hasResourceAvailable("BRUSH_WITH_DEATH"),onConfirm:e=>{e.refreshBuff("BRUSH_WITH_DEATH",0)}});jt("TINGLE",1,{basePotency:100,baseCastTime:2,manaCost:200,applicationDelay:.5,onConfirm:e=>{e.refreshBuff("TINGLE",0)}});jt("TRIPLE_TRIDENT",1,{aspect:ge.Physical,basePotency:450,baseCastTime:2,manaCost:300,applicationDelay:.5,secondaryCooldown:{cdName:"cd_TRIPLE_TRIDENT",cooldown:90,maxCharges:1}});const xG=e=>e.hasResourceAvailable("COLD_FOG"),UG=e=>e.hasResourceAvailable("TOUCH_OF_FROST"),kG=[{newSkill:"POP_COLD_FOG",condition:e=>xG(e)},{newSkill:"WHITE_DEATH",condition:e=>UG(e)}];jt("COLD_FOG",1,{replaceIf:kG,baseCastTime:2,cooldown:90,manaCost:300,applicationDelay:.5,secondaryCooldown:{cdName:"cd_COLD_FOG",cooldown:90,maxCharges:1},onConfirm:e=>{e.refreshBuff("COLD_FOG",0)}});jt("WHITE_DEATH",1,{startOnHotbar:!1,basePotency:400,baseCastTime:0,manaCost:0,applicationDelay:.5,validateAttempt:e=>!ST(e)&&e.hasResourceAvailable("TOUCH_OF_FROST")});mn("POP_COLD_FOG",1,"cd_COLD_FOG_POP",{startOnHotbar:!1,applicationDelay:0,animationLock:bn,cooldown:1,validateAttempt:e=>e.hasResourceAvailable("COLD_FOG"),onConfirm:e=>{e.tryConsumeResource("COLD_FOG"),e.refreshBuff("TOUCH_OF_FROST",0)}});jt("END_PHANTOM_FLURRY",1,{startOnHotbar:!1,basePotency:600,baseCastTime:0,manaCost:0,applicationDelay:.5});jt("WINGED_REPROBATION",1,{aspect:ge.Physical,basePotency:300,baseCastTime:1,manaCost:200,applicationDelay:.5,secondaryCooldown:{cdName:"cd_WINGED_REPROBATION",cooldown:90,maxCharges:1},onConfirm:e=>{e.resources.get("WINGED_REPROBATION").gain(1),e.resources.get("WINGED_REPROBATION").availableAmount()<=3&&e.cooldowns.get("cd_WINGED_REPROBATION").restore(90),e.resources.get("WINGED_REPROBATION").availableAmount()===4&&(e.tryConsumeResource("WINGED_REPROBATION",!0),e.refreshBuff("WINGED_REDEMPTION",0))}});mn("ERUPTION",1,"cd_ERUPTION",{cooldown:30,manaCost:300,potency:300,applicationDelay:.62});mn("FEATHER_RAIN",1,"cd_ERUPTION",{cooldown:30,manaCost:300,potency:220,applicationDelay:.62,onConfirm:(e,t)=>{const n=[];e.hasResourceAvailable("WAXING_NOCTURNE")&&n.push(ue.MoonFlute),e.addDoTPotencies({node:t,effectName:"FEATHER_RAIN",skillName:"FEATHER_RAIN",tickPotency:40,speedStat:"sps",modifiers:n}),e.applyDoT("FEATHER_RAIN",t)}});mn("MOUNTAIN_BUSTER",1,"cd_SHOCK_STRIKE",{cooldown:60,manaCost:400,potency:400,applicationDelay:.62});mn("SHOCK_STRIKE",1,"cd_SHOCK_STRIKE",{cooldown:60,manaCost:400,potency:400,applicationDelay:.62});mn("GLASS_DANCE",1,"cd_GLASS_DANCE",{cooldown:90,manaCost:500,potency:350,applicationDelay:.62});mn("QUASAR",1,"cd_QUASAR",{cooldown:60,manaCost:300,potency:300,applicationDelay:.62});mn("J_KICK",1,"cd_QUASAR",{cooldown:60,manaCost:300,potency:300,applicationDelay:1,animationLock:1});mn("BOTH_ENDS",1,"cd_NIGHTBLOOM",{cooldown:120,manaCost:300,potency:600,applicationDelay:.62});mn("SEA_SHANTY",1,"cd_SEA_SHANTY",{cooldown:120,manaCost:300,potency:500,applicationDelay:.62});mn("BEING_MORTAL",1,"cd_BEING_MORTAL",{cooldown:120,manaCost:300,potency:800,applicationDelay:.62});mn("APOKALYPSIS",1,"cd_BEING_MORTAL",{cooldown:120,manaCost:300,potency:0,applicationDelay:1.38,animationLock:1.38,onConfirm:(e,t)=>{const n=[];e.hasResourceAvailable("WAXING_NOCTURNE")&&n.push(ue.MoonFlute),e.addDoTPotencies({node:t,effectName:"APOKALYPSIS",skillName:"APOKALYPSIS",tickPotency:100,tickFrequency:1,speedStat:"unscaled",modifiers:n})},onApplication:(e,t)=>{e.applyDoT("APOKALYPSIS",t)}});mn("NIGHTBLOOM",1,"cd_NIGHTBLOOM",{cooldown:120,manaCost:300,potency:400,applicationDelay:.62,onConfirm:(e,t)=>{const n=[];e.hasResourceAvailable("WAXING_NOCTURNE")&&n.push(ue.MoonFlute),e.addDoTPotencies({node:t,effectName:"NIGHTBLOOM",skillName:"NIGHTBLOOM",tickPotency:75,speedStat:"sps",modifiers:n})},onApplication:(e,t)=>{e.applyDoT("NIGHTBLOOM",t)}});mn("PHANTOM_FLURRY",1,"cd_PHANTOM_FLURRY",{replaceIf:[HG],cooldown:120,manaCost:300,potency:0,applicationDelay:.5,onConfirm:(e,t)=>{const n=[];e.hasResourceAvailable("WAXING_NOCTURNE")&&n.push(ue.MoonFlute),e.addDoTPotencies({node:t,effectName:"PHANTOM_FLURRY",skillName:"PHANTOM_FLURRY",tickPotency:200,tickFrequency:1,speedStat:"unscaled",modifiers:n})},onApplication:(e,t)=>{e.applyDoT("PHANTOM_FLURRY",t)}});mn("SURPANAKHA",1,"cd_SURPANAKHA_LOCKOUT",{cooldown:1,manaCost:200,potency:e=>200*(1+.5*e.resources.get("SURPANAKHAS_FURY").availableAmount()),applicationDelay:.62,onApplication:e=>{e.resources.get("SURPANAKHAS_FURY").availableAmount()===3?e.tryConsumeResource("SURPANAKHAS_FURY",!0):e.refreshBuff("SURPANAKHAS_FURY",0)},secondaryCooldown:{cdName:"cd_SURPANAKHA",cooldown:1,maxCharges:4}});function Xd(e){switch(e.job){case"PLD":return new rG(e);case"WAR":return new lG(e);case"DRK":return new mG(e);case"GNB":return new iP(e);case"WHM":return new pG(e);case"SCH":return new gG(e);case"AST":return new TG(e);case"SGE":return new eG(e);case"MNK":return new bG(e);case"DRG":return new Vk(e);case"NIN":return new NG(e);case"SAM":return new wP(e);case"RPR":return new kP(e);case"VPR":return new DG(e);case"BRD":return new Uk(e);case"MCH":return new EP(e);case"DNC":return new Bk(e);case"BLM":return new vk(e);case"SMN":return new jP(e);case"RDM":return new xP(e);case"PCT":return new gP(e);case"BLU":return new MG(e)}return new qt(e)}const Du=e=>{e.job==="RDM"&&e.tryConsumeResource("DUALCAST")&&O.reportWarning(Fe.DualcastEaten)};Rt(dn,"INTERJECT",18,"cd_HEAD_GRAZE",{applicationDelay:0,cooldown:30,assetPath:"Role/Interject.png",startsAuto:!0});Rt(ho,"HEAD_GRAZE",24,"cd_HEAD_GRAZE",{applicationDelay:0,cooldown:30,assetPath:"Role/Head Graze.png"});dn.forEach(e=>{$e(e,"REPRISAL",1,{timeout:15})});je(dn,"REPRISAL",22,"cd_REPRISAL",{rscType:"REPRISAL",applicationDelay:.62,cooldown:60,duration:e=>e.hasTraitUnlocked("ENHANCED_REPRISAL")&&15||10,assetPath:"Role/Reprisal.png",startsAuto:!0});tn.forEach(e=>{$e(e,"FEINT",1,{timeout:15})});je(tn,"FEINT",22,"cd_FEINT",{rscType:"FEINT",applicationDelay:.537,cooldown:90,duration:e=>e.hasTraitUnlocked("ENHANCED_FEINT")&&15||10,assetPath:"Role/Feint.png"});[...Gr,...Kn].forEach(e=>{$e(e,"ADDLE",1,{timeout:15})});je([...Kn,...Gr],"ADDLE",8,"cd_ADDLE",{rscType:"ADDLE",applicationDelay:.621,cooldown:90,duration:e=>e.hasTraitUnlocked("ENHANCED_ADDLE")&&15||10,assetPath:"Role/Addle.png"});dn.forEach(e=>{$e(e,"RAMPART",1,{timeout:20})});je(dn,"RAMPART",8,"cd_RAMPART",{rscType:"RAMPART",applicationDelay:.62,cooldown:90,assetPath:"Role/Rampart.png"});tn.forEach(e=>{$e(e,"TRUE_NORTH",1,{timeout:10})});je(tn,"TRUE_NORTH",50,"cd_TRUE_NORTH",{rscType:"TRUE_NORTH",applicationDelay:0,cooldown:45,maxCharges:2,assetPath:"Role/True North.png"});[...Yn,...Kn,...Gr].forEach(e=>{$e(e,"SWIFTCAST",1,{timeout:10})});je([...Yn,...Kn,...Gr],"SWIFTCAST",18,"cd_SWIFTCAST",{rscType:"SWIFTCAST",applicationDelay:0,cooldown:40,assetPath:"Role/Swiftcast.png"});[...Yn,...Kn,...Gr].forEach(e=>{$e(e,"LUCID_DREAMING",1,{timeout:21})});je([...Yn,...Kn,...Gr],"LUCID_DREAMING",14,"cd_LUCID_DREAMING",{rscType:"LUCID_DREAMING",applicationDelay:.623,cooldown:60,assetPath:"Role/Lucid Dreaming.png",onApplication:(e,t)=>{let n=e.resources.get("LUCID_DREAMING");n.node=t,n.tickCount=0;let l=e.findNextQueuedEventByTag(sn.LucidTick);l&&l.addTag(sn.ManaGain)}});[...dn,...tn,...ho].forEach(e=>{$e(e,"ARMS_LENGTH",1,{timeout:6.5})});je([...dn,...tn,...ho],"ARMS_LENGTH",32,"cd_ARMS_LENGTH",{rscType:"ARMS_LENGTH",applicationDelay:.62,cooldown:120,assetPath:"Role/Arms Length.png"});[...Yn,...Kn].forEach(e=>{$e(e,"SURECAST",1,{timeout:6.5})});je([...Yn,...Kn],"SURECAST",44,"cd_SURECAST",{rscType:"SURECAST",applicationDelay:0,cooldown:120,assetPath:"Role/Surecast.png"});tn.forEach(e=>{$e(e,"BLOODBATH",1,{timeout:20})});je(tn,"BLOODBATH",8,"cd_BLOODBATH",{rscType:"BLOODBATH",applicationDelay:.625,cooldown:90,assetPath:"Role/Bloodbath.png"});Rt([...tn,...ho],"SECOND_WIND",12,"cd_SECOND_WIND",{healingPotency:600,applicationDelay:.625,cooldown:120,assetPath:"Role/Second Wind.png"});Rt(dn,"PROVOKE",15,"cd_PROVOKE",{applicationDelay:.62,cooldown:30,assetPath:"Role/Provoke.png",drawsAggro:!0,startsAuto:!0});Rt(dn,"SHIRK",48,"cd_SHIRK",{applicationDelay:0,cooldown:120,assetPath:"Role/Shirk.png"});Rt(dn,"LOW_BLOW",25,"cd_LOW_BLOW",{applicationDelay:.62,cooldown:25,assetPath:"Role/Low Blow.png",startsAuto:!0});Fi(Yn,"ESUNA",10,{manaCost:400,castTime:0,applicationDelay:1.14,assetPath:"Role/Esuna.png"});Rt(Yn,"RESCUE",48,"cd_RESCUE",{applicationDelay:0,cooldown:120,assetPath:"Role/Rescue.png"});Rt(tn,"LEG_SWEEP",10,"cd_LEG_SWEEP",{applicationDelay:.625,cooldown:40,assetPath:"Role/Leg Sweep.png"});je(oo,"TINCTURE",1,"cd_TINCTURE",{rscType:"TINCTURE",applicationDelay:.64,cooldown:270,assetPath:"General/Tincture.png",onConfirm:Du});je(oo,"SPRINT",1,"cd_SPRINT",{rscType:"SPRINT",applicationDelay:.133,cooldown:60,assetPath:"General/Sprint.png",onConfirm:Du});dn.forEach(e=>{$e(e,"SHIELD_WALL",1,{timeout:10}),$e(e,"STRONGHOLD",1,{timeout:12})});const gT=e=>Object.keys(LN).forEach(t=>{t!=="UNKNOWN"&&e.tryConsumeResource(t)});fn(dn,"SHIELD_WALL","cd_LIMIT_BREAK_1",{tier:"1",applicationDelay:.45,animationLock:1.93,onApplication:e=>{gT(e),e.gainStatus("SHIELD_WALL")}});fn(dn,"STRONGHOLD","cd_LIMIT_BREAK_2",{tier:"2",applicationDelay:.89,animationLock:3.86,onApplication:e=>{gT(e),e.gainStatus("STRONGHOLD")}});dn.forEach(e=>{const t=Ot[e].limitBreak??"UNKNOWN",n=Ot[e].limitBreakBuff??"UNKNOWN";$e(e,n,1,{timeout:8}),fn(e,t,"cd_LIMIT_BREAK_3",{tier:"3",applicationDelay:1.34,animationLock:3.86,onApplication:l=>{gT(l),l.gainStatus(n)}})});fn(Yn,"HEALING_WIND","cd_LIMIT_BREAK_1",{tier:"1",castTime:2,healingPotency:25,applicationDelay:.76,animationLock:2.1});fn(Yn,"BREATH_OF_THE_EARTH","cd_LIMIT_BREAK_2",{tier:"2",castTime:2,healingPotency:50,applicationDelay:.8,animationLock:5.13});Yn.forEach(e=>{const t=Ot[e].limitBreak??"UNKNOWN";fn(e,t,"cd_LIMIT_BREAK_3",{tier:"3",castTime:2,healingPotency:100,applicationDelay:.8,animationLock:8.1})});fn(tn,"BRAVER","cd_LIMIT_BREAK_1",{tier:"1",castTime:2,applicationDelay:2.23,animationLock:3.86,potency:1e3});fn(tn,"BLADEDANCE","cd_LIMIT_BREAK_2",{tier:"2",castTime:3,applicationDelay:3.28,animationLock:3.86,potency:2200});tn.forEach(e=>{const t=Ot[e].limitBreak??"UNKNOWN";fn(e,t,"cd_LIMIT_BREAK_3",{tier:"3",castTime:4.5,applicationDelay:2.26,animationLock:3.7,potency:3500})});fn(ho,"BIGSHOT","cd_LIMIT_BREAK_1",{tier:"1",castTime:2,applicationDelay:2.23,animationLock:3.1,potency:540});fn(ho,"DESPERADO","cd_LIMIT_BREAK_2",{tier:"2",castTime:3,applicationDelay:2.49,animationLock:3.1,potency:1170});ho.forEach(e=>{const t=Ot[e].limitBreak??"UNKNOWN";fn(e,t,"cd_LIMIT_BREAK_3",{tier:"3",castTime:4.5,applicationDelay:3.16,animationLock:3.7,potency:1890})});fn(Kn,"SKYSHARD","cd_LIMIT_BREAK_1",{tier:"1",castTime:2,applicationDelay:1.64,animationLock:3.1,onConfirm:Du,potency:600});fn(Kn,"STARSTORM","cd_LIMIT_BREAK_2",{tier:"2",castTime:3,applicationDelay:3.75,animationLock:5.1,onConfirm:Du,potency:1300});Kn.forEach(e=>{const t=Ot[e].limitBreak??"UNKNOWN";fn(e,t,"cd_LIMIT_BREAK_3",{tier:"3",castTime:4.5,applicationDelay:4.5,animationLock:8.1,onConfirm:e==="RDM"?Du:void 0,potency:2100})});const tN="stdtick";var xi,Yo,br,ii,Ko,pu,$l,Or,Iu,Vo,Wo,qo,Ma,Dr,Si,Jl,ye,Kl,xb,Vl,Jc,eR,Ja,mf,Ub,tR,Go,aR,kb,Pb;class PG{constructor(){Pe(this,ye);j(this,"timeScale");j(this,"shouldLoop");j(this,"tickMode");j(this,"timeline");Pe(this,xi);j(this,"gameConfig");j(this,"record");j(this,"imageExportConfig");j(this,"timelineDrawOptions",SC);j(this,"game");Pe(this,Yo,0);Pe(this,br,!0);Pe(this,ii);Pe(this,Ko,[]);Pe(this,pu,[]);Pe(this,$l,[]);Pe(this,Or,new Map);Pe(this,Iu,new Map);Pe(this,Vo,new Map);Pe(this,Wo,new Map);j(this,"savedHistoricalGame");j(this,"savedHistoricalRecord");Pe(this,qo,!1);Pe(this,Ma,!1);Pe(this,Dr,!1);Pe(this,Si,!1);j(this,"displayingUpToDateGameState",!0);Pe(this,Jl,0);j(this,"lastSkillTime",0);this.timeScale=1,this.shouldLoop=!1,this.tickMode=wn.RealTimeAutoPause,this.timeline=new sU,this.timeline.reset(),Me(this,xi,new $U),this.gameConfig=new ul(sl),this.game=Xd(this.gameConfig),this.record=new ol,this.record.config=this.gameConfig,this.imageExportConfig={wrapThresholdSeconds:JSON.parse(ha("img: wrapThresholdSeconds")??"0"),includeTime:JSON.parse(ha("img: includeTime")??"true")},Me(this,ii,-this.gameConfig.countdown),this.savedHistoricalGame=this.game,this.savedHistoricalRecord=this.record,_e(this,ye,Vl).call(this)}updateStats(){_e(this,ye,Jc).call(this),_e(this,ye,eR).call(this)}updateAllDisplay(t=this.game){Vm(t.config.serialized()),this.updateStatusDisplay(t),this.updateSkillButtons(t),this.updateTimelineDisplay(),this.updateStats(),Vf(this.getActiveJob())}checkRecordValidity(t,n,l=!1){console.assert(t.config!==void 0);let s={isValid:!0,invalidActions:[],skillUseTimes:[],straightenedIfValid:void 0};if(n===void 0)return console.log("no edit happened"),s;_e(this,ye,Vl).call(this,!1);let c=t.config??this.gameConfig;this.game=Xd(c),this.record=new ol,this.record.config=c,Me(this,ii,-c.countdown),_e(this,ye,Kl).call(this,this.record.config);let d=_e(this,ye,Go).call(this,{line:t,replayMode:Ia.Edited,firstEditedNodeIndex:n,selectionStart:t.getFirstSelection(),selectionEnd:t.getLastSelection()});return this.record.selectionStartIndex=t.selectionStartIndex,this.record.selectionStartIndex=t.selectionStartIndex,s.isValid=d.invalidActions.length===0,s.invalidActions=d.invalidActions,s.skillUseTimes=d.skillUseTimes,d.success&&(s.straightenedIfValid=this.record),this.displayingUpToDateGameState=l,s}displayHistoricalState(t,n){let l=t+this.gameConfig.countdown;const s=this.record.getFirstSelection()!==void 0;_e(this,ye,xb).call(this,()=>{let c=this.record;this.game=Xd(this.gameConfig),this.record=new ol,this.record.config=this.gameConfig,Me(this,ii,-this.gameConfig.countdown),_e(this,ye,Kl).call(this,this.record.config),_e(this,ye,Go).call(this,{line:c,replayMode:Ia.Exact,maxReplayTime:l,cutoffIndex:n}),this.timeline.updateElem({type:ut.s_ViewOnlyCursor,time:this.game.time,displayTime:this.game.getDisplayTime(),enabled:!0}),this.updateStatusDisplay(this.game),this.updateSkillButtons(this.game),ao(),_e(this,ye,Jc).call(this),this.timeline.drawElements()}),qf(!0),s&&_e(this,ye,Jc).call(this,!0),_e(this,ye,eR).call(this)}displayCurrentState(){this.displayingUpToDateGameState=!0,this.timeline.updateElem({type:ut.s_ViewOnlyCursor,enabled:!1,time:0,displayTime:0}),qf(!1),this.updateAllDisplay(this.game)}restart(){_e(this,ye,Vl).call(this),_e(this,ye,Kl).call(this,this.gameConfig)}getPresetLines(){return te(this,xi).getLinesForJob(this.getActiveJob())}serializedPresets(){return te(this,xi).serialized()}addSelectionToPreset(t="(untitled)"){console.assert(this.record.getFirstSelection());let n=this.record.getSelected();n.name=t,te(this,xi).addLine(n,this.getActiveJob())}appendFilePresets(t){te(this,xi).deserializeAndAppend(t)}loadBattleRecordFromFile(t){t.config===void 0&&(window.alert("Error loading record: saved record had no config object"),console.error(t)),t.config.procMode===void 0&&(t.config.rngProcs!==void 0?t.config.procMode=t.config.rngProcs?Kt.RNG:Kt.Never:t.config.procMode=Kt.RNG),t.config.fps===void 0&&(t.config.fps=sl.fps),t.config.gcdSkillCorrection===void 0&&(t.config.gcdSkillCorrection=sl.gcdSkillCorrection),t.config.level&&(t.config.level=parseInt(t.config.level)),t.config.skillSpeed===void 0&&(t.config.skillSpeed=At.getSubstatBase(t.config.level)),t.config.shellVersion===void 0&&(t.config.shellVersion=eo.Initial),t.config.job===void 0&&(t.config.job=LC(t.actions.flatMap(n=>n.skillName?[YN(n.skillName)]:[]))),tn.includes(t.config.job)||(t.config.initialResourceOverrides=t.config.initialResourceOverrides.filter(n=>![Xe.FLANK_POSITIONAL.name,Xe.REAR_POSITIONAL.name].includes(n.type))),Wc(()=>{let n=new ul(t.config);this.gameConfig=n,this.record=new ol,this.record.config=n,_e(this,ye,Vl).call(this),_e(this,ye,Kl).call(this,this.gameConfig);let l=Lr.deserialize(t.actions),s=_e(this,ye,Go).call(this,{line:l,replayMode:Ia.Exact});if(!s.success){let c=`Error loading record- 
`;if(s.invalidActions.length>0){const d=s.invalidActions[0].node;if(d.info.type===Qe.Skill){const f=d.info.skillName?Sl(d.info.skillName):"(unknown)";c+=`Stopped here because the next action ${f} can't be added: `}else c+=`Stopped here because the next action ${d.info.type} can't be added: `}c+=s.invalidActions[0].reason,window.alert(c)}})}applyEditedRecord(){const t=this.record;this.record=new ol,this.record.config=t.config,_e(this,ye,Vl).call(this),_e(this,ye,Kl).call(this,this.gameConfig);let n=_e(this,ye,Go).call(this,{line:t,replayMode:Ia.Exact,removeTrailingIdleTime:!0});console.assert(n.success),t.selectionStartIndex!==void 0&&(this.record.selectSingle(t.selectionStartIndex),this.record.selectUntil(t.selectionEndIndex)),this.autoSave()}deleteSelectedSkill(){this.record.selectionStartIndex!==void 0&&(this.rewindUntilBefore(this.record.selectionStartIndex,!1),Jd(),this.displayCurrentState(),this.autoSave())}getTincturePotencyMultiplier(){return 1+te(this,Yo)*.01}setTinctureBuffPercentage(t){Me(this,Yo,t),this.displayCurrentState(),wi()}setUntargetableMask(t){Me(this,br,t),this.displayCurrentState(),wi()}getUntargetableMask(){return te(this,br)}getMaxTicks(t,n,l){let s=0;const c=[n];return l||c.push(tN),c.forEach(d=>{var f;(f=te(this,Or).get(d))==null||f.forEach(E=>{!Va(E-this.gameConfig.countdown)&&E<=t&&s++})}),s}getDotCoverageTimeFraction(t,n){return this.getOverTimeCoverageTimeFraction(t,n,te(this,Vo))}getHotCoverageTimeFraction(t,n){return this.getOverTimeCoverageTimeFraction(t,n,te(this,Wo))}getOverTimeCoverageTimeFraction(t,n,l){if(t<=ma.epsilon)return 0;const s=l.get(n);if(!s)return 0;let c=0;s.forEach(f=>{if(f.tStartDisplay<=t){let E=Math.max(0,f.tStartDisplay),A=f.tEndDisplay!==void 0&&f.tEndDisplay<=t?f.tEndDisplay:t;A=Math.max(0,A),c+=Hr(E,A)}});let d=Hr(0,t);return c/d}setTimelineOptions(t){this.timelineDrawOptions={...this.timelineDrawOptions,...t},this.updateTimelineDisplay()}getTimelineRenderingProps(){var s,c;let t=this.record.getFirstSelection()!=null&&this.record.getLastSelection()!=null,n=this.gameConfig.countdown,l=this.timeline.getAllSlotsTimeInfo();return l!==null&&(n=Math.max(n,l.countdown)),{timelineWidth:this.timeline.getCanvasWidth(),timelineHeight:this.timeline.getCanvasHeight(),scale:this.timeline.scale,countdown:n,tincturePotencyMultiplier:this.getTincturePotencyMultiplier(),untargetableMask:te(this,br),sharedElements:this.timeline.sharedElements,slots:this.timeline.slots,activeSlotIndex:this.timeline.activeSlotIndex,allMarkers:this.timeline.getAllMarkers(),untargetableMarkers:this.timeline.getUntargetableMarkers(),buffMarkers:this.timeline.getBuffMarkers(),showSelection:t,selectionStartDisplayTime:(((s=this.record.getFirstSelection())==null?void 0:s.tmp_startLockTime)??0)-this.gameConfig.countdown,selectionEndDisplayTime:(((c=this.record.getLastSelection())==null?void 0:c.tmp_endLockTime)??0)-this.gameConfig.countdown,drawOptions:this.timelineDrawOptions}}reportWarning(t){te(this,Ma)||this.timeline.addElement({type:ut.WarningMark,warningType:t,time:this.game.time,displayTime:this.game.getDisplayTime()})}resolvePotency(t){this.resolveAnyPotency(t,ut.DamageMark,te(this,Ko)),_e(this,ye,Jc).call(this)}resolveHealingPotency(t){this.resolveAnyPotency(t,ut.HealingMark,te(this,pu))}resolveOverTimePotency(t,n){n==="damage"?this.resolveAnyPotency(t,ut.DamageMark,te(this,Ko)):this.resolveAnyPotency(t,ut.HealingMark,te(this,pu))}resolveAnyPotency(t,n,l){t.resolve(this.game.getDisplayTime()),Me(this,ii,this.game.time),t.base===0&&(n=ut.AggroMark);let s=!1;if(t.modifiers.forEach(c=>{c.source===G.POT&&(s=!0)}),!te(this,Ma)){let c="{skill}@"+t.sourceTime.toFixed(3);t.description.length>0&&(c+=" "+t.description);const d={potency:t,sourceDesc:c,sourceSkill:t.sourceSkill};let f=this.timeline.tryGetElement(this.game.time,n);f?(f.potencyInfos.push(d),s&&!f.buffs.includes("TINCTURE")&&f.buffs.push("TINCTURE")):this.timeline.addElement({type:n,potencyInfos:[d],buffs:s?["TINCTURE"]:[],time:this.game.time,displayTime:this.game.getDisplayTime()}),l.push({time:this.game.getDisplayTime(),source:t.sourceSkill+"@"+t.sourceTime,potency:t.getAmount({tincturePotencyMultiplier:1,includePartyBuffs:!0,includeSplash:!0}),buffs:s?["TINCTURE"]:[]})}}reportLucidTick(t,n){te(this,Ma)||this.timeline.addElement({type:ut.LucidMark,time:t,displayTime:this.game.getDisplayTime(),sourceDesc:n})}reportManaTick(t,n){te(this,Ma)||this.timeline.addElement({type:ut.MPTickMark,time:t,displayTime:this.game.getDisplayTime(),sourceDesc:n})}reportMeditateTick(t,n){te(this,Ma)||this.timeline.addElement({type:ut.MeditateTickMark,time:t,displayTime:this.game.getDisplayTime(),sourceDesc:n})}reportAutoTick(t,n){te(this,Ma)||this.timeline.addElement({type:ut.AutoTickMark,time:t,displayTime:this.game.getDisplayTime(),sourceDesc:n})}reportDotTick(t,n){this.reportOverTimeTick(t,te(this,Or),n)}reportHotTick(t,n){this.reportOverTimeTick(t,te(this,Iu),n)}reportOverTimeTick(t,n,l){if(!te(this,Ma)){const s=l??tN;let c=n.get(s);c||(c=[],n.set(s,c)),c.push(t),this.updateStats()}}reportDotStart(t,n){this.reportOverTimeStart(t,n,"damage")}reportHotStart(t,n){this.reportOverTimeStart(t,n,"healing")}reportOverTimeStart(t,n,l){if(!te(this,Ma)){const s=l==="damage"?te(this,Vo):te(this,Wo);let c=s.get(n);c||(c=[],s.set(n,c));let d=c.length;console.assert(d===0||c[d-1].tEndDisplay!==void 0),c.push({tStartDisplay:t,tEndDisplay:void 0})}}reportDotDrop(t,n){this.reportOverTimeDrop(t,n,"damage")}reportHotDrop(t,n){this.reportOverTimeDrop(t,n,"healing")}reportOverTimeDrop(t,n,l){if(!te(this,Ma)){const c=(l==="damage"?te(this,Vo):te(this,Wo)).get(n);if(console.assert(c,`Reported dropping ${n} when no coverage was detected`),!c)return;let d=c.length;console.assert(d>0&&c[d-1].tEndDisplay===void 0),c[d-1].tEndDisplay=t}}updateStatusDisplay(t){let n=t.resources.get("NOT_CASTER_TAXED"),l=t.resources.get("NOT_ANIMATION_LOCKED"),s=t.cooldowns.get("cd_GCD"),c={gcdReady:s.stacksAvailable()>0,gcd:s.currentStackCd(),timeTillGCDReady:t.cooldowns.timeTillAnyStackAvailable("cd_GCD"),castLocked:t.resources.timeTillReady("NOT_CASTER_TAXED")>0,castLockTotalDuration:n.pendingChange?n.pendingChange.delay:0,castLockCountdown:t.resources.timeTillReady("NOT_CASTER_TAXED"),animLocked:t.resources.timeTillReady("NOT_ANIMATION_LOCKED")>0,animLockTotalDuration:l.pendingChange?l.pendingChange.delay:0,animLockCountdown:t.resources.timeTillReady("NOT_ANIMATION_LOCKED"),canMove:t.resources.get("MOVEMENT").available(1)};const d=t.statusPropsGenerator;NC(f=>({time:t.getDisplayTime(),resources:d.getAllResourceViewProps(f),resourceLocks:c,enemyBuffs:d.getAllOtherTargetedBuffViewProps(),selfBuffs:d.getAllSelfTargetedBuffViewProps(),level:t.config.level}),d.statusLayoutFn)}updateTimelineDisplay(){this.timeline.setTimeSegment(0,this.game.time),ao(),cu(),te(this,Ma)||this.timeline.updateElem({type:ut.s_Cursor,time:this.game.time,displayTime:this.game.getDisplayTime()}),this.timeline.drawElements()}updateSkillButtons(t){F0(this.game.displayedSkills.getCurrentSkillNames(this.game).map(n=>t.getSkillAvailabilityStatus(n)))}setTimeControlSettings(t){this.timeScale=t.timeScale,this.tickMode=t.tickMode,this.shouldLoop=!1}setConfigAndRestart(t){const n=this.gameConfig.job;Wc(()=>{this.gameConfig=new ul({...t,shellVersion:Qf.version}),this.record=new ol,this.record.config=this.gameConfig,_e(this,ye,Vl).call(this),_e(this,ye,Kl).call(this,this.gameConfig),n!==t.job&&Vf(t.job)}),this.autoSave()}getDisplayedGame(){return this.displayingUpToDateGameState?this.game:this.savedHistoricalGame}getActiveJob(){return this.game.job}getSkillInfo(t){return t.game.getSkillAvailabilityStatus(t.skillName)}autoSave(){let t=this.record.serialized();this.timeline.saveCurrentSlot(t,this.gameConfig.countdown,this.game.time)}tryAutoLoad(){let t=ha("gameRecord");t!==null&&(console.log("migrating existing record to slot 0"),aa("gameRecord0",t),bm("gameRecord"));for(let l=0;l<fl;l++)this.timeline.loadSlot(l);this.timeline.slots.length>0||this.timeline.addSlot(),this.setActiveSlot(0)}setActiveSlot(t){_e(this,ye,mf).call(this,{shouldLoop:!1}),Wc(()=>{this.autoSave(),this.record.unselectAll(),console.assert(this.timeline.loadSlot(t))}),this.displayCurrentState()}cloneActiveSlot(){if(this.timeline.activeSlotIndex<0||this.timeline.activeSlotIndex>=this.timeline.slots.length){console.error("tried to clone slot with invalid activeSlotIndex "+this.timeline.activeSlotIndex);return}_e(this,ye,mf).call(this,{shouldLoop:!1}),Wc(()=>{const t=this.record.serialized();this.timeline.addSlot(),this.loadBattleRecordFromFile(t),this.autoSave(),this.timeline.loadSlot(this.timeline.slots.length-1)}),this.displayCurrentState()}getDamageLogCsv(){let t=te(this,Ko).map(n=>{let l=!1;n.buffs.forEach(c=>{c==="TINCTURE"&&(l=!0)});let s=n.potency;return l&&(s*=this.getTincturePotencyMultiplier()),[n.time,n.source,s]});return[["time","damageSource","potency"]].concat(t)}getActionsLogCsv(){let t=te(this,$l).map(n=>[n.time,n.action,n.isGCD,n.castTime]);return[["time","action","isGCD","castTime"]].concat(t)}getAmaSimCsv(){const t=R=>R===si.TINCTURE.name?"Grade 3 Gemdraught":R.replace(" 2"," II").replace(" 3"," III").replace(" 4"," IV"),n=this.getActiveJob(),l=dn.includes(n)||tn.includes(n),s=this.timeline.getBuffMarkers().map(R=>{const T=new pf(R.description);let S=T.info.name;T.info.name===P.Card_TheSpear?S="The Spear":T.info.name===P.Card_TheBalance?S="The Balance":[P.RadiantFinale1,P.RadiantFinale2,P.RadiantFinale3].includes(T.info.name)&&(S="Radiant Finale");const g=T.info.name===P.Dokumori||T.info.name===P.ChainStratagem,I=()=>g?"Debuff Only":T.info.name===P.RadiantFinale1?'"1 Coda, Buff Only"':T.info.name===P.RadiantFinale2?'"2 Coda, Buff Only"':T.info.name===P.RadiantFinale3?'"3 Coda, Buff Only"':[P.ArmysPaeon,P.MagesBallad,P.WanderersMinuet,P.StandardFinish,P.TechnicalFinish].includes(T.info.name)?"Buff Only":T.info.name===P.Card_TheSpear?l?"Small":"Big":T.info.name===P.Card_TheBalance?l?"Big":"Small":"";return[R.time,S,T.info.job,I(),g?"Boss0":""]}),c=te(this,$l).filter(R=>!R.action.includes("Toggle buff")).map(R=>{let T="";if(R.isDamaging&&R.targetCount!==void 0){T='"';for(let S=0;S<R.targetCount;S++)S!==0&&(T+=", "),T+="Boss"+S.toString();T+='"'}return[R.time,t(R.action),"","",T]}),d=["use_strict_skill_naming = False"],f=!(l||ho.includes(n));f&&d.push("enable_autos = False");const E={job_class:n,det_stat:this.gameConfig.determination,crit_stat:this.gameConfig.criticalHit,dh_stat:this.gameConfig.directHit,speed_stat:f?this.gameConfig.spellSpeed:this.gameConfig.skillSpeed,version:Ly,level:this.gameConfig.level};d.push("stats = "+JSON.stringify(E));const A=this.timeline.getUntargetableMarkers().map(R=>`(${R.time}, ${R.time+R.duration}),`);return A.length>0&&d.push("downtime_windows = ("+A.join(" ")+")"),{meta:d,body:[["time","skill_name","job_class","skill_conditional","targets"]].concat(s,c)}}tryAddLine(t,n=Ia.SkillSequence){let l=_e(this,ye,Go).call(this,{line:t,replayMode:n});return l.success?(this.autoSave(),Jd(),!0):(this.rewindUntilBefore(l.firstAddedIndex,!1),window.alert('Failed to add line "'+t.name+'" due to insufficient resources and/or stats mismatch.'),!1)}deleteLine(t){te(this,xi).deleteLine(t)}deleteAllLines(){te(this,xi).deleteAllLines()}reportInterruption(t){if(te(this,Dr)||this.tickMode===wn.RealTimeAutoPause&&this.shouldLoop){const n=t.failNode.getNameForMessage();window.alert("Cast interrupted! Resources for "+n+" are no longer available"),console.warn("failed: "+n);const l=this.game.time,s=this.shouldLoop;this.rewindUntilBefore(t.failIndex,!1),this.autoSave(),_e(this,ye,Ja).call(this,{deltaTime:l-this.game.time,waitKind:"duration"}),this.shouldLoop=s}else Me(this,qo,!0),te(this,Ma)||this.timeline.invalidateLastElement()}rewindUntilBefore(t,n){let l=this.record;this.record=new ol,this.record.config=this.gameConfig,_e(this,ye,Vl).call(this),_e(this,ye,Kl).call(this,this.gameConfig),t!==void 0&&(l.spliceUpTo(t),_e(this,ye,Go).call(this,{line:l,replayMode:Ia.Exact,removeTrailingIdleTime:n}))}removeTrailingIdleTime(){let t;for(let n=this.record.length-1;n>=0;n--)if(this.record.actions[n].info.type===Qe.Skill){t=n;break}t===void 0?this.rewindUntilBefore(0,!0):this.rewindUntilBefore(t+1,!0)}waitTillNextMpOrLucidTick(){_e(this,ye,Ja).call(this,{deltaTime:this.game.timeTillNextMpGainEvent(),waitKind:"mp"}),this.updateAllDisplay()}requestUseSkill(t){Me(this,Dr,!0),this.tickMode===wn.RealTimeAutoPause&&this.shouldLoop||_e(this,ye,tR).call(this,t.skillName,t.targetCount,this.tickMode,-1,!1).status.ready()&&(this.scrollToTime(this.game.time),this.autoSave(),Jd()),Me(this,Dr,!1)}requestToggleBuff(t){if(!this.game.requestToggleBuff(t))return!1;const l=tU(t);return l.tmp_startLockTime=this.game.time,l.tmp_endLockTime=l.tmp_startLockTime,this.record.addActionNode(l),te(this,$l).push({time:this.game.getDisplayTime(),action:"Toggle buff: "+Xe[t].name,isGCD:0,castTime:0,isDamaging:!1}),!0}scrollToTime(t){let n=t===void 0?this.game.time:t;setTimeout(()=>{sR(ft.positionFromTimeAndScale(n,this.timeline.scale))},0)}step(t){_e(this,ye,Ja).call(this,{deltaTime:t,waitKind:"duration"}),this.updateAllDisplay()}stepUntil(t){_e(this,ye,Ja).call(this,{deltaTime:t-this.game.getDisplayTime(),waitKind:"target"}),this.updateAllDisplay()}handleKeyboardEvent(t){this.displayingUpToDateGameState&&(this.tickMode===wn.RealTimeAutoPause?_e(this,ye,kb).call(this,t):this.tickMode===wn.Manual&&_e(this,ye,Pb).call(this,t))}setImageExportConfig(t){this.imageExportConfig=t}}xi=new WeakMap,Yo=new WeakMap,br=new WeakMap,ii=new WeakMap,Ko=new WeakMap,pu=new WeakMap,$l=new WeakMap,Or=new WeakMap,Iu=new WeakMap,Vo=new WeakMap,Wo=new WeakMap,qo=new WeakMap,Ma=new WeakMap,Dr=new WeakMap,Si=new WeakMap,Jl=new WeakMap,ye=new WeakSet,Kl=function(t){let n=t.initialResourceOverrides;for(let l=0;l<n.length;l++)n[l].applyTo(this.game)},xb=function(t){const n=te(this,Ma);this.displayingUpToDateGameState=!1,Me(this,Ma,!0);let l=this.game,s=this.record,c=te(this,ii);t(),Me(this,Ma,n),this.savedHistoricalGame=this.game,this.savedHistoricalRecord=this.record,this.game=l,this.record=s,Me(this,ii,c)},Vl=function(t=!0){this.game=Xd(this.gameConfig),_e(this,ye,mf).call(this,{shouldLoop:!1}),this.timeline.reset(),t&&this.record.unselectAll(),Me(this,ii,-this.gameConfig.countdown),Me(this,Ko,[]),Me(this,$l,[]),Me(this,Or,new Map),Me(this,Vo,new Map),Me(this,Iu,new Map),Me(this,Wo,new Map),Me(this,qo,!1),this.displayingUpToDateGameState=!0},Jc=function(t=!1){if(!te(this,Si)){let n=sk({tinctureBuffPercentage:te(this,Yo),lastDamageApplicationTime:te(this,ii)});t&&(n={mainTable:n.mainTable,mainTableSummary:n.mainTableSummary,dotTables:n.dotTables,mode:n.mode}),Xm(n)}},eR=function(){if(!te(this,Si)){let t=ok({tinctureBuffPercentage:te(this,Yo),lastDamageApplicationTime:te(this,ii)});xC(t)}},Ja=function(t){const n=this.game.time,l=t.deltaTime+this.game.getDisplayTime();if(t.deltaTime>0){Me(this,Jl,t.deltaTime);let s=this.game.tick(t.deltaTime,t.prematureStopCondition?t.prematureStopCondition:()=>!1),c;t.waitKind==="duration"?c=RI(s):t.waitKind==="target"?c=TI(l):t.waitKind==="mp"&&(c=eU()),c!==void 0&&(c.tmp_startLockTime=n,c.tmp_endLockTime=l,this.record.addActionNode(c))}},mf=function(t){let n=t.shouldLoop;this.shouldLoop!==n&&(this.shouldLoop=n,this.shouldLoop&&_e(this,ye,aR).call(this,()=>this.shouldLoop))},Ub=function(t){let n=this.game.timeTillAnySkillAvailable();t>=0&&(n=Math.min(t-this.game.time,n)),_e(this,ye,Ja).call(this,{deltaTime:n})},tR=function(t,n,l=this.tickMode,s=-1,c=!0){let d=this.game.getSkillAvailabilityStatus(t);const f=this.game.time,E=d.timeTillAvailable;_e(this,ye,Ja).call(this,{deltaTime:E}),t=VN(t,this.game),d=this.game.getSkillAvailabilityStatus(t);const A=Jx(t,n);let R;if(d.status.ready())this.record.addActionNode(A),R=this.record.tailIndex,this.game.useSkill(t,A,R),A.tmp_invalid_reasons=[],l===wn.RealTimeAutoPause&&(this.shouldLoop=!0,_e(this,ye,aR).call(this,()=>this.game.timeTillAnySkillAvailable()>0));else{if(!c){if(E>0){const S=RI(E);S.tmp_startLockTime=f,S.tmp_endLockTime=this.game.time,this.record.addActionNode(S)}return d}this.record.addActionNode(A),R=this.record.tailIndex,this.game.useInvalidSkill(t,A),A.tmp_invalid_reasons=d.status.unavailableReasons}let T=this.game.timeTillAnySkillAvailable();if(A.tmp_startLockTime=this.game.time,A.tmp_endLockTime=this.game.time+T,!te(this,Ma)){this.lastSkillTime=this.game.time;let S=this.game.getSkillAvailabilityStatus(t,!0),I=this.game.skillsList.get(t).cdName==="cd_GCD",b=d.castTime>0&&!d.instantCast,y=b?d.castTime-ul.getSlidecastWindow(d.castTime):0,M=S.cdRecastTime;t==="MEDITATE"&&(I=!0,M=this.game.getSkillAvailabilityStatus("YUKIKAZE").cdRecastTime),this.timeline.addElement({type:ut.Skill,displayTime:this.game.getDisplayTime(),skillName:t,isGCD:I,isSpellCast:b,time:this.game.time,relativeSnapshotTime:y,lockDuration:T,recastDuration:M,node:A,actionIndex:R}),te(this,$l).push({time:this.game.getDisplayTime(),action:si[t].name,isGCD:I?1:0,castTime:d.instantCast?0:d.castTime,targetCount:A.targetCount,isDamaging:A.anyPotencies()})}return l!==wn.RealTimeAutoPause&&_e(this,ye,Ub).call(this,s),te(this,Si)||cu(),d},Go=function(t){const n=te(this,Si);Me(this,Si,!0),t.removeTrailingIdleTime===void 0&&(t.removeTrailingIdleTime=!1);let l=t.maxReplayTime??-1,s=t.replayMode;t.replayMode===Ia.Edited&&(s=Ia.Exact);const c=t.line,d=[],f=[];if(c.length===0)return Me(this,Si,n),{success:!0,firstAddedIndex:void 0,invalidActions:d,skillUseTimes:f};let E=this.record.length,A;const R=t.cutoffIndex??c.actions.length,T=c.actions.slice();for(let I=0;I<R;I++){const b=T[I];t.replayMode===Ia.Edited&&s===Ia.Exact&&I===t.firstEditedNodeIndex&&(s=Ia.Edited);let y=0;if(b.info.type===Qe.Wait?y=b.info.waitDuration:b.info.type===Qe.JumpToTimestamp?y=b.info.targetTime-this.game.getDisplayTime():b.info.type===Qe.WaitForMP?y=this.game.timeTillNextMpGainEvent():b.info.type===Qe.Skill&&(y=this.game.getSkillAvailabilityStatus(b.info.skillName).timeTillAvailable),I>0){const v=T[I-1].legacyWaitDuration;if(v!==void 0&&Math.abs(v-te(this,Jl))>ma.epsilon){const U=v-te(this,Jl);if(U>0&&b.info.type!==Qe.Wait){let H;if(b.info.type===Qe.Skill){const K=this.game.getSkillAvailabilityStatus(b.info.skillName).timeTillAvailable;Math.abs(K-U)>ma.epsilon&&(H="duration")}H&&(_e(this,ye,Ja).call(this,{deltaTime:U,waitKind:H}),E++)}else b.info.type===Qe.Wait&&(y+=U)}}if(l>=0&&l-this.game.time<y&&s===Ia.Exact)return _e(this,ye,Ja).call(this,{deltaTime:l-this.game.time,waitKind:"duration"}),Me(this,Si,!1),this.updateAllDisplay(),{success:!0,firstAddedIndex:A,invalidActions:d,skillUseTimes:f};if(f.push(this.game.getDisplayTime()),[Qe.Wait,Qe.JumpToTimestamp,Qe.WaitForMP].includes(b.info.type))if(y>=0)_e(this,ye,Ja).call(this,{deltaTime:y,waitKind:b.info.type===Qe.Wait?"duration":b.info.type===Qe.JumpToTimestamp?"target":"mp"});else{const M=Rf();if(b.info.type===Qe.JumpToTimestamp){const v=TI(b.info.targetTime);v.tmp_startLockTime=this.game.time,v.tmp_endLockTime=v.tmp_startLockTime,this.record.addActionNode(v)}else console.error("non-jump wait somehow failed: "+b.info.type);M.addUnavailableReason(Et.PastTargetTime),d.push({node:b,index:I,reason:M})}else if(b.info.type===Qe.Skill){let M=b.info.skillName;t.replayMode===Ia.SkillSequence&&(M=yr(this.game.job,M,this.gameConfig.level));let v=_e(this,ye,tR).call(this,M,b.info.targetCount,wn.Manual,l);f[f.length-1]=v.usedAt,v.status.ready()||d.push({node:b,index:I,reason:v.status.clone()}),te(this,qo)&&(Me(this,qo,!1),this.shouldLoop||(v.status.addUnavailableReason(Et.CastCanceled),d.push({node:b,index:I,reason:v.status})))}else if(b.info.type===Qe.SetResourceEnabled&&(s===Ia.Exact||s===Ia.Edited)){let M=this.requestToggleBuff(b.info.buffName);const v=s===Ia.Exact;if(M)_e(this,ye,Ja).call(this,{deltaTime:v?y:Math.min(y,this.game.timeTillAnySkillAvailable())});else{const U=Rf();U.addUnavailableReason(Et.BuffNoLongerAvailable),d.push({node:b,index:I,reason:U})}}else console.assert(!1);if(t.replayMode===Ia.Edited){let M=this.record.tailIndex;b===t.selectionStart&&M>=0?this.record.selectSingle(M):b===t.selectionEnd&&M>=0&&this.record.selectUntil(M)}this.record.length!==E&&A===void 0&&(A=this.record.tailIndex)}if(t.cutoffIndex!==void 0){const I=T[t.cutoffIndex].info;if(I.type===Qe.Skill){const b=this.game.getSkillAvailabilityStatus(I.skillName);_e(this,ye,Ja).call(this,{deltaTime:b.timeTillAvailable})}}const S=T[T.length-1],g=S.legacyWaitDuration;if(g!==void 0&&(S.info.type===Qe.Skill||S.info.type===Qe.SetResourceEnabled)&&Math.abs(g-te(this,Jl))>ma.epsilon){const I=g-te(this,Jl);_e(this,ye,Ja).call(this,{deltaTime:I,waitKind:"duration"})}return Me(this,Si,n),this.updateAllDisplay(),{success:!0,firstAddedIndex:A,invalidActions:d,skillUseTimes:f}},aR=function(t){let n=0,l=this;const s=function(c){var E,A,R;n===0&&(n=c);let d=(c-n)/1e3*l.timeScale,f=l.game.timeTillAnySkillAvailable();f>=d?_e(E=l,ye,Ja).call(E,{deltaTime:d,prematureStopCondition:()=>!t()}):(_e(A=l,ye,Ja).call(A,{deltaTime:f,prematureStopCondition:()=>!t()}),_e(R=l,ye,Ja).call(R,{deltaTime:d-f,prematureStopCondition:()=>!t()})),l.updateAllDisplay(),n=c,t()?requestAnimationFrame(s):(l.shouldLoop=!1,l.autoSave(),Wf(!1))};Wf(!0),requestAnimationFrame(s)},kb=function(t){this.shouldLoop||t.keyCode===85&&(this.rewindUntilBefore(this.record.tailIndex,!1),this.updateAllDisplay(),this.autoSave())},Pb=function(t){t.keyCode===85&&(this.rewindUntilBefore(this.record.tailIndex,!1),this.updateAllDisplay(),this.autoSave())};const O=new PG,we=new Map;we.set(P.LeyLines,"Buffs/BLM/Ley Lines.png");we.set(P.Tincture,"Buffs/General/Tincture.png");we.set(P.ArcaneCircle,"Buffs/RPR/Arcane Circle.png");we.set(P.ArmysPaeon,"Buffs/BRD/Army's Paeon.png");we.set(P.BattleLitany,"PartyBuffs/battle_litany.png");we.set(P.BattleVoice,"Buffs/BRD/Battle Voice.png");we.set(P.Brotherhood,"PartyBuffs/brotherhood.png");we.set(P.Card_TheBalance,"PartyBuffs/the_balance.png");we.set(P.Card_TheSpear,"PartyBuffs/the_spear.png");we.set(P.ChainStratagem,"PartyBuffs/chain_stratagem.png");we.set(P.Devilment,"Buffs/DNC/Devilment.png");we.set(P.Divination,"PartyBuffs/divination.png");we.set(P.Dokumori,"PartyBuffs/dokumori.png");we.set(P.Embolden,"PartyBuffs/Embolden.png");we.set(P.MagesBallad,"Buffs/BRD/Mage's Ballad.png");we.set(P.RadiantFinale1,"Buffs/BRD/Radiant Finale.png");we.set(P.RadiantFinale2,"Buffs/BRD/Radiant Finale.png");we.set(P.RadiantFinale3,"Buffs/BRD/Radiant Finale.png");we.set(P.SearingLight,"PartyBuffs/searing_light.png");we.set(P.StandardFinish,"Buffs/DNC/Standard Finish.png");we.set(P.StarryMuse,"Buffs/PCT/Starry Muse.png");we.set(P.TechnicalFinish,"Buffs/DNC/Technical Finish.png");we.set(P.WanderersMinuet,"Buffs/BRD/Wanderer's Minuet.png");we.set(P.Manafication,"PartyBuffs/manafication.png");we.set(P.Acceleration,"Buffs/RDM/Acceleration.png");we.set(P.Fuka,"Buffs/SAM/Fuka.png");we.set(P.Fugetsu,"Buffs/SAM/Fugetsu.png");we.set(P.EnhancedEnpi,"Buffs/SAM/Enhanced Enpi.png");we.set(P.DeathsDesign,"Buffs/RPR/Death's Design.png");we.set(P.ArcaneCircle,"Buffs/RPR/Arcane Circle.png");we.set(P.RagingStrikes,"Buffs/BRD/Raging Strikes.png");we.set(P.Barrage,"Buffs/BRD/Barrage.png");we.set(P.NoMercy,"Buffs/GNB/No Mercy.png");we.set(P.EnhancedPiercingTalon,"Buffs/DRG/Enhanced Piercing Talon.png");we.set(P.PowerSurge,"Buffs/DRG/Power Surge.png");we.set(P.LanceCharge,"Buffs/DRG/Lance Charge.png");we.set(P.LifeOfTheDragon,"Buffs/DRG/Life of the Dragon.png");we.set(P.LifeSurge,"Buffs/DRG/Life Surge.png");we.set(P.DivineMight,"Buffs/PLD/Divine Might.png");we.set(P.Requiescat,"Buffs/PLD/Requiescat Zero.png");we.set(P.FightOrFlight,"Buffs/PLD/Fight or Flight.png");we.set(P.Zoe,"Buffs/SGE/Zoe.png");we.set(P.Autophysis,"Buffs/SGE/Autophysis.png");we.set(P.Krasis,"Buffs/SGE/Krasis.png");we.set(P.Philosophia,"Buffs/SGE/Philosophia.png");we.set(P.Soteria,"Buffs/SGE/Soteria.png");const ts=new Map;we.forEach((e,t)=>{let n=new Image;n.src="assets/"+e,n.onload=function(){wi()},ts.set(t,n)});const nR=400;let B,Gb=0,Ar=0,iR=!1,lR,Tm,kr=0,Ru=0,oR=!1,pe,Yf,wb,Kf,De={timelineWidth:0,timelineHeight:0,countdown:0,scale:1,tincturePotencyMultiplier:1,allMarkers:[],sharedElements:[],slots:[],activeSlotIndex:0,showSelection:!1,selectionStartDisplayTime:0,selectionEndDisplayTime:0,drawOptions:SC},aN=!1,lu=!1;function ta(e,t,n,l,s){kr>=e.x&&kr<e.x+e.w&&Ru>=e.y&&Ru<e.y+e.h&&(Yf=t,wb=s,Kf=n,lu=l===!0)}const rr=()=>{O.record.unselectAll(),O.displayCurrentState()};function GG(e,t,n,l){if(!e.length)return;const s=14,c=24,d=8,f=4;B.font="12px monospace";let E=-1;e.forEach(M=>{E=Math.max(E,B.measureText(M).width)});let[A,R]=[E+2*d,s*e.length+2*f];l&&l.length>0&&(A=Math.max(A,d+l.length*(c+d)),R+=c+f);let T=kr,S=Ru;const g=4;S>=R+g?S=S-R-g:S=S+11+g,T-A/2>=0&&T+A/2<t?T=T-A/2:T-A/2<0?T=0:T=t-A,B.strokeStyle=pe.bgHighContrast,B.lineWidth=1,B.fillStyle=pe.tipBackground,B.fillRect(T,S,A,R),B.strokeRect(T,S,A,R),B.fillStyle=pe.emphasis,B.textBaseline="top",B.textAlign="left";for(let M=0;M<e.length;M++)B.fillText(e[M],T+d,S+M*s+2+f);let b=T+d,y=S+e.length*s+2+f;if(l)for(let M=0;M<l.length;M++)l[M]&&B.drawImage(l[M],b+M*c,y,c*.75,c)}function wG(e,t,n,l,s,c){B.lineCap="round",B.lineWidth=4,B.font="11px monospace",B.textAlign="left",c.forEach((d,f)=>{let E=l-(f+1)*Ce.trackHeight;f===Qo&&(E=n);for(let A=0;A<d.length;A++){let R=d[A],T=R.description;R.markerType===on.Untargetable?T=p({en:"Untargetable",zh:"不可选中"}):R.markerType===on.Buff&&(T=UN(R.description));let S=s+ft.positionFromTimeAndScale(R.time+e,t),g=()=>{let I=O.timeline.deleteMarker(R);console.assert(I),O.updateStats(),Bm(R)};if(R.duration>0){let I=ft.positionFromTimeAndScale(R.duration,t);if(R.markerType===on.Buff){B.fillStyle=R.color+pe.timeline.markerAlpha,B.fillRect(S,E,I,Ce.trackHeight);let y=ts.get(R.description);y&&B.drawImage(y,S,E,Ce.trackHeight*.75,Ce.trackHeight),B.fillStyle=pe.emphasis,B.fillText(T,S+Ce.trackHeight*1.5,E+10)}else R.showText?(B.fillStyle=R.color+pe.timeline.markerAlpha,B.fillRect(S,E,I,Ce.trackHeight),B.fillStyle=pe.emphasis,B.fillText(T,S+Ce.trackHeight/2,E+10)):(B.strokeStyle=R.color,B.beginPath(),B.moveTo(S,E+Ce.trackHeight/2),B.lineTo(S+I,E+Ce.trackHeight/2),B.stroke());let b=R.time+" - "+parseFloat((R.time+R.duration).toFixed(3));ta({x:S,y:E,w:Math.max(I,Ce.trackHeight),h:Ce.trackHeight},["["+b+"] "+T],g)}else B.fillStyle=R.color,B.beginPath(),B.ellipse(S,E+Ce.trackHeight/2,4,4,0,0,2*Math.PI),B.fill(),R.showText&&(B.fillStyle=pe.emphasis,B.beginPath(),B.fillText(T,S+Ce.trackHeight/2,E+10)),ta({x:S-Ce.trackHeight/2,y:E,w:Ce.trackHeight,h:Ce.trackHeight},["["+R.time+"] "+T],g)}})}function BG(e,t,n,l,s){B.lineWidth=1,B.strokeStyle=pe.timeline.mpTickMark,B.beginPath(),s.forEach(c=>{let d=n+ft.positionFromTimeAndScale(c.displayTime,t);B.moveTo(d,l),B.lineTo(d,l+Ce.renderSlotHeight()),ta({x:d-2,y:l,w:4,h:Ce.renderSlotHeight()},["["+c.displayTime.toFixed(3)+"] "+c.sourceDesc])}),B.stroke()}function FG(e,t,n,l,s){B.lineWidth=1,B.strokeStyle=pe.sam.meditation,B.beginPath(),s.forEach(c=>{let d=n+ft.positionFromTimeAndScale(c.displayTime,t);B.moveTo(d,l),B.lineTo(d,l+Ce.renderSlotHeight()),ta({x:d-2,y:l,w:4,h:Ce.renderSlotHeight()},["["+c.displayTime.toFixed(3)+"] "+c.sourceDesc])}),B.stroke()}function zG(e,t,n,l,s){B.lineWidth=1,B.strokeStyle=pe.pld.ironWillColor,B.beginPath(),s.forEach(c=>{let d=n+ft.positionFromTimeAndScale(c.displayTime,t);B.moveTo(d,l),B.lineTo(d,l+Ce.renderSlotHeight()),ta({x:d-2,y:l,w:4,h:Ce.renderSlotHeight()},["["+c.displayTime.toFixed(3)+"] "+c.sourceDesc])}),B.stroke()}function jG(e,t,n,l,s){B.font="bold 10px monospace",s.forEach(c=>{const d=n+ft.positionFromTimeAndScale(c.displayTime,t),f=12,E=l+f;B.beginPath(),B.textAlign="center",B.moveTo(d,E-f),B.lineTo(d-f/2,E),B.lineTo(d+f/2,E),B.fillStyle=pe.timeline.warningMark,B.fill(),B.fillStyle="white",B.fillText("!",d,E-1);let A="["+c.displayTime.toFixed(3)+"] ";c.warningType===Fe.PolyglotOvercap?A+=p({en:"polyglot overcap!",zh:"通晓溢出！"}):c.warningType===Fe.CometOverwrite?A+=p({en:"comet overwrite!",zh:"彗星之黑被覆盖！"}):c.warningType===Fe.PaletteOvercap?A+=p({en:"palette gauge overcap!",zh:"调色量值溢出！"}):c.warningType===Fe.ImbalancedMana?A+=p({en:c.warningType+"!",zh:"魔元失衡！"}):c.warningType===Fe.KenkiOvercap?A+=p({en:"kenki overcap!"}):c.warningType===Fe.MeditationOvercap?A+=p({en:"meditation stack overcap!"}):c.warningType===Fe.SenOvercap?A+=p({en:"sen overcap!"}):A+=p({en:c.warningType+"!"}),ta({x:d-f/2,y:E-f,w:f,h:f},[A])})}function Sm(e,t,n,l,s){s.forEach(c=>{const d=c.type===ut.DamageMark&&Va(c.displayTime),f=n+ft.positionFromTimeAndScale(c.displayTime,t);let E="["+c.displayTime.toFixed(3)+"] ";const A=p({en:"Untargetable",zh:"不可选中"});switch(c.type){case ut.AggroMark:B.fillStyle=pe.timeline.aggroMark,E+=p({en:"aggro"});break;case ut.HealingMark:B.fillStyle=pe.timeline.healingMark,E+=p({en:"healing potency"});break;default:B.fillStyle=d?pe.timeline.untargetableDamageMark:pe.timeline.damageMark,E+=p({en:"damage potency"})}B.beginPath(),c.type===ut.AggroMark||c.type===ut.DamageMark?(B.moveTo(f-3,l),B.lineTo(f+3,l),B.lineTo(f,l+6)):(B.moveTo(f-3,l+12),B.lineTo(f+3,l+12),B.lineTo(f,l+6)),B.fill();const R=c.buffs.filter(I=>I==="TINCTURE").length>0,T=[],S=[];c.potencyInfos.forEach(I=>{const b=I.sourceDesc.replace("{skill}",Sl(I.sourceSkill));if(d)T.push(0 .toFixed(3)+" ("+b+")");else if(I.sourceSkill in hl){const y=p({en:"LB"});T.push(y+" ("+b+")")}else{const y=I.potency.getAmount({tincturePotencyMultiplier:De.tincturePotencyMultiplier,includePartyBuffs:!0,includeSplash:!1});if(I.potency.targetCount>1){const M=y*(1-(I.potency.falloff??1)),v=I.potency.targetCount-1,U=M.toFixed(2)+(v>1?` x ${v}`:""),H=v>1?p({en:`${b}, ${v} additional targets`,zh:`${b}, ${v} 额外目标`}):p({en:`${b}, 1 additional target`,zh:`${b}, 1 额外目标`});T.push(y.toFixed(2)+" ("+p({en:`${b}, primary target`,zh:`${b}, 主要目标`})+")"),T.push(U+` (${H})`)}else T.push(y.toFixed(2)+" ("+b+")");R&&!S.includes(ts.get(P.Tincture))&&S.push(ts.get(P.Tincture)),I.potency.getPartyBuffs().forEach(M=>{const v=ts.get(M);S.includes(v)||S.push()})}});const g=c.type===ut.HealingMark?{x:f-3,y:l+6,w:6,h:6}:{x:f-3,y:l,w:6,h:6};ta(g,d?[E,...T,A]:[E,...T],void 0,void 0,S)})}function YG(e,t,n,l,s){B.fillStyle=pe.timeline.lucidTickMark,s.forEach(c=>{let d=n+ft.positionFromTimeAndScale(c.displayTime,t);B.beginPath(),B.moveTo(d-3,l),B.lineTo(d+3,l),B.lineTo(d,l+6),B.fill();let f="["+c.displayTime.toFixed(3)+"] "+c.sourceDesc.replace("{skill}",Sl("LUCID_DREAMING"));ta({x:d-3,y:l,w:6,h:6},[f])})}function KG(e,t,n,l,s,c){let d=[],f=[],E=[],A=[],R=[];const T=new Map([[P.Tincture,{color:pe.timeline.potCover,showImage:!0}],[P.LeyLines,{color:pe.timeline.llCover,showImage:!0}],[P.SearingLight,{color:pe.smn.searing,showImage:!0}],[P.Hyperphantasia,{color:pe.timeline.llCover,showImage:!1}],[P.StarryMuse,{color:pe.timeline.buffCover,showImage:!0}],[P.Embolden,{color:pe.rdm.emboldenBuff,showImage:!0}],[P.Manafication,{color:pe.rdm.manaficBuff,showImage:!0}],[P.Acceleration,{color:pe.rdm.accelBuff,showImage:!0}],[P.TechnicalFinish,{color:pe.dnc.esprit,showImage:!0}],[P.Devilment,{color:pe.dnc.feathers,showImage:!0}],[P.Fuka,{color:pe.timeline.llCover,showImage:!0}],[P.Fugetsu,{color:pe.sam.fugetsu,showImage:!0}],[P.NoMercy,{color:pe.sam.fugetsu,showImage:!0}],[P.EnhancedPiercingTalon,{color:pe.drg.enhancedPiercingTalon,showImage:!0}],[P.PowerSurge,{color:pe.drg.powerSurge,showImage:!0}],[P.LifeSurge,{color:pe.drg.lifeSurge,showImage:!0}],[P.LanceCharge,{color:pe.drg.lanceCharge,showImage:!0}],[P.LifeOfTheDragon,{color:pe.drg.lifeOfTheDragon,showImage:!0}],[P.BattleLitany,{color:pe.drg.battleLitany,showImage:!0}],[P.DivineMight,{color:pe.pld.divineMight,showImage:!0}],[P.Requiescat,{color:pe.pld.requiescat,showImage:!0}],[P.FightOrFlight,{color:pe.pld.fightOrFlight,showImage:!0}],[P.EnhancedEnpi,{color:pe.rdm.accelBuff,showImage:!0}],[P.ArcaneCircle,{color:pe.rpr.arcaneCircle,showImage:!0}],[P.DeathsDesign,{color:pe.rpr.deathsDesign,showImage:!0}],[P.WanderersMinuet,{color:pe.brd.wanderersCoda,showImage:!0}],[P.MagesBallad,{color:pe.brd.magesCoda,showImage:!0}],[P.ArmysPaeon,{color:pe.brd.armysCoda,showImage:!0}],[P.RagingStrikes,{color:pe.brd.ragingStrikes,showImage:!0}],[P.Barrage,{color:pe.brd.barrage,showImage:!0}],[P.BattleVoice,{color:pe.brd.battleVoice,showImage:!0}],[P.RadiantFinale1,{color:pe.brd.radiantFinale,showImage:!0}],[P.RadiantFinale2,{color:pe.brd.radiantFinale,showImage:!0}],[P.RadiantFinale3,{color:pe.brd.radiantFinale,showImage:!0}],[P.Zoe,{color:pe.sge.zoe,showImage:!0}],[P.Autophysis,{color:pe.sge.autophysis,showImage:!0}],[P.Krasis,{color:pe.sge.krasis,showImage:!0}],[P.Soteria,{color:pe.sge.soteria,showImage:!0}],[P.Philosophia,{color:pe.sge.philosophia,showImage:!0}],[P.WaxingNocturne,{color:pe.blu.moonflute,showImage:!0}],[P.Bristle,{color:pe.blu.bristle,showImage:!0}],[P.Whistle,{color:pe.blu.whistle,showImage:!0}],[P.TingleA,{color:pe.blu.tinglea,showImage:!0}],[P.TingleB,{color:pe.blu.tingleb,showImage:!0}]]),S=new Map;T.forEach((v,U)=>S.set(U,[]));const g=[],I=[];let b=[],y=l+Ce.skillButtonHeight/2;s.forEach(v=>{let U=v,H=n+ft.positionFromTimeAndScale(U.displayTime,t),K=U.isGCD?y+Ce.skillButtonHeight/2:y;const F=U.node.targetCount;F>1&&d.push({count:F,x:H+Ce.skillButtonHeight/2,y:K-5});const x=2;let re=ft.positionFromTimeAndScale(U.lockDuration,t);if(U.isSpellCast?(E.push({x:H+x,y:K,w:re-x,h:Ce.skillButtonHeight/2}),R.push(H+ft.positionFromTimeAndScale(U.relativeSnapshotTime,t))):f.push({x:H+x,y:K,w:re-x,h:Ce.skillButtonHeight}),U.isGCD){let de=ft.positionFromTimeAndScale(U.recastDuration,t);A.push({x:H+x,y:K+Ce.skillButtonHeight/2,w:de-x,h:Ce.skillButtonHeight/2})}if(U.skillName in hl){let de=ft.positionFromTimeAndScale(U.recastDuration,t);f.push({x:H+x,y:K+Ce.skillButtonHeight/2,w:de-x,h:Ce.skillButtonHeight/2})}U.node.tmp_invalid_reasons.length>0&&I.push({x:H,y:l+Ce.slotPaddingTop,w:ft.positionFromTimeAndScale(U.isGCD?Math.max(U.recastDuration,U.lockDuration):U.lockDuration,t),h:Ce.renderSlotHeight()-Ce.slotPaddingBottom-Ce.slotPaddingTop});let ie=0;S.forEach((de,Ae)=>{U.node.hasBuff(Ae)&&(ie+=se(ie,de))}),U.node.hasPartyBuff()&&se(ie,g);function se(de,Ae){return De.drawOptions.drawBuffIndicators&&Ae.push({x:H,y:K+28+de*4,w:28,h:4}),1}mI(U.skillName)&&b.push({elem:v,x:H,y:K})}),B.font="13px monospace",B.fillStyle=pe.text,B.textAlign="center",d.forEach(v=>{B.fillText("x"+v.count.toString(),v.x,v.y)}),B.fillStyle=pe.timeline.castBar,B.beginPath(),E.forEach(v=>{B.rect(v.x,v.y,v.w,v.h),c&&ta(v,void 0,rr)}),B.fill(),B.lineWidth=1,B.strokeStyle="rgba(151, 85, 239, 0.4)",B.beginPath(),R.forEach(v=>{B.moveTo(v,y+14),B.lineTo(v,y+28)}),B.stroke(),B.fillStyle=pe.timeline.gcdBar,B.beginPath(),A.forEach(v=>{B.rect(v.x,v.y,v.w,v.h),c&&ta(v,void 0,rr)}),B.fill(),B.fillStyle=pe.timeline.lockBar,B.beginPath(),f.forEach(v=>{B.rect(v.x,v.y,v.w,v.h),c&&ta(v,void 0,rr)}),B.fill(),S.forEach((v,U)=>{B.fillStyle=T.get(U).color,B.beginPath(),v.forEach(H=>{B.rect(H.x,H.y,H.w,H.h),c&&ta(H,void 0,rr)}),B.fill()}),B.fillStyle=pe.timeline.buffCover,B.beginPath(),g.forEach(v=>{B.rect(v.x,v.y,v.w,v.h),c&&ta(v,void 0,rr)}),B.fill(),B.beginPath(),b.forEach(v=>{B.drawImage(mI(v.elem.skillName),v.x,v.y,28,28);let U=v.elem.node,H=[],K=[],F=Sl(v.elem.skillName)+"@"+v.elem.displayTime.toFixed(3);if(H.push(F),!((U.maybeGetActionKey()??"NEVER")in hl)){if(U.getInitialPotency()){const re=U.getPotency({tincturePotencyMultiplier:De.tincturePotencyMultiplier,includePartyBuffs:!0,includeSplash:!0,untargetable:Va}).applied;H.push(p({en:"potency: ",zh:"威力："})+re.toFixed(2))}if(U.getInitialHealingPotency()){const re=U.getHealingPotency({tincturePotencyMultiplier:De.tincturePotencyMultiplier,includeSplash:!0,includePartyBuffs:!0,untargetable:Va}).applied;H.push(p({en:"healing potency: "})+re.toFixed(2))}}let x=0;U.tmp_endLockTime!==void 0&&U.tmp_startLockTime!==void 0&&(x=U.tmp_endLockTime-U.tmp_startLockTime),H.push(p({en:"duration: ",zh:"耗时："})+x.toFixed(3)),U.tmp_invalid_reasons.length>0&&(H.push(""),H.push(p({en:"skill is invalid:",zh:"技能有问题："}).toString()),U.tmp_invalid_reasons.forEach(re=>H.push("- "+dr(re)))),T.forEach((re,ie)=>{re.showImage&&U.hasBuff(ie)&&K.push(ts.get(ie))}),U.getPartyBuffs().forEach(re=>{let ie=ts.get(re);ie&&K.push(ie)}),c?ta({x:v.x,y:v.y,w:28,h:28},H,()=>{O.timeline.onClickTimelineAction(v.elem.actionIndex,lR?lR.shiftKey:!1),X0()},!0,K):ta({x:v.x,y:v.y,w:28,h:28},H,()=>{},!1,K)});const M=B.globalAlpha;B.fillStyle=pe.timeline.invalidBg,B.globalAlpha=.2,B.beginPath(),I.forEach(v=>{B.rect(v.x,v.y,v.w,v.h)}),B.fill(),B.globalAlpha=M}function nN(e,t,n,l,s,c){B.fillStyle=s,B.beginPath(),B.moveTo(e-3,0),B.lineTo(e+3,0),B.lineTo(e,6),B.fill(),B.lineWidth=1,B.strokeStyle=s,B.setLineDash([]),B.beginPath(),B.moveTo(e,0),B.lineTo(e,t),B.stroke(),B.strokeStyle=s+"9f",B.setLineDash([2,3]),B.beginPath(),B.moveTo(e,t),B.lineTo(e,n),B.stroke(),B.strokeStyle=s,B.setLineDash([]),B.beginPath(),B.moveTo(e,n),B.lineTo(e,l),B.stroke(),B.strokeStyle=s+"9f",B.setLineDash([2,3]),B.beginPath(),B.moveTo(e,l),B.lineTo(e,nR),B.stroke(),ta({x:e-3,y:0,w:6,h:nR},[c]),B.setLineDash([])}function Bb(e,t=!1){const n=t?ft.positionFromTimeAndScale(O.game.time+De.countdown,De.scale):Ar;B.fillStyle=pe.timeline.ruler,B.fillRect(0,0,n,Ce.rulerHeight);let l=ft.timeFromPositionAndScale(kr-e,De.scale)-De.countdown;ta({x:Ce.leftBufferWidth,y:0,w:n-Ce.leftBufferWidth,h:Ce.rulerHeight},[l.toFixed(3)],()=>{l<O.game.getDisplayTime()&&l>=-O.game.config.countdown?O.displayHistoricalState(l,void 0):O.displayCurrentState()}),B.lineCap="butt",B.beginPath();let s=De.scale*100,c=De.countdown*s;B.lineWidth=1,B.strokeStyle=pe.text,B.textBaseline="alphabetic",B.font="13px monospace",B.textAlign="center",B.fillStyle=pe.text;const d=50,f=function(E,A,R){const T=E*s;let S=e+T+c;S>=-50&&S<=n+d&&(B.moveTo(S,0),B.lineTo(S,A),R&&B.fillText(ft.displayTime(T/s,0),S,23))};if(s>=6){for(let E=0;E*s<De.timelineWidth-c;E+=1)E%5!==0&&f(E,6,!1);for(let E=-1;E*s>=-c;E-=1)E%5!==0&&f(E,6,!1)}for(let E=0;E*s<De.timelineWidth-c;E+=5)f(E,10,!0);for(let E=-5;E*s>=-c;E-=5)f(E,10,!0);return B.stroke(),Ce.rulerHeight}function Fb(e,t,n=!1){const l=n?ft.positionFromTimeAndScale(O.game.time+De.countdown,De.scale):Ar;let s=new Map;De.allMarkers.forEach(E=>{let A=s.get(E.track);A===void 0&&(A=[]),A.push(E),s.set(E.track,A)}),B.beginPath();let c=0,d=!1;for(let E of s.keys())c=Math.max(c,E+1),E===Qo&&(d=!0);d&&(c+=1);let f=t+c*Ce.trackHeight;B.fillStyle=pe.timeline.tracks;for(let E=0;E<c;E+=2){let A=f-(E+1)*Ce.trackHeight;B.rect(0,A,l,Ce.trackHeight)}return B.fill(),wG(De.countdown,De.scale,t,f,e,s),c*Ce.trackHeight}function zb(e,t,n){const l=e+ft.positionFromTimeAndScale(De.countdown,De.scale);for(let d=0;d<De.slots.length;d++){let f=d===De.activeSlotIndex,E=new Map;if(n&&!f)continue;De.slots[d].elements.forEach(R=>{let T=E.get(R.type)??[];T.push(R),E.set(R.type,T)});let A=t+d*Ce.renderSlotHeight();if(n&&(A=t),De.drawOptions.drawMPTickMarks&&BG(De.countdown,De.scale,l,A,E.get(ut.MPTickMark)??[]),De.drawOptions.drawHealingMarks&&Sm(De.countdown,De.scale,l,A,E.get(ut.HealingMark)??[]),De.drawOptions.drawDamageMarks&&(Sm(De.countdown,De.scale,l,A,E.get(ut.DamageMark)??[]),Sm(De.countdown,De.scale,l,A,E.get(ut.AggroMark)??[])),De.drawOptions.drawMPTickMarks&&YG(De.countdown,De.scale,l,A,E.get(ut.LucidMark)??[]),FG(De.countdown,De.scale,l,A,E.get(ut.MeditateTickMark)??[]),zG(De.countdown,De.scale,l,A,E.get(ut.AutoTickMark)??[]),jG(De.countdown,De.scale,l,A,E.get(ut.WarningMark)??[]),KG(De.countdown,De.scale,l,A,E.get(ut.Skill)??[],f),De.showSelection&&f&&!n){B.fillStyle="rgba(147, 112, 219, 0.15)";let R=l+ft.positionFromTimeAndScale(De.selectionStartDisplayTime,De.scale),T=ft.positionFromTimeAndScale(De.selectionEndDisplayTime-De.selectionStartDisplayTime,De.scale);B.fillRect(R,A,T,Ce.renderSlotHeight()),B.strokeStyle="rgba(147, 112, 219, 0.5)",B.lineWidth=1,B.beginPath(),B.moveTo(R,A),B.lineTo(R,A+Ce.renderSlotHeight()),B.moveTo(R+T,A),B.lineTo(R+T,A+Ce.renderSlotHeight()),B.stroke()}}let s=ft.positionFromTimeAndScale(De.countdown,De.scale),c=Ce.renderSlotHeight()*De.slots.length;if(De.slots.length<fl&&(c+=Ce.addSlotButtonHeight),B.fillStyle=pe.timeline.countdown,B.fillRect(e-Ce.leftBufferWidth,t,s+Ce.leftBufferWidth,c),n)return Ce.renderSlotHeight();for(let d=0;d<De.slots.length;d++){let E={x:0,y:t+d*Ce.renderSlotHeight()+1,w:14,h:Ce.renderSlotHeight()-2};if(B.fillStyle=d===De.activeSlotIndex?pe.accent:pe.bgMediumContrast,B.fillRect(E.x,E.y,E.w,E.h),ta(E,d===De.activeSlotIndex?void 0:[p({en:"set active",zh:"设为当前"})],()=>{O.setActiveSlot(d)},!0),De.slots.length>1&&d===De.activeSlotIndex){B.fillStyle=pe.emphasis,B.font="bold 14px monospace",B.textAlign="center",B.fillText("×",E.x+E.w/2,E.y+E.h-4);let A={x:E.x,y:E.y+E.h-E.w,w:E.w,h:E.w};ta(A,[p({en:"delete",zh:"删除"})],()=>{O.timeline.removeSlot(d),O.displayCurrentState()},!0)}}return Ce.renderSlotHeight()*De.slots.length}function VG(e,t){const n=e+ft.positionFromTimeAndScale(De.countdown,De.scale),l=Ce.renderSlotHeight(),s=t+De.activeSlotIndex*l;let c=new Map;return De.sharedElements.forEach(d=>{let f=c.get(d.type)??[];f.push(d),c.set(d.type,f)}),(c.get(ut.s_ViewOnlyCursor)??[]).forEach(d=>{let f=d;if(f.enabled){let E=n+ft.positionFromTimeAndScale(d.displayTime,De.scale);nN(E,t,s,s+l,pe.historical,p({en:"cursor: ",zh:"光标："})+f.displayTime.toFixed(3))}}),(c.get(ut.s_Cursor)??[]).forEach(d=>{let f=d,E=n+ft.positionFromTimeAndScale(f.displayTime,De.scale);nN(E,t,s,s+l,pe.emphasis,p({en:"cursor: ",zh:"光标："})+f.displayTime.toFixed(3))}),0}function WG(e){if(De.slots.length<fl){const l={x:4,y:e+2,w:192,h:Ce.addSlotButtonHeight-4};B.fillStyle=pe.bgLowContrast,B.fillRect(l.x,l.y,l.w,l.h),B.strokeStyle=pe.bgHighContrast,B.lineWidth=1,B.strokeRect(l.x,l.y,l.w,l.h),B.font="13px monospace",B.fillStyle=pe.text,B.textAlign="center",B.fillText(p({en:"Add timeline slot",zh:"添加时间轴"}),l.x+l.w/2,l.y+l.h-4),ta(l,void 0,()=>{O.timeline.addSlot(),O.displayCurrentState()},!0);const s={x:2*4+192,y:e+2,w:192,h:Ce.addSlotButtonHeight-4};return B.fillStyle=pe.bgLowContrast,B.fillRect(s.x,s.y,s.w,s.h),B.strokeStyle=pe.bgHighContrast,B.lineWidth=1,B.strokeRect(s.x,s.y,s.w,s.h),B.font="13px monospace",B.fillStyle=pe.text,B.textAlign="center",B.fillText(p({en:"Clone timeline slot",zh:"复制时间轴"}),s.x+s.w/2,s.y+s.h-4),ta(s,void 0,()=>{O.cloneActiveSlot(),O.displayCurrentState()},!0),Ce.addSlotButtonHeight}return 0}function qG(){let e=-Gb+Ce.leftBufferWidth,t=0;B.fillStyle=pe.background,B.fillRect(0,0,Ar+1,De.timelineHeight+1),ta({x:0,y:0,w:Ar,h:nR},void 0,rr),t+=Bb(e),t+=Fb(e,t);const n=t;t+=zb(e,t,!1),t+=VG(e,n),t+=WG(t),oR&&(Yf&&GG(Yf,Ar,De.timelineHeight,wb),iR&&Kf&&Kf())}let jb=(e,t)=>{},Yb=()=>{},Kb=()=>{},Vb=e=>{},Wb=e=>{},XG=()=>lu;function ZG(e){const t=C.useRef(null),n=window.devicePixelRatio;let l=e.visibleWidth*n,s=e.timelineHeight*n;const[c,d]=C.useState(0),[f,E]=C.useState(0),[A,R]=C.useState(!1),[T,S]=C.useState(0),[g,I]=C.useState(0),b=C.useContext(jn);return C.useEffect(()=>{jb=(y,M)=>{kr=y,Ru=M,d(kr),E(Ru)},Yb=()=>{R(!0),oR=!0},Kb=()=>{R(!1),oR=!1},Vb=y=>{O.shouldLoop||(S(M=>M+1),iR=!0,lR=y)},Wb=y=>{O.shouldLoop||(I(M=>M+1),Tm=y,(Tm.key==="Backspace"||Tm.key==="Delete")&&O.record.selectionStartIndex!==void 0&&O.deleteSelectedSkill())}},[]),C.useEffect(()=>{var M;Yf=void 0,Kf=void 0,Gb=e.visibleLeft,Ar=e.visibleWidth,pe=ki(b),aN=lu,De=O.getTimelineRenderingProps();let y=(M=t.current)==null?void 0:M.getContext("2d",{alpha:!1});y&&(B=y,B.scale(n,n),qG(),B.scale(1/n,1/n)),aN!==lu&&wi(),iR=!1},[e.visibleLeft,e.visibleWidth,c,f,A,T,g,e.version,n]),u.jsx("canvas",{ref:t,width:Math.ceil(l),height:Math.ceil(s),tabIndex:0,style:{width:e.visibleWidth,height:e.timelineHeight,position:"absolute",pointerEvents:"none",cursor:lu?"pointer":"default"}})}function QG(e,t){let n=B;B=e,t(),B=n}function $G(e,t){const n=O.getTimelineRenderingProps();let l=n.selectionStartDisplayTime,s=n.selectionEndDisplayTime;l===s&&(l=-n.countdown,s=O.game.time-n.countdown+4);const c=O.imageExportConfig;let d,f;c.wrapThresholdSeconds===0?(d=1,f=s-l):(d=Math.ceil((s-l)/c.wrapThresholdSeconds),f=c.wrapThresholdSeconds);const E=document.createElement("canvas"),A=document.createElement("canvas"),R=Ce.trackHeight/2,T=O.timeline,S=T.positionFromTime(n.countdown);E.width=T.positionFromTime(s)+S;let g=Ce.renderSlotHeight();e&&(g+=Ce.rulerHeight,g+=Ce.trackHeight*T.getNumMarkerTracks()),E.height=g;const I=E.getContext("2d",{willReadFrequently:!0});QG(I,()=>{const v=I,U=0;v.fillStyle=t.background,v.fillRect(0,0,E.width,E.height);let H=0;e&&(H+=Bb(U,!0),H+=Fb(U,H,!0)),zb(U,H,!0)});const b=T.positionFromTime(l)+S,y=T.positionFromTime(s)+S;A.height=(R+g)*(d-1)+g,A.width=d===1?y-b:T.positionFromTime(f);const M=A.getContext("2d");for(let v=0;v<d;v++){const U=T.positionFromTime(f);if(b>y)break;const H=Math.min(y-(b+v*U),U),K=I.getImageData(b+v*U,0,H+1,E.height+1);M.putImageData(K,0,v*(R+g)),v>0&&H<U&&(M.fillStyle=t.background,M.fillRect(H,v*(R+g),U-H,E.height+1))}return A}function JG(){const[e,t]=C.useState(O.imageExportConfig),n=(E,A)=>{const R=Object.assign({},e);R[E]=A,O.setImageExportConfig(R),t(R),aa("img: "+E,JSON.stringify(A))},l={position:"relative",top:3,marginRight:"0.25em"},s=(E,A)=>u.jsxs("div",{style:{marginBottom:5},children:[u.jsx("input",{type:"checkbox",onClick:R=>n(E,R.currentTarget.checked),value:e[E]?"on":"off",style:l,defaultChecked:e[E]}),u.jsx("span",{children:p(A)})]}),c=E=>{Number.isNaN(parseFloat(E))||n("wrapThresholdSeconds",parseFloat(E))},d=u.jsxs(u.Fragment,{children:[u.jsx("div",{children:u.jsx(Gt,{defaultValue:e.wrapThresholdSeconds.toString(),description:u.jsxs("span",{children:[p({en:"seconds before wrapping ",zh:"每行秒数 "}),u.jsx(at,{topic:"png-wrap",content:p({en:"number of elapsed seconds, including the countdown, in each row in the image (set to 0 to never wrap)",zh:"从开始倒计时算起，每显示多少秒换一次行。如果填0则从不换行。"})}),":"," "]}),onChange:c,style:{margin:"10px 0"}})}),s("includeTime",{en:"include time and markers",zh:"显示时间刻度和时间轴标记"})]}),f=kt();return u.jsxs("div",{children:[u.jsx("p",{children:p({en:u.jsx("span",{children:"export the selected part of the timeline as a png according to the current display settings, or the whole timeline if nothing is selected"}),zh:"根据当前显示设置将时间轴内选择部分导出为png，如果无选择将整个时间轴导出"})}),d,u.jsx("p",{children:u.jsx(no,{filename:"fight",fileFormat:ml.Png,getContentFn:()=>$G(e.includeTime,f),displayName:p({en:"export selection as png",zh:"将选择部分导出为png"})})})]})}function ew(){const e=d=>{d.fileType===_i.Record?(O.loadBattleRecordFromFile(d),O.autoSave()):d.fileType===_i.MarkerTrackIndividual||d.fileType===_i.MarkerTracksCombined?window.alert("wrong file type '"+d.fileType+`'; use the "Timeline markers" section instead if you meant import markers.`):window.alert("wrong file type '"+d.fileType+"'.")},t=p({en:"Export fight to file",zh:"导出战斗到文件"}),n=u.jsxs("div",{children:[u.jsx("p",{children:p({en:"for sharing and importing:",zh:"用于分享和导入："})}),u.jsx(no,{fileFormat:ml.Json,getContentFn:()=>O.record.serialized(),filename:"fight",displayName:p({en:"txt format",zh:"txt格式"})}),u.jsx("p",{children:p({en:u.jsxs("span",{children:["for external tools such as excel and"," ",u.jsx("a",{href:"https://github.com/Tischel/BLMInTheShell",children:"Tischel's plugin"}),":"]}),zh:u.jsxs("span",{children:["用于excel，",u.jsx("a",{href:"https://github.com/Tischel/BLMInTheShell",children:"Tischel的插件"}),"等外部工具："]})})}),u.jsx(no,{fileFormat:ml.Csv,getContentFn:()=>({body:O.getActionsLogCsv()}),filename:"fight",displayName:p({en:"csv format",zh:"csv格式"})}),u.jsx("p",{children:p({en:u.jsxs("span",{children:["for use with"," ",u.jsx("a",{href:"https://colab.research.google.com/github/zqsz-xiv/xivintheshell-ama-sim-notebook/blob/main/in_the_shell_with_ama_sim.ipynb",children:"Amarantine's combat simulator"}),":"]}),zh:u.jsxs("span",{children:["用于",u.jsx("a",{href:"https://github.com/Amarantine-xiv/Amas-FF14-Combat-Sim",children:"Amarantine的战斗模拟器"}),"："]})})}),u.jsx(no,{fileFormat:ml.Csv,getContentFn:()=>O.getAmaSimCsv(),filename:"fight",displayName:p({en:"csv format",zh:"csv格式"})})]}),l=p({en:"Import fight from file",zh:"从文件导入战斗"}),s=u.jsx(Pf,{allowLoadFromUrl:!1,onLoadFn:e}),c=u.jsx(u.Fragment,{children:p({en:"Image Export",zh:"导出为图像"})});return u.jsx(VR,{contentHeight:_T,children:[{defaultSize:25,title:l,content:s},{defaultSize:30,title:t,content:n},{defaultSize:45,title:c,content:u.jsx(JG,{})}]})}function tw(){return u.jsxs("div",{children:[u.jsx(Qc,{uniqueName:"showDamageMarks",label:p({en:"show damage marks",zh:"显示伤害结算标记"}),onChange:e=>{O.setTimelineOptions({drawDamageMarks:e})}}),u.jsx(Qc,{uniqueName:"showHealingMarks",label:p({en:"show healing marks"}),onChange:e=>{O.setTimelineOptions({drawHealingMarks:e})}}),u.jsx(Qc,{uniqueName:"showMPAndLucidTickMarks",label:p({en:"show MP and lucid ticks",zh:"显示跳蓝和跳醒梦"}),onChange:e=>{O.setTimelineOptions({drawMPTickMarks:e})}}),u.jsx(Qc,{uniqueName:"showBuffIndicators",label:p({en:"show buff indicators",zh:"显示buff标记"}),onChange:e=>{O.setTimelineOptions({drawBuffIndicators:e})}})]})}let wi=()=>{},sR=e=>{};class qb extends mt.Component{constructor(n){super(n);j(this,"myRef");j(this,"updateVisibleRange");j(this,"state");this.state={timelineWidth:11,timelineHeight:300,visibleLeft:23,visibleWidth:66,version:0},this.myRef=mt.createRef(),this.updateVisibleRange=()=>{this.myRef.current&&this.setState({visibleLeft:this.myRef.current.scrollLeft,visibleWidth:this.myRef.current.clientWidth})}}componentDidMount(){this.setState({timelineWidth:O.timeline.getCanvasWidth(),timelineHeight:O.timeline.getCanvasHeight()}),wi=()=>{this.setState({timelineWidth:O.timeline.getCanvasWidth(),timelineHeight:O.timeline.getCanvasHeight(),version:this.state.version+1})},sR=n=>{if(this.myRef.current!=null){let l=this.myRef.current.clientWidth;this.myRef.current.scrollLeft=n-l*.6}this.updateVisibleRange()},this.updateVisibleRange()}componentWillUnmount(){wi=()=>{},sR=n=>{}}render(){let n=u.jsx(ZG,{timelineHeight:this.state.timelineHeight,visibleLeft:this.state.visibleLeft,visibleWidth:this.state.visibleWidth,version:this.state.version});const l=navigator.userAgent.indexOf("Firefox")>=0,s=Jf(this.context,"bgMediumContrast");return u.jsxs("div",{style:{position:"relative"},children:[n,u.jsx("div",{tabIndex:0,className:"visibleScrollbar",style:{position:"relative",width:"100%",overflowX:"scroll",overflowY:"clip",outline:"1px solid "+s,cursor:XG()?"pointer":"default",paddingBottom:l?10:0},ref:this.myRef,onScroll:c=>{this.myRef.current&&(this.myRef.current.scrollLeft=Math.min(this.myRef.current.scrollWidth-this.myRef.current.clientWidth,this.myRef.current.scrollLeft),this.setState({visibleLeft:this.myRef.current.scrollLeft,visibleWidth:this.myRef.current.clientWidth}))},onMouseMove:c=>{if(this.myRef.current){let d=this.myRef.current.getBoundingClientRect(),f=c.clientX-d.left,E=c.clientY-d.top;jb(f,E)}},onMouseEnter:c=>{Yb()},onMouseLeave:c=>{Kb()},onClick:c=>{Vb(c)},onKeyDown:c=>{Wb(c)},children:u.jsx("div",{style:{position:"relative",backgroundColor:"transparent",width:this.state.timelineWidth,height:this.state.timelineHeight,pointerEvents:"none"}})})]})}}j(qb,"contextType",jn);const Xb=320,_T=Xb-40;function aw(){return u.jsxs("div",{style:{position:"relative",margin:6},children:[u.jsx(_C,{uniqueName:"timeline",maxWidth:1440,content:[{titleNode:p({en:"Timeline markers",zh:"时间轴标记"}),contentNode:u.jsx(P0,{})},{titleNode:u.jsxs("div",{style:{position:"relative"},children:[p({en:"Timeline editor ",zh:"时间轴编辑器 "}),u.jsx(at,{topic:"timeline editor",content:u.jsxs("div",{children:[u.jsx("div",{className:"paragraph",style:{color:"orangered"},children:u.jsx("b",{children:p({en:"Has the bare minimum features but might still be buggy (let me know). Would recommend going over Instructions/Troubleshoot first, plus saving data to drive in case bugs mess up the entire tool",zh:"本编辑器仍在开发中，不过有最基本的各项功能，请务必向我们汇报任何发现的bug。"})})}),u.jsx("div",{className:"paragraph",children:p({en:"I hope it's otherwise self-explanatory. Note that edits made here are not saved until they're applied to the actual timeline.",zh:"使用前最好先阅读使用指南并时刻保存各项数据。"})})]})})]}),contentNode:u.jsx(lU,{})},{titleNode:p({en:"Import/Export",zh:"导入/导出"}),contentNode:u.jsx("div",{children:u.jsx(ew,{})})},{titleNode:p({en:"Display settings",zh:"显示设置"}),contentNode:u.jsx(tw,{})}],collapsible:!0,scrollable:!1,height:Xb,defaultSelectedIndex:void 0}),u.jsx(zU,{uniqueName:"timelineDisplayScale",description:p({en:"horizontal scale ",zh:"水平缩放 "}),defaultValue:"0.4",style:{position:"absolute",top:0,right:6,height:kf,lineHeight:`${kf}px`,verticalAlign:"middle"},onChange:e=>{O.timeline.setHorizontalScale(parseFloat(e)),O.scrollToTime()}})]})}function nw(){return u.jsxs("div",{style:{bottom:0,left:0,right:0,paddingLeft:0,paddingRight:0,borderTop:"2px solid "+kt().bgHighContrast,flex:0},children:[u.jsx(qb,{}),u.jsx(aw,{})]})}const pT=C.createContext(void 0),IT=C.createContext(void 0);function iw(){const e=C.useContext(IT),t=C.useContext(pT);if(!(t===void 0&&e===void 0))return{...e,...t}}function Es(){const e=C.useContext(IT),t=C.useContext(pT);if(t===void 0)throw new Error("Base UI: DialogRootContext is missing. Dialog parts must be placed within <Dialog.Root>.");return{...e,...t}}function Vr(e){const t=typeof e.render=="string"?e.render:void 0,n=typeof e.render=="string"?void 0:e.render;return{renderElement:fh(t,{className:e.className,render:n},{...e,props:e.extraProps})}}const lw={...dh,...FR},ow=C.forwardRef(function(t,n){const{render:l,className:s,...c}=t,{open:d,nested:f,mounted:E,transitionStatus:A,backdropRef:R}=Es(),T=C.useMemo(()=>({open:d,transitionStatus:A}),[d,A]),S=wr(R,n),{renderElement:g}=Vr({render:l??"div",className:s,state:T,ref:S,extraProps:gl({role:"presentation",hidden:!E,style:{userSelect:"none",WebkitUserSelect:"none"}},c),customStyleHookMapping:lw});return f?null:g()});function sw(e){const{rootElementName:t=""}=e,[n,l]=C.useState(t.toUpperCase()),s=C.useCallback(c=>{l((c==null?void 0:c.tagName)??"")},[]);return{rootElementName:n,updateRootElementName:s}}const rw=C.createContext(void 0);function cw(e=!1){const t=C.useContext(rw);if(t===void 0&&!e)throw new Error("Base UI: CompositeRootContext is missing. Composite parts must be placed within <Composite.Root>.");return t}function Zb(e={}){const{buttonRef:t,disabled:n=!1,focusableWhenDisabled:l,tabIndex:s,type:c="button",elementName:d}=e,f=C.useRef(null),{rootElementName:E,updateRootElementName:A}=sw({rootElementName:d}),R=cw(!0)!==void 0,T=ui(()=>{const y=f.current;return E==="BUTTON"||E==="INPUT"&&["button","submit","reset"].includes(y==null?void 0:y.type)}),S=ui(()=>{const y=f.current;return!!(E==="A"&&(y!=null&&y.href))}),g=wr(A,t,f),I=C.useMemo(()=>{const y={};return s!==void 0&&!R&&(y.tabIndex=s),E==="BUTTON"||E==="INPUT"?l||R?y["aria-disabled"]=n:R||(y.disabled=n):E!==""&&(E!=="A"?(y.role="button",R||(y.tabIndex=s??0)):s&&!R&&(y.tabIndex=s),n&&(y["aria-disabled"]=n,R||(y.tabIndex=l?s??0:-1))),y},[n,E,l,R,s]);return Pi(()=>{const y=f.current;y instanceof HTMLButtonElement&&R&&n&&I.disabled===void 0&&y.disabled&&(y.disabled=!1)},[n,I.disabled,R]),{getButtonProps:C.useCallback((y={})=>{const{onClick:M,onMouseDown:v,onKeyUp:U,onKeyDown:H,onPointerDown:K,...F}=y;return gl({type:E==="BUTTON"||E==="INPUT"?c:void 0,onClick(x){if(n){x.preventDefault();return}M==null||M(x)},onMouseDown(x){n||v==null||v(x)},onKeyDown(x){(n&&l&&x.key!=="Tab"||x.target===x.currentTarget&&!T()&&x.key===" ")&&x.preventDefault(),n||(wm(x),H==null||H(x)),!x.baseUIHandlerPrevented&&x.target===x.currentTarget&&!T()&&!S()&&x.key==="Enter"&&!n&&(M==null||M(x),x.preventDefault())},onKeyUp(x){n||(wm(x),U==null||U(x)),!x.baseUIHandlerPrevented&&x.target===x.currentTarget&&!T()&&!n&&x.key===" "&&(M==null||M(x))},onPointerDown(x){if(n){x.preventDefault();return}K==null||K(x)},ref:g},I,F)},[I,n,E,l,T,S,g,c]),buttonRef:g}}function uw(e){const{open:t,setOpen:n,rootRef:l,disabled:s}=e,c=ui(E=>{t&&n(!1,E.nativeEvent,"click")}),{getButtonProps:d}=Zb({disabled:s,buttonRef:l});return{getRootProps:E=>gl({onClick:c},E,d)}}const dw=C.forwardRef(function(t,n){const{render:l,className:s,disabled:c=!1,...d}=t,{open:f,setOpen:E}=Es(),{getRootProps:A}=uw({disabled:c,open:f,setOpen:E,rootRef:n}),R=C.useMemo(()=>({disabled:c}),[c]),{renderElement:T}=Vr({render:l??"button",className:s,state:R,propGetter:A,extraProps:d});return T()});let iN=0;function fw(e,t="mui"){const[n,l]=C.useState(e),s=e||n;return C.useEffect(()=>{n==null&&(iN+=1,l(`${t}-${iN}`))},[n,t]),s}const hw={...Zf},lN=hw.useId;function Ew(e,t){if(lN!==void 0){const n=lN();return e??`${t}-${n}`}return fw(e,t)}function Qb(e){return Ew(e,"base-ui")}const Aw={},mw=C.forwardRef(function(t,n){const{render:l,className:s,id:c,...d}=t,{setDescriptionElementId:f}=Es(),E=Qb(c);Pi(()=>(f(E),()=>{f(void 0)}),[E,f]);const A=C.useCallback((T={})=>gl({id:E},T),[E]),{renderElement:R}=Vr({propGetter:A,render:l??"p",className:s,state:Aw,ref:n,extraProps:d});return R()});function Rw(e){const{descriptionElementId:t,getPopupProps:n,initialFocus:l,modal:s,mounted:c,openMethod:d,ref:f,setPopupElement:E,titleElementId:A}=e,R=C.useRef(null),T=wr(f,R,E),S=C.useCallback(b=>b==="touch"?R:0,[]),g=C.useMemo(()=>l==null?S(d??""):typeof l=="function"?l(d??""):l,[S,l,d]);return{getRootProps:b=>gl({"aria-labelledby":A??void 0,"aria-describedby":t??void 0,"aria-modal":c&&s===!0?!0:void 0,role:"dialog",tabIndex:-1,...n(),ref:T,hidden:!c},b),resolvedInitialFocus:g}}let Tw=function(e){return e.nestedDialogs="--nested-dialogs",e}({}),Sw=function(e){return e[e.open=Fo.open]="open",e[e.closed=Fo.closed]="closed",e[e.startingStyle=Fo.startingStyle]="startingStyle",e[e.endingStyle=Fo.endingStyle]="endingStyle",e.nested="data-nested",e.nestedDialogOpen="data-nested-dialog-open",e}({});const gw=C.forwardRef(function(t,n){return u.jsx("div",{ref:n,role:"presentation","data-floating-ui-inert":!0,...t,style:{position:"fixed",inset:0,userSelect:"none",WebkitUserSelect:"none"}})}),$b=C.createContext(void 0);function _w(){const e=C.useContext($b);if(e===void 0)throw new Error("Base UI: <Dialog.Portal> is missing.");return e}function pw(e){return M0(19)?e:e?"true":void 0}const Iw={...dh,...FR,nestedDialogOpen(e){return e?{[Sw.nestedDialogOpen]:""}:null}},Nw=C.forwardRef(function(t,n){const{className:l,finalFocus:s,initialFocus:c,render:d,...f}=t,{descriptionElementId:E,dismissible:A,floatingRootContext:R,getPopupProps:T,modal:S,mounted:g,nested:I,nestedOpenDialogCount:b,open:y,openMethod:M,popupRef:v,setPopupElement:U,titleElementId:H,transitionStatus:K,onOpenChangeComplete:F,internalBackdropRef:x}=Es();_w(),uh({open:y,ref:v,onComplete(){y&&(F==null||F(!0))}});const re=wr(n,v),{getRootProps:ie,resolvedInitialFocus:se}=Rw({descriptionElementId:E,getPopupProps:T,initialFocus:c,modal:S,mounted:g,openMethod:M,ref:re,setPopupElement:U,titleElementId:H}),oe=b>0,de=C.useMemo(()=>({open:y,nested:I,transitionStatus:K,nestedDialogOpen:oe}),[y,I,K,oe]),{renderElement:Ae}=Vr({render:d??"div",className:l,state:de,propGetter:ie,extraProps:{...f,style:{...f.style,[Tw.nestedDialogs]:b}},customStyleHookMapping:Iw});return u.jsxs(C.Fragment,{children:[g&&S===!0&&u.jsx(gw,{ref:x,inert:pw(!y)}),u.jsx(nx,{context:R,disabled:!g,closeOnFocusOut:A,initialFocus:se,returnFocus:s,modal:S!==!1,children:Ae()})]})});function Cw(e){const{children:t,keepMounted:n=!1,container:l}=e,{mounted:s}=Es();return s||n?u.jsx($b.Provider,{value:n,children:u.jsx($H,{root:l,children:t})}):null}const bw=typeof document<"u"?mt.useLayoutEffect:()=>{};function rR(...e){return(...t)=>{for(let n of e)typeof n=="function"&&n(...t)}}function NT(e){var t;return typeof window<"u"&&window.navigator!=null?e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform):!1}function Oh(e){let t=null;return()=>(t==null&&(t=e()),t)}const Ow=Oh(function(){return NT(/^Mac/i)}),Dw=Oh(function(){return NT(/^iPhone/i)}),yw=Oh(function(){return NT(/^iPad/i)||Ow()&&navigator.maxTouchPoints>1}),vw=Oh(function(){return Dw()||yw()});function oN(e,t){if(!e)return!1;let n=window.getComputedStyle(e),l=/(auto|scroll)/.test(n.overflow+n.overflowX+n.overflowY);return l&&t&&(l=e.scrollHeight!==e.clientHeight||e.scrollWidth!==e.clientWidth),l}function Jb(e,t){let n=e;for(oN(n,t)&&(n=n.parentElement);n&&!oN(n,t);)n=n.parentElement;return n||document.scrollingElement||document.documentElement}const gm=typeof document<"u"&&window.visualViewport,Mw=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let Zd=0,_m;function Lw(e={}){let{isDisabled:t}=e;bw(()=>{if(!t)return Zd++,Zd===1&&(vw()?_m=xw():_m=Hw()),()=>{Zd--,Zd===0&&_m()}},[t])}function Hw(){return rR(ur(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`),ur(document.documentElement,"overflow","hidden"))}function xw(){let e,t,n=A=>{e=Jb(A.target,!0),!(e===document.documentElement&&e===document.body)&&e instanceof HTMLElement&&window.getComputedStyle(e).overscrollBehavior==="auto"&&(t=ur(e,"overscrollBehavior","contain"))},l=A=>{if(!e||e===document.documentElement||e===document.body){A.preventDefault();return}e.scrollHeight===e.clientHeight&&e.scrollWidth===e.clientWidth&&A.preventDefault()},s=()=>{t&&t()},c=A=>{let R=A.target;Uw(R)&&(f(),R.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{R.style.transform="",gm&&(gm.height<window.innerHeight?requestAnimationFrame(()=>{sN(R)}):gm.addEventListener("resize",()=>sN(R),{once:!0}))}))},d=null,f=()=>{if(d)return;let A=()=>{window.scrollTo(0,0)},R=window.pageXOffset,T=window.pageYOffset;d=rR(Vc(window,"scroll",A),ur(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`),ur(document.documentElement,"overflow","hidden"),ur(document.body,"marginTop",`-${T}px`),()=>{window.scrollTo(R,T)}),window.scrollTo(0,0)},E=rR(Vc(document,"touchstart",n,{passive:!1,capture:!0}),Vc(document,"touchmove",l,{passive:!1,capture:!0}),Vc(document,"touchend",s,{passive:!1,capture:!0}),Vc(document,"focus",c,!0));return()=>{t==null||t(),d==null||d(),E()}}function ur(e,t,n){let l=e.style[t];return e.style[t]=n,()=>{e.style[t]=l}}function Vc(e,t,n,l){return e.addEventListener(t,n,l),()=>{e.removeEventListener(t,n,l)}}function sN(e){let t=document.scrollingElement||document.documentElement,n=e;for(;n&&n!==t;){let l=Jb(n);if(l!==document.documentElement&&l!==document.body&&l!==n){let s=l.getBoundingClientRect().top,c=n.getBoundingClientRect().top;c>s+n.clientHeight&&(l.scrollTop+=c-s)}n=l.parentElement}}function Uw(e){return e instanceof HTMLInputElement&&!Mw.has(e.type)||e instanceof HTMLTextAreaElement||e instanceof HTMLElement&&e.isContentEditable}function kw(){if(typeof navigator>"u")return{platform:"",maxTouchPoints:-1};const e=navigator.userAgentData;return e!=null&&e.platform?{platform:e.platform,maxTouchPoints:navigator.maxTouchPoints}:{platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints}}function eO(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter:none")}function cR(){const e=kw();return e.platform==="MacIntel"&&e.maxTouchPoints>1?!0:/iP(hone|ad|od)|iOS/.test(e.platform)}function Pw(){return/firefox/i.test(UR())}function yu(e){return e&&e.ownerDocument||document}function tO(e){return yu(e).defaultView||window}let rN={},cN={},uN="",eu=0,dN=()=>{};function Gw(){return eu}function ww(){return typeof CSS<"u"&&typeof CSS.supports=="function"&&CSS.supports("height","1dvh")}function Bw(e){if(typeof document>"u")return!1;const t=yu(e);return tO(t).innerWidth-t.documentElement.clientWidth>0}function Fw(e){var T;const t=yu(e),n=t.documentElement,l=t.body,s=tO(n);let c=0,d=0,f=-1;if(eO()&&(((T=s.visualViewport)==null?void 0:T.scale)??1)!==1)return()=>{};function E(){var x;const S=s.getComputedStyle(n),g=s.getComputedStyle(l);c=n.scrollTop,d=n.scrollLeft,rN={overflowY:n.style.overflowY,overflowX:n.style.overflowX},uN=n.style.scrollBehavior,cN={position:l.style.position,height:l.style.height,width:l.style.width,boxSizing:l.style.boxSizing,overflowY:l.style.overflowY,overflowX:l.style.overflowX,scrollBehavior:l.style.scrollBehavior};const I=(x=S.scrollbarGutter)==null?void 0:x.includes("stable"),b=n.scrollHeight>n.clientHeight,y=n.scrollWidth>n.clientWidth,M=S.overflowY==="scroll"||g.overflowY==="scroll",v=S.overflowX==="scroll"||g.overflowX==="scroll",U=Math.max(0,s.innerWidth-n.clientWidth),H=Math.max(0,s.innerHeight-n.clientHeight);Object.assign(n.style,{overflowY:!I&&(b||M)?"scroll":"hidden",overflowX:!I&&(y||v)?"scroll":"hidden"});const K=parseFloat(g.marginTop)+parseFloat(g.marginBottom),F=parseFloat(g.marginLeft)+parseFloat(g.marginRight);Object.assign(l.style,{position:"relative",height:K||H?`calc(100dvh - ${K+H}px)`:"100dvh",width:F||U?`calc(100vw - ${F+U}px)`:"100vw",boxSizing:"border-box",overflow:"hidden",scrollBehavior:"unset"}),l.scrollTop=c,l.scrollLeft=d,n.setAttribute("data-base-ui-scroll-locked",""),n.style.scrollBehavior="unset"}function A(){Object.assign(n.style,rN),Object.assign(l.style,cN),n.scrollTop=c,n.scrollLeft=d,n.removeAttribute("data-base-ui-scroll-locked"),n.style.scrollBehavior=uN}function R(){A(),cancelAnimationFrame(f),f=requestAnimationFrame(E)}return E(),s.addEventListener("resize",R),()=>{cancelAnimationFrame(f),A(),s.removeEventListener("resize",R)}}function zw(e){const{enabled:t=!0,mounted:n,open:l,referenceElement:s}=e,c=C.useMemo(()=>t&&(cR()||!ww()||Pw()&&!Bw(s)),[t,s]);Pi(()=>{if(n&&!l&&eO()){const d=yu(s),f=d.body.style.userSelect,E=d.body.style.webkitUserSelect;return d.body.style.userSelect="none",d.body.style.webkitUserSelect="none",()=>{d.body.style.userSelect=f,d.body.style.webkitUserSelect=E}}},[n,l,s]),Lw({isDisabled:!c}),Pi(()=>{if(!(!t||c))return eu+=1,eu===1&&(dN=Fw(s)),()=>{eu-=1,eu===0&&dN()}},[t,c,s])}function jw(e){const t=C.useRef(""),n=C.useCallback(s=>{s.defaultPrevented||(t.current=s.pointerType)},[]);return{onClick:C.useCallback(s=>{if(s.detail===0){e(s,"keyboard");return}"pointerType"in s&&e(s,s.pointerType),e(s,t.current),t.current=""},[e]),onPointerDown:n}}function Yw(e){const[t,n]=C.useState(null);!e&&t!==null&&n(null);const l=C.useCallback((d,f)=>{e||n(f)},[e,n]),{onClick:s,onPointerDown:c}=jw(l);return C.useMemo(()=>({openMethod:t,triggerProps:{onClick:s,onPointerDown:c}}),[t,s,c])}function Kw(e){const{enabled:t,setLock:n,popupRef:l}=e,s=ui(n),c=C.useRef(t);Pi(()=>{if(!cR()||(t&&(c.current=!0),!c.current))return;const E=yu(l.current).documentElement;if(t){const A=E.scrollLeft,R=E.scrollTop;return()=>{Gw()===0&&(E.scrollLeft=A,E.scrollTop=R)}}},[t,l]);const d=ui(f=>{if(!cR())return;const E=gi(f.nativeEvent);sh(E)&&(s(!1),setTimeout(()=>s(!0)))});return C.useMemo(()=>({floating:{onFocus:d,onClick:d}}),[d])}function Vw(e){const{defaultOpen:t,dismissible:n,modal:l,onNestedDialogClose:s,onNestedDialogOpen:c,onOpenChange:d,open:f,onOpenChangeComplete:E}=e,[A,R]=N0({controlled:f,default:t,name:"DialogRoot",state:"open"}),T=C.useRef(null),S=C.useRef(null),g=C.useRef(null),[I,b]=C.useState(void 0),[y,M]=C.useState(void 0),[v,U]=C.useState(null),[H,K]=C.useState(null),[F,x]=C.useState(!0),{mounted:re,setMounted:ie,transitionStatus:se}=C0(A),oe=ui((be,Ne,Ie)=>{d==null||d(be,Ne,Ie),R(be)}),de=ui(()=>{ie(!1),E==null||E(!1)});uh({enabled:!e.actionsRef,open:A,ref:T,onComplete(){A||de()}}),C.useImperativeHandle(e.actionsRef,()=>({unmount:de}),[de]);const ee=BR({elements:{reference:v,floating:H},open:A,onOpenChange:(be,Ne,Ie)=>{oe(be,Ne,O0(Ie))}}),[J,w]=C.useState(0),L=J===0,W=hx(ee),le=lx(ee),D=p0(ee,{outsidePressEvent:"mousedown",outsidePress(be){if(be.button!==0)return!1;const Ne=gi(be);if(L&&n){const Ie=Ne;return l?Ie?[g.current,S.current].includes(Ie):!1:!0}return!1},escapeKey:L}),X=A&&l===!0,Z=X&&F,Y=Kw({enabled:X,setLock:x,popupRef:T});zw({enabled:Z,mounted:re,open:A,referenceElement:H});const{getReferenceProps:ce,getFloatingProps:me}=I0([W,le,D,Y]);C.useEffect(()=>(c&&A&&c(J),s&&!A&&s(),()=>{s&&A&&s()}),[A,s,c,J]);const he=C.useCallback(be=>{w(be+1)},[]),Se=C.useCallback(()=>{w(0)},[]),{openMethod:Te,triggerProps:Oe}=Yw(A),Be=C.useCallback((be={})=>ce(gl(Oe,be)),[ce,Oe]);return C.useMemo(()=>({modal:l,setOpen:oe,open:A,titleElementId:I,setTitleElementId:b,descriptionElementId:y,setDescriptionElementId:M,onNestedDialogOpen:he,onNestedDialogClose:Se,nestedOpenDialogCount:J,openMethod:Te,mounted:re,transitionStatus:se,getTriggerProps:Be,getPopupProps:me,setTriggerElement:U,setPopupElement:K,popupRef:T,backdropRef:S,internalBackdropRef:g,floatingRootContext:ee}),[l,oe,A,I,y,he,Se,J,Te,re,se,Be,me,ee])}const Ww=function(t){const{children:n,defaultOpen:l=!1,dismissible:s=!0,modal:c=!0,onOpenChange:d,open:f,actionsRef:E,onOpenChangeComplete:A}=t,R=iw(),T=Vw({open:f,defaultOpen:l,onOpenChange:d,modal:c,dismissible:s,actionsRef:E,onOpenChangeComplete:A,onNestedDialogClose:R==null?void 0:R.onNestedDialogClose,onNestedDialogOpen:R==null?void 0:R.onNestedDialogOpen}),S=!!R,g=C.useMemo(()=>({...T,nested:S,onOpenChangeComplete:A}),[T,S,A]),I=C.useMemo(()=>({dismissible:s}),[s]);return u.jsx(pT.Provider,{value:g,children:u.jsx(IT.Provider,{value:I,children:n})})},qw={},Xw=C.forwardRef(function(t,n){const{render:l,className:s,id:c,...d}=t,{setTitleElementId:f}=Es(),E=Qb(c);Pi(()=>(f(E),()=>{f(void 0)}),[E,f]);const A=C.useCallback((T={})=>gl({id:E},T),[E]),{renderElement:R}=Vr({propGetter:A,render:l??"h2",className:s,state:qw,ref:n,extraProps:d});return R()}),Zw=C.forwardRef(function(t,n){const{render:l,className:s,disabled:c=!1,...d}=t,{open:f,setTriggerElement:E,getTriggerProps:A}=Es(),R=C.useMemo(()=>({disabled:c,open:f}),[c,f]),T=wr(n,E),{getButtonProps:S}=Zb({disabled:c,buttonRef:T}),{renderElement:g}=Vr({render:l??"button",className:s,state:R,propGetter:I=>S(A(I)),extraProps:d,customStyleHookMapping:y0});return g()}),In=JSON.parse(`[{"date":"6/19/25","changes":["[DRK] Added initial support for DRK."],"changes_zh":["【暗黑骑士】 加了初步的暗黑骑士支持。"],"level":"major"},{"date":"6/18/25","changes":["Fixed a bug where the \\"wait until timestamp\\" events would change times unexpectedly."],"changes_zh":["修复了\\"快进至\\"时间会意外地改变目标时间的问题。"],"level":"minor"},{"date":"6/17/25","changes":["Fixed timestamps not appearing in the timeline editor when a new skill is added.","Fixed skill selections ending on \\"wait\\" events not rendering correctly in the graphical timeline.","Fixed skill tooltips in the graphical timeline not displaying AoE potency."],"changes_zh":["修复了新加的技能在时间轴编辑器里不显示出时间戳的问题。","修复了选择在\\"快进至\\"结束不正确地在图形时间轴内显示出的问题。","修复了在图形时间轴内的技能工具提示没显示aoe威力的问题。"],"level":"minor"},{"date":"6/16/25","changes":["[BLU] Added support for Blue Mage."],"changes_zh":["【青魔】增加青魔支持。"],"level":"minor"},{"date":"6/6/25","changes":["[GNB][SGE] Chinese localization."],"changes_zh":["【绝枪战士】【贤者】汉化。"],"level":"minor"},{"date":"6/3/25","changes":["Added the ability to save invalid timelines on the visual canvas. Changes in the timeline editor now reflect in the graphical timeline as well.","The \\"jump to timestamp\\" and \\"wait for MP tick\\" buttons will now always look for the specified timestamp/next MP tick, even when actions are shifted in the timeline editor.","Added a \\"Clone timeline slot\\" button.","See our \\"known bugs\\" page on GitHub for limitations: https://github.com/xivintheshell/xivintheshell/wiki/Known-Bugs"],"changes_zh":["增加了保存有问题的时间轴的功能。时间轴编辑器里的变化现在会在图形时间轴内显示出。","《快进至指定时间》和《快进到跳蓝》的按钮会在使用时间轴编辑器后坚持寻找设定的时间或下一个跳蓝。","增加了《复制时间轴》按钮。","如果想知道已知问题，请查看GitHub网页：https://github.com/xivintheshell/xivintheshell/wiki/Known-Bugs"],"level":"major"},{"date":"5/29/25","changes":["[PLD] Chinese localization adjustments.","[SMN] Chinese localization; fix summon lock bar not showing progress."],"changes_zh":["【骑士】汉化补充。","【召唤师】汉化实装；修复召唤剩余时间进度条不显示的问题。"],"level":"minor"},{"date":"5/28/25","changes":["[PLD] Chinese localization first draft."],"changes_zh":["【骑士】汉化初稿。"],"level":"minor"},{"date":"5/27/25","changes":["[BRD][MCH][SMN] Adjusted AoE potencies to reflect patch 7.25."],"changes_zh":["【吟游诗人】【机工士】【召唤师】调整多目标技能威力至7.25版本的数值。"],"level":"minor"},{"date":"5/26/25","changes":["Fixed a bug where damage log CSV export didn't work (thanks ryxiv)."],"level":"minor"},{"date":"5/23/25","changes":["Adjusted the calculations for the effect of crit/DH party buffs on auto-crit/DH hits, like PCT's Hammer combo.","Fixed a bug with export to Ama's combat sim where Chain Stratagem and Dokumori would not apply to the boss."],"changes_zh":["调整了暴击和直击团辅对必直暴的技能（比如：绘灵法师的重锤连击）的影响。","Fixed a bug with export to Ama's combat sim where Chain Stratagem and Dokumori would not apply to the boss."],"level":"minor"},{"date":"5/18/25","changes":["Updated the site to automatically use dark mode if your system is set to use it. Manually using the theme selector overrides this.","[GNB] Fixed a typo where \\"Lightning Shot\\" was incorrectly called \\"Lightning Shock.\\"","[GNB] Updated the application delay of Trajectory from 0.22 to 0.66 to match the current version of the game."],"level":"minor"},{"date":"5/17/25","changes":["We've made some big updates to the tools we use to build XIV in the Shell. The site should work the same as before, but if you notice anything broken or slow, please let us know posthaste.","We're planning on adding some large features in the near feature, so we've also made the changelog more prominent in anticipation. Please look forward to it."],"changes_zh":["我们对制造XIV in the Shell的软件工具做了大更新。网站的操作应该和以前一样、如果您发现有任何功能有破坏或变慢了，请尽快通知我们。","因为我们准备在不久的将来内对排轴器增加大功能，所以我们先把更新日志变得更加引人注意。更大的公告也会有像这样的中文翻译。敬请期待。"],"level":"major"},{"date":"5/10/25","changes":["[PLD] Added initial support for PLD"],"changes_zh":["【骑士】 加了初步的骑士支持。"],"level":"major"},{"date":"5/9/25","changes":["[RPR] Fixed a bug where Regress wasn't usable in enshroud","[RPR] Fixed a bug where Grim Swathe was replaced with Lemure's Slice instead of Lemure's Scythe","[RPR] Fixed a bug where Perfectio was usable in enshroud","[RPR] Fixed a bug where Executioner's Gibbet/Gallows weren't replaced with Void/Cross Reaping while in enshroud","[SMN] Fixed a bug where Slipstream's initial hit falloff was displayed incorrectly in the DoT table (thanks omor1)","[SMN] Fixed the potency of Mountain Buster (was incorrectly listed as 170 instead of 160, thanks omor1)"]},{"date":"5/2/25","changes":["Changed Ama's combat sim export to disable auto-attacks for healer/caster jobs."]},{"date":"4/28/25","changes":["Refactored cooldown logic. Changes should not affect end users, but let us know if anything is off.","Added a few missing translations"]},{"date":"4/21/25","changes":["Updated compatibility with Ama's combat sim for newly-supported jobs."]},{"date":"4/17/25","changes":["[RPR] Added a button to gain +10 Soul Gauge to simulate a target dying with Death's Design active","[BRD] Fixed a bug where Iron Jaws checked the dot status at application time instead of confirmation time (thanks Yumiya)","[BRD] Fixed a bug where Empyreal Arrow applied repertoire at application time instead of confirmation time (also thanks Yumiya)"]},{"date":"4/13/25","changes":["Added English-language markers for M8S"]},{"date":"4/7/25","changes":["Added English-language markers for M7S"]},{"date":"4/6/25","changes":["Added English-language markers for M5S + M6S"]},{"date":"3/29/25","changes":["[BLM] Removed \\"outdated\\" status"]},{"date":"3/26/25","changes":["Added user survey link"]},{"date":"3/24/25","changes":["We have updated the site in accordance with the 7.2 patch notes. Goodbye to the Enochian timer o7","[BLM] will remain in \\"outdated\\" status until we have a change to play with the changes in-game.","Since most jobs received only potency changes, your old 7.1 plans should work, but as usual, please let us know if anything seems incorrect."]},{"date":"3/20/25","changes":["[DNC] Fixed an issue where the icons for Finishing Move Ready and Last Dance Ready were swapped, and an issue where Last Dance Ready was not consumed by Last Dance (thank you bluke)"]},{"date":"3/16/25","changes":["Fixed an issue where resource toggles were shown in their timeline editor with their internal keys rather than localized test.","Fixed mistakes in DoT effect override calculations.","In anticipation of patch 7.2, we're working on some changes to make it easier to migrate timelines after site or game changes. The following things have changed:","- Single-clicking an action will now try to use it as soon as the current animation lock/skill cooldown is over (this used to require double-clicking). If the action cannot be used, a wait is automatically added to the timeilne.","- In \\"manual\\" control mode, you no longer need to press space to advance past an action's animation lock (it will now advance automatically when a skill is used).","- Displayed wait durations are now always calculated from the end of the previous animation lock. Any existing timelines will automatically be adjusted--the shown wait times may be different, but the times where actions are used will remain the same.","- Skill sequence presets now include wait durations. This lets you load/save sequences that use late weaves or wait for MP ticks (assuming ticks still line up quietly).","As a consequence of these changes, you actually might now be able to load BLM timelines from 7.05/7.0 that previously were broken as a result of Despair becoming instant. Despair will still be instant and other buff usage will be unchanged, but the time between abilities should be correct.","These changes are very large, and while we've tested to make sure they won't break your existing timelines, there might still be some bugs that slipped through the cracks. As always, please reach out to us if you encounter any problems."]},{"date":"3/1/25","changes":["Make it so that you can only delete the currently active slot, to hopefully reduce the chance of accidentally deleting a slot when switching"]},{"date":"2/26/25","changes":["Updated the GCD formula because the old formula may be off by 0.01s when there is haste buff. Thank you Yuyuka for spotting the error. Note: old timelines (including timelines in browser localStorage) aren't affected; only newly created timelines use the new formula."]},{"date":"2/22/25","changes":["Added Queen Eternal markers by 小盐"]},{"date":"2/21/25","changes":["[BRD][GNB][SMN] Removed testing tag"]},{"date":"2/20/25","changes":["[SGE] Initial implementation for SGE","- Some rough edges still exist around Krasis' healing potency modification and Eukrasian shield handling.","- Basic functionality should be reasonably complete.","[RDM] Fixed a bug where Manafication could be used before combat"]},{"date":"2/16/25","changes":["[SAM] Fixed Hagakure only being usable at 3 sen"]},{"date":"2/15/25","changes":["[BLM] Fixed Manafont CD at lvl80 and below: should be 120s"]},{"date":"2/13/25","changes":["Updated English FRU tracks to more accurately reflect downtime between phases. We previously used the \\"death\\" event in a log as the end of a phase, but it turns out this is inaccurate as the last damage application to the boss occurs ~2 seconds before its recorded death.","- P1 to P2 untargetable duration increased by 2 seconds","- P2 to intermission untargetable duration decreased to align with the \\"crystals become targetable\\" mark","- Intermission to P3 downtime increased to match Gaia's attack killing the crystal","In order to not break existing timelines, the preset EN full fight track now treats P1 as dying 2 seconds before the end of the enrage cast. The start times of all phases are unaffected."]},{"date":"2/4/25","changes":["[SAM] Fixed AoE combo actions not ending the combo","[DRG] Added initial support for DRG"]},{"date":"2/2/25","changes":["[BRD][DNC] Fixed bonuses given from certain crit/DH buffs not applying in total potency calculations"]},{"date":"2/1/25","changes":["[WAR][SAM][RPR][MCH][DNC] Implemented localization for some recently added jobs"]},{"date":"1/27/25","changes":["[SMN] Added initial support for SMN"]},{"date":"1/26/25","changes":["[WAR][GNB] Fixed missing icon for tank LB3s"]},{"date":"1/18/25","changes":["[GNB] Added initial support for GNB"]},{"date":"1/17/25","changes":["Added \\"move end of selection to start of selection\\" button to the timeline editor"]},{"date":"1/12/25","changes":["[RPR] Fixed a bug where oGCDs would improperly consume Reaver/Executioner stacks"]},{"date":"1/8/25","changes":["[WAR] Fixed surging tempest text not showing up in potency modifier tooltip","[MCH] Fixed Overheated potency modifier not being applied"]},{"date":"1/5/25","changes":["Fixed a bug where multi-target spells lost their target counts when using the timeline editor"]},{"date":"1/4/25","changes":["Added support for multi-target abilities"]},{"date":"1/3/25","changes":["[WAR][SAM][RPR] Removed testing tag"]},{"date":"1/1/25","changes":["Added combined English FRU tracks"]},{"date":"12/28/24","changes":["[PCT] Fixed warning for Palette Gauge overcap"]},{"date":"12/24/24","changes":["[MCH] Added support for Flamethrower"]},{"date":"12/22/24","changes":["[BRD] Added initial support for BRD","Overhaul DoT tracking to provide better usage statistics","[BLM] Added High Thunder II"]},{"date":"12/20/24","changes":["Fixed stats tables not including party buff potencies for most skills","Removed flank/rear positional resources for non-melee jobs"]},{"date":"12/19/24","changes":["[WAR] Adjusted animation lock of Primal Rend","Fixed Down for the Count timing in FRU P4 (thanks xi12570)"]},{"date":"12/16/24","changes":["Limit breaks for all jobs!","[MCH][DNC] Removed testing tag","Updated \\"About this tool\\" section","More underlying implementation changes","[PCT] Made Hammer combo expire with Hammer Time buff (changed in 7.1)"]},{"date":"12/13/24","changes":["Fixed sometimes unable to use skills in manual mode with double click","[RPR] Added timer for Immortal Sacrifice","[RPR] Removed enhanced reapings whenever shroud is exited","[RPR] Separated cooldowns of Sacrificium and Lemure's Slice","[RPR] Fixed sks scaling","[WAR] Added initial WAR support"]},{"date":"12/12/24","changes":["Updated English FRU tracks and added P4 + P5"]},{"date":"12/8/24","changes":["Updated Chinese FRU tracks to latest (12/8 ver)","Make stats tables only include selected skills when there is selection"]},{"date":"12/7/24","changes":["Updated positional buff icons","Misc cleanups and optimizations (hey devs: rerun npm install)","[BLM] Fixed Retrace button not changing back to LL if LL is disabled when the buff drops"]},{"date":"12/5/24","changes":["Updated Chinese FRU tracks to latest (12/2 version)","Additional Chinese localization changes (preset lines; initial resource overrides section; many resource names)","New skill icon progress bar visuals 🎉"]},{"date":"12/4/24","changes":["Added English FRU P3 tracks by Yara","[RDM] Fixed Swiftcast being consumed before Dualcast when both are active"]},{"date":"12/2/24","changes":["Added English FRU P2 tracks by Yara","Fixed a bug where 'Load tracks starting at timestamp' did not accept some time formats","[RDM] Removed the 'testing' label"]},{"date":"12/1/24","changes":["Updated full FRU tracks in Chinese by 盐宝 & czmm"]},{"date":"11/30/24","changes":["[MCH] Fixed Scattergun's heat generation (thanks Kairos)","[PCT] Fixed Monochrome Tones appearing when synced to level 80 and other internal trait logic (thanks misterperson)"]},{"date":"11/29/24","changes":["[MCH] Fixed bugs with MCH Overheat consumption on AoE abilities (thanks FloatingGhost)"]},{"date":"11/28/24","changes":["Added some Chinese tracks (M1S-M4S, FRU before P2.5)"]},{"date":"11/27/24","changes":["Added the ability to override stacks to 0 for 1-stack resources that start present by default","Added preliminary FRU P1 tracks by Yara"]},{"date":"11/26/24","changes":["Added the ability to load marker tracks starting from a particular timestamp"]},{"date":"11/25/24","changes":["[RPR] Added initial RPR support"]},{"date":"11/24/24","changes":["[MCH] Added initial MCH support"]},{"date":"11/21/24","changes":["[SAM] Fixed a bug where Fuka haste was doubly applied","[SAM] Added GCD under Fuka in playback control"]},{"date":"11/20/24","changes":["[DNC] Added initial DNC support","[SAM] Added initial SAM support (thank you Sterling Sylva for the initial work)","Added support for skill speed in addition to spell speed"]},{"date":"11/17/24","changes":["[RDM] Fix Manafication CD (thanks 云青渔语)","[all casters] Fix Surecast duration: previously 10s, now 6.5s (ty erii)"]},{"date":"11/16/24","changes":["Make DET use main stat formula and default to 440","Add hyperlinks for xivgear and etro"]},{"date":"11/15/24","changes":["(thank you Yuyuka for reporting a bunch of RDM bugs)","[RDM] Added some additional warnings on unintended buff drops, overwrites, and combo breaks","[RDM] Fixed the duration of the Acceleration buff","[RDM] Fixed the MP costs of Veraero II/Verthunder II","[RDM] Fixed Manafication failing to interrupt combos","[RDM] Fixed Manafication being usable out of combat","[RDM] Fixed Enchanted Reprise clearing mana stacks","[RDM] Made Prefulgence and Vice of Thorns into button replacements"]},{"date":"11/14/24","changes":["(thank you Wan Shott for reporting a bunch of RDM bugs)","[RDM] Fixed bugs where Verfire and Grand Impact didn't grant correct mana","[RDM] Fixed a bug where it was possible to use un-enchanted Moulinet under certain incorrect conditions","mark newly-implemented jobs as in testing and display a warning message when using those jobs"]},{"date":"11/13/24","changes":["Fixed a bug where party buff potencies were not displayed","[PCT] Fixed a bug where using two hammer combos within 30s of each other caused the combo to break","[RDM] Fixed a bug where level synced RDM still received Grand Impact Ready from Acceleration","[RDM] Fixed a bug where Acceleration did not always grant a Verstone/Verfire proc","[RDM] Fixed a bug where certain role buffs were not being displayed on the hotbar","[RDM] Fixed a bug where buffs were overlapping the hotbar","[RDM] Fixed a bug where Contre Sixte's cooldown was improperly affected by traits","Removed debug and implementation notes sections (see repository wiki for implementation notes)"]},{"date":"11/12/24","changes":["Initial XIV in the Shell! Supporting patch 7.1 BLM and PCT, plus preliminary RDM"]}]`);function pm(){return In[0].date}function fN(e){const t=kt();return u.jsxs("div",{className:"changelogGroup",children:[u.jsx("div",{children:e.date}),u.jsx("div",{children:p({en:u.jsx(u.Fragment,{children:e.changes.map((n,l)=>u.jsx("div",{className:"changelogLine",style:{color:n.substring(1,5)==="BETA"?t.warning:t.text},children:n},l))}),zh:e.changes_zh!==void 0?u.jsx(u.Fragment,{children:e.changes_zh.map((n,l)=>u.jsx("div",{className:"changelogLine",style:{color:n.substring(1,5)==="BETA"?t.warning:t.text},children:n},l))}):void 0})})]})}const Qw=`
.Backdrop {
  position: fixed;
  inset: 0;
  background-color: black;
  transition: opacity 50ms cubic-bezier(0.45, 1.005, 0, 1.005);

  &[data-starting-style],
  &[data-ending-style] {
	opacity: 0;
  }
}

.Popup {
  box-sizing: border-box;
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 50vw;
  height: 70vh;
  max-height: 70vh;
  overflow-y: scroll;
  margin-top: -2rem;
  padding-left: 1.5rem;
  padding-right: 1.5rem;
  transition: all 50ms cubic-bezier(0.45, 1.005, 0, 1.005);

  font-family: monospace;
  font-size: 13px;

  &[data-starting-style],
  &[data-ending-style] {
	opacity: 0;
	transform: translate(-50%, -50%) scale(0.9);
  }
}

.changelogGroup {
	margin-top: 1em;
	margin-bottom: 1em;
}

.changelogLine {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
	margin-left: 0.5em;
}
`;function $w(){let e,t,n={};const l=C.useRef(5),[s,c]=C.useState(!1),[d,f]=C.useState(!1),E=C.useContext(jn)==="Light",A=kt();C.useEffect(()=>{let g=ha("changelogLastRead"),I=ha("changelogLastReadChangeCount");!Uy&&(g===null||I===null)&&(g="5/10/25",I="1");const b=g===null||I===null||g===In[0].date&&I===In[0].changes.length.toString();if(c(b),g!==null&&I!==null){if(!b){let y=0,M=!1;for(;y<In.length-1;y++){if(g===In[y].date){I!==In[y].changes.length.toString()&&y++;break}M=M||In[y].level==="major"}f(M),l.current=y}}else aa("changelogLastRead",In[0].date),aa("changelogLastReadChangeCount",In[0].changes.length.toString())},[]);const R=g=>{g||(l.current=5,s||(aa("changelogLastRead",In[0].date),aa("changelogLastReadChangeCount",In[0].changes.length.toString())),c(!0))};if(s)e=p({en:"Changelog",zh:"更新日志",ja:"更新履歴"}),t="•";else{const g=kt();e=p({en:"Changelog (new updates"+(d?"!!":"")+")",zh:"更新日志（有变"+(d?"！！":"")+"）"}),t="!",d?n={color:g.warning,fontWeight:"bold"}:n={fontWeight:"bold"}}const T=u.jsx("div",{className:"clickable",children:u.jsxs("span",{style:n,children:[u.jsxs("span",{children:[t," "]}),u.jsx("span",{className:"clickableLinkLike",children:e})]})}),S=u.jsx(qU,{className:"dialogExit",style:{color:A.bgHighContrast}});return u.jsxs(u.Fragment,{children:[u.jsx("style",{children:Qw}),u.jsxs(Ww,{onOpenChange:R,children:[u.jsx(Zw,{render:T}),u.jsxs(Cw,{children:[u.jsx(ow,{className:"Backdrop",style:{opacity:E?.2:.7}}),u.jsxs(Nw,{className:"Popup visibleScrollbar",id:"changelogPopup",style:{backgroundColor:A.background,border:"1px solid "+A.bgMediumContrast,color:A.text},children:[u.jsx(Xw,{render:u.jsx("h3",{children:e})}),u.jsx(dw,{render:S}),u.jsx(mw,{className:"Description",render:u.jsx(Jw,{hiddenStartIndex:l.current,newChanges:!s})})]})]})]})]})}function Jw(e){const t=[],n=[];for(let A=0;A<e.hiddenStartIndex;A++)t.push(fN(In[A]));for(let A=e.hiddenStartIndex;A<In.length;A++)n.push(fN(In[A]));const l=p({en:e.newChanges?"New Changes":"Recent Changes",zh:e.newChanges?"新的更新":"最近的更新"}),s=u.jsxs("div",{style:{marginTop:10,marginBottom:10},children:[u.jsx("span",{style:{marginTop:10,marginBottom:10},children:u.jsx("b",{children:l})}),u.jsx("div",{style:{margin:10,paddingLeft:6},children:t.map((A,R)=>u.jsx("div",{children:A},R))})]}),[c,d]=C.useState(!1),f=p({en:"Older Changes",zh:"之前的更新"}),E=u.jsxs("div",{style:{marginTop:10,marginBottom:10},children:[u.jsx(os,{content:u.jsxs("span",{children:[u.jsx("span",{children:c?"- ":"+ "}),u.jsx("b",{children:f})]}),onClickFn:()=>d(!c)}),u.jsx("div",{style:{position:"relative",display:c?"block":"none"},children:u.jsxs("div",{style:{margin:10,paddingLeft:6,marginBottom:20},children:[u.jsx("div",{children:n.map((A,R)=>u.jsx("div",{children:A},R))}),u.jsxs("div",{children:["For older changelog entries before the BLM/PCT in the Shell rejoining, see ",u.jsx("b",{children:"About this site/Changelog"})," on the old sites: ",u.jsx("a",{target:"_blank",rel:"noreferrer",href:"https://miyehn.me/ffxiv-blm-rotation/",children:"BLM in the Shell"}),", ",u.jsx("a",{target:"_blank",rel:"noreferrer",href:"https://picto.zqsz.me/",children:"PCT in the Shell"})]})]})})]});return u.jsxs("div",{children:[s,E]})}const Im=tu?"https://beta.xivintheshell.com":"https://xivintheshell.com",Nm="https://github.com/xivintheshell/xivintheshell",aO="https://discord.com/channels/277897135515762698/1307922201726685236",Cm="https://discord.gg/thebalanceffxiv",eB=()=>u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"paragraph",children:p({en:u.jsxs(u.Fragment,{children:[u.jsx("span",{children:"This tool was initially Black Mage in the Shell, "}),u.jsxs("span",{children:["ideated by ",u.jsx("b",{children:"Eshiya (Galahad)"})," and developed by ",u.jsx("b",{children:"miyehn"})," specifically for BLM during Endwalker since around February 2022."," "]}),u.jsx("span",{children:"After Dawntrail's release, it was expanded to support other jobs and is now maintained by a small team of developers:"})]}),zh:u.jsxs(u.Fragment,{children:[u.jsx("span",{children:"本工具起初是由加拉哈德构想、由miyehn开发的黑魔排轴器，于2022年2月开工，陪黑魔们走过了大半段6.x时期。"}),u.jsx("span",{children:"7.0发售后，它被重构并逐渐开始支持更多职业，现在的排轴器由多名开发共同维护："})]})})}),p({en:u.jsxs("ul",{children:[u.jsxs("li",{children:["Tool design and core systems: ",u.jsx("b",{children:"shanzhe"}),", ",u.jsx("b",{children:"miyehn"}),", ",u.jsx("b",{children:"Turtle"}),","," ",u.jsx("b",{children:"Akairyu"})]}),u.jsxs("li",{children:["BLM: ",u.jsx("b",{children:"shanzhe"}),", ",u.jsx("b",{children:"Akairyu"}),", ",u.jsx("b",{children:"Turtle"}),", ",u.jsx("b",{children:"miyehn"})]}),u.jsxs("li",{children:["PCT, RDM, SMN, DRK: ",u.jsx("b",{children:"shanzhe"})]}),u.jsxs("li",{children:["SAM: ",u.jsx("b",{children:"Sterling"}),", ",u.jsx("b",{children:"shanzhe"})]}),u.jsxs("li",{children:["DNC, MCH, BRD, SGE: ",u.jsx("b",{children:"Akairyu"})]}),u.jsxs("li",{children:["RPR: ",u.jsx("b",{children:"Honey B. Lovely's Favorite Bee"})]}),u.jsxs("li",{children:["WAR: ",u.jsx("b",{children:"misterperson"})]}),u.jsxs("li",{children:["GNB, DRG, PLD: ",u.jsx("b",{children:"Sterling"})]}),u.jsxs("li",{children:["BLU: ",u.jsx("b",{children:"小铅笔"})]}),u.jsxs("li",{children:["Framework for adding new jobs: ",u.jsx("b",{children:"shanzhe"})]}),u.jsxs("li",{children:["Chinese localization: ",u.jsx("b",{children:"miyehn"}),", ",u.jsx("b",{children:"Eshiya"}),", ",u.jsx("b",{children:"Yuyuka"}),", ",u.jsx("b",{children:"shanzhe"}),","," ",u.jsx("b",{children:"小盐"}),", ",u.jsx("b",{children:"卿落青"}),", ",u.jsx("b",{children:"久逺"}),", ",u.jsx("b",{children:"大猫"}),", ",u.jsx("b",{children:"洛洛可"}),", ",u.jsx("b",{children:"青木柒"})]})]}),zh:u.jsxs("ul",{children:[u.jsxs("li",{children:["工具设计和核心系统：",u.jsx("b",{children:"shanzhe"}),"、",u.jsx("b",{children:"miyehn"}),"、",u.jsx("b",{children:"Turtle"}),"、",u.jsx("b",{children:"Akairyu"})]}),u.jsxs("li",{children:["黑魔：",u.jsx("b",{children:"shanzhe"}),"、",u.jsx("b",{children:"Akairyu"}),"、",u.jsx("b",{children:"Turtle"}),"、",u.jsx("b",{children:"miyehn"})]}),u.jsxs("li",{children:["画家、赤魔、召唤、暗黑骑士：",u.jsx("b",{children:"shanzhe"})]}),u.jsxs("li",{children:["武士：",u.jsx("b",{children:"Sterling"}),"、",u.jsx("b",{children:"shanzhe"})]}),u.jsxs("li",{children:["舞者、机工、吟游诗人、贤者：",u.jsx("b",{children:"Akairyu"})]}),u.jsxs("li",{children:["钐镰客：",u.jsx("b",{children:"Honey B. Lovely's Favorite Bee"})]}),u.jsxs("li",{children:["战士：",u.jsx("b",{children:"misterperson"})]}),u.jsxs("li",{children:["绝抢战士、龙骑士、骑士：",u.jsx("b",{children:"Sterling"})]}),u.jsxs("li",{children:["青魔：",u.jsx("b",{children:"小铅笔"})]}),u.jsxs("li",{children:["添加新职业的程序框架：",u.jsx("b",{children:"shanzhe"})]}),u.jsxs("li",{children:["中文本地化：",u.jsx("b",{children:"miyehn"}),"、",u.jsx("b",{children:"加拉哈德"}),"、",u.jsx("b",{children:"鱼卡"}),"、",u.jsx("b",{children:"shanzhe"}),"、",u.jsx("b",{children:"小盐"}),"、",u.jsx("b",{children:"卿落青"}),"、",u.jsx("b",{children:"久逺"}),"、",u.jsx("b",{children:"大猫"}),"、",u.jsx("b",{children:"洛洛可"}),"、",u.jsx("b",{children:"青木柒"})]})]})}),u.jsx("div",{className:"paragraph",children:p({en:"And many thanks to Yara, Spider, Santa, players in 不打冰三攻略组, kiyozero, czmm, and other players and groups who contributed feature suggestions, timeline markers, bug reports, etc.",zh:"同时，感谢Yara、Spider、Santa、不打冰三攻略组成员、kiyozero、czmm等，以体验反馈、报bug、时间轴标记等形式为这个工具作出过无私贡献的玩家们。"})}),p({en:u.jsxs("div",{className:"paragraph",children:["If you have questions or would like to provide feedback, you can message in"," ",u.jsx("a",{target:"_blank",href:aO,rel:"noreferrer",children:"this channel in The Balance"})," ",'(requires the "Misc. Support" role). In case of sending a bug report, attaching the fight record (download "fight.txt" from the bottom or name it anything else) would be very helpful.']}),zh:u.jsxs("div",{className:"paragraph",children:[u.jsx("span",{children:"如果遇到bug或者有任何工具相关的问题和建议，都欢迎反馈给我们，可请不打冰三攻略组的黑魔们或鱼卡转达，或加miyehn的QQ（870340705，加时请注明来意）。"}),u.jsx("span",{children:"如果是反馈bug，最好把能够复现bug的战斗记录文件（从下方下载的fight.txt）一起发过来。"})]}),ja:u.jsx("div",{className:"paragraph",children:"[outdated (ja)] 質問、バグ報告、機能提案などがある場合は、Discord（miyehn）またはメール（ellyn.waterford@gmail.com）でお問い合わせください。 バグ報告の場合は、右側からダウンロードした「fight.txt」を添付していただくと助かります。"})})]});function tB(e){let t={marginBottom:5},n=kt();const l=e.job;return u.jsxs("div",{children:[u.jsx($w,{}),u.jsx(Jo,{defaultShow:!0,title:"instructions",titleNode:u.jsxs("span",{children:[p({en:"Instructions ",zh:"使用说明 ",ja:"説明 "}),u.jsx(at,{topic:"expandable",content:p({en:"click me to expand or collapse",zh:"点击展开/折叠",ja:"クリックして開閉する"})})]}),content:u.jsxs("div",{children:[u.jsx("div",{className:"paragraph",children:u.jsx("b",{children:p({en:"General Usage",zh:"基本用法",ja:"使い方"})})}),p({en:u.jsxs("ul",{children:[u.jsxs("li",{style:t,children:["Set your stats in ",u.jsx("b",{children:"Config"})," on the right, then"," ",u.jsx(fa,{text:"apply and reset"})]}),u.jsx("li",{style:t,children:"Click on a skill to use it. The simulation will always jump to when the animation lock ends and the skill's cooldown becomes available."}),u.jsxs("li",{style:t,children:["Press ",u.jsx(fa,{text:"u"})," to delete the last added action (effective when not running in real-time)."]}),u.jsx("li",{style:t,children:"Click on a buff applied to self to remove it. Unless it's ley lines, in which case it can be re-enabled."})]}),zh:u.jsxs("ul",{children:[u.jsxs("li",{style:t,children:["在右边",u.jsx("b",{children:"属性设置"}),"里输入装备数据，然后点击"," ",u.jsx(fa,{text:"应用并重置时间轴"})]}),u.jsx("li",{style:t,children:"单击使用技能，如果CD还没转好，会自动等到转好然后重试。"}),u.jsxs("li",{style:t,children:["按 ",u.jsx(fa,{text:"u"})," ","删除时间线上的最后一个操作（实时模式下此操作无效）。"]}),u.jsx("li",{style:t,children:"左键单击可以移除自己身上的buff。黑魔纹除外，黑魔纹在单击关闭后可以被再次点击开启。"})]}),ja:u.jsxs("ul",{children:[u.jsxs("li",{style:t,children:["右側にある",u.jsx("b",{children:"設定"}),"でステータスをセットしてから",u.jsx(fa,{text:"適用とリセット"}),"をクリックしてください。"]}),u.jsx("li",{style:t,children:"実行したいアクションをクリックしてください。リキャストが戻ってきていないアクションをクリックすると使用可能な時間まで待って再実行します。"}),u.jsxs("li",{style:t,children:[u.jsx(fa,{text:"u"}),"を押すと最後に追加されたアクションを削除できます。"]}),u.jsx("li",{style:t,children:"黒魔紋以外のバフをクリックすると削除できます。黒魔紋はバフの有効無効を切り替えられます。"})]})}),u.jsx("div",{className:"paragraph",children:u.jsx("b",{children:p({en:"Timeline",zh:"时间轴",ja:"タイムライン"})})}),p({en:u.jsxs("ul",{children:[u.jsxs("li",{style:t,children:["Holding ",u.jsx(fa,{text:"shift"})," lets you scroll horizontally"]}),u.jsx("li",{style:t,children:"Click to select/unselect a single skill on the timeline. Shift click to select a sequence of skills"}),u.jsxs("li",{style:t,children:[u.jsx(fa,{text:"backspace"})," or"," ",u.jsx(fa,{text:"delete"})," to delete the selected skill and everything after it"]}),u.jsxs("li",{style:t,children:["Click on the timeline's ruler-like header to view historical game states. While doing so, the main control region will have an"," ",u.jsx("b",{style:{color:"darkorange"},children:"orange"})," border and you will not be able to use skills. Click on somewhere else on the timeline to cancel."]})]}),zh:u.jsxs("ul",{children:[u.jsxs("li",{style:t,children:["按住 ",u.jsx(fa,{text:"shift"})," ","时滑动鼠标滚轮可以横向滚动时间线。"]}),u.jsxs("li",{style:t,children:["单击选中/取消选中时间轴上的单个技能。已经选中一个技能时，按住"," ",u.jsx(fa,{text:"shift"})," ","点击另一个技能会选中期间的所有操作。"]}),u.jsxs("li",{style:t,children:["按 ",u.jsx(fa,{text:"backspace"})," 或"," ",u.jsx(fa,{text:"delete"})," 删除选中技能及其之后的所有操作。"]}),u.jsxs("li",{style:t,children:["选中某技能或者刻度上的某时间时，可以看到相应时间的职业资源状态。此时控制区域边框变为",u.jsx("b",{style:{color:"darkorange"},children:"橙色"}),"且无法使用技能。点击控制区域或时间轴空白处取消。"]})]}),ja:u.jsxs("ul",{children:[u.jsxs("li",{style:t,children:[u.jsx(fa,{text:"shift"}),"を押しながらスクロールすると横スクロールできます。"]}),u.jsxs("li",{style:t,children:["タイムライン上のアクションをクリックすると選択できます。",u.jsx(fa,{text:"shift"}),"を押しながらクリックすると複数選択できます。"]}),u.jsxs("li",{style:t,children:[u.jsx(fa,{text:"backspace"}),"か",u.jsx(fa,{text:"delete"}),"を押すと選択中のアクションとそれ以降のアクションを全て削除します。"]}),u.jsxs("li",{style:t,children:["タイムラインの経過時間が表示されているヘッダー部分をクリックするとメインコントロールの枠が",u.jsx("b",{style:{color:"darkorange"},children:"オレンジ"}),"になり、その瞬間の状態を確認できます。 その間はアクションを実行できません。他の場所をクリックするとキャンセルされ通常モードに戻ります。"]})]})}),p({en:u.jsxs("div",{className:"paragraph",children:[u.jsx("span",{style:{color:n.fileDownload,cursor:"pointer"},children:u.jsx("u",{children:"[these]"})})," ","are file download links. Click to download, or right click to choose save location."]}),zh:u.jsxs("div",{className:"paragraph",children:[u.jsx("span",{style:{color:n.fileDownload,cursor:"pointer"},children:u.jsx("u",{children:"[这样的按钮]"})})," ","是文件下载链接，可以点击直接下载也可以右键另存为。"]}),ja:u.jsxs("div",{className:"paragraph",children:[u.jsx("span",{style:{color:n.fileDownload,cursor:"pointer"},children:u.jsx("u",{children:"[このように表示されている部分]"})}),"はダウンロードリンクです。クリックしてダウンロードするか右クリックで場所を指定してダウンロードできます。"]})}),p({en:u.jsxs("div",{className:"paragraph",children:["You can save/load fight records at the bottom, under the"," ",u.jsx("b",{children:"Import/Export"})," tab. Most edits are also automatically saved in your browser cache, so it's generally okay to refresh the page and not worry about losing progress."]}),zh:u.jsxs("div",{className:"paragraph",children:["工具最下方的 ",u.jsx("b",{children:"导入/导出"})," ","区域有链接可以保存/加载战斗记录。大部分编辑也都会被保存在浏览器缓存，所以一般情况下刷新网页也不会丢失数据。"]})}),p({en:u.jsxs("div",{className:"paragraph",children:["Hover over ",u.jsx(at,{topic:"sampleTips",content:"sample tip"})," ","everywhere to see more tips."]}),zh:u.jsxs("div",{className:"paragraph",children:["鼠标悬浮在各处的 ",u.jsx(at,{topic:"sampleTips",content:"我是一个说明"})," ","上查看更多使用说明。"]}),ja:u.jsxs("div",{className:"paragraph",children:[u.jsx(at,{topic:"sampleTips",content:"サンプルのヘルプテキストです"}),"をホバーするとヘルプテキストを確認できます。"]})}),u.jsx("div",{className:"paragraph",style:{marginTop:16},children:u.jsx(Jo,{title:"Troubleshoot",titleNode:p({en:u.jsx("b",{children:"troubleshoot"}),zh:u.jsx("b",{children:"常见问题"}),ja:u.jsx("b",{children:"トラブルシューティング"})}),content:u.jsxs(u.Fragment,{children:[p({en:u.jsxs("div",{children:[u.jsx("div",{className:"paragraph",children:"I can't guarantee that my updates are always backward compatible. If your fight record files aren't loading properly but you don't understand why, contact me and I'll try my best to help."}),u.jsxs("div",{className:"paragraph",children:["If the browser cache is somehow messed up (likely due to invalid game states), this is how to reset it:",u.jsx("br",{}),"Enter this tool from"," ",u.jsx("b",{children:Im+"?{command}"})," replacing"," ",u.jsx("b",{children:"{command}"})," with one of the following:",u.jsxs("ul",{children:[u.jsxs("li",{style:t,children:[u.jsx("b",{children:"resetResourceOverrides"}),": delete all resource overrides and all actions on the current timeline."]}),u.jsxs("li",{style:t,children:[u.jsx("b",{children:"resetAll"}),": delete all browser-cached settings."]})]})]})]}),zh:u.jsxs("div",{children:[u.jsx("div",{className:"paragraph",children:"我无法保证每次更新都能兼容已有的战斗记录文件。如果你的战斗记录无法被正常导入但你不清楚原因，可以联系我，我会尽力帮一起看。"}),u.jsxs("div",{className:"paragraph",children:["如果浏览器缓存因不明原因出问题（比如预设了刚打完绝望满蓝这样的“非法状态”），可尝试用以下方法重置浏览器缓存：",u.jsx("br",{}),"用以下链接进入本工具：",u.jsx("b",{children:Im+"?{command}"}),"，然后把",u.jsx("b",{children:"{command}"}),"替换成以下两个指令之一：",u.jsxs("ul",{children:[u.jsxs("li",{style:t,children:[u.jsx("b",{children:"resetResourceOverrides"}),": 删除当前时间线上的所有资源预设和技能"]}),u.jsxs("li",{style:t,children:[u.jsx("b",{children:"resetAll"}),": 删除所有本工具相关的浏览器缓存"]})]})]})]}),ja:u.jsxs("div",{children:[u.jsx("div",{className:"paragraph",children:"後方互換性があるとは限りません。保存したファイルが正しく読み込まれず、その理由がわからない場合はお問い合わせください。できる限りお手伝いします。"}),u.jsxs("div",{className:"paragraph",children:["ブラウザのキャッシュが何らかの理由で壊れている場合、次の方法でリセットできます。",u.jsx("br",{}),u.jsx("b",{children:Im+"?{command}"})," にアクセスし、",u.jsx("b",{children:"{command}"})," ","を以下のいずれかに置き換えます：",u.jsxs("ul",{children:[u.jsxs("li",{style:t,children:[u.jsx("b",{children:"resetResourceOverrides"}),": 全てのリソースとタイムライン上のアクションを上書きします。"]}),u.jsxs("li",{style:t,children:[u.jsx("b",{children:"resetAll"}),": 全てのブラウザキャッシュを削除します。"]})]})]})]})}),u.jsxs("div",{children:[p({en:"Or just: ",zh:"或者直接："}),u.jsx("button",{className:"dangerButton",onClick:()=>{SN(),window.location.reload()},children:p({en:"[DANGER!] clear browser cache and reload",zh:"[谨慎操作] 清除缓存并刷新",ja:"[キケン！] ブラウザキャッシュをクリアしてリロード"})})]})]})})})]})}),u.jsx(Jo,{defaultShow:!1,title:"About this tool",titleNode:p({en:"About this tool",zh:"关于",ja:"このツールについて"}),content:u.jsxs("div",{children:[u.jsx("div",{className:"paragraph",children:p({en:"This is a FFXIV simulator & rotation planner.",zh:"是个FF14模拟器/排轴工具。",ja:"FF14のスキルローテーションシミュレーターです。"})}),eB(),u.jsx("div",{className:"paragraph",children:p({en:"Some links:",zh:"一些链接：",ja:"リンク集"})}),p({en:u.jsxs("ul",{children:[u.jsx("li",{children:u.jsx("a",{href:Nm,children:"Github repository"})}),u.jsxs("li",{children:[u.jsx("a",{href:"https://miyehn.me/ffxiv-blm-rotation-endwalker/",children:"Black Mage in the Shell (Endwalker)"}),": a snapshot of this tool at the end of Endwalker. It also contains some notable fight plans from Endwalker, as memoir."]}),u.jsxs("li",{children:[u.jsx("a",{href:"https://spide-r.github.io/ffxiv-blm-rotation/",children:"Black Mage in the Bozjan Shell"}),": a variation for Save the Queens areas, created by"," ",u.jsx("b",{children:"A'zhek Silvaire @ Zalera"})]}),u.jsx("li",{children:u.jsx("a",{href:"https://na.finalfantasyxiv.com/jobguide/battle/",children:"Official FFXIV job guides"})}),u.jsxs("li",{children:["The Balance's community"," ",u.jsx("a",{href:"https://www.thebalanceffxiv.com/",children:"job guides"})," and"," ",u.jsx("a",{href:Cm,children:"Discord"})]})]}),zh:u.jsxs("ul",{children:[u.jsx("li",{children:u.jsx("a",{href:Nm,children:"Github页面"})}),u.jsxs("li",{children:[u.jsx("a",{href:"https://miyehn.me/ffxiv-blm-rotation-endwalker/",children:"6.x版排轴器"}),"，历史版本黑魔排轴器。那里也公开展示着一些6.x时期的轴作为纪念。"]}),u.jsxs("li",{children:[u.jsx("a",{href:"https://spide-r.github.io/ffxiv-blm-rotation/",children:"博兹雅版排轴器（Black Mage in the Bozjan Shell）"}),": 本工具的博兹雅/天佑女王版。制作者："," ",u.jsx("b",{children:"A'zhek Silvaire @ Zalera"})]}),u.jsx("li",{children:u.jsx("a",{href:"https://na.finalfantasyxiv.com/jobguide/battle/",children:"官方各职业介绍（英文）"})}),u.jsxs("li",{children:["The Balance",u.jsxs("a",{href:"https://www.thebalanceffxiv.com/",children:[" ","玩家社区攻略（英文）"]}),"和 ",u.jsx("a",{href:Cm,children:"Discord服务器"})]})]}),ja:u.jsx("ul",{children:u.jsxs(u.Fragment,{children:[u.jsx("li",{children:u.jsx("a",{href:Nm,children:"Github repository"})}),u.jsxs("li",{children:[u.jsx("a",{href:"https://spide-r.github.io/ffxiv-blm-rotation/",children:"Black Mage in the Bozjan Shell"}),": 南方ボズヤ戦線向けのツール。作者：",u.jsx("b",{children:"A'zhek Silvaire @ Zalera"})]}),u.jsx("li",{children:u.jsx("a",{href:"https://na.finalfantasyxiv.com/jobguide/blackmage/",children:"Official FFXIV black mage job guide"})}),u.jsxs("li",{children:[u.jsxs("a",{target:"_blank",href:Cm,rel:"noreferrer",children:[l," resources channel on The Balance"]})," ","（ぜひDiscordサーバーに参加してください。）"," "]})]})})})]})})]})}var aB={};let Vf=e=>{},Wf=e=>{},qf=e=>{};function nB(e){if(e==="resetAll")SN();else if(e==="resetResourceOverrides"){let t=ha("gameRecord");for(let n=0;n<fl;n++){let l=ha("gameRecord"+n.toString());if(n===0&&l===null&&t!==null&&(l=t),l!==null){let s=JSON.parse(l);console.log(s),s.config&&(s.config.initialResourceOverrides=[]),s.actions=[],aa("gameRecord"+n.toString(),JSON.stringify(s))}}}else e!==void 0&&console.log("unrecognized command '"+e+"'")}function iB(e){return u.jsx("div",{style:{flex:3,height:e.height,marginLeft:6,position:"relative",verticalAlign:"top"},children:u.jsx(_C,{uniqueName:"mainConfig",content:[{titleNode:p({en:"Config",zh:"属性设置"}),contentNode:u.jsx(OC,{})},{titleNode:p({en:"Control",zh:"操作设置"}),contentNode:u.jsx(QU,{})}],collapsible:!1,scrollable:!0,height:e.height,defaultSelectedIndex:0})})}function hN(e){let t=e.color??kt().accent;return u.jsx("div",{style:{display:e.hidden===!0?"none":"block",color:t,border:"1px solid "+t,borderRadius:4,padding:"10px 10px 0 10px"},children:e.children})}const EN=tu?"[BETA] ":"";class lB extends mt.Component{constructor(n){super(n);j(this,"controlRegionRef");j(this,"gameplayKeyCapture");j(this,"gameplayMouseCapture");j(this,"setColorTheme");j(this,"state");nB(n.command),this.state={job:O.getActiveJob(),hasFocus:!1,historical:!1,realTime:!1,controlRegionHeight:0,colorTheme:yN()},this.controlRegionRef=mt.createRef(),this.gameplayKeyCapture=l=>{var s;l.target&&l.target===((s=this.controlRegionRef)==null?void 0:s.current)&&(O.handleKeyboardEvent(l),l.preventDefault())},this.gameplayMouseCapture=l=>{O.displayCurrentState()},Vf=l=>{this.setState({job:l});const s=document.querySelector("link[rel~='icon']");s&&(tu?s.href="/favicons/beta.ico":l in Ot?s.href="/favicons/"+l.toString().toLocaleLowerCase()+".ico":s.href=aB.PUBLIC_URL+"/favicon.ico");const c=document.getElementById("pageTitle");c&&(c.text=`${EN}XIV in the Shell (${l})`)},Wf=l=>{this.setState({realTime:l})},qf=l=>{this.setState({historical:l})},this.setColorTheme=l=>{l!==this.state.colorTheme&&(O.updateAllDisplay(),this.setState({colorTheme:l}),aa("colorTheme",l))}}componentDidMount(){O.tryAutoLoad(),O.updateAllDisplay(),this.controlRegionRef.current&&new ResizeObserver(()=>{var l;let n=((l=this.controlRegionRef.current)==null?void 0:l.clientHeight)??0;this.setState({controlRegionHeight:n})}).observe(this.controlRegionRef.current)}componentWillUnmount(){Vf=n=>{},Wf=n=>{},qf=n=>{}}render(){let n=ki(this.state.colorTheme),l={height:"100%",accentColor:n.accent,fontFamily:"monospace",fontSize:13,color:n.text,backgroundColor:n.background,display:"flex",flexDirection:"column"},s;this.state.historical?s="2px solid "+n.historical:this.state.hasFocus?this.state.realTime?s="2px solid "+n.realTime:s="2px solid "+n.accent:s="1px solid "+n.bgMediumContrast;const c={marginBottom:"5px"};let d=u.jsx("div",{style:{flex:7,display:"inline-block",position:"relative"},children:u.jsxs("div",{onFocus:()=>{this.setState({hasFocus:!0})},onBlur:()=>{this.setState({hasFocus:!1})},style:{display:"inline-block",padding:8,outline:s},tabIndex:-1,ref:this.controlRegionRef,onKeyDown:this.gameplayKeyCapture,onClick:this.gameplayMouseCapture,children:[u.jsx(CC,{}),u.jsx(z0,{})]})});return u.jsxs("div",{style:{position:"fixed",top:0,bottom:0,left:0,right:0},children:[u.jsx("style",{children:`
				.visibleScrollbar::-webkit-scrollbar {
					appearance: none;
					background-color: ${n.bgLowContrast};
					height: 8px;
					width: 5px;
				}
				.visibleScrollbar::-webkit-scrollbar-thumb {
					background-color: ${n.bgHighContrast};
				}
				.invisibleScrollbar::-webkit-scrollbar {
					appearance: none;
					background-color: clear;
					height: 8px;
					width: 5px;
				}
				.invisibleScrollbar::-webkit-scrollbar-thumb {
					background-color: ${n.bgHighContrast};
				}
				a {
					color: ${n.accent};
				}
				b, h1, h2, h3, h4 {
					color: ${n.emphasis};
				}
				p {
					margin-block-start: 10px;
					margin-block-end: 10px;
				}
				p:first-child {
					margin-block-start: 0px;
				}
				::selection {
					background: rgba(147, 112, 219, 0.4);
				}
				option, select {
					color: ${n.text};
					background-color: ${n.background};
				}
				button, input[type="submit"], ::-webkit-file-upload-button {
					color: ${n.text};
					background-color: ${n.bgLowContrast};
					border: 1px solid ${n.bgHighContrast};
				}
				input[type="radio"] {
					appearance: none;
					width: 1em;
					height: 1em;
					border: 1px solid ${n.bgHighContrast};
					border-radius: 50%;
					background-clip: content-box;
					padding: 2px;
				}
				input[type="radio"]:checked {
					background-color: ${n.accent};
				}
				input[type="checkbox"] {
					appearance: none;
					width: 1em;
					height: 1em;
					border: 1px solid ${n.bgHighContrast};
					border-radius: 1px;
					background-clip: content-box;
					padding: 2px;
				}
				input[type="checkbox"]:checked:after {
					content: '\\2714';
					color: ${n.accent};
					position: absolute;
					font-size: 22px;
					top: -6px;
					left: -2px;
				}
				input[type="range"] {
					appearance: none;
					background-color: transparent;
					border: 1px solid ${n.bgHighContrast};
					vertical-align: middle;
					height: 0.9em;
					border-radius: 0.45em;
					overflow: hidden;
					padding: 0.05em;
				}
				input[type="range"]::-webkit-slider-thumb {
					appearance: none;
					background-color: ${n.accent};
					width: 0.8em;
					height: 0.8em;
					border-radius: 0.4em;
				}
				.help-tooltip {
				    color: ${n.text};
				    background-color: ${n.tipBackground};
				    opacity: 0.98;
				    max-width: 300px;
				    outline: 1px solid ${n.bgHighContrast};
				    transition: none;
				    font-size: 100%;
				    z-index: 10;
				}
			`}),u.jsx(jn.Provider,{value:this.state.colorTheme,children:u.jsxs("div",{style:l,id:"globalHelpTooltipAnchor",children:[u.jsx("div",{style:{flex:1,overflowY:"scroll",overscrollBehaviorY:"contain"},children:u.jsxs("div",{style:{position:"relative",maxWidth:1060,margin:"0 auto",marginTop:40},children:[u.jsx(JL,{}),u.jsx(Qy,{setColorTheme:this.setColorTheme}),u.jsxs("div",{children:[u.jsxs("h3",{style:{marginTop:20,marginBottom:6},children:[EN,"XIV in the Shell"]}),p({en:u.jsxs("div",{style:{marginBottom:16},children:["Last updated: ",pm()," (see ",u.jsx("b",{children:"Changelog"}),")"]}),zh:u.jsxs("div",{style:{marginBottom:16},children:["最近更新（月日年）：",pm(),"（详见",u.jsx("b",{children:"更新日志"}),"）"]}),ja:u.jsxs("div",{style:{marginBottom:16},children:["最終更新日：",XL(pm()),"（",u.jsx("b",{children:"更新履歴"}),"を参照）（",u.jsx("a",{href:"https://coda.io/d/_d-N3WFoMZ8e/Black-Mage-in-the-Shell_suRLF",children:"ロードマップ"}),"）"]})}),xy()?u.jsx("div",{style:{margin:"10px 0",padding:"10px",border:"1px solid "+n.warning,color:n.warning,borderRadius:4},children:p({en:u.jsxs("div",{children:["NOTE: Your browser cache contains data from BLM in the Shell before it's updated for Dawntrail. Visit the Endwalker archive at"," ",u.jsx("a",{style:{color:n.warning},href:"https://miyehn.me/ffxiv-blm-rotation-endwalker",children:"miyehn.me/ffxiv-blm-rotation-endwalker"})," ","to access and automatically re-save it. Once you do that, this notice will also go away."]}),zh:u.jsxs("div",{children:["提示：你的浏览器缓存里有排轴器更新到7.0前的数据，它们在这里已经不可用。请访问6.0历史版本（链接：",u.jsx("a",{style:{color:n.warning},href:"https://miyehn.me/ffxiv-blm-rotation-endwalker",children:"miyehn.me/ffxiv-blm-rotation-endwalker"}),"），数据会在那边被重新自动保存。访问过一次后，这个提示也会消失。"]})})}):void 0,tu&&u.jsx(hN,{color:n.warning,children:p({en:u.jsxs("div",{style:{marginBottom:"10px"},children:[u.jsx("span",{children:u.jsx("b",{style:{color:n.warning},children:"You're currently using the BETA version of XIV in the Shell."})}),u.jsxs("ul",{children:[u.jsx("li",{style:c,children:"Things may break in unexpected ways at any time. Use at your own peril, and make sure to export in-progress files frequently."}),u.jsx("li",{style:c,children:"Application data is not shared with the main site. Anything you do here stays here. Files created on the BETA site may not work on the main site, but files made on the main site should be importable here (if they are not, please report this as a bug)."}),u.jsx("li",{style:c,children:"If the page becomes un-loadable, please contact us and tell us what your last actions on the site were, and we can help you debug what went wrong. You can also try resetting your browser's localStorage data for beta.xivintheshell.com."}),u.jsxs("li",{style:c,children:["To report an issue, you can contact us on Discord in The Balance (",u.jsx("a",{href:aO,children:"#xiv_in_the_shell_support"}),"), or file an issue on"," ",u.jsx("a",{href:"https://github.com/xivintheshell/xivintheshell/issues",children:"our GitHub"}),"."]})]})]}),zh:u.jsxs("div",{style:{marginBottom:"10px"},children:[u.jsx("span",{children:u.jsx("b",{style:{color:n.warning},children:"您正在使用《XIV in the Shell》的测试版（BETA）。"})}),u.jsxs("ul",{children:[u.jsx("li",{style:c,children:"此排轴器随时可能会意外崩溃。请自行承担使用风险、注意经常导出编辑中的文件。"}),u.jsx("li",{style:c,children:"BETA版与主排轴器网站不共享应用程序数据。在BETA网站上创建的文件不一定能在主网站上导入，但主网站上创建的文件应该能在这里导入（如果不能导入，请报告为bug）。"}),u.jsx("li",{style:c,children:"如果遇到网站无法加载的情况，请反馈给我们，并告诉我们出问题前您最后进行的操作，我们可以帮您排查问题。也可以自己尝试重置beta.xivintheshell.com的localStorage数据。"}),u.jsxs("li",{style:c,children:["如果想联系我们给反馈，可请不打冰三攻略组的黑魔们或鱼卡转达，或加miyehn的QQ（870340705，加时请注明来意），或直接到",u.jsx("a",{href:"https://github.com/xivintheshell/xivintheshell/issues",children:"GitHub"}),"仓库提issue。"]})]})]})})}),tu&&u.jsx("div",{style:{margin:"10px"}}),u.jsx(tB,{job:this.state.job}),u.jsx(Jo,{defaultShow:!0,title:"7-2-user-survey",titleNode:u.jsx("span",{children:p({en:"7.2 User Survey",zh:"7.2用户体验调查"})}),content:u.jsx(hN,{children:p({en:u.jsx(u.Fragment,{children:u.jsxs("p",{children:["Help us improve XIV in the Shell! Please take our user survey:"," ",u.jsx("b",{children:u.jsx("a",{target:"_blank",rel:"noreferrer",href:"https://forms.gle/eKVygxxZVd894323A",children:"https://forms.gle/eKVygxxZVd894323A"})})]})}),zh:u.jsx(u.Fragment,{children:u.jsxs("p",{children:["帮我们改进排轴器！请参加我们的用户体验调查："," ",u.jsx("b",{children:u.jsx("a",{target:"_blank",rel:"noreferrer",href:"https://www.wjx.cn/vm/mQ1gV2b.aspx",children:"https://www.wjx.cn/vm/mQ1gV2b.aspx"})})]})})})})})]}),u.jsxs("div",{style:{display:"flex",flexDirection:"row",position:"relative",marginBottom:"20px"},children:[d,u.jsx(iB,{height:this.state.controlRegionHeight})]}),u.jsx(j0,{}),u.jsx("hr",{style:{margin:"30px 0px",border:"none",borderTop:"1px solid "+n.bgHighContrast}}),u.jsx(UC,{})]})}),u.jsx(nw,{})]})})]})}}const oB=My.createRoot(document.getElementById("root")),sB=new URLSearchParams(document.location.search),AN=Array.from(sB.keys());oB.render(u.jsx(lB,{command:AN.length>0?AN[0]:void 0}));
